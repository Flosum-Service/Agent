const a28_0xc1c6b1=a28_0x42fd;function a28_0x42fd(_0xc52ea2,_0xd89a35){const _0x54664f=a28_0x4b20();return a28_0x42fd=function(_0x14e238,_0x305816){_0x14e238=_0x14e238-0xbc;let _0x4b201b=_0x54664f[_0x14e238];return _0x4b201b;},a28_0x42fd(_0xc52ea2,_0xd89a35);}(function(_0x29c2f2,_0x571482){const _0x572408=a28_0x42fd,_0x4153a5=_0x29c2f2();while(!![]){try{const _0xa7d29d=-parseInt(_0x572408(0xd1))/0x1*(-parseInt(_0x572408(0xe3))/0x2)+-parseInt(_0x572408(0xe7))/0x3+-parseInt(_0x572408(0xde))/0x4+-parseInt(_0x572408(0xdc))/0x5+parseInt(_0x572408(0xd6))/0x6+-parseInt(_0x572408(0xec))/0x7*(parseInt(_0x572408(0xd7))/0x8)+parseInt(_0x572408(0xd2))/0x9*(parseInt(_0x572408(0xbc))/0xa);if(_0xa7d29d===_0x571482)break;else _0x4153a5['push'](_0x4153a5['shift']());}catch(_0x13b5a3){_0x4153a5['push'](_0x4153a5['shift']());}}}(a28_0x4b20,0x27572));const a28_0x305816=(function(){let _0x189547=!![];return function(_0x50d48e,_0x54eb94){const _0x4801e5=_0x189547?function(){const _0x5961e4=a28_0x42fd;if(_0x54eb94){const _0x148e82=_0x54eb94[_0x5961e4(0xbd)](_0x50d48e,arguments);return _0x54eb94=null,_0x148e82;}}:function(){};return _0x189547=![],_0x4801e5;};}()),a28_0x14e238=a28_0x305816(this,function(){const _0x3e2555=a28_0x42fd;return a28_0x14e238[_0x3e2555(0xbe)]()[_0x3e2555(0xea)](_0x3e2555(0xe5))['toString']()['constructor'](a28_0x14e238)[_0x3e2555(0xea)](_0x3e2555(0xe5));});a28_0x14e238();'use strict';var __importDefault=this&&this[a28_0xc1c6b1(0xf6)]||function(_0x8f5e02){const _0x1ea551=a28_0xc1c6b1;return _0x8f5e02&&_0x8f5e02[_0x1ea551(0xd5)]?_0x8f5e02:{'default':_0x8f5e02};};Object[a28_0xc1c6b1(0xcc)](exports,a28_0xc1c6b1(0xd5),{'value':!![]}),exports['ControllerInjector']=void 0x0;function a28_0x4b20(){const _0x162523=['../classes/logger.class','getOwnMetadata','handlerWrapper','controllerType','\x20at\x20[','__importDefault','injectMiddlewares','injectHandlers','META_CONTROLLER_PREFIX','90vPNHoq','apply','toString','middlewareInjector','CONTROLLER_DEFAULT_PREFIX','express','use','name','getOwnPropertyNames','getPrototypeOf','middlewares','./middleware.injector','injecting\x20nested\x20','normalizePaths','nested','map','defineProperty','inject','router','META_CONTROLLER_MIDDLEWARES','nestedPath','1147jffuOs','635058SVvwfl','getHandlerMeta','prefix','__esModule','595626Xlpmvd','32PYKNzn','path','handlers','method','injectNestedController','356670SjkYfY','get','8440aSifqT','../utils','controller-injector','../constants','META_CONTROLLER','26zBQbJm','log','(((.+)+)+)+$','instance','700458hjjZuR','filter','root','search','injecting\x20','492051oqVAKW','ControllerInjector','\x20at\x20','META_CONTROLLER_PATH','META_CONTROLLER_VERSION'];a28_0x4b20=function(){return _0x162523;};return a28_0x4b20();}const express_1=require(a28_0xc1c6b1(0xc1)),typedi_1=__importDefault(require('typedi')),logger_class_1=require(a28_0xc1c6b1(0xf1)),constants_1=require(a28_0xc1c6b1(0xe1)),utils_1=require(a28_0xc1c6b1(0xdf)),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require(a28_0xc1c6b1(0xc7)),logger=new logger_class_1['Logger'](a28_0xc1c6b1(0xe0));class ControllerInjector{constructor(_0x2f8994,_0xac3c1f){const _0xd10789=a28_0xc1c6b1;this[_0xd10789(0xf4)]=_0x2f8994,this['root']=_0xac3c1f,this[_0xd10789(0xce)]=(0x0,express_1['Router'])({'mergeParams':!![]}),this[_0xd10789(0xd0)]='';if(!Reflect['getOwnMetadata'](constants_1[_0xd10789(0xe2)],_0x2f8994))throw TypeError(_0x2f8994[_0xd10789(0xc3)]+'\x20is\x20not\x20a\x20Controller');}get[a28_0xc1c6b1(0xd9)](){const _0x5c934a=a28_0xc1c6b1,_0x595a1f=Object[_0x5c934a(0xc5)](this[_0x5c934a(0xe6)]);return Object[_0x5c934a(0xc4)](_0x595a1f)[_0x5c934a(0xcb)](_0xc07b0a=>_0x595a1f[_0xc07b0a])[_0x5c934a(0xe8)](_0x2fc207=>!!Reflect[_0x5c934a(0xf2)](constants_1['META_HANDLER'],_0x2fc207));}get[a28_0xc1c6b1(0xc6)](){const _0x5545e5=a28_0xc1c6b1;return Reflect[_0x5545e5(0xf2)](constants_1[_0x5545e5(0xcf)],this[_0x5545e5(0xf4)])||[];}get[a28_0xc1c6b1(0xd4)](){const _0x307c08=a28_0xc1c6b1;var _0x3d1864;const _0x161e27=(_0x3d1864=Reflect['getOwnMetadata'](constants_1[_0x307c08(0xf9)],this[_0x307c08(0xf4)]))!==null&&_0x3d1864!==void 0x0?_0x3d1864:constants_1[_0x307c08(0xc0)],_0x5e49a1=Reflect[_0x307c08(0xf2)](constants_1[_0x307c08(0xf0)],this['controllerType'])||'';return this[_0x307c08(0xd0)]?'':(0x0,utils_1['normalizePaths'])(_0x161e27,_0x5e49a1);}get[a28_0xc1c6b1(0xd8)](){const _0x4861b6=a28_0xc1c6b1;if(this['nestedPath'])return this[_0x4861b6(0xd0)];const _0x44a7ef=Reflect['getOwnMetadata'](constants_1[_0x4861b6(0xef)],this[_0x4861b6(0xf4)])||'';return(0x0,utils_1['normalizePaths'])(_0x44a7ef);}get['instance'](){const _0x4bcac4=a28_0xc1c6b1;return typedi_1['default'][_0x4bcac4(0xdd)](this[_0x4bcac4(0xf4)]);}async[a28_0xc1c6b1(0xf7)](){const _0x1942be=a28_0xc1c6b1;for(const _0x6016a6 of this[_0x1942be(0xc6)]){const _0x35f312=await(0x0,middleware_injector_1[_0x1942be(0xbf)])(_0x6016a6);this[_0x1942be(0xce)][_0x1942be(0xc2)](_0x35f312);}}async['injectNestedController'](_0x240280){const _0x1a0817=a28_0xc1c6b1,_0x435d7c=_0x240280[_0x1a0817(0xca)];logger[_0x1a0817(0xe4)](_0x1a0817(0xc8)+_0x435d7c[_0x1a0817(0xc3)]+_0x1a0817(0xee)+this[_0x1a0817(0xd8)]+_0x240280['path']);const _0x540585=new ControllerInjector(_0x435d7c,this);_0x540585['nestedPath']=_0x240280[_0x1a0817(0xd8)],await _0x540585[_0x1a0817(0xcd)](this[_0x1a0817(0xce)]);}async[a28_0xc1c6b1(0xf8)](){const _0x5c7651=a28_0xc1c6b1;var _0x468816;for(const _0x2e30ba of this['handlers']){const _0x1ecabe=(0x0,utils_1[_0x5c7651(0xd3)])(_0x2e30ba);if(_0x1ecabe[_0x5c7651(0xca)])await this[_0x5c7651(0xdb)](_0x1ecabe);else{const _0x11b2d2=_0x1ecabe['method'][_0x5c7651(0xbe)]()['toLowerCase']();logger[_0x5c7651(0xe4)](_0x5c7651(0xeb)+this[_0x5c7651(0xf4)]['name']+'#'+_0x2e30ba['name']+_0x5c7651(0xf5)+_0x1ecabe[_0x5c7651(0xda)]+']\x20'+(0x0,utils_1[_0x5c7651(0xc9)])(((_0x468816=this[_0x5c7651(0xe9)])===null||_0x468816===void 0x0?void 0x0:_0x468816['path'])||'',this[_0x5c7651(0xd8)],_0x1ecabe['path'])),this[_0x5c7651(0xce)][_0x11b2d2](_0x1ecabe[_0x5c7651(0xd8)],(0x0,handler_wrapper_1[_0x5c7651(0xf3)])(_0x2e30ba,this[_0x5c7651(0xe6)]));}}}async[a28_0xc1c6b1(0xcd)](_0x24d34a){const _0xa07740=a28_0xc1c6b1;!this[_0xa07740(0xd0)]&&logger['log'](_0xa07740(0xeb)+this['controllerType'][_0xa07740(0xc3)]+'\x20{'+this[_0xa07740(0xd4)]+'}'),await this[_0xa07740(0xf7)](),await this[_0xa07740(0xf8)](),_0x24d34a[_0xa07740(0xc2)](''+this[_0xa07740(0xd4)]+this['path'],this[_0xa07740(0xce)]);}}exports[a28_0xc1c6b1(0xed)]=ControllerInjector;