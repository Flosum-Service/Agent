const a24_0x4a4fad=a24_0x1634;(function(_0x6dd790,_0x27e6d5){const _0x3a2337=a24_0x1634,_0x13435d=_0x6dd790();while(!![]){try{const _0x365f41=parseInt(_0x3a2337(0xfd))/0x1*(-parseInt(_0x3a2337(0xe8))/0x2)+parseInt(_0x3a2337(0xff))/0x3+parseInt(_0x3a2337(0xfb))/0x4+-parseInt(_0x3a2337(0xdf))/0x5+-parseInt(_0x3a2337(0xdc))/0x6+parseInt(_0x3a2337(0xe4))/0x7*(-parseInt(_0x3a2337(0x102))/0x8)+-parseInt(_0x3a2337(0xf6))/0x9*(-parseInt(_0x3a2337(0x101))/0xa);if(_0x365f41===_0x27e6d5)break;else _0x13435d['push'](_0x13435d['shift']());}catch(_0x446ce7){_0x13435d['push'](_0x13435d['shift']());}}}(a24_0x5406,0xda6ce));const a24_0x4baa02=(function(){let _0x2cc047=!![];return function(_0x447c39,_0x587d26){const _0x9a0c6=_0x2cc047?function(){const _0x2f63e3=a24_0x1634;if(_0x587d26){const _0x48064c=_0x587d26[_0x2f63e3(0xdd)](_0x447c39,arguments);return _0x587d26=null,_0x48064c;}}:function(){};return _0x2cc047=![],_0x9a0c6;};}()),a24_0x3d114f=a24_0x4baa02(this,function(){const _0x367713=a24_0x1634;return a24_0x3d114f[_0x367713(0xf3)]()[_0x367713(0xde)](_0x367713(0x10b))['toString']()[_0x367713(0xd8)](a24_0x3d114f)['search']('(((.+)+)+)+$');});function a24_0x1634(_0x435520,_0x14dc2a){const _0x584fc0=a24_0x5406();return a24_0x1634=function(_0x3d114f,_0x4baa02){_0x3d114f=_0x3d114f-0xd7;let _0x5406f3=_0x584fc0[_0x3d114f];return _0x5406f3;},a24_0x1634(_0x435520,_0x14dc2a);}a24_0x3d114f();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2e5c94){const _0x1ce344=a24_0x1634;return _0x2e5c94&&_0x2e5c94[_0x1ce344(0x10e)]?_0x2e5c94:{'default':_0x2e5c94};};Object[a24_0x4a4fad(0x108)](exports,'__esModule',{'value':!![]}),exports[a24_0x4a4fad(0xe1)]=void 0x0;function a24_0x5406(){const _0x481da2=['log','12ypiMeo','CONTROLLER_DEFAULT_PREFIX','getHandlerMeta','../utils','use','injectNestedController','middlewares','getOwnPropertyNames','router','handlers','getPrototypeOf','toString','controller-injector','map','333AXnJss','inject','META_CONTROLLER_PREFIX','\x20is\x20not\x20a\x20Controller','META_HANDLER','2820148vTZMmf','controllerType','273473SWcqdz','\x20at\x20','1254426dSRrmF','name','1060130WtwITO','8MdaUJU','typedi','filter','get','injectHandlers','method','defineProperty','nested','instance','(((.+)+)+)+$','injectMiddlewares','META_CONTROLLER_VERSION','__esModule','default','middlewareInjector','handlerWrapper','./middleware.injector','injecting\x20nested\x20','toLowerCase','injecting\x20','META_CONTROLLER','constructor','META_CONTROLLER_MIDDLEWARES','nestedPath','getOwnMetadata','4771494ERhJVI','apply','search','3367020cdSDfM','prefix','ControllerInjector','Router','root','7290493RNHUwV','../classes/logger.class','path'];a24_0x5406=function(){return _0x481da2;};return a24_0x5406();}const express_1=require('express'),typedi_1=__importDefault(require(a24_0x4a4fad(0x103))),logger_class_1=require(a24_0x4a4fad(0xe5)),constants_1=require('../constants'),utils_1=require(a24_0x4a4fad(0xeb)),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require(a24_0x4a4fad(0x112)),logger=new logger_class_1['Logger'](a24_0x4a4fad(0xf4));class ControllerInjector{constructor(_0x22e675,_0x5177db){const _0x4b2d8a=a24_0x4a4fad;this[_0x4b2d8a(0xfc)]=_0x22e675,this[_0x4b2d8a(0xe3)]=_0x5177db,this['router']=express_1[_0x4b2d8a(0xe2)]({'mergeParams':!![]}),this[_0x4b2d8a(0xda)]='';if(!Reflect['getOwnMetadata'](constants_1[_0x4b2d8a(0xd7)],_0x22e675))throw TypeError(_0x22e675[_0x4b2d8a(0x100)]+_0x4b2d8a(0xf9));}get[a24_0x4a4fad(0xf1)](){const _0x19a4f3=a24_0x4a4fad,_0x150175=Object[_0x19a4f3(0xf2)](this['instance']);return Object[_0x19a4f3(0xef)](_0x150175)[_0x19a4f3(0xf5)](_0x5f4c2e=>_0x150175[_0x5f4c2e])[_0x19a4f3(0x104)](_0x35585e=>!!Reflect['getOwnMetadata'](constants_1[_0x19a4f3(0xfa)],_0x35585e));}get['middlewares'](){const _0x152bfd=a24_0x4a4fad;return Reflect[_0x152bfd(0xdb)](constants_1[_0x152bfd(0xd9)],this['controllerType'])||[];}get[a24_0x4a4fad(0xe0)](){const _0x48cf4c=a24_0x4a4fad;var _0x1f1e10;const _0x18904f=(_0x1f1e10=Reflect[_0x48cf4c(0xdb)](constants_1[_0x48cf4c(0xf8)],this['controllerType']))!==null&&_0x1f1e10!==void 0x0?_0x1f1e10:constants_1[_0x48cf4c(0xe9)],_0x10b3f7=Reflect['getOwnMetadata'](constants_1[_0x48cf4c(0x10d)],this['controllerType'])||'';return this['nestedPath']?'':utils_1['normalizePaths'](_0x18904f,_0x10b3f7);}get[a24_0x4a4fad(0xe6)](){const _0x15b66a=a24_0x4a4fad;if(this[_0x15b66a(0xda)])return this['nestedPath'];const _0x1fc02b=Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_PATH'],this['controllerType'])||'';return utils_1['normalizePaths'](_0x1fc02b);}get[a24_0x4a4fad(0x10a)](){const _0x15b275=a24_0x4a4fad;return typedi_1[_0x15b275(0x10f)][_0x15b275(0x105)](this[_0x15b275(0xfc)]);}async[a24_0x4a4fad(0x10c)](){const _0x1eac43=a24_0x4a4fad;for(const _0xef6e37 of this[_0x1eac43(0xee)]){const _0x27af99=await middleware_injector_1[_0x1eac43(0x110)](_0xef6e37);this['router'][_0x1eac43(0xec)](_0x27af99);}}async[a24_0x4a4fad(0xed)](_0x1f55fd){const _0x5f7749=a24_0x4a4fad,_0x57698e=_0x1f55fd[_0x5f7749(0x109)];logger[_0x5f7749(0xe7)](_0x5f7749(0x113)+_0x57698e[_0x5f7749(0x100)]+_0x5f7749(0xfe)+this['path']+_0x1f55fd[_0x5f7749(0xe6)]);const _0x4e8f1f=new ControllerInjector(_0x57698e,this);_0x4e8f1f[_0x5f7749(0xda)]=_0x1f55fd[_0x5f7749(0xe6)],await _0x4e8f1f[_0x5f7749(0xf7)](this['router']);}async[a24_0x4a4fad(0x106)](){const _0x3a8d77=a24_0x4a4fad;var _0x50b16a;for(const _0x1ac9bf of this[_0x3a8d77(0xf1)]){const _0x38a872=utils_1[_0x3a8d77(0xea)](_0x1ac9bf);if(_0x38a872['nested'])await this[_0x3a8d77(0xed)](_0x38a872);else{const _0x1a70a0=_0x38a872['method'][_0x3a8d77(0xf3)]()[_0x3a8d77(0x114)]();logger[_0x3a8d77(0xe7)](_0x3a8d77(0x115)+this[_0x3a8d77(0xfc)][_0x3a8d77(0x100)]+'#'+_0x1ac9bf[_0x3a8d77(0x100)]+'\x20at\x20['+_0x38a872[_0x3a8d77(0x107)]+']\x20'+utils_1['normalizePaths'](((_0x50b16a=this[_0x3a8d77(0xe3)])===null||_0x50b16a===void 0x0?void 0x0:_0x50b16a[_0x3a8d77(0xe6)])||'',this['path'],_0x38a872[_0x3a8d77(0xe6)])),this[_0x3a8d77(0xf0)][_0x1a70a0](_0x38a872['path'],handler_wrapper_1[_0x3a8d77(0x111)](_0x1ac9bf,this[_0x3a8d77(0x10a)]));}}}async['inject'](_0x44ddec){const _0x584d94=a24_0x4a4fad;!this[_0x584d94(0xda)]&&logger[_0x584d94(0xe7)](_0x584d94(0x115)+this['controllerType']['name']+'\x20{'+this[_0x584d94(0xe0)]+'}'),await this[_0x584d94(0x10c)](),await this['injectHandlers'](),_0x44ddec[_0x584d94(0xec)](''+this[_0x584d94(0xe0)]+this[_0x584d94(0xe6)],this[_0x584d94(0xf0)]);}}exports[a24_0x4a4fad(0xe1)]=ControllerInjector;