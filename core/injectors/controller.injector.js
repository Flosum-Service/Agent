function a27_0x2461(){const _0x4def08=['method','META_CONTROLLER_PREFIX','\x20at\x20','get','./middleware.injector','ControllerInjector','6293385rvRSsu','inject','META_HANDLER','../constants','nestedPath','\x20is\x20not\x20a\x20Controller','map','toLowerCase','injectNestedController','name','1016100ycFwiR','handlers','\x20at\x20[','CONTROLLER_DEFAULT_PREFIX','injectHandlers','injectMiddlewares','injecting\x20nested\x20','(((.+)+)+)+$','META_CONTROLLER','path','controllerType','defineProperty','apply','middlewareInjector','search','8GMxEyY','nested','getPrototypeOf','getOwnMetadata','normalizePaths','3082572cXTXEo','394mwnxxY','instance','express','Router','getHandlerMeta','use','prefix','toString','default','__esModule','constructor','root','getOwnPropertyNames','log','478236cZiFOx','1178067AfQSTv','3278bZtWin','156QnwCMg','10dihLvk','META_CONTROLLER_VERSION','handlerWrapper','5auJEpd','router','META_CONTROLLER_MIDDLEWARES','1353426aPJBxH'];a27_0x2461=function(){return _0x4def08;};return a27_0x2461();}const a27_0x75d6ac=a27_0x4ee1;(function(_0x85c8c9,_0x4bad1a){const _0x43adfc=a27_0x4ee1,_0x36eafa=_0x85c8c9();while(!![]){try{const _0x5cf707=parseInt(_0x43adfc(0x173))/0x1*(-parseInt(_0x43adfc(0x163))/0x2)+parseInt(_0x43adfc(0x172))/0x3+parseInt(_0x43adfc(0x18c))/0x4+parseInt(_0x43adfc(0x178))/0x5*(-parseInt(_0x43adfc(0x17b))/0x6)+parseInt(_0x43adfc(0x182))/0x7*(parseInt(_0x43adfc(0x15d))/0x8)+parseInt(_0x43adfc(0x162))/0x9*(parseInt(_0x43adfc(0x175))/0xa)+-parseInt(_0x43adfc(0x171))/0xb*(parseInt(_0x43adfc(0x174))/0xc);if(_0x5cf707===_0x4bad1a)break;else _0x36eafa['push'](_0x36eafa['shift']());}catch(_0x30093b){_0x36eafa['push'](_0x36eafa['shift']());}}}(a27_0x2461,0x6e4a8));const a27_0x23115a=(function(){let _0x11e721=!![];return function(_0x4c90fb,_0x2c6cc0){const _0x271719=_0x11e721?function(){const _0x58f363=a27_0x4ee1;if(_0x2c6cc0){const _0x4ff678=_0x2c6cc0[_0x58f363(0x15a)](_0x4c90fb,arguments);return _0x2c6cc0=null,_0x4ff678;}}:function(){};return _0x11e721=![],_0x271719;};}()),a27_0x5bd5cb=a27_0x23115a(this,function(){const _0x478e62=a27_0x4ee1;return a27_0x5bd5cb[_0x478e62(0x16a)]()[_0x478e62(0x15c)]('(((.+)+)+)+$')[_0x478e62(0x16a)]()[_0x478e62(0x16d)](a27_0x5bd5cb)[_0x478e62(0x15c)](_0x478e62(0x155));});a27_0x5bd5cb();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3db4c8){const _0x2895ab=a27_0x4ee1;return _0x3db4c8&&_0x3db4c8[_0x2895ab(0x16c)]?_0x3db4c8:{'default':_0x3db4c8};};function a27_0x4ee1(_0x437882,_0x42e67b){const _0x4169ef=a27_0x2461();return a27_0x4ee1=function(_0x5bd5cb,_0x23115a){_0x5bd5cb=_0x5bd5cb-0x155;let _0x246182=_0x4169ef[_0x5bd5cb];return _0x246182;},a27_0x4ee1(_0x437882,_0x42e67b);}Object[a27_0x75d6ac(0x159)](exports,a27_0x75d6ac(0x16c),{'value':!![]}),exports[a27_0x75d6ac(0x181)]=void 0x0;const express_1=require(a27_0x75d6ac(0x165)),typedi_1=__importDefault(require('typedi')),logger_class_1=require('../classes/logger.class'),constants_1=require(a27_0x75d6ac(0x185)),utils_1=require('../utils'),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require(a27_0x75d6ac(0x180)),logger=new logger_class_1['Logger']('controller-injector');class ControllerInjector{constructor(_0x186541,_0x2d5eb4){const _0x12abd7=a27_0x75d6ac;this[_0x12abd7(0x158)]=_0x186541,this[_0x12abd7(0x16e)]=_0x2d5eb4,this[_0x12abd7(0x179)]=(0x0,express_1[_0x12abd7(0x166)])({'mergeParams':!![]}),this['nestedPath']='';if(!Reflect[_0x12abd7(0x160)](constants_1[_0x12abd7(0x156)],_0x186541))throw TypeError(_0x186541[_0x12abd7(0x18b)]+_0x12abd7(0x187));}get[a27_0x75d6ac(0x18d)](){const _0x1e114a=a27_0x75d6ac,_0xb7863=Object[_0x1e114a(0x15f)](this[_0x1e114a(0x164)]);return Object[_0x1e114a(0x16f)](_0xb7863)[_0x1e114a(0x188)](_0x247d82=>_0xb7863[_0x247d82])['filter'](_0x787d6f=>!!Reflect['getOwnMetadata'](constants_1[_0x1e114a(0x184)],_0x787d6f));}get['middlewares'](){const _0xa0e6a2=a27_0x75d6ac;return Reflect['getOwnMetadata'](constants_1[_0xa0e6a2(0x17a)],this[_0xa0e6a2(0x158)])||[];}get[a27_0x75d6ac(0x169)](){const _0x1c1cf1=a27_0x75d6ac;var _0x596b03;const _0x1e2599=(_0x596b03=Reflect['getOwnMetadata'](constants_1[_0x1c1cf1(0x17d)],this['controllerType']))!==null&&_0x596b03!==void 0x0?_0x596b03:constants_1[_0x1c1cf1(0x18f)],_0x211ca4=Reflect['getOwnMetadata'](constants_1[_0x1c1cf1(0x176)],this[_0x1c1cf1(0x158)])||'';return this[_0x1c1cf1(0x186)]?'':(0x0,utils_1['normalizePaths'])(_0x1e2599,_0x211ca4);}get[a27_0x75d6ac(0x157)](){const _0x57ec9b=a27_0x75d6ac;if(this['nestedPath'])return this['nestedPath'];const _0x15f798=Reflect[_0x57ec9b(0x160)](constants_1['META_CONTROLLER_PATH'],this['controllerType'])||'';return(0x0,utils_1[_0x57ec9b(0x161)])(_0x15f798);}get[a27_0x75d6ac(0x164)](){const _0x457533=a27_0x75d6ac;return typedi_1[_0x457533(0x16b)][_0x457533(0x17f)](this['controllerType']);}async[a27_0x75d6ac(0x191)](){const _0x4487a1=a27_0x75d6ac;for(const _0x5d4b67 of this['middlewares']){const _0x47ac65=await(0x0,middleware_injector_1[_0x4487a1(0x15b)])(_0x5d4b67);this['router']['use'](_0x47ac65);}}async[a27_0x75d6ac(0x18a)](_0x5ed144){const _0x1920e8=a27_0x75d6ac,_0x5f40e5=_0x5ed144[_0x1920e8(0x15e)];logger[_0x1920e8(0x170)](_0x1920e8(0x192)+_0x5f40e5[_0x1920e8(0x18b)]+_0x1920e8(0x17e)+this[_0x1920e8(0x157)]+_0x5ed144[_0x1920e8(0x157)]);const _0x32bc9e=new ControllerInjector(_0x5f40e5,this);_0x32bc9e[_0x1920e8(0x186)]=_0x5ed144[_0x1920e8(0x157)],await _0x32bc9e[_0x1920e8(0x183)](this[_0x1920e8(0x179)]);}async[a27_0x75d6ac(0x190)](){const _0x117ea1=a27_0x75d6ac;var _0x375877;for(const _0x477d5c of this[_0x117ea1(0x18d)]){const _0x9ef02e=(0x0,utils_1[_0x117ea1(0x167)])(_0x477d5c);if(_0x9ef02e['nested'])await this[_0x117ea1(0x18a)](_0x9ef02e);else{const _0x2d9abc=_0x9ef02e[_0x117ea1(0x17c)]['toString']()[_0x117ea1(0x189)]();logger[_0x117ea1(0x170)]('injecting\x20'+this[_0x117ea1(0x158)][_0x117ea1(0x18b)]+'#'+_0x477d5c['name']+_0x117ea1(0x18e)+_0x9ef02e[_0x117ea1(0x17c)]+']\x20'+(0x0,utils_1[_0x117ea1(0x161)])(((_0x375877=this['root'])===null||_0x375877===void 0x0?void 0x0:_0x375877['path'])||'',this['path'],_0x9ef02e[_0x117ea1(0x157)])),this[_0x117ea1(0x179)][_0x2d9abc](_0x9ef02e['path'],(0x0,handler_wrapper_1[_0x117ea1(0x177)])(_0x477d5c,this[_0x117ea1(0x164)]));}}}async[a27_0x75d6ac(0x183)](_0x53c274){const _0x32f3f9=a27_0x75d6ac;!this[_0x32f3f9(0x186)]&&logger[_0x32f3f9(0x170)]('injecting\x20'+this['controllerType'][_0x32f3f9(0x18b)]+'\x20{'+this[_0x32f3f9(0x169)]+'}'),await this[_0x32f3f9(0x191)](),await this['injectHandlers'](),_0x53c274[_0x32f3f9(0x168)](''+this['prefix']+this[_0x32f3f9(0x157)],this['router']);}}exports['ControllerInjector']=ControllerInjector;