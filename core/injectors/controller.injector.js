const a28_0x2ff449=a28_0x58a1;(function(_0x4fcbd8,_0x76157b){const _0x377bb3=a28_0x58a1,_0x5ee3b9=_0x4fcbd8();while(!![]){try{const _0xfc53b9=-parseInt(_0x377bb3(0x15f))/0x1*(-parseInt(_0x377bb3(0x14d))/0x2)+parseInt(_0x377bb3(0x159))/0x3*(-parseInt(_0x377bb3(0x14b))/0x4)+parseInt(_0x377bb3(0x147))/0x5*(parseInt(_0x377bb3(0x15e))/0x6)+parseInt(_0x377bb3(0x16e))/0x7*(-parseInt(_0x377bb3(0x165))/0x8)+parseInt(_0x377bb3(0x156))/0x9+parseInt(_0x377bb3(0x162))/0xa*(parseInt(_0x377bb3(0x16a))/0xb)+-parseInt(_0x377bb3(0x17e))/0xc;if(_0xfc53b9===_0x76157b)break;else _0x5ee3b9['push'](_0x5ee3b9['shift']());}catch(_0x54d102){_0x5ee3b9['push'](_0x5ee3b9['shift']());}}}(a28_0x1d0a,0x60c31));function a28_0x58a1(_0xc034fa,_0x933113){const _0x2c16d5=a28_0x1d0a();return a28_0x58a1=function(_0x4deefa,_0x2b66f0){_0x4deefa=_0x4deefa-0x147;let _0x1d0a24=_0x2c16d5[_0x4deefa];return _0x1d0a24;},a28_0x58a1(_0xc034fa,_0x933113);}function a28_0x1d0a(){const _0x5593ff=['injecting\x20','Logger','(((.+)+)+)+$','__esModule','use','./middleware.injector','getHandlerMeta','2727792iwniPc','apply','path','nested','50AtXejA','getOwnMetadata','handlers','prefix','4xUzMoK','log','4WwRlvN','injectHandlers','filter','\x20at\x20','controllerType','method','META_CONTROLLER_PATH','router','\x20at\x20[','5699871nQmepX','injectMiddlewares','toString','1088943VVNYTy','map','ControllerInjector','handlerWrapper','nestedPath','351948mdbyav','262439dfVdQo','get','root','15150GRiqza','../classes/logger.class','getPrototypeOf','16oEbKlc','META_HANDLER','middlewares','META_CONTROLLER_PREFIX','constructor','55ceouZT','META_CONTROLLER_VERSION','search','instance','2680013Iafjsz','injectNestedController','typedi','controller-injector','inject','name','META_CONTROLLER','../constants','normalizePaths'];a28_0x1d0a=function(){return _0x5593ff;};return a28_0x1d0a();}const a28_0x2b66f0=(function(){let _0x15f889=!![];return function(_0x1373f1,_0x220cc7){const _0x3b7dee=_0x15f889?function(){const _0x994d5=a28_0x58a1;if(_0x220cc7){const _0x564ac7=_0x220cc7[_0x994d5(0x17f)](_0x1373f1,arguments);return _0x220cc7=null,_0x564ac7;}}:function(){};return _0x15f889=![],_0x3b7dee;};}()),a28_0x4deefa=a28_0x2b66f0(this,function(){const _0x1747ce=a28_0x58a1;return a28_0x4deefa[_0x1747ce(0x158)]()['search'](_0x1747ce(0x179))[_0x1747ce(0x158)]()[_0x1747ce(0x169)](a28_0x4deefa)[_0x1747ce(0x16c)](_0x1747ce(0x179));});a28_0x4deefa();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x491bad){const _0xecbd5b=a28_0x58a1;return _0x491bad&&_0x491bad[_0xecbd5b(0x17a)]?_0x491bad:{'default':_0x491bad};};Object['defineProperty'](exports,a28_0x2ff449(0x17a),{'value':!![]}),exports[a28_0x2ff449(0x15b)]=void 0x0;const express_1=require('express'),typedi_1=__importDefault(require(a28_0x2ff449(0x170))),logger_class_1=require(a28_0x2ff449(0x163)),constants_1=require(a28_0x2ff449(0x175)),utils_1=require('../utils'),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require(a28_0x2ff449(0x17c)),logger=new logger_class_1[(a28_0x2ff449(0x178))](a28_0x2ff449(0x171));class ControllerInjector{constructor(_0x4db0af,_0x2ea348){const _0x81346=a28_0x2ff449;this[_0x81346(0x151)]=_0x4db0af,this[_0x81346(0x161)]=_0x2ea348,this[_0x81346(0x154)]=(0x0,express_1['Router'])({'mergeParams':!![]}),this['nestedPath']='';if(!Reflect['getOwnMetadata'](constants_1[_0x81346(0x174)],_0x4db0af))throw TypeError(_0x4db0af[_0x81346(0x173)]+'\x20is\x20not\x20a\x20Controller');}get[a28_0x2ff449(0x149)](){const _0x5dc1ff=a28_0x2ff449,_0x2d381d=Object[_0x5dc1ff(0x164)](this[_0x5dc1ff(0x16d)]);return Object['getOwnPropertyNames'](_0x2d381d)[_0x5dc1ff(0x15a)](_0xb25bef=>_0x2d381d[_0xb25bef])[_0x5dc1ff(0x14f)](_0x240c9b=>!!Reflect[_0x5dc1ff(0x148)](constants_1[_0x5dc1ff(0x166)],_0x240c9b));}get[a28_0x2ff449(0x167)](){const _0xf3bf90=a28_0x2ff449;return Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_MIDDLEWARES'],this[_0xf3bf90(0x151)])||[];}get[a28_0x2ff449(0x14a)](){const _0x532671=a28_0x2ff449;var _0x4a84bd;const _0x33c36a=(_0x4a84bd=Reflect['getOwnMetadata'](constants_1[_0x532671(0x168)],this[_0x532671(0x151)]))!==null&&_0x4a84bd!==void 0x0?_0x4a84bd:constants_1['CONTROLLER_DEFAULT_PREFIX'],_0x5ae98b=Reflect[_0x532671(0x148)](constants_1[_0x532671(0x16b)],this[_0x532671(0x151)])||'';return this[_0x532671(0x15d)]?'':(0x0,utils_1[_0x532671(0x176)])(_0x33c36a,_0x5ae98b);}get['path'](){const _0x30c4e9=a28_0x2ff449;if(this[_0x30c4e9(0x15d)])return this[_0x30c4e9(0x15d)];const _0x4aef8a=Reflect[_0x30c4e9(0x148)](constants_1[_0x30c4e9(0x153)],this[_0x30c4e9(0x151)])||'';return(0x0,utils_1[_0x30c4e9(0x176)])(_0x4aef8a);}get[a28_0x2ff449(0x16d)](){const _0x317718=a28_0x2ff449;return typedi_1['default'][_0x317718(0x160)](this[_0x317718(0x151)]);}async[a28_0x2ff449(0x157)](){const _0x3f0c0d=a28_0x2ff449;for(const _0x55534a of this[_0x3f0c0d(0x167)]){const _0x306c20=await(0x0,middleware_injector_1['middlewareInjector'])(_0x55534a);this[_0x3f0c0d(0x154)]['use'](_0x306c20);}}async[a28_0x2ff449(0x16f)](_0x538212){const _0xb9f7cc=a28_0x2ff449,_0x19bdf1=_0x538212['nested'];logger[_0xb9f7cc(0x14c)]('injecting\x20nested\x20'+_0x19bdf1[_0xb9f7cc(0x173)]+_0xb9f7cc(0x150)+this[_0xb9f7cc(0x180)]+_0x538212[_0xb9f7cc(0x180)]);const _0x1cdf9b=new ControllerInjector(_0x19bdf1,this);_0x1cdf9b[_0xb9f7cc(0x15d)]=_0x538212[_0xb9f7cc(0x180)],await _0x1cdf9b['inject'](this[_0xb9f7cc(0x154)]);}async[a28_0x2ff449(0x14e)](){const _0x5c1382=a28_0x2ff449;var _0x2cc6b0;for(const _0x14e145 of this['handlers']){const _0x1f6585=(0x0,utils_1[_0x5c1382(0x17d)])(_0x14e145);if(_0x1f6585[_0x5c1382(0x181)])await this[_0x5c1382(0x16f)](_0x1f6585);else{const _0x5ccd11=_0x1f6585[_0x5c1382(0x152)][_0x5c1382(0x158)]()['toLowerCase']();logger[_0x5c1382(0x14c)](_0x5c1382(0x177)+this[_0x5c1382(0x151)][_0x5c1382(0x173)]+'#'+_0x14e145[_0x5c1382(0x173)]+_0x5c1382(0x155)+_0x1f6585[_0x5c1382(0x152)]+']\x20'+(0x0,utils_1[_0x5c1382(0x176)])(((_0x2cc6b0=this['root'])===null||_0x2cc6b0===void 0x0?void 0x0:_0x2cc6b0[_0x5c1382(0x180)])||'',this['path'],_0x1f6585[_0x5c1382(0x180)])),this[_0x5c1382(0x154)][_0x5ccd11](_0x1f6585[_0x5c1382(0x180)],(0x0,handler_wrapper_1[_0x5c1382(0x15c)])(_0x14e145,this[_0x5c1382(0x16d)]));}}}async[a28_0x2ff449(0x172)](_0x201d37){const _0x4a4f28=a28_0x2ff449;!this[_0x4a4f28(0x15d)]&&logger['log']('injecting\x20'+this[_0x4a4f28(0x151)][_0x4a4f28(0x173)]+'\x20{'+this['prefix']+'}'),await this[_0x4a4f28(0x157)](),await this[_0x4a4f28(0x14e)](),_0x201d37[_0x4a4f28(0x17b)](''+this['prefix']+this[_0x4a4f28(0x180)],this[_0x4a4f28(0x154)]);}}exports[a28_0x2ff449(0x15b)]=ControllerInjector;