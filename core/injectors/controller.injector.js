const a27_0x5d7e8b=a27_0x1feb;(function(_0x28461a,_0x27b1ae){const _0x58f26e=a27_0x1feb,_0x2b87b2=_0x28461a();while(!![]){try{const _0x33a901=parseInt(_0x58f26e(0x222))/0x1*(-parseInt(_0x58f26e(0x1fc))/0x2)+-parseInt(_0x58f26e(0x201))/0x3+-parseInt(_0x58f26e(0x1f7))/0x4+-parseInt(_0x58f26e(0x1f2))/0x5+parseInt(_0x58f26e(0x225))/0x6+parseInt(_0x58f26e(0x218))/0x7*(parseInt(_0x58f26e(0x213))/0x8)+-parseInt(_0x58f26e(0x1f9))/0x9*(-parseInt(_0x58f26e(0x1ff))/0xa);if(_0x33a901===_0x27b1ae)break;else _0x2b87b2['push'](_0x2b87b2['shift']());}catch(_0x4a57da){_0x2b87b2['push'](_0x2b87b2['shift']());}}}(a27_0x184f,0xb4cda));const a27_0x25d4f8=(function(){let _0x3a1006=!![];return function(_0x75e604,_0x2bd35f){const _0x50858f=_0x3a1006?function(){if(_0x2bd35f){const _0x2b3aaa=_0x2bd35f['apply'](_0x75e604,arguments);return _0x2bd35f=null,_0x2b3aaa;}}:function(){};return _0x3a1006=![],_0x50858f;};}()),a27_0x79e65c=a27_0x25d4f8(this,function(){const _0x4d11b3=a27_0x1feb;return a27_0x79e65c['toString']()[_0x4d11b3(0x1ed)](_0x4d11b3(0x1fd))['toString']()[_0x4d11b3(0x1ea)](a27_0x79e65c)[_0x4d11b3(0x1ed)](_0x4d11b3(0x1fd));});a27_0x79e65c();function a27_0x1feb(_0x1272ac,_0x57cd77){const _0x527463=a27_0x184f();return a27_0x1feb=function(_0x79e65c,_0x25d4f8){_0x79e65c=_0x79e65c-0x1e9;let _0x184f3a=_0x527463[_0x79e65c];return _0x184f3a;},a27_0x1feb(_0x1272ac,_0x57cd77);}function a27_0x184f(){const _0x368341=['../constants','ControllerInjector','\x20at\x20','router','toString','nested','injectMiddlewares','getOwnPropertyNames','log','injectNestedController','injecting\x20','instance','name','method','__importDefault','middlewares','getHandlerMeta','149288IMKeiQ','CONTROLLER_DEFAULT_PREFIX','inject','use','META_CONTROLLER_PATH','259STUAxd','injectHandlers','typedi','META_CONTROLLER_PREFIX','\x20is\x20not\x20a\x20Controller','handlers','prefix','normalizePaths','getPrototypeOf','Router','5701hIKFBS','toLowerCase','../wrappers/handler.wrapper','4236018gMHKXW','filter','controllerType','defineProperty','root','constructor','META_CONTROLLER_VERSION','__esModule','search','getOwnMetadata','default','handlerWrapper','nestedPath','4686385nvKmHi','path','Logger','META_CONTROLLER_MIDDLEWARES','./middleware.injector','2076360bdSYXz','map','171WqafUz','controller-injector','../classes/logger.class','110VsSOCd','(((.+)+)+)+$','META_CONTROLLER','1045440LmWJpA','\x20at\x20[','2616912wsoTQV'];a27_0x184f=function(){return _0x368341;};return a27_0x184f();}'use strict';var __importDefault=this&&this[a27_0x5d7e8b(0x210)]||function(_0x4e4fc4){return _0x4e4fc4&&_0x4e4fc4['__esModule']?_0x4e4fc4:{'default':_0x4e4fc4};};Object[a27_0x5d7e8b(0x228)](exports,a27_0x5d7e8b(0x1ec),{'value':!![]}),exports[a27_0x5d7e8b(0x203)]=void 0x0;const express_1=require('express'),typedi_1=__importDefault(require(a27_0x5d7e8b(0x21a))),logger_class_1=require(a27_0x5d7e8b(0x1fb)),constants_1=require(a27_0x5d7e8b(0x202)),utils_1=require('../utils'),handler_wrapper_1=require(a27_0x5d7e8b(0x224)),middleware_injector_1=require(a27_0x5d7e8b(0x1f6)),logger=new logger_class_1[(a27_0x5d7e8b(0x1f4))](a27_0x5d7e8b(0x1fa));class ControllerInjector{constructor(_0x12e1c6,_0x4e466a){const _0x5ee568=a27_0x5d7e8b;this[_0x5ee568(0x227)]=_0x12e1c6,this[_0x5ee568(0x1e9)]=_0x4e466a,this[_0x5ee568(0x205)]=(0x0,express_1[_0x5ee568(0x221)])({'mergeParams':!![]}),this[_0x5ee568(0x1f1)]='';if(!Reflect[_0x5ee568(0x1ee)](constants_1[_0x5ee568(0x1fe)],_0x12e1c6))throw TypeError(_0x12e1c6[_0x5ee568(0x20e)]+_0x5ee568(0x21c));}get[a27_0x5d7e8b(0x21d)](){const _0x13870c=a27_0x5d7e8b,_0x4deb12=Object[_0x13870c(0x220)](this[_0x13870c(0x20d)]);return Object[_0x13870c(0x209)](_0x4deb12)[_0x13870c(0x1f8)](_0x5bd0fc=>_0x4deb12[_0x5bd0fc])[_0x13870c(0x226)](_0x144c81=>!!Reflect[_0x13870c(0x1ee)](constants_1['META_HANDLER'],_0x144c81));}get['middlewares'](){const _0x101dca=a27_0x5d7e8b;return Reflect['getOwnMetadata'](constants_1[_0x101dca(0x1f5)],this[_0x101dca(0x227)])||[];}get[a27_0x5d7e8b(0x21e)](){const _0x5c098c=a27_0x5d7e8b;var _0x4c9d03;const _0x312c0f=(_0x4c9d03=Reflect[_0x5c098c(0x1ee)](constants_1[_0x5c098c(0x21b)],this[_0x5c098c(0x227)]))!==null&&_0x4c9d03!==void 0x0?_0x4c9d03:constants_1[_0x5c098c(0x214)],_0x476b73=Reflect['getOwnMetadata'](constants_1[_0x5c098c(0x1eb)],this[_0x5c098c(0x227)])||'';return this[_0x5c098c(0x1f1)]?'':(0x0,utils_1['normalizePaths'])(_0x312c0f,_0x476b73);}get['path'](){const _0x12ab97=a27_0x5d7e8b;if(this['nestedPath'])return this['nestedPath'];const _0x7b6089=Reflect[_0x12ab97(0x1ee)](constants_1[_0x12ab97(0x217)],this['controllerType'])||'';return(0x0,utils_1[_0x12ab97(0x21f)])(_0x7b6089);}get['instance'](){const _0x2b1d89=a27_0x5d7e8b;return typedi_1[_0x2b1d89(0x1ef)]['get'](this[_0x2b1d89(0x227)]);}async[a27_0x5d7e8b(0x208)](){const _0x4bce30=a27_0x5d7e8b;for(const _0x48459a of this[_0x4bce30(0x211)]){const _0x3d1227=await(0x0,middleware_injector_1['middlewareInjector'])(_0x48459a);this[_0x4bce30(0x205)][_0x4bce30(0x216)](_0x3d1227);}}async[a27_0x5d7e8b(0x20b)](_0xa7616d){const _0x275493=a27_0x5d7e8b,_0x5bf680=_0xa7616d[_0x275493(0x207)];logger[_0x275493(0x20a)]('injecting\x20nested\x20'+_0x5bf680['name']+_0x275493(0x204)+this['path']+_0xa7616d[_0x275493(0x1f3)]);const _0x2adbcd=new ControllerInjector(_0x5bf680,this);_0x2adbcd[_0x275493(0x1f1)]=_0xa7616d[_0x275493(0x1f3)],await _0x2adbcd[_0x275493(0x215)](this[_0x275493(0x205)]);}async['injectHandlers'](){const _0x5c53f=a27_0x5d7e8b;var _0x477284;for(const _0x4cc2ee of this[_0x5c53f(0x21d)]){const _0x5b021a=(0x0,utils_1[_0x5c53f(0x212)])(_0x4cc2ee);if(_0x5b021a[_0x5c53f(0x207)])await this['injectNestedController'](_0x5b021a);else{const _0x520a5b=_0x5b021a[_0x5c53f(0x20f)][_0x5c53f(0x206)]()[_0x5c53f(0x223)]();logger[_0x5c53f(0x20a)](_0x5c53f(0x20c)+this[_0x5c53f(0x227)][_0x5c53f(0x20e)]+'#'+_0x4cc2ee[_0x5c53f(0x20e)]+_0x5c53f(0x200)+_0x5b021a['method']+']\x20'+(0x0,utils_1[_0x5c53f(0x21f)])(((_0x477284=this['root'])===null||_0x477284===void 0x0?void 0x0:_0x477284[_0x5c53f(0x1f3)])||'',this[_0x5c53f(0x1f3)],_0x5b021a[_0x5c53f(0x1f3)])),this[_0x5c53f(0x205)][_0x520a5b](_0x5b021a[_0x5c53f(0x1f3)],(0x0,handler_wrapper_1[_0x5c53f(0x1f0)])(_0x4cc2ee,this[_0x5c53f(0x20d)]));}}}async[a27_0x5d7e8b(0x215)](_0xdaea46){const _0x126d9f=a27_0x5d7e8b;!this[_0x126d9f(0x1f1)]&&logger[_0x126d9f(0x20a)](_0x126d9f(0x20c)+this[_0x126d9f(0x227)]['name']+'\x20{'+this[_0x126d9f(0x21e)]+'}'),await this[_0x126d9f(0x208)](),await this[_0x126d9f(0x219)](),_0xdaea46[_0x126d9f(0x216)](''+this[_0x126d9f(0x21e)]+this[_0x126d9f(0x1f3)],this[_0x126d9f(0x205)]);}}exports['ControllerInjector']=ControllerInjector;