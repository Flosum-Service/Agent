const a28_0x14feb0=a28_0x106a;(function(_0x5ecc48,_0xa1e257){const _0xaeb936=a28_0x106a,_0x2e0c51=_0x5ecc48();while(!![]){try{const _0x57b733=-parseInt(_0xaeb936(0x173))/0x1*(-parseInt(_0xaeb936(0x179))/0x2)+-parseInt(_0xaeb936(0x17c))/0x3+-parseInt(_0xaeb936(0x165))/0x4+parseInt(_0xaeb936(0x183))/0x5*(parseInt(_0xaeb936(0x17e))/0x6)+parseInt(_0xaeb936(0x14b))/0x7*(parseInt(_0xaeb936(0x16b))/0x8)+-parseInt(_0xaeb936(0x170))/0x9+parseInt(_0xaeb936(0x147))/0xa;if(_0x57b733===_0xa1e257)break;else _0x2e0c51['push'](_0x2e0c51['shift']());}catch(_0x513c15){_0x2e0c51['push'](_0x2e0c51['shift']());}}}(a28_0x5ed3,0x95dea));const a28_0x3161f3=(function(){let _0x5aae4a=!![];return function(_0x33da1d,_0x3f7c02){const _0x4be404=_0x5aae4a?function(){if(_0x3f7c02){const _0x1d67c7=_0x3f7c02['apply'](_0x33da1d,arguments);return _0x3f7c02=null,_0x1d67c7;}}:function(){};return _0x5aae4a=![],_0x4be404;};}()),a28_0x3745cf=a28_0x3161f3(this,function(){const _0x240889=a28_0x106a;return a28_0x3745cf[_0x240889(0x177)]()[_0x240889(0x180)](_0x240889(0x174))[_0x240889(0x177)]()[_0x240889(0x148)](a28_0x3745cf)[_0x240889(0x180)](_0x240889(0x174));});a28_0x3745cf();'use strict';function a28_0x5ed3(){const _0x1219ae=['path','getOwnMetadata','__esModule','434493vMtqVv','name','typedi','1sxzXuH','(((.+)+)+)+$','handlers','get','toString','router','158358rMHJNx','controllerType','META_CONTROLLER_PREFIX','3621345EvgFbF','root','3882FOLjTm','toLowerCase','search','CONTROLLER_DEFAULT_PREFIX','normalizePaths','6815yoICtW','7813130KlxIoI','constructor','injectHandlers','\x20at\x20','312424pCrDQs','method','map','META_CONTROLLER','META_CONTROLLER_PATH','Router','getOwnPropertyNames','injectMiddlewares','injecting\x20','log','injectNestedController','controller-injector','META_HANDLER','Logger','nestedPath','prefix','../wrappers/handler.wrapper','nested','META_CONTROLLER_VERSION','injecting\x20nested\x20','middlewares','../utils','META_CONTROLLER_MIDDLEWARES','../constants','use','../classes/logger.class','1634716lhBKsw','middlewareInjector','default','instance','handlerWrapper','getPrototypeOf','96mTTYtT','\x20is\x20not\x20a\x20Controller'];a28_0x5ed3=function(){return _0x1219ae;};return a28_0x5ed3();}var __importDefault=this&&this['__importDefault']||function(_0x1d1af9){const _0x4a738c=a28_0x106a;return _0x1d1af9&&_0x1d1af9[_0x4a738c(0x16f)]?_0x1d1af9:{'default':_0x1d1af9};};Object['defineProperty'](exports,a28_0x14feb0(0x16f),{'value':!![]}),exports['ControllerInjector']=void 0x0;function a28_0x106a(_0x3a84f0,_0x40b397){const _0x93df37=a28_0x5ed3();return a28_0x106a=function(_0x3745cf,_0x3161f3){_0x3745cf=_0x3745cf-0x147;let _0x5ed336=_0x93df37[_0x3745cf];return _0x5ed336;},a28_0x106a(_0x3a84f0,_0x40b397);}const express_1=require('express'),typedi_1=__importDefault(require(a28_0x14feb0(0x172))),logger_class_1=require(a28_0x14feb0(0x164)),constants_1=require(a28_0x14feb0(0x162)),utils_1=require(a28_0x14feb0(0x160)),handler_wrapper_1=require(a28_0x14feb0(0x15b)),middleware_injector_1=require('./middleware.injector'),logger=new logger_class_1[(a28_0x14feb0(0x158))](a28_0x14feb0(0x156));class ControllerInjector{constructor(_0x4425e6,_0x32557d){const _0x41f2c9=a28_0x14feb0;this['controllerType']=_0x4425e6,this['root']=_0x32557d,this[_0x41f2c9(0x178)]=(0x0,express_1[_0x41f2c9(0x150)])({'mergeParams':!![]}),this[_0x41f2c9(0x159)]='';if(!Reflect['getOwnMetadata'](constants_1[_0x41f2c9(0x14e)],_0x4425e6))throw TypeError(_0x4425e6[_0x41f2c9(0x171)]+_0x41f2c9(0x16c));}get[a28_0x14feb0(0x175)](){const _0x5e4347=a28_0x14feb0,_0x543c7a=Object[_0x5e4347(0x16a)](this[_0x5e4347(0x168)]);return Object[_0x5e4347(0x151)](_0x543c7a)[_0x5e4347(0x14d)](_0x30f32f=>_0x543c7a[_0x30f32f])['filter'](_0x5a960a=>!!Reflect[_0x5e4347(0x16e)](constants_1[_0x5e4347(0x157)],_0x5a960a));}get[a28_0x14feb0(0x15f)](){const _0x4ab235=a28_0x14feb0;return Reflect['getOwnMetadata'](constants_1[_0x4ab235(0x161)],this['controllerType'])||[];}get['prefix'](){const _0x5c39c8=a28_0x14feb0;var _0xe1a934;const _0x3eb242=(_0xe1a934=Reflect[_0x5c39c8(0x16e)](constants_1[_0x5c39c8(0x17b)],this['controllerType']))!==null&&_0xe1a934!==void 0x0?_0xe1a934:constants_1[_0x5c39c8(0x181)],_0x4d688f=Reflect[_0x5c39c8(0x16e)](constants_1[_0x5c39c8(0x15d)],this[_0x5c39c8(0x17a)])||'';return this[_0x5c39c8(0x159)]?'':(0x0,utils_1[_0x5c39c8(0x182)])(_0x3eb242,_0x4d688f);}get[a28_0x14feb0(0x16d)](){const _0x29b6c2=a28_0x14feb0;if(this[_0x29b6c2(0x159)])return this[_0x29b6c2(0x159)];const _0x265859=Reflect[_0x29b6c2(0x16e)](constants_1[_0x29b6c2(0x14f)],this[_0x29b6c2(0x17a)])||'';return(0x0,utils_1[_0x29b6c2(0x182)])(_0x265859);}get['instance'](){const _0x5e10d4=a28_0x14feb0;return typedi_1[_0x5e10d4(0x167)][_0x5e10d4(0x176)](this[_0x5e10d4(0x17a)]);}async['injectMiddlewares'](){const _0xd0c5e=a28_0x14feb0;for(const _0x237ff8 of this[_0xd0c5e(0x15f)]){const _0x10c6c6=await(0x0,middleware_injector_1[_0xd0c5e(0x166)])(_0x237ff8);this[_0xd0c5e(0x178)][_0xd0c5e(0x163)](_0x10c6c6);}}async[a28_0x14feb0(0x155)](_0x4942dd){const _0x40c497=a28_0x14feb0,_0x2191d5=_0x4942dd[_0x40c497(0x15c)];logger[_0x40c497(0x154)](_0x40c497(0x15e)+_0x2191d5['name']+_0x40c497(0x14a)+this[_0x40c497(0x16d)]+_0x4942dd[_0x40c497(0x16d)]);const _0x20bccc=new ControllerInjector(_0x2191d5,this);_0x20bccc[_0x40c497(0x159)]=_0x4942dd[_0x40c497(0x16d)],await _0x20bccc['inject'](this[_0x40c497(0x178)]);}async['injectHandlers'](){const _0x10574b=a28_0x14feb0;var _0x38b3d7;for(const _0x5bca72 of this[_0x10574b(0x175)]){const _0x4e73e9=(0x0,utils_1['getHandlerMeta'])(_0x5bca72);if(_0x4e73e9[_0x10574b(0x15c)])await this[_0x10574b(0x155)](_0x4e73e9);else{const _0x2e50c3=_0x4e73e9[_0x10574b(0x14c)][_0x10574b(0x177)]()[_0x10574b(0x17f)]();logger[_0x10574b(0x154)]('injecting\x20'+this[_0x10574b(0x17a)][_0x10574b(0x171)]+'#'+_0x5bca72[_0x10574b(0x171)]+'\x20at\x20['+_0x4e73e9[_0x10574b(0x14c)]+']\x20'+(0x0,utils_1[_0x10574b(0x182)])(((_0x38b3d7=this[_0x10574b(0x17d)])===null||_0x38b3d7===void 0x0?void 0x0:_0x38b3d7[_0x10574b(0x16d)])||'',this['path'],_0x4e73e9[_0x10574b(0x16d)])),this['router'][_0x2e50c3](_0x4e73e9['path'],(0x0,handler_wrapper_1[_0x10574b(0x169)])(_0x5bca72,this[_0x10574b(0x168)]));}}}async['inject'](_0x21d005){const _0x2b271c=a28_0x14feb0;!this[_0x2b271c(0x159)]&&logger['log'](_0x2b271c(0x153)+this[_0x2b271c(0x17a)][_0x2b271c(0x171)]+'\x20{'+this[_0x2b271c(0x15a)]+'}'),await this[_0x2b271c(0x152)](),await this[_0x2b271c(0x149)](),_0x21d005['use'](''+this[_0x2b271c(0x15a)]+this[_0x2b271c(0x16d)],this[_0x2b271c(0x178)]);}}exports['ControllerInjector']=ControllerInjector;