const a24_0x54a91b=a24_0x35a5;function a24_0x3167(){const _0x51611f=['\x20is\x20not\x20a\x20Controller','273DXCpEg','injecting\x20','toString','1wQcxaP','log','typedi','5870MuQEMF','6IKfEvT','1711765uGUDHM','2142zcovfq','\x20at\x20','getOwnPropertyNames','5908Uqiskx','injectNestedController','defineProperty','middlewareInjector','normalizePaths','CONTROLLER_DEFAULT_PREFIX','inject','ControllerInjector','META_CONTROLLER','prefix','handlers','9576242LapvVI','map','instance','../wrappers/handler.wrapper','path','default','META_CONTROLLER_VERSION','Router','__esModule','Logger','express','getOwnMetadata','router','getHandlerMeta','META_CONTROLLER_MIDDLEWARES','name','813384GgWxMV','get','./middleware.injector','use','14zhtYfP','injecting\x20nested\x20','apply','injectHandlers','7VhHkwq','5314vbqoYt','../utils','META_CONTROLLER_PREFIX','nested','root','method','filter','../classes/logger.class','999904YrOkuD','nestedPath','controllerType','META_CONTROLLER_PATH','META_HANDLER','33QJYZCJ','middlewares','(((.+)+)+)+$'];a24_0x3167=function(){return _0x51611f;};return a24_0x3167();}(function(_0x37a90b,_0x2946f0){const _0x2a7fc1=a24_0x35a5,_0x4bba2c=_0x37a90b();while(!![]){try{const _0xfcca66=-parseInt(_0x2a7fc1(0x109))/0x1*(-parseInt(_0x2a7fc1(0x136))/0x2)+-parseInt(_0x2a7fc1(0x106))/0x3*(-parseInt(_0x2a7fc1(0x112))/0x4)+-parseInt(_0x2a7fc1(0x10e))/0x5*(-parseInt(_0x2a7fc1(0x10d))/0x6)+parseInt(_0x2a7fc1(0x135))/0x7*(parseInt(_0x2a7fc1(0xfd))/0x8)+parseInt(_0x2a7fc1(0x10f))/0x9*(parseInt(_0x2a7fc1(0x10c))/0xa)+-parseInt(_0x2a7fc1(0x102))/0xb*(-parseInt(_0x2a7fc1(0x12d))/0xc)+parseInt(_0x2a7fc1(0x11d))/0xd*(-parseInt(_0x2a7fc1(0x131))/0xe);if(_0xfcca66===_0x2946f0)break;else _0x4bba2c['push'](_0x4bba2c['shift']());}catch(_0x144e49){_0x4bba2c['push'](_0x4bba2c['shift']());}}}(a24_0x3167,0x33787));const a24_0x211b63=(function(){let _0x3fb031=!![];return function(_0x1eb8e7,_0x45f4db){const _0x322e0d=_0x3fb031?function(){const _0x377a75=a24_0x35a5;if(_0x45f4db){const _0x5303aa=_0x45f4db[_0x377a75(0x133)](_0x1eb8e7,arguments);return _0x45f4db=null,_0x5303aa;}}:function(){};return _0x3fb031=![],_0x322e0d;};}()),a24_0x59fa3e=a24_0x211b63(this,function(){const _0x2bb5fa=a24_0x35a5;return a24_0x59fa3e['toString']()['search'](_0x2bb5fa(0x104))[_0x2bb5fa(0x108)]()['constructor'](a24_0x59fa3e)['search']('(((.+)+)+)+$');});a24_0x59fa3e();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2d6ac6){const _0x1f41f1=a24_0x35a5;return _0x2d6ac6&&_0x2d6ac6[_0x1f41f1(0x125)]?_0x2d6ac6:{'default':_0x2d6ac6};};Object[a24_0x54a91b(0x114)](exports,a24_0x54a91b(0x125),{'value':!![]}),exports[a24_0x54a91b(0x119)]=void 0x0;function a24_0x35a5(_0x4e0406,_0x66b256){const _0x644bca=a24_0x3167();return a24_0x35a5=function(_0x59fa3e,_0x211b63){_0x59fa3e=_0x59fa3e-0xf7;let _0x3167be=_0x644bca[_0x59fa3e];return _0x3167be;},a24_0x35a5(_0x4e0406,_0x66b256);}const express_1=require(a24_0x54a91b(0x127)),typedi_1=__importDefault(require(a24_0x54a91b(0x10b))),logger_class_1=require(a24_0x54a91b(0xfc)),constants_1=require('../constants'),utils_1=require(a24_0x54a91b(0x137)),handler_wrapper_1=require(a24_0x54a91b(0x120)),middleware_injector_1=require(a24_0x54a91b(0x12f)),logger=new logger_class_1[(a24_0x54a91b(0x126))]('controller-injector');class ControllerInjector{constructor(_0x2da853,_0x54914c){const _0x3edeb5=a24_0x54a91b;this[_0x3edeb5(0xff)]=_0x2da853,this[_0x3edeb5(0xf9)]=_0x54914c,this[_0x3edeb5(0x129)]=(0x0,express_1[_0x3edeb5(0x124)])({'mergeParams':!![]}),this[_0x3edeb5(0xfe)]='';if(!Reflect[_0x3edeb5(0x128)](constants_1[_0x3edeb5(0x11a)],_0x2da853))throw TypeError(_0x2da853[_0x3edeb5(0x12c)]+_0x3edeb5(0x105));}get['handlers'](){const _0x256b15=a24_0x54a91b,_0x1d4673=Object['getPrototypeOf'](this[_0x256b15(0x11f)]);return Object[_0x256b15(0x111)](_0x1d4673)[_0x256b15(0x11e)](_0x5ccb23=>_0x1d4673[_0x5ccb23])[_0x256b15(0xfb)](_0x489812=>!!Reflect[_0x256b15(0x128)](constants_1[_0x256b15(0x101)],_0x489812));}get[a24_0x54a91b(0x103)](){const _0x2a6d7b=a24_0x54a91b;return Reflect[_0x2a6d7b(0x128)](constants_1[_0x2a6d7b(0x12b)],this['controllerType'])||[];}get[a24_0x54a91b(0x11b)](){const _0x18b7b3=a24_0x54a91b;var _0x37418b;const _0x3576f5=(_0x37418b=Reflect[_0x18b7b3(0x128)](constants_1[_0x18b7b3(0xf7)],this[_0x18b7b3(0xff)]))!==null&&_0x37418b!==void 0x0?_0x37418b:constants_1[_0x18b7b3(0x117)],_0x4fb181=Reflect['getOwnMetadata'](constants_1[_0x18b7b3(0x123)],this[_0x18b7b3(0xff)])||'';return this[_0x18b7b3(0xfe)]?'':(0x0,utils_1[_0x18b7b3(0x116)])(_0x3576f5,_0x4fb181);}get[a24_0x54a91b(0x121)](){const _0x4c0eba=a24_0x54a91b;if(this[_0x4c0eba(0xfe)])return this['nestedPath'];const _0x201004=Reflect[_0x4c0eba(0x128)](constants_1[_0x4c0eba(0x100)],this[_0x4c0eba(0xff)])||'';return(0x0,utils_1[_0x4c0eba(0x116)])(_0x201004);}get['instance'](){const _0x38b051=a24_0x54a91b;return typedi_1[_0x38b051(0x122)][_0x38b051(0x12e)](this[_0x38b051(0xff)]);}async['injectMiddlewares'](){const _0xa62ce3=a24_0x54a91b;for(const _0x13eedc of this[_0xa62ce3(0x103)]){const _0x564c1e=await(0x0,middleware_injector_1[_0xa62ce3(0x115)])(_0x13eedc);this['router'][_0xa62ce3(0x130)](_0x564c1e);}}async['injectNestedController'](_0x22dcb2){const _0x4bc33e=a24_0x54a91b,_0x143c01=_0x22dcb2[_0x4bc33e(0xf8)];logger[_0x4bc33e(0x10a)](_0x4bc33e(0x132)+_0x143c01[_0x4bc33e(0x12c)]+_0x4bc33e(0x110)+this[_0x4bc33e(0x121)]+_0x22dcb2[_0x4bc33e(0x121)]);const _0x192fac=new ControllerInjector(_0x143c01,this);_0x192fac[_0x4bc33e(0xfe)]=_0x22dcb2['path'],await _0x192fac[_0x4bc33e(0x118)](this[_0x4bc33e(0x129)]);}async[a24_0x54a91b(0x134)](){const _0x4de8d6=a24_0x54a91b;var _0x39d120;for(const _0x2a7a95 of this[_0x4de8d6(0x11c)]){const _0x12fbe2=(0x0,utils_1[_0x4de8d6(0x12a)])(_0x2a7a95);if(_0x12fbe2['nested'])await this[_0x4de8d6(0x113)](_0x12fbe2);else{const _0x26422c=_0x12fbe2[_0x4de8d6(0xfa)][_0x4de8d6(0x108)]()['toLowerCase']();logger[_0x4de8d6(0x10a)](_0x4de8d6(0x107)+this[_0x4de8d6(0xff)]['name']+'#'+_0x2a7a95[_0x4de8d6(0x12c)]+'\x20at\x20['+_0x12fbe2[_0x4de8d6(0xfa)]+']\x20'+(0x0,utils_1[_0x4de8d6(0x116)])(((_0x39d120=this[_0x4de8d6(0xf9)])===null||_0x39d120===void 0x0?void 0x0:_0x39d120['path'])||'',this[_0x4de8d6(0x121)],_0x12fbe2[_0x4de8d6(0x121)])),this['router'][_0x26422c](_0x12fbe2[_0x4de8d6(0x121)],(0x0,handler_wrapper_1['handlerWrapper'])(_0x2a7a95,this['instance']));}}}async[a24_0x54a91b(0x118)](_0x48cab5){const _0x396744=a24_0x54a91b;!this[_0x396744(0xfe)]&&logger[_0x396744(0x10a)](_0x396744(0x107)+this[_0x396744(0xff)][_0x396744(0x12c)]+'\x20{'+this[_0x396744(0x11b)]+'}'),await this['injectMiddlewares'](),await this[_0x396744(0x134)](),_0x48cab5[_0x396744(0x130)](''+this[_0x396744(0x11b)]+this[_0x396744(0x121)],this[_0x396744(0x129)]);}}exports['ControllerInjector']=ControllerInjector;