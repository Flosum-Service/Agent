const a24_0x1409a7=a24_0x48b4;(function(_0x1e9ed5,_0x39badd){const _0x558358=a24_0x48b4,_0x30e29b=_0x1e9ed5();while(!![]){try{const _0x4661aa=parseInt(_0x558358(0x130))/0x1+parseInt(_0x558358(0x13e))/0x2+parseInt(_0x558358(0x113))/0x3+-parseInt(_0x558358(0x12a))/0x4+-parseInt(_0x558358(0x12b))/0x5+-parseInt(_0x558358(0x140))/0x6*(parseInt(_0x558358(0x10e))/0x7)+parseInt(_0x558358(0x143))/0x8;if(_0x4661aa===_0x39badd)break;else _0x30e29b['push'](_0x30e29b['shift']());}catch(_0x120b55){_0x30e29b['push'](_0x30e29b['shift']());}}}(a24_0x38b0,0xa4139));const a24_0x2e2a18=(function(){let _0xb40ca6=!![];return function(_0x252a54,_0x56df34){const _0x520bed=_0xb40ca6?function(){const _0x2c55af=a24_0x48b4;if(_0x56df34){const _0x329b01=_0x56df34[_0x2c55af(0x138)](_0x252a54,arguments);return _0x56df34=null,_0x329b01;}}:function(){};return _0xb40ca6=![],_0x520bed;};}()),a24_0x343d2f=a24_0x2e2a18(this,function(){const _0x1bc1aa=a24_0x48b4;return a24_0x343d2f['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](a24_0x343d2f)['search'](_0x1bc1aa(0x144));});a24_0x343d2f();function a24_0x48b4(_0x12cf11,_0x478fd1){const _0xbab02=a24_0x38b0();return a24_0x48b4=function(_0x343d2f,_0x2e2a18){_0x343d2f=_0x343d2f-0x10e;let _0x38b035=_0xbab02[_0x343d2f];return _0x38b035;},a24_0x48b4(_0x12cf11,_0x478fd1);}'use strict';var __importDefault=this&&this[a24_0x1409a7(0x12f)]||function(_0x2b6d68){const _0x31d309=a24_0x1409a7;return _0x2b6d68&&_0x2b6d68[_0x31d309(0x111)]?_0x2b6d68:{'default':_0x2b6d68};};function a24_0x38b0(){const _0x57542e=['CONTROLLER_DEFAULT_PREFIX','handlerWrapper','8191141kShzQP','\x20at\x20','ControllerInjector','__esModule','META_CONTROLLER_MIDDLEWARES','3095106pnshVK','defineProperty','Router','use','express','instance','log','injectMiddlewares','toString','root','../utils','nestedPath','toLowerCase','filter','getOwnMetadata','injectNestedController','middlewareInjector','router','middlewares','prefix','\x20is\x20not\x20a\x20Controller','injecting\x20','normalizePaths','5013428xWTDeV','6354875XAxsQJ','../constants','META_HANDLER','META_CONTROLLER_VERSION','__importDefault','1324068bdbiBM','getOwnPropertyNames','map','path','nested','META_CONTROLLER','Logger','controllerType','apply','./middleware.injector','method','default','getHandlerMeta','inject','1060962HnIHWq','name','6hehLHL','handlers','injectHandlers','11842408sfWBqf','(((.+)+)+)+$'];a24_0x38b0=function(){return _0x57542e;};return a24_0x38b0();}Object[a24_0x1409a7(0x114)](exports,a24_0x1409a7(0x111),{'value':!![]}),exports[a24_0x1409a7(0x110)]=void 0x0;const express_1=require(a24_0x1409a7(0x117)),typedi_1=__importDefault(require('typedi')),logger_class_1=require('../classes/logger.class'),constants_1=require(a24_0x1409a7(0x12c)),utils_1=require(a24_0x1409a7(0x11d)),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require(a24_0x1409a7(0x139)),logger=new logger_class_1[(a24_0x1409a7(0x136))]('controller-injector');class ControllerInjector{constructor(_0x3ce1ba,_0x5f3128){const _0xb3edb2=a24_0x1409a7;this[_0xb3edb2(0x137)]=_0x3ce1ba,this['root']=_0x5f3128,this[_0xb3edb2(0x124)]=(0x0,express_1[_0xb3edb2(0x115)])({'mergeParams':!![]}),this['nestedPath']='';if(!Reflect['getOwnMetadata'](constants_1[_0xb3edb2(0x135)],_0x3ce1ba))throw TypeError(_0x3ce1ba[_0xb3edb2(0x13f)]+_0xb3edb2(0x127));}get[a24_0x1409a7(0x141)](){const _0x1e35a7=a24_0x1409a7,_0x3fb7bf=Object['getPrototypeOf'](this[_0x1e35a7(0x118)]);return Object[_0x1e35a7(0x131)](_0x3fb7bf)[_0x1e35a7(0x132)](_0x45ddc6=>_0x3fb7bf[_0x45ddc6])[_0x1e35a7(0x120)](_0x5dbf8d=>!!Reflect['getOwnMetadata'](constants_1[_0x1e35a7(0x12d)],_0x5dbf8d));}get[a24_0x1409a7(0x125)](){const _0x510a05=a24_0x1409a7;return Reflect[_0x510a05(0x121)](constants_1[_0x510a05(0x112)],this[_0x510a05(0x137)])||[];}get['prefix'](){const _0x5f2ee1=a24_0x1409a7;var _0x49c7c1;const _0x28fb02=(_0x49c7c1=Reflect[_0x5f2ee1(0x121)](constants_1['META_CONTROLLER_PREFIX'],this[_0x5f2ee1(0x137)]))!==null&&_0x49c7c1!==void 0x0?_0x49c7c1:constants_1[_0x5f2ee1(0x145)],_0x5c421f=Reflect[_0x5f2ee1(0x121)](constants_1[_0x5f2ee1(0x12e)],this[_0x5f2ee1(0x137)])||'';return this[_0x5f2ee1(0x11e)]?'':(0x0,utils_1[_0x5f2ee1(0x129)])(_0x28fb02,_0x5c421f);}get[a24_0x1409a7(0x133)](){const _0x255523=a24_0x1409a7;if(this[_0x255523(0x11e)])return this['nestedPath'];const _0x16fe02=Reflect[_0x255523(0x121)](constants_1['META_CONTROLLER_PATH'],this['controllerType'])||'';return(0x0,utils_1[_0x255523(0x129)])(_0x16fe02);}get[a24_0x1409a7(0x118)](){const _0x44ecb2=a24_0x1409a7;return typedi_1[_0x44ecb2(0x13b)]['get'](this['controllerType']);}async[a24_0x1409a7(0x11a)](){const _0x3d6971=a24_0x1409a7;for(const _0x173f75 of this[_0x3d6971(0x125)]){const _0x92857e=await(0x0,middleware_injector_1[_0x3d6971(0x123)])(_0x173f75);this[_0x3d6971(0x124)][_0x3d6971(0x116)](_0x92857e);}}async['injectNestedController'](_0x1fc5a){const _0x296587=a24_0x1409a7,_0x37ac6f=_0x1fc5a[_0x296587(0x134)];logger[_0x296587(0x119)]('injecting\x20nested\x20'+_0x37ac6f[_0x296587(0x13f)]+_0x296587(0x10f)+this[_0x296587(0x133)]+_0x1fc5a[_0x296587(0x133)]);const _0xfae854=new ControllerInjector(_0x37ac6f,this);_0xfae854[_0x296587(0x11e)]=_0x1fc5a[_0x296587(0x133)],await _0xfae854['inject'](this[_0x296587(0x124)]);}async[a24_0x1409a7(0x142)](){const _0x55fa0b=a24_0x1409a7;var _0x17d105;for(const _0x172303 of this[_0x55fa0b(0x141)]){const _0x4afc53=(0x0,utils_1[_0x55fa0b(0x13c)])(_0x172303);if(_0x4afc53['nested'])await this[_0x55fa0b(0x122)](_0x4afc53);else{const _0x1a2302=_0x4afc53[_0x55fa0b(0x13a)][_0x55fa0b(0x11b)]()[_0x55fa0b(0x11f)]();logger[_0x55fa0b(0x119)]('injecting\x20'+this[_0x55fa0b(0x137)][_0x55fa0b(0x13f)]+'#'+_0x172303['name']+'\x20at\x20['+_0x4afc53[_0x55fa0b(0x13a)]+']\x20'+(0x0,utils_1['normalizePaths'])(((_0x17d105=this[_0x55fa0b(0x11c)])===null||_0x17d105===void 0x0?void 0x0:_0x17d105[_0x55fa0b(0x133)])||'',this[_0x55fa0b(0x133)],_0x4afc53[_0x55fa0b(0x133)])),this[_0x55fa0b(0x124)][_0x1a2302](_0x4afc53[_0x55fa0b(0x133)],(0x0,handler_wrapper_1[_0x55fa0b(0x146)])(_0x172303,this[_0x55fa0b(0x118)]));}}}async[a24_0x1409a7(0x13d)](_0x52e13d){const _0xbe0a43=a24_0x1409a7;!this[_0xbe0a43(0x11e)]&&logger['log'](_0xbe0a43(0x128)+this[_0xbe0a43(0x137)]['name']+'\x20{'+this[_0xbe0a43(0x126)]+'}'),await this[_0xbe0a43(0x11a)](),await this[_0xbe0a43(0x142)](),_0x52e13d[_0xbe0a43(0x116)](''+this[_0xbe0a43(0x126)]+this[_0xbe0a43(0x133)],this['router']);}}exports[a24_0x1409a7(0x110)]=ControllerInjector;