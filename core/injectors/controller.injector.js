const a23_0x460ec6=a23_0x4747;(function(_0x5f2969,_0x3059b8){const _0x320afd=a23_0x4747,_0x2c94bf=_0x5f2969();while(!![]){try{const _0x38cb7e=parseInt(_0x320afd(0x145))/0x1+-parseInt(_0x320afd(0x123))/0x2*(-parseInt(_0x320afd(0x11f))/0x3)+-parseInt(_0x320afd(0x137))/0x4*(parseInt(_0x320afd(0x115))/0x5)+-parseInt(_0x320afd(0x12b))/0x6+-parseInt(_0x320afd(0x13f))/0x7+-parseInt(_0x320afd(0x142))/0x8*(parseInt(_0x320afd(0x136))/0x9)+parseInt(_0x320afd(0x132))/0xa*(parseInt(_0x320afd(0x129))/0xb);if(_0x38cb7e===_0x3059b8)break;else _0x2c94bf['push'](_0x2c94bf['shift']());}catch(_0x155158){_0x2c94bf['push'](_0x2c94bf['shift']());}}}(a23_0x2447,0xa9805));function a23_0x2447(){const _0x2c305f=['getOwnMetadata','search','handlers','10zbLCYc','inject','META_CONTROLLER_VERSION','method','getPrototypeOf','path','getOwnPropertyNames','log','root','default','8355yCdqNw','filter','\x20is\x20not\x20a\x20Controller','../wrappers/handler.wrapper','158fDbvNl','controllerType','toString','./middleware.injector','Logger','handlerWrapper','451ZMueBY','(((.+)+)+)+$','7141590udHsUE','use','nested','injectNestedController','injectMiddlewares','META_CONTROLLER_PREFIX','../utils','805670VPhWMz','controller-injector','constructor','name','9yeqfYN','2609788Xxmpjm','typedi','../constants','nestedPath','META_CONTROLLER_MIDDLEWARES','__esModule','normalizePaths','router','8125684TpaMkC','../classes/logger.class','META_HANDLER','1383656aKEujf','injecting\x20nested\x20','instance','999943hodHWP','middlewares','injectHandlers','prefix','\x20at\x20'];a23_0x2447=function(){return _0x2c305f;};return a23_0x2447();}const a23_0x58da18=(function(){let _0x58e2a4=!![];return function(_0x547315,_0x13d2ad){const _0x4aee17=_0x58e2a4?function(){if(_0x13d2ad){const _0x1e4118=_0x13d2ad['apply'](_0x547315,arguments);return _0x13d2ad=null,_0x1e4118;}}:function(){};return _0x58e2a4=![],_0x4aee17;};}()),a23_0x128e3e=a23_0x58da18(this,function(){const _0x37d630=a23_0x4747;return a23_0x128e3e[_0x37d630(0x125)]()[_0x37d630(0x113)](_0x37d630(0x12a))[_0x37d630(0x125)]()[_0x37d630(0x134)](a23_0x128e3e)['search'](_0x37d630(0x12a));});a23_0x128e3e();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1031fe){const _0x936875=a23_0x4747;return _0x1031fe&&_0x1031fe[_0x936875(0x13c)]?_0x1031fe:{'default':_0x1031fe};};Object['defineProperty'](exports,a23_0x460ec6(0x13c),{'value':!![]}),exports['ControllerInjector']=void 0x0;const express_1=require('express'),typedi_1=__importDefault(require(a23_0x460ec6(0x138))),logger_class_1=require(a23_0x460ec6(0x140)),constants_1=require(a23_0x460ec6(0x139)),utils_1=require(a23_0x460ec6(0x131)),handler_wrapper_1=require(a23_0x460ec6(0x122)),middleware_injector_1=require(a23_0x460ec6(0x126)),logger=new logger_class_1[(a23_0x460ec6(0x127))](a23_0x460ec6(0x133));class ControllerInjector{constructor(_0xf18d74,_0x155095){const _0x1805da=a23_0x460ec6;this[_0x1805da(0x124)]=_0xf18d74,this[_0x1805da(0x11d)]=_0x155095,this['router']=express_1['Router']({'mergeParams':!![]}),this['nestedPath']='';if(!Reflect[_0x1805da(0x112)](constants_1['META_CONTROLLER'],_0xf18d74))throw TypeError(_0xf18d74[_0x1805da(0x135)]+_0x1805da(0x121));}get['handlers'](){const _0xff8e21=a23_0x460ec6,_0x584d11=Object[_0xff8e21(0x119)](this[_0xff8e21(0x144)]);return Object[_0xff8e21(0x11b)](_0x584d11)['map'](_0x5f3cc7=>_0x584d11[_0x5f3cc7])[_0xff8e21(0x120)](_0x151565=>!!Reflect['getOwnMetadata'](constants_1[_0xff8e21(0x141)],_0x151565));}get[a23_0x460ec6(0x146)](){const _0x14147b=a23_0x460ec6;return Reflect[_0x14147b(0x112)](constants_1[_0x14147b(0x13b)],this[_0x14147b(0x144)])||[];}get['prefix'](){const _0x31536c=a23_0x460ec6;var _0x4ab7c2;const _0x4973b1=(_0x4ab7c2=Reflect[_0x31536c(0x112)](constants_1[_0x31536c(0x130)],this[_0x31536c(0x124)]))!==null&&_0x4ab7c2!==void 0x0?_0x4ab7c2:constants_1['CONTROLLER_DEFAULT_PREFIX'],_0x3cdd4e=Reflect[_0x31536c(0x112)](constants_1[_0x31536c(0x117)],this[_0x31536c(0x124)])||'';return this[_0x31536c(0x13a)]?'':utils_1[_0x31536c(0x13d)](_0x4973b1,_0x3cdd4e);}get[a23_0x460ec6(0x11a)](){const _0x1dcd95=a23_0x460ec6;if(this[_0x1dcd95(0x13a)])return this[_0x1dcd95(0x13a)];const _0x5b10d7=Reflect[_0x1dcd95(0x112)](constants_1['META_CONTROLLER_PATH'],this[_0x1dcd95(0x124)])||'';return utils_1[_0x1dcd95(0x13d)](_0x5b10d7);}get['instance'](){const _0x18072c=a23_0x460ec6;return typedi_1[_0x18072c(0x11e)]['get'](this[_0x18072c(0x124)]);}async[a23_0x460ec6(0x12f)](){const _0x1301c9=a23_0x460ec6;for(const _0xa8a160 of this[_0x1301c9(0x146)]){const _0xd9e64e=await middleware_injector_1['middlewareInjector'](_0xa8a160);this['router'][_0x1301c9(0x12c)](_0xd9e64e);}}async[a23_0x460ec6(0x12e)](_0x31b0ce){const _0x491c22=a23_0x460ec6,_0x1e731f=_0x31b0ce[_0x491c22(0x12d)];logger[_0x491c22(0x11c)](_0x491c22(0x143)+_0x1e731f[_0x491c22(0x135)]+_0x491c22(0x111)+this[_0x491c22(0x11a)]+_0x31b0ce[_0x491c22(0x11a)]);const _0x3e956d=new ControllerInjector(_0x1e731f,this);_0x3e956d[_0x491c22(0x13a)]=_0x31b0ce[_0x491c22(0x11a)],await _0x3e956d[_0x491c22(0x116)](this[_0x491c22(0x13e)]);}async['injectHandlers'](){const _0x1abb6e=a23_0x460ec6;var _0x37f2fa;for(const _0xed324d of this[_0x1abb6e(0x114)]){const _0x2f0cab=utils_1['getHandlerMeta'](_0xed324d);if(_0x2f0cab[_0x1abb6e(0x12d)])await this[_0x1abb6e(0x12e)](_0x2f0cab);else{const _0x4bb320=_0x2f0cab[_0x1abb6e(0x118)][_0x1abb6e(0x125)]()['toLowerCase']();logger[_0x1abb6e(0x11c)]('injecting\x20'+this[_0x1abb6e(0x124)][_0x1abb6e(0x135)]+'#'+_0xed324d[_0x1abb6e(0x135)]+'\x20at\x20['+_0x2f0cab[_0x1abb6e(0x118)]+']\x20'+utils_1[_0x1abb6e(0x13d)](((_0x37f2fa=this[_0x1abb6e(0x11d)])===null||_0x37f2fa===void 0x0?void 0x0:_0x37f2fa['path'])||'',this[_0x1abb6e(0x11a)],_0x2f0cab[_0x1abb6e(0x11a)])),this['router'][_0x4bb320](_0x2f0cab[_0x1abb6e(0x11a)],handler_wrapper_1[_0x1abb6e(0x128)](_0xed324d,this[_0x1abb6e(0x144)]));}}}async[a23_0x460ec6(0x116)](_0x4d1598){const _0x47f895=a23_0x460ec6;!this['nestedPath']&&logger['log']('injecting\x20'+this[_0x47f895(0x124)]['name']+'\x20{'+this[_0x47f895(0x110)]+'}'),await this[_0x47f895(0x12f)](),await this[_0x47f895(0x10f)](),_0x4d1598[_0x47f895(0x12c)](''+this['prefix']+this[_0x47f895(0x11a)],this[_0x47f895(0x13e)]);}}function a23_0x4747(_0x1b5cdc,_0x49fff4){const _0x4ed13f=a23_0x2447();return a23_0x4747=function(_0x128e3e,_0x58da18){_0x128e3e=_0x128e3e-0x10f;let _0x244753=_0x4ed13f[_0x128e3e];return _0x244753;},a23_0x4747(_0x1b5cdc,_0x49fff4);}exports['ControllerInjector']=ControllerInjector;