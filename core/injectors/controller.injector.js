const a28_0x328a43=a28_0x3b0d;(function(_0x5bd8f5,_0x312dbd){const _0x9e0bc9=a28_0x3b0d,_0xf0a02b=_0x5bd8f5();while(!![]){try{const _0x161e54=-parseInt(_0x9e0bc9(0x1ed))/0x1+-parseInt(_0x9e0bc9(0x1d6))/0x2+-parseInt(_0x9e0bc9(0x204))/0x3+-parseInt(_0x9e0bc9(0x1e3))/0x4*(parseInt(_0x9e0bc9(0x1d3))/0x5)+parseInt(_0x9e0bc9(0x1fc))/0x6*(parseInt(_0x9e0bc9(0x1e4))/0x7)+-parseInt(_0x9e0bc9(0x202))/0x8+-parseInt(_0x9e0bc9(0x1d7))/0x9*(-parseInt(_0x9e0bc9(0x1d9))/0xa);if(_0x161e54===_0x312dbd)break;else _0xf0a02b['push'](_0xf0a02b['shift']());}catch(_0x613a84){_0xf0a02b['push'](_0xf0a02b['shift']());}}}(a28_0xc782,0x835fd));const a28_0x5a12e5=(function(){let _0x1ad7b3=!![];return function(_0x414670,_0x5fe32a){const _0x1fed58=_0x1ad7b3?function(){const _0x34b253=a28_0x3b0d;if(_0x5fe32a){const _0x572112=_0x5fe32a[_0x34b253(0x1d5)](_0x414670,arguments);return _0x5fe32a=null,_0x572112;}}:function(){};return _0x1ad7b3=![],_0x1fed58;};}()),a28_0x2ba110=a28_0x5a12e5(this,function(){const _0x3a952a=a28_0x3b0d;return a28_0x2ba110[_0x3a952a(0x206)]()['search'](_0x3a952a(0x1db))['toString']()['constructor'](a28_0x2ba110)[_0x3a952a(0x1c9)](_0x3a952a(0x1db));});a28_0x2ba110();function a28_0xc782(){const _0x16b193=['4dcsEFd','1636411kCDsmY','nestedPath','root','instance','./middleware.injector','CONTROLLER_DEFAULT_PREFIX','\x20at\x20','Logger','use','271697yiHwIT','normalizePaths','prefix','handlerWrapper','typedi','\x20at\x20[','__esModule','controllerType','filter','injectHandlers','META_CONTROLLER_PREFIX','\x20is\x20not\x20a\x20Controller','injectMiddlewares','get','Router','6jiDQJJ','injecting\x20','getPrototypeOf','getOwnMetadata','inject','../constants','5368336yFGodf','method','1288902JfyPmA','META_CONTROLLER_VERSION','toString','toLowerCase','search','getHandlerMeta','META_CONTROLLER','router','controller-injector','META_CONTROLLER_PATH','middlewareInjector','injectNestedController','name','__importDefault','813845Pgdthw','middlewares','apply','1447200WPttmq','15399CZAsDe','../wrappers/handler.wrapper','14980VAzkym','default','(((.+)+)+)+$','getOwnPropertyNames','nested','path','META_HANDLER','META_CONTROLLER_MIDDLEWARES','handlers','ControllerInjector'];a28_0xc782=function(){return _0x16b193;};return a28_0xc782();}'use strict';function a28_0x3b0d(_0x3f8ee2,_0x46cd4f){const _0x3898c6=a28_0xc782();return a28_0x3b0d=function(_0x2ba110,_0x5a12e5){_0x2ba110=_0x2ba110-0x1c9;let _0xc7822a=_0x3898c6[_0x2ba110];return _0xc7822a;},a28_0x3b0d(_0x3f8ee2,_0x46cd4f);}var __importDefault=this&&this[a28_0x328a43(0x1d2)]||function(_0xbc5d8d){return _0xbc5d8d&&_0xbc5d8d['__esModule']?_0xbc5d8d:{'default':_0xbc5d8d};};Object['defineProperty'](exports,a28_0x328a43(0x1f3),{'value':!![]}),exports[a28_0x328a43(0x1e2)]=void 0x0;const express_1=require('express'),typedi_1=__importDefault(require(a28_0x328a43(0x1f1))),logger_class_1=require('../classes/logger.class'),constants_1=require(a28_0x328a43(0x201)),utils_1=require('../utils'),handler_wrapper_1=require(a28_0x328a43(0x1d8)),middleware_injector_1=require(a28_0x328a43(0x1e8)),logger=new logger_class_1[(a28_0x328a43(0x1eb))](a28_0x328a43(0x1cd));class ControllerInjector{constructor(_0xf9b94c,_0x510c54){const _0x4139f6=a28_0x328a43;this[_0x4139f6(0x1f4)]=_0xf9b94c,this[_0x4139f6(0x1e6)]=_0x510c54,this[_0x4139f6(0x1cc)]=(0x0,express_1[_0x4139f6(0x1fb)])({'mergeParams':!![]}),this[_0x4139f6(0x1e5)]='';if(!Reflect[_0x4139f6(0x1ff)](constants_1[_0x4139f6(0x1cb)],_0xf9b94c))throw TypeError(_0xf9b94c[_0x4139f6(0x1d1)]+_0x4139f6(0x1f8));}get[a28_0x328a43(0x1e1)](){const _0x5bb456=a28_0x328a43,_0x9448bf=Object[_0x5bb456(0x1fe)](this['instance']);return Object[_0x5bb456(0x1dc)](_0x9448bf)['map'](_0x3a651f=>_0x9448bf[_0x3a651f])[_0x5bb456(0x1f5)](_0x564f24=>!!Reflect[_0x5bb456(0x1ff)](constants_1[_0x5bb456(0x1df)],_0x564f24));}get[a28_0x328a43(0x1d4)](){const _0x47e0a1=a28_0x328a43;return Reflect[_0x47e0a1(0x1ff)](constants_1[_0x47e0a1(0x1e0)],this['controllerType'])||[];}get[a28_0x328a43(0x1ef)](){const _0x2825ca=a28_0x328a43;var _0x180a20;const _0x1921e5=(_0x180a20=Reflect[_0x2825ca(0x1ff)](constants_1[_0x2825ca(0x1f7)],this[_0x2825ca(0x1f4)]))!==null&&_0x180a20!==void 0x0?_0x180a20:constants_1[_0x2825ca(0x1e9)],_0x403e16=Reflect['getOwnMetadata'](constants_1[_0x2825ca(0x205)],this[_0x2825ca(0x1f4)])||'';return this[_0x2825ca(0x1e5)]?'':(0x0,utils_1[_0x2825ca(0x1ee)])(_0x1921e5,_0x403e16);}get[a28_0x328a43(0x1de)](){const _0x52e9ec=a28_0x328a43;if(this[_0x52e9ec(0x1e5)])return this['nestedPath'];const _0x158beb=Reflect[_0x52e9ec(0x1ff)](constants_1[_0x52e9ec(0x1ce)],this[_0x52e9ec(0x1f4)])||'';return(0x0,utils_1[_0x52e9ec(0x1ee)])(_0x158beb);}get[a28_0x328a43(0x1e7)](){const _0x53f6b4=a28_0x328a43;return typedi_1[_0x53f6b4(0x1da)][_0x53f6b4(0x1fa)](this[_0x53f6b4(0x1f4)]);}async[a28_0x328a43(0x1f9)](){const _0x31bc43=a28_0x328a43;for(const _0x2f1819 of this[_0x31bc43(0x1d4)]){const _0x376e15=await(0x0,middleware_injector_1[_0x31bc43(0x1cf)])(_0x2f1819);this['router'][_0x31bc43(0x1ec)](_0x376e15);}}async[a28_0x328a43(0x1d0)](_0x18d9e1){const _0x1b033b=a28_0x328a43,_0x396031=_0x18d9e1[_0x1b033b(0x1dd)];logger['log']('injecting\x20nested\x20'+_0x396031[_0x1b033b(0x1d1)]+_0x1b033b(0x1ea)+this[_0x1b033b(0x1de)]+_0x18d9e1[_0x1b033b(0x1de)]);const _0x34e198=new ControllerInjector(_0x396031,this);_0x34e198['nestedPath']=_0x18d9e1[_0x1b033b(0x1de)],await _0x34e198[_0x1b033b(0x200)](this[_0x1b033b(0x1cc)]);}async[a28_0x328a43(0x1f6)](){const _0x239010=a28_0x328a43;var _0x3ebb04;for(const _0xc526d8 of this[_0x239010(0x1e1)]){const _0x7ac635=(0x0,utils_1[_0x239010(0x1ca)])(_0xc526d8);if(_0x7ac635[_0x239010(0x1dd)])await this[_0x239010(0x1d0)](_0x7ac635);else{const _0x811ba2=_0x7ac635[_0x239010(0x203)][_0x239010(0x206)]()[_0x239010(0x207)]();logger['log'](_0x239010(0x1fd)+this[_0x239010(0x1f4)]['name']+'#'+_0xc526d8[_0x239010(0x1d1)]+_0x239010(0x1f2)+_0x7ac635[_0x239010(0x203)]+']\x20'+(0x0,utils_1[_0x239010(0x1ee)])(((_0x3ebb04=this[_0x239010(0x1e6)])===null||_0x3ebb04===void 0x0?void 0x0:_0x3ebb04[_0x239010(0x1de)])||'',this[_0x239010(0x1de)],_0x7ac635[_0x239010(0x1de)])),this[_0x239010(0x1cc)][_0x811ba2](_0x7ac635['path'],(0x0,handler_wrapper_1[_0x239010(0x1f0)])(_0xc526d8,this[_0x239010(0x1e7)]));}}}async[a28_0x328a43(0x200)](_0x2f8e5b){const _0x5a91f2=a28_0x328a43;!this[_0x5a91f2(0x1e5)]&&logger['log']('injecting\x20'+this[_0x5a91f2(0x1f4)]['name']+'\x20{'+this['prefix']+'}'),await this['injectMiddlewares'](),await this[_0x5a91f2(0x1f6)](),_0x2f8e5b['use'](''+this[_0x5a91f2(0x1ef)]+this[_0x5a91f2(0x1de)],this[_0x5a91f2(0x1cc)]);}}exports['ControllerInjector']=ControllerInjector;