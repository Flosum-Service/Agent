const a24_0x5f2584=a24_0x47b3;function a24_0x5c2b(){const _0x3ce77d=['handlerWrapper','log','META_CONTROLLER_PREFIX','1174120QTKeBc','10nHqMvE','injecting\x20nested\x20','injectNestedController','1146672JItkBd','8jqYNEO','search','map','handlers','default','445929MhzvHh','4817197tENYns','nestedPath','Logger','toLowerCase','3NztTiJ','method','controllerType','instance','564PYHwOX','inject','injectMiddlewares','../wrappers/handler.wrapper','3580616DCFnQm','getOwnMetadata','__importDefault','use','../classes/logger.class','nested','15627070Btvfmp','injectHandlers','name','constructor','getOwnPropertyNames','root','typedi','__esModule','\x20at\x20[','META_CONTROLLER_PATH','toString','../utils','getPrototypeOf','44561XmiYZP','normalizePaths','middlewareInjector','./middleware.injector','prefix','META_HANDLER','defineProperty','path','router','middlewares','injecting\x20','9cmPOSv','ControllerInjector','(((.+)+)+)+$'];a24_0x5c2b=function(){return _0x3ce77d;};return a24_0x5c2b();}(function(_0x27d779,_0x4856a7){const _0x4af01f=a24_0x47b3,_0x54d009=_0x27d779();while(!![]){try{const _0x39515d=-parseInt(_0x4af01f(0x13c))/0x1*(-parseInt(_0x4af01f(0x14e))/0x2)+parseInt(_0x4af01f(0x15c))/0x3*(parseInt(_0x4af01f(0x164))/0x4)+parseInt(_0x4af01f(0x14d))/0x5+-parseInt(_0x4af01f(0x151))/0x6+parseInt(_0x4af01f(0x158))/0x7*(-parseInt(_0x4af01f(0x152))/0x8)+parseInt(_0x4af01f(0x147))/0x9*(-parseInt(_0x4af01f(0x12f))/0xa)+parseInt(_0x4af01f(0x157))/0xb*(parseInt(_0x4af01f(0x160))/0xc);if(_0x39515d===_0x4856a7)break;else _0x54d009['push'](_0x54d009['shift']());}catch(_0x4b3bdf){_0x54d009['push'](_0x54d009['shift']());}}}(a24_0x5c2b,0xc73fe));const a24_0xf0fcf3=(function(){let _0x443e86=!![];return function(_0x27f93b,_0x2aae1f){const _0x47a513=_0x443e86?function(){if(_0x2aae1f){const _0x32472f=_0x2aae1f['apply'](_0x27f93b,arguments);return _0x2aae1f=null,_0x32472f;}}:function(){};return _0x443e86=![],_0x47a513;};}()),a24_0xa568ed=a24_0xf0fcf3(this,function(){const _0x23d88e=a24_0x47b3;return a24_0xa568ed['toString']()[_0x23d88e(0x153)](_0x23d88e(0x149))['toString']()[_0x23d88e(0x132)](a24_0xa568ed)[_0x23d88e(0x153)](_0x23d88e(0x149));});a24_0xa568ed();'use strict';var __importDefault=this&&this[a24_0x5f2584(0x166)]||function(_0x3c25f9){const _0x16f0f5=a24_0x5f2584;return _0x3c25f9&&_0x3c25f9[_0x16f0f5(0x136)]?_0x3c25f9:{'default':_0x3c25f9};};Object[a24_0x5f2584(0x142)](exports,a24_0x5f2584(0x136),{'value':!![]}),exports[a24_0x5f2584(0x148)]=void 0x0;function a24_0x47b3(_0x46fb56,_0x7f59c9){const _0x4a040c=a24_0x5c2b();return a24_0x47b3=function(_0xa568ed,_0xf0fcf3){_0xa568ed=_0xa568ed-0x12d;let _0x5c2bfe=_0x4a040c[_0xa568ed];return _0x5c2bfe;},a24_0x47b3(_0x46fb56,_0x7f59c9);}const express_1=require('express'),typedi_1=__importDefault(require(a24_0x5f2584(0x135))),logger_class_1=require(a24_0x5f2584(0x12d)),constants_1=require('../constants'),utils_1=require(a24_0x5f2584(0x13a)),handler_wrapper_1=require(a24_0x5f2584(0x163)),middleware_injector_1=require(a24_0x5f2584(0x13f)),logger=new logger_class_1[(a24_0x5f2584(0x15a))]('controller-injector');class ControllerInjector{constructor(_0x1a122d,_0x410801){const _0x4ae7e6=a24_0x5f2584;this[_0x4ae7e6(0x15e)]=_0x1a122d,this['root']=_0x410801,this[_0x4ae7e6(0x144)]=(0x0,express_1['Router'])({'mergeParams':!![]}),this[_0x4ae7e6(0x159)]='';if(!Reflect['getOwnMetadata'](constants_1['META_CONTROLLER'],_0x1a122d))throw TypeError(_0x1a122d[_0x4ae7e6(0x131)]+'\x20is\x20not\x20a\x20Controller');}get[a24_0x5f2584(0x155)](){const _0x5cf727=a24_0x5f2584,_0x5345d2=Object[_0x5cf727(0x13b)](this[_0x5cf727(0x15f)]);return Object[_0x5cf727(0x133)](_0x5345d2)[_0x5cf727(0x154)](_0x3e26a8=>_0x5345d2[_0x3e26a8])['filter'](_0x42b673=>!!Reflect[_0x5cf727(0x165)](constants_1[_0x5cf727(0x141)],_0x42b673));}get[a24_0x5f2584(0x145)](){const _0x5b376a=a24_0x5f2584;return Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_MIDDLEWARES'],this[_0x5b376a(0x15e)])||[];}get['prefix'](){const _0x562088=a24_0x5f2584;var _0x118cf8;const _0x331f11=(_0x118cf8=Reflect[_0x562088(0x165)](constants_1[_0x562088(0x14c)],this['controllerType']))!==null&&_0x118cf8!==void 0x0?_0x118cf8:constants_1['CONTROLLER_DEFAULT_PREFIX'],_0x1e9ee2=Reflect[_0x562088(0x165)](constants_1['META_CONTROLLER_VERSION'],this['controllerType'])||'';return this[_0x562088(0x159)]?'':(0x0,utils_1[_0x562088(0x13d)])(_0x331f11,_0x1e9ee2);}get['path'](){const _0x3862dc=a24_0x5f2584;if(this['nestedPath'])return this[_0x3862dc(0x159)];const _0xc49ac=Reflect[_0x3862dc(0x165)](constants_1[_0x3862dc(0x138)],this[_0x3862dc(0x15e)])||'';return(0x0,utils_1[_0x3862dc(0x13d)])(_0xc49ac);}get['instance'](){const _0x2a4d7e=a24_0x5f2584;return typedi_1[_0x2a4d7e(0x156)]['get'](this[_0x2a4d7e(0x15e)]);}async[a24_0x5f2584(0x162)](){const _0x25434e=a24_0x5f2584;for(const _0x13805e of this[_0x25434e(0x145)]){const _0x5ac046=await(0x0,middleware_injector_1[_0x25434e(0x13e)])(_0x13805e);this[_0x25434e(0x144)][_0x25434e(0x167)](_0x5ac046);}}async[a24_0x5f2584(0x150)](_0x408be7){const _0x6d9e7a=a24_0x5f2584,_0x20b911=_0x408be7['nested'];logger['log'](_0x6d9e7a(0x14f)+_0x20b911[_0x6d9e7a(0x131)]+'\x20at\x20'+this[_0x6d9e7a(0x143)]+_0x408be7[_0x6d9e7a(0x143)]);const _0x1331d7=new ControllerInjector(_0x20b911,this);_0x1331d7['nestedPath']=_0x408be7['path'],await _0x1331d7[_0x6d9e7a(0x161)](this[_0x6d9e7a(0x144)]);}async[a24_0x5f2584(0x130)](){const _0x105edc=a24_0x5f2584;var _0x49d7b9;for(const _0x5dab80 of this[_0x105edc(0x155)]){const _0x284e9e=(0x0,utils_1['getHandlerMeta'])(_0x5dab80);if(_0x284e9e[_0x105edc(0x12e)])await this[_0x105edc(0x150)](_0x284e9e);else{const _0x2230dd=_0x284e9e[_0x105edc(0x15d)][_0x105edc(0x139)]()[_0x105edc(0x15b)]();logger[_0x105edc(0x14b)]('injecting\x20'+this[_0x105edc(0x15e)][_0x105edc(0x131)]+'#'+_0x5dab80[_0x105edc(0x131)]+_0x105edc(0x137)+_0x284e9e[_0x105edc(0x15d)]+']\x20'+(0x0,utils_1[_0x105edc(0x13d)])(((_0x49d7b9=this[_0x105edc(0x134)])===null||_0x49d7b9===void 0x0?void 0x0:_0x49d7b9[_0x105edc(0x143)])||'',this['path'],_0x284e9e[_0x105edc(0x143)])),this[_0x105edc(0x144)][_0x2230dd](_0x284e9e[_0x105edc(0x143)],(0x0,handler_wrapper_1[_0x105edc(0x14a)])(_0x5dab80,this[_0x105edc(0x15f)]));}}}async[a24_0x5f2584(0x161)](_0x49b845){const _0x554187=a24_0x5f2584;!this['nestedPath']&&logger[_0x554187(0x14b)](_0x554187(0x146)+this['controllerType'][_0x554187(0x131)]+'\x20{'+this[_0x554187(0x140)]+'}'),await this['injectMiddlewares'](),await this['injectHandlers'](),_0x49b845['use'](''+this['prefix']+this[_0x554187(0x143)],this[_0x554187(0x144)]);}}exports[a24_0x5f2584(0x148)]=ControllerInjector;