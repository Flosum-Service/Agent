const a29_0x194f89=a29_0x35d8;(function(_0x390796,_0x1a2a27){const _0x5b13af=a29_0x35d8,_0x5b2e20=_0x390796();while(!![]){try{const _0x5c7c7d=-parseInt(_0x5b13af(0x128))/0x1*(parseInt(_0x5b13af(0x123))/0x2)+parseInt(_0x5b13af(0x143))/0x3+-parseInt(_0x5b13af(0x145))/0x4+parseInt(_0x5b13af(0x119))/0x5*(parseInt(_0x5b13af(0x11e))/0x6)+-parseInt(_0x5b13af(0x13f))/0x7+parseInt(_0x5b13af(0x125))/0x8*(-parseInt(_0x5b13af(0x140))/0x9)+parseInt(_0x5b13af(0x130))/0xa;if(_0x5c7c7d===_0x1a2a27)break;else _0x5b2e20['push'](_0x5b2e20['shift']());}catch(_0x3f40f1){_0x5b2e20['push'](_0x5b2e20['shift']());}}}(a29_0x5de6,0xd5649));function a29_0x5de6(){const _0x866619=['ControllerInjector','router','META_CONTROLLER_PATH','../classes/logger.class','nested','CONTROLLER_DEFAULT_PREFIX','34937520fIqFLU','use','injectHandlers','normalizePaths','apply','\x20at\x20[','injectMiddlewares','getOwnPropertyNames','log','root','instance','getPrototypeOf','\x20at\x20','toLowerCase','nestedPath','4852631FmsMaD','960642rxDpCv','../utils','META_HANDLER','1302759FOaSXO','inject','4937012IwmDTT','../wrappers/handler.wrapper','express','default','getOwnMetadata','META_CONTROLLER_VERSION','prefix','\x20is\x20not\x20a\x20Controller','search','get','method','injecting\x20nested\x20','name','defineProperty','middlewareInjector','Logger','355JcQBjL','./middleware.injector','handlers','__esModule','toString','88932KuiVCg','typedi','(((.+)+)+)+$','META_CONTROLLER','getHandlerMeta','92FnDLCC','META_CONTROLLER_MIDDLEWARES','56lISnTW','middlewares','controllerType','31123ZNxHvL','path'];a29_0x5de6=function(){return _0x866619;};return a29_0x5de6();}const a29_0x20ceb0=(function(){let _0x10c13b=!![];return function(_0x4a9c0d,_0x59c266){const _0x531d1a=_0x10c13b?function(){const _0x2d61cd=a29_0x35d8;if(_0x59c266){const _0x5a54f9=_0x59c266[_0x2d61cd(0x134)](_0x4a9c0d,arguments);return _0x59c266=null,_0x5a54f9;}}:function(){};return _0x10c13b=![],_0x531d1a;};}()),a29_0x49b570=a29_0x20ceb0(this,function(){const _0x23bdd3=a29_0x35d8;return a29_0x49b570[_0x23bdd3(0x11d)]()[_0x23bdd3(0x14d)]('(((.+)+)+)+$')[_0x23bdd3(0x11d)]()['constructor'](a29_0x49b570)['search'](_0x23bdd3(0x120));});a29_0x49b570();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3ad567){const _0x393c9d=a29_0x35d8;return _0x3ad567&&_0x3ad567[_0x393c9d(0x11c)]?_0x3ad567:{'default':_0x3ad567};};Object[a29_0x194f89(0x152)](exports,a29_0x194f89(0x11c),{'value':!![]}),exports[a29_0x194f89(0x12a)]=void 0x0;function a29_0x35d8(_0x3f0954,_0x1f6b6d){const _0x4be8b1=a29_0x5de6();return a29_0x35d8=function(_0x49b570,_0x20ceb0){_0x49b570=_0x49b570-0x117;let _0x5de6d6=_0x4be8b1[_0x49b570];return _0x5de6d6;},a29_0x35d8(_0x3f0954,_0x1f6b6d);}const express_1=require(a29_0x194f89(0x147)),typedi_1=__importDefault(require(a29_0x194f89(0x11f))),logger_class_1=require(a29_0x194f89(0x12d)),constants_1=require('../constants'),utils_1=require(a29_0x194f89(0x141)),handler_wrapper_1=require(a29_0x194f89(0x146)),middleware_injector_1=require(a29_0x194f89(0x11a)),logger=new logger_class_1[(a29_0x194f89(0x118))]('controller-injector');class ControllerInjector{constructor(_0x1b4abb,_0x389414){const _0x24ad76=a29_0x194f89;this[_0x24ad76(0x127)]=_0x1b4abb,this[_0x24ad76(0x139)]=_0x389414,this[_0x24ad76(0x12b)]=(0x0,express_1['Router'])({'mergeParams':!![]}),this[_0x24ad76(0x13e)]='';if(!Reflect[_0x24ad76(0x149)](constants_1[_0x24ad76(0x121)],_0x1b4abb))throw TypeError(_0x1b4abb[_0x24ad76(0x151)]+_0x24ad76(0x14c));}get[a29_0x194f89(0x11b)](){const _0x26e332=a29_0x194f89,_0x5e64be=Object[_0x26e332(0x13b)](this[_0x26e332(0x13a)]);return Object[_0x26e332(0x137)](_0x5e64be)['map'](_0x24df1e=>_0x5e64be[_0x24df1e])['filter'](_0x3d379d=>!!Reflect[_0x26e332(0x149)](constants_1[_0x26e332(0x142)],_0x3d379d));}get[a29_0x194f89(0x126)](){const _0x3c3fed=a29_0x194f89;return Reflect[_0x3c3fed(0x149)](constants_1[_0x3c3fed(0x124)],this['controllerType'])||[];}get[a29_0x194f89(0x14b)](){const _0x60e837=a29_0x194f89;var _0x556603;const _0xdd1dea=(_0x556603=Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_PREFIX'],this[_0x60e837(0x127)]))!==null&&_0x556603!==void 0x0?_0x556603:constants_1[_0x60e837(0x12f)],_0x212071=Reflect[_0x60e837(0x149)](constants_1[_0x60e837(0x14a)],this['controllerType'])||'';return this[_0x60e837(0x13e)]?'':(0x0,utils_1[_0x60e837(0x133)])(_0xdd1dea,_0x212071);}get['path'](){const _0x5d18e9=a29_0x194f89;if(this[_0x5d18e9(0x13e)])return this['nestedPath'];const _0x12fc60=Reflect['getOwnMetadata'](constants_1[_0x5d18e9(0x12c)],this['controllerType'])||'';return(0x0,utils_1[_0x5d18e9(0x133)])(_0x12fc60);}get[a29_0x194f89(0x13a)](){const _0xa3f20a=a29_0x194f89;return typedi_1[_0xa3f20a(0x148)][_0xa3f20a(0x14e)](this[_0xa3f20a(0x127)]);}async[a29_0x194f89(0x136)](){const _0x1b803f=a29_0x194f89;for(const _0x503d11 of this['middlewares']){const _0x58091f=await(0x0,middleware_injector_1[_0x1b803f(0x117)])(_0x503d11);this[_0x1b803f(0x12b)][_0x1b803f(0x131)](_0x58091f);}}async['injectNestedController'](_0x5d86ca){const _0x3d8bd1=a29_0x194f89,_0x2eebcc=_0x5d86ca[_0x3d8bd1(0x12e)];logger[_0x3d8bd1(0x138)](_0x3d8bd1(0x150)+_0x2eebcc[_0x3d8bd1(0x151)]+_0x3d8bd1(0x13c)+this[_0x3d8bd1(0x129)]+_0x5d86ca[_0x3d8bd1(0x129)]);const _0x4dbd94=new ControllerInjector(_0x2eebcc,this);_0x4dbd94['nestedPath']=_0x5d86ca['path'],await _0x4dbd94[_0x3d8bd1(0x144)](this[_0x3d8bd1(0x12b)]);}async[a29_0x194f89(0x132)](){const _0x6e40df=a29_0x194f89;var _0x59025e;for(const _0x1cc5ef of this[_0x6e40df(0x11b)]){const _0x2fbc68=(0x0,utils_1[_0x6e40df(0x122)])(_0x1cc5ef);if(_0x2fbc68[_0x6e40df(0x12e)])await this['injectNestedController'](_0x2fbc68);else{const _0x5b36de=_0x2fbc68['method']['toString']()[_0x6e40df(0x13d)]();logger[_0x6e40df(0x138)]('injecting\x20'+this['controllerType'][_0x6e40df(0x151)]+'#'+_0x1cc5ef[_0x6e40df(0x151)]+_0x6e40df(0x135)+_0x2fbc68[_0x6e40df(0x14f)]+']\x20'+(0x0,utils_1['normalizePaths'])(((_0x59025e=this[_0x6e40df(0x139)])===null||_0x59025e===void 0x0?void 0x0:_0x59025e['path'])||'',this[_0x6e40df(0x129)],_0x2fbc68['path'])),this[_0x6e40df(0x12b)][_0x5b36de](_0x2fbc68[_0x6e40df(0x129)],(0x0,handler_wrapper_1['handlerWrapper'])(_0x1cc5ef,this[_0x6e40df(0x13a)]));}}}async[a29_0x194f89(0x144)](_0x3d3648){const _0x49eadc=a29_0x194f89;!this[_0x49eadc(0x13e)]&&logger[_0x49eadc(0x138)]('injecting\x20'+this[_0x49eadc(0x127)][_0x49eadc(0x151)]+'\x20{'+this[_0x49eadc(0x14b)]+'}'),await this[_0x49eadc(0x136)](),await this[_0x49eadc(0x132)](),_0x3d3648[_0x49eadc(0x131)](''+this[_0x49eadc(0x14b)]+this[_0x49eadc(0x129)],this[_0x49eadc(0x12b)]);}}exports[a29_0x194f89(0x12a)]=ControllerInjector;