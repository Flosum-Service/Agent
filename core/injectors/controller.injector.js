function a23_0x4d4a(){const _0x2bc917=['META_CONTROLLER_PREFIX','instance','getHandlerMeta','use','4168pDqLsY','(((.+)+)+)+$','typedi','injecting\x20nested\x20','META_CONTROLLER_MIDDLEWARES','injectHandlers','constructor','../constants','handlerWrapper','META_CONTROLLER','normalizePaths','6354535HxoWEZ','ControllerInjector','apply','root','nestedPath','nested','default','5AQKSNq','2626827WJbUJS','META_HANDLER','controller-injector','toString','\x20at\x20[','injectMiddlewares','name','getOwnMetadata','12XVJnsn','getOwnPropertyNames','Router','./middleware.injector','META_CONTROLLER_PATH','injecting\x20','get','../wrappers/handler.wrapper','\x20at\x20','2681442SCBarH','491128YnFqEA','../classes/logger.class','method','router','injectNestedController','172141pkWjDq','prefix','log','map','middlewareInjector','middlewares','path','1312404wOWNay','30hVrhkx','__importDefault','express','controllerType','search','9436ECuYeT','inject','CONTROLLER_DEFAULT_PREFIX'];a23_0x4d4a=function(){return _0x2bc917;};return a23_0x4d4a();}const a23_0x4ca4d7=a23_0x489f;(function(_0x5458e2,_0x1899aa){const _0x191729=a23_0x489f,_0x5ba44f=_0x5458e2();while(!![]){try{const _0x3341b6=-parseInt(_0x191729(0x81))/0x1*(parseInt(_0x191729(0x72))/0x2)+-parseInt(_0x191729(0xa8))/0x3+parseInt(_0x191729(0x7c))/0x4+parseInt(_0x191729(0xa7))/0x5*(parseInt(_0x191729(0x88))/0x6)+parseInt(_0x191729(0x8e))/0x7*(parseInt(_0x191729(0x95))/0x8)+-parseInt(_0x191729(0x7b))/0x9+-parseInt(_0x191729(0x89))/0xa*(-parseInt(_0x191729(0xa0))/0xb);if(_0x3341b6===_0x1899aa)break;else _0x5ba44f['push'](_0x5ba44f['shift']());}catch(_0x5bc555){_0x5ba44f['push'](_0x5ba44f['shift']());}}}(a23_0x4d4a,0x8b476));const a23_0x4a14d1=(function(){let _0x5cd876=!![];return function(_0x401ede,_0x2b446d){const _0x1cf773=_0x5cd876?function(){const _0x3031ef=a23_0x489f;if(_0x2b446d){const _0x31f51b=_0x2b446d[_0x3031ef(0xa2)](_0x401ede,arguments);return _0x2b446d=null,_0x31f51b;}}:function(){};return _0x5cd876=![],_0x1cf773;};}()),a23_0x2917b5=a23_0x4a14d1(this,function(){const _0x2c6a55=a23_0x489f;return a23_0x2917b5[_0x2c6a55(0xab)]()[_0x2c6a55(0x8d)](_0x2c6a55(0x96))[_0x2c6a55(0xab)]()[_0x2c6a55(0x9b)](a23_0x2917b5)[_0x2c6a55(0x8d)]('(((.+)+)+)+$');});a23_0x2917b5();'use strict';var __importDefault=this&&this[a23_0x4ca4d7(0x8a)]||function(_0x4a958b){return _0x4a958b&&_0x4a958b['__esModule']?_0x4a958b:{'default':_0x4a958b};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['ControllerInjector']=void 0x0;const express_1=require(a23_0x4ca4d7(0x8b)),typedi_1=__importDefault(require(a23_0x4ca4d7(0x97))),logger_class_1=require(a23_0x4ca4d7(0x7d)),constants_1=require(a23_0x4ca4d7(0x9c)),utils_1=require('../utils'),handler_wrapper_1=require(a23_0x4ca4d7(0x79)),middleware_injector_1=require(a23_0x4ca4d7(0x75)),logger=new logger_class_1['Logger'](a23_0x4ca4d7(0xaa));class ControllerInjector{constructor(_0x368096,_0x303d48){const _0x518820=a23_0x4ca4d7;this[_0x518820(0x8c)]=_0x368096,this[_0x518820(0xa3)]=_0x303d48,this[_0x518820(0x7f)]=express_1[_0x518820(0x74)]({'mergeParams':!![]}),this[_0x518820(0xa4)]='';if(!Reflect[_0x518820(0x71)](constants_1[_0x518820(0x9e)],_0x368096))throw TypeError(_0x368096[_0x518820(0xae)]+'\x20is\x20not\x20a\x20Controller');}get['handlers'](){const _0x5daf54=a23_0x4ca4d7,_0x4e8c45=Object['getPrototypeOf'](this['instance']);return Object[_0x5daf54(0x73)](_0x4e8c45)[_0x5daf54(0x84)](_0x276008=>_0x4e8c45[_0x276008])['filter'](_0x178a95=>!!Reflect[_0x5daf54(0x71)](constants_1[_0x5daf54(0xa9)],_0x178a95));}get[a23_0x4ca4d7(0x86)](){const _0x5b3204=a23_0x4ca4d7;return Reflect[_0x5b3204(0x71)](constants_1[_0x5b3204(0x99)],this[_0x5b3204(0x92)])||[];}get[a23_0x4ca4d7(0x82)](){const _0x3f2d0c=a23_0x4ca4d7;var _0x431b85;const _0x2c1a6b=(_0x431b85=Reflect[_0x3f2d0c(0x71)](constants_1[_0x3f2d0c(0x91)],this[_0x3f2d0c(0x8c)]))!==null&&_0x431b85!==void 0x0?_0x431b85:constants_1[_0x3f2d0c(0x90)],_0x1877c5=Reflect[_0x3f2d0c(0x71)](constants_1['META_CONTROLLER_VERSION'],this[_0x3f2d0c(0x8c)])||'';return this[_0x3f2d0c(0xa4)]?'':utils_1['normalizePaths'](_0x2c1a6b,_0x1877c5);}get[a23_0x4ca4d7(0x87)](){const _0x3e8a4a=a23_0x4ca4d7;if(this[_0x3e8a4a(0xa4)])return this[_0x3e8a4a(0xa4)];const _0x2b2a2a=Reflect[_0x3e8a4a(0x71)](constants_1[_0x3e8a4a(0x76)],this['controllerType'])||'';return utils_1[_0x3e8a4a(0x9f)](_0x2b2a2a);}get[a23_0x4ca4d7(0x92)](){const _0x15b54d=a23_0x4ca4d7;return typedi_1[_0x15b54d(0xa6)][_0x15b54d(0x78)](this[_0x15b54d(0x8c)]);}async['injectMiddlewares'](){const _0x5abcdc=a23_0x4ca4d7;for(const _0x57a5a1 of this['middlewares']){const _0x4ddd44=await middleware_injector_1[_0x5abcdc(0x85)](_0x57a5a1);this[_0x5abcdc(0x7f)][_0x5abcdc(0x94)](_0x4ddd44);}}async[a23_0x4ca4d7(0x80)](_0x39e901){const _0x94258=a23_0x4ca4d7,_0x5f335d=_0x39e901[_0x94258(0xa5)];logger[_0x94258(0x83)](_0x94258(0x98)+_0x5f335d['name']+_0x94258(0x7a)+this[_0x94258(0x87)]+_0x39e901[_0x94258(0x87)]);const _0x456115=new ControllerInjector(_0x5f335d,this);_0x456115[_0x94258(0xa4)]=_0x39e901[_0x94258(0x87)],await _0x456115[_0x94258(0x8f)](this[_0x94258(0x7f)]);}async[a23_0x4ca4d7(0x9a)](){const _0x3bd38e=a23_0x4ca4d7;var _0x4ac6d4;for(const _0x52af7f of this['handlers']){const _0x46caf1=utils_1[_0x3bd38e(0x93)](_0x52af7f);if(_0x46caf1[_0x3bd38e(0xa5)])await this[_0x3bd38e(0x80)](_0x46caf1);else{const _0x4c6df8=_0x46caf1[_0x3bd38e(0x7e)][_0x3bd38e(0xab)]()['toLowerCase']();logger[_0x3bd38e(0x83)]('injecting\x20'+this['controllerType'][_0x3bd38e(0xae)]+'#'+_0x52af7f[_0x3bd38e(0xae)]+_0x3bd38e(0xac)+_0x46caf1[_0x3bd38e(0x7e)]+']\x20'+utils_1[_0x3bd38e(0x9f)](((_0x4ac6d4=this[_0x3bd38e(0xa3)])===null||_0x4ac6d4===void 0x0?void 0x0:_0x4ac6d4[_0x3bd38e(0x87)])||'',this[_0x3bd38e(0x87)],_0x46caf1[_0x3bd38e(0x87)])),this[_0x3bd38e(0x7f)][_0x4c6df8](_0x46caf1['path'],handler_wrapper_1[_0x3bd38e(0x9d)](_0x52af7f,this[_0x3bd38e(0x92)]));}}}async['inject'](_0x413b02){const _0x13b334=a23_0x4ca4d7;!this[_0x13b334(0xa4)]&&logger[_0x13b334(0x83)](_0x13b334(0x77)+this[_0x13b334(0x8c)][_0x13b334(0xae)]+'\x20{'+this[_0x13b334(0x82)]+'}'),await this[_0x13b334(0xad)](),await this[_0x13b334(0x9a)](),_0x413b02['use'](''+this['prefix']+this[_0x13b334(0x87)],this['router']);}}function a23_0x489f(_0x1b6d79,_0x235177){const _0x3aefc6=a23_0x4d4a();return a23_0x489f=function(_0x2917b5,_0x4a14d1){_0x2917b5=_0x2917b5-0x71;let _0x4d4a7d=_0x3aefc6[_0x2917b5];return _0x4d4a7d;},a23_0x489f(_0x1b6d79,_0x235177);}exports[a23_0x4ca4d7(0xa1)]=ControllerInjector;