const a28_0x1961c1=a28_0x31bd;(function(_0x1206bb,_0x1951dd){const _0x295d0f=a28_0x31bd,_0x188641=_0x1206bb();while(!![]){try{const _0x132c52=parseInt(_0x295d0f(0x101))/0x1*(parseInt(_0x295d0f(0x110))/0x2)+-parseInt(_0x295d0f(0x10c))/0x3+-parseInt(_0x295d0f(0x10d))/0x4+-parseInt(_0x295d0f(0x10f))/0x5+-parseInt(_0x295d0f(0xeb))/0x6+parseInt(_0x295d0f(0x106))/0x7+parseInt(_0x295d0f(0xe7))/0x8;if(_0x132c52===_0x1951dd)break;else _0x188641['push'](_0x188641['shift']());}catch(_0x428841){_0x188641['push'](_0x188641['shift']());}}}(a28_0x497b,0x3d4a4));const a28_0x2b9f58=(function(){let _0x1d9b01=!![];return function(_0x5cd46e,_0x4ea1d3){const _0x41d409=_0x1d9b01?function(){const _0x20c5ac=a28_0x31bd;if(_0x4ea1d3){const _0x1f770e=_0x4ea1d3[_0x20c5ac(0xef)](_0x5cd46e,arguments);return _0x4ea1d3=null,_0x1f770e;}}:function(){};return _0x1d9b01=![],_0x41d409;};}()),a28_0x55617a=a28_0x2b9f58(this,function(){const _0x16d524=a28_0x31bd;return a28_0x55617a['toString']()['search']('(((.+)+)+)+$')['toString']()[_0x16d524(0x111)](a28_0x55617a)[_0x16d524(0x10a)](_0x16d524(0xfd));});a28_0x55617a();'use strict';var __importDefault=this&&this[a28_0x1961c1(0x10e)]||function(_0x244543){const _0x29e289=a28_0x1961c1;return _0x244543&&_0x244543[_0x29e289(0xf2)]?_0x244543:{'default':_0x244543};};Object['defineProperty'](exports,a28_0x1961c1(0xf2),{'value':!![]}),exports[a28_0x1961c1(0xf9)]=void 0x0;function a28_0x31bd(_0x5e15d2,_0x3c8207){const _0x14b3ab=a28_0x497b();return a28_0x31bd=function(_0x55617a,_0x2b9f58){_0x55617a=_0x55617a-0xe3;let _0x497bf7=_0x14b3ab[_0x55617a];return _0x497bf7;},a28_0x31bd(_0x5e15d2,_0x3c8207);}const express_1=require('express'),typedi_1=__importDefault(require(a28_0x1961c1(0x113))),logger_class_1=require('../classes/logger.class'),constants_1=require(a28_0x1961c1(0xf1)),utils_1=require('../utils'),handler_wrapper_1=require(a28_0x1961c1(0xed)),middleware_injector_1=require(a28_0x1961c1(0xf7)),logger=new logger_class_1['Logger']('controller-injector');function a28_0x497b(){const _0x4ab5b0=['middlewares','middlewareInjector','prefix','META_CONTROLLER_PATH','META_HANDLER','injecting\x20nested\x20','default','log','9369440XjcMkx','getOwnMetadata','\x20at\x20[','nested','2574126sAoGtq','getOwnPropertyNames','../wrappers/handler.wrapper','path','apply','handlers','../constants','__esModule','nestedPath','instance','Router','injectHandlers','./middleware.injector','method','ControllerInjector','normalizePaths','META_CONTROLLER_VERSION','inject','(((.+)+)+)+$','injecting\x20','use','getPrototypeOf','98620tucOZC','META_CONTROLLER','getHandlerMeta','CONTROLLER_DEFAULT_PREFIX','\x20is\x20not\x20a\x20Controller','675010eNXxSm','META_CONTROLLER_MIDDLEWARES','get','root','search','map','1019232JtNfJU','1759116dHRUob','__importDefault','26310ELrjbG','4pMfVrh','constructor','injectNestedController','typedi','toLowerCase','injectMiddlewares','controllerType','router','name'];a28_0x497b=function(){return _0x4ab5b0;};return a28_0x497b();}class ControllerInjector{constructor(_0x4b259e,_0x350c2a){const _0x31a0f4=a28_0x1961c1;this[_0x31a0f4(0x116)]=_0x4b259e,this[_0x31a0f4(0x109)]=_0x350c2a,this[_0x31a0f4(0x117)]=(0x0,express_1[_0x31a0f4(0xf5)])({'mergeParams':!![]}),this[_0x31a0f4(0xf3)]='';if(!Reflect[_0x31a0f4(0xe8)](constants_1[_0x31a0f4(0x102)],_0x4b259e))throw TypeError(_0x4b259e[_0x31a0f4(0x118)]+_0x31a0f4(0x105));}get[a28_0x1961c1(0xf0)](){const _0x4c3add=a28_0x1961c1,_0x43b332=Object[_0x4c3add(0x100)](this[_0x4c3add(0xf4)]);return Object[_0x4c3add(0xec)](_0x43b332)[_0x4c3add(0x10b)](_0x54309a=>_0x43b332[_0x54309a])['filter'](_0x221c38=>!!Reflect['getOwnMetadata'](constants_1[_0x4c3add(0xe3)],_0x221c38));}get[a28_0x1961c1(0x119)](){const _0x4ee7be=a28_0x1961c1;return Reflect['getOwnMetadata'](constants_1[_0x4ee7be(0x107)],this['controllerType'])||[];}get[a28_0x1961c1(0x11b)](){const _0x2c541e=a28_0x1961c1;var _0x86c8c3;const _0x54fb57=(_0x86c8c3=Reflect[_0x2c541e(0xe8)](constants_1['META_CONTROLLER_PREFIX'],this[_0x2c541e(0x116)]))!==null&&_0x86c8c3!==void 0x0?_0x86c8c3:constants_1[_0x2c541e(0x104)],_0x53e955=Reflect[_0x2c541e(0xe8)](constants_1[_0x2c541e(0xfb)],this[_0x2c541e(0x116)])||'';return this[_0x2c541e(0xf3)]?'':(0x0,utils_1[_0x2c541e(0xfa)])(_0x54fb57,_0x53e955);}get[a28_0x1961c1(0xee)](){const _0x47204d=a28_0x1961c1;if(this['nestedPath'])return this[_0x47204d(0xf3)];const _0xdf591c=Reflect['getOwnMetadata'](constants_1[_0x47204d(0x11c)],this[_0x47204d(0x116)])||'';return(0x0,utils_1[_0x47204d(0xfa)])(_0xdf591c);}get[a28_0x1961c1(0xf4)](){const _0x38f208=a28_0x1961c1;return typedi_1[_0x38f208(0xe5)][_0x38f208(0x108)](this[_0x38f208(0x116)]);}async[a28_0x1961c1(0x115)](){const _0x6bcccc=a28_0x1961c1;for(const _0x589370 of this[_0x6bcccc(0x119)]){const _0x2ade0e=await(0x0,middleware_injector_1[_0x6bcccc(0x11a)])(_0x589370);this[_0x6bcccc(0x117)][_0x6bcccc(0xff)](_0x2ade0e);}}async[a28_0x1961c1(0x112)](_0x15b2a6){const _0x15b472=a28_0x1961c1,_0x59ace9=_0x15b2a6[_0x15b472(0xea)];logger[_0x15b472(0xe6)](_0x15b472(0xe4)+_0x59ace9[_0x15b472(0x118)]+'\x20at\x20'+this[_0x15b472(0xee)]+_0x15b2a6[_0x15b472(0xee)]);const _0x512dcd=new ControllerInjector(_0x59ace9,this);_0x512dcd[_0x15b472(0xf3)]=_0x15b2a6['path'],await _0x512dcd[_0x15b472(0xfc)](this['router']);}async['injectHandlers'](){const _0x35c9d4=a28_0x1961c1;var _0x4e3bf5;for(const _0x26c132 of this[_0x35c9d4(0xf0)]){const _0x189262=(0x0,utils_1[_0x35c9d4(0x103)])(_0x26c132);if(_0x189262['nested'])await this[_0x35c9d4(0x112)](_0x189262);else{const _0x59199a=_0x189262[_0x35c9d4(0xf8)]['toString']()[_0x35c9d4(0x114)]();logger[_0x35c9d4(0xe6)](_0x35c9d4(0xfe)+this[_0x35c9d4(0x116)][_0x35c9d4(0x118)]+'#'+_0x26c132['name']+_0x35c9d4(0xe9)+_0x189262['method']+']\x20'+(0x0,utils_1[_0x35c9d4(0xfa)])(((_0x4e3bf5=this[_0x35c9d4(0x109)])===null||_0x4e3bf5===void 0x0?void 0x0:_0x4e3bf5[_0x35c9d4(0xee)])||'',this[_0x35c9d4(0xee)],_0x189262[_0x35c9d4(0xee)])),this[_0x35c9d4(0x117)][_0x59199a](_0x189262['path'],(0x0,handler_wrapper_1['handlerWrapper'])(_0x26c132,this['instance']));}}}async[a28_0x1961c1(0xfc)](_0x411d66){const _0x1b8412=a28_0x1961c1;!this[_0x1b8412(0xf3)]&&logger['log']('injecting\x20'+this[_0x1b8412(0x116)]['name']+'\x20{'+this['prefix']+'}'),await this[_0x1b8412(0x115)](),await this[_0x1b8412(0xf6)](),_0x411d66[_0x1b8412(0xff)](''+this['prefix']+this[_0x1b8412(0xee)],this[_0x1b8412(0x117)]);}}exports[a28_0x1961c1(0xf9)]=ControllerInjector;