const a29_0x240f51=a29_0x33a4;(function(_0x5ce758,_0x3030d0){const _0x504e68=a29_0x33a4,_0x4d435a=_0x5ce758();while(!![]){try{const _0x3a6839=-parseInt(_0x504e68(0x1d4))/0x1*(parseInt(_0x504e68(0x1d7))/0x2)+parseInt(_0x504e68(0x1b8))/0x3+-parseInt(_0x504e68(0x1af))/0x4+parseInt(_0x504e68(0x1aa))/0x5*(parseInt(_0x504e68(0x1ac))/0x6)+parseInt(_0x504e68(0x1c6))/0x7+-parseInt(_0x504e68(0x1b5))/0x8*(parseInt(_0x504e68(0x1dd))/0x9)+parseInt(_0x504e68(0x1ca))/0xa;if(_0x3a6839===_0x3030d0)break;else _0x4d435a['push'](_0x4d435a['shift']());}catch(_0x1484bf){_0x4d435a['push'](_0x4d435a['shift']());}}}(a29_0x128c,0xef54a));const a29_0x50fce5=(function(){let _0x36426a=!![];return function(_0x2f2246,_0x11af90){const _0x50b2b4=_0x36426a?function(){const _0x32c81d=a29_0x33a4;if(_0x11af90){const _0x29a104=_0x11af90[_0x32c81d(0x1c3)](_0x2f2246,arguments);return _0x11af90=null,_0x29a104;}}:function(){};return _0x36426a=![],_0x50b2b4;};}()),a29_0x3965ba=a29_0x50fce5(this,function(){const _0x2c5127=a29_0x33a4;return a29_0x3965ba[_0x2c5127(0x1b7)]()[_0x2c5127(0x1a9)]('(((.+)+)+)+$')[_0x2c5127(0x1b7)]()['constructor'](a29_0x3965ba)[_0x2c5127(0x1a9)](_0x2c5127(0x1bf));});a29_0x3965ba();'use strict';var __importDefault=this&&this[a29_0x240f51(0x1db)]||function(_0x22b4b2){const _0x5cd90b=a29_0x240f51;return _0x22b4b2&&_0x22b4b2[_0x5cd90b(0x1d3)]?_0x22b4b2:{'default':_0x22b4b2};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a29_0x240f51(0x1bc)]=void 0x0;const express_1=require(a29_0x240f51(0x1d5)),typedi_1=__importDefault(require(a29_0x240f51(0x1d6))),logger_class_1=require('../classes/logger.class'),constants_1=require('../constants'),utils_1=require(a29_0x240f51(0x1bd)),handler_wrapper_1=require(a29_0x240f51(0x1b2)),middleware_injector_1=require('./middleware.injector'),logger=new logger_class_1[(a29_0x240f51(0x1b1))](a29_0x240f51(0x1a5));class ControllerInjector{constructor(_0x2e3dd6,_0x14c787){const _0x5a1a69=a29_0x240f51;this['controllerType']=_0x2e3dd6,this['root']=_0x14c787,this['router']=(0x0,express_1[_0x5a1a69(0x1c5)])({'mergeParams':!![]}),this[_0x5a1a69(0x1bb)]='';if(!Reflect[_0x5a1a69(0x1ae)](constants_1[_0x5a1a69(0x1a3)],_0x2e3dd6))throw TypeError(_0x2e3dd6[_0x5a1a69(0x1cf)]+_0x5a1a69(0x1a4));}get[a29_0x240f51(0x1b9)](){const _0x2196e1=a29_0x240f51,_0x453cc0=Object[_0x2196e1(0x1b4)](this[_0x2196e1(0x1ba)]);return Object[_0x2196e1(0x1ab)](_0x453cc0)[_0x2196e1(0x1be)](_0x1695a7=>_0x453cc0[_0x1695a7])[_0x2196e1(0x1df)](_0x32be86=>!!Reflect['getOwnMetadata'](constants_1['META_HANDLER'],_0x32be86));}get['middlewares'](){const _0x4efe5e=a29_0x240f51;return Reflect[_0x4efe5e(0x1ae)](constants_1[_0x4efe5e(0x1d9)],this[_0x4efe5e(0x1da)])||[];}get[a29_0x240f51(0x1c9)](){const _0x69bda1=a29_0x240f51;var _0x2f6883;const _0x396667=(_0x2f6883=Reflect[_0x69bda1(0x1ae)](constants_1[_0x69bda1(0x1d8)],this[_0x69bda1(0x1da)]))!==null&&_0x2f6883!==void 0x0?_0x2f6883:constants_1[_0x69bda1(0x1c8)],_0x374a0f=Reflect[_0x69bda1(0x1ae)](constants_1[_0x69bda1(0x1b0)],this[_0x69bda1(0x1da)])||'';return this[_0x69bda1(0x1bb)]?'':(0x0,utils_1[_0x69bda1(0x1de)])(_0x396667,_0x374a0f);}get[a29_0x240f51(0x1a6)](){const _0x5293f4=a29_0x240f51;if(this[_0x5293f4(0x1bb)])return this[_0x5293f4(0x1bb)];const _0x5394f0=Reflect[_0x5293f4(0x1ae)](constants_1[_0x5293f4(0x1a8)],this['controllerType'])||'';return(0x0,utils_1[_0x5293f4(0x1de)])(_0x5394f0);}get[a29_0x240f51(0x1ba)](){const _0x17b033=a29_0x240f51;return typedi_1[_0x17b033(0x1d1)][_0x17b033(0x1c4)](this[_0x17b033(0x1da)]);}async[a29_0x240f51(0x1c0)](){const _0x33bf20=a29_0x240f51;for(const _0x19fe03 of this['middlewares']){const _0xecae2=await(0x0,middleware_injector_1['middlewareInjector'])(_0x19fe03);this[_0x33bf20(0x1a7)]['use'](_0xecae2);}}async[a29_0x240f51(0x1ad)](_0x42aedd){const _0x4f9558=a29_0x240f51,_0x4ae56a=_0x42aedd[_0x4f9558(0x1ce)];logger[_0x4f9558(0x1c1)](_0x4f9558(0x1c7)+_0x4ae56a['name']+_0x4f9558(0x1d0)+this[_0x4f9558(0x1a6)]+_0x42aedd[_0x4f9558(0x1a6)]);const _0x249ab5=new ControllerInjector(_0x4ae56a,this);_0x249ab5[_0x4f9558(0x1bb)]=_0x42aedd[_0x4f9558(0x1a6)],await _0x249ab5[_0x4f9558(0x1dc)](this['router']);}async[a29_0x240f51(0x1d2)](){const _0x5b097f=a29_0x240f51;var _0x4c8c56;for(const _0x10e28c of this[_0x5b097f(0x1b9)]){const _0x49a2b2=(0x0,utils_1[_0x5b097f(0x1cb)])(_0x10e28c);if(_0x49a2b2['nested'])await this[_0x5b097f(0x1ad)](_0x49a2b2);else{const _0x396e8a=_0x49a2b2['method'][_0x5b097f(0x1b7)]()[_0x5b097f(0x1cd)]();logger[_0x5b097f(0x1c1)](_0x5b097f(0x1c2)+this['controllerType']['name']+'#'+_0x10e28c['name']+_0x5b097f(0x1b6)+_0x49a2b2[_0x5b097f(0x1b3)]+']\x20'+(0x0,utils_1[_0x5b097f(0x1de)])(((_0x4c8c56=this[_0x5b097f(0x1cc)])===null||_0x4c8c56===void 0x0?void 0x0:_0x4c8c56[_0x5b097f(0x1a6)])||'',this['path'],_0x49a2b2[_0x5b097f(0x1a6)])),this[_0x5b097f(0x1a7)][_0x396e8a](_0x49a2b2['path'],(0x0,handler_wrapper_1['handlerWrapper'])(_0x10e28c,this['instance']));}}}async[a29_0x240f51(0x1dc)](_0x1a869b){const _0xffce25=a29_0x240f51;!this[_0xffce25(0x1bb)]&&logger[_0xffce25(0x1c1)](_0xffce25(0x1c2)+this[_0xffce25(0x1da)][_0xffce25(0x1cf)]+'\x20{'+this[_0xffce25(0x1c9)]+'}'),await this[_0xffce25(0x1c0)](),await this['injectHandlers'](),_0x1a869b['use'](''+this[_0xffce25(0x1c9)]+this['path'],this[_0xffce25(0x1a7)]);}}function a29_0x128c(){const _0x17ee19=['typedi','26lsrBfy','META_CONTROLLER_PREFIX','META_CONTROLLER_MIDDLEWARES','controllerType','__importDefault','inject','462276KZGrQe','normalizePaths','filter','META_CONTROLLER','\x20is\x20not\x20a\x20Controller','controller-injector','path','router','META_CONTROLLER_PATH','search','90VJfukL','getOwnPropertyNames','52482HbbRLM','injectNestedController','getOwnMetadata','6413080XjNmuP','META_CONTROLLER_VERSION','Logger','../wrappers/handler.wrapper','method','getPrototypeOf','136NrdAOq','\x20at\x20[','toString','573456LdolYY','handlers','instance','nestedPath','ControllerInjector','../utils','map','(((.+)+)+)+$','injectMiddlewares','log','injecting\x20','apply','get','Router','6795376jiLfWV','injecting\x20nested\x20','CONTROLLER_DEFAULT_PREFIX','prefix','32962230zEocib','getHandlerMeta','root','toLowerCase','nested','name','\x20at\x20','default','injectHandlers','__esModule','89141ydpqqm','express'];a29_0x128c=function(){return _0x17ee19;};return a29_0x128c();}function a29_0x33a4(_0x426bef,_0x6bd33a){const _0x3b2b8c=a29_0x128c();return a29_0x33a4=function(_0x3965ba,_0x50fce5){_0x3965ba=_0x3965ba-0x1a3;let _0x128cb0=_0x3b2b8c[_0x3965ba];return _0x128cb0;},a29_0x33a4(_0x426bef,_0x6bd33a);}exports['ControllerInjector']=ControllerInjector;