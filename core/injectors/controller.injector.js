const a28_0x1f07a9=a28_0x3768;function a28_0x3768(_0x36aa52,_0x450dc0){const _0xff2243=a28_0x3ab2();return a28_0x3768=function(_0x4736d7,_0x364c12){_0x4736d7=_0x4736d7-0xd7;let _0x3ab24d=_0xff2243[_0x4736d7];return _0x3ab24d;},a28_0x3768(_0x36aa52,_0x450dc0);}(function(_0x14fb59,_0x24c58e){const _0x563890=a28_0x3768,_0x5cfb5a=_0x14fb59();while(!![]){try{const _0x488919=-parseInt(_0x563890(0x107))/0x1*(-parseInt(_0x563890(0xfe))/0x2)+-parseInt(_0x563890(0xfb))/0x3*(-parseInt(_0x563890(0x110))/0x4)+parseInt(_0x563890(0xe2))/0x5*(parseInt(_0x563890(0xe7))/0x6)+-parseInt(_0x563890(0x112))/0x7*(-parseInt(_0x563890(0x109))/0x8)+-parseInt(_0x563890(0xe4))/0x9+-parseInt(_0x563890(0xdc))/0xa+-parseInt(_0x563890(0xeb))/0xb;if(_0x488919===_0x24c58e)break;else _0x5cfb5a['push'](_0x5cfb5a['shift']());}catch(_0x3c55b6){_0x5cfb5a['push'](_0x5cfb5a['shift']());}}}(a28_0x3ab2,0x88b74));const a28_0x364c12=(function(){let _0x1106ea=!![];return function(_0x3e84af,_0xaed21a){const _0x232422=_0x1106ea?function(){if(_0xaed21a){const _0x5d801d=_0xaed21a['apply'](_0x3e84af,arguments);return _0xaed21a=null,_0x5d801d;}}:function(){};return _0x1106ea=![],_0x232422;};}()),a28_0x4736d7=a28_0x364c12(this,function(){const _0x573b0a=a28_0x3768;return a28_0x4736d7[_0x573b0a(0xed)]()['search']('(((.+)+)+)+$')[_0x573b0a(0xed)]()[_0x573b0a(0xe8)](a28_0x4736d7)['search']('(((.+)+)+)+$');});a28_0x4736d7();'use strict';var __importDefault=this&&this[a28_0x1f07a9(0xe5)]||function(_0x42fcb3){const _0x4da909=a28_0x1f07a9;return _0x42fcb3&&_0x42fcb3[_0x4da909(0xda)]?_0x42fcb3:{'default':_0x42fcb3};};Object[a28_0x1f07a9(0xdf)](exports,a28_0x1f07a9(0xda),{'value':!![]}),exports[a28_0x1f07a9(0xef)]=void 0x0;function a28_0x3ab2(){const _0x47802a=['META_CONTROLLER_PREFIX','4985827VPYBMA','router','toString','META_CONTROLLER_PATH','ControllerInjector','name','default','middlewares','method','\x20is\x20not\x20a\x20Controller','nestedPath','\x20at\x20[','Router','path','injecting\x20','express','9lYNbar','middlewareInjector','getPrototypeOf','162854oNnpaF','../constants','META_CONTROLLER_MIDDLEWARES','instance','../utils','normalizePaths','injectMiddlewares','../wrappers/handler.wrapper','injecting\x20nested\x20','2bJRkca','use','328GkBMWi','META_CONTROLLER_VERSION','map','handlers','get','getOwnPropertyNames','handlerWrapper','128076HgSZTM','typedi','29323ckunSO','inject','getOwnMetadata','filter','prefix','__esModule','nested','2434520meFqma','injectHandlers','getHandlerMeta','defineProperty','root','controllerType','28040OWJMEe','CONTROLLER_DEFAULT_PREFIX','742131EUMEnl','__importDefault','log','972OkmxyN','constructor','./middleware.injector'];a28_0x3ab2=function(){return _0x47802a;};return a28_0x3ab2();}const express_1=require(a28_0x1f07a9(0xfa)),typedi_1=__importDefault(require(a28_0x1f07a9(0x111))),logger_class_1=require('../classes/logger.class'),constants_1=require(a28_0x1f07a9(0xff)),utils_1=require(a28_0x1f07a9(0x102)),handler_wrapper_1=require(a28_0x1f07a9(0x105)),middleware_injector_1=require(a28_0x1f07a9(0xe9)),logger=new logger_class_1['Logger']('controller-injector');class ControllerInjector{constructor(_0x2258f7,_0x3e0557){const _0x3c0285=a28_0x1f07a9;this[_0x3c0285(0xe1)]=_0x2258f7,this['root']=_0x3e0557,this['router']=(0x0,express_1[_0x3c0285(0xf7)])({'mergeParams':!![]}),this['nestedPath']='';if(!Reflect[_0x3c0285(0xd7)](constants_1['META_CONTROLLER'],_0x2258f7))throw TypeError(_0x2258f7[_0x3c0285(0xf0)]+_0x3c0285(0xf4));}get['handlers'](){const _0x503ea7=a28_0x1f07a9,_0x3eb4a0=Object[_0x503ea7(0xfd)](this['instance']);return Object[_0x503ea7(0x10e)](_0x3eb4a0)[_0x503ea7(0x10b)](_0x5cd5ca=>_0x3eb4a0[_0x5cd5ca])[_0x503ea7(0xd8)](_0x5b086a=>!!Reflect[_0x503ea7(0xd7)](constants_1['META_HANDLER'],_0x5b086a));}get['middlewares'](){const _0x896db3=a28_0x1f07a9;return Reflect['getOwnMetadata'](constants_1[_0x896db3(0x100)],this[_0x896db3(0xe1)])||[];}get[a28_0x1f07a9(0xd9)](){const _0x1079d3=a28_0x1f07a9;var _0x41cd76;const _0x5830b9=(_0x41cd76=Reflect['getOwnMetadata'](constants_1[_0x1079d3(0xea)],this[_0x1079d3(0xe1)]))!==null&&_0x41cd76!==void 0x0?_0x41cd76:constants_1[_0x1079d3(0xe3)],_0x1a7352=Reflect[_0x1079d3(0xd7)](constants_1[_0x1079d3(0x10a)],this[_0x1079d3(0xe1)])||'';return this[_0x1079d3(0xf5)]?'':(0x0,utils_1[_0x1079d3(0x103)])(_0x5830b9,_0x1a7352);}get[a28_0x1f07a9(0xf8)](){const _0x441c97=a28_0x1f07a9;if(this['nestedPath'])return this['nestedPath'];const _0x24e40e=Reflect[_0x441c97(0xd7)](constants_1[_0x441c97(0xee)],this[_0x441c97(0xe1)])||'';return(0x0,utils_1['normalizePaths'])(_0x24e40e);}get['instance'](){const _0x4c3d25=a28_0x1f07a9;return typedi_1[_0x4c3d25(0xf1)][_0x4c3d25(0x10d)](this[_0x4c3d25(0xe1)]);}async['injectMiddlewares'](){const _0x564fb0=a28_0x1f07a9;for(const _0x18d92a of this[_0x564fb0(0xf2)]){const _0x34bfee=await(0x0,middleware_injector_1[_0x564fb0(0xfc)])(_0x18d92a);this[_0x564fb0(0xec)][_0x564fb0(0x108)](_0x34bfee);}}async['injectNestedController'](_0xe427b4){const _0x2a299c=a28_0x1f07a9,_0x197335=_0xe427b4['nested'];logger[_0x2a299c(0xe6)](_0x2a299c(0x106)+_0x197335['name']+'\x20at\x20'+this[_0x2a299c(0xf8)]+_0xe427b4[_0x2a299c(0xf8)]);const _0x37580a=new ControllerInjector(_0x197335,this);_0x37580a[_0x2a299c(0xf5)]=_0xe427b4[_0x2a299c(0xf8)],await _0x37580a['inject'](this[_0x2a299c(0xec)]);}async[a28_0x1f07a9(0xdd)](){const _0x18637c=a28_0x1f07a9;var _0x1d23c4;for(const _0x1b7fcb of this[_0x18637c(0x10c)]){const _0x484772=(0x0,utils_1[_0x18637c(0xde)])(_0x1b7fcb);if(_0x484772[_0x18637c(0xdb)])await this['injectNestedController'](_0x484772);else{const _0x2c77a8=_0x484772[_0x18637c(0xf3)][_0x18637c(0xed)]()['toLowerCase']();logger[_0x18637c(0xe6)](_0x18637c(0xf9)+this[_0x18637c(0xe1)][_0x18637c(0xf0)]+'#'+_0x1b7fcb[_0x18637c(0xf0)]+_0x18637c(0xf6)+_0x484772[_0x18637c(0xf3)]+']\x20'+(0x0,utils_1[_0x18637c(0x103)])(((_0x1d23c4=this[_0x18637c(0xe0)])===null||_0x1d23c4===void 0x0?void 0x0:_0x1d23c4['path'])||'',this[_0x18637c(0xf8)],_0x484772[_0x18637c(0xf8)])),this['router'][_0x2c77a8](_0x484772[_0x18637c(0xf8)],(0x0,handler_wrapper_1[_0x18637c(0x10f)])(_0x1b7fcb,this[_0x18637c(0x101)]));}}}async[a28_0x1f07a9(0x113)](_0x5314fa){const _0x241191=a28_0x1f07a9;!this[_0x241191(0xf5)]&&logger[_0x241191(0xe6)](_0x241191(0xf9)+this[_0x241191(0xe1)]['name']+'\x20{'+this[_0x241191(0xd9)]+'}'),await this[_0x241191(0x104)](),await this['injectHandlers'](),_0x5314fa[_0x241191(0x108)](''+this[_0x241191(0xd9)]+this[_0x241191(0xf8)],this['router']);}}exports['ControllerInjector']=ControllerInjector;