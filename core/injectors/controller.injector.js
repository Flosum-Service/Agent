const a23_0x3e0db6=a23_0x18e1;(function(_0x2c666f,_0x472782){const _0x1c268e=a23_0x18e1,_0xf8149c=_0x2c666f();while(!![]){try{const _0x302f9a=-parseInt(_0x1c268e(0x160))/0x1*(parseInt(_0x1c268e(0x189))/0x2)+-parseInt(_0x1c268e(0x166))/0x3+parseInt(_0x1c268e(0x17c))/0x4+parseInt(_0x1c268e(0x193))/0x5+-parseInt(_0x1c268e(0x16c))/0x6*(-parseInt(_0x1c268e(0x184))/0x7)+-parseInt(_0x1c268e(0x162))/0x8*(-parseInt(_0x1c268e(0x17e))/0x9)+-parseInt(_0x1c268e(0x17d))/0xa*(parseInt(_0x1c268e(0x198))/0xb);if(_0x302f9a===_0x472782)break;else _0xf8149c['push'](_0xf8149c['shift']());}catch(_0x261e3e){_0xf8149c['push'](_0xf8149c['shift']());}}}(a23_0x5da6,0x5bd53));const a23_0x19ba79=(function(){let _0x26906e=!![];return function(_0x58ec60,_0x404437){const _0x4e2520=_0x26906e?function(){if(_0x404437){const _0x5cb9eb=_0x404437['apply'](_0x58ec60,arguments);return _0x404437=null,_0x5cb9eb;}}:function(){};return _0x26906e=![],_0x4e2520;};}()),a23_0x511b73=a23_0x19ba79(this,function(){const _0x2474c4=a23_0x18e1;return a23_0x511b73[_0x2474c4(0x197)]()[_0x2474c4(0x167)](_0x2474c4(0x169))[_0x2474c4(0x197)]()[_0x2474c4(0x194)](a23_0x511b73)['search'](_0x2474c4(0x169));});function a23_0x5da6(){const _0x56dcbd=['getHandlerMeta','method','31946jQUebF','injecting\x20nested\x20','./middleware.injector','injectNestedController','prefix','getOwnPropertyNames','getPrototypeOf','__esModule','get','META_CONTROLLER','3155520IJHlUJ','constructor','nestedPath','controllerType','toString','35398mZQSiJ','META_CONTROLLER_VERSION','log','3ekWLZQ','ControllerInjector','568mzjskf','META_CONTROLLER_MIDDLEWARES','defineProperty','router','1316619USSTcv','search','META_CONTROLLER_PREFIX','(((.+)+)+)+$','instance','root','36fgHNEP','../wrappers/handler.wrapper','toLowerCase','\x20at\x20[','filter','injecting\x20','Router','\x20is\x20not\x20a\x20Controller','handlers','middlewares','express','getOwnMetadata','handlerWrapper','normalizePaths','nested','controller-injector','1731000JYHInn','3380tdhJNB','66537fWBUaf','path','use','default','name','Logger','422177BDWhAA','inject','injectHandlers'];a23_0x5da6=function(){return _0x56dcbd;};return a23_0x5da6();}a23_0x511b73();function a23_0x18e1(_0x18c228,_0xbcc03a){const _0x3e0cf8=a23_0x5da6();return a23_0x18e1=function(_0x511b73,_0x19ba79){_0x511b73=_0x511b73-0x160;let _0x5da63a=_0x3e0cf8[_0x511b73];return _0x5da63a;},a23_0x18e1(_0x18c228,_0xbcc03a);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x31c79f){const _0x5a27db=a23_0x18e1;return _0x31c79f&&_0x31c79f[_0x5a27db(0x190)]?_0x31c79f:{'default':_0x31c79f};};Object[a23_0x3e0db6(0x164)](exports,'__esModule',{'value':!![]}),exports[a23_0x3e0db6(0x161)]=void 0x0;const express_1=require(a23_0x3e0db6(0x176)),typedi_1=__importDefault(require('typedi')),logger_class_1=require('../classes/logger.class'),constants_1=require('../constants'),utils_1=require('../utils'),handler_wrapper_1=require(a23_0x3e0db6(0x16d)),middleware_injector_1=require(a23_0x3e0db6(0x18b)),logger=new logger_class_1[(a23_0x3e0db6(0x183))](a23_0x3e0db6(0x17b));class ControllerInjector{constructor(_0x5238e3,_0x2daa2b){const _0x1e8614=a23_0x3e0db6;this['controllerType']=_0x5238e3,this[_0x1e8614(0x16b)]=_0x2daa2b,this[_0x1e8614(0x165)]=express_1[_0x1e8614(0x172)]({'mergeParams':!![]}),this[_0x1e8614(0x195)]='';if(!Reflect['getOwnMetadata'](constants_1[_0x1e8614(0x192)],_0x5238e3))throw TypeError(_0x5238e3[_0x1e8614(0x182)]+_0x1e8614(0x173));}get[a23_0x3e0db6(0x174)](){const _0x4894ce=a23_0x3e0db6,_0x24b869=Object[_0x4894ce(0x18f)](this[_0x4894ce(0x16a)]);return Object[_0x4894ce(0x18e)](_0x24b869)['map'](_0x1e4046=>_0x24b869[_0x1e4046])[_0x4894ce(0x170)](_0x4f26e0=>!!Reflect[_0x4894ce(0x177)](constants_1['META_HANDLER'],_0x4f26e0));}get[a23_0x3e0db6(0x175)](){const _0x2eb222=a23_0x3e0db6;return Reflect['getOwnMetadata'](constants_1[_0x2eb222(0x163)],this['instance'])||[];}get[a23_0x3e0db6(0x18d)](){const _0x5a963b=a23_0x3e0db6;var _0x342a7f;const _0x23c2f2=(_0x342a7f=Reflect['getOwnMetadata'](constants_1[_0x5a963b(0x168)],this[_0x5a963b(0x196)]))!==null&&_0x342a7f!==void 0x0?_0x342a7f:constants_1['CONTROLLER_DEFAULT_PREFIX'],_0x46cd28=Reflect['getOwnMetadata'](constants_1[_0x5a963b(0x199)],this[_0x5a963b(0x196)])||'';return this[_0x5a963b(0x195)]?'':utils_1[_0x5a963b(0x179)](_0x23c2f2,_0x46cd28);}get[a23_0x3e0db6(0x17f)](){const _0x131543=a23_0x3e0db6;if(this['nestedPath'])return this[_0x131543(0x195)];const _0x15b78b=Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_PATH'],this[_0x131543(0x196)])||'';return utils_1[_0x131543(0x179)](_0x15b78b);}get[a23_0x3e0db6(0x16a)](){const _0xa63181=a23_0x3e0db6;return typedi_1[_0xa63181(0x181)][_0xa63181(0x191)](this[_0xa63181(0x196)]);}async['injectMiddlewares'](){const _0x32cc88=a23_0x3e0db6;for(const _0x216c74 of this[_0x32cc88(0x175)]){const _0x430e67=await middleware_injector_1['middlewareInjector'](_0x216c74);this['router'][_0x32cc88(0x180)](_0x430e67);}}async[a23_0x3e0db6(0x18c)](_0x2997b0){const _0x21cdc5=a23_0x3e0db6,_0x326b3d=_0x2997b0[_0x21cdc5(0x17a)];logger[_0x21cdc5(0x19a)](_0x21cdc5(0x18a)+_0x326b3d['name']+'\x20at\x20'+this[_0x21cdc5(0x17f)]+_0x2997b0[_0x21cdc5(0x17f)]);const _0x11c84c=new ControllerInjector(_0x326b3d,this);_0x11c84c['nestedPath']=_0x2997b0['path'],await _0x11c84c[_0x21cdc5(0x185)](this[_0x21cdc5(0x165)]);}async['injectHandlers'](){const _0x191c06=a23_0x3e0db6;var _0x54e005;for(const _0x18902b of this[_0x191c06(0x174)]){const _0x481d7d=utils_1[_0x191c06(0x187)](_0x18902b);if(_0x481d7d[_0x191c06(0x17a)])await this[_0x191c06(0x18c)](_0x481d7d);else{const _0x995663=_0x481d7d['method'][_0x191c06(0x197)]()[_0x191c06(0x16e)]();logger['log'](_0x191c06(0x171)+this[_0x191c06(0x196)][_0x191c06(0x182)]+'#'+_0x18902b[_0x191c06(0x182)]+_0x191c06(0x16f)+_0x481d7d[_0x191c06(0x188)]+']\x20'+utils_1[_0x191c06(0x179)](((_0x54e005=this[_0x191c06(0x16b)])===null||_0x54e005===void 0x0?void 0x0:_0x54e005[_0x191c06(0x17f)])||'',this['path'],_0x481d7d[_0x191c06(0x17f)])),this[_0x191c06(0x165)][_0x995663](_0x481d7d[_0x191c06(0x17f)],handler_wrapper_1[_0x191c06(0x178)](_0x18902b,this[_0x191c06(0x16a)]));}}}async[a23_0x3e0db6(0x185)](_0x4c7444){const _0x16bfad=a23_0x3e0db6;!this[_0x16bfad(0x195)]&&logger[_0x16bfad(0x19a)](_0x16bfad(0x171)+this[_0x16bfad(0x196)]['name']+'\x20{'+this[_0x16bfad(0x18d)]+'}'),await this['injectMiddlewares'](),await this[_0x16bfad(0x186)](),_0x4c7444[_0x16bfad(0x180)](''+this[_0x16bfad(0x18d)]+this['path'],this[_0x16bfad(0x165)]);}}exports[a23_0x3e0db6(0x161)]=ControllerInjector;