'use strict';const a91_0x20ee34=a91_0x1b37;(function(_0x2df245,_0x1e3ed3){const _0x3de83f=a91_0x1b37,_0x5a8503=_0x2df245();while(!![]){try{const _0x5b87bb=-parseInt(_0x3de83f(0x185))/0x1+-parseInt(_0x3de83f(0x170))/0x2+parseInt(_0x3de83f(0x19d))/0x3*(parseInt(_0x3de83f(0x18e))/0x4)+parseInt(_0x3de83f(0x191))/0x5*(parseInt(_0x3de83f(0x18a))/0x6)+-parseInt(_0x3de83f(0x18f))/0x7*(parseInt(_0x3de83f(0x180))/0x8)+-parseInt(_0x3de83f(0x184))/0x9+parseInt(_0x3de83f(0x195))/0xa*(parseInt(_0x3de83f(0x17a))/0xb);if(_0x5b87bb===_0x1e3ed3)break;else _0x5a8503['push'](_0x5a8503['shift']());}catch(_0x53a74d){_0x5a8503['push'](_0x5a8503['shift']());}}}(a91_0x1bdf,0xedcaf));Object[a91_0x20ee34(0x181)](exports,a91_0x20ee34(0x189),{'value':!![]}),exports[a91_0x20ee34(0x198)]=void 0x0;const xml_1=require('../../git/parsers/utils/xml'),PERMISSIONS_MAP=new Map([['classAccesses','apexClass'],['pageAccesses',a91_0x20ee34(0x199)],[a91_0x20ee34(0x1a1),'tab'],[a91_0x20ee34(0x188),a91_0x20ee34(0x17e)],[a91_0x20ee34(0x179),a91_0x20ee34(0x174)],['categoryGroupVisibilities',a91_0x20ee34(0x187)],[a91_0x20ee34(0x19b),a91_0x20ee34(0x1a6)],[a91_0x20ee34(0x172),a91_0x20ee34(0x16f)],[a91_0x20ee34(0x190),a91_0x20ee34(0x16f)],[a91_0x20ee34(0x19f),a91_0x20ee34(0x1a2)],[a91_0x20ee34(0x175),'externalDataSource'],[a91_0x20ee34(0x196),a91_0x20ee34(0x16f)],['flowAccesses',a91_0x20ee34(0x1a0)],[a91_0x20ee34(0x17f),'layout'],[a91_0x20ee34(0x173),a91_0x20ee34(0x18c)],[a91_0x20ee34(0x18b),'field']]);var UNREMOVE_PERMISSION;(function(_0x2ee456){const _0x515cd1=a91_0x20ee34,_0x2373d9=(function(){let _0x4bb2ad=!![];return function(_0x4b5e92,_0x2b1cfc){const _0x3de464=_0x4bb2ad?function(){const _0x5294a0=a91_0x1b37;if(_0x2b1cfc){const _0x1759db=_0x2b1cfc[_0x5294a0(0x1a3)](_0x4b5e92,arguments);return _0x2b1cfc=null,_0x1759db;}}:function(){};return _0x4bb2ad=![],_0x3de464;};}()),_0x42d002=_0x2373d9(this,function(){const _0x2c513a=a91_0x1b37;return _0x42d002[_0x2c513a(0x197)]()[_0x2c513a(0x19a)]('(((.+)+)+)+$')[_0x2c513a(0x197)]()[_0x2c513a(0x177)](_0x42d002)[_0x2c513a(0x19a)](_0x2c513a(0x17b));});_0x42d002(),_0x2ee456['hasActivationRequired']=_0x515cd1(0x17d),_0x2ee456[_0x515cd1(0x194)]=_0x515cd1(0x194),_0x2ee456[_0x515cd1(0x171)]=_0x515cd1(0x171),_0x2ee456[_0x515cd1(0x178)]='description';}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x3c2827=>{const _0x11e4f9=a91_0x20ee34;var _0x38e6f3,_0x99177c;return(_0x38e6f3=_0x3c2827['Profile'])===null||_0x38e6f3===void 0x0?!![]:delete _0x38e6f3[_0x11e4f9(0x17c)],(_0x99177c=_0x3c2827[_0x11e4f9(0x1a4)])===null||_0x99177c===void 0x0?!![]:delete _0x99177c[_0x11e4f9(0x19e)],_0x3c2827;},'PermissionSet':_0x42d494=>{const _0xc7f65e=a91_0x20ee34;var _0x5aaf62,_0x3b1690;return(_0x5aaf62=_0x42d494[_0xc7f65e(0x18d)])===null||_0x5aaf62===void 0x0?!![]:delete _0x5aaf62['userPermissions'],(_0x3b1690=_0x42d494[_0xc7f65e(0x18d)])===null||_0x3b1690===void 0x0?!![]:delete _0x3b1690[_0xc7f65e(0x19e)],_0x42d494;}};async function extractComponentPermissions(_0x1a0dd5,_0x1ecd2c,_0x3ec720){const _0x143d6c=a91_0x20ee34,_0x479587=await getReadyComponent(_0x1a0dd5,_0x3ec720),_0x3b1115=_0x479587[_0x3ec720];if(!_0x3b1115)return _0x479587;for(const _0x2fce0b in _0x3b1115){if(UNREMOVE_PERMISSION[_0x2fce0b])continue;const _0x39b6d4=_0x3b1115[_0x2fce0b],_0x526e4b=getValidPermission(_0x39b6d4,_0x2fce0b,_0x1ecd2c);_0x526e4b[_0x143d6c(0x1a7)]?_0x3b1115[_0x2fce0b]=_0x526e4b:delete _0x3b1115[_0x2fce0b];}return _0x479587[_0x3ec720]['$']={'xmlns':_0x143d6c(0x192)},_0x479587;}exports[a91_0x20ee34(0x198)]=extractComponentPermissions;function a91_0x1bdf(){const _0x5a5097=['description','profileActionOverrides','22cCLCVQ','(((.+)+)+)+$','userPermissions','hasActivationRequired','tab','layoutAssignments','1016aWpxpG','defineProperty','isArray','Component__r','13000086WjYgfs','519343QITDOw','Component_Name__c','dataCategoryGroup','tabVisibilities','__esModule','6996522FSWcHM','fieldPermissions','recordType','PermissionSet','3011868DJpyJG','62734cXadId','customSettingAccesses','5PaYtRy','http://soap.sforce.com/2006/04/metadata','push','label','12357110RlNllF','customPermissions','toString','extractComponentPermissions','apexPage','search','objectPermissions','includes','6hHWCRi','loginIpRanges','applicationVisibilities','flow','tabSettings','application','apply','Profile','get','object','length','name','2134946aiYwoC','custom','customMetadataTypeAccesses','recordTypeVisibilities','content','externalDataSourceAccesses','some','constructor'];a91_0x1bdf=function(){return _0x5a5097;};return a91_0x1bdf();}function getValidPermission(_0x3af891,_0x4486d7,_0x5a622f){const _0x4c0c2f=a91_0x20ee34;let _0x31bc88=[];if(_0x4486d7==='layoutAssignments')_0x31bc88=getValidLayout(_0x3af891,_0x4486d7,_0x5a622f);else{const _0x8fc5ff=Array[_0x4c0c2f(0x182)](_0x3af891)?_0x3af891:[_0x3af891];for(const _0x47c118 of _0x8fc5ff){isValidPermission(_0x47c118,_0x4486d7,_0x5a622f)&&_0x31bc88['push'](_0x47c118);}}return _0x31bc88;}function a91_0x1b37(_0x37a349,_0x1ad334){const _0x34c095=a91_0x1bdf();return a91_0x1b37=function(_0x21cc02,_0x3f6280){_0x21cc02=_0x21cc02-0x16f;let _0x1bdf2d=_0x34c095[_0x21cc02];return _0x1bdf2d;},a91_0x1b37(_0x37a349,_0x1ad334);}function isValidPermission(_0x3f4d78,_0x5931e4,_0x7ac009){const _0x11e3d7=a91_0x20ee34,_0x33411b=PERMISSIONS_MAP[_0x11e3d7(0x1a5)](_0x5931e4);return _0x3f4d78[_0x33411b]&&_0x7ac009[_0x11e3d7(0x176)](_0x4fb0a8=>_0x4fb0a8[_0x11e3d7(0x183)][_0x11e3d7(0x186)][_0x11e3d7(0x19c)](_0x3f4d78[_0x33411b]));}function getValidLayout(_0x1f25ab,_0x129226,_0x4b28d7){const _0x47b477=a91_0x20ee34,_0x433d53=[],_0x2e133d=Array[_0x47b477(0x182)](_0x1f25ab)?_0x1f25ab:[_0x1f25ab];for(const _0x30edef in _0x2e133d){isValidPermission(_0x2e133d[_0x30edef],_0x129226,_0x4b28d7)&&(!_0x2e133d[_0x30edef][_0x47b477(0x18c)]&&_0x433d53[_0x47b477(0x193)](_0x2e133d[_0x30edef]),isValidPermission(_0x2e133d[_0x30edef],_0x47b477(0x173),_0x4b28d7)&&_0x433d53['push'](_0x2e133d[_0x30edef]));}return _0x433d53;}async function getReadyComponent(_0x3a09bd,_0x5f4f9b){const _0x458719=await xml_1['Xml']['parse'](_0x3a09bd);return prepareDeleteComponent[_0x5f4f9b](_0x458719);}