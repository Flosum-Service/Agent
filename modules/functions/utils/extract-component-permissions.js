'use strict';const a107_0x515806=a107_0x13e2;(function(_0x47b293,_0x46df4a){const _0x145a9a=a107_0x13e2,_0xd14199=_0x47b293();while(!![]){try{const _0x856a63=parseInt(_0x145a9a(0x165))/0x1+-parseInt(_0x145a9a(0x17e))/0x2+parseInt(_0x145a9a(0x167))/0x3+parseInt(_0x145a9a(0x163))/0x4*(-parseInt(_0x145a9a(0x190))/0x5)+-parseInt(_0x145a9a(0x194))/0x6+-parseInt(_0x145a9a(0x18e))/0x7+parseInt(_0x145a9a(0x188))/0x8*(parseInt(_0x145a9a(0x199))/0x9);if(_0x856a63===_0x46df4a)break;else _0xd14199['push'](_0xd14199['shift']());}catch(_0x419465){_0xd14199['push'](_0xd14199['shift']());}}}(a107_0x26f6,0x9456a));function a107_0x13e2(_0x17be1c,_0xbeba09){const _0x3435dd=a107_0x26f6();return a107_0x13e2=function(_0x125465,_0x1f2839){_0x125465=_0x125465-0x15e;let _0x26f6d9=_0x3435dd[_0x125465];return _0x26f6d9;},a107_0x13e2(_0x17be1c,_0xbeba09);}Object[a107_0x515806(0x186)](exports,a107_0x515806(0x161),{'value':!![]}),exports[a107_0x515806(0x196)]=exports['extractComponentPermissions']=void 0x0;const xml_1=require(a107_0x515806(0x178)),xml2js_1=require(a107_0x515806(0x182)),PERMISSIONS_MAP=new Map([[a107_0x515806(0x17f),a107_0x515806(0x197)],[a107_0x515806(0x164),'apexPage'],[a107_0x515806(0x18d),a107_0x515806(0x192)],[a107_0x515806(0x15f),'tab'],[a107_0x515806(0x16b),a107_0x515806(0x18c)],[a107_0x515806(0x183),'dataCategoryGroup'],['objectPermissions',a107_0x515806(0x177)],[a107_0x515806(0x193),a107_0x515806(0x17d)],[a107_0x515806(0x15e),a107_0x515806(0x17d)],['applicationVisibilities',a107_0x515806(0x17b)],['externalDataSourceAccesses','externalDataSource'],['customPermissions',a107_0x515806(0x17d)],[a107_0x515806(0x160),a107_0x515806(0x198)],[a107_0x515806(0x16e),a107_0x515806(0x187)],['recordTypeVisibilities',a107_0x515806(0x189)],['fieldPermissions',a107_0x515806(0x162)]]);var UNREMOVE_PERMISSION;(function(_0x4409c7){const _0x344e64=a107_0x515806,_0x8423b7=(function(){let _0x58730c=!![];return function(_0x418247,_0x172eaf){const _0x449106=_0x58730c?function(){const _0x52476b=a107_0x13e2;if(_0x172eaf){const _0x38a383=_0x172eaf[_0x52476b(0x18b)](_0x418247,arguments);return _0x172eaf=null,_0x38a383;}}:function(){};return _0x58730c=![],_0x449106;};}()),_0x456964=_0x8423b7(this,function(){const _0x2d1ea5=a107_0x13e2;return _0x456964[_0x2d1ea5(0x169)]()[_0x2d1ea5(0x180)](_0x2d1ea5(0x18f))['toString']()['constructor'](_0x456964)[_0x2d1ea5(0x180)](_0x2d1ea5(0x18f));});_0x456964(),_0x4409c7[_0x344e64(0x170)]=_0x344e64(0x170),_0x4409c7[_0x344e64(0x191)]=_0x344e64(0x191),_0x4409c7[_0x344e64(0x17a)]=_0x344e64(0x17a),_0x4409c7[_0x344e64(0x173)]='description';}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x343c5a=>{const _0x2132af=a107_0x515806;var _0x135446,_0x1bb1a1;return(_0x135446=_0x343c5a['Profile'])===null||_0x135446===void 0x0?!![]:delete _0x135446[_0x2132af(0x174)],(_0x1bb1a1=_0x343c5a[_0x2132af(0x185)])===null||_0x1bb1a1===void 0x0?!![]:delete _0x1bb1a1['loginIpRanges'],_0x343c5a;},'PermissionSet':_0xa6fcbf=>{const _0x29788f=a107_0x515806;var _0x5711d2,_0x5c63b8;return(_0x5711d2=_0xa6fcbf[_0x29788f(0x181)])===null||_0x5711d2===void 0x0?!![]:delete _0x5711d2['userPermissions'],(_0x5c63b8=_0xa6fcbf[_0x29788f(0x181)])===null||_0x5c63b8===void 0x0?!![]:delete _0x5c63b8['loginIpRanges'],_0xa6fcbf;}};async function extractComponentPermissions(_0x58d927,_0x59cff3,_0x9d121e){const _0x2e031b=a107_0x515806,_0x564132=await getReadyComponent(_0x58d927,_0x9d121e),_0x1970e4=_0x564132[_0x9d121e];if(!_0x1970e4)return _0x564132;for(const _0x2befa4 in _0x1970e4){if(UNREMOVE_PERMISSION[_0x2befa4])continue;const _0x140296=_0x1970e4[_0x2befa4],_0x2eb9dd=getValidPermission(_0x140296,_0x2befa4,_0x59cff3);_0x2eb9dd[_0x2e031b(0x16f)]?_0x1970e4[_0x2befa4]=_0x2eb9dd:delete _0x1970e4[_0x2befa4];}return _0x564132[_0x9d121e]['$']={'xmlns':'http://soap.sforce.com/2006/04/metadata'},_0x564132;}exports[a107_0x515806(0x16a)]=extractComponentPermissions;function a107_0x26f6(){const _0x1e2e28=['get','Profile','defineProperty','layout','18565912JrFTXA','recordType','recordTypeVisibilities','apply','content','tabSettings','5680675LxoqRt','(((.+)+)+)+$','17585RzpZIu','label','tab','customMetadataTypeAccesses','5134920aiSPMT','Xml','mergeComponentPermissions','apexClass','flow','9dJaXFt','customSettingAccesses','tabVisibilities','flowAccesses','__esModule','field','316dJNtTc','pageAccesses','787064HvzKCU','Builder','1688103zopToK','http://soap.sforce.com/2006/04/metadata','toString','extractComponentPermissions','profileActionOverrides','push','Component__r','layoutAssignments','length','hasActivationRequired','1.0','isArray','description','userPermissions','parse','some','object','../../git/parsers/utils/xml','includes','custom','application','UTF-8','name','2235444bFfnRW','classAccesses','search','PermissionSet','xml2js','categoryGroupVisibilities'];a107_0x26f6=function(){return _0x1e2e28;};return a107_0x26f6();}async function mergeComponentPermissions(_0x598627,_0x27229a,_0x3a96ce){const _0x23e38a=a107_0x515806,_0xd1d779=await xml_1[_0x23e38a(0x195)][_0x23e38a(0x175)](_0x598627),_0x152c78=await xml_1[_0x23e38a(0x195)][_0x23e38a(0x175)](_0x27229a),_0x1cd48e=_0xd1d779[_0x3a96ce],_0x425380=_0x152c78[_0x3a96ce];if(!_0x1cd48e)return _0x27229a;for(const _0x319579 in _0x1cd48e){const _0x2a2df2=PERMISSIONS_MAP[_0x23e38a(0x184)](_0x319579);if(!_0x2a2df2||!_0x425380[_0x319579]){_0x425380[_0x319579]=_0x1cd48e[_0x319579];continue;}for(const _0x458b74 of _0x1cd48e[_0x319579]){const _0x17923b=_0x425380[_0x319579]['findIndex'](_0x12d61e=>_0x458b74[_0x2a2df2][0x0]===_0x12d61e[_0x2a2df2][0x0]);_0x17923b!==-0x1?_0x425380[_0x319579][_0x17923b]=_0x458b74:_0x425380[_0x319579][_0x23e38a(0x16c)](_0x458b74);}}_0x152c78[_0x3a96ce]['$']={'xmlns':_0x23e38a(0x168)};const _0x51bafb=new xml2js_1[(_0x23e38a(0x166))]({'xmldec':{'version':_0x23e38a(0x171),'encoding':_0x23e38a(0x17c)}});return _0x51bafb['buildObject'](_0x152c78);}exports[a107_0x515806(0x196)]=mergeComponentPermissions;function getValidPermission(_0x519c38,_0x2ac479,_0x5a81be){const _0x1a7755=a107_0x515806;let _0x239d88=[];if(_0x2ac479==='layoutAssignments')_0x239d88=getValidLayout(_0x519c38,_0x2ac479,_0x5a81be);else{const _0x34ae41=Array[_0x1a7755(0x172)](_0x519c38)?_0x519c38:[_0x519c38];for(const _0x408d37 of _0x34ae41){isValidPermission(_0x408d37,_0x2ac479,_0x5a81be)&&_0x239d88[_0x1a7755(0x16c)](_0x408d37);}}return _0x239d88;}function isValidPermission(_0x1d3795,_0x265071,_0x4d25f2){const _0x243faa=a107_0x515806,_0x39ad5f=PERMISSIONS_MAP['get'](_0x265071);return _0x1d3795[_0x39ad5f]&&_0x4d25f2[_0x243faa(0x176)](_0x1cf459=>_0x1cf459[_0x243faa(0x16d)]['Component_Name__c'][_0x243faa(0x179)](_0x1d3795[_0x39ad5f]));}function getValidLayout(_0x28043d,_0x1ccc8a,_0x4d6639){const _0x190566=a107_0x515806,_0xbed0a4=[],_0x12da29=Array[_0x190566(0x172)](_0x28043d)?_0x28043d:[_0x28043d];for(const _0xf1fa0f in _0x12da29){isValidPermission(_0x12da29[_0xf1fa0f],_0x1ccc8a,_0x4d6639)&&(!_0x12da29[_0xf1fa0f][_0x190566(0x189)]&&_0xbed0a4[_0x190566(0x16c)](_0x12da29[_0xf1fa0f]),isValidPermission(_0x12da29[_0xf1fa0f],_0x190566(0x18a),_0x4d6639)&&_0xbed0a4[_0x190566(0x16c)](_0x12da29[_0xf1fa0f]));}return _0xbed0a4;}async function getReadyComponent(_0x2c4a3c,_0x41244c){const _0x3600b0=a107_0x515806,_0x8743e8=await xml_1[_0x3600b0(0x195)]['parse'](_0x2c4a3c);return prepareDeleteComponent[_0x41244c](_0x8743e8);}