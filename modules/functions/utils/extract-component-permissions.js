'use strict';const a92_0x38f8cf=a92_0x5121;(function(_0x72b0b,_0x46d4ae){const _0x280f9a=a92_0x5121,_0x181418=_0x72b0b();while(!![]){try{const _0x2beaee=parseInt(_0x280f9a(0xc7))/0x1+parseInt(_0x280f9a(0xbd))/0x2+parseInt(_0x280f9a(0xdd))/0x3*(parseInt(_0x280f9a(0xde))/0x4)+parseInt(_0x280f9a(0xe6))/0x5+parseInt(_0x280f9a(0xe7))/0x6+parseInt(_0x280f9a(0xce))/0x7+-parseInt(_0x280f9a(0xba))/0x8*(parseInt(_0x280f9a(0xd2))/0x9);if(_0x2beaee===_0x46d4ae)break;else _0x181418['push'](_0x181418['shift']());}catch(_0x3c9a34){_0x181418['push'](_0x181418['shift']());}}}(a92_0x22e5,0xa906c));function a92_0x22e5(){const _0x247c35=['classAccesses','UTF-8','profileActionOverrides','search','findIndex','object','xml2js','hasActivationRequired','defineProperty','constructor','152xygqnO','get','apply','1067782FnACKL','recordTypeVisibilities','description','externalDataSource','parse','apexClass','Builder','PermissionSet','recordType','layoutAssignments','507449CZNdYf','Profile','length','application','mergeComponentPermissions','apexPage','tab','4000661dGWcDC','customSettingAccesses','label','Component_Name__c','1655811IVHpCV','isArray','(((.+)+)+)+$','dataCategoryGroup','extractComponentPermissions','name','flowAccesses','http://soap.sforce.com/2006/04/metadata','includes','custom','toString','4068bssbcp','652QesovP','tabSettings','Component__r','content','categoryGroupVisibilities','buildObject','loginIpRanges','Xml','4959955UBoDHv','8172306ljhnzD','push','userPermissions','tabVisibilities','customPermissions'];a92_0x22e5=function(){return _0x247c35;};return a92_0x22e5();}Object[a92_0x38f8cf(0xb8)](exports,'__esModule',{'value':!![]}),exports[a92_0x38f8cf(0xcb)]=exports[a92_0x38f8cf(0xd6)]=void 0x0;const xml_1=require('../../git/parsers/utils/xml'),xml2js_1=require(a92_0x38f8cf(0xb6)),PERMISSIONS_MAP=new Map([[a92_0x38f8cf(0xb0),a92_0x38f8cf(0xc2)],['pageAccesses',a92_0x38f8cf(0xcc)],[a92_0x38f8cf(0xdf),a92_0x38f8cf(0xcd)],[a92_0x38f8cf(0xea),a92_0x38f8cf(0xcd)],[a92_0x38f8cf(0xb2),a92_0x38f8cf(0xe1)],[a92_0x38f8cf(0xe2),a92_0x38f8cf(0xd5)],['objectPermissions',a92_0x38f8cf(0xb5)],['customMetadataTypeAccesses',a92_0x38f8cf(0xd7)],[a92_0x38f8cf(0xcf),a92_0x38f8cf(0xd7)],['applicationVisibilities',a92_0x38f8cf(0xca)],['externalDataSourceAccesses',a92_0x38f8cf(0xc0)],[a92_0x38f8cf(0xaf),'name'],[a92_0x38f8cf(0xd8),'flow'],[a92_0x38f8cf(0xc6),'layout'],[a92_0x38f8cf(0xbe),'recordType'],['fieldPermissions','field']]);var UNREMOVE_PERMISSION;(function(_0x55b996){const _0x24e353=a92_0x38f8cf,_0x6bd41c=(function(){let _0x30fd1b=!![];return function(_0x15b3cf,_0x58d0a2){const _0x4330a9=_0x30fd1b?function(){const _0x39c1e6=a92_0x5121;if(_0x58d0a2){const _0x4e0b6f=_0x58d0a2[_0x39c1e6(0xbc)](_0x15b3cf,arguments);return _0x58d0a2=null,_0x4e0b6f;}}:function(){};return _0x30fd1b=![],_0x4330a9;};}()),_0x5aa8ef=_0x6bd41c(this,function(){const _0x524a66=a92_0x5121;return _0x5aa8ef[_0x524a66(0xdc)]()[_0x524a66(0xb3)]('(((.+)+)+)+$')['toString']()[_0x524a66(0xb9)](_0x5aa8ef)[_0x524a66(0xb3)](_0x524a66(0xd4));});_0x5aa8ef(),_0x55b996[_0x24e353(0xb7)]=_0x24e353(0xb7),_0x55b996[_0x24e353(0xd0)]=_0x24e353(0xd0),_0x55b996[_0x24e353(0xdb)]='custom',_0x55b996[_0x24e353(0xbf)]=_0x24e353(0xbf);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x225c0a=>{const _0x553ec6=a92_0x38f8cf;var _0x2f5228,_0x5d877d;return(_0x2f5228=_0x225c0a[_0x553ec6(0xc8)])===null||_0x2f5228===void 0x0?!![]:delete _0x2f5228[_0x553ec6(0xe9)],(_0x5d877d=_0x225c0a['Profile'])===null||_0x5d877d===void 0x0?!![]:delete _0x5d877d[_0x553ec6(0xe4)],_0x225c0a;},'PermissionSet':_0x3e1095=>{const _0x33d39d=a92_0x38f8cf;var _0x3d6959,_0x260da5;return(_0x3d6959=_0x3e1095['PermissionSet'])===null||_0x3d6959===void 0x0?!![]:delete _0x3d6959[_0x33d39d(0xe9)],(_0x260da5=_0x3e1095[_0x33d39d(0xc4)])===null||_0x260da5===void 0x0?!![]:delete _0x260da5[_0x33d39d(0xe4)],_0x3e1095;}};async function extractComponentPermissions(_0x2a6d85,_0x5a8aee,_0x11ee5e){const _0x543de1=a92_0x38f8cf,_0x3230ac=await getReadyComponent(_0x2a6d85,_0x11ee5e),_0x29cebe=_0x3230ac[_0x11ee5e];if(!_0x29cebe)return _0x3230ac;for(const _0x235e28 in _0x29cebe){if(UNREMOVE_PERMISSION[_0x235e28])continue;const _0xbc421f=_0x29cebe[_0x235e28],_0x1b5738=getValidPermission(_0xbc421f,_0x235e28,_0x5a8aee);_0x1b5738[_0x543de1(0xc9)]?_0x29cebe[_0x235e28]=_0x1b5738:delete _0x29cebe[_0x235e28];}return _0x3230ac[_0x11ee5e]['$']={'xmlns':_0x543de1(0xd9)},_0x3230ac;}exports[a92_0x38f8cf(0xd6)]=extractComponentPermissions;async function mergeComponentPermissions(_0x235a56,_0x1a3b98,_0x49cfc6){const _0x4f11fc=a92_0x38f8cf,_0x467f4f=await xml_1[_0x4f11fc(0xe5)][_0x4f11fc(0xc1)](_0x235a56),_0x205335=await xml_1[_0x4f11fc(0xe5)][_0x4f11fc(0xc1)](_0x1a3b98),_0xb321ec=_0x467f4f[_0x49cfc6],_0x39a54c=_0x205335[_0x49cfc6];if(!_0xb321ec)return _0x1a3b98;for(const _0x197821 in _0xb321ec){const _0x5a10ae=PERMISSIONS_MAP[_0x4f11fc(0xbb)](_0x197821);if(!_0x5a10ae||!_0x39a54c[_0x197821]){_0x39a54c[_0x197821]=_0xb321ec[_0x197821];continue;}for(const _0x13d0a4 of _0xb321ec[_0x197821]){const _0x5857e9=_0x39a54c[_0x197821][_0x4f11fc(0xb4)](_0x27b31b=>_0x13d0a4[_0x5a10ae][0x0]===_0x27b31b[_0x5a10ae][0x0]);_0x5857e9!==-0x1?_0x39a54c[_0x197821][_0x5857e9]=_0x13d0a4:_0x39a54c[_0x197821][_0x4f11fc(0xe8)](_0x13d0a4);}}_0x205335[_0x49cfc6]['$']={'xmlns':'http://soap.sforce.com/2006/04/metadata'};const _0xf3f571=new xml2js_1[(_0x4f11fc(0xc3))]({'xmldec':{'version':'1.0','encoding':_0x4f11fc(0xb1)}});return _0xf3f571[_0x4f11fc(0xe3)](_0x205335);}function a92_0x5121(_0x300fd0,_0x291d38){const _0x4e08e5=a92_0x22e5();return a92_0x5121=function(_0x1944bf,_0x278777){_0x1944bf=_0x1944bf-0xaf;let _0x22e56a=_0x4e08e5[_0x1944bf];return _0x22e56a;},a92_0x5121(_0x300fd0,_0x291d38);}exports[a92_0x38f8cf(0xcb)]=mergeComponentPermissions;function getValidPermission(_0x1629f8,_0x51e562,_0x1d8cad){const _0x159468=a92_0x38f8cf;let _0x26291f=[];if(_0x51e562==='layoutAssignments')_0x26291f=getValidLayout(_0x1629f8,_0x51e562,_0x1d8cad);else{const _0x54d329=Array[_0x159468(0xd3)](_0x1629f8)?_0x1629f8:[_0x1629f8];for(const _0x1f575b of _0x54d329){isValidPermission(_0x1f575b,_0x51e562,_0x1d8cad)&&_0x26291f[_0x159468(0xe8)](_0x1f575b);}}return _0x26291f;}function isValidPermission(_0x29e36f,_0x38dfe0,_0x50f1b5){const _0x4e5928=a92_0x38f8cf,_0xc99c7c=PERMISSIONS_MAP['get'](_0x38dfe0);return _0x29e36f[_0xc99c7c]&&_0x50f1b5['some'](_0x53e421=>_0x53e421[_0x4e5928(0xe0)][_0x4e5928(0xd1)][_0x4e5928(0xda)](_0x29e36f[_0xc99c7c]));}function getValidLayout(_0x4c4318,_0x433006,_0x1a9ea5){const _0x207f12=a92_0x38f8cf,_0xde56b2=[],_0x4710f6=Array[_0x207f12(0xd3)](_0x4c4318)?_0x4c4318:[_0x4c4318];for(const _0x1f9397 in _0x4710f6){isValidPermission(_0x4710f6[_0x1f9397],_0x433006,_0x1a9ea5)&&(!_0x4710f6[_0x1f9397][_0x207f12(0xc5)]&&_0xde56b2[_0x207f12(0xe8)](_0x4710f6[_0x1f9397]),isValidPermission(_0x4710f6[_0x1f9397],_0x207f12(0xbe),_0x1a9ea5)&&_0xde56b2[_0x207f12(0xe8)](_0x4710f6[_0x1f9397]));}return _0xde56b2;}async function getReadyComponent(_0x466d9e,_0x40f236){const _0x4d9e31=a92_0x38f8cf,_0x6ceca6=await xml_1[_0x4d9e31(0xe5)]['parse'](_0x466d9e);return prepareDeleteComponent[_0x40f236](_0x6ceca6);}