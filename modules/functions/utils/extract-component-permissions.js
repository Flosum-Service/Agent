'use strict';function a107_0x2301(){const _0x290558=['push','customPermissions','54232DWNPCj','990xgMgSO','apexPage','pageAccesses','dataCategoryGroup','userPermissions','content','apply','externalDataSource','extractComponentPermissions','tab','tabSettings','1.0','findIndex','flowAccesses','loginIpRanges','constructor','objectPermissions','custom','search','tabVisibilities','Component__r','parse','application','fieldPermissions','layout','includes','(((.+)+)+)+$','toString','xml2js','Builder','PermissionSet','144132pETxkD','label','categoryGroupVisibilities','../../git/parsers/utils/xml','16612iHFnKS','96zKPZqD','Xml','get','field','1985004YmYeVK','recordType','apexClass','buildObject','583209pEzBHz','5755335SekFAF','recordTypeVisibilities','Profile','1945eWJdhN','classAccesses','name','profileActionOverrides','isArray','defineProperty','object','hasActivationRequired','length','http://soap.sforce.com/2006/04/metadata','layoutAssignments','188146zNYQAQ','description','externalDataSourceAccesses','mergeComponentPermissions','1926oRkRVW'];a107_0x2301=function(){return _0x290558;};return a107_0x2301();}const a107_0x49fefc=a107_0x4de1;(function(_0x237e38,_0xa49905){const _0x24e0a1=a107_0x4de1,_0x4e5bdf=_0x237e38();while(!![]){try{const _0x3965ef=parseInt(_0x24e0a1(0xab))/0x1+parseInt(_0x24e0a1(0xb4))/0x2+-parseInt(_0x24e0a1(0xb9))/0x3+-parseInt(_0x24e0a1(0xaf))/0x4*(parseInt(_0x24e0a1(0xbc))/0x5)+parseInt(_0x24e0a1(0xb0))/0x6*(-parseInt(_0x24e0a1(0xc7))/0x7)+-parseInt(_0x24e0a1(0x8b))/0x8*(parseInt(_0x24e0a1(0xcb))/0x9)+-parseInt(_0x24e0a1(0x8c))/0xa*(-parseInt(_0x24e0a1(0xb8))/0xb);if(_0x3965ef===_0xa49905)break;else _0x4e5bdf['push'](_0x4e5bdf['shift']());}catch(_0x5d7164){_0x4e5bdf['push'](_0x4e5bdf['shift']());}}}(a107_0x2301,0xed02f));Object[a107_0x49fefc(0xc1)](exports,'__esModule',{'value':!![]}),exports['mergeComponentPermissions']=exports[a107_0x49fefc(0x94)]=void 0x0;const xml_1=require(a107_0x49fefc(0xae)),xml2js_1=require(a107_0x49fefc(0xa8)),PERMISSIONS_MAP=new Map([[a107_0x49fefc(0xbd),a107_0x49fefc(0xb6)],[a107_0x49fefc(0x8e),a107_0x49fefc(0x8d)],[a107_0x49fefc(0x96),a107_0x49fefc(0x95)],[a107_0x49fefc(0x9f),'tab'],[a107_0x49fefc(0xbf),a107_0x49fefc(0x91)],[a107_0x49fefc(0xad),a107_0x49fefc(0x8f)],[a107_0x49fefc(0x9c),a107_0x49fefc(0xc2)],['customMetadataTypeAccesses',a107_0x49fefc(0xbe)],['customSettingAccesses',a107_0x49fefc(0xbe)],['applicationVisibilities',a107_0x49fefc(0xa2)],[a107_0x49fefc(0xc9),a107_0x49fefc(0x93)],[a107_0x49fefc(0xcd),a107_0x49fefc(0xbe)],[a107_0x49fefc(0x99),'flow'],['layoutAssignments',a107_0x49fefc(0xa4)],['recordTypeVisibilities',a107_0x49fefc(0xb5)],[a107_0x49fefc(0xa3),a107_0x49fefc(0xb3)]]);var UNREMOVE_PERMISSION;(function(_0x4acf8a){const _0x3d9c46=a107_0x49fefc,_0xfcac6d=(function(){let _0x2f47b7=!![];return function(_0x303c0b,_0x354080){const _0x2f8db0=_0x2f47b7?function(){const _0x45ea7d=a107_0x4de1;if(_0x354080){const _0x120602=_0x354080[_0x45ea7d(0x92)](_0x303c0b,arguments);return _0x354080=null,_0x120602;}}:function(){};return _0x2f47b7=![],_0x2f8db0;};}()),_0x5a785e=_0xfcac6d(this,function(){const _0x4ead5a=a107_0x4de1;return _0x5a785e[_0x4ead5a(0xa7)]()[_0x4ead5a(0x9e)](_0x4ead5a(0xa6))['toString']()[_0x4ead5a(0x9b)](_0x5a785e)[_0x4ead5a(0x9e)](_0x4ead5a(0xa6));});_0x5a785e(),_0x4acf8a['hasActivationRequired']=_0x3d9c46(0xc3),_0x4acf8a[_0x3d9c46(0xac)]=_0x3d9c46(0xac),_0x4acf8a[_0x3d9c46(0x9d)]=_0x3d9c46(0x9d),_0x4acf8a[_0x3d9c46(0xc8)]=_0x3d9c46(0xc8);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x34f65e=>{const _0x196c18=a107_0x49fefc;var _0x3dcdf0,_0x222afd;return(_0x3dcdf0=_0x34f65e[_0x196c18(0xbb)])===null||_0x3dcdf0===void 0x0?!![]:delete _0x3dcdf0[_0x196c18(0x90)],(_0x222afd=_0x34f65e['Profile'])===null||_0x222afd===void 0x0?!![]:delete _0x222afd[_0x196c18(0x9a)],_0x34f65e;},'PermissionSet':_0x8cfd25=>{const _0xd5cd74=a107_0x49fefc;var _0x3b01f5,_0x2d12b7;return(_0x3b01f5=_0x8cfd25[_0xd5cd74(0xaa)])===null||_0x3b01f5===void 0x0?!![]:delete _0x3b01f5[_0xd5cd74(0x90)],(_0x2d12b7=_0x8cfd25['PermissionSet'])===null||_0x2d12b7===void 0x0?!![]:delete _0x2d12b7[_0xd5cd74(0x9a)],_0x8cfd25;}};async function extractComponentPermissions(_0x39028d,_0x597729,_0x4ef113){const _0x2134bf=a107_0x49fefc,_0x11dc29=await getReadyComponent(_0x39028d,_0x4ef113),_0x522d65=_0x11dc29[_0x4ef113];if(!_0x522d65)return _0x11dc29;for(const _0x54749c in _0x522d65){if(UNREMOVE_PERMISSION[_0x54749c])continue;const _0x5d4e59=_0x522d65[_0x54749c],_0x139ab1=getValidPermission(_0x5d4e59,_0x54749c,_0x597729);_0x139ab1[_0x2134bf(0xc4)]?_0x522d65[_0x54749c]=_0x139ab1:delete _0x522d65[_0x54749c];}return _0x11dc29[_0x4ef113]['$']={'xmlns':_0x2134bf(0xc5)},_0x11dc29;}exports['extractComponentPermissions']=extractComponentPermissions;async function mergeComponentPermissions(_0xf6b2d3,_0x4b3ab1,_0x509c11){const _0x1bd6a0=a107_0x49fefc,_0x1c4315=await xml_1[_0x1bd6a0(0xb1)][_0x1bd6a0(0xa1)](_0xf6b2d3),_0x58a9d1=await xml_1['Xml'][_0x1bd6a0(0xa1)](_0x4b3ab1),_0x332cd5=_0x1c4315[_0x509c11],_0x326960=_0x58a9d1[_0x509c11];if(!_0x332cd5)return _0x4b3ab1;for(const _0x222054 in _0x332cd5){const _0x2d7799=PERMISSIONS_MAP[_0x1bd6a0(0xb2)](_0x222054);if(!_0x2d7799||!_0x326960[_0x222054]){_0x326960[_0x222054]=_0x332cd5[_0x222054];continue;}for(const _0x1b6d7c of _0x332cd5[_0x222054]){const _0x5410fd=_0x326960[_0x222054][_0x1bd6a0(0x98)](_0x49ac5e=>_0x1b6d7c[_0x2d7799][0x0]===_0x49ac5e[_0x2d7799][0x0]);_0x5410fd!==-0x1?_0x326960[_0x222054][_0x5410fd]=_0x1b6d7c:_0x326960[_0x222054][_0x1bd6a0(0xcc)](_0x1b6d7c);}}_0x58a9d1[_0x509c11]['$']={'xmlns':_0x1bd6a0(0xc5)};const _0xe8de39=new xml2js_1[(_0x1bd6a0(0xa9))]({'xmldec':{'version':_0x1bd6a0(0x97),'encoding':'UTF-8'}});return _0xe8de39[_0x1bd6a0(0xb7)](_0x58a9d1);}exports[a107_0x49fefc(0xca)]=mergeComponentPermissions;function getValidPermission(_0xf7aea9,_0x3ff80d,_0x53c2a2){const _0x95606e=a107_0x49fefc;let _0x2c67ee=[];if(_0x3ff80d===_0x95606e(0xc6))_0x2c67ee=getValidLayout(_0xf7aea9,_0x3ff80d,_0x53c2a2);else{const _0x2aff70=Array[_0x95606e(0xc0)](_0xf7aea9)?_0xf7aea9:[_0xf7aea9];for(const _0x2fa555 of _0x2aff70){isValidPermission(_0x2fa555,_0x3ff80d,_0x53c2a2)&&_0x2c67ee[_0x95606e(0xcc)](_0x2fa555);}}return _0x2c67ee;}function isValidPermission(_0x4588ce,_0x24714d,_0xb8eb26){const _0x1b5be7=a107_0x49fefc,_0x23c93a=PERMISSIONS_MAP[_0x1b5be7(0xb2)](_0x24714d);return _0x4588ce[_0x23c93a]&&_0xb8eb26['some'](_0x523693=>_0x523693[_0x1b5be7(0xa0)]['Component_Name__c'][_0x1b5be7(0xa5)](_0x4588ce[_0x23c93a]));}function a107_0x4de1(_0x40c72e,_0x13fa74){const _0x4d7695=a107_0x2301();return a107_0x4de1=function(_0xdf793,_0x5aa105){_0xdf793=_0xdf793-0x8b;let _0x230151=_0x4d7695[_0xdf793];return _0x230151;},a107_0x4de1(_0x40c72e,_0x13fa74);}function getValidLayout(_0x151334,_0x127d37,_0x5f0c20){const _0x3f5688=a107_0x49fefc,_0x301af0=[],_0x55d77d=Array[_0x3f5688(0xc0)](_0x151334)?_0x151334:[_0x151334];for(const _0x477e23 in _0x55d77d){isValidPermission(_0x55d77d[_0x477e23],_0x127d37,_0x5f0c20)&&(!_0x55d77d[_0x477e23][_0x3f5688(0xb5)]&&_0x301af0[_0x3f5688(0xcc)](_0x55d77d[_0x477e23]),isValidPermission(_0x55d77d[_0x477e23],_0x3f5688(0xba),_0x5f0c20)&&_0x301af0[_0x3f5688(0xcc)](_0x55d77d[_0x477e23]));}return _0x301af0;}async function getReadyComponent(_0x1889b8,_0x205b8b){const _0x2c429d=a107_0x49fefc,_0x1aaee3=await xml_1[_0x2c429d(0xb1)][_0x2c429d(0xa1)](_0x1889b8);return prepareDeleteComponent[_0x205b8b](_0x1aaee3);}