'use strict';const a91_0x36c5cf=a91_0x3120;(function(_0x30bb7f,_0x165fec){const _0x2427c4=a91_0x3120,_0x20c5e2=_0x30bb7f();while(!![]){try{const _0x29e6ad=-parseInt(_0x2427c4(0x8a))/0x1+parseInt(_0x2427c4(0x87))/0x2+parseInt(_0x2427c4(0x79))/0x3+parseInt(_0x2427c4(0x78))/0x4+parseInt(_0x2427c4(0x86))/0x5*(parseInt(_0x2427c4(0x68))/0x6)+-parseInt(_0x2427c4(0x7e))/0x7+-parseInt(_0x2427c4(0x76))/0x8*(parseInt(_0x2427c4(0x84))/0x9);if(_0x29e6ad===_0x165fec)break;else _0x20c5e2['push'](_0x20c5e2['shift']());}catch(_0x36436c){_0x20c5e2['push'](_0x20c5e2['shift']());}}}(a91_0x1099,0x4d096));function a91_0x3120(_0xd2e651,_0x272ec2){const _0x309df9=a91_0x1099();return a91_0x3120=function(_0x474be7,_0x33474e){_0x474be7=_0x474be7-0x66;let _0x10995b=_0x309df9[_0x474be7];return _0x10995b;},a91_0x3120(_0xd2e651,_0x272ec2);}Object[a91_0x36c5cf(0x6b)](exports,a91_0x36c5cf(0x8e),{'value':!![]}),exports[a91_0x36c5cf(0x74)]=void 0x0;const xml_1=require('../../git/parsers/utils/xml'),PERMISSIONS_MAP=new Map([[a91_0x36c5cf(0x95),a91_0x36c5cf(0x77)],[a91_0x36c5cf(0x85),'apexPage'],[a91_0x36c5cf(0x82),a91_0x36c5cf(0x81)],[a91_0x36c5cf(0x73),a91_0x36c5cf(0x81)],[a91_0x36c5cf(0x7a),a91_0x36c5cf(0x94)],[a91_0x36c5cf(0x8c),'dataCategoryGroup'],[a91_0x36c5cf(0x90),a91_0x36c5cf(0x71)],[a91_0x36c5cf(0x67),a91_0x36c5cf(0x92)],['customSettingAccesses','name'],[a91_0x36c5cf(0x97),'application'],[a91_0x36c5cf(0x66),'externalDataSource'],[a91_0x36c5cf(0x6c),'name'],['flowAccesses',a91_0x36c5cf(0x88)],[a91_0x36c5cf(0x70),a91_0x36c5cf(0x7c)],['recordTypeVisibilities',a91_0x36c5cf(0x80)],['fieldPermissions',a91_0x36c5cf(0x6a)]]);var UNREMOVE_PERMISSION;(function(_0x3cc6ab){const _0x3c3e1a=a91_0x36c5cf,_0x2125fb=(function(){let _0x4af20f=!![];return function(_0x25fbf3,_0x41509b){const _0x38a735=_0x4af20f?function(){const _0x23659d=a91_0x3120;if(_0x41509b){const _0x42d806=_0x41509b[_0x23659d(0x8d)](_0x25fbf3,arguments);return _0x41509b=null,_0x42d806;}}:function(){};return _0x4af20f=![],_0x38a735;};}()),_0x4e76e1=_0x2125fb(this,function(){const _0xfd3efc=a91_0x3120;return _0x4e76e1[_0xfd3efc(0x8b)]()[_0xfd3efc(0x91)](_0xfd3efc(0x6d))[_0xfd3efc(0x8b)]()[_0xfd3efc(0x8f)](_0x4e76e1)['search'](_0xfd3efc(0x6d));});_0x4e76e1(),_0x3cc6ab[_0x3c3e1a(0x6f)]='hasActivationRequired',_0x3cc6ab[_0x3c3e1a(0x75)]=_0x3c3e1a(0x75),_0x3cc6ab['custom']=_0x3c3e1a(0x69),_0x3cc6ab[_0x3c3e1a(0x83)]=_0x3c3e1a(0x83);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x2dce54=>{const _0xb0a0d7=a91_0x36c5cf;var _0x43bb96,_0x3ca023;return(_0x43bb96=_0x2dce54['Profile'])===null||_0x43bb96===void 0x0?!![]:delete _0x43bb96[_0xb0a0d7(0x6e)],(_0x3ca023=_0x2dce54['Profile'])===null||_0x3ca023===void 0x0?!![]:delete _0x3ca023['loginIpRanges'],_0x2dce54;},'PermissionSet':_0x396932=>{const _0x181872=a91_0x36c5cf;var _0xe8373f,_0x1792e8;return(_0xe8373f=_0x396932[_0x181872(0x7f)])===null||_0xe8373f===void 0x0?!![]:delete _0xe8373f['userPermissions'],(_0x1792e8=_0x396932[_0x181872(0x7f)])===null||_0x1792e8===void 0x0?!![]:delete _0x1792e8[_0x181872(0x7d)],_0x396932;}};async function extractComponentPermissions(_0x217d6f,_0x5429f4,_0x2e8343){const _0x3ba53a=await getReadyComponent(_0x217d6f,_0x2e8343),_0x51b9c5=_0x3ba53a[_0x2e8343];if(!_0x51b9c5)return _0x3ba53a;for(const _0x20358b in _0x51b9c5){if(UNREMOVE_PERMISSION[_0x20358b])continue;const _0x186025=_0x51b9c5[_0x20358b],_0x14e9ad=getValidPermission(_0x186025,_0x20358b,_0x5429f4);_0x14e9ad['length']?_0x51b9c5[_0x20358b]=_0x14e9ad:delete _0x51b9c5[_0x20358b];}return _0x3ba53a[_0x2e8343]['$']={'xmlns':'http://soap.sforce.com/2006/04/metadata'},_0x3ba53a;}function a91_0x1099(){const _0x44ff74=['applicationVisibilities','externalDataSourceAccesses','customMetadataTypeAccesses','77736tnqeuf','custom','field','defineProperty','customPermissions','(((.+)+)+)+$','userPermissions','hasActivationRequired','layoutAssignments','object','push','tabVisibilities','extractComponentPermissions','label','3664lKqKHX','apexClass','2364316NcPzgy','405975fWtaQA','profileActionOverrides','some','layout','loginIpRanges','292915kuuiYs','PermissionSet','recordType','tab','tabSettings','description','14607DEOmoC','pageAccesses','55OFdgla','719114nGBPTM','flow','recordTypeVisibilities','127756AbmjfQ','toString','categoryGroupVisibilities','apply','__esModule','constructor','objectPermissions','search','name','isArray','content','classAccesses','parse'];a91_0x1099=function(){return _0x44ff74;};return a91_0x1099();}exports[a91_0x36c5cf(0x74)]=extractComponentPermissions;function getValidPermission(_0x550355,_0x10367a,_0x2c88e6){const _0x2d21ff=a91_0x36c5cf;let _0x21b3f8=[];if(_0x10367a===_0x2d21ff(0x70))_0x21b3f8=getValidLayout(_0x550355,_0x10367a,_0x2c88e6);else{const _0x5cd02c=Array[_0x2d21ff(0x93)](_0x550355)?_0x550355:[_0x550355];for(const _0x3a6b0c of _0x5cd02c){isValidPermission(_0x3a6b0c,_0x10367a,_0x2c88e6)&&_0x21b3f8['push'](_0x3a6b0c);}}return _0x21b3f8;}function isValidPermission(_0x10356a,_0x457d81,_0x321b6d){const _0xa0834c=a91_0x36c5cf,_0x2e59dc=PERMISSIONS_MAP['get'](_0x457d81);return _0x10356a[_0x2e59dc]&&_0x321b6d[_0xa0834c(0x7b)](_0x33433d=>_0x33433d['Component__r']['Component_Name__c']['includes'](_0x10356a[_0x2e59dc]));}function getValidLayout(_0x498de7,_0x271d10,_0x479c45){const _0x3580aa=a91_0x36c5cf,_0x3b2376=[],_0x204da9=Array[_0x3580aa(0x93)](_0x498de7)?_0x498de7:[_0x498de7];for(const _0x32b8d0 in _0x204da9){isValidPermission(_0x204da9[_0x32b8d0],_0x271d10,_0x479c45)&&(!_0x204da9[_0x32b8d0][_0x3580aa(0x80)]&&_0x3b2376['push'](_0x204da9[_0x32b8d0]),isValidPermission(_0x204da9[_0x32b8d0],_0x3580aa(0x89),_0x479c45)&&_0x3b2376[_0x3580aa(0x72)](_0x204da9[_0x32b8d0]));}return _0x3b2376;}async function getReadyComponent(_0x3a5160,_0x2e2bfb){const _0x4c5e45=a91_0x36c5cf,_0x50eea6=await xml_1['Xml'][_0x4c5e45(0x96)](_0x3a5160);return prepareDeleteComponent[_0x2e2bfb](_0x50eea6);}