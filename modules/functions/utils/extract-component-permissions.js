'use strict';const a109_0xa84636=a109_0x5195;(function(_0x29563e,_0x5dd817){const _0x450815=a109_0x5195,_0x27afc4=_0x29563e();while(!![]){try{const _0x5ea020=-parseInt(_0x450815(0x19b))/0x1*(-parseInt(_0x450815(0x186))/0x2)+parseInt(_0x450815(0x187))/0x3+-parseInt(_0x450815(0x1a8))/0x4+parseInt(_0x450815(0x196))/0x5*(parseInt(_0x450815(0x19a))/0x6)+parseInt(_0x450815(0x1a1))/0x7*(parseInt(_0x450815(0x184))/0x8)+parseInt(_0x450815(0x178))/0x9*(-parseInt(_0x450815(0x18a))/0xa)+parseInt(_0x450815(0x18e))/0xb;if(_0x5ea020===_0x5dd817)break;else _0x27afc4['push'](_0x27afc4['shift']());}catch(_0x5f32af){_0x27afc4['push'](_0x27afc4['shift']());}}}(a109_0x1fcb,0xdd610));Object[a109_0xa84636(0x1a0)](exports,a109_0xa84636(0x17c),{'value':!![]}),exports[a109_0xa84636(0x17f)]=exports['extractComponentPermissions']=void 0x0;const xml_1=require(a109_0xa84636(0x179)),xml2js_1=require('xml2js'),PERMISSIONS_MAP=new Map([[a109_0xa84636(0x1a7),a109_0xa84636(0x171)],[a109_0xa84636(0x17b),a109_0xa84636(0x175)],[a109_0xa84636(0x1ae),a109_0xa84636(0x170)],[a109_0xa84636(0x190),a109_0xa84636(0x170)],[a109_0xa84636(0x1ab),a109_0xa84636(0x176)],[a109_0xa84636(0x1b0),'dataCategoryGroup'],[a109_0xa84636(0x185),a109_0xa84636(0x194)],[a109_0xa84636(0x19d),'name'],[a109_0xa84636(0x199),a109_0xa84636(0x193)],['applicationVisibilities',a109_0xa84636(0x173)],['externalDataSourceAccesses',a109_0xa84636(0x181)],[a109_0xa84636(0x172),a109_0xa84636(0x193)],[a109_0xa84636(0x180),a109_0xa84636(0x17d)],[a109_0xa84636(0x174),a109_0xa84636(0x1a9)],[a109_0xa84636(0x1a3),a109_0xa84636(0x198)],[a109_0xa84636(0x182),a109_0xa84636(0x189)]]);var UNREMOVE_PERMISSION;(function(_0x30f26d){const _0x52e2ac=a109_0xa84636,_0x119b40=(function(){let _0x5ae45d=!![];return function(_0x458bdd,_0x1d210a){const _0x2362e4=_0x5ae45d?function(){const _0x279742=a109_0x5195;if(_0x1d210a){const _0x527f68=_0x1d210a[_0x279742(0x197)](_0x458bdd,arguments);return _0x1d210a=null,_0x527f68;}}:function(){};return _0x5ae45d=![],_0x2362e4;};}()),_0xd2ea36=_0x119b40(this,function(){const _0x7cdff3=a109_0x5195;return _0xd2ea36[_0x7cdff3(0x19c)]()[_0x7cdff3(0x1ac)](_0x7cdff3(0x18d))[_0x7cdff3(0x19c)]()[_0x7cdff3(0x183)](_0xd2ea36)[_0x7cdff3(0x1ac)](_0x7cdff3(0x18d));});_0xd2ea36(),_0x30f26d[_0x52e2ac(0x18b)]=_0x52e2ac(0x18b),_0x30f26d[_0x52e2ac(0x195)]=_0x52e2ac(0x195),_0x30f26d['custom']='custom',_0x30f26d[_0x52e2ac(0x1a6)]=_0x52e2ac(0x1a6);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x2c41fc=>{const _0x5b8800=a109_0xa84636;var _0x2fc051,_0x2371e9;return(_0x2fc051=_0x2c41fc[_0x5b8800(0x1aa)])===null||_0x2fc051===void 0x0?!![]:delete _0x2fc051[_0x5b8800(0x18f)],(_0x2371e9=_0x2c41fc[_0x5b8800(0x1aa)])===null||_0x2371e9===void 0x0?!![]:delete _0x2371e9[_0x5b8800(0x16e)],_0x2c41fc;},'PermissionSet':_0x39725f=>{const _0xb536a9=a109_0xa84636;var _0x10f32a,_0x5de084;return(_0x10f32a=_0x39725f[_0xb536a9(0x1ad)])===null||_0x10f32a===void 0x0?!![]:delete _0x10f32a['userPermissions'],(_0x5de084=_0x39725f[_0xb536a9(0x1ad)])===null||_0x5de084===void 0x0?!![]:delete _0x5de084[_0xb536a9(0x16e)],_0x39725f;}};async function extractComponentPermissions(_0x1edd3d,_0x5e6ac4,_0x272264){const _0x85779e=a109_0xa84636,_0x2d3684=await getReadyComponent(_0x1edd3d,_0x272264),_0x4bb096=_0x2d3684[_0x272264];if(!_0x4bb096)return _0x2d3684;for(const _0x35b444 in _0x4bb096){if(UNREMOVE_PERMISSION[_0x35b444])continue;const _0x301471=_0x4bb096[_0x35b444],_0x4e3f35=getValidPermission(_0x301471,_0x35b444,_0x5e6ac4);_0x4e3f35[_0x85779e(0x17a)]?_0x4bb096[_0x35b444]=_0x4e3f35:delete _0x4bb096[_0x35b444];}return _0x2d3684[_0x272264]['$']={'xmlns':_0x85779e(0x177)},_0x2d3684;}function a109_0x5195(_0x56e2d5,_0x373318){const _0xb6843d=a109_0x1fcb();return a109_0x5195=function(_0x1c2c4b,_0x2fad26){_0x1c2c4b=_0x1c2c4b-0x16e;let _0x1fcb35=_0xb6843d[_0x1c2c4b];return _0x1fcb35;},a109_0x5195(_0x56e2d5,_0x373318);}exports[a109_0xa84636(0x1b1)]=extractComponentPermissions;async function mergeComponentPermissions(_0x5b5602,_0x4b2ad9,_0x2fd406){const _0x129626=a109_0xa84636,_0x3e941c=await xml_1[_0x129626(0x191)][_0x129626(0x19e)](_0x5b5602),_0xcf21ee=await xml_1[_0x129626(0x191)]['parse'](_0x4b2ad9),_0x5b918f=_0x3e941c[_0x2fd406],_0x3ec44e=_0xcf21ee[_0x2fd406];if(!_0x5b918f)return _0x4b2ad9;for(const _0x831261 in _0x5b918f){const _0x2c1875=PERMISSIONS_MAP[_0x129626(0x1a4)](_0x831261);if(!_0x2c1875||!_0x3ec44e[_0x831261]){_0x3ec44e[_0x831261]=_0x5b918f[_0x831261];continue;}for(const _0x4cd34d of _0x5b918f[_0x831261]){const _0x503c69=_0x3ec44e[_0x831261][_0x129626(0x1af)](_0x1c87ef=>_0x4cd34d[_0x2c1875][0x0]===_0x1c87ef[_0x2c1875][0x0]);_0x503c69!==-0x1?_0x3ec44e[_0x831261][_0x503c69]=_0x4cd34d:_0x3ec44e[_0x831261][_0x129626(0x17e)](_0x4cd34d);}}_0xcf21ee[_0x2fd406]['$']={'xmlns':_0x129626(0x177)};const _0x5a888d=new xml2js_1[(_0x129626(0x188))]({'xmldec':{'version':_0x129626(0x1a2),'encoding':'UTF-8'}});return _0x5a888d[_0x129626(0x19f)](_0xcf21ee);}exports[a109_0xa84636(0x17f)]=mergeComponentPermissions;function getValidPermission(_0x11fac8,_0x4e7f1d,_0x219ec9){const _0xa4f761=a109_0xa84636;let _0x2e6620=[];if(_0x4e7f1d===_0xa4f761(0x174))_0x2e6620=getValidLayout(_0x11fac8,_0x4e7f1d,_0x219ec9);else{const _0x2b778a=Array[_0xa4f761(0x1a5)](_0x11fac8)?_0x11fac8:[_0x11fac8];for(const _0x4eba30 of _0x2b778a){isValidPermission(_0x4eba30,_0x4e7f1d,_0x219ec9)&&_0x2e6620['push'](_0x4eba30);}}return _0x2e6620;}function isValidPermission(_0x45ae43,_0x44b9b,_0x10a088){const _0x5ec937=a109_0xa84636,_0x32e5c3=PERMISSIONS_MAP[_0x5ec937(0x1a4)](_0x44b9b);return _0x45ae43[_0x32e5c3]&&_0x10a088[_0x5ec937(0x192)](_0x2bf7ca=>_0x2bf7ca['Component__r'][_0x5ec937(0x16f)][_0x5ec937(0x18c)](_0x45ae43[_0x32e5c3]));}function getValidLayout(_0x2b5c8f,_0x1cdfa8,_0x59a496){const _0x34f17b=a109_0xa84636,_0xafb67e=[],_0x50f4b3=Array[_0x34f17b(0x1a5)](_0x2b5c8f)?_0x2b5c8f:[_0x2b5c8f];for(const _0x25516f in _0x50f4b3){isValidPermission(_0x50f4b3[_0x25516f],_0x1cdfa8,_0x59a496)&&(!_0x50f4b3[_0x25516f][_0x34f17b(0x198)]&&_0xafb67e['push'](_0x50f4b3[_0x25516f]),isValidPermission(_0x50f4b3[_0x25516f],_0x34f17b(0x1a3),_0x59a496)&&_0xafb67e[_0x34f17b(0x17e)](_0x50f4b3[_0x25516f]));}return _0xafb67e;}function a109_0x1fcb(){const _0x444b14=['layout','Profile','profileActionOverrides','search','PermissionSet','tabSettings','findIndex','categoryGroupVisibilities','extractComponentPermissions','loginIpRanges','Component_Name__c','tab','apexClass','customPermissions','application','layoutAssignments','apexPage','content','http://soap.sforce.com/2006/04/metadata','5055894THpUwc','../../git/parsers/utils/xml','length','pageAccesses','__esModule','flow','push','mergeComponentPermissions','flowAccesses','externalDataSource','fieldPermissions','constructor','2062880jguvMX','objectPermissions','2JdxvYR','3206031PFrIku','Builder','field','30KgOUxy','hasActivationRequired','includes','(((.+)+)+)+$','6624277tIXNkr','userPermissions','tabVisibilities','Xml','some','name','object','label','4217815InZoVQ','apply','recordType','customSettingAccesses','12mjOzms','651874QgWYMy','toString','customMetadataTypeAccesses','parse','buildObject','defineProperty','7UtgiLb','1.0','recordTypeVisibilities','get','isArray','description','classAccesses','6702712khRRBN'];a109_0x1fcb=function(){return _0x444b14;};return a109_0x1fcb();}async function getReadyComponent(_0x137c32,_0x562421){const _0x41287b=a109_0xa84636,_0x4a5eeb=await xml_1[_0x41287b(0x191)][_0x41287b(0x19e)](_0x137c32);return prepareDeleteComponent[_0x562421](_0x4a5eeb);}