'use strict';function a90_0x27db(){const _0x23d736=['flowAccesses','some','classAccesses','tab','customSettingAccesses','recordTypeVisibilities','loginIpRanges','extractComponentPermissions','recordType','content','730jBoUFc','Component_Name__c','customPermissions','PermissionSet','externalDataSource','tabVisibilities','includes','Xml','categoryGroupVisibilities','2243255hIOyAF','hasActivationRequired','__esModule','name','pageAccesses','label','toString','4336488xPLorG','dataCategoryGroup','layoutAssignments','141849LXtify','get','271857mXUEwa','apexClass','Profile','application','field','object','userPermissions','12AhuEPJ','customMetadataTypeAccesses','1027672MoSDfH','defineProperty','search','description','constructor','parse','objectPermissions','custom','apply','fieldPermissions','(((.+)+)+)+$','17682247bwzIaL','238PfUOuB','push','http://soap.sforce.com/2006/04/metadata','isArray','7993GFcxwT','35WNcvGZ'];a90_0x27db=function(){return _0x23d736;};return a90_0x27db();}const a90_0x2b666b=a90_0x1380;(function(_0x2647bc,_0x4170b2){const _0x4889e2=a90_0x1380,_0x5bc863=_0x2647bc();while(!![]){try{const _0x298df3=-parseInt(_0x4889e2(0xce))/0x1*(-parseInt(_0x4889e2(0xca))/0x2)+-parseInt(_0x4889e2(0xb5))/0x3*(parseInt(_0x4889e2(0xbc))/0x4)+parseInt(_0x4889e2(0xe3))/0x5+-parseInt(_0x4889e2(0xea))/0x6+-parseInt(_0x4889e2(0xcf))/0x7*(-parseInt(_0x4889e2(0xbe))/0x8)+-parseInt(_0x4889e2(0xb3))/0x9*(-parseInt(_0x4889e2(0xda))/0xa)+-parseInt(_0x4889e2(0xc9))/0xb;if(_0x298df3===_0x4170b2)break;else _0x5bc863['push'](_0x5bc863['shift']());}catch(_0x541908){_0x5bc863['push'](_0x5bc863['shift']());}}}(a90_0x27db,0x902f8));Object[a90_0x2b666b(0xbf)](exports,a90_0x2b666b(0xe5),{'value':!![]}),exports[a90_0x2b666b(0xd7)]=void 0x0;const xml_1=require('../../git/parsers/utils/xml'),PERMISSIONS_MAP=new Map([[a90_0x2b666b(0xd2),a90_0x2b666b(0xb6)],[a90_0x2b666b(0xe7),'apexPage'],['tabSettings',a90_0x2b666b(0xd3)],[a90_0x2b666b(0xdf),a90_0x2b666b(0xd3)],['profileActionOverrides',a90_0x2b666b(0xd9)],[a90_0x2b666b(0xe2),a90_0x2b666b(0xb1)],[a90_0x2b666b(0xc4),a90_0x2b666b(0xba)],[a90_0x2b666b(0xbd),'name'],[a90_0x2b666b(0xd4),'name'],['applicationVisibilities',a90_0x2b666b(0xb8)],['externalDataSourceAccesses',a90_0x2b666b(0xde)],[a90_0x2b666b(0xdc),a90_0x2b666b(0xe6)],[a90_0x2b666b(0xd0),'flow'],[a90_0x2b666b(0xb2),'layout'],[a90_0x2b666b(0xd5),a90_0x2b666b(0xd8)],[a90_0x2b666b(0xc7),a90_0x2b666b(0xb9)]]);var UNREMOVE_PERMISSION;(function(_0x147bae){const _0x44c90e=a90_0x2b666b,_0x178f17=(function(){let _0x4d4df1=!![];return function(_0x364c84,_0x29849b){const _0x3b06b9=_0x4d4df1?function(){const _0x1f5e5c=a90_0x1380;if(_0x29849b){const _0x3ad6a9=_0x29849b[_0x1f5e5c(0xc6)](_0x364c84,arguments);return _0x29849b=null,_0x3ad6a9;}}:function(){};return _0x4d4df1=![],_0x3b06b9;};}()),_0x243a80=_0x178f17(this,function(){const _0x198f50=a90_0x1380;return _0x243a80[_0x198f50(0xe9)]()['search'](_0x198f50(0xc8))[_0x198f50(0xe9)]()[_0x198f50(0xc2)](_0x243a80)[_0x198f50(0xc0)](_0x198f50(0xc8));});_0x243a80(),_0x147bae[_0x44c90e(0xe4)]='hasActivationRequired',_0x147bae[_0x44c90e(0xe8)]='label',_0x147bae[_0x44c90e(0xc5)]=_0x44c90e(0xc5),_0x147bae[_0x44c90e(0xc1)]='description';}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0xc9433d=>{const _0x3a4df9=a90_0x2b666b;var _0x1f0acc,_0x51bba4;return(_0x1f0acc=_0xc9433d[_0x3a4df9(0xb7)])===null||_0x1f0acc===void 0x0?!![]:delete _0x1f0acc[_0x3a4df9(0xbb)],(_0x51bba4=_0xc9433d[_0x3a4df9(0xb7)])===null||_0x51bba4===void 0x0?!![]:delete _0x51bba4[_0x3a4df9(0xd6)],_0xc9433d;},'PermissionSet':_0xe26179=>{const _0x4af3cd=a90_0x2b666b;var _0x49def2,_0x534904;return(_0x49def2=_0xe26179[_0x4af3cd(0xdd)])===null||_0x49def2===void 0x0?!![]:delete _0x49def2['userPermissions'],(_0x534904=_0xe26179[_0x4af3cd(0xdd)])===null||_0x534904===void 0x0?!![]:delete _0x534904[_0x4af3cd(0xd6)],_0xe26179;}};async function extractComponentPermissions(_0x2629c5,_0x73580f,_0x36bb5a){const _0x4a0cd4=a90_0x2b666b,_0x2d6322=await getReadyComponent(_0x2629c5,_0x36bb5a),_0x218ab3=_0x2d6322[_0x36bb5a];if(!_0x218ab3)return _0x2d6322;for(const _0x9e0cd4 in _0x218ab3){if(UNREMOVE_PERMISSION[_0x9e0cd4])continue;const _0x30719f=_0x218ab3[_0x9e0cd4],_0x62ad1=getValidPermission(_0x30719f,_0x9e0cd4,_0x73580f);_0x62ad1['length']?_0x218ab3[_0x9e0cd4]=_0x62ad1:delete _0x218ab3[_0x9e0cd4];}return _0x2d6322[_0x36bb5a]['$']={'xmlns':_0x4a0cd4(0xcc)},_0x2d6322;}function a90_0x1380(_0x318472,_0x4d705c){const _0x1c1c1a=a90_0x27db();return a90_0x1380=function(_0x291878,_0x16450f){_0x291878=_0x291878-0xb1;let _0x27db29=_0x1c1c1a[_0x291878];return _0x27db29;},a90_0x1380(_0x318472,_0x4d705c);}exports[a90_0x2b666b(0xd7)]=extractComponentPermissions;function getValidPermission(_0x4a0963,_0x42eec8,_0x154e90){const _0x2f8838=a90_0x2b666b;let _0x37eb00=[];if(_0x42eec8==='layoutAssignments')_0x37eb00=getValidLayout(_0x4a0963,_0x42eec8,_0x154e90);else{const _0x5f46ad=Array[_0x2f8838(0xcd)](_0x4a0963)?_0x4a0963:[_0x4a0963];for(const _0x530378 of _0x5f46ad){isValidPermission(_0x530378,_0x42eec8,_0x154e90)&&_0x37eb00[_0x2f8838(0xcb)](_0x530378);}}return _0x37eb00;}function isValidPermission(_0x289de0,_0x57270b,_0x3d0fee){const _0x1267e7=a90_0x2b666b,_0x1ddc20=PERMISSIONS_MAP[_0x1267e7(0xb4)](_0x57270b);return _0x289de0[_0x1ddc20]&&_0x3d0fee[_0x1267e7(0xd1)](_0x2fd8ed=>_0x2fd8ed['Component__r'][_0x1267e7(0xdb)][_0x1267e7(0xe0)](_0x289de0[_0x1ddc20]));}function getValidLayout(_0x16ae40,_0xe2dcaf,_0x28f4b6){const _0x35cfe8=a90_0x2b666b,_0x2859d3=[],_0x2926d0=Array[_0x35cfe8(0xcd)](_0x16ae40)?_0x16ae40:[_0x16ae40];for(const _0x25ca1b in _0x2926d0){isValidPermission(_0x2926d0[_0x25ca1b],_0xe2dcaf,_0x28f4b6)&&(!_0x2926d0[_0x25ca1b][_0x35cfe8(0xd8)]&&_0x2859d3[_0x35cfe8(0xcb)](_0x2926d0[_0x25ca1b]),isValidPermission(_0x2926d0[_0x25ca1b],_0x35cfe8(0xd5),_0x28f4b6)&&_0x2859d3[_0x35cfe8(0xcb)](_0x2926d0[_0x25ca1b]));}return _0x2859d3;}async function getReadyComponent(_0x177ca7,_0x4e6941){const _0x44f582=a90_0x2b666b,_0x3e5f9d=await xml_1[_0x44f582(0xe1)][_0x44f582(0xc3)](_0x177ca7);return prepareDeleteComponent[_0x4e6941](_0x3e5f9d);}