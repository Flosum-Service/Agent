'use strict';const a109_0x21f08b=a109_0xc1d6;(function(_0x22b0c6,_0x16a71d){const _0xecea7d=a109_0xc1d6,_0x1c7601=_0x22b0c6();while(!![]){try{const _0x1db072=parseInt(_0xecea7d(0xbe))/0x1+parseInt(_0xecea7d(0x9e))/0x2*(parseInt(_0xecea7d(0x8a))/0x3)+parseInt(_0xecea7d(0xb4))/0x4+parseInt(_0xecea7d(0x90))/0x5*(parseInt(_0xecea7d(0x8e))/0x6)+-parseInt(_0xecea7d(0xa0))/0x7*(-parseInt(_0xecea7d(0xa4))/0x8)+-parseInt(_0xecea7d(0xbb))/0x9*(parseInt(_0xecea7d(0xb7))/0xa)+-parseInt(_0xecea7d(0xa3))/0xb;if(_0x1db072===_0x16a71d)break;else _0x1c7601['push'](_0x1c7601['shift']());}catch(_0x518c7f){_0x1c7601['push'](_0x1c7601['shift']());}}}(a109_0x3b14,0xd6719));function a109_0xc1d6(_0x25f1b1,_0xae282b){const _0x246221=a109_0x3b14();return a109_0xc1d6=function(_0x35c230,_0x2f4967){_0x35c230=_0x35c230-0x84;let _0x3b1497=_0x246221[_0x35c230];return _0x3b1497;},a109_0xc1d6(_0x25f1b1,_0xae282b);}Object[a109_0x21f08b(0xba)](exports,a109_0x21f08b(0xc0),{'value':!![]}),exports[a109_0x21f08b(0x95)]=exports[a109_0x21f08b(0x85)]=void 0x0;const xml_1=require('../../git/parsers/utils/xml'),xml2js_1=require(a109_0x21f08b(0xb2)),PERMISSIONS_MAP=new Map([[a109_0x21f08b(0x9f),'apexClass'],['pageAccesses',a109_0x21f08b(0xc1)],[a109_0x21f08b(0xb3),a109_0x21f08b(0xa6)],['tabVisibilities',a109_0x21f08b(0xa6)],[a109_0x21f08b(0x8f),a109_0x21f08b(0xa2)],[a109_0x21f08b(0x91),'dataCategoryGroup'],[a109_0x21f08b(0x8c),a109_0x21f08b(0xa7)],['customMetadataTypeAccesses',a109_0x21f08b(0x8d)],[a109_0x21f08b(0xc2),a109_0x21f08b(0x8d)],[a109_0x21f08b(0x9a),'application'],[a109_0x21f08b(0x98),a109_0x21f08b(0xb8)],[a109_0x21f08b(0x88),a109_0x21f08b(0x8d)],[a109_0x21f08b(0x9b),a109_0x21f08b(0x86)],[a109_0x21f08b(0x93),'layout'],[a109_0x21f08b(0x8b),'recordType'],['fieldPermissions',a109_0x21f08b(0xae)]]);var UNREMOVE_PERMISSION;function a109_0x3b14(){const _0x22b29b=['tabSettings','2167328FJQSib','PermissionSet','toString','5090NdoypI','externalDataSource','apply','defineProperty','29475egbkrh','search','1.0','1536838aCyksO','hasActivationRequired','__esModule','apexPage','customSettingAccesses','parse','extractComponentPermissions','flow','constructor','customPermissions','description','3EUFGIT','recordTypeVisibilities','objectPermissions','name','1200bjnauL','profileActionOverrides','3215MmhHoE','categoryGroupVisibilities','length','layoutAssignments','http://soap.sforce.com/2006/04/metadata','mergeComponentPermissions','loginIpRanges','push','externalDataSourceAccesses','userPermissions','applicationVisibilities','flowAccesses','Xml','UTF-8','3159230YMLtes','classAccesses','3269784VAAFGn','Builder','content','29071735uKfXra','24EBKeeo','some','tab','object','label','buildObject','Profile','isArray','Component__r','custom','field','findIndex','(((.+)+)+)+$','recordType','xml2js'];a109_0x3b14=function(){return _0x22b29b;};return a109_0x3b14();}(function(_0x2af146){const _0x345bfe=a109_0x21f08b,_0x158c46=(function(){let _0x68af3b=!![];return function(_0xd04ad3,_0x38021f){const _0x466a5e=_0x68af3b?function(){const _0x38d886=a109_0xc1d6;if(_0x38021f){const _0x312d91=_0x38021f[_0x38d886(0xb9)](_0xd04ad3,arguments);return _0x38021f=null,_0x312d91;}}:function(){};return _0x68af3b=![],_0x466a5e;};}()),_0x42e7a8=_0x158c46(this,function(){const _0x345780=a109_0xc1d6;return _0x42e7a8[_0x345780(0xb6)]()[_0x345780(0xbc)](_0x345780(0xb0))['toString']()[_0x345780(0x87)](_0x42e7a8)[_0x345780(0xbc)](_0x345780(0xb0));});_0x42e7a8(),_0x2af146[_0x345bfe(0xbf)]=_0x345bfe(0xbf),_0x2af146[_0x345bfe(0xa8)]=_0x345bfe(0xa8),_0x2af146['custom']=_0x345bfe(0xad),_0x2af146[_0x345bfe(0x89)]=_0x345bfe(0x89);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x185595=>{const _0x5d7b6a=a109_0x21f08b;var _0x117b29,_0x3d9b71;return(_0x117b29=_0x185595['Profile'])===null||_0x117b29===void 0x0?!![]:delete _0x117b29[_0x5d7b6a(0x99)],(_0x3d9b71=_0x185595[_0x5d7b6a(0xaa)])===null||_0x3d9b71===void 0x0?!![]:delete _0x3d9b71[_0x5d7b6a(0x96)],_0x185595;},'PermissionSet':_0x431aae=>{const _0xd9fa4c=a109_0x21f08b;var _0x286759,_0x2fc83c;return(_0x286759=_0x431aae[_0xd9fa4c(0xb5)])===null||_0x286759===void 0x0?!![]:delete _0x286759[_0xd9fa4c(0x99)],(_0x2fc83c=_0x431aae['PermissionSet'])===null||_0x2fc83c===void 0x0?!![]:delete _0x2fc83c['loginIpRanges'],_0x431aae;}};async function extractComponentPermissions(_0x1194dd,_0x18c2bf,_0x1a65f3){const _0x319ae4=a109_0x21f08b,_0x54faba=await getReadyComponent(_0x1194dd,_0x1a65f3),_0x532f04=_0x54faba[_0x1a65f3];if(!_0x532f04)return _0x54faba;for(const _0x1a301c in _0x532f04){if(UNREMOVE_PERMISSION[_0x1a301c])continue;const _0x26ff9c=_0x532f04[_0x1a301c],_0x14408c=getValidPermission(_0x26ff9c,_0x1a301c,_0x18c2bf);_0x14408c[_0x319ae4(0x92)]?_0x532f04[_0x1a301c]=_0x14408c:delete _0x532f04[_0x1a301c];}return _0x54faba[_0x1a65f3]['$']={'xmlns':_0x319ae4(0x94)},_0x54faba;}exports[a109_0x21f08b(0x85)]=extractComponentPermissions;async function mergeComponentPermissions(_0x6a1d40,_0x5eb35d,_0x53bbfb){const _0x4c928e=a109_0x21f08b,_0x3f098e=await xml_1[_0x4c928e(0x9c)][_0x4c928e(0x84)](_0x6a1d40),_0x5c8524=await xml_1['Xml'][_0x4c928e(0x84)](_0x5eb35d),_0x30d69d=_0x3f098e[_0x53bbfb],_0x584a10=_0x5c8524[_0x53bbfb];if(!_0x30d69d)return _0x5eb35d;for(const _0x448eb9 in _0x30d69d){const _0x27e91c=PERMISSIONS_MAP['get'](_0x448eb9);if(!_0x27e91c||!_0x584a10[_0x448eb9]){_0x584a10[_0x448eb9]=_0x30d69d[_0x448eb9];continue;}for(const _0xc13899 of _0x30d69d[_0x448eb9]){const _0x51db5d=_0x584a10[_0x448eb9][_0x4c928e(0xaf)](_0x2ef098=>_0xc13899[_0x27e91c][0x0]===_0x2ef098[_0x27e91c][0x0]);_0x51db5d!==-0x1?_0x584a10[_0x448eb9][_0x51db5d]=_0xc13899:_0x584a10[_0x448eb9]['push'](_0xc13899);}}_0x5c8524[_0x53bbfb]['$']={'xmlns':'http://soap.sforce.com/2006/04/metadata'};const _0x1c7f69=new xml2js_1[(_0x4c928e(0xa1))]({'xmldec':{'version':_0x4c928e(0xbd),'encoding':_0x4c928e(0x9d)}});return _0x1c7f69[_0x4c928e(0xa9)](_0x5c8524);}exports[a109_0x21f08b(0x95)]=mergeComponentPermissions;function getValidPermission(_0x279542,_0x21110d,_0x3ac99d){const _0x4ef4a3=a109_0x21f08b;let _0x27a8cb=[];if(_0x21110d===_0x4ef4a3(0x93))_0x27a8cb=getValidLayout(_0x279542,_0x21110d,_0x3ac99d);else{const _0x4b8240=Array['isArray'](_0x279542)?_0x279542:[_0x279542];for(const _0x4ce44f of _0x4b8240){isValidPermission(_0x4ce44f,_0x21110d,_0x3ac99d)&&_0x27a8cb[_0x4ef4a3(0x97)](_0x4ce44f);}}return _0x27a8cb;}function isValidPermission(_0x1f752b,_0x3f14ce,_0x4fd6dd){const _0x258d6a=a109_0x21f08b,_0x133ff8=PERMISSIONS_MAP['get'](_0x3f14ce);return _0x1f752b[_0x133ff8]&&_0x4fd6dd[_0x258d6a(0xa5)](_0x2f98c0=>_0x2f98c0[_0x258d6a(0xac)]['Component_Name__c']['includes'](_0x1f752b[_0x133ff8]));}function getValidLayout(_0x25fcd5,_0x36972f,_0x49f789){const _0x379312=a109_0x21f08b,_0x23196b=[],_0x5322da=Array[_0x379312(0xab)](_0x25fcd5)?_0x25fcd5:[_0x25fcd5];for(const _0x214c28 in _0x5322da){isValidPermission(_0x5322da[_0x214c28],_0x36972f,_0x49f789)&&(!_0x5322da[_0x214c28][_0x379312(0xb1)]&&_0x23196b[_0x379312(0x97)](_0x5322da[_0x214c28]),isValidPermission(_0x5322da[_0x214c28],_0x379312(0x8b),_0x49f789)&&_0x23196b[_0x379312(0x97)](_0x5322da[_0x214c28]));}return _0x23196b;}async function getReadyComponent(_0x2b9e13,_0x265100){const _0x3fb4c0=a109_0x21f08b,_0x25dfa8=await xml_1['Xml'][_0x3fb4c0(0x84)](_0x2b9e13);return prepareDeleteComponent[_0x265100](_0x25dfa8);}