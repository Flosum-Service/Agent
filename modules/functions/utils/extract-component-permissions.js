'use strict';const a90_0x33b944=a90_0x3324;(function(_0x57a0f6,_0x21177b){const _0x4d9b43=a90_0x3324,_0x20e530=_0x57a0f6();while(!![]){try{const _0x4210d7=parseInt(_0x4d9b43(0x117))/0x1*(parseInt(_0x4d9b43(0x101))/0x2)+-parseInt(_0x4d9b43(0x12f))/0x3+parseInt(_0x4d9b43(0x12d))/0x4+-parseInt(_0x4d9b43(0x119))/0x5+-parseInt(_0x4d9b43(0x107))/0x6+-parseInt(_0x4d9b43(0x129))/0x7*(-parseInt(_0x4d9b43(0x11c))/0x8)+-parseInt(_0x4d9b43(0x102))/0x9*(-parseInt(_0x4d9b43(0x10d))/0xa);if(_0x4210d7===_0x21177b)break;else _0x20e530['push'](_0x20e530['shift']());}catch(_0x4d3a45){_0x20e530['push'](_0x20e530['shift']());}}}(a90_0xb426,0xe2fa9));Object['defineProperty'](exports,a90_0x33b944(0x121),{'value':!![]}),exports['extractComponentPermissions']=void 0x0;const xml_1=require('../../git/parsers/utils/xml'),PERMISSIONS_MAP=new Map([['classAccesses','apexClass'],[a90_0x33b944(0x11a),a90_0x33b944(0x111)],['tabSettings','tab'],['tabVisibilities',a90_0x33b944(0x103)],[a90_0x33b944(0x11b),a90_0x33b944(0x123)],['categoryGroupVisibilities',a90_0x33b944(0x114)],[a90_0x33b944(0x10a),a90_0x33b944(0x128)],[a90_0x33b944(0x130),a90_0x33b944(0x105)],[a90_0x33b944(0x10c),a90_0x33b944(0x105)],[a90_0x33b944(0xfd),a90_0x33b944(0x133)],[a90_0x33b944(0x10f),a90_0x33b944(0xfc)],[a90_0x33b944(0x115),'name'],[a90_0x33b944(0x109),'flow'],[a90_0x33b944(0x12c),a90_0x33b944(0x124)],['recordTypeVisibilities',a90_0x33b944(0x12b)],['fieldPermissions',a90_0x33b944(0x10b)]]);var UNREMOVE_PERMISSION;(function(_0x404106){const _0x1ccbba=a90_0x33b944,_0x3df865=(function(){let _0x33f3b5=!![];return function(_0x57f820,_0x56105a){const _0x3e0259=_0x33f3b5?function(){const _0x2271f0=a90_0x3324;if(_0x56105a){const _0x4531e0=_0x56105a[_0x2271f0(0x127)](_0x57f820,arguments);return _0x56105a=null,_0x4531e0;}}:function(){};return _0x33f3b5=![],_0x3e0259;};}()),_0x357aa1=_0x3df865(this,function(){const _0x5a9971=a90_0x3324;return _0x357aa1[_0x5a9971(0x112)]()[_0x5a9971(0x11d)](_0x5a9971(0x100))['toString']()[_0x5a9971(0x104)](_0x357aa1)[_0x5a9971(0x11d)](_0x5a9971(0x100));});_0x357aa1(),_0x404106[_0x1ccbba(0x131)]=_0x1ccbba(0x131),_0x404106[_0x1ccbba(0x10e)]='label',_0x404106[_0x1ccbba(0x113)]='custom',_0x404106[_0x1ccbba(0xff)]='description';}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x51fed0=>{const _0x4a9ad1=a90_0x33b944;var _0x18343e,_0x3d45b8;return(_0x18343e=_0x51fed0[_0x4a9ad1(0x110)])===null||_0x18343e===void 0x0?!![]:delete _0x18343e[_0x4a9ad1(0x118)],(_0x3d45b8=_0x51fed0[_0x4a9ad1(0x110)])===null||_0x3d45b8===void 0x0?!![]:delete _0x3d45b8[_0x4a9ad1(0x11f)],_0x51fed0;},'PermissionSet':_0x41cd8e=>{const _0x1ff4ff=a90_0x33b944;var _0x16ddfe,_0x273796;return(_0x16ddfe=_0x41cd8e[_0x1ff4ff(0x132)])===null||_0x16ddfe===void 0x0?!![]:delete _0x16ddfe['userPermissions'],(_0x273796=_0x41cd8e[_0x1ff4ff(0x132)])===null||_0x273796===void 0x0?!![]:delete _0x273796[_0x1ff4ff(0x11f)],_0x41cd8e;}};function a90_0xb426(){const _0x177044=['3072928VZzlCt','Component__r','4944456tcaosW','customMetadataTypeAccesses','hasActivationRequired','PermissionSet','application','some','externalDataSource','applicationVisibilities','recordTypeVisibilities','description','(((.+)+)+)+$','394HXTwPT','9VNNTue','tab','constructor','name','Xml','6239616vcpREz','get','flowAccesses','objectPermissions','field','customSettingAccesses','16977190AMjLoZ','label','externalDataSourceAccesses','Profile','apexPage','toString','custom','dataCategoryGroup','customPermissions','extractComponentPermissions','4407fdASNg','userPermissions','2329540vSlnfe','pageAccesses','profileActionOverrides','1998856gSqtEm','search','isArray','loginIpRanges','parse','__esModule','http://soap.sforce.com/2006/04/metadata','content','layout','Component_Name__c','push','apply','object','21AgWNbp','includes','recordType','layoutAssignments'];a90_0xb426=function(){return _0x177044;};return a90_0xb426();}async function extractComponentPermissions(_0xf344c2,_0x412716,_0x5a8cd3){const _0x326abc=a90_0x33b944,_0x2a6db8=await getReadyComponent(_0xf344c2,_0x5a8cd3),_0x384515=_0x2a6db8[_0x5a8cd3];if(!_0x384515)return _0x2a6db8;for(const _0x3d849e in _0x384515){if(UNREMOVE_PERMISSION[_0x3d849e])continue;const _0xb872c7=_0x384515[_0x3d849e],_0x3e88c2=getValidPermission(_0xb872c7,_0x3d849e,_0x412716);_0x3e88c2['length']?_0x384515[_0x3d849e]=_0x3e88c2:delete _0x384515[_0x3d849e];}return _0x2a6db8[_0x5a8cd3]['$']={'xmlns':_0x326abc(0x122)},_0x2a6db8;}exports[a90_0x33b944(0x116)]=extractComponentPermissions;function a90_0x3324(_0xe25996,_0x5ce223){const _0x476dd0=a90_0xb426();return a90_0x3324=function(_0x3fbf71,_0x3624c4){_0x3fbf71=_0x3fbf71-0xfc;let _0xb4267b=_0x476dd0[_0x3fbf71];return _0xb4267b;},a90_0x3324(_0xe25996,_0x5ce223);}function getValidPermission(_0x3b7c4e,_0x56236e,_0x393f97){const _0x6a40d9=a90_0x33b944;let _0x13884b=[];if(_0x56236e===_0x6a40d9(0x12c))_0x13884b=getValidLayout(_0x3b7c4e,_0x56236e,_0x393f97);else{const _0x43dd99=Array[_0x6a40d9(0x11e)](_0x3b7c4e)?_0x3b7c4e:[_0x3b7c4e];for(const _0x2fda5e of _0x43dd99){isValidPermission(_0x2fda5e,_0x56236e,_0x393f97)&&_0x13884b[_0x6a40d9(0x126)](_0x2fda5e);}}return _0x13884b;}function isValidPermission(_0x4ec377,_0x249e3e,_0x5c05f5){const _0x364478=a90_0x33b944,_0x20a6d8=PERMISSIONS_MAP[_0x364478(0x108)](_0x249e3e);return _0x4ec377[_0x20a6d8]&&_0x5c05f5[_0x364478(0x134)](_0x3f8441=>_0x3f8441[_0x364478(0x12e)][_0x364478(0x125)][_0x364478(0x12a)](_0x4ec377[_0x20a6d8]));}function getValidLayout(_0x66903d,_0x2630b5,_0x3b5086){const _0x7fd2ae=a90_0x33b944,_0x3b1384=[],_0x3a6edc=Array[_0x7fd2ae(0x11e)](_0x66903d)?_0x66903d:[_0x66903d];for(const _0x4d2b5e in _0x3a6edc){isValidPermission(_0x3a6edc[_0x4d2b5e],_0x2630b5,_0x3b5086)&&(!_0x3a6edc[_0x4d2b5e]['recordType']&&_0x3b1384['push'](_0x3a6edc[_0x4d2b5e]),isValidPermission(_0x3a6edc[_0x4d2b5e],_0x7fd2ae(0xfe),_0x3b5086)&&_0x3b1384['push'](_0x3a6edc[_0x4d2b5e]));}return _0x3b1384;}async function getReadyComponent(_0x299b37,_0x2567b5){const _0x593113=a90_0x33b944,_0x2d9757=await xml_1[_0x593113(0x106)][_0x593113(0x120)](_0x299b37);return prepareDeleteComponent[_0x2567b5](_0x2d9757);}