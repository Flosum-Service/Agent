'use strict';const a109_0x4ce589=a109_0x5526;(function(_0x5a0458,_0x145d43){const _0x10e612=a109_0x5526,_0x9fb8d0=_0x5a0458();while(!![]){try{const _0x276f99=parseInt(_0x10e612(0x148))/0x1+-parseInt(_0x10e612(0x155))/0x2*(parseInt(_0x10e612(0x176))/0x3)+parseInt(_0x10e612(0x157))/0x4+parseInt(_0x10e612(0x14c))/0x5+-parseInt(_0x10e612(0x169))/0x6+parseInt(_0x10e612(0x156))/0x7+parseInt(_0x10e612(0x16e))/0x8;if(_0x276f99===_0x145d43)break;else _0x9fb8d0['push'](_0x9fb8d0['shift']());}catch(_0x3d9751){_0x9fb8d0['push'](_0x9fb8d0['shift']());}}}(a109_0x2555,0x62ce6));Object[a109_0x4ce589(0x16a)](exports,a109_0x4ce589(0x161),{'value':!![]}),exports['mergeComponentPermissions']=exports[a109_0x4ce589(0x16f)]=void 0x0;function a109_0x5526(_0x1a3e4b,_0x142911){const _0x3d19c7=a109_0x2555();return a109_0x5526=function(_0x37e0cf,_0x156bf5){_0x37e0cf=_0x37e0cf-0x144;let _0x25551c=_0x3d19c7[_0x37e0cf];return _0x25551c;},a109_0x5526(_0x1a3e4b,_0x142911);}const xml_1=require(a109_0x4ce589(0x171)),xml2js_1=require(a109_0x4ce589(0x178)),PERMISSIONS_MAP=new Map([[a109_0x4ce589(0x165),a109_0x4ce589(0x163)],[a109_0x4ce589(0x16b),'apexPage'],['tabSettings',a109_0x4ce589(0x15b)],[a109_0x4ce589(0x14a),a109_0x4ce589(0x15b)],[a109_0x4ce589(0x16d),a109_0x4ce589(0x145)],[a109_0x4ce589(0x173),a109_0x4ce589(0x17d)],[a109_0x4ce589(0x15c),a109_0x4ce589(0x177)],[a109_0x4ce589(0x162),a109_0x4ce589(0x147)],[a109_0x4ce589(0x179),a109_0x4ce589(0x147)],[a109_0x4ce589(0x175),a109_0x4ce589(0x158)],[a109_0x4ce589(0x15d),a109_0x4ce589(0x14d)],[a109_0x4ce589(0x17e),'name'],['flowAccesses','flow'],[a109_0x4ce589(0x153),a109_0x4ce589(0x15e)],[a109_0x4ce589(0x144),'recordType'],[a109_0x4ce589(0x149),a109_0x4ce589(0x14f)]]);var UNREMOVE_PERMISSION;(function(_0x52c5fc){const _0x2baa39=a109_0x4ce589,_0x6779dd=(function(){let _0x5e8d8a=!![];return function(_0x478812,_0x11f9da){const _0xf70f46=_0x5e8d8a?function(){const _0x4241da=a109_0x5526;if(_0x11f9da){const _0x66ee21=_0x11f9da[_0x4241da(0x150)](_0x478812,arguments);return _0x11f9da=null,_0x66ee21;}}:function(){};return _0x5e8d8a=![],_0xf70f46;};}()),_0x492c48=_0x6779dd(this,function(){const _0x32efa4=a109_0x5526;return _0x492c48['toString']()[_0x32efa4(0x166)](_0x32efa4(0x174))[_0x32efa4(0x14b)]()[_0x32efa4(0x159)](_0x492c48)[_0x32efa4(0x166)](_0x32efa4(0x174));});_0x492c48(),_0x52c5fc['hasActivationRequired']='hasActivationRequired',_0x52c5fc[_0x2baa39(0x14e)]='label',_0x52c5fc['custom']=_0x2baa39(0x167),_0x52c5fc[_0x2baa39(0x17c)]=_0x2baa39(0x17c);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x3bd779=>{const _0x12de27=a109_0x4ce589;var _0xb57663,_0x4c85ae;return(_0xb57663=_0x3bd779[_0x12de27(0x16c)])===null||_0xb57663===void 0x0?!![]:delete _0xb57663[_0x12de27(0x168)],(_0x4c85ae=_0x3bd779[_0x12de27(0x16c)])===null||_0x4c85ae===void 0x0?!![]:delete _0x4c85ae[_0x12de27(0x160)],_0x3bd779;},'PermissionSet':_0x2f8bad=>{const _0x359e0a=a109_0x4ce589;var _0x137ee2,_0xb3d5bb;return(_0x137ee2=_0x2f8bad[_0x359e0a(0x17a)])===null||_0x137ee2===void 0x0?!![]:delete _0x137ee2[_0x359e0a(0x168)],(_0xb3d5bb=_0x2f8bad[_0x359e0a(0x17a)])===null||_0xb3d5bb===void 0x0?!![]:delete _0xb3d5bb[_0x359e0a(0x160)],_0x2f8bad;}};async function extractComponentPermissions(_0x50cfd1,_0x528a3c,_0x4c1901){const _0x32449e=a109_0x4ce589,_0x3070db=await getReadyComponent(_0x50cfd1,_0x4c1901),_0x43d16a=_0x3070db[_0x4c1901];if(!_0x43d16a)return _0x3070db;for(const _0x896928 in _0x43d16a){if(UNREMOVE_PERMISSION[_0x896928])continue;const _0x485667=_0x43d16a[_0x896928],_0x4d6477=getValidPermission(_0x485667,_0x896928,_0x528a3c);_0x4d6477['length']?_0x43d16a[_0x896928]=_0x4d6477:delete _0x43d16a[_0x896928];}return _0x3070db[_0x4c1901]['$']={'xmlns':_0x32449e(0x152)},_0x3070db;}exports[a109_0x4ce589(0x16f)]=extractComponentPermissions;async function mergeComponentPermissions(_0x52dd38,_0x22f129,_0x34385c){const _0x581186=a109_0x4ce589,_0x775b02=await xml_1[_0x581186(0x170)][_0x581186(0x154)](_0x52dd38),_0x3a5dc3=await xml_1[_0x581186(0x170)]['parse'](_0x22f129),_0x246a9c=_0x775b02[_0x34385c],_0x5c0dce=_0x3a5dc3[_0x34385c];if(!_0x246a9c)return _0x22f129;for(const _0x31e051 in _0x246a9c){const _0x317456=PERMISSIONS_MAP[_0x581186(0x15a)](_0x31e051);if(!_0x317456||!_0x5c0dce[_0x31e051]){_0x5c0dce[_0x31e051]=_0x246a9c[_0x31e051];continue;}for(const _0x5240c9 of _0x246a9c[_0x31e051]){const _0x5a4fe2=_0x5c0dce[_0x31e051]['findIndex'](_0x89f92a=>_0x5240c9[_0x317456][0x0]===_0x89f92a[_0x317456][0x0]);_0x5a4fe2!==-0x1?_0x5c0dce[_0x31e051][_0x5a4fe2]=_0x5240c9:_0x5c0dce[_0x31e051][_0x581186(0x164)](_0x5240c9);}}_0x3a5dc3[_0x34385c]['$']={'xmlns':_0x581186(0x152)};const _0x3f3d87=new xml2js_1['Builder']({'xmldec':{'version':'1.0','encoding':'UTF-8'}});return _0x3f3d87[_0x581186(0x146)](_0x3a5dc3);}function a109_0x2555(){const _0xd2c5a=['custom','userPermissions','3683886xNbVUN','defineProperty','pageAccesses','Profile','profileActionOverrides','2064248VTdxyA','extractComponentPermissions','Xml','../../git/parsers/utils/xml','mergeComponentPermissions','categoryGroupVisibilities','(((.+)+)+)+$','applicationVisibilities','3MpmcRr','object','xml2js','customSettingAccesses','PermissionSet','isArray','description','dataCategoryGroup','customPermissions','recordTypeVisibilities','content','buildObject','name','527124xcFLdq','fieldPermissions','tabVisibilities','toString','885045GQDJsR','externalDataSource','label','field','apply','Component_Name__c','http://soap.sforce.com/2006/04/metadata','layoutAssignments','parse','1441424RTxgCP','2587634pxNQnD','1630308vcJFFc','application','constructor','get','tab','objectPermissions','externalDataSourceAccesses','layout','includes','loginIpRanges','__esModule','customMetadataTypeAccesses','apexClass','push','classAccesses','search'];a109_0x2555=function(){return _0xd2c5a;};return a109_0x2555();}exports[a109_0x4ce589(0x172)]=mergeComponentPermissions;function getValidPermission(_0x458664,_0x15f9aa,_0x27a0df){const _0x3165d4=a109_0x4ce589;let _0x1b68bd=[];if(_0x15f9aa===_0x3165d4(0x153))_0x1b68bd=getValidLayout(_0x458664,_0x15f9aa,_0x27a0df);else{const _0x756f65=Array[_0x3165d4(0x17b)](_0x458664)?_0x458664:[_0x458664];for(const _0x26bd0e of _0x756f65){isValidPermission(_0x26bd0e,_0x15f9aa,_0x27a0df)&&_0x1b68bd['push'](_0x26bd0e);}}return _0x1b68bd;}function isValidPermission(_0x10b197,_0x5df908,_0x4269e9){const _0x5f4ad4=a109_0x4ce589,_0x1e43cf=PERMISSIONS_MAP[_0x5f4ad4(0x15a)](_0x5df908);return _0x10b197[_0x1e43cf]&&_0x4269e9['some'](_0x14fce4=>_0x14fce4['Component__r'][_0x5f4ad4(0x151)][_0x5f4ad4(0x15f)](_0x10b197[_0x1e43cf]));}function getValidLayout(_0x102041,_0x136c0f,_0x179376){const _0x492c3c=a109_0x4ce589,_0x330ab6=[],_0x3e6cad=Array[_0x492c3c(0x17b)](_0x102041)?_0x102041:[_0x102041];for(const _0x1df5fa in _0x3e6cad){isValidPermission(_0x3e6cad[_0x1df5fa],_0x136c0f,_0x179376)&&(!_0x3e6cad[_0x1df5fa]['recordType']&&_0x330ab6[_0x492c3c(0x164)](_0x3e6cad[_0x1df5fa]),isValidPermission(_0x3e6cad[_0x1df5fa],_0x492c3c(0x144),_0x179376)&&_0x330ab6['push'](_0x3e6cad[_0x1df5fa]));}return _0x330ab6;}async function getReadyComponent(_0x14204f,_0x10ff66){const _0x4a076b=a109_0x4ce589,_0x285bb5=await xml_1[_0x4a076b(0x170)][_0x4a076b(0x154)](_0x14204f);return prepareDeleteComponent[_0x10ff66](_0x285bb5);}