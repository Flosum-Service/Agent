'use strict';const a91_0x662dd1=a91_0x2f31;(function(_0x3d6e1e,_0x3f584e){const _0x9063f8=a91_0x2f31,_0x4294a2=_0x3d6e1e();while(!![]){try{const _0x3810e7=-parseInt(_0x9063f8(0x1fc))/0x1+parseInt(_0x9063f8(0x201))/0x2+parseInt(_0x9063f8(0x202))/0x3*(parseInt(_0x9063f8(0x207))/0x4)+parseInt(_0x9063f8(0x21a))/0x5*(-parseInt(_0x9063f8(0x1fb))/0x6)+parseInt(_0x9063f8(0x1ee))/0x7+parseInt(_0x9063f8(0x1ff))/0x8*(-parseInt(_0x9063f8(0x214))/0x9)+parseInt(_0x9063f8(0x1fd))/0xa;if(_0x3810e7===_0x3f584e)break;else _0x4294a2['push'](_0x4294a2['shift']());}catch(_0x277f99){_0x4294a2['push'](_0x4294a2['shift']());}}}(a91_0x4bde,0xc89db));function a91_0x2f31(_0x589c43,_0x53c60f){const _0xcfa29b=a91_0x4bde();return a91_0x2f31=function(_0x5c2dc,_0x584480){_0x5c2dc=_0x5c2dc-0x1e6;let _0x4bdee7=_0xcfa29b[_0x5c2dc];return _0x4bdee7;},a91_0x2f31(_0x589c43,_0x53c60f);}Object['defineProperty'](exports,a91_0x662dd1(0x1fe),{'value':!![]}),exports[a91_0x662dd1(0x1ef)]=void 0x0;const xml_1=require('../../git/parsers/utils/xml'),PERMISSIONS_MAP=new Map([[a91_0x662dd1(0x20a),a91_0x662dd1(0x1f7)],[a91_0x662dd1(0x1f1),a91_0x662dd1(0x20d)],[a91_0x662dd1(0x1f9),a91_0x662dd1(0x1e7)],['tabVisibilities',a91_0x662dd1(0x1e7)],[a91_0x662dd1(0x1f6),a91_0x662dd1(0x212)],['categoryGroupVisibilities',a91_0x662dd1(0x1eb)],[a91_0x662dd1(0x1f0),a91_0x662dd1(0x21b)],[a91_0x662dd1(0x206),'name'],[a91_0x662dd1(0x209),'name'],[a91_0x662dd1(0x1f3),a91_0x662dd1(0x204)],[a91_0x662dd1(0x208),a91_0x662dd1(0x1ec)],[a91_0x662dd1(0x1e6),'name'],['flowAccesses',a91_0x662dd1(0x205)],['layoutAssignments',a91_0x662dd1(0x21c)],['recordTypeVisibilities',a91_0x662dd1(0x20b)],[a91_0x662dd1(0x20f),a91_0x662dd1(0x213)]]);var UNREMOVE_PERMISSION;(function(_0x5aeb21){const _0x4edc3f=a91_0x662dd1,_0x5b68ba=(function(){let _0x1396b9=!![];return function(_0x43fa12,_0x322757){const _0x2daf5c=_0x1396b9?function(){const _0x1d4553=a91_0x2f31;if(_0x322757){const _0xbfeff0=_0x322757[_0x1d4553(0x20e)](_0x43fa12,arguments);return _0x322757=null,_0xbfeff0;}}:function(){};return _0x1396b9=![],_0x2daf5c;};}()),_0x1c8332=_0x5b68ba(this,function(){const _0x50aa50=a91_0x2f31;return _0x1c8332[_0x50aa50(0x210)]()[_0x50aa50(0x216)](_0x50aa50(0x219))['toString']()[_0x50aa50(0x1f8)](_0x1c8332)[_0x50aa50(0x216)](_0x50aa50(0x219));});_0x1c8332(),_0x5aeb21['hasActivationRequired']=_0x4edc3f(0x1f4),_0x5aeb21[_0x4edc3f(0x211)]=_0x4edc3f(0x211),_0x5aeb21[_0x4edc3f(0x1f2)]=_0x4edc3f(0x1f2),_0x5aeb21[_0x4edc3f(0x1f5)]=_0x4edc3f(0x1f5);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));function a91_0x4bde(){const _0x1995c9=['description','profileActionOverrides','apexClass','constructor','tabSettings','userPermissions','29874toBRLj','175011braoOa','167070YHPTzF','__esModule','1395400ONncrK','includes','313334aSsvrN','48dLCCMc','get','application','flow','customMetadataTypeAccesses','65392gwnDgm','externalDataSourceAccesses','customSettingAccesses','classAccesses','recordType','parse','apexPage','apply','fieldPermissions','toString','label','content','field','45ptieMT','layoutAssignments','search','Profile','isArray','(((.+)+)+)+$','10TuKwZS','object','layout','push','customPermissions','tab','Component__r','recordTypeVisibilities','Xml','dataCategoryGroup','externalDataSource','http://soap.sforce.com/2006/04/metadata','10107125DEYVvz','extractComponentPermissions','objectPermissions','pageAccesses','custom','applicationVisibilities','hasActivationRequired'];a91_0x4bde=function(){return _0x1995c9;};return a91_0x4bde();}const prepareDeleteComponent={'Profile':_0x2d4781=>{const _0xe3bffa=a91_0x662dd1;var _0x65370f,_0x4ce0bd;return(_0x65370f=_0x2d4781[_0xe3bffa(0x217)])===null||_0x65370f===void 0x0?!![]:delete _0x65370f[_0xe3bffa(0x1fa)],(_0x4ce0bd=_0x2d4781['Profile'])===null||_0x4ce0bd===void 0x0?!![]:delete _0x4ce0bd['loginIpRanges'],_0x2d4781;},'PermissionSet':_0x4984fb=>{const _0x4b265d=a91_0x662dd1;var _0x5b66cb,_0x3a17d5;return(_0x5b66cb=_0x4984fb['PermissionSet'])===null||_0x5b66cb===void 0x0?!![]:delete _0x5b66cb[_0x4b265d(0x1fa)],(_0x3a17d5=_0x4984fb['PermissionSet'])===null||_0x3a17d5===void 0x0?!![]:delete _0x3a17d5['loginIpRanges'],_0x4984fb;}};async function extractComponentPermissions(_0x45f595,_0x295eae,_0x168ce1){const _0x50f00b=a91_0x662dd1,_0x1e11d1=await getReadyComponent(_0x45f595,_0x168ce1),_0x4f7511=_0x1e11d1[_0x168ce1];if(!_0x4f7511)return _0x1e11d1;for(const _0x40bf48 in _0x4f7511){if(UNREMOVE_PERMISSION[_0x40bf48])continue;const _0x5b2a4a=_0x4f7511[_0x40bf48],_0x118e48=getValidPermission(_0x5b2a4a,_0x40bf48,_0x295eae);_0x118e48['length']?_0x4f7511[_0x40bf48]=_0x118e48:delete _0x4f7511[_0x40bf48];}return _0x1e11d1[_0x168ce1]['$']={'xmlns':_0x50f00b(0x1ed)},_0x1e11d1;}exports[a91_0x662dd1(0x1ef)]=extractComponentPermissions;function getValidPermission(_0xfe2e3b,_0x206624,_0x4651b9){const _0x83f63f=a91_0x662dd1;let _0x56f40f=[];if(_0x206624===_0x83f63f(0x215))_0x56f40f=getValidLayout(_0xfe2e3b,_0x206624,_0x4651b9);else{const _0x38345f=Array[_0x83f63f(0x218)](_0xfe2e3b)?_0xfe2e3b:[_0xfe2e3b];for(const _0x48fbf4 of _0x38345f){isValidPermission(_0x48fbf4,_0x206624,_0x4651b9)&&_0x56f40f[_0x83f63f(0x21d)](_0x48fbf4);}}return _0x56f40f;}function isValidPermission(_0x45bdbb,_0x4ce2f8,_0x13d634){const _0x2e68d3=a91_0x662dd1,_0x47ffcc=PERMISSIONS_MAP[_0x2e68d3(0x203)](_0x4ce2f8);return _0x45bdbb[_0x47ffcc]&&_0x13d634['some'](_0x4c8ddc=>_0x4c8ddc[_0x2e68d3(0x1e8)]['Component_Name__c'][_0x2e68d3(0x200)](_0x45bdbb[_0x47ffcc]));}function getValidLayout(_0x407c71,_0x9b699a,_0x572866){const _0xa298d4=a91_0x662dd1,_0x3d14f6=[],_0x41be38=Array[_0xa298d4(0x218)](_0x407c71)?_0x407c71:[_0x407c71];for(const _0x1566a6 in _0x41be38){isValidPermission(_0x41be38[_0x1566a6],_0x9b699a,_0x572866)&&(!_0x41be38[_0x1566a6]['recordType']&&_0x3d14f6['push'](_0x41be38[_0x1566a6]),isValidPermission(_0x41be38[_0x1566a6],_0xa298d4(0x1e9),_0x572866)&&_0x3d14f6[_0xa298d4(0x21d)](_0x41be38[_0x1566a6]));}return _0x3d14f6;}async function getReadyComponent(_0x28b03b,_0x2055b8){const _0x49bf91=a91_0x662dd1,_0x25e77e=await xml_1[_0x49bf91(0x1ea)][_0x49bf91(0x20c)](_0x28b03b);return prepareDeleteComponent[_0x2055b8](_0x25e77e);}