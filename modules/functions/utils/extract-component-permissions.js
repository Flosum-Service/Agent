'use strict';const a110_0x5c97c7=a110_0x507b;(function(_0x3d416b,_0x4b809d){const _0x28b199=a110_0x507b,_0x3b65c9=_0x3d416b();while(!![]){try{const _0x507322=parseInt(_0x28b199(0xea))/0x1+parseInt(_0x28b199(0x124))/0x2*(-parseInt(_0x28b199(0x11f))/0x3)+-parseInt(_0x28b199(0x10a))/0x4*(parseInt(_0x28b199(0x109))/0x5)+-parseInt(_0x28b199(0x105))/0x6*(parseInt(_0x28b199(0xe4))/0x7)+parseInt(_0x28b199(0x106))/0x8*(-parseInt(_0x28b199(0xec))/0x9)+-parseInt(_0x28b199(0x126))/0xa+-parseInt(_0x28b199(0x11b))/0xb*(-parseInt(_0x28b199(0x11a))/0xc);if(_0x507322===_0x4b809d)break;else _0x3b65c9['push'](_0x3b65c9['shift']());}catch(_0x300a58){_0x3b65c9['push'](_0x3b65c9['shift']());}}}(a110_0x2bb6,0xedcf4));Object[a110_0x5c97c7(0x116)](exports,a110_0x5c97c7(0xff),{'value':!![]}),exports[a110_0x5c97c7(0xf9)]=exports['extractComponentPermissions']=void 0x0;const xml_1=require(a110_0x5c97c7(0xef)),xml2js_1=require(a110_0x5c97c7(0x125)),PERMISSIONS_MAP=new Map([[a110_0x5c97c7(0x111),'apexClass'],['pageAccesses',a110_0x5c97c7(0x114)],[a110_0x5c97c7(0x120),a110_0x5c97c7(0xf7)],[a110_0x5c97c7(0x121),a110_0x5c97c7(0xf7)],['profileActionOverrides','content'],[a110_0x5c97c7(0xe7),a110_0x5c97c7(0xe9)],[a110_0x5c97c7(0x110),'object'],['customMetadataTypeAccesses',a110_0x5c97c7(0x10b)],[a110_0x5c97c7(0x122),a110_0x5c97c7(0x10b)],['applicationVisibilities',a110_0x5c97c7(0x118)],[a110_0x5c97c7(0xe8),a110_0x5c97c7(0xf2)],[a110_0x5c97c7(0xfd),a110_0x5c97c7(0x10b)],[a110_0x5c97c7(0x10f),a110_0x5c97c7(0xf3)],[a110_0x5c97c7(0x11c),a110_0x5c97c7(0x102)],[a110_0x5c97c7(0x112),a110_0x5c97c7(0x10e)],[a110_0x5c97c7(0xfb),a110_0x5c97c7(0xe3)]]);var UNREMOVE_PERMISSION;(function(_0x59b069){const _0x52993c=a110_0x5c97c7,_0x4835e3=(function(){let _0x408957=!![];return function(_0x100da7,_0x5e7ebd){const _0x1433fa=_0x408957?function(){const _0x2c8cc4=a110_0x507b;if(_0x5e7ebd){const _0x286777=_0x5e7ebd[_0x2c8cc4(0x113)](_0x100da7,arguments);return _0x5e7ebd=null,_0x286777;}}:function(){};return _0x408957=![],_0x1433fa;};}()),_0x357d87=_0x4835e3(this,function(){const _0xfaf469=a110_0x507b;return _0x357d87[_0xfaf469(0x100)]()[_0xfaf469(0x11e)]('(((.+)+)+)+$')['toString']()[_0xfaf469(0x11d)](_0x357d87)[_0xfaf469(0x11e)](_0xfaf469(0x108));});_0x357d87(),_0x59b069[_0x52993c(0xf1)]=_0x52993c(0xf1),_0x59b069[_0x52993c(0xf8)]=_0x52993c(0xf8),_0x59b069[_0x52993c(0xeb)]=_0x52993c(0xeb),_0x59b069[_0x52993c(0x115)]=_0x52993c(0x115);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x28fb04=>{const _0xc93665=a110_0x5c97c7;var _0x1e2440,_0x236412;return(_0x1e2440=_0x28fb04[_0xc93665(0xfe)])===null||_0x1e2440===void 0x0?!![]:delete _0x1e2440[_0xc93665(0xf4)],(_0x236412=_0x28fb04['Profile'])===null||_0x236412===void 0x0?!![]:delete _0x236412[_0xc93665(0xe5)],_0x28fb04;},'PermissionSet':_0x19f5c3=>{const _0x1c2927=a110_0x5c97c7;var _0x43bce7,_0x55a02e;return(_0x43bce7=_0x19f5c3['PermissionSet'])===null||_0x43bce7===void 0x0?!![]:delete _0x43bce7['userPermissions'],(_0x55a02e=_0x19f5c3[_0x1c2927(0xfa)])===null||_0x55a02e===void 0x0?!![]:delete _0x55a02e['loginIpRanges'],_0x19f5c3;}};async function extractComponentPermissions(_0x10e170,_0x5c8ba3,_0x29274d){const _0x4d6a64=a110_0x5c97c7,_0x3c6a84=await getReadyComponent(_0x10e170,_0x29274d),_0x557720=_0x3c6a84[_0x29274d];if(!_0x557720)return _0x3c6a84;for(const _0x4862a8 in _0x557720){if(UNREMOVE_PERMISSION[_0x4862a8])continue;const _0x47a52e=_0x557720[_0x4862a8],_0xefcf8c=getValidPermission(_0x47a52e,_0x4862a8,_0x5c8ba3);_0xefcf8c[_0x4d6a64(0xf5)]?_0x557720[_0x4862a8]=_0xefcf8c:delete _0x557720[_0x4862a8];}return _0x3c6a84[_0x29274d]['$']={'xmlns':_0x4d6a64(0xed)},_0x3c6a84;}function a110_0x507b(_0x43f60a,_0x501668){const _0x4e9d47=a110_0x2bb6();return a110_0x507b=function(_0x350d49,_0x169ad1){_0x350d49=_0x350d49-0xe3;let _0x2bb605=_0x4e9d47[_0x350d49];return _0x2bb605;},a110_0x507b(_0x43f60a,_0x501668);}exports[a110_0x5c97c7(0x10d)]=extractComponentPermissions;async function mergeComponentPermissions(_0x4c4301,_0x1bfe68,_0x10e2a8){const _0x3632d2=a110_0x5c97c7,_0xd9c634=await xml_1[_0x3632d2(0x104)][_0x3632d2(0xee)](_0x4c4301),_0x42c872=await xml_1[_0x3632d2(0x104)]['parse'](_0x1bfe68),_0x5f26dd=_0xd9c634[_0x10e2a8],_0x2b1abb=_0x42c872[_0x10e2a8];if(!_0x5f26dd)return _0x1bfe68;for(const _0x19c2a0 in _0x5f26dd){const _0x5262c8=PERMISSIONS_MAP[_0x3632d2(0x107)](_0x19c2a0);if(!_0x5262c8||!_0x2b1abb[_0x19c2a0]){_0x2b1abb[_0x19c2a0]=_0x5f26dd[_0x19c2a0];continue;}for(const _0x4e0f52 of _0x5f26dd[_0x19c2a0]){const _0x2b5121=_0x2b1abb[_0x19c2a0][_0x3632d2(0xe6)](_0x18f360=>_0x4e0f52[_0x5262c8][0x0]===_0x18f360[_0x5262c8][0x0]);_0x2b5121!==-0x1?_0x2b1abb[_0x19c2a0][_0x2b5121]=_0x4e0f52:_0x2b1abb[_0x19c2a0][_0x3632d2(0xf0)](_0x4e0f52);}}_0x42c872[_0x10e2a8]['$']={'xmlns':_0x3632d2(0xed)};const _0x3ed870=new xml2js_1[(_0x3632d2(0x123))]({'xmldec':{'version':_0x3632d2(0xfc),'encoding':_0x3632d2(0x10c)}});return _0x3ed870[_0x3632d2(0x101)](_0x42c872);}exports['mergeComponentPermissions']=mergeComponentPermissions;function getValidPermission(_0x2b8c54,_0x105938,_0x5397d5){const _0x361af7=a110_0x5c97c7;let _0x2bbe4a=[];if(_0x105938==='layoutAssignments')_0x2bbe4a=getValidLayout(_0x2b8c54,_0x105938,_0x5397d5);else{const _0x13fb1f=Array['isArray'](_0x2b8c54)?_0x2b8c54:[_0x2b8c54];for(const _0x3f088c of _0x13fb1f){isValidPermission(_0x3f088c,_0x105938,_0x5397d5)&&_0x2bbe4a[_0x361af7(0xf0)](_0x3f088c);}}return _0x2bbe4a;}function isValidPermission(_0x3de7ac,_0x9276a6,_0x3b927e){const _0x1466b5=a110_0x5c97c7,_0x46ff47=PERMISSIONS_MAP[_0x1466b5(0x107)](_0x9276a6);return _0x3de7ac[_0x46ff47]&&_0x3b927e[_0x1466b5(0x103)](_0x579fc1=>_0x579fc1[_0x1466b5(0x119)]['Component_Name__c'][_0x1466b5(0xf6)](_0x3de7ac[_0x46ff47]));}function getValidLayout(_0x7bc0fe,_0x56e960,_0x2e3e3a){const _0x4cacf6=a110_0x5c97c7,_0x5f58b8=[],_0x49e03c=Array[_0x4cacf6(0x117)](_0x7bc0fe)?_0x7bc0fe:[_0x7bc0fe];for(const _0x3576de in _0x49e03c){isValidPermission(_0x49e03c[_0x3576de],_0x56e960,_0x2e3e3a)&&(!_0x49e03c[_0x3576de][_0x4cacf6(0x10e)]&&_0x5f58b8['push'](_0x49e03c[_0x3576de]),isValidPermission(_0x49e03c[_0x3576de],_0x4cacf6(0x112),_0x2e3e3a)&&_0x5f58b8['push'](_0x49e03c[_0x3576de]));}return _0x5f58b8;}async function getReadyComponent(_0x1c0cda,_0x2e126f){const _0x29bbf7=a110_0x5c97c7,_0xf4c446=await xml_1[_0x29bbf7(0x104)]['parse'](_0x1c0cda);return prepareDeleteComponent[_0x2e126f](_0xf4c446);}function a110_0x2bb6(){const _0x392f7e=['flowAccesses','objectPermissions','classAccesses','recordTypeVisibilities','apply','apexPage','description','defineProperty','isArray','application','Component__r','12YkUwXK','31871510tBPxEU','layoutAssignments','constructor','search','747951XAcZtU','tabSettings','tabVisibilities','customSettingAccesses','Builder','14YgRFYz','xml2js','8090qcAmrH','field','14zvofUb','loginIpRanges','findIndex','categoryGroupVisibilities','externalDataSourceAccesses','dataCategoryGroup','1678152MHOPZg','custom','9NyeHgc','http://soap.sforce.com/2006/04/metadata','parse','../../git/parsers/utils/xml','push','hasActivationRequired','externalDataSource','flow','userPermissions','length','includes','tab','label','mergeComponentPermissions','PermissionSet','fieldPermissions','1.0','customPermissions','Profile','__esModule','toString','buildObject','layout','some','Xml','3887022dEbFYF','428728akhmii','get','(((.+)+)+)+$','5DiXxdi','2024804QjLMNW','name','UTF-8','extractComponentPermissions','recordType'];a110_0x2bb6=function(){return _0x392f7e;};return a110_0x2bb6();}