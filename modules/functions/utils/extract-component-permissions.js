'use strict';function a109_0x32ea(_0x5138b2,_0x2b23db){const _0x39334e=a109_0x24f8();return a109_0x32ea=function(_0x1d2801,_0x34d3ee){_0x1d2801=_0x1d2801-0x15a;let _0x24f863=_0x39334e[_0x1d2801];return _0x24f863;},a109_0x32ea(_0x5138b2,_0x2b23db);}const a109_0x272991=a109_0x32ea;(function(_0x1d5312,_0xd88a7c){const _0x4a6fdc=a109_0x32ea,_0x37d5b4=_0x1d5312();while(!![]){try{const _0x18e86e=parseInt(_0x4a6fdc(0x177))/0x1*(-parseInt(_0x4a6fdc(0x161))/0x2)+-parseInt(_0x4a6fdc(0x18e))/0x3+-parseInt(_0x4a6fdc(0x168))/0x4+-parseInt(_0x4a6fdc(0x164))/0x5+-parseInt(_0x4a6fdc(0x198))/0x6*(-parseInt(_0x4a6fdc(0x15e))/0x7)+-parseInt(_0x4a6fdc(0x181))/0x8*(parseInt(_0x4a6fdc(0x18f))/0x9)+parseInt(_0x4a6fdc(0x19b))/0xa;if(_0x18e86e===_0xd88a7c)break;else _0x37d5b4['push'](_0x37d5b4['shift']());}catch(_0x30fa08){_0x37d5b4['push'](_0x37d5b4['shift']());}}}(a109_0x24f8,0x3bfc9));Object[a109_0x272991(0x182)](exports,a109_0x272991(0x15c),{'value':!![]}),exports[a109_0x272991(0x15f)]=exports[a109_0x272991(0x195)]=void 0x0;const xml_1=require(a109_0x272991(0x15b)),xml2js_1=require('xml2js'),PERMISSIONS_MAP=new Map([['classAccesses','apexClass'],[a109_0x272991(0x15d),a109_0x272991(0x184)],[a109_0x272991(0x191),a109_0x272991(0x165)],[a109_0x272991(0x16f),a109_0x272991(0x165)],[a109_0x272991(0x17a),a109_0x272991(0x180)],['categoryGroupVisibilities',a109_0x272991(0x188)],['objectPermissions',a109_0x272991(0x17b)],[a109_0x272991(0x199),a109_0x272991(0x166)],[a109_0x272991(0x17e),'name'],[a109_0x272991(0x187),a109_0x272991(0x163)],['externalDataSourceAccesses',a109_0x272991(0x15a)],[a109_0x272991(0x162),a109_0x272991(0x166)],[a109_0x272991(0x167),a109_0x272991(0x17c)],[a109_0x272991(0x18a),'layout'],['recordTypeVisibilities','recordType'],[a109_0x272991(0x18b),a109_0x272991(0x196)]]);var UNREMOVE_PERMISSION;function a109_0x24f8(){const _0x340ed7=['loginIpRanges','applicationVisibilities','dataCategoryGroup','get','layoutAssignments','fieldPermissions','recordType','parse','908853dPXOyv','112536NqAsRt','description','tabSettings','includes','PermissionSet','some','extractComponentPermissions','field','push','240wFyPAq','customMetadataTypeAccesses','label','12199810XqbQDc','externalDataSource','../../git/parsers/utils/xml','__esModule','pageAccesses','40873uDnjAA','mergeComponentPermissions','Xml','980XuBckD','customPermissions','application','1454450ngBxiY','tab','name','flowAccesses','1037020oRKsMZ','hasActivationRequired','userPermissions','apply','recordTypeVisibilities','1.0','isArray','tabVisibilities','Component__r','Builder','Profile','search','findIndex','custom','UTF-8','86bBKLzP','toString','constructor','profileActionOverrides','object','flow','buildObject','customSettingAccesses','length','content','200duBYxY','defineProperty','(((.+)+)+)+$','apexPage','http://soap.sforce.com/2006/04/metadata'];a109_0x24f8=function(){return _0x340ed7;};return a109_0x24f8();}(function(_0xb9fc48){const _0x564f0e=a109_0x272991,_0x21f285=(function(){let _0x387502=!![];return function(_0x55a566,_0x44e8dd){const _0x401db1=_0x387502?function(){const _0x241a70=a109_0x32ea;if(_0x44e8dd){const _0x324467=_0x44e8dd[_0x241a70(0x16b)](_0x55a566,arguments);return _0x44e8dd=null,_0x324467;}}:function(){};return _0x387502=![],_0x401db1;};}()),_0x1ce59c=_0x21f285(this,function(){const _0x378083=a109_0x32ea;return _0x1ce59c[_0x378083(0x178)]()[_0x378083(0x173)]('(((.+)+)+)+$')[_0x378083(0x178)]()[_0x378083(0x179)](_0x1ce59c)[_0x378083(0x173)](_0x378083(0x183));});_0x1ce59c(),_0xb9fc48[_0x564f0e(0x169)]=_0x564f0e(0x169),_0xb9fc48[_0x564f0e(0x19a)]=_0x564f0e(0x19a),_0xb9fc48['custom']=_0x564f0e(0x175),_0xb9fc48['description']=_0x564f0e(0x190);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x42e84a=>{const _0x28887a=a109_0x272991;var _0x12735f,_0x2d9083;return(_0x12735f=_0x42e84a[_0x28887a(0x172)])===null||_0x12735f===void 0x0?!![]:delete _0x12735f[_0x28887a(0x16a)],(_0x2d9083=_0x42e84a['Profile'])===null||_0x2d9083===void 0x0?!![]:delete _0x2d9083['loginIpRanges'],_0x42e84a;},'PermissionSet':_0x53b8e3=>{const _0x49b8de=a109_0x272991;var _0x41f340,_0x3f19d7;return(_0x41f340=_0x53b8e3[_0x49b8de(0x193)])===null||_0x41f340===void 0x0?!![]:delete _0x41f340[_0x49b8de(0x16a)],(_0x3f19d7=_0x53b8e3[_0x49b8de(0x193)])===null||_0x3f19d7===void 0x0?!![]:delete _0x3f19d7[_0x49b8de(0x186)],_0x53b8e3;}};async function extractComponentPermissions(_0x1a5921,_0x133291,_0x4d3491){const _0x4a787a=a109_0x272991,_0x2aa666=await getReadyComponent(_0x1a5921,_0x4d3491),_0x2b3439=_0x2aa666[_0x4d3491];if(!_0x2b3439)return _0x2aa666;for(const _0x34e36a in _0x2b3439){if(UNREMOVE_PERMISSION[_0x34e36a])continue;const _0x3a7c5f=_0x2b3439[_0x34e36a],_0x52a7ff=getValidPermission(_0x3a7c5f,_0x34e36a,_0x133291);_0x52a7ff[_0x4a787a(0x17f)]?_0x2b3439[_0x34e36a]=_0x52a7ff:delete _0x2b3439[_0x34e36a];}return _0x2aa666[_0x4d3491]['$']={'xmlns':_0x4a787a(0x185)},_0x2aa666;}exports['extractComponentPermissions']=extractComponentPermissions;async function mergeComponentPermissions(_0x11872e,_0x5f1a11,_0x224062){const _0x4911d0=a109_0x272991,_0x44936f=await xml_1[_0x4911d0(0x160)][_0x4911d0(0x18d)](_0x11872e),_0x5439be=await xml_1[_0x4911d0(0x160)][_0x4911d0(0x18d)](_0x5f1a11),_0x5e932a=_0x44936f[_0x224062],_0x50bb9f=_0x5439be[_0x224062];if(!_0x5e932a)return _0x5f1a11;for(const _0x5095da in _0x5e932a){const _0x5aff23=PERMISSIONS_MAP[_0x4911d0(0x189)](_0x5095da);if(!_0x5aff23||!_0x50bb9f[_0x5095da]){_0x50bb9f[_0x5095da]=_0x5e932a[_0x5095da];continue;}for(const _0xf8a243 of _0x5e932a[_0x5095da]){const _0x1cc4d7=_0x50bb9f[_0x5095da][_0x4911d0(0x174)](_0x4f02f7=>_0xf8a243[_0x5aff23][0x0]===_0x4f02f7[_0x5aff23][0x0]);_0x1cc4d7!==-0x1?_0x50bb9f[_0x5095da][_0x1cc4d7]=_0xf8a243:_0x50bb9f[_0x5095da][_0x4911d0(0x197)](_0xf8a243);}}_0x5439be[_0x224062]['$']={'xmlns':'http://soap.sforce.com/2006/04/metadata'};const _0x3b4704=new xml2js_1[(_0x4911d0(0x171))]({'xmldec':{'version':_0x4911d0(0x16d),'encoding':_0x4911d0(0x176)}});return _0x3b4704[_0x4911d0(0x17d)](_0x5439be);}exports['mergeComponentPermissions']=mergeComponentPermissions;function getValidPermission(_0x2aec55,_0xf869f7,_0x4edd9b){const _0x4c9559=a109_0x272991;let _0x4c230b=[];if(_0xf869f7===_0x4c9559(0x18a))_0x4c230b=getValidLayout(_0x2aec55,_0xf869f7,_0x4edd9b);else{const _0x4f68a0=Array['isArray'](_0x2aec55)?_0x2aec55:[_0x2aec55];for(const _0x1cf7a2 of _0x4f68a0){isValidPermission(_0x1cf7a2,_0xf869f7,_0x4edd9b)&&_0x4c230b[_0x4c9559(0x197)](_0x1cf7a2);}}return _0x4c230b;}function isValidPermission(_0x3960cc,_0x435960,_0xb99546){const _0x40a9a5=a109_0x272991,_0x3b4eea=PERMISSIONS_MAP['get'](_0x435960);return _0x3960cc[_0x3b4eea]&&_0xb99546[_0x40a9a5(0x194)](_0x2375cb=>_0x2375cb[_0x40a9a5(0x170)]['Component_Name__c'][_0x40a9a5(0x192)](_0x3960cc[_0x3b4eea]));}function getValidLayout(_0x58e652,_0x2ed2ad,_0x5c4e7a){const _0x492ee1=a109_0x272991,_0x34dc7e=[],_0x5bbf4c=Array[_0x492ee1(0x16e)](_0x58e652)?_0x58e652:[_0x58e652];for(const _0x310b4f in _0x5bbf4c){isValidPermission(_0x5bbf4c[_0x310b4f],_0x2ed2ad,_0x5c4e7a)&&(!_0x5bbf4c[_0x310b4f][_0x492ee1(0x18c)]&&_0x34dc7e[_0x492ee1(0x197)](_0x5bbf4c[_0x310b4f]),isValidPermission(_0x5bbf4c[_0x310b4f],_0x492ee1(0x16c),_0x5c4e7a)&&_0x34dc7e[_0x492ee1(0x197)](_0x5bbf4c[_0x310b4f]));}return _0x34dc7e;}async function getReadyComponent(_0x3da20e,_0x3cb2a6){const _0x486ad3=a109_0x272991,_0x3c67a7=await xml_1['Xml'][_0x486ad3(0x18d)](_0x3da20e);return prepareDeleteComponent[_0x3cb2a6](_0x3c67a7);}