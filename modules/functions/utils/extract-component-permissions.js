'use strict';const a91_0xcc29f=a91_0x5ac3;(function(_0x486693,_0x529ec2){const _0x26b9c1=a91_0x5ac3,_0x5d284c=_0x486693();while(!![]){try{const _0x2f13bf=parseInt(_0x26b9c1(0x167))/0x1+parseInt(_0x26b9c1(0x14c))/0x2+-parseInt(_0x26b9c1(0x178))/0x3*(-parseInt(_0x26b9c1(0x16c))/0x4)+parseInt(_0x26b9c1(0x177))/0x5+-parseInt(_0x26b9c1(0x149))/0x6*(parseInt(_0x26b9c1(0x148))/0x7)+-parseInt(_0x26b9c1(0x151))/0x8*(-parseInt(_0x26b9c1(0x170))/0x9)+parseInt(_0x26b9c1(0x173))/0xa*(-parseInt(_0x26b9c1(0x168))/0xb);if(_0x2f13bf===_0x529ec2)break;else _0x5d284c['push'](_0x5d284c['shift']());}catch(_0x1f3eca){_0x5d284c['push'](_0x5d284c['shift']());}}}(a91_0x2965,0xdd5f4));function a91_0x5ac3(_0x4428dd,_0x5a8869){const _0x257bf3=a91_0x2965();return a91_0x5ac3=function(_0x16ec28,_0x217858){_0x16ec28=_0x16ec28-0x148;let _0x2965f1=_0x257bf3[_0x16ec28];return _0x2965f1;},a91_0x5ac3(_0x4428dd,_0x5a8869);}Object[a91_0xcc29f(0x15a)](exports,a91_0xcc29f(0x150),{'value':!![]}),exports['extractComponentPermissions']=void 0x0;const xml_1=require('../../git/parsers/utils/xml'),PERMISSIONS_MAP=new Map([['classAccesses',a91_0xcc29f(0x15f)],[a91_0xcc29f(0x176),a91_0xcc29f(0x16b)],['tabSettings',a91_0xcc29f(0x154)],[a91_0xcc29f(0x165),'tab'],['profileActionOverrides','content'],[a91_0xcc29f(0x14b),a91_0xcc29f(0x166)],[a91_0xcc29f(0x161),a91_0xcc29f(0x157)],['customMetadataTypeAccesses','name'],[a91_0xcc29f(0x179),a91_0xcc29f(0x171)],[a91_0xcc29f(0x156),a91_0xcc29f(0x153)],[a91_0xcc29f(0x16d),a91_0xcc29f(0x17c)],[a91_0xcc29f(0x174),a91_0xcc29f(0x171)],[a91_0xcc29f(0x162),a91_0xcc29f(0x17a)],[a91_0xcc29f(0x152),a91_0xcc29f(0x169)],['recordTypeVisibilities',a91_0xcc29f(0x16a)],[a91_0xcc29f(0x163),a91_0xcc29f(0x15c)]]);var UNREMOVE_PERMISSION;(function(_0x1dfe78){const _0x1c8dcd=a91_0xcc29f,_0x513f0b=(function(){let _0x24f896=!![];return function(_0x2fd778,_0x28d4f3){const _0x1d8fe4=_0x24f896?function(){const _0x4e3319=a91_0x5ac3;if(_0x28d4f3){const _0x18b3fd=_0x28d4f3[_0x4e3319(0x14f)](_0x2fd778,arguments);return _0x28d4f3=null,_0x18b3fd;}}:function(){};return _0x24f896=![],_0x1d8fe4;};}()),_0x2096f3=_0x513f0b(this,function(){const _0x3581e9=a91_0x5ac3;return _0x2096f3[_0x3581e9(0x15d)]()[_0x3581e9(0x15e)](_0x3581e9(0x175))[_0x3581e9(0x15d)]()['constructor'](_0x2096f3)[_0x3581e9(0x15e)](_0x3581e9(0x175));});_0x2096f3(),_0x1dfe78['hasActivationRequired']='hasActivationRequired',_0x1dfe78[_0x1c8dcd(0x164)]=_0x1c8dcd(0x164),_0x1dfe78['custom']=_0x1c8dcd(0x159),_0x1dfe78[_0x1c8dcd(0x14a)]=_0x1c8dcd(0x14a);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x21832a=>{const _0x1e049e=a91_0xcc29f;var _0x111488,_0x449e40;return(_0x111488=_0x21832a[_0x1e049e(0x17b)])===null||_0x111488===void 0x0?!![]:delete _0x111488['userPermissions'],(_0x449e40=_0x21832a[_0x1e049e(0x17b)])===null||_0x449e40===void 0x0?!![]:delete _0x449e40[_0x1e049e(0x15b)],_0x21832a;},'PermissionSet':_0x11ec74=>{const _0x43b321=a91_0xcc29f;var _0x2f4fe5,_0x324dcf;return(_0x2f4fe5=_0x11ec74[_0x43b321(0x16f)])===null||_0x2f4fe5===void 0x0?!![]:delete _0x2f4fe5[_0x43b321(0x158)],(_0x324dcf=_0x11ec74[_0x43b321(0x16f)])===null||_0x324dcf===void 0x0?!![]:delete _0x324dcf['loginIpRanges'],_0x11ec74;}};async function extractComponentPermissions(_0x280ee4,_0x2b7e65,_0x179627){const _0x4fe569=a91_0xcc29f,_0x15ff3f=await getReadyComponent(_0x280ee4,_0x179627),_0x457175=_0x15ff3f[_0x179627];if(!_0x457175)return _0x15ff3f;for(const _0xfbbee in _0x457175){if(UNREMOVE_PERMISSION[_0xfbbee])continue;const _0x1a558f=_0x457175[_0xfbbee],_0x117903=getValidPermission(_0x1a558f,_0xfbbee,_0x2b7e65);_0x117903[_0x4fe569(0x160)]?_0x457175[_0xfbbee]=_0x117903:delete _0x457175[_0xfbbee];}return _0x15ff3f[_0x179627]['$']={'xmlns':'http://soap.sforce.com/2006/04/metadata'},_0x15ff3f;}exports[a91_0xcc29f(0x17e)]=extractComponentPermissions;function getValidPermission(_0x8db90b,_0x89c1a4,_0x91ceb6){const _0x5cc45a=a91_0xcc29f;let _0x2f23b8=[];if(_0x89c1a4==='layoutAssignments')_0x2f23b8=getValidLayout(_0x8db90b,_0x89c1a4,_0x91ceb6);else{const _0x48b3cb=Array[_0x5cc45a(0x16e)](_0x8db90b)?_0x8db90b:[_0x8db90b];for(const _0x24f2be of _0x48b3cb){isValidPermission(_0x24f2be,_0x89c1a4,_0x91ceb6)&&_0x2f23b8[_0x5cc45a(0x172)](_0x24f2be);}}return _0x2f23b8;}function a91_0x2965(){const _0x168a52=['categoryGroupVisibilities','2689784ZPQPmQ','Component__r','Xml','apply','__esModule','952gBdOPs','layoutAssignments','application','tab','some','applicationVisibilities','object','userPermissions','custom','defineProperty','loginIpRanges','field','toString','search','apexClass','length','objectPermissions','flowAccesses','fieldPermissions','label','tabVisibilities','dataCategoryGroup','708223cEsuXu','2145IUfSLv','layout','recordType','apexPage','2177572FiCHAZ','externalDataSourceAccesses','isArray','PermissionSet','126486IOglfW','name','push','265070SkPZAU','customPermissions','(((.+)+)+)+$','pageAccesses','5784795DuAYcu','9hZkVpG','customSettingAccesses','flow','Profile','externalDataSource','Component_Name__c','extractComponentPermissions','7bQgaLV','2640444mJmrLs','description'];a91_0x2965=function(){return _0x168a52;};return a91_0x2965();}function isValidPermission(_0x22de36,_0x589109,_0x4ef313){const _0x135ade=a91_0xcc29f,_0x170719=PERMISSIONS_MAP['get'](_0x589109);return _0x22de36[_0x170719]&&_0x4ef313[_0x135ade(0x155)](_0x76ecdd=>_0x76ecdd[_0x135ade(0x14d)][_0x135ade(0x17d)]['includes'](_0x22de36[_0x170719]));}function getValidLayout(_0x20c2fb,_0x3aa1ae,_0x3decd4){const _0x49d58e=a91_0xcc29f,_0x4d86e8=[],_0x42224f=Array[_0x49d58e(0x16e)](_0x20c2fb)?_0x20c2fb:[_0x20c2fb];for(const _0x403f90 in _0x42224f){isValidPermission(_0x42224f[_0x403f90],_0x3aa1ae,_0x3decd4)&&(!_0x42224f[_0x403f90][_0x49d58e(0x16a)]&&_0x4d86e8[_0x49d58e(0x172)](_0x42224f[_0x403f90]),isValidPermission(_0x42224f[_0x403f90],'recordTypeVisibilities',_0x3decd4)&&_0x4d86e8['push'](_0x42224f[_0x403f90]));}return _0x4d86e8;}async function getReadyComponent(_0x49d2de,_0x548497){const _0x3c486f=a91_0xcc29f,_0x26dbb0=await xml_1[_0x3c486f(0x14e)]['parse'](_0x49d2de);return prepareDeleteComponent[_0x548497](_0x26dbb0);}