'use strict';const a108_0x59ce15=a108_0x23cb;(function(_0x3b70af,_0x253a11){const _0x297e02=a108_0x23cb,_0x584202=_0x3b70af();while(!![]){try{const _0x3d6de3=parseInt(_0x297e02(0x142))/0x1*(-parseInt(_0x297e02(0x163))/0x2)+-parseInt(_0x297e02(0x146))/0x3+parseInt(_0x297e02(0x14d))/0x4+-parseInt(_0x297e02(0x134))/0x5+parseInt(_0x297e02(0x14c))/0x6+parseInt(_0x297e02(0x13e))/0x7+-parseInt(_0x297e02(0x149))/0x8*(parseInt(_0x297e02(0x12f))/0x9);if(_0x3d6de3===_0x253a11)break;else _0x584202['push'](_0x584202['shift']());}catch(_0x2cacbe){_0x584202['push'](_0x584202['shift']());}}}(a108_0x2198,0xece31));Object[a108_0x59ce15(0x12c)](exports,a108_0x59ce15(0x166),{'value':!![]}),exports['mergeComponentPermissions']=exports[a108_0x59ce15(0x15b)]=void 0x0;const xml_1=require(a108_0x59ce15(0x135)),xml2js_1=require('xml2js'),PERMISSIONS_MAP=new Map([[a108_0x59ce15(0x167),a108_0x59ce15(0x154)],[a108_0x59ce15(0x15f),a108_0x59ce15(0x132)],[a108_0x59ce15(0x13f),a108_0x59ce15(0x153)],[a108_0x59ce15(0x131),'tab'],[a108_0x59ce15(0x158),a108_0x59ce15(0x165)],[a108_0x59ce15(0x15a),a108_0x59ce15(0x129)],[a108_0x59ce15(0x133),a108_0x59ce15(0x15c)],[a108_0x59ce15(0x160),a108_0x59ce15(0x145)],['customSettingAccesses',a108_0x59ce15(0x145)],['applicationVisibilities',a108_0x59ce15(0x159)],[a108_0x59ce15(0x14e),a108_0x59ce15(0x144)],['customPermissions',a108_0x59ce15(0x145)],['flowAccesses',a108_0x59ce15(0x14b)],[a108_0x59ce15(0x14f),a108_0x59ce15(0x155)],['recordTypeVisibilities',a108_0x59ce15(0x156)],[a108_0x59ce15(0x148),a108_0x59ce15(0x150)]]);var UNREMOVE_PERMISSION;(function(_0x4921df){const _0x3847f0=a108_0x59ce15,_0x63c3c=(function(){let _0x30b3e1=!![];return function(_0x49c348,_0x2203e5){const _0x1628f6=_0x30b3e1?function(){const _0x1d7d9f=a108_0x23cb;if(_0x2203e5){const _0x36d9c8=_0x2203e5[_0x1d7d9f(0x137)](_0x49c348,arguments);return _0x2203e5=null,_0x36d9c8;}}:function(){};return _0x30b3e1=![],_0x1628f6;};}()),_0x5ee9e2=_0x63c3c(this,function(){const _0x360dcf=a108_0x23cb;return _0x5ee9e2[_0x360dcf(0x15d)]()[_0x360dcf(0x161)](_0x360dcf(0x141))[_0x360dcf(0x15d)]()['constructor'](_0x5ee9e2)[_0x360dcf(0x161)](_0x360dcf(0x141));});_0x5ee9e2(),_0x4921df[_0x3847f0(0x147)]=_0x3847f0(0x147),_0x4921df['label']=_0x3847f0(0x136),_0x4921df['custom']=_0x3847f0(0x143),_0x4921df[_0x3847f0(0x13a)]=_0x3847f0(0x13a);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));function a108_0x2198(){const _0x126c85=['label','apply','userPermissions','length','description','findIndex','get','isArray','10002223vzRGSb','tabSettings','push','(((.+)+)+)+$','1GRlYBs','custom','externalDataSource','name','5094081kauxWc','hasActivationRequired','fieldPermissions','9509512rpuFmZ','http://soap.sforce.com/2006/04/metadata','flow','11588454WYsTNf','3292164rYpAVF','externalDataSourceAccesses','layoutAssignments','field','Component_Name__c','parse','tab','apexClass','layout','recordType','recordTypeVisibilities','profileActionOverrides','application','categoryGroupVisibilities','extractComponentPermissions','object','toString','Profile','pageAccesses','customMetadataTypeAccesses','search','some','339982VcUHPt','loginIpRanges','content','__esModule','classAccesses','dataCategoryGroup','1.0','mergeComponentPermissions','defineProperty','Xml','UTF-8','9YZsvWj','PermissionSet','tabVisibilities','apexPage','objectPermissions','781715QoSBEA','../../git/parsers/utils/xml'];a108_0x2198=function(){return _0x126c85;};return a108_0x2198();}const prepareDeleteComponent={'Profile':_0x935726=>{const _0x5be194=a108_0x59ce15;var _0x56a50f,_0x32b028;return(_0x56a50f=_0x935726[_0x5be194(0x15e)])===null||_0x56a50f===void 0x0?!![]:delete _0x56a50f[_0x5be194(0x138)],(_0x32b028=_0x935726[_0x5be194(0x15e)])===null||_0x32b028===void 0x0?!![]:delete _0x32b028[_0x5be194(0x164)],_0x935726;},'PermissionSet':_0x4173f9=>{const _0xccdf6e=a108_0x59ce15;var _0x3aeae7,_0x417f5a;return(_0x3aeae7=_0x4173f9[_0xccdf6e(0x130)])===null||_0x3aeae7===void 0x0?!![]:delete _0x3aeae7['userPermissions'],(_0x417f5a=_0x4173f9[_0xccdf6e(0x130)])===null||_0x417f5a===void 0x0?!![]:delete _0x417f5a[_0xccdf6e(0x164)],_0x4173f9;}};async function extractComponentPermissions(_0x48a7f4,_0x59237c,_0x12f46e){const _0x420d6a=a108_0x59ce15,_0x1d1b33=await getReadyComponent(_0x48a7f4,_0x12f46e),_0x27b3c3=_0x1d1b33[_0x12f46e];if(!_0x27b3c3)return _0x1d1b33;for(const _0x4f73bc in _0x27b3c3){if(UNREMOVE_PERMISSION[_0x4f73bc])continue;const _0x18e2ee=_0x27b3c3[_0x4f73bc],_0x17822a=getValidPermission(_0x18e2ee,_0x4f73bc,_0x59237c);_0x17822a[_0x420d6a(0x139)]?_0x27b3c3[_0x4f73bc]=_0x17822a:delete _0x27b3c3[_0x4f73bc];}return _0x1d1b33[_0x12f46e]['$']={'xmlns':_0x420d6a(0x14a)},_0x1d1b33;}exports[a108_0x59ce15(0x15b)]=extractComponentPermissions;async function mergeComponentPermissions(_0xf96ee6,_0x56e32b,_0x23aac1){const _0x125f68=a108_0x59ce15,_0x366663=await xml_1[_0x125f68(0x12d)]['parse'](_0xf96ee6),_0x19ee6f=await xml_1['Xml'][_0x125f68(0x152)](_0x56e32b),_0x4a9068=_0x366663[_0x23aac1],_0x478356=_0x19ee6f[_0x23aac1];if(!_0x4a9068)return _0x56e32b;for(const _0xfe99c6 in _0x4a9068){const _0x1e7ddf=PERMISSIONS_MAP[_0x125f68(0x13c)](_0xfe99c6);if(!_0x1e7ddf||!_0x478356[_0xfe99c6]){_0x478356[_0xfe99c6]=_0x4a9068[_0xfe99c6];continue;}for(const _0x1a56a9 of _0x4a9068[_0xfe99c6]){const _0x4f41a7=_0x478356[_0xfe99c6][_0x125f68(0x13b)](_0x283aff=>_0x1a56a9[_0x1e7ddf][0x0]===_0x283aff[_0x1e7ddf][0x0]);_0x4f41a7!==-0x1?_0x478356[_0xfe99c6][_0x4f41a7]=_0x1a56a9:_0x478356[_0xfe99c6][_0x125f68(0x140)](_0x1a56a9);}}_0x19ee6f[_0x23aac1]['$']={'xmlns':_0x125f68(0x14a)};const _0x15264b=new xml2js_1['Builder']({'xmldec':{'version':_0x125f68(0x12a),'encoding':_0x125f68(0x12e)}});return _0x15264b['buildObject'](_0x19ee6f);}function a108_0x23cb(_0x5318d5,_0x54de71){const _0x3a1a8d=a108_0x2198();return a108_0x23cb=function(_0x5c234e,_0x3e98d5){_0x5c234e=_0x5c234e-0x129;let _0x2198ab=_0x3a1a8d[_0x5c234e];return _0x2198ab;},a108_0x23cb(_0x5318d5,_0x54de71);}exports[a108_0x59ce15(0x12b)]=mergeComponentPermissions;function getValidPermission(_0x34cebc,_0x393fcb,_0x201a8e){const _0x10b1a6=a108_0x59ce15;let _0x5918d0=[];if(_0x393fcb===_0x10b1a6(0x14f))_0x5918d0=getValidLayout(_0x34cebc,_0x393fcb,_0x201a8e);else{const _0x3ff542=Array[_0x10b1a6(0x13d)](_0x34cebc)?_0x34cebc:[_0x34cebc];for(const _0x2de913 of _0x3ff542){isValidPermission(_0x2de913,_0x393fcb,_0x201a8e)&&_0x5918d0[_0x10b1a6(0x140)](_0x2de913);}}return _0x5918d0;}function isValidPermission(_0x2c5caf,_0x574d3d,_0x3a0bce){const _0x452f0c=a108_0x59ce15,_0x3a8304=PERMISSIONS_MAP[_0x452f0c(0x13c)](_0x574d3d);return _0x2c5caf[_0x3a8304]&&_0x3a0bce[_0x452f0c(0x162)](_0x3e65b1=>_0x3e65b1['Component__r'][_0x452f0c(0x151)]['includes'](_0x2c5caf[_0x3a8304]));}function getValidLayout(_0x4a22b7,_0x352f51,_0x2361a0){const _0x41a7a4=a108_0x59ce15,_0x3b7171=[],_0x3e2085=Array[_0x41a7a4(0x13d)](_0x4a22b7)?_0x4a22b7:[_0x4a22b7];for(const _0x4cea19 in _0x3e2085){isValidPermission(_0x3e2085[_0x4cea19],_0x352f51,_0x2361a0)&&(!_0x3e2085[_0x4cea19]['recordType']&&_0x3b7171[_0x41a7a4(0x140)](_0x3e2085[_0x4cea19]),isValidPermission(_0x3e2085[_0x4cea19],_0x41a7a4(0x157),_0x2361a0)&&_0x3b7171[_0x41a7a4(0x140)](_0x3e2085[_0x4cea19]));}return _0x3b7171;}async function getReadyComponent(_0x48eaab,_0x46fd5d){const _0x5c3b25=a108_0x59ce15,_0x538baf=await xml_1[_0x5c3b25(0x12d)][_0x5c3b25(0x152)](_0x48eaab);return prepareDeleteComponent[_0x46fd5d](_0x538baf);}