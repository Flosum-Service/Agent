'use strict';function a109_0x454e(){const _0x151833=['apexClass','constructor','search','loginIpRanges','some','findIndex','pageAccesses','recordTypeVisibilities','1333353fJvBXg','tab','414416sULzqz','userPermissions','Builder','1.0','Component__r','description','tabSettings','push','flowAccesses','Component_Name__c','6cuutYk','customSettingAccesses','fieldPermissions','287983njbvqA','name','field','Xml','buildObject','921075VCvImT','xml2js','../../git/parsers/utils/xml','apply','includes','652098PcSXLi','content','Profile','object','application','get','defineProperty','customMetadataTypeAccesses','hasActivationRequired','__esModule','(((.+)+)+)+$','tabVisibilities','layoutAssignments','externalDataSourceAccesses','apexPage','isArray','layout','mergeComponentPermissions','customPermissions','http://soap.sforce.com/2006/04/metadata','custom','2516418sEQKfh','519582EgpzjH','label','dataCategoryGroup','recordType','toString','parse','8CpBKAY'];a109_0x454e=function(){return _0x151833;};return a109_0x454e();}const a109_0x5b6355=a109_0x5d13;(function(_0x1e5d98,_0x229f74){const _0x44dc46=a109_0x5d13,_0x25dace=_0x1e5d98();while(!![]){try{const _0x49357a=parseInt(_0x44dc46(0x202))/0x1+-parseInt(_0x44dc46(0x20c))/0x2+-parseInt(_0x44dc46(0x222))/0x3+parseInt(_0x44dc46(0x1f5))/0x4+parseInt(_0x44dc46(0x207))/0x5*(parseInt(_0x44dc46(0x1ff))/0x6)+-parseInt(_0x44dc46(0x1f3))/0x7+parseInt(_0x44dc46(0x228))/0x8*(parseInt(_0x44dc46(0x221))/0x9);if(_0x49357a===_0x229f74)break;else _0x25dace['push'](_0x25dace['shift']());}catch(_0xf82248){_0x25dace['push'](_0x25dace['shift']());}}}(a109_0x454e,0x28732));Object[a109_0x5b6355(0x212)](exports,a109_0x5b6355(0x215),{'value':!![]}),exports[a109_0x5b6355(0x21d)]=exports['extractComponentPermissions']=void 0x0;const xml_1=require(a109_0x5b6355(0x209)),xml2js_1=require(a109_0x5b6355(0x208)),PERMISSIONS_MAP=new Map([['classAccesses',a109_0x5b6355(0x229)],[a109_0x5b6355(0x1f1),a109_0x5b6355(0x21a)],[a109_0x5b6355(0x1fb),'tab'],[a109_0x5b6355(0x217),a109_0x5b6355(0x1f4)],['profileActionOverrides',a109_0x5b6355(0x20d)],['categoryGroupVisibilities',a109_0x5b6355(0x224)],['objectPermissions',a109_0x5b6355(0x20f)],[a109_0x5b6355(0x213),a109_0x5b6355(0x203)],[a109_0x5b6355(0x200),a109_0x5b6355(0x203)],['applicationVisibilities',a109_0x5b6355(0x210)],[a109_0x5b6355(0x219),'externalDataSource'],[a109_0x5b6355(0x21e),a109_0x5b6355(0x203)],[a109_0x5b6355(0x1fd),'flow'],[a109_0x5b6355(0x218),a109_0x5b6355(0x21c)],[a109_0x5b6355(0x1f2),a109_0x5b6355(0x225)],[a109_0x5b6355(0x201),a109_0x5b6355(0x204)]]);function a109_0x5d13(_0x4e6518,_0x2eb768){const _0x371fca=a109_0x454e();return a109_0x5d13=function(_0x5aebb5,_0xa3dcdc){_0x5aebb5=_0x5aebb5-0x1ed;let _0x454e12=_0x371fca[_0x5aebb5];return _0x454e12;},a109_0x5d13(_0x4e6518,_0x2eb768);}var UNREMOVE_PERMISSION;(function(_0x4b0e6c){const _0x5b896a=a109_0x5b6355,_0x5dd72b=(function(){let _0x265083=!![];return function(_0x1069cc,_0x2835de){const _0x5afe46=_0x265083?function(){const _0x449f42=a109_0x5d13;if(_0x2835de){const _0x4d91ad=_0x2835de[_0x449f42(0x20a)](_0x1069cc,arguments);return _0x2835de=null,_0x4d91ad;}}:function(){};return _0x265083=![],_0x5afe46;};}()),_0x1e6b01=_0x5dd72b(this,function(){const _0xe8b934=a109_0x5d13;return _0x1e6b01[_0xe8b934(0x226)]()[_0xe8b934(0x1ed)]('(((.+)+)+)+$')[_0xe8b934(0x226)]()[_0xe8b934(0x22a)](_0x1e6b01)[_0xe8b934(0x1ed)](_0xe8b934(0x216));});_0x1e6b01(),_0x4b0e6c[_0x5b896a(0x214)]=_0x5b896a(0x214),_0x4b0e6c['label']=_0x5b896a(0x223),_0x4b0e6c[_0x5b896a(0x220)]=_0x5b896a(0x220),_0x4b0e6c[_0x5b896a(0x1fa)]=_0x5b896a(0x1fa);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x1e0b10=>{const _0x524795=a109_0x5b6355;var _0xb0ea11,_0x222411;return(_0xb0ea11=_0x1e0b10[_0x524795(0x20e)])===null||_0xb0ea11===void 0x0?!![]:delete _0xb0ea11['userPermissions'],(_0x222411=_0x1e0b10['Profile'])===null||_0x222411===void 0x0?!![]:delete _0x222411[_0x524795(0x1ee)],_0x1e0b10;},'PermissionSet':_0x54ca6c=>{const _0x1850e7=a109_0x5b6355;var _0x50ae23,_0xa03e91;return(_0x50ae23=_0x54ca6c['PermissionSet'])===null||_0x50ae23===void 0x0?!![]:delete _0x50ae23[_0x1850e7(0x1f6)],(_0xa03e91=_0x54ca6c['PermissionSet'])===null||_0xa03e91===void 0x0?!![]:delete _0xa03e91[_0x1850e7(0x1ee)],_0x54ca6c;}};async function extractComponentPermissions(_0xb772c8,_0x41ea96,_0x541947){const _0x35f05c=await getReadyComponent(_0xb772c8,_0x541947),_0x5e30e8=_0x35f05c[_0x541947];if(!_0x5e30e8)return _0x35f05c;for(const _0x5ab3da in _0x5e30e8){if(UNREMOVE_PERMISSION[_0x5ab3da])continue;const _0x4da473=_0x5e30e8[_0x5ab3da],_0x46f552=getValidPermission(_0x4da473,_0x5ab3da,_0x41ea96);_0x46f552['length']?_0x5e30e8[_0x5ab3da]=_0x46f552:delete _0x5e30e8[_0x5ab3da];}return _0x35f05c[_0x541947]['$']={'xmlns':'http://soap.sforce.com/2006/04/metadata'},_0x35f05c;}exports['extractComponentPermissions']=extractComponentPermissions;async function mergeComponentPermissions(_0x59220a,_0x681cc0,_0x4aa5d9){const _0x517aec=a109_0x5b6355,_0x9709be=await xml_1['Xml'][_0x517aec(0x227)](_0x59220a),_0x1f4125=await xml_1[_0x517aec(0x205)][_0x517aec(0x227)](_0x681cc0),_0x1f6012=_0x9709be[_0x4aa5d9],_0xd77be=_0x1f4125[_0x4aa5d9];if(!_0x1f6012)return _0x681cc0;for(const _0xb9254f in _0x1f6012){const _0x4c0694=PERMISSIONS_MAP['get'](_0xb9254f);if(!_0x4c0694||!_0xd77be[_0xb9254f]){_0xd77be[_0xb9254f]=_0x1f6012[_0xb9254f];continue;}for(const _0x3c522a of _0x1f6012[_0xb9254f]){const _0x15ceba=_0xd77be[_0xb9254f][_0x517aec(0x1f0)](_0x1b9ecc=>_0x3c522a[_0x4c0694][0x0]===_0x1b9ecc[_0x4c0694][0x0]);_0x15ceba!==-0x1?_0xd77be[_0xb9254f][_0x15ceba]=_0x3c522a:_0xd77be[_0xb9254f]['push'](_0x3c522a);}}_0x1f4125[_0x4aa5d9]['$']={'xmlns':_0x517aec(0x21f)};const _0x173a9a=new xml2js_1[(_0x517aec(0x1f7))]({'xmldec':{'version':_0x517aec(0x1f8),'encoding':'UTF-8'}});return _0x173a9a[_0x517aec(0x206)](_0x1f4125);}exports[a109_0x5b6355(0x21d)]=mergeComponentPermissions;function getValidPermission(_0x5bc6d8,_0x7eb5b1,_0x380cb7){const _0x50aa07=a109_0x5b6355;let _0x11b781=[];if(_0x7eb5b1===_0x50aa07(0x218))_0x11b781=getValidLayout(_0x5bc6d8,_0x7eb5b1,_0x380cb7);else{const _0x5bdcbd=Array[_0x50aa07(0x21b)](_0x5bc6d8)?_0x5bc6d8:[_0x5bc6d8];for(const _0x5d65bc of _0x5bdcbd){isValidPermission(_0x5d65bc,_0x7eb5b1,_0x380cb7)&&_0x11b781[_0x50aa07(0x1fc)](_0x5d65bc);}}return _0x11b781;}function isValidPermission(_0x131dd5,_0xf7663c,_0x1d2dd7){const _0x4aa076=a109_0x5b6355,_0x335cfa=PERMISSIONS_MAP[_0x4aa076(0x211)](_0xf7663c);return _0x131dd5[_0x335cfa]&&_0x1d2dd7[_0x4aa076(0x1ef)](_0x65f7c9=>_0x65f7c9[_0x4aa076(0x1f9)][_0x4aa076(0x1fe)][_0x4aa076(0x20b)](_0x131dd5[_0x335cfa]));}function getValidLayout(_0x5da2b0,_0x712695,_0x20b2f3){const _0xc92b24=a109_0x5b6355,_0xcb3538=[],_0x2f0476=Array[_0xc92b24(0x21b)](_0x5da2b0)?_0x5da2b0:[_0x5da2b0];for(const _0x57475d in _0x2f0476){isValidPermission(_0x2f0476[_0x57475d],_0x712695,_0x20b2f3)&&(!_0x2f0476[_0x57475d][_0xc92b24(0x225)]&&_0xcb3538[_0xc92b24(0x1fc)](_0x2f0476[_0x57475d]),isValidPermission(_0x2f0476[_0x57475d],'recordTypeVisibilities',_0x20b2f3)&&_0xcb3538[_0xc92b24(0x1fc)](_0x2f0476[_0x57475d]));}return _0xcb3538;}async function getReadyComponent(_0x10f618,_0xa83532){const _0x372227=a109_0x5b6355,_0x55ddf5=await xml_1['Xml'][_0x372227(0x227)](_0x10f618);return prepareDeleteComponent[_0xa83532](_0x55ddf5);}