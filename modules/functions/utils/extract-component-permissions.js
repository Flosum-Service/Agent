'use strict';const a107_0x1209d8=a107_0xd82b;function a107_0xd82b(_0xce19cf,_0x4ca39e){const _0x36acdb=a107_0x4064();return a107_0xd82b=function(_0x3a165c,_0x288ac5){_0x3a165c=_0x3a165c-0x1a7;let _0x40643b=_0x36acdb[_0x3a165c];return _0x40643b;},a107_0xd82b(_0xce19cf,_0x4ca39e);}(function(_0x14c9de,_0x4e5f50){const _0x5c140f=a107_0xd82b,_0x2bbcda=_0x14c9de();while(!![]){try{const _0x19cb75=parseInt(_0x5c140f(0x1c8))/0x1*(-parseInt(_0x5c140f(0x1d1))/0x2)+-parseInt(_0x5c140f(0x1ab))/0x3*(parseInt(_0x5c140f(0x1b8))/0x4)+parseInt(_0x5c140f(0x1dd))/0x5+-parseInt(_0x5c140f(0x1b4))/0x6+-parseInt(_0x5c140f(0x1d4))/0x7+-parseInt(_0x5c140f(0x1b2))/0x8+parseInt(_0x5c140f(0x1d9))/0x9;if(_0x19cb75===_0x4e5f50)break;else _0x2bbcda['push'](_0x2bbcda['shift']());}catch(_0x2070fa){_0x2bbcda['push'](_0x2bbcda['shift']());}}}(a107_0x4064,0xa6007));Object[a107_0x1209d8(0x1b0)](exports,a107_0x1209d8(0x1c4),{'value':!![]}),exports['mergeComponentPermissions']=exports[a107_0x1209d8(0x1e5)]=void 0x0;function a107_0x4064(){const _0x312f95=['push','UTF-8','label','loginIpRanges','buildObject','../../git/parsers/utils/xml','hasActivationRequired','application','userPermissions','__esModule','PermissionSet','object','layout','212uEFdep','tab','recordTypeVisibilities','custom','toString','description','mergeComponentPermissions','applicationVisibilities','Component__r','1428jOJIGc','xml2js','Profile','8413874EkQQTM','tabSettings','includes','dataCategoryGroup','pageAccesses','25698924EeqAKL','Xml','categoryGroupVisibilities','get','5635290CMOopb','customPermissions','externalDataSourceAccesses','Component_Name__c','parse','fieldPermissions','content','http://soap.sforce.com/2006/04/metadata','extractComponentPermissions','customSettingAccesses','field','objectPermissions','classAccesses','findIndex','790080ctKyAZ','(((.+)+)+)+$','apply','apexPage','search','defineProperty','Builder','3840352WcbOMu','externalDataSource','2494302ccGQUP','1.0','recordType','layoutAssignments','16KARVIe','isArray','name'];a107_0x4064=function(){return _0x312f95;};return a107_0x4064();}const xml_1=require(a107_0x1209d8(0x1c0)),xml2js_1=require(a107_0x1209d8(0x1d2)),PERMISSIONS_MAP=new Map([[a107_0x1209d8(0x1a9),'apexClass'],[a107_0x1209d8(0x1d8),a107_0x1209d8(0x1ae)],[a107_0x1209d8(0x1d5),a107_0x1209d8(0x1c9)],['tabVisibilities',a107_0x1209d8(0x1c9)],['profileActionOverrides',a107_0x1209d8(0x1e3)],[a107_0x1209d8(0x1db),a107_0x1209d8(0x1d7)],[a107_0x1209d8(0x1a8),a107_0x1209d8(0x1c6)],['customMetadataTypeAccesses',a107_0x1209d8(0x1ba)],[a107_0x1209d8(0x1e6),a107_0x1209d8(0x1ba)],[a107_0x1209d8(0x1cf),a107_0x1209d8(0x1c2)],[a107_0x1209d8(0x1df),a107_0x1209d8(0x1b3)],[a107_0x1209d8(0x1de),a107_0x1209d8(0x1ba)],['flowAccesses','flow'],[a107_0x1209d8(0x1b7),a107_0x1209d8(0x1c7)],['recordTypeVisibilities','recordType'],[a107_0x1209d8(0x1e2),a107_0x1209d8(0x1a7)]]);var UNREMOVE_PERMISSION;(function(_0x5157e3){const _0x3a45d5=a107_0x1209d8,_0x4350d0=(function(){let _0x43f4ae=!![];return function(_0x10bfba,_0x58c637){const _0x5a2755=_0x43f4ae?function(){const _0x10d756=a107_0xd82b;if(_0x58c637){const _0x5e00df=_0x58c637[_0x10d756(0x1ad)](_0x10bfba,arguments);return _0x58c637=null,_0x5e00df;}}:function(){};return _0x43f4ae=![],_0x5a2755;};}()),_0x1eb6dd=_0x4350d0(this,function(){const _0x6cd8c6=a107_0xd82b;return _0x1eb6dd[_0x6cd8c6(0x1cc)]()[_0x6cd8c6(0x1af)]('(((.+)+)+)+$')['toString']()['constructor'](_0x1eb6dd)[_0x6cd8c6(0x1af)](_0x6cd8c6(0x1ac));});_0x1eb6dd(),_0x5157e3[_0x3a45d5(0x1c1)]=_0x3a45d5(0x1c1),_0x5157e3[_0x3a45d5(0x1bd)]=_0x3a45d5(0x1bd),_0x5157e3[_0x3a45d5(0x1cb)]=_0x3a45d5(0x1cb),_0x5157e3[_0x3a45d5(0x1cd)]=_0x3a45d5(0x1cd);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x1c43da=>{const _0x44990d=a107_0x1209d8;var _0xb3056e,_0x4a0c5f;return(_0xb3056e=_0x1c43da[_0x44990d(0x1d3)])===null||_0xb3056e===void 0x0?!![]:delete _0xb3056e[_0x44990d(0x1c3)],(_0x4a0c5f=_0x1c43da[_0x44990d(0x1d3)])===null||_0x4a0c5f===void 0x0?!![]:delete _0x4a0c5f[_0x44990d(0x1be)],_0x1c43da;},'PermissionSet':_0x1ec905=>{const _0xececb2=a107_0x1209d8;var _0x6a8ea7,_0x57c10a;return(_0x6a8ea7=_0x1ec905[_0xececb2(0x1c5)])===null||_0x6a8ea7===void 0x0?!![]:delete _0x6a8ea7[_0xececb2(0x1c3)],(_0x57c10a=_0x1ec905[_0xececb2(0x1c5)])===null||_0x57c10a===void 0x0?!![]:delete _0x57c10a['loginIpRanges'],_0x1ec905;}};async function extractComponentPermissions(_0x159efc,_0x1ed2dd,_0x255b0d){const _0x4000c1=a107_0x1209d8,_0x14f086=await getReadyComponent(_0x159efc,_0x255b0d),_0x3f1cbd=_0x14f086[_0x255b0d];if(!_0x3f1cbd)return _0x14f086;for(const _0x405cba in _0x3f1cbd){if(UNREMOVE_PERMISSION[_0x405cba])continue;const _0x1d2ecb=_0x3f1cbd[_0x405cba],_0x44f4c9=getValidPermission(_0x1d2ecb,_0x405cba,_0x1ed2dd);_0x44f4c9['length']?_0x3f1cbd[_0x405cba]=_0x44f4c9:delete _0x3f1cbd[_0x405cba];}return _0x14f086[_0x255b0d]['$']={'xmlns':_0x4000c1(0x1e4)},_0x14f086;}exports['extractComponentPermissions']=extractComponentPermissions;async function mergeComponentPermissions(_0x54c8d2,_0x356863,_0x7fb215){const _0x349a35=a107_0x1209d8,_0x7e5360=await xml_1[_0x349a35(0x1da)][_0x349a35(0x1e1)](_0x54c8d2),_0x446f77=await xml_1[_0x349a35(0x1da)][_0x349a35(0x1e1)](_0x356863),_0x54afb8=_0x7e5360[_0x7fb215],_0x513aeb=_0x446f77[_0x7fb215];if(!_0x54afb8)return _0x356863;for(const _0x11d3b6 in _0x54afb8){const _0x243361=PERMISSIONS_MAP[_0x349a35(0x1dc)](_0x11d3b6);if(!_0x243361||!_0x513aeb[_0x11d3b6]){_0x513aeb[_0x11d3b6]=_0x54afb8[_0x11d3b6];continue;}for(const _0x4b6c9e of _0x54afb8[_0x11d3b6]){const _0x570910=_0x513aeb[_0x11d3b6][_0x349a35(0x1aa)](_0x188dd1=>_0x4b6c9e[_0x243361][0x0]===_0x188dd1[_0x243361][0x0]);_0x570910!==-0x1?_0x513aeb[_0x11d3b6][_0x570910]=_0x4b6c9e:_0x513aeb[_0x11d3b6][_0x349a35(0x1bb)](_0x4b6c9e);}}_0x446f77[_0x7fb215]['$']={'xmlns':_0x349a35(0x1e4)};const _0x19417b=new xml2js_1[(_0x349a35(0x1b1))]({'xmldec':{'version':_0x349a35(0x1b5),'encoding':_0x349a35(0x1bc)}});return _0x19417b[_0x349a35(0x1bf)](_0x446f77);}exports[a107_0x1209d8(0x1ce)]=mergeComponentPermissions;function getValidPermission(_0x581e76,_0x56b809,_0x1b217d){const _0x798d8e=a107_0x1209d8;let _0x1bb607=[];if(_0x56b809==='layoutAssignments')_0x1bb607=getValidLayout(_0x581e76,_0x56b809,_0x1b217d);else{const _0x1a6ccc=Array[_0x798d8e(0x1b9)](_0x581e76)?_0x581e76:[_0x581e76];for(const _0x10be46 of _0x1a6ccc){isValidPermission(_0x10be46,_0x56b809,_0x1b217d)&&_0x1bb607[_0x798d8e(0x1bb)](_0x10be46);}}return _0x1bb607;}function isValidPermission(_0x2b6204,_0x24e106,_0x27a77a){const _0x3a6e4f=a107_0x1209d8,_0x5407dd=PERMISSIONS_MAP[_0x3a6e4f(0x1dc)](_0x24e106);return _0x2b6204[_0x5407dd]&&_0x27a77a['some'](_0xa4262=>_0xa4262[_0x3a6e4f(0x1d0)][_0x3a6e4f(0x1e0)][_0x3a6e4f(0x1d6)](_0x2b6204[_0x5407dd]));}function getValidLayout(_0x20ce20,_0x967a9a,_0x38b68d){const _0x43e166=a107_0x1209d8,_0x288432=[],_0x3285c5=Array[_0x43e166(0x1b9)](_0x20ce20)?_0x20ce20:[_0x20ce20];for(const _0x3b8c7c in _0x3285c5){isValidPermission(_0x3285c5[_0x3b8c7c],_0x967a9a,_0x38b68d)&&(!_0x3285c5[_0x3b8c7c][_0x43e166(0x1b6)]&&_0x288432[_0x43e166(0x1bb)](_0x3285c5[_0x3b8c7c]),isValidPermission(_0x3285c5[_0x3b8c7c],_0x43e166(0x1ca),_0x38b68d)&&_0x288432[_0x43e166(0x1bb)](_0x3285c5[_0x3b8c7c]));}return _0x288432;}async function getReadyComponent(_0x15e341,_0xdb8d81){const _0x1879c2=a107_0x1209d8,_0x276dad=await xml_1[_0x1879c2(0x1da)][_0x1879c2(0x1e1)](_0x15e341);return prepareDeleteComponent[_0xdb8d81](_0x276dad);}