'use strict';const a109_0x7a9e3f=a109_0xbcec;(function(_0x5246af,_0x14f30b){const _0x2a0e55=a109_0xbcec,_0x258360=_0x5246af();while(!![]){try{const _0x5c6636=parseInt(_0x2a0e55(0x12b))/0x1*(parseInt(_0x2a0e55(0x119))/0x2)+-parseInt(_0x2a0e55(0x131))/0x3+-parseInt(_0x2a0e55(0x11f))/0x4*(-parseInt(_0x2a0e55(0x124))/0x5)+parseInt(_0x2a0e55(0x12f))/0x6+-parseInt(_0x2a0e55(0x12c))/0x7+parseInt(_0x2a0e55(0x127))/0x8+parseInt(_0x2a0e55(0x115))/0x9;if(_0x5c6636===_0x14f30b)break;else _0x258360['push'](_0x258360['shift']());}catch(_0x4a8280){_0x258360['push'](_0x258360['shift']());}}}(a109_0x66ad,0x669dc));Object[a109_0x7a9e3f(0x10e)](exports,a109_0x7a9e3f(0x126),{'value':!![]}),exports[a109_0x7a9e3f(0x113)]=exports[a109_0x7a9e3f(0x12e)]=void 0x0;const xml_1=require(a109_0x7a9e3f(0x108)),xml2js_1=require(a109_0x7a9e3f(0x121)),PERMISSIONS_MAP=new Map([['classAccesses',a109_0x7a9e3f(0x122)],['pageAccesses',a109_0x7a9e3f(0x139)],[a109_0x7a9e3f(0x123),a109_0x7a9e3f(0x12a)],[a109_0x7a9e3f(0x13f),a109_0x7a9e3f(0x12a)],[a109_0x7a9e3f(0x13c),a109_0x7a9e3f(0x137)],[a109_0x7a9e3f(0x13e),a109_0x7a9e3f(0x125)],[a109_0x7a9e3f(0x130),'object'],[a109_0x7a9e3f(0x13a),a109_0x7a9e3f(0x120)],['customSettingAccesses',a109_0x7a9e3f(0x120)],[a109_0x7a9e3f(0x11d),a109_0x7a9e3f(0x11b)],['externalDataSourceAccesses',a109_0x7a9e3f(0x12d)],['customPermissions','name'],['flowAccesses',a109_0x7a9e3f(0x136)],[a109_0x7a9e3f(0x114),a109_0x7a9e3f(0x128)],[a109_0x7a9e3f(0x11e),'recordType'],['fieldPermissions','field']]);var UNREMOVE_PERMISSION;(function(_0x27f6d3){const _0x4be893=a109_0x7a9e3f,_0x1079a3=(function(){let _0x304a47=!![];return function(_0xff29f6,_0x3333d3){const _0xf1cb44=_0x304a47?function(){const _0x387296=a109_0xbcec;if(_0x3333d3){const _0x1d659a=_0x3333d3[_0x387296(0x11a)](_0xff29f6,arguments);return _0x3333d3=null,_0x1d659a;}}:function(){};return _0x304a47=![],_0xf1cb44;};}()),_0x58e687=_0x1079a3(this,function(){const _0x196801=a109_0xbcec;return _0x58e687[_0x196801(0x11c)]()['search']('(((.+)+)+)+$')[_0x196801(0x11c)]()['constructor'](_0x58e687)[_0x196801(0x134)](_0x196801(0x118));});_0x58e687(),_0x27f6d3[_0x4be893(0x140)]=_0x4be893(0x140),_0x27f6d3[_0x4be893(0x10b)]=_0x4be893(0x10b),_0x27f6d3['custom']=_0x4be893(0x138),_0x27f6d3['description']='description';}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x36d784=>{const _0x173ff1=a109_0x7a9e3f;var _0x32a5ec,_0x3429ee;return(_0x32a5ec=_0x36d784[_0x173ff1(0x141)])===null||_0x32a5ec===void 0x0?!![]:delete _0x32a5ec[_0x173ff1(0x10d)],(_0x3429ee=_0x36d784[_0x173ff1(0x141)])===null||_0x3429ee===void 0x0?!![]:delete _0x3429ee[_0x173ff1(0x132)],_0x36d784;},'PermissionSet':_0x457227=>{const _0x4f0c25=a109_0x7a9e3f;var _0x3886ce,_0x434184;return(_0x3886ce=_0x457227['PermissionSet'])===null||_0x3886ce===void 0x0?!![]:delete _0x3886ce[_0x4f0c25(0x10d)],(_0x434184=_0x457227[_0x4f0c25(0x109)])===null||_0x434184===void 0x0?!![]:delete _0x434184[_0x4f0c25(0x132)],_0x457227;}};async function extractComponentPermissions(_0x3c52a3,_0x23c01a,_0x58fb01){const _0x9d0242=a109_0x7a9e3f,_0xeec58a=await getReadyComponent(_0x3c52a3,_0x58fb01),_0x5383ee=_0xeec58a[_0x58fb01];if(!_0x5383ee)return _0xeec58a;for(const _0x503f7e in _0x5383ee){if(UNREMOVE_PERMISSION[_0x503f7e])continue;const _0x501513=_0x5383ee[_0x503f7e],_0x54fe15=getValidPermission(_0x501513,_0x503f7e,_0x23c01a);_0x54fe15[_0x9d0242(0x10c)]?_0x5383ee[_0x503f7e]=_0x54fe15:delete _0x5383ee[_0x503f7e];}return _0xeec58a[_0x58fb01]['$']={'xmlns':_0x9d0242(0x106)},_0xeec58a;}exports['extractComponentPermissions']=extractComponentPermissions;async function mergeComponentPermissions(_0x57c8c5,_0xc74b6f,_0x26ef35){const _0x5cf126=a109_0x7a9e3f,_0x3774bb=await xml_1[_0x5cf126(0x13d)][_0x5cf126(0x10a)](_0x57c8c5),_0x1ba8bc=await xml_1[_0x5cf126(0x13d)][_0x5cf126(0x10a)](_0xc74b6f),_0x518ce5=_0x3774bb[_0x26ef35],_0x10b55f=_0x1ba8bc[_0x26ef35];if(!_0x518ce5)return _0xc74b6f;for(const _0x41520d in _0x518ce5){const _0x595314=PERMISSIONS_MAP[_0x5cf126(0x117)](_0x41520d);if(!_0x595314||!_0x10b55f[_0x41520d]){_0x10b55f[_0x41520d]=_0x518ce5[_0x41520d];continue;}for(const _0x46ecc7 of _0x518ce5[_0x41520d]){const _0x36fb60=_0x10b55f[_0x41520d][_0x5cf126(0x111)](_0x1c5577=>_0x46ecc7[_0x595314][0x0]===_0x1c5577[_0x595314][0x0]);_0x36fb60!==-0x1?_0x10b55f[_0x41520d][_0x36fb60]=_0x46ecc7:_0x10b55f[_0x41520d][_0x5cf126(0x10f)](_0x46ecc7);}}_0x1ba8bc[_0x26ef35]['$']={'xmlns':_0x5cf126(0x106)};const _0x1ddba3=new xml2js_1[(_0x5cf126(0x129))]({'xmldec':{'version':_0x5cf126(0x110),'encoding':_0x5cf126(0x107)}});return _0x1ddba3[_0x5cf126(0x133)](_0x1ba8bc);}exports[a109_0x7a9e3f(0x113)]=mergeComponentPermissions;function a109_0xbcec(_0x572505,_0x5e8df4){const _0x511bac=a109_0x66ad();return a109_0xbcec=function(_0x3f5551,_0x229b4d){_0x3f5551=_0x3f5551-0x106;let _0x66ad18=_0x511bac[_0x3f5551];return _0x66ad18;},a109_0xbcec(_0x572505,_0x5e8df4);}function a109_0x66ad(){const _0x12b5f8=['1.0','findIndex','includes','mergeComponentPermissions','layoutAssignments','6927201XTXDek','Component__r','get','(((.+)+)+)+$','79846EkHGjm','apply','application','toString','applicationVisibilities','recordTypeVisibilities','176RhiiBb','name','xml2js','apexClass','tabSettings','26540QNCakg','dataCategoryGroup','__esModule','1616736FhCMXZ','layout','Builder','tab','11etGjgF','4746616QiWkHS','externalDataSource','extractComponentPermissions','40614mYkaDI','objectPermissions','1658553ivlqdx','loginIpRanges','buildObject','search','isArray','flow','content','custom','apexPage','customMetadataTypeAccesses','recordType','profileActionOverrides','Xml','categoryGroupVisibilities','tabVisibilities','hasActivationRequired','Profile','http://soap.sforce.com/2006/04/metadata','UTF-8','../../git/parsers/utils/xml','PermissionSet','parse','label','length','userPermissions','defineProperty','push'];a109_0x66ad=function(){return _0x12b5f8;};return a109_0x66ad();}function getValidPermission(_0x477c74,_0x209bee,_0x5c7f09){const _0x57815f=a109_0x7a9e3f;let _0x2f6097=[];if(_0x209bee==='layoutAssignments')_0x2f6097=getValidLayout(_0x477c74,_0x209bee,_0x5c7f09);else{const _0x48faf1=Array[_0x57815f(0x135)](_0x477c74)?_0x477c74:[_0x477c74];for(const _0x42930d of _0x48faf1){isValidPermission(_0x42930d,_0x209bee,_0x5c7f09)&&_0x2f6097['push'](_0x42930d);}}return _0x2f6097;}function isValidPermission(_0x445db4,_0x548162,_0x3ad9d8){const _0x2598ad=a109_0x7a9e3f,_0x11253d=PERMISSIONS_MAP[_0x2598ad(0x117)](_0x548162);return _0x445db4[_0x11253d]&&_0x3ad9d8['some'](_0x104d3f=>_0x104d3f[_0x2598ad(0x116)]['Component_Name__c'][_0x2598ad(0x112)](_0x445db4[_0x11253d]));}function getValidLayout(_0x4ac6ab,_0x1a9f62,_0x589373){const _0x28a0c5=a109_0x7a9e3f,_0x4e81ce=[],_0x59156d=Array[_0x28a0c5(0x135)](_0x4ac6ab)?_0x4ac6ab:[_0x4ac6ab];for(const _0x506fd0 in _0x59156d){isValidPermission(_0x59156d[_0x506fd0],_0x1a9f62,_0x589373)&&(!_0x59156d[_0x506fd0][_0x28a0c5(0x13b)]&&_0x4e81ce[_0x28a0c5(0x10f)](_0x59156d[_0x506fd0]),isValidPermission(_0x59156d[_0x506fd0],_0x28a0c5(0x11e),_0x589373)&&_0x4e81ce[_0x28a0c5(0x10f)](_0x59156d[_0x506fd0]));}return _0x4e81ce;}async function getReadyComponent(_0x789218,_0x495aba){const _0x447a8a=a109_0x7a9e3f,_0x27ee3b=await xml_1[_0x447a8a(0x13d)][_0x447a8a(0x10a)](_0x789218);return prepareDeleteComponent[_0x495aba](_0x27ee3b);}