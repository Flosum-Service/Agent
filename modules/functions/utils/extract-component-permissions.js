'use strict';const a109_0x355699=a109_0x3a04;(function(_0x3e996d,_0x3951a2){const _0x2c5900=a109_0x3a04,_0x37c786=_0x3e996d();while(!![]){try{const _0x259d0d=-parseInt(_0x2c5900(0x114))/0x1*(parseInt(_0x2c5900(0x12d))/0x2)+parseInt(_0x2c5900(0xf8))/0x3*(parseInt(_0x2c5900(0x10a))/0x4)+-parseInt(_0x2c5900(0xfe))/0x5+-parseInt(_0x2c5900(0xfa))/0x6+-parseInt(_0x2c5900(0xfc))/0x7+parseInt(_0x2c5900(0x124))/0x8*(-parseInt(_0x2c5900(0xff))/0x9)+parseInt(_0x2c5900(0x125))/0xa;if(_0x259d0d===_0x3951a2)break;else _0x37c786['push'](_0x37c786['shift']());}catch(_0x3f58c0){_0x37c786['push'](_0x37c786['shift']());}}}(a109_0x5b5a,0x6c348));Object[a109_0x355699(0x133)](exports,a109_0x355699(0x105),{'value':!![]}),exports['mergeComponentPermissions']=exports[a109_0x355699(0x135)]=void 0x0;const xml_1=require('../../git/parsers/utils/xml'),xml2js_1=require(a109_0x355699(0x11a)),PERMISSIONS_MAP=new Map([[a109_0x355699(0x104),a109_0x355699(0x12e)],['pageAccesses',a109_0x355699(0x10f)],[a109_0x355699(0x10d),'tab'],[a109_0x355699(0x128),a109_0x355699(0x108)],[a109_0x355699(0xf7),a109_0x355699(0x113)],['categoryGroupVisibilities',a109_0x355699(0x117)],['objectPermissions','object'],[a109_0x355699(0x129),a109_0x355699(0x11b)],[a109_0x355699(0x121),a109_0x355699(0x11b)],[a109_0x355699(0x12c),a109_0x355699(0x109)],[a109_0x355699(0x132),a109_0x355699(0x11f)],[a109_0x355699(0x134),a109_0x355699(0x11b)],['flowAccesses',a109_0x355699(0x10e)],['layoutAssignments',a109_0x355699(0x122)],[a109_0x355699(0x123),a109_0x355699(0x116)],[a109_0x355699(0x119),a109_0x355699(0x103)]]);function a109_0x3a04(_0x25f31a,_0x47dcfb){const _0x202981=a109_0x5b5a();return a109_0x3a04=function(_0x3d5bcd,_0x131f40){_0x3d5bcd=_0x3d5bcd-0xf5;let _0x5b5a47=_0x202981[_0x3d5bcd];return _0x5b5a47;},a109_0x3a04(_0x25f31a,_0x47dcfb);}var UNREMOVE_PERMISSION;function a109_0x5b5a(){const _0x4fe78=['tabVisibilities','customMetadataTypeAccesses','isArray','includes','applicationVisibilities','2RHfOlu','apexClass','push','(((.+)+)+)+$','Component_Name__c','externalDataSourceAccesses','defineProperty','customPermissions','extractComponentPermissions','http://soap.sforce.com/2006/04/metadata','layoutAssignments','1.0','profileActionOverrides','22941PdvCbl','constructor','3348852YSNFnE','userPermissions','2731582xkmTev','mergeComponentPermissions','3841730SvEQoT','9EglJEr','PermissionSet','Xml','get','field','classAccesses','__esModule','label','hasActivationRequired','tab','application','44tholoC','loginIpRanges','custom','tabSettings','flow','apexPage','buildObject','Profile','findIndex','content','384821GmuEYS','UTF-8','recordType','dataCategoryGroup','toString','fieldPermissions','xml2js','name','length','description','some','externalDataSource','parse','customSettingAccesses','layout','recordTypeVisibilities','5286760gKGaiV','31214710yEWXqG','Builder','Component__r'];a109_0x5b5a=function(){return _0x4fe78;};return a109_0x5b5a();}(function(_0x4148c1){const _0x428f4c=a109_0x355699,_0x2a2344=(function(){let _0xf997d5=!![];return function(_0x30cd6b,_0x401555){const _0x2989de=_0xf997d5?function(){if(_0x401555){const _0x51cf08=_0x401555['apply'](_0x30cd6b,arguments);return _0x401555=null,_0x51cf08;}}:function(){};return _0xf997d5=![],_0x2989de;};}()),_0x1c3dda=_0x2a2344(this,function(){const _0x2c7bd6=a109_0x3a04;return _0x1c3dda[_0x2c7bd6(0x118)]()['search'](_0x2c7bd6(0x130))[_0x2c7bd6(0x118)]()[_0x2c7bd6(0xf9)](_0x1c3dda)['search'](_0x2c7bd6(0x130));});_0x1c3dda(),_0x4148c1[_0x428f4c(0x107)]=_0x428f4c(0x107),_0x4148c1[_0x428f4c(0x106)]='label',_0x4148c1[_0x428f4c(0x10c)]=_0x428f4c(0x10c),_0x4148c1[_0x428f4c(0x11d)]=_0x428f4c(0x11d);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x2115c4=>{const _0x526261=a109_0x355699;var _0x218923,_0x55d4fa;return(_0x218923=_0x2115c4[_0x526261(0x111)])===null||_0x218923===void 0x0?!![]:delete _0x218923[_0x526261(0xfb)],(_0x55d4fa=_0x2115c4[_0x526261(0x111)])===null||_0x55d4fa===void 0x0?!![]:delete _0x55d4fa[_0x526261(0x10b)],_0x2115c4;},'PermissionSet':_0x5cc694=>{const _0x367fd8=a109_0x355699;var _0x5590e7,_0x55fe52;return(_0x5590e7=_0x5cc694[_0x367fd8(0x100)])===null||_0x5590e7===void 0x0?!![]:delete _0x5590e7[_0x367fd8(0xfb)],(_0x55fe52=_0x5cc694[_0x367fd8(0x100)])===null||_0x55fe52===void 0x0?!![]:delete _0x55fe52['loginIpRanges'],_0x5cc694;}};async function extractComponentPermissions(_0x3b3aac,_0x367831,_0x283794){const _0x5dd69f=a109_0x355699,_0x4b4dc7=await getReadyComponent(_0x3b3aac,_0x283794),_0x3d5c39=_0x4b4dc7[_0x283794];if(!_0x3d5c39)return _0x4b4dc7;for(const _0x4e847d in _0x3d5c39){if(UNREMOVE_PERMISSION[_0x4e847d])continue;const _0x4e7fd1=_0x3d5c39[_0x4e847d],_0x417420=getValidPermission(_0x4e7fd1,_0x4e847d,_0x367831);_0x417420[_0x5dd69f(0x11c)]?_0x3d5c39[_0x4e847d]=_0x417420:delete _0x3d5c39[_0x4e847d];}return _0x4b4dc7[_0x283794]['$']={'xmlns':'http://soap.sforce.com/2006/04/metadata'},_0x4b4dc7;}exports[a109_0x355699(0x135)]=extractComponentPermissions;async function mergeComponentPermissions(_0x388300,_0x478d09,_0xca7012){const _0x2ff0ec=a109_0x355699,_0x3a6c37=await xml_1[_0x2ff0ec(0x101)][_0x2ff0ec(0x120)](_0x388300),_0x396b86=await xml_1[_0x2ff0ec(0x101)][_0x2ff0ec(0x120)](_0x478d09),_0x46c512=_0x3a6c37[_0xca7012],_0x1478d9=_0x396b86[_0xca7012];if(!_0x46c512)return _0x478d09;for(const _0x4a0837 in _0x46c512){const _0x308f2f=PERMISSIONS_MAP[_0x2ff0ec(0x102)](_0x4a0837);if(!_0x308f2f||!_0x1478d9[_0x4a0837]){_0x1478d9[_0x4a0837]=_0x46c512[_0x4a0837];continue;}for(const _0x2de909 of _0x46c512[_0x4a0837]){const _0x2802cf=_0x1478d9[_0x4a0837][_0x2ff0ec(0x112)](_0x440b28=>_0x2de909[_0x308f2f][0x0]===_0x440b28[_0x308f2f][0x0]);_0x2802cf!==-0x1?_0x1478d9[_0x4a0837][_0x2802cf]=_0x2de909:_0x1478d9[_0x4a0837]['push'](_0x2de909);}}_0x396b86[_0xca7012]['$']={'xmlns':_0x2ff0ec(0x136)};const _0x68bc97=new xml2js_1[(_0x2ff0ec(0x126))]({'xmldec':{'version':_0x2ff0ec(0xf6),'encoding':_0x2ff0ec(0x115)}});return _0x68bc97[_0x2ff0ec(0x110)](_0x396b86);}exports[a109_0x355699(0xfd)]=mergeComponentPermissions;function getValidPermission(_0x56fc75,_0x311e76,_0x4561af){const _0x222b72=a109_0x355699;let _0x80e023=[];if(_0x311e76===_0x222b72(0xf5))_0x80e023=getValidLayout(_0x56fc75,_0x311e76,_0x4561af);else{const _0x2bec13=Array[_0x222b72(0x12a)](_0x56fc75)?_0x56fc75:[_0x56fc75];for(const _0x944150 of _0x2bec13){isValidPermission(_0x944150,_0x311e76,_0x4561af)&&_0x80e023['push'](_0x944150);}}return _0x80e023;}function isValidPermission(_0x269ad4,_0x5b0727,_0x9a9f12){const _0x5c6bce=a109_0x355699,_0x5de2f7=PERMISSIONS_MAP['get'](_0x5b0727);return _0x269ad4[_0x5de2f7]&&_0x9a9f12[_0x5c6bce(0x11e)](_0x148a0f=>_0x148a0f[_0x5c6bce(0x127)][_0x5c6bce(0x131)][_0x5c6bce(0x12b)](_0x269ad4[_0x5de2f7]));}function getValidLayout(_0xc50a24,_0x23b08f,_0x3435c3){const _0x525657=a109_0x355699,_0x5a571c=[],_0x588b63=Array[_0x525657(0x12a)](_0xc50a24)?_0xc50a24:[_0xc50a24];for(const _0x52a86c in _0x588b63){isValidPermission(_0x588b63[_0x52a86c],_0x23b08f,_0x3435c3)&&(!_0x588b63[_0x52a86c][_0x525657(0x116)]&&_0x5a571c[_0x525657(0x12f)](_0x588b63[_0x52a86c]),isValidPermission(_0x588b63[_0x52a86c],_0x525657(0x123),_0x3435c3)&&_0x5a571c[_0x525657(0x12f)](_0x588b63[_0x52a86c]));}return _0x5a571c;}async function getReadyComponent(_0x5dadd1,_0x54c5ec){const _0x50e5e7=a109_0x355699,_0x42de4c=await xml_1[_0x50e5e7(0x101)][_0x50e5e7(0x120)](_0x5dadd1);return prepareDeleteComponent[_0x54c5ec](_0x42de4c);}