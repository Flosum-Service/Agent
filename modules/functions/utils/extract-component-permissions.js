'use strict';const a107_0x41cb73=a107_0x33f1;function a107_0x1b06(){const _0x4733de=['apexPage','1.0','search','description','loginIpRanges','flow','buildObject','Builder','dataCategoryGroup','extractComponentPermissions','tab','470848shFSmF','14SuoYul','custom','Profile','hasActivationRequired','get','18SlUkqU','UTF-8','4245130vRznOd','__esModule','flowAccesses','toString','layoutAssignments','5235834jlEkEh','classAccesses','label','userPermissions','customMetadataTypeAccesses','tabSettings','5464448FuiCUY','isArray','mergeComponentPermissions','193566CXWgvr','categoryGroupVisibilities','recordType','includes','findIndex','externalDataSourceAccesses','layout','http://soap.sforce.com/2006/04/metadata','Xml','pageAccesses','(((.+)+)+)+$','length','1443448wrfAqb','707847WidOFI','xml2js','apply','parse','../../git/parsers/utils/xml','PermissionSet','push','defineProperty','content','profileActionOverrides','tabVisibilities','fieldPermissions','applicationVisibilities','recordTypeVisibilities','name','constructor','Component_Name__c','field'];a107_0x1b06=function(){return _0x4733de;};return a107_0x1b06();}(function(_0x10f8b1,_0x6c3ccc){const _0x5f39b3=a107_0x33f1,_0x103ff0=_0x10f8b1();while(!![]){try{const _0x485aa0=-parseInt(_0x5f39b3(0x20e))/0x1+parseInt(_0x5f39b3(0x20f))/0x2*(parseInt(_0x5f39b3(0x1e4))/0x3)+parseInt(_0x5f39b3(0x1f0))/0x4+parseInt(_0x5f39b3(0x1d6))/0x5+parseInt(_0x5f39b3(0x1db))/0x6+-parseInt(_0x5f39b3(0x1f1))/0x7+parseInt(_0x5f39b3(0x1e1))/0x8*(-parseInt(_0x5f39b3(0x1d4))/0x9);if(_0x485aa0===_0x6c3ccc)break;else _0x103ff0['push'](_0x103ff0['shift']());}catch(_0x5e45cd){_0x103ff0['push'](_0x103ff0['shift']());}}}(a107_0x1b06,0x91884));Object[a107_0x41cb73(0x1f8)](exports,a107_0x41cb73(0x1d7),{'value':!![]}),exports[a107_0x41cb73(0x1e3)]=exports[a107_0x41cb73(0x20c)]=void 0x0;const xml_1=require(a107_0x41cb73(0x1f5)),xml2js_1=require(a107_0x41cb73(0x1f2)),PERMISSIONS_MAP=new Map([[a107_0x41cb73(0x1dc),'apexClass'],[a107_0x41cb73(0x1ed),a107_0x41cb73(0x203)],[a107_0x41cb73(0x1e0),a107_0x41cb73(0x20d)],[a107_0x41cb73(0x1fb),a107_0x41cb73(0x20d)],[a107_0x41cb73(0x1fa),a107_0x41cb73(0x1f9)],[a107_0x41cb73(0x1e5),a107_0x41cb73(0x20b)],['objectPermissions','object'],[a107_0x41cb73(0x1df),a107_0x41cb73(0x1ff)],['customSettingAccesses',a107_0x41cb73(0x1ff)],[a107_0x41cb73(0x1fd),'application'],[a107_0x41cb73(0x1e9),'externalDataSource'],['customPermissions',a107_0x41cb73(0x1ff)],[a107_0x41cb73(0x1d8),a107_0x41cb73(0x208)],['layoutAssignments',a107_0x41cb73(0x1ea)],[a107_0x41cb73(0x1fe),a107_0x41cb73(0x1e6)],[a107_0x41cb73(0x1fc),a107_0x41cb73(0x202)]]);var UNREMOVE_PERMISSION;(function(_0x16c792){const _0x31cb58=a107_0x41cb73,_0x61d147=(function(){let _0xe447bf=!![];return function(_0x58ca56,_0x578518){const _0x1ff3a1=_0xe447bf?function(){const _0x1313a2=a107_0x33f1;if(_0x578518){const _0x5793f8=_0x578518[_0x1313a2(0x1f3)](_0x58ca56,arguments);return _0x578518=null,_0x5793f8;}}:function(){};return _0xe447bf=![],_0x1ff3a1;};}()),_0x20027b=_0x61d147(this,function(){const _0x1e2e07=a107_0x33f1;return _0x20027b['toString']()[_0x1e2e07(0x205)](_0x1e2e07(0x1ee))[_0x1e2e07(0x1d9)]()[_0x1e2e07(0x200)](_0x20027b)[_0x1e2e07(0x205)]('(((.+)+)+)+$');});_0x20027b(),_0x16c792[_0x31cb58(0x1d2)]=_0x31cb58(0x1d2),_0x16c792['label']=_0x31cb58(0x1dd),_0x16c792[_0x31cb58(0x210)]=_0x31cb58(0x210),_0x16c792[_0x31cb58(0x206)]=_0x31cb58(0x206);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x2391c2=>{const _0xee728e=a107_0x41cb73;var _0xc44d4a,_0x2ef921;return(_0xc44d4a=_0x2391c2[_0xee728e(0x1d1)])===null||_0xc44d4a===void 0x0?!![]:delete _0xc44d4a['userPermissions'],(_0x2ef921=_0x2391c2[_0xee728e(0x1d1)])===null||_0x2ef921===void 0x0?!![]:delete _0x2ef921['loginIpRanges'],_0x2391c2;},'PermissionSet':_0x153956=>{const _0x8fbc7b=a107_0x41cb73;var _0x5a56ff,_0x1c5fa5;return(_0x5a56ff=_0x153956[_0x8fbc7b(0x1f6)])===null||_0x5a56ff===void 0x0?!![]:delete _0x5a56ff[_0x8fbc7b(0x1de)],(_0x1c5fa5=_0x153956[_0x8fbc7b(0x1f6)])===null||_0x1c5fa5===void 0x0?!![]:delete _0x1c5fa5[_0x8fbc7b(0x207)],_0x153956;}};async function extractComponentPermissions(_0x5b4a36,_0x1b4d86,_0x479c7d){const _0x4baca4=a107_0x41cb73,_0x6552b2=await getReadyComponent(_0x5b4a36,_0x479c7d),_0x508520=_0x6552b2[_0x479c7d];if(!_0x508520)return _0x6552b2;for(const _0x80c7b2 in _0x508520){if(UNREMOVE_PERMISSION[_0x80c7b2])continue;const _0x27bd69=_0x508520[_0x80c7b2],_0xf68775=getValidPermission(_0x27bd69,_0x80c7b2,_0x1b4d86);_0xf68775[_0x4baca4(0x1ef)]?_0x508520[_0x80c7b2]=_0xf68775:delete _0x508520[_0x80c7b2];}return _0x6552b2[_0x479c7d]['$']={'xmlns':_0x4baca4(0x1eb)},_0x6552b2;}exports[a107_0x41cb73(0x20c)]=extractComponentPermissions;async function mergeComponentPermissions(_0x5b537e,_0x5d349e,_0x1a4706){const _0x1616d4=a107_0x41cb73,_0x2c8754=await xml_1[_0x1616d4(0x1ec)][_0x1616d4(0x1f4)](_0x5b537e),_0x32c1e5=await xml_1[_0x1616d4(0x1ec)][_0x1616d4(0x1f4)](_0x5d349e),_0x4ed625=_0x2c8754[_0x1a4706],_0xb5aa5b=_0x32c1e5[_0x1a4706];if(!_0x4ed625)return _0x5d349e;for(const _0x3c6af1 in _0x4ed625){const _0x4f3d9f=PERMISSIONS_MAP['get'](_0x3c6af1);if(!_0x4f3d9f||!_0xb5aa5b[_0x3c6af1]){_0xb5aa5b[_0x3c6af1]=_0x4ed625[_0x3c6af1];continue;}for(const _0x37cab5 of _0x4ed625[_0x3c6af1]){const _0x2b12e7=_0xb5aa5b[_0x3c6af1][_0x1616d4(0x1e8)](_0x5e359e=>_0x37cab5[_0x4f3d9f][0x0]===_0x5e359e[_0x4f3d9f][0x0]);_0x2b12e7!==-0x1?_0xb5aa5b[_0x3c6af1][_0x2b12e7]=_0x37cab5:_0xb5aa5b[_0x3c6af1][_0x1616d4(0x1f7)](_0x37cab5);}}_0x32c1e5[_0x1a4706]['$']={'xmlns':'http://soap.sforce.com/2006/04/metadata'};const _0x475c52=new xml2js_1[(_0x1616d4(0x20a))]({'xmldec':{'version':_0x1616d4(0x204),'encoding':_0x1616d4(0x1d5)}});return _0x475c52[_0x1616d4(0x209)](_0x32c1e5);}exports['mergeComponentPermissions']=mergeComponentPermissions;function getValidPermission(_0x4e7d4f,_0x1f2b33,_0x365cad){const _0x37df01=a107_0x41cb73;let _0x444672=[];if(_0x1f2b33===_0x37df01(0x1da))_0x444672=getValidLayout(_0x4e7d4f,_0x1f2b33,_0x365cad);else{const _0x142954=Array['isArray'](_0x4e7d4f)?_0x4e7d4f:[_0x4e7d4f];for(const _0x3f6c61 of _0x142954){isValidPermission(_0x3f6c61,_0x1f2b33,_0x365cad)&&_0x444672['push'](_0x3f6c61);}}return _0x444672;}function isValidPermission(_0xdf8166,_0x238a04,_0x538de3){const _0x52e245=a107_0x41cb73,_0x24f6a3=PERMISSIONS_MAP[_0x52e245(0x1d3)](_0x238a04);return _0xdf8166[_0x24f6a3]&&_0x538de3['some'](_0x5b1b11=>_0x5b1b11['Component__r'][_0x52e245(0x201)][_0x52e245(0x1e7)](_0xdf8166[_0x24f6a3]));}function getValidLayout(_0x1d954c,_0x34e02c,_0x3471f0){const _0x3bb911=a107_0x41cb73,_0x3a2f49=[],_0xa4ab19=Array[_0x3bb911(0x1e2)](_0x1d954c)?_0x1d954c:[_0x1d954c];for(const _0x6a1d7 in _0xa4ab19){isValidPermission(_0xa4ab19[_0x6a1d7],_0x34e02c,_0x3471f0)&&(!_0xa4ab19[_0x6a1d7]['recordType']&&_0x3a2f49[_0x3bb911(0x1f7)](_0xa4ab19[_0x6a1d7]),isValidPermission(_0xa4ab19[_0x6a1d7],_0x3bb911(0x1fe),_0x3471f0)&&_0x3a2f49[_0x3bb911(0x1f7)](_0xa4ab19[_0x6a1d7]));}return _0x3a2f49;}function a107_0x33f1(_0x1346cf,_0x29b61f){const _0x29cb94=a107_0x1b06();return a107_0x33f1=function(_0x53db12,_0x5113ba){_0x53db12=_0x53db12-0x1d1;let _0x1b0638=_0x29cb94[_0x53db12];return _0x1b0638;},a107_0x33f1(_0x1346cf,_0x29b61f);}async function getReadyComponent(_0x1e6c7b,_0x438255){const _0x24246c=a107_0x41cb73,_0x4501aa=await xml_1['Xml'][_0x24246c(0x1f4)](_0x1e6c7b);return prepareDeleteComponent[_0x438255](_0x4501aa);}