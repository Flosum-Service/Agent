'use strict';const a110_0x3097c9=a110_0x2d1c;(function(_0x4e4da9,_0x1bebab){const _0x30383d=a110_0x2d1c,_0x1dc837=_0x4e4da9();while(!![]){try{const _0x1c2b60=-parseInt(_0x30383d(0xac))/0x1+parseInt(_0x30383d(0xdf))/0x2+parseInt(_0x30383d(0xe9))/0x3+parseInt(_0x30383d(0xbd))/0x4+-parseInt(_0x30383d(0xe2))/0x5+-parseInt(_0x30383d(0xb8))/0x6*(-parseInt(_0x30383d(0xdc))/0x7)+-parseInt(_0x30383d(0xca))/0x8*(-parseInt(_0x30383d(0xef))/0x9);if(_0x1c2b60===_0x1bebab)break;else _0x1dc837['push'](_0x1dc837['shift']());}catch(_0x437005){_0x1dc837['push'](_0x1dc837['shift']());}}}(a110_0x1eed,0x8f457));Object[a110_0x3097c9(0xec)](exports,a110_0x3097c9(0xd8),{'value':!![]}),exports['mergeComponentPermissions']=exports['extractComponentPermissions']=void 0x0;const xml_1=require(a110_0x3097c9(0xe5)),xml2js_1=require(a110_0x3097c9(0xae)),PERMISSIONS_MAP=new Map([[a110_0x3097c9(0xea),'apexClass'],[a110_0x3097c9(0xcb),a110_0x3097c9(0xdd)],[a110_0x3097c9(0xee),a110_0x3097c9(0xbf)],[a110_0x3097c9(0xe8),a110_0x3097c9(0xbf)],[a110_0x3097c9(0xc4),a110_0x3097c9(0xc8)],[a110_0x3097c9(0xaf),a110_0x3097c9(0xd6)],[a110_0x3097c9(0xd1),a110_0x3097c9(0xbc)],[a110_0x3097c9(0xe1),'name'],[a110_0x3097c9(0xe4),a110_0x3097c9(0xc5)],[a110_0x3097c9(0xc3),a110_0x3097c9(0xba)],[a110_0x3097c9(0xd3),a110_0x3097c9(0xc1)],['customPermissions',a110_0x3097c9(0xc5)],[a110_0x3097c9(0xb1),a110_0x3097c9(0xbb)],[a110_0x3097c9(0xf0),a110_0x3097c9(0xb6)],['recordTypeVisibilities',a110_0x3097c9(0xd9)],[a110_0x3097c9(0xb9),a110_0x3097c9(0xe6)]]);var UNREMOVE_PERMISSION;(function(_0x744a4a){const _0x60a9b8=a110_0x3097c9,_0x1706ed=(function(){let _0x5ad151=!![];return function(_0xc01d7e,_0x513d76){const _0x32f47b=_0x5ad151?function(){const _0x3450cc=a110_0x2d1c;if(_0x513d76){const _0xd484eb=_0x513d76[_0x3450cc(0xda)](_0xc01d7e,arguments);return _0x513d76=null,_0xd484eb;}}:function(){};return _0x5ad151=![],_0x32f47b;};}()),_0x31281d=_0x1706ed(this,function(){const _0x4a291a=a110_0x2d1c;return _0x31281d['toString']()[_0x4a291a(0xeb)](_0x4a291a(0xd5))[_0x4a291a(0xc0)]()[_0x4a291a(0xed)](_0x31281d)[_0x4a291a(0xeb)](_0x4a291a(0xd5));});_0x31281d(),_0x744a4a[_0x60a9b8(0xf1)]='hasActivationRequired',_0x744a4a[_0x60a9b8(0xb0)]='label',_0x744a4a['custom']=_0x60a9b8(0xe3),_0x744a4a[_0x60a9b8(0xb5)]=_0x60a9b8(0xb5);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x28ed36=>{const _0x5cb409=a110_0x3097c9;var _0x3705ab,_0x413769;return(_0x3705ab=_0x28ed36[_0x5cb409(0xd4)])===null||_0x3705ab===void 0x0?!![]:delete _0x3705ab[_0x5cb409(0xc6)],(_0x413769=_0x28ed36[_0x5cb409(0xd4)])===null||_0x413769===void 0x0?!![]:delete _0x413769[_0x5cb409(0xe7)],_0x28ed36;},'PermissionSet':_0x5a739e=>{const _0x2c9d07=a110_0x3097c9;var _0x3f5233,_0x4eed86;return(_0x3f5233=_0x5a739e['PermissionSet'])===null||_0x3f5233===void 0x0?!![]:delete _0x3f5233[_0x2c9d07(0xc6)],(_0x4eed86=_0x5a739e['PermissionSet'])===null||_0x4eed86===void 0x0?!![]:delete _0x4eed86['loginIpRanges'],_0x5a739e;}};async function extractComponentPermissions(_0x5cdd96,_0x52b10e,_0x22d994){const _0x57166c=a110_0x3097c9,_0x157f25=await getReadyComponent(_0x5cdd96,_0x22d994),_0x4092d5=_0x157f25[_0x22d994];if(!_0x4092d5)return _0x157f25;for(const _0x51aec8 in _0x4092d5){if(UNREMOVE_PERMISSION[_0x51aec8])continue;const _0x2b7328=_0x4092d5[_0x51aec8],_0x5bb5c4=getValidPermission(_0x2b7328,_0x51aec8,_0x52b10e);_0x5bb5c4[_0x57166c(0xd7)]?_0x4092d5[_0x51aec8]=_0x5bb5c4:delete _0x4092d5[_0x51aec8];}return _0x157f25[_0x22d994]['$']={'xmlns':_0x57166c(0xbe)},_0x157f25;}exports[a110_0x3097c9(0xcd)]=extractComponentPermissions;async function mergeComponentPermissions(_0xa3d828,_0x31af82,_0x335429){const _0x3a4b24=a110_0x3097c9,_0x337f49=await xml_1['Xml'][_0x3a4b24(0xcc)](_0xa3d828),_0x51edc7=await xml_1[_0x3a4b24(0xc9)][_0x3a4b24(0xcc)](_0x31af82),_0x2404e0=_0x337f49[_0x335429],_0x3a2fcb=_0x51edc7[_0x335429];if(!_0x2404e0)return _0x31af82;for(const _0x1febc7 in _0x2404e0){const _0x504948=PERMISSIONS_MAP[_0x3a4b24(0xde)](_0x1febc7);if(!_0x504948||!_0x3a2fcb[_0x1febc7]){_0x3a2fcb[_0x1febc7]=_0x2404e0[_0x1febc7];continue;}for(const _0x3df12e of _0x2404e0[_0x1febc7]){const _0xad7146=_0x3a2fcb[_0x1febc7][_0x3a4b24(0xb4)](_0x365178=>_0x3df12e[_0x504948][0x0]===_0x365178[_0x504948][0x0]);_0xad7146!==-0x1?_0x3a2fcb[_0x1febc7][_0xad7146]=_0x3df12e:_0x3a2fcb[_0x1febc7][_0x3a4b24(0xb2)](_0x3df12e);}}_0x51edc7[_0x335429]['$']={'xmlns':_0x3a4b24(0xbe)};const _0x1270d7=new xml2js_1[(_0x3a4b24(0xce))]({'xmldec':{'version':_0x3a4b24(0xcf),'encoding':_0x3a4b24(0xd0)}});return _0x1270d7[_0x3a4b24(0xc2)](_0x51edc7);}exports[a110_0x3097c9(0xb7)]=mergeComponentPermissions;function a110_0x1eed(){const _0x31fa9c=['10712YUeQJz','includes','customMetadataTypeAccesses','2453875VpHeEb','custom','customSettingAccesses','../../git/parsers/utils/xml','field','loginIpRanges','tabVisibilities','1073289fSfinM','classAccesses','search','defineProperty','constructor','tabSettings','1251VVQvFo','layoutAssignments','hasActivationRequired','1103369kjAYzh','some','xml2js','categoryGroupVisibilities','label','flowAccesses','push','Component_Name__c','findIndex','description','layout','mergeComponentPermissions','66474mXVAru','fieldPermissions','application','flow','object','2778028DGemnl','http://soap.sforce.com/2006/04/metadata','tab','toString','externalDataSource','buildObject','applicationVisibilities','profileActionOverrides','name','userPermissions','Component__r','content','Xml','64016TDnOOg','pageAccesses','parse','extractComponentPermissions','Builder','1.0','UTF-8','objectPermissions','isArray','externalDataSourceAccesses','Profile','(((.+)+)+)+$','dataCategoryGroup','length','__esModule','recordType','apply','recordTypeVisibilities','7YQwTXz','apexPage','get'];a110_0x1eed=function(){return _0x31fa9c;};return a110_0x1eed();}function getValidPermission(_0x4ac1ad,_0x473d85,_0x459d99){const _0x403df0=a110_0x3097c9;let _0x28d90f=[];if(_0x473d85==='layoutAssignments')_0x28d90f=getValidLayout(_0x4ac1ad,_0x473d85,_0x459d99);else{const _0x1aa784=Array[_0x403df0(0xd2)](_0x4ac1ad)?_0x4ac1ad:[_0x4ac1ad];for(const _0x3b89b5 of _0x1aa784){isValidPermission(_0x3b89b5,_0x473d85,_0x459d99)&&_0x28d90f[_0x403df0(0xb2)](_0x3b89b5);}}return _0x28d90f;}function isValidPermission(_0x370595,_0x13f6b9,_0x19e76b){const _0xe9a8c6=a110_0x3097c9,_0x4f5ab4=PERMISSIONS_MAP[_0xe9a8c6(0xde)](_0x13f6b9);return _0x370595[_0x4f5ab4]&&_0x19e76b[_0xe9a8c6(0xad)](_0x24c845=>_0x24c845[_0xe9a8c6(0xc7)][_0xe9a8c6(0xb3)][_0xe9a8c6(0xe0)](_0x370595[_0x4f5ab4]));}function a110_0x2d1c(_0xe24b6,_0xe14cfa){const _0x448b20=a110_0x1eed();return a110_0x2d1c=function(_0x377f26,_0x54e212){_0x377f26=_0x377f26-0xac;let _0x1eedae=_0x448b20[_0x377f26];return _0x1eedae;},a110_0x2d1c(_0xe24b6,_0xe14cfa);}function getValidLayout(_0x5ed9be,_0x24a6b2,_0x466c82){const _0xc2ae68=a110_0x3097c9,_0x5fa8dc=[],_0x4a2bd4=Array[_0xc2ae68(0xd2)](_0x5ed9be)?_0x5ed9be:[_0x5ed9be];for(const _0x4ee39c in _0x4a2bd4){isValidPermission(_0x4a2bd4[_0x4ee39c],_0x24a6b2,_0x466c82)&&(!_0x4a2bd4[_0x4ee39c]['recordType']&&_0x5fa8dc[_0xc2ae68(0xb2)](_0x4a2bd4[_0x4ee39c]),isValidPermission(_0x4a2bd4[_0x4ee39c],_0xc2ae68(0xdb),_0x466c82)&&_0x5fa8dc[_0xc2ae68(0xb2)](_0x4a2bd4[_0x4ee39c]));}return _0x5fa8dc;}async function getReadyComponent(_0x28088d,_0x1dda77){const _0x56833c=a110_0x3097c9,_0x40b43b=await xml_1[_0x56833c(0xc9)]['parse'](_0x28088d);return prepareDeleteComponent[_0x1dda77](_0x40b43b);}