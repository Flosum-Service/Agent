'use strict';function a92_0x15cc(_0x4846d6,_0x53ace4){const _0x4f5dbe=a92_0x2864();return a92_0x15cc=function(_0x1bb035,_0x2a956d){_0x1bb035=_0x1bb035-0x1a6;let _0x2864b2=_0x4f5dbe[_0x1bb035];return _0x2864b2;},a92_0x15cc(_0x4846d6,_0x53ace4);}const a92_0x5ae553=a92_0x15cc;(function(_0x24a476,_0x8f0615){const _0x3d9212=a92_0x15cc,_0x49ec5c=_0x24a476();while(!![]){try{const _0x52e847=-parseInt(_0x3d9212(0x1cc))/0x1+-parseInt(_0x3d9212(0x1bf))/0x2+parseInt(_0x3d9212(0x1db))/0x3*(parseInt(_0x3d9212(0x1b3))/0x4)+-parseInt(_0x3d9212(0x1b1))/0x5+parseInt(_0x3d9212(0x1bb))/0x6+-parseInt(_0x3d9212(0x1dd))/0x7+-parseInt(_0x3d9212(0x1c3))/0x8*(-parseInt(_0x3d9212(0x1c7))/0x9);if(_0x52e847===_0x8f0615)break;else _0x49ec5c['push'](_0x49ec5c['shift']());}catch(_0x58bb69){_0x49ec5c['push'](_0x49ec5c['shift']());}}}(a92_0x2864,0x769e8));Object['defineProperty'](exports,a92_0x5ae553(0x1ab),{'value':!![]}),exports[a92_0x5ae553(0x1c5)]=exports[a92_0x5ae553(0x1cd)]=void 0x0;const xml_1=require(a92_0x5ae553(0x1aa)),xml2js_1=require(a92_0x5ae553(0x1bc)),PERMISSIONS_MAP=new Map([[a92_0x5ae553(0x1d8),a92_0x5ae553(0x1ae)],['pageAccesses',a92_0x5ae553(0x1c2)],[a92_0x5ae553(0x1b4),a92_0x5ae553(0x1b5)],['tabVisibilities','tab'],[a92_0x5ae553(0x1b7),a92_0x5ae553(0x1c4)],['categoryGroupVisibilities','dataCategoryGroup'],[a92_0x5ae553(0x1ca),a92_0x5ae553(0x1e0)],[a92_0x5ae553(0x1bd),a92_0x5ae553(0x1c6)],[a92_0x5ae553(0x1d4),'name'],['applicationVisibilities',a92_0x5ae553(0x1dc)],[a92_0x5ae553(0x1b8),a92_0x5ae553(0x1da)],[a92_0x5ae553(0x1d7),a92_0x5ae553(0x1c6)],[a92_0x5ae553(0x1df),a92_0x5ae553(0x1cf)],['layoutAssignments',a92_0x5ae553(0x1ac)],[a92_0x5ae553(0x1d6),a92_0x5ae553(0x1c0)],['fieldPermissions',a92_0x5ae553(0x1af)]]);var UNREMOVE_PERMISSION;function a92_0x2864(){const _0x3b4ddc=['buildObject','description','Component_Name__c','(((.+)+)+)+$','Profile','includes','PermissionSet','../../git/parsers/utils/xml','__esModule','layout','hasActivationRequired','apexClass','field','get','1408215yvjUIs','length','2036EsPTye','tabSettings','tab','search','profileActionOverrides','externalDataSourceAccesses','http://soap.sforce.com/2006/04/metadata','UTF-8','4261704jLKaLh','xml2js','customMetadataTypeAccesses','Builder','1385468oCumSS','recordType','toString','apexPage','13969952KMmcjD','content','mergeComponentPermissions','name','9PlkFGY','some','findIndex','objectPermissions','custom','608522YjiuuU','extractComponentPermissions','isArray','flow','1.0','constructor','label','push','customSettingAccesses','loginIpRanges','recordTypeVisibilities','customPermissions','classAccesses','userPermissions','externalDataSource','2073acrBHw','application','5176388ZcINbC','parse','flowAccesses','object','Xml'];a92_0x2864=function(){return _0x3b4ddc;};return a92_0x2864();}(function(_0x5096d2){const _0x3202f2=a92_0x5ae553,_0x332810=(function(){let _0x320984=!![];return function(_0x133c9f,_0x428f89){const _0x56419e=_0x320984?function(){if(_0x428f89){const _0x54b943=_0x428f89['apply'](_0x133c9f,arguments);return _0x428f89=null,_0x54b943;}}:function(){};return _0x320984=![],_0x56419e;};}()),_0x534576=_0x332810(this,function(){const _0x1dfe0e=a92_0x15cc;return _0x534576[_0x1dfe0e(0x1c1)]()[_0x1dfe0e(0x1b6)](_0x1dfe0e(0x1a6))[_0x1dfe0e(0x1c1)]()[_0x1dfe0e(0x1d1)](_0x534576)['search'](_0x1dfe0e(0x1a6));});_0x534576(),_0x5096d2[_0x3202f2(0x1ad)]='hasActivationRequired',_0x5096d2[_0x3202f2(0x1d2)]=_0x3202f2(0x1d2),_0x5096d2[_0x3202f2(0x1cb)]=_0x3202f2(0x1cb),_0x5096d2[_0x3202f2(0x1e3)]=_0x3202f2(0x1e3);}(UNREMOVE_PERMISSION||(UNREMOVE_PERMISSION={})));const prepareDeleteComponent={'Profile':_0x234212=>{const _0x208cf6=a92_0x5ae553;var _0x4e1b1c,_0x14847e;return(_0x4e1b1c=_0x234212[_0x208cf6(0x1a7)])===null||_0x4e1b1c===void 0x0?!![]:delete _0x4e1b1c[_0x208cf6(0x1d9)],(_0x14847e=_0x234212[_0x208cf6(0x1a7)])===null||_0x14847e===void 0x0?!![]:delete _0x14847e[_0x208cf6(0x1d5)],_0x234212;},'PermissionSet':_0x3dcc0b=>{const _0x5374bb=a92_0x5ae553;var _0x43e6aa,_0x2e7e47;return(_0x43e6aa=_0x3dcc0b[_0x5374bb(0x1a9)])===null||_0x43e6aa===void 0x0?!![]:delete _0x43e6aa['userPermissions'],(_0x2e7e47=_0x3dcc0b[_0x5374bb(0x1a9)])===null||_0x2e7e47===void 0x0?!![]:delete _0x2e7e47['loginIpRanges'],_0x3dcc0b;}};async function extractComponentPermissions(_0xa5fb78,_0xd68066,_0x37aa65){const _0x11543c=a92_0x5ae553,_0x36d0c=await getReadyComponent(_0xa5fb78,_0x37aa65),_0x20e787=_0x36d0c[_0x37aa65];if(!_0x20e787)return _0x36d0c;for(const _0x2a1fc4 in _0x20e787){if(UNREMOVE_PERMISSION[_0x2a1fc4])continue;const _0x2ec0c7=_0x20e787[_0x2a1fc4],_0x4ba124=getValidPermission(_0x2ec0c7,_0x2a1fc4,_0xd68066);_0x4ba124[_0x11543c(0x1b2)]?_0x20e787[_0x2a1fc4]=_0x4ba124:delete _0x20e787[_0x2a1fc4];}return _0x36d0c[_0x37aa65]['$']={'xmlns':'http://soap.sforce.com/2006/04/metadata'},_0x36d0c;}exports[a92_0x5ae553(0x1cd)]=extractComponentPermissions;async function mergeComponentPermissions(_0x1c7d6c,_0x227381,_0x5a20df){const _0x7c648c=a92_0x5ae553,_0x2cc984=await xml_1['Xml']['parse'](_0x1c7d6c),_0x5e9eb8=await xml_1['Xml']['parse'](_0x227381),_0x1895fc=_0x2cc984[_0x5a20df],_0x1ab8ca=_0x5e9eb8[_0x5a20df];if(!_0x1895fc)return _0x227381;for(const _0x350c9b in _0x1895fc){const _0x2345dd=PERMISSIONS_MAP[_0x7c648c(0x1b0)](_0x350c9b);if(!_0x2345dd||!_0x1ab8ca[_0x350c9b]){_0x1ab8ca[_0x350c9b]=_0x1895fc[_0x350c9b];continue;}for(const _0x298349 of _0x1895fc[_0x350c9b]){const _0x473867=_0x1ab8ca[_0x350c9b][_0x7c648c(0x1c9)](_0x253e19=>_0x298349[_0x2345dd][0x0]===_0x253e19[_0x2345dd][0x0]);_0x473867!==-0x1?_0x1ab8ca[_0x350c9b][_0x473867]=_0x298349:_0x1ab8ca[_0x350c9b][_0x7c648c(0x1d3)](_0x298349);}}_0x5e9eb8[_0x5a20df]['$']={'xmlns':_0x7c648c(0x1b9)};const _0x22cd35=new xml2js_1[(_0x7c648c(0x1be))]({'xmldec':{'version':_0x7c648c(0x1d0),'encoding':_0x7c648c(0x1ba)}});return _0x22cd35[_0x7c648c(0x1e2)](_0x5e9eb8);}exports[a92_0x5ae553(0x1c5)]=mergeComponentPermissions;function getValidPermission(_0x1499f2,_0x2d2066,_0x4a76fe){const _0x27f1ca=a92_0x5ae553;let _0x1ed7e8=[];if(_0x2d2066==='layoutAssignments')_0x1ed7e8=getValidLayout(_0x1499f2,_0x2d2066,_0x4a76fe);else{const _0x4b2086=Array[_0x27f1ca(0x1ce)](_0x1499f2)?_0x1499f2:[_0x1499f2];for(const _0x223031 of _0x4b2086){isValidPermission(_0x223031,_0x2d2066,_0x4a76fe)&&_0x1ed7e8['push'](_0x223031);}}return _0x1ed7e8;}function isValidPermission(_0x267072,_0x2385cb,_0x29687f){const _0x2f21af=a92_0x5ae553,_0x308971=PERMISSIONS_MAP['get'](_0x2385cb);return _0x267072[_0x308971]&&_0x29687f[_0x2f21af(0x1c8)](_0x370a24=>_0x370a24['Component__r'][_0x2f21af(0x1e4)][_0x2f21af(0x1a8)](_0x267072[_0x308971]));}function getValidLayout(_0x448685,_0x869716,_0xe54fd0){const _0xb930a1=a92_0x5ae553,_0x2fa38e=[],_0x256845=Array[_0xb930a1(0x1ce)](_0x448685)?_0x448685:[_0x448685];for(const _0x1aaa4e in _0x256845){isValidPermission(_0x256845[_0x1aaa4e],_0x869716,_0xe54fd0)&&(!_0x256845[_0x1aaa4e][_0xb930a1(0x1c0)]&&_0x2fa38e[_0xb930a1(0x1d3)](_0x256845[_0x1aaa4e]),isValidPermission(_0x256845[_0x1aaa4e],_0xb930a1(0x1d6),_0xe54fd0)&&_0x2fa38e['push'](_0x256845[_0x1aaa4e]));}return _0x2fa38e;}async function getReadyComponent(_0x206b34,_0x44f667){const _0x4e5d07=a92_0x5ae553,_0xf8e3cd=await xml_1[_0x4e5d07(0x1e1)][_0x4e5d07(0x1de)](_0x206b34);return prepareDeleteComponent[_0x44f667](_0xf8e3cd);}