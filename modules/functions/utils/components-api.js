function a59_0x32c9(_0x4d8222,_0xb62784){const _0x31e782=a59_0x1333();return a59_0x32c9=function(_0x5797e0,_0x4b4126){_0x5797e0=_0x5797e0-0x110;let _0x1333a4=_0x31e782[_0x5797e0];return _0x1333a4;},a59_0x32c9(_0x4d8222,_0xb62784);}const a59_0x47b355=a59_0x32c9;(function(_0x10ea9d,_0x4a1e67){const _0x5d6a5d=a59_0x32c9,_0x2dbd5c=_0x10ea9d();while(!![]){try{const _0x5c86cc=parseInt(_0x5d6a5d(0x135))/0x1*(parseInt(_0x5d6a5d(0x146))/0x2)+-parseInt(_0x5d6a5d(0x11d))/0x3+-parseInt(_0x5d6a5d(0x119))/0x4+-parseInt(_0x5d6a5d(0x12a))/0x5*(parseInt(_0x5d6a5d(0x125))/0x6)+-parseInt(_0x5d6a5d(0x132))/0x7*(parseInt(_0x5d6a5d(0x113))/0x8)+parseInt(_0x5d6a5d(0x11a))/0x9*(parseInt(_0x5d6a5d(0x11b))/0xa)+parseInt(_0x5d6a5d(0x137))/0xb;if(_0x5c86cc===_0x4a1e67)break;else _0x2dbd5c['push'](_0x2dbd5c['shift']());}catch(_0x32fa18){_0x2dbd5c['push'](_0x2dbd5c['shift']());}}}(a59_0x1333,0x3759c));const a59_0x4b4126=(function(){let _0x4178e3=!![];return function(_0x5edcd3,_0x763f16){const _0x2797f1=_0x4178e3?function(){if(_0x763f16){const _0x1c603b=_0x763f16['apply'](_0x5edcd3,arguments);return _0x763f16=null,_0x1c603b;}}:function(){};return _0x4178e3=![],_0x2797f1;};}()),a59_0x5797e0=a59_0x4b4126(this,function(){const _0xfd9d89=a59_0x32c9;return a59_0x5797e0[_0xfd9d89(0x11c)]()[_0xfd9d89(0x127)](_0xfd9d89(0x145))['toString']()[_0xfd9d89(0x136)](a59_0x5797e0)[_0xfd9d89(0x127)](_0xfd9d89(0x145));});a59_0x5797e0();function a59_0x1333(){const _0x1f0998=['extractFieldsFromRecord','removeNamespacePrefix','BodyLength','Component_Type__c','get','MAX_ZIP_SIZE','Component__r.','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20Id\x20IN\x20(','(((.+)+)+)+$','6hQEmpN','/retrieveAttachments/','map','default','__importDefault','Component_Name__c,\x20','records','105784gafKxv','push','/query/','/services/apexrest','ComponentsApi','fetchAttachments','1634876hvCNqS','386082MpKgwz','30eClEFZ','toString','1135713wbZwJW','__esModule','toBuffer','Component_Type__c\x0a\x20\x20\x20\x20\x20\x20FROM\x20','fetchAttachmentBody','retrieveAttachments','Component__r','chunkArray','10632VwPQZD','\x27,\x27','search','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20','getEntries','455JbvoYi','sort','fetchAttachmentsDetails','FLOSUM_NAMESPACE','length','arraybuffer','getData','Attachment','182DKSJbF','/services/data/','Body','1202yelwis','constructor','15254316cRMWUy','deleteFile','SALESFORCE_API_VERSION','../../../constants','adm-zip','base64'];a59_0x1333=function(){return _0x1f0998;};return a59_0x1333();}'use strict';var __importDefault=this&&this[a59_0x47b355(0x110)]||function(_0x230c5a){const _0x2c6ee2=a59_0x47b355;return _0x230c5a&&_0x230c5a[_0x2c6ee2(0x11e)]?_0x230c5a:{'default':_0x230c5a};};Object['defineProperty'](exports,a59_0x47b355(0x11e),{'value':!![]}),exports[a59_0x47b355(0x117)]=exports[a59_0x47b355(0x142)]=void 0x0;const utils_1=require('../../shared/utils'),constants_1=require(a59_0x47b355(0x13a)),flosum_naming_utils_1=require('../../git/salesforce/utils/flosum-naming.utils'),salesforce_request_1=require('./salesforce-request'),adm_zip_1=__importDefault(require(a59_0x47b355(0x13b))),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a59_0x47b355(0x134)];exports[a59_0x47b355(0x142)]=0x2100000;class ComponentsApi{static async[a59_0x47b355(0x12c)](_0xc6af0c,_0x507902){const _0x5f3eeb=a59_0x47b355,_0x485871=[],_0x562d96=(0x0,utils_1[_0x5f3eeb(0x124)])(_0x507902,CHUNK_QUERY_SIZE);for(const _0x48b772 of _0x562d96){const _0x2a25cd=_0x5f3eeb(0x144)+('\x27'+_0x48b772['join'](_0x5f3eeb(0x126))+'\x27')+')',{data:_0x15413a}=await _0xc6af0c[_0x5f3eeb(0x141)](_0x5f3eeb(0x133)+constants_1['SALESFORCE_API_VERSION']+_0x5f3eeb(0x115),{'params':{'q':_0x2a25cd}});_0x485871[_0x5f3eeb(0x114)](..._0x15413a['records']);}return _0x485871;}static async['fetchComponentsDetailsByComponentsHistory'](_0x31d775,_0x65cdf4){const _0x53780d=a59_0x47b355,_0x1ffe74=[],_0x305943=(0x0,utils_1[_0x53780d(0x124)])(_0x65cdf4,CHUNK_QUERY_SIZE);for(const _0x504a9a of _0x305943){const _0x3f0da1=_0x53780d(0x128)+constants_1['FLOSUM_NAMESPACE']+_0x53780d(0x143)+constants_1['FLOSUM_NAMESPACE']+_0x53780d(0x111)+constants_1[_0x53780d(0x12d)]+_0x53780d(0x143)+constants_1[_0x53780d(0x12d)]+_0x53780d(0x120)+constants_1['FLOSUM_NAMESPACE']+'Component_History__c\x0a\x20\x20\x20\x20\x20\x20WHERE\x20Id\x20IN\x20('+('\x27'+_0x504a9a['join'](_0x53780d(0x126))+'\x27')+')',{data:_0x3a88e0}=await _0x31d775[_0x53780d(0x141)](_0x53780d(0x133)+constants_1[_0x53780d(0x139)]+_0x53780d(0x115),{'params':{'q':_0x3f0da1}});_0x1ffe74[_0x53780d(0x114)](..._0x3a88e0[_0x53780d(0x112)]);}return _0x1ffe74;}static async[a59_0x47b355(0x118)](_0x180f2a,_0x3a55ef,_0x163108){const _0x37a3a8=a59_0x47b355,{data:_0x5f32cf}=await _0x180f2a['post'](_0x37a3a8(0x116)+salesforce_request_1['namespace']+_0x37a3a8(0x147),{'objectName':_0x37a3a8(0x131),'binaryFields':_0x3a55ef,'recordIds':_0x163108});return _0x5f32cf;}static async[a59_0x47b355(0x121)](_0x2160af,_0x3538f1){const _0x4ef66a=a59_0x47b355,{data:_0x240b37}=await _0x2160af['get'](_0x4ef66a(0x133)+constants_1[_0x4ef66a(0x139)]+'/sobjects/Attachment/'+_0x3538f1+'/body',{'responseType':_0x4ef66a(0x12f)});return _0x240b37;}static[a59_0x47b355(0x13e)](_0x356af3){const _0x5b9ddd=a59_0x47b355,_0x2d2834=_0x356af3[_0x5b9ddd(0x148)](_0x1ee653=>{const _0x2ffe25=_0x5b9ddd,_0xd751d8=(0x0,flosum_naming_utils_1[_0x2ffe25(0x13d)])(_0x1ee653,['Id',_0x2ffe25(0x123)]);return _0xd751d8[_0x2ffe25(0x123)]=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0xd751d8['Component__r'],['Component_Name__c',_0x2ffe25(0x140)]),_0xd751d8;});return _0x2d2834;}static async[a59_0x47b355(0x122)](_0x893832,_0x25e3ea){const _0x13d675=a59_0x47b355;let _0x393ec8=0x0,_0x32b29e=0x0,_0x5ab7b4=[];const _0x6c368e=[];for(const _0x4773bf of _0x893832){if(_0x4773bf['BodyLength']>REST_ATTACHMENT_MAX_SIZE){const _0x552fcd=await ComponentsApi[_0x13d675(0x121)](_0x25e3ea,_0x4773bf['Id']);_0x6c368e[_0x13d675(0x114)]({'id':_0x4773bf['Id'],'values':{'Body':_0x552fcd[_0x13d675(0x11c)](_0x13d675(0x13c))}});continue;}if(_0x4773bf[_0x13d675(0x13f)]+_0x393ec8>REST_ATTACHMENT_MAX_SIZE||_0x32b29e+0x1>=REST_ATTACHMENT_COUNT){const _0x3d359b=await ComponentsApi[_0x13d675(0x118)](_0x25e3ea,BINARY_FIELDS,_0x5ab7b4);_0x6c368e[_0x13d675(0x114)](..._0x3d359b),_0x5ab7b4=[],_0x393ec8=0x0,_0x32b29e=0x0;}_0x5ab7b4[_0x13d675(0x114)](_0x4773bf['Id']),_0x393ec8+=_0x4773bf[_0x13d675(0x13f)],_0x32b29e++;}if(_0x5ab7b4['length']){const _0x208589=await ComponentsApi['fetchAttachments'](_0x25e3ea,BINARY_FIELDS,_0x5ab7b4);_0x6c368e[_0x13d675(0x114)](..._0x208589);}return _0x6c368e;}static async['splitZip'](_0xa8cede,_0x44560b){const _0x2a4316=a59_0x47b355;var _0x33c245;const _0x8de278=_0xa8cede[_0x2a4316(0x129)]()['filter'](_0x3a343b=>!_0x3a343b['isDirectory'])[_0x2a4316(0x12b)]((_0x225baa,_0x1884b5)=>_0x225baa[_0x2a4316(0x130)]()[_0x2a4316(0x12e)]>_0x1884b5[_0x2a4316(0x130)]()[_0x2a4316(0x12e)]?-0x1:0x1),_0x516090=new adm_zip_1[(_0x2a4316(0x149))]();for(const {entryName:_0x172a81}of _0x8de278){const _0x36e2d1=(_0x33c245=_0xa8cede['getEntry'](_0x172a81))===null||_0x33c245===void 0x0?void 0x0:_0x33c245['getData']();_0x516090['addFile'](_0x172a81,_0x36e2d1),_0xa8cede[_0x2a4316(0x138)](_0x172a81);if(_0x44560b-_0x516090[_0x2a4316(0x11f)]()['toString'](_0x2a4316(0x13c))[_0x2a4316(0x12e)]<exports[_0x2a4316(0x142)])break;}return[_0xa8cede,_0x516090];}}exports[a59_0x47b355(0x117)]=ComponentsApi;