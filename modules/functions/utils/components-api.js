function a59_0x297a(_0x55ce1e,_0x5adc14){const _0x3de59d=a59_0x2566();return a59_0x297a=function(_0x5772b3,_0x4126e9){_0x5772b3=_0x5772b3-0xba;let _0x256661=_0x3de59d[_0x5772b3];return _0x256661;},a59_0x297a(_0x55ce1e,_0x5adc14);}const a59_0x532ec6=a59_0x297a;(function(_0x4f0347,_0x369d77){const _0x465dc0=a59_0x297a,_0x5e67e5=_0x4f0347();while(!![]){try{const _0xa090af=parseInt(_0x465dc0(0xd4))/0x1+parseInt(_0x465dc0(0xe1))/0x2*(parseInt(_0x465dc0(0xe0))/0x3)+-parseInt(_0x465dc0(0xc9))/0x4+parseInt(_0x465dc0(0xcf))/0x5*(parseInt(_0x465dc0(0xe4))/0x6)+parseInt(_0x465dc0(0xf0))/0x7*(parseInt(_0x465dc0(0xe6))/0x8)+parseInt(_0x465dc0(0xf8))/0x9*(parseInt(_0x465dc0(0xf5))/0xa)+-parseInt(_0x465dc0(0xcb))/0xb*(parseInt(_0x465dc0(0xbb))/0xc);if(_0xa090af===_0x369d77)break;else _0x5e67e5['push'](_0x5e67e5['shift']());}catch(_0x273d56){_0x5e67e5['push'](_0x5e67e5['shift']());}}}(a59_0x2566,0x237ef));const a59_0x4126e9=(function(){let _0x47ddc5=!![];return function(_0x1942d1,_0x51970c){const _0x240c28=_0x47ddc5?function(){const _0x294edc=a59_0x297a;if(_0x51970c){const _0x221228=_0x51970c[_0x294edc(0xc6)](_0x1942d1,arguments);return _0x51970c=null,_0x221228;}}:function(){};return _0x47ddc5=![],_0x240c28;};}()),a59_0x5772b3=a59_0x4126e9(this,function(){const _0x2baf0d=a59_0x297a;return a59_0x5772b3[_0x2baf0d(0xf2)]()['search'](_0x2baf0d(0xdf))[_0x2baf0d(0xf2)]()[_0x2baf0d(0xd3)](a59_0x5772b3)[_0x2baf0d(0xd9)](_0x2baf0d(0xdf));});a59_0x5772b3();'use strict';var __importDefault=this&&this[a59_0x532ec6(0xe5)]||function(_0x28d059){const _0x51ca20=a59_0x532ec6;return _0x28d059&&_0x28d059[_0x51ca20(0xd1)]?_0x28d059:{'default':_0x28d059};};Object['defineProperty'](exports,a59_0x532ec6(0xd1),{'value':!![]}),exports['ComponentsApi']=exports[a59_0x532ec6(0xeb)]=void 0x0;const utils_1=require(a59_0x532ec6(0xba)),constants_1=require(a59_0x532ec6(0xde)),flosum_naming_utils_1=require('../../git/salesforce/utils/flosum-naming.utils'),salesforce_request_1=require('./salesforce-request'),adm_zip_1=__importDefault(require('adm-zip')),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a59_0x532ec6(0xc8)];exports[a59_0x532ec6(0xeb)]=0x2100000;function a59_0x2566(){const _0x257d1f=['3DyeHVI','495064WyTwCt','fetchComponentsDetailsByComponentsHistory','filter','654hCEcqu','__importDefault','170032amnpkt','fetchAttachmentsDetails','getData','Component_History__c\x0a\x20\x20\x20\x20\x20\x20WHERE\x20Id\x20IN\x20(','Component__r.','MAX_ZIP_SIZE','get','Component_Name__c,\x20','/services/apexrest','BodyLength','7dvMAKY','arraybuffer','toString','fetchAttachments','chunkArray','15220jfiPsM','sort','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20','441NFuRUv','toBuffer','../../shared/utils','882468sXgRHI','ComponentsApi','base64','FLOSUM_NAMESPACE','Attachment','Component_Type__c','post','map','/query/','namespace','/services/data/','apply','splitZip','Body','915384bpEcjr','SALESFORCE_API_VERSION','44IPcZGr','join','getEntry','Component__r','11045AuNIrU','\x27,\x27','__esModule','/retrieveAttachments/','constructor','84248xILhtr','fetchAttachmentBody','push','length','addFile','search','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20Id\x20IN\x20(','isDirectory','removeNamespacePrefix','getEntries','../../../constants','(((.+)+)+)+$'];a59_0x2566=function(){return _0x257d1f;};return a59_0x2566();}class ComponentsApi{static async[a59_0x532ec6(0xe7)](_0x2eb9ca,_0x3a4c50){const _0x102099=a59_0x532ec6,_0x2d7ac1=[],_0x287bff=(0x0,utils_1[_0x102099(0xf4)])(_0x3a4c50,CHUNK_QUERY_SIZE);for(const _0x251467 of _0x287bff){const _0x3fda63=_0x102099(0xda)+('\x27'+_0x251467[_0x102099(0xcc)](_0x102099(0xd0))+'\x27')+')',{data:_0x33e445}=await _0x2eb9ca[_0x102099(0xec)](_0x102099(0xc5)+constants_1['SALESFORCE_API_VERSION']+_0x102099(0xc3),{'params':{'q':_0x3fda63}});_0x2d7ac1[_0x102099(0xd6)](..._0x33e445['records']);}return _0x2d7ac1;}static async[a59_0x532ec6(0xe2)](_0x3423c1,_0x1e1828){const _0x4a45e9=a59_0x532ec6,_0x377d7e=[],_0x16e09a=(0x0,utils_1['chunkArray'])(_0x1e1828,CHUNK_QUERY_SIZE);for(const _0x26b98d of _0x16e09a){const _0x3032b1=_0x4a45e9(0xf7)+constants_1[_0x4a45e9(0xbe)]+'Component__r.'+constants_1[_0x4a45e9(0xbe)]+_0x4a45e9(0xed)+constants_1[_0x4a45e9(0xbe)]+_0x4a45e9(0xea)+constants_1['FLOSUM_NAMESPACE']+'Component_Type__c\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+constants_1['FLOSUM_NAMESPACE']+_0x4a45e9(0xe9)+('\x27'+_0x26b98d[_0x4a45e9(0xcc)]('\x27,\x27')+'\x27')+')',{data:_0x100aae}=await _0x3423c1[_0x4a45e9(0xec)]('/services/data/'+constants_1[_0x4a45e9(0xca)]+_0x4a45e9(0xc3),{'params':{'q':_0x3032b1}});_0x377d7e['push'](..._0x100aae['records']);}return _0x377d7e;}static async[a59_0x532ec6(0xf3)](_0x281e25,_0x40d09b,_0x352e7f){const _0x4b29d2=a59_0x532ec6,{data:_0x2e5ccd}=await _0x281e25[_0x4b29d2(0xc1)](_0x4b29d2(0xee)+salesforce_request_1[_0x4b29d2(0xc4)]+_0x4b29d2(0xd2),{'objectName':_0x4b29d2(0xbf),'binaryFields':_0x40d09b,'recordIds':_0x352e7f});return _0x2e5ccd;}static async['fetchAttachmentBody'](_0x339c92,_0x5844d5){const _0x2b19a4=a59_0x532ec6,{data:_0x1426e8}=await _0x339c92['get'](_0x2b19a4(0xc5)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment/'+_0x5844d5+'/body',{'responseType':_0x2b19a4(0xf1)});return _0x1426e8;}static[a59_0x532ec6(0xdc)](_0x464c8a){const _0x2898c9=a59_0x532ec6,_0x53f2c4=_0x464c8a[_0x2898c9(0xc2)](_0x4514a1=>{const _0x101fbe=_0x2898c9,_0x26e4ae=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x4514a1,['Id',_0x101fbe(0xce)]);return _0x26e4ae['Component__r']=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x26e4ae[_0x101fbe(0xce)],['Component_Name__c',_0x101fbe(0xc0)]),_0x26e4ae;});return _0x53f2c4;}static async['retrieveAttachments'](_0x5ae766,_0x5d788b){const _0x56bd0b=a59_0x532ec6;let _0x477959=0x0,_0x17f080=0x0,_0x5d8d24=[];const _0x3e107f=[];for(const _0x227c98 of _0x5ae766){if(_0x227c98[_0x56bd0b(0xef)]>REST_ATTACHMENT_MAX_SIZE){const _0x46219f=await ComponentsApi[_0x56bd0b(0xd5)](_0x5d788b,_0x227c98['Id']);_0x3e107f[_0x56bd0b(0xd6)]({'id':_0x227c98['Id'],'values':{'Body':_0x46219f[_0x56bd0b(0xf2)]('base64')}});continue;}if(_0x227c98[_0x56bd0b(0xef)]+_0x477959>REST_ATTACHMENT_MAX_SIZE||_0x17f080+0x1>=REST_ATTACHMENT_COUNT){const _0x10d05a=await ComponentsApi[_0x56bd0b(0xf3)](_0x5d788b,BINARY_FIELDS,_0x5d8d24);_0x3e107f['push'](..._0x10d05a),_0x5d8d24=[],_0x477959=0x0,_0x17f080=0x0;}_0x5d8d24[_0x56bd0b(0xd6)](_0x227c98['Id']),_0x477959+=_0x227c98[_0x56bd0b(0xef)],_0x17f080++;}if(_0x5d8d24[_0x56bd0b(0xd7)]){const _0x1ddca3=await ComponentsApi[_0x56bd0b(0xf3)](_0x5d788b,BINARY_FIELDS,_0x5d8d24);_0x3e107f['push'](..._0x1ddca3);}return _0x3e107f;}static async[a59_0x532ec6(0xc7)](_0x15737d,_0x3d2cad){const _0x440b41=a59_0x532ec6;var _0xa8ef8;const _0x3da4fe=_0x15737d[_0x440b41(0xdd)]()[_0x440b41(0xe3)](_0x5111c2=>!_0x5111c2[_0x440b41(0xdb)])[_0x440b41(0xf6)]((_0x4756cb,_0x56eb85)=>_0x4756cb[_0x440b41(0xe8)]()[_0x440b41(0xd7)]>_0x56eb85['getData']()[_0x440b41(0xd7)]?-0x1:0x1),_0x337386=new adm_zip_1['default']();for(const {entryName:_0x531e43}of _0x3da4fe){const _0x57b503=(_0xa8ef8=_0x15737d[_0x440b41(0xcd)](_0x531e43))===null||_0xa8ef8===void 0x0?void 0x0:_0xa8ef8[_0x440b41(0xe8)]();_0x337386[_0x440b41(0xd8)](_0x531e43,_0x57b503),_0x15737d['deleteFile'](_0x531e43);if(_0x3d2cad-_0x337386[_0x440b41(0xf9)]()[_0x440b41(0xf2)](_0x440b41(0xbd))[_0x440b41(0xd7)]<exports['MAX_ZIP_SIZE'])break;}return[_0x15737d,_0x337386];}}exports[a59_0x532ec6(0xbc)]=ComponentsApi;