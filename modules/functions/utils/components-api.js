const a59_0x56e4dc=a59_0x3326;(function(_0x5cbc51,_0x13bcfa){const _0x50c952=a59_0x3326,_0x15d92b=_0x5cbc51();while(!![]){try{const _0x5d7b91=parseInt(_0x50c952(0x1c6))/0x1+-parseInt(_0x50c952(0x1f8))/0x2+parseInt(_0x50c952(0x1e7))/0x3*(parseInt(_0x50c952(0x1ed))/0x4)+-parseInt(_0x50c952(0x1e1))/0x5*(parseInt(_0x50c952(0x1fa))/0x6)+parseInt(_0x50c952(0x1d4))/0x7*(-parseInt(_0x50c952(0x1c1))/0x8)+-parseInt(_0x50c952(0x1cf))/0x9*(parseInt(_0x50c952(0x200))/0xa)+-parseInt(_0x50c952(0x203))/0xb*(-parseInt(_0x50c952(0x1d0))/0xc);if(_0x5d7b91===_0x13bcfa)break;else _0x15d92b['push'](_0x15d92b['shift']());}catch(_0x162a03){_0x15d92b['push'](_0x15d92b['shift']());}}}(a59_0x1877,0xc9428));function a59_0x3326(_0x399076,_0x43f362){const _0x4957be=a59_0x1877();return a59_0x3326=function(_0x5f10d1,_0x14830b){_0x5f10d1=_0x5f10d1-0x1bf;let _0x1877f2=_0x4957be[_0x5f10d1];return _0x1877f2;},a59_0x3326(_0x399076,_0x43f362);}const a59_0x14830b=(function(){let _0x192368=!![];return function(_0x5be065,_0x3a7f67){const _0x1833c0=_0x192368?function(){const _0x1cd518=a59_0x3326;if(_0x3a7f67){const _0x1d4118=_0x3a7f67[_0x1cd518(0x1db)](_0x5be065,arguments);return _0x3a7f67=null,_0x1d4118;}}:function(){};return _0x192368=![],_0x1833c0;};}()),a59_0x5f10d1=a59_0x14830b(this,function(){const _0x523fa5=a59_0x3326;return a59_0x5f10d1[_0x523fa5(0x1f9)]()[_0x523fa5(0x1c2)](_0x523fa5(0x1c8))['toString']()[_0x523fa5(0x202)](a59_0x5f10d1)['search'](_0x523fa5(0x1c8));});a59_0x5f10d1();'use strict';var __importDefault=this&&this[a59_0x56e4dc(0x1ee)]||function(_0x226e2b){const _0x2add1c=a59_0x56e4dc;return _0x226e2b&&_0x226e2b[_0x2add1c(0x1d6)]?_0x226e2b:{'default':_0x226e2b};};Object[a59_0x56e4dc(0x1bf)](exports,a59_0x56e4dc(0x1d6),{'value':!![]}),exports[a59_0x56e4dc(0x1e3)]=exports['MAX_ZIP_SIZE']=void 0x0;function a59_0x1877(){const _0xb873c6=['search','../../git/salesforce/utils/flosum-naming.utils','length','Component__r.','1561862hNTUix','retrieveAttachments','(((.+)+)+)+$','Component_Type__c\x0a\x20\x20\x20\x20\x20\x20FROM\x20','/query/','records','get','fetchAttachmentBody','Attachment','18wQJLty','4517196XUJxcS','FLOSUM_NAMESPACE','Component_Type__c','join','763ncKEkV','toBuffer','__esModule','getData','../../shared/utils','namespace','removeNamespacePrefix','apply','map','default','./salesforce-request','filter','splitZip','4825mkbmKt','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20','ComponentsApi','Component__r','\x27,\x27','post','111411xSgQJf','Component_Name__c','SALESFORCE_API_VERSION','arraybuffer','sort','/body','36VdWdXK','__importDefault','getEntry','getEntries','fetchAttachmentsDetails','extractFieldsFromRecord','adm-zip','deleteFile','Component_History__c\x0a\x20\x20\x20\x20\x20\x20WHERE\x20Id\x20IN\x20(','chunkArray','push','1642152tYUGCk','toString','996UEFwGc','/retrieveAttachments/','fetchAttachments','base64','Body','isDirectory','381230vWSMvp','BodyLength','constructor','11YJgbcE','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20Id\x20IN\x20(','defineProperty','../../../constants','28672zDBWIM'];a59_0x1877=function(){return _0xb873c6;};return a59_0x1877();}const utils_1=require(a59_0x56e4dc(0x1d8)),constants_1=require(a59_0x56e4dc(0x1c0)),flosum_naming_utils_1=require(a59_0x56e4dc(0x1c3)),salesforce_request_1=require(a59_0x56e4dc(0x1de)),adm_zip_1=__importDefault(require(a59_0x56e4dc(0x1f3))),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a59_0x56e4dc(0x1fe)];exports['MAX_ZIP_SIZE']=0x2100000;class ComponentsApi{static async[a59_0x56e4dc(0x1f1)](_0xc3e7a0,_0x44ddda){const _0x4820b4=a59_0x56e4dc,_0x13cbb6=[],_0xb77ea8=(0x0,utils_1[_0x4820b4(0x1f6)])(_0x44ddda,CHUNK_QUERY_SIZE);for(const _0x2fd6cb of _0xb77ea8){const _0x177ed2=_0x4820b4(0x204)+('\x27'+_0x2fd6cb['join'](_0x4820b4(0x1e5))+'\x27')+')',{data:_0x2ba67b}=await _0xc3e7a0[_0x4820b4(0x1cc)]('/services/data/'+constants_1[_0x4820b4(0x1e9)]+_0x4820b4(0x1ca),{'params':{'q':_0x177ed2}});_0x13cbb6[_0x4820b4(0x1f7)](..._0x2ba67b['records']);}return _0x13cbb6;}static async['fetchComponentsDetailsByComponentsHistory'](_0xd5f852,_0x31e6f5){const _0xd4b89e=a59_0x56e4dc,_0x47f5fa=[],_0x132f0d=(0x0,utils_1[_0xd4b89e(0x1f6)])(_0x31e6f5,CHUNK_QUERY_SIZE);for(const _0x5b9b56 of _0x132f0d){const _0x4cbbf0=_0xd4b89e(0x1e2)+constants_1[_0xd4b89e(0x1d1)]+'Component__r.'+constants_1[_0xd4b89e(0x1d1)]+'Component_Name__c,\x20'+constants_1[_0xd4b89e(0x1d1)]+_0xd4b89e(0x1c5)+constants_1[_0xd4b89e(0x1d1)]+_0xd4b89e(0x1c9)+constants_1[_0xd4b89e(0x1d1)]+_0xd4b89e(0x1f5)+('\x27'+_0x5b9b56[_0xd4b89e(0x1d3)]('\x27,\x27')+'\x27')+')',{data:_0x107069}=await _0xd5f852[_0xd4b89e(0x1cc)]('/services/data/'+constants_1[_0xd4b89e(0x1e9)]+'/query/',{'params':{'q':_0x4cbbf0}});_0x47f5fa[_0xd4b89e(0x1f7)](..._0x107069[_0xd4b89e(0x1cb)]);}return _0x47f5fa;}static async[a59_0x56e4dc(0x1fc)](_0x26fcfc,_0x5425d9,_0x475c83){const _0x5a0e5e=a59_0x56e4dc,{data:_0x4ed936}=await _0x26fcfc[_0x5a0e5e(0x1e6)]('/services/apexrest'+salesforce_request_1[_0x5a0e5e(0x1d9)]+_0x5a0e5e(0x1fb),{'objectName':_0x5a0e5e(0x1ce),'binaryFields':_0x5425d9,'recordIds':_0x475c83});return _0x4ed936;}static async[a59_0x56e4dc(0x1cd)](_0x23f73a,_0x3fda5c){const _0x3f2524=a59_0x56e4dc,{data:_0x5ea3e3}=await _0x23f73a['get']('/services/data/'+constants_1[_0x3f2524(0x1e9)]+'/sobjects/Attachment/'+_0x3fda5c+_0x3f2524(0x1ec),{'responseType':_0x3f2524(0x1ea)});return _0x5ea3e3;}static[a59_0x56e4dc(0x1da)](_0x40ce51){const _0x5d7f44=a59_0x56e4dc,_0x51d79a=_0x40ce51[_0x5d7f44(0x1dc)](_0x29a12a=>{const _0x372a53=_0x5d7f44,_0x487130=(0x0,flosum_naming_utils_1[_0x372a53(0x1f2)])(_0x29a12a,['Id',_0x372a53(0x1e4)]);return _0x487130[_0x372a53(0x1e4)]=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x487130[_0x372a53(0x1e4)],[_0x372a53(0x1e8),_0x372a53(0x1d2)]),_0x487130;});return _0x51d79a;}static async[a59_0x56e4dc(0x1c7)](_0x2fa562,_0x1bb0c1){const _0x2d0c2a=a59_0x56e4dc;let _0x4a33a8=0x0,_0x59fdfe=0x0,_0x1da9e5=[];const _0x5e6172=[];for(const _0x2e4ab7 of _0x2fa562){if(_0x2e4ab7[_0x2d0c2a(0x201)]>REST_ATTACHMENT_MAX_SIZE){const _0x5c9d44=await ComponentsApi['fetchAttachmentBody'](_0x1bb0c1,_0x2e4ab7['Id']);_0x5e6172[_0x2d0c2a(0x1f7)]({'id':_0x2e4ab7['Id'],'values':{'Body':_0x5c9d44[_0x2d0c2a(0x1f9)](_0x2d0c2a(0x1fd))}});continue;}if(_0x2e4ab7['BodyLength']+_0x4a33a8>REST_ATTACHMENT_MAX_SIZE||_0x59fdfe+0x1>=REST_ATTACHMENT_COUNT){const _0x388271=await ComponentsApi[_0x2d0c2a(0x1fc)](_0x1bb0c1,BINARY_FIELDS,_0x1da9e5);_0x5e6172[_0x2d0c2a(0x1f7)](..._0x388271),_0x1da9e5=[],_0x4a33a8=0x0,_0x59fdfe=0x0;}_0x1da9e5['push'](_0x2e4ab7['Id']),_0x4a33a8+=_0x2e4ab7[_0x2d0c2a(0x201)],_0x59fdfe++;}if(_0x1da9e5[_0x2d0c2a(0x1c4)]){const _0x455c45=await ComponentsApi[_0x2d0c2a(0x1fc)](_0x1bb0c1,BINARY_FIELDS,_0x1da9e5);_0x5e6172['push'](..._0x455c45);}return _0x5e6172;}static async[a59_0x56e4dc(0x1e0)](_0x2ac539,_0x2eabce){const _0x2f251d=a59_0x56e4dc;var _0xf2e226;const _0x2cebef=_0x2ac539[_0x2f251d(0x1f0)]()[_0x2f251d(0x1df)](_0x4283b8=>!_0x4283b8[_0x2f251d(0x1ff)])[_0x2f251d(0x1eb)]((_0x235569,_0x528e2b)=>_0x235569[_0x2f251d(0x1d7)]()['length']>_0x528e2b[_0x2f251d(0x1d7)]()['length']?-0x1:0x1),_0x1669c8=new adm_zip_1[(_0x2f251d(0x1dd))]();for(const {entryName:_0xe9db8e}of _0x2cebef){const _0x305408=(_0xf2e226=_0x2ac539[_0x2f251d(0x1ef)](_0xe9db8e))===null||_0xf2e226===void 0x0?void 0x0:_0xf2e226[_0x2f251d(0x1d7)]();_0x1669c8['addFile'](_0xe9db8e,_0x305408),_0x2ac539[_0x2f251d(0x1f4)](_0xe9db8e);if(_0x2eabce-_0x1669c8[_0x2f251d(0x1d5)]()['toString']('base64')[_0x2f251d(0x1c4)]<exports['MAX_ZIP_SIZE'])break;}return[_0x2ac539,_0x1669c8];}}exports[a59_0x56e4dc(0x1e3)]=ComponentsApi;