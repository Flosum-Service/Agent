const a59_0x4b70ae=a59_0x4963;(function(_0x160941,_0x257f02){const _0x53fcc4=a59_0x4963,_0x1f15c6=_0x160941();while(!![]){try{const _0x25e006=-parseInt(_0x53fcc4(0xae))/0x1*(-parseInt(_0x53fcc4(0xda))/0x2)+-parseInt(_0x53fcc4(0xeb))/0x3*(-parseInt(_0x53fcc4(0xb0))/0x4)+-parseInt(_0x53fcc4(0xde))/0x5+-parseInt(_0x53fcc4(0xdb))/0x6+parseInt(_0x53fcc4(0xec))/0x7+-parseInt(_0x53fcc4(0xc9))/0x8*(-parseInt(_0x53fcc4(0xd8))/0x9)+parseInt(_0x53fcc4(0xb9))/0xa*(parseInt(_0x53fcc4(0xba))/0xb);if(_0x25e006===_0x257f02)break;else _0x1f15c6['push'](_0x1f15c6['shift']());}catch(_0x2d5d2d){_0x1f15c6['push'](_0x1f15c6['shift']());}}}(a59_0x4f4b,0x20230));function a59_0x4963(_0xc3de09,_0x4f9245){const _0x5e081d=a59_0x4f4b();return a59_0x4963=function(_0x238a99,_0x4fdfc9){_0x238a99=_0x238a99-0xab;let _0x4f4b2c=_0x5e081d[_0x238a99];return _0x4f4b2c;},a59_0x4963(_0xc3de09,_0x4f9245);}const a59_0x4fdfc9=(function(){let _0x1f69db=!![];return function(_0x413e15,_0x37f7dc){const _0x5d8997=_0x1f69db?function(){const _0x480e99=a59_0x4963;if(_0x37f7dc){const _0x5b5783=_0x37f7dc[_0x480e99(0xcb)](_0x413e15,arguments);return _0x37f7dc=null,_0x5b5783;}}:function(){};return _0x1f69db=![],_0x5d8997;};}()),a59_0x238a99=a59_0x4fdfc9(this,function(){const _0x5ae3b0=a59_0x4963;return a59_0x238a99[_0x5ae3b0(0xca)]()[_0x5ae3b0(0xc4)](_0x5ae3b0(0xe0))[_0x5ae3b0(0xca)]()[_0x5ae3b0(0xe3)](a59_0x238a99)['search'](_0x5ae3b0(0xe0));});a59_0x238a99();'use strict';function a59_0x4f4b(){const _0x330582=['MAX_ZIP_SIZE','ComponentsApi','removeNamespacePrefix','toBuffer','length','170202VgxqGg','378091ukYaSA','Attachment','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20Id\x20IN\x20(','fetchAttachmentBody','post','fetchAttachmentsDetails','getEntry','Component_History__c\x0a\x20\x20\x20\x20\x20\x20WHERE\x20Id\x20IN\x20(','push','Component_Type__c','10712foAbVa','retrieveAttachments','8rJkUZe','isDirectory','../../../constants','/query/','map','Component_Type__c\x0a\x20\x20\x20\x20\x20\x20FROM\x20','Component_Name__c','FLOSUM_NAMESPACE','getEntries','610xNxWOC','25355nVqoTW','fetchComponentsDetailsByComponentsHistory','default','chunkArray','Body','defineProperty','extractFieldsFromRecord','/sobjects/Attachment/','Component__r','SALESFORCE_API_VERSION','search','sort','BodyLength','Component__r.','adm-zip','435704QYTrYA','toString','apply','__importDefault','./salesforce-request','getData','/services/data/','deleteFile','records','fetchAttachments','get','__esModule','base64','arraybuffer','join','9GkqJvd','Component_Name__c,\x20','26NnBEfN','1440882bqLLYe','../../git/salesforce/utils/flosum-naming.utils','\x27,\x27','650130NlHHMb','addFile','(((.+)+)+)+$','/retrieveAttachments/','filter','constructor','splitZip','/body'];a59_0x4f4b=function(){return _0x330582;};return a59_0x4f4b();}var __importDefault=this&&this[a59_0x4b70ae(0xcc)]||function(_0x178dd7){return _0x178dd7&&_0x178dd7['__esModule']?_0x178dd7:{'default':_0x178dd7};};Object[a59_0x4b70ae(0xbf)](exports,a59_0x4b70ae(0xd4),{'value':!![]}),exports[a59_0x4b70ae(0xe7)]=exports[a59_0x4b70ae(0xe6)]=void 0x0;const utils_1=require('../../shared/utils'),constants_1=require(a59_0x4b70ae(0xb2)),flosum_naming_utils_1=require(a59_0x4b70ae(0xdc)),salesforce_request_1=require(a59_0x4b70ae(0xcd)),adm_zip_1=__importDefault(require(a59_0x4b70ae(0xc8))),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a59_0x4b70ae(0xbe)];exports['MAX_ZIP_SIZE']=0x2100000;class ComponentsApi{static async[a59_0x4b70ae(0xf1)](_0x23313d,_0x1cfa48){const _0x7b223c=a59_0x4b70ae,_0x1136ed=[],_0x121f5f=(0x0,utils_1[_0x7b223c(0xbd)])(_0x1cfa48,CHUNK_QUERY_SIZE);for(const _0x2da7ab of _0x121f5f){const _0x28ea19=_0x7b223c(0xee)+('\x27'+_0x2da7ab[_0x7b223c(0xd7)](_0x7b223c(0xdd))+'\x27')+')',{data:_0xa94ff8}=await _0x23313d[_0x7b223c(0xd3)](_0x7b223c(0xcf)+constants_1['SALESFORCE_API_VERSION']+_0x7b223c(0xb3),{'params':{'q':_0x28ea19}});_0x1136ed[_0x7b223c(0xac)](..._0xa94ff8[_0x7b223c(0xd1)]);}return _0x1136ed;}static async[a59_0x4b70ae(0xbb)](_0x3d3e8f,_0x4fc35e){const _0x32241a=a59_0x4b70ae,_0x1a5594=[],_0x3eb106=(0x0,utils_1[_0x32241a(0xbd)])(_0x4fc35e,CHUNK_QUERY_SIZE);for(const _0x179299 of _0x3eb106){const _0x5c3255='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20'+constants_1[_0x32241a(0xb7)]+_0x32241a(0xc7)+constants_1[_0x32241a(0xb7)]+_0x32241a(0xd9)+constants_1[_0x32241a(0xb7)]+_0x32241a(0xc7)+constants_1[_0x32241a(0xb7)]+_0x32241a(0xb5)+constants_1[_0x32241a(0xb7)]+_0x32241a(0xab)+('\x27'+_0x179299[_0x32241a(0xd7)](_0x32241a(0xdd))+'\x27')+')',{data:_0x59f7d4}=await _0x3d3e8f[_0x32241a(0xd3)](_0x32241a(0xcf)+constants_1[_0x32241a(0xc3)]+_0x32241a(0xb3),{'params':{'q':_0x5c3255}});_0x1a5594[_0x32241a(0xac)](..._0x59f7d4[_0x32241a(0xd1)]);}return _0x1a5594;}static async[a59_0x4b70ae(0xd2)](_0x2045eb,_0xd81b65,_0x117fe9){const _0x57a869=a59_0x4b70ae,{data:_0x3c9e24}=await _0x2045eb[_0x57a869(0xf0)]('/services/apexrest'+salesforce_request_1['namespace']+_0x57a869(0xe1),{'objectName':_0x57a869(0xed),'binaryFields':_0xd81b65,'recordIds':_0x117fe9});return _0x3c9e24;}static async[a59_0x4b70ae(0xef)](_0x23eafd,_0x40dca3){const _0xf5a66f=a59_0x4b70ae,{data:_0x16a8cd}=await _0x23eafd[_0xf5a66f(0xd3)](_0xf5a66f(0xcf)+constants_1[_0xf5a66f(0xc3)]+_0xf5a66f(0xc1)+_0x40dca3+_0xf5a66f(0xe5),{'responseType':_0xf5a66f(0xd6)});return _0x16a8cd;}static[a59_0x4b70ae(0xe8)](_0xed95b3){const _0x1e41a1=a59_0x4b70ae,_0x268654=_0xed95b3[_0x1e41a1(0xb4)](_0x5d8829=>{const _0x2f90c3=_0x1e41a1,_0x5329d1=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x5d8829,['Id','Component__r']);return _0x5329d1[_0x2f90c3(0xc2)]=(0x0,flosum_naming_utils_1[_0x2f90c3(0xc0)])(_0x5329d1[_0x2f90c3(0xc2)],[_0x2f90c3(0xb6),_0x2f90c3(0xad)]),_0x5329d1;});return _0x268654;}static async[a59_0x4b70ae(0xaf)](_0x29080a,_0x20ed2e){const _0x3573a3=a59_0x4b70ae;let _0x725135=0x0,_0x2f6b10=0x0,_0x4c0b52=[];const _0x32512a=[];for(const _0x25fd9d of _0x29080a){if(_0x25fd9d[_0x3573a3(0xc6)]>REST_ATTACHMENT_MAX_SIZE){const _0x1c8a04=await ComponentsApi[_0x3573a3(0xef)](_0x20ed2e,_0x25fd9d['Id']);_0x32512a[_0x3573a3(0xac)]({'id':_0x25fd9d['Id'],'values':{'Body':_0x1c8a04[_0x3573a3(0xca)]('base64')}});continue;}if(_0x25fd9d[_0x3573a3(0xc6)]+_0x725135>REST_ATTACHMENT_MAX_SIZE||_0x2f6b10+0x1>=REST_ATTACHMENT_COUNT){const _0x164f97=await ComponentsApi[_0x3573a3(0xd2)](_0x20ed2e,BINARY_FIELDS,_0x4c0b52);_0x32512a[_0x3573a3(0xac)](..._0x164f97),_0x4c0b52=[],_0x725135=0x0,_0x2f6b10=0x0;}_0x4c0b52[_0x3573a3(0xac)](_0x25fd9d['Id']),_0x725135+=_0x25fd9d['BodyLength'],_0x2f6b10++;}if(_0x4c0b52['length']){const _0x13b040=await ComponentsApi[_0x3573a3(0xd2)](_0x20ed2e,BINARY_FIELDS,_0x4c0b52);_0x32512a[_0x3573a3(0xac)](..._0x13b040);}return _0x32512a;}static async[a59_0x4b70ae(0xe4)](_0x3dedbb,_0x227e04){const _0x440932=a59_0x4b70ae;var _0x2c272b;const _0x3cdf4b=_0x3dedbb[_0x440932(0xb8)]()[_0x440932(0xe2)](_0x7c86d0=>!_0x7c86d0[_0x440932(0xb1)])[_0x440932(0xc5)]((_0x4526fd,_0x369ad8)=>_0x4526fd[_0x440932(0xce)]()['length']>_0x369ad8[_0x440932(0xce)]()[_0x440932(0xea)]?-0x1:0x1),_0x2b267e=new adm_zip_1[(_0x440932(0xbc))]();for(const {entryName:_0x437c6a}of _0x3cdf4b){const _0x4f2a28=(_0x2c272b=_0x3dedbb[_0x440932(0xf2)](_0x437c6a))===null||_0x2c272b===void 0x0?void 0x0:_0x2c272b[_0x440932(0xce)]();_0x2b267e[_0x440932(0xdf)](_0x437c6a,_0x4f2a28),_0x3dedbb[_0x440932(0xd0)](_0x437c6a);if(_0x227e04-_0x2b267e[_0x440932(0xe9)]()[_0x440932(0xca)](_0x440932(0xd5))['length']<exports['MAX_ZIP_SIZE'])break;}return[_0x3dedbb,_0x2b267e];}}exports[a59_0x4b70ae(0xe7)]=ComponentsApi;