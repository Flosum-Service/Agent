const a59_0x2cf331=a59_0x459c;(function(_0x349eef,_0x469b42){const _0x208a27=a59_0x459c,_0x453c05=_0x349eef();while(!![]){try{const _0x2d5531=parseInt(_0x208a27(0x18d))/0x1*(-parseInt(_0x208a27(0x180))/0x2)+-parseInt(_0x208a27(0x17a))/0x3+parseInt(_0x208a27(0x17c))/0x4*(-parseInt(_0x208a27(0x189))/0x5)+-parseInt(_0x208a27(0x174))/0x6+-parseInt(_0x208a27(0x18e))/0x7+-parseInt(_0x208a27(0x176))/0x8*(-parseInt(_0x208a27(0x182))/0x9)+-parseInt(_0x208a27(0x184))/0xa*(-parseInt(_0x208a27(0x18f))/0xb);if(_0x2d5531===_0x469b42)break;else _0x453c05['push'](_0x453c05['shift']());}catch(_0xf3960e){_0x453c05['push'](_0x453c05['shift']());}}}(a59_0x57d5,0x3123a));function a59_0x459c(_0x284636,_0x1b52a4){const _0x1d874a=a59_0x57d5();return a59_0x459c=function(_0x492ddf,_0x2796f6){_0x492ddf=_0x492ddf-0x158;let _0x57d5aa=_0x1d874a[_0x492ddf];return _0x57d5aa;},a59_0x459c(_0x284636,_0x1b52a4);}const a59_0x2796f6=(function(){let _0x4ed666=!![];return function(_0x30f4b0,_0x34a519){const _0x51d2ac=_0x4ed666?function(){const _0x2c1de0=a59_0x459c;if(_0x34a519){const _0x728d21=_0x34a519[_0x2c1de0(0x161)](_0x30f4b0,arguments);return _0x34a519=null,_0x728d21;}}:function(){};return _0x4ed666=![],_0x51d2ac;};}()),a59_0x492ddf=a59_0x2796f6(this,function(){const _0x5e62a0=a59_0x459c;return a59_0x492ddf[_0x5e62a0(0x168)]()['search'](_0x5e62a0(0x17e))['toString']()['constructor'](a59_0x492ddf)[_0x5e62a0(0x16c)](_0x5e62a0(0x17e));});a59_0x492ddf();'use strict';var __importDefault=this&&this[a59_0x2cf331(0x179)]||function(_0x4c2c64){const _0x2df346=a59_0x2cf331;return _0x4c2c64&&_0x4c2c64[_0x2df346(0x167)]?_0x4c2c64:{'default':_0x4c2c64};};Object['defineProperty'](exports,a59_0x2cf331(0x167),{'value':!![]}),exports[a59_0x2cf331(0x16a)]=exports[a59_0x2cf331(0x171)]=void 0x0;const utils_1=require(a59_0x2cf331(0x173)),constants_1=require(a59_0x2cf331(0x188)),flosum_naming_utils_1=require('../../git/salesforce/utils/flosum-naming.utils'),salesforce_request_1=require(a59_0x2cf331(0x196)),adm_zip_1=__importDefault(require('adm-zip')),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a59_0x2cf331(0x163)];exports[a59_0x2cf331(0x171)]=0x2100000;function a59_0x57d5(){const _0x45acb5=['2950OHUyDJ','Component__r.','1705140bRFTqD','fetchAttachments','7710WPCuTZ','toBuffer','Component_Type__c','chunkArray','../../../constants','450qFoYAc','fetchAttachmentBody','join','/services/apexrest','157WkOAFr','2318925dhgiWy','14597xjZIee','records','Component__r','getEntry','sort','default','filter','./salesforce-request','map','FLOSUM_NAMESPACE','retrieveAttachments','/services/data/','/body','post','arraybuffer','/query/','\x27,\x27','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20','apply','fetchAttachmentsDetails','Body','length','namespace','getEntries','__esModule','toString','extractFieldsFromRecord','ComponentsApi','fetchComponentsDetailsByComponentsHistory','search','Attachment','push','splitZip','get','MAX_ZIP_SIZE','SALESFORCE_API_VERSION','../../shared/utils','609720BbCAVZ','base64','8LfbbaA','/sobjects/Attachment/','getData','__importDefault','90909HpkXvB','isDirectory','14068RaKxub','BodyLength','(((.+)+)+)+$','removeNamespacePrefix'];a59_0x57d5=function(){return _0x45acb5;};return a59_0x57d5();}class ComponentsApi{static async[a59_0x2cf331(0x162)](_0x3da4b3,_0xd0863e){const _0x3a1ee2=a59_0x2cf331,_0xedc244=[],_0x2a32b7=(0x0,utils_1['chunkArray'])(_0xd0863e,CHUNK_QUERY_SIZE);for(const _0x1cf94b of _0x2a32b7){const _0x5ab1a3='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20Id\x20IN\x20('+('\x27'+_0x1cf94b[_0x3a1ee2(0x18b)](_0x3a1ee2(0x15f))+'\x27')+')',{data:_0x480707}=await _0x3da4b3['get'](_0x3a1ee2(0x15a)+constants_1['SALESFORCE_API_VERSION']+_0x3a1ee2(0x15e),{'params':{'q':_0x5ab1a3}});_0xedc244[_0x3a1ee2(0x16e)](..._0x480707['records']);}return _0xedc244;}static async[a59_0x2cf331(0x16b)](_0x50d782,_0x2bab07){const _0x41e2f7=a59_0x2cf331,_0x3674f9=[],_0x2b03de=(0x0,utils_1[_0x41e2f7(0x187)])(_0x2bab07,CHUNK_QUERY_SIZE);for(const _0x11829e of _0x2b03de){const _0x19b172=_0x41e2f7(0x160)+constants_1[_0x41e2f7(0x158)]+_0x41e2f7(0x181)+constants_1[_0x41e2f7(0x158)]+'Component_Name__c,\x20'+constants_1[_0x41e2f7(0x158)]+_0x41e2f7(0x181)+constants_1[_0x41e2f7(0x158)]+'Component_Type__c\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+constants_1[_0x41e2f7(0x158)]+'Component_History__c\x0a\x20\x20\x20\x20\x20\x20WHERE\x20Id\x20IN\x20('+('\x27'+_0x11829e[_0x41e2f7(0x18b)](_0x41e2f7(0x15f))+'\x27')+')',{data:_0x27018c}=await _0x50d782[_0x41e2f7(0x170)](_0x41e2f7(0x15a)+constants_1[_0x41e2f7(0x172)]+_0x41e2f7(0x15e),{'params':{'q':_0x19b172}});_0x3674f9[_0x41e2f7(0x16e)](..._0x27018c[_0x41e2f7(0x190)]);}return _0x3674f9;}static async['fetchAttachments'](_0x2a838c,_0xb6c220,_0x140e9c){const _0x5e718b=a59_0x2cf331,{data:_0x5a3d3d}=await _0x2a838c[_0x5e718b(0x15c)](_0x5e718b(0x18c)+salesforce_request_1[_0x5e718b(0x165)]+'/retrieveAttachments/',{'objectName':_0x5e718b(0x16d),'binaryFields':_0xb6c220,'recordIds':_0x140e9c});return _0x5a3d3d;}static async[a59_0x2cf331(0x18a)](_0x1f08d3,_0x53bfd8){const _0x434019=a59_0x2cf331,{data:_0x241212}=await _0x1f08d3[_0x434019(0x170)]('/services/data/'+constants_1[_0x434019(0x172)]+_0x434019(0x177)+_0x53bfd8+_0x434019(0x15b),{'responseType':_0x434019(0x15d)});return _0x241212;}static[a59_0x2cf331(0x17f)](_0x41d3c8){const _0x4b40d5=a59_0x2cf331,_0x4c9ed7=_0x41d3c8[_0x4b40d5(0x197)](_0x1befea=>{const _0x17902a=_0x4b40d5,_0x26c0ce=(0x0,flosum_naming_utils_1[_0x17902a(0x169)])(_0x1befea,['Id',_0x17902a(0x191)]);return _0x26c0ce[_0x17902a(0x191)]=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x26c0ce[_0x17902a(0x191)],['Component_Name__c',_0x17902a(0x186)]),_0x26c0ce;});return _0x4c9ed7;}static async[a59_0x2cf331(0x159)](_0x2e675a,_0x1abfc8){const _0x55c42a=a59_0x2cf331;let _0x2c8884=0x0,_0x20dd23=0x0,_0x2b98a6=[];const _0x2d45e1=[];for(const _0x2f8fab of _0x2e675a){if(_0x2f8fab[_0x55c42a(0x17d)]>REST_ATTACHMENT_MAX_SIZE){const _0x4dc305=await ComponentsApi[_0x55c42a(0x18a)](_0x1abfc8,_0x2f8fab['Id']);_0x2d45e1[_0x55c42a(0x16e)]({'id':_0x2f8fab['Id'],'values':{'Body':_0x4dc305[_0x55c42a(0x168)](_0x55c42a(0x175))}});continue;}if(_0x2f8fab['BodyLength']+_0x2c8884>REST_ATTACHMENT_MAX_SIZE||_0x20dd23+0x1>=REST_ATTACHMENT_COUNT){const _0x528d8a=await ComponentsApi[_0x55c42a(0x183)](_0x1abfc8,BINARY_FIELDS,_0x2b98a6);_0x2d45e1[_0x55c42a(0x16e)](..._0x528d8a),_0x2b98a6=[],_0x2c8884=0x0,_0x20dd23=0x0;}_0x2b98a6[_0x55c42a(0x16e)](_0x2f8fab['Id']),_0x2c8884+=_0x2f8fab[_0x55c42a(0x17d)],_0x20dd23++;}if(_0x2b98a6[_0x55c42a(0x164)]){const _0x5218c3=await ComponentsApi[_0x55c42a(0x183)](_0x1abfc8,BINARY_FIELDS,_0x2b98a6);_0x2d45e1[_0x55c42a(0x16e)](..._0x5218c3);}return _0x2d45e1;}static async[a59_0x2cf331(0x16f)](_0x4589e7,_0x5282d3){const _0x37c833=a59_0x2cf331;var _0x38b9e1;const _0x5b69b9=_0x4589e7[_0x37c833(0x166)]()[_0x37c833(0x195)](_0x4968af=>!_0x4968af[_0x37c833(0x17b)])[_0x37c833(0x193)]((_0xb47998,_0x349eab)=>_0xb47998[_0x37c833(0x178)]()[_0x37c833(0x164)]>_0x349eab[_0x37c833(0x178)]()[_0x37c833(0x164)]?-0x1:0x1),_0x7f6779=new adm_zip_1[(_0x37c833(0x194))]();for(const {entryName:_0x29eaae}of _0x5b69b9){const _0x258caa=(_0x38b9e1=_0x4589e7[_0x37c833(0x192)](_0x29eaae))===null||_0x38b9e1===void 0x0?void 0x0:_0x38b9e1[_0x37c833(0x178)]();_0x7f6779['addFile'](_0x29eaae,_0x258caa),_0x4589e7['deleteFile'](_0x29eaae);if(_0x5282d3-_0x7f6779[_0x37c833(0x185)]()[_0x37c833(0x168)](_0x37c833(0x175))[_0x37c833(0x164)]<exports['MAX_ZIP_SIZE'])break;}return[_0x4589e7,_0x7f6779];}}exports[a59_0x2cf331(0x16a)]=ComponentsApi;