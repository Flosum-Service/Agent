const a84_0x5a5967=a84_0x3ee3;(function(_0x20b772,_0x4e1e36){const _0x181b1d=a84_0x3ee3,_0x1854e9=_0x20b772();while(!![]){try{const _0x15bccf=parseInt(_0x181b1d(0x11e))/0x1+parseInt(_0x181b1d(0x133))/0x2+-parseInt(_0x181b1d(0x10e))/0x3+parseInt(_0x181b1d(0x136))/0x4+-parseInt(_0x181b1d(0x142))/0x5*(parseInt(_0x181b1d(0x122))/0x6)+parseInt(_0x181b1d(0x143))/0x7+-parseInt(_0x181b1d(0x113))/0x8;if(_0x15bccf===_0x4e1e36)break;else _0x1854e9['push'](_0x1854e9['shift']());}catch(_0x9746e0){_0x1854e9['push'](_0x1854e9['shift']());}}}(a84_0x33fb,0x86800));const a84_0x173e69=(function(){let _0x5d3582=!![];return function(_0x3355d4,_0x42687b){const _0x31d316=_0x5d3582?function(){const _0x1ef498=a84_0x3ee3;if(_0x42687b){const _0x3c7e23=_0x42687b[_0x1ef498(0x141)](_0x3355d4,arguments);return _0x42687b=null,_0x3c7e23;}}:function(){};return _0x5d3582=![],_0x31d316;};}()),a84_0x1e9c24=a84_0x173e69(this,function(){const _0x2d8156=a84_0x3ee3;return a84_0x1e9c24[_0x2d8156(0x11d)]()[_0x2d8156(0x138)]('(((.+)+)+)+$')[_0x2d8156(0x11d)]()[_0x2d8156(0x135)](a84_0x1e9c24)[_0x2d8156(0x138)](_0x2d8156(0x128));});a84_0x1e9c24();'use strict';var __importDefault=this&&this[a84_0x5a5967(0x117)]||function(_0x29f7e9){return _0x29f7e9&&_0x29f7e9['__esModule']?_0x29f7e9:{'default':_0x29f7e9};};Object[a84_0x5a5967(0x13f)](exports,a84_0x5a5967(0x148),{'value':!![]}),exports[a84_0x5a5967(0x119)]=void 0x0;function a84_0x33fb(){const _0x465e11=['7283857hIDMoT','catch','toBuffer','\x20-r\x20','-f\x20','__esModule','../../git/salesforce/utils/sfdx.utils','result','parse','SFDX','2266737EmoKSF','entryName','writeFile','refreshToken','AuthUtils','6331480XCsnOn','adm-zip','join','../../git/internal/fs.internal','__importDefault','\x20-purgeondelete','deployComponents','.temp/','setInstanceUrl','updateAccessToken','toString','513173KZpaly','path','default','fetchAttachmentBody','12uEtYrZ','cwd','split','getEntries','mkdir','getEntry','(((.+)+)+)+$','../utils/auth.utils','SFDXUtils','accessToken','/.temp/','then','isAuthorizationError','.temp','runTests','instanceUrl','uuid','29922PhJOcQ','exists','constructor','3651252ZBMVFe','../utils/sfdx.utils','search','../../shared/utils/fetch-attachments','createSFDXProject','\x20-g','force:mdapi:deploy\x20--json\x20','testLevel','deploy.zip','defineProperty','ignoreWarnings','apply','958930YSWvqw'];a84_0x33fb=function(){return _0x465e11;};return a84_0x33fb();}const promises_1=require('fs/promises'),sfdx_utils_1=require(a84_0x5a5967(0x149)),sfdx_utils_2=require(a84_0x5a5967(0x137)),auth_utils_1=require(a84_0x5a5967(0x129)),path_1=__importDefault(require(a84_0x5a5967(0x11f))),fs_internal_1=require(a84_0x5a5967(0x116)),uuid_1=require(a84_0x5a5967(0x132)),adm_zip_1=__importDefault(require(a84_0x5a5967(0x114))),fetch_attachments_1=require(a84_0x5a5967(0x139)),DESTRUCTIVE_CHANGES_POST_NAME='destructiveChangesPost.xml',DEPLOY_ZIP_NAME=a84_0x5a5967(0x13e);async function deployComponents({attachmentId:_0x18004a,credentials:_0x130927,postDestructiveAttachmentId:_0x4ef8dc,deployOptions:_0x2b4c18},_0x10d51e){const _0x5548ff=a84_0x5a5967,_0x228fb0=(0x0,uuid_1['v4'])();try{const _0x15a1a0=_0x18004a[_0x5548ff(0x124)](','),_0x234a14=new adm_zip_1[(_0x5548ff(0x120))]();for(const _0x4741da of _0x15a1a0){await(0x0,fetch_attachments_1['fetchAttachmentBody'])(_0x10d51e,_0x4741da)[_0x5548ff(0x12d)](_0x3e61b0=>{const _0x5a77af=_0x5548ff;var _0x4cba40;const _0x4f7f98=new adm_zip_1[(_0x5a77af(0x120))](_0x3e61b0);for(const _0x42d460 of _0x4f7f98[_0x5a77af(0x125)]()){_0x234a14['addFile'](_0x42d460[_0x5a77af(0x10f)],(_0x4cba40=_0x4f7f98[_0x5a77af(0x127)](_0x42d460[_0x5a77af(0x10f)]))===null||_0x4cba40===void 0x0?void 0x0:_0x4cba40['getData']());}});}!await fs_internal_1['FS'][_0x5548ff(0x134)](_0x5548ff(0x11a)+_0x228fb0)&&await(0x0,promises_1[_0x5548ff(0x126)])(_0x5548ff(0x11a)+_0x228fb0,{'recursive':!![]});await sfdx_utils_2['SFDXUtils'][_0x5548ff(0x13a)](_0x18004a,_0x228fb0),await sfdx_utils_2[_0x5548ff(0x12a)][_0x5548ff(0x11b)](_0x130927[_0x5548ff(0x131)],_0x18004a,_0x228fb0);if(_0x4ef8dc){const _0xc9de5b=await(0x0,fetch_attachments_1[_0x5548ff(0x121)])(_0x10d51e,_0x4ef8dc);_0x234a14['addFile'](DESTRUCTIVE_CHANGES_POST_NAME,_0xc9de5b),await(0x0,promises_1['writeFile'])(process['cwd']()+_0x5548ff(0x12c)+_0x228fb0+'/'+DEPLOY_ZIP_NAME,_0x234a14[_0x5548ff(0x145)]());}else await(0x0,promises_1[_0x5548ff(0x110)])(process[_0x5548ff(0x123)]()+_0x5548ff(0x12c)+_0x228fb0+'/'+DEPLOY_ZIP_NAME,_0x234a14[_0x5548ff(0x145)]());const _0x476b5d=await deploy(_0x130927,_0x2b4c18,_0x228fb0);return JSON[_0x5548ff(0x14b)](_0x476b5d)[_0x5548ff(0x14a)]['id'];}catch(_0x5e71b3){throw _0x5e71b3;}finally{await(0x0,promises_1['rm'])(path_1[_0x5548ff(0x120)][_0x5548ff(0x115)](process['cwd'](),'.temp',_0x228fb0),{'recursive':!![]});}}exports[a84_0x5a5967(0x119)]=deployComponents;function a84_0x3ee3(_0x41c82f,_0xe1d46){const _0x138653=a84_0x33fb();return a84_0x3ee3=function(_0x1e9c24,_0x173e69){_0x1e9c24=_0x1e9c24-0x10d;let _0x33fbee=_0x138653[_0x1e9c24];return _0x33fbee;},a84_0x3ee3(_0x41c82f,_0xe1d46);}function deploy(_0xa5928f,_0x142d20,_0x3f1c1b){const _0x3ebec9=a84_0x5a5967,_0x5f366d=path_1[_0x3ebec9(0x120)][_0x3ebec9(0x115)](process['cwd'](),_0x3ebec9(0x12f),_0x3f1c1b,DEPLOY_ZIP_NAME);let _0x535c1f=_0x3ebec9(0x147)+_0x5f366d+'\x20-u\x20'+_0xa5928f[_0x3ebec9(0x12b)];return _0x535c1f+=_0x142d20['checkOnly']?'\x20-c':'',_0x535c1f+=_0x142d20[_0x3ebec9(0x13d)]?'\x20-l\x20'+_0x142d20[_0x3ebec9(0x13d)]:'',_0x535c1f+=_0x142d20['runTests']?_0x3ebec9(0x146)+_0x142d20[_0x3ebec9(0x130)]:'',_0x535c1f+=_0x142d20[_0x3ebec9(0x140)]?_0x3ebec9(0x13b):'',_0x535c1f+=_0x142d20['purgeOnDelete']?_0x3ebec9(0x118):'',sfdx_utils_1[_0x3ebec9(0x10d)]['spawn'](_0x3ebec9(0x13c)+_0x535c1f)[_0x3ebec9(0x144)](async _0x2b7900=>{const _0x20d83e=_0x3ebec9;if(sfdx_utils_2[_0x20d83e(0x12a)][_0x20d83e(0x12e)](_0x2b7900))return _0xa5928f[_0x20d83e(0x12b)]=await auth_utils_1[_0x20d83e(0x112)][_0x20d83e(0x11c)](_0xa5928f[_0x20d83e(0x131)],_0xa5928f[_0x20d83e(0x111)],_0xa5928f['clientId'],_0xa5928f['clientSecret']),deploy(_0xa5928f,_0x142d20,_0x3f1c1b);throw _0x2b7900;});}