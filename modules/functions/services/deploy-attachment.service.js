const a84_0x206039=a84_0x3df9;function a84_0x3df9(_0x3247ef,_0x149cb9){const _0x25f5bc=a84_0x1589();return a84_0x3df9=function(_0x55cf91,_0x3b8756){_0x55cf91=_0x55cf91-0x161;let _0x158994=_0x25f5bc[_0x55cf91];return _0x158994;},a84_0x3df9(_0x3247ef,_0x149cb9);}(function(_0x64c5ce,_0x2a1133){const _0x47c05b=a84_0x3df9,_0x3eaffa=_0x64c5ce();while(!![]){try{const _0x36cf61=-parseInt(_0x47c05b(0x19a))/0x1*(-parseInt(_0x47c05b(0x176))/0x2)+parseInt(_0x47c05b(0x177))/0x3+parseInt(_0x47c05b(0x168))/0x4+parseInt(_0x47c05b(0x17f))/0x5*(parseInt(_0x47c05b(0x190))/0x6)+parseInt(_0x47c05b(0x162))/0x7*(-parseInt(_0x47c05b(0x170))/0x8)+-parseInt(_0x47c05b(0x18f))/0x9+-parseInt(_0x47c05b(0x164))/0xa;if(_0x36cf61===_0x2a1133)break;else _0x3eaffa['push'](_0x3eaffa['shift']());}catch(_0x35ff4f){_0x3eaffa['push'](_0x3eaffa['shift']());}}}(a84_0x1589,0xc8b4a));function a84_0x1589(){const _0x36ec21=['defineProperty','135112KFELmd','../../git/internal/fs.internal','deploy.zip','clientSecret','\x20-r\x20','.temp/','1514JZNUCR','4667619mSpvCb','\x20-c','.temp','join','isAuthorizationError','(((.+)+)+)+$','entryName','addFile','162395oykHhb','split','getData','runTests','\x20-u\x20','refreshToken','catch','ignoreWarnings','\x20-purgeondelete','adm-zip','SFDXUtils','toString','../utils/auth.utils','getEntry','__importDefault','accessToken','12432690Tiehjr','222QsMdnE','\x20-g','AuthUtils','setInstanceUrl','cwd','uuid','/.temp/','testLevel','default','createSFDXProject','105VqgsGu','deployComponents','constructor','__esModule','77TtMfoN','parse','14764260YPIgiM','writeFile','\x20-l\x20','purgeOnDelete','4114496sQGXiA','search','then','SFDX','fetchAttachmentBody','toBuffer','exists'];a84_0x1589=function(){return _0x36ec21;};return a84_0x1589();}const a84_0x3b8756=(function(){let _0x32bc82=!![];return function(_0x44b801,_0x4ed9dd){const _0x2b79f7=_0x32bc82?function(){if(_0x4ed9dd){const _0x422e89=_0x4ed9dd['apply'](_0x44b801,arguments);return _0x4ed9dd=null,_0x422e89;}}:function(){};return _0x32bc82=![],_0x2b79f7;};}()),a84_0x55cf91=a84_0x3b8756(this,function(){const _0x561c4b=a84_0x3df9;return a84_0x55cf91[_0x561c4b(0x18a)]()[_0x561c4b(0x169)]('(((.+)+)+)+$')['toString']()[_0x561c4b(0x19c)](a84_0x55cf91)[_0x561c4b(0x169)](_0x561c4b(0x17c));});a84_0x55cf91();'use strict';var __importDefault=this&&this[a84_0x206039(0x18d)]||function(_0x39792e){const _0x1bb6f7=a84_0x206039;return _0x39792e&&_0x39792e[_0x1bb6f7(0x161)]?_0x39792e:{'default':_0x39792e};};Object[a84_0x206039(0x16f)](exports,'__esModule',{'value':!![]}),exports['deployComponents']=void 0x0;const promises_1=require('fs/promises'),sfdx_utils_1=require('../../git/salesforce/utils/sfdx.utils'),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a84_0x206039(0x18b)),path_1=__importDefault(require('path')),fs_internal_1=require(a84_0x206039(0x171)),uuid_1=require(a84_0x206039(0x195)),adm_zip_1=__importDefault(require(a84_0x206039(0x188))),fetch_attachments_1=require('../../shared/utils/fetch-attachments'),DESTRUCTIVE_CHANGES_POST_NAME='destructiveChangesPost.xml',DEPLOY_ZIP_NAME=a84_0x206039(0x172);async function deployComponents({attachmentId:_0x5b951b,credentials:_0x2e2480,postDestructiveAttachmentId:_0x589e01,deployOptions:_0xe9eafc},_0x2dffa5){const _0x4060c6=a84_0x206039,_0x1a210=(0x0,uuid_1['v4'])();try{const _0x268bf8=_0x5b951b[_0x4060c6(0x180)](','),_0x2c3d17=new adm_zip_1[(_0x4060c6(0x198))]();for(const _0x59a63b of _0x268bf8){await(0x0,fetch_attachments_1[_0x4060c6(0x16c)])(_0x2dffa5,_0x59a63b)[_0x4060c6(0x16a)](_0xd8aa9d=>{const _0x2cdb6d=_0x4060c6;var _0x6534a2;const _0x3417cc=new adm_zip_1[(_0x2cdb6d(0x198))](_0xd8aa9d);for(const _0x1dbfa7 of _0x3417cc['getEntries']()){_0x2c3d17[_0x2cdb6d(0x17e)](_0x1dbfa7[_0x2cdb6d(0x17d)],(_0x6534a2=_0x3417cc[_0x2cdb6d(0x18c)](_0x1dbfa7[_0x2cdb6d(0x17d)]))===null||_0x6534a2===void 0x0?void 0x0:_0x6534a2[_0x2cdb6d(0x181)]());}});}!await fs_internal_1['FS'][_0x4060c6(0x16e)]('.temp/'+_0x1a210)&&await(0x0,promises_1['mkdir'])(_0x4060c6(0x175)+_0x1a210,{'recursive':!![]});await sfdx_utils_2[_0x4060c6(0x189)][_0x4060c6(0x199)](_0x5b951b,_0x1a210),await sfdx_utils_2[_0x4060c6(0x189)][_0x4060c6(0x193)](_0x2e2480['instanceUrl'],_0x5b951b,_0x1a210);if(_0x589e01){const _0x124eef=await(0x0,fetch_attachments_1[_0x4060c6(0x16c)])(_0x2dffa5,_0x589e01);_0x2c3d17[_0x4060c6(0x17e)](DESTRUCTIVE_CHANGES_POST_NAME,_0x124eef),await(0x0,promises_1[_0x4060c6(0x165)])(process[_0x4060c6(0x194)]()+_0x4060c6(0x196)+_0x1a210+'/'+DEPLOY_ZIP_NAME,_0x2c3d17[_0x4060c6(0x16d)]());}else await(0x0,promises_1[_0x4060c6(0x165)])(process[_0x4060c6(0x194)]()+_0x4060c6(0x196)+_0x1a210+'/'+DEPLOY_ZIP_NAME,_0x2c3d17[_0x4060c6(0x16d)]());const _0x242cd1=await deploy(_0x2e2480,_0xe9eafc,_0x1a210);return JSON[_0x4060c6(0x163)](_0x242cd1)['result']['id'];}catch(_0x268ffc){throw _0x268ffc;}finally{await(0x0,promises_1['rm'])(path_1['default'][_0x4060c6(0x17a)](process[_0x4060c6(0x194)](),_0x4060c6(0x179),_0x1a210),{'recursive':!![]});}}exports[a84_0x206039(0x19b)]=deployComponents;function deploy(_0x159f9f,_0x4f6879,_0x53dd4d){const _0xb2cc19=a84_0x206039,_0x15266d=path_1['default'][_0xb2cc19(0x17a)](process['cwd'](),_0xb2cc19(0x179),_0x53dd4d,DEPLOY_ZIP_NAME);let _0x1be309='-f\x20'+_0x15266d+_0xb2cc19(0x183)+_0x159f9f['accessToken'];return _0x1be309+=_0x4f6879['checkOnly']?_0xb2cc19(0x178):'',_0x1be309+=_0x4f6879[_0xb2cc19(0x197)]?_0xb2cc19(0x166)+_0x4f6879[_0xb2cc19(0x197)]:'',_0x1be309+=_0x4f6879[_0xb2cc19(0x182)]?_0xb2cc19(0x174)+_0x4f6879[_0xb2cc19(0x182)]:'',_0x1be309+=_0x4f6879[_0xb2cc19(0x186)]?_0xb2cc19(0x191):'',_0x1be309+=_0x4f6879[_0xb2cc19(0x167)]?_0xb2cc19(0x187):'',sfdx_utils_1[_0xb2cc19(0x16b)]['spawn']('force:mdapi:deploy\x20--json\x20'+_0x1be309)[_0xb2cc19(0x185)](async _0x402467=>{const _0x1d9e52=_0xb2cc19;if(sfdx_utils_2[_0x1d9e52(0x189)][_0x1d9e52(0x17b)](_0x402467))return _0x159f9f[_0x1d9e52(0x18e)]=await auth_utils_1[_0x1d9e52(0x192)]['updateAccessToken'](_0x159f9f['instanceUrl'],_0x159f9f[_0x1d9e52(0x184)],_0x159f9f['clientId'],_0x159f9f[_0x1d9e52(0x173)]),deploy(_0x159f9f,_0x4f6879,_0x53dd4d);throw _0x402467;});}