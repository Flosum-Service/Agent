const a84_0x29b37f=a84_0xab69;function a84_0xab69(_0x5aa7c8,_0x8b2bfe){const _0x41a4aa=a84_0x49aa();return a84_0xab69=function(_0x979496,_0x2e2678){_0x979496=_0x979496-0xa1;let _0x49aa4d=_0x41a4aa[_0x979496];return _0x49aa4d;},a84_0xab69(_0x5aa7c8,_0x8b2bfe);}(function(_0x14880c,_0x5daf0a){const _0x30f402=a84_0xab69,_0x2c2c67=_0x14880c();while(!![]){try{const _0x588533=parseInt(_0x30f402(0xcf))/0x1*(parseInt(_0x30f402(0xb3))/0x2)+-parseInt(_0x30f402(0xc7))/0x3+-parseInt(_0x30f402(0xd9))/0x4+-parseInt(_0x30f402(0xd1))/0x5+parseInt(_0x30f402(0xab))/0x6*(parseInt(_0x30f402(0xd8))/0x7)+parseInt(_0x30f402(0xdd))/0x8+parseInt(_0x30f402(0xa8))/0x9*(parseInt(_0x30f402(0xbd))/0xa);if(_0x588533===_0x5daf0a)break;else _0x2c2c67['push'](_0x2c2c67['shift']());}catch(_0x5cc666){_0x2c2c67['push'](_0x2c2c67['shift']());}}}(a84_0x49aa,0x32dbb));const a84_0x2e2678=(function(){let _0x56c114=!![];return function(_0x414b2a,_0x51f016){const _0x1b65d6=_0x56c114?function(){const _0x6c94ee=a84_0xab69;if(_0x51f016){const _0xf773e3=_0x51f016[_0x6c94ee(0xc8)](_0x414b2a,arguments);return _0x51f016=null,_0xf773e3;}}:function(){};return _0x56c114=![],_0x1b65d6;};}()),a84_0x979496=a84_0x2e2678(this,function(){const _0x4f518f=a84_0xab69;return a84_0x979496['toString']()['search'](_0x4f518f(0xbc))['toString']()['constructor'](a84_0x979496)[_0x4f518f(0xc2)](_0x4f518f(0xbc));});a84_0x979496();'use strict';var __importDefault=this&&this[a84_0x29b37f(0xa5)]||function(_0x546a7d){const _0x4606c1=a84_0x29b37f;return _0x546a7d&&_0x546a7d[_0x4606c1(0xca)]?_0x546a7d:{'default':_0x546a7d};};Object[a84_0x29b37f(0xcd)](exports,'__esModule',{'value':!![]}),exports[a84_0x29b37f(0xd3)]=void 0x0;const promises_1=require(a84_0x29b37f(0xb8)),sfdx_utils_1=require(a84_0x29b37f(0xb4)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require('../utils/auth.utils'),path_1=__importDefault(require(a84_0x29b37f(0xdc))),fs_internal_1=require('../../git/internal/fs.internal'),uuid_1=require('uuid'),adm_zip_1=__importDefault(require(a84_0x29b37f(0xa9))),fetch_attachments_1=require('../../shared/utils/fetch-attachments'),DESTRUCTIVE_CHANGES_POST_NAME=a84_0x29b37f(0xad),DEPLOY_ZIP_NAME=a84_0x29b37f(0xc9);async function deployComponents({attachmentId:_0x43a88d,credentials:_0x5da7a3,postDestructiveAttachmentId:_0xd07e17,deployOptions:_0x351787},_0x19cc55){const _0x9d3f27=a84_0x29b37f,_0x4007f6=(0x0,uuid_1['v4'])();try{const _0xf500be=_0x43a88d[_0x9d3f27(0xae)](','),_0x585f32=new adm_zip_1[(_0x9d3f27(0xe2))]();for(const _0x36cf2d of _0xf500be){await(0x0,fetch_attachments_1[_0x9d3f27(0xd4)])(_0x19cc55,_0x36cf2d)[_0x9d3f27(0xda)](_0x1ae182=>{const _0x1d0d89=_0x9d3f27;var _0x33685;const _0x3a455e=new adm_zip_1['default'](_0x1ae182);for(const _0x34b068 of _0x3a455e[_0x1d0d89(0xa7)]()){_0x585f32[_0x1d0d89(0xa1)](_0x34b068['entryName'],(_0x33685=_0x3a455e[_0x1d0d89(0xe3)](_0x34b068[_0x1d0d89(0xbf)]))===null||_0x33685===void 0x0?void 0x0:_0x33685[_0x1d0d89(0xde)]());}});}!await fs_internal_1['FS'][_0x9d3f27(0xd2)]('.temp/'+_0x4007f6)&&await(0x0,promises_1[_0x9d3f27(0xd6)])(_0x9d3f27(0xcb)+_0x4007f6,{'recursive':!![]});await sfdx_utils_2[_0x9d3f27(0xb9)]['createSFDXProject'](_0x43a88d,_0x4007f6),await sfdx_utils_2[_0x9d3f27(0xb9)][_0x9d3f27(0xce)](_0x5da7a3[_0x9d3f27(0xc5)],_0x43a88d,_0x4007f6);if(_0xd07e17){const _0x2c566a=await(0x0,fetch_attachments_1[_0x9d3f27(0xd4)])(_0x19cc55,_0xd07e17);_0x585f32['addFile'](DESTRUCTIVE_CHANGES_POST_NAME,_0x2c566a),await(0x0,promises_1[_0x9d3f27(0xa4)])(process[_0x9d3f27(0xdf)]()+'/.temp/'+_0x4007f6+'/'+DEPLOY_ZIP_NAME,_0x585f32[_0x9d3f27(0xc1)]());}else await(0x0,promises_1['writeFile'])(process[_0x9d3f27(0xdf)]()+_0x9d3f27(0xb2)+_0x4007f6+'/'+DEPLOY_ZIP_NAME,_0x585f32[_0x9d3f27(0xc1)]());const _0x12463c=await deploy(_0x5da7a3,_0x351787,_0x4007f6);return JSON[_0x9d3f27(0xb5)](_0x12463c)[_0x9d3f27(0xb1)]['id'];}catch(_0x220b6d){throw _0x220b6d;}finally{await(0x0,promises_1['rm'])(path_1[_0x9d3f27(0xe2)][_0x9d3f27(0xb6)](process[_0x9d3f27(0xdf)](),_0x9d3f27(0xd0),_0x4007f6),{'recursive':!![]});}}function a84_0x49aa(){const _0x24eb80=['.temp/','sfdx','defineProperty','setInstanceUrl','56329UVfZJX','.temp','207525uuYEii','exists','deployComponents','fetchAttachmentBody','\x20-purgeondelete','mkdir','checkOnly','14NQOeeQ','1188292oiIelY','then','spawnPromise','path','1727856zpCIbd','getData','cwd','testLevel','accessToken','default','getEntry','addFile','SFDX','\x20-c','writeFile','__importDefault','AuthUtils','getEntries','9AyCIll','adm-zip','catch','177972lmFgdb','runTests','destructiveChangesPost.xml','split','\x20-u\x20','updateAccessToken','result','/.temp/','2xFPIVQ','../../git/salesforce/utils/sfdx.utils','parse','join','force:mdapi:deploy\x20--json\x20','fs/promises','SFDXUtils','refreshToken','isAuthorizationError','(((.+)+)+)+$','5840690LqVAvN','\x20-g','entryName','\x20-l\x20','toBuffer','search','ignoreWarnings','\x20-r\x20','instanceUrl','clientId','1106433jShdoS','apply','deploy.zip','__esModule'];a84_0x49aa=function(){return _0x24eb80;};return a84_0x49aa();}exports['deployComponents']=deployComponents;function deploy(_0x37d7ca,_0x3ab577,_0x4e9acc){const _0x767d15=a84_0x29b37f,_0x4c3a17=path_1['default'][_0x767d15(0xb6)](process[_0x767d15(0xdf)](),_0x767d15(0xd0),_0x4e9acc,DEPLOY_ZIP_NAME);let _0xa6d51e='-f\x20'+_0x4c3a17+_0x767d15(0xaf)+_0x37d7ca['accessToken'];return _0xa6d51e+=_0x3ab577[_0x767d15(0xd7)]?_0x767d15(0xa3):'',_0xa6d51e+=_0x3ab577[_0x767d15(0xe0)]?_0x767d15(0xc0)+_0x3ab577['testLevel']:'',_0xa6d51e+=_0x3ab577[_0x767d15(0xac)]?_0x767d15(0xc4)+_0x3ab577[_0x767d15(0xac)]:'',_0xa6d51e+=_0x3ab577[_0x767d15(0xc3)]?_0x767d15(0xbe):'',_0xa6d51e+=_0x3ab577['purgeOnDelete']?_0x767d15(0xd5):'',sfdx_utils_1[_0x767d15(0xa2)][_0x767d15(0xdb)](_0x767d15(0xcc),_0x767d15(0xb7)+_0xa6d51e)[_0x767d15(0xaa)](async _0x304592=>{const _0x11e0a8=_0x767d15;if(sfdx_utils_2[_0x11e0a8(0xb9)][_0x11e0a8(0xbb)](_0x304592))return _0x37d7ca[_0x11e0a8(0xe1)]=await auth_utils_1[_0x11e0a8(0xa6)][_0x11e0a8(0xb0)](_0x37d7ca[_0x11e0a8(0xc5)],_0x37d7ca[_0x11e0a8(0xba)],_0x37d7ca[_0x11e0a8(0xc6)],_0x37d7ca['clientSecret']),deploy(_0x37d7ca,_0x3ab577,_0x4e9acc);throw _0x304592;});}