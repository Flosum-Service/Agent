const a84_0x525ca8=a84_0x5571;(function(_0x31e30c,_0x11b361){const _0x39ea6b=a84_0x5571,_0x4551c2=_0x31e30c();while(!![]){try{const _0x385233=-parseInt(_0x39ea6b(0xd3))/0x1*(-parseInt(_0x39ea6b(0xfc))/0x2)+parseInt(_0x39ea6b(0xec))/0x3+-parseInt(_0x39ea6b(0xd6))/0x4*(parseInt(_0x39ea6b(0x101))/0x5)+parseInt(_0x39ea6b(0xde))/0x6*(-parseInt(_0x39ea6b(0xe0))/0x7)+parseInt(_0x39ea6b(0x108))/0x8*(-parseInt(_0x39ea6b(0x100))/0x9)+parseInt(_0x39ea6b(0xce))/0xa+-parseInt(_0x39ea6b(0xcc))/0xb;if(_0x385233===_0x11b361)break;else _0x4551c2['push'](_0x4551c2['shift']());}catch(_0x926461){_0x4551c2['push'](_0x4551c2['shift']());}}}(a84_0x4bb8,0xa5884));const a84_0x431489=(function(){let _0x1aa030=!![];return function(_0x12b3de,_0x226826){const _0x3846e1=_0x1aa030?function(){const _0x348cf9=a84_0x5571;if(_0x226826){const _0x16c414=_0x226826[_0x348cf9(0xdf)](_0x12b3de,arguments);return _0x226826=null,_0x16c414;}}:function(){};return _0x1aa030=![],_0x3846e1;};}()),a84_0xcd659c=a84_0x431489(this,function(){const _0x310548=a84_0x5571;return a84_0xcd659c[_0x310548(0xf2)]()[_0x310548(0xdb)](_0x310548(0xd9))[_0x310548(0xf2)]()['constructor'](a84_0xcd659c)['search']('(((.+)+)+)+$');});function a84_0x4bb8(){const _0x13e7c8=['checkOnly','-f\x20','SFDXUtils','toString','\x20-r\x20','purgeOnDelete','path','addFile','.temp/','result','../../shared/utils/fetch-attachments','mkdir','split','2pnDXzT','instanceUrl','\x20-purgeondelete','../../git/internal/fs.internal','5419773SPLcaT','103480zGTAVR','accessToken','__esModule','../utils/auth.utils','fetchAttachmentBody','parse','updateAccessToken','8fWetBY','setInstanceUrl','spawnPromise','\x20-l\x20','4513553UToCgj','ignoreWarnings','5241560kNqlkP','sfdx','force:mdapi:deploy\x20--json\x20','getEntry','AuthUtils','1301074jZXNDD','../utils/sfdx.utils','deployComponents','108fPIWrw','createSFDXProject','exists','(((.+)+)+)+$','.temp','search','toBuffer','\x20-u\x20','7404NfoWlx','apply','2471MCmjKj','getData','join','default','entryName','__importDefault','fs/promises','writeFile','cwd','/.temp/','\x20-c','SFDX','2579112UREXcC','then','runTests'];a84_0x4bb8=function(){return _0x13e7c8;};return a84_0x4bb8();}a84_0xcd659c();'use strict';var __importDefault=this&&this[a84_0x525ca8(0xe5)]||function(_0x598595){const _0x48bb36=a84_0x525ca8;return _0x598595&&_0x598595[_0x48bb36(0x103)]?_0x598595:{'default':_0x598595};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a84_0x525ca8(0xd5)]=void 0x0;const promises_1=require(a84_0x525ca8(0xe6)),sfdx_utils_1=require('../../git/salesforce/utils/sfdx.utils'),sfdx_utils_2=require(a84_0x525ca8(0xd4)),auth_utils_1=require(a84_0x525ca8(0x104)),path_1=__importDefault(require(a84_0x525ca8(0xf5))),fs_internal_1=require(a84_0x525ca8(0xff)),uuid_1=require('uuid'),adm_zip_1=__importDefault(require('adm-zip')),fetch_attachments_1=require(a84_0x525ca8(0xf9)),DESTRUCTIVE_CHANGES_POST_NAME='destructiveChangesPost.xml',DEPLOY_ZIP_NAME='deploy.zip';async function deployComponents({attachmentId:_0xe2ba51,credentials:_0xbb9146,postDestructiveAttachmentId:_0xbfd7be,deployOptions:_0x4c199e},_0x52b9a1){const _0x5e9905=a84_0x525ca8,_0x324cb1=(0x0,uuid_1['v4'])();try{const _0x526fff=_0xe2ba51[_0x5e9905(0xfb)](','),_0xf60f=new adm_zip_1[(_0x5e9905(0xe3))]();for(const _0x29c353 of _0x526fff){await(0x0,fetch_attachments_1[_0x5e9905(0x105)])(_0x52b9a1,_0x29c353)[_0x5e9905(0xed)](_0x579ec3=>{const _0x807747=_0x5e9905;var _0x1bcdf0;const _0x21bdcc=new adm_zip_1[(_0x807747(0xe3))](_0x579ec3);for(const _0x59d5c0 of _0x21bdcc['getEntries']()){_0xf60f['addFile'](_0x59d5c0[_0x807747(0xe4)],(_0x1bcdf0=_0x21bdcc[_0x807747(0xd1)](_0x59d5c0[_0x807747(0xe4)]))===null||_0x1bcdf0===void 0x0?void 0x0:_0x1bcdf0[_0x807747(0xe1)]());}});}!await fs_internal_1['FS'][_0x5e9905(0xd8)](_0x5e9905(0xf7)+_0x324cb1)&&await(0x0,promises_1[_0x5e9905(0xfa)])(_0x5e9905(0xf7)+_0x324cb1,{'recursive':!![]});await sfdx_utils_2[_0x5e9905(0xf1)][_0x5e9905(0xd7)](_0xe2ba51,_0x324cb1),await sfdx_utils_2['SFDXUtils'][_0x5e9905(0x109)](_0xbb9146['instanceUrl'],_0xe2ba51,_0x324cb1);if(_0xbfd7be){const _0x3e6ec2=await(0x0,fetch_attachments_1[_0x5e9905(0x105)])(_0x52b9a1,_0xbfd7be);_0xf60f[_0x5e9905(0xf6)](DESTRUCTIVE_CHANGES_POST_NAME,_0x3e6ec2),await(0x0,promises_1[_0x5e9905(0xe7)])(process[_0x5e9905(0xe8)]()+_0x5e9905(0xe9)+_0x324cb1+'/'+DEPLOY_ZIP_NAME,_0xf60f[_0x5e9905(0xdc)]());}else await(0x0,promises_1['writeFile'])(process[_0x5e9905(0xe8)]()+'/.temp/'+_0x324cb1+'/'+DEPLOY_ZIP_NAME,_0xf60f[_0x5e9905(0xdc)]());const _0x4a26c=await deploy(_0xbb9146,_0x4c199e,_0x324cb1);return JSON[_0x5e9905(0x106)](_0x4a26c)[_0x5e9905(0xf8)]['id'];}catch(_0x4f62a6){throw _0x4f62a6;}finally{await(0x0,promises_1['rm'])(path_1[_0x5e9905(0xe3)]['join'](process[_0x5e9905(0xe8)](),'.temp',_0x324cb1),{'recursive':!![]});}}function a84_0x5571(_0x40256d,_0x2302f8){const _0x2ce385=a84_0x4bb8();return a84_0x5571=function(_0xcd659c,_0x431489){_0xcd659c=_0xcd659c-0xca;let _0x4bb8c6=_0x2ce385[_0xcd659c];return _0x4bb8c6;},a84_0x5571(_0x40256d,_0x2302f8);}exports['deployComponents']=deployComponents;function deploy(_0x20bdd8,_0x2a3d3e,_0x5d5c1a){const _0x1c8009=a84_0x525ca8,_0x21e874=path_1[_0x1c8009(0xe3)][_0x1c8009(0xe2)](process['cwd'](),_0x1c8009(0xda),_0x5d5c1a,DEPLOY_ZIP_NAME);let _0x1bdeb2=_0x1c8009(0xf0)+_0x21e874+_0x1c8009(0xdd)+_0x20bdd8[_0x1c8009(0x102)];return _0x1bdeb2+=_0x2a3d3e[_0x1c8009(0xef)]?_0x1c8009(0xea):'',_0x1bdeb2+=_0x2a3d3e['testLevel']?_0x1c8009(0xcb)+_0x2a3d3e['testLevel']:'',_0x1bdeb2+=_0x2a3d3e[_0x1c8009(0xee)]?_0x1c8009(0xf3)+_0x2a3d3e[_0x1c8009(0xee)]:'',_0x1bdeb2+=_0x2a3d3e[_0x1c8009(0xcd)]?'\x20-g':'',_0x1bdeb2+=_0x2a3d3e[_0x1c8009(0xf4)]?_0x1c8009(0xfe):'',sfdx_utils_1[_0x1c8009(0xeb)][_0x1c8009(0xca)](_0x1c8009(0xcf),_0x1c8009(0xd0)+_0x1bdeb2)['catch'](async _0x3cf060=>{const _0x1b0390=_0x1c8009;if(sfdx_utils_2[_0x1b0390(0xf1)]['isAuthorizationError'](_0x3cf060))return _0x20bdd8['accessToken']=await auth_utils_1[_0x1b0390(0xd2)][_0x1b0390(0x107)](_0x20bdd8[_0x1b0390(0xfd)],_0x20bdd8['refreshToken'],_0x20bdd8['clientId'],_0x20bdd8['clientSecret']),deploy(_0x20bdd8,_0x2a3d3e,_0x5d5c1a);throw _0x3cf060;});}