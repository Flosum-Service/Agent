const a55_0x2fdef5=a55_0x4910;(function(_0x5764d6,_0x3a107f){const _0x479f7f=a55_0x4910,_0x82a58e=_0x5764d6();while(!![]){try{const _0x185cab=-parseInt(_0x479f7f(0x13e))/0x1+-parseInt(_0x479f7f(0x14d))/0x2*(parseInt(_0x479f7f(0x162))/0x3)+-parseInt(_0x479f7f(0x147))/0x4+parseInt(_0x479f7f(0x13c))/0x5+parseInt(_0x479f7f(0x14f))/0x6+-parseInt(_0x479f7f(0x143))/0x7+parseInt(_0x479f7f(0x144))/0x8;if(_0x185cab===_0x3a107f)break;else _0x82a58e['push'](_0x82a58e['shift']());}catch(_0x21eeff){_0x82a58e['push'](_0x82a58e['shift']());}}}(a55_0x28a6,0x5ee6f));const a55_0x19d558=(function(){let _0x3e6622=!![];return function(_0x5e0375,_0x378baf){const _0x56ac8c=_0x3e6622?function(){if(_0x378baf){const _0x39437a=_0x378baf['apply'](_0x5e0375,arguments);return _0x378baf=null,_0x39437a;}}:function(){};return _0x3e6622=![],_0x56ac8c;};}()),a55_0x5ee867=a55_0x19d558(this,function(){const _0x457e8f=a55_0x4910;return a55_0x5ee867[_0x457e8f(0x173)]()['search'](_0x457e8f(0x171))[_0x457e8f(0x173)]()[_0x457e8f(0x153)](a55_0x5ee867)[_0x457e8f(0x14c)](_0x457e8f(0x171));});a55_0x5ee867();'use strict';function a55_0x4910(_0x37ec27,_0x25db8e){const _0x590814=a55_0x28a6();return a55_0x4910=function(_0x5ee867,_0x19d558){_0x5ee867=_0x5ee867-0x13b;let _0x28a69b=_0x590814[_0x5ee867];return _0x28a69b;},a55_0x4910(_0x37ec27,_0x25db8e);}var __importDefault=this&&this[a55_0x2fdef5(0x154)]||function(_0x54eca8){const _0x58e45d=a55_0x2fdef5;return _0x54eca8&&_0x54eca8[_0x58e45d(0x15a)]?_0x54eca8:{'default':_0x54eca8};};Object[a55_0x2fdef5(0x14e)](exports,a55_0x2fdef5(0x15a),{'value':!![]}),exports[a55_0x2fdef5(0x155)]=void 0x0;const constants_1=require(a55_0x2fdef5(0x14b)),promises_1=require(a55_0x2fdef5(0x151)),sfdx_utils_1=require(a55_0x2fdef5(0x15b)),fs_internal_1=require(a55_0x2fdef5(0x152)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a55_0x2fdef5(0x157)),adm_zip_1=__importDefault(require(a55_0x2fdef5(0x145))),uuid_1=require(a55_0x2fdef5(0x16b)),components_api_1=require(a55_0x2fdef5(0x15e)),path_1=require(a55_0x2fdef5(0x13f));async function retrieveZip({backupAsyncId:_0x4a360a,credentials:_0x108ba7,metadataLogId:_0x42176d},_0x36cd38){const _0x1708e6=a55_0x2fdef5;var _0x247c60;const _0x4820f5=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS']['exists'](_0x1708e6(0x140)+_0x4820f5)&&await(0x0,promises_1[_0x1708e6(0x16e)])(_0x1708e6(0x140)+_0x4820f5,{'recursive':!![]});await sfdx_utils_2['SFDXUtils'][_0x1708e6(0x16f)](_0x4a360a,_0x4820f5),await sfdx_utils_2[_0x1708e6(0x16a)][_0x1708e6(0x141)](_0x108ba7[_0x1708e6(0x156)],_0x4a360a,_0x4820f5),await retrieveReport(_0x4a360a,_0x108ba7,_0x4820f5);const _0x353a96=new adm_zip_1['default'](await(0x0,promises_1['readFile'])('.temp/'+_0x4820f5+'/'+_0x4a360a+_0x1708e6(0x164))),_0x3ddd70=new adm_zip_1[(_0x1708e6(0x159))]();for(const {entryName:_0x4edba3}of _0x353a96['getEntries']()){const _0x29009e=(_0x247c60=_0x353a96['getEntry'](_0x4edba3))===null||_0x247c60===void 0x0?void 0x0:_0x247c60[_0x1708e6(0x172)]();_0x3ddd70[_0x1708e6(0x166)]((0x0,path_1['join'])(_0x1708e6(0x13b),_0x4edba3),_0x29009e);}const _0x3387a6=_0x3ddd70[_0x1708e6(0x169)]()['toString'](_0x1708e6(0x170))[_0x1708e6(0x16c)];if(_0x3387a6>=components_api_1['MAX_ZIP_SIZE']){const [_0x58418b,_0xc37a1d]=await components_api_1[_0x1708e6(0x174)][_0x1708e6(0x15f)](_0x3ddd70,_0x3387a6),_0x38fff6={'ParentId':_0x42176d,'Name':'BACKUP\x20ZIP','Description':_0x1708e6(0x14a),'Body':_0x58418b['toBuffer']()[_0x1708e6(0x173)](_0x1708e6(0x170))};await _0x36cd38[_0x1708e6(0x142)](_0x1708e6(0x161)+constants_1[_0x1708e6(0x148)]+'/sobjects/Attachment',_0x38fff6),_0x38fff6[_0x1708e6(0x165)]=_0xc37a1d[_0x1708e6(0x169)]()[_0x1708e6(0x173)](_0x1708e6(0x170)),await _0x36cd38['post'](_0x1708e6(0x161)+constants_1['SALESFORCE_API_VERSION']+_0x1708e6(0x149),_0x38fff6);}else{const _0xdc87e8={'ParentId':_0x42176d,'Name':_0x1708e6(0x14a),'Description':'BACKUP\x20ZIP','Body':_0x3ddd70[_0x1708e6(0x169)]()[_0x1708e6(0x173)](_0x1708e6(0x170))};await _0x36cd38[_0x1708e6(0x142)](_0x1708e6(0x161)+constants_1['SALESFORCE_API_VERSION']+_0x1708e6(0x149),_0xdc87e8);}}catch(_0x25a8d9){throw _0x25a8d9;}finally{await(0x0,promises_1['rm'])(_0x1708e6(0x140)+_0x4820f5+'/'+_0x4a360a,{'recursive':!![]});}}exports[a55_0x2fdef5(0x155)]=retrieveZip;function a55_0x28a6(){const _0x17c6bc=['/unpackaged.zip','Body','addFile','force:mdapi:retrieve:report\x20','-r\x20.temp/','toBuffer','SFDXUtils','uuid','length','spawnPromise','mkdir','createSFDXProject','base64','(((.+)+)+)+$','getData','toString','ComponentsApi','--json\x20','src','2944185RoLZHt','SFDX','333786bQOzvz','path','.temp/','setInstanceUrl','post','2407741GQupNY','3144912RyyPwP','adm-zip','accessToken','1464208xgMuBi','SALESFORCE_API_VERSION','/sobjects/Attachment','BACKUP\x20ZIP','../../../constants','search','653074cgFfGn','defineProperty','4662636cXwiAN','clientId','fs/promises','../../git/internal/fs.internal','constructor','__importDefault','retrieveZip','instanceUrl','../utils/auth.utils','updateAccessToken','default','__esModule','../../git/salesforce/utils/sfdx.utils','sfdx','clientSecret','../utils/components-api','splitZip','isAuthorizationError','/services/data/','3uEWNcY','refreshToken'];a55_0x28a6=function(){return _0x17c6bc;};return a55_0x28a6();}async function retrieveReport(_0x10f014,_0x5716de,_0x1172a6){const _0x325fcf=a55_0x2fdef5,_0x49d79b=_0x325fcf(0x167)+_0x325fcf(0x175)+('--jobid\x20'+_0x10f014+'\x20')+(_0x325fcf(0x168)+_0x1172a6+'/'+_0x10f014+'\x20')+('-u\x20'+_0x5716de[_0x325fcf(0x146)]);await sfdx_utils_1[_0x325fcf(0x13d)][_0x325fcf(0x16d)](_0x325fcf(0x15c),_0x49d79b)['catch'](async _0x193b44=>{const _0x585840=_0x325fcf;if(sfdx_utils_2[_0x585840(0x16a)][_0x585840(0x160)](_0x193b44))return _0x5716de['accessToken']=await auth_utils_1['AuthUtils'][_0x585840(0x158)](_0x5716de[_0x585840(0x156)],_0x5716de[_0x585840(0x163)],_0x5716de[_0x585840(0x150)],_0x5716de[_0x585840(0x15d)]),retrieveReport(_0x10f014,_0x5716de,_0x1172a6);throw _0x193b44;});}