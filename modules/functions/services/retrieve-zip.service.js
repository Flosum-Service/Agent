const a87_0x2ab04d=a87_0x1fd7;(function(_0x301081,_0x3da5b3){const _0x27884f=a87_0x1fd7,_0x94aad=_0x301081();while(!![]){try{const _0x5e89fd=-parseInt(_0x27884f(0xff))/0x1*(parseInt(_0x27884f(0xc6))/0x2)+-parseInt(_0x27884f(0xd4))/0x3+-parseInt(_0x27884f(0xcb))/0x4+-parseInt(_0x27884f(0xfd))/0x5*(-parseInt(_0x27884f(0xe3))/0x6)+-parseInt(_0x27884f(0xfe))/0x7+parseInt(_0x27884f(0xc8))/0x8+-parseInt(_0x27884f(0xeb))/0x9*(-parseInt(_0x27884f(0xfb))/0xa);if(_0x5e89fd===_0x3da5b3)break;else _0x94aad['push'](_0x94aad['shift']());}catch(_0x2149c1){_0x94aad['push'](_0x94aad['shift']());}}}(a87_0x1735,0xd3bc5));const a87_0x367fc0=(function(){let _0x543e0b=!![];return function(_0x519600,_0x47ece2){const _0x5c2312=_0x543e0b?function(){const _0x406eb5=a87_0x1fd7;if(_0x47ece2){const _0x5ef0ef=_0x47ece2[_0x406eb5(0xf5)](_0x519600,arguments);return _0x47ece2=null,_0x5ef0ef;}}:function(){};return _0x543e0b=![],_0x5c2312;};}()),a87_0x1b8f75=a87_0x367fc0(this,function(){const _0x212aaa=a87_0x1fd7;return a87_0x1b8f75['toString']()[_0x212aaa(0xd3)]('(((.+)+)+)+$')[_0x212aaa(0xdd)]()[_0x212aaa(0xda)](a87_0x1b8f75)[_0x212aaa(0xd3)](_0x212aaa(0xc4));});function a87_0x1fd7(_0x2991f6,_0x3c899e){const _0x10d02d=a87_0x1735();return a87_0x1fd7=function(_0x1b8f75,_0x367fc0){_0x1b8f75=_0x1b8f75-0xc4;let _0x173552=_0x10d02d[_0x1b8f75];return _0x173552;},a87_0x1fd7(_0x2991f6,_0x3c899e);}a87_0x1b8f75();'use strict';var __importDefault=this&&this[a87_0x2ab04d(0xe6)]||function(_0x552f38){const _0x293efd=a87_0x2ab04d;return _0x552f38&&_0x552f38[_0x293efd(0xf7)]?_0x552f38:{'default':_0x552f38};};Object[a87_0x2ab04d(0xc7)](exports,'__esModule',{'value':!![]}),exports[a87_0x2ab04d(0xde)]=void 0x0;const promises_1=require(a87_0x2ab04d(0xf0)),sfdx_utils_1=require(a87_0x2ab04d(0xe5)),fs_internal_1=require('../../git/internal/fs.internal'),sfdx_utils_2=require(a87_0x2ab04d(0xd6)),auth_utils_1=require('../utils/auth.utils'),adm_zip_1=__importDefault(require(a87_0x2ab04d(0xce))),uuid_1=require('uuid'),components_api_1=require('../utils/components-api'),path_1=require(a87_0x2ab04d(0xe7));function a87_0x1735(){const _0x4a876f=['(((.+)+)+)+$','/services/data/v','218458rmqhPO','defineProperty','11257552dvbDjz','base64','updateAccessToken','2139908YfbaHN','AuthUtils','refreshToken','adm-zip','join','clientSecret','readFile','SFDXUtils','search','2074176VoltdQ','-u\x20','../utils/sfdx.utils','toBuffer','getEntries','Body','constructor','.temp/','src','toString','retrieveZip','isAuthorizationError','--jobid\x20','default','BACKUP\x20ZIP','18YXcJDk','setInstanceUrl','../../git/salesforce/utils/sfdx.utils','__importDefault','path','/unpackaged.zip','getData','accessToken','9vbAlom','force:mdapi:retrieve:report\x20','SFDX','splitZip','catch','fs/promises','instanceUrl','post','exists','spawn','apply','addFile','__esModule','/sobjects/Attachment','-r\x20.temp/','ComponentsApi','16550320gGqVdS','--json\x20','613715HoImxs','7063910jhETaa','3IpsQxh','clientId','length'];a87_0x1735=function(){return _0x4a876f;};return a87_0x1735();}async function retrieveZip({backupAsyncId:_0x3a7cd9,credentials:_0x859a48,metadataLogId:_0xbcfb25,apiVersion:_0x2aec80},_0x169947){const _0x3a78a0=a87_0x2ab04d;var _0x152ccb;const _0x2026a1=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x3a78a0(0xf3)](_0x3a78a0(0xdb)+_0x2026a1)&&await(0x0,promises_1['mkdir'])(_0x3a78a0(0xdb)+_0x2026a1,{'recursive':!![]});await sfdx_utils_2[_0x3a78a0(0xd2)]['createSFDXProject'](_0x3a7cd9,_0x2026a1),await sfdx_utils_2['SFDXUtils'][_0x3a78a0(0xe4)](_0x859a48[_0x3a78a0(0xf1)],_0x3a7cd9,_0x2026a1),await retrieveReport(_0x3a7cd9,_0x859a48,_0x2026a1);const _0x586a97=new adm_zip_1['default'](await(0x0,promises_1[_0x3a78a0(0xd1)])(_0x3a78a0(0xdb)+_0x2026a1+'/'+_0x3a7cd9+_0x3a78a0(0xe8))),_0x25f695=new adm_zip_1[(_0x3a78a0(0xe1))]();for(const {entryName:_0x2e2333}of _0x586a97[_0x3a78a0(0xd8)]()){const _0x4c973f=(_0x152ccb=_0x586a97['getEntry'](_0x2e2333))===null||_0x152ccb===void 0x0?void 0x0:_0x152ccb[_0x3a78a0(0xe9)]();_0x25f695[_0x3a78a0(0xf6)]((0x0,path_1[_0x3a78a0(0xcf)])(_0x3a78a0(0xdc),_0x2e2333),_0x4c973f);}const _0x2e4d8a=_0x25f695[_0x3a78a0(0xd7)]()[_0x3a78a0(0xdd)](_0x3a78a0(0xc9))[_0x3a78a0(0x101)];if(_0x2e4d8a>=components_api_1['MAX_ZIP_SIZE']){const [_0x263126,_0x2dc487]=await components_api_1[_0x3a78a0(0xfa)][_0x3a78a0(0xee)](_0x25f695,_0x2e4d8a),_0x376e66={'ParentId':_0xbcfb25,'Name':'BACKUP\x20ZIP','Description':'BACKUP\x20ZIP','Body':_0x263126[_0x3a78a0(0xd7)]()[_0x3a78a0(0xdd)](_0x3a78a0(0xc9))};await _0x169947['post'](_0x3a78a0(0xc5)+_0x2aec80+'/sobjects/Attachment',_0x376e66),_0x376e66[_0x3a78a0(0xd9)]=_0x2dc487[_0x3a78a0(0xd7)]()[_0x3a78a0(0xdd)]('base64'),await _0x169947[_0x3a78a0(0xf2)](_0x3a78a0(0xc5)+_0x2aec80+_0x3a78a0(0xf8),_0x376e66);}else{const _0x2aaa27={'ParentId':_0xbcfb25,'Name':'BACKUP\x20ZIP','Description':_0x3a78a0(0xe2),'Body':_0x25f695[_0x3a78a0(0xd7)]()[_0x3a78a0(0xdd)](_0x3a78a0(0xc9))};await _0x169947[_0x3a78a0(0xf2)]('/services/data/v'+_0x2aec80+_0x3a78a0(0xf8),_0x2aaa27);}}catch(_0x3ca30a){throw _0x3ca30a;}finally{await(0x0,promises_1['rm'])(_0x3a78a0(0xdb)+_0x2026a1+'/'+_0x3a7cd9,{'recursive':!![]});}}exports[a87_0x2ab04d(0xde)]=retrieveZip;async function retrieveReport(_0x543574,_0x55cb27,_0x556315){const _0x53f206=a87_0x2ab04d,_0x36b66a=_0x53f206(0xec)+_0x53f206(0xfc)+(_0x53f206(0xe0)+_0x543574+'\x20')+(_0x53f206(0xf9)+_0x556315+'/'+_0x543574+'\x20')+(_0x53f206(0xd5)+_0x55cb27['accessToken']);await sfdx_utils_1[_0x53f206(0xed)][_0x53f206(0xf4)](_0x36b66a)[_0x53f206(0xef)](async _0x112c1a=>{const _0x40c824=_0x53f206;if(sfdx_utils_2['SFDXUtils'][_0x40c824(0xdf)](_0x112c1a))return _0x55cb27[_0x40c824(0xea)]=await auth_utils_1[_0x40c824(0xcc)][_0x40c824(0xca)](_0x55cb27[_0x40c824(0xf1)],_0x55cb27[_0x40c824(0xcd)],_0x55cb27[_0x40c824(0x100)],_0x55cb27[_0x40c824(0xd0)]),retrieveReport(_0x543574,_0x55cb27,_0x556315);throw _0x112c1a;});}