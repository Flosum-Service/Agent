const a87_0x4430ce=a87_0x4da0;(function(_0x500e4e,_0x2eb230){const _0x1d8643=a87_0x4da0,_0x4a618f=_0x500e4e();while(!![]){try{const _0x293e47=-parseInt(_0x1d8643(0x198))/0x1*(parseInt(_0x1d8643(0x1a8))/0x2)+-parseInt(_0x1d8643(0x1b6))/0x3+-parseInt(_0x1d8643(0x1b2))/0x4+-parseInt(_0x1d8643(0x1a1))/0x5+parseInt(_0x1d8643(0x1a9))/0x6*(-parseInt(_0x1d8643(0x1bb))/0x7)+parseInt(_0x1d8643(0x1c7))/0x8+parseInt(_0x1d8643(0x19c))/0x9;if(_0x293e47===_0x2eb230)break;else _0x4a618f['push'](_0x4a618f['shift']());}catch(_0x5af701){_0x4a618f['push'](_0x4a618f['shift']());}}}(a87_0x5250,0xbab29));function a87_0x5250(){const _0x50aea8=['/services/data/','../../git/salesforce/utils/sfdx.utils','3919095qvSZzB','splitZip','__importDefault','constructor','exists','7CdWTMI','.temp/','(((.+)+)+)+$','length','uuid','post','-r\x20.temp/','defineProperty','src','updateAccessToken','getData','base64','11069536eCLrQP','SFDX','accessToken','clientSecret','search','ComponentsApi','../utils/auth.utils','isAuthorizationError','--json\x20','join','retrieveZip','../../git/internal/fs.internal','../utils/sfdx.utils','instanceUrl','getEntries','13714GsCJRE','toString','default','addFile','29947743ISSPAs','../../../constants','force:mdapi:retrieve:report\x20','clientId','AuthUtils','904985hrmwTa','sfdx','path','getEntry','readFile','adm-zip','SALESFORCE_API_VERSION','164fdubcU','6861054rPmOEu','MAX_ZIP_SIZE','spawnPromise','SFDXUtils','BACKUP\x20ZIP','toBuffer','/sobjects/Attachment','--jobid\x20','../utils/components-api','764348iCUlEO','Body'];a87_0x5250=function(){return _0x50aea8;};return a87_0x5250();}const a87_0x3d7b32=(function(){let _0x5b802d=!![];return function(_0x54942b,_0x2d07f2){const _0x18359d=_0x5b802d?function(){if(_0x2d07f2){const _0x106ab1=_0x2d07f2['apply'](_0x54942b,arguments);return _0x2d07f2=null,_0x106ab1;}}:function(){};return _0x5b802d=![],_0x18359d;};}()),a87_0xc4f3be=a87_0x3d7b32(this,function(){const _0x2f3b4d=a87_0x4da0;return a87_0xc4f3be[_0x2f3b4d(0x199)]()[_0x2f3b4d(0x18d)]('(((.+)+)+)+$')[_0x2f3b4d(0x199)]()[_0x2f3b4d(0x1b9)](a87_0xc4f3be)[_0x2f3b4d(0x18d)](_0x2f3b4d(0x1bd));});a87_0xc4f3be();'use strict';var __importDefault=this&&this[a87_0x4430ce(0x1b8)]||function(_0x27d34c){return _0x27d34c&&_0x27d34c['__esModule']?_0x27d34c:{'default':_0x27d34c};};Object[a87_0x4430ce(0x1c2)](exports,'__esModule',{'value':!![]}),exports['retrieveZip']=void 0x0;function a87_0x4da0(_0x30b4fa,_0x51f19a){const _0x5ae9e5=a87_0x5250();return a87_0x4da0=function(_0xc4f3be,_0x3d7b32){_0xc4f3be=_0xc4f3be-0x18c;let _0x525090=_0x5ae9e5[_0xc4f3be];return _0x525090;},a87_0x4da0(_0x30b4fa,_0x51f19a);}const constants_1=require(a87_0x4430ce(0x19d)),promises_1=require('fs/promises'),sfdx_utils_1=require(a87_0x4430ce(0x1b5)),fs_internal_1=require(a87_0x4430ce(0x194)),sfdx_utils_2=require(a87_0x4430ce(0x195)),auth_utils_1=require(a87_0x4430ce(0x18f)),adm_zip_1=__importDefault(require(a87_0x4430ce(0x1a6))),uuid_1=require(a87_0x4430ce(0x1bf)),components_api_1=require(a87_0x4430ce(0x1b1)),path_1=require(a87_0x4430ce(0x1a3));async function retrieveZip({backupAsyncId:_0x259219,credentials:_0x15e27e,metadataLogId:_0x6150f5},_0x1107a6){const _0x345728=a87_0x4430ce;var _0x607610;const _0x5c8a3f=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x345728(0x1ba)]('.temp/'+_0x5c8a3f)&&await(0x0,promises_1['mkdir'])('.temp/'+_0x5c8a3f,{'recursive':!![]});await sfdx_utils_2[_0x345728(0x1ac)]['createSFDXProject'](_0x259219,_0x5c8a3f),await sfdx_utils_2[_0x345728(0x1ac)]['setInstanceUrl'](_0x15e27e[_0x345728(0x196)],_0x259219,_0x5c8a3f),await retrieveReport(_0x259219,_0x15e27e,_0x5c8a3f);const _0x46d446=new adm_zip_1[(_0x345728(0x19a))](await(0x0,promises_1[_0x345728(0x1a5)])(_0x345728(0x1bc)+_0x5c8a3f+'/'+_0x259219+'/unpackaged.zip')),_0xf7b692=new adm_zip_1[(_0x345728(0x19a))]();for(const {entryName:_0x4f7837}of _0x46d446[_0x345728(0x197)]()){const _0x9c73a=(_0x607610=_0x46d446[_0x345728(0x1a4)](_0x4f7837))===null||_0x607610===void 0x0?void 0x0:_0x607610[_0x345728(0x1c5)]();_0xf7b692[_0x345728(0x19b)]((0x0,path_1[_0x345728(0x192)])(_0x345728(0x1c3),_0x4f7837),_0x9c73a);}const _0x467b98=_0xf7b692['toBuffer']()[_0x345728(0x199)](_0x345728(0x1c6))[_0x345728(0x1be)];if(_0x467b98>=components_api_1[_0x345728(0x1aa)]){const [_0x24edec,_0x4295b0]=await components_api_1[_0x345728(0x18e)][_0x345728(0x1b7)](_0xf7b692,_0x467b98),_0x2c21e7={'ParentId':_0x6150f5,'Name':_0x345728(0x1ad),'Description':_0x345728(0x1ad),'Body':_0x24edec[_0x345728(0x1ae)]()['toString'](_0x345728(0x1c6))};await _0x1107a6[_0x345728(0x1c0)]('/services/data/'+constants_1[_0x345728(0x1a7)]+_0x345728(0x1af),_0x2c21e7),_0x2c21e7[_0x345728(0x1b3)]=_0x4295b0['toBuffer']()[_0x345728(0x199)]('base64'),await _0x1107a6['post'](_0x345728(0x1b4)+constants_1[_0x345728(0x1a7)]+_0x345728(0x1af),_0x2c21e7);}else{const _0x166226={'ParentId':_0x6150f5,'Name':'BACKUP\x20ZIP','Description':_0x345728(0x1ad),'Body':_0xf7b692[_0x345728(0x1ae)]()[_0x345728(0x199)](_0x345728(0x1c6))};await _0x1107a6[_0x345728(0x1c0)](_0x345728(0x1b4)+constants_1[_0x345728(0x1a7)]+'/sobjects/Attachment',_0x166226);}}catch(_0x76d2d1){throw _0x76d2d1;}finally{await(0x0,promises_1['rm'])(_0x345728(0x1bc)+_0x5c8a3f+'/'+_0x259219,{'recursive':!![]});}}exports[a87_0x4430ce(0x193)]=retrieveZip;async function retrieveReport(_0x49c1ec,_0xa19047,_0x4e6988){const _0xaee7d2=a87_0x4430ce,_0x21c89d=_0xaee7d2(0x19e)+_0xaee7d2(0x191)+(_0xaee7d2(0x1b0)+_0x49c1ec+'\x20')+(_0xaee7d2(0x1c1)+_0x4e6988+'/'+_0x49c1ec+'\x20')+('-u\x20'+_0xa19047[_0xaee7d2(0x1c9)]);await sfdx_utils_1[_0xaee7d2(0x1c8)][_0xaee7d2(0x1ab)](_0xaee7d2(0x1a2),_0x21c89d)['catch'](async _0x16b0a7=>{const _0x1cfc3e=_0xaee7d2;if(sfdx_utils_2[_0x1cfc3e(0x1ac)][_0x1cfc3e(0x190)](_0x16b0a7))return _0xa19047['accessToken']=await auth_utils_1[_0x1cfc3e(0x1a0)][_0x1cfc3e(0x1c4)](_0xa19047[_0x1cfc3e(0x196)],_0xa19047['refreshToken'],_0xa19047[_0x1cfc3e(0x19f)],_0xa19047[_0x1cfc3e(0x18c)]),retrieveReport(_0x49c1ec,_0xa19047,_0x4e6988);throw _0x16b0a7;});}