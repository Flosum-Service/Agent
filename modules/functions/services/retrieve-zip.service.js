const a87_0x61a626=a87_0xb787;(function(_0x2e7f16,_0x3e5495){const _0xaa64e2=a87_0xb787,_0x2a4ba0=_0x2e7f16();while(!![]){try{const _0x153030=parseInt(_0xaa64e2(0xdb))/0x1+-parseInt(_0xaa64e2(0xc9))/0x2+parseInt(_0xaa64e2(0xd6))/0x3+parseInt(_0xaa64e2(0xd4))/0x4*(parseInt(_0xaa64e2(0xf0))/0x5)+parseInt(_0xaa64e2(0xf1))/0x6+parseInt(_0xaa64e2(0xdc))/0x7+-parseInt(_0xaa64e2(0xc8))/0x8;if(_0x153030===_0x3e5495)break;else _0x2a4ba0['push'](_0x2a4ba0['shift']());}catch(_0x5b30c0){_0x2a4ba0['push'](_0x2a4ba0['shift']());}}}(a87_0x2a1e,0xdc2d0));const a87_0xc533d4=(function(){let _0x1b7a3c=!![];return function(_0x1e581d,_0x68bb92){const _0x4529a7=_0x1b7a3c?function(){if(_0x68bb92){const _0x310d3a=_0x68bb92['apply'](_0x1e581d,arguments);return _0x68bb92=null,_0x310d3a;}}:function(){};return _0x1b7a3c=![],_0x4529a7;};}()),a87_0x721755=a87_0xc533d4(this,function(){const _0x296de7=a87_0xb787;return a87_0x721755[_0x296de7(0xd0)]()['search'](_0x296de7(0xd9))[_0x296de7(0xd0)]()['constructor'](a87_0x721755)[_0x296de7(0xe6)]('(((.+)+)+)+$');});a87_0x721755();'use strict';function a87_0x2a1e(){const _0x58ab50=['37042776EKUTMc','1675936nFRKEd','/sobjects/Attachment','post','length','adm-zip','getEntries','default','toString','.temp/','SALESFORCE_API_VERSION','MAX_ZIP_SIZE','1724936NWgSxe','refreshToken','4768191JgjgyR','setInstanceUrl','createSFDXProject','(((.+)+)+)+$','ComponentsApi','1429703widtOk','8351287YdZYwI','__importDefault','../../git/salesforce/utils/sfdx.utils','spawnPromise','exists','AuthUtils','-r\x20.temp/','updateAccessToken','../../../constants','--json\x20','search','/unpackaged.zip','accessToken','path','addFile','/services/data/','uuid','../../git/internal/fs.internal','base64','getData','20QuaJjk','2598468TnMzQH','clientId','src','../utils/auth.utils','retrieveZip','clientSecret','getEntry','../utils/components-api','../utils/sfdx.utils','--jobid\x20','BACKUP\x20ZIP','mkdir','instanceUrl','force:mdapi:retrieve:report\x20','SFDXUtils','toBuffer','__esModule'];a87_0x2a1e=function(){return _0x58ab50;};return a87_0x2a1e();}var __importDefault=this&&this[a87_0x61a626(0xdd)]||function(_0x3ff13f){return _0x3ff13f&&_0x3ff13f['__esModule']?_0x3ff13f:{'default':_0x3ff13f};};Object['defineProperty'](exports,a87_0x61a626(0xc7),{'value':!![]}),exports[a87_0x61a626(0xf5)]=void 0x0;const constants_1=require(a87_0x61a626(0xe4)),promises_1=require('fs/promises'),sfdx_utils_1=require(a87_0x61a626(0xde)),fs_internal_1=require(a87_0x61a626(0xed)),sfdx_utils_2=require(a87_0x61a626(0xbf)),auth_utils_1=require(a87_0x61a626(0xf4)),adm_zip_1=__importDefault(require(a87_0x61a626(0xcd))),uuid_1=require(a87_0x61a626(0xec)),components_api_1=require(a87_0x61a626(0xbe)),path_1=require(a87_0x61a626(0xe9));async function retrieveZip({backupAsyncId:_0xb2ea22,credentials:_0x3394eb,metadataLogId:_0x36488b},_0x1994ba){const _0x1a13a4=a87_0x61a626;var _0x487580;const _0x1698f4=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x1a13a4(0xe0)](_0x1a13a4(0xd1)+_0x1698f4)&&await(0x0,promises_1[_0x1a13a4(0xc2)])(_0x1a13a4(0xd1)+_0x1698f4,{'recursive':!![]});await sfdx_utils_2[_0x1a13a4(0xc5)][_0x1a13a4(0xd8)](_0xb2ea22,_0x1698f4),await sfdx_utils_2[_0x1a13a4(0xc5)][_0x1a13a4(0xd7)](_0x3394eb[_0x1a13a4(0xc3)],_0xb2ea22,_0x1698f4),await retrieveReport(_0xb2ea22,_0x3394eb,_0x1698f4);const _0x50091e=new adm_zip_1[(_0x1a13a4(0xcf))](await(0x0,promises_1['readFile'])(_0x1a13a4(0xd1)+_0x1698f4+'/'+_0xb2ea22+_0x1a13a4(0xe7))),_0x54fb97=new adm_zip_1[(_0x1a13a4(0xcf))]();for(const {entryName:_0x24bb70}of _0x50091e[_0x1a13a4(0xce)]()){const _0x331c71=(_0x487580=_0x50091e[_0x1a13a4(0xf7)](_0x24bb70))===null||_0x487580===void 0x0?void 0x0:_0x487580[_0x1a13a4(0xef)]();_0x54fb97[_0x1a13a4(0xea)]((0x0,path_1['join'])(_0x1a13a4(0xf3),_0x24bb70),_0x331c71);}const _0xc068b6=_0x54fb97[_0x1a13a4(0xc6)]()[_0x1a13a4(0xd0)](_0x1a13a4(0xee))[_0x1a13a4(0xcc)];if(_0xc068b6>=components_api_1[_0x1a13a4(0xd3)]){const [_0x312687,_0x49a483]=await components_api_1[_0x1a13a4(0xda)]['splitZip'](_0x54fb97,_0xc068b6),_0x2e8b6e={'ParentId':_0x36488b,'Name':_0x1a13a4(0xc1),'Description':_0x1a13a4(0xc1),'Body':_0x312687['toBuffer']()[_0x1a13a4(0xd0)](_0x1a13a4(0xee))};await _0x1994ba['post']('/services/data/'+constants_1[_0x1a13a4(0xd2)]+'/sobjects/Attachment',_0x2e8b6e),_0x2e8b6e['Body']=_0x49a483[_0x1a13a4(0xc6)]()['toString'](_0x1a13a4(0xee)),await _0x1994ba[_0x1a13a4(0xcb)](_0x1a13a4(0xeb)+constants_1['SALESFORCE_API_VERSION']+_0x1a13a4(0xca),_0x2e8b6e);}else{const _0x2c5b7b={'ParentId':_0x36488b,'Name':_0x1a13a4(0xc1),'Description':_0x1a13a4(0xc1),'Body':_0x54fb97[_0x1a13a4(0xc6)]()[_0x1a13a4(0xd0)](_0x1a13a4(0xee))};await _0x1994ba[_0x1a13a4(0xcb)](_0x1a13a4(0xeb)+constants_1[_0x1a13a4(0xd2)]+_0x1a13a4(0xca),_0x2c5b7b);}}catch(_0x58f410){throw _0x58f410;}finally{await(0x0,promises_1['rm'])(_0x1a13a4(0xd1)+_0x1698f4+'/'+_0xb2ea22,{'recursive':!![]});}}exports[a87_0x61a626(0xf5)]=retrieveZip;function a87_0xb787(_0x526098,_0x442598){const _0x2da4a4=a87_0x2a1e();return a87_0xb787=function(_0x721755,_0xc533d4){_0x721755=_0x721755-0xbe;let _0x2a1e93=_0x2da4a4[_0x721755];return _0x2a1e93;},a87_0xb787(_0x526098,_0x442598);}async function retrieveReport(_0x331bbc,_0x59db84,_0x22ed29){const _0x5cb1d4=a87_0x61a626,_0x594412=_0x5cb1d4(0xc4)+_0x5cb1d4(0xe5)+(_0x5cb1d4(0xc0)+_0x331bbc+'\x20')+(_0x5cb1d4(0xe2)+_0x22ed29+'/'+_0x331bbc+'\x20')+('-u\x20'+_0x59db84[_0x5cb1d4(0xe8)]);await sfdx_utils_1['SFDX'][_0x5cb1d4(0xdf)]('sfdx',_0x594412)['catch'](async _0x3813a8=>{const _0x533f4e=_0x5cb1d4;if(sfdx_utils_2['SFDXUtils']['isAuthorizationError'](_0x3813a8))return _0x59db84[_0x533f4e(0xe8)]=await auth_utils_1[_0x533f4e(0xe1)][_0x533f4e(0xe3)](_0x59db84['instanceUrl'],_0x59db84[_0x533f4e(0xd5)],_0x59db84[_0x533f4e(0xf2)],_0x59db84[_0x533f4e(0xf6)]),retrieveReport(_0x331bbc,_0x59db84,_0x22ed29);throw _0x3813a8;});}