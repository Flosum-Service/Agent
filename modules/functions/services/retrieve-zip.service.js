const a55_0x1925a2=a55_0x17e7;function a55_0x17e7(_0xa11bce,_0x4b78ba){const _0x52de19=a55_0xd73c();return a55_0x17e7=function(_0x57744c,_0x3d820c){_0x57744c=_0x57744c-0x95;let _0xd73cb1=_0x52de19[_0x57744c];return _0xd73cb1;},a55_0x17e7(_0xa11bce,_0x4b78ba);}(function(_0x15666d,_0x3678a0){const _0x557005=a55_0x17e7,_0x516479=_0x15666d();while(!![]){try{const _0x5b51bb=-parseInt(_0x557005(0xc5))/0x1*(-parseInt(_0x557005(0xc0))/0x2)+-parseInt(_0x557005(0xae))/0x3+-parseInt(_0x557005(0xaa))/0x4*(-parseInt(_0x557005(0xa9))/0x5)+-parseInt(_0x557005(0x9b))/0x6*(parseInt(_0x557005(0xa4))/0x7)+parseInt(_0x557005(0x99))/0x8+parseInt(_0x557005(0x98))/0x9*(parseInt(_0x557005(0xb3))/0xa)+-parseInt(_0x557005(0xb6))/0xb;if(_0x5b51bb===_0x3678a0)break;else _0x516479['push'](_0x516479['shift']());}catch(_0x34f745){_0x516479['push'](_0x516479['shift']());}}}(a55_0xd73c,0xca4a1));function a55_0xd73c(){const _0x169355=['ComponentsApi','fs/promises','exists','--jobid\x20','35HzRnBa','force:mdapi:retrieve:report\x20','mkdir','join','SALESFORCE_API_VERSION','62365iabdRx','92lrdwOL','getEntries','path','/services/data/','754443uaahAc','createSFDXProject','defineProperty','default','isAuthorizationError','20KToAMQ','../utils/auth.utils','splitZip','16856939PsobrB','spawnPromise','toString','/unpackaged.zip','base64','getData','setInstanceUrl','SFDXUtils','post','MAX_ZIP_SIZE','4610gihBPr','addFile','uuid','refreshToken','adm-zip','699DXQful','__esModule','clientId','SFDX','toBuffer','length','--json\x20','BACKUP\x20ZIP','AuthUtils','__importDefault','/sobjects/Attachment','clientSecret','../utils/components-api','(((.+)+)+)+$','accessToken','.temp/','2886021vRthQM','3629680TAvIWt','../../git/salesforce/utils/sfdx.utils','456738PXfjKH','getEntry','search','Body','../../git/internal/fs.internal'];a55_0xd73c=function(){return _0x169355;};return a55_0xd73c();}const a55_0x3d820c=(function(){let _0xe6e0e0=!![];return function(_0x3a04b1,_0x18b7bc){const _0x3053e2=_0xe6e0e0?function(){if(_0x18b7bc){const _0x52facc=_0x18b7bc['apply'](_0x3a04b1,arguments);return _0x18b7bc=null,_0x52facc;}}:function(){};return _0xe6e0e0=![],_0x3053e2;};}()),a55_0x57744c=a55_0x3d820c(this,function(){const _0x5a5804=a55_0x17e7;return a55_0x57744c[_0x5a5804(0xb8)]()[_0x5a5804(0x9d)]('(((.+)+)+)+$')[_0x5a5804(0xb8)]()['constructor'](a55_0x57744c)[_0x5a5804(0x9d)](_0x5a5804(0x95));});a55_0x57744c();'use strict';var __importDefault=this&&this[a55_0x1925a2(0xce)]||function(_0x105c91){return _0x105c91&&_0x105c91['__esModule']?_0x105c91:{'default':_0x105c91};};Object[a55_0x1925a2(0xb0)](exports,a55_0x1925a2(0xc6),{'value':!![]}),exports['retrieveZip']=void 0x0;const constants_1=require('../../../constants'),promises_1=require(a55_0x1925a2(0xa1)),sfdx_utils_1=require(a55_0x1925a2(0x9a)),fs_internal_1=require(a55_0x1925a2(0x9f)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a55_0x1925a2(0xb4)),adm_zip_1=__importDefault(require(a55_0x1925a2(0xc4))),uuid_1=require(a55_0x1925a2(0xc2)),components_api_1=require(a55_0x1925a2(0xd1)),path_1=require(a55_0x1925a2(0xac));async function retrieveZip({backupAsyncId:_0x1e18f9,credentials:_0x8d7990,metadataLogId:_0x4acde6},_0x11aa92){const _0x7dadcb=a55_0x1925a2;var _0x33f0b8;const _0x383ceb=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x7dadcb(0xa2)](_0x7dadcb(0x97)+_0x383ceb)&&await(0x0,promises_1[_0x7dadcb(0xa6)])(_0x7dadcb(0x97)+_0x383ceb,{'recursive':!![]});await sfdx_utils_2[_0x7dadcb(0xbd)][_0x7dadcb(0xaf)](_0x1e18f9,_0x383ceb),await sfdx_utils_2[_0x7dadcb(0xbd)][_0x7dadcb(0xbc)](_0x8d7990['instanceUrl'],_0x1e18f9,_0x383ceb),await retrieveReport(_0x1e18f9,_0x8d7990,_0x383ceb);const _0x83779d=new adm_zip_1['default'](await(0x0,promises_1['readFile'])(_0x7dadcb(0x97)+_0x383ceb+'/'+_0x1e18f9+_0x7dadcb(0xb9))),_0x1c55a0=new adm_zip_1[(_0x7dadcb(0xb1))]();for(const {entryName:_0x59937e}of _0x83779d[_0x7dadcb(0xab)]()){const _0x91938c=(_0x33f0b8=_0x83779d[_0x7dadcb(0x9c)](_0x59937e))===null||_0x33f0b8===void 0x0?void 0x0:_0x33f0b8[_0x7dadcb(0xbb)]();_0x1c55a0[_0x7dadcb(0xc1)]((0x0,path_1[_0x7dadcb(0xa7)])('src',_0x59937e),_0x91938c);}const _0xa8626a=_0x1c55a0['toBuffer']()[_0x7dadcb(0xb8)]('base64')[_0x7dadcb(0xca)];if(_0xa8626a>=components_api_1[_0x7dadcb(0xbf)]){const [_0x258161,_0x240980]=await components_api_1[_0x7dadcb(0xa0)][_0x7dadcb(0xb5)](_0x1c55a0,_0xa8626a),_0x2b1971={'ParentId':_0x4acde6,'Name':_0x7dadcb(0xcc),'Description':_0x7dadcb(0xcc),'Body':_0x258161[_0x7dadcb(0xc9)]()[_0x7dadcb(0xb8)](_0x7dadcb(0xba))};await _0x11aa92[_0x7dadcb(0xbe)](_0x7dadcb(0xad)+constants_1[_0x7dadcb(0xa8)]+_0x7dadcb(0xcf),_0x2b1971),_0x2b1971[_0x7dadcb(0x9e)]=_0x240980['toBuffer']()[_0x7dadcb(0xb8)](_0x7dadcb(0xba)),await _0x11aa92[_0x7dadcb(0xbe)](_0x7dadcb(0xad)+constants_1['SALESFORCE_API_VERSION']+_0x7dadcb(0xcf),_0x2b1971);}else{const _0x27fa72={'ParentId':_0x4acde6,'Name':_0x7dadcb(0xcc),'Description':_0x7dadcb(0xcc),'Body':_0x1c55a0[_0x7dadcb(0xc9)]()['toString'](_0x7dadcb(0xba))};await _0x11aa92['post'](_0x7dadcb(0xad)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment',_0x27fa72);}}catch(_0x459f18){throw _0x459f18;}finally{await(0x0,promises_1['rm'])('.temp/'+_0x383ceb+'/'+_0x1e18f9,{'recursive':!![]});}}exports['retrieveZip']=retrieveZip;async function retrieveReport(_0x4d0a72,_0x18a3d8,_0xc42e5f){const _0x2f00ca=a55_0x1925a2,_0x5892eb=_0x2f00ca(0xa5)+_0x2f00ca(0xcb)+(_0x2f00ca(0xa3)+_0x4d0a72+'\x20')+('-r\x20.temp/'+_0xc42e5f+'/'+_0x4d0a72+'\x20')+('-u\x20'+_0x18a3d8[_0x2f00ca(0x96)]);await sfdx_utils_1[_0x2f00ca(0xc8)][_0x2f00ca(0xb7)]('sfdx',_0x5892eb)['catch'](async _0x3206f8=>{const _0x51179b=_0x2f00ca;if(sfdx_utils_2[_0x51179b(0xbd)][_0x51179b(0xb2)](_0x3206f8))return _0x18a3d8[_0x51179b(0x96)]=await auth_utils_1[_0x51179b(0xcd)]['updateAccessToken'](_0x18a3d8['instanceUrl'],_0x18a3d8[_0x51179b(0xc3)],_0x18a3d8[_0x51179b(0xc7)],_0x18a3d8[_0x51179b(0xd0)]),retrieveReport(_0x4d0a72,_0x18a3d8,_0xc42e5f);throw _0x3206f8;});}