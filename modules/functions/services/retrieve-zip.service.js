const a87_0x106afb=a87_0x2da5;(function(_0x1daf53,_0x14b5bc){const _0x4890bd=a87_0x2da5,_0x2f2b37=_0x1daf53();while(!![]){try{const _0x49ff1a=parseInt(_0x4890bd(0x101))/0x1+parseInt(_0x4890bd(0x12a))/0x2*(parseInt(_0x4890bd(0xfe))/0x3)+parseInt(_0x4890bd(0x114))/0x4*(parseInt(_0x4890bd(0x110))/0x5)+-parseInt(_0x4890bd(0x10d))/0x6*(-parseInt(_0x4890bd(0x10e))/0x7)+parseInt(_0x4890bd(0x116))/0x8*(parseInt(_0x4890bd(0x130))/0x9)+-parseInt(_0x4890bd(0x111))/0xa*(parseInt(_0x4890bd(0x129))/0xb)+-parseInt(_0x4890bd(0xf3))/0xc;if(_0x49ff1a===_0x14b5bc)break;else _0x2f2b37['push'](_0x2f2b37['shift']());}catch(_0x1df652){_0x2f2b37['push'](_0x2f2b37['shift']());}}}(a87_0x953f,0x9794b));const a87_0x3d9530=(function(){let _0x522ee1=!![];return function(_0x22fa37,_0x120401){const _0x32fbfa=_0x522ee1?function(){const _0x109d23=a87_0x2da5;if(_0x120401){const _0x1f9785=_0x120401[_0x109d23(0x113)](_0x22fa37,arguments);return _0x120401=null,_0x1f9785;}}:function(){};return _0x522ee1=![],_0x32fbfa;};}()),a87_0x4eebcf=a87_0x3d9530(this,function(){const _0x8f9cbd=a87_0x2da5;return a87_0x4eebcf[_0x8f9cbd(0x127)]()[_0x8f9cbd(0x123)]('(((.+)+)+)+$')['toString']()[_0x8f9cbd(0x10a)](a87_0x4eebcf)[_0x8f9cbd(0x123)]('(((.+)+)+)+$');});function a87_0x953f(){const _0x580738=['264ggGhfu','path','clientId','513329psyNmm','fs/promises','-r\x20.temp/','retrieveZip','getEntries','adm-zip','refreshToken','.temp/','--json\x20','constructor','SFDXUtils','isAuthorizationError','13434EWxQrL','1589UqfeMy','../../git/salesforce/utils/sfdx.utils','5Efhzkc','150qEXWZe','toBuffer','apply','663436ijcQLo','../../git/internal/fs.internal','1048Vjxdpu','ComponentsApi','splitZip','createSFDXProject','../utils/sfdx.utils','uuid','addFile','--jobid\x20','src','getEntry','default','base64','/services/data/v','search','mkdir','updateAccessToken','instanceUrl','toString','exists','35981YMfVvr','27182jUrcFN','defineProperty','/unpackaged.zip','force:mdapi:retrieve:report\x20','accessToken','AuthUtils','73134taHYVe','33336180AVvRls','post','__esModule','clientSecret','join','readFile','/sobjects/Attachment','BACKUP\x20ZIP','SFDX','getData','Body'];a87_0x953f=function(){return _0x580738;};return a87_0x953f();}a87_0x4eebcf();'use strict';var __importDefault=this&&this['__importDefault']||function(_0xbd69e9){return _0xbd69e9&&_0xbd69e9['__esModule']?_0xbd69e9:{'default':_0xbd69e9};};Object[a87_0x106afb(0x12b)](exports,a87_0x106afb(0xf5),{'value':!![]}),exports['retrieveZip']=void 0x0;const promises_1=require(a87_0x106afb(0x102)),sfdx_utils_1=require(a87_0x106afb(0x10f)),fs_internal_1=require(a87_0x106afb(0x115)),sfdx_utils_2=require(a87_0x106afb(0x11a)),auth_utils_1=require('../utils/auth.utils'),adm_zip_1=__importDefault(require(a87_0x106afb(0x106))),uuid_1=require(a87_0x106afb(0x11b)),components_api_1=require('../utils/components-api'),path_1=require(a87_0x106afb(0xff));async function retrieveZip({backupAsyncId:_0x2371f0,credentials:_0x2f0f0d,metadataLogId:_0x2010b7,apiVersion:_0xbe0e71},_0x13ef7b){const _0x283cef=a87_0x106afb;var _0x2e995a;const _0xbf482e=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x283cef(0x128)](_0x283cef(0x108)+_0xbf482e)&&await(0x0,promises_1[_0x283cef(0x124)])('.temp/'+_0xbf482e,{'recursive':!![]});await sfdx_utils_2[_0x283cef(0x10b)][_0x283cef(0x119)](_0x2371f0,_0xbf482e),await sfdx_utils_2[_0x283cef(0x10b)]['setInstanceUrl'](_0x2f0f0d[_0x283cef(0x126)],_0x2371f0,_0xbf482e),await retrieveReport(_0x2371f0,_0x2f0f0d,_0xbf482e);const _0x5eb445=new adm_zip_1['default'](await(0x0,promises_1[_0x283cef(0xf8)])(_0x283cef(0x108)+_0xbf482e+'/'+_0x2371f0+_0x283cef(0x12c))),_0xb83ef6=new adm_zip_1[(_0x283cef(0x120))]();for(const {entryName:_0x8efef0}of _0x5eb445[_0x283cef(0x105)]()){const _0x364293=(_0x2e995a=_0x5eb445[_0x283cef(0x11f)](_0x8efef0))===null||_0x2e995a===void 0x0?void 0x0:_0x2e995a[_0x283cef(0xfc)]();_0xb83ef6[_0x283cef(0x11c)]((0x0,path_1[_0x283cef(0xf7)])(_0x283cef(0x11e),_0x8efef0),_0x364293);}const _0x573f2e=_0xb83ef6['toBuffer']()[_0x283cef(0x127)]('base64')['length'];if(_0x573f2e>=components_api_1['MAX_ZIP_SIZE']){const [_0xa9a9e1,_0x48f7f7]=await components_api_1[_0x283cef(0x117)][_0x283cef(0x118)](_0xb83ef6,_0x573f2e),_0x12ae9={'ParentId':_0x2010b7,'Name':_0x283cef(0xfa),'Description':_0x283cef(0xfa),'Body':_0xa9a9e1[_0x283cef(0x112)]()['toString'](_0x283cef(0x121))};await _0x13ef7b[_0x283cef(0xf4)](_0x283cef(0x122)+_0xbe0e71+_0x283cef(0xf9),_0x12ae9),_0x12ae9[_0x283cef(0xfd)]=_0x48f7f7[_0x283cef(0x112)]()[_0x283cef(0x127)](_0x283cef(0x121)),await _0x13ef7b[_0x283cef(0xf4)](_0x283cef(0x122)+_0xbe0e71+_0x283cef(0xf9),_0x12ae9);}else{const _0x1dbf81={'ParentId':_0x2010b7,'Name':'BACKUP\x20ZIP','Description':_0x283cef(0xfa),'Body':_0xb83ef6[_0x283cef(0x112)]()['toString'](_0x283cef(0x121))};await _0x13ef7b['post'](_0x283cef(0x122)+_0xbe0e71+_0x283cef(0xf9),_0x1dbf81);}}catch(_0xbb9e99){throw _0xbb9e99;}finally{await(0x0,promises_1['rm'])(_0x283cef(0x108)+_0xbf482e+'/'+_0x2371f0,{'recursive':!![]});}}exports[a87_0x106afb(0x104)]=retrieveZip;function a87_0x2da5(_0x60dea,_0x3f6fa8){const _0x41ac37=a87_0x953f();return a87_0x2da5=function(_0x4eebcf,_0x3d9530){_0x4eebcf=_0x4eebcf-0xf3;let _0x953f27=_0x41ac37[_0x4eebcf];return _0x953f27;},a87_0x2da5(_0x60dea,_0x3f6fa8);}async function retrieveReport(_0x331c28,_0x1450f6,_0x257723){const _0x33f515=a87_0x106afb,_0x516206=_0x33f515(0x12d)+_0x33f515(0x109)+(_0x33f515(0x11d)+_0x331c28+'\x20')+(_0x33f515(0x103)+_0x257723+'/'+_0x331c28+'\x20')+('-u\x20'+_0x1450f6[_0x33f515(0x12e)]);await sfdx_utils_1[_0x33f515(0xfb)]['spawn'](_0x516206)['catch'](async _0x567843=>{const _0x8b87fe=_0x33f515;if(sfdx_utils_2[_0x8b87fe(0x10b)][_0x8b87fe(0x10c)](_0x567843))return _0x1450f6[_0x8b87fe(0x12e)]=await auth_utils_1[_0x8b87fe(0x12f)][_0x8b87fe(0x125)](_0x1450f6[_0x8b87fe(0x126)],_0x1450f6[_0x8b87fe(0x107)],_0x1450f6[_0x8b87fe(0x100)],_0x1450f6[_0x8b87fe(0xf6)]),retrieveReport(_0x331c28,_0x1450f6,_0x257723);throw _0x567843;});}