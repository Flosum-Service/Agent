const a105_0x538c2f=a105_0x4caa;(function(_0x4c79b7,_0x53c888){const _0x4639d7=a105_0x4caa,_0x49c1aa=_0x4c79b7();while(!![]){try{const _0x3a43a3=parseInt(_0x4639d7(0x11a))/0x1*(-parseInt(_0x4639d7(0x124))/0x2)+parseInt(_0x4639d7(0x101))/0x3+parseInt(_0x4639d7(0xf7))/0x4+parseInt(_0x4639d7(0x116))/0x5+-parseInt(_0x4639d7(0xff))/0x6*(-parseInt(_0x4639d7(0x12b))/0x7)+-parseInt(_0x4639d7(0x105))/0x8*(parseInt(_0x4639d7(0xfd))/0x9)+-parseInt(_0x4639d7(0x127))/0xa;if(_0x3a43a3===_0x53c888)break;else _0x49c1aa['push'](_0x49c1aa['shift']());}catch(_0x13a4cb){_0x49c1aa['push'](_0x49c1aa['shift']());}}}(a105_0x2c64,0xe6a2f));const a105_0x4eb60a=(function(){let _0x2ce879=!![];return function(_0xbbda5c,_0x2bf971){const _0x59aef7=_0x2ce879?function(){const _0x20f979=a105_0x4caa;if(_0x2bf971){const _0x1591a5=_0x2bf971[_0x20f979(0x11c)](_0xbbda5c,arguments);return _0x2bf971=null,_0x1591a5;}}:function(){};return _0x2ce879=![],_0x59aef7;};}()),a105_0x392135=a105_0x4eb60a(this,function(){const _0x75d36e=a105_0x4caa;return a105_0x392135[_0x75d36e(0x10e)]()[_0x75d36e(0x11f)]('(((.+)+)+)+$')[_0x75d36e(0x10e)]()[_0x75d36e(0x111)](a105_0x392135)[_0x75d36e(0x11f)](_0x75d36e(0x11d));});a105_0x392135();'use strict';var __importDefault=this&&this[a105_0x538c2f(0xf6)]||function(_0x2ca46b){return _0x2ca46b&&_0x2ca46b['__esModule']?_0x2ca46b:{'default':_0x2ca46b};};function a105_0x2c64(){const _0x493241=['post','4862205qViQmd','__esModule','.temp/','base64','32qvoanB','refreshToken','getEntry','getData','readFile','path','uuid','clientSecret','length','toString','../utils/auth.utils','--json\x20','constructor','getEntries','addFile','updateAccessToken','toBuffer','243995cTwWjT','BACKUP\x20ZIP','../utils/components-api','adm-zip','5CaErTL','createSFDXProject','apply','(((.+)+)+)+$','defineProperty','search','SFDXUtils','spawn','AuthUtils','clientId','364678CSkBnm','join','SFDX','2288790nsbSgG','/sobjects/Attachment','Body','-u\x20','381479MEqNHu','default','catch','force:mdapi:retrieve:report\x20','instanceUrl','../utils/sfdx.utils','isAuthorizationError','/unpackaged.zip','__importDefault','6058272WeWrQI','../../git/salesforce/utils/sfdx.utils','/services/data/v','ComponentsApi','accessToken','../../git/internal/fs.internal','3821193CTNZbI','src','66SdfruB'];a105_0x2c64=function(){return _0x493241;};return a105_0x2c64();}Object[a105_0x538c2f(0x11e)](exports,a105_0x538c2f(0x102),{'value':!![]}),exports['retrieveZip']=void 0x0;const promises_1=require('fs/promises'),sfdx_utils_1=require(a105_0x538c2f(0xf8)),fs_internal_1=require(a105_0x538c2f(0xfc)),sfdx_utils_2=require(a105_0x538c2f(0x130)),auth_utils_1=require(a105_0x538c2f(0x10f)),adm_zip_1=__importDefault(require(a105_0x538c2f(0x119))),uuid_1=require(a105_0x538c2f(0x10b)),components_api_1=require(a105_0x538c2f(0x118)),path_1=require(a105_0x538c2f(0x10a));function a105_0x4caa(_0x26f4ef,_0x40fd56){const _0x20f6fa=a105_0x2c64();return a105_0x4caa=function(_0x392135,_0x4eb60a){_0x392135=_0x392135-0xf6;let _0x2c64f8=_0x20f6fa[_0x392135];return _0x2c64f8;},a105_0x4caa(_0x26f4ef,_0x40fd56);}async function retrieveZip({backupAsyncId:_0xd5a566,credentials:_0x2df01c,metadataLogId:_0x52b83a,apiVersion:_0x36d90d},_0x5d2c3b){const _0x2bcdb7=a105_0x538c2f;var _0x17bd43;const _0x41a547=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS']['exists'](_0x2bcdb7(0x103)+_0x41a547)&&await(0x0,promises_1['mkdir'])(_0x2bcdb7(0x103)+_0x41a547,{'recursive':!![]});await sfdx_utils_2[_0x2bcdb7(0x120)][_0x2bcdb7(0x11b)](_0xd5a566,_0x41a547),await sfdx_utils_2[_0x2bcdb7(0x120)]['setInstanceUrl'](_0x2df01c['instanceUrl'],_0xd5a566,_0x41a547),await retrieveReport(_0xd5a566,_0x2df01c,_0x41a547);const _0x43d655=new adm_zip_1['default'](await(0x0,promises_1[_0x2bcdb7(0x109)])(_0x2bcdb7(0x103)+_0x41a547+'/'+_0xd5a566+_0x2bcdb7(0x132))),_0x2cbb27=new adm_zip_1[(_0x2bcdb7(0x12c))]();for(const {entryName:_0x540646}of _0x43d655[_0x2bcdb7(0x112)]()){const _0x5a3a81=(_0x17bd43=_0x43d655[_0x2bcdb7(0x107)](_0x540646))===null||_0x17bd43===void 0x0?void 0x0:_0x17bd43[_0x2bcdb7(0x108)]();_0x2cbb27[_0x2bcdb7(0x113)]((0x0,path_1[_0x2bcdb7(0x125)])(_0x2bcdb7(0xfe),_0x540646),_0x5a3a81);}const _0x404b69=_0x2cbb27[_0x2bcdb7(0x115)]()[_0x2bcdb7(0x10e)](_0x2bcdb7(0x104))[_0x2bcdb7(0x10d)];if(_0x404b69>=components_api_1['MAX_ZIP_SIZE']){const [_0x208443,_0x582d08]=await components_api_1[_0x2bcdb7(0xfa)]['splitZip'](_0x2cbb27,_0x404b69),_0x472842={'ParentId':_0x52b83a,'Name':_0x2bcdb7(0x117),'Description':_0x2bcdb7(0x117),'Body':_0x208443[_0x2bcdb7(0x115)]()[_0x2bcdb7(0x10e)]('base64')};await _0x5d2c3b[_0x2bcdb7(0x100)](_0x2bcdb7(0xf9)+_0x36d90d+_0x2bcdb7(0x128),_0x472842),_0x472842[_0x2bcdb7(0x129)]=_0x582d08[_0x2bcdb7(0x115)]()[_0x2bcdb7(0x10e)](_0x2bcdb7(0x104)),await _0x5d2c3b[_0x2bcdb7(0x100)](_0x2bcdb7(0xf9)+_0x36d90d+'/sobjects/Attachment',_0x472842);}else{const _0x11639e={'ParentId':_0x52b83a,'Name':_0x2bcdb7(0x117),'Description':_0x2bcdb7(0x117),'Body':_0x2cbb27['toBuffer']()[_0x2bcdb7(0x10e)](_0x2bcdb7(0x104))};await _0x5d2c3b[_0x2bcdb7(0x100)](_0x2bcdb7(0xf9)+_0x36d90d+_0x2bcdb7(0x128),_0x11639e);}}catch(_0x248f68){throw _0x248f68;}finally{await(0x0,promises_1['rm'])(_0x2bcdb7(0x103)+_0x41a547+'/'+_0xd5a566,{'recursive':!![]});}}exports['retrieveZip']=retrieveZip;async function retrieveReport(_0x228beb,_0x3c103b,_0x58afa6){const _0x313816=a105_0x538c2f,_0x3342e0=_0x313816(0x12e)+_0x313816(0x110)+('--jobid\x20'+_0x228beb+'\x20')+('-r\x20.temp/'+_0x58afa6+'/'+_0x228beb+'\x20')+(_0x313816(0x12a)+_0x3c103b[_0x313816(0xfb)]);await sfdx_utils_1[_0x313816(0x126)][_0x313816(0x121)](_0x3342e0)[_0x313816(0x12d)](async _0x75db71=>{const _0x1bcade=_0x313816;if(sfdx_utils_2[_0x1bcade(0x120)][_0x1bcade(0x131)](_0x75db71))return _0x3c103b[_0x1bcade(0xfb)]=await auth_utils_1[_0x1bcade(0x122)][_0x1bcade(0x114)](_0x3c103b[_0x1bcade(0x12f)],_0x3c103b[_0x1bcade(0x106)],_0x3c103b[_0x1bcade(0x123)],_0x3c103b[_0x1bcade(0x10c)]),retrieveReport(_0x228beb,_0x3c103b,_0x58afa6);throw _0x75db71;});}