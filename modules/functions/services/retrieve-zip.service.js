const a86_0xa706c2=a86_0x2e3c;(function(_0x36e423,_0x38e919){const _0x5c08f9=a86_0x2e3c,_0x134226=_0x36e423();while(!![]){try{const _0x5a9b7d=-parseInt(_0x5c08f9(0x1c3))/0x1*(-parseInt(_0x5c08f9(0x1af))/0x2)+parseInt(_0x5c08f9(0x1a7))/0x3*(-parseInt(_0x5c08f9(0x18f))/0x4)+-parseInt(_0x5c08f9(0x1ce))/0x5*(-parseInt(_0x5c08f9(0x1cd))/0x6)+parseInt(_0x5c08f9(0x1aa))/0x7*(-parseInt(_0x5c08f9(0x1c7))/0x8)+-parseInt(_0x5c08f9(0x1bc))/0x9*(parseInt(_0x5c08f9(0x1cb))/0xa)+parseInt(_0x5c08f9(0x1be))/0xb*(-parseInt(_0x5c08f9(0x1b6))/0xc)+parseInt(_0x5c08f9(0x19c))/0xd*(parseInt(_0x5c08f9(0x1b2))/0xe);if(_0x5a9b7d===_0x38e919)break;else _0x134226['push'](_0x134226['shift']());}catch(_0x1592ec){_0x134226['push'](_0x134226['shift']());}}}(a86_0x2c2b,0xc5741));const a86_0x5debc0=(function(){let _0x134195=!![];return function(_0x3a70d6,_0x597f0d){const _0x4510f8=_0x134195?function(){if(_0x597f0d){const _0x2e7734=_0x597f0d['apply'](_0x3a70d6,arguments);return _0x597f0d=null,_0x2e7734;}}:function(){};return _0x134195=![],_0x4510f8;};}()),a86_0x599d75=a86_0x5debc0(this,function(){const _0x234aa1=a86_0x2e3c;return a86_0x599d75[_0x234aa1(0x1ac)]()[_0x234aa1(0x19e)](_0x234aa1(0x1bd))[_0x234aa1(0x1ac)]()[_0x234aa1(0x1a6)](a86_0x599d75)[_0x234aa1(0x19e)](_0x234aa1(0x1bd));});a86_0x599d75();'use strict';var __importDefault=this&&this[a86_0xa706c2(0x1a9)]||function(_0x2095e2){const _0x5d38bd=a86_0xa706c2;return _0x2095e2&&_0x2095e2[_0x5d38bd(0x19f)]?_0x2095e2:{'default':_0x2095e2};};Object[a86_0xa706c2(0x1ae)](exports,a86_0xa706c2(0x19f),{'value':!![]}),exports[a86_0xa706c2(0x1a5)]=void 0x0;const constants_1=require(a86_0xa706c2(0x198)),promises_1=require('fs/promises'),sfdx_utils_1=require(a86_0xa706c2(0x1b8)),fs_internal_1=require('../../git/internal/fs.internal'),sfdx_utils_2=require(a86_0xa706c2(0x1cc)),auth_utils_1=require(a86_0xa706c2(0x1b5)),adm_zip_1=__importDefault(require(a86_0xa706c2(0x194))),uuid_1=require(a86_0xa706c2(0x1c4)),components_api_1=require(a86_0xa706c2(0x193)),path_1=require(a86_0xa706c2(0x1b1));function a86_0x2c2b(){const _0x2e25b8=['87400ZBovCi','--jobid\x20','catch','AuthUtils','250JynvTp','../utils/sfdx.utils','330qpRKgo','14410QZgqLz','sfdx','splitZip','16viQHIz','src','spawnPromise','SALESFORCE_API_VERSION','../utils/components-api','adm-zip','--json\x20','-r\x20.temp/','BACKUP\x20ZIP','../../../constants','Body','join','-u\x20','742807KmvXbu','toBuffer','search','__esModule','length','base64','force:mdapi:retrieve:report\x20','getData','/sobjects/Attachment','retrieveZip','constructor','484539jfZLOd','accessToken','__importDefault','175lpKUuo','/services/data/','toString','updateAccessToken','defineProperty','8HLybKL','post','path','364FyNJYG','setInstanceUrl','SFDX','../utils/auth.utils','313332dofVMU','MAX_ZIP_SIZE','../../git/salesforce/utils/sfdx.utils','readFile','.temp/','SFDXUtils','97236Hkvmoh','(((.+)+)+)+$','506gCJipV','createSFDXProject','/unpackaged.zip','mkdir','isAuthorizationError','388757xRVJFu','uuid','clientId','clientSecret'];a86_0x2c2b=function(){return _0x2e25b8;};return a86_0x2c2b();}async function retrieveZip({backupAsyncId:_0x420584,credentials:_0xa3e85f,metadataLogId:_0x2366dc},_0x1f799d){const _0x22aa40=a86_0xa706c2;var _0x295f0b;const _0x30d89c=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS']['exists']('.temp/'+_0x30d89c)&&await(0x0,promises_1[_0x22aa40(0x1c1)])('.temp/'+_0x30d89c,{'recursive':!![]});await sfdx_utils_2[_0x22aa40(0x1bb)][_0x22aa40(0x1bf)](_0x420584,_0x30d89c),await sfdx_utils_2[_0x22aa40(0x1bb)][_0x22aa40(0x1b3)](_0xa3e85f['instanceUrl'],_0x420584,_0x30d89c),await retrieveReport(_0x420584,_0xa3e85f,_0x30d89c);const _0x4f7a72=new adm_zip_1['default'](await(0x0,promises_1[_0x22aa40(0x1b9)])('.temp/'+_0x30d89c+'/'+_0x420584+_0x22aa40(0x1c0))),_0x4f888c=new adm_zip_1['default']();for(const {entryName:_0x34077a}of _0x4f7a72['getEntries']()){const _0x410046=(_0x295f0b=_0x4f7a72['getEntry'](_0x34077a))===null||_0x295f0b===void 0x0?void 0x0:_0x295f0b[_0x22aa40(0x1a3)]();_0x4f888c['addFile']((0x0,path_1[_0x22aa40(0x19a)])(_0x22aa40(0x190),_0x34077a),_0x410046);}const _0x3be66c=_0x4f888c[_0x22aa40(0x19d)]()[_0x22aa40(0x1ac)](_0x22aa40(0x1a1))[_0x22aa40(0x1a0)];if(_0x3be66c>=components_api_1[_0x22aa40(0x1b7)]){const [_0x4c77c6,_0x221a70]=await components_api_1['ComponentsApi'][_0x22aa40(0x1d0)](_0x4f888c,_0x3be66c),_0x960dee={'ParentId':_0x2366dc,'Name':_0x22aa40(0x197),'Description':'BACKUP\x20ZIP','Body':_0x4c77c6[_0x22aa40(0x19d)]()[_0x22aa40(0x1ac)]('base64')};await _0x1f799d['post']('/services/data/'+constants_1[_0x22aa40(0x192)]+_0x22aa40(0x1a4),_0x960dee),_0x960dee[_0x22aa40(0x199)]=_0x221a70[_0x22aa40(0x19d)]()[_0x22aa40(0x1ac)]('base64'),await _0x1f799d['post']('/services/data/'+constants_1[_0x22aa40(0x192)]+_0x22aa40(0x1a4),_0x960dee);}else{const _0x350ff1={'ParentId':_0x2366dc,'Name':_0x22aa40(0x197),'Description':_0x22aa40(0x197),'Body':_0x4f888c[_0x22aa40(0x19d)]()['toString'](_0x22aa40(0x1a1))};await _0x1f799d[_0x22aa40(0x1b0)](_0x22aa40(0x1ab)+constants_1[_0x22aa40(0x192)]+_0x22aa40(0x1a4),_0x350ff1);}}catch(_0x38c6e9){throw _0x38c6e9;}finally{await(0x0,promises_1['rm'])(_0x22aa40(0x1ba)+_0x30d89c+'/'+_0x420584,{'recursive':!![]});}}exports[a86_0xa706c2(0x1a5)]=retrieveZip;function a86_0x2e3c(_0x5a8f10,_0x3c5803){const _0x12f921=a86_0x2c2b();return a86_0x2e3c=function(_0x599d75,_0x5debc0){_0x599d75=_0x599d75-0x18f;let _0x2c2be6=_0x12f921[_0x599d75];return _0x2c2be6;},a86_0x2e3c(_0x5a8f10,_0x3c5803);}async function retrieveReport(_0xef3901,_0x456a2a,_0x55c097){const _0x40a0d5=a86_0xa706c2,_0x36ec39=_0x40a0d5(0x1a2)+_0x40a0d5(0x195)+(_0x40a0d5(0x1c8)+_0xef3901+'\x20')+(_0x40a0d5(0x196)+_0x55c097+'/'+_0xef3901+'\x20')+(_0x40a0d5(0x19b)+_0x456a2a[_0x40a0d5(0x1a8)]);await sfdx_utils_1[_0x40a0d5(0x1b4)][_0x40a0d5(0x191)](_0x40a0d5(0x1cf),_0x36ec39)[_0x40a0d5(0x1c9)](async _0x5e42e2=>{const _0x2348eb=_0x40a0d5;if(sfdx_utils_2[_0x2348eb(0x1bb)][_0x2348eb(0x1c2)](_0x5e42e2))return _0x456a2a[_0x2348eb(0x1a8)]=await auth_utils_1[_0x2348eb(0x1ca)][_0x2348eb(0x1ad)](_0x456a2a['instanceUrl'],_0x456a2a['refreshToken'],_0x456a2a[_0x2348eb(0x1c5)],_0x456a2a[_0x2348eb(0x1c6)]),retrieveReport(_0xef3901,_0x456a2a,_0x55c097);throw _0x5e42e2;});}