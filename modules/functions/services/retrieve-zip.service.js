const a86_0x1263e9=a86_0x34fa;(function(_0x51010d,_0x1155bf){const _0x5de61c=a86_0x34fa,_0x572422=_0x51010d();while(!![]){try{const _0x4d2e3e=parseInt(_0x5de61c(0xa0))/0x1*(parseInt(_0x5de61c(0xa7))/0x2)+parseInt(_0x5de61c(0xb2))/0x3+-parseInt(_0x5de61c(0x78))/0x4+-parseInt(_0x5de61c(0x85))/0x5+-parseInt(_0x5de61c(0x99))/0x6*(-parseInt(_0x5de61c(0x8f))/0x7)+parseInt(_0x5de61c(0x98))/0x8+-parseInt(_0x5de61c(0xa3))/0x9*(parseInt(_0x5de61c(0xb3))/0xa);if(_0x4d2e3e===_0x1155bf)break;else _0x572422['push'](_0x572422['shift']());}catch(_0x296429){_0x572422['push'](_0x572422['shift']());}}}(a86_0x3fac,0x4bae1));const a86_0x586b8a=(function(){let _0x1fc2a0=!![];return function(_0x1c963c,_0x39d3e0){const _0x12045b=_0x1fc2a0?function(){const _0x250305=a86_0x34fa;if(_0x39d3e0){const _0x26a26d=_0x39d3e0[_0x250305(0xb0)](_0x1c963c,arguments);return _0x39d3e0=null,_0x26a26d;}}:function(){};return _0x1fc2a0=![],_0x12045b;};}()),a86_0xc39926=a86_0x586b8a(this,function(){const _0x552a58=a86_0x34fa;return a86_0xc39926[_0x552a58(0x79)]()[_0x552a58(0x9f)](_0x552a58(0x7b))[_0x552a58(0x79)]()[_0x552a58(0x8e)](a86_0xc39926)[_0x552a58(0x9f)]('(((.+)+)+)+$');});a86_0xc39926();function a86_0x34fa(_0x39429f,_0x3c70a9){const _0x399a3d=a86_0x3fac();return a86_0x34fa=function(_0xc39926,_0x586b8a){_0xc39926=_0xc39926-0x75;let _0x3facaa=_0x399a3d[_0xc39926];return _0x3facaa;},a86_0x34fa(_0x39429f,_0x3c70a9);}'use strict';var __importDefault=this&&this[a86_0x1263e9(0xa1)]||function(_0x415643){return _0x415643&&_0x415643['__esModule']?_0x415643:{'default':_0x415643};};Object[a86_0x1263e9(0x90)](exports,'__esModule',{'value':!![]}),exports[a86_0x1263e9(0x76)]=void 0x0;const constants_1=require(a86_0x1263e9(0x88)),promises_1=require('fs/promises'),sfdx_utils_1=require(a86_0x1263e9(0x9b)),fs_internal_1=require(a86_0x1263e9(0x94)),sfdx_utils_2=require(a86_0x1263e9(0xab)),auth_utils_1=require(a86_0x1263e9(0x80)),adm_zip_1=__importDefault(require(a86_0x1263e9(0xa6))),uuid_1=require(a86_0x1263e9(0x7d)),components_api_1=require(a86_0x1263e9(0x77)),path_1=require(a86_0x1263e9(0xa5));async function retrieveZip({backupAsyncId:_0x18325c,credentials:_0x2e9121,metadataLogId:_0x5ade9e},_0x49561f){const _0x8ce3c2=a86_0x1263e9;var _0x56449b;const _0x23f74a=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x8ce3c2(0x96)]('.temp/'+_0x23f74a)&&await(0x0,promises_1[_0x8ce3c2(0xad)])(_0x8ce3c2(0x91)+_0x23f74a,{'recursive':!![]});await sfdx_utils_2['SFDXUtils'][_0x8ce3c2(0x95)](_0x18325c,_0x23f74a),await sfdx_utils_2[_0x8ce3c2(0x87)][_0x8ce3c2(0x8c)](_0x2e9121['instanceUrl'],_0x18325c,_0x23f74a),await retrieveReport(_0x18325c,_0x2e9121,_0x23f74a);const _0x17e420=new adm_zip_1['default'](await(0x0,promises_1[_0x8ce3c2(0xaa)])(_0x8ce3c2(0x91)+_0x23f74a+'/'+_0x18325c+_0x8ce3c2(0x9a))),_0x179954=new adm_zip_1[(_0x8ce3c2(0x8a))]();for(const {entryName:_0x799c04}of _0x17e420[_0x8ce3c2(0x9c)]()){const _0x535136=(_0x56449b=_0x17e420['getEntry'](_0x799c04))===null||_0x56449b===void 0x0?void 0x0:_0x56449b[_0x8ce3c2(0x7e)]();_0x179954['addFile']((0x0,path_1['join'])(_0x8ce3c2(0x97),_0x799c04),_0x535136);}const _0x404ece=_0x179954[_0x8ce3c2(0x81)]()[_0x8ce3c2(0x79)]('base64')[_0x8ce3c2(0x7c)];if(_0x404ece>=components_api_1[_0x8ce3c2(0x9d)]){const [_0x49cf2f,_0x2316aa]=await components_api_1[_0x8ce3c2(0xaf)][_0x8ce3c2(0xae)](_0x179954,_0x404ece),_0x11b084={'ParentId':_0x5ade9e,'Name':_0x8ce3c2(0x75),'Description':_0x8ce3c2(0x75),'Body':_0x49cf2f[_0x8ce3c2(0x81)]()[_0x8ce3c2(0x79)](_0x8ce3c2(0x82))};await _0x49561f[_0x8ce3c2(0x7a)]('/services/data/'+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment',_0x11b084),_0x11b084['Body']=_0x2316aa[_0x8ce3c2(0x81)]()[_0x8ce3c2(0x79)](_0x8ce3c2(0x82)),await _0x49561f[_0x8ce3c2(0x7a)]('/services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x8ce3c2(0x83),_0x11b084);}else{const _0x2877c0={'ParentId':_0x5ade9e,'Name':_0x8ce3c2(0x75),'Description':'BACKUP\x20ZIP','Body':_0x179954[_0x8ce3c2(0x81)]()[_0x8ce3c2(0x79)](_0x8ce3c2(0x82))};await _0x49561f[_0x8ce3c2(0x7a)](_0x8ce3c2(0x8b)+constants_1[_0x8ce3c2(0xa8)]+_0x8ce3c2(0x83),_0x2877c0);}}catch(_0x57f64c){throw _0x57f64c;}finally{await(0x0,promises_1['rm'])('.temp/'+_0x23f74a+'/'+_0x18325c,{'recursive':!![]});}}function a86_0x3fac(){const _0x5ed65b=['readFile','../utils/sfdx.utils','accessToken','mkdir','splitZip','ComponentsApi','apply','refreshToken','1387821DYGMoL','10iGdWlq','BACKUP\x20ZIP','retrieveZip','../utils/components-api','1442012vUXFLa','toString','post','(((.+)+)+)+$','length','uuid','getData','clientSecret','../utils/auth.utils','toBuffer','base64','/sobjects/Attachment','--json\x20','2983600UJwMLZ','catch','SFDXUtils','../../../constants','updateAccessToken','default','/services/data/','setInstanceUrl','instanceUrl','constructor','7psdeEa','defineProperty','.temp/','force:mdapi:retrieve:report\x20','sfdx','../../git/internal/fs.internal','createSFDXProject','exists','src','3075608pWrzMZ','453108gnjDPc','/unpackaged.zip','../../git/salesforce/utils/sfdx.utils','getEntries','MAX_ZIP_SIZE','isAuthorizationError','search','7TupMeC','__importDefault','-u\x20','1225593cHogOT','SFDX','path','adm-zip','137374BZRNpX','SALESFORCE_API_VERSION','spawnPromise'];a86_0x3fac=function(){return _0x5ed65b;};return a86_0x3fac();}exports[a86_0x1263e9(0x76)]=retrieveZip;async function retrieveReport(_0x43f980,_0x13891f,_0x4f5ff4){const _0x28a882=a86_0x1263e9,_0x4ae3ef=_0x28a882(0x92)+_0x28a882(0x84)+('--jobid\x20'+_0x43f980+'\x20')+('-r\x20.temp/'+_0x4f5ff4+'/'+_0x43f980+'\x20')+(_0x28a882(0xa2)+_0x13891f[_0x28a882(0xac)]);await sfdx_utils_1[_0x28a882(0xa4)][_0x28a882(0xa9)](_0x28a882(0x93),_0x4ae3ef)[_0x28a882(0x86)](async _0x58601b=>{const _0x9f1f0a=_0x28a882;if(sfdx_utils_2[_0x9f1f0a(0x87)][_0x9f1f0a(0x9e)](_0x58601b))return _0x13891f[_0x9f1f0a(0xac)]=await auth_utils_1['AuthUtils'][_0x9f1f0a(0x89)](_0x13891f[_0x9f1f0a(0x8d)],_0x13891f[_0x9f1f0a(0xb1)],_0x13891f['clientId'],_0x13891f[_0x9f1f0a(0x7f)]),retrieveReport(_0x43f980,_0x13891f,_0x4f5ff4);throw _0x58601b;});}