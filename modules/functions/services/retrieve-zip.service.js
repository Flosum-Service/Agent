const a105_0x177801=a105_0x16eb;(function(_0x59aa2c,_0x3bd473){const _0x829a79=a105_0x16eb,_0x2692c9=_0x59aa2c();while(!![]){try{const _0x44c514=-parseInt(_0x829a79(0x110))/0x1*(parseInt(_0x829a79(0x109))/0x2)+parseInt(_0x829a79(0xde))/0x3*(-parseInt(_0x829a79(0xdd))/0x4)+parseInt(_0x829a79(0x104))/0x5+-parseInt(_0x829a79(0xf3))/0x6+parseInt(_0x829a79(0xfc))/0x7*(-parseInt(_0x829a79(0x101))/0x8)+parseInt(_0x829a79(0xdf))/0x9*(parseInt(_0x829a79(0xee))/0xa)+parseInt(_0x829a79(0xea))/0xb;if(_0x44c514===_0x3bd473)break;else _0x2692c9['push'](_0x2692c9['shift']());}catch(_0x4bc77f){_0x2692c9['push'](_0x2692c9['shift']());}}}(a105_0x3ce7,0x57446));const a105_0x3cadf5=(function(){let _0xb3b92d=!![];return function(_0x1e059f,_0x5a762b){const _0x21e1cd=_0xb3b92d?function(){const _0x818153=a105_0x16eb;if(_0x5a762b){const _0x454a74=_0x5a762b[_0x818153(0xed)](_0x1e059f,arguments);return _0x5a762b=null,_0x454a74;}}:function(){};return _0xb3b92d=![],_0x21e1cd;};}()),a105_0x271abf=a105_0x3cadf5(this,function(){const _0x35ff8e=a105_0x16eb;return a105_0x271abf[_0x35ff8e(0x111)]()[_0x35ff8e(0xec)](_0x35ff8e(0xe4))[_0x35ff8e(0x111)]()['constructor'](a105_0x271abf)[_0x35ff8e(0xec)](_0x35ff8e(0xe4));});a105_0x271abf();'use strict';var __importDefault=this&&this[a105_0x177801(0xfa)]||function(_0x40e5c7){const _0x273dc2=a105_0x177801;return _0x40e5c7&&_0x40e5c7[_0x273dc2(0xe0)]?_0x40e5c7:{'default':_0x40e5c7};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['retrieveZip']=void 0x0;function a105_0x3ce7(){const _0xc79bd=['(((.+)+)+)+$','MAX_ZIP_SIZE','../utils/auth.utils','path','join','length','10917313zoVeba','fs/promises','search','apply','50PvSsoW','isAuthorizationError','ComponentsApi','createSFDXProject','.temp/','1266546uwYMlN','splitZip','/services/data/v','toBuffer','exists','refreshToken','../../git/salesforce/utils/sfdx.utils','__importDefault','/unpackaged.zip','1493870AgLIUj','--json\x20','accessToken','base64','setInstanceUrl','24uyEXaF','../utils/components-api','-r\x20.temp/','1478445OMFZWM','/sobjects/Attachment','clientSecret','clientId','../utils/sfdx.utils','230634lwSRIj','post','default','getEntries','updateAccessToken','addFile','readFile','5PVPrqj','toString','BACKUP\x20ZIP','retrieveZip','instanceUrl','getData','src','SFDXUtils','spawn','force:mdapi:retrieve:report\x20','625540DikKKB','3oldydS','1176417okPfus','__esModule','adm-zip','catch','mkdir'];a105_0x3ce7=function(){return _0xc79bd;};return a105_0x3ce7();}const promises_1=require(a105_0x177801(0xeb)),sfdx_utils_1=require(a105_0x177801(0xf9)),fs_internal_1=require('../../git/internal/fs.internal'),sfdx_utils_2=require(a105_0x177801(0x108)),auth_utils_1=require(a105_0x177801(0xe6)),adm_zip_1=__importDefault(require(a105_0x177801(0xe1))),uuid_1=require('uuid'),components_api_1=require(a105_0x177801(0x102)),path_1=require(a105_0x177801(0xe7));async function retrieveZip({backupAsyncId:_0x18d002,credentials:_0x4e47c2,metadataLogId:_0x208019,apiVersion:_0x1eb1f7},_0x50c342){const _0x53b2f2=a105_0x177801;var _0x2d968a;const _0x32d748=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x53b2f2(0xf7)]('.temp/'+_0x32d748)&&await(0x0,promises_1[_0x53b2f2(0xe3)])(_0x53b2f2(0xf2)+_0x32d748,{'recursive':!![]});await sfdx_utils_2[_0x53b2f2(0x117)][_0x53b2f2(0xf1)](_0x18d002,_0x32d748),await sfdx_utils_2[_0x53b2f2(0x117)][_0x53b2f2(0x100)](_0x4e47c2[_0x53b2f2(0x114)],_0x18d002,_0x32d748),await retrieveReport(_0x18d002,_0x4e47c2,_0x32d748);const _0x2ad8de=new adm_zip_1[(_0x53b2f2(0x10b))](await(0x0,promises_1[_0x53b2f2(0x10f)])(_0x53b2f2(0xf2)+_0x32d748+'/'+_0x18d002+_0x53b2f2(0xfb))),_0x170d19=new adm_zip_1[(_0x53b2f2(0x10b))]();for(const {entryName:_0xa187ac}of _0x2ad8de[_0x53b2f2(0x10c)]()){const _0xc430f5=(_0x2d968a=_0x2ad8de['getEntry'](_0xa187ac))===null||_0x2d968a===void 0x0?void 0x0:_0x2d968a[_0x53b2f2(0x115)]();_0x170d19[_0x53b2f2(0x10e)]((0x0,path_1[_0x53b2f2(0xe8)])(_0x53b2f2(0x116),_0xa187ac),_0xc430f5);}const _0x1d0fe7=_0x170d19[_0x53b2f2(0xf6)]()[_0x53b2f2(0x111)]('base64')[_0x53b2f2(0xe9)];if(_0x1d0fe7>=components_api_1[_0x53b2f2(0xe5)]){const [_0x312a97,_0x58b0cc]=await components_api_1[_0x53b2f2(0xf0)][_0x53b2f2(0xf4)](_0x170d19,_0x1d0fe7),_0x1e2ab7={'ParentId':_0x208019,'Name':_0x53b2f2(0x112),'Description':'BACKUP\x20ZIP','Body':_0x312a97['toBuffer']()['toString'](_0x53b2f2(0xff))};await _0x50c342[_0x53b2f2(0x10a)](_0x53b2f2(0xf5)+_0x1eb1f7+_0x53b2f2(0x105),_0x1e2ab7),_0x1e2ab7['Body']=_0x58b0cc['toBuffer']()[_0x53b2f2(0x111)](_0x53b2f2(0xff)),await _0x50c342[_0x53b2f2(0x10a)]('/services/data/v'+_0x1eb1f7+'/sobjects/Attachment',_0x1e2ab7);}else{const _0x2741b7={'ParentId':_0x208019,'Name':_0x53b2f2(0x112),'Description':'BACKUP\x20ZIP','Body':_0x170d19['toBuffer']()[_0x53b2f2(0x111)](_0x53b2f2(0xff))};await _0x50c342[_0x53b2f2(0x10a)](_0x53b2f2(0xf5)+_0x1eb1f7+_0x53b2f2(0x105),_0x2741b7);}}catch(_0x304f2d){throw _0x304f2d;}finally{await(0x0,promises_1['rm'])('.temp/'+_0x32d748+'/'+_0x18d002,{'recursive':!![]});}}exports[a105_0x177801(0x113)]=retrieveZip;function a105_0x16eb(_0x9bbdf4,_0x59f5e9){const _0x56ef93=a105_0x3ce7();return a105_0x16eb=function(_0x271abf,_0x3cadf5){_0x271abf=_0x271abf-0xdb;let _0x3ce7ca=_0x56ef93[_0x271abf];return _0x3ce7ca;},a105_0x16eb(_0x9bbdf4,_0x59f5e9);}async function retrieveReport(_0x2daf3f,_0x5cb3ca,_0x2e5b49){const _0x2ff6eb=a105_0x177801,_0x5e03d9=_0x2ff6eb(0xdc)+_0x2ff6eb(0xfd)+('--jobid\x20'+_0x2daf3f+'\x20')+(_0x2ff6eb(0x103)+_0x2e5b49+'/'+_0x2daf3f+'\x20')+('-u\x20'+_0x5cb3ca[_0x2ff6eb(0xfe)]);await sfdx_utils_1['SFDX'][_0x2ff6eb(0xdb)](_0x5e03d9)[_0x2ff6eb(0xe2)](async _0x57720f=>{const _0x1e936d=_0x2ff6eb;if(sfdx_utils_2[_0x1e936d(0x117)][_0x1e936d(0xef)](_0x57720f))return _0x5cb3ca['accessToken']=await auth_utils_1['AuthUtils'][_0x1e936d(0x10d)](_0x5cb3ca['instanceUrl'],_0x5cb3ca[_0x1e936d(0xf8)],_0x5cb3ca[_0x1e936d(0x107)],_0x5cb3ca[_0x1e936d(0x106)]),retrieveReport(_0x2daf3f,_0x5cb3ca,_0x2e5b49);throw _0x57720f;});}