const a105_0x2a0cfc=a105_0x37d6;(function(_0x51cf09,_0x152825){const _0x22fb9f=a105_0x37d6,_0x10779a=_0x51cf09();while(!![]){try{const _0x3f25b3=parseInt(_0x22fb9f(0x199))/0x1+-parseInt(_0x22fb9f(0x16f))/0x2+parseInt(_0x22fb9f(0x179))/0x3*(-parseInt(_0x22fb9f(0x194))/0x4)+parseInt(_0x22fb9f(0x19c))/0x5*(-parseInt(_0x22fb9f(0x171))/0x6)+-parseInt(_0x22fb9f(0x176))/0x7+-parseInt(_0x22fb9f(0x193))/0x8+parseInt(_0x22fb9f(0x187))/0x9*(parseInt(_0x22fb9f(0x177))/0xa);if(_0x3f25b3===_0x152825)break;else _0x10779a['push'](_0x10779a['shift']());}catch(_0x496fc0){_0x10779a['push'](_0x10779a['shift']());}}}(a105_0x30e6,0xe2ae6));const a105_0x29c4e2=(function(){let _0xed5755=!![];return function(_0x56c890,_0x34bcec){const _0x379a61=_0xed5755?function(){const _0x5356b9=a105_0x37d6;if(_0x34bcec){const _0x59f463=_0x34bcec[_0x5356b9(0x17a)](_0x56c890,arguments);return _0x34bcec=null,_0x59f463;}}:function(){};return _0xed5755=![],_0x379a61;};}()),a105_0x47fd0f=a105_0x29c4e2(this,function(){const _0x2d69d8=a105_0x37d6;return a105_0x47fd0f[_0x2d69d8(0x16d)]()[_0x2d69d8(0x195)](_0x2d69d8(0x19a))[_0x2d69d8(0x16d)]()[_0x2d69d8(0x1a2)](a105_0x47fd0f)[_0x2d69d8(0x195)]('(((.+)+)+)+$');});a105_0x47fd0f();function a105_0x37d6(_0x39080f,_0x3dd8ec){const _0x1eca9b=a105_0x30e6();return a105_0x37d6=function(_0x47fd0f,_0x29c4e2){_0x47fd0f=_0x47fd0f-0x16d;let _0x30e6a8=_0x1eca9b[_0x47fd0f];return _0x30e6a8;},a105_0x37d6(_0x39080f,_0x3dd8ec);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x49cc37){return _0x49cc37&&_0x49cc37['__esModule']?_0x49cc37:{'default':_0x49cc37};};Object[a105_0x2a0cfc(0x178)](exports,'__esModule',{'value':!![]}),exports['retrieveZip']=void 0x0;const promises_1=require(a105_0x2a0cfc(0x17b)),sfdx_utils_1=require(a105_0x2a0cfc(0x174)),fs_internal_1=require('../../git/internal/fs.internal'),sfdx_utils_2=require(a105_0x2a0cfc(0x190)),auth_utils_1=require(a105_0x2a0cfc(0x19d)),adm_zip_1=__importDefault(require(a105_0x2a0cfc(0x18a))),uuid_1=require(a105_0x2a0cfc(0x186)),components_api_1=require('../utils/components-api'),path_1=require(a105_0x2a0cfc(0x17c));async function retrieveZip({backupAsyncId:_0x44fbe6,credentials:_0x1d6bb5,metadataLogId:_0x5c35d3,apiVersion:_0xd8cf99},_0x22c975){const _0xfde1c=a105_0x2a0cfc;var _0x1d05ed;const _0x4b5953=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS']['exists']('.temp/'+_0x4b5953)&&await(0x0,promises_1[_0xfde1c(0x1a1)])(_0xfde1c(0x185)+_0x4b5953,{'recursive':!![]});await sfdx_utils_2[_0xfde1c(0x184)]['createSFDXProject'](_0x44fbe6,_0x4b5953),await sfdx_utils_2['SFDXUtils'][_0xfde1c(0x17e)](_0x1d6bb5[_0xfde1c(0x173)],_0x44fbe6,_0x4b5953),await retrieveReport(_0x44fbe6,_0x1d6bb5,_0x4b5953);const _0x593b55=new adm_zip_1[(_0xfde1c(0x183))](await(0x0,promises_1['readFile'])(_0xfde1c(0x185)+_0x4b5953+'/'+_0x44fbe6+'/unpackaged.zip')),_0x1131e8=new adm_zip_1[(_0xfde1c(0x183))]();for(const {entryName:_0x44df84}of _0x593b55[_0xfde1c(0x18f)]()){const _0x5b0538=(_0x1d05ed=_0x593b55[_0xfde1c(0x196)](_0x44df84))===null||_0x1d05ed===void 0x0?void 0x0:_0x1d05ed[_0xfde1c(0x1a0)]();_0x1131e8['addFile']((0x0,path_1['join'])(_0xfde1c(0x18d),_0x44df84),_0x5b0538);}const _0x1d039e=_0x1131e8[_0xfde1c(0x181)]()[_0xfde1c(0x16d)](_0xfde1c(0x17d))[_0xfde1c(0x18c)];if(_0x1d039e>=components_api_1[_0xfde1c(0x175)]){const [_0x1b9d55,_0xace82c]=await components_api_1['ComponentsApi'][_0xfde1c(0x18b)](_0x1131e8,_0x1d039e),_0x503a5f={'ParentId':_0x5c35d3,'Name':'BACKUP\x20ZIP','Description':_0xfde1c(0x192),'Body':_0x1b9d55[_0xfde1c(0x181)]()[_0xfde1c(0x16d)](_0xfde1c(0x17d))};await _0x22c975[_0xfde1c(0x197)](_0xfde1c(0x188)+_0xd8cf99+_0xfde1c(0x180),_0x503a5f),_0x503a5f['Body']=_0xace82c[_0xfde1c(0x181)]()[_0xfde1c(0x16d)](_0xfde1c(0x17d)),await _0x22c975['post'](_0xfde1c(0x188)+_0xd8cf99+_0xfde1c(0x180),_0x503a5f);}else{const _0x17ab10={'ParentId':_0x5c35d3,'Name':_0xfde1c(0x192),'Description':_0xfde1c(0x192),'Body':_0x1131e8['toBuffer']()['toString'](_0xfde1c(0x17d))};await _0x22c975[_0xfde1c(0x197)]('/services/data/v'+_0xd8cf99+_0xfde1c(0x180),_0x17ab10);}}catch(_0x274136){throw _0x274136;}finally{await(0x0,promises_1['rm'])(_0xfde1c(0x185)+_0x4b5953+'/'+_0x44fbe6,{'recursive':!![]});}}exports['retrieveZip']=retrieveZip;function a105_0x30e6(){const _0x33e2ba=['src','clientId','getEntries','../utils/sfdx.utils','--json\x20','BACKUP\x20ZIP','5183440bPYSQF','229048ixkQCw','search','getEntry','post','refreshToken','118789rEkCXc','(((.+)+)+)+$','catch','285TEAZNH','../utils/auth.utils','clientSecret','force:mdapi:retrieve:report\x20','getData','mkdir','constructor','toString','-r\x20.temp/','1568796zNZtrS','accessToken','34014nMPRtL','AuthUtils','instanceUrl','../../git/salesforce/utils/sfdx.utils','MAX_ZIP_SIZE','10205832JwfHBq','210QPgZNL','defineProperty','48JuuZVb','apply','fs/promises','path','base64','setInstanceUrl','updateAccessToken','/sobjects/Attachment','toBuffer','-u\x20','default','SFDXUtils','.temp/','uuid','2116854uizmJO','/services/data/v','isAuthorizationError','adm-zip','splitZip','length'];a105_0x30e6=function(){return _0x33e2ba;};return a105_0x30e6();}async function retrieveReport(_0x412849,_0x3d3c53,_0x2e0108){const _0x3b0eae=a105_0x2a0cfc,_0x3e4467=_0x3b0eae(0x19f)+_0x3b0eae(0x191)+('--jobid\x20'+_0x412849+'\x20')+(_0x3b0eae(0x16e)+_0x2e0108+'/'+_0x412849+'\x20')+(_0x3b0eae(0x182)+_0x3d3c53[_0x3b0eae(0x170)]);await sfdx_utils_1['SFDX']['spawn'](_0x3e4467)[_0x3b0eae(0x19b)](async _0x2715c0=>{const _0x1ff961=_0x3b0eae;if(sfdx_utils_2[_0x1ff961(0x184)][_0x1ff961(0x189)](_0x2715c0))return _0x3d3c53[_0x1ff961(0x170)]=await auth_utils_1[_0x1ff961(0x172)][_0x1ff961(0x17f)](_0x3d3c53[_0x1ff961(0x173)],_0x3d3c53[_0x1ff961(0x198)],_0x3d3c53[_0x1ff961(0x18e)],_0x3d3c53[_0x1ff961(0x19e)]),retrieveReport(_0x412849,_0x3d3c53,_0x2e0108);throw _0x2715c0;});}