const a86_0x562f33=a86_0x2fbf;(function(_0x4f701d,_0x532bc3){const _0x123182=a86_0x2fbf,_0x37c9fe=_0x4f701d();while(!![]){try{const _0xfa3065=parseInt(_0x123182(0x199))/0x1*(-parseInt(_0x123182(0x19a))/0x2)+parseInt(_0x123182(0x1a4))/0x3+parseInt(_0x123182(0x19c))/0x4+parseInt(_0x123182(0x19e))/0x5+-parseInt(_0x123182(0x19f))/0x6+-parseInt(_0x123182(0x1a9))/0x7*(parseInt(_0x123182(0x1b2))/0x8)+-parseInt(_0x123182(0x1c4))/0x9;if(_0xfa3065===_0x532bc3)break;else _0x37c9fe['push'](_0x37c9fe['shift']());}catch(_0x51b617){_0x37c9fe['push'](_0x37c9fe['shift']());}}}(a86_0x1371,0x9f13a));const a86_0x20c832=(function(){let _0x2c83cb=!![];return function(_0x120abe,_0x4c80af){const _0x5c0ce1=_0x2c83cb?function(){const _0x5afe6f=a86_0x2fbf;if(_0x4c80af){const _0x4b3847=_0x4c80af[_0x5afe6f(0x19b)](_0x120abe,arguments);return _0x4c80af=null,_0x4b3847;}}:function(){};return _0x2c83cb=![],_0x5c0ce1;};}()),a86_0x3d2095=a86_0x20c832(this,function(){const _0x1d33ed=a86_0x2fbf;return a86_0x3d2095['toString']()[_0x1d33ed(0x1bc)](_0x1d33ed(0x1ab))['toString']()[_0x1d33ed(0x18e)](a86_0x3d2095)[_0x1d33ed(0x1bc)](_0x1d33ed(0x1ab));});a86_0x3d2095();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5cf59d){return _0x5cf59d&&_0x5cf59d['__esModule']?_0x5cf59d:{'default':_0x5cf59d};};function a86_0x1371(){const _0x728d79=['readFile','constructor','refreshToken','getEntries','retrieveZip','isAuthorizationError','length','../utils/components-api','getEntry','AuthUtils','default','SALESFORCE_API_VERSION','15LUgLMo','56270HFsVzB','apply','4355132UBtnti','defineProperty','2435845jlyAQO','1309062nKYCBw','--json\x20','/services/data/','splitZip','join','1630170APFIGN','path','.temp/','../utils/auth.utils','-r\x20.temp/','70kssKOB','mkdir','(((.+)+)+)+$','fs/promises','BACKUP\x20ZIP','toString','updateAccessToken','uuid','MAX_ZIP_SIZE','105864CYsEFD','-u\x20','instanceUrl','clientId','exists','../utils/sfdx.utils','addFile','toBuffer','setInstanceUrl','SFDXUtils','search','accessToken','../../../constants','Body','src','../../git/internal/fs.internal','adm-zip','getData','6257088lsgoGw','post','SFDX','force:mdapi:retrieve:report\x20','base64','sfdx','--jobid\x20','createSFDXProject'];a86_0x1371=function(){return _0x728d79;};return a86_0x1371();}Object[a86_0x562f33(0x19d)](exports,'__esModule',{'value':!![]}),exports['retrieveZip']=void 0x0;const constants_1=require(a86_0x562f33(0x1be)),promises_1=require(a86_0x562f33(0x1ac)),sfdx_utils_1=require('../../git/salesforce/utils/sfdx.utils'),fs_internal_1=require(a86_0x562f33(0x1c1)),sfdx_utils_2=require(a86_0x562f33(0x1b7)),auth_utils_1=require(a86_0x562f33(0x1a7)),adm_zip_1=__importDefault(require(a86_0x562f33(0x1c2))),uuid_1=require(a86_0x562f33(0x1b0)),components_api_1=require(a86_0x562f33(0x194)),path_1=require(a86_0x562f33(0x1a5));async function retrieveZip({backupAsyncId:_0x51deaf,credentials:_0x4f4f9e,metadataLogId:_0x566897},_0x4f4a16){const _0x22fc65=a86_0x562f33;var _0x246d52;const _0x5c695f=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x22fc65(0x1b6)]('.temp/'+_0x5c695f)&&await(0x0,promises_1[_0x22fc65(0x1aa)])(_0x22fc65(0x1a6)+_0x5c695f,{'recursive':!![]});await sfdx_utils_2[_0x22fc65(0x1bb)][_0x22fc65(0x18c)](_0x51deaf,_0x5c695f),await sfdx_utils_2[_0x22fc65(0x1bb)][_0x22fc65(0x1ba)](_0x4f4f9e[_0x22fc65(0x1b4)],_0x51deaf,_0x5c695f),await retrieveReport(_0x51deaf,_0x4f4f9e,_0x5c695f);const _0x4c0e0c=new adm_zip_1[(_0x22fc65(0x197))](await(0x0,promises_1[_0x22fc65(0x18d)])(_0x22fc65(0x1a6)+_0x5c695f+'/'+_0x51deaf+'/unpackaged.zip')),_0x1b349f=new adm_zip_1[(_0x22fc65(0x197))]();for(const {entryName:_0x2ffec5}of _0x4c0e0c[_0x22fc65(0x190)]()){const _0x38ddc1=(_0x246d52=_0x4c0e0c[_0x22fc65(0x195)](_0x2ffec5))===null||_0x246d52===void 0x0?void 0x0:_0x246d52[_0x22fc65(0x1c3)]();_0x1b349f[_0x22fc65(0x1b8)]((0x0,path_1[_0x22fc65(0x1a3)])(_0x22fc65(0x1c0),_0x2ffec5),_0x38ddc1);}const _0x5cbb47=_0x1b349f[_0x22fc65(0x1b9)]()['toString'](_0x22fc65(0x1c8))[_0x22fc65(0x193)];if(_0x5cbb47>=components_api_1[_0x22fc65(0x1b1)]){const [_0x29cd4e,_0x5f31b7]=await components_api_1['ComponentsApi'][_0x22fc65(0x1a2)](_0x1b349f,_0x5cbb47),_0x32e805={'ParentId':_0x566897,'Name':_0x22fc65(0x1ad),'Description':_0x22fc65(0x1ad),'Body':_0x29cd4e[_0x22fc65(0x1b9)]()['toString']('base64')};await _0x4f4a16[_0x22fc65(0x1c5)](_0x22fc65(0x1a1)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment',_0x32e805),_0x32e805[_0x22fc65(0x1bf)]=_0x5f31b7[_0x22fc65(0x1b9)]()[_0x22fc65(0x1ae)](_0x22fc65(0x1c8)),await _0x4f4a16[_0x22fc65(0x1c5)](_0x22fc65(0x1a1)+constants_1[_0x22fc65(0x198)]+'/sobjects/Attachment',_0x32e805);}else{const _0x1d38ac={'ParentId':_0x566897,'Name':_0x22fc65(0x1ad),'Description':_0x22fc65(0x1ad),'Body':_0x1b349f[_0x22fc65(0x1b9)]()[_0x22fc65(0x1ae)](_0x22fc65(0x1c8))};await _0x4f4a16[_0x22fc65(0x1c5)](_0x22fc65(0x1a1)+constants_1[_0x22fc65(0x198)]+'/sobjects/Attachment',_0x1d38ac);}}catch(_0x34ec45){throw _0x34ec45;}finally{await(0x0,promises_1['rm'])('.temp/'+_0x5c695f+'/'+_0x51deaf,{'recursive':!![]});}}function a86_0x2fbf(_0x592a0d,_0x345a6f){const _0x385f28=a86_0x1371();return a86_0x2fbf=function(_0x3d2095,_0x20c832){_0x3d2095=_0x3d2095-0x18b;let _0x137197=_0x385f28[_0x3d2095];return _0x137197;},a86_0x2fbf(_0x592a0d,_0x345a6f);}exports[a86_0x562f33(0x191)]=retrieveZip;async function retrieveReport(_0x5ae2f0,_0x2d0aaa,_0x41e6dd){const _0x25cb17=a86_0x562f33,_0x121d23=_0x25cb17(0x1c7)+_0x25cb17(0x1a0)+(_0x25cb17(0x18b)+_0x5ae2f0+'\x20')+(_0x25cb17(0x1a8)+_0x41e6dd+'/'+_0x5ae2f0+'\x20')+(_0x25cb17(0x1b3)+_0x2d0aaa['accessToken']);await sfdx_utils_1[_0x25cb17(0x1c6)]['spawnPromise'](_0x25cb17(0x1c9),_0x121d23)['catch'](async _0x3f1a66=>{const _0x43c9a6=_0x25cb17;if(sfdx_utils_2['SFDXUtils'][_0x43c9a6(0x192)](_0x3f1a66))return _0x2d0aaa[_0x43c9a6(0x1bd)]=await auth_utils_1[_0x43c9a6(0x196)][_0x43c9a6(0x1af)](_0x2d0aaa[_0x43c9a6(0x1b4)],_0x2d0aaa[_0x43c9a6(0x18f)],_0x2d0aaa[_0x43c9a6(0x1b5)],_0x2d0aaa['clientSecret']),retrieveReport(_0x5ae2f0,_0x2d0aaa,_0x41e6dd);throw _0x3f1a66;});}