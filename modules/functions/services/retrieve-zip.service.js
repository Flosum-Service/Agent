const a87_0x335f03=a87_0x6a23;(function(_0x23f25b,_0x113644){const _0x3a9f65=a87_0x6a23,_0x29372c=_0x23f25b();while(!![]){try{const _0x421e5e=parseInt(_0x3a9f65(0x199))/0x1+-parseInt(_0x3a9f65(0x19b))/0x2*(-parseInt(_0x3a9f65(0x16d))/0x3)+parseInt(_0x3a9f65(0x185))/0x4*(-parseInt(_0x3a9f65(0x172))/0x5)+-parseInt(_0x3a9f65(0x164))/0x6+-parseInt(_0x3a9f65(0x181))/0x7*(parseInt(_0x3a9f65(0x19c))/0x8)+-parseInt(_0x3a9f65(0x160))/0x9+parseInt(_0x3a9f65(0x16e))/0xa*(parseInt(_0x3a9f65(0x163))/0xb);if(_0x421e5e===_0x113644)break;else _0x29372c['push'](_0x29372c['shift']());}catch(_0x4d52a8){_0x29372c['push'](_0x29372c['shift']());}}}(a87_0x4a8e,0x5997b));const a87_0x4b1e63=(function(){let _0x1cb2a5=!![];return function(_0x1a7b05,_0x3200ab){const _0x31ff5d=_0x1cb2a5?function(){const _0x1b6857=a87_0x6a23;if(_0x3200ab){const _0xcb776b=_0x3200ab[_0x1b6857(0x191)](_0x1a7b05,arguments);return _0x3200ab=null,_0xcb776b;}}:function(){};return _0x1cb2a5=![],_0x31ff5d;};}()),a87_0x3baec1=a87_0x4b1e63(this,function(){const _0xa6e012=a87_0x6a23;return a87_0x3baec1[_0xa6e012(0x16b)]()['search'](_0xa6e012(0x189))[_0xa6e012(0x16b)]()[_0xa6e012(0x161)](a87_0x3baec1)[_0xa6e012(0x173)](_0xa6e012(0x189));});a87_0x3baec1();'use strict';var __importDefault=this&&this[a87_0x335f03(0x162)]||function(_0x7cc98b){const _0x1c1620=a87_0x335f03;return _0x7cc98b&&_0x7cc98b[_0x1c1620(0x17a)]?_0x7cc98b:{'default':_0x7cc98b};};function a87_0x6a23(_0xfa3077,_0x18f8c5){const _0x3d8339=a87_0x4a8e();return a87_0x6a23=function(_0x3baec1,_0x4b1e63){_0x3baec1=_0x3baec1-0x160;let _0x4a8e21=_0x3d8339[_0x3baec1];return _0x4a8e21;},a87_0x6a23(_0xfa3077,_0x18f8c5);}Object[a87_0x335f03(0x168)](exports,'__esModule',{'value':!![]}),exports[a87_0x335f03(0x16f)]=void 0x0;const constants_1=require(a87_0x335f03(0x197)),promises_1=require('fs/promises'),sfdx_utils_1=require(a87_0x335f03(0x178)),fs_internal_1=require(a87_0x335f03(0x194)),sfdx_utils_2=require(a87_0x335f03(0x179)),auth_utils_1=require(a87_0x335f03(0x16a)),adm_zip_1=__importDefault(require('adm-zip')),uuid_1=require(a87_0x335f03(0x195)),components_api_1=require(a87_0x335f03(0x180)),path_1=require(a87_0x335f03(0x165));async function retrieveZip({backupAsyncId:_0x57159a,credentials:_0x28bc43,metadataLogId:_0x2eac55},_0x2b5649){const _0xf51a66=a87_0x335f03;var _0x3da501;const _0x266f3f=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0xf51a66(0x174)](_0xf51a66(0x18c)+_0x266f3f)&&await(0x0,promises_1['mkdir'])('.temp/'+_0x266f3f,{'recursive':!![]});await sfdx_utils_2[_0xf51a66(0x18f)][_0xf51a66(0x17b)](_0x57159a,_0x266f3f),await sfdx_utils_2[_0xf51a66(0x18f)][_0xf51a66(0x18d)](_0x28bc43[_0xf51a66(0x17c)],_0x57159a,_0x266f3f),await retrieveReport(_0x57159a,_0x28bc43,_0x266f3f);const _0x3d80de=new adm_zip_1[(_0xf51a66(0x190))](await(0x0,promises_1[_0xf51a66(0x186)])('.temp/'+_0x266f3f+'/'+_0x57159a+'/unpackaged.zip')),_0x58e23a=new adm_zip_1[(_0xf51a66(0x190))]();for(const {entryName:_0x5ed352}of _0x3d80de['getEntries']()){const _0x333ef0=(_0x3da501=_0x3d80de[_0xf51a66(0x17f)](_0x5ed352))===null||_0x3da501===void 0x0?void 0x0:_0x3da501[_0xf51a66(0x182)]();_0x58e23a[_0xf51a66(0x192)]((0x0,path_1[_0xf51a66(0x18e)])(_0xf51a66(0x193),_0x5ed352),_0x333ef0);}const _0x258788=_0x58e23a[_0xf51a66(0x184)]()[_0xf51a66(0x16b)](_0xf51a66(0x167))[_0xf51a66(0x18a)];if(_0x258788>=components_api_1['MAX_ZIP_SIZE']){const [_0x521137,_0xf05619]=await components_api_1[_0xf51a66(0x16c)]['splitZip'](_0x58e23a,_0x258788),_0x50a640={'ParentId':_0x2eac55,'Name':'BACKUP\x20ZIP','Description':_0xf51a66(0x19a),'Body':_0x521137[_0xf51a66(0x184)]()['toString'](_0xf51a66(0x167))};await _0x2b5649[_0xf51a66(0x170)](_0xf51a66(0x18b)+constants_1[_0xf51a66(0x183)]+_0xf51a66(0x166),_0x50a640),_0x50a640['Body']=_0xf05619[_0xf51a66(0x184)]()['toString'](_0xf51a66(0x167)),await _0x2b5649[_0xf51a66(0x170)](_0xf51a66(0x18b)+constants_1[_0xf51a66(0x183)]+_0xf51a66(0x166),_0x50a640);}else{const _0xcbcb40={'ParentId':_0x2eac55,'Name':_0xf51a66(0x19a),'Description':_0xf51a66(0x19a),'Body':_0x58e23a['toBuffer']()['toString'](_0xf51a66(0x167))};await _0x2b5649[_0xf51a66(0x170)](_0xf51a66(0x18b)+constants_1['SALESFORCE_API_VERSION']+_0xf51a66(0x166),_0xcbcb40);}}catch(_0x142f37){throw _0x142f37;}finally{await(0x0,promises_1['rm'])(_0xf51a66(0x18c)+_0x266f3f+'/'+_0x57159a,{'recursive':!![]});}}exports[a87_0x335f03(0x16f)]=retrieveZip;async function retrieveReport(_0x429072,_0x2747c0,_0x44e909){const _0x2d1cd6=a87_0x335f03,_0x51456='force:mdapi:retrieve:report\x20'+'--json\x20'+('--jobid\x20'+_0x429072+'\x20')+(_0x2d1cd6(0x177)+_0x44e909+'/'+_0x429072+'\x20')+(_0x2d1cd6(0x196)+_0x2747c0[_0x2d1cd6(0x171)]);await sfdx_utils_1[_0x2d1cd6(0x169)]['spawnPromise'](_0x2d1cd6(0x175),_0x51456)[_0x2d1cd6(0x17d)](async _0x387732=>{const _0x48dc90=_0x2d1cd6;if(sfdx_utils_2['SFDXUtils'][_0x48dc90(0x187)](_0x387732))return _0x2747c0[_0x48dc90(0x171)]=await auth_utils_1[_0x48dc90(0x17e)][_0x48dc90(0x198)](_0x2747c0[_0x48dc90(0x17c)],_0x2747c0[_0x48dc90(0x176)],_0x2747c0['clientId'],_0x2747c0[_0x48dc90(0x188)]),retrieveReport(_0x429072,_0x2747c0,_0x44e909);throw _0x387732;});}function a87_0x4a8e(){const _0x262867=['__esModule','createSFDXProject','instanceUrl','catch','AuthUtils','getEntry','../utils/components-api','3254104ogRTKh','getData','SALESFORCE_API_VERSION','toBuffer','2382772jCOEPh','readFile','isAuthorizationError','clientSecret','(((.+)+)+)+$','length','/services/data/','.temp/','setInstanceUrl','join','SFDXUtils','default','apply','addFile','src','../../git/internal/fs.internal','uuid','-u\x20','../../../constants','updateAccessToken','210706gwUWVQ','BACKUP\x20ZIP','128YVjSgG','8RjffKo','4355766fBBnmS','constructor','__importDefault','9650212KXuptj','1973880UugcTV','path','/sobjects/Attachment','base64','defineProperty','SFDX','../utils/auth.utils','toString','ComponentsApi','12900NfVwqM','20sFgKGt','retrieveZip','post','accessToken','5JWxBir','search','exists','sfdx','refreshToken','-r\x20.temp/','../../git/salesforce/utils/sfdx.utils','../utils/sfdx.utils'];a87_0x4a8e=function(){return _0x262867;};return a87_0x4a8e();}