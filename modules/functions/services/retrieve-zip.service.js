const a86_0x1bc93d=a86_0x109f;(function(_0x410afd,_0x5d2efb){const _0x3daca5=a86_0x109f,_0x23a63d=_0x410afd();while(!![]){try{const _0x490431=parseInt(_0x3daca5(0xc6))/0x1+-parseInt(_0x3daca5(0x99))/0x2+parseInt(_0x3daca5(0x9e))/0x3*(parseInt(_0x3daca5(0x9d))/0x4)+parseInt(_0x3daca5(0xc1))/0x5*(-parseInt(_0x3daca5(0xa6))/0x6)+parseInt(_0x3daca5(0xad))/0x7*(-parseInt(_0x3daca5(0xc7))/0x8)+parseInt(_0x3daca5(0xb2))/0x9+parseInt(_0x3daca5(0xc8))/0xa*(parseInt(_0x3daca5(0x95))/0xb);if(_0x490431===_0x5d2efb)break;else _0x23a63d['push'](_0x23a63d['shift']());}catch(_0x3918bf){_0x23a63d['push'](_0x23a63d['shift']());}}}(a86_0x51f8,0x2416f));const a86_0x4d66fe=(function(){let _0x5e1581=!![];return function(_0x462b49,_0x7f6b07){const _0x3f9c2f=_0x5e1581?function(){if(_0x7f6b07){const _0x5d0b31=_0x7f6b07['apply'](_0x462b49,arguments);return _0x7f6b07=null,_0x5d0b31;}}:function(){};return _0x5e1581=![],_0x3f9c2f;};}()),a86_0x5da24c=a86_0x4d66fe(this,function(){const _0x4d9399=a86_0x109f;return a86_0x5da24c[_0x4d9399(0xbc)]()[_0x4d9399(0xb8)](_0x4d9399(0xc5))[_0x4d9399(0xbc)]()['constructor'](a86_0x5da24c)[_0x4d9399(0xb8)](_0x4d9399(0xc5));});a86_0x5da24c();'use strict';var __importDefault=this&&this[a86_0x1bc93d(0xa8)]||function(_0x1bd725){const _0x142c6f=a86_0x1bc93d;return _0x1bd725&&_0x1bd725[_0x142c6f(0xca)]?_0x1bd725:{'default':_0x1bd725};};function a86_0x51f8(){const _0x4bb6c2=['default','-r\x20.temp/','accessToken','isAuthorizationError','getData','createSFDXProject','30TAmvpy','--jobid\x20','__importDefault','clientSecret','readFile','setInstanceUrl','getEntries','7cHqQvj','../../git/salesforce/utils/sfdx.utils','retrieveZip','../../../constants','src','459432LmIlhi','AuthUtils','/unpackaged.zip','-u\x20','fs/promises','uuid','search','clientId','BACKUP\x20ZIP','/sobjects/Attachment','toString','.temp/','splitZip','getEntry','ComponentsApi','171940SOcOKM','base64','SALESFORCE_API_VERSION','post','(((.+)+)+)+$','3583nbqPuA','378856DrMDTd','710prEpXr','SFDXUtils','__esModule','exists','length','49830dGMLxB','toBuffer','path','../utils/auth.utils','297948Mzonhc','mkdir','../../git/internal/fs.internal','adm-zip','108CmwtEL','15537TcIQaY','join'];a86_0x51f8=function(){return _0x4bb6c2;};return a86_0x51f8();}Object['defineProperty'](exports,a86_0x1bc93d(0xca),{'value':!![]}),exports[a86_0x1bc93d(0xaf)]=void 0x0;const constants_1=require(a86_0x1bc93d(0xb0)),promises_1=require(a86_0x1bc93d(0xb6)),sfdx_utils_1=require(a86_0x1bc93d(0xae)),fs_internal_1=require(a86_0x1bc93d(0x9b)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a86_0x1bc93d(0x98)),adm_zip_1=__importDefault(require(a86_0x1bc93d(0x9c))),uuid_1=require(a86_0x1bc93d(0xb7)),components_api_1=require('../utils/components-api'),path_1=require(a86_0x1bc93d(0x97));async function retrieveZip({backupAsyncId:_0xfe0c1,credentials:_0x1239c1,metadataLogId:_0x397dfd},_0x32fd15){const _0x455183=a86_0x1bc93d;var _0x102575;const _0x4b9828=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x455183(0xcb)]('.temp/'+_0x4b9828)&&await(0x0,promises_1[_0x455183(0x9a)])('.temp/'+_0x4b9828,{'recursive':!![]});await sfdx_utils_2[_0x455183(0xc9)][_0x455183(0xa5)](_0xfe0c1,_0x4b9828),await sfdx_utils_2[_0x455183(0xc9)][_0x455183(0xab)](_0x1239c1['instanceUrl'],_0xfe0c1,_0x4b9828),await retrieveReport(_0xfe0c1,_0x1239c1,_0x4b9828);const _0x58e481=new adm_zip_1[(_0x455183(0xa0))](await(0x0,promises_1[_0x455183(0xaa)])(_0x455183(0xbd)+_0x4b9828+'/'+_0xfe0c1+_0x455183(0xb4))),_0x41b57b=new adm_zip_1[(_0x455183(0xa0))]();for(const {entryName:_0x234575}of _0x58e481[_0x455183(0xac)]()){const _0x33db84=(_0x102575=_0x58e481[_0x455183(0xbf)](_0x234575))===null||_0x102575===void 0x0?void 0x0:_0x102575[_0x455183(0xa4)]();_0x41b57b['addFile']((0x0,path_1[_0x455183(0x9f)])(_0x455183(0xb1),_0x234575),_0x33db84);}const _0x191285=_0x41b57b[_0x455183(0x96)]()[_0x455183(0xbc)](_0x455183(0xc2))[_0x455183(0x94)];if(_0x191285>=components_api_1['MAX_ZIP_SIZE']){const [_0x58dca1,_0x1cda96]=await components_api_1[_0x455183(0xc0)][_0x455183(0xbe)](_0x41b57b,_0x191285),_0x3ec6d1={'ParentId':_0x397dfd,'Name':_0x455183(0xba),'Description':_0x455183(0xba),'Body':_0x58dca1[_0x455183(0x96)]()[_0x455183(0xbc)]('base64')};await _0x32fd15[_0x455183(0xc4)]('/services/data/'+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment',_0x3ec6d1),_0x3ec6d1['Body']=_0x1cda96['toBuffer']()[_0x455183(0xbc)](_0x455183(0xc2)),await _0x32fd15[_0x455183(0xc4)]('/services/data/'+constants_1[_0x455183(0xc3)]+_0x455183(0xbb),_0x3ec6d1);}else{const _0x27b2fe={'ParentId':_0x397dfd,'Name':'BACKUP\x20ZIP','Description':'BACKUP\x20ZIP','Body':_0x41b57b[_0x455183(0x96)]()[_0x455183(0xbc)](_0x455183(0xc2))};await _0x32fd15[_0x455183(0xc4)]('/services/data/'+constants_1[_0x455183(0xc3)]+_0x455183(0xbb),_0x27b2fe);}}catch(_0x119f1d){throw _0x119f1d;}finally{await(0x0,promises_1['rm'])(_0x455183(0xbd)+_0x4b9828+'/'+_0xfe0c1,{'recursive':!![]});}}exports[a86_0x1bc93d(0xaf)]=retrieveZip;function a86_0x109f(_0x5983f0,_0x2a324f){const _0x5b62e4=a86_0x51f8();return a86_0x109f=function(_0x5da24c,_0x4d66fe){_0x5da24c=_0x5da24c-0x94;let _0x51f84e=_0x5b62e4[_0x5da24c];return _0x51f84e;},a86_0x109f(_0x5983f0,_0x2a324f);}async function retrieveReport(_0x40c42c,_0x448838,_0x555520){const _0xeb3248=a86_0x1bc93d,_0x17227a='force:mdapi:retrieve:report\x20'+'--json\x20'+(_0xeb3248(0xa7)+_0x40c42c+'\x20')+(_0xeb3248(0xa1)+_0x555520+'/'+_0x40c42c+'\x20')+(_0xeb3248(0xb5)+_0x448838[_0xeb3248(0xa2)]);await sfdx_utils_1['SFDX']['spawnPromise']('sfdx',_0x17227a)['catch'](async _0x583fc6=>{const _0x5c3f59=_0xeb3248;if(sfdx_utils_2[_0x5c3f59(0xc9)][_0x5c3f59(0xa3)](_0x583fc6))return _0x448838[_0x5c3f59(0xa2)]=await auth_utils_1[_0x5c3f59(0xb3)]['updateAccessToken'](_0x448838['instanceUrl'],_0x448838['refreshToken'],_0x448838[_0x5c3f59(0xb9)],_0x448838[_0x5c3f59(0xa9)]),retrieveReport(_0x40c42c,_0x448838,_0x555520);throw _0x583fc6;});}