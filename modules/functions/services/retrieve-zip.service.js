const a105_0x2a8125=a105_0x3a43;function a105_0x3a43(_0xd1c646,_0x403953){const _0x44917c=a105_0x1d31();return a105_0x3a43=function(_0x1e5df4,_0x8b9445){_0x1e5df4=_0x1e5df4-0x151;let _0x1d31f0=_0x44917c[_0x1e5df4];return _0x1d31f0;},a105_0x3a43(_0xd1c646,_0x403953);}(function(_0x17387a,_0x133c0e){const _0x164a73=a105_0x3a43,_0x425f8c=_0x17387a();while(!![]){try{const _0x18c2e1=parseInt(_0x164a73(0x15f))/0x1+-parseInt(_0x164a73(0x169))/0x2+parseInt(_0x164a73(0x167))/0x3+-parseInt(_0x164a73(0x174))/0x4*(parseInt(_0x164a73(0x186))/0x5)+-parseInt(_0x164a73(0x157))/0x6*(parseInt(_0x164a73(0x15a))/0x7)+-parseInt(_0x164a73(0x16e))/0x8+-parseInt(_0x164a73(0x16a))/0x9*(-parseInt(_0x164a73(0x154))/0xa);if(_0x18c2e1===_0x133c0e)break;else _0x425f8c['push'](_0x425f8c['shift']());}catch(_0x11e835){_0x425f8c['push'](_0x425f8c['shift']());}}}(a105_0x1d31,0x83b5d));const a105_0x8b9445=(function(){let _0x6cd0d6=!![];return function(_0x5d4542,_0x26a2b5){const _0x7b438c=_0x6cd0d6?function(){const _0x2f2152=a105_0x3a43;if(_0x26a2b5){const _0x387315=_0x26a2b5[_0x2f2152(0x178)](_0x5d4542,arguments);return _0x26a2b5=null,_0x387315;}}:function(){};return _0x6cd0d6=![],_0x7b438c;};}()),a105_0x1e5df4=a105_0x8b9445(this,function(){const _0x26742e=a105_0x3a43;return a105_0x1e5df4[_0x26742e(0x17b)]()[_0x26742e(0x17e)](_0x26742e(0x15d))[_0x26742e(0x17b)]()[_0x26742e(0x187)](a105_0x1e5df4)[_0x26742e(0x17e)](_0x26742e(0x15d));});a105_0x1e5df4();'use strict';var __importDefault=this&&this[a105_0x2a8125(0x172)]||function(_0x14fa45){const _0xfb1ad3=a105_0x2a8125;return _0x14fa45&&_0x14fa45[_0xfb1ad3(0x16b)]?_0x14fa45:{'default':_0x14fa45};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['retrieveZip']=void 0x0;function a105_0x1d31(){const _0x534dfa=['../utils/components-api','fs/promises','clientId','../../git/internal/fs.internal','retrieveZip','10SBSVHx','constructor','uuid','updateAccessToken','join','AuthUtils','/sobjects/Attachment','length','Body','4568920BQjVkp','toBuffer','force:mdapi:retrieve:report\x20','6PExZVY','/unpackaged.zip','spawn','5074314hDeFnh','isAuthorizationError','getEntry','(((.+)+)+)+$','setInstanceUrl','489059hAQpdO','post','catch','mkdir','splitZip','/services/data/v','clientSecret','addFile','543750hOVHek','instanceUrl','1009228ytXFWo','36bhlnZj','__esModule','-u\x20','-r\x20.temp/','3515680rlsWYS','../utils/sfdx.utils','refreshToken','MAX_ZIP_SIZE','__importDefault','SFDXUtils','578832IrXaug','BACKUP\x20ZIP','../utils/auth.utils','default','apply','base64','accessToken','toString','path','.temp/','search','../../git/salesforce/utils/sfdx.utils','src'];a105_0x1d31=function(){return _0x534dfa;};return a105_0x1d31();}const promises_1=require(a105_0x2a8125(0x182)),sfdx_utils_1=require(a105_0x2a8125(0x17f)),fs_internal_1=require(a105_0x2a8125(0x184)),sfdx_utils_2=require(a105_0x2a8125(0x16f)),auth_utils_1=require(a105_0x2a8125(0x176)),adm_zip_1=__importDefault(require('adm-zip')),uuid_1=require(a105_0x2a8125(0x188)),components_api_1=require(a105_0x2a8125(0x181)),path_1=require(a105_0x2a8125(0x17c));async function retrieveZip({backupAsyncId:_0x48178d,credentials:_0x2c715d,metadataLogId:_0x12e513,apiVersion:_0x1a0de1},_0x466fc7){const _0x3fdf48=a105_0x2a8125;var _0x47e832;const _0x2ca905=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS']['exists'](_0x3fdf48(0x17d)+_0x2ca905)&&await(0x0,promises_1[_0x3fdf48(0x162)])(_0x3fdf48(0x17d)+_0x2ca905,{'recursive':!![]});await sfdx_utils_2[_0x3fdf48(0x173)]['createSFDXProject'](_0x48178d,_0x2ca905),await sfdx_utils_2[_0x3fdf48(0x173)][_0x3fdf48(0x15e)](_0x2c715d[_0x3fdf48(0x168)],_0x48178d,_0x2ca905),await retrieveReport(_0x48178d,_0x2c715d,_0x2ca905);const _0x362b09=new adm_zip_1[(_0x3fdf48(0x177))](await(0x0,promises_1['readFile'])(_0x3fdf48(0x17d)+_0x2ca905+'/'+_0x48178d+_0x3fdf48(0x158))),_0x2007aa=new adm_zip_1[(_0x3fdf48(0x177))]();for(const {entryName:_0x1d78ce}of _0x362b09['getEntries']()){const _0x2673fd=(_0x47e832=_0x362b09[_0x3fdf48(0x15c)](_0x1d78ce))===null||_0x47e832===void 0x0?void 0x0:_0x47e832['getData']();_0x2007aa[_0x3fdf48(0x166)]((0x0,path_1[_0x3fdf48(0x18a)])(_0x3fdf48(0x180),_0x1d78ce),_0x2673fd);}const _0x2360d6=_0x2007aa[_0x3fdf48(0x155)]()[_0x3fdf48(0x17b)](_0x3fdf48(0x179))[_0x3fdf48(0x152)];if(_0x2360d6>=components_api_1[_0x3fdf48(0x171)]){const [_0x32b3b,_0x34eb73]=await components_api_1['ComponentsApi'][_0x3fdf48(0x163)](_0x2007aa,_0x2360d6),_0x58701d={'ParentId':_0x12e513,'Name':_0x3fdf48(0x175),'Description':_0x3fdf48(0x175),'Body':_0x32b3b[_0x3fdf48(0x155)]()[_0x3fdf48(0x17b)](_0x3fdf48(0x179))};await _0x466fc7[_0x3fdf48(0x160)]('/services/data/v'+_0x1a0de1+_0x3fdf48(0x151),_0x58701d),_0x58701d[_0x3fdf48(0x153)]=_0x34eb73[_0x3fdf48(0x155)]()[_0x3fdf48(0x17b)]('base64'),await _0x466fc7['post'](_0x3fdf48(0x164)+_0x1a0de1+_0x3fdf48(0x151),_0x58701d);}else{const _0x2017d2={'ParentId':_0x12e513,'Name':'BACKUP\x20ZIP','Description':_0x3fdf48(0x175),'Body':_0x2007aa['toBuffer']()[_0x3fdf48(0x17b)]('base64')};await _0x466fc7['post']('/services/data/v'+_0x1a0de1+'/sobjects/Attachment',_0x2017d2);}}catch(_0x5e8976){throw _0x5e8976;}finally{await(0x0,promises_1['rm'])(_0x3fdf48(0x17d)+_0x2ca905+'/'+_0x48178d,{'recursive':!![]});}}exports[a105_0x2a8125(0x185)]=retrieveZip;async function retrieveReport(_0x52a367,_0x37c3d2,_0x38fcb9){const _0x1e1e21=a105_0x2a8125,_0x23a239=_0x1e1e21(0x156)+'--json\x20'+('--jobid\x20'+_0x52a367+'\x20')+(_0x1e1e21(0x16d)+_0x38fcb9+'/'+_0x52a367+'\x20')+(_0x1e1e21(0x16c)+_0x37c3d2[_0x1e1e21(0x17a)]);await sfdx_utils_1['SFDX'][_0x1e1e21(0x159)](_0x23a239)[_0x1e1e21(0x161)](async _0x613f30=>{const _0x1c5388=_0x1e1e21;if(sfdx_utils_2[_0x1c5388(0x173)][_0x1c5388(0x15b)](_0x613f30))return _0x37c3d2[_0x1c5388(0x17a)]=await auth_utils_1[_0x1c5388(0x18b)][_0x1c5388(0x189)](_0x37c3d2[_0x1c5388(0x168)],_0x37c3d2[_0x1c5388(0x170)],_0x37c3d2[_0x1c5388(0x183)],_0x37c3d2[_0x1c5388(0x165)]),retrieveReport(_0x52a367,_0x37c3d2,_0x38fcb9);throw _0x613f30;});}