const a103_0x544098=a103_0x1611;function a103_0x4a86(){const _0x2af3e5=['../../git/salesforce/utils/sfdx.utils','-u\x20','search','force:mdapi:retrieve:report\x20','AuthUtils','__importDefault','698GBZRwk','7593xDYdZA','splitZip','mkdir','BACKUP\x20ZIP','3810pLWbLj','retrieveZip','/sobjects/Attachment','36219NlcUMG','clientSecret','instanceUrl','post','base64','join','fs/promises','clientId','--json\x20','getEntries','getEntry','isAuthorizationError','SFDXUtils','catch','ComponentsApi','spawn','SFDX','../../git/internal/fs.internal','/unpackaged.zip','2746794GPvsCo','MAX_ZIP_SIZE','toString','__esModule','.temp/','10GffSnr','constructor','37576PyXWDX','exists','uuid','(((.+)+)+)+$','315AumulP','setInstanceUrl','7181064iwLjhp','toBuffer','addFile','/services/data/v','updateAccessToken','../utils/auth.utils','default','3324uDPmHg','defineProperty','../utils/components-api','readFile','accessToken','createSFDXProject','src','Body','12408605LhPJvr','getData'];a103_0x4a86=function(){return _0x2af3e5;};return a103_0x4a86();}(function(_0x5089a3,_0xc712e1){const _0x3dac4e=a103_0x1611,_0x354b77=_0x5089a3();while(!![]){try{const _0x5f0e53=-parseInt(_0x3dac4e(0x15a))/0x1+parseInt(_0x3dac4e(0x152))/0x2*(parseInt(_0x3dac4e(0x153))/0x3)+-parseInt(_0x3dac4e(0x142))/0x4*(parseInt(_0x3dac4e(0x157))/0x5)+parseInt(_0x3dac4e(0x16d))/0x6+parseInt(_0x3dac4e(0x139))/0x7*(parseInt(_0x3dac4e(0x135))/0x8)+parseInt(_0x3dac4e(0x13b))/0x9+parseInt(_0x3dac4e(0x172))/0xa*(-parseInt(_0x3dac4e(0x14a))/0xb);if(_0x5f0e53===_0xc712e1)break;else _0x354b77['push'](_0x354b77['shift']());}catch(_0xfd3676){_0x354b77['push'](_0x354b77['shift']());}}}(a103_0x4a86,0x86fb3));const a103_0x1ba13f=(function(){let _0xc38580=!![];return function(_0x482e39,_0x4ad8cf){const _0x4343d4=_0xc38580?function(){if(_0x4ad8cf){const _0x2bc33f=_0x4ad8cf['apply'](_0x482e39,arguments);return _0x4ad8cf=null,_0x2bc33f;}}:function(){};return _0xc38580=![],_0x4343d4;};}()),a103_0x9099e=a103_0x1ba13f(this,function(){const _0x17a787=a103_0x1611;return a103_0x9099e[_0x17a787(0x16f)]()[_0x17a787(0x14e)](_0x17a787(0x138))['toString']()[_0x17a787(0x134)](a103_0x9099e)['search']('(((.+)+)+)+$');});a103_0x9099e();'use strict';var __importDefault=this&&this[a103_0x544098(0x151)]||function(_0x32924a){const _0x41bd5=a103_0x544098;return _0x32924a&&_0x32924a[_0x41bd5(0x170)]?_0x32924a:{'default':_0x32924a};};Object[a103_0x544098(0x143)](exports,'__esModule',{'value':!![]}),exports[a103_0x544098(0x158)]=void 0x0;function a103_0x1611(_0x598506,_0x18f692){const _0x9751cb=a103_0x4a86();return a103_0x1611=function(_0x9099e,_0x1ba13f){_0x9099e=_0x9099e-0x134;let _0x4a860e=_0x9751cb[_0x9099e];return _0x4a860e;},a103_0x1611(_0x598506,_0x18f692);}const promises_1=require(a103_0x544098(0x160)),sfdx_utils_1=require(a103_0x544098(0x14c)),fs_internal_1=require(a103_0x544098(0x16b)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a103_0x544098(0x140)),adm_zip_1=__importDefault(require('adm-zip')),uuid_1=require(a103_0x544098(0x137)),components_api_1=require(a103_0x544098(0x144)),path_1=require('path');async function retrieveZip({backupAsyncId:_0x29a1d8,credentials:_0x2091c4,metadataLogId:_0x4781fc,apiVersion:_0x5702de},_0x319ddf){const _0x1a1768=a103_0x544098;var _0x325d27;const _0x5af6f8=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x1a1768(0x136)](_0x1a1768(0x171)+_0x5af6f8)&&await(0x0,promises_1[_0x1a1768(0x155)])(_0x1a1768(0x171)+_0x5af6f8,{'recursive':!![]});await sfdx_utils_2['SFDXUtils'][_0x1a1768(0x147)](_0x29a1d8,_0x5af6f8),await sfdx_utils_2[_0x1a1768(0x166)][_0x1a1768(0x13a)](_0x2091c4[_0x1a1768(0x15c)],_0x29a1d8,_0x5af6f8),await retrieveReport(_0x29a1d8,_0x2091c4,_0x5af6f8);const _0x59cabd=new adm_zip_1[(_0x1a1768(0x141))](await(0x0,promises_1[_0x1a1768(0x145)])(_0x1a1768(0x171)+_0x5af6f8+'/'+_0x29a1d8+_0x1a1768(0x16c))),_0x5b97b4=new adm_zip_1['default']();for(const {entryName:_0x5059e9}of _0x59cabd[_0x1a1768(0x163)]()){const _0x37f3f9=(_0x325d27=_0x59cabd[_0x1a1768(0x164)](_0x5059e9))===null||_0x325d27===void 0x0?void 0x0:_0x325d27[_0x1a1768(0x14b)]();_0x5b97b4[_0x1a1768(0x13d)]((0x0,path_1[_0x1a1768(0x15f)])(_0x1a1768(0x148),_0x5059e9),_0x37f3f9);}const _0x53c0d2=_0x5b97b4[_0x1a1768(0x13c)]()[_0x1a1768(0x16f)](_0x1a1768(0x15e))['length'];if(_0x53c0d2>=components_api_1[_0x1a1768(0x16e)]){const [_0xe6db9e,_0x2a8051]=await components_api_1[_0x1a1768(0x168)][_0x1a1768(0x154)](_0x5b97b4,_0x53c0d2),_0xf91792={'ParentId':_0x4781fc,'Name':_0x1a1768(0x156),'Description':_0x1a1768(0x156),'Body':_0xe6db9e[_0x1a1768(0x13c)]()[_0x1a1768(0x16f)](_0x1a1768(0x15e))};await _0x319ddf['post']('/services/data/v'+_0x5702de+_0x1a1768(0x159),_0xf91792),_0xf91792[_0x1a1768(0x149)]=_0x2a8051[_0x1a1768(0x13c)]()[_0x1a1768(0x16f)](_0x1a1768(0x15e)),await _0x319ddf[_0x1a1768(0x15d)](_0x1a1768(0x13e)+_0x5702de+_0x1a1768(0x159),_0xf91792);}else{const _0x3374c6={'ParentId':_0x4781fc,'Name':_0x1a1768(0x156),'Description':_0x1a1768(0x156),'Body':_0x5b97b4[_0x1a1768(0x13c)]()[_0x1a1768(0x16f)](_0x1a1768(0x15e))};await _0x319ddf[_0x1a1768(0x15d)](_0x1a1768(0x13e)+_0x5702de+'/sobjects/Attachment',_0x3374c6);}}catch(_0x205ef2){throw _0x205ef2;}finally{await(0x0,promises_1['rm'])(_0x1a1768(0x171)+_0x5af6f8+'/'+_0x29a1d8,{'recursive':!![]});}}exports[a103_0x544098(0x158)]=retrieveZip;async function retrieveReport(_0x465a4e,_0x3d37c9,_0x53d726){const _0x1d1142=a103_0x544098,_0x21c001=_0x1d1142(0x14f)+_0x1d1142(0x162)+('--jobid\x20'+_0x465a4e+'\x20')+('-r\x20.temp/'+_0x53d726+'/'+_0x465a4e+'\x20')+(_0x1d1142(0x14d)+_0x3d37c9['accessToken']);await sfdx_utils_1[_0x1d1142(0x16a)][_0x1d1142(0x169)](_0x21c001)[_0x1d1142(0x167)](async _0x219a69=>{const _0x245f1b=_0x1d1142;if(sfdx_utils_2[_0x245f1b(0x166)][_0x245f1b(0x165)](_0x219a69))return _0x3d37c9[_0x245f1b(0x146)]=await auth_utils_1[_0x245f1b(0x150)][_0x245f1b(0x13f)](_0x3d37c9[_0x245f1b(0x15c)],_0x3d37c9['refreshToken'],_0x3d37c9[_0x245f1b(0x161)],_0x3d37c9[_0x245f1b(0x15b)]),retrieveReport(_0x465a4e,_0x3d37c9,_0x53d726);throw _0x219a69;});}