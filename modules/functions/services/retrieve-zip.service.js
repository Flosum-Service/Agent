const a103_0x1b70db=a103_0x98d3;(function(_0x239d19,_0x7cfa32){const _0x94ae1b=a103_0x98d3,_0x3169a9=_0x239d19();while(!![]){try{const _0x12d378=parseInt(_0x94ae1b(0x156))/0x1*(-parseInt(_0x94ae1b(0x17a))/0x2)+-parseInt(_0x94ae1b(0x176))/0x3*(parseInt(_0x94ae1b(0x159))/0x4)+parseInt(_0x94ae1b(0x161))/0x5*(parseInt(_0x94ae1b(0x179))/0x6)+parseInt(_0x94ae1b(0x163))/0x7+-parseInt(_0x94ae1b(0x178))/0x8+parseInt(_0x94ae1b(0x175))/0x9+-parseInt(_0x94ae1b(0x169))/0xa*(parseInt(_0x94ae1b(0x14e))/0xb);if(_0x12d378===_0x7cfa32)break;else _0x3169a9['push'](_0x3169a9['shift']());}catch(_0x4f3209){_0x3169a9['push'](_0x3169a9['shift']());}}}(a103_0x4deb,0x7f5f9));function a103_0x4deb(){const _0x2353bb=['1LwxERz','defineProperty','getData','36QiOuSO','BACKUP\x20ZIP','post','splitZip','readFile','../utils/components-api','-u\x20','adm-zip','5VHOxwv','catch','1612527FUzKio','getEntries','search','clientSecret','/sobjects/Attachment','updateAccessToken','430GveYtH','spawn','--json\x20','/services/data/v','--jobid\x20','Body','setInstanceUrl','getEntry','../utils/sfdx.utils','ComponentsApi','AuthUtils','uuid','7170228zXjlZE','12009jaOtSC','addFile','1106872ABIDvj','1917150ruVrUL','222846hCIOeG','default','/unpackaged.zip','SFDXUtils','fs/promises','.temp/','createSFDXProject','../utils/auth.utils','exists','retrieveZip','accessToken','(((.+)+)+)+$','__esModule','toBuffer','instanceUrl','toString','constructor','137896pbzotV','apply','path','join','clientId','mkdir','src','base64'];a103_0x4deb=function(){return _0x2353bb;};return a103_0x4deb();}const a103_0x7daf56=(function(){let _0xa338d4=!![];return function(_0x4fcee4,_0x2eecd4){const _0x2403e2=_0xa338d4?function(){const _0x5b3ffe=a103_0x98d3;if(_0x2eecd4){const _0x469173=_0x2eecd4[_0x5b3ffe(0x14f)](_0x4fcee4,arguments);return _0x2eecd4=null,_0x469173;}}:function(){};return _0xa338d4=![],_0x2403e2;};}()),a103_0x41d894=a103_0x7daf56(this,function(){const _0x44a72b=a103_0x98d3;return a103_0x41d894['toString']()[_0x44a72b(0x165)](_0x44a72b(0x185))[_0x44a72b(0x14c)]()[_0x44a72b(0x14d)](a103_0x41d894)[_0x44a72b(0x165)]('(((.+)+)+)+$');});a103_0x41d894();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x169755){const _0x3192e2=a103_0x98d3;return _0x169755&&_0x169755[_0x3192e2(0x149)]?_0x169755:{'default':_0x169755};};Object[a103_0x1b70db(0x157)](exports,a103_0x1b70db(0x149),{'value':!![]}),exports[a103_0x1b70db(0x183)]=void 0x0;const promises_1=require(a103_0x1b70db(0x17e)),sfdx_utils_1=require('../../git/salesforce/utils/sfdx.utils'),fs_internal_1=require('../../git/internal/fs.internal'),sfdx_utils_2=require(a103_0x1b70db(0x171)),auth_utils_1=require(a103_0x1b70db(0x181)),adm_zip_1=__importDefault(require(a103_0x1b70db(0x160))),uuid_1=require(a103_0x1b70db(0x174)),components_api_1=require(a103_0x1b70db(0x15e)),path_1=require(a103_0x1b70db(0x150));async function retrieveZip({backupAsyncId:_0x53d989,credentials:_0x1914bd,metadataLogId:_0x3c7c10,apiVersion:_0x259e80},_0x414b2b){const _0x297636=a103_0x1b70db;var _0x33cc81;const _0x9e5db8=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x297636(0x182)](_0x297636(0x17f)+_0x9e5db8)&&await(0x0,promises_1[_0x297636(0x153)])('.temp/'+_0x9e5db8,{'recursive':!![]});await sfdx_utils_2[_0x297636(0x17d)][_0x297636(0x180)](_0x53d989,_0x9e5db8),await sfdx_utils_2['SFDXUtils'][_0x297636(0x16f)](_0x1914bd['instanceUrl'],_0x53d989,_0x9e5db8),await retrieveReport(_0x53d989,_0x1914bd,_0x9e5db8);const _0x4a827c=new adm_zip_1[(_0x297636(0x17b))](await(0x0,promises_1[_0x297636(0x15d)])(_0x297636(0x17f)+_0x9e5db8+'/'+_0x53d989+_0x297636(0x17c))),_0x236f81=new adm_zip_1[(_0x297636(0x17b))]();for(const {entryName:_0x3ce25a}of _0x4a827c[_0x297636(0x164)]()){const _0x3b76f9=(_0x33cc81=_0x4a827c[_0x297636(0x170)](_0x3ce25a))===null||_0x33cc81===void 0x0?void 0x0:_0x33cc81[_0x297636(0x158)]();_0x236f81[_0x297636(0x177)]((0x0,path_1[_0x297636(0x151)])(_0x297636(0x154),_0x3ce25a),_0x3b76f9);}const _0x55f5d8=_0x236f81[_0x297636(0x14a)]()[_0x297636(0x14c)]('base64')['length'];if(_0x55f5d8>=components_api_1['MAX_ZIP_SIZE']){const [_0x1cd487,_0x40db54]=await components_api_1[_0x297636(0x172)][_0x297636(0x15c)](_0x236f81,_0x55f5d8),_0x522bef={'ParentId':_0x3c7c10,'Name':_0x297636(0x15a),'Description':_0x297636(0x15a),'Body':_0x1cd487[_0x297636(0x14a)]()[_0x297636(0x14c)](_0x297636(0x155))};await _0x414b2b['post'](_0x297636(0x16c)+_0x259e80+_0x297636(0x167),_0x522bef),_0x522bef[_0x297636(0x16e)]=_0x40db54[_0x297636(0x14a)]()[_0x297636(0x14c)]('base64'),await _0x414b2b['post']('/services/data/v'+_0x259e80+_0x297636(0x167),_0x522bef);}else{const _0x36cfd3={'ParentId':_0x3c7c10,'Name':'BACKUP\x20ZIP','Description':_0x297636(0x15a),'Body':_0x236f81[_0x297636(0x14a)]()['toString'](_0x297636(0x155))};await _0x414b2b[_0x297636(0x15b)](_0x297636(0x16c)+_0x259e80+_0x297636(0x167),_0x36cfd3);}}catch(_0x1cdbbc){throw _0x1cdbbc;}finally{await(0x0,promises_1['rm'])(_0x297636(0x17f)+_0x9e5db8+'/'+_0x53d989,{'recursive':!![]});}}function a103_0x98d3(_0x46c641,_0x1af068){const _0x3ef08d=a103_0x4deb();return a103_0x98d3=function(_0x41d894,_0x7daf56){_0x41d894=_0x41d894-0x149;let _0x4debd1=_0x3ef08d[_0x41d894];return _0x4debd1;},a103_0x98d3(_0x46c641,_0x1af068);}exports[a103_0x1b70db(0x183)]=retrieveZip;async function retrieveReport(_0x4e81b4,_0x269fa8,_0x261fde){const _0x3a14f8=a103_0x1b70db,_0x3938da='force:mdapi:retrieve:report\x20'+_0x3a14f8(0x16b)+(_0x3a14f8(0x16d)+_0x4e81b4+'\x20')+('-r\x20.temp/'+_0x261fde+'/'+_0x4e81b4+'\x20')+(_0x3a14f8(0x15f)+_0x269fa8['accessToken']);await sfdx_utils_1['SFDX'][_0x3a14f8(0x16a)](_0x3938da)[_0x3a14f8(0x162)](async _0x3e1ea1=>{const _0x454ed2=_0x3a14f8;if(sfdx_utils_2[_0x454ed2(0x17d)]['isAuthorizationError'](_0x3e1ea1))return _0x269fa8[_0x454ed2(0x184)]=await auth_utils_1[_0x454ed2(0x173)][_0x454ed2(0x168)](_0x269fa8[_0x454ed2(0x14b)],_0x269fa8['refreshToken'],_0x269fa8[_0x454ed2(0x152)],_0x269fa8[_0x454ed2(0x166)]),retrieveReport(_0x4e81b4,_0x269fa8,_0x261fde);throw _0x3e1ea1;});}