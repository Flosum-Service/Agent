const a87_0xb01b01=a87_0x117e;(function(_0x4ace32,_0x2ccf05){const _0x3a4c5b=a87_0x117e,_0x4f4ef4=_0x4ace32();while(!![]){try{const _0x4f5a31=-parseInt(_0x3a4c5b(0x11c))/0x1+parseInt(_0x3a4c5b(0x12e))/0x2+parseInt(_0x3a4c5b(0x12c))/0x3*(parseInt(_0x3a4c5b(0x113))/0x4)+parseInt(_0x3a4c5b(0xf7))/0x5+parseInt(_0x3a4c5b(0xf6))/0x6*(-parseInt(_0x3a4c5b(0x124))/0x7)+parseInt(_0x3a4c5b(0x109))/0x8*(-parseInt(_0x3a4c5b(0x122))/0x9)+parseInt(_0x3a4c5b(0x10c))/0xa;if(_0x4f5a31===_0x2ccf05)break;else _0x4f4ef4['push'](_0x4f4ef4['shift']());}catch(_0x4b02ae){_0x4f4ef4['push'](_0x4f4ef4['shift']());}}}(a87_0x2bb8,0xf39b8));const a87_0x3e9e6a=(function(){let _0x3dc464=!![];return function(_0x314362,_0x5488c9){const _0x3cfb86=_0x3dc464?function(){if(_0x5488c9){const _0x37c4ae=_0x5488c9['apply'](_0x314362,arguments);return _0x5488c9=null,_0x37c4ae;}}:function(){};return _0x3dc464=![],_0x3cfb86;};}()),a87_0x28bce3=a87_0x3e9e6a(this,function(){const _0x140bef=a87_0x117e;return a87_0x28bce3['toString']()[_0x140bef(0xfa)](_0x140bef(0x126))['toString']()[_0x140bef(0x116)](a87_0x28bce3)[_0x140bef(0xfa)](_0x140bef(0x126));});a87_0x28bce3();'use strict';var __importDefault=this&&this[a87_0xb01b01(0x102)]||function(_0x26973c){const _0x178753=a87_0xb01b01;return _0x26973c&&_0x26973c[_0x178753(0xfd)]?_0x26973c:{'default':_0x26973c};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a87_0xb01b01(0xfc)]=void 0x0;const constants_1=require(a87_0xb01b01(0x12a)),promises_1=require(a87_0xb01b01(0xff)),sfdx_utils_1=require('../../git/salesforce/utils/sfdx.utils'),fs_internal_1=require(a87_0xb01b01(0x100)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a87_0xb01b01(0x118)),adm_zip_1=__importDefault(require('adm-zip')),uuid_1=require(a87_0xb01b01(0x114)),components_api_1=require(a87_0xb01b01(0x11b)),path_1=require('path');async function retrieveZip({backupAsyncId:_0x1b111b,credentials:_0x5ec757,metadataLogId:_0x215406},_0xb73147){const _0x4b4799=a87_0xb01b01;var _0xb74356;const _0x443d13=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x4b4799(0x110)]('.temp/'+_0x443d13)&&await(0x0,promises_1[_0x4b4799(0x11a)])(_0x4b4799(0xf9)+_0x443d13,{'recursive':!![]});await sfdx_utils_2[_0x4b4799(0x130)][_0x4b4799(0x10e)](_0x1b111b,_0x443d13),await sfdx_utils_2[_0x4b4799(0x130)]['setInstanceUrl'](_0x5ec757[_0x4b4799(0x10b)],_0x1b111b,_0x443d13),await retrieveReport(_0x1b111b,_0x5ec757,_0x443d13);const _0x129329=new adm_zip_1[(_0x4b4799(0x119))](await(0x0,promises_1[_0x4b4799(0x107)])(_0x4b4799(0xf9)+_0x443d13+'/'+_0x1b111b+_0x4b4799(0x125))),_0xe752fe=new adm_zip_1['default']();for(const {entryName:_0x276aea}of _0x129329[_0x4b4799(0x10f)]()){const _0x1151ab=(_0xb74356=_0x129329[_0x4b4799(0x115)](_0x276aea))===null||_0xb74356===void 0x0?void 0x0:_0xb74356[_0x4b4799(0x103)]();_0xe752fe[_0x4b4799(0x127)]((0x0,path_1[_0x4b4799(0x117)])(_0x4b4799(0x128),_0x276aea),_0x1151ab);}const _0x2f2854=_0xe752fe[_0x4b4799(0x123)]()[_0x4b4799(0x10a)]('base64')[_0x4b4799(0x106)];if(_0x2f2854>=components_api_1[_0x4b4799(0x104)]){const [_0x5dee50,_0x382bfd]=await components_api_1[_0x4b4799(0x10d)][_0x4b4799(0x108)](_0xe752fe,_0x2f2854),_0x49ebc1={'ParentId':_0x215406,'Name':_0x4b4799(0x11d),'Description':_0x4b4799(0x11d),'Body':_0x5dee50[_0x4b4799(0x123)]()[_0x4b4799(0x10a)](_0x4b4799(0xf8))};await _0xb73147[_0x4b4799(0x111)](_0x4b4799(0x101)+constants_1[_0x4b4799(0x11f)]+'/sobjects/Attachment',_0x49ebc1),_0x49ebc1[_0x4b4799(0xf5)]=_0x382bfd[_0x4b4799(0x123)]()['toString'](_0x4b4799(0xf8)),await _0xb73147[_0x4b4799(0x111)](_0x4b4799(0x101)+constants_1[_0x4b4799(0x11f)]+_0x4b4799(0xfb),_0x49ebc1);}else{const _0x2b705d={'ParentId':_0x215406,'Name':'BACKUP\x20ZIP','Description':_0x4b4799(0x11d),'Body':_0xe752fe[_0x4b4799(0x123)]()[_0x4b4799(0x10a)](_0x4b4799(0xf8))};await _0xb73147[_0x4b4799(0x111)](_0x4b4799(0x101)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment',_0x2b705d);}}catch(_0x529db8){throw _0x529db8;}finally{await(0x0,promises_1['rm'])(_0x4b4799(0xf9)+_0x443d13+'/'+_0x1b111b,{'recursive':!![]});}}function a87_0x2bb8(){const _0x36ef96=['fs/promises','../../git/internal/fs.internal','/services/data/','__importDefault','getData','MAX_ZIP_SIZE','catch','length','readFile','splitZip','8Plsjgw','toString','instanceUrl','36437550xfGcES','ComponentsApi','createSFDXProject','getEntries','exists','post','spawn','4zxAaTS','uuid','getEntry','constructor','join','../utils/auth.utils','default','mkdir','../utils/components-api','1935545eGqYfN','BACKUP\x20ZIP','SFDX','SALESFORCE_API_VERSION','--json\x20','-u\x20','446787DJToMb','toBuffer','399XFGzxQ','/unpackaged.zip','(((.+)+)+)+$','addFile','src','updateAccessToken','../../../constants','--jobid\x20','1745409SYtaMf','clientId','405096WWooZp','AuthUtils','SFDXUtils','accessToken','clientSecret','Body','178548tIABKI','1255520XgzPZv','base64','.temp/','search','/sobjects/Attachment','retrieveZip','__esModule','isAuthorizationError'];a87_0x2bb8=function(){return _0x36ef96;};return a87_0x2bb8();}function a87_0x117e(_0x45c1fe,_0x72776b){const _0x3d10d3=a87_0x2bb8();return a87_0x117e=function(_0x28bce3,_0x3e9e6a){_0x28bce3=_0x28bce3-0xf3;let _0x2bb886=_0x3d10d3[_0x28bce3];return _0x2bb886;},a87_0x117e(_0x45c1fe,_0x72776b);}exports[a87_0xb01b01(0xfc)]=retrieveZip;async function retrieveReport(_0x3766d9,_0x36cebc,_0x22abc1){const _0x288d4c=a87_0xb01b01,_0x3c3450='force:mdapi:retrieve:report\x20'+_0x288d4c(0x120)+(_0x288d4c(0x12b)+_0x3766d9+'\x20')+('-r\x20.temp/'+_0x22abc1+'/'+_0x3766d9+'\x20')+(_0x288d4c(0x121)+_0x36cebc[_0x288d4c(0xf3)]);await sfdx_utils_1[_0x288d4c(0x11e)][_0x288d4c(0x112)](_0x3c3450)[_0x288d4c(0x105)](async _0x58f3e8=>{const _0x13dc64=_0x288d4c;if(sfdx_utils_2['SFDXUtils'][_0x13dc64(0xfe)](_0x58f3e8))return _0x36cebc[_0x13dc64(0xf3)]=await auth_utils_1[_0x13dc64(0x12f)][_0x13dc64(0x129)](_0x36cebc[_0x13dc64(0x10b)],_0x36cebc['refreshToken'],_0x36cebc[_0x13dc64(0x12d)],_0x36cebc[_0x13dc64(0xf4)]),retrieveReport(_0x3766d9,_0x36cebc,_0x22abc1);throw _0x58f3e8;});}