const a87_0x4007fb=a87_0x4474;(function(_0x43fa76,_0x54ce96){const _0x33ba96=a87_0x4474,_0x5b1f92=_0x43fa76();while(!![]){try{const _0x318f12=-parseInt(_0x33ba96(0x81))/0x1+-parseInt(_0x33ba96(0xa7))/0x2+-parseInt(_0x33ba96(0xa1))/0x3+parseInt(_0x33ba96(0xa8))/0x4*(-parseInt(_0x33ba96(0x93))/0x5)+parseInt(_0x33ba96(0xad))/0x6*(parseInt(_0x33ba96(0xa2))/0x7)+-parseInt(_0x33ba96(0xae))/0x8+parseInt(_0x33ba96(0x95))/0x9*(parseInt(_0x33ba96(0xa6))/0xa);if(_0x318f12===_0x54ce96)break;else _0x5b1f92['push'](_0x5b1f92['shift']());}catch(_0x38cc6e){_0x5b1f92['push'](_0x5b1f92['shift']());}}}(a87_0x5c86,0xd1ede));const a87_0x240367=(function(){let _0x1650aa=!![];return function(_0x5d5f34,_0x2c6815){const _0x39d069=_0x1650aa?function(){const _0x5f5864=a87_0x4474;if(_0x2c6815){const _0x3c52c3=_0x2c6815[_0x5f5864(0x87)](_0x5d5f34,arguments);return _0x2c6815=null,_0x3c52c3;}}:function(){};return _0x1650aa=![],_0x39d069;};}()),a87_0x28a5df=a87_0x240367(this,function(){const _0x4edcf4=a87_0x4474;return a87_0x28a5df[_0x4edcf4(0x75)]()['search'](_0x4edcf4(0x74))[_0x4edcf4(0x75)]()[_0x4edcf4(0x73)](a87_0x28a5df)[_0x4edcf4(0x99)](_0x4edcf4(0x74));});function a87_0x4474(_0x518dd9,_0x3859e2){const _0x591efd=a87_0x5c86();return a87_0x4474=function(_0x28a5df,_0x240367){_0x28a5df=_0x28a5df-0x71;let _0x5c8600=_0x591efd[_0x28a5df];return _0x5c8600;},a87_0x4474(_0x518dd9,_0x3859e2);}a87_0x28a5df();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x331ca6){const _0x2a6941=a87_0x4474;return _0x331ca6&&_0x331ca6[_0x2a6941(0x7e)]?_0x331ca6:{'default':_0x331ca6};};Object['defineProperty'](exports,a87_0x4007fb(0x7e),{'value':!![]}),exports[a87_0x4007fb(0x9a)]=void 0x0;const constants_1=require(a87_0x4007fb(0x8e)),promises_1=require('fs/promises'),sfdx_utils_1=require(a87_0x4007fb(0x97)),fs_internal_1=require(a87_0x4007fb(0xa0)),sfdx_utils_2=require(a87_0x4007fb(0x83)),auth_utils_1=require(a87_0x4007fb(0x7c)),adm_zip_1=__importDefault(require(a87_0x4007fb(0x88))),uuid_1=require(a87_0x4007fb(0x92)),components_api_1=require(a87_0x4007fb(0xac)),path_1=require('path');async function retrieveZip({backupAsyncId:_0x2cb4cf,credentials:_0x4bdd02,metadataLogId:_0x3dca35},_0x955a6f){const _0x3fc6e0=a87_0x4007fb;var _0x4c86ca;const _0x3367e4=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x3fc6e0(0xa9)](_0x3fc6e0(0x85)+_0x3367e4)&&await(0x0,promises_1['mkdir'])(_0x3fc6e0(0x85)+_0x3367e4,{'recursive':!![]});await sfdx_utils_2['SFDXUtils']['createSFDXProject'](_0x2cb4cf,_0x3367e4),await sfdx_utils_2[_0x3fc6e0(0x98)][_0x3fc6e0(0xa4)](_0x4bdd02[_0x3fc6e0(0x8d)],_0x2cb4cf,_0x3367e4),await retrieveReport(_0x2cb4cf,_0x4bdd02,_0x3367e4);const _0x3fc769=new adm_zip_1[(_0x3fc6e0(0x86))](await(0x0,promises_1[_0x3fc6e0(0x9e)])(_0x3fc6e0(0x85)+_0x3367e4+'/'+_0x2cb4cf+_0x3fc6e0(0x77))),_0x22f1de=new adm_zip_1[(_0x3fc6e0(0x86))]();for(const {entryName:_0x4b760f}of _0x3fc769[_0x3fc6e0(0x7a)]()){const _0x3c5c3d=(_0x4c86ca=_0x3fc769[_0x3fc6e0(0x8f)](_0x4b760f))===null||_0x4c86ca===void 0x0?void 0x0:_0x4c86ca['getData']();_0x22f1de[_0x3fc6e0(0xab)]((0x0,path_1[_0x3fc6e0(0x71)])(_0x3fc6e0(0xaa),_0x4b760f),_0x3c5c3d);}const _0x1113ab=_0x22f1de[_0x3fc6e0(0x7d)]()[_0x3fc6e0(0x75)](_0x3fc6e0(0x9b))[_0x3fc6e0(0x96)];if(_0x1113ab>=components_api_1['MAX_ZIP_SIZE']){const [_0x5459b7,_0xdeaceb]=await components_api_1['ComponentsApi']['splitZip'](_0x22f1de,_0x1113ab),_0x1be206={'ParentId':_0x3dca35,'Name':_0x3fc6e0(0x8b),'Description':_0x3fc6e0(0x8b),'Body':_0x5459b7[_0x3fc6e0(0x7d)]()[_0x3fc6e0(0x75)](_0x3fc6e0(0x9b))};await _0x955a6f[_0x3fc6e0(0x8c)](_0x3fc6e0(0x89)+constants_1[_0x3fc6e0(0x7f)]+_0x3fc6e0(0x9f),_0x1be206),_0x1be206[_0x3fc6e0(0x84)]=_0xdeaceb[_0x3fc6e0(0x7d)]()['toString']('base64'),await _0x955a6f[_0x3fc6e0(0x8c)](_0x3fc6e0(0x89)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment',_0x1be206);}else{const _0x4d359f={'ParentId':_0x3dca35,'Name':_0x3fc6e0(0x8b),'Description':_0x3fc6e0(0x8b),'Body':_0x22f1de[_0x3fc6e0(0x7d)]()['toString'](_0x3fc6e0(0x9b))};await _0x955a6f[_0x3fc6e0(0x8c)](_0x3fc6e0(0x89)+constants_1[_0x3fc6e0(0x7f)]+_0x3fc6e0(0x9f),_0x4d359f);}}catch(_0x1c2531){throw _0x1c2531;}finally{await(0x0,promises_1['rm'])('.temp/'+_0x3367e4+'/'+_0x2cb4cf,{'recursive':!![]});}}exports[a87_0x4007fb(0x9a)]=retrieveZip;async function retrieveReport(_0x250e5d,_0x58e997,_0x1b974e){const _0x5a9c6f=a87_0x4007fb,_0x24f717=_0x5a9c6f(0x91)+_0x5a9c6f(0x72)+(_0x5a9c6f(0xa5)+_0x250e5d+'\x20')+(_0x5a9c6f(0x7b)+_0x1b974e+'/'+_0x250e5d+'\x20')+(_0x5a9c6f(0x90)+_0x58e997[_0x5a9c6f(0x94)]);await sfdx_utils_1[_0x5a9c6f(0x78)][_0x5a9c6f(0x9d)](_0x5a9c6f(0x80),_0x24f717)[_0x5a9c6f(0x79)](async _0x365c63=>{const _0x18d129=_0x5a9c6f;if(sfdx_utils_2[_0x18d129(0x98)][_0x18d129(0x9c)](_0x365c63))return _0x58e997[_0x18d129(0x94)]=await auth_utils_1[_0x18d129(0x76)]['updateAccessToken'](_0x58e997['instanceUrl'],_0x58e997[_0x18d129(0xa3)],_0x58e997[_0x18d129(0x8a)],_0x58e997[_0x18d129(0x82)]),retrieveReport(_0x250e5d,_0x58e997,_0x1b974e);throw _0x365c63;});}function a87_0x5c86(){const _0x3a59e1=['507555NVPyoR','length','../../git/salesforce/utils/sfdx.utils','SFDXUtils','search','retrieveZip','base64','isAuthorizationError','spawnPromise','readFile','/sobjects/Attachment','../../git/internal/fs.internal','1350486CiHVOX','2794505cPMROS','refreshToken','setInstanceUrl','--jobid\x20','970BGHUkf','2089336ckHHOQ','3094712bTjlzL','exists','src','addFile','../utils/components-api','6LlorJe','11270832sRyXta','join','--json\x20','constructor','(((.+)+)+)+$','toString','AuthUtils','/unpackaged.zip','SFDX','catch','getEntries','-r\x20.temp/','../utils/auth.utils','toBuffer','__esModule','SALESFORCE_API_VERSION','sfdx','558620WSgTni','clientSecret','../utils/sfdx.utils','Body','.temp/','default','apply','adm-zip','/services/data/','clientId','BACKUP\x20ZIP','post','instanceUrl','../../../constants','getEntry','-u\x20','force:mdapi:retrieve:report\x20','uuid','10SITnFO','accessToken'];a87_0x5c86=function(){return _0x3a59e1;};return a87_0x5c86();}