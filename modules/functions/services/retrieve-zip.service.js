const a87_0x57e6de=a87_0x4f9b;(function(_0x349ed1,_0x2b63d5){const _0x880b57=a87_0x4f9b,_0x3152a4=_0x349ed1();while(!![]){try{const _0x252812=parseInt(_0x880b57(0x18c))/0x1+-parseInt(_0x880b57(0x188))/0x2+-parseInt(_0x880b57(0x1b2))/0x3+-parseInt(_0x880b57(0x19c))/0x4+-parseInt(_0x880b57(0x1ac))/0x5*(-parseInt(_0x880b57(0x1ae))/0x6)+parseInt(_0x880b57(0x19a))/0x7*(-parseInt(_0x880b57(0x1a0))/0x8)+parseInt(_0x880b57(0x18b))/0x9*(parseInt(_0x880b57(0x1a7))/0xa);if(_0x252812===_0x2b63d5)break;else _0x3152a4['push'](_0x3152a4['shift']());}catch(_0x5b278c){_0x3152a4['push'](_0x3152a4['shift']());}}}(a87_0x4ae6,0xda84c));function a87_0x4f9b(_0x3df5f4,_0x46b625){const _0x44b7a4=a87_0x4ae6();return a87_0x4f9b=function(_0x69001b,_0x13418f){_0x69001b=_0x69001b-0x181;let _0x4ae6a4=_0x44b7a4[_0x69001b];return _0x4ae6a4;},a87_0x4f9b(_0x3df5f4,_0x46b625);}function a87_0x4ae6(){const _0x29ca93=['path','../../git/internal/fs.internal','length','fs/promises','--jobid\x20','3079260zFWtXc','__esModule','src','isAuthorizationError','createSFDXProject','5hJmPHD','apply','10145958APtTcp','toString','SALESFORCE_API_VERSION','defineProperty','3508248yQVpAA','search','.temp/','accessToken','../utils/auth.utils','/services/data/','instanceUrl','AuthUtils','constructor','retrieveZip','getEntries','BACKUP\x20ZIP','MAX_ZIP_SIZE','base64','toBuffer','addFile','exists','(((.+)+)+)+$','catch','3355922MzGXJD','/sobjects/Attachment','-r\x20.temp/','117ZXItln','365608YymcEE','clientSecret','post','readFile','adm-zip','force:mdapi:retrieve:report\x20','mkdir','../utils/components-api','uuid','refreshToken','Body','splitZip','clientId','getData','7JXLjIu','__importDefault','4359056OwEudH','SFDXUtils','SFDX','/unpackaged.zip','9819568wcYwuZ','../../../constants'];a87_0x4ae6=function(){return _0x29ca93;};return a87_0x4ae6();}const a87_0x13418f=(function(){let _0xbd6352=!![];return function(_0x428cbd,_0x3ddfa9){const _0x11ab6c=_0xbd6352?function(){const _0x2e619a=a87_0x4f9b;if(_0x3ddfa9){const _0x1a6813=_0x3ddfa9[_0x2e619a(0x1ad)](_0x428cbd,arguments);return _0x3ddfa9=null,_0x1a6813;}}:function(){};return _0xbd6352=![],_0x11ab6c;};}()),a87_0x69001b=a87_0x13418f(this,function(){const _0x664518=a87_0x4f9b;return a87_0x69001b[_0x664518(0x1af)]()[_0x664518(0x1b3)](_0x664518(0x186))[_0x664518(0x1af)]()[_0x664518(0x1ba)](a87_0x69001b)['search'](_0x664518(0x186));});a87_0x69001b();'use strict';var __importDefault=this&&this[a87_0x57e6de(0x19b)]||function(_0x2378ab){const _0x1ada9d=a87_0x57e6de;return _0x2378ab&&_0x2378ab[_0x1ada9d(0x1a8)]?_0x2378ab:{'default':_0x2378ab};};Object[a87_0x57e6de(0x1b1)](exports,a87_0x57e6de(0x1a8),{'value':!![]}),exports[a87_0x57e6de(0x1bb)]=void 0x0;const constants_1=require(a87_0x57e6de(0x1a1)),promises_1=require(a87_0x57e6de(0x1a5)),sfdx_utils_1=require('../../git/salesforce/utils/sfdx.utils'),fs_internal_1=require(a87_0x57e6de(0x1a3)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a87_0x57e6de(0x1b6)),adm_zip_1=__importDefault(require(a87_0x57e6de(0x190))),uuid_1=require(a87_0x57e6de(0x194)),components_api_1=require(a87_0x57e6de(0x193)),path_1=require(a87_0x57e6de(0x1a2));async function retrieveZip({backupAsyncId:_0x199d26,credentials:_0x4307ba,metadataLogId:_0x2593ea},_0x35753b){const _0xc5b9b3=a87_0x57e6de;var _0x4919fc;const _0x4b792=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0xc5b9b3(0x185)](_0xc5b9b3(0x1b4)+_0x4b792)&&await(0x0,promises_1[_0xc5b9b3(0x192)])(_0xc5b9b3(0x1b4)+_0x4b792,{'recursive':!![]});await sfdx_utils_2[_0xc5b9b3(0x19d)][_0xc5b9b3(0x1ab)](_0x199d26,_0x4b792),await sfdx_utils_2[_0xc5b9b3(0x19d)]['setInstanceUrl'](_0x4307ba[_0xc5b9b3(0x1b8)],_0x199d26,_0x4b792),await retrieveReport(_0x199d26,_0x4307ba,_0x4b792);const _0x14d4fd=new adm_zip_1['default'](await(0x0,promises_1[_0xc5b9b3(0x18f)])(_0xc5b9b3(0x1b4)+_0x4b792+'/'+_0x199d26+_0xc5b9b3(0x19f))),_0x4c8727=new adm_zip_1['default']();for(const {entryName:_0x310b75}of _0x14d4fd[_0xc5b9b3(0x1bc)]()){const _0x32a397=(_0x4919fc=_0x14d4fd['getEntry'](_0x310b75))===null||_0x4919fc===void 0x0?void 0x0:_0x4919fc[_0xc5b9b3(0x199)]();_0x4c8727[_0xc5b9b3(0x184)]((0x0,path_1['join'])(_0xc5b9b3(0x1a9),_0x310b75),_0x32a397);}const _0x27d5ef=_0x4c8727[_0xc5b9b3(0x183)]()[_0xc5b9b3(0x1af)](_0xc5b9b3(0x182))[_0xc5b9b3(0x1a4)];if(_0x27d5ef>=components_api_1[_0xc5b9b3(0x181)]){const [_0x3ed218,_0x47ecd4]=await components_api_1['ComponentsApi'][_0xc5b9b3(0x197)](_0x4c8727,_0x27d5ef),_0x3b4570={'ParentId':_0x2593ea,'Name':'BACKUP\x20ZIP','Description':_0xc5b9b3(0x1bd),'Body':_0x3ed218['toBuffer']()['toString']('base64')};await _0x35753b[_0xc5b9b3(0x18e)](_0xc5b9b3(0x1b7)+constants_1['SALESFORCE_API_VERSION']+_0xc5b9b3(0x189),_0x3b4570),_0x3b4570[_0xc5b9b3(0x196)]=_0x47ecd4[_0xc5b9b3(0x183)]()[_0xc5b9b3(0x1af)](_0xc5b9b3(0x182)),await _0x35753b[_0xc5b9b3(0x18e)](_0xc5b9b3(0x1b7)+constants_1[_0xc5b9b3(0x1b0)]+_0xc5b9b3(0x189),_0x3b4570);}else{const _0x21e2e2={'ParentId':_0x2593ea,'Name':'BACKUP\x20ZIP','Description':'BACKUP\x20ZIP','Body':_0x4c8727[_0xc5b9b3(0x183)]()[_0xc5b9b3(0x1af)](_0xc5b9b3(0x182))};await _0x35753b[_0xc5b9b3(0x18e)](_0xc5b9b3(0x1b7)+constants_1[_0xc5b9b3(0x1b0)]+'/sobjects/Attachment',_0x21e2e2);}}catch(_0xb2bc80){throw _0xb2bc80;}finally{await(0x0,promises_1['rm'])(_0xc5b9b3(0x1b4)+_0x4b792+'/'+_0x199d26,{'recursive':!![]});}}exports[a87_0x57e6de(0x1bb)]=retrieveZip;async function retrieveReport(_0x33933f,_0x4b7b76,_0x3e81f){const _0x52718e=a87_0x57e6de,_0x4250b7=_0x52718e(0x191)+'--json\x20'+(_0x52718e(0x1a6)+_0x33933f+'\x20')+(_0x52718e(0x18a)+_0x3e81f+'/'+_0x33933f+'\x20')+('-u\x20'+_0x4b7b76[_0x52718e(0x1b5)]);await sfdx_utils_1[_0x52718e(0x19e)]['spawnPromise']('sfdx',_0x4250b7)[_0x52718e(0x187)](async _0x2c5910=>{const _0x49a8a8=_0x52718e;if(sfdx_utils_2[_0x49a8a8(0x19d)][_0x49a8a8(0x1aa)](_0x2c5910))return _0x4b7b76[_0x49a8a8(0x1b5)]=await auth_utils_1[_0x49a8a8(0x1b9)]['updateAccessToken'](_0x4b7b76[_0x49a8a8(0x1b8)],_0x4b7b76[_0x49a8a8(0x195)],_0x4b7b76[_0x49a8a8(0x198)],_0x4b7b76[_0x49a8a8(0x18d)]),retrieveReport(_0x33933f,_0x4b7b76,_0x3e81f);throw _0x2c5910;});}