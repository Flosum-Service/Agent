const a87_0x12a651=a87_0x1be6;(function(_0x12c9f9,_0x22eae0){const _0x18dc66=a87_0x1be6,_0x292b1b=_0x12c9f9();while(!![]){try{const _0x387838=parseInt(_0x18dc66(0x1ee))/0x1+parseInt(_0x18dc66(0x1dd))/0x2+-parseInt(_0x18dc66(0x1fb))/0x3*(parseInt(_0x18dc66(0x203))/0x4)+parseInt(_0x18dc66(0x1fa))/0x5+parseInt(_0x18dc66(0x1eb))/0x6*(parseInt(_0x18dc66(0x1f5))/0x7)+-parseInt(_0x18dc66(0x208))/0x8*(parseInt(_0x18dc66(0x1f3))/0x9)+-parseInt(_0x18dc66(0x1e4))/0xa;if(_0x387838===_0x22eae0)break;else _0x292b1b['push'](_0x292b1b['shift']());}catch(_0x420448){_0x292b1b['push'](_0x292b1b['shift']());}}}(a87_0x3da4,0x8406e));function a87_0x1be6(_0x338281,_0x2fe228){const _0x123131=a87_0x3da4();return a87_0x1be6=function(_0xed67c7,_0x41c532){_0xed67c7=_0xed67c7-0x1d2;let _0x3da47a=_0x123131[_0xed67c7];return _0x3da47a;},a87_0x1be6(_0x338281,_0x2fe228);}const a87_0x41c532=(function(){let _0x3ab75=!![];return function(_0x4f33cc,_0x25ce31){const _0x2d47f9=_0x3ab75?function(){const _0x585c7d=a87_0x1be6;if(_0x25ce31){const _0x285138=_0x25ce31[_0x585c7d(0x1ef)](_0x4f33cc,arguments);return _0x25ce31=null,_0x285138;}}:function(){};return _0x3ab75=![],_0x2d47f9;};}()),a87_0xed67c7=a87_0x41c532(this,function(){const _0x4f7d64=a87_0x1be6;return a87_0xed67c7[_0x4f7d64(0x1de)]()['search'](_0x4f7d64(0x1fc))[_0x4f7d64(0x1de)]()[_0x4f7d64(0x1d7)](a87_0xed67c7)[_0x4f7d64(0x1e0)]('(((.+)+)+)+$');});a87_0xed67c7();function a87_0x3da4(){const _0x428960=['684630BJOFin','defineProperty','3412892QRfOGB','post','getEntry','setInstanceUrl','../../../constants','3139135gzjVix','15egUzia','(((.+)+)+)+$','SFDXUtils','ComponentsApi','updateAccessToken','../../git/internal/fs.internal','exists','instanceUrl','550736hKjMTZ','uuid','--jobid\x20','__esModule','AuthUtils','24WUqnxc','getEntries','--json\x20','SALESFORCE_API_VERSION','/sobjects/Attachment','clientSecret','splitZip','constructor','SFDX','BACKUP\x20ZIP','fs/promises','force:mdapi:retrieve:report\x20','catch','1812984xJqDjW','toString','default','search','base64','join','accessToken','12862130uEWuTF','/services/data/','sfdx','/unpackaged.zip','toBuffer','createSFDXProject','__importDefault','6tzAvwx','.temp/','refreshToken','721750zLxzLm','apply','readFile','-r\x20.temp/','../utils/auth.utils'];a87_0x3da4=function(){return _0x428960;};return a87_0x3da4();}'use strict';var __importDefault=this&&this[a87_0x12a651(0x1ea)]||function(_0x2d6dfb){const _0x50bd1f=a87_0x12a651;return _0x2d6dfb&&_0x2d6dfb[_0x50bd1f(0x206)]?_0x2d6dfb:{'default':_0x2d6dfb};};Object[a87_0x12a651(0x1f4)](exports,a87_0x12a651(0x206),{'value':!![]}),exports['retrieveZip']=void 0x0;const constants_1=require(a87_0x12a651(0x1f9)),promises_1=require(a87_0x12a651(0x1da)),sfdx_utils_1=require('../../git/salesforce/utils/sfdx.utils'),fs_internal_1=require(a87_0x12a651(0x200)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a87_0x12a651(0x1f2)),adm_zip_1=__importDefault(require('adm-zip')),uuid_1=require(a87_0x12a651(0x204)),components_api_1=require('../utils/components-api'),path_1=require('path');async function retrieveZip({backupAsyncId:_0x2ffcec,credentials:_0x20ed0f,metadataLogId:_0x5040cb},_0x29b767){const _0x764001=a87_0x12a651;var _0x3b1283;const _0x338086=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x764001(0x201)]('.temp/'+_0x338086)&&await(0x0,promises_1['mkdir'])(_0x764001(0x1ec)+_0x338086,{'recursive':!![]});await sfdx_utils_2[_0x764001(0x1fd)][_0x764001(0x1e9)](_0x2ffcec,_0x338086),await sfdx_utils_2[_0x764001(0x1fd)][_0x764001(0x1f8)](_0x20ed0f[_0x764001(0x202)],_0x2ffcec,_0x338086),await retrieveReport(_0x2ffcec,_0x20ed0f,_0x338086);const _0x3880bf=new adm_zip_1[(_0x764001(0x1df))](await(0x0,promises_1[_0x764001(0x1f0)])(_0x764001(0x1ec)+_0x338086+'/'+_0x2ffcec+_0x764001(0x1e7))),_0x35bf10=new adm_zip_1[(_0x764001(0x1df))]();for(const {entryName:_0x13fa1d}of _0x3880bf[_0x764001(0x209)]()){const _0x1d84d3=(_0x3b1283=_0x3880bf[_0x764001(0x1f7)](_0x13fa1d))===null||_0x3b1283===void 0x0?void 0x0:_0x3b1283['getData']();_0x35bf10['addFile']((0x0,path_1[_0x764001(0x1e2)])('src',_0x13fa1d),_0x1d84d3);}const _0x353145=_0x35bf10[_0x764001(0x1e8)]()['toString'](_0x764001(0x1e1))['length'];if(_0x353145>=components_api_1['MAX_ZIP_SIZE']){const [_0x1dc9fd,_0x34a47a]=await components_api_1[_0x764001(0x1fe)][_0x764001(0x1d6)](_0x35bf10,_0x353145),_0x79d2e1={'ParentId':_0x5040cb,'Name':'BACKUP\x20ZIP','Description':_0x764001(0x1d9),'Body':_0x1dc9fd[_0x764001(0x1e8)]()['toString'](_0x764001(0x1e1))};await _0x29b767[_0x764001(0x1f6)]('/services/data/'+constants_1[_0x764001(0x1d3)]+_0x764001(0x1d4),_0x79d2e1),_0x79d2e1['Body']=_0x34a47a[_0x764001(0x1e8)]()[_0x764001(0x1de)]('base64'),await _0x29b767['post']('/services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x764001(0x1d4),_0x79d2e1);}else{const _0x109d3a={'ParentId':_0x5040cb,'Name':_0x764001(0x1d9),'Description':'BACKUP\x20ZIP','Body':_0x35bf10[_0x764001(0x1e8)]()['toString'](_0x764001(0x1e1))};await _0x29b767[_0x764001(0x1f6)](_0x764001(0x1e5)+constants_1[_0x764001(0x1d3)]+_0x764001(0x1d4),_0x109d3a);}}catch(_0x582aba){throw _0x582aba;}finally{await(0x0,promises_1['rm'])(_0x764001(0x1ec)+_0x338086+'/'+_0x2ffcec,{'recursive':!![]});}}exports['retrieveZip']=retrieveZip;async function retrieveReport(_0x16e60d,_0x3ae802,_0x52c023){const _0x32b1f1=a87_0x12a651,_0x335f75=_0x32b1f1(0x1db)+_0x32b1f1(0x1d2)+(_0x32b1f1(0x205)+_0x16e60d+'\x20')+(_0x32b1f1(0x1f1)+_0x52c023+'/'+_0x16e60d+'\x20')+('-u\x20'+_0x3ae802[_0x32b1f1(0x1e3)]);await sfdx_utils_1[_0x32b1f1(0x1d8)]['spawnPromise'](_0x32b1f1(0x1e6),_0x335f75)[_0x32b1f1(0x1dc)](async _0x3658e=>{const _0x16cb81=_0x32b1f1;if(sfdx_utils_2['SFDXUtils']['isAuthorizationError'](_0x3658e))return _0x3ae802[_0x16cb81(0x1e3)]=await auth_utils_1[_0x16cb81(0x207)][_0x16cb81(0x1ff)](_0x3ae802[_0x16cb81(0x202)],_0x3ae802[_0x16cb81(0x1ed)],_0x3ae802['clientId'],_0x3ae802[_0x16cb81(0x1d5)]),retrieveReport(_0x16e60d,_0x3ae802,_0x52c023);throw _0x3658e;});}