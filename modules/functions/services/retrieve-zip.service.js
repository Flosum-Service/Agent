const a87_0x339146=a87_0x1956;(function(_0x5b9226,_0x5bc647){const _0x242e8f=a87_0x1956,_0x51c317=_0x5b9226();while(!![]){try{const _0x11a5b1=parseInt(_0x242e8f(0x11f))/0x1+-parseInt(_0x242e8f(0x119))/0x2+parseInt(_0x242e8f(0x131))/0x3*(-parseInt(_0x242e8f(0x130))/0x4)+-parseInt(_0x242e8f(0x10d))/0x5*(parseInt(_0x242e8f(0x135))/0x6)+-parseInt(_0x242e8f(0x133))/0x7*(-parseInt(_0x242e8f(0x101))/0x8)+-parseInt(_0x242e8f(0x11d))/0x9*(parseInt(_0x242e8f(0x115))/0xa)+parseInt(_0x242e8f(0x12d))/0xb;if(_0x11a5b1===_0x5bc647)break;else _0x51c317['push'](_0x51c317['shift']());}catch(_0x5a6743){_0x51c317['push'](_0x51c317['shift']());}}}(a87_0x264c,0x20c09));const a87_0x10e720=(function(){let _0x1f798f=!![];return function(_0x346ca1,_0x982d9){const _0x4456b4=_0x1f798f?function(){const _0x5aadeb=a87_0x1956;if(_0x982d9){const _0xd5544e=_0x982d9[_0x5aadeb(0x12f)](_0x346ca1,arguments);return _0x982d9=null,_0xd5544e;}}:function(){};return _0x1f798f=![],_0x4456b4;};}()),a87_0x13e0f6=a87_0x10e720(this,function(){const _0x50c85c=a87_0x1956;return a87_0x13e0f6['toString']()[_0x50c85c(0x106)]('(((.+)+)+)+$')[_0x50c85c(0x12c)]()['constructor'](a87_0x13e0f6)[_0x50c85c(0x106)](_0x50c85c(0x100));});a87_0x13e0f6();function a87_0x264c(){const _0x1103d1=['fs/promises','path','splitZip','9MyTwAV','--json\x20','108723URmzBT','retrieveZip','exists','adm-zip','addFile','accessToken','getData','catch','-u\x20','__esModule','../../git/internal/fs.internal','../utils/auth.utils','updateAccessToken','toString','4046614YAgrFy','base64','apply','4CgHsQF','352908wTPtxC','clientId','14ECXrSR','.temp/','32262eDfWTD','force:mdapi:retrieve:report\x20','(((.+)+)+)+$','699320nWIQrh','/sobjects/Attachment','uuid','Body','instanceUrl','search','AuthUtils','SFDXUtils','refreshToken','post','setInstanceUrl','join','170eDRPqg','__importDefault','toBuffer','../../git/salesforce/utils/sfdx.utils','BACKUP\x20ZIP','default','clientSecret','MAX_ZIP_SIZE','124290MhXJYN','readFile','defineProperty','isAuthorizationError','408782qgCZuq'];a87_0x264c=function(){return _0x1103d1;};return a87_0x264c();}'use strict';function a87_0x1956(_0x30ce32,_0x5dd369){const _0x5decd6=a87_0x264c();return a87_0x1956=function(_0x13e0f6,_0x10e720){_0x13e0f6=_0x13e0f6-0x100;let _0x264c65=_0x5decd6[_0x13e0f6];return _0x264c65;},a87_0x1956(_0x30ce32,_0x5dd369);}var __importDefault=this&&this[a87_0x339146(0x10e)]||function(_0x457451){const _0x49088d=a87_0x339146;return _0x457451&&_0x457451[_0x49088d(0x128)]?_0x457451:{'default':_0x457451};};Object[a87_0x339146(0x117)](exports,a87_0x339146(0x128),{'value':!![]}),exports[a87_0x339146(0x120)]=void 0x0;const promises_1=require(a87_0x339146(0x11a)),sfdx_utils_1=require(a87_0x339146(0x110)),fs_internal_1=require(a87_0x339146(0x129)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a87_0x339146(0x12a)),adm_zip_1=__importDefault(require(a87_0x339146(0x122))),uuid_1=require(a87_0x339146(0x103)),components_api_1=require('../utils/components-api'),path_1=require(a87_0x339146(0x11b));async function retrieveZip({backupAsyncId:_0x250b10,credentials:_0x34076d,metadataLogId:_0x15c515,apiVersion:_0x5c2b2d},_0x1519fc){const _0x55c0dc=a87_0x339146;var _0x35d2e7;const _0x4dd2d2=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x55c0dc(0x121)](_0x55c0dc(0x134)+_0x4dd2d2)&&await(0x0,promises_1['mkdir'])(_0x55c0dc(0x134)+_0x4dd2d2,{'recursive':!![]});await sfdx_utils_2[_0x55c0dc(0x108)]['createSFDXProject'](_0x250b10,_0x4dd2d2),await sfdx_utils_2['SFDXUtils'][_0x55c0dc(0x10b)](_0x34076d[_0x55c0dc(0x105)],_0x250b10,_0x4dd2d2),await retrieveReport(_0x250b10,_0x34076d,_0x4dd2d2);const _0x44fb39=new adm_zip_1[(_0x55c0dc(0x112))](await(0x0,promises_1[_0x55c0dc(0x116)])(_0x55c0dc(0x134)+_0x4dd2d2+'/'+_0x250b10+'/unpackaged.zip')),_0x51473f=new adm_zip_1['default']();for(const {entryName:_0x43b359}of _0x44fb39['getEntries']()){const _0x1a76db=(_0x35d2e7=_0x44fb39['getEntry'](_0x43b359))===null||_0x35d2e7===void 0x0?void 0x0:_0x35d2e7[_0x55c0dc(0x125)]();_0x51473f[_0x55c0dc(0x123)]((0x0,path_1[_0x55c0dc(0x10c)])('src',_0x43b359),_0x1a76db);}const _0x2b1840=_0x51473f[_0x55c0dc(0x10f)]()[_0x55c0dc(0x12c)](_0x55c0dc(0x12e))['length'];if(_0x2b1840>=components_api_1[_0x55c0dc(0x114)]){const [_0x5cc958,_0x38c690]=await components_api_1['ComponentsApi'][_0x55c0dc(0x11c)](_0x51473f,_0x2b1840),_0x1d6b0b={'ParentId':_0x15c515,'Name':_0x55c0dc(0x111),'Description':_0x55c0dc(0x111),'Body':_0x5cc958[_0x55c0dc(0x10f)]()[_0x55c0dc(0x12c)]('base64')};await _0x1519fc['post']('/services/data/v'+_0x5c2b2d+_0x55c0dc(0x102),_0x1d6b0b),_0x1d6b0b[_0x55c0dc(0x104)]=_0x38c690[_0x55c0dc(0x10f)]()[_0x55c0dc(0x12c)](_0x55c0dc(0x12e)),await _0x1519fc[_0x55c0dc(0x10a)]('/services/data/v'+_0x5c2b2d+_0x55c0dc(0x102),_0x1d6b0b);}else{const _0xf0f1ac={'ParentId':_0x15c515,'Name':_0x55c0dc(0x111),'Description':'BACKUP\x20ZIP','Body':_0x51473f[_0x55c0dc(0x10f)]()[_0x55c0dc(0x12c)]('base64')};await _0x1519fc[_0x55c0dc(0x10a)]('/services/data/v'+_0x5c2b2d+_0x55c0dc(0x102),_0xf0f1ac);}}catch(_0x110129){throw _0x110129;}finally{await(0x0,promises_1['rm'])(_0x55c0dc(0x134)+_0x4dd2d2+'/'+_0x250b10,{'recursive':!![]});}}exports['retrieveZip']=retrieveZip;async function retrieveReport(_0x1f3d8d,_0x23f462,_0x332766){const _0x5b4ac5=a87_0x339146,_0x580d48=_0x5b4ac5(0x136)+_0x5b4ac5(0x11e)+('--jobid\x20'+_0x1f3d8d+'\x20')+('-r\x20.temp/'+_0x332766+'/'+_0x1f3d8d+'\x20')+(_0x5b4ac5(0x127)+_0x23f462[_0x5b4ac5(0x124)]);await sfdx_utils_1['SFDX']['spawn'](_0x580d48)[_0x5b4ac5(0x126)](async _0x2279f7=>{const _0x7d4e4=_0x5b4ac5;if(sfdx_utils_2[_0x7d4e4(0x108)][_0x7d4e4(0x118)](_0x2279f7))return _0x23f462[_0x7d4e4(0x124)]=await auth_utils_1[_0x7d4e4(0x107)][_0x7d4e4(0x12b)](_0x23f462['instanceUrl'],_0x23f462[_0x7d4e4(0x109)],_0x23f462[_0x7d4e4(0x132)],_0x23f462[_0x7d4e4(0x113)]),retrieveReport(_0x1f3d8d,_0x23f462,_0x332766);throw _0x2279f7;});}