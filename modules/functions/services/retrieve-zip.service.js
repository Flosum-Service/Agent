const a87_0x346485=a87_0x26f7;(function(_0x2fb182,_0x3993f6){const _0x3c0287=a87_0x26f7,_0x2673dd=_0x2fb182();while(!![]){try{const _0xb89ed4=parseInt(_0x3c0287(0x96))/0x1+parseInt(_0x3c0287(0x8d))/0x2+-parseInt(_0x3c0287(0x8c))/0x3*(-parseInt(_0x3c0287(0x7b))/0x4)+parseInt(_0x3c0287(0xa5))/0x5*(parseInt(_0x3c0287(0x6d))/0x6)+parseInt(_0x3c0287(0xa0))/0x7+parseInt(_0x3c0287(0x83))/0x8*(-parseInt(_0x3c0287(0x7f))/0x9)+-parseInt(_0x3c0287(0x9d))/0xa*(parseInt(_0x3c0287(0x87))/0xb);if(_0xb89ed4===_0x3993f6)break;else _0x2673dd['push'](_0x2673dd['shift']());}catch(_0x12514f){_0x2673dd['push'](_0x2673dd['shift']());}}}(a87_0x24bf,0x530fd));const a87_0x5b00db=(function(){let _0x352830=!![];return function(_0x29c586,_0xcaa374){const _0x3de7ec=_0x352830?function(){if(_0xcaa374){const _0x2b9eb9=_0xcaa374['apply'](_0x29c586,arguments);return _0xcaa374=null,_0x2b9eb9;}}:function(){};return _0x352830=![],_0x3de7ec;};}()),a87_0x32c7bd=a87_0x5b00db(this,function(){const _0x591c56=a87_0x26f7;return a87_0x32c7bd[_0x591c56(0xa3)]()['search']('(((.+)+)+)+$')['toString']()[_0x591c56(0x6e)](a87_0x32c7bd)[_0x591c56(0x89)](_0x591c56(0x88));});a87_0x32c7bd();'use strict';var __importDefault=this&&this[a87_0x346485(0x7d)]||function(_0x2f671e){const _0x2cf94b=a87_0x346485;return _0x2f671e&&_0x2f671e[_0x2cf94b(0x73)]?_0x2f671e:{'default':_0x2f671e};};Object[a87_0x346485(0x9e)](exports,a87_0x346485(0x73),{'value':!![]}),exports[a87_0x346485(0x8f)]=void 0x0;const constants_1=require(a87_0x346485(0x76)),promises_1=require(a87_0x346485(0x70)),sfdx_utils_1=require(a87_0x346485(0x92)),fs_internal_1=require(a87_0x346485(0x6f)),sfdx_utils_2=require(a87_0x346485(0x74)),auth_utils_1=require(a87_0x346485(0x67)),adm_zip_1=__importDefault(require(a87_0x346485(0x95))),uuid_1=require(a87_0x346485(0x99)),components_api_1=require(a87_0x346485(0x97)),path_1=require(a87_0x346485(0xa4));async function retrieveZip({backupAsyncId:_0x56b10e,credentials:_0x44652d,metadataLogId:_0x2b8d03},_0xdb55d5){const _0x17195c=a87_0x346485;var _0x288d1a;const _0x2da13d=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x17195c(0x9f)](_0x17195c(0x84)+_0x2da13d)&&await(0x0,promises_1['mkdir'])(_0x17195c(0x84)+_0x2da13d,{'recursive':!![]});await sfdx_utils_2[_0x17195c(0x82)][_0x17195c(0x8a)](_0x56b10e,_0x2da13d),await sfdx_utils_2[_0x17195c(0x82)]['setInstanceUrl'](_0x44652d[_0x17195c(0x8e)],_0x56b10e,_0x2da13d),await retrieveReport(_0x56b10e,_0x44652d,_0x2da13d);const _0x54e44d=new adm_zip_1[(_0x17195c(0xa2))](await(0x0,promises_1[_0x17195c(0xa1)])(_0x17195c(0x84)+_0x2da13d+'/'+_0x56b10e+'/unpackaged.zip')),_0x1e6cdb=new adm_zip_1['default']();for(const {entryName:_0x12ea52}of _0x54e44d[_0x17195c(0x7e)]()){const _0x24c0ad=(_0x288d1a=_0x54e44d[_0x17195c(0x93)](_0x12ea52))===null||_0x288d1a===void 0x0?void 0x0:_0x288d1a['getData']();_0x1e6cdb[_0x17195c(0x75)]((0x0,path_1[_0x17195c(0x7c)])(_0x17195c(0x90),_0x12ea52),_0x24c0ad);}const _0x2865e6=_0x1e6cdb[_0x17195c(0x9c)]()[_0x17195c(0xa3)](_0x17195c(0x81))['length'];if(_0x2865e6>=components_api_1['MAX_ZIP_SIZE']){const [_0x27d7e4,_0x2c6d01]=await components_api_1[_0x17195c(0x98)][_0x17195c(0x6c)](_0x1e6cdb,_0x2865e6),_0x2487ab={'ParentId':_0x2b8d03,'Name':_0x17195c(0xa6),'Description':'BACKUP\x20ZIP','Body':_0x27d7e4[_0x17195c(0x9c)]()[_0x17195c(0xa3)](_0x17195c(0x81))};await _0xdb55d5[_0x17195c(0x85)](_0x17195c(0x91)+constants_1[_0x17195c(0x69)]+_0x17195c(0x94),_0x2487ab),_0x2487ab[_0x17195c(0x80)]=_0x2c6d01[_0x17195c(0x9c)]()[_0x17195c(0xa3)](_0x17195c(0x81)),await _0xdb55d5[_0x17195c(0x85)](_0x17195c(0x91)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment',_0x2487ab);}else{const _0x328c3a={'ParentId':_0x2b8d03,'Name':'BACKUP\x20ZIP','Description':_0x17195c(0xa6),'Body':_0x1e6cdb[_0x17195c(0x9c)]()[_0x17195c(0xa3)](_0x17195c(0x81))};await _0xdb55d5[_0x17195c(0x85)](_0x17195c(0x91)+constants_1[_0x17195c(0x69)]+_0x17195c(0x94),_0x328c3a);}}catch(_0x1a6279){throw _0x1a6279;}finally{await(0x0,promises_1['rm'])('.temp/'+_0x2da13d+'/'+_0x56b10e,{'recursive':!![]});}}function a87_0x26f7(_0x459317,_0x140ab7){const _0x111719=a87_0x24bf();return a87_0x26f7=function(_0x32c7bd,_0x5b00db){_0x32c7bd=_0x32c7bd-0x67;let _0x24bf55=_0x111719[_0x32c7bd];return _0x24bf55;},a87_0x26f7(_0x459317,_0x140ab7);}exports[a87_0x346485(0x8f)]=retrieveZip;async function retrieveReport(_0x3a617f,_0x5aaafc,_0x29c3f4){const _0x4a5d5b=a87_0x346485,_0x283be1=_0x4a5d5b(0x9a)+_0x4a5d5b(0x6b)+(_0x4a5d5b(0x68)+_0x3a617f+'\x20')+('-r\x20.temp/'+_0x29c3f4+'/'+_0x3a617f+'\x20')+(_0x4a5d5b(0x79)+_0x5aaafc[_0x4a5d5b(0x7a)]);await sfdx_utils_1[_0x4a5d5b(0x71)]['spawn'](_0x283be1)[_0x4a5d5b(0x9b)](async _0x555621=>{const _0x2f4960=_0x4a5d5b;if(sfdx_utils_2[_0x2f4960(0x82)][_0x2f4960(0x8b)](_0x555621))return _0x5aaafc[_0x2f4960(0x7a)]=await auth_utils_1[_0x2f4960(0x6a)][_0x2f4960(0x77)](_0x5aaafc['instanceUrl'],_0x5aaafc[_0x2f4960(0x78)],_0x5aaafc[_0x2f4960(0x86)],_0x5aaafc[_0x2f4960(0x72)]),retrieveReport(_0x3a617f,_0x5aaafc,_0x29c3f4);throw _0x555621;});}function a87_0x24bf(){const _0x2da950=['uuid','force:mdapi:retrieve:report\x20','catch','toBuffer','11475410mmszOW','defineProperty','exists','2760597sJFRaL','readFile','default','toString','path','15mEJUQN','BACKUP\x20ZIP','../utils/auth.utils','--jobid\x20','SALESFORCE_API_VERSION','AuthUtils','--json\x20','splitZip','673020VXtDuv','constructor','../../git/internal/fs.internal','fs/promises','SFDX','clientSecret','__esModule','../utils/sfdx.utils','addFile','../../../constants','updateAccessToken','refreshToken','-u\x20','accessToken','1177804aNJUaX','join','__importDefault','getEntries','206154eiXJdN','Body','base64','SFDXUtils','80mevbQX','.temp/','post','clientId','11HXbpbh','(((.+)+)+)+$','search','createSFDXProject','isAuthorizationError','6UBMeId','649860lJtUBD','instanceUrl','retrieveZip','src','/services/data/','../../git/salesforce/utils/sfdx.utils','getEntry','/sobjects/Attachment','adm-zip','72109jtWfgE','../utils/components-api','ComponentsApi'];a87_0x24bf=function(){return _0x2da950;};return a87_0x24bf();}