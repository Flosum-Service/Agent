const a105_0x19b913=a105_0x30fb;(function(_0x216321,_0x1bab0c){const _0x312a67=a105_0x30fb,_0x4de594=_0x216321();while(!![]){try{const _0x2bf128=parseInt(_0x312a67(0x7b))/0x1*(parseInt(_0x312a67(0x83))/0x2)+-parseInt(_0x312a67(0x92))/0x3+-parseInt(_0x312a67(0x8f))/0x4+-parseInt(_0x312a67(0x7d))/0x5*(parseInt(_0x312a67(0x9b))/0x6)+parseInt(_0x312a67(0x6f))/0x7+-parseInt(_0x312a67(0x9f))/0x8+parseInt(_0x312a67(0x95))/0x9;if(_0x2bf128===_0x1bab0c)break;else _0x4de594['push'](_0x4de594['shift']());}catch(_0x1dc2bd){_0x4de594['push'](_0x4de594['shift']());}}}(a105_0x25b5,0xb102d));const a105_0x49bb61=(function(){let _0x2c75f7=!![];return function(_0xc629bd,_0x1af034){const _0x394478=_0x2c75f7?function(){const _0x1329ab=a105_0x30fb;if(_0x1af034){const _0x3dd379=_0x1af034[_0x1329ab(0xa0)](_0xc629bd,arguments);return _0x1af034=null,_0x3dd379;}}:function(){};return _0x2c75f7=![],_0x394478;};}()),a105_0x22dd7d=a105_0x49bb61(this,function(){const _0x5028af=a105_0x30fb;return a105_0x22dd7d[_0x5028af(0x88)]()[_0x5028af(0x81)](_0x5028af(0x97))[_0x5028af(0x88)]()[_0x5028af(0x84)](a105_0x22dd7d)['search']('(((.+)+)+)+$');});a105_0x22dd7d();function a105_0x30fb(_0x2d0286,_0xa5fea3){const _0x461011=a105_0x25b5();return a105_0x30fb=function(_0x22dd7d,_0x49bb61){_0x22dd7d=_0x22dd7d-0x6f;let _0x25b5ea=_0x461011[_0x22dd7d];return _0x25b5ea;},a105_0x30fb(_0x2d0286,_0xa5fea3);}'use strict';var __importDefault=this&&this[a105_0x19b913(0x8b)]||function(_0x85b562){return _0x85b562&&_0x85b562['__esModule']?_0x85b562:{'default':_0x85b562};};Object[a105_0x19b913(0x8d)](exports,'__esModule',{'value':!![]}),exports['retrieveZip']=void 0x0;const promises_1=require('fs/promises'),sfdx_utils_1=require(a105_0x19b913(0xa5)),fs_internal_1=require(a105_0x19b913(0x77)),sfdx_utils_2=require(a105_0x19b913(0x89)),auth_utils_1=require(a105_0x19b913(0x9a)),adm_zip_1=__importDefault(require('adm-zip')),uuid_1=require('uuid'),components_api_1=require(a105_0x19b913(0xa2)),path_1=require(a105_0x19b913(0x78));function a105_0x25b5(){const _0x1b1a72=['path','src','getEntries','1010Qfrytq','/unpackaged.zip','2405geDQXE','--jobid\x20','instanceUrl','SFDXUtils','search','/services/data/v','1204xTBlZm','constructor','spawn','force:mdapi:retrieve:report\x20','ComponentsApi','toString','../utils/sfdx.utils','addFile','__importDefault','mkdir','defineProperty','MAX_ZIP_SIZE','5619404altGJU','setInstanceUrl','--json\x20','3094590XEkokT','getEntry','base64','20908386wjUOZZ','join','(((.+)+)+)+$','retrieveZip','-u\x20','../utils/auth.utils','3900udDemF','/sobjects/Attachment','toBuffer','exists','6229928jrOLeD','apply','readFile','../utils/components-api','splitZip','accessToken','../../git/salesforce/utils/sfdx.utils','.temp/','9251445lFpEmA','default','length','SFDX','Body','BACKUP\x20ZIP','post','getData','../../git/internal/fs.internal'];a105_0x25b5=function(){return _0x1b1a72;};return a105_0x25b5();}async function retrieveZip({backupAsyncId:_0x2b8aeb,credentials:_0xae12a7,metadataLogId:_0x57c514,apiVersion:_0x49473b},_0x564d47){const _0x54af73=a105_0x19b913;var _0xd3dde0;const _0x687355=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x54af73(0x9e)](_0x54af73(0xa6)+_0x687355)&&await(0x0,promises_1[_0x54af73(0x8c)])(_0x54af73(0xa6)+_0x687355,{'recursive':!![]});await sfdx_utils_2[_0x54af73(0x80)]['createSFDXProject'](_0x2b8aeb,_0x687355),await sfdx_utils_2[_0x54af73(0x80)][_0x54af73(0x90)](_0xae12a7[_0x54af73(0x7f)],_0x2b8aeb,_0x687355),await retrieveReport(_0x2b8aeb,_0xae12a7,_0x687355);const _0x58f4cc=new adm_zip_1[(_0x54af73(0x70))](await(0x0,promises_1[_0x54af73(0xa1)])(_0x54af73(0xa6)+_0x687355+'/'+_0x2b8aeb+_0x54af73(0x7c))),_0x5816cf=new adm_zip_1[(_0x54af73(0x70))]();for(const {entryName:_0x4789f5}of _0x58f4cc[_0x54af73(0x7a)]()){const _0x382c55=(_0xd3dde0=_0x58f4cc[_0x54af73(0x93)](_0x4789f5))===null||_0xd3dde0===void 0x0?void 0x0:_0xd3dde0[_0x54af73(0x76)]();_0x5816cf[_0x54af73(0x8a)]((0x0,path_1[_0x54af73(0x96)])(_0x54af73(0x79),_0x4789f5),_0x382c55);}const _0x5836b1=_0x5816cf[_0x54af73(0x9d)]()[_0x54af73(0x88)](_0x54af73(0x94))[_0x54af73(0x71)];if(_0x5836b1>=components_api_1[_0x54af73(0x8e)]){const [_0x392135,_0x110b67]=await components_api_1[_0x54af73(0x87)][_0x54af73(0xa3)](_0x5816cf,_0x5836b1),_0x13d200={'ParentId':_0x57c514,'Name':_0x54af73(0x74),'Description':_0x54af73(0x74),'Body':_0x392135[_0x54af73(0x9d)]()['toString'](_0x54af73(0x94))};await _0x564d47['post'](_0x54af73(0x82)+_0x49473b+_0x54af73(0x9c),_0x13d200),_0x13d200[_0x54af73(0x73)]=_0x110b67[_0x54af73(0x9d)]()[_0x54af73(0x88)](_0x54af73(0x94)),await _0x564d47[_0x54af73(0x75)](_0x54af73(0x82)+_0x49473b+'/sobjects/Attachment',_0x13d200);}else{const _0x2d7f2c={'ParentId':_0x57c514,'Name':'BACKUP\x20ZIP','Description':_0x54af73(0x74),'Body':_0x5816cf[_0x54af73(0x9d)]()['toString'](_0x54af73(0x94))};await _0x564d47[_0x54af73(0x75)](_0x54af73(0x82)+_0x49473b+_0x54af73(0x9c),_0x2d7f2c);}}catch(_0x579435){throw _0x579435;}finally{await(0x0,promises_1['rm'])(_0x54af73(0xa6)+_0x687355+'/'+_0x2b8aeb,{'recursive':!![]});}}exports[a105_0x19b913(0x98)]=retrieveZip;async function retrieveReport(_0x14cf7d,_0x2c7018,_0x313c86){const _0x22e5da=a105_0x19b913,_0x2b1fc5=_0x22e5da(0x86)+_0x22e5da(0x91)+(_0x22e5da(0x7e)+_0x14cf7d+'\x20')+('-r\x20.temp/'+_0x313c86+'/'+_0x14cf7d+'\x20')+(_0x22e5da(0x99)+_0x2c7018[_0x22e5da(0xa4)]);await sfdx_utils_1[_0x22e5da(0x72)][_0x22e5da(0x85)](_0x2b1fc5)['catch'](async _0x1537f2=>{const _0x25d11d=_0x22e5da;if(sfdx_utils_2[_0x25d11d(0x80)]['isAuthorizationError'](_0x1537f2))return _0x2c7018[_0x25d11d(0xa4)]=await auth_utils_1['AuthUtils']['updateAccessToken'](_0x2c7018[_0x25d11d(0x7f)],_0x2c7018['refreshToken'],_0x2c7018['clientId'],_0x2c7018['clientSecret']),retrieveReport(_0x14cf7d,_0x2c7018,_0x313c86);throw _0x1537f2;});}