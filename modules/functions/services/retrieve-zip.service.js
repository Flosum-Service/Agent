function a87_0x16e9(){const _0x24f4ae=['BACKUP\x20ZIP','SFDX','609KTVehd','toString','isAuthorizationError','adm-zip','retrieveZip','../utils/components-api','src','readFile','SFDXUtils','SALESFORCE_API_VERSION','293674VFAnkQ','force:mdapi:retrieve:report\x20','instanceUrl','/unpackaged.zip','15250nfqPuj','sfdx','accessToken','Body','4615237eNZCwp','default','/services/data/','toBuffer','catch','createSFDXProject','-r\x20.temp/','splitZip','post','../../../constants','2637zWdWaO','2rGhQTQ','1618518DBHnqH','fs/promises','__importDefault','exists','setInstanceUrl','clientSecret','updateAccessToken','mkdir','base64','.temp/','392428uyMiIQ','length','constructor','278118NKxLPK','uuid','36304MsWDNw','--jobid\x20','../../git/internal/fs.internal','spawnPromise','join','MAX_ZIP_SIZE','(((.+)+)+)+$','5TgoYKt','/sobjects/Attachment','addFile','__esModule','../../git/salesforce/utils/sfdx.utils','apply'];a87_0x16e9=function(){return _0x24f4ae;};return a87_0x16e9();}const a87_0x3c57f5=a87_0x5426;(function(_0x4cdc47,_0x1c5e1c){const _0x127159=a87_0x5426,_0x1470f4=_0x4cdc47();while(!![]){try{const _0x3c057c=parseInt(_0x127159(0x19a))/0x1+parseInt(_0x127159(0x1ad))/0x2*(parseInt(_0x127159(0x1ae))/0x3)+parseInt(_0x127159(0x17c))/0x4+parseInt(_0x127159(0x188))/0x5*(-parseInt(_0x127159(0x17f))/0x6)+parseInt(_0x127159(0x190))/0x7*(-parseInt(_0x127159(0x181))/0x8)+parseInt(_0x127159(0x1ac))/0x9*(-parseInt(_0x127159(0x19e))/0xa)+parseInt(_0x127159(0x1a2))/0xb;if(_0x3c057c===_0x1c5e1c)break;else _0x1470f4['push'](_0x1470f4['shift']());}catch(_0x36742a){_0x1470f4['push'](_0x1470f4['shift']());}}}(a87_0x16e9,0x71016));const a87_0x479d9e=(function(){let _0x1dfbf9=!![];return function(_0x349bf4,_0x51ef14){const _0x58bfd0=_0x1dfbf9?function(){const _0x4477e5=a87_0x5426;if(_0x51ef14){const _0x2646d4=_0x51ef14[_0x4477e5(0x18d)](_0x349bf4,arguments);return _0x51ef14=null,_0x2646d4;}}:function(){};return _0x1dfbf9=![],_0x58bfd0;};}()),a87_0x1b0500=a87_0x479d9e(this,function(){const _0xe55b8d=a87_0x5426;return a87_0x1b0500[_0xe55b8d(0x191)]()['search']('(((.+)+)+)+$')[_0xe55b8d(0x191)]()[_0xe55b8d(0x17e)](a87_0x1b0500)['search'](_0xe55b8d(0x187));});a87_0x1b0500();'use strict';var __importDefault=this&&this[a87_0x3c57f5(0x174)]||function(_0x2cd56a){const _0x58dcbc=a87_0x3c57f5;return _0x2cd56a&&_0x2cd56a[_0x58dcbc(0x18b)]?_0x2cd56a:{'default':_0x2cd56a};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a87_0x3c57f5(0x194)]=void 0x0;const constants_1=require(a87_0x3c57f5(0x1ab)),promises_1=require(a87_0x3c57f5(0x1af)),sfdx_utils_1=require(a87_0x3c57f5(0x18c)),fs_internal_1=require(a87_0x3c57f5(0x183)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require('../utils/auth.utils'),adm_zip_1=__importDefault(require(a87_0x3c57f5(0x193))),uuid_1=require(a87_0x3c57f5(0x180)),components_api_1=require(a87_0x3c57f5(0x195)),path_1=require('path');async function retrieveZip({backupAsyncId:_0x415595,credentials:_0x322789,metadataLogId:_0x2d67ab},_0x57fef1){const _0x2c2bc7=a87_0x3c57f5;var _0x3295f7;const _0x226795=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x2c2bc7(0x175)](_0x2c2bc7(0x17b)+_0x226795)&&await(0x0,promises_1[_0x2c2bc7(0x179)])('.temp/'+_0x226795,{'recursive':!![]});await sfdx_utils_2[_0x2c2bc7(0x198)][_0x2c2bc7(0x1a7)](_0x415595,_0x226795),await sfdx_utils_2[_0x2c2bc7(0x198)][_0x2c2bc7(0x176)](_0x322789[_0x2c2bc7(0x19c)],_0x415595,_0x226795),await retrieveReport(_0x415595,_0x322789,_0x226795);const _0x2688bc=new adm_zip_1[(_0x2c2bc7(0x1a3))](await(0x0,promises_1[_0x2c2bc7(0x197)])(_0x2c2bc7(0x17b)+_0x226795+'/'+_0x415595+_0x2c2bc7(0x19d))),_0x1d04f5=new adm_zip_1[(_0x2c2bc7(0x1a3))]();for(const {entryName:_0x4555bf}of _0x2688bc['getEntries']()){const _0x3b7dfa=(_0x3295f7=_0x2688bc['getEntry'](_0x4555bf))===null||_0x3295f7===void 0x0?void 0x0:_0x3295f7['getData']();_0x1d04f5[_0x2c2bc7(0x18a)]((0x0,path_1[_0x2c2bc7(0x185)])(_0x2c2bc7(0x196),_0x4555bf),_0x3b7dfa);}const _0x5b7bbe=_0x1d04f5[_0x2c2bc7(0x1a5)]()[_0x2c2bc7(0x191)]('base64')[_0x2c2bc7(0x17d)];if(_0x5b7bbe>=components_api_1[_0x2c2bc7(0x186)]){const [_0x22e330,_0x23f348]=await components_api_1['ComponentsApi'][_0x2c2bc7(0x1a9)](_0x1d04f5,_0x5b7bbe),_0xc4efb8={'ParentId':_0x2d67ab,'Name':_0x2c2bc7(0x18e),'Description':_0x2c2bc7(0x18e),'Body':_0x22e330[_0x2c2bc7(0x1a5)]()[_0x2c2bc7(0x191)](_0x2c2bc7(0x17a))};await _0x57fef1[_0x2c2bc7(0x1aa)]('/services/data/'+constants_1[_0x2c2bc7(0x199)]+_0x2c2bc7(0x189),_0xc4efb8),_0xc4efb8[_0x2c2bc7(0x1a1)]=_0x23f348[_0x2c2bc7(0x1a5)]()[_0x2c2bc7(0x191)](_0x2c2bc7(0x17a)),await _0x57fef1['post'](_0x2c2bc7(0x1a4)+constants_1['SALESFORCE_API_VERSION']+_0x2c2bc7(0x189),_0xc4efb8);}else{const _0x51481d={'ParentId':_0x2d67ab,'Name':_0x2c2bc7(0x18e),'Description':_0x2c2bc7(0x18e),'Body':_0x1d04f5[_0x2c2bc7(0x1a5)]()[_0x2c2bc7(0x191)](_0x2c2bc7(0x17a))};await _0x57fef1[_0x2c2bc7(0x1aa)]('/services/data/'+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment',_0x51481d);}}catch(_0xf3a38){throw _0xf3a38;}finally{await(0x0,promises_1['rm'])(_0x2c2bc7(0x17b)+_0x226795+'/'+_0x415595,{'recursive':!![]});}}exports[a87_0x3c57f5(0x194)]=retrieveZip;function a87_0x5426(_0x33e866,_0x15ef92){const _0x13625e=a87_0x16e9();return a87_0x5426=function(_0x1b0500,_0x479d9e){_0x1b0500=_0x1b0500-0x174;let _0x16e9e4=_0x13625e[_0x1b0500];return _0x16e9e4;},a87_0x5426(_0x33e866,_0x15ef92);}async function retrieveReport(_0x4e462d,_0xd71dfd,_0x22f2fa){const _0x465bef=a87_0x3c57f5,_0x41bfe6=_0x465bef(0x19b)+'--json\x20'+(_0x465bef(0x182)+_0x4e462d+'\x20')+(_0x465bef(0x1a8)+_0x22f2fa+'/'+_0x4e462d+'\x20')+('-u\x20'+_0xd71dfd['accessToken']);await sfdx_utils_1[_0x465bef(0x18f)][_0x465bef(0x184)](_0x465bef(0x19f),_0x41bfe6)[_0x465bef(0x1a6)](async _0x3d9043=>{const _0x5b93cd=_0x465bef;if(sfdx_utils_2[_0x5b93cd(0x198)][_0x5b93cd(0x192)](_0x3d9043))return _0xd71dfd[_0x5b93cd(0x1a0)]=await auth_utils_1['AuthUtils'][_0x5b93cd(0x178)](_0xd71dfd['instanceUrl'],_0xd71dfd['refreshToken'],_0xd71dfd['clientId'],_0xd71dfd[_0x5b93cd(0x177)]),retrieveReport(_0x4e462d,_0xd71dfd,_0x22f2fa);throw _0x3d9043;});}