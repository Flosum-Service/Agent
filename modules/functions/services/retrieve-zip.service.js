function a87_0x1be0(_0x324f3d,_0x220212){const _0x273dc1=a87_0x5fbe();return a87_0x1be0=function(_0x379eef,_0x4eefd0){_0x379eef=_0x379eef-0xda;let _0x5fbe9=_0x273dc1[_0x379eef];return _0x5fbe9;},a87_0x1be0(_0x324f3d,_0x220212);}const a87_0x2ce5c8=a87_0x1be0;(function(_0x1b4ad7,_0x561736){const _0x17d2a0=a87_0x1be0,_0xd5df33=_0x1b4ad7();while(!![]){try{const _0x25a4fc=parseInt(_0x17d2a0(0x108))/0x1*(parseInt(_0x17d2a0(0xfb))/0x2)+parseInt(_0x17d2a0(0xe1))/0x3*(-parseInt(_0x17d2a0(0xfc))/0x4)+-parseInt(_0x17d2a0(0xf6))/0x5+-parseInt(_0x17d2a0(0xe0))/0x6+parseInt(_0x17d2a0(0xdb))/0x7*(-parseInt(_0x17d2a0(0x10a))/0x8)+parseInt(_0x17d2a0(0xf7))/0x9+parseInt(_0x17d2a0(0xde))/0xa;if(_0x25a4fc===_0x561736)break;else _0xd5df33['push'](_0xd5df33['shift']());}catch(_0x5dbb5a){_0xd5df33['push'](_0xd5df33['shift']());}}}(a87_0x5fbe,0x5419f));const a87_0x4eefd0=(function(){let _0x18dfea=!![];return function(_0x592859,_0x1e0f9f){const _0x27a79a=_0x18dfea?function(){if(_0x1e0f9f){const _0x32f2a6=_0x1e0f9f['apply'](_0x592859,arguments);return _0x1e0f9f=null,_0x32f2a6;}}:function(){};return _0x18dfea=![],_0x27a79a;};}()),a87_0x379eef=a87_0x4eefd0(this,function(){const _0x4d7d72=a87_0x1be0;return a87_0x379eef[_0x4d7d72(0x10c)]()[_0x4d7d72(0xda)](_0x4d7d72(0x112))[_0x4d7d72(0x10c)]()[_0x4d7d72(0xf3)](a87_0x379eef)[_0x4d7d72(0xda)]('(((.+)+)+)+$');});a87_0x379eef();'use strict';var __importDefault=this&&this[a87_0x2ce5c8(0x104)]||function(_0x3aacd8){return _0x3aacd8&&_0x3aacd8['__esModule']?_0x3aacd8:{'default':_0x3aacd8};};Object[a87_0x2ce5c8(0x105)](exports,a87_0x2ce5c8(0xee),{'value':!![]}),exports['retrieveZip']=void 0x0;const constants_1=require(a87_0x2ce5c8(0xe8)),promises_1=require('fs/promises'),sfdx_utils_1=require('../../git/salesforce/utils/sfdx.utils'),fs_internal_1=require(a87_0x2ce5c8(0xe9)),sfdx_utils_2=require(a87_0x2ce5c8(0x106)),auth_utils_1=require(a87_0x2ce5c8(0xea)),adm_zip_1=__importDefault(require(a87_0x2ce5c8(0xff))),uuid_1=require(a87_0x2ce5c8(0xe3)),components_api_1=require(a87_0x2ce5c8(0x107)),path_1=require(a87_0x2ce5c8(0xf4));async function retrieveZip({backupAsyncId:_0x28a7fd,credentials:_0x30f884,metadataLogId:_0x2b0082},_0x198920){const _0x57ed37=a87_0x2ce5c8;var _0x22c080;const _0x37c33e=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x57ed37(0xdf)]('.temp/'+_0x37c33e)&&await(0x0,promises_1[_0x57ed37(0xfe)])(_0x57ed37(0x113)+_0x37c33e,{'recursive':!![]});await sfdx_utils_2[_0x57ed37(0x100)][_0x57ed37(0xf8)](_0x28a7fd,_0x37c33e),await sfdx_utils_2[_0x57ed37(0x100)][_0x57ed37(0xe6)](_0x30f884[_0x57ed37(0x10d)],_0x28a7fd,_0x37c33e),await retrieveReport(_0x28a7fd,_0x30f884,_0x37c33e);const _0x262acc=new adm_zip_1['default'](await(0x0,promises_1[_0x57ed37(0xfd)])(_0x57ed37(0x113)+_0x37c33e+'/'+_0x28a7fd+_0x57ed37(0xef))),_0x4f35dd=new adm_zip_1[(_0x57ed37(0x102))]();for(const {entryName:_0x3bdc58}of _0x262acc['getEntries']()){const _0x49d2a3=(_0x22c080=_0x262acc[_0x57ed37(0x10f)](_0x3bdc58))===null||_0x22c080===void 0x0?void 0x0:_0x22c080['getData']();_0x4f35dd[_0x57ed37(0x109)]((0x0,path_1[_0x57ed37(0x114)])(_0x57ed37(0xf0),_0x3bdc58),_0x49d2a3);}const _0x41d6d8=_0x4f35dd[_0x57ed37(0xed)]()[_0x57ed37(0x10c)](_0x57ed37(0xdd))[_0x57ed37(0xe4)];if(_0x41d6d8>=components_api_1[_0x57ed37(0xdc)]){const [_0x4f74c7,_0xcdb452]=await components_api_1['ComponentsApi']['splitZip'](_0x4f35dd,_0x41d6d8),_0x18aa7d={'ParentId':_0x2b0082,'Name':_0x57ed37(0xe5),'Description':'BACKUP\x20ZIP','Body':_0x4f74c7[_0x57ed37(0xed)]()['toString'](_0x57ed37(0xdd))};await _0x198920['post'](_0x57ed37(0xf1)+constants_1[_0x57ed37(0xe7)]+'/sobjects/Attachment',_0x18aa7d),_0x18aa7d[_0x57ed37(0x111)]=_0xcdb452['toBuffer']()[_0x57ed37(0x10c)](_0x57ed37(0xdd)),await _0x198920[_0x57ed37(0xeb)](_0x57ed37(0xf1)+constants_1[_0x57ed37(0xe7)]+'/sobjects/Attachment',_0x18aa7d);}else{const _0x5df94d={'ParentId':_0x2b0082,'Name':_0x57ed37(0xe5),'Description':_0x57ed37(0xe5),'Body':_0x4f35dd[_0x57ed37(0xed)]()['toString'](_0x57ed37(0xdd))};await _0x198920['post'](_0x57ed37(0xf1)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment',_0x5df94d);}}catch(_0x4f49d8){throw _0x4f49d8;}finally{await(0x0,promises_1['rm'])(_0x57ed37(0x113)+_0x37c33e+'/'+_0x28a7fd,{'recursive':!![]});}}exports['retrieveZip']=retrieveZip;async function retrieveReport(_0x32457d,_0x3722ce,_0x46bbfe){const _0x32f481=a87_0x2ce5c8,_0xf71323='force:mdapi:retrieve:report\x20'+_0x32f481(0x101)+('--jobid\x20'+_0x32457d+'\x20')+(_0x32f481(0x110)+_0x46bbfe+'/'+_0x32457d+'\x20')+(_0x32f481(0xec)+_0x3722ce[_0x32f481(0xfa)]);await sfdx_utils_1[_0x32f481(0x103)][_0x32f481(0x10e)](_0x32f481(0x10b),_0xf71323)[_0x32f481(0xe2)](async _0x83e561=>{const _0x3dc34b=_0x32f481;if(sfdx_utils_2[_0x3dc34b(0x100)]['isAuthorizationError'](_0x83e561))return _0x3722ce[_0x3dc34b(0xfa)]=await auth_utils_1[_0x3dc34b(0xf5)][_0x3dc34b(0xf9)](_0x3722ce[_0x3dc34b(0x10d)],_0x3722ce['refreshToken'],_0x3722ce['clientId'],_0x3722ce[_0x3dc34b(0xf2)]),retrieveReport(_0x32457d,_0x3722ce,_0x46bbfe);throw _0x83e561;});}function a87_0x5fbe(){const _0x29f1d3=['spawnPromise','getEntry','-r\x20.temp/','Body','(((.+)+)+)+$','.temp/','join','search','119beiOTK','MAX_ZIP_SIZE','base64','7267650mObBCp','exists','3906036LIqjbP','3qByivs','catch','uuid','length','BACKUP\x20ZIP','setInstanceUrl','SALESFORCE_API_VERSION','../../../constants','../../git/internal/fs.internal','../utils/auth.utils','post','-u\x20','toBuffer','__esModule','/unpackaged.zip','src','/services/data/','clientSecret','constructor','path','AuthUtils','1206690MPmTkS','4916259TugCQx','createSFDXProject','updateAccessToken','accessToken','446QnNorh','719536YgLtQK','readFile','mkdir','adm-zip','SFDXUtils','--json\x20','default','SFDX','__importDefault','defineProperty','../utils/sfdx.utils','../utils/components-api','2222wrFYPP','addFile','165560TtBuPu','sfdx','toString','instanceUrl'];a87_0x5fbe=function(){return _0x29f1d3;};return a87_0x5fbe();}