const a87_0x36dc69=a87_0x1a42;function a87_0x1a42(_0x6b6f63,_0x269c45){const _0x4f948a=a87_0x2bc0();return a87_0x1a42=function(_0x5bb1a8,_0x42dd26){_0x5bb1a8=_0x5bb1a8-0x10a;let _0x2bc082=_0x4f948a[_0x5bb1a8];return _0x2bc082;},a87_0x1a42(_0x6b6f63,_0x269c45);}(function(_0x4679b7,_0x264bc9){const _0x1596e7=a87_0x1a42,_0x2ecec6=_0x4679b7();while(!![]){try{const _0x3d94de=parseInt(_0x1596e7(0x121))/0x1*(parseInt(_0x1596e7(0x115))/0x2)+-parseInt(_0x1596e7(0x137))/0x3*(parseInt(_0x1596e7(0x132))/0x4)+-parseInt(_0x1596e7(0x128))/0x5*(-parseInt(_0x1596e7(0x144))/0x6)+-parseInt(_0x1596e7(0x134))/0x7*(parseInt(_0x1596e7(0x142))/0x8)+-parseInt(_0x1596e7(0x120))/0x9+-parseInt(_0x1596e7(0x143))/0xa+-parseInt(_0x1596e7(0x130))/0xb*(-parseInt(_0x1596e7(0x131))/0xc);if(_0x3d94de===_0x264bc9)break;else _0x2ecec6['push'](_0x2ecec6['shift']());}catch(_0x15b9ef){_0x2ecec6['push'](_0x2ecec6['shift']());}}}(a87_0x2bc0,0xa71b9));const a87_0x42dd26=(function(){let _0x380ce4=!![];return function(_0x2a790f,_0x535743){const _0x319e3f=_0x380ce4?function(){const _0x559e4e=a87_0x1a42;if(_0x535743){const _0x55d486=_0x535743[_0x559e4e(0x12f)](_0x2a790f,arguments);return _0x535743=null,_0x55d486;}}:function(){};return _0x380ce4=![],_0x319e3f;};}()),a87_0x5bb1a8=a87_0x42dd26(this,function(){const _0x1e515f=a87_0x1a42;return a87_0x5bb1a8['toString']()['search'](_0x1e515f(0x11b))[_0x1e515f(0x13d)]()[_0x1e515f(0x146)](a87_0x5bb1a8)[_0x1e515f(0x11c)](_0x1e515f(0x11b));});function a87_0x2bc0(){const _0x295917=['retrieveZip','13796dDzitV','readFile','.temp/','-r\x20.temp/','ComponentsApi','MAX_ZIP_SIZE','(((.+)+)+)+$','search','getData','createSFDXProject','isAuthorizationError','7123374rmdCAS','87IEbAxf','instanceUrl','../../git/salesforce/utils/sfdx.utils','BACKUP\x20ZIP','fs/promises','spawn','Body','5IhIhrw','/sobjects/Attachment','updateAccessToken','clientId','clientSecret','../utils/components-api','defineProperty','apply','176HYpOxP','2446992kQqUIF','8lFSKWf','path','1062866eFPwGq','toBuffer','default','1522305mXJvHN','../../git/internal/fs.internal','/services/data/','mkdir','SFDXUtils','src','toString','../utils/auth.utils','uuid','base64','getEntries','56KESJSn','8759740IWEJgd','3401322WImcYe','__importDefault','constructor','post','../../../constants','/unpackaged.zip','SALESFORCE_API_VERSION','adm-zip','catch','__esModule','accessToken','--jobid\x20','addFile'];a87_0x2bc0=function(){return _0x295917;};return a87_0x2bc0();}a87_0x5bb1a8();'use strict';var __importDefault=this&&this[a87_0x36dc69(0x145)]||function(_0x412c66){const _0x3385de=a87_0x36dc69;return _0x412c66&&_0x412c66[_0x3385de(0x110)]?_0x412c66:{'default':_0x412c66};};Object[a87_0x36dc69(0x12e)](exports,a87_0x36dc69(0x110),{'value':!![]}),exports[a87_0x36dc69(0x114)]=void 0x0;const constants_1=require(a87_0x36dc69(0x10b)),promises_1=require(a87_0x36dc69(0x125)),sfdx_utils_1=require(a87_0x36dc69(0x123)),fs_internal_1=require(a87_0x36dc69(0x138)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a87_0x36dc69(0x13e)),adm_zip_1=__importDefault(require(a87_0x36dc69(0x10e))),uuid_1=require(a87_0x36dc69(0x13f)),components_api_1=require(a87_0x36dc69(0x12d)),path_1=require(a87_0x36dc69(0x133));async function retrieveZip({backupAsyncId:_0x601b26,credentials:_0x19046b,metadataLogId:_0x14504b},_0x323af0){const _0x355e7d=a87_0x36dc69;var _0x21c22b;const _0x384d46=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS']['exists']('.temp/'+_0x384d46)&&await(0x0,promises_1[_0x355e7d(0x13a)])('.temp/'+_0x384d46,{'recursive':!![]});await sfdx_utils_2[_0x355e7d(0x13b)][_0x355e7d(0x11e)](_0x601b26,_0x384d46),await sfdx_utils_2[_0x355e7d(0x13b)]['setInstanceUrl'](_0x19046b[_0x355e7d(0x122)],_0x601b26,_0x384d46),await retrieveReport(_0x601b26,_0x19046b,_0x384d46);const _0x459a52=new adm_zip_1[(_0x355e7d(0x136))](await(0x0,promises_1[_0x355e7d(0x116)])('.temp/'+_0x384d46+'/'+_0x601b26+_0x355e7d(0x10c))),_0x47f8c5=new adm_zip_1[(_0x355e7d(0x136))]();for(const {entryName:_0x2e41e3}of _0x459a52[_0x355e7d(0x141)]()){const _0xdbe1a5=(_0x21c22b=_0x459a52['getEntry'](_0x2e41e3))===null||_0x21c22b===void 0x0?void 0x0:_0x21c22b[_0x355e7d(0x11d)]();_0x47f8c5[_0x355e7d(0x113)]((0x0,path_1['join'])(_0x355e7d(0x13c),_0x2e41e3),_0xdbe1a5);}const _0x5ed2f4=_0x47f8c5[_0x355e7d(0x135)]()['toString'](_0x355e7d(0x140))['length'];if(_0x5ed2f4>=components_api_1[_0x355e7d(0x11a)]){const [_0x41ea00,_0x43ab43]=await components_api_1[_0x355e7d(0x119)]['splitZip'](_0x47f8c5,_0x5ed2f4),_0x26b8fb={'ParentId':_0x14504b,'Name':'BACKUP\x20ZIP','Description':_0x355e7d(0x124),'Body':_0x41ea00[_0x355e7d(0x135)]()[_0x355e7d(0x13d)](_0x355e7d(0x140))};await _0x323af0['post'](_0x355e7d(0x139)+constants_1[_0x355e7d(0x10d)]+_0x355e7d(0x129),_0x26b8fb),_0x26b8fb[_0x355e7d(0x127)]=_0x43ab43[_0x355e7d(0x135)]()[_0x355e7d(0x13d)](_0x355e7d(0x140)),await _0x323af0['post'](_0x355e7d(0x139)+constants_1[_0x355e7d(0x10d)]+_0x355e7d(0x129),_0x26b8fb);}else{const _0x10167f={'ParentId':_0x14504b,'Name':'BACKUP\x20ZIP','Description':'BACKUP\x20ZIP','Body':_0x47f8c5[_0x355e7d(0x135)]()[_0x355e7d(0x13d)](_0x355e7d(0x140))};await _0x323af0[_0x355e7d(0x10a)](_0x355e7d(0x139)+constants_1[_0x355e7d(0x10d)]+_0x355e7d(0x129),_0x10167f);}}catch(_0x195da0){throw _0x195da0;}finally{await(0x0,promises_1['rm'])(_0x355e7d(0x117)+_0x384d46+'/'+_0x601b26,{'recursive':!![]});}}exports[a87_0x36dc69(0x114)]=retrieveZip;async function retrieveReport(_0x2ba38d,_0x300e70,_0x5bd9fc){const _0x163046=a87_0x36dc69,_0x27412c='force:mdapi:retrieve:report\x20'+'--json\x20'+(_0x163046(0x112)+_0x2ba38d+'\x20')+(_0x163046(0x118)+_0x5bd9fc+'/'+_0x2ba38d+'\x20')+('-u\x20'+_0x300e70[_0x163046(0x111)]);await sfdx_utils_1['SFDX'][_0x163046(0x126)](_0x27412c)[_0x163046(0x10f)](async _0x4c76bd=>{const _0x23d5a6=_0x163046;if(sfdx_utils_2['SFDXUtils'][_0x23d5a6(0x11f)](_0x4c76bd))return _0x300e70[_0x23d5a6(0x111)]=await auth_utils_1['AuthUtils'][_0x23d5a6(0x12a)](_0x300e70[_0x23d5a6(0x122)],_0x300e70['refreshToken'],_0x300e70[_0x23d5a6(0x12b)],_0x300e70[_0x23d5a6(0x12c)]),retrieveReport(_0x2ba38d,_0x300e70,_0x5bd9fc);throw _0x4c76bd;});}