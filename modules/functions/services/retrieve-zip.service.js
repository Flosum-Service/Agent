const a87_0x104b52=a87_0x2a30;(function(_0x127345,_0x3f35af){const _0x2965f6=a87_0x2a30,_0x25c508=_0x127345();while(!![]){try{const _0x222c7f=parseInt(_0x2965f6(0xd4))/0x1*(-parseInt(_0x2965f6(0xb1))/0x2)+parseInt(_0x2965f6(0xd1))/0x3*(-parseInt(_0x2965f6(0xb6))/0x4)+-parseInt(_0x2965f6(0xaa))/0x5*(parseInt(_0x2965f6(0xbc))/0x6)+parseInt(_0x2965f6(0xbe))/0x7*(-parseInt(_0x2965f6(0x9e))/0x8)+-parseInt(_0x2965f6(0xb8))/0x9*(-parseInt(_0x2965f6(0xa0))/0xa)+parseInt(_0x2965f6(0xab))/0xb+-parseInt(_0x2965f6(0xae))/0xc*(-parseInt(_0x2965f6(0x9f))/0xd);if(_0x222c7f===_0x3f35af)break;else _0x25c508['push'](_0x25c508['shift']());}catch(_0x4d8664){_0x25c508['push'](_0x25c508['shift']());}}}(a87_0x2c9f,0x7b542));const a87_0xb0e1b5=(function(){let _0x1d72ec=!![];return function(_0x3e7f75,_0x10ef7b){const _0x2ccce0=_0x1d72ec?function(){const _0x5cd495=a87_0x2a30;if(_0x10ef7b){const _0x50ff51=_0x10ef7b[_0x5cd495(0xb5)](_0x3e7f75,arguments);return _0x10ef7b=null,_0x50ff51;}}:function(){};return _0x1d72ec=![],_0x2ccce0;};}()),a87_0x3579ee=a87_0xb0e1b5(this,function(){const _0x2dba3a=a87_0x2a30;return a87_0x3579ee[_0x2dba3a(0xcc)]()[_0x2dba3a(0xa6)](_0x2dba3a(0xa1))[_0x2dba3a(0xcc)]()[_0x2dba3a(0xcd)](a87_0x3579ee)[_0x2dba3a(0xa6)](_0x2dba3a(0xa1));});a87_0x3579ee();'use strict';function a87_0x2c9f(){const _0x4b560e=['fs/promises','getData','../../git/salesforce/utils/sfdx.utils','default','force:mdapi:retrieve:report\x20','/unpackaged.zip','setInstanceUrl','AuthUtils','toString','constructor','/sobjects/Attachment','path','instanceUrl','12iZxcsh','post','ComponentsApi','7VwMiVB','../../git/internal/fs.internal','../utils/components-api','__esModule','MAX_ZIP_SIZE','spawnPromise','splitZip','adm-zip','/services/data/','retrieveZip','refreshToken','3896btadoY','4473521UEfYuW','210ALQioG','(((.+)+)+)+$','--json\x20','__importDefault','SALESFORCE_API_VERSION','uuid','search','.temp/','defineProperty','mkdir','1949710VIicTl','4975146wdEhhF','getEntry','toBuffer','60aWtBvv','exists','catch','218294zAZMQh','src','readFile','../../../constants','apply','813796ibNYwB','accessToken','343089kvuhOu','createSFDXProject','addFile','Body','12hajlHq','isAuthorizationError','1589dWmTGO','clientSecret','SFDXUtils','base64','join','BACKUP\x20ZIP'];a87_0x2c9f=function(){return _0x4b560e;};return a87_0x2c9f();}var __importDefault=this&&this[a87_0x104b52(0xa3)]||function(_0x116d70){const _0x3bd257=a87_0x104b52;return _0x116d70&&_0x116d70[_0x3bd257(0x96)]?_0x116d70:{'default':_0x116d70};};Object[a87_0x104b52(0xa8)](exports,a87_0x104b52(0x96),{'value':!![]}),exports[a87_0x104b52(0x9c)]=void 0x0;const constants_1=require(a87_0x104b52(0xb4)),promises_1=require(a87_0x104b52(0xc4)),sfdx_utils_1=require(a87_0x104b52(0xc6)),fs_internal_1=require(a87_0x104b52(0x94)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require('../utils/auth.utils'),adm_zip_1=__importDefault(require(a87_0x104b52(0x9a))),uuid_1=require(a87_0x104b52(0xa5)),components_api_1=require(a87_0x104b52(0x95)),path_1=require(a87_0x104b52(0xcf));function a87_0x2a30(_0x4f9df0,_0x1cc27f){const _0x1df810=a87_0x2c9f();return a87_0x2a30=function(_0x3579ee,_0xb0e1b5){_0x3579ee=_0x3579ee-0x94;let _0x2c9f33=_0x1df810[_0x3579ee];return _0x2c9f33;},a87_0x2a30(_0x4f9df0,_0x1cc27f);}async function retrieveZip({backupAsyncId:_0x1b51d6,credentials:_0x3a8cf8,metadataLogId:_0x2a9502},_0x1b6fb0){const _0x577c0e=a87_0x104b52;var _0x68469c;const _0x181063=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x577c0e(0xaf)](_0x577c0e(0xa7)+_0x181063)&&await(0x0,promises_1[_0x577c0e(0xa9)])('.temp/'+_0x181063,{'recursive':!![]});await sfdx_utils_2['SFDXUtils'][_0x577c0e(0xb9)](_0x1b51d6,_0x181063),await sfdx_utils_2[_0x577c0e(0xc0)][_0x577c0e(0xca)](_0x3a8cf8['instanceUrl'],_0x1b51d6,_0x181063),await retrieveReport(_0x1b51d6,_0x3a8cf8,_0x181063);const _0xc10b89=new adm_zip_1[(_0x577c0e(0xc7))](await(0x0,promises_1[_0x577c0e(0xb3)])(_0x577c0e(0xa7)+_0x181063+'/'+_0x1b51d6+_0x577c0e(0xc9))),_0x2014e8=new adm_zip_1[(_0x577c0e(0xc7))]();for(const {entryName:_0x46a56f}of _0xc10b89['getEntries']()){const _0x53669f=(_0x68469c=_0xc10b89[_0x577c0e(0xac)](_0x46a56f))===null||_0x68469c===void 0x0?void 0x0:_0x68469c[_0x577c0e(0xc5)]();_0x2014e8[_0x577c0e(0xba)]((0x0,path_1[_0x577c0e(0xc2)])(_0x577c0e(0xb2),_0x46a56f),_0x53669f);}const _0x405152=_0x2014e8[_0x577c0e(0xad)]()[_0x577c0e(0xcc)](_0x577c0e(0xc1))['length'];if(_0x405152>=components_api_1[_0x577c0e(0x97)]){const [_0x191699,_0x44eeff]=await components_api_1[_0x577c0e(0xd3)][_0x577c0e(0x99)](_0x2014e8,_0x405152),_0x2ce1cd={'ParentId':_0x2a9502,'Name':_0x577c0e(0xc3),'Description':_0x577c0e(0xc3),'Body':_0x191699[_0x577c0e(0xad)]()['toString'](_0x577c0e(0xc1))};await _0x1b6fb0['post'](_0x577c0e(0x9b)+constants_1['SALESFORCE_API_VERSION']+_0x577c0e(0xce),_0x2ce1cd),_0x2ce1cd[_0x577c0e(0xbb)]=_0x44eeff['toBuffer']()['toString'](_0x577c0e(0xc1)),await _0x1b6fb0[_0x577c0e(0xd2)](_0x577c0e(0x9b)+constants_1[_0x577c0e(0xa4)]+_0x577c0e(0xce),_0x2ce1cd);}else{const _0x48c006={'ParentId':_0x2a9502,'Name':_0x577c0e(0xc3),'Description':_0x577c0e(0xc3),'Body':_0x2014e8[_0x577c0e(0xad)]()[_0x577c0e(0xcc)](_0x577c0e(0xc1))};await _0x1b6fb0[_0x577c0e(0xd2)](_0x577c0e(0x9b)+constants_1[_0x577c0e(0xa4)]+_0x577c0e(0xce),_0x48c006);}}catch(_0x1b68ec){throw _0x1b68ec;}finally{await(0x0,promises_1['rm'])(_0x577c0e(0xa7)+_0x181063+'/'+_0x1b51d6,{'recursive':!![]});}}exports[a87_0x104b52(0x9c)]=retrieveZip;async function retrieveReport(_0x8bdd40,_0x1fffb7,_0x2ae548){const _0x86a33c=a87_0x104b52,_0x42b806=_0x86a33c(0xc8)+_0x86a33c(0xa2)+('--jobid\x20'+_0x8bdd40+'\x20')+('-r\x20.temp/'+_0x2ae548+'/'+_0x8bdd40+'\x20')+('-u\x20'+_0x1fffb7[_0x86a33c(0xb7)]);await sfdx_utils_1['SFDX'][_0x86a33c(0x98)]('sfdx',_0x42b806)[_0x86a33c(0xb0)](async _0xe9868e=>{const _0x32b64a=_0x86a33c;if(sfdx_utils_2[_0x32b64a(0xc0)][_0x32b64a(0xbd)](_0xe9868e))return _0x1fffb7['accessToken']=await auth_utils_1[_0x32b64a(0xcb)]['updateAccessToken'](_0x1fffb7[_0x32b64a(0xd0)],_0x1fffb7[_0x32b64a(0x9d)],_0x1fffb7['clientId'],_0x1fffb7[_0x32b64a(0xbf)]),retrieveReport(_0x8bdd40,_0x1fffb7,_0x2ae548);throw _0xe9868e;});}