const a87_0x471497=a87_0x1902;(function(_0x3c9a88,_0x15f8e3){const _0x3c131b=a87_0x1902,_0xf69282=_0x3c9a88();while(!![]){try{const _0x3c0220=-parseInt(_0x3c131b(0x1de))/0x1+-parseInt(_0x3c131b(0x203))/0x2+parseInt(_0x3c131b(0x1fb))/0x3*(-parseInt(_0x3c131b(0x1d5))/0x4)+parseInt(_0x3c131b(0x209))/0x5+parseInt(_0x3c131b(0x20d))/0x6+parseInt(_0x3c131b(0x1df))/0x7+parseInt(_0x3c131b(0x1e5))/0x8;if(_0x3c0220===_0x15f8e3)break;else _0xf69282['push'](_0xf69282['shift']());}catch(_0x17ef19){_0xf69282['push'](_0xf69282['shift']());}}}(a87_0x31dc,0xf389c));function a87_0x31dc(){const _0x192b62=['SFDXUtils','6324048EWQhLo','SFDX','toBuffer','/sobjects/Attachment','4AcdQhC','../utils/sfdx.utils','src','../utils/components-api','clientId','-u\x20','toString','(((.+)+)+)+$','MAX_ZIP_SIZE','1583179CKrXfP','1430793pIrZUU','getEntries','addFile','splitZip','__importDefault','length','36692816GWNnju','instanceUrl','.temp/','../../git/salesforce/utils/sfdx.utils','/services/data/','--json\x20','../../../constants','defineProperty','getEntry','constructor','join','BACKUP\x20ZIP','retrieveZip','apply','mkdir','refreshToken','base64','/unpackaged.zip','isAuthorizationError','fs/promises','setInstanceUrl','-r\x20.temp/','5302515gaXOwo','adm-zip','catch','force:mdapi:retrieve:report\x20','__esModule','search','default','Body','3581746lwPhoO','readFile','accessToken','../../git/internal/fs.internal','SALESFORCE_API_VERSION','post','1470400Uwimkl','../utils/auth.utils','AuthUtils'];a87_0x31dc=function(){return _0x192b62;};return a87_0x31dc();}const a87_0x4ce137=(function(){let _0x275f60=!![];return function(_0x119462,_0x5204fa){const _0x1ce177=_0x275f60?function(){const _0x14ceab=a87_0x1902;if(_0x5204fa){const _0xa3e7a8=_0x5204fa[_0x14ceab(0x1f2)](_0x119462,arguments);return _0x5204fa=null,_0xa3e7a8;}}:function(){};return _0x275f60=![],_0x1ce177;};}()),a87_0x14119e=a87_0x4ce137(this,function(){const _0x487b6e=a87_0x1902;return a87_0x14119e['toString']()[_0x487b6e(0x200)](_0x487b6e(0x1dc))[_0x487b6e(0x1db)]()[_0x487b6e(0x1ee)](a87_0x14119e)['search'](_0x487b6e(0x1dc));});a87_0x14119e();'use strict';var __importDefault=this&&this[a87_0x471497(0x1e3)]||function(_0x38ec6a){const _0x5669cc=a87_0x471497;return _0x38ec6a&&_0x38ec6a[_0x5669cc(0x1ff)]?_0x38ec6a:{'default':_0x38ec6a};};Object[a87_0x471497(0x1ec)](exports,'__esModule',{'value':!![]}),exports[a87_0x471497(0x1f1)]=void 0x0;const constants_1=require(a87_0x471497(0x1eb)),promises_1=require(a87_0x471497(0x1f8)),sfdx_utils_1=require(a87_0x471497(0x1e8)),fs_internal_1=require(a87_0x471497(0x206)),sfdx_utils_2=require(a87_0x471497(0x1d6)),auth_utils_1=require(a87_0x471497(0x20a)),adm_zip_1=__importDefault(require(a87_0x471497(0x1fc))),uuid_1=require('uuid'),components_api_1=require(a87_0x471497(0x1d8)),path_1=require('path');async function retrieveZip({backupAsyncId:_0xe6cfc4,credentials:_0x37151e,metadataLogId:_0xbc53e6},_0x2adf89){const _0x53c1b2=a87_0x471497;var _0x75681a;const _0x279b0a=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS']['exists'](_0x53c1b2(0x1e7)+_0x279b0a)&&await(0x0,promises_1[_0x53c1b2(0x1f3)])('.temp/'+_0x279b0a,{'recursive':!![]});await sfdx_utils_2['SFDXUtils']['createSFDXProject'](_0xe6cfc4,_0x279b0a),await sfdx_utils_2[_0x53c1b2(0x20c)][_0x53c1b2(0x1f9)](_0x37151e[_0x53c1b2(0x1e6)],_0xe6cfc4,_0x279b0a),await retrieveReport(_0xe6cfc4,_0x37151e,_0x279b0a);const _0x2e91e7=new adm_zip_1[(_0x53c1b2(0x201))](await(0x0,promises_1[_0x53c1b2(0x204)])(_0x53c1b2(0x1e7)+_0x279b0a+'/'+_0xe6cfc4+_0x53c1b2(0x1f6))),_0x119025=new adm_zip_1[(_0x53c1b2(0x201))]();for(const {entryName:_0x16d82e}of _0x2e91e7[_0x53c1b2(0x1e0)]()){const _0x1e89fa=(_0x75681a=_0x2e91e7[_0x53c1b2(0x1ed)](_0x16d82e))===null||_0x75681a===void 0x0?void 0x0:_0x75681a['getData']();_0x119025[_0x53c1b2(0x1e1)]((0x0,path_1[_0x53c1b2(0x1ef)])(_0x53c1b2(0x1d7),_0x16d82e),_0x1e89fa);}const _0x1a75fd=_0x119025[_0x53c1b2(0x1d3)]()[_0x53c1b2(0x1db)](_0x53c1b2(0x1f5))[_0x53c1b2(0x1e4)];if(_0x1a75fd>=components_api_1[_0x53c1b2(0x1dd)]){const [_0x238264,_0x41c41b]=await components_api_1['ComponentsApi'][_0x53c1b2(0x1e2)](_0x119025,_0x1a75fd),_0x504aaa={'ParentId':_0xbc53e6,'Name':_0x53c1b2(0x1f0),'Description':_0x53c1b2(0x1f0),'Body':_0x238264['toBuffer']()[_0x53c1b2(0x1db)](_0x53c1b2(0x1f5))};await _0x2adf89[_0x53c1b2(0x208)]('/services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x53c1b2(0x1d4),_0x504aaa),_0x504aaa[_0x53c1b2(0x202)]=_0x41c41b[_0x53c1b2(0x1d3)]()[_0x53c1b2(0x1db)](_0x53c1b2(0x1f5)),await _0x2adf89['post'](_0x53c1b2(0x1e9)+constants_1[_0x53c1b2(0x207)]+_0x53c1b2(0x1d4),_0x504aaa);}else{const _0x20bcd9={'ParentId':_0xbc53e6,'Name':_0x53c1b2(0x1f0),'Description':_0x53c1b2(0x1f0),'Body':_0x119025[_0x53c1b2(0x1d3)]()[_0x53c1b2(0x1db)]('base64')};await _0x2adf89[_0x53c1b2(0x208)](_0x53c1b2(0x1e9)+constants_1[_0x53c1b2(0x207)]+_0x53c1b2(0x1d4),_0x20bcd9);}}catch(_0x4909dc){throw _0x4909dc;}finally{await(0x0,promises_1['rm'])('.temp/'+_0x279b0a+'/'+_0xe6cfc4,{'recursive':!![]});}}function a87_0x1902(_0x58b37a,_0x2632cd){const _0x1dad4c=a87_0x31dc();return a87_0x1902=function(_0x14119e,_0x4ce137){_0x14119e=_0x14119e-0x1d2;let _0x31dc62=_0x1dad4c[_0x14119e];return _0x31dc62;},a87_0x1902(_0x58b37a,_0x2632cd);}exports[a87_0x471497(0x1f1)]=retrieveZip;async function retrieveReport(_0x1d77d6,_0x224ef4,_0x564a03){const _0x801d79=a87_0x471497,_0x3a705c=_0x801d79(0x1fe)+_0x801d79(0x1ea)+('--jobid\x20'+_0x1d77d6+'\x20')+(_0x801d79(0x1fa)+_0x564a03+'/'+_0x1d77d6+'\x20')+(_0x801d79(0x1da)+_0x224ef4[_0x801d79(0x205)]);await sfdx_utils_1[_0x801d79(0x1d2)]['spawn'](_0x3a705c)[_0x801d79(0x1fd)](async _0x14bd97=>{const _0x1dcbc9=_0x801d79;if(sfdx_utils_2[_0x1dcbc9(0x20c)][_0x1dcbc9(0x1f7)](_0x14bd97))return _0x224ef4[_0x1dcbc9(0x205)]=await auth_utils_1[_0x1dcbc9(0x20b)]['updateAccessToken'](_0x224ef4[_0x1dcbc9(0x1e6)],_0x224ef4[_0x1dcbc9(0x1f4)],_0x224ef4[_0x1dcbc9(0x1d9)],_0x224ef4['clientSecret']),retrieveReport(_0x1d77d6,_0x224ef4,_0x564a03);throw _0x14bd97;});}