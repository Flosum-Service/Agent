const a87_0x102de1=a87_0x2493;function a87_0x2493(_0x31947a,_0x462410){const _0x34177f=a87_0x4f37();return a87_0x2493=function(_0x428a39,_0x3b5d5a){_0x428a39=_0x428a39-0x94;let _0x4f3769=_0x34177f[_0x428a39];return _0x4f3769;},a87_0x2493(_0x31947a,_0x462410);}(function(_0x1d4e0f,_0x81f63a){const _0x93e185=a87_0x2493,_0x12d861=_0x1d4e0f();while(!![]){try{const _0x12e0e1=parseInt(_0x93e185(0xa2))/0x1*(parseInt(_0x93e185(0x99))/0x2)+-parseInt(_0x93e185(0xaa))/0x3+-parseInt(_0x93e185(0xc3))/0x4*(-parseInt(_0x93e185(0x9e))/0x5)+-parseInt(_0x93e185(0xa6))/0x6+-parseInt(_0x93e185(0x9a))/0x7+parseInt(_0x93e185(0xc8))/0x8+parseInt(_0x93e185(0xbf))/0x9;if(_0x12e0e1===_0x81f63a)break;else _0x12d861['push'](_0x12d861['shift']());}catch(_0x31faed){_0x12d861['push'](_0x12d861['shift']());}}}(a87_0x4f37,0x4e0df));const a87_0x3b5d5a=(function(){let _0x285f7a=!![];return function(_0x4c014d,_0x17850c){const _0x1be0d6=_0x285f7a?function(){if(_0x17850c){const _0x5ca283=_0x17850c['apply'](_0x4c014d,arguments);return _0x17850c=null,_0x5ca283;}}:function(){};return _0x285f7a=![],_0x1be0d6;};}()),a87_0x428a39=a87_0x3b5d5a(this,function(){const _0x1badc1=a87_0x2493;return a87_0x428a39[_0x1badc1(0x98)]()[_0x1badc1(0xbc)](_0x1badc1(0xbb))[_0x1badc1(0x98)]()[_0x1badc1(0xa0)](a87_0x428a39)['search'](_0x1badc1(0xbb));});function a87_0x4f37(){const _0x29cfde=['src','default','628688JBnFVl','../../git/salesforce/utils/sfdx.utils','setInstanceUrl','instanceUrl','mkdir','4479176BVVpwv','/services/data/','--jobid\x20','refreshToken','getEntry','post','spawn','toString','394KqAmlc','3674293rWolWT','SFDX','readFile','Body','5uVCWwm','uuid','constructor','join','671TSKVuL','../utils/sfdx.utils','MAX_ZIP_SIZE','accessToken','3308856lKMyKG','clientSecret','retrieveZip','../utils/components-api','1325637IoMWDk','ComponentsApi','adm-zip','toBuffer','base64','-r\x20.temp/','isAuthorizationError','catch','defineProperty','/sobjects/Attachment','../../../constants','/unpackaged.zip','getEntries','clientId','BACKUP\x20ZIP','SALESFORCE_API_VERSION','.temp/','(((.+)+)+)+$','search','SFDXUtils','--json\x20','8898381Jlnvor','force:mdapi:retrieve:report\x20'];a87_0x4f37=function(){return _0x29cfde;};return a87_0x4f37();}a87_0x428a39();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x46401d){return _0x46401d&&_0x46401d['__esModule']?_0x46401d:{'default':_0x46401d};};Object[a87_0x102de1(0xb2)](exports,'__esModule',{'value':!![]}),exports[a87_0x102de1(0xa8)]=void 0x0;const constants_1=require(a87_0x102de1(0xb4)),promises_1=require('fs/promises'),sfdx_utils_1=require(a87_0x102de1(0xc4)),fs_internal_1=require('../../git/internal/fs.internal'),sfdx_utils_2=require(a87_0x102de1(0xa3)),auth_utils_1=require('../utils/auth.utils'),adm_zip_1=__importDefault(require(a87_0x102de1(0xac))),uuid_1=require(a87_0x102de1(0x9f)),components_api_1=require(a87_0x102de1(0xa9)),path_1=require('path');async function retrieveZip({backupAsyncId:_0x1c85b2,credentials:_0x5050a4,metadataLogId:_0x86af64},_0x50a293){const _0x5ec370=a87_0x102de1;var _0x15a08f;const _0x333e78=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS']['exists'](_0x5ec370(0xba)+_0x333e78)&&await(0x0,promises_1[_0x5ec370(0xc7)])(_0x5ec370(0xba)+_0x333e78,{'recursive':!![]});await sfdx_utils_2[_0x5ec370(0xbd)]['createSFDXProject'](_0x1c85b2,_0x333e78),await sfdx_utils_2['SFDXUtils'][_0x5ec370(0xc5)](_0x5050a4[_0x5ec370(0xc6)],_0x1c85b2,_0x333e78),await retrieveReport(_0x1c85b2,_0x5050a4,_0x333e78);const _0x3cf7a3=new adm_zip_1[(_0x5ec370(0xc2))](await(0x0,promises_1[_0x5ec370(0x9c)])(_0x5ec370(0xba)+_0x333e78+'/'+_0x1c85b2+_0x5ec370(0xb5))),_0x42c855=new adm_zip_1['default']();for(const {entryName:_0x19c7c2}of _0x3cf7a3[_0x5ec370(0xb6)]()){const _0x4b19db=(_0x15a08f=_0x3cf7a3[_0x5ec370(0x95)](_0x19c7c2))===null||_0x15a08f===void 0x0?void 0x0:_0x15a08f['getData']();_0x42c855['addFile']((0x0,path_1[_0x5ec370(0xa1)])(_0x5ec370(0xc1),_0x19c7c2),_0x4b19db);}const _0x4393fb=_0x42c855[_0x5ec370(0xad)]()[_0x5ec370(0x98)](_0x5ec370(0xae))['length'];if(_0x4393fb>=components_api_1[_0x5ec370(0xa4)]){const [_0x109aa8,_0x39feb5]=await components_api_1[_0x5ec370(0xab)]['splitZip'](_0x42c855,_0x4393fb),_0x3c114f={'ParentId':_0x86af64,'Name':'BACKUP\x20ZIP','Description':_0x5ec370(0xb8),'Body':_0x109aa8['toBuffer']()['toString']('base64')};await _0x50a293['post']('/services/data/'+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment',_0x3c114f),_0x3c114f[_0x5ec370(0x9d)]=_0x39feb5['toBuffer']()[_0x5ec370(0x98)]('base64'),await _0x50a293[_0x5ec370(0x96)](_0x5ec370(0xc9)+constants_1[_0x5ec370(0xb9)]+_0x5ec370(0xb3),_0x3c114f);}else{const _0x49dfd6={'ParentId':_0x86af64,'Name':'BACKUP\x20ZIP','Description':'BACKUP\x20ZIP','Body':_0x42c855[_0x5ec370(0xad)]()['toString']('base64')};await _0x50a293[_0x5ec370(0x96)]('/services/data/'+constants_1[_0x5ec370(0xb9)]+_0x5ec370(0xb3),_0x49dfd6);}}catch(_0x58b4d6){throw _0x58b4d6;}finally{await(0x0,promises_1['rm'])(_0x5ec370(0xba)+_0x333e78+'/'+_0x1c85b2,{'recursive':!![]});}}exports[a87_0x102de1(0xa8)]=retrieveZip;async function retrieveReport(_0xa25d88,_0x51f35e,_0x1e6ee0){const _0x4737e4=a87_0x102de1,_0x489e7d=_0x4737e4(0xc0)+_0x4737e4(0xbe)+(_0x4737e4(0xca)+_0xa25d88+'\x20')+(_0x4737e4(0xaf)+_0x1e6ee0+'/'+_0xa25d88+'\x20')+('-u\x20'+_0x51f35e[_0x4737e4(0xa5)]);await sfdx_utils_1[_0x4737e4(0x9b)][_0x4737e4(0x97)](_0x489e7d)[_0x4737e4(0xb1)](async _0x510d9d=>{const _0x27dafc=_0x4737e4;if(sfdx_utils_2['SFDXUtils'][_0x27dafc(0xb0)](_0x510d9d))return _0x51f35e[_0x27dafc(0xa5)]=await auth_utils_1['AuthUtils']['updateAccessToken'](_0x51f35e[_0x27dafc(0xc6)],_0x51f35e[_0x27dafc(0x94)],_0x51f35e[_0x27dafc(0xb7)],_0x51f35e[_0x27dafc(0xa7)]),retrieveReport(_0xa25d88,_0x51f35e,_0x1e6ee0);throw _0x510d9d;});}