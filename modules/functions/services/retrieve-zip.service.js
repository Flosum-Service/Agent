const a87_0x5b01c9=a87_0x2a63;(function(_0x58464b,_0x4dae77){const _0x2c0fc3=a87_0x2a63,_0x235cb3=_0x58464b();while(!![]){try{const _0x27f3e1=-parseInt(_0x2c0fc3(0x1a7))/0x1+-parseInt(_0x2c0fc3(0x1b0))/0x2+-parseInt(_0x2c0fc3(0x1a1))/0x3+-parseInt(_0x2c0fc3(0x1c7))/0x4*(parseInt(_0x2c0fc3(0x199))/0x5)+parseInt(_0x2c0fc3(0x19f))/0x6*(-parseInt(_0x2c0fc3(0x19b))/0x7)+-parseInt(_0x2c0fc3(0x1c2))/0x8+-parseInt(_0x2c0fc3(0x198))/0x9*(-parseInt(_0x2c0fc3(0x194))/0xa);if(_0x27f3e1===_0x4dae77)break;else _0x235cb3['push'](_0x235cb3['shift']());}catch(_0x423e98){_0x235cb3['push'](_0x235cb3['shift']());}}}(a87_0x5dfd,0xcc342));const a87_0x28a67a=(function(){let _0xc08755=!![];return function(_0x38dcbe,_0x427d02){const _0x381160=_0xc08755?function(){if(_0x427d02){const _0x12b227=_0x427d02['apply'](_0x38dcbe,arguments);return _0x427d02=null,_0x12b227;}}:function(){};return _0xc08755=![],_0x381160;};}()),a87_0x481c27=a87_0x28a67a(this,function(){const _0x3acdd3=a87_0x2a63;return a87_0x481c27[_0x3acdd3(0x1b3)]()[_0x3acdd3(0x1c0)](_0x3acdd3(0x1a6))['toString']()[_0x3acdd3(0x1bb)](a87_0x481c27)[_0x3acdd3(0x1c0)](_0x3acdd3(0x1a6));});function a87_0x5dfd(){const _0x1e3a6a=['/sobjects/Attachment','updateAccessToken','retrieveZip','(((.+)+)+)+$','665508VHeUpc','-u\x20','getEntries','accessToken','/services/data/v','../utils/components-api','fs/promises','addFile','instanceUrl','2743248hZFDlq','path','SFDX','toString','base64','post','MAX_ZIP_SIZE','getData','-r\x20.temp/','uuid','spawn','constructor','force:mdapi:retrieve:report\x20','../utils/auth.utils','refreshToken','../../git/internal/fs.internal','search','setInstanceUrl','8307816YUeXvg','BACKUP\x20ZIP','catch','.temp/','defineProperty','141276MIRTSW','--json\x20','createSFDXProject','getEntry','default','4892660zdOmfT','clientSecret','splitZip','readFile','135aHchZR','75AGbUvl','AuthUtils','47649JfilaI','toBuffer','SFDXUtils','ComponentsApi','1338OqwOHz','mkdir','4137651klvuDu','__esModule'];a87_0x5dfd=function(){return _0x1e3a6a;};return a87_0x5dfd();}function a87_0x2a63(_0x481ba2,_0x437728){const _0x3bdd33=a87_0x5dfd();return a87_0x2a63=function(_0x481c27,_0x28a67a){_0x481c27=_0x481c27-0x193;let _0x5dfd66=_0x3bdd33[_0x481c27];return _0x5dfd66;},a87_0x2a63(_0x481ba2,_0x437728);}a87_0x481c27();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3f7811){const _0x477d0f=a87_0x2a63;return _0x3f7811&&_0x3f7811[_0x477d0f(0x1a2)]?_0x3f7811:{'default':_0x3f7811};};Object[a87_0x5b01c9(0x1c6)](exports,a87_0x5b01c9(0x1a2),{'value':!![]}),exports['retrieveZip']=void 0x0;const promises_1=require(a87_0x5b01c9(0x1ad)),sfdx_utils_1=require('../../git/salesforce/utils/sfdx.utils'),fs_internal_1=require(a87_0x5b01c9(0x1bf)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a87_0x5b01c9(0x1bd)),adm_zip_1=__importDefault(require('adm-zip')),uuid_1=require(a87_0x5b01c9(0x1b9)),components_api_1=require(a87_0x5b01c9(0x1ac)),path_1=require(a87_0x5b01c9(0x1b1));async function retrieveZip({backupAsyncId:_0x262098,credentials:_0x52e52e,metadataLogId:_0x5cf23d,apiVersion:_0x221ce3},_0xc9e06c){const _0x52ab47=a87_0x5b01c9;var _0x49496e;const _0x3c05cc=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS']['exists'](_0x52ab47(0x1c5)+_0x3c05cc)&&await(0x0,promises_1[_0x52ab47(0x1a0)])(_0x52ab47(0x1c5)+_0x3c05cc,{'recursive':!![]});await sfdx_utils_2[_0x52ab47(0x19d)][_0x52ab47(0x1c9)](_0x262098,_0x3c05cc),await sfdx_utils_2[_0x52ab47(0x19d)][_0x52ab47(0x1c1)](_0x52e52e[_0x52ab47(0x1af)],_0x262098,_0x3c05cc),await retrieveReport(_0x262098,_0x52e52e,_0x3c05cc);const _0x181c88=new adm_zip_1[(_0x52ab47(0x193))](await(0x0,promises_1[_0x52ab47(0x197)])(_0x52ab47(0x1c5)+_0x3c05cc+'/'+_0x262098+'/unpackaged.zip')),_0x452eb5=new adm_zip_1[(_0x52ab47(0x193))]();for(const {entryName:_0x21878e}of _0x181c88[_0x52ab47(0x1a9)]()){const _0x55ca2f=(_0x49496e=_0x181c88[_0x52ab47(0x1ca)](_0x21878e))===null||_0x49496e===void 0x0?void 0x0:_0x49496e[_0x52ab47(0x1b7)]();_0x452eb5[_0x52ab47(0x1ae)]((0x0,path_1['join'])('src',_0x21878e),_0x55ca2f);}const _0x467858=_0x452eb5[_0x52ab47(0x19c)]()[_0x52ab47(0x1b3)](_0x52ab47(0x1b4))['length'];if(_0x467858>=components_api_1[_0x52ab47(0x1b6)]){const [_0x3cc722,_0x488999]=await components_api_1[_0x52ab47(0x19e)][_0x52ab47(0x196)](_0x452eb5,_0x467858),_0x1cb195={'ParentId':_0x5cf23d,'Name':_0x52ab47(0x1c3),'Description':'BACKUP\x20ZIP','Body':_0x3cc722['toBuffer']()['toString'](_0x52ab47(0x1b4))};await _0xc9e06c['post'](_0x52ab47(0x1ab)+_0x221ce3+_0x52ab47(0x1a3),_0x1cb195),_0x1cb195['Body']=_0x488999[_0x52ab47(0x19c)]()[_0x52ab47(0x1b3)](_0x52ab47(0x1b4)),await _0xc9e06c[_0x52ab47(0x1b5)](_0x52ab47(0x1ab)+_0x221ce3+_0x52ab47(0x1a3),_0x1cb195);}else{const _0x2bea74={'ParentId':_0x5cf23d,'Name':_0x52ab47(0x1c3),'Description':_0x52ab47(0x1c3),'Body':_0x452eb5[_0x52ab47(0x19c)]()[_0x52ab47(0x1b3)](_0x52ab47(0x1b4))};await _0xc9e06c['post'](_0x52ab47(0x1ab)+_0x221ce3+_0x52ab47(0x1a3),_0x2bea74);}}catch(_0x4d58c5){throw _0x4d58c5;}finally{await(0x0,promises_1['rm'])(_0x52ab47(0x1c5)+_0x3c05cc+'/'+_0x262098,{'recursive':!![]});}}exports[a87_0x5b01c9(0x1a5)]=retrieveZip;async function retrieveReport(_0x4dbcc3,_0x1d1d8e,_0x58371d){const _0xeb5a1f=a87_0x5b01c9,_0x5772db=_0xeb5a1f(0x1bc)+_0xeb5a1f(0x1c8)+('--jobid\x20'+_0x4dbcc3+'\x20')+(_0xeb5a1f(0x1b8)+_0x58371d+'/'+_0x4dbcc3+'\x20')+(_0xeb5a1f(0x1a8)+_0x1d1d8e[_0xeb5a1f(0x1aa)]);await sfdx_utils_1[_0xeb5a1f(0x1b2)][_0xeb5a1f(0x1ba)](_0x5772db)[_0xeb5a1f(0x1c4)](async _0x1418d0=>{const _0xa27d72=_0xeb5a1f;if(sfdx_utils_2[_0xa27d72(0x19d)]['isAuthorizationError'](_0x1418d0))return _0x1d1d8e[_0xa27d72(0x1aa)]=await auth_utils_1[_0xa27d72(0x19a)][_0xa27d72(0x1a4)](_0x1d1d8e[_0xa27d72(0x1af)],_0x1d1d8e[_0xa27d72(0x1be)],_0x1d1d8e['clientId'],_0x1d1d8e[_0xa27d72(0x195)]),retrieveReport(_0x4dbcc3,_0x1d1d8e,_0x58371d);throw _0x1418d0;});}