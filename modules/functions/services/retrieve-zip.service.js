const a86_0x280b33=a86_0x3269;(function(_0x264fa3,_0x14b7af){const _0x4eef0b=a86_0x3269,_0x2170de=_0x264fa3();while(!![]){try{const _0x4bab6c=parseInt(_0x4eef0b(0xd6))/0x1+parseInt(_0x4eef0b(0xd2))/0x2+parseInt(_0x4eef0b(0xfd))/0x3+parseInt(_0x4eef0b(0xd4))/0x4*(parseInt(_0x4eef0b(0x10b))/0x5)+parseInt(_0x4eef0b(0x100))/0x6+parseInt(_0x4eef0b(0xf8))/0x7+-parseInt(_0x4eef0b(0x104))/0x8*(parseInt(_0x4eef0b(0x109))/0x9);if(_0x4bab6c===_0x14b7af)break;else _0x2170de['push'](_0x2170de['shift']());}catch(_0x14b745){_0x2170de['push'](_0x2170de['shift']());}}}(a86_0x137c,0xd5412));const a86_0x45b1f0=(function(){let _0x2a74ac=!![];return function(_0x9be6b6,_0x474a76){const _0x10fae1=_0x2a74ac?function(){const _0x58950b=a86_0x3269;if(_0x474a76){const _0x4090b6=_0x474a76[_0x58950b(0xe7)](_0x9be6b6,arguments);return _0x474a76=null,_0x4090b6;}}:function(){};return _0x2a74ac=![],_0x10fae1;};}()),a86_0x8a0c2f=a86_0x45b1f0(this,function(){const _0x14a08c=a86_0x3269;return a86_0x8a0c2f['toString']()[_0x14a08c(0xf2)](_0x14a08c(0x10f))['toString']()[_0x14a08c(0xe2)](a86_0x8a0c2f)[_0x14a08c(0xf2)](_0x14a08c(0x10f));});a86_0x8a0c2f();function a86_0x3269(_0x2714dc,_0x482f10){const _0x2f5d33=a86_0x137c();return a86_0x3269=function(_0x8a0c2f,_0x45b1f0){_0x8a0c2f=_0x8a0c2f-0xd0;let _0x137cac=_0x2f5d33[_0x8a0c2f];return _0x137cac;},a86_0x3269(_0x2714dc,_0x482f10);}'use strict';var __importDefault=this&&this[a86_0x280b33(0xe1)]||function(_0x2d880d){return _0x2d880d&&_0x2d880d['__esModule']?_0x2d880d:{'default':_0x2d880d};};Object[a86_0x280b33(0xef)](exports,a86_0x280b33(0xf0),{'value':!![]}),exports['retrieveZip']=void 0x0;const constants_1=require(a86_0x280b33(0xdf)),promises_1=require(a86_0x280b33(0xd8)),sfdx_utils_1=require(a86_0x280b33(0xe5)),fs_internal_1=require(a86_0x280b33(0xde)),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require(a86_0x280b33(0xf3)),adm_zip_1=__importDefault(require(a86_0x280b33(0xf6))),uuid_1=require('uuid'),components_api_1=require(a86_0x280b33(0xeb)),path_1=require('path');async function retrieveZip({backupAsyncId:_0x13968f,credentials:_0x40f546,metadataLogId:_0x5bd561},_0x325e14){const _0x41023d=a86_0x280b33;var _0x236851;const _0x31a690=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x41023d(0xf5)](_0x41023d(0xee)+_0x31a690)&&await(0x0,promises_1['mkdir'])(_0x41023d(0xee)+_0x31a690,{'recursive':!![]});await sfdx_utils_2[_0x41023d(0x108)][_0x41023d(0x110)](_0x13968f,_0x31a690),await sfdx_utils_2[_0x41023d(0x108)][_0x41023d(0x102)](_0x40f546[_0x41023d(0xf1)],_0x13968f,_0x31a690),await retrieveReport(_0x13968f,_0x40f546,_0x31a690);const _0x160fc6=new adm_zip_1[(_0x41023d(0xd3))](await(0x0,promises_1['readFile'])(_0x41023d(0xee)+_0x31a690+'/'+_0x13968f+_0x41023d(0x101))),_0x141164=new adm_zip_1['default']();for(const {entryName:_0x5e6695}of _0x160fc6[_0x41023d(0xea)]()){const _0x233ad0=(_0x236851=_0x160fc6[_0x41023d(0xec)](_0x5e6695))===null||_0x236851===void 0x0?void 0x0:_0x236851['getData']();_0x141164[_0x41023d(0xe8)]((0x0,path_1[_0x41023d(0xe6)])(_0x41023d(0x106),_0x5e6695),_0x233ad0);}const _0x1b10c7=_0x141164[_0x41023d(0x10c)]()['toString'](_0x41023d(0xdc))[_0x41023d(0xd0)];if(_0x1b10c7>=components_api_1[_0x41023d(0xe3)]){const [_0x5d840e,_0x3a2844]=await components_api_1[_0x41023d(0x10d)][_0x41023d(0xd9)](_0x141164,_0x1b10c7),_0x45ce6b={'ParentId':_0x5bd561,'Name':_0x41023d(0xfa),'Description':_0x41023d(0xfa),'Body':_0x5d840e[_0x41023d(0x10c)]()[_0x41023d(0xd1)](_0x41023d(0xdc))};await _0x325e14[_0x41023d(0xfc)]('/services/data/'+constants_1[_0x41023d(0x10e)]+_0x41023d(0xdb),_0x45ce6b),_0x45ce6b[_0x41023d(0xf7)]=_0x3a2844['toBuffer']()[_0x41023d(0xd1)](_0x41023d(0xdc)),await _0x325e14[_0x41023d(0xfc)]('/services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x41023d(0xdb),_0x45ce6b);}else{const _0x2ac44f={'ParentId':_0x5bd561,'Name':'BACKUP\x20ZIP','Description':_0x41023d(0xfa),'Body':_0x141164[_0x41023d(0x10c)]()['toString']('base64')};await _0x325e14[_0x41023d(0xfc)](_0x41023d(0x103)+constants_1['SALESFORCE_API_VERSION']+_0x41023d(0xdb),_0x2ac44f);}}catch(_0x3e9e33){throw _0x3e9e33;}finally{await(0x0,promises_1['rm'])(_0x41023d(0xee)+_0x31a690+'/'+_0x13968f,{'recursive':!![]});}}exports[a86_0x280b33(0xe4)]=retrieveZip;async function retrieveReport(_0xb98a19,_0x2adcce,_0x50f073){const _0x1e9694=a86_0x280b33,_0x15a404=_0x1e9694(0xdd)+_0x1e9694(0x10a)+(_0x1e9694(0xf4)+_0xb98a19+'\x20')+(_0x1e9694(0x105)+_0x50f073+'/'+_0xb98a19+'\x20')+(_0x1e9694(0xd5)+_0x2adcce[_0x1e9694(0xe0)]);await sfdx_utils_1[_0x1e9694(0xe9)][_0x1e9694(0xff)](_0x1e9694(0xed),_0x15a404)['catch'](async _0x37474a=>{const _0x58fc35=_0x1e9694;if(sfdx_utils_2[_0x58fc35(0x108)][_0x58fc35(0xd7)](_0x37474a))return _0x2adcce['accessToken']=await auth_utils_1[_0x58fc35(0xf9)][_0x58fc35(0xda)](_0x2adcce['instanceUrl'],_0x2adcce[_0x58fc35(0xfe)],_0x2adcce[_0x58fc35(0x107)],_0x2adcce[_0x58fc35(0xfb)]),retrieveReport(_0xb98a19,_0x2adcce,_0x50f073);throw _0x37474a;});}function a86_0x137c(){const _0x4d55db=['-u\x20','635919aHonii','isAuthorizationError','fs/promises','splitZip','updateAccessToken','/sobjects/Attachment','base64','force:mdapi:retrieve:report\x20','../../git/internal/fs.internal','../../../constants','accessToken','__importDefault','constructor','MAX_ZIP_SIZE','retrieveZip','../../git/salesforce/utils/sfdx.utils','join','apply','addFile','SFDX','getEntries','../utils/components-api','getEntry','sfdx','.temp/','defineProperty','__esModule','instanceUrl','search','../utils/auth.utils','--jobid\x20','exists','adm-zip','Body','3677926kVHFVw','AuthUtils','BACKUP\x20ZIP','clientSecret','post','1624113APpgdt','refreshToken','spawnPromise','1530576jHsTiN','/unpackaged.zip','setInstanceUrl','/services/data/','115768oaHjUw','-r\x20.temp/','src','clientId','SFDXUtils','2286yWvEpt','--json\x20','76990GYhtNV','toBuffer','ComponentsApi','SALESFORCE_API_VERSION','(((.+)+)+)+$','createSFDXProject','length','toString','2657368fcGPJS','default','328UeAbit'];a86_0x137c=function(){return _0x4d55db;};return a86_0x137c();}