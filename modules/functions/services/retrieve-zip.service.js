const a87_0x4c6620=a87_0x128c;function a87_0x247a(){const _0x1d1ae1=['catch','mkdir','getEntries','instanceUrl','search','1603215eUyhna','toBuffer','accessToken','force:mdapi:retrieve:report\x20','30WnpQnP','apply','1303NJmupl','setInstanceUrl','46963LvOGEu','--jobid\x20','/sobjects/Attachment','8RUejPF','__esModule','../utils/components-api','post','isAuthorizationError','../../git/salesforce/utils/sfdx.utils','-r\x20.temp/','(((.+)+)+)+$','spawn','readFile','SALESFORCE_API_VERSION','SFDX','path','constructor','SFDXUtils','getEntry','.temp/','adm-zip','createSFDXProject','/services/data/','BACKUP\x20ZIP','default','retrieveZip','join','exists','10ZriZQt','305504RoOWKn','base64','toString','228oeYEUL','uuid','1340790KCdRbp','/unpackaged.zip','ComponentsApi','../../../constants','19230NOSaaQ','updateAccessToken','getData','-u\x20','444396WyJpVA'];a87_0x247a=function(){return _0x1d1ae1;};return a87_0x247a();}(function(_0x127cde,_0x24d5c9){const _0x2a3dfe=a87_0x128c,_0x30411f=_0x127cde();while(!![]){try{const _0x4d9fab=-parseInt(_0x2a3dfe(0x1e3))/0x1*(parseInt(_0x2a3dfe(0x1cd))/0x2)+parseInt(_0x2a3dfe(0x1d7))/0x3+-parseInt(_0x2a3dfe(0x1ca))/0x4+parseInt(_0x2a3dfe(0x1c9))/0x5*(-parseInt(_0x2a3dfe(0x1d3))/0x6)+parseInt(_0x2a3dfe(0x1e5))/0x7+-parseInt(_0x2a3dfe(0x1e8))/0x8*(parseInt(_0x2a3dfe(0x1dd))/0x9)+parseInt(_0x2a3dfe(0x1e1))/0xa*(parseInt(_0x2a3dfe(0x1cf))/0xb);if(_0x4d9fab===_0x24d5c9)break;else _0x30411f['push'](_0x30411f['shift']());}catch(_0x588d53){_0x30411f['push'](_0x30411f['shift']());}}}(a87_0x247a,0x1b1c8));const a87_0x42c5b9=(function(){let _0x329e85=!![];return function(_0x2cf572,_0x6c2e26){const _0x6fb50b=_0x329e85?function(){const _0x3a67ed=a87_0x128c;if(_0x6c2e26){const _0xf66819=_0x6c2e26[_0x3a67ed(0x1e2)](_0x2cf572,arguments);return _0x6c2e26=null,_0xf66819;}}:function(){};return _0x329e85=![],_0x6fb50b;};}()),a87_0x680d79=a87_0x42c5b9(this,function(){const _0x2a0d3e=a87_0x128c;return a87_0x680d79[_0x2a0d3e(0x1cc)]()[_0x2a0d3e(0x1dc)](_0x2a0d3e(0x1b7))[_0x2a0d3e(0x1cc)]()[_0x2a0d3e(0x1bd)](a87_0x680d79)[_0x2a0d3e(0x1dc)](_0x2a0d3e(0x1b7));});a87_0x680d79();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x33818b){const _0xdf0869=a87_0x128c;return _0x33818b&&_0x33818b[_0xdf0869(0x1e9)]?_0x33818b:{'default':_0x33818b};};Object['defineProperty'](exports,a87_0x4c6620(0x1e9),{'value':!![]}),exports[a87_0x4c6620(0x1c6)]=void 0x0;const constants_1=require(a87_0x4c6620(0x1d2)),promises_1=require('fs/promises'),sfdx_utils_1=require(a87_0x4c6620(0x1ed)),fs_internal_1=require('../../git/internal/fs.internal'),sfdx_utils_2=require('../utils/sfdx.utils'),auth_utils_1=require('../utils/auth.utils'),adm_zip_1=__importDefault(require(a87_0x4c6620(0x1c1))),uuid_1=require(a87_0x4c6620(0x1ce)),components_api_1=require(a87_0x4c6620(0x1ea)),path_1=require(a87_0x4c6620(0x1bc));async function retrieveZip({backupAsyncId:_0x4f559a,credentials:_0x4e235b,metadataLogId:_0x175c5b},_0x3be2ae){const _0x1ce632=a87_0x4c6620;var _0x15f0c5;const _0x11b4fd=(0x0,uuid_1['v4'])();try{!await fs_internal_1['FS'][_0x1ce632(0x1c8)](_0x1ce632(0x1c0)+_0x11b4fd)&&await(0x0,promises_1[_0x1ce632(0x1d9)])(_0x1ce632(0x1c0)+_0x11b4fd,{'recursive':!![]});await sfdx_utils_2[_0x1ce632(0x1be)][_0x1ce632(0x1c2)](_0x4f559a,_0x11b4fd),await sfdx_utils_2['SFDXUtils'][_0x1ce632(0x1e4)](_0x4e235b[_0x1ce632(0x1db)],_0x4f559a,_0x11b4fd),await retrieveReport(_0x4f559a,_0x4e235b,_0x11b4fd);const _0x4c0451=new adm_zip_1[(_0x1ce632(0x1c5))](await(0x0,promises_1[_0x1ce632(0x1b9)])(_0x1ce632(0x1c0)+_0x11b4fd+'/'+_0x4f559a+_0x1ce632(0x1d0))),_0x249247=new adm_zip_1[(_0x1ce632(0x1c5))]();for(const {entryName:_0x46787c}of _0x4c0451[_0x1ce632(0x1da)]()){const _0x22bb97=(_0x15f0c5=_0x4c0451[_0x1ce632(0x1bf)](_0x46787c))===null||_0x15f0c5===void 0x0?void 0x0:_0x15f0c5[_0x1ce632(0x1d5)]();_0x249247['addFile']((0x0,path_1[_0x1ce632(0x1c7)])('src',_0x46787c),_0x22bb97);}const _0x514410=_0x249247[_0x1ce632(0x1de)]()[_0x1ce632(0x1cc)](_0x1ce632(0x1cb))['length'];if(_0x514410>=components_api_1['MAX_ZIP_SIZE']){const [_0x36a20d,_0x726d16]=await components_api_1[_0x1ce632(0x1d1)]['splitZip'](_0x249247,_0x514410),_0x43a216={'ParentId':_0x175c5b,'Name':_0x1ce632(0x1c4),'Description':_0x1ce632(0x1c4),'Body':_0x36a20d[_0x1ce632(0x1de)]()['toString']('base64')};await _0x3be2ae[_0x1ce632(0x1eb)]('/services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x1ce632(0x1e7),_0x43a216),_0x43a216['Body']=_0x726d16[_0x1ce632(0x1de)]()[_0x1ce632(0x1cc)](_0x1ce632(0x1cb)),await _0x3be2ae['post'](_0x1ce632(0x1c3)+constants_1[_0x1ce632(0x1ba)]+_0x1ce632(0x1e7),_0x43a216);}else{const _0x34d133={'ParentId':_0x175c5b,'Name':_0x1ce632(0x1c4),'Description':_0x1ce632(0x1c4),'Body':_0x249247[_0x1ce632(0x1de)]()[_0x1ce632(0x1cc)](_0x1ce632(0x1cb))};await _0x3be2ae[_0x1ce632(0x1eb)](_0x1ce632(0x1c3)+constants_1[_0x1ce632(0x1ba)]+_0x1ce632(0x1e7),_0x34d133);}}catch(_0x2ec47c){throw _0x2ec47c;}finally{await(0x0,promises_1['rm'])('.temp/'+_0x11b4fd+'/'+_0x4f559a,{'recursive':!![]});}}exports[a87_0x4c6620(0x1c6)]=retrieveZip;function a87_0x128c(_0x59bbfa,_0x245565){const _0x79ec1=a87_0x247a();return a87_0x128c=function(_0x680d79,_0x42c5b9){_0x680d79=_0x680d79-0x1b7;let _0x247a5f=_0x79ec1[_0x680d79];return _0x247a5f;},a87_0x128c(_0x59bbfa,_0x245565);}async function retrieveReport(_0x244705,_0xff9e19,_0x108423){const _0x3a1579=a87_0x4c6620,_0x749c26=_0x3a1579(0x1e0)+'--json\x20'+(_0x3a1579(0x1e6)+_0x244705+'\x20')+(_0x3a1579(0x1ee)+_0x108423+'/'+_0x244705+'\x20')+(_0x3a1579(0x1d6)+_0xff9e19[_0x3a1579(0x1df)]);await sfdx_utils_1[_0x3a1579(0x1bb)][_0x3a1579(0x1b8)](_0x749c26)[_0x3a1579(0x1d8)](async _0x5a693d=>{const _0x99b12a=_0x3a1579;if(sfdx_utils_2[_0x99b12a(0x1be)][_0x99b12a(0x1ec)](_0x5a693d))return _0xff9e19[_0x99b12a(0x1df)]=await auth_utils_1['AuthUtils'][_0x99b12a(0x1d4)](_0xff9e19[_0x99b12a(0x1db)],_0xff9e19['refreshToken'],_0xff9e19['clientId'],_0xff9e19['clientSecret']),retrieveReport(_0x244705,_0xff9e19,_0x108423);throw _0x5a693d;});}