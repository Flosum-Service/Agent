const a102_0x2abbf1=a102_0x5acb;(function(_0x3dd6a6,_0x3ba04e){const _0x272244=a102_0x5acb,_0x1759b5=_0x3dd6a6();while(!![]){try{const _0x28f738=parseInt(_0x272244(0x1ea))/0x1+parseInt(_0x272244(0x1ed))/0x2+-parseInt(_0x272244(0x20e))/0x3+parseInt(_0x272244(0x1f9))/0x4*(-parseInt(_0x272244(0x1f5))/0x5)+parseInt(_0x272244(0x1fc))/0x6*(parseInt(_0x272244(0x217))/0x7)+parseInt(_0x272244(0x227))/0x8*(-parseInt(_0x272244(0x208))/0x9)+parseInt(_0x272244(0x1f7))/0xa;if(_0x28f738===_0x3ba04e)break;else _0x1759b5['push'](_0x1759b5['shift']());}catch(_0xf683a3){_0x1759b5['push'](_0x1759b5['shift']());}}}(a102_0x2a47,0x4455a));const a102_0x477c03=(function(){let _0x4d28cc=!![];return function(_0x1a407d,_0x26bc02){const _0x18cba3=_0x4d28cc?function(){const _0x3b89ac=a102_0x5acb;if(_0x26bc02){const _0x4d1a91=_0x26bc02[_0x3b89ac(0x203)](_0x1a407d,arguments);return _0x26bc02=null,_0x4d1a91;}}:function(){};return _0x4d28cc=![],_0x18cba3;};}()),a102_0x40c63f=a102_0x477c03(this,function(){const _0x47ef99=a102_0x5acb;return a102_0x40c63f['toString']()[_0x47ef99(0x20a)](_0x47ef99(0x21b))[_0x47ef99(0x1f2)]()[_0x47ef99(0x221)](a102_0x40c63f)['search']('(((.+)+)+)+$');});a102_0x40c63f();function a102_0x5acb(_0x3efd7e,_0x21591a){const _0xd43817=a102_0x2a47();return a102_0x5acb=function(_0x40c63f,_0x477c03){_0x40c63f=_0x40c63f-0x1e1;let _0x2a4707=_0xd43817[_0x40c63f];return _0x2a4707;},a102_0x5acb(_0x3efd7e,_0x21591a);}'use strict';var __decorate=this&&this[a102_0x2abbf1(0x20f)]||function(_0x353724,_0x22087b,_0x340f8d,_0x251a83){const _0x5b257e=a102_0x2abbf1;var _0x57a76c=arguments[_0x5b257e(0x213)],_0x335c65=_0x57a76c<0x3?_0x22087b:_0x251a83===null?_0x251a83=Object['getOwnPropertyDescriptor'](_0x22087b,_0x340f8d):_0x251a83,_0xe2ed5b;if(typeof Reflect===_0x5b257e(0x1ec)&&typeof Reflect[_0x5b257e(0x1f3)]===_0x5b257e(0x1ff))_0x335c65=Reflect['decorate'](_0x353724,_0x22087b,_0x340f8d,_0x251a83);else{for(var _0x6b038a=_0x353724[_0x5b257e(0x213)]-0x1;_0x6b038a>=0x0;_0x6b038a--)if(_0xe2ed5b=_0x353724[_0x6b038a])_0x335c65=(_0x57a76c<0x3?_0xe2ed5b(_0x335c65):_0x57a76c>0x3?_0xe2ed5b(_0x22087b,_0x340f8d,_0x335c65):_0xe2ed5b(_0x22087b,_0x340f8d))||_0x335c65;}return _0x57a76c>0x3&&_0x335c65&&Object[_0x5b257e(0x1e5)](_0x22087b,_0x340f8d,_0x335c65),_0x335c65;},__metadata=this&&this[a102_0x2abbf1(0x1eb)]||function(_0xbe5a66,_0x517333){const _0x43bc2f=a102_0x2abbf1;if(typeof Reflect==='object'&&typeof Reflect[_0x43bc2f(0x1fe)]===_0x43bc2f(0x1ff))return Reflect['metadata'](_0xbe5a66,_0x517333);},__param=this&&this[a102_0x2abbf1(0x224)]||function(_0x56575c,_0x38b5b1){return function(_0x1837f5,_0x5cd8d3){_0x38b5b1(_0x1837f5,_0x5cd8d3,_0x56575c);};};Object[a102_0x2abbf1(0x1e5)](exports,a102_0x2abbf1(0x1f8),{'value':!![]}),exports[a102_0x2abbf1(0x20c)]=void 0x0;const core_1=require(a102_0x2abbf1(0x225)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require(a102_0x2abbf1(0x21d)),generate_zip_service_1=require(a102_0x2abbf1(0x22c)),fetch_test_classes_service_1=require(a102_0x2abbf1(0x1e8)),deploy_attachment_service_1=require(a102_0x2abbf1(0x1e1)),salesforce_request_1=require('./utils/salesforce-request'),auth_utils_1=require(a102_0x2abbf1(0x21f)),auth_manager_1=require(a102_0x2abbf1(0x229)),salesforce_1=require(a102_0x2abbf1(0x226)),logger=new core_1[(a102_0x2abbf1(0x1f0))](a102_0x2abbf1(0x1e3));let FunctionsController=class FunctionsController{async['retrieveZip'](_0x1efaba){const _0x4e3b9f=a102_0x2abbf1,_0x5cc191=(0x0,salesforce_request_1[_0x4e3b9f(0x22b)])(auth_utils_1['AuthUtils'][_0x4e3b9f(0x1fb)](_0x1efaba[_0x4e3b9f(0x205)]));return(0x0,retrieve_zip_service_1[_0x4e3b9f(0x228)])(_0x1efaba,_0x5cc191)['then'](()=>{const _0xa23e09=_0x4e3b9f;return _0x5cc191['post'](_0xa23e09(0x201)+salesforce_request_1['namespace']+_0xa23e09(0x215),{'mdlId':_0x1efaba[_0xa23e09(0x1e9)],'opType':salesforce_request_type_1[_0xa23e09(0x1f1)]['SAVE_BACKUP_ZIP']});})[_0x4e3b9f(0x219)](_0x518bb5=>{const _0x4f6af5=_0x4e3b9f;return _0x5cc191['post']('/services/apexrest'+salesforce_request_1[_0x4f6af5(0x20b)]+_0x4f6af5(0x215),{'mdlId':_0x1efaba[_0x4f6af5(0x1e9)],'opType':salesforce_request_type_1[_0x4f6af5(0x1f1)][_0x4f6af5(0x1f4)],'message':_0x518bb5[_0x4f6af5(0x218)]||_0x518bb5});})[_0x4e3b9f(0x219)](_0x5c3903=>logger[_0x4e3b9f(0x212)](_0x5c3903[_0x4e3b9f(0x218)])),{'message':_0x4e3b9f(0x1fd)};}async[a102_0x2abbf1(0x214)](_0xec9138){const _0x7680f=a102_0x2abbf1,_0xe196bb=(0x0,salesforce_request_1[_0x7680f(0x22b)])(auth_utils_1['AuthUtils'][_0x7680f(0x1fb)](_0xec9138['instanceUrl']));return(0x0,fetch_test_classes_service_1[_0x7680f(0x214)])(_0xec9138,_0xe196bb)[_0x7680f(0x200)](()=>{const _0x358d3e=_0x7680f;return _0xe196bb['post']('/services/apexrest'+salesforce_request_1[_0x358d3e(0x20b)]+'/async',{'mdlId':_0xec9138[_0x358d3e(0x1e9)],'opType':salesforce_request_type_1[_0x358d3e(0x1f1)][_0x358d3e(0x204)]});})[_0x7680f(0x219)](_0x64e404=>{const _0x52e72e=_0x7680f;return _0xe196bb[_0x52e72e(0x21a)](_0x52e72e(0x201)+salesforce_request_1[_0x52e72e(0x20b)]+_0x52e72e(0x215),{'mdlId':_0xec9138['metadataLogId'],'opType':salesforce_request_type_1[_0x52e72e(0x1f1)]['ERROR'],'message':_0x64e404[_0x52e72e(0x218)]||_0x64e404});})['catch'](_0x4d2192=>logger['error'](_0x4d2192[_0x7680f(0x218)])),{'message':_0x7680f(0x1fd)};}async[a102_0x2abbf1(0x1e6)](_0x45df11){const _0x5445b8=a102_0x2abbf1,_0x20b25e=(0x0,salesforce_request_1[_0x5445b8(0x22b)])(auth_utils_1[_0x5445b8(0x220)]['getAuthParameters'](_0x45df11[_0x5445b8(0x205)])),_0x31e1ee=await salesforce_1[_0x5445b8(0x222)][_0x5445b8(0x1e4)](new auth_manager_1[(_0x5445b8(0x223))](_0x45df11[_0x5445b8(0x1e2)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x45df11,_0x20b25e,_0x31e1ee)[_0x5445b8(0x200)](_0x527409=>{const _0xfc74ec=_0x5445b8;return _0x20b25e[_0xfc74ec(0x21a)]('/services/apexrest'+salesforce_request_1[_0xfc74ec(0x20b)]+_0xfc74ec(0x215),{'mdlId':_0x45df11[_0xfc74ec(0x1e9)],'opType':salesforce_request_type_1[_0xfc74ec(0x1f1)][_0xfc74ec(0x20d)],'attachment':_0x527409});})[_0x5445b8(0x219)](_0x52f052=>{const _0xce8a24=_0x5445b8;return _0x20b25e[_0xce8a24(0x21a)]('/services/apexrest'+salesforce_request_1[_0xce8a24(0x20b)]+_0xce8a24(0x215),{'mdlId':_0x45df11[_0xce8a24(0x1e9)],'opType':salesforce_request_type_1[_0xce8a24(0x1f1)][_0xce8a24(0x1f4)],'message':_0x52f052[_0xce8a24(0x218)]||_0x52f052});})[_0x5445b8(0x219)](_0x45c9f4=>logger[_0x5445b8(0x212)](_0x45c9f4[_0x5445b8(0x218)])),{'message':_0x5445b8(0x1fd)};}async[a102_0x2abbf1(0x1ee)](_0x2ad47c){const _0x5c514d=a102_0x2abbf1,_0x45e0d5=(0x0,salesforce_request_1[_0x5c514d(0x22b)])(auth_utils_1[_0x5c514d(0x220)][_0x5c514d(0x1fb)](_0x2ad47c[_0x5c514d(0x205)]));return(0x0,deploy_attachment_service_1['deployComponents'])(_0x2ad47c,_0x45e0d5)[_0x5c514d(0x200)](_0x4f6b70=>{const _0x48ed60=_0x5c514d;return _0x45e0d5[_0x48ed60(0x21a)](_0x48ed60(0x201)+salesforce_request_1[_0x48ed60(0x20b)]+_0x48ed60(0x215),{'mdlId':_0x2ad47c[_0x48ed60(0x1e9)],'asyncId':_0x4f6b70,'opType':salesforce_request_type_1['OptionType'][_0x48ed60(0x1e7)]});})['catch'](_0x2873f6=>{const _0xa98bc3=_0x5c514d;return _0x45e0d5['post'](_0xa98bc3(0x201)+salesforce_request_1[_0xa98bc3(0x20b)]+_0xa98bc3(0x215),{'mdlId':_0x2ad47c[_0xa98bc3(0x1e9)],'opType':salesforce_request_type_1['OptionType'][_0xa98bc3(0x1f4)],'message':_0x2873f6[_0xa98bc3(0x218)]||_0x2873f6});})[_0x5c514d(0x219)](_0x8c7e80=>logger[_0x5c514d(0x212)](_0x8c7e80[_0x5c514d(0x218)])),{'message':_0x5c514d(0x1fd)};}};__decorate([(0x0,core_1[a102_0x2abbf1(0x210)])(a102_0x2abbf1(0x207)),__param(0x0,core_1[a102_0x2abbf1(0x1fa)][a102_0x2abbf1(0x206)]()),__metadata(a102_0x2abbf1(0x22a),Function),__metadata(a102_0x2abbf1(0x21e),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a102_0x2abbf1(0x211)],'retrieveZip',null),__decorate([(0x0,core_1[a102_0x2abbf1(0x210)])('fetch-test-classes'),__param(0x0,core_1[a102_0x2abbf1(0x1fa)][a102_0x2abbf1(0x206)]()),__metadata(a102_0x2abbf1(0x22a),Function),__metadata(a102_0x2abbf1(0x21e),[Object]),__metadata(a102_0x2abbf1(0x216),Promise)],FunctionsController['prototype'],a102_0x2abbf1(0x214),null),__decorate([(0x0,core_1[a102_0x2abbf1(0x210)])(a102_0x2abbf1(0x202)),__param(0x0,core_1[a102_0x2abbf1(0x1fa)]['body']()),__metadata(a102_0x2abbf1(0x22a),Function),__metadata(a102_0x2abbf1(0x21e),[Object]),__metadata(a102_0x2abbf1(0x216),Promise)],FunctionsController['prototype'],a102_0x2abbf1(0x1e6),null),__decorate([(0x0,core_1[a102_0x2abbf1(0x210)])(a102_0x2abbf1(0x1ef)),__param(0x0,core_1[a102_0x2abbf1(0x1fa)][a102_0x2abbf1(0x206)]()),__metadata(a102_0x2abbf1(0x22a),Function),__metadata(a102_0x2abbf1(0x21e),[Object]),__metadata(a102_0x2abbf1(0x216),Promise)],FunctionsController[a102_0x2abbf1(0x211)],a102_0x2abbf1(0x1ee),null),FunctionsController=__decorate([(0x0,core_1[a102_0x2abbf1(0x1f6)])(a102_0x2abbf1(0x21c)),(0x0,core_1[a102_0x2abbf1(0x209)])('v1')],FunctionsController),exports['FunctionsController']=FunctionsController;function a102_0x2a47(){const _0x419b85=['708990mHukhj','deployComponents','deploy-components','Logger','OptionType','toString','decorate','ERROR','10MfHMpL','Controller','7021820jlapho','__esModule','462356owaCob','param','getAuthParameters','30540FhURWl','Job\x20started\x20successfully','metadata','function','then','/services/apexrest','generate-deploy-zip','apply','GET_TESTS','instanceUrl','body','retrieve','36eKPUJu','Version','search','namespace','FunctionsController','SAVE_DEPLOY_ZIP','607446mGHVdQ','__decorate','Post','prototype','error','length','fetchTestClasses','/async','design:returntype','119IARrtQ','message','catch','post','(((.+)+)+)+$','functions','./services/retrieve-zip.service','design:paramtypes','./utils/auth.utils','AuthUtils','constructor','AxiosInstanceUtils','AuthManager','__param','../../core','@flosum/salesforce','1023856KoCxTK','retrieveZip','../shared/managers/auth.manager','design:type','createRequest','./services/generate-zip.service','./services/deploy-attachment.service','credentials','server','create','defineProperty','generateAndDeployZip','DEPLOY','./services/fetch-test-classes.service','metadataLogId','82279bKqOEz','__metadata','object'];a102_0x2a47=function(){return _0x419b85;};return a102_0x2a47();}