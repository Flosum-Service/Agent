const a82_0x386f94=a82_0x5c67;(function(_0x3c32e9,_0x68b166){const _0x2542ad=a82_0x5c67,_0x371f61=_0x3c32e9();while(!![]){try{const _0x441cce=parseInt(_0x2542ad(0xa5))/0x1*(-parseInt(_0x2542ad(0x82))/0x2)+parseInt(_0x2542ad(0xb8))/0x3*(parseInt(_0x2542ad(0x9c))/0x4)+parseInt(_0x2542ad(0x9e))/0x5+-parseInt(_0x2542ad(0x7e))/0x6+-parseInt(_0x2542ad(0x97))/0x7*(parseInt(_0x2542ad(0xbb))/0x8)+-parseInt(_0x2542ad(0xbf))/0x9*(-parseInt(_0x2542ad(0xc1))/0xa)+parseInt(_0x2542ad(0xb7))/0xb*(parseInt(_0x2542ad(0xbc))/0xc);if(_0x441cce===_0x68b166)break;else _0x371f61['push'](_0x371f61['shift']());}catch(_0x4f881e){_0x371f61['push'](_0x371f61['shift']());}}}(a82_0x53bc,0x5eb2d));const a82_0x2fbb28=(function(){let _0x38a70e=!![];return function(_0x4dcb08,_0x342f77){const _0x3de7ca=_0x38a70e?function(){const _0x2b83b0=a82_0x5c67;if(_0x342f77){const _0x5bee8a=_0x342f77[_0x2b83b0(0xa6)](_0x4dcb08,arguments);return _0x342f77=null,_0x5bee8a;}}:function(){};return _0x38a70e=![],_0x3de7ca;};}()),a82_0x556501=a82_0x2fbb28(this,function(){const _0x5b62b8=a82_0x5c67;return a82_0x556501[_0x5b62b8(0xa1)]()[_0x5b62b8(0x8f)]('(((.+)+)+)+$')[_0x5b62b8(0xa1)]()[_0x5b62b8(0xa2)](a82_0x556501)[_0x5b62b8(0x8f)](_0x5b62b8(0x81));});a82_0x556501();'use strict';var __decorate=this&&this['__decorate']||function(_0x28a471,_0x59fb05,_0x159f82,_0x3d78a4){const _0x46663d=a82_0x5c67;var _0x162650=arguments[_0x46663d(0xa3)],_0xaf4e7a=_0x162650<0x3?_0x59fb05:_0x3d78a4===null?_0x3d78a4=Object[_0x46663d(0x8c)](_0x59fb05,_0x159f82):_0x3d78a4,_0x46d300;if(typeof Reflect==='object'&&typeof Reflect['decorate']==='function')_0xaf4e7a=Reflect['decorate'](_0x28a471,_0x59fb05,_0x159f82,_0x3d78a4);else{for(var _0xb47ad9=_0x28a471[_0x46663d(0xa3)]-0x1;_0xb47ad9>=0x0;_0xb47ad9--)if(_0x46d300=_0x28a471[_0xb47ad9])_0xaf4e7a=(_0x162650<0x3?_0x46d300(_0xaf4e7a):_0x162650>0x3?_0x46d300(_0x59fb05,_0x159f82,_0xaf4e7a):_0x46d300(_0x59fb05,_0x159f82))||_0xaf4e7a;}return _0x162650>0x3&&_0xaf4e7a&&Object[_0x46663d(0xa4)](_0x59fb05,_0x159f82,_0xaf4e7a),_0xaf4e7a;},__metadata=this&&this['__metadata']||function(_0x4a11c8,_0x36d5f0){const _0x135a06=a82_0x5c67;if(typeof Reflect===_0x135a06(0x99)&&typeof Reflect['metadata']===_0x135a06(0xb1))return Reflect[_0x135a06(0xbd)](_0x4a11c8,_0x36d5f0);},__param=this&&this[a82_0x386f94(0x88)]||function(_0x4f88bf,_0xfc743d){return function(_0x142d83,_0x26da53){_0xfc743d(_0x142d83,_0x26da53,_0x4f88bf);};};Object[a82_0x386f94(0xa4)](exports,a82_0x386f94(0x84),{'value':!![]}),exports[a82_0x386f94(0xa8)]=void 0x0;const core_1=require(a82_0x386f94(0xc2)),salesforce_request_type_1=require(a82_0x386f94(0xba)),retrieve_zip_service_1=require(a82_0x386f94(0x90)),generate_zip_service_1=require(a82_0x386f94(0xa7)),fetch_test_classes_service_1=require(a82_0x386f94(0x86)),deploy_attachment_service_1=require('./services/deploy-attachment.service'),salesforce_request_1=require(a82_0x386f94(0x80)),auth_utils_1=require(a82_0x386f94(0xad)),logger=new core_1['Logger'](a82_0x386f94(0x8a));function a82_0x53bc(){const _0x5b092d=['function','generateAndDeployZip','post','deploy-components','namespace','body','11rYglGH','461694FKoXFY','design:paramtypes','./types/salesforce-request.type','8fMqHcX','5256324PquITf','metadata','fetch-test-classes','18eMLmqR','Version','1684820loYAeJ','../../core','Job\x20started\x20successfully','ERROR','3185538aAMRVo','metadataLogId','./utils/salesforce-request','(((.+)+)+)+$','1064zNsqhN','error','__esModule','getAuthParameters','./services/fetch-test-classes.service','deployComponents','__param','message','server','design:returntype','getOwnPropertyDescriptor','createRequest','AuthUtils','search','./services/retrieve-zip.service','then','Post','/async','param','instanceUrl','fetchTestClasses','5426890wObQwS','SAVE_DEPLOY_ZIP','object','catch','prototype','16qZxUes','Controller','3344895HYTnrG','design:type','functions','toString','constructor','length','defineProperty','687kqboUT','apply','./services/generate-zip.service','FunctionsController','OptionType','GET_TESTS','retrieveZip','generate-deploy-zip','./utils/auth.utils','/services/apexrest','retrieve','SAVE_BACKUP_ZIP'];a82_0x53bc=function(){return _0x5b092d;};return a82_0x53bc();}let FunctionsController=class FunctionsController{async['retrieveZip'](_0x48e2fb){const _0x3bf6e6=a82_0x386f94,_0x3ade8d=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x3bf6e6(0x8e)][_0x3bf6e6(0x85)](_0x48e2fb[_0x3bf6e6(0x95)]));return(0x0,retrieve_zip_service_1[_0x3bf6e6(0xab)])(_0x48e2fb,_0x3ade8d)[_0x3bf6e6(0x91)](()=>{const _0x919354=_0x3bf6e6;return _0x3ade8d[_0x919354(0xb3)](_0x919354(0xae)+salesforce_request_1[_0x919354(0xb5)]+_0x919354(0x93),{'mdlId':_0x48e2fb['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x919354(0xb0)]});})[_0x3bf6e6(0x9a)](_0x5c32e9=>{const _0x1e9738=_0x3bf6e6;return _0x3ade8d['post']('/services/apexrest'+salesforce_request_1[_0x1e9738(0xb5)]+_0x1e9738(0x93),{'mdlId':_0x48e2fb[_0x1e9738(0x7f)],'opType':salesforce_request_type_1[_0x1e9738(0xa9)][_0x1e9738(0xc4)],'message':_0x5c32e9['message']||_0x5c32e9});})[_0x3bf6e6(0x9a)](_0x20870c=>logger[_0x3bf6e6(0x83)](_0x20870c[_0x3bf6e6(0x89)])),{'message':'Job\x20started\x20successfully'};}async['fetchTestClasses'](_0xe88e49){const _0x4d5467=a82_0x386f94,_0x4cb1c4=(0x0,salesforce_request_1[_0x4d5467(0x8d)])(auth_utils_1[_0x4d5467(0x8e)]['getAuthParameters'](_0xe88e49[_0x4d5467(0x95)]));return(0x0,fetch_test_classes_service_1[_0x4d5467(0x96)])(_0xe88e49,_0x4cb1c4)['then'](()=>{const _0x1188c8=_0x4d5467;return _0x4cb1c4[_0x1188c8(0xb3)](_0x1188c8(0xae)+salesforce_request_1[_0x1188c8(0xb5)]+'/async',{'mdlId':_0xe88e49[_0x1188c8(0x7f)],'opType':salesforce_request_type_1[_0x1188c8(0xa9)][_0x1188c8(0xaa)]});})[_0x4d5467(0x9a)](_0x86a18c=>{const _0x47a458=_0x4d5467;return _0x4cb1c4['post'](_0x47a458(0xae)+salesforce_request_1['namespace']+_0x47a458(0x93),{'mdlId':_0xe88e49['metadataLogId'],'opType':salesforce_request_type_1[_0x47a458(0xa9)][_0x47a458(0xc4)],'message':_0x86a18c[_0x47a458(0x89)]||_0x86a18c});})[_0x4d5467(0x9a)](_0x5b931f=>logger[_0x4d5467(0x83)](_0x5b931f['message'])),{'message':_0x4d5467(0xc3)};}async[a82_0x386f94(0xb2)](_0x2aeb10){const _0x4f3638=a82_0x386f94,_0x1f3ab8=(0x0,salesforce_request_1[_0x4f3638(0x8d)])(auth_utils_1[_0x4f3638(0x8e)]['getAuthParameters'](_0x2aeb10['instanceUrl']));return(0x0,generate_zip_service_1[_0x4f3638(0xb2)])(_0x2aeb10,_0x1f3ab8)[_0x4f3638(0x91)](_0x53de56=>{const _0x5eddb9=_0x4f3638;return _0x1f3ab8[_0x5eddb9(0xb3)]('/services/apexrest'+salesforce_request_1[_0x5eddb9(0xb5)]+'/async',{'mdlId':_0x2aeb10['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x5eddb9(0x98)],'attachment':_0x53de56});})['catch'](_0x369ad5=>{const _0x417cdd=_0x4f3638;return _0x1f3ab8[_0x417cdd(0xb3)](_0x417cdd(0xae)+salesforce_request_1[_0x417cdd(0xb5)]+_0x417cdd(0x93),{'mdlId':_0x2aeb10[_0x417cdd(0x7f)],'opType':salesforce_request_type_1[_0x417cdd(0xa9)][_0x417cdd(0xc4)],'message':_0x369ad5[_0x417cdd(0x89)]||_0x369ad5});})[_0x4f3638(0x9a)](_0x5c9781=>logger['error'](_0x5c9781['message'])),{'message':_0x4f3638(0xc3)};}async['deployComponents'](_0x2ff262){const _0x1cc307=a82_0x386f94,_0x3328e4=(0x0,salesforce_request_1['createRequest'])(auth_utils_1['AuthUtils'][_0x1cc307(0x85)](_0x2ff262['instanceUrl']));return(0x0,deploy_attachment_service_1[_0x1cc307(0x87)])(_0x2ff262,_0x3328e4)[_0x1cc307(0x91)](_0x54f686=>{const _0x2376bc=_0x1cc307;return _0x3328e4[_0x2376bc(0xb3)](_0x2376bc(0xae)+salesforce_request_1[_0x2376bc(0xb5)]+'/async',{'mdlId':_0x2ff262[_0x2376bc(0x7f)],'asyncId':_0x54f686,'opType':salesforce_request_type_1[_0x2376bc(0xa9)]['DEPLOY']});})[_0x1cc307(0x9a)](_0x352ca3=>{const _0x459e9c=_0x1cc307;return _0x3328e4[_0x459e9c(0xb3)](_0x459e9c(0xae)+salesforce_request_1[_0x459e9c(0xb5)]+'/async',{'mdlId':_0x2ff262[_0x459e9c(0x7f)],'opType':salesforce_request_type_1[_0x459e9c(0xa9)][_0x459e9c(0xc4)],'message':_0x352ca3['message']||_0x352ca3});})[_0x1cc307(0x9a)](_0x548276=>logger[_0x1cc307(0x83)](_0x548276['message'])),{'message':'Job\x20started\x20successfully'};}};function a82_0x5c67(_0x59816e,_0x335dc2){const _0x794fa6=a82_0x53bc();return a82_0x5c67=function(_0x556501,_0x2fbb28){_0x556501=_0x556501-0x7e;let _0x53bc35=_0x794fa6[_0x556501];return _0x53bc35;},a82_0x5c67(_0x59816e,_0x335dc2);}__decorate([(0x0,core_1['Post'])(a82_0x386f94(0xaf)),__param(0x0,core_1[a82_0x386f94(0x94)][a82_0x386f94(0xb6)]()),__metadata('design:type',Function),__metadata(a82_0x386f94(0xb9),[Object]),__metadata(a82_0x386f94(0x8b),Promise)],FunctionsController['prototype'],'retrieveZip',null),__decorate([(0x0,core_1[a82_0x386f94(0x92)])(a82_0x386f94(0xbe)),__param(0x0,core_1[a82_0x386f94(0x94)]['body']()),__metadata(a82_0x386f94(0x9f),Function),__metadata(a82_0x386f94(0xb9),[Object]),__metadata(a82_0x386f94(0x8b),Promise)],FunctionsController[a82_0x386f94(0x9b)],'fetchTestClasses',null),__decorate([(0x0,core_1[a82_0x386f94(0x92)])(a82_0x386f94(0xac)),__param(0x0,core_1[a82_0x386f94(0x94)]['body']()),__metadata(a82_0x386f94(0x9f),Function),__metadata('design:paramtypes',[Object]),__metadata(a82_0x386f94(0x8b),Promise)],FunctionsController[a82_0x386f94(0x9b)],a82_0x386f94(0xb2),null),__decorate([(0x0,core_1[a82_0x386f94(0x92)])(a82_0x386f94(0xb4)),__param(0x0,core_1['param']['body']()),__metadata(a82_0x386f94(0x9f),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],FunctionsController['prototype'],a82_0x386f94(0x87),null),FunctionsController=__decorate([(0x0,core_1[a82_0x386f94(0x9d)])(a82_0x386f94(0xa0)),(0x0,core_1[a82_0x386f94(0xc0)])('v1')],FunctionsController),exports['FunctionsController']=FunctionsController;