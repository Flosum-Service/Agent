const a101_0x3d60a8=a101_0x360a;(function(_0x4683c4,_0x37282d){const _0x5b8eb2=a101_0x360a,_0x4bfdea=_0x4683c4();while(!![]){try{const _0x306d55=-parseInt(_0x5b8eb2(0x77))/0x1+-parseInt(_0x5b8eb2(0xab))/0x2*(parseInt(_0x5b8eb2(0x6e))/0x3)+parseInt(_0x5b8eb2(0x66))/0x4+parseInt(_0x5b8eb2(0x92))/0x5*(parseInt(_0x5b8eb2(0xad))/0x6)+-parseInt(_0x5b8eb2(0x82))/0x7*(parseInt(_0x5b8eb2(0x8b))/0x8)+-parseInt(_0x5b8eb2(0x6a))/0x9+-parseInt(_0x5b8eb2(0x74))/0xa*(-parseInt(_0x5b8eb2(0x79))/0xb);if(_0x306d55===_0x37282d)break;else _0x4bfdea['push'](_0x4bfdea['shift']());}catch(_0x234557){_0x4bfdea['push'](_0x4bfdea['shift']());}}}(a101_0x4f79,0x95f0b));const a101_0xc1d820=(function(){let _0x5ed4ad=!![];return function(_0x589965,_0x23e67b){const _0x26c38c=_0x5ed4ad?function(){const _0x7567bb=a101_0x360a;if(_0x23e67b){const _0x46288e=_0x23e67b[_0x7567bb(0xa0)](_0x589965,arguments);return _0x23e67b=null,_0x46288e;}}:function(){};return _0x5ed4ad=![],_0x26c38c;};}()),a101_0xcd0b4a=a101_0xc1d820(this,function(){const _0x4429fd=a101_0x360a;return a101_0xcd0b4a[_0x4429fd(0x98)]()[_0x4429fd(0xa4)](_0x4429fd(0x8d))[_0x4429fd(0x98)]()[_0x4429fd(0x9f)](a101_0xcd0b4a)[_0x4429fd(0xa4)]('(((.+)+)+)+$');});a101_0xcd0b4a();'use strict';var __decorate=this&&this[a101_0x3d60a8(0x7a)]||function(_0x454405,_0x13df66,_0x4cf29e,_0x3e5378){const _0x34bfdc=a101_0x3d60a8;var _0xd023d8=arguments[_0x34bfdc(0x7c)],_0x54a2dc=_0xd023d8<0x3?_0x13df66:_0x3e5378===null?_0x3e5378=Object[_0x34bfdc(0xa6)](_0x13df66,_0x4cf29e):_0x3e5378,_0x4b5d72;if(typeof Reflect===_0x34bfdc(0x70)&&typeof Reflect[_0x34bfdc(0x6f)]===_0x34bfdc(0x9c))_0x54a2dc=Reflect[_0x34bfdc(0x6f)](_0x454405,_0x13df66,_0x4cf29e,_0x3e5378);else{for(var _0x2fd89b=_0x454405[_0x34bfdc(0x7c)]-0x1;_0x2fd89b>=0x0;_0x2fd89b--)if(_0x4b5d72=_0x454405[_0x2fd89b])_0x54a2dc=(_0xd023d8<0x3?_0x4b5d72(_0x54a2dc):_0xd023d8>0x3?_0x4b5d72(_0x13df66,_0x4cf29e,_0x54a2dc):_0x4b5d72(_0x13df66,_0x4cf29e))||_0x54a2dc;}return _0xd023d8>0x3&&_0x54a2dc&&Object['defineProperty'](_0x13df66,_0x4cf29e,_0x54a2dc),_0x54a2dc;},__metadata=this&&this[a101_0x3d60a8(0xac)]||function(_0x30c4da,_0x412409){const _0x46c990=a101_0x3d60a8;if(typeof Reflect===_0x46c990(0x70)&&typeof Reflect['metadata']===_0x46c990(0x9c))return Reflect[_0x46c990(0x88)](_0x30c4da,_0x412409);},__param=this&&this['__param']||function(_0x238270,_0x443143){return function(_0x289931,_0x50fee5){_0x443143(_0x289931,_0x50fee5,_0x238270);};};function a101_0x4f79(){const _0x2ed761=['AuthManager','SAVE_BACKUP_ZIP','392sMKQCE','param','/services/apexrest','DEPLOY','@flosum/salesforce','retrieveZip','metadata','AxiosInstanceUtils','./utils/auth.utils','113496fJXOcf','design:type','(((.+)+)+)+$','design:paramtypes','AuthUtils','design:returntype','GET_TESTS','1277990yJZvlt','../shared/managers/auth.manager','OptionType','message','./utils/salesforce-request','generate-deploy-zip','toString','create','./services/generate-zip.service','post','function','generateAndDeployZip','Job\x20started\x20successfully','constructor','apply','defineProperty','ERROR','Post','search','./services/deploy-attachment.service','getOwnPropertyDescriptor','instanceUrl','../../core','retrieve','SAVE_DEPLOY_ZIP','2fOgTJI','__metadata','12KKDtmF','deploy-components','FunctionsController','3507188LkyyHf','namespace','catch','./services/fetch-test-classes.service','9231687UhNDko','createRequest','Version','prototype','231471JYdXcm','decorate','object','fetchTestClasses','metadataLogId','deployComponents','10560120SpdeQm','/async','then','988490vpBkoM','functions','22jUPmCC','__decorate','error','length','getAuthParameters','body','__esModule'];a101_0x4f79=function(){return _0x2ed761;};return a101_0x4f79();}Object[a101_0x3d60a8(0xa1)](exports,a101_0x3d60a8(0x7f),{'value':!![]}),exports[a101_0x3d60a8(0x65)]=void 0x0;function a101_0x360a(_0xbef2ce,_0x2c7f4a){const _0x245659=a101_0x4f79();return a101_0x360a=function(_0xcd0b4a,_0xc1d820){_0xcd0b4a=_0xcd0b4a-0x65;let _0x4f7922=_0x245659[_0xcd0b4a];return _0x4f7922;},a101_0x360a(_0xbef2ce,_0x2c7f4a);}const core_1=require(a101_0x3d60a8(0xa8)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require('./services/retrieve-zip.service'),generate_zip_service_1=require(a101_0x3d60a8(0x9a)),fetch_test_classes_service_1=require(a101_0x3d60a8(0x69)),deploy_attachment_service_1=require(a101_0x3d60a8(0xa5)),salesforce_request_1=require(a101_0x3d60a8(0x96)),auth_utils_1=require(a101_0x3d60a8(0x8a)),auth_manager_1=require(a101_0x3d60a8(0x93)),salesforce_1=require(a101_0x3d60a8(0x86)),logger=new core_1['Logger']('server');let FunctionsController=class FunctionsController{async['retrieveZip'](_0x305708){const _0x35b9b5=a101_0x3d60a8,_0x230d3c=(0x0,salesforce_request_1[_0x35b9b5(0x6b)])(auth_utils_1[_0x35b9b5(0x8f)][_0x35b9b5(0x7d)](_0x305708[_0x35b9b5(0xa7)]));return(0x0,retrieve_zip_service_1[_0x35b9b5(0x87)])(_0x305708,_0x230d3c)[_0x35b9b5(0x76)](()=>{const _0x59b586=_0x35b9b5;return _0x230d3c[_0x59b586(0x9b)](_0x59b586(0x84)+salesforce_request_1['namespace']+_0x59b586(0x75),{'mdlId':_0x305708['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x59b586(0x81)]});})[_0x35b9b5(0x68)](_0x150ac3=>{const _0x4c9117=_0x35b9b5;return _0x230d3c['post']('/services/apexrest'+salesforce_request_1['namespace']+'/async',{'mdlId':_0x305708['metadataLogId'],'opType':salesforce_request_type_1[_0x4c9117(0x94)][_0x4c9117(0xa2)],'message':_0x150ac3[_0x4c9117(0x95)]||_0x150ac3});})[_0x35b9b5(0x68)](_0xcc9fac=>logger[_0x35b9b5(0x7b)](_0xcc9fac[_0x35b9b5(0x95)])),{'message':_0x35b9b5(0x9e)};}async[a101_0x3d60a8(0x71)](_0x419a1f){const _0x3bc624=a101_0x3d60a8,_0x4bf590=(0x0,salesforce_request_1[_0x3bc624(0x6b)])(auth_utils_1[_0x3bc624(0x8f)][_0x3bc624(0x7d)](_0x419a1f['instanceUrl']));return(0x0,fetch_test_classes_service_1[_0x3bc624(0x71)])(_0x419a1f,_0x4bf590)['then'](()=>{const _0x34dbbb=_0x3bc624;return _0x4bf590[_0x34dbbb(0x9b)](_0x34dbbb(0x84)+salesforce_request_1[_0x34dbbb(0x67)]+_0x34dbbb(0x75),{'mdlId':_0x419a1f[_0x34dbbb(0x72)],'opType':salesforce_request_type_1['OptionType'][_0x34dbbb(0x91)]});})['catch'](_0x587929=>{const _0x1fd727=_0x3bc624;return _0x4bf590[_0x1fd727(0x9b)](_0x1fd727(0x84)+salesforce_request_1[_0x1fd727(0x67)]+_0x1fd727(0x75),{'mdlId':_0x419a1f[_0x1fd727(0x72)],'opType':salesforce_request_type_1['OptionType']['ERROR'],'message':_0x587929[_0x1fd727(0x95)]||_0x587929});})[_0x3bc624(0x68)](_0x178e3c=>logger[_0x3bc624(0x7b)](_0x178e3c['message'])),{'message':_0x3bc624(0x9e)};}async['generateAndDeployZip'](_0xbc7b07){const _0x5be766=a101_0x3d60a8,_0x35db74=(0x0,salesforce_request_1[_0x5be766(0x6b)])(auth_utils_1[_0x5be766(0x8f)][_0x5be766(0x7d)](_0xbc7b07['instanceUrl'])),_0xce070d=await salesforce_1[_0x5be766(0x89)][_0x5be766(0x99)](new auth_manager_1[(_0x5be766(0x80))](_0xbc7b07['credentials']),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0x5be766(0x9d)])(_0xbc7b07,_0x35db74,_0xce070d)[_0x5be766(0x76)](_0x446b0a=>{const _0x592cc8=_0x5be766;return _0x35db74[_0x592cc8(0x9b)](_0x592cc8(0x84)+salesforce_request_1[_0x592cc8(0x67)]+_0x592cc8(0x75),{'mdlId':_0xbc7b07[_0x592cc8(0x72)],'opType':salesforce_request_type_1['OptionType'][_0x592cc8(0xaa)],'attachment':_0x446b0a});})['catch'](_0x3246c1=>{const _0x318554=_0x5be766;return _0x35db74[_0x318554(0x9b)](_0x318554(0x84)+salesforce_request_1[_0x318554(0x67)]+_0x318554(0x75),{'mdlId':_0xbc7b07[_0x318554(0x72)],'opType':salesforce_request_type_1[_0x318554(0x94)][_0x318554(0xa2)],'message':_0x3246c1['message']||_0x3246c1});})[_0x5be766(0x68)](_0x154306=>logger[_0x5be766(0x7b)](_0x154306[_0x5be766(0x95)])),{'message':'Job\x20started\x20successfully'};}async[a101_0x3d60a8(0x73)](_0x36fd3b){const _0x480417=a101_0x3d60a8,_0x401428=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x480417(0x8f)][_0x480417(0x7d)](_0x36fd3b[_0x480417(0xa7)]));return(0x0,deploy_attachment_service_1[_0x480417(0x73)])(_0x36fd3b,_0x401428)[_0x480417(0x76)](_0x30975c=>{const _0x2ebee4=_0x480417;return _0x401428[_0x2ebee4(0x9b)](_0x2ebee4(0x84)+salesforce_request_1['namespace']+'/async',{'mdlId':_0x36fd3b[_0x2ebee4(0x72)],'asyncId':_0x30975c,'opType':salesforce_request_type_1['OptionType'][_0x2ebee4(0x85)]});})[_0x480417(0x68)](_0xb76a04=>{const _0x23aa52=_0x480417;return _0x401428[_0x23aa52(0x9b)](_0x23aa52(0x84)+salesforce_request_1[_0x23aa52(0x67)]+_0x23aa52(0x75),{'mdlId':_0x36fd3b[_0x23aa52(0x72)],'opType':salesforce_request_type_1['OptionType']['ERROR'],'message':_0xb76a04[_0x23aa52(0x95)]||_0xb76a04});})[_0x480417(0x68)](_0x2d1b19=>logger['error'](_0x2d1b19[_0x480417(0x95)])),{'message':_0x480417(0x9e)};}};__decorate([(0x0,core_1['Post'])(a101_0x3d60a8(0xa9)),__param(0x0,core_1['param'][a101_0x3d60a8(0x7e)]()),__metadata(a101_0x3d60a8(0x8c),Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0x3d60a8(0x90),Promise)],FunctionsController[a101_0x3d60a8(0x6d)],a101_0x3d60a8(0x87),null),__decorate([(0x0,core_1[a101_0x3d60a8(0xa3)])('fetch-test-classes'),__param(0x0,core_1['param'][a101_0x3d60a8(0x7e)]()),__metadata('design:type',Function),__metadata(a101_0x3d60a8(0x8e),[Object]),__metadata('design:returntype',Promise)],FunctionsController['prototype'],a101_0x3d60a8(0x71),null),__decorate([(0x0,core_1['Post'])(a101_0x3d60a8(0x97)),__param(0x0,core_1['param'][a101_0x3d60a8(0x7e)]()),__metadata(a101_0x3d60a8(0x8c),Function),__metadata(a101_0x3d60a8(0x8e),[Object]),__metadata(a101_0x3d60a8(0x90),Promise)],FunctionsController['prototype'],a101_0x3d60a8(0x9d),null),__decorate([(0x0,core_1[a101_0x3d60a8(0xa3)])(a101_0x3d60a8(0xae)),__param(0x0,core_1[a101_0x3d60a8(0x83)][a101_0x3d60a8(0x7e)]()),__metadata(a101_0x3d60a8(0x8c),Function),__metadata(a101_0x3d60a8(0x8e),[Object]),__metadata(a101_0x3d60a8(0x90),Promise)],FunctionsController[a101_0x3d60a8(0x6d)],a101_0x3d60a8(0x73),null),FunctionsController=__decorate([(0x0,core_1['Controller'])(a101_0x3d60a8(0x78)),(0x0,core_1[a101_0x3d60a8(0x6c)])('v1')],FunctionsController),exports[a101_0x3d60a8(0x65)]=FunctionsController;