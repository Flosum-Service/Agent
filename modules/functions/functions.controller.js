const a101_0x576fd9=a101_0x2b6f;function a101_0x1d43(){const _0x2544a6=['9Qyztvc','credentials','design:returntype','then','design:paramtypes','metadataLogId','function','toString','generate-deploy-zip','DEPLOY','body','functions','@flosum/salesforce','../../core','Job\x20started\x20successfully','64vQuCDL','generateAndDeployZip','8010168nVedLl','instanceUrl','object','839054SccSyd','catch','2hQZmDm','OptionType','4471550nSvbcu','constructor','fetchTestClasses','/async','AxiosInstanceUtils','length','Logger','2991825kPbnKb','error','GET_TESTS','AuthUtils','1931461pfRaWF','metadata','param','__metadata','./utils/auth.utils','deployComponents','./services/fetch-test-classes.service','defineProperty','namespace','Post','ERROR','decorate','design:type','fetch-test-classes','retrieveZip','message','134755EmVbGx','/services/apexrest','./services/generate-zip.service','createRequest','getAuthParameters','prototype','Version','22IrjGZV','./utils/salesforce-request','apply','getOwnPropertyDescriptor','search','./services/deploy-attachment.service','post','6588558BCHNwY','(((.+)+)+)+$'];a101_0x1d43=function(){return _0x2544a6;};return a101_0x1d43();}(function(_0x3d63b5,_0x41d5cd){const _0x4a4243=a101_0x2b6f,_0x3e914d=_0x3d63b5();while(!![]){try{const _0x3e22ce=-parseInt(_0x4a4243(0x1fc))/0x1*(-parseInt(_0x4a4243(0x1fe))/0x2)+parseInt(_0x4a4243(0x207))/0x3+parseInt(_0x4a4243(0x1f7))/0x4*(-parseInt(_0x4a4243(0x21b))/0x5)+-parseInt(_0x4a4243(0x1e6))/0x6+parseInt(_0x4a4243(0x20b))/0x7+parseInt(_0x4a4243(0x1f9))/0x8*(parseInt(_0x4a4243(0x1e8))/0x9)+-parseInt(_0x4a4243(0x200))/0xa*(parseInt(_0x4a4243(0x222))/0xb);if(_0x3e22ce===_0x41d5cd)break;else _0x3e914d['push'](_0x3e914d['shift']());}catch(_0x182486){_0x3e914d['push'](_0x3e914d['shift']());}}}(a101_0x1d43,0xa86f0));const a101_0x36e4bb=(function(){let _0x2a6b78=!![];return function(_0x3981a4,_0x16d39a){const _0x4c862e=_0x2a6b78?function(){const _0x33f07c=a101_0x2b6f;if(_0x16d39a){const _0x21c58e=_0x16d39a[_0x33f07c(0x1e1)](_0x3981a4,arguments);return _0x16d39a=null,_0x21c58e;}}:function(){};return _0x2a6b78=![],_0x4c862e;};}()),a101_0x411da6=a101_0x36e4bb(this,function(){const _0x2e850e=a101_0x2b6f;return a101_0x411da6[_0x2e850e(0x1ef)]()[_0x2e850e(0x1e3)](_0x2e850e(0x1e7))['toString']()[_0x2e850e(0x201)](a101_0x411da6)[_0x2e850e(0x1e3)]('(((.+)+)+)+$');});a101_0x411da6();function a101_0x2b6f(_0x1a792a,_0x37acfb){const _0x4ffafa=a101_0x1d43();return a101_0x2b6f=function(_0x411da6,_0x36e4bb){_0x411da6=_0x411da6-0x1e1;let _0x1d4320=_0x4ffafa[_0x411da6];return _0x1d4320;},a101_0x2b6f(_0x1a792a,_0x37acfb);}'use strict';var __decorate=this&&this['__decorate']||function(_0x497df6,_0x48ba7a,_0x528520,_0x116747){const _0x5b83c5=a101_0x2b6f;var _0x5ace34=arguments[_0x5b83c5(0x205)],_0x17c511=_0x5ace34<0x3?_0x48ba7a:_0x116747===null?_0x116747=Object[_0x5b83c5(0x1e2)](_0x48ba7a,_0x528520):_0x116747,_0x19f564;if(typeof Reflect===_0x5b83c5(0x1fb)&&typeof Reflect[_0x5b83c5(0x216)]===_0x5b83c5(0x1ee))_0x17c511=Reflect[_0x5b83c5(0x216)](_0x497df6,_0x48ba7a,_0x528520,_0x116747);else{for(var _0x9679a5=_0x497df6[_0x5b83c5(0x205)]-0x1;_0x9679a5>=0x0;_0x9679a5--)if(_0x19f564=_0x497df6[_0x9679a5])_0x17c511=(_0x5ace34<0x3?_0x19f564(_0x17c511):_0x5ace34>0x3?_0x19f564(_0x48ba7a,_0x528520,_0x17c511):_0x19f564(_0x48ba7a,_0x528520))||_0x17c511;}return _0x5ace34>0x3&&_0x17c511&&Object[_0x5b83c5(0x212)](_0x48ba7a,_0x528520,_0x17c511),_0x17c511;},__metadata=this&&this[a101_0x576fd9(0x20e)]||function(_0x301f2e,_0x54bf03){const _0x267d38=a101_0x576fd9;if(typeof Reflect==='object'&&typeof Reflect[_0x267d38(0x20c)]===_0x267d38(0x1ee))return Reflect[_0x267d38(0x20c)](_0x301f2e,_0x54bf03);},__param=this&&this['__param']||function(_0x18dcb6,_0x26d3da){return function(_0x3c38cb,_0x458aef){_0x26d3da(_0x3c38cb,_0x458aef,_0x18dcb6);};};Object[a101_0x576fd9(0x212)](exports,'__esModule',{'value':!![]}),exports['FunctionsController']=void 0x0;const core_1=require(a101_0x576fd9(0x1f5)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require('./services/retrieve-zip.service'),generate_zip_service_1=require(a101_0x576fd9(0x21d)),fetch_test_classes_service_1=require(a101_0x576fd9(0x211)),deploy_attachment_service_1=require(a101_0x576fd9(0x1e4)),salesforce_request_1=require(a101_0x576fd9(0x223)),auth_utils_1=require(a101_0x576fd9(0x20f)),auth_manager_1=require('../shared/managers/auth.manager'),salesforce_1=require(a101_0x576fd9(0x1f4)),logger=new core_1[(a101_0x576fd9(0x206))]('server');let FunctionsController=class FunctionsController{async[a101_0x576fd9(0x219)](_0x4626cd){const _0x204261=a101_0x576fd9,_0x4ef7d2=(0x0,salesforce_request_1[_0x204261(0x21e)])(auth_utils_1[_0x204261(0x20a)]['getAuthParameters'](_0x4626cd[_0x204261(0x1fa)]));return(0x0,retrieve_zip_service_1[_0x204261(0x219)])(_0x4626cd,_0x4ef7d2)['then'](()=>{const _0x19cf9d=_0x204261;return _0x4ef7d2[_0x19cf9d(0x1e5)](_0x19cf9d(0x21c)+salesforce_request_1[_0x19cf9d(0x213)]+_0x19cf9d(0x203),{'mdlId':_0x4626cd[_0x19cf9d(0x1ed)],'opType':salesforce_request_type_1[_0x19cf9d(0x1ff)]['SAVE_BACKUP_ZIP']});})[_0x204261(0x1fd)](_0x542c2f=>{const _0x2a682b=_0x204261;return _0x4ef7d2[_0x2a682b(0x1e5)]('/services/apexrest'+salesforce_request_1[_0x2a682b(0x213)]+'/async',{'mdlId':_0x4626cd[_0x2a682b(0x1ed)],'opType':salesforce_request_type_1['OptionType']['ERROR'],'message':_0x542c2f[_0x2a682b(0x21a)]||_0x542c2f});})['catch'](_0x53c0f2=>logger[_0x204261(0x208)](_0x53c0f2[_0x204261(0x21a)])),{'message':_0x204261(0x1f6)};}async[a101_0x576fd9(0x202)](_0x12f30c){const _0x2db763=a101_0x576fd9,_0x25884d=(0x0,salesforce_request_1[_0x2db763(0x21e)])(auth_utils_1['AuthUtils'][_0x2db763(0x21f)](_0x12f30c[_0x2db763(0x1fa)]));return(0x0,fetch_test_classes_service_1[_0x2db763(0x202)])(_0x12f30c,_0x25884d)[_0x2db763(0x1eb)](()=>{const _0x5a354a=_0x2db763;return _0x25884d[_0x5a354a(0x1e5)](_0x5a354a(0x21c)+salesforce_request_1['namespace']+_0x5a354a(0x203),{'mdlId':_0x12f30c[_0x5a354a(0x1ed)],'opType':salesforce_request_type_1[_0x5a354a(0x1ff)][_0x5a354a(0x209)]});})[_0x2db763(0x1fd)](_0x5db550=>{const _0x147340=_0x2db763;return _0x25884d[_0x147340(0x1e5)](_0x147340(0x21c)+salesforce_request_1[_0x147340(0x213)]+_0x147340(0x203),{'mdlId':_0x12f30c['metadataLogId'],'opType':salesforce_request_type_1[_0x147340(0x1ff)][_0x147340(0x215)],'message':_0x5db550[_0x147340(0x21a)]||_0x5db550});})[_0x2db763(0x1fd)](_0x5c0825=>logger[_0x2db763(0x208)](_0x5c0825[_0x2db763(0x21a)])),{'message':'Job\x20started\x20successfully'};}async[a101_0x576fd9(0x1f8)](_0x101935){const _0x21218e=a101_0x576fd9,_0x303eaa=(0x0,salesforce_request_1[_0x21218e(0x21e)])(auth_utils_1[_0x21218e(0x20a)][_0x21218e(0x21f)](_0x101935[_0x21218e(0x1fa)])),_0x1807b3=await salesforce_1[_0x21218e(0x204)]['create'](new auth_manager_1['AuthManager'](_0x101935[_0x21218e(0x1e9)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0x21218e(0x1f8)])(_0x101935,_0x303eaa,_0x1807b3)[_0x21218e(0x1eb)](_0x5134e5=>{const _0x3a5e61=_0x21218e;return _0x303eaa['post'](_0x3a5e61(0x21c)+salesforce_request_1[_0x3a5e61(0x213)]+_0x3a5e61(0x203),{'mdlId':_0x101935['metadataLogId'],'opType':salesforce_request_type_1[_0x3a5e61(0x1ff)]['SAVE_DEPLOY_ZIP'],'attachment':_0x5134e5});})[_0x21218e(0x1fd)](_0x4b93fa=>{const _0x1e382d=_0x21218e;return _0x303eaa[_0x1e382d(0x1e5)]('/services/apexrest'+salesforce_request_1['namespace']+_0x1e382d(0x203),{'mdlId':_0x101935['metadataLogId'],'opType':salesforce_request_type_1[_0x1e382d(0x1ff)]['ERROR'],'message':_0x4b93fa['message']||_0x4b93fa});})[_0x21218e(0x1fd)](_0x214e55=>logger[_0x21218e(0x208)](_0x214e55[_0x21218e(0x21a)])),{'message':_0x21218e(0x1f6)};}async[a101_0x576fd9(0x210)](_0xd4dbe2){const _0x4c4cf3=a101_0x576fd9,_0x415482=(0x0,salesforce_request_1[_0x4c4cf3(0x21e)])(auth_utils_1[_0x4c4cf3(0x20a)][_0x4c4cf3(0x21f)](_0xd4dbe2[_0x4c4cf3(0x1fa)]));return(0x0,deploy_attachment_service_1[_0x4c4cf3(0x210)])(_0xd4dbe2,_0x415482)[_0x4c4cf3(0x1eb)](_0x98e5a9=>{const _0x45e074=_0x4c4cf3;return _0x415482[_0x45e074(0x1e5)](_0x45e074(0x21c)+salesforce_request_1[_0x45e074(0x213)]+_0x45e074(0x203),{'mdlId':_0xd4dbe2[_0x45e074(0x1ed)],'asyncId':_0x98e5a9,'opType':salesforce_request_type_1[_0x45e074(0x1ff)][_0x45e074(0x1f1)]});})[_0x4c4cf3(0x1fd)](_0x4eb9a9=>{const _0x3d4d6c=_0x4c4cf3;return _0x415482[_0x3d4d6c(0x1e5)]('/services/apexrest'+salesforce_request_1[_0x3d4d6c(0x213)]+_0x3d4d6c(0x203),{'mdlId':_0xd4dbe2['metadataLogId'],'opType':salesforce_request_type_1[_0x3d4d6c(0x1ff)]['ERROR'],'message':_0x4eb9a9[_0x3d4d6c(0x21a)]||_0x4eb9a9});})[_0x4c4cf3(0x1fd)](_0x208371=>logger[_0x4c4cf3(0x208)](_0x208371[_0x4c4cf3(0x21a)])),{'message':_0x4c4cf3(0x1f6)};}};__decorate([(0x0,core_1['Post'])('retrieve'),__param(0x0,core_1[a101_0x576fd9(0x20d)]['body']()),__metadata('design:type',Function),__metadata(a101_0x576fd9(0x1ec),[Object]),__metadata(a101_0x576fd9(0x1ea),Promise)],FunctionsController[a101_0x576fd9(0x220)],a101_0x576fd9(0x219),null),__decorate([(0x0,core_1['Post'])(a101_0x576fd9(0x218)),__param(0x0,core_1['param'][a101_0x576fd9(0x1f2)]()),__metadata(a101_0x576fd9(0x217),Function),__metadata(a101_0x576fd9(0x1ec),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a101_0x576fd9(0x220)],a101_0x576fd9(0x202),null),__decorate([(0x0,core_1[a101_0x576fd9(0x214)])(a101_0x576fd9(0x1f0)),__param(0x0,core_1[a101_0x576fd9(0x20d)][a101_0x576fd9(0x1f2)]()),__metadata(a101_0x576fd9(0x217),Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0x576fd9(0x1ea),Promise)],FunctionsController[a101_0x576fd9(0x220)],a101_0x576fd9(0x1f8),null),__decorate([(0x0,core_1['Post'])('deploy-components'),__param(0x0,core_1['param'][a101_0x576fd9(0x1f2)]()),__metadata('design:type',Function),__metadata(a101_0x576fd9(0x1ec),[Object]),__metadata(a101_0x576fd9(0x1ea),Promise)],FunctionsController[a101_0x576fd9(0x220)],a101_0x576fd9(0x210),null),FunctionsController=__decorate([(0x0,core_1['Controller'])(a101_0x576fd9(0x1f3)),(0x0,core_1[a101_0x576fd9(0x221)])('v1')],FunctionsController),exports['FunctionsController']=FunctionsController;