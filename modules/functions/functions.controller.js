const a83_0xde086=a83_0x3343;(function(_0x494b82,_0x21b0a5){const _0x36c3f3=a83_0x3343,_0xa274e6=_0x494b82();while(!![]){try{const _0x168541=parseInt(_0x36c3f3(0x94))/0x1+parseInt(_0x36c3f3(0x9d))/0x2*(parseInt(_0x36c3f3(0x7f))/0x3)+parseInt(_0x36c3f3(0x7e))/0x4*(parseInt(_0x36c3f3(0xa0))/0x5)+parseInt(_0x36c3f3(0xa1))/0x6+parseInt(_0x36c3f3(0x99))/0x7+parseInt(_0x36c3f3(0x8d))/0x8+-parseInt(_0x36c3f3(0x88))/0x9;if(_0x168541===_0x21b0a5)break;else _0xa274e6['push'](_0xa274e6['shift']());}catch(_0x371558){_0xa274e6['push'](_0xa274e6['shift']());}}}(a83_0x1d1f,0x7caa4));const a83_0x19ff46=(function(){let _0x5c5576=!![];return function(_0xa50bf2,_0x316f8e){const _0x5dab0a=_0x5c5576?function(){const _0x9d4ff4=a83_0x3343;if(_0x316f8e){const _0x20aeca=_0x316f8e[_0x9d4ff4(0x80)](_0xa50bf2,arguments);return _0x316f8e=null,_0x20aeca;}}:function(){};return _0x5c5576=![],_0x5dab0a;};}()),a83_0x1c1bfc=a83_0x19ff46(this,function(){const _0x26c2ff=a83_0x3343;return a83_0x1c1bfc[_0x26c2ff(0x9b)]()[_0x26c2ff(0xab)](_0x26c2ff(0x98))[_0x26c2ff(0x9b)]()[_0x26c2ff(0xa2)](a83_0x1c1bfc)[_0x26c2ff(0xab)]('(((.+)+)+)+$');});a83_0x1c1bfc();'use strict';var __decorate=this&&this[a83_0xde086(0xaa)]||function(_0x122ec5,_0x41be48,_0x2b06c2,_0x4fe386){const _0xa656e6=a83_0xde086;var _0x58e323=arguments['length'],_0x1ce52b=_0x58e323<0x3?_0x41be48:_0x4fe386===null?_0x4fe386=Object[_0xa656e6(0x7b)](_0x41be48,_0x2b06c2):_0x4fe386,_0x17588c;if(typeof Reflect===_0xa656e6(0x87)&&typeof Reflect['decorate']===_0xa656e6(0xa8))_0x1ce52b=Reflect['decorate'](_0x122ec5,_0x41be48,_0x2b06c2,_0x4fe386);else{for(var _0x3d79b3=_0x122ec5['length']-0x1;_0x3d79b3>=0x0;_0x3d79b3--)if(_0x17588c=_0x122ec5[_0x3d79b3])_0x1ce52b=(_0x58e323<0x3?_0x17588c(_0x1ce52b):_0x58e323>0x3?_0x17588c(_0x41be48,_0x2b06c2,_0x1ce52b):_0x17588c(_0x41be48,_0x2b06c2))||_0x1ce52b;}return _0x58e323>0x3&&_0x1ce52b&&Object[_0xa656e6(0xa9)](_0x41be48,_0x2b06c2,_0x1ce52b),_0x1ce52b;},__metadata=this&&this[a83_0xde086(0x7a)]||function(_0x423cff,_0x1f8ead){const _0x236baa=a83_0xde086;if(typeof Reflect===_0x236baa(0x87)&&typeof Reflect[_0x236baa(0x90)]===_0x236baa(0xa8))return Reflect[_0x236baa(0x90)](_0x423cff,_0x1f8ead);},__param=this&&this['__param']||function(_0x384061,_0x18da76){return function(_0x2791db,_0x1bb67b){_0x18da76(_0x2791db,_0x1bb67b,_0x384061);};};function a83_0x3343(_0x3a2138,_0x369058){const _0x3fddf7=a83_0x1d1f();return a83_0x3343=function(_0x1c1bfc,_0x19ff46){_0x1c1bfc=_0x1c1bfc-0x77;let _0x1d1fea=_0x3fddf7[_0x1c1bfc];return _0x1d1fea;},a83_0x3343(_0x3a2138,_0x369058);}Object['defineProperty'](exports,a83_0xde086(0x8b),{'value':!![]}),exports[a83_0xde086(0xb6)]=void 0x0;const core_1=require(a83_0xde086(0xb2)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require(a83_0xde086(0x96)),generate_zip_service_1=require(a83_0xde086(0xae)),fetch_test_classes_service_1=require(a83_0xde086(0xb0)),deploy_attachment_service_1=require('./services/deploy-attachment.service'),salesforce_request_1=require(a83_0xde086(0x7d)),auth_utils_1=require('./utils/auth.utils'),logger=new core_1['Logger'](a83_0xde086(0x9c));let FunctionsController=class FunctionsController{async[a83_0xde086(0x85)](_0x24480c){const _0x3dfe01=a83_0xde086,_0x3f3ddc=(0x0,salesforce_request_1[_0x3dfe01(0x95)])(auth_utils_1[_0x3dfe01(0x84)][_0x3dfe01(0x97)](_0x24480c['instanceUrl']));return(0x0,retrieve_zip_service_1[_0x3dfe01(0x85)])(_0x24480c,_0x3f3ddc)[_0x3dfe01(0x92)](()=>{const _0x2bd840=_0x3dfe01;return _0x3f3ddc[_0x2bd840(0xa5)]('/services/apexrest'+salesforce_request_1[_0x2bd840(0x8a)]+_0x2bd840(0x82),{'mdlId':_0x24480c[_0x2bd840(0x91)],'opType':salesforce_request_type_1['OptionType']['SAVE_BACKUP_ZIP']});})[_0x3dfe01(0x89)](_0x580b5b=>{const _0x4b890a=_0x3dfe01;return _0x3f3ddc[_0x4b890a(0xa5)](_0x4b890a(0x77)+salesforce_request_1[_0x4b890a(0x8a)]+'/async',{'mdlId':_0x24480c['metadataLogId'],'opType':salesforce_request_type_1[_0x4b890a(0xb3)][_0x4b890a(0xb4)],'message':_0x580b5b[_0x4b890a(0x7c)]||_0x580b5b});})['catch'](_0x3df0b9=>logger[_0x3dfe01(0x9f)](_0x3df0b9[_0x3dfe01(0x7c)])),{'message':_0x3dfe01(0xaf)};}async[a83_0xde086(0xa7)](_0x181210){const _0x2647e5=a83_0xde086,_0x50dce7=(0x0,salesforce_request_1[_0x2647e5(0x95)])(auth_utils_1[_0x2647e5(0x84)][_0x2647e5(0x97)](_0x181210['instanceUrl']));return(0x0,fetch_test_classes_service_1['fetchTestClasses'])(_0x181210,_0x50dce7)[_0x2647e5(0x92)](()=>{const _0x24a351=_0x2647e5;return _0x50dce7[_0x24a351(0xa5)]('/services/apexrest'+salesforce_request_1['namespace']+_0x24a351(0x82),{'mdlId':_0x181210[_0x24a351(0x91)],'opType':salesforce_request_type_1['OptionType'][_0x24a351(0x79)]});})[_0x2647e5(0x89)](_0x58b387=>{const _0x26f63a=_0x2647e5;return _0x50dce7[_0x26f63a(0xa5)]('/services/apexrest'+salesforce_request_1['namespace']+_0x26f63a(0x82),{'mdlId':_0x181210[_0x26f63a(0x91)],'opType':salesforce_request_type_1['OptionType'][_0x26f63a(0xb4)],'message':_0x58b387[_0x26f63a(0x7c)]||_0x58b387});})[_0x2647e5(0x89)](_0x4b2681=>logger[_0x2647e5(0x9f)](_0x4b2681[_0x2647e5(0x7c)])),{'message':_0x2647e5(0xaf)};}async['generateAndDeployZip'](_0x3675ce){const _0x3828d7=a83_0xde086,_0x51f52f=(0x0,salesforce_request_1[_0x3828d7(0x95)])(auth_utils_1[_0x3828d7(0x84)]['getAuthParameters'](_0x3675ce[_0x3828d7(0x9a)]));return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x3675ce,_0x51f52f)[_0x3828d7(0x92)](_0x2e88ac=>{const _0x39ee35=_0x3828d7;return _0x51f52f[_0x39ee35(0xa5)](_0x39ee35(0x77)+salesforce_request_1[_0x39ee35(0x8a)]+_0x39ee35(0x82),{'mdlId':_0x3675ce[_0x39ee35(0x91)],'opType':salesforce_request_type_1[_0x39ee35(0xb3)][_0x39ee35(0x8e)],'attachment':_0x2e88ac});})[_0x3828d7(0x89)](_0x47393a=>{const _0x961809=_0x3828d7;return _0x51f52f[_0x961809(0xa5)](_0x961809(0x77)+salesforce_request_1[_0x961809(0x8a)]+_0x961809(0x82),{'mdlId':_0x3675ce[_0x961809(0x91)],'opType':salesforce_request_type_1['OptionType'][_0x961809(0xb4)],'message':_0x47393a['message']||_0x47393a});})['catch'](_0x5cf672=>logger['error'](_0x5cf672[_0x3828d7(0x7c)])),{'message':_0x3828d7(0xaf)};}async[a83_0xde086(0xac)](_0x53af2f){const _0x14fe32=a83_0xde086,_0x2c8c5f=(0x0,salesforce_request_1[_0x14fe32(0x95)])(auth_utils_1['AuthUtils'][_0x14fe32(0x97)](_0x53af2f[_0x14fe32(0x9a)]));return(0x0,deploy_attachment_service_1[_0x14fe32(0xac)])(_0x53af2f,_0x2c8c5f)[_0x14fe32(0x92)](_0x2464e0=>{const _0x423a1f=_0x14fe32;return _0x2c8c5f['post'](_0x423a1f(0x77)+salesforce_request_1[_0x423a1f(0x8a)]+'/async',{'mdlId':_0x53af2f[_0x423a1f(0x91)],'asyncId':_0x2464e0,'opType':salesforce_request_type_1[_0x423a1f(0xb3)]['DEPLOY']});})[_0x14fe32(0x89)](_0x2dd11c=>{const _0x42ccdb=_0x14fe32;return _0x2c8c5f[_0x42ccdb(0xa5)](_0x42ccdb(0x77)+salesforce_request_1['namespace']+_0x42ccdb(0x82),{'mdlId':_0x53af2f[_0x42ccdb(0x91)],'opType':salesforce_request_type_1[_0x42ccdb(0xb3)][_0x42ccdb(0xb4)],'message':_0x2dd11c[_0x42ccdb(0x7c)]||_0x2dd11c});})[_0x14fe32(0x89)](_0xb61429=>logger[_0x14fe32(0x9f)](_0xb61429['message'])),{'message':'Job\x20started\x20successfully'};}};__decorate([(0x0,core_1[a83_0xde086(0x86)])(a83_0xde086(0x78)),__param(0x0,core_1[a83_0xde086(0x8f)]['body']()),__metadata(a83_0xde086(0xa6),Function),__metadata(a83_0xde086(0x8c),[Object]),__metadata(a83_0xde086(0x81),Promise)],FunctionsController['prototype'],'retrieveZip',null),__decorate([(0x0,core_1[a83_0xde086(0x86)])(a83_0xde086(0x83)),__param(0x0,core_1[a83_0xde086(0x8f)][a83_0xde086(0x93)]()),__metadata(a83_0xde086(0xa6),Function),__metadata(a83_0xde086(0x8c),[Object]),__metadata(a83_0xde086(0x81),Promise)],FunctionsController['prototype'],'fetchTestClasses',null),__decorate([(0x0,core_1[a83_0xde086(0x86)])('generate-deploy-zip'),__param(0x0,core_1[a83_0xde086(0x8f)]['body']()),__metadata('design:type',Function),__metadata(a83_0xde086(0x8c),[Object]),__metadata(a83_0xde086(0x81),Promise)],FunctionsController[a83_0xde086(0xa4)],a83_0xde086(0x9e),null),__decorate([(0x0,core_1['Post'])(a83_0xde086(0xa3)),__param(0x0,core_1['param'][a83_0xde086(0x93)]()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a83_0xde086(0x81),Promise)],FunctionsController[a83_0xde086(0xa4)],a83_0xde086(0xac),null),FunctionsController=__decorate([(0x0,core_1[a83_0xde086(0xb1)])(a83_0xde086(0xb5)),(0x0,core_1[a83_0xde086(0xad)])('v1')],FunctionsController),exports[a83_0xde086(0xb6)]=FunctionsController;function a83_0x1d1f(){const _0x166658=['functions','FunctionsController','/services/apexrest','retrieve','GET_TESTS','__metadata','getOwnPropertyDescriptor','message','./utils/salesforce-request','182532GmMoqj','264GjKQLd','apply','design:returntype','/async','fetch-test-classes','AuthUtils','retrieveZip','Post','object','27814266iQCvhg','catch','namespace','__esModule','design:paramtypes','2521336LTfkvB','SAVE_DEPLOY_ZIP','param','metadata','metadataLogId','then','body','1019734aWEGwt','createRequest','./services/retrieve-zip.service','getAuthParameters','(((.+)+)+)+$','5228321wlwsWj','instanceUrl','toString','server','4052eTCRhN','generateAndDeployZip','error','45jgUQiQ','5581878FZsmoW','constructor','deploy-components','prototype','post','design:type','fetchTestClasses','function','defineProperty','__decorate','search','deployComponents','Version','./services/generate-zip.service','Job\x20started\x20successfully','./services/fetch-test-classes.service','Controller','../../core','OptionType','ERROR'];a83_0x1d1f=function(){return _0x166658;};return a83_0x1d1f();}