const a101_0x427a11=a101_0x39b4;(function(_0x58467d,_0x376ba1){const _0x433d05=a101_0x39b4,_0x1afe32=_0x58467d();while(!![]){try{const _0x5b4721=parseInt(_0x433d05(0x200))/0x1*(-parseInt(_0x433d05(0x1e7))/0x2)+parseInt(_0x433d05(0x1d2))/0x3+parseInt(_0x433d05(0x1d5))/0x4+parseInt(_0x433d05(0x1ff))/0x5*(parseInt(_0x433d05(0x1df))/0x6)+parseInt(_0x433d05(0x1de))/0x7*(parseInt(_0x433d05(0x1e0))/0x8)+-parseInt(_0x433d05(0x1e2))/0x9+-parseInt(_0x433d05(0x20b))/0xa;if(_0x5b4721===_0x376ba1)break;else _0x1afe32['push'](_0x1afe32['shift']());}catch(_0x33e6ff){_0x1afe32['push'](_0x1afe32['shift']());}}}(a101_0x4852,0x50661));function a101_0x4852(){const _0x5c8653=['message','1078525UHhMzw','1884972fHqueL','24DPrFHC','GET_TESTS','4840047MflIkc','decorate','instanceUrl','AuthManager','error','10514pzwsOu','DEPLOY','retrieveZip','./utils/salesforce-request','Controller','constructor','__decorate','Post','AuthUtils','metadataLogId','design:paramtypes','design:returntype','./services/deploy-attachment.service','OptionType','then','credentials','__esModule','design:type','length','./utils/auth.utils','toString','SAVE_DEPLOY_ZIP','deploy-components','Logger','5dOHOVe','37XItaJO','AxiosInstanceUtils','apply','__param','/async','prototype','param','@flosum/salesforce','defineProperty','/services/apexrest','./types/salesforce-request.type','7363440zctMmT','deployComponents','generate-deploy-zip','fetchTestClasses','catch','generateAndDeployZip','./services/retrieve-zip.service','ERROR','create','FunctionsController','./services/generate-zip.service','metadata','object','1235052fdbfkf','body','namespace','2439512jIPsNE','search','post','Job\x20started\x20successfully','createRequest','function','__metadata','getAuthParameters'];a101_0x4852=function(){return _0x5c8653;};return a101_0x4852();}const a101_0x3b902f=(function(){let _0x3dbd8d=!![];return function(_0x422726,_0x1d51c7){const _0x48a0d0=_0x3dbd8d?function(){const _0x66447a=a101_0x39b4;if(_0x1d51c7){const _0x5e385a=_0x1d51c7[_0x66447a(0x202)](_0x422726,arguments);return _0x1d51c7=null,_0x5e385a;}}:function(){};return _0x3dbd8d=![],_0x48a0d0;};}()),a101_0x51b0d4=a101_0x3b902f(this,function(){const _0x1e16a3=a101_0x39b4;return a101_0x51b0d4[_0x1e16a3(0x1fb)]()[_0x1e16a3(0x1d6)]('(((.+)+)+)+$')['toString']()[_0x1e16a3(0x1ec)](a101_0x51b0d4)[_0x1e16a3(0x1d6)]('(((.+)+)+)+$');});a101_0x51b0d4();function a101_0x39b4(_0x1739da,_0x31ddb8){const _0x18dc49=a101_0x4852();return a101_0x39b4=function(_0x51b0d4,_0x3b902f){_0x51b0d4=_0x51b0d4-0x1cf;let _0x485229=_0x18dc49[_0x51b0d4];return _0x485229;},a101_0x39b4(_0x1739da,_0x31ddb8);}'use strict';var __decorate=this&&this[a101_0x427a11(0x1ed)]||function(_0x146fe5,_0x4765ce,_0xa74fb4,_0xe22632){const _0x2e9532=a101_0x427a11;var _0x3677e5=arguments[_0x2e9532(0x1f9)],_0x409451=_0x3677e5<0x3?_0x4765ce:_0xe22632===null?_0xe22632=Object['getOwnPropertyDescriptor'](_0x4765ce,_0xa74fb4):_0xe22632,_0x349d87;if(typeof Reflect===_0x2e9532(0x1d1)&&typeof Reflect[_0x2e9532(0x1e3)]==='function')_0x409451=Reflect[_0x2e9532(0x1e3)](_0x146fe5,_0x4765ce,_0xa74fb4,_0xe22632);else{for(var _0x2941f0=_0x146fe5['length']-0x1;_0x2941f0>=0x0;_0x2941f0--)if(_0x349d87=_0x146fe5[_0x2941f0])_0x409451=(_0x3677e5<0x3?_0x349d87(_0x409451):_0x3677e5>0x3?_0x349d87(_0x4765ce,_0xa74fb4,_0x409451):_0x349d87(_0x4765ce,_0xa74fb4))||_0x409451;}return _0x3677e5>0x3&&_0x409451&&Object[_0x2e9532(0x208)](_0x4765ce,_0xa74fb4,_0x409451),_0x409451;},__metadata=this&&this[a101_0x427a11(0x1db)]||function(_0x1655b1,_0x3c12f4){const _0x472a0b=a101_0x427a11;if(typeof Reflect==='object'&&typeof Reflect[_0x472a0b(0x1d0)]===_0x472a0b(0x1da))return Reflect[_0x472a0b(0x1d0)](_0x1655b1,_0x3c12f4);},__param=this&&this[a101_0x427a11(0x203)]||function(_0x3f749a,_0x26331a){return function(_0x22f932,_0x14d330){_0x26331a(_0x22f932,_0x14d330,_0x3f749a);};};Object[a101_0x427a11(0x208)](exports,a101_0x427a11(0x1f7),{'value':!![]}),exports[a101_0x427a11(0x214)]=void 0x0;const core_1=require('../../core'),salesforce_request_type_1=require(a101_0x427a11(0x20a)),retrieve_zip_service_1=require(a101_0x427a11(0x211)),generate_zip_service_1=require(a101_0x427a11(0x1cf)),fetch_test_classes_service_1=require('./services/fetch-test-classes.service'),deploy_attachment_service_1=require(a101_0x427a11(0x1f3)),salesforce_request_1=require(a101_0x427a11(0x1ea)),auth_utils_1=require(a101_0x427a11(0x1fa)),auth_manager_1=require('../shared/managers/auth.manager'),salesforce_1=require(a101_0x427a11(0x207)),logger=new core_1[(a101_0x427a11(0x1fe))]('server');let FunctionsController=class FunctionsController{async[a101_0x427a11(0x1e9)](_0x45d46c){const _0x131bd3=a101_0x427a11,_0x91a6d7=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x131bd3(0x1ef)][_0x131bd3(0x1dc)](_0x45d46c[_0x131bd3(0x1e4)]));return(0x0,retrieve_zip_service_1[_0x131bd3(0x1e9)])(_0x45d46c,_0x91a6d7)[_0x131bd3(0x1f5)](()=>{const _0x405bea=_0x131bd3;return _0x91a6d7[_0x405bea(0x1d7)](_0x405bea(0x209)+salesforce_request_1[_0x405bea(0x1d4)]+_0x405bea(0x204),{'mdlId':_0x45d46c[_0x405bea(0x1f0)],'opType':salesforce_request_type_1['OptionType']['SAVE_BACKUP_ZIP']});})['catch'](_0x30f605=>{const _0x4a9864=_0x131bd3;return _0x91a6d7['post']('/services/apexrest'+salesforce_request_1[_0x4a9864(0x1d4)]+'/async',{'mdlId':_0x45d46c[_0x4a9864(0x1f0)],'opType':salesforce_request_type_1[_0x4a9864(0x1f4)]['ERROR'],'message':_0x30f605['message']||_0x30f605});})[_0x131bd3(0x20f)](_0x28cc0b=>logger[_0x131bd3(0x1e6)](_0x28cc0b['message'])),{'message':_0x131bd3(0x1d8)};}async['fetchTestClasses'](_0x4a2116){const _0x1d1fe5=a101_0x427a11,_0x37baa6=(0x0,salesforce_request_1[_0x1d1fe5(0x1d9)])(auth_utils_1[_0x1d1fe5(0x1ef)][_0x1d1fe5(0x1dc)](_0x4a2116[_0x1d1fe5(0x1e4)]));return(0x0,fetch_test_classes_service_1[_0x1d1fe5(0x20e)])(_0x4a2116,_0x37baa6)[_0x1d1fe5(0x1f5)](()=>{const _0x3e273c=_0x1d1fe5;return _0x37baa6[_0x3e273c(0x1d7)](_0x3e273c(0x209)+salesforce_request_1[_0x3e273c(0x1d4)]+_0x3e273c(0x204),{'mdlId':_0x4a2116[_0x3e273c(0x1f0)],'opType':salesforce_request_type_1[_0x3e273c(0x1f4)][_0x3e273c(0x1e1)]});})['catch'](_0x239959=>{const _0x353493=_0x1d1fe5;return _0x37baa6[_0x353493(0x1d7)]('/services/apexrest'+salesforce_request_1[_0x353493(0x1d4)]+_0x353493(0x204),{'mdlId':_0x4a2116['metadataLogId'],'opType':salesforce_request_type_1[_0x353493(0x1f4)]['ERROR'],'message':_0x239959[_0x353493(0x1dd)]||_0x239959});})['catch'](_0x5658de=>logger[_0x1d1fe5(0x1e6)](_0x5658de[_0x1d1fe5(0x1dd)])),{'message':_0x1d1fe5(0x1d8)};}async[a101_0x427a11(0x210)](_0x3f4189){const _0x36a387=a101_0x427a11,_0x2a602a=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x36a387(0x1ef)]['getAuthParameters'](_0x3f4189['instanceUrl'])),_0x2c589b=await salesforce_1[_0x36a387(0x201)][_0x36a387(0x213)](new auth_manager_1[(_0x36a387(0x1e5))](_0x3f4189[_0x36a387(0x1f6)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0x36a387(0x210)])(_0x3f4189,_0x2a602a,_0x2c589b)[_0x36a387(0x1f5)](_0x4832f1=>{const _0x22d6a8=_0x36a387;return _0x2a602a[_0x22d6a8(0x1d7)](_0x22d6a8(0x209)+salesforce_request_1[_0x22d6a8(0x1d4)]+'/async',{'mdlId':_0x3f4189[_0x22d6a8(0x1f0)],'opType':salesforce_request_type_1[_0x22d6a8(0x1f4)][_0x22d6a8(0x1fc)],'attachment':_0x4832f1});})[_0x36a387(0x20f)](_0x53932e=>{const _0x7e1d03=_0x36a387;return _0x2a602a[_0x7e1d03(0x1d7)]('/services/apexrest'+salesforce_request_1[_0x7e1d03(0x1d4)]+_0x7e1d03(0x204),{'mdlId':_0x3f4189[_0x7e1d03(0x1f0)],'opType':salesforce_request_type_1['OptionType'][_0x7e1d03(0x212)],'message':_0x53932e['message']||_0x53932e});})[_0x36a387(0x20f)](_0xd32f73=>logger[_0x36a387(0x1e6)](_0xd32f73[_0x36a387(0x1dd)])),{'message':_0x36a387(0x1d8)};}async[a101_0x427a11(0x20c)](_0x28a86f){const _0x7e2bf9=a101_0x427a11,_0x168b12=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x7e2bf9(0x1ef)]['getAuthParameters'](_0x28a86f[_0x7e2bf9(0x1e4)]));return(0x0,deploy_attachment_service_1[_0x7e2bf9(0x20c)])(_0x28a86f,_0x168b12)['then'](_0x2365e7=>{const _0x22fe53=_0x7e2bf9;return _0x168b12['post']('/services/apexrest'+salesforce_request_1[_0x22fe53(0x1d4)]+_0x22fe53(0x204),{'mdlId':_0x28a86f[_0x22fe53(0x1f0)],'asyncId':_0x2365e7,'opType':salesforce_request_type_1['OptionType'][_0x22fe53(0x1e8)]});})[_0x7e2bf9(0x20f)](_0x5e08da=>{const _0x5dc2a8=_0x7e2bf9;return _0x168b12[_0x5dc2a8(0x1d7)](_0x5dc2a8(0x209)+salesforce_request_1[_0x5dc2a8(0x1d4)]+_0x5dc2a8(0x204),{'mdlId':_0x28a86f[_0x5dc2a8(0x1f0)],'opType':salesforce_request_type_1[_0x5dc2a8(0x1f4)]['ERROR'],'message':_0x5e08da[_0x5dc2a8(0x1dd)]||_0x5e08da});})[_0x7e2bf9(0x20f)](_0x3d84d4=>logger[_0x7e2bf9(0x1e6)](_0x3d84d4[_0x7e2bf9(0x1dd)])),{'message':'Job\x20started\x20successfully'};}};__decorate([(0x0,core_1['Post'])('retrieve'),__param(0x0,core_1[a101_0x427a11(0x206)][a101_0x427a11(0x1d3)]()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0x427a11(0x1f2),Promise)],FunctionsController['prototype'],a101_0x427a11(0x1e9),null),__decorate([(0x0,core_1[a101_0x427a11(0x1ee)])('fetch-test-classes'),__param(0x0,core_1['param'][a101_0x427a11(0x1d3)]()),__metadata(a101_0x427a11(0x1f8),Function),__metadata(a101_0x427a11(0x1f1),[Object]),__metadata(a101_0x427a11(0x1f2),Promise)],FunctionsController[a101_0x427a11(0x205)],a101_0x427a11(0x20e),null),__decorate([(0x0,core_1[a101_0x427a11(0x1ee)])(a101_0x427a11(0x20d)),__param(0x0,core_1['param'][a101_0x427a11(0x1d3)]()),__metadata(a101_0x427a11(0x1f8),Function),__metadata(a101_0x427a11(0x1f1),[Object]),__metadata(a101_0x427a11(0x1f2),Promise)],FunctionsController[a101_0x427a11(0x205)],'generateAndDeployZip',null),__decorate([(0x0,core_1[a101_0x427a11(0x1ee)])(a101_0x427a11(0x1fd)),__param(0x0,core_1['param'][a101_0x427a11(0x1d3)]()),__metadata(a101_0x427a11(0x1f8),Function),__metadata(a101_0x427a11(0x1f1),[Object]),__metadata(a101_0x427a11(0x1f2),Promise)],FunctionsController[a101_0x427a11(0x205)],a101_0x427a11(0x20c),null),FunctionsController=__decorate([(0x0,core_1[a101_0x427a11(0x1eb)])('functions'),(0x0,core_1['Version'])('v1')],FunctionsController),exports[a101_0x427a11(0x214)]=FunctionsController;