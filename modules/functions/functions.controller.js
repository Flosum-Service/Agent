const a101_0x4cb422=a101_0x3aa8;(function(_0x47a842,_0xaa2dfe){const _0x41e830=a101_0x3aa8,_0x1945dd=_0x47a842();while(!![]){try{const _0x322ee1=parseInt(_0x41e830(0x209))/0x1*(-parseInt(_0x41e830(0x1cb))/0x2)+parseInt(_0x41e830(0x1fd))/0x3*(-parseInt(_0x41e830(0x1fe))/0x4)+parseInt(_0x41e830(0x1e5))/0x5*(-parseInt(_0x41e830(0x1d7))/0x6)+-parseInt(_0x41e830(0x1e2))/0x7*(parseInt(_0x41e830(0x1d4))/0x8)+parseInt(_0x41e830(0x1f5))/0x9+parseInt(_0x41e830(0x1e9))/0xa+parseInt(_0x41e830(0x1d9))/0xb;if(_0x322ee1===_0xaa2dfe)break;else _0x1945dd['push'](_0x1945dd['shift']());}catch(_0x36711d){_0x1945dd['push'](_0x1945dd['shift']());}}}(a101_0x3741,0x4829e));const a101_0x2839d3=(function(){let _0x855db1=!![];return function(_0x30b344,_0x5350ff){const _0x5a0f69=_0x855db1?function(){const _0x1a3460=a101_0x3aa8;if(_0x5350ff){const _0x7f6c9c=_0x5350ff[_0x1a3460(0x1f9)](_0x30b344,arguments);return _0x5350ff=null,_0x7f6c9c;}}:function(){};return _0x855db1=![],_0x5a0f69;};}()),a101_0x2f15c3=a101_0x2839d3(this,function(){const _0x2a626a=a101_0x3aa8;return a101_0x2f15c3[_0x2a626a(0x1d3)]()[_0x2a626a(0x1de)]('(((.+)+)+)+$')[_0x2a626a(0x1d3)]()[_0x2a626a(0x1d8)](a101_0x2f15c3)['search'](_0x2a626a(0x1e8));});a101_0x2f15c3();'use strict';function a101_0x3741(){const _0x3a328e=['254DQcItF','length','AuthManager','prototype','generateAndDeployZip','Logger','design:paramtypes','error','toString','24rcDHsL','./services/fetch-test-classes.service','createRequest','6BSMoJB','constructor','14174292QFulhK','FunctionsController','credentials','GET_TESTS','Job\x20started\x20successfully','search','/async','param','SAVE_DEPLOY_ZIP','1022035TLLYQb','metadata','./services/retrieve-zip.service','1537715VrZJhy','design:returntype','then','(((.+)+)+)+$','1905200uThQIa','metadataLogId','create','catch','object','fetchTestClasses','retrieveZip','./services/generate-zip.service','__decorate','namespace','AuthUtils','post','3791871znqJWj','./services/deploy-attachment.service','../../core','message','apply','body','design:type','instanceUrl','6gwCLUo','691112MbxWKN','../shared/managers/auth.manager','deployComponents','DEPLOY','/services/apexrest','Version','ERROR','getAuthParameters','server','Post','AxiosInstanceUtils','4045rtUFTW','fetch-test-classes','decorate','OptionType','function','functions'];a101_0x3741=function(){return _0x3a328e;};return a101_0x3741();}var __decorate=this&&this[a101_0x4cb422(0x1f1)]||function(_0x11fa4c,_0x358c45,_0x14c8ad,_0x28dbe0){const _0x3bb4e1=a101_0x4cb422;var _0x45e4ca=arguments[_0x3bb4e1(0x1cc)],_0x442393=_0x45e4ca<0x3?_0x358c45:_0x28dbe0===null?_0x28dbe0=Object['getOwnPropertyDescriptor'](_0x358c45,_0x14c8ad):_0x28dbe0,_0x4e42d3;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x3bb4e1(0x1c9))_0x442393=Reflect[_0x3bb4e1(0x1c7)](_0x11fa4c,_0x358c45,_0x14c8ad,_0x28dbe0);else{for(var _0x4a87bb=_0x11fa4c[_0x3bb4e1(0x1cc)]-0x1;_0x4a87bb>=0x0;_0x4a87bb--)if(_0x4e42d3=_0x11fa4c[_0x4a87bb])_0x442393=(_0x45e4ca<0x3?_0x4e42d3(_0x442393):_0x45e4ca>0x3?_0x4e42d3(_0x358c45,_0x14c8ad,_0x442393):_0x4e42d3(_0x358c45,_0x14c8ad))||_0x442393;}return _0x45e4ca>0x3&&_0x442393&&Object['defineProperty'](_0x358c45,_0x14c8ad,_0x442393),_0x442393;},__metadata=this&&this['__metadata']||function(_0x474bf8,_0x19b212){const _0x338ecf=a101_0x4cb422;if(typeof Reflect===_0x338ecf(0x1ed)&&typeof Reflect[_0x338ecf(0x1e3)]===_0x338ecf(0x1c9))return Reflect['metadata'](_0x474bf8,_0x19b212);},__param=this&&this['__param']||function(_0x5dd5cd,_0x5b5aa7){return function(_0xeffc3,_0x45e87d){_0x5b5aa7(_0xeffc3,_0x45e87d,_0x5dd5cd);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a101_0x4cb422(0x1da)]=void 0x0;const core_1=require(a101_0x4cb422(0x1f7)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require(a101_0x4cb422(0x1e4)),generate_zip_service_1=require(a101_0x4cb422(0x1f0)),fetch_test_classes_service_1=require(a101_0x4cb422(0x1d5)),deploy_attachment_service_1=require(a101_0x4cb422(0x1f6)),salesforce_request_1=require('./utils/salesforce-request'),auth_utils_1=require('./utils/auth.utils'),auth_manager_1=require(a101_0x4cb422(0x1ff)),salesforce_1=require('@flosum/salesforce'),logger=new core_1[(a101_0x4cb422(0x1d0))](a101_0x4cb422(0x206));let FunctionsController=class FunctionsController{async[a101_0x4cb422(0x1ef)](_0x2d1faa){const _0x5b4fda=a101_0x4cb422,_0x4922d6=(0x0,salesforce_request_1[_0x5b4fda(0x1d6)])(auth_utils_1['AuthUtils']['getAuthParameters'](_0x2d1faa[_0x5b4fda(0x1fc)]));return(0x0,retrieve_zip_service_1[_0x5b4fda(0x1ef)])(_0x2d1faa,_0x4922d6)[_0x5b4fda(0x1e7)](()=>{const _0x1821e0=_0x5b4fda;return _0x4922d6[_0x1821e0(0x1f4)]('/services/apexrest'+salesforce_request_1[_0x1821e0(0x1f2)]+_0x1821e0(0x1df),{'mdlId':_0x2d1faa[_0x1821e0(0x1ea)],'opType':salesforce_request_type_1[_0x1821e0(0x1c8)]['SAVE_BACKUP_ZIP']});})['catch'](_0x1be15d=>{const _0x451fbb=_0x5b4fda;return _0x4922d6[_0x451fbb(0x1f4)](_0x451fbb(0x202)+salesforce_request_1['namespace']+_0x451fbb(0x1df),{'mdlId':_0x2d1faa[_0x451fbb(0x1ea)],'opType':salesforce_request_type_1[_0x451fbb(0x1c8)]['ERROR'],'message':_0x1be15d[_0x451fbb(0x1f8)]||_0x1be15d});})[_0x5b4fda(0x1ec)](_0x14aad1=>logger['error'](_0x14aad1[_0x5b4fda(0x1f8)])),{'message':_0x5b4fda(0x1dd)};}async['fetchTestClasses'](_0x4eff57){const _0x349f4d=a101_0x4cb422,_0x1d0a28=(0x0,salesforce_request_1[_0x349f4d(0x1d6)])(auth_utils_1[_0x349f4d(0x1f3)][_0x349f4d(0x205)](_0x4eff57['instanceUrl']));return(0x0,fetch_test_classes_service_1[_0x349f4d(0x1ee)])(_0x4eff57,_0x1d0a28)['then'](()=>{const _0x5ceb59=_0x349f4d;return _0x1d0a28[_0x5ceb59(0x1f4)]('/services/apexrest'+salesforce_request_1['namespace']+'/async',{'mdlId':_0x4eff57[_0x5ceb59(0x1ea)],'opType':salesforce_request_type_1['OptionType'][_0x5ceb59(0x1dc)]});})[_0x349f4d(0x1ec)](_0x4afa81=>{const _0x5be6e2=_0x349f4d;return _0x1d0a28['post']('/services/apexrest'+salesforce_request_1[_0x5be6e2(0x1f2)]+_0x5be6e2(0x1df),{'mdlId':_0x4eff57[_0x5be6e2(0x1ea)],'opType':salesforce_request_type_1[_0x5be6e2(0x1c8)]['ERROR'],'message':_0x4afa81[_0x5be6e2(0x1f8)]||_0x4afa81});})[_0x349f4d(0x1ec)](_0x2efc32=>logger[_0x349f4d(0x1d2)](_0x2efc32[_0x349f4d(0x1f8)])),{'message':'Job\x20started\x20successfully'};}async[a101_0x4cb422(0x1cf)](_0x1f6faf){const _0xfcc41b=a101_0x4cb422,_0x21ad8f=(0x0,salesforce_request_1['createRequest'])(auth_utils_1['AuthUtils']['getAuthParameters'](_0x1f6faf[_0xfcc41b(0x1fc)])),_0x137b80=await salesforce_1[_0xfcc41b(0x208)][_0xfcc41b(0x1eb)](new auth_manager_1[(_0xfcc41b(0x1cd))](_0x1f6faf[_0xfcc41b(0x1db)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x1f6faf,_0x21ad8f,_0x137b80)[_0xfcc41b(0x1e7)](_0x120127=>{const _0x382c78=_0xfcc41b;return _0x21ad8f[_0x382c78(0x1f4)](_0x382c78(0x202)+salesforce_request_1[_0x382c78(0x1f2)]+_0x382c78(0x1df),{'mdlId':_0x1f6faf[_0x382c78(0x1ea)],'opType':salesforce_request_type_1[_0x382c78(0x1c8)][_0x382c78(0x1e1)],'attachment':_0x120127});})[_0xfcc41b(0x1ec)](_0x21fae9=>{const _0x47bf23=_0xfcc41b;return _0x21ad8f[_0x47bf23(0x1f4)](_0x47bf23(0x202)+salesforce_request_1[_0x47bf23(0x1f2)]+_0x47bf23(0x1df),{'mdlId':_0x1f6faf[_0x47bf23(0x1ea)],'opType':salesforce_request_type_1[_0x47bf23(0x1c8)][_0x47bf23(0x204)],'message':_0x21fae9[_0x47bf23(0x1f8)]||_0x21fae9});})[_0xfcc41b(0x1ec)](_0x255e5a=>logger['error'](_0x255e5a[_0xfcc41b(0x1f8)])),{'message':_0xfcc41b(0x1dd)};}async[a101_0x4cb422(0x200)](_0x1a7c20){const _0x7dffbc=a101_0x4cb422,_0x57ad74=(0x0,salesforce_request_1['createRequest'])(auth_utils_1['AuthUtils'][_0x7dffbc(0x205)](_0x1a7c20[_0x7dffbc(0x1fc)]));return(0x0,deploy_attachment_service_1['deployComponents'])(_0x1a7c20,_0x57ad74)[_0x7dffbc(0x1e7)](_0x4d208a=>{const _0x1724d6=_0x7dffbc;return _0x57ad74['post'](_0x1724d6(0x202)+salesforce_request_1[_0x1724d6(0x1f2)]+_0x1724d6(0x1df),{'mdlId':_0x1a7c20[_0x1724d6(0x1ea)],'asyncId':_0x4d208a,'opType':salesforce_request_type_1[_0x1724d6(0x1c8)][_0x1724d6(0x201)]});})[_0x7dffbc(0x1ec)](_0x4a5a8a=>{const _0xc225e6=_0x7dffbc;return _0x57ad74[_0xc225e6(0x1f4)](_0xc225e6(0x202)+salesforce_request_1[_0xc225e6(0x1f2)]+_0xc225e6(0x1df),{'mdlId':_0x1a7c20['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0xc225e6(0x204)],'message':_0x4a5a8a[_0xc225e6(0x1f8)]||_0x4a5a8a});})[_0x7dffbc(0x1ec)](_0x4f6407=>logger['error'](_0x4f6407[_0x7dffbc(0x1f8)])),{'message':_0x7dffbc(0x1dd)};}};function a101_0x3aa8(_0x446509,_0x25914){const _0x32b102=a101_0x3741();return a101_0x3aa8=function(_0x2f15c3,_0x2839d3){_0x2f15c3=_0x2f15c3-0x1c7;let _0x374179=_0x32b102[_0x2f15c3];return _0x374179;},a101_0x3aa8(_0x446509,_0x25914);}__decorate([(0x0,core_1['Post'])('retrieve'),__param(0x0,core_1[a101_0x4cb422(0x1e0)][a101_0x4cb422(0x1fa)]()),__metadata('design:type',Function),__metadata(a101_0x4cb422(0x1d1),[Object]),__metadata(a101_0x4cb422(0x1e6),Promise)],FunctionsController[a101_0x4cb422(0x1ce)],a101_0x4cb422(0x1ef),null),__decorate([(0x0,core_1[a101_0x4cb422(0x207)])(a101_0x4cb422(0x20a)),__param(0x0,core_1['param'][a101_0x4cb422(0x1fa)]()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],FunctionsController['prototype'],a101_0x4cb422(0x1ee),null),__decorate([(0x0,core_1[a101_0x4cb422(0x207)])('generate-deploy-zip'),__param(0x0,core_1[a101_0x4cb422(0x1e0)][a101_0x4cb422(0x1fa)]()),__metadata('design:type',Function),__metadata(a101_0x4cb422(0x1d1),[Object]),__metadata(a101_0x4cb422(0x1e6),Promise)],FunctionsController[a101_0x4cb422(0x1ce)],'generateAndDeployZip',null),__decorate([(0x0,core_1[a101_0x4cb422(0x207)])('deploy-components'),__param(0x0,core_1[a101_0x4cb422(0x1e0)][a101_0x4cb422(0x1fa)]()),__metadata(a101_0x4cb422(0x1fb),Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0x4cb422(0x1e6),Promise)],FunctionsController[a101_0x4cb422(0x1ce)],a101_0x4cb422(0x200),null),FunctionsController=__decorate([(0x0,core_1['Controller'])(a101_0x4cb422(0x1ca)),(0x0,core_1[a101_0x4cb422(0x203)])('v1')],FunctionsController),exports[a101_0x4cb422(0x1da)]=FunctionsController;