const a84_0x1c6cd9=a84_0x5a72;function a84_0x5a72(_0x4ffea3,_0x5e743d){const _0x49b88d=a84_0x548e();return a84_0x5a72=function(_0x64cbc4,_0x3843e3){_0x64cbc4=_0x64cbc4-0x19d;let _0x548e9f=_0x49b88d[_0x64cbc4];return _0x548e9f;},a84_0x5a72(_0x4ffea3,_0x5e743d);}(function(_0x5ea731,_0x5a8a65){const _0x24a024=a84_0x5a72,_0x49fb1e=_0x5ea731();while(!![]){try{const _0x5c3255=-parseInt(_0x24a024(0x1dd))/0x1*(parseInt(_0x24a024(0x1d1))/0x2)+parseInt(_0x24a024(0x1cf))/0x3+parseInt(_0x24a024(0x1ae))/0x4*(parseInt(_0x24a024(0x1d2))/0x5)+parseInt(_0x24a024(0x1c7))/0x6+-parseInt(_0x24a024(0x1a7))/0x7*(-parseInt(_0x24a024(0x1d8))/0x8)+-parseInt(_0x24a024(0x1d0))/0x9+parseInt(_0x24a024(0x19f))/0xa;if(_0x5c3255===_0x5a8a65)break;else _0x49fb1e['push'](_0x49fb1e['shift']());}catch(_0x33acf6){_0x49fb1e['push'](_0x49fb1e['shift']());}}}(a84_0x548e,0x62f9a));const a84_0x3843e3=(function(){let _0x208f08=!![];return function(_0x35e275,_0x2ef2fc){const _0x1af960=_0x208f08?function(){const _0x3ceb3b=a84_0x5a72;if(_0x2ef2fc){const _0x4343bd=_0x2ef2fc[_0x3ceb3b(0x1b4)](_0x35e275,arguments);return _0x2ef2fc=null,_0x4343bd;}}:function(){};return _0x208f08=![],_0x1af960;};}()),a84_0x64cbc4=a84_0x3843e3(this,function(){const _0x2fabfe=a84_0x5a72;return a84_0x64cbc4[_0x2fabfe(0x1e1)]()[_0x2fabfe(0x1ca)]('(((.+)+)+)+$')[_0x2fabfe(0x1e1)]()[_0x2fabfe(0x19e)](a84_0x64cbc4)[_0x2fabfe(0x1ca)](_0x2fabfe(0x1b2));});a84_0x64cbc4();'use strict';var __decorate=this&&this[a84_0x1c6cd9(0x1a1)]||function(_0x478fb3,_0x2992be,_0x4f1768,_0x37af09){const _0x5dc0ad=a84_0x1c6cd9;var _0x4cbe97=arguments[_0x5dc0ad(0x1ba)],_0x47cebe=_0x4cbe97<0x3?_0x2992be:_0x37af09===null?_0x37af09=Object[_0x5dc0ad(0x1ce)](_0x2992be,_0x4f1768):_0x37af09,_0x49166c;if(typeof Reflect===_0x5dc0ad(0x1ac)&&typeof Reflect['decorate']===_0x5dc0ad(0x1aa))_0x47cebe=Reflect[_0x5dc0ad(0x1d9)](_0x478fb3,_0x2992be,_0x4f1768,_0x37af09);else{for(var _0x187448=_0x478fb3[_0x5dc0ad(0x1ba)]-0x1;_0x187448>=0x0;_0x187448--)if(_0x49166c=_0x478fb3[_0x187448])_0x47cebe=(_0x4cbe97<0x3?_0x49166c(_0x47cebe):_0x4cbe97>0x3?_0x49166c(_0x2992be,_0x4f1768,_0x47cebe):_0x49166c(_0x2992be,_0x4f1768))||_0x47cebe;}return _0x4cbe97>0x3&&_0x47cebe&&Object[_0x5dc0ad(0x19d)](_0x2992be,_0x4f1768,_0x47cebe),_0x47cebe;},__metadata=this&&this[a84_0x1c6cd9(0x1a5)]||function(_0x430f8f,_0x5b23e6){const _0x4b0391=a84_0x1c6cd9;if(typeof Reflect===_0x4b0391(0x1ac)&&typeof Reflect['metadata']===_0x4b0391(0x1aa))return Reflect[_0x4b0391(0x1c6)](_0x430f8f,_0x5b23e6);},__param=this&&this['__param']||function(_0x3207b9,_0x4dc607){return function(_0x1481dd,_0x2d8a9f){_0x4dc607(_0x1481dd,_0x2d8a9f,_0x3207b9);};};Object['defineProperty'](exports,a84_0x1c6cd9(0x1df),{'value':!![]}),exports[a84_0x1c6cd9(0x1b0)]=void 0x0;const core_1=require(a84_0x1c6cd9(0x1b5)),salesforce_request_type_1=require(a84_0x1c6cd9(0x1cd)),retrieve_zip_service_1=require(a84_0x1c6cd9(0x1b9)),generate_zip_service_1=require('./services/generate-zip.service'),fetch_test_classes_service_1=require(a84_0x1c6cd9(0x1b3)),deploy_attachment_service_1=require(a84_0x1c6cd9(0x1cb)),salesforce_request_1=require(a84_0x1c6cd9(0x1ab)),auth_utils_1=require(a84_0x1c6cd9(0x1de)),auth_manager_1=require(a84_0x1c6cd9(0x1c1)),salesforce_1=require('@flosum/salesforce'),logger=new core_1['Logger']('server');let FunctionsController=class FunctionsController{async[a84_0x1c6cd9(0x1c0)](_0x87e4bc){const _0x31e1c6=a84_0x1c6cd9,_0x40cdba=(0x0,salesforce_request_1[_0x31e1c6(0x1b7)])(auth_utils_1[_0x31e1c6(0x1cc)][_0x31e1c6(0x1c9)](_0x87e4bc[_0x31e1c6(0x1d5)]));return(0x0,retrieve_zip_service_1['retrieveZip'])(_0x87e4bc,_0x40cdba)[_0x31e1c6(0x1c4)](()=>{const _0x25bf2d=_0x31e1c6;return _0x40cdba[_0x25bf2d(0x1d6)](_0x25bf2d(0x1da)+salesforce_request_1[_0x25bf2d(0x1bf)]+_0x25bf2d(0x1a3),{'mdlId':_0x87e4bc['metadataLogId'],'opType':salesforce_request_type_1[_0x25bf2d(0x1a0)][_0x25bf2d(0x1ad)]});})[_0x31e1c6(0x1db)](_0x45f1b3=>{const _0x2f0343=_0x31e1c6;return _0x40cdba['post']('/services/apexrest'+salesforce_request_1[_0x2f0343(0x1bf)]+'/async',{'mdlId':_0x87e4bc['metadataLogId'],'opType':salesforce_request_type_1[_0x2f0343(0x1a0)]['ERROR'],'message':_0x45f1b3[_0x2f0343(0x1c8)]||_0x45f1b3});})[_0x31e1c6(0x1db)](_0x32bbdc=>logger['error'](_0x32bbdc[_0x31e1c6(0x1c8)])),{'message':_0x31e1c6(0x1b8)};}async[a84_0x1c6cd9(0x1b1)](_0x2b0d76){const _0x3e2d16=a84_0x1c6cd9,_0x32d5f5=(0x0,salesforce_request_1[_0x3e2d16(0x1b7)])(auth_utils_1[_0x3e2d16(0x1cc)][_0x3e2d16(0x1c9)](_0x2b0d76['instanceUrl']));return(0x0,fetch_test_classes_service_1[_0x3e2d16(0x1b1)])(_0x2b0d76,_0x32d5f5)[_0x3e2d16(0x1c4)](()=>{const _0x5c87e8=_0x3e2d16;return _0x32d5f5['post'](_0x5c87e8(0x1da)+salesforce_request_1[_0x5c87e8(0x1bf)]+_0x5c87e8(0x1a3),{'mdlId':_0x2b0d76[_0x5c87e8(0x1c2)],'opType':salesforce_request_type_1[_0x5c87e8(0x1a0)][_0x5c87e8(0x1bd)]});})['catch'](_0x539a1f=>{const _0x4fcc8c=_0x3e2d16;return _0x32d5f5['post'](_0x4fcc8c(0x1da)+salesforce_request_1[_0x4fcc8c(0x1bf)]+_0x4fcc8c(0x1a3),{'mdlId':_0x2b0d76['metadataLogId'],'opType':salesforce_request_type_1[_0x4fcc8c(0x1a0)][_0x4fcc8c(0x1a8)],'message':_0x539a1f['message']||_0x539a1f});})[_0x3e2d16(0x1db)](_0x314cf8=>logger[_0x3e2d16(0x1e0)](_0x314cf8[_0x3e2d16(0x1c8)])),{'message':_0x3e2d16(0x1b8)};}async[a84_0x1c6cd9(0x1c3)](_0x366ace){const _0x224760=a84_0x1c6cd9,_0x345843=(0x0,salesforce_request_1[_0x224760(0x1b7)])(auth_utils_1[_0x224760(0x1cc)][_0x224760(0x1c9)](_0x366ace[_0x224760(0x1d5)])),_0xd31a2e=await salesforce_1['AxiosInstanceUtils']['create'](new auth_manager_1[(_0x224760(0x1af))](_0x366ace[_0x224760(0x1dc)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x366ace,_0x345843,_0xd31a2e)[_0x224760(0x1c4)](_0x32fa10=>{const _0x29421f=_0x224760;return _0x345843[_0x29421f(0x1d6)](_0x29421f(0x1da)+salesforce_request_1[_0x29421f(0x1bf)]+_0x29421f(0x1a3),{'mdlId':_0x366ace[_0x29421f(0x1c2)],'opType':salesforce_request_type_1[_0x29421f(0x1a0)]['SAVE_DEPLOY_ZIP'],'attachment':_0x32fa10});})[_0x224760(0x1db)](_0x4701f0=>{const _0xb8b4db=_0x224760;return _0x345843['post'](_0xb8b4db(0x1da)+salesforce_request_1[_0xb8b4db(0x1bf)]+_0xb8b4db(0x1a3),{'mdlId':_0x366ace[_0xb8b4db(0x1c2)],'opType':salesforce_request_type_1['OptionType'][_0xb8b4db(0x1a8)],'message':_0x4701f0['message']||_0x4701f0});})[_0x224760(0x1db)](_0x29f30b=>logger[_0x224760(0x1e0)](_0x29f30b[_0x224760(0x1c8)])),{'message':'Job\x20started\x20successfully'};}async[a84_0x1c6cd9(0x1d7)](_0xf80506){const _0x35a4f1=a84_0x1c6cd9,_0x451cb9=(0x0,salesforce_request_1['createRequest'])(auth_utils_1['AuthUtils'][_0x35a4f1(0x1c9)](_0xf80506['instanceUrl']));return(0x0,deploy_attachment_service_1[_0x35a4f1(0x1d7)])(_0xf80506,_0x451cb9)[_0x35a4f1(0x1c4)](_0x3e8ac7=>{const _0x4881bb=_0x35a4f1;return _0x451cb9['post'](_0x4881bb(0x1da)+salesforce_request_1['namespace']+_0x4881bb(0x1a3),{'mdlId':_0xf80506['metadataLogId'],'asyncId':_0x3e8ac7,'opType':salesforce_request_type_1[_0x4881bb(0x1a0)][_0x4881bb(0x1a4)]});})[_0x35a4f1(0x1db)](_0x747c30=>{const _0xe62e12=_0x35a4f1;return _0x451cb9['post'](_0xe62e12(0x1da)+salesforce_request_1[_0xe62e12(0x1bf)]+_0xe62e12(0x1a3),{'mdlId':_0xf80506[_0xe62e12(0x1c2)],'opType':salesforce_request_type_1[_0xe62e12(0x1a0)][_0xe62e12(0x1a8)],'message':_0x747c30[_0xe62e12(0x1c8)]||_0x747c30});})[_0x35a4f1(0x1db)](_0x27e157=>logger[_0x35a4f1(0x1e0)](_0x27e157[_0x35a4f1(0x1c8)])),{'message':_0x35a4f1(0x1b8)};}};function a84_0x548e(){const _0x472641=['1854378fFYLcP','1792044zDISHB','156808oBWwAn','30fcXLLS','design:paramtypes','design:type','instanceUrl','post','deployComponents','312XuCSLg','decorate','/services/apexrest','catch','credentials','7gRBJMz','./utils/auth.utils','__esModule','error','toString','param','defineProperty','constructor','139180UhCpvq','OptionType','__decorate','prototype','/async','DEPLOY','__metadata','Controller','17241PlXERi','ERROR','body','function','./utils/salesforce-request','object','SAVE_BACKUP_ZIP','61444hzBWna','AuthManager','FunctionsController','fetchTestClasses','(((.+)+)+)+$','./services/fetch-test-classes.service','apply','../../core','generate-deploy-zip','createRequest','Job\x20started\x20successfully','./services/retrieve-zip.service','length','Version','deploy-components','GET_TESTS','Post','namespace','retrieveZip','../shared/managers/auth.manager','metadataLogId','generateAndDeployZip','then','design:returntype','metadata','1998474fZTgiN','message','getAuthParameters','search','./services/deploy-attachment.service','AuthUtils','./types/salesforce-request.type','getOwnPropertyDescriptor'];a84_0x548e=function(){return _0x472641;};return a84_0x548e();}__decorate([(0x0,core_1[a84_0x1c6cd9(0x1be)])('retrieve'),__param(0x0,core_1['param'][a84_0x1c6cd9(0x1a9)]()),__metadata(a84_0x1c6cd9(0x1d4),Function),__metadata(a84_0x1c6cd9(0x1d3),[Object]),__metadata(a84_0x1c6cd9(0x1c5),Promise)],FunctionsController[a84_0x1c6cd9(0x1a2)],a84_0x1c6cd9(0x1c0),null),__decorate([(0x0,core_1[a84_0x1c6cd9(0x1be)])('fetch-test-classes'),__param(0x0,core_1[a84_0x1c6cd9(0x1e2)]['body']()),__metadata(a84_0x1c6cd9(0x1d4),Function),__metadata('design:paramtypes',[Object]),__metadata(a84_0x1c6cd9(0x1c5),Promise)],FunctionsController[a84_0x1c6cd9(0x1a2)],'fetchTestClasses',null),__decorate([(0x0,core_1[a84_0x1c6cd9(0x1be)])(a84_0x1c6cd9(0x1b6)),__param(0x0,core_1[a84_0x1c6cd9(0x1e2)]['body']()),__metadata(a84_0x1c6cd9(0x1d4),Function),__metadata(a84_0x1c6cd9(0x1d3),[Object]),__metadata(a84_0x1c6cd9(0x1c5),Promise)],FunctionsController['prototype'],a84_0x1c6cd9(0x1c3),null),__decorate([(0x0,core_1[a84_0x1c6cd9(0x1be)])(a84_0x1c6cd9(0x1bc)),__param(0x0,core_1[a84_0x1c6cd9(0x1e2)][a84_0x1c6cd9(0x1a9)]()),__metadata('design:type',Function),__metadata(a84_0x1c6cd9(0x1d3),[Object]),__metadata(a84_0x1c6cd9(0x1c5),Promise)],FunctionsController[a84_0x1c6cd9(0x1a2)],'deployComponents',null),FunctionsController=__decorate([(0x0,core_1[a84_0x1c6cd9(0x1a6)])('functions'),(0x0,core_1[a84_0x1c6cd9(0x1bb)])('v1')],FunctionsController),exports[a84_0x1c6cd9(0x1b0)]=FunctionsController;