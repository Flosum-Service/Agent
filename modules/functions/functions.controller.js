const a101_0x5e8366=a101_0x41da;(function(_0x5c8dfc,_0xf1aeef){const _0x46f98d=a101_0x41da,_0x1db0d4=_0x5c8dfc();while(!![]){try{const _0x11792e=parseInt(_0x46f98d(0x1af))/0x1+-parseInt(_0x46f98d(0x197))/0x2+-parseInt(_0x46f98d(0x17a))/0x3*(parseInt(_0x46f98d(0x1ab))/0x4)+-parseInt(_0x46f98d(0x179))/0x5*(parseInt(_0x46f98d(0x1a1))/0x6)+-parseInt(_0x46f98d(0x187))/0x7+-parseInt(_0x46f98d(0x19f))/0x8+parseInt(_0x46f98d(0x1b0))/0x9;if(_0x11792e===_0xf1aeef)break;else _0x1db0d4['push'](_0x1db0d4['shift']());}catch(_0x1e24ad){_0x1db0d4['push'](_0x1db0d4['shift']());}}}(a101_0x5367,0xc3282));const a101_0x191177=(function(){let _0x499469=!![];return function(_0x525b44,_0x928679){const _0x3661b8=_0x499469?function(){const _0xc1e639=a101_0x41da;if(_0x928679){const _0x594e6c=_0x928679[_0xc1e639(0x16a)](_0x525b44,arguments);return _0x928679=null,_0x594e6c;}}:function(){};return _0x499469=![],_0x3661b8;};}()),a101_0x4acab3=a101_0x191177(this,function(){const _0x3cc2bf=a101_0x41da;return a101_0x4acab3[_0x3cc2bf(0x178)]()[_0x3cc2bf(0x1a0)]('(((.+)+)+)+$')[_0x3cc2bf(0x178)]()[_0x3cc2bf(0x186)](a101_0x4acab3)[_0x3cc2bf(0x1a0)](_0x3cc2bf(0x17b));});a101_0x4acab3();'use strict';var __decorate=this&&this[a101_0x5e8366(0x1a9)]||function(_0x3e2bbe,_0x30a806,_0xd5e9f7,_0x5664c3){const _0x5bc650=a101_0x5e8366;var _0x17a462=arguments['length'],_0x19f8c3=_0x17a462<0x3?_0x30a806:_0x5664c3===null?_0x5664c3=Object['getOwnPropertyDescriptor'](_0x30a806,_0xd5e9f7):_0x5664c3,_0xdef5ff;if(typeof Reflect===_0x5bc650(0x18e)&&typeof Reflect[_0x5bc650(0x182)]===_0x5bc650(0x174))_0x19f8c3=Reflect[_0x5bc650(0x182)](_0x3e2bbe,_0x30a806,_0xd5e9f7,_0x5664c3);else{for(var _0x32af65=_0x3e2bbe[_0x5bc650(0x198)]-0x1;_0x32af65>=0x0;_0x32af65--)if(_0xdef5ff=_0x3e2bbe[_0x32af65])_0x19f8c3=(_0x17a462<0x3?_0xdef5ff(_0x19f8c3):_0x17a462>0x3?_0xdef5ff(_0x30a806,_0xd5e9f7,_0x19f8c3):_0xdef5ff(_0x30a806,_0xd5e9f7))||_0x19f8c3;}return _0x17a462>0x3&&_0x19f8c3&&Object['defineProperty'](_0x30a806,_0xd5e9f7,_0x19f8c3),_0x19f8c3;},__metadata=this&&this[a101_0x5e8366(0x1ad)]||function(_0x1de34b,_0x5e5808){const _0x12c559=a101_0x5e8366;if(typeof Reflect===_0x12c559(0x18e)&&typeof Reflect['metadata']===_0x12c559(0x174))return Reflect[_0x12c559(0x192)](_0x1de34b,_0x5e5808);},__param=this&&this[a101_0x5e8366(0x19a)]||function(_0x5e261c,_0x3ea4fe){return function(_0x4dfff2,_0x249115){_0x3ea4fe(_0x4dfff2,_0x249115,_0x5e261c);};};function a101_0x41da(_0x156284,_0x21104c){const _0xd1ce6d=a101_0x5367();return a101_0x41da=function(_0x4acab3,_0x191177){_0x4acab3=_0x4acab3-0x16a;let _0x5367d6=_0xd1ce6d[_0x4acab3];return _0x5367d6;},a101_0x41da(_0x156284,_0x21104c);}function a101_0x5367(){const _0x2d7a0c=['design:paramtypes','AuthUtils','./services/generate-zip.service','toString','18985XHOokk','12vxOccK','(((.+)+)+)+$','namespace','../../core','/async','Job\x20started\x20successfully','create','Post','decorate','error','GET_TESTS','./services/retrieve-zip.service','constructor','11124743QrKYdp','generateAndDeployZip','post','DEPLOY','server','fetch-test-classes','OptionType','object','./types/salesforce-request.type','prototype','Controller','metadata','../shared/managers/auth.manager','./services/fetch-test-classes.service','then','generate-deploy-zip','2434844fabydl','length','AuthManager','__param','catch','body','param','design:type','10657592CoehTc','search','108wafBVK','message','retrieve','./utils/salesforce-request','__esModule','./services/deploy-attachment.service','instanceUrl','deployComponents','__decorate','Logger','109840SizDcl','metadataLogId','__metadata','SAVE_BACKUP_ZIP','162276NqKIWt','44587278RAgdRt','functions','apply','fetchTestClasses','defineProperty','ERROR','getAuthParameters','retrieveZip','createRequest','design:returntype','/services/apexrest','deploy-components','function'];a101_0x5367=function(){return _0x2d7a0c;};return a101_0x5367();}Object[a101_0x5e8366(0x16c)](exports,a101_0x5e8366(0x1a5),{'value':!![]}),exports['FunctionsController']=void 0x0;const core_1=require(a101_0x5e8366(0x17d)),salesforce_request_type_1=require(a101_0x5e8366(0x18f)),retrieve_zip_service_1=require(a101_0x5e8366(0x185)),generate_zip_service_1=require(a101_0x5e8366(0x177)),fetch_test_classes_service_1=require(a101_0x5e8366(0x194)),deploy_attachment_service_1=require(a101_0x5e8366(0x1a6)),salesforce_request_1=require(a101_0x5e8366(0x1a4)),auth_utils_1=require('./utils/auth.utils'),auth_manager_1=require(a101_0x5e8366(0x193)),salesforce_1=require('@flosum/salesforce'),logger=new core_1[(a101_0x5e8366(0x1aa))](a101_0x5e8366(0x18b));let FunctionsController=class FunctionsController{async[a101_0x5e8366(0x16f)](_0x5c0a0f){const _0x12f52b=a101_0x5e8366,_0x228fc7=(0x0,salesforce_request_1[_0x12f52b(0x170)])(auth_utils_1[_0x12f52b(0x176)]['getAuthParameters'](_0x5c0a0f[_0x12f52b(0x1a7)]));return(0x0,retrieve_zip_service_1[_0x12f52b(0x16f)])(_0x5c0a0f,_0x228fc7)[_0x12f52b(0x195)](()=>{const _0x1e2b1f=_0x12f52b;return _0x228fc7[_0x1e2b1f(0x189)](_0x1e2b1f(0x172)+salesforce_request_1[_0x1e2b1f(0x17c)]+_0x1e2b1f(0x17e),{'mdlId':_0x5c0a0f[_0x1e2b1f(0x1ac)],'opType':salesforce_request_type_1[_0x1e2b1f(0x18d)][_0x1e2b1f(0x1ae)]});})[_0x12f52b(0x19b)](_0x439c32=>{const _0x275a17=_0x12f52b;return _0x228fc7[_0x275a17(0x189)](_0x275a17(0x172)+salesforce_request_1[_0x275a17(0x17c)]+_0x275a17(0x17e),{'mdlId':_0x5c0a0f['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x275a17(0x16d)],'message':_0x439c32['message']||_0x439c32});})[_0x12f52b(0x19b)](_0x941a8d=>logger[_0x12f52b(0x183)](_0x941a8d[_0x12f52b(0x1a2)])),{'message':_0x12f52b(0x17f)};}async['fetchTestClasses'](_0x4b92e0){const _0x39c73b=a101_0x5e8366,_0x54be27=(0x0,salesforce_request_1[_0x39c73b(0x170)])(auth_utils_1['AuthUtils'][_0x39c73b(0x16e)](_0x4b92e0[_0x39c73b(0x1a7)]));return(0x0,fetch_test_classes_service_1[_0x39c73b(0x16b)])(_0x4b92e0,_0x54be27)[_0x39c73b(0x195)](()=>{const _0x1756b6=_0x39c73b;return _0x54be27[_0x1756b6(0x189)]('/services/apexrest'+salesforce_request_1[_0x1756b6(0x17c)]+_0x1756b6(0x17e),{'mdlId':_0x4b92e0[_0x1756b6(0x1ac)],'opType':salesforce_request_type_1[_0x1756b6(0x18d)][_0x1756b6(0x184)]});})[_0x39c73b(0x19b)](_0x1be873=>{const _0x45f97e=_0x39c73b;return _0x54be27[_0x45f97e(0x189)](_0x45f97e(0x172)+salesforce_request_1[_0x45f97e(0x17c)]+'/async',{'mdlId':_0x4b92e0[_0x45f97e(0x1ac)],'opType':salesforce_request_type_1[_0x45f97e(0x18d)]['ERROR'],'message':_0x1be873[_0x45f97e(0x1a2)]||_0x1be873});})[_0x39c73b(0x19b)](_0x19e007=>logger[_0x39c73b(0x183)](_0x19e007[_0x39c73b(0x1a2)])),{'message':_0x39c73b(0x17f)};}async[a101_0x5e8366(0x188)](_0x53aea7){const _0x4ef657=a101_0x5e8366,_0x4a6e7b=(0x0,salesforce_request_1[_0x4ef657(0x170)])(auth_utils_1[_0x4ef657(0x176)][_0x4ef657(0x16e)](_0x53aea7[_0x4ef657(0x1a7)])),_0x1fd0e4=await salesforce_1['AxiosInstanceUtils'][_0x4ef657(0x180)](new auth_manager_1[(_0x4ef657(0x199))](_0x53aea7['credentials']),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0x4ef657(0x188)])(_0x53aea7,_0x4a6e7b,_0x1fd0e4)['then'](_0x32f18c=>{const _0x5701c0=_0x4ef657;return _0x4a6e7b[_0x5701c0(0x189)]('/services/apexrest'+salesforce_request_1['namespace']+'/async',{'mdlId':_0x53aea7[_0x5701c0(0x1ac)],'opType':salesforce_request_type_1[_0x5701c0(0x18d)]['SAVE_DEPLOY_ZIP'],'attachment':_0x32f18c});})['catch'](_0x2b8158=>{const _0x45c17c=_0x4ef657;return _0x4a6e7b[_0x45c17c(0x189)]('/services/apexrest'+salesforce_request_1[_0x45c17c(0x17c)]+'/async',{'mdlId':_0x53aea7[_0x45c17c(0x1ac)],'opType':salesforce_request_type_1[_0x45c17c(0x18d)][_0x45c17c(0x16d)],'message':_0x2b8158[_0x45c17c(0x1a2)]||_0x2b8158});})[_0x4ef657(0x19b)](_0x21b78f=>logger[_0x4ef657(0x183)](_0x21b78f[_0x4ef657(0x1a2)])),{'message':_0x4ef657(0x17f)};}async[a101_0x5e8366(0x1a8)](_0x359ac8){const _0x35f9d3=a101_0x5e8366,_0x461fda=(0x0,salesforce_request_1[_0x35f9d3(0x170)])(auth_utils_1[_0x35f9d3(0x176)][_0x35f9d3(0x16e)](_0x359ac8[_0x35f9d3(0x1a7)]));return(0x0,deploy_attachment_service_1['deployComponents'])(_0x359ac8,_0x461fda)[_0x35f9d3(0x195)](_0x31071e=>{const _0xbf597f=_0x35f9d3;return _0x461fda[_0xbf597f(0x189)](_0xbf597f(0x172)+salesforce_request_1[_0xbf597f(0x17c)]+_0xbf597f(0x17e),{'mdlId':_0x359ac8[_0xbf597f(0x1ac)],'asyncId':_0x31071e,'opType':salesforce_request_type_1['OptionType'][_0xbf597f(0x18a)]});})['catch'](_0x54e129=>{const _0x3277b4=_0x35f9d3;return _0x461fda[_0x3277b4(0x189)](_0x3277b4(0x172)+salesforce_request_1[_0x3277b4(0x17c)]+_0x3277b4(0x17e),{'mdlId':_0x359ac8[_0x3277b4(0x1ac)],'opType':salesforce_request_type_1[_0x3277b4(0x18d)]['ERROR'],'message':_0x54e129[_0x3277b4(0x1a2)]||_0x54e129});})['catch'](_0x486681=>logger[_0x35f9d3(0x183)](_0x486681['message'])),{'message':'Job\x20started\x20successfully'};}};__decorate([(0x0,core_1[a101_0x5e8366(0x181)])(a101_0x5e8366(0x1a3)),__param(0x0,core_1[a101_0x5e8366(0x19d)][a101_0x5e8366(0x19c)]()),__metadata(a101_0x5e8366(0x19e),Function),__metadata(a101_0x5e8366(0x175),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a101_0x5e8366(0x190)],a101_0x5e8366(0x16f),null),__decorate([(0x0,core_1[a101_0x5e8366(0x181)])(a101_0x5e8366(0x18c)),__param(0x0,core_1[a101_0x5e8366(0x19d)][a101_0x5e8366(0x19c)]()),__metadata(a101_0x5e8366(0x19e),Function),__metadata(a101_0x5e8366(0x175),[Object]),__metadata(a101_0x5e8366(0x171),Promise)],FunctionsController[a101_0x5e8366(0x190)],'fetchTestClasses',null),__decorate([(0x0,core_1[a101_0x5e8366(0x181)])(a101_0x5e8366(0x196)),__param(0x0,core_1[a101_0x5e8366(0x19d)][a101_0x5e8366(0x19c)]()),__metadata(a101_0x5e8366(0x19e),Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0x5e8366(0x171),Promise)],FunctionsController[a101_0x5e8366(0x190)],a101_0x5e8366(0x188),null),__decorate([(0x0,core_1[a101_0x5e8366(0x181)])(a101_0x5e8366(0x173)),__param(0x0,core_1[a101_0x5e8366(0x19d)][a101_0x5e8366(0x19c)]()),__metadata(a101_0x5e8366(0x19e),Function),__metadata(a101_0x5e8366(0x175),[Object]),__metadata(a101_0x5e8366(0x171),Promise)],FunctionsController[a101_0x5e8366(0x190)],a101_0x5e8366(0x1a8),null),FunctionsController=__decorate([(0x0,core_1[a101_0x5e8366(0x191)])(a101_0x5e8366(0x1b1)),(0x0,core_1['Version'])('v1')],FunctionsController),exports['FunctionsController']=FunctionsController;