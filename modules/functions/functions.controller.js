const a101_0x3942b2=a101_0x1e23;(function(_0x166da5,_0x4d54e9){const _0x4d5d4c=a101_0x1e23,_0x23225d=_0x166da5();while(!![]){try{const _0x149e12=parseInt(_0x4d5d4c(0x1b5))/0x1+parseInt(_0x4d5d4c(0x1bc))/0x2+parseInt(_0x4d5d4c(0x1ed))/0x3*(-parseInt(_0x4d5d4c(0x1e3))/0x4)+-parseInt(_0x4d5d4c(0x1d9))/0x5+parseInt(_0x4d5d4c(0x1e1))/0x6+-parseInt(_0x4d5d4c(0x1b9))/0x7*(parseInt(_0x4d5d4c(0x1e0))/0x8)+parseInt(_0x4d5d4c(0x1b6))/0x9;if(_0x149e12===_0x4d54e9)break;else _0x23225d['push'](_0x23225d['shift']());}catch(_0xe3e081){_0x23225d['push'](_0x23225d['shift']());}}}(a101_0x287c,0x57eff));const a101_0x426c3f=(function(){let _0xa2714=!![];return function(_0x517fa6,_0x4107c2){const _0x21e064=_0xa2714?function(){const _0x4da2d1=a101_0x1e23;if(_0x4107c2){const _0x1b4572=_0x4107c2[_0x4da2d1(0x1d1)](_0x517fa6,arguments);return _0x4107c2=null,_0x1b4572;}}:function(){};return _0xa2714=![],_0x21e064;};}()),a101_0x440866=a101_0x426c3f(this,function(){const _0x91764=a101_0x1e23;return a101_0x440866[_0x91764(0x1cf)]()[_0x91764(0x1cc)]('(((.+)+)+)+$')['toString']()['constructor'](a101_0x440866)[_0x91764(0x1cc)](_0x91764(0x1d5));});a101_0x440866();'use strict';function a101_0x1e23(_0x3feacf,_0x20e520){const _0x2fb6c9=a101_0x287c();return a101_0x1e23=function(_0x440866,_0x426c3f){_0x440866=_0x440866-0x1af;let _0x287c66=_0x2fb6c9[_0x440866];return _0x287c66;},a101_0x1e23(_0x3feacf,_0x20e520);}var __decorate=this&&this['__decorate']||function(_0x1280a0,_0xf6db09,_0xc04c56,_0x3e5387){const _0x1cee90=a101_0x1e23;var _0x15f109=arguments['length'],_0x282df5=_0x15f109<0x3?_0xf6db09:_0x3e5387===null?_0x3e5387=Object[_0x1cee90(0x1be)](_0xf6db09,_0xc04c56):_0x3e5387,_0xfd93dc;if(typeof Reflect===_0x1cee90(0x1e4)&&typeof Reflect['decorate']===_0x1cee90(0x1ba))_0x282df5=Reflect[_0x1cee90(0x1d8)](_0x1280a0,_0xf6db09,_0xc04c56,_0x3e5387);else{for(var _0x423d8d=_0x1280a0[_0x1cee90(0x1ca)]-0x1;_0x423d8d>=0x0;_0x423d8d--)if(_0xfd93dc=_0x1280a0[_0x423d8d])_0x282df5=(_0x15f109<0x3?_0xfd93dc(_0x282df5):_0x15f109>0x3?_0xfd93dc(_0xf6db09,_0xc04c56,_0x282df5):_0xfd93dc(_0xf6db09,_0xc04c56))||_0x282df5;}return _0x15f109>0x3&&_0x282df5&&Object['defineProperty'](_0xf6db09,_0xc04c56,_0x282df5),_0x282df5;},__metadata=this&&this[a101_0x3942b2(0x1f4)]||function(_0x261be0,_0x73fdc0){const _0x3da258=a101_0x3942b2;if(typeof Reflect===_0x3da258(0x1e4)&&typeof Reflect['metadata']===_0x3da258(0x1ba))return Reflect[_0x3da258(0x1cd)](_0x261be0,_0x73fdc0);},__param=this&&this[a101_0x3942b2(0x1e8)]||function(_0x5e0fc8,_0x1fe0aa){return function(_0x39c991,_0x17fe1a){_0x1fe0aa(_0x39c991,_0x17fe1a,_0x5e0fc8);};};Object['defineProperty'](exports,a101_0x3942b2(0x1b1),{'value':!![]}),exports['FunctionsController']=void 0x0;const core_1=require(a101_0x3942b2(0x1d2)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require(a101_0x3942b2(0x1e6)),generate_zip_service_1=require('./services/generate-zip.service'),fetch_test_classes_service_1=require(a101_0x3942b2(0x1f3)),deploy_attachment_service_1=require(a101_0x3942b2(0x1c8)),salesforce_request_1=require(a101_0x3942b2(0x1ee)),auth_utils_1=require('./utils/auth.utils'),auth_manager_1=require('../shared/managers/auth.manager'),salesforce_1=require(a101_0x3942b2(0x1df)),logger=new core_1[(a101_0x3942b2(0x1ce))](a101_0x3942b2(0x1f2));function a101_0x287c(){const _0x354fd4=['namespace','__param','Post','message','OptionType','param','1347471sHdcUL','./utils/salesforce-request','getAuthParameters','deploy-components','Job\x20started\x20successfully','server','./services/fetch-test-classes.service','__metadata','post','functions','__esModule','/async','design:paramtypes','error','234241ZPWvni','5817681bFsnSD','retrieve','deployComponents','40124XdcGch','function','design:returntype','948254HRlTQs','generate-deploy-zip','getOwnPropertyDescriptor','/services/apexrest','metadataLogId','create','design:type','generateAndDeployZip','ERROR','instanceUrl','AuthUtils','DEPLOY','./services/deploy-attachment.service','AuthManager','length','retrieveZip','search','metadata','Logger','toString','fetchTestClasses','apply','../../core','Controller','GET_TESTS','(((.+)+)+)+$','createRequest','then','decorate','1849850ferVTq','catch','Version','prototype','credentials','FunctionsController','@flosum/salesforce','688pvqrua','1904958ZaFOfK','body','4bmFcAX','object','SAVE_BACKUP_ZIP','./services/retrieve-zip.service'];a101_0x287c=function(){return _0x354fd4;};return a101_0x287c();}let FunctionsController=class FunctionsController{async[a101_0x3942b2(0x1cb)](_0x4e549e){const _0x3c6164=a101_0x3942b2,_0x3be59c=(0x0,salesforce_request_1[_0x3c6164(0x1d6)])(auth_utils_1[_0x3c6164(0x1c6)][_0x3c6164(0x1ef)](_0x4e549e[_0x3c6164(0x1c5)]));return(0x0,retrieve_zip_service_1[_0x3c6164(0x1cb)])(_0x4e549e,_0x3be59c)[_0x3c6164(0x1d7)](()=>{const _0x158f1b=_0x3c6164;return _0x3be59c[_0x158f1b(0x1af)]('/services/apexrest'+salesforce_request_1[_0x158f1b(0x1e7)]+_0x158f1b(0x1b2),{'mdlId':_0x4e549e[_0x158f1b(0x1c0)],'opType':salesforce_request_type_1['OptionType'][_0x158f1b(0x1e5)]});})['catch'](_0xfdfbb0=>{const _0x382d99=_0x3c6164;return _0x3be59c[_0x382d99(0x1af)](_0x382d99(0x1bf)+salesforce_request_1['namespace']+_0x382d99(0x1b2),{'mdlId':_0x4e549e[_0x382d99(0x1c0)],'opType':salesforce_request_type_1[_0x382d99(0x1eb)][_0x382d99(0x1c4)],'message':_0xfdfbb0[_0x382d99(0x1ea)]||_0xfdfbb0});})['catch'](_0x373a65=>logger['error'](_0x373a65['message'])),{'message':_0x3c6164(0x1f1)};}async[a101_0x3942b2(0x1d0)](_0x25f2a7){const _0x24cbea=a101_0x3942b2,_0x5a2ff8=(0x0,salesforce_request_1[_0x24cbea(0x1d6)])(auth_utils_1[_0x24cbea(0x1c6)][_0x24cbea(0x1ef)](_0x25f2a7[_0x24cbea(0x1c5)]));return(0x0,fetch_test_classes_service_1[_0x24cbea(0x1d0)])(_0x25f2a7,_0x5a2ff8)[_0x24cbea(0x1d7)](()=>{const _0x65355a=_0x24cbea;return _0x5a2ff8[_0x65355a(0x1af)](_0x65355a(0x1bf)+salesforce_request_1[_0x65355a(0x1e7)]+_0x65355a(0x1b2),{'mdlId':_0x25f2a7[_0x65355a(0x1c0)],'opType':salesforce_request_type_1[_0x65355a(0x1eb)][_0x65355a(0x1d4)]});})[_0x24cbea(0x1da)](_0x582bb5=>{const _0x3db19d=_0x24cbea;return _0x5a2ff8['post'](_0x3db19d(0x1bf)+salesforce_request_1[_0x3db19d(0x1e7)]+_0x3db19d(0x1b2),{'mdlId':_0x25f2a7[_0x3db19d(0x1c0)],'opType':salesforce_request_type_1['OptionType'][_0x3db19d(0x1c4)],'message':_0x582bb5['message']||_0x582bb5});})[_0x24cbea(0x1da)](_0x2c80eb=>logger['error'](_0x2c80eb['message'])),{'message':_0x24cbea(0x1f1)};}async[a101_0x3942b2(0x1c3)](_0x466a68){const _0x5ac245=a101_0x3942b2,_0xead018=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x5ac245(0x1c6)][_0x5ac245(0x1ef)](_0x466a68[_0x5ac245(0x1c5)])),_0x255449=await salesforce_1['AxiosInstanceUtils'][_0x5ac245(0x1c1)](new auth_manager_1[(_0x5ac245(0x1c9))](_0x466a68[_0x5ac245(0x1dd)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x466a68,_0xead018,_0x255449)[_0x5ac245(0x1d7)](_0x2cc6d5=>{const _0xb571c0=_0x5ac245;return _0xead018[_0xb571c0(0x1af)](_0xb571c0(0x1bf)+salesforce_request_1['namespace']+_0xb571c0(0x1b2),{'mdlId':_0x466a68[_0xb571c0(0x1c0)],'opType':salesforce_request_type_1[_0xb571c0(0x1eb)]['SAVE_DEPLOY_ZIP'],'attachment':_0x2cc6d5});})[_0x5ac245(0x1da)](_0xefa63f=>{const _0x591cf1=_0x5ac245;return _0xead018[_0x591cf1(0x1af)]('/services/apexrest'+salesforce_request_1[_0x591cf1(0x1e7)]+'/async',{'mdlId':_0x466a68[_0x591cf1(0x1c0)],'opType':salesforce_request_type_1[_0x591cf1(0x1eb)][_0x591cf1(0x1c4)],'message':_0xefa63f[_0x591cf1(0x1ea)]||_0xefa63f});})['catch'](_0x52e2b9=>logger[_0x5ac245(0x1b4)](_0x52e2b9[_0x5ac245(0x1ea)])),{'message':_0x5ac245(0x1f1)};}async[a101_0x3942b2(0x1b8)](_0x1533f2){const _0x115619=a101_0x3942b2,_0x1efafc=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x115619(0x1c6)][_0x115619(0x1ef)](_0x1533f2['instanceUrl']));return(0x0,deploy_attachment_service_1['deployComponents'])(_0x1533f2,_0x1efafc)[_0x115619(0x1d7)](_0x333857=>{const _0x25b913=_0x115619;return _0x1efafc[_0x25b913(0x1af)](_0x25b913(0x1bf)+salesforce_request_1['namespace']+_0x25b913(0x1b2),{'mdlId':_0x1533f2[_0x25b913(0x1c0)],'asyncId':_0x333857,'opType':salesforce_request_type_1[_0x25b913(0x1eb)][_0x25b913(0x1c7)]});})['catch'](_0xb1c4ee=>{const _0xa653e3=_0x115619;return _0x1efafc[_0xa653e3(0x1af)]('/services/apexrest'+salesforce_request_1['namespace']+'/async',{'mdlId':_0x1533f2['metadataLogId'],'opType':salesforce_request_type_1[_0xa653e3(0x1eb)][_0xa653e3(0x1c4)],'message':_0xb1c4ee[_0xa653e3(0x1ea)]||_0xb1c4ee});})[_0x115619(0x1da)](_0x482fda=>logger[_0x115619(0x1b4)](_0x482fda[_0x115619(0x1ea)])),{'message':_0x115619(0x1f1)};}};__decorate([(0x0,core_1['Post'])(a101_0x3942b2(0x1b7)),__param(0x0,core_1[a101_0x3942b2(0x1ec)][a101_0x3942b2(0x1e2)]()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0x3942b2(0x1bb),Promise)],FunctionsController['prototype'],a101_0x3942b2(0x1cb),null),__decorate([(0x0,core_1[a101_0x3942b2(0x1e9)])('fetch-test-classes'),__param(0x0,core_1[a101_0x3942b2(0x1ec)]['body']()),__metadata(a101_0x3942b2(0x1c2),Function),__metadata(a101_0x3942b2(0x1b3),[Object]),__metadata(a101_0x3942b2(0x1bb),Promise)],FunctionsController[a101_0x3942b2(0x1dc)],a101_0x3942b2(0x1d0),null),__decorate([(0x0,core_1[a101_0x3942b2(0x1e9)])(a101_0x3942b2(0x1bd)),__param(0x0,core_1['param']['body']()),__metadata(a101_0x3942b2(0x1c2),Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0x3942b2(0x1bb),Promise)],FunctionsController[a101_0x3942b2(0x1dc)],a101_0x3942b2(0x1c3),null),__decorate([(0x0,core_1['Post'])(a101_0x3942b2(0x1f0)),__param(0x0,core_1[a101_0x3942b2(0x1ec)]['body']()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0x3942b2(0x1bb),Promise)],FunctionsController[a101_0x3942b2(0x1dc)],a101_0x3942b2(0x1b8),null),FunctionsController=__decorate([(0x0,core_1[a101_0x3942b2(0x1d3)])(a101_0x3942b2(0x1b0)),(0x0,core_1[a101_0x3942b2(0x1db)])('v1')],FunctionsController),exports[a101_0x3942b2(0x1de)]=FunctionsController;