function a101_0x428f(_0x3c0d6c,_0x21d594){const _0x4d811d=a101_0x1d3e();return a101_0x428f=function(_0xb3ff64,_0x58e7fa){_0xb3ff64=_0xb3ff64-0x1c6;let _0x1d3e0a=_0x4d811d[_0xb3ff64];return _0x1d3e0a;},a101_0x428f(_0x3c0d6c,_0x21d594);}const a101_0x3fce65=a101_0x428f;function a101_0x1d3e(){const _0xca0a29=['2QhxfqP','prototype','/async','__esModule','credentials','length','__metadata','toString','ERROR','retrieve','(((.+)+)+)+$','body','./services/retrieve-zip.service','defineProperty','3532CjzYqh','retrieveZip','server','Job\x20started\x20successfully','instanceUrl','394610VJmOML','./services/generate-zip.service','88MwnALU','message','design:paramtypes','./services/fetch-test-classes.service','Version','349224OEvmvZ','then','generate-deploy-zip','SAVE_BACKUP_ZIP','3231816HZNUow','1018848CwnuJY','/services/apexrest','design:returntype','Logger','metadata','param','./utils/auth.utils','metadataLogId','design:type','FunctionsController','catch','deployComponents','./services/deploy-attachment.service','__decorate','functions','namespace','OptionType','SAVE_DEPLOY_ZIP','fetchTestClasses','generateAndDeployZip','1077VDSjlq','2330020NDSdwK','277569XtlRlr','../../core','../shared/managers/auth.manager','function','constructor','createRequest','AxiosInstanceUtils','AuthUtils','search','getAuthParameters','Post','decorate','132rWHXmH','error','getOwnPropertyDescriptor','post','deploy-components'];a101_0x1d3e=function(){return _0xca0a29;};return a101_0x1d3e();}(function(_0x522084,_0x2ec42c){const _0x3634da=a101_0x428f,_0x5e4abc=_0x522084();while(!![]){try{const _0x3f5355=-parseInt(_0x3634da(0x201))/0x1*(-parseInt(_0x3634da(0x1e7))/0x2)+-parseInt(_0x3634da(0x1d4))/0x3*(parseInt(_0x3634da(0x1f5))/0x4)+parseInt(_0x3634da(0x1d5))/0x5+parseInt(_0x3634da(0x206))/0x6+-parseInt(_0x3634da(0x205))/0x7+-parseInt(_0x3634da(0x1fc))/0x8*(parseInt(_0x3634da(0x1d6))/0x9)+parseInt(_0x3634da(0x1fa))/0xa*(parseInt(_0x3634da(0x1e2))/0xb);if(_0x3f5355===_0x2ec42c)break;else _0x5e4abc['push'](_0x5e4abc['shift']());}catch(_0x479a35){_0x5e4abc['push'](_0x5e4abc['shift']());}}}(a101_0x1d3e,0x53298));const a101_0x58e7fa=(function(){let _0x3a4646=!![];return function(_0x5e442f,_0xb79484){const _0x58d0b8=_0x3a4646?function(){if(_0xb79484){const _0x10b0de=_0xb79484['apply'](_0x5e442f,arguments);return _0xb79484=null,_0x10b0de;}}:function(){};return _0x3a4646=![],_0x58d0b8;};}()),a101_0xb3ff64=a101_0x58e7fa(this,function(){const _0x30a2b6=a101_0x428f;return a101_0xb3ff64[_0x30a2b6(0x1ee)]()[_0x30a2b6(0x1de)](_0x30a2b6(0x1f1))[_0x30a2b6(0x1ee)]()[_0x30a2b6(0x1da)](a101_0xb3ff64)[_0x30a2b6(0x1de)](_0x30a2b6(0x1f1));});a101_0xb3ff64();'use strict';var __decorate=this&&this[a101_0x3fce65(0x1cd)]||function(_0x187edb,_0x28d950,_0x2abe1c,_0x4755f5){const _0x2f363c=a101_0x3fce65;var _0x5652b9=arguments[_0x2f363c(0x1ec)],_0x548a63=_0x5652b9<0x3?_0x28d950:_0x4755f5===null?_0x4755f5=Object[_0x2f363c(0x1e4)](_0x28d950,_0x2abe1c):_0x4755f5,_0x3005ae;if(typeof Reflect==='object'&&typeof Reflect[_0x2f363c(0x1e1)]==='function')_0x548a63=Reflect[_0x2f363c(0x1e1)](_0x187edb,_0x28d950,_0x2abe1c,_0x4755f5);else{for(var _0x1372cd=_0x187edb['length']-0x1;_0x1372cd>=0x0;_0x1372cd--)if(_0x3005ae=_0x187edb[_0x1372cd])_0x548a63=(_0x5652b9<0x3?_0x3005ae(_0x548a63):_0x5652b9>0x3?_0x3005ae(_0x28d950,_0x2abe1c,_0x548a63):_0x3005ae(_0x28d950,_0x2abe1c))||_0x548a63;}return _0x5652b9>0x3&&_0x548a63&&Object[_0x2f363c(0x1f4)](_0x28d950,_0x2abe1c,_0x548a63),_0x548a63;},__metadata=this&&this[a101_0x3fce65(0x1ed)]||function(_0x4c8a16,_0x40fe71){const _0x2303dd=a101_0x3fce65;if(typeof Reflect==='object'&&typeof Reflect[_0x2303dd(0x20a)]===_0x2303dd(0x1d9))return Reflect[_0x2303dd(0x20a)](_0x4c8a16,_0x40fe71);},__param=this&&this['__param']||function(_0x56efcd,_0x2bb1b7){return function(_0x184656,_0x54568f){_0x2bb1b7(_0x184656,_0x54568f,_0x56efcd);};};Object[a101_0x3fce65(0x1f4)](exports,a101_0x3fce65(0x1ea),{'value':!![]}),exports['FunctionsController']=void 0x0;const core_1=require(a101_0x3fce65(0x1d7)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require(a101_0x3fce65(0x1f3)),generate_zip_service_1=require(a101_0x3fce65(0x1fb)),fetch_test_classes_service_1=require(a101_0x3fce65(0x1ff)),deploy_attachment_service_1=require(a101_0x3fce65(0x1cc)),salesforce_request_1=require('./utils/salesforce-request'),auth_utils_1=require(a101_0x3fce65(0x1c6)),auth_manager_1=require(a101_0x3fce65(0x1d8)),salesforce_1=require('@flosum/salesforce'),logger=new core_1[(a101_0x3fce65(0x209))](a101_0x3fce65(0x1f7));let FunctionsController=class FunctionsController{async[a101_0x3fce65(0x1f6)](_0x415308){const _0x1c9e1f=a101_0x3fce65,_0x18e87a=(0x0,salesforce_request_1[_0x1c9e1f(0x1db)])(auth_utils_1[_0x1c9e1f(0x1dd)][_0x1c9e1f(0x1df)](_0x415308['instanceUrl']));return(0x0,retrieve_zip_service_1[_0x1c9e1f(0x1f6)])(_0x415308,_0x18e87a)[_0x1c9e1f(0x202)](()=>{const _0x23680b=_0x1c9e1f;return _0x18e87a[_0x23680b(0x1e5)]('/services/apexrest'+salesforce_request_1[_0x23680b(0x1cf)]+'/async',{'mdlId':_0x415308[_0x23680b(0x1c7)],'opType':salesforce_request_type_1[_0x23680b(0x1d0)][_0x23680b(0x204)]});})[_0x1c9e1f(0x1ca)](_0x336031=>{const _0x30e96a=_0x1c9e1f;return _0x18e87a[_0x30e96a(0x1e5)](_0x30e96a(0x207)+salesforce_request_1['namespace']+_0x30e96a(0x1e9),{'mdlId':_0x415308['metadataLogId'],'opType':salesforce_request_type_1[_0x30e96a(0x1d0)][_0x30e96a(0x1ef)],'message':_0x336031[_0x30e96a(0x1fd)]||_0x336031});})[_0x1c9e1f(0x1ca)](_0x313cfa=>logger[_0x1c9e1f(0x1e3)](_0x313cfa[_0x1c9e1f(0x1fd)])),{'message':'Job\x20started\x20successfully'};}async[a101_0x3fce65(0x1d2)](_0x2b3246){const _0x41b6c6=a101_0x3fce65,_0x91d9af=(0x0,salesforce_request_1[_0x41b6c6(0x1db)])(auth_utils_1[_0x41b6c6(0x1dd)][_0x41b6c6(0x1df)](_0x2b3246[_0x41b6c6(0x1f9)]));return(0x0,fetch_test_classes_service_1[_0x41b6c6(0x1d2)])(_0x2b3246,_0x91d9af)[_0x41b6c6(0x202)](()=>{const _0x24bdb7=_0x41b6c6;return _0x91d9af[_0x24bdb7(0x1e5)](_0x24bdb7(0x207)+salesforce_request_1[_0x24bdb7(0x1cf)]+_0x24bdb7(0x1e9),{'mdlId':_0x2b3246['metadataLogId'],'opType':salesforce_request_type_1[_0x24bdb7(0x1d0)]['GET_TESTS']});})[_0x41b6c6(0x1ca)](_0x38c76e=>{const _0x19c4cf=_0x41b6c6;return _0x91d9af[_0x19c4cf(0x1e5)]('/services/apexrest'+salesforce_request_1['namespace']+'/async',{'mdlId':_0x2b3246[_0x19c4cf(0x1c7)],'opType':salesforce_request_type_1['OptionType'][_0x19c4cf(0x1ef)],'message':_0x38c76e[_0x19c4cf(0x1fd)]||_0x38c76e});})[_0x41b6c6(0x1ca)](_0x524d58=>logger[_0x41b6c6(0x1e3)](_0x524d58[_0x41b6c6(0x1fd)])),{'message':_0x41b6c6(0x1f8)};}async[a101_0x3fce65(0x1d3)](_0x2d8793){const _0x3ab0fe=a101_0x3fce65,_0x413161=(0x0,salesforce_request_1[_0x3ab0fe(0x1db)])(auth_utils_1['AuthUtils']['getAuthParameters'](_0x2d8793[_0x3ab0fe(0x1f9)])),_0x542f25=await salesforce_1[_0x3ab0fe(0x1dc)]['create'](new auth_manager_1['AuthManager'](_0x2d8793[_0x3ab0fe(0x1eb)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x2d8793,_0x413161,_0x542f25)['then'](_0x52990d=>{const _0x191ec1=_0x3ab0fe;return _0x413161[_0x191ec1(0x1e5)](_0x191ec1(0x207)+salesforce_request_1[_0x191ec1(0x1cf)]+_0x191ec1(0x1e9),{'mdlId':_0x2d8793[_0x191ec1(0x1c7)],'opType':salesforce_request_type_1[_0x191ec1(0x1d0)][_0x191ec1(0x1d1)],'attachment':_0x52990d});})[_0x3ab0fe(0x1ca)](_0x30e380=>{const _0x395260=_0x3ab0fe;return _0x413161[_0x395260(0x1e5)](_0x395260(0x207)+salesforce_request_1['namespace']+_0x395260(0x1e9),{'mdlId':_0x2d8793[_0x395260(0x1c7)],'opType':salesforce_request_type_1[_0x395260(0x1d0)][_0x395260(0x1ef)],'message':_0x30e380[_0x395260(0x1fd)]||_0x30e380});})[_0x3ab0fe(0x1ca)](_0x1388d6=>logger[_0x3ab0fe(0x1e3)](_0x1388d6['message'])),{'message':_0x3ab0fe(0x1f8)};}async[a101_0x3fce65(0x1cb)](_0x109ef8){const _0x58e530=a101_0x3fce65,_0x2389b4=(0x0,salesforce_request_1[_0x58e530(0x1db)])(auth_utils_1[_0x58e530(0x1dd)][_0x58e530(0x1df)](_0x109ef8['instanceUrl']));return(0x0,deploy_attachment_service_1['deployComponents'])(_0x109ef8,_0x2389b4)[_0x58e530(0x202)](_0x15b5f2=>{const _0x2d2e35=_0x58e530;return _0x2389b4[_0x2d2e35(0x1e5)](_0x2d2e35(0x207)+salesforce_request_1[_0x2d2e35(0x1cf)]+_0x2d2e35(0x1e9),{'mdlId':_0x109ef8[_0x2d2e35(0x1c7)],'asyncId':_0x15b5f2,'opType':salesforce_request_type_1[_0x2d2e35(0x1d0)]['DEPLOY']});})[_0x58e530(0x1ca)](_0x291a0a=>{const _0x36fe4a=_0x58e530;return _0x2389b4[_0x36fe4a(0x1e5)](_0x36fe4a(0x207)+salesforce_request_1['namespace']+_0x36fe4a(0x1e9),{'mdlId':_0x109ef8[_0x36fe4a(0x1c7)],'opType':salesforce_request_type_1[_0x36fe4a(0x1d0)][_0x36fe4a(0x1ef)],'message':_0x291a0a[_0x36fe4a(0x1fd)]||_0x291a0a});})[_0x58e530(0x1ca)](_0x567d1d=>logger[_0x58e530(0x1e3)](_0x567d1d[_0x58e530(0x1fd)])),{'message':_0x58e530(0x1f8)};}};__decorate([(0x0,core_1['Post'])(a101_0x3fce65(0x1f0)),__param(0x0,core_1['param'][a101_0x3fce65(0x1f2)]()),__metadata(a101_0x3fce65(0x1c8),Function),__metadata(a101_0x3fce65(0x1fe),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a101_0x3fce65(0x1e8)],a101_0x3fce65(0x1f6),null),__decorate([(0x0,core_1[a101_0x3fce65(0x1e0)])('fetch-test-classes'),__param(0x0,core_1['param']['body']()),__metadata(a101_0x3fce65(0x1c8),Function),__metadata(a101_0x3fce65(0x1fe),[Object]),__metadata(a101_0x3fce65(0x208),Promise)],FunctionsController[a101_0x3fce65(0x1e8)],a101_0x3fce65(0x1d2),null),__decorate([(0x0,core_1[a101_0x3fce65(0x1e0)])(a101_0x3fce65(0x203)),__param(0x0,core_1[a101_0x3fce65(0x20b)][a101_0x3fce65(0x1f2)]()),__metadata(a101_0x3fce65(0x1c8),Function),__metadata(a101_0x3fce65(0x1fe),[Object]),__metadata(a101_0x3fce65(0x208),Promise)],FunctionsController[a101_0x3fce65(0x1e8)],a101_0x3fce65(0x1d3),null),__decorate([(0x0,core_1[a101_0x3fce65(0x1e0)])(a101_0x3fce65(0x1e6)),__param(0x0,core_1[a101_0x3fce65(0x20b)]['body']()),__metadata(a101_0x3fce65(0x1c8),Function),__metadata(a101_0x3fce65(0x1fe),[Object]),__metadata(a101_0x3fce65(0x208),Promise)],FunctionsController[a101_0x3fce65(0x1e8)],a101_0x3fce65(0x1cb),null),FunctionsController=__decorate([(0x0,core_1['Controller'])(a101_0x3fce65(0x1ce)),(0x0,core_1[a101_0x3fce65(0x200)])('v1')],FunctionsController),exports[a101_0x3fce65(0x1c9)]=FunctionsController;