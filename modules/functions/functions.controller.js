const a99_0x586d29=a99_0x1a13;(function(_0x2118cc,_0x192073){const _0x2759ec=a99_0x1a13,_0x13d65a=_0x2118cc();while(!![]){try{const _0x2da432=parseInt(_0x2759ec(0x10e))/0x1+parseInt(_0x2759ec(0x106))/0x2+-parseInt(_0x2759ec(0x127))/0x3*(parseInt(_0x2759ec(0x101))/0x4)+-parseInt(_0x2759ec(0x121))/0x5*(-parseInt(_0x2759ec(0x11b))/0x6)+-parseInt(_0x2759ec(0x12e))/0x7*(-parseInt(_0x2759ec(0x132))/0x8)+parseInt(_0x2759ec(0x123))/0x9+-parseInt(_0x2759ec(0x124))/0xa;if(_0x2da432===_0x192073)break;else _0x13d65a['push'](_0x13d65a['shift']());}catch(_0x4a0ae9){_0x13d65a['push'](_0x13d65a['shift']());}}}(a99_0x2ed4,0x261b1));const a99_0x25abef=(function(){let _0x1fed30=!![];return function(_0x4d61bd,_0x26b8ad){const _0x21cdb5=_0x1fed30?function(){const _0x126292=a99_0x1a13;if(_0x26b8ad){const _0x12d80d=_0x26b8ad[_0x126292(0xfd)](_0x4d61bd,arguments);return _0x26b8ad=null,_0x12d80d;}}:function(){};return _0x1fed30=![],_0x21cdb5;};}()),a99_0x53c4c7=a99_0x25abef(this,function(){const _0xc613e6=a99_0x1a13;return a99_0x53c4c7[_0xc613e6(0x102)]()[_0xc613e6(0x119)](_0xc613e6(0xfe))[_0xc613e6(0x102)]()[_0xc613e6(0x10a)](a99_0x53c4c7)[_0xc613e6(0x119)](_0xc613e6(0xfe));});function a99_0x1a13(_0x3e3dbd,_0x2066ca){const _0x567275=a99_0x2ed4();return a99_0x1a13=function(_0x53c4c7,_0x25abef){_0x53c4c7=_0x53c4c7-0xee;let _0x2ed409=_0x567275[_0x53c4c7];return _0x2ed409;},a99_0x1a13(_0x3e3dbd,_0x2066ca);}a99_0x53c4c7();'use strict';var __decorate=this&&this[a99_0x586d29(0x10f)]||function(_0x257f89,_0x1de509,_0x46c944,_0x570ced){const _0xb4c5ac=a99_0x586d29;var _0x6e4420=arguments[_0xb4c5ac(0x11e)],_0xf85d86=_0x6e4420<0x3?_0x1de509:_0x570ced===null?_0x570ced=Object[_0xb4c5ac(0x103)](_0x1de509,_0x46c944):_0x570ced,_0xed4cb5;if(typeof Reflect==='object'&&typeof Reflect[_0xb4c5ac(0x113)]==='function')_0xf85d86=Reflect[_0xb4c5ac(0x113)](_0x257f89,_0x1de509,_0x46c944,_0x570ced);else{for(var _0x3e3d17=_0x257f89['length']-0x1;_0x3e3d17>=0x0;_0x3e3d17--)if(_0xed4cb5=_0x257f89[_0x3e3d17])_0xf85d86=(_0x6e4420<0x3?_0xed4cb5(_0xf85d86):_0x6e4420>0x3?_0xed4cb5(_0x1de509,_0x46c944,_0xf85d86):_0xed4cb5(_0x1de509,_0x46c944))||_0xf85d86;}return _0x6e4420>0x3&&_0xf85d86&&Object[_0xb4c5ac(0x131)](_0x1de509,_0x46c944,_0xf85d86),_0xf85d86;},__metadata=this&&this[a99_0x586d29(0xf3)]||function(_0x8c5b34,_0x356b15){const _0x29f88d=a99_0x586d29;if(typeof Reflect===_0x29f88d(0x117)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x8c5b34,_0x356b15);},__param=this&&this[a99_0x586d29(0xf2)]||function(_0x86b269,_0x1d16ab){return function(_0x3e96fa,_0x5d3474){_0x1d16ab(_0x3e96fa,_0x5d3474,_0x86b269);};};function a99_0x2ed4(){const _0x3e4330=['search','./utils/salesforce-request','222GzyGhT','message','fetchTestClasses','length','body','/services/apexrest','21805LSjERV','__esModule','2078415dUTTca','5360450UJsvGy','Job\x20started\x20successfully','createRequest','9CctjQF','functions','./utils/auth.utils','catch','Controller','namespace','SAVE_BACKUP_ZIP','112MpSJBV','../../core','then','defineProperty','40072aFPHuz','./services/fetch-test-classes.service','AuthUtils','credentials','GET_TESTS','deployComponents','./services/generate-zip.service','retrieve','AxiosInstanceUtils','__param','__metadata','fetch-test-classes','AuthManager','@flosum/salesforce','Post','metadataLogId','design:type','design:paramtypes','/async','server','apply','(((.+)+)+)+$','ERROR','../shared/managers/auth.manager','153620zUiRFx','toString','getOwnPropertyDescriptor','retrieveZip','FunctionsController','603726XRmjkY','design:returntype','./services/deploy-attachment.service','./types/salesforce-request.type','constructor','generateAndDeployZip','getAuthParameters','param','33042BDyVfW','__decorate','generate-deploy-zip','post','OptionType','decorate','error','prototype','instanceUrl','object','create'];a99_0x2ed4=function(){return _0x3e4330;};return a99_0x2ed4();}Object['defineProperty'](exports,a99_0x586d29(0x122),{'value':!![]}),exports[a99_0x586d29(0x105)]=void 0x0;const core_1=require(a99_0x586d29(0x12f)),salesforce_request_type_1=require(a99_0x586d29(0x109)),retrieve_zip_service_1=require('./services/retrieve-zip.service'),generate_zip_service_1=require(a99_0x586d29(0xef)),fetch_test_classes_service_1=require(a99_0x586d29(0x133)),deploy_attachment_service_1=require(a99_0x586d29(0x108)),salesforce_request_1=require(a99_0x586d29(0x11a)),auth_utils_1=require(a99_0x586d29(0x129)),auth_manager_1=require(a99_0x586d29(0x100)),salesforce_1=require(a99_0x586d29(0xf6)),logger=new core_1['Logger'](a99_0x586d29(0xfc));let FunctionsController=class FunctionsController{async[a99_0x586d29(0x104)](_0x19bf26){const _0x2ff528=a99_0x586d29,_0x39ec20=(0x0,salesforce_request_1['createRequest'])(auth_utils_1['AuthUtils']['getAuthParameters'](_0x19bf26[_0x2ff528(0x116)]));return(0x0,retrieve_zip_service_1['retrieveZip'])(_0x19bf26,_0x39ec20)['then'](()=>{const _0x172ca8=_0x2ff528;return _0x39ec20[_0x172ca8(0x111)](_0x172ca8(0x120)+salesforce_request_1[_0x172ca8(0x12c)]+_0x172ca8(0xfb),{'mdlId':_0x19bf26[_0x172ca8(0xf8)],'opType':salesforce_request_type_1[_0x172ca8(0x112)][_0x172ca8(0x12d)]});})[_0x2ff528(0x12a)](_0x145a1c=>{const _0x5754c9=_0x2ff528;return _0x39ec20[_0x5754c9(0x111)](_0x5754c9(0x120)+salesforce_request_1[_0x5754c9(0x12c)]+_0x5754c9(0xfb),{'mdlId':_0x19bf26['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x5754c9(0xff)],'message':_0x145a1c[_0x5754c9(0x11c)]||_0x145a1c});})[_0x2ff528(0x12a)](_0xb860ab=>logger[_0x2ff528(0x114)](_0xb860ab[_0x2ff528(0x11c)])),{'message':_0x2ff528(0x125)};}async[a99_0x586d29(0x11d)](_0x11a9d2){const _0x1704bb=a99_0x586d29,_0x3bf322=(0x0,salesforce_request_1[_0x1704bb(0x126)])(auth_utils_1[_0x1704bb(0x134)][_0x1704bb(0x10c)](_0x11a9d2[_0x1704bb(0x116)]));return(0x0,fetch_test_classes_service_1[_0x1704bb(0x11d)])(_0x11a9d2,_0x3bf322)[_0x1704bb(0x130)](()=>{const _0x30355f=_0x1704bb;return _0x3bf322[_0x30355f(0x111)](_0x30355f(0x120)+salesforce_request_1[_0x30355f(0x12c)]+_0x30355f(0xfb),{'mdlId':_0x11a9d2[_0x30355f(0xf8)],'opType':salesforce_request_type_1['OptionType'][_0x30355f(0x136)]});})['catch'](_0x5d071d=>{const _0x276496=_0x1704bb;return _0x3bf322['post'](_0x276496(0x120)+salesforce_request_1['namespace']+_0x276496(0xfb),{'mdlId':_0x11a9d2[_0x276496(0xf8)],'opType':salesforce_request_type_1[_0x276496(0x112)]['ERROR'],'message':_0x5d071d[_0x276496(0x11c)]||_0x5d071d});})[_0x1704bb(0x12a)](_0x401dbb=>logger[_0x1704bb(0x114)](_0x401dbb[_0x1704bb(0x11c)])),{'message':'Job\x20started\x20successfully'};}async[a99_0x586d29(0x10b)](_0x21a392){const _0x234657=a99_0x586d29,_0x5659d0=(0x0,salesforce_request_1[_0x234657(0x126)])(auth_utils_1[_0x234657(0x134)]['getAuthParameters'](_0x21a392[_0x234657(0x116)])),_0x45fd62=await salesforce_1[_0x234657(0xf1)][_0x234657(0x118)](new auth_manager_1[(_0x234657(0xf5))](_0x21a392[_0x234657(0x135)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0x234657(0x10b)])(_0x21a392,_0x5659d0,_0x45fd62)['then'](_0x1af234=>{const _0x387b26=_0x234657;return _0x5659d0[_0x387b26(0x111)](_0x387b26(0x120)+salesforce_request_1[_0x387b26(0x12c)]+_0x387b26(0xfb),{'mdlId':_0x21a392[_0x387b26(0xf8)],'opType':salesforce_request_type_1['OptionType']['SAVE_DEPLOY_ZIP'],'attachment':_0x1af234});})[_0x234657(0x12a)](_0x1ea656=>{const _0x559701=_0x234657;return _0x5659d0[_0x559701(0x111)](_0x559701(0x120)+salesforce_request_1[_0x559701(0x12c)]+_0x559701(0xfb),{'mdlId':_0x21a392[_0x559701(0xf8)],'opType':salesforce_request_type_1[_0x559701(0x112)][_0x559701(0xff)],'message':_0x1ea656['message']||_0x1ea656});})[_0x234657(0x12a)](_0x4d3711=>logger[_0x234657(0x114)](_0x4d3711['message'])),{'message':_0x234657(0x125)};}async[a99_0x586d29(0xee)](_0x14539d){const _0x54eadf=a99_0x586d29,_0x1a4249=(0x0,salesforce_request_1[_0x54eadf(0x126)])(auth_utils_1['AuthUtils'][_0x54eadf(0x10c)](_0x14539d[_0x54eadf(0x116)]));return(0x0,deploy_attachment_service_1['deployComponents'])(_0x14539d,_0x1a4249)[_0x54eadf(0x130)](_0x1b1a6c=>{const _0x324338=_0x54eadf;return _0x1a4249['post']('/services/apexrest'+salesforce_request_1[_0x324338(0x12c)]+_0x324338(0xfb),{'mdlId':_0x14539d[_0x324338(0xf8)],'asyncId':_0x1b1a6c,'opType':salesforce_request_type_1[_0x324338(0x112)]['DEPLOY']});})[_0x54eadf(0x12a)](_0x22e969=>{const _0x2324b9=_0x54eadf;return _0x1a4249['post'](_0x2324b9(0x120)+salesforce_request_1[_0x2324b9(0x12c)]+_0x2324b9(0xfb),{'mdlId':_0x14539d['metadataLogId'],'opType':salesforce_request_type_1[_0x2324b9(0x112)][_0x2324b9(0xff)],'message':_0x22e969[_0x2324b9(0x11c)]||_0x22e969});})[_0x54eadf(0x12a)](_0x2c57f6=>logger[_0x54eadf(0x114)](_0x2c57f6[_0x54eadf(0x11c)])),{'message':'Job\x20started\x20successfully'};}};__decorate([(0x0,core_1[a99_0x586d29(0xf7)])(a99_0x586d29(0xf0)),__param(0x0,core_1[a99_0x586d29(0x10d)][a99_0x586d29(0x11f)]()),__metadata(a99_0x586d29(0xf9),Function),__metadata(a99_0x586d29(0xfa),[Object]),__metadata(a99_0x586d29(0x107),Promise)],FunctionsController[a99_0x586d29(0x115)],a99_0x586d29(0x104),null),__decorate([(0x0,core_1['Post'])(a99_0x586d29(0xf4)),__param(0x0,core_1[a99_0x586d29(0x10d)][a99_0x586d29(0x11f)]()),__metadata(a99_0x586d29(0xf9),Function),__metadata(a99_0x586d29(0xfa),[Object]),__metadata(a99_0x586d29(0x107),Promise)],FunctionsController['prototype'],a99_0x586d29(0x11d),null),__decorate([(0x0,core_1[a99_0x586d29(0xf7)])(a99_0x586d29(0x110)),__param(0x0,core_1['param']['body']()),__metadata(a99_0x586d29(0xf9),Function),__metadata(a99_0x586d29(0xfa),[Object]),__metadata(a99_0x586d29(0x107),Promise)],FunctionsController['prototype'],a99_0x586d29(0x10b),null),__decorate([(0x0,core_1['Post'])('deploy-components'),__param(0x0,core_1[a99_0x586d29(0x10d)][a99_0x586d29(0x11f)]()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a99_0x586d29(0x107),Promise)],FunctionsController[a99_0x586d29(0x115)],a99_0x586d29(0xee),null),FunctionsController=__decorate([(0x0,core_1[a99_0x586d29(0x12b)])(a99_0x586d29(0x128)),(0x0,core_1['Version'])('v1')],FunctionsController),exports[a99_0x586d29(0x105)]=FunctionsController;