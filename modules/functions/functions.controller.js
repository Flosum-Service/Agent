const a101_0x1a7d6b=a101_0x3a11;(function(_0x637499,_0x26eef9){const _0x240a37=a101_0x3a11,_0xf74cbe=_0x637499();while(!![]){try{const _0xa89f71=-parseInt(_0x240a37(0x160))/0x1+parseInt(_0x240a37(0x162))/0x2+-parseInt(_0x240a37(0x14a))/0x3*(parseInt(_0x240a37(0x163))/0x4)+parseInt(_0x240a37(0x16f))/0x5*(parseInt(_0x240a37(0x16d))/0x6)+-parseInt(_0x240a37(0x167))/0x7+-parseInt(_0x240a37(0x181))/0x8*(-parseInt(_0x240a37(0x180))/0x9)+-parseInt(_0x240a37(0x184))/0xa*(-parseInt(_0x240a37(0x144))/0xb);if(_0xa89f71===_0x26eef9)break;else _0xf74cbe['push'](_0xf74cbe['shift']());}catch(_0x4eefa3){_0xf74cbe['push'](_0xf74cbe['shift']());}}}(a101_0x4633,0x1d862));const a101_0x3fca74=(function(){let _0x48bedf=!![];return function(_0x3f055f,_0x5397f1){const _0x37c19e=_0x48bedf?function(){const _0x2cf2b2=a101_0x3a11;if(_0x5397f1){const _0x271adc=_0x5397f1[_0x2cf2b2(0x14b)](_0x3f055f,arguments);return _0x5397f1=null,_0x271adc;}}:function(){};return _0x48bedf=![],_0x37c19e;};}()),a101_0x29459f=a101_0x3fca74(this,function(){const _0x3fa3a6=a101_0x3a11;return a101_0x29459f[_0x3fa3a6(0x169)]()['search'](_0x3fa3a6(0x189))[_0x3fa3a6(0x169)]()[_0x3fa3a6(0x173)](a101_0x29459f)['search'](_0x3fa3a6(0x189));});a101_0x29459f();'use strict';function a101_0x3a11(_0x4c9079,_0x56ea4f){const _0x4a8b82=a101_0x4633();return a101_0x3a11=function(_0x29459f,_0x3fca74){_0x29459f=_0x29459f-0x143;let _0x463376=_0x4a8b82[_0x29459f];return _0x463376;},a101_0x3a11(_0x4c9079,_0x56ea4f);}var __decorate=this&&this[a101_0x1a7d6b(0x15e)]||function(_0xb33f51,_0x54a47f,_0x3c6514,_0x3847d7){const _0x1fd3fb=a101_0x1a7d6b;var _0x530a16=arguments['length'],_0x4d8334=_0x530a16<0x3?_0x54a47f:_0x3847d7===null?_0x3847d7=Object[_0x1fd3fb(0x155)](_0x54a47f,_0x3c6514):_0x3847d7,_0x369ac9;if(typeof Reflect===_0x1fd3fb(0x185)&&typeof Reflect['decorate']===_0x1fd3fb(0x17f))_0x4d8334=Reflect[_0x1fd3fb(0x159)](_0xb33f51,_0x54a47f,_0x3c6514,_0x3847d7);else{for(var _0x3b8999=_0xb33f51[_0x1fd3fb(0x148)]-0x1;_0x3b8999>=0x0;_0x3b8999--)if(_0x369ac9=_0xb33f51[_0x3b8999])_0x4d8334=(_0x530a16<0x3?_0x369ac9(_0x4d8334):_0x530a16>0x3?_0x369ac9(_0x54a47f,_0x3c6514,_0x4d8334):_0x369ac9(_0x54a47f,_0x3c6514))||_0x4d8334;}return _0x530a16>0x3&&_0x4d8334&&Object['defineProperty'](_0x54a47f,_0x3c6514,_0x4d8334),_0x4d8334;},__metadata=this&&this['__metadata']||function(_0x2ead68,_0x1c0fa0){const _0x5210f7=a101_0x1a7d6b;if(typeof Reflect==='object'&&typeof Reflect[_0x5210f7(0x17c)]===_0x5210f7(0x17f))return Reflect[_0x5210f7(0x17c)](_0x2ead68,_0x1c0fa0);},__param=this&&this[a101_0x1a7d6b(0x143)]||function(_0x147685,_0x2b20cf){return function(_0x5b98ff,_0x51c3b4){_0x2b20cf(_0x5b98ff,_0x51c3b4,_0x147685);};};Object[a101_0x1a7d6b(0x178)](exports,a101_0x1a7d6b(0x179),{'value':!![]}),exports[a101_0x1a7d6b(0x158)]=void 0x0;const core_1=require(a101_0x1a7d6b(0x172)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require(a101_0x1a7d6b(0x153)),generate_zip_service_1=require(a101_0x1a7d6b(0x14e)),fetch_test_classes_service_1=require(a101_0x1a7d6b(0x176)),deploy_attachment_service_1=require('./services/deploy-attachment.service'),salesforce_request_1=require(a101_0x1a7d6b(0x14c)),auth_utils_1=require(a101_0x1a7d6b(0x170)),auth_manager_1=require(a101_0x1a7d6b(0x168)),salesforce_1=require('@flosum/salesforce'),logger=new core_1[(a101_0x1a7d6b(0x156))]('server');let FunctionsController=class FunctionsController{async[a101_0x1a7d6b(0x174)](_0x6c1743){const _0x15b19d=a101_0x1a7d6b,_0xfbc2e3=(0x0,salesforce_request_1[_0x15b19d(0x149)])(auth_utils_1[_0x15b19d(0x14d)][_0x15b19d(0x147)](_0x6c1743[_0x15b19d(0x182)]));return(0x0,retrieve_zip_service_1[_0x15b19d(0x174)])(_0x6c1743,_0xfbc2e3)[_0x15b19d(0x165)](()=>{const _0x52f57a=_0x15b19d;return _0xfbc2e3[_0x52f57a(0x188)](_0x52f57a(0x146)+salesforce_request_1['namespace']+_0x52f57a(0x15b),{'mdlId':_0x6c1743[_0x52f57a(0x17d)],'opType':salesforce_request_type_1[_0x52f57a(0x15f)][_0x52f57a(0x18b)]});})[_0x15b19d(0x18a)](_0x58248b=>{const _0x19b15e=_0x15b19d;return _0xfbc2e3[_0x19b15e(0x188)]('/services/apexrest'+salesforce_request_1[_0x19b15e(0x15d)]+'/async',{'mdlId':_0x6c1743[_0x19b15e(0x17d)],'opType':salesforce_request_type_1[_0x19b15e(0x15f)][_0x19b15e(0x150)],'message':_0x58248b[_0x19b15e(0x166)]||_0x58248b});})['catch'](_0x13b2c9=>logger[_0x15b19d(0x186)](_0x13b2c9['message'])),{'message':_0x15b19d(0x152)};}async['fetchTestClasses'](_0x5e67a7){const _0x4c4b45=a101_0x1a7d6b,_0x179a5d=(0x0,salesforce_request_1['createRequest'])(auth_utils_1['AuthUtils']['getAuthParameters'](_0x5e67a7['instanceUrl']));return(0x0,fetch_test_classes_service_1[_0x4c4b45(0x164)])(_0x5e67a7,_0x179a5d)[_0x4c4b45(0x165)](()=>{const _0x402b7c=_0x4c4b45;return _0x179a5d[_0x402b7c(0x188)](_0x402b7c(0x146)+salesforce_request_1['namespace']+_0x402b7c(0x15b),{'mdlId':_0x5e67a7[_0x402b7c(0x17d)],'opType':salesforce_request_type_1['OptionType']['GET_TESTS']});})[_0x4c4b45(0x18a)](_0x27b788=>{const _0x5c7740=_0x4c4b45;return _0x179a5d['post'](_0x5c7740(0x146)+salesforce_request_1['namespace']+_0x5c7740(0x15b),{'mdlId':_0x5e67a7[_0x5c7740(0x17d)],'opType':salesforce_request_type_1[_0x5c7740(0x15f)][_0x5c7740(0x150)],'message':_0x27b788['message']||_0x27b788});})[_0x4c4b45(0x18a)](_0x383a4b=>logger[_0x4c4b45(0x186)](_0x383a4b[_0x4c4b45(0x166)])),{'message':_0x4c4b45(0x152)};}async['generateAndDeployZip'](_0x2f53ed){const _0x7f7b6=a101_0x1a7d6b,_0x49fe81=(0x0,salesforce_request_1[_0x7f7b6(0x149)])(auth_utils_1[_0x7f7b6(0x14d)][_0x7f7b6(0x147)](_0x2f53ed['instanceUrl'])),_0x48fab1=await salesforce_1[_0x7f7b6(0x17e)][_0x7f7b6(0x157)](new auth_manager_1['AuthManager'](_0x2f53ed[_0x7f7b6(0x175)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x2f53ed,_0x49fe81,_0x48fab1)[_0x7f7b6(0x165)](_0x4f2086=>{const _0x1b2af=_0x7f7b6;return _0x49fe81[_0x1b2af(0x188)](_0x1b2af(0x146)+salesforce_request_1[_0x1b2af(0x15d)]+'/async',{'mdlId':_0x2f53ed[_0x1b2af(0x17d)],'opType':salesforce_request_type_1[_0x1b2af(0x15f)][_0x1b2af(0x15a)],'attachment':_0x4f2086});})[_0x7f7b6(0x18a)](_0x2756d0=>{const _0xbe2c7f=_0x7f7b6;return _0x49fe81['post'](_0xbe2c7f(0x146)+salesforce_request_1[_0xbe2c7f(0x15d)]+_0xbe2c7f(0x15b),{'mdlId':_0x2f53ed[_0xbe2c7f(0x17d)],'opType':salesforce_request_type_1[_0xbe2c7f(0x15f)][_0xbe2c7f(0x150)],'message':_0x2756d0[_0xbe2c7f(0x166)]||_0x2756d0});})['catch'](_0x5c9d85=>logger[_0x7f7b6(0x186)](_0x5c9d85[_0x7f7b6(0x166)])),{'message':_0x7f7b6(0x152)};}async[a101_0x1a7d6b(0x15c)](_0x14dfa1){const _0x490ef7=a101_0x1a7d6b,_0x3d8fea=(0x0,salesforce_request_1[_0x490ef7(0x149)])(auth_utils_1[_0x490ef7(0x14d)][_0x490ef7(0x147)](_0x14dfa1[_0x490ef7(0x182)]));return(0x0,deploy_attachment_service_1[_0x490ef7(0x15c)])(_0x14dfa1,_0x3d8fea)[_0x490ef7(0x165)](_0x46ba1c=>{const _0x4e6ade=_0x490ef7;return _0x3d8fea[_0x4e6ade(0x188)](_0x4e6ade(0x146)+salesforce_request_1[_0x4e6ade(0x15d)]+'/async',{'mdlId':_0x14dfa1['metadataLogId'],'asyncId':_0x46ba1c,'opType':salesforce_request_type_1[_0x4e6ade(0x15f)][_0x4e6ade(0x187)]});})[_0x490ef7(0x18a)](_0x769bb4=>{const _0x204d3a=_0x490ef7;return _0x3d8fea['post'](_0x204d3a(0x146)+salesforce_request_1[_0x204d3a(0x15d)]+'/async',{'mdlId':_0x14dfa1[_0x204d3a(0x17d)],'opType':salesforce_request_type_1['OptionType'][_0x204d3a(0x150)],'message':_0x769bb4[_0x204d3a(0x166)]||_0x769bb4});})[_0x490ef7(0x18a)](_0x560ebe=>logger['error'](_0x560ebe[_0x490ef7(0x166)])),{'message':'Job\x20started\x20successfully'};}};__decorate([(0x0,core_1['Post'])(a101_0x1a7d6b(0x177)),__param(0x0,core_1[a101_0x1a7d6b(0x154)][a101_0x1a7d6b(0x145)]()),__metadata(a101_0x1a7d6b(0x16a),Function),__metadata(a101_0x1a7d6b(0x16b),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a101_0x1a7d6b(0x161)],a101_0x1a7d6b(0x174),null),__decorate([(0x0,core_1[a101_0x1a7d6b(0x17b)])(a101_0x1a7d6b(0x171)),__param(0x0,core_1[a101_0x1a7d6b(0x154)][a101_0x1a7d6b(0x145)]()),__metadata(a101_0x1a7d6b(0x16a),Function),__metadata(a101_0x1a7d6b(0x16b),[Object]),__metadata(a101_0x1a7d6b(0x16c),Promise)],FunctionsController['prototype'],a101_0x1a7d6b(0x164),null),__decorate([(0x0,core_1[a101_0x1a7d6b(0x17b)])(a101_0x1a7d6b(0x14f)),__param(0x0,core_1['param'][a101_0x1a7d6b(0x145)]()),__metadata(a101_0x1a7d6b(0x16a),Function),__metadata(a101_0x1a7d6b(0x16b),[Object]),__metadata(a101_0x1a7d6b(0x16c),Promise)],FunctionsController['prototype'],a101_0x1a7d6b(0x16e),null),__decorate([(0x0,core_1[a101_0x1a7d6b(0x17b)])(a101_0x1a7d6b(0x151)),__param(0x0,core_1[a101_0x1a7d6b(0x154)]['body']()),__metadata(a101_0x1a7d6b(0x16a),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],FunctionsController['prototype'],a101_0x1a7d6b(0x15c),null),FunctionsController=__decorate([(0x0,core_1[a101_0x1a7d6b(0x17a)])('functions'),(0x0,core_1[a101_0x1a7d6b(0x183)])('v1')],FunctionsController),exports[a101_0x1a7d6b(0x158)]=FunctionsController;function a101_0x4633(){const _0x3ab0c5=['createRequest','231XIPRIn','apply','./utils/salesforce-request','AuthUtils','./services/generate-zip.service','generate-deploy-zip','ERROR','deploy-components','Job\x20started\x20successfully','./services/retrieve-zip.service','param','getOwnPropertyDescriptor','Logger','create','FunctionsController','decorate','SAVE_DEPLOY_ZIP','/async','deployComponents','namespace','__decorate','OptionType','60332KwYChm','prototype','383804iOyBBl','11520yQVvFk','fetchTestClasses','then','message','9772FSQYxD','../shared/managers/auth.manager','toString','design:type','design:paramtypes','design:returntype','6zqPAog','generateAndDeployZip','189515goWIEb','./utils/auth.utils','fetch-test-classes','../../core','constructor','retrieveZip','credentials','./services/fetch-test-classes.service','retrieve','defineProperty','__esModule','Controller','Post','metadata','metadataLogId','AxiosInstanceUtils','function','43353qJSjGf','208BqhupO','instanceUrl','Version','23510BhbKNw','object','error','DEPLOY','post','(((.+)+)+)+$','catch','SAVE_BACKUP_ZIP','__param','231ququaf','body','/services/apexrest','getAuthParameters','length'];a101_0x4633=function(){return _0x3ab0c5;};return a101_0x4633();}