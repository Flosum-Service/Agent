const a102_0x5dc018=a102_0x5845;(function(_0x46d5ed,_0x6e3a68){const _0x2c692c=a102_0x5845,_0x3f2167=_0x46d5ed();while(!![]){try{const _0x29d52b=-parseInt(_0x2c692c(0xb5))/0x1+parseInt(_0x2c692c(0x93))/0x2+parseInt(_0x2c692c(0x99))/0x3*(-parseInt(_0x2c692c(0x98))/0x4)+parseInt(_0x2c692c(0x97))/0x5+-parseInt(_0x2c692c(0xbb))/0x6*(-parseInt(_0x2c692c(0x9c))/0x7)+parseInt(_0x2c692c(0xbd))/0x8+parseInt(_0x2c692c(0xae))/0x9;if(_0x29d52b===_0x6e3a68)break;else _0x3f2167['push'](_0x3f2167['shift']());}catch(_0x122daa){_0x3f2167['push'](_0x3f2167['shift']());}}}(a102_0x563a,0xe38c9));const a102_0x1ed19a=(function(){let _0xea848d=!![];return function(_0x5222b2,_0x1a4682){const _0x3bd473=_0xea848d?function(){if(_0x1a4682){const _0x5c73fc=_0x1a4682['apply'](_0x5222b2,arguments);return _0x1a4682=null,_0x5c73fc;}}:function(){};return _0xea848d=![],_0x3bd473;};}()),a102_0x313da0=a102_0x1ed19a(this,function(){const _0x43945d=a102_0x5845;return a102_0x313da0[_0x43945d(0x9e)]()[_0x43945d(0xce)]('(((.+)+)+)+$')['toString']()[_0x43945d(0xbc)](a102_0x313da0)[_0x43945d(0xce)](_0x43945d(0xb2));});a102_0x313da0();'use strict';function a102_0x5845(_0x56ea23,_0x25a91e){const _0x19b983=a102_0x563a();return a102_0x5845=function(_0x313da0,_0x1ed19a){_0x313da0=_0x313da0-0x93;let _0x563afa=_0x19b983[_0x313da0];return _0x563afa;},a102_0x5845(_0x56ea23,_0x25a91e);}var __decorate=this&&this[a102_0x5dc018(0xd7)]||function(_0x4419bc,_0x5e1cce,_0x49e44e,_0x47703f){const _0x5f2c8c=a102_0x5dc018;var _0x2ddb58=arguments['length'],_0x582aa1=_0x2ddb58<0x3?_0x5e1cce:_0x47703f===null?_0x47703f=Object[_0x5f2c8c(0xc1)](_0x5e1cce,_0x49e44e):_0x47703f,_0x236d01;if(typeof Reflect===_0x5f2c8c(0xc6)&&typeof Reflect[_0x5f2c8c(0xba)]===_0x5f2c8c(0xd3))_0x582aa1=Reflect[_0x5f2c8c(0xba)](_0x4419bc,_0x5e1cce,_0x49e44e,_0x47703f);else{for(var _0x731227=_0x4419bc[_0x5f2c8c(0xab)]-0x1;_0x731227>=0x0;_0x731227--)if(_0x236d01=_0x4419bc[_0x731227])_0x582aa1=(_0x2ddb58<0x3?_0x236d01(_0x582aa1):_0x2ddb58>0x3?_0x236d01(_0x5e1cce,_0x49e44e,_0x582aa1):_0x236d01(_0x5e1cce,_0x49e44e))||_0x582aa1;}return _0x2ddb58>0x3&&_0x582aa1&&Object[_0x5f2c8c(0x94)](_0x5e1cce,_0x49e44e,_0x582aa1),_0x582aa1;},__metadata=this&&this[a102_0x5dc018(0x9a)]||function(_0x21e025,_0x3ff975){const _0x44f314=a102_0x5dc018;if(typeof Reflect===_0x44f314(0xc6)&&typeof Reflect[_0x44f314(0xb7)]===_0x44f314(0xd3))return Reflect['metadata'](_0x21e025,_0x3ff975);},__param=this&&this[a102_0x5dc018(0x95)]||function(_0x290265,_0x48302a){return function(_0x17e214,_0x5a34bd){_0x48302a(_0x17e214,_0x5a34bd,_0x290265);};};Object[a102_0x5dc018(0x94)](exports,a102_0x5dc018(0xa7),{'value':!![]}),exports[a102_0x5dc018(0xb9)]=void 0x0;const core_1=require(a102_0x5dc018(0xc8)),salesforce_request_type_1=require(a102_0x5dc018(0xcd)),retrieve_zip_service_1=require('./services/retrieve-zip.service'),generate_zip_service_1=require('./services/generate-zip.service'),fetch_test_classes_service_1=require(a102_0x5dc018(0xd4)),deploy_attachment_service_1=require(a102_0x5dc018(0xbf)),salesforce_request_1=require(a102_0x5dc018(0xca)),auth_utils_1=require(a102_0x5dc018(0xd1)),auth_manager_1=require(a102_0x5dc018(0xd0)),salesforce_1=require('@flosum/salesforce'),logger=new core_1[(a102_0x5dc018(0xa9))](a102_0x5dc018(0xa2));let FunctionsController=class FunctionsController{async[a102_0x5dc018(0xa3)](_0x2a7e6b){const _0x1c9ee8=a102_0x5dc018,_0x3169c1=(0x0,salesforce_request_1[_0x1c9ee8(0x9d)])(auth_utils_1['AuthUtils']['getAuthParameters'](_0x2a7e6b[_0x1c9ee8(0xad)])),_0x4c8c6a=await salesforce_1[_0x1c9ee8(0xc7)][_0x1c9ee8(0xb0)](new auth_manager_1[(_0x1c9ee8(0xd6))](_0x2a7e6b[_0x1c9ee8(0xa0)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,retrieve_zip_service_1[_0x1c9ee8(0xa3)])(_0x2a7e6b,_0x3169c1,_0x4c8c6a)[_0x1c9ee8(0x96)](()=>{const _0x202e0a=_0x1c9ee8;return _0x3169c1[_0x202e0a(0xb3)]('/services/apexrest'+salesforce_request_1[_0x202e0a(0xcb)]+'/async',{'mdlId':_0x2a7e6b['metadataLogId'],'opType':salesforce_request_type_1[_0x202e0a(0xc4)]['SAVE_BACKUP_ZIP']});})[_0x1c9ee8(0xa4)](_0x52edfd=>{const _0x3578cc=_0x1c9ee8;return _0x3169c1['post'](_0x3578cc(0xd9)+salesforce_request_1['namespace']+_0x3578cc(0xa6),{'mdlId':_0x2a7e6b[_0x3578cc(0xc0)],'opType':salesforce_request_type_1[_0x3578cc(0xc4)][_0x3578cc(0xc3)],'message':_0x52edfd[_0x3578cc(0xc9)]||_0x52edfd});})[_0x1c9ee8(0xa4)](_0x457368=>logger[_0x1c9ee8(0xc2)](_0x457368['message'])),{'message':_0x1c9ee8(0xac)};}async['fetchTestClasses'](_0x4bff2c){const _0x5c99de=a102_0x5dc018,_0x3aae8d=(0x0,salesforce_request_1[_0x5c99de(0x9d)])(auth_utils_1['AuthUtils'][_0x5c99de(0xb6)](_0x4bff2c[_0x5c99de(0xad)]));return(0x0,fetch_test_classes_service_1[_0x5c99de(0xc5)])(_0x4bff2c,_0x3aae8d)['then'](()=>{const _0x514dcd=_0x5c99de;return _0x3aae8d['post'](_0x514dcd(0xd9)+salesforce_request_1[_0x514dcd(0xcb)]+_0x514dcd(0xa6),{'mdlId':_0x4bff2c[_0x514dcd(0xc0)],'opType':salesforce_request_type_1[_0x514dcd(0xc4)]['GET_TESTS']});})[_0x5c99de(0xa4)](_0x3c834d=>{const _0x576be4=_0x5c99de;return _0x3aae8d[_0x576be4(0xb3)](_0x576be4(0xd9)+salesforce_request_1[_0x576be4(0xcb)]+_0x576be4(0xa6),{'mdlId':_0x4bff2c[_0x576be4(0xc0)],'opType':salesforce_request_type_1[_0x576be4(0xc4)][_0x576be4(0xc3)],'message':_0x3c834d[_0x576be4(0xc9)]||_0x3c834d});})[_0x5c99de(0xa4)](_0x50ea35=>logger['error'](_0x50ea35['message'])),{'message':_0x5c99de(0xac)};}async[a102_0x5dc018(0xb8)](_0x4e2dfa){const _0x26041a=a102_0x5dc018,_0x201c04=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x26041a(0xb1)][_0x26041a(0xb6)](_0x4e2dfa['instanceUrl'])),_0x40ad70=await salesforce_1[_0x26041a(0xc7)][_0x26041a(0xb0)](new auth_manager_1[(_0x26041a(0xd6))](_0x4e2dfa[_0x26041a(0xa0)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0x26041a(0xb8)])(_0x4e2dfa,_0x201c04,_0x40ad70)[_0x26041a(0x96)](_0x18926a=>{const _0x3af26c=_0x26041a;return _0x201c04['post'](_0x3af26c(0xd9)+salesforce_request_1[_0x3af26c(0xcb)]+_0x3af26c(0xa6),{'mdlId':_0x4e2dfa[_0x3af26c(0xc0)],'opType':salesforce_request_type_1[_0x3af26c(0xc4)]['SAVE_DEPLOY_ZIP'],'attachment':_0x18926a});})['catch'](_0x404273=>{const _0x2959e8=_0x26041a;return _0x201c04[_0x2959e8(0xb3)]('/services/apexrest'+salesforce_request_1[_0x2959e8(0xcb)]+_0x2959e8(0xa6),{'mdlId':_0x4e2dfa['metadataLogId'],'opType':salesforce_request_type_1[_0x2959e8(0xc4)][_0x2959e8(0xc3)],'message':_0x404273[_0x2959e8(0xc9)]||_0x404273});})[_0x26041a(0xa4)](_0x318a8b=>logger[_0x26041a(0xc2)](_0x318a8b['message'])),{'message':_0x26041a(0xac)};}async[a102_0x5dc018(0xa1)](_0x4d03a5){const _0x56d142=a102_0x5dc018,_0x21007b=(0x0,salesforce_request_1[_0x56d142(0x9d)])(auth_utils_1[_0x56d142(0xb1)][_0x56d142(0xb6)](_0x4d03a5[_0x56d142(0xad)])),_0x4d8368=await salesforce_1[_0x56d142(0xc7)][_0x56d142(0xb0)](new auth_manager_1['AuthManager'](_0x4d03a5[_0x56d142(0xa0)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,deploy_attachment_service_1[_0x56d142(0xa1)])(_0x4d03a5,_0x21007b,_0x4d8368)[_0x56d142(0x96)](_0x46ab87=>{const _0xb74295=_0x56d142;return _0x21007b[_0xb74295(0xb3)](_0xb74295(0xd9)+salesforce_request_1[_0xb74295(0xcb)]+_0xb74295(0xa6),{'mdlId':_0x4d03a5[_0xb74295(0xc0)],'asyncId':_0x46ab87,'opType':salesforce_request_type_1[_0xb74295(0xc4)][_0xb74295(0xd5)]});})[_0x56d142(0xa4)](_0x3d6843=>{const _0x1003cc=_0x56d142;return _0x21007b[_0x1003cc(0xb3)](_0x1003cc(0xd9)+salesforce_request_1[_0x1003cc(0xcb)]+'/async',{'mdlId':_0x4d03a5['metadataLogId'],'opType':salesforce_request_type_1[_0x1003cc(0xc4)]['ERROR'],'message':_0x3d6843['message']||_0x3d6843});})[_0x56d142(0xa4)](_0x44e0b9=>logger[_0x56d142(0xc2)](_0x44e0b9[_0x56d142(0xc9)])),{'message':_0x56d142(0xac)};}};function a102_0x563a(){const _0x5bc022=['894898bBJMZt','defineProperty','__param','then','2339460CCfeYy','20ErUygH','534615nHBUQX','__metadata','Version','217uDRAQk','createRequest','toString','Controller','credentials','deployComponents','server','retrieveZip','catch','param','/async','__esModule','prototype','Logger','fetch-test-classes','length','Job\x20started\x20successfully','instanceUrl','6717933CiGlfy','body','create','AuthUtils','(((.+)+)+)+$','post','design:paramtypes','1498788BIHnwS','getAuthParameters','metadata','generateAndDeployZip','FunctionsController','decorate','86154oTYjKb','constructor','9719576dfARkL','retrieve','./services/deploy-attachment.service','metadataLogId','getOwnPropertyDescriptor','error','ERROR','OptionType','fetchTestClasses','object','AxiosInstanceUtils','../../core','message','./utils/salesforce-request','namespace','Post','./types/salesforce-request.type','search','deploy-components','../shared/managers/auth.manager','./utils/auth.utils','generate-deploy-zip','function','./services/fetch-test-classes.service','DEPLOY','AuthManager','__decorate','design:type','/services/apexrest','design:returntype'];a102_0x563a=function(){return _0x5bc022;};return a102_0x563a();}__decorate([(0x0,core_1[a102_0x5dc018(0xcc)])(a102_0x5dc018(0xbe)),__param(0x0,core_1[a102_0x5dc018(0xa5)][a102_0x5dc018(0xaf)]()),__metadata('design:type',Function),__metadata(a102_0x5dc018(0xb4),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a102_0x5dc018(0xa8)],a102_0x5dc018(0xa3),null),__decorate([(0x0,core_1[a102_0x5dc018(0xcc)])(a102_0x5dc018(0xaa)),__param(0x0,core_1[a102_0x5dc018(0xa5)][a102_0x5dc018(0xaf)]()),__metadata(a102_0x5dc018(0xd8),Function),__metadata(a102_0x5dc018(0xb4),[Object]),__metadata(a102_0x5dc018(0xda),Promise)],FunctionsController[a102_0x5dc018(0xa8)],a102_0x5dc018(0xc5),null),__decorate([(0x0,core_1['Post'])(a102_0x5dc018(0xd2)),__param(0x0,core_1['param'][a102_0x5dc018(0xaf)]()),__metadata(a102_0x5dc018(0xd8),Function),__metadata(a102_0x5dc018(0xb4),[Object]),__metadata(a102_0x5dc018(0xda),Promise)],FunctionsController[a102_0x5dc018(0xa8)],a102_0x5dc018(0xb8),null),__decorate([(0x0,core_1[a102_0x5dc018(0xcc)])(a102_0x5dc018(0xcf)),__param(0x0,core_1[a102_0x5dc018(0xa5)][a102_0x5dc018(0xaf)]()),__metadata(a102_0x5dc018(0xd8),Function),__metadata(a102_0x5dc018(0xb4),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a102_0x5dc018(0xa8)],'deployComponents',null),FunctionsController=__decorate([(0x0,core_1[a102_0x5dc018(0x9f)])('functions'),(0x0,core_1[a102_0x5dc018(0x9b)])('v1')],FunctionsController),exports[a102_0x5dc018(0xb9)]=FunctionsController;