const a51_0x24193f=a51_0x4277;(function(_0x35b721,_0x41aeda){const _0x32d3d0=a51_0x4277,_0x126363=_0x35b721();while(!![]){try{const _0x216f74=-parseInt(_0x32d3d0(0xec))/0x1+parseInt(_0x32d3d0(0xf5))/0x2+parseInt(_0x32d3d0(0xe0))/0x3+parseInt(_0x32d3d0(0xe9))/0x4+parseInt(_0x32d3d0(0xe6))/0x5*(-parseInt(_0x32d3d0(0xd0))/0x6)+-parseInt(_0x32d3d0(0xd9))/0x7*(-parseInt(_0x32d3d0(0xd4))/0x8)+parseInt(_0x32d3d0(0xea))/0x9*(parseInt(_0x32d3d0(0xe7))/0xa);if(_0x216f74===_0x41aeda)break;else _0x126363['push'](_0x126363['shift']());}catch(_0x5c738c){_0x126363['push'](_0x126363['shift']());}}}(a51_0x1507,0xec8a8));const a51_0x346752=(function(){let _0x55d566=!![];return function(_0x193237,_0x1d48e7){const _0x5077f3=_0x55d566?function(){if(_0x1d48e7){const _0x4bf0ce=_0x1d48e7['apply'](_0x193237,arguments);return _0x1d48e7=null,_0x4bf0ce;}}:function(){};return _0x55d566=![],_0x5077f3;};}()),a51_0x4d4146=a51_0x346752(this,function(){const _0x3ede06=a51_0x4277;return a51_0x4d4146[_0x3ede06(0xd7)]()[_0x3ede06(0xf8)]('(((.+)+)+)+$')[_0x3ede06(0xd7)]()[_0x3ede06(0xe3)](a51_0x4d4146)['search'](_0x3ede06(0xee));});a51_0x4d4146();'use strict';var __decorate=this&&this[a51_0x24193f(0xc2)]||function(_0x3b0b3f,_0x3cafe9,_0x5e96a7,_0x140daf){const _0x32279c=a51_0x24193f;var _0x962d99=arguments['length'],_0x261c43=_0x962d99<0x3?_0x3cafe9:_0x140daf===null?_0x140daf=Object['getOwnPropertyDescriptor'](_0x3cafe9,_0x5e96a7):_0x140daf,_0x330262;if(typeof Reflect===_0x32279c(0xf6)&&typeof Reflect[_0x32279c(0xf2)]==='function')_0x261c43=Reflect[_0x32279c(0xf2)](_0x3b0b3f,_0x3cafe9,_0x5e96a7,_0x140daf);else{for(var _0x1a8da2=_0x3b0b3f[_0x32279c(0xd2)]-0x1;_0x1a8da2>=0x0;_0x1a8da2--)if(_0x330262=_0x3b0b3f[_0x1a8da2])_0x261c43=(_0x962d99<0x3?_0x330262(_0x261c43):_0x962d99>0x3?_0x330262(_0x3cafe9,_0x5e96a7,_0x261c43):_0x330262(_0x3cafe9,_0x5e96a7))||_0x261c43;}return _0x962d99>0x3&&_0x261c43&&Object[_0x32279c(0xc8)](_0x3cafe9,_0x5e96a7,_0x261c43),_0x261c43;},__metadata=this&&this[a51_0x24193f(0xcf)]||function(_0x4bc8e0,_0x5c5aac){const _0x36dfc2=a51_0x24193f;if(typeof Reflect===_0x36dfc2(0xf6)&&typeof Reflect[_0x36dfc2(0xd8)]==='function')return Reflect[_0x36dfc2(0xd8)](_0x4bc8e0,_0x5c5aac);},__param=this&&this['__param']||function(_0x4f887c,_0x4c2b8d){return function(_0x5c018c,_0x46dc80){_0x4c2b8d(_0x5c018c,_0x46dc80,_0x4f887c);};};Object[a51_0x24193f(0xc8)](exports,'__esModule',{'value':!![]}),exports[a51_0x24193f(0xd6)]=void 0x0;function a51_0x4277(_0x4d2750,_0x156d38){const _0x4ff22a=a51_0x1507();return a51_0x4277=function(_0x4d4146,_0x346752){_0x4d4146=_0x4d4146-0xc2;let _0x150770=_0x4ff22a[_0x4d4146];return _0x150770;},a51_0x4277(_0x4d2750,_0x156d38);}const core_1=require(a51_0x24193f(0xeb)),salesforce_request_type_1=require(a51_0x24193f(0xdc)),retrieve_zip_service_1=require(a51_0x24193f(0xc5)),generate_zip_service_1=require('./services/generate-zip.service'),fetch_test_classes_service_1=require(a51_0x24193f(0xfd)),deploy_attachment_service_1=require(a51_0x24193f(0xfb)),salesforce_request_1=require('./utils/salesforce-request'),auth_utils_1=require('./utils/auth.utils'),logger=new core_1[(a51_0x24193f(0xdb))](a51_0x24193f(0xca));let FunctionsController=class FunctionsController{async['retrieveZip'](_0x598d97){const _0xc6853c=a51_0x24193f,_0x493a4f=(0x0,salesforce_request_1[_0xc6853c(0xe1)])(auth_utils_1['AuthUtils']['getAuthParameters'](_0x598d97[_0xc6853c(0xf9)]));return(0x0,retrieve_zip_service_1[_0xc6853c(0xc6)])(_0x598d97,_0x493a4f)[_0xc6853c(0xff)](()=>{const _0x30ce90=_0xc6853c;return _0x493a4f[_0x30ce90(0xd5)]('/services/apexrest'+salesforce_request_1[_0x30ce90(0xcc)]+_0x30ce90(0xfc),{'mdlId':_0x598d97[_0x30ce90(0xda)],'opType':salesforce_request_type_1[_0x30ce90(0xce)][_0x30ce90(0xc9)]});})[_0xc6853c(0xcb)](_0x23c268=>{const _0x1c1e1d=_0xc6853c;return _0x493a4f[_0x1c1e1d(0xd5)](_0x1c1e1d(0xe8)+salesforce_request_1[_0x1c1e1d(0xcc)]+_0x1c1e1d(0xfc),{'mdlId':_0x598d97[_0x1c1e1d(0xda)],'opType':salesforce_request_type_1[_0x1c1e1d(0xce)][_0x1c1e1d(0xc7)],'message':_0x23c268[_0x1c1e1d(0xd3)]||_0x23c268});})[_0xc6853c(0xcb)](_0x56677b=>logger[_0xc6853c(0xe5)](_0x56677b[_0xc6853c(0xd3)])),{'message':_0xc6853c(0xe4)};}async[a51_0x24193f(0xcd)](_0x43fb88){const _0x5b8da7=a51_0x24193f,_0x379469=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x5b8da7(0xef)][_0x5b8da7(0x100)](_0x43fb88[_0x5b8da7(0xf9)]));return(0x0,fetch_test_classes_service_1[_0x5b8da7(0xcd)])(_0x43fb88,_0x379469)['then'](()=>{const _0x417582=_0x5b8da7;return _0x379469[_0x417582(0xd5)](_0x417582(0xe8)+salesforce_request_1['namespace']+_0x417582(0xfc),{'mdlId':_0x43fb88[_0x417582(0xda)],'opType':salesforce_request_type_1[_0x417582(0xce)]['GET_TESTS']});})[_0x5b8da7(0xcb)](_0xd094ec=>{const _0x57d909=_0x5b8da7;return _0x379469[_0x57d909(0xd5)](_0x57d909(0xe8)+salesforce_request_1[_0x57d909(0xcc)]+_0x57d909(0xfc),{'mdlId':_0x43fb88['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x57d909(0xc7)],'message':_0xd094ec[_0x57d909(0xd3)]||_0xd094ec});})[_0x5b8da7(0xcb)](_0x41bd6e=>logger[_0x5b8da7(0xe5)](_0x41bd6e[_0x5b8da7(0xd3)])),{'message':_0x5b8da7(0xe4)};}async[a51_0x24193f(0xdd)](_0x1b9c1c){const _0x37aa0c=a51_0x24193f,_0x6af5d5=(0x0,salesforce_request_1[_0x37aa0c(0xe1)])(auth_utils_1[_0x37aa0c(0xef)]['getAuthParameters'](_0x1b9c1c[_0x37aa0c(0xf9)]));return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x1b9c1c,_0x6af5d5)[_0x37aa0c(0xff)](_0x498a23=>{const _0x5149ee=_0x37aa0c;return _0x6af5d5['post']('/services/apexrest'+salesforce_request_1[_0x5149ee(0xcc)]+_0x5149ee(0xfc),{'mdlId':_0x1b9c1c[_0x5149ee(0xda)],'opType':salesforce_request_type_1['OptionType'][_0x5149ee(0xed)],'attachment':_0x498a23});})[_0x37aa0c(0xcb)](_0x4dd97e=>{const _0x3633b9=_0x37aa0c;return _0x6af5d5[_0x3633b9(0xd5)]('/services/apexrest'+salesforce_request_1[_0x3633b9(0xcc)]+_0x3633b9(0xfc),{'mdlId':_0x1b9c1c[_0x3633b9(0xda)],'opType':salesforce_request_type_1[_0x3633b9(0xce)][_0x3633b9(0xc7)],'message':_0x4dd97e[_0x3633b9(0xd3)]||_0x4dd97e});})[_0x37aa0c(0xcb)](_0x23bf39=>logger['error'](_0x23bf39[_0x37aa0c(0xd3)])),{'message':_0x37aa0c(0xe4)};}async[a51_0x24193f(0xf4)](_0x997a27){const _0x200a22=a51_0x24193f,_0x2a38ef=(0x0,salesforce_request_1['createRequest'])(auth_utils_1['AuthUtils'][_0x200a22(0x100)](_0x997a27[_0x200a22(0xf9)]));return(0x0,deploy_attachment_service_1[_0x200a22(0xf4)])(_0x997a27,_0x2a38ef)[_0x200a22(0xff)](_0x4cebdc=>{const _0x43c49f=_0x200a22;return _0x2a38ef[_0x43c49f(0xd5)](_0x43c49f(0xe8)+salesforce_request_1[_0x43c49f(0xcc)]+_0x43c49f(0xfc),{'mdlId':_0x997a27[_0x43c49f(0xda)],'asyncId':_0x4cebdc,'opType':salesforce_request_type_1[_0x43c49f(0xce)]['DEPLOY']});})[_0x200a22(0xcb)](_0x28f9b7=>{const _0x13c02c=_0x200a22;return _0x2a38ef[_0x13c02c(0xd5)](_0x13c02c(0xe8)+salesforce_request_1[_0x13c02c(0xcc)]+_0x13c02c(0xfc),{'mdlId':_0x997a27[_0x13c02c(0xda)],'opType':salesforce_request_type_1[_0x13c02c(0xce)][_0x13c02c(0xc7)],'message':_0x28f9b7[_0x13c02c(0xd3)]||_0x28f9b7});})[_0x200a22(0xcb)](_0x45a219=>logger['error'](_0x45a219[_0x200a22(0xd3)])),{'message':_0x200a22(0xe4)};}};__decorate([(0x0,core_1[a51_0x24193f(0xde)])(a51_0x24193f(0xfe)),__param(0x0,core_1['param'][a51_0x24193f(0xf0)]()),__metadata('design:type',Function),__metadata(a51_0x24193f(0xf3),[Object]),__metadata(a51_0x24193f(0xc4),Promise)],FunctionsController[a51_0x24193f(0xfa)],'retrieveZip',null),__decorate([(0x0,core_1['Post'])(a51_0x24193f(0xc3)),__param(0x0,core_1[a51_0x24193f(0xdf)][a51_0x24193f(0xf0)]()),__metadata(a51_0x24193f(0xe2),Function),__metadata(a51_0x24193f(0xf3),[Object]),__metadata(a51_0x24193f(0xc4),Promise)],FunctionsController[a51_0x24193f(0xfa)],a51_0x24193f(0xcd),null),__decorate([(0x0,core_1[a51_0x24193f(0xde)])(a51_0x24193f(0xf7)),__param(0x0,core_1['param'][a51_0x24193f(0xf0)]()),__metadata(a51_0x24193f(0xe2),Function),__metadata('design:paramtypes',[Object]),__metadata(a51_0x24193f(0xc4),Promise)],FunctionsController[a51_0x24193f(0xfa)],a51_0x24193f(0xdd),null),__decorate([(0x0,core_1[a51_0x24193f(0xde)])(a51_0x24193f(0xf1)),__param(0x0,core_1[a51_0x24193f(0xdf)][a51_0x24193f(0xf0)]()),__metadata(a51_0x24193f(0xe2),Function),__metadata(a51_0x24193f(0xf3),[Object]),__metadata(a51_0x24193f(0xc4),Promise)],FunctionsController[a51_0x24193f(0xfa)],a51_0x24193f(0xf4),null),FunctionsController=__decorate([(0x0,core_1['Controller'])('functions'),(0x0,core_1[a51_0x24193f(0xd1)])('v1')],FunctionsController),exports[a51_0x24193f(0xd6)]=FunctionsController;function a51_0x1507(){const _0x266c19=['body','deploy-components','decorate','design:paramtypes','deployComponents','1236482WDRose','object','generate-deploy-zip','search','instanceUrl','prototype','./services/deploy-attachment.service','/async','./services/fetch-test-classes.service','retrieve','then','getAuthParameters','__decorate','fetch-test-classes','design:returntype','./services/retrieve-zip.service','retrieveZip','ERROR','defineProperty','SAVE_BACKUP_ZIP','server','catch','namespace','fetchTestClasses','OptionType','__metadata','10558230YDdBwg','Version','length','message','9936QYpbtz','post','FunctionsController','toString','metadata','1442JJtFaf','metadataLogId','Logger','./types/salesforce-request.type','generateAndDeployZip','Post','param','4079670TDpsZZ','createRequest','design:type','constructor','Job\x20started\x20successfully','error','5Iulkzv','1400JMTGwZ','/services/apexrest','4694152RIbIIE','65619ZfCdPn','../../core','1699684QvzEgS','SAVE_DEPLOY_ZIP','(((.+)+)+)+$','AuthUtils'];a51_0x1507=function(){return _0x266c19;};return a51_0x1507();}