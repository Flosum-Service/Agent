const a83_0x2641a4=a83_0x4ef7;(function(_0x1d07f4,_0x10a923){const _0x46328c=a83_0x4ef7,_0xcff2c3=_0x1d07f4();while(!![]){try{const _0x4d79d0=-parseInt(_0x46328c(0xd4))/0x1*(-parseInt(_0x46328c(0x9a))/0x2)+parseInt(_0x46328c(0xd0))/0x3+-parseInt(_0x46328c(0x9f))/0x4*(parseInt(_0x46328c(0xc9))/0x5)+parseInt(_0x46328c(0xad))/0x6+parseInt(_0x46328c(0xb3))/0x7+-parseInt(_0x46328c(0xcb))/0x8*(parseInt(_0x46328c(0xa7))/0x9)+parseInt(_0x46328c(0xc8))/0xa*(parseInt(_0x46328c(0xd3))/0xb);if(_0x4d79d0===_0x10a923)break;else _0xcff2c3['push'](_0xcff2c3['shift']());}catch(_0x252389){_0xcff2c3['push'](_0xcff2c3['shift']());}}}(a83_0x802e,0x672c7));const a83_0x3f022c=(function(){let _0x38f8da=!![];return function(_0x2962ac,_0x5753ec){const _0x526f2b=_0x38f8da?function(){if(_0x5753ec){const _0x42aeb3=_0x5753ec['apply'](_0x2962ac,arguments);return _0x5753ec=null,_0x42aeb3;}}:function(){};return _0x38f8da=![],_0x526f2b;};}()),a83_0x41897e=a83_0x3f022c(this,function(){const _0x25aa68=a83_0x4ef7;return a83_0x41897e[_0x25aa68(0x9b)]()[_0x25aa68(0xab)](_0x25aa68(0xa3))[_0x25aa68(0x9b)]()[_0x25aa68(0xcd)](a83_0x41897e)[_0x25aa68(0xab)](_0x25aa68(0xa3));});a83_0x41897e();'use strict';var __decorate=this&&this[a83_0x2641a4(0xb2)]||function(_0x1ed1af,_0x57eee0,_0x188191,_0x42bf25){const _0x4c7ad5=a83_0x2641a4;var _0x3b55b5=arguments[_0x4c7ad5(0xa2)],_0x1724df=_0x3b55b5<0x3?_0x57eee0:_0x42bf25===null?_0x42bf25=Object[_0x4c7ad5(0xbe)](_0x57eee0,_0x188191):_0x42bf25,_0x448d49;if(typeof Reflect===_0x4c7ad5(0xb9)&&typeof Reflect[_0x4c7ad5(0xaf)]===_0x4c7ad5(0xca))_0x1724df=Reflect[_0x4c7ad5(0xaf)](_0x1ed1af,_0x57eee0,_0x188191,_0x42bf25);else{for(var _0x5cc3d0=_0x1ed1af[_0x4c7ad5(0xa2)]-0x1;_0x5cc3d0>=0x0;_0x5cc3d0--)if(_0x448d49=_0x1ed1af[_0x5cc3d0])_0x1724df=(_0x3b55b5<0x3?_0x448d49(_0x1724df):_0x3b55b5>0x3?_0x448d49(_0x57eee0,_0x188191,_0x1724df):_0x448d49(_0x57eee0,_0x188191))||_0x1724df;}return _0x3b55b5>0x3&&_0x1724df&&Object[_0x4c7ad5(0xb7)](_0x57eee0,_0x188191,_0x1724df),_0x1724df;},__metadata=this&&this['__metadata']||function(_0x589efa,_0x29bf5d){const _0x19b5d2=a83_0x2641a4;if(typeof Reflect===_0x19b5d2(0xb9)&&typeof Reflect['metadata']===_0x19b5d2(0xca))return Reflect['metadata'](_0x589efa,_0x29bf5d);},__param=this&&this['__param']||function(_0x8a9c43,_0x38073c){return function(_0x2b5447,_0x18e6d1){_0x38073c(_0x2b5447,_0x18e6d1,_0x8a9c43);};};function a83_0x4ef7(_0x35612a,_0x575ae1){const _0x57f284=a83_0x802e();return a83_0x4ef7=function(_0x41897e,_0x3f022c){_0x41897e=_0x41897e-0x9a;let _0x802e48=_0x57f284[_0x41897e];return _0x802e48;},a83_0x4ef7(_0x35612a,_0x575ae1);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['FunctionsController']=void 0x0;const core_1=require('../../core'),salesforce_request_type_1=require(a83_0x2641a4(0xba)),retrieve_zip_service_1=require(a83_0x2641a4(0xc4)),generate_zip_service_1=require('./services/generate-zip.service'),fetch_test_classes_service_1=require('./services/fetch-test-classes.service'),deploy_attachment_service_1=require(a83_0x2641a4(0xbd)),salesforce_request_1=require(a83_0x2641a4(0xd7)),auth_utils_1=require('./utils/auth.utils'),logger=new core_1[(a83_0x2641a4(0xb0))](a83_0x2641a4(0xc5));let FunctionsController=class FunctionsController{async[a83_0x2641a4(0xac)](_0x198b5b){const _0x348ecf=a83_0x2641a4,_0x5d49de=(0x0,salesforce_request_1[_0x348ecf(0xc6)])(auth_utils_1[_0x348ecf(0xbc)]['getAuthParameters'](_0x198b5b[_0x348ecf(0xbf)]));return(0x0,retrieve_zip_service_1[_0x348ecf(0xac)])(_0x198b5b,_0x5d49de)[_0x348ecf(0xa9)](()=>{const _0x407a2c=_0x348ecf;return _0x5d49de[_0x407a2c(0xcf)](_0x407a2c(0xa4)+salesforce_request_1['namespace']+_0x407a2c(0xb6),{'mdlId':_0x198b5b[_0x407a2c(0xbb)],'opType':salesforce_request_type_1[_0x407a2c(0xc0)]['SAVE_BACKUP_ZIP']});})[_0x348ecf(0xa5)](_0x3cdc82=>{const _0x57be71=_0x348ecf;return _0x5d49de[_0x57be71(0xcf)](_0x57be71(0xa4)+salesforce_request_1['namespace']+_0x57be71(0xb6),{'mdlId':_0x198b5b[_0x57be71(0xbb)],'opType':salesforce_request_type_1[_0x57be71(0xc0)][_0x57be71(0xd9)],'message':_0x3cdc82[_0x57be71(0x9c)]||_0x3cdc82});})['catch'](_0x2b152b=>logger[_0x348ecf(0xd1)](_0x2b152b[_0x348ecf(0x9c)])),{'message':_0x348ecf(0xc2)};}async['fetchTestClasses'](_0x4ee198){const _0x4cc8e4=a83_0x2641a4,_0x13e6ef=(0x0,salesforce_request_1[_0x4cc8e4(0xc6)])(auth_utils_1[_0x4cc8e4(0xbc)]['getAuthParameters'](_0x4ee198[_0x4cc8e4(0xbf)]));return(0x0,fetch_test_classes_service_1[_0x4cc8e4(0xcc)])(_0x4ee198,_0x13e6ef)['then'](()=>{const _0x3b5286=_0x4cc8e4;return _0x13e6ef[_0x3b5286(0xcf)]('/services/apexrest'+salesforce_request_1[_0x3b5286(0xae)]+'/async',{'mdlId':_0x4ee198[_0x3b5286(0xbb)],'opType':salesforce_request_type_1['OptionType'][_0x3b5286(0x9d)]});})[_0x4cc8e4(0xa5)](_0x5e3957=>{const _0x9c2912=_0x4cc8e4;return _0x13e6ef[_0x9c2912(0xcf)](_0x9c2912(0xa4)+salesforce_request_1[_0x9c2912(0xae)]+_0x9c2912(0xb6),{'mdlId':_0x4ee198['metadataLogId'],'opType':salesforce_request_type_1[_0x9c2912(0xc0)][_0x9c2912(0xd9)],'message':_0x5e3957[_0x9c2912(0x9c)]||_0x5e3957});})['catch'](_0x2a55ad=>logger[_0x4cc8e4(0xd1)](_0x2a55ad[_0x4cc8e4(0x9c)])),{'message':'Job\x20started\x20successfully'};}async[a83_0x2641a4(0xa1)](_0x346e19){const _0x418c4f=a83_0x2641a4,_0x32c816=(0x0,salesforce_request_1['createRequest'])(auth_utils_1['AuthUtils'][_0x418c4f(0xa6)](_0x346e19[_0x418c4f(0xbf)]));return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x346e19,_0x32c816)[_0x418c4f(0xa9)](_0x1e005d=>{const _0x19ae96=_0x418c4f;return _0x32c816[_0x19ae96(0xcf)](_0x19ae96(0xa4)+salesforce_request_1['namespace']+_0x19ae96(0xb6),{'mdlId':_0x346e19[_0x19ae96(0xbb)],'opType':salesforce_request_type_1[_0x19ae96(0xc0)][_0x19ae96(0xa0)],'attachment':_0x1e005d});})[_0x418c4f(0xa5)](_0x843b07=>{const _0x3ed785=_0x418c4f;return _0x32c816['post'](_0x3ed785(0xa4)+salesforce_request_1['namespace']+_0x3ed785(0xb6),{'mdlId':_0x346e19[_0x3ed785(0xbb)],'opType':salesforce_request_type_1[_0x3ed785(0xc0)][_0x3ed785(0xd9)],'message':_0x843b07[_0x3ed785(0x9c)]||_0x843b07});})[_0x418c4f(0xa5)](_0x30893f=>logger[_0x418c4f(0xd1)](_0x30893f[_0x418c4f(0x9c)])),{'message':_0x418c4f(0xc2)};}async[a83_0x2641a4(0xd5)](_0x9208bb){const _0x568df4=a83_0x2641a4,_0x4a7bc7=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x568df4(0xbc)][_0x568df4(0xa6)](_0x9208bb['instanceUrl']));return(0x0,deploy_attachment_service_1[_0x568df4(0xd5)])(_0x9208bb,_0x4a7bc7)[_0x568df4(0xa9)](_0x2563cf=>{const _0x260d34=_0x568df4;return _0x4a7bc7[_0x260d34(0xcf)](_0x260d34(0xa4)+salesforce_request_1[_0x260d34(0xae)]+_0x260d34(0xb6),{'mdlId':_0x9208bb[_0x260d34(0xbb)],'asyncId':_0x2563cf,'opType':salesforce_request_type_1[_0x260d34(0xc0)][_0x260d34(0xc7)]});})[_0x568df4(0xa5)](_0xd86ce7=>{const _0x5b2cc1=_0x568df4;return _0x4a7bc7[_0x5b2cc1(0xcf)](_0x5b2cc1(0xa4)+salesforce_request_1[_0x5b2cc1(0xae)]+'/async',{'mdlId':_0x9208bb[_0x5b2cc1(0xbb)],'opType':salesforce_request_type_1[_0x5b2cc1(0xc0)][_0x5b2cc1(0xd9)],'message':_0xd86ce7['message']||_0xd86ce7});})['catch'](_0x1e1b5d=>logger[_0x568df4(0xd1)](_0x1e1b5d[_0x568df4(0x9c)])),{'message':_0x568df4(0xc2)};}};function a83_0x802e(){const _0x260409=['functions','ERROR','Controller','260734ePBfct','toString','message','GET_TESTS','param','4MJdmVl','SAVE_DEPLOY_ZIP','generateAndDeployZip','length','(((.+)+)+)+$','/services/apexrest','catch','getAuthParameters','3181032ZDzvVb','Version','then','FunctionsController','search','retrieveZip','4688190imHMyp','namespace','decorate','Logger','retrieve','__decorate','579495sGRWVy','Post','generate-deploy-zip','/async','defineProperty','body','object','./types/salesforce-request.type','metadataLogId','AuthUtils','./services/deploy-attachment.service','getOwnPropertyDescriptor','instanceUrl','OptionType','design:returntype','Job\x20started\x20successfully','design:type','./services/retrieve-zip.service','server','createRequest','DEPLOY','64710dDIJqz','3568735Kphwrz','function','16MdkYZG','fetchTestClasses','constructor','design:paramtypes','post','274854lqjKxO','error','prototype','1287EYeJDz','1lbAjqm','deployComponents','fetch-test-classes','./utils/salesforce-request'];a83_0x802e=function(){return _0x260409;};return a83_0x802e();}__decorate([(0x0,core_1['Post'])(a83_0x2641a4(0xb1)),__param(0x0,core_1['param'][a83_0x2641a4(0xb8)]()),__metadata(a83_0x2641a4(0xc3),Function),__metadata(a83_0x2641a4(0xce),[Object]),__metadata('design:returntype',Promise)],FunctionsController['prototype'],'retrieveZip',null),__decorate([(0x0,core_1[a83_0x2641a4(0xb4)])(a83_0x2641a4(0xd6)),__param(0x0,core_1[a83_0x2641a4(0x9e)][a83_0x2641a4(0xb8)]()),__metadata(a83_0x2641a4(0xc3),Function),__metadata('design:paramtypes',[Object]),__metadata(a83_0x2641a4(0xc1),Promise)],FunctionsController[a83_0x2641a4(0xd2)],a83_0x2641a4(0xcc),null),__decorate([(0x0,core_1[a83_0x2641a4(0xb4)])(a83_0x2641a4(0xb5)),__param(0x0,core_1[a83_0x2641a4(0x9e)][a83_0x2641a4(0xb8)]()),__metadata(a83_0x2641a4(0xc3),Function),__metadata('design:paramtypes',[Object]),__metadata(a83_0x2641a4(0xc1),Promise)],FunctionsController[a83_0x2641a4(0xd2)],a83_0x2641a4(0xa1),null),__decorate([(0x0,core_1[a83_0x2641a4(0xb4)])('deploy-components'),__param(0x0,core_1[a83_0x2641a4(0x9e)][a83_0x2641a4(0xb8)]()),__metadata(a83_0x2641a4(0xc3),Function),__metadata(a83_0x2641a4(0xce),[Object]),__metadata(a83_0x2641a4(0xc1),Promise)],FunctionsController['prototype'],a83_0x2641a4(0xd5),null),FunctionsController=__decorate([(0x0,core_1[a83_0x2641a4(0xda)])(a83_0x2641a4(0xd8)),(0x0,core_1[a83_0x2641a4(0xa8)])('v1')],FunctionsController),exports[a83_0x2641a4(0xaa)]=FunctionsController;