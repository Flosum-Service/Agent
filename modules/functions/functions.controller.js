const a101_0x4e82e4=a101_0xa087;(function(_0x589895,_0x4d0c6e){const _0x70d0c2=a101_0xa087,_0x1c00d2=_0x589895();while(!![]){try{const _0x41e706=-parseInt(_0x70d0c2(0x114))/0x1+-parseInt(_0x70d0c2(0x10e))/0x2*(-parseInt(_0x70d0c2(0x108))/0x3)+-parseInt(_0x70d0c2(0xf6))/0x4*(-parseInt(_0x70d0c2(0xfc))/0x5)+-parseInt(_0x70d0c2(0x104))/0x6*(parseInt(_0x70d0c2(0xed))/0x7)+-parseInt(_0x70d0c2(0xf3))/0x8+parseInt(_0x70d0c2(0xd8))/0x9*(parseInt(_0x70d0c2(0x111))/0xa)+-parseInt(_0x70d0c2(0xe2))/0xb*(parseInt(_0x70d0c2(0xe8))/0xc);if(_0x41e706===_0x4d0c6e)break;else _0x1c00d2['push'](_0x1c00d2['shift']());}catch(_0x14ff4b){_0x1c00d2['push'](_0x1c00d2['shift']());}}}(a101_0x4286,0x4459e));const a101_0x4c8ecc=(function(){let _0x559332=!![];return function(_0x3a5d5b,_0x3cda24){const _0x13c082=_0x559332?function(){if(_0x3cda24){const _0x2a1f1f=_0x3cda24['apply'](_0x3a5d5b,arguments);return _0x3cda24=null,_0x2a1f1f;}}:function(){};return _0x559332=![],_0x13c082;};}()),a101_0x2b8a6a=a101_0x4c8ecc(this,function(){const _0x5643ce=a101_0xa087;return a101_0x2b8a6a[_0x5643ce(0xfb)]()[_0x5643ce(0x10c)](_0x5643ce(0xe7))[_0x5643ce(0xfb)]()['constructor'](a101_0x2b8a6a)[_0x5643ce(0x10c)]('(((.+)+)+)+$');});a101_0x2b8a6a();'use strict';function a101_0xa087(_0x57e1d4,_0x53f1d8){const _0x33d293=a101_0x4286();return a101_0xa087=function(_0x2b8a6a,_0x4c8ecc){_0x2b8a6a=_0x2b8a6a-0xd4;let _0x428634=_0x33d293[_0x2b8a6a];return _0x428634;},a101_0xa087(_0x57e1d4,_0x53f1d8);}var __decorate=this&&this['__decorate']||function(_0xba6adb,_0x2c6c60,_0xb5f94d,_0x11d44d){const _0x136d15=a101_0xa087;var _0x4077a2=arguments[_0x136d15(0xff)],_0x181698=_0x4077a2<0x3?_0x2c6c60:_0x11d44d===null?_0x11d44d=Object[_0x136d15(0x100)](_0x2c6c60,_0xb5f94d):_0x11d44d,_0x1baba9;if(typeof Reflect===_0x136d15(0xf8)&&typeof Reflect[_0x136d15(0xfd)]===_0x136d15(0xf5))_0x181698=Reflect[_0x136d15(0xfd)](_0xba6adb,_0x2c6c60,_0xb5f94d,_0x11d44d);else{for(var _0xda2a11=_0xba6adb[_0x136d15(0xff)]-0x1;_0xda2a11>=0x0;_0xda2a11--)if(_0x1baba9=_0xba6adb[_0xda2a11])_0x181698=(_0x4077a2<0x3?_0x1baba9(_0x181698):_0x4077a2>0x3?_0x1baba9(_0x2c6c60,_0xb5f94d,_0x181698):_0x1baba9(_0x2c6c60,_0xb5f94d))||_0x181698;}return _0x4077a2>0x3&&_0x181698&&Object[_0x136d15(0xec)](_0x2c6c60,_0xb5f94d,_0x181698),_0x181698;},__metadata=this&&this[a101_0x4e82e4(0x102)]||function(_0x387ee0,_0x18b908){const _0x120efb=a101_0x4e82e4;if(typeof Reflect===_0x120efb(0xf8)&&typeof Reflect[_0x120efb(0x10d)]===_0x120efb(0xf5))return Reflect[_0x120efb(0x10d)](_0x387ee0,_0x18b908);},__param=this&&this[a101_0x4e82e4(0x107)]||function(_0x63e54e,_0x42e5e8){return function(_0x510077,_0x29baf8){_0x42e5e8(_0x510077,_0x29baf8,_0x63e54e);};};function a101_0x4286(){const _0xd59339=['__esModule','20ulPsIh','deployComponents','generateAndDeployZip','299962yDtQGV','post','Version','credentials','@flosum/salesforce','SAVE_DEPLOY_ZIP','OptionType','error','create','generate-deploy-zip','getAuthParameters','metadataLogId','fetchTestClasses','2329641aFFCTi','prototype','AuthManager','/services/apexrest','instanceUrl','./utils/salesforce-request','GET_TESTS','design:paramtypes','SAVE_BACKUP_ZIP','./services/generate-zip.service','11YiVDPd','FunctionsController','Controller','retrieveZip','../../core','(((.+)+)+)+$','5594700gDLjPB','catch','createRequest','./types/salesforce-request.type','defineProperty','31087kAZnGM','ERROR','DEPLOY','AxiosInstanceUtils','/async','server','1160912IoXoTY','Job\x20started\x20successfully','function','51320kMCjVa','then','object','namespace','design:returntype','toString','195qgqrId','decorate','./services/fetch-test-classes.service','length','getOwnPropertyDescriptor','body','__metadata','message','30WUrxTa','design:type','retrieve','__param','6qeLkGN','Post','./services/deploy-attachment.service','AuthUtils','search','metadata','195404jXwRbu','param'];a101_0x4286=function(){return _0xd59339;};return a101_0x4286();}Object['defineProperty'](exports,a101_0x4e82e4(0x110),{'value':!![]}),exports[a101_0x4e82e4(0xe3)]=void 0x0;const core_1=require(a101_0x4e82e4(0xe6)),salesforce_request_type_1=require(a101_0x4e82e4(0xeb)),retrieve_zip_service_1=require('./services/retrieve-zip.service'),generate_zip_service_1=require(a101_0x4e82e4(0xe1)),fetch_test_classes_service_1=require(a101_0x4e82e4(0xfe)),deploy_attachment_service_1=require(a101_0x4e82e4(0x10a)),salesforce_request_1=require(a101_0x4e82e4(0xdd)),auth_utils_1=require('./utils/auth.utils'),auth_manager_1=require('../shared/managers/auth.manager'),salesforce_1=require(a101_0x4e82e4(0x118)),logger=new core_1['Logger'](a101_0x4e82e4(0xf2));let FunctionsController=class FunctionsController{async[a101_0x4e82e4(0xe5)](_0x900e33){const _0x4946f3=a101_0x4e82e4,_0x260933=(0x0,salesforce_request_1[_0x4946f3(0xea)])(auth_utils_1[_0x4946f3(0x10b)]['getAuthParameters'](_0x900e33[_0x4946f3(0xdc)]));return(0x0,retrieve_zip_service_1[_0x4946f3(0xe5)])(_0x900e33,_0x260933)[_0x4946f3(0xf7)](()=>{const _0x394960=_0x4946f3;return _0x260933[_0x394960(0x115)]('/services/apexrest'+salesforce_request_1[_0x394960(0xf9)]+_0x394960(0xf1),{'mdlId':_0x900e33['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x394960(0xe0)]});})[_0x4946f3(0xe9)](_0x5a8dd9=>{const _0x326cd9=_0x4946f3;return _0x260933[_0x326cd9(0x115)](_0x326cd9(0xdb)+salesforce_request_1['namespace']+_0x326cd9(0xf1),{'mdlId':_0x900e33['metadataLogId'],'opType':salesforce_request_type_1['OptionType']['ERROR'],'message':_0x5a8dd9[_0x326cd9(0x103)]||_0x5a8dd9});})[_0x4946f3(0xe9)](_0x27f377=>logger['error'](_0x27f377[_0x4946f3(0x103)])),{'message':_0x4946f3(0xf4)};}async[a101_0x4e82e4(0xd7)](_0x4a4210){const _0x232bf0=a101_0x4e82e4,_0x491e78=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x232bf0(0x10b)][_0x232bf0(0xd5)](_0x4a4210[_0x232bf0(0xdc)]));return(0x0,fetch_test_classes_service_1['fetchTestClasses'])(_0x4a4210,_0x491e78)['then'](()=>{const _0x137cd9=_0x232bf0;return _0x491e78[_0x137cd9(0x115)](_0x137cd9(0xdb)+salesforce_request_1[_0x137cd9(0xf9)]+_0x137cd9(0xf1),{'mdlId':_0x4a4210[_0x137cd9(0xd6)],'opType':salesforce_request_type_1[_0x137cd9(0x11a)][_0x137cd9(0xde)]});})[_0x232bf0(0xe9)](_0x2aa96d=>{const _0x97b5cd=_0x232bf0;return _0x491e78['post'](_0x97b5cd(0xdb)+salesforce_request_1[_0x97b5cd(0xf9)]+_0x97b5cd(0xf1),{'mdlId':_0x4a4210[_0x97b5cd(0xd6)],'opType':salesforce_request_type_1[_0x97b5cd(0x11a)][_0x97b5cd(0xee)],'message':_0x2aa96d[_0x97b5cd(0x103)]||_0x2aa96d});})[_0x232bf0(0xe9)](_0xb3be6e=>logger['error'](_0xb3be6e[_0x232bf0(0x103)])),{'message':_0x232bf0(0xf4)};}async[a101_0x4e82e4(0x113)](_0x57e503){const _0xd4c21b=a101_0x4e82e4,_0x441984=(0x0,salesforce_request_1[_0xd4c21b(0xea)])(auth_utils_1[_0xd4c21b(0x10b)][_0xd4c21b(0xd5)](_0x57e503['instanceUrl'])),_0x4baf09=await salesforce_1[_0xd4c21b(0xf0)][_0xd4c21b(0x11c)](new auth_manager_1[(_0xd4c21b(0xda))](_0x57e503[_0xd4c21b(0x117)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0xd4c21b(0x113)])(_0x57e503,_0x441984,_0x4baf09)['then'](_0x32e1a8=>{const _0x33db8b=_0xd4c21b;return _0x441984[_0x33db8b(0x115)](_0x33db8b(0xdb)+salesforce_request_1[_0x33db8b(0xf9)]+_0x33db8b(0xf1),{'mdlId':_0x57e503[_0x33db8b(0xd6)],'opType':salesforce_request_type_1[_0x33db8b(0x11a)][_0x33db8b(0x119)],'attachment':_0x32e1a8});})[_0xd4c21b(0xe9)](_0x4a93a4=>{const _0x587d79=_0xd4c21b;return _0x441984[_0x587d79(0x115)](_0x587d79(0xdb)+salesforce_request_1[_0x587d79(0xf9)]+_0x587d79(0xf1),{'mdlId':_0x57e503['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x587d79(0xee)],'message':_0x4a93a4[_0x587d79(0x103)]||_0x4a93a4});})[_0xd4c21b(0xe9)](_0x485277=>logger[_0xd4c21b(0x11b)](_0x485277[_0xd4c21b(0x103)])),{'message':_0xd4c21b(0xf4)};}async[a101_0x4e82e4(0x112)](_0x1d91d5){const _0x1bd1dc=a101_0x4e82e4,_0x5d3fd3=(0x0,salesforce_request_1[_0x1bd1dc(0xea)])(auth_utils_1[_0x1bd1dc(0x10b)][_0x1bd1dc(0xd5)](_0x1d91d5[_0x1bd1dc(0xdc)]));return(0x0,deploy_attachment_service_1[_0x1bd1dc(0x112)])(_0x1d91d5,_0x5d3fd3)[_0x1bd1dc(0xf7)](_0x4ace53=>{const _0x3fbfef=_0x1bd1dc;return _0x5d3fd3['post'](_0x3fbfef(0xdb)+salesforce_request_1[_0x3fbfef(0xf9)]+_0x3fbfef(0xf1),{'mdlId':_0x1d91d5[_0x3fbfef(0xd6)],'asyncId':_0x4ace53,'opType':salesforce_request_type_1[_0x3fbfef(0x11a)][_0x3fbfef(0xef)]});})['catch'](_0x695782=>{const _0x50cb4f=_0x1bd1dc;return _0x5d3fd3[_0x50cb4f(0x115)](_0x50cb4f(0xdb)+salesforce_request_1[_0x50cb4f(0xf9)]+_0x50cb4f(0xf1),{'mdlId':_0x1d91d5[_0x50cb4f(0xd6)],'opType':salesforce_request_type_1[_0x50cb4f(0x11a)]['ERROR'],'message':_0x695782[_0x50cb4f(0x103)]||_0x695782});})[_0x1bd1dc(0xe9)](_0x1ff565=>logger[_0x1bd1dc(0x11b)](_0x1ff565['message'])),{'message':'Job\x20started\x20successfully'};}};__decorate([(0x0,core_1[a101_0x4e82e4(0x109)])(a101_0x4e82e4(0x106)),__param(0x0,core_1[a101_0x4e82e4(0x10f)]['body']()),__metadata('design:type',Function),__metadata(a101_0x4e82e4(0xdf),[Object]),__metadata(a101_0x4e82e4(0xfa),Promise)],FunctionsController[a101_0x4e82e4(0xd9)],a101_0x4e82e4(0xe5),null),__decorate([(0x0,core_1[a101_0x4e82e4(0x109)])('fetch-test-classes'),__param(0x0,core_1[a101_0x4e82e4(0x10f)][a101_0x4e82e4(0x101)]()),__metadata(a101_0x4e82e4(0x105),Function),__metadata(a101_0x4e82e4(0xdf),[Object]),__metadata(a101_0x4e82e4(0xfa),Promise)],FunctionsController[a101_0x4e82e4(0xd9)],a101_0x4e82e4(0xd7),null),__decorate([(0x0,core_1[a101_0x4e82e4(0x109)])(a101_0x4e82e4(0xd4)),__param(0x0,core_1[a101_0x4e82e4(0x10f)][a101_0x4e82e4(0x101)]()),__metadata(a101_0x4e82e4(0x105),Function),__metadata(a101_0x4e82e4(0xdf),[Object]),__metadata(a101_0x4e82e4(0xfa),Promise)],FunctionsController[a101_0x4e82e4(0xd9)],'generateAndDeployZip',null),__decorate([(0x0,core_1[a101_0x4e82e4(0x109)])('deploy-components'),__param(0x0,core_1[a101_0x4e82e4(0x10f)][a101_0x4e82e4(0x101)]()),__metadata('design:type',Function),__metadata(a101_0x4e82e4(0xdf),[Object]),__metadata(a101_0x4e82e4(0xfa),Promise)],FunctionsController['prototype'],a101_0x4e82e4(0x112),null),FunctionsController=__decorate([(0x0,core_1[a101_0x4e82e4(0xe4)])('functions'),(0x0,core_1[a101_0x4e82e4(0x116)])('v1')],FunctionsController),exports[a101_0x4e82e4(0xe3)]=FunctionsController;