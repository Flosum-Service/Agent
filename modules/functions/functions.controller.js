const a83_0x473955=a83_0x1b03;(function(_0x157819,_0x1eeb27){const _0x58f3d3=a83_0x1b03,_0x3abd18=_0x157819();while(!![]){try{const _0x5e50ed=-parseInt(_0x58f3d3(0x1aa))/0x1*(-parseInt(_0x58f3d3(0x18e))/0x2)+parseInt(_0x58f3d3(0x1b9))/0x3*(-parseInt(_0x58f3d3(0x1c0))/0x4)+parseInt(_0x58f3d3(0x1b6))/0x5+-parseInt(_0x58f3d3(0x1a8))/0x6+-parseInt(_0x58f3d3(0x1a4))/0x7*(-parseInt(_0x58f3d3(0x1b3))/0x8)+parseInt(_0x58f3d3(0x192))/0x9*(parseInt(_0x58f3d3(0x1ad))/0xa)+parseInt(_0x58f3d3(0x19a))/0xb;if(_0x5e50ed===_0x1eeb27)break;else _0x3abd18['push'](_0x3abd18['shift']());}catch(_0x5dfda3){_0x3abd18['push'](_0x3abd18['shift']());}}}(a83_0x4482,0xcb99a));const a83_0x1428af=(function(){let _0x514214=!![];return function(_0x520ee4,_0x2f2ed1){const _0x40477f=_0x514214?function(){const _0x5c2d84=a83_0x1b03;if(_0x2f2ed1){const _0x222c47=_0x2f2ed1[_0x5c2d84(0x1b1)](_0x520ee4,arguments);return _0x2f2ed1=null,_0x222c47;}}:function(){};return _0x514214=![],_0x40477f;};}()),a83_0x3e76cf=a83_0x1428af(this,function(){const _0x354e1a=a83_0x1b03;return a83_0x3e76cf[_0x354e1a(0x1be)]()['search'](_0x354e1a(0x1ac))[_0x354e1a(0x1be)]()['constructor'](a83_0x3e76cf)[_0x354e1a(0x198)](_0x354e1a(0x1ac));});a83_0x3e76cf();'use strict';function a83_0x4482(){const _0x47d7ab=['catch','./types/salesforce-request.type','prototype','/services/apexrest','metadataLogId','error','77SWDBfQ','then','ERROR','defineProperty','9731868ouYkfN','retrieveZip','45wgwDko','function','(((.+)+)+)+$','30qjZKFi','functions','body','fetch-test-classes','apply','Job\x20started\x20successfully','507376bDuhIw','SAVE_BACKUP_ZIP','Version','7680540OCOgVg','/async','design:paramtypes','201dlDTcq','metadata','param','decorate','generateAndDeployZip','toString','server','74212QHOFEl','__param','GET_TESTS','__esModule','./utils/auth.utils','AuthUtils','deployComponents','fetchTestClasses','getAuthParameters','__metadata','instanceUrl','deploy-components','design:returntype','Controller','__decorate','OptionType','object','design:type','8022PvZcit','./utils/salesforce-request','namespace','getOwnPropertyDescriptor','3758373TQKzre','DEPLOY','SAVE_DEPLOY_ZIP','post','createRequest','FunctionsController','search','generate-deploy-zip','351329LcBcRj','message','Post','./services/retrieve-zip.service'];a83_0x4482=function(){return _0x47d7ab;};return a83_0x4482();}var __decorate=this&&this[a83_0x473955(0x18a)]||function(_0x5a9fce,_0x293635,_0x130633,_0x8228ae){const _0x3ee65e=a83_0x473955;var _0x1c7d9b=arguments['length'],_0x5f2c64=_0x1c7d9b<0x3?_0x293635:_0x8228ae===null?_0x8228ae=Object[_0x3ee65e(0x191)](_0x293635,_0x130633):_0x8228ae,_0x1985be;if(typeof Reflect===_0x3ee65e(0x18c)&&typeof Reflect['decorate']===_0x3ee65e(0x1ab))_0x5f2c64=Reflect[_0x3ee65e(0x1bc)](_0x5a9fce,_0x293635,_0x130633,_0x8228ae);else{for(var _0x1a47b0=_0x5a9fce['length']-0x1;_0x1a47b0>=0x0;_0x1a47b0--)if(_0x1985be=_0x5a9fce[_0x1a47b0])_0x5f2c64=(_0x1c7d9b<0x3?_0x1985be(_0x5f2c64):_0x1c7d9b>0x3?_0x1985be(_0x293635,_0x130633,_0x5f2c64):_0x1985be(_0x293635,_0x130633))||_0x5f2c64;}return _0x1c7d9b>0x3&&_0x5f2c64&&Object['defineProperty'](_0x293635,_0x130633,_0x5f2c64),_0x5f2c64;},__metadata=this&&this[a83_0x473955(0x1c9)]||function(_0x2f344a,_0x5a59e4){const _0x473af8=a83_0x473955;if(typeof Reflect===_0x473af8(0x18c)&&typeof Reflect[_0x473af8(0x1ba)]===_0x473af8(0x1ab))return Reflect['metadata'](_0x2f344a,_0x5a59e4);},__param=this&&this[a83_0x473955(0x1c1)]||function(_0x3d686e,_0x30727d){return function(_0x5e4dd6,_0x280c3e){_0x30727d(_0x5e4dd6,_0x280c3e,_0x3d686e);};};Object[a83_0x473955(0x1a7)](exports,a83_0x473955(0x1c3),{'value':!![]}),exports[a83_0x473955(0x197)]=void 0x0;function a83_0x1b03(_0x2934db,_0x1f9aec){const _0x2a75c7=a83_0x4482();return a83_0x1b03=function(_0x3e76cf,_0x1428af){_0x3e76cf=_0x3e76cf-0x188;let _0x44823d=_0x2a75c7[_0x3e76cf];return _0x44823d;},a83_0x1b03(_0x2934db,_0x1f9aec);}const core_1=require('../../core'),salesforce_request_type_1=require(a83_0x473955(0x19f)),retrieve_zip_service_1=require(a83_0x473955(0x19d)),generate_zip_service_1=require('./services/generate-zip.service'),fetch_test_classes_service_1=require('./services/fetch-test-classes.service'),deploy_attachment_service_1=require('./services/deploy-attachment.service'),salesforce_request_1=require(a83_0x473955(0x18f)),auth_utils_1=require(a83_0x473955(0x1c4)),logger=new core_1['Logger'](a83_0x473955(0x1bf));let FunctionsController=class FunctionsController{async[a83_0x473955(0x1a9)](_0x2b81c7){const _0x36f3cf=a83_0x473955,_0x502258=(0x0,salesforce_request_1[_0x36f3cf(0x196)])(auth_utils_1['AuthUtils'][_0x36f3cf(0x1c8)](_0x2b81c7[_0x36f3cf(0x1ca)]));return(0x0,retrieve_zip_service_1[_0x36f3cf(0x1a9)])(_0x2b81c7,_0x502258)['then'](()=>{const _0x2d36ca=_0x36f3cf;return _0x502258[_0x2d36ca(0x195)](_0x2d36ca(0x1a1)+salesforce_request_1[_0x2d36ca(0x190)]+'/async',{'mdlId':_0x2b81c7[_0x2d36ca(0x1a2)],'opType':salesforce_request_type_1[_0x2d36ca(0x18b)][_0x2d36ca(0x1b4)]});})[_0x36f3cf(0x19e)](_0x7815c0=>{const _0x4784af=_0x36f3cf;return _0x502258['post'](_0x4784af(0x1a1)+salesforce_request_1['namespace']+_0x4784af(0x1b7),{'mdlId':_0x2b81c7['metadataLogId'],'opType':salesforce_request_type_1[_0x4784af(0x18b)]['ERROR'],'message':_0x7815c0[_0x4784af(0x19b)]||_0x7815c0});})['catch'](_0x2be644=>logger[_0x36f3cf(0x1a3)](_0x2be644[_0x36f3cf(0x19b)])),{'message':'Job\x20started\x20successfully'};}async['fetchTestClasses'](_0x9345dc){const _0x170bec=a83_0x473955,_0x2015f0=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x170bec(0x1c5)]['getAuthParameters'](_0x9345dc[_0x170bec(0x1ca)]));return(0x0,fetch_test_classes_service_1[_0x170bec(0x1c7)])(_0x9345dc,_0x2015f0)[_0x170bec(0x1a5)](()=>{const _0x5b4d32=_0x170bec;return _0x2015f0['post'](_0x5b4d32(0x1a1)+salesforce_request_1[_0x5b4d32(0x190)]+'/async',{'mdlId':_0x9345dc[_0x5b4d32(0x1a2)],'opType':salesforce_request_type_1[_0x5b4d32(0x18b)][_0x5b4d32(0x1c2)]});})[_0x170bec(0x19e)](_0x6857e0=>{const _0x4345b0=_0x170bec;return _0x2015f0[_0x4345b0(0x195)]('/services/apexrest'+salesforce_request_1[_0x4345b0(0x190)]+_0x4345b0(0x1b7),{'mdlId':_0x9345dc[_0x4345b0(0x1a2)],'opType':salesforce_request_type_1[_0x4345b0(0x18b)][_0x4345b0(0x1a6)],'message':_0x6857e0[_0x4345b0(0x19b)]||_0x6857e0});})[_0x170bec(0x19e)](_0x5c7883=>logger[_0x170bec(0x1a3)](_0x5c7883[_0x170bec(0x19b)])),{'message':_0x170bec(0x1b2)};}async[a83_0x473955(0x1bd)](_0x20a268){const _0xebd0d0=a83_0x473955,_0x55b685=(0x0,salesforce_request_1[_0xebd0d0(0x196)])(auth_utils_1[_0xebd0d0(0x1c5)]['getAuthParameters'](_0x20a268[_0xebd0d0(0x1ca)]));return(0x0,generate_zip_service_1[_0xebd0d0(0x1bd)])(_0x20a268,_0x55b685)[_0xebd0d0(0x1a5)](_0x1ce26a=>{const _0x49a08a=_0xebd0d0;return _0x55b685[_0x49a08a(0x195)](_0x49a08a(0x1a1)+salesforce_request_1['namespace']+'/async',{'mdlId':_0x20a268[_0x49a08a(0x1a2)],'opType':salesforce_request_type_1[_0x49a08a(0x18b)][_0x49a08a(0x194)],'attachment':_0x1ce26a});})[_0xebd0d0(0x19e)](_0x44423f=>{const _0x23ed4a=_0xebd0d0;return _0x55b685[_0x23ed4a(0x195)](_0x23ed4a(0x1a1)+salesforce_request_1['namespace']+'/async',{'mdlId':_0x20a268['metadataLogId'],'opType':salesforce_request_type_1[_0x23ed4a(0x18b)][_0x23ed4a(0x1a6)],'message':_0x44423f[_0x23ed4a(0x19b)]||_0x44423f});})[_0xebd0d0(0x19e)](_0x546189=>logger['error'](_0x546189['message'])),{'message':_0xebd0d0(0x1b2)};}async['deployComponents'](_0xb39e13){const _0x7d71f6=a83_0x473955,_0x25fe63=(0x0,salesforce_request_1[_0x7d71f6(0x196)])(auth_utils_1[_0x7d71f6(0x1c5)][_0x7d71f6(0x1c8)](_0xb39e13['instanceUrl']));return(0x0,deploy_attachment_service_1[_0x7d71f6(0x1c6)])(_0xb39e13,_0x25fe63)[_0x7d71f6(0x1a5)](_0x2dd257=>{const _0x49e0ec=_0x7d71f6;return _0x25fe63[_0x49e0ec(0x195)](_0x49e0ec(0x1a1)+salesforce_request_1[_0x49e0ec(0x190)]+_0x49e0ec(0x1b7),{'mdlId':_0xb39e13[_0x49e0ec(0x1a2)],'asyncId':_0x2dd257,'opType':salesforce_request_type_1['OptionType'][_0x49e0ec(0x193)]});})[_0x7d71f6(0x19e)](_0x5ee09c=>{const _0x1c334b=_0x7d71f6;return _0x25fe63['post'](_0x1c334b(0x1a1)+salesforce_request_1[_0x1c334b(0x190)]+_0x1c334b(0x1b7),{'mdlId':_0xb39e13[_0x1c334b(0x1a2)],'opType':salesforce_request_type_1[_0x1c334b(0x18b)]['ERROR'],'message':_0x5ee09c['message']||_0x5ee09c});})[_0x7d71f6(0x19e)](_0x329773=>logger[_0x7d71f6(0x1a3)](_0x329773[_0x7d71f6(0x19b)])),{'message':_0x7d71f6(0x1b2)};}};__decorate([(0x0,core_1[a83_0x473955(0x19c)])('retrieve'),__param(0x0,core_1['param']['body']()),__metadata(a83_0x473955(0x18d),Function),__metadata(a83_0x473955(0x1b8),[Object]),__metadata(a83_0x473955(0x188),Promise)],FunctionsController[a83_0x473955(0x1a0)],'retrieveZip',null),__decorate([(0x0,core_1['Post'])(a83_0x473955(0x1b0)),__param(0x0,core_1[a83_0x473955(0x1bb)][a83_0x473955(0x1af)]()),__metadata('design:type',Function),__metadata(a83_0x473955(0x1b8),[Object]),__metadata(a83_0x473955(0x188),Promise)],FunctionsController[a83_0x473955(0x1a0)],'fetchTestClasses',null),__decorate([(0x0,core_1[a83_0x473955(0x19c)])(a83_0x473955(0x199)),__param(0x0,core_1[a83_0x473955(0x1bb)]['body']()),__metadata(a83_0x473955(0x18d),Function),__metadata(a83_0x473955(0x1b8),[Object]),__metadata(a83_0x473955(0x188),Promise)],FunctionsController[a83_0x473955(0x1a0)],a83_0x473955(0x1bd),null),__decorate([(0x0,core_1[a83_0x473955(0x19c)])(a83_0x473955(0x1cb)),__param(0x0,core_1['param'][a83_0x473955(0x1af)]()),__metadata(a83_0x473955(0x18d),Function),__metadata(a83_0x473955(0x1b8),[Object]),__metadata(a83_0x473955(0x188),Promise)],FunctionsController[a83_0x473955(0x1a0)],a83_0x473955(0x1c6),null),FunctionsController=__decorate([(0x0,core_1[a83_0x473955(0x189)])(a83_0x473955(0x1ae)),(0x0,core_1[a83_0x473955(0x1b5)])('v1')],FunctionsController),exports[a83_0x473955(0x197)]=FunctionsController;