const a51_0x3904e5=a51_0x3d07;function a51_0x3d07(_0x5a0829,_0x221c41){const _0x12c80c=a51_0x1c5c();return a51_0x3d07=function(_0x3e5a1f,_0x2819b1){_0x3e5a1f=_0x3e5a1f-0x1d2;let _0x1c5c5e=_0x12c80c[_0x3e5a1f];return _0x1c5c5e;},a51_0x3d07(_0x5a0829,_0x221c41);}(function(_0x5b6ec8,_0x1582dc){const _0x3652b8=a51_0x3d07,_0x5445c8=_0x5b6ec8();while(!![]){try{const _0x2fe50b=-parseInt(_0x3652b8(0x1ec))/0x1*(parseInt(_0x3652b8(0x1d6))/0x2)+-parseInt(_0x3652b8(0x207))/0x3+-parseInt(_0x3652b8(0x206))/0x4*(-parseInt(_0x3652b8(0x1e3))/0x5)+-parseInt(_0x3652b8(0x1f8))/0x6+-parseInt(_0x3652b8(0x20c))/0x7+parseInt(_0x3652b8(0x204))/0x8*(parseInt(_0x3652b8(0x1e5))/0x9)+-parseInt(_0x3652b8(0x210))/0xa*(-parseInt(_0x3652b8(0x1dd))/0xb);if(_0x2fe50b===_0x1582dc)break;else _0x5445c8['push'](_0x5445c8['shift']());}catch(_0x3b8da6){_0x5445c8['push'](_0x5445c8['shift']());}}}(a51_0x1c5c,0x7364c));const a51_0x2819b1=(function(){let _0x2878b9=!![];return function(_0x376370,_0x31c8c1){const _0x98dc6e=_0x2878b9?function(){const _0xb23c7=a51_0x3d07;if(_0x31c8c1){const _0x463481=_0x31c8c1[_0xb23c7(0x20d)](_0x376370,arguments);return _0x31c8c1=null,_0x463481;}}:function(){};return _0x2878b9=![],_0x98dc6e;};}()),a51_0x3e5a1f=a51_0x2819b1(this,function(){const _0x4e8a85=a51_0x3d07;return a51_0x3e5a1f['toString']()['search'](_0x4e8a85(0x1d9))[_0x4e8a85(0x1df)]()[_0x4e8a85(0x20a)](a51_0x3e5a1f)['search'](_0x4e8a85(0x1d9));});a51_0x3e5a1f();'use strict';var __decorate=this&&this[a51_0x3904e5(0x1e6)]||function(_0x5cece9,_0x557803,_0x437870,_0x2b7d0d){const _0x2d789c=a51_0x3904e5;var _0x1887ae=arguments[_0x2d789c(0x211)],_0x53bf7d=_0x1887ae<0x3?_0x557803:_0x2b7d0d===null?_0x2b7d0d=Object[_0x2d789c(0x201)](_0x557803,_0x437870):_0x2b7d0d,_0x3c3092;if(typeof Reflect===_0x2d789c(0x1f2)&&typeof Reflect[_0x2d789c(0x203)]==='function')_0x53bf7d=Reflect['decorate'](_0x5cece9,_0x557803,_0x437870,_0x2b7d0d);else{for(var _0x2f57a3=_0x5cece9[_0x2d789c(0x211)]-0x1;_0x2f57a3>=0x0;_0x2f57a3--)if(_0x3c3092=_0x5cece9[_0x2f57a3])_0x53bf7d=(_0x1887ae<0x3?_0x3c3092(_0x53bf7d):_0x1887ae>0x3?_0x3c3092(_0x557803,_0x437870,_0x53bf7d):_0x3c3092(_0x557803,_0x437870))||_0x53bf7d;}return _0x1887ae>0x3&&_0x53bf7d&&Object['defineProperty'](_0x557803,_0x437870,_0x53bf7d),_0x53bf7d;},__metadata=this&&this[a51_0x3904e5(0x208)]||function(_0x1e7402,_0x25d7ac){const _0x3b5eca=a51_0x3904e5;if(typeof Reflect==='object'&&typeof Reflect[_0x3b5eca(0x1e2)]==='function')return Reflect[_0x3b5eca(0x1e2)](_0x1e7402,_0x25d7ac);},__param=this&&this['__param']||function(_0x40a66d,_0x281e01){return function(_0x2b8246,_0x57953f){_0x281e01(_0x2b8246,_0x57953f,_0x40a66d);};};Object[a51_0x3904e5(0x1e7)](exports,a51_0x3904e5(0x1f4),{'value':!![]}),exports['FunctionsController']=void 0x0;const core_1=require(a51_0x3904e5(0x1fe)),salesforce_request_type_1=require(a51_0x3904e5(0x1e0)),retrieve_zip_service_1=require(a51_0x3904e5(0x20e)),generate_zip_service_1=require(a51_0x3904e5(0x1ea)),fetch_test_classes_service_1=require(a51_0x3904e5(0x1eb)),deploy_attachment_service_1=require(a51_0x3904e5(0x1e8)),salesforce_request_1=require(a51_0x3904e5(0x1f1)),auth_utils_1=require('./utils/auth.utils'),logger=new core_1['Logger']('server');function a51_0x1c5c(){const _0x5c46b7=['369kpNwXo','__decorate','defineProperty','./services/deploy-attachment.service','body','./services/generate-zip.service','./services/fetch-test-classes.service','631515TuDdfI','fetchTestClasses','prototype','SAVE_DEPLOY_ZIP','metadataLogId','./utils/salesforce-request','object','Post','__esModule','GET_TESTS','message','/services/apexrest','4497534AyalxY','/async','getAuthParameters','FunctionsController','retrieveZip','error','../../core','catch','then','getOwnPropertyDescriptor','generate-deploy-zip','decorate','47704UaiWoR','generateAndDeployZip','20fujLTC','1355877WQyeiX','__metadata','Job\x20started\x20successfully','constructor','instanceUrl','6421198KueIwg','apply','./services/retrieve-zip.service','Controller','25483160JHbred','length','namespace','design:paramtypes','post','ERROR','deployComponents','DEPLOY','2LdjayQ','design:returntype','design:type','(((.+)+)+)+$','AuthUtils','createRequest','deploy-components','11cTiELx','param','toString','./types/salesforce-request.type','OptionType','metadata','430230kQTSnM','fetch-test-classes'];a51_0x1c5c=function(){return _0x5c46b7;};return a51_0x1c5c();}let FunctionsController=class FunctionsController{async['retrieveZip'](_0x260fef){const _0x3a75f2=a51_0x3904e5,_0xf3c8a2=(0x0,salesforce_request_1[_0x3a75f2(0x1db)])(auth_utils_1['AuthUtils']['getAuthParameters'](_0x260fef[_0x3a75f2(0x20b)]));return(0x0,retrieve_zip_service_1[_0x3a75f2(0x1fc)])(_0x260fef,_0xf3c8a2)[_0x3a75f2(0x200)](()=>{const _0x52ee37=_0x3a75f2;return _0xf3c8a2['post'](_0x52ee37(0x1f7)+salesforce_request_1[_0x52ee37(0x212)]+_0x52ee37(0x1f9),{'mdlId':_0x260fef[_0x52ee37(0x1f0)],'opType':salesforce_request_type_1[_0x52ee37(0x1e1)]['SAVE_BACKUP_ZIP']});})[_0x3a75f2(0x1ff)](_0x58fab0=>{const _0x319e15=_0x3a75f2;return _0xf3c8a2[_0x319e15(0x1d2)](_0x319e15(0x1f7)+salesforce_request_1[_0x319e15(0x212)]+'/async',{'mdlId':_0x260fef[_0x319e15(0x1f0)],'opType':salesforce_request_type_1[_0x319e15(0x1e1)][_0x319e15(0x1d3)],'message':_0x58fab0[_0x319e15(0x1f6)]||_0x58fab0});})[_0x3a75f2(0x1ff)](_0x31e610=>logger['error'](_0x31e610[_0x3a75f2(0x1f6)])),{'message':_0x3a75f2(0x209)};}async[a51_0x3904e5(0x1ed)](_0x3d97d2){const _0x5f5994=a51_0x3904e5,_0x106622=(0x0,salesforce_request_1[_0x5f5994(0x1db)])(auth_utils_1[_0x5f5994(0x1da)][_0x5f5994(0x1fa)](_0x3d97d2[_0x5f5994(0x20b)]));return(0x0,fetch_test_classes_service_1[_0x5f5994(0x1ed)])(_0x3d97d2,_0x106622)[_0x5f5994(0x200)](()=>{const _0x91f2f2=_0x5f5994;return _0x106622[_0x91f2f2(0x1d2)]('/services/apexrest'+salesforce_request_1[_0x91f2f2(0x212)]+'/async',{'mdlId':_0x3d97d2[_0x91f2f2(0x1f0)],'opType':salesforce_request_type_1[_0x91f2f2(0x1e1)][_0x91f2f2(0x1f5)]});})[_0x5f5994(0x1ff)](_0x19fb43=>{const _0x2a2d4a=_0x5f5994;return _0x106622[_0x2a2d4a(0x1d2)](_0x2a2d4a(0x1f7)+salesforce_request_1[_0x2a2d4a(0x212)]+_0x2a2d4a(0x1f9),{'mdlId':_0x3d97d2[_0x2a2d4a(0x1f0)],'opType':salesforce_request_type_1[_0x2a2d4a(0x1e1)]['ERROR'],'message':_0x19fb43[_0x2a2d4a(0x1f6)]||_0x19fb43});})['catch'](_0x182e04=>logger[_0x5f5994(0x1fd)](_0x182e04[_0x5f5994(0x1f6)])),{'message':_0x5f5994(0x209)};}async[a51_0x3904e5(0x205)](_0x13f964){const _0x3070a8=a51_0x3904e5,_0x4fe5fe=(0x0,salesforce_request_1[_0x3070a8(0x1db)])(auth_utils_1[_0x3070a8(0x1da)][_0x3070a8(0x1fa)](_0x13f964['instanceUrl']));return(0x0,generate_zip_service_1[_0x3070a8(0x205)])(_0x13f964,_0x4fe5fe)['then'](_0x20d8fe=>{const _0x49d24c=_0x3070a8;return _0x4fe5fe[_0x49d24c(0x1d2)](_0x49d24c(0x1f7)+salesforce_request_1[_0x49d24c(0x212)]+_0x49d24c(0x1f9),{'mdlId':_0x13f964[_0x49d24c(0x1f0)],'opType':salesforce_request_type_1[_0x49d24c(0x1e1)][_0x49d24c(0x1ef)],'attachment':_0x20d8fe});})[_0x3070a8(0x1ff)](_0x5681f6=>{const _0x3e55a9=_0x3070a8;return _0x4fe5fe[_0x3e55a9(0x1d2)]('/services/apexrest'+salesforce_request_1[_0x3e55a9(0x212)]+_0x3e55a9(0x1f9),{'mdlId':_0x13f964['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x3e55a9(0x1d3)],'message':_0x5681f6['message']||_0x5681f6});})[_0x3070a8(0x1ff)](_0x42b66a=>logger[_0x3070a8(0x1fd)](_0x42b66a['message'])),{'message':_0x3070a8(0x209)};}async[a51_0x3904e5(0x1d4)](_0x486bf6){const _0x1dac7c=a51_0x3904e5,_0x3c237a=(0x0,salesforce_request_1[_0x1dac7c(0x1db)])(auth_utils_1[_0x1dac7c(0x1da)][_0x1dac7c(0x1fa)](_0x486bf6[_0x1dac7c(0x20b)]));return(0x0,deploy_attachment_service_1[_0x1dac7c(0x1d4)])(_0x486bf6,_0x3c237a)[_0x1dac7c(0x200)](_0x9b5728=>{const _0x411162=_0x1dac7c;return _0x3c237a[_0x411162(0x1d2)](_0x411162(0x1f7)+salesforce_request_1[_0x411162(0x212)]+_0x411162(0x1f9),{'mdlId':_0x486bf6[_0x411162(0x1f0)],'asyncId':_0x9b5728,'opType':salesforce_request_type_1[_0x411162(0x1e1)][_0x411162(0x1d5)]});})[_0x1dac7c(0x1ff)](_0x4f0e6e=>{const _0x5da76a=_0x1dac7c;return _0x3c237a['post'](_0x5da76a(0x1f7)+salesforce_request_1[_0x5da76a(0x212)]+'/async',{'mdlId':_0x486bf6['metadataLogId'],'opType':salesforce_request_type_1[_0x5da76a(0x1e1)][_0x5da76a(0x1d3)],'message':_0x4f0e6e['message']||_0x4f0e6e});})['catch'](_0x459915=>logger['error'](_0x459915['message'])),{'message':'Job\x20started\x20successfully'};}};__decorate([(0x0,core_1[a51_0x3904e5(0x1f3)])('retrieve'),__param(0x0,core_1[a51_0x3904e5(0x1de)][a51_0x3904e5(0x1e9)]()),__metadata('design:type',Function),__metadata(a51_0x3904e5(0x213),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a51_0x3904e5(0x1ee)],a51_0x3904e5(0x1fc),null),__decorate([(0x0,core_1[a51_0x3904e5(0x1f3)])(a51_0x3904e5(0x1e4)),__param(0x0,core_1[a51_0x3904e5(0x1de)][a51_0x3904e5(0x1e9)]()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],FunctionsController[a51_0x3904e5(0x1ee)],a51_0x3904e5(0x1ed),null),__decorate([(0x0,core_1[a51_0x3904e5(0x1f3)])(a51_0x3904e5(0x202)),__param(0x0,core_1[a51_0x3904e5(0x1de)]['body']()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a51_0x3904e5(0x1d7),Promise)],FunctionsController[a51_0x3904e5(0x1ee)],a51_0x3904e5(0x205),null),__decorate([(0x0,core_1[a51_0x3904e5(0x1f3)])(a51_0x3904e5(0x1dc)),__param(0x0,core_1[a51_0x3904e5(0x1de)][a51_0x3904e5(0x1e9)]()),__metadata(a51_0x3904e5(0x1d8),Function),__metadata('design:paramtypes',[Object]),__metadata(a51_0x3904e5(0x1d7),Promise)],FunctionsController[a51_0x3904e5(0x1ee)],'deployComponents',null),FunctionsController=__decorate([(0x0,core_1[a51_0x3904e5(0x20f)])('functions'),(0x0,core_1['Version'])('v1')],FunctionsController),exports[a51_0x3904e5(0x1fb)]=FunctionsController;