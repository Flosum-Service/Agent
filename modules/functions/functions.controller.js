const a51_0x273cc3=a51_0xb2ce;(function(_0x4d98b2,_0x49c30a){const _0xb01dcc=a51_0xb2ce,_0x15e770=_0x4d98b2();while(!![]){try{const _0x593581=-parseInt(_0xb01dcc(0x130))/0x1*(-parseInt(_0xb01dcc(0x127))/0x2)+-parseInt(_0xb01dcc(0x14c))/0x3*(-parseInt(_0xb01dcc(0x13f))/0x4)+parseInt(_0xb01dcc(0x12d))/0x5*(-parseInt(_0xb01dcc(0x133))/0x6)+-parseInt(_0xb01dcc(0x12a))/0x7+-parseInt(_0xb01dcc(0x135))/0x8*(parseInt(_0xb01dcc(0x14a))/0x9)+parseInt(_0xb01dcc(0x131))/0xa*(parseInt(_0xb01dcc(0x120))/0xb)+parseInt(_0xb01dcc(0x129))/0xc;if(_0x593581===_0x49c30a)break;else _0x15e770['push'](_0x15e770['shift']());}catch(_0x322e32){_0x15e770['push'](_0x15e770['shift']());}}}(a51_0x1160,0x7962d));const a51_0x516375=(function(){let _0x51bf17=!![];return function(_0x201677,_0x26e2df){const _0x20d1d4=_0x51bf17?function(){const _0x22c87c=a51_0xb2ce;if(_0x26e2df){const _0x907f81=_0x26e2df[_0x22c87c(0x137)](_0x201677,arguments);return _0x26e2df=null,_0x907f81;}}:function(){};return _0x51bf17=![],_0x20d1d4;};}()),a51_0xb4c9b9=a51_0x516375(this,function(){const _0x53de51=a51_0xb2ce;return a51_0xb4c9b9[_0x53de51(0x156)]()[_0x53de51(0x153)](_0x53de51(0x14b))[_0x53de51(0x156)]()['constructor'](a51_0xb4c9b9)['search'](_0x53de51(0x14b));});a51_0xb4c9b9();'use strict';function a51_0xb2ce(_0x24d82d,_0x1c188c){const _0x54467a=a51_0x1160();return a51_0xb2ce=function(_0xb4c9b9,_0x516375){_0xb4c9b9=_0xb4c9b9-0x11a;let _0x116045=_0x54467a[_0xb4c9b9];return _0x116045;},a51_0xb2ce(_0x24d82d,_0x1c188c);}function a51_0x1160(){const _0x69513d=['FunctionsController','length','decorate','../../core','132aRJTCW','GET_TESTS','retrieveZip','post','Controller','deployComponents','createRequest','2WvIxjD','defineProperty','14428764bCjxfr','2726906EmzgoK','./utils/salesforce-request','Job\x20started\x20successfully','240455JqLjRH','getAuthParameters','metadata','416461NyBcGM','185450byMBHu','OptionType','114cGLURX','./types/salesforce-request.type','292768nHoXmY','design:paramtypes','apply','then','./services/retrieve-zip.service','SAVE_BACKUP_ZIP','design:returntype','design:type','Post','AuthUtils','24nbXfzw','fetch-test-classes','prototype','param','catch','ERROR','body','fetchTestClasses','__metadata','__param','retrieve','162BhXGRw','(((.+)+)+)+$','308907pQrTOi','generate-deploy-zip','metadataLogId','SAVE_DEPLOY_ZIP','message','generateAndDeployZip','object','search','/services/apexrest','deploy-components','toString','Logger','instanceUrl','/async','error','namespace','function'];a51_0x1160=function(){return _0x69513d;};return a51_0x1160();}var __decorate=this&&this['__decorate']||function(_0x168635,_0x5c67fc,_0x1b4064,_0x8dc002){const _0x1362fe=a51_0xb2ce;var _0x3c8c86=arguments[_0x1362fe(0x11d)],_0x22ba04=_0x3c8c86<0x3?_0x5c67fc:_0x8dc002===null?_0x8dc002=Object['getOwnPropertyDescriptor'](_0x5c67fc,_0x1b4064):_0x8dc002,_0x2f3b73;if(typeof Reflect===_0x1362fe(0x152)&&typeof Reflect[_0x1362fe(0x11e)]==='function')_0x22ba04=Reflect[_0x1362fe(0x11e)](_0x168635,_0x5c67fc,_0x1b4064,_0x8dc002);else{for(var _0x241f4d=_0x168635[_0x1362fe(0x11d)]-0x1;_0x241f4d>=0x0;_0x241f4d--)if(_0x2f3b73=_0x168635[_0x241f4d])_0x22ba04=(_0x3c8c86<0x3?_0x2f3b73(_0x22ba04):_0x3c8c86>0x3?_0x2f3b73(_0x5c67fc,_0x1b4064,_0x22ba04):_0x2f3b73(_0x5c67fc,_0x1b4064))||_0x22ba04;}return _0x3c8c86>0x3&&_0x22ba04&&Object['defineProperty'](_0x5c67fc,_0x1b4064,_0x22ba04),_0x22ba04;},__metadata=this&&this[a51_0x273cc3(0x147)]||function(_0x5c70ff,_0x3691a3){const _0x483b51=a51_0x273cc3;if(typeof Reflect===_0x483b51(0x152)&&typeof Reflect[_0x483b51(0x12f)]===_0x483b51(0x11b))return Reflect[_0x483b51(0x12f)](_0x5c70ff,_0x3691a3);},__param=this&&this[a51_0x273cc3(0x148)]||function(_0x32763d,_0xbbbbea){return function(_0x3e9eb3,_0x4e4126){_0xbbbbea(_0x3e9eb3,_0x4e4126,_0x32763d);};};Object[a51_0x273cc3(0x128)](exports,'__esModule',{'value':!![]}),exports[a51_0x273cc3(0x11c)]=void 0x0;const core_1=require(a51_0x273cc3(0x11f)),salesforce_request_type_1=require(a51_0x273cc3(0x134)),retrieve_zip_service_1=require(a51_0x273cc3(0x139)),generate_zip_service_1=require('./services/generate-zip.service'),fetch_test_classes_service_1=require('./services/fetch-test-classes.service'),deploy_attachment_service_1=require('./services/deploy-attachment.service'),salesforce_request_1=require(a51_0x273cc3(0x12b)),auth_utils_1=require('./utils/auth.utils'),logger=new core_1[(a51_0x273cc3(0x157))]('server');let FunctionsController=class FunctionsController{async['retrieveZip'](_0x44523a){const _0x3f986c=a51_0x273cc3,_0x40603e=(0x0,salesforce_request_1[_0x3f986c(0x126)])(auth_utils_1[_0x3f986c(0x13e)]['getAuthParameters'](_0x44523a['instanceUrl']));return(0x0,retrieve_zip_service_1[_0x3f986c(0x122)])(_0x44523a,_0x40603e)[_0x3f986c(0x138)](()=>{const _0x535b31=_0x3f986c;return _0x40603e[_0x535b31(0x123)]('/services/apexrest'+salesforce_request_1[_0x535b31(0x11a)]+_0x535b31(0x159),{'mdlId':_0x44523a['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x535b31(0x13a)]});})[_0x3f986c(0x143)](_0x548954=>{const _0x2d27cb=_0x3f986c;return _0x40603e[_0x2d27cb(0x123)](_0x2d27cb(0x154)+salesforce_request_1[_0x2d27cb(0x11a)]+_0x2d27cb(0x159),{'mdlId':_0x44523a[_0x2d27cb(0x14e)],'opType':salesforce_request_type_1[_0x2d27cb(0x132)][_0x2d27cb(0x144)],'message':_0x548954[_0x2d27cb(0x150)]||_0x548954});})[_0x3f986c(0x143)](_0xc9f459=>logger[_0x3f986c(0x15a)](_0xc9f459['message'])),{'message':_0x3f986c(0x12c)};}async[a51_0x273cc3(0x146)](_0x4586e3){const _0x24e6d0=a51_0x273cc3,_0x45f0bf=(0x0,salesforce_request_1[_0x24e6d0(0x126)])(auth_utils_1[_0x24e6d0(0x13e)]['getAuthParameters'](_0x4586e3[_0x24e6d0(0x158)]));return(0x0,fetch_test_classes_service_1[_0x24e6d0(0x146)])(_0x4586e3,_0x45f0bf)['then'](()=>{const _0xf44fb6=_0x24e6d0;return _0x45f0bf['post'](_0xf44fb6(0x154)+salesforce_request_1[_0xf44fb6(0x11a)]+_0xf44fb6(0x159),{'mdlId':_0x4586e3['metadataLogId'],'opType':salesforce_request_type_1[_0xf44fb6(0x132)][_0xf44fb6(0x121)]});})[_0x24e6d0(0x143)](_0x2c11d4=>{const _0x430fae=_0x24e6d0;return _0x45f0bf[_0x430fae(0x123)](_0x430fae(0x154)+salesforce_request_1[_0x430fae(0x11a)]+_0x430fae(0x159),{'mdlId':_0x4586e3[_0x430fae(0x14e)],'opType':salesforce_request_type_1[_0x430fae(0x132)][_0x430fae(0x144)],'message':_0x2c11d4[_0x430fae(0x150)]||_0x2c11d4});})[_0x24e6d0(0x143)](_0x41d3ba=>logger[_0x24e6d0(0x15a)](_0x41d3ba[_0x24e6d0(0x150)])),{'message':'Job\x20started\x20successfully'};}async[a51_0x273cc3(0x151)](_0x383a2c){const _0xb573b1=a51_0x273cc3,_0x58c407=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0xb573b1(0x13e)][_0xb573b1(0x12e)](_0x383a2c[_0xb573b1(0x158)]));return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x383a2c,_0x58c407)[_0xb573b1(0x138)](_0x26c34d=>{const _0x2b68a9=_0xb573b1;return _0x58c407['post'](_0x2b68a9(0x154)+salesforce_request_1[_0x2b68a9(0x11a)]+_0x2b68a9(0x159),{'mdlId':_0x383a2c[_0x2b68a9(0x14e)],'opType':salesforce_request_type_1['OptionType'][_0x2b68a9(0x14f)],'attachment':_0x26c34d});})[_0xb573b1(0x143)](_0x42cd48=>{const _0x469eb0=_0xb573b1;return _0x58c407[_0x469eb0(0x123)]('/services/apexrest'+salesforce_request_1[_0x469eb0(0x11a)]+_0x469eb0(0x159),{'mdlId':_0x383a2c[_0x469eb0(0x14e)],'opType':salesforce_request_type_1['OptionType'][_0x469eb0(0x144)],'message':_0x42cd48[_0x469eb0(0x150)]||_0x42cd48});})[_0xb573b1(0x143)](_0x555432=>logger[_0xb573b1(0x15a)](_0x555432[_0xb573b1(0x150)])),{'message':_0xb573b1(0x12c)};}async[a51_0x273cc3(0x125)](_0x3d79a9){const _0x34814e=a51_0x273cc3,_0x245a56=(0x0,salesforce_request_1[_0x34814e(0x126)])(auth_utils_1[_0x34814e(0x13e)][_0x34814e(0x12e)](_0x3d79a9[_0x34814e(0x158)]));return(0x0,deploy_attachment_service_1[_0x34814e(0x125)])(_0x3d79a9,_0x245a56)['then'](_0x43883e=>{const _0x37596a=_0x34814e;return _0x245a56[_0x37596a(0x123)](_0x37596a(0x154)+salesforce_request_1['namespace']+_0x37596a(0x159),{'mdlId':_0x3d79a9[_0x37596a(0x14e)],'asyncId':_0x43883e,'opType':salesforce_request_type_1['OptionType']['DEPLOY']});})[_0x34814e(0x143)](_0x1228e9=>{const _0x4a9ffe=_0x34814e;return _0x245a56[_0x4a9ffe(0x123)](_0x4a9ffe(0x154)+salesforce_request_1[_0x4a9ffe(0x11a)]+_0x4a9ffe(0x159),{'mdlId':_0x3d79a9['metadataLogId'],'opType':salesforce_request_type_1[_0x4a9ffe(0x132)][_0x4a9ffe(0x144)],'message':_0x1228e9[_0x4a9ffe(0x150)]||_0x1228e9});})['catch'](_0x2ed3ad=>logger['error'](_0x2ed3ad[_0x34814e(0x150)])),{'message':'Job\x20started\x20successfully'};}};__decorate([(0x0,core_1[a51_0x273cc3(0x13d)])(a51_0x273cc3(0x149)),__param(0x0,core_1[a51_0x273cc3(0x142)]['body']()),__metadata(a51_0x273cc3(0x13c),Function),__metadata(a51_0x273cc3(0x136),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a51_0x273cc3(0x141)],a51_0x273cc3(0x122),null),__decorate([(0x0,core_1[a51_0x273cc3(0x13d)])(a51_0x273cc3(0x140)),__param(0x0,core_1['param'][a51_0x273cc3(0x145)]()),__metadata(a51_0x273cc3(0x13c),Function),__metadata('design:paramtypes',[Object]),__metadata(a51_0x273cc3(0x13b),Promise)],FunctionsController['prototype'],'fetchTestClasses',null),__decorate([(0x0,core_1['Post'])(a51_0x273cc3(0x14d)),__param(0x0,core_1[a51_0x273cc3(0x142)][a51_0x273cc3(0x145)]()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],FunctionsController[a51_0x273cc3(0x141)],a51_0x273cc3(0x151),null),__decorate([(0x0,core_1[a51_0x273cc3(0x13d)])(a51_0x273cc3(0x155)),__param(0x0,core_1['param'][a51_0x273cc3(0x145)]()),__metadata('design:type',Function),__metadata(a51_0x273cc3(0x136),[Object]),__metadata(a51_0x273cc3(0x13b),Promise)],FunctionsController['prototype'],'deployComponents',null),FunctionsController=__decorate([(0x0,core_1[a51_0x273cc3(0x124)])('functions'),(0x0,core_1['Version'])('v1')],FunctionsController),exports[a51_0x273cc3(0x11c)]=FunctionsController;