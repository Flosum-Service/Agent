const a99_0x5e9530=a99_0x1141;(function(_0x40b3d1,_0x374dae){const _0x268e5e=a99_0x1141,_0x1809af=_0x40b3d1();while(!![]){try{const _0x15fc23=-parseInt(_0x268e5e(0x1cf))/0x1*(parseInt(_0x268e5e(0x1b7))/0x2)+-parseInt(_0x268e5e(0x1d6))/0x3*(parseInt(_0x268e5e(0x1c3))/0x4)+parseInt(_0x268e5e(0x1db))/0x5*(-parseInt(_0x268e5e(0x1bf))/0x6)+parseInt(_0x268e5e(0x1b6))/0x7+parseInt(_0x268e5e(0x1bb))/0x8*(parseInt(_0x268e5e(0x1b4))/0x9)+-parseInt(_0x268e5e(0x1c7))/0xa*(-parseInt(_0x268e5e(0x1a6))/0xb)+parseInt(_0x268e5e(0x19e))/0xc;if(_0x15fc23===_0x374dae)break;else _0x1809af['push'](_0x1809af['shift']());}catch(_0x3c6f01){_0x1809af['push'](_0x1809af['shift']());}}}(a99_0x3022,0x53dee));function a99_0x1141(_0x1666ef,_0x3a7c9f){const _0x46af33=a99_0x3022();return a99_0x1141=function(_0x56c8c7,_0x9537f4){_0x56c8c7=_0x56c8c7-0x19a;let _0x3022ed=_0x46af33[_0x56c8c7];return _0x3022ed;},a99_0x1141(_0x1666ef,_0x3a7c9f);}const a99_0x9537f4=(function(){let _0x2bd809=!![];return function(_0x424532,_0x106fb1){const _0x5ee03f=_0x2bd809?function(){if(_0x106fb1){const _0x35fefe=_0x106fb1['apply'](_0x424532,arguments);return _0x106fb1=null,_0x35fefe;}}:function(){};return _0x2bd809=![],_0x5ee03f;};}()),a99_0x56c8c7=a99_0x9537f4(this,function(){const _0x90331e=a99_0x1141;return a99_0x56c8c7[_0x90331e(0x1ca)]()[_0x90331e(0x1ac)]('(((.+)+)+)+$')[_0x90331e(0x1ca)]()[_0x90331e(0x1de)](a99_0x56c8c7)[_0x90331e(0x1ac)]('(((.+)+)+)+$');});a99_0x56c8c7();'use strict';function a99_0x3022(){const _0x7e45f8=['440qcjBEi','message','Job\x20started\x20successfully','constructor','param','./services/deploy-attachment.service','ERROR','decorate','/services/apexrest','AuthUtils','4995648AKnFLK','defineProperty','namespace','retrieveZip','metadata','./services/generate-zip.service','design:type','./services/fetch-test-classes.service','22sUJXcR','prototype','getAuthParameters','instanceUrl','error','body','search','SAVE_BACKUP_ZIP','fetchTestClasses','metadataLogId','deployComponents','generateAndDeployZip','server','Controller','9WwRcfL','__param','3164161GbpLoA','2mnmpDr','Post','createRequest','Logger','2287112yFmBwm','then','post','length','45804rjDDhb','GET_TESTS','generate-deploy-zip','getOwnPropertyDescriptor','1292cKETbn','AuthManager','catch','retrieve','1856830kMjQtB','OptionType','functions','toString','function','./utils/auth.utils','design:paramtypes','/async','180473CLRqjK','FunctionsController','./utils/salesforce-request','credentials','../../core','object','DEPLOY','3063TOkDdV','design:returntype','Version','@flosum/salesforce','../shared/managers/auth.manager'];a99_0x3022=function(){return _0x7e45f8;};return a99_0x3022();}var __decorate=this&&this['__decorate']||function(_0x17f0e9,_0x396782,_0x3acab8,_0x393bf4){const _0x32c667=a99_0x1141;var _0x3472e0=arguments[_0x32c667(0x1be)],_0x1f392e=_0x3472e0<0x3?_0x396782:_0x393bf4===null?_0x393bf4=Object[_0x32c667(0x1c2)](_0x396782,_0x3acab8):_0x393bf4,_0x5afb07;if(typeof Reflect===_0x32c667(0x1d4)&&typeof Reflect[_0x32c667(0x19b)]===_0x32c667(0x1cb))_0x1f392e=Reflect[_0x32c667(0x19b)](_0x17f0e9,_0x396782,_0x3acab8,_0x393bf4);else{for(var _0x216073=_0x17f0e9[_0x32c667(0x1be)]-0x1;_0x216073>=0x0;_0x216073--)if(_0x5afb07=_0x17f0e9[_0x216073])_0x1f392e=(_0x3472e0<0x3?_0x5afb07(_0x1f392e):_0x3472e0>0x3?_0x5afb07(_0x396782,_0x3acab8,_0x1f392e):_0x5afb07(_0x396782,_0x3acab8))||_0x1f392e;}return _0x3472e0>0x3&&_0x1f392e&&Object[_0x32c667(0x19f)](_0x396782,_0x3acab8,_0x1f392e),_0x1f392e;},__metadata=this&&this['__metadata']||function(_0x8cb67e,_0x31a8c4){const _0x48a055=a99_0x1141;if(typeof Reflect===_0x48a055(0x1d4)&&typeof Reflect['metadata']===_0x48a055(0x1cb))return Reflect[_0x48a055(0x1a2)](_0x8cb67e,_0x31a8c4);},__param=this&&this[a99_0x5e9530(0x1b5)]||function(_0x4c7e44,_0xaaf269){return function(_0x4947e3,_0x543f42){_0xaaf269(_0x4947e3,_0x543f42,_0x4c7e44);};};Object[a99_0x5e9530(0x19f)](exports,'__esModule',{'value':!![]}),exports[a99_0x5e9530(0x1d0)]=void 0x0;const core_1=require(a99_0x5e9530(0x1d3)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require('./services/retrieve-zip.service'),generate_zip_service_1=require(a99_0x5e9530(0x1a3)),fetch_test_classes_service_1=require(a99_0x5e9530(0x1a5)),deploy_attachment_service_1=require(a99_0x5e9530(0x1e0)),salesforce_request_1=require(a99_0x5e9530(0x1d1)),auth_utils_1=require(a99_0x5e9530(0x1cc)),auth_manager_1=require(a99_0x5e9530(0x1da)),salesforce_1=require(a99_0x5e9530(0x1d9)),logger=new core_1[(a99_0x5e9530(0x1ba))](a99_0x5e9530(0x1b2));let FunctionsController=class FunctionsController{async[a99_0x5e9530(0x1a1)](_0xdeeb98){const _0x4a7225=a99_0x5e9530,_0x5ed092=(0x0,salesforce_request_1[_0x4a7225(0x1b9)])(auth_utils_1[_0x4a7225(0x19d)]['getAuthParameters'](_0xdeeb98['instanceUrl']));return(0x0,retrieve_zip_service_1[_0x4a7225(0x1a1)])(_0xdeeb98,_0x5ed092)[_0x4a7225(0x1bc)](()=>{const _0x3a2030=_0x4a7225;return _0x5ed092[_0x3a2030(0x1bd)]('/services/apexrest'+salesforce_request_1[_0x3a2030(0x1a0)]+_0x3a2030(0x1ce),{'mdlId':_0xdeeb98[_0x3a2030(0x1af)],'opType':salesforce_request_type_1[_0x3a2030(0x1c8)][_0x3a2030(0x1ad)]});})[_0x4a7225(0x1c5)](_0x434d76=>{const _0xe52a86=_0x4a7225;return _0x5ed092[_0xe52a86(0x1bd)](_0xe52a86(0x19c)+salesforce_request_1[_0xe52a86(0x1a0)]+'/async',{'mdlId':_0xdeeb98['metadataLogId'],'opType':salesforce_request_type_1[_0xe52a86(0x1c8)]['ERROR'],'message':_0x434d76['message']||_0x434d76});})['catch'](_0x1eea79=>logger['error'](_0x1eea79[_0x4a7225(0x1dc)])),{'message':_0x4a7225(0x1dd)};}async[a99_0x5e9530(0x1ae)](_0x26a39b){const _0xfb4e59=a99_0x5e9530,_0x11c0c2=(0x0,salesforce_request_1['createRequest'])(auth_utils_1['AuthUtils'][_0xfb4e59(0x1a8)](_0x26a39b['instanceUrl']));return(0x0,fetch_test_classes_service_1[_0xfb4e59(0x1ae)])(_0x26a39b,_0x11c0c2)[_0xfb4e59(0x1bc)](()=>{const _0x151761=_0xfb4e59;return _0x11c0c2[_0x151761(0x1bd)](_0x151761(0x19c)+salesforce_request_1[_0x151761(0x1a0)]+_0x151761(0x1ce),{'mdlId':_0x26a39b['metadataLogId'],'opType':salesforce_request_type_1[_0x151761(0x1c8)][_0x151761(0x1c0)]});})['catch'](_0x1b2541=>{const _0x5cdc93=_0xfb4e59;return _0x11c0c2[_0x5cdc93(0x1bd)]('/services/apexrest'+salesforce_request_1['namespace']+_0x5cdc93(0x1ce),{'mdlId':_0x26a39b[_0x5cdc93(0x1af)],'opType':salesforce_request_type_1[_0x5cdc93(0x1c8)][_0x5cdc93(0x19a)],'message':_0x1b2541[_0x5cdc93(0x1dc)]||_0x1b2541});})[_0xfb4e59(0x1c5)](_0x546a8a=>logger[_0xfb4e59(0x1aa)](_0x546a8a[_0xfb4e59(0x1dc)])),{'message':_0xfb4e59(0x1dd)};}async[a99_0x5e9530(0x1b1)](_0x330eee){const _0x4c6b87=a99_0x5e9530,_0xddc3c=(0x0,salesforce_request_1[_0x4c6b87(0x1b9)])(auth_utils_1[_0x4c6b87(0x19d)]['getAuthParameters'](_0x330eee[_0x4c6b87(0x1a9)])),_0x58a4bd=await salesforce_1['AxiosInstanceUtils']['create'](new auth_manager_1[(_0x4c6b87(0x1c4))](_0x330eee[_0x4c6b87(0x1d2)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0x4c6b87(0x1b1)])(_0x330eee,_0xddc3c,_0x58a4bd)['then'](_0x225b09=>{const _0x5f6d5e=_0x4c6b87;return _0xddc3c[_0x5f6d5e(0x1bd)]('/services/apexrest'+salesforce_request_1['namespace']+_0x5f6d5e(0x1ce),{'mdlId':_0x330eee['metadataLogId'],'opType':salesforce_request_type_1[_0x5f6d5e(0x1c8)]['SAVE_DEPLOY_ZIP'],'attachment':_0x225b09});})[_0x4c6b87(0x1c5)](_0x24d5cb=>{const _0x5b2a5f=_0x4c6b87;return _0xddc3c[_0x5b2a5f(0x1bd)](_0x5b2a5f(0x19c)+salesforce_request_1[_0x5b2a5f(0x1a0)]+'/async',{'mdlId':_0x330eee[_0x5b2a5f(0x1af)],'opType':salesforce_request_type_1[_0x5b2a5f(0x1c8)][_0x5b2a5f(0x19a)],'message':_0x24d5cb[_0x5b2a5f(0x1dc)]||_0x24d5cb});})[_0x4c6b87(0x1c5)](_0x49dfbe=>logger[_0x4c6b87(0x1aa)](_0x49dfbe[_0x4c6b87(0x1dc)])),{'message':_0x4c6b87(0x1dd)};}async[a99_0x5e9530(0x1b0)](_0x1d1d8d){const _0x16d2e8=a99_0x5e9530,_0x492e3f=(0x0,salesforce_request_1[_0x16d2e8(0x1b9)])(auth_utils_1[_0x16d2e8(0x19d)][_0x16d2e8(0x1a8)](_0x1d1d8d[_0x16d2e8(0x1a9)]));return(0x0,deploy_attachment_service_1[_0x16d2e8(0x1b0)])(_0x1d1d8d,_0x492e3f)[_0x16d2e8(0x1bc)](_0x454fde=>{const _0x35c894=_0x16d2e8;return _0x492e3f[_0x35c894(0x1bd)]('/services/apexrest'+salesforce_request_1[_0x35c894(0x1a0)]+_0x35c894(0x1ce),{'mdlId':_0x1d1d8d[_0x35c894(0x1af)],'asyncId':_0x454fde,'opType':salesforce_request_type_1['OptionType'][_0x35c894(0x1d5)]});})[_0x16d2e8(0x1c5)](_0x1570ff=>{const _0x4e84ce=_0x16d2e8;return _0x492e3f[_0x4e84ce(0x1bd)](_0x4e84ce(0x19c)+salesforce_request_1[_0x4e84ce(0x1a0)]+_0x4e84ce(0x1ce),{'mdlId':_0x1d1d8d['metadataLogId'],'opType':salesforce_request_type_1[_0x4e84ce(0x1c8)][_0x4e84ce(0x19a)],'message':_0x1570ff['message']||_0x1570ff});})[_0x16d2e8(0x1c5)](_0x27c27a=>logger['error'](_0x27c27a[_0x16d2e8(0x1dc)])),{'message':_0x16d2e8(0x1dd)};}};__decorate([(0x0,core_1[a99_0x5e9530(0x1b8)])(a99_0x5e9530(0x1c6)),__param(0x0,core_1[a99_0x5e9530(0x1df)][a99_0x5e9530(0x1ab)]()),__metadata(a99_0x5e9530(0x1a4),Function),__metadata(a99_0x5e9530(0x1cd),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a99_0x5e9530(0x1a7)],'retrieveZip',null),__decorate([(0x0,core_1[a99_0x5e9530(0x1b8)])('fetch-test-classes'),__param(0x0,core_1[a99_0x5e9530(0x1df)][a99_0x5e9530(0x1ab)]()),__metadata('design:type',Function),__metadata(a99_0x5e9530(0x1cd),[Object]),__metadata(a99_0x5e9530(0x1d7),Promise)],FunctionsController[a99_0x5e9530(0x1a7)],a99_0x5e9530(0x1ae),null),__decorate([(0x0,core_1[a99_0x5e9530(0x1b8)])(a99_0x5e9530(0x1c1)),__param(0x0,core_1[a99_0x5e9530(0x1df)][a99_0x5e9530(0x1ab)]()),__metadata(a99_0x5e9530(0x1a4),Function),__metadata(a99_0x5e9530(0x1cd),[Object]),__metadata(a99_0x5e9530(0x1d7),Promise)],FunctionsController['prototype'],a99_0x5e9530(0x1b1),null),__decorate([(0x0,core_1['Post'])('deploy-components'),__param(0x0,core_1[a99_0x5e9530(0x1df)]['body']()),__metadata(a99_0x5e9530(0x1a4),Function),__metadata(a99_0x5e9530(0x1cd),[Object]),__metadata(a99_0x5e9530(0x1d7),Promise)],FunctionsController['prototype'],a99_0x5e9530(0x1b0),null),FunctionsController=__decorate([(0x0,core_1[a99_0x5e9530(0x1b3)])(a99_0x5e9530(0x1c9)),(0x0,core_1[a99_0x5e9530(0x1d8)])('v1')],FunctionsController),exports['FunctionsController']=FunctionsController;