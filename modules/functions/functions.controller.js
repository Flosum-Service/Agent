const a83_0x325f00=a83_0x40ca;(function(_0x546893,_0x2c8436){const _0x4cebc5=a83_0x40ca,_0x54e0bc=_0x546893();while(!![]){try{const _0x2ea0ba=parseInt(_0x4cebc5(0xb4))/0x1+parseInt(_0x4cebc5(0xb6))/0x2+parseInt(_0x4cebc5(0xaf))/0x3+parseInt(_0x4cebc5(0x82))/0x4+parseInt(_0x4cebc5(0x96))/0x5*(-parseInt(_0x4cebc5(0xa5))/0x6)+parseInt(_0x4cebc5(0xac))/0x7+-parseInt(_0x4cebc5(0x9f))/0x8;if(_0x2ea0ba===_0x2c8436)break;else _0x54e0bc['push'](_0x54e0bc['shift']());}catch(_0x1d3073){_0x54e0bc['push'](_0x54e0bc['shift']());}}}(a83_0x2647,0x3033c));const a83_0x1de57a=(function(){let _0xe46695=!![];return function(_0x67589b,_0x15109a){const _0x3e4c55=_0xe46695?function(){const _0x287818=a83_0x40ca;if(_0x15109a){const _0x54c616=_0x15109a[_0x287818(0xae)](_0x67589b,arguments);return _0x15109a=null,_0x54c616;}}:function(){};return _0xe46695=![],_0x3e4c55;};}()),a83_0x5ad02f=a83_0x1de57a(this,function(){const _0x327d62=a83_0x40ca;return a83_0x5ad02f['toString']()[_0x327d62(0x80)](_0x327d62(0xb3))[_0x327d62(0x8f)]()[_0x327d62(0x78)](a83_0x5ad02f)[_0x327d62(0x80)]('(((.+)+)+)+$');});a83_0x5ad02f();'use strict';var __decorate=this&&this[a83_0x325f00(0x9d)]||function(_0x5d2daa,_0x17c325,_0x24bc2e,_0x7b6085){const _0x9543d4=a83_0x325f00;var _0x2647f9=arguments['length'],_0x2e29d0=_0x2647f9<0x3?_0x17c325:_0x7b6085===null?_0x7b6085=Object[_0x9543d4(0x95)](_0x17c325,_0x24bc2e):_0x7b6085,_0x562de5;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x9543d4(0x9c))_0x2e29d0=Reflect['decorate'](_0x5d2daa,_0x17c325,_0x24bc2e,_0x7b6085);else{for(var _0x1c717a=_0x5d2daa[_0x9543d4(0x9a)]-0x1;_0x1c717a>=0x0;_0x1c717a--)if(_0x562de5=_0x5d2daa[_0x1c717a])_0x2e29d0=(_0x2647f9<0x3?_0x562de5(_0x2e29d0):_0x2647f9>0x3?_0x562de5(_0x17c325,_0x24bc2e,_0x2e29d0):_0x562de5(_0x17c325,_0x24bc2e))||_0x2e29d0;}return _0x2647f9>0x3&&_0x2e29d0&&Object[_0x9543d4(0xb9)](_0x17c325,_0x24bc2e,_0x2e29d0),_0x2e29d0;},__metadata=this&&this[a83_0x325f00(0x98)]||function(_0x445884,_0x3292b7){const _0x3194ef=a83_0x325f00;if(typeof Reflect===_0x3194ef(0x94)&&typeof Reflect[_0x3194ef(0xab)]===_0x3194ef(0x9c))return Reflect['metadata'](_0x445884,_0x3292b7);},__param=this&&this[a83_0x325f00(0xb7)]||function(_0x1c7fd9,_0x530114){return function(_0x58cb94,_0x36f354){_0x530114(_0x58cb94,_0x36f354,_0x1c7fd9);};};Object[a83_0x325f00(0xb9)](exports,a83_0x325f00(0xbb),{'value':!![]}),exports['FunctionsController']=void 0x0;function a83_0x40ca(_0x28a12b,_0x668eff){const _0x5fa374=a83_0x2647();return a83_0x40ca=function(_0x5ad02f,_0x1de57a){_0x5ad02f=_0x5ad02f-0x78;let _0x26472d=_0x5fa374[_0x5ad02f];return _0x26472d;},a83_0x40ca(_0x28a12b,_0x668eff);}const core_1=require('../../core'),salesforce_request_type_1=require(a83_0x325f00(0x7e)),retrieve_zip_service_1=require(a83_0x325f00(0x8c)),generate_zip_service_1=require(a83_0x325f00(0x7c)),fetch_test_classes_service_1=require('./services/fetch-test-classes.service'),deploy_attachment_service_1=require(a83_0x325f00(0xa0)),salesforce_request_1=require(a83_0x325f00(0x81)),auth_utils_1=require(a83_0x325f00(0x7a)),logger=new core_1[(a83_0x325f00(0x79))](a83_0x325f00(0x97));let FunctionsController=class FunctionsController{async['retrieveZip'](_0x2da3ce){const _0xe4162e=a83_0x325f00,_0x340d41=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0xe4162e(0x87)][_0xe4162e(0xb2)](_0x2da3ce[_0xe4162e(0xb0)]));return(0x0,retrieve_zip_service_1[_0xe4162e(0xb8)])(_0x2da3ce,_0x340d41)[_0xe4162e(0x86)](()=>{const _0x59f8b3=_0xe4162e;return _0x340d41['post'](_0x59f8b3(0xa6)+salesforce_request_1[_0x59f8b3(0xaa)]+_0x59f8b3(0x84),{'mdlId':_0x2da3ce['metadataLogId'],'opType':salesforce_request_type_1[_0x59f8b3(0x8b)][_0x59f8b3(0x88)]});})[_0xe4162e(0xa3)](_0x3df672=>{const _0xcfb801=_0xe4162e;return _0x340d41[_0xcfb801(0x8a)](_0xcfb801(0xa6)+salesforce_request_1[_0xcfb801(0xaa)]+_0xcfb801(0x84),{'mdlId':_0x2da3ce['metadataLogId'],'opType':salesforce_request_type_1[_0xcfb801(0x8b)][_0xcfb801(0x92)],'message':_0x3df672[_0xcfb801(0x83)]||_0x3df672});})[_0xe4162e(0xa3)](_0x4dcd89=>logger[_0xe4162e(0x7b)](_0x4dcd89[_0xe4162e(0x83)])),{'message':_0xe4162e(0x89)};}async['fetchTestClasses'](_0x1e46e8){const _0x1dd635=a83_0x325f00,_0x1e0d49=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x1dd635(0x87)]['getAuthParameters'](_0x1e46e8[_0x1dd635(0xb0)]));return(0x0,fetch_test_classes_service_1[_0x1dd635(0xa9)])(_0x1e46e8,_0x1e0d49)['then'](()=>{const _0x4765c2=_0x1dd635;return _0x1e0d49[_0x4765c2(0x8a)]('/services/apexrest'+salesforce_request_1[_0x4765c2(0xaa)]+_0x4765c2(0x84),{'mdlId':_0x1e46e8[_0x4765c2(0x91)],'opType':salesforce_request_type_1[_0x4765c2(0x8b)][_0x4765c2(0xa8)]});})[_0x1dd635(0xa3)](_0x242962=>{const _0x290f2c=_0x1dd635;return _0x1e0d49[_0x290f2c(0x8a)](_0x290f2c(0xa6)+salesforce_request_1[_0x290f2c(0xaa)]+_0x290f2c(0x84),{'mdlId':_0x1e46e8[_0x290f2c(0x91)],'opType':salesforce_request_type_1['OptionType']['ERROR'],'message':_0x242962['message']||_0x242962});})[_0x1dd635(0xa3)](_0x1ef7f1=>logger['error'](_0x1ef7f1[_0x1dd635(0x83)])),{'message':_0x1dd635(0x89)};}async['generateAndDeployZip'](_0x4f02ea){const _0xc777f5=a83_0x325f00,_0x4a9933=(0x0,salesforce_request_1[_0xc777f5(0x85)])(auth_utils_1[_0xc777f5(0x87)][_0xc777f5(0xb2)](_0x4f02ea[_0xc777f5(0xb0)]));return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x4f02ea,_0x4a9933)[_0xc777f5(0x86)](_0x4983f9=>{const _0x532ab8=_0xc777f5;return _0x4a9933[_0x532ab8(0x8a)](_0x532ab8(0xa6)+salesforce_request_1['namespace']+_0x532ab8(0x84),{'mdlId':_0x4f02ea['metadataLogId'],'opType':salesforce_request_type_1[_0x532ab8(0x8b)][_0x532ab8(0xa2)],'attachment':_0x4983f9});})['catch'](_0x13a6bf=>{const _0x47bc90=_0xc777f5;return _0x4a9933[_0x47bc90(0x8a)](_0x47bc90(0xa6)+salesforce_request_1[_0x47bc90(0xaa)]+_0x47bc90(0x84),{'mdlId':_0x4f02ea[_0x47bc90(0x91)],'opType':salesforce_request_type_1[_0x47bc90(0x8b)]['ERROR'],'message':_0x13a6bf[_0x47bc90(0x83)]||_0x13a6bf});})[_0xc777f5(0xa3)](_0x55100a=>logger[_0xc777f5(0x7b)](_0x55100a[_0xc777f5(0x83)])),{'message':_0xc777f5(0x89)};}async['deployComponents'](_0x256433){const _0x5ba55d=a83_0x325f00,_0x534df7=(0x0,salesforce_request_1[_0x5ba55d(0x85)])(auth_utils_1[_0x5ba55d(0x87)][_0x5ba55d(0xb2)](_0x256433[_0x5ba55d(0xb0)]));return(0x0,deploy_attachment_service_1[_0x5ba55d(0x93)])(_0x256433,_0x534df7)[_0x5ba55d(0x86)](_0x39151=>{const _0x15f7fe=_0x5ba55d;return _0x534df7[_0x15f7fe(0x8a)](_0x15f7fe(0xa6)+salesforce_request_1[_0x15f7fe(0xaa)]+'/async',{'mdlId':_0x256433['metadataLogId'],'asyncId':_0x39151,'opType':salesforce_request_type_1[_0x15f7fe(0x8b)][_0x15f7fe(0x8e)]});})[_0x5ba55d(0xa3)](_0x51f96c=>{const _0x5f0285=_0x5ba55d;return _0x534df7[_0x5f0285(0x8a)](_0x5f0285(0xa6)+salesforce_request_1[_0x5f0285(0xaa)]+_0x5f0285(0x84),{'mdlId':_0x256433[_0x5f0285(0x91)],'opType':salesforce_request_type_1[_0x5f0285(0x8b)][_0x5f0285(0x92)],'message':_0x51f96c[_0x5f0285(0x83)]||_0x51f96c});})[_0x5ba55d(0xa3)](_0x4114dc=>logger['error'](_0x4114dc[_0x5ba55d(0x83)])),{'message':_0x5ba55d(0x89)};}};__decorate([(0x0,core_1[a83_0x325f00(0x9b)])(a83_0x325f00(0x90)),__param(0x0,core_1[a83_0x325f00(0xad)]['body']()),__metadata(a83_0x325f00(0x8d),Function),__metadata(a83_0x325f00(0xa1),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a83_0x325f00(0xa7)],'retrieveZip',null),__decorate([(0x0,core_1['Post'])(a83_0x325f00(0xb5)),__param(0x0,core_1[a83_0x325f00(0xad)]['body']()),__metadata(a83_0x325f00(0x8d),Function),__metadata(a83_0x325f00(0xa1),[Object]),__metadata(a83_0x325f00(0xa4),Promise)],FunctionsController['prototype'],'fetchTestClasses',null),__decorate([(0x0,core_1[a83_0x325f00(0x9b)])(a83_0x325f00(0xba)),__param(0x0,core_1['param']['body']()),__metadata(a83_0x325f00(0x8d),Function),__metadata(a83_0x325f00(0xa1),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a83_0x325f00(0xa7)],a83_0x325f00(0xb1),null),__decorate([(0x0,core_1['Post'])(a83_0x325f00(0x99)),__param(0x0,core_1[a83_0x325f00(0xad)][a83_0x325f00(0x7f)]()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],FunctionsController[a83_0x325f00(0xa7)],a83_0x325f00(0x93),null),FunctionsController=__decorate([(0x0,core_1[a83_0x325f00(0x9e)])(a83_0x325f00(0x7d)),(0x0,core_1['Version'])('v1')],FunctionsController),exports['FunctionsController']=FunctionsController;function a83_0x2647(){const _0x4f87c1=['356102UdtvfT','fetch-test-classes','747156UOyWnX','__param','retrieveZip','defineProperty','generate-deploy-zip','__esModule','constructor','Logger','./utils/auth.utils','error','./services/generate-zip.service','functions','./types/salesforce-request.type','body','search','./utils/salesforce-request','449128vTcGSS','message','/async','createRequest','then','AuthUtils','SAVE_BACKUP_ZIP','Job\x20started\x20successfully','post','OptionType','./services/retrieve-zip.service','design:type','DEPLOY','toString','retrieve','metadataLogId','ERROR','deployComponents','object','getOwnPropertyDescriptor','20KGRwwi','server','__metadata','deploy-components','length','Post','function','__decorate','Controller','6321072RzWUcj','./services/deploy-attachment.service','design:paramtypes','SAVE_DEPLOY_ZIP','catch','design:returntype','118242hQEIAp','/services/apexrest','prototype','GET_TESTS','fetchTestClasses','namespace','metadata','175784xBHHjE','param','apply','597972wJvKXk','instanceUrl','generateAndDeployZip','getAuthParameters','(((.+)+)+)+$'];a83_0x2647=function(){return _0x4f87c1;};return a83_0x2647();}