const a101_0x2c8cb0=a101_0x218f;(function(_0x217c9b,_0x1e5bce){const _0x2488ae=a101_0x218f,_0x5c646d=_0x217c9b();while(!![]){try{const _0x26ae5e=-parseInt(_0x2488ae(0x168))/0x1*(parseInt(_0x2488ae(0x161))/0x2)+-parseInt(_0x2488ae(0x136))/0x3*(parseInt(_0x2488ae(0x167))/0x4)+parseInt(_0x2488ae(0x166))/0x5*(parseInt(_0x2488ae(0x12b))/0x6)+-parseInt(_0x2488ae(0x14c))/0x7+-parseInt(_0x2488ae(0x137))/0x8*(-parseInt(_0x2488ae(0x165))/0x9)+parseInt(_0x2488ae(0x13e))/0xa*(-parseInt(_0x2488ae(0x14e))/0xb)+parseInt(_0x2488ae(0x14d))/0xc;if(_0x26ae5e===_0x1e5bce)break;else _0x5c646d['push'](_0x5c646d['shift']());}catch(_0x436989){_0x5c646d['push'](_0x5c646d['shift']());}}}(a101_0x48a6,0x943fc));function a101_0x218f(_0x2649e8,_0x8371c6){const _0x5e1f74=a101_0x48a6();return a101_0x218f=function(_0x583d13,_0x1e0ffb){_0x583d13=_0x583d13-0x129;let _0x48a62f=_0x5e1f74[_0x583d13];return _0x48a62f;},a101_0x218f(_0x2649e8,_0x8371c6);}const a101_0x1e0ffb=(function(){let _0x50e9d0=!![];return function(_0x171e63,_0x1e6582){const _0x51f009=_0x50e9d0?function(){const _0x541da8=a101_0x218f;if(_0x1e6582){const _0x2c07a1=_0x1e6582[_0x541da8(0x13d)](_0x171e63,arguments);return _0x1e6582=null,_0x2c07a1;}}:function(){};return _0x50e9d0=![],_0x51f009;};}()),a101_0x583d13=a101_0x1e0ffb(this,function(){const _0xcfde40=a101_0x218f;return a101_0x583d13['toString']()[_0xcfde40(0x129)](_0xcfde40(0x13a))['toString']()[_0xcfde40(0x143)](a101_0x583d13)[_0xcfde40(0x129)](_0xcfde40(0x13a));});a101_0x583d13();'use strict';function a101_0x48a6(){const _0x5aa519=['./types/salesforce-request.type','defineProperty','server','./services/deploy-attachment.service','body','length','/async','AuthManager','1874157peCUQr','549960zjyJJp','Version','message','(((.+)+)+)+$','deployComponents','__param','apply','5470pfMfGN','generateAndDeployZip','AxiosInstanceUtils','metadataLogId','../../core','constructor','AuthUtils','function','@flosum/salesforce','decorate','error','FunctionsController','createRequest','OptionType','7453572RjXrSB','26147964NxPTPc','14333RONJwX','param','post','__metadata','ERROR','Job\x20started\x20successfully','deploy-components','Controller','namespace','./utils/auth.utils','SAVE_DEPLOY_ZIP','retrieveZip','Post','fetch-test-classes','./services/generate-zip.service','then','metadata','./services/fetch-test-classes.service','design:returntype','1882HgLPGO','getAuthParameters','__esModule','catch','135iEfqIr','1193795BTYgdJ','4vQjzFy','467OxrBOQ','fetchTestClasses','design:paramtypes','Logger','design:type','prototype','search','DEPLOY','6JPiLhy','generate-deploy-zip','/services/apexrest'];a101_0x48a6=function(){return _0x5aa519;};return a101_0x48a6();}var __decorate=this&&this['__decorate']||function(_0x490086,_0x41b054,_0xd64c5a,_0x2d61c3){const _0x49e579=a101_0x218f;var _0xfa5831=arguments[_0x49e579(0x133)],_0x4b7f45=_0xfa5831<0x3?_0x41b054:_0x2d61c3===null?_0x2d61c3=Object['getOwnPropertyDescriptor'](_0x41b054,_0xd64c5a):_0x2d61c3,_0x390b71;if(typeof Reflect==='object'&&typeof Reflect[_0x49e579(0x147)]===_0x49e579(0x145))_0x4b7f45=Reflect[_0x49e579(0x147)](_0x490086,_0x41b054,_0xd64c5a,_0x2d61c3);else{for(var _0x1842ee=_0x490086[_0x49e579(0x133)]-0x1;_0x1842ee>=0x0;_0x1842ee--)if(_0x390b71=_0x490086[_0x1842ee])_0x4b7f45=(_0xfa5831<0x3?_0x390b71(_0x4b7f45):_0xfa5831>0x3?_0x390b71(_0x41b054,_0xd64c5a,_0x4b7f45):_0x390b71(_0x41b054,_0xd64c5a))||_0x4b7f45;}return _0xfa5831>0x3&&_0x4b7f45&&Object['defineProperty'](_0x41b054,_0xd64c5a,_0x4b7f45),_0x4b7f45;},__metadata=this&&this[a101_0x2c8cb0(0x151)]||function(_0x3e5e20,_0x32da7d){const _0x18d496=a101_0x2c8cb0;if(typeof Reflect==='object'&&typeof Reflect[_0x18d496(0x15e)]==='function')return Reflect[_0x18d496(0x15e)](_0x3e5e20,_0x32da7d);},__param=this&&this[a101_0x2c8cb0(0x13c)]||function(_0x41a9ad,_0xe9045e){return function(_0x56d9a7,_0x400ca4){_0xe9045e(_0x56d9a7,_0x400ca4,_0x41a9ad);};};Object[a101_0x2c8cb0(0x12f)](exports,a101_0x2c8cb0(0x163),{'value':!![]}),exports[a101_0x2c8cb0(0x149)]=void 0x0;const core_1=require(a101_0x2c8cb0(0x142)),salesforce_request_type_1=require(a101_0x2c8cb0(0x12e)),retrieve_zip_service_1=require('./services/retrieve-zip.service'),generate_zip_service_1=require(a101_0x2c8cb0(0x15c)),fetch_test_classes_service_1=require(a101_0x2c8cb0(0x15f)),deploy_attachment_service_1=require(a101_0x2c8cb0(0x131)),salesforce_request_1=require('./utils/salesforce-request'),auth_utils_1=require(a101_0x2c8cb0(0x157)),auth_manager_1=require('../shared/managers/auth.manager'),salesforce_1=require(a101_0x2c8cb0(0x146)),logger=new core_1[(a101_0x2c8cb0(0x16b))](a101_0x2c8cb0(0x130));let FunctionsController=class FunctionsController{async[a101_0x2c8cb0(0x159)](_0x3db8c7){const _0x577f24=a101_0x2c8cb0,_0x3eb039=(0x0,salesforce_request_1[_0x577f24(0x14a)])(auth_utils_1[_0x577f24(0x144)]['getAuthParameters'](_0x3db8c7['instanceUrl']));return(0x0,retrieve_zip_service_1['retrieveZip'])(_0x3db8c7,_0x3eb039)[_0x577f24(0x15d)](()=>{const _0x43a375=_0x577f24;return _0x3eb039[_0x43a375(0x150)](_0x43a375(0x12d)+salesforce_request_1['namespace']+_0x43a375(0x134),{'mdlId':_0x3db8c7[_0x43a375(0x141)],'opType':salesforce_request_type_1[_0x43a375(0x14b)]['SAVE_BACKUP_ZIP']});})[_0x577f24(0x164)](_0x561bd4=>{const _0x1e1531=_0x577f24;return _0x3eb039['post'](_0x1e1531(0x12d)+salesforce_request_1[_0x1e1531(0x156)]+_0x1e1531(0x134),{'mdlId':_0x3db8c7[_0x1e1531(0x141)],'opType':salesforce_request_type_1['OptionType'][_0x1e1531(0x152)],'message':_0x561bd4[_0x1e1531(0x139)]||_0x561bd4});})[_0x577f24(0x164)](_0x4a3925=>logger[_0x577f24(0x148)](_0x4a3925[_0x577f24(0x139)])),{'message':_0x577f24(0x153)};}async['fetchTestClasses'](_0x1e7be0){const _0x2bd9bd=a101_0x2c8cb0,_0x4e03eb=(0x0,salesforce_request_1[_0x2bd9bd(0x14a)])(auth_utils_1['AuthUtils']['getAuthParameters'](_0x1e7be0['instanceUrl']));return(0x0,fetch_test_classes_service_1['fetchTestClasses'])(_0x1e7be0,_0x4e03eb)[_0x2bd9bd(0x15d)](()=>{const _0x42f009=_0x2bd9bd;return _0x4e03eb[_0x42f009(0x150)](_0x42f009(0x12d)+salesforce_request_1[_0x42f009(0x156)]+_0x42f009(0x134),{'mdlId':_0x1e7be0['metadataLogId'],'opType':salesforce_request_type_1[_0x42f009(0x14b)]['GET_TESTS']});})['catch'](_0x344283=>{const _0x53234c=_0x2bd9bd;return _0x4e03eb['post']('/services/apexrest'+salesforce_request_1[_0x53234c(0x156)]+_0x53234c(0x134),{'mdlId':_0x1e7be0['metadataLogId'],'opType':salesforce_request_type_1[_0x53234c(0x14b)][_0x53234c(0x152)],'message':_0x344283[_0x53234c(0x139)]||_0x344283});})['catch'](_0x2d916b=>logger[_0x2bd9bd(0x148)](_0x2d916b[_0x2bd9bd(0x139)])),{'message':_0x2bd9bd(0x153)};}async[a101_0x2c8cb0(0x13f)](_0x17490b){const _0x3f0ae2=a101_0x2c8cb0,_0xdccacc=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x3f0ae2(0x144)][_0x3f0ae2(0x162)](_0x17490b['instanceUrl'])),_0x27ebf6=await salesforce_1[_0x3f0ae2(0x140)]['create'](new auth_manager_1[(_0x3f0ae2(0x135))](_0x17490b['credentials']),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0x3f0ae2(0x13f)])(_0x17490b,_0xdccacc,_0x27ebf6)['then'](_0x1de557=>{const _0x144c51=_0x3f0ae2;return _0xdccacc['post'](_0x144c51(0x12d)+salesforce_request_1[_0x144c51(0x156)]+_0x144c51(0x134),{'mdlId':_0x17490b['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x144c51(0x158)],'attachment':_0x1de557});})[_0x3f0ae2(0x164)](_0x275261=>{const _0xeb893d=_0x3f0ae2;return _0xdccacc[_0xeb893d(0x150)](_0xeb893d(0x12d)+salesforce_request_1['namespace']+'/async',{'mdlId':_0x17490b['metadataLogId'],'opType':salesforce_request_type_1[_0xeb893d(0x14b)]['ERROR'],'message':_0x275261[_0xeb893d(0x139)]||_0x275261});})[_0x3f0ae2(0x164)](_0x217579=>logger[_0x3f0ae2(0x148)](_0x217579['message'])),{'message':'Job\x20started\x20successfully'};}async[a101_0x2c8cb0(0x13b)](_0x24ef9e){const _0x2da147=a101_0x2c8cb0,_0x1733f9=(0x0,salesforce_request_1[_0x2da147(0x14a)])(auth_utils_1[_0x2da147(0x144)][_0x2da147(0x162)](_0x24ef9e['instanceUrl']));return(0x0,deploy_attachment_service_1['deployComponents'])(_0x24ef9e,_0x1733f9)[_0x2da147(0x15d)](_0x2a2009=>{const _0x50472b=_0x2da147;return _0x1733f9['post'](_0x50472b(0x12d)+salesforce_request_1[_0x50472b(0x156)]+_0x50472b(0x134),{'mdlId':_0x24ef9e[_0x50472b(0x141)],'asyncId':_0x2a2009,'opType':salesforce_request_type_1[_0x50472b(0x14b)][_0x50472b(0x12a)]});})[_0x2da147(0x164)](_0x5c905f=>{const _0x4082e8=_0x2da147;return _0x1733f9[_0x4082e8(0x150)]('/services/apexrest'+salesforce_request_1['namespace']+'/async',{'mdlId':_0x24ef9e['metadataLogId'],'opType':salesforce_request_type_1[_0x4082e8(0x14b)][_0x4082e8(0x152)],'message':_0x5c905f[_0x4082e8(0x139)]||_0x5c905f});})[_0x2da147(0x164)](_0xc396de=>logger[_0x2da147(0x148)](_0xc396de['message'])),{'message':_0x2da147(0x153)};}};__decorate([(0x0,core_1['Post'])('retrieve'),__param(0x0,core_1[a101_0x2c8cb0(0x14f)][a101_0x2c8cb0(0x132)]()),__metadata(a101_0x2c8cb0(0x16c),Function),__metadata(a101_0x2c8cb0(0x16a),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a101_0x2c8cb0(0x16d)],a101_0x2c8cb0(0x159),null),__decorate([(0x0,core_1['Post'])(a101_0x2c8cb0(0x15b)),__param(0x0,core_1['param'][a101_0x2c8cb0(0x132)]()),__metadata(a101_0x2c8cb0(0x16c),Function),__metadata(a101_0x2c8cb0(0x16a),[Object]),__metadata(a101_0x2c8cb0(0x160),Promise)],FunctionsController[a101_0x2c8cb0(0x16d)],a101_0x2c8cb0(0x169),null),__decorate([(0x0,core_1[a101_0x2c8cb0(0x15a)])(a101_0x2c8cb0(0x12c)),__param(0x0,core_1[a101_0x2c8cb0(0x14f)][a101_0x2c8cb0(0x132)]()),__metadata(a101_0x2c8cb0(0x16c),Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0x2c8cb0(0x160),Promise)],FunctionsController[a101_0x2c8cb0(0x16d)],'generateAndDeployZip',null),__decorate([(0x0,core_1['Post'])(a101_0x2c8cb0(0x154)),__param(0x0,core_1[a101_0x2c8cb0(0x14f)][a101_0x2c8cb0(0x132)]()),__metadata(a101_0x2c8cb0(0x16c),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],FunctionsController[a101_0x2c8cb0(0x16d)],a101_0x2c8cb0(0x13b),null),FunctionsController=__decorate([(0x0,core_1[a101_0x2c8cb0(0x155)])('functions'),(0x0,core_1[a101_0x2c8cb0(0x138)])('v1')],FunctionsController),exports['FunctionsController']=FunctionsController;