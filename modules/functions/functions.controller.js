const a101_0xa3c6b8=a101_0xccbb;function a101_0x3408(){const _0x598618=['386545pyEURE','1436659kUBsXQ','../../core','__decorate','ERROR','retrieve','Version','post','toString','object','/async','prototype','getOwnPropertyDescriptor','namespace','(((.+)+)+)+$','param','decorate','metadataLogId','./utils/auth.utils','function','design:returntype','design:type','2996168ZCPNUx','deploy-components','411AfpgUa','./services/generate-zip.service','functions','getAuthParameters','server','then','6332edzBWZ','./utils/salesforce-request','message','Job\x20started\x20successfully','credentials','Logger','metadata','Post','OptionType','design:paramtypes','1542944wAUwxO','body','../shared/managers/auth.manager','AuthUtils','SAVE_DEPLOY_ZIP','createRequest','AxiosInstanceUtils','./services/retrieve-zip.service','149721oePYFa','9WdxDEc','generateAndDeployZip','search','1019208iDbLUK','catch','defineProperty','/services/apexrest','GET_TESTS','__param','instanceUrl','error','fetchTestClasses','FunctionsController','./services/fetch-test-classes.service','generate-deploy-zip','DEPLOY','length','deployComponents','retrieveZip','./types/salesforce-request.type','Controller'];a101_0x3408=function(){return _0x598618;};return a101_0x3408();}(function(_0x21eacf,_0x2d6496){const _0x3c726d=a101_0xccbb,_0x34e9f5=_0x21eacf();while(!![]){try{const _0x25166a=-parseInt(_0x3c726d(0x89))/0x1+parseInt(_0x3c726d(0x77))/0x2*(parseInt(_0x3c726d(0x71))/0x3)+parseInt(_0x3c726d(0x81))/0x4+-parseInt(_0x3c726d(0x9f))/0x5+-parseInt(_0x3c726d(0x8d))/0x6+parseInt(_0x3c726d(0xa0))/0x7+parseInt(_0x3c726d(0x6f))/0x8*(-parseInt(_0x3c726d(0x8a))/0x9);if(_0x25166a===_0x2d6496)break;else _0x34e9f5['push'](_0x34e9f5['shift']());}catch(_0x7a1377){_0x34e9f5['push'](_0x34e9f5['shift']());}}}(a101_0x3408,0x3dd70));const a101_0x129d16=(function(){let _0x406d49=!![];return function(_0x40f80c,_0x49ac5c){const _0x34f29c=_0x406d49?function(){if(_0x49ac5c){const _0x25920e=_0x49ac5c['apply'](_0x40f80c,arguments);return _0x49ac5c=null,_0x25920e;}}:function(){};return _0x406d49=![],_0x34f29c;};}()),a101_0x51ef26=a101_0x129d16(this,function(){const _0x296106=a101_0xccbb;return a101_0x51ef26[_0x296106(0xa7)]()[_0x296106(0x8c)](_0x296106(0x67))['toString']()['constructor'](a101_0x51ef26)['search']('(((.+)+)+)+$');});a101_0x51ef26();'use strict';var __decorate=this&&this[a101_0xa3c6b8(0xa2)]||function(_0xaa423c,_0x1a05ed,_0xff16c5,_0x1bfcca){const _0x229422=a101_0xa3c6b8;var _0xc136f6=arguments[_0x229422(0x9a)],_0x4d6f70=_0xc136f6<0x3?_0x1a05ed:_0x1bfcca===null?_0x1bfcca=Object[_0x229422(0x65)](_0x1a05ed,_0xff16c5):_0x1bfcca,_0x4188e3;if(typeof Reflect===_0x229422(0xa8)&&typeof Reflect[_0x229422(0x69)]==='function')_0x4d6f70=Reflect[_0x229422(0x69)](_0xaa423c,_0x1a05ed,_0xff16c5,_0x1bfcca);else{for(var _0x278226=_0xaa423c[_0x229422(0x9a)]-0x1;_0x278226>=0x0;_0x278226--)if(_0x4188e3=_0xaa423c[_0x278226])_0x4d6f70=(_0xc136f6<0x3?_0x4188e3(_0x4d6f70):_0xc136f6>0x3?_0x4188e3(_0x1a05ed,_0xff16c5,_0x4d6f70):_0x4188e3(_0x1a05ed,_0xff16c5))||_0x4d6f70;}return _0xc136f6>0x3&&_0x4d6f70&&Object['defineProperty'](_0x1a05ed,_0xff16c5,_0x4d6f70),_0x4d6f70;},__metadata=this&&this['__metadata']||function(_0x347691,_0x5cfef5){const _0x412b49=a101_0xa3c6b8;if(typeof Reflect===_0x412b49(0xa8)&&typeof Reflect['metadata']===_0x412b49(0x6c))return Reflect[_0x412b49(0x7d)](_0x347691,_0x5cfef5);},__param=this&&this[a101_0xa3c6b8(0x92)]||function(_0x2cb699,_0x42f63d){return function(_0x4a79e2,_0x52b117){_0x42f63d(_0x4a79e2,_0x52b117,_0x2cb699);};};function a101_0xccbb(_0x19b8cf,_0x311dda){const _0xe8f6d6=a101_0x3408();return a101_0xccbb=function(_0x51ef26,_0x129d16){_0x51ef26=_0x51ef26-0x64;let _0x340813=_0xe8f6d6[_0x51ef26];return _0x340813;},a101_0xccbb(_0x19b8cf,_0x311dda);}Object[a101_0xa3c6b8(0x8f)](exports,'__esModule',{'value':!![]}),exports['FunctionsController']=void 0x0;const core_1=require(a101_0xa3c6b8(0xa1)),salesforce_request_type_1=require(a101_0xa3c6b8(0x9d)),retrieve_zip_service_1=require(a101_0xa3c6b8(0x88)),generate_zip_service_1=require(a101_0xa3c6b8(0x72)),fetch_test_classes_service_1=require(a101_0xa3c6b8(0x97)),deploy_attachment_service_1=require('./services/deploy-attachment.service'),salesforce_request_1=require(a101_0xa3c6b8(0x78)),auth_utils_1=require(a101_0xa3c6b8(0x6b)),auth_manager_1=require(a101_0xa3c6b8(0x83)),salesforce_1=require('@flosum/salesforce'),logger=new core_1[(a101_0xa3c6b8(0x7c))](a101_0xa3c6b8(0x75));let FunctionsController=class FunctionsController{async['retrieveZip'](_0x174ebb){const _0x841788=a101_0xa3c6b8,_0xfcfecd=(0x0,salesforce_request_1[_0x841788(0x86)])(auth_utils_1[_0x841788(0x84)][_0x841788(0x74)](_0x174ebb[_0x841788(0x93)]));return(0x0,retrieve_zip_service_1[_0x841788(0x9c)])(_0x174ebb,_0xfcfecd)[_0x841788(0x76)](()=>{const _0x43b398=_0x841788;return _0xfcfecd[_0x43b398(0xa6)](_0x43b398(0x90)+salesforce_request_1['namespace']+'/async',{'mdlId':_0x174ebb['metadataLogId'],'opType':salesforce_request_type_1[_0x43b398(0x7f)]['SAVE_BACKUP_ZIP']});})[_0x841788(0x8e)](_0x2020e8=>{const _0x442881=_0x841788;return _0xfcfecd[_0x442881(0xa6)](_0x442881(0x90)+salesforce_request_1[_0x442881(0x66)]+_0x442881(0xa9),{'mdlId':_0x174ebb[_0x442881(0x6a)],'opType':salesforce_request_type_1[_0x442881(0x7f)][_0x442881(0xa3)],'message':_0x2020e8[_0x442881(0x79)]||_0x2020e8});})[_0x841788(0x8e)](_0x33c4ee=>logger[_0x841788(0x94)](_0x33c4ee[_0x841788(0x79)])),{'message':_0x841788(0x7a)};}async['fetchTestClasses'](_0x403ca7){const _0x427ae6=a101_0xa3c6b8,_0x28d981=(0x0,salesforce_request_1[_0x427ae6(0x86)])(auth_utils_1[_0x427ae6(0x84)][_0x427ae6(0x74)](_0x403ca7[_0x427ae6(0x93)]));return(0x0,fetch_test_classes_service_1['fetchTestClasses'])(_0x403ca7,_0x28d981)[_0x427ae6(0x76)](()=>{const _0x26e377=_0x427ae6;return _0x28d981['post'](_0x26e377(0x90)+salesforce_request_1[_0x26e377(0x66)]+_0x26e377(0xa9),{'mdlId':_0x403ca7[_0x26e377(0x6a)],'opType':salesforce_request_type_1[_0x26e377(0x7f)][_0x26e377(0x91)]});})[_0x427ae6(0x8e)](_0x39edbd=>{const _0x14caa5=_0x427ae6;return _0x28d981['post'](_0x14caa5(0x90)+salesforce_request_1['namespace']+_0x14caa5(0xa9),{'mdlId':_0x403ca7[_0x14caa5(0x6a)],'opType':salesforce_request_type_1['OptionType'][_0x14caa5(0xa3)],'message':_0x39edbd[_0x14caa5(0x79)]||_0x39edbd});})[_0x427ae6(0x8e)](_0xd6eba4=>logger[_0x427ae6(0x94)](_0xd6eba4[_0x427ae6(0x79)])),{'message':_0x427ae6(0x7a)};}async[a101_0xa3c6b8(0x8b)](_0x5ebfc1){const _0x22d9ad=a101_0xa3c6b8,_0x1808ec=(0x0,salesforce_request_1[_0x22d9ad(0x86)])(auth_utils_1[_0x22d9ad(0x84)][_0x22d9ad(0x74)](_0x5ebfc1['instanceUrl'])),_0x535245=await salesforce_1[_0x22d9ad(0x87)]['create'](new auth_manager_1['AuthManager'](_0x5ebfc1[_0x22d9ad(0x7b)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0x5ebfc1,_0x1808ec,_0x535245)['then'](_0x3485a5=>{const _0x3e9616=_0x22d9ad;return _0x1808ec[_0x3e9616(0xa6)]('/services/apexrest'+salesforce_request_1[_0x3e9616(0x66)]+'/async',{'mdlId':_0x5ebfc1['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x3e9616(0x85)],'attachment':_0x3485a5});})['catch'](_0x4db28c=>{const _0xf927a8=_0x22d9ad;return _0x1808ec[_0xf927a8(0xa6)](_0xf927a8(0x90)+salesforce_request_1[_0xf927a8(0x66)]+'/async',{'mdlId':_0x5ebfc1[_0xf927a8(0x6a)],'opType':salesforce_request_type_1[_0xf927a8(0x7f)][_0xf927a8(0xa3)],'message':_0x4db28c[_0xf927a8(0x79)]||_0x4db28c});})[_0x22d9ad(0x8e)](_0x76a3a0=>logger[_0x22d9ad(0x94)](_0x76a3a0[_0x22d9ad(0x79)])),{'message':_0x22d9ad(0x7a)};}async[a101_0xa3c6b8(0x9b)](_0x1b3543){const _0x2860af=a101_0xa3c6b8,_0x27c96a=(0x0,salesforce_request_1[_0x2860af(0x86)])(auth_utils_1[_0x2860af(0x84)][_0x2860af(0x74)](_0x1b3543[_0x2860af(0x93)]));return(0x0,deploy_attachment_service_1[_0x2860af(0x9b)])(_0x1b3543,_0x27c96a)[_0x2860af(0x76)](_0x1087e3=>{const _0x1abd3b=_0x2860af;return _0x27c96a['post'](_0x1abd3b(0x90)+salesforce_request_1[_0x1abd3b(0x66)]+_0x1abd3b(0xa9),{'mdlId':_0x1b3543[_0x1abd3b(0x6a)],'asyncId':_0x1087e3,'opType':salesforce_request_type_1[_0x1abd3b(0x7f)][_0x1abd3b(0x99)]});})[_0x2860af(0x8e)](_0x1ff75d=>{const _0x4a749a=_0x2860af;return _0x27c96a[_0x4a749a(0xa6)](_0x4a749a(0x90)+salesforce_request_1[_0x4a749a(0x66)]+_0x4a749a(0xa9),{'mdlId':_0x1b3543[_0x4a749a(0x6a)],'opType':salesforce_request_type_1['OptionType'][_0x4a749a(0xa3)],'message':_0x1ff75d[_0x4a749a(0x79)]||_0x1ff75d});})[_0x2860af(0x8e)](_0x529cea=>logger['error'](_0x529cea[_0x2860af(0x79)])),{'message':_0x2860af(0x7a)};}};__decorate([(0x0,core_1['Post'])(a101_0xa3c6b8(0xa4)),__param(0x0,core_1[a101_0xa3c6b8(0x68)][a101_0xa3c6b8(0x82)]()),__metadata(a101_0xa3c6b8(0x6e),Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0xa3c6b8(0x6d),Promise)],FunctionsController['prototype'],a101_0xa3c6b8(0x9c),null),__decorate([(0x0,core_1[a101_0xa3c6b8(0x7e)])('fetch-test-classes'),__param(0x0,core_1[a101_0xa3c6b8(0x68)][a101_0xa3c6b8(0x82)]()),__metadata(a101_0xa3c6b8(0x6e),Function),__metadata(a101_0xa3c6b8(0x80),[Object]),__metadata(a101_0xa3c6b8(0x6d),Promise)],FunctionsController['prototype'],a101_0xa3c6b8(0x95),null),__decorate([(0x0,core_1['Post'])(a101_0xa3c6b8(0x98)),__param(0x0,core_1[a101_0xa3c6b8(0x68)]['body']()),__metadata('design:type',Function),__metadata(a101_0xa3c6b8(0x80),[Object]),__metadata(a101_0xa3c6b8(0x6d),Promise)],FunctionsController[a101_0xa3c6b8(0x64)],a101_0xa3c6b8(0x8b),null),__decorate([(0x0,core_1[a101_0xa3c6b8(0x7e)])(a101_0xa3c6b8(0x70)),__param(0x0,core_1['param']['body']()),__metadata('design:type',Function),__metadata(a101_0xa3c6b8(0x80),[Object]),__metadata(a101_0xa3c6b8(0x6d),Promise)],FunctionsController[a101_0xa3c6b8(0x64)],'deployComponents',null),FunctionsController=__decorate([(0x0,core_1[a101_0xa3c6b8(0x9e)])(a101_0xa3c6b8(0x73)),(0x0,core_1[a101_0xa3c6b8(0xa5)])('v1')],FunctionsController),exports[a101_0xa3c6b8(0x96)]=FunctionsController;