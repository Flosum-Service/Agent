const a51_0x1862c1=a51_0x252c;(function(_0x36c95c,_0x3b8d33){const _0x3a2023=a51_0x252c,_0x5a7895=_0x36c95c();while(!![]){try{const _0x28aa66=-parseInt(_0x3a2023(0x1f4))/0x1+parseInt(_0x3a2023(0x1de))/0x2*(-parseInt(_0x3a2023(0x1bd))/0x3)+parseInt(_0x3a2023(0x1ba))/0x4*(parseInt(_0x3a2023(0x1f1))/0x5)+parseInt(_0x3a2023(0x1ed))/0x6+parseInt(_0x3a2023(0x1d5))/0x7+parseInt(_0x3a2023(0x1e1))/0x8*(-parseInt(_0x3a2023(0x1d1))/0x9)+parseInt(_0x3a2023(0x1c0))/0xa*(parseInt(_0x3a2023(0x1d4))/0xb);if(_0x28aa66===_0x3b8d33)break;else _0x5a7895['push'](_0x5a7895['shift']());}catch(_0x20545d){_0x5a7895['push'](_0x5a7895['shift']());}}}(a51_0x39d5,0xa68a2));const a51_0x385b82=(function(){let _0x43637f=!![];return function(_0x211976,_0xe217fc){const _0x28be59=_0x43637f?function(){if(_0xe217fc){const _0x5dc843=_0xe217fc['apply'](_0x211976,arguments);return _0xe217fc=null,_0x5dc843;}}:function(){};return _0x43637f=![],_0x28be59;};}()),a51_0x439973=a51_0x385b82(this,function(){const _0x5c457b=a51_0x252c;return a51_0x439973[_0x5c457b(0x1e0)]()[_0x5c457b(0x1b8)](_0x5c457b(0x1c2))[_0x5c457b(0x1e0)]()['constructor'](a51_0x439973)[_0x5c457b(0x1b8)](_0x5c457b(0x1c2));});a51_0x439973();'use strict';var __decorate=this&&this[a51_0x1862c1(0x1d0)]||function(_0x5c2b68,_0x14748e,_0xfb47be,_0x14423f){const _0x1af99d=a51_0x1862c1;var _0x2e07f1=arguments[_0x1af99d(0x1c9)],_0x11d534=_0x2e07f1<0x3?_0x14748e:_0x14423f===null?_0x14423f=Object[_0x1af99d(0x1be)](_0x14748e,_0xfb47be):_0x14423f,_0x2982e2;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x1af99d(0x1db))_0x11d534=Reflect[_0x1af99d(0x1c1)](_0x5c2b68,_0x14748e,_0xfb47be,_0x14423f);else{for(var _0x29dbb2=_0x5c2b68[_0x1af99d(0x1c9)]-0x1;_0x29dbb2>=0x0;_0x29dbb2--)if(_0x2982e2=_0x5c2b68[_0x29dbb2])_0x11d534=(_0x2e07f1<0x3?_0x2982e2(_0x11d534):_0x2e07f1>0x3?_0x2982e2(_0x14748e,_0xfb47be,_0x11d534):_0x2982e2(_0x14748e,_0xfb47be))||_0x11d534;}return _0x2e07f1>0x3&&_0x11d534&&Object[_0x1af99d(0x1e7)](_0x14748e,_0xfb47be,_0x11d534),_0x11d534;},__metadata=this&&this[a51_0x1862c1(0x1f3)]||function(_0x597845,_0x586ba2){const _0xb7946c=a51_0x1862c1;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0xb7946c(0x1db))return Reflect[_0xb7946c(0x1c4)](_0x597845,_0x586ba2);},__param=this&&this[a51_0x1862c1(0x1ee)]||function(_0x3f8441,_0x5eee64){return function(_0x500613,_0x2b19f3){_0x5eee64(_0x500613,_0x2b19f3,_0x3f8441);};};function a51_0x252c(_0x1f76a5,_0x50ebbb){const _0x4f1bc2=a51_0x39d5();return a51_0x252c=function(_0x439973,_0x385b82){_0x439973=_0x439973-0x1b8;let _0x39d5eb=_0x4f1bc2[_0x439973];return _0x39d5eb;},a51_0x252c(_0x1f76a5,_0x50ebbb);}Object[a51_0x1862c1(0x1e7)](exports,'__esModule',{'value':!![]}),exports[a51_0x1862c1(0x1e9)]=void 0x0;const core_1=require(a51_0x1862c1(0x1e6)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require(a51_0x1862c1(0x1bc)),generate_zip_service_1=require(a51_0x1862c1(0x1ea)),fetch_test_classes_service_1=require('./services/fetch-test-classes.service'),deploy_attachment_service_1=require(a51_0x1862c1(0x1e4)),salesforce_request_1=require(a51_0x1862c1(0x1c5)),auth_utils_1=require(a51_0x1862c1(0x1dd)),logger=new core_1['Logger'](a51_0x1862c1(0x1e2));let FunctionsController=class FunctionsController{async[a51_0x1862c1(0x1bb)](_0x42df03){const _0x5c3002=a51_0x1862c1,_0x398398=(0x0,salesforce_request_1[_0x5c3002(0x1f6)])(auth_utils_1[_0x5c3002(0x1c3)][_0x5c3002(0x1f0)](_0x42df03['instanceUrl']));return(0x0,retrieve_zip_service_1[_0x5c3002(0x1bb)])(_0x42df03,_0x398398)[_0x5c3002(0x1f7)](()=>{const _0x812f54=_0x5c3002;return _0x398398[_0x812f54(0x1d6)](_0x812f54(0x1eb)+salesforce_request_1[_0x812f54(0x1e3)]+_0x812f54(0x1d3),{'mdlId':_0x42df03[_0x812f54(0x1ce)],'opType':salesforce_request_type_1['OptionType']['SAVE_BACKUP_ZIP']});})[_0x5c3002(0x1c7)](_0x3a7671=>{const _0x125c0e=_0x5c3002;return _0x398398[_0x125c0e(0x1d6)](_0x125c0e(0x1eb)+salesforce_request_1['namespace']+_0x125c0e(0x1d3),{'mdlId':_0x42df03[_0x125c0e(0x1ce)],'opType':salesforce_request_type_1['OptionType'][_0x125c0e(0x1f2)],'message':_0x3a7671['message']||_0x3a7671});})[_0x5c3002(0x1c7)](_0x5d525d=>logger[_0x5c3002(0x1e8)](_0x5d525d[_0x5c3002(0x1df)])),{'message':_0x5c3002(0x1b9)};}async['fetchTestClasses'](_0x374bd3){const _0x26ad4e=a51_0x1862c1,_0x3e933a=(0x0,salesforce_request_1[_0x26ad4e(0x1f6)])(auth_utils_1['AuthUtils']['getAuthParameters'](_0x374bd3[_0x26ad4e(0x1c8)]));return(0x0,fetch_test_classes_service_1[_0x26ad4e(0x1cc)])(_0x374bd3,_0x3e933a)[_0x26ad4e(0x1f7)](()=>{const _0xc77cc4=_0x26ad4e;return _0x3e933a[_0xc77cc4(0x1d6)](_0xc77cc4(0x1eb)+salesforce_request_1[_0xc77cc4(0x1e3)]+_0xc77cc4(0x1d3),{'mdlId':_0x374bd3[_0xc77cc4(0x1ce)],'opType':salesforce_request_type_1[_0xc77cc4(0x1dc)]['GET_TESTS']});})['catch'](_0x54797e=>{const _0x56ad3d=_0x26ad4e;return _0x3e933a[_0x56ad3d(0x1d6)](_0x56ad3d(0x1eb)+salesforce_request_1[_0x56ad3d(0x1e3)]+'/async',{'mdlId':_0x374bd3['metadataLogId'],'opType':salesforce_request_type_1[_0x56ad3d(0x1dc)]['ERROR'],'message':_0x54797e['message']||_0x54797e});})[_0x26ad4e(0x1c7)](_0x5cf55c=>logger[_0x26ad4e(0x1e8)](_0x5cf55c[_0x26ad4e(0x1df)])),{'message':_0x26ad4e(0x1b9)};}async[a51_0x1862c1(0x1f5)](_0x205ce1){const _0x167e2b=a51_0x1862c1,_0x2c2201=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x167e2b(0x1c3)][_0x167e2b(0x1f0)](_0x205ce1[_0x167e2b(0x1c8)]));return(0x0,generate_zip_service_1[_0x167e2b(0x1f5)])(_0x205ce1,_0x2c2201)[_0x167e2b(0x1f7)](_0x34c1fb=>{const _0x4e0791=_0x167e2b;return _0x2c2201['post'](_0x4e0791(0x1eb)+salesforce_request_1[_0x4e0791(0x1e3)]+'/async',{'mdlId':_0x205ce1['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x4e0791(0x1ec)],'attachment':_0x34c1fb});})[_0x167e2b(0x1c7)](_0x369138=>{const _0xe1f5e3=_0x167e2b;return _0x2c2201[_0xe1f5e3(0x1d6)](_0xe1f5e3(0x1eb)+salesforce_request_1['namespace']+_0xe1f5e3(0x1d3),{'mdlId':_0x205ce1['metadataLogId'],'opType':salesforce_request_type_1[_0xe1f5e3(0x1dc)][_0xe1f5e3(0x1f2)],'message':_0x369138[_0xe1f5e3(0x1df)]||_0x369138});})[_0x167e2b(0x1c7)](_0x218d43=>logger['error'](_0x218d43[_0x167e2b(0x1df)])),{'message':_0x167e2b(0x1b9)};}async['deployComponents'](_0x20b040){const _0x4455cf=a51_0x1862c1,_0xadbbb8=(0x0,salesforce_request_1[_0x4455cf(0x1f6)])(auth_utils_1['AuthUtils'][_0x4455cf(0x1f0)](_0x20b040['instanceUrl']));return(0x0,deploy_attachment_service_1[_0x4455cf(0x1d9)])(_0x20b040,_0xadbbb8)[_0x4455cf(0x1f7)](_0x4f5a51=>{const _0x4b1c57=_0x4455cf;return _0xadbbb8[_0x4b1c57(0x1d6)](_0x4b1c57(0x1eb)+salesforce_request_1[_0x4b1c57(0x1e3)]+_0x4b1c57(0x1d3),{'mdlId':_0x20b040['metadataLogId'],'asyncId':_0x4f5a51,'opType':salesforce_request_type_1[_0x4b1c57(0x1dc)][_0x4b1c57(0x1d7)]});})[_0x4455cf(0x1c7)](_0x371f7a=>{const _0x481120=_0x4455cf;return _0xadbbb8[_0x481120(0x1d6)]('/services/apexrest'+salesforce_request_1['namespace']+_0x481120(0x1d3),{'mdlId':_0x20b040[_0x481120(0x1ce)],'opType':salesforce_request_type_1[_0x481120(0x1dc)][_0x481120(0x1f2)],'message':_0x371f7a[_0x481120(0x1df)]||_0x371f7a});})['catch'](_0x4defc4=>logger[_0x4455cf(0x1e8)](_0x4defc4[_0x4455cf(0x1df)])),{'message':_0x4455cf(0x1b9)};}};function a51_0x39d5(){const _0x5074b3=['fetchTestClasses','param','metadataLogId','retrieve','__decorate','9341847uDGfhe','body','/async','22wXhhYn','1943368gQqamT','post','DEPLOY','design:type','deployComponents','Post','function','OptionType','./utils/auth.utils','939166yRHyWH','message','toString','8sjQiRT','server','namespace','./services/deploy-attachment.service','deploy-components','../../core','defineProperty','error','FunctionsController','./services/generate-zip.service','/services/apexrest','SAVE_DEPLOY_ZIP','6448386ikdiig','__param','design:returntype','getAuthParameters','5AVBueI','ERROR','__metadata','257230WsUXQo','generateAndDeployZip','createRequest','then','fetch-test-classes','search','Job\x20started\x20successfully','865700VYXtGs','retrieveZip','./services/retrieve-zip.service','3UaubMd','getOwnPropertyDescriptor','design:paramtypes','4390810nEVhcL','decorate','(((.+)+)+)+$','AuthUtils','metadata','./utils/salesforce-request','generate-deploy-zip','catch','instanceUrl','length','Version','prototype'];a51_0x39d5=function(){return _0x5074b3;};return a51_0x39d5();}__decorate([(0x0,core_1['Post'])(a51_0x1862c1(0x1cf)),__param(0x0,core_1['param'][a51_0x1862c1(0x1d2)]()),__metadata(a51_0x1862c1(0x1d8),Function),__metadata(a51_0x1862c1(0x1bf),[Object]),__metadata(a51_0x1862c1(0x1ef),Promise)],FunctionsController[a51_0x1862c1(0x1cb)],'retrieveZip',null),__decorate([(0x0,core_1[a51_0x1862c1(0x1da)])(a51_0x1862c1(0x1f8)),__param(0x0,core_1[a51_0x1862c1(0x1cd)][a51_0x1862c1(0x1d2)]()),__metadata('design:type',Function),__metadata(a51_0x1862c1(0x1bf),[Object]),__metadata(a51_0x1862c1(0x1ef),Promise)],FunctionsController[a51_0x1862c1(0x1cb)],a51_0x1862c1(0x1cc),null),__decorate([(0x0,core_1[a51_0x1862c1(0x1da)])(a51_0x1862c1(0x1c6)),__param(0x0,core_1[a51_0x1862c1(0x1cd)]['body']()),__metadata(a51_0x1862c1(0x1d8),Function),__metadata(a51_0x1862c1(0x1bf),[Object]),__metadata(a51_0x1862c1(0x1ef),Promise)],FunctionsController['prototype'],a51_0x1862c1(0x1f5),null),__decorate([(0x0,core_1[a51_0x1862c1(0x1da)])(a51_0x1862c1(0x1e5)),__param(0x0,core_1[a51_0x1862c1(0x1cd)]['body']()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a51_0x1862c1(0x1ef),Promise)],FunctionsController['prototype'],a51_0x1862c1(0x1d9),null),FunctionsController=__decorate([(0x0,core_1['Controller'])('functions'),(0x0,core_1[a51_0x1862c1(0x1ca)])('v1')],FunctionsController),exports['FunctionsController']=FunctionsController;