const a84_0x22b922=a84_0x5711;(function(_0x44e1d6,_0x4155fa){const _0x31626f=a84_0x5711,_0x5a8715=_0x44e1d6();while(!![]){try{const _0x38c3a4=parseInt(_0x31626f(0x15e))/0x1*(-parseInt(_0x31626f(0x176))/0x2)+parseInt(_0x31626f(0x179))/0x3+-parseInt(_0x31626f(0x183))/0x4*(-parseInt(_0x31626f(0x156))/0x5)+parseInt(_0x31626f(0x18f))/0x6*(-parseInt(_0x31626f(0x158))/0x7)+-parseInt(_0x31626f(0x160))/0x8+parseInt(_0x31626f(0x161))/0x9+parseInt(_0x31626f(0x18e))/0xa*(parseInt(_0x31626f(0x180))/0xb);if(_0x38c3a4===_0x4155fa)break;else _0x5a8715['push'](_0x5a8715['shift']());}catch(_0x290be9){_0x5a8715['push'](_0x5a8715['shift']());}}}(a84_0x3449,0x66130));const a84_0x53ad26=(function(){let _0x4d21e2=!![];return function(_0x5b753f,_0x37d0de){const _0x2d2cad=_0x4d21e2?function(){const _0x41574a=a84_0x5711;if(_0x37d0de){const _0x3bea48=_0x37d0de[_0x41574a(0x171)](_0x5b753f,arguments);return _0x37d0de=null,_0x3bea48;}}:function(){};return _0x4d21e2=![],_0x2d2cad;};}()),a84_0x2efd2f=a84_0x53ad26(this,function(){const _0x97b6b6=a84_0x5711;return a84_0x2efd2f['toString']()[_0x97b6b6(0x175)]('(((.+)+)+)+$')[_0x97b6b6(0x185)]()[_0x97b6b6(0x191)](a84_0x2efd2f)[_0x97b6b6(0x175)](_0x97b6b6(0x19b));});a84_0x2efd2f();'use strict';var __decorate=this&&this[a84_0x22b922(0x19a)]||function(_0x59f3d5,_0x1cff88,_0xe46ef8,_0x56bece){const _0x2653c0=a84_0x22b922;var _0xb87f98=arguments['length'],_0x4b8e46=_0xb87f98<0x3?_0x1cff88:_0x56bece===null?_0x56bece=Object['getOwnPropertyDescriptor'](_0x1cff88,_0xe46ef8):_0x56bece,_0x453616;if(typeof Reflect===_0x2653c0(0x186)&&typeof Reflect[_0x2653c0(0x165)]===_0x2653c0(0x177))_0x4b8e46=Reflect[_0x2653c0(0x165)](_0x59f3d5,_0x1cff88,_0xe46ef8,_0x56bece);else{for(var _0x5f05d2=_0x59f3d5['length']-0x1;_0x5f05d2>=0x0;_0x5f05d2--)if(_0x453616=_0x59f3d5[_0x5f05d2])_0x4b8e46=(_0xb87f98<0x3?_0x453616(_0x4b8e46):_0xb87f98>0x3?_0x453616(_0x1cff88,_0xe46ef8,_0x4b8e46):_0x453616(_0x1cff88,_0xe46ef8))||_0x4b8e46;}return _0xb87f98>0x3&&_0x4b8e46&&Object['defineProperty'](_0x1cff88,_0xe46ef8,_0x4b8e46),_0x4b8e46;},__metadata=this&&this[a84_0x22b922(0x195)]||function(_0x160d82,_0x340362){const _0x41f87c=a84_0x22b922;if(typeof Reflect===_0x41f87c(0x186)&&typeof Reflect[_0x41f87c(0x182)]===_0x41f87c(0x177))return Reflect[_0x41f87c(0x182)](_0x160d82,_0x340362);},__param=this&&this['__param']||function(_0x3e9761,_0x193099){return function(_0x4d0da1,_0x3611a3){_0x193099(_0x4d0da1,_0x3611a3,_0x3e9761);};};Object[a84_0x22b922(0x198)](exports,a84_0x22b922(0x16f),{'value':!![]}),exports[a84_0x22b922(0x190)]=void 0x0;const core_1=require(a84_0x22b922(0x189)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require(a84_0x22b922(0x16a)),generate_zip_service_1=require('./services/generate-zip.service'),fetch_test_classes_service_1=require('./services/fetch-test-classes.service'),deploy_attachment_service_1=require('./services/deploy-attachment.service'),salesforce_request_1=require('./utils/salesforce-request'),auth_utils_1=require(a84_0x22b922(0x157)),auth_manager_1=require('../shared/managers/auth.manager'),salesforce_1=require('@flosum/salesforce'),logger=new core_1[(a84_0x22b922(0x162))](a84_0x22b922(0x17b));let FunctionsController=class FunctionsController{async[a84_0x22b922(0x192)](_0xf2fd29){const _0x1820a2=a84_0x22b922,_0x552010=(0x0,salesforce_request_1[_0x1820a2(0x187)])(auth_utils_1[_0x1820a2(0x18c)][_0x1820a2(0x184)](_0xf2fd29[_0x1820a2(0x17a)]));return(0x0,retrieve_zip_service_1[_0x1820a2(0x192)])(_0xf2fd29,_0x552010)[_0x1820a2(0x164)](()=>{const _0x570ec7=_0x1820a2;return _0x552010[_0x570ec7(0x169)](_0x570ec7(0x16c)+salesforce_request_1[_0x570ec7(0x172)]+'/async',{'mdlId':_0xf2fd29[_0x570ec7(0x181)],'opType':salesforce_request_type_1[_0x570ec7(0x196)][_0x570ec7(0x18d)]});})[_0x1820a2(0x15f)](_0x31dea3=>{const _0x5779eb=_0x1820a2;return _0x552010[_0x5779eb(0x169)](_0x5779eb(0x16c)+salesforce_request_1[_0x5779eb(0x172)]+_0x5779eb(0x15b),{'mdlId':_0xf2fd29['metadataLogId'],'opType':salesforce_request_type_1[_0x5779eb(0x196)]['ERROR'],'message':_0x31dea3[_0x5779eb(0x174)]||_0x31dea3});})[_0x1820a2(0x15f)](_0x104ae1=>logger[_0x1820a2(0x188)](_0x104ae1[_0x1820a2(0x174)])),{'message':_0x1820a2(0x17e)};}async[a84_0x22b922(0x17c)](_0x1188fc){const _0x3f6962=a84_0x22b922,_0x235877=(0x0,salesforce_request_1['createRequest'])(auth_utils_1['AuthUtils'][_0x3f6962(0x184)](_0x1188fc['instanceUrl']));return(0x0,fetch_test_classes_service_1[_0x3f6962(0x17c)])(_0x1188fc,_0x235877)[_0x3f6962(0x164)](()=>{const _0x59fdfe=_0x3f6962;return _0x235877[_0x59fdfe(0x169)]('/services/apexrest'+salesforce_request_1[_0x59fdfe(0x172)]+_0x59fdfe(0x15b),{'mdlId':_0x1188fc[_0x59fdfe(0x181)],'opType':salesforce_request_type_1[_0x59fdfe(0x196)][_0x59fdfe(0x166)]});})[_0x3f6962(0x15f)](_0x28fc1a=>{const _0x5a37e2=_0x3f6962;return _0x235877['post'](_0x5a37e2(0x16c)+salesforce_request_1[_0x5a37e2(0x172)]+_0x5a37e2(0x15b),{'mdlId':_0x1188fc[_0x5a37e2(0x181)],'opType':salesforce_request_type_1['OptionType'][_0x5a37e2(0x167)],'message':_0x28fc1a[_0x5a37e2(0x174)]||_0x28fc1a});})['catch'](_0x1e533a=>logger[_0x3f6962(0x188)](_0x1e533a['message'])),{'message':_0x3f6962(0x17e)};}async[a84_0x22b922(0x197)](_0x182e68){const _0x15e077=a84_0x22b922,_0x271934=(0x0,salesforce_request_1[_0x15e077(0x187)])(auth_utils_1[_0x15e077(0x18c)][_0x15e077(0x184)](_0x182e68['instanceUrl'])),_0x5b724a=await salesforce_1[_0x15e077(0x163)][_0x15e077(0x16d)](new auth_manager_1[(_0x15e077(0x16b))](_0x182e68[_0x15e077(0x18b)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0x15e077(0x197)])(_0x182e68,_0x271934,_0x5b724a)[_0x15e077(0x164)](_0x430138=>{const _0x2921f6=_0x15e077;return _0x271934['post'](_0x2921f6(0x16c)+salesforce_request_1[_0x2921f6(0x172)]+_0x2921f6(0x15b),{'mdlId':_0x182e68[_0x2921f6(0x181)],'opType':salesforce_request_type_1[_0x2921f6(0x196)][_0x2921f6(0x199)],'attachment':_0x430138});})['catch'](_0x31bd7f=>{const _0x41387e=_0x15e077;return _0x271934[_0x41387e(0x169)]('/services/apexrest'+salesforce_request_1[_0x41387e(0x172)]+_0x41387e(0x15b),{'mdlId':_0x182e68[_0x41387e(0x181)],'opType':salesforce_request_type_1['OptionType'][_0x41387e(0x167)],'message':_0x31bd7f[_0x41387e(0x174)]||_0x31bd7f});})[_0x15e077(0x15f)](_0x52e508=>logger[_0x15e077(0x188)](_0x52e508['message'])),{'message':_0x15e077(0x17e)};}async[a84_0x22b922(0x159)](_0x5b727f){const _0x4c6786=a84_0x22b922,_0x590ffe=(0x0,salesforce_request_1[_0x4c6786(0x187)])(auth_utils_1[_0x4c6786(0x18c)][_0x4c6786(0x184)](_0x5b727f[_0x4c6786(0x17a)]));return(0x0,deploy_attachment_service_1['deployComponents'])(_0x5b727f,_0x590ffe)[_0x4c6786(0x164)](_0x4e15e9=>{const _0x417298=_0x4c6786;return _0x590ffe[_0x417298(0x169)](_0x417298(0x16c)+salesforce_request_1[_0x417298(0x172)]+_0x417298(0x15b),{'mdlId':_0x5b727f[_0x417298(0x181)],'asyncId':_0x4e15e9,'opType':salesforce_request_type_1[_0x417298(0x196)][_0x417298(0x17d)]});})[_0x4c6786(0x15f)](_0x398e9e=>{const _0x2933bb=_0x4c6786;return _0x590ffe['post']('/services/apexrest'+salesforce_request_1[_0x2933bb(0x172)]+_0x2933bb(0x15b),{'mdlId':_0x5b727f[_0x2933bb(0x181)],'opType':salesforce_request_type_1[_0x2933bb(0x196)]['ERROR'],'message':_0x398e9e[_0x2933bb(0x174)]||_0x398e9e});})['catch'](_0x2f751e=>logger[_0x4c6786(0x188)](_0x2f751e[_0x4c6786(0x174)])),{'message':'Job\x20started\x20successfully'};}};function a84_0x5711(_0x3c783c,_0xa65e46){const _0x2cb3d5=a84_0x3449();return a84_0x5711=function(_0x2efd2f,_0x53ad26){_0x2efd2f=_0x2efd2f-0x156;let _0x34490a=_0x2cb3d5[_0x2efd2f];return _0x34490a;},a84_0x5711(_0x3c783c,_0xa65e46);}function a84_0x3449(){const _0x50e849=['./services/retrieve-zip.service','AuthManager','/services/apexrest','create','Controller','__esModule','functions','apply','namespace','Post','message','search','18HtdDFP','function','prototype','903735vULedT','instanceUrl','server','fetchTestClasses','DEPLOY','Job\x20started\x20successfully','param','1617QdTudI','metadataLogId','metadata','16mSQfKM','getAuthParameters','toString','object','createRequest','error','../../core','design:type','credentials','AuthUtils','SAVE_BACKUP_ZIP','18400vZtquu','1238838wrBsUA','FunctionsController','constructor','retrieveZip','design:returntype','deploy-components','__metadata','OptionType','generateAndDeployZip','defineProperty','SAVE_DEPLOY_ZIP','__decorate','(((.+)+)+)+$','368035xPKkfD','./utils/auth.utils','28oJLSym','deployComponents','retrieve','/async','body','design:paramtypes','19193XbXaQd','catch','2111576vHMwqv','7330671dYGRpG','Logger','AxiosInstanceUtils','then','decorate','GET_TESTS','ERROR','Version','post'];a84_0x3449=function(){return _0x50e849;};return a84_0x3449();}__decorate([(0x0,core_1[a84_0x22b922(0x173)])(a84_0x22b922(0x15a)),__param(0x0,core_1[a84_0x22b922(0x17f)][a84_0x22b922(0x15c)]()),__metadata(a84_0x22b922(0x18a),Function),__metadata(a84_0x22b922(0x15d),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a84_0x22b922(0x178)],a84_0x22b922(0x192),null),__decorate([(0x0,core_1['Post'])('fetch-test-classes'),__param(0x0,core_1[a84_0x22b922(0x17f)][a84_0x22b922(0x15c)]()),__metadata(a84_0x22b922(0x18a),Function),__metadata(a84_0x22b922(0x15d),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a84_0x22b922(0x178)],'fetchTestClasses',null),__decorate([(0x0,core_1['Post'])('generate-deploy-zip'),__param(0x0,core_1['param']['body']()),__metadata(a84_0x22b922(0x18a),Function),__metadata(a84_0x22b922(0x15d),[Object]),__metadata(a84_0x22b922(0x193),Promise)],FunctionsController[a84_0x22b922(0x178)],a84_0x22b922(0x197),null),__decorate([(0x0,core_1['Post'])(a84_0x22b922(0x194)),__param(0x0,core_1[a84_0x22b922(0x17f)][a84_0x22b922(0x15c)]()),__metadata(a84_0x22b922(0x18a),Function),__metadata(a84_0x22b922(0x15d),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a84_0x22b922(0x178)],'deployComponents',null),FunctionsController=__decorate([(0x0,core_1[a84_0x22b922(0x16e)])(a84_0x22b922(0x170)),(0x0,core_1[a84_0x22b922(0x168)])('v1')],FunctionsController),exports[a84_0x22b922(0x190)]=FunctionsController;