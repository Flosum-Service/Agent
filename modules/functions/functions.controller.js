const a101_0x939fa3=a101_0x6513;(function(_0x3946dc,_0x2d4006){const _0x17a854=a101_0x6513,_0x2e60ed=_0x3946dc();while(!![]){try{const _0xa59cb1=parseInt(_0x17a854(0x1e1))/0x1*(-parseInt(_0x17a854(0x1d9))/0x2)+-parseInt(_0x17a854(0x1b7))/0x3*(-parseInt(_0x17a854(0x1bb))/0x4)+parseInt(_0x17a854(0x1d1))/0x5*(parseInt(_0x17a854(0x1d3))/0x6)+-parseInt(_0x17a854(0x1f1))/0x7+parseInt(_0x17a854(0x1e7))/0x8+-parseInt(_0x17a854(0x1c9))/0x9*(-parseInt(_0x17a854(0x1d7))/0xa)+parseInt(_0x17a854(0x1d4))/0xb*(-parseInt(_0x17a854(0x1c5))/0xc);if(_0xa59cb1===_0x2d4006)break;else _0x2e60ed['push'](_0x2e60ed['shift']());}catch(_0x260c35){_0x2e60ed['push'](_0x2e60ed['shift']());}}}(a101_0x4144,0xcf601));const a101_0x1b08f6=(function(){let _0x39c10f=!![];return function(_0x5ab534,_0x44b24e){const _0x5a08e8=_0x39c10f?function(){const _0x3ebb17=a101_0x6513;if(_0x44b24e){const _0x51ceaf=_0x44b24e[_0x3ebb17(0x1ef)](_0x5ab534,arguments);return _0x44b24e=null,_0x51ceaf;}}:function(){};return _0x39c10f=![],_0x5a08e8;};}()),a101_0x447629=a101_0x1b08f6(this,function(){const _0x59a515=a101_0x6513;return a101_0x447629[_0x59a515(0x1ce)]()['search'](_0x59a515(0x1e5))['toString']()[_0x59a515(0x1c6)](a101_0x447629)[_0x59a515(0x1f5)](_0x59a515(0x1e5));});a101_0x447629();'use strict';var __decorate=this&&this[a101_0x939fa3(0x1ed)]||function(_0xbcc0f5,_0x46056f,_0x3df887,_0x3421ba){const _0x31fd97=a101_0x939fa3;var _0x2c06c4=arguments[_0x31fd97(0x1b6)],_0x268f21=_0x2c06c4<0x3?_0x46056f:_0x3421ba===null?_0x3421ba=Object['getOwnPropertyDescriptor'](_0x46056f,_0x3df887):_0x3421ba,_0xb6a18;if(typeof Reflect===_0x31fd97(0x1c2)&&typeof Reflect['decorate']==='function')_0x268f21=Reflect[_0x31fd97(0x1d5)](_0xbcc0f5,_0x46056f,_0x3df887,_0x3421ba);else{for(var _0x187267=_0xbcc0f5[_0x31fd97(0x1b6)]-0x1;_0x187267>=0x0;_0x187267--)if(_0xb6a18=_0xbcc0f5[_0x187267])_0x268f21=(_0x2c06c4<0x3?_0xb6a18(_0x268f21):_0x2c06c4>0x3?_0xb6a18(_0x46056f,_0x3df887,_0x268f21):_0xb6a18(_0x46056f,_0x3df887))||_0x268f21;}return _0x2c06c4>0x3&&_0x268f21&&Object[_0x31fd97(0x1e9)](_0x46056f,_0x3df887,_0x268f21),_0x268f21;},__metadata=this&&this[a101_0x939fa3(0x1fd)]||function(_0x3f284d,_0x13762e){const _0x28e9ad=a101_0x939fa3;if(typeof Reflect===_0x28e9ad(0x1c2)&&typeof Reflect[_0x28e9ad(0x1be)]==='function')return Reflect[_0x28e9ad(0x1be)](_0x3f284d,_0x13762e);},__param=this&&this['__param']||function(_0x548276,_0x3096c5){return function(_0x122ffa,_0x4dc159){_0x3096c5(_0x122ffa,_0x4dc159,_0x548276);};};Object[a101_0x939fa3(0x1e9)](exports,a101_0x939fa3(0x1da),{'value':!![]}),exports['FunctionsController']=void 0x0;const core_1=require(a101_0x939fa3(0x1cf)),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require(a101_0x939fa3(0x1dd)),generate_zip_service_1=require(a101_0x939fa3(0x1fc)),fetch_test_classes_service_1=require(a101_0x939fa3(0x1bc)),deploy_attachment_service_1=require(a101_0x939fa3(0x1e6)),salesforce_request_1=require('./utils/salesforce-request'),auth_utils_1=require(a101_0x939fa3(0x1ec)),auth_manager_1=require(a101_0x939fa3(0x1e3)),salesforce_1=require('@flosum/salesforce'),logger=new core_1[(a101_0x939fa3(0x1f8))]('server');let FunctionsController=class FunctionsController{async[a101_0x939fa3(0x1eb)](_0x1031b6){const _0x3faca2=a101_0x939fa3,_0x5ac841=(0x0,salesforce_request_1[_0x3faca2(0x1d8)])(auth_utils_1[_0x3faca2(0x1c7)][_0x3faca2(0x1f4)](_0x1031b6[_0x3faca2(0x1e2)]));return(0x0,retrieve_zip_service_1[_0x3faca2(0x1eb)])(_0x1031b6,_0x5ac841)[_0x3faca2(0x1ea)](()=>{const _0x4830de=_0x3faca2;return _0x5ac841[_0x4830de(0x1fb)](_0x4830de(0x1ca)+salesforce_request_1[_0x4830de(0x1de)]+_0x4830de(0x1dc),{'mdlId':_0x1031b6[_0x4830de(0x1f0)],'opType':salesforce_request_type_1[_0x4830de(0x1c0)][_0x4830de(0x1b8)]});})['catch'](_0x4c0bdf=>{const _0x3119e7=_0x3faca2;return _0x5ac841[_0x3119e7(0x1fb)](_0x3119e7(0x1ca)+salesforce_request_1[_0x3119e7(0x1de)]+_0x3119e7(0x1dc),{'mdlId':_0x1031b6['metadataLogId'],'opType':salesforce_request_type_1[_0x3119e7(0x1c0)]['ERROR'],'message':_0x4c0bdf[_0x3119e7(0x1cc)]||_0x4c0bdf});})[_0x3faca2(0x1c8)](_0x59fc45=>logger['error'](_0x59fc45['message'])),{'message':'Job\x20started\x20successfully'};}async[a101_0x939fa3(0x1d2)](_0x2c6b17){const _0x362c6f=a101_0x939fa3,_0x3b5c96=(0x0,salesforce_request_1[_0x362c6f(0x1d8)])(auth_utils_1['AuthUtils'][_0x362c6f(0x1f4)](_0x2c6b17[_0x362c6f(0x1e2)]));return(0x0,fetch_test_classes_service_1[_0x362c6f(0x1d2)])(_0x2c6b17,_0x3b5c96)['then'](()=>{const _0x1f48d3=_0x362c6f;return _0x3b5c96[_0x1f48d3(0x1fb)](_0x1f48d3(0x1ca)+salesforce_request_1[_0x1f48d3(0x1de)]+_0x1f48d3(0x1dc),{'mdlId':_0x2c6b17[_0x1f48d3(0x1f0)],'opType':salesforce_request_type_1[_0x1f48d3(0x1c0)][_0x1f48d3(0x1e8)]});})[_0x362c6f(0x1c8)](_0x1a9edf=>{const _0x46d5de=_0x362c6f;return _0x3b5c96[_0x46d5de(0x1fb)](_0x46d5de(0x1ca)+salesforce_request_1[_0x46d5de(0x1de)]+_0x46d5de(0x1dc),{'mdlId':_0x2c6b17['metadataLogId'],'opType':salesforce_request_type_1['OptionType'][_0x46d5de(0x1db)],'message':_0x1a9edf['message']||_0x1a9edf});})['catch'](_0x934fa8=>logger[_0x362c6f(0x1cb)](_0x934fa8[_0x362c6f(0x1cc)])),{'message':_0x362c6f(0x1bd)};}async['generateAndDeployZip'](_0xd46598){const _0x36ac47=a101_0x939fa3,_0xbb4fdd=(0x0,salesforce_request_1[_0x36ac47(0x1d8)])(auth_utils_1[_0x36ac47(0x1c7)][_0x36ac47(0x1f4)](_0xd46598[_0x36ac47(0x1e2)])),_0x445642=await salesforce_1[_0x36ac47(0x1f6)][_0x36ac47(0x1c4)](new auth_manager_1[(_0x36ac47(0x1f3))](_0xd46598[_0x36ac47(0x1cd)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1['generateAndDeployZip'])(_0xd46598,_0xbb4fdd,_0x445642)[_0x36ac47(0x1ea)](_0x5e9d7e=>{const _0x33086f=_0x36ac47;return _0xbb4fdd[_0x33086f(0x1fb)]('/services/apexrest'+salesforce_request_1[_0x33086f(0x1de)]+_0x33086f(0x1dc),{'mdlId':_0xd46598[_0x33086f(0x1f0)],'opType':salesforce_request_type_1[_0x33086f(0x1c0)][_0x33086f(0x1f9)],'attachment':_0x5e9d7e});})[_0x36ac47(0x1c8)](_0x1437f0=>{const _0x3e81fa=_0x36ac47;return _0xbb4fdd[_0x3e81fa(0x1fb)]('/services/apexrest'+salesforce_request_1[_0x3e81fa(0x1de)]+_0x3e81fa(0x1dc),{'mdlId':_0xd46598[_0x3e81fa(0x1f0)],'opType':salesforce_request_type_1[_0x3e81fa(0x1c0)][_0x3e81fa(0x1db)],'message':_0x1437f0[_0x3e81fa(0x1cc)]||_0x1437f0});})[_0x36ac47(0x1c8)](_0x47ff11=>logger[_0x36ac47(0x1cb)](_0x47ff11[_0x36ac47(0x1cc)])),{'message':_0x36ac47(0x1bd)};}async[a101_0x939fa3(0x1ba)](_0x2972d7){const _0x3f3f87=a101_0x939fa3,_0x4a980a=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x3f3f87(0x1c7)][_0x3f3f87(0x1f4)](_0x2972d7[_0x3f3f87(0x1e2)]));return(0x0,deploy_attachment_service_1['deployComponents'])(_0x2972d7,_0x4a980a)['then'](_0x13cda7=>{const _0x5a6a6b=_0x3f3f87;return _0x4a980a[_0x5a6a6b(0x1fb)](_0x5a6a6b(0x1ca)+salesforce_request_1[_0x5a6a6b(0x1de)]+_0x5a6a6b(0x1dc),{'mdlId':_0x2972d7[_0x5a6a6b(0x1f0)],'asyncId':_0x13cda7,'opType':salesforce_request_type_1[_0x5a6a6b(0x1c0)][_0x5a6a6b(0x1b9)]});})[_0x3f3f87(0x1c8)](_0x563c59=>{const _0x2f545f=_0x3f3f87;return _0x4a980a['post'](_0x2f545f(0x1ca)+salesforce_request_1[_0x2f545f(0x1de)]+_0x2f545f(0x1dc),{'mdlId':_0x2972d7[_0x2f545f(0x1f0)],'opType':salesforce_request_type_1[_0x2f545f(0x1c0)][_0x2f545f(0x1db)],'message':_0x563c59[_0x2f545f(0x1cc)]||_0x563c59});})[_0x3f3f87(0x1c8)](_0x3166ab=>logger[_0x3f3f87(0x1cb)](_0x3166ab['message'])),{'message':_0x3f3f87(0x1bd)};}};function a101_0x6513(_0x20f80c,_0x2bcd4a){const _0x132e1e=a101_0x4144();return a101_0x6513=function(_0x447629,_0x1b08f6){_0x447629=_0x447629-0x1b5;let _0x41449a=_0x132e1e[_0x447629];return _0x41449a;},a101_0x6513(_0x20f80c,_0x2bcd4a);}__decorate([(0x0,core_1['Post'])('retrieve'),__param(0x0,core_1[a101_0x939fa3(0x1bf)][a101_0x939fa3(0x1b5)]()),__metadata(a101_0x939fa3(0x1d6),Function),__metadata(a101_0x939fa3(0x1c1),[Object]),__metadata(a101_0x939fa3(0x1ee),Promise)],FunctionsController[a101_0x939fa3(0x1e0)],a101_0x939fa3(0x1eb),null),__decorate([(0x0,core_1[a101_0x939fa3(0x1f2)])(a101_0x939fa3(0x1df)),__param(0x0,core_1['param'][a101_0x939fa3(0x1b5)]()),__metadata(a101_0x939fa3(0x1d6),Function),__metadata(a101_0x939fa3(0x1c1),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a101_0x939fa3(0x1e0)],a101_0x939fa3(0x1d2),null),__decorate([(0x0,core_1[a101_0x939fa3(0x1f2)])(a101_0x939fa3(0x1e4)),__param(0x0,core_1[a101_0x939fa3(0x1bf)]['body']()),__metadata(a101_0x939fa3(0x1d6),Function),__metadata(a101_0x939fa3(0x1c1),[Object]),__metadata(a101_0x939fa3(0x1ee),Promise)],FunctionsController[a101_0x939fa3(0x1e0)],a101_0x939fa3(0x1f7),null),__decorate([(0x0,core_1['Post'])('deploy-components'),__param(0x0,core_1[a101_0x939fa3(0x1bf)]['body']()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a101_0x939fa3(0x1ee),Promise)],FunctionsController[a101_0x939fa3(0x1e0)],'deployComponents',null),FunctionsController=__decorate([(0x0,core_1[a101_0x939fa3(0x1c3)])('functions'),(0x0,core_1[a101_0x939fa3(0x1fa)])('v1')],FunctionsController),exports[a101_0x939fa3(0x1d0)]=FunctionsController;function a101_0x4144(){const _0x4aa89a=['(((.+)+)+)+$','./services/deploy-attachment.service','11340064yDzUxL','GET_TESTS','defineProperty','then','retrieveZip','./utils/auth.utils','__decorate','design:returntype','apply','metadataLogId','2323643nbRTPA','Post','AuthManager','getAuthParameters','search','AxiosInstanceUtils','generateAndDeployZip','Logger','SAVE_DEPLOY_ZIP','Version','post','./services/generate-zip.service','__metadata','body','length','3kqMdjV','SAVE_BACKUP_ZIP','DEPLOY','deployComponents','2060308nDvPut','./services/fetch-test-classes.service','Job\x20started\x20successfully','metadata','param','OptionType','design:paramtypes','object','Controller','create','155940GwkWCj','constructor','AuthUtils','catch','868149PSIgAh','/services/apexrest','error','message','credentials','toString','../../core','FunctionsController','21365imdgoB','fetchTestClasses','420GDhoLf','462LAaqQG','decorate','design:type','70MCysAd','createRequest','2uathGj','__esModule','ERROR','/async','./services/retrieve-zip.service','namespace','fetch-test-classes','prototype','1179774gbeUMt','instanceUrl','../shared/managers/auth.manager','generate-deploy-zip'];a101_0x4144=function(){return _0x4aa89a;};return a101_0x4144();}