const a99_0x4bcb03=a99_0x325c;(function(_0x18dff4,_0x1e5df5){const _0x46e6b=a99_0x325c,_0x20b345=_0x18dff4();while(!![]){try{const _0x375103=-parseInt(_0x46e6b(0x170))/0x1+-parseInt(_0x46e6b(0x18d))/0x2+parseInt(_0x46e6b(0x194))/0x3+parseInt(_0x46e6b(0x15c))/0x4+parseInt(_0x46e6b(0x174))/0x5+-parseInt(_0x46e6b(0x160))/0x6+-parseInt(_0x46e6b(0x186))/0x7*(-parseInt(_0x46e6b(0x17b))/0x8);if(_0x375103===_0x1e5df5)break;else _0x20b345['push'](_0x20b345['shift']());}catch(_0x33452d){_0x20b345['push'](_0x20b345['shift']());}}}(a99_0x18b5,0x750a3));function a99_0x325c(_0x35341d,_0x498220){const _0x3b508e=a99_0x18b5();return a99_0x325c=function(_0x4eb8fc,_0x2890a7){_0x4eb8fc=_0x4eb8fc-0x159;let _0x18b540=_0x3b508e[_0x4eb8fc];return _0x18b540;},a99_0x325c(_0x35341d,_0x498220);}const a99_0x2890a7=(function(){let _0x5abddb=!![];return function(_0x50eb1f,_0x1baf73){const _0x4acacc=_0x5abddb?function(){const _0x4f17b6=a99_0x325c;if(_0x1baf73){const _0x22bd56=_0x1baf73[_0x4f17b6(0x19b)](_0x50eb1f,arguments);return _0x1baf73=null,_0x22bd56;}}:function(){};return _0x5abddb=![],_0x4acacc;};}()),a99_0x4eb8fc=a99_0x2890a7(this,function(){const _0x13327e=a99_0x325c;return a99_0x4eb8fc[_0x13327e(0x17f)]()[_0x13327e(0x197)](_0x13327e(0x169))[_0x13327e(0x17f)]()[_0x13327e(0x19c)](a99_0x4eb8fc)[_0x13327e(0x197)](_0x13327e(0x169));});a99_0x4eb8fc();'use strict';var __decorate=this&&this['__decorate']||function(_0x473429,_0x2d524d,_0x24355f,_0x4a4550){const _0x5a107f=a99_0x325c;var _0x48e8fe=arguments[_0x5a107f(0x184)],_0x1392a9=_0x48e8fe<0x3?_0x2d524d:_0x4a4550===null?_0x4a4550=Object[_0x5a107f(0x187)](_0x2d524d,_0x24355f):_0x4a4550,_0x349161;if(typeof Reflect===_0x5a107f(0x168)&&typeof Reflect[_0x5a107f(0x192)]==='function')_0x1392a9=Reflect[_0x5a107f(0x192)](_0x473429,_0x2d524d,_0x24355f,_0x4a4550);else{for(var _0x4c1990=_0x473429[_0x5a107f(0x184)]-0x1;_0x4c1990>=0x0;_0x4c1990--)if(_0x349161=_0x473429[_0x4c1990])_0x1392a9=(_0x48e8fe<0x3?_0x349161(_0x1392a9):_0x48e8fe>0x3?_0x349161(_0x2d524d,_0x24355f,_0x1392a9):_0x349161(_0x2d524d,_0x24355f))||_0x1392a9;}return _0x48e8fe>0x3&&_0x1392a9&&Object[_0x5a107f(0x15b)](_0x2d524d,_0x24355f,_0x1392a9),_0x1392a9;},__metadata=this&&this[a99_0x4bcb03(0x177)]||function(_0x17f1a6,_0x48b263){const _0x261c93=a99_0x4bcb03;if(typeof Reflect===_0x261c93(0x168)&&typeof Reflect[_0x261c93(0x198)]===_0x261c93(0x196))return Reflect[_0x261c93(0x198)](_0x17f1a6,_0x48b263);},__param=this&&this[a99_0x4bcb03(0x175)]||function(_0x43423d,_0x4508a7){return function(_0xa4cc70,_0x5ca773){_0x4508a7(_0xa4cc70,_0x5ca773,_0x43423d);};};Object[a99_0x4bcb03(0x15b)](exports,a99_0x4bcb03(0x17a),{'value':!![]}),exports[a99_0x4bcb03(0x195)]=void 0x0;function a99_0x18b5(){const _0x1860f4=['getAuthParameters','__esModule','436312fTQUSS','../shared/managers/auth.manager','design:paramtypes','catch','toString','ERROR','createRequest','server','message','length','/async','84gsUSYv','getOwnPropertyDescriptor','credentials','DEPLOY','SAVE_BACKUP_ZIP','./utils/auth.utils','generateAndDeployZip','1282528BmodVE','retrieve','./services/generate-zip.service','deploy-components','Job\x20started\x20successfully','decorate','body','1238223pFtaFO','FunctionsController','function','search','metadata','fetchTestClasses','instanceUrl','apply','constructor','@flosum/salesforce','fetch-test-classes','Logger','Post','./utils/salesforce-request','design:returntype','defineProperty','652692HUnIGX','error','retrieveZip','namespace','4545366TmwHBh','prototype','AxiosInstanceUtils','Controller','deployComponents','AuthUtils','design:type','post','object','(((.+)+)+)+$','/services/apexrest','functions','./services/retrieve-zip.service','OptionType','./services/deploy-attachment.service','GET_TESTS','308129qIKDfn','param','create','generate-deploy-zip','4779835dGbGny','__param','metadataLogId','__metadata','then'];a99_0x18b5=function(){return _0x1860f4;};return a99_0x18b5();}const core_1=require('../../core'),salesforce_request_type_1=require('./types/salesforce-request.type'),retrieve_zip_service_1=require(a99_0x4bcb03(0x16c)),generate_zip_service_1=require(a99_0x4bcb03(0x18f)),fetch_test_classes_service_1=require('./services/fetch-test-classes.service'),deploy_attachment_service_1=require(a99_0x4bcb03(0x16e)),salesforce_request_1=require(a99_0x4bcb03(0x159)),auth_utils_1=require(a99_0x4bcb03(0x18b)),auth_manager_1=require(a99_0x4bcb03(0x17c)),salesforce_1=require(a99_0x4bcb03(0x19d)),logger=new core_1[(a99_0x4bcb03(0x19f))](a99_0x4bcb03(0x182));let FunctionsController=class FunctionsController{async['retrieveZip'](_0x25e46b){const _0x551768=a99_0x4bcb03,_0x390ffe=(0x0,salesforce_request_1[_0x551768(0x181)])(auth_utils_1[_0x551768(0x165)][_0x551768(0x179)](_0x25e46b[_0x551768(0x19a)]));return(0x0,retrieve_zip_service_1['retrieveZip'])(_0x25e46b,_0x390ffe)[_0x551768(0x178)](()=>{const _0x50ecbd=_0x551768;return _0x390ffe['post']('/services/apexrest'+salesforce_request_1['namespace']+_0x50ecbd(0x185),{'mdlId':_0x25e46b[_0x50ecbd(0x176)],'opType':salesforce_request_type_1[_0x50ecbd(0x16d)][_0x50ecbd(0x18a)]});})[_0x551768(0x17e)](_0x5729d1=>{const _0xb694cd=_0x551768;return _0x390ffe[_0xb694cd(0x167)](_0xb694cd(0x16a)+salesforce_request_1[_0xb694cd(0x15f)]+'/async',{'mdlId':_0x25e46b[_0xb694cd(0x176)],'opType':salesforce_request_type_1[_0xb694cd(0x16d)]['ERROR'],'message':_0x5729d1[_0xb694cd(0x183)]||_0x5729d1});})[_0x551768(0x17e)](_0x56b8e3=>logger[_0x551768(0x15d)](_0x56b8e3[_0x551768(0x183)])),{'message':'Job\x20started\x20successfully'};}async[a99_0x4bcb03(0x199)](_0x2f4ef6){const _0x4e6a45=a99_0x4bcb03,_0x11c61a=(0x0,salesforce_request_1[_0x4e6a45(0x181)])(auth_utils_1['AuthUtils'][_0x4e6a45(0x179)](_0x2f4ef6[_0x4e6a45(0x19a)]));return(0x0,fetch_test_classes_service_1[_0x4e6a45(0x199)])(_0x2f4ef6,_0x11c61a)[_0x4e6a45(0x178)](()=>{const _0x22ce96=_0x4e6a45;return _0x11c61a[_0x22ce96(0x167)](_0x22ce96(0x16a)+salesforce_request_1['namespace']+_0x22ce96(0x185),{'mdlId':_0x2f4ef6[_0x22ce96(0x176)],'opType':salesforce_request_type_1[_0x22ce96(0x16d)][_0x22ce96(0x16f)]});})[_0x4e6a45(0x17e)](_0x5810b1=>{const _0xfe268a=_0x4e6a45;return _0x11c61a['post'](_0xfe268a(0x16a)+salesforce_request_1[_0xfe268a(0x15f)]+_0xfe268a(0x185),{'mdlId':_0x2f4ef6['metadataLogId'],'opType':salesforce_request_type_1[_0xfe268a(0x16d)][_0xfe268a(0x180)],'message':_0x5810b1[_0xfe268a(0x183)]||_0x5810b1});})[_0x4e6a45(0x17e)](_0x25b3d3=>logger[_0x4e6a45(0x15d)](_0x25b3d3['message'])),{'message':_0x4e6a45(0x191)};}async[a99_0x4bcb03(0x18c)](_0x2b0ab2){const _0x1048a6=a99_0x4bcb03,_0xbf8536=(0x0,salesforce_request_1[_0x1048a6(0x181)])(auth_utils_1['AuthUtils'][_0x1048a6(0x179)](_0x2b0ab2[_0x1048a6(0x19a)])),_0xb5724e=await salesforce_1[_0x1048a6(0x162)][_0x1048a6(0x172)](new auth_manager_1['AuthManager'](_0x2b0ab2[_0x1048a6(0x188)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});return(0x0,generate_zip_service_1[_0x1048a6(0x18c)])(_0x2b0ab2,_0xbf8536,_0xb5724e)['then'](_0x3ac64e=>{const _0x1db791=_0x1048a6;return _0xbf8536[_0x1db791(0x167)](_0x1db791(0x16a)+salesforce_request_1['namespace']+'/async',{'mdlId':_0x2b0ab2[_0x1db791(0x176)],'opType':salesforce_request_type_1[_0x1db791(0x16d)]['SAVE_DEPLOY_ZIP'],'attachment':_0x3ac64e});})[_0x1048a6(0x17e)](_0x25b0ed=>{const _0x1800e8=_0x1048a6;return _0xbf8536[_0x1800e8(0x167)](_0x1800e8(0x16a)+salesforce_request_1[_0x1800e8(0x15f)]+_0x1800e8(0x185),{'mdlId':_0x2b0ab2[_0x1800e8(0x176)],'opType':salesforce_request_type_1['OptionType'][_0x1800e8(0x180)],'message':_0x25b0ed['message']||_0x25b0ed});})[_0x1048a6(0x17e)](_0x508ab8=>logger[_0x1048a6(0x15d)](_0x508ab8['message'])),{'message':_0x1048a6(0x191)};}async[a99_0x4bcb03(0x164)](_0x58c470){const _0x44d125=a99_0x4bcb03,_0x1e205f=(0x0,salesforce_request_1['createRequest'])(auth_utils_1[_0x44d125(0x165)][_0x44d125(0x179)](_0x58c470[_0x44d125(0x19a)]));return(0x0,deploy_attachment_service_1[_0x44d125(0x164)])(_0x58c470,_0x1e205f)['then'](_0x59c9e7=>{const _0x2783be=_0x44d125;return _0x1e205f[_0x2783be(0x167)](_0x2783be(0x16a)+salesforce_request_1[_0x2783be(0x15f)]+_0x2783be(0x185),{'mdlId':_0x58c470[_0x2783be(0x176)],'asyncId':_0x59c9e7,'opType':salesforce_request_type_1[_0x2783be(0x16d)][_0x2783be(0x189)]});})[_0x44d125(0x17e)](_0x5f44a6=>{const _0x3b451f=_0x44d125;return _0x1e205f[_0x3b451f(0x167)](_0x3b451f(0x16a)+salesforce_request_1[_0x3b451f(0x15f)]+'/async',{'mdlId':_0x58c470['metadataLogId'],'opType':salesforce_request_type_1[_0x3b451f(0x16d)][_0x3b451f(0x180)],'message':_0x5f44a6[_0x3b451f(0x183)]||_0x5f44a6});})[_0x44d125(0x17e)](_0x275c68=>logger[_0x44d125(0x15d)](_0x275c68[_0x44d125(0x183)])),{'message':_0x44d125(0x191)};}};__decorate([(0x0,core_1[a99_0x4bcb03(0x1a0)])(a99_0x4bcb03(0x18e)),__param(0x0,core_1[a99_0x4bcb03(0x171)][a99_0x4bcb03(0x193)]()),__metadata(a99_0x4bcb03(0x166),Function),__metadata(a99_0x4bcb03(0x17d),[Object]),__metadata('design:returntype',Promise)],FunctionsController[a99_0x4bcb03(0x161)],a99_0x4bcb03(0x15e),null),__decorate([(0x0,core_1[a99_0x4bcb03(0x1a0)])(a99_0x4bcb03(0x19e)),__param(0x0,core_1['param'][a99_0x4bcb03(0x193)]()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],FunctionsController[a99_0x4bcb03(0x161)],a99_0x4bcb03(0x199),null),__decorate([(0x0,core_1[a99_0x4bcb03(0x1a0)])(a99_0x4bcb03(0x173)),__param(0x0,core_1[a99_0x4bcb03(0x171)][a99_0x4bcb03(0x193)]()),__metadata(a99_0x4bcb03(0x166),Function),__metadata('design:paramtypes',[Object]),__metadata(a99_0x4bcb03(0x15a),Promise)],FunctionsController[a99_0x4bcb03(0x161)],'generateAndDeployZip',null),__decorate([(0x0,core_1[a99_0x4bcb03(0x1a0)])(a99_0x4bcb03(0x190)),__param(0x0,core_1['param'][a99_0x4bcb03(0x193)]()),__metadata(a99_0x4bcb03(0x166),Function),__metadata(a99_0x4bcb03(0x17d),[Object]),__metadata(a99_0x4bcb03(0x15a),Promise)],FunctionsController[a99_0x4bcb03(0x161)],'deployComponents',null),FunctionsController=__decorate([(0x0,core_1[a99_0x4bcb03(0x163)])(a99_0x4bcb03(0x16b)),(0x0,core_1['Version'])('v1')],FunctionsController),exports[a99_0x4bcb03(0x195)]=FunctionsController;