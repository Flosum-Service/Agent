const a97_0xc75060=a97_0x2100;(function(_0x2ee197,_0x295afb){const _0x3acd72=a97_0x2100,_0x5701e6=_0x2ee197();while(!![]){try{const _0x3031f1=parseInt(_0x3acd72(0xe3))/0x1+parseInt(_0x3acd72(0xc6))/0x2+-parseInt(_0x3acd72(0xf3))/0x3+parseInt(_0x3acd72(0xca))/0x4+-parseInt(_0x3acd72(0xe7))/0x5+parseInt(_0x3acd72(0xcb))/0x6*(parseInt(_0x3acd72(0xe6))/0x7)+parseInt(_0x3acd72(0xcf))/0x8*(-parseInt(_0x3acd72(0xc9))/0x9);if(_0x3031f1===_0x295afb)break;else _0x5701e6['push'](_0x5701e6['shift']());}catch(_0x32472a){_0x5701e6['push'](_0x5701e6['shift']());}}}(a97_0x4a6f,0x1be29));const a97_0x4b38d7=(function(){let _0x55570c=!![];return function(_0x47bfc5,_0x2bf978){const _0x3fe3a8=_0x55570c?function(){const _0x4c6263=a97_0x2100;if(_0x2bf978){const _0x40b9f3=_0x2bf978[_0x4c6263(0xd9)](_0x47bfc5,arguments);return _0x2bf978=null,_0x40b9f3;}}:function(){};return _0x55570c=![],_0x3fe3a8;};}()),a97_0x229ab6=a97_0x4b38d7(this,function(){const _0x192f99=a97_0x2100;return a97_0x229ab6[_0x192f99(0xce)]()['search'](_0x192f99(0xd1))['toString']()[_0x192f99(0xf2)](a97_0x229ab6)[_0x192f99(0xd6)](_0x192f99(0xd1));});function a97_0x2100(_0x400c30,_0x162b2e){const _0x518b78=a97_0x4a6f();return a97_0x2100=function(_0x229ab6,_0x4b38d7){_0x229ab6=_0x229ab6-0xb8;let _0x4a6f49=_0x518b78[_0x229ab6];return _0x4a6f49;},a97_0x2100(_0x400c30,_0x162b2e);}a97_0x229ab6();'use strict';var __importDefault=this&&this[a97_0xc75060(0xe1)]||function(_0x43d616){const _0x4ed767=a97_0xc75060;return _0x43d616&&_0x43d616[_0x4ed767(0xeb)]?_0x43d616:{'default':_0x43d616};};Object['defineProperty'](exports,a97_0xc75060(0xeb),{'value':!![]}),exports[a97_0xc75060(0xe2)]=void 0x0;const fs_internal_1=require(a97_0xc75060(0xc1)),core_1=require(a97_0xc75060(0xbf)),xml_1=require(a97_0xc75060(0xdf)),child_types_1=__importDefault(require(a97_0xc75060(0xe5))),child_types_map_1=__importDefault(require(a97_0xc75060(0xf4))),path_1=__importDefault(require('path'));class MDApiRemover{constructor(_0x11374c,_0x2aaf05){const _0x162d78=a97_0xc75060;this[_0x162d78(0xf1)]=_0x11374c,this['sourceDir']=_0x2aaf05,this[_0x162d78(0xed)]='-meta.xml',this[_0x162d78(0xe0)]=_0x162d78(0xc7),this[_0x162d78(0xc8)]=0x64,this[_0x162d78(0xc5)]=new core_1['Logger'](MDApiRemover[_0x162d78(0xb9)]),this[_0x162d78(0xba)]={};}async[a97_0xc75060(0xd7)](_0x3daea3){const _0x2c71d6=a97_0xc75060,_0x58dad3=path_1[_0x2c71d6(0xcc)]['join'](this[_0x2c71d6(0xbe)],_0x3daea3[_0x2c71d6(0xe9)]),_0x4e9858=path_1[_0x2c71d6(0xcc)]['join'](this[_0x2c71d6(0xbe)],''+_0x3daea3[_0x2c71d6(0xe9)]+this[_0x2c71d6(0xed)]);this[_0x2c71d6(0xba)][_0x3daea3[_0x2c71d6(0xe9)]]&&delete this[_0x2c71d6(0xba)][_0x3daea3['path']];const _0x32b36c=await fs_internal_1['FS'][_0x2c71d6(0xd5)](_0x58dad3)[_0x2c71d6(0xdb)](()=>![]);if(_0x32b36c){this[_0x2c71d6(0xc5)][_0x2c71d6(0xe8)]('remove\x20component\x20directory\x20%s\x20[%s]',_0x58dad3,_0x3daea3[_0x2c71d6(0xd4)]),await fs_internal_1['FS'][_0x2c71d6(0xec)](_0x58dad3);_0x3daea3['type']==='ExperienceBundle'?await fs_internal_1['FS'][_0x2c71d6(0xc4)](''+_0x58dad3+this[_0x2c71d6(0xe0)])[_0x2c71d6(0xdb)](()=>void 0x0):(this[_0x2c71d6(0xc5)][_0x2c71d6(0xe8)](_0x2c71d6(0xf5),_0x58dad3,_0x3daea3[_0x2c71d6(0xd4)]),await fs_internal_1['FS']['removeFile'](''+_0x58dad3+this[_0x2c71d6(0xed)])['catch'](()=>void 0x0));return;}this['logger'][_0x2c71d6(0xe8)](_0x2c71d6(0xef),_0x58dad3,_0x3daea3[_0x2c71d6(0xd4)]),await Promise[_0x2c71d6(0xd8)]([fs_internal_1['FS'][_0x2c71d6(0xc4)](_0x58dad3),fs_internal_1['FS']['removeFile'](_0x4e9858)]);}async['removeChild'](_0x597865){const _0x2b9f3b=a97_0xc75060,{fileName:_0x16b001,type:_0x143ca3,path:_0x1778f2}=_0x597865,_0x53f53f=child_types_map_1[_0x2b9f3b(0xcc)][_0x143ca3];if(!_0x53f53f)throw new Error(_0x2b9f3b(0xbc)+_0x143ca3);if(!this[_0x2b9f3b(0xba)][_0x1778f2]){const _0x4d027e=path_1['default'][_0x2b9f3b(0xee)](this[_0x2b9f3b(0xbe)],_0x1778f2),_0x3af29d=await fs_internal_1['FS'][_0x2b9f3b(0xd0)](_0x4d027e);if(!_0x3af29d)return;const _0x3ec4aa=await fs_internal_1['FS'][_0x2b9f3b(0xc0)](_0x4d027e);this[_0x2b9f3b(0xba)][_0x1778f2]=await xml_1[_0x2b9f3b(0xdd)]['parse'](_0x3ec4aa);}const _0x32e5be=this[_0x2b9f3b(0xba)][_0x1778f2],_0x49b94d=_0x16b001['split']('.')[_0x2b9f3b(0xd3)]();xml_1[_0x2b9f3b(0xdd)][_0x2b9f3b(0xf0)](_0x32e5be,_0x53f53f,_0x49b94d||_0x16b001),xml_1[_0x2b9f3b(0xdd)][_0x2b9f3b(0xc3)](_0x32e5be)?(this['logger'][_0x2b9f3b(0xe8)](_0x2b9f3b(0xea),_0x597865[_0x2b9f3b(0xe9)],_0x597865[_0x2b9f3b(0xbb)]),await this[_0x2b9f3b(0xd7)](_0x597865),delete this[_0x2b9f3b(0xba)][_0x1778f2]):this[_0x2b9f3b(0xba)][_0x1778f2]=_0x32e5be;}async[a97_0xc75060(0xdc)](){const _0x57b1a9=a97_0xc75060;!await fs_internal_1['FS'][_0x57b1a9(0xd0)](this[_0x57b1a9(0xbe)])&&await fs_internal_1['FS'][_0x57b1a9(0xbd)](this[_0x57b1a9(0xbe)]);for(const _0x1ef59e of this[_0x57b1a9(0xf1)]){!child_types_1['default'][_0x57b1a9(0xd2)](_0x1ef59e[_0x57b1a9(0xd4)])?(this['logger'][_0x57b1a9(0xe8)]('remove\x20parent\x20component\x20%s\x20[%s]',_0x1ef59e['fileName'],_0x1ef59e[_0x57b1a9(0xd4)]),await this['removeParent'](_0x1ef59e)):(this[_0x57b1a9(0xc5)][_0x57b1a9(0xe8)](_0x57b1a9(0xc2),_0x1ef59e[_0x57b1a9(0xbb)],_0x1ef59e[_0x57b1a9(0xd4)]),await this['removeChild'](_0x1ef59e));}const _0x20a0f9=Object[_0x57b1a9(0xb8)](this[_0x57b1a9(0xba)]);this[_0x57b1a9(0xc5)][_0x57b1a9(0xe8)](_0x57b1a9(0xcd),this[_0x57b1a9(0xf1)][_0x57b1a9(0xe4)]);while(_0x20a0f9['length']){const _0x5e34fa=_0x20a0f9[_0x57b1a9(0xde)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x439f43 of _0x5e34fa){await fs_internal_1['FS']['writeFile'](path_1[_0x57b1a9(0xcc)][_0x57b1a9(0xee)](this['sourceDir'],_0x439f43),xml_1[_0x57b1a9(0xdd)][_0x57b1a9(0xda)](this['parentComponents'][_0x439f43]));}}this[_0x57b1a9(0xba)]={};}}function a97_0x4a6f(){const _0x4c153a=['readFile','../../internal/fs.internal','remove\x20child\x20component\x20%s\x20[%s]','isEmptyXml','removeFile','logger','278240WobSwp','site-meta.xml','MAX_WRITES_PER_TICK','4023nQkKmm','412744zwCAoS','90ePOFlf','default','have\x20to\x20update\x20%d\x20files','toString','5008AzIPBA','exists','(((.+)+)+)+$','includes','pop','type','isDir','search','removeParent','all','apply','convertToString','catch','start','Xml','splice','../utils/xml','META_EXPERIENCE_BUNDLE','__importDefault','MDApiRemover','172104xpEThZ','length','../data/child-types','37667zDxsPK','492095kZgcrh','log','path','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','__esModule','removeDir','META_EXTENSION','join','remove\x20component\x20\x20%s\x20[%s]','removeAt','components','constructor','8001cTEXqe','../data/child-types-map','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','keys','name','parentComponents','fileName','Unknown\x20child\x20type\x20','makeDir','sourceDir','../../../core'];a97_0x4a6f=function(){return _0x4c153a;};return a97_0x4a6f();}exports[a97_0xc75060(0xe2)]=MDApiRemover;