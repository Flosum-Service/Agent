const a97_0x2bae01=a97_0x4114;(function(_0xd0fa10,_0x592731){const _0x14feb1=a97_0x4114,_0x128334=_0xd0fa10();while(!![]){try{const _0x126302=parseInt(_0x14feb1(0xd0))/0x1+parseInt(_0x14feb1(0xf1))/0x2*(-parseInt(_0x14feb1(0xf8))/0x3)+-parseInt(_0x14feb1(0xce))/0x4*(-parseInt(_0x14feb1(0xe3))/0x5)+-parseInt(_0x14feb1(0xca))/0x6*(-parseInt(_0x14feb1(0xc7))/0x7)+parseInt(_0x14feb1(0xf3))/0x8+-parseInt(_0x14feb1(0xcc))/0x9*(parseInt(_0x14feb1(0xf6))/0xa)+-parseInt(_0x14feb1(0xcb))/0xb;if(_0x126302===_0x592731)break;else _0x128334['push'](_0x128334['shift']());}catch(_0x1af3ae){_0x128334['push'](_0x128334['shift']());}}}(a97_0x18a8,0x92be9));const a97_0x43506a=(function(){let _0x2d734f=!![];return function(_0x22a38,_0x104838){const _0x5a9383=_0x2d734f?function(){const _0x358a3c=a97_0x4114;if(_0x104838){const _0x3b88e0=_0x104838[_0x358a3c(0xea)](_0x22a38,arguments);return _0x104838=null,_0x3b88e0;}}:function(){};return _0x2d734f=![],_0x5a9383;};}()),a97_0x553a3b=a97_0x43506a(this,function(){const _0x494694=a97_0x4114;return a97_0x553a3b[_0x494694(0xdf)]()[_0x494694(0xc5)](_0x494694(0xf0))[_0x494694(0xdf)]()[_0x494694(0xd6)](a97_0x553a3b)[_0x494694(0xc5)](_0x494694(0xf0));});function a97_0x18a8(){const _0x2efb0e=['removeDir','__importDefault','toString','split','isEmptyXml','META_EXPERIENCE_BUNDLE','1375WlEHaG','catch','remove\x20child\x20component\x20%s\x20[%s]','MAX_WRITES_PER_TICK','Logger','removeAt','splice','apply','META_EXTENSION','removeParent','remove\x20component\x20directory\x20%s\x20[%s]','ExperienceBundle','Xml','(((.+)+)+)+$','170MADikI','components','3189672laADKw','../utils/xml','fileName','40YFNIVm','remove\x20component\x20\x20%s\x20[%s]','30438suMInh','defineProperty','removeChild','type','isDir','../../internal/fs.internal','sourceDir','keys','__esModule','join','search','length','1719907yxAgvC','all','default','24tVfswW','12418373JvYhjq','509400vIIJOF','logger','14764oUEmyo','site-meta.xml','422280nBeZyH','MDApiRemover','parentComponents','removeFile','exists','path','constructor','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','log','includes','../../../core','writeFile','pop'];a97_0x18a8=function(){return _0x2efb0e;};return a97_0x18a8();}a97_0x553a3b();'use strict';var __importDefault=this&&this[a97_0x2bae01(0xde)]||function(_0x31dc73){const _0x577d19=a97_0x2bae01;return _0x31dc73&&_0x31dc73[_0x577d19(0x100)]?_0x31dc73:{'default':_0x31dc73};};Object[a97_0x2bae01(0xf9)](exports,a97_0x2bae01(0x100),{'value':!![]}),exports[a97_0x2bae01(0xd1)]=void 0x0;const fs_internal_1=require(a97_0x2bae01(0xfd)),core_1=require(a97_0x2bae01(0xda)),xml_1=require(a97_0x2bae01(0xf4)),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require(a97_0x2bae01(0xd5)));function a97_0x4114(_0x3dbb27,_0x241666){const _0x351853=a97_0x18a8();return a97_0x4114=function(_0x553a3b,_0x43506a){_0x553a3b=_0x553a3b-0xc4;let _0x18a842=_0x351853[_0x553a3b];return _0x18a842;},a97_0x4114(_0x3dbb27,_0x241666);}class MDApiRemover{constructor(_0x394fe1,_0x25cdfe){const _0x55ae55=a97_0x2bae01;this[_0x55ae55(0xf2)]=_0x394fe1,this[_0x55ae55(0xfe)]=_0x25cdfe,this[_0x55ae55(0xeb)]='-meta.xml',this[_0x55ae55(0xe2)]=_0x55ae55(0xcf),this['MAX_WRITES_PER_TICK']=0x64,this[_0x55ae55(0xcd)]=new core_1[(_0x55ae55(0xe7))](MDApiRemover['name']),this[_0x55ae55(0xd2)]={};}async[a97_0x2bae01(0xec)](_0x3af264){const _0x21ef9e=a97_0x2bae01,_0xd2a86d=path_1['default']['join'](this[_0x21ef9e(0xfe)],_0x3af264[_0x21ef9e(0xd5)]),_0x41f1ee=path_1[_0x21ef9e(0xc9)][_0x21ef9e(0xc4)](this[_0x21ef9e(0xfe)],''+_0x3af264[_0x21ef9e(0xd5)]+this[_0x21ef9e(0xeb)]);this[_0x21ef9e(0xd2)][_0x3af264[_0x21ef9e(0xd5)]]&&delete this[_0x21ef9e(0xd2)][_0x3af264[_0x21ef9e(0xd5)]];const _0x1c3567=await fs_internal_1['FS'][_0x21ef9e(0xfc)](_0xd2a86d)[_0x21ef9e(0xe4)](()=>![]);if(_0x1c3567){this[_0x21ef9e(0xcd)]['log'](_0x21ef9e(0xed),_0xd2a86d,_0x3af264['type']),await fs_internal_1['FS'][_0x21ef9e(0xdd)](_0xd2a86d);_0x3af264[_0x21ef9e(0xfb)]===_0x21ef9e(0xee)?await fs_internal_1['FS'][_0x21ef9e(0xd3)](''+_0xd2a86d+this[_0x21ef9e(0xe2)])['catch'](()=>void 0x0):(this['logger'][_0x21ef9e(0xd8)](_0x21ef9e(0xd7),_0xd2a86d,_0x3af264[_0x21ef9e(0xfb)]),await fs_internal_1['FS'][_0x21ef9e(0xd3)](''+_0xd2a86d+this[_0x21ef9e(0xeb)])[_0x21ef9e(0xe4)](()=>void 0x0));return;}this[_0x21ef9e(0xcd)][_0x21ef9e(0xd8)](_0x21ef9e(0xf7),_0xd2a86d,_0x3af264[_0x21ef9e(0xfb)]),await Promise[_0x21ef9e(0xc8)]([fs_internal_1['FS'][_0x21ef9e(0xd3)](_0xd2a86d),fs_internal_1['FS'][_0x21ef9e(0xd3)](_0x41f1ee)]);}async[a97_0x2bae01(0xfa)](_0x1a286c){const _0x110b72=a97_0x2bae01,{fileName:_0x108ece,type:_0x41746e,path:_0x12d529}=_0x1a286c,_0x5e3a4f=child_types_map_1[_0x110b72(0xc9)][_0x41746e];if(!_0x5e3a4f)throw new Error('Unknown\x20child\x20type\x20'+_0x41746e);if(!this[_0x110b72(0xd2)][_0x12d529]){const _0x536aa4=path_1[_0x110b72(0xc9)][_0x110b72(0xc4)](this[_0x110b72(0xfe)],_0x12d529),_0xfae946=await fs_internal_1['FS'][_0x110b72(0xd4)](_0x536aa4);if(!_0xfae946)return;const _0x2a8478=await fs_internal_1['FS']['readFile'](_0x536aa4);this[_0x110b72(0xd2)][_0x12d529]=await xml_1[_0x110b72(0xef)]['parse'](_0x2a8478);}const _0x3a3b03=this[_0x110b72(0xd2)][_0x12d529],_0x558004=_0x108ece[_0x110b72(0xe0)]('.')[_0x110b72(0xdc)]();xml_1[_0x110b72(0xef)][_0x110b72(0xe8)](_0x3a3b03,_0x5e3a4f,_0x558004||_0x108ece),xml_1[_0x110b72(0xef)][_0x110b72(0xe1)](_0x3a3b03)?(this[_0x110b72(0xcd)]['log']('remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x1a286c[_0x110b72(0xd5)],_0x1a286c[_0x110b72(0xf5)]),await this['removeParent'](_0x1a286c),delete this[_0x110b72(0xd2)][_0x12d529]):this[_0x110b72(0xd2)][_0x12d529]=_0x3a3b03;}async['start'](){const _0x303e3c=a97_0x2bae01;!await fs_internal_1['FS'][_0x303e3c(0xd4)](this['sourceDir'])&&await fs_internal_1['FS']['makeDir'](this['sourceDir']);for(const _0x57d2dd of this[_0x303e3c(0xf2)]){!child_types_1[_0x303e3c(0xc9)][_0x303e3c(0xd9)](_0x57d2dd[_0x303e3c(0xfb)])?(this[_0x303e3c(0xcd)][_0x303e3c(0xd8)]('remove\x20parent\x20component\x20%s\x20[%s]',_0x57d2dd[_0x303e3c(0xf5)],_0x57d2dd[_0x303e3c(0xfb)]),await this['removeParent'](_0x57d2dd)):(this[_0x303e3c(0xcd)]['log'](_0x303e3c(0xe5),_0x57d2dd[_0x303e3c(0xf5)],_0x57d2dd['type']),await this[_0x303e3c(0xfa)](_0x57d2dd));}const _0x214a16=Object[_0x303e3c(0xff)](this[_0x303e3c(0xd2)]);this[_0x303e3c(0xcd)][_0x303e3c(0xd8)]('have\x20to\x20update\x20%d\x20files',this[_0x303e3c(0xf2)][_0x303e3c(0xc6)]);while(_0x214a16[_0x303e3c(0xc6)]){const _0x5b5887=_0x214a16[_0x303e3c(0xe9)](0x0,this[_0x303e3c(0xe6)]);for(const _0x311390 of _0x5b5887){await fs_internal_1['FS'][_0x303e3c(0xdb)](path_1[_0x303e3c(0xc9)]['join'](this[_0x303e3c(0xfe)],_0x311390),xml_1[_0x303e3c(0xef)]['convertToString'](this['parentComponents'][_0x311390]));}}this[_0x303e3c(0xd2)]={};}}exports['MDApiRemover']=MDApiRemover;