function a97_0x2538(){const _0x4aece9=['length','../data/child-types-map','log','785vFwGeA','Unknown\x20child\x20type\x20','-meta.xml','META_EXTENSION','exists','parentComponents','48euHQuK','3530zrXOzh','__esModule','join','default','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','../../internal/fs.internal','includes','toString','9wZjiTh','(((.+)+)+)+$','removeParent','../data/child-types','844fdxGVr','Logger','Xml','4138424CTRpET','META_EXPERIENCE_BUNDLE','site-meta.xml','sourceDir','13782uFBjNP','../../../core','isEmptyXml','remove\x20component\x20directory\x20%s\x20[%s]','pop','ExperienceBundle','makeDir','parse','split','removeAt','search','__importDefault','removeChild','logger','path','MAX_WRITES_PER_TICK','components','have\x20to\x20update\x20%d\x20files','catch','20kzHttq','splice','676263yeHJDi','fileName','readFile','4809UdyoWi','64002oaMCFP','type','writeFile','remove\x20parent\x20component\x20%s\x20[%s]','8349cKcoCx','MDApiRemover','removeFile','isDir','convertToString','removeDir','1131052yhpVja','all'];a97_0x2538=function(){return _0x4aece9;};return a97_0x2538();}function a97_0x1543(_0x51c501,_0x20a038){const _0x165f70=a97_0x2538();return a97_0x1543=function(_0x339373,_0x2c3a42){_0x339373=_0x339373-0x108;let _0x2538cc=_0x165f70[_0x339373];return _0x2538cc;},a97_0x1543(_0x51c501,_0x20a038);}const a97_0x5e8a64=a97_0x1543;(function(_0x3f046b,_0x2fef76){const _0x4dad6c=a97_0x1543,_0x168c94=_0x3f046b();while(!![]){try{const _0x5f5a7c=-parseInt(_0x4dad6c(0x11c))/0x1*(-parseInt(_0x4dad6c(0x116))/0x2)+-parseInt(_0x4dad6c(0x11b))/0x3*(parseInt(_0x4dad6c(0x13e))/0x4)+parseInt(_0x4dad6c(0x12b))/0x5*(parseInt(_0x4dad6c(0x145))/0x6)+parseInt(_0x4dad6c(0x118))/0x7+parseInt(_0x4dad6c(0x141))/0x8*(-parseInt(_0x4dad6c(0x13a))/0x9)+-parseInt(_0x4dad6c(0x132))/0xa*(parseInt(_0x4dad6c(0x120))/0xb)+parseInt(_0x4dad6c(0x131))/0xc*(parseInt(_0x4dad6c(0x126))/0xd);if(_0x5f5a7c===_0x2fef76)break;else _0x168c94['push'](_0x168c94['shift']());}catch(_0x12e2bc){_0x168c94['push'](_0x168c94['shift']());}}}(a97_0x2538,0x4e913));const a97_0x2c3a42=(function(){let _0x13185d=!![];return function(_0xb139ca,_0x18794c){const _0x57a234=_0x13185d?function(){if(_0x18794c){const _0xbee21=_0x18794c['apply'](_0xb139ca,arguments);return _0x18794c=null,_0xbee21;}}:function(){};return _0x13185d=![],_0x57a234;};}()),a97_0x339373=a97_0x2c3a42(this,function(){const _0x1619c6=a97_0x1543;return a97_0x339373[_0x1619c6(0x139)]()[_0x1619c6(0x10d)](_0x1619c6(0x13b))[_0x1619c6(0x139)]()['constructor'](a97_0x339373)[_0x1619c6(0x10d)](_0x1619c6(0x13b));});a97_0x339373();'use strict';var __importDefault=this&&this[a97_0x5e8a64(0x10e)]||function(_0x364c30){return _0x364c30&&_0x364c30['__esModule']?_0x364c30:{'default':_0x364c30};};Object['defineProperty'](exports,a97_0x5e8a64(0x133),{'value':!![]}),exports[a97_0x5e8a64(0x121)]=void 0x0;const fs_internal_1=require(a97_0x5e8a64(0x137)),core_1=require(a97_0x5e8a64(0x146)),xml_1=require('../utils/xml'),child_types_1=__importDefault(require(a97_0x5e8a64(0x13d))),child_types_map_1=__importDefault(require(a97_0x5e8a64(0x129))),path_1=__importDefault(require(a97_0x5e8a64(0x111)));class MDApiRemover{constructor(_0x42244c,_0x301b68){const _0x5b5311=a97_0x5e8a64;this['components']=_0x42244c,this[_0x5b5311(0x144)]=_0x301b68,this['META_EXTENSION']=_0x5b5311(0x12d),this[_0x5b5311(0x142)]=_0x5b5311(0x143),this[_0x5b5311(0x112)]=0x64,this['logger']=new core_1[(_0x5b5311(0x13f))](MDApiRemover['name']),this[_0x5b5311(0x130)]={};}async['removeParent'](_0x193b57){const _0x53ca0b=a97_0x5e8a64,_0x1b8a73=path_1[_0x53ca0b(0x135)][_0x53ca0b(0x134)](this[_0x53ca0b(0x144)],_0x193b57[_0x53ca0b(0x111)]),_0x3a0b05=path_1[_0x53ca0b(0x135)][_0x53ca0b(0x134)](this[_0x53ca0b(0x144)],''+_0x193b57[_0x53ca0b(0x111)]+this['META_EXTENSION']);this[_0x53ca0b(0x130)][_0x193b57[_0x53ca0b(0x111)]]&&delete this['parentComponents'][_0x193b57[_0x53ca0b(0x111)]];const _0x34fced=await fs_internal_1['FS'][_0x53ca0b(0x123)](_0x1b8a73)[_0x53ca0b(0x115)](()=>![]);if(_0x34fced){this[_0x53ca0b(0x110)][_0x53ca0b(0x12a)](_0x53ca0b(0x148),_0x1b8a73,_0x193b57[_0x53ca0b(0x11d)]),await fs_internal_1['FS'][_0x53ca0b(0x125)](_0x1b8a73);_0x193b57[_0x53ca0b(0x11d)]===_0x53ca0b(0x108)?await fs_internal_1['FS']['removeFile'](''+_0x1b8a73+this['META_EXPERIENCE_BUNDLE'])[_0x53ca0b(0x115)](()=>void 0x0):(this[_0x53ca0b(0x110)]['log']('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x1b8a73,_0x193b57['type']),await fs_internal_1['FS'][_0x53ca0b(0x122)](''+_0x1b8a73+this[_0x53ca0b(0x12e)])[_0x53ca0b(0x115)](()=>void 0x0));return;}this[_0x53ca0b(0x110)]['log']('remove\x20component\x20\x20%s\x20[%s]',_0x1b8a73,_0x193b57['type']),await Promise[_0x53ca0b(0x127)]([fs_internal_1['FS'][_0x53ca0b(0x122)](_0x1b8a73),fs_internal_1['FS'][_0x53ca0b(0x122)](_0x3a0b05)]);}async[a97_0x5e8a64(0x10f)](_0x52724c){const _0x1a787d=a97_0x5e8a64,{fileName:_0x5b407d,type:_0xb8911,path:_0xc6da0}=_0x52724c,_0x2e3f10=child_types_map_1[_0x1a787d(0x135)][_0xb8911];if(!_0x2e3f10)throw new Error(_0x1a787d(0x12c)+_0xb8911);if(!this[_0x1a787d(0x130)][_0xc6da0]){const _0x58271e=path_1[_0x1a787d(0x135)][_0x1a787d(0x134)](this[_0x1a787d(0x144)],_0xc6da0),_0xd707cd=await fs_internal_1['FS']['exists'](_0x58271e);if(!_0xd707cd)return;const _0xa44eb3=await fs_internal_1['FS'][_0x1a787d(0x11a)](_0x58271e);this[_0x1a787d(0x130)][_0xc6da0]=await xml_1[_0x1a787d(0x140)][_0x1a787d(0x10a)](_0xa44eb3);}const _0x3ff9e3=this[_0x1a787d(0x130)][_0xc6da0],_0x15d564=_0x5b407d[_0x1a787d(0x10b)]('.')[_0x1a787d(0x149)]();xml_1[_0x1a787d(0x140)][_0x1a787d(0x10c)](_0x3ff9e3,_0x2e3f10,_0x15d564||_0x5b407d),xml_1[_0x1a787d(0x140)][_0x1a787d(0x147)](_0x3ff9e3)?(this['logger'][_0x1a787d(0x12a)](_0x1a787d(0x136),_0x52724c['path'],_0x52724c[_0x1a787d(0x119)]),await this[_0x1a787d(0x13c)](_0x52724c),delete this[_0x1a787d(0x130)][_0xc6da0]):this[_0x1a787d(0x130)][_0xc6da0]=_0x3ff9e3;}async['start'](){const _0x347a49=a97_0x5e8a64;!await fs_internal_1['FS'][_0x347a49(0x12f)](this[_0x347a49(0x144)])&&await fs_internal_1['FS'][_0x347a49(0x109)](this[_0x347a49(0x144)]);for(const _0xb598f8 of this[_0x347a49(0x113)]){!child_types_1['default'][_0x347a49(0x138)](_0xb598f8[_0x347a49(0x11d)])?(this[_0x347a49(0x110)][_0x347a49(0x12a)](_0x347a49(0x11f),_0xb598f8['fileName'],_0xb598f8[_0x347a49(0x11d)]),await this['removeParent'](_0xb598f8)):(this['logger']['log']('remove\x20child\x20component\x20%s\x20[%s]',_0xb598f8[_0x347a49(0x119)],_0xb598f8[_0x347a49(0x11d)]),await this[_0x347a49(0x10f)](_0xb598f8));}const _0x132152=Object['keys'](this[_0x347a49(0x130)]);this[_0x347a49(0x110)]['log'](_0x347a49(0x114),this[_0x347a49(0x113)]['length']);while(_0x132152[_0x347a49(0x128)]){const _0x4c45c6=_0x132152[_0x347a49(0x117)](0x0,this[_0x347a49(0x112)]);for(const _0x23d5af of _0x4c45c6){await fs_internal_1['FS'][_0x347a49(0x11e)](path_1[_0x347a49(0x135)][_0x347a49(0x134)](this[_0x347a49(0x144)],_0x23d5af),xml_1['Xml'][_0x347a49(0x124)](this[_0x347a49(0x130)][_0x23d5af]));}}this['parentComponents']={};}}exports[a97_0x5e8a64(0x121)]=MDApiRemover;