const a97_0x120bf4=a97_0x514d;(function(_0x5f4215,_0x15dba7){const _0x101366=a97_0x514d,_0x384467=_0x5f4215();while(!![]){try{const _0x53c153=parseInt(_0x101366(0xaa))/0x1+-parseInt(_0x101366(0xb7))/0x2*(-parseInt(_0x101366(0x8f))/0x3)+parseInt(_0x101366(0x86))/0x4*(parseInt(_0x101366(0xa6))/0x5)+parseInt(_0x101366(0xb6))/0x6+-parseInt(_0x101366(0x9b))/0x7+-parseInt(_0x101366(0x9d))/0x8*(-parseInt(_0x101366(0xac))/0x9)+parseInt(_0x101366(0x90))/0xa*(-parseInt(_0x101366(0xb4))/0xb);if(_0x53c153===_0x15dba7)break;else _0x384467['push'](_0x384467['shift']());}catch(_0x1edd87){_0x384467['push'](_0x384467['shift']());}}}(a97_0x53d9,0x2c3dd));const a97_0xeccfa5=(function(){let _0x6c7ea6=!![];return function(_0x535994,_0x425291){const _0x5069e0=_0x6c7ea6?function(){const _0x4f6094=a97_0x514d;if(_0x425291){const _0x39f4e2=_0x425291[_0x4f6094(0x87)](_0x535994,arguments);return _0x425291=null,_0x39f4e2;}}:function(){};return _0x6c7ea6=![],_0x5069e0;};}()),a97_0x53ddd3=a97_0xeccfa5(this,function(){const _0x2fc5c6=a97_0x514d;return a97_0x53ddd3[_0x2fc5c6(0xb2)]()[_0x2fc5c6(0xa9)](_0x2fc5c6(0x9c))[_0x2fc5c6(0xb2)]()[_0x2fc5c6(0xbd)](a97_0x53ddd3)[_0x2fc5c6(0xa9)](_0x2fc5c6(0x9c));});a97_0x53ddd3();function a97_0x514d(_0x587742,_0xd90fc2){const _0x58daf3=a97_0x53d9();return a97_0x514d=function(_0x53ddd3,_0xeccfa5){_0x53ddd3=_0x53ddd3-0x86;let _0x53d998=_0x58daf3[_0x53ddd3];return _0x53d998;},a97_0x514d(_0x587742,_0xd90fc2);}function a97_0x53d9(){const _0x3b7e55=['removeFile','../../../core','catch','Xml','exists','removeChild','META_EXPERIENCE_BUNDLE','Logger','466564cMAqOb','(((.+)+)+)+$','296mPgtXN','type','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','Unknown\x20child\x20type\x20','__importDefault','isEmptyXml','../utils/xml','path','convertToString','809035mHZozB','fileName','remove\x20parent\x20component\x20%s\x20[%s]','search','52408wwpfLC','sourceDir','78957amDJMx','META_EXTENSION','have\x20to\x20update\x20%d\x20files','logger','MDApiRemover','makeDir','toString','join','11tfwfAn','name','490674OnuTvD','40PwqKFL','splice','MAX_WRITES_PER_TICK','parentComponents','all','-meta.xml','constructor','start','removeDir','isDir','length','../data/child-types-map','writeFile','readFile','8BYHaWM','apply','pop','__esModule','split','removeParent','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','components','ExperienceBundle','36732zPbZGF','7794170AdvBpG','default','log'];a97_0x53d9=function(){return _0x3b7e55;};return a97_0x53d9();}'use strict';var __importDefault=this&&this[a97_0x120bf4(0xa1)]||function(_0x45efe0){const _0x14783a=a97_0x120bf4;return _0x45efe0&&_0x45efe0[_0x14783a(0x89)]?_0x45efe0:{'default':_0x45efe0};};Object['defineProperty'](exports,a97_0x120bf4(0x89),{'value':!![]}),exports[a97_0x120bf4(0xb0)]=void 0x0;const fs_internal_1=require('../../internal/fs.internal'),core_1=require(a97_0x120bf4(0x94)),xml_1=require(a97_0x120bf4(0xa3)),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require(a97_0x120bf4(0xc2))),path_1=__importDefault(require(a97_0x120bf4(0xa4)));class MDApiRemover{constructor(_0x3a55b0,_0x576683){const _0x242878=a97_0x120bf4;this[_0x242878(0x8d)]=_0x3a55b0,this[_0x242878(0xab)]=_0x576683,this['META_EXTENSION']=_0x242878(0xbc),this['META_EXPERIENCE_BUNDLE']='site-meta.xml',this['MAX_WRITES_PER_TICK']=0x64,this[_0x242878(0xaf)]=new core_1[(_0x242878(0x9a))](MDApiRemover[_0x242878(0xb5)]),this[_0x242878(0xba)]={};}async[a97_0x120bf4(0x8b)](_0x5c6d80){const _0x203b5e=a97_0x120bf4,_0x2d130b=path_1['default'][_0x203b5e(0xb3)](this[_0x203b5e(0xab)],_0x5c6d80['path']),_0x225c80=path_1[_0x203b5e(0x91)][_0x203b5e(0xb3)](this[_0x203b5e(0xab)],''+_0x5c6d80[_0x203b5e(0xa4)]+this[_0x203b5e(0xad)]);this['parentComponents'][_0x5c6d80[_0x203b5e(0xa4)]]&&delete this[_0x203b5e(0xba)][_0x5c6d80[_0x203b5e(0xa4)]];const _0x302849=await fs_internal_1['FS'][_0x203b5e(0xc0)](_0x2d130b)[_0x203b5e(0x95)](()=>![]);if(_0x302849){this[_0x203b5e(0xaf)][_0x203b5e(0x92)]('remove\x20component\x20directory\x20%s\x20[%s]',_0x2d130b,_0x5c6d80[_0x203b5e(0x9e)]),await fs_internal_1['FS'][_0x203b5e(0xbf)](_0x2d130b);_0x5c6d80[_0x203b5e(0x9e)]===_0x203b5e(0x8e)?await fs_internal_1['FS'][_0x203b5e(0x93)](''+_0x2d130b+this[_0x203b5e(0x99)])[_0x203b5e(0x95)](()=>void 0x0):(this[_0x203b5e(0xaf)][_0x203b5e(0x92)](_0x203b5e(0x8c),_0x2d130b,_0x5c6d80[_0x203b5e(0x9e)]),await fs_internal_1['FS'][_0x203b5e(0x93)](''+_0x2d130b+this[_0x203b5e(0xad)])[_0x203b5e(0x95)](()=>void 0x0));return;}this[_0x203b5e(0xaf)][_0x203b5e(0x92)]('remove\x20component\x20\x20%s\x20[%s]',_0x2d130b,_0x5c6d80[_0x203b5e(0x9e)]),await Promise[_0x203b5e(0xbb)]([fs_internal_1['FS'][_0x203b5e(0x93)](_0x2d130b),fs_internal_1['FS']['removeFile'](_0x225c80)]);}async[a97_0x120bf4(0x98)](_0x4a725c){const _0x4b7d0a=a97_0x120bf4,{fileName:_0x191251,type:_0x46dd0b,path:_0x34e75c}=_0x4a725c,_0x46704a=child_types_map_1[_0x4b7d0a(0x91)][_0x46dd0b];if(!_0x46704a)throw new Error(_0x4b7d0a(0xa0)+_0x46dd0b);if(!this[_0x4b7d0a(0xba)][_0x34e75c]){const _0x33d535=path_1[_0x4b7d0a(0x91)]['join'](this['sourceDir'],_0x34e75c),_0x43da4d=await fs_internal_1['FS'][_0x4b7d0a(0x97)](_0x33d535);if(!_0x43da4d)return;const _0x1307e2=await fs_internal_1['FS'][_0x4b7d0a(0xc4)](_0x33d535);this[_0x4b7d0a(0xba)][_0x34e75c]=await xml_1[_0x4b7d0a(0x96)]['parse'](_0x1307e2);}const _0x50767b=this[_0x4b7d0a(0xba)][_0x34e75c],_0x48a1d7=_0x191251[_0x4b7d0a(0x8a)]('.')[_0x4b7d0a(0x88)]();xml_1[_0x4b7d0a(0x96)]['removeAt'](_0x50767b,_0x46704a,_0x48a1d7||_0x191251),xml_1['Xml'][_0x4b7d0a(0xa2)](_0x50767b)?(this[_0x4b7d0a(0xaf)][_0x4b7d0a(0x92)](_0x4b7d0a(0x9f),_0x4a725c[_0x4b7d0a(0xa4)],_0x4a725c['fileName']),await this[_0x4b7d0a(0x8b)](_0x4a725c),delete this[_0x4b7d0a(0xba)][_0x34e75c]):this['parentComponents'][_0x34e75c]=_0x50767b;}async[a97_0x120bf4(0xbe)](){const _0x98b892=a97_0x120bf4;!await fs_internal_1['FS']['exists'](this[_0x98b892(0xab)])&&await fs_internal_1['FS'][_0x98b892(0xb1)](this[_0x98b892(0xab)]);for(const _0x367351 of this[_0x98b892(0x8d)]){!child_types_1[_0x98b892(0x91)]['includes'](_0x367351[_0x98b892(0x9e)])?(this[_0x98b892(0xaf)][_0x98b892(0x92)](_0x98b892(0xa8),_0x367351[_0x98b892(0xa7)],_0x367351['type']),await this[_0x98b892(0x8b)](_0x367351)):(this['logger'][_0x98b892(0x92)]('remove\x20child\x20component\x20%s\x20[%s]',_0x367351[_0x98b892(0xa7)],_0x367351[_0x98b892(0x9e)]),await this[_0x98b892(0x98)](_0x367351));}const _0xc1d00=Object['keys'](this['parentComponents']);this[_0x98b892(0xaf)][_0x98b892(0x92)](_0x98b892(0xae),this[_0x98b892(0x8d)][_0x98b892(0xc1)]);while(_0xc1d00[_0x98b892(0xc1)]){const _0x351b93=_0xc1d00[_0x98b892(0xb8)](0x0,this[_0x98b892(0xb9)]);for(const _0x30b94c of _0x351b93){await fs_internal_1['FS'][_0x98b892(0xc3)](path_1[_0x98b892(0x91)][_0x98b892(0xb3)](this[_0x98b892(0xab)],_0x30b94c),xml_1['Xml'][_0x98b892(0xa5)](this[_0x98b892(0xba)][_0x30b94c]));}}this[_0x98b892(0xba)]={};}}exports[a97_0x120bf4(0xb0)]=MDApiRemover;