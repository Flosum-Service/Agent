const a97_0x301bae=a97_0xa56b;(function(_0x247b55,_0x5d010a){const _0x1a81c1=a97_0xa56b,_0x2b97f1=_0x247b55();while(!![]){try{const _0x59c5a8=parseInt(_0x1a81c1(0xe0))/0x1*(-parseInt(_0x1a81c1(0xf0))/0x2)+-parseInt(_0x1a81c1(0xe9))/0x3+parseInt(_0x1a81c1(0xf7))/0x4*(parseInt(_0x1a81c1(0xef))/0x5)+-parseInt(_0x1a81c1(0xf3))/0x6+-parseInt(_0x1a81c1(0xe2))/0x7+parseInt(_0x1a81c1(0xe4))/0x8+parseInt(_0x1a81c1(0xe5))/0x9;if(_0x59c5a8===_0x5d010a)break;else _0x2b97f1['push'](_0x2b97f1['shift']());}catch(_0x3c89a8){_0x2b97f1['push'](_0x2b97f1['shift']());}}}(a97_0xce49,0xdd929));function a97_0xa56b(_0x3bfe42,_0x1ac28b){const _0x349962=a97_0xce49();return a97_0xa56b=function(_0x45072e,_0x375c7f){_0x45072e=_0x45072e-0xe0;let _0xce4992=_0x349962[_0x45072e];return _0xce4992;},a97_0xa56b(_0x3bfe42,_0x1ac28b);}const a97_0x375c7f=(function(){let _0x19205b=!![];return function(_0x24638d,_0x4ac2ff){const _0x3372da=_0x19205b?function(){const _0x17ed91=a97_0xa56b;if(_0x4ac2ff){const _0x5b7d8a=_0x4ac2ff[_0x17ed91(0xed)](_0x24638d,arguments);return _0x4ac2ff=null,_0x5b7d8a;}}:function(){};return _0x19205b=![],_0x3372da;};}()),a97_0x45072e=a97_0x375c7f(this,function(){const _0x3410ed=a97_0xa56b;return a97_0x45072e[_0x3410ed(0x10f)]()['search'](_0x3410ed(0xf6))[_0x3410ed(0x10f)]()[_0x3410ed(0x102)](a97_0x45072e)[_0x3410ed(0x11b)](_0x3410ed(0xf6));});a97_0x45072e();'use strict';var __importDefault=this&&this[a97_0x301bae(0xf4)]||function(_0x4e2994){return _0x4e2994&&_0x4e2994['__esModule']?_0x4e2994:{'default':_0x4e2994};};Object[a97_0x301bae(0xf2)](exports,a97_0x301bae(0xf5),{'value':!![]}),exports[a97_0x301bae(0x105)]=void 0x0;const fs_internal_1=require(a97_0x301bae(0x116)),core_1=require('../../../core'),xml_1=require('../utils/xml'),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require(a97_0x301bae(0x11c)));class MDApiRemover{constructor(_0xcd4545,_0x1a6131){const _0x2fee4c=a97_0x301bae;this[_0x2fee4c(0x101)]=_0xcd4545,this[_0x2fee4c(0xeb)]=_0x1a6131,this['META_EXTENSION']=_0x2fee4c(0xe7),this[_0x2fee4c(0xe3)]=_0x2fee4c(0x110),this[_0x2fee4c(0x11d)]=0x64,this[_0x2fee4c(0x10b)]=new core_1[(_0x2fee4c(0x115))](MDApiRemover[_0x2fee4c(0x118)]),this['parentComponents']={};}async[a97_0x301bae(0xf8)](_0x38cfda){const _0x1b3a9b=a97_0x301bae,_0x17186b=path_1['default'][_0x1b3a9b(0x10d)](this[_0x1b3a9b(0xeb)],_0x38cfda[_0x1b3a9b(0x11c)]),_0x3ffb40=path_1['default'][_0x1b3a9b(0x10d)](this[_0x1b3a9b(0xeb)],''+_0x38cfda[_0x1b3a9b(0x11c)]+this[_0x1b3a9b(0x104)]);this[_0x1b3a9b(0x111)][_0x38cfda[_0x1b3a9b(0x11c)]]&&delete this[_0x1b3a9b(0x111)][_0x38cfda['path']];const _0xc0b42f=await fs_internal_1['FS'][_0x1b3a9b(0xec)](_0x17186b)[_0x1b3a9b(0x11a)](()=>![]);if(_0xc0b42f){this['logger'][_0x1b3a9b(0x112)](_0x1b3a9b(0xff),_0x17186b,_0x38cfda[_0x1b3a9b(0xfb)]),await fs_internal_1['FS']['removeDir'](_0x17186b);_0x38cfda[_0x1b3a9b(0xfb)]==='ExperienceBundle'&&await fs_internal_1['FS'][_0x1b3a9b(0x10e)](''+_0x17186b+this[_0x1b3a9b(0xe3)])[_0x1b3a9b(0x11a)](()=>void 0x0);return;}this[_0x1b3a9b(0x10b)][_0x1b3a9b(0x112)](_0x1b3a9b(0x10c),_0x17186b,_0x38cfda[_0x1b3a9b(0xfb)]),await Promise[_0x1b3a9b(0xe6)]([fs_internal_1['FS'][_0x1b3a9b(0x10e)](_0x17186b),fs_internal_1['FS'][_0x1b3a9b(0x10e)](_0x3ffb40)]);}async[a97_0x301bae(0x113)](_0x2308da){const _0x422a27=a97_0x301bae,{fileName:_0x3a8e40,type:_0x27bb7b,path:_0x46ae2f}=_0x2308da,_0x4f3b49=child_types_map_1['default'][_0x27bb7b];if(!_0x4f3b49)throw new Error(_0x422a27(0x108)+_0x27bb7b);if(!this[_0x422a27(0x111)][_0x46ae2f]){const _0x2a969c=path_1[_0x422a27(0x103)][_0x422a27(0x10d)](this[_0x422a27(0xeb)],_0x46ae2f),_0x563edc=await fs_internal_1['FS'][_0x422a27(0xea)](_0x2a969c);if(!_0x563edc)return;const _0x4d757e=await fs_internal_1['FS'][_0x422a27(0xfd)](_0x2a969c);this[_0x422a27(0x111)][_0x46ae2f]=await xml_1[_0x422a27(0x109)][_0x422a27(0x107)](_0x4d757e);}const _0x242b4f=this['parentComponents'][_0x46ae2f],_0x5a8f01=_0x3a8e40[_0x422a27(0x119)]('.')[_0x422a27(0xf1)]();xml_1[_0x422a27(0x109)]['removeAt'](_0x242b4f,_0x4f3b49,_0x5a8f01||_0x3a8e40),xml_1['Xml'][_0x422a27(0xfe)](_0x242b4f)?(this[_0x422a27(0x10b)][_0x422a27(0x112)](_0x422a27(0x114),_0x2308da[_0x422a27(0x11c)],_0x2308da['fileName']),await this[_0x422a27(0xf8)](_0x2308da),delete this['parentComponents'][_0x46ae2f]):this[_0x422a27(0x111)][_0x46ae2f]=_0x242b4f;}async[a97_0x301bae(0x10a)](){const _0x55c7ce=a97_0x301bae;!await fs_internal_1['FS']['exists'](this['sourceDir'])&&await fs_internal_1['FS'][_0x55c7ce(0xe8)](this[_0x55c7ce(0xeb)]);for(const _0x308fcd of this[_0x55c7ce(0x101)]){!child_types_1[_0x55c7ce(0x103)]['includes'](_0x308fcd[_0x55c7ce(0xfb)])?(this['logger'][_0x55c7ce(0x112)](_0x55c7ce(0xe1),_0x308fcd[_0x55c7ce(0x100)],_0x308fcd[_0x55c7ce(0xfb)]),await this['removeParent'](_0x308fcd)):(this[_0x55c7ce(0x10b)][_0x55c7ce(0x112)](_0x55c7ce(0xfc),_0x308fcd['fileName'],_0x308fcd[_0x55c7ce(0xfb)]),await this[_0x55c7ce(0x113)](_0x308fcd));}const _0xd747a7=Object[_0x55c7ce(0xf9)](this[_0x55c7ce(0x111)]);this[_0x55c7ce(0x10b)]['log'](_0x55c7ce(0x117),this['components'][_0x55c7ce(0x106)]);while(_0xd747a7[_0x55c7ce(0x106)]){const _0x3bd0fc=_0xd747a7['splice'](0x0,this[_0x55c7ce(0x11d)]);for(const _0x214c91 of _0x3bd0fc){await fs_internal_1['FS'][_0x55c7ce(0xfa)](path_1[_0x55c7ce(0x103)][_0x55c7ce(0x10d)](this[_0x55c7ce(0xeb)],_0x214c91),xml_1[_0x55c7ce(0x109)][_0x55c7ce(0xee)](this[_0x55c7ce(0x111)][_0x214c91]));}}this['parentComponents']={};}}function a97_0xce49(){const _0x22d6f6=['length','parse','Unknown\x20child\x20type\x20','Xml','start','logger','remove\x20component\x20\x20%s\x20[%s]','join','removeFile','toString','site-meta.xml','parentComponents','log','removeChild','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','Logger','../../internal/fs.internal','have\x20to\x20update\x20%d\x20files','name','split','catch','search','path','MAX_WRITES_PER_TICK','207661EQzVkG','remove\x20parent\x20component\x20%s\x20[%s]','7829094PAmCiC','META_EXPERIENCE_BUNDLE','39256lbzbhA','27028179FvLopK','all','-meta.xml','makeDir','3609342onxKsr','exists','sourceDir','isDir','apply','convertToString','4669995GPduvi','2UAzSNx','pop','defineProperty','3031554jPgZtp','__importDefault','__esModule','(((.+)+)+)+$','4aWisVa','removeParent','keys','writeFile','type','remove\x20child\x20component\x20%s\x20[%s]','readFile','isEmptyXml','remove\x20component\x20directory\x20%s\x20[%s]','fileName','components','constructor','default','META_EXTENSION','MDApiRemover'];a97_0xce49=function(){return _0x22d6f6;};return a97_0xce49();}exports[a97_0x301bae(0x105)]=MDApiRemover;