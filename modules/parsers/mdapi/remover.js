const a96_0x2b401b=a96_0x3089;(function(_0x5cd43e,_0x33bb13){const _0x440a18=a96_0x3089,_0x5c84ca=_0x5cd43e();while(!![]){try{const _0xc561f0=parseInt(_0x440a18(0xaf))/0x1*(parseInt(_0x440a18(0x82))/0x2)+parseInt(_0x440a18(0x7b))/0x3*(parseInt(_0x440a18(0x83))/0x4)+-parseInt(_0x440a18(0xad))/0x5+-parseInt(_0x440a18(0xa8))/0x6+parseInt(_0x440a18(0xb3))/0x7*(parseInt(_0x440a18(0x8a))/0x8)+-parseInt(_0x440a18(0x8b))/0x9*(-parseInt(_0x440a18(0x8f))/0xa)+parseInt(_0x440a18(0x7a))/0xb;if(_0xc561f0===_0x33bb13)break;else _0x5c84ca['push'](_0x5c84ca['shift']());}catch(_0x22dc91){_0x5c84ca['push'](_0x5c84ca['shift']());}}}(a96_0x4e66,0x78a90));const a96_0x4be8ca=(function(){let _0x35737f=!![];return function(_0x45c082,_0x5ad055){const _0x6f1ff0=_0x35737f?function(){const _0x21e348=a96_0x3089;if(_0x5ad055){const _0x241c73=_0x5ad055[_0x21e348(0x93)](_0x45c082,arguments);return _0x5ad055=null,_0x241c73;}}:function(){};return _0x35737f=![],_0x6f1ff0;};}()),a96_0x5d2382=a96_0x4be8ca(this,function(){const _0x30c1e4=a96_0x3089;return a96_0x5d2382[_0x30c1e4(0xa9)]()[_0x30c1e4(0x97)](_0x30c1e4(0x85))['toString']()[_0x30c1e4(0x9e)](a96_0x5d2382)[_0x30c1e4(0x97)]('(((.+)+)+)+$');});function a96_0x4e66(){const _0xa2a6e1=['../../../core','120346TWewQp','default','catch','logger','14Udtuov','2768733UiFYSV','21MfuXdW','parentComponents','removeParent','convertToString','parse','Unknown\x20child\x20type\x20','Xml','2LlOtqI','442684qWBBJH','META_EXPERIENCE_BUNDLE','(((.+)+)+)+$','removeDir','__esModule','remove\x20component\x20directory\x20%s\x20[%s]','length','3607176YswgGN','9doeMby','type','writeFile','removeChild','2308010wgZXtk','keys','META_EXTENSION','path','apply','removeFile','defineProperty','../data/child-types','search','isDir','remove\x20parent\x20component\x20%s\x20[%s]','MAX_WRITES_PER_TICK','sourceDir','../../internal/fs.internal','join','constructor','start','Logger','../data/child-types-map','remove\x20component\x20\x20%s\x20[%s]','fileName','../utils/xml','components','MDApiRemover','log','5215344YDjRrE','toString','all','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','exists','4579465jPcqTW'];a96_0x4e66=function(){return _0xa2a6e1;};return a96_0x4e66();}a96_0x5d2382();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x18562d){return _0x18562d&&_0x18562d['__esModule']?_0x18562d:{'default':_0x18562d};};Object[a96_0x2b401b(0x95)](exports,a96_0x2b401b(0x87),{'value':!![]}),exports[a96_0x2b401b(0xa6)]=void 0x0;const fs_internal_1=require(a96_0x2b401b(0x9c)),core_1=require(a96_0x2b401b(0xae)),xml_1=require(a96_0x2b401b(0xa4)),child_types_1=__importDefault(require(a96_0x2b401b(0x96))),child_types_map_1=__importDefault(require(a96_0x2b401b(0xa1))),path_1=__importDefault(require(a96_0x2b401b(0x92)));function a96_0x3089(_0x44688f,_0x28b42b){const _0x5e02a5=a96_0x4e66();return a96_0x3089=function(_0x5d2382,_0x4be8ca){_0x5d2382=_0x5d2382-0x7a;let _0x4e6650=_0x5e02a5[_0x5d2382];return _0x4e6650;},a96_0x3089(_0x44688f,_0x28b42b);}class MDApiRemover{constructor(_0x37dd76,_0x3146de){const _0x57fbf2=a96_0x2b401b;this['components']=_0x37dd76,this['sourceDir']=_0x3146de,this[_0x57fbf2(0x91)]='-meta.xml',this[_0x57fbf2(0x84)]='site-meta.xml',this[_0x57fbf2(0x9a)]=0x64,this['logger']=new core_1[(_0x57fbf2(0xa0))](MDApiRemover['name']),this[_0x57fbf2(0x7c)]={};}async[a96_0x2b401b(0x7d)](_0x5b5d11){const _0x4b0d59=a96_0x2b401b,_0xdc78d1=path_1['default'][_0x4b0d59(0x9d)](this[_0x4b0d59(0x9b)],_0x5b5d11['path']),_0x39e229=path_1[_0x4b0d59(0xb0)][_0x4b0d59(0x9d)](this[_0x4b0d59(0x9b)],''+_0x5b5d11[_0x4b0d59(0x92)]+this[_0x4b0d59(0x91)]);this[_0x4b0d59(0x7c)][_0x5b5d11[_0x4b0d59(0x92)]]&&delete this[_0x4b0d59(0x7c)][_0x5b5d11[_0x4b0d59(0x92)]];const _0x1327c1=await fs_internal_1['FS'][_0x4b0d59(0x98)](_0xdc78d1)[_0x4b0d59(0xb1)](()=>![]);if(_0x1327c1){this['logger'][_0x4b0d59(0xa7)](_0x4b0d59(0x88),_0xdc78d1,_0x5b5d11[_0x4b0d59(0x8c)]),await fs_internal_1['FS'][_0x4b0d59(0x86)](_0xdc78d1);_0x5b5d11[_0x4b0d59(0x8c)]==='ExperienceBundle'&&await fs_internal_1['FS'][_0x4b0d59(0x94)](''+_0xdc78d1+this['META_EXPERIENCE_BUNDLE'])['catch'](()=>void 0x0);return;}this[_0x4b0d59(0xb2)]['log'](_0x4b0d59(0xa2),_0xdc78d1,_0x5b5d11[_0x4b0d59(0x8c)]),await Promise[_0x4b0d59(0xaa)]([fs_internal_1['FS'][_0x4b0d59(0x94)](_0xdc78d1),fs_internal_1['FS'][_0x4b0d59(0x94)](_0x39e229)]);}async['removeChild'](_0x5f3874){const _0x50321d=a96_0x2b401b,{fileName:_0x48ade6,type:_0x200d61,path:_0x542b46}=_0x5f3874,_0x3fbd44=child_types_map_1[_0x50321d(0xb0)][_0x200d61];if(!_0x3fbd44)throw new Error(_0x50321d(0x80)+_0x200d61);if(!this[_0x50321d(0x7c)][_0x542b46]){const _0x2e67e8=path_1[_0x50321d(0xb0)][_0x50321d(0x9d)](this[_0x50321d(0x9b)],_0x542b46),_0xcee3f9=await fs_internal_1['FS'][_0x50321d(0xac)](_0x2e67e8);if(!_0xcee3f9)return;const _0x57b515=await fs_internal_1['FS']['readFile'](_0x2e67e8);this[_0x50321d(0x7c)][_0x542b46]=await xml_1[_0x50321d(0x81)][_0x50321d(0x7f)](_0x57b515);}const _0x153b97=this[_0x50321d(0x7c)][_0x542b46],_0x498ac3=_0x48ade6['split']('.')['pop']();xml_1[_0x50321d(0x81)]['removeAt'](_0x153b97,_0x3fbd44,_0x498ac3||_0x48ade6),xml_1[_0x50321d(0x81)]['isEmptyXml'](_0x153b97)?(this[_0x50321d(0xb2)][_0x50321d(0xa7)](_0x50321d(0xab),_0x5f3874[_0x50321d(0x92)],_0x5f3874['fileName']),await this[_0x50321d(0x7d)](_0x5f3874),delete this[_0x50321d(0x7c)][_0x542b46]):this['parentComponents'][_0x542b46]=_0x153b97;}async[a96_0x2b401b(0x9f)](){const _0x5bd9b2=a96_0x2b401b;!await fs_internal_1['FS']['exists'](this[_0x5bd9b2(0x9b)])&&await fs_internal_1['FS']['makeDir'](this[_0x5bd9b2(0x9b)]);for(const _0x3cf3c0 of this[_0x5bd9b2(0xa5)]){!child_types_1[_0x5bd9b2(0xb0)]['includes'](_0x3cf3c0[_0x5bd9b2(0x8c)])?(this[_0x5bd9b2(0xb2)]['log'](_0x5bd9b2(0x99),_0x3cf3c0[_0x5bd9b2(0xa3)],_0x3cf3c0['type']),await this[_0x5bd9b2(0x7d)](_0x3cf3c0)):(this['logger'][_0x5bd9b2(0xa7)]('remove\x20child\x20component\x20%s\x20[%s]',_0x3cf3c0['fileName'],_0x3cf3c0[_0x5bd9b2(0x8c)]),await this[_0x5bd9b2(0x8e)](_0x3cf3c0));}const _0x5519ec=Object[_0x5bd9b2(0x90)](this[_0x5bd9b2(0x7c)]);this[_0x5bd9b2(0xb2)][_0x5bd9b2(0xa7)]('have\x20to\x20update\x20%d\x20files',this[_0x5bd9b2(0xa5)]['length']);while(_0x5519ec[_0x5bd9b2(0x89)]){const _0x247007=_0x5519ec['splice'](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x109d53 of _0x247007){await fs_internal_1['FS'][_0x5bd9b2(0x8d)](path_1[_0x5bd9b2(0xb0)][_0x5bd9b2(0x9d)](this[_0x5bd9b2(0x9b)],_0x109d53),xml_1[_0x5bd9b2(0x81)][_0x5bd9b2(0x7e)](this[_0x5bd9b2(0x7c)][_0x109d53]));}}this[_0x5bd9b2(0x7c)]={};}}exports['MDApiRemover']=MDApiRemover;