const a97_0x56c03e=a97_0x52ba;(function(_0xf01ce,_0x15bd38){const _0x4fcc1e=a97_0x52ba,_0x3e7cf2=_0xf01ce();while(!![]){try{const _0xc0289f=-parseInt(_0x4fcc1e(0xf0))/0x1*(-parseInt(_0x4fcc1e(0xd4))/0x2)+parseInt(_0x4fcc1e(0xe8))/0x3*(parseInt(_0x4fcc1e(0xbd))/0x4)+-parseInt(_0x4fcc1e(0xd2))/0x5*(-parseInt(_0x4fcc1e(0xf5))/0x6)+-parseInt(_0x4fcc1e(0xca))/0x7+parseInt(_0x4fcc1e(0xbb))/0x8*(parseInt(_0x4fcc1e(0xb7))/0x9)+-parseInt(_0x4fcc1e(0xd6))/0xa*(-parseInt(_0x4fcc1e(0xc8))/0xb)+-parseInt(_0x4fcc1e(0xcd))/0xc*(parseInt(_0x4fcc1e(0xdb))/0xd);if(_0xc0289f===_0x15bd38)break;else _0x3e7cf2['push'](_0x3e7cf2['shift']());}catch(_0x147bb2){_0x3e7cf2['push'](_0x3e7cf2['shift']());}}}(a97_0x20ee,0xcc22c));const a97_0x13d8e8=(function(){let _0x152d30=!![];return function(_0x2cf239,_0x486ae5){const _0x269952=_0x152d30?function(){const _0x9713c0=a97_0x52ba;if(_0x486ae5){const _0x435c06=_0x486ae5[_0x9713c0(0xde)](_0x2cf239,arguments);return _0x486ae5=null,_0x435c06;}}:function(){};return _0x152d30=![],_0x269952;};}()),a97_0x476751=a97_0x13d8e8(this,function(){const _0x1d4111=a97_0x52ba;return a97_0x476751[_0x1d4111(0xc6)]()[_0x1d4111(0xee)](_0x1d4111(0xcf))[_0x1d4111(0xc6)]()[_0x1d4111(0xb4)](a97_0x476751)[_0x1d4111(0xee)](_0x1d4111(0xcf));});a97_0x476751();function a97_0x52ba(_0x4e4f3d,_0xb26d45){const _0x774aca=a97_0x20ee();return a97_0x52ba=function(_0x476751,_0x13d8e8){_0x476751=_0x476751-0xb1;let _0x20eec9=_0x774aca[_0x476751];return _0x20eec9;},a97_0x52ba(_0x4e4f3d,_0xb26d45);}function a97_0x20ee(){const _0x3167d2=['Xml','9QaNNsC','../../internal/fs.internal','length','parse','6289432GosUuW','removeDir','4edBTME','__importDefault','pop','META_EXPERIENCE_BUNDLE','fileName','join','MDApiRemover','parentComponents','remove\x20component\x20\x20%s\x20[%s]','toString','../data/child-types','979BqUpGe','path','365659ujZCWl','writeFile','MAX_WRITES_PER_TICK','12ZnsABS','readFile','(((.+)+)+)+$','site-meta.xml','removeChild','15XWBqRU','isEmptyXml','34dlgpxO','all','149360cmVECT','remove\x20child\x20component\x20%s\x20[%s]','__esModule','logger','split','47942947jJiEqe','remove\x20component\x20directory\x20%s\x20[%s]','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','apply','components','convertToString','Unknown\x20child\x20type\x20','defineProperty','../data/child-types-map','start','isDir','sourceDir','ExperienceBundle','709338cnaNYA','type','catch','META_EXTENSION','removeParent','splice','search','log','47593srpfZT','../utils/xml','exists','default','makeDir','2830572QRoZjZ','removeAt','Logger','removeFile','constructor','includes'];a97_0x20ee=function(){return _0x3167d2;};return a97_0x20ee();}'use strict';var __importDefault=this&&this[a97_0x56c03e(0xbe)]||function(_0x39f604){return _0x39f604&&_0x39f604['__esModule']?_0x39f604:{'default':_0x39f604};};Object[a97_0x56c03e(0xe2)](exports,a97_0x56c03e(0xd8),{'value':!![]}),exports[a97_0x56c03e(0xc3)]=void 0x0;const fs_internal_1=require(a97_0x56c03e(0xb8)),core_1=require('../../../core'),xml_1=require(a97_0x56c03e(0xf1)),child_types_1=__importDefault(require(a97_0x56c03e(0xc7))),child_types_map_1=__importDefault(require(a97_0x56c03e(0xe3))),path_1=__importDefault(require('path'));class MDApiRemover{constructor(_0x326b4a,_0x84cad3){const _0x245a2b=a97_0x56c03e;this[_0x245a2b(0xdf)]=_0x326b4a,this[_0x245a2b(0xe6)]=_0x84cad3,this[_0x245a2b(0xeb)]='-meta.xml',this['META_EXPERIENCE_BUNDLE']=_0x245a2b(0xd0),this['MAX_WRITES_PER_TICK']=0x64,this[_0x245a2b(0xd9)]=new core_1[(_0x245a2b(0xb2))](MDApiRemover['name']),this['parentComponents']={};}async['removeParent'](_0x41d173){const _0x34bdd7=a97_0x56c03e,_0x5ee259=path_1[_0x34bdd7(0xf3)][_0x34bdd7(0xc2)](this[_0x34bdd7(0xe6)],_0x41d173[_0x34bdd7(0xc9)]),_0x5e4c0b=path_1[_0x34bdd7(0xf3)][_0x34bdd7(0xc2)](this[_0x34bdd7(0xe6)],''+_0x41d173[_0x34bdd7(0xc9)]+this[_0x34bdd7(0xeb)]);this['parentComponents'][_0x41d173[_0x34bdd7(0xc9)]]&&delete this[_0x34bdd7(0xc4)][_0x41d173[_0x34bdd7(0xc9)]];const _0x27d6e9=await fs_internal_1['FS'][_0x34bdd7(0xe5)](_0x5ee259)[_0x34bdd7(0xea)](()=>![]);if(_0x27d6e9){this[_0x34bdd7(0xd9)][_0x34bdd7(0xef)](_0x34bdd7(0xdc),_0x5ee259,_0x41d173[_0x34bdd7(0xe9)]),await fs_internal_1['FS'][_0x34bdd7(0xbc)](_0x5ee259);_0x41d173['type']===_0x34bdd7(0xe7)?await fs_internal_1['FS'][_0x34bdd7(0xb3)](''+_0x5ee259+this[_0x34bdd7(0xc0)])[_0x34bdd7(0xea)](()=>void 0x0):(this[_0x34bdd7(0xd9)]['log'](_0x34bdd7(0xdd),_0x5ee259,_0x41d173[_0x34bdd7(0xe9)]),await fs_internal_1['FS'][_0x34bdd7(0xb3)](''+_0x5ee259+this['META_EXTENSION'])[_0x34bdd7(0xea)](()=>void 0x0));return;}this[_0x34bdd7(0xd9)][_0x34bdd7(0xef)](_0x34bdd7(0xc5),_0x5ee259,_0x41d173[_0x34bdd7(0xe9)]),await Promise[_0x34bdd7(0xd5)]([fs_internal_1['FS']['removeFile'](_0x5ee259),fs_internal_1['FS']['removeFile'](_0x5e4c0b)]);}async[a97_0x56c03e(0xd1)](_0x4d4c49){const _0x239ce6=a97_0x56c03e,{fileName:_0x16cb05,type:_0x5355b9,path:_0x151f09}=_0x4d4c49,_0x2e680b=child_types_map_1[_0x239ce6(0xf3)][_0x5355b9];if(!_0x2e680b)throw new Error(_0x239ce6(0xe1)+_0x5355b9);if(!this['parentComponents'][_0x151f09]){const _0x338dbc=path_1[_0x239ce6(0xf3)][_0x239ce6(0xc2)](this['sourceDir'],_0x151f09),_0x7c756c=await fs_internal_1['FS'][_0x239ce6(0xf2)](_0x338dbc);if(!_0x7c756c)return;const _0x327bd0=await fs_internal_1['FS'][_0x239ce6(0xce)](_0x338dbc);this['parentComponents'][_0x151f09]=await xml_1[_0x239ce6(0xb6)][_0x239ce6(0xba)](_0x327bd0);}const _0x3747c9=this[_0x239ce6(0xc4)][_0x151f09],_0x477ecc=_0x16cb05[_0x239ce6(0xda)]('.')[_0x239ce6(0xbf)]();xml_1[_0x239ce6(0xb6)][_0x239ce6(0xb1)](_0x3747c9,_0x2e680b,_0x477ecc||_0x16cb05),xml_1[_0x239ce6(0xb6)][_0x239ce6(0xd3)](_0x3747c9)?(this['logger'][_0x239ce6(0xef)]('remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x4d4c49[_0x239ce6(0xc9)],_0x4d4c49[_0x239ce6(0xc1)]),await this[_0x239ce6(0xec)](_0x4d4c49),delete this['parentComponents'][_0x151f09]):this[_0x239ce6(0xc4)][_0x151f09]=_0x3747c9;}async[a97_0x56c03e(0xe4)](){const _0x3e19a1=a97_0x56c03e;!await fs_internal_1['FS'][_0x3e19a1(0xf2)](this[_0x3e19a1(0xe6)])&&await fs_internal_1['FS'][_0x3e19a1(0xf4)](this[_0x3e19a1(0xe6)]);for(const _0x24bcff of this['components']){!child_types_1[_0x3e19a1(0xf3)][_0x3e19a1(0xb5)](_0x24bcff[_0x3e19a1(0xe9)])?(this[_0x3e19a1(0xd9)][_0x3e19a1(0xef)]('remove\x20parent\x20component\x20%s\x20[%s]',_0x24bcff[_0x3e19a1(0xc1)],_0x24bcff[_0x3e19a1(0xe9)]),await this[_0x3e19a1(0xec)](_0x24bcff)):(this[_0x3e19a1(0xd9)][_0x3e19a1(0xef)](_0x3e19a1(0xd7),_0x24bcff[_0x3e19a1(0xc1)],_0x24bcff[_0x3e19a1(0xe9)]),await this[_0x3e19a1(0xd1)](_0x24bcff));}const _0x4f57d6=Object['keys'](this[_0x3e19a1(0xc4)]);this[_0x3e19a1(0xd9)][_0x3e19a1(0xef)]('have\x20to\x20update\x20%d\x20files',this['components'][_0x3e19a1(0xb9)]);while(_0x4f57d6[_0x3e19a1(0xb9)]){const _0x3d5c24=_0x4f57d6[_0x3e19a1(0xed)](0x0,this[_0x3e19a1(0xcc)]);for(const _0xbb08c4 of _0x3d5c24){await fs_internal_1['FS'][_0x3e19a1(0xcb)](path_1[_0x3e19a1(0xf3)][_0x3e19a1(0xc2)](this[_0x3e19a1(0xe6)],_0xbb08c4),xml_1[_0x3e19a1(0xb6)][_0x3e19a1(0xe0)](this['parentComponents'][_0xbb08c4]));}}this[_0x3e19a1(0xc4)]={};}}exports[a97_0x56c03e(0xc3)]=MDApiRemover;