const a97_0x4c1aae=a97_0x5181;(function(_0x3fe765,_0xdd169){const _0x4dc1c9=a97_0x5181,_0x2dbdea=_0x3fe765();while(!![]){try{const _0x5c142a=parseInt(_0x4dc1c9(0x85))/0x1*(-parseInt(_0x4dc1c9(0xaf))/0x2)+-parseInt(_0x4dc1c9(0x8b))/0x3+-parseInt(_0x4dc1c9(0x9d))/0x4+-parseInt(_0x4dc1c9(0x7a))/0x5*(-parseInt(_0x4dc1c9(0x84))/0x6)+parseInt(_0x4dc1c9(0x87))/0x7*(parseInt(_0x4dc1c9(0x97))/0x8)+-parseInt(_0x4dc1c9(0x82))/0x9+parseInt(_0x4dc1c9(0xab))/0xa;if(_0x5c142a===_0xdd169)break;else _0x2dbdea['push'](_0x2dbdea['shift']());}catch(_0xf241ec){_0x2dbdea['push'](_0x2dbdea['shift']());}}}(a97_0x2547,0xdac29));const a97_0x3fca7a=(function(){let _0x2a61c7=!![];return function(_0x30b20c,_0x3b04ad){const _0x336940=_0x2a61c7?function(){if(_0x3b04ad){const _0x468c59=_0x3b04ad['apply'](_0x30b20c,arguments);return _0x3b04ad=null,_0x468c59;}}:function(){};return _0x2a61c7=![],_0x336940;};}()),a97_0x33d98f=a97_0x3fca7a(this,function(){const _0x1f0d0c=a97_0x5181;return a97_0x33d98f['toString']()['search'](_0x1f0d0c(0x8d))['toString']()[_0x1f0d0c(0x91)](a97_0x33d98f)[_0x1f0d0c(0x81)]('(((.+)+)+)+$');});a97_0x33d98f();function a97_0x2547(){const _0x52f6fb=['constructor','exists','pop','logger','removeFile','removeParent','2508400ERRaiu','parentComponents','name','defineProperty','keys','sourceDir','1229784UTfDqW','Xml','-meta.xml','catch','components','../data/child-types','start','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','removeChild','all','MDApiRemover','remove\x20parent\x20component\x20%s\x20[%s]','have\x20to\x20update\x20%d\x20files','Logger','3206050jbFXKE','join','remove\x20child\x20component\x20%s\x20[%s]','length','21520PYjGsh','removeAt','META_EXTENSION','../utils/xml','5rElnQr','META_EXPERIENCE_BUNDLE','ExperienceBundle','convertToString','../../../core','fileName','Unknown\x20child\x20type\x20','search','536823NemIxp','makeDir','5421084cxsiNQ','13IDkWiW','removeDir','7sefmjl','__importDefault','default','type','403965FHciFX','log','(((.+)+)+)+$','site-meta.xml','path','readFile'];a97_0x2547=function(){return _0x52f6fb;};return a97_0x2547();}'use strict';var __importDefault=this&&this[a97_0x4c1aae(0x88)]||function(_0x393cbb){return _0x393cbb&&_0x393cbb['__esModule']?_0x393cbb:{'default':_0x393cbb};};function a97_0x5181(_0x7d2e7e,_0x38e3d4){const _0x3f7245=a97_0x2547();return a97_0x5181=function(_0x33d98f,_0x3fca7a){_0x33d98f=_0x33d98f-0x79;let _0x25478a=_0x3f7245[_0x33d98f];return _0x25478a;},a97_0x5181(_0x7d2e7e,_0x38e3d4);}Object[a97_0x4c1aae(0x9a)](exports,'__esModule',{'value':!![]}),exports[a97_0x4c1aae(0xa7)]=void 0x0;const fs_internal_1=require('../../internal/fs.internal'),core_1=require(a97_0x4c1aae(0x7e)),xml_1=require(a97_0x4c1aae(0x79)),child_types_1=__importDefault(require(a97_0x4c1aae(0xa2))),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require(a97_0x4c1aae(0x8f)));class MDApiRemover{constructor(_0x56fafc,_0x2209bb){const _0x49941b=a97_0x4c1aae;this[_0x49941b(0xa1)]=_0x56fafc,this[_0x49941b(0x9c)]=_0x2209bb,this[_0x49941b(0xb1)]=_0x49941b(0x9f),this[_0x49941b(0x7b)]=_0x49941b(0x8e),this['MAX_WRITES_PER_TICK']=0x64,this['logger']=new core_1[(_0x49941b(0xaa))](MDApiRemover[_0x49941b(0x99)]),this['parentComponents']={};}async[a97_0x4c1aae(0x96)](_0x4fb410){const _0x1b0c05=a97_0x4c1aae,_0xfcfe5f=path_1[_0x1b0c05(0x89)]['join'](this['sourceDir'],_0x4fb410[_0x1b0c05(0x8f)]),_0x503574=path_1[_0x1b0c05(0x89)]['join'](this[_0x1b0c05(0x9c)],''+_0x4fb410[_0x1b0c05(0x8f)]+this[_0x1b0c05(0xb1)]);this[_0x1b0c05(0x98)][_0x4fb410[_0x1b0c05(0x8f)]]&&delete this[_0x1b0c05(0x98)][_0x4fb410['path']];const _0x50e83d=await fs_internal_1['FS']['isDir'](_0xfcfe5f)[_0x1b0c05(0xa0)](()=>![]);if(_0x50e83d){this[_0x1b0c05(0x94)]['log']('remove\x20component\x20directory\x20%s\x20[%s]',_0xfcfe5f,_0x4fb410['type']),await fs_internal_1['FS'][_0x1b0c05(0x86)](_0xfcfe5f);_0x4fb410[_0x1b0c05(0x8a)]===_0x1b0c05(0x7c)&&await fs_internal_1['FS']['removeFile'](''+_0xfcfe5f+this[_0x1b0c05(0x7b)])[_0x1b0c05(0xa0)](()=>void 0x0);return;}this[_0x1b0c05(0x94)][_0x1b0c05(0x8c)]('remove\x20component\x20\x20%s\x20[%s]',_0xfcfe5f,_0x4fb410[_0x1b0c05(0x8a)]),await Promise[_0x1b0c05(0xa6)]([fs_internal_1['FS'][_0x1b0c05(0x95)](_0xfcfe5f),fs_internal_1['FS'][_0x1b0c05(0x95)](_0x503574)]);}async[a97_0x4c1aae(0xa5)](_0x518da7){const _0x213755=a97_0x4c1aae,{fileName:_0x276a60,type:_0x3a0d3d,path:_0x3eda2c}=_0x518da7,_0xa632e0=child_types_map_1[_0x213755(0x89)][_0x3a0d3d];if(!_0xa632e0)throw new Error(_0x213755(0x80)+_0x3a0d3d);if(!this['parentComponents'][_0x3eda2c]){const _0x554b2c=path_1['default'][_0x213755(0xac)](this[_0x213755(0x9c)],_0x3eda2c),_0x5bdd9b=await fs_internal_1['FS'][_0x213755(0x92)](_0x554b2c);if(!_0x5bdd9b)return;const _0x5e87fe=await fs_internal_1['FS'][_0x213755(0x90)](_0x554b2c);this['parentComponents'][_0x3eda2c]=await xml_1[_0x213755(0x9e)]['parse'](_0x5e87fe);}const _0x245e6c=this[_0x213755(0x98)][_0x3eda2c],_0x2fa997=_0x276a60['split']('.')[_0x213755(0x93)]();xml_1['Xml'][_0x213755(0xb0)](_0x245e6c,_0xa632e0,_0x2fa997||_0x276a60),xml_1[_0x213755(0x9e)]['isEmptyXml'](_0x245e6c)?(this[_0x213755(0x94)][_0x213755(0x8c)](_0x213755(0xa4),_0x518da7[_0x213755(0x8f)],_0x518da7[_0x213755(0x7f)]),await this[_0x213755(0x96)](_0x518da7),delete this['parentComponents'][_0x3eda2c]):this['parentComponents'][_0x3eda2c]=_0x245e6c;}async[a97_0x4c1aae(0xa3)](){const _0x888dff=a97_0x4c1aae;!await fs_internal_1['FS'][_0x888dff(0x92)](this[_0x888dff(0x9c)])&&await fs_internal_1['FS'][_0x888dff(0x83)](this[_0x888dff(0x9c)]);for(const _0xb196ab of this[_0x888dff(0xa1)]){!child_types_1['default']['includes'](_0xb196ab['type'])?(this['logger'][_0x888dff(0x8c)](_0x888dff(0xa8),_0xb196ab[_0x888dff(0x7f)],_0xb196ab[_0x888dff(0x8a)]),await this[_0x888dff(0x96)](_0xb196ab)):(this[_0x888dff(0x94)]['log'](_0x888dff(0xad),_0xb196ab[_0x888dff(0x7f)],_0xb196ab[_0x888dff(0x8a)]),await this[_0x888dff(0xa5)](_0xb196ab));}const _0x1db4da=Object[_0x888dff(0x9b)](this[_0x888dff(0x98)]);this[_0x888dff(0x94)][_0x888dff(0x8c)](_0x888dff(0xa9),this[_0x888dff(0xa1)][_0x888dff(0xae)]);while(_0x1db4da[_0x888dff(0xae)]){const _0x1041e4=_0x1db4da['splice'](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x4f3a93 of _0x1041e4){await fs_internal_1['FS']['writeFile'](path_1[_0x888dff(0x89)][_0x888dff(0xac)](this[_0x888dff(0x9c)],_0x4f3a93),xml_1['Xml'][_0x888dff(0x7d)](this[_0x888dff(0x98)][_0x4f3a93]));}}this[_0x888dff(0x98)]={};}}exports[a97_0x4c1aae(0xa7)]=MDApiRemover;