const a97_0x2eb4c2=a97_0x544b;(function(_0x5a0d5d,_0x12404a){const _0x577650=a97_0x544b,_0x42008e=_0x5a0d5d();while(!![]){try{const _0x14de3e=parseInt(_0x577650(0xe8))/0x1*(parseInt(_0x577650(0xe7))/0x2)+-parseInt(_0x577650(0xd2))/0x3*(-parseInt(_0x577650(0xdf))/0x4)+-parseInt(_0x577650(0xd8))/0x5*(parseInt(_0x577650(0xf4))/0x6)+parseInt(_0x577650(0xc6))/0x7+parseInt(_0x577650(0xd3))/0x8+parseInt(_0x577650(0xf5))/0x9+-parseInt(_0x577650(0xdd))/0xa;if(_0x14de3e===_0x12404a)break;else _0x42008e['push'](_0x42008e['shift']());}catch(_0x491cc5){_0x42008e['push'](_0x42008e['shift']());}}}(a97_0xd776,0x69fd4));const a97_0x106b68=(function(){let _0x442e48=!![];return function(_0x45fbd8,_0x4cdcf0){const _0x52c8e3=_0x442e48?function(){const _0x4e6d65=a97_0x544b;if(_0x4cdcf0){const _0x23fba7=_0x4cdcf0[_0x4e6d65(0xd5)](_0x45fbd8,arguments);return _0x4cdcf0=null,_0x23fba7;}}:function(){};return _0x442e48=![],_0x52c8e3;};}()),a97_0x49b1aa=a97_0x106b68(this,function(){const _0x28d8f6=a97_0x544b;return a97_0x49b1aa['toString']()[_0x28d8f6(0xd1)](_0x28d8f6(0xee))[_0x28d8f6(0xe0)]()[_0x28d8f6(0xe1)](a97_0x49b1aa)['search']('(((.+)+)+)+$');});a97_0x49b1aa();'use strict';function a97_0x544b(_0x415af3,_0x5755c1){const _0x5e9fb2=a97_0xd776();return a97_0x544b=function(_0x49b1aa,_0x106b68){_0x49b1aa=_0x49b1aa-0xc6;let _0xd77652=_0x5e9fb2[_0x49b1aa];return _0xd77652;},a97_0x544b(_0x415af3,_0x5755c1);}function a97_0xd776(){const _0x381877=['parse','636834UNqlBU','2027601VFUehw','path','removeAt','catch','remove\x20child\x20component\x20%s\x20[%s]','exists','../data/child-types','defineProperty','removeDir','splice','join','MDApiRemover','parentComponents','3530604YKQZRS','Xml','__esModule','../../../core','removeParent','removeFile','type','pop','split','-meta.xml','default','search','1772598JxgYog','6824720whmVll','logger','apply','Unknown\x20child\x20type\x20','name','5zlrawL','log','site-meta.xml','start','sourceDir','21949030aqucsa','length','4OGAVUz','toString','constructor','components','readFile','fileName','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','META_EXTENSION','2QvNnGj','561557nSKBOx','remove\x20component\x20directory\x20%s\x20[%s]','ExperienceBundle','MAX_WRITES_PER_TICK','../utils/xml','removeChild','(((.+)+)+)+$','makeDir','convertToString','META_EXPERIENCE_BUNDLE','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]'];a97_0xd776=function(){return _0x381877;};return a97_0xd776();}var __importDefault=this&&this['__importDefault']||function(_0x133068){const _0x9d81d9=a97_0x544b;return _0x133068&&_0x133068[_0x9d81d9(0xc8)]?_0x133068:{'default':_0x133068};};Object[a97_0x2eb4c2(0xfc)](exports,a97_0x2eb4c2(0xc8),{'value':!![]}),exports[a97_0x2eb4c2(0x100)]=void 0x0;const fs_internal_1=require('../../internal/fs.internal'),core_1=require(a97_0x2eb4c2(0xc9)),xml_1=require(a97_0x2eb4c2(0xec)),child_types_1=__importDefault(require(a97_0x2eb4c2(0xfb))),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require('path'));class MDApiRemover{constructor(_0x44cb44,_0x3bbae0){const _0x45b64b=a97_0x2eb4c2;this[_0x45b64b(0xe2)]=_0x44cb44,this[_0x45b64b(0xdc)]=_0x3bbae0,this['META_EXTENSION']=_0x45b64b(0xcf),this[_0x45b64b(0xf1)]=_0x45b64b(0xda),this[_0x45b64b(0xeb)]=0x64,this[_0x45b64b(0xd4)]=new core_1['Logger'](MDApiRemover[_0x45b64b(0xd7)]),this[_0x45b64b(0x101)]={};}async[a97_0x2eb4c2(0xca)](_0x3c3717){const _0x459422=a97_0x2eb4c2,_0x328e79=path_1['default'][_0x459422(0xff)](this[_0x459422(0xdc)],_0x3c3717['path']),_0x15b7c3=path_1[_0x459422(0xd0)]['join'](this[_0x459422(0xdc)],''+_0x3c3717[_0x459422(0xf6)]+this[_0x459422(0xe6)]);this[_0x459422(0x101)][_0x3c3717[_0x459422(0xf6)]]&&delete this[_0x459422(0x101)][_0x3c3717[_0x459422(0xf6)]];const _0x2fe255=await fs_internal_1['FS']['isDir'](_0x328e79)[_0x459422(0xf8)](()=>![]);if(_0x2fe255){this[_0x459422(0xd4)][_0x459422(0xd9)](_0x459422(0xe9),_0x328e79,_0x3c3717[_0x459422(0xcc)]),await fs_internal_1['FS'][_0x459422(0xfd)](_0x328e79);_0x3c3717[_0x459422(0xcc)]===_0x459422(0xea)?await fs_internal_1['FS'][_0x459422(0xcb)](''+_0x328e79+this[_0x459422(0xf1)])[_0x459422(0xf8)](()=>void 0x0):(this[_0x459422(0xd4)][_0x459422(0xd9)](_0x459422(0xe5),_0x328e79,_0x3c3717[_0x459422(0xcc)]),await fs_internal_1['FS'][_0x459422(0xcb)](''+_0x328e79+this[_0x459422(0xe6)])['catch'](()=>void 0x0));return;}this[_0x459422(0xd4)][_0x459422(0xd9)]('remove\x20component\x20\x20%s\x20[%s]',_0x328e79,_0x3c3717[_0x459422(0xcc)]),await Promise['all']([fs_internal_1['FS'][_0x459422(0xcb)](_0x328e79),fs_internal_1['FS'][_0x459422(0xcb)](_0x15b7c3)]);}async['removeChild'](_0x2a4d22){const _0x258cb2=a97_0x2eb4c2,{fileName:_0x6b6eeb,type:_0x981f63,path:_0x2c4381}=_0x2a4d22,_0x2cd4fa=child_types_map_1[_0x258cb2(0xd0)][_0x981f63];if(!_0x2cd4fa)throw new Error(_0x258cb2(0xd6)+_0x981f63);if(!this[_0x258cb2(0x101)][_0x2c4381]){const _0x405437=path_1[_0x258cb2(0xd0)]['join'](this[_0x258cb2(0xdc)],_0x2c4381),_0x1b3a2a=await fs_internal_1['FS']['exists'](_0x405437);if(!_0x1b3a2a)return;const _0x329e98=await fs_internal_1['FS'][_0x258cb2(0xe3)](_0x405437);this[_0x258cb2(0x101)][_0x2c4381]=await xml_1[_0x258cb2(0xc7)][_0x258cb2(0xf3)](_0x329e98);}const _0x5a430c=this[_0x258cb2(0x101)][_0x2c4381],_0x29e6d8=_0x6b6eeb[_0x258cb2(0xce)]('.')[_0x258cb2(0xcd)]();xml_1[_0x258cb2(0xc7)][_0x258cb2(0xf7)](_0x5a430c,_0x2cd4fa,_0x29e6d8||_0x6b6eeb),xml_1['Xml']['isEmptyXml'](_0x5a430c)?(this[_0x258cb2(0xd4)]['log'](_0x258cb2(0xf2),_0x2a4d22[_0x258cb2(0xf6)],_0x2a4d22[_0x258cb2(0xe4)]),await this[_0x258cb2(0xca)](_0x2a4d22),delete this[_0x258cb2(0x101)][_0x2c4381]):this[_0x258cb2(0x101)][_0x2c4381]=_0x5a430c;}async[a97_0x2eb4c2(0xdb)](){const _0x5310ef=a97_0x2eb4c2;!await fs_internal_1['FS'][_0x5310ef(0xfa)](this['sourceDir'])&&await fs_internal_1['FS'][_0x5310ef(0xef)](this[_0x5310ef(0xdc)]);for(const _0x2e24b5 of this['components']){!child_types_1[_0x5310ef(0xd0)]['includes'](_0x2e24b5[_0x5310ef(0xcc)])?(this[_0x5310ef(0xd4)][_0x5310ef(0xd9)]('remove\x20parent\x20component\x20%s\x20[%s]',_0x2e24b5[_0x5310ef(0xe4)],_0x2e24b5[_0x5310ef(0xcc)]),await this[_0x5310ef(0xca)](_0x2e24b5)):(this['logger']['log'](_0x5310ef(0xf9),_0x2e24b5[_0x5310ef(0xe4)],_0x2e24b5['type']),await this[_0x5310ef(0xed)](_0x2e24b5));}const _0x3c57a9=Object['keys'](this[_0x5310ef(0x101)]);this[_0x5310ef(0xd4)][_0x5310ef(0xd9)]('have\x20to\x20update\x20%d\x20files',this[_0x5310ef(0xe2)][_0x5310ef(0xde)]);while(_0x3c57a9[_0x5310ef(0xde)]){const _0x53fb90=_0x3c57a9[_0x5310ef(0xfe)](0x0,this[_0x5310ef(0xeb)]);for(const _0x489746 of _0x53fb90){await fs_internal_1['FS']['writeFile'](path_1[_0x5310ef(0xd0)][_0x5310ef(0xff)](this[_0x5310ef(0xdc)],_0x489746),xml_1[_0x5310ef(0xc7)][_0x5310ef(0xf0)](this[_0x5310ef(0x101)][_0x489746]));}}this[_0x5310ef(0x101)]={};}}exports[a97_0x2eb4c2(0x100)]=MDApiRemover;