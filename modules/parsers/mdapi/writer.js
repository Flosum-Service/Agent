const a98_0x1b53f7=a98_0x8b6a;(function(_0x2fe769,_0xa3f5ba){const _0x5181d0=a98_0x8b6a,_0x699869=_0x2fe769();while(!![]){try{const _0x4ae091=parseInt(_0x5181d0(0x171))/0x1*(parseInt(_0x5181d0(0x15a))/0x2)+-parseInt(_0x5181d0(0x17c))/0x3*(parseInt(_0x5181d0(0x183))/0x4)+-parseInt(_0x5181d0(0x16d))/0x5*(-parseInt(_0x5181d0(0x168))/0x6)+parseInt(_0x5181d0(0x193))/0x7*(parseInt(_0x5181d0(0x195))/0x8)+parseInt(_0x5181d0(0x197))/0x9*(parseInt(_0x5181d0(0x18b))/0xa)+parseInt(_0x5181d0(0x186))/0xb*(-parseInt(_0x5181d0(0x196))/0xc)+-parseInt(_0x5181d0(0x18e))/0xd;if(_0x4ae091===_0xa3f5ba)break;else _0x699869['push'](_0x699869['shift']());}catch(_0x2c1f5f){_0x699869['push'](_0x699869['shift']());}}}(a98_0x20c6,0x88ec5));const a98_0x4bc939=(function(){let _0x168856=!![];return function(_0x392c79,_0x258fbc){const _0x479408=_0x168856?function(){if(_0x258fbc){const _0x5ae46e=_0x258fbc['apply'](_0x392c79,arguments);return _0x258fbc=null,_0x5ae46e;}}:function(){};return _0x168856=![],_0x479408;};}()),a98_0x11917c=a98_0x4bc939(this,function(){const _0x29b210=a98_0x8b6a;return a98_0x11917c['toString']()[_0x29b210(0x181)](_0x29b210(0x16b))['toString']()['constructor'](a98_0x11917c)['search'](_0x29b210(0x16b));});a98_0x11917c();'use strict';var __importDefault=this&&this[a98_0x1b53f7(0x155)]||function(_0x523240){return _0x523240&&_0x523240['__esModule']?_0x523240:{'default':_0x523240};};Object[a98_0x1b53f7(0x180)](exports,a98_0x1b53f7(0x179),{'value':!![]}),exports[a98_0x1b53f7(0x18f)]=void 0x0;function a98_0x8b6a(_0x242681,_0x5a34fe){const _0x576de4=a98_0x20c6();return a98_0x8b6a=function(_0x11917c,_0x4bc939){_0x11917c=_0x11917c-0x151;let _0x20c613=_0x576de4[_0x11917c];return _0x20c613;},a98_0x8b6a(_0x242681,_0x5a34fe);}const path_1=__importDefault(require('path')),core_1=require('../../../core'),fs_internal_1=require(a98_0x1b53f7(0x16c)),invalid_xml_error_1=require(a98_0x1b53f7(0x15f)),xml_1=require(a98_0x1b53f7(0x163)),zip_1=require(a98_0x1b53f7(0x182)),child_types_1=__importDefault(require(a98_0x1b53f7(0x151)));class MDApiWriter{constructor({components:_0x3e79cc,sourceDir:_0x684ba4,skipChildErrors:_0x3e0d5a}){const _0x4cbe1e=a98_0x1b53f7;this[_0x4cbe1e(0x158)]=0x64,this[_0x4cbe1e(0x177)]={},this[_0x4cbe1e(0x154)]=new core_1[(_0x4cbe1e(0x15e))](MDApiWriter['name']),this[_0x4cbe1e(0x17f)]=_0x3e79cc,this[_0x4cbe1e(0x17a)]=_0x684ba4,this[_0x4cbe1e(0x176)]=_0x3e0d5a;}async[a98_0x1b53f7(0x17d)](_0x33d292,_0x5d85e2=![]){const _0x322f3f=a98_0x1b53f7,_0x19af9c=await zip_1[_0x322f3f(0x18a)][_0x322f3f(0x170)](_0x33d292),_0x36eb7c=[];for(const _0x3d1a38 of Object[_0x322f3f(0x185)](_0x19af9c['files'])){!_0x19af9c['files'][_0x3d1a38][_0x322f3f(0x17b)]&&_0x36eb7c[_0x322f3f(0x194)]({'filename':_0x3d1a38,'body':await _0x19af9c[_0x322f3f(0x17e)][_0x3d1a38][_0x322f3f(0x159)](_0x5d85e2?_0x322f3f(0x175):_0x322f3f(0x18c))});}return _0x36eb7c;}async[a98_0x1b53f7(0x16a)](_0x42cb34){const _0x4e5eba=a98_0x1b53f7;try{const _0x233474=await this[_0x4e5eba(0x17d)](_0x42cb34['body'],!![]);await Promise[_0x4e5eba(0x178)](_0x233474[_0x4e5eba(0x184)](({filename:_0xb52f7d,body:_0x1e0c61})=>fs_internal_1['FS'][_0x4e5eba(0x15d)](path_1[_0x4e5eba(0x162)][_0x4e5eba(0x189)](this[_0x4e5eba(0x17a)],_0xb52f7d),_0x1e0c61)));}catch(_0x648a1c){throw new Error(_0x4e5eba(0x172)+_0x42cb34['fileName']+'\x20['+_0x42cb34['fileType']+'].\x20Original\x20error:\x20'+_0x648a1c);}}[a98_0x1b53f7(0x156)](_0xfc0a33,_0x461590){const _0x4e9ff8=a98_0x1b53f7;throw new invalid_xml_error_1[(_0x4e9ff8(0x153))](_0x4e9ff8(0x152)+_0x461590[_0x4e9ff8(0x15b)]+'\x20['+_0x461590[_0x4e9ff8(0x192)]+'].\x20Original\x20error:\x20'+_0xfc0a33);}async[a98_0x1b53f7(0x157)](_0x4a301a){const _0x433e3a=a98_0x1b53f7,{filename:_0x263f80,body:_0x1d79a3}=(await this['readZip'](_0x4a301a[_0x433e3a(0x16f)]))[0x0];try{if(!this[_0x433e3a(0x177)][_0x263f80]){const _0x58469b=path_1[_0x433e3a(0x162)]['join'](this[_0x433e3a(0x17a)],_0x263f80);if(await fs_internal_1['FS']['exists'](_0x58469b)){const _0x4e1082=await fs_internal_1['FS'][_0x433e3a(0x161)](_0x58469b);this[_0x433e3a(0x177)][_0x263f80]=await xml_1[_0x433e3a(0x166)]['parse'](_0x4e1082)['catch'](_0x31068f=>this['handleXmlParsingError'](_0x31068f,_0x4a301a));}else{this['parentComponents'][_0x263f80]=await xml_1['Xml'][_0x433e3a(0x190)](_0x1d79a3)[_0x433e3a(0x15c)](_0x17c2bc=>this[_0x433e3a(0x156)](_0x17c2bc,_0x4a301a));return;}}const _0xe7ac16=this['parentComponents'][_0x263f80],_0x530449=await xml_1[_0x433e3a(0x166)]['parse'](_0x1d79a3)['catch'](_0x5d2ded=>this['handleXmlParsingError'](_0x5d2ded,_0x4a301a));xml_1['Xml'][_0x433e3a(0x18d)](_0xe7ac16,_0x530449);}catch(_0x97400a){if(_0x97400a instanceof invalid_xml_error_1[_0x433e3a(0x153)]){if(this[_0x433e3a(0x176)])return;else throw _0x97400a;}throw new Error(_0x433e3a(0x188)+_0x4a301a['fileName']+'\x20['+_0x4a301a[_0x433e3a(0x192)]+_0x433e3a(0x174)+_0x97400a);}}async[a98_0x1b53f7(0x165)](){const _0x44073e=a98_0x1b53f7;!await fs_internal_1['FS'][_0x44073e(0x16e)](this[_0x44073e(0x17a)])&&await fs_internal_1['FS'][_0x44073e(0x167)](this[_0x44073e(0x17a)]);for(const _0x29121d of this['components']){!child_types_1[_0x44073e(0x162)][_0x44073e(0x191)](_0x29121d[_0x44073e(0x192)])?await this[_0x44073e(0x16a)](_0x29121d):await this[_0x44073e(0x157)](_0x29121d);}const _0x12a7d7=Object['keys'](this[_0x44073e(0x177)]);this['internalLogger'][_0x44073e(0x160)](_0x44073e(0x169),this[_0x44073e(0x17f)][_0x44073e(0x164)]);while(_0x12a7d7[_0x44073e(0x164)]){const _0x4162f0=_0x12a7d7[_0x44073e(0x187)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x168f04 of _0x4162f0){await fs_internal_1['FS'][_0x44073e(0x15d)](path_1[_0x44073e(0x162)]['join'](this['sourceDir'],_0x168f04),xml_1[_0x44073e(0x166)][_0x44073e(0x173)](this[_0x44073e(0x177)][_0x168f04]));}}this[_0x44073e(0x177)]={};}}function a98_0x20c6(){const _0x1ddb5d=['exists','body','unzip','84293EQxLtQ','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','convertToString','].\x20Original\x20error:\x20','nodebuffer','skipChildErrors','parentComponents','all','__esModule','sourceDir','dir','73677vbVOEN','readZip','files','components','defineProperty','search','../utils/zip','52BOfPCv','map','keys','33RGSBnk','splice','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','join','Zip','20nHgdMS','text','replaceOrAppend','6877611qwnZuy','MDApiWriter','parse','includes','fileType','67963huKkEU','push','168WLbjnO','743292diNouv','667971ctNUYs','../data/child-types','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','InvalidXmlError','internalLogger','__importDefault','handleXmlParsingError','writeChild','MAX_WRITES_PER_TICK','async','22HMCNLO','fileName','catch','writeFile','Logger','../errors/invalid-xml.error','log','readFile','default','../utils/xml','length','start','Xml','makeDir','48HmhCgK','have\x20to\x20write\x20%d\x20files','writeParent','(((.+)+)+)+$','../../internal/fs.internal','197140JlDxPb'];a98_0x20c6=function(){return _0x1ddb5d;};return a98_0x20c6();}exports[a98_0x1b53f7(0x18f)]=MDApiWriter;