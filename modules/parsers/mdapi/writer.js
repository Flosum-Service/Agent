function a98_0x5b44(){const _0x4e0340=['toString','10QHYMkN','length','__importDefault','text','writeFile','1525584AtVOny','parentComponents','Zip','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','path','handleXmlParsingError','MDApiWriter','splice','makeDir','1bMZtDV','4diwjCi','9205361mtaVto','includes','346002FodIsr','fileName','../data/child-types','defineProperty','../errors/invalid-xml.error','readZip','join','../../../core','../utils/zip','dir','exists','skipChildErrors','Xml','components','map','start','internalLogger','all','28PmSvdV','catch','replaceOrAppend','736940GjpJRL','parse','1897576UxvWIg','unzip','__esModule','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','search','nodebuffer','sourceDir','972726GMHKwe','InvalidXmlError','1934037AGGZuM','default','MAX_WRITES_PER_TICK','files','push','writeChild','fileType','constructor','keys','body','].\x20Original\x20error:\x20'];a98_0x5b44=function(){return _0x4e0340;};return a98_0x5b44();}const a98_0x3de3bf=a98_0x27ff;(function(_0x18912d,_0x216340){const _0x25e9fa=a98_0x27ff,_0x309a78=_0x18912d();while(!![]){try{const _0x191d98=-parseInt(_0x25e9fa(0xf5))/0x1*(parseInt(_0x25e9fa(0x117))/0x2)+parseInt(_0x25e9fa(0xec))/0x3+-parseInt(_0x25e9fa(0xf6))/0x4*(-parseInt(_0x25e9fa(0x10e))/0x5)+parseInt(_0x25e9fa(0xf9))/0x6*(-parseInt(_0x25e9fa(0x10b))/0x7)+-parseInt(_0x25e9fa(0x110))/0x8+-parseInt(_0x25e9fa(0x119))/0x9*(parseInt(_0x25e9fa(0xe7))/0xa)+parseInt(_0x25e9fa(0xf7))/0xb;if(_0x191d98===_0x216340)break;else _0x309a78['push'](_0x309a78['shift']());}catch(_0x2932cd){_0x309a78['push'](_0x309a78['shift']());}}}(a98_0x5b44,0x4f03e));const a98_0x1ff295=(function(){let _0x3f64cf=!![];return function(_0x1d675b,_0x3c8769){const _0x347ae2=_0x3f64cf?function(){if(_0x3c8769){const _0x271fcb=_0x3c8769['apply'](_0x1d675b,arguments);return _0x3c8769=null,_0x271fcb;}}:function(){};return _0x3f64cf=![],_0x347ae2;};}()),a98_0x81aebb=a98_0x1ff295(this,function(){const _0x52ab97=a98_0x27ff;return a98_0x81aebb[_0x52ab97(0xe6)]()['search']('(((.+)+)+)+$')[_0x52ab97(0xe6)]()[_0x52ab97(0xe2)](a98_0x81aebb)[_0x52ab97(0x114)]('(((.+)+)+)+$');});a98_0x81aebb();function a98_0x27ff(_0x280bb3,_0x56b53c){const _0x25caed=a98_0x5b44();return a98_0x27ff=function(_0x81aebb,_0x1ff295){_0x81aebb=_0x81aebb-0xdd;let _0x5b44b3=_0x25caed[_0x81aebb];return _0x5b44b3;},a98_0x27ff(_0x280bb3,_0x56b53c);}'use strict';var __importDefault=this&&this[a98_0x3de3bf(0xe9)]||function(_0x36e06b){const _0x4a0ea9=a98_0x3de3bf;return _0x36e06b&&_0x36e06b[_0x4a0ea9(0x112)]?_0x36e06b:{'default':_0x36e06b};};Object[a98_0x3de3bf(0xfc)](exports,a98_0x3de3bf(0x112),{'value':!![]}),exports[a98_0x3de3bf(0xf2)]=void 0x0;const path_1=__importDefault(require(a98_0x3de3bf(0xf0))),core_1=require(a98_0x3de3bf(0x100)),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require(a98_0x3de3bf(0xfd)),xml_1=require('../utils/xml'),zip_1=require(a98_0x3de3bf(0x101)),child_types_1=__importDefault(require(a98_0x3de3bf(0xfb)));class MDApiWriter{constructor({components:_0x5f2a41,sourceDir:_0x4c5b95,skipChildErrors:_0x41dc20}){const _0x322c76=a98_0x3de3bf;this['MAX_WRITES_PER_TICK']=0x64,this[_0x322c76(0xed)]={},this[_0x322c76(0x109)]=new core_1['Logger'](MDApiWriter['name']),this[_0x322c76(0x106)]=_0x5f2a41,this[_0x322c76(0x116)]=_0x4c5b95,this['skipChildErrors']=_0x41dc20;}async[a98_0x3de3bf(0xfe)](_0x380960,_0x8a14ad=![]){const _0x472f1c=a98_0x3de3bf,_0x393cdd=await zip_1[_0x472f1c(0xee)][_0x472f1c(0x111)](_0x380960),_0x2c3a12=[];for(const _0xb2521a of Object[_0x472f1c(0xe3)](_0x393cdd[_0x472f1c(0xde)])){!_0x393cdd[_0x472f1c(0xde)][_0xb2521a][_0x472f1c(0x102)]&&_0x2c3a12[_0x472f1c(0xdf)]({'filename':_0xb2521a,'body':await _0x393cdd[_0x472f1c(0xde)][_0xb2521a]['async'](_0x8a14ad?_0x472f1c(0x115):_0x472f1c(0xea))});}return _0x2c3a12;}async['writeParent'](_0x3c64fc){const _0x1983f3=a98_0x3de3bf;try{const _0x17a93d=await this['readZip'](_0x3c64fc[_0x1983f3(0xe4)],!![]);await Promise[_0x1983f3(0x10a)](_0x17a93d[_0x1983f3(0x107)](({filename:_0x3320f0,body:_0x332880})=>fs_internal_1['FS'][_0x1983f3(0xeb)](path_1['default'][_0x1983f3(0xff)](this[_0x1983f3(0x116)],_0x3320f0),_0x332880)));}catch(_0x5aee0f){throw new Error(_0x1983f3(0xef)+_0x3c64fc[_0x1983f3(0xfa)]+'\x20['+_0x3c64fc[_0x1983f3(0xe1)]+_0x1983f3(0xe5)+_0x5aee0f);}}[a98_0x3de3bf(0xf1)](_0x49c688,_0x25d207){const _0x431830=a98_0x3de3bf;throw new invalid_xml_error_1[(_0x431830(0x118))]('[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20'+_0x25d207[_0x431830(0xfa)]+'\x20['+_0x25d207[_0x431830(0xe1)]+_0x431830(0xe5)+_0x49c688);}async[a98_0x3de3bf(0xe0)](_0x37af5f){const _0xa5bcab=a98_0x3de3bf,{filename:_0x111a24,body:_0x3cac5c}=(await this['readZip'](_0x37af5f[_0xa5bcab(0xe4)]))[0x0];try{if(!this[_0xa5bcab(0xed)][_0x111a24]){const _0x1fd94a=path_1['default'][_0xa5bcab(0xff)](this['sourceDir'],_0x111a24);if(await fs_internal_1['FS'][_0xa5bcab(0x103)](_0x1fd94a)){const _0x1473be=await fs_internal_1['FS']['readFile'](_0x1fd94a);this[_0xa5bcab(0xed)][_0x111a24]=await xml_1[_0xa5bcab(0x105)][_0xa5bcab(0x10f)](_0x1473be)[_0xa5bcab(0x10c)](_0x5c1ba3=>this['handleXmlParsingError'](_0x5c1ba3,_0x37af5f));}else{this[_0xa5bcab(0xed)][_0x111a24]=await xml_1[_0xa5bcab(0x105)][_0xa5bcab(0x10f)](_0x3cac5c)[_0xa5bcab(0x10c)](_0x285f43=>this[_0xa5bcab(0xf1)](_0x285f43,_0x37af5f));return;}}const _0x44c445=this[_0xa5bcab(0xed)][_0x111a24],_0x163dc0=await xml_1[_0xa5bcab(0x105)]['parse'](_0x3cac5c)[_0xa5bcab(0x10c)](_0x42d9c7=>this[_0xa5bcab(0xf1)](_0x42d9c7,_0x37af5f));xml_1[_0xa5bcab(0x105)][_0xa5bcab(0x10d)](_0x44c445,_0x163dc0);}catch(_0x27501c){if(_0x27501c instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0xa5bcab(0x104)])return;else throw _0x27501c;}throw new Error(_0xa5bcab(0x113)+_0x37af5f[_0xa5bcab(0xfa)]+'\x20['+_0x37af5f[_0xa5bcab(0xe1)]+'].\x20Original\x20error:\x20'+_0x27501c);}}async[a98_0x3de3bf(0x108)](){const _0x5633d4=a98_0x3de3bf;!await fs_internal_1['FS']['exists'](this[_0x5633d4(0x116)])&&await fs_internal_1['FS'][_0x5633d4(0xf4)](this[_0x5633d4(0x116)]);for(const _0x2f0ac6 of this[_0x5633d4(0x106)]){!child_types_1['default'][_0x5633d4(0xf8)](_0x2f0ac6[_0x5633d4(0xe1)])?await this['writeParent'](_0x2f0ac6):await this[_0x5633d4(0xe0)](_0x2f0ac6);}const _0x9ad81f=Object[_0x5633d4(0xe3)](this[_0x5633d4(0xed)]);this['internalLogger']['log']('have\x20to\x20write\x20%d\x20files',this[_0x5633d4(0x106)][_0x5633d4(0xe8)]);while(_0x9ad81f[_0x5633d4(0xe8)]){const _0x5e95fc=_0x9ad81f[_0x5633d4(0xf3)](0x0,this[_0x5633d4(0xdd)]);for(const _0x47b432 of _0x5e95fc){await fs_internal_1['FS'][_0x5633d4(0xeb)](path_1[_0x5633d4(0x11a)][_0x5633d4(0xff)](this[_0x5633d4(0x116)],_0x47b432),xml_1['Xml']['convertToString'](this[_0x5633d4(0xed)][_0x47b432]));}}this['parentComponents']={};}}exports[a98_0x3de3bf(0xf2)]=MDApiWriter;