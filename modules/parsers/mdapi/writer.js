const a97_0x19797e=a97_0x199b;function a97_0x199b(_0x42a0b3,_0x553781){const _0x466a0c=a97_0x43a6();return a97_0x199b=function(_0x3367ef,_0x41bda7){_0x3367ef=_0x3367ef-0x18d;let _0x43a68b=_0x466a0c[_0x3367ef];return _0x43a68b;},a97_0x199b(_0x42a0b3,_0x553781);}function a97_0x43a6(){const _0x550366=['readFile','handleXmlParsingError','MAX_WRITES_PER_TICK','map','11zYLJnq','259936OwoToK','async','MDApiWriter','search','3454968jrJgMK','fileName','1011836IfzwwI','log','catch','body','convertToString','279YEpuzV','../errors/invalid-xml.error','../utils/zip','includes','constructor','parentComponents','skipChildErrors','path','replaceOrAppend','push','unzip','writeChild','defineProperty','10098012ptzqQN','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','../data/child-types','../../../core','1931934rKVEJC','sourceDir','nodebuffer','../utils/xml','259YpUYNP','readZip','InvalidXmlError','all','].\x20Original\x20error:\x20','writeParent','files','397780lggZRN','components','splice','5EyBvLY','exists','Xml','text','(((.+)+)+)+$','112110veKgqt','__esModule','apply','fileType','internalLogger','join','length','default','1oaArAk','have\x20to\x20write\x20%d\x20files','start','parse','toString','makeDir','writeFile'];a97_0x43a6=function(){return _0x550366;};return a97_0x43a6();}(function(_0xca6a47,_0x5090b2){const _0x4550c7=a97_0x199b,_0x2cc73b=_0xca6a47();while(!![]){try{const _0x3e6b1a=-parseInt(_0x4550c7(0x1c8))/0x1*(-parseInt(_0x4550c7(0x1ad))/0x2)+-parseInt(_0x4550c7(0x194))/0x3+-parseInt(_0x4550c7(0x196))/0x4*(parseInt(_0x4550c7(0x1bb))/0x5)+-parseInt(_0x4550c7(0x1c0))/0x6*(parseInt(_0x4550c7(0x1b1))/0x7)+-parseInt(_0x4550c7(0x190))/0x8*(-parseInt(_0x4550c7(0x19b))/0x9)+parseInt(_0x4550c7(0x1b8))/0xa+parseInt(_0x4550c7(0x18f))/0xb*(parseInt(_0x4550c7(0x1a8))/0xc);if(_0x3e6b1a===_0x5090b2)break;else _0x2cc73b['push'](_0x2cc73b['shift']());}catch(_0xd48a04){_0x2cc73b['push'](_0x2cc73b['shift']());}}}(a97_0x43a6,0xb930a));const a97_0x41bda7=(function(){let _0x6ecdb3=!![];return function(_0x39d0c4,_0x58bdd0){const _0x314a67=_0x6ecdb3?function(){const _0x5ec5a6=a97_0x199b;if(_0x58bdd0){const _0x1819bc=_0x58bdd0[_0x5ec5a6(0x1c2)](_0x39d0c4,arguments);return _0x58bdd0=null,_0x1819bc;}}:function(){};return _0x6ecdb3=![],_0x314a67;};}()),a97_0x3367ef=a97_0x41bda7(this,function(){const _0x54d747=a97_0x199b;return a97_0x3367ef[_0x54d747(0x1cc)]()[_0x54d747(0x193)](_0x54d747(0x1bf))[_0x54d747(0x1cc)]()[_0x54d747(0x19f)](a97_0x3367ef)[_0x54d747(0x193)](_0x54d747(0x1bf));});a97_0x3367ef();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4873bd){return _0x4873bd&&_0x4873bd['__esModule']?_0x4873bd:{'default':_0x4873bd};};Object[a97_0x19797e(0x1a7)](exports,a97_0x19797e(0x1c1),{'value':!![]}),exports[a97_0x19797e(0x192)]=void 0x0;const path_1=__importDefault(require(a97_0x19797e(0x1a2))),core_1=require(a97_0x19797e(0x1ac)),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require(a97_0x19797e(0x19c)),xml_1=require(a97_0x19797e(0x1b0)),zip_1=require(a97_0x19797e(0x19d)),child_types_1=__importDefault(require(a97_0x19797e(0x1ab)));class MDApiWriter{constructor({components:_0x5b6e61,sourceDir:_0x581864,skipChildErrors:_0x44bec4}){const _0x515a7e=a97_0x19797e;this[_0x515a7e(0x18d)]=0x64,this['parentComponents']={},this['internalLogger']=new core_1['Logger'](MDApiWriter['name']),this[_0x515a7e(0x1b9)]=_0x5b6e61,this[_0x515a7e(0x1ae)]=_0x581864,this[_0x515a7e(0x1a1)]=_0x44bec4;}async['readZip'](_0xaf2205,_0x3a04af=![]){const _0x8dd8da=a97_0x19797e,_0x477a46=await zip_1['Zip'][_0x8dd8da(0x1a5)](_0xaf2205),_0x3d33b7=[];for(const _0x161dd3 of Object['keys'](_0x477a46[_0x8dd8da(0x1b7)])){!_0x477a46[_0x8dd8da(0x1b7)][_0x161dd3]['dir']&&_0x3d33b7[_0x8dd8da(0x1a4)]({'filename':_0x161dd3,'body':await _0x477a46['files'][_0x161dd3][_0x8dd8da(0x191)](_0x3a04af?_0x8dd8da(0x1af):_0x8dd8da(0x1be))});}return _0x3d33b7;}async[a97_0x19797e(0x1b6)](_0x4e1137){const _0x5dabae=a97_0x19797e;try{const _0xf41277=await this[_0x5dabae(0x1b2)](_0x4e1137[_0x5dabae(0x199)],!![]);await Promise[_0x5dabae(0x1b4)](_0xf41277[_0x5dabae(0x18e)](({filename:_0x343264,body:_0x11edd8})=>fs_internal_1['FS'][_0x5dabae(0x1ce)](path_1[_0x5dabae(0x1c7)][_0x5dabae(0x1c5)](this[_0x5dabae(0x1ae)],_0x343264),_0x11edd8)));}catch(_0x11d4eb){throw new Error(_0x5dabae(0x1aa)+_0x4e1137[_0x5dabae(0x195)]+'\x20['+_0x4e1137[_0x5dabae(0x1c3)]+'].\x20Original\x20error:\x20'+_0x11d4eb);}}[a97_0x19797e(0x1d0)](_0x3aa4f5,_0x7ae9ae){const _0x5eecbb=a97_0x19797e;throw new invalid_xml_error_1[(_0x5eecbb(0x1b3))](_0x5eecbb(0x1a9)+_0x7ae9ae[_0x5eecbb(0x195)]+'\x20['+_0x7ae9ae['fileType']+_0x5eecbb(0x1b5)+_0x3aa4f5);}async['writeChild'](_0x2f4ac5){const _0x583d68=a97_0x19797e,{filename:_0x2a09b4,body:_0x128d32}=(await this[_0x583d68(0x1b2)](_0x2f4ac5[_0x583d68(0x199)]))[0x0];try{if(!this[_0x583d68(0x1a0)][_0x2a09b4]){const _0x5755c9=path_1[_0x583d68(0x1c7)][_0x583d68(0x1c5)](this[_0x583d68(0x1ae)],_0x2a09b4);if(await fs_internal_1['FS'][_0x583d68(0x1bc)](_0x5755c9)){const _0x349749=await fs_internal_1['FS'][_0x583d68(0x1cf)](_0x5755c9);this['parentComponents'][_0x2a09b4]=await xml_1['Xml'][_0x583d68(0x1cb)](_0x349749)[_0x583d68(0x198)](_0xc50a37=>this[_0x583d68(0x1d0)](_0xc50a37,_0x2f4ac5));}else{this[_0x583d68(0x1a0)][_0x2a09b4]=await xml_1[_0x583d68(0x1bd)]['parse'](_0x128d32)[_0x583d68(0x198)](_0x1f7be8=>this[_0x583d68(0x1d0)](_0x1f7be8,_0x2f4ac5));return;}}const _0x4660f0=this[_0x583d68(0x1a0)][_0x2a09b4],_0xabeb9f=await xml_1[_0x583d68(0x1bd)][_0x583d68(0x1cb)](_0x128d32)[_0x583d68(0x198)](_0x10086c=>this[_0x583d68(0x1d0)](_0x10086c,_0x2f4ac5));xml_1[_0x583d68(0x1bd)][_0x583d68(0x1a3)](_0x4660f0,_0xabeb9f);}catch(_0x399254){if(_0x399254 instanceof invalid_xml_error_1[_0x583d68(0x1b3)]){if(this[_0x583d68(0x1a1)])return;else throw _0x399254;}throw new Error('[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x2f4ac5[_0x583d68(0x195)]+'\x20['+_0x2f4ac5[_0x583d68(0x1c3)]+_0x583d68(0x1b5)+_0x399254);}}async[a97_0x19797e(0x1ca)](){const _0x3a8294=a97_0x19797e;!await fs_internal_1['FS'][_0x3a8294(0x1bc)](this[_0x3a8294(0x1ae)])&&await fs_internal_1['FS'][_0x3a8294(0x1cd)](this[_0x3a8294(0x1ae)]);for(const _0x4a0685 of this['components']){!child_types_1[_0x3a8294(0x1c7)][_0x3a8294(0x19e)](_0x4a0685[_0x3a8294(0x1c3)])?await this['writeParent'](_0x4a0685):await this[_0x3a8294(0x1a6)](_0x4a0685);}const _0x290ad0=Object['keys'](this[_0x3a8294(0x1a0)]);this[_0x3a8294(0x1c4)][_0x3a8294(0x197)](_0x3a8294(0x1c9),this['components'][_0x3a8294(0x1c6)]);while(_0x290ad0[_0x3a8294(0x1c6)]){const _0x40976e=_0x290ad0[_0x3a8294(0x1ba)](0x0,this[_0x3a8294(0x18d)]);for(const _0x1f2c8c of _0x40976e){await fs_internal_1['FS'][_0x3a8294(0x1ce)](path_1[_0x3a8294(0x1c7)][_0x3a8294(0x1c5)](this[_0x3a8294(0x1ae)],_0x1f2c8c),xml_1[_0x3a8294(0x1bd)][_0x3a8294(0x19a)](this[_0x3a8294(0x1a0)][_0x1f2c8c]));}}this['parentComponents']={};}}exports[a97_0x19797e(0x192)]=MDApiWriter;