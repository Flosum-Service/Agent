const a98_0x2cd4bb=a98_0x5df3;(function(_0x57010a,_0x5d9c40){const _0x2557fc=a98_0x5df3,_0x149643=_0x57010a();while(!![]){try{const _0x98a8=-parseInt(_0x2557fc(0x169))/0x1*(-parseInt(_0x2557fc(0x180))/0x2)+parseInt(_0x2557fc(0x17c))/0x3*(-parseInt(_0x2557fc(0x175))/0x4)+parseInt(_0x2557fc(0x18e))/0x5*(-parseInt(_0x2557fc(0x197))/0x6)+-parseInt(_0x2557fc(0x17a))/0x7+parseInt(_0x2557fc(0x165))/0x8+-parseInt(_0x2557fc(0x185))/0x9+-parseInt(_0x2557fc(0x1a3))/0xa*(-parseInt(_0x2557fc(0x19a))/0xb);if(_0x98a8===_0x5d9c40)break;else _0x149643['push'](_0x149643['shift']());}catch(_0x2bcecd){_0x149643['push'](_0x149643['shift']());}}}(a98_0x32e8,0x7166e));const a98_0x48a274=(function(){let _0xf18608=!![];return function(_0x43c593,_0x363e9e){const _0x3f43c8=_0xf18608?function(){const _0x373004=a98_0x5df3;if(_0x363e9e){const _0x2d1a66=_0x363e9e[_0x373004(0x1a7)](_0x43c593,arguments);return _0x363e9e=null,_0x2d1a66;}}:function(){};return _0xf18608=![],_0x3f43c8;};}()),a98_0x315aa9=a98_0x48a274(this,function(){const _0x5df571=a98_0x5df3;return a98_0x315aa9[_0x5df571(0x17f)]()[_0x5df571(0x1a6)](_0x5df571(0x16a))[_0x5df571(0x17f)]()[_0x5df571(0x18d)](a98_0x315aa9)[_0x5df571(0x1a6)](_0x5df571(0x16a));});a98_0x315aa9();function a98_0x5df3(_0x1f229f,_0x4466e1){const _0x2e8d9b=a98_0x32e8();return a98_0x5df3=function(_0x315aa9,_0x48a274){_0x315aa9=_0x315aa9-0x163;let _0x32e875=_0x2e8d9b[_0x315aa9];return _0x32e875;},a98_0x5df3(_0x1f229f,_0x4466e1);}'use strict';var __importDefault=this&&this[a98_0x2cd4bb(0x16e)]||function(_0x51f6c6){const _0x597e2a=a98_0x2cd4bb;return _0x51f6c6&&_0x51f6c6[_0x597e2a(0x170)]?_0x51f6c6:{'default':_0x51f6c6};};Object['defineProperty'](exports,a98_0x2cd4bb(0x170),{'value':!![]}),exports[a98_0x2cd4bb(0x173)]=void 0x0;const path_1=__importDefault(require(a98_0x2cd4bb(0x198))),core_1=require(a98_0x2cd4bb(0x19d)),fs_internal_1=require(a98_0x2cd4bb(0x184)),invalid_xml_error_1=require(a98_0x2cd4bb(0x16d)),xml_1=require(a98_0x2cd4bb(0x166)),zip_1=require(a98_0x2cd4bb(0x16c)),child_types_1=__importDefault(require(a98_0x2cd4bb(0x199)));class MDApiWriter{constructor({components:_0x567aff,sourceDir:_0x178e1d,skipChildErrors:_0x3b93cb}){const _0x4dd268=a98_0x2cd4bb;this['MAX_WRITES_PER_TICK']=0x64,this[_0x4dd268(0x191)]={},this[_0x4dd268(0x1a8)]=new core_1[(_0x4dd268(0x187))](MDApiWriter[_0x4dd268(0x167)]),this[_0x4dd268(0x18f)]=_0x567aff,this[_0x4dd268(0x18a)]=_0x178e1d,this[_0x4dd268(0x1a5)]=_0x3b93cb;}async['readZip'](_0x2f4c2,_0x330d2a=![]){const _0x204c6c=a98_0x2cd4bb,_0x3981db=await zip_1[_0x204c6c(0x164)][_0x204c6c(0x171)](_0x2f4c2),_0x115b53=[];for(const _0x4911d3 of Object[_0x204c6c(0x189)](_0x3981db[_0x204c6c(0x1a1)])){!_0x3981db[_0x204c6c(0x1a1)][_0x4911d3][_0x204c6c(0x192)]&&_0x115b53[_0x204c6c(0x163)]({'filename':_0x4911d3,'body':await _0x3981db[_0x204c6c(0x1a1)][_0x4911d3][_0x204c6c(0x19e)](_0x330d2a?'nodebuffer':_0x204c6c(0x186))});}return _0x115b53;}async['writeParent'](_0x3b7b29){const _0x2d4a75=a98_0x2cd4bb;try{const _0x4268e9=await this[_0x2d4a75(0x182)](_0x3b7b29['body'],!![]);await Promise[_0x2d4a75(0x1a4)](_0x4268e9[_0x2d4a75(0x178)](({filename:_0x4cbb1c,body:_0x475b1d})=>fs_internal_1['FS'][_0x2d4a75(0x172)](path_1[_0x2d4a75(0x16f)]['join'](this['sourceDir'],_0x4cbb1c),_0x475b1d)));}catch(_0x359722){throw new Error(_0x2d4a75(0x194)+_0x3b7b29['fileName']+'\x20['+_0x3b7b29[_0x2d4a75(0x17e)]+_0x2d4a75(0x190)+_0x359722);}}[a98_0x2cd4bb(0x18b)](_0x5126dd,_0xd73e5e){const _0x1f8f55=a98_0x2cd4bb;throw new invalid_xml_error_1[(_0x1f8f55(0x17b))](_0x1f8f55(0x176)+_0xd73e5e[_0x1f8f55(0x19f)]+'\x20['+_0xd73e5e[_0x1f8f55(0x17e)]+_0x1f8f55(0x190)+_0x5126dd);}async['writeChild'](_0x32b4ce){const _0x345aa4=a98_0x2cd4bb,{filename:_0x39307c,body:_0x298e39}=(await this[_0x345aa4(0x182)](_0x32b4ce[_0x345aa4(0x181)]))[0x0];try{if(!this[_0x345aa4(0x191)][_0x39307c]){const _0xfa1d1d=path_1[_0x345aa4(0x16f)][_0x345aa4(0x188)](this[_0x345aa4(0x18a)],_0x39307c);if(await fs_internal_1['FS']['exists'](_0xfa1d1d)){const _0x1449b9=await fs_internal_1['FS'][_0x345aa4(0x196)](_0xfa1d1d);this[_0x345aa4(0x191)][_0x39307c]=await xml_1['Xml'][_0x345aa4(0x1a0)](_0x1449b9)[_0x345aa4(0x177)](_0x3cfa66=>this[_0x345aa4(0x18b)](_0x3cfa66,_0x32b4ce));}else{this[_0x345aa4(0x191)][_0x39307c]=await xml_1[_0x345aa4(0x19c)][_0x345aa4(0x1a0)](_0x298e39)[_0x345aa4(0x177)](_0x19ee25=>this[_0x345aa4(0x18b)](_0x19ee25,_0x32b4ce));return;}}const _0x2ba36d=this[_0x345aa4(0x191)][_0x39307c],_0x1dea3d=await xml_1[_0x345aa4(0x19c)][_0x345aa4(0x1a0)](_0x298e39)[_0x345aa4(0x177)](_0x57968a=>this[_0x345aa4(0x18b)](_0x57968a,_0x32b4ce));xml_1[_0x345aa4(0x19c)][_0x345aa4(0x17d)](_0x2ba36d,_0x1dea3d);}catch(_0xfe3b95){if(_0xfe3b95 instanceof invalid_xml_error_1[_0x345aa4(0x17b)]){if(this[_0x345aa4(0x1a5)])return;else throw _0xfe3b95;}throw new Error(_0x345aa4(0x174)+_0x32b4ce[_0x345aa4(0x19f)]+'\x20['+_0x32b4ce[_0x345aa4(0x17e)]+_0x345aa4(0x190)+_0xfe3b95);}}async[a98_0x2cd4bb(0x193)](){const _0x37d8d1=a98_0x2cd4bb;!await fs_internal_1['FS'][_0x37d8d1(0x19b)](this['sourceDir'])&&await fs_internal_1['FS'][_0x37d8d1(0x168)](this[_0x37d8d1(0x18a)]);for(const _0x9bfe73 of this['components']){!child_types_1['default']['includes'](_0x9bfe73[_0x37d8d1(0x17e)])?await this['writeParent'](_0x9bfe73):await this[_0x37d8d1(0x179)](_0x9bfe73);}const _0x36acdf=Object['keys'](this[_0x37d8d1(0x191)]);this[_0x37d8d1(0x1a8)][_0x37d8d1(0x195)](_0x37d8d1(0x18c),this['components'][_0x37d8d1(0x1a2)]);while(_0x36acdf[_0x37d8d1(0x1a2)]){const _0x1fbda9=_0x36acdf[_0x37d8d1(0x16b)](0x0,this[_0x37d8d1(0x183)]);for(const _0x596d9e of _0x1fbda9){await fs_internal_1['FS'][_0x37d8d1(0x172)](path_1[_0x37d8d1(0x16f)][_0x37d8d1(0x188)](this[_0x37d8d1(0x18a)],_0x596d9e),xml_1['Xml']['convertToString'](this[_0x37d8d1(0x191)][_0x596d9e]));}}this[_0x37d8d1(0x191)]={};}}function a98_0x32e8(){const _0xc1e7da=['readFile','12srrzVJ','path','../data/child-types','11IngwQQ','exists','Xml','../../../core','async','fileName','parse','files','length','15001530kuwMuR','all','skipChildErrors','search','apply','internalLogger','push','Zip','2770736wIMQsL','../utils/xml','name','makeDir','11lDqGsr','(((.+)+)+)+$','splice','../utils/zip','../errors/invalid-xml.error','__importDefault','default','__esModule','unzip','writeFile','MDApiWriter','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','160148OlGwVR','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','catch','map','writeChild','453103GumfjF','InvalidXmlError','15pafnmH','replaceOrAppend','fileType','toString','108362ZMCdyF','body','readZip','MAX_WRITES_PER_TICK','../../internal/fs.internal','8293176BtIDSx','text','Logger','join','keys','sourceDir','handleXmlParsingError','have\x20to\x20write\x20%d\x20files','constructor','1979035aSTzTx','components','].\x20Original\x20error:\x20','parentComponents','dir','start','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','log'];a98_0x32e8=function(){return _0xc1e7da;};return a98_0x32e8();}exports['MDApiWriter']=MDApiWriter;