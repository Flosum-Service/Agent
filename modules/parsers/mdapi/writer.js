const a97_0x469429=a97_0x5cf8;(function(_0x475985,_0x4863a7){const _0x5ba6d4=a97_0x5cf8,_0x37c972=_0x475985();while(!![]){try{const _0x55232e=-parseInt(_0x5ba6d4(0x214))/0x1*(parseInt(_0x5ba6d4(0x1fc))/0x2)+-parseInt(_0x5ba6d4(0x207))/0x3*(parseInt(_0x5ba6d4(0x1e9))/0x4)+-parseInt(_0x5ba6d4(0x1e2))/0x5+parseInt(_0x5ba6d4(0x1e3))/0x6*(-parseInt(_0x5ba6d4(0x1e7))/0x7)+-parseInt(_0x5ba6d4(0x21a))/0x8+-parseInt(_0x5ba6d4(0x1eb))/0x9*(-parseInt(_0x5ba6d4(0x219))/0xa)+parseInt(_0x5ba6d4(0x1f6))/0xb;if(_0x55232e===_0x4863a7)break;else _0x37c972['push'](_0x37c972['shift']());}catch(_0x3320c4){_0x37c972['push'](_0x37c972['shift']());}}}(a97_0x4261,0x3b252));const a97_0x1c5379=(function(){let _0x936f1a=!![];return function(_0x44f570,_0x3b5d8a){const _0x1034c4=_0x936f1a?function(){const _0x2ca756=a97_0x5cf8;if(_0x3b5d8a){const _0x564b43=_0x3b5d8a[_0x2ca756(0x20b)](_0x44f570,arguments);return _0x3b5d8a=null,_0x564b43;}}:function(){};return _0x936f1a=![],_0x1034c4;};}()),a97_0x9497db=a97_0x1c5379(this,function(){const _0x3fbe08=a97_0x5cf8;return a97_0x9497db['toString']()['search']('(((.+)+)+)+$')[_0x3fbe08(0x20c)]()['constructor'](a97_0x9497db)[_0x3fbe08(0x1fe)](_0x3fbe08(0x1f0));});a97_0x9497db();function a97_0x4261(){const _0x2c0e2e=['parentComponents','catch','(((.+)+)+)+$','files','../utils/zip','log','MDApiWriter','all','15328665eFDmpf','].\x20Original\x20error:\x20','../utils/xml','push','length','writeChild','8lwoeok','../errors/invalid-xml.error','search','exists','../../internal/fs.internal','join','parse','skipChildErrors','../data/child-types','dir','__esModule','543glSAqx','keys','InvalidXmlError','makeDir','apply','toString','replaceOrAppend','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','nodebuffer','fileType','fileName','sourceDir','writeParent','84676giKccq','default','__importDefault','internalLogger','Zip','230BwXuNZ','2400120sMDRTz','components','have\x20to\x20write\x20%d\x20files','path','Xml','start','1306580XBWSWO','288hpAdmg','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','writeFile','handleXmlParsingError','14084QIFOhP','MAX_WRITES_PER_TICK','6172kOaRcE','readZip','48771fehKXF','../../../core','body'];a97_0x4261=function(){return _0x2c0e2e;};return a97_0x4261();}function a97_0x5cf8(_0x122b07,_0x1a192f){const _0x2c9b72=a97_0x4261();return a97_0x5cf8=function(_0x9497db,_0x1c5379){_0x9497db=_0x9497db-0x1dd;let _0x42619b=_0x2c9b72[_0x9497db];return _0x42619b;},a97_0x5cf8(_0x122b07,_0x1a192f);}'use strict';var __importDefault=this&&this[a97_0x469429(0x216)]||function(_0x11e6d4){const _0x27807b=a97_0x469429;return _0x11e6d4&&_0x11e6d4[_0x27807b(0x206)]?_0x11e6d4:{'default':_0x11e6d4};};Object['defineProperty'](exports,a97_0x469429(0x206),{'value':!![]}),exports[a97_0x469429(0x1f4)]=void 0x0;const path_1=__importDefault(require(a97_0x469429(0x1df))),core_1=require(a97_0x469429(0x1ec)),fs_internal_1=require(a97_0x469429(0x200)),invalid_xml_error_1=require(a97_0x469429(0x1fd)),xml_1=require(a97_0x469429(0x1f8)),zip_1=require(a97_0x469429(0x1f2)),child_types_1=__importDefault(require(a97_0x469429(0x204)));class MDApiWriter{constructor({components:_0x10bef0,sourceDir:_0x1d46fa,skipChildErrors:_0x323dc7}){const _0x11d8d0=a97_0x469429;this[_0x11d8d0(0x1e8)]=0x64,this[_0x11d8d0(0x1ee)]={},this[_0x11d8d0(0x217)]=new core_1['Logger'](MDApiWriter['name']),this[_0x11d8d0(0x1dd)]=_0x10bef0,this[_0x11d8d0(0x212)]=_0x1d46fa,this['skipChildErrors']=_0x323dc7;}async[a97_0x469429(0x1ea)](_0x2f5049,_0x5cc1cd=![]){const _0x1ceabf=a97_0x469429,_0x18a187=await zip_1[_0x1ceabf(0x218)]['unzip'](_0x2f5049),_0x145fae=[];for(const _0x106e7c of Object[_0x1ceabf(0x208)](_0x18a187[_0x1ceabf(0x1f1)])){!_0x18a187[_0x1ceabf(0x1f1)][_0x106e7c][_0x1ceabf(0x205)]&&_0x145fae[_0x1ceabf(0x1f9)]({'filename':_0x106e7c,'body':await _0x18a187[_0x1ceabf(0x1f1)][_0x106e7c]['async'](_0x5cc1cd?_0x1ceabf(0x20f):'text')});}return _0x145fae;}async[a97_0x469429(0x213)](_0x29fcb1){const _0x5119bd=a97_0x469429;try{const _0x4d1f70=await this['readZip'](_0x29fcb1[_0x5119bd(0x1ed)],!![]);await Promise[_0x5119bd(0x1f5)](_0x4d1f70['map'](({filename:_0x248d64,body:_0xa851cd})=>fs_internal_1['FS']['writeFile'](path_1[_0x5119bd(0x215)][_0x5119bd(0x201)](this[_0x5119bd(0x212)],_0x248d64),_0xa851cd)));}catch(_0x3c1e84){throw new Error(_0x5119bd(0x1e4)+_0x29fcb1[_0x5119bd(0x211)]+'\x20['+_0x29fcb1[_0x5119bd(0x210)]+_0x5119bd(0x1f7)+_0x3c1e84);}}[a97_0x469429(0x1e6)](_0xe1207f,_0x12a0dd){const _0x308939=a97_0x469429;throw new invalid_xml_error_1[(_0x308939(0x209))]('[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20'+_0x12a0dd[_0x308939(0x211)]+'\x20['+_0x12a0dd[_0x308939(0x210)]+'].\x20Original\x20error:\x20'+_0xe1207f);}async[a97_0x469429(0x1fb)](_0x4c537f){const _0x58570c=a97_0x469429,{filename:_0x20e972,body:_0x5e0598}=(await this[_0x58570c(0x1ea)](_0x4c537f['body']))[0x0];try{if(!this[_0x58570c(0x1ee)][_0x20e972]){const _0x53e8e2=path_1[_0x58570c(0x215)][_0x58570c(0x201)](this[_0x58570c(0x212)],_0x20e972);if(await fs_internal_1['FS'][_0x58570c(0x1ff)](_0x53e8e2)){const _0xae84c=await fs_internal_1['FS']['readFile'](_0x53e8e2);this[_0x58570c(0x1ee)][_0x20e972]=await xml_1['Xml']['parse'](_0xae84c)['catch'](_0x588be2=>this[_0x58570c(0x1e6)](_0x588be2,_0x4c537f));}else{this['parentComponents'][_0x20e972]=await xml_1[_0x58570c(0x1e0)][_0x58570c(0x202)](_0x5e0598)['catch'](_0xb2882=>this['handleXmlParsingError'](_0xb2882,_0x4c537f));return;}}const _0x4bd8ba=this[_0x58570c(0x1ee)][_0x20e972],_0x5f2075=await xml_1[_0x58570c(0x1e0)][_0x58570c(0x202)](_0x5e0598)[_0x58570c(0x1ef)](_0x5c091a=>this[_0x58570c(0x1e6)](_0x5c091a,_0x4c537f));xml_1[_0x58570c(0x1e0)][_0x58570c(0x20d)](_0x4bd8ba,_0x5f2075);}catch(_0x1ec3e9){if(_0x1ec3e9 instanceof invalid_xml_error_1[_0x58570c(0x209)]){if(this[_0x58570c(0x203)])return;else throw _0x1ec3e9;}throw new Error(_0x58570c(0x20e)+_0x4c537f[_0x58570c(0x211)]+'\x20['+_0x4c537f[_0x58570c(0x210)]+'].\x20Original\x20error:\x20'+_0x1ec3e9);}}async[a97_0x469429(0x1e1)](){const _0x3a8868=a97_0x469429;!await fs_internal_1['FS'][_0x3a8868(0x1ff)](this[_0x3a8868(0x212)])&&await fs_internal_1['FS'][_0x3a8868(0x20a)](this[_0x3a8868(0x212)]);for(const _0x19fadb of this['components']){!child_types_1[_0x3a8868(0x215)]['includes'](_0x19fadb[_0x3a8868(0x210)])?await this['writeParent'](_0x19fadb):await this[_0x3a8868(0x1fb)](_0x19fadb);}const _0x1cc993=Object[_0x3a8868(0x208)](this[_0x3a8868(0x1ee)]);this['internalLogger'][_0x3a8868(0x1f3)](_0x3a8868(0x1de),this[_0x3a8868(0x1dd)][_0x3a8868(0x1fa)]);while(_0x1cc993['length']){const _0xbdd010=_0x1cc993['splice'](0x0,this[_0x3a8868(0x1e8)]);for(const _0x4cc0ae of _0xbdd010){await fs_internal_1['FS'][_0x3a8868(0x1e5)](path_1[_0x3a8868(0x215)]['join'](this[_0x3a8868(0x212)],_0x4cc0ae),xml_1[_0x3a8868(0x1e0)]['convertToString'](this['parentComponents'][_0x4cc0ae]));}}this['parentComponents']={};}}exports[a97_0x469429(0x1f4)]=MDApiWriter;