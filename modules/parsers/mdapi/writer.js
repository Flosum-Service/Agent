const a98_0x1dfea4=a98_0x1b82;(function(_0x6235f,_0x47ad88){const _0xdaccf7=a98_0x1b82,_0x3e3850=_0x6235f();while(!![]){try{const _0x46e6dc=parseInt(_0xdaccf7(0x114))/0x1+parseInt(_0xdaccf7(0xf8))/0x2+-parseInt(_0xdaccf7(0xe6))/0x3+-parseInt(_0xdaccf7(0xf6))/0x4+-parseInt(_0xdaccf7(0x103))/0x5*(parseInt(_0xdaccf7(0xf7))/0x6)+parseInt(_0xdaccf7(0xfa))/0x7+parseInt(_0xdaccf7(0xfd))/0x8;if(_0x46e6dc===_0x47ad88)break;else _0x3e3850['push'](_0x3e3850['shift']());}catch(_0x5ee311){_0x3e3850['push'](_0x3e3850['shift']());}}}(a98_0x375b,0xe62bd));const a98_0x367884=(function(){let _0x85c3d8=!![];return function(_0x5dc7a1,_0x2d3847){const _0x4281c3=_0x85c3d8?function(){const _0x3aaba3=a98_0x1b82;if(_0x2d3847){const _0x2c1ea8=_0x2d3847[_0x3aaba3(0x10e)](_0x5dc7a1,arguments);return _0x2d3847=null,_0x2c1ea8;}}:function(){};return _0x85c3d8=![],_0x4281c3;};}()),a98_0x1f1f4c=a98_0x367884(this,function(){const _0x13366b=a98_0x1b82;return a98_0x1f1f4c[_0x13366b(0xe7)]()[_0x13366b(0xde)](_0x13366b(0xe8))[_0x13366b(0xe7)]()['constructor'](a98_0x1f1f4c)[_0x13366b(0xde)](_0x13366b(0xe8));});a98_0x1f1f4c();'use strict';var __importDefault=this&&this[a98_0x1dfea4(0xf0)]||function(_0x55d50b){const _0x4f0a6c=a98_0x1dfea4;return _0x55d50b&&_0x55d50b[_0x4f0a6c(0xf5)]?_0x55d50b:{'default':_0x55d50b};};Object[a98_0x1dfea4(0x110)](exports,a98_0x1dfea4(0xf5),{'value':!![]}),exports[a98_0x1dfea4(0x102)]=void 0x0;const path_1=__importDefault(require('path')),core_1=require(a98_0x1dfea4(0xff)),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require(a98_0x1dfea4(0xe5)),xml_1=require(a98_0x1dfea4(0xdd)),zip_1=require('../utils/zip'),child_types_1=__importDefault(require(a98_0x1dfea4(0xe0)));function a98_0x1b82(_0x3bab1b,_0x116055){const _0x1d80ff=a98_0x375b();return a98_0x1b82=function(_0x1f1f4c,_0x367884){_0x1f1f4c=_0x1f1f4c-0xdb;let _0x375b3b=_0x1d80ff[_0x1f1f4c];return _0x375b3b;},a98_0x1b82(_0x3bab1b,_0x116055);}class MDApiWriter{constructor({components:_0x535cf7,sourceDir:_0x266446,skipChildErrors:_0x4378a2}){const _0x3aa3fa=a98_0x1dfea4;this['MAX_WRITES_PER_TICK']=0x64,this[_0x3aa3fa(0xdb)]={},this[_0x3aa3fa(0xeb)]=new core_1[(_0x3aa3fa(0x100))](MDApiWriter[_0x3aa3fa(0x105)]),this[_0x3aa3fa(0xf9)]=_0x535cf7,this['sourceDir']=_0x266446,this[_0x3aa3fa(0xea)]=_0x4378a2;}async[a98_0x1dfea4(0xfb)](_0x75a88,_0x3a58b5=![]){const _0x17af4c=a98_0x1dfea4,_0x2f677c=await zip_1[_0x17af4c(0x107)][_0x17af4c(0xf1)](_0x75a88),_0x356f79=[];for(const _0x3a7012 of Object[_0x17af4c(0x108)](_0x2f677c[_0x17af4c(0xe4)])){!_0x2f677c[_0x17af4c(0xe4)][_0x3a7012]['dir']&&_0x356f79[_0x17af4c(0xec)]({'filename':_0x3a7012,'body':await _0x2f677c[_0x17af4c(0xe4)][_0x3a7012][_0x17af4c(0xe3)](_0x3a58b5?'nodebuffer':_0x17af4c(0x117))});}return _0x356f79;}async['writeParent'](_0x168e2e){const _0x2c0ebd=a98_0x1dfea4;try{const _0x2f5045=await this[_0x2c0ebd(0xfb)](_0x168e2e[_0x2c0ebd(0x10f)],!![]);await Promise[_0x2c0ebd(0x113)](_0x2f5045['map'](({filename:_0x3f6be5,body:_0x1c1aff})=>fs_internal_1['FS'][_0x2c0ebd(0xf3)](path_1[_0x2c0ebd(0xe2)][_0x2c0ebd(0x118)](this[_0x2c0ebd(0x116)],_0x3f6be5),_0x1c1aff)));}catch(_0x1f9c37){throw new Error('[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20'+_0x168e2e[_0x2c0ebd(0xf2)]+'\x20['+_0x168e2e[_0x2c0ebd(0x109)]+_0x2c0ebd(0xdc)+_0x1f9c37);}}[a98_0x1dfea4(0xed)](_0x59c62b,_0x4602b2){const _0x3aa6b7=a98_0x1dfea4;throw new invalid_xml_error_1[(_0x3aa6b7(0xef))](_0x3aa6b7(0x101)+_0x4602b2[_0x3aa6b7(0xf2)]+'\x20['+_0x4602b2['fileType']+_0x3aa6b7(0xdc)+_0x59c62b);}async[a98_0x1dfea4(0x106)](_0x397bd0){const _0x1ae01e=a98_0x1dfea4,{filename:_0x4ac54f,body:_0x3b25b1}=(await this['readZip'](_0x397bd0['body']))[0x0];try{if(!this[_0x1ae01e(0xdb)][_0x4ac54f]){const _0x2fa48a=path_1[_0x1ae01e(0xe2)][_0x1ae01e(0x118)](this[_0x1ae01e(0x116)],_0x4ac54f);if(await fs_internal_1['FS'][_0x1ae01e(0x115)](_0x2fa48a)){const _0x4b54a3=await fs_internal_1['FS'][_0x1ae01e(0x104)](_0x2fa48a);this['parentComponents'][_0x4ac54f]=await xml_1[_0x1ae01e(0xdf)][_0x1ae01e(0x112)](_0x4b54a3)[_0x1ae01e(0x10c)](_0x8639a0=>this[_0x1ae01e(0xed)](_0x8639a0,_0x397bd0));}else{this[_0x1ae01e(0xdb)][_0x4ac54f]=await xml_1[_0x1ae01e(0xdf)][_0x1ae01e(0x112)](_0x3b25b1)[_0x1ae01e(0x10c)](_0x18c5be=>this[_0x1ae01e(0xed)](_0x18c5be,_0x397bd0));return;}}const _0xb00602=this['parentComponents'][_0x4ac54f],_0x2e26b6=await xml_1[_0x1ae01e(0xdf)][_0x1ae01e(0x112)](_0x3b25b1)[_0x1ae01e(0x10c)](_0x59a841=>this[_0x1ae01e(0xed)](_0x59a841,_0x397bd0));xml_1[_0x1ae01e(0xdf)][_0x1ae01e(0xee)](_0xb00602,_0x2e26b6);}catch(_0x6d864c){if(_0x6d864c instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0x1ae01e(0xea)])return;else throw _0x6d864c;}throw new Error(_0x1ae01e(0xe9)+_0x397bd0['fileName']+'\x20['+_0x397bd0[_0x1ae01e(0x109)]+_0x1ae01e(0xdc)+_0x6d864c);}}async['start'](){const _0x25fecf=a98_0x1dfea4;!await fs_internal_1['FS'][_0x25fecf(0x115)](this[_0x25fecf(0x116)])&&await fs_internal_1['FS'][_0x25fecf(0x10d)](this[_0x25fecf(0x116)]);for(const _0x273094 of this[_0x25fecf(0xf9)]){!child_types_1[_0x25fecf(0xe2)][_0x25fecf(0xe1)](_0x273094[_0x25fecf(0x109)])?await this[_0x25fecf(0x10a)](_0x273094):await this[_0x25fecf(0x106)](_0x273094);}const _0x3ac300=Object[_0x25fecf(0x108)](this['parentComponents']);this['internalLogger'][_0x25fecf(0xf4)](_0x25fecf(0x10b),this[_0x25fecf(0xf9)][_0x25fecf(0x111)]);while(_0x3ac300[_0x25fecf(0x111)]){const _0x1c255c=_0x3ac300[_0x25fecf(0xfe)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0xbd5bb5 of _0x1c255c){await fs_internal_1['FS'][_0x25fecf(0xf3)](path_1[_0x25fecf(0xe2)][_0x25fecf(0x118)](this[_0x25fecf(0x116)],_0xbd5bb5),xml_1[_0x25fecf(0xdf)][_0x25fecf(0xfc)](this[_0x25fecf(0xdb)][_0xbd5bb5]));}}this['parentComponents']={};}}function a98_0x375b(){const _0x28cb91=['writeFile','log','__esModule','5507436VCpPRf','6aHLrEt','1691538KCdUcP','components','10271240ntnlFc','readZip','convertToString','300768KIPBud','splice','../../../core','Logger','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','MDApiWriter','4111890FFqWts','readFile','name','writeChild','Zip','keys','fileType','writeParent','have\x20to\x20write\x20%d\x20files','catch','makeDir','apply','body','defineProperty','length','parse','all','1711068FfvsHa','exists','sourceDir','text','join','parentComponents','].\x20Original\x20error:\x20','../utils/xml','search','Xml','../data/child-types','includes','default','async','files','../errors/invalid-xml.error','2759205GvmQvP','toString','(((.+)+)+)+$','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','skipChildErrors','internalLogger','push','handleXmlParsingError','replaceOrAppend','InvalidXmlError','__importDefault','unzip','fileName'];a98_0x375b=function(){return _0x28cb91;};return a98_0x375b();}exports['MDApiWriter']=MDApiWriter;