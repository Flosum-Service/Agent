const a98_0x4d1b26=a98_0x2e84;(function(_0x286dd3,_0x1e02ac){const _0xacd2bc=a98_0x2e84,_0x1904c3=_0x286dd3();while(!![]){try{const _0x13126b=-parseInt(_0xacd2bc(0xa4))/0x1*(parseInt(_0xacd2bc(0x95))/0x2)+-parseInt(_0xacd2bc(0xba))/0x3*(-parseInt(_0xacd2bc(0xb2))/0x4)+-parseInt(_0xacd2bc(0xa9))/0x5*(-parseInt(_0xacd2bc(0xad))/0x6)+parseInt(_0xacd2bc(0xc9))/0x7*(-parseInt(_0xacd2bc(0xd0))/0x8)+parseInt(_0xacd2bc(0xd3))/0x9*(-parseInt(_0xacd2bc(0x9e))/0xa)+-parseInt(_0xacd2bc(0xbb))/0xb+-parseInt(_0xacd2bc(0xbf))/0xc*(-parseInt(_0xacd2bc(0xc7))/0xd);if(_0x13126b===_0x1e02ac)break;else _0x1904c3['push'](_0x1904c3['shift']());}catch(_0x191e93){_0x1904c3['push'](_0x1904c3['shift']());}}}(a98_0x49c0,0x9e92d));const a98_0x58ae9d=(function(){let _0x345e5e=!![];return function(_0x3e2234,_0x2afc50){const _0xd38773=_0x345e5e?function(){const _0x88e5a8=a98_0x2e84;if(_0x2afc50){const _0x3a024e=_0x2afc50[_0x88e5a8(0xc5)](_0x3e2234,arguments);return _0x2afc50=null,_0x3a024e;}}:function(){};return _0x345e5e=![],_0xd38773;};}()),a98_0x3da921=a98_0x58ae9d(this,function(){const _0x55b2e2=a98_0x2e84;return a98_0x3da921[_0x55b2e2(0x92)]()[_0x55b2e2(0xa3)](_0x55b2e2(0xb9))[_0x55b2e2(0x92)]()['constructor'](a98_0x3da921)[_0x55b2e2(0xa3)](_0x55b2e2(0xb9));});a98_0x3da921();'use strict';var __importDefault=this&&this[a98_0x4d1b26(0xb3)]||function(_0x43c05c){return _0x43c05c&&_0x43c05c['__esModule']?_0x43c05c:{'default':_0x43c05c};};Object[a98_0x4d1b26(0xd5)](exports,'__esModule',{'value':!![]}),exports[a98_0x4d1b26(0xa6)]=void 0x0;const path_1=__importDefault(require('path')),core_1=require(a98_0x4d1b26(0xb4)),fs_internal_1=require(a98_0x4d1b26(0xcb)),invalid_xml_error_1=require(a98_0x4d1b26(0xb0)),xml_1=require(a98_0x4d1b26(0xc0)),zip_1=require(a98_0x4d1b26(0xa0)),child_types_1=__importDefault(require('../data/child-types'));function a98_0x2e84(_0x267e1a,_0x195273){const _0x2f743=a98_0x49c0();return a98_0x2e84=function(_0x3da921,_0x58ae9d){_0x3da921=_0x3da921-0x91;let _0x49c045=_0x2f743[_0x3da921];return _0x49c045;},a98_0x2e84(_0x267e1a,_0x195273);}class MDApiWriter{constructor({components:_0x26d33d,sourceDir:_0x42ae8c,skipChildErrors:_0x43215d}){const _0x4c8354=a98_0x4d1b26;this[_0x4c8354(0xb6)]=0x64,this[_0x4c8354(0xac)]={},this[_0x4c8354(0xd7)]=new core_1[(_0x4c8354(0xd6))](MDApiWriter[_0x4c8354(0xaf)]),this['components']=_0x26d33d,this[_0x4c8354(0xa1)]=_0x42ae8c,this[_0x4c8354(0xaa)]=_0x43215d;}async[a98_0x4d1b26(0xcd)](_0x48aa77,_0x16dbdb=![]){const _0x16ba4d=a98_0x4d1b26,_0x336f06=await zip_1[_0x16ba4d(0xa5)][_0x16ba4d(0xce)](_0x48aa77),_0x572d30=[];for(const _0x1a0da3 of Object[_0x16ba4d(0x9d)](_0x336f06[_0x16ba4d(0xca)])){!_0x336f06[_0x16ba4d(0xca)][_0x1a0da3][_0x16ba4d(0xbe)]&&_0x572d30[_0x16ba4d(0xd2)]({'filename':_0x1a0da3,'body':await _0x336f06[_0x16ba4d(0xca)][_0x1a0da3][_0x16ba4d(0xa7)](_0x16dbdb?_0x16ba4d(0x98):_0x16ba4d(0xc3))});}return _0x572d30;}async[a98_0x4d1b26(0xb1)](_0x47d70a){const _0x306aeb=a98_0x4d1b26;try{const _0x5d3ca0=await this['readZip'](_0x47d70a[_0x306aeb(0xc6)],!![]);await Promise[_0x306aeb(0x9f)](_0x5d3ca0[_0x306aeb(0xb7)](({filename:_0x20232d,body:_0x3775d9})=>fs_internal_1['FS'][_0x306aeb(0x9a)](path_1[_0x306aeb(0x96)][_0x306aeb(0xc1)](this[_0x306aeb(0xa1)],_0x20232d),_0x3775d9)));}catch(_0x1c2d8d){throw new Error(_0x306aeb(0xbd)+_0x47d70a[_0x306aeb(0xc8)]+'\x20['+_0x47d70a[_0x306aeb(0x91)]+_0x306aeb(0xcf)+_0x1c2d8d);}}[a98_0x4d1b26(0xb8)](_0x5708e5,_0x456cf1){const _0x42b5af=a98_0x4d1b26;throw new invalid_xml_error_1[(_0x42b5af(0x9c))](_0x42b5af(0xcc)+_0x456cf1[_0x42b5af(0xc8)]+'\x20['+_0x456cf1[_0x42b5af(0x91)]+_0x42b5af(0xcf)+_0x5708e5);}async['writeChild'](_0xa2bd23){const _0xcedc40=a98_0x4d1b26,{filename:_0xe642bd,body:_0x46de61}=(await this[_0xcedc40(0xcd)](_0xa2bd23[_0xcedc40(0xc6)]))[0x0];try{if(!this[_0xcedc40(0xac)][_0xe642bd]){const _0x42f6e3=path_1[_0xcedc40(0x96)][_0xcedc40(0xc1)](this[_0xcedc40(0xa1)],_0xe642bd);if(await fs_internal_1['FS']['exists'](_0x42f6e3)){const _0x5155f4=await fs_internal_1['FS'][_0xcedc40(0xd4)](_0x42f6e3);this['parentComponents'][_0xe642bd]=await xml_1[_0xcedc40(0x99)][_0xcedc40(0x93)](_0x5155f4)[_0xcedc40(0x94)](_0x2ada26=>this[_0xcedc40(0xb8)](_0x2ada26,_0xa2bd23));}else{this['parentComponents'][_0xe642bd]=await xml_1[_0xcedc40(0x99)]['parse'](_0x46de61)['catch'](_0x1a697d=>this['handleXmlParsingError'](_0x1a697d,_0xa2bd23));return;}}const _0x1c9ed5=this[_0xcedc40(0xac)][_0xe642bd],_0x3fb61f=await xml_1[_0xcedc40(0x99)]['parse'](_0x46de61)[_0xcedc40(0x94)](_0x4ec8c7=>this['handleXmlParsingError'](_0x4ec8c7,_0xa2bd23));xml_1[_0xcedc40(0x99)][_0xcedc40(0xae)](_0x1c9ed5,_0x3fb61f);}catch(_0xa39e45){if(_0xa39e45 instanceof invalid_xml_error_1[_0xcedc40(0x9c)]){if(this[_0xcedc40(0xaa)])return;else throw _0xa39e45;}throw new Error(_0xcedc40(0xb5)+_0xa2bd23[_0xcedc40(0xc8)]+'\x20['+_0xa2bd23[_0xcedc40(0x91)]+_0xcedc40(0xcf)+_0xa39e45);}}async[a98_0x4d1b26(0x9b)](){const _0xc0aa0=a98_0x4d1b26;!await fs_internal_1['FS'][_0xc0aa0(0xc4)](this[_0xc0aa0(0xa1)])&&await fs_internal_1['FS'][_0xc0aa0(0xa2)](this[_0xc0aa0(0xa1)]);for(const _0x567a65 of this['components']){!child_types_1[_0xc0aa0(0x96)][_0xc0aa0(0xc2)](_0x567a65['fileType'])?await this[_0xc0aa0(0xb1)](_0x567a65):await this['writeChild'](_0x567a65);}const _0x5453ff=Object[_0xc0aa0(0x9d)](this[_0xc0aa0(0xac)]);this[_0xc0aa0(0xd7)][_0xc0aa0(0xa8)]('have\x20to\x20write\x20%d\x20files',this[_0xc0aa0(0x97)][_0xc0aa0(0xd1)]);while(_0x5453ff[_0xc0aa0(0xd1)]){const _0x19c053=_0x5453ff[_0xc0aa0(0xbc)](0x0,this[_0xc0aa0(0xb6)]);for(const _0x26d260 of _0x19c053){await fs_internal_1['FS'][_0xc0aa0(0x9a)](path_1['default'][_0xc0aa0(0xc1)](this['sourceDir'],_0x26d260),xml_1[_0xc0aa0(0x99)][_0xc0aa0(0xab)](this[_0xc0aa0(0xac)][_0x26d260]));}}this[_0xc0aa0(0xac)]={};}}function a98_0x49c0(){const _0x5c572d=['keys','4090rlmDYn','all','../utils/zip','sourceDir','makeDir','search','23NcrYpG','Zip','MDApiWriter','async','log','5cPdZvX','skipChildErrors','convertToString','parentComponents','6154812tTgrbn','replaceOrAppend','name','../errors/invalid-xml.error','writeParent','1029172ZfxZwy','__importDefault','../../../core','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','MAX_WRITES_PER_TICK','map','handleXmlParsingError','(((.+)+)+)+$','3bjnsIC','5031191DSqDoQ','splice','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','dir','12gyzPDK','../utils/xml','join','includes','text','exists','apply','body','14973946IRYabL','fileName','791sRVKfm','files','../../internal/fs.internal','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','readZip','unzip','].\x20Original\x20error:\x20','54800bTLLzm','length','push','9378urqhPj','readFile','defineProperty','Logger','internalLogger','fileType','toString','parse','catch','11114FfSfsR','default','components','nodebuffer','Xml','writeFile','start','InvalidXmlError'];a98_0x49c0=function(){return _0x5c572d;};return a98_0x49c0();}exports['MDApiWriter']=MDApiWriter;