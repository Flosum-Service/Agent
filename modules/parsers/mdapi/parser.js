const a95_0x32d464=a95_0x489a;(function(_0x24d4bd,_0x454375){const _0x4c280b=a95_0x489a,_0x251110=_0x24d4bd();while(!![]){try{const _0x48832d=-parseInt(_0x4c280b(0x1f5))/0x1+parseInt(_0x4c280b(0x1da))/0x2*(-parseInt(_0x4c280b(0x1e6))/0x3)+-parseInt(_0x4c280b(0x214))/0x4+-parseInt(_0x4c280b(0x206))/0x5*(-parseInt(_0x4c280b(0x200))/0x6)+parseInt(_0x4c280b(0x1e2))/0x7*(parseInt(_0x4c280b(0x207))/0x8)+parseInt(_0x4c280b(0x1d8))/0x9+parseInt(_0x4c280b(0x1f9))/0xa;if(_0x48832d===_0x454375)break;else _0x251110['push'](_0x251110['shift']());}catch(_0x7d9fe3){_0x251110['push'](_0x251110['shift']());}}}(a95_0x4958,0xdc045));const a95_0x35e9c5=(function(){let _0xe11a8=!![];return function(_0x52971a,_0x9551ed){const _0x17d614=_0xe11a8?function(){const _0x51036d=a95_0x489a;if(_0x9551ed){const _0x547761=_0x9551ed[_0x51036d(0x1ea)](_0x52971a,arguments);return _0x9551ed=null,_0x547761;}}:function(){};return _0xe11a8=![],_0x17d614;};}()),a95_0x28e1f8=a95_0x35e9c5(this,function(){const _0xa142a2=a95_0x489a;return a95_0x28e1f8[_0xa142a2(0x1d6)]()[_0xa142a2(0x1f2)](_0xa142a2(0x1fa))['toString']()[_0xa142a2(0x219)](a95_0x28e1f8)[_0xa142a2(0x1f2)](_0xa142a2(0x1fa));});a95_0x28e1f8();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2e2766){const _0x592a15=a95_0x489a;return _0x2e2766&&_0x2e2766[_0x592a15(0x20c)]?_0x2e2766:{'default':_0x2e2766};};function a95_0x489a(_0x54919e,_0x35c73d){const _0x48a987=a95_0x4958();return a95_0x489a=function(_0x28e1f8,_0x35e9c5){_0x28e1f8=_0x28e1f8-0x1d4;let _0x4958db=_0x48a987[_0x28e1f8];return _0x4958db;},a95_0x489a(_0x54919e,_0x35c73d);}Object[a95_0x32d464(0x1f0)](exports,a95_0x32d464(0x20c),{'value':!![]}),exports['MDApiParser']=void 0x0;function a95_0x4958(){const _0x2873b5=['6191380inFreb','(((.+)+)+)+$','filePath','META_EXTENSION','default','logger','META_EXPERIENCES_EXTENSION','6ugmoXQ','type','../utils/xml','experiences','endsWith','Logger','3575165OqdyDe','1687416MabbFu','extractFilenameFromPath','../../web-hooks/utils/git-commit.utils','../utils','all','__esModule','readComponentFiles','../../../core','utf-8','readDir','Xml','catch','join','6563916ZzTmRB','convertToCleanPaths','relative','package.xml','calculateCRC32','constructor','reduce','readBundledFiles','toString','\x22\x20not\x20found\x20in\x20\x22','15026796GjXckV','startsWith','452qqczdj','readChildComponents','Component\x20\x22','isSFDXProject','push','init','getChildsByName','dir','14DQpwPl','values','.site-meta.xml','files','4839kmvGSQ','name','CustomLabels','waveTemplates','apply','isPathsEquals','paths','filter','crc','../../internal/fs.internal','defineProperty','error','search','isDir','test','518963OwUJmO','extractComponentTypeFromFiles','find','readFile'];a95_0x4958=function(){return _0x2873b5;};return a95_0x4958();}const fs_internal_1=require(a95_0x32d464(0x1ef)),utils_1=require(a95_0x32d464(0x20a)),path_1=require('path'),xml_1=require(a95_0x32d464(0x202)),child_types_map_1=__importDefault(require('../data/child-types-map')),constants_1=require('../../../constants'),core_1=require(a95_0x32d464(0x20e)),git_commit_utils_1=require(a95_0x32d464(0x209)),CHILD_XML_KEYS=Object[a95_0x32d464(0x1e3)](child_types_map_1[a95_0x32d464(0x1fd)]);class MDApiParser{constructor(_0x4468b9,_0x549f36,_0x2aff0b){const _0x4635b6=a95_0x32d464;this[_0x4635b6(0x1e1)]=_0x4468b9,this[_0x4635b6(0x1dd)]=_0x2aff0b,this['logger']=new core_1[(_0x4635b6(0x205))](MDApiParser['name']),this[_0x4635b6(0x1fc)]='-meta.xml',this[_0x4635b6(0x1ff)]=_0x4635b6(0x1e4),this[_0x4635b6(0x1ec)]=_0x549f36;}async[a95_0x32d464(0x1db)](_0xd0cf2f){const _0x27cc6a=a95_0x32d464;try{const _0x1715a4=await xml_1[_0x27cc6a(0x211)]['parse'](Object[_0x27cc6a(0x1e3)](_0xd0cf2f[_0x27cc6a(0x1e5)])[0x0][_0x27cc6a(0x1d6)](_0x27cc6a(0x20f))),_0x175fe1=CHILD_XML_KEYS[_0x27cc6a(0x1ed)](_0x5983e6=>xml_1[_0x27cc6a(0x211)]['hasChildNodes'](_0x1715a4,_0x5983e6))[_0x27cc6a(0x1d4)]((_0x369ef7,_0x3a2487)=>[..._0x369ef7,...xml_1['Xml'][_0x27cc6a(0x1e0)](_0x1715a4,_0x3a2487)],[]);return utils_1['createChildComponentsFromParent'](_0xd0cf2f,_0x1715a4,_0x175fe1);}catch(_0xf16d40){throw new Error('Cannot\x20parse\x20childs\x20in\x20'+_0xd0cf2f['name']+'\x20['+_0xd0cf2f['type']+']');}}async[a95_0x32d464(0x1d5)](_0x534d9b){const _0x35abf8=a95_0x32d464,_0x281f11=path_1[_0x35abf8(0x213)](this[_0x35abf8(0x1e1)],_0x534d9b),_0x1ed1ce=_0x534d9b+(_0x534d9b['startsWith'](_0x35abf8(0x203))?this[_0x35abf8(0x1ff)]:this['META_EXTENSION']),_0x430184=await fs_internal_1['FS'][_0x35abf8(0x210)](_0x281f11,!![]),_0x4b1ce7=await fs_internal_1['FS']['readFile'](path_1[_0x35abf8(0x213)](this['dir'],_0x1ed1ce),!![])[_0x35abf8(0x212)](()=>null),_0x325215={};for(const _0x497347 of _0x430184){_0x325215[path_1[_0x35abf8(0x216)](this[_0x35abf8(0x1e1)],_0x497347)]=await fs_internal_1['FS'][_0x35abf8(0x1f8)](_0x497347,!![]);}return _0x4b1ce7&&(_0x325215[path_1[_0x35abf8(0x216)](this[_0x35abf8(0x1e1)],_0x1ed1ce)]=_0x4b1ce7),_0x325215;}async['readComponentFiles'](_0x5ea322){const _0x3efe09=a95_0x32d464;let _0x377e32=_0x5ea322+this[_0x3efe09(0x1fc)];if(constants_1['BUNDLED_FOLDERS_REGEXP'][_0x3efe09(0x1f4)](_0x5ea322))return this[_0x3efe09(0x1d5)](_0x5ea322);if(await fs_internal_1['FS'][_0x3efe09(0x1f3)](path_1[_0x3efe09(0x213)](this[_0x3efe09(0x1e1)],_0x5ea322)))return{[_0x377e32]:await fs_internal_1['FS'][_0x3efe09(0x1f8)](path_1[_0x3efe09(0x213)](this[_0x3efe09(0x1e1)],_0x377e32),!![])};if(!path_1['extname'](_0x5ea322)&&this[_0x3efe09(0x1dd)]){const _0x84da5b=_0x5ea322['split']('/')[0x0],_0x5b55b2=(await fs_internal_1['FS'][_0x3efe09(0x210)](path_1['join'](this[_0x3efe09(0x1e1)],_0x84da5b)))[_0x3efe09(0x1f7)](_0x1a8115=>git_commit_utils_1[_0x3efe09(0x1eb)](_0x1a8115,path_1[_0x3efe09(0x213)](this[_0x3efe09(0x1e1)],_0x5ea322)));if(!_0x5b55b2)throw new Error(_0x3efe09(0x1dc)+_0x5ea322+_0x3efe09(0x1d7)+_0x84da5b+'\x22');_0x5ea322=path_1[_0x3efe09(0x216)](this['dir'],_0x5b55b2),_0x377e32=_0x5ea322+this[_0x3efe09(0x1fc)];}const [_0x404431,_0x4a1c0e]=await Promise[_0x3efe09(0x20b)]([fs_internal_1['FS'][_0x3efe09(0x1f8)](path_1['join'](this[_0x3efe09(0x1e1)],_0x5ea322),!![])[_0x3efe09(0x212)](()=>null),fs_internal_1['FS'][_0x3efe09(0x1f8)](path_1[_0x3efe09(0x213)](this[_0x3efe09(0x1e1)],_0x377e32),!![])[_0x3efe09(0x212)](()=>null)]);return{..._0x404431?{[_0x5ea322]:_0x404431}:{},..._0x4a1c0e?{[_0x377e32]:_0x4a1c0e}:{}};}async[a95_0x32d464(0x1df)](){const _0x475c92=a95_0x32d464,_0x25b847=[...this[_0x475c92(0x1ec)]];if(this[_0x475c92(0x1dd)])for(const _0x412c4d of _0x25b847){if(await fs_internal_1['FS'][_0x475c92(0x1f3)](path_1['join'](this['dir'],_0x412c4d))){const _0x2e79c8=await fs_internal_1['FS'][_0x475c92(0x210)](path_1[_0x475c92(0x213)](this[_0x475c92(0x1e1)],_0x412c4d),!![]);_0x25b847[_0x475c92(0x1de)](..._0x2e79c8['map'](_0x28902a=>path_1['relative'](this['dir'],_0x28902a)));}}this[_0x475c92(0x1ec)]=utils_1[_0x475c92(0x215)](_0x25b847);}async['parse'](){const _0x4df1f1=a95_0x32d464;await this[_0x4df1f1(0x1df)]();const _0x43e28a=[];for(const _0x3853f0 of this[_0x4df1f1(0x1ec)]){if(_0x3853f0[_0x4df1f1(0x204)](_0x4df1f1(0x217)))continue;const _0x3119de={};_0x3119de[_0x4df1f1(0x1fb)]=_0x3853f0;try{_0x3119de[_0x4df1f1(0x1e5)]=await this[_0x4df1f1(0x20d)](_0x3853f0),_0x3853f0[_0x4df1f1(0x1d9)](_0x4df1f1(0x1e9))?_0x3119de[_0x4df1f1(0x201)]='WaveTemplateBundle':_0x3119de[_0x4df1f1(0x201)]=await utils_1[_0x4df1f1(0x1f6)]({'files':_0x3119de[_0x4df1f1(0x1e5)]});}catch(_0x2d031c){this[_0x4df1f1(0x1fe)][_0x4df1f1(0x1f1)]('error\x20occured\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20',_0x3853f0,_0x2d031c);continue;}_0x3119de[_0x4df1f1(0x1e7)]=utils_1[_0x4df1f1(0x208)](_0x3853f0),_0x3119de[_0x4df1f1(0x1ee)]=utils_1[_0x4df1f1(0x218)](_0x3119de);if(utils_1['isParentComponent'](_0x3119de)){const _0x337579=await this[_0x4df1f1(0x1db)](_0x3119de);_0x43e28a['push'](..._0x337579);}if(_0x3119de[_0x4df1f1(0x201)]===_0x4df1f1(0x1e8))continue;_0x43e28a['push'](_0x3119de);}return _0x43e28a;}}exports['MDApiParser']=MDApiParser;