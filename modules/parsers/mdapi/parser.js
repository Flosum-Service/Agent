const a96_0xf129e1=a96_0x46e7;function a96_0x137d(){const _0x3414d9=['10171cNgnMR','name','filter','readFile','waveTemplates','push','10vjodmh','getChildsByName','all','readBundledFiles','search','6zvWTKB','parse','startsWith','isParentComponent','__esModule','paths','hasChildNodes','convertToCleanPaths','files','(((.+)+)+)+$','../utils/xml','dir','constructor','META_EXPERIENCES_EXTENSION','__importDefault','logger','isSFDXProject','reduce','filePath','test','isPathsEquals','type','4232qNBstv','extractFilenameFromPath','800SWaWaI','find','relative','Xml','Logger','readChildComponents','createChildComponentsFromParent','616AjgLkl','join','experiences','package.xml','error\x20occured\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','../../internal/fs.internal','.site-meta.xml','433341iRrscJ','split','path','\x22\x20not\x20found\x20in\x20\x22','-meta.xml','META_EXTENSION','readDir','CustomLabels','../../../constants','../../web-hooks/utils/git-commit.utils','WaveTemplateBundle','../data/child-types-map','extname','Cannot\x20parse\x20childs\x20in\x20','3546710NBYIzZ','4276701eABfmf','isDir','12798mKrpBF','values','toString','crc','readComponentFiles','catch','209500MXvrSO'];a96_0x137d=function(){return _0x3414d9;};return a96_0x137d();}(function(_0x347fe5,_0x537aca){const _0x1805c9=a96_0x46e7,_0x5e5ad6=_0x347fe5();while(!![]){try{const _0x151c85=parseInt(_0x1805c9(0x22f))/0x1+-parseInt(_0x1805c9(0x1ed))/0x2*(-parseInt(_0x1805c9(0x218))/0x3)+parseInt(_0x1805c9(0x208))/0x4+parseInt(_0x1805c9(0x226))/0x5*(-parseInt(_0x1805c9(0x1f2))/0x6)+parseInt(_0x1805c9(0x230))/0x7*(-parseInt(_0x1805c9(0x211))/0x8)+-parseInt(_0x1805c9(0x229))/0x9*(parseInt(_0x1805c9(0x20a))/0xa)+parseInt(_0x1805c9(0x227))/0xb;if(_0x151c85===_0x537aca)break;else _0x5e5ad6['push'](_0x5e5ad6['shift']());}catch(_0x41606d){_0x5e5ad6['push'](_0x5e5ad6['shift']());}}}(a96_0x137d,0x5e629));const a96_0x683048=(function(){let _0x4872c3=!![];return function(_0x297eb1,_0x264b9a){const _0x23cb7e=_0x4872c3?function(){if(_0x264b9a){const _0x2ed972=_0x264b9a['apply'](_0x297eb1,arguments);return _0x264b9a=null,_0x2ed972;}}:function(){};return _0x4872c3=![],_0x23cb7e;};}()),a96_0x3075b8=a96_0x683048(this,function(){const _0x575f12=a96_0x46e7;return a96_0x3075b8[_0x575f12(0x22b)]()[_0x575f12(0x1f1)]('(((.+)+)+)+$')['toString']()[_0x575f12(0x1fe)](a96_0x3075b8)[_0x575f12(0x1f1)](_0x575f12(0x1fb));});a96_0x3075b8();'use strict';var __importDefault=this&&this[a96_0xf129e1(0x200)]||function(_0x532cae){const _0x2da5e3=a96_0xf129e1;return _0x532cae&&_0x532cae[_0x2da5e3(0x1f6)]?_0x532cae:{'default':_0x532cae};};Object['defineProperty'](exports,a96_0xf129e1(0x1f6),{'value':!![]}),exports['MDApiParser']=void 0x0;const fs_internal_1=require(a96_0xf129e1(0x216)),utils_1=require('../utils'),path_1=require(a96_0xf129e1(0x21a)),xml_1=require(a96_0xf129e1(0x1fc)),child_types_map_1=__importDefault(require(a96_0xf129e1(0x223))),constants_1=require(a96_0xf129e1(0x220)),core_1=require('../../../core'),git_commit_utils_1=require(a96_0xf129e1(0x221)),CHILD_XML_KEYS=Object[a96_0xf129e1(0x22a)](child_types_map_1['default']);function a96_0x46e7(_0x353c5f,_0x1e3524){const _0x541179=a96_0x137d();return a96_0x46e7=function(_0x3075b8,_0x683048){_0x3075b8=_0x3075b8-0x1ec;let _0x137d14=_0x541179[_0x3075b8];return _0x137d14;},a96_0x46e7(_0x353c5f,_0x1e3524);}class MDApiParser{constructor(_0x3ef9c7,_0x1e2f6a,_0x53e108){const _0x1f0ea5=a96_0xf129e1;this[_0x1f0ea5(0x1fd)]=_0x3ef9c7,this[_0x1f0ea5(0x202)]=_0x53e108,this[_0x1f0ea5(0x201)]=new core_1[(_0x1f0ea5(0x20e))](MDApiParser['name']),this[_0x1f0ea5(0x21d)]=_0x1f0ea5(0x21c),this[_0x1f0ea5(0x1ff)]=_0x1f0ea5(0x217),this['paths']=_0x1e2f6a;}async[a96_0xf129e1(0x20f)](_0x1eb759){const _0xaef712=a96_0xf129e1;try{const _0x19f79a=await xml_1[_0xaef712(0x20d)][_0xaef712(0x1f3)](Object[_0xaef712(0x22a)](_0x1eb759['files'])[0x0][_0xaef712(0x22b)]('utf-8')),_0x5f028d=CHILD_XML_KEYS[_0xaef712(0x232)](_0x35eff9=>xml_1[_0xaef712(0x20d)][_0xaef712(0x1f8)](_0x19f79a,_0x35eff9))[_0xaef712(0x203)]((_0x1cc668,_0x36d1e7)=>[..._0x1cc668,...xml_1['Xml'][_0xaef712(0x1ee)](_0x19f79a,_0x36d1e7)],[]);return utils_1[_0xaef712(0x210)](_0x1eb759,_0x19f79a,_0x5f028d);}catch(_0xc36727){throw new Error(_0xaef712(0x225)+_0x1eb759[_0xaef712(0x231)]+'\x20['+_0x1eb759['type']+']');}}async[a96_0xf129e1(0x1f0)](_0x535cd0){const _0x4d0cd9=a96_0xf129e1,_0x2beb60=path_1[_0x4d0cd9(0x212)](this[_0x4d0cd9(0x1fd)],_0x535cd0),_0x12f2e4=_0x535cd0+(_0x535cd0[_0x4d0cd9(0x1f4)](_0x4d0cd9(0x213))?this[_0x4d0cd9(0x1ff)]:this[_0x4d0cd9(0x21d)]),_0x4febc0=await fs_internal_1['FS']['readDir'](_0x2beb60,!![]),_0x4e8fa5=await fs_internal_1['FS'][_0x4d0cd9(0x233)](path_1[_0x4d0cd9(0x212)](this[_0x4d0cd9(0x1fd)],_0x12f2e4),!![])[_0x4d0cd9(0x22e)](()=>null),_0x1ef345={};for(const _0x393090 of _0x4febc0){_0x1ef345[path_1['relative'](this[_0x4d0cd9(0x1fd)],_0x393090)]=await fs_internal_1['FS'][_0x4d0cd9(0x233)](_0x393090,!![]);}return _0x4e8fa5&&(_0x1ef345[path_1[_0x4d0cd9(0x20c)](this[_0x4d0cd9(0x1fd)],_0x12f2e4)]=_0x4e8fa5),_0x1ef345;}async[a96_0xf129e1(0x22d)](_0x39aefb){const _0xc059b7=a96_0xf129e1;let _0x3bc36f=_0x39aefb+this['META_EXTENSION'];if(constants_1['BUNDLED_FOLDERS_REGEXP'][_0xc059b7(0x205)](_0x39aefb))return this['readBundledFiles'](_0x39aefb);if(await fs_internal_1['FS'][_0xc059b7(0x228)](path_1[_0xc059b7(0x212)](this[_0xc059b7(0x1fd)],_0x39aefb)))return{[_0x3bc36f]:await fs_internal_1['FS']['readFile'](path_1[_0xc059b7(0x212)](this[_0xc059b7(0x1fd)],_0x3bc36f),!![])};if(!path_1[_0xc059b7(0x224)](_0x39aefb)&&this[_0xc059b7(0x202)]){const _0x310382=_0x39aefb[_0xc059b7(0x219)]('/')[0x0],_0x5634e2=(await fs_internal_1['FS'][_0xc059b7(0x21e)](path_1[_0xc059b7(0x212)](this[_0xc059b7(0x1fd)],_0x310382)))[_0xc059b7(0x20b)](_0x51351b=>git_commit_utils_1[_0xc059b7(0x206)](_0x51351b,path_1[_0xc059b7(0x212)](this[_0xc059b7(0x1fd)],_0x39aefb)));if(!_0x5634e2)throw new Error('Component\x20\x22'+_0x39aefb+_0xc059b7(0x21b)+_0x310382+'\x22');_0x39aefb=path_1['relative'](this[_0xc059b7(0x1fd)],_0x5634e2),_0x3bc36f=_0x39aefb+this['META_EXTENSION'];}const [_0x104aa0,_0x1fe67f]=await Promise[_0xc059b7(0x1ef)]([fs_internal_1['FS']['readFile'](path_1[_0xc059b7(0x212)](this['dir'],_0x39aefb),!![])[_0xc059b7(0x22e)](()=>null),fs_internal_1['FS'][_0xc059b7(0x233)](path_1[_0xc059b7(0x212)](this[_0xc059b7(0x1fd)],_0x3bc36f),!![])['catch'](()=>null)]);return{..._0x104aa0?{[_0x39aefb]:_0x104aa0}:{},..._0x1fe67f?{[_0x3bc36f]:_0x1fe67f}:{}};}async['init'](){const _0x3d99a4=a96_0xf129e1,_0x14e5df=[...this[_0x3d99a4(0x1f7)]];if(this[_0x3d99a4(0x202)])for(const _0x48ed80 of _0x14e5df){if(await fs_internal_1['FS'][_0x3d99a4(0x228)](path_1[_0x3d99a4(0x212)](this[_0x3d99a4(0x1fd)],_0x48ed80))){const _0x1fd126=await fs_internal_1['FS'][_0x3d99a4(0x21e)](path_1[_0x3d99a4(0x212)](this[_0x3d99a4(0x1fd)],_0x48ed80),!![]);_0x14e5df[_0x3d99a4(0x1ec)](..._0x1fd126['map'](_0x11dfcb=>path_1[_0x3d99a4(0x20c)](this[_0x3d99a4(0x1fd)],_0x11dfcb)));}}this[_0x3d99a4(0x1f7)]=utils_1[_0x3d99a4(0x1f9)](_0x14e5df);}async[a96_0xf129e1(0x1f3)](){const _0x53b675=a96_0xf129e1;await this['init']();const _0x1be657=[];for(const _0x4e2cd5 of this[_0x53b675(0x1f7)]){if(_0x4e2cd5['endsWith'](_0x53b675(0x214)))continue;const _0x5105ec={};_0x5105ec[_0x53b675(0x204)]=_0x4e2cd5;try{_0x5105ec[_0x53b675(0x1fa)]=await this[_0x53b675(0x22d)](_0x4e2cd5),_0x4e2cd5[_0x53b675(0x1f4)](_0x53b675(0x234))?_0x5105ec['type']=_0x53b675(0x222):_0x5105ec[_0x53b675(0x207)]=await utils_1['extractComponentTypeFromFiles']({'files':_0x5105ec[_0x53b675(0x1fa)]});}catch(_0x3ebed5){this[_0x53b675(0x201)]['error'](_0x53b675(0x215),_0x4e2cd5,_0x3ebed5);continue;}_0x5105ec['name']=utils_1[_0x53b675(0x209)](_0x4e2cd5),_0x5105ec[_0x53b675(0x22c)]=utils_1['calculateCRC32'](_0x5105ec);if(utils_1[_0x53b675(0x1f5)](_0x5105ec)){const _0x5b75c0=await this[_0x53b675(0x20f)](_0x5105ec);_0x1be657[_0x53b675(0x1ec)](..._0x5b75c0);}if(_0x5105ec[_0x53b675(0x207)]===_0x53b675(0x21f))continue;_0x1be657['push'](_0x5105ec);}return _0x1be657;}}exports['MDApiParser']=MDApiParser;