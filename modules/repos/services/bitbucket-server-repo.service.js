const a111_0x29e3b3=a111_0x5c2e;(function(_0x567cbf,_0x1cef71){const _0x1b4455=a111_0x5c2e,_0x1f49d3=_0x567cbf();while(!![]){try{const _0x53862d=parseInt(_0x1b4455(0x19a))/0x1*(-parseInt(_0x1b4455(0x1c8))/0x2)+parseInt(_0x1b4455(0x18c))/0x3+-parseInt(_0x1b4455(0x193))/0x4*(parseInt(_0x1b4455(0x1bc))/0x5)+parseInt(_0x1b4455(0x191))/0x6*(parseInt(_0x1b4455(0x1ad))/0x7)+-parseInt(_0x1b4455(0x18b))/0x8+parseInt(_0x1b4455(0x1d0))/0x9+-parseInt(_0x1b4455(0x198))/0xa*(-parseInt(_0x1b4455(0x1d2))/0xb);if(_0x53862d===_0x1cef71)break;else _0x1f49d3['push'](_0x1f49d3['shift']());}catch(_0x189c20){_0x1f49d3['push'](_0x1f49d3['shift']());}}}(a111_0x21a4,0xc345e));function a111_0x21a4(){const _0x3bd105=['9372864kPayPf','1370577tekwGt','ApiError','search','apiUrl','length','3289098wIIZgL','BadRequestError','4wpOeIL','joinURL','Git','create','GitRepoService','10NgJHCR','projects/','1pMqzmi','Inject','put','metadata','master','toString','../repo.class','/projects/','NotFoundError','object','constructor','autoInit','bitbucketServer','post','getOwnPropertyDescriptor','delete','project','decorate','get','7OOCUYz','displayId','getOne','then','baseURL','isLastPage','Repo','/branches','apiBody','Service','getAll','defaultBranch','function','../../git-api/services/bitbucket-server-api.service','values','6236530GbTsJc','design:paramtypes','../../shared/utils','__esModule','api','name','/repos/','BitbucketServerApiService','fromBitbucketServer','request','../../../core/errors/api.error','push','2442150KJjMLu','(((.+)+)+)+$','slug','defaults','update','/default-branch','BitbucketServerRepoService','__decorate','6987960dqLwkB','git','29241795OUyrmI','../../internal/git.internal'];a111_0x21a4=function(){return _0x3bd105;};return a111_0x21a4();}const a111_0x21da22=(function(){let _0x5b413f=!![];return function(_0x475281,_0x57dc9f){const _0x58872d=_0x5b413f?function(){if(_0x57dc9f){const _0x22e3f6=_0x57dc9f['apply'](_0x475281,arguments);return _0x57dc9f=null,_0x22e3f6;}}:function(){};return _0x5b413f=![],_0x58872d;};}()),a111_0xa6f7e4=a111_0x21da22(this,function(){const _0x20fb94=a111_0x5c2e;return a111_0xa6f7e4[_0x20fb94(0x19f)]()['search'](_0x20fb94(0x1c9))[_0x20fb94(0x19f)]()[_0x20fb94(0x1a4)](a111_0xa6f7e4)[_0x20fb94(0x18e)]('(((.+)+)+)+$');});function a111_0x5c2e(_0x190c3d,_0x460806){const _0x1c5c9b=a111_0x21a4();return a111_0x5c2e=function(_0xa6f7e4,_0x21da22){_0xa6f7e4=_0xa6f7e4-0x18b;let _0x21a402=_0x1c5c9b[_0xa6f7e4];return _0x21a402;},a111_0x5c2e(_0x190c3d,_0x460806);}a111_0xa6f7e4();'use strict';var __decorate=this&&this[a111_0x29e3b3(0x1cf)]||function(_0x330f0a,_0x52024c,_0x5a7ff7,_0x1a51a9){const _0x10827a=a111_0x29e3b3;var _0x374b11=arguments['length'],_0x56afed=_0x374b11<0x3?_0x52024c:_0x1a51a9===null?_0x1a51a9=Object[_0x10827a(0x1a8)](_0x52024c,_0x5a7ff7):_0x1a51a9,_0x87eb75;if(typeof Reflect===_0x10827a(0x1a3)&&typeof Reflect[_0x10827a(0x1ab)]===_0x10827a(0x1b9))_0x56afed=Reflect[_0x10827a(0x1ab)](_0x330f0a,_0x52024c,_0x5a7ff7,_0x1a51a9);else{for(var _0xaa7710=_0x330f0a[_0x10827a(0x190)]-0x1;_0xaa7710>=0x0;_0xaa7710--)if(_0x87eb75=_0x330f0a[_0xaa7710])_0x56afed=(_0x374b11<0x3?_0x87eb75(_0x56afed):_0x374b11>0x3?_0x87eb75(_0x52024c,_0x5a7ff7,_0x56afed):_0x87eb75(_0x52024c,_0x5a7ff7))||_0x56afed;}return _0x374b11>0x3&&_0x56afed&&Object['defineProperty'](_0x52024c,_0x5a7ff7,_0x56afed),_0x56afed;},__metadata=this&&this['__metadata']||function(_0x4726a1,_0x1d6e7f){const _0x21ceb3=a111_0x29e3b3;if(typeof Reflect===_0x21ceb3(0x1a3)&&typeof Reflect[_0x21ceb3(0x19d)]===_0x21ceb3(0x1b9))return Reflect[_0x21ceb3(0x19d)](_0x4726a1,_0x1d6e7f);},__param=this&&this['__param']||function(_0xf4894,_0x1e610d){return function(_0x436d6d,_0x46127f){_0x1e610d(_0x436d6d,_0x46127f,_0xf4894);};};Object['defineProperty'](exports,a111_0x29e3b3(0x1bf),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require('../../../core/errors/bad-request.error'),not_found_error_1=require('../../../core/errors/not-found.error'),auth_settings_service_1=require('../../shared/services/auth-settings.service'),typedi_1=require('typedi'),api_error_1=require(a111_0x29e3b3(0x1c6)),bitbucket_server_api_service_1=require(a111_0x29e3b3(0x1ba)),git_internal_1=require(a111_0x29e3b3(0x1d3)),utils_1=require(a111_0x29e3b3(0x1be)),repo_class_1=require(a111_0x29e3b3(0x1a0)),git_repo_service_1=require('./git-repo.service');let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a111_0x29e3b3(0x197)]{constructor(_0x1b4f88,_0x8988e9){const _0x369607=a111_0x29e3b3;super(_0x1b4f88),this[_0x369607(0x1c0)]=_0x1b4f88,this['project']=_0x8988e9[_0x369607(0x1a6)][_0x369607(0x1aa)];}async[a111_0x29e3b3(0x196)](_0x29bfa4){const _0x4444d6=a111_0x29e3b3;try{const _0x5b8357={'name':_0x29bfa4[_0x4444d6(0x1c1)],'scmId':_0x4444d6(0x1d1),'defaultBranch':_0x29bfa4[_0x4444d6(0x1b8)],..._0x29bfa4[_0x4444d6(0x1b5)]||{}},_0x133fa1=await this[_0x4444d6(0x1c5)][_0x4444d6(0x1a7)](_0x4444d6(0x199)+this[_0x4444d6(0x1aa)]+'/repos',_0x5b8357),_0x6ffa95=repo_class_1[_0x4444d6(0x1b3)][_0x4444d6(0x1c4)](_0x133fa1,'');return _0x29bfa4[_0x4444d6(0x1a5)]&&await git_internal_1[_0x4444d6(0x195)]['createEmptyBranch'](_0x6ffa95,_0x29bfa4[_0x4444d6(0x1b8)]||_0x4444d6(0x19e)),this[_0x4444d6(0x1af)](_0x6ffa95['name']);}catch(_0x535de8){if(_0x535de8 instanceof api_error_1[_0x4444d6(0x18d)])throw _0x535de8;throw new bad_request_error_1[(_0x4444d6(0x192))](_0x535de8);}}async[a111_0x29e3b3(0x1b7)](){const _0x3d8864=a111_0x29e3b3;try{const _0x3e2deb=[];let _0x3a5dd7;do{_0x3a5dd7=await this[_0x3d8864(0x1c5)]['get'](_0x3d8864(0x199)+this[_0x3d8864(0x1aa)]+'/repos',{'params':{'limit':0x64,'start':_0x3a5dd7?_0x3a5dd7['nextPageStart']:0x0}}),_0x3e2deb[_0x3d8864(0x1c7)](..._0x3a5dd7['values']);}while(!_0x3a5dd7[_0x3d8864(0x1b2)]);return _0x3e2deb['map'](_0x1b8922=>repo_class_1[_0x3d8864(0x1b3)][_0x3d8864(0x1c4)](_0x1b8922,utils_1[_0x3d8864(0x194)](this['request'][_0x3d8864(0x1cb)]['baseURL']||'','/projects/'+this[_0x3d8864(0x1aa)]+_0x3d8864(0x1c2)+_0x1b8922[_0x3d8864(0x1ca)])));}catch(_0x1818e8){if(_0x1818e8 instanceof api_error_1['ApiError'])throw _0x1818e8;throw new not_found_error_1['NotFoundError'](_0x1818e8);}}async[a111_0x29e3b3(0x1af)](_0x511d9e){const _0x27dff6=a111_0x29e3b3;var _0x4050ba;try{const _0x8424dc=await this[_0x27dff6(0x1c5)][_0x27dff6(0x1ac)](_0x27dff6(0x199)+this[_0x27dff6(0x1aa)]+_0x27dff6(0x1c2)+_0x511d9e),_0x21cdbd=repo_class_1[_0x27dff6(0x1b3)][_0x27dff6(0x1c4)](_0x8424dc,utils_1['joinURL'](this[_0x27dff6(0x1c5)][_0x27dff6(0x1cb)]['baseURL']||'',_0x27dff6(0x1a1)+this[_0x27dff6(0x1aa)]+_0x27dff6(0x1c2)+_0x511d9e)),_0x1f2329=await this['request'][_0x27dff6(0x1ac)](_0x21cdbd[_0x27dff6(0x18f)]+_0x27dff6(0x1b4))[_0x27dff6(0x1b0)](_0x1cafa7=>_0x1cafa7[_0x27dff6(0x1bb)]);return _0x21cdbd[_0x27dff6(0x1b8)]=(_0x4050ba=_0x1f2329['find'](_0x41efb7=>_0x41efb7['isDefault']===!![]))===null||_0x4050ba===void 0x0?void 0x0:_0x4050ba[_0x27dff6(0x1ae)],_0x21cdbd;}catch(_0x448f66){if(_0x448f66 instanceof api_error_1[_0x27dff6(0x18d)])throw _0x448f66;throw new not_found_error_1[(_0x27dff6(0x1a2))](_0x448f66);}}async[a111_0x29e3b3(0x1cc)](_0x5692fe,_0x2f2d2b){const _0x472928=a111_0x29e3b3;try{const _0x3a4118=await this[_0x472928(0x1c5)][_0x472928(0x19c)]('projects/'+this[_0x472928(0x1aa)]+'/repos/'+_0x5692fe,_0x2f2d2b),_0x24e802=await this[_0x472928(0x1c5)][_0x472928(0x1ac)]('projects/'+this[_0x472928(0x1aa)]+_0x472928(0x1c2)+_0x5692fe+_0x472928(0x1cd)),_0xc8ef33=repo_class_1['Repo'][_0x472928(0x1c4)](_0x3a4118,utils_1[_0x472928(0x194)](this['request'][_0x472928(0x1cb)][_0x472928(0x1b1)]||'',_0x472928(0x1a1)+this['project']+_0x472928(0x1c2)+_0x5692fe));return _0xc8ef33[_0x472928(0x1b8)]=_0x24e802[_0x472928(0x1ae)],_0xc8ef33;}catch(_0x163349){if(_0x163349 instanceof api_error_1[_0x472928(0x18d)])throw _0x163349;throw new not_found_error_1[(_0x472928(0x1a2))](_0x163349);}}async['delete'](_0xa5b597){const _0x32b414=a111_0x29e3b3;try{await this[_0x32b414(0x1af)](_0xa5b597),await this[_0x32b414(0x1c5)][_0x32b414(0x1a9)]('projects/'+this[_0x32b414(0x1aa)]+'/repos/'+_0xa5b597);}catch(_0x37d138){if(_0x37d138 instanceof api_error_1['ApiError'])throw _0x37d138;throw new bad_request_error_1[(_0x32b414(0x192))](_0x37d138);}}};BitbucketServerRepoService=__decorate([typedi_1[a111_0x29e3b3(0x1b6)](),__param(0x1,typedi_1[a111_0x29e3b3(0x19b)]()),__metadata(a111_0x29e3b3(0x1bd),[bitbucket_server_api_service_1[a111_0x29e3b3(0x1c3)],auth_settings_service_1['AuthSettingsService']])],BitbucketServerRepoService),exports[a111_0x29e3b3(0x1ce)]=BitbucketServerRepoService;