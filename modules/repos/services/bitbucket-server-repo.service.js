const a111_0x3add14=a111_0x1efb;(function(_0x4d10fd,_0x343333){const _0x1242c3=a111_0x1efb,_0x3d7599=_0x4d10fd();while(!![]){try{const _0x50f243=parseInt(_0x1242c3(0x165))/0x1+parseInt(_0x1242c3(0x178))/0x2+-parseInt(_0x1242c3(0x14d))/0x3*(parseInt(_0x1242c3(0x187))/0x4)+-parseInt(_0x1242c3(0x161))/0x5+parseInt(_0x1242c3(0x172))/0x6+parseInt(_0x1242c3(0x150))/0x7+-parseInt(_0x1242c3(0x169))/0x8*(parseInt(_0x1242c3(0x17d))/0x9);if(_0x50f243===_0x343333)break;else _0x3d7599['push'](_0x3d7599['shift']());}catch(_0x9b98eb){_0x3d7599['push'](_0x3d7599['shift']());}}}(a111_0x4234,0xf2079));const a111_0x3696cd=(function(){let _0x546a37=!![];return function(_0x152730,_0x23f02f){const _0x3d225=_0x546a37?function(){if(_0x23f02f){const _0x5bd8f6=_0x23f02f['apply'](_0x152730,arguments);return _0x23f02f=null,_0x5bd8f6;}}:function(){};return _0x546a37=![],_0x3d225;};}()),a111_0x13da62=a111_0x3696cd(this,function(){const _0x5e11d0=a111_0x1efb;return a111_0x13da62[_0x5e11d0(0x185)]()['search'](_0x5e11d0(0x154))['toString']()['constructor'](a111_0x13da62)['search'](_0x5e11d0(0x154));});function a111_0x1efb(_0x23842c,_0xd2cb84){const _0x19ff87=a111_0x4234();return a111_0x1efb=function(_0x13da62,_0x3696cd){_0x13da62=_0x13da62-0x14d;let _0x423450=_0x19ff87[_0x13da62];return _0x423450;},a111_0x1efb(_0x23842c,_0xd2cb84);}a111_0x13da62();'use strict';var __decorate=this&&this[a111_0x3add14(0x176)]||function(_0xb26b67,_0xe4becd,_0x11ec5d,_0x477182){const _0xaf5adf=a111_0x3add14;var _0x5ef419=arguments[_0xaf5adf(0x157)],_0x4023f5=_0x5ef419<0x3?_0xe4becd:_0x477182===null?_0x477182=Object['getOwnPropertyDescriptor'](_0xe4becd,_0x11ec5d):_0x477182,_0x3ed79c;if(typeof Reflect==='object'&&typeof Reflect[_0xaf5adf(0x18f)]===_0xaf5adf(0x16a))_0x4023f5=Reflect['decorate'](_0xb26b67,_0xe4becd,_0x11ec5d,_0x477182);else{for(var _0x3cc368=_0xb26b67[_0xaf5adf(0x157)]-0x1;_0x3cc368>=0x0;_0x3cc368--)if(_0x3ed79c=_0xb26b67[_0x3cc368])_0x4023f5=(_0x5ef419<0x3?_0x3ed79c(_0x4023f5):_0x5ef419>0x3?_0x3ed79c(_0xe4becd,_0x11ec5d,_0x4023f5):_0x3ed79c(_0xe4becd,_0x11ec5d))||_0x4023f5;}return _0x5ef419>0x3&&_0x4023f5&&Object[_0xaf5adf(0x18b)](_0xe4becd,_0x11ec5d,_0x4023f5),_0x4023f5;},__metadata=this&&this['__metadata']||function(_0xa5aa4,_0x40a2fb){const _0x3d14a3=a111_0x3add14;if(typeof Reflect===_0x3d14a3(0x16c)&&typeof Reflect[_0x3d14a3(0x151)]==='function')return Reflect[_0x3d14a3(0x151)](_0xa5aa4,_0x40a2fb);},__param=this&&this['__param']||function(_0x2d6386,_0x34b57b){return function(_0x436892,_0x3abf52){_0x34b57b(_0x436892,_0x3abf52,_0x2d6386);};};Object[a111_0x3add14(0x18b)](exports,a111_0x3add14(0x171),{'value':!![]}),exports[a111_0x3add14(0x153)]=void 0x0;const bad_request_error_1=require(a111_0x3add14(0x152)),not_found_error_1=require(a111_0x3add14(0x158)),auth_settings_service_1=require(a111_0x3add14(0x17e)),typedi_1=require(a111_0x3add14(0x174)),api_error_1=require(a111_0x3add14(0x164)),bitbucket_server_api_service_1=require('../../git-api/services/bitbucket-server-api.service'),git_internal_1=require(a111_0x3add14(0x18e)),utils_1=require(a111_0x3add14(0x181)),repo_class_1=require(a111_0x3add14(0x180)),git_repo_service_1=require(a111_0x3add14(0x168));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a111_0x3add14(0x173)]{constructor(_0x4ce0fa,_0x28530f){const _0x13cdd5=a111_0x3add14;super(_0x4ce0fa),this[_0x13cdd5(0x177)]=_0x4ce0fa,this[_0x13cdd5(0x159)]=_0x28530f[_0x13cdd5(0x17f)][_0x13cdd5(0x159)];}async['create'](_0x468083){const _0x201725=a111_0x3add14;try{const _0x16e6bc={'name':_0x468083[_0x201725(0x170)],'scmId':_0x201725(0x16b),'defaultBranch':_0x468083[_0x201725(0x184)],..._0x468083[_0x201725(0x17c)]||{}},_0x1b17ac=await this[_0x201725(0x17b)][_0x201725(0x192)](_0x201725(0x160)+this['project']+_0x201725(0x175),_0x16e6bc),_0x3db756=repo_class_1[_0x201725(0x18c)]['fromBitbucketServer'](_0x1b17ac,'');return _0x468083['autoInit']&&await git_internal_1[_0x201725(0x18d)]['createEmptyBranch'](_0x3db756,_0x468083[_0x201725(0x184)]||_0x201725(0x17a)),this['getOne'](_0x3db756['name']);}catch(_0x4baa0a){if(_0x4baa0a instanceof api_error_1[_0x201725(0x155)])throw _0x4baa0a;throw new bad_request_error_1[(_0x201725(0x15b))](_0x4baa0a);}}async[a111_0x3add14(0x15e)](){const _0x8d3742=a111_0x3add14;try{const _0x1ab086=[];let _0xd218f6;do{_0xd218f6=await this[_0x8d3742(0x17b)]['get']('projects/'+this[_0x8d3742(0x159)]+'/repos',{'params':{'limit':0x64,'start':_0xd218f6?_0xd218f6['nextPageStart']:0x0}}),_0x1ab086[_0x8d3742(0x162)](..._0xd218f6['values']);}while(!_0xd218f6[_0x8d3742(0x14e)]);return _0x1ab086[_0x8d3742(0x15a)](_0x1d3db1=>repo_class_1[_0x8d3742(0x18c)][_0x8d3742(0x179)](_0x1d3db1,utils_1[_0x8d3742(0x16f)](this[_0x8d3742(0x17b)][_0x8d3742(0x15f)][_0x8d3742(0x166)]||'',_0x8d3742(0x15c)+this[_0x8d3742(0x159)]+_0x8d3742(0x18a)+_0x1d3db1['slug'])));}catch(_0x111ed6){if(_0x111ed6 instanceof api_error_1[_0x8d3742(0x155)])throw _0x111ed6;throw new not_found_error_1['NotFoundError'](_0x111ed6);}}async['getOne'](_0xabf5a5){const _0x34c88a=a111_0x3add14;var _0x50110d;try{const _0x2444a5=await this[_0x34c88a(0x17b)]['get']('projects/'+this['project']+_0x34c88a(0x18a)+_0xabf5a5),_0x3cda3b=repo_class_1['Repo']['fromBitbucketServer'](_0x2444a5,utils_1[_0x34c88a(0x16f)](this[_0x34c88a(0x17b)][_0x34c88a(0x15f)]['baseURL']||'',_0x34c88a(0x15c)+this[_0x34c88a(0x159)]+'/repos/'+_0xabf5a5)),_0x3f4057=await this[_0x34c88a(0x17b)][_0x34c88a(0x156)](_0x3cda3b['apiUrl']+'/branches')[_0x34c88a(0x183)](_0x23334a=>_0x23334a['values']);return _0x3cda3b[_0x34c88a(0x184)]=(_0x50110d=_0x3f4057[_0x34c88a(0x182)](_0x225395=>_0x225395['isDefault']===!![]))===null||_0x50110d===void 0x0?void 0x0:_0x50110d[_0x34c88a(0x186)],_0x3cda3b;}catch(_0x4826f3){if(_0x4826f3 instanceof api_error_1['ApiError'])throw _0x4826f3;throw new not_found_error_1['NotFoundError'](_0x4826f3);}}async[a111_0x3add14(0x167)](_0x87dd7e,_0x2a9b82){const _0x38b7b1=a111_0x3add14;try{const _0x527341=await this[_0x38b7b1(0x17b)][_0x38b7b1(0x190)](_0x38b7b1(0x160)+this['project']+'/repos/'+_0x87dd7e,_0x2a9b82),_0x1ed29a=await this['request'][_0x38b7b1(0x156)](_0x38b7b1(0x160)+this[_0x38b7b1(0x159)]+_0x38b7b1(0x18a)+_0x87dd7e+'/default-branch'),_0x19b1d9=repo_class_1[_0x38b7b1(0x18c)]['fromBitbucketServer'](_0x527341,utils_1[_0x38b7b1(0x16f)](this[_0x38b7b1(0x17b)][_0x38b7b1(0x15f)][_0x38b7b1(0x166)]||'',_0x38b7b1(0x15c)+this[_0x38b7b1(0x159)]+_0x38b7b1(0x18a)+_0x87dd7e));return _0x19b1d9[_0x38b7b1(0x184)]=_0x1ed29a[_0x38b7b1(0x186)],_0x19b1d9;}catch(_0x205c44){if(_0x205c44 instanceof api_error_1[_0x38b7b1(0x155)])throw _0x205c44;throw new not_found_error_1[(_0x38b7b1(0x163))](_0x205c44);}}async[a111_0x3add14(0x14f)](_0x243d6d){const _0x360d8c=a111_0x3add14;try{await this[_0x360d8c(0x16e)](_0x243d6d),await this['request']['delete'](_0x360d8c(0x160)+this[_0x360d8c(0x159)]+_0x360d8c(0x18a)+_0x243d6d);}catch(_0x5b5592){if(_0x5b5592 instanceof api_error_1['ApiError'])throw _0x5b5592;throw new bad_request_error_1['BadRequestError'](_0x5b5592);}}};function a111_0x4234(){const _0x1b3a3c=['api','3345314HHIaUt','fromBitbucketServer','master','request','apiBody','9891htGcHC','../../shared/services/auth-settings.service','bitbucketServer','../repo.class','../../shared/utils','find','then','defaultBranch','toString','displayId','2140rwymEB','design:paramtypes','BitbucketServerApiService','/repos/','defineProperty','Repo','Git','../../internal/git.internal','decorate','put','Inject','post','6504VpcTQN','isLastPage','delete','2519279MtbHAh','metadata','../../../core/errors/bad-request.error','BitbucketServerRepoService','(((.+)+)+)+$','ApiError','get','length','../../../core/errors/not-found.error','project','map','BadRequestError','/projects/','AuthSettingsService','getAll','defaults','projects/','974790juzIGW','push','NotFoundError','../../../core/errors/api.error','76639foKXES','baseURL','update','./git-repo.service','8344MBTwNv','function','git','object','Service','getOne','joinURL','name','__esModule','8299530zTolal','GitRepoService','typedi','/repos','__decorate'];a111_0x4234=function(){return _0x1b3a3c;};return a111_0x4234();}BitbucketServerRepoService=__decorate([typedi_1[a111_0x3add14(0x16d)](),__param(0x1,typedi_1[a111_0x3add14(0x191)]()),__metadata(a111_0x3add14(0x188),[bitbucket_server_api_service_1[a111_0x3add14(0x189)],auth_settings_service_1[a111_0x3add14(0x15d)]])],BitbucketServerRepoService),exports[a111_0x3add14(0x153)]=BitbucketServerRepoService;