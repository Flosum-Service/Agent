const a111_0x470251=a111_0x4fe5;(function(_0x4d86d6,_0x33bdd6){const _0x1c12dc=a111_0x4fe5,_0xf9aa0d=_0x4d86d6();while(!![]){try{const _0x15a6a9=parseInt(_0x1c12dc(0xb6))/0x1+-parseInt(_0x1c12dc(0x9e))/0x2*(parseInt(_0x1c12dc(0xb3))/0x3)+-parseInt(_0x1c12dc(0xd7))/0x4*(-parseInt(_0x1c12dc(0xce))/0x5)+parseInt(_0x1c12dc(0xb2))/0x6+-parseInt(_0x1c12dc(0xc3))/0x7+-parseInt(_0x1c12dc(0xda))/0x8+parseInt(_0x1c12dc(0xb8))/0x9;if(_0x15a6a9===_0x33bdd6)break;else _0xf9aa0d['push'](_0xf9aa0d['shift']());}catch(_0x47ae44){_0xf9aa0d['push'](_0xf9aa0d['shift']());}}}(a111_0x3065,0xd6759));const a111_0x5d716b=(function(){let _0x12086d=!![];return function(_0x7fb035,_0xe3da7c){const _0x417265=_0x12086d?function(){const _0x2800ab=a111_0x4fe5;if(_0xe3da7c){const _0x31b8ad=_0xe3da7c[_0x2800ab(0x9f)](_0x7fb035,arguments);return _0xe3da7c=null,_0x31b8ad;}}:function(){};return _0x12086d=![],_0x417265;};}()),a111_0x4351b5=a111_0x5d716b(this,function(){const _0x185c8b=a111_0x4fe5;return a111_0x4351b5[_0x185c8b(0xd2)]()['search'](_0x185c8b(0xd5))[_0x185c8b(0xd2)]()['constructor'](a111_0x4351b5)[_0x185c8b(0xc4)](_0x185c8b(0xd5));});a111_0x4351b5();function a111_0x4fe5(_0x1765f2,_0x1259c0){const _0x1be2ce=a111_0x3065();return a111_0x4fe5=function(_0x4351b5,_0x5d716b){_0x4351b5=_0x4351b5-0x9d;let _0x3065af=_0x1be2ce[_0x4351b5];return _0x3065af;},a111_0x4fe5(_0x1765f2,_0x1259c0);}'use strict';var __decorate=this&&this[a111_0x470251(0xb9)]||function(_0x53ac70,_0x2827e8,_0x1dce6d,_0xd4d0e9){const _0x3157fc=a111_0x470251;var _0x25324c=arguments[_0x3157fc(0xa9)],_0x1834f0=_0x25324c<0x3?_0x2827e8:_0xd4d0e9===null?_0xd4d0e9=Object[_0x3157fc(0xa4)](_0x2827e8,_0x1dce6d):_0xd4d0e9,_0x1dc00e;if(typeof Reflect===_0x3157fc(0xb4)&&typeof Reflect[_0x3157fc(0xd3)]===_0x3157fc(0xb1))_0x1834f0=Reflect['decorate'](_0x53ac70,_0x2827e8,_0x1dce6d,_0xd4d0e9);else{for(var _0x411d1f=_0x53ac70[_0x3157fc(0xa9)]-0x1;_0x411d1f>=0x0;_0x411d1f--)if(_0x1dc00e=_0x53ac70[_0x411d1f])_0x1834f0=(_0x25324c<0x3?_0x1dc00e(_0x1834f0):_0x25324c>0x3?_0x1dc00e(_0x2827e8,_0x1dce6d,_0x1834f0):_0x1dc00e(_0x2827e8,_0x1dce6d))||_0x1834f0;}return _0x25324c>0x3&&_0x1834f0&&Object[_0x3157fc(0xb0)](_0x2827e8,_0x1dce6d,_0x1834f0),_0x1834f0;},__metadata=this&&this['__metadata']||function(_0x139701,_0x4e4740){const _0x48570d=a111_0x470251;if(typeof Reflect===_0x48570d(0xb4)&&typeof Reflect['metadata']===_0x48570d(0xb1))return Reflect['metadata'](_0x139701,_0x4e4740);},__param=this&&this['__param']||function(_0x360ec9,_0xa1af40){return function(_0x4dd039,_0x56d130){_0xa1af40(_0x4dd039,_0x56d130,_0x360ec9);};};Object[a111_0x470251(0xb0)](exports,a111_0x470251(0xa7),{'value':!![]}),exports[a111_0x470251(0xc9)]=void 0x0;const bad_request_error_1=require(a111_0x470251(0xd9)),not_found_error_1=require(a111_0x470251(0xaf)),auth_settings_service_1=require(a111_0x470251(0xca)),typedi_1=require(a111_0x470251(0xba)),api_error_1=require(a111_0x470251(0xa8)),bitbucket_server_api_service_1=require(a111_0x470251(0xdb)),git_internal_1=require(a111_0x470251(0xbc)),utils_1=require(a111_0x470251(0xb7)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a111_0x470251(0xde));function a111_0x3065(){const _0x407b50=['../../shared/services/auth-settings.service','find','/repos/','autoInit','30dHqetd','slug','GitRepoService','request','toString','decorate','BitbucketServerApiService','(((.+)+)+)+$','defaults','375796HWBcdp','getAll','../../../core/errors/bad-request.error','2869320LtJZBp','../../git-api/services/bitbucket-server-api.service','api','Repo','./git-repo.service','joinURL','apiBody','Service','project','554hckpgi','apply','Inject','name','/default-branch','baseURL','getOwnPropertyDescriptor','getOne','isDefault','__esModule','../../../core/errors/api.error','length','then','values','get','Git','nextPageStart','../../../core/errors/not-found.error','defineProperty','function','5853774CMgOjZ','4425zpitGW','object','projects/','430987YpsmWm','../../shared/utils','3929841RvrAZS','__decorate','typedi','NotFoundError','../../internal/git.internal','defaultBranch','put','/projects/','fromBitbucketServer','delete','update','5329058OskkUA','search','git','/repos','master','ApiError','BitbucketServerRepoService'];a111_0x3065=function(){return _0x407b50;};return a111_0x3065();}let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a111_0x470251(0xd0)]{constructor(_0x576365,_0x2b6bd0){const _0x580768=a111_0x470251;super(_0x576365),this[_0x580768(0xdc)]=_0x576365,this[_0x580768(0x9d)]=_0x2b6bd0['bitbucketServer'][_0x580768(0x9d)];}async['create'](_0x108685){const _0x33ddc5=a111_0x470251;try{const _0x31060a={'name':_0x108685[_0x33ddc5(0xa1)],'scmId':_0x33ddc5(0xc5),'defaultBranch':_0x108685['defaultBranch'],..._0x108685[_0x33ddc5(0xe0)]||{}},_0x4996b0=await this[_0x33ddc5(0xd1)]['post'](_0x33ddc5(0xb5)+this[_0x33ddc5(0x9d)]+_0x33ddc5(0xc6),_0x31060a),_0x63d4e8=repo_class_1[_0x33ddc5(0xdd)][_0x33ddc5(0xc0)](_0x4996b0,'');return _0x108685[_0x33ddc5(0xcd)]&&await git_internal_1[_0x33ddc5(0xad)]['createEmptyBranch'](_0x63d4e8,_0x108685[_0x33ddc5(0xbd)]||_0x33ddc5(0xc7)),this['getOne'](_0x63d4e8[_0x33ddc5(0xa1)]);}catch(_0x5a186){if(_0x5a186 instanceof api_error_1['ApiError'])throw _0x5a186;throw new bad_request_error_1['BadRequestError'](_0x5a186);}}async[a111_0x470251(0xd8)](){const _0x5099bf=a111_0x470251;try{const _0x52c657=[];let _0x25aa8a;do{_0x25aa8a=await this[_0x5099bf(0xd1)][_0x5099bf(0xac)]('projects/'+this['project']+_0x5099bf(0xc6),{'params':{'limit':0x64,'start':_0x25aa8a?_0x25aa8a[_0x5099bf(0xae)]:0x0}}),_0x52c657['push'](..._0x25aa8a[_0x5099bf(0xab)]);}while(!_0x25aa8a['isLastPage']);return _0x52c657['map'](_0xf5dbc4=>repo_class_1[_0x5099bf(0xdd)]['fromBitbucketServer'](_0xf5dbc4,utils_1[_0x5099bf(0xdf)](this[_0x5099bf(0xd1)]['defaults'][_0x5099bf(0xa3)]||'',_0x5099bf(0xbf)+this['project']+_0x5099bf(0xcc)+_0xf5dbc4[_0x5099bf(0xcf)])));}catch(_0x48d14b){if(_0x48d14b instanceof api_error_1[_0x5099bf(0xc8)])throw _0x48d14b;throw new not_found_error_1[(_0x5099bf(0xbb))](_0x48d14b);}}async['getOne'](_0x3a3f2f){const _0x1e5e92=a111_0x470251;var _0x26b8c1;try{const _0x4c05fa=await this['request'][_0x1e5e92(0xac)]('projects/'+this[_0x1e5e92(0x9d)]+_0x1e5e92(0xcc)+_0x3a3f2f),_0x37827f=repo_class_1[_0x1e5e92(0xdd)]['fromBitbucketServer'](_0x4c05fa,utils_1[_0x1e5e92(0xdf)](this[_0x1e5e92(0xd1)][_0x1e5e92(0xd6)][_0x1e5e92(0xa3)]||'',_0x1e5e92(0xbf)+this[_0x1e5e92(0x9d)]+'/repos/'+_0x3a3f2f)),_0x3e95e9=await this[_0x1e5e92(0xd1)]['get'](_0x37827f['apiUrl']+'/branches')[_0x1e5e92(0xaa)](_0x521720=>_0x521720['values']);return _0x37827f['defaultBranch']=(_0x26b8c1=_0x3e95e9[_0x1e5e92(0xcb)](_0x1d7fed=>_0x1d7fed[_0x1e5e92(0xa6)]===!![]))===null||_0x26b8c1===void 0x0?void 0x0:_0x26b8c1['displayId'],_0x37827f;}catch(_0x364b46){if(_0x364b46 instanceof api_error_1[_0x1e5e92(0xc8)])throw _0x364b46;throw new not_found_error_1['NotFoundError'](_0x364b46);}}async[a111_0x470251(0xc2)](_0x397ccf,_0x24ea26){const _0xb509ad=a111_0x470251;try{const _0x518862=await this[_0xb509ad(0xd1)][_0xb509ad(0xbe)]('projects/'+this['project']+'/repos/'+_0x397ccf,_0x24ea26),_0x40f380=await this[_0xb509ad(0xd1)][_0xb509ad(0xac)](_0xb509ad(0xb5)+this['project']+_0xb509ad(0xcc)+_0x397ccf+_0xb509ad(0xa2)),_0xd10b38=repo_class_1[_0xb509ad(0xdd)][_0xb509ad(0xc0)](_0x518862,utils_1[_0xb509ad(0xdf)](this[_0xb509ad(0xd1)][_0xb509ad(0xd6)][_0xb509ad(0xa3)]||'',_0xb509ad(0xbf)+this[_0xb509ad(0x9d)]+_0xb509ad(0xcc)+_0x397ccf));return _0xd10b38[_0xb509ad(0xbd)]=_0x40f380['displayId'],_0xd10b38;}catch(_0x544027){if(_0x544027 instanceof api_error_1['ApiError'])throw _0x544027;throw new not_found_error_1['NotFoundError'](_0x544027);}}async[a111_0x470251(0xc1)](_0x2c9c4a){const _0x525cc7=a111_0x470251;try{await this[_0x525cc7(0xa5)](_0x2c9c4a),await this[_0x525cc7(0xd1)][_0x525cc7(0xc1)](_0x525cc7(0xb5)+this[_0x525cc7(0x9d)]+'/repos/'+_0x2c9c4a);}catch(_0x14b41b){if(_0x14b41b instanceof api_error_1[_0x525cc7(0xc8)])throw _0x14b41b;throw new bad_request_error_1['BadRequestError'](_0x14b41b);}}};BitbucketServerRepoService=__decorate([typedi_1[a111_0x470251(0xe1)](),__param(0x1,typedi_1[a111_0x470251(0xa0)]()),__metadata('design:paramtypes',[bitbucket_server_api_service_1[a111_0x470251(0xd4)],auth_settings_service_1['AuthSettingsService']])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;