const a73_0x159b70=a73_0x41d5;(function(_0x3f9b48,_0xefbc09){const _0x42ed4d=a73_0x41d5,_0x55da75=_0x3f9b48();while(!![]){try{const _0x435f1c=parseInt(_0x42ed4d(0x1c3))/0x1*(-parseInt(_0x42ed4d(0x1fc))/0x2)+parseInt(_0x42ed4d(0x1ff))/0x3+-parseInt(_0x42ed4d(0x1e5))/0x4*(parseInt(_0x42ed4d(0x1f3))/0x5)+parseInt(_0x42ed4d(0x1c9))/0x6+parseInt(_0x42ed4d(0x1f6))/0x7*(parseInt(_0x42ed4d(0x1e9))/0x8)+-parseInt(_0x42ed4d(0x209))/0x9+parseInt(_0x42ed4d(0x1e8))/0xa;if(_0x435f1c===_0xefbc09)break;else _0x55da75['push'](_0x55da75['shift']());}catch(_0x55ccf1){_0x55da75['push'](_0x55da75['shift']());}}}(a73_0x1853,0xde5c3));const a73_0x554150=(function(){let _0x2d8dab=!![];return function(_0xc02c66,_0xffa63b){const _0x4efc87=_0x2d8dab?function(){const _0x264872=a73_0x41d5;if(_0xffa63b){const _0x562d19=_0xffa63b[_0x264872(0x1e2)](_0xc02c66,arguments);return _0xffa63b=null,_0x562d19;}}:function(){};return _0x2d8dab=![],_0x4efc87;};}()),a73_0x301509=a73_0x554150(this,function(){const _0x291395=a73_0x41d5;return a73_0x301509[_0x291395(0x204)]()['search'](_0x291395(0x1ca))[_0x291395(0x204)]()[_0x291395(0x1dd)](a73_0x301509)[_0x291395(0x20a)](_0x291395(0x1ca));});a73_0x301509();function a73_0x1853(){const _0xd9f69d=['_request','ManagerAutomationProcess','readFile','_maskingManifest','_steps','jobId','keys','_managerAutomationProcess','enableAutomationProcess','details','AuthManager','constructor','setJobError','./classes/logger/logger-job-state','initAutomationProcess','gzip','apply','defineProperty','default','4yupbxd','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','../../shared/managers/auth.manager','23605560JeVHBD','625360TmACWB','getManifest','FAILED','MANIFEST_FILENAME','path','fs/promises','setJobStatus','_loggerDetails','message','IN_PROGRESS','8031515JeEQwA','init','log','49dIHzZj','error','writeFile','then','exception','Disable\x20automation\x20process','3154332NGbocH','@flosum/salesforce','utf-8','1552269HEUEDS','create','join','disableAutomationProcess','Start\x20Masking\x20Process','toString','systemLogger','enable','catch','LoggerJobState','10035162vMlDYl','search','from','_isEnableAutomationProcessError','push','masking','jobStorePath','./classes/step/steps-creator','../constants','execute','disableAutomation','JobStatus','1wRKmec','parse','base64','Finish\x20Masking\x20Process','./enums/logger.enums','getManagerAutomationProcessOptions','10704630lbXBSY','(((.+)+)+)+$','__importDefault','_loggerJobState','kill','__esModule','./job-detail','Enable\x20automation\x20process','StepsCreator'];a73_0x1853=function(){return _0xd9f69d;};return a73_0x1853();}'use strict';var __importDefault=this&&this[a73_0x159b70(0x1cb)]||function(_0x267c52){const _0x5ae4ec=a73_0x159b70;return _0x267c52&&_0x267c52[_0x5ae4ec(0x1ce)]?_0x267c52:{'default':_0x267c52};};function a73_0x41d5(_0x18a373,_0x5a5c87){const _0x480c7b=a73_0x1853();return a73_0x41d5=function(_0x301509,_0x554150){_0x301509=_0x301509-0x1bf;let _0x1853e6=_0x480c7b[_0x301509];return _0x1853e6;},a73_0x41d5(_0x18a373,_0x5a5c87);}Object[a73_0x159b70(0x1e3)](exports,a73_0x159b70(0x1ce),{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a73_0x159b70(0x1ee)),salesforce_1=require(a73_0x159b70(0x1fd)),steps_creator_1=require(a73_0x159b70(0x210)),logger_enums_1=require(a73_0x159b70(0x1c7)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require(a73_0x159b70(0x1df)),job_1=require('../../../constants/job'),path_1=__importDefault(require(a73_0x159b70(0x1ed))),auth_manager_1=require(a73_0x159b70(0x1e7)),constants_1=require(a73_0x159b70(0x1bf)),job_detail_1=require(a73_0x159b70(0x1cf));class MaskingJob{constructor(){const _0x5edb22=a73_0x159b70;this[_0x5edb22(0x20c)]=![];}async[a73_0x159b70(0x1e0)](){const _0x2187b1=a73_0x159b70,{objectRules:_0x32c16f}=this[_0x2187b1(0x1d5)];this['_managerAutomationProcess']=new salesforce_1[(_0x2187b1(0x1d3))](this[_0x2187b1(0x1c8)](_0x32c16f));}async[a73_0x159b70(0x20e)](){const _0x5e4065=a73_0x159b70;job_detail_1[_0x5e4065(0x205)][_0x5e4065(0x1f5)](_0x5e4065(0x203)),this[_0x5e4065(0x1f0)][_0x5e4065(0x1f5)](_0x5e4065(0x203));const {objectRules:_0x5ee8dd,libraries:_0x1a1c68}=this[_0x5e4065(0x1d5)];this['_steps']=await new steps_creator_1[(_0x5e4065(0x1d1))]({'loggerDetails':this[_0x5e4065(0x1f0)],'loggerJobState':this[_0x5e4065(0x1cc)],'libraries':_0x1a1c68,'objectRules':_0x5ee8dd,'request':this[_0x5e4065(0x1d2)]})['create']();for(const _0x14c38c of this[_0x5e4065(0x1d6)]){await _0x14c38c[_0x5e4065(0x1c0)]();}}[a73_0x159b70(0x1c8)](_0xace202){const _0x596326=a73_0x159b70,_0x4cd173=[],_0x36d011=[],_0x28c0c8=[],_0x44313d=[];for(const _0x2de36f in _0xace202){const {isDisableProcessBuilder:_0xcb8bb8,isDisableTrigger:_0x21ae8f,isDisableValidationRule:_0x158880,isDisableWorkflow:_0x3d886d}=_0xace202[_0x2de36f][_0x596326(0x1c1)];_0xcb8bb8&&_0x28c0c8[_0x596326(0x20d)](_0x2de36f),_0x21ae8f&&_0x4cd173[_0x596326(0x20d)](_0x2de36f),_0x158880&&_0x44313d['push'](_0x2de36f),_0x3d886d&&_0x36d011['push'](_0x2de36f);}return{'instance':this[_0x596326(0x1d2)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x4cd173,'workflowsObjects':_0x36d011,'processBuilderObjects':_0x28c0c8,'validationRulesObjects':_0x44313d};}async[a73_0x159b70(0x202)](){const _0x4ea694=a73_0x159b70;job_detail_1['systemLogger'][_0x4ea694(0x1f5)](_0x4ea694(0x1fb)),this['_loggerDetails'][_0x4ea694(0x1f5)]('Disable\x20automation\x20process'),await this[_0x4ea694(0x1d9)]['disable']();}async['enableAutomationProcess'](){const _0x5ccdca=a73_0x159b70;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x5ccdca(0x205)][_0x5ccdca(0x1f5)](_0x5ccdca(0x1d0)),this[_0x5ccdca(0x1f0)][_0x5ccdca(0x1f5)](_0x5ccdca(0x1d0)),await this[_0x5ccdca(0x1d9)][_0x5ccdca(0x206)]()[_0x5ccdca(0x207)](_0x597440=>{const _0x2e836c=_0x5ccdca;this[_0x2e836c(0x20c)]=!![];throw _0x597440;}));}async[a73_0x159b70(0x1ea)](){const _0x2d35dd=a73_0x159b70,_0x1b81e1=await(0x0,promises_1[_0x2d35dd(0x1d4)])(path_1['default']['join'](job_detail_1[_0x2d35dd(0x20f)],job_1[_0x2d35dd(0x1ec)]),{'encoding':_0x2d35dd(0x1fe)});return await(0x0,promises_1['rm'])(path_1['default'][_0x2d35dd(0x201)](job_detail_1[_0x2d35dd(0x20f)],job_1[_0x2d35dd(0x1ec)]),{'recursive':!![],'force':!![]}),JSON[_0x2d35dd(0x1c4)](_0x1b81e1)[_0x2d35dd(0x1db)];}['saveSourceAutomationProcessesBackup'](_0x3cd121){const _0x53ac3a=a73_0x159b70;return(0x0,promises_1[_0x53ac3a(0x1f8)])(path_1[_0x53ac3a(0x1e4)]['join'](job_detail_1['jobStorePath'],constants_1[_0x53ac3a(0x1e6)]),Buffer[_0x53ac3a(0x20b)](_0x3cd121,_0x53ac3a(0x1c5)));}async[a73_0x159b70(0x1c0)](){const _0xf33013=a73_0x159b70;this[_0xf33013(0x1d5)]=await this[_0xf33013(0x1ea)]();const {objectRules:_0x32301f,credentials:_0x53f89a}=this['_maskingManifest'];this['_loggerDetails']=await new logger_details_1['LoggerDetails'](job_detail_1[_0xf33013(0x20f)],job_detail_1['jobId'])['init'](),this[_0xf33013(0x1cc)]=await new logger_job_state_1[(_0xf33013(0x208))](job_detail_1[_0xf33013(0x20f)],job_detail_1[_0xf33013(0x1d7)])[_0xf33013(0x1f4)](Object[_0xf33013(0x1d8)](_0x32301f));try{this[_0xf33013(0x1cc)][_0xf33013(0x1ef)](logger_enums_1[_0xf33013(0x1c2)][_0xf33013(0x1f2)]),this[_0xf33013(0x1d2)]=await salesforce_1['AxiosInstanceUtils'][_0xf33013(0x200)](new auth_manager_1[(_0xf33013(0x1dc))](_0x53f89a),[],{'headers':{'Accept-Encoding':_0xf33013(0x1e1)}}),await this['initAutomationProcess'](),await this[_0xf33013(0x202)](),await this[_0xf33013(0x20e)](),await this[_0xf33013(0x1da)](),this[_0xf33013(0x1cc)]['setJobStatus'](logger_enums_1[_0xf33013(0x1c2)]['COMPLETED']);}catch(_0x2ba203){await this[_0xf33013(0x1da)]()[_0xf33013(0x207)](_0x6ed715=>{const _0x2df242=_0xf33013;job_detail_1[_0x2df242(0x205)][_0x2df242(0x1f7)](_0x6ed715[_0x2df242(0x1f1)]);}),this[_0xf33013(0x1f0)][_0xf33013(0x1fa)](_0x2ba203[_0xf33013(0x1f1)]),this[_0xf33013(0x1cc)][_0xf33013(0x1ef)](logger_enums_1[_0xf33013(0x1c2)][_0xf33013(0x1eb)]),this['_loggerJobState'][_0xf33013(0x1de)](_0x2ba203[_0xf33013(0x1f1)]),job_detail_1[_0xf33013(0x205)]['error'](_0x2ba203['message']);}finally{this[_0xf33013(0x1f0)][_0xf33013(0x1f5)](_0xf33013(0x1c6)),job_detail_1[_0xf33013(0x205)][_0xf33013(0x1f5)](_0xf33013(0x1c6)),await this['_loggerJobState'][_0xf33013(0x1cd)](),await this[_0xf33013(0x1f0)][_0xf33013(0x1cd)]();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()[a73_0x159b70(0x1c0)]()[a73_0x159b70(0x1f9)](()=>process['exit'](0x0))[a73_0x159b70(0x207)](()=>process['exit'](0x1));