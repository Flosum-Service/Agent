function a73_0x2abe(_0x253838,_0x400bb7){const _0x339a14=a73_0x5832();return a73_0x2abe=function(_0x1a6fb7,_0x3148a1){_0x1a6fb7=_0x1a6fb7-0xcd;let _0x5832cd=_0x339a14[_0x1a6fb7];return _0x5832cd;},a73_0x2abe(_0x253838,_0x400bb7);}const a73_0x968d56=a73_0x2abe;(function(_0x4b273e,_0x10d054){const _0x102fe0=a73_0x2abe,_0x37809f=_0x4b273e();while(!![]){try{const _0x5b9543=-parseInt(_0x102fe0(0xdd))/0x1+-parseInt(_0x102fe0(0x10a))/0x2+-parseInt(_0x102fe0(0xf4))/0x3+parseInt(_0x102fe0(0x107))/0x4*(-parseInt(_0x102fe0(0xe7))/0x5)+-parseInt(_0x102fe0(0xf0))/0x6+parseInt(_0x102fe0(0xe6))/0x7*(-parseInt(_0x102fe0(0xd3))/0x8)+-parseInt(_0x102fe0(0xea))/0x9*(-parseInt(_0x102fe0(0x10c))/0xa);if(_0x5b9543===_0x10d054)break;else _0x37809f['push'](_0x37809f['shift']());}catch(_0x5aa6f6){_0x37809f['push'](_0x37809f['shift']());}}}(a73_0x5832,0x2edaa));const a73_0x3148a1=(function(){let _0xfab35a=!![];return function(_0x4a3511,_0x19e9eb){const _0x271f0a=_0xfab35a?function(){const _0x10bea3=a73_0x2abe;if(_0x19e9eb){const _0x1fe529=_0x19e9eb[_0x10bea3(0xff)](_0x4a3511,arguments);return _0x19e9eb=null,_0x1fe529;}}:function(){};return _0xfab35a=![],_0x271f0a;};}()),a73_0x1a6fb7=a73_0x3148a1(this,function(){const _0x1965cc=a73_0x2abe;return a73_0x1a6fb7[_0x1965cc(0xd9)]()[_0x1965cc(0xe4)](_0x1965cc(0xd7))[_0x1965cc(0xd9)]()[_0x1965cc(0x112)](a73_0x1a6fb7)['search']('(((.+)+)+)+$');});a73_0x1a6fb7();'use strict';var __importDefault=this&&this[a73_0x968d56(0xec)]||function(_0x661095){const _0x28b852=a73_0x968d56;return _0x661095&&_0x661095[_0x28b852(0xce)]?_0x661095:{'default':_0x661095};};function a73_0x5832(){const _0x58606b=['search','./classes/step/steps-creator','7LXOTsk','10lDHtap','_maskingManifest','MANIFEST_FILENAME','17559837BHVKbu','jobStorePath','__importDefault','_steps','init','masking','1585200yXzqcJ','enableAutomationProcess','utf-8','kill','773247uBKBjy','getManagerAutomationProcessOptions','writeFile','base64','execute','JobStatus','join','COMPLETED','Finish\x20Masking\x20Process','AuthManager','Start\x20Masking\x20Process','apply','saveSourceAutomationProcessesBackup','setJobError','IN_PROGRESS','defineProperty','create','initAutomationProcess','StepsCreator','744936VttGLH','gzip','push','343620wuMVjm','AxiosInstanceUtils','10jySyQf','log','disable','default','enable','_isEnableAutomationProcessError','constructor','jobId','message','_loggerDetails','from','__esModule','systemLogger','setJobStatus','@flosum/salesforce','readFile','2911912YzWQQb','LoggerJobState','_loggerJobState','../../../constants/job','(((.+)+)+)+$','Disable\x20automation\x20process','toString','catch','disableAutomationProcess','_request','328963aWnlAT','exit','error','getManifest','then','_managerAutomationProcess','../constants'];a73_0x5832=function(){return _0x58606b;};return a73_0x5832();}Object[a73_0x968d56(0x103)](exports,'__esModule',{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require('fs/promises'),salesforce_1=require(a73_0x968d56(0xd1)),steps_creator_1=require(a73_0x968d56(0xe5)),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require(a73_0x968d56(0xd6)),path_1=__importDefault(require('path')),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a73_0x968d56(0xe3)),job_detail_1=require('./job-detail');class MaskingJob{constructor(){const _0x380bc2=a73_0x968d56;this[_0x380bc2(0x111)]=![];}async[a73_0x968d56(0x105)](){const _0x117028=a73_0x968d56,{objectRules:_0x164189}=this[_0x117028(0xe8)];this[_0x117028(0xe2)]=new salesforce_1['ManagerAutomationProcess'](this[_0x117028(0xf5)](_0x164189));}async[a73_0x968d56(0xef)](){const _0x463214=a73_0x968d56;job_detail_1[_0x463214(0xcf)][_0x463214(0x10d)](_0x463214(0xfe)),this[_0x463214(0x115)]['log'](_0x463214(0xfe));const {objectRules:_0x3043bf,libraries:_0x454d2d}=this['_maskingManifest'];this[_0x463214(0xed)]=await new steps_creator_1[(_0x463214(0x106))]({'loggerDetails':this[_0x463214(0x115)],'loggerJobState':this[_0x463214(0xd5)],'libraries':_0x454d2d,'objectRules':_0x3043bf,'request':this[_0x463214(0xdc)]})[_0x463214(0x104)]();for(const _0xcd0f4c of this[_0x463214(0xed)]){await _0xcd0f4c[_0x463214(0xf8)]();}}['getManagerAutomationProcessOptions'](_0xf78e9b){const _0x11c3de=a73_0x968d56,_0x23c163=[],_0x3d2e0f=[],_0x3b4637=[],_0x455dea=[];for(const _0x28ec88 in _0xf78e9b){const {isDisableProcessBuilder:_0x5b9423,isDisableTrigger:_0x3d3c25,isDisableValidationRule:_0x5de92e,isDisableWorkflow:_0x30bb3a}=_0xf78e9b[_0x28ec88]['disableAutomation'];_0x5b9423&&_0x3b4637[_0x11c3de(0x109)](_0x28ec88),_0x3d3c25&&_0x23c163[_0x11c3de(0x109)](_0x28ec88),_0x5de92e&&_0x455dea['push'](_0x28ec88),_0x30bb3a&&_0x3d2e0f[_0x11c3de(0x109)](_0x28ec88);}return{'instance':this[_0x11c3de(0xdc)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x23c163,'workflowsObjects':_0x3d2e0f,'processBuilderObjects':_0x3b4637,'validationRulesObjects':_0x455dea};}async[a73_0x968d56(0xdb)](){const _0x1c9282=a73_0x968d56;job_detail_1['systemLogger'][_0x1c9282(0x10d)](_0x1c9282(0xd8)),this[_0x1c9282(0x115)]['log']('Disable\x20automation\x20process'),await this[_0x1c9282(0xe2)][_0x1c9282(0x10e)]();}async[a73_0x968d56(0xf1)](){const _0x16c3c6=a73_0x968d56;!this[_0x16c3c6(0x111)]&&(job_detail_1[_0x16c3c6(0xcf)]['log']('Enable\x20automation\x20process'),this[_0x16c3c6(0x115)][_0x16c3c6(0x10d)]('Enable\x20automation\x20process'),await this['_managerAutomationProcess'][_0x16c3c6(0x110)]()[_0x16c3c6(0xda)](_0x559838=>{const _0x289d4a=_0x16c3c6;this[_0x289d4a(0x111)]=!![];throw _0x559838;}));}async[a73_0x968d56(0xe0)](){const _0x3dde76=a73_0x968d56,_0x39fede=await(0x0,promises_1[_0x3dde76(0xd2)])(path_1[_0x3dde76(0x10f)][_0x3dde76(0xfa)](job_detail_1[_0x3dde76(0xeb)],job_1[_0x3dde76(0xe9)]),{'encoding':_0x3dde76(0xf2)});return await(0x0,promises_1['rm'])(path_1[_0x3dde76(0x10f)]['join'](job_detail_1[_0x3dde76(0xeb)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON['parse'](_0x39fede)['details'];}[a73_0x968d56(0x100)](_0x27f07a){const _0x581885=a73_0x968d56;return(0x0,promises_1[_0x581885(0xf6)])(path_1['default'][_0x581885(0xfa)](job_detail_1['jobStorePath'],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x581885(0xcd)](_0x27f07a,_0x581885(0xf7)));}async[a73_0x968d56(0xf8)](){const _0x2481eb=a73_0x968d56;this[_0x2481eb(0xe8)]=await this[_0x2481eb(0xe0)]();const {objectRules:_0x51598e,credentials:_0x1e168d}=this[_0x2481eb(0xe8)];this['_loggerDetails']=await new logger_details_1['LoggerDetails'](job_detail_1[_0x2481eb(0xeb)],job_detail_1[_0x2481eb(0x113)])[_0x2481eb(0xee)](),this[_0x2481eb(0xd5)]=await new logger_job_state_1[(_0x2481eb(0xd4))](job_detail_1['jobStorePath'],job_detail_1['jobId'])[_0x2481eb(0xee)](Object['keys'](_0x51598e));try{this[_0x2481eb(0xd5)][_0x2481eb(0xd0)](logger_enums_1[_0x2481eb(0xf9)][_0x2481eb(0x102)]),this['_request']=await salesforce_1[_0x2481eb(0x10b)][_0x2481eb(0x104)](new auth_manager_1[(_0x2481eb(0xfd))](_0x1e168d),[],{'headers':{'Accept-Encoding':_0x2481eb(0x108)}}),await this['initAutomationProcess'](),await this[_0x2481eb(0xdb)](),await this[_0x2481eb(0xef)](),await this['enableAutomationProcess'](),this[_0x2481eb(0xd5)][_0x2481eb(0xd0)](logger_enums_1['JobStatus'][_0x2481eb(0xfb)]);}catch(_0x1677d6){await this[_0x2481eb(0xf1)]()['catch'](_0x25df3f=>{const _0x2151e0=_0x2481eb;job_detail_1['systemLogger'][_0x2151e0(0xdf)](_0x25df3f[_0x2151e0(0x114)]);}),this[_0x2481eb(0x115)]['exception'](_0x1677d6[_0x2481eb(0x114)]),this[_0x2481eb(0xd5)][_0x2481eb(0xd0)](logger_enums_1['JobStatus']['FAILED']),this['_loggerJobState'][_0x2481eb(0x101)](_0x1677d6[_0x2481eb(0x114)]),job_detail_1['systemLogger'][_0x2481eb(0xdf)](_0x1677d6[_0x2481eb(0x114)]);}finally{this[_0x2481eb(0x115)]['log'](_0x2481eb(0xfc)),job_detail_1['systemLogger'][_0x2481eb(0x10d)](_0x2481eb(0xfc)),await this[_0x2481eb(0xd5)][_0x2481eb(0xf3)](),await this[_0x2481eb(0x115)]['kill']();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()[a73_0x968d56(0xf8)]()[a73_0x968d56(0xe1)](()=>process[a73_0x968d56(0xde)](0x0))[a73_0x968d56(0xda)](()=>process['exit'](0x1));