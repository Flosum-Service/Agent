const a73_0x18178d=a73_0x6aa6;(function(_0x517c08,_0x2c5154){const _0x5b6f7a=a73_0x6aa6,_0x25189f=_0x517c08();while(!![]){try{const _0x4717de=-parseInt(_0x5b6f7a(0xe8))/0x1*(-parseInt(_0x5b6f7a(0xf0))/0x2)+parseInt(_0x5b6f7a(0xe7))/0x3+parseInt(_0x5b6f7a(0xe6))/0x4*(-parseInt(_0x5b6f7a(0xd2))/0x5)+-parseInt(_0x5b6f7a(0xed))/0x6+-parseInt(_0x5b6f7a(0xfc))/0x7*(parseInt(_0x5b6f7a(0x106))/0x8)+-parseInt(_0x5b6f7a(0xeb))/0x9*(-parseInt(_0x5b6f7a(0xf3))/0xa)+-parseInt(_0x5b6f7a(0x109))/0xb*(-parseInt(_0x5b6f7a(0xc1))/0xc);if(_0x4717de===_0x2c5154)break;else _0x25189f['push'](_0x25189f['shift']());}catch(_0x357b0b){_0x25189f['push'](_0x25189f['shift']());}}}(a73_0x3697,0x48bc5));function a73_0x6aa6(_0x34525c,_0x46a5a8){const _0xc6fd11=a73_0x3697();return a73_0x6aa6=function(_0x178e87,_0x233f1a){_0x178e87=_0x178e87-0xbf;let _0x369714=_0xc6fd11[_0x178e87];return _0x369714;},a73_0x6aa6(_0x34525c,_0x46a5a8);}const a73_0x233f1a=(function(){let _0x1e679a=!![];return function(_0x198eee,_0x400786){const _0x379798=_0x1e679a?function(){if(_0x400786){const _0x1b7038=_0x400786['apply'](_0x198eee,arguments);return _0x400786=null,_0x1b7038;}}:function(){};return _0x1e679a=![],_0x379798;};}()),a73_0x178e87=a73_0x233f1a(this,function(){const _0x18e155=a73_0x6aa6;return a73_0x178e87['toString']()[_0x18e155(0xd1)](_0x18e155(0xce))[_0x18e155(0x105)]()[_0x18e155(0x10d)](a73_0x178e87)['search'](_0x18e155(0xce));});a73_0x178e87();'use strict';function a73_0x3697(){const _0xab064c=['_request','./classes/step/steps-creator','enable','toString','56JPQWpG','message','_isEnableAutomationProcessError','236819jqbWdU','Disable\x20automation\x20process','_maskingManifest','_loggerJobState','constructor','masking','_loggerDetails','./classes/logger/logger-job-state','__importDefault','disableAutomation','132QNfIil','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','utf-8','jobStorePath','init','log','__esModule','MANIFEST_FILENAME','error','parse','base64','jobId','enableAutomationProcess','(((.+)+)+)+$','AuthManager','defineProperty','search','5favXtn','FAILED','_managerAutomationProcess','COMPLETED','AxiosInstanceUtils','join','setJobStatus','_steps','./enums/logger.enums','default','create','MaskingJob','path','getManagerAutomationProcessOptions','disable','execute','disableAutomationProcess','./classes/logger/logger-details','initAutomationProcess','LoggerJobState','539324TdSweh','1524834hpsqln','26716FyDpNl','from','Finish\x20Masking\x20Process','160785cHfTTX','keys','777036ulLQyX','ManagerAutomationProcess','gzip','14yggyUS','push','catch','120RQlxKZ','getManifest','then','StepsCreator','exception','saveSourceAutomationProcessesBackup','systemLogger','Start\x20Masking\x20Process','JobStatus','584227HyBHeQ','LoggerDetails','exit','fs/promises','kill','Enable\x20automation\x20process'];a73_0x3697=function(){return _0xab064c;};return a73_0x3697();}var __importDefault=this&&this[a73_0x18178d(0xbf)]||function(_0x4fd6bf){const _0x5f0609=a73_0x18178d;return _0x4fd6bf&&_0x4fd6bf[_0x5f0609(0xc7)]?_0x4fd6bf:{'default':_0x4fd6bf};};Object[a73_0x18178d(0xd0)](exports,'__esModule',{'value':!![]}),exports[a73_0x18178d(0xdd)]=void 0x0;const promises_1=require(a73_0x18178d(0xff)),salesforce_1=require('@flosum/salesforce'),steps_creator_1=require(a73_0x18178d(0x103)),logger_enums_1=require(a73_0x18178d(0xda)),logger_details_1=require(a73_0x18178d(0xe3)),logger_job_state_1=require(a73_0x18178d(0x110)),job_1=require('../../../constants/job'),path_1=__importDefault(require(a73_0x18178d(0xde))),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require('../constants'),job_detail_1=require('./job-detail');class MaskingJob{constructor(){this['_isEnableAutomationProcessError']=![];}async[a73_0x18178d(0xe4)](){const _0x118628=a73_0x18178d,{objectRules:_0x4eeb8c}=this['_maskingManifest'];this[_0x118628(0xd4)]=new salesforce_1[(_0x118628(0xee))](this[_0x118628(0xdf)](_0x4eeb8c));}async['masking'](){const _0x18c853=a73_0x18178d;job_detail_1[_0x18c853(0xf9)][_0x18c853(0xc6)](_0x18c853(0xfa)),this[_0x18c853(0x10f)][_0x18c853(0xc6)](_0x18c853(0xfa));const {objectRules:_0x5c0169,libraries:_0x1a25db}=this[_0x18c853(0x10b)];this[_0x18c853(0xd9)]=await new steps_creator_1[(_0x18c853(0xf6))]({'loggerDetails':this[_0x18c853(0x10f)],'loggerJobState':this['_loggerJobState'],'libraries':_0x1a25db,'objectRules':_0x5c0169,'request':this[_0x18c853(0x102)]})[_0x18c853(0xdc)]();for(const _0x104cdb of this[_0x18c853(0xd9)]){await _0x104cdb[_0x18c853(0xe1)]();}}['getManagerAutomationProcessOptions'](_0x1d3643){const _0x15bcf1=a73_0x18178d,_0x5da8f9=[],_0x1ed62e=[],_0xad4d41=[],_0x4c69ad=[];for(const _0x5c3716 in _0x1d3643){const {isDisableProcessBuilder:_0x315887,isDisableTrigger:_0x111a59,isDisableValidationRule:_0xd59284,isDisableWorkflow:_0x4ad715}=_0x1d3643[_0x5c3716][_0x15bcf1(0xc0)];_0x315887&&_0xad4d41[_0x15bcf1(0xf1)](_0x5c3716),_0x111a59&&_0x5da8f9[_0x15bcf1(0xf1)](_0x5c3716),_0xd59284&&_0x4c69ad[_0x15bcf1(0xf1)](_0x5c3716),_0x4ad715&&_0x1ed62e['push'](_0x5c3716);}return{'instance':this[_0x15bcf1(0x102)],'saveSourceMetadataBackup':this[_0x15bcf1(0xf8)],'triggersObjects':_0x5da8f9,'workflowsObjects':_0x1ed62e,'processBuilderObjects':_0xad4d41,'validationRulesObjects':_0x4c69ad};}async[a73_0x18178d(0xe2)](){const _0x44569d=a73_0x18178d;job_detail_1['systemLogger'][_0x44569d(0xc6)](_0x44569d(0x10a)),this['_loggerDetails'][_0x44569d(0xc6)]('Disable\x20automation\x20process'),await this['_managerAutomationProcess'][_0x44569d(0xe0)]();}async[a73_0x18178d(0xcd)](){const _0x507c41=a73_0x18178d;!this[_0x507c41(0x108)]&&(job_detail_1[_0x507c41(0xf9)][_0x507c41(0xc6)](_0x507c41(0x101)),this['_loggerDetails']['log'](_0x507c41(0x101)),await this[_0x507c41(0xd4)][_0x507c41(0x104)]()[_0x507c41(0xf2)](_0x114797=>{const _0x24add1=_0x507c41;this[_0x24add1(0x108)]=!![];throw _0x114797;}));}async['getManifest'](){const _0x16319f=a73_0x18178d,_0x42dad0=await(0x0,promises_1['readFile'])(path_1['default'][_0x16319f(0xd7)](job_detail_1[_0x16319f(0xc4)],job_1[_0x16319f(0xc8)]),{'encoding':_0x16319f(0xc3)});return await(0x0,promises_1['rm'])(path_1[_0x16319f(0xdb)][_0x16319f(0xd7)](job_detail_1[_0x16319f(0xc4)],job_1[_0x16319f(0xc8)]),{'recursive':!![],'force':!![]}),JSON[_0x16319f(0xca)](_0x42dad0)['details'];}[a73_0x18178d(0xf8)](_0x47af32){const _0x142407=a73_0x18178d;return(0x0,promises_1['writeFile'])(path_1['default']['join'](job_detail_1[_0x142407(0xc4)],constants_1[_0x142407(0xc2)]),Buffer[_0x142407(0xe9)](_0x47af32,_0x142407(0xcb)));}async[a73_0x18178d(0xe1)](){const _0x424812=a73_0x18178d;this['_maskingManifest']=await this[_0x424812(0xf4)]();const {objectRules:_0x57a5d9,credentials:_0x26a499}=this[_0x424812(0x10b)];this['_loggerDetails']=await new logger_details_1[(_0x424812(0xfd))](job_detail_1[_0x424812(0xc4)],job_detail_1[_0x424812(0xcc)])[_0x424812(0xc5)](),this[_0x424812(0x10c)]=await new logger_job_state_1[(_0x424812(0xe5))](job_detail_1[_0x424812(0xc4)],job_detail_1[_0x424812(0xcc)])['init'](Object[_0x424812(0xec)](_0x57a5d9));try{this[_0x424812(0x10c)]['setJobStatus'](logger_enums_1[_0x424812(0xfb)]['IN_PROGRESS']),this[_0x424812(0x102)]=await salesforce_1[_0x424812(0xd6)][_0x424812(0xdc)](new auth_manager_1[(_0x424812(0xcf))](_0x26a499),[],{'headers':{'Accept-Encoding':_0x424812(0xef)}}),await this['initAutomationProcess'](),await this[_0x424812(0xe2)](),await this[_0x424812(0x10e)](),await this[_0x424812(0xcd)](),this[_0x424812(0x10c)][_0x424812(0xd8)](logger_enums_1['JobStatus'][_0x424812(0xd5)]);}catch(_0x1e5703){await this[_0x424812(0xcd)]()[_0x424812(0xf2)](_0x14625d=>{const _0x503e5e=_0x424812;job_detail_1['systemLogger'][_0x503e5e(0xc9)](_0x14625d[_0x503e5e(0x107)]);}),this[_0x424812(0x10f)][_0x424812(0xf7)](_0x1e5703['message']),this[_0x424812(0x10c)][_0x424812(0xd8)](logger_enums_1[_0x424812(0xfb)][_0x424812(0xd3)]),this['_loggerJobState']['setJobError'](_0x1e5703[_0x424812(0x107)]),job_detail_1[_0x424812(0xf9)][_0x424812(0xc9)](_0x1e5703[_0x424812(0x107)]);}finally{this[_0x424812(0x10f)][_0x424812(0xc6)]('Finish\x20Masking\x20Process'),job_detail_1['systemLogger'][_0x424812(0xc6)](_0x424812(0xea)),await this[_0x424812(0x10c)][_0x424812(0x100)](),await this[_0x424812(0x10f)][_0x424812(0x100)]();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()['execute']()[a73_0x18178d(0xf5)](()=>process[a73_0x18178d(0xfe)](0x0))[a73_0x18178d(0xf2)](()=>process['exit'](0x1));