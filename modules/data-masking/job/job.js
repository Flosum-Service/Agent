const a73_0x4fefeb=a73_0x5e6c;(function(_0x14c157,_0x5b5b97){const _0x53acd1=a73_0x5e6c,_0x5b7649=_0x14c157();while(!![]){try{const _0x5aca04=-parseInt(_0x53acd1(0xcb))/0x1*(-parseInt(_0x53acd1(0xd3))/0x2)+-parseInt(_0x53acd1(0xda))/0x3+-parseInt(_0x53acd1(0x10c))/0x4*(parseInt(_0x53acd1(0xe0))/0x5)+parseInt(_0x53acd1(0xf3))/0x6+parseInt(_0x53acd1(0xd8))/0x7*(parseInt(_0x53acd1(0xfb))/0x8)+-parseInt(_0x53acd1(0xc5))/0x9*(parseInt(_0x53acd1(0xc7))/0xa)+parseInt(_0x53acd1(0xd2))/0xb;if(_0x5aca04===_0x5b5b97)break;else _0x5b7649['push'](_0x5b7649['shift']());}catch(_0x59805c){_0x5b7649['push'](_0x5b7649['shift']());}}}(a73_0x3d52,0x2742d));const a73_0xadc5da=(function(){let _0x383f6d=!![];return function(_0x27a59b,_0x2a8166){const _0x5ac28f=_0x383f6d?function(){const _0x1e8df0=a73_0x5e6c;if(_0x2a8166){const _0xfb5394=_0x2a8166[_0x1e8df0(0xc6)](_0x27a59b,arguments);return _0x2a8166=null,_0xfb5394;}}:function(){};return _0x383f6d=![],_0x5ac28f;};}()),a73_0x285267=a73_0xadc5da(this,function(){const _0xe35bb3=a73_0x5e6c;return a73_0x285267[_0xe35bb3(0xe8)]()[_0xe35bb3(0xf2)](_0xe35bb3(0x10b))[_0xe35bb3(0xe8)]()['constructor'](a73_0x285267)[_0xe35bb3(0xf2)]('(((.+)+)+)+$');});a73_0x285267();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5e9917){const _0x66be30=a73_0x5e6c;return _0x5e9917&&_0x5e9917[_0x66be30(0xf8)]?_0x5e9917:{'default':_0x5e9917};};Object[a73_0x4fefeb(0xc4)](exports,a73_0x4fefeb(0xf8),{'value':!![]}),exports[a73_0x4fefeb(0x106)]=void 0x0;function a73_0x3d52(){const _0xee4937=['1064503enOHPq','1514RUyXJS','@flosum/salesforce','disable','_steps','then','102109KnxBCW','disableAutomation','477423Hqnhdn','_managerAutomationProcess','AxiosInstanceUtils','_loggerDetails','fs/promises','_isEnableAutomationProcessError','5lALMNi','LoggerDetails','LoggerJobState','COMPLETED','getManifest','IN_PROGRESS','exit','base64','toString','getManagerAutomationProcessOptions','push','message','enableAutomationProcess','disableAutomationProcess','Start\x20Masking\x20Process','./enums/logger.enums','JobStatus','jobStorePath','search','59988eLrZhD','FAILED','_loggerJobState','default','create','__esModule','_maskingManifest','masking','176xKtWOf','MANIFEST_FILENAME','from','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','join','readFile','../../shared/managers/auth.manager','Disable\x20automation\x20process','systemLogger','path','./classes/step/steps-creator','MaskingJob','AuthManager','setJobStatus','catch','saveSourceAutomationProcessesBackup','(((.+)+)+)+$','1097212ozkADS','Finish\x20Masking\x20Process','jobId','init','gzip','./classes/logger/logger-job-state','log','initAutomationProcess','utf-8','kill','../../../constants/job','defineProperty','67842abiHCY','apply','10lHzXTZ','../constants','execute','error','230TZUsbV','_request','Enable\x20automation\x20process','ManagerAutomationProcess','writeFile','./job-detail','enable'];a73_0x3d52=function(){return _0xee4937;};return a73_0x3d52();}const promises_1=require(a73_0x4fefeb(0xde)),salesforce_1=require(a73_0x4fefeb(0xd4)),steps_creator_1=require(a73_0x4fefeb(0x105)),logger_enums_1=require(a73_0x4fefeb(0xef)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require(a73_0x4fefeb(0x111)),job_1=require(a73_0x4fefeb(0xc3)),path_1=__importDefault(require(a73_0x4fefeb(0x104))),auth_manager_1=require(a73_0x4fefeb(0x101)),constants_1=require(a73_0x4fefeb(0xc8)),job_detail_1=require(a73_0x4fefeb(0xd0));function a73_0x5e6c(_0x455f4e,_0x334524){const _0x1ac31a=a73_0x3d52();return a73_0x5e6c=function(_0x285267,_0xadc5da){_0x285267=_0x285267-0xbf;let _0x3d52cf=_0x1ac31a[_0x285267];return _0x3d52cf;},a73_0x5e6c(_0x455f4e,_0x334524);}class MaskingJob{constructor(){const _0x150d14=a73_0x4fefeb;this[_0x150d14(0xdf)]=![];}async[a73_0x4fefeb(0xc0)](){const _0x32d616=a73_0x4fefeb,{objectRules:_0xf1ab96}=this[_0x32d616(0xf9)];this[_0x32d616(0xdb)]=new salesforce_1[(_0x32d616(0xce))](this[_0x32d616(0xe9)](_0xf1ab96));}async[a73_0x4fefeb(0xfa)](){const _0x3433ff=a73_0x4fefeb;job_detail_1[_0x3433ff(0x103)][_0x3433ff(0xbf)]('Start\x20Masking\x20Process'),this[_0x3433ff(0xdd)][_0x3433ff(0xbf)](_0x3433ff(0xee));const {objectRules:_0x72ea46,libraries:_0x26be51}=this[_0x3433ff(0xf9)];this[_0x3433ff(0xd6)]=await new steps_creator_1['StepsCreator']({'loggerDetails':this[_0x3433ff(0xdd)],'loggerJobState':this[_0x3433ff(0xf5)],'libraries':_0x26be51,'objectRules':_0x72ea46,'request':this[_0x3433ff(0xcc)]})[_0x3433ff(0xf7)]();for(const _0x15a159 of this['_steps']){await _0x15a159['execute']();}}[a73_0x4fefeb(0xe9)](_0xf965f3){const _0x43928a=a73_0x4fefeb,_0x452963=[],_0x3b6881=[],_0x3c7049=[],_0x46945f=[];for(const _0x205135 in _0xf965f3){const {isDisableProcessBuilder:_0x5809b7,isDisableTrigger:_0x52d3b2,isDisableValidationRule:_0x584e40,isDisableWorkflow:_0x1214cb}=_0xf965f3[_0x205135][_0x43928a(0xd9)];_0x5809b7&&_0x3c7049[_0x43928a(0xea)](_0x205135),_0x52d3b2&&_0x452963[_0x43928a(0xea)](_0x205135),_0x584e40&&_0x46945f['push'](_0x205135),_0x1214cb&&_0x3b6881[_0x43928a(0xea)](_0x205135);}return{'instance':this[_0x43928a(0xcc)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x452963,'workflowsObjects':_0x3b6881,'processBuilderObjects':_0x3c7049,'validationRulesObjects':_0x46945f};}async['disableAutomationProcess'](){const _0x4419c8=a73_0x4fefeb;job_detail_1[_0x4419c8(0x103)][_0x4419c8(0xbf)](_0x4419c8(0x102)),this['_loggerDetails']['log']('Disable\x20automation\x20process'),await this[_0x4419c8(0xdb)][_0x4419c8(0xd5)]();}async['enableAutomationProcess'](){const _0x19a66e=a73_0x4fefeb;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x19a66e(0x103)][_0x19a66e(0xbf)](_0x19a66e(0xcd)),this['_loggerDetails'][_0x19a66e(0xbf)]('Enable\x20automation\x20process'),await this[_0x19a66e(0xdb)][_0x19a66e(0xd1)]()[_0x19a66e(0x109)](_0x3216cd=>{const _0x5d8a3d=_0x19a66e;this[_0x5d8a3d(0xdf)]=!![];throw _0x3216cd;}));}async[a73_0x4fefeb(0xe4)](){const _0x213abb=a73_0x4fefeb,_0x293dbd=await(0x0,promises_1[_0x213abb(0x100)])(path_1['default'][_0x213abb(0xff)](job_detail_1[_0x213abb(0xf1)],job_1['MANIFEST_FILENAME']),{'encoding':_0x213abb(0xc1)});return await(0x0,promises_1['rm'])(path_1[_0x213abb(0xf6)]['join'](job_detail_1[_0x213abb(0xf1)],job_1[_0x213abb(0xfc)]),{'recursive':!![],'force':!![]}),JSON['parse'](_0x293dbd)['details'];}[a73_0x4fefeb(0x10a)](_0x134e73){const _0x2346e1=a73_0x4fefeb;return(0x0,promises_1[_0x2346e1(0xcf)])(path_1[_0x2346e1(0xf6)][_0x2346e1(0xff)](job_detail_1[_0x2346e1(0xf1)],constants_1[_0x2346e1(0xfe)]),Buffer[_0x2346e1(0xfd)](_0x134e73,_0x2346e1(0xe7)));}async[a73_0x4fefeb(0xc9)](){const _0x26529c=a73_0x4fefeb;this['_maskingManifest']=await this[_0x26529c(0xe4)]();const {objectRules:_0x1145de,credentials:_0x1dba29}=this['_maskingManifest'];this[_0x26529c(0xdd)]=await new logger_details_1[(_0x26529c(0xe1))](job_detail_1['jobStorePath'],job_detail_1[_0x26529c(0x10e)])[_0x26529c(0x10f)](),this['_loggerJobState']=await new logger_job_state_1[(_0x26529c(0xe2))](job_detail_1[_0x26529c(0xf1)],job_detail_1['jobId'])['init'](Object['keys'](_0x1145de));try{this[_0x26529c(0xf5)][_0x26529c(0x108)](logger_enums_1[_0x26529c(0xf0)][_0x26529c(0xe5)]),this[_0x26529c(0xcc)]=await salesforce_1[_0x26529c(0xdc)][_0x26529c(0xf7)](new auth_manager_1[(_0x26529c(0x107))](_0x1dba29),[],{'headers':{'Accept-Encoding':_0x26529c(0x110)}}),await this[_0x26529c(0xc0)](),await this[_0x26529c(0xed)](),await this[_0x26529c(0xfa)](),await this['enableAutomationProcess'](),this[_0x26529c(0xf5)][_0x26529c(0x108)](logger_enums_1[_0x26529c(0xf0)][_0x26529c(0xe3)]);}catch(_0x5039e6){await this[_0x26529c(0xec)]()[_0x26529c(0x109)](_0x130c04=>{const _0x554e16=_0x26529c;job_detail_1['systemLogger']['error'](_0x130c04[_0x554e16(0xeb)]);}),this['_loggerDetails']['exception'](_0x5039e6[_0x26529c(0xeb)]),this[_0x26529c(0xf5)]['setJobStatus'](logger_enums_1[_0x26529c(0xf0)][_0x26529c(0xf4)]),this[_0x26529c(0xf5)]['setJobError'](_0x5039e6['message']),job_detail_1['systemLogger'][_0x26529c(0xca)](_0x5039e6[_0x26529c(0xeb)]);}finally{this[_0x26529c(0xdd)][_0x26529c(0xbf)](_0x26529c(0x10d)),job_detail_1['systemLogger']['log']('Finish\x20Masking\x20Process'),await this[_0x26529c(0xf5)]['kill'](),await this[_0x26529c(0xdd)][_0x26529c(0xc2)]();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()[a73_0x4fefeb(0xc9)]()[a73_0x4fefeb(0xd7)](()=>process[a73_0x4fefeb(0xe6)](0x0))['catch'](()=>process[a73_0x4fefeb(0xe6)](0x1));