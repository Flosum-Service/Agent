const a73_0x3f9b3f=a73_0x2be8;function a73_0x2be8(_0x53da46,_0x524f4d){const _0x4317c4=a73_0xa281();return a73_0x2be8=function(_0xcc592f,_0x38f580){_0xcc592f=_0xcc592f-0xca;let _0xa2819d=_0x4317c4[_0xcc592f];return _0xa2819d;},a73_0x2be8(_0x53da46,_0x524f4d);}(function(_0x41b517,_0xdce2c3){const _0x3a4287=a73_0x2be8,_0x1dfed4=_0x41b517();while(!![]){try{const _0x1c26b5=-parseInt(_0x3a4287(0x118))/0x1*(-parseInt(_0x3a4287(0x107))/0x2)+parseInt(_0x3a4287(0xf1))/0x3+parseInt(_0x3a4287(0x102))/0x4+-parseInt(_0x3a4287(0xd2))/0x5*(-parseInt(_0x3a4287(0x10f))/0x6)+-parseInt(_0x3a4287(0xf8))/0x7*(-parseInt(_0x3a4287(0xe3))/0x8)+parseInt(_0x3a4287(0xdc))/0x9+-parseInt(_0x3a4287(0xd4))/0xa;if(_0x1c26b5===_0xdce2c3)break;else _0x1dfed4['push'](_0x1dfed4['shift']());}catch(_0x25be0f){_0x1dfed4['push'](_0x1dfed4['shift']());}}}(a73_0xa281,0x53eb7));const a73_0x38f580=(function(){let _0x353af9=!![];return function(_0xacf907,_0x26f775){const _0x5876e9=_0x353af9?function(){const _0x2f9488=a73_0x2be8;if(_0x26f775){const _0x122f91=_0x26f775[_0x2f9488(0xf4)](_0xacf907,arguments);return _0x26f775=null,_0x122f91;}}:function(){};return _0x353af9=![],_0x5876e9;};}()),a73_0xcc592f=a73_0x38f580(this,function(){const _0x214a7f=a73_0x2be8;return a73_0xcc592f[_0x214a7f(0xeb)]()[_0x214a7f(0xe0)]('(((.+)+)+)+$')['toString']()[_0x214a7f(0xff)](a73_0xcc592f)[_0x214a7f(0xe0)]('(((.+)+)+)+$');});a73_0xcc592f();'use strict';var __importDefault=this&&this[a73_0x3f9b3f(0x108)]||function(_0x603540){const _0x39f34b=a73_0x3f9b3f;return _0x603540&&_0x603540[_0x39f34b(0xea)]?_0x603540:{'default':_0x603540};};Object[a73_0x3f9b3f(0x103)](exports,a73_0x3f9b3f(0xea),{'value':!![]}),exports[a73_0x3f9b3f(0xcb)]=void 0x0;const promises_1=require(a73_0x3f9b3f(0xed)),salesforce_1=require('@flosum/salesforce'),steps_creator_1=require('./classes/step/steps-creator'),logger_enums_1=require(a73_0x3f9b3f(0x100)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require(a73_0x3f9b3f(0xe6)),job_1=require(a73_0x3f9b3f(0xf5)),path_1=__importDefault(require('path')),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a73_0x3f9b3f(0xe4)),job_detail_1=require(a73_0x3f9b3f(0xf0));class MaskingJob{constructor(){this['_isEnableAutomationProcessError']=![];}async[a73_0x3f9b3f(0xd7)](){const _0x394df7=a73_0x3f9b3f,{objectRules:_0x5cd3eb}=this[_0x394df7(0xef)];this[_0x394df7(0xfa)]=new salesforce_1[(_0x394df7(0xd1))](this[_0x394df7(0xda)](_0x5cd3eb));}async[a73_0x3f9b3f(0x104)](){const _0x1ff8bd=a73_0x3f9b3f;job_detail_1[_0x1ff8bd(0x10a)][_0x1ff8bd(0x109)](_0x1ff8bd(0xcf)),this[_0x1ff8bd(0xce)][_0x1ff8bd(0x109)](_0x1ff8bd(0xcf));const {objectRules:_0x36fc9a,libraries:_0x9c9d90}=this[_0x1ff8bd(0xef)];this[_0x1ff8bd(0xcc)]=await new steps_creator_1[(_0x1ff8bd(0xe5))]({'loggerDetails':this[_0x1ff8bd(0xce)],'loggerJobState':this['_loggerJobState'],'libraries':_0x9c9d90,'objectRules':_0x36fc9a,'request':this[_0x1ff8bd(0xd8)]})[_0x1ff8bd(0x10e)]();for(const _0x12a5ed of this[_0x1ff8bd(0xcc)]){await _0x12a5ed[_0x1ff8bd(0xcd)]();}}['getManagerAutomationProcessOptions'](_0x2f60fa){const _0xc980a3=a73_0x3f9b3f,_0x1c2c25=[],_0x5c7660=[],_0x370065=[],_0x3006f9=[];for(const _0x5607f2 in _0x2f60fa){const {isDisableProcessBuilder:_0x53711a,isDisableTrigger:_0x405386,isDisableValidationRule:_0x348b0c,isDisableWorkflow:_0x5499e3}=_0x2f60fa[_0x5607f2][_0xc980a3(0x115)];_0x53711a&&_0x370065[_0xc980a3(0x106)](_0x5607f2),_0x405386&&_0x1c2c25[_0xc980a3(0x106)](_0x5607f2),_0x348b0c&&_0x3006f9[_0xc980a3(0x106)](_0x5607f2),_0x5499e3&&_0x5c7660[_0xc980a3(0x106)](_0x5607f2);}return{'instance':this['_request'],'saveSourceMetadataBackup':this[_0xc980a3(0x111)],'triggersObjects':_0x1c2c25,'workflowsObjects':_0x5c7660,'processBuilderObjects':_0x370065,'validationRulesObjects':_0x3006f9};}async[a73_0x3f9b3f(0x105)](){const _0x2522c6=a73_0x3f9b3f;job_detail_1['systemLogger'][_0x2522c6(0x109)]('Disable\x20automation\x20process'),this['_loggerDetails']['log']('Disable\x20automation\x20process'),await this[_0x2522c6(0xfa)][_0x2522c6(0xca)]();}async[a73_0x3f9b3f(0x10b)](){const _0x1c98a3=a73_0x3f9b3f;!this[_0x1c98a3(0x101)]&&(job_detail_1['systemLogger'][_0x1c98a3(0x109)]('Enable\x20automation\x20process'),this[_0x1c98a3(0xce)][_0x1c98a3(0x109)]('Enable\x20automation\x20process'),await this[_0x1c98a3(0xfa)][_0x1c98a3(0xf7)]()[_0x1c98a3(0xd9)](_0xa2b427=>{const _0xaa5504=_0x1c98a3;this[_0xaa5504(0x101)]=!![];throw _0xa2b427;}));}async[a73_0x3f9b3f(0x113)](){const _0x3a9dd8=a73_0x3f9b3f,_0x569535=await(0x0,promises_1[_0x3a9dd8(0xd6)])(path_1[_0x3a9dd8(0xfb)][_0x3a9dd8(0xfd)](job_detail_1[_0x3a9dd8(0x117)],job_1[_0x3a9dd8(0x11a)]),{'encoding':_0x3a9dd8(0xe2)});return await(0x0,promises_1['rm'])(path_1[_0x3a9dd8(0xfb)][_0x3a9dd8(0xfd)](job_detail_1[_0x3a9dd8(0x117)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON[_0x3a9dd8(0xf3)](_0x569535)[_0x3a9dd8(0xfe)];}[a73_0x3f9b3f(0x111)](_0xd46d85){const _0x39d2b0=a73_0x3f9b3f;return(0x0,promises_1[_0x39d2b0(0x116)])(path_1['default'][_0x39d2b0(0xfd)](job_detail_1[_0x39d2b0(0x117)],constants_1[_0x39d2b0(0x112)]),Buffer[_0x39d2b0(0xf6)](_0xd46d85,_0x39d2b0(0xee)));}async[a73_0x3f9b3f(0xcd)](){const _0x326940=a73_0x3f9b3f;this['_maskingManifest']=await this[_0x326940(0x113)]();const {objectRules:_0x1d6d74,credentials:_0x4aaf3f}=this[_0x326940(0xef)];this[_0x326940(0xce)]=await new logger_details_1[(_0x326940(0xdf))](job_detail_1[_0x326940(0x117)],job_detail_1[_0x326940(0x10c)])[_0x326940(0x110)](),this[_0x326940(0x119)]=await new logger_job_state_1[(_0x326940(0xec))](job_detail_1[_0x326940(0x117)],job_detail_1[_0x326940(0x10c)])[_0x326940(0x110)](Object[_0x326940(0xe1)](_0x1d6d74));try{this[_0x326940(0x119)][_0x326940(0xe8)](logger_enums_1[_0x326940(0xf2)][_0x326940(0x114)]),this['_request']=await salesforce_1[_0x326940(0xd5)]['create'](new auth_manager_1['AuthManager'](_0x4aaf3f),[],{'headers':{'Accept-Encoding':_0x326940(0xfc)}}),await this[_0x326940(0xd7)](),await this[_0x326940(0x105)](),await this[_0x326940(0x104)](),await this[_0x326940(0x10b)](),this['_loggerJobState'][_0x326940(0xe8)](logger_enums_1[_0x326940(0xf2)][_0x326940(0xe9)]);}catch(_0x4ecb57){await this[_0x326940(0x10b)]()[_0x326940(0xd9)](_0xadbab6=>{const _0x88f42f=_0x326940;job_detail_1[_0x88f42f(0x10a)]['error'](_0xadbab6[_0x88f42f(0xe7)]);}),this[_0x326940(0xce)][_0x326940(0x10d)](_0x4ecb57[_0x326940(0xe7)]),this[_0x326940(0x119)][_0x326940(0xe8)](logger_enums_1[_0x326940(0xf2)][_0x326940(0xdd)]),this[_0x326940(0x119)][_0x326940(0xdb)](_0x4ecb57[_0x326940(0xe7)]),job_detail_1[_0x326940(0x10a)][_0x326940(0xf9)](_0x4ecb57['message']);}finally{this['_loggerDetails']['log']('Finish\x20Masking\x20Process'),job_detail_1['systemLogger'][_0x326940(0x109)]('Finish\x20Masking\x20Process'),await this[_0x326940(0x119)]['kill'](),await this[_0x326940(0xce)][_0x326940(0xd0)]();}}}function a73_0xa281(){const _0x22f708=['utf-8','40GSVWhj','../constants','StepsCreator','./classes/logger/logger-job-state','message','setJobStatus','COMPLETED','__esModule','toString','LoggerJobState','fs/promises','base64','_maskingManifest','./job-detail','1696830XRdjuo','JobStatus','parse','apply','../../../constants/job','from','enable','78176tWZKiZ','error','_managerAutomationProcess','default','gzip','join','details','constructor','./enums/logger.enums','_isEnableAutomationProcessError','2017144mArpRN','defineProperty','masking','disableAutomationProcess','push','2fNqBte','__importDefault','log','systemLogger','enableAutomationProcess','jobId','exception','create','1212qMRmEI','init','saveSourceAutomationProcessesBackup','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','getManifest','IN_PROGRESS','disableAutomation','writeFile','jobStorePath','523845KacUmc','_loggerJobState','MANIFEST_FILENAME','disable','MaskingJob','_steps','execute','_loggerDetails','Start\x20Masking\x20Process','kill','ManagerAutomationProcess','8925xesBeM','exit','20212940HnVOMF','AxiosInstanceUtils','readFile','initAutomationProcess','_request','catch','getManagerAutomationProcessOptions','setJobError','3193902ZFaPWK','FAILED','then','LoggerDetails','search','keys'];a73_0xa281=function(){return _0x22f708;};return a73_0xa281();}exports['MaskingJob']=MaskingJob,new MaskingJob()[a73_0x3f9b3f(0xcd)]()[a73_0x3f9b3f(0xde)](()=>process[a73_0x3f9b3f(0xd3)](0x0))['catch'](()=>process[a73_0x3f9b3f(0xd3)](0x1));