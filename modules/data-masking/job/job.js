const a73_0x5f1ac1=a73_0x1965;(function(_0x29526b,_0x5dc9b7){const _0x192924=a73_0x1965,_0x249039=_0x29526b();while(!![]){try{const _0x379909=parseInt(_0x192924(0xf7))/0x1*(-parseInt(_0x192924(0xdd))/0x2)+parseInt(_0x192924(0xdc))/0x3*(-parseInt(_0x192924(0xd7))/0x4)+parseInt(_0x192924(0xef))/0x5*(parseInt(_0x192924(0xf1))/0x6)+-parseInt(_0x192924(0x110))/0x7*(-parseInt(_0x192924(0xe5))/0x8)+-parseInt(_0x192924(0xfe))/0x9*(-parseInt(_0x192924(0xd5))/0xa)+parseInt(_0x192924(0x118))/0xb*(parseInt(_0x192924(0xd4))/0xc)+-parseInt(_0x192924(0xf3))/0xd;if(_0x379909===_0x5dc9b7)break;else _0x249039['push'](_0x249039['shift']());}catch(_0x31f3b9){_0x249039['push'](_0x249039['shift']());}}}(a73_0x2cd8,0xa715e));function a73_0x2cd8(){const _0x4ec5b6=['writeFile','masking','_steps','5026bfeMVv','fs/promises','toString','Start\x20Masking\x20Process','then','MANIFEST_FILENAME','../../../constants/job','disableAutomationProcess','231FREoWb','search','message','defineProperty','exit','systemLogger','_request','disableAutomation','log','setJobError','ManagerAutomationProcess','_isEnableAutomationProcessError','528168TSlyAZ','56410EaZEjX','catch','8rDDkIV','JobStatus','init','../../shared/managers/auth.manager','join','770991AshjaF','205720PbaGpk','(((.+)+)+)+$','_loggerJobState','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','details','./classes/logger/logger-job-state','jobStorePath','./job-detail','5264IRPpjd','getManagerAutomationProcessOptions','kill','parse','error','__importDefault','LoggerJobState','Finish\x20Masking\x20Process','COMPLETED','_managerAutomationProcess','1166310IXIMuI','Disable\x20automation\x20process','12facOQB','_maskingManifest','12642461tQyiyA','keys','push','enableAutomationProcess','2HSSAgC','disable','initAutomationProcess','./enums/logger.enums','setJobStatus','utf-8','enable','819MVyGpC','gzip','getManifest','apply','path','execute','IN_PROGRESS','default','Enable\x20automation\x20process','_loggerDetails','./classes/step/steps-creator','readFile','constructor','create','jobId'];a73_0x2cd8=function(){return _0x4ec5b6;};return a73_0x2cd8();}const a73_0x33b5c1=(function(){let _0x3a9298=!![];return function(_0xe26d97,_0x4a8fc4){const _0x30e89c=_0x3a9298?function(){const _0x1d5fa0=a73_0x1965;if(_0x4a8fc4){const _0x1f727f=_0x4a8fc4[_0x1d5fa0(0x101)](_0xe26d97,arguments);return _0x4a8fc4=null,_0x1f727f;}}:function(){};return _0x3a9298=![],_0x30e89c;};}()),a73_0x4529ae=a73_0x33b5c1(this,function(){const _0x4e448f=a73_0x1965;return a73_0x4529ae['toString']()['search'](_0x4e448f(0xde))[_0x4e448f(0x112)]()[_0x4e448f(0x10a)](a73_0x4529ae)[_0x4e448f(0x119)](_0x4e448f(0xde));});a73_0x4529ae();'use strict';var __importDefault=this&&this[a73_0x5f1ac1(0xea)]||function(_0x5d842c){return _0x5d842c&&_0x5d842c['__esModule']?_0x5d842c:{'default':_0x5d842c};};function a73_0x1965(_0x1fcd81,_0x3d4acf){const _0x1c813d=a73_0x2cd8();return a73_0x1965=function(_0x4529ae,_0x33b5c1){_0x4529ae=_0x4529ae-0xd1;let _0x2cd878=_0x1c813d[_0x4529ae];return _0x2cd878;},a73_0x1965(_0x1fcd81,_0x3d4acf);}Object[a73_0x5f1ac1(0x11b)](exports,'__esModule',{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a73_0x5f1ac1(0x111)),salesforce_1=require('@flosum/salesforce'),steps_creator_1=require(a73_0x5f1ac1(0x108)),logger_enums_1=require(a73_0x5f1ac1(0xfa)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require(a73_0x5f1ac1(0xe2)),job_1=require(a73_0x5f1ac1(0x116)),path_1=__importDefault(require(a73_0x5f1ac1(0x102))),auth_manager_1=require(a73_0x5f1ac1(0xda)),constants_1=require('../constants'),job_detail_1=require(a73_0x5f1ac1(0xe4));class MaskingJob{constructor(){const _0x3814b9=a73_0x5f1ac1;this[_0x3814b9(0xd3)]=![];}async[a73_0x5f1ac1(0xf9)](){const _0x386fde=a73_0x5f1ac1,{objectRules:_0x5e2e23}=this[_0x386fde(0xf2)];this[_0x386fde(0xee)]=new salesforce_1[(_0x386fde(0xd2))](this[_0x386fde(0xe6)](_0x5e2e23));}async[a73_0x5f1ac1(0x10e)](){const _0x5d88f9=a73_0x5f1ac1;job_detail_1['systemLogger'][_0x5d88f9(0x120)](_0x5d88f9(0x113)),this[_0x5d88f9(0x107)][_0x5d88f9(0x120)](_0x5d88f9(0x113));const {objectRules:_0x4cc854,libraries:_0x2ce4b4}=this['_maskingManifest'];this['_steps']=await new steps_creator_1['StepsCreator']({'loggerDetails':this[_0x5d88f9(0x107)],'loggerJobState':this[_0x5d88f9(0xdf)],'libraries':_0x2ce4b4,'objectRules':_0x4cc854,'request':this['_request']})[_0x5d88f9(0x10b)]();for(const _0x1bf71e of this[_0x5d88f9(0x10f)]){await _0x1bf71e[_0x5d88f9(0x103)]();}}[a73_0x5f1ac1(0xe6)](_0x2a472e){const _0x19b36a=a73_0x5f1ac1,_0x1e2765=[],_0xe799ad=[],_0x49538f=[],_0xf1e147=[];for(const _0x1bad1d in _0x2a472e){const {isDisableProcessBuilder:_0x4de35d,isDisableTrigger:_0x3dbff5,isDisableValidationRule:_0x4b2728,isDisableWorkflow:_0x31723b}=_0x2a472e[_0x1bad1d][_0x19b36a(0x11f)];_0x4de35d&&_0x49538f[_0x19b36a(0xf5)](_0x1bad1d),_0x3dbff5&&_0x1e2765[_0x19b36a(0xf5)](_0x1bad1d),_0x4b2728&&_0xf1e147[_0x19b36a(0xf5)](_0x1bad1d),_0x31723b&&_0xe799ad[_0x19b36a(0xf5)](_0x1bad1d);}return{'instance':this['_request'],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x1e2765,'workflowsObjects':_0xe799ad,'processBuilderObjects':_0x49538f,'validationRulesObjects':_0xf1e147};}async[a73_0x5f1ac1(0x117)](){const _0x38cbca=a73_0x5f1ac1;job_detail_1[_0x38cbca(0x11d)][_0x38cbca(0x120)]('Disable\x20automation\x20process'),this['_loggerDetails'][_0x38cbca(0x120)](_0x38cbca(0xf0)),await this[_0x38cbca(0xee)][_0x38cbca(0xf8)]();}async[a73_0x5f1ac1(0xf6)](){const _0x1fca1e=a73_0x5f1ac1;!this[_0x1fca1e(0xd3)]&&(job_detail_1[_0x1fca1e(0x11d)][_0x1fca1e(0x120)](_0x1fca1e(0x106)),this[_0x1fca1e(0x107)]['log'](_0x1fca1e(0x106)),await this['_managerAutomationProcess'][_0x1fca1e(0xfd)]()[_0x1fca1e(0xd6)](_0x452bea=>{const _0x254f20=_0x1fca1e;this[_0x254f20(0xd3)]=!![];throw _0x452bea;}));}async['getManifest'](){const _0x1af3e8=a73_0x5f1ac1,_0x3ac5a7=await(0x0,promises_1[_0x1af3e8(0x109)])(path_1[_0x1af3e8(0x105)][_0x1af3e8(0xdb)](job_detail_1[_0x1af3e8(0xe3)],job_1[_0x1af3e8(0x115)]),{'encoding':_0x1af3e8(0xfc)});return await(0x0,promises_1['rm'])(path_1[_0x1af3e8(0x105)][_0x1af3e8(0xdb)](job_detail_1['jobStorePath'],job_1[_0x1af3e8(0x115)]),{'recursive':!![],'force':!![]}),JSON[_0x1af3e8(0xe8)](_0x3ac5a7)[_0x1af3e8(0xe1)];}['saveSourceAutomationProcessesBackup'](_0x59974d){const _0x52cf5a=a73_0x5f1ac1;return(0x0,promises_1[_0x52cf5a(0x10d)])(path_1[_0x52cf5a(0x105)][_0x52cf5a(0xdb)](job_detail_1[_0x52cf5a(0xe3)],constants_1[_0x52cf5a(0xe0)]),Buffer['from'](_0x59974d,'base64'));}async[a73_0x5f1ac1(0x103)](){const _0x3ecab1=a73_0x5f1ac1;this['_maskingManifest']=await this[_0x3ecab1(0x100)]();const {objectRules:_0x14dd04,credentials:_0x27e031}=this[_0x3ecab1(0xf2)];this[_0x3ecab1(0x107)]=await new logger_details_1['LoggerDetails'](job_detail_1[_0x3ecab1(0xe3)],job_detail_1[_0x3ecab1(0x10c)])['init'](),this[_0x3ecab1(0xdf)]=await new logger_job_state_1[(_0x3ecab1(0xeb))](job_detail_1[_0x3ecab1(0xe3)],job_detail_1[_0x3ecab1(0x10c)])[_0x3ecab1(0xd9)](Object[_0x3ecab1(0xf4)](_0x14dd04));try{this['_loggerJobState'][_0x3ecab1(0xfb)](logger_enums_1[_0x3ecab1(0xd8)][_0x3ecab1(0x104)]),this[_0x3ecab1(0x11e)]=await salesforce_1['AxiosInstanceUtils'][_0x3ecab1(0x10b)](new auth_manager_1['AuthManager'](_0x27e031),[],{'headers':{'Accept-Encoding':_0x3ecab1(0xff)}}),await this[_0x3ecab1(0xf9)](),await this[_0x3ecab1(0x117)](),await this[_0x3ecab1(0x10e)](),await this['enableAutomationProcess'](),this['_loggerJobState'][_0x3ecab1(0xfb)](logger_enums_1[_0x3ecab1(0xd8)][_0x3ecab1(0xed)]);}catch(_0x1695c8){await this[_0x3ecab1(0xf6)]()[_0x3ecab1(0xd6)](_0xb64ee=>{const _0x5cdf7f=_0x3ecab1;job_detail_1['systemLogger'][_0x5cdf7f(0xe9)](_0xb64ee[_0x5cdf7f(0x11a)]);}),this['_loggerDetails']['exception'](_0x1695c8[_0x3ecab1(0x11a)]),this[_0x3ecab1(0xdf)][_0x3ecab1(0xfb)](logger_enums_1[_0x3ecab1(0xd8)]['FAILED']),this['_loggerJobState'][_0x3ecab1(0xd1)](_0x1695c8[_0x3ecab1(0x11a)]),job_detail_1[_0x3ecab1(0x11d)][_0x3ecab1(0xe9)](_0x1695c8['message']);}finally{this[_0x3ecab1(0x107)][_0x3ecab1(0x120)](_0x3ecab1(0xec)),job_detail_1[_0x3ecab1(0x11d)][_0x3ecab1(0x120)](_0x3ecab1(0xec)),await this[_0x3ecab1(0xdf)][_0x3ecab1(0xe7)](),await this[_0x3ecab1(0x107)][_0x3ecab1(0xe7)]();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()[a73_0x5f1ac1(0x103)]()[a73_0x5f1ac1(0x114)](()=>process[a73_0x5f1ac1(0x11c)](0x0))[a73_0x5f1ac1(0xd6)](()=>process[a73_0x5f1ac1(0x11c)](0x1));