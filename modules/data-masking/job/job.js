function a89_0x316b(_0x225e3b,_0x440164){const _0x3d0c41=a89_0xfcd0();return a89_0x316b=function(_0x13b744,_0x26d7bf){_0x13b744=_0x13b744-0x114;let _0xfcd044=_0x3d0c41[_0x13b744];return _0xfcd044;},a89_0x316b(_0x225e3b,_0x440164);}const a89_0x1ccdb3=a89_0x316b;(function(_0x453afd,_0x3b7e88){const _0x3c4a4d=a89_0x316b,_0x18aa82=_0x453afd();while(!![]){try{const _0x2fee8a=-parseInt(_0x3c4a4d(0x147))/0x1+-parseInt(_0x3c4a4d(0x12b))/0x2+parseInt(_0x3c4a4d(0x14f))/0x3*(-parseInt(_0x3c4a4d(0x12d))/0x4)+-parseInt(_0x3c4a4d(0x121))/0x5+-parseInt(_0x3c4a4d(0x156))/0x6*(-parseInt(_0x3c4a4d(0x116))/0x7)+-parseInt(_0x3c4a4d(0x151))/0x8+-parseInt(_0x3c4a4d(0x137))/0x9*(-parseInt(_0x3c4a4d(0x155))/0xa);if(_0x2fee8a===_0x3b7e88)break;else _0x18aa82['push'](_0x18aa82['shift']());}catch(_0x4c17b6){_0x18aa82['push'](_0x18aa82['shift']());}}}(a89_0xfcd0,0x4658d));const a89_0x26d7bf=(function(){let _0x43144e=!![];return function(_0x4509f5,_0x234ff2){const _0x4e1a0a=_0x43144e?function(){const _0x38576b=a89_0x316b;if(_0x234ff2){const _0x2ab3c6=_0x234ff2[_0x38576b(0x14e)](_0x4509f5,arguments);return _0x234ff2=null,_0x2ab3c6;}}:function(){};return _0x43144e=![],_0x4e1a0a;};}()),a89_0x13b744=a89_0x26d7bf(this,function(){const _0x50aecb=a89_0x316b;return a89_0x13b744[_0x50aecb(0x127)]()[_0x50aecb(0x150)](_0x50aecb(0x128))[_0x50aecb(0x127)]()['constructor'](a89_0x13b744)[_0x50aecb(0x150)]('(((.+)+)+)+$');});a89_0x13b744();'use strict';function a89_0xfcd0(){const _0x53e530=['38020CfdeVg','22044GBeAUW','default','Start\x20Masking\x20Process','from','_loggerJobState','execute','126wJCQgK','systemLogger','getManifest','JobStatus','enableAutomationProcess','catch','disable','create','jobId','_request','defineProperty','1092550eIspaa','saveSourceAutomationProcessesBackup','./enums/logger.enums','join','ManagerAutomationProcess','_managerAutomationProcess','toString','(((.+)+)+)+$','LoggerDetails','exception','1002838yrPcKG','MaskingJob','1659556OiUbii','disableAutomationProcess','jobStorePath','../../../constants/job','kill','getManagerAutomationProcessOptions','./classes/logger/logger-job-state','_maskingManifest','FAILED','masking','4338eXYFSb','log','../constants','./job-detail','../../shared/managers/auth.manager','_loggerDetails','_isEnableAutomationProcessError','./classes/step/steps-creator','keys','fs/promises','parse','Disable\x20automation\x20process','writeFile','Finish\x20Masking\x20Process','./classes/logger/logger-details','__esModule','51564VgcFKF','MANIFEST_FILENAME','setJobStatus','init','push','message','path','apply','3ZaCSkd','search','3393384otwgTx','details','StepsCreator','_steps'];a89_0xfcd0=function(){return _0x53e530;};return a89_0xfcd0();}var __importDefault=this&&this['__importDefault']||function(_0x3d7705){return _0x3d7705&&_0x3d7705['__esModule']?_0x3d7705:{'default':_0x3d7705};};Object[a89_0x1ccdb3(0x120)](exports,a89_0x1ccdb3(0x146),{'value':!![]}),exports[a89_0x1ccdb3(0x12c)]=void 0x0;const promises_1=require(a89_0x1ccdb3(0x140)),salesforce_1=require('@flosum/salesforce'),steps_creator_1=require(a89_0x1ccdb3(0x13e)),logger_enums_1=require(a89_0x1ccdb3(0x123)),logger_details_1=require(a89_0x1ccdb3(0x145)),logger_job_state_1=require(a89_0x1ccdb3(0x133)),job_1=require(a89_0x1ccdb3(0x130)),path_1=__importDefault(require(a89_0x1ccdb3(0x14d))),auth_manager_1=require(a89_0x1ccdb3(0x13b)),constants_1=require(a89_0x1ccdb3(0x139)),job_detail_1=require(a89_0x1ccdb3(0x13a));class MaskingJob{constructor(){this['_isEnableAutomationProcessError']=![];}async['initAutomationProcess'](){const _0x5de092=a89_0x1ccdb3,{objectRules:_0x2af1ed}=this[_0x5de092(0x134)];this[_0x5de092(0x126)]=new salesforce_1[(_0x5de092(0x125))](this['getManagerAutomationProcessOptions'](_0x2af1ed));}async[a89_0x1ccdb3(0x136)](){const _0x26ffb3=a89_0x1ccdb3;job_detail_1[_0x26ffb3(0x117)][_0x26ffb3(0x138)]('Start\x20Masking\x20Process'),this[_0x26ffb3(0x13c)][_0x26ffb3(0x138)](_0x26ffb3(0x158));const {objectRules:_0x1f0ef8,libraries:_0x540e47}=this['_maskingManifest'];this[_0x26ffb3(0x154)]=await new steps_creator_1[(_0x26ffb3(0x153))]({'loggerDetails':this[_0x26ffb3(0x13c)],'loggerJobState':this['_loggerJobState'],'libraries':_0x540e47,'objectRules':_0x1f0ef8,'request':this[_0x26ffb3(0x11f)]})[_0x26ffb3(0x11d)]();for(const _0x4a6084 of this[_0x26ffb3(0x154)]){await _0x4a6084[_0x26ffb3(0x115)]();}}[a89_0x1ccdb3(0x132)](_0x4d253d){const _0x6b74af=a89_0x1ccdb3,_0x4141ec=[],_0x2579c6=[],_0x104401=[],_0x4be383=[];for(const _0x23f179 in _0x4d253d){const {isDisableProcessBuilder:_0x38acc3,isDisableTrigger:_0x4a9a2a,isDisableValidationRule:_0x8d4d2d,isDisableWorkflow:_0x31ff05}=_0x4d253d[_0x23f179]['disableAutomation'];_0x38acc3&&_0x104401[_0x6b74af(0x14b)](_0x23f179),_0x4a9a2a&&_0x4141ec[_0x6b74af(0x14b)](_0x23f179),_0x8d4d2d&&_0x4be383[_0x6b74af(0x14b)](_0x23f179),_0x31ff05&&_0x2579c6['push'](_0x23f179);}return{'instance':this[_0x6b74af(0x11f)],'saveSourceMetadataBackup':this[_0x6b74af(0x122)],'triggersObjects':_0x4141ec,'workflowsObjects':_0x2579c6,'processBuilderObjects':_0x104401,'validationRulesObjects':_0x4be383};}async[a89_0x1ccdb3(0x12e)](){const _0x418516=a89_0x1ccdb3;job_detail_1[_0x418516(0x117)][_0x418516(0x138)](_0x418516(0x142)),this['_loggerDetails'][_0x418516(0x138)](_0x418516(0x142)),await this[_0x418516(0x126)][_0x418516(0x11c)]();}async[a89_0x1ccdb3(0x11a)](){const _0x5d6d3e=a89_0x1ccdb3;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x5d6d3e(0x117)][_0x5d6d3e(0x138)]('Enable\x20automation\x20process'),this[_0x5d6d3e(0x13c)]['log']('Enable\x20automation\x20process'),await this['_managerAutomationProcess']['enable']()[_0x5d6d3e(0x11b)](_0x31bcbd=>{const _0x375277=_0x5d6d3e;this[_0x375277(0x13d)]=!![];throw _0x31bcbd;}));}async[a89_0x1ccdb3(0x118)](){const _0x3535b2=a89_0x1ccdb3,_0x89cf61=await(0x0,promises_1['readFile'])(path_1[_0x3535b2(0x157)][_0x3535b2(0x124)](job_detail_1[_0x3535b2(0x12f)],job_1['MANIFEST_FILENAME']),{'encoding':'utf-8'});return await(0x0,promises_1['rm'])(path_1[_0x3535b2(0x157)][_0x3535b2(0x124)](job_detail_1[_0x3535b2(0x12f)],job_1[_0x3535b2(0x148)]),{'recursive':!![],'force':!![]}),JSON[_0x3535b2(0x141)](_0x89cf61)[_0x3535b2(0x152)];}[a89_0x1ccdb3(0x122)](_0x1706f5){const _0x151ba8=a89_0x1ccdb3;return(0x0,promises_1[_0x151ba8(0x143)])(path_1[_0x151ba8(0x157)][_0x151ba8(0x124)](job_detail_1['jobStorePath'],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x151ba8(0x159)](_0x1706f5,'base64'));}async[a89_0x1ccdb3(0x115)](){const _0x110f1e=a89_0x1ccdb3;this[_0x110f1e(0x134)]=await this[_0x110f1e(0x118)]();const {objectRules:_0x470ab7,credentials:_0x1ef5aa}=this['_maskingManifest'];this[_0x110f1e(0x13c)]=await new logger_details_1[(_0x110f1e(0x129))](job_detail_1[_0x110f1e(0x12f)],job_detail_1[_0x110f1e(0x11e)])[_0x110f1e(0x14a)](),this[_0x110f1e(0x114)]=await new logger_job_state_1['LoggerJobState'](job_detail_1['jobStorePath'],job_detail_1[_0x110f1e(0x11e)])[_0x110f1e(0x14a)](Object[_0x110f1e(0x13f)](_0x470ab7));try{this['_loggerJobState'][_0x110f1e(0x149)](logger_enums_1['JobStatus']['IN_PROGRESS']),this[_0x110f1e(0x11f)]=await salesforce_1['AxiosInstanceUtils'][_0x110f1e(0x11d)](new auth_manager_1['AuthManager'](_0x1ef5aa),[],{'headers':{'Accept-Encoding':'gzip'}}),await this['initAutomationProcess'](),await this[_0x110f1e(0x12e)](),await this['masking'](),await this['enableAutomationProcess'](),this[_0x110f1e(0x114)][_0x110f1e(0x149)](logger_enums_1[_0x110f1e(0x119)]['COMPLETED']);}catch(_0x5543f7){await this[_0x110f1e(0x11a)]()[_0x110f1e(0x11b)](_0x54ae26=>{job_detail_1['systemLogger']['error'](_0x54ae26['message']);}),this[_0x110f1e(0x13c)][_0x110f1e(0x12a)](_0x5543f7[_0x110f1e(0x14c)]),this['_loggerJobState']['setJobStatus'](logger_enums_1[_0x110f1e(0x119)][_0x110f1e(0x135)]),this['_loggerJobState']['setJobError'](_0x5543f7[_0x110f1e(0x14c)]),job_detail_1[_0x110f1e(0x117)]['error'](_0x5543f7[_0x110f1e(0x14c)]);}finally{this['_loggerDetails']['log'](_0x110f1e(0x144)),job_detail_1[_0x110f1e(0x117)][_0x110f1e(0x138)]('Finish\x20Masking\x20Process'),await this['_loggerJobState'][_0x110f1e(0x131)](),await this[_0x110f1e(0x13c)][_0x110f1e(0x131)]();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()[a89_0x1ccdb3(0x115)]()['then'](()=>process['exit'](0x0))[a89_0x1ccdb3(0x11b)](()=>process['exit'](0x1));