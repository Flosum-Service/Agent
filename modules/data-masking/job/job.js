const a72_0x439e6b=a72_0x5d1f;(function(_0x33053d,_0x312853){const _0x2ba6b5=a72_0x5d1f,_0x564825=_0x33053d();while(!![]){try{const _0x4b6414=parseInt(_0x2ba6b5(0x1ed))/0x1+-parseInt(_0x2ba6b5(0x1e0))/0x2+parseInt(_0x2ba6b5(0x1e2))/0x3*(parseInt(_0x2ba6b5(0x1e7))/0x4)+parseInt(_0x2ba6b5(0x1e9))/0x5+-parseInt(_0x2ba6b5(0x214))/0x6+-parseInt(_0x2ba6b5(0x1fd))/0x7+parseInt(_0x2ba6b5(0x1ee))/0x8*(parseInt(_0x2ba6b5(0x1f3))/0x9);if(_0x4b6414===_0x312853)break;else _0x564825['push'](_0x564825['shift']());}catch(_0x43ec1c){_0x564825['push'](_0x564825['shift']());}}}(a72_0x3137,0x27b33));const a72_0x58badf=(function(){let _0x3e6f74=!![];return function(_0x38c647,_0x50f120){const _0x45dba8=_0x3e6f74?function(){const _0x3763a0=a72_0x5d1f;if(_0x50f120){const _0x588761=_0x50f120[_0x3763a0(0x20f)](_0x38c647,arguments);return _0x50f120=null,_0x588761;}}:function(){};return _0x3e6f74=![],_0x45dba8;};}()),a72_0x46b611=a72_0x58badf(this,function(){const _0x43aa74=a72_0x5d1f;return a72_0x46b611[_0x43aa74(0x211)]()[_0x43aa74(0x1f9)](_0x43aa74(0x1de))[_0x43aa74(0x211)]()[_0x43aa74(0x1f2)](a72_0x46b611)[_0x43aa74(0x1f9)]('(((.+)+)+)+$');});a72_0x46b611();function a72_0x3137(){const _0x5a3def=['writeFile','_loggerJobState','exit','defineProperty','systemLogger','_request','(((.+)+)+)+$','./enums/logger.enums','10384ZYYzMP','../constants','543hISuiN','./classes/logger/logger-details','keys','MANIFEST_FILENAME','getManagerAutomationProcessOptions','1804YRoQeW','kill','1244025bSGqdj','default','message','_steps','5256yrVUDk','112uBlQxk','fs/promises','error','details','constructor','54099BumiSQ','LoggerDetails','getManifest','exception','masking','_loggerDetails','search','create','log','jobId','1412257mSAcvB','disableAutomation','disableAutomationProcess','_maskingManifest','Finish\x20Masking\x20Process','Start\x20Masking\x20Process','@flosum/salesforce','jobStorePath','enable','./classes/logger/logger-job-state','__esModule','setJobStatus','catch','_managerAutomationProcess','AxiosInstanceUtils','Disable\x20automation\x20process','ManagerAutomationProcess','init','apply','AuthManager','toString','../../shared/managers/auth.manager','utf-8','301752KKSmel','readFile','path','MaskingJob','StepsCreator','JobStatus','disable','execute','push','setJobError','_isEnableAutomationProcessError','LoggerJobState','./classes/step/steps-creator','parse','base64','join','then','../../../constants/job','initAutomationProcess','saveSourceAutomationProcessesBackup'];a72_0x3137=function(){return _0x5a3def;};return a72_0x3137();}function a72_0x5d1f(_0x746e79,_0x262a0b){const _0x758749=a72_0x3137();return a72_0x5d1f=function(_0x46b611,_0x58badf){_0x46b611=_0x46b611-0x1cc;let _0x3137be=_0x758749[_0x46b611];return _0x3137be;},a72_0x5d1f(_0x746e79,_0x262a0b);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4bb85a){const _0x1bf1b0=a72_0x5d1f;return _0x4bb85a&&_0x4bb85a[_0x1bf1b0(0x207)]?_0x4bb85a:{'default':_0x4bb85a};};Object[a72_0x439e6b(0x1db)](exports,a72_0x439e6b(0x207),{'value':!![]}),exports[a72_0x439e6b(0x217)]=void 0x0;const promises_1=require(a72_0x439e6b(0x1ef)),salesforce_1=require(a72_0x439e6b(0x203)),steps_creator_1=require(a72_0x439e6b(0x1d0)),logger_enums_1=require(a72_0x439e6b(0x1df)),logger_details_1=require(a72_0x439e6b(0x1e3)),logger_job_state_1=require(a72_0x439e6b(0x206)),job_1=require(a72_0x439e6b(0x1d5)),path_1=__importDefault(require(a72_0x439e6b(0x216))),auth_manager_1=require(a72_0x439e6b(0x212)),constants_1=require(a72_0x439e6b(0x1e1)),job_detail_1=require('./job-detail');class MaskingJob{constructor(){this['_isEnableAutomationProcessError']=![];}async[a72_0x439e6b(0x1d6)](){const _0x52542e=a72_0x439e6b,{objectRules:_0x5062e1}=this[_0x52542e(0x200)];this[_0x52542e(0x20a)]=new salesforce_1[(_0x52542e(0x20d))](this[_0x52542e(0x1e6)](_0x5062e1));}async[a72_0x439e6b(0x1f7)](){const _0x218cbd=a72_0x439e6b;job_detail_1[_0x218cbd(0x1dc)][_0x218cbd(0x1fb)](_0x218cbd(0x202)),this['_loggerDetails'][_0x218cbd(0x1fb)](_0x218cbd(0x202));const {objectRules:_0x13bc86,libraries:_0x2f85d1}=this['_maskingManifest'];this[_0x218cbd(0x1ec)]=await new steps_creator_1[(_0x218cbd(0x218))]({'loggerDetails':this[_0x218cbd(0x1f8)],'loggerJobState':this[_0x218cbd(0x1d9)],'libraries':_0x2f85d1,'objectRules':_0x13bc86,'request':this[_0x218cbd(0x1dd)]})[_0x218cbd(0x1fa)]();for(const _0x34824b of this[_0x218cbd(0x1ec)]){await _0x34824b[_0x218cbd(0x21b)]();}}[a72_0x439e6b(0x1e6)](_0x1a97c8){const _0x1985f5=a72_0x439e6b,_0x2c4771=[],_0x4289d5=[],_0x216af0=[],_0x5a2e3e=[];for(const _0x9d7d29 in _0x1a97c8){const {isDisableProcessBuilder:_0x1a56d1,isDisableTrigger:_0x33f7c0,isDisableValidationRule:_0x28101f,isDisableWorkflow:_0x20270b}=_0x1a97c8[_0x9d7d29][_0x1985f5(0x1fe)];_0x1a56d1&&_0x216af0[_0x1985f5(0x1cc)](_0x9d7d29),_0x33f7c0&&_0x2c4771[_0x1985f5(0x1cc)](_0x9d7d29),_0x28101f&&_0x5a2e3e[_0x1985f5(0x1cc)](_0x9d7d29),_0x20270b&&_0x4289d5[_0x1985f5(0x1cc)](_0x9d7d29);}return{'instance':this[_0x1985f5(0x1dd)],'saveSourceMetadataBackup':this[_0x1985f5(0x1d7)],'triggersObjects':_0x2c4771,'workflowsObjects':_0x4289d5,'processBuilderObjects':_0x216af0,'validationRulesObjects':_0x5a2e3e};}async[a72_0x439e6b(0x1ff)](){const _0x5d87d1=a72_0x439e6b;job_detail_1[_0x5d87d1(0x1dc)]['log'](_0x5d87d1(0x20c)),this[_0x5d87d1(0x1f8)][_0x5d87d1(0x1fb)](_0x5d87d1(0x20c)),await this['_managerAutomationProcess'][_0x5d87d1(0x21a)]();}async['enableAutomationProcess'](){const _0x4675fb=a72_0x439e6b;!this[_0x4675fb(0x1ce)]&&(job_detail_1[_0x4675fb(0x1dc)]['log']('Enable\x20automation\x20process'),this[_0x4675fb(0x1f8)][_0x4675fb(0x1fb)]('Enable\x20automation\x20process'),await this[_0x4675fb(0x20a)][_0x4675fb(0x205)]()[_0x4675fb(0x209)](_0x5cd35a=>{const _0x1cb8e8=_0x4675fb;this[_0x1cb8e8(0x1ce)]=!![];throw _0x5cd35a;}));}async[a72_0x439e6b(0x1f5)](){const _0xca8db6=a72_0x439e6b,_0x30d10e=await(0x0,promises_1[_0xca8db6(0x215)])(path_1['default'][_0xca8db6(0x1d3)](job_detail_1[_0xca8db6(0x204)],job_1[_0xca8db6(0x1e5)]),{'encoding':_0xca8db6(0x213)});return await(0x0,promises_1['rm'])(path_1[_0xca8db6(0x1ea)]['join'](job_detail_1[_0xca8db6(0x204)],job_1[_0xca8db6(0x1e5)]),{'recursive':!![],'force':!![]}),JSON[_0xca8db6(0x1d1)](_0x30d10e)[_0xca8db6(0x1f1)];}[a72_0x439e6b(0x1d7)](_0x24b56e){const _0x4d5438=a72_0x439e6b;return(0x0,promises_1[_0x4d5438(0x1d8)])(path_1[_0x4d5438(0x1ea)][_0x4d5438(0x1d3)](job_detail_1[_0x4d5438(0x204)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer['from'](_0x24b56e,_0x4d5438(0x1d2)));}async[a72_0x439e6b(0x21b)](){const _0x22aadd=a72_0x439e6b;this[_0x22aadd(0x200)]=await this['getManifest']();const {objectRules:_0x4dfa21,credentials:_0x5ae9c6}=this[_0x22aadd(0x200)];this['_loggerDetails']=await new logger_details_1[(_0x22aadd(0x1f4))](job_detail_1[_0x22aadd(0x204)],job_detail_1['jobId'])[_0x22aadd(0x20e)](),this['_loggerJobState']=await new logger_job_state_1[(_0x22aadd(0x1cf))](job_detail_1['jobStorePath'],job_detail_1[_0x22aadd(0x1fc)])[_0x22aadd(0x20e)](Object[_0x22aadd(0x1e4)](_0x4dfa21));try{this[_0x22aadd(0x1d9)][_0x22aadd(0x208)](logger_enums_1[_0x22aadd(0x219)]['IN_PROGRESS']),this[_0x22aadd(0x1dd)]=await salesforce_1[_0x22aadd(0x20b)][_0x22aadd(0x1fa)](new auth_manager_1[(_0x22aadd(0x210))](_0x5ae9c6),[],{'headers':{'Accept-Encoding':'gzip'}}),await this[_0x22aadd(0x1d6)](),await this['disableAutomationProcess'](),await this[_0x22aadd(0x1f7)](),await this['enableAutomationProcess'](),this[_0x22aadd(0x1d9)][_0x22aadd(0x208)](logger_enums_1['JobStatus']['COMPLETED']);}catch(_0x341ed2){await this['enableAutomationProcess']()[_0x22aadd(0x209)](_0x1e5ced=>{const _0x52bf59=_0x22aadd;job_detail_1[_0x52bf59(0x1dc)][_0x52bf59(0x1f0)](_0x1e5ced[_0x52bf59(0x1eb)]);}),this[_0x22aadd(0x1f8)][_0x22aadd(0x1f6)](_0x341ed2[_0x22aadd(0x1eb)]),this[_0x22aadd(0x1d9)][_0x22aadd(0x208)](logger_enums_1[_0x22aadd(0x219)]['FAILED']),this['_loggerJobState'][_0x22aadd(0x1cd)](_0x341ed2[_0x22aadd(0x1eb)]),job_detail_1[_0x22aadd(0x1dc)][_0x22aadd(0x1f0)](_0x341ed2['message']);}finally{this[_0x22aadd(0x1f8)][_0x22aadd(0x1fb)](_0x22aadd(0x201)),job_detail_1[_0x22aadd(0x1dc)][_0x22aadd(0x1fb)]('Finish\x20Masking\x20Process'),await this[_0x22aadd(0x1d9)][_0x22aadd(0x1e8)](),await this[_0x22aadd(0x1f8)][_0x22aadd(0x1e8)]();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()[a72_0x439e6b(0x21b)]()[a72_0x439e6b(0x1d4)](()=>process[a72_0x439e6b(0x1da)](0x0))['catch'](()=>process[a72_0x439e6b(0x1da)](0x1));