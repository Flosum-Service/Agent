const a73_0x2be540=a73_0x115c;(function(_0x391bef,_0x3a31b4){const _0x5dfb4c=a73_0x115c,_0x568371=_0x391bef();while(!![]){try{const _0x572dbd=-parseInt(_0x5dfb4c(0x1a2))/0x1*(parseInt(_0x5dfb4c(0x1a0))/0x2)+-parseInt(_0x5dfb4c(0x1c9))/0x3*(-parseInt(_0x5dfb4c(0x1b8))/0x4)+-parseInt(_0x5dfb4c(0x1a6))/0x5+parseInt(_0x5dfb4c(0x1c1))/0x6+-parseInt(_0x5dfb4c(0x193))/0x7+-parseInt(_0x5dfb4c(0x1b7))/0x8*(parseInt(_0x5dfb4c(0x18c))/0x9)+parseInt(_0x5dfb4c(0x1ae))/0xa*(parseInt(_0x5dfb4c(0x190))/0xb);if(_0x572dbd===_0x3a31b4)break;else _0x568371['push'](_0x568371['shift']());}catch(_0x5549e3){_0x568371['push'](_0x568371['shift']());}}}(a73_0x85b3,0x73bdf));const a73_0x401758=(function(){let _0x761716=!![];return function(_0x52a375,_0x361cf5){const _0x48dcde=_0x761716?function(){const _0x1636e5=a73_0x115c;if(_0x361cf5){const _0x5d7d1e=_0x361cf5[_0x1636e5(0x1aa)](_0x52a375,arguments);return _0x361cf5=null,_0x5d7d1e;}}:function(){};return _0x761716=![],_0x48dcde;};}()),a73_0x34a1e2=a73_0x401758(this,function(){const _0x3b4caf=a73_0x115c;return a73_0x34a1e2[_0x3b4caf(0x1a7)]()[_0x3b4caf(0x19c)](_0x3b4caf(0x1c4))[_0x3b4caf(0x1a7)]()[_0x3b4caf(0x1ad)](a73_0x34a1e2)[_0x3b4caf(0x19c)](_0x3b4caf(0x1c4));});function a73_0x115c(_0x125911,_0x133d20){const _0x5862f6=a73_0x85b3();return a73_0x115c=function(_0x34a1e2,_0x401758){_0x34a1e2=_0x34a1e2-0x18b;let _0x85b354=_0x5862f6[_0x34a1e2];return _0x85b354;},a73_0x115c(_0x125911,_0x133d20);}a73_0x34a1e2();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x44f794){const _0x264a78=a73_0x115c;return _0x44f794&&_0x44f794[_0x264a78(0x1bd)]?_0x44f794:{'default':_0x44f794};};Object[a73_0x2be540(0x1ce)](exports,'__esModule',{'value':!![]}),exports[a73_0x2be540(0x1a5)]=void 0x0;const promises_1=require(a73_0x2be540(0x1a8)),salesforce_1=require(a73_0x2be540(0x1d1)),steps_creator_1=require(a73_0x2be540(0x1ba)),logger_enums_1=require(a73_0x2be540(0x1b1)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require(a73_0x2be540(0x1c7)),path_1=__importDefault(require(a73_0x2be540(0x1d5))),auth_manager_1=require(a73_0x2be540(0x1ab)),constants_1=require(a73_0x2be540(0x1d0)),job_detail_1=require(a73_0x2be540(0x1b9));class MaskingJob{constructor(){this['_isEnableAutomationProcessError']=![];}async[a73_0x2be540(0x19f)](){const _0x26834a=a73_0x2be540,{objectRules:_0x161218}=this[_0x26834a(0x18f)];this[_0x26834a(0x195)]=new salesforce_1[(_0x26834a(0x1cc))](this['getManagerAutomationProcessOptions'](_0x161218));}async[a73_0x2be540(0x1be)](){const _0x51af0f=a73_0x2be540;job_detail_1[_0x51af0f(0x1b5)][_0x51af0f(0x1d4)](_0x51af0f(0x1d8)),this['_loggerDetails'][_0x51af0f(0x1d4)]('Start\x20Masking\x20Process');const {objectRules:_0x2882a5,libraries:_0x2156c8}=this[_0x51af0f(0x18f)];this['_steps']=await new steps_creator_1['StepsCreator']({'loggerDetails':this[_0x51af0f(0x194)],'loggerJobState':this[_0x51af0f(0x1c2)],'libraries':_0x2156c8,'objectRules':_0x2882a5,'request':this[_0x51af0f(0x18e)]})[_0x51af0f(0x1b0)]();for(const _0x600331 of this[_0x51af0f(0x1c5)]){await _0x600331['execute']();}}['getManagerAutomationProcessOptions'](_0x59acdd){const _0x44babe=a73_0x2be540,_0x4e5906=[],_0x43f902=[],_0x344fb5=[],_0x2b239c=[];for(const _0x43760 in _0x59acdd){const {isDisableProcessBuilder:_0x43f72e,isDisableTrigger:_0x2f855c,isDisableValidationRule:_0x2cf2d0,isDisableWorkflow:_0x1eaa2a}=_0x59acdd[_0x43760]['disableAutomation'];_0x43f72e&&_0x344fb5['push'](_0x43760),_0x2f855c&&_0x4e5906[_0x44babe(0x1ca)](_0x43760),_0x2cf2d0&&_0x2b239c[_0x44babe(0x1ca)](_0x43760),_0x1eaa2a&&_0x43f902[_0x44babe(0x1ca)](_0x43760);}return{'instance':this['_request'],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x4e5906,'workflowsObjects':_0x43f902,'processBuilderObjects':_0x344fb5,'validationRulesObjects':_0x2b239c};}async[a73_0x2be540(0x1a9)](){const _0x72d059=a73_0x2be540;job_detail_1['systemLogger'][_0x72d059(0x1d4)](_0x72d059(0x18b)),this['_loggerDetails']['log'](_0x72d059(0x18b)),await this['_managerAutomationProcess'][_0x72d059(0x1cf)]();}async['enableAutomationProcess'](){const _0x3cbf2c=a73_0x2be540;!this[_0x3cbf2c(0x19d)]&&(job_detail_1[_0x3cbf2c(0x1b5)][_0x3cbf2c(0x1d4)]('Enable\x20automation\x20process'),this[_0x3cbf2c(0x194)]['log'](_0x3cbf2c(0x1d7)),await this['_managerAutomationProcess'][_0x3cbf2c(0x1c3)]()[_0x3cbf2c(0x1a1)](_0x2591d8=>{this['_isEnableAutomationProcessError']=!![];throw _0x2591d8;}));}async[a73_0x2be540(0x1c0)](){const _0x3f3342=a73_0x2be540,_0x15999f=await(0x0,promises_1[_0x3f3342(0x192)])(path_1[_0x3f3342(0x1d3)][_0x3f3342(0x191)](job_detail_1[_0x3f3342(0x19e)],job_1[_0x3f3342(0x18d)]),{'encoding':_0x3f3342(0x19b)});return await(0x0,promises_1['rm'])(path_1['default'][_0x3f3342(0x191)](job_detail_1[_0x3f3342(0x19e)],job_1[_0x3f3342(0x18d)]),{'recursive':!![],'force':!![]}),JSON['parse'](_0x15999f)[_0x3f3342(0x1b4)];}[a73_0x2be540(0x1bf)](_0x5e5c2d){const _0x239e9c=a73_0x2be540;return(0x0,promises_1[_0x239e9c(0x1b2)])(path_1[_0x239e9c(0x1d3)][_0x239e9c(0x191)](job_detail_1[_0x239e9c(0x19e)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x239e9c(0x1d2)](_0x5e5c2d,_0x239e9c(0x1a4)));}async['execute'](){const _0x101396=a73_0x2be540;this[_0x101396(0x18f)]=await this[_0x101396(0x1c0)]();const {objectRules:_0x50ce45,credentials:_0x19e9fb}=this[_0x101396(0x18f)];this[_0x101396(0x194)]=await new logger_details_1['LoggerDetails'](job_detail_1['jobStorePath'],job_detail_1[_0x101396(0x1af)])[_0x101396(0x1b3)](),this[_0x101396(0x1c2)]=await new logger_job_state_1['LoggerJobState'](job_detail_1['jobStorePath'],job_detail_1['jobId'])[_0x101396(0x1b3)](Object[_0x101396(0x199)](_0x50ce45));try{this[_0x101396(0x1c2)]['setJobStatus'](logger_enums_1[_0x101396(0x1a3)]['IN_PROGRESS']),this[_0x101396(0x18e)]=await salesforce_1[_0x101396(0x1c8)]['create'](new auth_manager_1[(_0x101396(0x19a))](_0x19e9fb),[],{'headers':{'Accept-Encoding':_0x101396(0x1b6)}}),await this['initAutomationProcess'](),await this[_0x101396(0x1a9)](),await this['masking'](),await this[_0x101396(0x196)](),this[_0x101396(0x1c2)]['setJobStatus'](logger_enums_1['JobStatus'][_0x101396(0x1bb)]);}catch(_0x357a6a){await this['enableAutomationProcess']()[_0x101396(0x1a1)](_0x514e2d=>{const _0x29813a=_0x101396;job_detail_1[_0x29813a(0x1b5)]['error'](_0x514e2d[_0x29813a(0x1ac)]);}),this['_loggerDetails']['exception'](_0x357a6a[_0x101396(0x1ac)]),this[_0x101396(0x1c2)][_0x101396(0x198)](logger_enums_1[_0x101396(0x1a3)]['FAILED']),this['_loggerJobState'][_0x101396(0x1c6)](_0x357a6a['message']),job_detail_1[_0x101396(0x1b5)]['error'](_0x357a6a[_0x101396(0x1ac)]);}finally{this['_loggerDetails'][_0x101396(0x1d4)](_0x101396(0x1cd)),job_detail_1[_0x101396(0x1b5)][_0x101396(0x1d4)](_0x101396(0x1cd)),await this[_0x101396(0x1c2)][_0x101396(0x1d6)](),await this[_0x101396(0x194)]['kill']();}}}function a73_0x85b3(){const _0x47ad37=['MANIFEST_FILENAME','_request','_maskingManifest','18869477XDHTJk','join','readFile','4038244gfxedc','_loggerDetails','_managerAutomationProcess','enableAutomationProcess','exit','setJobStatus','keys','AuthManager','utf-8','search','_isEnableAutomationProcessError','jobStorePath','initAutomationProcess','4aUNHbh','catch','263701TZHaAe','JobStatus','base64','MaskingJob','575695DbcabV','toString','fs/promises','disableAutomationProcess','apply','../../shared/managers/auth.manager','message','constructor','10czgfMe','jobId','create','./enums/logger.enums','writeFile','init','details','systemLogger','gzip','3528lGQhyC','5064fPUqwL','./job-detail','./classes/step/steps-creator','COMPLETED','then','__esModule','masking','saveSourceAutomationProcessesBackup','getManifest','3688284VqWPIz','_loggerJobState','enable','(((.+)+)+)+$','_steps','setJobError','../../../constants/job','AxiosInstanceUtils','129yRIANL','push','execute','ManagerAutomationProcess','Finish\x20Masking\x20Process','defineProperty','disable','../constants','@flosum/salesforce','from','default','log','path','kill','Enable\x20automation\x20process','Start\x20Masking\x20Process','Disable\x20automation\x20process','14103JOZsUS'];a73_0x85b3=function(){return _0x47ad37;};return a73_0x85b3();}exports[a73_0x2be540(0x1a5)]=MaskingJob,new MaskingJob()[a73_0x2be540(0x1cb)]()[a73_0x2be540(0x1bc)](()=>process[a73_0x2be540(0x197)](0x0))[a73_0x2be540(0x1a1)](()=>process['exit'](0x1));