const a73_0x304ac5=a73_0x58d5;(function(_0x1656d2,_0x352e95){const _0x2fd9d2=a73_0x58d5,_0x294d80=_0x1656d2();while(!![]){try{const _0x13df50=-parseInt(_0x2fd9d2(0xfe))/0x1+-parseInt(_0x2fd9d2(0x13b))/0x2*(parseInt(_0x2fd9d2(0x150))/0x3)+-parseInt(_0x2fd9d2(0x14c))/0x4+-parseInt(_0x2fd9d2(0x133))/0x5*(-parseInt(_0x2fd9d2(0x13a))/0x6)+-parseInt(_0x2fd9d2(0x129))/0x7*(parseInt(_0x2fd9d2(0x139))/0x8)+-parseInt(_0x2fd9d2(0x130))/0x9*(parseInt(_0x2fd9d2(0x127))/0xa)+-parseInt(_0x2fd9d2(0x115))/0xb*(-parseInt(_0x2fd9d2(0x103))/0xc);if(_0x13df50===_0x352e95)break;else _0x294d80['push'](_0x294d80['shift']());}catch(_0x3b007e){_0x294d80['push'](_0x294d80['shift']());}}}(a73_0x2f49,0xe7328));const a73_0x26bc09=(function(){let _0x330d6e=!![];return function(_0x5e01ce,_0x6e81b9){const _0x36a66d=_0x330d6e?function(){const _0x413d03=a73_0x58d5;if(_0x6e81b9){const _0x3d2d3a=_0x6e81b9[_0x413d03(0x12f)](_0x5e01ce,arguments);return _0x6e81b9=null,_0x3d2d3a;}}:function(){};return _0x330d6e=![],_0x36a66d;};}()),a73_0x305470=a73_0x26bc09(this,function(){const _0x588098=a73_0x58d5;return a73_0x305470[_0x588098(0x134)]()['search']('(((.+)+)+)+$')[_0x588098(0x134)]()[_0x588098(0x114)](a73_0x305470)[_0x588098(0x106)](_0x588098(0x109));});function a73_0x58d5(_0x411264,_0x5e5318){const _0x49e5bd=a73_0x2f49();return a73_0x58d5=function(_0x305470,_0x26bc09){_0x305470=_0x305470-0xfc;let _0x2f4939=_0x49e5bd[_0x305470];return _0x2f4939;},a73_0x58d5(_0x411264,_0x5e5318);}a73_0x305470();'use strict';var __importDefault=this&&this[a73_0x304ac5(0x146)]||function(_0x43b557){const _0x158c94=a73_0x304ac5;return _0x43b557&&_0x43b557[_0x158c94(0x12a)]?_0x43b557:{'default':_0x43b557};};Object[a73_0x304ac5(0x120)](exports,a73_0x304ac5(0x12a),{'value':!![]}),exports[a73_0x304ac5(0x135)]=void 0x0;const promises_1=require(a73_0x304ac5(0x13f)),salesforce_1=require(a73_0x304ac5(0x148)),steps_creator_1=require('./classes/step/steps-creator'),logger_enums_1=require(a73_0x304ac5(0x10c)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require(a73_0x304ac5(0x121)),job_1=require(a73_0x304ac5(0x14d)),path_1=__importDefault(require(a73_0x304ac5(0x124))),auth_manager_1=require(a73_0x304ac5(0x11c)),constants_1=require(a73_0x304ac5(0x14f)),job_detail_1=require('./job-detail');function a73_0x2f49(){const _0x16f863=['_loggerJobState','apply','2115fiHtoz','exit','kill','16450peOPKF','toString','MaskingJob','_managerAutomationProcess','LoggerDetails','disableAutomation','1805336SpehjR','570kMHnNh','2xMgoUk','_maskingManifest','StepsCreator','writeFile','fs/promises','init','enableAutomationProcess','push','getManagerAutomationProcessOptions','join','initAutomationProcess','__importDefault','saveSourceAutomationProcessesBackup','@flosum/salesforce','create','FAILED','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','3287240QgkzVL','../../../constants/job','message','../constants','3278721DWGZbP','Disable\x20automation\x20process','base64','713719xscgpo','_loggerDetails','disable','catch','ManagerAutomationProcess','5088SyIIXJ','exception','disableAutomationProcess','search','gzip','details','(((.+)+)+)+$','error','jobStorePath','./enums/logger.enums','_steps','setJobError','Finish\x20Masking\x20Process','LoggerJobState','IN_PROGRESS','masking','Start\x20Masking\x20Process','constructor','146696FQHFKt','Enable\x20automation\x20process','default','log','jobId','_request','execute','../../shared/managers/auth.manager','COMPLETED','AxiosInstanceUtils','from','defineProperty','./classes/logger/logger-job-state','enable','setJobStatus','path','_isEnableAutomationProcessError','systemLogger','34550NVCKJm','JobStatus','49hwWMUn','__esModule','getManifest','AuthManager','MANIFEST_FILENAME'];a73_0x2f49=function(){return _0x16f863;};return a73_0x2f49();}class MaskingJob{constructor(){const _0x5d00e3=a73_0x304ac5;this[_0x5d00e3(0x125)]=![];}async[a73_0x304ac5(0x145)](){const _0x12e14e=a73_0x304ac5,{objectRules:_0x5cad0e}=this[_0x12e14e(0x13c)];this['_managerAutomationProcess']=new salesforce_1[(_0x12e14e(0x102))](this[_0x12e14e(0x143)](_0x5cad0e));}async['masking'](){const _0xb444d6=a73_0x304ac5;job_detail_1[_0xb444d6(0x126)][_0xb444d6(0x118)](_0xb444d6(0x113)),this[_0xb444d6(0xff)]['log'](_0xb444d6(0x113));const {objectRules:_0x4bff5e,libraries:_0x170323}=this['_maskingManifest'];this[_0xb444d6(0x10d)]=await new steps_creator_1[(_0xb444d6(0x13d))]({'loggerDetails':this[_0xb444d6(0xff)],'loggerJobState':this[_0xb444d6(0x12e)],'libraries':_0x170323,'objectRules':_0x4bff5e,'request':this[_0xb444d6(0x11a)]})[_0xb444d6(0x149)]();for(const _0x2cb6e6 of this[_0xb444d6(0x10d)]){await _0x2cb6e6[_0xb444d6(0x11b)]();}}[a73_0x304ac5(0x143)](_0x5d09dc){const _0x38ddc7=a73_0x304ac5,_0x4c8eba=[],_0x313d8c=[],_0x243e60=[],_0x58c0da=[];for(const _0x303382 in _0x5d09dc){const {isDisableProcessBuilder:_0x20f4f7,isDisableTrigger:_0x21df40,isDisableValidationRule:_0x14d9f9,isDisableWorkflow:_0x32cb6f}=_0x5d09dc[_0x303382][_0x38ddc7(0x138)];_0x20f4f7&&_0x243e60['push'](_0x303382),_0x21df40&&_0x4c8eba[_0x38ddc7(0x142)](_0x303382),_0x14d9f9&&_0x58c0da[_0x38ddc7(0x142)](_0x303382),_0x32cb6f&&_0x313d8c['push'](_0x303382);}return{'instance':this[_0x38ddc7(0x11a)],'saveSourceMetadataBackup':this[_0x38ddc7(0x147)],'triggersObjects':_0x4c8eba,'workflowsObjects':_0x313d8c,'processBuilderObjects':_0x243e60,'validationRulesObjects':_0x58c0da};}async[a73_0x304ac5(0x105)](){const _0x24bc0a=a73_0x304ac5;job_detail_1[_0x24bc0a(0x126)][_0x24bc0a(0x118)]('Disable\x20automation\x20process'),this[_0x24bc0a(0xff)][_0x24bc0a(0x118)](_0x24bc0a(0xfc)),await this[_0x24bc0a(0x136)][_0x24bc0a(0x100)]();}async['enableAutomationProcess'](){const _0x5d6272=a73_0x304ac5;!this[_0x5d6272(0x125)]&&(job_detail_1[_0x5d6272(0x126)][_0x5d6272(0x118)]('Enable\x20automation\x20process'),this[_0x5d6272(0xff)]['log'](_0x5d6272(0x116)),await this[_0x5d6272(0x136)][_0x5d6272(0x122)]()[_0x5d6272(0x101)](_0x414474=>{const _0x2ca64e=_0x5d6272;this[_0x2ca64e(0x125)]=!![];throw _0x414474;}));}async[a73_0x304ac5(0x12b)](){const _0xf7d8c0=a73_0x304ac5,_0x13934d=await(0x0,promises_1['readFile'])(path_1[_0xf7d8c0(0x117)][_0xf7d8c0(0x144)](job_detail_1[_0xf7d8c0(0x10b)],job_1[_0xf7d8c0(0x12d)]),{'encoding':'utf-8'});return await(0x0,promises_1['rm'])(path_1[_0xf7d8c0(0x117)][_0xf7d8c0(0x144)](job_detail_1['jobStorePath'],job_1[_0xf7d8c0(0x12d)]),{'recursive':!![],'force':!![]}),JSON['parse'](_0x13934d)[_0xf7d8c0(0x108)];}[a73_0x304ac5(0x147)](_0x549a82){const _0x421b03=a73_0x304ac5;return(0x0,promises_1[_0x421b03(0x13e)])(path_1[_0x421b03(0x117)]['join'](job_detail_1[_0x421b03(0x10b)],constants_1[_0x421b03(0x14b)]),Buffer[_0x421b03(0x11f)](_0x549a82,_0x421b03(0xfd)));}async[a73_0x304ac5(0x11b)](){const _0x313c8e=a73_0x304ac5;this[_0x313c8e(0x13c)]=await this[_0x313c8e(0x12b)]();const {objectRules:_0x1b8e16,credentials:_0x3d1fb1}=this[_0x313c8e(0x13c)];this[_0x313c8e(0xff)]=await new logger_details_1[(_0x313c8e(0x137))](job_detail_1['jobStorePath'],job_detail_1[_0x313c8e(0x119)])[_0x313c8e(0x140)](),this[_0x313c8e(0x12e)]=await new logger_job_state_1[(_0x313c8e(0x110))](job_detail_1[_0x313c8e(0x10b)],job_detail_1[_0x313c8e(0x119)])['init'](Object['keys'](_0x1b8e16));try{this['_loggerJobState'][_0x313c8e(0x123)](logger_enums_1[_0x313c8e(0x128)][_0x313c8e(0x111)]),this[_0x313c8e(0x11a)]=await salesforce_1[_0x313c8e(0x11e)][_0x313c8e(0x149)](new auth_manager_1[(_0x313c8e(0x12c))](_0x3d1fb1),[],{'headers':{'Accept-Encoding':_0x313c8e(0x107)}}),await this[_0x313c8e(0x145)](),await this['disableAutomationProcess'](),await this[_0x313c8e(0x112)](),await this[_0x313c8e(0x141)](),this[_0x313c8e(0x12e)]['setJobStatus'](logger_enums_1[_0x313c8e(0x128)][_0x313c8e(0x11d)]);}catch(_0x4096cc){await this['enableAutomationProcess']()[_0x313c8e(0x101)](_0x57ea77=>{const _0x1720fb=_0x313c8e;job_detail_1[_0x1720fb(0x126)][_0x1720fb(0x10a)](_0x57ea77[_0x1720fb(0x14e)]);}),this[_0x313c8e(0xff)][_0x313c8e(0x104)](_0x4096cc['message']),this[_0x313c8e(0x12e)][_0x313c8e(0x123)](logger_enums_1[_0x313c8e(0x128)][_0x313c8e(0x14a)]),this[_0x313c8e(0x12e)][_0x313c8e(0x10e)](_0x4096cc[_0x313c8e(0x14e)]),job_detail_1[_0x313c8e(0x126)][_0x313c8e(0x10a)](_0x4096cc[_0x313c8e(0x14e)]);}finally{this['_loggerDetails'][_0x313c8e(0x118)]('Finish\x20Masking\x20Process'),job_detail_1[_0x313c8e(0x126)][_0x313c8e(0x118)](_0x313c8e(0x10f)),await this['_loggerJobState']['kill'](),await this[_0x313c8e(0xff)][_0x313c8e(0x132)]();}}}exports[a73_0x304ac5(0x135)]=MaskingJob,new MaskingJob()[a73_0x304ac5(0x11b)]()['then'](()=>process[a73_0x304ac5(0x131)](0x0))['catch'](()=>process[a73_0x304ac5(0x131)](0x1));