const a90_0xd13e62=a90_0x2e12;(function(_0x2bd543,_0x1f4930){const _0x2e2086=a90_0x2e12,_0x37f71f=_0x2bd543();while(!![]){try{const _0x43afd9=parseInt(_0x2e2086(0x97))/0x1+-parseInt(_0x2e2086(0x95))/0x2*(parseInt(_0x2e2086(0x94))/0x3)+parseInt(_0x2e2086(0xc7))/0x4+parseInt(_0x2e2086(0x90))/0x5+-parseInt(_0x2e2086(0xce))/0x6*(-parseInt(_0x2e2086(0xba))/0x7)+parseInt(_0x2e2086(0xbd))/0x8+-parseInt(_0x2e2086(0x8f))/0x9;if(_0x43afd9===_0x1f4930)break;else _0x37f71f['push'](_0x37f71f['shift']());}catch(_0x3b54c2){_0x37f71f['push'](_0x37f71f['shift']());}}}(a90_0x2597,0xb2e78));function a90_0x2597(){const _0x41037e=['init','disableAutomationProcess','StepsCreator','Start\x20Masking\x20Process','disableAutomation','fs/promises','JobStatus','../../shared/managers/auth.manager','35bPmNfD','../constants','./classes/logger/logger-details','2674760QuUgUs','exception','jobId','getManifest','kill','setJobError','exit','LoggerDetails','default','@flosum/salesforce','781224XhjIFn','gzip','_maskingManifest','MANIFEST_FILENAME','execute','create','../../../constants/job','1564764nvVJmg','parse','search','path','systemLogger','constructor','__esModule','disable','ManagerAutomationProcess','readFile','MaskingJob','12712653dZwpGT','588440LyrKyl','keys','then','AuthManager','2671755pfvjpl','2LNnGLr','_request','1084585vyrAHZ','message','jobStorePath','base64','Finish\x20Masking\x20Process','_loggerDetails','setJobStatus','writeFile','details','_loggerJobState','_managerAutomationProcess','./enums/logger.enums','enableAutomationProcess','_isEnableAutomationProcessError','(((.+)+)+)+$','masking','initAutomationProcess','AxiosInstanceUtils','toString','saveSourceAutomationProcessesBackup','error','apply','Disable\x20automation\x20process','catch','__importDefault','log','push'];a90_0x2597=function(){return _0x41037e;};return a90_0x2597();}const a90_0x381c4d=(function(){let _0x32961d=!![];return function(_0x589e75,_0x2e3df9){const _0x564a92=_0x32961d?function(){const _0x167b6d=a90_0x2e12;if(_0x2e3df9){const _0x101530=_0x2e3df9[_0x167b6d(0xac)](_0x589e75,arguments);return _0x2e3df9=null,_0x101530;}}:function(){};return _0x32961d=![],_0x564a92;};}()),a90_0xab909c=a90_0x381c4d(this,function(){const _0x586fb7=a90_0x2e12;return a90_0xab909c[_0x586fb7(0xa9)]()['search'](_0x586fb7(0xa5))[_0x586fb7(0xa9)]()[_0x586fb7(0xd3)](a90_0xab909c)[_0x586fb7(0xd0)]('(((.+)+)+)+$');});a90_0xab909c();'use strict';var __importDefault=this&&this[a90_0xd13e62(0xaf)]||function(_0x46d435){const _0x2cbbf3=a90_0xd13e62;return _0x46d435&&_0x46d435[_0x2cbbf3(0x8a)]?_0x46d435:{'default':_0x46d435};};function a90_0x2e12(_0x565a74,_0x2a389e){const _0x43824f=a90_0x2597();return a90_0x2e12=function(_0xab909c,_0x381c4d){_0xab909c=_0xab909c-0x8a;let _0x25979d=_0x43824f[_0xab909c];return _0x25979d;},a90_0x2e12(_0x565a74,_0x2a389e);}Object['defineProperty'](exports,a90_0xd13e62(0x8a),{'value':!![]}),exports[a90_0xd13e62(0x8e)]=void 0x0;const promises_1=require(a90_0xd13e62(0xb7)),salesforce_1=require(a90_0xd13e62(0xc6)),steps_creator_1=require('./classes/step/steps-creator'),logger_enums_1=require(a90_0xd13e62(0xa2)),logger_details_1=require(a90_0xd13e62(0xbc)),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require(a90_0xd13e62(0xcd)),path_1=__importDefault(require(a90_0xd13e62(0xd1))),auth_manager_1=require(a90_0xd13e62(0xb9)),constants_1=require(a90_0xd13e62(0xbb)),job_detail_1=require('./job-detail');class MaskingJob{constructor(){const _0x43ccb7=a90_0xd13e62;this[_0x43ccb7(0xa4)]=![];}async[a90_0xd13e62(0xa7)](){const _0x18d9a3=a90_0xd13e62,{objectRules:_0x1ffe4b}=this[_0x18d9a3(0xc9)];this['_managerAutomationProcess']=new salesforce_1[(_0x18d9a3(0x8c))](this['getManagerAutomationProcessOptions'](_0x1ffe4b));}async[a90_0xd13e62(0xa6)](){const _0x2138de=a90_0xd13e62;job_detail_1[_0x2138de(0xd2)][_0x2138de(0xb0)](_0x2138de(0xb5)),this[_0x2138de(0x9c)][_0x2138de(0xb0)]('Start\x20Masking\x20Process');const {objectRules:_0xa44ee4,libraries:_0xe98984}=this[_0x2138de(0xc9)];this['_steps']=await new steps_creator_1[(_0x2138de(0xb4))]({'loggerDetails':this['_loggerDetails'],'loggerJobState':this[_0x2138de(0xa0)],'libraries':_0xe98984,'objectRules':_0xa44ee4,'request':this['_request']})[_0x2138de(0xcc)]();for(const _0x2d5e51 of this['_steps']){await _0x2d5e51[_0x2138de(0xcb)]();}}['getManagerAutomationProcessOptions'](_0x3ecccd){const _0x318677=a90_0xd13e62,_0x329782=[],_0x21dbc3=[],_0x477bf1=[],_0x501fac=[];for(const _0x46af68 in _0x3ecccd){const {isDisableProcessBuilder:_0x3f3974,isDisableTrigger:_0x58b471,isDisableValidationRule:_0x3eaa43,isDisableWorkflow:_0x451b8b}=_0x3ecccd[_0x46af68][_0x318677(0xb6)];_0x3f3974&&_0x477bf1[_0x318677(0xb1)](_0x46af68),_0x58b471&&_0x329782['push'](_0x46af68),_0x3eaa43&&_0x501fac[_0x318677(0xb1)](_0x46af68),_0x451b8b&&_0x21dbc3[_0x318677(0xb1)](_0x46af68);}return{'instance':this['_request'],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x329782,'workflowsObjects':_0x21dbc3,'processBuilderObjects':_0x477bf1,'validationRulesObjects':_0x501fac};}async['disableAutomationProcess'](){const _0x491eb8=a90_0xd13e62;job_detail_1['systemLogger'][_0x491eb8(0xb0)](_0x491eb8(0xad)),this[_0x491eb8(0x9c)][_0x491eb8(0xb0)]('Disable\x20automation\x20process'),await this[_0x491eb8(0xa1)][_0x491eb8(0x8b)]();}async[a90_0xd13e62(0xa3)](){const _0x22c0b5=a90_0xd13e62;!this[_0x22c0b5(0xa4)]&&(job_detail_1[_0x22c0b5(0xd2)]['log']('Enable\x20automation\x20process'),this['_loggerDetails'][_0x22c0b5(0xb0)]('Enable\x20automation\x20process'),await this[_0x22c0b5(0xa1)]['enable']()[_0x22c0b5(0xae)](_0x9d71b9=>{const _0x33d60b=_0x22c0b5;this[_0x33d60b(0xa4)]=!![];throw _0x9d71b9;}));}async[a90_0xd13e62(0xc0)](){const _0x2aa970=a90_0xd13e62,_0x22e7b3=await(0x0,promises_1[_0x2aa970(0x8d)])(path_1['default']['join'](job_detail_1[_0x2aa970(0x99)],job_1[_0x2aa970(0xca)]),{'encoding':'utf-8'});return await(0x0,promises_1['rm'])(path_1[_0x2aa970(0xc5)]['join'](job_detail_1[_0x2aa970(0x99)],job_1[_0x2aa970(0xca)]),{'recursive':!![],'force':!![]}),JSON[_0x2aa970(0xcf)](_0x22e7b3)[_0x2aa970(0x9f)];}[a90_0xd13e62(0xaa)](_0x49f83d){const _0x44f50b=a90_0xd13e62;return(0x0,promises_1[_0x44f50b(0x9e)])(path_1['default']['join'](job_detail_1[_0x44f50b(0x99)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer['from'](_0x49f83d,_0x44f50b(0x9a)));}async[a90_0xd13e62(0xcb)](){const _0x3d5d12=a90_0xd13e62;this[_0x3d5d12(0xc9)]=await this[_0x3d5d12(0xc0)]();const {objectRules:_0x27142f,credentials:_0x6ecdc9}=this[_0x3d5d12(0xc9)];this[_0x3d5d12(0x9c)]=await new logger_details_1[(_0x3d5d12(0xc4))](job_detail_1[_0x3d5d12(0x99)],job_detail_1[_0x3d5d12(0xbf)])['init'](),this[_0x3d5d12(0xa0)]=await new logger_job_state_1['LoggerJobState'](job_detail_1[_0x3d5d12(0x99)],job_detail_1[_0x3d5d12(0xbf)])[_0x3d5d12(0xb2)](Object[_0x3d5d12(0x91)](_0x27142f));try{this[_0x3d5d12(0xa0)][_0x3d5d12(0x9d)](logger_enums_1[_0x3d5d12(0xb8)]['IN_PROGRESS']),this[_0x3d5d12(0x96)]=await salesforce_1[_0x3d5d12(0xa8)][_0x3d5d12(0xcc)](new auth_manager_1[(_0x3d5d12(0x93))](_0x6ecdc9),[],{'headers':{'Accept-Encoding':_0x3d5d12(0xc8)}}),await this[_0x3d5d12(0xa7)](),await this[_0x3d5d12(0xb3)](),await this['masking'](),await this[_0x3d5d12(0xa3)](),this['_loggerJobState'][_0x3d5d12(0x9d)](logger_enums_1['JobStatus']['COMPLETED']);}catch(_0x42972f){await this[_0x3d5d12(0xa3)]()[_0x3d5d12(0xae)](_0x4bd4d1=>{const _0x4914af=_0x3d5d12;job_detail_1['systemLogger'][_0x4914af(0xab)](_0x4bd4d1['message']);}),this[_0x3d5d12(0x9c)][_0x3d5d12(0xbe)](_0x42972f[_0x3d5d12(0x98)]),this[_0x3d5d12(0xa0)][_0x3d5d12(0x9d)](logger_enums_1['JobStatus']['FAILED']),this[_0x3d5d12(0xa0)][_0x3d5d12(0xc2)](_0x42972f['message']),job_detail_1[_0x3d5d12(0xd2)]['error'](_0x42972f['message']);}finally{this[_0x3d5d12(0x9c)][_0x3d5d12(0xb0)](_0x3d5d12(0x9b)),job_detail_1[_0x3d5d12(0xd2)][_0x3d5d12(0xb0)](_0x3d5d12(0x9b)),await this['_loggerJobState'][_0x3d5d12(0xc1)](),await this[_0x3d5d12(0x9c)][_0x3d5d12(0xc1)]();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()['execute']()[a90_0xd13e62(0x92)](()=>process[a90_0xd13e62(0xc3)](0x0))[a90_0xd13e62(0xae)](()=>process['exit'](0x1));