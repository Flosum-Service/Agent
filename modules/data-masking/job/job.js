const a73_0x51ea7e=a73_0x3249;function a73_0x3249(_0x5510f9,_0x592268){const _0x2470c0=a73_0x483d();return a73_0x3249=function(_0x44bb56,_0x31e4af){_0x44bb56=_0x44bb56-0x145;let _0x483d12=_0x2470c0[_0x44bb56];return _0x483d12;},a73_0x3249(_0x5510f9,_0x592268);}(function(_0xf081d7,_0x49a3af){const _0x103458=a73_0x3249,_0x243fe0=_0xf081d7();while(!![]){try{const _0xa597ff=-parseInt(_0x103458(0x17e))/0x1+-parseInt(_0x103458(0x160))/0x2+parseInt(_0x103458(0x157))/0x3+parseInt(_0x103458(0x158))/0x4*(parseInt(_0x103458(0x192))/0x5)+parseInt(_0x103458(0x193))/0x6+parseInt(_0x103458(0x188))/0x7+parseInt(_0x103458(0x155))/0x8;if(_0xa597ff===_0x49a3af)break;else _0x243fe0['push'](_0x243fe0['shift']());}catch(_0x237f16){_0x243fe0['push'](_0x243fe0['shift']());}}}(a73_0x483d,0x798e7));const a73_0x31e4af=(function(){let _0x4a1447=!![];return function(_0x7d7e7a,_0x31c25e){const _0x2e5a28=_0x4a1447?function(){const _0x27989b=a73_0x3249;if(_0x31c25e){const _0x587289=_0x31c25e[_0x27989b(0x189)](_0x7d7e7a,arguments);return _0x31c25e=null,_0x587289;}}:function(){};return _0x4a1447=![],_0x2e5a28;};}()),a73_0x44bb56=a73_0x31e4af(this,function(){const _0x227e6c=a73_0x3249;return a73_0x44bb56[_0x227e6c(0x16e)]()['search']('(((.+)+)+)+$')[_0x227e6c(0x16e)]()[_0x227e6c(0x178)](a73_0x44bb56)['search'](_0x227e6c(0x15e));});a73_0x44bb56();'use strict';function a73_0x483d(){const _0x8ca4e7=['620916TDPwAa','JobStatus','keys','../../../constants/job','Start\x20Masking\x20Process','error','details','enableAutomationProcess','kill','LoggerJobState','push','_loggerDetails','./job-detail','_request','saveSourceAutomationProcessesBackup','getManagerAutomationProcessOptions','setJobStatus','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','2035648PooLUq','Finish\x20Masking\x20Process','97554HWPCbI','124pdgdOO','disableAutomation','IN_PROGRESS','AxiosInstanceUtils','path','execute','(((.+)+)+)+$','systemLogger','992278TLTrpQ','jobStorePath','enable','MaskingJob','fs/promises','@flosum/salesforce','./classes/logger/logger-job-state','__importDefault','default','exit','LoggerDetails','_maskingManifest','Enable\x20automation\x20process','log','toString','./classes/step/steps-creator','MANIFEST_FILENAME','disable','base64','ManagerAutomationProcess','disableAutomationProcess','then','initAutomationProcess','AuthManager','constructor','defineProperty','catch','utf-8','readFile','masking','217715lUPTio','message','create','__esModule','writeFile','../constants','_isEnableAutomationProcessError','StepsCreator','exception','Disable\x20automation\x20process','1780310pZkzFT','apply','../../shared/managers/auth.manager','_loggerJobState','FAILED','join','init','COMPLETED','_managerAutomationProcess','parse','91445WmFotM'];a73_0x483d=function(){return _0x8ca4e7;};return a73_0x483d();}var __importDefault=this&&this[a73_0x51ea7e(0x167)]||function(_0x48c476){const _0x2f4a43=a73_0x51ea7e;return _0x48c476&&_0x48c476[_0x2f4a43(0x181)]?_0x48c476:{'default':_0x48c476};};Object[a73_0x51ea7e(0x179)](exports,a73_0x51ea7e(0x181),{'value':!![]}),exports[a73_0x51ea7e(0x163)]=void 0x0;const promises_1=require(a73_0x51ea7e(0x164)),salesforce_1=require(a73_0x51ea7e(0x165)),steps_creator_1=require(a73_0x51ea7e(0x16f)),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require(a73_0x51ea7e(0x166)),job_1=require(a73_0x51ea7e(0x146)),path_1=__importDefault(require(a73_0x51ea7e(0x15c))),auth_manager_1=require(a73_0x51ea7e(0x18a)),constants_1=require(a73_0x51ea7e(0x183)),job_detail_1=require(a73_0x51ea7e(0x14f));class MaskingJob{constructor(){const _0x49b9fe=a73_0x51ea7e;this[_0x49b9fe(0x184)]=![];}async[a73_0x51ea7e(0x176)](){const _0x59ac19=a73_0x51ea7e,{objectRules:_0x3e647f}=this[_0x59ac19(0x16b)];this[_0x59ac19(0x190)]=new salesforce_1[(_0x59ac19(0x173))](this[_0x59ac19(0x152)](_0x3e647f));}async[a73_0x51ea7e(0x17d)](){const _0x212174=a73_0x51ea7e;job_detail_1[_0x212174(0x15f)][_0x212174(0x16d)](_0x212174(0x147)),this[_0x212174(0x14e)][_0x212174(0x16d)](_0x212174(0x147));const {objectRules:_0x1d25b6,libraries:_0x1d11af}=this[_0x212174(0x16b)];this['_steps']=await new steps_creator_1[(_0x212174(0x185))]({'loggerDetails':this[_0x212174(0x14e)],'loggerJobState':this[_0x212174(0x18b)],'libraries':_0x1d11af,'objectRules':_0x1d25b6,'request':this[_0x212174(0x150)]})['create']();for(const _0x1b6d6c of this['_steps']){await _0x1b6d6c[_0x212174(0x15d)]();}}[a73_0x51ea7e(0x152)](_0x1e8a54){const _0x570093=a73_0x51ea7e,_0x23db05=[],_0x54440c=[],_0x15b878=[],_0xe90185=[];for(const _0x34a88f in _0x1e8a54){const {isDisableProcessBuilder:_0x16526c,isDisableTrigger:_0x51dad8,isDisableValidationRule:_0x3fb5b7,isDisableWorkflow:_0x10210f}=_0x1e8a54[_0x34a88f][_0x570093(0x159)];_0x16526c&&_0x15b878[_0x570093(0x14d)](_0x34a88f),_0x51dad8&&_0x23db05['push'](_0x34a88f),_0x3fb5b7&&_0xe90185[_0x570093(0x14d)](_0x34a88f),_0x10210f&&_0x54440c[_0x570093(0x14d)](_0x34a88f);}return{'instance':this[_0x570093(0x150)],'saveSourceMetadataBackup':this[_0x570093(0x151)],'triggersObjects':_0x23db05,'workflowsObjects':_0x54440c,'processBuilderObjects':_0x15b878,'validationRulesObjects':_0xe90185};}async[a73_0x51ea7e(0x174)](){const _0x2d61a3=a73_0x51ea7e;job_detail_1[_0x2d61a3(0x15f)][_0x2d61a3(0x16d)](_0x2d61a3(0x187)),this[_0x2d61a3(0x14e)][_0x2d61a3(0x16d)](_0x2d61a3(0x187)),await this[_0x2d61a3(0x190)][_0x2d61a3(0x171)]();}async['enableAutomationProcess'](){const _0x5e1924=a73_0x51ea7e;!this[_0x5e1924(0x184)]&&(job_detail_1[_0x5e1924(0x15f)][_0x5e1924(0x16d)](_0x5e1924(0x16c)),this[_0x5e1924(0x14e)]['log'](_0x5e1924(0x16c)),await this[_0x5e1924(0x190)][_0x5e1924(0x162)]()['catch'](_0x315ef9=>{const _0xaaec3a=_0x5e1924;this[_0xaaec3a(0x184)]=!![];throw _0x315ef9;}));}async['getManifest'](){const _0x3bba32=a73_0x51ea7e,_0x4f0fac=await(0x0,promises_1[_0x3bba32(0x17c)])(path_1[_0x3bba32(0x168)]['join'](job_detail_1[_0x3bba32(0x161)],job_1[_0x3bba32(0x170)]),{'encoding':_0x3bba32(0x17b)});return await(0x0,promises_1['rm'])(path_1['default']['join'](job_detail_1['jobStorePath'],job_1[_0x3bba32(0x170)]),{'recursive':!![],'force':!![]}),JSON[_0x3bba32(0x191)](_0x4f0fac)[_0x3bba32(0x149)];}[a73_0x51ea7e(0x151)](_0x2c9798){const _0x192694=a73_0x51ea7e;return(0x0,promises_1[_0x192694(0x182)])(path_1[_0x192694(0x168)][_0x192694(0x18d)](job_detail_1[_0x192694(0x161)],constants_1[_0x192694(0x154)]),Buffer['from'](_0x2c9798,_0x192694(0x172)));}async[a73_0x51ea7e(0x15d)](){const _0x1a7ced=a73_0x51ea7e;this[_0x1a7ced(0x16b)]=await this['getManifest']();const {objectRules:_0x591108,credentials:_0x36315c}=this[_0x1a7ced(0x16b)];this[_0x1a7ced(0x14e)]=await new logger_details_1[(_0x1a7ced(0x16a))](job_detail_1[_0x1a7ced(0x161)],job_detail_1['jobId'])[_0x1a7ced(0x18e)](),this[_0x1a7ced(0x18b)]=await new logger_job_state_1[(_0x1a7ced(0x14c))](job_detail_1['jobStorePath'],job_detail_1['jobId'])[_0x1a7ced(0x18e)](Object[_0x1a7ced(0x145)](_0x591108));try{this[_0x1a7ced(0x18b)][_0x1a7ced(0x153)](logger_enums_1[_0x1a7ced(0x194)][_0x1a7ced(0x15a)]),this['_request']=await salesforce_1[_0x1a7ced(0x15b)][_0x1a7ced(0x180)](new auth_manager_1[(_0x1a7ced(0x177))](_0x36315c),[],{'headers':{'Accept-Encoding':'gzip'}}),await this['initAutomationProcess'](),await this['disableAutomationProcess'](),await this[_0x1a7ced(0x17d)](),await this[_0x1a7ced(0x14a)](),this[_0x1a7ced(0x18b)][_0x1a7ced(0x153)](logger_enums_1[_0x1a7ced(0x194)][_0x1a7ced(0x18f)]);}catch(_0x4c6868){await this[_0x1a7ced(0x14a)]()[_0x1a7ced(0x17a)](_0x302237=>{const _0xd157b7=_0x1a7ced;job_detail_1[_0xd157b7(0x15f)][_0xd157b7(0x148)](_0x302237[_0xd157b7(0x17f)]);}),this['_loggerDetails'][_0x1a7ced(0x186)](_0x4c6868[_0x1a7ced(0x17f)]),this[_0x1a7ced(0x18b)]['setJobStatus'](logger_enums_1[_0x1a7ced(0x194)][_0x1a7ced(0x18c)]),this['_loggerJobState']['setJobError'](_0x4c6868[_0x1a7ced(0x17f)]),job_detail_1['systemLogger']['error'](_0x4c6868['message']);}finally{this['_loggerDetails'][_0x1a7ced(0x16d)](_0x1a7ced(0x156)),job_detail_1[_0x1a7ced(0x15f)]['log']('Finish\x20Masking\x20Process'),await this[_0x1a7ced(0x18b)][_0x1a7ced(0x14b)](),await this[_0x1a7ced(0x14e)][_0x1a7ced(0x14b)]();}}}exports[a73_0x51ea7e(0x163)]=MaskingJob,new MaskingJob()[a73_0x51ea7e(0x15d)]()[a73_0x51ea7e(0x175)](()=>process[a73_0x51ea7e(0x169)](0x0))['catch'](()=>process['exit'](0x1));