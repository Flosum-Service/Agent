const a73_0x9824f3=a73_0x4de5;(function(_0x3b21c8,_0x2a0965){const _0x1ef5c5=a73_0x4de5,_0x1d8321=_0x3b21c8();while(!![]){try{const _0x5b4873=parseInt(_0x1ef5c5(0x110))/0x1+parseInt(_0x1ef5c5(0x136))/0x2*(parseInt(_0x1ef5c5(0x127))/0x3)+parseInt(_0x1ef5c5(0x139))/0x4+parseInt(_0x1ef5c5(0x103))/0x5*(parseInt(_0x1ef5c5(0x11d))/0x6)+parseInt(_0x1ef5c5(0x104))/0x7+-parseInt(_0x1ef5c5(0x126))/0x8+-parseInt(_0x1ef5c5(0x10c))/0x9*(parseInt(_0x1ef5c5(0x101))/0xa);if(_0x5b4873===_0x2a0965)break;else _0x1d8321['push'](_0x1d8321['shift']());}catch(_0x58665c){_0x1d8321['push'](_0x1d8321['shift']());}}}(a73_0x491d,0x1eeaf));const a73_0x86880f=(function(){let _0x3ef43f=!![];return function(_0x7e853c,_0x3570d9){const _0x3340b1=_0x3ef43f?function(){const _0x3de1db=a73_0x4de5;if(_0x3570d9){const _0x6743cb=_0x3570d9[_0x3de1db(0x11a)](_0x7e853c,arguments);return _0x3570d9=null,_0x6743cb;}}:function(){};return _0x3ef43f=![],_0x3340b1;};}()),a73_0x2e4fa1=a73_0x86880f(this,function(){const _0x4e3f44=a73_0x4de5;return a73_0x2e4fa1['toString']()[_0x4e3f44(0x10a)](_0x4e3f44(0xf5))[_0x4e3f44(0x108)]()[_0x4e3f44(0x138)](a73_0x2e4fa1)[_0x4e3f44(0x10a)](_0x4e3f44(0xf5));});a73_0x2e4fa1();function a73_0x4de5(_0x1ed335,_0x415dec){const _0x369020=a73_0x491d();return a73_0x4de5=function(_0x2e4fa1,_0x86880f){_0x2e4fa1=_0x2e4fa1-0xf0;let _0x491d3d=_0x369020[_0x2e4fa1];return _0x491d3d;},a73_0x4de5(_0x1ed335,_0x415dec);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1a01dd){const _0x5ae4e6=a73_0x4de5;return _0x1a01dd&&_0x1a01dd[_0x5ae4e6(0x12c)]?_0x1a01dd:{'default':_0x1a01dd};};Object[a73_0x9824f3(0x12e)](exports,a73_0x9824f3(0x12c),{'value':!![]}),exports[a73_0x9824f3(0x107)]=void 0x0;function a73_0x491d(){const _0x2da91a=['_isEnableAutomationProcessError','fs/promises','../constants','172490FjFtUa','default','15AoRmPH','66227BDyjGu','join','setJobStatus','MaskingJob','toString','exit','search','enableAutomationProcess','207SIxRyn','exception','push','Start\x20Masking\x20Process','149234PPsolO','StepsCreator','_request','_loggerJobState','FAILED','ManagerAutomationProcess','jobStorePath','LoggerDetails','error','JobStatus','apply','catch','path','393126LlHdob','systemLogger','Finish\x20Masking\x20Process','getManagerAutomationProcessOptions','_loggerDetails','details','./classes/logger/logger-details','_managerAutomationProcess','setJobError','289672inJWkf','321rYVnUw','keys','masking','utf-8','Disable\x20automation\x20process','__esModule','from','defineProperty','AxiosInstanceUtils','execute','initAutomationProcess','disableAutomation','enable','./classes/step/steps-creator','_maskingManifest','2794qQobrZ','readFile','constructor','219352ZCDMBd','message','init','log','../../shared/managers/auth.manager','Enable\x20automation\x20process','disableAutomationProcess','@flosum/salesforce','(((.+)+)+)+$','AuthManager','disable','create','jobId','MANIFEST_FILENAME','_steps','saveSourceAutomationProcessesBackup','kill'];a73_0x491d=function(){return _0x2da91a;};return a73_0x491d();}const promises_1=require(a73_0x9824f3(0xff)),salesforce_1=require(a73_0x9824f3(0xf4)),steps_creator_1=require(a73_0x9824f3(0x134)),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require(a73_0x9824f3(0x123)),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require('../../../constants/job'),path_1=__importDefault(require(a73_0x9824f3(0x11c))),auth_manager_1=require(a73_0x9824f3(0xf1)),constants_1=require(a73_0x9824f3(0x100)),job_detail_1=require('./job-detail');class MaskingJob{constructor(){const _0x3272b0=a73_0x9824f3;this[_0x3272b0(0xfe)]=![];}async[a73_0x9824f3(0x131)](){const _0x5439d4=a73_0x9824f3,{objectRules:_0x10915c}=this[_0x5439d4(0x135)];this[_0x5439d4(0x124)]=new salesforce_1[(_0x5439d4(0x115))](this[_0x5439d4(0x120)](_0x10915c));}async[a73_0x9824f3(0x129)](){const _0x8af941=a73_0x9824f3;job_detail_1[_0x8af941(0x11e)]['log'](_0x8af941(0x10f)),this['_loggerDetails'][_0x8af941(0xf0)](_0x8af941(0x10f));const {objectRules:_0x61f4ac,libraries:_0x2f6b02}=this[_0x8af941(0x135)];this[_0x8af941(0xfb)]=await new steps_creator_1[(_0x8af941(0x111))]({'loggerDetails':this['_loggerDetails'],'loggerJobState':this[_0x8af941(0x113)],'libraries':_0x2f6b02,'objectRules':_0x61f4ac,'request':this[_0x8af941(0x112)]})[_0x8af941(0xf8)]();for(const _0x15ea2f of this[_0x8af941(0xfb)]){await _0x15ea2f['execute']();}}[a73_0x9824f3(0x120)](_0x174e76){const _0x22de76=a73_0x9824f3,_0x509dcb=[],_0x3202a9=[],_0x5f3042=[],_0x2bd7f1=[];for(const _0x34bccf in _0x174e76){const {isDisableProcessBuilder:_0x2721ac,isDisableTrigger:_0x4107a8,isDisableValidationRule:_0x2c9006,isDisableWorkflow:_0x5aba42}=_0x174e76[_0x34bccf][_0x22de76(0x132)];_0x2721ac&&_0x5f3042['push'](_0x34bccf),_0x4107a8&&_0x509dcb[_0x22de76(0x10e)](_0x34bccf),_0x2c9006&&_0x2bd7f1[_0x22de76(0x10e)](_0x34bccf),_0x5aba42&&_0x3202a9[_0x22de76(0x10e)](_0x34bccf);}return{'instance':this['_request'],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x509dcb,'workflowsObjects':_0x3202a9,'processBuilderObjects':_0x5f3042,'validationRulesObjects':_0x2bd7f1};}async['disableAutomationProcess'](){const _0xbad5ae=a73_0x9824f3;job_detail_1['systemLogger'][_0xbad5ae(0xf0)](_0xbad5ae(0x12b)),this['_loggerDetails'][_0xbad5ae(0xf0)](_0xbad5ae(0x12b)),await this[_0xbad5ae(0x124)][_0xbad5ae(0xf7)]();}async['enableAutomationProcess'](){const _0x27f437=a73_0x9824f3;!this[_0x27f437(0xfe)]&&(job_detail_1[_0x27f437(0x11e)]['log'](_0x27f437(0xf2)),this[_0x27f437(0x121)][_0x27f437(0xf0)](_0x27f437(0xf2)),await this[_0x27f437(0x124)][_0x27f437(0x133)]()[_0x27f437(0x11b)](_0x2cfa74=>{this['_isEnableAutomationProcessError']=!![];throw _0x2cfa74;}));}async['getManifest'](){const _0x72dfae=a73_0x9824f3,_0x28bc31=await(0x0,promises_1[_0x72dfae(0x137)])(path_1['default'][_0x72dfae(0x105)](job_detail_1[_0x72dfae(0x116)],job_1[_0x72dfae(0xfa)]),{'encoding':_0x72dfae(0x12a)});return await(0x0,promises_1['rm'])(path_1[_0x72dfae(0x102)][_0x72dfae(0x105)](job_detail_1[_0x72dfae(0x116)],job_1[_0x72dfae(0xfa)]),{'recursive':!![],'force':!![]}),JSON['parse'](_0x28bc31)[_0x72dfae(0x122)];}[a73_0x9824f3(0xfc)](_0x4b0744){const _0x200190=a73_0x9824f3;return(0x0,promises_1['writeFile'])(path_1[_0x200190(0x102)][_0x200190(0x105)](job_detail_1[_0x200190(0x116)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x200190(0x12d)](_0x4b0744,'base64'));}async['execute'](){const _0x5dd176=a73_0x9824f3;this[_0x5dd176(0x135)]=await this['getManifest']();const {objectRules:_0x2083d2,credentials:_0x39f189}=this[_0x5dd176(0x135)];this[_0x5dd176(0x121)]=await new logger_details_1[(_0x5dd176(0x117))](job_detail_1[_0x5dd176(0x116)],job_detail_1[_0x5dd176(0xf9)])[_0x5dd176(0x13b)](),this[_0x5dd176(0x113)]=await new logger_job_state_1['LoggerJobState'](job_detail_1[_0x5dd176(0x116)],job_detail_1[_0x5dd176(0xf9)])[_0x5dd176(0x13b)](Object[_0x5dd176(0x128)](_0x2083d2));try{this[_0x5dd176(0x113)][_0x5dd176(0x106)](logger_enums_1[_0x5dd176(0x119)]['IN_PROGRESS']),this[_0x5dd176(0x112)]=await salesforce_1[_0x5dd176(0x12f)][_0x5dd176(0xf8)](new auth_manager_1[(_0x5dd176(0xf6))](_0x39f189),[],{'headers':{'Accept-Encoding':'gzip'}}),await this[_0x5dd176(0x131)](),await this[_0x5dd176(0xf3)](),await this[_0x5dd176(0x129)](),await this[_0x5dd176(0x10b)](),this[_0x5dd176(0x113)][_0x5dd176(0x106)](logger_enums_1[_0x5dd176(0x119)]['COMPLETED']);}catch(_0x47b0da){await this[_0x5dd176(0x10b)]()[_0x5dd176(0x11b)](_0x3d3a4e=>{const _0x76b841=_0x5dd176;job_detail_1['systemLogger'][_0x76b841(0x118)](_0x3d3a4e['message']);}),this[_0x5dd176(0x121)][_0x5dd176(0x10d)](_0x47b0da['message']),this[_0x5dd176(0x113)][_0x5dd176(0x106)](logger_enums_1[_0x5dd176(0x119)][_0x5dd176(0x114)]),this['_loggerJobState'][_0x5dd176(0x125)](_0x47b0da[_0x5dd176(0x13a)]),job_detail_1[_0x5dd176(0x11e)]['error'](_0x47b0da[_0x5dd176(0x13a)]);}finally{this[_0x5dd176(0x121)][_0x5dd176(0xf0)](_0x5dd176(0x11f)),job_detail_1[_0x5dd176(0x11e)][_0x5dd176(0xf0)](_0x5dd176(0x11f)),await this[_0x5dd176(0x113)][_0x5dd176(0xfd)](),await this[_0x5dd176(0x121)][_0x5dd176(0xfd)]();}}}exports[a73_0x9824f3(0x107)]=MaskingJob,new MaskingJob()[a73_0x9824f3(0x130)]()['then'](()=>process[a73_0x9824f3(0x109)](0x0))[a73_0x9824f3(0x11b)](()=>process['exit'](0x1));