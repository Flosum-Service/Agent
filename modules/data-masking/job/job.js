const a73_0x4fe38e=a73_0x1c00;(function(_0x54805e,_0x569337){const _0x5e0ee9=a73_0x1c00,_0x27ddd4=_0x54805e();while(!![]){try{const _0x2387a9=-parseInt(_0x5e0ee9(0x102))/0x1+parseInt(_0x5e0ee9(0xe5))/0x2+parseInt(_0x5e0ee9(0xd7))/0x3+-parseInt(_0x5e0ee9(0xed))/0x4+parseInt(_0x5e0ee9(0x10b))/0x5+parseInt(_0x5e0ee9(0xcd))/0x6+-parseInt(_0x5e0ee9(0x10a))/0x7*(parseInt(_0x5e0ee9(0x106))/0x8);if(_0x2387a9===_0x569337)break;else _0x27ddd4['push'](_0x27ddd4['shift']());}catch(_0x51e72b){_0x27ddd4['push'](_0x27ddd4['shift']());}}}(a73_0x4c57,0x2c6ee));const a73_0x22c310=(function(){let _0x359e4f=!![];return function(_0x3cd5a0,_0xd0dfce){const _0x4b70fd=_0x359e4f?function(){const _0x4b518b=a73_0x1c00;if(_0xd0dfce){const _0x4524bd=_0xd0dfce[_0x4b518b(0xd8)](_0x3cd5a0,arguments);return _0xd0dfce=null,_0x4524bd;}}:function(){};return _0x359e4f=![],_0x4b70fd;};}()),a73_0x4eba0c=a73_0x22c310(this,function(){const _0x16e81f=a73_0x1c00;return a73_0x4eba0c[_0x16e81f(0xf0)]()[_0x16e81f(0x100)](_0x16e81f(0xf2))['toString']()[_0x16e81f(0x10c)](a73_0x4eba0c)['search'](_0x16e81f(0xf2));});function a73_0x4c57(){const _0x743794=['18664gBozKc','./job-detail','systemLogger','execute','546KhgUBy','693785hsZSQe','constructor','./classes/step/steps-creator','_isEnableAutomationProcessError','COMPLETED','./classes/logger/logger-job-state','@flosum/salesforce','message','keys','readFile','disableAutomation','parse','_maskingManifest','LoggerJobState','_steps','writeFile','create','988086XkWtmt','../../shared/managers/auth.manager','initAutomationProcess','LoggerDetails','_loggerDetails','MaskingJob','join','jobId','setJobStatus','getManifest','622452WJSoeO','apply','../constants','push','from','details','log','path','_request','utf-8','jobStorePath','then','AxiosInstanceUtils','JobStatus','614630vvYBoA','masking','_loggerJobState','StepsCreator','_managerAutomationProcess','MANIFEST_FILENAME','getManagerAutomationProcessOptions','exception','1254260urgbSW','Finish\x20Masking\x20Process','base64','toString','defineProperty','(((.+)+)+)+$','AuthManager','enable','default','ManagerAutomationProcess','../../../constants/job','./classes/logger/logger-details','kill','setJobError','error','fs/promises','Start\x20Masking\x20Process','enableAutomationProcess','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','search','gzip','140700PyVfAy','exit','catch','Disable\x20automation\x20process'];a73_0x4c57=function(){return _0x743794;};return a73_0x4c57();}a73_0x4eba0c();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x51376e){return _0x51376e&&_0x51376e['__esModule']?_0x51376e:{'default':_0x51376e};};Object[a73_0x4fe38e(0xf1)](exports,'__esModule',{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a73_0x4fe38e(0xfc)),salesforce_1=require(a73_0x4fe38e(0x111)),steps_creator_1=require(a73_0x4fe38e(0x10d)),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require(a73_0x4fe38e(0xf8)),logger_job_state_1=require(a73_0x4fe38e(0x110)),job_1=require(a73_0x4fe38e(0xf7)),path_1=__importDefault(require(a73_0x4fe38e(0xde))),auth_manager_1=require(a73_0x4fe38e(0xce)),constants_1=require(a73_0x4fe38e(0xd9)),job_detail_1=require(a73_0x4fe38e(0x107));function a73_0x1c00(_0x1d9cac,_0x5730c9){const _0xc697c8=a73_0x4c57();return a73_0x1c00=function(_0x4eba0c,_0x22c310){_0x4eba0c=_0x4eba0c-0xca;let _0x4c571b=_0xc697c8[_0x4eba0c];return _0x4c571b;},a73_0x1c00(_0x1d9cac,_0x5730c9);}class MaskingJob{constructor(){const _0x59693a=a73_0x4fe38e;this[_0x59693a(0x10e)]=![];}async[a73_0x4fe38e(0xcf)](){const _0x42a8be=a73_0x4fe38e,{objectRules:_0x5155ab}=this[_0x42a8be(0x117)];this[_0x42a8be(0xe9)]=new salesforce_1[(_0x42a8be(0xf6))](this[_0x42a8be(0xeb)](_0x5155ab));}async['masking'](){const _0x5e7761=a73_0x4fe38e;job_detail_1[_0x5e7761(0x108)][_0x5e7761(0xdd)]('Start\x20Masking\x20Process'),this[_0x5e7761(0xd1)][_0x5e7761(0xdd)](_0x5e7761(0xfd));const {objectRules:_0x3cbd82,libraries:_0x16cc32}=this[_0x5e7761(0x117)];this[_0x5e7761(0xca)]=await new steps_creator_1[(_0x5e7761(0xe8))]({'loggerDetails':this[_0x5e7761(0xd1)],'loggerJobState':this[_0x5e7761(0xe7)],'libraries':_0x16cc32,'objectRules':_0x3cbd82,'request':this[_0x5e7761(0xdf)]})[_0x5e7761(0xcc)]();for(const _0x35e704 of this[_0x5e7761(0xca)]){await _0x35e704[_0x5e7761(0x109)]();}}[a73_0x4fe38e(0xeb)](_0x37663b){const _0x69e178=a73_0x4fe38e,_0x11613a=[],_0x1b2990=[],_0x10ea31=[],_0x1aedcf=[];for(const _0x3bc0d6 in _0x37663b){const {isDisableProcessBuilder:_0x34b2ff,isDisableTrigger:_0x2aa28d,isDisableValidationRule:_0x3e78bb,isDisableWorkflow:_0x5d4f8b}=_0x37663b[_0x3bc0d6][_0x69e178(0x115)];_0x34b2ff&&_0x10ea31[_0x69e178(0xda)](_0x3bc0d6),_0x2aa28d&&_0x11613a[_0x69e178(0xda)](_0x3bc0d6),_0x3e78bb&&_0x1aedcf[_0x69e178(0xda)](_0x3bc0d6),_0x5d4f8b&&_0x1b2990[_0x69e178(0xda)](_0x3bc0d6);}return{'instance':this['_request'],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x11613a,'workflowsObjects':_0x1b2990,'processBuilderObjects':_0x10ea31,'validationRulesObjects':_0x1aedcf};}async['disableAutomationProcess'](){const _0x183795=a73_0x4fe38e;job_detail_1['systemLogger'][_0x183795(0xdd)](_0x183795(0x105)),this['_loggerDetails'][_0x183795(0xdd)](_0x183795(0x105)),await this[_0x183795(0xe9)]['disable']();}async['enableAutomationProcess'](){const _0x45de68=a73_0x4fe38e;!this[_0x45de68(0x10e)]&&(job_detail_1[_0x45de68(0x108)][_0x45de68(0xdd)]('Enable\x20automation\x20process'),this[_0x45de68(0xd1)]['log']('Enable\x20automation\x20process'),await this[_0x45de68(0xe9)][_0x45de68(0xf4)]()['catch'](_0x22325f=>{const _0x258d37=_0x45de68;this[_0x258d37(0x10e)]=!![];throw _0x22325f;}));}async['getManifest'](){const _0x282dd5=a73_0x4fe38e,_0x353b35=await(0x0,promises_1[_0x282dd5(0x114)])(path_1[_0x282dd5(0xf5)][_0x282dd5(0xd3)](job_detail_1[_0x282dd5(0xe1)],job_1['MANIFEST_FILENAME']),{'encoding':_0x282dd5(0xe0)});return await(0x0,promises_1['rm'])(path_1[_0x282dd5(0xf5)][_0x282dd5(0xd3)](job_detail_1['jobStorePath'],job_1[_0x282dd5(0xea)]),{'recursive':!![],'force':!![]}),JSON[_0x282dd5(0x116)](_0x353b35)[_0x282dd5(0xdc)];}['saveSourceAutomationProcessesBackup'](_0xffde62){const _0x4f0b96=a73_0x4fe38e;return(0x0,promises_1[_0x4f0b96(0xcb)])(path_1[_0x4f0b96(0xf5)][_0x4f0b96(0xd3)](job_detail_1[_0x4f0b96(0xe1)],constants_1[_0x4f0b96(0xff)]),Buffer[_0x4f0b96(0xdb)](_0xffde62,_0x4f0b96(0xef)));}async[a73_0x4fe38e(0x109)](){const _0x39941c=a73_0x4fe38e;this[_0x39941c(0x117)]=await this[_0x39941c(0xd6)]();const {objectRules:_0x3eb474,credentials:_0x4dba9b}=this[_0x39941c(0x117)];this[_0x39941c(0xd1)]=await new logger_details_1[(_0x39941c(0xd0))](job_detail_1[_0x39941c(0xe1)],job_detail_1[_0x39941c(0xd4)])['init'](),this[_0x39941c(0xe7)]=await new logger_job_state_1[(_0x39941c(0x118))](job_detail_1['jobStorePath'],job_detail_1[_0x39941c(0xd4)])['init'](Object[_0x39941c(0x113)](_0x3eb474));try{this[_0x39941c(0xe7)]['setJobStatus'](logger_enums_1[_0x39941c(0xe4)]['IN_PROGRESS']),this[_0x39941c(0xdf)]=await salesforce_1[_0x39941c(0xe3)][_0x39941c(0xcc)](new auth_manager_1[(_0x39941c(0xf3))](_0x4dba9b),[],{'headers':{'Accept-Encoding':_0x39941c(0x101)}}),await this[_0x39941c(0xcf)](),await this['disableAutomationProcess'](),await this[_0x39941c(0xe6)](),await this['enableAutomationProcess'](),this[_0x39941c(0xe7)]['setJobStatus'](logger_enums_1['JobStatus'][_0x39941c(0x10f)]);}catch(_0x1c5f60){await this[_0x39941c(0xfe)]()[_0x39941c(0x104)](_0x32af9b=>{const _0x1be1e2=_0x39941c;job_detail_1[_0x1be1e2(0x108)][_0x1be1e2(0xfb)](_0x32af9b[_0x1be1e2(0x112)]);}),this[_0x39941c(0xd1)][_0x39941c(0xec)](_0x1c5f60[_0x39941c(0x112)]),this[_0x39941c(0xe7)][_0x39941c(0xd5)](logger_enums_1[_0x39941c(0xe4)]['FAILED']),this[_0x39941c(0xe7)][_0x39941c(0xfa)](_0x1c5f60[_0x39941c(0x112)]),job_detail_1['systemLogger'][_0x39941c(0xfb)](_0x1c5f60[_0x39941c(0x112)]);}finally{this[_0x39941c(0xd1)]['log'](_0x39941c(0xee)),job_detail_1[_0x39941c(0x108)]['log'](_0x39941c(0xee)),await this[_0x39941c(0xe7)][_0x39941c(0xf9)](),await this[_0x39941c(0xd1)][_0x39941c(0xf9)]();}}}exports[a73_0x4fe38e(0xd2)]=MaskingJob,new MaskingJob()[a73_0x4fe38e(0x109)]()[a73_0x4fe38e(0xe2)](()=>process[a73_0x4fe38e(0x103)](0x0))[a73_0x4fe38e(0x104)](()=>process[a73_0x4fe38e(0x103)](0x1));