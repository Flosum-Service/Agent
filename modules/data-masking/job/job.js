const a90_0xd08183=a90_0x2177;(function(_0x230257,_0x1d8638){const _0x4cd4a4=a90_0x2177,_0x4800ec=_0x230257();while(!![]){try{const _0x5d5c7b=parseInt(_0x4cd4a4(0x205))/0x1+-parseInt(_0x4cd4a4(0x215))/0x2+-parseInt(_0x4cd4a4(0x210))/0x3+-parseInt(_0x4cd4a4(0x22d))/0x4+-parseInt(_0x4cd4a4(0x1f3))/0x5+parseInt(_0x4cd4a4(0x1ef))/0x6+-parseInt(_0x4cd4a4(0x1fa))/0x7*(-parseInt(_0x4cd4a4(0x22f))/0x8);if(_0x5d5c7b===_0x1d8638)break;else _0x4800ec['push'](_0x4800ec['shift']());}catch(_0x53bbc7){_0x4800ec['push'](_0x4800ec['shift']());}}}(a90_0x5cba,0x2a652));const a90_0x159896=(function(){let _0x4446a1=!![];return function(_0x9f8a98,_0x385d41){const _0x28f57c=_0x4446a1?function(){if(_0x385d41){const _0x14f730=_0x385d41['apply'](_0x9f8a98,arguments);return _0x385d41=null,_0x14f730;}}:function(){};return _0x4446a1=![],_0x28f57c;};}()),a90_0x3c8880=a90_0x159896(this,function(){const _0x2172bd=a90_0x2177;return a90_0x3c8880[_0x2172bd(0x216)]()[_0x2172bd(0x220)](_0x2172bd(0x228))[_0x2172bd(0x216)]()[_0x2172bd(0x1fb)](a90_0x3c8880)[_0x2172bd(0x220)]('(((.+)+)+)+$');});a90_0x3c8880();'use strict';function a90_0x5cba(){const _0xe0abf7=['../constants','Disable\x20automation\x20process','./classes/logger/logger-details','_isEnableAutomationProcessError','AuthManager','./enums/logger.enums','utf-8','(((.+)+)+)+$','jobStorePath','saveSourceAutomationProcessesBackup','keys','JobStatus','1050988aChdEk','masking','357904KNibaZ','getManagerAutomationProcessOptions','__esModule','join','_request','@flosum/salesforce','ManagerAutomationProcess','execute','gzip','1226112PQOPGw','create','error','catch','1226375dInrSw','Finish\x20Masking\x20Process','FAILED','disableAutomation','MaskingJob','disable','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','91utuuXy','constructor','systemLogger','Enable\x20automation\x20process','MANIFEST_FILENAME','./job-detail','enable','then','_steps','Start\x20Masking\x20Process','default','102498BvqEbs','StepsCreator','_managerAutomationProcess','initAutomationProcess','details','setJobError','LoggerDetails','_loggerJobState','disableAutomationProcess','exception','push','354579oDooDV','writeFile','init','exit','AxiosInstanceUtils','177158YJZjyE','toString','path','log','./classes/logger/logger-job-state','message','_loggerDetails','_maskingManifest','setJobStatus','getManifest','kill','search'];a90_0x5cba=function(){return _0xe0abf7;};return a90_0x5cba();}var __importDefault=this&&this['__importDefault']||function(_0x4cb0dd){const _0xf41a83=a90_0x2177;return _0x4cb0dd&&_0x4cb0dd[_0xf41a83(0x231)]?_0x4cb0dd:{'default':_0x4cb0dd};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a90_0xd08183(0x1f7)]=void 0x0;const promises_1=require('fs/promises'),salesforce_1=require(a90_0xd08183(0x1eb)),steps_creator_1=require('./classes/step/steps-creator'),logger_enums_1=require(a90_0xd08183(0x226)),logger_details_1=require(a90_0xd08183(0x223)),logger_job_state_1=require(a90_0xd08183(0x219)),job_1=require('../../../constants/job'),path_1=__importDefault(require(a90_0xd08183(0x217))),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a90_0xd08183(0x221)),job_detail_1=require(a90_0xd08183(0x1ff));class MaskingJob{constructor(){const _0x32e430=a90_0xd08183;this[_0x32e430(0x224)]=![];}async[a90_0xd08183(0x208)](){const _0x1dda98=a90_0xd08183,{objectRules:_0x132c83}=this[_0x1dda98(0x21c)];this[_0x1dda98(0x207)]=new salesforce_1[(_0x1dda98(0x1ec))](this[_0x1dda98(0x230)](_0x132c83));}async[a90_0xd08183(0x22e)](){const _0x216d4c=a90_0xd08183;job_detail_1[_0x216d4c(0x1fc)][_0x216d4c(0x218)](_0x216d4c(0x203)),this[_0x216d4c(0x21b)][_0x216d4c(0x218)](_0x216d4c(0x203));const {objectRules:_0x4bae59,libraries:_0x54f0c4}=this['_maskingManifest'];this[_0x216d4c(0x202)]=await new steps_creator_1[(_0x216d4c(0x206))]({'loggerDetails':this[_0x216d4c(0x21b)],'loggerJobState':this[_0x216d4c(0x20c)],'libraries':_0x54f0c4,'objectRules':_0x4bae59,'request':this[_0x216d4c(0x1ea)]})[_0x216d4c(0x1f0)]();for(const _0x4ae330 of this['_steps']){await _0x4ae330[_0x216d4c(0x1ed)]();}}['getManagerAutomationProcessOptions'](_0x307de5){const _0x770f90=a90_0xd08183,_0x25128b=[],_0x5e924a=[],_0x12c38d=[],_0x211d4d=[];for(const _0x3d43c6 in _0x307de5){const {isDisableProcessBuilder:_0x32008b,isDisableTrigger:_0x13d473,isDisableValidationRule:_0x164383,isDisableWorkflow:_0x4bde88}=_0x307de5[_0x3d43c6][_0x770f90(0x1f6)];_0x32008b&&_0x12c38d[_0x770f90(0x20f)](_0x3d43c6),_0x13d473&&_0x25128b['push'](_0x3d43c6),_0x164383&&_0x211d4d['push'](_0x3d43c6),_0x4bde88&&_0x5e924a[_0x770f90(0x20f)](_0x3d43c6);}return{'instance':this['_request'],'saveSourceMetadataBackup':this[_0x770f90(0x22a)],'triggersObjects':_0x25128b,'workflowsObjects':_0x5e924a,'processBuilderObjects':_0x12c38d,'validationRulesObjects':_0x211d4d};}async['disableAutomationProcess'](){const _0x6b98d5=a90_0xd08183;job_detail_1['systemLogger']['log']('Disable\x20automation\x20process'),this['_loggerDetails'][_0x6b98d5(0x218)](_0x6b98d5(0x222)),await this[_0x6b98d5(0x207)][_0x6b98d5(0x1f8)]();}async['enableAutomationProcess'](){const _0x159571=a90_0xd08183;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x159571(0x1fc)][_0x159571(0x218)](_0x159571(0x1fd)),this[_0x159571(0x21b)][_0x159571(0x218)](_0x159571(0x1fd)),await this['_managerAutomationProcess'][_0x159571(0x200)]()[_0x159571(0x1f2)](_0x438e12=>{const _0x277196=_0x159571;this[_0x277196(0x224)]=!![];throw _0x438e12;}));}async[a90_0xd08183(0x21e)](){const _0x23e4e8=a90_0xd08183,_0x27fe85=await(0x0,promises_1['readFile'])(path_1[_0x23e4e8(0x204)]['join'](job_detail_1[_0x23e4e8(0x229)],job_1[_0x23e4e8(0x1fe)]),{'encoding':_0x23e4e8(0x227)});return await(0x0,promises_1['rm'])(path_1[_0x23e4e8(0x204)][_0x23e4e8(0x232)](job_detail_1['jobStorePath'],job_1[_0x23e4e8(0x1fe)]),{'recursive':!![],'force':!![]}),JSON['parse'](_0x27fe85)[_0x23e4e8(0x209)];}[a90_0xd08183(0x22a)](_0x5e89fe){const _0x1c6ab5=a90_0xd08183;return(0x0,promises_1[_0x1c6ab5(0x211)])(path_1[_0x1c6ab5(0x204)][_0x1c6ab5(0x232)](job_detail_1[_0x1c6ab5(0x229)],constants_1[_0x1c6ab5(0x1f9)]),Buffer['from'](_0x5e89fe,'base64'));}async[a90_0xd08183(0x1ed)](){const _0x3457bf=a90_0xd08183;this[_0x3457bf(0x21c)]=await this[_0x3457bf(0x21e)]();const {objectRules:_0x1d3ae1,credentials:_0x8185b}=this[_0x3457bf(0x21c)];this[_0x3457bf(0x21b)]=await new logger_details_1[(_0x3457bf(0x20b))](job_detail_1['jobStorePath'],job_detail_1['jobId'])[_0x3457bf(0x212)](),this[_0x3457bf(0x20c)]=await new logger_job_state_1['LoggerJobState'](job_detail_1['jobStorePath'],job_detail_1['jobId'])[_0x3457bf(0x212)](Object[_0x3457bf(0x22b)](_0x1d3ae1));try{this[_0x3457bf(0x20c)]['setJobStatus'](logger_enums_1[_0x3457bf(0x22c)]['IN_PROGRESS']),this['_request']=await salesforce_1[_0x3457bf(0x214)]['create'](new auth_manager_1[(_0x3457bf(0x225))](_0x8185b),[],{'headers':{'Accept-Encoding':_0x3457bf(0x1ee)}}),await this[_0x3457bf(0x208)](),await this[_0x3457bf(0x20d)](),await this[_0x3457bf(0x22e)](),await this['enableAutomationProcess'](),this[_0x3457bf(0x20c)][_0x3457bf(0x21d)](logger_enums_1['JobStatus']['COMPLETED']);}catch(_0x1de36b){await this['enableAutomationProcess']()[_0x3457bf(0x1f2)](_0x5e7c87=>{const _0x1dde9d=_0x3457bf;job_detail_1['systemLogger']['error'](_0x5e7c87[_0x1dde9d(0x21a)]);}),this[_0x3457bf(0x21b)][_0x3457bf(0x20e)](_0x1de36b['message']),this[_0x3457bf(0x20c)][_0x3457bf(0x21d)](logger_enums_1[_0x3457bf(0x22c)][_0x3457bf(0x1f5)]),this['_loggerJobState'][_0x3457bf(0x20a)](_0x1de36b[_0x3457bf(0x21a)]),job_detail_1[_0x3457bf(0x1fc)][_0x3457bf(0x1f1)](_0x1de36b['message']);}finally{this[_0x3457bf(0x21b)][_0x3457bf(0x218)](_0x3457bf(0x1f4)),job_detail_1[_0x3457bf(0x1fc)][_0x3457bf(0x218)](_0x3457bf(0x1f4)),await this['_loggerJobState'][_0x3457bf(0x21f)](),await this[_0x3457bf(0x21b)]['kill']();}}}function a90_0x2177(_0x162a0c,_0x1ad573){const _0x51b8e5=a90_0x5cba();return a90_0x2177=function(_0x3c8880,_0x159896){_0x3c8880=_0x3c8880-0x1ea;let _0x5cba58=_0x51b8e5[_0x3c8880];return _0x5cba58;},a90_0x2177(_0x162a0c,_0x1ad573);}exports[a90_0xd08183(0x1f7)]=MaskingJob,new MaskingJob()[a90_0xd08183(0x1ed)]()[a90_0xd08183(0x201)](()=>process[a90_0xd08183(0x213)](0x0))[a90_0xd08183(0x1f2)](()=>process[a90_0xd08183(0x213)](0x1));