const a73_0x1f395d=a73_0x494c;function a73_0xb386(){const _0x3a076a=['174TPnLco','./job-detail','apply','_request','_loggerJobState','./classes/logger/logger-details','init','AuthManager','setJobStatus','1407224NdWEFH','FAILED','98652zIJeDn','3987MUeeNT','execute','push','gzip','jobStorePath','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','22yciuoy','139740iYwtTO','enable','10670ATIiXk','COMPLETED','_isEnableAutomationProcessError','JobStatus','toString','182853ffnLZX','@flosum/salesforce','message','./classes/step/steps-creator','LoggerDetails','getManifest','parse','join','utf-8','_managerAutomationProcess','disable','../../shared/managers/auth.manager','6434xlrUiQ','error','exit','Start\x20Masking\x20Process','disableAutomationProcess','MaskingJob','LoggerJobState','IN_PROGRESS','(((.+)+)+)+$','disableAutomation','Disable\x20automation\x20process','MANIFEST_FILENAME','exception','ManagerAutomationProcess','enableAutomationProcess','__esModule','./classes/logger/logger-job-state','AxiosInstanceUtils','path','default','_loggerDetails','StepsCreator','kill','catch','10549wNrJeB','getManagerAutomationProcessOptions','./enums/logger.enums','Finish\x20Masking\x20Process','systemLogger','readFile','../../../constants/job','log','jobId','fs/promises','masking','create','saveSourceAutomationProcessesBackup','_maskingManifest'];a73_0xb386=function(){return _0x3a076a;};return a73_0xb386();}(function(_0x352090,_0x4a1954){const _0x5e9684=a73_0x494c,_0x51fcc9=_0x352090();while(!![]){try{const _0x458507=parseInt(_0x5e9684(0x176))/0x1*(-parseInt(_0x5e9684(0x13e))/0x2)+-parseInt(_0x5e9684(0x132))/0x3+parseInt(_0x5e9684(0x16f))/0x4+-parseInt(_0x5e9684(0x177))/0x5+-parseInt(_0x5e9684(0x164))/0x6*(parseInt(_0x5e9684(0x156))/0x7)+-parseInt(_0x5e9684(0x16d))/0x8+-parseInt(_0x5e9684(0x170))/0x9*(-parseInt(_0x5e9684(0x179))/0xa);if(_0x458507===_0x4a1954)break;else _0x51fcc9['push'](_0x51fcc9['shift']());}catch(_0x1d14a4){_0x51fcc9['push'](_0x51fcc9['shift']());}}}(a73_0xb386,0x1cd31));const a73_0x3d8629=(function(){let _0x52d17a=!![];return function(_0xad85dc,_0x422d1b){const _0x191282=_0x52d17a?function(){const _0x5449c3=a73_0x494c;if(_0x422d1b){const _0x4344fa=_0x422d1b[_0x5449c3(0x166)](_0xad85dc,arguments);return _0x422d1b=null,_0x4344fa;}}:function(){};return _0x52d17a=![],_0x191282;};}()),a73_0x4d1a7c=a73_0x3d8629(this,function(){const _0x563e1e=a73_0x494c;return a73_0x4d1a7c[_0x563e1e(0x17d)]()['search']('(((.+)+)+)+$')[_0x563e1e(0x17d)]()['constructor'](a73_0x4d1a7c)['search'](_0x563e1e(0x146));});a73_0x4d1a7c();function a73_0x494c(_0x887f73,_0x2cc683){const _0x520906=a73_0xb386();return a73_0x494c=function(_0x4d1a7c,_0x3d8629){_0x4d1a7c=_0x4d1a7c-0x132;let _0xb38637=_0x520906[_0x4d1a7c];return _0xb38637;},a73_0x494c(_0x887f73,_0x2cc683);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x54e6ba){const _0x238a3f=a73_0x494c;return _0x54e6ba&&_0x54e6ba[_0x238a3f(0x14d)]?_0x54e6ba:{'default':_0x54e6ba};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a73_0x1f395d(0x143)]=void 0x0;const promises_1=require(a73_0x1f395d(0x15f)),salesforce_1=require(a73_0x1f395d(0x133)),steps_creator_1=require(a73_0x1f395d(0x135)),logger_enums_1=require(a73_0x1f395d(0x158)),logger_details_1=require(a73_0x1f395d(0x169)),logger_job_state_1=require(a73_0x1f395d(0x14e)),job_1=require(a73_0x1f395d(0x15c)),path_1=__importDefault(require(a73_0x1f395d(0x150))),auth_manager_1=require(a73_0x1f395d(0x13d)),constants_1=require('../constants'),job_detail_1=require(a73_0x1f395d(0x165));class MaskingJob{constructor(){const _0x2d47cd=a73_0x1f395d;this[_0x2d47cd(0x17b)]=![];}async['initAutomationProcess'](){const _0x83cd6f=a73_0x1f395d,{objectRules:_0x11ae14}=this[_0x83cd6f(0x163)];this[_0x83cd6f(0x13b)]=new salesforce_1[(_0x83cd6f(0x14b))](this[_0x83cd6f(0x157)](_0x11ae14));}async[a73_0x1f395d(0x160)](){const _0x95495a=a73_0x1f395d;job_detail_1[_0x95495a(0x15a)][_0x95495a(0x15d)](_0x95495a(0x141)),this[_0x95495a(0x152)][_0x95495a(0x15d)](_0x95495a(0x141));const {objectRules:_0x45c652,libraries:_0x38f2c8}=this[_0x95495a(0x163)];this['_steps']=await new steps_creator_1[(_0x95495a(0x153))]({'loggerDetails':this[_0x95495a(0x152)],'loggerJobState':this[_0x95495a(0x168)],'libraries':_0x38f2c8,'objectRules':_0x45c652,'request':this['_request']})[_0x95495a(0x161)]();for(const _0x2bba0e of this['_steps']){await _0x2bba0e[_0x95495a(0x171)]();}}[a73_0x1f395d(0x157)](_0x4716c0){const _0x244a1a=a73_0x1f395d,_0x27a23b=[],_0x20990a=[],_0x1a5135=[],_0x2d5535=[];for(const _0x2c216a in _0x4716c0){const {isDisableProcessBuilder:_0x5b672e,isDisableTrigger:_0x5d8f2b,isDisableValidationRule:_0x5a7434,isDisableWorkflow:_0x4e9967}=_0x4716c0[_0x2c216a][_0x244a1a(0x147)];_0x5b672e&&_0x1a5135[_0x244a1a(0x172)](_0x2c216a),_0x5d8f2b&&_0x27a23b['push'](_0x2c216a),_0x5a7434&&_0x2d5535[_0x244a1a(0x172)](_0x2c216a),_0x4e9967&&_0x20990a[_0x244a1a(0x172)](_0x2c216a);}return{'instance':this[_0x244a1a(0x167)],'saveSourceMetadataBackup':this[_0x244a1a(0x162)],'triggersObjects':_0x27a23b,'workflowsObjects':_0x20990a,'processBuilderObjects':_0x1a5135,'validationRulesObjects':_0x2d5535};}async[a73_0x1f395d(0x142)](){const _0x298ba6=a73_0x1f395d;job_detail_1[_0x298ba6(0x15a)]['log'](_0x298ba6(0x148)),this[_0x298ba6(0x152)][_0x298ba6(0x15d)](_0x298ba6(0x148)),await this['_managerAutomationProcess'][_0x298ba6(0x13c)]();}async[a73_0x1f395d(0x14c)](){const _0x32e1b5=a73_0x1f395d;!this[_0x32e1b5(0x17b)]&&(job_detail_1[_0x32e1b5(0x15a)][_0x32e1b5(0x15d)]('Enable\x20automation\x20process'),this[_0x32e1b5(0x152)]['log']('Enable\x20automation\x20process'),await this[_0x32e1b5(0x13b)][_0x32e1b5(0x178)]()[_0x32e1b5(0x155)](_0x2f1fec=>{const _0x5ef143=_0x32e1b5;this[_0x5ef143(0x17b)]=!![];throw _0x2f1fec;}));}async[a73_0x1f395d(0x137)](){const _0x398c80=a73_0x1f395d,_0xf4784=await(0x0,promises_1[_0x398c80(0x15b)])(path_1[_0x398c80(0x151)]['join'](job_detail_1[_0x398c80(0x174)],job_1[_0x398c80(0x149)]),{'encoding':_0x398c80(0x13a)});return await(0x0,promises_1['rm'])(path_1['default'][_0x398c80(0x139)](job_detail_1[_0x398c80(0x174)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON[_0x398c80(0x138)](_0xf4784)['details'];}[a73_0x1f395d(0x162)](_0x4675b7){const _0x14afcd=a73_0x1f395d;return(0x0,promises_1['writeFile'])(path_1[_0x14afcd(0x151)][_0x14afcd(0x139)](job_detail_1[_0x14afcd(0x174)],constants_1[_0x14afcd(0x175)]),Buffer['from'](_0x4675b7,'base64'));}async['execute'](){const _0x581da6=a73_0x1f395d;this[_0x581da6(0x163)]=await this[_0x581da6(0x137)]();const {objectRules:_0x3e4f2d,credentials:_0x2d0316}=this[_0x581da6(0x163)];this['_loggerDetails']=await new logger_details_1[(_0x581da6(0x136))](job_detail_1[_0x581da6(0x174)],job_detail_1['jobId'])[_0x581da6(0x16a)](),this[_0x581da6(0x168)]=await new logger_job_state_1[(_0x581da6(0x144))](job_detail_1[_0x581da6(0x174)],job_detail_1[_0x581da6(0x15e)])['init'](Object['keys'](_0x3e4f2d));try{this[_0x581da6(0x168)][_0x581da6(0x16c)](logger_enums_1['JobStatus'][_0x581da6(0x145)]),this['_request']=await salesforce_1[_0x581da6(0x14f)][_0x581da6(0x161)](new auth_manager_1[(_0x581da6(0x16b))](_0x2d0316),[],{'headers':{'Accept-Encoding':_0x581da6(0x173)}}),await this['initAutomationProcess'](),await this[_0x581da6(0x142)](),await this['masking'](),await this[_0x581da6(0x14c)](),this[_0x581da6(0x168)][_0x581da6(0x16c)](logger_enums_1['JobStatus'][_0x581da6(0x17a)]);}catch(_0x23e1fb){await this[_0x581da6(0x14c)]()[_0x581da6(0x155)](_0x432efd=>{const _0x43e21e=_0x581da6;job_detail_1[_0x43e21e(0x15a)]['error'](_0x432efd[_0x43e21e(0x134)]);}),this[_0x581da6(0x152)][_0x581da6(0x14a)](_0x23e1fb[_0x581da6(0x134)]),this['_loggerJobState'][_0x581da6(0x16c)](logger_enums_1[_0x581da6(0x17c)][_0x581da6(0x16e)]),this['_loggerJobState']['setJobError'](_0x23e1fb[_0x581da6(0x134)]),job_detail_1[_0x581da6(0x15a)][_0x581da6(0x13f)](_0x23e1fb[_0x581da6(0x134)]);}finally{this[_0x581da6(0x152)][_0x581da6(0x15d)]('Finish\x20Masking\x20Process'),job_detail_1['systemLogger'][_0x581da6(0x15d)](_0x581da6(0x159)),await this[_0x581da6(0x168)]['kill'](),await this[_0x581da6(0x152)][_0x581da6(0x154)]();}}}exports[a73_0x1f395d(0x143)]=MaskingJob,new MaskingJob()[a73_0x1f395d(0x171)]()['then'](()=>process[a73_0x1f395d(0x140)](0x0))[a73_0x1f395d(0x155)](()=>process[a73_0x1f395d(0x140)](0x1));