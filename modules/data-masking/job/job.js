const a73_0xb2e30=a73_0x5790;(function(_0x1105f0,_0x1ebf52){const _0x1d4bc2=a73_0x5790,_0x3643b3=_0x1105f0();while(!![]){try{const _0x1835e7=parseInt(_0x1d4bc2(0x83))/0x1+-parseInt(_0x1d4bc2(0x74))/0x2+parseInt(_0x1d4bc2(0x91))/0x3+parseInt(_0x1d4bc2(0x6d))/0x4*(parseInt(_0x1d4bc2(0x84))/0x5)+parseInt(_0x1d4bc2(0x8a))/0x6+-parseInt(_0x1d4bc2(0x69))/0x7+-parseInt(_0x1d4bc2(0x8f))/0x8;if(_0x1835e7===_0x1ebf52)break;else _0x3643b3['push'](_0x3643b3['shift']());}catch(_0x58ab6a){_0x3643b3['push'](_0x3643b3['shift']());}}}(a73_0x4955,0x4a30f));const a73_0x15fe6e=(function(){let _0x1b59cc=!![];return function(_0x441034,_0x527e94){const _0x53ca15=_0x1b59cc?function(){const _0x2a28c9=a73_0x5790;if(_0x527e94){const _0x32a91a=_0x527e94[_0x2a28c9(0x66)](_0x441034,arguments);return _0x527e94=null,_0x32a91a;}}:function(){};return _0x1b59cc=![],_0x53ca15;};}()),a73_0x3faae5=a73_0x15fe6e(this,function(){const _0x4b4991=a73_0x5790;return a73_0x3faae5[_0x4b4991(0x8c)]()[_0x4b4991(0x95)]('(((.+)+)+)+$')['toString']()['constructor'](a73_0x3faae5)[_0x4b4991(0x95)](_0x4b4991(0x80));});a73_0x3faae5();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x33884e){return _0x33884e&&_0x33884e['__esModule']?_0x33884e:{'default':_0x33884e};};function a73_0x5790(_0x35a348,_0x171303){const _0x47eb29=a73_0x4955();return a73_0x5790=function(_0x3faae5,_0x15fe6e){_0x3faae5=_0x3faae5-0x64;let _0x4955a7=_0x47eb29[_0x3faae5];return _0x4955a7;},a73_0x5790(_0x35a348,_0x171303);}Object['defineProperty'](exports,a73_0xb2e30(0x92),{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a73_0xb2e30(0x85)),salesforce_1=require(a73_0xb2e30(0x8b)),steps_creator_1=require(a73_0xb2e30(0x87)),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require(a73_0xb2e30(0x7f)),logger_job_state_1=require(a73_0xb2e30(0x88)),job_1=require('../../../constants/job'),path_1=__importDefault(require(a73_0xb2e30(0x9e))),auth_manager_1=require(a73_0xb2e30(0x7c)),constants_1=require(a73_0xb2e30(0xa2)),job_detail_1=require(a73_0xb2e30(0x6b));class MaskingJob{constructor(){const _0x3558fb=a73_0xb2e30;this[_0x3558fb(0xb1)]=![];}async[a73_0xb2e30(0x76)](){const _0x1d4242=a73_0xb2e30,{objectRules:_0x51953f}=this[_0x1d4242(0xab)];this[_0x1d4242(0xac)]=new salesforce_1[(_0x1d4242(0x6a))](this[_0x1d4242(0x9d)](_0x51953f));}async[a73_0xb2e30(0x72)](){const _0x35029b=a73_0xb2e30;job_detail_1[_0x35029b(0xaf)][_0x35029b(0x65)](_0x35029b(0xad)),this[_0x35029b(0x6c)][_0x35029b(0x65)](_0x35029b(0xad));const {objectRules:_0x479ee2,libraries:_0x2dd7a6}=this['_maskingManifest'];this[_0x35029b(0xae)]=await new steps_creator_1[(_0x35029b(0x96))]({'loggerDetails':this[_0x35029b(0x6c)],'loggerJobState':this[_0x35029b(0xa0)],'libraries':_0x2dd7a6,'objectRules':_0x479ee2,'request':this[_0x35029b(0xa8)]})['create']();for(const _0x557e16 of this[_0x35029b(0xae)]){await _0x557e16['execute']();}}[a73_0xb2e30(0x9d)](_0x4154ad){const _0xa82dcc=a73_0xb2e30,_0x2ba6a4=[],_0x1f52ce=[],_0x311fd4=[],_0x427ed1=[];for(const _0x572299 in _0x4154ad){const {isDisableProcessBuilder:_0x344a5e,isDisableTrigger:_0x13b973,isDisableValidationRule:_0x2b87e7,isDisableWorkflow:_0x568878}=_0x4154ad[_0x572299][_0xa82dcc(0x82)];_0x344a5e&&_0x311fd4[_0xa82dcc(0xb2)](_0x572299),_0x13b973&&_0x2ba6a4['push'](_0x572299),_0x2b87e7&&_0x427ed1[_0xa82dcc(0xb2)](_0x572299),_0x568878&&_0x1f52ce['push'](_0x572299);}return{'instance':this[_0xa82dcc(0xa8)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x2ba6a4,'workflowsObjects':_0x1f52ce,'processBuilderObjects':_0x311fd4,'validationRulesObjects':_0x427ed1};}async[a73_0xb2e30(0x86)](){const _0x6c644c=a73_0xb2e30;job_detail_1[_0x6c644c(0xaf)]['log'](_0x6c644c(0x81)),this['_loggerDetails'][_0x6c644c(0x65)](_0x6c644c(0x81)),await this[_0x6c644c(0xac)][_0x6c644c(0x9f)]();}async[a73_0xb2e30(0x90)](){const _0x5cc7b5=a73_0xb2e30;!this[_0x5cc7b5(0xb1)]&&(job_detail_1[_0x5cc7b5(0xaf)][_0x5cc7b5(0x65)](_0x5cc7b5(0xa6)),this[_0x5cc7b5(0x6c)][_0x5cc7b5(0x65)]('Enable\x20automation\x20process'),await this['_managerAutomationProcess'][_0x5cc7b5(0x78)]()[_0x5cc7b5(0x70)](_0x43ee47=>{this['_isEnableAutomationProcessError']=!![];throw _0x43ee47;}));}async[a73_0xb2e30(0x79)](){const _0x5968c1=a73_0xb2e30,_0x388e85=await(0x0,promises_1[_0x5968c1(0xa3)])(path_1[_0x5968c1(0x8d)]['join'](job_detail_1[_0x5968c1(0x98)],job_1['MANIFEST_FILENAME']),{'encoding':_0x5968c1(0xa4)});return await(0x0,promises_1['rm'])(path_1[_0x5968c1(0x8d)][_0x5968c1(0x9c)](job_detail_1[_0x5968c1(0x98)],job_1[_0x5968c1(0x68)]),{'recursive':!![],'force':!![]}),JSON[_0x5968c1(0x97)](_0x388e85)[_0x5968c1(0xaa)];}[a73_0xb2e30(0x99)](_0x204b8d){const _0x4bc83d=a73_0xb2e30;return(0x0,promises_1[_0x4bc83d(0x89)])(path_1[_0x4bc83d(0x8d)][_0x4bc83d(0x9c)](job_detail_1['jobStorePath'],constants_1[_0x4bc83d(0xa9)]),Buffer[_0x4bc83d(0x9a)](_0x204b8d,_0x4bc83d(0x64)));}async[a73_0xb2e30(0x7a)](){const _0x16b3cf=a73_0xb2e30;this[_0x16b3cf(0xab)]=await this[_0x16b3cf(0x79)]();const {objectRules:_0x3d65e7,credentials:_0x27224d}=this[_0x16b3cf(0xab)];this[_0x16b3cf(0x6c)]=await new logger_details_1[(_0x16b3cf(0xb0))](job_detail_1['jobStorePath'],job_detail_1['jobId'])['init'](),this['_loggerJobState']=await new logger_job_state_1[(_0x16b3cf(0x8e))](job_detail_1[_0x16b3cf(0x98)],job_detail_1[_0x16b3cf(0x6e)])[_0x16b3cf(0xa7)](Object['keys'](_0x3d65e7));try{this['_loggerJobState'][_0x16b3cf(0x93)](logger_enums_1['JobStatus'][_0x16b3cf(0x6f)]),this['_request']=await salesforce_1['AxiosInstanceUtils']['create'](new auth_manager_1[(_0x16b3cf(0x67))](_0x27224d),[],{'headers':{'Accept-Encoding':'gzip'}}),await this['initAutomationProcess'](),await this[_0x16b3cf(0x86)](),await this[_0x16b3cf(0x72)](),await this['enableAutomationProcess'](),this['_loggerJobState'][_0x16b3cf(0x93)](logger_enums_1['JobStatus'][_0x16b3cf(0x77)]);}catch(_0x3d3eb2){await this[_0x16b3cf(0x90)]()[_0x16b3cf(0x70)](_0x4e9b4e=>{const _0x4ce93f=_0x16b3cf;job_detail_1[_0x4ce93f(0xaf)]['error'](_0x4e9b4e[_0x4ce93f(0xa1)]);}),this[_0x16b3cf(0x6c)][_0x16b3cf(0x7d)](_0x3d3eb2[_0x16b3cf(0xa1)]),this['_loggerJobState'][_0x16b3cf(0x93)](logger_enums_1[_0x16b3cf(0x75)][_0x16b3cf(0x71)]),this['_loggerJobState'][_0x16b3cf(0xa5)](_0x3d3eb2[_0x16b3cf(0xa1)]),job_detail_1[_0x16b3cf(0xaf)][_0x16b3cf(0x7e)](_0x3d3eb2['message']);}finally{this[_0x16b3cf(0x6c)][_0x16b3cf(0x65)](_0x16b3cf(0x9b)),job_detail_1['systemLogger']['log'](_0x16b3cf(0x9b)),await this[_0x16b3cf(0xa0)]['kill'](),await this[_0x16b3cf(0x6c)][_0x16b3cf(0x73)]();}}}exports[a73_0xb2e30(0x94)]=MaskingJob,new MaskingJob()[a73_0xb2e30(0x7a)]()['then'](()=>process[a73_0xb2e30(0x7b)](0x0))[a73_0xb2e30(0x70)](()=>process['exit'](0x1));function a73_0x4955(){const _0x3c9653=['log','apply','AuthManager','MANIFEST_FILENAME','221627EDOOzk','ManagerAutomationProcess','./job-detail','_loggerDetails','1192zFyHKG','jobId','IN_PROGRESS','catch','FAILED','masking','kill','853870jaletv','JobStatus','initAutomationProcess','COMPLETED','enable','getManifest','execute','exit','../../shared/managers/auth.manager','exception','error','./classes/logger/logger-details','(((.+)+)+)+$','Disable\x20automation\x20process','disableAutomation','337403EKupdO','1640vIjdgF','fs/promises','disableAutomationProcess','./classes/step/steps-creator','./classes/logger/logger-job-state','writeFile','2371980XycXlk','@flosum/salesforce','toString','default','LoggerJobState','5077392HoXtTc','enableAutomationProcess','1700040TsFRXT','__esModule','setJobStatus','MaskingJob','search','StepsCreator','parse','jobStorePath','saveSourceAutomationProcessesBackup','from','Finish\x20Masking\x20Process','join','getManagerAutomationProcessOptions','path','disable','_loggerJobState','message','../constants','readFile','utf-8','setJobError','Enable\x20automation\x20process','init','_request','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','details','_maskingManifest','_managerAutomationProcess','Start\x20Masking\x20Process','_steps','systemLogger','LoggerDetails','_isEnableAutomationProcessError','push','base64'];a73_0x4955=function(){return _0x3c9653;};return a73_0x4955();}