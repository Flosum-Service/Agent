const a90_0x33edce=a90_0x242a;(function(_0x10eac9,_0x177bcf){const _0x42cc4b=a90_0x242a,_0x5d2d45=_0x10eac9();while(!![]){try{const _0x53a33a=-parseInt(_0x42cc4b(0x1a1))/0x1*(-parseInt(_0x42cc4b(0x1df))/0x2)+-parseInt(_0x42cc4b(0x1d0))/0x3*(-parseInt(_0x42cc4b(0x1da))/0x4)+parseInt(_0x42cc4b(0x1dc))/0x5+-parseInt(_0x42cc4b(0x1b7))/0x6*(parseInt(_0x42cc4b(0x1c7))/0x7)+parseInt(_0x42cc4b(0x1a9))/0x8+-parseInt(_0x42cc4b(0x1f2))/0x9*(-parseInt(_0x42cc4b(0x1d2))/0xa)+-parseInt(_0x42cc4b(0x1cf))/0xb;if(_0x53a33a===_0x177bcf)break;else _0x5d2d45['push'](_0x5d2d45['shift']());}catch(_0x250a63){_0x5d2d45['push'](_0x5d2d45['shift']());}}}(a90_0x17f7,0x8e13c));const a90_0x1dc44b=(function(){let _0x44db8f=!![];return function(_0xab3e52,_0x538f0a){const _0x4abcb2=_0x44db8f?function(){if(_0x538f0a){const _0x3f2ff4=_0x538f0a['apply'](_0xab3e52,arguments);return _0x538f0a=null,_0x3f2ff4;}}:function(){};return _0x44db8f=![],_0x4abcb2;};}()),a90_0x337de3=a90_0x1dc44b(this,function(){const _0x3eef25=a90_0x242a;return a90_0x337de3['toString']()[_0x3eef25(0x1ca)](_0x3eef25(0x1b4))[_0x3eef25(0x1eb)]()[_0x3eef25(0x1bb)](a90_0x337de3)[_0x3eef25(0x1ca)](_0x3eef25(0x1b4));});a90_0x337de3();'use strict';var __importDefault=this&&this[a90_0x33edce(0x1bf)]||function(_0x593274){const _0x3ff4b8=a90_0x33edce;return _0x593274&&_0x593274[_0x3ff4b8(0x1e0)]?_0x593274:{'default':_0x593274};};Object[a90_0x33edce(0x1dd)](exports,a90_0x33edce(0x1e0),{'value':!![]}),exports[a90_0x33edce(0x1a5)]=void 0x0;function a90_0x17f7(){const _0x3b48de=['StepsCreator','__importDefault','IN_PROGRESS','jobStorePath','getManifest','create','enable','then','error','1110011HNnnNP','default','disableAutomation','search','FAILED','_isEnableAutomationProcessError','Start\x20Masking\x20Process','@flosum/salesforce','24720102qtYmLE','1041zWthVK','_managerAutomationProcess','386680yqFEdw','./job-detail','Enable\x20automation\x20process','AxiosInstanceUtils','initAutomationProcess','push','fs/promises','utf-8','9364zoHSDJ','readFile','4713960vSIiqR','defineProperty','ManagerAutomationProcess','2eRAapV','__esModule','message','LoggerJobState','disable','_request','COMPLETED','details','from','execute','Disable\x20automation\x20process','_steps','toString','MANIFEST_FILENAME','Finish\x20Masking\x20Process','log','keys','setJobError','base64','252zbWmTH','setJobStatus','289248Bppmsc','JobStatus','systemLogger','join','MaskingJob','enableAutomationProcess','getManagerAutomationProcessOptions','saveSourceAutomationProcessesBackup','3960192sSGleS','writeFile','catch','./enums/logger.enums','../../../constants/job','init','masking','LoggerDetails','_loggerDetails','parse','exception','(((.+)+)+)+$','gzip','AuthManager','30vWjPvc','exit','disableAutomationProcess','_maskingManifest','constructor','./classes/step/steps-creator','_loggerJobState'];a90_0x17f7=function(){return _0x3b48de;};return a90_0x17f7();}const promises_1=require(a90_0x33edce(0x1d8)),salesforce_1=require(a90_0x33edce(0x1ce)),steps_creator_1=require(a90_0x33edce(0x1bc)),logger_enums_1=require(a90_0x33edce(0x1ac)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require(a90_0x33edce(0x1ad)),path_1=__importDefault(require('path')),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require('../constants'),job_detail_1=require(a90_0x33edce(0x1d3));class MaskingJob{constructor(){const _0x542b8d=a90_0x33edce;this[_0x542b8d(0x1cc)]=![];}async['initAutomationProcess'](){const _0x87ffa6=a90_0x33edce,{objectRules:_0x2467fd}=this[_0x87ffa6(0x1ba)];this['_managerAutomationProcess']=new salesforce_1[(_0x87ffa6(0x1de))](this[_0x87ffa6(0x1a7)](_0x2467fd));}async[a90_0x33edce(0x1af)](){const _0x39b542=a90_0x33edce;job_detail_1[_0x39b542(0x1a3)][_0x39b542(0x1ee)](_0x39b542(0x1cd)),this['_loggerDetails']['log']('Start\x20Masking\x20Process');const {objectRules:_0x2e25de,libraries:_0x42a62e}=this[_0x39b542(0x1ba)];this[_0x39b542(0x1ea)]=await new steps_creator_1[(_0x39b542(0x1be))]({'loggerDetails':this[_0x39b542(0x1b1)],'loggerJobState':this['_loggerJobState'],'libraries':_0x42a62e,'objectRules':_0x2e25de,'request':this[_0x39b542(0x1e4)]})[_0x39b542(0x1c3)]();for(const _0x1b5b35 of this['_steps']){await _0x1b5b35[_0x39b542(0x1e8)]();}}[a90_0x33edce(0x1a7)](_0x2046d0){const _0x20dc56=a90_0x33edce,_0x3d6a2a=[],_0x23e258=[],_0x3265a0=[],_0x37d219=[];for(const _0x24c792 in _0x2046d0){const {isDisableProcessBuilder:_0x286de3,isDisableTrigger:_0x123fb6,isDisableValidationRule:_0x15500e,isDisableWorkflow:_0x127a02}=_0x2046d0[_0x24c792][_0x20dc56(0x1c9)];_0x286de3&&_0x3265a0[_0x20dc56(0x1d7)](_0x24c792),_0x123fb6&&_0x3d6a2a[_0x20dc56(0x1d7)](_0x24c792),_0x15500e&&_0x37d219['push'](_0x24c792),_0x127a02&&_0x23e258[_0x20dc56(0x1d7)](_0x24c792);}return{'instance':this[_0x20dc56(0x1e4)],'saveSourceMetadataBackup':this[_0x20dc56(0x1a8)],'triggersObjects':_0x3d6a2a,'workflowsObjects':_0x23e258,'processBuilderObjects':_0x3265a0,'validationRulesObjects':_0x37d219};}async[a90_0x33edce(0x1b9)](){const _0x370dde=a90_0x33edce;job_detail_1[_0x370dde(0x1a3)][_0x370dde(0x1ee)](_0x370dde(0x1e9)),this[_0x370dde(0x1b1)][_0x370dde(0x1ee)](_0x370dde(0x1e9)),await this[_0x370dde(0x1d1)][_0x370dde(0x1e3)]();}async['enableAutomationProcess'](){const _0x599040=a90_0x33edce;!this[_0x599040(0x1cc)]&&(job_detail_1[_0x599040(0x1a3)][_0x599040(0x1ee)](_0x599040(0x1d4)),this[_0x599040(0x1b1)][_0x599040(0x1ee)]('Enable\x20automation\x20process'),await this[_0x599040(0x1d1)][_0x599040(0x1c4)]()[_0x599040(0x1ab)](_0x5f3662=>{const _0x399cbf=_0x599040;this[_0x399cbf(0x1cc)]=!![];throw _0x5f3662;}));}async['getManifest'](){const _0x2a0d16=a90_0x33edce,_0x4048cc=await(0x0,promises_1[_0x2a0d16(0x1db)])(path_1[_0x2a0d16(0x1c8)][_0x2a0d16(0x1a4)](job_detail_1[_0x2a0d16(0x1c1)],job_1[_0x2a0d16(0x1ec)]),{'encoding':_0x2a0d16(0x1d9)});return await(0x0,promises_1['rm'])(path_1[_0x2a0d16(0x1c8)][_0x2a0d16(0x1a4)](job_detail_1['jobStorePath'],job_1[_0x2a0d16(0x1ec)]),{'recursive':!![],'force':!![]}),JSON[_0x2a0d16(0x1b2)](_0x4048cc)[_0x2a0d16(0x1e6)];}[a90_0x33edce(0x1a8)](_0x226084){const _0x4f53be=a90_0x33edce;return(0x0,promises_1[_0x4f53be(0x1aa)])(path_1['default']['join'](job_detail_1[_0x4f53be(0x1c1)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x4f53be(0x1e7)](_0x226084,_0x4f53be(0x1f1)));}async[a90_0x33edce(0x1e8)](){const _0x4384d2=a90_0x33edce;this[_0x4384d2(0x1ba)]=await this[_0x4384d2(0x1c2)]();const {objectRules:_0x469b2e,credentials:_0x398492}=this[_0x4384d2(0x1ba)];this[_0x4384d2(0x1b1)]=await new logger_details_1[(_0x4384d2(0x1b0))](job_detail_1[_0x4384d2(0x1c1)],job_detail_1['jobId'])[_0x4384d2(0x1ae)](),this[_0x4384d2(0x1bd)]=await new logger_job_state_1[(_0x4384d2(0x1e2))](job_detail_1[_0x4384d2(0x1c1)],job_detail_1['jobId'])[_0x4384d2(0x1ae)](Object[_0x4384d2(0x1ef)](_0x469b2e));try{this['_loggerJobState'][_0x4384d2(0x1a0)](logger_enums_1[_0x4384d2(0x1a2)][_0x4384d2(0x1c0)]),this[_0x4384d2(0x1e4)]=await salesforce_1[_0x4384d2(0x1d5)][_0x4384d2(0x1c3)](new auth_manager_1[(_0x4384d2(0x1b6))](_0x398492),[],{'headers':{'Accept-Encoding':_0x4384d2(0x1b5)}}),await this[_0x4384d2(0x1d6)](),await this['disableAutomationProcess'](),await this['masking'](),await this[_0x4384d2(0x1a6)](),this[_0x4384d2(0x1bd)]['setJobStatus'](logger_enums_1[_0x4384d2(0x1a2)][_0x4384d2(0x1e5)]);}catch(_0x1b6ed8){await this[_0x4384d2(0x1a6)]()['catch'](_0x51f0dc=>{const _0x486e0f=_0x4384d2;job_detail_1[_0x486e0f(0x1a3)][_0x486e0f(0x1c6)](_0x51f0dc[_0x486e0f(0x1e1)]);}),this['_loggerDetails'][_0x4384d2(0x1b3)](_0x1b6ed8['message']),this['_loggerJobState'][_0x4384d2(0x1a0)](logger_enums_1[_0x4384d2(0x1a2)][_0x4384d2(0x1cb)]),this[_0x4384d2(0x1bd)][_0x4384d2(0x1f0)](_0x1b6ed8['message']),job_detail_1[_0x4384d2(0x1a3)]['error'](_0x1b6ed8[_0x4384d2(0x1e1)]);}finally{this[_0x4384d2(0x1b1)][_0x4384d2(0x1ee)](_0x4384d2(0x1ed)),job_detail_1[_0x4384d2(0x1a3)][_0x4384d2(0x1ee)](_0x4384d2(0x1ed)),await this[_0x4384d2(0x1bd)]['kill'](),await this['_loggerDetails']['kill']();}}}function a90_0x242a(_0x1ed416,_0x54ece6){const _0x4737dc=a90_0x17f7();return a90_0x242a=function(_0x337de3,_0x1dc44b){_0x337de3=_0x337de3-0x1a0;let _0x17f7fa=_0x4737dc[_0x337de3];return _0x17f7fa;},a90_0x242a(_0x1ed416,_0x54ece6);}exports[a90_0x33edce(0x1a5)]=MaskingJob,new MaskingJob()[a90_0x33edce(0x1e8)]()[a90_0x33edce(0x1c5)](()=>process[a90_0x33edce(0x1b8)](0x0))['catch'](()=>process[a90_0x33edce(0x1b8)](0x1));