const a90_0x185ae9=a90_0x2332;function a90_0x5cbd(){const _0x5024c1=['setJobError','utf-8','disableAutomationProcess','__importDefault','12YpIEeI','Start\x20Masking\x20Process','systemLogger','52138TFNNsx','log','9JDOXCP','enableAutomationProcess','path','AxiosInstanceUtils','details','_managerAutomationProcess','execute','default','init','../../shared/managers/auth.manager','1643612Japlsd','(((.+)+)+)+$','disableAutomation','MaskingJob','_request','message','search','126339ryeYjQ','masking','from','8650741JdyGNf','then','saveSourceAutomationProcessesBackup','apply','initAutomationProcess','jobId','push','778482DnhsCv','AuthManager','LoggerDetails','../constants','./classes/logger/logger-job-state','join','2367cWMzLx','Disable\x20automation\x20process','StepsCreator','parse','./classes/logger/logger-details','Enable\x20automation\x20process','5rSWWIX','setJobStatus','base64','@flosum/salesforce','41608ypdsdK','_isEnableAutomationProcessError','error','getManifest','exit','kill','writeFile','create','_loggerDetails','COMPLETED','LoggerJobState','_loggerJobState','jobStorePath','17830MgmXTG','fs/promises','disable','_steps','../../../constants/job','toString','_maskingManifest','enable','497RQbHoc','getManagerAutomationProcessOptions','Finish\x20Masking\x20Process','IN_PROGRESS','constructor','JobStatus','exception','MANIFEST_FILENAME','readFile'];a90_0x5cbd=function(){return _0x5024c1;};return a90_0x5cbd();}(function(_0x2cf60f,_0x5110b9){const _0x5bb5ca=a90_0x2332,_0x30bf16=_0x2cf60f();while(!![]){try{const _0x575c9a=parseInt(_0x5bb5ca(0x15d))/0x1*(-parseInt(_0x5bb5ca(0x15b))/0x2)+-parseInt(_0x5bb5ca(0x16e))/0x3+parseInt(_0x5bb5ca(0x167))/0x4*(parseInt(_0x5bb5ca(0x132))/0x5)+parseInt(_0x5bb5ca(0x178))/0x6+-parseInt(_0x5bb5ca(0x14b))/0x7*(-parseInt(_0x5bb5ca(0x136))/0x8)+parseInt(_0x5bb5ca(0x12c))/0x9*(parseInt(_0x5bb5ca(0x143))/0xa)+parseInt(_0x5bb5ca(0x171))/0xb*(-parseInt(_0x5bb5ca(0x158))/0xc);if(_0x575c9a===_0x5110b9)break;else _0x30bf16['push'](_0x30bf16['shift']());}catch(_0x72643e){_0x30bf16['push'](_0x30bf16['shift']());}}}(a90_0x5cbd,0x4d125));const a90_0x3f0cd0=(function(){let _0x32e5cd=!![];return function(_0x26baa4,_0x65a9b){const _0x4a4399=_0x32e5cd?function(){const _0x1386d7=a90_0x2332;if(_0x65a9b){const _0x596bc1=_0x65a9b[_0x1386d7(0x174)](_0x26baa4,arguments);return _0x65a9b=null,_0x596bc1;}}:function(){};return _0x32e5cd=![],_0x4a4399;};}()),a90_0x1689d8=a90_0x3f0cd0(this,function(){const _0x1b0dd4=a90_0x2332;return a90_0x1689d8[_0x1b0dd4(0x148)]()[_0x1b0dd4(0x16d)](_0x1b0dd4(0x168))[_0x1b0dd4(0x148)]()[_0x1b0dd4(0x14f)](a90_0x1689d8)[_0x1b0dd4(0x16d)](_0x1b0dd4(0x168));});a90_0x1689d8();'use strict';function a90_0x2332(_0x4ef14f,_0x250e59){const _0x1fd334=a90_0x5cbd();return a90_0x2332=function(_0x1689d8,_0x3f0cd0){_0x1689d8=_0x1689d8-0x128;let _0x5cbd6c=_0x1fd334[_0x1689d8];return _0x5cbd6c;},a90_0x2332(_0x4ef14f,_0x250e59);}var __importDefault=this&&this[a90_0x185ae9(0x157)]||function(_0x1fddbd){return _0x1fddbd&&_0x1fddbd['__esModule']?_0x1fddbd:{'default':_0x1fddbd};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a90_0x185ae9(0x144)),salesforce_1=require(a90_0x185ae9(0x135)),steps_creator_1=require('./classes/step/steps-creator'),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require(a90_0x185ae9(0x130)),logger_job_state_1=require(a90_0x185ae9(0x12a)),job_1=require(a90_0x185ae9(0x147)),path_1=__importDefault(require(a90_0x185ae9(0x15f))),auth_manager_1=require(a90_0x185ae9(0x166)),constants_1=require(a90_0x185ae9(0x129)),job_detail_1=require('./job-detail');class MaskingJob{constructor(){this['_isEnableAutomationProcessError']=![];}async[a90_0x185ae9(0x175)](){const _0x51178e=a90_0x185ae9,{objectRules:_0x21ccc7}=this['_maskingManifest'];this[_0x51178e(0x162)]=new salesforce_1['ManagerAutomationProcess'](this[_0x51178e(0x14c)](_0x21ccc7));}async[a90_0x185ae9(0x16f)](){const _0x104936=a90_0x185ae9;job_detail_1[_0x104936(0x15a)][_0x104936(0x15c)](_0x104936(0x159)),this['_loggerDetails'][_0x104936(0x15c)](_0x104936(0x159));const {objectRules:_0x5e2c52,libraries:_0x5703e3}=this['_maskingManifest'];this[_0x104936(0x146)]=await new steps_creator_1[(_0x104936(0x12e))]({'loggerDetails':this[_0x104936(0x13e)],'loggerJobState':this['_loggerJobState'],'libraries':_0x5703e3,'objectRules':_0x5e2c52,'request':this[_0x104936(0x16b)]})[_0x104936(0x13d)]();for(const _0x13aa34 of this[_0x104936(0x146)]){await _0x13aa34[_0x104936(0x163)]();}}[a90_0x185ae9(0x14c)](_0x367962){const _0x42b159=a90_0x185ae9,_0x5649ef=[],_0x2167d8=[],_0x8f2011=[],_0x492ea4=[];for(const _0x36c1cf in _0x367962){const {isDisableProcessBuilder:_0xce3d23,isDisableTrigger:_0x598666,isDisableValidationRule:_0x4ab1e6,isDisableWorkflow:_0x261199}=_0x367962[_0x36c1cf][_0x42b159(0x169)];_0xce3d23&&_0x8f2011[_0x42b159(0x177)](_0x36c1cf),_0x598666&&_0x5649ef[_0x42b159(0x177)](_0x36c1cf),_0x4ab1e6&&_0x492ea4[_0x42b159(0x177)](_0x36c1cf),_0x261199&&_0x2167d8[_0x42b159(0x177)](_0x36c1cf);}return{'instance':this['_request'],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x5649ef,'workflowsObjects':_0x2167d8,'processBuilderObjects':_0x8f2011,'validationRulesObjects':_0x492ea4};}async[a90_0x185ae9(0x156)](){const _0x42f8e6=a90_0x185ae9;job_detail_1[_0x42f8e6(0x15a)][_0x42f8e6(0x15c)]('Disable\x20automation\x20process'),this[_0x42f8e6(0x13e)][_0x42f8e6(0x15c)](_0x42f8e6(0x12d)),await this[_0x42f8e6(0x162)][_0x42f8e6(0x145)]();}async['enableAutomationProcess'](){const _0x5842e8=a90_0x185ae9;!this[_0x5842e8(0x137)]&&(job_detail_1[_0x5842e8(0x15a)]['log'](_0x5842e8(0x131)),this[_0x5842e8(0x13e)]['log'](_0x5842e8(0x131)),await this[_0x5842e8(0x162)][_0x5842e8(0x14a)]()['catch'](_0x5dcc44=>{this['_isEnableAutomationProcessError']=!![];throw _0x5dcc44;}));}async[a90_0x185ae9(0x139)](){const _0x360f81=a90_0x185ae9,_0x315046=await(0x0,promises_1[_0x360f81(0x153)])(path_1[_0x360f81(0x164)][_0x360f81(0x12b)](job_detail_1['jobStorePath'],job_1[_0x360f81(0x152)]),{'encoding':_0x360f81(0x155)});return await(0x0,promises_1['rm'])(path_1[_0x360f81(0x164)]['join'](job_detail_1[_0x360f81(0x142)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON[_0x360f81(0x12f)](_0x315046)[_0x360f81(0x161)];}[a90_0x185ae9(0x173)](_0x309a40){const _0x1830e0=a90_0x185ae9;return(0x0,promises_1[_0x1830e0(0x13c)])(path_1[_0x1830e0(0x164)][_0x1830e0(0x12b)](job_detail_1[_0x1830e0(0x142)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x1830e0(0x170)](_0x309a40,_0x1830e0(0x134)));}async[a90_0x185ae9(0x163)](){const _0x44086f=a90_0x185ae9;this[_0x44086f(0x149)]=await this['getManifest']();const {objectRules:_0x14cd43,credentials:_0x4825e8}=this[_0x44086f(0x149)];this['_loggerDetails']=await new logger_details_1[(_0x44086f(0x128))](job_detail_1[_0x44086f(0x142)],job_detail_1['jobId'])[_0x44086f(0x165)](),this[_0x44086f(0x141)]=await new logger_job_state_1[(_0x44086f(0x140))](job_detail_1['jobStorePath'],job_detail_1[_0x44086f(0x176)])[_0x44086f(0x165)](Object['keys'](_0x14cd43));try{this[_0x44086f(0x141)][_0x44086f(0x133)](logger_enums_1[_0x44086f(0x150)][_0x44086f(0x14e)]),this['_request']=await salesforce_1[_0x44086f(0x160)][_0x44086f(0x13d)](new auth_manager_1[(_0x44086f(0x179))](_0x4825e8),[],{'headers':{'Accept-Encoding':'gzip'}}),await this[_0x44086f(0x175)](),await this[_0x44086f(0x156)](),await this[_0x44086f(0x16f)](),await this['enableAutomationProcess'](),this[_0x44086f(0x141)][_0x44086f(0x133)](logger_enums_1[_0x44086f(0x150)][_0x44086f(0x13f)]);}catch(_0x52a9dd){await this[_0x44086f(0x15e)]()['catch'](_0x51b437=>{const _0x55ad1c=_0x44086f;job_detail_1[_0x55ad1c(0x15a)][_0x55ad1c(0x138)](_0x51b437[_0x55ad1c(0x16c)]);}),this[_0x44086f(0x13e)][_0x44086f(0x151)](_0x52a9dd[_0x44086f(0x16c)]),this['_loggerJobState']['setJobStatus'](logger_enums_1[_0x44086f(0x150)]['FAILED']),this['_loggerJobState'][_0x44086f(0x154)](_0x52a9dd[_0x44086f(0x16c)]),job_detail_1[_0x44086f(0x15a)][_0x44086f(0x138)](_0x52a9dd[_0x44086f(0x16c)]);}finally{this[_0x44086f(0x13e)][_0x44086f(0x15c)](_0x44086f(0x14d)),job_detail_1['systemLogger']['log'](_0x44086f(0x14d)),await this[_0x44086f(0x141)][_0x44086f(0x13b)](),await this[_0x44086f(0x13e)][_0x44086f(0x13b)]();}}}exports[a90_0x185ae9(0x16a)]=MaskingJob,new MaskingJob()['execute']()[a90_0x185ae9(0x172)](()=>process[a90_0x185ae9(0x13a)](0x0))['catch'](()=>process[a90_0x185ae9(0x13a)](0x1));