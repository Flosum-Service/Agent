const a73_0x5b5f4c=a73_0x5344;(function(_0x359599,_0x3c7060){const _0x11fcac=a73_0x5344,_0x3c70ab=_0x359599();while(!![]){try{const _0x2ed5ab=parseInt(_0x11fcac(0x15f))/0x1+-parseInt(_0x11fcac(0x13c))/0x2*(-parseInt(_0x11fcac(0x165))/0x3)+-parseInt(_0x11fcac(0x12e))/0x4+parseInt(_0x11fcac(0x167))/0x5+parseInt(_0x11fcac(0x14e))/0x6+parseInt(_0x11fcac(0x135))/0x7*(parseInt(_0x11fcac(0x140))/0x8)+-parseInt(_0x11fcac(0x14a))/0x9*(parseInt(_0x11fcac(0x143))/0xa);if(_0x2ed5ab===_0x3c7060)break;else _0x3c70ab['push'](_0x3c70ab['shift']());}catch(_0x25a2d0){_0x3c70ab['push'](_0x3c70ab['shift']());}}}(a73_0x5623,0x49c86));const a73_0x3f45c7=(function(){let _0x4af3b5=!![];return function(_0xa01200,_0x245ddc){const _0x590471=_0x4af3b5?function(){if(_0x245ddc){const _0x1ceef3=_0x245ddc['apply'](_0xa01200,arguments);return _0x245ddc=null,_0x1ceef3;}}:function(){};return _0x4af3b5=![],_0x590471;};}()),a73_0xa9a6a2=a73_0x3f45c7(this,function(){const _0x57f4b=a73_0x5344;return a73_0xa9a6a2['toString']()[_0x57f4b(0x15d)](_0x57f4b(0x157))[_0x57f4b(0x146)]()[_0x57f4b(0x136)](a73_0xa9a6a2)['search'](_0x57f4b(0x157));});a73_0xa9a6a2();'use strict';function a73_0x5344(_0x1ff7af,_0x392248){const _0x28fea9=a73_0x5623();return a73_0x5344=function(_0xa9a6a2,_0x3f45c7){_0xa9a6a2=_0xa9a6a2-0x120;let _0x562351=_0x28fea9[_0xa9a6a2];return _0x562351;},a73_0x5344(_0x1ff7af,_0x392248);}var __importDefault=this&&this['__importDefault']||function(_0x3877b9){const _0xe61d5d=a73_0x5344;return _0x3877b9&&_0x3877b9[_0xe61d5d(0x126)]?_0x3877b9:{'default':_0x3877b9};};Object[a73_0x5b5f4c(0x16d)](exports,a73_0x5b5f4c(0x126),{'value':!![]}),exports['MaskingJob']=void 0x0;function a73_0x5623(){const _0x20a61a=['readFile','_request','disableAutomationProcess','3445110pUSSPU','jobStorePath','execute','StepsCreator','416976MUPmiO','Disable\x20automation\x20process','_loggerDetails','default','../../shared/managers/auth.manager','IN_PROGRESS','AuthManager','push','details','(((.+)+)+)+$','COMPLETED','create','disable','initAutomationProcess','writeFile','search','Enable\x20automation\x20process','220710fahbWi','getManagerAutomationProcessOptions','base64','MaskingJob','utf-8','masking','183aMHaJC','./classes/step/steps-creator','2090665cAyTnx','AxiosInstanceUtils','./job-detail','keys','@flosum/salesforce','../../../constants/job','defineProperty','jobId','kill','LoggerDetails','saveSourceAutomationProcessesBackup','LoggerJobState','systemLogger','message','init','_isEnableAutomationProcessError','parse','Finish\x20Masking\x20Process','JobStatus','__esModule','_steps','ManagerAutomationProcess','log','enable','join','FAILED','_managerAutomationProcess','1198712LszExJ','./classes/logger/logger-details','from','error','_maskingManifest','path','Start\x20Masking\x20Process','780647cvbnKE','constructor','exception','enableAutomationProcess','setJobError','../constants','catch','5404SHXzab','setJobStatus','./classes/logger/logger-job-state','./enums/logger.enums','8dHWVLi','getManifest','_loggerJobState','10DAmegT','then','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','toString'];a73_0x5623=function(){return _0x20a61a;};return a73_0x5623();}const promises_1=require('fs/promises'),salesforce_1=require(a73_0x5b5f4c(0x16b)),steps_creator_1=require(a73_0x5b5f4c(0x166)),logger_enums_1=require(a73_0x5b5f4c(0x13f)),logger_details_1=require(a73_0x5b5f4c(0x12f)),logger_job_state_1=require(a73_0x5b5f4c(0x13e)),job_1=require(a73_0x5b5f4c(0x16c)),path_1=__importDefault(require(a73_0x5b5f4c(0x133))),auth_manager_1=require(a73_0x5b5f4c(0x152)),constants_1=require(a73_0x5b5f4c(0x13a)),job_detail_1=require(a73_0x5b5f4c(0x169));class MaskingJob{constructor(){const _0x2e5449=a73_0x5b5f4c;this[_0x2e5449(0x122)]=![];}async[a73_0x5b5f4c(0x15b)](){const _0x279c24=a73_0x5b5f4c,{objectRules:_0x26bd14}=this[_0x279c24(0x132)];this[_0x279c24(0x12d)]=new salesforce_1[(_0x279c24(0x128))](this[_0x279c24(0x160)](_0x26bd14));}async[a73_0x5b5f4c(0x164)](){const _0x28ce4f=a73_0x5b5f4c;job_detail_1[_0x28ce4f(0x173)][_0x28ce4f(0x129)](_0x28ce4f(0x134)),this[_0x28ce4f(0x150)][_0x28ce4f(0x129)]('Start\x20Masking\x20Process');const {objectRules:_0x5796ff,libraries:_0x6ac8d2}=this[_0x28ce4f(0x132)];this['_steps']=await new steps_creator_1[(_0x28ce4f(0x14d))]({'loggerDetails':this[_0x28ce4f(0x150)],'loggerJobState':this[_0x28ce4f(0x142)],'libraries':_0x6ac8d2,'objectRules':_0x5796ff,'request':this['_request']})[_0x28ce4f(0x159)]();for(const _0x51cf0f of this[_0x28ce4f(0x127)]){await _0x51cf0f['execute']();}}[a73_0x5b5f4c(0x160)](_0x5bb849){const _0x3e7838=a73_0x5b5f4c,_0x4df83c=[],_0x385eb4=[],_0x49afe8=[],_0x1c3653=[];for(const _0x33e0d1 in _0x5bb849){const {isDisableProcessBuilder:_0x4bf90c,isDisableTrigger:_0x520202,isDisableValidationRule:_0x46f819,isDisableWorkflow:_0x2a40cc}=_0x5bb849[_0x33e0d1]['disableAutomation'];_0x4bf90c&&_0x49afe8['push'](_0x33e0d1),_0x520202&&_0x4df83c[_0x3e7838(0x155)](_0x33e0d1),_0x46f819&&_0x1c3653[_0x3e7838(0x155)](_0x33e0d1),_0x2a40cc&&_0x385eb4[_0x3e7838(0x155)](_0x33e0d1);}return{'instance':this['_request'],'saveSourceMetadataBackup':this[_0x3e7838(0x171)],'triggersObjects':_0x4df83c,'workflowsObjects':_0x385eb4,'processBuilderObjects':_0x49afe8,'validationRulesObjects':_0x1c3653};}async['disableAutomationProcess'](){const _0x1b48fe=a73_0x5b5f4c;job_detail_1[_0x1b48fe(0x173)][_0x1b48fe(0x129)](_0x1b48fe(0x14f)),this[_0x1b48fe(0x150)]['log'](_0x1b48fe(0x14f)),await this[_0x1b48fe(0x12d)][_0x1b48fe(0x15a)]();}async[a73_0x5b5f4c(0x138)](){const _0x4cacc4=a73_0x5b5f4c;!this[_0x4cacc4(0x122)]&&(job_detail_1[_0x4cacc4(0x173)]['log'](_0x4cacc4(0x15e)),this['_loggerDetails']['log'](_0x4cacc4(0x15e)),await this[_0x4cacc4(0x12d)][_0x4cacc4(0x12a)]()[_0x4cacc4(0x13b)](_0x11ff9b=>{const _0x330607=_0x4cacc4;this[_0x330607(0x122)]=!![];throw _0x11ff9b;}));}async['getManifest'](){const _0x5cb19a=a73_0x5b5f4c,_0x2e5092=await(0x0,promises_1[_0x5cb19a(0x147)])(path_1[_0x5cb19a(0x151)][_0x5cb19a(0x12b)](job_detail_1[_0x5cb19a(0x14b)],job_1['MANIFEST_FILENAME']),{'encoding':_0x5cb19a(0x163)});return await(0x0,promises_1['rm'])(path_1[_0x5cb19a(0x151)][_0x5cb19a(0x12b)](job_detail_1[_0x5cb19a(0x14b)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON[_0x5cb19a(0x123)](_0x2e5092)[_0x5cb19a(0x156)];}[a73_0x5b5f4c(0x171)](_0x1afc7e){const _0x3fab1f=a73_0x5b5f4c;return(0x0,promises_1[_0x3fab1f(0x15c)])(path_1[_0x3fab1f(0x151)][_0x3fab1f(0x12b)](job_detail_1['jobStorePath'],constants_1[_0x3fab1f(0x145)]),Buffer[_0x3fab1f(0x130)](_0x1afc7e,_0x3fab1f(0x161)));}async[a73_0x5b5f4c(0x14c)](){const _0x288af9=a73_0x5b5f4c;this['_maskingManifest']=await this[_0x288af9(0x141)]();const {objectRules:_0xdca83c,credentials:_0x161301}=this['_maskingManifest'];this[_0x288af9(0x150)]=await new logger_details_1[(_0x288af9(0x170))](job_detail_1['jobStorePath'],job_detail_1['jobId'])[_0x288af9(0x121)](),this['_loggerJobState']=await new logger_job_state_1[(_0x288af9(0x172))](job_detail_1[_0x288af9(0x14b)],job_detail_1[_0x288af9(0x16e)])[_0x288af9(0x121)](Object[_0x288af9(0x16a)](_0xdca83c));try{this['_loggerJobState'][_0x288af9(0x13d)](logger_enums_1[_0x288af9(0x125)][_0x288af9(0x153)]),this[_0x288af9(0x148)]=await salesforce_1[_0x288af9(0x168)]['create'](new auth_manager_1[(_0x288af9(0x154))](_0x161301),[],{'headers':{'Accept-Encoding':'gzip'}}),await this['initAutomationProcess'](),await this[_0x288af9(0x149)](),await this[_0x288af9(0x164)](),await this[_0x288af9(0x138)](),this[_0x288af9(0x142)][_0x288af9(0x13d)](logger_enums_1[_0x288af9(0x125)][_0x288af9(0x158)]);}catch(_0x1a2ca9){await this[_0x288af9(0x138)]()['catch'](_0x5a66ef=>{const _0x3e0352=_0x288af9;job_detail_1[_0x3e0352(0x173)][_0x3e0352(0x131)](_0x5a66ef[_0x3e0352(0x120)]);}),this[_0x288af9(0x150)][_0x288af9(0x137)](_0x1a2ca9[_0x288af9(0x120)]),this[_0x288af9(0x142)][_0x288af9(0x13d)](logger_enums_1[_0x288af9(0x125)][_0x288af9(0x12c)]),this[_0x288af9(0x142)][_0x288af9(0x139)](_0x1a2ca9[_0x288af9(0x120)]),job_detail_1[_0x288af9(0x173)][_0x288af9(0x131)](_0x1a2ca9[_0x288af9(0x120)]);}finally{this[_0x288af9(0x150)][_0x288af9(0x129)](_0x288af9(0x124)),job_detail_1[_0x288af9(0x173)][_0x288af9(0x129)](_0x288af9(0x124)),await this['_loggerJobState'][_0x288af9(0x16f)](),await this[_0x288af9(0x150)][_0x288af9(0x16f)]();}}}exports[a73_0x5b5f4c(0x162)]=MaskingJob,new MaskingJob()[a73_0x5b5f4c(0x14c)]()[a73_0x5b5f4c(0x144)](()=>process['exit'](0x0))['catch'](()=>process['exit'](0x1));