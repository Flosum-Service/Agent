const a90_0x216e7e=a90_0x5d34;(function(_0x21f5b3,_0x563126){const _0x5a2a8e=a90_0x5d34,_0x3f0149=_0x21f5b3();while(!![]){try{const _0x1227c4=parseInt(_0x5a2a8e(0x1a5))/0x1*(parseInt(_0x5a2a8e(0x18d))/0x2)+-parseInt(_0x5a2a8e(0x17a))/0x3*(-parseInt(_0x5a2a8e(0x1a1))/0x4)+-parseInt(_0x5a2a8e(0x184))/0x5+parseInt(_0x5a2a8e(0x19a))/0x6+parseInt(_0x5a2a8e(0x18a))/0x7+parseInt(_0x5a2a8e(0x1af))/0x8+-parseInt(_0x5a2a8e(0x169))/0x9;if(_0x1227c4===_0x563126)break;else _0x3f0149['push'](_0x3f0149['shift']());}catch(_0x4bce15){_0x3f0149['push'](_0x3f0149['shift']());}}}(a90_0xc4fc,0x6715c));const a90_0x2d9300=(function(){let _0x3d3176=!![];return function(_0x53ad29,_0x152d64){const _0x4de199=_0x3d3176?function(){if(_0x152d64){const _0x48e1c0=_0x152d64['apply'](_0x53ad29,arguments);return _0x152d64=null,_0x48e1c0;}}:function(){};return _0x3d3176=![],_0x4de199;};}()),a90_0x210441=a90_0x2d9300(this,function(){const _0x38f0eb=a90_0x5d34;return a90_0x210441['toString']()['search'](_0x38f0eb(0x17d))[_0x38f0eb(0x19b)]()[_0x38f0eb(0x171)](a90_0x210441)[_0x38f0eb(0x189)]('(((.+)+)+)+$');});function a90_0x5d34(_0x37fbbb,_0x43b447){const _0x4827b4=a90_0xc4fc();return a90_0x5d34=function(_0x210441,_0x2d9300){_0x210441=_0x210441-0x169;let _0xc4fc72=_0x4827b4[_0x210441];return _0xc4fc72;},a90_0x5d34(_0x37fbbb,_0x43b447);}a90_0x210441();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3eeae0){const _0x317d20=a90_0x5d34;return _0x3eeae0&&_0x3eeae0[_0x317d20(0x1a0)]?_0x3eeae0:{'default':_0x3eeae0};};Object[a90_0x216e7e(0x177)](exports,a90_0x216e7e(0x1a0),{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require('fs/promises'),salesforce_1=require(a90_0x216e7e(0x197)),steps_creator_1=require(a90_0x216e7e(0x1a7)),logger_enums_1=require(a90_0x216e7e(0x16d)),logger_details_1=require(a90_0x216e7e(0x174)),logger_job_state_1=require(a90_0x216e7e(0x194)),job_1=require(a90_0x216e7e(0x173)),path_1=__importDefault(require(a90_0x216e7e(0x1ae))),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a90_0x216e7e(0x19f)),job_detail_1=require('./job-detail');class MaskingJob{constructor(){const _0x1d03c4=a90_0x216e7e;this[_0x1d03c4(0x196)]=![];}async[a90_0x216e7e(0x1b1)](){const _0x5b16af=a90_0x216e7e,{objectRules:_0x74dde6}=this[_0x5b16af(0x1a6)];this[_0x5b16af(0x16e)]=new salesforce_1[(_0x5b16af(0x18f))](this[_0x5b16af(0x16c)](_0x74dde6));}async['masking'](){const _0x3d6125=a90_0x216e7e;job_detail_1[_0x3d6125(0x17e)]['log'](_0x3d6125(0x188)),this[_0x3d6125(0x1b4)][_0x3d6125(0x1b2)](_0x3d6125(0x188));const {objectRules:_0x405081,libraries:_0x3af67f}=this[_0x3d6125(0x1a6)];this[_0x3d6125(0x175)]=await new steps_creator_1['StepsCreator']({'loggerDetails':this['_loggerDetails'],'loggerJobState':this[_0x3d6125(0x180)],'libraries':_0x3af67f,'objectRules':_0x405081,'request':this['_request']})[_0x3d6125(0x187)]();for(const _0x100948 of this[_0x3d6125(0x175)]){await _0x100948['execute']();}}[a90_0x216e7e(0x16c)](_0x40bec0){const _0x2727e9=a90_0x216e7e,_0x331ff4=[],_0x328cf4=[],_0x588bdf=[],_0x1fb12f=[];for(const _0x516e9e in _0x40bec0){const {isDisableProcessBuilder:_0x1755bc,isDisableTrigger:_0x28f9b7,isDisableValidationRule:_0x16a95e,isDisableWorkflow:_0x4d81c3}=_0x40bec0[_0x516e9e][_0x2727e9(0x17f)];_0x1755bc&&_0x588bdf[_0x2727e9(0x195)](_0x516e9e),_0x28f9b7&&_0x331ff4['push'](_0x516e9e),_0x16a95e&&_0x1fb12f['push'](_0x516e9e),_0x4d81c3&&_0x328cf4[_0x2727e9(0x195)](_0x516e9e);}return{'instance':this['_request'],'saveSourceMetadataBackup':this[_0x2727e9(0x1b0)],'triggersObjects':_0x331ff4,'workflowsObjects':_0x328cf4,'processBuilderObjects':_0x588bdf,'validationRulesObjects':_0x1fb12f};}async['disableAutomationProcess'](){const _0x176a7f=a90_0x216e7e;job_detail_1['systemLogger']['log'](_0x176a7f(0x1b3)),this['_loggerDetails']['log'](_0x176a7f(0x1b3)),await this[_0x176a7f(0x16e)]['disable']();}async[a90_0x216e7e(0x17b)](){const _0x572e52=a90_0x216e7e;!this[_0x572e52(0x196)]&&(job_detail_1['systemLogger'][_0x572e52(0x1b2)](_0x572e52(0x1a4)),this['_loggerDetails'][_0x572e52(0x1b2)](_0x572e52(0x1a4)),await this[_0x572e52(0x16e)]['enable']()[_0x572e52(0x1ab)](_0x344ff6=>{const _0xddf107=_0x572e52;this[_0xddf107(0x196)]=!![];throw _0x344ff6;}));}async[a90_0x216e7e(0x18c)](){const _0x85db07=a90_0x216e7e,_0x104b40=await(0x0,promises_1['readFile'])(path_1[_0x85db07(0x19d)][_0x85db07(0x1b6)](job_detail_1[_0x85db07(0x179)],job_1[_0x85db07(0x16a)]),{'encoding':_0x85db07(0x178)});return await(0x0,promises_1['rm'])(path_1[_0x85db07(0x19d)][_0x85db07(0x1b6)](job_detail_1[_0x85db07(0x179)],job_1[_0x85db07(0x16a)]),{'recursive':!![],'force':!![]}),JSON[_0x85db07(0x190)](_0x104b40)[_0x85db07(0x170)];}[a90_0x216e7e(0x1b0)](_0x2ca22a){const _0x57b6c6=a90_0x216e7e;return(0x0,promises_1[_0x57b6c6(0x1ad)])(path_1[_0x57b6c6(0x19d)][_0x57b6c6(0x1b6)](job_detail_1['jobStorePath'],constants_1[_0x57b6c6(0x1ac)]),Buffer[_0x57b6c6(0x199)](_0x2ca22a,_0x57b6c6(0x186)));}async[a90_0x216e7e(0x1a2)](){const _0x3dfbfb=a90_0x216e7e;this['_maskingManifest']=await this['getManifest']();const {objectRules:_0x23036c,credentials:_0x1839a2}=this['_maskingManifest'];this[_0x3dfbfb(0x1b4)]=await new logger_details_1[(_0x3dfbfb(0x176))](job_detail_1[_0x3dfbfb(0x179)],job_detail_1['jobId'])[_0x3dfbfb(0x17c)](),this[_0x3dfbfb(0x180)]=await new logger_job_state_1[(_0x3dfbfb(0x198))](job_detail_1[_0x3dfbfb(0x179)],job_detail_1[_0x3dfbfb(0x18e)])[_0x3dfbfb(0x17c)](Object[_0x3dfbfb(0x1a3)](_0x23036c));try{this[_0x3dfbfb(0x180)][_0x3dfbfb(0x182)](logger_enums_1[_0x3dfbfb(0x191)]['IN_PROGRESS']),this[_0x3dfbfb(0x19e)]=await salesforce_1[_0x3dfbfb(0x1aa)][_0x3dfbfb(0x187)](new auth_manager_1[(_0x3dfbfb(0x1a8))](_0x1839a2),[],{'headers':{'Accept-Encoding':'gzip'}}),await this[_0x3dfbfb(0x1b1)](),await this[_0x3dfbfb(0x1a9)](),await this[_0x3dfbfb(0x16b)](),await this[_0x3dfbfb(0x17b)](),this['_loggerJobState'][_0x3dfbfb(0x182)](logger_enums_1[_0x3dfbfb(0x191)]['COMPLETED']);}catch(_0x3db912){await this['enableAutomationProcess']()[_0x3dfbfb(0x1ab)](_0x415b76=>{const _0x4c349f=_0x3dfbfb;job_detail_1[_0x4c349f(0x17e)]['error'](_0x415b76[_0x4c349f(0x193)]);}),this[_0x3dfbfb(0x1b4)][_0x3dfbfb(0x181)](_0x3db912[_0x3dfbfb(0x193)]),this[_0x3dfbfb(0x180)][_0x3dfbfb(0x182)](logger_enums_1['JobStatus'][_0x3dfbfb(0x19c)]),this[_0x3dfbfb(0x180)][_0x3dfbfb(0x18b)](_0x3db912['message']),job_detail_1[_0x3dfbfb(0x17e)][_0x3dfbfb(0x185)](_0x3db912['message']);}finally{this['_loggerDetails'][_0x3dfbfb(0x1b2)](_0x3dfbfb(0x183)),job_detail_1[_0x3dfbfb(0x17e)][_0x3dfbfb(0x1b2)](_0x3dfbfb(0x183)),await this['_loggerJobState'][_0x3dfbfb(0x192)](),await this[_0x3dfbfb(0x1b4)][_0x3dfbfb(0x192)]();}}}function a90_0xc4fc(){const _0x4d0eef=['FAILED','default','_request','../constants','__esModule','580kogKga','execute','keys','Enable\x20automation\x20process','99105IEsgUQ','_maskingManifest','./classes/step/steps-creator','AuthManager','disableAutomationProcess','AxiosInstanceUtils','catch','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','writeFile','path','1029072jDziiJ','saveSourceAutomationProcessesBackup','initAutomationProcess','log','Disable\x20automation\x20process','_loggerDetails','MaskingJob','join','9067176WdUFOR','MANIFEST_FILENAME','masking','getManagerAutomationProcessOptions','./enums/logger.enums','_managerAutomationProcess','exit','details','constructor','then','../../../constants/job','./classes/logger/logger-details','_steps','LoggerDetails','defineProperty','utf-8','jobStorePath','17454AchMhh','enableAutomationProcess','init','(((.+)+)+)+$','systemLogger','disableAutomation','_loggerJobState','exception','setJobStatus','Finish\x20Masking\x20Process','1270255fMhnMP','error','base64','create','Start\x20Masking\x20Process','search','2261413ySfcUt','setJobError','getManifest','4lOdgmQ','jobId','ManagerAutomationProcess','parse','JobStatus','kill','message','./classes/logger/logger-job-state','push','_isEnableAutomationProcessError','@flosum/salesforce','LoggerJobState','from','1141428UAjjGG','toString'];a90_0xc4fc=function(){return _0x4d0eef;};return a90_0xc4fc();}exports[a90_0x216e7e(0x1b5)]=MaskingJob,new MaskingJob()[a90_0x216e7e(0x1a2)]()[a90_0x216e7e(0x172)](()=>process['exit'](0x0))[a90_0x216e7e(0x1ab)](()=>process[a90_0x216e7e(0x16f)](0x1));