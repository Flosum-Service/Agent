const a89_0x171e38=a89_0x4d66;(function(_0x29139c,_0xba4e8e){const _0x169783=a89_0x4d66,_0x302bbc=_0x29139c();while(!![]){try{const _0x4c9f6e=-parseInt(_0x169783(0xb4))/0x1+parseInt(_0x169783(0xb2))/0x2*(parseInt(_0x169783(0xb0))/0x3)+-parseInt(_0x169783(0xa6))/0x4*(parseInt(_0x169783(0xcc))/0x5)+parseInt(_0x169783(0xa1))/0x6*(parseInt(_0x169783(0xcd))/0x7)+-parseInt(_0x169783(0xd1))/0x8+parseInt(_0x169783(0xc4))/0x9+parseInt(_0x169783(0x97))/0xa*(parseInt(_0x169783(0x96))/0xb);if(_0x4c9f6e===_0xba4e8e)break;else _0x302bbc['push'](_0x302bbc['shift']());}catch(_0x4abaf7){_0x302bbc['push'](_0x302bbc['shift']());}}}(a89_0x5077,0xcab88));const a89_0x592e23=(function(){let _0x40eeb0=!![];return function(_0x388899,_0x14c7f4){const _0x3894a4=_0x40eeb0?function(){const _0xec8435=a89_0x4d66;if(_0x14c7f4){const _0x1e49b6=_0x14c7f4[_0xec8435(0xd3)](_0x388899,arguments);return _0x14c7f4=null,_0x1e49b6;}}:function(){};return _0x40eeb0=![],_0x3894a4;};}()),a89_0xe277f3=a89_0x592e23(this,function(){const _0x1276b6=a89_0x4d66;return a89_0xe277f3[_0x1276b6(0x8f)]()[_0x1276b6(0xc2)](_0x1276b6(0x9f))[_0x1276b6(0x8f)]()[_0x1276b6(0x93)](a89_0xe277f3)[_0x1276b6(0xc2)]('(((.+)+)+)+$');});a89_0xe277f3();'use strict';function a89_0x4d66(_0x10d40b,_0x11bbef){const _0x24368a=a89_0x5077();return a89_0x4d66=function(_0xe277f3,_0x592e23){_0xe277f3=_0xe277f3-0x8b;let _0x507731=_0x24368a[_0xe277f3];return _0x507731;},a89_0x4d66(_0x10d40b,_0x11bbef);}var __importDefault=this&&this[a89_0x171e38(0x9b)]||function(_0x5dce01){return _0x5dce01&&_0x5dce01['__esModule']?_0x5dce01:{'default':_0x5dce01};};Object[a89_0x171e38(0xca)](exports,a89_0x171e38(0xb7),{'value':!![]}),exports[a89_0x171e38(0xbc)]=void 0x0;const promises_1=require('fs/promises'),salesforce_1=require(a89_0x171e38(0xa5)),steps_creator_1=require(a89_0x171e38(0xc6)),logger_enums_1=require(a89_0x171e38(0xcb)),logger_details_1=require(a89_0x171e38(0x95)),logger_job_state_1=require(a89_0x171e38(0x8e)),job_1=require(a89_0x171e38(0xac)),path_1=__importDefault(require(a89_0x171e38(0xa3))),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a89_0x171e38(0xbb)),job_detail_1=require(a89_0x171e38(0xcf));class MaskingJob{constructor(){const _0x210361=a89_0x171e38;this[_0x210361(0xc3)]=![];}async[a89_0x171e38(0xc9)](){const _0x1f942a=a89_0x171e38,{objectRules:_0x3055dd}=this[_0x1f942a(0xd4)];this[_0x1f942a(0x9c)]=new salesforce_1[(_0x1f942a(0xb5))](this[_0x1f942a(0xbe)](_0x3055dd));}async[a89_0x171e38(0xd6)](){const _0x52a5fb=a89_0x171e38;job_detail_1['systemLogger'][_0x52a5fb(0x99)](_0x52a5fb(0x9d)),this[_0x52a5fb(0xa4)][_0x52a5fb(0x99)](_0x52a5fb(0x9d));const {objectRules:_0x87be2d,libraries:_0x5db8a9}=this[_0x52a5fb(0xd4)];this[_0x52a5fb(0x98)]=await new steps_creator_1[(_0x52a5fb(0xc7))]({'loggerDetails':this[_0x52a5fb(0xa4)],'loggerJobState':this[_0x52a5fb(0xaf)],'libraries':_0x5db8a9,'objectRules':_0x87be2d,'request':this[_0x52a5fb(0xa7)]})['create']();for(const _0xb98982 of this[_0x52a5fb(0x98)]){await _0xb98982[_0x52a5fb(0xc1)]();}}[a89_0x171e38(0xbe)](_0xdcfcad){const _0x2f429a=a89_0x171e38,_0x2ec031=[],_0x1d211a=[],_0x51daa7=[],_0x45955b=[];for(const _0x2ff21a in _0xdcfcad){const {isDisableProcessBuilder:_0x2b3980,isDisableTrigger:_0x244c97,isDisableValidationRule:_0x2466aa,isDisableWorkflow:_0xbab5ae}=_0xdcfcad[_0x2ff21a][_0x2f429a(0x94)];_0x2b3980&&_0x51daa7[_0x2f429a(0xc8)](_0x2ff21a),_0x244c97&&_0x2ec031[_0x2f429a(0xc8)](_0x2ff21a),_0x2466aa&&_0x45955b[_0x2f429a(0xc8)](_0x2ff21a),_0xbab5ae&&_0x1d211a['push'](_0x2ff21a);}return{'instance':this['_request'],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x2ec031,'workflowsObjects':_0x1d211a,'processBuilderObjects':_0x51daa7,'validationRulesObjects':_0x45955b};}async[a89_0x171e38(0xc5)](){const _0x491c13=a89_0x171e38;job_detail_1[_0x491c13(0xae)][_0x491c13(0x99)](_0x491c13(0x9a)),this[_0x491c13(0xa4)][_0x491c13(0x99)](_0x491c13(0x9a)),await this[_0x491c13(0x9c)][_0x491c13(0xa0)]();}async[a89_0x171e38(0xad)](){const _0x5e2811=a89_0x171e38;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x5e2811(0xae)][_0x5e2811(0x99)]('Enable\x20automation\x20process'),this[_0x5e2811(0xa4)]['log'](_0x5e2811(0xa9)),await this[_0x5e2811(0x9c)]['enable']()[_0x5e2811(0xd5)](_0x49f894=>{const _0x566e7f=_0x5e2811;this[_0x566e7f(0xc3)]=!![];throw _0x49f894;}));}async['getManifest'](){const _0x51e61f=a89_0x171e38,_0x2511b6=await(0x0,promises_1['readFile'])(path_1[_0x51e61f(0x8b)]['join'](job_detail_1[_0x51e61f(0xd7)],job_1[_0x51e61f(0x90)]),{'encoding':'utf-8'});return await(0x0,promises_1['rm'])(path_1['default'][_0x51e61f(0xb1)](job_detail_1[_0x51e61f(0xd7)],job_1[_0x51e61f(0x90)]),{'recursive':!![],'force':!![]}),JSON[_0x51e61f(0xba)](_0x2511b6)[_0x51e61f(0x8d)];}['saveSourceAutomationProcessesBackup'](_0x329220){const _0x1e107d=a89_0x171e38;return(0x0,promises_1['writeFile'])(path_1[_0x1e107d(0x8b)][_0x1e107d(0xb1)](job_detail_1[_0x1e107d(0xd7)],constants_1[_0x1e107d(0x91)]),Buffer['from'](_0x329220,_0x1e107d(0xb8)));}async['execute'](){const _0x1eb99a=a89_0x171e38;this[_0x1eb99a(0xd4)]=await this[_0x1eb99a(0x9e)]();const {objectRules:_0x18049a,credentials:_0x5af251}=this['_maskingManifest'];this[_0x1eb99a(0xa4)]=await new logger_details_1[(_0x1eb99a(0xd8))](job_detail_1['jobStorePath'],job_detail_1[_0x1eb99a(0xd0)])[_0x1eb99a(0xab)](),this[_0x1eb99a(0xaf)]=await new logger_job_state_1['LoggerJobState'](job_detail_1[_0x1eb99a(0xd7)],job_detail_1[_0x1eb99a(0xd0)])[_0x1eb99a(0xab)](Object[_0x1eb99a(0x8c)](_0x18049a));try{this[_0x1eb99a(0xaf)][_0x1eb99a(0xb6)](logger_enums_1[_0x1eb99a(0xbf)]['IN_PROGRESS']),this[_0x1eb99a(0xa7)]=await salesforce_1['AxiosInstanceUtils']['create'](new auth_manager_1[(_0x1eb99a(0x92))](_0x5af251),[],{'headers':{'Accept-Encoding':_0x1eb99a(0xc0)}}),await this[_0x1eb99a(0xc9)](),await this['disableAutomationProcess'](),await this[_0x1eb99a(0xd6)](),await this[_0x1eb99a(0xad)](),this[_0x1eb99a(0xaf)][_0x1eb99a(0xb6)](logger_enums_1[_0x1eb99a(0xbf)][_0x1eb99a(0xb9)]);}catch(_0xb2bec9){await this[_0x1eb99a(0xad)]()[_0x1eb99a(0xd5)](_0x45e0c0=>{const _0x1419a4=_0x1eb99a;job_detail_1[_0x1419a4(0xae)][_0x1419a4(0xbd)](_0x45e0c0['message']);}),this[_0x1eb99a(0xa4)]['exception'](_0xb2bec9[_0x1eb99a(0xaa)]),this[_0x1eb99a(0xaf)][_0x1eb99a(0xb6)](logger_enums_1[_0x1eb99a(0xbf)][_0x1eb99a(0xa8)]),this[_0x1eb99a(0xaf)][_0x1eb99a(0xa2)](_0xb2bec9[_0x1eb99a(0xaa)]),job_detail_1[_0x1eb99a(0xae)][_0x1eb99a(0xbd)](_0xb2bec9[_0x1eb99a(0xaa)]);}finally{this['_loggerDetails'][_0x1eb99a(0x99)]('Finish\x20Masking\x20Process'),job_detail_1['systemLogger'][_0x1eb99a(0x99)](_0x1eb99a(0xd2)),await this[_0x1eb99a(0xaf)]['kill'](),await this[_0x1eb99a(0xa4)][_0x1eb99a(0xce)]();}}}function a89_0x5077(){const _0x3c7a93=['Enable\x20automation\x20process','message','init','../../../constants/job','enableAutomationProcess','systemLogger','_loggerJobState','19929stmIYc','join','156xqDddm','exit','491155knTcMJ','ManagerAutomationProcess','setJobStatus','__esModule','base64','COMPLETED','parse','../constants','MaskingJob','error','getManagerAutomationProcessOptions','JobStatus','gzip','execute','search','_isEnableAutomationProcessError','11592891akcIlv','disableAutomationProcess','./classes/step/steps-creator','StepsCreator','push','initAutomationProcess','defineProperty','./enums/logger.enums','5wiOMFL','2758987FfUoTE','kill','./job-detail','jobId','10384216NxtGNc','Finish\x20Masking\x20Process','apply','_maskingManifest','catch','masking','jobStorePath','LoggerDetails','default','keys','details','./classes/logger/logger-job-state','toString','MANIFEST_FILENAME','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','AuthManager','constructor','disableAutomation','./classes/logger/logger-details','1294711qDAIjN','130IUXZdl','_steps','log','Disable\x20automation\x20process','__importDefault','_managerAutomationProcess','Start\x20Masking\x20Process','getManifest','(((.+)+)+)+$','disable','6TtvJVV','setJobError','path','_loggerDetails','@flosum/salesforce','4443924OuAgrO','_request','FAILED'];a89_0x5077=function(){return _0x3c7a93;};return a89_0x5077();}exports['MaskingJob']=MaskingJob,new MaskingJob()[a89_0x171e38(0xc1)]()['then'](()=>process['exit'](0x0))[a89_0x171e38(0xd5)](()=>process[a89_0x171e38(0xb3)](0x1));