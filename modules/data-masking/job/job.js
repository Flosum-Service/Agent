const a72_0x4ba080=a72_0x4af7;(function(_0xb7ad3e,_0x1763a1){const _0x5ca531=a72_0x4af7,_0x444520=_0xb7ad3e();while(!![]){try{const _0x5dcfb7=parseInt(_0x5ca531(0xcc))/0x1*(-parseInt(_0x5ca531(0xf1))/0x2)+-parseInt(_0x5ca531(0xb6))/0x3+parseInt(_0x5ca531(0xb1))/0x4+parseInt(_0x5ca531(0xc1))/0x5+-parseInt(_0x5ca531(0xee))/0x6*(parseInt(_0x5ca531(0xea))/0x7)+-parseInt(_0x5ca531(0xc8))/0x8+parseInt(_0x5ca531(0xe9))/0x9;if(_0x5dcfb7===_0x1763a1)break;else _0x444520['push'](_0x444520['shift']());}catch(_0x1e7fac){_0x444520['push'](_0x444520['shift']());}}}(a72_0xecee,0xd86f2));const a72_0x2f5a9a=(function(){let _0x1771fb=!![];return function(_0x33d5df,_0x2b458b){const _0x48c2be=_0x1771fb?function(){const _0x3d8e14=a72_0x4af7;if(_0x2b458b){const _0x3856bc=_0x2b458b[_0x3d8e14(0xc7)](_0x33d5df,arguments);return _0x2b458b=null,_0x3856bc;}}:function(){};return _0x1771fb=![],_0x48c2be;};}()),a72_0x28402d=a72_0x2f5a9a(this,function(){const _0x4066cf=a72_0x4af7;return a72_0x28402d[_0x4066cf(0xba)]()[_0x4066cf(0xe4)](_0x4066cf(0xd1))[_0x4066cf(0xba)]()['constructor'](a72_0x28402d)[_0x4066cf(0xe4)]('(((.+)+)+)+$');});a72_0x28402d();function a72_0x4af7(_0x2e9743,_0x3dd83c){const _0x8b5129=a72_0xecee();return a72_0x4af7=function(_0x28402d,_0x2f5a9a){_0x28402d=_0x28402d-0xb0;let _0xecee3=_0x8b5129[_0x28402d];return _0xecee3;},a72_0x4af7(_0x2e9743,_0x3dd83c);}'use strict';var __importDefault=this&&this[a72_0x4ba080(0xd8)]||function(_0x1620ac){const _0xa17c34=a72_0x4ba080;return _0x1620ac&&_0x1620ac[_0xa17c34(0xe7)]?_0x1620ac:{'default':_0x1620ac};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a72_0x4ba080(0xf8)]=void 0x0;const promises_1=require(a72_0x4ba080(0xd9)),salesforce_1=require('@flosum/salesforce'),steps_creator_1=require(a72_0x4ba080(0xca)),logger_enums_1=require(a72_0x4ba080(0xdc)),logger_details_1=require(a72_0x4ba080(0xbd)),logger_job_state_1=require(a72_0x4ba080(0xb2)),job_1=require(a72_0x4ba080(0xc2)),path_1=__importDefault(require(a72_0x4ba080(0xbb))),auth_manager_1=require(a72_0x4ba080(0xb8)),constants_1=require(a72_0x4ba080(0xb0)),job_detail_1=require(a72_0x4ba080(0xf6));function a72_0xecee(){const _0x5bb36b=['MaskingJob','Enable\x20automation\x20process','_managerAutomationProcess','../constants','909284ZnABCR','./classes/logger/logger-job-state','then','details','StepsCreator','4966524qwLSDT','setJobError','../../shared/managers/auth.manager','FAILED','toString','path','default','./classes/logger/logger-details','_isEnableAutomationProcessError','ManagerAutomationProcess','getManifest','8145305NEfriv','../../../constants/job','utf-8','jobStorePath','kill','LoggerDetails','apply','301128ZYDEeh','masking','./classes/step/steps-creator','AuthManager','76EVgXnp','_steps','disable','keys','MANIFEST_FILENAME','(((.+)+)+)+$','exit','saveSourceAutomationProcessesBackup','init','systemLogger','readFile','_loggerJobState','__importDefault','fs/promises','LoggerJobState','_maskingManifest','./enums/logger.enums','log','from','parse','push','disableAutomation','join','JobStatus','search','execute','Disable\x20automation\x20process','__esModule','enableAutomationProcess','29898531wUnbkI','574hPkBCQ','_loggerDetails','setJobStatus','initAutomationProcess','81126hyFtyu','error','message','39212eMRJMf','COMPLETED','disableAutomationProcess','_request','create','./job-detail','Finish\x20Masking\x20Process'];a72_0xecee=function(){return _0x5bb36b;};return a72_0xecee();}class MaskingJob{constructor(){const _0x4062c7=a72_0x4ba080;this[_0x4062c7(0xbe)]=![];}async[a72_0x4ba080(0xed)](){const _0x47faed=a72_0x4ba080,{objectRules:_0x163bb4}=this['_maskingManifest'];this[_0x47faed(0xfa)]=new salesforce_1[(_0x47faed(0xbf))](this['getManagerAutomationProcessOptions'](_0x163bb4));}async[a72_0x4ba080(0xc9)](){const _0x2209bc=a72_0x4ba080;job_detail_1[_0x2209bc(0xd5)][_0x2209bc(0xdd)]('Start\x20Masking\x20Process'),this[_0x2209bc(0xeb)]['log']('Start\x20Masking\x20Process');const {objectRules:_0x472889,libraries:_0x20e885}=this['_maskingManifest'];this[_0x2209bc(0xcd)]=await new steps_creator_1[(_0x2209bc(0xb5))]({'loggerDetails':this[_0x2209bc(0xeb)],'loggerJobState':this[_0x2209bc(0xd7)],'libraries':_0x20e885,'objectRules':_0x472889,'request':this[_0x2209bc(0xf4)]})[_0x2209bc(0xf5)]();for(const _0xff8489 of this[_0x2209bc(0xcd)]){await _0xff8489[_0x2209bc(0xe5)]();}}['getManagerAutomationProcessOptions'](_0x472f8a){const _0x44e88f=a72_0x4ba080,_0x26a151=[],_0x394c96=[],_0x46cbff=[],_0x2b96c3=[];for(const _0x4b0afd in _0x472f8a){const {isDisableProcessBuilder:_0x39fc2d,isDisableTrigger:_0x54cbed,isDisableValidationRule:_0x4c283f,isDisableWorkflow:_0x1983c9}=_0x472f8a[_0x4b0afd][_0x44e88f(0xe1)];_0x39fc2d&&_0x46cbff[_0x44e88f(0xe0)](_0x4b0afd),_0x54cbed&&_0x26a151[_0x44e88f(0xe0)](_0x4b0afd),_0x4c283f&&_0x2b96c3[_0x44e88f(0xe0)](_0x4b0afd),_0x1983c9&&_0x394c96[_0x44e88f(0xe0)](_0x4b0afd);}return{'instance':this['_request'],'saveSourceMetadataBackup':this[_0x44e88f(0xd3)],'triggersObjects':_0x26a151,'workflowsObjects':_0x394c96,'processBuilderObjects':_0x46cbff,'validationRulesObjects':_0x2b96c3};}async[a72_0x4ba080(0xf3)](){const _0x2d3cb5=a72_0x4ba080;job_detail_1['systemLogger']['log'](_0x2d3cb5(0xe6)),this[_0x2d3cb5(0xeb)][_0x2d3cb5(0xdd)](_0x2d3cb5(0xe6)),await this[_0x2d3cb5(0xfa)][_0x2d3cb5(0xce)]();}async[a72_0x4ba080(0xe8)](){const _0x201378=a72_0x4ba080;!this[_0x201378(0xbe)]&&(job_detail_1['systemLogger']['log'](_0x201378(0xf9)),this['_loggerDetails']['log'](_0x201378(0xf9)),await this['_managerAutomationProcess']['enable']()['catch'](_0x7e857d=>{const _0x1435e=_0x201378;this[_0x1435e(0xbe)]=!![];throw _0x7e857d;}));}async['getManifest'](){const _0x3a1543=a72_0x4ba080,_0x20fbc7=await(0x0,promises_1[_0x3a1543(0xd6)])(path_1['default']['join'](job_detail_1['jobStorePath'],job_1[_0x3a1543(0xd0)]),{'encoding':_0x3a1543(0xc3)});return await(0x0,promises_1['rm'])(path_1[_0x3a1543(0xbc)][_0x3a1543(0xe2)](job_detail_1['jobStorePath'],job_1[_0x3a1543(0xd0)]),{'recursive':!![],'force':!![]}),JSON[_0x3a1543(0xdf)](_0x20fbc7)[_0x3a1543(0xb4)];}[a72_0x4ba080(0xd3)](_0x53ca0f){const _0x196d3d=a72_0x4ba080;return(0x0,promises_1['writeFile'])(path_1[_0x196d3d(0xbc)][_0x196d3d(0xe2)](job_detail_1['jobStorePath'],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x196d3d(0xde)](_0x53ca0f,'base64'));}async[a72_0x4ba080(0xe5)](){const _0x50012c=a72_0x4ba080;this['_maskingManifest']=await this[_0x50012c(0xc0)]();const {objectRules:_0x37d3d6,credentials:_0x5243ed}=this[_0x50012c(0xdb)];this[_0x50012c(0xeb)]=await new logger_details_1[(_0x50012c(0xc6))](job_detail_1[_0x50012c(0xc4)],job_detail_1['jobId'])[_0x50012c(0xd4)](),this[_0x50012c(0xd7)]=await new logger_job_state_1[(_0x50012c(0xda))](job_detail_1[_0x50012c(0xc4)],job_detail_1['jobId'])[_0x50012c(0xd4)](Object[_0x50012c(0xcf)](_0x37d3d6));try{this[_0x50012c(0xd7)][_0x50012c(0xec)](logger_enums_1['JobStatus']['IN_PROGRESS']),this[_0x50012c(0xf4)]=await salesforce_1['AxiosInstanceUtils'][_0x50012c(0xf5)](new auth_manager_1[(_0x50012c(0xcb))](_0x5243ed),[],{'headers':{'Accept-Encoding':'gzip'}}),await this['initAutomationProcess'](),await this[_0x50012c(0xf3)](),await this['masking'](),await this[_0x50012c(0xe8)](),this[_0x50012c(0xd7)][_0x50012c(0xec)](logger_enums_1[_0x50012c(0xe3)][_0x50012c(0xf2)]);}catch(_0x42ea9c){await this[_0x50012c(0xe8)]()['catch'](_0xf8550f=>{const _0x3243e6=_0x50012c;job_detail_1[_0x3243e6(0xd5)][_0x3243e6(0xef)](_0xf8550f[_0x3243e6(0xf0)]);}),this[_0x50012c(0xeb)]['exception'](_0x42ea9c[_0x50012c(0xf0)]),this['_loggerJobState'][_0x50012c(0xec)](logger_enums_1[_0x50012c(0xe3)][_0x50012c(0xb9)]),this[_0x50012c(0xd7)][_0x50012c(0xb7)](_0x42ea9c[_0x50012c(0xf0)]),job_detail_1['systemLogger'][_0x50012c(0xef)](_0x42ea9c[_0x50012c(0xf0)]);}finally{this[_0x50012c(0xeb)][_0x50012c(0xdd)](_0x50012c(0xf7)),job_detail_1[_0x50012c(0xd5)]['log'](_0x50012c(0xf7)),await this[_0x50012c(0xd7)][_0x50012c(0xc5)](),await this[_0x50012c(0xeb)][_0x50012c(0xc5)]();}}}exports[a72_0x4ba080(0xf8)]=MaskingJob,new MaskingJob()[a72_0x4ba080(0xe5)]()[a72_0x4ba080(0xb3)](()=>process[a72_0x4ba080(0xd2)](0x0))['catch'](()=>process['exit'](0x1));