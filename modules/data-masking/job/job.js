const a73_0x347ce2=a73_0x296a;(function(_0x4947f1,_0xd2dd2f){const _0x39b3c2=a73_0x296a,_0x4bfa6b=_0x4947f1();while(!![]){try{const _0x2cea54=-parseInt(_0x39b3c2(0x119))/0x1*(-parseInt(_0x39b3c2(0x10d))/0x2)+parseInt(_0x39b3c2(0xec))/0x3+-parseInt(_0x39b3c2(0xdd))/0x4+-parseInt(_0x39b3c2(0xdf))/0x5*(-parseInt(_0x39b3c2(0xd0))/0x6)+parseInt(_0x39b3c2(0xf4))/0x7+parseInt(_0x39b3c2(0x103))/0x8+-parseInt(_0x39b3c2(0xd2))/0x9*(parseInt(_0x39b3c2(0x10a))/0xa);if(_0x2cea54===_0xd2dd2f)break;else _0x4bfa6b['push'](_0x4bfa6b['shift']());}catch(_0xcad6c0){_0x4bfa6b['push'](_0x4bfa6b['shift']());}}}(a73_0x2f23,0xa4a4c));const a73_0x1f0123=(function(){let _0x3a22ff=!![];return function(_0x403fb7,_0x53b561){const _0x5b7b00=_0x3a22ff?function(){const _0x2bcdb4=a73_0x296a;if(_0x53b561){const _0x43382d=_0x53b561[_0x2bcdb4(0xe2)](_0x403fb7,arguments);return _0x53b561=null,_0x43382d;}}:function(){};return _0x3a22ff=![],_0x5b7b00;};}()),a73_0x5e564b=a73_0x1f0123(this,function(){const _0x407da9=a73_0x296a;return a73_0x5e564b[_0x407da9(0xf8)]()[_0x407da9(0xfd)](_0x407da9(0xda))[_0x407da9(0xf8)]()[_0x407da9(0xf1)](a73_0x5e564b)[_0x407da9(0xfd)](_0x407da9(0xda));});a73_0x5e564b();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x238c2){const _0xb3bd52=a73_0x296a;return _0x238c2&&_0x238c2[_0xb3bd52(0x11d)]?_0x238c2:{'default':_0x238c2};};function a73_0x2f23(){const _0x47fb2b=['jobId','_loggerJobState','6384014NKlbMv','enableAutomationProcess','readFile','getManagerAutomationProcessOptions','toString','./job-detail','setJobError','push','Finish\x20Masking\x20Process','search','_maskingManifest','setJobStatus','path','ManagerAutomationProcess','join','8670176bOadGn','../constants','Start\x20Masking\x20Process','Enable\x20automation\x20process','@flosum/salesforce','_steps','from','14460690RWmdoy','./enums/logger.enums','details','2ygNvRC','getManifest','LoggerDetails','MaskingJob','saveSourceAutomationProcessesBackup','JobStatus','AxiosInstanceUtils','gzip','./classes/logger/logger-job-state','exit','utf-8','writeFile','922631xKqZtC','catch','exception','_loggerDetails','__esModule','_request','858kuZNWg','execute','18UgHkCi','IN_PROGRESS','./classes/logger/logger-details','LoggerJobState','jobStorePath','StepsCreator','masking','create','(((.+)+)+)+$','default','kill','2740888PlLhpX','disable','8575oPhSUS','_managerAutomationProcess','message','apply','base64','../../shared/managers/auth.manager','Disable\x20automation\x20process','disableAutomationProcess','initAutomationProcess','systemLogger','FAILED','then','_isEnableAutomationProcessError','3264270bnBsgc','log','error','init','fs/promises','constructor'];a73_0x2f23=function(){return _0x47fb2b;};return a73_0x2f23();}Object['defineProperty'](exports,a73_0x347ce2(0x11d),{'value':!![]}),exports[a73_0x347ce2(0x110)]=void 0x0;const promises_1=require(a73_0x347ce2(0xf0)),salesforce_1=require(a73_0x347ce2(0x107)),steps_creator_1=require('./classes/step/steps-creator'),logger_enums_1=require(a73_0x347ce2(0x10b)),logger_details_1=require(a73_0x347ce2(0xd4)),logger_job_state_1=require(a73_0x347ce2(0x115)),job_1=require('../../../constants/job'),path_1=__importDefault(require(a73_0x347ce2(0x100))),auth_manager_1=require(a73_0x347ce2(0xe4)),constants_1=require(a73_0x347ce2(0x104)),job_detail_1=require(a73_0x347ce2(0xf9));class MaskingJob{constructor(){const _0x33b131=a73_0x347ce2;this[_0x33b131(0xeb)]=![];}async[a73_0x347ce2(0xe7)](){const _0x176bca=a73_0x347ce2,{objectRules:_0x134031}=this[_0x176bca(0xfe)];this[_0x176bca(0xe0)]=new salesforce_1[(_0x176bca(0x101))](this[_0x176bca(0xf7)](_0x134031));}async[a73_0x347ce2(0xd8)](){const _0x3fc50f=a73_0x347ce2;job_detail_1[_0x3fc50f(0xe8)]['log'](_0x3fc50f(0x105)),this[_0x3fc50f(0x11c)][_0x3fc50f(0xed)](_0x3fc50f(0x105));const {objectRules:_0x569528,libraries:_0x366dd8}=this[_0x3fc50f(0xfe)];this['_steps']=await new steps_creator_1[(_0x3fc50f(0xd7))]({'loggerDetails':this[_0x3fc50f(0x11c)],'loggerJobState':this[_0x3fc50f(0xf3)],'libraries':_0x366dd8,'objectRules':_0x569528,'request':this[_0x3fc50f(0xcf)]})[_0x3fc50f(0xd9)]();for(const _0xdad1cd of this[_0x3fc50f(0x108)]){await _0xdad1cd[_0x3fc50f(0xd1)]();}}[a73_0x347ce2(0xf7)](_0x59dc83){const _0x96a6b9=a73_0x347ce2,_0x5dae02=[],_0x1bfb68=[],_0x24e49e=[],_0x124cdd=[];for(const _0x1b8ed0 in _0x59dc83){const {isDisableProcessBuilder:_0x57ff32,isDisableTrigger:_0x4c02a4,isDisableValidationRule:_0x36aa3b,isDisableWorkflow:_0x2f9c97}=_0x59dc83[_0x1b8ed0]['disableAutomation'];_0x57ff32&&_0x24e49e[_0x96a6b9(0xfb)](_0x1b8ed0),_0x4c02a4&&_0x5dae02[_0x96a6b9(0xfb)](_0x1b8ed0),_0x36aa3b&&_0x124cdd[_0x96a6b9(0xfb)](_0x1b8ed0),_0x2f9c97&&_0x1bfb68[_0x96a6b9(0xfb)](_0x1b8ed0);}return{'instance':this['_request'],'saveSourceMetadataBackup':this[_0x96a6b9(0x111)],'triggersObjects':_0x5dae02,'workflowsObjects':_0x1bfb68,'processBuilderObjects':_0x24e49e,'validationRulesObjects':_0x124cdd};}async['disableAutomationProcess'](){const _0x705aa=a73_0x347ce2;job_detail_1[_0x705aa(0xe8)]['log'](_0x705aa(0xe5)),this[_0x705aa(0x11c)]['log'](_0x705aa(0xe5)),await this['_managerAutomationProcess'][_0x705aa(0xde)]();}async[a73_0x347ce2(0xf5)](){const _0xecbe77=a73_0x347ce2;!this[_0xecbe77(0xeb)]&&(job_detail_1['systemLogger'][_0xecbe77(0xed)](_0xecbe77(0x106)),this['_loggerDetails'][_0xecbe77(0xed)](_0xecbe77(0x106)),await this[_0xecbe77(0xe0)]['enable']()[_0xecbe77(0x11a)](_0x1acb67=>{const _0x38cde7=_0xecbe77;this[_0x38cde7(0xeb)]=!![];throw _0x1acb67;}));}async['getManifest'](){const _0x248dc3=a73_0x347ce2,_0x39b20f=await(0x0,promises_1[_0x248dc3(0xf6)])(path_1[_0x248dc3(0xdb)][_0x248dc3(0x102)](job_detail_1[_0x248dc3(0xd6)],job_1['MANIFEST_FILENAME']),{'encoding':_0x248dc3(0x117)});return await(0x0,promises_1['rm'])(path_1['default'][_0x248dc3(0x102)](job_detail_1[_0x248dc3(0xd6)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON['parse'](_0x39b20f)[_0x248dc3(0x10c)];}['saveSourceAutomationProcessesBackup'](_0x3c8176){const _0x4cd04=a73_0x347ce2;return(0x0,promises_1[_0x4cd04(0x118)])(path_1[_0x4cd04(0xdb)][_0x4cd04(0x102)](job_detail_1['jobStorePath'],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x4cd04(0x109)](_0x3c8176,_0x4cd04(0xe3)));}async[a73_0x347ce2(0xd1)](){const _0xded4b1=a73_0x347ce2;this[_0xded4b1(0xfe)]=await this[_0xded4b1(0x10e)]();const {objectRules:_0x5938f3,credentials:_0x551fb1}=this[_0xded4b1(0xfe)];this[_0xded4b1(0x11c)]=await new logger_details_1[(_0xded4b1(0x10f))](job_detail_1[_0xded4b1(0xd6)],job_detail_1[_0xded4b1(0xf2)])[_0xded4b1(0xef)](),this[_0xded4b1(0xf3)]=await new logger_job_state_1[(_0xded4b1(0xd5))](job_detail_1[_0xded4b1(0xd6)],job_detail_1[_0xded4b1(0xf2)])[_0xded4b1(0xef)](Object['keys'](_0x5938f3));try{this[_0xded4b1(0xf3)]['setJobStatus'](logger_enums_1[_0xded4b1(0x112)][_0xded4b1(0xd3)]),this[_0xded4b1(0xcf)]=await salesforce_1[_0xded4b1(0x113)][_0xded4b1(0xd9)](new auth_manager_1['AuthManager'](_0x551fb1),[],{'headers':{'Accept-Encoding':_0xded4b1(0x114)}}),await this[_0xded4b1(0xe7)](),await this[_0xded4b1(0xe6)](),await this['masking'](),await this[_0xded4b1(0xf5)](),this[_0xded4b1(0xf3)][_0xded4b1(0xff)](logger_enums_1[_0xded4b1(0x112)]['COMPLETED']);}catch(_0x33446c){await this[_0xded4b1(0xf5)]()[_0xded4b1(0x11a)](_0x5874b5=>{const _0x50f05f=_0xded4b1;job_detail_1[_0x50f05f(0xe8)][_0x50f05f(0xee)](_0x5874b5[_0x50f05f(0xe1)]);}),this[_0xded4b1(0x11c)][_0xded4b1(0x11b)](_0x33446c['message']),this[_0xded4b1(0xf3)]['setJobStatus'](logger_enums_1[_0xded4b1(0x112)][_0xded4b1(0xe9)]),this[_0xded4b1(0xf3)][_0xded4b1(0xfa)](_0x33446c[_0xded4b1(0xe1)]),job_detail_1['systemLogger']['error'](_0x33446c[_0xded4b1(0xe1)]);}finally{this[_0xded4b1(0x11c)]['log'](_0xded4b1(0xfc)),job_detail_1[_0xded4b1(0xe8)][_0xded4b1(0xed)](_0xded4b1(0xfc)),await this[_0xded4b1(0xf3)][_0xded4b1(0xdc)](),await this[_0xded4b1(0x11c)][_0xded4b1(0xdc)]();}}}function a73_0x296a(_0xc715fa,_0x36b7be){const _0x10262e=a73_0x2f23();return a73_0x296a=function(_0x5e564b,_0x1f0123){_0x5e564b=_0x5e564b-0xcf;let _0x2f239f=_0x10262e[_0x5e564b];return _0x2f239f;},a73_0x296a(_0xc715fa,_0x36b7be);}exports['MaskingJob']=MaskingJob,new MaskingJob()['execute']()[a73_0x347ce2(0xea)](()=>process[a73_0x347ce2(0x116)](0x0))['catch'](()=>process['exit'](0x1));