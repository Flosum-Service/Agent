const a73_0x129d3b=a73_0x2e34;function a73_0x2e34(_0x11d524,_0x4c364d){const _0x2fd4a5=a73_0x3947();return a73_0x2e34=function(_0x2792b5,_0x100828){_0x2792b5=_0x2792b5-0x1d8;let _0x3947b8=_0x2fd4a5[_0x2792b5];return _0x3947b8;},a73_0x2e34(_0x11d524,_0x4c364d);}function a73_0x3947(){const _0x57a16f=['toString','286905tCSodO','Start\x20Masking\x20Process','./job-detail','readFile','exit','__importDefault','defineProperty','_managerAutomationProcess','_request','getManifest','create','_loggerDetails','MANIFEST_FILENAME','enable','50TthpUm','disableAutomation','error','ManagerAutomationProcess','../constants','push','_steps','_loggerJobState','join','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','base64','35BgYHfm','3016256erqBcU','(((.+)+)+)+$','Finish\x20Masking\x20Process','kill','StepsCreator','log','./classes/logger/logger-job-state','./enums/logger.enums','init','constructor','@flosum/salesforce','setJobStatus','Enable\x20automation\x20process','LoggerJobState','Disable\x20automation\x20process','1822aLcIme','IN_PROGRESS','1682XfncON','__esModule','_isEnableAutomationProcessError','search','JobStatus','../../../constants/job','getManagerAutomationProcessOptions','1398576xxaBpe','LoggerDetails','10660923inBjyN','catch','8MUFTDs','fs/promises','./classes/step/steps-creator','FAILED','jobId','setJobError','message','_maskingManifest','AxiosInstanceUtils','details','5842793nIdTch','gzip','disable','initAutomationProcess','from','AuthManager','jobStorePath','MaskingJob','systemLogger','then','default','execute','COMPLETED','932832KQmbLQ','parse','enableAutomationProcess','saveSourceAutomationProcessesBackup','exception','keys'];a73_0x3947=function(){return _0x57a16f;};return a73_0x3947();}(function(_0x46c0f4,_0x598bf1){const _0x4e3fae=a73_0x2e34,_0x37dfb2=_0x46c0f4();while(!![]){try{const _0x22c920=parseInt(_0x4e3fae(0x229))/0x1*(parseInt(_0x4e3fae(0x227))/0x2)+-parseInt(_0x4e3fae(0x1f7))/0x3+-parseInt(_0x4e3fae(0x218))/0x4+parseInt(_0x4e3fae(0x1fe))/0x5+-parseInt(_0x4e3fae(0x1dc))/0x6*(parseInt(_0x4e3fae(0x217))/0x7)+parseInt(_0x4e3fae(0x1e0))/0x8*(-parseInt(_0x4e3fae(0x1de))/0x9)+parseInt(_0x4e3fae(0x20c))/0xa*(parseInt(_0x4e3fae(0x1ea))/0xb);if(_0x22c920===_0x598bf1)break;else _0x37dfb2['push'](_0x37dfb2['shift']());}catch(_0x501b85){_0x37dfb2['push'](_0x37dfb2['shift']());}}}(a73_0x3947,0xcabff));const a73_0x100828=(function(){let _0x4229f7=!![];return function(_0x5f5c10,_0x192356){const _0x2572ed=_0x4229f7?function(){if(_0x192356){const _0x51ead2=_0x192356['apply'](_0x5f5c10,arguments);return _0x192356=null,_0x51ead2;}}:function(){};return _0x4229f7=![],_0x2572ed;};}()),a73_0x2792b5=a73_0x100828(this,function(){const _0x23d32f=a73_0x2e34;return a73_0x2792b5['toString']()['search'](_0x23d32f(0x219))[_0x23d32f(0x1fd)]()[_0x23d32f(0x221)](a73_0x2792b5)[_0x23d32f(0x1d8)]('(((.+)+)+)+$');});a73_0x2792b5();'use strict';var __importDefault=this&&this[a73_0x129d3b(0x203)]||function(_0x274916){const _0x934489=a73_0x129d3b;return _0x274916&&_0x274916[_0x934489(0x22a)]?_0x274916:{'default':_0x274916};};Object[a73_0x129d3b(0x204)](exports,a73_0x129d3b(0x22a),{'value':!![]}),exports[a73_0x129d3b(0x1f1)]=void 0x0;const promises_1=require(a73_0x129d3b(0x1e1)),salesforce_1=require(a73_0x129d3b(0x222)),steps_creator_1=require(a73_0x129d3b(0x1e2)),logger_enums_1=require(a73_0x129d3b(0x21f)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require(a73_0x129d3b(0x21e)),job_1=require(a73_0x129d3b(0x1da)),path_1=__importDefault(require('path')),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a73_0x129d3b(0x210)),job_detail_1=require(a73_0x129d3b(0x200));class MaskingJob{constructor(){const _0x429f14=a73_0x129d3b;this[_0x429f14(0x22b)]=![];}async['initAutomationProcess'](){const _0x3e2b44=a73_0x129d3b,{objectRules:_0x1786bb}=this[_0x3e2b44(0x1e7)];this[_0x3e2b44(0x205)]=new salesforce_1[(_0x3e2b44(0x20f))](this[_0x3e2b44(0x1db)](_0x1786bb));}async['masking'](){const _0x35b836=a73_0x129d3b;job_detail_1[_0x35b836(0x1f2)][_0x35b836(0x21d)](_0x35b836(0x1ff)),this['_loggerDetails']['log']('Start\x20Masking\x20Process');const {objectRules:_0x340e1f,libraries:_0x392b0e}=this[_0x35b836(0x1e7)];this['_steps']=await new steps_creator_1[(_0x35b836(0x21c))]({'loggerDetails':this[_0x35b836(0x209)],'loggerJobState':this['_loggerJobState'],'libraries':_0x392b0e,'objectRules':_0x340e1f,'request':this['_request']})[_0x35b836(0x208)]();for(const _0x25fca3 of this[_0x35b836(0x212)]){await _0x25fca3['execute']();}}[a73_0x129d3b(0x1db)](_0x5698bf){const _0x11396e=a73_0x129d3b,_0x30c27b=[],_0x4bca1e=[],_0xb1509d=[],_0x52ca8b=[];for(const _0xa51970 in _0x5698bf){const {isDisableProcessBuilder:_0xddcc8,isDisableTrigger:_0xa1cb0f,isDisableValidationRule:_0x376e36,isDisableWorkflow:_0x37f64f}=_0x5698bf[_0xa51970][_0x11396e(0x20d)];_0xddcc8&&_0xb1509d['push'](_0xa51970),_0xa1cb0f&&_0x30c27b[_0x11396e(0x211)](_0xa51970),_0x376e36&&_0x52ca8b[_0x11396e(0x211)](_0xa51970),_0x37f64f&&_0x4bca1e[_0x11396e(0x211)](_0xa51970);}return{'instance':this['_request'],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x30c27b,'workflowsObjects':_0x4bca1e,'processBuilderObjects':_0xb1509d,'validationRulesObjects':_0x52ca8b};}async['disableAutomationProcess'](){const _0x2c5598=a73_0x129d3b;job_detail_1[_0x2c5598(0x1f2)]['log'](_0x2c5598(0x226)),this[_0x2c5598(0x209)]['log'](_0x2c5598(0x226)),await this[_0x2c5598(0x205)][_0x2c5598(0x1ec)]();}async[a73_0x129d3b(0x1f9)](){const _0x1a8082=a73_0x129d3b;!this[_0x1a8082(0x22b)]&&(job_detail_1[_0x1a8082(0x1f2)]['log'](_0x1a8082(0x224)),this[_0x1a8082(0x209)]['log'](_0x1a8082(0x224)),await this[_0x1a8082(0x205)][_0x1a8082(0x20b)]()[_0x1a8082(0x1df)](_0x3b230f=>{const _0xe5413a=_0x1a8082;this[_0xe5413a(0x22b)]=!![];throw _0x3b230f;}));}async[a73_0x129d3b(0x207)](){const _0x113445=a73_0x129d3b,_0x1e9501=await(0x0,promises_1[_0x113445(0x201)])(path_1[_0x113445(0x1f4)][_0x113445(0x214)](job_detail_1[_0x113445(0x1f0)],job_1[_0x113445(0x20a)]),{'encoding':'utf-8'});return await(0x0,promises_1['rm'])(path_1[_0x113445(0x1f4)][_0x113445(0x214)](job_detail_1[_0x113445(0x1f0)],job_1[_0x113445(0x20a)]),{'recursive':!![],'force':!![]}),JSON[_0x113445(0x1f8)](_0x1e9501)[_0x113445(0x1e9)];}[a73_0x129d3b(0x1fa)](_0x2d2d3a){const _0x25f81b=a73_0x129d3b;return(0x0,promises_1['writeFile'])(path_1[_0x25f81b(0x1f4)]['join'](job_detail_1[_0x25f81b(0x1f0)],constants_1[_0x25f81b(0x215)]),Buffer[_0x25f81b(0x1ee)](_0x2d2d3a,_0x25f81b(0x216)));}async[a73_0x129d3b(0x1f5)](){const _0x5b8234=a73_0x129d3b;this[_0x5b8234(0x1e7)]=await this[_0x5b8234(0x207)]();const {objectRules:_0x49a2ad,credentials:_0x338f5c}=this[_0x5b8234(0x1e7)];this[_0x5b8234(0x209)]=await new logger_details_1[(_0x5b8234(0x1dd))](job_detail_1[_0x5b8234(0x1f0)],job_detail_1[_0x5b8234(0x1e4)])[_0x5b8234(0x220)](),this[_0x5b8234(0x213)]=await new logger_job_state_1[(_0x5b8234(0x225))](job_detail_1[_0x5b8234(0x1f0)],job_detail_1[_0x5b8234(0x1e4)])[_0x5b8234(0x220)](Object[_0x5b8234(0x1fc)](_0x49a2ad));try{this[_0x5b8234(0x213)][_0x5b8234(0x223)](logger_enums_1[_0x5b8234(0x1d9)][_0x5b8234(0x228)]),this[_0x5b8234(0x206)]=await salesforce_1[_0x5b8234(0x1e8)][_0x5b8234(0x208)](new auth_manager_1[(_0x5b8234(0x1ef))](_0x338f5c),[],{'headers':{'Accept-Encoding':_0x5b8234(0x1eb)}}),await this[_0x5b8234(0x1ed)](),await this['disableAutomationProcess'](),await this['masking'](),await this[_0x5b8234(0x1f9)](),this['_loggerJobState'][_0x5b8234(0x223)](logger_enums_1[_0x5b8234(0x1d9)][_0x5b8234(0x1f6)]);}catch(_0x383158){await this[_0x5b8234(0x1f9)]()[_0x5b8234(0x1df)](_0x20d0c6=>{const _0x1704cc=_0x5b8234;job_detail_1['systemLogger'][_0x1704cc(0x20e)](_0x20d0c6[_0x1704cc(0x1e6)]);}),this['_loggerDetails'][_0x5b8234(0x1fb)](_0x383158[_0x5b8234(0x1e6)]),this[_0x5b8234(0x213)][_0x5b8234(0x223)](logger_enums_1[_0x5b8234(0x1d9)][_0x5b8234(0x1e3)]),this[_0x5b8234(0x213)][_0x5b8234(0x1e5)](_0x383158[_0x5b8234(0x1e6)]),job_detail_1[_0x5b8234(0x1f2)][_0x5b8234(0x20e)](_0x383158[_0x5b8234(0x1e6)]);}finally{this[_0x5b8234(0x209)]['log'](_0x5b8234(0x21a)),job_detail_1[_0x5b8234(0x1f2)]['log'](_0x5b8234(0x21a)),await this[_0x5b8234(0x213)][_0x5b8234(0x21b)](),await this[_0x5b8234(0x209)][_0x5b8234(0x21b)]();}}}exports[a73_0x129d3b(0x1f1)]=MaskingJob,new MaskingJob()[a73_0x129d3b(0x1f5)]()[a73_0x129d3b(0x1f3)](()=>process[a73_0x129d3b(0x202)](0x0))[a73_0x129d3b(0x1df)](()=>process[a73_0x129d3b(0x202)](0x1));