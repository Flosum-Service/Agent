const a73_0x36e5fd=a73_0x4203;(function(_0x37a26e,_0x329a0f){const _0x4f2311=a73_0x4203,_0x234b64=_0x37a26e();while(!![]){try{const _0x4ea154=-parseInt(_0x4f2311(0xbe))/0x1+-parseInt(_0x4f2311(0xda))/0x2+parseInt(_0x4f2311(0xb2))/0x3+-parseInt(_0x4f2311(0xb6))/0x4+-parseInt(_0x4f2311(0x94))/0x5+-parseInt(_0x4f2311(0xcb))/0x6*(parseInt(_0x4f2311(0xcc))/0x7)+-parseInt(_0x4f2311(0xb8))/0x8*(-parseInt(_0x4f2311(0xd4))/0x9);if(_0x4ea154===_0x329a0f)break;else _0x234b64['push'](_0x234b64['shift']());}catch(_0x37848e){_0x234b64['push'](_0x234b64['shift']());}}}(a73_0x2d13,0x56067));function a73_0x4203(_0x2bc785,_0x178ed7){const _0x492d55=a73_0x2d13();return a73_0x4203=function(_0x471273,_0x150a5d){_0x471273=_0x471273-0x90;let _0x2d1369=_0x492d55[_0x471273];return _0x2d1369;},a73_0x4203(_0x2bc785,_0x178ed7);}const a73_0x150a5d=(function(){let _0xd730c9=!![];return function(_0xd4b945,_0x99a68e){const _0x30cf37=_0xd730c9?function(){const _0x2faf97=a73_0x4203;if(_0x99a68e){const _0x301f66=_0x99a68e[_0x2faf97(0xb0)](_0xd4b945,arguments);return _0x99a68e=null,_0x301f66;}}:function(){};return _0xd730c9=![],_0x30cf37;};}()),a73_0x471273=a73_0x150a5d(this,function(){const _0x3e546a=a73_0x4203;return a73_0x471273[_0x3e546a(0xb9)]()[_0x3e546a(0xa9)](_0x3e546a(0xb4))[_0x3e546a(0xb9)]()[_0x3e546a(0xab)](a73_0x471273)[_0x3e546a(0xa9)]('(((.+)+)+)+$');});a73_0x471273();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3daa3e){const _0x2e395d=a73_0x4203;return _0x3daa3e&&_0x3daa3e[_0x2e395d(0xcf)]?_0x3daa3e:{'default':_0x3daa3e};};Object[a73_0x36e5fd(0xd7)](exports,a73_0x36e5fd(0xcf),{'value':!![]}),exports[a73_0x36e5fd(0xd1)]=void 0x0;const promises_1=require(a73_0x36e5fd(0xd8)),salesforce_1=require(a73_0x36e5fd(0xa7)),steps_creator_1=require(a73_0x36e5fd(0xd2)),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require(a73_0x36e5fd(0x95)),logger_job_state_1=require(a73_0x36e5fd(0xc6)),job_1=require(a73_0x36e5fd(0x9a)),path_1=__importDefault(require('path')),auth_manager_1=require(a73_0x36e5fd(0xc1)),constants_1=require('../constants'),job_detail_1=require(a73_0x36e5fd(0xa5));function a73_0x2d13(){const _0x1d7db3=['enableAutomationProcess','MaskingJob','./classes/step/steps-creator','saveSourceAutomationProcessesBackup','84438flpyQg','message','setJobStatus','defineProperty','fs/promises','_isEnableAutomationProcessError','868836scvyWB','JobStatus','details','error','exit','init','AxiosInstanceUtils','COMPLETED','154410DZuJFU','./classes/logger/logger-details','then','AuthManager','writeFile','initAutomationProcess','../../../constants/job','disable','disableAutomationProcess','jobId','masking','catch','join','Disable\x20automation\x20process','push','systemLogger','Finish\x20Masking\x20Process','./job-detail','getManifest','@flosum/salesforce','utf-8','search','gzip','constructor','Enable\x20automation\x20process','jobStorePath','enable','LoggerDetails','apply','from','606003XxjZar','Start\x20Masking\x20Process','(((.+)+)+)+$','exception','1715144TKkjgx','_steps','1520jgeAdw','toString','setJobError','execute','_request','keys','335518GjbWXa','log','_loggerJobState','../../shared/managers/auth.manager','_maskingManifest','_loggerDetails','readFile','getManagerAutomationProcessOptions','./classes/logger/logger-job-state','_managerAutomationProcess','kill','ManagerAutomationProcess','create','36YKSlgN','469721CeSBlF','disableAutomation','MANIFEST_FILENAME','__esModule'];a73_0x2d13=function(){return _0x1d7db3;};return a73_0x2d13();}class MaskingJob{constructor(){const _0x337267=a73_0x36e5fd;this[_0x337267(0xd9)]=![];}async[a73_0x36e5fd(0x99)](){const _0x489657=a73_0x36e5fd,{objectRules:_0x56d383}=this[_0x489657(0xc2)];this[_0x489657(0xc7)]=new salesforce_1[(_0x489657(0xc9))](this[_0x489657(0xc5)](_0x56d383));}async[a73_0x36e5fd(0x9e)](){const _0x3761af=a73_0x36e5fd;job_detail_1[_0x3761af(0xa3)][_0x3761af(0xbf)](_0x3761af(0xb3)),this[_0x3761af(0xc3)][_0x3761af(0xbf)](_0x3761af(0xb3));const {objectRules:_0x4b3c72,libraries:_0x31ab9f}=this['_maskingManifest'];this[_0x3761af(0xb7)]=await new steps_creator_1['StepsCreator']({'loggerDetails':this[_0x3761af(0xc3)],'loggerJobState':this[_0x3761af(0xc0)],'libraries':_0x31ab9f,'objectRules':_0x4b3c72,'request':this['_request']})[_0x3761af(0xca)]();for(const _0x4fc148 of this[_0x3761af(0xb7)]){await _0x4fc148[_0x3761af(0xbb)]();}}[a73_0x36e5fd(0xc5)](_0x58ef2a){const _0x28baff=a73_0x36e5fd,_0x2f4622=[],_0x2a4952=[],_0x3d02c7=[],_0x6ee85b=[];for(const _0x3027d2 in _0x58ef2a){const {isDisableProcessBuilder:_0x224347,isDisableTrigger:_0x2362b6,isDisableValidationRule:_0x5c5516,isDisableWorkflow:_0x1e8d1a}=_0x58ef2a[_0x3027d2][_0x28baff(0xcd)];_0x224347&&_0x3d02c7[_0x28baff(0xa2)](_0x3027d2),_0x2362b6&&_0x2f4622[_0x28baff(0xa2)](_0x3027d2),_0x5c5516&&_0x6ee85b[_0x28baff(0xa2)](_0x3027d2),_0x1e8d1a&&_0x2a4952[_0x28baff(0xa2)](_0x3027d2);}return{'instance':this[_0x28baff(0xbc)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x2f4622,'workflowsObjects':_0x2a4952,'processBuilderObjects':_0x3d02c7,'validationRulesObjects':_0x6ee85b};}async[a73_0x36e5fd(0x9c)](){const _0xe82ea=a73_0x36e5fd;job_detail_1[_0xe82ea(0xa3)]['log'](_0xe82ea(0xa1)),this[_0xe82ea(0xc3)][_0xe82ea(0xbf)]('Disable\x20automation\x20process'),await this[_0xe82ea(0xc7)][_0xe82ea(0x9b)]();}async['enableAutomationProcess'](){const _0x3bafa9=a73_0x36e5fd;!this[_0x3bafa9(0xd9)]&&(job_detail_1['systemLogger']['log']('Enable\x20automation\x20process'),this[_0x3bafa9(0xc3)][_0x3bafa9(0xbf)](_0x3bafa9(0xac)),await this['_managerAutomationProcess'][_0x3bafa9(0xae)]()[_0x3bafa9(0x9f)](_0x145788=>{this['_isEnableAutomationProcessError']=!![];throw _0x145788;}));}async[a73_0x36e5fd(0xa6)](){const _0xb5b13d=a73_0x36e5fd,_0x8cbc90=await(0x0,promises_1[_0xb5b13d(0xc4)])(path_1['default'][_0xb5b13d(0xa0)](job_detail_1[_0xb5b13d(0xad)],job_1[_0xb5b13d(0xce)]),{'encoding':_0xb5b13d(0xa8)});return await(0x0,promises_1['rm'])(path_1['default']['join'](job_detail_1[_0xb5b13d(0xad)],job_1[_0xb5b13d(0xce)]),{'recursive':!![],'force':!![]}),JSON['parse'](_0x8cbc90)[_0xb5b13d(0xdc)];}[a73_0x36e5fd(0xd3)](_0x12a16e){const _0xc94a95=a73_0x36e5fd;return(0x0,promises_1[_0xc94a95(0x98)])(path_1['default'][_0xc94a95(0xa0)](job_detail_1[_0xc94a95(0xad)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0xc94a95(0xb1)](_0x12a16e,'base64'));}async[a73_0x36e5fd(0xbb)](){const _0x3a5ac7=a73_0x36e5fd;this[_0x3a5ac7(0xc2)]=await this[_0x3a5ac7(0xa6)]();const {objectRules:_0x6f31a2,credentials:_0x1c5972}=this[_0x3a5ac7(0xc2)];this[_0x3a5ac7(0xc3)]=await new logger_details_1[(_0x3a5ac7(0xaf))](job_detail_1['jobStorePath'],job_detail_1[_0x3a5ac7(0x9d)])[_0x3a5ac7(0x91)](),this['_loggerJobState']=await new logger_job_state_1['LoggerJobState'](job_detail_1[_0x3a5ac7(0xad)],job_detail_1[_0x3a5ac7(0x9d)])[_0x3a5ac7(0x91)](Object[_0x3a5ac7(0xbd)](_0x6f31a2));try{this['_loggerJobState']['setJobStatus'](logger_enums_1[_0x3a5ac7(0xdb)]['IN_PROGRESS']),this['_request']=await salesforce_1[_0x3a5ac7(0x92)][_0x3a5ac7(0xca)](new auth_manager_1[(_0x3a5ac7(0x97))](_0x1c5972),[],{'headers':{'Accept-Encoding':_0x3a5ac7(0xaa)}}),await this['initAutomationProcess'](),await this[_0x3a5ac7(0x9c)](),await this[_0x3a5ac7(0x9e)](),await this[_0x3a5ac7(0xd0)](),this[_0x3a5ac7(0xc0)][_0x3a5ac7(0xd6)](logger_enums_1[_0x3a5ac7(0xdb)][_0x3a5ac7(0x93)]);}catch(_0x90173f){await this[_0x3a5ac7(0xd0)]()[_0x3a5ac7(0x9f)](_0x20658e=>{const _0x539523=_0x3a5ac7;job_detail_1['systemLogger'][_0x539523(0xdd)](_0x20658e[_0x539523(0xd5)]);}),this[_0x3a5ac7(0xc3)][_0x3a5ac7(0xb5)](_0x90173f['message']),this[_0x3a5ac7(0xc0)][_0x3a5ac7(0xd6)](logger_enums_1[_0x3a5ac7(0xdb)]['FAILED']),this[_0x3a5ac7(0xc0)][_0x3a5ac7(0xba)](_0x90173f[_0x3a5ac7(0xd5)]),job_detail_1[_0x3a5ac7(0xa3)][_0x3a5ac7(0xdd)](_0x90173f[_0x3a5ac7(0xd5)]);}finally{this['_loggerDetails'][_0x3a5ac7(0xbf)](_0x3a5ac7(0xa4)),job_detail_1[_0x3a5ac7(0xa3)][_0x3a5ac7(0xbf)](_0x3a5ac7(0xa4)),await this[_0x3a5ac7(0xc0)]['kill'](),await this[_0x3a5ac7(0xc3)][_0x3a5ac7(0xc8)]();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()[a73_0x36e5fd(0xbb)]()[a73_0x36e5fd(0x96)](()=>process[a73_0x36e5fd(0x90)](0x0))[a73_0x36e5fd(0x9f)](()=>process[a73_0x36e5fd(0x90)](0x1));