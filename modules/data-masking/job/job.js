const a73_0x16d00f=a73_0x352d;function a73_0x352d(_0x2f0b22,_0x27294c){const _0x3267bb=a73_0x131f();return a73_0x352d=function(_0x451107,_0x27a830){_0x451107=_0x451107-0x172;let _0x131f01=_0x3267bb[_0x451107];return _0x131f01;},a73_0x352d(_0x2f0b22,_0x27294c);}(function(_0xc867a4,_0x62c903){const _0x3862a6=a73_0x352d,_0x2b62bc=_0xc867a4();while(!![]){try{const _0x14138a=-parseInt(_0x3862a6(0x191))/0x1+-parseInt(_0x3862a6(0x1a4))/0x2+parseInt(_0x3862a6(0x18b))/0x3+-parseInt(_0x3862a6(0x1ba))/0x4*(parseInt(_0x3862a6(0x1b3))/0x5)+-parseInt(_0x3862a6(0x1ae))/0x6+parseInt(_0x3862a6(0x1b4))/0x7+parseInt(_0x3862a6(0x180))/0x8;if(_0x14138a===_0x62c903)break;else _0x2b62bc['push'](_0x2b62bc['shift']());}catch(_0x52eb12){_0x2b62bc['push'](_0x2b62bc['shift']());}}}(a73_0x131f,0x1d11f));const a73_0x27a830=(function(){let _0x166e91=!![];return function(_0x28087a,_0x240d0b){const _0x5e4eb7=_0x166e91?function(){const _0x77df79=a73_0x352d;if(_0x240d0b){const _0x48209c=_0x240d0b[_0x77df79(0x17d)](_0x28087a,arguments);return _0x240d0b=null,_0x48209c;}}:function(){};return _0x166e91=![],_0x5e4eb7;};}()),a73_0x451107=a73_0x27a830(this,function(){const _0x3f5bb5=a73_0x352d;return a73_0x451107[_0x3f5bb5(0x17f)]()[_0x3f5bb5(0x1a3)](_0x3f5bb5(0x177))['toString']()[_0x3f5bb5(0x1ad)](a73_0x451107)[_0x3f5bb5(0x1a3)](_0x3f5bb5(0x177));});a73_0x451107();'use strict';var __importDefault=this&&this[a73_0x16d00f(0x17b)]||function(_0x1cc9b0){const _0x503ca2=a73_0x16d00f;return _0x1cc9b0&&_0x1cc9b0[_0x503ca2(0x1a9)]?_0x1cc9b0:{'default':_0x1cc9b0};};Object[a73_0x16d00f(0x181)](exports,a73_0x16d00f(0x1a9),{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a73_0x16d00f(0x196)),salesforce_1=require(a73_0x16d00f(0x17c)),steps_creator_1=require(a73_0x16d00f(0x1ab)),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require(a73_0x16d00f(0x19a)),logger_job_state_1=require(a73_0x16d00f(0x18c)),job_1=require('../../../constants/job'),path_1=__importDefault(require(a73_0x16d00f(0x1a7))),auth_manager_1=require(a73_0x16d00f(0x178)),constants_1=require('../constants'),job_detail_1=require('./job-detail');class MaskingJob{constructor(){const _0x5b8192=a73_0x16d00f;this[_0x5b8192(0x183)]=![];}async['initAutomationProcess'](){const _0x2eb990=a73_0x16d00f,{objectRules:_0x5d997c}=this[_0x2eb990(0x174)];this[_0x2eb990(0x1a8)]=new salesforce_1[(_0x2eb990(0x1b0))](this[_0x2eb990(0x19e)](_0x5d997c));}async['masking'](){const _0x33d803=a73_0x16d00f;job_detail_1[_0x33d803(0x1be)][_0x33d803(0x18f)](_0x33d803(0x192)),this[_0x33d803(0x17a)][_0x33d803(0x18f)](_0x33d803(0x192));const {objectRules:_0x4c7d30,libraries:_0x36067f}=this[_0x33d803(0x174)];this[_0x33d803(0x187)]=await new steps_creator_1[(_0x33d803(0x1ac))]({'loggerDetails':this[_0x33d803(0x17a)],'loggerJobState':this[_0x33d803(0x194)],'libraries':_0x36067f,'objectRules':_0x4c7d30,'request':this[_0x33d803(0x198)]})[_0x33d803(0x1b2)]();for(const _0x803deb of this['_steps']){await _0x803deb['execute']();}}[a73_0x16d00f(0x19e)](_0xf9fccb){const _0x1a507a=a73_0x16d00f,_0x539ac7=[],_0x44ab7e=[],_0x2be352=[],_0x14ce63=[];for(const _0x595b19 in _0xf9fccb){const {isDisableProcessBuilder:_0x182960,isDisableTrigger:_0x45f33c,isDisableValidationRule:_0x157c65,isDisableWorkflow:_0x50a0a9}=_0xf9fccb[_0x595b19]['disableAutomation'];_0x182960&&_0x2be352[_0x1a507a(0x1b5)](_0x595b19),_0x45f33c&&_0x539ac7[_0x1a507a(0x1b5)](_0x595b19),_0x157c65&&_0x14ce63[_0x1a507a(0x1b5)](_0x595b19),_0x50a0a9&&_0x44ab7e[_0x1a507a(0x1b5)](_0x595b19);}return{'instance':this['_request'],'saveSourceMetadataBackup':this[_0x1a507a(0x184)],'triggersObjects':_0x539ac7,'workflowsObjects':_0x44ab7e,'processBuilderObjects':_0x2be352,'validationRulesObjects':_0x14ce63};}async[a73_0x16d00f(0x179)](){const _0x515c61=a73_0x16d00f;job_detail_1['systemLogger']['log'](_0x515c61(0x1aa)),this[_0x515c61(0x17a)][_0x515c61(0x18f)]('Disable\x20automation\x20process'),await this[_0x515c61(0x1a8)][_0x515c61(0x190)]();}async['enableAutomationProcess'](){const _0x1974bc=a73_0x16d00f;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x1974bc(0x1be)][_0x1974bc(0x18f)](_0x1974bc(0x1a0)),this[_0x1974bc(0x17a)][_0x1974bc(0x18f)]('Enable\x20automation\x20process'),await this['_managerAutomationProcess'][_0x1974bc(0x1b9)]()[_0x1974bc(0x1a1)](_0x1cd5bb=>{const _0x1ce2b8=_0x1974bc;this[_0x1ce2b8(0x183)]=!![];throw _0x1cd5bb;}));}async[a73_0x16d00f(0x1a6)](){const _0xe67070=a73_0x16d00f,_0x3b43b5=await(0x0,promises_1[_0xe67070(0x193)])(path_1[_0xe67070(0x1b6)][_0xe67070(0x17e)](job_detail_1[_0xe67070(0x1b7)],job_1['MANIFEST_FILENAME']),{'encoding':_0xe67070(0x172)});return await(0x0,promises_1['rm'])(path_1['default'][_0xe67070(0x17e)](job_detail_1[_0xe67070(0x1b7)],job_1[_0xe67070(0x1bc)]),{'recursive':!![],'force':!![]}),JSON[_0xe67070(0x197)](_0x3b43b5)[_0xe67070(0x19d)];}['saveSourceAutomationProcessesBackup'](_0x291b7b){const _0x2bff26=a73_0x16d00f;return(0x0,promises_1[_0x2bff26(0x182)])(path_1[_0x2bff26(0x1b6)][_0x2bff26(0x17e)](job_detail_1[_0x2bff26(0x1b7)],constants_1[_0x2bff26(0x19f)]),Buffer['from'](_0x291b7b,_0x2bff26(0x1b1)));}async[a73_0x16d00f(0x1bb)](){const _0x442f69=a73_0x16d00f;this[_0x442f69(0x174)]=await this[_0x442f69(0x1a6)]();const {objectRules:_0x187493,credentials:_0x20266e}=this[_0x442f69(0x174)];this[_0x442f69(0x17a)]=await new logger_details_1[(_0x442f69(0x1b8))](job_detail_1[_0x442f69(0x1b7)],job_detail_1['jobId'])[_0x442f69(0x1bd)](),this[_0x442f69(0x194)]=await new logger_job_state_1['LoggerJobState'](job_detail_1[_0x442f69(0x1b7)],job_detail_1[_0x442f69(0x186)])[_0x442f69(0x1bd)](Object[_0x442f69(0x199)](_0x187493));try{this[_0x442f69(0x194)][_0x442f69(0x1a2)](logger_enums_1[_0x442f69(0x175)]['IN_PROGRESS']),this[_0x442f69(0x198)]=await salesforce_1[_0x442f69(0x1af)]['create'](new auth_manager_1[(_0x442f69(0x18d))](_0x20266e),[],{'headers':{'Accept-Encoding':_0x442f69(0x185)}}),await this[_0x442f69(0x1a5)](),await this[_0x442f69(0x179)](),await this['masking'](),await this[_0x442f69(0x195)](),this[_0x442f69(0x194)][_0x442f69(0x1a2)](logger_enums_1[_0x442f69(0x175)][_0x442f69(0x18a)]);}catch(_0x3031c3){await this[_0x442f69(0x195)]()[_0x442f69(0x1a1)](_0xb1c45b=>{const _0x2fc444=_0x442f69;job_detail_1[_0x2fc444(0x1be)][_0x2fc444(0x18e)](_0xb1c45b[_0x2fc444(0x19c)]);}),this[_0x442f69(0x17a)][_0x442f69(0x188)](_0x3031c3[_0x442f69(0x19c)]),this[_0x442f69(0x194)][_0x442f69(0x1a2)](logger_enums_1[_0x442f69(0x175)]['FAILED']),this[_0x442f69(0x194)]['setJobError'](_0x3031c3[_0x442f69(0x19c)]),job_detail_1[_0x442f69(0x1be)][_0x442f69(0x18e)](_0x3031c3['message']);}finally{this['_loggerDetails'][_0x442f69(0x18f)](_0x442f69(0x176)),job_detail_1[_0x442f69(0x1be)]['log'](_0x442f69(0x176)),await this[_0x442f69(0x194)]['kill'](),await this[_0x442f69(0x17a)]['kill']();}}}function a73_0x131f(){const _0x24c4dc=['Finish\x20Masking\x20Process','(((.+)+)+)+$','../../shared/managers/auth.manager','disableAutomationProcess','_loggerDetails','__importDefault','@flosum/salesforce','apply','join','toString','3491272xEkMQu','defineProperty','writeFile','_isEnableAutomationProcessError','saveSourceAutomationProcessesBackup','gzip','jobId','_steps','exception','then','COMPLETED','368559coYETG','./classes/logger/logger-job-state','AuthManager','error','log','disable','237401rzYIjm','Start\x20Masking\x20Process','readFile','_loggerJobState','enableAutomationProcess','fs/promises','parse','_request','keys','./classes/logger/logger-details','MaskingJob','message','details','getManagerAutomationProcessOptions','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','Enable\x20automation\x20process','catch','setJobStatus','search','178746iZAqgX','initAutomationProcess','getManifest','path','_managerAutomationProcess','__esModule','Disable\x20automation\x20process','./classes/step/steps-creator','StepsCreator','constructor','549546PfwYTP','AxiosInstanceUtils','ManagerAutomationProcess','base64','create','8205NcVXdm','513464qfQEUe','push','default','jobStorePath','LoggerDetails','enable','232tQRmbt','execute','MANIFEST_FILENAME','init','systemLogger','utf-8','exit','_maskingManifest','JobStatus'];a73_0x131f=function(){return _0x24c4dc;};return a73_0x131f();}exports[a73_0x16d00f(0x19b)]=MaskingJob,new MaskingJob()[a73_0x16d00f(0x1bb)]()[a73_0x16d00f(0x189)](()=>process['exit'](0x0))[a73_0x16d00f(0x1a1)](()=>process[a73_0x16d00f(0x173)](0x1));