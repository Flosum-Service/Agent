const a73_0x2c01fd=a73_0x4bca;(function(_0x330731,_0x1590dc){const _0x432ca5=a73_0x4bca,_0x4b93ea=_0x330731();while(!![]){try{const _0x6e975c=-parseInt(_0x432ca5(0xe1))/0x1+parseInt(_0x432ca5(0xd1))/0x2+parseInt(_0x432ca5(0x101))/0x3+parseInt(_0x432ca5(0xda))/0x4*(parseInt(_0x432ca5(0x109))/0x5)+-parseInt(_0x432ca5(0xf9))/0x6*(-parseInt(_0x432ca5(0xfd))/0x7)+parseInt(_0x432ca5(0xf0))/0x8+-parseInt(_0x432ca5(0x102))/0x9;if(_0x6e975c===_0x1590dc)break;else _0x4b93ea['push'](_0x4b93ea['shift']());}catch(_0x2f8e14){_0x4b93ea['push'](_0x4b93ea['shift']());}}}(a73_0xebca,0x586a2));const a73_0x2aad7b=(function(){let _0x5c3e20=!![];return function(_0x24675c,_0x437a66){const _0x1d0b11=_0x5c3e20?function(){const _0x12079f=a73_0x4bca;if(_0x437a66){const _0x1a8901=_0x437a66[_0x12079f(0x10b)](_0x24675c,arguments);return _0x437a66=null,_0x1a8901;}}:function(){};return _0x5c3e20=![],_0x1d0b11;};}()),a73_0x19befa=a73_0x2aad7b(this,function(){const _0x2cbe2b=a73_0x4bca;return a73_0x19befa[_0x2cbe2b(0x112)]()[_0x2cbe2b(0x105)]('(((.+)+)+)+$')[_0x2cbe2b(0x112)]()[_0x2cbe2b(0x10f)](a73_0x19befa)['search'](_0x2cbe2b(0xde));});a73_0x19befa();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2028b6){return _0x2028b6&&_0x2028b6['__esModule']?_0x2028b6:{'default':_0x2028b6};};function a73_0x4bca(_0x430b01,_0x484986){const _0x46d582=a73_0xebca();return a73_0x4bca=function(_0x19befa,_0x2aad7b){_0x19befa=_0x19befa-0xd1;let _0xebca07=_0x46d582[_0x19befa];return _0xebca07;},a73_0x4bca(_0x430b01,_0x484986);}Object[a73_0x2c01fd(0x103)](exports,a73_0x2c01fd(0x114),{'value':!![]}),exports[a73_0x2c01fd(0xe0)]=void 0x0;function a73_0xebca(){const _0x4e01ca=['./enums/logger.enums','@flosum/salesforce','_loggerDetails','Enable\x20automation\x20process','base64','exception','disableAutomationProcess','enable','57774GMBKen','FAILED','MANIFEST_FILENAME','execute','497PeTVVC','./classes/logger/logger-job-state','Finish\x20Masking\x20Process','_maskingManifest','1505487GCTNkO','15249132OhwMuh','defineProperty','Disable\x20automation\x20process','search','masking','join','AuthManager','5ftGhQL','LoggerDetails','apply','JobStatus','jobId','gzip','constructor','fs/promises','../../../constants/job','toString','init','__esModule','push','writeFile','./job-detail','default','enableAutomationProcess','readFile','Start\x20Masking\x20Process','573240UTXehD','log','create','setJobStatus','catch','jobStorePath','utf-8','message','path','2567788udwymW','from','saveSourceAutomationProcessesBackup','_steps','(((.+)+)+)+$','setJobError','MaskingJob','621453WMyUPJ','disable','./classes/logger/logger-details','COMPLETED','_isEnableAutomationProcessError','then','_request','StepsCreator','initAutomationProcess','keys','_loggerJobState','./classes/step/steps-creator','systemLogger','_managerAutomationProcess','exit','4511136xbXMTU'];a73_0xebca=function(){return _0x4e01ca;};return a73_0xebca();}const promises_1=require(a73_0x2c01fd(0x110)),salesforce_1=require(a73_0x2c01fd(0xf2)),steps_creator_1=require(a73_0x2c01fd(0xec)),logger_enums_1=require(a73_0x2c01fd(0xf1)),logger_details_1=require(a73_0x2c01fd(0xe3)),logger_job_state_1=require(a73_0x2c01fd(0xfe)),job_1=require(a73_0x2c01fd(0x111)),path_1=__importDefault(require(a73_0x2c01fd(0xd9))),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require('../constants'),job_detail_1=require(a73_0x2c01fd(0x117));class MaskingJob{constructor(){const _0x51e918=a73_0x2c01fd;this[_0x51e918(0xe5)]=![];}async[a73_0x2c01fd(0xe9)](){const _0x3cfe1e=a73_0x2c01fd,{objectRules:_0x2f0799}=this[_0x3cfe1e(0x100)];this[_0x3cfe1e(0xee)]=new salesforce_1['ManagerAutomationProcess'](this['getManagerAutomationProcessOptions'](_0x2f0799));}async[a73_0x2c01fd(0x106)](){const _0x4152ef=a73_0x2c01fd;job_detail_1['systemLogger']['log'](_0x4152ef(0x11b)),this[_0x4152ef(0xf3)][_0x4152ef(0xd2)](_0x4152ef(0x11b));const {objectRules:_0xe5d8f8,libraries:_0x345720}=this['_maskingManifest'];this[_0x4152ef(0xdd)]=await new steps_creator_1[(_0x4152ef(0xe8))]({'loggerDetails':this['_loggerDetails'],'loggerJobState':this[_0x4152ef(0xeb)],'libraries':_0x345720,'objectRules':_0xe5d8f8,'request':this[_0x4152ef(0xe7)]})[_0x4152ef(0xd3)]();for(const _0x354741 of this[_0x4152ef(0xdd)]){await _0x354741[_0x4152ef(0xfc)]();}}['getManagerAutomationProcessOptions'](_0x5f11ef){const _0x170b2a=a73_0x2c01fd,_0x237a47=[],_0x4c3d2b=[],_0x366dac=[],_0x1fb2fa=[];for(const _0x37bdb4 in _0x5f11ef){const {isDisableProcessBuilder:_0x11cbee,isDisableTrigger:_0x279d0a,isDisableValidationRule:_0x573047,isDisableWorkflow:_0x17624c}=_0x5f11ef[_0x37bdb4]['disableAutomation'];_0x11cbee&&_0x366dac[_0x170b2a(0x115)](_0x37bdb4),_0x279d0a&&_0x237a47[_0x170b2a(0x115)](_0x37bdb4),_0x573047&&_0x1fb2fa[_0x170b2a(0x115)](_0x37bdb4),_0x17624c&&_0x4c3d2b['push'](_0x37bdb4);}return{'instance':this[_0x170b2a(0xe7)],'saveSourceMetadataBackup':this[_0x170b2a(0xdc)],'triggersObjects':_0x237a47,'workflowsObjects':_0x4c3d2b,'processBuilderObjects':_0x366dac,'validationRulesObjects':_0x1fb2fa};}async[a73_0x2c01fd(0xf7)](){const _0xe757e3=a73_0x2c01fd;job_detail_1['systemLogger']['log'](_0xe757e3(0x104)),this['_loggerDetails'][_0xe757e3(0xd2)]('Disable\x20automation\x20process'),await this['_managerAutomationProcess'][_0xe757e3(0xe2)]();}async[a73_0x2c01fd(0x119)](){const _0x4543fb=a73_0x2c01fd;!this[_0x4543fb(0xe5)]&&(job_detail_1['systemLogger']['log'](_0x4543fb(0xf4)),this[_0x4543fb(0xf3)][_0x4543fb(0xd2)](_0x4543fb(0xf4)),await this[_0x4543fb(0xee)][_0x4543fb(0xf8)]()[_0x4543fb(0xd5)](_0x84d500=>{const _0x5afc6b=_0x4543fb;this[_0x5afc6b(0xe5)]=!![];throw _0x84d500;}));}async['getManifest'](){const _0x12c953=a73_0x2c01fd,_0x4a1cd6=await(0x0,promises_1[_0x12c953(0x11a)])(path_1[_0x12c953(0x118)][_0x12c953(0x107)](job_detail_1[_0x12c953(0xd6)],job_1[_0x12c953(0xfb)]),{'encoding':_0x12c953(0xd7)});return await(0x0,promises_1['rm'])(path_1[_0x12c953(0x118)][_0x12c953(0x107)](job_detail_1[_0x12c953(0xd6)],job_1[_0x12c953(0xfb)]),{'recursive':!![],'force':!![]}),JSON['parse'](_0x4a1cd6)['details'];}[a73_0x2c01fd(0xdc)](_0x302b65){const _0x30642e=a73_0x2c01fd;return(0x0,promises_1[_0x30642e(0x116)])(path_1[_0x30642e(0x118)][_0x30642e(0x107)](job_detail_1[_0x30642e(0xd6)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x30642e(0xdb)](_0x302b65,_0x30642e(0xf5)));}async[a73_0x2c01fd(0xfc)](){const _0x39428f=a73_0x2c01fd;this[_0x39428f(0x100)]=await this['getManifest']();const {objectRules:_0x10e450,credentials:_0x50863d}=this[_0x39428f(0x100)];this[_0x39428f(0xf3)]=await new logger_details_1[(_0x39428f(0x10a))](job_detail_1[_0x39428f(0xd6)],job_detail_1[_0x39428f(0x10d)])[_0x39428f(0x113)](),this[_0x39428f(0xeb)]=await new logger_job_state_1['LoggerJobState'](job_detail_1[_0x39428f(0xd6)],job_detail_1[_0x39428f(0x10d)])[_0x39428f(0x113)](Object[_0x39428f(0xea)](_0x10e450));try{this[_0x39428f(0xeb)][_0x39428f(0xd4)](logger_enums_1[_0x39428f(0x10c)]['IN_PROGRESS']),this[_0x39428f(0xe7)]=await salesforce_1['AxiosInstanceUtils'][_0x39428f(0xd3)](new auth_manager_1[(_0x39428f(0x108))](_0x50863d),[],{'headers':{'Accept-Encoding':_0x39428f(0x10e)}}),await this['initAutomationProcess'](),await this[_0x39428f(0xf7)](),await this[_0x39428f(0x106)](),await this['enableAutomationProcess'](),this[_0x39428f(0xeb)][_0x39428f(0xd4)](logger_enums_1[_0x39428f(0x10c)][_0x39428f(0xe4)]);}catch(_0x260fcd){await this[_0x39428f(0x119)]()[_0x39428f(0xd5)](_0x5c6372=>{const _0x1001dc=_0x39428f;job_detail_1[_0x1001dc(0xed)]['error'](_0x5c6372['message']);}),this['_loggerDetails'][_0x39428f(0xf6)](_0x260fcd[_0x39428f(0xd8)]),this[_0x39428f(0xeb)][_0x39428f(0xd4)](logger_enums_1['JobStatus'][_0x39428f(0xfa)]),this['_loggerJobState'][_0x39428f(0xdf)](_0x260fcd[_0x39428f(0xd8)]),job_detail_1[_0x39428f(0xed)]['error'](_0x260fcd[_0x39428f(0xd8)]);}finally{this[_0x39428f(0xf3)][_0x39428f(0xd2)](_0x39428f(0xff)),job_detail_1[_0x39428f(0xed)][_0x39428f(0xd2)](_0x39428f(0xff)),await this[_0x39428f(0xeb)]['kill'](),await this[_0x39428f(0xf3)]['kill']();}}}exports[a73_0x2c01fd(0xe0)]=MaskingJob,new MaskingJob()[a73_0x2c01fd(0xfc)]()[a73_0x2c01fd(0xe6)](()=>process[a73_0x2c01fd(0xef)](0x0))[a73_0x2c01fd(0xd5)](()=>process[a73_0x2c01fd(0xef)](0x1));