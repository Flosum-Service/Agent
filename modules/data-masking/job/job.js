const a72_0x50a9af=a72_0x79e5;(function(_0x2cea78,_0x3864fa){const _0xd730d9=a72_0x79e5,_0x3812d0=_0x2cea78();while(!![]){try{const _0x5e6bc4=parseInt(_0xd730d9(0x95))/0x1+-parseInt(_0xd730d9(0xa2))/0x2*(parseInt(_0xd730d9(0x99))/0x3)+-parseInt(_0xd730d9(0xc1))/0x4+parseInt(_0xd730d9(0x9a))/0x5+parseInt(_0xd730d9(0xb2))/0x6+-parseInt(_0xd730d9(0x8f))/0x7*(-parseInt(_0xd730d9(0xcc))/0x8)+-parseInt(_0xd730d9(0xca))/0x9*(parseInt(_0xd730d9(0xb0))/0xa);if(_0x5e6bc4===_0x3864fa)break;else _0x3812d0['push'](_0x3812d0['shift']());}catch(_0x369c10){_0x3812d0['push'](_0x3812d0['shift']());}}}(a72_0x29d4,0x681c8));const a72_0xe6640c=(function(){let _0x280dd7=!![];return function(_0x489a34,_0x542bae){const _0x54d143=_0x280dd7?function(){const _0x440a98=a72_0x79e5;if(_0x542bae){const _0x17a27d=_0x542bae[_0x440a98(0xaa)](_0x489a34,arguments);return _0x542bae=null,_0x17a27d;}}:function(){};return _0x280dd7=![],_0x54d143;};}()),a72_0x3dfdff=a72_0xe6640c(this,function(){const _0x2a1011=a72_0x79e5;return a72_0x3dfdff[_0x2a1011(0xa8)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a72_0x3dfdff)[_0x2a1011(0x9d)]('(((.+)+)+)+$');});a72_0x3dfdff();function a72_0x79e5(_0x2918ae,_0x3e1a2f){const _0x39a2b9=a72_0x29d4();return a72_0x79e5=function(_0x3dfdff,_0xe6640c){_0x3dfdff=_0x3dfdff-0x83;let _0x29d457=_0x39a2b9[_0x3dfdff];return _0x29d457;},a72_0x79e5(_0x2918ae,_0x3e1a2f);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x222384){const _0xcac526=a72_0x79e5;return _0x222384&&_0x222384[_0xcac526(0x84)]?_0x222384:{'default':_0x222384};};Object['defineProperty'](exports,a72_0x50a9af(0x84),{'value':!![]}),exports[a72_0x50a9af(0xa5)]=void 0x0;const promises_1=require(a72_0x50a9af(0xa3)),salesforce_1=require(a72_0x50a9af(0xbb)),steps_creator_1=require('./classes/step/steps-creator'),logger_enums_1=require(a72_0x50a9af(0xa9)),logger_details_1=require(a72_0x50a9af(0x89)),logger_job_state_1=require(a72_0x50a9af(0xc0)),job_1=require('../../../constants/job'),path_1=__importDefault(require(a72_0x50a9af(0xb8))),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require('../constants'),job_detail_1=require('./job-detail');function a72_0x29d4(){const _0x4c6ee8=['jobStorePath','639256VtiJLl','systemLogger','__esModule','JobStatus','StepsCreator','getManagerAutomationProcessOptions','message','./classes/logger/logger-details','execute','default','IN_PROGRESS','_isEnableAutomationProcessError','setJobError','35RGlJYu','Finish\x20Masking\x20Process','initAutomationProcess','Start\x20Masking\x20Process','from','base64','737760aapKNv','exit','COMPLETED','MANIFEST_FILENAME','3DmjlUG','2020575LCwBoA','details','enableAutomationProcess','search','disableAutomation','writeFile','AxiosInstanceUtils','FAILED','1080392iqzBfS','fs/promises','error','MaskingJob','utf-8','Enable\x20automation\x20process','toString','./enums/logger.enums','apply','_loggerJobState','catch','saveSourceAutomationProcessesBackup','_steps','log','99780XkiOWw','init','4747308cUVTTE','join','then','gzip','AuthManager','keys','path','masking','Disable\x20automation\x20process','@flosum/salesforce','setJobStatus','create','_maskingManifest','ManagerAutomationProcess','./classes/logger/logger-job-state','2710040OAnQfT','jobId','LoggerJobState','push','LoggerDetails','parse','_request','disable','_loggerDetails','621eeMOwO'];a72_0x29d4=function(){return _0x4c6ee8;};return a72_0x29d4();}class MaskingJob{constructor(){const _0x4a0bea=a72_0x50a9af;this[_0x4a0bea(0x8d)]=![];}async[a72_0x50a9af(0x91)](){const _0x3cbd6c=a72_0x50a9af,{objectRules:_0x16e42d}=this['_maskingManifest'];this['_managerAutomationProcess']=new salesforce_1[(_0x3cbd6c(0xbf))](this[_0x3cbd6c(0x87)](_0x16e42d));}async[a72_0x50a9af(0xb9)](){const _0x1846c0=a72_0x50a9af;job_detail_1[_0x1846c0(0x83)]['log']('Start\x20Masking\x20Process'),this[_0x1846c0(0xc9)]['log'](_0x1846c0(0x92));const {objectRules:_0x1af229,libraries:_0x1f0302}=this[_0x1846c0(0xbe)];this[_0x1846c0(0xae)]=await new steps_creator_1[(_0x1846c0(0x86))]({'loggerDetails':this[_0x1846c0(0xc9)],'loggerJobState':this[_0x1846c0(0xab)],'libraries':_0x1f0302,'objectRules':_0x1af229,'request':this[_0x1846c0(0xc7)]})[_0x1846c0(0xbd)]();for(const _0x49d812 of this[_0x1846c0(0xae)]){await _0x49d812[_0x1846c0(0x8a)]();}}[a72_0x50a9af(0x87)](_0x398f50){const _0x35af1d=a72_0x50a9af,_0x3efbd1=[],_0x5a71fb=[],_0x369b46=[],_0x201567=[];for(const _0x465c80 in _0x398f50){const {isDisableProcessBuilder:_0x1a85b0,isDisableTrigger:_0x21e7ef,isDisableValidationRule:_0x1c62ea,isDisableWorkflow:_0x2b4f73}=_0x398f50[_0x465c80][_0x35af1d(0x9e)];_0x1a85b0&&_0x369b46[_0x35af1d(0xc4)](_0x465c80),_0x21e7ef&&_0x3efbd1['push'](_0x465c80),_0x1c62ea&&_0x201567[_0x35af1d(0xc4)](_0x465c80),_0x2b4f73&&_0x5a71fb[_0x35af1d(0xc4)](_0x465c80);}return{'instance':this['_request'],'saveSourceMetadataBackup':this[_0x35af1d(0xad)],'triggersObjects':_0x3efbd1,'workflowsObjects':_0x5a71fb,'processBuilderObjects':_0x369b46,'validationRulesObjects':_0x201567};}async['disableAutomationProcess'](){const _0x1305f4=a72_0x50a9af;job_detail_1[_0x1305f4(0x83)][_0x1305f4(0xaf)](_0x1305f4(0xba)),this['_loggerDetails'][_0x1305f4(0xaf)](_0x1305f4(0xba)),await this['_managerAutomationProcess'][_0x1305f4(0xc8)]();}async['enableAutomationProcess'](){const _0x424305=a72_0x50a9af;!this[_0x424305(0x8d)]&&(job_detail_1[_0x424305(0x83)]['log'](_0x424305(0xa7)),this['_loggerDetails'][_0x424305(0xaf)](_0x424305(0xa7)),await this['_managerAutomationProcess']['enable']()['catch'](_0x279823=>{const _0x4807c6=_0x424305;this[_0x4807c6(0x8d)]=!![];throw _0x279823;}));}async['getManifest'](){const _0x103440=a72_0x50a9af,_0x2ae82c=await(0x0,promises_1['readFile'])(path_1[_0x103440(0x8b)][_0x103440(0xb3)](job_detail_1[_0x103440(0xcb)],job_1[_0x103440(0x98)]),{'encoding':_0x103440(0xa6)});return await(0x0,promises_1['rm'])(path_1[_0x103440(0x8b)][_0x103440(0xb3)](job_detail_1[_0x103440(0xcb)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON[_0x103440(0xc6)](_0x2ae82c)[_0x103440(0x9b)];}[a72_0x50a9af(0xad)](_0x257a0e){const _0x1d62d7=a72_0x50a9af;return(0x0,promises_1[_0x1d62d7(0x9f)])(path_1[_0x1d62d7(0x8b)][_0x1d62d7(0xb3)](job_detail_1['jobStorePath'],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x1d62d7(0x93)](_0x257a0e,_0x1d62d7(0x94)));}async[a72_0x50a9af(0x8a)](){const _0x17426e=a72_0x50a9af;this[_0x17426e(0xbe)]=await this['getManifest']();const {objectRules:_0x2b7652,credentials:_0x168f8c}=this[_0x17426e(0xbe)];this[_0x17426e(0xc9)]=await new logger_details_1[(_0x17426e(0xc5))](job_detail_1[_0x17426e(0xcb)],job_detail_1[_0x17426e(0xc2)])['init'](),this[_0x17426e(0xab)]=await new logger_job_state_1[(_0x17426e(0xc3))](job_detail_1['jobStorePath'],job_detail_1[_0x17426e(0xc2)])[_0x17426e(0xb1)](Object[_0x17426e(0xb7)](_0x2b7652));try{this[_0x17426e(0xab)][_0x17426e(0xbc)](logger_enums_1[_0x17426e(0x85)][_0x17426e(0x8c)]),this[_0x17426e(0xc7)]=await salesforce_1[_0x17426e(0xa0)][_0x17426e(0xbd)](new auth_manager_1[(_0x17426e(0xb6))](_0x168f8c),[],{'headers':{'Accept-Encoding':_0x17426e(0xb5)}}),await this[_0x17426e(0x91)](),await this['disableAutomationProcess'](),await this[_0x17426e(0xb9)](),await this[_0x17426e(0x9c)](),this[_0x17426e(0xab)][_0x17426e(0xbc)](logger_enums_1[_0x17426e(0x85)][_0x17426e(0x97)]);}catch(_0x1abbe6){await this['enableAutomationProcess']()[_0x17426e(0xac)](_0x1cdf55=>{const _0x598727=_0x17426e;job_detail_1[_0x598727(0x83)]['error'](_0x1cdf55[_0x598727(0x88)]);}),this['_loggerDetails']['exception'](_0x1abbe6[_0x17426e(0x88)]),this['_loggerJobState'][_0x17426e(0xbc)](logger_enums_1[_0x17426e(0x85)][_0x17426e(0xa1)]),this[_0x17426e(0xab)][_0x17426e(0x8e)](_0x1abbe6['message']),job_detail_1[_0x17426e(0x83)][_0x17426e(0xa4)](_0x1abbe6[_0x17426e(0x88)]);}finally{this[_0x17426e(0xc9)]['log'](_0x17426e(0x90)),job_detail_1[_0x17426e(0x83)][_0x17426e(0xaf)](_0x17426e(0x90)),await this['_loggerJobState']['kill'](),await this[_0x17426e(0xc9)]['kill']();}}}exports[a72_0x50a9af(0xa5)]=MaskingJob,new MaskingJob()['execute']()[a72_0x50a9af(0xb4)](()=>process[a72_0x50a9af(0x96)](0x0))[a72_0x50a9af(0xac)](()=>process['exit'](0x1));