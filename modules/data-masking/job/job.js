function a91_0x5243(_0x34607,_0x33d495){const _0x188695=a91_0x12d0();return a91_0x5243=function(_0x30abf1,_0x56bc61){_0x30abf1=_0x30abf1-0x114;let _0x12d029=_0x188695[_0x30abf1];return _0x12d029;},a91_0x5243(_0x34607,_0x33d495);}const a91_0x19318b=a91_0x5243;(function(_0x29da2a,_0x4a3a3b){const _0x30e56e=a91_0x5243,_0x26273e=_0x29da2a();while(!![]){try{const _0x39f94d=parseInt(_0x30e56e(0x14b))/0x1*(-parseInt(_0x30e56e(0x144))/0x2)+parseInt(_0x30e56e(0x115))/0x3+parseInt(_0x30e56e(0x135))/0x4+-parseInt(_0x30e56e(0x128))/0x5+parseInt(_0x30e56e(0x14a))/0x6+parseInt(_0x30e56e(0x131))/0x7*(-parseInt(_0x30e56e(0x155))/0x8)+parseInt(_0x30e56e(0x125))/0x9;if(_0x39f94d===_0x4a3a3b)break;else _0x26273e['push'](_0x26273e['shift']());}catch(_0x965e2d){_0x26273e['push'](_0x26273e['shift']());}}}(a91_0x12d0,0x4aa36));const a91_0x56bc61=(function(){let _0xf29dfe=!![];return function(_0xf0b8fc,_0x26a9fa){const _0x3dee90=_0xf29dfe?function(){const _0x87a550=a91_0x5243;if(_0x26a9fa){const _0x12c085=_0x26a9fa[_0x87a550(0x145)](_0xf0b8fc,arguments);return _0x26a9fa=null,_0x12c085;}}:function(){};return _0xf29dfe=![],_0x3dee90;};}()),a91_0x30abf1=a91_0x56bc61(this,function(){const _0x3e014d=a91_0x5243;return a91_0x30abf1[_0x3e014d(0x15b)]()['search'](_0x3e014d(0x11d))[_0x3e014d(0x15b)]()[_0x3e014d(0x11f)](a91_0x30abf1)[_0x3e014d(0x12c)](_0x3e014d(0x11d));});a91_0x30abf1();'use strict';function a91_0x12d0(){const _0xde485c=['disableAutomationProcess','2532208FZatlk','keys','@flosum/salesforce','setJobStatus','81256IxiZQA','details','setJobError','AuthManager','message','catch','../constants','parse','_isEnableAutomationProcessError','Finish\x20Masking\x20Process','__importDefault','path','COMPLETED','init','LoggerJobState','2TvrebU','apply','initAutomationProcess','../../shared/managers/auth.manager','./classes/step/steps-creator','JobStatus','321690kmjMRx','233306NitNjs','_loggerJobState','_managerAutomationProcess','enable','_steps','saveSourceAutomationProcessesBackup','error','readFile','exception','utf-8','8MVihzf','_maskingManifest','LoggerDetails','default','log','disableAutomation','toString','execute','Enable\x20automation\x20process','_request','../../../constants/job','enableAutomationProcess','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','jobStorePath','masking','689094jjUpBU','fs/promises','exit','AxiosInstanceUtils','defineProperty','join','kill','MaskingJob','(((.+)+)+)+$','__esModule','constructor','Disable\x20automation\x20process','then','StepsCreator','create','getManifest','10632429QcYNfU','_loggerDetails','gzip','2921200UrnhLn','jobId','getManagerAutomationProcessOptions','IN_PROGRESS','search','systemLogger','push','Start\x20Masking\x20Process'];a91_0x12d0=function(){return _0xde485c;};return a91_0x12d0();}var __importDefault=this&&this[a91_0x19318b(0x13f)]||function(_0x1bb879){const _0x2daa9d=a91_0x19318b;return _0x1bb879&&_0x1bb879[_0x2daa9d(0x11e)]?_0x1bb879:{'default':_0x1bb879};};Object[a91_0x19318b(0x119)](exports,a91_0x19318b(0x11e),{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a91_0x19318b(0x116)),salesforce_1=require(a91_0x19318b(0x133)),steps_creator_1=require(a91_0x19318b(0x148)),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require(a91_0x19318b(0x15f)),path_1=__importDefault(require(a91_0x19318b(0x140))),auth_manager_1=require(a91_0x19318b(0x147)),constants_1=require(a91_0x19318b(0x13b)),job_detail_1=require('./job-detail');class MaskingJob{constructor(){const _0x1a7e97=a91_0x19318b;this[_0x1a7e97(0x13d)]=![];}async['initAutomationProcess'](){const _0x1db5c0=a91_0x19318b,{objectRules:_0x5cc04e}=this[_0x1db5c0(0x156)];this['_managerAutomationProcess']=new salesforce_1['ManagerAutomationProcess'](this[_0x1db5c0(0x12a)](_0x5cc04e));}async[a91_0x19318b(0x114)](){const _0x349e8c=a91_0x19318b;job_detail_1[_0x349e8c(0x12d)]['log'](_0x349e8c(0x12f)),this[_0x349e8c(0x126)][_0x349e8c(0x159)](_0x349e8c(0x12f));const {objectRules:_0x13d9ee,libraries:_0x4ed4d0}=this['_maskingManifest'];this[_0x349e8c(0x14f)]=await new steps_creator_1[(_0x349e8c(0x122))]({'loggerDetails':this[_0x349e8c(0x126)],'loggerJobState':this[_0x349e8c(0x14c)],'libraries':_0x4ed4d0,'objectRules':_0x13d9ee,'request':this[_0x349e8c(0x15e)]})[_0x349e8c(0x123)]();for(const _0x5e7249 of this[_0x349e8c(0x14f)]){await _0x5e7249[_0x349e8c(0x15c)]();}}[a91_0x19318b(0x12a)](_0x56f033){const _0x48ceef=a91_0x19318b,_0x3ece09=[],_0x417b16=[],_0x5a61b2=[],_0x400d14=[],_0x1af228=[];for(const _0x1457c5 in _0x56f033){const {isDisableProcessBuilder:_0x440f5f,isDisableTrigger:_0x18b62c,isDisableValidationRule:_0xdd583b,isDisableWorkflow:_0x4f77ed,isDisableLookupFilter:_0x262b62}=_0x56f033[_0x1457c5][_0x48ceef(0x15a)];_0x440f5f&&_0x5a61b2['push'](_0x1457c5),_0x18b62c&&_0x3ece09[_0x48ceef(0x12e)](_0x1457c5),_0xdd583b&&_0x400d14[_0x48ceef(0x12e)](_0x1457c5),_0x4f77ed&&_0x417b16[_0x48ceef(0x12e)](_0x1457c5),_0x262b62&&_0x1af228[_0x48ceef(0x12e)](_0x1457c5);}return{'instance':this['_request'],'saveSourceMetadataBackup':this[_0x48ceef(0x150)],'triggersObjects':_0x3ece09,'validationRulesObjects':_0x400d14,'workflowsObjects':_0x417b16,'flowsAndProcessBuilderObjects':_0x5a61b2,'lookupFiltersObjects':_0x1af228};}async[a91_0x19318b(0x130)](){const _0x1b765f=a91_0x19318b;job_detail_1[_0x1b765f(0x12d)][_0x1b765f(0x159)](_0x1b765f(0x120)),this[_0x1b765f(0x126)][_0x1b765f(0x159)](_0x1b765f(0x120)),await this[_0x1b765f(0x14d)]['disable']();}async[a91_0x19318b(0x160)](){const _0x4eff2c=a91_0x19318b;!this[_0x4eff2c(0x13d)]&&(job_detail_1[_0x4eff2c(0x12d)][_0x4eff2c(0x159)](_0x4eff2c(0x15d)),this[_0x4eff2c(0x126)]['log'](_0x4eff2c(0x15d)),await this[_0x4eff2c(0x14d)][_0x4eff2c(0x14e)]()[_0x4eff2c(0x13a)](_0x228f7a=>{this['_isEnableAutomationProcessError']=!![];throw _0x228f7a;}));}async[a91_0x19318b(0x124)](){const _0x2d9864=a91_0x19318b,_0x5a3e57=await(0x0,promises_1[_0x2d9864(0x152)])(path_1['default'][_0x2d9864(0x11a)](job_detail_1[_0x2d9864(0x162)],job_1['MANIFEST_FILENAME']),{'encoding':_0x2d9864(0x154)});return await(0x0,promises_1['rm'])(path_1[_0x2d9864(0x158)][_0x2d9864(0x11a)](job_detail_1[_0x2d9864(0x162)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON[_0x2d9864(0x13c)](_0x5a3e57)[_0x2d9864(0x136)];}[a91_0x19318b(0x150)](_0x5a3f7f){const _0x3390bc=a91_0x19318b;return(0x0,promises_1['writeFile'])(path_1['default'][_0x3390bc(0x11a)](job_detail_1['jobStorePath'],constants_1[_0x3390bc(0x161)]),_0x5a3f7f);}async[a91_0x19318b(0x15c)](){const _0x52070f=a91_0x19318b;this['_maskingManifest']=await this[_0x52070f(0x124)]();const {objectRules:_0x2d7ef4,credentials:_0x406f55}=this[_0x52070f(0x156)];this[_0x52070f(0x126)]=await new logger_details_1[(_0x52070f(0x157))](job_detail_1['jobStorePath'],job_detail_1[_0x52070f(0x129)])['init'](),this[_0x52070f(0x14c)]=await new logger_job_state_1[(_0x52070f(0x143))](job_detail_1[_0x52070f(0x162)],job_detail_1['jobId'])[_0x52070f(0x142)](Object[_0x52070f(0x132)](_0x2d7ef4));try{this[_0x52070f(0x14c)][_0x52070f(0x134)](logger_enums_1[_0x52070f(0x149)][_0x52070f(0x12b)]),this[_0x52070f(0x15e)]=await salesforce_1[_0x52070f(0x118)]['create'](new auth_manager_1[(_0x52070f(0x138))](_0x406f55),[],{'headers':{'Accept-Encoding':_0x52070f(0x127)}}),await this[_0x52070f(0x146)](),await this['disableAutomationProcess'](),await this[_0x52070f(0x114)](),await this['enableAutomationProcess'](),this[_0x52070f(0x14c)]['setJobStatus'](logger_enums_1[_0x52070f(0x149)][_0x52070f(0x141)]);}catch(_0x2cc943){await this[_0x52070f(0x160)]()[_0x52070f(0x13a)](_0x207950=>{const _0x55a576=_0x52070f;job_detail_1[_0x55a576(0x12d)]['error'](_0x207950[_0x55a576(0x139)]);}),this['_loggerDetails'][_0x52070f(0x153)](_0x2cc943[_0x52070f(0x139)]),this['_loggerJobState'][_0x52070f(0x134)](logger_enums_1[_0x52070f(0x149)]['FAILED']),this['_loggerJobState'][_0x52070f(0x137)](_0x2cc943[_0x52070f(0x139)]),job_detail_1['systemLogger'][_0x52070f(0x151)](_0x2cc943[_0x52070f(0x139)]);}finally{this['_loggerDetails'][_0x52070f(0x159)](_0x52070f(0x13e)),job_detail_1['systemLogger'][_0x52070f(0x159)](_0x52070f(0x13e)),await this[_0x52070f(0x14c)][_0x52070f(0x11b)](),await this[_0x52070f(0x126)]['kill']();}}}exports[a91_0x19318b(0x11c)]=MaskingJob,new MaskingJob()['execute']()[a91_0x19318b(0x121)](()=>process['exit'](0x0))[a91_0x19318b(0x13a)](()=>process[a91_0x19318b(0x117)](0x1));