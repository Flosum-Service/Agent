const a73_0x526c7a=a73_0x4e0c;(function(_0x1f0d7e,_0x24f53b){const _0x266a80=a73_0x4e0c,_0x14c7b9=_0x1f0d7e();while(!![]){try{const _0xba20b7=parseInt(_0x266a80(0x211))/0x1+-parseInt(_0x266a80(0x213))/0x2+-parseInt(_0x266a80(0x1ea))/0x3*(-parseInt(_0x266a80(0x22a))/0x4)+-parseInt(_0x266a80(0x239))/0x5*(-parseInt(_0x266a80(0x1e9))/0x6)+parseInt(_0x266a80(0x1f5))/0x7*(parseInt(_0x266a80(0x214))/0x8)+parseInt(_0x266a80(0x21c))/0x9+-parseInt(_0x266a80(0x1ed))/0xa*(parseInt(_0x266a80(0x21d))/0xb);if(_0xba20b7===_0x24f53b)break;else _0x14c7b9['push'](_0x14c7b9['shift']());}catch(_0x252f5f){_0x14c7b9['push'](_0x14c7b9['shift']());}}}(a73_0x46a6,0x8b785));function a73_0x4e0c(_0x2b1c0e,_0x5a8d92){const _0x259392=a73_0x46a6();return a73_0x4e0c=function(_0x1c3e19,_0x4bad55){_0x1c3e19=_0x1c3e19-0x1e5;let _0x46a6eb=_0x259392[_0x1c3e19];return _0x46a6eb;},a73_0x4e0c(_0x2b1c0e,_0x5a8d92);}const a73_0x4bad55=(function(){let _0x23764b=!![];return function(_0x353658,_0xb804c8){const _0x3fc626=_0x23764b?function(){const _0x3e26cf=a73_0x4e0c;if(_0xb804c8){const _0x376de7=_0xb804c8[_0x3e26cf(0x1f8)](_0x353658,arguments);return _0xb804c8=null,_0x376de7;}}:function(){};return _0x23764b=![],_0x3fc626;};}()),a73_0x1c3e19=a73_0x4bad55(this,function(){const _0x2a6659=a73_0x4e0c;return a73_0x1c3e19[_0x2a6659(0x228)]()[_0x2a6659(0x235)](_0x2a6659(0x1e5))[_0x2a6659(0x228)]()[_0x2a6659(0x223)](a73_0x1c3e19)[_0x2a6659(0x235)](_0x2a6659(0x1e5));});a73_0x1c3e19();'use strict';var __importDefault=this&&this[a73_0x526c7a(0x1fe)]||function(_0x2cc277){const _0x5278d7=a73_0x526c7a;return _0x2cc277&&_0x2cc277[_0x5278d7(0x20d)]?_0x2cc277:{'default':_0x2cc277};};Object[a73_0x526c7a(0x22d)](exports,'__esModule',{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a73_0x526c7a(0x20c)),salesforce_1=require('@flosum/salesforce'),steps_creator_1=require('./classes/step/steps-creator'),logger_enums_1=require(a73_0x526c7a(0x219)),logger_details_1=require(a73_0x526c7a(0x225)),logger_job_state_1=require(a73_0x526c7a(0x234)),job_1=require(a73_0x526c7a(0x224)),path_1=__importDefault(require(a73_0x526c7a(0x218))),auth_manager_1=require(a73_0x526c7a(0x216)),constants_1=require(a73_0x526c7a(0x21e)),job_detail_1=require(a73_0x526c7a(0x20e));class MaskingJob{constructor(){const _0x46c6ca=a73_0x526c7a;this[_0x46c6ca(0x1e7)]=![];}async[a73_0x526c7a(0x1f4)](){const _0x47ff0b=a73_0x526c7a,{objectRules:_0x509b5c}=this[_0x47ff0b(0x230)];this[_0x47ff0b(0x1fa)]=new salesforce_1[(_0x47ff0b(0x200))](this[_0x47ff0b(0x22c)](_0x509b5c));}async[a73_0x526c7a(0x210)](){const _0x557948=a73_0x526c7a;job_detail_1['systemLogger']['log']('Start\x20Masking\x20Process'),this[_0x557948(0x232)]['log']('Start\x20Masking\x20Process');const {objectRules:_0x1743f5,libraries:_0x1f6bd8}=this[_0x557948(0x230)];this[_0x557948(0x21b)]=await new steps_creator_1[(_0x557948(0x221))]({'loggerDetails':this[_0x557948(0x232)],'loggerJobState':this[_0x557948(0x227)],'libraries':_0x1f6bd8,'objectRules':_0x1743f5,'request':this[_0x557948(0x1f3)]})[_0x557948(0x215)]();for(const _0x140b18 of this[_0x557948(0x21b)]){await _0x140b18['execute']();}}[a73_0x526c7a(0x22c)](_0x3307e4){const _0x2ba0b6=a73_0x526c7a,_0x4407c6=[],_0x251dd4=[],_0x5136c3=[],_0x501cd2=[];for(const _0x610a8a in _0x3307e4){const {isDisableProcessBuilder:_0x5eb22d,isDisableTrigger:_0x5490e5,isDisableValidationRule:_0x18e41b,isDisableWorkflow:_0x1e6f0b}=_0x3307e4[_0x610a8a][_0x2ba0b6(0x201)];_0x5eb22d&&_0x5136c3[_0x2ba0b6(0x22f)](_0x610a8a),_0x5490e5&&_0x4407c6['push'](_0x610a8a),_0x18e41b&&_0x501cd2[_0x2ba0b6(0x22f)](_0x610a8a),_0x1e6f0b&&_0x251dd4[_0x2ba0b6(0x22f)](_0x610a8a);}return{'instance':this[_0x2ba0b6(0x1f3)],'saveSourceMetadataBackup':this[_0x2ba0b6(0x21a)],'triggersObjects':_0x4407c6,'workflowsObjects':_0x251dd4,'processBuilderObjects':_0x5136c3,'validationRulesObjects':_0x501cd2};}async['disableAutomationProcess'](){const _0x570ba3=a73_0x526c7a;job_detail_1['systemLogger']['log'](_0x570ba3(0x1ff)),this[_0x570ba3(0x232)]['log'](_0x570ba3(0x1ff)),await this[_0x570ba3(0x1fa)][_0x570ba3(0x20a)]();}async[a73_0x526c7a(0x22e)](){const _0x2bcc38=a73_0x526c7a;!this[_0x2bcc38(0x1e7)]&&(job_detail_1[_0x2bcc38(0x222)][_0x2bcc38(0x237)](_0x2bcc38(0x204)),this[_0x2bcc38(0x232)][_0x2bcc38(0x237)](_0x2bcc38(0x204)),await this[_0x2bcc38(0x1fa)][_0x2bcc38(0x233)]()[_0x2bcc38(0x217)](_0x1d3938=>{const _0x3c61c8=_0x2bcc38;this[_0x3c61c8(0x1e7)]=!![];throw _0x1d3938;}));}async[a73_0x526c7a(0x238)](){const _0x5bfa15=a73_0x526c7a,_0x369fbb=await(0x0,promises_1[_0x5bfa15(0x1f0)])(path_1['default'][_0x5bfa15(0x226)](job_detail_1['jobStorePath'],job_1[_0x5bfa15(0x236)]),{'encoding':_0x5bfa15(0x1eb)});return await(0x0,promises_1['rm'])(path_1[_0x5bfa15(0x1f1)][_0x5bfa15(0x226)](job_detail_1[_0x5bfa15(0x209)],job_1[_0x5bfa15(0x236)]),{'recursive':!![],'force':!![]}),JSON[_0x5bfa15(0x20b)](_0x369fbb)[_0x5bfa15(0x207)];}[a73_0x526c7a(0x21a)](_0x4fe084){const _0x4a223c=a73_0x526c7a;return(0x0,promises_1[_0x4a223c(0x20f)])(path_1[_0x4a223c(0x1f1)][_0x4a223c(0x226)](job_detail_1[_0x4a223c(0x209)],constants_1[_0x4a223c(0x1fd)]),Buffer['from'](_0x4fe084,_0x4a223c(0x1ef)));}async[a73_0x526c7a(0x203)](){const _0x256a87=a73_0x526c7a;this[_0x256a87(0x230)]=await this['getManifest']();const {objectRules:_0x379b93,credentials:_0x459bbd}=this['_maskingManifest'];this[_0x256a87(0x232)]=await new logger_details_1[(_0x256a87(0x1f7))](job_detail_1[_0x256a87(0x209)],job_detail_1[_0x256a87(0x22b)])[_0x256a87(0x212)](),this[_0x256a87(0x227)]=await new logger_job_state_1['LoggerJobState'](job_detail_1['jobStorePath'],job_detail_1[_0x256a87(0x22b)])['init'](Object[_0x256a87(0x206)](_0x379b93));try{this[_0x256a87(0x227)][_0x256a87(0x21f)](logger_enums_1[_0x256a87(0x208)][_0x256a87(0x202)]),this[_0x256a87(0x1f3)]=await salesforce_1[_0x256a87(0x1e6)][_0x256a87(0x215)](new auth_manager_1['AuthManager'](_0x459bbd),[],{'headers':{'Accept-Encoding':_0x256a87(0x220)}}),await this[_0x256a87(0x1f4)](),await this[_0x256a87(0x1f6)](),await this['masking'](),await this['enableAutomationProcess'](),this[_0x256a87(0x227)][_0x256a87(0x21f)](logger_enums_1[_0x256a87(0x208)][_0x256a87(0x1ee)]);}catch(_0x4d44ce){await this[_0x256a87(0x22e)]()['catch'](_0x5ec6f8=>{const _0x3a7f52=_0x256a87;job_detail_1[_0x3a7f52(0x222)][_0x3a7f52(0x1f9)](_0x5ec6f8[_0x3a7f52(0x1e8)]);}),this['_loggerDetails'][_0x256a87(0x1fc)](_0x4d44ce[_0x256a87(0x1e8)]),this[_0x256a87(0x227)][_0x256a87(0x21f)](logger_enums_1[_0x256a87(0x208)][_0x256a87(0x1fb)]),this[_0x256a87(0x227)][_0x256a87(0x231)](_0x4d44ce['message']),job_detail_1[_0x256a87(0x222)][_0x256a87(0x1f9)](_0x4d44ce[_0x256a87(0x1e8)]);}finally{this[_0x256a87(0x232)][_0x256a87(0x237)](_0x256a87(0x229)),job_detail_1['systemLogger'][_0x256a87(0x237)](_0x256a87(0x229)),await this['_loggerJobState'][_0x256a87(0x1f2)](),await this[_0x256a87(0x232)][_0x256a87(0x1f2)]();}}}function a73_0x46a6(){const _0x452be8=['catch','path','./enums/logger.enums','saveSourceAutomationProcessesBackup','_steps','2533329VCFKzk','1451263kifolF','../constants','setJobStatus','gzip','StepsCreator','systemLogger','constructor','../../../constants/job','./classes/logger/logger-details','join','_loggerJobState','toString','Finish\x20Masking\x20Process','2073748gmVbwy','jobId','getManagerAutomationProcessOptions','defineProperty','enableAutomationProcess','push','_maskingManifest','setJobError','_loggerDetails','enable','./classes/logger/logger-job-state','search','MANIFEST_FILENAME','log','getManifest','20xqUBTl','(((.+)+)+)+$','AxiosInstanceUtils','_isEnableAutomationProcessError','message','571218UqFzJY','3dNkRTV','utf-8','MaskingJob','70UjSyjo','COMPLETED','base64','readFile','default','kill','_request','initAutomationProcess','1290569mBseTX','disableAutomationProcess','LoggerDetails','apply','error','_managerAutomationProcess','FAILED','exception','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','__importDefault','Disable\x20automation\x20process','ManagerAutomationProcess','disableAutomation','IN_PROGRESS','execute','Enable\x20automation\x20process','exit','keys','details','JobStatus','jobStorePath','disable','parse','fs/promises','__esModule','./job-detail','writeFile','masking','790118LtafcY','init','1320830GElhdd','8CxwntB','create','../../shared/managers/auth.manager'];a73_0x46a6=function(){return _0x452be8;};return a73_0x46a6();}exports[a73_0x526c7a(0x1ec)]=MaskingJob,new MaskingJob()[a73_0x526c7a(0x203)]()['then'](()=>process[a73_0x526c7a(0x205)](0x0))['catch'](()=>process['exit'](0x1));