const a91_0x3856d1=a91_0x14de;function a91_0x14de(_0x987efa,_0x2b6c37){const _0x5e0b02=a91_0x55a0();return a91_0x14de=function(_0x10789f,_0x2e6c40){_0x10789f=_0x10789f-0x1c2;let _0x55a0e8=_0x5e0b02[_0x10789f];return _0x55a0e8;},a91_0x14de(_0x987efa,_0x2b6c37);}(function(_0x37defd,_0x26ed98){const _0x7079a7=a91_0x14de,_0x44a032=_0x37defd();while(!![]){try{const _0x11d721=-parseInt(_0x7079a7(0x1f3))/0x1+-parseInt(_0x7079a7(0x1f0))/0x2+-parseInt(_0x7079a7(0x1cd))/0x3*(parseInt(_0x7079a7(0x1e8))/0x4)+-parseInt(_0x7079a7(0x1e2))/0x5+parseInt(_0x7079a7(0x1d5))/0x6*(-parseInt(_0x7079a7(0x1c8))/0x7)+-parseInt(_0x7079a7(0x1f6))/0x8*(-parseInt(_0x7079a7(0x1ed))/0x9)+parseInt(_0x7079a7(0x1f9))/0xa*(parseInt(_0x7079a7(0x1ff))/0xb);if(_0x11d721===_0x26ed98)break;else _0x44a032['push'](_0x44a032['shift']());}catch(_0x599985){_0x44a032['push'](_0x44a032['shift']());}}}(a91_0x55a0,0xb3871));const a91_0x2e6c40=(function(){let _0x39c062=!![];return function(_0x5cceda,_0x42a31f){const _0x416858=_0x39c062?function(){if(_0x42a31f){const _0x2e80ec=_0x42a31f['apply'](_0x5cceda,arguments);return _0x42a31f=null,_0x2e80ec;}}:function(){};return _0x39c062=![],_0x416858;};}()),a91_0x10789f=a91_0x2e6c40(this,function(){const _0xf40091=a91_0x14de;return a91_0x10789f[_0xf40091(0x203)]()['search'](_0xf40091(0x1d8))[_0xf40091(0x203)]()[_0xf40091(0x1e9)](a91_0x10789f)[_0xf40091(0x1d9)](_0xf40091(0x1d8));});a91_0x10789f();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x592139){const _0x15fec1=a91_0x14de;return _0x592139&&_0x592139[_0x15fec1(0x204)]?_0x592139:{'default':_0x592139};};Object['defineProperty'](exports,a91_0x3856d1(0x204),{'value':!![]}),exports[a91_0x3856d1(0x20e)]=void 0x0;const promises_1=require(a91_0x3856d1(0x1ca)),salesforce_1=require('@flosum/salesforce'),steps_creator_1=require(a91_0x3856d1(0x1f5)),logger_enums_1=require(a91_0x3856d1(0x1d4)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require(a91_0x3856d1(0x1e0)),job_1=require(a91_0x3856d1(0x1f8)),path_1=__importDefault(require(a91_0x3856d1(0x1d2))),auth_manager_1=require(a91_0x3856d1(0x1e7)),constants_1=require('../constants'),job_detail_1=require(a91_0x3856d1(0x209));function a91_0x55a0(){const _0x47be93=['_loggerDetails','_maskingManifest','_managerAutomationProcess','../../shared/managers/auth.manager','299868Bmenfp','constructor','systemLogger','FAILED','catch','2237346eaYfAE','enableAutomationProcess','LoggerJobState','2334800NXhdlN','LoggerDetails','StepsCreator','45764OvPVwZ','_request','./classes/step/steps-creator','16GtcJjm','disableAutomationProcess','../../../constants/job','51960LkmEhv','_isEnableAutomationProcessError','init','masking','JobStatus','_loggerJobState','7106FwHIDJ','AxiosInstanceUtils','disableAutomation','jobStorePath','toString','__esModule','initAutomationProcess','getManagerAutomationProcessOptions','AuthManager','message','./job-detail','setJobStatus','then','parse','writeFile','MaskingJob','error','_steps','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','Disable\x20automation\x20process','enable','keys','default','MANIFEST_FILENAME','246925UQkchL','readFile','fs/promises','exception','COMPLETED','15pPpOKC','join','getManifest','create','disable','path','Enable\x20automation\x20process','./enums/logger.enums','24QKxaEY','Finish\x20Masking\x20Process','log','(((.+)+)+)+$','search','kill','push','utf-8','jobId','Start\x20Masking\x20Process','execute','./classes/logger/logger-job-state','exit','6946800jHlLuX','IN_PROGRESS'];a91_0x55a0=function(){return _0x47be93;};return a91_0x55a0();}class MaskingJob{constructor(){this['_isEnableAutomationProcessError']=![];}async[a91_0x3856d1(0x205)](){const _0x7a1868=a91_0x3856d1,{objectRules:_0x45222d}=this[_0x7a1868(0x1e5)];this[_0x7a1868(0x1e6)]=new salesforce_1['ManagerAutomationProcess'](this[_0x7a1868(0x206)](_0x45222d));}async['masking'](){const _0x4660ba=a91_0x3856d1;job_detail_1[_0x4660ba(0x1ea)]['log']('Start\x20Masking\x20Process'),this[_0x4660ba(0x1e4)]['log'](_0x4660ba(0x1de));const {objectRules:_0x2973c4,libraries:_0x2398ef}=this[_0x4660ba(0x1e5)];this[_0x4660ba(0x210)]=await new steps_creator_1[(_0x4660ba(0x1f2))]({'loggerDetails':this[_0x4660ba(0x1e4)],'loggerJobState':this[_0x4660ba(0x1fe)],'libraries':_0x2398ef,'objectRules':_0x2973c4,'request':this['_request']})[_0x4660ba(0x1d0)]();for(const _0x48f578 of this[_0x4660ba(0x210)]){await _0x48f578[_0x4660ba(0x1df)]();}}[a91_0x3856d1(0x206)](_0x380f6e){const _0x85c7e0=a91_0x3856d1,_0x37b95f=[],_0x474e35=[],_0x3e2ca3=[],_0x5c6be3=[],_0x3ed77b=[];for(const _0xbcc518 in _0x380f6e){const {isDisableProcessBuilder:_0x17001d,isDisableTrigger:_0x28bdba,isDisableValidationRule:_0xb70bc5,isDisableWorkflow:_0x265592,isDisableLookupFilter:_0x1ca2ca}=_0x380f6e[_0xbcc518][_0x85c7e0(0x201)];_0x17001d&&_0x3e2ca3[_0x85c7e0(0x1db)](_0xbcc518),_0x28bdba&&_0x37b95f['push'](_0xbcc518),_0xb70bc5&&_0x5c6be3[_0x85c7e0(0x1db)](_0xbcc518),_0x265592&&_0x474e35[_0x85c7e0(0x1db)](_0xbcc518),_0x1ca2ca&&_0x3ed77b[_0x85c7e0(0x1db)](_0xbcc518);}return{'instance':this[_0x85c7e0(0x1f4)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x37b95f,'validationRulesObjects':_0x5c6be3,'workflowsObjects':_0x474e35,'flowsAndProcessBuilderObjects':_0x3e2ca3,'lookupFiltersObjects':_0x3ed77b};}async[a91_0x3856d1(0x1f7)](){const _0x2e3cbb=a91_0x3856d1;job_detail_1[_0x2e3cbb(0x1ea)][_0x2e3cbb(0x1d7)](_0x2e3cbb(0x1c3)),this[_0x2e3cbb(0x1e4)][_0x2e3cbb(0x1d7)](_0x2e3cbb(0x1c3)),await this[_0x2e3cbb(0x1e6)][_0x2e3cbb(0x1d1)]();}async['enableAutomationProcess'](){const _0x512405=a91_0x3856d1;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x512405(0x1ea)][_0x512405(0x1d7)](_0x512405(0x1d3)),this['_loggerDetails']['log']('Enable\x20automation\x20process'),await this[_0x512405(0x1e6)][_0x512405(0x1c4)]()[_0x512405(0x1ec)](_0x488a09=>{const _0x557620=_0x512405;this[_0x557620(0x1fa)]=!![];throw _0x488a09;}));}async['getManifest'](){const _0x169fc1=a91_0x3856d1,_0x51b894=await(0x0,promises_1[_0x169fc1(0x1c9)])(path_1['default'][_0x169fc1(0x1ce)](job_detail_1[_0x169fc1(0x202)],job_1[_0x169fc1(0x1c7)]),{'encoding':_0x169fc1(0x1dc)});return await(0x0,promises_1['rm'])(path_1[_0x169fc1(0x1c6)][_0x169fc1(0x1ce)](job_detail_1[_0x169fc1(0x202)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON[_0x169fc1(0x20c)](_0x51b894)['details'];}['saveSourceAutomationProcessesBackup'](_0x9c5704){const _0x51cac3=a91_0x3856d1;return(0x0,promises_1[_0x51cac3(0x20d)])(path_1[_0x51cac3(0x1c6)][_0x51cac3(0x1ce)](job_detail_1[_0x51cac3(0x202)],constants_1[_0x51cac3(0x1c2)]),_0x9c5704);}async[a91_0x3856d1(0x1df)](){const _0x5f3c9e=a91_0x3856d1;this['_maskingManifest']=await this[_0x5f3c9e(0x1cf)]();const {objectRules:_0x2fde32,credentials:_0xe38a92}=this[_0x5f3c9e(0x1e5)];this[_0x5f3c9e(0x1e4)]=await new logger_details_1[(_0x5f3c9e(0x1f1))](job_detail_1[_0x5f3c9e(0x202)],job_detail_1[_0x5f3c9e(0x1dd)])[_0x5f3c9e(0x1fb)](),this[_0x5f3c9e(0x1fe)]=await new logger_job_state_1[(_0x5f3c9e(0x1ef))](job_detail_1[_0x5f3c9e(0x202)],job_detail_1[_0x5f3c9e(0x1dd)])[_0x5f3c9e(0x1fb)](Object[_0x5f3c9e(0x1c5)](_0x2fde32));try{this[_0x5f3c9e(0x1fe)][_0x5f3c9e(0x20a)](logger_enums_1[_0x5f3c9e(0x1fd)][_0x5f3c9e(0x1e3)]),this['_request']=await salesforce_1[_0x5f3c9e(0x200)][_0x5f3c9e(0x1d0)](new auth_manager_1[(_0x5f3c9e(0x207))](_0xe38a92),[],{'headers':{'Accept-Encoding':'gzip'}}),await this[_0x5f3c9e(0x205)](),await this[_0x5f3c9e(0x1f7)](),await this[_0x5f3c9e(0x1fc)](),await this[_0x5f3c9e(0x1ee)](),this['_loggerJobState'][_0x5f3c9e(0x20a)](logger_enums_1[_0x5f3c9e(0x1fd)][_0x5f3c9e(0x1cc)]);}catch(_0x30fef8){await this['enableAutomationProcess']()[_0x5f3c9e(0x1ec)](_0x48ba78=>{const _0x179d8d=_0x5f3c9e;job_detail_1[_0x179d8d(0x1ea)][_0x179d8d(0x20f)](_0x48ba78['message']);}),this[_0x5f3c9e(0x1e4)][_0x5f3c9e(0x1cb)](_0x30fef8[_0x5f3c9e(0x208)]),this[_0x5f3c9e(0x1fe)]['setJobStatus'](logger_enums_1[_0x5f3c9e(0x1fd)][_0x5f3c9e(0x1eb)]),this[_0x5f3c9e(0x1fe)]['setJobError'](_0x30fef8['message']),job_detail_1[_0x5f3c9e(0x1ea)][_0x5f3c9e(0x20f)](_0x30fef8[_0x5f3c9e(0x208)]);}finally{this[_0x5f3c9e(0x1e4)][_0x5f3c9e(0x1d7)](_0x5f3c9e(0x1d6)),job_detail_1[_0x5f3c9e(0x1ea)][_0x5f3c9e(0x1d7)](_0x5f3c9e(0x1d6)),await this[_0x5f3c9e(0x1fe)][_0x5f3c9e(0x1da)](),await this[_0x5f3c9e(0x1e4)][_0x5f3c9e(0x1da)]();}}}exports[a91_0x3856d1(0x20e)]=MaskingJob,new MaskingJob()[a91_0x3856d1(0x1df)]()[a91_0x3856d1(0x20b)](()=>process[a91_0x3856d1(0x1e1)](0x0))[a91_0x3856d1(0x1ec)](()=>process[a91_0x3856d1(0x1e1)](0x1));