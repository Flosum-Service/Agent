const a72_0x251197=a72_0x4cf7;function a72_0x4cf7(_0x20b94c,_0x2096dc){const _0x7e8091=a72_0x5288();return a72_0x4cf7=function(_0x1b51c1,_0x5e084b){_0x1b51c1=_0x1b51c1-0x9f;let _0x5288da=_0x7e8091[_0x1b51c1];return _0x5288da;},a72_0x4cf7(_0x20b94c,_0x2096dc);}(function(_0x18931b,_0x2afcf0){const _0x644f0f=a72_0x4cf7,_0x1005dd=_0x18931b();while(!![]){try{const _0x19be3d=-parseInt(_0x644f0f(0xae))/0x1+parseInt(_0x644f0f(0xce))/0x2+-parseInt(_0x644f0f(0xc2))/0x3*(-parseInt(_0x644f0f(0xb5))/0x4)+-parseInt(_0x644f0f(0xea))/0x5+-parseInt(_0x644f0f(0xeb))/0x6*(-parseInt(_0x644f0f(0xc6))/0x7)+-parseInt(_0x644f0f(0xda))/0x8*(-parseInt(_0x644f0f(0xc5))/0x9)+parseInt(_0x644f0f(0xcc))/0xa*(parseInt(_0x644f0f(0xc4))/0xb);if(_0x19be3d===_0x2afcf0)break;else _0x1005dd['push'](_0x1005dd['shift']());}catch(_0x2dccd6){_0x1005dd['push'](_0x1005dd['shift']());}}}(a72_0x5288,0x85803));const a72_0x5e084b=(function(){let _0x80955c=!![];return function(_0x30e8de,_0x30ede4){const _0x430a5f=_0x80955c?function(){const _0x89b980=a72_0x4cf7;if(_0x30ede4){const _0x5f2837=_0x30ede4[_0x89b980(0xe8)](_0x30e8de,arguments);return _0x30ede4=null,_0x5f2837;}}:function(){};return _0x80955c=![],_0x430a5f;};}()),a72_0x1b51c1=a72_0x5e084b(this,function(){const _0x4eba57=a72_0x4cf7;return a72_0x1b51c1[_0x4eba57(0xb9)]()['search'](_0x4eba57(0xe5))[_0x4eba57(0xb9)]()[_0x4eba57(0xbc)](a72_0x1b51c1)['search'](_0x4eba57(0xe5));});a72_0x1b51c1();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x581934){const _0x2becfc=a72_0x4cf7;return _0x581934&&_0x581934[_0x2becfc(0xb7)]?_0x581934:{'default':_0x581934};};Object[a72_0x251197(0xbb)](exports,a72_0x251197(0xb7),{'value':!![]}),exports[a72_0x251197(0x9f)]=void 0x0;const promises_1=require(a72_0x251197(0xaf)),salesforce_1=require(a72_0x251197(0xca)),steps_creator_1=require('./classes/step/steps-creator'),logger_enums_1=require(a72_0x251197(0xe4)),logger_details_1=require(a72_0x251197(0xab)),logger_job_state_1=require(a72_0x251197(0xbf)),job_1=require(a72_0x251197(0xe7)),path_1=__importDefault(require('path')),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a72_0x251197(0xb2)),job_detail_1=require(a72_0x251197(0xdf));class MaskingJob{constructor(){const _0x39bf35=a72_0x251197;this[_0x39bf35(0xd9)]=![];}async[a72_0x251197(0xe9)](){const _0x3af214=a72_0x251197,{objectRules:_0x1b0f61}=this[_0x3af214(0xc8)];this[_0x3af214(0xac)]=new salesforce_1['ManagerAutomationProcess'](this[_0x3af214(0xa1)](_0x1b0f61));}async[a72_0x251197(0xb6)](){const _0x1a4a25=a72_0x251197;job_detail_1[_0x1a4a25(0xcd)][_0x1a4a25(0xd4)](_0x1a4a25(0xdb)),this[_0x1a4a25(0xde)][_0x1a4a25(0xd4)](_0x1a4a25(0xdb));const {objectRules:_0x1b4fe4,libraries:_0x357339}=this['_maskingManifest'];this[_0x1a4a25(0xcb)]=await new steps_creator_1[(_0x1a4a25(0xd7))]({'loggerDetails':this['_loggerDetails'],'loggerJobState':this[_0x1a4a25(0xd8)],'libraries':_0x357339,'objectRules':_0x1b4fe4,'request':this[_0x1a4a25(0xc9)]})[_0x1a4a25(0xcf)]();for(const _0x3ddf5e of this[_0x1a4a25(0xcb)]){await _0x3ddf5e['execute']();}}[a72_0x251197(0xa1)](_0x3e7c04){const _0x3b133f=a72_0x251197,_0x540b75=[],_0x3925f1=[],_0x8f3a83=[],_0x5811f4=[];for(const _0x25b329 in _0x3e7c04){const {isDisableProcessBuilder:_0x32aef8,isDisableTrigger:_0x43805b,isDisableValidationRule:_0x100a23,isDisableWorkflow:_0x14f75c}=_0x3e7c04[_0x25b329][_0x3b133f(0xba)];_0x32aef8&&_0x8f3a83['push'](_0x25b329),_0x43805b&&_0x540b75[_0x3b133f(0xc0)](_0x25b329),_0x100a23&&_0x5811f4[_0x3b133f(0xc0)](_0x25b329),_0x14f75c&&_0x3925f1[_0x3b133f(0xc0)](_0x25b329);}return{'instance':this[_0x3b133f(0xc9)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x540b75,'workflowsObjects':_0x3925f1,'processBuilderObjects':_0x8f3a83,'validationRulesObjects':_0x5811f4};}async[a72_0x251197(0xa3)](){const _0x9f7156=a72_0x251197;job_detail_1[_0x9f7156(0xcd)][_0x9f7156(0xd4)](_0x9f7156(0xa6)),this['_loggerDetails'][_0x9f7156(0xd4)](_0x9f7156(0xa6)),await this[_0x9f7156(0xac)][_0x9f7156(0xb4)]();}async['enableAutomationProcess'](){const _0x4aecb6=a72_0x251197;!this[_0x4aecb6(0xd9)]&&(job_detail_1[_0x4aecb6(0xcd)][_0x4aecb6(0xd4)]('Enable\x20automation\x20process'),this[_0x4aecb6(0xde)][_0x4aecb6(0xd4)](_0x4aecb6(0xa7)),await this[_0x4aecb6(0xac)][_0x4aecb6(0xd5)]()[_0x4aecb6(0xa2)](_0x3d34e8=>{this['_isEnableAutomationProcessError']=!![];throw _0x3d34e8;}));}async['getManifest'](){const _0x5523ae=a72_0x251197,_0x2eca77=await(0x0,promises_1[_0x5523ae(0xed)])(path_1[_0x5523ae(0xa0)][_0x5523ae(0xa8)](job_detail_1[_0x5523ae(0xb1)],job_1[_0x5523ae(0xdd)]),{'encoding':_0x5523ae(0xdc)});return await(0x0,promises_1['rm'])(path_1[_0x5523ae(0xa0)][_0x5523ae(0xa8)](job_detail_1[_0x5523ae(0xb1)],job_1[_0x5523ae(0xdd)]),{'recursive':!![],'force':!![]}),JSON['parse'](_0x2eca77)[_0x5523ae(0xbe)];}[a72_0x251197(0xb8)](_0x103049){const _0x3ed350=a72_0x251197;return(0x0,promises_1[_0x3ed350(0xad)])(path_1[_0x3ed350(0xa0)][_0x3ed350(0xa8)](job_detail_1[_0x3ed350(0xb1)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x3ed350(0xc7)](_0x103049,_0x3ed350(0xd0)));}async['execute'](){const _0x4ae8ec=a72_0x251197;this[_0x4ae8ec(0xc8)]=await this['getManifest']();const {objectRules:_0x5d0014,credentials:_0x1c044c}=this[_0x4ae8ec(0xc8)];this[_0x4ae8ec(0xde)]=await new logger_details_1[(_0x4ae8ec(0xb3))](job_detail_1['jobStorePath'],job_detail_1['jobId'])[_0x4ae8ec(0xbd)](),this[_0x4ae8ec(0xd8)]=await new logger_job_state_1[(_0x4ae8ec(0xe6))](job_detail_1[_0x4ae8ec(0xb1)],job_detail_1[_0x4ae8ec(0xd6)])[_0x4ae8ec(0xbd)](Object[_0x4ae8ec(0xb0)](_0x5d0014));try{this['_loggerJobState'][_0x4ae8ec(0xaa)](logger_enums_1['JobStatus'][_0x4ae8ec(0xd1)]),this[_0x4ae8ec(0xc9)]=await salesforce_1[_0x4ae8ec(0xc1)][_0x4ae8ec(0xcf)](new auth_manager_1['AuthManager'](_0x1c044c),[],{'headers':{'Accept-Encoding':'gzip'}}),await this[_0x4ae8ec(0xe9)](),await this[_0x4ae8ec(0xa3)](),await this[_0x4ae8ec(0xb6)](),await this[_0x4ae8ec(0xe2)](),this[_0x4ae8ec(0xd8)]['setJobStatus'](logger_enums_1['JobStatus'][_0x4ae8ec(0xec)]);}catch(_0x31cb3e){await this[_0x4ae8ec(0xe2)]()[_0x4ae8ec(0xa2)](_0x3aaa25=>{const _0x4882dd=_0x4ae8ec;job_detail_1['systemLogger']['error'](_0x3aaa25[_0x4882dd(0xa9)]);}),this['_loggerDetails'][_0x4ae8ec(0xa5)](_0x31cb3e[_0x4ae8ec(0xa9)]),this[_0x4ae8ec(0xd8)][_0x4ae8ec(0xaa)](logger_enums_1[_0x4ae8ec(0xd2)]['FAILED']),this[_0x4ae8ec(0xd8)][_0x4ae8ec(0xa4)](_0x31cb3e[_0x4ae8ec(0xa9)]),job_detail_1['systemLogger'][_0x4ae8ec(0xc3)](_0x31cb3e['message']);}finally{this[_0x4ae8ec(0xde)][_0x4ae8ec(0xd4)](_0x4ae8ec(0xd3)),job_detail_1[_0x4ae8ec(0xcd)][_0x4ae8ec(0xd4)](_0x4ae8ec(0xd3)),await this['_loggerJobState'][_0x4ae8ec(0xe1)](),await this[_0x4ae8ec(0xde)][_0x4ae8ec(0xe1)]();}}}exports[a72_0x251197(0x9f)]=MaskingJob,new MaskingJob()[a72_0x251197(0xe0)]()['then'](()=>process[a72_0x251197(0xe3)](0x0))[a72_0x251197(0xa2)](()=>process[a72_0x251197(0xe3)](0x1));function a72_0x5288(){const _0x264096=['masking','__esModule','saveSourceAutomationProcessesBackup','toString','disableAutomation','defineProperty','constructor','init','details','./classes/logger/logger-job-state','push','AxiosInstanceUtils','6mbJgvo','error','22zTOtCo','5895jjMphA','3880828okRzYh','from','_maskingManifest','_request','@flosum/salesforce','_steps','1290860BxqIQO','systemLogger','410682IgZAUJ','create','base64','IN_PROGRESS','JobStatus','Finish\x20Masking\x20Process','log','enable','jobId','StepsCreator','_loggerJobState','_isEnableAutomationProcessError','2832jnweqH','Start\x20Masking\x20Process','utf-8','MANIFEST_FILENAME','_loggerDetails','./job-detail','execute','kill','enableAutomationProcess','exit','./enums/logger.enums','(((.+)+)+)+$','LoggerJobState','../../../constants/job','apply','initAutomationProcess','3447080SupofE','6uLOwMQ','COMPLETED','readFile','MaskingJob','default','getManagerAutomationProcessOptions','catch','disableAutomationProcess','setJobError','exception','Disable\x20automation\x20process','Enable\x20automation\x20process','join','message','setJobStatus','./classes/logger/logger-details','_managerAutomationProcess','writeFile','961792OhhHuX','fs/promises','keys','jobStorePath','../constants','LoggerDetails','disable','1896480wSBidl'];a72_0x5288=function(){return _0x264096;};return a72_0x5288();}