const a73_0x27b171=a73_0x2136;(function(_0x21a2cc,_0x1bae60){const _0x3aaf77=a73_0x2136,_0x56af5a=_0x21a2cc();while(!![]){try{const _0x50aa6e=-parseInt(_0x3aaf77(0x169))/0x1*(parseInt(_0x3aaf77(0x175))/0x2)+parseInt(_0x3aaf77(0x19b))/0x3+parseInt(_0x3aaf77(0x19c))/0x4*(-parseInt(_0x3aaf77(0x162))/0x5)+-parseInt(_0x3aaf77(0x188))/0x6+-parseInt(_0x3aaf77(0x193))/0x7*(-parseInt(_0x3aaf77(0x19d))/0x8)+-parseInt(_0x3aaf77(0x158))/0x9+parseInt(_0x3aaf77(0x16b))/0xa*(parseInt(_0x3aaf77(0x15e))/0xb);if(_0x50aa6e===_0x1bae60)break;else _0x56af5a['push'](_0x56af5a['shift']());}catch(_0x173a97){_0x56af5a['push'](_0x56af5a['shift']());}}}(a73_0x2301,0xd29ec));function a73_0x2136(_0x209bea,_0x3e02e5){const _0xbdb516=a73_0x2301();return a73_0x2136=function(_0xd151c8,_0xcf428a){_0xd151c8=_0xd151c8-0x14f;let _0x2301e3=_0xbdb516[_0xd151c8];return _0x2301e3;},a73_0x2136(_0x209bea,_0x3e02e5);}const a73_0xcf428a=(function(){let _0x56111a=!![];return function(_0x34fed2,_0xa6ad42){const _0x3378ff=_0x56111a?function(){const _0x2d55a3=a73_0x2136;if(_0xa6ad42){const _0x118bb6=_0xa6ad42[_0x2d55a3(0x156)](_0x34fed2,arguments);return _0xa6ad42=null,_0x118bb6;}}:function(){};return _0x56111a=![],_0x3378ff;};}()),a73_0xd151c8=a73_0xcf428a(this,function(){const _0x39b371=a73_0x2136;return a73_0xd151c8[_0x39b371(0x17d)]()['search'](_0x39b371(0x16c))[_0x39b371(0x17d)]()[_0x39b371(0x17c)](a73_0xd151c8)['search'](_0x39b371(0x16c));});function a73_0x2301(){const _0x3a0744=['join','_managerAutomationProcess','saveSourceAutomationProcessesBackup','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','@flosum/salesforce','../constants','constructor','toString','LoggerDetails','catch','exception','log','JobStatus','init','create','Enable\x20automation\x20process','masking','MANIFEST_FILENAME','2208720vGMViS','LoggerJobState','StepsCreator','parse','setJobError','../../shared/managers/auth.manager','default','message','getManifest','keys','push','1666OjVYON','details','execute','../../../constants/job','initAutomationProcess','./classes/step/steps-creator','base64','Finish\x20Masking\x20Process','1294377RWTjDS','81228zEDkJw','1720qdpGqb','ManagerAutomationProcess','disableAutomationProcess','jobStorePath','disable','Disable\x20automation\x20process','kill','then','_maskingManifest','apply','_steps','2419740nIrpHF','utf-8','_isEnableAutomationProcessError','MaskingJob','IN_PROGRESS','_loggerJobState','6039yueLdB','path','from','disableAutomation','385rXyZrf','./enums/logger.enums','_request','Start\x20Masking\x20Process','getManagerAutomationProcessOptions','./job-detail','exit','179759tLCgny','systemLogger','56830wcmDBn','(((.+)+)+)+$','_loggerDetails','error','enableAutomationProcess','writeFile','jobId','enable','__esModule','setJobStatus','6lcOMdQ'];a73_0x2301=function(){return _0x3a0744;};return a73_0x2301();}a73_0xd151c8();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x378823){return _0x378823&&_0x378823['__esModule']?_0x378823:{'default':_0x378823};};Object['defineProperty'](exports,a73_0x27b171(0x173),{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require('fs/promises'),salesforce_1=require(a73_0x27b171(0x17a)),steps_creator_1=require(a73_0x27b171(0x198)),logger_enums_1=require(a73_0x27b171(0x163)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require(a73_0x27b171(0x196)),path_1=__importDefault(require(a73_0x27b171(0x15f))),auth_manager_1=require(a73_0x27b171(0x18d)),constants_1=require(a73_0x27b171(0x17b)),job_detail_1=require(a73_0x27b171(0x167));class MaskingJob{constructor(){const _0x55ea36=a73_0x27b171;this[_0x55ea36(0x15a)]=![];}async[a73_0x27b171(0x197)](){const _0x513b19=a73_0x27b171,{objectRules:_0x2da411}=this[_0x513b19(0x155)];this[_0x513b19(0x177)]=new salesforce_1[(_0x513b19(0x19e))](this['getManagerAutomationProcessOptions'](_0x2da411));}async['masking'](){const _0x258599=a73_0x27b171;job_detail_1[_0x258599(0x16a)][_0x258599(0x181)](_0x258599(0x165)),this['_loggerDetails'][_0x258599(0x181)](_0x258599(0x165));const {objectRules:_0x2fda9d,libraries:_0x53c500}=this[_0x258599(0x155)];this[_0x258599(0x157)]=await new steps_creator_1[(_0x258599(0x18a))]({'loggerDetails':this[_0x258599(0x16d)],'loggerJobState':this[_0x258599(0x15d)],'libraries':_0x53c500,'objectRules':_0x2fda9d,'request':this[_0x258599(0x164)]})[_0x258599(0x184)]();for(const _0x5ab7b9 of this[_0x258599(0x157)]){await _0x5ab7b9[_0x258599(0x195)]();}}[a73_0x27b171(0x166)](_0xb61840){const _0x1e2cac=a73_0x27b171,_0x18769a=[],_0x204ee3=[],_0x2a60d2=[],_0x2f7107=[];for(const _0x2eb7ce in _0xb61840){const {isDisableProcessBuilder:_0x4600c3,isDisableTrigger:_0x46a8ec,isDisableValidationRule:_0x2608b8,isDisableWorkflow:_0x13acb6}=_0xb61840[_0x2eb7ce][_0x1e2cac(0x161)];_0x4600c3&&_0x2a60d2[_0x1e2cac(0x192)](_0x2eb7ce),_0x46a8ec&&_0x18769a[_0x1e2cac(0x192)](_0x2eb7ce),_0x2608b8&&_0x2f7107[_0x1e2cac(0x192)](_0x2eb7ce),_0x13acb6&&_0x204ee3[_0x1e2cac(0x192)](_0x2eb7ce);}return{'instance':this[_0x1e2cac(0x164)],'saveSourceMetadataBackup':this[_0x1e2cac(0x178)],'triggersObjects':_0x18769a,'workflowsObjects':_0x204ee3,'processBuilderObjects':_0x2a60d2,'validationRulesObjects':_0x2f7107};}async[a73_0x27b171(0x14f)](){const _0xebddc4=a73_0x27b171;job_detail_1[_0xebddc4(0x16a)][_0xebddc4(0x181)](_0xebddc4(0x152)),this[_0xebddc4(0x16d)][_0xebddc4(0x181)](_0xebddc4(0x152)),await this[_0xebddc4(0x177)][_0xebddc4(0x151)]();}async[a73_0x27b171(0x16f)](){const _0x580f99=a73_0x27b171;!this[_0x580f99(0x15a)]&&(job_detail_1['systemLogger'][_0x580f99(0x181)]('Enable\x20automation\x20process'),this[_0x580f99(0x16d)][_0x580f99(0x181)](_0x580f99(0x185)),await this[_0x580f99(0x177)][_0x580f99(0x172)]()[_0x580f99(0x17f)](_0x28212f=>{const _0x24a03d=_0x580f99;this[_0x24a03d(0x15a)]=!![];throw _0x28212f;}));}async[a73_0x27b171(0x190)](){const _0x224209=a73_0x27b171,_0x296988=await(0x0,promises_1['readFile'])(path_1[_0x224209(0x18e)][_0x224209(0x176)](job_detail_1['jobStorePath'],job_1[_0x224209(0x187)]),{'encoding':_0x224209(0x159)});return await(0x0,promises_1['rm'])(path_1['default']['join'](job_detail_1[_0x224209(0x150)],job_1[_0x224209(0x187)]),{'recursive':!![],'force':!![]}),JSON[_0x224209(0x18b)](_0x296988)[_0x224209(0x194)];}[a73_0x27b171(0x178)](_0x5eaa41){const _0x5128d0=a73_0x27b171;return(0x0,promises_1[_0x5128d0(0x170)])(path_1[_0x5128d0(0x18e)][_0x5128d0(0x176)](job_detail_1['jobStorePath'],constants_1[_0x5128d0(0x179)]),Buffer[_0x5128d0(0x160)](_0x5eaa41,_0x5128d0(0x199)));}async[a73_0x27b171(0x195)](){const _0x2cb0e9=a73_0x27b171;this[_0x2cb0e9(0x155)]=await this['getManifest']();const {objectRules:_0xfea65b,credentials:_0x1ff106}=this[_0x2cb0e9(0x155)];this[_0x2cb0e9(0x16d)]=await new logger_details_1[(_0x2cb0e9(0x17e))](job_detail_1['jobStorePath'],job_detail_1[_0x2cb0e9(0x171)])[_0x2cb0e9(0x183)](),this['_loggerJobState']=await new logger_job_state_1[(_0x2cb0e9(0x189))](job_detail_1['jobStorePath'],job_detail_1['jobId'])[_0x2cb0e9(0x183)](Object[_0x2cb0e9(0x191)](_0xfea65b));try{this['_loggerJobState'][_0x2cb0e9(0x174)](logger_enums_1[_0x2cb0e9(0x182)][_0x2cb0e9(0x15c)]),this[_0x2cb0e9(0x164)]=await salesforce_1['AxiosInstanceUtils'][_0x2cb0e9(0x184)](new auth_manager_1['AuthManager'](_0x1ff106),[],{'headers':{'Accept-Encoding':'gzip'}}),await this['initAutomationProcess'](),await this[_0x2cb0e9(0x14f)](),await this[_0x2cb0e9(0x186)](),await this[_0x2cb0e9(0x16f)](),this[_0x2cb0e9(0x15d)][_0x2cb0e9(0x174)](logger_enums_1[_0x2cb0e9(0x182)]['COMPLETED']);}catch(_0x2e5505){await this['enableAutomationProcess']()[_0x2cb0e9(0x17f)](_0x1e167e=>{const _0x3bd47f=_0x2cb0e9;job_detail_1[_0x3bd47f(0x16a)][_0x3bd47f(0x16e)](_0x1e167e[_0x3bd47f(0x18f)]);}),this[_0x2cb0e9(0x16d)][_0x2cb0e9(0x180)](_0x2e5505[_0x2cb0e9(0x18f)]),this[_0x2cb0e9(0x15d)]['setJobStatus'](logger_enums_1[_0x2cb0e9(0x182)]['FAILED']),this[_0x2cb0e9(0x15d)][_0x2cb0e9(0x18c)](_0x2e5505[_0x2cb0e9(0x18f)]),job_detail_1[_0x2cb0e9(0x16a)][_0x2cb0e9(0x16e)](_0x2e5505[_0x2cb0e9(0x18f)]);}finally{this[_0x2cb0e9(0x16d)][_0x2cb0e9(0x181)](_0x2cb0e9(0x19a)),job_detail_1[_0x2cb0e9(0x16a)][_0x2cb0e9(0x181)](_0x2cb0e9(0x19a)),await this[_0x2cb0e9(0x15d)][_0x2cb0e9(0x153)](),await this[_0x2cb0e9(0x16d)][_0x2cb0e9(0x153)]();}}}exports[a73_0x27b171(0x15b)]=MaskingJob,new MaskingJob()[a73_0x27b171(0x195)]()[a73_0x27b171(0x154)](()=>process['exit'](0x0))[a73_0x27b171(0x17f)](()=>process[a73_0x27b171(0x168)](0x1));