const a91_0x577abb=a91_0x426c;(function(_0x40ef27,_0x5a5385){const _0xac5854=a91_0x426c,_0x307700=_0x40ef27();while(!![]){try{const _0x2c09c8=parseInt(_0xac5854(0x15e))/0x1+parseInt(_0xac5854(0x163))/0x2*(parseInt(_0xac5854(0x173))/0x3)+-parseInt(_0xac5854(0x189))/0x4*(-parseInt(_0xac5854(0x17d))/0x5)+parseInt(_0xac5854(0x14c))/0x6*(-parseInt(_0xac5854(0x171))/0x7)+-parseInt(_0xac5854(0x17a))/0x8*(parseInt(_0xac5854(0x152))/0x9)+parseInt(_0xac5854(0x164))/0xa+-parseInt(_0xac5854(0x155))/0xb;if(_0x2c09c8===_0x5a5385)break;else _0x307700['push'](_0x307700['shift']());}catch(_0x858042){_0x307700['push'](_0x307700['shift']());}}}(a91_0x2b0a,0x1f9e4));const a91_0x2d9196=(function(){let _0x371b9b=!![];return function(_0x2ba99c,_0x5b30b0){const _0x2a1545=_0x371b9b?function(){const _0x5d3e89=a91_0x426c;if(_0x5b30b0){const _0x4847f3=_0x5b30b0[_0x5d3e89(0x156)](_0x2ba99c,arguments);return _0x5b30b0=null,_0x4847f3;}}:function(){};return _0x371b9b=![],_0x2a1545;};}()),a91_0xb0706b=a91_0x2d9196(this,function(){const _0x4535a7=a91_0x426c;return a91_0xb0706b[_0x4535a7(0x17e)]()['search'](_0x4535a7(0x161))[_0x4535a7(0x17e)]()[_0x4535a7(0x176)](a91_0xb0706b)['search'](_0x4535a7(0x161));});function a91_0x426c(_0xd3e99b,_0x3c69e2){const _0x50aaa9=a91_0x2b0a();return a91_0x426c=function(_0xb0706b,_0x2d9196){_0xb0706b=_0xb0706b-0x141;let _0x2b0ae2=_0x50aaa9[_0xb0706b];return _0x2b0ae2;},a91_0x426c(_0xd3e99b,_0x3c69e2);}a91_0xb0706b();function a91_0x2b0a(){const _0x37f0b4=['enableAutomationProcess','1908lkRaFg','readFile','MaskingJob','push','getManagerAutomationProcessOptions','Start\x20Masking\x20Process','catch','init','IN_PROGRESS','./classes/logger/logger-job-state','@flosum/salesforce','Enable\x20automation\x20process','_loggerJobState','__esModule','./classes/step/steps-creator','parse','LoggerDetails','utf-8','saveSourceAutomationProcessesBackup','18gQzYXU','_isEnableAutomationProcessError','jobStorePath','jobId','JobStatus','./job-detail','1363887UofClW','default','./enums/logger.enums','1594967ZlznAW','apply','execute','exit','keys','join','./classes/logger/logger-details','AxiosInstanceUtils','log','237193QxkbeF','LoggerJobState','masking','(((.+)+)+)+$','fs/promises','970QaEfJZ','381200LPgYol','enable','initAutomationProcess','getManifest','FAILED','../../../constants/job','disableAutomationProcess','path','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','../../shared/managers/auth.manager','exception','_request','systemLogger','556031uPdCZK','message','999wEmSFd','_managerAutomationProcess','StepsCreator','constructor','_loggerDetails','_steps','gzip','8pOwhFJ','details','writeFile','2385JXicWj','toString','ManagerAutomationProcess','defineProperty','_maskingManifest','MANIFEST_FILENAME','setJobStatus','create','kill','Disable\x20automation\x20process','__importDefault'];a91_0x2b0a=function(){return _0x37f0b4;};return a91_0x2b0a();}'use strict';var __importDefault=this&&this[a91_0x577abb(0x187)]||function(_0x1a77c7){const _0x51e5da=a91_0x577abb;return _0x1a77c7&&_0x1a77c7[_0x51e5da(0x146)]?_0x1a77c7:{'default':_0x1a77c7};};Object[a91_0x577abb(0x180)](exports,a91_0x577abb(0x146),{'value':!![]}),exports[a91_0x577abb(0x18b)]=void 0x0;const promises_1=require(a91_0x577abb(0x162)),salesforce_1=require(a91_0x577abb(0x143)),steps_creator_1=require(a91_0x577abb(0x147)),logger_enums_1=require(a91_0x577abb(0x154)),logger_details_1=require(a91_0x577abb(0x15b)),logger_job_state_1=require(a91_0x577abb(0x142)),job_1=require(a91_0x577abb(0x169)),path_1=__importDefault(require(a91_0x577abb(0x16b))),auth_manager_1=require(a91_0x577abb(0x16d)),constants_1=require('../constants'),job_detail_1=require(a91_0x577abb(0x151));class MaskingJob{constructor(){const _0xb821e2=a91_0x577abb;this[_0xb821e2(0x14d)]=![];}async[a91_0x577abb(0x166)](){const _0x54c4bc=a91_0x577abb,{objectRules:_0x42f82e}=this['_maskingManifest'];this[_0x54c4bc(0x174)]=new salesforce_1[(_0x54c4bc(0x17f))](this[_0x54c4bc(0x18d)](_0x42f82e));}async[a91_0x577abb(0x160)](){const _0x2f479a=a91_0x577abb;job_detail_1[_0x2f479a(0x170)][_0x2f479a(0x15d)]('Start\x20Masking\x20Process'),this[_0x2f479a(0x177)]['log'](_0x2f479a(0x18e));const {objectRules:_0x87dc5b,libraries:_0x402832}=this['_maskingManifest'];this[_0x2f479a(0x178)]=await new steps_creator_1[(_0x2f479a(0x175))]({'loggerDetails':this[_0x2f479a(0x177)],'loggerJobState':this[_0x2f479a(0x145)],'libraries':_0x402832,'objectRules':_0x87dc5b,'request':this[_0x2f479a(0x16f)]})['create']();for(const _0x521aaa of this[_0x2f479a(0x178)]){await _0x521aaa[_0x2f479a(0x157)]();}}[a91_0x577abb(0x18d)](_0x189f77){const _0x34aa62=a91_0x577abb,_0x18f90c=[],_0x1dad2b=[],_0x3890d9=[],_0x140cff=[],_0x31abe1=[];for(const _0x429afa in _0x189f77){const {isDisableProcessBuilder:_0x296cf9,isDisableTrigger:_0x42f30a,isDisableValidationRule:_0x90b03a,isDisableWorkflow:_0x5bd1f7,isDisableLookupFilter:_0x33a975}=_0x189f77[_0x429afa]['disableAutomation'];_0x296cf9&&_0x3890d9[_0x34aa62(0x18c)](_0x429afa),_0x42f30a&&_0x18f90c[_0x34aa62(0x18c)](_0x429afa),_0x90b03a&&_0x140cff['push'](_0x429afa),_0x5bd1f7&&_0x1dad2b[_0x34aa62(0x18c)](_0x429afa),_0x33a975&&_0x31abe1[_0x34aa62(0x18c)](_0x429afa);}return{'instance':this[_0x34aa62(0x16f)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x18f90c,'validationRulesObjects':_0x140cff,'workflowsObjects':_0x1dad2b,'flowsAndProcessBuilderObjects':_0x3890d9,'lookupFiltersObjects':_0x31abe1};}async['disableAutomationProcess'](){const _0x103393=a91_0x577abb;job_detail_1[_0x103393(0x170)][_0x103393(0x15d)]('Disable\x20automation\x20process'),this[_0x103393(0x177)]['log'](_0x103393(0x186)),await this[_0x103393(0x174)]['disable']();}async[a91_0x577abb(0x188)](){const _0x1ee52d=a91_0x577abb;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x1ee52d(0x170)][_0x1ee52d(0x15d)](_0x1ee52d(0x144)),this[_0x1ee52d(0x177)][_0x1ee52d(0x15d)](_0x1ee52d(0x144)),await this[_0x1ee52d(0x174)][_0x1ee52d(0x165)]()[_0x1ee52d(0x18f)](_0x26d1c6=>{this['_isEnableAutomationProcessError']=!![];throw _0x26d1c6;}));}async[a91_0x577abb(0x167)](){const _0x2a9b9b=a91_0x577abb,_0x141303=await(0x0,promises_1[_0x2a9b9b(0x18a)])(path_1['default'][_0x2a9b9b(0x15a)](job_detail_1[_0x2a9b9b(0x14e)],job_1[_0x2a9b9b(0x182)]),{'encoding':_0x2a9b9b(0x14a)});return await(0x0,promises_1['rm'])(path_1[_0x2a9b9b(0x153)]['join'](job_detail_1[_0x2a9b9b(0x14e)],job_1[_0x2a9b9b(0x182)]),{'recursive':!![],'force':!![]}),JSON[_0x2a9b9b(0x148)](_0x141303)[_0x2a9b9b(0x17b)];}[a91_0x577abb(0x14b)](_0x4b75e6){const _0x3014e8=a91_0x577abb;return(0x0,promises_1[_0x3014e8(0x17c)])(path_1[_0x3014e8(0x153)]['join'](job_detail_1[_0x3014e8(0x14e)],constants_1[_0x3014e8(0x16c)]),_0x4b75e6);}async['execute'](){const _0x433267=a91_0x577abb;this[_0x433267(0x181)]=await this[_0x433267(0x167)]();const {objectRules:_0xf4bdea,credentials:_0x270163}=this[_0x433267(0x181)];this[_0x433267(0x177)]=await new logger_details_1[(_0x433267(0x149))](job_detail_1[_0x433267(0x14e)],job_detail_1[_0x433267(0x14f)])['init'](),this[_0x433267(0x145)]=await new logger_job_state_1[(_0x433267(0x15f))](job_detail_1['jobStorePath'],job_detail_1[_0x433267(0x14f)])[_0x433267(0x190)](Object[_0x433267(0x159)](_0xf4bdea));try{this[_0x433267(0x145)]['setJobStatus'](logger_enums_1[_0x433267(0x150)][_0x433267(0x141)]),this['_request']=await salesforce_1[_0x433267(0x15c)][_0x433267(0x184)](new auth_manager_1['AuthManager'](_0x270163),[],{'headers':{'Accept-Encoding':_0x433267(0x179)}}),await this[_0x433267(0x166)](),await this[_0x433267(0x16a)](),await this['masking'](),await this['enableAutomationProcess'](),this[_0x433267(0x145)][_0x433267(0x183)](logger_enums_1['JobStatus']['COMPLETED']);}catch(_0x2f1dca){await this[_0x433267(0x188)]()[_0x433267(0x18f)](_0xe9a1ed=>{const _0x57fbbe=_0x433267;job_detail_1[_0x57fbbe(0x170)]['error'](_0xe9a1ed['message']);}),this[_0x433267(0x177)][_0x433267(0x16e)](_0x2f1dca[_0x433267(0x172)]),this['_loggerJobState']['setJobStatus'](logger_enums_1['JobStatus'][_0x433267(0x168)]),this[_0x433267(0x145)]['setJobError'](_0x2f1dca[_0x433267(0x172)]),job_detail_1[_0x433267(0x170)]['error'](_0x2f1dca[_0x433267(0x172)]);}finally{this[_0x433267(0x177)][_0x433267(0x15d)]('Finish\x20Masking\x20Process'),job_detail_1[_0x433267(0x170)]['log']('Finish\x20Masking\x20Process'),await this[_0x433267(0x145)][_0x433267(0x185)](),await this[_0x433267(0x177)]['kill']();}}}exports[a91_0x577abb(0x18b)]=MaskingJob,new MaskingJob()['execute']()['then'](()=>process[a91_0x577abb(0x158)](0x0))[a91_0x577abb(0x18f)](()=>process[a91_0x577abb(0x158)](0x1));