const a90_0x5e7369=a90_0x4324;(function(_0x5c38fb,_0x149190){const _0x14ef8b=a90_0x4324,_0x2fd5b5=_0x5c38fb();while(!![]){try{const _0xeb9664=-parseInt(_0x14ef8b(0x11f))/0x1+parseInt(_0x14ef8b(0x100))/0x2*(-parseInt(_0x14ef8b(0x131))/0x3)+-parseInt(_0x14ef8b(0x10e))/0x4*(-parseInt(_0x14ef8b(0x138))/0x5)+parseInt(_0x14ef8b(0x11b))/0x6*(-parseInt(_0x14ef8b(0x146))/0x7)+parseInt(_0x14ef8b(0x148))/0x8*(parseInt(_0x14ef8b(0x128))/0x9)+-parseInt(_0x14ef8b(0x14a))/0xa*(parseInt(_0x14ef8b(0x13a))/0xb)+parseInt(_0x14ef8b(0x121))/0xc*(parseInt(_0x14ef8b(0x110))/0xd);if(_0xeb9664===_0x149190)break;else _0x2fd5b5['push'](_0x2fd5b5['shift']());}catch(_0x317ea6){_0x2fd5b5['push'](_0x2fd5b5['shift']());}}}(a90_0x26b2,0x50b4c));function a90_0x4324(_0x386e19,_0x30e3c5){const _0x2978d5=a90_0x26b2();return a90_0x4324=function(_0x3ece45,_0x31c9f1){_0x3ece45=_0x3ece45-0xfd;let _0x26b2c1=_0x2978d5[_0x3ece45];return _0x26b2c1;},a90_0x4324(_0x386e19,_0x30e3c5);}const a90_0x31c9f1=(function(){let _0xa350af=!![];return function(_0x3c5461,_0x32ce04){const _0x4e5a53=_0xa350af?function(){if(_0x32ce04){const _0x43a845=_0x32ce04['apply'](_0x3c5461,arguments);return _0x32ce04=null,_0x43a845;}}:function(){};return _0xa350af=![],_0x4e5a53;};}()),a90_0x3ece45=a90_0x31c9f1(this,function(){const _0x1e7026=a90_0x4324;return a90_0x3ece45[_0x1e7026(0x125)]()[_0x1e7026(0xfe)](_0x1e7026(0x111))[_0x1e7026(0x125)]()[_0x1e7026(0x14d)](a90_0x3ece45)[_0x1e7026(0xfe)](_0x1e7026(0x111));});a90_0x3ece45();'use strict';function a90_0x26b2(){const _0x1ecbae=['_isEnableAutomationProcessError','gzip','78048SLLQVk','_managerAutomationProcess','_request','exit','setJobStatus','MaskingJob','enableAutomationProcess','5MFmliZ','ManagerAutomationProcess','407187drTKyK','../../../constants/job','Enable\x20automation\x20process','FAILED','__importDefault','then','disable','@flosum/salesforce','catch','LoggerDetails','saveSourceAutomationProcessesBackup','IN_PROGRESS','791HkDIcN','keys','16lLWqwf','setJobError','30kiHbAw','jobStorePath','getManagerAutomationProcessOptions','constructor','create','search','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','46WZWzhS','../constants','log','./classes/logger/logger-job-state','disableAutomationProcess','Finish\x20Masking\x20Process','_loggerJobState','init','execute','writeFile','./enums/logger.enums','getManifest','utf-8','./classes/step/steps-creator','2094164IBKKbr','../../shared/managers/auth.manager','338sQGSgT','(((.+)+)+)+$','MANIFEST_FILENAME','__esModule','from','jobId','initAutomationProcess','systemLogger','_steps','_loggerDetails','StepsCreator','28674LjKkeh','disableAutomation','defineProperty','exception','471889AeBIqM','push','466104SVGrtW','kill','AuthManager','message','toString','default','_maskingManifest','2333133ICuQEr','join','masking','LoggerJobState','error','AxiosInstanceUtils','JobStatus'];a90_0x26b2=function(){return _0x1ecbae;};return a90_0x26b2();}var __importDefault=this&&this[a90_0x5e7369(0x13e)]||function(_0x43f6ee){const _0x3f09e1=a90_0x5e7369;return _0x43f6ee&&_0x43f6ee[_0x3f09e1(0x113)]?_0x43f6ee:{'default':_0x43f6ee};};Object[a90_0x5e7369(0x11d)](exports,a90_0x5e7369(0x113),{'value':!![]}),exports[a90_0x5e7369(0x136)]=void 0x0;const promises_1=require('fs/promises'),salesforce_1=require(a90_0x5e7369(0x141)),steps_creator_1=require(a90_0x5e7369(0x10d)),logger_enums_1=require(a90_0x5e7369(0x10a)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require(a90_0x5e7369(0x103)),job_1=require(a90_0x5e7369(0x13b)),path_1=__importDefault(require('path')),auth_manager_1=require(a90_0x5e7369(0x10f)),constants_1=require(a90_0x5e7369(0x101)),job_detail_1=require('./job-detail');class MaskingJob{constructor(){const _0x3be1c7=a90_0x5e7369;this[_0x3be1c7(0x12f)]=![];}async[a90_0x5e7369(0x116)](){const _0x3ce4b8=a90_0x5e7369,{objectRules:_0x3abc8d}=this[_0x3ce4b8(0x127)];this[_0x3ce4b8(0x132)]=new salesforce_1[(_0x3ce4b8(0x139))](this[_0x3ce4b8(0x14c)](_0x3abc8d));}async[a90_0x5e7369(0x12a)](){const _0x58823c=a90_0x5e7369;job_detail_1[_0x58823c(0x117)][_0x58823c(0x102)]('Start\x20Masking\x20Process'),this[_0x58823c(0x119)][_0x58823c(0x102)]('Start\x20Masking\x20Process');const {objectRules:_0x5bb6da,libraries:_0x5ea08a}=this[_0x58823c(0x127)];this['_steps']=await new steps_creator_1[(_0x58823c(0x11a))]({'loggerDetails':this[_0x58823c(0x119)],'loggerJobState':this['_loggerJobState'],'libraries':_0x5ea08a,'objectRules':_0x5bb6da,'request':this[_0x58823c(0x133)]})[_0x58823c(0xfd)]();for(const _0x3bac03 of this[_0x58823c(0x118)]){await _0x3bac03[_0x58823c(0x108)]();}}[a90_0x5e7369(0x14c)](_0x33b3b9){const _0x58136b=a90_0x5e7369,_0x44284d=[],_0x3521fd=[],_0x3ba139=[],_0x18b624=[];for(const _0x33b08e in _0x33b3b9){const {isDisableProcessBuilder:_0x593b15,isDisableTrigger:_0x1d278c,isDisableValidationRule:_0x2a1ada,isDisableWorkflow:_0x54a2d8}=_0x33b3b9[_0x33b08e][_0x58136b(0x11c)];_0x593b15&&_0x3ba139[_0x58136b(0x120)](_0x33b08e),_0x1d278c&&_0x44284d[_0x58136b(0x120)](_0x33b08e),_0x2a1ada&&_0x18b624['push'](_0x33b08e),_0x54a2d8&&_0x3521fd[_0x58136b(0x120)](_0x33b08e);}return{'instance':this[_0x58136b(0x133)],'saveSourceMetadataBackup':this[_0x58136b(0x144)],'triggersObjects':_0x44284d,'workflowsObjects':_0x3521fd,'processBuilderObjects':_0x3ba139,'validationRulesObjects':_0x18b624};}async[a90_0x5e7369(0x104)](){const _0x3bb7a2=a90_0x5e7369;job_detail_1[_0x3bb7a2(0x117)][_0x3bb7a2(0x102)]('Disable\x20automation\x20process'),this[_0x3bb7a2(0x119)][_0x3bb7a2(0x102)]('Disable\x20automation\x20process'),await this[_0x3bb7a2(0x132)][_0x3bb7a2(0x140)]();}async[a90_0x5e7369(0x137)](){const _0x254d3c=a90_0x5e7369;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x254d3c(0x117)][_0x254d3c(0x102)](_0x254d3c(0x13c)),this[_0x254d3c(0x119)][_0x254d3c(0x102)](_0x254d3c(0x13c)),await this[_0x254d3c(0x132)]['enable']()[_0x254d3c(0x142)](_0x41a45f=>{this['_isEnableAutomationProcessError']=!![];throw _0x41a45f;}));}async[a90_0x5e7369(0x10b)](){const _0x501652=a90_0x5e7369,_0x832f54=await(0x0,promises_1['readFile'])(path_1[_0x501652(0x126)][_0x501652(0x129)](job_detail_1[_0x501652(0x14b)],job_1[_0x501652(0x112)]),{'encoding':_0x501652(0x10c)});return await(0x0,promises_1['rm'])(path_1[_0x501652(0x126)]['join'](job_detail_1[_0x501652(0x14b)],job_1[_0x501652(0x112)]),{'recursive':!![],'force':!![]}),JSON['parse'](_0x832f54)['details'];}[a90_0x5e7369(0x144)](_0x594319){const _0x29aa26=a90_0x5e7369;return(0x0,promises_1[_0x29aa26(0x109)])(path_1['default'][_0x29aa26(0x129)](job_detail_1[_0x29aa26(0x14b)],constants_1[_0x29aa26(0xff)]),Buffer[_0x29aa26(0x114)](_0x594319,'base64'));}async[a90_0x5e7369(0x108)](){const _0x3d56ae=a90_0x5e7369;this[_0x3d56ae(0x127)]=await this[_0x3d56ae(0x10b)]();const {objectRules:_0x4e6d17,credentials:_0x5b601a}=this[_0x3d56ae(0x127)];this['_loggerDetails']=await new logger_details_1[(_0x3d56ae(0x143))](job_detail_1[_0x3d56ae(0x14b)],job_detail_1['jobId'])[_0x3d56ae(0x107)](),this[_0x3d56ae(0x106)]=await new logger_job_state_1[(_0x3d56ae(0x12b))](job_detail_1['jobStorePath'],job_detail_1[_0x3d56ae(0x115)])[_0x3d56ae(0x107)](Object[_0x3d56ae(0x147)](_0x4e6d17));try{this[_0x3d56ae(0x106)]['setJobStatus'](logger_enums_1['JobStatus'][_0x3d56ae(0x145)]),this[_0x3d56ae(0x133)]=await salesforce_1[_0x3d56ae(0x12d)][_0x3d56ae(0xfd)](new auth_manager_1[(_0x3d56ae(0x123))](_0x5b601a),[],{'headers':{'Accept-Encoding':_0x3d56ae(0x130)}}),await this[_0x3d56ae(0x116)](),await this[_0x3d56ae(0x104)](),await this[_0x3d56ae(0x12a)](),await this['enableAutomationProcess'](),this[_0x3d56ae(0x106)][_0x3d56ae(0x135)](logger_enums_1[_0x3d56ae(0x12e)]['COMPLETED']);}catch(_0x317394){await this[_0x3d56ae(0x137)]()['catch'](_0x16ea57=>{const _0x97f29f=_0x3d56ae;job_detail_1[_0x97f29f(0x117)][_0x97f29f(0x12c)](_0x16ea57[_0x97f29f(0x124)]);}),this[_0x3d56ae(0x119)][_0x3d56ae(0x11e)](_0x317394[_0x3d56ae(0x124)]),this[_0x3d56ae(0x106)][_0x3d56ae(0x135)](logger_enums_1[_0x3d56ae(0x12e)][_0x3d56ae(0x13d)]),this[_0x3d56ae(0x106)][_0x3d56ae(0x149)](_0x317394['message']),job_detail_1[_0x3d56ae(0x117)]['error'](_0x317394[_0x3d56ae(0x124)]);}finally{this[_0x3d56ae(0x119)][_0x3d56ae(0x102)](_0x3d56ae(0x105)),job_detail_1[_0x3d56ae(0x117)][_0x3d56ae(0x102)](_0x3d56ae(0x105)),await this[_0x3d56ae(0x106)]['kill'](),await this['_loggerDetails'][_0x3d56ae(0x122)]();}}}exports[a90_0x5e7369(0x136)]=MaskingJob,new MaskingJob()['execute']()[a90_0x5e7369(0x13f)](()=>process['exit'](0x0))[a90_0x5e7369(0x142)](()=>process[a90_0x5e7369(0x134)](0x1));