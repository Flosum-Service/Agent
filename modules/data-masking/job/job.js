const a73_0x2b3a65=a73_0x33f8;(function(_0x1ffb1e,_0x499ce5){const _0x4f4c7b=a73_0x33f8,_0x40e306=_0x1ffb1e();while(!![]){try{const _0x48c74f=parseInt(_0x4f4c7b(0xbb))/0x1*(parseInt(_0x4f4c7b(0xcc))/0x2)+-parseInt(_0x4f4c7b(0xb6))/0x3+-parseInt(_0x4f4c7b(0xa7))/0x4*(parseInt(_0x4f4c7b(0xd3))/0x5)+parseInt(_0x4f4c7b(0xc3))/0x6+parseInt(_0x4f4c7b(0xc2))/0x7+parseInt(_0x4f4c7b(0xde))/0x8*(parseInt(_0x4f4c7b(0xe6))/0x9)+-parseInt(_0x4f4c7b(0xbc))/0xa;if(_0x48c74f===_0x499ce5)break;else _0x40e306['push'](_0x40e306['shift']());}catch(_0x81af36){_0x40e306['push'](_0x40e306['shift']());}}}(a73_0x8568,0x53846));const a73_0x372442=(function(){let _0x5d8270=!![];return function(_0x495201,_0x514a90){const _0x1147f3=_0x5d8270?function(){const _0x5287eb=a73_0x33f8;if(_0x514a90){const _0x7561bf=_0x514a90[_0x5287eb(0xd7)](_0x495201,arguments);return _0x514a90=null,_0x7561bf;}}:function(){};return _0x5d8270=![],_0x1147f3;};}()),a73_0x35ff03=a73_0x372442(this,function(){const _0x8b9ae9=a73_0x33f8;return a73_0x35ff03['toString']()['search']('(((.+)+)+)+$')[_0x8b9ae9(0xbe)]()[_0x8b9ae9(0xd0)](a73_0x35ff03)['search'](_0x8b9ae9(0xe7));});a73_0x35ff03();function a73_0x8568(){const _0x267d40=['enableAutomationProcess','20XsMquM','./classes/step/steps-creator','getManagerAutomationProcessOptions','../../../constants/job','apply','StepsCreator','./classes/logger/logger-details','getManifest','_steps','push','enable','72MSVZJt','create','systemLogger','../constants','setJobError','jobId','Disable\x20automation\x20process','LoggerDetails','496503MejJdU','(((.+)+)+)+$','path','MaskingJob','./job-detail','JobStatus','kill','@flosum/salesforce','initAutomationProcess','AuthManager','fs/promises','_request','log','defineProperty','execute','568724wXeADi','saveSourceAutomationProcessesBackup','then','Finish\x20Masking\x20Process','writeFile','ManagerAutomationProcess','exception','exit','COMPLETED','_loggerDetails','message','_managerAutomationProcess','__esModule','Enable\x20automation\x20process','LoggerJobState','1009608wZJXdo','jobStorePath','__importDefault','_loggerJobState','catch','17lITJpa','4264810mvQWJu','_isEnableAutomationProcessError','toString','gzip','default','setJobStatus','4298959xXNFKJ','334728rSwcxE','utf-8','masking','readFile','_maskingManifest','join','keys','error','Start\x20Masking\x20Process','59694oIyHoE','./enums/logger.enums','AxiosInstanceUtils','./classes/logger/logger-job-state','constructor','MANIFEST_FILENAME'];a73_0x8568=function(){return _0x267d40;};return a73_0x8568();}'use strict';var __importDefault=this&&this[a73_0x2b3a65(0xb8)]||function(_0x1957d1){const _0x2e8437=a73_0x2b3a65;return _0x1957d1&&_0x1957d1[_0x2e8437(0xb3)]?_0x1957d1:{'default':_0x1957d1};};Object[a73_0x2b3a65(0xf3)](exports,a73_0x2b3a65(0xb3),{'value':!![]}),exports[a73_0x2b3a65(0xe9)]=void 0x0;const promises_1=require(a73_0x2b3a65(0xf0)),salesforce_1=require(a73_0x2b3a65(0xed)),steps_creator_1=require(a73_0x2b3a65(0xd4)),logger_enums_1=require(a73_0x2b3a65(0xcd)),logger_details_1=require(a73_0x2b3a65(0xd9)),logger_job_state_1=require(a73_0x2b3a65(0xcf)),job_1=require(a73_0x2b3a65(0xd6)),path_1=__importDefault(require(a73_0x2b3a65(0xe8))),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a73_0x2b3a65(0xe1)),job_detail_1=require(a73_0x2b3a65(0xea));class MaskingJob{constructor(){const _0x52ab1e=a73_0x2b3a65;this[_0x52ab1e(0xbd)]=![];}async[a73_0x2b3a65(0xee)](){const _0x2f276e=a73_0x2b3a65,{objectRules:_0x284b91}=this[_0x2f276e(0xc7)];this[_0x2f276e(0xb2)]=new salesforce_1[(_0x2f276e(0xac))](this[_0x2f276e(0xd5)](_0x284b91));}async[a73_0x2b3a65(0xc5)](){const _0x2a77b1=a73_0x2b3a65;job_detail_1[_0x2a77b1(0xe0)]['log'](_0x2a77b1(0xcb)),this[_0x2a77b1(0xb0)][_0x2a77b1(0xf2)](_0x2a77b1(0xcb));const {objectRules:_0x2f1cc4,libraries:_0x1e1e08}=this[_0x2a77b1(0xc7)];this[_0x2a77b1(0xdb)]=await new steps_creator_1[(_0x2a77b1(0xd8))]({'loggerDetails':this[_0x2a77b1(0xb0)],'loggerJobState':this['_loggerJobState'],'libraries':_0x1e1e08,'objectRules':_0x2f1cc4,'request':this['_request']})[_0x2a77b1(0xdf)]();for(const _0x39c535 of this[_0x2a77b1(0xdb)]){await _0x39c535[_0x2a77b1(0xa6)]();}}[a73_0x2b3a65(0xd5)](_0xdae854){const _0x46a044=a73_0x2b3a65,_0x591dc8=[],_0x23388e=[],_0x543d76=[],_0x543cbd=[];for(const _0x459afc in _0xdae854){const {isDisableProcessBuilder:_0x436ed1,isDisableTrigger:_0x3b5832,isDisableValidationRule:_0x434947,isDisableWorkflow:_0x19d0e0}=_0xdae854[_0x459afc]['disableAutomation'];_0x436ed1&&_0x543d76[_0x46a044(0xdc)](_0x459afc),_0x3b5832&&_0x591dc8[_0x46a044(0xdc)](_0x459afc),_0x434947&&_0x543cbd['push'](_0x459afc),_0x19d0e0&&_0x23388e[_0x46a044(0xdc)](_0x459afc);}return{'instance':this['_request'],'saveSourceMetadataBackup':this[_0x46a044(0xa8)],'triggersObjects':_0x591dc8,'workflowsObjects':_0x23388e,'processBuilderObjects':_0x543d76,'validationRulesObjects':_0x543cbd};}async['disableAutomationProcess'](){const _0x15568c=a73_0x2b3a65;job_detail_1[_0x15568c(0xe0)][_0x15568c(0xf2)](_0x15568c(0xe4)),this['_loggerDetails']['log']('Disable\x20automation\x20process'),await this[_0x15568c(0xb2)]['disable']();}async[a73_0x2b3a65(0xd2)](){const _0x2a87b0=a73_0x2b3a65;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x2a87b0(0xe0)][_0x2a87b0(0xf2)](_0x2a87b0(0xb4)),this['_loggerDetails'][_0x2a87b0(0xf2)](_0x2a87b0(0xb4)),await this['_managerAutomationProcess'][_0x2a87b0(0xdd)]()[_0x2a87b0(0xba)](_0x5e3331=>{this['_isEnableAutomationProcessError']=!![];throw _0x5e3331;}));}async['getManifest'](){const _0x425206=a73_0x2b3a65,_0x5d0a13=await(0x0,promises_1[_0x425206(0xc6)])(path_1['default']['join'](job_detail_1[_0x425206(0xb7)],job_1[_0x425206(0xd1)]),{'encoding':_0x425206(0xc4)});return await(0x0,promises_1['rm'])(path_1['default']['join'](job_detail_1['jobStorePath'],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON['parse'](_0x5d0a13)['details'];}[a73_0x2b3a65(0xa8)](_0x358af8){const _0x42f5e2=a73_0x2b3a65;return(0x0,promises_1[_0x42f5e2(0xab)])(path_1[_0x42f5e2(0xc0)][_0x42f5e2(0xc8)](job_detail_1[_0x42f5e2(0xb7)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer['from'](_0x358af8,'base64'));}async[a73_0x2b3a65(0xa6)](){const _0x4ec2aa=a73_0x2b3a65;this[_0x4ec2aa(0xc7)]=await this[_0x4ec2aa(0xda)]();const {objectRules:_0x36831d,credentials:_0x226640}=this[_0x4ec2aa(0xc7)];this['_loggerDetails']=await new logger_details_1[(_0x4ec2aa(0xe5))](job_detail_1['jobStorePath'],job_detail_1[_0x4ec2aa(0xe3)])['init'](),this[_0x4ec2aa(0xb9)]=await new logger_job_state_1[(_0x4ec2aa(0xb5))](job_detail_1[_0x4ec2aa(0xb7)],job_detail_1[_0x4ec2aa(0xe3)])['init'](Object[_0x4ec2aa(0xc9)](_0x36831d));try{this['_loggerJobState'][_0x4ec2aa(0xc1)](logger_enums_1[_0x4ec2aa(0xeb)]['IN_PROGRESS']),this[_0x4ec2aa(0xf1)]=await salesforce_1[_0x4ec2aa(0xce)][_0x4ec2aa(0xdf)](new auth_manager_1[(_0x4ec2aa(0xef))](_0x226640),[],{'headers':{'Accept-Encoding':_0x4ec2aa(0xbf)}}),await this[_0x4ec2aa(0xee)](),await this['disableAutomationProcess'](),await this['masking'](),await this['enableAutomationProcess'](),this[_0x4ec2aa(0xb9)]['setJobStatus'](logger_enums_1[_0x4ec2aa(0xeb)][_0x4ec2aa(0xaf)]);}catch(_0x43cb76){await this[_0x4ec2aa(0xd2)]()['catch'](_0x8acf0c=>{const _0x1ba832=_0x4ec2aa;job_detail_1[_0x1ba832(0xe0)]['error'](_0x8acf0c[_0x1ba832(0xb1)]);}),this['_loggerDetails'][_0x4ec2aa(0xad)](_0x43cb76[_0x4ec2aa(0xb1)]),this['_loggerJobState'][_0x4ec2aa(0xc1)](logger_enums_1[_0x4ec2aa(0xeb)]['FAILED']),this[_0x4ec2aa(0xb9)][_0x4ec2aa(0xe2)](_0x43cb76[_0x4ec2aa(0xb1)]),job_detail_1['systemLogger'][_0x4ec2aa(0xca)](_0x43cb76[_0x4ec2aa(0xb1)]);}finally{this[_0x4ec2aa(0xb0)][_0x4ec2aa(0xf2)](_0x4ec2aa(0xaa)),job_detail_1['systemLogger']['log'](_0x4ec2aa(0xaa)),await this[_0x4ec2aa(0xb9)][_0x4ec2aa(0xec)](),await this[_0x4ec2aa(0xb0)]['kill']();}}}function a73_0x33f8(_0x555e98,_0x565822){const _0x4bb061=a73_0x8568();return a73_0x33f8=function(_0x35ff03,_0x372442){_0x35ff03=_0x35ff03-0xa6;let _0x8568af=_0x4bb061[_0x35ff03];return _0x8568af;},a73_0x33f8(_0x555e98,_0x565822);}exports[a73_0x2b3a65(0xe9)]=MaskingJob,new MaskingJob()[a73_0x2b3a65(0xa6)]()[a73_0x2b3a65(0xa9)](()=>process[a73_0x2b3a65(0xae)](0x0))['catch'](()=>process['exit'](0x1));