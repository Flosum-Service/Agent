const a90_0x29901f=a90_0x421b;(function(_0x1f54aa,_0x3670f4){const _0x2f98ae=a90_0x421b,_0x59e1a1=_0x1f54aa();while(!![]){try{const _0x59cc64=-parseInt(_0x2f98ae(0xac))/0x1*(-parseInt(_0x2f98ae(0x9d))/0x2)+-parseInt(_0x2f98ae(0xab))/0x3+-parseInt(_0x2f98ae(0xc8))/0x4*(-parseInt(_0x2f98ae(0xcb))/0x5)+parseInt(_0x2f98ae(0xcd))/0x6*(-parseInt(_0x2f98ae(0xb2))/0x7)+-parseInt(_0x2f98ae(0xd4))/0x8+-parseInt(_0x2f98ae(0xbc))/0x9*(parseInt(_0x2f98ae(0xc0))/0xa)+parseInt(_0x2f98ae(0xba))/0xb;if(_0x59cc64===_0x3670f4)break;else _0x59e1a1['push'](_0x59e1a1['shift']());}catch(_0x2ffe7a){_0x59e1a1['push'](_0x59e1a1['shift']());}}}(a90_0x450b,0xb831b));const a90_0x3985ea=(function(){let _0x5d2393=!![];return function(_0x56dbee,_0x163fb1){const _0x5e3343=_0x5d2393?function(){if(_0x163fb1){const _0xd4c53=_0x163fb1['apply'](_0x56dbee,arguments);return _0x163fb1=null,_0xd4c53;}}:function(){};return _0x5d2393=![],_0x5e3343;};}()),a90_0x8512f6=a90_0x3985ea(this,function(){const _0x42dd46=a90_0x421b;return a90_0x8512f6[_0x42dd46(0xb6)]()['search'](_0x42dd46(0xc5))[_0x42dd46(0xb6)]()['constructor'](a90_0x8512f6)[_0x42dd46(0xe1)]('(((.+)+)+)+$');});function a90_0x450b(){const _0x35f0b8=['defineProperty','_loggerDetails','2YsQeaI','Disable\x20automation\x20process','./classes/step/steps-creator','details','getManifest','Enable\x20automation\x20process','enable','keys','FAILED','default','@flosum/salesforce','systemLogger','./enums/logger.enums','init','393210IZpODC','723589tZHRdZ','jobId','_isEnableAutomationProcessError','JobStatus','message','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','7LgymRR','masking','create','_request','toString','push','./job-detail','_steps','14346057kxBqoW','__importDefault','17667qFbMRr','catch','Finish\x20Masking\x20Process','COMPLETED','6850fJaDlZ','disable','../constants','then','execute','(((.+)+)+)+$','setJobError','writeFile','92QmwImQ','fs/promises','_maskingManifest','261525Ovjfgw','kill','5988342jZIMmH','./classes/logger/logger-job-state','_managerAutomationProcess','MANIFEST_FILENAME','error','saveSourceAutomationProcessesBackup','Start\x20Masking\x20Process','20400xMXPho','_loggerJobState','enableAutomationProcess','initAutomationProcess','LoggerDetails','parse','disableAutomation','__esModule','log','jobStorePath','./classes/logger/logger-details','join','disableAutomationProcess','search','../../../constants/job','../../shared/managers/auth.manager','AxiosInstanceUtils'];a90_0x450b=function(){return _0x35f0b8;};return a90_0x450b();}a90_0x8512f6();function a90_0x421b(_0x1edbbf,_0x99ab68){const _0x40b82d=a90_0x450b();return a90_0x421b=function(_0x8512f6,_0x3985ea){_0x8512f6=_0x8512f6-0x9d;let _0x450b87=_0x40b82d[_0x8512f6];return _0x450b87;},a90_0x421b(_0x1edbbf,_0x99ab68);}'use strict';var __importDefault=this&&this[a90_0x29901f(0xbb)]||function(_0x3eb5fb){const _0x18ad3c=a90_0x29901f;return _0x3eb5fb&&_0x3eb5fb[_0x18ad3c(0xdb)]?_0x3eb5fb:{'default':_0x3eb5fb};};Object[a90_0x29901f(0xe5)](exports,'__esModule',{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a90_0x29901f(0xc9)),salesforce_1=require(a90_0x29901f(0xa7)),steps_creator_1=require(a90_0x29901f(0x9f)),logger_enums_1=require(a90_0x29901f(0xa9)),logger_details_1=require(a90_0x29901f(0xde)),logger_job_state_1=require(a90_0x29901f(0xce)),job_1=require(a90_0x29901f(0xe2)),path_1=__importDefault(require('path')),auth_manager_1=require(a90_0x29901f(0xe3)),constants_1=require(a90_0x29901f(0xc2)),job_detail_1=require(a90_0x29901f(0xb8));class MaskingJob{constructor(){const _0x526839=a90_0x29901f;this[_0x526839(0xae)]=![];}async[a90_0x29901f(0xd7)](){const _0x4051db=a90_0x29901f,{objectRules:_0x1429a7}=this['_maskingManifest'];this[_0x4051db(0xcf)]=new salesforce_1['ManagerAutomationProcess'](this['getManagerAutomationProcessOptions'](_0x1429a7));}async[a90_0x29901f(0xb3)](){const _0x23d2b3=a90_0x29901f;job_detail_1[_0x23d2b3(0xa8)][_0x23d2b3(0xdc)](_0x23d2b3(0xd3)),this['_loggerDetails']['log']('Start\x20Masking\x20Process');const {objectRules:_0x360d02,libraries:_0x270a48}=this[_0x23d2b3(0xca)];this['_steps']=await new steps_creator_1['StepsCreator']({'loggerDetails':this[_0x23d2b3(0xe6)],'loggerJobState':this['_loggerJobState'],'libraries':_0x270a48,'objectRules':_0x360d02,'request':this[_0x23d2b3(0xb5)]})['create']();for(const _0x11f3f5 of this[_0x23d2b3(0xb9)]){await _0x11f3f5[_0x23d2b3(0xc4)]();}}['getManagerAutomationProcessOptions'](_0x15e409){const _0x1180f3=a90_0x29901f,_0x2fe331=[],_0x38a369=[],_0x102376=[],_0xfa4917=[],_0x5490bc=[];for(const _0x165545 in _0x15e409){const {isDisableProcessBuilder:_0x59294a,isDisableTrigger:_0x379378,isDisableValidationRule:_0x5d29bc,isDisableWorkflow:_0x1547ea,isDisableLookupFilter:_0x1ebd97}=_0x15e409[_0x165545][_0x1180f3(0xda)];_0x59294a&&_0x102376[_0x1180f3(0xb7)](_0x165545),_0x379378&&_0x2fe331[_0x1180f3(0xb7)](_0x165545),_0x5d29bc&&_0xfa4917[_0x1180f3(0xb7)](_0x165545),_0x1547ea&&_0x38a369[_0x1180f3(0xb7)](_0x165545),_0x1ebd97&&_0x5490bc[_0x1180f3(0xb7)](_0x165545);}return{'instance':this[_0x1180f3(0xb5)],'saveSourceMetadataBackup':this[_0x1180f3(0xd2)],'triggersObjects':_0x2fe331,'validationRulesObjects':_0xfa4917,'workflowsObjects':_0x38a369,'flowsAndProcessBuilderObjects':_0x102376,'lookupFiltersObjects':_0x5490bc};}async[a90_0x29901f(0xe0)](){const _0x2d52e7=a90_0x29901f;job_detail_1[_0x2d52e7(0xa8)][_0x2d52e7(0xdc)]('Disable\x20automation\x20process'),this['_loggerDetails'][_0x2d52e7(0xdc)](_0x2d52e7(0x9e)),await this[_0x2d52e7(0xcf)][_0x2d52e7(0xc1)]();}async[a90_0x29901f(0xd6)](){const _0x33fbdb=a90_0x29901f;!this['_isEnableAutomationProcessError']&&(job_detail_1['systemLogger'][_0x33fbdb(0xdc)](_0x33fbdb(0xa2)),this[_0x33fbdb(0xe6)][_0x33fbdb(0xdc)](_0x33fbdb(0xa2)),await this[_0x33fbdb(0xcf)][_0x33fbdb(0xa3)]()[_0x33fbdb(0xbd)](_0x25ae7c=>{const _0x323e59=_0x33fbdb;this[_0x323e59(0xae)]=!![];throw _0x25ae7c;}));}async[a90_0x29901f(0xa1)](){const _0x5f1a4a=a90_0x29901f,_0x15180a=await(0x0,promises_1['readFile'])(path_1[_0x5f1a4a(0xa6)][_0x5f1a4a(0xdf)](job_detail_1[_0x5f1a4a(0xdd)],job_1[_0x5f1a4a(0xd0)]),{'encoding':'utf-8'});return await(0x0,promises_1['rm'])(path_1[_0x5f1a4a(0xa6)][_0x5f1a4a(0xdf)](job_detail_1['jobStorePath'],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON[_0x5f1a4a(0xd9)](_0x15180a)[_0x5f1a4a(0xa0)];}[a90_0x29901f(0xd2)](_0x504141){const _0x333293=a90_0x29901f;return(0x0,promises_1[_0x333293(0xc7)])(path_1[_0x333293(0xa6)][_0x333293(0xdf)](job_detail_1[_0x333293(0xdd)],constants_1[_0x333293(0xb1)]),_0x504141);}async[a90_0x29901f(0xc4)](){const _0x31a983=a90_0x29901f;this[_0x31a983(0xca)]=await this[_0x31a983(0xa1)]();const {objectRules:_0x3aae36,credentials:_0x5aaf9d}=this[_0x31a983(0xca)];this[_0x31a983(0xe6)]=await new logger_details_1[(_0x31a983(0xd8))](job_detail_1[_0x31a983(0xdd)],job_detail_1[_0x31a983(0xad)])[_0x31a983(0xaa)](),this['_loggerJobState']=await new logger_job_state_1['LoggerJobState'](job_detail_1[_0x31a983(0xdd)],job_detail_1[_0x31a983(0xad)])['init'](Object[_0x31a983(0xa4)](_0x3aae36));try{this[_0x31a983(0xd5)]['setJobStatus'](logger_enums_1[_0x31a983(0xaf)]['IN_PROGRESS']),this[_0x31a983(0xb5)]=await salesforce_1[_0x31a983(0xe4)][_0x31a983(0xb4)](new auth_manager_1['AuthManager'](_0x5aaf9d),[],{'headers':{'Accept-Encoding':'gzip'}}),await this[_0x31a983(0xd7)](),await this['disableAutomationProcess'](),await this['masking'](),await this[_0x31a983(0xd6)](),this[_0x31a983(0xd5)]['setJobStatus'](logger_enums_1[_0x31a983(0xaf)][_0x31a983(0xbf)]);}catch(_0x3103d7){await this[_0x31a983(0xd6)]()[_0x31a983(0xbd)](_0x364759=>{const _0x2976e5=_0x31a983;job_detail_1[_0x2976e5(0xa8)][_0x2976e5(0xd1)](_0x364759['message']);}),this['_loggerDetails']['exception'](_0x3103d7[_0x31a983(0xb0)]),this[_0x31a983(0xd5)]['setJobStatus'](logger_enums_1[_0x31a983(0xaf)][_0x31a983(0xa5)]),this[_0x31a983(0xd5)][_0x31a983(0xc6)](_0x3103d7[_0x31a983(0xb0)]),job_detail_1[_0x31a983(0xa8)]['error'](_0x3103d7[_0x31a983(0xb0)]);}finally{this[_0x31a983(0xe6)][_0x31a983(0xdc)](_0x31a983(0xbe)),job_detail_1['systemLogger'][_0x31a983(0xdc)](_0x31a983(0xbe)),await this[_0x31a983(0xd5)][_0x31a983(0xcc)](),await this['_loggerDetails'][_0x31a983(0xcc)]();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()[a90_0x29901f(0xc4)]()[a90_0x29901f(0xc3)](()=>process['exit'](0x0))[a90_0x29901f(0xbd)](()=>process['exit'](0x1));