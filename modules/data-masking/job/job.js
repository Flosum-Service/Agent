function a90_0x28b7(){const _0x336659=['Start\x20Masking\x20Process','join','./enums/logger.enums','apply','Enable\x20automation\x20process','../constants','443493UcAtHu','@flosum/salesforce','1019560cGOnBi','jobStorePath','264UNifbm','./job-detail','AxiosInstanceUtils','toString','FAILED','_loggerJobState','AuthManager','25135wPmybs','jobId','_isEnableAutomationProcessError','StepsCreator','getManagerAutomationProcessOptions','default','init','create','MANIFEST_FILENAME','systemLogger','getManifest','search','7BemtxD','masking','constructor','LoggerDetails','saveSourceAutomationProcessesBackup','JobStatus','enable','30AwhbJv','gzip','enableAutomationProcess','35yLQqit','__esModule','message','kill','_steps','disable','(((.+)+)+)+$','disableAutomationProcess','log','exit','setJobStatus','./classes/logger/logger-job-state','_loggerDetails','initAutomationProcess','Disable\x20automation\x20process','disableAutomation','_managerAutomationProcess','MaskingJob','3613654SiblGH','3159009uxjzAi','_request','LoggerJobState','_maskingManifest','./classes/step/steps-creator','execute','from','details','catch','parse','10194ejieLD','utf-8','then','ManagerAutomationProcess','157616QPlIke','defineProperty','push','base64'];a90_0x28b7=function(){return _0x336659;};return a90_0x28b7();}const a90_0x2f91e3=a90_0x3c4c;(function(_0x2d8b18,_0x470847){const _0x3cf746=a90_0x3c4c,_0x2c90ac=_0x2d8b18();while(!![]){try{const _0x204027=parseInt(_0x3cf746(0x146))/0x1*(parseInt(_0x3cf746(0x117))/0x2)+parseInt(_0x3cf746(0x125))/0x3+parseInt(_0x3cf746(0x127))/0x4+-parseInt(_0x3cf746(0x130))/0x5*(-parseInt(_0x3cf746(0x129))/0x6)+-parseInt(_0x3cf746(0x13c))/0x7*(-parseInt(_0x3cf746(0x11b))/0x8)+parseInt(_0x3cf746(0x10d))/0x9+parseInt(_0x3cf746(0x143))/0xa*(-parseInt(_0x3cf746(0x10c))/0xb);if(_0x204027===_0x470847)break;else _0x2c90ac['push'](_0x2c90ac['shift']());}catch(_0x42b984){_0x2c90ac['push'](_0x2c90ac['shift']());}}}(a90_0x28b7,0x2dc49));const a90_0x2a1bb3=(function(){let _0x42ecd6=!![];return function(_0x7629ed,_0x2c569f){const _0x48b794=_0x42ecd6?function(){const _0x430e18=a90_0x3c4c;if(_0x2c569f){const _0x28ebdf=_0x2c569f[_0x430e18(0x122)](_0x7629ed,arguments);return _0x2c569f=null,_0x28ebdf;}}:function(){};return _0x42ecd6=![],_0x48b794;};}()),a90_0x230b05=a90_0x2a1bb3(this,function(){const _0x5dfae1=a90_0x3c4c;return a90_0x230b05['toString']()[_0x5dfae1(0x13b)](_0x5dfae1(0x14c))[_0x5dfae1(0x12c)]()[_0x5dfae1(0x13e)](a90_0x230b05)[_0x5dfae1(0x13b)](_0x5dfae1(0x14c));});a90_0x230b05();'use strict';function a90_0x3c4c(_0x329d59,_0x553be6){const _0x37002e=a90_0x28b7();return a90_0x3c4c=function(_0x230b05,_0x2a1bb3){_0x230b05=_0x230b05-0x105;let _0x28b78c=_0x37002e[_0x230b05];return _0x28b78c;},a90_0x3c4c(_0x329d59,_0x553be6);}var __importDefault=this&&this['__importDefault']||function(_0x213dd5){const _0x599eb9=a90_0x3c4c;return _0x213dd5&&_0x213dd5[_0x599eb9(0x147)]?_0x213dd5:{'default':_0x213dd5};};Object[a90_0x2f91e3(0x11c)](exports,'__esModule',{'value':!![]}),exports[a90_0x2f91e3(0x10b)]=void 0x0;const promises_1=require('fs/promises'),salesforce_1=require(a90_0x2f91e3(0x126)),steps_creator_1=require(a90_0x2f91e3(0x111)),logger_enums_1=require(a90_0x2f91e3(0x121)),logger_details_1=require('./classes/logger/logger-details'),logger_job_state_1=require(a90_0x2f91e3(0x105)),job_1=require('../../../constants/job'),path_1=__importDefault(require('path')),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a90_0x2f91e3(0x124)),job_detail_1=require(a90_0x2f91e3(0x12a));class MaskingJob{constructor(){this['_isEnableAutomationProcessError']=![];}async['initAutomationProcess'](){const _0x10859b=a90_0x2f91e3,{objectRules:_0x5216d4}=this['_maskingManifest'];this['_managerAutomationProcess']=new salesforce_1[(_0x10859b(0x11a))](this[_0x10859b(0x134)](_0x5216d4));}async[a90_0x2f91e3(0x13d)](){const _0xda2a56=a90_0x2f91e3;job_detail_1[_0xda2a56(0x139)]['log']('Start\x20Masking\x20Process'),this[_0xda2a56(0x106)][_0xda2a56(0x14e)](_0xda2a56(0x11f));const {objectRules:_0x2aeaa7,libraries:_0x271a18}=this['_maskingManifest'];this['_steps']=await new steps_creator_1[(_0xda2a56(0x133))]({'loggerDetails':this[_0xda2a56(0x106)],'loggerJobState':this[_0xda2a56(0x12e)],'libraries':_0x271a18,'objectRules':_0x2aeaa7,'request':this[_0xda2a56(0x10e)]})['create']();for(const _0xc17478 of this[_0xda2a56(0x14a)]){await _0xc17478[_0xda2a56(0x112)]();}}['getManagerAutomationProcessOptions'](_0xd25d7d){const _0xa230ea=a90_0x2f91e3,_0x2256a0=[],_0x5df01b=[],_0x481a5a=[],_0x463a24=[];for(const _0x380f0f in _0xd25d7d){const {isDisableProcessBuilder:_0x510348,isDisableTrigger:_0x41d8c9,isDisableValidationRule:_0x2812fe,isDisableWorkflow:_0x534e9d}=_0xd25d7d[_0x380f0f][_0xa230ea(0x109)];_0x510348&&_0x481a5a[_0xa230ea(0x11d)](_0x380f0f),_0x41d8c9&&_0x2256a0[_0xa230ea(0x11d)](_0x380f0f),_0x2812fe&&_0x463a24[_0xa230ea(0x11d)](_0x380f0f),_0x534e9d&&_0x5df01b[_0xa230ea(0x11d)](_0x380f0f);}return{'instance':this[_0xa230ea(0x10e)],'saveSourceMetadataBackup':this[_0xa230ea(0x140)],'triggersObjects':_0x2256a0,'workflowsObjects':_0x5df01b,'processBuilderObjects':_0x481a5a,'validationRulesObjects':_0x463a24};}async[a90_0x2f91e3(0x14d)](){const _0x3587d9=a90_0x2f91e3;job_detail_1['systemLogger']['log'](_0x3587d9(0x108)),this[_0x3587d9(0x106)][_0x3587d9(0x14e)](_0x3587d9(0x108)),await this[_0x3587d9(0x10a)][_0x3587d9(0x14b)]();}async[a90_0x2f91e3(0x145)](){const _0x142ce7=a90_0x2f91e3;!this[_0x142ce7(0x132)]&&(job_detail_1['systemLogger']['log'](_0x142ce7(0x123)),this[_0x142ce7(0x106)][_0x142ce7(0x14e)](_0x142ce7(0x123)),await this['_managerAutomationProcess'][_0x142ce7(0x142)]()['catch'](_0x1add1b=>{const _0x5ba19a=_0x142ce7;this[_0x5ba19a(0x132)]=!![];throw _0x1add1b;}));}async[a90_0x2f91e3(0x13a)](){const _0x4ec819=a90_0x2f91e3,_0x4ae922=await(0x0,promises_1['readFile'])(path_1[_0x4ec819(0x135)][_0x4ec819(0x120)](job_detail_1[_0x4ec819(0x128)],job_1[_0x4ec819(0x138)]),{'encoding':_0x4ec819(0x118)});return await(0x0,promises_1['rm'])(path_1[_0x4ec819(0x135)]['join'](job_detail_1[_0x4ec819(0x128)],job_1[_0x4ec819(0x138)]),{'recursive':!![],'force':!![]}),JSON[_0x4ec819(0x116)](_0x4ae922)[_0x4ec819(0x114)];}[a90_0x2f91e3(0x140)](_0x441356){const _0x643a6e=a90_0x2f91e3;return(0x0,promises_1['writeFile'])(path_1['default'][_0x643a6e(0x120)](job_detail_1[_0x643a6e(0x128)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x643a6e(0x113)](_0x441356,_0x643a6e(0x11e)));}async[a90_0x2f91e3(0x112)](){const _0x5d444a=a90_0x2f91e3;this[_0x5d444a(0x110)]=await this[_0x5d444a(0x13a)]();const {objectRules:_0xbf3867,credentials:_0x445a6a}=this[_0x5d444a(0x110)];this[_0x5d444a(0x106)]=await new logger_details_1[(_0x5d444a(0x13f))](job_detail_1['jobStorePath'],job_detail_1[_0x5d444a(0x131)])[_0x5d444a(0x136)](),this[_0x5d444a(0x12e)]=await new logger_job_state_1[(_0x5d444a(0x10f))](job_detail_1[_0x5d444a(0x128)],job_detail_1[_0x5d444a(0x131)])[_0x5d444a(0x136)](Object['keys'](_0xbf3867));try{this[_0x5d444a(0x12e)]['setJobStatus'](logger_enums_1[_0x5d444a(0x141)]['IN_PROGRESS']),this['_request']=await salesforce_1[_0x5d444a(0x12b)][_0x5d444a(0x137)](new auth_manager_1[(_0x5d444a(0x12f))](_0x445a6a),[],{'headers':{'Accept-Encoding':_0x5d444a(0x144)}}),await this[_0x5d444a(0x107)](),await this['disableAutomationProcess'](),await this[_0x5d444a(0x13d)](),await this[_0x5d444a(0x145)](),this[_0x5d444a(0x12e)][_0x5d444a(0x150)](logger_enums_1[_0x5d444a(0x141)]['COMPLETED']);}catch(_0x5984d1){await this['enableAutomationProcess']()[_0x5d444a(0x115)](_0x17465f=>{const _0x2d170d=_0x5d444a;job_detail_1[_0x2d170d(0x139)]['error'](_0x17465f[_0x2d170d(0x148)]);}),this[_0x5d444a(0x106)]['exception'](_0x5984d1[_0x5d444a(0x148)]),this[_0x5d444a(0x12e)][_0x5d444a(0x150)](logger_enums_1[_0x5d444a(0x141)][_0x5d444a(0x12d)]),this[_0x5d444a(0x12e)]['setJobError'](_0x5984d1['message']),job_detail_1['systemLogger']['error'](_0x5984d1[_0x5d444a(0x148)]);}finally{this[_0x5d444a(0x106)][_0x5d444a(0x14e)]('Finish\x20Masking\x20Process'),job_detail_1['systemLogger'][_0x5d444a(0x14e)]('Finish\x20Masking\x20Process'),await this[_0x5d444a(0x12e)]['kill'](),await this[_0x5d444a(0x106)][_0x5d444a(0x149)]();}}}exports[a90_0x2f91e3(0x10b)]=MaskingJob,new MaskingJob()[a90_0x2f91e3(0x112)]()[a90_0x2f91e3(0x119)](()=>process[a90_0x2f91e3(0x14f)](0x0))[a90_0x2f91e3(0x115)](()=>process[a90_0x2f91e3(0x14f)](0x1));