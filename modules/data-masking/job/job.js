const a90_0x6924ae=a90_0x5c87;(function(_0x29fb1c,_0x24869c){const _0x2875c4=a90_0x5c87,_0x24595f=_0x29fb1c();while(!![]){try{const _0x421950=-parseInt(_0x2875c4(0x135))/0x1*(parseInt(_0x2875c4(0x16d))/0x2)+parseInt(_0x2875c4(0x12c))/0x3+-parseInt(_0x2875c4(0x161))/0x4+parseInt(_0x2875c4(0x148))/0x5*(-parseInt(_0x2875c4(0x12d))/0x6)+-parseInt(_0x2875c4(0x14a))/0x7*(parseInt(_0x2875c4(0x12e))/0x8)+-parseInt(_0x2875c4(0x14f))/0x9+parseInt(_0x2875c4(0x12f))/0xa;if(_0x421950===_0x24869c)break;else _0x24595f['push'](_0x24595f['shift']());}catch(_0x25d1fb){_0x24595f['push'](_0x24595f['shift']());}}}(a90_0x16c1,0x9154d));function a90_0x5c87(_0x20c31c,_0x4ddbe2){const _0x21ddb7=a90_0x16c1();return a90_0x5c87=function(_0x565c3b,_0x1c72eb){_0x565c3b=_0x565c3b-0x128;let _0x16c16e=_0x21ddb7[_0x565c3b];return _0x16c16e;},a90_0x5c87(_0x20c31c,_0x4ddbe2);}const a90_0x1c72eb=(function(){let _0x389f41=!![];return function(_0x43824e,_0x1f773a){const _0x46e326=_0x389f41?function(){const _0x1dca53=a90_0x5c87;if(_0x1f773a){const _0x17d1a9=_0x1f773a[_0x1dca53(0x13e)](_0x43824e,arguments);return _0x1f773a=null,_0x17d1a9;}}:function(){};return _0x389f41=![],_0x46e326;};}()),a90_0x565c3b=a90_0x1c72eb(this,function(){const _0x20d686=a90_0x5c87;return a90_0x565c3b[_0x20d686(0x143)]()[_0x20d686(0x13f)](_0x20d686(0x171))['toString']()[_0x20d686(0x152)](a90_0x565c3b)[_0x20d686(0x13f)](_0x20d686(0x171));});a90_0x565c3b();function a90_0x16c1(){const _0x177578=['(((.+)+)+)+$','setJobStatus','push','setJobError','keys','disableAutomationProcess','error','from','@flosum/salesforce','2092179ErBYuy','525444wqLqgD','9405968HWppuX','43806480GDGkCM','catch','log','utf-8','./job-detail','masking','721039SArrJp','init','COMPLETED','./classes/step/steps-creator','../../shared/managers/auth.manager','./enums/logger.enums','_request','LoggerJobState','then','apply','search','parse','JobStatus','LoggerDetails','toString','readFile','enableAutomationProcess','default','__importDefault','55uPAtHg','_loggerJobState','7aprgxR','_managerAutomationProcess','gzip','MaskingJob','StepsCreator','8062371VuiLbY','getManifest','create','constructor','_loggerDetails','./classes/logger/logger-details','_steps','execute','saveSourceAutomationProcessesBackup','message','getManagerAutomationProcessOptions','join','Enable\x20automation\x20process','AuthManager','initAutomationProcess','MANIFEST_FILENAME','AxiosInstanceUtils','details','2907384cWjOnv','writeFile','jobId','base64','systemLogger','jobStorePath','_isEnableAutomationProcessError','exit','ManagerAutomationProcess','disable','_maskingManifest','IN_PROGRESS','2ggMNCc','kill','Disable\x20automation\x20process','Finish\x20Masking\x20Process'];a90_0x16c1=function(){return _0x177578;};return a90_0x16c1();}'use strict';var __importDefault=this&&this[a90_0x6924ae(0x147)]||function(_0x2b09c9){return _0x2b09c9&&_0x2b09c9['__esModule']?_0x2b09c9:{'default':_0x2b09c9};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a90_0x6924ae(0x14d)]=void 0x0;const promises_1=require('fs/promises'),salesforce_1=require(a90_0x6924ae(0x12b)),steps_creator_1=require(a90_0x6924ae(0x138)),logger_enums_1=require(a90_0x6924ae(0x13a)),logger_details_1=require(a90_0x6924ae(0x154)),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require('../../../constants/job'),path_1=__importDefault(require('path')),auth_manager_1=require(a90_0x6924ae(0x139)),constants_1=require('../constants'),job_detail_1=require(a90_0x6924ae(0x133));class MaskingJob{constructor(){const _0x3b37cf=a90_0x6924ae;this[_0x3b37cf(0x167)]=![];}async['initAutomationProcess'](){const _0x430a12=a90_0x6924ae,{objectRules:_0x4c9a67}=this['_maskingManifest'];this[_0x430a12(0x14b)]=new salesforce_1[(_0x430a12(0x169))](this[_0x430a12(0x159)](_0x4c9a67));}async[a90_0x6924ae(0x134)](){const _0x3010cd=a90_0x6924ae;job_detail_1[_0x3010cd(0x165)][_0x3010cd(0x131)]('Start\x20Masking\x20Process'),this[_0x3010cd(0x153)][_0x3010cd(0x131)]('Start\x20Masking\x20Process');const {objectRules:_0x54547a,libraries:_0x129aef}=this['_maskingManifest'];this[_0x3010cd(0x155)]=await new steps_creator_1[(_0x3010cd(0x14e))]({'loggerDetails':this[_0x3010cd(0x153)],'loggerJobState':this['_loggerJobState'],'libraries':_0x129aef,'objectRules':_0x54547a,'request':this['_request']})[_0x3010cd(0x151)]();for(const _0x4d3c43 of this['_steps']){await _0x4d3c43[_0x3010cd(0x156)]();}}[a90_0x6924ae(0x159)](_0x496980){const _0x3351e8=a90_0x6924ae,_0x51ed42=[],_0x4ca0e9=[],_0x4a35ff=[],_0x51dd3f=[],_0x50580b=[];for(const _0x525d26 in _0x496980){const {isDisableProcessBuilder:_0x560bfa,isDisableTrigger:_0x5285a1,isDisableValidationRule:_0x4cd4ac,isDisableWorkflow:_0x465c62,isDisableLookupFilter:_0x532e12}=_0x496980[_0x525d26]['disableAutomation'];_0x560bfa&&_0x4a35ff[_0x3351e8(0x173)](_0x525d26),_0x5285a1&&_0x51ed42['push'](_0x525d26),_0x4cd4ac&&_0x51dd3f['push'](_0x525d26),_0x465c62&&_0x4ca0e9[_0x3351e8(0x173)](_0x525d26),_0x532e12&&_0x50580b[_0x3351e8(0x173)](_0x525d26);}return{'instance':this[_0x3351e8(0x13b)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x51ed42,'workflowsObjects':_0x4ca0e9,'processBuilderObjects':_0x4a35ff,'validationRulesObjects':_0x51dd3f,'lookupFiltersObjects':_0x50580b};}async[a90_0x6924ae(0x128)](){const _0x2c0011=a90_0x6924ae;job_detail_1[_0x2c0011(0x165)]['log'](_0x2c0011(0x16f)),this[_0x2c0011(0x153)][_0x2c0011(0x131)](_0x2c0011(0x16f)),await this[_0x2c0011(0x14b)][_0x2c0011(0x16a)]();}async['enableAutomationProcess'](){const _0x57939b=a90_0x6924ae;!this[_0x57939b(0x167)]&&(job_detail_1[_0x57939b(0x165)][_0x57939b(0x131)]('Enable\x20automation\x20process'),this['_loggerDetails'][_0x57939b(0x131)](_0x57939b(0x15b)),await this[_0x57939b(0x14b)]['enable']()[_0x57939b(0x130)](_0x5cdd8a=>{const _0x624e50=_0x57939b;this[_0x624e50(0x167)]=!![];throw _0x5cdd8a;}));}async[a90_0x6924ae(0x150)](){const _0x487276=a90_0x6924ae,_0x451615=await(0x0,promises_1[_0x487276(0x144)])(path_1['default'][_0x487276(0x15a)](job_detail_1[_0x487276(0x166)],job_1[_0x487276(0x15e)]),{'encoding':_0x487276(0x132)});return await(0x0,promises_1['rm'])(path_1[_0x487276(0x146)][_0x487276(0x15a)](job_detail_1[_0x487276(0x166)],job_1[_0x487276(0x15e)]),{'recursive':!![],'force':!![]}),JSON[_0x487276(0x140)](_0x451615)[_0x487276(0x160)];}[a90_0x6924ae(0x157)](_0x2107c3){const _0x205d85=a90_0x6924ae;return(0x0,promises_1[_0x205d85(0x162)])(path_1[_0x205d85(0x146)][_0x205d85(0x15a)](job_detail_1['jobStorePath'],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0x205d85(0x12a)](_0x2107c3,_0x205d85(0x164)));}async[a90_0x6924ae(0x156)](){const _0x3583cb=a90_0x6924ae;this[_0x3583cb(0x16b)]=await this['getManifest']();const {objectRules:_0xda22eb,credentials:_0xf790c6}=this[_0x3583cb(0x16b)];this['_loggerDetails']=await new logger_details_1[(_0x3583cb(0x142))](job_detail_1['jobStorePath'],job_detail_1['jobId'])['init'](),this[_0x3583cb(0x149)]=await new logger_job_state_1[(_0x3583cb(0x13c))](job_detail_1[_0x3583cb(0x166)],job_detail_1[_0x3583cb(0x163)])[_0x3583cb(0x136)](Object[_0x3583cb(0x175)](_0xda22eb));try{this['_loggerJobState']['setJobStatus'](logger_enums_1[_0x3583cb(0x141)][_0x3583cb(0x16c)]),this['_request']=await salesforce_1[_0x3583cb(0x15f)][_0x3583cb(0x151)](new auth_manager_1[(_0x3583cb(0x15c))](_0xf790c6),[],{'headers':{'Accept-Encoding':_0x3583cb(0x14c)}}),await this[_0x3583cb(0x15d)](),await this['disableAutomationProcess'](),await this[_0x3583cb(0x134)](),await this[_0x3583cb(0x145)](),this[_0x3583cb(0x149)][_0x3583cb(0x172)](logger_enums_1[_0x3583cb(0x141)][_0x3583cb(0x137)]);}catch(_0x4e801e){await this[_0x3583cb(0x145)]()[_0x3583cb(0x130)](_0x28915f=>{const _0x370814=_0x3583cb;job_detail_1[_0x370814(0x165)]['error'](_0x28915f[_0x370814(0x158)]);}),this[_0x3583cb(0x153)]['exception'](_0x4e801e[_0x3583cb(0x158)]),this[_0x3583cb(0x149)][_0x3583cb(0x172)](logger_enums_1[_0x3583cb(0x141)]['FAILED']),this[_0x3583cb(0x149)][_0x3583cb(0x174)](_0x4e801e[_0x3583cb(0x158)]),job_detail_1['systemLogger'][_0x3583cb(0x129)](_0x4e801e[_0x3583cb(0x158)]);}finally{this[_0x3583cb(0x153)][_0x3583cb(0x131)]('Finish\x20Masking\x20Process'),job_detail_1[_0x3583cb(0x165)][_0x3583cb(0x131)](_0x3583cb(0x170)),await this[_0x3583cb(0x149)]['kill'](),await this[_0x3583cb(0x153)][_0x3583cb(0x16e)]();}}}exports[a90_0x6924ae(0x14d)]=MaskingJob,new MaskingJob()[a90_0x6924ae(0x156)]()[a90_0x6924ae(0x13d)](()=>process[a90_0x6924ae(0x168)](0x0))[a90_0x6924ae(0x130)](()=>process['exit'](0x1));