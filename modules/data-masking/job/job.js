const a73_0x385fd1=a73_0x3c32;(function(_0x2d3686,_0x4ab93b){const _0x2df5a2=a73_0x3c32,_0x526c8b=_0x2d3686();while(!![]){try{const _0x5e31fb=parseInt(_0x2df5a2(0x1ca))/0x1+parseInt(_0x2df5a2(0x1a6))/0x2+parseInt(_0x2df5a2(0x1c6))/0x3+parseInt(_0x2df5a2(0x193))/0x4*(parseInt(_0x2df5a2(0x1b5))/0x5)+parseInt(_0x2df5a2(0x196))/0x6+-parseInt(_0x2df5a2(0x1a5))/0x7+parseInt(_0x2df5a2(0x1ad))/0x8*(-parseInt(_0x2df5a2(0x1dc))/0x9);if(_0x5e31fb===_0x4ab93b)break;else _0x526c8b['push'](_0x526c8b['shift']());}catch(_0x521756){_0x526c8b['push'](_0x526c8b['shift']());}}}(a73_0x20c8,0x56453));const a73_0x21f9b4=(function(){let _0x513567=!![];return function(_0x144705,_0x88d5a){const _0x5bd6f7=_0x513567?function(){const _0x1ed47b=a73_0x3c32;if(_0x88d5a){const _0x1afc19=_0x88d5a[_0x1ed47b(0x1cb)](_0x144705,arguments);return _0x88d5a=null,_0x1afc19;}}:function(){};return _0x513567=![],_0x5bd6f7;};}()),a73_0x104a45=a73_0x21f9b4(this,function(){const _0x179224=a73_0x3c32;return a73_0x104a45[_0x179224(0x1a7)]()['search'](_0x179224(0x1a8))['toString']()[_0x179224(0x197)](a73_0x104a45)[_0x179224(0x1af)](_0x179224(0x1a8));});a73_0x104a45();function a73_0x20c8(){const _0x1c6fac=['systemLogger','LoggerJobState','defineProperty','__importDefault','_steps','message','./classes/logger/logger-details','execute','setJobStatus','utf-8','exception','63trFYFr','log','Disable\x20automation\x20process','disableAutomation','StepsCreator','@flosum/salesforce','push','2116TUzJXF','default','__esModule','3330480ivzRzT','constructor','disableAutomationProcess','./job-detail','gzip','then','Finish\x20Masking\x20Process','_isEnableAutomationProcessError','masking','base64','IN_PROGRESS','details','enableAutomationProcess','Enable\x20automation\x20process','exit','4818394siHubk','178976phXhRM','toString','(((.+)+)+)+$','Start\x20Masking\x20Process','MaskingJob','_loggerDetails','MANIFEST_FILENAME','615984pggbhx','from','search','fs/promises','FAILED','../../shared/managers/auth.manager','ManagerAutomationProcess','COMPLETED','6065WtfhOg','init','getManifest','saveSourceAutomationProcessesBackup','_request','join','_maskingManifest','getManagerAutomationProcessOptions','jobId','AuthManager','kill','create','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','initAutomationProcess','catch','JobStatus','_loggerJobState','37323kOPENd','keys','jobStorePath','AxiosInstanceUtils','282005GlmMaM','apply','_managerAutomationProcess','./classes/step/steps-creator','parse','error','enable'];a73_0x20c8=function(){return _0x1c6fac;};return a73_0x20c8();}'use strict';var __importDefault=this&&this[a73_0x385fd1(0x1d4)]||function(_0x56e216){const _0x1d59d6=a73_0x385fd1;return _0x56e216&&_0x56e216[_0x1d59d6(0x195)]?_0x56e216:{'default':_0x56e216};};Object[a73_0x385fd1(0x1d3)](exports,a73_0x385fd1(0x195),{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a73_0x385fd1(0x1b0)),salesforce_1=require(a73_0x385fd1(0x1e1)),steps_creator_1=require(a73_0x385fd1(0x1cd)),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require(a73_0x385fd1(0x1d7)),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require('../../../constants/job'),path_1=__importDefault(require('path')),auth_manager_1=require(a73_0x385fd1(0x1b2)),constants_1=require('../constants'),job_detail_1=require(a73_0x385fd1(0x199));class MaskingJob{constructor(){this['_isEnableAutomationProcessError']=![];}async[a73_0x385fd1(0x1c2)](){const _0x5bf93b=a73_0x385fd1,{objectRules:_0x265bbe}=this[_0x5bf93b(0x1bb)];this['_managerAutomationProcess']=new salesforce_1[(_0x5bf93b(0x1b3))](this[_0x5bf93b(0x1bc)](_0x265bbe));}async['masking'](){const _0x4cf713=a73_0x385fd1;job_detail_1['systemLogger'][_0x4cf713(0x1dd)](_0x4cf713(0x1a9)),this[_0x4cf713(0x1ab)][_0x4cf713(0x1dd)](_0x4cf713(0x1a9));const {objectRules:_0xbd7b9b,libraries:_0x3dfd24}=this[_0x4cf713(0x1bb)];this[_0x4cf713(0x1d5)]=await new steps_creator_1[(_0x4cf713(0x1e0))]({'loggerDetails':this[_0x4cf713(0x1ab)],'loggerJobState':this[_0x4cf713(0x1c5)],'libraries':_0x3dfd24,'objectRules':_0xbd7b9b,'request':this['_request']})['create']();for(const _0x186050 of this['_steps']){await _0x186050[_0x4cf713(0x1d8)]();}}['getManagerAutomationProcessOptions'](_0x2e7cbc){const _0x5dd7fa=a73_0x385fd1,_0x5106be=[],_0x339c6e=[],_0xa4a376=[],_0x50bf42=[];for(const _0x5ceecb in _0x2e7cbc){const {isDisableProcessBuilder:_0x28f41c,isDisableTrigger:_0x4537b4,isDisableValidationRule:_0x35753c,isDisableWorkflow:_0xe01820}=_0x2e7cbc[_0x5ceecb][_0x5dd7fa(0x1df)];_0x28f41c&&_0xa4a376['push'](_0x5ceecb),_0x4537b4&&_0x5106be[_0x5dd7fa(0x1e2)](_0x5ceecb),_0x35753c&&_0x50bf42[_0x5dd7fa(0x1e2)](_0x5ceecb),_0xe01820&&_0x339c6e[_0x5dd7fa(0x1e2)](_0x5ceecb);}return{'instance':this[_0x5dd7fa(0x1b9)],'saveSourceMetadataBackup':this[_0x5dd7fa(0x1b8)],'triggersObjects':_0x5106be,'workflowsObjects':_0x339c6e,'processBuilderObjects':_0xa4a376,'validationRulesObjects':_0x50bf42};}async[a73_0x385fd1(0x198)](){const _0x4dd2b3=a73_0x385fd1;job_detail_1[_0x4dd2b3(0x1d1)]['log'](_0x4dd2b3(0x1de)),this[_0x4dd2b3(0x1ab)]['log'](_0x4dd2b3(0x1de)),await this[_0x4dd2b3(0x1cc)]['disable']();}async['enableAutomationProcess'](){const _0x3e6dc7=a73_0x385fd1;!this[_0x3e6dc7(0x19d)]&&(job_detail_1[_0x3e6dc7(0x1d1)][_0x3e6dc7(0x1dd)](_0x3e6dc7(0x1a3)),this['_loggerDetails'][_0x3e6dc7(0x1dd)](_0x3e6dc7(0x1a3)),await this['_managerAutomationProcess'][_0x3e6dc7(0x1d0)]()[_0x3e6dc7(0x1c3)](_0x186325=>{this['_isEnableAutomationProcessError']=!![];throw _0x186325;}));}async['getManifest'](){const _0x4371cd=a73_0x385fd1,_0x55797b=await(0x0,promises_1['readFile'])(path_1[_0x4371cd(0x194)][_0x4371cd(0x1ba)](job_detail_1[_0x4371cd(0x1c8)],job_1[_0x4371cd(0x1ac)]),{'encoding':_0x4371cd(0x1da)});return await(0x0,promises_1['rm'])(path_1[_0x4371cd(0x194)][_0x4371cd(0x1ba)](job_detail_1['jobStorePath'],job_1[_0x4371cd(0x1ac)]),{'recursive':!![],'force':!![]}),JSON[_0x4371cd(0x1ce)](_0x55797b)[_0x4371cd(0x1a1)];}[a73_0x385fd1(0x1b8)](_0x3bcf49){const _0x3dabc2=a73_0x385fd1;return(0x0,promises_1['writeFile'])(path_1[_0x3dabc2(0x194)][_0x3dabc2(0x1ba)](job_detail_1['jobStorePath'],constants_1[_0x3dabc2(0x1c1)]),Buffer[_0x3dabc2(0x1ae)](_0x3bcf49,_0x3dabc2(0x19f)));}async[a73_0x385fd1(0x1d8)](){const _0x3c9b2b=a73_0x385fd1;this['_maskingManifest']=await this[_0x3c9b2b(0x1b7)]();const {objectRules:_0xfc435c,credentials:_0x27259a}=this['_maskingManifest'];this['_loggerDetails']=await new logger_details_1['LoggerDetails'](job_detail_1[_0x3c9b2b(0x1c8)],job_detail_1[_0x3c9b2b(0x1bd)])[_0x3c9b2b(0x1b6)](),this[_0x3c9b2b(0x1c5)]=await new logger_job_state_1[(_0x3c9b2b(0x1d2))](job_detail_1[_0x3c9b2b(0x1c8)],job_detail_1[_0x3c9b2b(0x1bd)])[_0x3c9b2b(0x1b6)](Object[_0x3c9b2b(0x1c7)](_0xfc435c));try{this[_0x3c9b2b(0x1c5)][_0x3c9b2b(0x1d9)](logger_enums_1[_0x3c9b2b(0x1c4)][_0x3c9b2b(0x1a0)]),this['_request']=await salesforce_1[_0x3c9b2b(0x1c9)][_0x3c9b2b(0x1c0)](new auth_manager_1[(_0x3c9b2b(0x1be))](_0x27259a),[],{'headers':{'Accept-Encoding':_0x3c9b2b(0x19a)}}),await this[_0x3c9b2b(0x1c2)](),await this[_0x3c9b2b(0x198)](),await this[_0x3c9b2b(0x19e)](),await this[_0x3c9b2b(0x1a2)](),this[_0x3c9b2b(0x1c5)][_0x3c9b2b(0x1d9)](logger_enums_1[_0x3c9b2b(0x1c4)][_0x3c9b2b(0x1b4)]);}catch(_0x15a285){await this[_0x3c9b2b(0x1a2)]()['catch'](_0x4c045b=>{const _0x22939c=_0x3c9b2b;job_detail_1[_0x22939c(0x1d1)][_0x22939c(0x1cf)](_0x4c045b[_0x22939c(0x1d6)]);}),this[_0x3c9b2b(0x1ab)][_0x3c9b2b(0x1db)](_0x15a285[_0x3c9b2b(0x1d6)]),this[_0x3c9b2b(0x1c5)]['setJobStatus'](logger_enums_1[_0x3c9b2b(0x1c4)][_0x3c9b2b(0x1b1)]),this[_0x3c9b2b(0x1c5)]['setJobError'](_0x15a285[_0x3c9b2b(0x1d6)]),job_detail_1[_0x3c9b2b(0x1d1)][_0x3c9b2b(0x1cf)](_0x15a285[_0x3c9b2b(0x1d6)]);}finally{this[_0x3c9b2b(0x1ab)][_0x3c9b2b(0x1dd)]('Finish\x20Masking\x20Process'),job_detail_1[_0x3c9b2b(0x1d1)][_0x3c9b2b(0x1dd)](_0x3c9b2b(0x19c)),await this['_loggerJobState']['kill'](),await this[_0x3c9b2b(0x1ab)][_0x3c9b2b(0x1bf)]();}}}function a73_0x3c32(_0x2d0963,_0x125a9b){const _0x273499=a73_0x20c8();return a73_0x3c32=function(_0x104a45,_0x21f9b4){_0x104a45=_0x104a45-0x193;let _0x20c80a=_0x273499[_0x104a45];return _0x20c80a;},a73_0x3c32(_0x2d0963,_0x125a9b);}exports[a73_0x385fd1(0x1aa)]=MaskingJob,new MaskingJob()['execute']()[a73_0x385fd1(0x19b)](()=>process[a73_0x385fd1(0x1a4)](0x0))[a73_0x385fd1(0x1c3)](()=>process[a73_0x385fd1(0x1a4)](0x1));