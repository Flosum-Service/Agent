function a73_0x174f(){const _0x257034=['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','exception','constructor','LoggerJobState','JobStatus','jobId','703881xRyHKS','357TsZjuF','_request','MANIFEST_FILENAME','ManagerAutomationProcess','search','_loggerDetails','_managerAutomationProcess','FAILED','./enums/logger.enums','Finish\x20Masking\x20Process','default','enableAutomationProcess','toString','parse','jobStorePath','1590lWxutD','systemLogger','354IxktRW','20835OJMHXt','./job-detail','keys','AuthManager','catch','path','8070152Hccdej','utf-8','init','getManifest','getManagerAutomationProcessOptions','disable','_maskingManifest','execute','setJobError','readFile','Enable\x20automation\x20process','_steps','5670RgSLMC','gzip','__importDefault','fs/promises','_loggerJobState','AxiosInstanceUtils','./classes/step/steps-creator','Start\x20Masking\x20Process','../../shared/managers/auth.manager','3438692OlYBlY','LoggerDetails','message','create','masking','MaskingJob','initAutomationProcess','details','StepsCreator','IN_PROGRESS','setJobStatus','enable','_isEnableAutomationProcessError','122454mHzJwS','log','base64','(((.+)+)+)+$','writeFile','disableAutomationProcess','apply','saveSourceAutomationProcessesBackup','2060065tmQUuo','from','exit','kill','push','./classes/logger/logger-details','then','join'];a73_0x174f=function(){return _0x257034;};return a73_0x174f();}const a73_0x309787=a73_0x47e6;(function(_0x12ac8b,_0x563b01){const _0x413da6=a73_0x47e6,_0x329eb6=_0x12ac8b();while(!![]){try{const _0x5f3bdd=parseInt(_0x413da6(0x1a1))/0x1+-parseInt(_0x413da6(0x1c6))/0x2*(parseInt(_0x413da6(0x1a2))/0x3)+-parseInt(_0x413da6(0x17e))/0x4+parseInt(_0x413da6(0x1b4))/0x5*(parseInt(_0x413da6(0x1b3))/0x6)+-parseInt(_0x413da6(0x193))/0x7+-parseInt(_0x413da6(0x1ba))/0x8+parseInt(_0x413da6(0x18b))/0x9*(parseInt(_0x413da6(0x1b1))/0xa);if(_0x5f3bdd===_0x563b01)break;else _0x329eb6['push'](_0x329eb6['shift']());}catch(_0x2d0a20){_0x329eb6['push'](_0x329eb6['shift']());}}}(a73_0x174f,0x95a7a));const a73_0xd22d68=(function(){let _0x1ba5d4=!![];return function(_0x53a5e4,_0x220bf2){const _0x4b2dcf=_0x1ba5d4?function(){const _0x195cb8=a73_0x47e6;if(_0x220bf2){const _0x44758a=_0x220bf2[_0x195cb8(0x191)](_0x53a5e4,arguments);return _0x220bf2=null,_0x44758a;}}:function(){};return _0x1ba5d4=![],_0x4b2dcf;};}()),a73_0xa50d7b=a73_0xd22d68(this,function(){const _0x383661=a73_0x47e6;return a73_0xa50d7b[_0x383661(0x1ae)]()[_0x383661(0x1a6)](_0x383661(0x18e))[_0x383661(0x1ae)]()[_0x383661(0x19d)](a73_0xa50d7b)[_0x383661(0x1a6)](_0x383661(0x18e));});function a73_0x47e6(_0x3f8eab,_0x42f5a5){const _0x18289b=a73_0x174f();return a73_0x47e6=function(_0xa50d7b,_0xd22d68){_0xa50d7b=_0xa50d7b-0x17d;let _0x174f6b=_0x18289b[_0xa50d7b];return _0x174f6b;},a73_0x47e6(_0x3f8eab,_0x42f5a5);}a73_0xa50d7b();'use strict';var __importDefault=this&&this[a73_0x309787(0x1c8)]||function(_0x3cb92b){return _0x3cb92b&&_0x3cb92b['__esModule']?_0x3cb92b:{'default':_0x3cb92b};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a73_0x309787(0x183)]=void 0x0;const promises_1=require(a73_0x309787(0x1c9)),salesforce_1=require('@flosum/salesforce'),steps_creator_1=require(a73_0x309787(0x1cc)),logger_enums_1=require(a73_0x309787(0x1aa)),logger_details_1=require(a73_0x309787(0x198)),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require('../../../constants/job'),path_1=__importDefault(require(a73_0x309787(0x1b9))),auth_manager_1=require(a73_0x309787(0x17d)),constants_1=require('../constants'),job_detail_1=require(a73_0x309787(0x1b5));class MaskingJob{constructor(){const _0x3d07ea=a73_0x309787;this[_0x3d07ea(0x18a)]=![];}async['initAutomationProcess'](){const _0x393e7f=a73_0x309787,{objectRules:_0x2275b2}=this[_0x393e7f(0x1c0)];this[_0x393e7f(0x1a8)]=new salesforce_1[(_0x393e7f(0x1a5))](this[_0x393e7f(0x1be)](_0x2275b2));}async[a73_0x309787(0x182)](){const _0x3055a6=a73_0x309787;job_detail_1['systemLogger'][_0x3055a6(0x18c)](_0x3055a6(0x1cd)),this[_0x3055a6(0x1a7)][_0x3055a6(0x18c)](_0x3055a6(0x1cd));const {objectRules:_0x243691,libraries:_0x28646f}=this[_0x3055a6(0x1c0)];this[_0x3055a6(0x1c5)]=await new steps_creator_1[(_0x3055a6(0x186))]({'loggerDetails':this['_loggerDetails'],'loggerJobState':this[_0x3055a6(0x1ca)],'libraries':_0x28646f,'objectRules':_0x243691,'request':this[_0x3055a6(0x1a3)]})[_0x3055a6(0x181)]();for(const _0x1ed0cd of this['_steps']){await _0x1ed0cd[_0x3055a6(0x1c1)]();}}[a73_0x309787(0x1be)](_0xc103dc){const _0x3a7903=a73_0x309787,_0x2b71e2=[],_0x1cd914=[],_0x42575d=[],_0x271ff4=[];for(const _0x2671f2 in _0xc103dc){const {isDisableProcessBuilder:_0x2957a0,isDisableTrigger:_0x5a7f52,isDisableValidationRule:_0x38eada,isDisableWorkflow:_0x2a52ba}=_0xc103dc[_0x2671f2]['disableAutomation'];_0x2957a0&&_0x42575d[_0x3a7903(0x197)](_0x2671f2),_0x5a7f52&&_0x2b71e2[_0x3a7903(0x197)](_0x2671f2),_0x38eada&&_0x271ff4[_0x3a7903(0x197)](_0x2671f2),_0x2a52ba&&_0x1cd914[_0x3a7903(0x197)](_0x2671f2);}return{'instance':this[_0x3a7903(0x1a3)],'saveSourceMetadataBackup':this[_0x3a7903(0x192)],'triggersObjects':_0x2b71e2,'workflowsObjects':_0x1cd914,'processBuilderObjects':_0x42575d,'validationRulesObjects':_0x271ff4};}async['disableAutomationProcess'](){const _0x325367=a73_0x309787;job_detail_1['systemLogger']['log']('Disable\x20automation\x20process'),this[_0x325367(0x1a7)][_0x325367(0x18c)]('Disable\x20automation\x20process'),await this[_0x325367(0x1a8)][_0x325367(0x1bf)]();}async[a73_0x309787(0x1ad)](){const _0x1e2144=a73_0x309787;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x1e2144(0x1b2)][_0x1e2144(0x18c)]('Enable\x20automation\x20process'),this[_0x1e2144(0x1a7)][_0x1e2144(0x18c)](_0x1e2144(0x1c4)),await this[_0x1e2144(0x1a8)][_0x1e2144(0x189)]()['catch'](_0x412e98=>{this['_isEnableAutomationProcessError']=!![];throw _0x412e98;}));}async[a73_0x309787(0x1bd)](){const _0x3ba95b=a73_0x309787,_0x1f1249=await(0x0,promises_1[_0x3ba95b(0x1c3)])(path_1[_0x3ba95b(0x1ac)][_0x3ba95b(0x19a)](job_detail_1[_0x3ba95b(0x1b0)],job_1[_0x3ba95b(0x1a4)]),{'encoding':_0x3ba95b(0x1bb)});return await(0x0,promises_1['rm'])(path_1[_0x3ba95b(0x1ac)][_0x3ba95b(0x19a)](job_detail_1['jobStorePath'],job_1[_0x3ba95b(0x1a4)]),{'recursive':!![],'force':!![]}),JSON[_0x3ba95b(0x1af)](_0x1f1249)[_0x3ba95b(0x185)];}[a73_0x309787(0x192)](_0x1be36d){const _0x4792f0=a73_0x309787;return(0x0,promises_1[_0x4792f0(0x18f)])(path_1['default']['join'](job_detail_1[_0x4792f0(0x1b0)],constants_1[_0x4792f0(0x19b)]),Buffer[_0x4792f0(0x194)](_0x1be36d,_0x4792f0(0x18d)));}async[a73_0x309787(0x1c1)](){const _0x31b0c7=a73_0x309787;this[_0x31b0c7(0x1c0)]=await this[_0x31b0c7(0x1bd)]();const {objectRules:_0x3c9527,credentials:_0x5f47b2}=this['_maskingManifest'];this[_0x31b0c7(0x1a7)]=await new logger_details_1[(_0x31b0c7(0x17f))](job_detail_1[_0x31b0c7(0x1b0)],job_detail_1['jobId'])[_0x31b0c7(0x1bc)](),this[_0x31b0c7(0x1ca)]=await new logger_job_state_1[(_0x31b0c7(0x19e))](job_detail_1[_0x31b0c7(0x1b0)],job_detail_1[_0x31b0c7(0x1a0)])[_0x31b0c7(0x1bc)](Object[_0x31b0c7(0x1b6)](_0x3c9527));try{this[_0x31b0c7(0x1ca)][_0x31b0c7(0x188)](logger_enums_1[_0x31b0c7(0x19f)][_0x31b0c7(0x187)]),this[_0x31b0c7(0x1a3)]=await salesforce_1[_0x31b0c7(0x1cb)][_0x31b0c7(0x181)](new auth_manager_1[(_0x31b0c7(0x1b7))](_0x5f47b2),[],{'headers':{'Accept-Encoding':_0x31b0c7(0x1c7)}}),await this[_0x31b0c7(0x184)](),await this[_0x31b0c7(0x190)](),await this[_0x31b0c7(0x182)](),await this['enableAutomationProcess'](),this[_0x31b0c7(0x1ca)][_0x31b0c7(0x188)](logger_enums_1['JobStatus']['COMPLETED']);}catch(_0x1ddcd2){await this['enableAutomationProcess']()[_0x31b0c7(0x1b8)](_0x3d7d3a=>{const _0x13e166=_0x31b0c7;job_detail_1['systemLogger']['error'](_0x3d7d3a[_0x13e166(0x180)]);}),this[_0x31b0c7(0x1a7)][_0x31b0c7(0x19c)](_0x1ddcd2[_0x31b0c7(0x180)]),this['_loggerJobState'][_0x31b0c7(0x188)](logger_enums_1[_0x31b0c7(0x19f)][_0x31b0c7(0x1a9)]),this[_0x31b0c7(0x1ca)][_0x31b0c7(0x1c2)](_0x1ddcd2[_0x31b0c7(0x180)]),job_detail_1['systemLogger']['error'](_0x1ddcd2[_0x31b0c7(0x180)]);}finally{this['_loggerDetails'][_0x31b0c7(0x18c)](_0x31b0c7(0x1ab)),job_detail_1[_0x31b0c7(0x1b2)][_0x31b0c7(0x18c)]('Finish\x20Masking\x20Process'),await this['_loggerJobState'][_0x31b0c7(0x196)](),await this[_0x31b0c7(0x1a7)]['kill']();}}}exports[a73_0x309787(0x183)]=MaskingJob,new MaskingJob()[a73_0x309787(0x1c1)]()[a73_0x309787(0x199)](()=>process[a73_0x309787(0x195)](0x0))[a73_0x309787(0x1b8)](()=>process[a73_0x309787(0x195)](0x1));