const a90_0x5e9984=a90_0x42b5;(function(_0x5d6881,_0x155564){const _0xd5942a=a90_0x42b5,_0x3a1453=_0x5d6881();while(!![]){try{const _0x473709=parseInt(_0xd5942a(0x1cb))/0x1+parseInt(_0xd5942a(0x1eb))/0x2*(-parseInt(_0xd5942a(0x1e1))/0x3)+-parseInt(_0xd5942a(0x1d7))/0x4*(-parseInt(_0xd5942a(0x1bc))/0x5)+parseInt(_0xd5942a(0x1ef))/0x6+-parseInt(_0xd5942a(0x1fd))/0x7+parseInt(_0xd5942a(0x1f7))/0x8+-parseInt(_0xd5942a(0x1cc))/0x9;if(_0x473709===_0x155564)break;else _0x3a1453['push'](_0x3a1453['shift']());}catch(_0x556205){_0x3a1453['push'](_0x3a1453['shift']());}}}(a90_0x5e9c,0xe6f74));const a90_0x2624e7=(function(){let _0x4a779f=!![];return function(_0x2b81f1,_0x43d9b3){const _0x19d61=_0x4a779f?function(){if(_0x43d9b3){const _0x1635d2=_0x43d9b3['apply'](_0x2b81f1,arguments);return _0x43d9b3=null,_0x1635d2;}}:function(){};return _0x4a779f=![],_0x19d61;};}()),a90_0x3064e8=a90_0x2624e7(this,function(){const _0x54f61b=a90_0x42b5;return a90_0x3064e8[_0x54f61b(0x1e5)]()[_0x54f61b(0x1f9)](_0x54f61b(0x201))[_0x54f61b(0x1e5)]()[_0x54f61b(0x1d0)](a90_0x3064e8)[_0x54f61b(0x1f9)]('(((.+)+)+)+$');});a90_0x3064e8();'use strict';var __importDefault=this&&this[a90_0x5e9984(0x1fe)]||function(_0x2fb3ff){return _0x2fb3ff&&_0x2fb3ff['__esModule']?_0x2fb3ff:{'default':_0x2fb3ff};};Object[a90_0x5e9984(0x204)](exports,a90_0x5e9984(0x1c1),{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a90_0x5e9984(0x1ce)),salesforce_1=require(a90_0x5e9984(0x1fb)),steps_creator_1=require(a90_0x5e9984(0x1f3)),logger_enums_1=require('./enums/logger.enums'),logger_details_1=require(a90_0x5e9984(0x1bb)),logger_job_state_1=require(a90_0x5e9984(0x1d4)),job_1=require(a90_0x5e9984(0x1e8)),path_1=__importDefault(require(a90_0x5e9984(0x1b9))),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require('../constants'),job_detail_1=require(a90_0x5e9984(0x1fa));class MaskingJob{constructor(){const _0x1c129b=a90_0x5e9984;this[_0x1c129b(0x1e4)]=![];}async[a90_0x5e9984(0x1c0)](){const _0x8bf590=a90_0x5e9984,{objectRules:_0x171c7f}=this[_0x8bf590(0x1d2)];this['_managerAutomationProcess']=new salesforce_1[(_0x8bf590(0x1ca))](this['getManagerAutomationProcessOptions'](_0x171c7f));}async[a90_0x5e9984(0x1c3)](){const _0x178edc=a90_0x5e9984;job_detail_1[_0x178edc(0x1d1)]['log'](_0x178edc(0x1f0)),this[_0x178edc(0x1fc)][_0x178edc(0x1cf)](_0x178edc(0x1f0));const {objectRules:_0x4d4072,libraries:_0x44e52e}=this[_0x178edc(0x1d2)];this['_steps']=await new steps_creator_1[(_0x178edc(0x1c7))]({'loggerDetails':this['_loggerDetails'],'loggerJobState':this['_loggerJobState'],'libraries':_0x44e52e,'objectRules':_0x4d4072,'request':this[_0x178edc(0x1f5)]})[_0x178edc(0x1da)]();for(const _0x5200ce of this[_0x178edc(0x203)]){await _0x5200ce['execute']();}}[a90_0x5e9984(0x1d6)](_0x5871ab){const _0x1da976=a90_0x5e9984,_0x40776a=[],_0x5831bf=[],_0x4e3044=[],_0x26857b=[];for(const _0x13d5ab in _0x5871ab){const {isDisableProcessBuilder:_0x27de81,isDisableTrigger:_0xaf5eae,isDisableValidationRule:_0x4cd8ef,isDisableWorkflow:_0x2a06b8}=_0x5871ab[_0x13d5ab][_0x1da976(0x1e0)];_0x27de81&&_0x4e3044[_0x1da976(0x1dc)](_0x13d5ab),_0xaf5eae&&_0x40776a[_0x1da976(0x1dc)](_0x13d5ab),_0x4cd8ef&&_0x26857b['push'](_0x13d5ab),_0x2a06b8&&_0x5831bf[_0x1da976(0x1dc)](_0x13d5ab);}return{'instance':this['_request'],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x40776a,'workflowsObjects':_0x5831bf,'processBuilderObjects':_0x4e3044,'validationRulesObjects':_0x26857b};}async[a90_0x5e9984(0x1be)](){const _0x477de8=a90_0x5e9984;job_detail_1['systemLogger'][_0x477de8(0x1cf)](_0x477de8(0x1e6)),this[_0x477de8(0x1fc)][_0x477de8(0x1cf)](_0x477de8(0x1e6)),await this['_managerAutomationProcess'][_0x477de8(0x1f4)]();}async['enableAutomationProcess'](){const _0x56449e=a90_0x5e9984;!this[_0x56449e(0x1e4)]&&(job_detail_1[_0x56449e(0x1d1)][_0x56449e(0x1cf)](_0x56449e(0x1d3)),this[_0x56449e(0x1fc)][_0x56449e(0x1cf)](_0x56449e(0x1d3)),await this[_0x56449e(0x1d8)]['enable']()['catch'](_0x4c0a9a=>{const _0x2997de=_0x56449e;this[_0x2997de(0x1e4)]=!![];throw _0x4c0a9a;}));}async[a90_0x5e9984(0x1c8)](){const _0x2789b5=a90_0x5e9984,_0x261625=await(0x0,promises_1[_0x2789b5(0x1db)])(path_1[_0x2789b5(0x1ff)][_0x2789b5(0x1d9)](job_detail_1[_0x2789b5(0x1bd)],job_1[_0x2789b5(0x1f6)]),{'encoding':_0x2789b5(0x1c4)});return await(0x0,promises_1['rm'])(path_1[_0x2789b5(0x1ff)][_0x2789b5(0x1d9)](job_detail_1[_0x2789b5(0x1bd)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON[_0x2789b5(0x1bf)](_0x261625)['details'];}[a90_0x5e9984(0x1e3)](_0x4fe62f){const _0xb46b1a=a90_0x5e9984;return(0x0,promises_1[_0xb46b1a(0x1dd)])(path_1['default']['join'](job_detail_1[_0xb46b1a(0x1bd)],constants_1['AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME']),Buffer[_0xb46b1a(0x1f8)](_0x4fe62f,'base64'));}async[a90_0x5e9984(0x1ee)](){const _0x54b233=a90_0x5e9984;this['_maskingManifest']=await this[_0x54b233(0x1c8)]();const {objectRules:_0x252c48,credentials:_0x4d3d7b}=this[_0x54b233(0x1d2)];this[_0x54b233(0x1fc)]=await new logger_details_1['LoggerDetails'](job_detail_1[_0x54b233(0x1bd)],job_detail_1[_0x54b233(0x1ec)])[_0x54b233(0x1c9)](),this[_0x54b233(0x1f2)]=await new logger_job_state_1[(_0x54b233(0x1df))](job_detail_1[_0x54b233(0x1bd)],job_detail_1['jobId'])[_0x54b233(0x1c9)](Object[_0x54b233(0x202)](_0x252c48));try{this[_0x54b233(0x1f2)][_0x54b233(0x1cd)](logger_enums_1['JobStatus'][_0x54b233(0x1ed)]),this[_0x54b233(0x1f5)]=await salesforce_1[_0x54b233(0x1ea)][_0x54b233(0x1da)](new auth_manager_1['AuthManager'](_0x4d3d7b),[],{'headers':{'Accept-Encoding':_0x54b233(0x205)}}),await this['initAutomationProcess'](),await this[_0x54b233(0x1be)](),await this[_0x54b233(0x1c3)](),await this[_0x54b233(0x1c6)](),this[_0x54b233(0x1f2)][_0x54b233(0x1cd)](logger_enums_1[_0x54b233(0x1de)]['COMPLETED']);}catch(_0x4a7b6d){await this['enableAutomationProcess']()[_0x54b233(0x1c5)](_0x5e4d23=>{const _0x39497c=_0x54b233;job_detail_1[_0x39497c(0x1d1)][_0x39497c(0x1e7)](_0x5e4d23[_0x39497c(0x1ba)]);}),this[_0x54b233(0x1fc)]['exception'](_0x4a7b6d[_0x54b233(0x1ba)]),this[_0x54b233(0x1f2)][_0x54b233(0x1cd)](logger_enums_1['JobStatus']['FAILED']),this[_0x54b233(0x1f2)][_0x54b233(0x1e2)](_0x4a7b6d[_0x54b233(0x1ba)]),job_detail_1[_0x54b233(0x1d1)][_0x54b233(0x1e7)](_0x4a7b6d[_0x54b233(0x1ba)]);}finally{this[_0x54b233(0x1fc)][_0x54b233(0x1cf)]('Finish\x20Masking\x20Process'),job_detail_1[_0x54b233(0x1d1)][_0x54b233(0x1cf)](_0x54b233(0x1d5)),await this[_0x54b233(0x1f2)][_0x54b233(0x200)](),await this[_0x54b233(0x1fc)][_0x54b233(0x200)]();}}}function a90_0x42b5(_0x4b8b65,_0x305c1f){const _0x2fe76b=a90_0x5e9c();return a90_0x42b5=function(_0x3064e8,_0x2624e7){_0x3064e8=_0x3064e8-0x1b9;let _0x5e9ca4=_0x2fe76b[_0x3064e8];return _0x5e9ca4;},a90_0x42b5(_0x4b8b65,_0x305c1f);}exports[a90_0x5e9984(0x1f1)]=MaskingJob,new MaskingJob()['execute']()[a90_0x5e9984(0x1c2)](()=>process[a90_0x5e9984(0x1e9)](0x0))['catch'](()=>process[a90_0x5e9984(0x1e9)](0x1));function a90_0x5e9c(){const _0x1679a2=['join','create','readFile','push','writeFile','JobStatus','LoggerJobState','disableAutomation','2034JnUuKb','setJobError','saveSourceAutomationProcessesBackup','_isEnableAutomationProcessError','toString','Disable\x20automation\x20process','error','../../../constants/job','exit','AxiosInstanceUtils','1678pKqJGn','jobId','IN_PROGRESS','execute','5462868patwVU','Start\x20Masking\x20Process','MaskingJob','_loggerJobState','./classes/step/steps-creator','disable','_request','MANIFEST_FILENAME','7767104cJdWKI','from','search','./job-detail','@flosum/salesforce','_loggerDetails','9957948TYLnhh','__importDefault','default','kill','(((.+)+)+)+$','keys','_steps','defineProperty','gzip','path','message','./classes/logger/logger-details','5531215tSjXQW','jobStorePath','disableAutomationProcess','parse','initAutomationProcess','__esModule','then','masking','utf-8','catch','enableAutomationProcess','StepsCreator','getManifest','init','ManagerAutomationProcess','516396wdFmTR','5099067FzUaVs','setJobStatus','fs/promises','log','constructor','systemLogger','_maskingManifest','Enable\x20automation\x20process','./classes/logger/logger-job-state','Finish\x20Masking\x20Process','getManagerAutomationProcessOptions','4fNAHqG','_managerAutomationProcess'];a90_0x5e9c=function(){return _0x1679a2;};return a90_0x5e9c();}