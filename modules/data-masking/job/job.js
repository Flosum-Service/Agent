const a72_0x21c9ba=a72_0x2b1f;(function(_0x27040f,_0x3be41c){const _0x114da8=a72_0x2b1f,_0x1ec36d=_0x27040f();while(!![]){try{const _0x3becb3=-parseInt(_0x114da8(0x11b))/0x1+parseInt(_0x114da8(0xcf))/0x2*(-parseInt(_0x114da8(0x11d))/0x3)+-parseInt(_0x114da8(0x116))/0x4+-parseInt(_0x114da8(0x115))/0x5+-parseInt(_0x114da8(0x11c))/0x6*(-parseInt(_0x114da8(0xd0))/0x7)+parseInt(_0x114da8(0xf1))/0x8+parseInt(_0x114da8(0xff))/0x9;if(_0x3becb3===_0x3be41c)break;else _0x1ec36d['push'](_0x1ec36d['shift']());}catch(_0x51dfac){_0x1ec36d['push'](_0x1ec36d['shift']());}}}(a72_0x3008,0x960c5));const a72_0xfcc1b2=(function(){let _0x4512af=!![];return function(_0x439fdf,_0x107cbb){const _0x3e2cab=_0x4512af?function(){if(_0x107cbb){const _0x2b361a=_0x107cbb['apply'](_0x439fdf,arguments);return _0x107cbb=null,_0x2b361a;}}:function(){};return _0x4512af=![],_0x3e2cab;};}()),a72_0x19ac32=a72_0xfcc1b2(this,function(){const _0x5d97fb=a72_0x2b1f;return a72_0x19ac32[_0x5d97fb(0xee)]()[_0x5d97fb(0x101)](_0x5d97fb(0xf7))[_0x5d97fb(0xee)]()[_0x5d97fb(0xd8)](a72_0x19ac32)[_0x5d97fb(0x101)]('(((.+)+)+)+$');});a72_0x19ac32();'use strict';var __importDefault=this&&this[a72_0x21c9ba(0x107)]||function(_0x5f0c29){const _0x3c6ed7=a72_0x21c9ba;return _0x5f0c29&&_0x5f0c29[_0x3c6ed7(0x118)]?_0x5f0c29:{'default':_0x5f0c29};};Object[a72_0x21c9ba(0xda)](exports,a72_0x21c9ba(0x118),{'value':!![]}),exports['MaskingJob']=void 0x0;function a72_0x3008(){const _0x434391=['Start\x20Masking\x20Process','./classes/logger/logger-job-state','FAILED','_request','parse','Disable\x20automation\x20process','masking','_loggerJobState','from','_managerAutomationProcess','COMPLETED','push','AuthManager','5155140IYNlHl','4549296brUsRV','../../shared/managers/auth.manager','__esModule','IN_PROGRESS','../../../constants/job','625164dCxIzd','6ArEzHD','3051954wzTQDQ','details','getManifest','setJobError','2YLevdS','1694609ftlfXg','then','../constants','_maskingManifest','disableAutomation','exit','create','AxiosInstanceUtils','constructor','disable','defineProperty','StepsCreator','MaskingJob','initAutomationProcess','getManagerAutomationProcessOptions','Finish\x20Masking\x20Process','_steps','_loggerDetails','gzip','@flosum/salesforce','jobStorePath','./enums/logger.enums','log','LoggerDetails','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','utf-8','saveSourceAutomationProcessesBackup','JobStatus','kill','writeFile','toString','readFile','enableAutomationProcess','7020376kWxnFL','join','message','exception','init','systemLogger','(((.+)+)+)+$','fs/promises','Enable\x20automation\x20process','path','catch','_isEnableAutomationProcessError','error','default','29752173LLgRKR','disableAutomationProcess','search','MANIFEST_FILENAME','base64','./classes/logger/logger-details','setJobStatus','keys','__importDefault'];a72_0x3008=function(){return _0x434391;};return a72_0x3008();}function a72_0x2b1f(_0x508a1f,_0x4dacd6){const _0x3d7fc5=a72_0x3008();return a72_0x2b1f=function(_0x19ac32,_0xfcc1b2){_0x19ac32=_0x19ac32-0xcc;let _0x30083f=_0x3d7fc5[_0x19ac32];return _0x30083f;},a72_0x2b1f(_0x508a1f,_0x4dacd6);}const promises_1=require(a72_0x21c9ba(0xf8)),salesforce_1=require(a72_0x21c9ba(0xe3)),steps_creator_1=require('./classes/step/steps-creator'),logger_enums_1=require(a72_0x21c9ba(0xe5)),logger_details_1=require(a72_0x21c9ba(0x104)),logger_job_state_1=require(a72_0x21c9ba(0x109)),job_1=require(a72_0x21c9ba(0x11a)),path_1=__importDefault(require(a72_0x21c9ba(0xfa))),auth_manager_1=require(a72_0x21c9ba(0x117)),constants_1=require(a72_0x21c9ba(0xd2)),job_detail_1=require('./job-detail');class MaskingJob{constructor(){const _0x38f5a4=a72_0x21c9ba;this[_0x38f5a4(0xfc)]=![];}async[a72_0x21c9ba(0xdd)](){const {objectRules:_0x18c2dc}=this['_maskingManifest'];this['_managerAutomationProcess']=new salesforce_1['ManagerAutomationProcess'](this['getManagerAutomationProcessOptions'](_0x18c2dc));}async[a72_0x21c9ba(0x10e)](){const _0x394222=a72_0x21c9ba;job_detail_1[_0x394222(0xf6)]['log'](_0x394222(0x108)),this[_0x394222(0xe1)][_0x394222(0xe6)](_0x394222(0x108));const {objectRules:_0x63cf19,libraries:_0x81c36a}=this[_0x394222(0xd3)];this[_0x394222(0xe0)]=await new steps_creator_1[(_0x394222(0xdb))]({'loggerDetails':this[_0x394222(0xe1)],'loggerJobState':this[_0x394222(0x10f)],'libraries':_0x81c36a,'objectRules':_0x63cf19,'request':this[_0x394222(0x10b)]})[_0x394222(0xd6)]();for(const _0x35fc91 of this['_steps']){await _0x35fc91['execute']();}}[a72_0x21c9ba(0xde)](_0x82b028){const _0x1b9b7b=a72_0x21c9ba,_0xa2205e=[],_0x2f2c4d=[],_0x575d53=[],_0x35ae4f=[];for(const _0x4440da in _0x82b028){const {isDisableProcessBuilder:_0x240153,isDisableTrigger:_0x4eaf06,isDisableValidationRule:_0x39727a,isDisableWorkflow:_0x29e0b1}=_0x82b028[_0x4440da][_0x1b9b7b(0xd4)];_0x240153&&_0x575d53[_0x1b9b7b(0x113)](_0x4440da),_0x4eaf06&&_0xa2205e['push'](_0x4440da),_0x39727a&&_0x35ae4f[_0x1b9b7b(0x113)](_0x4440da),_0x29e0b1&&_0x2f2c4d[_0x1b9b7b(0x113)](_0x4440da);}return{'instance':this[_0x1b9b7b(0x10b)],'saveSourceMetadataBackup':this[_0x1b9b7b(0xea)],'triggersObjects':_0xa2205e,'workflowsObjects':_0x2f2c4d,'processBuilderObjects':_0x575d53,'validationRulesObjects':_0x35ae4f};}async[a72_0x21c9ba(0x100)](){const _0x3ff993=a72_0x21c9ba;job_detail_1[_0x3ff993(0xf6)][_0x3ff993(0xe6)](_0x3ff993(0x10d)),this['_loggerDetails'][_0x3ff993(0xe6)](_0x3ff993(0x10d)),await this[_0x3ff993(0x111)][_0x3ff993(0xd9)]();}async[a72_0x21c9ba(0xf0)](){const _0x3d5ef7=a72_0x21c9ba;!this[_0x3d5ef7(0xfc)]&&(job_detail_1[_0x3d5ef7(0xf6)][_0x3d5ef7(0xe6)](_0x3d5ef7(0xf9)),this['_loggerDetails'][_0x3d5ef7(0xe6)](_0x3d5ef7(0xf9)),await this[_0x3d5ef7(0x111)]['enable']()[_0x3d5ef7(0xfb)](_0x10bde9=>{const _0x236fcc=_0x3d5ef7;this[_0x236fcc(0xfc)]=!![];throw _0x10bde9;}));}async[a72_0x21c9ba(0xcd)](){const _0x259cac=a72_0x21c9ba,_0x1f6bac=await(0x0,promises_1[_0x259cac(0xef)])(path_1['default'][_0x259cac(0xf2)](job_detail_1[_0x259cac(0xe4)],job_1[_0x259cac(0x102)]),{'encoding':_0x259cac(0xe9)});return await(0x0,promises_1['rm'])(path_1[_0x259cac(0xfe)]['join'](job_detail_1[_0x259cac(0xe4)],job_1['MANIFEST_FILENAME']),{'recursive':!![],'force':!![]}),JSON[_0x259cac(0x10c)](_0x1f6bac)[_0x259cac(0xcc)];}[a72_0x21c9ba(0xea)](_0x4bf4a3){const _0x25530a=a72_0x21c9ba;return(0x0,promises_1[_0x25530a(0xed)])(path_1['default'][_0x25530a(0xf2)](job_detail_1[_0x25530a(0xe4)],constants_1[_0x25530a(0xe8)]),Buffer[_0x25530a(0x110)](_0x4bf4a3,_0x25530a(0x103)));}async['execute'](){const _0xb9f0ff=a72_0x21c9ba;this['_maskingManifest']=await this[_0xb9f0ff(0xcd)]();const {objectRules:_0x1a8434,credentials:_0x58ee33}=this[_0xb9f0ff(0xd3)];this[_0xb9f0ff(0xe1)]=await new logger_details_1[(_0xb9f0ff(0xe7))](job_detail_1[_0xb9f0ff(0xe4)],job_detail_1['jobId'])[_0xb9f0ff(0xf5)](),this[_0xb9f0ff(0x10f)]=await new logger_job_state_1['LoggerJobState'](job_detail_1[_0xb9f0ff(0xe4)],job_detail_1['jobId'])[_0xb9f0ff(0xf5)](Object[_0xb9f0ff(0x106)](_0x1a8434));try{this[_0xb9f0ff(0x10f)]['setJobStatus'](logger_enums_1[_0xb9f0ff(0xeb)][_0xb9f0ff(0x119)]),this[_0xb9f0ff(0x10b)]=await salesforce_1[_0xb9f0ff(0xd7)][_0xb9f0ff(0xd6)](new auth_manager_1[(_0xb9f0ff(0x114))](_0x58ee33),[],{'headers':{'Accept-Encoding':_0xb9f0ff(0xe2)}}),await this[_0xb9f0ff(0xdd)](),await this[_0xb9f0ff(0x100)](),await this['masking'](),await this[_0xb9f0ff(0xf0)](),this[_0xb9f0ff(0x10f)][_0xb9f0ff(0x105)](logger_enums_1[_0xb9f0ff(0xeb)][_0xb9f0ff(0x112)]);}catch(_0x3c2035){await this[_0xb9f0ff(0xf0)]()[_0xb9f0ff(0xfb)](_0x4bc7da=>{const _0x4350b5=_0xb9f0ff;job_detail_1[_0x4350b5(0xf6)][_0x4350b5(0xfd)](_0x4bc7da[_0x4350b5(0xf3)]);}),this[_0xb9f0ff(0xe1)][_0xb9f0ff(0xf4)](_0x3c2035[_0xb9f0ff(0xf3)]),this[_0xb9f0ff(0x10f)][_0xb9f0ff(0x105)](logger_enums_1[_0xb9f0ff(0xeb)][_0xb9f0ff(0x10a)]),this[_0xb9f0ff(0x10f)][_0xb9f0ff(0xce)](_0x3c2035[_0xb9f0ff(0xf3)]),job_detail_1[_0xb9f0ff(0xf6)][_0xb9f0ff(0xfd)](_0x3c2035[_0xb9f0ff(0xf3)]);}finally{this['_loggerDetails']['log'](_0xb9f0ff(0xdf)),job_detail_1['systemLogger'][_0xb9f0ff(0xe6)]('Finish\x20Masking\x20Process'),await this[_0xb9f0ff(0x10f)][_0xb9f0ff(0xec)](),await this['_loggerDetails'][_0xb9f0ff(0xec)]();}}}exports[a72_0x21c9ba(0xdc)]=MaskingJob,new MaskingJob()['execute']()[a72_0x21c9ba(0xd1)](()=>process[a72_0x21c9ba(0xd5)](0x0))[a72_0x21c9ba(0xfb)](()=>process[a72_0x21c9ba(0xd5)](0x1));