const a90_0x45059d=a90_0x1be2;(function(_0x531dd2,_0x58c43f){const _0x4a9cab=a90_0x1be2,_0x3a3021=_0x531dd2();while(!![]){try{const _0x5d4612=-parseInt(_0x4a9cab(0x1f5))/0x1+-parseInt(_0x4a9cab(0x1c2))/0x2*(parseInt(_0x4a9cab(0x1ba))/0x3)+parseInt(_0x4a9cab(0x1da))/0x4*(-parseInt(_0x4a9cab(0x203))/0x5)+parseInt(_0x4a9cab(0x1d8))/0x6*(parseInt(_0x4a9cab(0x1cb))/0x7)+-parseInt(_0x4a9cab(0x206))/0x8*(-parseInt(_0x4a9cab(0x1df))/0x9)+-parseInt(_0x4a9cab(0x1f7))/0xa*(-parseInt(_0x4a9cab(0x1f4))/0xb)+parseInt(_0x4a9cab(0x1e6))/0xc;if(_0x5d4612===_0x58c43f)break;else _0x3a3021['push'](_0x3a3021['shift']());}catch(_0x41943e){_0x3a3021['push'](_0x3a3021['shift']());}}}(a90_0x3e62,0x790c7));const a90_0x388621=(function(){let _0x3c6de9=!![];return function(_0x347bf0,_0x54ff80){const _0x52370a=_0x3c6de9?function(){const _0x4744bd=a90_0x1be2;if(_0x54ff80){const _0x2ba242=_0x54ff80[_0x4744bd(0x201)](_0x347bf0,arguments);return _0x54ff80=null,_0x2ba242;}}:function(){};return _0x3c6de9=![],_0x52370a;};}()),a90_0x122a74=a90_0x388621(this,function(){const _0x2463ca=a90_0x1be2;return a90_0x122a74[_0x2463ca(0x1b2)]()[_0x2463ca(0x1e8)]('(((.+)+)+)+$')['toString']()[_0x2463ca(0x1ce)](a90_0x122a74)[_0x2463ca(0x1e8)](_0x2463ca(0x1bc));});function a90_0x1be2(_0x380123,_0x49bc45){const _0x188dc8=a90_0x3e62();return a90_0x1be2=function(_0x122a74,_0x388621){_0x122a74=_0x122a74-0x1b2;let _0x3e628c=_0x188dc8[_0x122a74];return _0x3e628c;},a90_0x1be2(_0x380123,_0x49bc45);}a90_0x122a74();function a90_0x3e62(){const _0x2dabe1=['@flosum/salesforce','writeFile','./classes/logger/logger-details','MANIFEST_FILENAME','Disable\x20automation\x20process','push','_managerAutomationProcess','./enums/logger.enums','masking','166958wZDmGh','554424vtFJeV','setJobStatus','20CYtePe','_request','utf-8','Enable\x20automation\x20process','init','./classes/step/steps-creator','enable','./job-detail','ManagerAutomationProcess','LoggerDetails','apply','MaskingJob','961505mgTYZg','saveSourceAutomationProcessesBackup','from','8BGPqdE','toString','_maskingManifest','keys','FAILED','create','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','parse','systemLogger','138hBZwJZ','jobId','(((.+)+)+)+$','../constants','_isEnableAutomationProcessError','exception','details','getManifest','26286rdzbmq','kill','base64','disableAutomationProcess','message','jobStorePath','__esModule','default','AuthManager','3717xpenDL','gzip','enableAutomationProcess','constructor','error','AxiosInstanceUtils','IN_PROGRESS','JobStatus','../../shared/managers/auth.manager','LoggerJobState','_loggerDetails','../../../constants/job','catch','3942mqAsgD','Start\x20Masking\x20Process','12BsNljy','getManagerAutomationProcessOptions','log','__importDefault','then','1614123ttgPEB','initAutomationProcess','_loggerJobState','Finish\x20Masking\x20Process','_steps','join','execute','20077800LQnDfd','StepsCreator','search','exit','disableAutomation'];a90_0x3e62=function(){return _0x2dabe1;};return a90_0x3e62();}'use strict';var __importDefault=this&&this[a90_0x45059d(0x1dd)]||function(_0x85642d){return _0x85642d&&_0x85642d['__esModule']?_0x85642d:{'default':_0x85642d};};Object['defineProperty'](exports,a90_0x45059d(0x1c8),{'value':!![]}),exports[a90_0x45059d(0x202)]=void 0x0;const promises_1=require('fs/promises'),salesforce_1=require(a90_0x45059d(0x1eb)),steps_creator_1=require(a90_0x45059d(0x1fc)),logger_enums_1=require(a90_0x45059d(0x1f2)),logger_details_1=require(a90_0x45059d(0x1ed)),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require(a90_0x45059d(0x1d6)),path_1=__importDefault(require('path')),auth_manager_1=require(a90_0x45059d(0x1d3)),constants_1=require(a90_0x45059d(0x1bd)),job_detail_1=require(a90_0x45059d(0x1fe));class MaskingJob{constructor(){const _0x4de6eb=a90_0x45059d;this[_0x4de6eb(0x1be)]=![];}async[a90_0x45059d(0x1e0)](){const _0x4ad3f1=a90_0x45059d,{objectRules:_0x469e89}=this[_0x4ad3f1(0x1b3)];this['_managerAutomationProcess']=new salesforce_1[(_0x4ad3f1(0x1ff))](this[_0x4ad3f1(0x1db)](_0x469e89));}async[a90_0x45059d(0x1f3)](){const _0x41d96b=a90_0x45059d;job_detail_1[_0x41d96b(0x1b9)][_0x41d96b(0x1dc)](_0x41d96b(0x1d9)),this[_0x41d96b(0x1d5)][_0x41d96b(0x1dc)](_0x41d96b(0x1d9));const {objectRules:_0x3dbb05,libraries:_0x278ee3}=this[_0x41d96b(0x1b3)];this['_steps']=await new steps_creator_1[(_0x41d96b(0x1e7))]({'loggerDetails':this[_0x41d96b(0x1d5)],'loggerJobState':this['_loggerJobState'],'libraries':_0x278ee3,'objectRules':_0x3dbb05,'request':this['_request']})[_0x41d96b(0x1b6)]();for(const _0x4cde69 of this[_0x41d96b(0x1e3)]){await _0x4cde69[_0x41d96b(0x1e5)]();}}['getManagerAutomationProcessOptions'](_0x533106){const _0x30179f=a90_0x45059d,_0x3545b3=[],_0x48883a=[],_0x48171f=[],_0x11b15c=[];for(const _0x5a42bf in _0x533106){const {isDisableProcessBuilder:_0x2c3da9,isDisableTrigger:_0x350012,isDisableValidationRule:_0x40cbf6,isDisableWorkflow:_0x212b89}=_0x533106[_0x5a42bf][_0x30179f(0x1ea)];_0x2c3da9&&_0x48171f['push'](_0x5a42bf),_0x350012&&_0x3545b3[_0x30179f(0x1f0)](_0x5a42bf),_0x40cbf6&&_0x11b15c[_0x30179f(0x1f0)](_0x5a42bf),_0x212b89&&_0x48883a[_0x30179f(0x1f0)](_0x5a42bf);}return{'instance':this[_0x30179f(0x1f8)],'saveSourceMetadataBackup':this[_0x30179f(0x204)],'triggersObjects':_0x3545b3,'workflowsObjects':_0x48883a,'processBuilderObjects':_0x48171f,'validationRulesObjects':_0x11b15c};}async[a90_0x45059d(0x1c5)](){const _0x484eb1=a90_0x45059d;job_detail_1[_0x484eb1(0x1b9)][_0x484eb1(0x1dc)](_0x484eb1(0x1ef)),this[_0x484eb1(0x1d5)][_0x484eb1(0x1dc)](_0x484eb1(0x1ef)),await this['_managerAutomationProcess']['disable']();}async[a90_0x45059d(0x1cd)](){const _0x31598e=a90_0x45059d;!this['_isEnableAutomationProcessError']&&(job_detail_1[_0x31598e(0x1b9)][_0x31598e(0x1dc)](_0x31598e(0x1fa)),this['_loggerDetails'][_0x31598e(0x1dc)]('Enable\x20automation\x20process'),await this[_0x31598e(0x1f1)][_0x31598e(0x1fd)]()[_0x31598e(0x1d7)](_0x4f3178=>{this['_isEnableAutomationProcessError']=!![];throw _0x4f3178;}));}async[a90_0x45059d(0x1c1)](){const _0x2abcd5=a90_0x45059d,_0x40a68b=await(0x0,promises_1['readFile'])(path_1[_0x2abcd5(0x1c9)][_0x2abcd5(0x1e4)](job_detail_1[_0x2abcd5(0x1c7)],job_1[_0x2abcd5(0x1ee)]),{'encoding':_0x2abcd5(0x1f9)});return await(0x0,promises_1['rm'])(path_1[_0x2abcd5(0x1c9)][_0x2abcd5(0x1e4)](job_detail_1[_0x2abcd5(0x1c7)],job_1[_0x2abcd5(0x1ee)]),{'recursive':!![],'force':!![]}),JSON[_0x2abcd5(0x1b8)](_0x40a68b)[_0x2abcd5(0x1c0)];}[a90_0x45059d(0x204)](_0x401642){const _0x1c8ed8=a90_0x45059d;return(0x0,promises_1[_0x1c8ed8(0x1ec)])(path_1[_0x1c8ed8(0x1c9)][_0x1c8ed8(0x1e4)](job_detail_1[_0x1c8ed8(0x1c7)],constants_1[_0x1c8ed8(0x1b7)]),Buffer[_0x1c8ed8(0x205)](_0x401642,_0x1c8ed8(0x1c4)));}async[a90_0x45059d(0x1e5)](){const _0x196679=a90_0x45059d;this[_0x196679(0x1b3)]=await this[_0x196679(0x1c1)]();const {objectRules:_0x5390bc,credentials:_0x1ae340}=this['_maskingManifest'];this[_0x196679(0x1d5)]=await new logger_details_1[(_0x196679(0x200))](job_detail_1[_0x196679(0x1c7)],job_detail_1[_0x196679(0x1bb)])[_0x196679(0x1fb)](),this['_loggerJobState']=await new logger_job_state_1[(_0x196679(0x1d4))](job_detail_1[_0x196679(0x1c7)],job_detail_1[_0x196679(0x1bb)])[_0x196679(0x1fb)](Object[_0x196679(0x1b4)](_0x5390bc));try{this[_0x196679(0x1e1)][_0x196679(0x1f6)](logger_enums_1[_0x196679(0x1d2)][_0x196679(0x1d1)]),this['_request']=await salesforce_1[_0x196679(0x1d0)][_0x196679(0x1b6)](new auth_manager_1[(_0x196679(0x1ca))](_0x1ae340),[],{'headers':{'Accept-Encoding':_0x196679(0x1cc)}}),await this[_0x196679(0x1e0)](),await this[_0x196679(0x1c5)](),await this[_0x196679(0x1f3)](),await this[_0x196679(0x1cd)](),this[_0x196679(0x1e1)]['setJobStatus'](logger_enums_1[_0x196679(0x1d2)]['COMPLETED']);}catch(_0x33fcae){await this[_0x196679(0x1cd)]()[_0x196679(0x1d7)](_0x41db6a=>{job_detail_1['systemLogger']['error'](_0x41db6a['message']);}),this[_0x196679(0x1d5)][_0x196679(0x1bf)](_0x33fcae[_0x196679(0x1c6)]),this[_0x196679(0x1e1)][_0x196679(0x1f6)](logger_enums_1[_0x196679(0x1d2)][_0x196679(0x1b5)]),this['_loggerJobState']['setJobError'](_0x33fcae[_0x196679(0x1c6)]),job_detail_1[_0x196679(0x1b9)][_0x196679(0x1cf)](_0x33fcae[_0x196679(0x1c6)]);}finally{this['_loggerDetails'][_0x196679(0x1dc)](_0x196679(0x1e2)),job_detail_1[_0x196679(0x1b9)][_0x196679(0x1dc)](_0x196679(0x1e2)),await this[_0x196679(0x1e1)][_0x196679(0x1c3)](),await this[_0x196679(0x1d5)][_0x196679(0x1c3)]();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()[a90_0x45059d(0x1e5)]()[a90_0x45059d(0x1de)](()=>process[a90_0x45059d(0x1e9)](0x0))[a90_0x45059d(0x1d7)](()=>process[a90_0x45059d(0x1e9)](0x1));