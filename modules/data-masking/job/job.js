const a73_0x3acfcc=a73_0x30ac;(function(_0x1051f4,_0x40d4fb){const _0x2cae28=a73_0x30ac,_0x2963aa=_0x1051f4();while(!![]){try{const _0x48cff5=-parseInt(_0x2cae28(0x96))/0x1+parseInt(_0x2cae28(0x8f))/0x2*(parseInt(_0x2cae28(0xbf))/0x3)+parseInt(_0x2cae28(0xb4))/0x4+parseInt(_0x2cae28(0xa6))/0x5+parseInt(_0x2cae28(0x8d))/0x6*(parseInt(_0x2cae28(0x8a))/0x7)+parseInt(_0x2cae28(0xc8))/0x8*(parseInt(_0x2cae28(0x95))/0x9)+-parseInt(_0x2cae28(0xb0))/0xa*(parseInt(_0x2cae28(0xb8))/0xb);if(_0x48cff5===_0x40d4fb)break;else _0x2963aa['push'](_0x2963aa['shift']());}catch(_0x33600f){_0x2963aa['push'](_0x2963aa['shift']());}}}(a73_0x54a6,0x8c54a));const a73_0x2ff218=(function(){let _0x21dd6d=!![];return function(_0x59996c,_0xfe1610){const _0x140654=_0x21dd6d?function(){const _0x97a46c=a73_0x30ac;if(_0xfe1610){const _0x1de713=_0xfe1610[_0x97a46c(0xba)](_0x59996c,arguments);return _0xfe1610=null,_0x1de713;}}:function(){};return _0x21dd6d=![],_0x140654;};}()),a73_0x5ee880=a73_0x2ff218(this,function(){const _0x5be204=a73_0x30ac;return a73_0x5ee880[_0x5be204(0x89)]()[_0x5be204(0xa0)](_0x5be204(0x85))['toString']()[_0x5be204(0xbc)](a73_0x5ee880)['search'](_0x5be204(0x85));});function a73_0x54a6(){const _0x43eb6f=['masking','path','./classes/logger/logger-details','then','_managerAutomationProcess','./job-detail','search','AuthManager','exit','jobStorePath','__importDefault','from','4873480tGbLYu','init','IN_PROGRESS','message','Finish\x20Masking\x20Process','LoggerDetails','saveSourceAutomationProcessesBackup','./enums/logger.enums','keys','./classes/step/steps-creator','20870xsTZxx','initAutomationProcess','AxiosInstanceUtils','writeFile','3800532OQGILH','ManagerAutomationProcess','LoggerJobState','parse','10989IVUKqF','catch','apply','_request','constructor','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','log','53691cVmDnn','execute','jobId','gzip','setJobStatus','../constants','../../../constants/job','Enable\x20automation\x20process','systemLogger','2775016UzoCzH','disable','_steps','readFile','getManifest','@flosum/salesforce','JobStatus','_loggerJobState','enableAutomationProcess','__esModule','../../shared/managers/auth.manager','_loggerDetails','enable','disableAutomationProcess','(((.+)+)+)+$','join','_isEnableAutomationProcessError','create','toString','63GUHtaf','exception','Disable\x20automation\x20process','315570TRXVyt','Start\x20Masking\x20Process','34Xrbwvd','push','_maskingManifest','details','utf-8','getManagerAutomationProcessOptions','18HodlOx','736480vrXkTV','default','MANIFEST_FILENAME','error'];a73_0x54a6=function(){return _0x43eb6f;};return a73_0x54a6();}a73_0x5ee880();'use strict';var __importDefault=this&&this[a73_0x3acfcc(0xa4)]||function(_0x4b641b){const _0xc7eba7=a73_0x3acfcc;return _0x4b641b&&_0x4b641b[_0xc7eba7(0x80)]?_0x4b641b:{'default':_0x4b641b};};Object['defineProperty'](exports,a73_0x3acfcc(0x80),{'value':!![]}),exports['MaskingJob']=void 0x0;function a73_0x30ac(_0x299637,_0x12838d){const _0x589a31=a73_0x54a6();return a73_0x30ac=function(_0x5ee880,_0x2ff218){_0x5ee880=_0x5ee880-0x7f;let _0x54a6de=_0x589a31[_0x5ee880];return _0x54a6de;},a73_0x30ac(_0x299637,_0x12838d);}const promises_1=require('fs/promises'),salesforce_1=require(a73_0x3acfcc(0xcd)),steps_creator_1=require(a73_0x3acfcc(0xaf)),logger_enums_1=require(a73_0x3acfcc(0xad)),logger_details_1=require(a73_0x3acfcc(0x9c)),logger_job_state_1=require('./classes/logger/logger-job-state'),job_1=require(a73_0x3acfcc(0xc5)),path_1=__importDefault(require(a73_0x3acfcc(0x9b))),auth_manager_1=require(a73_0x3acfcc(0x81)),constants_1=require(a73_0x3acfcc(0xc4)),job_detail_1=require(a73_0x3acfcc(0x9f));class MaskingJob{constructor(){const _0x4be6b2=a73_0x3acfcc;this[_0x4be6b2(0x87)]=![];}async[a73_0x3acfcc(0xb1)](){const _0x44ea21=a73_0x3acfcc,{objectRules:_0x394e16}=this[_0x44ea21(0x91)];this['_managerAutomationProcess']=new salesforce_1[(_0x44ea21(0xb5))](this['getManagerAutomationProcessOptions'](_0x394e16));}async[a73_0x3acfcc(0x9a)](){const _0x1a5a5a=a73_0x3acfcc;job_detail_1[_0x1a5a5a(0xc7)][_0x1a5a5a(0xbe)](_0x1a5a5a(0x8e)),this[_0x1a5a5a(0x82)][_0x1a5a5a(0xbe)]('Start\x20Masking\x20Process');const {objectRules:_0x4c7922,libraries:_0x578cb3}=this[_0x1a5a5a(0x91)];this[_0x1a5a5a(0xca)]=await new steps_creator_1['StepsCreator']({'loggerDetails':this[_0x1a5a5a(0x82)],'loggerJobState':this[_0x1a5a5a(0xcf)],'libraries':_0x578cb3,'objectRules':_0x4c7922,'request':this[_0x1a5a5a(0xbb)]})[_0x1a5a5a(0x88)]();for(const _0x13fac1 of this[_0x1a5a5a(0xca)]){await _0x13fac1[_0x1a5a5a(0xc0)]();}}[a73_0x3acfcc(0x94)](_0x5df1a7){const _0x2baacc=a73_0x3acfcc,_0x345de3=[],_0x2faea6=[],_0x143fba=[],_0x4abc5e=[];for(const _0x5d0daf in _0x5df1a7){const {isDisableProcessBuilder:_0x26b154,isDisableTrigger:_0x4aa5f9,isDisableValidationRule:_0x597811,isDisableWorkflow:_0x495f40}=_0x5df1a7[_0x5d0daf]['disableAutomation'];_0x26b154&&_0x143fba[_0x2baacc(0x90)](_0x5d0daf),_0x4aa5f9&&_0x345de3[_0x2baacc(0x90)](_0x5d0daf),_0x597811&&_0x4abc5e['push'](_0x5d0daf),_0x495f40&&_0x2faea6[_0x2baacc(0x90)](_0x5d0daf);}return{'instance':this[_0x2baacc(0xbb)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x345de3,'workflowsObjects':_0x2faea6,'processBuilderObjects':_0x143fba,'validationRulesObjects':_0x4abc5e};}async[a73_0x3acfcc(0x84)](){const _0x3294dc=a73_0x3acfcc;job_detail_1[_0x3294dc(0xc7)][_0x3294dc(0xbe)](_0x3294dc(0x8c)),this[_0x3294dc(0x82)][_0x3294dc(0xbe)](_0x3294dc(0x8c)),await this[_0x3294dc(0x9e)][_0x3294dc(0xc9)]();}async[a73_0x3acfcc(0x7f)](){const _0x10fc0f=a73_0x3acfcc;!this[_0x10fc0f(0x87)]&&(job_detail_1['systemLogger']['log'](_0x10fc0f(0xc6)),this[_0x10fc0f(0x82)][_0x10fc0f(0xbe)](_0x10fc0f(0xc6)),await this[_0x10fc0f(0x9e)][_0x10fc0f(0x83)]()['catch'](_0x46e4d3=>{const _0x5448bb=_0x10fc0f;this[_0x5448bb(0x87)]=!![];throw _0x46e4d3;}));}async[a73_0x3acfcc(0xcc)](){const _0x184d04=a73_0x3acfcc,_0x5b007c=await(0x0,promises_1[_0x184d04(0xcb)])(path_1[_0x184d04(0x97)][_0x184d04(0x86)](job_detail_1[_0x184d04(0xa3)],job_1[_0x184d04(0x98)]),{'encoding':_0x184d04(0x93)});return await(0x0,promises_1['rm'])(path_1[_0x184d04(0x97)][_0x184d04(0x86)](job_detail_1[_0x184d04(0xa3)],job_1[_0x184d04(0x98)]),{'recursive':!![],'force':!![]}),JSON[_0x184d04(0xb7)](_0x5b007c)[_0x184d04(0x92)];}[a73_0x3acfcc(0xac)](_0x4c85be){const _0x589e48=a73_0x3acfcc;return(0x0,promises_1[_0x589e48(0xb3)])(path_1[_0x589e48(0x97)][_0x589e48(0x86)](job_detail_1[_0x589e48(0xa3)],constants_1[_0x589e48(0xbd)]),Buffer[_0x589e48(0xa5)](_0x4c85be,'base64'));}async[a73_0x3acfcc(0xc0)](){const _0x5126ff=a73_0x3acfcc;this['_maskingManifest']=await this[_0x5126ff(0xcc)]();const {objectRules:_0x97be61,credentials:_0xa8098f}=this[_0x5126ff(0x91)];this[_0x5126ff(0x82)]=await new logger_details_1[(_0x5126ff(0xab))](job_detail_1[_0x5126ff(0xa3)],job_detail_1[_0x5126ff(0xc1)])[_0x5126ff(0xa7)](),this[_0x5126ff(0xcf)]=await new logger_job_state_1[(_0x5126ff(0xb6))](job_detail_1['jobStorePath'],job_detail_1[_0x5126ff(0xc1)])[_0x5126ff(0xa7)](Object[_0x5126ff(0xae)](_0x97be61));try{this[_0x5126ff(0xcf)][_0x5126ff(0xc3)](logger_enums_1[_0x5126ff(0xce)][_0x5126ff(0xa8)]),this['_request']=await salesforce_1[_0x5126ff(0xb2)][_0x5126ff(0x88)](new auth_manager_1[(_0x5126ff(0xa1))](_0xa8098f),[],{'headers':{'Accept-Encoding':_0x5126ff(0xc2)}}),await this['initAutomationProcess'](),await this[_0x5126ff(0x84)](),await this['masking'](),await this['enableAutomationProcess'](),this['_loggerJobState']['setJobStatus'](logger_enums_1['JobStatus']['COMPLETED']);}catch(_0x394767){await this[_0x5126ff(0x7f)]()[_0x5126ff(0xb9)](_0x3b21d9=>{const _0x1c69ec=_0x5126ff;job_detail_1[_0x1c69ec(0xc7)][_0x1c69ec(0x99)](_0x3b21d9['message']);}),this[_0x5126ff(0x82)][_0x5126ff(0x8b)](_0x394767[_0x5126ff(0xa9)]),this[_0x5126ff(0xcf)][_0x5126ff(0xc3)](logger_enums_1[_0x5126ff(0xce)]['FAILED']),this[_0x5126ff(0xcf)]['setJobError'](_0x394767[_0x5126ff(0xa9)]),job_detail_1[_0x5126ff(0xc7)]['error'](_0x394767['message']);}finally{this[_0x5126ff(0x82)][_0x5126ff(0xbe)](_0x5126ff(0xaa)),job_detail_1[_0x5126ff(0xc7)]['log'](_0x5126ff(0xaa)),await this[_0x5126ff(0xcf)]['kill'](),await this[_0x5126ff(0x82)]['kill']();}}}exports['MaskingJob']=MaskingJob,new MaskingJob()[a73_0x3acfcc(0xc0)]()[a73_0x3acfcc(0x9d)](()=>process[a73_0x3acfcc(0xa2)](0x0))[a73_0x3acfcc(0xb9)](()=>process['exit'](0x1));