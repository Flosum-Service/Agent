const a90_0x33c5c7=a90_0x3b6e;(function(_0x3ee997,_0x24df62){const _0x5a8951=a90_0x3b6e,_0x13aa96=_0x3ee997();while(!![]){try{const _0x43ca40=parseInt(_0x5a8951(0x14c))/0x1*(parseInt(_0x5a8951(0x152))/0x2)+-parseInt(_0x5a8951(0x126))/0x3+-parseInt(_0x5a8951(0x122))/0x4+-parseInt(_0x5a8951(0x13c))/0x5+parseInt(_0x5a8951(0x145))/0x6+-parseInt(_0x5a8951(0x13e))/0x7*(-parseInt(_0x5a8951(0x110))/0x8)+parseInt(_0x5a8951(0x155))/0x9*(-parseInt(_0x5a8951(0x146))/0xa);if(_0x43ca40===_0x24df62)break;else _0x13aa96['push'](_0x13aa96['shift']());}catch(_0x5b1645){_0x13aa96['push'](_0x13aa96['shift']());}}}(a90_0x136c,0x69195));const a90_0x1b6e96=(function(){let _0x2fa599=!![];return function(_0x44e27f,_0x2cd3a5){const _0x3ac1f7=_0x2fa599?function(){const _0x3959cc=a90_0x3b6e;if(_0x2cd3a5){const _0x104c47=_0x2cd3a5[_0x3959cc(0x138)](_0x44e27f,arguments);return _0x2cd3a5=null,_0x104c47;}}:function(){};return _0x2fa599=![],_0x3ac1f7;};}()),a90_0x3783b0=a90_0x1b6e96(this,function(){const _0x57ed5b=a90_0x3b6e;return a90_0x3783b0[_0x57ed5b(0x158)]()['search']('(((.+)+)+)+$')[_0x57ed5b(0x158)]()[_0x57ed5b(0x11d)](a90_0x3783b0)[_0x57ed5b(0x134)](_0x57ed5b(0x140));});a90_0x3783b0();function a90_0x3b6e(_0x40ff28,_0x5afd06){const _0x3d1b06=a90_0x136c();return a90_0x3b6e=function(_0x3783b0,_0x1b6e96){_0x3783b0=_0x3783b0-0x110;let _0x136c63=_0x3d1b06[_0x3783b0];return _0x136c63;},a90_0x3b6e(_0x40ff28,_0x5afd06);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3815c6){const _0xf3e04f=a90_0x3b6e;return _0x3815c6&&_0x3815c6[_0xf3e04f(0x148)]?_0x3815c6:{'default':_0x3815c6};};Object['defineProperty'](exports,a90_0x33c5c7(0x148),{'value':!![]}),exports['MaskingJob']=void 0x0;const promises_1=require(a90_0x33c5c7(0x157)),salesforce_1=require('@flosum/salesforce'),steps_creator_1=require(a90_0x33c5c7(0x14e)),logger_enums_1=require(a90_0x33c5c7(0x135)),logger_details_1=require(a90_0x33c5c7(0x144)),logger_job_state_1=require(a90_0x33c5c7(0x14d)),job_1=require(a90_0x33c5c7(0x14b)),path_1=__importDefault(require(a90_0x33c5c7(0x159))),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a90_0x33c5c7(0x150)),job_detail_1=require(a90_0x33c5c7(0x112));class MaskingJob{constructor(){this['_isEnableAutomationProcessError']=![];}async[a90_0x33c5c7(0x117)](){const _0x2eefe7=a90_0x33c5c7,{objectRules:_0x33a875}=this[_0x2eefe7(0x15a)];this[_0x2eefe7(0x111)]=new salesforce_1[(_0x2eefe7(0x130))](this[_0x2eefe7(0x13f)](_0x33a875));}async['masking'](){const _0x14997f=a90_0x33c5c7;job_detail_1[_0x14997f(0x14f)][_0x14997f(0x147)]('Start\x20Masking\x20Process'),this['_loggerDetails'][_0x14997f(0x147)]('Start\x20Masking\x20Process');const {objectRules:_0x52b248,libraries:_0x41ed3d}=this[_0x14997f(0x15a)];this[_0x14997f(0x153)]=await new steps_creator_1[(_0x14997f(0x136))]({'loggerDetails':this[_0x14997f(0x11a)],'loggerJobState':this[_0x14997f(0x121)],'libraries':_0x41ed3d,'objectRules':_0x52b248,'request':this['_request']})[_0x14997f(0x149)]();for(const _0x5bf8e1 of this[_0x14997f(0x153)]){await _0x5bf8e1['execute']();}}[a90_0x33c5c7(0x13f)](_0x6e075b){const _0x5ecbc5=a90_0x33c5c7,_0x513a81=[],_0x124948=[],_0x3b4399=[],_0x31ccdc=[],_0x2e63b3=[];for(const _0x4406df in _0x6e075b){const {isDisableProcessBuilder:_0x2a007f,isDisableTrigger:_0x5edf56,isDisableValidationRule:_0x280fb6,isDisableWorkflow:_0x2d199f,isDisableLookupFilter:_0x3bc231}=_0x6e075b[_0x4406df][_0x5ecbc5(0x12e)];_0x2a007f&&_0x3b4399[_0x5ecbc5(0x141)](_0x4406df),_0x5edf56&&_0x513a81[_0x5ecbc5(0x141)](_0x4406df),_0x280fb6&&_0x31ccdc['push'](_0x4406df),_0x2d199f&&_0x124948[_0x5ecbc5(0x141)](_0x4406df),_0x3bc231&&_0x2e63b3[_0x5ecbc5(0x141)](_0x4406df);}return{'instance':this[_0x5ecbc5(0x114)],'saveSourceMetadataBackup':this['saveSourceAutomationProcessesBackup'],'triggersObjects':_0x513a81,'validationRulesObjects':_0x31ccdc,'workflowsObjects':_0x124948,'flowsAndProcessBuilderObjects':_0x3b4399,'lookupFiltersObjects':_0x2e63b3};}async['disableAutomationProcess'](){const _0x121f52=a90_0x33c5c7;job_detail_1[_0x121f52(0x14f)]['log'](_0x121f52(0x14a)),this[_0x121f52(0x11a)][_0x121f52(0x147)]('Disable\x20automation\x20process'),await this[_0x121f52(0x111)]['disable']();}async[a90_0x33c5c7(0x12c)](){const _0x538621=a90_0x33c5c7;!this[_0x538621(0x15d)]&&(job_detail_1[_0x538621(0x14f)]['log'](_0x538621(0x118)),this[_0x538621(0x11a)]['log']('Enable\x20automation\x20process'),await this[_0x538621(0x111)][_0x538621(0x13a)]()[_0x538621(0x123)](_0x5ba7ba=>{const _0x243e96=_0x538621;this[_0x243e96(0x15d)]=!![];throw _0x5ba7ba;}));}async[a90_0x33c5c7(0x15c)](){const _0x5dc56f=a90_0x33c5c7,_0x4d3219=await(0x0,promises_1[_0x5dc56f(0x12d)])(path_1[_0x5dc56f(0x115)][_0x5dc56f(0x156)](job_detail_1[_0x5dc56f(0x12f)],job_1['MANIFEST_FILENAME']),{'encoding':'utf-8'});return await(0x0,promises_1['rm'])(path_1['default'][_0x5dc56f(0x156)](job_detail_1[_0x5dc56f(0x12f)],job_1[_0x5dc56f(0x11c)]),{'recursive':!![],'force':!![]}),JSON[_0x5dc56f(0x113)](_0x4d3219)[_0x5dc56f(0x124)];}['saveSourceAutomationProcessesBackup'](_0x2652b2){const _0x4991c5=a90_0x33c5c7;return(0x0,promises_1[_0x4991c5(0x15b)])(path_1[_0x4991c5(0x115)][_0x4991c5(0x156)](job_detail_1[_0x4991c5(0x12f)],constants_1[_0x4991c5(0x143)]),_0x2652b2);}async[a90_0x33c5c7(0x127)](){const _0x572a62=a90_0x33c5c7;this[_0x572a62(0x15a)]=await this[_0x572a62(0x15c)]();const {objectRules:_0x3ffc2f,credentials:_0x1bcc39}=this[_0x572a62(0x15a)];this[_0x572a62(0x11a)]=await new logger_details_1[(_0x572a62(0x132))](job_detail_1[_0x572a62(0x12f)],job_detail_1[_0x572a62(0x131)])[_0x572a62(0x11e)](),this[_0x572a62(0x121)]=await new logger_job_state_1['LoggerJobState'](job_detail_1[_0x572a62(0x12f)],job_detail_1[_0x572a62(0x131)])[_0x572a62(0x11e)](Object[_0x572a62(0x120)](_0x3ffc2f));try{this[_0x572a62(0x121)][_0x572a62(0x119)](logger_enums_1[_0x572a62(0x137)][_0x572a62(0x12b)]),this['_request']=await salesforce_1['AxiosInstanceUtils'][_0x572a62(0x149)](new auth_manager_1[(_0x572a62(0x129))](_0x1bcc39),[],{'headers':{'Accept-Encoding':'gzip'}}),await this['initAutomationProcess'](),await this[_0x572a62(0x151)](),await this[_0x572a62(0x125)](),await this[_0x572a62(0x12c)](),this[_0x572a62(0x121)][_0x572a62(0x119)](logger_enums_1[_0x572a62(0x137)][_0x572a62(0x12a)]);}catch(_0x17ac2f){await this['enableAutomationProcess']()['catch'](_0x467292=>{const _0x4b3cef=_0x572a62;job_detail_1['systemLogger'][_0x4b3cef(0x11f)](_0x467292[_0x4b3cef(0x154)]);}),this[_0x572a62(0x11a)][_0x572a62(0x11b)](_0x17ac2f[_0x572a62(0x154)]),this[_0x572a62(0x121)][_0x572a62(0x119)](logger_enums_1[_0x572a62(0x137)][_0x572a62(0x128)]),this[_0x572a62(0x121)][_0x572a62(0x13d)](_0x17ac2f[_0x572a62(0x154)]),job_detail_1[_0x572a62(0x14f)][_0x572a62(0x11f)](_0x17ac2f[_0x572a62(0x154)]);}finally{this[_0x572a62(0x11a)][_0x572a62(0x147)](_0x572a62(0x142)),job_detail_1[_0x572a62(0x14f)][_0x572a62(0x147)](_0x572a62(0x142)),await this[_0x572a62(0x121)][_0x572a62(0x116)](),await this[_0x572a62(0x11a)][_0x572a62(0x116)]();}}}function a90_0x136c(){const _0x240f90=['IN_PROGRESS','enableAutomationProcess','readFile','disableAutomation','jobStorePath','ManagerAutomationProcess','jobId','LoggerDetails','MaskingJob','search','./enums/logger.enums','StepsCreator','JobStatus','apply','then','enable','exit','2580585DvWTTh','setJobError','219086NcuONt','getManagerAutomationProcessOptions','(((.+)+)+)+$','push','Finish\x20Masking\x20Process','AUTOMATION_PROCESS_METADATA_BACKUP_FILENAME','./classes/logger/logger-details','4098378nZnhoR','10nMsccb','log','__esModule','create','Disable\x20automation\x20process','../../../constants/job','317195PDdzjj','./classes/logger/logger-job-state','./classes/step/steps-creator','systemLogger','../constants','disableAutomationProcess','4BIMqZm','_steps','message','3569985kzpThg','join','fs/promises','toString','path','_maskingManifest','writeFile','getManifest','_isEnableAutomationProcessError','184AMVgtm','_managerAutomationProcess','./job-detail','parse','_request','default','kill','initAutomationProcess','Enable\x20automation\x20process','setJobStatus','_loggerDetails','exception','MANIFEST_FILENAME','constructor','init','error','keys','_loggerJobState','1891460bxpgXj','catch','details','masking','663525piBEgU','execute','FAILED','AuthManager','COMPLETED'];a90_0x136c=function(){return _0x240f90;};return a90_0x136c();}exports[a90_0x33c5c7(0x133)]=MaskingJob,new MaskingJob()[a90_0x33c5c7(0x127)]()[a90_0x33c5c7(0x139)](()=>process[a90_0x33c5c7(0x13b)](0x0))[a90_0x33c5c7(0x123)](()=>process[a90_0x33c5c7(0x13b)](0x1));