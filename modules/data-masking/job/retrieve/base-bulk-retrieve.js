const a92_0x4f605a=a92_0x69c7;(function(_0x1acd6d,_0x38822a){const _0x1b52fe=a92_0x69c7,_0x473672=_0x1acd6d();while(!![]){try{const _0x360e52=-parseInt(_0x1b52fe(0x141))/0x1*(parseInt(_0x1b52fe(0x17c))/0x2)+parseInt(_0x1b52fe(0x161))/0x3+parseInt(_0x1b52fe(0x15e))/0x4*(-parseInt(_0x1b52fe(0x189))/0x5)+-parseInt(_0x1b52fe(0x177))/0x6+parseInt(_0x1b52fe(0x169))/0x7+-parseInt(_0x1b52fe(0x145))/0x8+-parseInt(_0x1b52fe(0x151))/0x9*(-parseInt(_0x1b52fe(0x154))/0xa);if(_0x360e52===_0x38822a)break;else _0x473672['push'](_0x473672['shift']());}catch(_0x264975){_0x473672['push'](_0x473672['shift']());}}}(a92_0x1217,0xbc632));const a92_0xede7ff=(function(){let _0x543ada=!![];return function(_0x5543ee,_0x8e77dc){const _0x8adae4=_0x543ada?function(){const _0xa72ddb=a92_0x69c7;if(_0x8e77dc){const _0x42b3c7=_0x8e77dc[_0xa72ddb(0x182)](_0x5543ee,arguments);return _0x8e77dc=null,_0x42b3c7;}}:function(){};return _0x543ada=![],_0x8adae4;};}()),a92_0x52af4d=a92_0xede7ff(this,function(){const _0x2a6f71=a92_0x69c7;return a92_0x52af4d['toString']()[_0x2a6f71(0x16b)](_0x2a6f71(0x159))[_0x2a6f71(0x170)]()[_0x2a6f71(0x18d)](a92_0x52af4d)[_0x2a6f71(0x16b)](_0x2a6f71(0x159));});a92_0x52af4d();'use strict';var __importDefault=this&&this[a92_0x4f605a(0x163)]||function(_0x2b8dc2){const _0x28232d=a92_0x4f605a;return _0x2b8dc2&&_0x2b8dc2[_0x28232d(0x14c)]?_0x2b8dc2:{'default':_0x2b8dc2};};function a92_0x1217(){const _0x2ff9ef=['stream/promises','createReader','writeEncryptedTempFile','true','apply','SALESFORCE_API_VERSION','TEXT_CSV','data','readable','@flosum/salesforce','pause','5krfiWs','destroy','BaseBulkRetrieve','isPaused','constructor','readEncryptionVector','castCsvValue','parse','createDecryptPipe','default','currency','handleError','int','defineProperty','4919jrstQQ','resume','retrieve','datetime','2862040nyrKpG','BulkV1QueryContentType','baseRetrievePayload','once','csvParser','describe','double','__esModule','isExistsPath','jobStorePath','boolean','.000+0000','2817729OdVbxG','createReadStream','queryBuilder','50YVIdcH','createEncryptPipe','error','execute','path','(((.+)+)+)+$','randomUUID','systemLogger','BaseRetrieve','../../constants','1493972XlFXeL','CryptoUtils','get','610815GmnInH','crypto','__importDefault','catch','replace','@flosum/utils','end','createWriteStream','2555273SwIOZr','set','search','getIsDone','fields','_read','pipelineCallback','toString','_fieldsTypes','pipeline','POLL_INTERVAL','./base-retrieve','then','bind','1307826FDjmxl','stream','csv-parse','readEncryptedTempFile','push','168JNjYtn','reduce'];a92_0x1217=function(){return _0x2ff9ef;};return a92_0x1217();}function a92_0x69c7(_0x30941d,_0x4e7978){const _0x517484=a92_0x1217();return a92_0x69c7=function(_0x52af4d,_0xede7ff){_0x52af4d=_0x52af4d-0x13a;let _0x1217b2=_0x517484[_0x52af4d];return _0x1217b2;},a92_0x69c7(_0x30941d,_0x4e7978);}Object[a92_0x4f605a(0x140)](exports,a92_0x4f605a(0x14c),{'value':!![]}),exports[a92_0x4f605a(0x18b)]=void 0x0;const base_retrieve_1=require(a92_0x4f605a(0x174)),stream_1=require(a92_0x4f605a(0x178)),path_1=__importDefault(require(a92_0x4f605a(0x158))),utils_1=require(a92_0x4f605a(0x166)),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require(a92_0x4f605a(0x17e)),crypto_1=require(a92_0x4f605a(0x162)),csv_parse_1=require(a92_0x4f605a(0x179)),salesforce_1=require(a92_0x4f605a(0x187)),job_detail_1=require('../job-detail'),constants_1=require(a92_0x4f605a(0x15d));class BaseBulkRetrieve extends base_retrieve_1[a92_0x4f605a(0x15c)]{get[a92_0x4f605a(0x147)](){const _0x4deab8=a92_0x4f605a;return{'queryBuilder':this[_0x4deab8(0x153)],'instance':this['request'],'api':constants_1[_0x4deab8(0x183)],'contentType':salesforce_1[_0x4deab8(0x146)][_0x4deab8(0x184)]};}async['pull'](){const _0x5554d6=a92_0x4f605a;var _0x3cc724,_0x90e83d;if(this[_0x5554d6(0x143)][_0x5554d6(0x16c)]()&&!((_0x3cc724=this[_0x5554d6(0x149)])===null||_0x3cc724===void 0x0?void 0x0:_0x3cc724[_0x5554d6(0x18c)]())){this[_0x5554d6(0x17b)](null);return;}if((_0x90e83d=this[_0x5554d6(0x149)])===null||_0x90e83d===void 0x0?void 0x0:_0x90e83d[_0x5554d6(0x18c)]()){this[_0x5554d6(0x149)][_0x5554d6(0x142)]();return;}const _0x2b6804=await this[_0x5554d6(0x143)][_0x5554d6(0x157)]();if(!_0x2b6804)return this['pull']();await this[_0x5554d6(0x17f)](_0x2b6804);}async['createReader'](_0x49180a){const _0x397cbb=a92_0x4f605a,_0x83aefa=path_1[_0x397cbb(0x13c)]['join'](job_detail_1[_0x397cbb(0x14e)],(0x0,crypto_1[_0x397cbb(0x15a)])()),_0x5b3657=(0x0,crypto_1['randomUUID'])(),_0x2f354a=await this['writeEncryptedTempFile'](_0x49180a,_0x83aefa,_0x5b3657)[_0x397cbb(0x175)](()=>this[_0x397cbb(0x17a)](_0x83aefa,_0x5b3657)),_0xd175c9={'columns':!![],'cast':this[_0x397cbb(0x18f)][_0x397cbb(0x176)](this)};this['csvParser']=(0x0,stream_1[_0x397cbb(0x172)])(_0x2f354a,(0x0,csv_parse_1[_0x397cbb(0x13a)])(_0xd175c9),this['pipelineCallback']['bind'](this,_0x83aefa)),this[_0x397cbb(0x149)]['on'](_0x397cbb(0x185),_0x2656e5=>{const _0x59ffeb=_0x397cbb;this['csvParser'][_0x59ffeb(0x188)](),this[_0x59ffeb(0x17b)](_0x2656e5);}),this[_0x397cbb(0x149)]['on'](_0x397cbb(0x167),async()=>{const _0x5ec834=_0x397cbb;return await utils_1['FsUtils'][_0x5ec834(0x14d)](_0x83aefa)&&await(0x0,promises_1['rm'])(_0x83aefa)[_0x5ec834(0x164)](this['handleError'][_0x5ec834(0x176)](this,null)),this[_0x5ec834(0x16e)]();}),this[_0x397cbb(0x149)]['on'](_0x397cbb(0x156),this['pipelineCallback']['bind'](this,_0x83aefa));}async[a92_0x4f605a(0x180)](_0x36859a,_0xf29b59,_0x4e92f4){const _0x515353=a92_0x4f605a,_0x498a44=fs_1[_0x515353(0x13c)][_0x515353(0x168)](_0xf29b59);await(0x0,promises_2['pipeline'])(_0x36859a,utils_1[_0x515353(0x15f)][_0x515353(0x155)](_0x4e92f4),_0x498a44);}async[a92_0x4f605a(0x17a)](_0x3e6bd8,_0x98e032){const _0x4e15ba=a92_0x4f605a,_0x1d2f52=fs_1[_0x4e15ba(0x13c)][_0x4e15ba(0x152)](_0x3e6bd8),_0x2648ef=await this[_0x4e15ba(0x18e)](_0x1d2f52),_0x4efbec=utils_1[_0x4e15ba(0x15f)][_0x4e15ba(0x13b)](_0x98e032,_0x2648ef);return(0x0,stream_1[_0x4e15ba(0x172)])(_0x1d2f52,_0x4efbec,this[_0x4e15ba(0x16f)][_0x4e15ba(0x176)](this,_0x3e6bd8));}async['pipelineCallback'](_0x1447b2,_0x5d92c0){const _0x5000f7=a92_0x4f605a;_0x5d92c0&&await this[_0x5000f7(0x13e)](_0x1447b2,_0x5d92c0);}async[a92_0x4f605a(0x13e)](_0x48e250,_0x3e32c9){const _0x1c4028=a92_0x4f605a;_0x48e250&&await utils_1['FsUtils'][_0x1c4028(0x14d)](_0x48e250)&&await(0x0,promises_1['rm'])(_0x48e250)[_0x1c4028(0x164)](_0x26db54=>job_detail_1[_0x1c4028(0x15b)][_0x1c4028(0x156)](_0x26db54)),this[_0x1c4028(0x18a)](_0x3e32c9);}async[a92_0x4f605a(0x18e)](_0x24da5b){return new Promise((_0x29e480,_0x18a08f)=>{const _0x18d517=a92_0x69c7;_0x24da5b[_0x18d517(0x148)]('error',_0x18a08f),_0x24da5b[_0x18d517(0x148)](_0x18d517(0x186),()=>{const _0x2b5d11=_0x24da5b['read'](0x10);_0x29e480(_0x2b5d11);});});}[a92_0x4f605a(0x18f)](_0xb9293c,{header:_0x27c49a,column:_0x44db67}){const _0x6661a7=a92_0x4f605a;!this['_fieldsTypes']&&(this[_0x6661a7(0x171)]=this[_0x6661a7(0x14a)][_0x6661a7(0x16d)][_0x6661a7(0x17d)]((_0x47930f,{name:_0x3d4b88,type:_0x2c5562})=>_0x47930f[_0x6661a7(0x16a)](_0x3d4b88,_0x2c5562),new Map()));if(_0x27c49a)return _0xb9293c;if(!_0xb9293c)return null;switch(this['_fieldsTypes'][_0x6661a7(0x160)](_0x44db67)){case _0x6661a7(0x144):return _0xb9293c[_0x6661a7(0x165)](/\.\d{3}Z$/,_0x6661a7(0x150));case _0x6661a7(0x14f):return _0xb9293c===_0x6661a7(0x181);case _0x6661a7(0x13d):case _0x6661a7(0x14b):case _0x6661a7(0x13f):case'percent':return+_0xb9293c;default:return _0xb9293c;}}}exports[a92_0x4f605a(0x18b)]=BaseBulkRetrieve,BaseBulkRetrieve[a92_0x4f605a(0x173)]=0x1388;