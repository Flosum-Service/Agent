const a75_0x29a802=a75_0x10cb;(function(_0x302ef9,_0x1f079c){const _0x4ae3af=a75_0x10cb,_0x3a88f8=_0x302ef9();while(!![]){try{const _0x54fa1f=parseInt(_0x4ae3af(0x139))/0x1+parseInt(_0x4ae3af(0x105))/0x2*(-parseInt(_0x4ae3af(0x114))/0x3)+-parseInt(_0x4ae3af(0xf9))/0x4+-parseInt(_0x4ae3af(0x143))/0x5+-parseInt(_0x4ae3af(0x133))/0x6*(parseInt(_0x4ae3af(0x112))/0x7)+-parseInt(_0x4ae3af(0x10e))/0x8*(parseInt(_0x4ae3af(0x127))/0x9)+parseInt(_0x4ae3af(0x104))/0xa;if(_0x54fa1f===_0x1f079c)break;else _0x3a88f8['push'](_0x3a88f8['shift']());}catch(_0x31bb63){_0x3a88f8['push'](_0x3a88f8['shift']());}}}(a75_0x1086,0x387b4));const a75_0x1fdad8=(function(){let _0x4c5969=!![];return function(_0x342a7d,_0x586274){const _0x4933eb=_0x4c5969?function(){if(_0x586274){const _0x497e11=_0x586274['apply'](_0x342a7d,arguments);return _0x586274=null,_0x497e11;}}:function(){};return _0x4c5969=![],_0x4933eb;};}()),a75_0x22874c=a75_0x1fdad8(this,function(){const _0x51b011=a75_0x10cb;return a75_0x22874c[_0x51b011(0x12d)]()[_0x51b011(0x146)](_0x51b011(0x144))['toString']()[_0x51b011(0x130)](a75_0x22874c)[_0x51b011(0x146)](_0x51b011(0x144));});a75_0x22874c();'use strict';function a75_0x1086(){const _0x561f17=['BulkV1QueryContentType','readEncryptionVector','csv-parse','getIsDone','bind','catch','589977kAIRPC','stream/promises','parse','jobStorePath','crypto','once','toString','true','@flosum/salesforce','constructor','fs/promises','pull','932310kMrnNn','double','describe','default','stream','createReader','241205HxGaAb','resume','systemLogger','replace','path','BaseBulkRetrieve','_fieldsTypes','pause','CryptoUtils','isExistsPath','624410UOQmZF','(((.+)+)+)+$','end','search','./base-retrieve','randomUUID','isPaused','../job-detail','join','1072104BstcFA','__esModule','currency','createWriteStream','__importDefault','boolean','FsUtils','push','.000+0000','pipelineCallback','handleError','8590580vRctNw','31586jdHmYp','read','request','error','csvParser','set','destroy','@flosum/utils','then','16QlrwPD','TEXT_CSV','_read','int','7bBvNmL','createDecryptPipe','36Rcnztw','createReadStream','readEncryptedTempFile','readable','castCsvValue','reduce','writeEncryptedTempFile','datetime','queryBuilder','percent','pipeline','get','retrieve'];a75_0x1086=function(){return _0x561f17;};return a75_0x1086();}var __importDefault=this&&this[a75_0x29a802(0xfd)]||function(_0x57b47a){const _0x5bdeec=a75_0x29a802;return _0x57b47a&&_0x57b47a[_0x5bdeec(0xfa)]?_0x57b47a:{'default':_0x57b47a};};Object['defineProperty'](exports,a75_0x29a802(0xfa),{'value':!![]}),exports[a75_0x29a802(0x13e)]=void 0x0;const base_retrieve_1=require(a75_0x29a802(0x147)),stream_1=require(a75_0x29a802(0x137)),path_1=__importDefault(require(a75_0x29a802(0x13d))),utils_1=require(a75_0x29a802(0x10c)),promises_1=require(a75_0x29a802(0x131)),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x29a802(0x128)),crypto_1=require(a75_0x29a802(0x12b)),csv_parse_1=require(a75_0x29a802(0x123)),salesforce_1=require(a75_0x29a802(0x12f)),job_detail_1=require(a75_0x29a802(0xf7)),constants_1=require('../../constants');function a75_0x10cb(_0x3af643,_0x175300){const _0x146503=a75_0x1086();return a75_0x10cb=function(_0x22874c,_0x1fdad8){_0x22874c=_0x22874c-0xf5;let _0x108682=_0x146503[_0x22874c];return _0x108682;},a75_0x10cb(_0x3af643,_0x175300);}class BaseBulkRetrieve extends base_retrieve_1['BaseRetrieve']{get['baseRetrievePayload'](){const _0x2234e9=a75_0x29a802;return{'queryBuilder':this[_0x2234e9(0x11c)],'instance':this[_0x2234e9(0x107)],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1[_0x2234e9(0x121)][_0x2234e9(0x10f)]};}async['pull'](){const _0x50c6e7=a75_0x29a802;var _0xe8912a,_0x4c9b90;if(this[_0x50c6e7(0x120)][_0x50c6e7(0x124)]()&&!((_0xe8912a=this['csvParser'])===null||_0xe8912a===void 0x0?void 0x0:_0xe8912a[_0x50c6e7(0xf6)]())){this[_0x50c6e7(0x100)](null);return;}if((_0x4c9b90=this[_0x50c6e7(0x109)])===null||_0x4c9b90===void 0x0?void 0x0:_0x4c9b90[_0x50c6e7(0xf6)]()){this[_0x50c6e7(0x109)][_0x50c6e7(0x13a)]();return;}const _0x21ccf3=await this[_0x50c6e7(0x120)]['execute']();if(!_0x21ccf3)return this[_0x50c6e7(0x132)]();await this[_0x50c6e7(0x138)](_0x21ccf3);}async[a75_0x29a802(0x138)](_0x225f29){const _0x1aea76=a75_0x29a802,_0x39fe3f=path_1['default'][_0x1aea76(0xf8)](job_detail_1[_0x1aea76(0x12a)],(0x0,crypto_1[_0x1aea76(0xf5)])()),_0x52cf30=(0x0,crypto_1['randomUUID'])(),_0x4ac62c=await this[_0x1aea76(0x11a)](_0x225f29,_0x39fe3f,_0x52cf30)[_0x1aea76(0x10d)](()=>this['readEncryptedTempFile'](_0x39fe3f,_0x52cf30)),_0x3ee1a5={'columns':!![],'cast':this[_0x1aea76(0x118)]['bind'](this)};this['csvParser']=(0x0,stream_1[_0x1aea76(0x11e)])(_0x4ac62c,(0x0,csv_parse_1[_0x1aea76(0x129)])(_0x3ee1a5),this[_0x1aea76(0x102)][_0x1aea76(0x125)](this,_0x39fe3f)),this[_0x1aea76(0x109)]['on']('data',_0x4ac520=>{const _0x2685e7=_0x1aea76;this[_0x2685e7(0x109)][_0x2685e7(0x140)](),this['push'](_0x4ac520);}),this[_0x1aea76(0x109)]['on'](_0x1aea76(0x145),async()=>{const _0x47b95b=_0x1aea76;return await utils_1['FsUtils'][_0x47b95b(0x142)](_0x39fe3f)&&await(0x0,promises_1['rm'])(_0x39fe3f)['catch'](this['handleError']['bind'](this,null)),this[_0x47b95b(0x110)]();}),this[_0x1aea76(0x109)]['on'](_0x1aea76(0x108),this[_0x1aea76(0x102)][_0x1aea76(0x125)](this,_0x39fe3f));}async[a75_0x29a802(0x11a)](_0xc13eb6,_0x21b52b,_0x3c57db){const _0x3bb52d=a75_0x29a802,_0x9cae19=fs_1[_0x3bb52d(0x136)][_0x3bb52d(0xfc)](_0x21b52b);await(0x0,promises_2[_0x3bb52d(0x11e)])(_0xc13eb6,utils_1[_0x3bb52d(0x141)]['createEncryptPipe'](_0x3c57db),_0x9cae19);}async[a75_0x29a802(0x116)](_0x341573,_0x335723){const _0x525b2b=a75_0x29a802,_0x1d9ab9=fs_1[_0x525b2b(0x136)][_0x525b2b(0x115)](_0x341573),_0xccc19a=await this[_0x525b2b(0x122)](_0x1d9ab9),_0x43836f=utils_1[_0x525b2b(0x141)][_0x525b2b(0x113)](_0x335723,_0xccc19a);return(0x0,stream_1[_0x525b2b(0x11e)])(_0x1d9ab9,_0x43836f,this[_0x525b2b(0x102)][_0x525b2b(0x125)](this,_0x341573));}async[a75_0x29a802(0x102)](_0x3222fd,_0x7bb7c4){const _0x101a2a=a75_0x29a802;_0x7bb7c4&&await this[_0x101a2a(0x103)](_0x3222fd,_0x7bb7c4);}async[a75_0x29a802(0x103)](_0x375a5c,_0x4de1d2){const _0x1e4208=a75_0x29a802;_0x375a5c&&await utils_1[_0x1e4208(0xff)][_0x1e4208(0x142)](_0x375a5c)&&await(0x0,promises_1['rm'])(_0x375a5c)[_0x1e4208(0x126)](_0xa97119=>job_detail_1[_0x1e4208(0x13b)][_0x1e4208(0x108)](_0xa97119)),this[_0x1e4208(0x10b)](_0x4de1d2);}async[a75_0x29a802(0x122)](_0x4c109e){return new Promise((_0x44354e,_0x41719c)=>{const _0x2a612a=a75_0x10cb;_0x4c109e[_0x2a612a(0x12c)]('error',_0x41719c),_0x4c109e[_0x2a612a(0x12c)](_0x2a612a(0x117),()=>{const _0x370a20=_0x2a612a,_0x1bcc96=_0x4c109e[_0x370a20(0x106)](0x10);_0x44354e(_0x1bcc96);});});}[a75_0x29a802(0x118)](_0x1ee931,{header:_0x3a92a5,column:_0x534a70}){const _0xa615d3=a75_0x29a802;!this['_fieldsTypes']&&(this['_fieldsTypes']=this[_0xa615d3(0x135)]['fields'][_0xa615d3(0x119)]((_0x526365,{name:_0x5213e4,type:_0x1679f7})=>_0x526365[_0xa615d3(0x10a)](_0x5213e4,_0x1679f7),new Map()));if(_0x3a92a5)return _0x1ee931;if(!_0x1ee931)return null;switch(this[_0xa615d3(0x13f)][_0xa615d3(0x11f)](_0x534a70)){case _0xa615d3(0x11b):return _0x1ee931[_0xa615d3(0x13c)](/\.\d{3}Z$/,_0xa615d3(0x101));case _0xa615d3(0xfe):return _0x1ee931===_0xa615d3(0x12e);case _0xa615d3(0xfb):case _0xa615d3(0x134):case _0xa615d3(0x111):case _0xa615d3(0x11d):return+_0x1ee931;default:return _0x1ee931;}}}exports[a75_0x29a802(0x13e)]=BaseBulkRetrieve,BaseBulkRetrieve['POLL_INTERVAL']=0x1388;