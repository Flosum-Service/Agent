const a75_0x3fef27=a75_0x4224;function a75_0x32ed(){const _0x4292e3=['castCsvValue','1331943dxgQGo','writeEncryptedTempFile','13025016XJhoOq','pipelineCallback','isExistsPath','pipeline','defineProperty','CryptoUtils','queryBuilder','get','BulkV1QueryContentType','catch','readEncryptionVector','retrieve','once','../job-detail','currency','apply','replace','error','end','true','createReader','createReadStream','fs/promises','bind','TEXT_CSV','search','execute','baseRetrievePayload','pull','BaseBulkRetrieve','randomUUID','_fieldsTypes','createWriteStream','34498xmVdQN','BaseRetrieve','@flosum/salesforce','@flosum/utils','set','data','push','fields','(((.+)+)+)+$','crypto','reduce','SALESFORCE_API_VERSION','__esModule','join','stream','parse','describe','90981zOBVaM','csvParser','getIsDone','pause','118327JhdIlw','createEncryptPipe','jobStorePath','../../constants','16266PWVcjV','1260YyNaDM','systemLogger','15IbtHMi','read','1590RzrWCS','2260300bzejXd','./base-retrieve','FsUtils','6468zXGKwh','double','handleError','then','readEncryptedTempFile','boolean','datetime','readable','constructor','default','1wSXkeB','int'];a75_0x32ed=function(){return _0x4292e3;};return a75_0x32ed();}(function(_0x5b568a,_0x2cc282){const _0xa1a5cd=a75_0x4224,_0x19fd64=_0x5b568a();while(!![]){try{const _0x3c2ac6=-parseInt(_0xa1a5cd(0x166))/0x1*(-parseInt(_0xa1a5cd(0x13a))/0x2)+-parseInt(_0xa1a5cd(0x169))/0x3+-parseInt(_0xa1a5cd(0x159))/0x4*(parseInt(_0xa1a5cd(0x156))/0x5)+-parseInt(_0xa1a5cd(0x153))/0x6*(-parseInt(_0xa1a5cd(0x154))/0x7)+-parseInt(_0xa1a5cd(0x16b))/0x8+-parseInt(_0xa1a5cd(0x14b))/0x9*(parseInt(_0xa1a5cd(0x158))/0xa)+parseInt(_0xa1a5cd(0x14f))/0xb*(parseInt(_0xa1a5cd(0x15c))/0xc);if(_0x3c2ac6===_0x2cc282)break;else _0x19fd64['push'](_0x19fd64['shift']());}catch(_0x5bf2d4){_0x19fd64['push'](_0x19fd64['shift']());}}}(a75_0x32ed,0xe2b4c));const a75_0x1921da=(function(){let _0x347c3c=!![];return function(_0x23bc06,_0x6222ca){const _0xf0d234=_0x347c3c?function(){const _0x4741d8=a75_0x4224;if(_0x6222ca){const _0x517b7b=_0x6222ca[_0x4741d8(0x17a)](_0x23bc06,arguments);return _0x6222ca=null,_0x517b7b;}}:function(){};return _0x347c3c=![],_0xf0d234;};}()),a75_0x4a5e7a=a75_0x1921da(this,function(){const _0x40964c=a75_0x4224;return a75_0x4a5e7a['toString']()[_0x40964c(0x184)](_0x40964c(0x142))['toString']()[_0x40964c(0x164)](a75_0x4a5e7a)[_0x40964c(0x184)](_0x40964c(0x142));});a75_0x4a5e7a();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x14b2d5){const _0x1e30dc=a75_0x4224;return _0x14b2d5&&_0x14b2d5[_0x1e30dc(0x146)]?_0x14b2d5:{'default':_0x14b2d5};};function a75_0x4224(_0x529a25,_0x11769c){const _0x4f1cd5=a75_0x32ed();return a75_0x4224=function(_0x4a5e7a,_0x1921da){_0x4a5e7a=_0x4a5e7a-0x136;let _0x32ed83=_0x4f1cd5[_0x4a5e7a];return _0x32ed83;},a75_0x4224(_0x529a25,_0x11769c);}Object[a75_0x3fef27(0x16f)](exports,a75_0x3fef27(0x146),{'value':!![]}),exports[a75_0x3fef27(0x136)]=void 0x0;const base_retrieve_1=require(a75_0x3fef27(0x15a)),stream_1=require(a75_0x3fef27(0x148)),path_1=__importDefault(require('path')),utils_1=require(a75_0x3fef27(0x13d)),promises_1=require(a75_0x3fef27(0x181)),fs_1=__importDefault(require('fs')),promises_2=require('stream/promises'),crypto_1=require(a75_0x3fef27(0x143)),csv_parse_1=require('csv-parse'),salesforce_1=require(a75_0x3fef27(0x13c)),job_detail_1=require(a75_0x3fef27(0x178)),constants_1=require(a75_0x3fef27(0x152));class BaseBulkRetrieve extends base_retrieve_1[a75_0x3fef27(0x13b)]{get[a75_0x3fef27(0x186)](){const _0x306de0=a75_0x3fef27;return{'queryBuilder':this[_0x306de0(0x171)],'instance':this['request'],'api':constants_1[_0x306de0(0x145)],'contentType':salesforce_1[_0x306de0(0x173)][_0x306de0(0x183)]};}async[a75_0x3fef27(0x187)](){const _0x8e5c0d=a75_0x3fef27;var _0x50f172,_0x4e1736;if(this[_0x8e5c0d(0x176)][_0x8e5c0d(0x14d)]()&&!((_0x50f172=this[_0x8e5c0d(0x14c)])===null||_0x50f172===void 0x0?void 0x0:_0x50f172['isPaused']())){this[_0x8e5c0d(0x140)](null);return;}if((_0x4e1736=this[_0x8e5c0d(0x14c)])===null||_0x4e1736===void 0x0?void 0x0:_0x4e1736['isPaused']()){this[_0x8e5c0d(0x14c)]['resume']();return;}const _0x29dc7e=await this[_0x8e5c0d(0x176)][_0x8e5c0d(0x185)]();if(!_0x29dc7e)return this['pull']();await this[_0x8e5c0d(0x17f)](_0x29dc7e);}async['createReader'](_0x5e4d45){const _0x22b7ae=a75_0x3fef27,_0x285028=path_1['default'][_0x22b7ae(0x147)](job_detail_1[_0x22b7ae(0x151)],(0x0,crypto_1[_0x22b7ae(0x137)])()),_0x3c69fd=(0x0,crypto_1[_0x22b7ae(0x137)])(),_0x5c8071=await this[_0x22b7ae(0x16a)](_0x5e4d45,_0x285028,_0x3c69fd)[_0x22b7ae(0x15f)](()=>this['readEncryptedTempFile'](_0x285028,_0x3c69fd)),_0x38333d={'columns':!![],'cast':this[_0x22b7ae(0x168)][_0x22b7ae(0x182)](this)};this[_0x22b7ae(0x14c)]=(0x0,stream_1[_0x22b7ae(0x16e)])(_0x5c8071,(0x0,csv_parse_1[_0x22b7ae(0x149)])(_0x38333d),this[_0x22b7ae(0x16c)]['bind'](this,_0x285028)),this['csvParser']['on'](_0x22b7ae(0x13f),_0x2931ae=>{const _0x2888fb=_0x22b7ae;this[_0x2888fb(0x14c)][_0x2888fb(0x14e)](),this['push'](_0x2931ae);}),this[_0x22b7ae(0x14c)]['on'](_0x22b7ae(0x17d),async()=>{const _0x3e8ce8=_0x22b7ae;return await utils_1[_0x3e8ce8(0x15b)][_0x3e8ce8(0x16d)](_0x285028)&&await(0x0,promises_1['rm'])(_0x285028)[_0x3e8ce8(0x174)](this[_0x3e8ce8(0x15e)][_0x3e8ce8(0x182)](this,null)),this['_read']();}),this[_0x22b7ae(0x14c)]['on'](_0x22b7ae(0x17c),this[_0x22b7ae(0x16c)]['bind'](this,_0x285028));}async[a75_0x3fef27(0x16a)](_0x120f3a,_0x49098c,_0x1da0a5){const _0xbf071c=a75_0x3fef27,_0x1528cf=fs_1['default'][_0xbf071c(0x139)](_0x49098c);await(0x0,promises_2[_0xbf071c(0x16e)])(_0x120f3a,utils_1[_0xbf071c(0x170)][_0xbf071c(0x150)](_0x1da0a5),_0x1528cf);}async[a75_0x3fef27(0x160)](_0x4d0503,_0x296dbe){const _0x3a6e06=a75_0x3fef27,_0x4e775b=fs_1[_0x3a6e06(0x165)][_0x3a6e06(0x180)](_0x4d0503),_0x33cbba=await this[_0x3a6e06(0x175)](_0x4e775b),_0x126580=utils_1['CryptoUtils']['createDecryptPipe'](_0x296dbe,_0x33cbba);return(0x0,stream_1[_0x3a6e06(0x16e)])(_0x4e775b,_0x126580,this['pipelineCallback'][_0x3a6e06(0x182)](this,_0x4d0503));}async[a75_0x3fef27(0x16c)](_0x4d1443,_0x2a83a9){_0x2a83a9&&await this['handleError'](_0x4d1443,_0x2a83a9);}async['handleError'](_0x5d6822,_0x5a3102){const _0x362b7f=a75_0x3fef27;_0x5d6822&&await utils_1[_0x362b7f(0x15b)][_0x362b7f(0x16d)](_0x5d6822)&&await(0x0,promises_1['rm'])(_0x5d6822)[_0x362b7f(0x174)](_0x1a1967=>job_detail_1[_0x362b7f(0x155)][_0x362b7f(0x17c)](_0x1a1967)),this['destroy'](_0x5a3102);}async[a75_0x3fef27(0x175)](_0x246baa){return new Promise((_0x5476cd,_0x437ccf)=>{const _0x47f51c=a75_0x4224;_0x246baa[_0x47f51c(0x177)]('error',_0x437ccf),_0x246baa[_0x47f51c(0x177)](_0x47f51c(0x163),()=>{const _0x2772e9=_0x47f51c,_0x2de52e=_0x246baa[_0x2772e9(0x157)](0x10);_0x5476cd(_0x2de52e);});});}[a75_0x3fef27(0x168)](_0x5c0215,{header:_0x380d38,column:_0x55fbc1}){const _0x41c65b=a75_0x3fef27;!this[_0x41c65b(0x138)]&&(this[_0x41c65b(0x138)]=this[_0x41c65b(0x14a)][_0x41c65b(0x141)][_0x41c65b(0x144)]((_0x1e4f07,{name:_0x56e2ea,type:_0x4802a4})=>_0x1e4f07[_0x41c65b(0x13e)](_0x56e2ea,_0x4802a4),new Map()));if(_0x380d38)return _0x5c0215;if(!_0x5c0215)return null;switch(this[_0x41c65b(0x138)][_0x41c65b(0x172)](_0x55fbc1)){case _0x41c65b(0x162):return _0x5c0215[_0x41c65b(0x17b)](/\.\d{3}Z$/,'.000+0000');case _0x41c65b(0x161):return _0x5c0215===_0x41c65b(0x17e);case _0x41c65b(0x179):case _0x41c65b(0x15d):case _0x41c65b(0x167):case'percent':return+_0x5c0215;default:return _0x5c0215;}}}exports[a75_0x3fef27(0x136)]=BaseBulkRetrieve,BaseBulkRetrieve['POLL_INTERVAL']=0x1388;