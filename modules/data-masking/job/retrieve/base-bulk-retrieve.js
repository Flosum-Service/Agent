const a92_0x1a2d8a=a92_0x44f8;function a92_0x38c0(){const _0x5e2eb9=['createReader','retrieve','readable','pipeline','@flosum/salesforce','__importDefault','once','.000+0000','data','18070OwwKlP','describe','end','randomUUID','BulkV1QueryContentType','(((.+)+)+)+$','read','boolean','SALESFORCE_API_VERSION','../job-detail','handleError','apply','default','createReadStream','writeEncryptedTempFile','BaseBulkRetrieve','BaseRetrieve','double','1774800CfkWvT','execute','770ZmDsOu','stream/promises','search','error','../../constants','pause','5582871gzDlCC','resume','readEncryptedTempFile','./base-retrieve','363guPDVu','queryBuilder','FsUtils','61695UdHzmh','push','castCsvValue','pull','422931AAADuP','pipelineCallback','createWriteStream','percent','destroy','getIsDone','POLL_INTERVAL','@flosum/utils','CryptoUtils','65BKDiPT','bind','datetime','constructor','_fieldsTypes','get','4DZiYXa','csvParser','then','isExistsPath','1667MNqCpp','defineProperty','TEXT_CSV','join','parse','replace','toString','jobStorePath','true','reduce','__esModule','220452ntLlmL','systemLogger','readEncryptionVector','fields','catch','int','set','currency','stream'];a92_0x38c0=function(){return _0x5e2eb9;};return a92_0x38c0();}(function(_0xcf6d97,_0x1033c9){const _0x1a4db8=a92_0x44f8,_0x2245db=_0xcf6d97();while(!![]){try{const _0x26ab51=-parseInt(_0x1a4db8(0x1ba))/0x1*(parseInt(_0x1a4db8(0x196))/0x2)+-parseInt(_0x1a4db8(0x1a7))/0x3*(parseInt(_0x1a4db8(0x1b6))/0x4)+-parseInt(_0x1a4db8(0x1b0))/0x5*(-parseInt(_0x1a4db8(0x1c5))/0x6)+parseInt(_0x1a4db8(0x19c))/0x7+parseInt(_0x1a4db8(0x194))/0x8+parseInt(_0x1a4db8(0x1a3))/0x9+parseInt(_0x1a4db8(0x1d7))/0xa*(-parseInt(_0x1a4db8(0x1a0))/0xb);if(_0x26ab51===_0x1033c9)break;else _0x2245db['push'](_0x2245db['shift']());}catch(_0x3a7b07){_0x2245db['push'](_0x2245db['shift']());}}}(a92_0x38c0,0xa17fd));const a92_0x3ca72b=(function(){let _0x24a846=!![];return function(_0x1b8696,_0x33f8ff){const _0x3c6a2a=_0x24a846?function(){const _0x38e1db=a92_0x44f8;if(_0x33f8ff){const _0x50ac82=_0x33f8ff[_0x38e1db(0x18d)](_0x1b8696,arguments);return _0x33f8ff=null,_0x50ac82;}}:function(){};return _0x24a846=![],_0x3c6a2a;};}()),a92_0x5255b3=a92_0x3ca72b(this,function(){const _0x534884=a92_0x44f8;return a92_0x5255b3['toString']()[_0x534884(0x198)]('(((.+)+)+)+$')[_0x534884(0x1c0)]()[_0x534884(0x1b3)](a92_0x5255b3)[_0x534884(0x198)](_0x534884(0x187));});a92_0x5255b3();'use strict';var __importDefault=this&&this[a92_0x1a2d8a(0x1d3)]||function(_0x484d80){const _0x37142a=a92_0x1a2d8a;return _0x484d80&&_0x484d80[_0x37142a(0x1c4)]?_0x484d80:{'default':_0x484d80};};Object[a92_0x1a2d8a(0x1bb)](exports,a92_0x1a2d8a(0x1c4),{'value':!![]}),exports[a92_0x1a2d8a(0x191)]=void 0x0;const base_retrieve_1=require(a92_0x1a2d8a(0x19f)),stream_1=require(a92_0x1a2d8a(0x1cd)),path_1=__importDefault(require('path')),utils_1=require(a92_0x1a2d8a(0x1ae)),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require(a92_0x1a2d8a(0x197)),crypto_1=require('crypto'),csv_parse_1=require('csv-parse'),salesforce_1=require(a92_0x1a2d8a(0x1d2)),job_detail_1=require(a92_0x1a2d8a(0x18b)),constants_1=require(a92_0x1a2d8a(0x19a));function a92_0x44f8(_0x55e9b9,_0x5491b2){const _0x394e68=a92_0x38c0();return a92_0x44f8=function(_0x5255b3,_0x3ca72b){_0x5255b3=_0x5255b3-0x187;let _0x38c07b=_0x394e68[_0x5255b3];return _0x38c07b;},a92_0x44f8(_0x55e9b9,_0x5491b2);}class BaseBulkRetrieve extends base_retrieve_1[a92_0x1a2d8a(0x192)]{get['baseRetrievePayload'](){const _0x3c4c03=a92_0x1a2d8a;return{'queryBuilder':this[_0x3c4c03(0x1a1)],'instance':this['request'],'api':constants_1[_0x3c4c03(0x18a)],'contentType':salesforce_1[_0x3c4c03(0x1db)][_0x3c4c03(0x1bc)]};}async['pull'](){const _0x3a1a91=a92_0x1a2d8a;var _0x14de37,_0x1b22d6;if(this[_0x3a1a91(0x1cf)][_0x3a1a91(0x1ac)]()&&!((_0x14de37=this[_0x3a1a91(0x1b7)])===null||_0x14de37===void 0x0?void 0x0:_0x14de37['isPaused']())){this[_0x3a1a91(0x1a4)](null);return;}if((_0x1b22d6=this[_0x3a1a91(0x1b7)])===null||_0x1b22d6===void 0x0?void 0x0:_0x1b22d6['isPaused']()){this[_0x3a1a91(0x1b7)][_0x3a1a91(0x19d)]();return;}const _0x5ec355=await this[_0x3a1a91(0x1cf)][_0x3a1a91(0x195)]();if(!_0x5ec355)return this[_0x3a1a91(0x1a6)]();await this[_0x3a1a91(0x1ce)](_0x5ec355);}async[a92_0x1a2d8a(0x1ce)](_0x1d7827){const _0x3a02ec=a92_0x1a2d8a,_0x3ea185=path_1['default'][_0x3a02ec(0x1bd)](job_detail_1[_0x3a02ec(0x1c1)],(0x0,crypto_1[_0x3a02ec(0x1da)])()),_0x1334ff=(0x0,crypto_1['randomUUID'])(),_0x274d01=await this[_0x3a02ec(0x190)](_0x1d7827,_0x3ea185,_0x1334ff)[_0x3a02ec(0x1b8)](()=>this[_0x3a02ec(0x19e)](_0x3ea185,_0x1334ff)),_0x25960f={'columns':!![],'cast':this[_0x3a02ec(0x1a5)]['bind'](this)};this['csvParser']=(0x0,stream_1[_0x3a02ec(0x1d1)])(_0x274d01,(0x0,csv_parse_1[_0x3a02ec(0x1be)])(_0x25960f),this[_0x3a02ec(0x1a8)]['bind'](this,_0x3ea185)),this[_0x3a02ec(0x1b7)]['on'](_0x3a02ec(0x1d6),_0xe1a7c1=>{const _0x359e08=_0x3a02ec;this[_0x359e08(0x1b7)][_0x359e08(0x19b)](),this['push'](_0xe1a7c1);}),this[_0x3a02ec(0x1b7)]['on'](_0x3a02ec(0x1d9),async()=>{const _0x102a00=_0x3a02ec;return await utils_1[_0x102a00(0x1a2)][_0x102a00(0x1b9)](_0x3ea185)&&await(0x0,promises_1['rm'])(_0x3ea185)[_0x102a00(0x1c9)](this[_0x102a00(0x18c)][_0x102a00(0x1b1)](this,null)),this['_read']();}),this[_0x3a02ec(0x1b7)]['on']('error',this[_0x3a02ec(0x1a8)][_0x3a02ec(0x1b1)](this,_0x3ea185));}async[a92_0x1a2d8a(0x190)](_0x54f3a6,_0x58cf1e,_0x5f3389){const _0x424dc4=a92_0x1a2d8a,_0x236ba5=fs_1['default'][_0x424dc4(0x1a9)](_0x58cf1e);await(0x0,promises_2[_0x424dc4(0x1d1)])(_0x54f3a6,utils_1[_0x424dc4(0x1af)]['createEncryptPipe'](_0x5f3389),_0x236ba5);}async[a92_0x1a2d8a(0x19e)](_0x240384,_0x3fb2a6){const _0x507799=a92_0x1a2d8a,_0x3c9fb7=fs_1[_0x507799(0x18e)][_0x507799(0x18f)](_0x240384),_0xeb81d0=await this[_0x507799(0x1c7)](_0x3c9fb7),_0x20809c=utils_1[_0x507799(0x1af)]['createDecryptPipe'](_0x3fb2a6,_0xeb81d0);return(0x0,stream_1[_0x507799(0x1d1)])(_0x3c9fb7,_0x20809c,this[_0x507799(0x1a8)][_0x507799(0x1b1)](this,_0x240384));}async[a92_0x1a2d8a(0x1a8)](_0x339fe3,_0x444dcc){const _0xaa9655=a92_0x1a2d8a;_0x444dcc&&await this[_0xaa9655(0x18c)](_0x339fe3,_0x444dcc);}async[a92_0x1a2d8a(0x18c)](_0x3f3dbe,_0x25fbfd){const _0x3a06a9=a92_0x1a2d8a;_0x3f3dbe&&await utils_1[_0x3a06a9(0x1a2)][_0x3a06a9(0x1b9)](_0x3f3dbe)&&await(0x0,promises_1['rm'])(_0x3f3dbe)['catch'](_0x3b7d5e=>job_detail_1[_0x3a06a9(0x1c6)][_0x3a06a9(0x199)](_0x3b7d5e)),this[_0x3a06a9(0x1ab)](_0x25fbfd);}async[a92_0x1a2d8a(0x1c7)](_0x3246fa){return new Promise((_0x13dbdc,_0x369c1a)=>{const _0xeff423=a92_0x44f8;_0x3246fa[_0xeff423(0x1d4)](_0xeff423(0x199),_0x369c1a),_0x3246fa[_0xeff423(0x1d4)](_0xeff423(0x1d0),()=>{const _0x20d540=_0xeff423,_0xa99ae4=_0x3246fa[_0x20d540(0x188)](0x10);_0x13dbdc(_0xa99ae4);});});}[a92_0x1a2d8a(0x1a5)](_0x8be6d7,{header:_0x3836ca,column:_0x36d7dc}){const _0x302696=a92_0x1a2d8a;!this[_0x302696(0x1b4)]&&(this[_0x302696(0x1b4)]=this[_0x302696(0x1d8)][_0x302696(0x1c8)][_0x302696(0x1c3)]((_0x372b2b,{name:_0x27007b,type:_0x2c9098})=>_0x372b2b[_0x302696(0x1cb)](_0x27007b,_0x2c9098),new Map()));if(_0x3836ca)return _0x8be6d7;if(!_0x8be6d7)return null;switch(this['_fieldsTypes'][_0x302696(0x1b5)](_0x36d7dc)){case _0x302696(0x1b2):return _0x8be6d7[_0x302696(0x1bf)](/\.\d{3}Z$/,_0x302696(0x1d5));case _0x302696(0x189):return _0x8be6d7===_0x302696(0x1c2);case _0x302696(0x1cc):case _0x302696(0x193):case _0x302696(0x1ca):case _0x302696(0x1aa):return+_0x8be6d7;default:return _0x8be6d7;}}}exports[a92_0x1a2d8a(0x191)]=BaseBulkRetrieve,BaseBulkRetrieve[a92_0x1a2d8a(0x1ad)]=0x1388;