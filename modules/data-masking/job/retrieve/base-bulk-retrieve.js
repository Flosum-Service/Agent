const a75_0xb37ddd=a75_0x5cb2;(function(_0x1f0868,_0x478049){const _0x5a3eb1=a75_0x5cb2,_0x13e503=_0x1f0868();while(!![]){try{const _0x7d1b1=parseInt(_0x5a3eb1(0x16f))/0x1*(parseInt(_0x5a3eb1(0x163))/0x2)+parseInt(_0x5a3eb1(0x18c))/0x3*(parseInt(_0x5a3eb1(0x156))/0x4)+parseInt(_0x5a3eb1(0x16e))/0x5+parseInt(_0x5a3eb1(0x157))/0x6*(parseInt(_0x5a3eb1(0x166))/0x7)+parseInt(_0x5a3eb1(0x160))/0x8*(-parseInt(_0x5a3eb1(0x18a))/0x9)+-parseInt(_0x5a3eb1(0x180))/0xa*(parseInt(_0x5a3eb1(0x13e))/0xb)+-parseInt(_0x5a3eb1(0x188))/0xc;if(_0x7d1b1===_0x478049)break;else _0x13e503['push'](_0x13e503['shift']());}catch(_0x1806db){_0x13e503['push'](_0x13e503['shift']());}}}(a75_0x5665,0x277eb));const a75_0x2d1d25=(function(){let _0x56af96=!![];return function(_0x25b3e3,_0x35a3af){const _0x437fd1=_0x56af96?function(){if(_0x35a3af){const _0x17800a=_0x35a3af['apply'](_0x25b3e3,arguments);return _0x35a3af=null,_0x17800a;}}:function(){};return _0x56af96=![],_0x437fd1;};}()),a75_0x1bc086=a75_0x2d1d25(this,function(){const _0x39856a=a75_0x5cb2;return a75_0x1bc086[_0x39856a(0x161)]()[_0x39856a(0x159)](_0x39856a(0x16d))[_0x39856a(0x161)]()[_0x39856a(0x141)](a75_0x1bc086)['search'](_0x39856a(0x16d));});a75_0x1bc086();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x56d2b3){const _0x4323aa=a75_0x5cb2;return _0x56d2b3&&_0x56d2b3[_0x4323aa(0x17e)]?_0x56d2b3:{'default':_0x56d2b3};};Object[a75_0xb37ddd(0x17f)](exports,a75_0xb37ddd(0x17e),{'value':!![]}),exports['BaseBulkRetrieve']=void 0x0;const base_retrieve_1=require(a75_0xb37ddd(0x15d)),stream_1=require(a75_0xb37ddd(0x186)),path_1=__importDefault(require(a75_0xb37ddd(0x168))),utils_1=require(a75_0xb37ddd(0x175)),promises_1=require(a75_0xb37ddd(0x174)),fs_1=__importDefault(require('fs')),promises_2=require(a75_0xb37ddd(0x17c)),crypto_1=require('crypto'),csv_parse_1=require('csv-parse'),salesforce_1=require(a75_0xb37ddd(0x142)),job_detail_1=require(a75_0xb37ddd(0x15f)),constants_1=require(a75_0xb37ddd(0x15a));function a75_0x5cb2(_0x496c10,_0x5f5866){const _0x2f4da0=a75_0x5665();return a75_0x5cb2=function(_0x1bc086,_0x2d1d25){_0x1bc086=_0x1bc086-0x13e;let _0x56651f=_0x2f4da0[_0x1bc086];return _0x56651f;},a75_0x5cb2(_0x496c10,_0x5f5866);}class BaseBulkRetrieve extends base_retrieve_1[a75_0xb37ddd(0x18e)]{get['baseRetrievePayload'](){const _0x458e49=a75_0xb37ddd;return{'queryBuilder':this['queryBuilder'],'instance':this[_0x458e49(0x14d)],'api':constants_1[_0x458e49(0x183)],'contentType':salesforce_1[_0x458e49(0x155)]['TEXT_CSV']};}async[a75_0xb37ddd(0x162)](){const _0x488495=a75_0xb37ddd;var _0x56102e,_0x516ea6;if(this[_0x488495(0x17d)][_0x488495(0x14f)]()&&!((_0x56102e=this['csvParser'])===null||_0x56102e===void 0x0?void 0x0:_0x56102e[_0x488495(0x144)]())){this['push'](null);return;}if((_0x516ea6=this[_0x488495(0x153)])===null||_0x516ea6===void 0x0?void 0x0:_0x516ea6[_0x488495(0x144)]()){this['csvParser'][_0x488495(0x172)]();return;}const _0x37fa1d=await this['retrieve'][_0x488495(0x18d)]();if(!_0x37fa1d)return this['pull']();await this[_0x488495(0x165)](_0x37fa1d);}async[a75_0xb37ddd(0x165)](_0x18fe52){const _0x4044a0=a75_0xb37ddd,_0x3f4b3d=path_1[_0x4044a0(0x14c)][_0x4044a0(0x18b)](job_detail_1[_0x4044a0(0x16c)],(0x0,crypto_1['randomUUID'])()),_0x491a7e=(0x0,crypto_1[_0x4044a0(0x154)])(),_0x217869=await this[_0x4044a0(0x152)](_0x18fe52,_0x3f4b3d,_0x491a7e)[_0x4044a0(0x18f)](()=>this['readEncryptedTempFile'](_0x3f4b3d,_0x491a7e)),_0x5ce83d={'columns':!![],'cast':this[_0x4044a0(0x14a)][_0x4044a0(0x148)](this)};this[_0x4044a0(0x153)]=(0x0,stream_1[_0x4044a0(0x169)])(_0x217869,(0x0,csv_parse_1[_0x4044a0(0x189)])(_0x5ce83d),this[_0x4044a0(0x178)][_0x4044a0(0x148)](this,_0x3f4b3d)),this[_0x4044a0(0x153)]['on'](_0x4044a0(0x151),_0x2ca18c=>{const _0x5c3f76=_0x4044a0;this['csvParser'][_0x5c3f76(0x14b)](),this[_0x5c3f76(0x171)](_0x2ca18c);}),this[_0x4044a0(0x153)]['on'](_0x4044a0(0x17a),async()=>{const _0x2257d0=_0x4044a0;return await utils_1[_0x2257d0(0x17b)][_0x2257d0(0x140)](_0x3f4b3d)&&await(0x0,promises_1['rm'])(_0x3f4b3d)[_0x2257d0(0x13f)](this['handleError'][_0x2257d0(0x148)](this,null)),this[_0x2257d0(0x149)]();}),this[_0x4044a0(0x153)]['on'](_0x4044a0(0x158),this[_0x4044a0(0x178)][_0x4044a0(0x148)](this,_0x3f4b3d));}async[a75_0xb37ddd(0x152)](_0x1d40f5,_0x4b00b6,_0x10e8ca){const _0x214e73=a75_0xb37ddd,_0x4c09f3=fs_1[_0x214e73(0x14c)][_0x214e73(0x15c)](_0x4b00b6);await(0x0,promises_2[_0x214e73(0x169)])(_0x1d40f5,utils_1['CryptoUtils'][_0x214e73(0x16a)](_0x10e8ca),_0x4c09f3);}async[a75_0xb37ddd(0x150)](_0x101f0f,_0x5d9f90){const _0xd929d2=a75_0xb37ddd,_0x1ea808=fs_1[_0xd929d2(0x14c)]['createReadStream'](_0x101f0f),_0x50b1f9=await this[_0xd929d2(0x176)](_0x1ea808),_0x5c227a=utils_1[_0xd929d2(0x15b)]['createDecryptPipe'](_0x5d9f90,_0x50b1f9);return(0x0,stream_1['pipeline'])(_0x1ea808,_0x5c227a,this['pipelineCallback'][_0xd929d2(0x148)](this,_0x101f0f));}async[a75_0xb37ddd(0x178)](_0x36ba3c,_0x2947e6){const _0x1fa0f8=a75_0xb37ddd;_0x2947e6&&await this[_0x1fa0f8(0x167)](_0x36ba3c,_0x2947e6);}async[a75_0xb37ddd(0x167)](_0x660a1f,_0x33431b){const _0x231426=a75_0xb37ddd;_0x660a1f&&await utils_1['FsUtils'][_0x231426(0x140)](_0x660a1f)&&await(0x0,promises_1['rm'])(_0x660a1f)['catch'](_0x261fd5=>job_detail_1[_0x231426(0x145)][_0x231426(0x158)](_0x261fd5)),this[_0x231426(0x185)](_0x33431b);}async[a75_0xb37ddd(0x176)](_0x4f0430){return new Promise((_0x5d2b4c,_0x51d0ac)=>{const _0x4a20c4=a75_0x5cb2;_0x4f0430[_0x4a20c4(0x164)](_0x4a20c4(0x158),_0x51d0ac),_0x4f0430[_0x4a20c4(0x164)]('readable',()=>{const _0x57321f=_0x4a20c4,_0x263f83=_0x4f0430[_0x57321f(0x14e)](0x10);_0x5d2b4c(_0x263f83);});});}[a75_0xb37ddd(0x14a)](_0x794b7b,{header:_0x43c330,column:_0x4a4ebc}){const _0x2a9618=a75_0xb37ddd;!this[_0x2a9618(0x143)]&&(this['_fieldsTypes']=this[_0x2a9618(0x184)]['fields'][_0x2a9618(0x187)]((_0x4166dc,{name:_0x39806f,type:_0x2811f0})=>_0x4166dc['set'](_0x39806f,_0x2811f0),new Map()));if(_0x43c330)return _0x794b7b;if(!_0x794b7b)return null;switch(this['_fieldsTypes'][_0x2a9618(0x147)](_0x4a4ebc)){case'datetime':return _0x794b7b[_0x2a9618(0x146)](/\.\d{3}Z$/,_0x2a9618(0x182));case _0x2a9618(0x170):return _0x794b7b===_0x2a9618(0x173);case _0x2a9618(0x179):case _0x2a9618(0x15e):case _0x2a9618(0x181):case'percent':return+_0x794b7b;default:return _0x794b7b;}}}exports[a75_0xb37ddd(0x16b)]=BaseBulkRetrieve,BaseBulkRetrieve[a75_0xb37ddd(0x177)]=0x1388;function a75_0x5665(){const _0x2440a3=['16840WYobne','toString','pull','11326KhAhDD','once','createReader','245PmhjQy','handleError','path','pipeline','createEncryptPipe','BaseBulkRetrieve','jobStorePath','(((.+)+)+)+$','370560dwNZpb','12bzzbzu','boolean','push','resume','true','fs/promises','@flosum/utils','readEncryptionVector','POLL_INTERVAL','pipelineCallback','currency','end','FsUtils','stream/promises','retrieve','__esModule','defineProperty','870440DhZvbU','int','.000+0000','SALESFORCE_API_VERSION','describe','destroy','stream','reduce','1879248MWcrXd','parse','279kqhiWZ','join','96sluJZW','execute','BaseRetrieve','then','11xjEJHa','catch','isExistsPath','constructor','@flosum/salesforce','_fieldsTypes','isPaused','systemLogger','replace','get','bind','_read','castCsvValue','pause','default','request','read','getIsDone','readEncryptedTempFile','data','writeEncryptedTempFile','csvParser','randomUUID','BulkV1QueryContentType','31792QvwYLR','12732aGNksg','error','search','../../constants','CryptoUtils','createWriteStream','./base-retrieve','double','../job-detail'];a75_0x5665=function(){return _0x2440a3;};return a75_0x5665();}