const a92_0x4301a7=a92_0x455c;(function(_0x343e3d,_0xbe96c9){const _0x398890=a92_0x455c,_0x2c48ce=_0x343e3d();while(!![]){try{const _0x1ba6f6=-parseInt(_0x398890(0xf1))/0x1+parseInt(_0x398890(0xff))/0x2+parseInt(_0x398890(0xf9))/0x3*(parseInt(_0x398890(0xb7))/0x4)+parseInt(_0x398890(0xbd))/0x5+parseInt(_0x398890(0xfd))/0x6+parseInt(_0x398890(0xe9))/0x7+-parseInt(_0x398890(0xee))/0x8*(parseInt(_0x398890(0xdd))/0x9);if(_0x1ba6f6===_0xbe96c9)break;else _0x2c48ce['push'](_0x2c48ce['shift']());}catch(_0x22d185){_0x2c48ce['push'](_0x2c48ce['shift']());}}}(a92_0x46a1,0x87937));const a92_0x144f7b=(function(){let _0x165c1f=!![];return function(_0x4169e4,_0x5aca8e){const _0x5bc72c=_0x165c1f?function(){const _0x3f90de=a92_0x455c;if(_0x5aca8e){const _0x1db7f5=_0x5aca8e[_0x3f90de(0xda)](_0x4169e4,arguments);return _0x5aca8e=null,_0x1db7f5;}}:function(){};return _0x165c1f=![],_0x5bc72c;};}()),a92_0x35c5bf=a92_0x144f7b(this,function(){const _0x573d33=a92_0x455c;return a92_0x35c5bf[_0x573d33(0xdc)]()[_0x573d33(0xb8)](_0x573d33(0xbf))['toString']()[_0x573d33(0xcb)](a92_0x35c5bf)['search']('(((.+)+)+)+$');});a92_0x35c5bf();'use strict';var __importDefault=this&&this[a92_0x4301a7(0xed)]||function(_0x33a68e){return _0x33a68e&&_0x33a68e['__esModule']?_0x33a68e:{'default':_0x33a68e};};function a92_0x455c(_0x1295ea,_0x47b612){const _0x595309=a92_0x46a1();return a92_0x455c=function(_0x35c5bf,_0x144f7b){_0x35c5bf=_0x35c5bf-0xb6;let _0x46a178=_0x595309[_0x35c5bf];return _0x46a178;},a92_0x455c(_0x1295ea,_0x47b612);}Object[a92_0x4301a7(0xf5)](exports,a92_0x4301a7(0xc7),{'value':!![]}),exports[a92_0x4301a7(0xe1)]=void 0x0;const base_retrieve_1=require(a92_0x4301a7(0xbb)),stream_1=require(a92_0x4301a7(0xea)),path_1=__importDefault(require('path')),utils_1=require(a92_0x4301a7(0xe7)),promises_1=require(a92_0x4301a7(0xd2)),fs_1=__importDefault(require('fs')),promises_2=require(a92_0x4301a7(0xc0)),crypto_1=require(a92_0x4301a7(0xbc)),csv_parse_1=require(a92_0x4301a7(0xca)),salesforce_1=require(a92_0x4301a7(0xdb)),job_detail_1=require('../job-detail'),constants_1=require(a92_0x4301a7(0xe6));class BaseBulkRetrieve extends base_retrieve_1[a92_0x4301a7(0xb6)]{get[a92_0x4301a7(0xd1)](){const _0x42b35d=a92_0x4301a7;return{'queryBuilder':this[_0x42b35d(0xf7)],'instance':this[_0x42b35d(0x101)],'api':constants_1[_0x42b35d(0xec)],'contentType':salesforce_1[_0x42b35d(0x102)]['TEXT_CSV']};}async['pull'](){const _0x4ab79d=a92_0x4301a7;var _0x1e9bdd,_0x4f690f;if(this[_0x4ab79d(0xe5)]['getIsDone']()&&!((_0x1e9bdd=this[_0x4ab79d(0xf8)])===null||_0x1e9bdd===void 0x0?void 0x0:_0x1e9bdd[_0x4ab79d(0xfb)]())){this[_0x4ab79d(0xd0)](null);return;}if((_0x4f690f=this[_0x4ab79d(0xf8)])===null||_0x4f690f===void 0x0?void 0x0:_0x4f690f[_0x4ab79d(0xfb)]()){this[_0x4ab79d(0xf8)]['resume']();return;}const _0x1a5bb3=await this[_0x4ab79d(0xe5)]['execute']();if(!_0x1a5bb3)return this['pull']();await this[_0x4ab79d(0xd9)](_0x1a5bb3);}async[a92_0x4301a7(0xd9)](_0x5a29a6){const _0x241ae8=a92_0x4301a7,_0xd97487=path_1[_0x241ae8(0xef)][_0x241ae8(0xce)](job_detail_1[_0x241ae8(0x105)],(0x0,crypto_1['randomUUID'])()),_0x24cb0c=(0x0,crypto_1[_0x241ae8(0xd6)])(),_0x53feab=await this['writeEncryptedTempFile'](_0x5a29a6,_0xd97487,_0x24cb0c)[_0x241ae8(0xe2)](()=>this[_0x241ae8(0xc4)](_0xd97487,_0x24cb0c)),_0x3c6300={'columns':!![],'cast':this['castCsvValue'][_0x241ae8(0xe3)](this)};this[_0x241ae8(0xf8)]=(0x0,stream_1[_0x241ae8(0xc5)])(_0x53feab,(0x0,csv_parse_1[_0x241ae8(0xd8)])(_0x3c6300),this['pipelineCallback'][_0x241ae8(0xe3)](this,_0xd97487)),this[_0x241ae8(0xf8)]['on']('data',_0x4be96c=>{const _0x510dc2=_0x241ae8;this[_0x510dc2(0xf8)][_0x510dc2(0xd5)](),this[_0x510dc2(0xd0)](_0x4be96c);}),this[_0x241ae8(0xf8)]['on'](_0x241ae8(0xcd),async()=>{const _0x2bd179=_0x241ae8;return await utils_1[_0x2bd179(0xd4)][_0x2bd179(0xc3)](_0xd97487)&&await(0x0,promises_1['rm'])(_0xd97487)['catch'](this[_0x2bd179(0xc6)][_0x2bd179(0xe3)](this,null)),this[_0x2bd179(0x104)]();}),this[_0x241ae8(0xf8)]['on'](_0x241ae8(0xfc),this[_0x241ae8(0xeb)][_0x241ae8(0xe3)](this,_0xd97487));}async[a92_0x4301a7(0xde)](_0x3602a8,_0x165167,_0x3920b3){const _0x2c5a8e=a92_0x4301a7,_0x58fec4=fs_1[_0x2c5a8e(0xef)]['createWriteStream'](_0x165167);await(0x0,promises_2[_0x2c5a8e(0xc5)])(_0x3602a8,utils_1[_0x2c5a8e(0xba)][_0x2c5a8e(0xf2)](_0x3920b3),_0x58fec4);}async['readEncryptedTempFile'](_0x2199d8,_0x16ddcd){const _0x4703fa=a92_0x4301a7,_0x33bafa=fs_1['default'][_0x4703fa(0xc8)](_0x2199d8),_0x97b2eb=await this[_0x4703fa(0xf4)](_0x33bafa),_0x44ce3e=utils_1['CryptoUtils'][_0x4703fa(0xf6)](_0x16ddcd,_0x97b2eb);return(0x0,stream_1[_0x4703fa(0xc5)])(_0x33bafa,_0x44ce3e,this[_0x4703fa(0xeb)][_0x4703fa(0xe3)](this,_0x2199d8));}async[a92_0x4301a7(0xeb)](_0x7c10c4,_0x16d49e){const _0x5d4672=a92_0x4301a7;_0x16d49e&&await this[_0x5d4672(0xc6)](_0x7c10c4,_0x16d49e);}async['handleError'](_0x4eb971,_0x4ab897){const _0x16bb1c=a92_0x4301a7;_0x4eb971&&await utils_1[_0x16bb1c(0xd4)][_0x16bb1c(0xc3)](_0x4eb971)&&await(0x0,promises_1['rm'])(_0x4eb971)[_0x16bb1c(0xcc)](_0x56d19d=>job_detail_1[_0x16bb1c(0xf3)][_0x16bb1c(0xfc)](_0x56d19d)),this[_0x16bb1c(0xb9)](_0x4ab897);}async[a92_0x4301a7(0xf4)](_0x2aa54d){return new Promise((_0x1ab688,_0x38e14b)=>{const _0x444764=a92_0x455c;_0x2aa54d[_0x444764(0xc9)](_0x444764(0xfc),_0x38e14b),_0x2aa54d[_0x444764(0xc9)]('readable',()=>{const _0x18663d=_0x444764,_0x8e6b09=_0x2aa54d[_0x18663d(0xe4)](0x10);_0x1ab688(_0x8e6b09);});});}[a92_0x4301a7(0xfe)](_0x178c3f,{header:_0x2cb62e,column:_0x4956b1}){const _0x2650e8=a92_0x4301a7;!this['_fieldsTypes']&&(this[_0x2650e8(0xdf)]=this[_0x2650e8(0xe8)][_0x2650e8(0xcf)][_0x2650e8(0xd7)]((_0x3d9a50,{name:_0x42cd75,type:_0x2485c1})=>_0x3d9a50[_0x2650e8(0xe0)](_0x42cd75,_0x2485c1),new Map()));if(_0x2cb62e)return _0x178c3f;if(!_0x178c3f)return null;switch(this['_fieldsTypes']['get'](_0x4956b1)){case _0x2650e8(0xf0):return _0x178c3f[_0x2650e8(0xd3)](/\.\d{3}Z$/,'.000+0000');case _0x2650e8(0x100):return _0x178c3f==='true';case _0x2650e8(0xbe):case _0x2650e8(0xc1):case _0x2650e8(0x103):case _0x2650e8(0xc2):return+_0x178c3f;default:return _0x178c3f;}}}exports[a92_0x4301a7(0xe1)]=BaseBulkRetrieve,BaseBulkRetrieve[a92_0x4301a7(0xfa)]=0x1388;function a92_0x46a1(){const _0xfd9acd=['request','BulkV1QueryContentType','int','_read','jobStorePath','BaseRetrieve','23824EqnIAS','search','destroy','CryptoUtils','./base-retrieve','crypto','4302100OrdLCI','currency','(((.+)+)+)+$','stream/promises','double','percent','isExistsPath','readEncryptedTempFile','pipeline','handleError','__esModule','createReadStream','once','csv-parse','constructor','catch','end','join','fields','push','baseRetrievePayload','fs/promises','replace','FsUtils','pause','randomUUID','reduce','parse','createReader','apply','@flosum/salesforce','toString','64836zmqSPF','writeEncryptedTempFile','_fieldsTypes','set','BaseBulkRetrieve','then','bind','read','retrieve','../../constants','@flosum/utils','describe','2214968vnfLxk','stream','pipelineCallback','SALESFORCE_API_VERSION','__importDefault','2864yZoGYA','default','datetime','138632ZsuEks','createEncryptPipe','systemLogger','readEncryptionVector','defineProperty','createDecryptPipe','queryBuilder','csvParser','408HdQgSE','POLL_INTERVAL','isPaused','error','5878704DQYXkX','castCsvValue','612678pHRwfb','boolean'];a92_0x46a1=function(){return _0xfd9acd;};return a92_0x46a1();}