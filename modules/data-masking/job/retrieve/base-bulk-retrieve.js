const a74_0x26e99c=a74_0x4ecf;(function(_0x37bc1e,_0x21fbdf){const _0x36b6c7=a74_0x4ecf,_0x13f295=_0x37bc1e();while(!![]){try{const _0x1a3893=parseInt(_0x36b6c7(0xf3))/0x1+-parseInt(_0x36b6c7(0xf4))/0x2*(parseInt(_0x36b6c7(0xbc))/0x3)+-parseInt(_0x36b6c7(0xf2))/0x4+parseInt(_0x36b6c7(0xca))/0x5+-parseInt(_0x36b6c7(0xe1))/0x6+parseInt(_0x36b6c7(0xc2))/0x7+-parseInt(_0x36b6c7(0xe3))/0x8;if(_0x1a3893===_0x21fbdf)break;else _0x13f295['push'](_0x13f295['shift']());}catch(_0x54c3ac){_0x13f295['push'](_0x13f295['shift']());}}}(a74_0x4172,0x2c227));const a74_0x348e25=(function(){let _0x34711b=!![];return function(_0x2a85db,_0x3afd43){const _0x6b0b24=_0x34711b?function(){const _0x307a52=a74_0x4ecf;if(_0x3afd43){const _0x15b6e5=_0x3afd43[_0x307a52(0xe5)](_0x2a85db,arguments);return _0x3afd43=null,_0x15b6e5;}}:function(){};return _0x34711b=![],_0x6b0b24;};}()),a74_0x77a63c=a74_0x348e25(this,function(){const _0x3c38d8=a74_0x4ecf;return a74_0x77a63c['toString']()[_0x3c38d8(0xbd)](_0x3c38d8(0xc9))[_0x3c38d8(0xe9)]()[_0x3c38d8(0xdd)](a74_0x77a63c)[_0x3c38d8(0xbd)]('(((.+)+)+)+$');});a74_0x77a63c();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x422d4b){const _0x36328f=a74_0x4ecf;return _0x422d4b&&_0x422d4b[_0x36328f(0xba)]?_0x422d4b:{'default':_0x422d4b};};Object[a74_0x26e99c(0xd3)](exports,a74_0x26e99c(0xba),{'value':!![]}),exports[a74_0x26e99c(0xeb)]=void 0x0;const base_retrieve_1=require(a74_0x26e99c(0xea)),stream_1=require(a74_0x26e99c(0xd1)),path_1=__importDefault(require(a74_0x26e99c(0xcd))),utils_1=require(a74_0x26e99c(0xd8)),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require(a74_0x26e99c(0xb6)),crypto_1=require('crypto'),csv_parse_1=require(a74_0x26e99c(0xed)),zlib_1=__importDefault(require('zlib')),job_detail_1=require('../job-detail');class BaseBulkRetrieve extends base_retrieve_1[a74_0x26e99c(0xc8)]{async[a74_0x26e99c(0xdb)](){const _0x1a3ea3=a74_0x26e99c;var _0x512d12,_0x771f27;if(this[_0x1a3ea3(0xe2)][_0x1a3ea3(0xf1)]()&&!((_0x512d12=this[_0x1a3ea3(0xef)])===null||_0x512d12===void 0x0?void 0x0:_0x512d12[_0x1a3ea3(0xcc)]())){this[_0x1a3ea3(0xdc)](null);return;}if((_0x771f27=this['csvParser'])===null||_0x771f27===void 0x0?void 0x0:_0x771f27['isPaused']()){this['csvParser'][_0x1a3ea3(0xcb)]();return;}const _0xed89a4=await this[_0x1a3ea3(0xe2)][_0x1a3ea3(0xe8)]();if(!_0xed89a4)return this[_0x1a3ea3(0xdb)]();await this[_0x1a3ea3(0xd6)](_0xed89a4);}async['createReader'](_0x4cff95){const _0x4edc90=a74_0x26e99c,_0x578051=path_1[_0x4edc90(0xe4)][_0x4edc90(0xc1)](job_detail_1[_0x4edc90(0xd7)],(0x0,crypto_1[_0x4edc90(0xd2)])()),_0x28c823=(0x0,crypto_1[_0x4edc90(0xd2)])(),_0x412796=await this[_0x4edc90(0xf5)](_0x4cff95,_0x578051,_0x28c823)[_0x4edc90(0xe0)](()=>this[_0x4edc90(0xd0)](_0x578051,_0x28c823)),_0x514615={'columns':!![],'cast':this['castCsvValue'][_0x4edc90(0xb5)](this)};this[_0x4edc90(0xef)]=(0x0,stream_1[_0x4edc90(0xb8)])(_0x412796,zlib_1[_0x4edc90(0xe4)]['createUnzip'](),(0x0,csv_parse_1[_0x4edc90(0xc7)])(_0x514615),this[_0x4edc90(0xbb)]['bind'](this,_0x578051)),this[_0x4edc90(0xef)]['on']('data',_0xb395c1=>{const _0x1b0b5a=_0x4edc90;this[_0x1b0b5a(0xef)][_0x1b0b5a(0xc4)](),this[_0x1b0b5a(0xdc)](_0xb395c1);}),this[_0x4edc90(0xef)]['on']('end',async()=>{const _0x336a8a=_0x4edc90;return await utils_1['FsUtils']['isExistsPath'](_0x578051)&&await(0x0,promises_1['rm'])(_0x578051)[_0x336a8a(0xec)](this[_0x336a8a(0xd9)][_0x336a8a(0xb5)](this,null)),this[_0x336a8a(0xe6)]();}),this[_0x4edc90(0xef)]['on'](_0x4edc90(0xb2),this[_0x4edc90(0xbb)][_0x4edc90(0xb5)](this,_0x578051));}async[a74_0x26e99c(0xf5)](_0x5517e1,_0x172878,_0x5580ee){const _0x13e2e1=a74_0x26e99c,_0x27c670=fs_1[_0x13e2e1(0xe4)]['createWriteStream'](_0x172878);await(0x0,promises_2['pipeline'])(_0x5517e1,utils_1[_0x13e2e1(0xf6)][_0x13e2e1(0xee)](_0x5580ee),_0x27c670);}async['readEncryptedTempFile'](_0x1a1fe6,_0x4f8057){const _0x62804a=a74_0x26e99c,_0x445d35=fs_1[_0x62804a(0xe4)][_0x62804a(0xbf)](_0x1a1fe6),_0x486913=await this[_0x62804a(0xc3)](_0x445d35),_0x20d378=utils_1[_0x62804a(0xf6)][_0x62804a(0xb4)](_0x4f8057,_0x486913);return(0x0,stream_1[_0x62804a(0xb8)])(_0x445d35,_0x20d378,this[_0x62804a(0xbb)][_0x62804a(0xb5)](this,_0x1a1fe6));}async[a74_0x26e99c(0xbb)](_0x3c5179,_0x29faae){const _0x563377=a74_0x26e99c;_0x29faae&&await this[_0x563377(0xd9)](_0x3c5179,_0x29faae);}async[a74_0x26e99c(0xd9)](_0x2ca356,_0x5870eb){const _0x2cbbf4=a74_0x26e99c;_0x2ca356&&await utils_1[_0x2cbbf4(0xcf)]['isExistsPath'](_0x2ca356)&&await(0x0,promises_1['rm'])(_0x2ca356)[_0x2cbbf4(0xec)](_0xe7a295=>job_detail_1[_0x2cbbf4(0xbe)][_0x2cbbf4(0xb2)](_0xe7a295)),this[_0x2cbbf4(0xde)](_0x5870eb);}async[a74_0x26e99c(0xc3)](_0x3318cc){return new Promise((_0x3ec1ae,_0x536901)=>{const _0x3a0789=a74_0x4ecf;_0x3318cc[_0x3a0789(0xb1)](_0x3a0789(0xb2),_0x536901),_0x3318cc[_0x3a0789(0xb1)]('readable',()=>{const _0x495808=_0x3a0789,_0x2e1d32=_0x3318cc[_0x495808(0xf0)](0x10);_0x3ec1ae(_0x2e1d32);});});}[a74_0x26e99c(0xdf)](_0x37af4e,{header:_0x3efa70,column:_0x41bd3b}){const _0x54d9ed=a74_0x26e99c;!this[_0x54d9ed(0xb3)]&&(this[_0x54d9ed(0xb3)]=this[_0x54d9ed(0xd4)][_0x54d9ed(0xda)][_0x54d9ed(0xce)]((_0x3776bb,{name:_0xcf3240,type:_0x1b5623})=>_0x3776bb[_0x54d9ed(0xc6)](_0xcf3240,_0x1b5623),new Map()));if(_0x3efa70)return _0x37af4e;if(!_0x37af4e)return null;switch(this[_0x54d9ed(0xb3)][_0x54d9ed(0xb9)](_0x41bd3b)){case'datetime':return _0x37af4e[_0x54d9ed(0xc5)](/\.\d{3}Z$/,'.000+0000');case'boolean':return _0x37af4e==='true';case _0x54d9ed(0xb7):case _0x54d9ed(0xe7):case _0x54d9ed(0xc0):case'percent':return+_0x37af4e;default:return _0x37af4e;}}}function a74_0x4172(){const _0x11bb86=['read','getIsDone','1082040oTBMbj','323529bFzgeG','4IbZSzR','writeEncryptedTempFile','CryptoUtils','once','error','_fieldsTypes','createDecryptPipe','bind','stream/promises','currency','pipeline','get','__esModule','pipelineCallback','335004XvZdrY','search','systemLogger','createReadStream','int','join','1418396MmfHPP','readEncryptionVector','pause','replace','set','parse','BaseRetrieve','(((.+)+)+)+$','913755UpIfen','resume','isPaused','path','reduce','FsUtils','readEncryptedTempFile','stream','randomUUID','defineProperty','describe','POLL_INTERVAL','createReader','jobStorePath','@flosum/utils','handleError','fields','pull','push','constructor','destroy','castCsvValue','then','240XxGoeT','retrieve','273976lyPEwg','default','apply','_read','double','execute','toString','./base-retrieve','BaseBulkRetrieve','catch','csv-parse','createEncryptPipe','csvParser'];a74_0x4172=function(){return _0x11bb86;};return a74_0x4172();}function a74_0x4ecf(_0x4181c7,_0x2892eb){const _0x20dbdd=a74_0x4172();return a74_0x4ecf=function(_0x77a63c,_0x348e25){_0x77a63c=_0x77a63c-0xb1;let _0x4172bd=_0x20dbdd[_0x77a63c];return _0x4172bd;},a74_0x4ecf(_0x4181c7,_0x2892eb);}exports[a74_0x26e99c(0xeb)]=BaseBulkRetrieve,BaseBulkRetrieve[a74_0x26e99c(0xd5)]=0x1388;