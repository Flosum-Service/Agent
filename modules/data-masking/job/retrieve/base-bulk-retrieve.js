const a93_0x4569ea=a93_0x27ab;(function(_0x571bcf,_0x28a73f){const _0x487780=a93_0x27ab,_0x346ec3=_0x571bcf();while(!![]){try{const _0x2d8221=parseInt(_0x487780(0x77))/0x1+-parseInt(_0x487780(0xa4))/0x2+-parseInt(_0x487780(0x9e))/0x3*(parseInt(_0x487780(0xa6))/0x4)+parseInt(_0x487780(0xa3))/0x5*(parseInt(_0x487780(0xb5))/0x6)+-parseInt(_0x487780(0x8c))/0x7*(-parseInt(_0x487780(0x92))/0x8)+-parseInt(_0x487780(0x88))/0x9+parseInt(_0x487780(0xb8))/0xa*(-parseInt(_0x487780(0xaf))/0xb);if(_0x2d8221===_0x28a73f)break;else _0x346ec3['push'](_0x346ec3['shift']());}catch(_0x2b8371){_0x346ec3['push'](_0x346ec3['shift']());}}}(a93_0x5ed3,0x9c375));const a93_0x4684e2=(function(){let _0x249b2d=!![];return function(_0x3a6d31,_0xe952f0){const _0x4aa1ea=_0x249b2d?function(){const _0x21181c=a93_0x27ab;if(_0xe952f0){const _0x4b34c9=_0xe952f0[_0x21181c(0x75)](_0x3a6d31,arguments);return _0xe952f0=null,_0x4b34c9;}}:function(){};return _0x249b2d=![],_0x4aa1ea;};}()),a93_0x8e0acf=a93_0x4684e2(this,function(){const _0x23b9a6=a93_0x27ab;return a93_0x8e0acf['toString']()['search'](_0x23b9a6(0x81))['toString']()[_0x23b9a6(0x91)](a93_0x8e0acf)[_0x23b9a6(0xb4)](_0x23b9a6(0x81));});a93_0x8e0acf();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1f1f7e){return _0x1f1f7e&&_0x1f1f7e['__esModule']?_0x1f1f7e:{'default':_0x1f1f7e};};Object[a93_0x4569ea(0x97)](exports,a93_0x4569ea(0x6e),{'value':!![]}),exports['BaseBulkRetrieve']=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require(a93_0x4569ea(0xa9)),path_1=__importDefault(require(a93_0x4569ea(0x98))),utils_1=require(a93_0x4569ea(0x73)),promises_1=require(a93_0x4569ea(0x7d)),fs_1=__importDefault(require('fs')),promises_2=require(a93_0x4569ea(0x93)),crypto_1=require(a93_0x4569ea(0x9f)),csv_parse_1=require(a93_0x4569ea(0x90)),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a93_0x4569ea(0x71)),constants_1=require(a93_0x4569ea(0xa7));function a93_0x27ab(_0x363737,_0x164782){const _0x19fee9=a93_0x5ed3();return a93_0x27ab=function(_0x8e0acf,_0x4684e2){_0x8e0acf=_0x8e0acf-0x6e;let _0x5ed355=_0x19fee9[_0x8e0acf];return _0x5ed355;},a93_0x27ab(_0x363737,_0x164782);}class BaseBulkRetrieve extends base_retrieve_1[a93_0x4569ea(0x82)]{get['baseRetrievePayload'](){const _0x504162=a93_0x4569ea;return{'queryBuilder':this[_0x504162(0xb7)],'instance':this[_0x504162(0x7c)],'api':constants_1[_0x504162(0x7a)],'contentType':salesforce_1['BulkV1QueryContentType'][_0x504162(0xa2)]};}async[a93_0x4569ea(0x86)](){const _0x325e7e=a93_0x4569ea;var _0x1c9c4d,_0x36e757;if(this[_0x325e7e(0x8e)]['getIsDone']()&&!((_0x1c9c4d=this[_0x325e7e(0xaa)])===null||_0x1c9c4d===void 0x0?void 0x0:_0x1c9c4d[_0x325e7e(0x94)]())){this['push'](null);return;}if((_0x36e757=this[_0x325e7e(0xaa)])===null||_0x36e757===void 0x0?void 0x0:_0x36e757[_0x325e7e(0x94)]()){this[_0x325e7e(0xaa)][_0x325e7e(0x8b)]();return;}const _0x377603=await this[_0x325e7e(0x8e)]['execute']();if(!_0x377603)return this[_0x325e7e(0x86)]();await this[_0x325e7e(0x74)](_0x377603);}async[a93_0x4569ea(0x74)](_0x1b349b){const _0x2b3920=a93_0x4569ea,_0xfced6f=path_1['default'][_0x2b3920(0x70)](job_detail_1[_0x2b3920(0x79)],(0x0,crypto_1[_0x2b3920(0x8a)])()),_0x22b9d3=(0x0,crypto_1[_0x2b3920(0x8a)])(),_0xab0df=await this['writeEncryptedTempFile'](_0x1b349b,_0xfced6f,_0x22b9d3)[_0x2b3920(0xb6)](()=>this[_0x2b3920(0x9b)](_0xfced6f,_0x22b9d3)),_0x1b880c={'columns':!![],'cast':this[_0x2b3920(0x7f)][_0x2b3920(0x72)](this)};this[_0x2b3920(0xaa)]=(0x0,stream_1[_0x2b3920(0x76)])(_0xab0df,(0x0,csv_parse_1['parse'])(_0x1b880c),this[_0x2b3920(0x84)][_0x2b3920(0x72)](this,_0xfced6f)),this['csvParser']['on'](_0x2b3920(0x78),_0x54631a=>{const _0x27ade2=_0x2b3920;this[_0x27ade2(0xaa)][_0x27ade2(0xb0)](),this[_0x27ade2(0x8d)](_0x54631a);}),this[_0x2b3920(0xaa)]['on']('end',async()=>{const _0x4bb452=_0x2b3920;return await utils_1[_0x4bb452(0x99)]['isExistsPath'](_0xfced6f)&&await(0x0,promises_1['rm'])(_0xfced6f)[_0x4bb452(0x80)](this[_0x4bb452(0x89)][_0x4bb452(0x72)](this,null)),this[_0x4bb452(0x9c)]();}),this[_0x2b3920(0xaa)]['on']('error',this[_0x2b3920(0x84)][_0x2b3920(0x72)](this,_0xfced6f));}async['writeEncryptedTempFile'](_0x37b63c,_0x3d7243,_0x270de3){const _0x1a3303=a93_0x4569ea,_0x3a00a0=fs_1[_0x1a3303(0xac)]['createWriteStream'](_0x3d7243);await(0x0,promises_2[_0x1a3303(0x76)])(_0x37b63c,utils_1[_0x1a3303(0xb2)][_0x1a3303(0x85)](_0x270de3),_0x3a00a0);}async['readEncryptedTempFile'](_0x120668,_0x36760f){const _0x30c690=a93_0x4569ea,_0x4cf11e=fs_1['default'][_0x30c690(0xae)](_0x120668),_0x3351e6=await this[_0x30c690(0x95)](_0x4cf11e),_0x43be77=utils_1[_0x30c690(0xb2)][_0x30c690(0xa1)](_0x36760f,_0x3351e6);return(0x0,stream_1[_0x30c690(0x76)])(_0x4cf11e,_0x43be77,this['pipelineCallback'][_0x30c690(0x72)](this,_0x120668));}async['pipelineCallback'](_0x4ab2d7,_0x726c2f){_0x726c2f&&await this['handleError'](_0x4ab2d7,_0x726c2f);}async[a93_0x4569ea(0x89)](_0x48ddad,_0x6acca1){const _0x3bfec3=a93_0x4569ea;_0x48ddad&&await utils_1[_0x3bfec3(0x99)]['isExistsPath'](_0x48ddad)&&await(0x0,promises_1['rm'])(_0x48ddad)[_0x3bfec3(0x80)](_0x3bd983=>job_detail_1['systemLogger'][_0x3bfec3(0xa5)](_0x3bd983)),this['destroy'](_0x6acca1);}async[a93_0x4569ea(0x95)](_0x14d9cf){return new Promise((_0xa1cc7d,_0x580df1)=>{const _0x9b0abb=a93_0x27ab;_0x14d9cf['once'](_0x9b0abb(0xa5),_0x580df1),_0x14d9cf[_0x9b0abb(0x83)](_0x9b0abb(0xa8),()=>{const _0x2f86d9=_0x9b0abb,_0xde3a41=_0x14d9cf[_0x2f86d9(0xb9)](0x10);_0xa1cc7d(_0xde3a41);});});}[a93_0x4569ea(0x7f)](_0x32c01a,{header:_0x2c1ebe,column:_0x38f557}){const _0x5e4e87=a93_0x4569ea;!this[_0x5e4e87(0x8f)]&&(this[_0x5e4e87(0x8f)]=this[_0x5e4e87(0x9a)][_0x5e4e87(0x87)][_0x5e4e87(0xb3)]((_0x8b52e0,{name:_0x386f71,type:_0x4b31ff})=>_0x8b52e0[_0x5e4e87(0xad)](_0x386f71,_0x4b31ff),new Map()));if(_0x2c1ebe)return _0x32c01a;if(!_0x32c01a)return null;switch(this[_0x5e4e87(0x8f)][_0x5e4e87(0x96)](_0x38f557)){case'datetime':return _0x32c01a[_0x5e4e87(0x9d)](/\.\d{3}Z$/,'.000+0000');case _0x5e4e87(0x6f):return _0x32c01a===_0x5e4e87(0x7b);case'currency':case'double':case _0x5e4e87(0xa0):case _0x5e4e87(0xb1):return+_0x32c01a;default:return _0x32c01a;}}}exports[a93_0x4569ea(0xab)]=BaseBulkRetrieve,BaseBulkRetrieve[a93_0x4569ea(0x7e)]=0x1388;function a93_0x5ed3(){const _0x3210c4=['path','FsUtils','describe','readEncryptedTempFile','_read','replace','1956dlDFsa','crypto','int','createDecryptPipe','TEXT_CSV','21145lTzYvf','507488IOlpIF','error','4988eKJhxn','../../constants','readable','stream','csvParser','BaseBulkRetrieve','default','set','createReadStream','495PFHcWo','pause','percent','CryptoUtils','reduce','search','1038HyQicu','then','queryBuilder','113820xqbGgG','read','__esModule','boolean','join','../job-detail','bind','@flosum/utils','createReader','apply','pipeline','1259967vqjQzy','data','jobStorePath','SALESFORCE_API_VERSION','true','request','fs/promises','POLL_INTERVAL','castCsvValue','catch','(((.+)+)+)+$','BaseRetrieve','once','pipelineCallback','createEncryptPipe','pull','fields','2274165ZcOXoN','handleError','randomUUID','resume','140MoSjFB','push','retrieve','_fieldsTypes','csv-parse','constructor','191976fHFmpN','stream/promises','isPaused','readEncryptionVector','get','defineProperty'];a93_0x5ed3=function(){return _0x3210c4;};return a93_0x5ed3();}