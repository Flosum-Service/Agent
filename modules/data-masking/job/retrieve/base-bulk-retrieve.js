const a74_0x15edec=a74_0x3ff6;function a74_0x8ffa(){const _0x4ecdd9=['currency','1864XeyqGw','__importDefault','isExistsPath','datetime','340clefvk','default','readEncryptionVector','_fieldsTypes','isPaused','crypto','csv-parse','1456686XcPyEy','createReader','fs/promises','constructor','4iAWiwo','end','csvParser','describe','20tjhigf','stream','double','resume','catch','set','(((.+)+)+)+$','45749dSMAHc','join','6192FNGYML','createEncryptPipe','error','defineProperty','2938IAHGhm','1313478dTYOYs','readEncryptedTempFile','zlib','pipelineCallback','execute','../job-detail','once','__esModule','createReadStream','createWriteStream','retrieve','randomUUID','apply','jobStorePath','pipeline','createDecryptPipe','POLL_INTERVAL','reduce','fields','push','CryptoUtils','handleError','destroy','pull','pause','getIsDone','.000+0000','bind','19831XwgSbL','castCsvValue','data','2970630onxRfP','path','then','BaseRetrieve','BaseBulkRetrieve','writeEncryptedTempFile','FsUtils','1638537BJZfYm'];a74_0x8ffa=function(){return _0x4ecdd9;};return a74_0x8ffa();}(function(_0x260bba,_0x104749){const _0x53198d=a74_0x3ff6,_0x3ba934=_0x260bba();while(!![]){try{const _0x2ea2a8=-parseInt(_0x53198d(0x1cb))/0x1*(parseInt(_0x53198d(0x1e7))/0x2)+parseInt(_0x53198d(0x1c5))/0x3*(parseInt(_0x53198d(0x1d6))/0x4)+-parseInt(_0x53198d(0x1be))/0x5+-parseInt(_0x53198d(0x1d2))/0x6+parseInt(_0x53198d(0x1bb))/0x7*(-parseInt(_0x53198d(0x1c7))/0x8)+parseInt(_0x53198d(0x1e8))/0x9*(-parseInt(_0x53198d(0x1da))/0xa)+parseInt(_0x53198d(0x1e1))/0xb*(parseInt(_0x53198d(0x1e3))/0xc);if(_0x2ea2a8===_0x104749)break;else _0x3ba934['push'](_0x3ba934['shift']());}catch(_0x43d280){_0x3ba934['push'](_0x3ba934['shift']());}}}(a74_0x8ffa,0x629ab));const a74_0x4571f0=(function(){let _0x5a1599=!![];return function(_0x42acf5,_0x2bfa46){const _0x1bcbf1=_0x5a1599?function(){const _0x5863d9=a74_0x3ff6;if(_0x2bfa46){const _0x295e4e=_0x2bfa46[_0x5863d9(0x1ab)](_0x42acf5,arguments);return _0x2bfa46=null,_0x295e4e;}}:function(){};return _0x5a1599=![],_0x1bcbf1;};}()),a74_0x1a3859=a74_0x4571f0(this,function(){const _0x437161=a74_0x3ff6;return a74_0x1a3859['toString']()['search'](_0x437161(0x1e0))['toString']()[_0x437161(0x1d5)](a74_0x1a3859)['search'](_0x437161(0x1e0));});a74_0x1a3859();'use strict';var __importDefault=this&&this[a74_0x15edec(0x1c8)]||function(_0x159aad){const _0x37fb89=a74_0x15edec;return _0x159aad&&_0x159aad[_0x37fb89(0x1a6)]?_0x159aad:{'default':_0x159aad};};Object[a74_0x15edec(0x1e6)](exports,a74_0x15edec(0x1a6),{'value':!![]}),exports[a74_0x15edec(0x1c2)]=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require(a74_0x15edec(0x1db)),path_1=__importDefault(require(a74_0x15edec(0x1bf))),utils_1=require('@flosum/utils'),promises_1=require(a74_0x15edec(0x1d4)),fs_1=__importDefault(require('fs')),promises_2=require('stream/promises'),crypto_1=require(a74_0x15edec(0x1d0)),csv_parse_1=require(a74_0x15edec(0x1d1)),zlib_1=__importDefault(require(a74_0x15edec(0x1ea))),job_detail_1=require(a74_0x15edec(0x1a4));function a74_0x3ff6(_0x53ce6a,_0x5bb62d){const _0x384c05=a74_0x8ffa();return a74_0x3ff6=function(_0x1a3859,_0x4571f0){_0x1a3859=_0x1a3859-0x1a2;let _0x8ffa25=_0x384c05[_0x1a3859];return _0x8ffa25;},a74_0x3ff6(_0x53ce6a,_0x5bb62d);}class BaseBulkRetrieve extends base_retrieve_1[a74_0x15edec(0x1c1)]{async['pull'](){const _0x48b22c=a74_0x15edec;var _0x275d2d,_0x13f741;if(this[_0x48b22c(0x1a9)][_0x48b22c(0x1b8)]()&&!((_0x275d2d=this[_0x48b22c(0x1d8)])===null||_0x275d2d===void 0x0?void 0x0:_0x275d2d[_0x48b22c(0x1cf)]())){this[_0x48b22c(0x1b2)](null);return;}if((_0x13f741=this['csvParser'])===null||_0x13f741===void 0x0?void 0x0:_0x13f741[_0x48b22c(0x1cf)]()){this[_0x48b22c(0x1d8)][_0x48b22c(0x1dd)]();return;}const _0x296986=await this[_0x48b22c(0x1a9)][_0x48b22c(0x1a3)]();if(!_0x296986)return this[_0x48b22c(0x1b6)]();await this['createReader'](_0x296986);}async[a74_0x15edec(0x1d3)](_0x406a4b){const _0x42a1d8=a74_0x15edec,_0x5dd524=path_1[_0x42a1d8(0x1cc)][_0x42a1d8(0x1e2)](job_detail_1[_0x42a1d8(0x1ac)],(0x0,crypto_1['randomUUID'])()),_0x1ce27a=(0x0,crypto_1[_0x42a1d8(0x1aa)])(),_0xcbe1e=await this['writeEncryptedTempFile'](_0x406a4b,_0x5dd524,_0x1ce27a)[_0x42a1d8(0x1c0)](()=>this[_0x42a1d8(0x1e9)](_0x5dd524,_0x1ce27a)),_0x501fa4={'columns':!![],'cast':this['castCsvValue'][_0x42a1d8(0x1ba)](this)};this[_0x42a1d8(0x1d8)]=(0x0,stream_1[_0x42a1d8(0x1ad)])(_0xcbe1e,zlib_1[_0x42a1d8(0x1cc)]['createUnzip'](),(0x0,csv_parse_1['parse'])(_0x501fa4),this[_0x42a1d8(0x1a2)][_0x42a1d8(0x1ba)](this,_0x5dd524)),this['csvParser']['on'](_0x42a1d8(0x1bd),_0x5a8619=>{const _0x48205e=_0x42a1d8;this[_0x48205e(0x1d8)][_0x48205e(0x1b7)](),this['push'](_0x5a8619);}),this[_0x42a1d8(0x1d8)]['on'](_0x42a1d8(0x1d7),async()=>{const _0x458f93=_0x42a1d8;return await utils_1[_0x458f93(0x1c4)][_0x458f93(0x1c9)](_0x5dd524)&&await(0x0,promises_1['rm'])(_0x5dd524)[_0x458f93(0x1de)](this['handleError'][_0x458f93(0x1ba)](this,null)),this['_read']();}),this[_0x42a1d8(0x1d8)]['on'](_0x42a1d8(0x1e5),this[_0x42a1d8(0x1a2)][_0x42a1d8(0x1ba)](this,_0x5dd524));}async[a74_0x15edec(0x1c3)](_0x5bd7d9,_0x7de8b2,_0x184e1b){const _0xd71e56=a74_0x15edec,_0xbaa658=fs_1[_0xd71e56(0x1cc)][_0xd71e56(0x1a8)](_0x7de8b2);await(0x0,promises_2[_0xd71e56(0x1ad)])(_0x5bd7d9,utils_1['CryptoUtils'][_0xd71e56(0x1e4)](_0x184e1b),_0xbaa658);}async[a74_0x15edec(0x1e9)](_0x1350cc,_0x53afaa){const _0x29d1c9=a74_0x15edec,_0x3e5a16=fs_1[_0x29d1c9(0x1cc)][_0x29d1c9(0x1a7)](_0x1350cc),_0x4e820f=await this[_0x29d1c9(0x1cd)](_0x3e5a16),_0x5ec054=utils_1[_0x29d1c9(0x1b3)][_0x29d1c9(0x1ae)](_0x53afaa,_0x4e820f);return(0x0,stream_1['pipeline'])(_0x3e5a16,_0x5ec054,this['pipelineCallback'][_0x29d1c9(0x1ba)](this,_0x1350cc));}async[a74_0x15edec(0x1a2)](_0x49e065,_0x1d0026){_0x1d0026&&await this['handleError'](_0x49e065,_0x1d0026);}async[a74_0x15edec(0x1b4)](_0x4e8e21,_0x1a0ff9){const _0x450c10=a74_0x15edec;_0x4e8e21&&await utils_1[_0x450c10(0x1c4)][_0x450c10(0x1c9)](_0x4e8e21)&&await(0x0,promises_1['rm'])(_0x4e8e21)[_0x450c10(0x1de)](_0x5b52d1=>job_detail_1['systemLogger'][_0x450c10(0x1e5)](_0x5b52d1)),this[_0x450c10(0x1b5)](_0x1a0ff9);}async[a74_0x15edec(0x1cd)](_0x3e3776){return new Promise((_0x3918d5,_0x6cc5ab)=>{const _0x52f8cf=a74_0x3ff6;_0x3e3776['once']('error',_0x6cc5ab),_0x3e3776[_0x52f8cf(0x1a5)]('readable',()=>{const _0x1d0231=_0x3e3776['read'](0x10);_0x3918d5(_0x1d0231);});});}[a74_0x15edec(0x1bc)](_0x38bb40,{header:_0x505dba,column:_0x470fcc}){const _0x156a01=a74_0x15edec;!this[_0x156a01(0x1ce)]&&(this['_fieldsTypes']=this[_0x156a01(0x1d9)][_0x156a01(0x1b1)][_0x156a01(0x1b0)]((_0x43275b,{name:_0x28fd4f,type:_0x3709c8})=>_0x43275b[_0x156a01(0x1df)](_0x28fd4f,_0x3709c8),new Map()));if(_0x505dba)return _0x38bb40;if(!_0x38bb40)return null;switch(this['_fieldsTypes']['get'](_0x470fcc)){case _0x156a01(0x1ca):return _0x38bb40['replace'](/\.\d{3}Z$/,_0x156a01(0x1b9));case'boolean':return _0x38bb40==='true';case _0x156a01(0x1c6):case _0x156a01(0x1dc):case'int':case'percent':return+_0x38bb40;default:return _0x38bb40;}}}exports[a74_0x15edec(0x1c2)]=BaseBulkRetrieve,BaseBulkRetrieve[a74_0x15edec(0x1af)]=0x1388;