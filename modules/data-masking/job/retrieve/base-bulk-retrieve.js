const a75_0x50cf56=a75_0x384a;(function(_0x112bcd,_0x2d82e0){const _0x483577=a75_0x384a,_0x2bdbe0=_0x112bcd();while(!![]){try{const _0x1cac18=parseInt(_0x483577(0x14c))/0x1*(parseInt(_0x483577(0x132))/0x2)+-parseInt(_0x483577(0x10f))/0x3*(parseInt(_0x483577(0x116))/0x4)+-parseInt(_0x483577(0x13b))/0x5+-parseInt(_0x483577(0x107))/0x6+-parseInt(_0x483577(0x10d))/0x7+parseInt(_0x483577(0x11b))/0x8*(parseInt(_0x483577(0x148))/0x9)+parseInt(_0x483577(0x139))/0xa*(parseInt(_0x483577(0x122))/0xb);if(_0x1cac18===_0x2d82e0)break;else _0x2bdbe0['push'](_0x2bdbe0['shift']());}catch(_0xa35814){_0x2bdbe0['push'](_0x2bdbe0['shift']());}}}(a75_0x5963,0xe7602));const a75_0x1174e0=(function(){let _0x2b0eaf=!![];return function(_0x1853ae,_0x3c70f9){const _0x52fd80=_0x2b0eaf?function(){if(_0x3c70f9){const _0x5c51bf=_0x3c70f9['apply'](_0x1853ae,arguments);return _0x3c70f9=null,_0x5c51bf;}}:function(){};return _0x2b0eaf=![],_0x52fd80;};}()),a75_0xcbb070=a75_0x1174e0(this,function(){const _0x394a67=a75_0x384a;return a75_0xcbb070['toString']()[_0x394a67(0x14b)](_0x394a67(0x13e))[_0x394a67(0x115)]()[_0x394a67(0x127)](a75_0xcbb070)[_0x394a67(0x14b)](_0x394a67(0x13e));});a75_0xcbb070();'use strict';function a75_0x384a(_0x42ae83,_0x49f0fe){const _0x45dfa5=a75_0x5963();return a75_0x384a=function(_0xcbb070,_0x1174e0){_0xcbb070=_0xcbb070-0x100;let _0x59638d=_0x45dfa5[_0xcbb070];return _0x59638d;},a75_0x384a(_0x42ae83,_0x49f0fe);}var __importDefault=this&&this[a75_0x50cf56(0x119)]||function(_0x10658d){const _0x4a860f=a75_0x50cf56;return _0x10658d&&_0x10658d[_0x4a860f(0x144)]?_0x10658d:{'default':_0x10658d};};Object[a75_0x50cf56(0x112)](exports,a75_0x50cf56(0x144),{'value':!![]}),exports[a75_0x50cf56(0x131)]=void 0x0;function a75_0x5963(){const _0x29d85a=['bind','reduce','isExistsPath','pull','data','13084848gltbJV','error','1007247wTJjzh','csvParser','createReader','defineProperty','true','csv-parse','toString','16MJrNmB','FsUtils','createWriteStream','__importDefault','replace','75872DEwETs','BaseRetrieve','pipeline','once','BulkV1QueryContentType','../job-detail','@flosum/utils','1023xlXuZO','default','handleError','baseRetrievePayload','stream/promises','constructor','boolean','castCsvValue','destroy','CryptoUtils','readable','execute','pipelineCallback','jobStorePath','double','BaseBulkRetrieve','2sXSqXV','./base-retrieve','createReadStream','int','get','.000+0000','writeEncryptedTempFile','490340EXqFfx','@flosum/salesforce','3049315iwgEFJ','end','currency','(((.+)+)+)+$','datetime','catch','retrieve','readEncryptedTempFile','fs/promises','__esModule','describe','crypto','fields','198ISbZsp','then','push','search','1014335WgDBJD','randomUUID','stream','path','TEXT_CSV','_read','_fieldsTypes','readEncryptionVector','resume','6079848cTuOif'];a75_0x5963=function(){return _0x29d85a;};return a75_0x5963();}const base_retrieve_1=require(a75_0x50cf56(0x133)),stream_1=require(a75_0x50cf56(0x100)),path_1=__importDefault(require(a75_0x50cf56(0x101))),utils_1=require(a75_0x50cf56(0x121)),promises_1=require(a75_0x50cf56(0x143)),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x50cf56(0x126)),crypto_1=require(a75_0x50cf56(0x146)),csv_parse_1=require(a75_0x50cf56(0x114)),salesforce_1=require(a75_0x50cf56(0x13a)),job_detail_1=require(a75_0x50cf56(0x120)),constants_1=require('../../constants');class BaseBulkRetrieve extends base_retrieve_1[a75_0x50cf56(0x11c)]{get[a75_0x50cf56(0x125)](){const _0x10e16c=a75_0x50cf56;return{'queryBuilder':this['queryBuilder'],'instance':this['request'],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1[_0x10e16c(0x11f)][_0x10e16c(0x102)]};}async[a75_0x50cf56(0x10b)](){const _0x58477d=a75_0x50cf56;var _0x5b6988,_0x1f53c0;if(this[_0x58477d(0x141)]['getIsDone']()&&!((_0x5b6988=this['csvParser'])===null||_0x5b6988===void 0x0?void 0x0:_0x5b6988['isPaused']())){this[_0x58477d(0x14a)](null);return;}if((_0x1f53c0=this[_0x58477d(0x110)])===null||_0x1f53c0===void 0x0?void 0x0:_0x1f53c0['isPaused']()){this[_0x58477d(0x110)][_0x58477d(0x106)]();return;}const _0x686f1f=await this[_0x58477d(0x141)][_0x58477d(0x12d)]();if(!_0x686f1f)return this[_0x58477d(0x10b)]();await this[_0x58477d(0x111)](_0x686f1f);}async[a75_0x50cf56(0x111)](_0x131c9f){const _0x1aea24=a75_0x50cf56,_0x4ce89c=path_1[_0x1aea24(0x123)]['join'](job_detail_1[_0x1aea24(0x12f)],(0x0,crypto_1[_0x1aea24(0x14d)])()),_0x5932f5=(0x0,crypto_1[_0x1aea24(0x14d)])(),_0x58fae8=await this[_0x1aea24(0x138)](_0x131c9f,_0x4ce89c,_0x5932f5)[_0x1aea24(0x149)](()=>this[_0x1aea24(0x142)](_0x4ce89c,_0x5932f5)),_0x30672d={'columns':!![],'cast':this[_0x1aea24(0x129)][_0x1aea24(0x108)](this)};this[_0x1aea24(0x110)]=(0x0,stream_1[_0x1aea24(0x11d)])(_0x58fae8,(0x0,csv_parse_1['parse'])(_0x30672d),this[_0x1aea24(0x12e)][_0x1aea24(0x108)](this,_0x4ce89c)),this[_0x1aea24(0x110)]['on'](_0x1aea24(0x10c),_0x1a8162=>{const _0x3d1600=_0x1aea24;this[_0x3d1600(0x110)]['pause'](),this[_0x3d1600(0x14a)](_0x1a8162);}),this[_0x1aea24(0x110)]['on'](_0x1aea24(0x13c),async()=>{const _0xa3541b=_0x1aea24;return await utils_1[_0xa3541b(0x117)][_0xa3541b(0x10a)](_0x4ce89c)&&await(0x0,promises_1['rm'])(_0x4ce89c)[_0xa3541b(0x140)](this['handleError'][_0xa3541b(0x108)](this,null)),this[_0xa3541b(0x103)]();}),this[_0x1aea24(0x110)]['on'](_0x1aea24(0x10e),this['pipelineCallback']['bind'](this,_0x4ce89c));}async['writeEncryptedTempFile'](_0x4ae534,_0x359269,_0x7ebb6c){const _0x3ce0ef=a75_0x50cf56,_0x6c711d=fs_1['default'][_0x3ce0ef(0x118)](_0x359269);await(0x0,promises_2[_0x3ce0ef(0x11d)])(_0x4ae534,utils_1[_0x3ce0ef(0x12b)]['createEncryptPipe'](_0x7ebb6c),_0x6c711d);}async[a75_0x50cf56(0x142)](_0x38309b,_0x5d5ce4){const _0x52aae8=a75_0x50cf56,_0x2cbecf=fs_1[_0x52aae8(0x123)][_0x52aae8(0x134)](_0x38309b),_0x448bfa=await this['readEncryptionVector'](_0x2cbecf),_0x3767fd=utils_1[_0x52aae8(0x12b)]['createDecryptPipe'](_0x5d5ce4,_0x448bfa);return(0x0,stream_1[_0x52aae8(0x11d)])(_0x2cbecf,_0x3767fd,this[_0x52aae8(0x12e)][_0x52aae8(0x108)](this,_0x38309b));}async[a75_0x50cf56(0x12e)](_0x2e30ed,_0x4103ec){const _0x20486d=a75_0x50cf56;_0x4103ec&&await this[_0x20486d(0x124)](_0x2e30ed,_0x4103ec);}async['handleError'](_0x42e434,_0x662b99){const _0x2e37f9=a75_0x50cf56;_0x42e434&&await utils_1[_0x2e37f9(0x117)]['isExistsPath'](_0x42e434)&&await(0x0,promises_1['rm'])(_0x42e434)['catch'](_0x33d18e=>job_detail_1['systemLogger'][_0x2e37f9(0x10e)](_0x33d18e)),this[_0x2e37f9(0x12a)](_0x662b99);}async[a75_0x50cf56(0x105)](_0x379671){return new Promise((_0x115002,_0x44b82d)=>{const _0x32b64c=a75_0x384a;_0x379671[_0x32b64c(0x11e)](_0x32b64c(0x10e),_0x44b82d),_0x379671[_0x32b64c(0x11e)](_0x32b64c(0x12c),()=>{const _0x85ff96=_0x379671['read'](0x10);_0x115002(_0x85ff96);});});}[a75_0x50cf56(0x129)](_0x54f797,{header:_0x300d72,column:_0x7a0d68}){const _0x279114=a75_0x50cf56;!this[_0x279114(0x104)]&&(this['_fieldsTypes']=this[_0x279114(0x145)][_0x279114(0x147)][_0x279114(0x109)]((_0xe7ba57,{name:_0x3c9152,type:_0x34ad36})=>_0xe7ba57['set'](_0x3c9152,_0x34ad36),new Map()));if(_0x300d72)return _0x54f797;if(!_0x54f797)return null;switch(this['_fieldsTypes'][_0x279114(0x136)](_0x7a0d68)){case _0x279114(0x13f):return _0x54f797[_0x279114(0x11a)](/\.\d{3}Z$/,_0x279114(0x137));case _0x279114(0x128):return _0x54f797===_0x279114(0x113);case _0x279114(0x13d):case _0x279114(0x130):case _0x279114(0x135):case'percent':return+_0x54f797;default:return _0x54f797;}}}exports[a75_0x50cf56(0x131)]=BaseBulkRetrieve,BaseBulkRetrieve['POLL_INTERVAL']=0x1388;