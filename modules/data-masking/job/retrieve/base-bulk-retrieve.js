const a75_0x11d508=a75_0x5316;(function(_0x860814,_0x56d448){const _0x167314=a75_0x5316,_0x19e660=_0x860814();while(!![]){try{const _0x31d425=-parseInt(_0x167314(0x17d))/0x1+-parseInt(_0x167314(0x183))/0x2*(parseInt(_0x167314(0x16c))/0x3)+parseInt(_0x167314(0x19e))/0x4*(parseInt(_0x167314(0x189))/0x5)+-parseInt(_0x167314(0x18a))/0x6+-parseInt(_0x167314(0x192))/0x7+parseInt(_0x167314(0x165))/0x8*(-parseInt(_0x167314(0x167))/0x9)+parseInt(_0x167314(0x153))/0xa;if(_0x31d425===_0x56d448)break;else _0x19e660['push'](_0x19e660['shift']());}catch(_0x13dd96){_0x19e660['push'](_0x19e660['shift']());}}}(a75_0x6a41,0x51ec1));const a75_0x123a3e=(function(){let _0x26b9c1=!![];return function(_0x10c113,_0x5d26b6){const _0x5a70e2=_0x26b9c1?function(){const _0x3b06c3=a75_0x5316;if(_0x5d26b6){const _0x2f2786=_0x5d26b6[_0x3b06c3(0x18d)](_0x10c113,arguments);return _0x5d26b6=null,_0x2f2786;}}:function(){};return _0x26b9c1=![],_0x5a70e2;};}()),a75_0x2ec8f6=a75_0x123a3e(this,function(){const _0x56bbf1=a75_0x5316;return a75_0x2ec8f6[_0x56bbf1(0x17b)]()[_0x56bbf1(0x15e)](_0x56bbf1(0x195))[_0x56bbf1(0x17b)]()[_0x56bbf1(0x194)](a75_0x2ec8f6)[_0x56bbf1(0x15e)](_0x56bbf1(0x195));});function a75_0x6a41(){const _0x5214b5=['path','handleError','default','../../constants','TEXT_CSV','6680fmWreA','percent','_fieldsTypes','17064140qTdvYR','createReadStream','isPaused','then','crypto','createDecryptPipe','SALESFORCE_API_VERSION','./base-retrieve','reduce','double','datetime','search','POLL_INTERVAL','bind','true','data','error','fs/promises','952336jTezrK','.000+0000','36SlbjMs','randomUUID','_read','CryptoUtils','once','855447sWUsJt','@flosum/utils','__esModule','pipeline','push','end','int','set','request','FsUtils','catch','isExistsPath','replace','readEncryptedTempFile','read','toString','csvParser','509692uPGeFw','writeEncryptedTempFile','retrieve','readable','../job-detail','getIsDone','2uAnwFR','join','systemLogger','baseRetrievePayload','__importDefault','describe','1205KZPTOs','233514uepeKB','defineProperty','pipelineCallback','apply','pause','fields','readEncryptionVector','parse','3243821FrgdTD','createReader','constructor','(((.+)+)+)+$','get','BaseBulkRetrieve','pull'];a75_0x6a41=function(){return _0x5214b5;};return a75_0x6a41();}a75_0x2ec8f6();'use strict';var __importDefault=this&&this[a75_0x11d508(0x187)]||function(_0x1c2a34){const _0x1a5d69=a75_0x11d508;return _0x1c2a34&&_0x1c2a34[_0x1a5d69(0x16e)]?_0x1c2a34:{'default':_0x1c2a34};};Object[a75_0x11d508(0x18b)](exports,a75_0x11d508(0x16e),{'value':!![]}),exports[a75_0x11d508(0x197)]=void 0x0;function a75_0x5316(_0x155727,_0xf0f7f4){const _0x4189fe=a75_0x6a41();return a75_0x5316=function(_0x2ec8f6,_0x123a3e){_0x2ec8f6=_0x2ec8f6-0x152;let _0x6a41f4=_0x4189fe[_0x2ec8f6];return _0x6a41f4;},a75_0x5316(_0x155727,_0xf0f7f4);}const base_retrieve_1=require(a75_0x11d508(0x15a)),stream_1=require('stream'),path_1=__importDefault(require(a75_0x11d508(0x199))),utils_1=require(a75_0x11d508(0x16d)),promises_1=require(a75_0x11d508(0x164)),fs_1=__importDefault(require('fs')),promises_2=require('stream/promises'),crypto_1=require(a75_0x11d508(0x157)),csv_parse_1=require('csv-parse'),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a75_0x11d508(0x181)),constants_1=require(a75_0x11d508(0x19c));class BaseBulkRetrieve extends base_retrieve_1['BaseRetrieve']{get[a75_0x11d508(0x186)](){const _0x5d05f8=a75_0x11d508;return{'queryBuilder':this['queryBuilder'],'instance':this[_0x5d05f8(0x174)],'api':constants_1[_0x5d05f8(0x159)],'contentType':salesforce_1['BulkV1QueryContentType'][_0x5d05f8(0x19d)]};}async[a75_0x11d508(0x198)](){const _0x1cf59c=a75_0x11d508;var _0x244d25,_0x5d7480;if(this[_0x1cf59c(0x17f)][_0x1cf59c(0x182)]()&&!((_0x244d25=this['csvParser'])===null||_0x244d25===void 0x0?void 0x0:_0x244d25['isPaused']())){this[_0x1cf59c(0x170)](null);return;}if((_0x5d7480=this[_0x1cf59c(0x17c)])===null||_0x5d7480===void 0x0?void 0x0:_0x5d7480[_0x1cf59c(0x155)]()){this[_0x1cf59c(0x17c)]['resume']();return;}const _0x48db9c=await this['retrieve']['execute']();if(!_0x48db9c)return this[_0x1cf59c(0x198)]();await this[_0x1cf59c(0x193)](_0x48db9c);}async[a75_0x11d508(0x193)](_0x5e7aae){const _0x3826eb=a75_0x11d508,_0x3a9061=path_1[_0x3826eb(0x19b)][_0x3826eb(0x184)](job_detail_1['jobStorePath'],(0x0,crypto_1[_0x3826eb(0x168)])()),_0xb27c17=(0x0,crypto_1[_0x3826eb(0x168)])(),_0x14f806=await this['writeEncryptedTempFile'](_0x5e7aae,_0x3a9061,_0xb27c17)[_0x3826eb(0x156)](()=>this[_0x3826eb(0x179)](_0x3a9061,_0xb27c17)),_0x3b806f={'columns':!![],'cast':this['castCsvValue']['bind'](this)};this[_0x3826eb(0x17c)]=(0x0,stream_1[_0x3826eb(0x16f)])(_0x14f806,(0x0,csv_parse_1[_0x3826eb(0x191)])(_0x3b806f),this['pipelineCallback'][_0x3826eb(0x160)](this,_0x3a9061)),this[_0x3826eb(0x17c)]['on'](_0x3826eb(0x162),_0x4bb822=>{const _0x3ed9df=_0x3826eb;this['csvParser'][_0x3ed9df(0x18e)](),this['push'](_0x4bb822);}),this['csvParser']['on'](_0x3826eb(0x171),async()=>{const _0x3fd833=_0x3826eb;return await utils_1[_0x3fd833(0x175)][_0x3fd833(0x177)](_0x3a9061)&&await(0x0,promises_1['rm'])(_0x3a9061)[_0x3fd833(0x176)](this[_0x3fd833(0x19a)]['bind'](this,null)),this[_0x3fd833(0x169)]();}),this['csvParser']['on'](_0x3826eb(0x163),this[_0x3826eb(0x18c)][_0x3826eb(0x160)](this,_0x3a9061));}async[a75_0x11d508(0x17e)](_0x5b75b2,_0x64f93a,_0x437772){const _0x43eadc=a75_0x11d508,_0x17367c=fs_1['default']['createWriteStream'](_0x64f93a);await(0x0,promises_2[_0x43eadc(0x16f)])(_0x5b75b2,utils_1[_0x43eadc(0x16a)]['createEncryptPipe'](_0x437772),_0x17367c);}async['readEncryptedTempFile'](_0x4ed347,_0x180da2){const _0x57e3d9=a75_0x11d508,_0x353626=fs_1[_0x57e3d9(0x19b)][_0x57e3d9(0x154)](_0x4ed347),_0x5a53ab=await this['readEncryptionVector'](_0x353626),_0x1b86cc=utils_1[_0x57e3d9(0x16a)][_0x57e3d9(0x158)](_0x180da2,_0x5a53ab);return(0x0,stream_1[_0x57e3d9(0x16f)])(_0x353626,_0x1b86cc,this[_0x57e3d9(0x18c)][_0x57e3d9(0x160)](this,_0x4ed347));}async['pipelineCallback'](_0x2496de,_0x3b3ffd){_0x3b3ffd&&await this['handleError'](_0x2496de,_0x3b3ffd);}async[a75_0x11d508(0x19a)](_0x13e560,_0x1716fb){const _0x25e64f=a75_0x11d508;_0x13e560&&await utils_1[_0x25e64f(0x175)][_0x25e64f(0x177)](_0x13e560)&&await(0x0,promises_1['rm'])(_0x13e560)['catch'](_0x46e493=>job_detail_1[_0x25e64f(0x185)][_0x25e64f(0x163)](_0x46e493)),this['destroy'](_0x1716fb);}async[a75_0x11d508(0x190)](_0x51882d){return new Promise((_0x576ef5,_0x662b6a)=>{const _0x54270a=a75_0x5316;_0x51882d[_0x54270a(0x16b)](_0x54270a(0x163),_0x662b6a),_0x51882d[_0x54270a(0x16b)](_0x54270a(0x180),()=>{const _0x3ee0ff=_0x54270a,_0x58a6d2=_0x51882d[_0x3ee0ff(0x17a)](0x10);_0x576ef5(_0x58a6d2);});});}['castCsvValue'](_0x38e7dc,{header:_0x47d2e8,column:_0x360f7f}){const _0x182fd6=a75_0x11d508;!this['_fieldsTypes']&&(this[_0x182fd6(0x152)]=this[_0x182fd6(0x188)][_0x182fd6(0x18f)][_0x182fd6(0x15b)]((_0x5f1f6b,{name:_0x3056ab,type:_0x21bc19})=>_0x5f1f6b[_0x182fd6(0x173)](_0x3056ab,_0x21bc19),new Map()));if(_0x47d2e8)return _0x38e7dc;if(!_0x38e7dc)return null;switch(this[_0x182fd6(0x152)][_0x182fd6(0x196)](_0x360f7f)){case _0x182fd6(0x15d):return _0x38e7dc[_0x182fd6(0x178)](/\.\d{3}Z$/,_0x182fd6(0x166));case'boolean':return _0x38e7dc===_0x182fd6(0x161);case'currency':case _0x182fd6(0x15c):case _0x182fd6(0x172):case _0x182fd6(0x19f):return+_0x38e7dc;default:return _0x38e7dc;}}}exports[a75_0x11d508(0x197)]=BaseBulkRetrieve,BaseBulkRetrieve[a75_0x11d508(0x15f)]=0x1388;