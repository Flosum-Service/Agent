const a74_0x16b004=a74_0x4c83;(function(_0x100c49,_0x475b61){const _0x2d96c5=a74_0x4c83,_0x2dffb3=_0x100c49();while(!![]){try{const _0x4178a8=parseInt(_0x2d96c5(0xa7))/0x1*(parseInt(_0x2d96c5(0xa3))/0x2)+parseInt(_0x2d96c5(0x9d))/0x3+parseInt(_0x2d96c5(0xc8))/0x4+-parseInt(_0x2d96c5(0xc4))/0x5+parseInt(_0x2d96c5(0xb0))/0x6+parseInt(_0x2d96c5(0xbc))/0x7*(parseInt(_0x2d96c5(0x94))/0x8)+-parseInt(_0x2d96c5(0xc2))/0x9;if(_0x4178a8===_0x475b61)break;else _0x2dffb3['push'](_0x2dffb3['shift']());}catch(_0x30ac9d){_0x2dffb3['push'](_0x2dffb3['shift']());}}}(a74_0x48cc,0xd0b5a));const a74_0x52a637=(function(){let _0x42cc33=!![];return function(_0x53138a,_0x40606b){const _0x5a73b2=_0x42cc33?function(){const _0x39bd98=a74_0x4c83;if(_0x40606b){const _0xcee1f=_0x40606b[_0x39bd98(0x91)](_0x53138a,arguments);return _0x40606b=null,_0xcee1f;}}:function(){};return _0x42cc33=![],_0x5a73b2;};}()),a74_0x300a95=a74_0x52a637(this,function(){const _0x47f861=a74_0x4c83;return a74_0x300a95[_0x47f861(0xa4)]()['search'](_0x47f861(0xa0))[_0x47f861(0xa4)]()[_0x47f861(0xac)](a74_0x300a95)['search'](_0x47f861(0xa0));});a74_0x300a95();'use strict';function a74_0x48cc(){const _0x4482fc=['castCsvValue','3561699XjqTDx','bind','__importDefault','(((.+)+)+)+$','CryptoUtils','replace','2861492oNcXwp','toString','pull','../job-detail','1aGbAOG','pipeline','stream/promises','push','isPaused','constructor','describe','writeEncryptedTempFile','pause','2293098mFdUhi','createReader','FsUtils','createReadStream','stream','_read','set','fields','createUnzip','retrieve','randomUUID','execute','1708vQVXwP','isExistsPath','true','createWriteStream','@flosum/utils','BaseBulkRetrieve','22647078aBzdoD','readEncryptedTempFile','6878315nsLsEf','data','csvParser','handleError','4918724VgcStG','boolean','readEncryptionVector','path','systemLogger','getIsDone','once','datetime','fs/promises','default','createDecryptPipe','int','_fieldsTypes','catch','apply','parse','BaseRetrieve','16952GPsLOH','zlib','.000+0000','POLL_INTERVAL','resume','error','pipelineCallback','__esModule'];a74_0x48cc=function(){return _0x4482fc;};return a74_0x48cc();}var __importDefault=this&&this[a74_0x16b004(0x9f)]||function(_0x449bc2){const _0x3fb55e=a74_0x16b004;return _0x449bc2&&_0x449bc2[_0x3fb55e(0x9b)]?_0x449bc2:{'default':_0x449bc2};};Object['defineProperty'](exports,a74_0x16b004(0x9b),{'value':!![]}),exports[a74_0x16b004(0xc1)]=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require(a74_0x16b004(0xb4)),path_1=__importDefault(require(a74_0x16b004(0x86))),utils_1=require(a74_0x16b004(0xc0)),promises_1=require(a74_0x16b004(0x8b)),fs_1=__importDefault(require('fs')),promises_2=require(a74_0x16b004(0xa9)),crypto_1=require('crypto'),csv_parse_1=require('csv-parse'),zlib_1=__importDefault(require(a74_0x16b004(0x95))),job_detail_1=require(a74_0x16b004(0xa6));class BaseBulkRetrieve extends base_retrieve_1[a74_0x16b004(0x93)]{async[a74_0x16b004(0xa5)](){const _0x174b91=a74_0x16b004;var _0x246132,_0x5444e4;if(this[_0x174b91(0xb9)][_0x174b91(0x88)]()&&!((_0x246132=this[_0x174b91(0xc6)])===null||_0x246132===void 0x0?void 0x0:_0x246132['isPaused']())){this[_0x174b91(0xaa)](null);return;}if((_0x5444e4=this[_0x174b91(0xc6)])===null||_0x5444e4===void 0x0?void 0x0:_0x5444e4[_0x174b91(0xab)]()){this[_0x174b91(0xc6)][_0x174b91(0x98)]();return;}const _0x360ba0=await this['retrieve'][_0x174b91(0xbb)]();if(!_0x360ba0)return this[_0x174b91(0xa5)]();await this[_0x174b91(0xb1)](_0x360ba0);}async[a74_0x16b004(0xb1)](_0x3592fa){const _0x1a37ab=a74_0x16b004,_0x3c183b=path_1[_0x1a37ab(0x8c)]['join'](job_detail_1['jobStorePath'],(0x0,crypto_1[_0x1a37ab(0xba)])()),_0x4776f6=(0x0,crypto_1[_0x1a37ab(0xba)])(),_0x74a17=await this['writeEncryptedTempFile'](_0x3592fa,_0x3c183b,_0x4776f6)['then'](()=>this[_0x1a37ab(0xc3)](_0x3c183b,_0x4776f6)),_0x371fbd={'columns':!![],'cast':this[_0x1a37ab(0x9c)][_0x1a37ab(0x9e)](this)};this[_0x1a37ab(0xc6)]=(0x0,stream_1[_0x1a37ab(0xa8)])(_0x74a17,zlib_1['default'][_0x1a37ab(0xb8)](),(0x0,csv_parse_1[_0x1a37ab(0x92)])(_0x371fbd),this['pipelineCallback']['bind'](this,_0x3c183b)),this['csvParser']['on'](_0x1a37ab(0xc5),_0x12bab8=>{const _0x1b2c26=_0x1a37ab;this[_0x1b2c26(0xc6)][_0x1b2c26(0xaf)](),this[_0x1b2c26(0xaa)](_0x12bab8);}),this[_0x1a37ab(0xc6)]['on']('end',async()=>{const _0x3e3f09=_0x1a37ab;return await utils_1[_0x3e3f09(0xb2)][_0x3e3f09(0xbd)](_0x3c183b)&&await(0x0,promises_1['rm'])(_0x3c183b)[_0x3e3f09(0x90)](this['handleError'][_0x3e3f09(0x9e)](this,null)),this[_0x3e3f09(0xb5)]();}),this['csvParser']['on'](_0x1a37ab(0x99),this[_0x1a37ab(0x9a)][_0x1a37ab(0x9e)](this,_0x3c183b));}async[a74_0x16b004(0xae)](_0x1cfd4e,_0x409795,_0x383d18){const _0x4b8669=a74_0x16b004,_0x34fab6=fs_1[_0x4b8669(0x8c)][_0x4b8669(0xbf)](_0x409795);await(0x0,promises_2[_0x4b8669(0xa8)])(_0x1cfd4e,utils_1[_0x4b8669(0xa1)]['createEncryptPipe'](_0x383d18),_0x34fab6);}async['readEncryptedTempFile'](_0x2b6cab,_0x5c6edb){const _0x2c35fc=a74_0x16b004,_0x220a76=fs_1['default'][_0x2c35fc(0xb3)](_0x2b6cab),_0x27deec=await this[_0x2c35fc(0x85)](_0x220a76),_0xabf5c8=utils_1[_0x2c35fc(0xa1)][_0x2c35fc(0x8d)](_0x5c6edb,_0x27deec);return(0x0,stream_1[_0x2c35fc(0xa8)])(_0x220a76,_0xabf5c8,this['pipelineCallback'][_0x2c35fc(0x9e)](this,_0x2b6cab));}async[a74_0x16b004(0x9a)](_0x5a842f,_0x2cd89e){_0x2cd89e&&await this['handleError'](_0x5a842f,_0x2cd89e);}async[a74_0x16b004(0xc7)](_0x418284,_0x1e5e12){const _0x5380c1=a74_0x16b004;_0x418284&&await utils_1[_0x5380c1(0xb2)]['isExistsPath'](_0x418284)&&await(0x0,promises_1['rm'])(_0x418284)['catch'](_0x70a67e=>job_detail_1[_0x5380c1(0x87)][_0x5380c1(0x99)](_0x70a67e)),this['destroy'](_0x1e5e12);}async[a74_0x16b004(0x85)](_0x25093b){return new Promise((_0x690a41,_0x4935c6)=>{const _0x21bd0c=a74_0x4c83;_0x25093b[_0x21bd0c(0x89)](_0x21bd0c(0x99),_0x4935c6),_0x25093b[_0x21bd0c(0x89)]('readable',()=>{const _0x2deb31=_0x25093b['read'](0x10);_0x690a41(_0x2deb31);});});}[a74_0x16b004(0x9c)](_0x249b3c,{header:_0x2df491,column:_0x31ecce}){const _0x64ae29=a74_0x16b004;!this[_0x64ae29(0x8f)]&&(this[_0x64ae29(0x8f)]=this[_0x64ae29(0xad)][_0x64ae29(0xb7)]['reduce']((_0x29586f,{name:_0x1164a7,type:_0x29f372})=>_0x29586f[_0x64ae29(0xb6)](_0x1164a7,_0x29f372),new Map()));if(_0x2df491)return _0x249b3c;if(!_0x249b3c)return null;switch(this[_0x64ae29(0x8f)]['get'](_0x31ecce)){case _0x64ae29(0x8a):return _0x249b3c[_0x64ae29(0xa2)](/\.\d{3}Z$/,_0x64ae29(0x96));case _0x64ae29(0xc9):return _0x249b3c===_0x64ae29(0xbe);case'currency':case'double':case _0x64ae29(0x8e):case'percent':return+_0x249b3c;default:return _0x249b3c;}}}function a74_0x4c83(_0x43d02e,_0x157a57){const _0x54939e=a74_0x48cc();return a74_0x4c83=function(_0x300a95,_0x52a637){_0x300a95=_0x300a95-0x85;let _0x48cccd=_0x54939e[_0x300a95];return _0x48cccd;},a74_0x4c83(_0x43d02e,_0x157a57);}exports[a74_0x16b004(0xc1)]=BaseBulkRetrieve,BaseBulkRetrieve[a74_0x16b004(0x97)]=0x1388;