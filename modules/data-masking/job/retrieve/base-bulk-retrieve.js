const a92_0x207254=a92_0x14e2;(function(_0x9af477,_0x34b577){const _0x2ef7d9=a92_0x14e2,_0x3fcd08=_0x9af477();while(!![]){try{const _0x3c0923=parseInt(_0x2ef7d9(0x20f))/0x1*(parseInt(_0x2ef7d9(0x1e1))/0x2)+parseInt(_0x2ef7d9(0x1e8))/0x3+-parseInt(_0x2ef7d9(0x1fa))/0x4*(parseInt(_0x2ef7d9(0x20e))/0x5)+parseInt(_0x2ef7d9(0x1dd))/0x6+parseInt(_0x2ef7d9(0x1e6))/0x7*(-parseInt(_0x2ef7d9(0x1e7))/0x8)+parseInt(_0x2ef7d9(0x1f3))/0x9*(parseInt(_0x2ef7d9(0x1fe))/0xa)+parseInt(_0x2ef7d9(0x1cc))/0xb*(-parseInt(_0x2ef7d9(0x1ff))/0xc);if(_0x3c0923===_0x34b577)break;else _0x3fcd08['push'](_0x3fcd08['shift']());}catch(_0x5abcf0){_0x3fcd08['push'](_0x3fcd08['shift']());}}}(a92_0x2d2e,0xf31db));const a92_0x5afad4=(function(){let _0x8543a0=!![];return function(_0x47ccd7,_0x56bf5c){const _0x50ba5a=_0x8543a0?function(){const _0x152e00=a92_0x14e2;if(_0x56bf5c){const _0x5e1b8=_0x56bf5c[_0x152e00(0x203)](_0x47ccd7,arguments);return _0x56bf5c=null,_0x5e1b8;}}:function(){};return _0x8543a0=![],_0x50ba5a;};}()),a92_0x47a507=a92_0x5afad4(this,function(){const _0x5f2215=a92_0x14e2;return a92_0x47a507[_0x5f2215(0x213)]()['search'](_0x5f2215(0x218))[_0x5f2215(0x213)]()[_0x5f2215(0x1cd)](a92_0x47a507)[_0x5f2215(0x20c)]('(((.+)+)+)+$');});a92_0x47a507();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x245eda){const _0xa88028=a92_0x14e2;return _0x245eda&&_0x245eda[_0xa88028(0x1ce)]?_0x245eda:{'default':_0x245eda};};function a92_0x14e2(_0x213908,_0x329a01){const _0x4b95af=a92_0x2d2e();return a92_0x14e2=function(_0x47a507,_0x5afad4){_0x47a507=_0x47a507-0x1c6;let _0x2d2e0d=_0x4b95af[_0x47a507];return _0x2d2e0d;},a92_0x14e2(_0x213908,_0x329a01);}Object[a92_0x207254(0x217)](exports,a92_0x207254(0x1ce),{'value':!![]}),exports[a92_0x207254(0x1d3)]=void 0x0;const base_retrieve_1=require(a92_0x207254(0x1df)),stream_1=require(a92_0x207254(0x1d9)),path_1=__importDefault(require(a92_0x207254(0x1ef))),utils_1=require(a92_0x207254(0x1f0)),promises_1=require(a92_0x207254(0x1c6)),fs_1=__importDefault(require('fs')),promises_2=require(a92_0x207254(0x1f9)),crypto_1=require(a92_0x207254(0x1eb)),csv_parse_1=require(a92_0x207254(0x202)),salesforce_1=require(a92_0x207254(0x1e4)),job_detail_1=require(a92_0x207254(0x1f4)),constants_1=require(a92_0x207254(0x1d6));class BaseBulkRetrieve extends base_retrieve_1[a92_0x207254(0x200)]{get['baseRetrievePayload'](){const _0x1c928f=a92_0x207254;return{'queryBuilder':this[_0x1c928f(0x1da)],'instance':this[_0x1c928f(0x1d4)],'api':constants_1[_0x1c928f(0x1d0)],'contentType':salesforce_1[_0x1c928f(0x1ed)]['TEXT_CSV']};}async[a92_0x207254(0x1ee)](){const _0xa9029=a92_0x207254;var _0x1eacfc,_0x56e8ad;if(this[_0xa9029(0x1e3)]['getIsDone']()&&!((_0x1eacfc=this[_0xa9029(0x1ca)])===null||_0x1eacfc===void 0x0?void 0x0:_0x1eacfc[_0xa9029(0x1fc)]())){this[_0xa9029(0x1dc)](null);return;}if((_0x56e8ad=this['csvParser'])===null||_0x56e8ad===void 0x0?void 0x0:_0x56e8ad[_0xa9029(0x1fc)]()){this[_0xa9029(0x1ca)][_0xa9029(0x207)]();return;}const _0xcc21d4=await this[_0xa9029(0x1e3)][_0xa9029(0x21c)]();if(!_0xcc21d4)return this[_0xa9029(0x1ee)]();await this['createReader'](_0xcc21d4);}async[a92_0x207254(0x1f5)](_0x236767){const _0x112962=a92_0x207254,_0x495dc4=path_1[_0x112962(0x215)][_0x112962(0x1f1)](job_detail_1[_0x112962(0x21a)],(0x0,crypto_1['randomUUID'])()),_0x418ae6=(0x0,crypto_1[_0x112962(0x1f6)])(),_0x5bb1d8=await this[_0x112962(0x1c7)](_0x236767,_0x495dc4,_0x418ae6)[_0x112962(0x208)](()=>this['readEncryptedTempFile'](_0x495dc4,_0x418ae6)),_0x3b316c={'columns':!![],'cast':this[_0x112962(0x212)][_0x112962(0x211)](this)};this[_0x112962(0x1ca)]=(0x0,stream_1['pipeline'])(_0x5bb1d8,(0x0,csv_parse_1[_0x112962(0x1cb)])(_0x3b316c),this[_0x112962(0x209)]['bind'](this,_0x495dc4)),this['csvParser']['on'](_0x112962(0x205),_0x2825aa=>{const _0x24864d=_0x112962;this[_0x24864d(0x1ca)][_0x24864d(0x201)](),this[_0x24864d(0x1dc)](_0x2825aa);}),this[_0x112962(0x1ca)]['on'](_0x112962(0x1d8),async()=>{const _0x2bc9db=_0x112962;return await utils_1['FsUtils']['isExistsPath'](_0x495dc4)&&await(0x0,promises_1['rm'])(_0x495dc4)['catch'](this[_0x2bc9db(0x1f2)][_0x2bc9db(0x211)](this,null)),this['_read']();}),this[_0x112962(0x1ca)]['on'](_0x112962(0x1e5),this[_0x112962(0x209)][_0x112962(0x211)](this,_0x495dc4));}async['writeEncryptedTempFile'](_0x3f2bc4,_0x1a85bd,_0x42ddf5){const _0x278a24=a92_0x207254,_0x492934=fs_1['default'][_0x278a24(0x214)](_0x1a85bd);await(0x0,promises_2[_0x278a24(0x1fb)])(_0x3f2bc4,utils_1[_0x278a24(0x1fd)][_0x278a24(0x1c9)](_0x42ddf5),_0x492934);}async['readEncryptedTempFile'](_0x209f26,_0x524e17){const _0x5e9e25=a92_0x207254,_0xa55790=fs_1['default'][_0x5e9e25(0x204)](_0x209f26),_0x5e289d=await this[_0x5e9e25(0x20d)](_0xa55790),_0x4af0a1=utils_1[_0x5e9e25(0x1fd)][_0x5e9e25(0x1e2)](_0x524e17,_0x5e289d);return(0x0,stream_1[_0x5e9e25(0x1fb)])(_0xa55790,_0x4af0a1,this['pipelineCallback']['bind'](this,_0x209f26));}async[a92_0x207254(0x209)](_0x40b5d8,_0x156b4e){const _0x2dd195=a92_0x207254;_0x156b4e&&await this[_0x2dd195(0x1f2)](_0x40b5d8,_0x156b4e);}async[a92_0x207254(0x1f2)](_0x4b18bd,_0x48b4f0){const _0x3a5274=a92_0x207254;_0x4b18bd&&await utils_1['FsUtils'][_0x3a5274(0x1ea)](_0x4b18bd)&&await(0x0,promises_1['rm'])(_0x4b18bd)['catch'](_0x198735=>job_detail_1[_0x3a5274(0x1e9)][_0x3a5274(0x1e5)](_0x198735)),this[_0x3a5274(0x21b)](_0x48b4f0);}async[a92_0x207254(0x20d)](_0x3e9cd1){return new Promise((_0x3ad1da,_0x28d7eb)=>{const _0x45472f=a92_0x14e2;_0x3e9cd1[_0x45472f(0x1c8)]('error',_0x28d7eb),_0x3e9cd1[_0x45472f(0x1c8)](_0x45472f(0x216),()=>{const _0x508571=_0x45472f,_0x3746ee=_0x3e9cd1[_0x508571(0x219)](0x10);_0x3ad1da(_0x3746ee);});});}[a92_0x207254(0x212)](_0x1622cd,{header:_0x196712,column:_0x5029d6}){const _0xf1a682=a92_0x207254;!this[_0xf1a682(0x1ec)]&&(this[_0xf1a682(0x1ec)]=this[_0xf1a682(0x20b)]['fields'][_0xf1a682(0x210)]((_0x183fe4,{name:_0x3d77ef,type:_0x4d22de})=>_0x183fe4[_0xf1a682(0x1d7)](_0x3d77ef,_0x4d22de),new Map()));if(_0x196712)return _0x1622cd;if(!_0x1622cd)return null;switch(this[_0xf1a682(0x1ec)][_0xf1a682(0x1f7)](_0x5029d6)){case _0xf1a682(0x20a):return _0x1622cd[_0xf1a682(0x1de)](/\.\d{3}Z$/,_0xf1a682(0x1d2));case _0xf1a682(0x1f8):return _0x1622cd===_0xf1a682(0x206);case _0xf1a682(0x1d5):case _0xf1a682(0x1e0):case _0xf1a682(0x1cf):case _0xf1a682(0x1db):return+_0x1622cd;default:return _0x1622cd;}}}function a92_0x2d2e(){const _0x700018=['double','2246478vvXKFB','createDecryptPipe','retrieve','@flosum/salesforce','error','7OjrvRN','15203432DuDiNk','1115325hWGZBm','systemLogger','isExistsPath','crypto','_fieldsTypes','BulkV1QueryContentType','pull','path','@flosum/utils','join','handleError','6473655Airnbo','../job-detail','createReader','randomUUID','get','boolean','stream/promises','4YSApqb','pipeline','isPaused','CryptoUtils','10HQDltl','300kHFGRz','BaseRetrieve','pause','csv-parse','apply','createReadStream','data','true','resume','then','pipelineCallback','datetime','describe','search','readEncryptionVector','1008880ywKTud','1NDoGAO','reduce','bind','castCsvValue','toString','createWriteStream','default','readable','defineProperty','(((.+)+)+)+$','read','jobStorePath','destroy','execute','fs/promises','writeEncryptedTempFile','once','createEncryptPipe','csvParser','parse','342573NHclmp','constructor','__esModule','int','SALESFORCE_API_VERSION','POLL_INTERVAL','.000+0000','BaseBulkRetrieve','request','currency','../../constants','set','end','stream','queryBuilder','percent','push','9973644envOeO','replace','./base-retrieve'];a92_0x2d2e=function(){return _0x700018;};return a92_0x2d2e();}exports[a92_0x207254(0x1d3)]=BaseBulkRetrieve,BaseBulkRetrieve[a92_0x207254(0x1d1)]=0x1388;