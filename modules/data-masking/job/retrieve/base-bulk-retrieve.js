const a75_0x245700=a75_0x8644;(function(_0x15a728,_0x483b07){const _0x181ba5=a75_0x8644,_0x28a87c=_0x15a728();while(!![]){try{const _0x31ca85=parseInt(_0x181ba5(0x111))/0x1*(parseInt(_0x181ba5(0x124))/0x2)+parseInt(_0x181ba5(0x13c))/0x3*(-parseInt(_0x181ba5(0x145))/0x4)+-parseInt(_0x181ba5(0x148))/0x5+-parseInt(_0x181ba5(0x14e))/0x6*(-parseInt(_0x181ba5(0x13b))/0x7)+parseInt(_0x181ba5(0x13f))/0x8+-parseInt(_0x181ba5(0x14b))/0x9+parseInt(_0x181ba5(0x149))/0xa;if(_0x31ca85===_0x483b07)break;else _0x28a87c['push'](_0x28a87c['shift']());}catch(_0x3b1363){_0x28a87c['push'](_0x28a87c['shift']());}}}(a75_0x5d86,0xc196f));const a75_0x26e037=(function(){let _0xf26caf=!![];return function(_0x158b9b,_0x107ced){const _0x47611f=_0xf26caf?function(){const _0x4ad4f3=a75_0x8644;if(_0x107ced){const _0x4470f1=_0x107ced[_0x4ad4f3(0x151)](_0x158b9b,arguments);return _0x107ced=null,_0x4470f1;}}:function(){};return _0xf26caf=![],_0x47611f;};}()),a75_0x2ad16f=a75_0x26e037(this,function(){const _0x2fb0d8=a75_0x8644;return a75_0x2ad16f[_0x2fb0d8(0x120)]()[_0x2fb0d8(0x140)]('(((.+)+)+)+$')[_0x2fb0d8(0x120)]()[_0x2fb0d8(0x133)](a75_0x2ad16f)[_0x2fb0d8(0x140)]('(((.+)+)+)+$');});a75_0x2ad16f();'use strict';var __importDefault=this&&this[a75_0x245700(0x118)]||function(_0x1696bc){const _0x3a3173=a75_0x245700;return _0x1696bc&&_0x1696bc[_0x3a3173(0x114)]?_0x1696bc:{'default':_0x1696bc};};Object['defineProperty'](exports,a75_0x245700(0x114),{'value':!![]}),exports[a75_0x245700(0x132)]=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require('stream'),path_1=__importDefault(require('path')),utils_1=require(a75_0x245700(0x12d)),promises_1=require(a75_0x245700(0x131)),fs_1=__importDefault(require('fs')),promises_2=require('stream/promises'),crypto_1=require(a75_0x245700(0x153)),csv_parse_1=require(a75_0x245700(0x119)),zlib_1=__importDefault(require('zlib')),job_detail_1=require('../job-detail');class BaseBulkRetrieve extends base_retrieve_1['BaseRetrieve']{async[a75_0x245700(0x143)](){const _0x5d8ff7=a75_0x245700;var _0x2df9f4,_0x5c1ab8;if(this['retrieve'][_0x5d8ff7(0x12a)]()&&!((_0x2df9f4=this['csvParser'])===null||_0x2df9f4===void 0x0?void 0x0:_0x2df9f4['isPaused']())){this[_0x5d8ff7(0x14d)](null);return;}if((_0x5c1ab8=this[_0x5d8ff7(0x137)])===null||_0x5c1ab8===void 0x0?void 0x0:_0x5c1ab8[_0x5d8ff7(0x147)]()){this[_0x5d8ff7(0x137)]['resume']();return;}const _0x4c147c=await this[_0x5d8ff7(0x11d)]['execute']();if(!_0x4c147c)return this[_0x5d8ff7(0x143)]();await this[_0x5d8ff7(0x136)](_0x4c147c);}async[a75_0x245700(0x136)](_0x534b77){const _0x53b926=a75_0x245700,_0x34217d=path_1[_0x53b926(0x144)][_0x53b926(0x128)](job_detail_1['jobStorePath'],(0x0,crypto_1[_0x53b926(0x12c)])()),_0x5de59f=(0x0,crypto_1[_0x53b926(0x12c)])(),_0x32211d=await this['writeEncryptedTempFile'](_0x534b77,_0x34217d,_0x5de59f)[_0x53b926(0x125)](()=>this['readEncryptedTempFile'](_0x34217d,_0x5de59f)),_0x1de902={'columns':!![],'cast':this['castCsvValue'][_0x53b926(0x12f)](this)};this[_0x53b926(0x137)]=(0x0,stream_1[_0x53b926(0x129)])(_0x32211d,zlib_1[_0x53b926(0x144)][_0x53b926(0x154)](),(0x0,csv_parse_1[_0x53b926(0x112)])(_0x1de902),this[_0x53b926(0x14a)]['bind'](this,_0x34217d)),this['csvParser']['on']('data',_0xf43589=>{const _0xaade54=_0x53b926;this[_0xaade54(0x137)][_0xaade54(0x139)](),this[_0xaade54(0x14d)](_0xf43589);}),this[_0x53b926(0x137)]['on'](_0x53b926(0x123),async()=>{const _0x59a45d=_0x53b926;return await utils_1[_0x59a45d(0x11e)][_0x59a45d(0x12e)](_0x34217d)&&await(0x0,promises_1['rm'])(_0x34217d)[_0x59a45d(0x113)](this[_0x59a45d(0x138)][_0x59a45d(0x12f)](this,null)),this[_0x59a45d(0x141)]();}),this['csvParser']['on'](_0x53b926(0x121),this[_0x53b926(0x14a)][_0x53b926(0x12f)](this,_0x34217d));}async[a75_0x245700(0x13a)](_0x5c55f2,_0x572ef9,_0x411261){const _0x224715=a75_0x245700,_0x5029d1=fs_1[_0x224715(0x144)]['createWriteStream'](_0x572ef9);await(0x0,promises_2[_0x224715(0x129)])(_0x5c55f2,utils_1['CryptoUtils'][_0x224715(0x142)](_0x411261),_0x5029d1);}async[a75_0x245700(0x14c)](_0x42f492,_0x49aec3){const _0x4c0fde=a75_0x245700,_0x1f55f3=fs_1['default']['createReadStream'](_0x42f492),_0x4a46d8=await this[_0x4c0fde(0x130)](_0x1f55f3),_0x212a65=utils_1[_0x4c0fde(0x115)]['createDecryptPipe'](_0x49aec3,_0x4a46d8);return(0x0,stream_1[_0x4c0fde(0x129)])(_0x1f55f3,_0x212a65,this['pipelineCallback']['bind'](this,_0x42f492));}async['pipelineCallback'](_0x2b06d1,_0x180668){const _0x3447f9=a75_0x245700;_0x180668&&await this[_0x3447f9(0x138)](_0x2b06d1,_0x180668);}async[a75_0x245700(0x138)](_0xe97a11,_0x50a0a8){const _0x3627bf=a75_0x245700;_0xe97a11&&await utils_1['FsUtils'][_0x3627bf(0x12e)](_0xe97a11)&&await(0x0,promises_1['rm'])(_0xe97a11)[_0x3627bf(0x113)](_0xc8639=>job_detail_1[_0x3627bf(0x134)][_0x3627bf(0x121)](_0xc8639)),this[_0x3627bf(0x13e)](_0x50a0a8);}async[a75_0x245700(0x130)](_0x431a1d){return new Promise((_0x48be97,_0x43040a)=>{const _0x140566=a75_0x8644;_0x431a1d[_0x140566(0x135)]('error',_0x43040a),_0x431a1d[_0x140566(0x135)](_0x140566(0x126),()=>{const _0x2ee382=_0x140566,_0x4123f0=_0x431a1d[_0x2ee382(0x146)](0x10);_0x48be97(_0x4123f0);});});}[a75_0x245700(0x122)](_0x46b37d,{header:_0x524ff0,column:_0x19f30c}){const _0x1b7aab=a75_0x245700;!this['_fieldsTypes']&&(this[_0x1b7aab(0x127)]=this[_0x1b7aab(0x14f)]['fields'][_0x1b7aab(0x150)]((_0x54f6a6,{name:_0x4bff84,type:_0x2a7f5c})=>_0x54f6a6[_0x1b7aab(0x116)](_0x4bff84,_0x2a7f5c),new Map()));if(_0x524ff0)return _0x46b37d;if(!_0x46b37d)return null;switch(this[_0x1b7aab(0x127)]['get'](_0x19f30c)){case _0x1b7aab(0x13d):return _0x46b37d[_0x1b7aab(0x117)](/\.\d{3}Z$/,_0x1b7aab(0x12b));case _0x1b7aab(0x11a):return _0x46b37d===_0x1b7aab(0x11b);case _0x1b7aab(0x11f):case _0x1b7aab(0x11c):case _0x1b7aab(0x152):case _0x1b7aab(0x110):return+_0x46b37d;default:return _0x46b37d;}}}function a75_0x8644(_0x121fe8,_0x4d0720){const _0x58d960=a75_0x5d86();return a75_0x8644=function(_0x2ad16f,_0x26e037){_0x2ad16f=_0x2ad16f-0x110;let _0x5d86f5=_0x58d960[_0x2ad16f];return _0x5d86f5;},a75_0x8644(_0x121fe8,_0x4d0720);}exports['BaseBulkRetrieve']=BaseBulkRetrieve,BaseBulkRetrieve['POLL_INTERVAL']=0x1388;function a75_0x5d86(){const _0x39ff85=['readable','_fieldsTypes','join','pipeline','getIsDone','.000+0000','randomUUID','@flosum/utils','isExistsPath','bind','readEncryptionVector','fs/promises','BaseBulkRetrieve','constructor','systemLogger','once','createReader','csvParser','handleError','pause','writeEncryptedTempFile','1156834ibAJEi','2295alZuEe','datetime','destroy','9679688jahbsi','search','_read','createEncryptPipe','pull','default','2920zhcYie','read','isPaused','2698940TqlvAi','16363700JDgPTn','pipelineCallback','11397573pnmVAu','readEncryptedTempFile','push','6ZsLQXn','describe','reduce','apply','int','crypto','createUnzip','percent','679eEsWtX','parse','catch','__esModule','CryptoUtils','set','replace','__importDefault','csv-parse','boolean','true','double','retrieve','FsUtils','currency','toString','error','castCsvValue','end','430UNAACC','then'];a75_0x5d86=function(){return _0x39ff85;};return a75_0x5d86();}