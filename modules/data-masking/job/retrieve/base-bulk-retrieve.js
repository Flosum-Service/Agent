const a92_0xab84fb=a92_0x2480;function a92_0x2480(_0x17a34f,_0x1f4a47){const _0x120540=a92_0x4a94();return a92_0x2480=function(_0x2c62b5,_0x2870bf){_0x2c62b5=_0x2c62b5-0xfd;let _0x4a94c6=_0x120540[_0x2c62b5];return _0x4a94c6;},a92_0x2480(_0x17a34f,_0x1f4a47);}(function(_0x2eea67,_0x1c8de9){const _0x19a4f4=a92_0x2480,_0x4d2f38=_0x2eea67();while(!![]){try{const _0x249da7=parseInt(_0x19a4f4(0x11e))/0x1*(-parseInt(_0x19a4f4(0x11b))/0x2)+-parseInt(_0x19a4f4(0x145))/0x3+-parseInt(_0x19a4f4(0xfe))/0x4*(parseInt(_0x19a4f4(0x11a))/0x5)+parseInt(_0x19a4f4(0x110))/0x6+parseInt(_0x19a4f4(0x13c))/0x7+parseInt(_0x19a4f4(0x10f))/0x8*(-parseInt(_0x19a4f4(0x10d))/0x9)+parseInt(_0x19a4f4(0x128))/0xa;if(_0x249da7===_0x1c8de9)break;else _0x4d2f38['push'](_0x4d2f38['shift']());}catch(_0x521214){_0x4d2f38['push'](_0x4d2f38['shift']());}}}(a92_0x4a94,0xd7d4b));const a92_0x2870bf=(function(){let _0x3f2de3=!![];return function(_0xac66a,_0x2f38b5){const _0xa49e2=_0x3f2de3?function(){const _0x33bc43=a92_0x2480;if(_0x2f38b5){const _0x8ba43b=_0x2f38b5[_0x33bc43(0x126)](_0xac66a,arguments);return _0x2f38b5=null,_0x8ba43b;}}:function(){};return _0x3f2de3=![],_0xa49e2;};}()),a92_0x2c62b5=a92_0x2870bf(this,function(){const _0x208e42=a92_0x2480;return a92_0x2c62b5['toString']()[_0x208e42(0x114)](_0x208e42(0xfd))[_0x208e42(0xff)]()['constructor'](a92_0x2c62b5)[_0x208e42(0x114)]('(((.+)+)+)+$');});a92_0x2c62b5();'use strict';var __importDefault=this&&this[a92_0xab84fb(0x11d)]||function(_0x587751){const _0x3b7084=a92_0xab84fb;return _0x587751&&_0x587751[_0x3b7084(0x147)]?_0x587751:{'default':_0x587751};};Object['defineProperty'](exports,a92_0xab84fb(0x147),{'value':!![]}),exports[a92_0xab84fb(0x124)]=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require(a92_0xab84fb(0x101)),path_1=__importDefault(require('path')),utils_1=require(a92_0xab84fb(0x144)),promises_1=require(a92_0xab84fb(0x14a)),fs_1=__importDefault(require('fs')),promises_2=require('stream/promises'),crypto_1=require(a92_0xab84fb(0x139)),csv_parse_1=require(a92_0xab84fb(0x120)),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a92_0xab84fb(0x132)),constants_1=require(a92_0xab84fb(0x125));class BaseBulkRetrieve extends base_retrieve_1[a92_0xab84fb(0x127)]{get[a92_0xab84fb(0x10b)](){const _0x134887=a92_0xab84fb;return{'queryBuilder':this[_0x134887(0x107)],'instance':this[_0x134887(0x12e)],'api':constants_1[_0x134887(0x103)],'contentType':salesforce_1[_0x134887(0x136)]['TEXT_CSV']};}async[a92_0xab84fb(0x135)](){const _0x12506f=a92_0xab84fb;var _0x3dacc9,_0x4a9b1c;if(this[_0x12506f(0x121)]['getIsDone']()&&!((_0x3dacc9=this[_0x12506f(0x105)])===null||_0x3dacc9===void 0x0?void 0x0:_0x3dacc9[_0x12506f(0x13d)]())){this[_0x12506f(0x13e)](null);return;}if((_0x4a9b1c=this['csvParser'])===null||_0x4a9b1c===void 0x0?void 0x0:_0x4a9b1c['isPaused']()){this['csvParser'][_0x12506f(0x138)]();return;}const _0x386a92=await this[_0x12506f(0x121)][_0x12506f(0x13f)]();if(!_0x386a92)return this[_0x12506f(0x135)]();await this[_0x12506f(0x11c)](_0x386a92);}async[a92_0xab84fb(0x11c)](_0x40abbc){const _0x57ae9d=a92_0xab84fb,_0x518968=path_1[_0x57ae9d(0x134)][_0x57ae9d(0x10c)](job_detail_1[_0x57ae9d(0x12a)],(0x0,crypto_1[_0x57ae9d(0x100)])()),_0x143bf8=(0x0,crypto_1[_0x57ae9d(0x100)])(),_0x304be8=await this[_0x57ae9d(0x140)](_0x40abbc,_0x518968,_0x143bf8)[_0x57ae9d(0x118)](()=>this[_0x57ae9d(0x13a)](_0x518968,_0x143bf8)),_0x2ceef8={'columns':!![],'cast':this[_0x57ae9d(0x13b)][_0x57ae9d(0x111)](this)};this[_0x57ae9d(0x105)]=(0x0,stream_1[_0x57ae9d(0x119)])(_0x304be8,(0x0,csv_parse_1[_0x57ae9d(0x133)])(_0x2ceef8),this[_0x57ae9d(0x12f)][_0x57ae9d(0x111)](this,_0x518968)),this[_0x57ae9d(0x105)]['on'](_0x57ae9d(0x117),_0x33f723=>{const _0x236de7=_0x57ae9d;this[_0x236de7(0x105)][_0x236de7(0x148)](),this['push'](_0x33f723);}),this[_0x57ae9d(0x105)]['on'](_0x57ae9d(0x10a),async()=>{const _0x8860a8=_0x57ae9d;return await utils_1['FsUtils']['isExistsPath'](_0x518968)&&await(0x0,promises_1['rm'])(_0x518968)[_0x8860a8(0x12d)](this['handleError']['bind'](this,null)),this['_read']();}),this[_0x57ae9d(0x105)]['on'](_0x57ae9d(0x12c),this[_0x57ae9d(0x12f)][_0x57ae9d(0x111)](this,_0x518968));}async[a92_0xab84fb(0x140)](_0x23f66b,_0x367e7c,_0x58214c){const _0x5b4e4e=a92_0xab84fb,_0x960094=fs_1['default'][_0x5b4e4e(0x104)](_0x367e7c);await(0x0,promises_2[_0x5b4e4e(0x119)])(_0x23f66b,utils_1[_0x5b4e4e(0x12b)][_0x5b4e4e(0x142)](_0x58214c),_0x960094);}async[a92_0xab84fb(0x13a)](_0x5d302e,_0x4cd7e8){const _0x5e0f18=a92_0xab84fb,_0x42b597=fs_1[_0x5e0f18(0x134)][_0x5e0f18(0x112)](_0x5d302e),_0x483343=await this[_0x5e0f18(0x102)](_0x42b597),_0x32628e=utils_1[_0x5e0f18(0x12b)][_0x5e0f18(0x141)](_0x4cd7e8,_0x483343);return(0x0,stream_1[_0x5e0f18(0x119)])(_0x42b597,_0x32628e,this[_0x5e0f18(0x12f)][_0x5e0f18(0x111)](this,_0x5d302e));}async[a92_0xab84fb(0x12f)](_0x30715c,_0xafdc1c){const _0xded48f=a92_0xab84fb;_0xafdc1c&&await this[_0xded48f(0x137)](_0x30715c,_0xafdc1c);}async[a92_0xab84fb(0x137)](_0x48076c,_0xcdadc0){const _0x122544=a92_0xab84fb;_0x48076c&&await utils_1[_0x122544(0x115)][_0x122544(0x106)](_0x48076c)&&await(0x0,promises_1['rm'])(_0x48076c)[_0x122544(0x12d)](_0x529319=>job_detail_1[_0x122544(0x14b)][_0x122544(0x12c)](_0x529319)),this['destroy'](_0xcdadc0);}async['readEncryptionVector'](_0x2cee2c){return new Promise((_0x54e9c1,_0x97dee5)=>{const _0x29e5b6=a92_0x2480;_0x2cee2c[_0x29e5b6(0x113)]('error',_0x97dee5),_0x2cee2c[_0x29e5b6(0x113)](_0x29e5b6(0x146),()=>{const _0xdf5e82=_0x29e5b6,_0x1e7240=_0x2cee2c[_0xdf5e82(0x123)](0x10);_0x54e9c1(_0x1e7240);});});}['castCsvValue'](_0xadd988,{header:_0x1f6329,column:_0x3f0df5}){const _0x454b2d=a92_0xab84fb;!this[_0x454b2d(0x116)]&&(this[_0x454b2d(0x116)]=this[_0x454b2d(0x11f)][_0x454b2d(0x143)][_0x454b2d(0x130)]((_0x1c55ef,{name:_0x253cb3,type:_0x2c0b1b})=>_0x1c55ef['set'](_0x253cb3,_0x2c0b1b),new Map()));if(_0x1f6329)return _0xadd988;if(!_0xadd988)return null;switch(this['_fieldsTypes']['get'](_0x3f0df5)){case _0x454b2d(0x10e):return _0xadd988[_0x454b2d(0x108)](/\.\d{3}Z$/,_0x454b2d(0x149));case _0x454b2d(0x122):return _0xadd988===_0x454b2d(0x131);case'currency':case _0x454b2d(0x109):case'int':case'percent':return+_0xadd988;default:return _0xadd988;}}}function a92_0x4a94(){const _0x503643=['SALESFORCE_API_VERSION','createWriteStream','csvParser','isExistsPath','queryBuilder','replace','double','end','baseRetrievePayload','join','13468239uNGuZe','datetime','8uIUKtS','911418ujeVpr','bind','createReadStream','once','search','FsUtils','_fieldsTypes','data','then','pipeline','5JhuQML','1286yFlnFA','createReader','__importDefault','1283ZPDXGH','describe','csv-parse','retrieve','boolean','read','BaseBulkRetrieve','../../constants','apply','BaseRetrieve','24527210exOvzp','POLL_INTERVAL','jobStorePath','CryptoUtils','error','catch','request','pipelineCallback','reduce','true','../job-detail','parse','default','pull','BulkV1QueryContentType','handleError','resume','crypto','readEncryptedTempFile','castCsvValue','8090537qTFNTK','isPaused','push','execute','writeEncryptedTempFile','createDecryptPipe','createEncryptPipe','fields','@flosum/utils','635643ScQCxY','readable','__esModule','pause','.000+0000','fs/promises','systemLogger','(((.+)+)+)+$','1372204bNszdo','toString','randomUUID','stream','readEncryptionVector'];a92_0x4a94=function(){return _0x503643;};return a92_0x4a94();}exports['BaseBulkRetrieve']=BaseBulkRetrieve,BaseBulkRetrieve[a92_0xab84fb(0x129)]=0x1388;