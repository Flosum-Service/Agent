const a93_0x4c8f4a=a93_0xf93a;(function(_0x5c606a,_0x4981ee){const _0x1aae8a=a93_0xf93a,_0x16754f=_0x5c606a();while(!![]){try{const _0x50e633=parseInt(_0x1aae8a(0xaf))/0x1+-parseInt(_0x1aae8a(0xce))/0x2*(parseInt(_0x1aae8a(0xa3))/0x3)+parseInt(_0x1aae8a(0xae))/0x4*(parseInt(_0x1aae8a(0xb7))/0x5)+parseInt(_0x1aae8a(0xa4))/0x6*(parseInt(_0x1aae8a(0xbc))/0x7)+-parseInt(_0x1aae8a(0xf0))/0x8+-parseInt(_0x1aae8a(0xde))/0x9*(parseInt(_0x1aae8a(0xe7))/0xa)+-parseInt(_0x1aae8a(0xd4))/0xb;if(_0x50e633===_0x4981ee)break;else _0x16754f['push'](_0x16754f['shift']());}catch(_0xa1e3a9){_0x16754f['push'](_0x16754f['shift']());}}}(a93_0x17af,0x9dd38));const a93_0x1f4628=(function(){let _0xfc9b92=!![];return function(_0x3efc61,_0x16bde1){const _0xa2c49e=_0xfc9b92?function(){const _0xae5bb7=a93_0xf93a;if(_0x16bde1){const _0x20cd78=_0x16bde1[_0xae5bb7(0xd9)](_0x3efc61,arguments);return _0x16bde1=null,_0x20cd78;}}:function(){};return _0xfc9b92=![],_0xa2c49e;};}()),a93_0x5911d5=a93_0x1f4628(this,function(){const _0x51b596=a93_0xf93a;return a93_0x5911d5[_0x51b596(0xd2)]()[_0x51b596(0xad)]('(((.+)+)+)+$')[_0x51b596(0xd2)]()[_0x51b596(0xd7)](a93_0x5911d5)[_0x51b596(0xad)](_0x51b596(0xd6));});function a93_0xf93a(_0x22723d,_0x4e7ff1){const _0x37cb5f=a93_0x17af();return a93_0xf93a=function(_0x5911d5,_0x1f4628){_0x5911d5=_0x5911d5-0xa2;let _0x17af46=_0x37cb5f[_0x5911d5];return _0x17af46;},a93_0xf93a(_0x22723d,_0x4e7ff1);}a93_0x5911d5();'use strict';var __importDefault=this&&this[a93_0x4c8f4a(0xeb)]||function(_0x10caef){const _0x47a8bf=a93_0x4c8f4a;return _0x10caef&&_0x10caef[_0x47a8bf(0xc7)]?_0x10caef:{'default':_0x10caef};};Object[a93_0x4c8f4a(0xe4)](exports,'__esModule',{'value':!![]}),exports[a93_0x4c8f4a(0xb2)]=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require(a93_0x4c8f4a(0xcf)),path_1=__importDefault(require('path')),utils_1=require(a93_0x4c8f4a(0xc8)),promises_1=require(a93_0x4c8f4a(0xf2)),fs_1=__importDefault(require('fs')),promises_2=require(a93_0x4c8f4a(0xaa)),crypto_1=require(a93_0x4c8f4a(0xba)),csv_parse_1=require('csv-parse'),salesforce_1=require(a93_0x4c8f4a(0xb8)),job_detail_1=require(a93_0x4c8f4a(0xe5)),constants_1=require(a93_0x4c8f4a(0xac));class BaseBulkRetrieve extends base_retrieve_1[a93_0x4c8f4a(0xbf)]{get[a93_0x4c8f4a(0xed)](){const _0x2ff2e9=a93_0x4c8f4a;return{'queryBuilder':this[_0x2ff2e9(0xa2)],'instance':this[_0x2ff2e9(0xca)],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1[_0x2ff2e9(0xe2)][_0x2ff2e9(0xcc)]};}async['pull'](){const _0x2cdc6a=a93_0x4c8f4a;var _0x177255,_0x2fe045;if(this[_0x2cdc6a(0xe8)][_0x2cdc6a(0xb3)]()&&!((_0x177255=this[_0x2cdc6a(0xc1)])===null||_0x177255===void 0x0?void 0x0:_0x177255[_0x2cdc6a(0xc0)]())){this[_0x2cdc6a(0xc9)](null);return;}if((_0x2fe045=this[_0x2cdc6a(0xc1)])===null||_0x2fe045===void 0x0?void 0x0:_0x2fe045[_0x2cdc6a(0xc0)]()){this[_0x2cdc6a(0xc1)][_0x2cdc6a(0xb1)]();return;}const _0x2c42aa=await this[_0x2cdc6a(0xe8)]['execute']();if(!_0x2c42aa)return this[_0x2cdc6a(0xf5)]();await this[_0x2cdc6a(0xea)](_0x2c42aa);}async[a93_0x4c8f4a(0xea)](_0x50a7b8){const _0x357941=a93_0x4c8f4a,_0x31dfc4=path_1[_0x357941(0xa7)]['join'](job_detail_1[_0x357941(0xb6)],(0x0,crypto_1[_0x357941(0xcb)])()),_0x551837=(0x0,crypto_1[_0x357941(0xcb)])(),_0x554ecf=await this[_0x357941(0xd3)](_0x50a7b8,_0x31dfc4,_0x551837)['then'](()=>this['readEncryptedTempFile'](_0x31dfc4,_0x551837)),_0x3d4900={'columns':!![],'cast':this['castCsvValue']['bind'](this)};this[_0x357941(0xc1)]=(0x0,stream_1[_0x357941(0xf4)])(_0x554ecf,(0x0,csv_parse_1[_0x357941(0xa5)])(_0x3d4900),this[_0x357941(0xa9)][_0x357941(0xe0)](this,_0x31dfc4)),this[_0x357941(0xc1)]['on'](_0x357941(0xd0),_0x4aaccd=>{const _0x23a108=_0x357941;this[_0x23a108(0xc1)][_0x23a108(0xc5)](),this[_0x23a108(0xc9)](_0x4aaccd);}),this['csvParser']['on'](_0x357941(0xb4),async()=>{const _0x5b4028=_0x357941;return await utils_1[_0x5b4028(0xee)][_0x5b4028(0xf3)](_0x31dfc4)&&await(0x0,promises_1['rm'])(_0x31dfc4)[_0x5b4028(0xdc)](this[_0x5b4028(0xc4)]['bind'](this,null)),this[_0x5b4028(0xcd)]();}),this[_0x357941(0xc1)]['on'](_0x357941(0xf1),this[_0x357941(0xa9)][_0x357941(0xe0)](this,_0x31dfc4));}async[a93_0x4c8f4a(0xd3)](_0x3fc02f,_0x598b34,_0x4f2139){const _0x127dd5=a93_0x4c8f4a,_0x2c6510=fs_1['default'][_0x127dd5(0xdd)](_0x598b34);await(0x0,promises_2[_0x127dd5(0xf4)])(_0x3fc02f,utils_1[_0x127dd5(0xc2)]['createEncryptPipe'](_0x4f2139),_0x2c6510);}async[a93_0x4c8f4a(0xd1)](_0x567d91,_0x4df361){const _0x5972a5=a93_0x4c8f4a,_0x2401fe=fs_1[_0x5972a5(0xa7)][_0x5972a5(0xb9)](_0x567d91),_0x4c31bb=await this[_0x5972a5(0xab)](_0x2401fe),_0x270180=utils_1[_0x5972a5(0xc2)]['createDecryptPipe'](_0x4df361,_0x4c31bb);return(0x0,stream_1['pipeline'])(_0x2401fe,_0x270180,this[_0x5972a5(0xa9)]['bind'](this,_0x567d91));}async[a93_0x4c8f4a(0xa9)](_0xd6fd6,_0xf7f578){_0xf7f578&&await this['handleError'](_0xd6fd6,_0xf7f578);}async[a93_0x4c8f4a(0xc4)](_0x2b1966,_0x2d2093){const _0x24ed18=a93_0x4c8f4a;_0x2b1966&&await utils_1[_0x24ed18(0xee)][_0x24ed18(0xf3)](_0x2b1966)&&await(0x0,promises_1['rm'])(_0x2b1966)[_0x24ed18(0xdc)](_0x143fd2=>job_detail_1[_0x24ed18(0xa6)][_0x24ed18(0xf1)](_0x143fd2)),this[_0x24ed18(0xdf)](_0x2d2093);}async['readEncryptionVector'](_0xfedd0f){return new Promise((_0x4deacc,_0x4a30f7)=>{const _0x18516b=a93_0xf93a;_0xfedd0f[_0x18516b(0xbd)](_0x18516b(0xf1),_0x4a30f7),_0xfedd0f['once'](_0x18516b(0xd5),()=>{const _0x45de2d=_0x18516b,_0x1d67ba=_0xfedd0f[_0x45de2d(0xe9)](0x10);_0x4deacc(_0x1d67ba);});});}['castCsvValue'](_0x345c6d,{header:_0x3fc055,column:_0xbb6454}){const _0x47ada8=a93_0x4c8f4a;!this['_fieldsTypes']&&(this[_0x47ada8(0xbe)]=this[_0x47ada8(0xe3)][_0x47ada8(0xc6)][_0x47ada8(0xe6)]((_0x3add39,{name:_0x23d769,type:_0x1abc2b})=>_0x3add39[_0x47ada8(0xda)](_0x23d769,_0x1abc2b),new Map()));if(_0x3fc055)return _0x345c6d;if(!_0x345c6d)return null;switch(this[_0x47ada8(0xbe)][_0x47ada8(0xd8)](_0xbb6454)){case _0x47ada8(0xb5):return _0x345c6d[_0x47ada8(0xc3)](/\.\d{3}Z$/,_0x47ada8(0xec));case _0x47ada8(0xef):return _0x345c6d===_0x47ada8(0xdb);case _0x47ada8(0xb0):case'double':case _0x47ada8(0xe1):case _0x47ada8(0xbb):return+_0x345c6d;default:return _0x345c6d;}}}exports[a93_0x4c8f4a(0xb2)]=BaseBulkRetrieve,BaseBulkRetrieve[a93_0x4c8f4a(0xa8)]=0x1388;function a93_0x17af(){const _0x3e2662=['createReader','__importDefault','.000+0000','baseRetrievePayload','FsUtils','boolean','2966208cBeVmb','error','fs/promises','isExistsPath','pipeline','pull','queryBuilder','509727EzXImp','456RWfGIX','parse','systemLogger','default','POLL_INTERVAL','pipelineCallback','stream/promises','readEncryptionVector','../../constants','search','108AwDoVd','749416nrVhzm','currency','resume','BaseBulkRetrieve','getIsDone','end','datetime','jobStorePath','153030IAYdHZ','@flosum/salesforce','createReadStream','crypto','percent','83216ldxXfy','once','_fieldsTypes','BaseRetrieve','isPaused','csvParser','CryptoUtils','replace','handleError','pause','fields','__esModule','@flosum/utils','push','request','randomUUID','TEXT_CSV','_read','8fslJkN','stream','data','readEncryptedTempFile','toString','writeEncryptedTempFile','316074AUBHhR','readable','(((.+)+)+)+$','constructor','get','apply','set','true','catch','createWriteStream','18oKNGQA','destroy','bind','int','BulkV1QueryContentType','describe','defineProperty','../job-detail','reduce','3768320dWBYlh','retrieve','read'];a93_0x17af=function(){return _0x3e2662;};return a93_0x17af();}