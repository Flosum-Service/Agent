function a74_0x453a(_0x16ecb5,_0x16220b){const _0x40d6df=a74_0x1f23();return a74_0x453a=function(_0x4e7fc1,_0x267357){_0x4e7fc1=_0x4e7fc1-0x11b;let _0x1f23f6=_0x40d6df[_0x4e7fc1];return _0x1f23f6;},a74_0x453a(_0x16ecb5,_0x16220b);}const a74_0x39b337=a74_0x453a;(function(_0x167129,_0x2e85fd){const _0x55f61e=a74_0x453a,_0x1917e9=_0x167129();while(!![]){try{const _0x358ed4=-parseInt(_0x55f61e(0x11d))/0x1+-parseInt(_0x55f61e(0x154))/0x2+-parseInt(_0x55f61e(0x127))/0x3*(-parseInt(_0x55f61e(0x125))/0x4)+-parseInt(_0x55f61e(0x12d))/0x5*(-parseInt(_0x55f61e(0x15c))/0x6)+-parseInt(_0x55f61e(0x13d))/0x7+-parseInt(_0x55f61e(0x138))/0x8+parseInt(_0x55f61e(0x14c))/0x9;if(_0x358ed4===_0x2e85fd)break;else _0x1917e9['push'](_0x1917e9['shift']());}catch(_0x275871){_0x1917e9['push'](_0x1917e9['shift']());}}}(a74_0x1f23,0x98fc5));const a74_0x267357=(function(){let _0x86618f=!![];return function(_0x5918b6,_0x10ae7f){const _0x3a5ccb=_0x86618f?function(){if(_0x10ae7f){const _0x2e345f=_0x10ae7f['apply'](_0x5918b6,arguments);return _0x10ae7f=null,_0x2e345f;}}:function(){};return _0x86618f=![],_0x3a5ccb;};}()),a74_0x4e7fc1=a74_0x267357(this,function(){const _0x86539f=a74_0x453a;return a74_0x4e7fc1[_0x86539f(0x145)]()[_0x86539f(0x14f)](_0x86539f(0x156))['toString']()[_0x86539f(0x149)](a74_0x4e7fc1)[_0x86539f(0x14f)]('(((.+)+)+)+$');});a74_0x4e7fc1();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x53ce23){const _0x295367=a74_0x453a;return _0x53ce23&&_0x53ce23[_0x295367(0x126)]?_0x53ce23:{'default':_0x53ce23};};function a74_0x1f23(){const _0x5601b2=['handleError','getIsDone','84549aEpJWh','execute','path','true','push','systemLogger','readEncryptedTempFile','createWriteStream','16GxHcSm','__esModule','862266wPuFzR','CryptoUtils','resume','destroy','set','../job-detail','13625ZQETCD','stream','fields','error','pause','csv-parse','end','BaseBulkRetrieve','readable','once','retrieve','3408768fRSNVP','describe','.000+0000','default','csvParser','3614716JqEqCS','defineProperty','jobStorePath','stream/promises','bind','castCsvValue','isExistsPath','data','toString','POLL_INTERVAL','zlib','isPaused','constructor','parse','createUnzip','10380537YMOMEV','readEncryptionVector','createReader','search','FsUtils','createDecryptPipe','writeEncryptedTempFile','reduce','1364238kgKcDy','boolean','(((.+)+)+)+$','randomUUID','int','pull','crypto','double','72ExyFRt','pipelineCallback','_fieldsTypes','join'];a74_0x1f23=function(){return _0x5601b2;};return a74_0x1f23();}Object[a74_0x39b337(0x13e)](exports,a74_0x39b337(0x126),{'value':!![]}),exports[a74_0x39b337(0x134)]=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require(a74_0x39b337(0x12e)),path_1=__importDefault(require(a74_0x39b337(0x11f))),utils_1=require('@flosum/utils'),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require(a74_0x39b337(0x140)),crypto_1=require(a74_0x39b337(0x15a)),csv_parse_1=require(a74_0x39b337(0x132)),zlib_1=__importDefault(require(a74_0x39b337(0x147))),job_detail_1=require(a74_0x39b337(0x12c));class BaseBulkRetrieve extends base_retrieve_1['BaseRetrieve']{async[a74_0x39b337(0x159)](){const _0x480a96=a74_0x39b337;var _0x569479,_0x1c0469;if(this[_0x480a96(0x137)][_0x480a96(0x11c)]()&&!((_0x569479=this[_0x480a96(0x13c)])===null||_0x569479===void 0x0?void 0x0:_0x569479['isPaused']())){this[_0x480a96(0x121)](null);return;}if((_0x1c0469=this[_0x480a96(0x13c)])===null||_0x1c0469===void 0x0?void 0x0:_0x1c0469[_0x480a96(0x148)]()){this[_0x480a96(0x13c)][_0x480a96(0x129)]();return;}const _0x24a1ac=await this[_0x480a96(0x137)][_0x480a96(0x11e)]();if(!_0x24a1ac)return this[_0x480a96(0x159)]();await this[_0x480a96(0x14e)](_0x24a1ac);}async['createReader'](_0x450068){const _0x31ad7c=a74_0x39b337,_0x1086a3=path_1[_0x31ad7c(0x13b)][_0x31ad7c(0x15f)](job_detail_1[_0x31ad7c(0x13f)],(0x0,crypto_1[_0x31ad7c(0x157)])()),_0x22e20d=(0x0,crypto_1['randomUUID'])(),_0x122edc=await this[_0x31ad7c(0x152)](_0x450068,_0x1086a3,_0x22e20d)['then'](()=>this['readEncryptedTempFile'](_0x1086a3,_0x22e20d)),_0x4c0655={'columns':!![],'cast':this['castCsvValue'][_0x31ad7c(0x141)](this)};this[_0x31ad7c(0x13c)]=(0x0,stream_1['pipeline'])(_0x122edc,zlib_1['default'][_0x31ad7c(0x14b)](),(0x0,csv_parse_1[_0x31ad7c(0x14a)])(_0x4c0655),this[_0x31ad7c(0x15d)][_0x31ad7c(0x141)](this,_0x1086a3)),this[_0x31ad7c(0x13c)]['on'](_0x31ad7c(0x144),_0x5edc7b=>{const _0x596e8e=_0x31ad7c;this[_0x596e8e(0x13c)][_0x596e8e(0x131)](),this['push'](_0x5edc7b);}),this['csvParser']['on'](_0x31ad7c(0x133),async()=>{const _0x5ef783=_0x31ad7c;return await utils_1[_0x5ef783(0x150)][_0x5ef783(0x143)](_0x1086a3)&&await(0x0,promises_1['rm'])(_0x1086a3)['catch'](this[_0x5ef783(0x11b)][_0x5ef783(0x141)](this,null)),this['_read']();}),this[_0x31ad7c(0x13c)]['on'](_0x31ad7c(0x130),this[_0x31ad7c(0x15d)]['bind'](this,_0x1086a3));}async[a74_0x39b337(0x152)](_0x4c776c,_0x320df9,_0x5161e1){const _0x53080c=a74_0x39b337,_0x50929e=fs_1[_0x53080c(0x13b)][_0x53080c(0x124)](_0x320df9);await(0x0,promises_2['pipeline'])(_0x4c776c,utils_1[_0x53080c(0x128)]['createEncryptPipe'](_0x5161e1),_0x50929e);}async[a74_0x39b337(0x123)](_0x3f84ef,_0x3213ae){const _0x2c5e12=a74_0x39b337,_0xc42a67=fs_1['default']['createReadStream'](_0x3f84ef),_0x4faadf=await this[_0x2c5e12(0x14d)](_0xc42a67),_0x1c7f2a=utils_1['CryptoUtils'][_0x2c5e12(0x151)](_0x3213ae,_0x4faadf);return(0x0,stream_1['pipeline'])(_0xc42a67,_0x1c7f2a,this[_0x2c5e12(0x15d)][_0x2c5e12(0x141)](this,_0x3f84ef));}async[a74_0x39b337(0x15d)](_0x12774c,_0x4a585a){_0x4a585a&&await this['handleError'](_0x12774c,_0x4a585a);}async[a74_0x39b337(0x11b)](_0x4971f9,_0x59d4a6){const _0x108a26=a74_0x39b337;_0x4971f9&&await utils_1['FsUtils'][_0x108a26(0x143)](_0x4971f9)&&await(0x0,promises_1['rm'])(_0x4971f9)['catch'](_0x12b5a4=>job_detail_1[_0x108a26(0x122)][_0x108a26(0x130)](_0x12b5a4)),this[_0x108a26(0x12a)](_0x59d4a6);}async['readEncryptionVector'](_0x2419d1){return new Promise((_0x4cbffe,_0x53518)=>{const _0x391ee0=a74_0x453a;_0x2419d1[_0x391ee0(0x136)](_0x391ee0(0x130),_0x53518),_0x2419d1['once'](_0x391ee0(0x135),()=>{const _0x4dcb42=_0x2419d1['read'](0x10);_0x4cbffe(_0x4dcb42);});});}[a74_0x39b337(0x142)](_0x5c4f70,{header:_0x1dcc26,column:_0x1c35c0}){const _0x526a98=a74_0x39b337;!this[_0x526a98(0x15e)]&&(this[_0x526a98(0x15e)]=this[_0x526a98(0x139)][_0x526a98(0x12f)][_0x526a98(0x153)]((_0x5ad4ed,{name:_0x3b86ab,type:_0x55fabe})=>_0x5ad4ed[_0x526a98(0x12b)](_0x3b86ab,_0x55fabe),new Map()));if(_0x1dcc26)return _0x5c4f70;if(!_0x5c4f70)return null;switch(this[_0x526a98(0x15e)]['get'](_0x1c35c0)){case'datetime':return _0x5c4f70['replace'](/\.\d{3}Z$/,_0x526a98(0x13a));case _0x526a98(0x155):return _0x5c4f70===_0x526a98(0x120);case'currency':case _0x526a98(0x15b):case _0x526a98(0x158):case'percent':return+_0x5c4f70;default:return _0x5c4f70;}}}exports[a74_0x39b337(0x134)]=BaseBulkRetrieve,BaseBulkRetrieve[a74_0x39b337(0x146)]=0x1388;