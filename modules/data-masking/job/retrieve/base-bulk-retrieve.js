const a90_0x3b5ee7=a90_0x5f51;(function(_0x1ceba9,_0x549283){const _0x8bc454=a90_0x5f51,_0x5bef07=_0x1ceba9();while(!![]){try{const _0x102134=-parseInt(_0x8bc454(0x1fc))/0x1+parseInt(_0x8bc454(0x204))/0x2+parseInt(_0x8bc454(0x209))/0x3+-parseInt(_0x8bc454(0x1db))/0x4*(parseInt(_0x8bc454(0x217))/0x5)+parseInt(_0x8bc454(0x1ef))/0x6*(parseInt(_0x8bc454(0x20c))/0x7)+-parseInt(_0x8bc454(0x20d))/0x8+parseInt(_0x8bc454(0x1ed))/0x9*(-parseInt(_0x8bc454(0x1ea))/0xa);if(_0x102134===_0x549283)break;else _0x5bef07['push'](_0x5bef07['shift']());}catch(_0x464e82){_0x5bef07['push'](_0x5bef07['shift']());}}}(a90_0x2ca1,0x9e35e));const a90_0x447d8f=(function(){let _0x5ca40f=!![];return function(_0x31b233,_0x450259){const _0x27579a=_0x5ca40f?function(){if(_0x450259){const _0x387b77=_0x450259['apply'](_0x31b233,arguments);return _0x450259=null,_0x387b77;}}:function(){};return _0x5ca40f=![],_0x27579a;};}()),a90_0xbfd434=a90_0x447d8f(this,function(){const _0xfa5189=a90_0x5f51;return a90_0xbfd434[_0xfa5189(0x20a)]()[_0xfa5189(0x1e5)](_0xfa5189(0x1e1))[_0xfa5189(0x20a)]()['constructor'](a90_0xbfd434)['search'](_0xfa5189(0x1e1));});a90_0xbfd434();'use strict';var __importDefault=this&&this[a90_0x3b5ee7(0x1ff)]||function(_0x516a4b){const _0x296745=a90_0x3b5ee7;return _0x516a4b&&_0x516a4b[_0x296745(0x1f3)]?_0x516a4b:{'default':_0x516a4b};};Object[a90_0x3b5ee7(0x1e0)](exports,'__esModule',{'value':!![]}),exports['BaseBulkRetrieve']=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require('stream'),path_1=__importDefault(require(a90_0x3b5ee7(0x1fa))),utils_1=require(a90_0x3b5ee7(0x1f0)),promises_1=require(a90_0x3b5ee7(0x1e9)),fs_1=__importDefault(require('fs')),promises_2=require(a90_0x3b5ee7(0x20f)),crypto_1=require(a90_0x3b5ee7(0x208)),csv_parse_1=require(a90_0x3b5ee7(0x1de)),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a90_0x3b5ee7(0x1f5)),constants_1=require('../../constants');function a90_0x2ca1(){const _0x307080=['createWriteStream','pipeline','pipelineCallback','pull','writeEncryptedTempFile','TEXT_CSV','readEncryptionVector','4CLCKCg','parse','then','csv-parse','queryBuilder','defineProperty','(((.+)+)+)+$','castCsvValue','readEncryptedTempFile','systemLogger','search','percent','readable','SALESFORCE_API_VERSION','fs/promises','1742960mOcjYs','bind','isExistsPath','9FaSEoD','BaseBulkRetrieve','22014llUmej','@flosum/utils','destroy','BulkV1QueryContentType','__esModule','fields','../job-detail','once','push','createReadStream','error','path','get','398614nXgkGx','reduce','.000+0000','__importDefault','boolean','randomUUID','getIsDone','currency','94194CiAbkH','datetime','FsUtils','catch','crypto','3396876cUFQDj','toString','jobStorePath','630IDqMGo','1761080OqyrAw','handleError','stream/promises','replace','POLL_INTERVAL','int','createReader','data','pause','true','342620tbCTry','describe','BaseRetrieve','execute','createEncryptPipe','end','CryptoUtils','retrieve','double','default','_fieldsTypes','_read','csvParser'];a90_0x2ca1=function(){return _0x307080;};return a90_0x2ca1();}function a90_0x5f51(_0x589c80,_0xbb4147){const _0x34fc4b=a90_0x2ca1();return a90_0x5f51=function(_0xbfd434,_0x447d8f){_0xbfd434=_0xbfd434-0x1ca;let _0x2ca1dc=_0x34fc4b[_0xbfd434];return _0x2ca1dc;},a90_0x5f51(_0x589c80,_0xbb4147);}class BaseBulkRetrieve extends base_retrieve_1[a90_0x3b5ee7(0x219)]{get['baseRetrievePayload'](){const _0x3b8df9=a90_0x3b5ee7;return{'queryBuilder':this[_0x3b8df9(0x1df)],'instance':this['request'],'api':constants_1[_0x3b8df9(0x1e8)],'contentType':salesforce_1[_0x3b8df9(0x1f2)][_0x3b8df9(0x1d9)]};}async[a90_0x3b5ee7(0x1d7)](){const _0x4e8427=a90_0x3b5ee7;var _0xa793f7,_0x517422;if(this[_0x4e8427(0x1ce)][_0x4e8427(0x202)]()&&!((_0xa793f7=this['csvParser'])===null||_0xa793f7===void 0x0?void 0x0:_0xa793f7['isPaused']())){this['push'](null);return;}if((_0x517422=this['csvParser'])===null||_0x517422===void 0x0?void 0x0:_0x517422['isPaused']()){this[_0x4e8427(0x1d3)]['resume']();return;}const _0x1afb97=await this[_0x4e8427(0x1ce)][_0x4e8427(0x1ca)]();if(!_0x1afb97)return this[_0x4e8427(0x1d7)]();await this[_0x4e8427(0x213)](_0x1afb97);}async[a90_0x3b5ee7(0x213)](_0x5190ae){const _0x3fc751=a90_0x3b5ee7,_0x2933a4=path_1[_0x3fc751(0x1d0)]['join'](job_detail_1[_0x3fc751(0x20b)],(0x0,crypto_1[_0x3fc751(0x201)])()),_0x1cfd61=(0x0,crypto_1[_0x3fc751(0x201)])(),_0x5d1463=await this[_0x3fc751(0x1d8)](_0x5190ae,_0x2933a4,_0x1cfd61)[_0x3fc751(0x1dd)](()=>this[_0x3fc751(0x1e3)](_0x2933a4,_0x1cfd61)),_0x481389={'columns':!![],'cast':this['castCsvValue']['bind'](this)};this[_0x3fc751(0x1d3)]=(0x0,stream_1[_0x3fc751(0x1d5)])(_0x5d1463,(0x0,csv_parse_1[_0x3fc751(0x1dc)])(_0x481389),this[_0x3fc751(0x1d6)][_0x3fc751(0x1eb)](this,_0x2933a4)),this[_0x3fc751(0x1d3)]['on'](_0x3fc751(0x214),_0x10babc=>{const _0x133135=_0x3fc751;this[_0x133135(0x1d3)][_0x133135(0x215)](),this[_0x133135(0x1f7)](_0x10babc);}),this[_0x3fc751(0x1d3)]['on'](_0x3fc751(0x1cc),async()=>{const _0xbd4c7=_0x3fc751;return await utils_1[_0xbd4c7(0x206)][_0xbd4c7(0x1ec)](_0x2933a4)&&await(0x0,promises_1['rm'])(_0x2933a4)[_0xbd4c7(0x207)](this['handleError'][_0xbd4c7(0x1eb)](this,null)),this[_0xbd4c7(0x1d2)]();}),this[_0x3fc751(0x1d3)]['on'](_0x3fc751(0x1f9),this[_0x3fc751(0x1d6)][_0x3fc751(0x1eb)](this,_0x2933a4));}async[a90_0x3b5ee7(0x1d8)](_0x17cb01,_0x1924ce,_0x15b9cb){const _0x551a35=a90_0x3b5ee7,_0x12f2f9=fs_1[_0x551a35(0x1d0)][_0x551a35(0x1d4)](_0x1924ce);await(0x0,promises_2[_0x551a35(0x1d5)])(_0x17cb01,utils_1[_0x551a35(0x1cd)][_0x551a35(0x1cb)](_0x15b9cb),_0x12f2f9);}async[a90_0x3b5ee7(0x1e3)](_0x3b5716,_0x450a66){const _0x35111=a90_0x3b5ee7,_0x2f3f08=fs_1['default'][_0x35111(0x1f8)](_0x3b5716),_0x591ae4=await this['readEncryptionVector'](_0x2f3f08),_0x11d125=utils_1['CryptoUtils']['createDecryptPipe'](_0x450a66,_0x591ae4);return(0x0,stream_1[_0x35111(0x1d5)])(_0x2f3f08,_0x11d125,this[_0x35111(0x1d6)][_0x35111(0x1eb)](this,_0x3b5716));}async[a90_0x3b5ee7(0x1d6)](_0xa462cf,_0x1627a2){const _0x2a71f5=a90_0x3b5ee7;_0x1627a2&&await this[_0x2a71f5(0x20e)](_0xa462cf,_0x1627a2);}async[a90_0x3b5ee7(0x20e)](_0x2d90db,_0x55f2c5){const _0x3254f8=a90_0x3b5ee7;_0x2d90db&&await utils_1[_0x3254f8(0x206)][_0x3254f8(0x1ec)](_0x2d90db)&&await(0x0,promises_1['rm'])(_0x2d90db)[_0x3254f8(0x207)](_0x35077b=>job_detail_1[_0x3254f8(0x1e4)][_0x3254f8(0x1f9)](_0x35077b)),this[_0x3254f8(0x1f1)](_0x55f2c5);}async[a90_0x3b5ee7(0x1da)](_0x394582){return new Promise((_0x40cccd,_0x4d1af6)=>{const _0x49da5f=a90_0x5f51;_0x394582[_0x49da5f(0x1f6)](_0x49da5f(0x1f9),_0x4d1af6),_0x394582[_0x49da5f(0x1f6)](_0x49da5f(0x1e7),()=>{const _0x41d1a8=_0x394582['read'](0x10);_0x40cccd(_0x41d1a8);});});}[a90_0x3b5ee7(0x1e2)](_0x3f70ea,{header:_0x223b20,column:_0x14303d}){const _0x189e76=a90_0x3b5ee7;!this['_fieldsTypes']&&(this[_0x189e76(0x1d1)]=this[_0x189e76(0x218)][_0x189e76(0x1f4)][_0x189e76(0x1fd)]((_0x4a60e1,{name:_0x1b9d17,type:_0x18bd9b})=>_0x4a60e1['set'](_0x1b9d17,_0x18bd9b),new Map()));if(_0x223b20)return _0x3f70ea;if(!_0x3f70ea)return null;switch(this['_fieldsTypes'][_0x189e76(0x1fb)](_0x14303d)){case _0x189e76(0x205):return _0x3f70ea[_0x189e76(0x210)](/\.\d{3}Z$/,_0x189e76(0x1fe));case _0x189e76(0x200):return _0x3f70ea===_0x189e76(0x216);case _0x189e76(0x203):case _0x189e76(0x1cf):case _0x189e76(0x212):case _0x189e76(0x1e6):return+_0x3f70ea;default:return _0x3f70ea;}}}exports[a90_0x3b5ee7(0x1ee)]=BaseBulkRetrieve,BaseBulkRetrieve[a90_0x3b5ee7(0x211)]=0x1388;