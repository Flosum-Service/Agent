function a93_0x43e9(_0x1cecf2,_0x205ad0){const _0x403463=a93_0x3d4c();return a93_0x43e9=function(_0x2ec808,_0x2cdd0d){_0x2ec808=_0x2ec808-0x1de;let _0x3d4c32=_0x403463[_0x2ec808];return _0x3d4c32;},a93_0x43e9(_0x1cecf2,_0x205ad0);}const a93_0x28f39e=a93_0x43e9;(function(_0x326d55,_0x2e0bfc){const _0x50287a=a93_0x43e9,_0x5d21f3=_0x326d55();while(!![]){try{const _0x34c6f1=-parseInt(_0x50287a(0x1fa))/0x1+parseInt(_0x50287a(0x216))/0x2+-parseInt(_0x50287a(0x1fb))/0x3+parseInt(_0x50287a(0x20e))/0x4+-parseInt(_0x50287a(0x208))/0x5+-parseInt(_0x50287a(0x1ee))/0x6*(-parseInt(_0x50287a(0x21a))/0x7)+-parseInt(_0x50287a(0x20d))/0x8;if(_0x34c6f1===_0x2e0bfc)break;else _0x5d21f3['push'](_0x5d21f3['shift']());}catch(_0x462abc){_0x5d21f3['push'](_0x5d21f3['shift']());}}}(a93_0x3d4c,0x2da11));const a93_0x2cdd0d=(function(){let _0x256164=!![];return function(_0x52a364,_0x3ffafe){const _0x393e33=_0x256164?function(){const _0x3c90cf=a93_0x43e9;if(_0x3ffafe){const _0x13d09f=_0x3ffafe[_0x3c90cf(0x21d)](_0x52a364,arguments);return _0x3ffafe=null,_0x13d09f;}}:function(){};return _0x256164=![],_0x393e33;};}()),a93_0x2ec808=a93_0x2cdd0d(this,function(){const _0x548e0a=a93_0x43e9;return a93_0x2ec808[_0x548e0a(0x214)]()[_0x548e0a(0x227)](_0x548e0a(0x1e3))[_0x548e0a(0x214)]()[_0x548e0a(0x1e2)](a93_0x2ec808)[_0x548e0a(0x227)]('(((.+)+)+)+$');});a93_0x2ec808();'use strict';function a93_0x3d4c(){const _0x11f5d4=['set','once','101960nSqqMs','668883IhSwvJ','data','@flosum/salesforce','readEncryptedTempFile','pull','.000+0000','get','BaseBulkRetrieve','currency','int','jobStorePath','stream','retrieve','46685AlCHbu','castCsvValue','readEncryptionVector','error','csvParser','1208792tuOPdy','942288yGrXYa','true','_read','randomUUID','replace','_fieldsTypes','toString','writeEncryptedTempFile','558394VWtgbd','destroy','datetime','pipeline','367465vuCwvN','path','__esModule','apply','systemLogger','createDecryptPipe','readable','csv-parse','../../constants','@flosum/utils','BaseRetrieve','__importDefault','createReader','search','fields','default','catch','handleError','constructor','(((.+)+)+)+$','then','getIsDone','../job-detail','baseRetrievePayload','push','double','reduce','BulkV1QueryContentType','pipelineCallback','percent','18bbAHOR','POLL_INTERVAL','isPaused','boolean','bind','TEXT_CSV','createEncryptPipe','CryptoUtils','crypto','FsUtils'];a93_0x3d4c=function(){return _0x11f5d4;};return a93_0x3d4c();}var __importDefault=this&&this[a93_0x28f39e(0x225)]||function(_0x5b200d){const _0x39ac93=a93_0x28f39e;return _0x5b200d&&_0x5b200d[_0x39ac93(0x21c)]?_0x5b200d:{'default':_0x5b200d};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['BaseBulkRetrieve']=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require(a93_0x28f39e(0x206)),path_1=__importDefault(require(a93_0x28f39e(0x21b))),utils_1=require(a93_0x28f39e(0x223)),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require('stream/promises'),crypto_1=require(a93_0x28f39e(0x1f6)),csv_parse_1=require(a93_0x28f39e(0x221)),salesforce_1=require(a93_0x28f39e(0x1fd)),job_detail_1=require(a93_0x28f39e(0x1e6)),constants_1=require(a93_0x28f39e(0x222));class BaseBulkRetrieve extends base_retrieve_1[a93_0x28f39e(0x224)]{get[a93_0x28f39e(0x1e7)](){const _0x3e2b3b=a93_0x28f39e;return{'queryBuilder':this['queryBuilder'],'instance':this['request'],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1[_0x3e2b3b(0x1eb)][_0x3e2b3b(0x1f3)]};}async[a93_0x28f39e(0x1ff)](){const _0x56cd9a=a93_0x28f39e;var _0x8c9590,_0xcd8b50;if(this[_0x56cd9a(0x207)][_0x56cd9a(0x1e5)]()&&!((_0x8c9590=this['csvParser'])===null||_0x8c9590===void 0x0?void 0x0:_0x8c9590[_0x56cd9a(0x1f0)]())){this[_0x56cd9a(0x1e8)](null);return;}if((_0xcd8b50=this[_0x56cd9a(0x20c)])===null||_0xcd8b50===void 0x0?void 0x0:_0xcd8b50[_0x56cd9a(0x1f0)]()){this[_0x56cd9a(0x20c)]['resume']();return;}const _0x1e4dab=await this['retrieve']['execute']();if(!_0x1e4dab)return this[_0x56cd9a(0x1ff)]();await this[_0x56cd9a(0x226)](_0x1e4dab);}async[a93_0x28f39e(0x226)](_0x2ab7fb){const _0x544496=a93_0x28f39e,_0x75b047=path_1[_0x544496(0x1df)]['join'](job_detail_1[_0x544496(0x205)],(0x0,crypto_1[_0x544496(0x211)])()),_0x1c8523=(0x0,crypto_1[_0x544496(0x211)])(),_0x3a04f4=await this[_0x544496(0x215)](_0x2ab7fb,_0x75b047,_0x1c8523)[_0x544496(0x1e4)](()=>this[_0x544496(0x1fe)](_0x75b047,_0x1c8523)),_0x26b707={'columns':!![],'cast':this[_0x544496(0x209)][_0x544496(0x1f2)](this)};this[_0x544496(0x20c)]=(0x0,stream_1['pipeline'])(_0x3a04f4,(0x0,csv_parse_1['parse'])(_0x26b707),this[_0x544496(0x1ec)][_0x544496(0x1f2)](this,_0x75b047)),this[_0x544496(0x20c)]['on'](_0x544496(0x1fc),_0x31875c=>{const _0x14cbc9=_0x544496;this[_0x14cbc9(0x20c)]['pause'](),this[_0x14cbc9(0x1e8)](_0x31875c);}),this[_0x544496(0x20c)]['on']('end',async()=>{const _0x9ec82=_0x544496;return await utils_1[_0x9ec82(0x1f7)]['isExistsPath'](_0x75b047)&&await(0x0,promises_1['rm'])(_0x75b047)['catch'](this['handleError'][_0x9ec82(0x1f2)](this,null)),this[_0x9ec82(0x210)]();}),this[_0x544496(0x20c)]['on'](_0x544496(0x20b),this['pipelineCallback'][_0x544496(0x1f2)](this,_0x75b047));}async[a93_0x28f39e(0x215)](_0x4f8287,_0x43751f,_0x5e8f94){const _0x189791=a93_0x28f39e,_0x3869f4=fs_1[_0x189791(0x1df)]['createWriteStream'](_0x43751f);await(0x0,promises_2['pipeline'])(_0x4f8287,utils_1[_0x189791(0x1f5)][_0x189791(0x1f4)](_0x5e8f94),_0x3869f4);}async[a93_0x28f39e(0x1fe)](_0x3220c1,_0x325323){const _0x36d7b0=a93_0x28f39e,_0x31f6a6=fs_1[_0x36d7b0(0x1df)]['createReadStream'](_0x3220c1),_0x140d8c=await this[_0x36d7b0(0x20a)](_0x31f6a6),_0x1f4467=utils_1[_0x36d7b0(0x1f5)][_0x36d7b0(0x21f)](_0x325323,_0x140d8c);return(0x0,stream_1[_0x36d7b0(0x219)])(_0x31f6a6,_0x1f4467,this[_0x36d7b0(0x1ec)][_0x36d7b0(0x1f2)](this,_0x3220c1));}async[a93_0x28f39e(0x1ec)](_0x22699f,_0x41ec0a){const _0x13d20c=a93_0x28f39e;_0x41ec0a&&await this[_0x13d20c(0x1e1)](_0x22699f,_0x41ec0a);}async[a93_0x28f39e(0x1e1)](_0x5e7d71,_0x3d87e5){const _0x13a78e=a93_0x28f39e;_0x5e7d71&&await utils_1[_0x13a78e(0x1f7)]['isExistsPath'](_0x5e7d71)&&await(0x0,promises_1['rm'])(_0x5e7d71)[_0x13a78e(0x1e0)](_0x26c772=>job_detail_1[_0x13a78e(0x21e)][_0x13a78e(0x20b)](_0x26c772)),this[_0x13a78e(0x217)](_0x3d87e5);}async[a93_0x28f39e(0x20a)](_0x2751b1){return new Promise((_0x4b85a1,_0x37bd3c)=>{const _0x7421a0=a93_0x43e9;_0x2751b1[_0x7421a0(0x1f9)](_0x7421a0(0x20b),_0x37bd3c),_0x2751b1['once'](_0x7421a0(0x220),()=>{const _0x23c80e=_0x2751b1['read'](0x10);_0x4b85a1(_0x23c80e);});});}['castCsvValue'](_0x15388e,{header:_0x5bee81,column:_0x1be618}){const _0x4f512e=a93_0x28f39e;!this[_0x4f512e(0x213)]&&(this[_0x4f512e(0x213)]=this['describe'][_0x4f512e(0x1de)][_0x4f512e(0x1ea)]((_0x5d49b4,{name:_0x5665cf,type:_0x1d3fd8})=>_0x5d49b4[_0x4f512e(0x1f8)](_0x5665cf,_0x1d3fd8),new Map()));if(_0x5bee81)return _0x15388e;if(!_0x15388e)return null;switch(this[_0x4f512e(0x213)][_0x4f512e(0x201)](_0x1be618)){case _0x4f512e(0x218):return _0x15388e[_0x4f512e(0x212)](/\.\d{3}Z$/,_0x4f512e(0x200));case _0x4f512e(0x1f1):return _0x15388e===_0x4f512e(0x20f);case _0x4f512e(0x203):case _0x4f512e(0x1e9):case _0x4f512e(0x204):case _0x4f512e(0x1ed):return+_0x15388e;default:return _0x15388e;}}}exports[a93_0x28f39e(0x202)]=BaseBulkRetrieve,BaseBulkRetrieve[a93_0x28f39e(0x1ef)]=0x1388;