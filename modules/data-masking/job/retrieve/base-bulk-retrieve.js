const a75_0x58e6ed=a75_0x3fa4;(function(_0x27d747,_0x43173c){const _0x292d95=a75_0x3fa4,_0x1d7c54=_0x27d747();while(!![]){try{const _0x4d147c=parseInt(_0x292d95(0x222))/0x1+-parseInt(_0x292d95(0x209))/0x2*(-parseInt(_0x292d95(0x1ed))/0x3)+-parseInt(_0x292d95(0x202))/0x4*(-parseInt(_0x292d95(0x1ff))/0x5)+parseInt(_0x292d95(0x220))/0x6*(-parseInt(_0x292d95(0x201))/0x7)+-parseInt(_0x292d95(0x214))/0x8*(parseInt(_0x292d95(0x203))/0x9)+-parseInt(_0x292d95(0x1dd))/0xa*(-parseInt(_0x292d95(0x208))/0xb)+-parseInt(_0x292d95(0x224))/0xc;if(_0x4d147c===_0x43173c)break;else _0x1d7c54['push'](_0x1d7c54['shift']());}catch(_0x508298){_0x1d7c54['push'](_0x1d7c54['shift']());}}}(a75_0x5204,0x487c8));const a75_0x33c2d8=(function(){let _0x4137b6=!![];return function(_0x581851,_0xffd6cb){const _0x5da413=_0x4137b6?function(){const _0x2652d4=a75_0x3fa4;if(_0xffd6cb){const _0x158396=_0xffd6cb[_0x2652d4(0x1d9)](_0x581851,arguments);return _0xffd6cb=null,_0x158396;}}:function(){};return _0x4137b6=![],_0x5da413;};}()),a75_0x34cecb=a75_0x33c2d8(this,function(){const _0x3a5c78=a75_0x3fa4;return a75_0x34cecb[_0x3a5c78(0x1e6)]()['search']('(((.+)+)+)+$')['toString']()[_0x3a5c78(0x1f0)](a75_0x34cecb)[_0x3a5c78(0x1e0)](_0x3a5c78(0x1ee));});a75_0x34cecb();'use strict';var __importDefault=this&&this[a75_0x58e6ed(0x1db)]||function(_0x2ae1e4){const _0x545016=a75_0x58e6ed;return _0x2ae1e4&&_0x2ae1e4[_0x545016(0x223)]?_0x2ae1e4:{'default':_0x2ae1e4};};Object['defineProperty'](exports,a75_0x58e6ed(0x223),{'value':!![]}),exports[a75_0x58e6ed(0x1f9)]=void 0x0;const base_retrieve_1=require(a75_0x58e6ed(0x225)),stream_1=require(a75_0x58e6ed(0x1f8)),path_1=__importDefault(require('path')),utils_1=require(a75_0x58e6ed(0x1dc)),promises_1=require(a75_0x58e6ed(0x1f2)),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x58e6ed(0x1ea)),crypto_1=require(a75_0x58e6ed(0x215)),csv_parse_1=require(a75_0x58e6ed(0x21d)),salesforce_1=require(a75_0x58e6ed(0x1e4)),job_detail_1=require(a75_0x58e6ed(0x20a)),constants_1=require('../../constants');class BaseBulkRetrieve extends base_retrieve_1['BaseRetrieve']{get[a75_0x58e6ed(0x1fe)](){const _0x2c2ee8=a75_0x58e6ed;return{'queryBuilder':this[_0x2c2ee8(0x212)],'instance':this[_0x2c2ee8(0x1fc)],'api':constants_1[_0x2c2ee8(0x207)],'contentType':salesforce_1[_0x2c2ee8(0x21a)][_0x2c2ee8(0x227)]};}async['pull'](){const _0x29ffdc=a75_0x58e6ed;var _0x501d5b,_0x361a83;if(this[_0x29ffdc(0x1f1)]['getIsDone']()&&!((_0x501d5b=this[_0x29ffdc(0x213)])===null||_0x501d5b===void 0x0?void 0x0:_0x501d5b[_0x29ffdc(0x1e9)]())){this[_0x29ffdc(0x206)](null);return;}if((_0x361a83=this['csvParser'])===null||_0x361a83===void 0x0?void 0x0:_0x361a83[_0x29ffdc(0x1e9)]()){this[_0x29ffdc(0x213)][_0x29ffdc(0x228)]();return;}const _0x47f900=await this[_0x29ffdc(0x1f1)][_0x29ffdc(0x20d)]();if(!_0x47f900)return this[_0x29ffdc(0x226)]();await this[_0x29ffdc(0x216)](_0x47f900);}async[a75_0x58e6ed(0x216)](_0xb902a9){const _0x5841c2=a75_0x58e6ed,_0x1d0aa7=path_1['default'][_0x5841c2(0x1ef)](job_detail_1[_0x5841c2(0x1eb)],(0x0,crypto_1[_0x5841c2(0x217)])()),_0x55d4d0=(0x0,crypto_1[_0x5841c2(0x217)])(),_0x6efa03=await this[_0x5841c2(0x1da)](_0xb902a9,_0x1d0aa7,_0x55d4d0)['then'](()=>this[_0x5841c2(0x1e3)](_0x1d0aa7,_0x55d4d0)),_0x5688b0={'columns':!![],'cast':this['castCsvValue'][_0x5841c2(0x1ec)](this)};this[_0x5841c2(0x213)]=(0x0,stream_1[_0x5841c2(0x1f4)])(_0x6efa03,(0x0,csv_parse_1[_0x5841c2(0x20f)])(_0x5688b0),this[_0x5841c2(0x20c)][_0x5841c2(0x1ec)](this,_0x1d0aa7)),this[_0x5841c2(0x213)]['on'](_0x5841c2(0x1e1),_0xb438ef=>{const _0x43687d=_0x5841c2;this[_0x43687d(0x213)]['pause'](),this[_0x43687d(0x206)](_0xb438ef);}),this[_0x5841c2(0x213)]['on'](_0x5841c2(0x21f),async()=>{const _0x2073ff=_0x5841c2;return await utils_1[_0x2073ff(0x20e)]['isExistsPath'](_0x1d0aa7)&&await(0x0,promises_1['rm'])(_0x1d0aa7)[_0x2073ff(0x211)](this[_0x2073ff(0x1de)][_0x2073ff(0x1ec)](this,null)),this['_read']();}),this[_0x5841c2(0x213)]['on']('error',this[_0x5841c2(0x20c)][_0x5841c2(0x1ec)](this,_0x1d0aa7));}async['writeEncryptedTempFile'](_0xf86225,_0x369a3f,_0x4d4860){const _0x5b7df7=a75_0x58e6ed,_0x3289f1=fs_1[_0x5b7df7(0x21b)][_0x5b7df7(0x1fd)](_0x369a3f);await(0x0,promises_2['pipeline'])(_0xf86225,utils_1[_0x5b7df7(0x204)]['createEncryptPipe'](_0x4d4860),_0x3289f1);}async[a75_0x58e6ed(0x1e3)](_0x5e7c07,_0x5b820a){const _0xde2bd0=a75_0x58e6ed,_0x3518be=fs_1[_0xde2bd0(0x21b)][_0xde2bd0(0x1f7)](_0x5e7c07),_0x20052c=await this[_0xde2bd0(0x221)](_0x3518be),_0x1fa408=utils_1[_0xde2bd0(0x204)]['createDecryptPipe'](_0x5b820a,_0x20052c);return(0x0,stream_1[_0xde2bd0(0x1f4)])(_0x3518be,_0x1fa408,this[_0xde2bd0(0x20c)]['bind'](this,_0x5e7c07));}async[a75_0x58e6ed(0x20c)](_0x426a09,_0x979604){const _0x47adad=a75_0x58e6ed;_0x979604&&await this[_0x47adad(0x1de)](_0x426a09,_0x979604);}async[a75_0x58e6ed(0x1de)](_0x2faf84,_0xcedc43){const _0x306883=a75_0x58e6ed;_0x2faf84&&await utils_1[_0x306883(0x20e)][_0x306883(0x1f5)](_0x2faf84)&&await(0x0,promises_1['rm'])(_0x2faf84)[_0x306883(0x211)](_0x33c7b5=>job_detail_1['systemLogger'][_0x306883(0x21e)](_0x33c7b5)),this[_0x306883(0x210)](_0xcedc43);}async['readEncryptionVector'](_0x5e05eb){return new Promise((_0x247e19,_0x331a7f)=>{const _0x3137a7=a75_0x3fa4;_0x5e05eb[_0x3137a7(0x1fa)](_0x3137a7(0x21e),_0x331a7f),_0x5e05eb[_0x3137a7(0x1fa)](_0x3137a7(0x20b),()=>{const _0x448162=_0x3137a7,_0x26b191=_0x5e05eb[_0x448162(0x1e2)](0x10);_0x247e19(_0x26b191);});});}[a75_0x58e6ed(0x1fb)](_0x1c92d0,{header:_0x30ecfa,column:_0x5c5344}){const _0x5cf762=a75_0x58e6ed;!this[_0x5cf762(0x1df)]&&(this[_0x5cf762(0x1df)]=this[_0x5cf762(0x21c)]['fields'][_0x5cf762(0x200)]((_0x33a696,{name:_0x225cd7,type:_0x53e1bd})=>_0x33a696['set'](_0x225cd7,_0x53e1bd),new Map()));if(_0x30ecfa)return _0x1c92d0;if(!_0x1c92d0)return null;switch(this[_0x5cf762(0x1df)]['get'](_0x5c5344)){case _0x5cf762(0x205):return _0x1c92d0[_0x5cf762(0x1e8)](/\.\d{3}Z$/,_0x5cf762(0x219));case _0x5cf762(0x1f6):return _0x1c92d0===_0x5cf762(0x218);case _0x5cf762(0x1f3):case'double':case _0x5cf762(0x1e7):case'percent':return+_0x1c92d0;default:return _0x1c92d0;}}}function a75_0x5204(){const _0x445bf5=['retrieve','fs/promises','currency','pipeline','isExistsPath','boolean','createReadStream','stream','BaseBulkRetrieve','once','castCsvValue','request','createWriteStream','baseRetrievePayload','815nZXGxM','reduce','667387mJAovH','13460YRXeIQ','27VkHxiD','CryptoUtils','datetime','push','SALESFORCE_API_VERSION','11KWIMGK','82woibPr','../job-detail','readable','pipelineCallback','execute','FsUtils','parse','destroy','catch','queryBuilder','csvParser','911096OghhEz','crypto','createReader','randomUUID','true','.000+0000','BulkV1QueryContentType','default','describe','csv-parse','error','end','6xgtQRe','readEncryptionVector','501282zkpdGj','__esModule','7426452LSKwUe','./base-retrieve','pull','TEXT_CSV','resume','apply','writeEncryptedTempFile','__importDefault','@flosum/utils','683570YrWdFw','handleError','_fieldsTypes','search','data','read','readEncryptedTempFile','@flosum/salesforce','POLL_INTERVAL','toString','int','replace','isPaused','stream/promises','jobStorePath','bind','17169hUxfiL','(((.+)+)+)+$','join','constructor'];a75_0x5204=function(){return _0x445bf5;};return a75_0x5204();}function a75_0x3fa4(_0xd9f163,_0x2c7e34){const _0x53b58f=a75_0x5204();return a75_0x3fa4=function(_0x34cecb,_0x33c2d8){_0x34cecb=_0x34cecb-0x1d9;let _0x5204af=_0x53b58f[_0x34cecb];return _0x5204af;},a75_0x3fa4(_0xd9f163,_0x2c7e34);}exports['BaseBulkRetrieve']=BaseBulkRetrieve,BaseBulkRetrieve[a75_0x58e6ed(0x1e5)]=0x1388;