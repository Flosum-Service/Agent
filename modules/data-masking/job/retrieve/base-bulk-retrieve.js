const a75_0x1cb9f3=a75_0x3341;function a75_0x3341(_0x576608,_0x41aa74){const _0x1c56e6=a75_0x2730();return a75_0x3341=function(_0x230233,_0x19922a){_0x230233=_0x230233-0x130;let _0x27304a=_0x1c56e6[_0x230233];return _0x27304a;},a75_0x3341(_0x576608,_0x41aa74);}(function(_0x51dba1,_0x25c165){const _0x1003b2=a75_0x3341,_0x1d5d38=_0x51dba1();while(!![]){try{const _0x3f1d0c=-parseInt(_0x1003b2(0x135))/0x1+-parseInt(_0x1003b2(0x171))/0x2+parseInt(_0x1003b2(0x130))/0x3+-parseInt(_0x1003b2(0x13a))/0x4+parseInt(_0x1003b2(0x17b))/0x5*(-parseInt(_0x1003b2(0x177))/0x6)+-parseInt(_0x1003b2(0x136))/0x7+parseInt(_0x1003b2(0x14c))/0x8;if(_0x3f1d0c===_0x25c165)break;else _0x1d5d38['push'](_0x1d5d38['shift']());}catch(_0x54afdf){_0x1d5d38['push'](_0x1d5d38['shift']());}}}(a75_0x2730,0xdfa8a));function a75_0x2730(){const _0x28ebdc=['pipeline','isPaused','once','castCsvValue','defineProperty','pull','fields','csv-parse','read','search','BulkV1QueryContentType','randomUUID','double','request','bind','pipelineCallback','data','FsUtils','__importDefault','queryBuilder','csvParser','reduce','stream','TEXT_CSV','default','../../constants','__esModule','2467998ZxVDNe','replace','@flosum/salesforce','_read','BaseRetrieve','toString','6xyPyRz','../job-detail','join','int','7072645lpJYTS','readEncryptedTempFile','end','handleError','percent','.000+0000','push','describe','systemLogger','2955837PVdqqs','execute','_fieldsTypes','retrieve','destroy','1029735TBQahZ','3356563qCSGlX','baseRetrievePayload','CryptoUtils','fs/promises','1829820sekRaT','readEncryptionVector','writeEncryptedTempFile','@flosum/utils','true','(((.+)+)+)+$','path','catch','pause','error','isExistsPath','stream/promises','datetime','jobStorePath','boolean','createReadStream','SALESFORCE_API_VERSION','currency','36368432SkXsFg','apply','createWriteStream','set','BaseBulkRetrieve','get','readable','crypto','./base-retrieve','createDecryptPipe'];a75_0x2730=function(){return _0x28ebdc;};return a75_0x2730();}const a75_0x19922a=(function(){let _0x1e968a=!![];return function(_0x16a417,_0x51d704){const _0x56c9bc=_0x1e968a?function(){const _0x546b57=a75_0x3341;if(_0x51d704){const _0x5024eb=_0x51d704[_0x546b57(0x14d)](_0x16a417,arguments);return _0x51d704=null,_0x5024eb;}}:function(){};return _0x1e968a=![],_0x56c9bc;};}()),a75_0x230233=a75_0x19922a(this,function(){const _0x11e548=a75_0x3341;return a75_0x230233[_0x11e548(0x176)]()[_0x11e548(0x15f)](_0x11e548(0x13f))[_0x11e548(0x176)]()['constructor'](a75_0x230233)[_0x11e548(0x15f)]('(((.+)+)+)+$');});a75_0x230233();'use strict';var __importDefault=this&&this[a75_0x1cb9f3(0x168)]||function(_0x1b7933){return _0x1b7933&&_0x1b7933['__esModule']?_0x1b7933:{'default':_0x1b7933};};Object[a75_0x1cb9f3(0x15a)](exports,a75_0x1cb9f3(0x170),{'value':!![]}),exports[a75_0x1cb9f3(0x150)]=void 0x0;const base_retrieve_1=require(a75_0x1cb9f3(0x154)),stream_1=require(a75_0x1cb9f3(0x16c)),path_1=__importDefault(require(a75_0x1cb9f3(0x140))),utils_1=require(a75_0x1cb9f3(0x13d)),promises_1=require(a75_0x1cb9f3(0x139)),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x1cb9f3(0x145)),crypto_1=require(a75_0x1cb9f3(0x153)),csv_parse_1=require(a75_0x1cb9f3(0x15d)),salesforce_1=require(a75_0x1cb9f3(0x173)),job_detail_1=require(a75_0x1cb9f3(0x178)),constants_1=require(a75_0x1cb9f3(0x16f));class BaseBulkRetrieve extends base_retrieve_1[a75_0x1cb9f3(0x175)]{get[a75_0x1cb9f3(0x137)](){const _0x5cf1f3=a75_0x1cb9f3;return{'queryBuilder':this[_0x5cf1f3(0x169)],'instance':this[_0x5cf1f3(0x163)],'api':constants_1[_0x5cf1f3(0x14a)],'contentType':salesforce_1[_0x5cf1f3(0x160)][_0x5cf1f3(0x16d)]};}async[a75_0x1cb9f3(0x15b)](){const _0x2b9745=a75_0x1cb9f3;var _0x510bbb,_0xdc0987;if(this[_0x2b9745(0x133)]['getIsDone']()&&!((_0x510bbb=this[_0x2b9745(0x16a)])===null||_0x510bbb===void 0x0?void 0x0:_0x510bbb[_0x2b9745(0x157)]())){this[_0x2b9745(0x181)](null);return;}if((_0xdc0987=this[_0x2b9745(0x16a)])===null||_0xdc0987===void 0x0?void 0x0:_0xdc0987[_0x2b9745(0x157)]()){this[_0x2b9745(0x16a)]['resume']();return;}const _0x43e794=await this[_0x2b9745(0x133)][_0x2b9745(0x131)]();if(!_0x43e794)return this[_0x2b9745(0x15b)]();await this['createReader'](_0x43e794);}async['createReader'](_0x28a6dd){const _0xa098bc=a75_0x1cb9f3,_0x114f99=path_1[_0xa098bc(0x16e)][_0xa098bc(0x179)](job_detail_1[_0xa098bc(0x147)],(0x0,crypto_1['randomUUID'])()),_0x379b39=(0x0,crypto_1[_0xa098bc(0x161)])(),_0x1ef84e=await this[_0xa098bc(0x13c)](_0x28a6dd,_0x114f99,_0x379b39)['then'](()=>this[_0xa098bc(0x17c)](_0x114f99,_0x379b39)),_0x5694bf={'columns':!![],'cast':this[_0xa098bc(0x159)][_0xa098bc(0x164)](this)};this[_0xa098bc(0x16a)]=(0x0,stream_1[_0xa098bc(0x156)])(_0x1ef84e,(0x0,csv_parse_1['parse'])(_0x5694bf),this['pipelineCallback'][_0xa098bc(0x164)](this,_0x114f99)),this[_0xa098bc(0x16a)]['on'](_0xa098bc(0x166),_0x33ce7f=>{const _0x366f1a=_0xa098bc;this[_0x366f1a(0x16a)][_0x366f1a(0x142)](),this['push'](_0x33ce7f);}),this[_0xa098bc(0x16a)]['on'](_0xa098bc(0x17d),async()=>{const _0x1fdf4e=_0xa098bc;return await utils_1[_0x1fdf4e(0x167)][_0x1fdf4e(0x144)](_0x114f99)&&await(0x0,promises_1['rm'])(_0x114f99)[_0x1fdf4e(0x141)](this[_0x1fdf4e(0x17e)][_0x1fdf4e(0x164)](this,null)),this[_0x1fdf4e(0x174)]();}),this[_0xa098bc(0x16a)]['on'](_0xa098bc(0x143),this['pipelineCallback']['bind'](this,_0x114f99));}async[a75_0x1cb9f3(0x13c)](_0x2d137a,_0x2e942f,_0x48eda6){const _0x32e079=a75_0x1cb9f3,_0x2f2bd5=fs_1['default'][_0x32e079(0x14e)](_0x2e942f);await(0x0,promises_2[_0x32e079(0x156)])(_0x2d137a,utils_1[_0x32e079(0x138)]['createEncryptPipe'](_0x48eda6),_0x2f2bd5);}async['readEncryptedTempFile'](_0x5a40fc,_0x53cba1){const _0x4ff55f=a75_0x1cb9f3,_0x4a553d=fs_1['default'][_0x4ff55f(0x149)](_0x5a40fc),_0x432816=await this[_0x4ff55f(0x13b)](_0x4a553d),_0x25382e=utils_1['CryptoUtils'][_0x4ff55f(0x155)](_0x53cba1,_0x432816);return(0x0,stream_1['pipeline'])(_0x4a553d,_0x25382e,this[_0x4ff55f(0x165)]['bind'](this,_0x5a40fc));}async[a75_0x1cb9f3(0x165)](_0x34267f,_0x5a5831){_0x5a5831&&await this['handleError'](_0x34267f,_0x5a5831);}async[a75_0x1cb9f3(0x17e)](_0x45a6a9,_0x790ae5){const _0x4fc567=a75_0x1cb9f3;_0x45a6a9&&await utils_1[_0x4fc567(0x167)][_0x4fc567(0x144)](_0x45a6a9)&&await(0x0,promises_1['rm'])(_0x45a6a9)[_0x4fc567(0x141)](_0x78faab=>job_detail_1[_0x4fc567(0x183)]['error'](_0x78faab)),this[_0x4fc567(0x134)](_0x790ae5);}async[a75_0x1cb9f3(0x13b)](_0x3afb79){return new Promise((_0x35bf31,_0x152a16)=>{const _0x3e072b=a75_0x3341;_0x3afb79['once'](_0x3e072b(0x143),_0x152a16),_0x3afb79[_0x3e072b(0x158)](_0x3e072b(0x152),()=>{const _0x121e07=_0x3e072b,_0x453da0=_0x3afb79[_0x121e07(0x15e)](0x10);_0x35bf31(_0x453da0);});});}[a75_0x1cb9f3(0x159)](_0x1fcf62,{header:_0x5e47da,column:_0x2f6110}){const _0x28f0e8=a75_0x1cb9f3;!this[_0x28f0e8(0x132)]&&(this[_0x28f0e8(0x132)]=this[_0x28f0e8(0x182)][_0x28f0e8(0x15c)][_0x28f0e8(0x16b)]((_0xdf7b0f,{name:_0x19da60,type:_0x24cfda})=>_0xdf7b0f[_0x28f0e8(0x14f)](_0x19da60,_0x24cfda),new Map()));if(_0x5e47da)return _0x1fcf62;if(!_0x1fcf62)return null;switch(this['_fieldsTypes'][_0x28f0e8(0x151)](_0x2f6110)){case _0x28f0e8(0x146):return _0x1fcf62[_0x28f0e8(0x172)](/\.\d{3}Z$/,_0x28f0e8(0x180));case _0x28f0e8(0x148):return _0x1fcf62===_0x28f0e8(0x13e);case _0x28f0e8(0x14b):case _0x28f0e8(0x162):case _0x28f0e8(0x17a):case _0x28f0e8(0x17f):return+_0x1fcf62;default:return _0x1fcf62;}}}exports[a75_0x1cb9f3(0x150)]=BaseBulkRetrieve,BaseBulkRetrieve['POLL_INTERVAL']=0x1388;