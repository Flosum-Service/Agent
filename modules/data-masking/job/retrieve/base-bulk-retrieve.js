const a75_0x3f28f4=a75_0x225c;(function(_0x23dbc3,_0x2b7220){const _0x15e1e8=a75_0x225c,_0x44469a=_0x23dbc3();while(!![]){try{const _0x2e53b2=-parseInt(_0x15e1e8(0x1ae))/0x1+-parseInt(_0x15e1e8(0x195))/0x2*(parseInt(_0x15e1e8(0x17d))/0x3)+parseInt(_0x15e1e8(0x1c1))/0x4+-parseInt(_0x15e1e8(0x1b6))/0x5*(parseInt(_0x15e1e8(0x1a4))/0x6)+parseInt(_0x15e1e8(0x186))/0x7*(-parseInt(_0x15e1e8(0x190))/0x8)+-parseInt(_0x15e1e8(0x194))/0x9*(parseInt(_0x15e1e8(0x199))/0xa)+parseInt(_0x15e1e8(0x17e))/0xb*(parseInt(_0x15e1e8(0x18c))/0xc);if(_0x2e53b2===_0x2b7220)break;else _0x44469a['push'](_0x44469a['shift']());}catch(_0x37af16){_0x44469a['push'](_0x44469a['shift']());}}}(a75_0x222c,0x54ba4));const a75_0x1e1ea2=(function(){let _0x7ffd7b=!![];return function(_0xce8f4,_0x59c5b7){const _0x595c6f=_0x7ffd7b?function(){const _0x374759=a75_0x225c;if(_0x59c5b7){const _0x370d21=_0x59c5b7[_0x374759(0x17a)](_0xce8f4,arguments);return _0x59c5b7=null,_0x370d21;}}:function(){};return _0x7ffd7b=![],_0x595c6f;};}()),a75_0x25069b=a75_0x1e1ea2(this,function(){const _0x36aec8=a75_0x225c;return a75_0x25069b[_0x36aec8(0x1b3)]()[_0x36aec8(0x189)](_0x36aec8(0x1a6))[_0x36aec8(0x1b3)]()['constructor'](a75_0x25069b)[_0x36aec8(0x189)](_0x36aec8(0x1a6));});a75_0x25069b();'use strict';var __importDefault=this&&this[a75_0x3f28f4(0x1b1)]||function(_0x21c63f){const _0x901881=a75_0x3f28f4;return _0x21c63f&&_0x21c63f[_0x901881(0x1ba)]?_0x21c63f:{'default':_0x21c63f};};Object[a75_0x3f28f4(0x180)](exports,a75_0x3f28f4(0x1ba),{'value':!![]}),exports[a75_0x3f28f4(0x19a)]=void 0x0;const base_retrieve_1=require(a75_0x3f28f4(0x1bb)),stream_1=require(a75_0x3f28f4(0x1b2)),path_1=__importDefault(require(a75_0x3f28f4(0x1a2))),utils_1=require('@flosum/utils'),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x3f28f4(0x1a8)),crypto_1=require(a75_0x3f28f4(0x18e)),csv_parse_1=require(a75_0x3f28f4(0x1c2)),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a75_0x3f28f4(0x1b9)),constants_1=require(a75_0x3f28f4(0x188));function a75_0x225c(_0x37a723,_0x5578c0){const _0x147012=a75_0x222c();return a75_0x225c=function(_0x25069b,_0x1e1ea2){_0x25069b=_0x25069b-0x177;let _0x222c7a=_0x147012[_0x25069b];return _0x222c7a;},a75_0x225c(_0x37a723,_0x5578c0);}class BaseBulkRetrieve extends base_retrieve_1[a75_0x3f28f4(0x1c4)]{get[a75_0x3f28f4(0x1ab)](){const _0x42868a=a75_0x3f28f4;return{'queryBuilder':this['queryBuilder'],'instance':this[_0x42868a(0x17b)],'api':constants_1[_0x42868a(0x18f)],'contentType':salesforce_1[_0x42868a(0x185)][_0x42868a(0x1bd)]};}async[a75_0x3f28f4(0x1c6)](){const _0x3370e5=a75_0x3f28f4;var _0x1bebaf,_0x298300;if(this['retrieve']['getIsDone']()&&!((_0x1bebaf=this[_0x3370e5(0x1b4)])===null||_0x1bebaf===void 0x0?void 0x0:_0x1bebaf[_0x3370e5(0x18b)]())){this[_0x3370e5(0x1a9)](null);return;}if((_0x298300=this['csvParser'])===null||_0x298300===void 0x0?void 0x0:_0x298300[_0x3370e5(0x18b)]()){this['csvParser']['resume']();return;}const _0x578e8a=await this['retrieve'][_0x3370e5(0x184)]();if(!_0x578e8a)return this['pull']();await this[_0x3370e5(0x198)](_0x578e8a);}async[a75_0x3f28f4(0x198)](_0x32adb8){const _0x4431a9=a75_0x3f28f4,_0x3da578=path_1['default'][_0x4431a9(0x19e)](job_detail_1[_0x4431a9(0x1a1)],(0x0,crypto_1[_0x4431a9(0x197)])()),_0x539b6d=(0x0,crypto_1['randomUUID'])(),_0x206dfb=await this[_0x4431a9(0x19c)](_0x32adb8,_0x3da578,_0x539b6d)[_0x4431a9(0x179)](()=>this['readEncryptedTempFile'](_0x3da578,_0x539b6d)),_0x39762d={'columns':!![],'cast':this['castCsvValue'][_0x4431a9(0x17f)](this)};this[_0x4431a9(0x1b4)]=(0x0,stream_1[_0x4431a9(0x1af)])(_0x206dfb,(0x0,csv_parse_1[_0x4431a9(0x182)])(_0x39762d),this[_0x4431a9(0x183)][_0x4431a9(0x17f)](this,_0x3da578)),this[_0x4431a9(0x1b4)]['on'](_0x4431a9(0x1ac),_0x46ffce=>{const _0x1f6ce5=_0x4431a9;this[_0x1f6ce5(0x1b4)][_0x1f6ce5(0x1a7)](),this[_0x1f6ce5(0x1a9)](_0x46ffce);}),this[_0x4431a9(0x1b4)]['on'](_0x4431a9(0x191),async()=>{const _0x445ae3=_0x4431a9;return await utils_1[_0x445ae3(0x1bf)][_0x445ae3(0x187)](_0x3da578)&&await(0x0,promises_1['rm'])(_0x3da578)[_0x445ae3(0x177)](this[_0x445ae3(0x1a0)][_0x445ae3(0x17f)](this,null)),this[_0x445ae3(0x192)]();}),this[_0x4431a9(0x1b4)]['on'](_0x4431a9(0x18a),this['pipelineCallback'][_0x4431a9(0x17f)](this,_0x3da578));}async[a75_0x3f28f4(0x19c)](_0x468dd1,_0x20cc89,_0x5aedb1){const _0x2568d4=a75_0x3f28f4,_0x21662d=fs_1[_0x2568d4(0x193)][_0x2568d4(0x1b0)](_0x20cc89);await(0x0,promises_2[_0x2568d4(0x1af)])(_0x468dd1,utils_1[_0x2568d4(0x1a3)][_0x2568d4(0x1be)](_0x5aedb1),_0x21662d);}async[a75_0x3f28f4(0x1b7)](_0x12797a,_0x130106){const _0x4e5b42=a75_0x3f28f4,_0x2971b1=fs_1['default'][_0x4e5b42(0x1b5)](_0x12797a),_0x575c0a=await this['readEncryptionVector'](_0x2971b1),_0x70723c=utils_1[_0x4e5b42(0x1a3)][_0x4e5b42(0x1c5)](_0x130106,_0x575c0a);return(0x0,stream_1[_0x4e5b42(0x1af)])(_0x2971b1,_0x70723c,this[_0x4e5b42(0x183)][_0x4e5b42(0x17f)](this,_0x12797a));}async['pipelineCallback'](_0x32f1d0,_0x58b437){const _0xd89ab4=a75_0x3f28f4;_0x58b437&&await this[_0xd89ab4(0x1a0)](_0x32f1d0,_0x58b437);}async[a75_0x3f28f4(0x1a0)](_0xdcdd50,_0x43a346){const _0x1de2ae=a75_0x3f28f4;_0xdcdd50&&await utils_1[_0x1de2ae(0x1bf)][_0x1de2ae(0x187)](_0xdcdd50)&&await(0x0,promises_1['rm'])(_0xdcdd50)[_0x1de2ae(0x177)](_0x16e1dc=>job_detail_1[_0x1de2ae(0x17c)]['error'](_0x16e1dc)),this[_0x1de2ae(0x1c3)](_0x43a346);}async[a75_0x3f28f4(0x1aa)](_0x592d6c){return new Promise((_0x56920c,_0x36464b)=>{const _0x3cc8fe=a75_0x225c;_0x592d6c['once']('error',_0x36464b),_0x592d6c[_0x3cc8fe(0x1a5)](_0x3cc8fe(0x1b8),()=>{const _0x1121f8=_0x3cc8fe,_0x541e50=_0x592d6c[_0x1121f8(0x1c0)](0x10);_0x56920c(_0x541e50);});});}['castCsvValue'](_0x5e3568,{header:_0x405eec,column:_0x34ea1d}){const _0x3a4e1d=a75_0x3f28f4;!this[_0x3a4e1d(0x19f)]&&(this[_0x3a4e1d(0x19f)]=this[_0x3a4e1d(0x181)][_0x3a4e1d(0x178)]['reduce']((_0x23f8d4,{name:_0x28499e,type:_0x45a308})=>_0x23f8d4['set'](_0x28499e,_0x45a308),new Map()));if(_0x405eec)return _0x5e3568;if(!_0x5e3568)return null;switch(this[_0x3a4e1d(0x19f)][_0x3a4e1d(0x1ad)](_0x34ea1d)){case'datetime':return _0x5e3568['replace'](/\.\d{3}Z$/,'.000+0000');case _0x3a4e1d(0x19b):return _0x5e3568===_0x3a4e1d(0x18d);case _0x3a4e1d(0x1bc):case'double':case _0x3a4e1d(0x19d):case _0x3a4e1d(0x196):return+_0x5e3568;default:return _0x5e3568;}}}exports[a75_0x3f28f4(0x19a)]=BaseBulkRetrieve,BaseBulkRetrieve['POLL_INTERVAL']=0x1388;function a75_0x222c(){const _0x47dca4=['crypto','SALESFORCE_API_VERSION','8tlWyyg','end','_read','default','2853WLeOfI','2NjprbA','percent','randomUUID','createReader','4730ItBWms','BaseBulkRetrieve','boolean','writeEncryptedTempFile','int','join','_fieldsTypes','handleError','jobStorePath','path','CryptoUtils','2268kPEBsG','once','(((.+)+)+)+$','pause','stream/promises','push','readEncryptionVector','baseRetrievePayload','data','get','362600BFXYJV','pipeline','createWriteStream','__importDefault','stream','toString','csvParser','createReadStream','5210ZIBLdr','readEncryptedTempFile','readable','../job-detail','__esModule','./base-retrieve','currency','TEXT_CSV','createEncryptPipe','FsUtils','read','1511152eBamie','csv-parse','destroy','BaseRetrieve','createDecryptPipe','pull','catch','fields','then','apply','request','systemLogger','1737726TJMZFO','400433VFSXpy','bind','defineProperty','describe','parse','pipelineCallback','execute','BulkV1QueryContentType','772898yFeFLB','isExistsPath','../../constants','search','error','isPaused','516ICGXhE','true'];a75_0x222c=function(){return _0x47dca4;};return a75_0x222c();}