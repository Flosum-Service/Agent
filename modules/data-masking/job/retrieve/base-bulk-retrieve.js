const a90_0x39e185=a90_0x463b;(function(_0x2cb1da,_0x52fed2){const _0x516496=a90_0x463b,_0x582f76=_0x2cb1da();while(!![]){try{const _0x35c6b6=parseInt(_0x516496(0xe9))/0x1+parseInt(_0x516496(0xca))/0x2*(-parseInt(_0x516496(0xd2))/0x3)+parseInt(_0x516496(0xf3))/0x4+parseInt(_0x516496(0xdd))/0x5*(-parseInt(_0x516496(0xdb))/0x6)+-parseInt(_0x516496(0xcc))/0x7*(-parseInt(_0x516496(0xbe))/0x8)+parseInt(_0x516496(0xd6))/0x9*(-parseInt(_0x516496(0xcf))/0xa)+parseInt(_0x516496(0x104))/0xb*(parseInt(_0x516496(0xfb))/0xc);if(_0x35c6b6===_0x52fed2)break;else _0x582f76['push'](_0x582f76['shift']());}catch(_0x5e8221){_0x582f76['push'](_0x582f76['shift']());}}}(a90_0x2a0f,0xaeb85));const a90_0x4e80cb=(function(){let _0x4ce4fa=!![];return function(_0x217573,_0x6219b7){const _0x52aa56=_0x4ce4fa?function(){const _0x3ed574=a90_0x463b;if(_0x6219b7){const _0xd4112a=_0x6219b7[_0x3ed574(0xe1)](_0x217573,arguments);return _0x6219b7=null,_0xd4112a;}}:function(){};return _0x4ce4fa=![],_0x52aa56;};}()),a90_0x455202=a90_0x4e80cb(this,function(){const _0x3b944c=a90_0x463b;return a90_0x455202[_0x3b944c(0xf0)]()[_0x3b944c(0xfd)](_0x3b944c(0xc0))[_0x3b944c(0xf0)]()[_0x3b944c(0xd9)](a90_0x455202)[_0x3b944c(0xfd)](_0x3b944c(0xc0));});a90_0x455202();'use strict';var __importDefault=this&&this[a90_0x39e185(0xb6)]||function(_0x2d2f41){const _0x30516c=a90_0x39e185;return _0x2d2f41&&_0x2d2f41[_0x30516c(0xf8)]?_0x2d2f41:{'default':_0x2d2f41};};Object[a90_0x39e185(0xee)](exports,a90_0x39e185(0xf8),{'value':!![]}),exports[a90_0x39e185(0x106)]=void 0x0;function a90_0x2a0f(){const _0x36606d=['stream/promises','278490mNqxMg','describe','90CXDkWC','FsUtils','jobStorePath','_read','apply','./base-retrieve','int','read','request','resume','currency','readEncryptionVector','1113219RMLPzL','csvParser','readEncryptedTempFile','catch','createEncryptPipe','defineProperty','writeEncryptedTempFile','toString','retrieve','boolean','3065356MFFLbS','createDecryptPipe','castCsvValue','crypto','percent','__esModule','queryBuilder','baseRetrievePayload','2868nEvnza','then','search','@flosum/utils','TEXT_CSV','bind','once','.000+0000','default','18480mtLPzC','error','BaseBulkRetrieve','push','data','execute','createReader','pipeline','__importDefault','csv-parse','destroy','@flosum/salesforce','pipelineCallback','isExistsPath','handleError','get','2517176GdQJbQ','true','(((.+)+)+)+$','BulkV1QueryContentType','../../constants','pause','reduce','join','fields','fs/promises','getIsDone','systemLogger','979834YxQnis','path','7SpvWMp','randomUUID','BaseRetrieve','1848950EvjzLB','isPaused','pull','3JxzVMr','replace','set','../job-detail','27ejcCmP','_fieldsTypes','double','constructor'];a90_0x2a0f=function(){return _0x36606d;};return a90_0x2a0f();}const base_retrieve_1=require(a90_0x39e185(0xe2)),stream_1=require('stream'),path_1=__importDefault(require(a90_0x39e185(0xcb))),utils_1=require(a90_0x39e185(0xfe)),promises_1=require(a90_0x39e185(0xc7)),fs_1=__importDefault(require('fs')),promises_2=require(a90_0x39e185(0xda)),crypto_1=require(a90_0x39e185(0xf6)),csv_parse_1=require(a90_0x39e185(0xb7)),salesforce_1=require(a90_0x39e185(0xb9)),job_detail_1=require(a90_0x39e185(0xd5)),constants_1=require(a90_0x39e185(0xc2));function a90_0x463b(_0x21728e,_0xa0a377){const _0x3f7d8e=a90_0x2a0f();return a90_0x463b=function(_0x455202,_0x4e80cb){_0x455202=_0x455202-0xb5;let _0x2a0f09=_0x3f7d8e[_0x455202];return _0x2a0f09;},a90_0x463b(_0x21728e,_0xa0a377);}class BaseBulkRetrieve extends base_retrieve_1[a90_0x39e185(0xce)]{get[a90_0x39e185(0xfa)](){const _0x41dfbc=a90_0x39e185;return{'queryBuilder':this[_0x41dfbc(0xf9)],'instance':this[_0x41dfbc(0xe5)],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1[_0x41dfbc(0xc1)][_0x41dfbc(0xff)]};}async[a90_0x39e185(0xd1)](){const _0x58db02=a90_0x39e185;var _0x556e49,_0x594bc0;if(this['retrieve'][_0x58db02(0xc8)]()&&!((_0x556e49=this[_0x58db02(0xea)])===null||_0x556e49===void 0x0?void 0x0:_0x556e49[_0x58db02(0xd0)]())){this[_0x58db02(0x107)](null);return;}if((_0x594bc0=this[_0x58db02(0xea)])===null||_0x594bc0===void 0x0?void 0x0:_0x594bc0[_0x58db02(0xd0)]()){this['csvParser'][_0x58db02(0xe6)]();return;}const _0x5a2234=await this[_0x58db02(0xf1)][_0x58db02(0x109)]();if(!_0x5a2234)return this[_0x58db02(0xd1)]();await this[_0x58db02(0x10a)](_0x5a2234);}async[a90_0x39e185(0x10a)](_0x3a9e33){const _0x5483ef=a90_0x39e185,_0x4976cc=path_1[_0x5483ef(0x103)][_0x5483ef(0xc5)](job_detail_1[_0x5483ef(0xdf)],(0x0,crypto_1[_0x5483ef(0xcd)])()),_0x127ecc=(0x0,crypto_1[_0x5483ef(0xcd)])(),_0x45e789=await this[_0x5483ef(0xef)](_0x3a9e33,_0x4976cc,_0x127ecc)[_0x5483ef(0xfc)](()=>this[_0x5483ef(0xeb)](_0x4976cc,_0x127ecc)),_0x3925a9={'columns':!![],'cast':this[_0x5483ef(0xf5)][_0x5483ef(0x100)](this)};this[_0x5483ef(0xea)]=(0x0,stream_1['pipeline'])(_0x45e789,(0x0,csv_parse_1['parse'])(_0x3925a9),this[_0x5483ef(0xba)][_0x5483ef(0x100)](this,_0x4976cc)),this['csvParser']['on'](_0x5483ef(0x108),_0x351618=>{const _0x26d452=_0x5483ef;this[_0x26d452(0xea)][_0x26d452(0xc3)](),this['push'](_0x351618);}),this[_0x5483ef(0xea)]['on']('end',async()=>{const _0x5889f9=_0x5483ef;return await utils_1[_0x5889f9(0xde)][_0x5889f9(0xbb)](_0x4976cc)&&await(0x0,promises_1['rm'])(_0x4976cc)[_0x5889f9(0xec)](this['handleError'][_0x5889f9(0x100)](this,null)),this[_0x5889f9(0xe0)]();}),this[_0x5483ef(0xea)]['on'](_0x5483ef(0x105),this['pipelineCallback']['bind'](this,_0x4976cc));}async['writeEncryptedTempFile'](_0x507dd7,_0x2d725d,_0x5e0030){const _0x17e726=a90_0x39e185,_0x43454a=fs_1[_0x17e726(0x103)]['createWriteStream'](_0x2d725d);await(0x0,promises_2[_0x17e726(0xb5)])(_0x507dd7,utils_1['CryptoUtils'][_0x17e726(0xed)](_0x5e0030),_0x43454a);}async[a90_0x39e185(0xeb)](_0xfa756e,_0x55edaa){const _0x4774a3=a90_0x39e185,_0x5cb4a0=fs_1[_0x4774a3(0x103)]['createReadStream'](_0xfa756e),_0xf482d=await this[_0x4774a3(0xe8)](_0x5cb4a0),_0xb7349e=utils_1['CryptoUtils'][_0x4774a3(0xf4)](_0x55edaa,_0xf482d);return(0x0,stream_1['pipeline'])(_0x5cb4a0,_0xb7349e,this[_0x4774a3(0xba)]['bind'](this,_0xfa756e));}async['pipelineCallback'](_0x9fa2fb,_0x371c9d){const _0x538af0=a90_0x39e185;_0x371c9d&&await this[_0x538af0(0xbc)](_0x9fa2fb,_0x371c9d);}async[a90_0x39e185(0xbc)](_0x3634b8,_0x55e8e){const _0x5531f3=a90_0x39e185;_0x3634b8&&await utils_1['FsUtils'][_0x5531f3(0xbb)](_0x3634b8)&&await(0x0,promises_1['rm'])(_0x3634b8)[_0x5531f3(0xec)](_0x2f6aa1=>job_detail_1[_0x5531f3(0xc9)][_0x5531f3(0x105)](_0x2f6aa1)),this[_0x5531f3(0xb8)](_0x55e8e);}async[a90_0x39e185(0xe8)](_0x11a936){return new Promise((_0x36abe3,_0x143475)=>{const _0x33c17b=a90_0x463b;_0x11a936['once'](_0x33c17b(0x105),_0x143475),_0x11a936[_0x33c17b(0x101)]('readable',()=>{const _0x57610b=_0x33c17b,_0x2fdcb8=_0x11a936[_0x57610b(0xe4)](0x10);_0x36abe3(_0x2fdcb8);});});}[a90_0x39e185(0xf5)](_0x3117ea,{header:_0x422a27,column:_0x1e9a36}){const _0x441475=a90_0x39e185;!this['_fieldsTypes']&&(this[_0x441475(0xd7)]=this[_0x441475(0xdc)][_0x441475(0xc6)][_0x441475(0xc4)]((_0x440bb5,{name:_0x33e5f0,type:_0x57f028})=>_0x440bb5[_0x441475(0xd4)](_0x33e5f0,_0x57f028),new Map()));if(_0x422a27)return _0x3117ea;if(!_0x3117ea)return null;switch(this[_0x441475(0xd7)][_0x441475(0xbd)](_0x1e9a36)){case'datetime':return _0x3117ea[_0x441475(0xd3)](/\.\d{3}Z$/,_0x441475(0x102));case _0x441475(0xf2):return _0x3117ea===_0x441475(0xbf);case _0x441475(0xe7):case _0x441475(0xd8):case _0x441475(0xe3):case _0x441475(0xf7):return+_0x3117ea;default:return _0x3117ea;}}}exports[a90_0x39e185(0x106)]=BaseBulkRetrieve,BaseBulkRetrieve['POLL_INTERVAL']=0x1388;