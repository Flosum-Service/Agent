const a75_0x385e27=a75_0x1b2f;(function(_0x448abb,_0x5665dd){const _0x2716a5=a75_0x1b2f,_0x5d7264=_0x448abb();while(!![]){try{const _0x53e578=parseInt(_0x2716a5(0x1d9))/0x1*(-parseInt(_0x2716a5(0x199))/0x2)+-parseInt(_0x2716a5(0x19f))/0x3+-parseInt(_0x2716a5(0x1b5))/0x4*(parseInt(_0x2716a5(0x1b2))/0x5)+parseInt(_0x2716a5(0x1c0))/0x6*(parseInt(_0x2716a5(0x1d6))/0x7)+parseInt(_0x2716a5(0x1a5))/0x8+-parseInt(_0x2716a5(0x1a4))/0x9*(parseInt(_0x2716a5(0x1bb))/0xa)+-parseInt(_0x2716a5(0x19e))/0xb*(-parseInt(_0x2716a5(0x1cd))/0xc);if(_0x53e578===_0x5665dd)break;else _0x5d7264['push'](_0x5d7264['shift']());}catch(_0x32aada){_0x5d7264['push'](_0x5d7264['shift']());}}}(a75_0x2ebf,0x84a60));const a75_0x332cfe=(function(){let _0x3b9062=!![];return function(_0x5a0cd8,_0x4867e6){const _0x50de30=_0x3b9062?function(){const _0x55983b=a75_0x1b2f;if(_0x4867e6){const _0x163746=_0x4867e6[_0x55983b(0x1b8)](_0x5a0cd8,arguments);return _0x4867e6=null,_0x163746;}}:function(){};return _0x3b9062=![],_0x50de30;};}()),a75_0x14eeef=a75_0x332cfe(this,function(){const _0x3bd584=a75_0x1b2f;return a75_0x14eeef[_0x3bd584(0x19d)]()[_0x3bd584(0x1a1)](_0x3bd584(0x1ae))[_0x3bd584(0x19d)]()['constructor'](a75_0x14eeef)['search']('(((.+)+)+)+$');});function a75_0x2ebf(){const _0x2feb35=['then','createReader','7253748qwsVkH','randomUUID','getIsDone','default','isPaused','writeEncryptedTempFile','@flosum/utils','fs/promises','datetime','69734gBeGeJ','systemLogger','get','13xwtrlB','createWriteStream','isExistsPath','fields','error','pipelineCallback','once','describe','defineProperty','__esModule','replace','set','push','pipeline','baseRetrievePayload','145658sHLqEn','handleError','reduce','end','toString','44WuOsVj','1581663wnCIWy','crypto','search','execute','csvParser','3131991GCJnyw','492736bIUrNo','_fieldsTypes','readable','retrieve','stream/promises','BaseBulkRetrieve','read','readEncryptionVector','pull','(((.+)+)+)+$','./base-retrieve','POLL_INTERVAL','_read','95AChLxQ','BulkV1QueryContentType','BaseRetrieve','219084KLZQSv','double','createReadStream','apply','percent','int','10rhDCcM','boolean','.000+0000','stream','castCsvValue','558JSDJcV','bind','path','CryptoUtils','createEncryptPipe','readEncryptedTempFile','../../constants','../job-detail','parse','true','FsUtils'];a75_0x2ebf=function(){return _0x2feb35;};return a75_0x2ebf();}a75_0x14eeef();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1f00ba){const _0x79792b=a75_0x1b2f;return _0x1f00ba&&_0x1f00ba[_0x79792b(0x1e2)]?_0x1f00ba:{'default':_0x1f00ba};};Object[a75_0x385e27(0x1e1)](exports,a75_0x385e27(0x1e2),{'value':!![]}),exports[a75_0x385e27(0x1aa)]=void 0x0;const base_retrieve_1=require(a75_0x385e27(0x1af)),stream_1=require(a75_0x385e27(0x1be)),path_1=__importDefault(require(a75_0x385e27(0x1c2))),utils_1=require(a75_0x385e27(0x1d3)),promises_1=require(a75_0x385e27(0x1d4)),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x385e27(0x1a9)),crypto_1=require(a75_0x385e27(0x1a0)),csv_parse_1=require('csv-parse'),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a75_0x385e27(0x1c7)),constants_1=require(a75_0x385e27(0x1c6));function a75_0x1b2f(_0xe5d338,_0x108ee6){const _0x1cf277=a75_0x2ebf();return a75_0x1b2f=function(_0x14eeef,_0x332cfe){_0x14eeef=_0x14eeef-0x194;let _0x2ebfd6=_0x1cf277[_0x14eeef];return _0x2ebfd6;},a75_0x1b2f(_0xe5d338,_0x108ee6);}class BaseBulkRetrieve extends base_retrieve_1[a75_0x385e27(0x1b4)]{get[a75_0x385e27(0x198)](){const _0x24c6b1=a75_0x385e27;return{'queryBuilder':this['queryBuilder'],'instance':this['request'],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1[_0x24c6b1(0x1b3)]['TEXT_CSV']};}async[a75_0x385e27(0x1ad)](){const _0x28adc6=a75_0x385e27;var _0x141d1d,_0x416e2e;if(this['retrieve'][_0x28adc6(0x1cf)]()&&!((_0x141d1d=this[_0x28adc6(0x1a3)])===null||_0x141d1d===void 0x0?void 0x0:_0x141d1d[_0x28adc6(0x1d1)]())){this[_0x28adc6(0x196)](null);return;}if((_0x416e2e=this[_0x28adc6(0x1a3)])===null||_0x416e2e===void 0x0?void 0x0:_0x416e2e['isPaused']()){this[_0x28adc6(0x1a3)]['resume']();return;}const _0x37ea5d=await this[_0x28adc6(0x1a8)][_0x28adc6(0x1a2)]();if(!_0x37ea5d)return this['pull']();await this[_0x28adc6(0x1cc)](_0x37ea5d);}async['createReader'](_0x44e2b7){const _0x1996d2=a75_0x385e27,_0x37c53b=path_1[_0x1996d2(0x1d0)]['join'](job_detail_1['jobStorePath'],(0x0,crypto_1[_0x1996d2(0x1ce)])()),_0x267b0f=(0x0,crypto_1[_0x1996d2(0x1ce)])(),_0x6bc5cd=await this[_0x1996d2(0x1d2)](_0x44e2b7,_0x37c53b,_0x267b0f)[_0x1996d2(0x1cb)](()=>this[_0x1996d2(0x1c5)](_0x37c53b,_0x267b0f)),_0x4b34e5={'columns':!![],'cast':this['castCsvValue'][_0x1996d2(0x1c1)](this)};this[_0x1996d2(0x1a3)]=(0x0,stream_1[_0x1996d2(0x197)])(_0x6bc5cd,(0x0,csv_parse_1[_0x1996d2(0x1c8)])(_0x4b34e5),this['pipelineCallback'][_0x1996d2(0x1c1)](this,_0x37c53b)),this[_0x1996d2(0x1a3)]['on']('data',_0x580038=>{const _0x17cfdd=_0x1996d2;this[_0x17cfdd(0x1a3)]['pause'](),this[_0x17cfdd(0x196)](_0x580038);}),this[_0x1996d2(0x1a3)]['on'](_0x1996d2(0x19c),async()=>{const _0x305d1b=_0x1996d2;return await utils_1[_0x305d1b(0x1ca)][_0x305d1b(0x1db)](_0x37c53b)&&await(0x0,promises_1['rm'])(_0x37c53b)['catch'](this[_0x305d1b(0x19a)][_0x305d1b(0x1c1)](this,null)),this[_0x305d1b(0x1b1)]();}),this[_0x1996d2(0x1a3)]['on'](_0x1996d2(0x1dd),this[_0x1996d2(0x1de)][_0x1996d2(0x1c1)](this,_0x37c53b));}async[a75_0x385e27(0x1d2)](_0x22aa43,_0x56ea50,_0x30b7b7){const _0x329e16=a75_0x385e27,_0x5f1000=fs_1[_0x329e16(0x1d0)][_0x329e16(0x1da)](_0x56ea50);await(0x0,promises_2[_0x329e16(0x197)])(_0x22aa43,utils_1[_0x329e16(0x1c3)][_0x329e16(0x1c4)](_0x30b7b7),_0x5f1000);}async[a75_0x385e27(0x1c5)](_0x5d63b2,_0x29ce5b){const _0x430a40=a75_0x385e27,_0x3220ed=fs_1[_0x430a40(0x1d0)][_0x430a40(0x1b7)](_0x5d63b2),_0x2e9423=await this[_0x430a40(0x1ac)](_0x3220ed),_0x35102c=utils_1[_0x430a40(0x1c3)]['createDecryptPipe'](_0x29ce5b,_0x2e9423);return(0x0,stream_1[_0x430a40(0x197)])(_0x3220ed,_0x35102c,this['pipelineCallback'][_0x430a40(0x1c1)](this,_0x5d63b2));}async[a75_0x385e27(0x1de)](_0x5080a5,_0x526241){const _0x51bea3=a75_0x385e27;_0x526241&&await this[_0x51bea3(0x19a)](_0x5080a5,_0x526241);}async['handleError'](_0x23b37d,_0x38e00f){const _0x9c2d2e=a75_0x385e27;_0x23b37d&&await utils_1[_0x9c2d2e(0x1ca)][_0x9c2d2e(0x1db)](_0x23b37d)&&await(0x0,promises_1['rm'])(_0x23b37d)['catch'](_0x2296ef=>job_detail_1[_0x9c2d2e(0x1d7)][_0x9c2d2e(0x1dd)](_0x2296ef)),this['destroy'](_0x38e00f);}async[a75_0x385e27(0x1ac)](_0x222f51){return new Promise((_0x21a767,_0x4a7cb6)=>{const _0x5429b2=a75_0x1b2f;_0x222f51[_0x5429b2(0x1df)](_0x5429b2(0x1dd),_0x4a7cb6),_0x222f51[_0x5429b2(0x1df)](_0x5429b2(0x1a7),()=>{const _0x3e030d=_0x5429b2,_0x5f3907=_0x222f51[_0x3e030d(0x1ab)](0x10);_0x21a767(_0x5f3907);});});}[a75_0x385e27(0x1bf)](_0x39eb79,{header:_0x4f8320,column:_0x161857}){const _0x42c5e2=a75_0x385e27;!this[_0x42c5e2(0x1a6)]&&(this['_fieldsTypes']=this[_0x42c5e2(0x1e0)][_0x42c5e2(0x1dc)][_0x42c5e2(0x19b)]((_0x48298b,{name:_0x2bfd4b,type:_0x3ef96d})=>_0x48298b[_0x42c5e2(0x195)](_0x2bfd4b,_0x3ef96d),new Map()));if(_0x4f8320)return _0x39eb79;if(!_0x39eb79)return null;switch(this[_0x42c5e2(0x1a6)][_0x42c5e2(0x1d8)](_0x161857)){case _0x42c5e2(0x1d5):return _0x39eb79[_0x42c5e2(0x194)](/\.\d{3}Z$/,_0x42c5e2(0x1bd));case _0x42c5e2(0x1bc):return _0x39eb79===_0x42c5e2(0x1c9);case'currency':case _0x42c5e2(0x1b6):case _0x42c5e2(0x1ba):case _0x42c5e2(0x1b9):return+_0x39eb79;default:return _0x39eb79;}}}exports[a75_0x385e27(0x1aa)]=BaseBulkRetrieve,BaseBulkRetrieve[a75_0x385e27(0x1b0)]=0x1388;