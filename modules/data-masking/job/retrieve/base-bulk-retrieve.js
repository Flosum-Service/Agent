const a74_0x3a4a31=a74_0x1030;(function(_0x1a9ee,_0x5589c9){const _0x416f69=a74_0x1030,_0x1e7b53=_0x1a9ee();while(!![]){try{const _0x7a1bea=parseInt(_0x416f69(0x223))/0x1+-parseInt(_0x416f69(0x1fc))/0x2+-parseInt(_0x416f69(0x212))/0x3+-parseInt(_0x416f69(0x222))/0x4+-parseInt(_0x416f69(0x202))/0x5+-parseInt(_0x416f69(0x1f7))/0x6+-parseInt(_0x416f69(0x201))/0x7*(-parseInt(_0x416f69(0x20b))/0x8);if(_0x7a1bea===_0x5589c9)break;else _0x1e7b53['push'](_0x1e7b53['shift']());}catch(_0x227a57){_0x1e7b53['push'](_0x1e7b53['shift']());}}}(a74_0x1bf0,0xee1e9));const a74_0x441dc8=(function(){let _0x568f48=!![];return function(_0x56d94c,_0x57c588){const _0x27501a=_0x568f48?function(){const _0x4a9ae5=a74_0x1030;if(_0x57c588){const _0x178852=_0x57c588[_0x4a9ae5(0x1ec)](_0x56d94c,arguments);return _0x57c588=null,_0x178852;}}:function(){};return _0x568f48=![],_0x27501a;};}()),a74_0x1099e4=a74_0x441dc8(this,function(){const _0x560818=a74_0x1030;return a74_0x1099e4[_0x560818(0x1ea)]()[_0x560818(0x200)]('(((.+)+)+)+$')[_0x560818(0x1ea)]()[_0x560818(0x209)](a74_0x1099e4)[_0x560818(0x200)](_0x560818(0x1ef));});function a74_0x1030(_0x7683a0,_0x2bfc9e){const _0x465ac4=a74_0x1bf0();return a74_0x1030=function(_0x1099e4,_0x441dc8){_0x1099e4=_0x1099e4-0x1e0;let _0x1bf0fc=_0x465ac4[_0x1099e4];return _0x1bf0fc;},a74_0x1030(_0x7683a0,_0x2bfc9e);}a74_0x1099e4();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x523a69){const _0x59359e=a74_0x1030;return _0x523a69&&_0x523a69[_0x59359e(0x1e2)]?_0x523a69:{'default':_0x523a69};};Object['defineProperty'](exports,a74_0x3a4a31(0x1e2),{'value':!![]}),exports[a74_0x3a4a31(0x21a)]=void 0x0;function a74_0x1bf0(){const _0x2011ab=['boolean','percent','2952212ncKPqP','reduce','jobStorePath','read','search','7renlkq','3359650IxMtRz','catch','@flosum/utils','castCsvValue','set','join','data','constructor','readable','61088200VpdaOw','destroy','POLL_INTERVAL','pause','createDecryptPipe','stream','fields','5490939FFcdbX','csvParser','int','datetime','then','stream/promises','isExistsPath','CryptoUtils','BaseBulkRetrieve','readEncryptedTempFile','createReader','createEncryptPipe','isPaused','../job-detail','path','createUnzip','5892924gjCDGB','405881TSvCcS','error','getIsDone','zlib','writeEncryptedTempFile','systemLogger','__esModule','FsUtils','get','readEncryptionVector','fs/promises','handleError','parse','pipeline','toString','randomUUID','apply','csv-parse','bind','(((.+)+)+)+$','execute','pipelineCallback','default','createReadStream','_fieldsTypes','currency','createWriteStream','9689934DWFBsL','pull','push'];a74_0x1bf0=function(){return _0x2011ab;};return a74_0x1bf0();}const base_retrieve_1=require('./base-retrieve'),stream_1=require(a74_0x3a4a31(0x210)),path_1=__importDefault(require(a74_0x3a4a31(0x220))),utils_1=require(a74_0x3a4a31(0x204)),promises_1=require(a74_0x3a4a31(0x1e6)),fs_1=__importDefault(require('fs')),promises_2=require(a74_0x3a4a31(0x217)),crypto_1=require('crypto'),csv_parse_1=require(a74_0x3a4a31(0x1ed)),zlib_1=__importDefault(require(a74_0x3a4a31(0x226))),job_detail_1=require(a74_0x3a4a31(0x21f));class BaseBulkRetrieve extends base_retrieve_1['BaseRetrieve']{async['pull'](){const _0x3ba70c=a74_0x3a4a31;var _0x4be122,_0x23ac5c;if(this['retrieve'][_0x3ba70c(0x225)]()&&!((_0x4be122=this[_0x3ba70c(0x213)])===null||_0x4be122===void 0x0?void 0x0:_0x4be122[_0x3ba70c(0x21e)]())){this[_0x3ba70c(0x1f9)](null);return;}if((_0x23ac5c=this[_0x3ba70c(0x213)])===null||_0x23ac5c===void 0x0?void 0x0:_0x23ac5c[_0x3ba70c(0x21e)]()){this['csvParser']['resume']();return;}const _0x4f8695=await this['retrieve'][_0x3ba70c(0x1f0)]();if(!_0x4f8695)return this[_0x3ba70c(0x1f8)]();await this[_0x3ba70c(0x21c)](_0x4f8695);}async[a74_0x3a4a31(0x21c)](_0x2e4dc0){const _0x2836c0=a74_0x3a4a31,_0x3482da=path_1[_0x2836c0(0x1f2)][_0x2836c0(0x207)](job_detail_1[_0x2836c0(0x1fe)],(0x0,crypto_1[_0x2836c0(0x1eb)])()),_0x2bd891=(0x0,crypto_1['randomUUID'])(),_0x3409c6=await this[_0x2836c0(0x1e0)](_0x2e4dc0,_0x3482da,_0x2bd891)[_0x2836c0(0x216)](()=>this['readEncryptedTempFile'](_0x3482da,_0x2bd891)),_0x4bd563={'columns':!![],'cast':this[_0x2836c0(0x205)][_0x2836c0(0x1ee)](this)};this['csvParser']=(0x0,stream_1[_0x2836c0(0x1e9)])(_0x3409c6,zlib_1[_0x2836c0(0x1f2)][_0x2836c0(0x221)](),(0x0,csv_parse_1[_0x2836c0(0x1e8)])(_0x4bd563),this[_0x2836c0(0x1f1)][_0x2836c0(0x1ee)](this,_0x3482da)),this['csvParser']['on'](_0x2836c0(0x208),_0x17a946=>{const _0x178db9=_0x2836c0;this[_0x178db9(0x213)][_0x178db9(0x20e)](),this['push'](_0x17a946);}),this[_0x2836c0(0x213)]['on']('end',async()=>{const _0xfcb1e1=_0x2836c0;return await utils_1[_0xfcb1e1(0x1e3)][_0xfcb1e1(0x218)](_0x3482da)&&await(0x0,promises_1['rm'])(_0x3482da)['catch'](this[_0xfcb1e1(0x1e7)][_0xfcb1e1(0x1ee)](this,null)),this['_read']();}),this[_0x2836c0(0x213)]['on'](_0x2836c0(0x224),this[_0x2836c0(0x1f1)][_0x2836c0(0x1ee)](this,_0x3482da));}async[a74_0x3a4a31(0x1e0)](_0x4f3b54,_0x21d532,_0x48aee2){const _0x4c82f3=a74_0x3a4a31,_0x20c1f5=fs_1['default'][_0x4c82f3(0x1f6)](_0x21d532);await(0x0,promises_2[_0x4c82f3(0x1e9)])(_0x4f3b54,utils_1['CryptoUtils'][_0x4c82f3(0x21d)](_0x48aee2),_0x20c1f5);}async[a74_0x3a4a31(0x21b)](_0xb22ba4,_0x3e57b6){const _0x380a1a=a74_0x3a4a31,_0x2f512e=fs_1[_0x380a1a(0x1f2)][_0x380a1a(0x1f3)](_0xb22ba4),_0xc63f5c=await this['readEncryptionVector'](_0x2f512e),_0x130723=utils_1[_0x380a1a(0x219)][_0x380a1a(0x20f)](_0x3e57b6,_0xc63f5c);return(0x0,stream_1[_0x380a1a(0x1e9)])(_0x2f512e,_0x130723,this[_0x380a1a(0x1f1)][_0x380a1a(0x1ee)](this,_0xb22ba4));}async['pipelineCallback'](_0x2c3644,_0x407fd6){const _0x38d791=a74_0x3a4a31;_0x407fd6&&await this[_0x38d791(0x1e7)](_0x2c3644,_0x407fd6);}async['handleError'](_0x386ecc,_0x3309bc){const _0x376603=a74_0x3a4a31;_0x386ecc&&await utils_1[_0x376603(0x1e3)][_0x376603(0x218)](_0x386ecc)&&await(0x0,promises_1['rm'])(_0x386ecc)[_0x376603(0x203)](_0x2023ea=>job_detail_1[_0x376603(0x1e1)][_0x376603(0x224)](_0x2023ea)),this[_0x376603(0x20c)](_0x3309bc);}async[a74_0x3a4a31(0x1e5)](_0xdc958c){return new Promise((_0x152ff5,_0x529e5e)=>{const _0x5b7692=a74_0x1030;_0xdc958c['once'](_0x5b7692(0x224),_0x529e5e),_0xdc958c['once'](_0x5b7692(0x20a),()=>{const _0x30b4e6=_0x5b7692,_0x8f474f=_0xdc958c[_0x30b4e6(0x1ff)](0x10);_0x152ff5(_0x8f474f);});});}[a74_0x3a4a31(0x205)](_0x19e5ca,{header:_0x8e15e2,column:_0x322e9b}){const _0x18bc05=a74_0x3a4a31;!this[_0x18bc05(0x1f4)]&&(this[_0x18bc05(0x1f4)]=this['describe'][_0x18bc05(0x211)][_0x18bc05(0x1fd)]((_0x5393e1,{name:_0x8cd1b9,type:_0x4eae1f})=>_0x5393e1[_0x18bc05(0x206)](_0x8cd1b9,_0x4eae1f),new Map()));if(_0x8e15e2)return _0x19e5ca;if(!_0x19e5ca)return null;switch(this['_fieldsTypes'][_0x18bc05(0x1e4)](_0x322e9b)){case _0x18bc05(0x215):return _0x19e5ca['replace'](/\.\d{3}Z$/,'.000+0000');case _0x18bc05(0x1fa):return _0x19e5ca==='true';case _0x18bc05(0x1f5):case'double':case _0x18bc05(0x214):case _0x18bc05(0x1fb):return+_0x19e5ca;default:return _0x19e5ca;}}}exports[a74_0x3a4a31(0x21a)]=BaseBulkRetrieve,BaseBulkRetrieve[a74_0x3a4a31(0x20d)]=0x1388;