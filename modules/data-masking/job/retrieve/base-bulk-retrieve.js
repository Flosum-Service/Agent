const a90_0x463950=a90_0x30ed;function a90_0x47c1(){const _0x42a913=['replace','1005IWNLRF','(((.+)+)+)+$','32cjEwQQ','then','_fieldsTypes','push','pipeline','toString','@flosum/utils','datetime','resume','reduce','getIsDone','defineProperty','../job-detail','isPaused','baseRetrievePayload','461577RuxxTA','systemLogger','boolean','get','../../constants','600dNswse','fields','constructor','double','BaseBulkRetrieve','error','crypto','__importDefault','read','FsUtils','stream/promises','apply','bind','end','.000+0000','4048254AHwMkL','describe','request','pause','csv-parse','search','464318kyraIm','21447BdvNbj','206096GpdNkb','createWriteStream','createDecryptPipe','20FVTyok','3dhxtwx','catch','path','readable','handleError','__esModule','fs/promises','queryBuilder','true','percent','writeEncryptedTempFile','createEncryptPipe','set','createReader','currency','readEncryptionVector','default','stream','CryptoUtils','csvParser','castCsvValue','retrieve','pipelineCallback','POLL_INTERVAL','parse','3699971AcXtcn','jobStorePath'];a90_0x47c1=function(){return _0x42a913;};return a90_0x47c1();}(function(_0x594cb8,_0x103698){const _0x46c62e=a90_0x30ed,_0x53a2be=_0x594cb8();while(!![]){try{const _0x156b6a=-parseInt(_0x46c62e(0x1ac))/0x1*(parseInt(_0x46c62e(0x1a6))/0x2)+parseInt(_0x46c62e(0x1d9))/0x3*(parseInt(_0x46c62e(0x1ca))/0x4)+parseInt(_0x46c62e(0x1c8))/0x5*(-parseInt(_0x46c62e(0x191))/0x6)+-parseInt(_0x46c62e(0x1a0))/0x7+parseInt(_0x46c62e(0x1a8))/0x8+-parseInt(_0x46c62e(0x1a7))/0x9+-parseInt(_0x46c62e(0x1ab))/0xa*(-parseInt(_0x46c62e(0x1c5))/0xb);if(_0x156b6a===_0x103698)break;else _0x53a2be['push'](_0x53a2be['shift']());}catch(_0x49561b){_0x53a2be['push'](_0x53a2be['shift']());}}}(a90_0x47c1,0x9a50a));const a90_0x3adbb1=(function(){let _0x398da3=!![];return function(_0x34124c,_0x31ba76){const _0x5c8904=_0x398da3?function(){const _0x1df4b0=a90_0x30ed;if(_0x31ba76){const _0x19f078=_0x31ba76[_0x1df4b0(0x19c)](_0x34124c,arguments);return _0x31ba76=null,_0x19f078;}}:function(){};return _0x398da3=![],_0x5c8904;};}()),a90_0x452218=a90_0x3adbb1(this,function(){const _0x64d676=a90_0x30ed;return a90_0x452218['toString']()[_0x64d676(0x1a5)](_0x64d676(0x1c9))[_0x64d676(0x1cf)]()[_0x64d676(0x193)](a90_0x452218)[_0x64d676(0x1a5)](_0x64d676(0x1c9));});a90_0x452218();function a90_0x30ed(_0x347733,_0x4a1006){const _0x16f3a3=a90_0x47c1();return a90_0x30ed=function(_0x452218,_0x3adbb1){_0x452218=_0x452218-0x190;let _0x47c157=_0x16f3a3[_0x452218];return _0x47c157;},a90_0x30ed(_0x347733,_0x4a1006);}'use strict';var __importDefault=this&&this[a90_0x463950(0x198)]||function(_0x1978ca){return _0x1978ca&&_0x1978ca['__esModule']?_0x1978ca:{'default':_0x1978ca};};Object[a90_0x463950(0x1d5)](exports,a90_0x463950(0x1b1),{'value':!![]}),exports[a90_0x463950(0x195)]=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require(a90_0x463950(0x1bd)),path_1=__importDefault(require(a90_0x463950(0x1ae))),utils_1=require(a90_0x463950(0x1d0)),promises_1=require(a90_0x463950(0x1b2)),fs_1=__importDefault(require('fs')),promises_2=require(a90_0x463950(0x19b)),crypto_1=require(a90_0x463950(0x197)),csv_parse_1=require(a90_0x463950(0x1a4)),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a90_0x463950(0x1d6)),constants_1=require(a90_0x463950(0x190));class BaseBulkRetrieve extends base_retrieve_1['BaseRetrieve']{get[a90_0x463950(0x1d8)](){const _0x2039f9=a90_0x463950;return{'queryBuilder':this[_0x2039f9(0x1b3)],'instance':this[_0x2039f9(0x1a2)],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1['BulkV1QueryContentType']['TEXT_CSV']};}async['pull'](){const _0x3f0a9c=a90_0x463950;var _0xbc4062,_0x280179;if(this[_0x3f0a9c(0x1c1)][_0x3f0a9c(0x1d4)]()&&!((_0xbc4062=this[_0x3f0a9c(0x1bf)])===null||_0xbc4062===void 0x0?void 0x0:_0xbc4062[_0x3f0a9c(0x1d7)]())){this['push'](null);return;}if((_0x280179=this[_0x3f0a9c(0x1bf)])===null||_0x280179===void 0x0?void 0x0:_0x280179['isPaused']()){this[_0x3f0a9c(0x1bf)][_0x3f0a9c(0x1d2)]();return;}const _0x267925=await this['retrieve']['execute']();if(!_0x267925)return this['pull']();await this[_0x3f0a9c(0x1b9)](_0x267925);}async['createReader'](_0x5e99d9){const _0x3b483f=a90_0x463950,_0x34d35f=path_1['default']['join'](job_detail_1[_0x3b483f(0x1c6)],(0x0,crypto_1['randomUUID'])()),_0x40533d=(0x0,crypto_1['randomUUID'])(),_0x4899bc=await this['writeEncryptedTempFile'](_0x5e99d9,_0x34d35f,_0x40533d)[_0x3b483f(0x1cb)](()=>this['readEncryptedTempFile'](_0x34d35f,_0x40533d)),_0x4a011d={'columns':!![],'cast':this[_0x3b483f(0x1c0)][_0x3b483f(0x19d)](this)};this['csvParser']=(0x0,stream_1['pipeline'])(_0x4899bc,(0x0,csv_parse_1[_0x3b483f(0x1c4)])(_0x4a011d),this[_0x3b483f(0x1c2)]['bind'](this,_0x34d35f)),this[_0x3b483f(0x1bf)]['on']('data',_0xc3a9ce=>{const _0x17ca46=_0x3b483f;this[_0x17ca46(0x1bf)][_0x17ca46(0x1a3)](),this[_0x17ca46(0x1cd)](_0xc3a9ce);}),this['csvParser']['on'](_0x3b483f(0x19e),async()=>{const _0x485c20=_0x3b483f;return await utils_1[_0x485c20(0x19a)]['isExistsPath'](_0x34d35f)&&await(0x0,promises_1['rm'])(_0x34d35f)[_0x485c20(0x1ad)](this[_0x485c20(0x1b0)][_0x485c20(0x19d)](this,null)),this['_read']();}),this[_0x3b483f(0x1bf)]['on'](_0x3b483f(0x196),this[_0x3b483f(0x1c2)]['bind'](this,_0x34d35f));}async[a90_0x463950(0x1b6)](_0x1e68e7,_0x448595,_0x4a7608){const _0x571bc4=a90_0x463950,_0x36042c=fs_1[_0x571bc4(0x1bc)][_0x571bc4(0x1a9)](_0x448595);await(0x0,promises_2[_0x571bc4(0x1ce)])(_0x1e68e7,utils_1[_0x571bc4(0x1be)][_0x571bc4(0x1b7)](_0x4a7608),_0x36042c);}async['readEncryptedTempFile'](_0x4acb8a,_0x3b01de){const _0x1a03ad=a90_0x463950,_0x216c43=fs_1['default']['createReadStream'](_0x4acb8a),_0x4f6051=await this[_0x1a03ad(0x1bb)](_0x216c43),_0x2a2f16=utils_1[_0x1a03ad(0x1be)][_0x1a03ad(0x1aa)](_0x3b01de,_0x4f6051);return(0x0,stream_1[_0x1a03ad(0x1ce)])(_0x216c43,_0x2a2f16,this[_0x1a03ad(0x1c2)][_0x1a03ad(0x19d)](this,_0x4acb8a));}async[a90_0x463950(0x1c2)](_0x456956,_0x4f4df0){const _0x411390=a90_0x463950;_0x4f4df0&&await this[_0x411390(0x1b0)](_0x456956,_0x4f4df0);}async[a90_0x463950(0x1b0)](_0x545911,_0x4e55d5){const _0x3f8a07=a90_0x463950;_0x545911&&await utils_1[_0x3f8a07(0x19a)]['isExistsPath'](_0x545911)&&await(0x0,promises_1['rm'])(_0x545911)[_0x3f8a07(0x1ad)](_0x573935=>job_detail_1[_0x3f8a07(0x1da)]['error'](_0x573935)),this['destroy'](_0x4e55d5);}async[a90_0x463950(0x1bb)](_0x3a00cf){return new Promise((_0x51f299,_0x2a845a)=>{const _0x599af5=a90_0x30ed;_0x3a00cf['once'](_0x599af5(0x196),_0x2a845a),_0x3a00cf['once'](_0x599af5(0x1af),()=>{const _0x24c44f=_0x599af5,_0x5fbdfe=_0x3a00cf[_0x24c44f(0x199)](0x10);_0x51f299(_0x5fbdfe);});});}[a90_0x463950(0x1c0)](_0xc499fa,{header:_0x3f4302,column:_0x2c52f0}){const _0x2f401a=a90_0x463950;!this[_0x2f401a(0x1cc)]&&(this[_0x2f401a(0x1cc)]=this[_0x2f401a(0x1a1)][_0x2f401a(0x192)][_0x2f401a(0x1d3)]((_0x355e9a,{name:_0x4d4bd5,type:_0x5974e3})=>_0x355e9a[_0x2f401a(0x1b8)](_0x4d4bd5,_0x5974e3),new Map()));if(_0x3f4302)return _0xc499fa;if(!_0xc499fa)return null;switch(this[_0x2f401a(0x1cc)][_0x2f401a(0x1dc)](_0x2c52f0)){case _0x2f401a(0x1d1):return _0xc499fa[_0x2f401a(0x1c7)](/\.\d{3}Z$/,_0x2f401a(0x19f));case _0x2f401a(0x1db):return _0xc499fa===_0x2f401a(0x1b4);case _0x2f401a(0x1ba):case _0x2f401a(0x194):case'int':case _0x2f401a(0x1b5):return+_0xc499fa;default:return _0xc499fa;}}}exports[a90_0x463950(0x195)]=BaseBulkRetrieve,BaseBulkRetrieve[a90_0x463950(0x1c3)]=0x1388;