const a75_0x121d47=a75_0x30e8;(function(_0xa19a46,_0xd48e24){const _0x454a70=a75_0x30e8,_0x355433=_0xa19a46();while(!![]){try{const _0xfd70db=parseInt(_0x454a70(0xfc))/0x1+-parseInt(_0x454a70(0xfb))/0x2*(-parseInt(_0x454a70(0x108))/0x3)+parseInt(_0x454a70(0x105))/0x4+parseInt(_0x454a70(0x102))/0x5*(parseInt(_0x454a70(0xe5))/0x6)+-parseInt(_0x454a70(0xcb))/0x7+-parseInt(_0x454a70(0xd2))/0x8*(parseInt(_0x454a70(0x10f))/0x9)+-parseInt(_0x454a70(0xf1))/0xa*(parseInt(_0x454a70(0xd7))/0xb);if(_0xfd70db===_0xd48e24)break;else _0x355433['push'](_0x355433['shift']());}catch(_0x9a3c88){_0x355433['push'](_0x355433['shift']());}}}(a75_0x450c,0x500db));function a75_0x450c(){const _0x32a465=['reduce','handleError','POLL_INTERVAL','double','343962rArjwW','join','set','toString','constructor','true','./base-retrieve','createReader','replace','get','execute','BaseBulkRetrieve','10bNXdXT','fs/promises','datetime','stream/promises','push','crypto','csv-parse','castCsvValue','readEncryptedTempFile','read','174728lLqekC','443467rtbLqn','isExistsPath','SALESFORCE_API_VERSION','CryptoUtils','FsUtils','catch','30dmsEAK','stream','percent','1912592yMoOoD','_read','baseRetrievePayload','9xDyqmy','once','parse','default','createDecryptPipe','systemLogger','currency','1383795mgjISP','BaseRetrieve','BulkV1QueryContentType','csvParser','data','479402tyRghZ','pipelineCallback','createWriteStream','randomUUID','_fieldsTypes','__esModule','defineProperty','8aZATMw','search','@flosum/utils','retrieve','then','10752819KqCPrm','bind','pull','readEncryptionVector','isPaused','TEXT_CSV','error','jobStorePath','pipeline','end'];a75_0x450c=function(){return _0x32a465;};return a75_0x450c();}const a75_0x1b1da1=(function(){let _0x34bfe1=!![];return function(_0x3ca839,_0x1f8443){const _0x8707c2=_0x34bfe1?function(){if(_0x1f8443){const _0xe0eee7=_0x1f8443['apply'](_0x3ca839,arguments);return _0x1f8443=null,_0xe0eee7;}}:function(){};return _0x34bfe1=![],_0x8707c2;};}()),a75_0x50a3a4=a75_0x1b1da1(this,function(){const _0x563687=a75_0x30e8;return a75_0x50a3a4['toString']()[_0x563687(0xd3)]('(((.+)+)+)+$')[_0x563687(0xe8)]()[_0x563687(0xe9)](a75_0x50a3a4)[_0x563687(0xd3)]('(((.+)+)+)+$');});a75_0x50a3a4();function a75_0x30e8(_0x47db9f,_0x529dfd){const _0x12f6d2=a75_0x450c();return a75_0x30e8=function(_0x50a3a4,_0x1b1da1){_0x50a3a4=_0x50a3a4-0xc8;let _0x450c3d=_0x12f6d2[_0x50a3a4];return _0x450c3d;},a75_0x30e8(_0x47db9f,_0x529dfd);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x237ff2){const _0x4803d9=a75_0x30e8;return _0x237ff2&&_0x237ff2[_0x4803d9(0xd0)]?_0x237ff2:{'default':_0x237ff2};};Object[a75_0x121d47(0xd1)](exports,a75_0x121d47(0xd0),{'value':!![]}),exports[a75_0x121d47(0xf0)]=void 0x0;const base_retrieve_1=require(a75_0x121d47(0xeb)),stream_1=require(a75_0x121d47(0x103)),path_1=__importDefault(require('path')),utils_1=require(a75_0x121d47(0xd4)),promises_1=require(a75_0x121d47(0xf2)),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x121d47(0xf4)),crypto_1=require(a75_0x121d47(0xf6)),csv_parse_1=require(a75_0x121d47(0xf7)),salesforce_1=require('@flosum/salesforce'),job_detail_1=require('../job-detail'),constants_1=require('../../constants');class BaseBulkRetrieve extends base_retrieve_1[a75_0x121d47(0x110)]{get[a75_0x121d47(0x107)](){const _0x494d71=a75_0x121d47;return{'queryBuilder':this['queryBuilder'],'instance':this['request'],'api':constants_1[_0x494d71(0xfe)],'contentType':salesforce_1[_0x494d71(0xc8)][_0x494d71(0xdc)]};}async[a75_0x121d47(0xd9)](){const _0x4c14b1=a75_0x121d47;var _0x2989bc,_0x4b73dd;if(this[_0x4c14b1(0xd5)]['getIsDone']()&&!((_0x2989bc=this[_0x4c14b1(0xc9)])===null||_0x2989bc===void 0x0?void 0x0:_0x2989bc[_0x4c14b1(0xdb)]())){this[_0x4c14b1(0xf5)](null);return;}if((_0x4b73dd=this[_0x4c14b1(0xc9)])===null||_0x4b73dd===void 0x0?void 0x0:_0x4b73dd['isPaused']()){this[_0x4c14b1(0xc9)]['resume']();return;}const _0x40f2bc=await this[_0x4c14b1(0xd5)][_0x4c14b1(0xef)]();if(!_0x40f2bc)return this[_0x4c14b1(0xd9)]();await this[_0x4c14b1(0xec)](_0x40f2bc);}async['createReader'](_0x2c0f9a){const _0xba6235=a75_0x121d47,_0x4a5fa7=path_1['default'][_0xba6235(0xe6)](job_detail_1[_0xba6235(0xde)],(0x0,crypto_1[_0xba6235(0xce)])()),_0x564e35=(0x0,crypto_1[_0xba6235(0xce)])(),_0x5f4b26=await this['writeEncryptedTempFile'](_0x2c0f9a,_0x4a5fa7,_0x564e35)[_0xba6235(0xd6)](()=>this[_0xba6235(0xf9)](_0x4a5fa7,_0x564e35)),_0x3b0ba7={'columns':!![],'cast':this[_0xba6235(0xf8)][_0xba6235(0xd8)](this)};this['csvParser']=(0x0,stream_1[_0xba6235(0xdf)])(_0x5f4b26,(0x0,csv_parse_1[_0xba6235(0x10a)])(_0x3b0ba7),this[_0xba6235(0xcc)][_0xba6235(0xd8)](this,_0x4a5fa7)),this['csvParser']['on'](_0xba6235(0xca),_0x3fbf2e=>{const _0x11b0a6=_0xba6235;this[_0x11b0a6(0xc9)]['pause'](),this[_0x11b0a6(0xf5)](_0x3fbf2e);}),this[_0xba6235(0xc9)]['on'](_0xba6235(0xe0),async()=>{const _0x4661c8=_0xba6235;return await utils_1[_0x4661c8(0x100)]['isExistsPath'](_0x4a5fa7)&&await(0x0,promises_1['rm'])(_0x4a5fa7)['catch'](this[_0x4661c8(0xe2)]['bind'](this,null)),this[_0x4661c8(0x106)]();}),this[_0xba6235(0xc9)]['on'](_0xba6235(0xdd),this[_0xba6235(0xcc)]['bind'](this,_0x4a5fa7));}async['writeEncryptedTempFile'](_0x4ff2e2,_0x249b66,_0x343b33){const _0x37066c=a75_0x121d47,_0x4105a5=fs_1[_0x37066c(0x10b)][_0x37066c(0xcd)](_0x249b66);await(0x0,promises_2[_0x37066c(0xdf)])(_0x4ff2e2,utils_1['CryptoUtils']['createEncryptPipe'](_0x343b33),_0x4105a5);}async[a75_0x121d47(0xf9)](_0x599559,_0x227d04){const _0x49b74f=a75_0x121d47,_0x438e89=fs_1[_0x49b74f(0x10b)]['createReadStream'](_0x599559),_0x11404d=await this[_0x49b74f(0xda)](_0x438e89),_0x112e98=utils_1[_0x49b74f(0xff)][_0x49b74f(0x10c)](_0x227d04,_0x11404d);return(0x0,stream_1[_0x49b74f(0xdf)])(_0x438e89,_0x112e98,this['pipelineCallback'][_0x49b74f(0xd8)](this,_0x599559));}async[a75_0x121d47(0xcc)](_0x2e914c,_0x56e7a9){const _0x5990c2=a75_0x121d47;_0x56e7a9&&await this[_0x5990c2(0xe2)](_0x2e914c,_0x56e7a9);}async[a75_0x121d47(0xe2)](_0x287840,_0x2b43ef){const _0x312d48=a75_0x121d47;_0x287840&&await utils_1[_0x312d48(0x100)][_0x312d48(0xfd)](_0x287840)&&await(0x0,promises_1['rm'])(_0x287840)[_0x312d48(0x101)](_0x30a99d=>job_detail_1[_0x312d48(0x10d)]['error'](_0x30a99d)),this['destroy'](_0x2b43ef);}async[a75_0x121d47(0xda)](_0x1df078){return new Promise((_0x474d14,_0x1765f7)=>{const _0x1cbb78=a75_0x30e8;_0x1df078[_0x1cbb78(0x109)](_0x1cbb78(0xdd),_0x1765f7),_0x1df078[_0x1cbb78(0x109)]('readable',()=>{const _0xac547d=_0x1cbb78,_0x77042=_0x1df078[_0xac547d(0xfa)](0x10);_0x474d14(_0x77042);});});}[a75_0x121d47(0xf8)](_0x2f4228,{header:_0x33d986,column:_0x4f0b13}){const _0x4c2b36=a75_0x121d47;!this[_0x4c2b36(0xcf)]&&(this['_fieldsTypes']=this['describe']['fields'][_0x4c2b36(0xe1)]((_0xeabcee,{name:_0x219574,type:_0x369512})=>_0xeabcee[_0x4c2b36(0xe7)](_0x219574,_0x369512),new Map()));if(_0x33d986)return _0x2f4228;if(!_0x2f4228)return null;switch(this[_0x4c2b36(0xcf)][_0x4c2b36(0xee)](_0x4f0b13)){case _0x4c2b36(0xf3):return _0x2f4228[_0x4c2b36(0xed)](/\.\d{3}Z$/,'.000+0000');case'boolean':return _0x2f4228===_0x4c2b36(0xea);case _0x4c2b36(0x10e):case _0x4c2b36(0xe4):case'int':case _0x4c2b36(0x104):return+_0x2f4228;default:return _0x2f4228;}}}exports[a75_0x121d47(0xf0)]=BaseBulkRetrieve,BaseBulkRetrieve[a75_0x121d47(0xe3)]=0x1388;