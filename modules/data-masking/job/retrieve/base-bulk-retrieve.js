const a92_0x22d80b=a92_0x428c;(function(_0x5d1b30,_0x18de61){const _0x54586d=a92_0x428c,_0x19cafb=_0x5d1b30();while(!![]){try{const _0x5a5786=-parseInt(_0x54586d(0x1ff))/0x1+parseInt(_0x54586d(0x1dd))/0x2*(parseInt(_0x54586d(0x1c7))/0x3)+parseInt(_0x54586d(0x1e7))/0x4*(-parseInt(_0x54586d(0x1ba))/0x5)+parseInt(_0x54586d(0x1f9))/0x6*(parseInt(_0x54586d(0x1c4))/0x7)+parseInt(_0x54586d(0x1fb))/0x8*(-parseInt(_0x54586d(0x206))/0x9)+parseInt(_0x54586d(0x1db))/0xa+-parseInt(_0x54586d(0x1f5))/0xb*(-parseInt(_0x54586d(0x1f8))/0xc);if(_0x5a5786===_0x18de61)break;else _0x19cafb['push'](_0x19cafb['shift']());}catch(_0x5bcda3){_0x19cafb['push'](_0x19cafb['shift']());}}}(a92_0x18a5,0x50977));function a92_0x428c(_0x43ee2b,_0x5ca201){const _0x5c0d6e=a92_0x18a5();return a92_0x428c=function(_0x481b1e,_0x36d0be){_0x481b1e=_0x481b1e-0x1b6;let _0x18a559=_0x5c0d6e[_0x481b1e];return _0x18a559;},a92_0x428c(_0x43ee2b,_0x5ca201);}const a92_0x36d0be=(function(){let _0x31677e=!![];return function(_0xa88df5,_0x5dfc73){const _0x4e1003=_0x31677e?function(){if(_0x5dfc73){const _0x474490=_0x5dfc73['apply'](_0xa88df5,arguments);return _0x5dfc73=null,_0x474490;}}:function(){};return _0x31677e=![],_0x4e1003;};}()),a92_0x481b1e=a92_0x36d0be(this,function(){const _0x3f8868=a92_0x428c;return a92_0x481b1e[_0x3f8868(0x1cb)]()[_0x3f8868(0x1ca)](_0x3f8868(0x1c6))['toString']()[_0x3f8868(0x1f6)](a92_0x481b1e)[_0x3f8868(0x1ca)](_0x3f8868(0x1c6));});a92_0x481b1e();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4ce463){const _0xdbfe85=a92_0x428c;return _0x4ce463&&_0x4ce463[_0xdbfe85(0x1d3)]?_0x4ce463:{'default':_0x4ce463};};Object[a92_0x22d80b(0x202)](exports,a92_0x22d80b(0x1d3),{'value':!![]}),exports[a92_0x22d80b(0x1fa)]=void 0x0;const base_retrieve_1=require(a92_0x22d80b(0x1dc)),stream_1=require(a92_0x22d80b(0x1f3)),path_1=__importDefault(require(a92_0x22d80b(0x1eb))),utils_1=require(a92_0x22d80b(0x1f7)),promises_1=require(a92_0x22d80b(0x1ef)),fs_1=__importDefault(require('fs')),promises_2=require(a92_0x22d80b(0x201)),crypto_1=require(a92_0x22d80b(0x1be)),csv_parse_1=require(a92_0x22d80b(0x1ee)),salesforce_1=require(a92_0x22d80b(0x209)),job_detail_1=require(a92_0x22d80b(0x1f1)),constants_1=require(a92_0x22d80b(0x1fd));function a92_0x18a5(){const _0x5569aa=['.000+0000','pull','FsUtils','bind','__esModule','BaseRetrieve','set','readable','read','data','join','destroy','928880aRkPdE','./base-retrieve','1322uAUrJL','percent','jobStorePath','createReader','replace','BulkV1QueryContentType','then','pipelineCallback','parse','int','8UCVMsa','POLL_INTERVAL','CryptoUtils','handleError','path','retrieve','default','csv-parse','fs/promises','catch','../job-detail','describe','stream','csvParser','341jADXqv','constructor','@flosum/utils','60492epNNPs','1488054tkvsCt','BaseBulkRetrieve','4292576RKqMlK','currency','../../constants','_read','54516rIfZno','once','stream/promises','defineProperty','reduce','pause','_fieldsTypes','9tyUarZ','resume','castCsvValue','@flosum/salesforce','true','readEncryptedTempFile','double','randomUUID','283760WGUaoq','isExistsPath','createDecryptPipe','baseRetrievePayload','crypto','end','execute','readEncryptionVector','request','push','14ovAdRj','pipeline','(((.+)+)+)+$','1314ozbeIe','fields','isPaused','search','toString','getIsDone','error','writeEncryptedTempFile'];a92_0x18a5=function(){return _0x5569aa;};return a92_0x18a5();}class BaseBulkRetrieve extends base_retrieve_1[a92_0x22d80b(0x1d4)]{get[a92_0x22d80b(0x1bd)](){const _0x1015f8=a92_0x22d80b;return{'queryBuilder':this['queryBuilder'],'instance':this[_0x1015f8(0x1c2)],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1[_0x1015f8(0x1e2)]['TEXT_CSV']};}async[a92_0x22d80b(0x1d0)](){const _0x57918c=a92_0x22d80b;var _0x121a4d,_0x380a27;if(this[_0x57918c(0x1ec)][_0x57918c(0x1cc)]()&&!((_0x121a4d=this[_0x57918c(0x1f4)])===null||_0x121a4d===void 0x0?void 0x0:_0x121a4d[_0x57918c(0x1c9)]())){this[_0x57918c(0x1c3)](null);return;}if((_0x380a27=this[_0x57918c(0x1f4)])===null||_0x380a27===void 0x0?void 0x0:_0x380a27[_0x57918c(0x1c9)]()){this[_0x57918c(0x1f4)][_0x57918c(0x207)]();return;}const _0x469190=await this[_0x57918c(0x1ec)][_0x57918c(0x1c0)]();if(!_0x469190)return this['pull']();await this[_0x57918c(0x1e0)](_0x469190);}async['createReader'](_0x3898ea){const _0x4cc5be=a92_0x22d80b,_0x3c28f9=path_1[_0x4cc5be(0x1ed)][_0x4cc5be(0x1d9)](job_detail_1[_0x4cc5be(0x1df)],(0x0,crypto_1[_0x4cc5be(0x1b9)])()),_0x50b250=(0x0,crypto_1['randomUUID'])(),_0x3ecac1=await this[_0x4cc5be(0x1ce)](_0x3898ea,_0x3c28f9,_0x50b250)[_0x4cc5be(0x1e3)](()=>this[_0x4cc5be(0x1b7)](_0x3c28f9,_0x50b250)),_0x4c7902={'columns':!![],'cast':this['castCsvValue'][_0x4cc5be(0x1d2)](this)};this[_0x4cc5be(0x1f4)]=(0x0,stream_1[_0x4cc5be(0x1c5)])(_0x3ecac1,(0x0,csv_parse_1[_0x4cc5be(0x1e5)])(_0x4c7902),this[_0x4cc5be(0x1e4)][_0x4cc5be(0x1d2)](this,_0x3c28f9)),this[_0x4cc5be(0x1f4)]['on'](_0x4cc5be(0x1d8),_0x35bd7b=>{const _0x44c5e1=_0x4cc5be;this[_0x44c5e1(0x1f4)][_0x44c5e1(0x204)](),this[_0x44c5e1(0x1c3)](_0x35bd7b);}),this[_0x4cc5be(0x1f4)]['on'](_0x4cc5be(0x1bf),async()=>{const _0xe2ba38=_0x4cc5be;return await utils_1[_0xe2ba38(0x1d1)][_0xe2ba38(0x1bb)](_0x3c28f9)&&await(0x0,promises_1['rm'])(_0x3c28f9)[_0xe2ba38(0x1f0)](this['handleError'][_0xe2ba38(0x1d2)](this,null)),this[_0xe2ba38(0x1fe)]();}),this[_0x4cc5be(0x1f4)]['on'](_0x4cc5be(0x1cd),this['pipelineCallback'][_0x4cc5be(0x1d2)](this,_0x3c28f9));}async[a92_0x22d80b(0x1ce)](_0x2d15e9,_0x7a6fcf,_0xb0f206){const _0x3f30e2=a92_0x22d80b,_0x4cb3c2=fs_1['default']['createWriteStream'](_0x7a6fcf);await(0x0,promises_2['pipeline'])(_0x2d15e9,utils_1[_0x3f30e2(0x1e9)]['createEncryptPipe'](_0xb0f206),_0x4cb3c2);}async[a92_0x22d80b(0x1b7)](_0x5b1eee,_0xdede4e){const _0x4bbe46=a92_0x22d80b,_0x3449d3=fs_1[_0x4bbe46(0x1ed)]['createReadStream'](_0x5b1eee),_0x5b055b=await this[_0x4bbe46(0x1c1)](_0x3449d3),_0x410867=utils_1['CryptoUtils'][_0x4bbe46(0x1bc)](_0xdede4e,_0x5b055b);return(0x0,stream_1[_0x4bbe46(0x1c5)])(_0x3449d3,_0x410867,this[_0x4bbe46(0x1e4)]['bind'](this,_0x5b1eee));}async[a92_0x22d80b(0x1e4)](_0x421635,_0x1a37bb){const _0x2c3471=a92_0x22d80b;_0x1a37bb&&await this[_0x2c3471(0x1ea)](_0x421635,_0x1a37bb);}async[a92_0x22d80b(0x1ea)](_0x10de60,_0x32eb01){const _0x263ef0=a92_0x22d80b;_0x10de60&&await utils_1[_0x263ef0(0x1d1)][_0x263ef0(0x1bb)](_0x10de60)&&await(0x0,promises_1['rm'])(_0x10de60)['catch'](_0x274c0a=>job_detail_1['systemLogger'][_0x263ef0(0x1cd)](_0x274c0a)),this[_0x263ef0(0x1da)](_0x32eb01);}async[a92_0x22d80b(0x1c1)](_0x154285){return new Promise((_0x510e7b,_0xf815c8)=>{const _0x3a7db7=a92_0x428c;_0x154285[_0x3a7db7(0x200)](_0x3a7db7(0x1cd),_0xf815c8),_0x154285[_0x3a7db7(0x200)](_0x3a7db7(0x1d6),()=>{const _0x3e0d5f=_0x3a7db7,_0x185177=_0x154285[_0x3e0d5f(0x1d7)](0x10);_0x510e7b(_0x185177);});});}[a92_0x22d80b(0x208)](_0x5bcbc5,{header:_0x45e2fd,column:_0x364a93}){const _0xcb4119=a92_0x22d80b;!this[_0xcb4119(0x205)]&&(this[_0xcb4119(0x205)]=this[_0xcb4119(0x1f2)][_0xcb4119(0x1c8)][_0xcb4119(0x203)]((_0x340f26,{name:_0x513d89,type:_0x1b431a})=>_0x340f26[_0xcb4119(0x1d5)](_0x513d89,_0x1b431a),new Map()));if(_0x45e2fd)return _0x5bcbc5;if(!_0x5bcbc5)return null;switch(this['_fieldsTypes']['get'](_0x364a93)){case'datetime':return _0x5bcbc5[_0xcb4119(0x1e1)](/\.\d{3}Z$/,_0xcb4119(0x1cf));case'boolean':return _0x5bcbc5===_0xcb4119(0x1b6);case _0xcb4119(0x1fc):case _0xcb4119(0x1b8):case _0xcb4119(0x1e6):case _0xcb4119(0x1de):return+_0x5bcbc5;default:return _0x5bcbc5;}}}exports['BaseBulkRetrieve']=BaseBulkRetrieve,BaseBulkRetrieve[a92_0x22d80b(0x1e8)]=0x1388;