const a92_0x21b209=a92_0x20d9;(function(_0x1f2f2b,_0x2916f9){const _0x3ae5d2=a92_0x20d9,_0x5e4dc4=_0x1f2f2b();while(!![]){try{const _0xaf59f6=-parseInt(_0x3ae5d2(0x194))/0x1+-parseInt(_0x3ae5d2(0x17a))/0x2*(-parseInt(_0x3ae5d2(0x16b))/0x3)+parseInt(_0x3ae5d2(0x185))/0x4+-parseInt(_0x3ae5d2(0x1a9))/0x5*(parseInt(_0x3ae5d2(0x1a8))/0x6)+parseInt(_0x3ae5d2(0x1aa))/0x7*(parseInt(_0x3ae5d2(0x1ae))/0x8)+-parseInt(_0x3ae5d2(0x173))/0x9*(parseInt(_0x3ae5d2(0x1a6))/0xa)+parseInt(_0x3ae5d2(0x18b))/0xb;if(_0xaf59f6===_0x2916f9)break;else _0x5e4dc4['push'](_0x5e4dc4['shift']());}catch(_0x20b0bd){_0x5e4dc4['push'](_0x5e4dc4['shift']());}}}(a92_0x6e1c,0x27983));const a92_0x266ec7=(function(){let _0x111a00=!![];return function(_0x380fce,_0x279e2f){const _0x585347=_0x111a00?function(){if(_0x279e2f){const _0x55ab4b=_0x279e2f['apply'](_0x380fce,arguments);return _0x279e2f=null,_0x55ab4b;}}:function(){};return _0x111a00=![],_0x585347;};}()),a92_0x4ea7ae=a92_0x266ec7(this,function(){const _0x46d453=a92_0x20d9;return a92_0x4ea7ae[_0x46d453(0x17c)]()[_0x46d453(0x19a)]('(((.+)+)+)+$')[_0x46d453(0x17c)]()[_0x46d453(0x17d)](a92_0x4ea7ae)['search'](_0x46d453(0x180));});function a92_0x6e1c(){const _0x230465=['.000+0000','toString','constructor','once','randomUUID','(((.+)+)+)+$','csv-parse','then','bind','castCsvValue','435992ctjIlQ','retrieve','pull','double','BaseRetrieve','../job-detail','1798467PgPloz','destroy','baseRetrievePayload','handleError','end','get','CryptoUtils','getIsDone','pipelineCallback','272565gVOaaO','default','TEXT_CSV','datetime','readable','@flosum/salesforce','search','BulkV1QueryContentType','__importDefault','error','push','boolean','currency','readEncryptedTempFile','FsUtils','readEncryptionVector','createReadStream','read','464090QzxfdZ','fields','1646556NoXfiQ','5yocShT','1029qJXZgC','stream','pause','POLL_INTERVAL','16928OUgqfC','csvParser','writeEncryptedTempFile','_fieldsTypes','createReader','../../constants','parse','./base-retrieve','percent','BaseBulkRetrieve','21qiCiXE','createWriteStream','jobStorePath','int','join','catch','@flosum/utils','pipeline','9NzfhLd','createDecryptPipe','replace','path','__esModule','isPaused','describe','49152GVPnde'];a92_0x6e1c=function(){return _0x230465;};return a92_0x6e1c();}a92_0x4ea7ae();'use strict';var __importDefault=this&&this[a92_0x21b209(0x19c)]||function(_0x5bf704){const _0x269815=a92_0x21b209;return _0x5bf704&&_0x5bf704[_0x269815(0x177)]?_0x5bf704:{'default':_0x5bf704};};Object['defineProperty'](exports,a92_0x21b209(0x177),{'value':!![]}),exports[a92_0x21b209(0x16a)]=void 0x0;const base_retrieve_1=require(a92_0x21b209(0x1b5)),stream_1=require(a92_0x21b209(0x1ab)),path_1=__importDefault(require(a92_0x21b209(0x176))),utils_1=require(a92_0x21b209(0x171)),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require('stream/promises'),crypto_1=require('crypto'),csv_parse_1=require(a92_0x21b209(0x181)),salesforce_1=require(a92_0x21b209(0x199)),job_detail_1=require(a92_0x21b209(0x18a)),constants_1=require(a92_0x21b209(0x1b3));function a92_0x20d9(_0xace17,_0x58cc9c){const _0x1bf1ea=a92_0x6e1c();return a92_0x20d9=function(_0x4ea7ae,_0x266ec7){_0x4ea7ae=_0x4ea7ae-0x169;let _0x6e1ce5=_0x1bf1ea[_0x4ea7ae];return _0x6e1ce5;},a92_0x20d9(_0xace17,_0x58cc9c);}class BaseBulkRetrieve extends base_retrieve_1[a92_0x21b209(0x189)]{get[a92_0x21b209(0x18d)](){const _0x12551f=a92_0x21b209;return{'queryBuilder':this['queryBuilder'],'instance':this['request'],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1[_0x12551f(0x19b)][_0x12551f(0x196)]};}async['pull'](){const _0x46d36a=a92_0x21b209;var _0x35e4f4,_0x2c557c;if(this[_0x46d36a(0x186)][_0x46d36a(0x192)]()&&!((_0x35e4f4=this['csvParser'])===null||_0x35e4f4===void 0x0?void 0x0:_0x35e4f4[_0x46d36a(0x178)]())){this[_0x46d36a(0x19e)](null);return;}if((_0x2c557c=this[_0x46d36a(0x1af)])===null||_0x2c557c===void 0x0?void 0x0:_0x2c557c[_0x46d36a(0x178)]()){this[_0x46d36a(0x1af)]['resume']();return;}const _0x86913c=await this[_0x46d36a(0x186)]['execute']();if(!_0x86913c)return this[_0x46d36a(0x187)]();await this[_0x46d36a(0x1b2)](_0x86913c);}async[a92_0x21b209(0x1b2)](_0x438169){const _0x3de74e=a92_0x21b209,_0x5eb47a=path_1[_0x3de74e(0x195)][_0x3de74e(0x16f)](job_detail_1[_0x3de74e(0x16d)],(0x0,crypto_1['randomUUID'])()),_0x5565b4=(0x0,crypto_1[_0x3de74e(0x17f)])(),_0x3d0835=await this[_0x3de74e(0x1b0)](_0x438169,_0x5eb47a,_0x5565b4)[_0x3de74e(0x182)](()=>this[_0x3de74e(0x1a1)](_0x5eb47a,_0x5565b4)),_0x591ebe={'columns':!![],'cast':this['castCsvValue'][_0x3de74e(0x183)](this)};this['csvParser']=(0x0,stream_1[_0x3de74e(0x172)])(_0x3d0835,(0x0,csv_parse_1[_0x3de74e(0x1b4)])(_0x591ebe),this[_0x3de74e(0x193)][_0x3de74e(0x183)](this,_0x5eb47a)),this[_0x3de74e(0x1af)]['on']('data',_0x442ffa=>{const _0xf9ebf2=_0x3de74e;this['csvParser'][_0xf9ebf2(0x1ac)](),this[_0xf9ebf2(0x19e)](_0x442ffa);}),this[_0x3de74e(0x1af)]['on'](_0x3de74e(0x18f),async()=>{const _0xb05a25=_0x3de74e;return await utils_1[_0xb05a25(0x1a2)]['isExistsPath'](_0x5eb47a)&&await(0x0,promises_1['rm'])(_0x5eb47a)[_0xb05a25(0x170)](this[_0xb05a25(0x18e)][_0xb05a25(0x183)](this,null)),this['_read']();}),this[_0x3de74e(0x1af)]['on'](_0x3de74e(0x19d),this[_0x3de74e(0x193)][_0x3de74e(0x183)](this,_0x5eb47a));}async[a92_0x21b209(0x1b0)](_0x318b2d,_0x2e7b03,_0x465cb6){const _0x1b7664=a92_0x21b209,_0x57c9cf=fs_1[_0x1b7664(0x195)][_0x1b7664(0x16c)](_0x2e7b03);await(0x0,promises_2[_0x1b7664(0x172)])(_0x318b2d,utils_1[_0x1b7664(0x191)]['createEncryptPipe'](_0x465cb6),_0x57c9cf);}async[a92_0x21b209(0x1a1)](_0x3720d4,_0x5b1f12){const _0x28fbd1=a92_0x21b209,_0x3bc97d=fs_1[_0x28fbd1(0x195)][_0x28fbd1(0x1a4)](_0x3720d4),_0x57916d=await this[_0x28fbd1(0x1a3)](_0x3bc97d),_0x33b1b7=utils_1[_0x28fbd1(0x191)][_0x28fbd1(0x174)](_0x5b1f12,_0x57916d);return(0x0,stream_1[_0x28fbd1(0x172)])(_0x3bc97d,_0x33b1b7,this['pipelineCallback'][_0x28fbd1(0x183)](this,_0x3720d4));}async[a92_0x21b209(0x193)](_0x536bb5,_0x5962bd){const _0x4dbcc4=a92_0x21b209;_0x5962bd&&await this[_0x4dbcc4(0x18e)](_0x536bb5,_0x5962bd);}async[a92_0x21b209(0x18e)](_0x5dbd48,_0x5d7554){const _0x3b9250=a92_0x21b209;_0x5dbd48&&await utils_1['FsUtils']['isExistsPath'](_0x5dbd48)&&await(0x0,promises_1['rm'])(_0x5dbd48)[_0x3b9250(0x170)](_0x5eab60=>job_detail_1['systemLogger'][_0x3b9250(0x19d)](_0x5eab60)),this[_0x3b9250(0x18c)](_0x5d7554);}async[a92_0x21b209(0x1a3)](_0x3fb4ae){return new Promise((_0x37d81d,_0x5a156e)=>{const _0x2a07b0=a92_0x20d9;_0x3fb4ae['once']('error',_0x5a156e),_0x3fb4ae[_0x2a07b0(0x17e)](_0x2a07b0(0x198),()=>{const _0x4d6a83=_0x2a07b0,_0x1f6319=_0x3fb4ae[_0x4d6a83(0x1a5)](0x10);_0x37d81d(_0x1f6319);});});}[a92_0x21b209(0x184)](_0x265b8b,{header:_0x433689,column:_0x26d479}){const _0x127e47=a92_0x21b209;!this[_0x127e47(0x1b1)]&&(this[_0x127e47(0x1b1)]=this[_0x127e47(0x179)][_0x127e47(0x1a7)]['reduce']((_0x5a4153,{name:_0x314ed9,type:_0x5e3995})=>_0x5a4153['set'](_0x314ed9,_0x5e3995),new Map()));if(_0x433689)return _0x265b8b;if(!_0x265b8b)return null;switch(this['_fieldsTypes'][_0x127e47(0x190)](_0x26d479)){case _0x127e47(0x197):return _0x265b8b[_0x127e47(0x175)](/\.\d{3}Z$/,_0x127e47(0x17b));case _0x127e47(0x19f):return _0x265b8b==='true';case _0x127e47(0x1a0):case _0x127e47(0x188):case _0x127e47(0x16e):case _0x127e47(0x169):return+_0x265b8b;default:return _0x265b8b;}}}exports[a92_0x21b209(0x16a)]=BaseBulkRetrieve,BaseBulkRetrieve[a92_0x21b209(0x1ad)]=0x1388;