const a92_0x423920=a92_0x19ee;(function(_0x272b98,_0x118fbc){const _0x547282=a92_0x19ee,_0x144270=_0x272b98();while(!![]){try{const _0xe1422d=-parseInt(_0x547282(0xd7))/0x1+parseInt(_0x547282(0xf3))/0x2*(-parseInt(_0x547282(0xe4))/0x3)+parseInt(_0x547282(0xd4))/0x4+-parseInt(_0x547282(0x106))/0x5*(parseInt(_0x547282(0xfa))/0x6)+-parseInt(_0x547282(0x11c))/0x7*(parseInt(_0x547282(0xfe))/0x8)+-parseInt(_0x547282(0xdc))/0x9*(-parseInt(_0x547282(0x11a))/0xa)+parseInt(_0x547282(0x104))/0xb*(parseInt(_0x547282(0x119))/0xc);if(_0xe1422d===_0x118fbc)break;else _0x144270['push'](_0x144270['shift']());}catch(_0x16fccd){_0x144270['push'](_0x144270['shift']());}}}(a92_0x449b,0xee84e));const a92_0x2126ea=(function(){let _0x574f53=!![];return function(_0xf6c1dc,_0x3aad9d){const _0xe2855e=_0x574f53?function(){const _0x1a948b=a92_0x19ee;if(_0x3aad9d){const _0x164325=_0x3aad9d[_0x1a948b(0x120)](_0xf6c1dc,arguments);return _0x3aad9d=null,_0x164325;}}:function(){};return _0x574f53=![],_0xe2855e;};}()),a92_0x5684fc=a92_0x2126ea(this,function(){const _0x4623e6=a92_0x19ee;return a92_0x5684fc[_0x4623e6(0x113)]()[_0x4623e6(0xd8)](_0x4623e6(0x126))[_0x4623e6(0x113)]()['constructor'](a92_0x5684fc)[_0x4623e6(0xd8)]('(((.+)+)+)+$');});a92_0x5684fc();function a92_0x19ee(_0x4b0cd8,_0x51e895){const _0x181148=a92_0x449b();return a92_0x19ee=function(_0x5684fc,_0x2126ea){_0x5684fc=_0x5684fc-0xd4;let _0x449b34=_0x181148[_0x5684fc];return _0x449b34;},a92_0x19ee(_0x4b0cd8,_0x51e895);}'use strict';var __importDefault=this&&this[a92_0x423920(0xed)]||function(_0x4a1f41){const _0x1bd4af=a92_0x423920;return _0x4a1f41&&_0x4a1f41[_0x1bd4af(0x112)]?_0x4a1f41:{'default':_0x4a1f41};};Object[a92_0x423920(0x115)](exports,a92_0x423920(0x112),{'value':!![]}),exports['BaseBulkRetrieve']=void 0x0;function a92_0x449b(){const _0x5dffdb=['createWriteStream','getIsDone','6seuGAQ','systemLogger','error','bind','2022808cIvUyT','data','csv-parse','pull','stream','BaseRetrieve','5452821FhMZkN','default','7324030JjJqTO','replace','pause','SALESFORCE_API_VERSION','queryBuilder','get','isPaused','jobStorePath','parse','pipelineCallback','catch','FsUtils','__esModule','toString','datetime','defineProperty','castCsvValue','POLL_INTERVAL','path','72qbeadb','339670UXolcu','readEncryptedTempFile','35EZLqhB','end','createReadStream','TEXT_CSV','apply','baseRetrievePayload','BulkV1QueryContentType','randomUUID','push','execute','(((.+)+)+)+$','4133916KLMomb','isExistsPath','readEncryptionVector','141671LgDqgO','search','./base-retrieve','int','../../constants','369vaAphl','join','retrieve','once','_fieldsTypes','percent','currency','true','18wZzUWX','crypto','request','BaseBulkRetrieve','@flosum/salesforce','handleError','csvParser','writeEncryptedTempFile','createDecryptPipe','__importDefault','pipeline','_read','destroy','createReader','resume','517562TMsHaN','stream/promises','createEncryptPipe','readable','CryptoUtils'];a92_0x449b=function(){return _0x5dffdb;};return a92_0x449b();}const base_retrieve_1=require(a92_0x423920(0xd9)),stream_1=require(a92_0x423920(0x102)),path_1=__importDefault(require(a92_0x423920(0x118))),utils_1=require('@flosum/utils'),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require(a92_0x423920(0xf4)),crypto_1=require(a92_0x423920(0xe5)),csv_parse_1=require(a92_0x423920(0x100)),salesforce_1=require(a92_0x423920(0xe8)),job_detail_1=require('../job-detail'),constants_1=require(a92_0x423920(0xdb));class BaseBulkRetrieve extends base_retrieve_1[a92_0x423920(0x103)]{get[a92_0x423920(0x121)](){const _0x53692=a92_0x423920;return{'queryBuilder':this[_0x53692(0x10a)],'instance':this[_0x53692(0xe6)],'api':constants_1[_0x53692(0x109)],'contentType':salesforce_1[_0x53692(0x122)][_0x53692(0x11f)]};}async[a92_0x423920(0x101)](){const _0x4af8d9=a92_0x423920;var _0x7192b2,_0xb5cd6;if(this[_0x4af8d9(0xde)][_0x4af8d9(0xf9)]()&&!((_0x7192b2=this[_0x4af8d9(0xea)])===null||_0x7192b2===void 0x0?void 0x0:_0x7192b2[_0x4af8d9(0x10c)]())){this[_0x4af8d9(0x124)](null);return;}if((_0xb5cd6=this[_0x4af8d9(0xea)])===null||_0xb5cd6===void 0x0?void 0x0:_0xb5cd6[_0x4af8d9(0x10c)]()){this[_0x4af8d9(0xea)][_0x4af8d9(0xf2)]();return;}const _0xe7a8ea=await this[_0x4af8d9(0xde)][_0x4af8d9(0x125)]();if(!_0xe7a8ea)return this[_0x4af8d9(0x101)]();await this[_0x4af8d9(0xf1)](_0xe7a8ea);}async['createReader'](_0x10a2e1){const _0x44d284=a92_0x423920,_0xf07466=path_1[_0x44d284(0x105)][_0x44d284(0xdd)](job_detail_1[_0x44d284(0x10d)],(0x0,crypto_1[_0x44d284(0x123)])()),_0x407cf8=(0x0,crypto_1[_0x44d284(0x123)])(),_0xbda59f=await this[_0x44d284(0xeb)](_0x10a2e1,_0xf07466,_0x407cf8)['then'](()=>this[_0x44d284(0x11b)](_0xf07466,_0x407cf8)),_0x391f89={'columns':!![],'cast':this[_0x44d284(0x116)][_0x44d284(0xfd)](this)};this[_0x44d284(0xea)]=(0x0,stream_1[_0x44d284(0xee)])(_0xbda59f,(0x0,csv_parse_1[_0x44d284(0x10e)])(_0x391f89),this['pipelineCallback'][_0x44d284(0xfd)](this,_0xf07466)),this[_0x44d284(0xea)]['on'](_0x44d284(0xff),_0x3c1545=>{const _0xd415a5=_0x44d284;this[_0xd415a5(0xea)][_0xd415a5(0x108)](),this[_0xd415a5(0x124)](_0x3c1545);}),this[_0x44d284(0xea)]['on'](_0x44d284(0x11d),async()=>{const _0x3a73f2=_0x44d284;return await utils_1[_0x3a73f2(0x111)][_0x3a73f2(0xd5)](_0xf07466)&&await(0x0,promises_1['rm'])(_0xf07466)[_0x3a73f2(0x110)](this[_0x3a73f2(0xe9)][_0x3a73f2(0xfd)](this,null)),this[_0x3a73f2(0xef)]();}),this['csvParser']['on'](_0x44d284(0xfc),this[_0x44d284(0x10f)][_0x44d284(0xfd)](this,_0xf07466));}async[a92_0x423920(0xeb)](_0x5e46e9,_0x5a3037,_0x1e519d){const _0x4c397d=a92_0x423920,_0x104e5c=fs_1[_0x4c397d(0x105)][_0x4c397d(0xf8)](_0x5a3037);await(0x0,promises_2[_0x4c397d(0xee)])(_0x5e46e9,utils_1[_0x4c397d(0xf7)][_0x4c397d(0xf5)](_0x1e519d),_0x104e5c);}async[a92_0x423920(0x11b)](_0x570487,_0x5542ae){const _0x879ab1=a92_0x423920,_0x45d75a=fs_1[_0x879ab1(0x105)][_0x879ab1(0x11e)](_0x570487),_0x59802a=await this[_0x879ab1(0xd6)](_0x45d75a),_0x6bdd46=utils_1['CryptoUtils'][_0x879ab1(0xec)](_0x5542ae,_0x59802a);return(0x0,stream_1['pipeline'])(_0x45d75a,_0x6bdd46,this[_0x879ab1(0x10f)][_0x879ab1(0xfd)](this,_0x570487));}async[a92_0x423920(0x10f)](_0x45642b,_0x4c113d){const _0x48d58a=a92_0x423920;_0x4c113d&&await this[_0x48d58a(0xe9)](_0x45642b,_0x4c113d);}async[a92_0x423920(0xe9)](_0x21ee87,_0x305581){const _0xf1ea0a=a92_0x423920;_0x21ee87&&await utils_1[_0xf1ea0a(0x111)]['isExistsPath'](_0x21ee87)&&await(0x0,promises_1['rm'])(_0x21ee87)['catch'](_0x566ade=>job_detail_1[_0xf1ea0a(0xfb)][_0xf1ea0a(0xfc)](_0x566ade)),this[_0xf1ea0a(0xf0)](_0x305581);}async[a92_0x423920(0xd6)](_0x5b0fe9){return new Promise((_0x505b20,_0x4bfc02)=>{const _0x6f256b=a92_0x19ee;_0x5b0fe9[_0x6f256b(0xdf)](_0x6f256b(0xfc),_0x4bfc02),_0x5b0fe9[_0x6f256b(0xdf)](_0x6f256b(0xf6),()=>{const _0x1f60e7=_0x5b0fe9['read'](0x10);_0x505b20(_0x1f60e7);});});}[a92_0x423920(0x116)](_0x49b61a,{header:_0x2bea6d,column:_0x33f9af}){const _0x418a23=a92_0x423920;!this[_0x418a23(0xe0)]&&(this['_fieldsTypes']=this['describe']['fields']['reduce']((_0x510df9,{name:_0x59642e,type:_0x504bd4})=>_0x510df9['set'](_0x59642e,_0x504bd4),new Map()));if(_0x2bea6d)return _0x49b61a;if(!_0x49b61a)return null;switch(this[_0x418a23(0xe0)][_0x418a23(0x10b)](_0x33f9af)){case _0x418a23(0x114):return _0x49b61a[_0x418a23(0x107)](/\.\d{3}Z$/,'.000+0000');case'boolean':return _0x49b61a===_0x418a23(0xe3);case _0x418a23(0xe2):case'double':case _0x418a23(0xda):case _0x418a23(0xe1):return+_0x49b61a;default:return _0x49b61a;}}}exports[a92_0x423920(0xe7)]=BaseBulkRetrieve,BaseBulkRetrieve[a92_0x423920(0x117)]=0x1388;