const a75_0x5df31d=a75_0x46d7;(function(_0x4227de,_0x54a991){const _0x1375fd=a75_0x46d7,_0x1f2a34=_0x4227de();while(!![]){try{const _0x4e9806=parseInt(_0x1375fd(0xff))/0x1*(parseInt(_0x1375fd(0xf7))/0x2)+-parseInt(_0x1375fd(0xce))/0x3+parseInt(_0x1375fd(0xdf))/0x4+-parseInt(_0x1375fd(0xfa))/0x5+parseInt(_0x1375fd(0xcf))/0x6+-parseInt(_0x1375fd(0xcd))/0x7*(-parseInt(_0x1375fd(0xf4))/0x8)+-parseInt(_0x1375fd(0x101))/0x9;if(_0x4e9806===_0x54a991)break;else _0x1f2a34['push'](_0x1f2a34['shift']());}catch(_0x86206){_0x1f2a34['push'](_0x1f2a34['shift']());}}}(a75_0x3e56,0x71bf4));const a75_0xaa82c=(function(){let _0x287564=!![];return function(_0x514272,_0xdffbd6){const _0x39f162=_0x287564?function(){if(_0xdffbd6){const _0x3f3d53=_0xdffbd6['apply'](_0x514272,arguments);return _0xdffbd6=null,_0x3f3d53;}}:function(){};return _0x287564=![],_0x39f162;};}()),a75_0x327c6c=a75_0xaa82c(this,function(){const _0xabc65d=a75_0x46d7;return a75_0x327c6c[_0xabc65d(0xed)]()[_0xabc65d(0xdd)]('(((.+)+)+)+$')[_0xabc65d(0xed)]()[_0xabc65d(0x106)](a75_0x327c6c)[_0xabc65d(0xdd)](_0xabc65d(0xe3));});a75_0x327c6c();function a75_0x46d7(_0x48bcb8,_0xbec91e){const _0x1b36d2=a75_0x3e56();return a75_0x46d7=function(_0x327c6c,_0xaa82c){_0x327c6c=_0x327c6c-0xc5;let _0x3e5654=_0x1b36d2[_0x327c6c];return _0x3e5654;},a75_0x46d7(_0x48bcb8,_0xbec91e);}'use strict';function a75_0x3e56(){const _0x2c476d=['describe','execute','writeEncryptedTempFile','_fieldsTypes','datetime','readable','destroy','search','readEncryptedTempFile','2115500jewCXA','castCsvValue','__esModule','@flosum/utils','(((.+)+)+)+$','FsUtils','zlib','fields','createReader','isExistsPath','retrieve','createDecryptPipe','BaseBulkRetrieve','./base-retrieve','toString','csv-parse','readEncryptionVector','true','parse','error','reduce','2103992DKXSty','pipelineCallback','currency','339182xIwhAh','_read','join','3322525pqkCCU','read','end','handleError','pull','4SAOfBb','isPaused','4030992GPyUEF','stream/promises','double','csvParser','crypto','constructor','pipeline','randomUUID','catch','.000+0000','push','percent','POLL_INTERVAL','once','pause','defineProperty','7nGYlas','1809252qbFwGt','4266882txEejI','path','../job-detail','CryptoUtils','default','bind','BaseRetrieve'];a75_0x3e56=function(){return _0x2c476d;};return a75_0x3e56();}var __importDefault=this&&this['__importDefault']||function(_0x1783fe){const _0x239989=a75_0x46d7;return _0x1783fe&&_0x1783fe[_0x239989(0xe1)]?_0x1783fe:{'default':_0x1783fe};};Object[a75_0x5df31d(0xcc)](exports,a75_0x5df31d(0xe1),{'value':!![]}),exports[a75_0x5df31d(0xeb)]=void 0x0;const base_retrieve_1=require(a75_0x5df31d(0xec)),stream_1=require('stream'),path_1=__importDefault(require(a75_0x5df31d(0xd0))),utils_1=require(a75_0x5df31d(0xe2)),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x5df31d(0x102)),crypto_1=require(a75_0x5df31d(0x105)),csv_parse_1=require(a75_0x5df31d(0xee)),zlib_1=__importDefault(require(a75_0x5df31d(0xe5))),job_detail_1=require(a75_0x5df31d(0xd1));class BaseBulkRetrieve extends base_retrieve_1[a75_0x5df31d(0xd5)]{async[a75_0x5df31d(0xfe)](){const _0x4a49ba=a75_0x5df31d;var _0x35bb75,_0xe44f04;if(this[_0x4a49ba(0xe9)]['getIsDone']()&&!((_0x35bb75=this[_0x4a49ba(0x104)])===null||_0x35bb75===void 0x0?void 0x0:_0x35bb75[_0x4a49ba(0x100)]())){this['push'](null);return;}if((_0xe44f04=this['csvParser'])===null||_0xe44f04===void 0x0?void 0x0:_0xe44f04['isPaused']()){this[_0x4a49ba(0x104)]['resume']();return;}const _0x3db0e3=await this['retrieve'][_0x4a49ba(0xd7)]();if(!_0x3db0e3)return this[_0x4a49ba(0xfe)]();await this[_0x4a49ba(0xe7)](_0x3db0e3);}async[a75_0x5df31d(0xe7)](_0x2662cc){const _0x13faa0=a75_0x5df31d,_0x52ac30=path_1['default'][_0x13faa0(0xf9)](job_detail_1['jobStorePath'],(0x0,crypto_1[_0x13faa0(0x108)])()),_0x514eb3=(0x0,crypto_1[_0x13faa0(0x108)])(),_0x3459c2=await this[_0x13faa0(0xd8)](_0x2662cc,_0x52ac30,_0x514eb3)['then'](()=>this[_0x13faa0(0xde)](_0x52ac30,_0x514eb3)),_0x31c5c1={'columns':!![],'cast':this[_0x13faa0(0xe0)][_0x13faa0(0xd4)](this)};this[_0x13faa0(0x104)]=(0x0,stream_1[_0x13faa0(0x107)])(_0x3459c2,zlib_1['default']['createUnzip'](),(0x0,csv_parse_1[_0x13faa0(0xf1)])(_0x31c5c1),this[_0x13faa0(0xf5)][_0x13faa0(0xd4)](this,_0x52ac30)),this[_0x13faa0(0x104)]['on']('data',_0x5b8b38=>{const _0x535b74=_0x13faa0;this['csvParser'][_0x535b74(0xcb)](),this[_0x535b74(0xc7)](_0x5b8b38);}),this[_0x13faa0(0x104)]['on'](_0x13faa0(0xfc),async()=>{const _0x29836c=_0x13faa0;return await utils_1['FsUtils']['isExistsPath'](_0x52ac30)&&await(0x0,promises_1['rm'])(_0x52ac30)[_0x29836c(0xc5)](this[_0x29836c(0xfd)][_0x29836c(0xd4)](this,null)),this[_0x29836c(0xf8)]();}),this[_0x13faa0(0x104)]['on'](_0x13faa0(0xf2),this['pipelineCallback'][_0x13faa0(0xd4)](this,_0x52ac30));}async[a75_0x5df31d(0xd8)](_0x2f45a6,_0x184a3d,_0x442db7){const _0x179ca9=a75_0x5df31d,_0x251030=fs_1['default']['createWriteStream'](_0x184a3d);await(0x0,promises_2[_0x179ca9(0x107)])(_0x2f45a6,utils_1[_0x179ca9(0xd2)]['createEncryptPipe'](_0x442db7),_0x251030);}async['readEncryptedTempFile'](_0x448278,_0x20e854){const _0x5cbe8f=a75_0x5df31d,_0x3de3d4=fs_1[_0x5cbe8f(0xd3)]['createReadStream'](_0x448278),_0x5ebf9b=await this[_0x5cbe8f(0xef)](_0x3de3d4),_0x113184=utils_1['CryptoUtils'][_0x5cbe8f(0xea)](_0x20e854,_0x5ebf9b);return(0x0,stream_1['pipeline'])(_0x3de3d4,_0x113184,this[_0x5cbe8f(0xf5)][_0x5cbe8f(0xd4)](this,_0x448278));}async[a75_0x5df31d(0xf5)](_0x4f4d19,_0x4d3449){const _0x1d3637=a75_0x5df31d;_0x4d3449&&await this[_0x1d3637(0xfd)](_0x4f4d19,_0x4d3449);}async[a75_0x5df31d(0xfd)](_0x4f0889,_0x3ef487){const _0x44fd55=a75_0x5df31d;_0x4f0889&&await utils_1[_0x44fd55(0xe4)][_0x44fd55(0xe8)](_0x4f0889)&&await(0x0,promises_1['rm'])(_0x4f0889)[_0x44fd55(0xc5)](_0x4a42a=>job_detail_1['systemLogger']['error'](_0x4a42a)),this[_0x44fd55(0xdc)](_0x3ef487);}async[a75_0x5df31d(0xef)](_0x577296){return new Promise((_0x59eb84,_0x4b5fbb)=>{const _0x897577=a75_0x46d7;_0x577296[_0x897577(0xca)]('error',_0x4b5fbb),_0x577296[_0x897577(0xca)](_0x897577(0xdb),()=>{const _0x56ad0c=_0x897577,_0x5862c0=_0x577296[_0x56ad0c(0xfb)](0x10);_0x59eb84(_0x5862c0);});});}[a75_0x5df31d(0xe0)](_0x2538f5,{header:_0x5e98fa,column:_0x59843d}){const _0x37269c=a75_0x5df31d;!this['_fieldsTypes']&&(this['_fieldsTypes']=this[_0x37269c(0xd6)][_0x37269c(0xe6)][_0x37269c(0xf3)]((_0x1832a9,{name:_0x57d649,type:_0x1f200a})=>_0x1832a9['set'](_0x57d649,_0x1f200a),new Map()));if(_0x5e98fa)return _0x2538f5;if(!_0x2538f5)return null;switch(this[_0x37269c(0xd9)]['get'](_0x59843d)){case _0x37269c(0xda):return _0x2538f5['replace'](/\.\d{3}Z$/,_0x37269c(0xc6));case'boolean':return _0x2538f5===_0x37269c(0xf0);case _0x37269c(0xf6):case _0x37269c(0x103):case'int':case _0x37269c(0xc8):return+_0x2538f5;default:return _0x2538f5;}}}exports[a75_0x5df31d(0xeb)]=BaseBulkRetrieve,BaseBulkRetrieve[a75_0x5df31d(0xc9)]=0x1388;