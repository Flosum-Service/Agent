const a74_0x46cbb5=a74_0x3f06;(function(_0x30c73f,_0x388220){const _0xefceba=a74_0x3f06,_0x104f6e=_0x30c73f();while(!![]){try{const _0x577165=-parseInt(_0xefceba(0x202))/0x1+parseInt(_0xefceba(0x1c6))/0x2+parseInt(_0xefceba(0x200))/0x3*(parseInt(_0xefceba(0x1fd))/0x4)+-parseInt(_0xefceba(0x1e4))/0x5+parseInt(_0xefceba(0x1f2))/0x6*(parseInt(_0xefceba(0x1ea))/0x7)+parseInt(_0xefceba(0x1f4))/0x8+-parseInt(_0xefceba(0x1c5))/0x9*(parseInt(_0xefceba(0x1bf))/0xa);if(_0x577165===_0x388220)break;else _0x104f6e['push'](_0x104f6e['shift']());}catch(_0x1ca98e){_0x104f6e['push'](_0x104f6e['shift']());}}}(a74_0x414a,0x1fd4b));const a74_0x1a146e=(function(){let _0x553ddc=!![];return function(_0x59e3fe,_0x828160){const _0x3aab2f=_0x553ddc?function(){if(_0x828160){const _0x1b3c34=_0x828160['apply'](_0x59e3fe,arguments);return _0x828160=null,_0x1b3c34;}}:function(){};return _0x553ddc=![],_0x3aab2f;};}()),a74_0x21a2fc=a74_0x1a146e(this,function(){const _0x30ddbb=a74_0x3f06;return a74_0x21a2fc[_0x30ddbb(0x1e8)]()[_0x30ddbb(0x1fc)](_0x30ddbb(0x1dc))[_0x30ddbb(0x1e8)]()[_0x30ddbb(0x1ca)](a74_0x21a2fc)[_0x30ddbb(0x1fc)](_0x30ddbb(0x1dc));});a74_0x21a2fc();'use strict';function a74_0x3f06(_0x3dcccb,_0x291afd){const _0x98f028=a74_0x414a();return a74_0x3f06=function(_0x21a2fc,_0x1a146e){_0x21a2fc=_0x21a2fc-0x1bc;let _0x414a0f=_0x98f028[_0x21a2fc];return _0x414a0f;},a74_0x3f06(_0x3dcccb,_0x291afd);}var __importDefault=this&&this[a74_0x46cbb5(0x1c0)]||function(_0x199f4a){const _0x256dbc=a74_0x46cbb5;return _0x199f4a&&_0x199f4a[_0x256dbc(0x1e6)]?_0x199f4a:{'default':_0x199f4a};};function a74_0x414a(){const _0x5b95c0=['retrieve','pipelineCallback','222735sNiQDW','jobStorePath','__esModule','.000+0000','toString','../job-detail','1428133nCekhT','datetime','then','crypto','BaseRetrieve','zlib','createUnzip','once','6VZQAmW','readable','907896jZEJaa','csvParser','isPaused','default','percent','reduce','BaseBulkRetrieve','double','search','104hoaMpS','createReader','randomUUID','18357AoRkbu','true','97585tDTygK','describe','writeEncryptedTempFile','createEncryptPipe','_read','read','fs/promises','POLL_INTERVAL','error','set','catch','readEncryptionVector','destroy','883020AghfcL','__importDefault','createWriteStream','execute','isExistsPath','stream/promises','36cjogKw','298238FfDcxd','resume','path','data','constructor','csv-parse','currency','getIsDone','handleError','@flosum/utils','CryptoUtils','stream','pipeline','./base-retrieve','readEncryptedTempFile','join','pull','_fieldsTypes','defineProperty','int','bind','castCsvValue','(((.+)+)+)+$','push','systemLogger','FsUtils','createReadStream','createDecryptPipe'];a74_0x414a=function(){return _0x5b95c0;};return a74_0x414a();}Object[a74_0x46cbb5(0x1d8)](exports,'__esModule',{'value':!![]}),exports[a74_0x46cbb5(0x1fa)]=void 0x0;const base_retrieve_1=require(a74_0x46cbb5(0x1d3)),stream_1=require(a74_0x46cbb5(0x1d1)),path_1=__importDefault(require(a74_0x46cbb5(0x1c8))),utils_1=require(a74_0x46cbb5(0x1cf)),promises_1=require(a74_0x46cbb5(0x208)),fs_1=__importDefault(require('fs')),promises_2=require(a74_0x46cbb5(0x1c4)),crypto_1=require(a74_0x46cbb5(0x1ed)),csv_parse_1=require(a74_0x46cbb5(0x1cb)),zlib_1=__importDefault(require(a74_0x46cbb5(0x1ef))),job_detail_1=require(a74_0x46cbb5(0x1e9));class BaseBulkRetrieve extends base_retrieve_1[a74_0x46cbb5(0x1ee)]{async[a74_0x46cbb5(0x1d6)](){const _0x3b6b19=a74_0x46cbb5;var _0xd327bd,_0x27ae20;if(this[_0x3b6b19(0x1e2)][_0x3b6b19(0x1cd)]()&&!((_0xd327bd=this[_0x3b6b19(0x1f5)])===null||_0xd327bd===void 0x0?void 0x0:_0xd327bd[_0x3b6b19(0x1f6)]())){this[_0x3b6b19(0x1dd)](null);return;}if((_0x27ae20=this['csvParser'])===null||_0x27ae20===void 0x0?void 0x0:_0x27ae20['isPaused']()){this[_0x3b6b19(0x1f5)][_0x3b6b19(0x1c7)]();return;}const _0x54cacd=await this['retrieve'][_0x3b6b19(0x1c2)]();if(!_0x54cacd)return this[_0x3b6b19(0x1d6)]();await this['createReader'](_0x54cacd);}async[a74_0x46cbb5(0x1fe)](_0x236864){const _0x4aac7f=a74_0x46cbb5,_0x234a90=path_1[_0x4aac7f(0x1f7)][_0x4aac7f(0x1d5)](job_detail_1[_0x4aac7f(0x1e5)],(0x0,crypto_1[_0x4aac7f(0x1ff)])()),_0x26eeff=(0x0,crypto_1[_0x4aac7f(0x1ff)])(),_0x4cd708=await this[_0x4aac7f(0x204)](_0x236864,_0x234a90,_0x26eeff)[_0x4aac7f(0x1ec)](()=>this[_0x4aac7f(0x1d4)](_0x234a90,_0x26eeff)),_0x29fe37={'columns':!![],'cast':this[_0x4aac7f(0x1db)]['bind'](this)};this[_0x4aac7f(0x1f5)]=(0x0,stream_1[_0x4aac7f(0x1d2)])(_0x4cd708,zlib_1[_0x4aac7f(0x1f7)][_0x4aac7f(0x1f0)](),(0x0,csv_parse_1['parse'])(_0x29fe37),this[_0x4aac7f(0x1e3)]['bind'](this,_0x234a90)),this['csvParser']['on'](_0x4aac7f(0x1c9),_0x5798a4=>{const _0x286b34=_0x4aac7f;this[_0x286b34(0x1f5)]['pause'](),this['push'](_0x5798a4);}),this[_0x4aac7f(0x1f5)]['on']('end',async()=>{const _0x33e5e0=_0x4aac7f;return await utils_1[_0x33e5e0(0x1df)][_0x33e5e0(0x1c3)](_0x234a90)&&await(0x0,promises_1['rm'])(_0x234a90)[_0x33e5e0(0x1bc)](this['handleError'][_0x33e5e0(0x1da)](this,null)),this[_0x33e5e0(0x206)]();}),this[_0x4aac7f(0x1f5)]['on']('error',this[_0x4aac7f(0x1e3)][_0x4aac7f(0x1da)](this,_0x234a90));}async[a74_0x46cbb5(0x204)](_0x58262e,_0x4957ef,_0x355330){const _0x1a269a=a74_0x46cbb5,_0x1322dc=fs_1[_0x1a269a(0x1f7)][_0x1a269a(0x1c1)](_0x4957ef);await(0x0,promises_2[_0x1a269a(0x1d2)])(_0x58262e,utils_1[_0x1a269a(0x1d0)][_0x1a269a(0x205)](_0x355330),_0x1322dc);}async['readEncryptedTempFile'](_0x62acb7,_0x456feb){const _0x55b87b=a74_0x46cbb5,_0x41ef2a=fs_1['default'][_0x55b87b(0x1e0)](_0x62acb7),_0x6982cc=await this[_0x55b87b(0x1bd)](_0x41ef2a),_0x1ed895=utils_1[_0x55b87b(0x1d0)][_0x55b87b(0x1e1)](_0x456feb,_0x6982cc);return(0x0,stream_1[_0x55b87b(0x1d2)])(_0x41ef2a,_0x1ed895,this['pipelineCallback'][_0x55b87b(0x1da)](this,_0x62acb7));}async[a74_0x46cbb5(0x1e3)](_0x3c38da,_0x5716d1){const _0x4f12ee=a74_0x46cbb5;_0x5716d1&&await this[_0x4f12ee(0x1ce)](_0x3c38da,_0x5716d1);}async['handleError'](_0x5596d8,_0x55e14e){const _0x375719=a74_0x46cbb5;_0x5596d8&&await utils_1[_0x375719(0x1df)]['isExistsPath'](_0x5596d8)&&await(0x0,promises_1['rm'])(_0x5596d8)['catch'](_0x2882f0=>job_detail_1[_0x375719(0x1de)]['error'](_0x2882f0)),this[_0x375719(0x1be)](_0x55e14e);}async['readEncryptionVector'](_0x2c363b){return new Promise((_0x41e8ac,_0x330874)=>{const _0x454907=a74_0x3f06;_0x2c363b[_0x454907(0x1f1)](_0x454907(0x20a),_0x330874),_0x2c363b[_0x454907(0x1f1)](_0x454907(0x1f3),()=>{const _0x3d6478=_0x454907,_0x48afd2=_0x2c363b[_0x3d6478(0x207)](0x10);_0x41e8ac(_0x48afd2);});});}[a74_0x46cbb5(0x1db)](_0x35b9b2,{header:_0x3a6d5a,column:_0x743f57}){const _0x2eb4bd=a74_0x46cbb5;!this[_0x2eb4bd(0x1d7)]&&(this['_fieldsTypes']=this[_0x2eb4bd(0x203)]['fields'][_0x2eb4bd(0x1f9)]((_0x397d70,{name:_0x487c19,type:_0x5c8ea6})=>_0x397d70[_0x2eb4bd(0x20b)](_0x487c19,_0x5c8ea6),new Map()));if(_0x3a6d5a)return _0x35b9b2;if(!_0x35b9b2)return null;switch(this['_fieldsTypes']['get'](_0x743f57)){case _0x2eb4bd(0x1eb):return _0x35b9b2['replace'](/\.\d{3}Z$/,_0x2eb4bd(0x1e7));case'boolean':return _0x35b9b2===_0x2eb4bd(0x201);case _0x2eb4bd(0x1cc):case _0x2eb4bd(0x1fb):case _0x2eb4bd(0x1d9):case _0x2eb4bd(0x1f8):return+_0x35b9b2;default:return _0x35b9b2;}}}exports[a74_0x46cbb5(0x1fa)]=BaseBulkRetrieve,BaseBulkRetrieve[a74_0x46cbb5(0x209)]=0x1388;