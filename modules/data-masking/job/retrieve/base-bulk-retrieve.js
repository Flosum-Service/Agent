function a92_0x5179(_0x5254e4,_0x26d68b){const _0x47bd3b=a92_0x35cb();return a92_0x5179=function(_0x4d33a6,_0x5dae6a){_0x4d33a6=_0x4d33a6-0x106;let _0x35cb3c=_0x47bd3b[_0x4d33a6];return _0x35cb3c;},a92_0x5179(_0x5254e4,_0x26d68b);}const a92_0x1937fc=a92_0x5179;(function(_0x40db56,_0x2d77db){const _0x140aca=a92_0x5179,_0x1ff86a=_0x40db56();while(!![]){try{const _0x112a61=-parseInt(_0x140aca(0x13b))/0x1*(-parseInt(_0x140aca(0x125))/0x2)+parseInt(_0x140aca(0x12e))/0x3+-parseInt(_0x140aca(0x10d))/0x4+-parseInt(_0x140aca(0x133))/0x5+-parseInt(_0x140aca(0x11b))/0x6*(-parseInt(_0x140aca(0x132))/0x7)+parseInt(_0x140aca(0x129))/0x8*(parseInt(_0x140aca(0x109))/0x9)+-parseInt(_0x140aca(0x12c))/0xa*(parseInt(_0x140aca(0x116))/0xb);if(_0x112a61===_0x2d77db)break;else _0x1ff86a['push'](_0x1ff86a['shift']());}catch(_0xbdef77){_0x1ff86a['push'](_0x1ff86a['shift']());}}}(a92_0x35cb,0xd5986));const a92_0x5dae6a=(function(){let _0x6263cb=!![];return function(_0x34304e,_0x49d78a){const _0x47f15e=_0x6263cb?function(){if(_0x49d78a){const _0x1b713d=_0x49d78a['apply'](_0x34304e,arguments);return _0x49d78a=null,_0x1b713d;}}:function(){};return _0x6263cb=![],_0x47f15e;};}()),a92_0x4d33a6=a92_0x5dae6a(this,function(){const _0x4b07d6=a92_0x5179;return a92_0x4d33a6[_0x4b07d6(0x140)]()[_0x4b07d6(0x122)](_0x4b07d6(0x108))['toString']()[_0x4b07d6(0x137)](a92_0x4d33a6)['search']('(((.+)+)+)+$');});a92_0x4d33a6();'use strict';function a92_0x35cb(){const _0x4ed716=['fs/promises','createReadStream','reduce','parse','error','@flosum/utils','writeEncryptedTempFile','then','BaseBulkRetrieve','defineProperty','handleError','pipelineCallback','catch','crypto','../job-detail','(((.+)+)+)+$','702VrhLIJ','__esModule','describe','readable','4490604ObisSs','execute','retrieve','replace','once','join','pipeline','.000+0000','push','693PjoXTL','percent','datetime','__importDefault','createReader','2610EEWAYj','readEncryptionVector','jobStorePath','queryBuilder','baseRetrievePayload','_read','CryptoUtils','search','createDecryptPipe','stream/promises','2CgmDGl','double','resume','SALESFORCE_API_VERSION','172064VzWhXE','BulkV1QueryContentType','boolean','176010emeGsh','_fieldsTypes','3064659BiCaft','bind','@flosum/salesforce','default','23121LPEAcq','5436400SnOodS','pull','FsUtils','data','constructor','path','randomUUID','stream','57698uCyoZV','isExistsPath','TEXT_CSV','castCsvValue','destroy','toString','createEncryptPipe','int','csvParser'];a92_0x35cb=function(){return _0x4ed716;};return a92_0x35cb();}var __importDefault=this&&this[a92_0x1937fc(0x119)]||function(_0x4fe06e){const _0x56f829=a92_0x1937fc;return _0x4fe06e&&_0x4fe06e[_0x56f829(0x10a)]?_0x4fe06e:{'default':_0x4fe06e};};Object[a92_0x1937fc(0x14d)](exports,a92_0x1937fc(0x10a),{'value':!![]}),exports['BaseBulkRetrieve']=void 0x0;const base_retrieve_1=require('./base-retrieve'),stream_1=require(a92_0x1937fc(0x13a)),path_1=__importDefault(require(a92_0x1937fc(0x138))),utils_1=require(a92_0x1937fc(0x149)),promises_1=require(a92_0x1937fc(0x144)),fs_1=__importDefault(require('fs')),promises_2=require(a92_0x1937fc(0x124)),crypto_1=require(a92_0x1937fc(0x106)),csv_parse_1=require('csv-parse'),salesforce_1=require(a92_0x1937fc(0x130)),job_detail_1=require(a92_0x1937fc(0x107)),constants_1=require('../../constants');class BaseBulkRetrieve extends base_retrieve_1['BaseRetrieve']{get[a92_0x1937fc(0x11f)](){const _0x2223fa=a92_0x1937fc;return{'queryBuilder':this[_0x2223fa(0x11e)],'instance':this['request'],'api':constants_1[_0x2223fa(0x128)],'contentType':salesforce_1[_0x2223fa(0x12a)][_0x2223fa(0x13d)]};}async[a92_0x1937fc(0x134)](){const _0x4c3f77=a92_0x1937fc;var _0x1a1a9f,_0x223321;if(this[_0x4c3f77(0x10f)]['getIsDone']()&&!((_0x1a1a9f=this[_0x4c3f77(0x143)])===null||_0x1a1a9f===void 0x0?void 0x0:_0x1a1a9f['isPaused']())){this[_0x4c3f77(0x115)](null);return;}if((_0x223321=this[_0x4c3f77(0x143)])===null||_0x223321===void 0x0?void 0x0:_0x223321['isPaused']()){this[_0x4c3f77(0x143)][_0x4c3f77(0x127)]();return;}const _0x541550=await this[_0x4c3f77(0x10f)][_0x4c3f77(0x10e)]();if(!_0x541550)return this['pull']();await this['createReader'](_0x541550);}async[a92_0x1937fc(0x11a)](_0x174f79){const _0x4e08a1=a92_0x1937fc,_0x4f6285=path_1['default'][_0x4e08a1(0x112)](job_detail_1[_0x4e08a1(0x11d)],(0x0,crypto_1['randomUUID'])()),_0x443f80=(0x0,crypto_1[_0x4e08a1(0x139)])(),_0x5e0e9f=await this[_0x4e08a1(0x14a)](_0x174f79,_0x4f6285,_0x443f80)[_0x4e08a1(0x14b)](()=>this['readEncryptedTempFile'](_0x4f6285,_0x443f80)),_0x2a2502={'columns':!![],'cast':this[_0x4e08a1(0x13e)][_0x4e08a1(0x12f)](this)};this[_0x4e08a1(0x143)]=(0x0,stream_1[_0x4e08a1(0x113)])(_0x5e0e9f,(0x0,csv_parse_1[_0x4e08a1(0x147)])(_0x2a2502),this['pipelineCallback'][_0x4e08a1(0x12f)](this,_0x4f6285)),this[_0x4e08a1(0x143)]['on'](_0x4e08a1(0x136),_0x27fd94=>{const _0x1bde63=_0x4e08a1;this[_0x1bde63(0x143)]['pause'](),this[_0x1bde63(0x115)](_0x27fd94);}),this[_0x4e08a1(0x143)]['on']('end',async()=>{const _0x156c0b=_0x4e08a1;return await utils_1[_0x156c0b(0x135)][_0x156c0b(0x13c)](_0x4f6285)&&await(0x0,promises_1['rm'])(_0x4f6285)[_0x156c0b(0x150)](this[_0x156c0b(0x14e)][_0x156c0b(0x12f)](this,null)),this[_0x156c0b(0x120)]();}),this[_0x4e08a1(0x143)]['on']('error',this[_0x4e08a1(0x14f)][_0x4e08a1(0x12f)](this,_0x4f6285));}async[a92_0x1937fc(0x14a)](_0x3dc882,_0x38c86e,_0x5ad071){const _0x3d9114=a92_0x1937fc,_0x1b225d=fs_1['default']['createWriteStream'](_0x38c86e);await(0x0,promises_2['pipeline'])(_0x3dc882,utils_1['CryptoUtils'][_0x3d9114(0x141)](_0x5ad071),_0x1b225d);}async['readEncryptedTempFile'](_0x4c677c,_0x2be310){const _0x82c374=a92_0x1937fc,_0x40a252=fs_1[_0x82c374(0x131)][_0x82c374(0x145)](_0x4c677c),_0x4da451=await this[_0x82c374(0x11c)](_0x40a252),_0x4db101=utils_1[_0x82c374(0x121)][_0x82c374(0x123)](_0x2be310,_0x4da451);return(0x0,stream_1[_0x82c374(0x113)])(_0x40a252,_0x4db101,this[_0x82c374(0x14f)][_0x82c374(0x12f)](this,_0x4c677c));}async[a92_0x1937fc(0x14f)](_0x36362d,_0xe97aa5){const _0x18b157=a92_0x1937fc;_0xe97aa5&&await this[_0x18b157(0x14e)](_0x36362d,_0xe97aa5);}async[a92_0x1937fc(0x14e)](_0x4f152a,_0x500cfc){const _0x466581=a92_0x1937fc;_0x4f152a&&await utils_1[_0x466581(0x135)][_0x466581(0x13c)](_0x4f152a)&&await(0x0,promises_1['rm'])(_0x4f152a)[_0x466581(0x150)](_0x4a47fa=>job_detail_1['systemLogger'][_0x466581(0x148)](_0x4a47fa)),this[_0x466581(0x13f)](_0x500cfc);}async['readEncryptionVector'](_0x5ce34d){return new Promise((_0x56a91b,_0x20a0a1)=>{const _0xd59fe4=a92_0x5179;_0x5ce34d[_0xd59fe4(0x111)]('error',_0x20a0a1),_0x5ce34d[_0xd59fe4(0x111)](_0xd59fe4(0x10c),()=>{const _0x5cd7de=_0x5ce34d['read'](0x10);_0x56a91b(_0x5cd7de);});});}[a92_0x1937fc(0x13e)](_0x5b0ea0,{header:_0x5beebb,column:_0x3b7aa6}){const _0x5c00e6=a92_0x1937fc;!this[_0x5c00e6(0x12d)]&&(this[_0x5c00e6(0x12d)]=this[_0x5c00e6(0x10b)]['fields'][_0x5c00e6(0x146)]((_0x47cd8f,{name:_0x2c8d23,type:_0x230c0f})=>_0x47cd8f['set'](_0x2c8d23,_0x230c0f),new Map()));if(_0x5beebb)return _0x5b0ea0;if(!_0x5b0ea0)return null;switch(this[_0x5c00e6(0x12d)]['get'](_0x3b7aa6)){case _0x5c00e6(0x118):return _0x5b0ea0[_0x5c00e6(0x110)](/\.\d{3}Z$/,_0x5c00e6(0x114));case _0x5c00e6(0x12b):return _0x5b0ea0==='true';case'currency':case _0x5c00e6(0x126):case _0x5c00e6(0x142):case _0x5c00e6(0x117):return+_0x5b0ea0;default:return _0x5b0ea0;}}}exports[a92_0x1937fc(0x14c)]=BaseBulkRetrieve,BaseBulkRetrieve['POLL_INTERVAL']=0x1388;