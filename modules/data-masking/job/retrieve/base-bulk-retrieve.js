const a75_0x3d4a4c=a75_0x9910;(function(_0x4c7295,_0x3c0231){const _0x1dd9b1=a75_0x9910,_0x2f36c9=_0x4c7295();while(!![]){try{const _0x2b00ad=-parseInt(_0x1dd9b1(0x129))/0x1*(-parseInt(_0x1dd9b1(0x146))/0x2)+-parseInt(_0x1dd9b1(0x15a))/0x3+-parseInt(_0x1dd9b1(0x159))/0x4+-parseInt(_0x1dd9b1(0x140))/0x5*(parseInt(_0x1dd9b1(0x15e))/0x6)+parseInt(_0x1dd9b1(0x15b))/0x7*(-parseInt(_0x1dd9b1(0x155))/0x8)+-parseInt(_0x1dd9b1(0x145))/0x9+parseInt(_0x1dd9b1(0x160))/0xa*(parseInt(_0x1dd9b1(0x13b))/0xb);if(_0x2b00ad===_0x3c0231)break;else _0x2f36c9['push'](_0x2f36c9['shift']());}catch(_0x41fd1b){_0x2f36c9['push'](_0x2f36c9['shift']());}}}(a75_0x1767,0xb4747));const a75_0x3d2b0d=(function(){let _0x5b15e4=!![];return function(_0xbe8ca4,_0x367dff){const _0x5d058e=_0x5b15e4?function(){const _0x186ea2=a75_0x9910;if(_0x367dff){const _0x2931ee=_0x367dff[_0x186ea2(0x16d)](_0xbe8ca4,arguments);return _0x367dff=null,_0x2931ee;}}:function(){};return _0x5b15e4=![],_0x5d058e;};}()),a75_0x75b883=a75_0x3d2b0d(this,function(){const _0x19256b=a75_0x9910;return a75_0x75b883[_0x19256b(0x150)]()[_0x19256b(0x12e)]('(((.+)+)+)+$')['toString']()['constructor'](a75_0x75b883)['search']('(((.+)+)+)+$');});function a75_0x9910(_0xe795ef,_0x41b128){const _0x5a4b85=a75_0x1767();return a75_0x9910=function(_0x75b883,_0x3d2b0d){_0x75b883=_0x75b883-0x129;let _0x176794=_0x5a4b85[_0x75b883];return _0x176794;},a75_0x9910(_0xe795ef,_0x41b128);}a75_0x75b883();function a75_0x1767(){const _0x5d8cc6=['pause','read','push','stream/promises','_read','datetime','pipeline','set','execute','toString','../../constants','writeEncryptedTempFile','fields','BaseBulkRetrieve','2064myvwnp','double','__importDefault','true','4030520dwGKtB','2624058vKgSpY','25613dyURpH','isExistsPath','queryBuilder','21426vkmlhl','end','192930qzpCeS','pull','readEncryptedTempFile','catch','createUnzip','TEXT_CSV','stream','createReader','_fieldsTypes','join','percent','request','resume','apply','.000+0000','readEncryptionVector','createReadStream','getIsDone','jobStorePath','replace','__esModule','createWriteStream','data','POLL_INTERVAL','path','error','CryptoUtils','11MfRYcs','castCsvValue','once','default','createEncryptPipe','search','handleError','systemLogger','@flosum/salesforce/dist/typings/enums/bulk1.enums','reduce','destroy','./base-retrieve','csvParser','pipelineCallback','BaseRetrieve','csv-parse','retrieve','bind','2277xVwbgJ','get','baseRetrievePayload','isPaused','int','1145lIEoVR','currency','createDecryptPipe','describe','readable','2359251jDYZTx','118496VDtITL'];a75_0x1767=function(){return _0x5d8cc6;};return a75_0x1767();}'use strict';var __importDefault=this&&this[a75_0x3d4a4c(0x157)]||function(_0x1eee24){const _0x1aa1bd=a75_0x3d4a4c;return _0x1eee24&&_0x1eee24[_0x1aa1bd(0x174)]?_0x1eee24:{'default':_0x1eee24};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a75_0x3d4a4c(0x154)]=void 0x0;const base_retrieve_1=require(a75_0x3d4a4c(0x134)),stream_1=require(a75_0x3d4a4c(0x166)),path_1=__importDefault(require(a75_0x3d4a4c(0x178))),utils_1=require('@flosum/utils'),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x3d4a4c(0x14a)),crypto_1=require('crypto'),csv_parse_1=require(a75_0x3d4a4c(0x138)),zlib_1=__importDefault(require('zlib')),job_detail_1=require('../job-detail'),constants_1=require(a75_0x3d4a4c(0x151)),bulk1_enums_1=require(a75_0x3d4a4c(0x131));class BaseBulkRetrieve extends base_retrieve_1[a75_0x3d4a4c(0x137)]{get[a75_0x3d4a4c(0x13d)](){const _0x325caa=a75_0x3d4a4c;return{'queryBuilder':this[_0x325caa(0x15d)],'instance':this[_0x325caa(0x16b)],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':bulk1_enums_1['BulkV1QueryContentType'][_0x325caa(0x165)]};}async[a75_0x3d4a4c(0x161)](){const _0x4c51e3=a75_0x3d4a4c;var _0x30efc3,_0x5de41c;if(this['retrieve'][_0x4c51e3(0x171)]()&&!((_0x30efc3=this[_0x4c51e3(0x135)])===null||_0x30efc3===void 0x0?void 0x0:_0x30efc3[_0x4c51e3(0x13e)]())){this[_0x4c51e3(0x149)](null);return;}if((_0x5de41c=this[_0x4c51e3(0x135)])===null||_0x5de41c===void 0x0?void 0x0:_0x5de41c[_0x4c51e3(0x13e)]()){this[_0x4c51e3(0x135)][_0x4c51e3(0x16c)]();return;}const _0x4f1c8c=await this[_0x4c51e3(0x139)][_0x4c51e3(0x14f)]();if(!_0x4f1c8c)return this[_0x4c51e3(0x161)]();await this[_0x4c51e3(0x167)](_0x4f1c8c);}async[a75_0x3d4a4c(0x167)](_0x21fe99){const _0x3ec746=a75_0x3d4a4c,_0x3724d7=path_1[_0x3ec746(0x12c)][_0x3ec746(0x169)](job_detail_1[_0x3ec746(0x172)],(0x0,crypto_1['randomUUID'])()),_0x52c9ef=(0x0,crypto_1['randomUUID'])(),_0x3a04fe=await this['writeEncryptedTempFile'](_0x21fe99,_0x3724d7,_0x52c9ef)['then'](()=>this['readEncryptedTempFile'](_0x3724d7,_0x52c9ef)),_0x176c0b={'columns':!![],'cast':this[_0x3ec746(0x12a)][_0x3ec746(0x13a)](this)};this[_0x3ec746(0x135)]=(0x0,stream_1[_0x3ec746(0x14d)])(_0x3a04fe,zlib_1[_0x3ec746(0x12c)][_0x3ec746(0x164)](),(0x0,csv_parse_1['parse'])(_0x176c0b),this[_0x3ec746(0x136)][_0x3ec746(0x13a)](this,_0x3724d7)),this['csvParser']['on'](_0x3ec746(0x176),_0x3bb8d5=>{const _0x80b502=_0x3ec746;this[_0x80b502(0x135)][_0x80b502(0x147)](),this[_0x80b502(0x149)](_0x3bb8d5);}),this[_0x3ec746(0x135)]['on'](_0x3ec746(0x15f),async()=>{const _0xbf800=_0x3ec746;return await utils_1['FsUtils'][_0xbf800(0x15c)](_0x3724d7)&&await(0x0,promises_1['rm'])(_0x3724d7)['catch'](this[_0xbf800(0x12f)]['bind'](this,null)),this[_0xbf800(0x14b)]();}),this['csvParser']['on'](_0x3ec746(0x179),this[_0x3ec746(0x136)][_0x3ec746(0x13a)](this,_0x3724d7));}async[a75_0x3d4a4c(0x152)](_0x4d1abd,_0xdaf962,_0x169ba8){const _0x35d973=a75_0x3d4a4c,_0x355728=fs_1[_0x35d973(0x12c)][_0x35d973(0x175)](_0xdaf962);await(0x0,promises_2['pipeline'])(_0x4d1abd,utils_1[_0x35d973(0x17a)][_0x35d973(0x12d)](_0x169ba8),_0x355728);}async[a75_0x3d4a4c(0x162)](_0x1fdcfe,_0x2079c8){const _0x3849ff=a75_0x3d4a4c,_0x2da90c=fs_1[_0x3849ff(0x12c)][_0x3849ff(0x170)](_0x1fdcfe),_0x4befd1=await this[_0x3849ff(0x16f)](_0x2da90c),_0x2a11d5=utils_1[_0x3849ff(0x17a)][_0x3849ff(0x142)](_0x2079c8,_0x4befd1);return(0x0,stream_1[_0x3849ff(0x14d)])(_0x2da90c,_0x2a11d5,this[_0x3849ff(0x136)][_0x3849ff(0x13a)](this,_0x1fdcfe));}async[a75_0x3d4a4c(0x136)](_0x486147,_0xf91864){const _0x11db78=a75_0x3d4a4c;_0xf91864&&await this[_0x11db78(0x12f)](_0x486147,_0xf91864);}async['handleError'](_0x19c59b,_0x17cca8){const _0x579509=a75_0x3d4a4c;_0x19c59b&&await utils_1['FsUtils'][_0x579509(0x15c)](_0x19c59b)&&await(0x0,promises_1['rm'])(_0x19c59b)[_0x579509(0x163)](_0x34df2f=>job_detail_1[_0x579509(0x130)][_0x579509(0x179)](_0x34df2f)),this[_0x579509(0x133)](_0x17cca8);}async[a75_0x3d4a4c(0x16f)](_0x2a072b){return new Promise((_0x2ad880,_0x263371)=>{const _0x302ca8=a75_0x9910;_0x2a072b['once'](_0x302ca8(0x179),_0x263371),_0x2a072b[_0x302ca8(0x12b)](_0x302ca8(0x144),()=>{const _0x3a1c5a=_0x302ca8,_0x2f6347=_0x2a072b[_0x3a1c5a(0x148)](0x10);_0x2ad880(_0x2f6347);});});}[a75_0x3d4a4c(0x12a)](_0x1514af,{header:_0x578e04,column:_0x208a42}){const _0x154c7c=a75_0x3d4a4c;!this[_0x154c7c(0x168)]&&(this[_0x154c7c(0x168)]=this[_0x154c7c(0x143)][_0x154c7c(0x153)][_0x154c7c(0x132)]((_0x425d52,{name:_0x3910cd,type:_0x395110})=>_0x425d52[_0x154c7c(0x14e)](_0x3910cd,_0x395110),new Map()));if(_0x578e04)return _0x1514af;if(!_0x1514af)return null;switch(this[_0x154c7c(0x168)][_0x154c7c(0x13c)](_0x208a42)){case _0x154c7c(0x14c):return _0x1514af[_0x154c7c(0x173)](/\.\d{3}Z$/,_0x154c7c(0x16e));case'boolean':return _0x1514af===_0x154c7c(0x158);case _0x154c7c(0x141):case _0x154c7c(0x156):case _0x154c7c(0x13f):case _0x154c7c(0x16a):return+_0x1514af;default:return _0x1514af;}}}exports[a75_0x3d4a4c(0x154)]=BaseBulkRetrieve,BaseBulkRetrieve[a75_0x3d4a4c(0x177)]=0x1388;