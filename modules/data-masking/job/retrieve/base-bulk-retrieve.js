const a93_0x5dd187=a93_0xf157;(function(_0x323f26,_0x29283d){const _0x4ff9b3=a93_0xf157,_0x5218e7=_0x323f26();while(!![]){try{const _0x31f400=parseInt(_0x4ff9b3(0x189))/0x1+-parseInt(_0x4ff9b3(0x1a6))/0x2*(-parseInt(_0x4ff9b3(0x19a))/0x3)+-parseInt(_0x4ff9b3(0x187))/0x4*(parseInt(_0x4ff9b3(0x1b5))/0x5)+-parseInt(_0x4ff9b3(0x192))/0x6*(-parseInt(_0x4ff9b3(0x182))/0x7)+-parseInt(_0x4ff9b3(0x194))/0x8+parseInt(_0x4ff9b3(0x1b0))/0x9*(parseInt(_0x4ff9b3(0x171))/0xa)+parseInt(_0x4ff9b3(0x17d))/0xb*(-parseInt(_0x4ff9b3(0x18a))/0xc);if(_0x31f400===_0x29283d)break;else _0x5218e7['push'](_0x5218e7['shift']());}catch(_0x52df25){_0x5218e7['push'](_0x5218e7['shift']());}}}(a93_0x4a1f,0xb41ba));const a93_0x59a9d9=(function(){let _0x138efc=!![];return function(_0x3fcb7d,_0x6e6270){const _0x5d5483=_0x138efc?function(){if(_0x6e6270){const _0x13e0c7=_0x6e6270['apply'](_0x3fcb7d,arguments);return _0x6e6270=null,_0x13e0c7;}}:function(){};return _0x138efc=![],_0x5d5483;};}()),a93_0x175955=a93_0x59a9d9(this,function(){const _0x54683a=a93_0xf157;return a93_0x175955[_0x54683a(0x191)]()['search'](_0x54683a(0x1b1))[_0x54683a(0x191)]()[_0x54683a(0x181)](a93_0x175955)['search'](_0x54683a(0x1b1));});function a93_0xf157(_0x1cda17,_0x1bacfd){const _0x446f73=a93_0x4a1f();return a93_0xf157=function(_0x175955,_0x59a9d9){_0x175955=_0x175955-0x16d;let _0x4a1f84=_0x446f73[_0x175955];return _0x4a1f84;},a93_0xf157(_0x1cda17,_0x1bacfd);}function a93_0x4a1f(){const _0x559214=['castCsvValue','pipeline','createEncryptPipe','2151oLDmfo','(((.+)+)+)+$','boolean','jobStorePath','fields','3211665rlqsMm','createDecryptPipe','_fieldsTypes','readEncryptedTempFile','queryBuilder','default','@flosum/utils','currency','data','execute','pull','bind','CryptoUtils','_read','path','describe','defineProperty','writeEncryptedTempFile','49040fXUYBo','destroy','BaseBulkRetrieve','isExistsPath','push','true','createReadStream','createWriteStream','systemLogger','.000+0000','BulkV1QueryContentType','reduce','168003VSemjc','BaseRetrieve','readEncryptionVector','pause','constructor','511xcDgnb','parse','randomUUID','@flosum/salesforce','baseRetrievePayload','4MPjZaz','int','1264119fKvfmZ','1536LuZHoO','isPaused','FsUtils','error','POLL_INTERVAL','resume','handleError','toString','70986waYmpx','retrieve','2127680otIrEB','end','catch','then','set','SALESFORCE_API_VERSION','53139wgdDqd','read','crypto','join','readable','__esModule','pipelineCallback','csvParser','../job-detail','./base-retrieve','getIsDone','get','34yFcdLE','__importDefault','once','TEXT_CSV','../../constants','createReader','percent'];a93_0x4a1f=function(){return _0x559214;};return a93_0x4a1f();}a93_0x175955();'use strict';var __importDefault=this&&this[a93_0x5dd187(0x1a7)]||function(_0x2f5b11){const _0x2d5d8b=a93_0x5dd187;return _0x2f5b11&&_0x2f5b11[_0x2d5d8b(0x19f)]?_0x2f5b11:{'default':_0x2f5b11};};Object[a93_0x5dd187(0x16f)](exports,a93_0x5dd187(0x19f),{'value':!![]}),exports[a93_0x5dd187(0x173)]=void 0x0;const base_retrieve_1=require(a93_0x5dd187(0x1a3)),stream_1=require('stream'),path_1=__importDefault(require(a93_0x5dd187(0x16d))),utils_1=require(a93_0x5dd187(0x1bb)),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require('stream/promises'),crypto_1=require(a93_0x5dd187(0x19c)),csv_parse_1=require('csv-parse'),salesforce_1=require(a93_0x5dd187(0x185)),job_detail_1=require(a93_0x5dd187(0x1a2)),constants_1=require(a93_0x5dd187(0x1aa));class BaseBulkRetrieve extends base_retrieve_1[a93_0x5dd187(0x17e)]{get[a93_0x5dd187(0x186)](){const _0x5d5ea0=a93_0x5dd187;return{'queryBuilder':this[_0x5d5ea0(0x1b9)],'instance':this['request'],'api':constants_1[_0x5d5ea0(0x199)],'contentType':salesforce_1[_0x5d5ea0(0x17b)][_0x5d5ea0(0x1a9)]};}async[a93_0x5dd187(0x1bf)](){const _0x51075a=a93_0x5dd187;var _0xdd70f1,_0x333890;if(this['retrieve'][_0x51075a(0x1a4)]()&&!((_0xdd70f1=this['csvParser'])===null||_0xdd70f1===void 0x0?void 0x0:_0xdd70f1[_0x51075a(0x18b)]())){this[_0x51075a(0x175)](null);return;}if((_0x333890=this[_0x51075a(0x1a1)])===null||_0x333890===void 0x0?void 0x0:_0x333890['isPaused']()){this[_0x51075a(0x1a1)][_0x51075a(0x18f)]();return;}const _0x4e97ad=await this[_0x51075a(0x193)][_0x51075a(0x1be)]();if(!_0x4e97ad)return this[_0x51075a(0x1bf)]();await this[_0x51075a(0x1ab)](_0x4e97ad);}async[a93_0x5dd187(0x1ab)](_0x27d909){const _0xb27632=a93_0x5dd187,_0x5644f9=path_1[_0xb27632(0x1ba)][_0xb27632(0x19d)](job_detail_1[_0xb27632(0x1b3)],(0x0,crypto_1['randomUUID'])()),_0x160562=(0x0,crypto_1[_0xb27632(0x184)])(),_0x2bff79=await this[_0xb27632(0x170)](_0x27d909,_0x5644f9,_0x160562)[_0xb27632(0x197)](()=>this[_0xb27632(0x1b8)](_0x5644f9,_0x160562)),_0x155339={'columns':!![],'cast':this['castCsvValue']['bind'](this)};this['csvParser']=(0x0,stream_1['pipeline'])(_0x2bff79,(0x0,csv_parse_1[_0xb27632(0x183)])(_0x155339),this[_0xb27632(0x1a0)][_0xb27632(0x1c0)](this,_0x5644f9)),this[_0xb27632(0x1a1)]['on'](_0xb27632(0x1bd),_0x700843=>{const _0x5b7bff=_0xb27632;this['csvParser'][_0x5b7bff(0x180)](),this[_0x5b7bff(0x175)](_0x700843);}),this[_0xb27632(0x1a1)]['on'](_0xb27632(0x195),async()=>{const _0x25912c=_0xb27632;return await utils_1['FsUtils']['isExistsPath'](_0x5644f9)&&await(0x0,promises_1['rm'])(_0x5644f9)['catch'](this['handleError'][_0x25912c(0x1c0)](this,null)),this[_0x25912c(0x1c2)]();}),this[_0xb27632(0x1a1)]['on']('error',this[_0xb27632(0x1a0)][_0xb27632(0x1c0)](this,_0x5644f9));}async[a93_0x5dd187(0x170)](_0x22a485,_0x7567e6,_0x56d32d){const _0x10d472=a93_0x5dd187,_0x3dc75d=fs_1[_0x10d472(0x1ba)][_0x10d472(0x178)](_0x7567e6);await(0x0,promises_2[_0x10d472(0x1ae)])(_0x22a485,utils_1[_0x10d472(0x1c1)][_0x10d472(0x1af)](_0x56d32d),_0x3dc75d);}async[a93_0x5dd187(0x1b8)](_0x4c8d33,_0x57a47c){const _0x100736=a93_0x5dd187,_0x4d49b3=fs_1[_0x100736(0x1ba)][_0x100736(0x177)](_0x4c8d33),_0x217dc3=await this['readEncryptionVector'](_0x4d49b3),_0x768a81=utils_1[_0x100736(0x1c1)][_0x100736(0x1b6)](_0x57a47c,_0x217dc3);return(0x0,stream_1[_0x100736(0x1ae)])(_0x4d49b3,_0x768a81,this[_0x100736(0x1a0)]['bind'](this,_0x4c8d33));}async[a93_0x5dd187(0x1a0)](_0x30033f,_0x5f16d5){const _0x54325a=a93_0x5dd187;_0x5f16d5&&await this[_0x54325a(0x190)](_0x30033f,_0x5f16d5);}async[a93_0x5dd187(0x190)](_0x1ff86d,_0x19b8d7){const _0x33d570=a93_0x5dd187;_0x1ff86d&&await utils_1[_0x33d570(0x18c)][_0x33d570(0x174)](_0x1ff86d)&&await(0x0,promises_1['rm'])(_0x1ff86d)[_0x33d570(0x196)](_0x556de8=>job_detail_1[_0x33d570(0x179)][_0x33d570(0x18d)](_0x556de8)),this[_0x33d570(0x172)](_0x19b8d7);}async[a93_0x5dd187(0x17f)](_0x490957){return new Promise((_0x5b53a4,_0x20ade9)=>{const _0x14c9fa=a93_0xf157;_0x490957['once'](_0x14c9fa(0x18d),_0x20ade9),_0x490957[_0x14c9fa(0x1a8)](_0x14c9fa(0x19e),()=>{const _0x38fd3a=_0x14c9fa,_0x268be7=_0x490957[_0x38fd3a(0x19b)](0x10);_0x5b53a4(_0x268be7);});});}[a93_0x5dd187(0x1ad)](_0xcb01ca,{header:_0x46bed0,column:_0x1bdcaa}){const _0x3b7b81=a93_0x5dd187;!this['_fieldsTypes']&&(this[_0x3b7b81(0x1b7)]=this[_0x3b7b81(0x16e)][_0x3b7b81(0x1b4)][_0x3b7b81(0x17c)]((_0x2faa0d,{name:_0x2603ac,type:_0x315f57})=>_0x2faa0d[_0x3b7b81(0x198)](_0x2603ac,_0x315f57),new Map()));if(_0x46bed0)return _0xcb01ca;if(!_0xcb01ca)return null;switch(this[_0x3b7b81(0x1b7)][_0x3b7b81(0x1a5)](_0x1bdcaa)){case'datetime':return _0xcb01ca['replace'](/\.\d{3}Z$/,_0x3b7b81(0x17a));case _0x3b7b81(0x1b2):return _0xcb01ca===_0x3b7b81(0x176);case _0x3b7b81(0x1bc):case'double':case _0x3b7b81(0x188):case _0x3b7b81(0x1ac):return+_0xcb01ca;default:return _0xcb01ca;}}}exports[a93_0x5dd187(0x173)]=BaseBulkRetrieve,BaseBulkRetrieve[a93_0x5dd187(0x18e)]=0x1388;