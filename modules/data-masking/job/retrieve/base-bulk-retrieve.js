function a75_0x488f(_0x2a423f,_0xc08218){const _0x31cede=a75_0x1dfa();return a75_0x488f=function(_0x793f36,_0x46272b){_0x793f36=_0x793f36-0x193;let _0x1dfadc=_0x31cede[_0x793f36];return _0x1dfadc;},a75_0x488f(_0x2a423f,_0xc08218);}const a75_0x41ba64=a75_0x488f;(function(_0x5b97ba,_0x197822){const _0x58c0ef=a75_0x488f,_0x42ff8f=_0x5b97ba();while(!![]){try{const _0x28059d=parseInt(_0x58c0ef(0x1c7))/0x1*(parseInt(_0x58c0ef(0x1d1))/0x2)+parseInt(_0x58c0ef(0x1a5))/0x3+-parseInt(_0x58c0ef(0x1e0))/0x4*(parseInt(_0x58c0ef(0x19b))/0x5)+parseInt(_0x58c0ef(0x1b3))/0x6*(-parseInt(_0x58c0ef(0x1d3))/0x7)+parseInt(_0x58c0ef(0x1df))/0x8+-parseInt(_0x58c0ef(0x1cd))/0x9+parseInt(_0x58c0ef(0x1cb))/0xa;if(_0x28059d===_0x197822)break;else _0x42ff8f['push'](_0x42ff8f['shift']());}catch(_0x33998f){_0x42ff8f['push'](_0x42ff8f['shift']());}}}(a75_0x1dfa,0x3ebad));const a75_0x46272b=(function(){let _0x3b259a=!![];return function(_0x186db1,_0x21bb2e){const _0x146a5d=_0x3b259a?function(){const _0x43eba2=a75_0x488f;if(_0x21bb2e){const _0xe8b54c=_0x21bb2e[_0x43eba2(0x1a1)](_0x186db1,arguments);return _0x21bb2e=null,_0xe8b54c;}}:function(){};return _0x3b259a=![],_0x146a5d;};}()),a75_0x793f36=a75_0x46272b(this,function(){const _0x48aef3=a75_0x488f;return a75_0x793f36[_0x48aef3(0x1ac)]()['search']('(((.+)+)+)+$')[_0x48aef3(0x1ac)]()[_0x48aef3(0x1ab)](a75_0x793f36)[_0x48aef3(0x1ca)](_0x48aef3(0x1a6));});function a75_0x1dfa(){const _0x406c53=['crypto','int','_read','constructor','toString','../job-detail','isPaused','fs/promises','_fieldsTypes','../../constants','isExistsPath','1158feDSvH','boolean','data','__importDefault','bind','readEncryptionVector','describe','createDecryptPipe','readable','createReader','error','true','end','percent','baseRetrievePayload','systemLogger','createEncryptPipe','currency','handleError','csv-parse','30416uHPOaV','POLL_INTERVAL','.000+0000','search','6028840jjCmjE','join','749142PRiHMb','replace','then','default','2HChfFW','reduce','4298eRvXaZ','writeEncryptedTempFile','__esModule','castCsvValue','./base-retrieve','pull','BaseRetrieve','resume','BaseBulkRetrieve','push','datetime','catch','1557072eClMVE','4IAHjTl','createWriteStream','readEncryptedTempFile','jobStorePath','fields','read','set','path','randomUUID','2413145HzYuAS','FsUtils','SALESFORCE_API_VERSION','defineProperty','pipelineCallback','createReadStream','apply','csvParser','request','CryptoUtils','340128HbYKpi','(((.+)+)+)+$','once'];a75_0x1dfa=function(){return _0x406c53;};return a75_0x1dfa();}a75_0x793f36();'use strict';var __importDefault=this&&this[a75_0x41ba64(0x1b6)]||function(_0x3d5039){const _0x2f063e=a75_0x41ba64;return _0x3d5039&&_0x3d5039[_0x2f063e(0x1d5)]?_0x3d5039:{'default':_0x3d5039};};Object[a75_0x41ba64(0x19e)](exports,a75_0x41ba64(0x1d5),{'value':!![]}),exports[a75_0x41ba64(0x1db)]=void 0x0;const base_retrieve_1=require(a75_0x41ba64(0x1d7)),stream_1=require('stream'),path_1=__importDefault(require(a75_0x41ba64(0x199))),utils_1=require('@flosum/utils'),promises_1=require(a75_0x41ba64(0x1af)),fs_1=__importDefault(require('fs')),promises_2=require('stream/promises'),crypto_1=require(a75_0x41ba64(0x1a8)),csv_parse_1=require(a75_0x41ba64(0x1c6)),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a75_0x41ba64(0x1ad)),constants_1=require(a75_0x41ba64(0x1b1));class BaseBulkRetrieve extends base_retrieve_1[a75_0x41ba64(0x1d9)]{get[a75_0x41ba64(0x1c1)](){const _0x515b6a=a75_0x41ba64;return{'queryBuilder':this['queryBuilder'],'instance':this[_0x515b6a(0x1a3)],'api':constants_1[_0x515b6a(0x19d)],'contentType':salesforce_1['BulkV1QueryContentType']['TEXT_CSV']};}async[a75_0x41ba64(0x1d8)](){const _0xa3384d=a75_0x41ba64;var _0x257e9c,_0x5567d7;if(this['retrieve']['getIsDone']()&&!((_0x257e9c=this['csvParser'])===null||_0x257e9c===void 0x0?void 0x0:_0x257e9c[_0xa3384d(0x1ae)]())){this[_0xa3384d(0x1dc)](null);return;}if((_0x5567d7=this[_0xa3384d(0x1a2)])===null||_0x5567d7===void 0x0?void 0x0:_0x5567d7[_0xa3384d(0x1ae)]()){this[_0xa3384d(0x1a2)][_0xa3384d(0x1da)]();return;}const _0x236793=await this['retrieve']['execute']();if(!_0x236793)return this['pull']();await this[_0xa3384d(0x1bc)](_0x236793);}async[a75_0x41ba64(0x1bc)](_0xe193){const _0x2409b4=a75_0x41ba64,_0x13d834=path_1[_0x2409b4(0x1d0)][_0x2409b4(0x1cc)](job_detail_1[_0x2409b4(0x195)],(0x0,crypto_1[_0x2409b4(0x19a)])()),_0x27fc54=(0x0,crypto_1[_0x2409b4(0x19a)])(),_0xbf49d7=await this[_0x2409b4(0x1d4)](_0xe193,_0x13d834,_0x27fc54)[_0x2409b4(0x1cf)](()=>this['readEncryptedTempFile'](_0x13d834,_0x27fc54)),_0x3ef3f8={'columns':!![],'cast':this['castCsvValue'][_0x2409b4(0x1b7)](this)};this[_0x2409b4(0x1a2)]=(0x0,stream_1['pipeline'])(_0xbf49d7,(0x0,csv_parse_1['parse'])(_0x3ef3f8),this['pipelineCallback'][_0x2409b4(0x1b7)](this,_0x13d834)),this['csvParser']['on'](_0x2409b4(0x1b5),_0x1996dd=>{const _0x12b369=_0x2409b4;this[_0x12b369(0x1a2)]['pause'](),this['push'](_0x1996dd);}),this[_0x2409b4(0x1a2)]['on'](_0x2409b4(0x1bf),async()=>{const _0x2d7878=_0x2409b4;return await utils_1[_0x2d7878(0x19c)][_0x2d7878(0x1b2)](_0x13d834)&&await(0x0,promises_1['rm'])(_0x13d834)[_0x2d7878(0x1de)](this[_0x2d7878(0x1c5)][_0x2d7878(0x1b7)](this,null)),this[_0x2d7878(0x1aa)]();}),this[_0x2409b4(0x1a2)]['on'](_0x2409b4(0x1bd),this[_0x2409b4(0x19f)]['bind'](this,_0x13d834));}async[a75_0x41ba64(0x1d4)](_0x1c0743,_0x483808,_0x232106){const _0xc20723=a75_0x41ba64,_0x363217=fs_1[_0xc20723(0x1d0)][_0xc20723(0x193)](_0x483808);await(0x0,promises_2['pipeline'])(_0x1c0743,utils_1['CryptoUtils'][_0xc20723(0x1c3)](_0x232106),_0x363217);}async[a75_0x41ba64(0x194)](_0x5771,_0x4a2859){const _0x3632e9=a75_0x41ba64,_0x340271=fs_1[_0x3632e9(0x1d0)][_0x3632e9(0x1a0)](_0x5771),_0x141233=await this[_0x3632e9(0x1b8)](_0x340271),_0x5d9a5d=utils_1[_0x3632e9(0x1a4)][_0x3632e9(0x1ba)](_0x4a2859,_0x141233);return(0x0,stream_1['pipeline'])(_0x340271,_0x5d9a5d,this['pipelineCallback'][_0x3632e9(0x1b7)](this,_0x5771));}async[a75_0x41ba64(0x19f)](_0x362131,_0x4e1c33){const _0x3a698a=a75_0x41ba64;_0x4e1c33&&await this[_0x3a698a(0x1c5)](_0x362131,_0x4e1c33);}async['handleError'](_0x15cf55,_0x45ad0c){const _0x4804e3=a75_0x41ba64;_0x15cf55&&await utils_1[_0x4804e3(0x19c)][_0x4804e3(0x1b2)](_0x15cf55)&&await(0x0,promises_1['rm'])(_0x15cf55)['catch'](_0x2d7c05=>job_detail_1[_0x4804e3(0x1c2)][_0x4804e3(0x1bd)](_0x2d7c05)),this['destroy'](_0x45ad0c);}async[a75_0x41ba64(0x1b8)](_0x28817e){return new Promise((_0xa73a5f,_0x4f3044)=>{const _0x29a307=a75_0x488f;_0x28817e[_0x29a307(0x1a7)](_0x29a307(0x1bd),_0x4f3044),_0x28817e['once'](_0x29a307(0x1bb),()=>{const _0x16a995=_0x29a307,_0x10402e=_0x28817e[_0x16a995(0x197)](0x10);_0xa73a5f(_0x10402e);});});}[a75_0x41ba64(0x1d6)](_0x2513c9,{header:_0xc7909,column:_0xb9941e}){const _0xc2b115=a75_0x41ba64;!this['_fieldsTypes']&&(this[_0xc2b115(0x1b0)]=this[_0xc2b115(0x1b9)][_0xc2b115(0x196)][_0xc2b115(0x1d2)]((_0x110b64,{name:_0x35d42a,type:_0x5f2b8d})=>_0x110b64[_0xc2b115(0x198)](_0x35d42a,_0x5f2b8d),new Map()));if(_0xc7909)return _0x2513c9;if(!_0x2513c9)return null;switch(this['_fieldsTypes']['get'](_0xb9941e)){case _0xc2b115(0x1dd):return _0x2513c9[_0xc2b115(0x1ce)](/\.\d{3}Z$/,_0xc2b115(0x1c9));case _0xc2b115(0x1b4):return _0x2513c9===_0xc2b115(0x1be);case _0xc2b115(0x1c4):case'double':case _0xc2b115(0x1a9):case _0xc2b115(0x1c0):return+_0x2513c9;default:return _0x2513c9;}}}exports[a75_0x41ba64(0x1db)]=BaseBulkRetrieve,BaseBulkRetrieve[a75_0x41ba64(0x1c8)]=0x1388;