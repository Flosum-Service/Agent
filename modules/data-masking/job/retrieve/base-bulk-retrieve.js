const a92_0xca2ce5=a92_0x4656;(function(_0x5afe2c,_0x3c4cca){const _0x4848b5=a92_0x4656,_0x4785d9=_0x5afe2c();while(!![]){try{const _0x3ee2be=-parseInt(_0x4848b5(0xcb))/0x1+-parseInt(_0x4848b5(0xca))/0x2+parseInt(_0x4848b5(0xb7))/0x3+-parseInt(_0x4848b5(0xc8))/0x4+-parseInt(_0x4848b5(0xae))/0x5*(-parseInt(_0x4848b5(0xa4))/0x6)+-parseInt(_0x4848b5(0xa0))/0x7*(parseInt(_0x4848b5(0xdb))/0x8)+-parseInt(_0x4848b5(0xaf))/0x9;if(_0x3ee2be===_0x3c4cca)break;else _0x4785d9['push'](_0x4785d9['shift']());}catch(_0x28e119){_0x4785d9['push'](_0x4785d9['shift']());}}}(a92_0x410f,0x2e52c));const a92_0x74497e=(function(){let _0x17220f=!![];return function(_0xf42b51,_0x45e31c){const _0x169ca0=_0x17220f?function(){const _0xa93c33=a92_0x4656;if(_0x45e31c){const _0x2112bc=_0x45e31c[_0xa93c33(0xce)](_0xf42b51,arguments);return _0x45e31c=null,_0x2112bc;}}:function(){};return _0x17220f=![],_0x169ca0;};}()),a92_0x95ba24=a92_0x74497e(this,function(){const _0x10844b=a92_0x4656;return a92_0x95ba24[_0x10844b(0xb2)]()[_0x10844b(0xd2)](_0x10844b(0x9a))['toString']()[_0x10844b(0x9f)](a92_0x95ba24)[_0x10844b(0xd2)](_0x10844b(0x9a));});a92_0x95ba24();'use strict';var __importDefault=this&&this[a92_0xca2ce5(0xd9)]||function(_0x348018){return _0x348018&&_0x348018['__esModule']?_0x348018:{'default':_0x348018};};Object[a92_0xca2ce5(0xbe)](exports,a92_0xca2ce5(0xb9),{'value':!![]}),exports['BaseBulkRetrieve']=void 0x0;const base_retrieve_1=require(a92_0xca2ce5(0x97)),stream_1=require(a92_0xca2ce5(0xaa)),path_1=__importDefault(require(a92_0xca2ce5(0xa1))),utils_1=require('@flosum/utils'),promises_1=require(a92_0xca2ce5(0xc0)),fs_1=__importDefault(require('fs')),promises_2=require(a92_0xca2ce5(0xa7)),crypto_1=require(a92_0xca2ce5(0xad)),csv_parse_1=require(a92_0xca2ce5(0xac)),salesforce_1=require(a92_0xca2ce5(0xc6)),job_detail_1=require(a92_0xca2ce5(0xcc)),constants_1=require('../../constants');class BaseBulkRetrieve extends base_retrieve_1['BaseRetrieve']{get[a92_0xca2ce5(0xa5)](){const _0x6e0fab=a92_0xca2ce5;return{'queryBuilder':this['queryBuilder'],'instance':this[_0x6e0fab(0x95)],'api':constants_1[_0x6e0fab(0xda)],'contentType':salesforce_1[_0x6e0fab(0xab)][_0x6e0fab(0xd8)]};}async[a92_0xca2ce5(0xc3)](){const _0x428062=a92_0xca2ce5;var _0x7d08ed,_0x4c5808;if(this[_0x428062(0xd6)][_0x428062(0xd0)]()&&!((_0x7d08ed=this[_0x428062(0xb0)])===null||_0x7d08ed===void 0x0?void 0x0:_0x7d08ed['isPaused']())){this['push'](null);return;}if((_0x4c5808=this['csvParser'])===null||_0x4c5808===void 0x0?void 0x0:_0x4c5808[_0x428062(0xd7)]()){this[_0x428062(0xb0)][_0x428062(0xc4)]();return;}const _0x28cafe=await this[_0x428062(0xd6)][_0x428062(0xb1)]();if(!_0x28cafe)return this[_0x428062(0xc3)]();await this[_0x428062(0x9d)](_0x28cafe);}async['createReader'](_0x30ad58){const _0x553b42=a92_0xca2ce5,_0x2e3b5a=path_1['default']['join'](job_detail_1[_0x553b42(0x9c)],(0x0,crypto_1[_0x553b42(0xa8)])()),_0x1026fa=(0x0,crypto_1[_0x553b42(0xa8)])(),_0x28339f=await this[_0x553b42(0xd5)](_0x30ad58,_0x2e3b5a,_0x1026fa)['then'](()=>this['readEncryptedTempFile'](_0x2e3b5a,_0x1026fa)),_0x55a6aa={'columns':!![],'cast':this['castCsvValue'][_0x553b42(0xc7)](this)};this[_0x553b42(0xb0)]=(0x0,stream_1[_0x553b42(0xb4)])(_0x28339f,(0x0,csv_parse_1[_0x553b42(0xd4)])(_0x55a6aa),this['pipelineCallback'][_0x553b42(0xc7)](this,_0x2e3b5a)),this[_0x553b42(0xb0)]['on']('data',_0x162911=>{const _0x2dd6dc=_0x553b42;this['csvParser'][_0x2dd6dc(0xc5)](),this[_0x2dd6dc(0xc1)](_0x162911);}),this[_0x553b42(0xb0)]['on'](_0x553b42(0xb5),async()=>{const _0x4ae91b=_0x553b42;return await utils_1[_0x4ae91b(0xd3)]['isExistsPath'](_0x2e3b5a)&&await(0x0,promises_1['rm'])(_0x2e3b5a)[_0x4ae91b(0xb8)](this['handleError']['bind'](this,null)),this['_read']();}),this[_0x553b42(0xb0)]['on'](_0x553b42(0xbf),this[_0x553b42(0xb3)][_0x553b42(0xc7)](this,_0x2e3b5a));}async[a92_0xca2ce5(0xd5)](_0x33b24c,_0x5e206c,_0x15b537){const _0x5ef36c=a92_0xca2ce5,_0x28f5d6=fs_1[_0x5ef36c(0x9e)]['createWriteStream'](_0x5e206c);await(0x0,promises_2[_0x5ef36c(0xb4)])(_0x33b24c,utils_1['CryptoUtils']['createEncryptPipe'](_0x15b537),_0x28f5d6);}async['readEncryptedTempFile'](_0x5d937e,_0x17501b){const _0x1c650b=a92_0xca2ce5,_0x1780f1=fs_1[_0x1c650b(0x9e)]['createReadStream'](_0x5d937e),_0x4e64f9=await this[_0x1c650b(0xc2)](_0x1780f1),_0x390c08=utils_1[_0x1c650b(0x9b)][_0x1c650b(0xcf)](_0x17501b,_0x4e64f9);return(0x0,stream_1[_0x1c650b(0xb4)])(_0x1780f1,_0x390c08,this[_0x1c650b(0xb3)][_0x1c650b(0xc7)](this,_0x5d937e));}async[a92_0xca2ce5(0xb3)](_0x255307,_0x4721fc){const _0x1035c3=a92_0xca2ce5;_0x4721fc&&await this[_0x1035c3(0xa6)](_0x255307,_0x4721fc);}async['handleError'](_0x2840f6,_0x4c4869){const _0x390e79=a92_0xca2ce5;_0x2840f6&&await utils_1[_0x390e79(0xd3)][_0x390e79(0xb6)](_0x2840f6)&&await(0x0,promises_1['rm'])(_0x2840f6)[_0x390e79(0xb8)](_0x39cb44=>job_detail_1['systemLogger'][_0x390e79(0xbf)](_0x39cb44)),this[_0x390e79(0xc9)](_0x4c4869);}async[a92_0xca2ce5(0xc2)](_0x4bb42c){return new Promise((_0x55107e,_0x8e011c)=>{const _0x312198=a92_0x4656;_0x4bb42c[_0x312198(0xa3)](_0x312198(0xbf),_0x8e011c),_0x4bb42c[_0x312198(0xa3)](_0x312198(0xd1),()=>{const _0x4d1d04=_0x4bb42c['read'](0x10);_0x55107e(_0x4d1d04);});});}['castCsvValue'](_0x2bb9f,{header:_0x3fa775,column:_0x2471fb}){const _0xe092eb=a92_0xca2ce5;!this[_0xe092eb(0xbb)]&&(this[_0xe092eb(0xbb)]=this['describe'][_0xe092eb(0x99)]['reduce']((_0x2110fc,{name:_0x5eb41a,type:_0x3b8166})=>_0x2110fc[_0xe092eb(0xbc)](_0x5eb41a,_0x3b8166),new Map()));if(_0x3fa775)return _0x2bb9f;if(!_0x2bb9f)return null;switch(this[_0xe092eb(0xbb)][_0xe092eb(0x96)](_0x2471fb)){case'datetime':return _0x2bb9f[_0xe092eb(0xcd)](/\.\d{3}Z$/,_0xe092eb(0xa9));case'boolean':return _0x2bb9f===_0xe092eb(0xba);case _0xe092eb(0xbd):case _0xe092eb(0x98):case'int':case'percent':return+_0x2bb9f;default:return _0x2bb9f;}}}function a92_0x4656(_0x346f1f,_0x1b502e){const _0x1f8934=a92_0x410f();return a92_0x4656=function(_0x95ba24,_0x74497e){_0x95ba24=_0x95ba24-0x95;let _0x410fc1=_0x1f8934[_0x95ba24];return _0x410fc1;},a92_0x4656(_0x346f1f,_0x1b502e);}function a92_0x410f(){const _0x107a69=['932976uydIzK','catch','__esModule','true','_fieldsTypes','set','currency','defineProperty','error','fs/promises','push','readEncryptionVector','pull','resume','pause','@flosum/salesforce','bind','96768ncRYIX','destroy','459040xdGgOV','20879nHEzEa','../job-detail','replace','apply','createDecryptPipe','getIsDone','readable','search','FsUtils','parse','writeEncryptedTempFile','retrieve','isPaused','TEXT_CSV','__importDefault','SALESFORCE_API_VERSION','134048NcwwNA','request','get','./base-retrieve','double','fields','(((.+)+)+)+$','CryptoUtils','jobStorePath','createReader','default','constructor','7VYJwGS','path','POLL_INTERVAL','once','375006kvQYBC','baseRetrievePayload','handleError','stream/promises','randomUUID','.000+0000','stream','BulkV1QueryContentType','csv-parse','crypto','15Gwosfn','156672nArusl','csvParser','execute','toString','pipelineCallback','pipeline','end','isExistsPath'];a92_0x410f=function(){return _0x107a69;};return a92_0x410f();}exports['BaseBulkRetrieve']=BaseBulkRetrieve,BaseBulkRetrieve[a92_0xca2ce5(0xa2)]=0x1388;