const a90_0x1c9721=a90_0x102f;(function(_0x22ae03,_0x1db75d){const _0xc61bc5=a90_0x102f,_0x546f97=_0x22ae03();while(!![]){try{const _0x22ad49=-parseInt(_0xc61bc5(0x182))/0x1+parseInt(_0xc61bc5(0x18c))/0x2+-parseInt(_0xc61bc5(0x188))/0x3+parseInt(_0xc61bc5(0x17b))/0x4*(-parseInt(_0xc61bc5(0x198))/0x5)+parseInt(_0xc61bc5(0x1a0))/0x6+parseInt(_0xc61bc5(0x1c1))/0x7*(-parseInt(_0xc61bc5(0x1be))/0x8)+parseInt(_0xc61bc5(0x1b6))/0x9*(parseInt(_0xc61bc5(0x192))/0xa);if(_0x22ad49===_0x1db75d)break;else _0x546f97['push'](_0x546f97['shift']());}catch(_0x2e807b){_0x546f97['push'](_0x546f97['shift']());}}}(a90_0x3447,0x715c6));const a90_0x3bb4e0=(function(){let _0x27ffbf=!![];return function(_0x372fca,_0x197412){const _0x2b4a9d=_0x27ffbf?function(){const _0x643701=a90_0x102f;if(_0x197412){const _0x34c4e8=_0x197412[_0x643701(0x1c7)](_0x372fca,arguments);return _0x197412=null,_0x34c4e8;}}:function(){};return _0x27ffbf=![],_0x2b4a9d;};}()),a90_0x481cc6=a90_0x3bb4e0(this,function(){const _0x3e4821=a90_0x102f;return a90_0x481cc6[_0x3e4821(0x1b2)]()[_0x3e4821(0x185)](_0x3e4821(0x1b5))[_0x3e4821(0x1b2)]()['constructor'](a90_0x481cc6)['search'](_0x3e4821(0x1b5));});a90_0x481cc6();'use strict';var __importDefault=this&&this[a90_0x1c9721(0x1ad)]||function(_0x1ed610){const _0x74ad5b=a90_0x1c9721;return _0x1ed610&&_0x1ed610[_0x74ad5b(0x18f)]?_0x1ed610:{'default':_0x1ed610};};Object[a90_0x1c9721(0x17e)](exports,a90_0x1c9721(0x18f),{'value':!![]}),exports[a90_0x1c9721(0x1a2)]=void 0x0;function a90_0x3447(){const _0x25f284=['createReader','castCsvValue','join','request','parse','double','4964070epUjBO','data','BaseBulkRetrieve','datetime','POLL_INTERVAL','get','fields','../job-detail','jobStorePath','TEXT_CSV','currency','int','default','__importDefault','createWriteStream','push','describe','pull','toString','set','../../constants','(((.+)+)+)+$','6173766uVNSAt','createReadStream','once','writeEncryptedTempFile','CryptoUtils','./base-retrieve','csvParser','FsUtils','64AvoBfE','getIsDone','baseRetrievePayload','792596yrprxW','pipeline','retrieve','destroy','BaseRetrieve','fs/promises','apply','csv-parse','handleError','pipelineCallback','1546044NCOQyK','path','systemLogger','defineProperty','isPaused','crypto','boolean','57046EiUACw','_fieldsTypes','true','search','pause','reduce','460389MkzEaZ','readEncryptionVector','stream','randomUUID','1680724VLTQES','_read','stream/promises','__esModule','.000+0000','percent','10cLFDXF','queryBuilder','error','bind','readEncryptedTempFile','execute','10BspBiU','isExistsPath'];a90_0x3447=function(){return _0x25f284;};return a90_0x3447();}const base_retrieve_1=require(a90_0x1c9721(0x1bb)),stream_1=require(a90_0x1c9721(0x18a)),path_1=__importDefault(require(a90_0x1c9721(0x17c))),utils_1=require('@flosum/utils'),promises_1=require(a90_0x1c9721(0x1c6)),fs_1=__importDefault(require('fs')),promises_2=require(a90_0x1c9721(0x18e)),crypto_1=require(a90_0x1c9721(0x180)),csv_parse_1=require(a90_0x1c9721(0x1c8)),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a90_0x1c9721(0x1a7)),constants_1=require(a90_0x1c9721(0x1b4));class BaseBulkRetrieve extends base_retrieve_1[a90_0x1c9721(0x1c5)]{get[a90_0x1c9721(0x1c0)](){const _0x533e39=a90_0x1c9721;return{'queryBuilder':this[_0x533e39(0x193)],'instance':this[_0x533e39(0x19d)],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1['BulkV1QueryContentType'][_0x533e39(0x1a9)]};}async['pull'](){const _0x1aaaae=a90_0x1c9721;var _0x3e32c8,_0x5df748;if(this[_0x1aaaae(0x1c3)][_0x1aaaae(0x1bf)]()&&!((_0x3e32c8=this[_0x1aaaae(0x1bc)])===null||_0x3e32c8===void 0x0?void 0x0:_0x3e32c8['isPaused']())){this[_0x1aaaae(0x1af)](null);return;}if((_0x5df748=this[_0x1aaaae(0x1bc)])===null||_0x5df748===void 0x0?void 0x0:_0x5df748[_0x1aaaae(0x17f)]()){this[_0x1aaaae(0x1bc)]['resume']();return;}const _0x2e415a=await this['retrieve'][_0x1aaaae(0x197)]();if(!_0x2e415a)return this[_0x1aaaae(0x1b1)]();await this[_0x1aaaae(0x19a)](_0x2e415a);}async['createReader'](_0x486ccd){const _0x3363d4=a90_0x1c9721,_0x176778=path_1[_0x3363d4(0x1ac)][_0x3363d4(0x19c)](job_detail_1[_0x3363d4(0x1a8)],(0x0,crypto_1[_0x3363d4(0x18b)])()),_0x3e55af=(0x0,crypto_1[_0x3363d4(0x18b)])(),_0x19d011=await this['writeEncryptedTempFile'](_0x486ccd,_0x176778,_0x3e55af)['then'](()=>this[_0x3363d4(0x196)](_0x176778,_0x3e55af)),_0x4e2c4d={'columns':!![],'cast':this[_0x3363d4(0x19b)][_0x3363d4(0x195)](this)};this['csvParser']=(0x0,stream_1['pipeline'])(_0x19d011,(0x0,csv_parse_1[_0x3363d4(0x19e)])(_0x4e2c4d),this[_0x3363d4(0x1ca)][_0x3363d4(0x195)](this,_0x176778)),this[_0x3363d4(0x1bc)]['on'](_0x3363d4(0x1a1),_0x589737=>{const _0x3cdd3b=_0x3363d4;this[_0x3cdd3b(0x1bc)][_0x3cdd3b(0x186)](),this['push'](_0x589737);}),this[_0x3363d4(0x1bc)]['on']('end',async()=>{const _0x7a3ef6=_0x3363d4;return await utils_1[_0x7a3ef6(0x1bd)][_0x7a3ef6(0x199)](_0x176778)&&await(0x0,promises_1['rm'])(_0x176778)['catch'](this['handleError'][_0x7a3ef6(0x195)](this,null)),this[_0x7a3ef6(0x18d)]();}),this[_0x3363d4(0x1bc)]['on'](_0x3363d4(0x194),this[_0x3363d4(0x1ca)][_0x3363d4(0x195)](this,_0x176778));}async[a90_0x1c9721(0x1b9)](_0x5e0c1f,_0x49a78e,_0x35e761){const _0x1a1ac0=a90_0x1c9721,_0x208034=fs_1[_0x1a1ac0(0x1ac)][_0x1a1ac0(0x1ae)](_0x49a78e);await(0x0,promises_2[_0x1a1ac0(0x1c2)])(_0x5e0c1f,utils_1['CryptoUtils']['createEncryptPipe'](_0x35e761),_0x208034);}async['readEncryptedTempFile'](_0x39a49b,_0x4b651e){const _0x18a60e=a90_0x1c9721,_0x5f06a1=fs_1[_0x18a60e(0x1ac)][_0x18a60e(0x1b7)](_0x39a49b),_0xe69488=await this[_0x18a60e(0x189)](_0x5f06a1),_0x405562=utils_1[_0x18a60e(0x1ba)]['createDecryptPipe'](_0x4b651e,_0xe69488);return(0x0,stream_1['pipeline'])(_0x5f06a1,_0x405562,this[_0x18a60e(0x1ca)][_0x18a60e(0x195)](this,_0x39a49b));}async[a90_0x1c9721(0x1ca)](_0x43f14f,_0x3455aa){const _0x641a74=a90_0x1c9721;_0x3455aa&&await this[_0x641a74(0x1c9)](_0x43f14f,_0x3455aa);}async[a90_0x1c9721(0x1c9)](_0x29d39d,_0x3de89f){const _0x20a82f=a90_0x1c9721;_0x29d39d&&await utils_1[_0x20a82f(0x1bd)][_0x20a82f(0x199)](_0x29d39d)&&await(0x0,promises_1['rm'])(_0x29d39d)['catch'](_0x42e362=>job_detail_1[_0x20a82f(0x17d)][_0x20a82f(0x194)](_0x42e362)),this[_0x20a82f(0x1c4)](_0x3de89f);}async[a90_0x1c9721(0x189)](_0x24053c){return new Promise((_0x31bcc7,_0x3cbbab)=>{const _0x15ea2e=a90_0x102f;_0x24053c[_0x15ea2e(0x1b8)]('error',_0x3cbbab),_0x24053c[_0x15ea2e(0x1b8)]('readable',()=>{const _0x231187=_0x24053c['read'](0x10);_0x31bcc7(_0x231187);});});}[a90_0x1c9721(0x19b)](_0x331835,{header:_0x32bebf,column:_0x3df3dd}){const _0x330430=a90_0x1c9721;!this[_0x330430(0x183)]&&(this[_0x330430(0x183)]=this[_0x330430(0x1b0)][_0x330430(0x1a6)][_0x330430(0x187)]((_0xbe46d6,{name:_0x148c2c,type:_0x2b35cb})=>_0xbe46d6[_0x330430(0x1b3)](_0x148c2c,_0x2b35cb),new Map()));if(_0x32bebf)return _0x331835;if(!_0x331835)return null;switch(this[_0x330430(0x183)][_0x330430(0x1a5)](_0x3df3dd)){case _0x330430(0x1a3):return _0x331835['replace'](/\.\d{3}Z$/,_0x330430(0x190));case _0x330430(0x181):return _0x331835===_0x330430(0x184);case _0x330430(0x1aa):case _0x330430(0x19f):case _0x330430(0x1ab):case _0x330430(0x191):return+_0x331835;default:return _0x331835;}}}function a90_0x102f(_0x26997a,_0x4b21c6){const _0x6440c9=a90_0x3447();return a90_0x102f=function(_0x481cc6,_0x3bb4e0){_0x481cc6=_0x481cc6-0x17b;let _0x3447b7=_0x6440c9[_0x481cc6];return _0x3447b7;},a90_0x102f(_0x26997a,_0x4b21c6);}exports[a90_0x1c9721(0x1a2)]=BaseBulkRetrieve,BaseBulkRetrieve[a90_0x1c9721(0x1a4)]=0x1388;