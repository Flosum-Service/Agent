const a75_0x37c458=a75_0x2c87;(function(_0x53b68c,_0x1e664b){const _0x2046aa=a75_0x2c87,_0x4cf4d4=_0x53b68c();while(!![]){try{const _0x4461a7=parseInt(_0x2046aa(0x1fa))/0x1*(-parseInt(_0x2046aa(0x1f5))/0x2)+parseInt(_0x2046aa(0x201))/0x3+-parseInt(_0x2046aa(0x1da))/0x4*(parseInt(_0x2046aa(0x1dc))/0x5)+parseInt(_0x2046aa(0x1e0))/0x6*(parseInt(_0x2046aa(0x203))/0x7)+-parseInt(_0x2046aa(0x207))/0x8+-parseInt(_0x2046aa(0x20d))/0x9+parseInt(_0x2046aa(0x21d))/0xa*(parseInt(_0x2046aa(0x21a))/0xb);if(_0x4461a7===_0x1e664b)break;else _0x4cf4d4['push'](_0x4cf4d4['shift']());}catch(_0x2f98d4){_0x4cf4d4['push'](_0x4cf4d4['shift']());}}}(a75_0x4b69,0x7fc35));const a75_0x19f8f1=(function(){let _0x405c5d=!![];return function(_0x31652f,_0x27e2b9){const _0x567992=_0x405c5d?function(){if(_0x27e2b9){const _0x2db951=_0x27e2b9['apply'](_0x31652f,arguments);return _0x27e2b9=null,_0x2db951;}}:function(){};return _0x405c5d=![],_0x567992;};}()),a75_0x27d4aa=a75_0x19f8f1(this,function(){const _0x31d939=a75_0x2c87;return a75_0x27d4aa['toString']()['search'](_0x31d939(0x208))['toString']()[_0x31d939(0x1d8)](a75_0x27d4aa)[_0x31d939(0x205)](_0x31d939(0x208));});a75_0x27d4aa();'use strict';function a75_0x2c87(_0x5b2869,_0x56586a){const _0x587ccc=a75_0x4b69();return a75_0x2c87=function(_0x27d4aa,_0x19f8f1){_0x27d4aa=_0x27d4aa-0x1d5;let _0x4b6929=_0x587ccc[_0x27d4aa];return _0x4b6929;},a75_0x2c87(_0x5b2869,_0x56586a);}var __importDefault=this&&this['__importDefault']||function(_0x5d246e){const _0x1f3287=a75_0x2c87;return _0x5d246e&&_0x5d246e[_0x1f3287(0x1de)]?_0x5d246e:{'default':_0x5d246e};};Object[a75_0x37c458(0x204)](exports,'__esModule',{'value':!![]}),exports[a75_0x37c458(0x20a)]=void 0x0;function a75_0x4b69(){const _0x43450b=['end','once','143bHEnLs','stream/promises','resume','1892360HBlysz','error','currency','retrieve','POLL_INTERVAL','read','csvParser','pipeline','constructor','@flosum/salesforce','79412fFjioX','castCsvValue','55eCcpxC','isPaused','__esModule','request','24bDtsve','.000+0000','boolean','crypto','./base-retrieve','BulkV1QueryContentType','createWriteStream','true','@flosum/utils','double','writeEncryptedTempFile','pause','BaseRetrieve','get','percent','int','FsUtils','getIsDone','_read','SALESFORCE_API_VERSION','bind','2001862cQrMDQ','pipelineCallback','CryptoUtils','readEncryptedTempFile','catch','1JtwAgl','default','pull','createDecryptPipe','fs/promises','push','fields','291855VbNEwA','TEXT_CSV','557060rcSezE','defineProperty','search','join','4205952EmriEj','(((.+)+)+)+$','then','BaseBulkRetrieve','readEncryptionVector','_fieldsTypes','5465682pckgdX','isExistsPath','../../constants','handleError','destroy','path','replace','describe','../job-detail','set','randomUUID'];a75_0x4b69=function(){return _0x43450b;};return a75_0x4b69();}const base_retrieve_1=require(a75_0x37c458(0x1e4)),stream_1=require('stream'),path_1=__importDefault(require(a75_0x37c458(0x212))),utils_1=require(a75_0x37c458(0x1e8)),promises_1=require(a75_0x37c458(0x1fe)),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x37c458(0x21b)),crypto_1=require(a75_0x37c458(0x1e3)),csv_parse_1=require('csv-parse'),salesforce_1=require(a75_0x37c458(0x1d9)),job_detail_1=require(a75_0x37c458(0x215)),constants_1=require(a75_0x37c458(0x20f));class BaseBulkRetrieve extends base_retrieve_1[a75_0x37c458(0x1ec)]{get['baseRetrievePayload'](){const _0x2fff36=a75_0x37c458;return{'queryBuilder':this['queryBuilder'],'instance':this[_0x2fff36(0x1df)],'api':constants_1[_0x2fff36(0x1f3)],'contentType':salesforce_1[_0x2fff36(0x1e5)][_0x2fff36(0x202)]};}async[a75_0x37c458(0x1fc)](){const _0x30848f=a75_0x37c458;var _0x46196b,_0x425541;if(this[_0x30848f(0x220)][_0x30848f(0x1f1)]()&&!((_0x46196b=this[_0x30848f(0x1d6)])===null||_0x46196b===void 0x0?void 0x0:_0x46196b[_0x30848f(0x1dd)]())){this['push'](null);return;}if((_0x425541=this[_0x30848f(0x1d6)])===null||_0x425541===void 0x0?void 0x0:_0x425541[_0x30848f(0x1dd)]()){this['csvParser'][_0x30848f(0x21c)]();return;}const _0x4838cf=await this[_0x30848f(0x220)]['execute']();if(!_0x4838cf)return this['pull']();await this['createReader'](_0x4838cf);}async['createReader'](_0x637c9f){const _0x23c8a2=a75_0x37c458,_0x1bb029=path_1[_0x23c8a2(0x1fb)][_0x23c8a2(0x206)](job_detail_1['jobStorePath'],(0x0,crypto_1[_0x23c8a2(0x217)])()),_0xb8e928=(0x0,crypto_1[_0x23c8a2(0x217)])(),_0xd96d45=await this[_0x23c8a2(0x1ea)](_0x637c9f,_0x1bb029,_0xb8e928)[_0x23c8a2(0x209)](()=>this['readEncryptedTempFile'](_0x1bb029,_0xb8e928)),_0x366203={'columns':!![],'cast':this['castCsvValue'][_0x23c8a2(0x1f4)](this)};this[_0x23c8a2(0x1d6)]=(0x0,stream_1['pipeline'])(_0xd96d45,(0x0,csv_parse_1['parse'])(_0x366203),this['pipelineCallback'][_0x23c8a2(0x1f4)](this,_0x1bb029)),this[_0x23c8a2(0x1d6)]['on']('data',_0x43128a=>{const _0x35de91=_0x23c8a2;this[_0x35de91(0x1d6)][_0x35de91(0x1eb)](),this[_0x35de91(0x1ff)](_0x43128a);}),this[_0x23c8a2(0x1d6)]['on'](_0x23c8a2(0x218),async()=>{const _0x223381=_0x23c8a2;return await utils_1[_0x223381(0x1f0)][_0x223381(0x20e)](_0x1bb029)&&await(0x0,promises_1['rm'])(_0x1bb029)['catch'](this[_0x223381(0x210)]['bind'](this,null)),this[_0x223381(0x1f2)]();}),this[_0x23c8a2(0x1d6)]['on'](_0x23c8a2(0x21e),this[_0x23c8a2(0x1f6)][_0x23c8a2(0x1f4)](this,_0x1bb029));}async[a75_0x37c458(0x1ea)](_0x4355a7,_0x96a286,_0x2b20b6){const _0x275efe=a75_0x37c458,_0x25d1b0=fs_1[_0x275efe(0x1fb)][_0x275efe(0x1e6)](_0x96a286);await(0x0,promises_2['pipeline'])(_0x4355a7,utils_1[_0x275efe(0x1f7)]['createEncryptPipe'](_0x2b20b6),_0x25d1b0);}async[a75_0x37c458(0x1f8)](_0x92a2da,_0x45365f){const _0x4fb13f=a75_0x37c458,_0x54086f=fs_1[_0x4fb13f(0x1fb)]['createReadStream'](_0x92a2da),_0x52c6d4=await this[_0x4fb13f(0x20b)](_0x54086f),_0x4a2f60=utils_1[_0x4fb13f(0x1f7)][_0x4fb13f(0x1fd)](_0x45365f,_0x52c6d4);return(0x0,stream_1[_0x4fb13f(0x1d7)])(_0x54086f,_0x4a2f60,this[_0x4fb13f(0x1f6)][_0x4fb13f(0x1f4)](this,_0x92a2da));}async[a75_0x37c458(0x1f6)](_0x485bd1,_0x3b2fb0){const _0x43d0c3=a75_0x37c458;_0x3b2fb0&&await this[_0x43d0c3(0x210)](_0x485bd1,_0x3b2fb0);}async[a75_0x37c458(0x210)](_0x2354d9,_0x31a418){const _0x3d9496=a75_0x37c458;_0x2354d9&&await utils_1[_0x3d9496(0x1f0)]['isExistsPath'](_0x2354d9)&&await(0x0,promises_1['rm'])(_0x2354d9)[_0x3d9496(0x1f9)](_0x594bc4=>job_detail_1['systemLogger']['error'](_0x594bc4)),this[_0x3d9496(0x211)](_0x31a418);}async[a75_0x37c458(0x20b)](_0x50cd5a){return new Promise((_0x2be2f2,_0x25a36e)=>{const _0x5ef94e=a75_0x2c87;_0x50cd5a[_0x5ef94e(0x219)](_0x5ef94e(0x21e),_0x25a36e),_0x50cd5a['once']('readable',()=>{const _0x560ef0=_0x5ef94e,_0x1b3a62=_0x50cd5a[_0x560ef0(0x1d5)](0x10);_0x2be2f2(_0x1b3a62);});});}[a75_0x37c458(0x1db)](_0x3dbd7c,{header:_0x3952d1,column:_0x439723}){const _0x4a878e=a75_0x37c458;!this['_fieldsTypes']&&(this[_0x4a878e(0x20c)]=this[_0x4a878e(0x214)][_0x4a878e(0x200)]['reduce']((_0x4b5b03,{name:_0x3d1287,type:_0x303a67})=>_0x4b5b03[_0x4a878e(0x216)](_0x3d1287,_0x303a67),new Map()));if(_0x3952d1)return _0x3dbd7c;if(!_0x3dbd7c)return null;switch(this['_fieldsTypes'][_0x4a878e(0x1ed)](_0x439723)){case'datetime':return _0x3dbd7c[_0x4a878e(0x213)](/\.\d{3}Z$/,_0x4a878e(0x1e1));case _0x4a878e(0x1e2):return _0x3dbd7c===_0x4a878e(0x1e7);case _0x4a878e(0x21f):case _0x4a878e(0x1e9):case _0x4a878e(0x1ef):case _0x4a878e(0x1ee):return+_0x3dbd7c;default:return _0x3dbd7c;}}}exports[a75_0x37c458(0x20a)]=BaseBulkRetrieve,BaseBulkRetrieve[a75_0x37c458(0x221)]=0x1388;