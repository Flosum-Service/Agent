const a75_0x5efdc1=a75_0x37b7;(function(_0x2e036c,_0x29701c){const _0x49999b=a75_0x37b7,_0x14e991=_0x2e036c();while(!![]){try{const _0x1eda29=-parseInt(_0x49999b(0x1b6))/0x1*(parseInt(_0x49999b(0x1cf))/0x2)+-parseInt(_0x49999b(0x19c))/0x3+-parseInt(_0x49999b(0x1e4))/0x4+parseInt(_0x49999b(0x1cd))/0x5+-parseInt(_0x49999b(0x1af))/0x6*(-parseInt(_0x49999b(0x1bd))/0x7)+-parseInt(_0x49999b(0x1c7))/0x8*(-parseInt(_0x49999b(0x1c0))/0x9)+parseInt(_0x49999b(0x1bc))/0xa*(parseInt(_0x49999b(0x1b4))/0xb);if(_0x1eda29===_0x29701c)break;else _0x14e991['push'](_0x14e991['shift']());}catch(_0x101383){_0x14e991['push'](_0x14e991['shift']());}}}(a75_0x3bf7,0x7ff2d));function a75_0x37b7(_0x4b2220,_0x2a80d8){const _0x549804=a75_0x3bf7();return a75_0x37b7=function(_0x5be03e,_0xba1f6){_0x5be03e=_0x5be03e-0x19c;let _0x3bf7df=_0x549804[_0x5be03e];return _0x3bf7df;},a75_0x37b7(_0x4b2220,_0x2a80d8);}const a75_0xba1f6=(function(){let _0x255ecc=!![];return function(_0x55b4a9,_0x210878){const _0x3dd75f=_0x255ecc?function(){if(_0x210878){const _0x3b375c=_0x210878['apply'](_0x55b4a9,arguments);return _0x210878=null,_0x3b375c;}}:function(){};return _0x255ecc=![],_0x3dd75f;};}()),a75_0x5be03e=a75_0xba1f6(this,function(){const _0x19f638=a75_0x37b7;return a75_0x5be03e[_0x19f638(0x1aa)]()[_0x19f638(0x1ea)](_0x19f638(0x1e7))[_0x19f638(0x1aa)]()[_0x19f638(0x1c8)](a75_0x5be03e)[_0x19f638(0x1ea)](_0x19f638(0x1e7));});a75_0x5be03e();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3a9ef5){const _0x1c3cdd=a75_0x37b7;return _0x3a9ef5&&_0x3a9ef5[_0x1c3cdd(0x1a6)]?_0x3a9ef5:{'default':_0x3a9ef5};};Object['defineProperty'](exports,a75_0x5efdc1(0x1a6),{'value':!![]}),exports[a75_0x5efdc1(0x19e)]=void 0x0;function a75_0x3bf7(){const _0x586d3e=['1652500TPbmgc','../job-detail','pipeline','(((.+)+)+)+$','getIsDone','createReader','search','pull','readEncryptedTempFile','1417173ZthiwH','csvParser','BaseBulkRetrieve','writeEncryptedTempFile','error','catch','createDecryptPipe','_read','path','set','__esModule','request','BulkV1QueryContentType','resume','toString','execute','bind','queryBuilder','describe','38838APvZmX','destroy','fs/promises','isExistsPath','percent','68398CuwxNi','@flosum/salesforce','1039RjEGnN','readable','./base-retrieve','end','stream/promises','handleError','1220PMndpq','504VfcDCC','createEncryptPipe','_fieldsTypes','4483260rEHdRY','.000+0000','get','FsUtils','@flosum/utils','fields','boolean','16RqReUf','constructor','baseRetrievePayload','../../constants','readEncryptionVector','createReadStream','987650kUQXAs','jobStorePath','1942cflAfL','csv-parse','isPaused','pause','TEXT_CSV','join','then','default','push','datetime','currency','SALESFORCE_API_VERSION','createWriteStream','retrieve','BaseRetrieve','pipelineCallback','parse','once','systemLogger','stream','crypto'];a75_0x3bf7=function(){return _0x586d3e;};return a75_0x3bf7();}const base_retrieve_1=require(a75_0x5efdc1(0x1b8)),stream_1=require(a75_0x5efdc1(0x1e2)),path_1=__importDefault(require(a75_0x5efdc1(0x1a4))),utils_1=require(a75_0x5efdc1(0x1c4)),promises_1=require(a75_0x5efdc1(0x1b1)),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x5efdc1(0x1ba)),crypto_1=require(a75_0x5efdc1(0x1e3)),csv_parse_1=require(a75_0x5efdc1(0x1d0)),salesforce_1=require(a75_0x5efdc1(0x1b5)),job_detail_1=require(a75_0x5efdc1(0x1e5)),constants_1=require(a75_0x5efdc1(0x1ca));class BaseBulkRetrieve extends base_retrieve_1[a75_0x5efdc1(0x1dd)]{get[a75_0x5efdc1(0x1c9)](){const _0x33d035=a75_0x5efdc1;return{'queryBuilder':this[_0x33d035(0x1ad)],'instance':this[_0x33d035(0x1a7)],'api':constants_1[_0x33d035(0x1da)],'contentType':salesforce_1[_0x33d035(0x1a8)][_0x33d035(0x1d3)]};}async['pull'](){const _0x16df82=a75_0x5efdc1;var _0x1ef9a2,_0x4e2669;if(this[_0x16df82(0x1dc)][_0x16df82(0x1e8)]()&&!((_0x1ef9a2=this[_0x16df82(0x19d)])===null||_0x1ef9a2===void 0x0?void 0x0:_0x1ef9a2[_0x16df82(0x1d1)]())){this[_0x16df82(0x1d7)](null);return;}if((_0x4e2669=this[_0x16df82(0x19d)])===null||_0x4e2669===void 0x0?void 0x0:_0x4e2669['isPaused']()){this[_0x16df82(0x19d)][_0x16df82(0x1a9)]();return;}const _0x4d3820=await this[_0x16df82(0x1dc)][_0x16df82(0x1ab)]();if(!_0x4d3820)return this[_0x16df82(0x1eb)]();await this[_0x16df82(0x1e9)](_0x4d3820);}async['createReader'](_0x4ccc55){const _0x1357e1=a75_0x5efdc1,_0x124150=path_1[_0x1357e1(0x1d6)][_0x1357e1(0x1d4)](job_detail_1[_0x1357e1(0x1ce)],(0x0,crypto_1['randomUUID'])()),_0xcd4513=(0x0,crypto_1['randomUUID'])(),_0x121263=await this[_0x1357e1(0x19f)](_0x4ccc55,_0x124150,_0xcd4513)[_0x1357e1(0x1d5)](()=>this['readEncryptedTempFile'](_0x124150,_0xcd4513)),_0x5638e7={'columns':!![],'cast':this['castCsvValue'][_0x1357e1(0x1ac)](this)};this[_0x1357e1(0x19d)]=(0x0,stream_1[_0x1357e1(0x1e6)])(_0x121263,(0x0,csv_parse_1[_0x1357e1(0x1df)])(_0x5638e7),this[_0x1357e1(0x1de)]['bind'](this,_0x124150)),this[_0x1357e1(0x19d)]['on']('data',_0x5e78df=>{const _0x39d4f3=_0x1357e1;this['csvParser'][_0x39d4f3(0x1d2)](),this['push'](_0x5e78df);}),this[_0x1357e1(0x19d)]['on'](_0x1357e1(0x1b9),async()=>{const _0x2bd741=_0x1357e1;return await utils_1[_0x2bd741(0x1c3)][_0x2bd741(0x1b2)](_0x124150)&&await(0x0,promises_1['rm'])(_0x124150)[_0x2bd741(0x1a1)](this[_0x2bd741(0x1bb)][_0x2bd741(0x1ac)](this,null)),this[_0x2bd741(0x1a3)]();}),this[_0x1357e1(0x19d)]['on']('error',this[_0x1357e1(0x1de)]['bind'](this,_0x124150));}async[a75_0x5efdc1(0x19f)](_0x1eb3f6,_0x17102f,_0x2a9ae5){const _0x4ba0fe=a75_0x5efdc1,_0x591f05=fs_1[_0x4ba0fe(0x1d6)][_0x4ba0fe(0x1db)](_0x17102f);await(0x0,promises_2[_0x4ba0fe(0x1e6)])(_0x1eb3f6,utils_1['CryptoUtils'][_0x4ba0fe(0x1be)](_0x2a9ae5),_0x591f05);}async[a75_0x5efdc1(0x1ec)](_0x35b8ed,_0x5ab16c){const _0x51fd25=a75_0x5efdc1,_0x45021c=fs_1[_0x51fd25(0x1d6)][_0x51fd25(0x1cc)](_0x35b8ed),_0x21708b=await this[_0x51fd25(0x1cb)](_0x45021c),_0x29b900=utils_1['CryptoUtils'][_0x51fd25(0x1a2)](_0x5ab16c,_0x21708b);return(0x0,stream_1[_0x51fd25(0x1e6)])(_0x45021c,_0x29b900,this['pipelineCallback']['bind'](this,_0x35b8ed));}async[a75_0x5efdc1(0x1de)](_0xb45d3,_0x3be9b5){const _0x2137e2=a75_0x5efdc1;_0x3be9b5&&await this[_0x2137e2(0x1bb)](_0xb45d3,_0x3be9b5);}async[a75_0x5efdc1(0x1bb)](_0x2b4dcf,_0x26b26e){const _0x3ce48c=a75_0x5efdc1;_0x2b4dcf&&await utils_1[_0x3ce48c(0x1c3)][_0x3ce48c(0x1b2)](_0x2b4dcf)&&await(0x0,promises_1['rm'])(_0x2b4dcf)[_0x3ce48c(0x1a1)](_0x5e740a=>job_detail_1[_0x3ce48c(0x1e1)]['error'](_0x5e740a)),this[_0x3ce48c(0x1b0)](_0x26b26e);}async[a75_0x5efdc1(0x1cb)](_0x27c382){return new Promise((_0xb75368,_0x2f6a9b)=>{const _0x4ab50a=a75_0x37b7;_0x27c382[_0x4ab50a(0x1e0)](_0x4ab50a(0x1a0),_0x2f6a9b),_0x27c382[_0x4ab50a(0x1e0)](_0x4ab50a(0x1b7),()=>{const _0x5a8684=_0x27c382['read'](0x10);_0xb75368(_0x5a8684);});});}['castCsvValue'](_0x5df147,{header:_0x463f1f,column:_0x978ec9}){const _0x34bd78=a75_0x5efdc1;!this[_0x34bd78(0x1bf)]&&(this[_0x34bd78(0x1bf)]=this[_0x34bd78(0x1ae)][_0x34bd78(0x1c5)]['reduce']((_0x4a5c32,{name:_0x2d84ae,type:_0x539f03})=>_0x4a5c32[_0x34bd78(0x1a5)](_0x2d84ae,_0x539f03),new Map()));if(_0x463f1f)return _0x5df147;if(!_0x5df147)return null;switch(this['_fieldsTypes'][_0x34bd78(0x1c2)](_0x978ec9)){case _0x34bd78(0x1d8):return _0x5df147['replace'](/\.\d{3}Z$/,_0x34bd78(0x1c1));case _0x34bd78(0x1c6):return _0x5df147==='true';case _0x34bd78(0x1d9):case'double':case'int':case _0x34bd78(0x1b3):return+_0x5df147;default:return _0x5df147;}}}exports[a75_0x5efdc1(0x19e)]=BaseBulkRetrieve,BaseBulkRetrieve['POLL_INTERVAL']=0x1388;