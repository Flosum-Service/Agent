const a92_0x458be6=a92_0x20e9;(function(_0x1bd080,_0x20fc75){const _0x5ce107=a92_0x20e9,_0x105ff3=_0x1bd080();while(!![]){try{const _0x37d491=-parseInt(_0x5ce107(0x1fc))/0x1*(parseInt(_0x5ce107(0x202))/0x2)+parseInt(_0x5ce107(0x1fe))/0x3*(parseInt(_0x5ce107(0x1f9))/0x4)+-parseInt(_0x5ce107(0x1c4))/0x5+parseInt(_0x5ce107(0x1f0))/0x6+parseInt(_0x5ce107(0x20b))/0x7*(parseInt(_0x5ce107(0x1d1))/0x8)+parseInt(_0x5ce107(0x1e1))/0x9+-parseInt(_0x5ce107(0x208))/0xa*(parseInt(_0x5ce107(0x1cf))/0xb);if(_0x37d491===_0x20fc75)break;else _0x105ff3['push'](_0x105ff3['shift']());}catch(_0x20ca14){_0x105ff3['push'](_0x105ff3['shift']());}}}(a92_0x5c13,0x3b330));const a92_0x3dc65a=(function(){let _0x29db68=!![];return function(_0x3df1f0,_0x3981a1){const _0x3e47c4=_0x29db68?function(){const _0x76a4be=a92_0x20e9;if(_0x3981a1){const _0x1eb73a=_0x3981a1[_0x76a4be(0x1f8)](_0x3df1f0,arguments);return _0x3981a1=null,_0x1eb73a;}}:function(){};return _0x29db68=![],_0x3e47c4;};}()),a92_0x2fa6f3=a92_0x3dc65a(this,function(){const _0x1d974e=a92_0x20e9;return a92_0x2fa6f3[_0x1d974e(0x201)]()['search'](_0x1d974e(0x1da))['toString']()['constructor'](a92_0x2fa6f3)[_0x1d974e(0x1f1)](_0x1d974e(0x1da));});a92_0x2fa6f3();function a92_0x20e9(_0xb532fd,_0x2ea3f6){const _0x10dd43=a92_0x5c13();return a92_0x20e9=function(_0x2fa6f3,_0x3dc65a){_0x2fa6f3=_0x2fa6f3-0x1bb;let _0x5c1332=_0x10dd43[_0x2fa6f3];return _0x5c1332;},a92_0x20e9(_0xb532fd,_0x2ea3f6);}'use strict';var __importDefault=this&&this[a92_0x458be6(0x1cb)]||function(_0x4c409c){return _0x4c409c&&_0x4c409c['__esModule']?_0x4c409c:{'default':_0x4c409c};};Object[a92_0x458be6(0x204)](exports,'__esModule',{'value':!![]}),exports[a92_0x458be6(0x1f5)]=void 0x0;const base_retrieve_1=require(a92_0x458be6(0x1d2)),stream_1=require(a92_0x458be6(0x1eb)),path_1=__importDefault(require(a92_0x458be6(0x1c6))),utils_1=require('@flosum/utils'),promises_1=require(a92_0x458be6(0x1d5)),fs_1=__importDefault(require('fs')),promises_2=require(a92_0x458be6(0x1f3)),crypto_1=require(a92_0x458be6(0x1d7)),csv_parse_1=require(a92_0x458be6(0x1de)),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a92_0x458be6(0x1e2)),constants_1=require('../../constants');class BaseBulkRetrieve extends base_retrieve_1[a92_0x458be6(0x1ff)]{get[a92_0x458be6(0x1d6)](){const _0x1d0d1e=a92_0x458be6;return{'queryBuilder':this['queryBuilder'],'instance':this[_0x1d0d1e(0x1c7)],'api':constants_1['SALESFORCE_API_VERSION'],'contentType':salesforce_1[_0x1d0d1e(0x1f2)][_0x1d0d1e(0x209)]};}async['pull'](){const _0x3d8e38=a92_0x458be6;var _0x4c9546,_0x75bcb9;if(this[_0x3d8e38(0x1bf)][_0x3d8e38(0x1d8)]()&&!((_0x4c9546=this['csvParser'])===null||_0x4c9546===void 0x0?void 0x0:_0x4c9546[_0x3d8e38(0x1e4)]())){this[_0x3d8e38(0x1e5)](null);return;}if((_0x75bcb9=this[_0x3d8e38(0x1e6)])===null||_0x75bcb9===void 0x0?void 0x0:_0x75bcb9[_0x3d8e38(0x1e4)]()){this[_0x3d8e38(0x1e6)][_0x3d8e38(0x207)]();return;}const _0x2d80ca=await this[_0x3d8e38(0x1bf)]['execute']();if(!_0x2d80ca)return this[_0x3d8e38(0x1c3)]();await this[_0x3d8e38(0x200)](_0x2d80ca);}async[a92_0x458be6(0x200)](_0x8b181d){const _0xb714f5=a92_0x458be6,_0x3d11a1=path_1['default'][_0xb714f5(0x1ea)](job_detail_1[_0xb714f5(0x1cc)],(0x0,crypto_1[_0xb714f5(0x205)])()),_0x40dddd=(0x0,crypto_1[_0xb714f5(0x205)])(),_0x8af8bf=await this['writeEncryptedTempFile'](_0x8b181d,_0x3d11a1,_0x40dddd)[_0xb714f5(0x1db)](()=>this[_0xb714f5(0x1cd)](_0x3d11a1,_0x40dddd)),_0x560b9c={'columns':!![],'cast':this[_0xb714f5(0x1f6)][_0xb714f5(0x1ee)](this)};this[_0xb714f5(0x1e6)]=(0x0,stream_1['pipeline'])(_0x8af8bf,(0x0,csv_parse_1[_0xb714f5(0x1c0)])(_0x560b9c),this['pipelineCallback'][_0xb714f5(0x1ee)](this,_0x3d11a1)),this[_0xb714f5(0x1e6)]['on'](_0xb714f5(0x1f7),_0x26226b=>{const _0x22a177=_0xb714f5;this[_0x22a177(0x1e6)]['pause'](),this[_0x22a177(0x1e5)](_0x26226b);}),this['csvParser']['on'](_0xb714f5(0x1ca),async()=>{const _0x294e55=_0xb714f5;return await utils_1[_0x294e55(0x1fb)][_0x294e55(0x1c8)](_0x3d11a1)&&await(0x0,promises_1['rm'])(_0x3d11a1)[_0x294e55(0x1c2)](this[_0x294e55(0x1d0)][_0x294e55(0x1ee)](this,null)),this[_0x294e55(0x1dc)]();}),this[_0xb714f5(0x1e6)]['on'](_0xb714f5(0x1dd),this['pipelineCallback'][_0xb714f5(0x1ee)](this,_0x3d11a1));}async[a92_0x458be6(0x1bd)](_0x23a1c1,_0x22484f,_0x4ff34c){const _0x22874b=a92_0x458be6,_0x28fc87=fs_1[_0x22874b(0x1ef)]['createWriteStream'](_0x22484f);await(0x0,promises_2['pipeline'])(_0x23a1c1,utils_1['CryptoUtils'][_0x22874b(0x1fa)](_0x4ff34c),_0x28fc87);}async['readEncryptedTempFile'](_0x561d41,_0x19c203){const _0x3f9cf2=a92_0x458be6,_0xc17ffe=fs_1['default']['createReadStream'](_0x561d41),_0x42d658=await this[_0x3f9cf2(0x1ed)](_0xc17ffe),_0x37d31a=utils_1[_0x3f9cf2(0x1c9)][_0x3f9cf2(0x203)](_0x19c203,_0x42d658);return(0x0,stream_1['pipeline'])(_0xc17ffe,_0x37d31a,this[_0x3f9cf2(0x1d9)][_0x3f9cf2(0x1ee)](this,_0x561d41));}async[a92_0x458be6(0x1d9)](_0x1cf43e,_0x3da174){const _0x1a3693=a92_0x458be6;_0x3da174&&await this[_0x1a3693(0x1d0)](_0x1cf43e,_0x3da174);}async['handleError'](_0x13061b,_0x31c5b2){const _0x31ab0e=a92_0x458be6;_0x13061b&&await utils_1[_0x31ab0e(0x1fb)][_0x31ab0e(0x1c8)](_0x13061b)&&await(0x0,promises_1['rm'])(_0x13061b)[_0x31ab0e(0x1c2)](_0x5263f3=>job_detail_1['systemLogger'][_0x31ab0e(0x1dd)](_0x5263f3)),this[_0x31ab0e(0x1c5)](_0x31c5b2);}async[a92_0x458be6(0x1ed)](_0x47f3f7){return new Promise((_0x3dcd31,_0xc3a170)=>{const _0x2c6950=a92_0x20e9;_0x47f3f7['once'](_0x2c6950(0x1dd),_0xc3a170),_0x47f3f7[_0x2c6950(0x1d4)](_0x2c6950(0x1e9),()=>{const _0x44cd87=_0x2c6950,_0x8edf8f=_0x47f3f7[_0x44cd87(0x1e8)](0x10);_0x3dcd31(_0x8edf8f);});});}[a92_0x458be6(0x1f6)](_0x11b17d,{header:_0x146e31,column:_0x327430}){const _0x2f0b7c=a92_0x458be6;!this['_fieldsTypes']&&(this[_0x2f0b7c(0x1e0)]=this[_0x2f0b7c(0x1bb)][_0x2f0b7c(0x20a)][_0x2f0b7c(0x1e7)]((_0x3bead7,{name:_0x302dbc,type:_0x41dbc5})=>_0x3bead7[_0x2f0b7c(0x1ec)](_0x302dbc,_0x41dbc5),new Map()));if(_0x146e31)return _0x11b17d;if(!_0x11b17d)return null;switch(this['_fieldsTypes'][_0x2f0b7c(0x1e3)](_0x327430)){case'datetime':return _0x11b17d[_0x2f0b7c(0x1d3)](/\.\d{3}Z$/,_0x2f0b7c(0x1fd));case _0x2f0b7c(0x1f4):return _0x11b17d===_0x2f0b7c(0x1be);case _0x2f0b7c(0x1ce):case _0x2f0b7c(0x1df):case _0x2f0b7c(0x206):case _0x2f0b7c(0x1bc):return+_0x11b17d;default:return _0x11b17d;}}}function a92_0x5c13(){const _0x496a86=['createDecryptPipe','defineProperty','randomUUID','int','resume','446590ueWOiV','TEXT_CSV','fields','119819sPkUCF','describe','percent','writeEncryptedTempFile','true','retrieve','parse','POLL_INTERVAL','catch','pull','1445820kKiFBT','destroy','path','request','isExistsPath','CryptoUtils','end','__importDefault','jobStorePath','readEncryptedTempFile','currency','198cTNBMG','handleError','136zcsuww','./base-retrieve','replace','once','fs/promises','baseRetrievePayload','crypto','getIsDone','pipelineCallback','(((.+)+)+)+$','then','_read','error','csv-parse','double','_fieldsTypes','3835071wnaTZw','../job-detail','get','isPaused','push','csvParser','reduce','read','readable','join','stream','set','readEncryptionVector','bind','default','2896998SsPSoI','search','BulkV1QueryContentType','stream/promises','boolean','BaseBulkRetrieve','castCsvValue','data','apply','8524LiPKmo','createEncryptPipe','FsUtils','14956XbYpEY','.000+0000','633kuhweo','BaseRetrieve','createReader','toString','42ybGRSy'];a92_0x5c13=function(){return _0x496a86;};return a92_0x5c13();}exports[a92_0x458be6(0x1f5)]=BaseBulkRetrieve,BaseBulkRetrieve[a92_0x458be6(0x1c1)]=0x1388;