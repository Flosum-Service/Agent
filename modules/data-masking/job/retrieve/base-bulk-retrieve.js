const a92_0x5177da=a92_0x5bff;(function(_0x47f646,_0x5a8583){const _0x5cf059=a92_0x5bff,_0x1d2f03=_0x47f646();while(!![]){try{const _0x2490da=parseInt(_0x5cf059(0x1c3))/0x1+parseInt(_0x5cf059(0x197))/0x2+parseInt(_0x5cf059(0x1bf))/0x3*(-parseInt(_0x5cf059(0x18b))/0x4)+-parseInt(_0x5cf059(0x1ba))/0x5+-parseInt(_0x5cf059(0x19a))/0x6+parseInt(_0x5cf059(0x1bc))/0x7*(parseInt(_0x5cf059(0x19b))/0x8)+parseInt(_0x5cf059(0x192))/0x9*(parseInt(_0x5cf059(0x1b0))/0xa);if(_0x2490da===_0x5a8583)break;else _0x1d2f03['push'](_0x1d2f03['shift']());}catch(_0x13006b){_0x1d2f03['push'](_0x1d2f03['shift']());}}}(a92_0x4eeb,0x8ae95));const a92_0x4a3328=(function(){let _0x1e2433=!![];return function(_0x7fd173,_0x355c92){const _0x5bb7f9=_0x1e2433?function(){if(_0x355c92){const _0x438ca9=_0x355c92['apply'](_0x7fd173,arguments);return _0x355c92=null,_0x438ca9;}}:function(){};return _0x1e2433=![],_0x5bb7f9;};}()),a92_0x55b474=a92_0x4a3328(this,function(){const _0x160741=a92_0x5bff;return a92_0x55b474[_0x160741(0x193)]()[_0x160741(0x1cd)](_0x160741(0x194))[_0x160741(0x193)]()[_0x160741(0x19c)](a92_0x55b474)[_0x160741(0x1cd)]('(((.+)+)+)+$');});a92_0x55b474();'use strict';function a92_0x5bff(_0x296e99,_0xddd46d){const _0x3d9c49=a92_0x4eeb();return a92_0x5bff=function(_0x55b474,_0x4a3328){_0x55b474=_0x55b474-0x188;let _0x4eeb42=_0x3d9c49[_0x55b474];return _0x4eeb42;},a92_0x5bff(_0x296e99,_0xddd46d);}var __importDefault=this&&this['__importDefault']||function(_0x556939){return _0x556939&&_0x556939['__esModule']?_0x556939:{'default':_0x556939};};Object[a92_0x5177da(0x1a1)](exports,a92_0x5177da(0x1ac),{'value':!![]}),exports[a92_0x5177da(0x1c2)]=void 0x0;const base_retrieve_1=require(a92_0x5177da(0x1c4)),stream_1=require(a92_0x5177da(0x1b2)),path_1=__importDefault(require(a92_0x5177da(0x1a5))),utils_1=require(a92_0x5177da(0x1be)),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require(a92_0x5177da(0x19f)),crypto_1=require(a92_0x5177da(0x1c7)),csv_parse_1=require(a92_0x5177da(0x1bd)),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a92_0x5177da(0x1d1)),constants_1=require(a92_0x5177da(0x1a2));function a92_0x4eeb(){const _0x4394dc=['(((.+)+)+)+$','join','describe','1099532LqTDkJ','handleError','error','4859610PUewBq','8qxWvLk','constructor','destroy','_read','stream/promises','readEncryptedTempFile','defineProperty','../../constants','pipelineCallback','readEncryptionVector','path','resume','csvParser','BulkV1QueryContentType','retrieve','get','SALESFORCE_API_VERSION','__esModule','read','double','currency','90BzfVLY','bind','stream','FsUtils','BaseRetrieve','createDecryptPipe','randomUUID','writeEncryptedTempFile','set','end','5104780qlofzo','fields','6677412sxshxF','csv-parse','@flosum/utils','63021hnsUQK','default','isExistsPath','BaseBulkRetrieve','73303brhVQu','./base-retrieve','pull','castCsvValue','crypto','CryptoUtils','createReadStream','pause','createReader','createWriteStream','search','_fieldsTypes','TEXT_CSV','pipeline','../job-detail','once','then','baseRetrievePayload','push','112mUigQc','request','queryBuilder','replace','catch','isPaused','createEncryptPipe','1411083pnLOGY','toString'];a92_0x4eeb=function(){return _0x4394dc;};return a92_0x4eeb();}class BaseBulkRetrieve extends base_retrieve_1[a92_0x5177da(0x1b4)]{get[a92_0x5177da(0x189)](){const _0x5e17f1=a92_0x5177da;return{'queryBuilder':this[_0x5e17f1(0x18d)],'instance':this[_0x5e17f1(0x18c)],'api':constants_1[_0x5e17f1(0x1ab)],'contentType':salesforce_1[_0x5e17f1(0x1a8)][_0x5e17f1(0x1cf)]};}async[a92_0x5177da(0x1c5)](){const _0x536aef=a92_0x5177da;var _0x25c661,_0x2ddea6;if(this[_0x536aef(0x1a9)]['getIsDone']()&&!((_0x25c661=this[_0x536aef(0x1a7)])===null||_0x25c661===void 0x0?void 0x0:_0x25c661[_0x536aef(0x190)]())){this['push'](null);return;}if((_0x2ddea6=this[_0x536aef(0x1a7)])===null||_0x2ddea6===void 0x0?void 0x0:_0x2ddea6[_0x536aef(0x190)]()){this[_0x536aef(0x1a7)][_0x536aef(0x1a6)]();return;}const _0x42f943=await this[_0x536aef(0x1a9)]['execute']();if(!_0x42f943)return this[_0x536aef(0x1c5)]();await this[_0x536aef(0x1cb)](_0x42f943);}async['createReader'](_0x10d44e){const _0x446b7b=a92_0x5177da,_0x4feb96=path_1[_0x446b7b(0x1c0)][_0x446b7b(0x195)](job_detail_1['jobStorePath'],(0x0,crypto_1[_0x446b7b(0x1b6)])()),_0x4d75b4=(0x0,crypto_1[_0x446b7b(0x1b6)])(),_0x5e02ca=await this[_0x446b7b(0x1b7)](_0x10d44e,_0x4feb96,_0x4d75b4)[_0x446b7b(0x188)](()=>this[_0x446b7b(0x1a0)](_0x4feb96,_0x4d75b4)),_0x5e9bb8={'columns':!![],'cast':this[_0x446b7b(0x1c6)][_0x446b7b(0x1b1)](this)};this[_0x446b7b(0x1a7)]=(0x0,stream_1[_0x446b7b(0x1d0)])(_0x5e02ca,(0x0,csv_parse_1['parse'])(_0x5e9bb8),this['pipelineCallback'][_0x446b7b(0x1b1)](this,_0x4feb96)),this['csvParser']['on']('data',_0x3d0e48=>{const _0x36f474=_0x446b7b;this[_0x36f474(0x1a7)][_0x36f474(0x1ca)](),this[_0x36f474(0x18a)](_0x3d0e48);}),this[_0x446b7b(0x1a7)]['on'](_0x446b7b(0x1b9),async()=>{const _0x25c585=_0x446b7b;return await utils_1[_0x25c585(0x1b3)][_0x25c585(0x1c1)](_0x4feb96)&&await(0x0,promises_1['rm'])(_0x4feb96)['catch'](this['handleError'][_0x25c585(0x1b1)](this,null)),this[_0x25c585(0x19e)]();}),this[_0x446b7b(0x1a7)]['on'](_0x446b7b(0x199),this[_0x446b7b(0x1a3)][_0x446b7b(0x1b1)](this,_0x4feb96));}async['writeEncryptedTempFile'](_0x381400,_0x56ee3c,_0x1b07ab){const _0x38cce3=a92_0x5177da,_0x3cf997=fs_1[_0x38cce3(0x1c0)][_0x38cce3(0x1cc)](_0x56ee3c);await(0x0,promises_2[_0x38cce3(0x1d0)])(_0x381400,utils_1[_0x38cce3(0x1c8)][_0x38cce3(0x191)](_0x1b07ab),_0x3cf997);}async[a92_0x5177da(0x1a0)](_0x46f9ea,_0xf8277e){const _0x518a2f=a92_0x5177da,_0x1d40ba=fs_1[_0x518a2f(0x1c0)][_0x518a2f(0x1c9)](_0x46f9ea),_0x36a64c=await this['readEncryptionVector'](_0x1d40ba),_0x24e308=utils_1[_0x518a2f(0x1c8)][_0x518a2f(0x1b5)](_0xf8277e,_0x36a64c);return(0x0,stream_1['pipeline'])(_0x1d40ba,_0x24e308,this['pipelineCallback'][_0x518a2f(0x1b1)](this,_0x46f9ea));}async['pipelineCallback'](_0x547562,_0x3608c1){const _0x336f8b=a92_0x5177da;_0x3608c1&&await this[_0x336f8b(0x198)](_0x547562,_0x3608c1);}async[a92_0x5177da(0x198)](_0x63c936,_0x1159a7){const _0x1e9c52=a92_0x5177da;_0x63c936&&await utils_1[_0x1e9c52(0x1b3)][_0x1e9c52(0x1c1)](_0x63c936)&&await(0x0,promises_1['rm'])(_0x63c936)[_0x1e9c52(0x18f)](_0x3f83de=>job_detail_1['systemLogger'][_0x1e9c52(0x199)](_0x3f83de)),this[_0x1e9c52(0x19d)](_0x1159a7);}async[a92_0x5177da(0x1a4)](_0x3960fb){return new Promise((_0x5cd70e,_0x4fed8c)=>{const _0xfe0f0c=a92_0x5bff;_0x3960fb[_0xfe0f0c(0x1d2)]('error',_0x4fed8c),_0x3960fb['once']('readable',()=>{const _0x288e73=_0xfe0f0c,_0x30be28=_0x3960fb[_0x288e73(0x1ad)](0x10);_0x5cd70e(_0x30be28);});});}['castCsvValue'](_0xdb5a54,{header:_0x4a87cd,column:_0xd24e22}){const _0x39d78b=a92_0x5177da;!this[_0x39d78b(0x1ce)]&&(this['_fieldsTypes']=this[_0x39d78b(0x196)][_0x39d78b(0x1bb)]['reduce']((_0x202fed,{name:_0x5693d2,type:_0x32f203})=>_0x202fed[_0x39d78b(0x1b8)](_0x5693d2,_0x32f203),new Map()));if(_0x4a87cd)return _0xdb5a54;if(!_0xdb5a54)return null;switch(this['_fieldsTypes'][_0x39d78b(0x1aa)](_0xd24e22)){case'datetime':return _0xdb5a54[_0x39d78b(0x18e)](/\.\d{3}Z$/,'.000+0000');case'boolean':return _0xdb5a54==='true';case _0x39d78b(0x1af):case _0x39d78b(0x1ae):case'int':case'percent':return+_0xdb5a54;default:return _0xdb5a54;}}}exports[a92_0x5177da(0x1c2)]=BaseBulkRetrieve,BaseBulkRetrieve['POLL_INTERVAL']=0x1388;