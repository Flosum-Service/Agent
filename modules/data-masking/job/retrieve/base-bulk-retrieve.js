const a92_0xa44cca=a92_0x5d8f;(function(_0x3f1231,_0x3cb29d){const _0x213811=a92_0x5d8f,_0x570ae7=_0x3f1231();while(!![]){try{const _0x5084a1=parseInt(_0x213811(0xb0))/0x1*(parseInt(_0x213811(0x81))/0x2)+parseInt(_0x213811(0xaf))/0x3*(-parseInt(_0x213811(0x93))/0x4)+parseInt(_0x213811(0x90))/0x5+parseInt(_0x213811(0x92))/0x6*(parseInt(_0x213811(0xc4))/0x7)+parseInt(_0x213811(0xa1))/0x8*(-parseInt(_0x213811(0xa2))/0x9)+parseInt(_0x213811(0xb3))/0xa+-parseInt(_0x213811(0xb4))/0xb;if(_0x5084a1===_0x3cb29d)break;else _0x570ae7['push'](_0x570ae7['shift']());}catch(_0x483b07){_0x570ae7['push'](_0x570ae7['shift']());}}}(a92_0x5779,0x4845b));const a92_0xf75f93=(function(){let _0x158809=!![];return function(_0x20e055,_0x45d8b6){const _0x2e7bd6=_0x158809?function(){const _0xd0e9be=a92_0x5d8f;if(_0x45d8b6){const _0x19f127=_0x45d8b6[_0xd0e9be(0xbb)](_0x20e055,arguments);return _0x45d8b6=null,_0x19f127;}}:function(){};return _0x158809=![],_0x2e7bd6;};}()),a92_0x5ada2b=a92_0xf75f93(this,function(){const _0x5630a7=a92_0x5d8f;return a92_0x5ada2b['toString']()[_0x5630a7(0x96)](_0x5630a7(0x8e))['toString']()['constructor'](a92_0x5ada2b)[_0x5630a7(0x96)](_0x5630a7(0x8e));});function a92_0x5779(){const _0x25dfbf=['pause','get','_fieldsTypes','624368TgHtLB','18HCdzuU','destroy','path','pull','POLL_INTERVAL','then','bind','join','resume','createWriteStream','handleError','createReader','set','1245vORLSJ','923zSsaYr','isPaused','../job-detail','5386080vyfinC','10656349fwdAaE','../../constants','getIsDone','.000+0000','castCsvValue','retrieve','crypto','apply','parse','createDecryptPipe','pipelineCallback','data','catch','csv-parse','double','boolean','847973qwFGmH','reduce','FsUtils','@flosum/salesforce','pipeline','isExistsPath','randomUUID','createReadStream','862CXJAty','fields','queryBuilder','readEncryptedTempFile','systemLogger','./base-retrieve','read','TEXT_CSV','readEncryptionVector','CryptoUtils','default','writeEncryptedTempFile','_read','(((.+)+)+)+$','datetime','2748265lEjpqR','once','6UjQyvh','1796OklIaQ','SALESFORCE_API_VERSION','csvParser','search','error','__esModule','execute','BaseBulkRetrieve','BaseRetrieve','createEncryptPipe','@flosum/utils'];a92_0x5779=function(){return _0x25dfbf;};return a92_0x5779();}function a92_0x5d8f(_0x8d27bd,_0x7ff388){const _0x4d86d9=a92_0x5779();return a92_0x5d8f=function(_0x5ada2b,_0xf75f93){_0x5ada2b=_0x5ada2b-0x7c;let _0x5779be=_0x4d86d9[_0x5ada2b];return _0x5779be;},a92_0x5d8f(_0x8d27bd,_0x7ff388);}a92_0x5ada2b();'use strict';var __importDefault=this&&this['__importDefault']||function(_0xe9189e){const _0x12248e=a92_0x5d8f;return _0xe9189e&&_0xe9189e[_0x12248e(0x98)]?_0xe9189e:{'default':_0xe9189e};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a92_0xa44cca(0x9a)]=void 0x0;const base_retrieve_1=require(a92_0xa44cca(0x86)),stream_1=require('stream'),path_1=__importDefault(require(a92_0xa44cca(0xa4))),utils_1=require(a92_0xa44cca(0x9d)),promises_1=require('fs/promises'),fs_1=__importDefault(require('fs')),promises_2=require('stream/promises'),crypto_1=require(a92_0xa44cca(0xba)),csv_parse_1=require(a92_0xa44cca(0xc1)),salesforce_1=require(a92_0xa44cca(0x7c)),job_detail_1=require(a92_0xa44cca(0xb2)),constants_1=require(a92_0xa44cca(0xb5));class BaseBulkRetrieve extends base_retrieve_1[a92_0xa44cca(0x9b)]{get['baseRetrievePayload'](){const _0x75da50=a92_0xa44cca;return{'queryBuilder':this[_0x75da50(0x83)],'instance':this['request'],'api':constants_1[_0x75da50(0x94)],'contentType':salesforce_1['BulkV1QueryContentType'][_0x75da50(0x88)]};}async[a92_0xa44cca(0xa5)](){const _0x15d2f2=a92_0xa44cca;var _0x3d3b63,_0x2c8f9c;if(this['retrieve'][_0x15d2f2(0xb6)]()&&!((_0x3d3b63=this[_0x15d2f2(0x95)])===null||_0x3d3b63===void 0x0?void 0x0:_0x3d3b63[_0x15d2f2(0xb1)]())){this['push'](null);return;}if((_0x2c8f9c=this[_0x15d2f2(0x95)])===null||_0x2c8f9c===void 0x0?void 0x0:_0x2c8f9c[_0x15d2f2(0xb1)]()){this['csvParser'][_0x15d2f2(0xaa)]();return;}const _0x5e5b9d=await this[_0x15d2f2(0xb9)][_0x15d2f2(0x99)]();if(!_0x5e5b9d)return this[_0x15d2f2(0xa5)]();await this[_0x15d2f2(0xad)](_0x5e5b9d);}async[a92_0xa44cca(0xad)](_0x44d14a){const _0x2e635c=a92_0xa44cca,_0x2daf33=path_1[_0x2e635c(0x8b)][_0x2e635c(0xa9)](job_detail_1['jobStorePath'],(0x0,crypto_1[_0x2e635c(0x7f)])()),_0x31dce2=(0x0,crypto_1[_0x2e635c(0x7f)])(),_0xcfdb13=await this[_0x2e635c(0x8c)](_0x44d14a,_0x2daf33,_0x31dce2)[_0x2e635c(0xa7)](()=>this[_0x2e635c(0x84)](_0x2daf33,_0x31dce2)),_0x525dce={'columns':!![],'cast':this[_0x2e635c(0xb8)][_0x2e635c(0xa8)](this)};this['csvParser']=(0x0,stream_1['pipeline'])(_0xcfdb13,(0x0,csv_parse_1[_0x2e635c(0xbc)])(_0x525dce),this[_0x2e635c(0xbe)][_0x2e635c(0xa8)](this,_0x2daf33)),this[_0x2e635c(0x95)]['on'](_0x2e635c(0xbf),_0x3e922d=>{const _0x534852=_0x2e635c;this[_0x534852(0x95)][_0x534852(0x9e)](),this['push'](_0x3e922d);}),this[_0x2e635c(0x95)]['on']('end',async()=>{const _0x1f0833=_0x2e635c;return await utils_1[_0x1f0833(0xc6)][_0x1f0833(0x7e)](_0x2daf33)&&await(0x0,promises_1['rm'])(_0x2daf33)[_0x1f0833(0xc0)](this[_0x1f0833(0xac)][_0x1f0833(0xa8)](this,null)),this[_0x1f0833(0x8d)]();}),this['csvParser']['on']('error',this['pipelineCallback']['bind'](this,_0x2daf33));}async['writeEncryptedTempFile'](_0x13ec51,_0xcd8fc5,_0x1e14b9){const _0x1ba278=a92_0xa44cca,_0x5d006e=fs_1[_0x1ba278(0x8b)][_0x1ba278(0xab)](_0xcd8fc5);await(0x0,promises_2['pipeline'])(_0x13ec51,utils_1[_0x1ba278(0x8a)][_0x1ba278(0x9c)](_0x1e14b9),_0x5d006e);}async[a92_0xa44cca(0x84)](_0x40a27c,_0x16a6f8){const _0x2d8160=a92_0xa44cca,_0x62f978=fs_1[_0x2d8160(0x8b)][_0x2d8160(0x80)](_0x40a27c),_0x58ad11=await this['readEncryptionVector'](_0x62f978),_0x4bb756=utils_1[_0x2d8160(0x8a)][_0x2d8160(0xbd)](_0x16a6f8,_0x58ad11);return(0x0,stream_1[_0x2d8160(0x7d)])(_0x62f978,_0x4bb756,this['pipelineCallback'][_0x2d8160(0xa8)](this,_0x40a27c));}async[a92_0xa44cca(0xbe)](_0x1ecb9c,_0x20220f){const _0x384bb2=a92_0xa44cca;_0x20220f&&await this[_0x384bb2(0xac)](_0x1ecb9c,_0x20220f);}async[a92_0xa44cca(0xac)](_0x272028,_0xeae43a){const _0x19e3d4=a92_0xa44cca;_0x272028&&await utils_1['FsUtils'][_0x19e3d4(0x7e)](_0x272028)&&await(0x0,promises_1['rm'])(_0x272028)[_0x19e3d4(0xc0)](_0xba30e0=>job_detail_1[_0x19e3d4(0x85)][_0x19e3d4(0x97)](_0xba30e0)),this[_0x19e3d4(0xa3)](_0xeae43a);}async[a92_0xa44cca(0x89)](_0x57c0cb){return new Promise((_0x5e261b,_0x3ee1ad)=>{const _0x11c52b=a92_0x5d8f;_0x57c0cb[_0x11c52b(0x91)](_0x11c52b(0x97),_0x3ee1ad),_0x57c0cb[_0x11c52b(0x91)]('readable',()=>{const _0xc8407d=_0x11c52b,_0x495074=_0x57c0cb[_0xc8407d(0x87)](0x10);_0x5e261b(_0x495074);});});}[a92_0xa44cca(0xb8)](_0x12ae16,{header:_0x1f60bc,column:_0x1ddac2}){const _0x1c3027=a92_0xa44cca;!this[_0x1c3027(0xa0)]&&(this['_fieldsTypes']=this['describe'][_0x1c3027(0x82)][_0x1c3027(0xc5)]((_0x2810b4,{name:_0x234d48,type:_0x2b68e6})=>_0x2810b4[_0x1c3027(0xae)](_0x234d48,_0x2b68e6),new Map()));if(_0x1f60bc)return _0x12ae16;if(!_0x12ae16)return null;switch(this[_0x1c3027(0xa0)][_0x1c3027(0x9f)](_0x1ddac2)){case _0x1c3027(0x8f):return _0x12ae16['replace'](/\.\d{3}Z$/,_0x1c3027(0xb7));case _0x1c3027(0xc3):return _0x12ae16==='true';case'currency':case _0x1c3027(0xc2):case'int':case'percent':return+_0x12ae16;default:return _0x12ae16;}}}exports['BaseBulkRetrieve']=BaseBulkRetrieve,BaseBulkRetrieve[a92_0xa44cca(0xa6)]=0x1388;