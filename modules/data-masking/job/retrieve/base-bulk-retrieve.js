const a75_0x39faed=a75_0x247c;function a75_0x9c71(){const _0x33bf45=['castCsvValue','_fieldsTypes','80YRZRJM','csv-parse','parse','error','3448188JUILCN','datetime','createEncryptPipe','../../constants','CryptoUtils','defineProperty','POLL_INTERVAL','jobStorePath','54413NfscXr','currency','isExistsPath','__esModule','isPaused','pull','describe','43938tiwZOc','writeEncryptedTempFile','percent','1022463qAXlil','then','resume','createDecryptPipe','default','pipeline','baseRetrievePayload','readEncryptionVector','249620wFMwzL','replace','once','FsUtils','createReadStream','BaseRetrieve','toString','17981380RZCMtx','crypto','get','264bmMUGR','readable','search','592728IZdLSs','./base-retrieve','destroy','fs/promises','systemLogger','read','boolean','push','catch','handleError','execute','BaseBulkRetrieve','data','259oqgmEd','readEncryptedTempFile','true','bind','4iyidza','csvParser','24pJqUIr','(((.+)+)+)+$','@flosum/utils','createUnzip','stream/promises','retrieve','../job-detail','SALESFORCE_API_VERSION','pipelineCallback','request','__importDefault','BulkV1QueryContentType','apply','TEXT_CSV','_read'];a75_0x9c71=function(){return _0x33bf45;};return a75_0x9c71();}(function(_0x4acf61,_0x3a0c4c){const _0x1998fd=a75_0x247c,_0x421fa6=_0x4acf61();while(!![]){try{const _0x3c8b0f=-parseInt(_0x1998fd(0x152))/0x1*(parseInt(_0x1998fd(0x133))/0x2)+-parseInt(_0x1998fd(0x14a))/0x3+parseInt(_0x1998fd(0x146))/0x4*(parseInt(_0x1998fd(0x115))/0x5)+parseInt(_0x1998fd(0x159))/0x6*(parseInt(_0x1998fd(0x12f))/0x7)+-parseInt(_0x1998fd(0x135))/0x8*(-parseInt(_0x1998fd(0x15c))/0x9)+parseInt(_0x1998fd(0x11c))/0xa+parseInt(_0x1998fd(0x11f))/0xb*(-parseInt(_0x1998fd(0x122))/0xc);if(_0x3c8b0f===_0x3a0c4c)break;else _0x421fa6['push'](_0x421fa6['shift']());}catch(_0x224d80){_0x421fa6['push'](_0x421fa6['shift']());}}}(a75_0x9c71,0xeb868));const a75_0xf0b17a=(function(){let _0x44a98a=!![];return function(_0x2129ac,_0x375115){const _0x3e0853=_0x44a98a?function(){const _0x4240cb=a75_0x247c;if(_0x375115){const _0x42977b=_0x375115[_0x4240cb(0x141)](_0x2129ac,arguments);return _0x375115=null,_0x42977b;}}:function(){};return _0x44a98a=![],_0x3e0853;};}()),a75_0x348207=a75_0xf0b17a(this,function(){const _0x4094e5=a75_0x247c;return a75_0x348207['toString']()[_0x4094e5(0x121)](_0x4094e5(0x136))[_0x4094e5(0x11b)]()['constructor'](a75_0x348207)[_0x4094e5(0x121)](_0x4094e5(0x136));});a75_0x348207();function a75_0x247c(_0x3c5d6d,_0x2e5b3b){const _0x1d6e75=a75_0x9c71();return a75_0x247c=function(_0x348207,_0xf0b17a){_0x348207=_0x348207-0x110;let _0x9c7124=_0x1d6e75[_0x348207];return _0x9c7124;},a75_0x247c(_0x3c5d6d,_0x2e5b3b);}'use strict';var __importDefault=this&&this[a75_0x39faed(0x13f)]||function(_0x4e5a77){const _0x3290c8=a75_0x39faed;return _0x4e5a77&&_0x4e5a77[_0x3290c8(0x155)]?_0x4e5a77:{'default':_0x4e5a77};};Object[a75_0x39faed(0x14f)](exports,a75_0x39faed(0x155),{'value':!![]}),exports['BaseBulkRetrieve']=void 0x0;const base_retrieve_1=require(a75_0x39faed(0x123)),stream_1=require('stream'),path_1=__importDefault(require('path')),utils_1=require(a75_0x39faed(0x137)),promises_1=require(a75_0x39faed(0x125)),fs_1=__importDefault(require('fs')),promises_2=require(a75_0x39faed(0x139)),crypto_1=require(a75_0x39faed(0x11d)),csv_parse_1=require(a75_0x39faed(0x147)),zlib_1=__importDefault(require('zlib')),salesforce_1=require('@flosum/salesforce'),job_detail_1=require(a75_0x39faed(0x13b)),constants_1=require(a75_0x39faed(0x14d));class BaseBulkRetrieve extends base_retrieve_1[a75_0x39faed(0x11a)]{get[a75_0x39faed(0x113)](){const _0x36a038=a75_0x39faed;return{'queryBuilder':this['queryBuilder'],'instance':this[_0x36a038(0x13e)],'api':constants_1[_0x36a038(0x13c)],'contentType':salesforce_1[_0x36a038(0x140)][_0x36a038(0x142)]};}async[a75_0x39faed(0x157)](){const _0x29f72b=a75_0x39faed;var _0x5166c2,_0x44a500;if(this[_0x29f72b(0x13a)]['getIsDone']()&&!((_0x5166c2=this[_0x29f72b(0x134)])===null||_0x5166c2===void 0x0?void 0x0:_0x5166c2['isPaused']())){this['push'](null);return;}if((_0x44a500=this['csvParser'])===null||_0x44a500===void 0x0?void 0x0:_0x44a500[_0x29f72b(0x156)]()){this[_0x29f72b(0x134)][_0x29f72b(0x15e)]();return;}const _0x39623f=await this[_0x29f72b(0x13a)][_0x29f72b(0x12c)]();if(!_0x39623f)return this['pull']();await this['createReader'](_0x39623f);}async['createReader'](_0x45ff59){const _0x2e9c61=a75_0x39faed,_0x4cc2e1=path_1['default']['join'](job_detail_1[_0x2e9c61(0x151)],(0x0,crypto_1['randomUUID'])()),_0x150bc4=(0x0,crypto_1['randomUUID'])(),_0x174544=await this[_0x2e9c61(0x15a)](_0x45ff59,_0x4cc2e1,_0x150bc4)[_0x2e9c61(0x15d)](()=>this[_0x2e9c61(0x130)](_0x4cc2e1,_0x150bc4)),_0x27fcbe={'columns':!![],'cast':this[_0x2e9c61(0x144)][_0x2e9c61(0x132)](this)};this[_0x2e9c61(0x134)]=(0x0,stream_1['pipeline'])(_0x174544,zlib_1['default'][_0x2e9c61(0x138)](),(0x0,csv_parse_1[_0x2e9c61(0x148)])(_0x27fcbe),this[_0x2e9c61(0x13d)][_0x2e9c61(0x132)](this,_0x4cc2e1)),this[_0x2e9c61(0x134)]['on'](_0x2e9c61(0x12e),_0x31737d=>{const _0x32fff6=_0x2e9c61;this['csvParser']['pause'](),this[_0x32fff6(0x129)](_0x31737d);}),this[_0x2e9c61(0x134)]['on']('end',async()=>{const _0x28088f=_0x2e9c61;return await utils_1[_0x28088f(0x118)][_0x28088f(0x154)](_0x4cc2e1)&&await(0x0,promises_1['rm'])(_0x4cc2e1)[_0x28088f(0x12a)](this[_0x28088f(0x12b)][_0x28088f(0x132)](this,null)),this[_0x28088f(0x143)]();}),this[_0x2e9c61(0x134)]['on'](_0x2e9c61(0x149),this[_0x2e9c61(0x13d)][_0x2e9c61(0x132)](this,_0x4cc2e1));}async[a75_0x39faed(0x15a)](_0x36f69d,_0x386bae,_0x433a64){const _0xb3b61b=a75_0x39faed,_0x4c3b85=fs_1[_0xb3b61b(0x111)]['createWriteStream'](_0x386bae);await(0x0,promises_2['pipeline'])(_0x36f69d,utils_1[_0xb3b61b(0x14e)][_0xb3b61b(0x14c)](_0x433a64),_0x4c3b85);}async[a75_0x39faed(0x130)](_0x25a7b1,_0x433fce){const _0x1ebbbf=a75_0x39faed,_0x39a544=fs_1[_0x1ebbbf(0x111)][_0x1ebbbf(0x119)](_0x25a7b1),_0x3f34c5=await this['readEncryptionVector'](_0x39a544),_0x75ad23=utils_1[_0x1ebbbf(0x14e)][_0x1ebbbf(0x110)](_0x433fce,_0x3f34c5);return(0x0,stream_1[_0x1ebbbf(0x112)])(_0x39a544,_0x75ad23,this[_0x1ebbbf(0x13d)][_0x1ebbbf(0x132)](this,_0x25a7b1));}async['pipelineCallback'](_0x1a890e,_0x13e0fe){const _0x15519d=a75_0x39faed;_0x13e0fe&&await this[_0x15519d(0x12b)](_0x1a890e,_0x13e0fe);}async[a75_0x39faed(0x12b)](_0x387b04,_0x54dbfe){const _0x1743e6=a75_0x39faed;_0x387b04&&await utils_1[_0x1743e6(0x118)][_0x1743e6(0x154)](_0x387b04)&&await(0x0,promises_1['rm'])(_0x387b04)[_0x1743e6(0x12a)](_0x21c457=>job_detail_1[_0x1743e6(0x126)][_0x1743e6(0x149)](_0x21c457)),this[_0x1743e6(0x124)](_0x54dbfe);}async[a75_0x39faed(0x114)](_0x47421d){return new Promise((_0x597a82,_0x4b901f)=>{const _0x295f3d=a75_0x247c;_0x47421d[_0x295f3d(0x117)](_0x295f3d(0x149),_0x4b901f),_0x47421d[_0x295f3d(0x117)](_0x295f3d(0x120),()=>{const _0x13e375=_0x295f3d,_0x42c1bf=_0x47421d[_0x13e375(0x127)](0x10);_0x597a82(_0x42c1bf);});});}['castCsvValue'](_0xea4881,{header:_0x4dcc26,column:_0x35f530}){const _0x290120=a75_0x39faed;!this[_0x290120(0x145)]&&(this['_fieldsTypes']=this[_0x290120(0x158)]['fields']['reduce']((_0x24e765,{name:_0x4854e6,type:_0x2c8b28})=>_0x24e765['set'](_0x4854e6,_0x2c8b28),new Map()));if(_0x4dcc26)return _0xea4881;if(!_0xea4881)return null;switch(this['_fieldsTypes'][_0x290120(0x11e)](_0x35f530)){case _0x290120(0x14b):return _0xea4881[_0x290120(0x116)](/\.\d{3}Z$/,'.000+0000');case _0x290120(0x128):return _0xea4881===_0x290120(0x131);case _0x290120(0x153):case'double':case'int':case _0x290120(0x15b):return+_0xea4881;default:return _0xea4881;}}}exports[a75_0x39faed(0x12d)]=BaseBulkRetrieve,BaseBulkRetrieve[a75_0x39faed(0x150)]=0x1388;