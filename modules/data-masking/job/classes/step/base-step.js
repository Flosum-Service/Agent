const a59_0xf0f9c2=a59_0x5625;function a59_0x5625(_0x130e80,_0x3572aa){const _0x17ec3a=a59_0x55dd();return a59_0x5625=function(_0xb5cf67,_0x242a66){_0xb5cf67=_0xb5cf67-0x159;let _0x55dd1c=_0x17ec3a[_0xb5cf67];return _0x55dd1c;},a59_0x5625(_0x130e80,_0x3572aa);}(function(_0x4a47ac,_0x3fee75){const _0x500630=a59_0x5625,_0x32899b=_0x4a47ac();while(!![]){try{const _0x50524e=parseInt(_0x500630(0x17d))/0x1+parseInt(_0x500630(0x15d))/0x2*(parseInt(_0x500630(0x162))/0x3)+parseInt(_0x500630(0x16d))/0x4*(-parseInt(_0x500630(0x17f))/0x5)+parseInt(_0x500630(0x184))/0x6*(-parseInt(_0x500630(0x169))/0x7)+-parseInt(_0x500630(0x15a))/0x8*(-parseInt(_0x500630(0x17a))/0x9)+parseInt(_0x500630(0x183))/0xa*(parseInt(_0x500630(0x187))/0xb)+parseInt(_0x500630(0x181))/0xc;if(_0x50524e===_0x3fee75)break;else _0x32899b['push'](_0x32899b['shift']());}catch(_0x12f87c){_0x32899b['push'](_0x32899b['shift']());}}}(a59_0x55dd,0xcb2a6));const a59_0x242a66=(function(){let _0x380ad7=!![];return function(_0x340069,_0x452ffb){const _0x5191fb=_0x380ad7?function(){if(_0x452ffb){const _0x8ffc29=_0x452ffb['apply'](_0x340069,arguments);return _0x452ffb=null,_0x8ffc29;}}:function(){};return _0x380ad7=![],_0x5191fb;};}()),a59_0xb5cf67=a59_0x242a66(this,function(){const _0x24a10b=a59_0x5625;return a59_0xb5cf67[_0x24a10b(0x179)]()['search'](_0x24a10b(0x16f))[_0x24a10b(0x179)]()[_0x24a10b(0x15f)](a59_0xb5cf67)['search'](_0x24a10b(0x16f));});a59_0xb5cf67();'use strict';function a59_0x55dd(){const _0x185f16=['getRetrieveStream','objectDescribe','create','140MFLewM','BaseStep','(((.+)+)+)+$','build','type','defineProperty','getRecordsCount','log','fields','systemLogger','SortDirection','recordsCount','toString','220581CTcKuL','../../retrieve/retrieve-factory','SALESFORCE_API_VERSION','10473iYmMgr','getDeployStream','150695spiydv','whereClause','3575544ThhBtq','message','120ugiZxj','6jxiSOz','from','_whereClause','673277hoinYo','exception','objectName','176thENZp','_objectRuleType','ASC','20954rGYbEi','loggerJobState','constructor','../../job-detail','totalSize','141WJmXae','QueryBuilder','execute','loggerDetails','request','error','select','1312535dKqAvq'];a59_0x55dd=function(){return _0x185f16;};return a59_0x55dd();}Object[a59_0xf0f9c2(0x172)](exports,'__esModule',{'value':!![]}),exports['BaseStep']=void 0x0;const salesforce_1=require('@flosum/salesforce'),retrieve_factory_1=require(a59_0xf0f9c2(0x17b)),constants_1=require('../../../constants'),deploy_factory_1=require('../../deploy/deploy-factory'),job_detail_1=require(a59_0xf0f9c2(0x160)),FIELD_ID='Id';class BaseStep{constructor({loggerDetails:_0x487a00,loggerJobState:_0x26fad1,objectName:_0x1a7e4a,request:_0x533432,objectRule:_0x4c01c0,objectDescribe:_0x130c67}){const _0x3d7675=a59_0xf0f9c2;this[_0x3d7675(0x175)]=[],this[_0x3d7675(0x165)]=_0x487a00,this[_0x3d7675(0x15e)]=_0x26fad1,this[_0x3d7675(0x159)]=_0x1a7e4a,this[_0x3d7675(0x166)]=_0x533432,this[_0x3d7675(0x186)]=_0x4c01c0[_0x3d7675(0x180)],this[_0x3d7675(0x15b)]=_0x4c01c0[_0x3d7675(0x171)],this[_0x3d7675(0x16b)]=_0x130c67;}async[a59_0xf0f9c2(0x173)](){const _0x4e9622=a59_0xf0f9c2;try{const _0x3dc3cb=new salesforce_1[(_0x4e9622(0x163))]()[_0x4e9622(0x168)]('COUNT()')[_0x4e9622(0x185)](this[_0x4e9622(0x159)]);this[_0x4e9622(0x186)]&&_0x3dc3cb['where'](this[_0x4e9622(0x186)]);const _0x410fbd=await salesforce_1['QueryService'][_0x4e9622(0x164)](this['request'],{},_0x3dc3cb[_0x4e9622(0x170)](),![],constants_1[_0x4e9622(0x17c)]);return _0x410fbd[_0x4e9622(0x161)];}catch(_0x329754){return job_detail_1['systemLogger'][_0x4e9622(0x167)](_0x329754),-0x1;}}[a59_0xf0f9c2(0x16a)](){const _0x4efb35=a59_0xf0f9c2,_0x319ca3={'request':this[_0x4efb35(0x166)],'fields':this[_0x4efb35(0x175)],'whereClause':this[_0x4efb35(0x186)],'objectName':this[_0x4efb35(0x159)],'describe':this[_0x4efb35(0x16b)],'indexField':FIELD_ID,'indexFieldDirection':salesforce_1[_0x4efb35(0x177)][_0x4efb35(0x15c)]};return retrieve_factory_1['RetrieveFactory'][_0x4efb35(0x16c)](_0x319ca3,this[_0x4efb35(0x178)]);}[a59_0xf0f9c2(0x17e)](){const _0x3c2526=a59_0xf0f9c2,_0x237dc9={'request':this['request'],'objectName':this[_0x3c2526(0x159)],'externalIdField':FIELD_ID,'loggerDetails':this['loggerDetails'],'loggerJobState':this['loggerJobState']};return deploy_factory_1['DeployFactory'][_0x3c2526(0x16c)](_0x237dc9,this[_0x3c2526(0x15b)]);}[a59_0xf0f9c2(0x174)](_0x424f1e){const _0x287b2d=a59_0xf0f9c2;job_detail_1[_0x287b2d(0x176)][_0x287b2d(0x174)](_0x424f1e,this[_0x287b2d(0x159)]),this['loggerDetails'][_0x287b2d(0x174)](_0x424f1e,this[_0x287b2d(0x159)]);}[a59_0xf0f9c2(0x167)](_0x2beca5){const _0x4726ca=a59_0xf0f9c2;job_detail_1[_0x4726ca(0x176)]['error'](_0x2beca5,this[_0x4726ca(0x159)]),this[_0x4726ca(0x165)][_0x4726ca(0x188)](_0x2beca5[_0x4726ca(0x182)],this[_0x4726ca(0x159)]);}}exports[a59_0xf0f9c2(0x16e)]=BaseStep;