const a59_0x397951=a59_0xeaaf;(function(_0x35e132,_0x137ba9){const _0x1e53f2=a59_0xeaaf,_0x31da87=_0x35e132();while(!![]){try{const _0x47b5f1=-parseInt(_0x1e53f2(0x129))/0x1+-parseInt(_0x1e53f2(0x10f))/0x2*(-parseInt(_0x1e53f2(0x12a))/0x3)+parseInt(_0x1e53f2(0x132))/0x4*(-parseInt(_0x1e53f2(0x13c))/0x5)+parseInt(_0x1e53f2(0x110))/0x6+-parseInt(_0x1e53f2(0x12d))/0x7*(-parseInt(_0x1e53f2(0x138))/0x8)+parseInt(_0x1e53f2(0x111))/0x9+-parseInt(_0x1e53f2(0x137))/0xa*(parseInt(_0x1e53f2(0x121))/0xb);if(_0x47b5f1===_0x137ba9)break;else _0x31da87['push'](_0x31da87['shift']());}catch(_0xea831e){_0x31da87['push'](_0x31da87['shift']());}}}(a59_0xd964,0x8b9b8));const a59_0xe33f88=(function(){let _0x3a79b6=!![];return function(_0x146e05,_0x37a3b3){const _0xb42fc9=_0x3a79b6?function(){const _0x72f971=a59_0xeaaf;if(_0x37a3b3){const _0x20134f=_0x37a3b3[_0x72f971(0x136)](_0x146e05,arguments);return _0x37a3b3=null,_0x20134f;}}:function(){};return _0x3a79b6=![],_0xb42fc9;};}()),a59_0x2bc864=a59_0xe33f88(this,function(){const _0x300763=a59_0xeaaf;return a59_0x2bc864[_0x300763(0x133)]()[_0x300763(0x10e)]('(((.+)+)+)+$')[_0x300763(0x133)]()[_0x300763(0x122)](a59_0x2bc864)['search']('(((.+)+)+)+$');});a59_0x2bc864();'use strict';Object[a59_0x397951(0x11c)](exports,a59_0x397951(0x131),{'value':!![]}),exports[a59_0x397951(0x118)]=void 0x0;function a59_0xeaaf(_0x5b7d35,_0x4ec890){const _0x4ec879=a59_0xd964();return a59_0xeaaf=function(_0x2bc864,_0xe33f88){_0x2bc864=_0x2bc864-0x10e;let _0xd964a0=_0x4ec879[_0x2bc864];return _0xd964a0;},a59_0xeaaf(_0x5b7d35,_0x4ec890);}function a59_0xd964(){const _0x19cca2=['48DVOYDe','toString','SALESFORCE_API_VERSION','fields','apply','6410ySEBvG','8dZOEwC','DeployFactory','RetrieveFactory','_whereClause','52495QvPsCO','search','1406tTfBQL','74124nmofqO','6462531xUtBJm','_objectRuleType','objectDescribe','totalSize','whereClause','where','../../job-detail','BaseStep','@flosum/salesforce','build','select','defineProperty','../../../constants','../../retrieve/retrieve-factory','exception','objectName','28039BLhNIq','constructor','systemLogger','create','execute','log','QueryService','loggerJobState','203740uFlWZI','3081GzwpTD','error','QueryBuilder','7581525jHqFFO','getDeployStream','loggerDetails','request','__esModule'];a59_0xd964=function(){return _0x19cca2;};return a59_0xd964();}const salesforce_1=require(a59_0x397951(0x119)),retrieve_factory_1=require(a59_0x397951(0x11e)),constants_1=require(a59_0x397951(0x11d)),deploy_factory_1=require('../../deploy/deploy-factory'),job_detail_1=require(a59_0x397951(0x117)),FIELD_ID='Id';class BaseStep{constructor({loggerDetails:_0x3f2976,loggerJobState:_0x401634,objectName:_0x20eec6,request:_0xb276e3,objectRule:_0x5733d5,objectDescribe:_0x58966d}){const _0x41a3cf=a59_0x397951;this[_0x41a3cf(0x135)]=[],this['loggerDetails']=_0x3f2976,this[_0x41a3cf(0x128)]=_0x401634,this[_0x41a3cf(0x120)]=_0x20eec6,this[_0x41a3cf(0x130)]=_0xb276e3,this[_0x41a3cf(0x13b)]=_0x5733d5[_0x41a3cf(0x115)],this[_0x41a3cf(0x112)]=_0x5733d5['type'],this['objectDescribe']=_0x58966d;}async['getRecordsCount'](){const _0x5b2ad7=a59_0x397951;try{const _0xf28f65=new salesforce_1[(_0x5b2ad7(0x12c))]()[_0x5b2ad7(0x11b)]('COUNT()')['from'](this[_0x5b2ad7(0x120)]);this[_0x5b2ad7(0x13b)]&&_0xf28f65[_0x5b2ad7(0x116)](this[_0x5b2ad7(0x13b)]);const _0x1aafa3=await salesforce_1[_0x5b2ad7(0x127)][_0x5b2ad7(0x125)](this['request'],{},_0xf28f65[_0x5b2ad7(0x11a)](),![],constants_1[_0x5b2ad7(0x134)]);return _0x1aafa3[_0x5b2ad7(0x114)];}catch(_0x14d077){return job_detail_1[_0x5b2ad7(0x123)][_0x5b2ad7(0x12b)](_0x14d077),-0x1;}}['getRetrieveStream'](){const _0x4e2106=a59_0x397951,_0x3ba43d={'request':this['request'],'fields':this['fields'],'whereClause':this[_0x4e2106(0x13b)],'objectName':this[_0x4e2106(0x120)],'describe':this[_0x4e2106(0x113)]};return retrieve_factory_1[_0x4e2106(0x13a)]['create'](_0x3ba43d,this['recordsCount']);}[a59_0x397951(0x12e)](){const _0x40a4f5=a59_0x397951,_0x57f0a9={'request':this['request'],'objectName':this[_0x40a4f5(0x120)],'externalIdField':FIELD_ID,'loggerDetails':this['loggerDetails'],'loggerJobState':this[_0x40a4f5(0x128)]};return deploy_factory_1[_0x40a4f5(0x139)][_0x40a4f5(0x124)](_0x57f0a9,this['_objectRuleType']);}['log'](_0x13b720){const _0x5d658d=a59_0x397951;job_detail_1[_0x5d658d(0x123)][_0x5d658d(0x126)](_0x13b720,this[_0x5d658d(0x120)]),this[_0x5d658d(0x12f)][_0x5d658d(0x126)](_0x13b720,this[_0x5d658d(0x120)]);}[a59_0x397951(0x12b)](_0x1cf662){const _0x1b47d4=a59_0x397951;job_detail_1[_0x1b47d4(0x123)][_0x1b47d4(0x12b)](_0x1cf662,this[_0x1b47d4(0x120)]),this[_0x1b47d4(0x12f)][_0x1b47d4(0x11f)](_0x1cf662['message'],this['objectName']);}}exports[a59_0x397951(0x118)]=BaseStep;