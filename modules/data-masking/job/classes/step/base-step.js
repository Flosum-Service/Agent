const a58_0x1cde2f=a58_0x3ae0;(function(_0x8e134,_0x52ec4f){const _0x4b82e4=a58_0x3ae0,_0x2da253=_0x8e134();while(!![]){try{const _0x23ff95=-parseInt(_0x4b82e4(0x9e))/0x1+parseInt(_0x4b82e4(0x8f))/0x2+-parseInt(_0x4b82e4(0xad))/0x3+-parseInt(_0x4b82e4(0x8e))/0x4+-parseInt(_0x4b82e4(0x87))/0x5*(parseInt(_0x4b82e4(0xa6))/0x6)+parseInt(_0x4b82e4(0x93))/0x7*(-parseInt(_0x4b82e4(0xa8))/0x8)+parseInt(_0x4b82e4(0xa9))/0x9;if(_0x23ff95===_0x52ec4f)break;else _0x2da253['push'](_0x2da253['shift']());}catch(_0x2d5325){_0x2da253['push'](_0x2da253['shift']());}}}(a58_0x2e85,0x9fc42));function a58_0x2e85(){const _0x4a4618=['SortDirection','@flosum/salesforce','2415105BwYMJb','BaseStep','type','_whereClause','../../deploy/deploy-factory','../../job-detail','95PvIoBR','getDeployStream','request','DeployFactory','toString','objectName','message','1318492VqKLyQ','2018854eRcUAt','exception','defineProperty','ASC','70343BsEsxh','systemLogger','(((.+)+)+)+$','../../retrieve/retrieve-factory','../../../constants','_objectRuleType','error','apply','search','getRetrieveStream','loggerDetails','748191NTJIRa','QueryBuilder','create','objectDescribe','fields','loggerJobState','log','QueryService','192534VAFkqg','whereClause','488BeXFuw','24754536LHKsmF','constructor'];a58_0x2e85=function(){return _0x4a4618;};return a58_0x2e85();}const a58_0x446b34=(function(){let _0x44c8b7=!![];return function(_0x4cf333,_0x426a14){const _0x14383e=_0x44c8b7?function(){const _0x2d376c=a58_0x3ae0;if(_0x426a14){const _0x4c9234=_0x426a14[_0x2d376c(0x9a)](_0x4cf333,arguments);return _0x426a14=null,_0x4c9234;}}:function(){};return _0x44c8b7=![],_0x14383e;};}()),a58_0x2109a4=a58_0x446b34(this,function(){const _0x3d7c2a=a58_0x3ae0;return a58_0x2109a4[_0x3d7c2a(0x8b)]()[_0x3d7c2a(0x9b)]('(((.+)+)+)+$')[_0x3d7c2a(0x8b)]()[_0x3d7c2a(0xaa)](a58_0x2109a4)[_0x3d7c2a(0x9b)](_0x3d7c2a(0x95));});a58_0x2109a4();function a58_0x3ae0(_0x3948e6,_0x49b3b6){const _0xcb4ef2=a58_0x2e85();return a58_0x3ae0=function(_0x2109a4,_0x446b34){_0x2109a4=_0x2109a4-0x84;let _0x2e8562=_0xcb4ef2[_0x2109a4];return _0x2e8562;},a58_0x3ae0(_0x3948e6,_0x49b3b6);}'use strict';Object[a58_0x1cde2f(0x91)](exports,'__esModule',{'value':!![]}),exports[a58_0x1cde2f(0xae)]=void 0x0;const salesforce_1=require(a58_0x1cde2f(0xac)),retrieve_factory_1=require(a58_0x1cde2f(0x96)),constants_1=require(a58_0x1cde2f(0x97)),deploy_factory_1=require(a58_0x1cde2f(0x85)),job_detail_1=require(a58_0x1cde2f(0x86)),FIELD_ID='Id';class BaseStep{constructor({loggerDetails:_0x5d22fc,loggerJobState:_0x187304,objectName:_0x5a11f0,request:_0x58dbb4,objectRule:_0x27e1ae,objectDescribe:_0x5d084e}){const _0x24dc39=a58_0x1cde2f;this[_0x24dc39(0xa2)]=[],this[_0x24dc39(0x9d)]=_0x5d22fc,this[_0x24dc39(0xa3)]=_0x187304,this[_0x24dc39(0x8c)]=_0x5a11f0,this['request']=_0x58dbb4,this['_whereClause']=_0x27e1ae[_0x24dc39(0xa7)],this['_objectRuleType']=_0x27e1ae[_0x24dc39(0xaf)],this[_0x24dc39(0xa1)]=_0x5d084e;}async['getRecordsCount'](){const _0x12dd46=a58_0x1cde2f;try{const _0x1e8bab=new salesforce_1[(_0x12dd46(0x9f))]()['select']('COUNT()')['from'](this[_0x12dd46(0x8c)]);this[_0x12dd46(0x84)]&&_0x1e8bab['where'](this[_0x12dd46(0x84)]);const _0x54cdaa=await salesforce_1[_0x12dd46(0xa5)]['execute'](this['request'],{},_0x1e8bab['build'](),![],constants_1['SALESFORCE_API_VERSION']);return _0x54cdaa['totalSize'];}catch(_0x93f2f2){return job_detail_1[_0x12dd46(0x94)]['error'](_0x93f2f2),-0x1;}}[a58_0x1cde2f(0x9c)](){const _0x5d3ac8=a58_0x1cde2f,_0x3868b3={'request':this['request'],'fields':this['fields'],'whereClause':this['_whereClause'],'objectName':this['objectName'],'describe':this[_0x5d3ac8(0xa1)],'indexField':FIELD_ID,'indexFieldDirection':salesforce_1[_0x5d3ac8(0xab)][_0x5d3ac8(0x92)]};return retrieve_factory_1['RetrieveFactory'][_0x5d3ac8(0xa0)](_0x3868b3,this['recordsCount']);}[a58_0x1cde2f(0x88)](){const _0x1261bc=a58_0x1cde2f,_0x472c72={'request':this[_0x1261bc(0x89)],'objectName':this[_0x1261bc(0x8c)],'externalIdField':FIELD_ID,'loggerDetails':this[_0x1261bc(0x9d)],'loggerJobState':this[_0x1261bc(0xa3)]};return deploy_factory_1[_0x1261bc(0x8a)]['create'](_0x472c72,this[_0x1261bc(0x98)]);}[a58_0x1cde2f(0xa4)](_0x834018){const _0xd4817=a58_0x1cde2f;job_detail_1['systemLogger'][_0xd4817(0xa4)](_0x834018,this[_0xd4817(0x8c)]),this['loggerDetails'][_0xd4817(0xa4)](_0x834018,this['objectName']);}[a58_0x1cde2f(0x99)](_0x2b0ffa){const _0x2eaf7a=a58_0x1cde2f;job_detail_1[_0x2eaf7a(0x94)]['error'](_0x2b0ffa,this[_0x2eaf7a(0x8c)]),this[_0x2eaf7a(0x9d)][_0x2eaf7a(0x90)](_0x2b0ffa[_0x2eaf7a(0x8d)],this[_0x2eaf7a(0x8c)]);}}exports[a58_0x1cde2f(0xae)]=BaseStep;