const a59_0x3b799e=a59_0x5038;function a59_0x5038(_0x4616fa,_0xabb6de){const _0x5f39f5=a59_0x3738();return a59_0x5038=function(_0x1759ee,_0x465f0e){_0x1759ee=_0x1759ee-0x1a4;let _0x3738b1=_0x5f39f5[_0x1759ee];return _0x3738b1;},a59_0x5038(_0x4616fa,_0xabb6de);}(function(_0x16c3f7,_0x4bcb42){const _0x57f5c1=a59_0x5038,_0x32c902=_0x16c3f7();while(!![]){try{const _0x5c725c=parseInt(_0x57f5c1(0x1b0))/0x1*(parseInt(_0x57f5c1(0x1a5))/0x2)+parseInt(_0x57f5c1(0x1cc))/0x3+-parseInt(_0x57f5c1(0x1a4))/0x4*(parseInt(_0x57f5c1(0x1b8))/0x5)+parseInt(_0x57f5c1(0x1d1))/0x6*(-parseInt(_0x57f5c1(0x1c7))/0x7)+-parseInt(_0x57f5c1(0x1c3))/0x8*(parseInt(_0x57f5c1(0x1bf))/0x9)+-parseInt(_0x57f5c1(0x1c6))/0xa*(parseInt(_0x57f5c1(0x1bb))/0xb)+parseInt(_0x57f5c1(0x1d0))/0xc*(parseInt(_0x57f5c1(0x1ca))/0xd);if(_0x5c725c===_0x4bcb42)break;else _0x32c902['push'](_0x32c902['shift']());}catch(_0x15ec12){_0x32c902['push'](_0x32c902['shift']());}}}(a59_0x3738,0x70662));const a59_0x465f0e=(function(){let _0x104ea7=!![];return function(_0x114e25,_0x32a4e4){const _0x5cf1fd=_0x104ea7?function(){if(_0x32a4e4){const _0x7ef31e=_0x32a4e4['apply'](_0x114e25,arguments);return _0x32a4e4=null,_0x7ef31e;}}:function(){};return _0x104ea7=![],_0x5cf1fd;};}()),a59_0x1759ee=a59_0x465f0e(this,function(){const _0x517557=a59_0x5038;return a59_0x1759ee[_0x517557(0x1a8)]()['search']('(((.+)+)+)+$')[_0x517557(0x1a8)]()[_0x517557(0x1c0)](a59_0x1759ee)[_0x517557(0x1c4)](_0x517557(0x1c8));});a59_0x1759ee();function a59_0x3738(){const _0x14996f=['request','3877214Vcwrgs','select','DeployFactory','../../../constants','9JGBNbT','constructor','../../deploy/deploy-factory','@flosum/salesforce','4477432bxxlBi','search','type','10MIklhi','1022ccCiAh','(((.+)+)+)+$','objectName','91117VBkGur','fields','1657056JCrGWM','defineProperty','BaseStep','_whereClause','3468POWgcq','26448WHmSNH','RetrieveFactory','136FzrKll','586100gESHbn','../../retrieve/retrieve-factory','log','toString','recordsCount','create','_objectRuleType','QueryBuilder','../../job-detail','execute','loggerJobState','1MRYtph','build','objectDescribe','message','COUNT()','loggerDetails','systemLogger','error','125720KpsTUv','whereClause'];a59_0x3738=function(){return _0x14996f;};return a59_0x3738();}'use strict';Object[a59_0x3b799e(0x1cd)](exports,'__esModule',{'value':!![]}),exports['BaseStep']=void 0x0;const salesforce_1=require(a59_0x3b799e(0x1c2)),retrieve_factory_1=require(a59_0x3b799e(0x1a6)),constants_1=require(a59_0x3b799e(0x1be)),deploy_factory_1=require(a59_0x3b799e(0x1c1)),job_detail_1=require(a59_0x3b799e(0x1ad)),FIELD_ID='Id';class BaseStep{constructor({loggerDetails:_0x2527d6,loggerJobState:_0x18400a,objectName:_0x53f3a1,request:_0x9a30d2,objectRule:_0x25032a,objectDescribe:_0xda667}){const _0x405714=a59_0x3b799e;this['fields']=[],this[_0x405714(0x1b5)]=_0x2527d6,this[_0x405714(0x1af)]=_0x18400a,this['objectName']=_0x53f3a1,this[_0x405714(0x1ba)]=_0x9a30d2,this['_whereClause']=_0x25032a[_0x405714(0x1b9)],this[_0x405714(0x1ab)]=_0x25032a[_0x405714(0x1c5)],this[_0x405714(0x1b2)]=_0xda667;}async['getRecordsCount'](){const _0x238a02=a59_0x3b799e;try{const _0x533daa=new salesforce_1[(_0x238a02(0x1ac))]()[_0x238a02(0x1bc)](_0x238a02(0x1b4))['from'](this[_0x238a02(0x1c9)]);this['_whereClause']&&_0x533daa['where'](this['_whereClause']);const _0x3b91af=await salesforce_1['QueryService'][_0x238a02(0x1ae)](this[_0x238a02(0x1ba)],{},_0x533daa[_0x238a02(0x1b1)](),![],constants_1['SALESFORCE_API_VERSION']);return _0x3b91af['totalSize'];}catch(_0x2542bb){return job_detail_1['systemLogger'][_0x238a02(0x1b7)](_0x2542bb),-0x1;}}['getRetrieveStream'](){const _0x21647c=a59_0x3b799e,_0x550e28={'request':this['request'],'fields':this[_0x21647c(0x1cb)],'whereClause':this[_0x21647c(0x1cf)],'objectName':this[_0x21647c(0x1c9)],'describe':this[_0x21647c(0x1b2)]};return retrieve_factory_1[_0x21647c(0x1d2)][_0x21647c(0x1aa)](_0x550e28,this[_0x21647c(0x1a9)]);}['getDeployStream'](){const _0x36855b=a59_0x3b799e,_0x5731ae={'request':this[_0x36855b(0x1ba)],'objectName':this['objectName'],'externalIdField':FIELD_ID,'loggerDetails':this[_0x36855b(0x1b5)],'loggerJobState':this[_0x36855b(0x1af)]};return deploy_factory_1[_0x36855b(0x1bd)][_0x36855b(0x1aa)](_0x5731ae,this[_0x36855b(0x1ab)]);}['log'](_0xbca006){const _0x3324a7=a59_0x3b799e;job_detail_1['systemLogger'][_0x3324a7(0x1a7)](_0xbca006,this[_0x3324a7(0x1c9)]),this[_0x3324a7(0x1b5)][_0x3324a7(0x1a7)](_0xbca006,this['objectName']);}[a59_0x3b799e(0x1b7)](_0x1e3d3c){const _0x3d40bc=a59_0x3b799e;job_detail_1[_0x3d40bc(0x1b6)]['error'](_0x1e3d3c,this[_0x3d40bc(0x1c9)]),this[_0x3d40bc(0x1b5)]['exception'](_0x1e3d3c[_0x3d40bc(0x1b3)],this['objectName']);}}exports[a59_0x3b799e(0x1ce)]=BaseStep;