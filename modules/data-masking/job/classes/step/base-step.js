const a59_0x410722=a59_0x20a5;function a59_0x20a5(_0x385cfa,_0x1c1b57){const _0x53b421=a59_0x2541();return a59_0x20a5=function(_0x2f0856,_0x2a8cc3){_0x2f0856=_0x2f0856-0x1b3;let _0x254105=_0x53b421[_0x2f0856];return _0x254105;},a59_0x20a5(_0x385cfa,_0x1c1b57);}(function(_0x213468,_0x4dd2fa){const _0x490526=a59_0x20a5,_0xb45445=_0x213468();while(!![]){try{const _0xba3b3e=-parseInt(_0x490526(0x1ce))/0x1+-parseInt(_0x490526(0x1d0))/0x2*(-parseInt(_0x490526(0x1c6))/0x3)+parseInt(_0x490526(0x1da))/0x4+-parseInt(_0x490526(0x1d5))/0x5*(-parseInt(_0x490526(0x1e0))/0x6)+-parseInt(_0x490526(0x1cb))/0x7+parseInt(_0x490526(0x1bc))/0x8*(-parseInt(_0x490526(0x1bd))/0x9)+parseInt(_0x490526(0x1d4))/0xa*(-parseInt(_0x490526(0x1bf))/0xb);if(_0xba3b3e===_0x4dd2fa)break;else _0xb45445['push'](_0xb45445['shift']());}catch(_0x476ce8){_0xb45445['push'](_0xb45445['shift']());}}}(a59_0x2541,0x59bf6));const a59_0x2a8cc3=(function(){let _0x4bc749=!![];return function(_0x377b88,_0x398631){const _0x51f66c=_0x4bc749?function(){const _0x5acd1e=a59_0x20a5;if(_0x398631){const _0x3a8d0b=_0x398631[_0x5acd1e(0x1c0)](_0x377b88,arguments);return _0x398631=null,_0x3a8d0b;}}:function(){};return _0x4bc749=![],_0x51f66c;};}()),a59_0x2f0856=a59_0x2a8cc3(this,function(){const _0x316895=a59_0x20a5;return a59_0x2f0856['toString']()[_0x316895(0x1b9)]('(((.+)+)+)+$')['toString']()[_0x316895(0x1de)](a59_0x2f0856)[_0x316895(0x1b9)](_0x316895(0x1b5));});a59_0x2f0856();'use strict';Object[a59_0x410722(0x1c5)](exports,'__esModule',{'value':!![]}),exports[a59_0x410722(0x1b8)]=void 0x0;function a59_0x2541(){const _0x2dbd15=['651gYjrjR','objectDescribe','whereClause','request','select','720734zicbNb','recordsCount','fields','252677BOGHyw','ASC','4478xubiDb','getRecordsCount','SALESFORCE_API_VERSION','where','685730ujVUMK','5hgBiwG','../../../constants','objectName','COUNT()','totalSize','1259984SsvbZv','RetrieveFactory','error','execute','constructor','build','2667090txAUTC','SortDirection','message','systemLogger','(((.+)+)+)+$','loggerJobState','DeployFactory','BaseStep','search','../../job-detail','_objectRuleType','3079864GXGBxD','9TDgXve','loggerDetails','22MfYamv','apply','_whereClause','getDeployStream','log','getRetrieveStream','defineProperty'];a59_0x2541=function(){return _0x2dbd15;};return a59_0x2541();}const salesforce_1=require('@flosum/salesforce'),retrieve_factory_1=require('../../retrieve/retrieve-factory'),constants_1=require(a59_0x410722(0x1d6)),deploy_factory_1=require('../../deploy/deploy-factory'),job_detail_1=require(a59_0x410722(0x1ba)),FIELD_ID='Id';class BaseStep{constructor({loggerDetails:_0x165512,loggerJobState:_0x1170dd,objectName:_0x4a3a6e,request:_0x1350cc,objectRule:_0x2ce106,objectDescribe:_0x38b12e}){const _0xe6a5f6=a59_0x410722;this[_0xe6a5f6(0x1cd)]=[],this[_0xe6a5f6(0x1be)]=_0x165512,this[_0xe6a5f6(0x1b6)]=_0x1170dd,this[_0xe6a5f6(0x1d7)]=_0x4a3a6e,this[_0xe6a5f6(0x1c9)]=_0x1350cc,this[_0xe6a5f6(0x1c1)]=_0x2ce106[_0xe6a5f6(0x1c8)],this[_0xe6a5f6(0x1bb)]=_0x2ce106['type'],this[_0xe6a5f6(0x1c7)]=_0x38b12e;}async[a59_0x410722(0x1d1)](){const _0x293ffb=a59_0x410722;try{const _0xbfdce3=new salesforce_1['QueryBuilder']()[_0x293ffb(0x1ca)](_0x293ffb(0x1d8))['from'](this[_0x293ffb(0x1d7)]);this[_0x293ffb(0x1c1)]&&_0xbfdce3[_0x293ffb(0x1d3)](this[_0x293ffb(0x1c1)]);const _0x1463b7=await salesforce_1['QueryService'][_0x293ffb(0x1dd)](this[_0x293ffb(0x1c9)],{},_0xbfdce3[_0x293ffb(0x1df)](),![],constants_1[_0x293ffb(0x1d2)]);return _0x1463b7[_0x293ffb(0x1d9)];}catch(_0x46d293){return job_detail_1[_0x293ffb(0x1b4)][_0x293ffb(0x1dc)](_0x46d293),-0x1;}}[a59_0x410722(0x1c4)](){const _0x27252a=a59_0x410722,_0x20334d={'request':this['request'],'fields':this['fields'],'whereClause':this[_0x27252a(0x1c1)],'objectName':this['objectName'],'describe':this['objectDescribe'],'indexField':FIELD_ID,'indexFieldDirection':salesforce_1[_0x27252a(0x1e1)][_0x27252a(0x1cf)]};return retrieve_factory_1[_0x27252a(0x1db)]['create'](_0x20334d,this[_0x27252a(0x1cc)]);}[a59_0x410722(0x1c2)](){const _0x2af583=a59_0x410722,_0x271c2b={'request':this[_0x2af583(0x1c9)],'objectName':this[_0x2af583(0x1d7)],'externalIdField':FIELD_ID,'loggerDetails':this[_0x2af583(0x1be)],'loggerJobState':this['loggerJobState']};return deploy_factory_1[_0x2af583(0x1b7)]['create'](_0x271c2b,this[_0x2af583(0x1bb)]);}[a59_0x410722(0x1c3)](_0x51ad71){const _0x138f30=a59_0x410722;job_detail_1['systemLogger'][_0x138f30(0x1c3)](_0x51ad71,this[_0x138f30(0x1d7)]),this[_0x138f30(0x1be)][_0x138f30(0x1c3)](_0x51ad71,this['objectName']);}[a59_0x410722(0x1dc)](_0x2aec83){const _0x10e15f=a59_0x410722;job_detail_1[_0x10e15f(0x1b4)][_0x10e15f(0x1dc)](_0x2aec83,this[_0x10e15f(0x1d7)]),this[_0x10e15f(0x1be)]['exception'](_0x2aec83[_0x10e15f(0x1b3)],this[_0x10e15f(0x1d7)]);}}exports['BaseStep']=BaseStep;