const a59_0x21d45f=a59_0x2f4e;function a59_0x2f4e(_0x16c5b0,_0x1c7aa8){const _0x12e2ec=a59_0x1f7d();return a59_0x2f4e=function(_0x2bc929,_0x2eabac){_0x2bc929=_0x2bc929-0x1aa;let _0x1f7d36=_0x12e2ec[_0x2bc929];return _0x1f7d36;},a59_0x2f4e(_0x16c5b0,_0x1c7aa8);}(function(_0x4bed5f,_0x27e08c){const _0x28615d=a59_0x2f4e,_0x4f5239=_0x4bed5f();while(!![]){try{const _0x4a2f84=parseInt(_0x28615d(0x1b1))/0x1+parseInt(_0x28615d(0x1cd))/0x2*(parseInt(_0x28615d(0x1d2))/0x3)+-parseInt(_0x28615d(0x1be))/0x4+-parseInt(_0x28615d(0x1ac))/0x5*(-parseInt(_0x28615d(0x1d4))/0x6)+parseInt(_0x28615d(0x1c9))/0x7*(-parseInt(_0x28615d(0x1d0))/0x8)+parseInt(_0x28615d(0x1b6))/0x9+parseInt(_0x28615d(0x1c0))/0xa*(parseInt(_0x28615d(0x1b9))/0xb);if(_0x4a2f84===_0x27e08c)break;else _0x4f5239['push'](_0x4f5239['shift']());}catch(_0x3d6282){_0x4f5239['push'](_0x4f5239['shift']());}}}(a59_0x1f7d,0x68bf3));const a59_0x2eabac=(function(){let _0x499a4a=!![];return function(_0x5bfca2,_0x220da2){const _0x23434c=_0x499a4a?function(){const _0xf828af=a59_0x2f4e;if(_0x220da2){const _0x22d619=_0x220da2[_0xf828af(0x1b7)](_0x5bfca2,arguments);return _0x220da2=null,_0x22d619;}}:function(){};return _0x499a4a=![],_0x23434c;};}()),a59_0x2bc929=a59_0x2eabac(this,function(){const _0x1f1f6e=a59_0x2f4e;return a59_0x2bc929[_0x1f1f6e(0x1c3)]()['search'](_0x1f1f6e(0x1c6))[_0x1f1f6e(0x1c3)]()['constructor'](a59_0x2bc929)[_0x1f1f6e(0x1d3)](_0x1f1f6e(0x1c6));});a59_0x2bc929();'use strict';Object[a59_0x21d45f(0x1d7)](exports,a59_0x21d45f(0x1cb),{'value':!![]}),exports['BaseStep']=void 0x0;const salesforce_1=require('@flosum/salesforce'),retrieve_factory_1=require(a59_0x21d45f(0x1d6)),constants_1=require(a59_0x21d45f(0x1bd)),deploy_factory_1=require('../../deploy/deploy-factory'),job_detail_1=require(a59_0x21d45f(0x1c5)),FIELD_ID='Id';class BaseStep{constructor({loggerDetails:_0x2398ce,loggerJobState:_0x120543,objectName:_0x396499,request:_0x4db0ca,objectRule:_0x279852,objectDescribe:_0x400c7c}){const _0xe41922=a59_0x21d45f;this['fields']=[],this[_0xe41922(0x1c7)]=_0x2398ce,this[_0xe41922(0x1bb)]=_0x120543,this['objectName']=_0x396499,this['request']=_0x4db0ca,this[_0xe41922(0x1bf)]=_0x279852[_0xe41922(0x1c4)],this[_0xe41922(0x1ce)]=_0x279852[_0xe41922(0x1c2)],this['objectDescribe']=_0x400c7c;}async[a59_0x21d45f(0x1ba)](){const _0x244cfd=a59_0x21d45f;try{const _0x575e96=new salesforce_1['QueryBuilder']()['select'](_0x244cfd(0x1c1))[_0x244cfd(0x1af)](this[_0x244cfd(0x1b4)]);this[_0x244cfd(0x1bf)]&&_0x575e96[_0x244cfd(0x1b3)](this[_0x244cfd(0x1bf)]);const _0x22dadb=await salesforce_1[_0x244cfd(0x1aa)]['execute'](this[_0x244cfd(0x1ab)],{},_0x575e96[_0x244cfd(0x1d5)](),![],constants_1['SALESFORCE_API_VERSION']);return _0x22dadb[_0x244cfd(0x1ae)];}catch(_0xd2a7e0){return job_detail_1['systemLogger'][_0x244cfd(0x1bc)](_0xd2a7e0),-0x1;}}[a59_0x21d45f(0x1ad)](){const _0xf37d34=a59_0x21d45f,_0x82d1ad={'request':this[_0xf37d34(0x1ab)],'fields':this['fields'],'whereClause':this[_0xf37d34(0x1bf)],'objectName':this['objectName'],'describe':this[_0xf37d34(0x1b0)]};return retrieve_factory_1[_0xf37d34(0x1b2)][_0xf37d34(0x1b8)](_0x82d1ad,this['recordsCount']);}[a59_0x21d45f(0x1b5)](){const _0x9bbe17=a59_0x21d45f,_0x1b7a12={'request':this[_0x9bbe17(0x1ab)],'objectName':this[_0x9bbe17(0x1b4)],'externalIdField':FIELD_ID,'loggerDetails':this[_0x9bbe17(0x1c7)],'loggerJobState':this['loggerJobState']};return deploy_factory_1[_0x9bbe17(0x1ca)][_0x9bbe17(0x1b8)](_0x1b7a12,this[_0x9bbe17(0x1ce)]);}[a59_0x21d45f(0x1cf)](_0xb2ac4f){const _0x4d8128=a59_0x21d45f;job_detail_1['systemLogger'][_0x4d8128(0x1cf)](_0xb2ac4f,this[_0x4d8128(0x1b4)]),this[_0x4d8128(0x1c7)][_0x4d8128(0x1cf)](_0xb2ac4f,this[_0x4d8128(0x1b4)]);}['error'](_0x47320d){const _0x5f2d94=a59_0x21d45f;job_detail_1[_0x5f2d94(0x1d1)][_0x5f2d94(0x1bc)](_0x47320d,this[_0x5f2d94(0x1b4)]),this['loggerDetails']['exception'](_0x47320d[_0x5f2d94(0x1cc)],this['objectName']);}}function a59_0x1f7d(){const _0x1b70bb=['../../../constants','2713452GCmflA','_whereClause','584750gtpUpC','COUNT()','type','toString','whereClause','../../job-detail','(((.+)+)+)+$','loggerDetails','BaseStep','119jBKPgD','DeployFactory','__esModule','message','1460mXJoIN','_objectRuleType','log','345768wuQoBg','systemLogger','3399nGSpzJ','search','155238aHTGAO','build','../../retrieve/retrieve-factory','defineProperty','QueryService','request','90cQHZQC','getRetrieveStream','totalSize','from','objectDescribe','36100fTLZTA','RetrieveFactory','where','objectName','getDeployStream','3040506FjErFa','apply','create','33vbKtgE','getRecordsCount','loggerJobState','error'];a59_0x1f7d=function(){return _0x1b70bb;};return a59_0x1f7d();}exports[a59_0x21d45f(0x1c8)]=BaseStep;