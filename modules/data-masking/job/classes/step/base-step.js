const a76_0x22ffd5=a76_0x3fe1;(function(_0x476046,_0x1f389b){const _0x4e08b3=a76_0x3fe1,_0x1fe70b=_0x476046();while(!![]){try{const _0x3fd57a=parseInt(_0x4e08b3(0x88))/0x1*(parseInt(_0x4e08b3(0x81))/0x2)+-parseInt(_0x4e08b3(0x6b))/0x3*(-parseInt(_0x4e08b3(0x6f))/0x4)+-parseInt(_0x4e08b3(0x78))/0x5+-parseInt(_0x4e08b3(0x97))/0x6+parseInt(_0x4e08b3(0x8b))/0x7+-parseInt(_0x4e08b3(0x76))/0x8+parseInt(_0x4e08b3(0x7e))/0x9;if(_0x3fd57a===_0x1f389b)break;else _0x1fe70b['push'](_0x1fe70b['shift']());}catch(_0x214020){_0x1fe70b['push'](_0x1fe70b['shift']());}}}(a76_0x3334,0xe045b));const a76_0xbc49f7=(function(){let _0x4474fe=!![];return function(_0x528475,_0x659606){const _0x544954=_0x4474fe?function(){const _0x265a76=a76_0x3fe1;if(_0x659606){const _0x827c73=_0x659606[_0x265a76(0x79)](_0x528475,arguments);return _0x659606=null,_0x827c73;}}:function(){};return _0x4474fe=![],_0x544954;};}()),a76_0x5416d6=a76_0xbc49f7(this,function(){const _0xb16d77=a76_0x3fe1;return a76_0x5416d6['toString']()[_0xb16d77(0x98)]('(((.+)+)+)+$')[_0xb16d77(0x7d)]()[_0xb16d77(0x77)](a76_0x5416d6)['search']('(((.+)+)+)+$');});a76_0x5416d6();'use strict';function a76_0x3334(){const _0x5c1089=['error','../../retrieve/retrieve-factory','2039038Gzsmmj','loggerDetails','getRetrieveStream','message','objectName','build','objectDescribe','1IvCNOt','defineProperty','execute','3745294dtnCKd','type','recordsCount','QueryService','QueryBuilder','exception','systemLogger','RetrieveFactory','loggerJobState','../../job-detail','../../../constants','fields','8743428ZXKnSs','search','15xqQyQX','select','where','DeployFactory','149668QfIVpA','getRecordsCount','COUNT()','request','log','_objectRuleType','_whereClause','1442392NVSHGC','constructor','7036830dwUmZy','apply','BaseStep','create','__esModule','toString','19996884aahKzu'];a76_0x3334=function(){return _0x5c1089;};return a76_0x3334();}function a76_0x3fe1(_0x34c06b,_0x3509ce){const _0x1d88a6=a76_0x3334();return a76_0x3fe1=function(_0x5416d6,_0xbc49f7){_0x5416d6=_0x5416d6-0x6b;let _0x3334e2=_0x1d88a6[_0x5416d6];return _0x3334e2;},a76_0x3fe1(_0x34c06b,_0x3509ce);}Object[a76_0x22ffd5(0x89)](exports,a76_0x22ffd5(0x7c),{'value':!![]}),exports[a76_0x22ffd5(0x7a)]=void 0x0;const salesforce_1=require('@flosum/salesforce'),retrieve_factory_1=require(a76_0x22ffd5(0x80)),constants_1=require(a76_0x22ffd5(0x95)),deploy_factory_1=require('../../deploy/deploy-factory'),job_detail_1=require(a76_0x22ffd5(0x94)),FIELD_ID='Id';class BaseStep{constructor({loggerDetails:_0x276da9,loggerJobState:_0x3ed7cf,objectName:_0x2da325,request:_0x13c62d,objectRule:_0x5e07ac,objectDescribe:_0x49694d}){const _0x5e87b9=a76_0x22ffd5;this[_0x5e87b9(0x96)]=[],this[_0x5e87b9(0x82)]=_0x276da9,this[_0x5e87b9(0x93)]=_0x3ed7cf,this[_0x5e87b9(0x85)]=_0x2da325,this[_0x5e87b9(0x72)]=_0x13c62d,this['_whereClause']=_0x5e07ac['whereClause'],this['_objectRuleType']=_0x5e07ac[_0x5e87b9(0x8c)],this[_0x5e87b9(0x87)]=_0x49694d;}async[a76_0x22ffd5(0x70)](){const _0x866033=a76_0x22ffd5;try{const _0x531f68=new salesforce_1[(_0x866033(0x8f))]()[_0x866033(0x6c)](_0x866033(0x71))['from'](this[_0x866033(0x85)]);this[_0x866033(0x75)]&&_0x531f68[_0x866033(0x6d)](this['_whereClause']);const _0x1aec51=await salesforce_1[_0x866033(0x8e)][_0x866033(0x8a)](this['request'],{},_0x531f68[_0x866033(0x86)](),![],constants_1['SALESFORCE_API_VERSION']);return _0x1aec51['totalSize'];}catch(_0x5360ac){return job_detail_1[_0x866033(0x91)][_0x866033(0x7f)](_0x5360ac),-0x1;}}[a76_0x22ffd5(0x83)](){const _0x219afd=a76_0x22ffd5,_0x3c8295={'request':this[_0x219afd(0x72)],'fields':this['fields'],'whereClause':this[_0x219afd(0x75)],'objectName':this[_0x219afd(0x85)],'describe':this[_0x219afd(0x87)]};return retrieve_factory_1[_0x219afd(0x92)][_0x219afd(0x7b)](_0x3c8295,this[_0x219afd(0x8d)]);}['getDeployStream'](){const _0x28f542=a76_0x22ffd5,_0x501e5c={'request':this[_0x28f542(0x72)],'objectName':this[_0x28f542(0x85)],'externalIdField':FIELD_ID,'loggerDetails':this[_0x28f542(0x82)],'loggerJobState':this['loggerJobState']};return deploy_factory_1[_0x28f542(0x6e)]['create'](_0x501e5c,this[_0x28f542(0x74)]);}['log'](_0x5ed51d){const _0x473b95=a76_0x22ffd5;job_detail_1[_0x473b95(0x91)][_0x473b95(0x73)](_0x5ed51d,this[_0x473b95(0x85)]),this[_0x473b95(0x82)][_0x473b95(0x73)](_0x5ed51d,this[_0x473b95(0x85)]);}[a76_0x22ffd5(0x7f)](_0x23223e){const _0x490d36=a76_0x22ffd5;job_detail_1[_0x490d36(0x91)]['error'](_0x23223e,this[_0x490d36(0x85)]),this[_0x490d36(0x82)][_0x490d36(0x90)](_0x23223e[_0x490d36(0x84)],this[_0x490d36(0x85)]);}}exports[a76_0x22ffd5(0x7a)]=BaseStep;