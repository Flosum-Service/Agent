const a59_0x46771d=a59_0x31bb;function a59_0x443d(){const _0x56e01b=['_whereClause','exception','3210tUbwmB','1327545oGONhb','../../../constants','execute','loggerJobState','error','create','8367568QEudAd','QueryService','../../retrieve/retrieve-factory','totalSize','../../job-detail','apply','861758NEvwBq','6540iKdcRY','__esModule','select','9195nRvmlK','SALESFORCE_API_VERSION','BaseStep','RetrieveFactory','from','objectName','systemLogger','recordsCount','toString','log','1VUZBEB','whereClause','type','1614fpWbMR','objectDescribe','request','13836840irFpIq','QueryBuilder','getRecordsCount','../../deploy/deploy-factory','search','DeployFactory','8890539rERvTI','loggerDetails','build','_objectRuleType','(((.+)+)+)+$','fields'];a59_0x443d=function(){return _0x56e01b;};return a59_0x443d();}(function(_0x370681,_0x276d1a){const _0x193421=a59_0x31bb,_0xe5a665=_0x370681();while(!![]){try{const _0x52d544=parseInt(_0x193421(0x1dd))/0x1*(-parseInt(_0x193421(0x1cf))/0x2)+parseInt(_0x193421(0x1e0))/0x3*(-parseInt(_0x193421(0x1d0))/0x4)+parseInt(_0x193421(0x1d3))/0x5*(parseInt(_0x193421(0x1c2))/0x6)+-parseInt(_0x193421(0x1e9))/0x7+parseInt(_0x193421(0x1c9))/0x8+-parseInt(_0x193421(0x1c3))/0x9+parseInt(_0x193421(0x1e3))/0xa;if(_0x52d544===_0x276d1a)break;else _0xe5a665['push'](_0xe5a665['shift']());}catch(_0x51488a){_0xe5a665['push'](_0xe5a665['shift']());}}}(a59_0x443d,0xa755c));const a59_0x525bca=(function(){let _0x38fd04=!![];return function(_0x232081,_0x5ea7b4){const _0xd87183=_0x38fd04?function(){const _0x4238a0=a59_0x31bb;if(_0x5ea7b4){const _0x4039e0=_0x5ea7b4[_0x4238a0(0x1ce)](_0x232081,arguments);return _0x5ea7b4=null,_0x4039e0;}}:function(){};return _0x38fd04=![],_0xd87183;};}()),a59_0x15ce20=a59_0x525bca(this,function(){const _0x2139a2=a59_0x31bb;return a59_0x15ce20['toString']()[_0x2139a2(0x1e7)](_0x2139a2(0x1ed))[_0x2139a2(0x1db)]()['constructor'](a59_0x15ce20)['search'](_0x2139a2(0x1ed));});a59_0x15ce20();'use strict';Object['defineProperty'](exports,a59_0x46771d(0x1d1),{'value':!![]}),exports[a59_0x46771d(0x1d5)]=void 0x0;const salesforce_1=require('@flosum/salesforce'),retrieve_factory_1=require(a59_0x46771d(0x1cb)),constants_1=require(a59_0x46771d(0x1c4)),deploy_factory_1=require(a59_0x46771d(0x1e6)),job_detail_1=require(a59_0x46771d(0x1cd)),FIELD_ID='Id';class BaseStep{constructor({loggerDetails:_0x57da2c,loggerJobState:_0xfaaba2,objectName:_0x1351fa,request:_0x4482c3,objectRule:_0x57753b,objectDescribe:_0xdea9d1}){const _0x14fd89=a59_0x46771d;this[_0x14fd89(0x1ee)]=[],this['loggerDetails']=_0x57da2c,this[_0x14fd89(0x1c6)]=_0xfaaba2,this[_0x14fd89(0x1d8)]=_0x1351fa,this['request']=_0x4482c3,this['_whereClause']=_0x57753b[_0x14fd89(0x1de)],this[_0x14fd89(0x1ec)]=_0x57753b[_0x14fd89(0x1df)],this[_0x14fd89(0x1e1)]=_0xdea9d1;}async[a59_0x46771d(0x1e5)](){const _0x408821=a59_0x46771d;try{const _0x451403=new salesforce_1[(_0x408821(0x1e4))]()[_0x408821(0x1d2)]('COUNT()')[_0x408821(0x1d7)](this[_0x408821(0x1d8)]);this[_0x408821(0x1c0)]&&_0x451403['where'](this[_0x408821(0x1c0)]);const _0x38bc50=await salesforce_1[_0x408821(0x1ca)][_0x408821(0x1c5)](this[_0x408821(0x1e2)],{},_0x451403[_0x408821(0x1eb)](),![],constants_1[_0x408821(0x1d4)]);return _0x38bc50[_0x408821(0x1cc)];}catch(_0x43d87d){return job_detail_1[_0x408821(0x1d9)][_0x408821(0x1c7)](_0x43d87d),-0x1;}}['getRetrieveStream'](){const _0x57193d=a59_0x46771d,_0x10d55a={'request':this['request'],'fields':this[_0x57193d(0x1ee)],'whereClause':this[_0x57193d(0x1c0)],'objectName':this[_0x57193d(0x1d8)],'describe':this[_0x57193d(0x1e1)]};return retrieve_factory_1[_0x57193d(0x1d6)]['create'](_0x10d55a,this[_0x57193d(0x1da)]);}['getDeployStream'](){const _0x453db5=a59_0x46771d,_0x41702f={'request':this[_0x453db5(0x1e2)],'objectName':this[_0x453db5(0x1d8)],'externalIdField':FIELD_ID,'loggerDetails':this[_0x453db5(0x1ea)],'loggerJobState':this[_0x453db5(0x1c6)]};return deploy_factory_1[_0x453db5(0x1e8)][_0x453db5(0x1c8)](_0x41702f,this[_0x453db5(0x1ec)]);}['log'](_0xa7887a){const _0x244fe2=a59_0x46771d;job_detail_1['systemLogger'][_0x244fe2(0x1dc)](_0xa7887a,this[_0x244fe2(0x1d8)]),this[_0x244fe2(0x1ea)][_0x244fe2(0x1dc)](_0xa7887a,this[_0x244fe2(0x1d8)]);}[a59_0x46771d(0x1c7)](_0x205845){const _0x51f5de=a59_0x46771d;job_detail_1[_0x51f5de(0x1d9)]['error'](_0x205845,this[_0x51f5de(0x1d8)]),this[_0x51f5de(0x1ea)][_0x51f5de(0x1c1)](_0x205845['message'],this[_0x51f5de(0x1d8)]);}}function a59_0x31bb(_0x1a2249,_0x5bfcc8){const _0x3d3cf2=a59_0x443d();return a59_0x31bb=function(_0x15ce20,_0x525bca){_0x15ce20=_0x15ce20-0x1c0;let _0x443d8f=_0x3d3cf2[_0x15ce20];return _0x443d8f;},a59_0x31bb(_0x1a2249,_0x5bfcc8);}exports[a59_0x46771d(0x1d5)]=BaseStep;