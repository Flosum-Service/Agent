const a59_0x4473ea=a59_0x380a;function a59_0x380a(_0x14dd97,_0x3b9c6d){const _0x53ae90=a59_0x27a4();return a59_0x380a=function(_0x33dd2b,_0x44abfc){_0x33dd2b=_0x33dd2b-0x19b;let _0x27a4ba=_0x53ae90[_0x33dd2b];return _0x27a4ba;},a59_0x380a(_0x14dd97,_0x3b9c6d);}(function(_0x3c7413,_0x2a5d8e){const _0x471cf3=a59_0x380a,_0x45e84a=_0x3c7413();while(!![]){try{const _0x20bdd3=parseInt(_0x471cf3(0x1a6))/0x1*(-parseInt(_0x471cf3(0x1c5))/0x2)+parseInt(_0x471cf3(0x1b4))/0x3*(-parseInt(_0x471cf3(0x1a7))/0x4)+parseInt(_0x471cf3(0x19d))/0x5+parseInt(_0x471cf3(0x1be))/0x6+-parseInt(_0x471cf3(0x1a5))/0x7+-parseInt(_0x471cf3(0x19c))/0x8*(-parseInt(_0x471cf3(0x1c4))/0x9)+-parseInt(_0x471cf3(0x1a9))/0xa;if(_0x20bdd3===_0x2a5d8e)break;else _0x45e84a['push'](_0x45e84a['shift']());}catch(_0x1e2ec8){_0x45e84a['push'](_0x45e84a['shift']());}}}(a59_0x27a4,0x692e5));function a59_0x27a4(){const _0x5f4271=['fields','toString','../../deploy/deploy-factory','search','totalSize','objectName','../../job-detail','@flosum/salesforce','(((.+)+)+)+$','getRetrieveStream','804qfymUr','constructor','DeployFactory','create','from','request','apply','../../retrieve/retrieve-factory','execute','getRecordsCount','5053620hMhgCl','error','_whereClause','systemLogger','COUNT()','select','376659GqdgCP','2HdutRG','exception','build','type','loggerJobState','objectDescribe','SALESFORCE_API_VERSION','136CWfpAK','284175GqDxjg','__esModule','QueryService','log','QueryBuilder','defineProperty','loggerDetails','BaseStep','3050390GMqgCA','486964KbPDww','52OAlzLD','RetrieveFactory','2535330KOmShg'];a59_0x27a4=function(){return _0x5f4271;};return a59_0x27a4();}const a59_0x44abfc=(function(){let _0xfc644a=!![];return function(_0x509e67,_0x529ce3){const _0x11d42b=_0xfc644a?function(){const _0xda02d6=a59_0x380a;if(_0x529ce3){const _0x48b7da=_0x529ce3[_0xda02d6(0x1ba)](_0x509e67,arguments);return _0x529ce3=null,_0x48b7da;}}:function(){};return _0xfc644a=![],_0x11d42b;};}()),a59_0x33dd2b=a59_0x44abfc(this,function(){const _0x68ba0a=a59_0x380a;return a59_0x33dd2b[_0x68ba0a(0x1ab)]()[_0x68ba0a(0x1ad)]('(((.+)+)+)+$')[_0x68ba0a(0x1ab)]()[_0x68ba0a(0x1b5)](a59_0x33dd2b)[_0x68ba0a(0x1ad)](_0x68ba0a(0x1b2));});a59_0x33dd2b();'use strict';Object[a59_0x4473ea(0x1a2)](exports,a59_0x4473ea(0x19e),{'value':!![]}),exports[a59_0x4473ea(0x1a4)]=void 0x0;const salesforce_1=require(a59_0x4473ea(0x1b1)),retrieve_factory_1=require(a59_0x4473ea(0x1bb)),constants_1=require('../../../constants'),deploy_factory_1=require(a59_0x4473ea(0x1ac)),job_detail_1=require(a59_0x4473ea(0x1b0)),FIELD_ID='Id';class BaseStep{constructor({loggerDetails:_0xa25846,loggerJobState:_0x808bb7,objectName:_0x3261a2,request:_0x6b2eba,objectRule:_0x17266e,objectDescribe:_0x475ec4}){const _0x397618=a59_0x4473ea;this[_0x397618(0x1aa)]=[],this[_0x397618(0x1a3)]=_0xa25846,this[_0x397618(0x1c9)]=_0x808bb7,this[_0x397618(0x1af)]=_0x3261a2,this[_0x397618(0x1b9)]=_0x6b2eba,this[_0x397618(0x1c0)]=_0x17266e['whereClause'],this['_objectRuleType']=_0x17266e[_0x397618(0x1c8)],this[_0x397618(0x1ca)]=_0x475ec4;}async[a59_0x4473ea(0x1bd)](){const _0x451b3f=a59_0x4473ea;try{const _0x1ebc79=new salesforce_1[(_0x451b3f(0x1a1))]()[_0x451b3f(0x1c3)](_0x451b3f(0x1c2))[_0x451b3f(0x1b8)](this['objectName']);this[_0x451b3f(0x1c0)]&&_0x1ebc79['where'](this['_whereClause']);const _0x10e3c5=await salesforce_1[_0x451b3f(0x19f)][_0x451b3f(0x1bc)](this[_0x451b3f(0x1b9)],{},_0x1ebc79[_0x451b3f(0x1c7)](),![],constants_1[_0x451b3f(0x19b)]);return _0x10e3c5[_0x451b3f(0x1ae)];}catch(_0x4ea064){return job_detail_1[_0x451b3f(0x1c1)][_0x451b3f(0x1bf)](_0x4ea064),-0x1;}}[a59_0x4473ea(0x1b3)](){const _0x20582b=a59_0x4473ea,_0xa17e91={'request':this[_0x20582b(0x1b9)],'fields':this['fields'],'whereClause':this[_0x20582b(0x1c0)],'objectName':this[_0x20582b(0x1af)],'describe':this['objectDescribe']};return retrieve_factory_1[_0x20582b(0x1a8)][_0x20582b(0x1b7)](_0xa17e91,this['recordsCount']);}['getDeployStream'](){const _0x975f68=a59_0x4473ea,_0x312447={'request':this['request'],'objectName':this['objectName'],'externalIdField':FIELD_ID,'loggerDetails':this['loggerDetails'],'loggerJobState':this[_0x975f68(0x1c9)]};return deploy_factory_1[_0x975f68(0x1b6)]['create'](_0x312447,this['_objectRuleType']);}[a59_0x4473ea(0x1a0)](_0x152c40){const _0x1da46a=a59_0x4473ea;job_detail_1['systemLogger']['log'](_0x152c40,this['objectName']),this[_0x1da46a(0x1a3)][_0x1da46a(0x1a0)](_0x152c40,this[_0x1da46a(0x1af)]);}[a59_0x4473ea(0x1bf)](_0x11c46d){const _0x3d2d6d=a59_0x4473ea;job_detail_1[_0x3d2d6d(0x1c1)][_0x3d2d6d(0x1bf)](_0x11c46d,this[_0x3d2d6d(0x1af)]),this[_0x3d2d6d(0x1a3)][_0x3d2d6d(0x1c6)](_0x11c46d['message'],this[_0x3d2d6d(0x1af)]);}}exports[a59_0x4473ea(0x1a4)]=BaseStep;