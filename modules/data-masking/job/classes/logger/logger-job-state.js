const a58_0x2c772f=a58_0x1586;function a58_0x1586(_0x36e14b,_0x3c32ca){const _0x535503=a58_0x2a23();return a58_0x1586=function(_0x1d7859,_0x4a8ccd){_0x1d7859=_0x1d7859-0x1c3;let _0x2a23b4=_0x535503[_0x1d7859];return _0x2a23b4;},a58_0x1586(_0x36e14b,_0x3c32ca);}(function(_0x5f18af,_0x2bcbcf){const _0x6e0b26=a58_0x1586,_0x39b7ee=_0x5f18af();while(!![]){try{const _0x20e228=parseInt(_0x6e0b26(0x1f1))/0x1+parseInt(_0x6e0b26(0x1fe))/0x2*(parseInt(_0x6e0b26(0x1d9))/0x3)+-parseInt(_0x6e0b26(0x1f3))/0x4*(-parseInt(_0x6e0b26(0x1f8))/0x5)+parseInt(_0x6e0b26(0x1cb))/0x6*(parseInt(_0x6e0b26(0x1c3))/0x7)+parseInt(_0x6e0b26(0x1ce))/0x8*(parseInt(_0x6e0b26(0x1ef))/0x9)+-parseInt(_0x6e0b26(0x1f6))/0xa+-parseInt(_0x6e0b26(0x1f0))/0xb;if(_0x20e228===_0x2bcbcf)break;else _0x39b7ee['push'](_0x39b7ee['shift']());}catch(_0x814284){_0x39b7ee['push'](_0x39b7ee['shift']());}}}(a58_0x2a23,0x71a15));const a58_0x4a8ccd=(function(){let _0x584da5=!![];return function(_0x426413,_0x5d47a6){const _0xa7ef3e=_0x584da5?function(){if(_0x5d47a6){const _0x52cf16=_0x5d47a6['apply'](_0x426413,arguments);return _0x5d47a6=null,_0x52cf16;}}:function(){};return _0x584da5=![],_0xa7ef3e;};}()),a58_0x1d7859=a58_0x4a8ccd(this,function(){const _0x49e9df=a58_0x1586;return a58_0x1d7859[_0x49e9df(0x1c9)]()[_0x49e9df(0x1e8)]('(((.+)+)+)+$')[_0x49e9df(0x1c9)]()[_0x49e9df(0x1d7)](a58_0x1d7859)[_0x49e9df(0x1e8)]('(((.+)+)+)+$');});a58_0x1d7859();'use strict';var __importDefault=this&&this[a58_0x2c772f(0x1d6)]||function(_0x431b67){const _0x5164c8=a58_0x2c772f;return _0x431b67&&_0x431b67[_0x5164c8(0x1ea)]?_0x431b67:{'default':_0x431b67};};function a58_0x2a23(){const _0x1aed97=['623480OwhPuO','35336eEfUiD','processed','5292caOLje','error','FsUtils','6361200GHQdzi','start','1245tGkdgq','Cannot\x20find\x20object\x20\x27','readFile','../../enums/logger.enums','ObjectStatus','Logger\x20Job\x20State\x20wasn\x27t\x20init','35614keDnLG','initObjectStatistics','successful','JOB_LOG_STATE_FILENAME','join','_isLoggerInit','28IMpQhQ','failed','QUEUED','\x27\x20in\x20statistic','../../../../../constants/job','getObjectState','toString','completedDate','989436CwHKLY','defineProperty','LoggerJobState','60448OFSUzf','filePath','updateLoggerState','map','getTime','path','status','fs/promises','__importDefault','constructor','_jobState','6WbksuL','updateObjectProcess','isLoggerInit','getJobState','jobStorePath','init','utf-8','parse','../../job-detail','COMPLETED','default','includes','stringify','initJobState','write','search','setJobError','__esModule','jobState','JobStatus','setObjectStatus','FAILED','117gCMFSe'];a58_0x2a23=function(){return _0x1aed97;};return a58_0x2a23();}Object[a58_0x2c772f(0x1cc)](exports,a58_0x2c772f(0x1ea),{'value':!![]}),exports[a58_0x2c772f(0x1cd)]=void 0x0;const path_1=__importDefault(require(a58_0x2c772f(0x1d3))),logger_enums_1=require(a58_0x2c772f(0x1fb)),base_logger_1=require('./base-logger'),promises_1=require(a58_0x2c772f(0x1d5)),job_detail_1=require(a58_0x2c772f(0x1e1)),utils_1=require('@flosum/utils'),job_1=require(a58_0x2c772f(0x1c7));class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){const _0x738621=a58_0x2c772f;super(...arguments),this[_0x738621(0x203)]=![];}get[a58_0x2c772f(0x1db)](){const _0x559ff1=a58_0x2c772f;return this[_0x559ff1(0x203)];}set[a58_0x2c772f(0x1db)](_0x3b9eb7){const _0x919cb=a58_0x2c772f;this[_0x919cb(0x203)]=_0x3b9eb7;}get['jobState'](){const _0x17a17b=a58_0x2c772f;if(!this[_0x17a17b(0x1db)])throw new Error(_0x17a17b(0x1fd));return this[_0x17a17b(0x1d8)];}get[a58_0x2c772f(0x1cf)](){const _0x4f95a3=a58_0x2c772f;return path_1[_0x4f95a3(0x1e3)][_0x4f95a3(0x202)](this['_jobPath'],job_1['JOB_LOG_STATE_FILENAME']);}async[a58_0x2c772f(0x1de)](_0xdd0e56){const _0x5175b7=a58_0x2c772f;return this[_0x5175b7(0x1d8)]=await this['getJobState'](),this[_0x5175b7(0x1d8)][_0x5175b7(0x1f2)]=this[_0x5175b7(0x1ff)](_0xdd0e56),await this[_0x5175b7(0x1e7)](),await this[_0x5175b7(0x1f7)](),this[_0x5175b7(0x1db)]=!![],this;}[a58_0x2c772f(0x1ed)](_0x3d757c,_0x2920ea){const _0x124714=a58_0x2c772f;this[_0x124714(0x1c8)](_0x3d757c)[_0x124714(0x1d4)]=_0x2920ea,this['updateLoggerState']();}['setJobStatus'](_0x4c144f){const _0x4f3a9b=a58_0x2c772f;this[_0x4f3a9b(0x1eb)][_0x4f3a9b(0x1d4)]=_0x4c144f,[logger_enums_1[_0x4f3a9b(0x1ec)][_0x4f3a9b(0x1ee)],logger_enums_1[_0x4f3a9b(0x1ec)][_0x4f3a9b(0x1e2)]][_0x4f3a9b(0x1e4)](_0x4c144f)&&(this[_0x4f3a9b(0x1eb)][_0x4f3a9b(0x1ca)]=new Date()[_0x4f3a9b(0x1d2)]()),this[_0x4f3a9b(0x1d0)]();}[a58_0x2c772f(0x1e9)](_0x2b018c){const _0x425020=a58_0x2c772f;this[_0x425020(0x1eb)][_0x425020(0x1f4)]=_0x2b018c,this[_0x425020(0x1d0)]();}[a58_0x2c772f(0x1da)](_0xc20b8,_0x429277,_0x2d1d65){const _0x282cea=a58_0x2c772f,_0x499818=this[_0x282cea(0x1c8)](_0xc20b8);_0x499818[_0x282cea(0x200)]+=_0x429277,_0x499818[_0x282cea(0x1c4)]+=_0x2d1d65,this[_0x282cea(0x1eb)]['successful']+=_0x429277,this[_0x282cea(0x1eb)][_0x282cea(0x1c4)]+=_0x2d1d65,this[_0x282cea(0x1d0)]();}[a58_0x2c772f(0x1c8)](_0x3aac23){const _0xa902f4=a58_0x2c772f;var _0x3283cf;const _0x554f08=(_0x3283cf=this['jobState'][_0xa902f4(0x1f2)])===null||_0x3283cf===void 0x0?void 0x0:_0x3283cf['find'](_0x4110da=>_0x4110da['name']===_0x3aac23);if(!_0x554f08)throw new Error(_0xa902f4(0x1f9)+_0x3aac23+_0xa902f4(0x1c6));return _0x554f08;}async[a58_0x2c772f(0x1dc)](){const _0x41650e=a58_0x2c772f;if(!await utils_1[_0x41650e(0x1f5)]['isExistsPath'](this[_0x41650e(0x1cf)]))return this[_0x41650e(0x1e6)]();const _0x4d671b=await(0x0,promises_1[_0x41650e(0x1fa)])(job_detail_1[_0x41650e(0x1dd)]+'/'+job_1[_0x41650e(0x201)],{'encoding':_0x41650e(0x1df)});return JSON[_0x41650e(0x1e0)](_0x4d671b);}[a58_0x2c772f(0x1e6)](){const _0xc6bc61=a58_0x2c772f;return{'id':this['_jobId'],'status':logger_enums_1[_0xc6bc61(0x1ec)][_0xc6bc61(0x1c5)],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}[a58_0x2c772f(0x1ff)](_0xbad8a4){const _0x439f7e=a58_0x2c772f;return _0xbad8a4[_0x439f7e(0x1d1)](_0x31cf8f=>({'name':_0x31cf8f,'status':logger_enums_1[_0x439f7e(0x1fc)][_0x439f7e(0x1c5)],'failed':0x0,'successful':0x0}));}[a58_0x2c772f(0x1e7)](){const _0x2d5aec=a58_0x2c772f;return(0x0,promises_1['writeFile'])(this['filePath'],JSON[_0x2d5aec(0x1e5)](this[_0x2d5aec(0x1d8)]));}}exports['LoggerJobState']=LoggerJobState;