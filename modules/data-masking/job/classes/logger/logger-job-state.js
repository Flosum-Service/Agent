const a75_0x36c801=a75_0x5071;(function(_0x4c88d7,_0x1778bf){const _0x45c29c=a75_0x5071,_0x5cc2ef=_0x4c88d7();while(!![]){try{const _0x2b2adf=-parseInt(_0x45c29c(0x1e2))/0x1*(parseInt(_0x45c29c(0x20f))/0x2)+-parseInt(_0x45c29c(0x1da))/0x3+parseInt(_0x45c29c(0x1fb))/0x4*(-parseInt(_0x45c29c(0x1ed))/0x5)+-parseInt(_0x45c29c(0x200))/0x6+-parseInt(_0x45c29c(0x20b))/0x7*(parseInt(_0x45c29c(0x212))/0x8)+parseInt(_0x45c29c(0x20d))/0x9+parseInt(_0x45c29c(0x205))/0xa*(parseInt(_0x45c29c(0x210))/0xb);if(_0x2b2adf===_0x1778bf)break;else _0x5cc2ef['push'](_0x5cc2ef['shift']());}catch(_0x2bee52){_0x5cc2ef['push'](_0x5cc2ef['shift']());}}}(a75_0x5513,0xc8866));const a75_0x5805f2=(function(){let _0x428793=!![];return function(_0xd305f7,_0x58641d){const _0x481f19=_0x428793?function(){const _0x5e8bc6=a75_0x5071;if(_0x58641d){const _0x788e95=_0x58641d[_0x5e8bc6(0x1df)](_0xd305f7,arguments);return _0x58641d=null,_0x788e95;}}:function(){};return _0x428793=![],_0x481f19;};}()),a75_0x3c264f=a75_0x5805f2(this,function(){const _0x12d46e=a75_0x5071;return a75_0x3c264f[_0x12d46e(0x1e8)]()[_0x12d46e(0x1db)](_0x12d46e(0x1f1))['toString']()[_0x12d46e(0x1f2)](a75_0x3c264f)[_0x12d46e(0x1db)](_0x12d46e(0x1f1));});a75_0x3c264f();function a75_0x5513(){const _0x253ba6=['JOB_LOG_STATE_FILENAME','../../job-detail','Logger\x20Job\x20State\x20wasn\x27t\x20init','JobStatus','stringify','3370620DQUgDE','search','QUEUED','join','_jobId','apply','successful','initObjectStatistics','8rXEMwa','COMPLETED','writeFile','filePath','utf-8','path','toString','_isLoggerInit','getJobState','jobState','processed','35QvXIUd','__esModule','FsUtils','LoggerJobState','(((.+)+)+)+$','constructor','defineProperty','find','updateLoggerState','initJobState','@flosum/utils','_jobPath','write','_jobState','841300SWdXKL','setObjectStatus','ObjectStatus','updateObjectProcess','isLoggerInit','8824386sVzBKA','setJobStatus','\x27\x20in\x20statistic','default','./base-logger','860NPYiYU','status','includes','completedDate','getObjectState','FAILED','406LDUsbV','map','7750980sAzxgN','__importDefault','268622cFAsHw','831886welePu','failed','193472nzqAQn'];a75_0x5513=function(){return _0x253ba6;};return a75_0x5513();}'use strict';var __importDefault=this&&this[a75_0x36c801(0x20e)]||function(_0x3d0522){const _0x317449=a75_0x36c801;return _0x3d0522&&_0x3d0522[_0x317449(0x1ee)]?_0x3d0522:{'default':_0x3d0522};};function a75_0x5071(_0x2babf2,_0x5448b5){const _0x3226e3=a75_0x5513();return a75_0x5071=function(_0x3c264f,_0x5805f2){_0x3c264f=_0x3c264f-0x1d7;let _0x5513f1=_0x3226e3[_0x3c264f];return _0x5513f1;},a75_0x5071(_0x2babf2,_0x5448b5);}Object[a75_0x36c801(0x1f3)](exports,a75_0x36c801(0x1ee),{'value':!![]}),exports[a75_0x36c801(0x1f0)]=void 0x0;const path_1=__importDefault(require(a75_0x36c801(0x1e7))),logger_enums_1=require('../../enums/logger.enums'),base_logger_1=require(a75_0x36c801(0x204)),promises_1=require('fs/promises'),job_detail_1=require(a75_0x36c801(0x214)),utils_1=require(a75_0x36c801(0x1f7)),job_1=require('../../../../../constants/job');class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){super(...arguments),this['_isLoggerInit']=![];}get[a75_0x36c801(0x1ff)](){const _0x4ceef0=a75_0x36c801;return this[_0x4ceef0(0x1e9)];}set[a75_0x36c801(0x1ff)](_0x215091){const _0x15c0eb=a75_0x36c801;this[_0x15c0eb(0x1e9)]=_0x215091;}get[a75_0x36c801(0x1eb)](){const _0x594dfe=a75_0x36c801;if(!this[_0x594dfe(0x1ff)])throw new Error(_0x594dfe(0x1d7));return this[_0x594dfe(0x1fa)];}get['filePath'](){const _0x3de1ab=a75_0x36c801;return path_1[_0x3de1ab(0x203)][_0x3de1ab(0x1dd)](this[_0x3de1ab(0x1f8)],job_1[_0x3de1ab(0x213)]);}async['init'](_0x42b524){const _0x62bc00=a75_0x36c801;return this[_0x62bc00(0x1fa)]=await this[_0x62bc00(0x1ea)](),this[_0x62bc00(0x1fa)][_0x62bc00(0x1ec)]=this['initObjectStatistics'](_0x42b524),await this['write'](),await this['start'](),this[_0x62bc00(0x1ff)]=!![],this;}[a75_0x36c801(0x1fc)](_0x15727e,_0x23463d){const _0xfbaafc=a75_0x36c801;this[_0xfbaafc(0x209)](_0x15727e)[_0xfbaafc(0x206)]=_0x23463d,this[_0xfbaafc(0x1f5)]();}[a75_0x36c801(0x201)](_0x4c9b5c){const _0x85dace=a75_0x36c801;this[_0x85dace(0x1eb)][_0x85dace(0x206)]=_0x4c9b5c,[logger_enums_1[_0x85dace(0x1d8)][_0x85dace(0x20a)],logger_enums_1[_0x85dace(0x1d8)][_0x85dace(0x1e3)]][_0x85dace(0x207)](_0x4c9b5c)&&(this[_0x85dace(0x1eb)][_0x85dace(0x208)]=new Date()['getTime']()),this[_0x85dace(0x1f5)]();}['setJobError'](_0x4cfa22){const _0x1f09be=a75_0x36c801;this['jobState']['error']=_0x4cfa22,this[_0x1f09be(0x1f5)]();}[a75_0x36c801(0x1fe)](_0x15db8a,_0x5b1e6a,_0x318ab5){const _0x4514cc=a75_0x36c801,_0xc521f6=this[_0x4514cc(0x209)](_0x15db8a);_0xc521f6[_0x4514cc(0x1e0)]+=_0x5b1e6a,_0xc521f6[_0x4514cc(0x211)]+=_0x318ab5,this[_0x4514cc(0x1eb)]['successful']+=_0x5b1e6a,this[_0x4514cc(0x1eb)][_0x4514cc(0x211)]+=_0x318ab5,this[_0x4514cc(0x1f5)]();}['getObjectState'](_0x10d177){const _0xa12ee=a75_0x36c801;var _0x1ba004;const _0x2eb424=(_0x1ba004=this[_0xa12ee(0x1eb)][_0xa12ee(0x1ec)])===null||_0x1ba004===void 0x0?void 0x0:_0x1ba004[_0xa12ee(0x1f4)](_0x1d90f0=>_0x1d90f0['name']===_0x10d177);if(!_0x2eb424)throw new Error('Cannot\x20find\x20object\x20\x27'+_0x10d177+_0xa12ee(0x202));return _0x2eb424;}async[a75_0x36c801(0x1ea)](){const _0x4e1e80=a75_0x36c801;if(!await utils_1[_0x4e1e80(0x1ef)]['isExistsPath'](this[_0x4e1e80(0x1e5)]))return this[_0x4e1e80(0x1f6)]();const _0x410cce=await(0x0,promises_1['readFile'])(job_detail_1['jobStorePath']+'/'+job_1[_0x4e1e80(0x213)],{'encoding':_0x4e1e80(0x1e6)});return JSON['parse'](_0x410cce);}[a75_0x36c801(0x1f6)](){const _0x303bca=a75_0x36c801;return{'id':this[_0x303bca(0x1de)],'status':logger_enums_1[_0x303bca(0x1d8)][_0x303bca(0x1dc)],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}[a75_0x36c801(0x1e1)](_0x168f82){const _0x52f134=a75_0x36c801;return _0x168f82[_0x52f134(0x20c)](_0x21f233=>({'name':_0x21f233,'status':logger_enums_1[_0x52f134(0x1fd)][_0x52f134(0x1dc)],'failed':0x0,'successful':0x0}));}[a75_0x36c801(0x1f9)](){const _0x5bd79f=a75_0x36c801;return(0x0,promises_1[_0x5bd79f(0x1e4)])(this[_0x5bd79f(0x1e5)],JSON[_0x5bd79f(0x1d9)](this[_0x5bd79f(0x1fa)]));}}exports[a75_0x36c801(0x1f0)]=LoggerJobState;