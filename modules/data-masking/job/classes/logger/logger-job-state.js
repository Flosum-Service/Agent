const a75_0x312f16=a75_0x3b48;function a75_0x5871(){const _0x11e2e3=['ObjectStatus','1938920MMvLUn','error','init','includes','518zxUKBg','apply','join','constructor','getJobState','JobStatus','__importDefault','8586303HrpHoM','name','parse','2BWKmvW','80892qNILvc','JOB_LOG_STATE_FILENAME','getObjectState','343581CkKuUh','write','_jobState','__esModule','failed','path','../../../../../constants/job','search','status','setObjectStatus','COMPLETED','jobState','../../enums/logger.enums','Cannot\x20find\x20object\x20\x27','\x27\x20in\x20statistic','_isLoggerInit','916284HAwSSp','isExistsPath','updateObjectProcess','jobStorePath','fs/promises','filePath','setJobError','LoggerJobState','processed','find','9yoWrDT','../../job-detail','FAILED','initObjectStatistics','defineProperty','utf-8','5mLALSD','Logger\x20Job\x20State\x20wasn\x27t\x20init','writeFile','1717488fMJyoY','QUEUED','FsUtils','updateLoggerState','toString','1930984YQPtCy','initJobState','isLoggerInit','@flosum/utils','successful','BaseLogger','start'];a75_0x5871=function(){return _0x11e2e3;};return a75_0x5871();}(function(_0x44231a,_0x2b2158){const _0xeaec03=a75_0x3b48,_0x4d7810=_0x44231a();while(!![]){try{const _0x1deeb1=parseInt(_0xeaec03(0x17a))/0x1*(parseInt(_0xeaec03(0x166))/0x2)+-parseInt(_0xeaec03(0x16a))/0x3+parseInt(_0xeaec03(0x18d))/0x4*(-parseInt(_0xeaec03(0x18a))/0x5)+-parseInt(_0xeaec03(0x167))/0x6*(parseInt(_0xeaec03(0x19e))/0x7)+-parseInt(_0xeaec03(0x192))/0x8*(-parseInt(_0xeaec03(0x184))/0x9)+parseInt(_0xeaec03(0x19a))/0xa+parseInt(_0xeaec03(0x163))/0xb;if(_0x1deeb1===_0x2b2158)break;else _0x4d7810['push'](_0x4d7810['shift']());}catch(_0x27d832){_0x4d7810['push'](_0x4d7810['shift']());}}}(a75_0x5871,0x902db));const a75_0x22ccdc=(function(){let _0x473a40=!![];return function(_0x5d9481,_0x567402){const _0x55de15=_0x473a40?function(){const _0x4aedcb=a75_0x3b48;if(_0x567402){const _0x23d688=_0x567402[_0x4aedcb(0x19f)](_0x5d9481,arguments);return _0x567402=null,_0x23d688;}}:function(){};return _0x473a40=![],_0x55de15;};}()),a75_0x38cb41=a75_0x22ccdc(this,function(){const _0xd5e564=a75_0x3b48;return a75_0x38cb41[_0xd5e564(0x191)]()[_0xd5e564(0x171)]('(((.+)+)+)+$')[_0xd5e564(0x191)]()[_0xd5e564(0x1a1)](a75_0x38cb41)['search']('(((.+)+)+)+$');});a75_0x38cb41();'use strict';var __importDefault=this&&this[a75_0x312f16(0x162)]||function(_0x3d292d){return _0x3d292d&&_0x3d292d['__esModule']?_0x3d292d:{'default':_0x3d292d};};Object[a75_0x312f16(0x188)](exports,a75_0x312f16(0x16d),{'value':!![]}),exports[a75_0x312f16(0x181)]=void 0x0;const path_1=__importDefault(require(a75_0x312f16(0x16f))),logger_enums_1=require(a75_0x312f16(0x176)),base_logger_1=require('./base-logger'),promises_1=require(a75_0x312f16(0x17e)),job_detail_1=require(a75_0x312f16(0x185)),utils_1=require(a75_0x312f16(0x195)),job_1=require(a75_0x312f16(0x170));class LoggerJobState extends base_logger_1[a75_0x312f16(0x197)]{constructor(){super(...arguments),this['_isLoggerInit']=![];}get[a75_0x312f16(0x194)](){const _0x142160=a75_0x312f16;return this[_0x142160(0x179)];}set[a75_0x312f16(0x194)](_0x3fccd){const _0x3ac967=a75_0x312f16;this[_0x3ac967(0x179)]=_0x3fccd;}get[a75_0x312f16(0x175)](){const _0x1a221f=a75_0x312f16;if(!this[_0x1a221f(0x194)])throw new Error(_0x1a221f(0x18b));return this[_0x1a221f(0x16c)];}get[a75_0x312f16(0x17f)](){const _0x3920b0=a75_0x312f16;return path_1['default'][_0x3920b0(0x1a0)](this['_jobPath'],job_1[_0x3920b0(0x168)]);}async[a75_0x312f16(0x19c)](_0x6ead0a){const _0x448811=a75_0x312f16;return this[_0x448811(0x16c)]=await this[_0x448811(0x160)](),this[_0x448811(0x16c)][_0x448811(0x182)]=this[_0x448811(0x187)](_0x6ead0a),await this[_0x448811(0x16b)](),await this[_0x448811(0x198)](),this[_0x448811(0x194)]=!![],this;}[a75_0x312f16(0x173)](_0x4e06b3,_0x214334){const _0x4abadb=a75_0x312f16;this[_0x4abadb(0x169)](_0x4e06b3)[_0x4abadb(0x172)]=_0x214334,this['updateLoggerState']();}['setJobStatus'](_0x43d84a){const _0x20ecb6=a75_0x312f16;this['jobState']['status']=_0x43d84a,[logger_enums_1['JobStatus'][_0x20ecb6(0x186)],logger_enums_1[_0x20ecb6(0x161)][_0x20ecb6(0x174)]][_0x20ecb6(0x19d)](_0x43d84a)&&(this[_0x20ecb6(0x175)]['completedDate']=new Date()['getTime']()),this[_0x20ecb6(0x190)]();}[a75_0x312f16(0x180)](_0x58dd42){const _0x4383ea=a75_0x312f16;this['jobState'][_0x4383ea(0x19b)]=_0x58dd42,this['updateLoggerState']();}[a75_0x312f16(0x17c)](_0x4c2415,_0x533894,_0x2ba226){const _0x35b246=a75_0x312f16,_0x271d23=this[_0x35b246(0x169)](_0x4c2415);_0x271d23[_0x35b246(0x196)]+=_0x533894,_0x271d23[_0x35b246(0x16e)]+=_0x2ba226,this[_0x35b246(0x175)][_0x35b246(0x196)]+=_0x533894,this[_0x35b246(0x175)][_0x35b246(0x16e)]+=_0x2ba226,this[_0x35b246(0x190)]();}[a75_0x312f16(0x169)](_0x528e59){const _0x277b10=a75_0x312f16;var _0x515ead;const _0x439460=(_0x515ead=this[_0x277b10(0x175)][_0x277b10(0x182)])===null||_0x515ead===void 0x0?void 0x0:_0x515ead[_0x277b10(0x183)](_0xa4e9e6=>_0xa4e9e6[_0x277b10(0x164)]===_0x528e59);if(!_0x439460)throw new Error(_0x277b10(0x177)+_0x528e59+_0x277b10(0x178));return _0x439460;}async[a75_0x312f16(0x160)](){const _0x282325=a75_0x312f16;if(!await utils_1[_0x282325(0x18f)][_0x282325(0x17b)](this['filePath']))return this['initJobState']();const _0x374e07=await(0x0,promises_1['readFile'])(job_detail_1[_0x282325(0x17d)]+'/'+job_1[_0x282325(0x168)],{'encoding':_0x282325(0x189)});return JSON[_0x282325(0x165)](_0x374e07);}[a75_0x312f16(0x193)](){const _0xe6a736=a75_0x312f16;return{'id':this['_jobId'],'status':logger_enums_1[_0xe6a736(0x161)]['QUEUED'],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x131162){const _0x4c2548=a75_0x312f16;return _0x131162['map'](_0x20a103=>({'name':_0x20a103,'status':logger_enums_1[_0x4c2548(0x199)][_0x4c2548(0x18e)],'failed':0x0,'successful':0x0}));}[a75_0x312f16(0x16b)](){const _0x8a324b=a75_0x312f16;return(0x0,promises_1[_0x8a324b(0x18c)])(this[_0x8a324b(0x17f)],JSON['stringify'](this[_0x8a324b(0x16c)]));}}function a75_0x3b48(_0x394427,_0xae3783){const _0x23dd5e=a75_0x5871();return a75_0x3b48=function(_0x38cb41,_0x22ccdc){_0x38cb41=_0x38cb41-0x160;let _0x587172=_0x23dd5e[_0x38cb41];return _0x587172;},a75_0x3b48(_0x394427,_0xae3783);}exports[a75_0x312f16(0x181)]=LoggerJobState;