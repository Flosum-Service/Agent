const a75_0x5b5ba2=a75_0x2de6;(function(_0x927e6e,_0x26973c){const _0x29613e=a75_0x2de6,_0x572881=_0x927e6e();while(!![]){try{const _0x13b8a6=-parseInt(_0x29613e(0xea))/0x1+-parseInt(_0x29613e(0xfd))/0x2+parseInt(_0x29613e(0xe8))/0x3+parseInt(_0x29613e(0xd7))/0x4*(-parseInt(_0x29613e(0xd1))/0x5)+-parseInt(_0x29613e(0xc3))/0x6*(parseInt(_0x29613e(0xff))/0x7)+parseInt(_0x29613e(0xe1))/0x8+parseInt(_0x29613e(0xec))/0x9;if(_0x13b8a6===_0x26973c)break;else _0x572881['push'](_0x572881['shift']());}catch(_0x1d86bb){_0x572881['push'](_0x572881['shift']());}}}(a75_0x3ce8,0xa746c));const a75_0x48900e=(function(){let _0x2f0a64=!![];return function(_0x8afbf4,_0x465cd1){const _0x396da3=_0x2f0a64?function(){if(_0x465cd1){const _0xa1b0c2=_0x465cd1['apply'](_0x8afbf4,arguments);return _0x465cd1=null,_0xa1b0c2;}}:function(){};return _0x2f0a64=![],_0x396da3;};}()),a75_0xd6b845=a75_0x48900e(this,function(){const _0x16a384=a75_0x2de6;return a75_0xd6b845[_0x16a384(0xdb)]()[_0x16a384(0xd8)](_0x16a384(0xc6))[_0x16a384(0xdb)]()[_0x16a384(0xfc)](a75_0xd6b845)[_0x16a384(0xd8)](_0x16a384(0xc6));});a75_0xd6b845();function a75_0x2de6(_0x22d883,_0x5c5761){const _0x1c3645=a75_0x3ce8();return a75_0x2de6=function(_0xd6b845,_0x48900e){_0xd6b845=_0xd6b845-0xc2;let _0x3ce823=_0x1c3645[_0xd6b845];return _0x3ce823;},a75_0x2de6(_0x22d883,_0x5c5761);}'use strict';var __importDefault=this&&this[a75_0x5b5ba2(0xfb)]||function(_0x9c830){const _0x1ce7dd=a75_0x5b5ba2;return _0x9c830&&_0x9c830[_0x1ce7dd(0xf9)]?_0x9c830:{'default':_0x9c830};};function a75_0x3ce8(){const _0x1222dc=['setJobStatus','_jobPath','readFile','BaseLogger','name','setJobError','../../enums/logger.enums','jobState','__esModule','updateLoggerState','__importDefault','constructor','716752muENps','stringify','928963sMyEuT','utf-8','@flosum/utils','getJobState','init','isLoggerInit','36SFLojH','find','jobStorePath','(((.+)+)+)+$','setObjectStatus','_jobState','Logger\x20Job\x20State\x20wasn\x27t\x20init','../../../../../constants/job','successful','FsUtils','initObjectStatistics','COMPLETED','JOB_LOG_STATE_FILENAME','JobStatus','400050qyLbdp','path','default','Cannot\x20find\x20object\x20\x27','updateObjectProcess','error','8qiUwft','search','getObjectState','failed','toString','filePath','map','status','QUEUED','initJobState','8461592kFDyjB','isExistsPath','_jobId','fs/promises','_isLoggerInit','processed','\x27\x20in\x20statistic','1287807FhvWlc','LoggerJobState','678188ekDYJN','writeFile','10719306WbVZTL','FAILED','getTime','parse','start'];a75_0x3ce8=function(){return _0x1222dc;};return a75_0x3ce8();}Object['defineProperty'](exports,a75_0x5b5ba2(0xf9),{'value':!![]}),exports[a75_0x5b5ba2(0xe9)]=void 0x0;const path_1=__importDefault(require(a75_0x5b5ba2(0xd2))),logger_enums_1=require(a75_0x5b5ba2(0xf7)),base_logger_1=require('./base-logger'),promises_1=require(a75_0x5b5ba2(0xe4)),job_detail_1=require('../../job-detail'),utils_1=require(a75_0x5b5ba2(0x101)),job_1=require(a75_0x5b5ba2(0xca));class LoggerJobState extends base_logger_1[a75_0x5b5ba2(0xf4)]{constructor(){const _0x512e94=a75_0x5b5ba2;super(...arguments),this[_0x512e94(0xe5)]=![];}get['isLoggerInit'](){const _0x3c3c32=a75_0x5b5ba2;return this[_0x3c3c32(0xe5)];}set[a75_0x5b5ba2(0xc2)](_0x14eb7b){const _0x3e3ca3=a75_0x5b5ba2;this[_0x3e3ca3(0xe5)]=_0x14eb7b;}get[a75_0x5b5ba2(0xf8)](){const _0xc9ee51=a75_0x5b5ba2;if(!this[_0xc9ee51(0xc2)])throw new Error(_0xc9ee51(0xc9));return this[_0xc9ee51(0xc8)];}get[a75_0x5b5ba2(0xdc)](){const _0x1c396b=a75_0x5b5ba2;return path_1[_0x1c396b(0xd3)]['join'](this[_0x1c396b(0xf2)],job_1[_0x1c396b(0xcf)]);}async[a75_0x5b5ba2(0x103)](_0x64cfc0){const _0x42820a=a75_0x5b5ba2;return this[_0x42820a(0xc8)]=await this[_0x42820a(0x102)](),this['_jobState'][_0x42820a(0xe6)]=this[_0x42820a(0xcd)](_0x64cfc0),await this['write'](),await this[_0x42820a(0xf0)](),this[_0x42820a(0xc2)]=!![],this;}[a75_0x5b5ba2(0xc7)](_0x1fafaa,_0x5b91f7){const _0x59c16c=a75_0x5b5ba2;this['getObjectState'](_0x1fafaa)[_0x59c16c(0xde)]=_0x5b91f7,this[_0x59c16c(0xfa)]();}[a75_0x5b5ba2(0xf1)](_0x15dbe0){const _0x580320=a75_0x5b5ba2;this[_0x580320(0xf8)][_0x580320(0xde)]=_0x15dbe0,[logger_enums_1[_0x580320(0xd0)][_0x580320(0xed)],logger_enums_1['JobStatus'][_0x580320(0xce)]]['includes'](_0x15dbe0)&&(this[_0x580320(0xf8)]['completedDate']=new Date()[_0x580320(0xee)]()),this['updateLoggerState']();}[a75_0x5b5ba2(0xf6)](_0x613eaf){const _0x17cb0c=a75_0x5b5ba2;this[_0x17cb0c(0xf8)][_0x17cb0c(0xd6)]=_0x613eaf,this[_0x17cb0c(0xfa)]();}[a75_0x5b5ba2(0xd5)](_0x8b874,_0x2c3995,_0x170a06){const _0x19c558=a75_0x5b5ba2,_0xcdb359=this['getObjectState'](_0x8b874);_0xcdb359['successful']+=_0x2c3995,_0xcdb359['failed']+=_0x170a06,this[_0x19c558(0xf8)][_0x19c558(0xcb)]+=_0x2c3995,this[_0x19c558(0xf8)][_0x19c558(0xda)]+=_0x170a06,this[_0x19c558(0xfa)]();}[a75_0x5b5ba2(0xd9)](_0x493f64){const _0x516523=a75_0x5b5ba2;var _0x10f80e;const _0x330b3e=(_0x10f80e=this[_0x516523(0xf8)][_0x516523(0xe6)])===null||_0x10f80e===void 0x0?void 0x0:_0x10f80e[_0x516523(0xc4)](_0x1e5e33=>_0x1e5e33[_0x516523(0xf5)]===_0x493f64);if(!_0x330b3e)throw new Error(_0x516523(0xd4)+_0x493f64+_0x516523(0xe7));return _0x330b3e;}async['getJobState'](){const _0x122e01=a75_0x5b5ba2;if(!await utils_1[_0x122e01(0xcc)][_0x122e01(0xe2)](this['filePath']))return this[_0x122e01(0xe0)]();const _0x188dd9=await(0x0,promises_1[_0x122e01(0xf3)])(job_detail_1[_0x122e01(0xc5)]+'/'+job_1[_0x122e01(0xcf)],{'encoding':_0x122e01(0x100)});return JSON[_0x122e01(0xef)](_0x188dd9);}[a75_0x5b5ba2(0xe0)](){const _0x3db746=a75_0x5b5ba2;return{'id':this[_0x3db746(0xe3)],'status':logger_enums_1[_0x3db746(0xd0)][_0x3db746(0xdf)],'processed':[],'createdDate':new Date()[_0x3db746(0xee)](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x23264c){const _0x71ba77=a75_0x5b5ba2;return _0x23264c[_0x71ba77(0xdd)](_0x43d142=>({'name':_0x43d142,'status':logger_enums_1['ObjectStatus'][_0x71ba77(0xdf)],'failed':0x0,'successful':0x0}));}['write'](){const _0x21a737=a75_0x5b5ba2;return(0x0,promises_1[_0x21a737(0xeb)])(this['filePath'],JSON[_0x21a737(0xfe)](this['_jobState']));}}exports[a75_0x5b5ba2(0xe9)]=LoggerJobState;