const a73_0x3d1893=a73_0x35f9;(function(_0x3686ee,_0xfce8d8){const _0x5e5fce=a73_0x35f9,_0x139cd0=_0x3686ee();while(!![]){try{const _0xec0304=parseInt(_0x5e5fce(0x122))/0x1+parseInt(_0x5e5fce(0x116))/0x2*(-parseInt(_0x5e5fce(0x118))/0x3)+parseInt(_0x5e5fce(0x111))/0x4+parseInt(_0x5e5fce(0xff))/0x5*(-parseInt(_0x5e5fce(0x110))/0x6)+parseInt(_0x5e5fce(0xfd))/0x7*(-parseInt(_0x5e5fce(0x10f))/0x8)+-parseInt(_0x5e5fce(0x134))/0x9*(parseInt(_0x5e5fce(0x117))/0xa)+parseInt(_0x5e5fce(0x124))/0xb;if(_0xec0304===_0xfce8d8)break;else _0x139cd0['push'](_0x139cd0['shift']());}catch(_0x3d225f){_0x139cd0['push'](_0x139cd0['shift']());}}}(a73_0x1682,0x5a22e));const a73_0x1f63e6=(function(){let _0x7a5131=!![];return function(_0x3914a6,_0x4f234f){const _0x25d69c=_0x7a5131?function(){if(_0x4f234f){const _0x2b4d6f=_0x4f234f['apply'](_0x3914a6,arguments);return _0x4f234f=null,_0x2b4d6f;}}:function(){};return _0x7a5131=![],_0x25d69c;};}()),a73_0x26cbd1=a73_0x1f63e6(this,function(){const _0x3e95fc=a73_0x35f9;return a73_0x26cbd1[_0x3e95fc(0x114)]()[_0x3e95fc(0x129)](_0x3e95fc(0x108))[_0x3e95fc(0x114)]()[_0x3e95fc(0x10e)](a73_0x26cbd1)[_0x3e95fc(0x129)](_0x3e95fc(0x108));});function a73_0x35f9(_0x36acda,_0x1979c2){const _0x18e702=a73_0x1682();return a73_0x35f9=function(_0x26cbd1,_0x1f63e6){_0x26cbd1=_0x26cbd1-0xfb;let _0x16825e=_0x18e702[_0x26cbd1];return _0x16825e;},a73_0x35f9(_0x36acda,_0x1979c2);}a73_0x26cbd1();'use strict';function a73_0x1682(){const _0x42aada=['_jobState','toString','name','2lRBxJz','107290rAQGro','1166469QKleIX','updateLoggerState','status','fs/promises','FsUtils','COMPLETED','initObjectStatistics','JobStatus','successful','_jobId','213337WrwJPY','initJobState','8124556EUOaWQ','_isLoggerInit','start','Logger\x20Job\x20State\x20wasn\x27t\x20init','error','search','map','setJobStatus','Cannot\x20find\x20object\x20\x27','\x27\x20in\x20statistic','FAILED','_jobPath','getJobState','parse','utf-8','JOB_LOG_STATE_FILENAME','135kbxExz','path','__esModule','getObjectState','__importDefault','join','failed','482741CqlKFY','../../../../../constants/job','10OyMDhd','defineProperty','../../enums/logger.enums','getTime','jobState','isExistsPath','QUEUED','isLoggerInit','../../job-detail','(((.+)+)+)+$','stringify','updateObjectProcess','processed','filePath','completedDate','constructor','16eFiSaz','1693326pTyogT','2677564XIqJMR','setObjectStatus'];a73_0x1682=function(){return _0x42aada;};return a73_0x1682();}var __importDefault=this&&this[a73_0x3d1893(0x138)]||function(_0x2cb02d){const _0x28bf9f=a73_0x3d1893;return _0x2cb02d&&_0x2cb02d[_0x28bf9f(0x136)]?_0x2cb02d:{'default':_0x2cb02d};};Object[a73_0x3d1893(0x100)](exports,'__esModule',{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a73_0x3d1893(0x135))),logger_enums_1=require(a73_0x3d1893(0x101)),base_logger_1=require('./base-logger'),promises_1=require(a73_0x3d1893(0x11b)),job_detail_1=require(a73_0x3d1893(0x107)),utils_1=require('@flosum/utils'),job_1=require(a73_0x3d1893(0xfe));class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){const _0x472d54=a73_0x3d1893;super(...arguments),this[_0x472d54(0x125)]=![];}get[a73_0x3d1893(0x106)](){const _0x231d91=a73_0x3d1893;return this[_0x231d91(0x125)];}set['isLoggerInit'](_0x500647){this['_isLoggerInit']=_0x500647;}get[a73_0x3d1893(0x103)](){const _0x3bfc6a=a73_0x3d1893;if(!this[_0x3bfc6a(0x106)])throw new Error(_0x3bfc6a(0x127));return this[_0x3bfc6a(0x113)];}get[a73_0x3d1893(0x10c)](){const _0x208481=a73_0x3d1893;return path_1['default'][_0x208481(0xfb)](this[_0x208481(0x12f)],job_1[_0x208481(0x133)]);}async['init'](_0x352602){const _0x4a37c7=a73_0x3d1893;return this[_0x4a37c7(0x113)]=await this[_0x4a37c7(0x130)](),this[_0x4a37c7(0x113)]['processed']=this[_0x4a37c7(0x11e)](_0x352602),await this['write'](),await this[_0x4a37c7(0x126)](),this[_0x4a37c7(0x106)]=!![],this;}[a73_0x3d1893(0x112)](_0x19613b,_0x4766e8){const _0x511332=a73_0x3d1893;this[_0x511332(0x137)](_0x19613b)[_0x511332(0x11a)]=_0x4766e8,this[_0x511332(0x119)]();}[a73_0x3d1893(0x12b)](_0x2aaac9){const _0x1197ec=a73_0x3d1893;this[_0x1197ec(0x103)][_0x1197ec(0x11a)]=_0x2aaac9,[logger_enums_1[_0x1197ec(0x11f)][_0x1197ec(0x12e)],logger_enums_1[_0x1197ec(0x11f)][_0x1197ec(0x11d)]]['includes'](_0x2aaac9)&&(this[_0x1197ec(0x103)][_0x1197ec(0x10d)]=new Date()[_0x1197ec(0x102)]()),this[_0x1197ec(0x119)]();}['setJobError'](_0x476492){const _0x56c71e=a73_0x3d1893;this[_0x56c71e(0x103)][_0x56c71e(0x128)]=_0x476492,this['updateLoggerState']();}[a73_0x3d1893(0x10a)](_0xa2b0c4,_0x180e01,_0x198a84){const _0x1f095a=a73_0x3d1893,_0x1bb433=this[_0x1f095a(0x137)](_0xa2b0c4);_0x1bb433[_0x1f095a(0x120)]+=_0x180e01,_0x1bb433[_0x1f095a(0xfc)]+=_0x198a84,this[_0x1f095a(0x103)][_0x1f095a(0x120)]+=_0x180e01,this[_0x1f095a(0x103)][_0x1f095a(0xfc)]+=_0x198a84,this[_0x1f095a(0x119)]();}['getObjectState'](_0x450c75){const _0x223085=a73_0x3d1893;var _0x57aafb;const _0x36035e=(_0x57aafb=this[_0x223085(0x103)][_0x223085(0x10b)])===null||_0x57aafb===void 0x0?void 0x0:_0x57aafb['find'](_0x5a5459=>_0x5a5459[_0x223085(0x115)]===_0x450c75);if(!_0x36035e)throw new Error(_0x223085(0x12c)+_0x450c75+_0x223085(0x12d));return _0x36035e;}async['getJobState'](){const _0x37d68c=a73_0x3d1893;if(!await utils_1[_0x37d68c(0x11c)][_0x37d68c(0x104)](this[_0x37d68c(0x10c)]))return this[_0x37d68c(0x123)]();const _0x560bbd=await(0x0,promises_1['readFile'])(job_detail_1['jobStorePath']+'/'+job_1['JOB_LOG_STATE_FILENAME'],{'encoding':_0x37d68c(0x132)});return JSON[_0x37d68c(0x131)](_0x560bbd);}['initJobState'](){const _0x245af4=a73_0x3d1893;return{'id':this[_0x245af4(0x121)],'status':logger_enums_1[_0x245af4(0x11f)][_0x245af4(0x105)],'processed':[],'createdDate':new Date()[_0x245af4(0x102)](),'successful':0x0,'failed':0x0};}[a73_0x3d1893(0x11e)](_0x483eb8){const _0x183580=a73_0x3d1893;return _0x483eb8[_0x183580(0x12a)](_0x21e8d8=>({'name':_0x21e8d8,'status':logger_enums_1['ObjectStatus']['QUEUED'],'failed':0x0,'successful':0x0}));}['write'](){const _0xd51563=a73_0x3d1893;return(0x0,promises_1['writeFile'])(this[_0xd51563(0x10c)],JSON[_0xd51563(0x109)](this[_0xd51563(0x113)]));}}exports['LoggerJobState']=LoggerJobState;