const a75_0x1b8f93=a75_0xbdd3;(function(_0x565ffa,_0x226a85){const _0x377405=a75_0xbdd3,_0xf80855=_0x565ffa();while(!![]){try{const _0x3417f1=-parseInt(_0x377405(0x1da))/0x1+parseInt(_0x377405(0x1f0))/0x2+parseInt(_0x377405(0x1ce))/0x3+parseInt(_0x377405(0x1f5))/0x4+-parseInt(_0x377405(0x1f4))/0x5*(-parseInt(_0x377405(0x1de))/0x6)+-parseInt(_0x377405(0x1cf))/0x7+parseInt(_0x377405(0x1f9))/0x8*(-parseInt(_0x377405(0x1d5))/0x9);if(_0x3417f1===_0x226a85)break;else _0xf80855['push'](_0xf80855['shift']());}catch(_0x3c421b){_0xf80855['push'](_0xf80855['shift']());}}}(a75_0x26ad,0xd4abf));const a75_0x269013=(function(){let _0x36e62d=!![];return function(_0x5f472d,_0x43accf){const _0x35be41=_0x36e62d?function(){const _0x45ef42=a75_0xbdd3;if(_0x43accf){const _0x1bada4=_0x43accf[_0x45ef42(0x1d9)](_0x5f472d,arguments);return _0x43accf=null,_0x1bada4;}}:function(){};return _0x36e62d=![],_0x35be41;};}()),a75_0x5b0514=a75_0x269013(this,function(){const _0x172c24=a75_0xbdd3;return a75_0x5b0514[_0x172c24(0x206)]()['search'](_0x172c24(0x203))[_0x172c24(0x206)]()[_0x172c24(0x204)](a75_0x5b0514)[_0x172c24(0x1ff)](_0x172c24(0x203));});a75_0x5b0514();function a75_0x26ad(){const _0x4069f0=['_jobState','__esModule','updateLoggerState','successful','fs/promises','processed','name','jobStorePath','readFile','_jobId','init','1932592BVAIXr','getObjectState','_jobPath','filePath','5dLbQFR','6426216oaHTNe','_isLoggerInit','path','FAILED','20274376JUYkuu','getTime','setJobError','@flosum/utils','defineProperty','\x27\x20in\x20statistic','search','./base-logger','write','utf-8','(((.+)+)+)+$','constructor','COMPLETED','toString','parse','setObjectStatus','BaseLogger','LoggerJobState','3790572VtRDEn','6721743DJHzAj','start','initObjectStatistics','__importDefault','getJobState','join','9JRtYNW','failed','default','Logger\x20Job\x20State\x20wasn\x27t\x20init','apply','993683oLbxsE','status','setJobStatus','jobState','9137748deNUdN','Cannot\x20find\x20object\x20\x27','QUEUED','JOB_LOG_STATE_FILENAME','JobStatus','isLoggerInit','find'];a75_0x26ad=function(){return _0x4069f0;};return a75_0x26ad();}'use strict';var __importDefault=this&&this[a75_0x1b8f93(0x1d2)]||function(_0x27e4b4){const _0xa254a6=a75_0x1b8f93;return _0x27e4b4&&_0x27e4b4[_0xa254a6(0x1e6)]?_0x27e4b4:{'default':_0x27e4b4};};Object[a75_0x1b8f93(0x1fd)](exports,'__esModule',{'value':!![]}),exports[a75_0x1b8f93(0x20a)]=void 0x0;function a75_0xbdd3(_0x11182c,_0x122729){const _0x4476bc=a75_0x26ad();return a75_0xbdd3=function(_0x5b0514,_0x269013){_0x5b0514=_0x5b0514-0x1ce;let _0x26adec=_0x4476bc[_0x5b0514];return _0x26adec;},a75_0xbdd3(_0x11182c,_0x122729);}const path_1=__importDefault(require(a75_0x1b8f93(0x1f7))),logger_enums_1=require('../../enums/logger.enums'),base_logger_1=require(a75_0x1b8f93(0x200)),promises_1=require(a75_0x1b8f93(0x1e9)),job_detail_1=require('../../job-detail'),utils_1=require(a75_0x1b8f93(0x1fc)),job_1=require('../../../../../constants/job');class LoggerJobState extends base_logger_1[a75_0x1b8f93(0x209)]{constructor(){const _0x43eb88=a75_0x1b8f93;super(...arguments),this[_0x43eb88(0x1f6)]=![];}get[a75_0x1b8f93(0x1e3)](){const _0x5791ce=a75_0x1b8f93;return this[_0x5791ce(0x1f6)];}set['isLoggerInit'](_0x413225){this['_isLoggerInit']=_0x413225;}get[a75_0x1b8f93(0x1dd)](){const _0xdfbd46=a75_0x1b8f93;if(!this[_0xdfbd46(0x1e3)])throw new Error(_0xdfbd46(0x1d8));return this[_0xdfbd46(0x1e5)];}get[a75_0x1b8f93(0x1f3)](){const _0x1d1b4d=a75_0x1b8f93;return path_1[_0x1d1b4d(0x1d7)][_0x1d1b4d(0x1d4)](this[_0x1d1b4d(0x1f2)],job_1[_0x1d1b4d(0x1e1)]);}async[a75_0x1b8f93(0x1ef)](_0x17664f){const _0x11770b=a75_0x1b8f93;return this[_0x11770b(0x1e5)]=await this[_0x11770b(0x1d3)](),this[_0x11770b(0x1e5)][_0x11770b(0x1ea)]=this[_0x11770b(0x1d1)](_0x17664f),await this[_0x11770b(0x201)](),await this[_0x11770b(0x1d0)](),this[_0x11770b(0x1e3)]=!![],this;}[a75_0x1b8f93(0x208)](_0x13efc3,_0x1c9a96){const _0x5afc0e=a75_0x1b8f93;this[_0x5afc0e(0x1f1)](_0x13efc3)[_0x5afc0e(0x1db)]=_0x1c9a96,this[_0x5afc0e(0x1e7)]();}[a75_0x1b8f93(0x1dc)](_0xe33358){const _0x2087cc=a75_0x1b8f93;this[_0x2087cc(0x1dd)]['status']=_0xe33358,[logger_enums_1[_0x2087cc(0x1e2)][_0x2087cc(0x1f8)],logger_enums_1[_0x2087cc(0x1e2)][_0x2087cc(0x205)]]['includes'](_0xe33358)&&(this[_0x2087cc(0x1dd)]['completedDate']=new Date()[_0x2087cc(0x1fa)]()),this[_0x2087cc(0x1e7)]();}[a75_0x1b8f93(0x1fb)](_0x38db4b){const _0xed5fd1=a75_0x1b8f93;this['jobState']['error']=_0x38db4b,this[_0xed5fd1(0x1e7)]();}['updateObjectProcess'](_0x40e4a1,_0x483ec5,_0x16c873){const _0x25b157=a75_0x1b8f93,_0x14a53b=this[_0x25b157(0x1f1)](_0x40e4a1);_0x14a53b[_0x25b157(0x1e8)]+=_0x483ec5,_0x14a53b[_0x25b157(0x1d6)]+=_0x16c873,this[_0x25b157(0x1dd)]['successful']+=_0x483ec5,this[_0x25b157(0x1dd)][_0x25b157(0x1d6)]+=_0x16c873,this[_0x25b157(0x1e7)]();}['getObjectState'](_0x239cc8){const _0x3afe38=a75_0x1b8f93;var _0x20fd30;const _0xe5fa15=(_0x20fd30=this[_0x3afe38(0x1dd)][_0x3afe38(0x1ea)])===null||_0x20fd30===void 0x0?void 0x0:_0x20fd30[_0x3afe38(0x1e4)](_0x199590=>_0x199590[_0x3afe38(0x1eb)]===_0x239cc8);if(!_0xe5fa15)throw new Error(_0x3afe38(0x1df)+_0x239cc8+_0x3afe38(0x1fe));return _0xe5fa15;}async[a75_0x1b8f93(0x1d3)](){const _0x2f6c1c=a75_0x1b8f93;if(!await utils_1['FsUtils']['isExistsPath'](this[_0x2f6c1c(0x1f3)]))return this['initJobState']();const _0x12747c=await(0x0,promises_1[_0x2f6c1c(0x1ed)])(job_detail_1[_0x2f6c1c(0x1ec)]+'/'+job_1[_0x2f6c1c(0x1e1)],{'encoding':_0x2f6c1c(0x202)});return JSON[_0x2f6c1c(0x207)](_0x12747c);}['initJobState'](){const _0xea7947=a75_0x1b8f93;return{'id':this[_0xea7947(0x1ee)],'status':logger_enums_1[_0xea7947(0x1e2)]['QUEUED'],'processed':[],'createdDate':new Date()[_0xea7947(0x1fa)](),'successful':0x0,'failed':0x0};}[a75_0x1b8f93(0x1d1)](_0x167ca1){const _0x338870=a75_0x1b8f93;return _0x167ca1['map'](_0x39e221=>({'name':_0x39e221,'status':logger_enums_1['ObjectStatus'][_0x338870(0x1e0)],'failed':0x0,'successful':0x0}));}[a75_0x1b8f93(0x201)](){const _0x28b1d7=a75_0x1b8f93;return(0x0,promises_1['writeFile'])(this['filePath'],JSON['stringify'](this[_0x28b1d7(0x1e5)]));}}exports[a75_0x1b8f93(0x20a)]=LoggerJobState;