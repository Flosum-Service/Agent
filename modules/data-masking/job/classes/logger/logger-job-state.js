const a58_0x4455c3=a58_0x5652;(function(_0x1f15a2,_0x105df1){const _0x430f90=a58_0x5652,_0x5bd7d0=_0x1f15a2();while(!![]){try{const _0x268bb6=-parseInt(_0x430f90(0x112))/0x1+parseInt(_0x430f90(0xe8))/0x2*(-parseInt(_0x430f90(0x11e))/0x3)+parseInt(_0x430f90(0xe4))/0x4+-parseInt(_0x430f90(0xe6))/0x5*(parseInt(_0x430f90(0xf6))/0x6)+parseInt(_0x430f90(0x116))/0x7+parseInt(_0x430f90(0xf2))/0x8+parseInt(_0x430f90(0xfc))/0x9;if(_0x268bb6===_0x105df1)break;else _0x5bd7d0['push'](_0x5bd7d0['shift']());}catch(_0x3c6751){_0x5bd7d0['push'](_0x5bd7d0['shift']());}}}(a58_0x3fb2,0xafc31));function a58_0x5652(_0x3daa97,_0x1fddc6){const _0x185dc2=a58_0x3fb2();return a58_0x5652=function(_0x376df9,_0x284e12){_0x376df9=_0x376df9-0xe2;let _0x3fb2b1=_0x185dc2[_0x376df9];return _0x3fb2b1;},a58_0x5652(_0x3daa97,_0x1fddc6);}function a58_0x3fb2(){const _0x52925d=['FAILED','isLoggerInit','_jobId','filePath','../../job-detail','getObjectState','jobStorePath','273888aAzVqQ','JobStatus','includes','initObjectStatistics','204PAcpxH','failed','@flosum/utils','defineProperty','initJobState','getJobState','21341583aYnxJg','getTime','\x27\x20in\x20statistic','completedDate','status','find','LoggerJobState','default','QUEUED','_jobPath','JOB_LOG_STATE_FILENAME','init','jobState','_isLoggerInit','Logger\x20Job\x20State\x20wasn\x27t\x20init','setJobStatus','isExistsPath','FsUtils','updateLoggerState','toString','../../../../../constants/job','utf-8','946829xHbmzd','map','error','parse','3796653uifteF','Cannot\x20find\x20object\x20\x27','path','__esModule','updateObjectProcess','name','COMPLETED','_jobState','123qXLpAr','search','constructor','468356cXoGHf','writeFile','32260oUgmul','apply','57506UBfZmx','join','processed'];a58_0x3fb2=function(){return _0x52925d;};return a58_0x3fb2();}const a58_0x284e12=(function(){let _0x53e2f3=!![];return function(_0x266745,_0x5c8022){const _0x3b91f8=_0x53e2f3?function(){const _0x4f30b1=a58_0x5652;if(_0x5c8022){const _0x1769f0=_0x5c8022[_0x4f30b1(0xe7)](_0x266745,arguments);return _0x5c8022=null,_0x1769f0;}}:function(){};return _0x53e2f3=![],_0x3b91f8;};}()),a58_0x376df9=a58_0x284e12(this,function(){const _0x29d48f=a58_0x5652;return a58_0x376df9['toString']()[_0x29d48f(0xe2)]('(((.+)+)+)+$')[_0x29d48f(0x10f)]()[_0x29d48f(0xe3)](a58_0x376df9)[_0x29d48f(0xe2)]('(((.+)+)+)+$');});a58_0x376df9();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3d9940){const _0x19fa30=a58_0x5652;return _0x3d9940&&_0x3d9940[_0x19fa30(0x119)]?_0x3d9940:{'default':_0x3d9940};};Object[a58_0x4455c3(0xf9)](exports,'__esModule',{'value':!![]}),exports[a58_0x4455c3(0x102)]=void 0x0;const path_1=__importDefault(require(a58_0x4455c3(0x118))),logger_enums_1=require('../../enums/logger.enums'),base_logger_1=require('./base-logger'),promises_1=require('fs/promises'),job_detail_1=require(a58_0x4455c3(0xef)),utils_1=require(a58_0x4455c3(0xf8)),job_1=require(a58_0x4455c3(0x110));class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){super(...arguments),this['_isLoggerInit']=![];}get['isLoggerInit'](){const _0x25545b=a58_0x4455c3;return this[_0x25545b(0x109)];}set[a58_0x4455c3(0xec)](_0x48add9){const _0x5f0bee=a58_0x4455c3;this[_0x5f0bee(0x109)]=_0x48add9;}get[a58_0x4455c3(0x108)](){const _0x9308e0=a58_0x4455c3;if(!this[_0x9308e0(0xec)])throw new Error(_0x9308e0(0x10a));return this[_0x9308e0(0x11d)];}get[a58_0x4455c3(0xee)](){const _0x32adc6=a58_0x4455c3;return path_1[_0x32adc6(0x103)][_0x32adc6(0xe9)](this[_0x32adc6(0x105)],job_1[_0x32adc6(0x106)]);}async[a58_0x4455c3(0x107)](_0x74b997){const _0x1ebaa5=a58_0x4455c3;return this['_jobState']=await this[_0x1ebaa5(0xfb)](),this[_0x1ebaa5(0x11d)][_0x1ebaa5(0xea)]=this['initObjectStatistics'](_0x74b997),await this['write'](),await this['start'](),this[_0x1ebaa5(0xec)]=!![],this;}['setObjectStatus'](_0x251e73,_0x34b300){const _0x3adb19=a58_0x4455c3;this[_0x3adb19(0xf0)](_0x251e73)['status']=_0x34b300,this[_0x3adb19(0x10e)]();}[a58_0x4455c3(0x10b)](_0x372ea1){const _0x2fd7d0=a58_0x4455c3;this[_0x2fd7d0(0x108)][_0x2fd7d0(0x100)]=_0x372ea1,[logger_enums_1[_0x2fd7d0(0xf3)][_0x2fd7d0(0xeb)],logger_enums_1['JobStatus'][_0x2fd7d0(0x11c)]][_0x2fd7d0(0xf4)](_0x372ea1)&&(this[_0x2fd7d0(0x108)][_0x2fd7d0(0xff)]=new Date()['getTime']()),this[_0x2fd7d0(0x10e)]();}['setJobError'](_0x1690ae){const _0x2ea475=a58_0x4455c3;this[_0x2ea475(0x108)][_0x2ea475(0x114)]=_0x1690ae,this[_0x2ea475(0x10e)]();}[a58_0x4455c3(0x11a)](_0x2104cf,_0x4841e9,_0x4679c5){const _0x56d125=a58_0x4455c3,_0x113eaa=this[_0x56d125(0xf0)](_0x2104cf);_0x113eaa['successful']+=_0x4841e9,_0x113eaa[_0x56d125(0xf7)]+=_0x4679c5,this[_0x56d125(0x108)]['successful']+=_0x4841e9,this[_0x56d125(0x108)][_0x56d125(0xf7)]+=_0x4679c5,this[_0x56d125(0x10e)]();}['getObjectState'](_0x27df6d){const _0x592ca7=a58_0x4455c3;var _0x389ba0;const _0x3f3739=(_0x389ba0=this[_0x592ca7(0x108)][_0x592ca7(0xea)])===null||_0x389ba0===void 0x0?void 0x0:_0x389ba0[_0x592ca7(0x101)](_0x54b852=>_0x54b852[_0x592ca7(0x11b)]===_0x27df6d);if(!_0x3f3739)throw new Error(_0x592ca7(0x117)+_0x27df6d+_0x592ca7(0xfe));return _0x3f3739;}async[a58_0x4455c3(0xfb)](){const _0x53cd20=a58_0x4455c3;if(!await utils_1[_0x53cd20(0x10d)][_0x53cd20(0x10c)](this[_0x53cd20(0xee)]))return this[_0x53cd20(0xfa)]();const _0x190710=await(0x0,promises_1['readFile'])(job_detail_1[_0x53cd20(0xf1)]+'/'+job_1[_0x53cd20(0x106)],{'encoding':_0x53cd20(0x111)});return JSON[_0x53cd20(0x115)](_0x190710);}[a58_0x4455c3(0xfa)](){const _0x4e6689=a58_0x4455c3;return{'id':this[_0x4e6689(0xed)],'status':logger_enums_1[_0x4e6689(0xf3)][_0x4e6689(0x104)],'processed':[],'createdDate':new Date()[_0x4e6689(0xfd)](),'successful':0x0,'failed':0x0};}[a58_0x4455c3(0xf5)](_0x49d0b0){const _0x1faeab=a58_0x4455c3;return _0x49d0b0[_0x1faeab(0x113)](_0x3b88ba=>({'name':_0x3b88ba,'status':logger_enums_1['ObjectStatus'][_0x1faeab(0x104)],'failed':0x0,'successful':0x0}));}['write'](){const _0x5e1c8d=a58_0x4455c3;return(0x0,promises_1[_0x5e1c8d(0xe5)])(this[_0x5e1c8d(0xee)],JSON['stringify'](this['_jobState']));}}exports[a58_0x4455c3(0x102)]=LoggerJobState;