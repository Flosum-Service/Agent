const a75_0x41018b=a75_0x1c81;(function(_0x4fb2f5,_0x5b2336){const _0x1e9901=a75_0x1c81,_0x510a72=_0x4fb2f5();while(!![]){try{const _0x25bf81=parseInt(_0x1e9901(0x10c))/0x1*(-parseInt(_0x1e9901(0xfc))/0x2)+-parseInt(_0x1e9901(0xee))/0x3*(parseInt(_0x1e9901(0xf1))/0x4)+parseInt(_0x1e9901(0x11b))/0x5*(-parseInt(_0x1e9901(0x112))/0x6)+-parseInt(_0x1e9901(0x123))/0x7*(parseInt(_0x1e9901(0x101))/0x8)+parseInt(_0x1e9901(0x10d))/0x9*(parseInt(_0x1e9901(0xfd))/0xa)+-parseInt(_0x1e9901(0xe8))/0xb+parseInt(_0x1e9901(0xf2))/0xc;if(_0x25bf81===_0x5b2336)break;else _0x510a72['push'](_0x510a72['shift']());}catch(_0xdae49f){_0x510a72['push'](_0x510a72['shift']());}}}(a75_0x3375,0xa401a));const a75_0x5d4da1=(function(){let _0x118174=!![];return function(_0x4120cc,_0x1ec1b1){const _0x1679d2=_0x118174?function(){const _0x401872=a75_0x1c81;if(_0x1ec1b1){const _0x4ec377=_0x1ec1b1[_0x401872(0x122)](_0x4120cc,arguments);return _0x1ec1b1=null,_0x4ec377;}}:function(){};return _0x118174=![],_0x1679d2;};}()),a75_0x599ab4=a75_0x5d4da1(this,function(){const _0x120a6c=a75_0x1c81;return a75_0x599ab4['toString']()[_0x120a6c(0xe7)](_0x120a6c(0x125))['toString']()[_0x120a6c(0xe9)](a75_0x599ab4)['search'](_0x120a6c(0x125));});a75_0x599ab4();'use strict';function a75_0x3375(){const _0x2bb719=['Logger\x20Job\x20State\x20wasn\x27t\x20init','__importDefault','setObjectStatus','64fGmjmt','522AEvoTW','map','start','getObjectState','stringify','318XAeWaK','../../job-detail','readFile','initJobState','@flosum/utils','jobState','error','__esModule','writeFile','48080JOwFJK','_jobState','getTime','failed','name','JOB_LOG_STATE_FILENAME','parse','apply','7aMApTI','init','(((.+)+)+)+$','search','9113170jckESH','constructor','QUEUED','COMPLETED','default','_jobPath','3TRatzF','_jobId','completedDate','2677508ywGekJ','24349488fWLpxr','write','status','setJobError','isLoggerInit','../../enums/logger.enums','JobStatus','find','successful','filePath','12868BGDefI','215120ZfLyOl','LoggerJobState','FAILED','initObjectStatistics','1486232cHaNpT','jobStorePath','_isLoggerInit','processed','\x27\x20in\x20statistic','fs/promises','Cannot\x20find\x20object\x20\x27','updateLoggerState'];a75_0x3375=function(){return _0x2bb719;};return a75_0x3375();}var __importDefault=this&&this[a75_0x41018b(0x10a)]||function(_0x4df256){const _0x930b5d=a75_0x41018b;return _0x4df256&&_0x4df256[_0x930b5d(0x119)]?_0x4df256:{'default':_0x4df256};};function a75_0x1c81(_0x1de415,_0x2f9738){const _0x174193=a75_0x3375();return a75_0x1c81=function(_0x599ab4,_0x5d4da1){_0x599ab4=_0x599ab4-0xe7;let _0x3375cb=_0x174193[_0x599ab4];return _0x3375cb;},a75_0x1c81(_0x1de415,_0x2f9738);}Object['defineProperty'](exports,a75_0x41018b(0x119),{'value':!![]}),exports[a75_0x41018b(0xfe)]=void 0x0;const path_1=__importDefault(require('path')),logger_enums_1=require(a75_0x41018b(0xf7)),base_logger_1=require('./base-logger'),promises_1=require(a75_0x41018b(0x106)),job_detail_1=require(a75_0x41018b(0x113)),utils_1=require(a75_0x41018b(0x116)),job_1=require('../../../../../constants/job');class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){const _0x343411=a75_0x41018b;super(...arguments),this[_0x343411(0x103)]=![];}get[a75_0x41018b(0xf6)](){const _0x6474ce=a75_0x41018b;return this[_0x6474ce(0x103)];}set[a75_0x41018b(0xf6)](_0xf6f0c3){const _0x5db767=a75_0x41018b;this[_0x5db767(0x103)]=_0xf6f0c3;}get['jobState'](){const _0x5d7a03=a75_0x41018b;if(!this[_0x5d7a03(0xf6)])throw new Error(_0x5d7a03(0x109));return this[_0x5d7a03(0x11c)];}get[a75_0x41018b(0xfb)](){const _0x32a08e=a75_0x41018b;return path_1[_0x32a08e(0xec)]['join'](this[_0x32a08e(0xed)],job_1[_0x32a08e(0x120)]);}async[a75_0x41018b(0x124)](_0x528b95){const _0x14779c=a75_0x41018b;return this['_jobState']=await this['getJobState'](),this[_0x14779c(0x11c)][_0x14779c(0x104)]=this[_0x14779c(0x100)](_0x528b95),await this[_0x14779c(0xf3)](),await this[_0x14779c(0x10f)](),this[_0x14779c(0xf6)]=!![],this;}[a75_0x41018b(0x10b)](_0x475831,_0x4d8f31){const _0x463eff=a75_0x41018b;this['getObjectState'](_0x475831)[_0x463eff(0xf4)]=_0x4d8f31,this[_0x463eff(0x108)]();}['setJobStatus'](_0x45a4d4){const _0xe84fd=a75_0x41018b;this['jobState'][_0xe84fd(0xf4)]=_0x45a4d4,[logger_enums_1[_0xe84fd(0xf8)][_0xe84fd(0xff)],logger_enums_1[_0xe84fd(0xf8)][_0xe84fd(0xeb)]]['includes'](_0x45a4d4)&&(this['jobState'][_0xe84fd(0xf0)]=new Date()['getTime']()),this[_0xe84fd(0x108)]();}[a75_0x41018b(0xf5)](_0x174895){const _0x8eb874=a75_0x41018b;this[_0x8eb874(0x117)][_0x8eb874(0x118)]=_0x174895,this[_0x8eb874(0x108)]();}['updateObjectProcess'](_0x483d0c,_0x4040da,_0x4c9a33){const _0x2c6f10=a75_0x41018b,_0x50527e=this['getObjectState'](_0x483d0c);_0x50527e[_0x2c6f10(0xfa)]+=_0x4040da,_0x50527e[_0x2c6f10(0x11e)]+=_0x4c9a33,this[_0x2c6f10(0x117)][_0x2c6f10(0xfa)]+=_0x4040da,this[_0x2c6f10(0x117)][_0x2c6f10(0x11e)]+=_0x4c9a33,this[_0x2c6f10(0x108)]();}[a75_0x41018b(0x110)](_0x42b771){const _0x3a754e=a75_0x41018b;var _0x9610ec;const _0x5b8425=(_0x9610ec=this[_0x3a754e(0x117)][_0x3a754e(0x104)])===null||_0x9610ec===void 0x0?void 0x0:_0x9610ec[_0x3a754e(0xf9)](_0x41adef=>_0x41adef[_0x3a754e(0x11f)]===_0x42b771);if(!_0x5b8425)throw new Error(_0x3a754e(0x107)+_0x42b771+_0x3a754e(0x105));return _0x5b8425;}async['getJobState'](){const _0x4b6294=a75_0x41018b;if(!await utils_1['FsUtils']['isExistsPath'](this['filePath']))return this[_0x4b6294(0x115)]();const _0x25ec66=await(0x0,promises_1[_0x4b6294(0x114)])(job_detail_1[_0x4b6294(0x102)]+'/'+job_1[_0x4b6294(0x120)],{'encoding':'utf-8'});return JSON[_0x4b6294(0x121)](_0x25ec66);}[a75_0x41018b(0x115)](){const _0x96ff4c=a75_0x41018b;return{'id':this[_0x96ff4c(0xef)],'status':logger_enums_1[_0x96ff4c(0xf8)][_0x96ff4c(0xea)],'processed':[],'createdDate':new Date()[_0x96ff4c(0x11d)](),'successful':0x0,'failed':0x0};}[a75_0x41018b(0x100)](_0x3d9628){const _0x55cd9b=a75_0x41018b;return _0x3d9628[_0x55cd9b(0x10e)](_0x2c72f8=>({'name':_0x2c72f8,'status':logger_enums_1['ObjectStatus'][_0x55cd9b(0xea)],'failed':0x0,'successful':0x0}));}[a75_0x41018b(0xf3)](){const _0x57cc96=a75_0x41018b;return(0x0,promises_1[_0x57cc96(0x11a)])(this[_0x57cc96(0xfb)],JSON[_0x57cc96(0x111)](this[_0x57cc96(0x11c)]));}}exports[a75_0x41018b(0xfe)]=LoggerJobState;