function a76_0xdd1b(){const _0x1f9b0d=['FsUtils','20866BkwHmC','completedDate','stringify','\x27\x20in\x20statistic','1949330nBVYBB','find','7501941pRveGb','6BvaKMH','search','_isLoggerInit','getJobState','_jobPath','readFile','LoggerJobState','initJobState','676248xodhmi','isLoggerInit','writeFile','jobStorePath','./base-logger','JOB_LOG_STATE_FILENAME','__importDefault','11conLhu','default','updateLoggerState','processed','initObjectStatistics','getObjectState','(((.+)+)+)+$','path','filePath','start','BaseLogger','Cannot\x20find\x20object\x20\x27','fs/promises','../../job-detail','setObjectStatus','JobStatus','9lLUnjy','FAILED','__esModule','jobState','successful','toString','_jobId','919396kCVtda','join','../../enums/logger.enums','apply','getTime','28enrZrf','map','isExistsPath','name','720924aocITy','63VzqwxR','write','_jobState','failed','init','5320910woIfsZ','includes','QUEUED','status','utf-8','setJobStatus','parse'];a76_0xdd1b=function(){return _0x1f9b0d;};return a76_0xdd1b();}const a76_0x2211b4=a76_0x9604;(function(_0x396caa,_0x2b82f6){const _0x5335c1=a76_0x9604,_0x177913=_0x396caa();while(!![]){try{const _0x5f5439=parseInt(_0x5335c1(0x106))/0x1*(parseInt(_0x5335c1(0xf4))/0x2)+-parseInt(_0x5335c1(0x12c))/0x3*(parseInt(_0x5335c1(0xef))/0x4)+-parseInt(_0x5335c1(0x10a))/0x5*(-parseInt(_0x5335c1(0x10d))/0x6)+-parseInt(_0x5335c1(0xf9))/0x7*(-parseInt(_0x5335c1(0x115))/0x8)+-parseInt(_0x5335c1(0x10c))/0x9+parseInt(_0x5335c1(0xfe))/0xa+-parseInt(_0x5335c1(0x11c))/0xb*(-parseInt(_0x5335c1(0xf8))/0xc);if(_0x5f5439===_0x2b82f6)break;else _0x177913['push'](_0x177913['shift']());}catch(_0x42ffbd){_0x177913['push'](_0x177913['shift']());}}}(a76_0xdd1b,0x7cf61));const a76_0x486a95=(function(){let _0x11e258=!![];return function(_0x48b3c6,_0x5884f3){const _0x194c87=_0x11e258?function(){const _0x3191d8=a76_0x9604;if(_0x5884f3){const _0x5ab2ea=_0x5884f3[_0x3191d8(0xf2)](_0x48b3c6,arguments);return _0x5884f3=null,_0x5ab2ea;}}:function(){};return _0x11e258=![],_0x194c87;};}()),a76_0x582def=a76_0x486a95(this,function(){const _0x54857d=a76_0x9604;return a76_0x582def[_0x54857d(0xed)]()[_0x54857d(0x10e)]('(((.+)+)+)+$')[_0x54857d(0xed)]()['constructor'](a76_0x582def)[_0x54857d(0x10e)](_0x54857d(0x122));});function a76_0x9604(_0xf029e6,_0x40bd05){const _0x5f11d0=a76_0xdd1b();return a76_0x9604=function(_0x582def,_0x486a95){_0x582def=_0x582def-0xe9;let _0xdd1b34=_0x5f11d0[_0x582def];return _0xdd1b34;},a76_0x9604(_0xf029e6,_0x40bd05);}a76_0x582def();'use strict';var __importDefault=this&&this[a76_0x2211b4(0x11b)]||function(_0x5f43c8){const _0x4c432f=a76_0x2211b4;return _0x5f43c8&&_0x5f43c8[_0x4c432f(0xea)]?_0x5f43c8:{'default':_0x5f43c8};};Object['defineProperty'](exports,a76_0x2211b4(0xea),{'value':!![]}),exports[a76_0x2211b4(0x113)]=void 0x0;const path_1=__importDefault(require(a76_0x2211b4(0x123))),logger_enums_1=require(a76_0x2211b4(0xf1)),base_logger_1=require(a76_0x2211b4(0x119)),promises_1=require(a76_0x2211b4(0x128)),job_detail_1=require(a76_0x2211b4(0x129)),utils_1=require('@flosum/utils'),job_1=require('../../../../../constants/job');class LoggerJobState extends base_logger_1[a76_0x2211b4(0x126)]{constructor(){const _0x5eb4cd=a76_0x2211b4;super(...arguments),this[_0x5eb4cd(0x10f)]=![];}get[a76_0x2211b4(0x116)](){const _0x4936d2=a76_0x2211b4;return this[_0x4936d2(0x10f)];}set['isLoggerInit'](_0x4cdbf7){const _0x86ebf3=a76_0x2211b4;this[_0x86ebf3(0x10f)]=_0x4cdbf7;}get['jobState'](){const _0x11bf83=a76_0x2211b4;if(!this[_0x11bf83(0x116)])throw new Error('Logger\x20Job\x20State\x20wasn\x27t\x20init');return this[_0x11bf83(0xfb)];}get[a76_0x2211b4(0x124)](){const _0x591536=a76_0x2211b4;return path_1[_0x591536(0x11d)][_0x591536(0xf0)](this[_0x591536(0x111)],job_1[_0x591536(0x11a)]);}async[a76_0x2211b4(0xfd)](_0x4d326f){const _0x1c7e97=a76_0x2211b4;return this['_jobState']=await this[_0x1c7e97(0x110)](),this[_0x1c7e97(0xfb)][_0x1c7e97(0x11f)]=this[_0x1c7e97(0x120)](_0x4d326f),await this[_0x1c7e97(0xfa)](),await this[_0x1c7e97(0x125)](),this[_0x1c7e97(0x116)]=!![],this;}[a76_0x2211b4(0x12a)](_0x43b71e,_0x391c92){const _0x449cbd=a76_0x2211b4;this[_0x449cbd(0x121)](_0x43b71e)[_0x449cbd(0x101)]=_0x391c92,this['updateLoggerState']();}[a76_0x2211b4(0x103)](_0x2607e1){const _0x2e7f6a=a76_0x2211b4;this[_0x2e7f6a(0xeb)]['status']=_0x2607e1,[logger_enums_1['JobStatus'][_0x2e7f6a(0xe9)],logger_enums_1[_0x2e7f6a(0x12b)]['COMPLETED']][_0x2e7f6a(0xff)](_0x2607e1)&&(this[_0x2e7f6a(0xeb)][_0x2e7f6a(0x107)]=new Date()['getTime']()),this['updateLoggerState']();}['setJobError'](_0x2eb2bd){const _0x1f27f9=a76_0x2211b4;this[_0x1f27f9(0xeb)]['error']=_0x2eb2bd,this[_0x1f27f9(0x11e)]();}['updateObjectProcess'](_0x5bf82d,_0x20c025,_0x1a135a){const _0x38fba0=a76_0x2211b4,_0x110995=this['getObjectState'](_0x5bf82d);_0x110995[_0x38fba0(0xec)]+=_0x20c025,_0x110995[_0x38fba0(0xfc)]+=_0x1a135a,this['jobState']['successful']+=_0x20c025,this[_0x38fba0(0xeb)][_0x38fba0(0xfc)]+=_0x1a135a,this[_0x38fba0(0x11e)]();}[a76_0x2211b4(0x121)](_0x1bf0f1){const _0x22c79f=a76_0x2211b4;var _0x58b65d;const _0x4806ea=(_0x58b65d=this[_0x22c79f(0xeb)][_0x22c79f(0x11f)])===null||_0x58b65d===void 0x0?void 0x0:_0x58b65d[_0x22c79f(0x10b)](_0x1aed8f=>_0x1aed8f[_0x22c79f(0xf7)]===_0x1bf0f1);if(!_0x4806ea)throw new Error(_0x22c79f(0x127)+_0x1bf0f1+_0x22c79f(0x109));return _0x4806ea;}async[a76_0x2211b4(0x110)](){const _0xbaa9f8=a76_0x2211b4;if(!await utils_1[_0xbaa9f8(0x105)][_0xbaa9f8(0xf6)](this[_0xbaa9f8(0x124)]))return this['initJobState']();const _0x26e248=await(0x0,promises_1[_0xbaa9f8(0x112)])(job_detail_1[_0xbaa9f8(0x118)]+'/'+job_1[_0xbaa9f8(0x11a)],{'encoding':_0xbaa9f8(0x102)});return JSON[_0xbaa9f8(0x104)](_0x26e248);}[a76_0x2211b4(0x114)](){const _0x2354be=a76_0x2211b4;return{'id':this[_0x2354be(0xee)],'status':logger_enums_1[_0x2354be(0x12b)][_0x2354be(0x100)],'processed':[],'createdDate':new Date()[_0x2354be(0xf3)](),'successful':0x0,'failed':0x0};}[a76_0x2211b4(0x120)](_0x5b0bdb){const _0x4abdba=a76_0x2211b4;return _0x5b0bdb[_0x4abdba(0xf5)](_0x1872dd=>({'name':_0x1872dd,'status':logger_enums_1['ObjectStatus'][_0x4abdba(0x100)],'failed':0x0,'successful':0x0}));}[a76_0x2211b4(0xfa)](){const _0x37e69b=a76_0x2211b4;return(0x0,promises_1[_0x37e69b(0x117)])(this[_0x37e69b(0x124)],JSON[_0x37e69b(0x108)](this['_jobState']));}}exports[a76_0x2211b4(0x113)]=LoggerJobState;