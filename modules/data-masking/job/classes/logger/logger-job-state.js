const a58_0x4edb9d=a58_0x5b18;(function(_0x3e31f7,_0x2611eb){const _0x3a83fe=a58_0x5b18,_0x1d2e6e=_0x3e31f7();while(!![]){try{const _0x53f42a=parseInt(_0x3a83fe(0xc3))/0x1*(-parseInt(_0x3a83fe(0xbf))/0x2)+parseInt(_0x3a83fe(0xac))/0x3+parseInt(_0x3a83fe(0xbd))/0x4*(-parseInt(_0x3a83fe(0xbc))/0x5)+parseInt(_0x3a83fe(0x88))/0x6*(parseInt(_0x3a83fe(0x89))/0x7)+-parseInt(_0x3a83fe(0xb1))/0x8+-parseInt(_0x3a83fe(0xb5))/0x9*(-parseInt(_0x3a83fe(0xbe))/0xa)+-parseInt(_0x3a83fe(0xb9))/0xb*(-parseInt(_0x3a83fe(0xaf))/0xc);if(_0x53f42a===_0x2611eb)break;else _0x1d2e6e['push'](_0x1d2e6e['shift']());}catch(_0x51023a){_0x1d2e6e['push'](_0x1d2e6e['shift']());}}}(a58_0x4049,0xa1750));function a58_0x4049(){const _0x426da1=['join','constructor','utf-8','Logger\x20Job\x20State\x20wasn\x27t\x20init','getTime','setJobError','initObjectStatistics','map','updateLoggerState','jobState','defineProperty','(((.+)+)+)+$','@flosum/utils','status','getJobState','304563kXXOVZ','error','setJobStatus','641508VISIht','apply','1110136yKLkgg','initJobState','../../../../../constants/job','_isLoggerInit','8973wZLuER','FAILED','updateObjectProcess','write','99bbFzAh','COMPLETED','QUEUED','42690cgWxAQ','428HaQuYq','2010TwYNoI','4oUtPrs','toString','./base-logger','isExistsPath','61043RZamUk','_jobState','filePath','JobStatus','jobStorePath','../../enums/logger.enums','LoggerJobState','6UoSetM','7368886xcqyvh','Cannot\x20find\x20object\x20\x27','JOB_LOG_STATE_FILENAME','_jobPath','failed','search','setObjectStatus','default','start','path','writeFile','parse','name','stringify','completedDate','__esModule','getObjectState','fs/promises','BaseLogger','isLoggerInit'];a58_0x4049=function(){return _0x426da1;};return a58_0x4049();}const a58_0x1ebf3c=(function(){let _0x32606a=!![];return function(_0x3a2283,_0x5342be){const _0x4d21d5=_0x32606a?function(){const _0x1a0ef9=a58_0x5b18;if(_0x5342be){const _0x156f9f=_0x5342be[_0x1a0ef9(0xb0)](_0x3a2283,arguments);return _0x5342be=null,_0x156f9f;}}:function(){};return _0x32606a=![],_0x4d21d5;};}()),a58_0x14a402=a58_0x1ebf3c(this,function(){const _0x238a24=a58_0x5b18;return a58_0x14a402[_0x238a24(0xc0)]()[_0x238a24(0x8e)](_0x238a24(0xa8))[_0x238a24(0xc0)]()[_0x238a24(0x9e)](a58_0x14a402)[_0x238a24(0x8e)](_0x238a24(0xa8));});a58_0x14a402();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x256b3b){const _0x1c309c=a58_0x5b18;return _0x256b3b&&_0x256b3b[_0x1c309c(0x98)]?_0x256b3b:{'default':_0x256b3b};};Object[a58_0x4edb9d(0xa7)](exports,a58_0x4edb9d(0x98),{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a58_0x4edb9d(0x92))),logger_enums_1=require(a58_0x4edb9d(0x86)),base_logger_1=require(a58_0x4edb9d(0xc1)),promises_1=require(a58_0x4edb9d(0x9a)),job_detail_1=require('../../job-detail'),utils_1=require(a58_0x4edb9d(0xa9)),job_1=require(a58_0x4edb9d(0xb3));function a58_0x5b18(_0x8c7117,_0x19d601){const _0x2e36c4=a58_0x4049();return a58_0x5b18=function(_0x14a402,_0x1ebf3c){_0x14a402=_0x14a402-0x83;let _0x404955=_0x2e36c4[_0x14a402];return _0x404955;},a58_0x5b18(_0x8c7117,_0x19d601);}class LoggerJobState extends base_logger_1[a58_0x4edb9d(0x9b)]{constructor(){super(...arguments),this['_isLoggerInit']=![];}get[a58_0x4edb9d(0x9c)](){const _0xcd66b1=a58_0x4edb9d;return this[_0xcd66b1(0xb4)];}set[a58_0x4edb9d(0x9c)](_0xc3e5fe){const _0x44f671=a58_0x4edb9d;this[_0x44f671(0xb4)]=_0xc3e5fe;}get[a58_0x4edb9d(0xa6)](){const _0x283f2a=a58_0x4edb9d;if(!this[_0x283f2a(0x9c)])throw new Error(_0x283f2a(0xa0));return this['_jobState'];}get[a58_0x4edb9d(0x83)](){const _0x546078=a58_0x4edb9d;return path_1[_0x546078(0x90)][_0x546078(0x9d)](this[_0x546078(0x8c)],job_1[_0x546078(0x8b)]);}async['init'](_0x187ee6){const _0x1e132f=a58_0x4edb9d;return this['_jobState']=await this[_0x1e132f(0xab)](),this['_jobState']['processed']=this[_0x1e132f(0xa3)](_0x187ee6),await this[_0x1e132f(0xb8)](),await this[_0x1e132f(0x91)](),this[_0x1e132f(0x9c)]=!![],this;}[a58_0x4edb9d(0x8f)](_0x27a9ca,_0x1a67a4){const _0x4ea2ec=a58_0x4edb9d;this['getObjectState'](_0x27a9ca)[_0x4ea2ec(0xaa)]=_0x1a67a4,this[_0x4ea2ec(0xa5)]();}[a58_0x4edb9d(0xae)](_0x2b58f3){const _0x343658=a58_0x4edb9d;this['jobState'][_0x343658(0xaa)]=_0x2b58f3,[logger_enums_1[_0x343658(0x84)][_0x343658(0xb6)],logger_enums_1[_0x343658(0x84)][_0x343658(0xba)]]['includes'](_0x2b58f3)&&(this[_0x343658(0xa6)][_0x343658(0x97)]=new Date()[_0x343658(0xa1)]()),this[_0x343658(0xa5)]();}[a58_0x4edb9d(0xa2)](_0x46c3df){const _0x2daa2d=a58_0x4edb9d;this[_0x2daa2d(0xa6)][_0x2daa2d(0xad)]=_0x46c3df,this[_0x2daa2d(0xa5)]();}[a58_0x4edb9d(0xb7)](_0x3e3331,_0x3d0f5e,_0x4239c8){const _0x1e2c61=a58_0x4edb9d,_0x1984c7=this[_0x1e2c61(0x99)](_0x3e3331);_0x1984c7['successful']+=_0x3d0f5e,_0x1984c7[_0x1e2c61(0x8d)]+=_0x4239c8,this['jobState']['successful']+=_0x3d0f5e,this[_0x1e2c61(0xa6)][_0x1e2c61(0x8d)]+=_0x4239c8,this[_0x1e2c61(0xa5)]();}['getObjectState'](_0x4c8f17){const _0x1c0592=a58_0x4edb9d;var _0x1a9954;const _0x1e7b6d=(_0x1a9954=this[_0x1c0592(0xa6)]['processed'])===null||_0x1a9954===void 0x0?void 0x0:_0x1a9954['find'](_0x8df43b=>_0x8df43b[_0x1c0592(0x95)]===_0x4c8f17);if(!_0x1e7b6d)throw new Error(_0x1c0592(0x8a)+_0x4c8f17+'\x27\x20in\x20statistic');return _0x1e7b6d;}async[a58_0x4edb9d(0xab)](){const _0x579ad2=a58_0x4edb9d;if(!await utils_1['FsUtils'][_0x579ad2(0xc2)](this['filePath']))return this[_0x579ad2(0xb2)]();const _0x200dd8=await(0x0,promises_1['readFile'])(job_detail_1[_0x579ad2(0x85)]+'/'+job_1['JOB_LOG_STATE_FILENAME'],{'encoding':_0x579ad2(0x9f)});return JSON[_0x579ad2(0x94)](_0x200dd8);}['initJobState'](){const _0x33309a=a58_0x4edb9d;return{'id':this['_jobId'],'status':logger_enums_1[_0x33309a(0x84)]['QUEUED'],'processed':[],'createdDate':new Date()[_0x33309a(0xa1)](),'successful':0x0,'failed':0x0};}[a58_0x4edb9d(0xa3)](_0x31df1c){const _0x177b86=a58_0x4edb9d;return _0x31df1c[_0x177b86(0xa4)](_0x5dc35c=>({'name':_0x5dc35c,'status':logger_enums_1['ObjectStatus'][_0x177b86(0xbb)],'failed':0x0,'successful':0x0}));}[a58_0x4edb9d(0xb8)](){const _0x898884=a58_0x4edb9d;return(0x0,promises_1[_0x898884(0x93)])(this[_0x898884(0x83)],JSON[_0x898884(0x96)](this[_0x898884(0xc4)]));}}exports[a58_0x4edb9d(0x87)]=LoggerJobState;