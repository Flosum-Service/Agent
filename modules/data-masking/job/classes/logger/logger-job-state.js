const a58_0x4bb208=a58_0x513e;(function(_0x704b0a,_0x41437c){const _0x401455=a58_0x513e,_0x7097b4=_0x704b0a();while(!![]){try{const _0x38c044=-parseInt(_0x401455(0x166))/0x1+-parseInt(_0x401455(0x16a))/0x2*(parseInt(_0x401455(0x161))/0x3)+parseInt(_0x401455(0x144))/0x4*(parseInt(_0x401455(0x132))/0x5)+parseInt(_0x401455(0x157))/0x6*(-parseInt(_0x401455(0x14a))/0x7)+-parseInt(_0x401455(0x131))/0x8*(parseInt(_0x401455(0x140))/0x9)+parseInt(_0x401455(0x154))/0xa*(parseInt(_0x401455(0x14e))/0xb)+-parseInt(_0x401455(0x15c))/0xc*(-parseInt(_0x401455(0x12f))/0xd);if(_0x38c044===_0x41437c)break;else _0x7097b4['push'](_0x7097b4['shift']());}catch(_0x375429){_0x7097b4['push'](_0x7097b4['shift']());}}}(a58_0x4e35,0xbb444));const a58_0x199ff6=(function(){let _0x2119ea=!![];return function(_0x314f6d,_0x5d1f99){const _0x56f135=_0x2119ea?function(){const _0x13fde2=a58_0x513e;if(_0x5d1f99){const _0x1cad4a=_0x5d1f99[_0x13fde2(0x16b)](_0x314f6d,arguments);return _0x5d1f99=null,_0x1cad4a;}}:function(){};return _0x2119ea=![],_0x56f135;};}()),a58_0x5cddf9=a58_0x199ff6(this,function(){const _0x5ee701=a58_0x513e;return a58_0x5cddf9[_0x5ee701(0x148)]()[_0x5ee701(0x15b)]('(((.+)+)+)+$')['toString']()[_0x5ee701(0x15e)](a58_0x5cddf9)['search']('(((.+)+)+)+$');});a58_0x5cddf9();function a58_0x513e(_0x11ce9b,_0x19adac){const _0x4ba2ae=a58_0x4e35();return a58_0x513e=function(_0x5cddf9,_0x199ff6){_0x5cddf9=_0x5cddf9-0x125;let _0x4e3532=_0x4ba2ae[_0x5cddf9];return _0x4e3532;},a58_0x513e(_0x11ce9b,_0x19adac);}function a58_0x4e35(){const _0x2c1d41=['_jobState','processed','writeFile','failed','JobStatus','_jobId','./base-logger','FAILED','COMPLETED','1432821kaLEDR','completedDate','1582376qMmqaR','5pLwTAe','Cannot\x20find\x20object\x20\x27','BaseLogger','initJobState','filePath','join','fs/promises','__importDefault','initObjectStatistics','name','Logger\x20Job\x20State\x20wasn\x27t\x20init','getJobState','_isLoggerInit','successful','18jrpgyz','../../enums/logger.enums','jobState','setJobError','1295860LPZBhR','path','readFile','defineProperty','toString','\x27\x20in\x20statistic','75334CpYrqy','ObjectStatus','setJobStatus','getTime','64471lTPeWv','../../../../../constants/job','write','QUEUED','isLoggerInit','__esModule','2030eCOnwo','find','utf-8','114vAJZIy','JOB_LOG_STATE_FILENAME','stringify','default','search','204MLeJGU','LoggerJobState','constructor','@flosum/utils','parse','33NCfYny','map','updateObjectProcess','status','includes','741439luJCrN','setObjectStatus','jobStorePath','updateLoggerState','232524jeiZZE','apply','../../job-detail','getObjectState'];a58_0x4e35=function(){return _0x2c1d41;};return a58_0x4e35();}'use strict';var __importDefault=this&&this[a58_0x4bb208(0x139)]||function(_0x551b56){const _0x3e4d74=a58_0x4bb208;return _0x551b56&&_0x551b56[_0x3e4d74(0x153)]?_0x551b56:{'default':_0x551b56};};Object[a58_0x4bb208(0x147)](exports,'__esModule',{'value':!![]}),exports[a58_0x4bb208(0x15d)]=void 0x0;const path_1=__importDefault(require(a58_0x4bb208(0x145))),logger_enums_1=require(a58_0x4bb208(0x141)),base_logger_1=require(a58_0x4bb208(0x12c)),promises_1=require(a58_0x4bb208(0x138)),job_detail_1=require(a58_0x4bb208(0x16c)),utils_1=require(a58_0x4bb208(0x15f)),job_1=require(a58_0x4bb208(0x14f));class LoggerJobState extends base_logger_1[a58_0x4bb208(0x134)]{constructor(){const _0x11fcc5=a58_0x4bb208;super(...arguments),this[_0x11fcc5(0x13e)]=![];}get['isLoggerInit'](){const _0x5000d6=a58_0x4bb208;return this[_0x5000d6(0x13e)];}set[a58_0x4bb208(0x152)](_0x1cbea9){const _0x2b5cb6=a58_0x4bb208;this[_0x2b5cb6(0x13e)]=_0x1cbea9;}get[a58_0x4bb208(0x142)](){const _0x1637c2=a58_0x4bb208;if(!this[_0x1637c2(0x152)])throw new Error(_0x1637c2(0x13c));return this['_jobState'];}get['filePath'](){const _0x32f739=a58_0x4bb208;return path_1[_0x32f739(0x15a)][_0x32f739(0x137)](this['_jobPath'],job_1['JOB_LOG_STATE_FILENAME']);}async['init'](_0x8f2681){const _0x542356=a58_0x4bb208;return this[_0x542356(0x126)]=await this[_0x542356(0x13d)](),this[_0x542356(0x126)][_0x542356(0x127)]=this[_0x542356(0x13a)](_0x8f2681),await this['write'](),await this['start'](),this[_0x542356(0x152)]=!![],this;}[a58_0x4bb208(0x167)](_0x524f86,_0x4a05af){const _0x20de7f=a58_0x4bb208;this[_0x20de7f(0x125)](_0x524f86)[_0x20de7f(0x164)]=_0x4a05af,this[_0x20de7f(0x169)]();}[a58_0x4bb208(0x14c)](_0xe68174){const _0xf57d77=a58_0x4bb208;this[_0xf57d77(0x142)][_0xf57d77(0x164)]=_0xe68174,[logger_enums_1[_0xf57d77(0x12a)][_0xf57d77(0x12d)],logger_enums_1[_0xf57d77(0x12a)][_0xf57d77(0x12e)]][_0xf57d77(0x165)](_0xe68174)&&(this[_0xf57d77(0x142)][_0xf57d77(0x130)]=new Date()[_0xf57d77(0x14d)]()),this['updateLoggerState']();}[a58_0x4bb208(0x143)](_0x385005){const _0x3f0499=a58_0x4bb208;this[_0x3f0499(0x142)]['error']=_0x385005,this[_0x3f0499(0x169)]();}[a58_0x4bb208(0x163)](_0x107380,_0x47c8fc,_0x14eadc){const _0x35c617=a58_0x4bb208,_0x2ab6ba=this[_0x35c617(0x125)](_0x107380);_0x2ab6ba[_0x35c617(0x13f)]+=_0x47c8fc,_0x2ab6ba[_0x35c617(0x129)]+=_0x14eadc,this[_0x35c617(0x142)][_0x35c617(0x13f)]+=_0x47c8fc,this[_0x35c617(0x142)][_0x35c617(0x129)]+=_0x14eadc,this[_0x35c617(0x169)]();}['getObjectState'](_0x1e9edd){const _0x192b08=a58_0x4bb208;var _0x4714e1;const _0x2c06f5=(_0x4714e1=this['jobState'][_0x192b08(0x127)])===null||_0x4714e1===void 0x0?void 0x0:_0x4714e1[_0x192b08(0x155)](_0xa090a3=>_0xa090a3[_0x192b08(0x13b)]===_0x1e9edd);if(!_0x2c06f5)throw new Error(_0x192b08(0x133)+_0x1e9edd+_0x192b08(0x149));return _0x2c06f5;}async[a58_0x4bb208(0x13d)](){const _0xd745be=a58_0x4bb208;if(!await utils_1['FsUtils']['isExistsPath'](this[_0xd745be(0x136)]))return this[_0xd745be(0x135)]();const _0x3d044a=await(0x0,promises_1[_0xd745be(0x146)])(job_detail_1[_0xd745be(0x168)]+'/'+job_1[_0xd745be(0x158)],{'encoding':_0xd745be(0x156)});return JSON[_0xd745be(0x160)](_0x3d044a);}[a58_0x4bb208(0x135)](){const _0x585159=a58_0x4bb208;return{'id':this[_0x585159(0x12b)],'status':logger_enums_1[_0x585159(0x12a)][_0x585159(0x151)],'processed':[],'createdDate':new Date()[_0x585159(0x14d)](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x4e53fb){const _0x58e7e1=a58_0x4bb208;return _0x4e53fb[_0x58e7e1(0x162)](_0x4b40a5=>({'name':_0x4b40a5,'status':logger_enums_1[_0x58e7e1(0x14b)]['QUEUED'],'failed':0x0,'successful':0x0}));}[a58_0x4bb208(0x150)](){const _0xa36686=a58_0x4bb208;return(0x0,promises_1[_0xa36686(0x128)])(this['filePath'],JSON[_0xa36686(0x159)](this[_0xa36686(0x126)]));}}exports[a58_0x4bb208(0x15d)]=LoggerJobState;