const a57_0x41af53=a57_0xf9dd;(function(_0x41c5f8,_0x3273d4){const _0x1e01d7=a57_0xf9dd,_0xf0fad3=_0x41c5f8();while(!![]){try{const _0x505355=parseInt(_0x1e01d7(0x1e7))/0x1*(-parseInt(_0x1e01d7(0x1f5))/0x2)+-parseInt(_0x1e01d7(0x1f0))/0x3+parseInt(_0x1e01d7(0x21a))/0x4*(parseInt(_0x1e01d7(0x211))/0x5)+parseInt(_0x1e01d7(0x210))/0x6*(-parseInt(_0x1e01d7(0x221))/0x7)+parseInt(_0x1e01d7(0x207))/0x8*(parseInt(_0x1e01d7(0x1e6))/0x9)+parseInt(_0x1e01d7(0x21e))/0xa*(parseInt(_0x1e01d7(0x21c))/0xb)+-parseInt(_0x1e01d7(0x1f7))/0xc;if(_0x505355===_0x3273d4)break;else _0xf0fad3['push'](_0xf0fad3['shift']());}catch(_0x10f869){_0xf0fad3['push'](_0xf0fad3['shift']());}}}(a57_0x59b3,0x908f3));const a57_0xf7f34c=(function(){let _0x35fe9c=!![];return function(_0x1f99d1,_0x494fe6){const _0x55aeaa=_0x35fe9c?function(){const _0xeb86a5=a57_0xf9dd;if(_0x494fe6){const _0xe59fe6=_0x494fe6[_0xeb86a5(0x1ef)](_0x1f99d1,arguments);return _0x494fe6=null,_0xe59fe6;}}:function(){};return _0x35fe9c=![],_0x55aeaa;};}()),a57_0x4a704f=a57_0xf7f34c(this,function(){const _0x3f487f=a57_0xf9dd;return a57_0x4a704f[_0x3f487f(0x220)]()[_0x3f487f(0x1f9)]('(((.+)+)+)+$')[_0x3f487f(0x220)]()[_0x3f487f(0x216)](a57_0x4a704f)['search'](_0x3f487f(0x20e));});a57_0x4a704f();'use strict';var __importDefault=this&&this[a57_0x41af53(0x224)]||function(_0x141275){return _0x141275&&_0x141275['__esModule']?_0x141275:{'default':_0x141275};};Object[a57_0x41af53(0x1ed)](exports,a57_0x41af53(0x1e8),{'value':!![]}),exports[a57_0x41af53(0x217)]=void 0x0;const path_1=__importDefault(require(a57_0x41af53(0x202))),logger_enums_1=require('../../enums/logger.enums'),base_logger_1=require('./base-logger'),promises_1=require(a57_0x41af53(0x21f)),job_detail_1=require(a57_0x41af53(0x20d)),utils_1=require(a57_0x41af53(0x1f6)),job_1=require(a57_0x41af53(0x1ea));function a57_0xf9dd(_0x3da77,_0x38e101){const _0x37f4a9=a57_0x59b3();return a57_0xf9dd=function(_0x4a704f,_0xf7f34c){_0x4a704f=_0x4a704f-0x1df;let _0x59b3=_0x37f4a9[_0x4a704f];return _0x59b3;},a57_0xf9dd(_0x3da77,_0x38e101);}class LoggerJobState extends base_logger_1[a57_0x41af53(0x205)]{constructor(){const _0x28b4b6=a57_0x41af53;super(...arguments),this[_0x28b4b6(0x209)]=![];}get[a57_0x41af53(0x213)](){const _0x4ba9d9=a57_0x41af53;return this[_0x4ba9d9(0x209)];}set['isLoggerInit'](_0x5edbef){const _0x55d4e7=a57_0x41af53;this[_0x55d4e7(0x209)]=_0x5edbef;}get['jobState'](){if(!this['isLoggerInit'])throw new Error('Logger\x20Job\x20State\x20wasn\x27t\x20init');return this['_jobState'];}get[a57_0x41af53(0x1e4)](){const _0x17b6e9=a57_0x41af53;return path_1['default'][_0x17b6e9(0x219)](this[_0x17b6e9(0x206)],job_1['JOB_LOG_STATE_FILENAME']);}async[a57_0x41af53(0x218)](_0x341a44){const _0x270f32=a57_0x41af53;return this[_0x270f32(0x20b)]=await this[_0x270f32(0x212)](),this[_0x270f32(0x20b)]['processed']=this[_0x270f32(0x200)](_0x341a44),await this[_0x270f32(0x1f8)](),await this[_0x270f32(0x203)](),this[_0x270f32(0x213)]=!![],this;}[a57_0x41af53(0x21b)](_0x2ed187,_0xc94b33){const _0x51c020=a57_0x41af53;this[_0x51c020(0x20c)](_0x2ed187)[_0x51c020(0x21d)]=_0xc94b33,this[_0x51c020(0x222)]();}['setJobStatus'](_0x4e941f){const _0x4c7dfc=a57_0x41af53;this[_0x4c7dfc(0x1e0)][_0x4c7dfc(0x21d)]=_0x4e941f,[logger_enums_1['JobStatus'][_0x4c7dfc(0x1df)],logger_enums_1[_0x4c7dfc(0x1fd)][_0x4c7dfc(0x223)]][_0x4c7dfc(0x1eb)](_0x4e941f)&&(this[_0x4c7dfc(0x1e0)][_0x4c7dfc(0x1f1)]=new Date()['getTime']()),this['updateLoggerState']();}[a57_0x41af53(0x1ff)](_0x5e1dad){const _0x58a12f=a57_0x41af53;this['jobState'][_0x58a12f(0x1ee)]=_0x5e1dad,this[_0x58a12f(0x222)]();}['updateObjectProcess'](_0x598972,_0x2783dc,_0x3e2ce0){const _0x1a9fe9=a57_0x41af53,_0x2c5f7f=this[_0x1a9fe9(0x20c)](_0x598972);_0x2c5f7f[_0x1a9fe9(0x1fb)]+=_0x2783dc,_0x2c5f7f[_0x1a9fe9(0x1f2)]+=_0x3e2ce0,this[_0x1a9fe9(0x1e0)][_0x1a9fe9(0x1fb)]+=_0x2783dc,this['jobState'][_0x1a9fe9(0x1f2)]+=_0x3e2ce0,this[_0x1a9fe9(0x222)]();}[a57_0x41af53(0x20c)](_0x489935){const _0x5ed844=a57_0x41af53;var _0x2a71f3;const _0x31a43e=(_0x2a71f3=this[_0x5ed844(0x1e0)][_0x5ed844(0x201)])===null||_0x2a71f3===void 0x0?void 0x0:_0x2a71f3[_0x5ed844(0x1f4)](_0x227add=>_0x227add[_0x5ed844(0x20f)]===_0x489935);if(!_0x31a43e)throw new Error(_0x5ed844(0x1fe)+_0x489935+_0x5ed844(0x1e9));return _0x31a43e;}async[a57_0x41af53(0x212)](){const _0x50ce47=a57_0x41af53;if(!await utils_1[_0x50ce47(0x204)][_0x50ce47(0x1e2)](this[_0x50ce47(0x1e4)]))return this[_0x50ce47(0x1ec)]();const _0x3f95af=await(0x0,promises_1[_0x50ce47(0x1fc)])(job_detail_1[_0x50ce47(0x1f3)]+'/'+job_1[_0x50ce47(0x20a)],{'encoding':_0x50ce47(0x1fa)});return JSON['parse'](_0x3f95af);}[a57_0x41af53(0x1ec)](){const _0x41b6c0=a57_0x41af53;return{'id':this[_0x41b6c0(0x1e3)],'status':logger_enums_1[_0x41b6c0(0x1fd)][_0x41b6c0(0x208)],'processed':[],'createdDate':new Date()[_0x41b6c0(0x215)](),'successful':0x0,'failed':0x0};}[a57_0x41af53(0x200)](_0x2bc95f){const _0x25a6a8=a57_0x41af53;return _0x2bc95f[_0x25a6a8(0x214)](_0x390d32=>({'name':_0x390d32,'status':logger_enums_1[_0x25a6a8(0x1e1)][_0x25a6a8(0x208)],'failed':0x0,'successful':0x0}));}[a57_0x41af53(0x1f8)](){const _0x1ea0c5=a57_0x41af53;return(0x0,promises_1['writeFile'])(this[_0x1ea0c5(0x1e4)],JSON[_0x1ea0c5(0x1e5)](this['_jobState']));}}exports[a57_0x41af53(0x217)]=LoggerJobState;function a57_0x59b3(){const _0x446ac0=['failed','jobStorePath','find','4IRTXtw','@flosum/utils','4400424dCjSoj','write','search','utf-8','successful','readFile','JobStatus','Cannot\x20find\x20object\x20\x27','setJobError','initObjectStatistics','processed','path','start','FsUtils','BaseLogger','_jobPath','152XgEAqx','QUEUED','_isLoggerInit','JOB_LOG_STATE_FILENAME','_jobState','getObjectState','../../job-detail','(((.+)+)+)+$','name','815412sWNGcx','4948895mZeQXG','getJobState','isLoggerInit','map','getTime','constructor','LoggerJobState','init','join','4JxrUYG','setObjectStatus','41767etxDvM','status','2770tSgMnL','fs/promises','toString','21oJZfjp','updateLoggerState','COMPLETED','__importDefault','FAILED','jobState','ObjectStatus','isExistsPath','_jobId','filePath','stringify','172485SefxkI','138571NDfBWe','__esModule','\x27\x20in\x20statistic','../../../../../constants/job','includes','initJobState','defineProperty','error','apply','2286054MYzbnw','completedDate'];a57_0x59b3=function(){return _0x446ac0;};return a57_0x59b3();}