const a74_0x1d1cc2=a74_0x1f0c;(function(_0x14ae18,_0x384f8b){const _0x4d5589=a74_0x1f0c,_0x2b3b67=_0x14ae18();while(!![]){try{const _0x47d2ed=parseInt(_0x4d5589(0x1d5))/0x1*(-parseInt(_0x4d5589(0x1f6))/0x2)+parseInt(_0x4d5589(0x1f8))/0x3*(-parseInt(_0x4d5589(0x1e5))/0x4)+-parseInt(_0x4d5589(0x1e4))/0x5+parseInt(_0x4d5589(0x20a))/0x6*(-parseInt(_0x4d5589(0x1ec))/0x7)+-parseInt(_0x4d5589(0x205))/0x8+-parseInt(_0x4d5589(0x1d2))/0x9+parseInt(_0x4d5589(0x1f5))/0xa;if(_0x47d2ed===_0x384f8b)break;else _0x2b3b67['push'](_0x2b3b67['shift']());}catch(_0x12a65e){_0x2b3b67['push'](_0x2b3b67['shift']());}}}(a74_0x5906,0x520cc));const a74_0x4c3c30=(function(){let _0x3f3ace=!![];return function(_0x4a960d,_0x4fb75d){const _0x43eb3f=_0x3f3ace?function(){const _0x40221e=a74_0x1f0c;if(_0x4fb75d){const _0x34d64b=_0x4fb75d[_0x40221e(0x1f3)](_0x4a960d,arguments);return _0x4fb75d=null,_0x34d64b;}}:function(){};return _0x3f3ace=![],_0x43eb3f;};}()),a74_0x5ca174=a74_0x4c3c30(this,function(){const _0x746176=a74_0x1f0c;return a74_0x5ca174[_0x746176(0x1db)]()[_0x746176(0x211)]('(((.+)+)+)+$')[_0x746176(0x1db)]()[_0x746176(0x1f7)](a74_0x5ca174)[_0x746176(0x211)](_0x746176(0x213));});a74_0x5ca174();'use strict';var __importDefault=this&&this[a74_0x1d1cc2(0x209)]||function(_0xf07d5e){const _0x270373=a74_0x1d1cc2;return _0xf07d5e&&_0xf07d5e[_0x270373(0x1d4)]?_0xf07d5e:{'default':_0xf07d5e};};Object[a74_0x1d1cc2(0x204)](exports,a74_0x1d1cc2(0x1d4),{'value':!![]}),exports[a74_0x1d1cc2(0x1d7)]=void 0x0;const path_1=__importDefault(require(a74_0x1d1cc2(0x1fa))),logger_enums_1=require(a74_0x1d1cc2(0x1d6)),base_logger_1=require(a74_0x1d1cc2(0x1e0)),promises_1=require(a74_0x1d1cc2(0x1f4)),job_detail_1=require('../../job-detail'),utils_1=require(a74_0x1d1cc2(0x1e8)),job_1=require('../../../../../constants/job');function a74_0x5906(){const _0x438a5a=['COMPLETED','259JKefOE','BaseLogger','jobState','readFile','FAILED','getJobState','filePath','apply','fs/promises','18217900tJVOjv','2DWSmSq','constructor','1234137fhYZcC','map','path','status','FsUtils','initObjectStatistics','stringify','setJobError','initJobState','JOB_LOG_STATE_FILENAME','_jobState','name','defineProperty','71440gTchrn','join','_jobId','setObjectStatus','__importDefault','84156fsxTTK','start','updateLoggerState','parse','writeFile','Cannot\x20find\x20object\x20\x27','JobStatus','search','getObjectState','(((.+)+)+)+$','1383975VnTIDX','completedDate','__esModule','213578dtYAZF','../../enums/logger.enums','LoggerJobState','init','Logger\x20Job\x20State\x20wasn\x27t\x20init','find','toString','default','setJobStatus','_jobPath','updateObjectProcess','./base-logger','write','_isLoggerInit','processed','895450llkzOn','4WUYozp','successful','isLoggerInit','@flosum/utils','jobStorePath','failed'];a74_0x5906=function(){return _0x438a5a;};return a74_0x5906();}class LoggerJobState extends base_logger_1[a74_0x1d1cc2(0x1ed)]{constructor(){const _0x28869d=a74_0x1d1cc2;super(...arguments),this[_0x28869d(0x1e2)]=![];}get[a74_0x1d1cc2(0x1e7)](){const _0x4cb902=a74_0x1d1cc2;return this[_0x4cb902(0x1e2)];}set['isLoggerInit'](_0x1aee02){const _0x30073e=a74_0x1d1cc2;this[_0x30073e(0x1e2)]=_0x1aee02;}get[a74_0x1d1cc2(0x1ee)](){const _0x175ee3=a74_0x1d1cc2;if(!this[_0x175ee3(0x1e7)])throw new Error(_0x175ee3(0x1d9));return this['_jobState'];}get[a74_0x1d1cc2(0x1f2)](){const _0x3db498=a74_0x1d1cc2;return path_1[_0x3db498(0x1dc)][_0x3db498(0x206)](this[_0x3db498(0x1de)],job_1[_0x3db498(0x201)]);}async[a74_0x1d1cc2(0x1d8)](_0x28efbb){const _0x5d43d5=a74_0x1d1cc2;return this['_jobState']=await this[_0x5d43d5(0x1f1)](),this[_0x5d43d5(0x202)][_0x5d43d5(0x1e3)]=this[_0x5d43d5(0x1fd)](_0x28efbb),await this[_0x5d43d5(0x1e1)](),await this[_0x5d43d5(0x20b)](),this[_0x5d43d5(0x1e7)]=!![],this;}[a74_0x1d1cc2(0x208)](_0x301385,_0x125fd4){const _0xc1266=a74_0x1d1cc2;this[_0xc1266(0x212)](_0x301385)[_0xc1266(0x1fb)]=_0x125fd4,this[_0xc1266(0x20c)]();}[a74_0x1d1cc2(0x1dd)](_0x8d922c){const _0x1da286=a74_0x1d1cc2;this['jobState']['status']=_0x8d922c,[logger_enums_1[_0x1da286(0x210)][_0x1da286(0x1f0)],logger_enums_1[_0x1da286(0x210)][_0x1da286(0x1eb)]]['includes'](_0x8d922c)&&(this[_0x1da286(0x1ee)][_0x1da286(0x1d3)]=new Date()['getTime']()),this[_0x1da286(0x20c)]();}[a74_0x1d1cc2(0x1ff)](_0x35767e){const _0x583b3c=a74_0x1d1cc2;this['jobState']['error']=_0x35767e,this[_0x583b3c(0x20c)]();}[a74_0x1d1cc2(0x1df)](_0x1ec6f6,_0x678a18,_0x33ccfd){const _0x3e8d28=a74_0x1d1cc2,_0x5b976a=this[_0x3e8d28(0x212)](_0x1ec6f6);_0x5b976a['successful']+=_0x678a18,_0x5b976a[_0x3e8d28(0x1ea)]+=_0x33ccfd,this[_0x3e8d28(0x1ee)][_0x3e8d28(0x1e6)]+=_0x678a18,this[_0x3e8d28(0x1ee)][_0x3e8d28(0x1ea)]+=_0x33ccfd,this[_0x3e8d28(0x20c)]();}[a74_0x1d1cc2(0x212)](_0x43f5a8){const _0x8aef65=a74_0x1d1cc2;var _0x470178;const _0x547606=(_0x470178=this[_0x8aef65(0x1ee)][_0x8aef65(0x1e3)])===null||_0x470178===void 0x0?void 0x0:_0x470178[_0x8aef65(0x1da)](_0x238a2a=>_0x238a2a[_0x8aef65(0x203)]===_0x43f5a8);if(!_0x547606)throw new Error(_0x8aef65(0x20f)+_0x43f5a8+'\x27\x20in\x20statistic');return _0x547606;}async[a74_0x1d1cc2(0x1f1)](){const _0x80c2e0=a74_0x1d1cc2;if(!await utils_1[_0x80c2e0(0x1fc)]['isExistsPath'](this[_0x80c2e0(0x1f2)]))return this[_0x80c2e0(0x200)]();const _0x4979d0=await(0x0,promises_1[_0x80c2e0(0x1ef)])(job_detail_1[_0x80c2e0(0x1e9)]+'/'+job_1[_0x80c2e0(0x201)],{'encoding':'utf-8'});return JSON[_0x80c2e0(0x20d)](_0x4979d0);}[a74_0x1d1cc2(0x200)](){const _0x523807=a74_0x1d1cc2;return{'id':this[_0x523807(0x207)],'status':logger_enums_1[_0x523807(0x210)]['QUEUED'],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x8cdbb0){const _0x251ff3=a74_0x1d1cc2;return _0x8cdbb0[_0x251ff3(0x1f9)](_0x308f9b=>({'name':_0x308f9b,'status':logger_enums_1['ObjectStatus']['QUEUED'],'failed':0x0,'successful':0x0}));}[a74_0x1d1cc2(0x1e1)](){const _0x2ca6ed=a74_0x1d1cc2;return(0x0,promises_1[_0x2ca6ed(0x20e)])(this['filePath'],JSON[_0x2ca6ed(0x1fe)](this[_0x2ca6ed(0x202)]));}}function a74_0x1f0c(_0x30cba3,_0x514517){const _0x233a23=a74_0x5906();return a74_0x1f0c=function(_0x5ca174,_0x4c3c30){_0x5ca174=_0x5ca174-0x1d2;let _0x5906f3=_0x233a23[_0x5ca174];return _0x5906f3;},a74_0x1f0c(_0x30cba3,_0x514517);}exports[a74_0x1d1cc2(0x1d7)]=LoggerJobState;