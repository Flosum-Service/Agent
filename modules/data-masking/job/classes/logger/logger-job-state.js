const a58_0x11452e=a58_0x2d0c;(function(_0x376a53,_0x3d7230){const _0xb82340=a58_0x2d0c,_0xf81d6c=_0x376a53();while(!![]){try{const _0x18ebed=parseInt(_0xb82340(0xf4))/0x1*(parseInt(_0xb82340(0xf5))/0x2)+-parseInt(_0xb82340(0x105))/0x3+parseInt(_0xb82340(0x104))/0x4*(-parseInt(_0xb82340(0xeb))/0x5)+-parseInt(_0xb82340(0x103))/0x6*(parseInt(_0xb82340(0xed))/0x7)+-parseInt(_0xb82340(0xfd))/0x8*(parseInt(_0xb82340(0xd3))/0x9)+-parseInt(_0xb82340(0xf9))/0xa*(parseInt(_0xb82340(0xea))/0xb)+-parseInt(_0xb82340(0xc6))/0xc*(-parseInt(_0xb82340(0xdd))/0xd);if(_0x18ebed===_0x3d7230)break;else _0xf81d6c['push'](_0xf81d6c['shift']());}catch(_0x1d55a7){_0xf81d6c['push'](_0xf81d6c['shift']());}}}(a58_0x574f,0x58863));function a58_0x574f(){const _0x4531ef=['setJobError','getJobState','fs/promises','isExistsPath','2971845xidEKR','../../job-detail','includes','\x27\x20in\x20statistic','parse','__importDefault','_jobId','filePath','map','path','3619200BvGLdB','_isLoggerInit','search','@flosum/utils','successful','(((.+)+)+)+$','default','setJobStatus','../../../../../constants/job','_jobState','toString','JOB_LOG_STATE_FILENAME','initJobState','11pIGsWf','245mqegBn','readFile','4866687dAGVjf','LoggerJobState','COMPLETED','./base-logger','jobState','completedDate','isLoggerInit','144638sXiIuA','6sXsCqC','join','__esModule','updateObjectProcess','2026130BErYvD','QUEUED','Logger\x20Job\x20State\x20wasn\x27t\x20init','utf-8','8mAwpXk','initObjectStatistics','updateLoggerState','ObjectStatus','failed','getObjectState','6SdjgJw','35980oGsbIM','218715qrWLlG','getTime','error','72ofTNxy','../../enums/logger.enums','find','status','defineProperty','processed','constructor','JobStatus','start'];a58_0x574f=function(){return _0x4531ef;};return a58_0x574f();}function a58_0x2d0c(_0x4ebaa0,_0x23b83e){const _0x1004e3=a58_0x574f();return a58_0x2d0c=function(_0x1af5c1,_0x304830){_0x1af5c1=_0x1af5c1-0xc6;let _0x574f22=_0x1004e3[_0x1af5c1];return _0x574f22;},a58_0x2d0c(_0x4ebaa0,_0x23b83e);}const a58_0x304830=(function(){let _0xc02d37=!![];return function(_0x2a8f72,_0x3e8d79){const _0x480b1b=_0xc02d37?function(){if(_0x3e8d79){const _0x68994a=_0x3e8d79['apply'](_0x2a8f72,arguments);return _0x3e8d79=null,_0x68994a;}}:function(){};return _0xc02d37=![],_0x480b1b;};}()),a58_0x1af5c1=a58_0x304830(this,function(){const _0x45d09c=a58_0x2d0c;return a58_0x1af5c1[_0x45d09c(0xe7)]()[_0x45d09c(0xdf)](_0x45d09c(0xe2))['toString']()[_0x45d09c(0xcc)](a58_0x1af5c1)['search'](_0x45d09c(0xe2));});a58_0x1af5c1();'use strict';var __importDefault=this&&this[a58_0x11452e(0xd8)]||function(_0x373461){const _0x1ba8ec=a58_0x11452e;return _0x373461&&_0x373461[_0x1ba8ec(0xf7)]?_0x373461:{'default':_0x373461};};Object[a58_0x11452e(0xca)](exports,'__esModule',{'value':!![]}),exports[a58_0x11452e(0xee)]=void 0x0;const path_1=__importDefault(require(a58_0x11452e(0xdc))),logger_enums_1=require(a58_0x11452e(0xc7)),base_logger_1=require(a58_0x11452e(0xf0)),promises_1=require(a58_0x11452e(0xd1)),job_detail_1=require(a58_0x11452e(0xd4)),utils_1=require(a58_0x11452e(0xe0)),job_1=require(a58_0x11452e(0xe5));class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){super(...arguments),this['_isLoggerInit']=![];}get[a58_0x11452e(0xf3)](){const _0x41ef58=a58_0x11452e;return this[_0x41ef58(0xde)];}set[a58_0x11452e(0xf3)](_0x2bee4f){const _0xe3d866=a58_0x11452e;this[_0xe3d866(0xde)]=_0x2bee4f;}get['jobState'](){const _0x415aa0=a58_0x11452e;if(!this[_0x415aa0(0xf3)])throw new Error(_0x415aa0(0xfb));return this[_0x415aa0(0xe6)];}get['filePath'](){const _0x48c1d2=a58_0x11452e;return path_1[_0x48c1d2(0xe3)][_0x48c1d2(0xf6)](this['_jobPath'],job_1[_0x48c1d2(0xe8)]);}async['init'](_0x4c5627){const _0x1fa15c=a58_0x11452e;return this[_0x1fa15c(0xe6)]=await this[_0x1fa15c(0xd0)](),this[_0x1fa15c(0xe6)][_0x1fa15c(0xcb)]=this[_0x1fa15c(0xfe)](_0x4c5627),await this['write'](),await this[_0x1fa15c(0xce)](),this[_0x1fa15c(0xf3)]=!![],this;}['setObjectStatus'](_0x3dfa1f,_0x37afba){const _0x1f56b4=a58_0x11452e;this['getObjectState'](_0x3dfa1f)['status']=_0x37afba,this[_0x1f56b4(0xff)]();}[a58_0x11452e(0xe4)](_0x3300e9){const _0x4f4819=a58_0x11452e;this[_0x4f4819(0xf1)][_0x4f4819(0xc9)]=_0x3300e9,[logger_enums_1[_0x4f4819(0xcd)]['FAILED'],logger_enums_1['JobStatus'][_0x4f4819(0xef)]][_0x4f4819(0xd5)](_0x3300e9)&&(this['jobState'][_0x4f4819(0xf2)]=new Date()['getTime']()),this['updateLoggerState']();}[a58_0x11452e(0xcf)](_0x3d8de5){const _0xcf59a3=a58_0x11452e;this[_0xcf59a3(0xf1)][_0xcf59a3(0x107)]=_0x3d8de5,this[_0xcf59a3(0xff)]();}[a58_0x11452e(0xf8)](_0x1effa5,_0x1351b1,_0x44d0a5){const _0x347b46=a58_0x11452e,_0x2ff8fc=this['getObjectState'](_0x1effa5);_0x2ff8fc[_0x347b46(0xe1)]+=_0x1351b1,_0x2ff8fc[_0x347b46(0x101)]+=_0x44d0a5,this['jobState'][_0x347b46(0xe1)]+=_0x1351b1,this[_0x347b46(0xf1)][_0x347b46(0x101)]+=_0x44d0a5,this[_0x347b46(0xff)]();}[a58_0x11452e(0x102)](_0x3130cf){const _0xff7947=a58_0x11452e;var _0x1dd04f;const _0x139232=(_0x1dd04f=this['jobState'][_0xff7947(0xcb)])===null||_0x1dd04f===void 0x0?void 0x0:_0x1dd04f[_0xff7947(0xc8)](_0x4cfb8d=>_0x4cfb8d['name']===_0x3130cf);if(!_0x139232)throw new Error('Cannot\x20find\x20object\x20\x27'+_0x3130cf+_0xff7947(0xd6));return _0x139232;}async['getJobState'](){const _0x59a29c=a58_0x11452e;if(!await utils_1['FsUtils'][_0x59a29c(0xd2)](this[_0x59a29c(0xda)]))return this[_0x59a29c(0xe9)]();const _0x29c91c=await(0x0,promises_1[_0x59a29c(0xec)])(job_detail_1['jobStorePath']+'/'+job_1[_0x59a29c(0xe8)],{'encoding':_0x59a29c(0xfc)});return JSON[_0x59a29c(0xd7)](_0x29c91c);}[a58_0x11452e(0xe9)](){const _0xfc1bc1=a58_0x11452e;return{'id':this[_0xfc1bc1(0xd9)],'status':logger_enums_1['JobStatus'][_0xfc1bc1(0xfa)],'processed':[],'createdDate':new Date()[_0xfc1bc1(0x106)](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x506a17){const _0xe11f06=a58_0x11452e;return _0x506a17[_0xe11f06(0xdb)](_0x419691=>({'name':_0x419691,'status':logger_enums_1[_0xe11f06(0x100)][_0xe11f06(0xfa)],'failed':0x0,'successful':0x0}));}['write'](){const _0x27f5f9=a58_0x11452e;return(0x0,promises_1['writeFile'])(this[_0x27f5f9(0xda)],JSON['stringify'](this['_jobState']));}}exports[a58_0x11452e(0xee)]=LoggerJobState;