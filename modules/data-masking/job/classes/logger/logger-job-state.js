const a58_0x3e9052=a58_0x5e72;(function(_0x3245d6,_0x1ca19f){const _0x7a86ec=a58_0x5e72,_0x3e14ab=_0x3245d6();while(!![]){try{const _0x83a541=-parseInt(_0x7a86ec(0x180))/0x1*(-parseInt(_0x7a86ec(0x182))/0x2)+parseInt(_0x7a86ec(0x162))/0x3+parseInt(_0x7a86ec(0x156))/0x4*(parseInt(_0x7a86ec(0x184))/0x5)+-parseInt(_0x7a86ec(0x14d))/0x6*(-parseInt(_0x7a86ec(0x175))/0x7)+parseInt(_0x7a86ec(0x178))/0x8+parseInt(_0x7a86ec(0x18a))/0x9+-parseInt(_0x7a86ec(0x17c))/0xa;if(_0x83a541===_0x1ca19f)break;else _0x3e14ab['push'](_0x3e14ab['shift']());}catch(_0x499be0){_0x3e14ab['push'](_0x3e14ab['shift']());}}}(a58_0x3488,0x660d8));const a58_0x5c64d0=(function(){let _0x277a76=!![];return function(_0x2563c7,_0x3ed20d){const _0x8f50dc=_0x277a76?function(){if(_0x3ed20d){const _0x27bc4c=_0x3ed20d['apply'](_0x2563c7,arguments);return _0x3ed20d=null,_0x27bc4c;}}:function(){};return _0x277a76=![],_0x8f50dc;};}()),a58_0x12f896=a58_0x5c64d0(this,function(){const _0x31db74=a58_0x5e72;return a58_0x12f896[_0x31db74(0x183)]()[_0x31db74(0x155)](_0x31db74(0x179))[_0x31db74(0x183)]()[_0x31db74(0x160)](a58_0x12f896)[_0x31db74(0x155)](_0x31db74(0x179));});a58_0x12f896();'use strict';var __importDefault=this&&this[a58_0x3e9052(0x14e)]||function(_0x133184){const _0x5a5dad=a58_0x3e9052;return _0x133184&&_0x133184[_0x5a5dad(0x16d)]?_0x133184:{'default':_0x133184};};function a58_0x3488(){const _0x3d2035=['toString','5eEzXVs','_jobPath','map','setObjectStatus','_jobId','init','7177347QouZyy','write','getObjectState','initObjectStatistics','updateObjectProcess','join','FsUtils','582EOurrR','__importDefault','readFile','status','../../job-detail','path','../../../../../constants/job','includes','search','1688548oUeexR','setJobError','jobState','processed','start','COMPLETED','writeFile','defineProperty','getJobState','JobStatus','constructor','filePath','454443tBKpOA','isExistsPath','jobStorePath','parse','QUEUED','BaseLogger','fs/promises','getTime','LoggerJobState','failed','default','__esModule','@flosum/utils','FAILED','JOB_LOG_STATE_FILENAME','./base-logger','updateLoggerState','isLoggerInit','_isLoggerInit','27545gtsDHk','completedDate','ObjectStatus','5426096emRkRF','(((.+)+)+)+$','_jobState','utf-8','24792280pXtyuW','find','Logger\x20Job\x20State\x20wasn\x27t\x20init','name','233089YTkUNt','initJobState','4svOuQa'];a58_0x3488=function(){return _0x3d2035;};return a58_0x3488();}function a58_0x5e72(_0x3ff80f,_0x1c7012){const _0x188414=a58_0x3488();return a58_0x5e72=function(_0x12f896,_0x5c64d0){_0x12f896=_0x12f896-0x147;let _0x3488e6=_0x188414[_0x12f896];return _0x3488e6;},a58_0x5e72(_0x3ff80f,_0x1c7012);}Object[a58_0x3e9052(0x15d)](exports,a58_0x3e9052(0x16d),{'value':!![]}),exports[a58_0x3e9052(0x16a)]=void 0x0;const path_1=__importDefault(require(a58_0x3e9052(0x152))),logger_enums_1=require('../../enums/logger.enums'),base_logger_1=require(a58_0x3e9052(0x171)),promises_1=require(a58_0x3e9052(0x168)),job_detail_1=require(a58_0x3e9052(0x151)),utils_1=require(a58_0x3e9052(0x16e)),job_1=require(a58_0x3e9052(0x153));class LoggerJobState extends base_logger_1[a58_0x3e9052(0x167)]{constructor(){const _0x3eda2a=a58_0x3e9052;super(...arguments),this[_0x3eda2a(0x174)]=![];}get[a58_0x3e9052(0x173)](){const _0x198028=a58_0x3e9052;return this[_0x198028(0x174)];}set['isLoggerInit'](_0x541cf7){const _0x21d22a=a58_0x3e9052;this[_0x21d22a(0x174)]=_0x541cf7;}get[a58_0x3e9052(0x158)](){const _0x126e45=a58_0x3e9052;if(!this[_0x126e45(0x173)])throw new Error(_0x126e45(0x17e));return this[_0x126e45(0x17a)];}get[a58_0x3e9052(0x161)](){const _0x35f147=a58_0x3e9052;return path_1[_0x35f147(0x16c)][_0x35f147(0x14b)](this[_0x35f147(0x185)],job_1['JOB_LOG_STATE_FILENAME']);}async[a58_0x3e9052(0x189)](_0x46a4a8){const _0x2d0113=a58_0x3e9052;return this[_0x2d0113(0x17a)]=await this[_0x2d0113(0x15e)](),this[_0x2d0113(0x17a)][_0x2d0113(0x159)]=this[_0x2d0113(0x149)](_0x46a4a8),await this[_0x2d0113(0x147)](),await this[_0x2d0113(0x15a)](),this['isLoggerInit']=!![],this;}[a58_0x3e9052(0x187)](_0x11cc20,_0x4daf53){const _0x5a1633=a58_0x3e9052;this[_0x5a1633(0x148)](_0x11cc20)['status']=_0x4daf53,this['updateLoggerState']();}['setJobStatus'](_0x55dc32){const _0x2c92bc=a58_0x3e9052;this[_0x2c92bc(0x158)][_0x2c92bc(0x150)]=_0x55dc32,[logger_enums_1[_0x2c92bc(0x15f)][_0x2c92bc(0x16f)],logger_enums_1[_0x2c92bc(0x15f)][_0x2c92bc(0x15b)]][_0x2c92bc(0x154)](_0x55dc32)&&(this[_0x2c92bc(0x158)][_0x2c92bc(0x176)]=new Date()['getTime']()),this[_0x2c92bc(0x172)]();}[a58_0x3e9052(0x157)](_0x19fff2){const _0x2b382d=a58_0x3e9052;this[_0x2b382d(0x158)]['error']=_0x19fff2,this[_0x2b382d(0x172)]();}[a58_0x3e9052(0x14a)](_0xe0e31c,_0x5f2494,_0x545dd2){const _0x580d06=a58_0x3e9052,_0x39bdc7=this[_0x580d06(0x148)](_0xe0e31c);_0x39bdc7['successful']+=_0x5f2494,_0x39bdc7[_0x580d06(0x16b)]+=_0x545dd2,this[_0x580d06(0x158)]['successful']+=_0x5f2494,this[_0x580d06(0x158)][_0x580d06(0x16b)]+=_0x545dd2,this[_0x580d06(0x172)]();}[a58_0x3e9052(0x148)](_0x383fb2){const _0x420702=a58_0x3e9052;var _0x43c15d;const _0x281b4d=(_0x43c15d=this['jobState'][_0x420702(0x159)])===null||_0x43c15d===void 0x0?void 0x0:_0x43c15d[_0x420702(0x17d)](_0x58dd4e=>_0x58dd4e[_0x420702(0x17f)]===_0x383fb2);if(!_0x281b4d)throw new Error('Cannot\x20find\x20object\x20\x27'+_0x383fb2+'\x27\x20in\x20statistic');return _0x281b4d;}async[a58_0x3e9052(0x15e)](){const _0x46d1c0=a58_0x3e9052;if(!await utils_1[_0x46d1c0(0x14c)][_0x46d1c0(0x163)](this[_0x46d1c0(0x161)]))return this['initJobState']();const _0x38035e=await(0x0,promises_1[_0x46d1c0(0x14f)])(job_detail_1[_0x46d1c0(0x164)]+'/'+job_1[_0x46d1c0(0x170)],{'encoding':_0x46d1c0(0x17b)});return JSON[_0x46d1c0(0x165)](_0x38035e);}[a58_0x3e9052(0x181)](){const _0xbb9dbf=a58_0x3e9052;return{'id':this[_0xbb9dbf(0x188)],'status':logger_enums_1[_0xbb9dbf(0x15f)][_0xbb9dbf(0x166)],'processed':[],'createdDate':new Date()[_0xbb9dbf(0x169)](),'successful':0x0,'failed':0x0};}[a58_0x3e9052(0x149)](_0x5c7cb6){const _0x599888=a58_0x3e9052;return _0x5c7cb6[_0x599888(0x186)](_0x1389d2=>({'name':_0x1389d2,'status':logger_enums_1[_0x599888(0x177)][_0x599888(0x166)],'failed':0x0,'successful':0x0}));}['write'](){const _0x19270c=a58_0x3e9052;return(0x0,promises_1[_0x19270c(0x15c)])(this[_0x19270c(0x161)],JSON['stringify'](this[_0x19270c(0x17a)]));}}exports[a58_0x3e9052(0x16a)]=LoggerJobState;