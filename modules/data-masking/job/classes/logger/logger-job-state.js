const a57_0x4af3b0=a57_0x3a4b;(function(_0x9b7e73,_0x22146b){const _0x2f5b1a=a57_0x3a4b,_0x3dfe2c=_0x9b7e73();while(!![]){try{const _0x3456b4=parseInt(_0x2f5b1a(0x155))/0x1*(parseInt(_0x2f5b1a(0x16d))/0x2)+-parseInt(_0x2f5b1a(0x15b))/0x3*(parseInt(_0x2f5b1a(0x167))/0x4)+parseInt(_0x2f5b1a(0x191))/0x5*(parseInt(_0x2f5b1a(0x16c))/0x6)+parseInt(_0x2f5b1a(0x18e))/0x7+-parseInt(_0x2f5b1a(0x153))/0x8*(-parseInt(_0x2f5b1a(0x165))/0x9)+-parseInt(_0x2f5b1a(0x16a))/0xa*(parseInt(_0x2f5b1a(0x189))/0xb)+-parseInt(_0x2f5b1a(0x15c))/0xc*(parseInt(_0x2f5b1a(0x190))/0xd);if(_0x3456b4===_0x22146b)break;else _0x3dfe2c['push'](_0x3dfe2c['shift']());}catch(_0x267398){_0x3dfe2c['push'](_0x3dfe2c['shift']());}}}(a57_0x63ee,0xedcdc));const a57_0x1ff450=(function(){let _0x37f8a3=!![];return function(_0x2d9d17,_0xc992cb){const _0x39174d=_0x37f8a3?function(){const _0x39dabf=a57_0x3a4b;if(_0xc992cb){const _0x34cccf=_0xc992cb[_0x39dabf(0x172)](_0x2d9d17,arguments);return _0xc992cb=null,_0x34cccf;}}:function(){};return _0x37f8a3=![],_0x39174d;};}()),a57_0x1f3138=a57_0x1ff450(this,function(){const _0x16b4fe=a57_0x3a4b;return a57_0x1f3138[_0x16b4fe(0x18a)]()[_0x16b4fe(0x187)](_0x16b4fe(0x15e))[_0x16b4fe(0x18a)]()[_0x16b4fe(0x179)](a57_0x1f3138)[_0x16b4fe(0x187)](_0x16b4fe(0x15e));});function a57_0x3a4b(_0x1aaa89,_0xed2e96){const _0x6683c7=a57_0x63ee();return a57_0x3a4b=function(_0x1f3138,_0x1ff450){_0x1f3138=_0x1f3138-0x150;let _0x63eeef=_0x6683c7[_0x1f3138];return _0x63eeef;},a57_0x3a4b(_0x1aaa89,_0xed2e96);}a57_0x1f3138();'use strict';var __importDefault=this&&this[a57_0x4af3b0(0x17b)]||function(_0x4a1d68){const _0x369a23=a57_0x4af3b0;return _0x4a1d68&&_0x4a1d68[_0x369a23(0x15f)]?_0x4a1d68:{'default':_0x4a1d68};};Object['defineProperty'](exports,a57_0x4af3b0(0x15f),{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a57_0x4af3b0(0x173))),logger_enums_1=require(a57_0x4af3b0(0x188)),base_logger_1=require(a57_0x4af3b0(0x158)),promises_1=require('fs/promises'),job_detail_1=require(a57_0x4af3b0(0x18d)),utils_1=require(a57_0x4af3b0(0x150)),job_1=require('../../../../../constants/job');class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){const _0x2bad70=a57_0x4af3b0;super(...arguments),this[_0x2bad70(0x180)]=![];}get[a57_0x4af3b0(0x16f)](){const _0x2d5c8a=a57_0x4af3b0;return this[_0x2d5c8a(0x180)];}set[a57_0x4af3b0(0x16f)](_0x651e2a){this['_isLoggerInit']=_0x651e2a;}get[a57_0x4af3b0(0x185)](){const _0x9e58f9=a57_0x4af3b0;if(!this['isLoggerInit'])throw new Error(_0x9e58f9(0x181));return this[_0x9e58f9(0x154)];}get[a57_0x4af3b0(0x159)](){const _0x5a8c42=a57_0x4af3b0;return path_1['default']['join'](this[_0x5a8c42(0x186)],job_1['JOB_LOG_STATE_FILENAME']);}async['init'](_0x90eaa6){const _0x561abb=a57_0x4af3b0;return this[_0x561abb(0x154)]=await this[_0x561abb(0x182)](),this[_0x561abb(0x154)][_0x561abb(0x17e)]=this[_0x561abb(0x161)](_0x90eaa6),await this[_0x561abb(0x177)](),await this[_0x561abb(0x157)](),this[_0x561abb(0x16f)]=!![],this;}[a57_0x4af3b0(0x175)](_0x26fb00,_0x284c28){const _0x125099=a57_0x4af3b0;this[_0x125099(0x16e)](_0x26fb00)[_0x125099(0x152)]=_0x284c28,this[_0x125099(0x171)]();}[a57_0x4af3b0(0x17a)](_0x4354e2){const _0x4cbf43=a57_0x4af3b0;this[_0x4cbf43(0x185)][_0x4cbf43(0x152)]=_0x4354e2,[logger_enums_1['JobStatus'][_0x4cbf43(0x18f)],logger_enums_1[_0x4cbf43(0x151)][_0x4cbf43(0x162)]][_0x4cbf43(0x166)](_0x4354e2)&&(this[_0x4cbf43(0x185)][_0x4cbf43(0x192)]=new Date()['getTime']()),this[_0x4cbf43(0x171)]();}[a57_0x4af3b0(0x168)](_0x217b5c){const _0x548317=a57_0x4af3b0;this[_0x548317(0x185)][_0x548317(0x15d)]=_0x217b5c,this[_0x548317(0x171)]();}[a57_0x4af3b0(0x176)](_0xa8e8df,_0x21ab59,_0x1b88c3){const _0xc05a4c=a57_0x4af3b0,_0x13de7a=this[_0xc05a4c(0x16e)](_0xa8e8df);_0x13de7a[_0xc05a4c(0x160)]+=_0x21ab59,_0x13de7a['failed']+=_0x1b88c3,this['jobState'][_0xc05a4c(0x160)]+=_0x21ab59,this[_0xc05a4c(0x185)][_0xc05a4c(0x178)]+=_0x1b88c3,this[_0xc05a4c(0x171)]();}[a57_0x4af3b0(0x16e)](_0x11d8f6){const _0x5e48c6=a57_0x4af3b0;var _0x4778b9;const _0x2d7551=(_0x4778b9=this[_0x5e48c6(0x185)][_0x5e48c6(0x17e)])===null||_0x4778b9===void 0x0?void 0x0:_0x4778b9[_0x5e48c6(0x169)](_0x5c09f0=>_0x5c09f0[_0x5e48c6(0x16b)]===_0x11d8f6);if(!_0x2d7551)throw new Error(_0x5e48c6(0x163)+_0x11d8f6+_0x5e48c6(0x174));return _0x2d7551;}async[a57_0x4af3b0(0x182)](){const _0x14e3e3=a57_0x4af3b0;if(!await utils_1['FsUtils']['isExistsPath'](this['filePath']))return this[_0x14e3e3(0x15a)]();const _0x8a9104=await(0x0,promises_1[_0x14e3e3(0x18c)])(job_detail_1['jobStorePath']+'/'+job_1[_0x14e3e3(0x17f)],{'encoding':_0x14e3e3(0x170)});return JSON[_0x14e3e3(0x183)](_0x8a9104);}[a57_0x4af3b0(0x15a)](){const _0x4b0675=a57_0x4af3b0;return{'id':this[_0x4b0675(0x156)],'status':logger_enums_1[_0x4b0675(0x151)][_0x4b0675(0x164)],'processed':[],'createdDate':new Date()[_0x4b0675(0x18b)](),'successful':0x0,'failed':0x0};}[a57_0x4af3b0(0x161)](_0x1d4808){const _0x336dd1=a57_0x4af3b0;return _0x1d4808['map'](_0x4b217b=>({'name':_0x4b217b,'status':logger_enums_1[_0x336dd1(0x17c)]['QUEUED'],'failed':0x0,'successful':0x0}));}[a57_0x4af3b0(0x177)](){const _0x1e1ddb=a57_0x4af3b0;return(0x0,promises_1[_0x1e1ddb(0x184)])(this[_0x1e1ddb(0x159)],JSON[_0x1e1ddb(0x17d)](this[_0x1e1ddb(0x154)]));}}function a57_0x63ee(){const _0x2b44d9=['Cannot\x20find\x20object\x20\x27','QUEUED','7416sEeaNX','includes','184EGfrmr','setJobError','find','10VlvesF','name','174wzlbxQ','28jafrce','getObjectState','isLoggerInit','utf-8','updateLoggerState','apply','path','\x27\x20in\x20statistic','setObjectStatus','updateObjectProcess','write','failed','constructor','setJobStatus','__importDefault','ObjectStatus','stringify','processed','JOB_LOG_STATE_FILENAME','_isLoggerInit','Logger\x20Job\x20State\x20wasn\x27t\x20init','getJobState','parse','writeFile','jobState','_jobPath','search','../../enums/logger.enums','18043905ffnNgL','toString','getTime','readFile','../../job-detail','10983553rYgrXO','FAILED','55081fTUuQh','305215sQpCak','completedDate','@flosum/utils','JobStatus','status','3328piFjMT','_jobState','84317zqAjQd','_jobId','start','./base-logger','filePath','initJobState','22548nbZErG','5388dYlcIr','error','(((.+)+)+)+$','__esModule','successful','initObjectStatistics','COMPLETED'];a57_0x63ee=function(){return _0x2b44d9;};return a57_0x63ee();}exports['LoggerJobState']=LoggerJobState;