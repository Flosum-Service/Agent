const a57_0x4313b1=a57_0xd850;(function(_0x97b6f0,_0x51350d){const _0x3a1d04=a57_0xd850,_0x1ac5d0=_0x97b6f0();while(!![]){try{const _0x2da96e=parseInt(_0x3a1d04(0xe7))/0x1*(parseInt(_0x3a1d04(0xf0))/0x2)+-parseInt(_0x3a1d04(0xf7))/0x3+parseInt(_0x3a1d04(0x101))/0x4+parseInt(_0x3a1d04(0xd8))/0x5+-parseInt(_0x3a1d04(0xd6))/0x6+parseInt(_0x3a1d04(0xf8))/0x7+-parseInt(_0x3a1d04(0xd2))/0x8;if(_0x2da96e===_0x51350d)break;else _0x1ac5d0['push'](_0x1ac5d0['shift']());}catch(_0x5a2f3c){_0x1ac5d0['push'](_0x1ac5d0['shift']());}}}(a57_0x3e33,0xc6d2a));const a57_0xd52b26=(function(){let _0x464e34=!![];return function(_0xac1db8,_0x4d8568){const _0x161208=_0x464e34?function(){if(_0x4d8568){const _0x6d95b6=_0x4d8568['apply'](_0xac1db8,arguments);return _0x4d8568=null,_0x6d95b6;}}:function(){};return _0x464e34=![],_0x161208;};}()),a57_0x32715a=a57_0xd52b26(this,function(){const _0x4da64c=a57_0xd850;return a57_0x32715a[_0x4da64c(0xc9)]()[_0x4da64c(0xde)](_0x4da64c(0xd1))['toString']()[_0x4da64c(0xcd)](a57_0x32715a)[_0x4da64c(0xde)](_0x4da64c(0xd1));});a57_0x32715a();'use strict';var __importDefault=this&&this[a57_0x4313b1(0xec)]||function(_0x119bab){const _0x2dd4ef=a57_0x4313b1;return _0x119bab&&_0x119bab[_0x2dd4ef(0xdd)]?_0x119bab:{'default':_0x119bab};};Object[a57_0x4313b1(0x100)](exports,a57_0x4313b1(0xdd),{'value':!![]}),exports[a57_0x4313b1(0xd3)]=void 0x0;function a57_0xd850(_0x58ae87,_0x99349c){const _0x158cc9=a57_0x3e33();return a57_0xd850=function(_0x32715a,_0xd52b26){_0x32715a=_0x32715a-0xc6;let _0x3e33a9=_0x158cc9[_0x32715a];return _0x3e33a9;},a57_0xd850(_0x58ae87,_0x99349c);}const path_1=__importDefault(require(a57_0x4313b1(0xfb))),logger_enums_1=require(a57_0x4313b1(0x103)),base_logger_1=require(a57_0x4313b1(0xf9)),promises_1=require(a57_0x4313b1(0xdc)),job_detail_1=require(a57_0x4313b1(0xe2)),utils_1=require(a57_0x4313b1(0xc8)),job_1=require(a57_0x4313b1(0x105));class LoggerJobState extends base_logger_1[a57_0x4313b1(0xee)]{constructor(){super(...arguments),this['_isLoggerInit']=![];}get['isLoggerInit'](){const _0x156b1c=a57_0x4313b1;return this[_0x156b1c(0xfe)];}set[a57_0x4313b1(0x104)](_0x14d498){const _0x57e550=a57_0x4313b1;this[_0x57e550(0xfe)]=_0x14d498;}get[a57_0x4313b1(0xeb)](){const _0x147455=a57_0x4313b1;if(!this[_0x147455(0x104)])throw new Error(_0x147455(0xd0));return this[_0x147455(0xc6)];}get[a57_0x4313b1(0xed)](){const _0x2445d2=a57_0x4313b1;return path_1[_0x2445d2(0xd4)][_0x2445d2(0xfd)](this['_jobPath'],job_1[_0x2445d2(0xf2)]);}async[a57_0x4313b1(0xfa)](_0x1e0019){const _0x4ec436=a57_0x4313b1;return this['_jobState']=await this[_0x4ec436(0xe8)](),this[_0x4ec436(0xc6)][_0x4ec436(0xe3)]=this[_0x4ec436(0xf1)](_0x1e0019),await this['write'](),await this['start'](),this[_0x4ec436(0x104)]=!![],this;}[a57_0x4313b1(0xd5)](_0x379617,_0x5a2a28){const _0x14dbe2=a57_0x4313b1;this[_0x14dbe2(0xc7)](_0x379617)[_0x14dbe2(0xcf)]=_0x5a2a28,this['updateLoggerState']();}['setJobStatus'](_0x2e6ebd){const _0x292deb=a57_0x4313b1;this[_0x292deb(0xeb)][_0x292deb(0xcf)]=_0x2e6ebd,[logger_enums_1[_0x292deb(0xf6)][_0x292deb(0xf5)],logger_enums_1[_0x292deb(0xf6)][_0x292deb(0xca)]]['includes'](_0x2e6ebd)&&(this[_0x292deb(0xeb)]['completedDate']=new Date()[_0x292deb(0xcb)]()),this[_0x292deb(0xda)]();}[a57_0x4313b1(0xe1)](_0x3c5f46){const _0x1b59b4=a57_0x4313b1;this[_0x1b59b4(0xeb)]['error']=_0x3c5f46,this[_0x1b59b4(0xda)]();}[a57_0x4313b1(0x106)](_0x2255d4,_0x4bbd67,_0x1cb3ae){const _0x4695d9=a57_0x4313b1,_0x514d65=this[_0x4695d9(0xc7)](_0x2255d4);_0x514d65[_0x4695d9(0x102)]+=_0x4bbd67,_0x514d65[_0x4695d9(0xe0)]+=_0x1cb3ae,this[_0x4695d9(0xda)]();}[a57_0x4313b1(0xc7)](_0xa564e4){const _0x885349=a57_0x4313b1;var _0x469bbc;const _0xf07b4a=(_0x469bbc=this['jobState'][_0x885349(0xe3)])===null||_0x469bbc===void 0x0?void 0x0:_0x469bbc[_0x885349(0xff)](_0x156681=>_0x156681[_0x885349(0xfc)]===_0xa564e4);if(!_0xf07b4a)throw new Error(_0x885349(0xe4)+_0xa564e4+_0x885349(0xe9));return _0xf07b4a;}async[a57_0x4313b1(0xe8)](){const _0x233cf1=a57_0x4313b1;if(!await utils_1[_0x233cf1(0xd7)]['isExistsPath'](this[_0x233cf1(0xed)]))return this[_0x233cf1(0xdf)]();const _0xe035f6=await(0x0,promises_1[_0x233cf1(0xd9)])(job_detail_1[_0x233cf1(0xcc)]+'/'+job_1[_0x233cf1(0xf2)],{'encoding':'utf-8'});return JSON[_0x233cf1(0xe5)](_0xe035f6);}[a57_0x4313b1(0xdf)](){const _0x1d9155=a57_0x4313b1;return{'id':this[_0x1d9155(0xf3)],'status':logger_enums_1[_0x1d9155(0xf6)][_0x1d9155(0xf4)],'processed':[],'createdDate':new Date()['getTime']()};}[a57_0x4313b1(0xf1)](_0x52bf47){const _0xcb8ef5=a57_0x4313b1;return _0x52bf47[_0xcb8ef5(0xce)](_0x1b6f7a=>({'name':_0x1b6f7a,'status':logger_enums_1[_0xcb8ef5(0xe6)]['QUEUED'],'failed':0x0,'successful':0x0}));}[a57_0x4313b1(0xef)](){const _0x390554=a57_0x4313b1;return(0x0,promises_1[_0x390554(0xdb)])(this[_0x390554(0xed)],JSON[_0x390554(0xea)](this[_0x390554(0xc6)]));}}function a57_0x3e33(){const _0x8407ac=['./base-logger','init','path','name','join','_isLoggerInit','find','defineProperty','6169776SjWsto','successful','../../enums/logger.enums','isLoggerInit','../../../../../constants/job','updateObjectProcess','_jobState','getObjectState','@flosum/utils','toString','COMPLETED','getTime','jobStorePath','constructor','map','status','Logger\x20Job\x20State\x20wasn\x27t\x20init','(((.+)+)+)+$','18528712svdJSe','LoggerJobState','default','setObjectStatus','4273524bepxYS','FsUtils','8115575qRPOtm','readFile','updateLoggerState','writeFile','fs/promises','__esModule','search','initJobState','failed','setJobError','../../job-detail','processed','Cannot\x20find\x20object\x20\x27','parse','ObjectStatus','2030NFDMxZ','getJobState','\x27\x20in\x20statistic','stringify','jobState','__importDefault','filePath','BaseLogger','write','382eOBWxx','initObjectStatistics','JOB_LOG_STATE_FILENAME','_jobId','QUEUED','FAILED','JobStatus','338436DDWglF','2815708vrYALK'];a57_0x3e33=function(){return _0x8407ac;};return a57_0x3e33();}exports[a57_0x4313b1(0xd3)]=LoggerJobState;