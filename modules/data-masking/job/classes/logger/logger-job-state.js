const a74_0x1c7198=a74_0x21aa;(function(_0x5515fe,_0x1f0204){const _0x29f57f=a74_0x21aa,_0x32ae0c=_0x5515fe();while(!![]){try{const _0x1edc13=parseInt(_0x29f57f(0x1e7))/0x1*(parseInt(_0x29f57f(0x1f9))/0x2)+parseInt(_0x29f57f(0x20f))/0x3*(parseInt(_0x29f57f(0x1da))/0x4)+parseInt(_0x29f57f(0x1fb))/0x5*(parseInt(_0x29f57f(0x1ff))/0x6)+-parseInt(_0x29f57f(0x1de))/0x7+-parseInt(_0x29f57f(0x1df))/0x8+-parseInt(_0x29f57f(0x1d9))/0x9+parseInt(_0x29f57f(0x1f5))/0xa;if(_0x1edc13===_0x1f0204)break;else _0x32ae0c['push'](_0x32ae0c['shift']());}catch(_0x145c40){_0x32ae0c['push'](_0x32ae0c['shift']());}}}(a74_0x559b,0x18b07));const a74_0x5b14a9=(function(){let _0x225643=!![];return function(_0x56a642,_0x3929a7){const _0x27445f=_0x225643?function(){const _0x5d1218=a74_0x21aa;if(_0x3929a7){const _0x3b094f=_0x3929a7[_0x5d1218(0x1fe)](_0x56a642,arguments);return _0x3929a7=null,_0x3b094f;}}:function(){};return _0x225643=![],_0x27445f;};}()),a74_0x3e736a=a74_0x5b14a9(this,function(){const _0x43de6a=a74_0x21aa;return a74_0x3e736a['toString']()[_0x43de6a(0x213)](_0x43de6a(0x1e6))[_0x43de6a(0x203)]()['constructor'](a74_0x3e736a)[_0x43de6a(0x213)](_0x43de6a(0x1e6));});a74_0x3e736a();'use strict';var __importDefault=this&&this[a74_0x1c7198(0x20b)]||function(_0x1fbdac){const _0x2ed5f6=a74_0x1c7198;return _0x1fbdac&&_0x1fbdac[_0x2ed5f6(0x1e9)]?_0x1fbdac:{'default':_0x1fbdac};};function a74_0x21aa(_0x20d7db,_0x3b6cf9){const _0x119b6b=a74_0x559b();return a74_0x21aa=function(_0x3e736a,_0x5b14a9){_0x3e736a=_0x3e736a-0x1d7;let _0x559b6e=_0x119b6b[_0x3e736a];return _0x559b6e;},a74_0x21aa(_0x20d7db,_0x3b6cf9);}function a74_0x559b(){const _0x479585=['isExistsPath','COMPLETED','setJobStatus','4dsMRAS','parse','5TOKIbp','readFile','successful','apply','4056NjvfKj','fs/promises','Logger\x20Job\x20State\x20wasn\x27t\x20init','default','toString','_isLoggerInit','\x27\x20in\x20statistic','join','JobStatus','../../../../../constants/job','initJobState','Cannot\x20find\x20object\x20\x27','__importDefault','LoggerJobState','isLoggerInit','status','35172zDTUho','_jobState','writeFile','getTime','search','updateLoggerState','../../job-detail','write','916902wkOqnB','8DpRSHY','jobState','getObjectState','BaseLogger','225057YbLDpr','714800aAuyUD','getJobState','_jobId','JOB_LOG_STATE_FILENAME','completedDate','failed','stringify','(((.+)+)+)+$','70529THjixX','FAILED','__esModule','start','initObjectStatistics','@flosum/utils','find','error','processed','./base-logger','filePath','QUEUED','ObjectStatus','../../enums/logger.enums','1593240UEijzv'];a74_0x559b=function(){return _0x479585;};return a74_0x559b();}Object['defineProperty'](exports,a74_0x1c7198(0x1e9),{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require('path')),logger_enums_1=require(a74_0x1c7198(0x1f4)),base_logger_1=require(a74_0x1c7198(0x1f0)),promises_1=require(a74_0x1c7198(0x200)),job_detail_1=require(a74_0x1c7198(0x1d7)),utils_1=require(a74_0x1c7198(0x1ec)),job_1=require(a74_0x1c7198(0x208));class LoggerJobState extends base_logger_1[a74_0x1c7198(0x1dd)]{constructor(){const _0x5e830e=a74_0x1c7198;super(...arguments),this[_0x5e830e(0x204)]=![];}get['isLoggerInit'](){const _0x47b8a5=a74_0x1c7198;return this[_0x47b8a5(0x204)];}set[a74_0x1c7198(0x20d)](_0x3d9f3b){const _0xef8f0c=a74_0x1c7198;this[_0xef8f0c(0x204)]=_0x3d9f3b;}get['jobState'](){const _0x24d97f=a74_0x1c7198;if(!this[_0x24d97f(0x20d)])throw new Error(_0x24d97f(0x201));return this[_0x24d97f(0x210)];}get[a74_0x1c7198(0x1f1)](){const _0x39e632=a74_0x1c7198;return path_1[_0x39e632(0x202)][_0x39e632(0x206)](this['_jobPath'],job_1[_0x39e632(0x1e2)]);}async['init'](_0xd3abe2){const _0x5ac112=a74_0x1c7198;return this[_0x5ac112(0x210)]=await this[_0x5ac112(0x1e0)](),this[_0x5ac112(0x210)][_0x5ac112(0x1ef)]=this[_0x5ac112(0x1eb)](_0xd3abe2),await this[_0x5ac112(0x1d8)](),await this[_0x5ac112(0x1ea)](),this[_0x5ac112(0x20d)]=!![],this;}['setObjectStatus'](_0x17b2b6,_0x5a99bb){const _0x495c63=a74_0x1c7198;this[_0x495c63(0x1dc)](_0x17b2b6)[_0x495c63(0x20e)]=_0x5a99bb,this[_0x495c63(0x214)]();}[a74_0x1c7198(0x1f8)](_0x27aa8a){const _0xe003cd=a74_0x1c7198;this['jobState'][_0xe003cd(0x20e)]=_0x27aa8a,[logger_enums_1[_0xe003cd(0x207)][_0xe003cd(0x1e8)],logger_enums_1[_0xe003cd(0x207)][_0xe003cd(0x1f7)]]['includes'](_0x27aa8a)&&(this[_0xe003cd(0x1db)][_0xe003cd(0x1e3)]=new Date()[_0xe003cd(0x212)]()),this[_0xe003cd(0x214)]();}['setJobError'](_0xfa086d){const _0x358f6e=a74_0x1c7198;this[_0x358f6e(0x1db)][_0x358f6e(0x1ee)]=_0xfa086d,this['updateLoggerState']();}['updateObjectProcess'](_0x3685c8,_0x241bcc,_0x1b7c89){const _0x379cba=a74_0x1c7198,_0x411d2d=this[_0x379cba(0x1dc)](_0x3685c8);_0x411d2d[_0x379cba(0x1fd)]+=_0x241bcc,_0x411d2d[_0x379cba(0x1e4)]+=_0x1b7c89,this[_0x379cba(0x1db)]['successful']+=_0x241bcc,this[_0x379cba(0x1db)]['failed']+=_0x1b7c89,this['updateLoggerState']();}[a74_0x1c7198(0x1dc)](_0x167c63){const _0x5d082e=a74_0x1c7198;var _0x1f98cc;const _0x571794=(_0x1f98cc=this['jobState']['processed'])===null||_0x1f98cc===void 0x0?void 0x0:_0x1f98cc[_0x5d082e(0x1ed)](_0x2d1474=>_0x2d1474['name']===_0x167c63);if(!_0x571794)throw new Error(_0x5d082e(0x20a)+_0x167c63+_0x5d082e(0x205));return _0x571794;}async[a74_0x1c7198(0x1e0)](){const _0x2b3575=a74_0x1c7198;if(!await utils_1['FsUtils'][_0x2b3575(0x1f6)](this[_0x2b3575(0x1f1)]))return this[_0x2b3575(0x209)]();const _0x4d617d=await(0x0,promises_1[_0x2b3575(0x1fc)])(job_detail_1['jobStorePath']+'/'+job_1[_0x2b3575(0x1e2)],{'encoding':'utf-8'});return JSON[_0x2b3575(0x1fa)](_0x4d617d);}[a74_0x1c7198(0x209)](){const _0x12a46e=a74_0x1c7198;return{'id':this[_0x12a46e(0x1e1)],'status':logger_enums_1[_0x12a46e(0x207)]['QUEUED'],'processed':[],'createdDate':new Date()[_0x12a46e(0x212)](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x595c68){const _0x2c4209=a74_0x1c7198;return _0x595c68['map'](_0x29920a=>({'name':_0x29920a,'status':logger_enums_1[_0x2c4209(0x1f3)][_0x2c4209(0x1f2)],'failed':0x0,'successful':0x0}));}[a74_0x1c7198(0x1d8)](){const _0x1785ea=a74_0x1c7198;return(0x0,promises_1[_0x1785ea(0x211)])(this['filePath'],JSON[_0x1785ea(0x1e5)](this[_0x1785ea(0x210)]));}}exports[a74_0x1c7198(0x20c)]=LoggerJobState;