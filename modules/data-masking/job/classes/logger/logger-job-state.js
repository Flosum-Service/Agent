const a58_0x480195=a58_0x260e;(function(_0x4b5387,_0x10e07a){const _0x30ebbe=a58_0x260e,_0x19335c=_0x4b5387();while(!![]){try{const _0x4989da=-parseInt(_0x30ebbe(0xa1))/0x1+-parseInt(_0x30ebbe(0xa8))/0x2+parseInt(_0x30ebbe(0xc8))/0x3*(parseInt(_0x30ebbe(0xb3))/0x4)+parseInt(_0x30ebbe(0xc1))/0x5*(-parseInt(_0x30ebbe(0xbd))/0x6)+parseInt(_0x30ebbe(0x94))/0x7+parseInt(_0x30ebbe(0x97))/0x8+parseInt(_0x30ebbe(0xb8))/0x9;if(_0x4989da===_0x10e07a)break;else _0x19335c['push'](_0x19335c['shift']());}catch(_0x375084){_0x19335c['push'](_0x19335c['shift']());}}}(a58_0x3c65,0x489c8));const a58_0x2506da=(function(){let _0x5ca793=!![];return function(_0x238c33,_0x32c5c0){const _0x218423=_0x5ca793?function(){const _0x3d3169=a58_0x260e;if(_0x32c5c0){const _0x4a8f28=_0x32c5c0[_0x3d3169(0xcc)](_0x238c33,arguments);return _0x32c5c0=null,_0x4a8f28;}}:function(){};return _0x5ca793=![],_0x218423;};}()),a58_0x55f51a=a58_0x2506da(this,function(){const _0x410d8d=a58_0x260e;return a58_0x55f51a[_0x410d8d(0xb4)]()[_0x410d8d(0xc0)](_0x410d8d(0xcb))[_0x410d8d(0xb4)]()[_0x410d8d(0x90)](a58_0x55f51a)[_0x410d8d(0xc0)](_0x410d8d(0xcb));});function a58_0x3c65(){const _0x538439=['../../../../../constants/job','8QBsBua','toString','isLoggerInit','_jobId','@flosum/utils','2867112HrplVr','COMPLETED','jobStorePath','updateObjectProcess','fs/promises','18PXthWc','BaseLogger','processed','search','529885YeUXsU','error','getJobState','__importDefault','isExistsPath','_jobState','QUEUED','660345ZPKciX','updateLoggerState','_jobPath','(((.+)+)+)+$','apply','JOB_LOG_STATE_FILENAME','LoggerJobState','name','parse','defineProperty','constructor','path','join','Logger\x20Job\x20State\x20wasn\x27t\x20init','2061276iQdYBk','default','map','2691040StEipj','FsUtils','completedDate','successful','__esModule','getTime','FAILED','writeFile','write','../../job-detail','573117nAfNEa','setObjectStatus','failed','JobStatus','initObjectStatistics','start','./base-logger','402364ippxUF','setJobError','initJobState','readFile','utf-8','status','getObjectState','filePath','_isLoggerInit','jobState'];a58_0x3c65=function(){return _0x538439;};return a58_0x3c65();}a58_0x55f51a();'use strict';function a58_0x260e(_0x108943,_0x23ba17){const _0x7d5e9f=a58_0x3c65();return a58_0x260e=function(_0x55f51a,_0x2506da){_0x55f51a=_0x55f51a-0x8d;let _0x3c65df=_0x7d5e9f[_0x55f51a];return _0x3c65df;},a58_0x260e(_0x108943,_0x23ba17);}var __importDefault=this&&this[a58_0x480195(0xc4)]||function(_0x5d5e4b){const _0x29e81b=a58_0x480195;return _0x5d5e4b&&_0x5d5e4b[_0x29e81b(0x9b)]?_0x5d5e4b:{'default':_0x5d5e4b};};Object[a58_0x480195(0x8f)](exports,a58_0x480195(0x9b),{'value':!![]}),exports[a58_0x480195(0xce)]=void 0x0;const path_1=__importDefault(require(a58_0x480195(0x91))),logger_enums_1=require('../../enums/logger.enums'),base_logger_1=require(a58_0x480195(0xa7)),promises_1=require(a58_0x480195(0xbc)),job_detail_1=require(a58_0x480195(0xa0)),utils_1=require(a58_0x480195(0xb7)),job_1=require(a58_0x480195(0xb2));class LoggerJobState extends base_logger_1[a58_0x480195(0xbe)]{constructor(){super(...arguments),this['_isLoggerInit']=![];}get[a58_0x480195(0xb5)](){const _0x5499e1=a58_0x480195;return this[_0x5499e1(0xb0)];}set['isLoggerInit'](_0x393cde){const _0x14d303=a58_0x480195;this[_0x14d303(0xb0)]=_0x393cde;}get[a58_0x480195(0xb1)](){const _0x521632=a58_0x480195;if(!this[_0x521632(0xb5)])throw new Error(_0x521632(0x93));return this['_jobState'];}get[a58_0x480195(0xaf)](){const _0x2e5bcd=a58_0x480195;return path_1[_0x2e5bcd(0x95)][_0x2e5bcd(0x92)](this[_0x2e5bcd(0xca)],job_1[_0x2e5bcd(0xcd)]);}async['init'](_0x327b7e){const _0x106e81=a58_0x480195;return this[_0x106e81(0xc6)]=await this[_0x106e81(0xc3)](),this[_0x106e81(0xc6)]['processed']=this[_0x106e81(0xa5)](_0x327b7e),await this[_0x106e81(0x9f)](),await this[_0x106e81(0xa6)](),this[_0x106e81(0xb5)]=!![],this;}[a58_0x480195(0xa2)](_0x133fcb,_0x278504){const _0x1bbadd=a58_0x480195;this[_0x1bbadd(0xae)](_0x133fcb)[_0x1bbadd(0xad)]=_0x278504,this[_0x1bbadd(0xc9)]();}['setJobStatus'](_0x828096){const _0x2a9963=a58_0x480195;this['jobState'][_0x2a9963(0xad)]=_0x828096,[logger_enums_1['JobStatus'][_0x2a9963(0x9d)],logger_enums_1[_0x2a9963(0xa4)][_0x2a9963(0xb9)]]['includes'](_0x828096)&&(this['jobState'][_0x2a9963(0x99)]=new Date()[_0x2a9963(0x9c)]()),this[_0x2a9963(0xc9)]();}[a58_0x480195(0xa9)](_0x4bf232){const _0x372bd0=a58_0x480195;this[_0x372bd0(0xb1)][_0x372bd0(0xc2)]=_0x4bf232,this[_0x372bd0(0xc9)]();}[a58_0x480195(0xbb)](_0x28d716,_0x497fd5,_0x30e728){const _0x477a8b=a58_0x480195,_0x18cbd2=this[_0x477a8b(0xae)](_0x28d716);_0x18cbd2[_0x477a8b(0x9a)]+=_0x497fd5,_0x18cbd2['failed']+=_0x30e728,this['jobState'][_0x477a8b(0x9a)]+=_0x497fd5,this[_0x477a8b(0xb1)][_0x477a8b(0xa3)]+=_0x30e728,this['updateLoggerState']();}[a58_0x480195(0xae)](_0xfc83ba){const _0x5b59b6=a58_0x480195;var _0x5f2dd0;const _0x183c3c=(_0x5f2dd0=this[_0x5b59b6(0xb1)][_0x5b59b6(0xbf)])===null||_0x5f2dd0===void 0x0?void 0x0:_0x5f2dd0['find'](_0x2d65f2=>_0x2d65f2[_0x5b59b6(0x8d)]===_0xfc83ba);if(!_0x183c3c)throw new Error('Cannot\x20find\x20object\x20\x27'+_0xfc83ba+'\x27\x20in\x20statistic');return _0x183c3c;}async['getJobState'](){const _0x423c65=a58_0x480195;if(!await utils_1[_0x423c65(0x98)][_0x423c65(0xc5)](this['filePath']))return this[_0x423c65(0xaa)]();const _0x2acc17=await(0x0,promises_1[_0x423c65(0xab)])(job_detail_1[_0x423c65(0xba)]+'/'+job_1[_0x423c65(0xcd)],{'encoding':_0x423c65(0xac)});return JSON[_0x423c65(0x8e)](_0x2acc17);}['initJobState'](){const _0x40ebc5=a58_0x480195;return{'id':this[_0x40ebc5(0xb6)],'status':logger_enums_1[_0x40ebc5(0xa4)][_0x40ebc5(0xc7)],'processed':[],'createdDate':new Date()[_0x40ebc5(0x9c)](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x188702){const _0x273aa3=a58_0x480195;return _0x188702[_0x273aa3(0x96)](_0x32617e=>({'name':_0x32617e,'status':logger_enums_1['ObjectStatus'][_0x273aa3(0xc7)],'failed':0x0,'successful':0x0}));}['write'](){const _0x548b15=a58_0x480195;return(0x0,promises_1[_0x548b15(0x9e)])(this[_0x548b15(0xaf)],JSON['stringify'](this[_0x548b15(0xc6)]));}}exports[a58_0x480195(0xce)]=LoggerJobState;