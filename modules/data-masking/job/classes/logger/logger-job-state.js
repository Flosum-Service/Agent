const a58_0x23423e=a58_0x198b;(function(_0x3d1429,_0x48a115){const _0x2da0fe=a58_0x198b,_0x1d7e67=_0x3d1429();while(!![]){try{const _0xa99b35=parseInt(_0x2da0fe(0x190))/0x1*(parseInt(_0x2da0fe(0x16a))/0x2)+-parseInt(_0x2da0fe(0x188))/0x3*(parseInt(_0x2da0fe(0x164))/0x4)+-parseInt(_0x2da0fe(0x165))/0x5*(-parseInt(_0x2da0fe(0x17a))/0x6)+-parseInt(_0x2da0fe(0x17c))/0x7+parseInt(_0x2da0fe(0x168))/0x8+parseInt(_0x2da0fe(0x18a))/0x9*(parseInt(_0x2da0fe(0x163))/0xa)+parseInt(_0x2da0fe(0x184))/0xb;if(_0xa99b35===_0x48a115)break;else _0x1d7e67['push'](_0x1d7e67['shift']());}catch(_0x4685da){_0x1d7e67['push'](_0x1d7e67['shift']());}}}(a58_0x85a8,0xf3677));const a58_0xcc1d6c=(function(){let _0x2e2c7a=!![];return function(_0x512dbb,_0x5b9a95){const _0x3f369d=_0x2e2c7a?function(){const _0x33af43=a58_0x198b;if(_0x5b9a95){const _0x2cacda=_0x5b9a95[_0x33af43(0x16e)](_0x512dbb,arguments);return _0x5b9a95=null,_0x2cacda;}}:function(){};return _0x2e2c7a=![],_0x3f369d;};}()),a58_0x1ef134=a58_0xcc1d6c(this,function(){const _0x57ba1c=a58_0x198b;return a58_0x1ef134[_0x57ba1c(0x18c)]()['search'](_0x57ba1c(0x172))[_0x57ba1c(0x18c)]()['constructor'](a58_0x1ef134)[_0x57ba1c(0x183)](_0x57ba1c(0x172));});function a58_0x198b(_0x1c4635,_0x4f190b){const _0x1d932e=a58_0x85a8();return a58_0x198b=function(_0x1ef134,_0xcc1d6c){_0x1ef134=_0x1ef134-0x15e;let _0x85a853=_0x1d932e[_0x1ef134];return _0x85a853;},a58_0x198b(_0x1c4635,_0x4f190b);}function a58_0x85a8(){const _0x1bf91d=['7270508vdXCXc','12280ClhaPG','getTime','isExistsPath','7487688bHQvfF','successful','94GgPVmD','setObjectStatus','jobState','Cannot\x20find\x20object\x20\x27','apply','LoggerJobState','status','readFile','(((.+)+)+)+$','_jobState','getObjectState','writeFile','stringify','\x27\x20in\x20statistic','_jobPath','parse','3456UhTOYg','_isLoggerInit','8593116eWccKD','filePath','__esModule','processed','../../enums/logger.enums','updateLoggerState','initObjectStatistics','search','7638708pbfnPJ','initJobState','path','name','3owtJPV','completedDate','9WUObuv','QUEUED','toString','FsUtils','failed','fs/promises','1427EeTHaR','Logger\x20Job\x20State\x20wasn\x27t\x20init','JobStatus','BaseLogger','write','jobStorePath','updateObjectProcess','COMPLETED','../../../../../constants/job','isLoggerInit','setJobError','error','defineProperty','JOB_LOG_STATE_FILENAME','setJobStatus','ObjectStatus','../../job-detail','9300840rZSOTg'];a58_0x85a8=function(){return _0x1bf91d;};return a58_0x85a8();}a58_0x1ef134();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x221d85){const _0x373ce1=a58_0x198b;return _0x221d85&&_0x221d85[_0x373ce1(0x17e)]?_0x221d85:{'default':_0x221d85};};Object[a58_0x23423e(0x15e)](exports,a58_0x23423e(0x17e),{'value':!![]}),exports[a58_0x23423e(0x16f)]=void 0x0;const path_1=__importDefault(require(a58_0x23423e(0x186))),logger_enums_1=require(a58_0x23423e(0x180)),base_logger_1=require('./base-logger'),promises_1=require(a58_0x23423e(0x18f)),job_detail_1=require(a58_0x23423e(0x162)),utils_1=require('@flosum/utils'),job_1=require(a58_0x23423e(0x198));class LoggerJobState extends base_logger_1[a58_0x23423e(0x193)]{constructor(){const _0x3152b1=a58_0x23423e;super(...arguments),this[_0x3152b1(0x17b)]=![];}get[a58_0x23423e(0x199)](){const _0xf7c174=a58_0x23423e;return this[_0xf7c174(0x17b)];}set[a58_0x23423e(0x199)](_0x507b4f){const _0x1638ac=a58_0x23423e;this[_0x1638ac(0x17b)]=_0x507b4f;}get[a58_0x23423e(0x16c)](){const _0x12db17=a58_0x23423e;if(!this['isLoggerInit'])throw new Error(_0x12db17(0x191));return this[_0x12db17(0x173)];}get[a58_0x23423e(0x17d)](){const _0x2a55ab=a58_0x23423e;return path_1['default']['join'](this[_0x2a55ab(0x178)],job_1[_0x2a55ab(0x15f)]);}async['init'](_0x4e78a4){const _0x4c6564=a58_0x23423e;return this['_jobState']=await this['getJobState'](),this[_0x4c6564(0x173)]['processed']=this[_0x4c6564(0x182)](_0x4e78a4),await this[_0x4c6564(0x194)](),await this['start'](),this[_0x4c6564(0x199)]=!![],this;}[a58_0x23423e(0x16b)](_0x21a24b,_0x311f85){const _0x1f28e8=a58_0x23423e;this['getObjectState'](_0x21a24b)[_0x1f28e8(0x170)]=_0x311f85,this['updateLoggerState']();}[a58_0x23423e(0x160)](_0x5e1c0f){const _0x182dc9=a58_0x23423e;this[_0x182dc9(0x16c)][_0x182dc9(0x170)]=_0x5e1c0f,[logger_enums_1[_0x182dc9(0x192)]['FAILED'],logger_enums_1[_0x182dc9(0x192)][_0x182dc9(0x197)]]['includes'](_0x5e1c0f)&&(this[_0x182dc9(0x16c)][_0x182dc9(0x189)]=new Date()[_0x182dc9(0x166)]()),this['updateLoggerState']();}[a58_0x23423e(0x19a)](_0x29fd2d){const _0x458d69=a58_0x23423e;this[_0x458d69(0x16c)][_0x458d69(0x19b)]=_0x29fd2d,this[_0x458d69(0x181)]();}[a58_0x23423e(0x196)](_0x274dc8,_0x430043,_0xa98329){const _0x3b95b8=a58_0x23423e,_0x3a9313=this[_0x3b95b8(0x174)](_0x274dc8);_0x3a9313[_0x3b95b8(0x169)]+=_0x430043,_0x3a9313[_0x3b95b8(0x18e)]+=_0xa98329,this['jobState'][_0x3b95b8(0x169)]+=_0x430043,this[_0x3b95b8(0x16c)]['failed']+=_0xa98329,this['updateLoggerState']();}[a58_0x23423e(0x174)](_0x2e7dfe){const _0x57d4e0=a58_0x23423e;var _0x3e09b7;const _0x450929=(_0x3e09b7=this['jobState'][_0x57d4e0(0x17f)])===null||_0x3e09b7===void 0x0?void 0x0:_0x3e09b7['find'](_0x35a2ab=>_0x35a2ab[_0x57d4e0(0x187)]===_0x2e7dfe);if(!_0x450929)throw new Error(_0x57d4e0(0x16d)+_0x2e7dfe+_0x57d4e0(0x177));return _0x450929;}async['getJobState'](){const _0x482486=a58_0x23423e;if(!await utils_1[_0x482486(0x18d)][_0x482486(0x167)](this[_0x482486(0x17d)]))return this[_0x482486(0x185)]();const _0x2ed9b2=await(0x0,promises_1[_0x482486(0x171)])(job_detail_1[_0x482486(0x195)]+'/'+job_1[_0x482486(0x15f)],{'encoding':'utf-8'});return JSON[_0x482486(0x179)](_0x2ed9b2);}[a58_0x23423e(0x185)](){const _0x193a52=a58_0x23423e;return{'id':this['_jobId'],'status':logger_enums_1[_0x193a52(0x192)]['QUEUED'],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x1734a8){const _0x3a9605=a58_0x23423e;return _0x1734a8['map'](_0x2ebdd6=>({'name':_0x2ebdd6,'status':logger_enums_1[_0x3a9605(0x161)][_0x3a9605(0x18b)],'failed':0x0,'successful':0x0}));}[a58_0x23423e(0x194)](){const _0x2ee647=a58_0x23423e;return(0x0,promises_1[_0x2ee647(0x175)])(this[_0x2ee647(0x17d)],JSON[_0x2ee647(0x176)](this[_0x2ee647(0x173)]));}}exports[a58_0x23423e(0x16f)]=LoggerJobState;