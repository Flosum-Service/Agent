const a75_0x543bb6=a75_0x27f2;(function(_0x612658,_0xeb2b02){const _0x55979d=a75_0x27f2,_0x5469a4=_0x612658();while(!![]){try{const _0x28a8b6=-parseInt(_0x55979d(0xe2))/0x1+-parseInt(_0x55979d(0xee))/0x2+parseInt(_0x55979d(0x105))/0x3+parseInt(_0x55979d(0xf1))/0x4+parseInt(_0x55979d(0x10d))/0x5*(-parseInt(_0x55979d(0xe5))/0x6)+parseInt(_0x55979d(0x101))/0x7*(parseInt(_0x55979d(0xff))/0x8)+-parseInt(_0x55979d(0xd6))/0x9*(-parseInt(_0x55979d(0xe4))/0xa);if(_0x28a8b6===_0xeb2b02)break;else _0x5469a4['push'](_0x5469a4['shift']());}catch(_0x3655db){_0x5469a4['push'](_0x5469a4['shift']());}}}(a75_0x121c,0x8f0eb));const a75_0x5802a2=(function(){let _0x16240b=!![];return function(_0x2ea08e,_0xc128ee){const _0x48967a=_0x16240b?function(){const _0x17b24b=a75_0x27f2;if(_0xc128ee){const _0x2fd63f=_0xc128ee[_0x17b24b(0xd8)](_0x2ea08e,arguments);return _0xc128ee=null,_0x2fd63f;}}:function(){};return _0x16240b=![],_0x48967a;};}()),a75_0x2b4d53=a75_0x5802a2(this,function(){const _0x44f2ac=a75_0x27f2;return a75_0x2b4d53['toString']()[_0x44f2ac(0xfd)]('(((.+)+)+)+$')[_0x44f2ac(0xec)]()[_0x44f2ac(0xf9)](a75_0x2b4d53)[_0x44f2ac(0xfd)](_0x44f2ac(0x104));});a75_0x2b4d53();'use strict';var __importDefault=this&&this[a75_0x543bb6(0x111)]||function(_0x323fef){const _0x1b0a1b=a75_0x543bb6;return _0x323fef&&_0x323fef[_0x1b0a1b(0xf5)]?_0x323fef:{'default':_0x323fef};};Object[a75_0x543bb6(0xed)](exports,a75_0x543bb6(0xf5),{'value':!![]}),exports[a75_0x543bb6(0xea)]=void 0x0;function a75_0x27f2(_0x4897b6,_0x2d61c9){const _0x556070=a75_0x121c();return a75_0x27f2=function(_0x2b4d53,_0x5802a2){_0x2b4d53=_0x2b4d53-0xd6;let _0x121c65=_0x556070[_0x2b4d53];return _0x121c65;},a75_0x27f2(_0x4897b6,_0x2d61c9);}const path_1=__importDefault(require(a75_0x543bb6(0xf0))),logger_enums_1=require('../../enums/logger.enums'),base_logger_1=require('./base-logger'),promises_1=require(a75_0x543bb6(0x112)),job_detail_1=require('../../job-detail'),utils_1=require(a75_0x543bb6(0x106)),job_1=require(a75_0x543bb6(0xd7));class LoggerJobState extends base_logger_1[a75_0x543bb6(0xda)]{constructor(){const _0xf6961=a75_0x543bb6;super(...arguments),this[_0xf6961(0xfa)]=![];}get[a75_0x543bb6(0xfb)](){const _0x39b26e=a75_0x543bb6;return this[_0x39b26e(0xfa)];}set[a75_0x543bb6(0xfb)](_0x3b7d2f){this['_isLoggerInit']=_0x3b7d2f;}get[a75_0x543bb6(0x10b)](){const _0x5c1b9f=a75_0x543bb6;if(!this[_0x5c1b9f(0xfb)])throw new Error('Logger\x20Job\x20State\x20wasn\x27t\x20init');return this[_0x5c1b9f(0xdf)];}get[a75_0x543bb6(0xf3)](){const _0x19e23f=a75_0x543bb6;return path_1[_0x19e23f(0xe7)][_0x19e23f(0xe9)](this[_0x19e23f(0x103)],job_1[_0x19e23f(0xf7)]);}async['init'](_0x46d856){const _0x188de9=a75_0x543bb6;return this[_0x188de9(0xdf)]=await this[_0x188de9(0xf4)](),this[_0x188de9(0xdf)]['processed']=this[_0x188de9(0x109)](_0x46d856),await this[_0x188de9(0xd9)](),await this['start'](),this[_0x188de9(0xfb)]=!![],this;}[a75_0x543bb6(0x114)](_0x17e3a5,_0x533993){const _0xbb3487=a75_0x543bb6;this[_0xbb3487(0xdc)](_0x17e3a5)[_0xbb3487(0xdd)]=_0x533993,this['updateLoggerState']();}['setJobStatus'](_0x58e394){const _0x10b924=a75_0x543bb6;this[_0x10b924(0x10b)]['status']=_0x58e394,[logger_enums_1[_0x10b924(0xe8)][_0x10b924(0x102)],logger_enums_1[_0x10b924(0xe8)]['COMPLETED']][_0x10b924(0xf2)](_0x58e394)&&(this[_0x10b924(0x10b)]['completedDate']=new Date()['getTime']()),this[_0x10b924(0xef)]();}[a75_0x543bb6(0xe1)](_0x4c6444){const _0x593134=a75_0x543bb6;this[_0x593134(0x10b)]['error']=_0x4c6444,this[_0x593134(0xef)]();}[a75_0x543bb6(0xeb)](_0x3ece52,_0x2b0931,_0x2aa754){const _0x1831d0=a75_0x543bb6,_0xa15f8b=this[_0x1831d0(0xdc)](_0x3ece52);_0xa15f8b[_0x1831d0(0x107)]+=_0x2b0931,_0xa15f8b[_0x1831d0(0x108)]+=_0x2aa754,this['jobState'][_0x1831d0(0x107)]+=_0x2b0931,this[_0x1831d0(0x10b)][_0x1831d0(0x108)]+=_0x2aa754,this[_0x1831d0(0xef)]();}[a75_0x543bb6(0xdc)](_0x5c4877){const _0x1d5010=a75_0x543bb6;var _0x4d6456;const _0xa8aa26=(_0x4d6456=this[_0x1d5010(0x10b)][_0x1d5010(0xf8)])===null||_0x4d6456===void 0x0?void 0x0:_0x4d6456[_0x1d5010(0xe6)](_0x9fba27=>_0x9fba27[_0x1d5010(0x10a)]===_0x5c4877);if(!_0xa8aa26)throw new Error(_0x1d5010(0xfc)+_0x5c4877+'\x27\x20in\x20statistic');return _0xa8aa26;}async[a75_0x543bb6(0xf4)](){const _0x202371=a75_0x543bb6;if(!await utils_1['FsUtils'][_0x202371(0xe0)](this[_0x202371(0xf3)]))return this[_0x202371(0x100)]();const _0x328b08=await(0x0,promises_1['readFile'])(job_detail_1[_0x202371(0xdb)]+'/'+job_1[_0x202371(0xf7)],{'encoding':_0x202371(0xfe)});return JSON[_0x202371(0x110)](_0x328b08);}[a75_0x543bb6(0x100)](){const _0x27f814=a75_0x543bb6;return{'id':this[_0x27f814(0xf6)],'status':logger_enums_1['JobStatus'][_0x27f814(0x10e)],'processed':[],'createdDate':new Date()[_0x27f814(0x10f)](),'successful':0x0,'failed':0x0};}[a75_0x543bb6(0x109)](_0x377dd6){const _0x5c5931=a75_0x543bb6;return _0x377dd6[_0x5c5931(0xe3)](_0x242f82=>({'name':_0x242f82,'status':logger_enums_1[_0x5c5931(0xde)][_0x5c5931(0x10e)],'failed':0x0,'successful':0x0}));}[a75_0x543bb6(0xd9)](){const _0xc49c7e=a75_0x543bb6;return(0x0,promises_1[_0xc49c7e(0x10c)])(this['filePath'],JSON[_0xc49c7e(0x113)](this['_jobState']));}}exports[a75_0x543bb6(0xea)]=LoggerJobState;function a75_0x121c(){const _0x55cce9=['QUEUED','getTime','parse','__importDefault','fs/promises','stringify','setObjectStatus','9NHFqMh','../../../../../constants/job','apply','write','BaseLogger','jobStorePath','getObjectState','status','ObjectStatus','_jobState','isExistsPath','setJobError','499557otKplK','map','10145320fUFTsj','282NJsbaD','find','default','JobStatus','join','LoggerJobState','updateObjectProcess','toString','defineProperty','453944erCvpG','updateLoggerState','path','711604lqqYuZ','includes','filePath','getJobState','__esModule','_jobId','JOB_LOG_STATE_FILENAME','processed','constructor','_isLoggerInit','isLoggerInit','Cannot\x20find\x20object\x20\x27','search','utf-8','2387424EhMFjf','initJobState','7BRqZJn','FAILED','_jobPath','(((.+)+)+)+$','2530797gzgDhh','@flosum/utils','successful','failed','initObjectStatistics','name','jobState','writeFile','108720LMgyhE'];a75_0x121c=function(){return _0x55cce9;};return a75_0x121c();}