const a58_0x40e922=a58_0x43cc;(function(_0x53a2e9,_0x43de46){const _0x1ea4e6=a58_0x43cc,_0x3b63cf=_0x53a2e9();while(!![]){try{const _0x59c6fc=parseInt(_0x1ea4e6(0xdd))/0x1*(parseInt(_0x1ea4e6(0xd6))/0x2)+-parseInt(_0x1ea4e6(0xcf))/0x3+-parseInt(_0x1ea4e6(0xea))/0x4*(parseInt(_0x1ea4e6(0xfd))/0x5)+parseInt(_0x1ea4e6(0xf5))/0x6+-parseInt(_0x1ea4e6(0xda))/0x7+-parseInt(_0x1ea4e6(0x100))/0x8+parseInt(_0x1ea4e6(0xe8))/0x9*(parseInt(_0x1ea4e6(0xd1))/0xa);if(_0x59c6fc===_0x43de46)break;else _0x3b63cf['push'](_0x3b63cf['shift']());}catch(_0x14739f){_0x3b63cf['push'](_0x3b63cf['shift']());}}}(a58_0x4c74,0x7b5ac));const a58_0x57dc62=(function(){let _0x56e630=!![];return function(_0x5ac027,_0x2c72bf){const _0x5b88b3=_0x56e630?function(){if(_0x2c72bf){const _0x73ade1=_0x2c72bf['apply'](_0x5ac027,arguments);return _0x2c72bf=null,_0x73ade1;}}:function(){};return _0x56e630=![],_0x5b88b3;};}()),a58_0x36004c=a58_0x57dc62(this,function(){const _0x23492e=a58_0x43cc;return a58_0x36004c['toString']()[_0x23492e(0xe4)]('(((.+)+)+)+$')[_0x23492e(0xd2)]()['constructor'](a58_0x36004c)[_0x23492e(0xe4)](_0x23492e(0xf8));});a58_0x36004c();'use strict';function a58_0x43cc(_0x91067c,_0x261f22){const _0x5557c2=a58_0x4c74();return a58_0x43cc=function(_0x36004c,_0x57dc62){_0x36004c=_0x36004c-0xcf;let _0x4c7457=_0x5557c2[_0x36004c];return _0x4c7457;},a58_0x43cc(_0x91067c,_0x261f22);}var __importDefault=this&&this[a58_0x40e922(0x107)]||function(_0x3c5564){const _0x2beb5e=a58_0x40e922;return _0x3c5564&&_0x3c5564[_0x2beb5e(0xf9)]?_0x3c5564:{'default':_0x3c5564};};Object[a58_0x40e922(0xef)](exports,a58_0x40e922(0xf9),{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a58_0x40e922(0xe7))),logger_enums_1=require(a58_0x40e922(0xf6)),base_logger_1=require('./base-logger'),promises_1=require('fs/promises'),job_detail_1=require(a58_0x40e922(0xff)),utils_1=require(a58_0x40e922(0xd7)),job_1=require(a58_0x40e922(0xe5));class LoggerJobState extends base_logger_1[a58_0x40e922(0x105)]{constructor(){super(...arguments),this['_isLoggerInit']=![];}get[a58_0x40e922(0xf7)](){const _0x3955cb=a58_0x40e922;return this[_0x3955cb(0xdc)];}set[a58_0x40e922(0xf7)](_0x43392d){const _0x5eae3d=a58_0x40e922;this[_0x5eae3d(0xdc)]=_0x43392d;}get[a58_0x40e922(0x106)](){const _0x41539a=a58_0x40e922;if(!this[_0x41539a(0xf7)])throw new Error(_0x41539a(0xdf));return this[_0x41539a(0x109)];}get[a58_0x40e922(0xee)](){const _0x448d11=a58_0x40e922;return path_1[_0x448d11(0xd9)]['join'](this['_jobPath'],job_1['JOB_LOG_STATE_FILENAME']);}async[a58_0x40e922(0xfa)](_0x2ec5d7){const _0x2f92cf=a58_0x40e922;return this[_0x2f92cf(0x109)]=await this[_0x2f92cf(0xde)](),this['_jobState'][_0x2f92cf(0x10c)]=this[_0x2f92cf(0x10b)](_0x2ec5d7),await this['write'](),await this[_0x2f92cf(0xe1)](),this['isLoggerInit']=!![],this;}[a58_0x40e922(0xe6)](_0x21f807,_0x48f5ad){const _0x1e8283=a58_0x40e922;this[_0x1e8283(0xf4)](_0x21f807)['status']=_0x48f5ad,this[_0x1e8283(0xf2)]();}[a58_0x40e922(0xeb)](_0x111ada){const _0x1fe682=a58_0x40e922;this[_0x1fe682(0x106)][_0x1fe682(0x103)]=_0x111ada,[logger_enums_1['JobStatus']['FAILED'],logger_enums_1[_0x1fe682(0x101)][_0x1fe682(0xe2)]][_0x1fe682(0x10a)](_0x111ada)&&(this[_0x1fe682(0x106)][_0x1fe682(0xfc)]=new Date()[_0x1fe682(0x104)]()),this[_0x1fe682(0xf2)]();}['setJobError'](_0x4ff288){const _0x5074b0=a58_0x40e922;this[_0x5074b0(0x106)][_0x5074b0(0xe9)]=_0x4ff288,this[_0x5074b0(0xf2)]();}[a58_0x40e922(0x102)](_0x4f7a83,_0x43fca4,_0x50915b){const _0x24f0b8=a58_0x40e922,_0x4b5003=this[_0x24f0b8(0xf4)](_0x4f7a83);_0x4b5003[_0x24f0b8(0xe0)]+=_0x43fca4,_0x4b5003['failed']+=_0x50915b,this[_0x24f0b8(0x106)]['successful']+=_0x43fca4,this[_0x24f0b8(0x106)][_0x24f0b8(0xec)]+=_0x50915b,this['updateLoggerState']();}['getObjectState'](_0x342feb){const _0xd705f1=a58_0x40e922;var _0x372071;const _0x415e6e=(_0x372071=this[_0xd705f1(0x106)]['processed'])===null||_0x372071===void 0x0?void 0x0:_0x372071['find'](_0x55a799=>_0x55a799[_0xd705f1(0xd3)]===_0x342feb);if(!_0x415e6e)throw new Error(_0xd705f1(0xf0)+_0x342feb+_0xd705f1(0xd4));return _0x415e6e;}async[a58_0x40e922(0xde)](){const _0x5dc5fa=a58_0x40e922;if(!await utils_1[_0x5dc5fa(0xfb)][_0x5dc5fa(0xfe)](this[_0x5dc5fa(0xee)]))return this[_0x5dc5fa(0xd8)]();const _0xcc5275=await(0x0,promises_1[_0x5dc5fa(0x108)])(job_detail_1[_0x5dc5fa(0xe3)]+'/'+job_1['JOB_LOG_STATE_FILENAME'],{'encoding':_0x5dc5fa(0xf3)});return JSON[_0x5dc5fa(0xf1)](_0xcc5275);}[a58_0x40e922(0xd8)](){const _0xeb4b63=a58_0x40e922;return{'id':this[_0xeb4b63(0xed)],'status':logger_enums_1[_0xeb4b63(0x101)][_0xeb4b63(0xd5)],'processed':[],'createdDate':new Date()[_0xeb4b63(0x104)](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x341b2e){const _0x384ba3=a58_0x40e922;return _0x341b2e[_0x384ba3(0xd0)](_0x3030eb=>({'name':_0x3030eb,'status':logger_enums_1['ObjectStatus'][_0x384ba3(0xd5)],'failed':0x0,'successful':0x0}));}[a58_0x40e922(0xdb)](){const _0x446790=a58_0x40e922;return(0x0,promises_1['writeFile'])(this[_0x446790(0xee)],JSON['stringify'](this[_0x446790(0x109)]));}}function a58_0x4c74(){const _0x3dbdfe=['includes','initObjectStatistics','processed','2589723LlNkJO','map','5900IUcNxM','toString','name','\x27\x20in\x20statistic','QUEUED','14978vQJsys','@flosum/utils','initJobState','default','3245431YZtUYp','write','_isLoggerInit','29unFnqb','getJobState','Logger\x20Job\x20State\x20wasn\x27t\x20init','successful','start','COMPLETED','jobStorePath','search','../../../../../constants/job','setObjectStatus','path','28395pzGgSZ','error','491780okinSs','setJobStatus','failed','_jobId','filePath','defineProperty','Cannot\x20find\x20object\x20\x27','parse','updateLoggerState','utf-8','getObjectState','1973346ROuTKF','../../enums/logger.enums','isLoggerInit','(((.+)+)+)+$','__esModule','init','FsUtils','completedDate','20KwMNIl','isExistsPath','../../job-detail','668864CIOsHl','JobStatus','updateObjectProcess','status','getTime','BaseLogger','jobState','__importDefault','readFile','_jobState'];a58_0x4c74=function(){return _0x3dbdfe;};return a58_0x4c74();}exports['LoggerJobState']=LoggerJobState;