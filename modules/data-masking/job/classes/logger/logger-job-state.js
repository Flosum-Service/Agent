const a75_0x4a75fa=a75_0x1f94;(function(_0x5cb6ab,_0x3c3e71){const _0x338b46=a75_0x1f94,_0x1f0ccc=_0x5cb6ab();while(!![]){try{const _0x28c935=-parseInt(_0x338b46(0x209))/0x1+-parseInt(_0x338b46(0x20a))/0x2+-parseInt(_0x338b46(0x206))/0x3*(-parseInt(_0x338b46(0x205))/0x4)+-parseInt(_0x338b46(0x21b))/0x5*(-parseInt(_0x338b46(0x20c))/0x6)+-parseInt(_0x338b46(0x220))/0x7*(parseInt(_0x338b46(0x1f6))/0x8)+parseInt(_0x338b46(0x214))/0x9+parseInt(_0x338b46(0x20f))/0xa*(parseInt(_0x338b46(0x1ed))/0xb);if(_0x28c935===_0x3c3e71)break;else _0x1f0ccc['push'](_0x1f0ccc['shift']());}catch(_0xe0aff6){_0x1f0ccc['push'](_0x1f0ccc['shift']());}}}(a75_0xc50e,0xf272b));const a75_0x1cf0d0=(function(){let _0x4bf67a=!![];return function(_0xacffc6,_0x248ca5){const _0x31e0e2=_0x4bf67a?function(){const _0x203f82=a75_0x1f94;if(_0x248ca5){const _0x211bdb=_0x248ca5[_0x203f82(0x21d)](_0xacffc6,arguments);return _0x248ca5=null,_0x211bdb;}}:function(){};return _0x4bf67a=![],_0x31e0e2;};}()),a75_0xdbf74b=a75_0x1cf0d0(this,function(){const _0x2d5768=a75_0x1f94;return a75_0xdbf74b[_0x2d5768(0x201)]()[_0x2d5768(0x1fa)]('(((.+)+)+)+$')[_0x2d5768(0x201)]()[_0x2d5768(0x204)](a75_0xdbf74b)[_0x2d5768(0x1fa)](_0x2d5768(0x215));});a75_0xdbf74b();function a75_0xc50e(){const _0x40b70e=['status','updateLoggerState','path','Cannot\x20find\x20object\x20\x27','QUEUED','parse','BaseLogger','8fWhIgX','start','filePath','@flosum/utils','search','./base-logger','failed','setJobStatus','isExistsPath','writeFile','map','toString','getJobState','init','constructor','232eiubTe','82032TkHXpg','_isLoggerInit','../../job-detail','882030qpYlZS','3555702TsbCkO','includes','6DmeoZZ','utf-8','initJobState','10xpprtm','name','initObjectStatistics','error','write','12362517aCdEyH','(((.+)+)+)+$','__importDefault','fs/promises','JOB_LOG_STATE_FILENAME','jobStorePath','successful','8406745FcikZw','completedDate','apply','getTime','defineProperty','11813893zjzqpA','find','_jobId','processed','_jobPath','__esModule','JobStatus','join','FAILED','setJobError','FsUtils','COMPLETED','../../../../../constants/job','LoggerJobState','../../enums/logger.enums','jobState','getObjectState','_jobState','isLoggerInit','7697063nGXaWr','readFile'];a75_0xc50e=function(){return _0x40b70e;};return a75_0xc50e();}function a75_0x1f94(_0x4da6ef,_0x2e2006){const _0x487889=a75_0xc50e();return a75_0x1f94=function(_0xdbf74b,_0x1cf0d0){_0xdbf74b=_0xdbf74b-0x1e7;let _0xc50ec1=_0x487889[_0xdbf74b];return _0xc50ec1;},a75_0x1f94(_0x4da6ef,_0x2e2006);}'use strict';var __importDefault=this&&this[a75_0x4a75fa(0x216)]||function(_0x10428c){const _0x27fdd0=a75_0x4a75fa;return _0x10428c&&_0x10428c[_0x27fdd0(0x225)]?_0x10428c:{'default':_0x10428c};};Object[a75_0x4a75fa(0x21f)](exports,'__esModule',{'value':!![]}),exports[a75_0x4a75fa(0x1e7)]=void 0x0;const path_1=__importDefault(require(a75_0x4a75fa(0x1f1))),logger_enums_1=require(a75_0x4a75fa(0x1e8)),base_logger_1=require(a75_0x4a75fa(0x1fb)),promises_1=require(a75_0x4a75fa(0x217)),job_detail_1=require(a75_0x4a75fa(0x208)),utils_1=require(a75_0x4a75fa(0x1f9)),job_1=require(a75_0x4a75fa(0x22c));class LoggerJobState extends base_logger_1[a75_0x4a75fa(0x1f5)]{constructor(){const _0x55db61=a75_0x4a75fa;super(...arguments),this[_0x55db61(0x207)]=![];}get[a75_0x4a75fa(0x1ec)](){return this['_isLoggerInit'];}set[a75_0x4a75fa(0x1ec)](_0x3a36e5){const _0x19f0b3=a75_0x4a75fa;this[_0x19f0b3(0x207)]=_0x3a36e5;}get[a75_0x4a75fa(0x1e9)](){const _0x7ed8f0=a75_0x4a75fa;if(!this[_0x7ed8f0(0x1ec)])throw new Error('Logger\x20Job\x20State\x20wasn\x27t\x20init');return this['_jobState'];}get[a75_0x4a75fa(0x1f8)](){const _0x5c1d55=a75_0x4a75fa;return path_1['default'][_0x5c1d55(0x227)](this[_0x5c1d55(0x224)],job_1[_0x5c1d55(0x218)]);}async[a75_0x4a75fa(0x203)](_0x531727){const _0x2ed051=a75_0x4a75fa;return this['_jobState']=await this['getJobState'](),this[_0x2ed051(0x1eb)][_0x2ed051(0x223)]=this['initObjectStatistics'](_0x531727),await this[_0x2ed051(0x213)](),await this[_0x2ed051(0x1f7)](),this[_0x2ed051(0x1ec)]=!![],this;}['setObjectStatus'](_0x504ffe,_0x4ecfd7){const _0x5a1df2=a75_0x4a75fa;this[_0x5a1df2(0x1ea)](_0x504ffe)[_0x5a1df2(0x1ef)]=_0x4ecfd7,this[_0x5a1df2(0x1f0)]();}[a75_0x4a75fa(0x1fd)](_0x27589f){const _0x54fff0=a75_0x4a75fa;this[_0x54fff0(0x1e9)][_0x54fff0(0x1ef)]=_0x27589f,[logger_enums_1[_0x54fff0(0x226)][_0x54fff0(0x228)],logger_enums_1[_0x54fff0(0x226)][_0x54fff0(0x22b)]][_0x54fff0(0x20b)](_0x27589f)&&(this['jobState'][_0x54fff0(0x21c)]=new Date()[_0x54fff0(0x21e)]()),this[_0x54fff0(0x1f0)]();}[a75_0x4a75fa(0x229)](_0x41b108){const _0x5dea3b=a75_0x4a75fa;this[_0x5dea3b(0x1e9)][_0x5dea3b(0x212)]=_0x41b108,this[_0x5dea3b(0x1f0)]();}['updateObjectProcess'](_0x57d586,_0x46bc69,_0x48b55c){const _0x545fbc=a75_0x4a75fa,_0x1936d9=this[_0x545fbc(0x1ea)](_0x57d586);_0x1936d9['successful']+=_0x46bc69,_0x1936d9[_0x545fbc(0x1fc)]+=_0x48b55c,this[_0x545fbc(0x1e9)][_0x545fbc(0x21a)]+=_0x46bc69,this[_0x545fbc(0x1e9)]['failed']+=_0x48b55c,this[_0x545fbc(0x1f0)]();}[a75_0x4a75fa(0x1ea)](_0x49ddb5){const _0x22b49a=a75_0x4a75fa;var _0x11df47;const _0x126f88=(_0x11df47=this['jobState'][_0x22b49a(0x223)])===null||_0x11df47===void 0x0?void 0x0:_0x11df47[_0x22b49a(0x221)](_0x2b689e=>_0x2b689e[_0x22b49a(0x210)]===_0x49ddb5);if(!_0x126f88)throw new Error(_0x22b49a(0x1f2)+_0x49ddb5+'\x27\x20in\x20statistic');return _0x126f88;}async[a75_0x4a75fa(0x202)](){const _0x4b3fb4=a75_0x4a75fa;if(!await utils_1[_0x4b3fb4(0x22a)][_0x4b3fb4(0x1fe)](this[_0x4b3fb4(0x1f8)]))return this[_0x4b3fb4(0x20e)]();const _0xcf411b=await(0x0,promises_1[_0x4b3fb4(0x1ee)])(job_detail_1[_0x4b3fb4(0x219)]+'/'+job_1['JOB_LOG_STATE_FILENAME'],{'encoding':_0x4b3fb4(0x20d)});return JSON[_0x4b3fb4(0x1f4)](_0xcf411b);}[a75_0x4a75fa(0x20e)](){const _0x4d792b=a75_0x4a75fa;return{'id':this[_0x4d792b(0x222)],'status':logger_enums_1[_0x4d792b(0x226)][_0x4d792b(0x1f3)],'processed':[],'createdDate':new Date()[_0x4d792b(0x21e)](),'successful':0x0,'failed':0x0};}[a75_0x4a75fa(0x211)](_0x43d570){const _0x522f28=a75_0x4a75fa;return _0x43d570[_0x522f28(0x200)](_0x3bf5ce=>({'name':_0x3bf5ce,'status':logger_enums_1['ObjectStatus'][_0x522f28(0x1f3)],'failed':0x0,'successful':0x0}));}[a75_0x4a75fa(0x213)](){const _0xefa762=a75_0x4a75fa;return(0x0,promises_1[_0xefa762(0x1ff)])(this[_0xefa762(0x1f8)],JSON['stringify'](this['_jobState']));}}exports['LoggerJobState']=LoggerJobState;