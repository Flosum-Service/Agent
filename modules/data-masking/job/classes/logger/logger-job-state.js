const a57_0x18707b=a57_0x13ef;function a57_0x2b30(){const _0x112de7=['117CNZhKN','1242819ZVKjlU','isLoggerInit','(((.+)+)+)+$','@flosum/utils','304GqzZui','../../job-detail','13636SVqPEz','getJobState','LoggerJobState','QUEUED','_jobPath','filePath','initJobState','_jobState','FAILED','__importDefault','start','JobStatus','error','failed','getObjectState','COMPLETED','write','599210SYhPXw','../../../../../constants/job','default','__esModule','successful','getTime','jobStorePath','writeFile','completedDate','./base-logger','parse','defineProperty','join','_jobId','processed','Cannot\x20find\x20object\x20\x27','toString','initObjectStatistics','setJobError','setJobStatus','490120XnhtPw','apply','constructor','14439856upHcHJ','isExistsPath','find','fs/promises','name','JOB_LOG_STATE_FILENAME','includes','readFile','../../enums/logger.enums','search','3390Zaukno','path','FsUtils','Logger\x20Job\x20State\x20wasn\x27t\x20init','setObjectStatus','45215rPxINH','jobState','BaseLogger','_isLoggerInit','1776iHTGTk','updateLoggerState'];a57_0x2b30=function(){return _0x112de7;};return a57_0x2b30();}(function(_0x353d4e,_0x430971){const _0x21aac7=a57_0x13ef,_0x17adb1=_0x353d4e();while(!![]){try{const _0x597832=-parseInt(_0x21aac7(0x108))/0x1+parseInt(_0x21aac7(0xfb))/0x2+-parseInt(_0x21aac7(0x114))/0x3+parseInt(_0x21aac7(0xd4))/0x4*(parseInt(_0x21aac7(0x10d))/0x5)+-parseInt(_0x21aac7(0x111))/0x6*(parseInt(_0x21aac7(0xd6))/0x7)+parseInt(_0x21aac7(0xfe))/0x8+-parseInt(_0x21aac7(0x113))/0x9*(parseInt(_0x21aac7(0xe7))/0xa);if(_0x597832===_0x430971)break;else _0x17adb1['push'](_0x17adb1['shift']());}catch(_0x1969eb){_0x17adb1['push'](_0x17adb1['shift']());}}}(a57_0x2b30,0xeb5e2));function a57_0x13ef(_0x46e2d8,_0x50260c){const _0x199498=a57_0x2b30();return a57_0x13ef=function(_0x200e02,_0x13d75d){_0x200e02=_0x200e02-0xd3;let _0x2b3075=_0x199498[_0x200e02];return _0x2b3075;},a57_0x13ef(_0x46e2d8,_0x50260c);}const a57_0x13d75d=(function(){let _0x3df621=!![];return function(_0x53fb00,_0x34a06e){const _0xef4225=_0x3df621?function(){const _0x1e76cd=a57_0x13ef;if(_0x34a06e){const _0x922d4d=_0x34a06e[_0x1e76cd(0xfc)](_0x53fb00,arguments);return _0x34a06e=null,_0x922d4d;}}:function(){};return _0x3df621=![],_0xef4225;};}()),a57_0x200e02=a57_0x13d75d(this,function(){const _0x20dbc5=a57_0x13ef;return a57_0x200e02[_0x20dbc5(0xf7)]()[_0x20dbc5(0x107)](_0x20dbc5(0x116))[_0x20dbc5(0xf7)]()[_0x20dbc5(0xfd)](a57_0x200e02)[_0x20dbc5(0x107)]('(((.+)+)+)+$');});a57_0x200e02();'use strict';var __importDefault=this&&this[a57_0x18707b(0xdf)]||function(_0x2a012a){const _0x847261=a57_0x18707b;return _0x2a012a&&_0x2a012a[_0x847261(0xea)]?_0x2a012a:{'default':_0x2a012a};};Object[a57_0x18707b(0xf2)](exports,a57_0x18707b(0xea),{'value':!![]}),exports[a57_0x18707b(0xd8)]=void 0x0;const path_1=__importDefault(require(a57_0x18707b(0x109))),logger_enums_1=require(a57_0x18707b(0x106)),base_logger_1=require(a57_0x18707b(0xf0)),promises_1=require(a57_0x18707b(0x101)),job_detail_1=require(a57_0x18707b(0xd5)),utils_1=require(a57_0x18707b(0xd3)),job_1=require(a57_0x18707b(0xe8));class LoggerJobState extends base_logger_1[a57_0x18707b(0x10f)]{constructor(){const _0xc56e44=a57_0x18707b;super(...arguments),this[_0xc56e44(0x110)]=![];}get[a57_0x18707b(0x115)](){const _0x405ff6=a57_0x18707b;return this[_0x405ff6(0x110)];}set['isLoggerInit'](_0x46b576){this['_isLoggerInit']=_0x46b576;}get['jobState'](){const _0x590aef=a57_0x18707b;if(!this['isLoggerInit'])throw new Error(_0x590aef(0x10b));return this[_0x590aef(0xdd)];}get[a57_0x18707b(0xdb)](){const _0x5c7d7d=a57_0x18707b;return path_1[_0x5c7d7d(0xe9)][_0x5c7d7d(0xf3)](this[_0x5c7d7d(0xda)],job_1[_0x5c7d7d(0x103)]);}async['init'](_0x2bb276){const _0x136acd=a57_0x18707b;return this[_0x136acd(0xdd)]=await this[_0x136acd(0xd7)](),this[_0x136acd(0xdd)][_0x136acd(0xf5)]=this[_0x136acd(0xf8)](_0x2bb276),await this[_0x136acd(0xe6)](),await this[_0x136acd(0xe0)](),this[_0x136acd(0x115)]=!![],this;}[a57_0x18707b(0x10c)](_0x5dd8cf,_0x5e5d45){const _0x3909f6=a57_0x18707b;this[_0x3909f6(0xe4)](_0x5dd8cf)['status']=_0x5e5d45,this['updateLoggerState']();}[a57_0x18707b(0xfa)](_0x3ee62f){const _0xaf44c5=a57_0x18707b;this[_0xaf44c5(0x10e)]['status']=_0x3ee62f,[logger_enums_1['JobStatus'][_0xaf44c5(0xde)],logger_enums_1[_0xaf44c5(0xe1)][_0xaf44c5(0xe5)]][_0xaf44c5(0x104)](_0x3ee62f)&&(this['jobState'][_0xaf44c5(0xef)]=new Date()[_0xaf44c5(0xec)]()),this[_0xaf44c5(0x112)]();}[a57_0x18707b(0xf9)](_0x5699c0){const _0x9798d0=a57_0x18707b;this[_0x9798d0(0x10e)][_0x9798d0(0xe2)]=_0x5699c0,this[_0x9798d0(0x112)]();}['updateObjectProcess'](_0x3bec99,_0x2887cc,_0x1ab11d){const _0x126b78=a57_0x18707b,_0xecfe50=this['getObjectState'](_0x3bec99);_0xecfe50[_0x126b78(0xeb)]+=_0x2887cc,_0xecfe50['failed']+=_0x1ab11d,this[_0x126b78(0x10e)][_0x126b78(0xeb)]+=_0x2887cc,this[_0x126b78(0x10e)][_0x126b78(0xe3)]+=_0x1ab11d,this[_0x126b78(0x112)]();}[a57_0x18707b(0xe4)](_0x449583){const _0x5d5f23=a57_0x18707b;var _0x5ae8de;const _0x368f14=(_0x5ae8de=this['jobState'][_0x5d5f23(0xf5)])===null||_0x5ae8de===void 0x0?void 0x0:_0x5ae8de[_0x5d5f23(0x100)](_0x1208e=>_0x1208e[_0x5d5f23(0x102)]===_0x449583);if(!_0x368f14)throw new Error(_0x5d5f23(0xf6)+_0x449583+'\x27\x20in\x20statistic');return _0x368f14;}async['getJobState'](){const _0x31433f=a57_0x18707b;if(!await utils_1[_0x31433f(0x10a)][_0x31433f(0xff)](this['filePath']))return this['initJobState']();const _0xc4c04c=await(0x0,promises_1[_0x31433f(0x105)])(job_detail_1[_0x31433f(0xed)]+'/'+job_1[_0x31433f(0x103)],{'encoding':'utf-8'});return JSON[_0x31433f(0xf1)](_0xc4c04c);}[a57_0x18707b(0xdc)](){const _0x4c8dc7=a57_0x18707b;return{'id':this[_0x4c8dc7(0xf4)],'status':logger_enums_1[_0x4c8dc7(0xe1)]['QUEUED'],'processed':[],'createdDate':new Date()[_0x4c8dc7(0xec)](),'successful':0x0,'failed':0x0};}[a57_0x18707b(0xf8)](_0x392f88){const _0x4f8419=a57_0x18707b;return _0x392f88['map'](_0x58a61b=>({'name':_0x58a61b,'status':logger_enums_1['ObjectStatus'][_0x4f8419(0xd9)],'failed':0x0,'successful':0x0}));}[a57_0x18707b(0xe6)](){const _0x22683f=a57_0x18707b;return(0x0,promises_1[_0x22683f(0xee)])(this[_0x22683f(0xdb)],JSON['stringify'](this[_0x22683f(0xdd)]));}}exports[a57_0x18707b(0xd8)]=LoggerJobState;