const a58_0x3e499a=a58_0x5b1b;function a58_0x5b1b(_0x3b3253,_0x2bb8b8){const _0x53c82d=a58_0x4fdb();return a58_0x5b1b=function(_0x436f8b,_0x581c43){_0x436f8b=_0x436f8b-0xfe;let _0x4fdb54=_0x53c82d[_0x436f8b];return _0x4fdb54;},a58_0x5b1b(_0x3b3253,_0x2bb8b8);}(function(_0x5d4656,_0x5b819f){const _0x2d2d2e=a58_0x5b1b,_0x14385d=_0x5d4656();while(!![]){try{const _0x344475=parseInt(_0x2d2d2e(0x104))/0x1+parseInt(_0x2d2d2e(0x101))/0x2+-parseInt(_0x2d2d2e(0x10c))/0x3+-parseInt(_0x2d2d2e(0x127))/0x4+-parseInt(_0x2d2d2e(0x108))/0x5+parseInt(_0x2d2d2e(0x130))/0x6+-parseInt(_0x2d2d2e(0x11a))/0x7*(-parseInt(_0x2d2d2e(0x12d))/0x8);if(_0x344475===_0x5b819f)break;else _0x14385d['push'](_0x14385d['shift']());}catch(_0x319832){_0x14385d['push'](_0x14385d['shift']());}}}(a58_0x4fdb,0xd57ac));const a58_0x581c43=(function(){let _0x34f632=!![];return function(_0x5d5a07,_0x3d1730){const _0xea4bd7=_0x34f632?function(){const _0x13ed6c=a58_0x5b1b;if(_0x3d1730){const _0x22d9b1=_0x3d1730[_0x13ed6c(0x128)](_0x5d5a07,arguments);return _0x3d1730=null,_0x22d9b1;}}:function(){};return _0x34f632=![],_0xea4bd7;};}()),a58_0x436f8b=a58_0x581c43(this,function(){const _0x351e3b=a58_0x5b1b;return a58_0x436f8b['toString']()[_0x351e3b(0x131)](_0x351e3b(0x137))[_0x351e3b(0x13b)]()['constructor'](a58_0x436f8b)[_0x351e3b(0x131)](_0x351e3b(0x137));});a58_0x436f8b();'use strict';var __importDefault=this&&this[a58_0x3e499a(0x106)]||function(_0x7fc0a7){return _0x7fc0a7&&_0x7fc0a7['__esModule']?_0x7fc0a7:{'default':_0x7fc0a7};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a58_0x3e499a(0x12b))),logger_enums_1=require(a58_0x3e499a(0x11b)),base_logger_1=require(a58_0x3e499a(0x10d)),promises_1=require(a58_0x3e499a(0x124)),job_detail_1=require('../../job-detail'),utils_1=require(a58_0x3e499a(0x105)),job_1=require(a58_0x3e499a(0x110));class LoggerJobState extends base_logger_1[a58_0x3e499a(0x122)]{constructor(){const _0x1fbbd0=a58_0x3e499a;super(...arguments),this[_0x1fbbd0(0x114)]=![];}get[a58_0x3e499a(0x103)](){return this['_isLoggerInit'];}set[a58_0x3e499a(0x103)](_0x2428ed){this['_isLoggerInit']=_0x2428ed;}get[a58_0x3e499a(0x10a)](){const _0x1c8f8a=a58_0x3e499a;if(!this['isLoggerInit'])throw new Error(_0x1c8f8a(0x11f));return this[_0x1c8f8a(0xff)];}get[a58_0x3e499a(0x12a)](){const _0x33b1d2=a58_0x3e499a;return path_1[_0x33b1d2(0x11c)][_0x33b1d2(0x119)](this[_0x33b1d2(0x107)],job_1['JOB_LOG_STATE_FILENAME']);}async[a58_0x3e499a(0x12c)](_0x2b7499){const _0x50c6b7=a58_0x3e499a;return this[_0x50c6b7(0xff)]=await this[_0x50c6b7(0x121)](),this[_0x50c6b7(0xff)]['processed']=this[_0x50c6b7(0x10e)](_0x2b7499),await this[_0x50c6b7(0x12f)](),await this['start'](),this[_0x50c6b7(0x103)]=!![],this;}[a58_0x3e499a(0x12e)](_0x5da07b,_0x3d55c7){const _0x35edcf=a58_0x3e499a;this[_0x35edcf(0xfe)](_0x5da07b)[_0x35edcf(0x13c)]=_0x3d55c7,this[_0x35edcf(0x102)]();}[a58_0x3e499a(0x129)](_0x161e40){const _0x2b2b7f=a58_0x3e499a;this[_0x2b2b7f(0x10a)][_0x2b2b7f(0x13c)]=_0x161e40,[logger_enums_1['JobStatus'][_0x2b2b7f(0x116)],logger_enums_1[_0x2b2b7f(0x100)][_0x2b2b7f(0x13a)]]['includes'](_0x161e40)&&(this[_0x2b2b7f(0x10a)][_0x2b2b7f(0x138)]=new Date()[_0x2b2b7f(0x139)]()),this[_0x2b2b7f(0x102)]();}['setJobError'](_0x575b85){const _0x4498bf=a58_0x3e499a;this[_0x4498bf(0x10a)][_0x4498bf(0x113)]=_0x575b85,this[_0x4498bf(0x102)]();}[a58_0x3e499a(0x133)](_0x4fd8a2,_0x227104,_0x58a33a){const _0x2c311c=a58_0x3e499a,_0x3329ea=this[_0x2c311c(0xfe)](_0x4fd8a2);_0x3329ea['successful']+=_0x227104,_0x3329ea[_0x2c311c(0x136)]+=_0x58a33a,this[_0x2c311c(0x10a)]['successful']+=_0x227104,this[_0x2c311c(0x10a)]['failed']+=_0x58a33a,this[_0x2c311c(0x102)]();}[a58_0x3e499a(0xfe)](_0x4f3c81){const _0x2bd7df=a58_0x3e499a;var _0x2c2013;const _0x3a69f1=(_0x2c2013=this['jobState'][_0x2bd7df(0x120)])===null||_0x2c2013===void 0x0?void 0x0:_0x2c2013[_0x2bd7df(0x135)](_0x8272c6=>_0x8272c6[_0x2bd7df(0x10f)]===_0x4f3c81);if(!_0x3a69f1)throw new Error(_0x2bd7df(0x132)+_0x4f3c81+_0x2bd7df(0x117));return _0x3a69f1;}async[a58_0x3e499a(0x121)](){const _0x37a6c8=a58_0x3e499a;if(!await utils_1[_0x37a6c8(0x123)][_0x37a6c8(0x11e)](this['filePath']))return this[_0x37a6c8(0x134)]();const _0x4737e4=await(0x0,promises_1[_0x37a6c8(0x111)])(job_detail_1[_0x37a6c8(0x115)]+'/'+job_1[_0x37a6c8(0x125)],{'encoding':_0x37a6c8(0x11d)});return JSON[_0x37a6c8(0x112)](_0x4737e4);}[a58_0x3e499a(0x134)](){const _0x3206a3=a58_0x3e499a;return{'id':this['_jobId'],'status':logger_enums_1[_0x3206a3(0x100)][_0x3206a3(0x118)],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}[a58_0x3e499a(0x10e)](_0x5120e5){const _0xe511e9=a58_0x3e499a;return _0x5120e5[_0xe511e9(0x126)](_0x2c6eeb=>({'name':_0x2c6eeb,'status':logger_enums_1['ObjectStatus'][_0xe511e9(0x118)],'failed':0x0,'successful':0x0}));}[a58_0x3e499a(0x12f)](){const _0x18adf4=a58_0x3e499a;return(0x0,promises_1[_0x18adf4(0x109)])(this[_0x18adf4(0x12a)],JSON['stringify'](this[_0x18adf4(0xff)]));}}exports[a58_0x3e499a(0x10b)]=LoggerJobState;function a58_0x4fdb(){const _0x249298=['initJobState','find','failed','(((.+)+)+)+$','completedDate','getTime','COMPLETED','toString','status','getObjectState','_jobState','JobStatus','2897342uYvgde','updateLoggerState','isLoggerInit','491001QdlpSV','@flosum/utils','__importDefault','_jobPath','4041630ufwpBd','writeFile','jobState','LoggerJobState','2078661iVvxwL','./base-logger','initObjectStatistics','name','../../../../../constants/job','readFile','parse','error','_isLoggerInit','jobStorePath','FAILED','\x27\x20in\x20statistic','QUEUED','join','7nhupbm','../../enums/logger.enums','default','utf-8','isExistsPath','Logger\x20Job\x20State\x20wasn\x27t\x20init','processed','getJobState','BaseLogger','FsUtils','fs/promises','JOB_LOG_STATE_FILENAME','map','973580UExYPl','apply','setJobStatus','filePath','path','init','2352472vINJxE','setObjectStatus','write','2311734LDELcD','search','Cannot\x20find\x20object\x20\x27','updateObjectProcess'];a58_0x4fdb=function(){return _0x249298;};return a58_0x4fdb();}