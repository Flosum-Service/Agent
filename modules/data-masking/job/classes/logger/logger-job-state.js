const a58_0x25c4b1=a58_0x2f85;(function(_0x2352b7,_0x522496){const _0x92055c=a58_0x2f85,_0x2b3dc2=_0x2352b7();while(!![]){try{const _0x32069b=parseInt(_0x92055c(0xc2))/0x1*(-parseInt(_0x92055c(0xbf))/0x2)+parseInt(_0x92055c(0xd7))/0x3*(parseInt(_0x92055c(0xda))/0x4)+-parseInt(_0x92055c(0xac))/0x5*(parseInt(_0x92055c(0xad))/0x6)+-parseInt(_0x92055c(0xce))/0x7+-parseInt(_0x92055c(0xb4))/0x8*(parseInt(_0x92055c(0xd4))/0x9)+-parseInt(_0x92055c(0xb9))/0xa+-parseInt(_0x92055c(0xa9))/0xb*(-parseInt(_0x92055c(0xb8))/0xc);if(_0x32069b===_0x522496)break;else _0x2b3dc2['push'](_0x2b3dc2['shift']());}catch(_0x2ee557){_0x2b3dc2['push'](_0x2b3dc2['shift']());}}}(a58_0x4c9b,0x4f91a));const a58_0x420a47=(function(){let _0x7394cd=!![];return function(_0x10d364,_0x22f8f9){const _0x5d2eb7=_0x7394cd?function(){const _0x2ede4d=a58_0x2f85;if(_0x22f8f9){const _0x4073d1=_0x22f8f9[_0x2ede4d(0xd1)](_0x10d364,arguments);return _0x22f8f9=null,_0x4073d1;}}:function(){};return _0x7394cd=![],_0x5d2eb7;};}()),a58_0x542916=a58_0x420a47(this,function(){const _0x26ad45=a58_0x2f85;return a58_0x542916[_0x26ad45(0xbc)]()[_0x26ad45(0xa7)](_0x26ad45(0xb1))[_0x26ad45(0xbc)]()[_0x26ad45(0xd8)](a58_0x542916)[_0x26ad45(0xa7)]('(((.+)+)+)+$');});a58_0x542916();function a58_0x4c9b(){const _0x5f4885=['initJobState','apply','isLoggerInit','LoggerJobState','9vPtKvg','map','error','187791RSblVi','constructor','__importDefault','12lazmjp','initObjectStatistics','jobState','Logger\x20Job\x20State\x20wasn\x27t\x20init','jobStorePath','defineProperty','isExistsPath','failed','_jobState','path','parse','write','default','ObjectStatus','search','fs/promises','3905PzVrkf','filePath','setObjectStatus','65dMXCSX','152826PCyDbN','../../enums/logger.enums','_jobPath','join','(((.+)+)+)+$','setJobStatus','@flosum/utils','3215512rXnUqQ','includes','getJobState','successful','75324wVkefe','5962610JCzLkt','writeFile','_isLoggerInit','toString','COMPLETED','readFile','6858ppQyxu','getObjectState','JOB_LOG_STATE_FILENAME','74TiNBEJ','name','JobStatus','stringify','utf-8','__esModule','../../job-detail','FsUtils','status','getTime','QUEUED','processed','3550001MeJJfx','updateLoggerState'];a58_0x4c9b=function(){return _0x5f4885;};return a58_0x4c9b();}'use strict';function a58_0x2f85(_0x57b43a,_0x57d894){const _0x2a1d32=a58_0x4c9b();return a58_0x2f85=function(_0x542916,_0x420a47){_0x542916=_0x542916-0xa7;let _0x4c9bb1=_0x2a1d32[_0x542916];return _0x4c9bb1;},a58_0x2f85(_0x57b43a,_0x57d894);}var __importDefault=this&&this[a58_0x25c4b1(0xd9)]||function(_0xa525d1){return _0xa525d1&&_0xa525d1['__esModule']?_0xa525d1:{'default':_0xa525d1};};Object[a58_0x25c4b1(0xdf)](exports,a58_0x25c4b1(0xc7),{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a58_0x25c4b1(0xe3))),logger_enums_1=require(a58_0x25c4b1(0xae)),base_logger_1=require('./base-logger'),promises_1=require(a58_0x25c4b1(0xa8)),job_detail_1=require(a58_0x25c4b1(0xc8)),utils_1=require(a58_0x25c4b1(0xb3)),job_1=require('../../../../../constants/job');class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){const _0x5cc508=a58_0x25c4b1;super(...arguments),this[_0x5cc508(0xbb)]=![];}get[a58_0x25c4b1(0xd2)](){return this['_isLoggerInit'];}set[a58_0x25c4b1(0xd2)](_0x530bff){const _0x37ace9=a58_0x25c4b1;this[_0x37ace9(0xbb)]=_0x530bff;}get[a58_0x25c4b1(0xdc)](){const _0x3405ef=a58_0x25c4b1;if(!this[_0x3405ef(0xd2)])throw new Error(_0x3405ef(0xdd));return this[_0x3405ef(0xe2)];}get[a58_0x25c4b1(0xaa)](){const _0x32eb9b=a58_0x25c4b1;return path_1[_0x32eb9b(0xe6)][_0x32eb9b(0xb0)](this[_0x32eb9b(0xaf)],job_1[_0x32eb9b(0xc1)]);}async['init'](_0x45a72e){const _0x4d3169=a58_0x25c4b1;return this[_0x4d3169(0xe2)]=await this[_0x4d3169(0xb6)](),this[_0x4d3169(0xe2)]['processed']=this[_0x4d3169(0xdb)](_0x45a72e),await this['write'](),await this['start'](),this['isLoggerInit']=!![],this;}[a58_0x25c4b1(0xab)](_0x15c819,_0x562f11){const _0x3b1042=a58_0x25c4b1;this['getObjectState'](_0x15c819)[_0x3b1042(0xca)]=_0x562f11,this[_0x3b1042(0xcf)]();}[a58_0x25c4b1(0xb2)](_0x4d308f){const _0x73aa8a=a58_0x25c4b1;this[_0x73aa8a(0xdc)][_0x73aa8a(0xca)]=_0x4d308f,[logger_enums_1[_0x73aa8a(0xc4)]['FAILED'],logger_enums_1[_0x73aa8a(0xc4)][_0x73aa8a(0xbd)]][_0x73aa8a(0xb5)](_0x4d308f)&&(this[_0x73aa8a(0xdc)]['completedDate']=new Date()[_0x73aa8a(0xcb)]()),this[_0x73aa8a(0xcf)]();}['setJobError'](_0x23dd01){const _0x2c16a3=a58_0x25c4b1;this[_0x2c16a3(0xdc)][_0x2c16a3(0xd6)]=_0x23dd01,this[_0x2c16a3(0xcf)]();}['updateObjectProcess'](_0x3255f8,_0x2ccbf5,_0x517f9e){const _0x1c603c=a58_0x25c4b1,_0x2b9e2a=this[_0x1c603c(0xc0)](_0x3255f8);_0x2b9e2a[_0x1c603c(0xb7)]+=_0x2ccbf5,_0x2b9e2a[_0x1c603c(0xe1)]+=_0x517f9e,this[_0x1c603c(0xdc)][_0x1c603c(0xb7)]+=_0x2ccbf5,this[_0x1c603c(0xdc)][_0x1c603c(0xe1)]+=_0x517f9e,this[_0x1c603c(0xcf)]();}[a58_0x25c4b1(0xc0)](_0x330ed4){const _0x32eece=a58_0x25c4b1;var _0x427f62;const _0x113d9b=(_0x427f62=this[_0x32eece(0xdc)][_0x32eece(0xcd)])===null||_0x427f62===void 0x0?void 0x0:_0x427f62['find'](_0x5c407a=>_0x5c407a[_0x32eece(0xc3)]===_0x330ed4);if(!_0x113d9b)throw new Error('Cannot\x20find\x20object\x20\x27'+_0x330ed4+'\x27\x20in\x20statistic');return _0x113d9b;}async[a58_0x25c4b1(0xb6)](){const _0x41d0a4=a58_0x25c4b1;if(!await utils_1[_0x41d0a4(0xc9)][_0x41d0a4(0xe0)](this[_0x41d0a4(0xaa)]))return this[_0x41d0a4(0xd0)]();const _0x1419d8=await(0x0,promises_1[_0x41d0a4(0xbe)])(job_detail_1[_0x41d0a4(0xde)]+'/'+job_1[_0x41d0a4(0xc1)],{'encoding':_0x41d0a4(0xc6)});return JSON[_0x41d0a4(0xe4)](_0x1419d8);}[a58_0x25c4b1(0xd0)](){const _0x48d6b1=a58_0x25c4b1;return{'id':this['_jobId'],'status':logger_enums_1[_0x48d6b1(0xc4)]['QUEUED'],'processed':[],'createdDate':new Date()[_0x48d6b1(0xcb)](),'successful':0x0,'failed':0x0};}[a58_0x25c4b1(0xdb)](_0x4ab9a3){const _0x585f49=a58_0x25c4b1;return _0x4ab9a3[_0x585f49(0xd5)](_0x22fa99=>({'name':_0x22fa99,'status':logger_enums_1[_0x585f49(0xe7)][_0x585f49(0xcc)],'failed':0x0,'successful':0x0}));}[a58_0x25c4b1(0xe5)](){const _0x3e074a=a58_0x25c4b1;return(0x0,promises_1[_0x3e074a(0xba)])(this[_0x3e074a(0xaa)],JSON[_0x3e074a(0xc5)](this[_0x3e074a(0xe2)]));}}exports[a58_0x25c4b1(0xd3)]=LoggerJobState;