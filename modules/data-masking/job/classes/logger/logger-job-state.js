const a58_0x495200=a58_0x5ea1;(function(_0x13bd61,_0x15aba7){const _0x1635e0=a58_0x5ea1,_0x421b88=_0x13bd61();while(!![]){try{const _0x45049d=parseInt(_0x1635e0(0xb4))/0x1+parseInt(_0x1635e0(0x8b))/0x2*(parseInt(_0x1635e0(0xa5))/0x3)+-parseInt(_0x1635e0(0x7d))/0x4+parseInt(_0x1635e0(0xb1))/0x5*(parseInt(_0x1635e0(0xb9))/0x6)+-parseInt(_0x1635e0(0x80))/0x7+parseInt(_0x1635e0(0x9e))/0x8*(parseInt(_0x1635e0(0x7f))/0x9)+parseInt(_0x1635e0(0x8c))/0xa*(-parseInt(_0x1635e0(0x98))/0xb);if(_0x45049d===_0x15aba7)break;else _0x421b88['push'](_0x421b88['shift']());}catch(_0xab2470){_0x421b88['push'](_0x421b88['shift']());}}}(a58_0x8ad2,0xa966c));const a58_0x1949cc=(function(){let _0x1cd0c0=!![];return function(_0x5e6a80,_0x3fd4c6){const _0x160b23=_0x1cd0c0?function(){const _0x29e6c1=a58_0x5ea1;if(_0x3fd4c6){const _0x4f4a1a=_0x3fd4c6[_0x29e6c1(0xb3)](_0x5e6a80,arguments);return _0x3fd4c6=null,_0x4f4a1a;}}:function(){};return _0x1cd0c0=![],_0x160b23;};}()),a58_0x544be8=a58_0x1949cc(this,function(){const _0x33e546=a58_0x5ea1;return a58_0x544be8[_0x33e546(0xab)]()['search'](_0x33e546(0xa2))[_0x33e546(0xab)]()[_0x33e546(0xa4)](a58_0x544be8)[_0x33e546(0xaa)](_0x33e546(0xa2));});function a58_0x8ad2(){const _0x42bc00=['FsUtils','Logger\x20Job\x20State\x20wasn\x27t\x20init','writeFile','includes','@flosum/utils','55enQLCJ','\x27\x20in\x20statistic','updateObjectProcess','path','BaseLogger','./base-logger','44328tkPWzR','write','updateLoggerState','COMPLETED','(((.+)+)+)+$','defineProperty','constructor','326877drDIqF','__esModule','filePath','FAILED','../../job-detail','search','toString','jobState','isExistsPath','_jobPath','__importDefault','map','6434665xjGWvx','JOB_LOG_STATE_FILENAME','apply','196663qCpKBT','JobStatus','initObjectStatistics','completedDate','getJobState','6racXqQ','setJobError','isLoggerInit','failed','_jobState','3679552lBQSFw','LoggerJobState','1431rfUcDr','552608MqUWbG','../../enums/logger.enums','fs/promises','ObjectStatus','initJobState','start','processed','../../../../../constants/job','QUEUED','utf-8','init','20QmrsiH','3523010XhmAia','getObjectState','_isLoggerInit','getTime','status','Cannot\x20find\x20object\x20\x27','successful'];a58_0x8ad2=function(){return _0x42bc00;};return a58_0x8ad2();}a58_0x544be8();'use strict';var __importDefault=this&&this[a58_0x495200(0xaf)]||function(_0x57eaa4){const _0x4b2c39=a58_0x495200;return _0x57eaa4&&_0x57eaa4[_0x4b2c39(0xa6)]?_0x57eaa4:{'default':_0x57eaa4};};Object[a58_0x495200(0xa3)](exports,a58_0x495200(0xa6),{'value':!![]}),exports[a58_0x495200(0x7e)]=void 0x0;function a58_0x5ea1(_0x32ce3d,_0x49dfe5){const _0x47b5a5=a58_0x8ad2();return a58_0x5ea1=function(_0x544be8,_0x1949cc){_0x544be8=_0x544be8-0x7a;let _0x8ad28c=_0x47b5a5[_0x544be8];return _0x8ad28c;},a58_0x5ea1(_0x32ce3d,_0x49dfe5);}const path_1=__importDefault(require(a58_0x495200(0x9b))),logger_enums_1=require(a58_0x495200(0x81)),base_logger_1=require(a58_0x495200(0x9d)),promises_1=require(a58_0x495200(0x82)),job_detail_1=require(a58_0x495200(0xa9)),utils_1=require(a58_0x495200(0x97)),job_1=require(a58_0x495200(0x87));class LoggerJobState extends base_logger_1[a58_0x495200(0x9c)]{constructor(){super(...arguments),this['_isLoggerInit']=![];}get[a58_0x495200(0x7a)](){const _0x45a78a=a58_0x495200;return this[_0x45a78a(0x8e)];}set['isLoggerInit'](_0x251a00){const _0xa68d33=a58_0x495200;this[_0xa68d33(0x8e)]=_0x251a00;}get['jobState'](){const _0x58b784=a58_0x495200;if(!this[_0x58b784(0x7a)])throw new Error(_0x58b784(0x94));return this[_0x58b784(0x7c)];}get['filePath'](){const _0x5f3c1a=a58_0x495200;return path_1['default']['join'](this[_0x5f3c1a(0xae)],job_1[_0x5f3c1a(0xb2)]);}async[a58_0x495200(0x8a)](_0x4260ad){const _0x5d8a2b=a58_0x495200;return this[_0x5d8a2b(0x7c)]=await this[_0x5d8a2b(0xb8)](),this['_jobState'][_0x5d8a2b(0x86)]=this[_0x5d8a2b(0xb6)](_0x4260ad),await this[_0x5d8a2b(0x9f)](),await this[_0x5d8a2b(0x85)](),this['isLoggerInit']=!![],this;}['setObjectStatus'](_0x909189,_0x32931b){const _0x4bfffa=a58_0x495200;this[_0x4bfffa(0x8d)](_0x909189)[_0x4bfffa(0x90)]=_0x32931b,this[_0x4bfffa(0xa0)]();}['setJobStatus'](_0x4face0){const _0x1f225a=a58_0x495200;this[_0x1f225a(0xac)][_0x1f225a(0x90)]=_0x4face0,[logger_enums_1[_0x1f225a(0xb5)][_0x1f225a(0xa8)],logger_enums_1[_0x1f225a(0xb5)][_0x1f225a(0xa1)]][_0x1f225a(0x96)](_0x4face0)&&(this['jobState'][_0x1f225a(0xb7)]=new Date()['getTime']()),this[_0x1f225a(0xa0)]();}[a58_0x495200(0xba)](_0x5203a4){const _0x114a75=a58_0x495200;this[_0x114a75(0xac)]['error']=_0x5203a4,this[_0x114a75(0xa0)]();}[a58_0x495200(0x9a)](_0x3eec6e,_0x47c1e7,_0x1743d3){const _0x3ba135=a58_0x495200,_0x3b6dce=this['getObjectState'](_0x3eec6e);_0x3b6dce[_0x3ba135(0x92)]+=_0x47c1e7,_0x3b6dce[_0x3ba135(0x7b)]+=_0x1743d3,this[_0x3ba135(0xac)][_0x3ba135(0x92)]+=_0x47c1e7,this[_0x3ba135(0xac)]['failed']+=_0x1743d3,this[_0x3ba135(0xa0)]();}[a58_0x495200(0x8d)](_0x3a40b4){const _0xf290b2=a58_0x495200;var _0x537b44;const _0x513764=(_0x537b44=this['jobState'][_0xf290b2(0x86)])===null||_0x537b44===void 0x0?void 0x0:_0x537b44['find'](_0x4549b6=>_0x4549b6['name']===_0x3a40b4);if(!_0x513764)throw new Error(_0xf290b2(0x91)+_0x3a40b4+_0xf290b2(0x99));return _0x513764;}async[a58_0x495200(0xb8)](){const _0x2020a2=a58_0x495200;if(!await utils_1[_0x2020a2(0x93)][_0x2020a2(0xad)](this[_0x2020a2(0xa7)]))return this[_0x2020a2(0x84)]();const _0xf96546=await(0x0,promises_1['readFile'])(job_detail_1['jobStorePath']+'/'+job_1['JOB_LOG_STATE_FILENAME'],{'encoding':_0x2020a2(0x89)});return JSON['parse'](_0xf96546);}[a58_0x495200(0x84)](){const _0x27cd23=a58_0x495200;return{'id':this['_jobId'],'status':logger_enums_1[_0x27cd23(0xb5)]['QUEUED'],'processed':[],'createdDate':new Date()[_0x27cd23(0x8f)](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x4b46d8){const _0x447055=a58_0x495200;return _0x4b46d8[_0x447055(0xb0)](_0x2dbb20=>({'name':_0x2dbb20,'status':logger_enums_1[_0x447055(0x83)][_0x447055(0x88)],'failed':0x0,'successful':0x0}));}[a58_0x495200(0x9f)](){const _0x1c880c=a58_0x495200;return(0x0,promises_1[_0x1c880c(0x95)])(this[_0x1c880c(0xa7)],JSON['stringify'](this['_jobState']));}}exports[a58_0x495200(0x7e)]=LoggerJobState;