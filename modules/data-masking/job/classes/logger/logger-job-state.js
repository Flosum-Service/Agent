function a57_0x4d4b(){const _0x3b2b42=['completedDate','isExistsPath','path','parse','924823yVEPqx','getObjectState','readFile','getTime','setJobError','JobStatus','\x27\x20in\x20statistic','(((.+)+)+)+$','LoggerJobState','defineProperty','isLoggerInit','3UlVYXD','failed','setObjectStatus','./base-logger','QUEUED','_jobId','ObjectStatus','123912ZVggYD','init','_jobPath','initJobState','processed','Cannot\x20find\x20object\x20\x27','BaseLogger','__esModule','477jvidQK','setJobStatus','fs/promises','constructor','Logger\x20Job\x20State\x20wasn\x27t\x20init','getJobState','status','jobState','error','find','search','map','apply','filePath','9298434CRMSeT','560hhOwrD','25611377pKxEoO','stringify','1669932gfKZkG','__importDefault','87310IlfucG','FAILED','@flosum/utils','write','../../job-detail','successful','_jobState','updateLoggerState','_isLoggerInit','initObjectStatistics','1551916TyjCss','JOB_LOG_STATE_FILENAME','../../enums/logger.enums','updateObjectProcess','toString','5DGVNFB'];a57_0x4d4b=function(){return _0x3b2b42;};return a57_0x4d4b();}const a57_0x2c4c96=a57_0x41e2;function a57_0x41e2(_0x2c8db7,_0x21f505){const _0x124256=a57_0x4d4b();return a57_0x41e2=function(_0x16b607,_0x35256f){_0x16b607=_0x16b607-0x177;let _0x4d4b6f=_0x124256[_0x16b607];return _0x4d4b6f;},a57_0x41e2(_0x2c8db7,_0x21f505);}(function(_0xa7b484,_0x23254d){const _0x472161=a57_0x41e2,_0x8fbc8d=_0xa7b484();while(!![]){try{const _0x49a3e4=-parseInt(_0x472161(0x1af))/0x1+parseInt(_0x472161(0x1a5))/0x2*(-parseInt(_0x472161(0x178))/0x3)+parseInt(_0x472161(0x199))/0x4+-parseInt(_0x472161(0x1aa))/0x5*(-parseInt(_0x472161(0x195))/0x6)+parseInt(_0x472161(0x196))/0x7*(-parseInt(_0x472161(0x17f))/0x8)+parseInt(_0x472161(0x187))/0x9*(-parseInt(_0x472161(0x19b))/0xa)+parseInt(_0x472161(0x197))/0xb;if(_0x49a3e4===_0x23254d)break;else _0x8fbc8d['push'](_0x8fbc8d['shift']());}catch(_0x473482){_0x8fbc8d['push'](_0x8fbc8d['shift']());}}}(a57_0x4d4b,0xd9fd5));const a57_0x35256f=(function(){let _0x1a4762=!![];return function(_0x40ad26,_0x2237ae){const _0x57b00b=_0x1a4762?function(){const _0x2aaeba=a57_0x41e2;if(_0x2237ae){const _0x3e144c=_0x2237ae[_0x2aaeba(0x193)](_0x40ad26,arguments);return _0x2237ae=null,_0x3e144c;}}:function(){};return _0x1a4762=![],_0x57b00b;};}()),a57_0x16b607=a57_0x35256f(this,function(){const _0x599a1a=a57_0x41e2;return a57_0x16b607[_0x599a1a(0x1a9)]()[_0x599a1a(0x191)](_0x599a1a(0x1b6))[_0x599a1a(0x1a9)]()[_0x599a1a(0x18a)](a57_0x16b607)[_0x599a1a(0x191)]('(((.+)+)+)+$');});a57_0x16b607();'use strict';var __importDefault=this&&this[a57_0x2c4c96(0x19a)]||function(_0x1daaf1){const _0x315ca9=a57_0x2c4c96;return _0x1daaf1&&_0x1daaf1[_0x315ca9(0x186)]?_0x1daaf1:{'default':_0x1daaf1};};Object[a57_0x2c4c96(0x1b8)](exports,a57_0x2c4c96(0x186),{'value':!![]}),exports[a57_0x2c4c96(0x1b7)]=void 0x0;const path_1=__importDefault(require(a57_0x2c4c96(0x1ad))),logger_enums_1=require(a57_0x2c4c96(0x1a7)),base_logger_1=require(a57_0x2c4c96(0x17b)),promises_1=require(a57_0x2c4c96(0x189)),job_detail_1=require(a57_0x2c4c96(0x19f)),utils_1=require(a57_0x2c4c96(0x19d)),job_1=require('../../../../../constants/job');class LoggerJobState extends base_logger_1[a57_0x2c4c96(0x185)]{constructor(){const _0x35a229=a57_0x2c4c96;super(...arguments),this[_0x35a229(0x1a3)]=![];}get['isLoggerInit'](){const _0x474123=a57_0x2c4c96;return this[_0x474123(0x1a3)];}set[a57_0x2c4c96(0x177)](_0x4effbb){const _0x58c200=a57_0x2c4c96;this[_0x58c200(0x1a3)]=_0x4effbb;}get[a57_0x2c4c96(0x18e)](){const _0x70ad16=a57_0x2c4c96;if(!this['isLoggerInit'])throw new Error(_0x70ad16(0x18b));return this['_jobState'];}get[a57_0x2c4c96(0x194)](){const _0x1b0c66=a57_0x2c4c96;return path_1['default']['join'](this[_0x1b0c66(0x181)],job_1[_0x1b0c66(0x1a6)]);}async[a57_0x2c4c96(0x180)](_0x594c23){const _0x52e54c=a57_0x2c4c96;return this[_0x52e54c(0x1a1)]=await this[_0x52e54c(0x18c)](),this[_0x52e54c(0x1a1)][_0x52e54c(0x183)]=this[_0x52e54c(0x1a4)](_0x594c23),await this['write'](),await this['start'](),this[_0x52e54c(0x177)]=!![],this;}[a57_0x2c4c96(0x17a)](_0x2d1750,_0x449eb4){const _0x3d34c2=a57_0x2c4c96;this['getObjectState'](_0x2d1750)['status']=_0x449eb4,this[_0x3d34c2(0x1a2)]();}[a57_0x2c4c96(0x188)](_0x899b2d){const _0x392615=a57_0x2c4c96;this[_0x392615(0x18e)][_0x392615(0x18d)]=_0x899b2d,[logger_enums_1['JobStatus'][_0x392615(0x19c)],logger_enums_1[_0x392615(0x1b4)]['COMPLETED']]['includes'](_0x899b2d)&&(this[_0x392615(0x18e)][_0x392615(0x1ab)]=new Date()[_0x392615(0x1b2)]()),this['updateLoggerState']();}[a57_0x2c4c96(0x1b3)](_0x405678){const _0x397aab=a57_0x2c4c96;this[_0x397aab(0x18e)][_0x397aab(0x18f)]=_0x405678,this[_0x397aab(0x1a2)]();}[a57_0x2c4c96(0x1a8)](_0x253f4c,_0x396b0d,_0x1e7ab4){const _0x131fbe=a57_0x2c4c96,_0x3b60de=this[_0x131fbe(0x1b0)](_0x253f4c);_0x3b60de['successful']+=_0x396b0d,_0x3b60de[_0x131fbe(0x179)]+=_0x1e7ab4,this[_0x131fbe(0x18e)][_0x131fbe(0x1a0)]+=_0x396b0d,this[_0x131fbe(0x18e)]['failed']+=_0x1e7ab4,this['updateLoggerState']();}[a57_0x2c4c96(0x1b0)](_0x55668f){const _0x588442=a57_0x2c4c96;var _0x430a26;const _0x3f62da=(_0x430a26=this[_0x588442(0x18e)][_0x588442(0x183)])===null||_0x430a26===void 0x0?void 0x0:_0x430a26[_0x588442(0x190)](_0x212337=>_0x212337['name']===_0x55668f);if(!_0x3f62da)throw new Error(_0x588442(0x184)+_0x55668f+_0x588442(0x1b5));return _0x3f62da;}async['getJobState'](){const _0x5cba7b=a57_0x2c4c96;if(!await utils_1['FsUtils'][_0x5cba7b(0x1ac)](this[_0x5cba7b(0x194)]))return this[_0x5cba7b(0x182)]();const _0x449289=await(0x0,promises_1[_0x5cba7b(0x1b1)])(job_detail_1['jobStorePath']+'/'+job_1[_0x5cba7b(0x1a6)],{'encoding':'utf-8'});return JSON[_0x5cba7b(0x1ae)](_0x449289);}[a57_0x2c4c96(0x182)](){const _0x6b9ada=a57_0x2c4c96;return{'id':this[_0x6b9ada(0x17d)],'status':logger_enums_1['JobStatus'][_0x6b9ada(0x17c)],'processed':[],'createdDate':new Date()[_0x6b9ada(0x1b2)](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x504fd3){const _0x2ff6fd=a57_0x2c4c96;return _0x504fd3[_0x2ff6fd(0x192)](_0x4789a6=>({'name':_0x4789a6,'status':logger_enums_1[_0x2ff6fd(0x17e)]['QUEUED'],'failed':0x0,'successful':0x0}));}[a57_0x2c4c96(0x19e)](){const _0x37503f=a57_0x2c4c96;return(0x0,promises_1['writeFile'])(this[_0x37503f(0x194)],JSON[_0x37503f(0x198)](this['_jobState']));}}exports[a57_0x2c4c96(0x1b7)]=LoggerJobState;