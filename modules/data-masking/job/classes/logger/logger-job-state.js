function a58_0x2c22(_0x637f37,_0x43d8a5){const _0x2ecb82=a58_0x1656();return a58_0x2c22=function(_0x4cc8ca,_0x4a5cb3){_0x4cc8ca=_0x4cc8ca-0x1a8;let _0x165684=_0x2ecb82[_0x4cc8ca];return _0x165684;},a58_0x2c22(_0x637f37,_0x43d8a5);}const a58_0x46b082=a58_0x2c22;function a58_0x1656(){const _0x1094ee=['error','join','../../../../../constants/job','map','28240eqaENq','isLoggerInit','fs/promises','Cannot\x20find\x20object\x20\x27','LoggerJobState','defineProperty','jobState','getJobState','556893xvfxBW','JobStatus','24AqxpeC','includes','4699520uJIGBI','failed','../../enums/logger.enums','getTime','__importDefault','filePath','constructor','4498DBZomO','8057258UImdDv','writeFile','name','updateObjectProcess','JOB_LOG_STATE_FILENAME','\x27\x20in\x20statistic','initObjectStatistics','QUEUED','setObjectStatus','getObjectState','readFile','initJobState','4626360JHYvdh','processed','path','write','./base-logger','390nKUdpQ','apply','_isLoggerInit','successful','12hnRqYR','stringify','completedDate','default','391307auVQAB','isExistsPath','@flosum/utils','_jobState','parse','updateLoggerState','BaseLogger','setJobStatus','search','18wVMlJx','toString','start','../../job-detail','status','ObjectStatus','__esModule'];a58_0x1656=function(){return _0x1094ee;};return a58_0x1656();}(function(_0x1d5561,_0x31ddb1){const _0x285bee=a58_0x2c22,_0x114c70=_0x1d5561();while(!![]){try{const _0x3e0255=parseInt(_0x285bee(0x1d1))/0x1*(-parseInt(_0x285bee(0x1bf))/0x2)+-parseInt(_0x285bee(0x1b4))/0x3*(-parseInt(_0x285bee(0x1d5))/0x4)+parseInt(_0x285bee(0x1cc))/0x5+parseInt(_0x285bee(0x1b6))/0x6*(-parseInt(_0x285bee(0x1d9))/0x7)+-parseInt(_0x285bee(0x1b8))/0x8+-parseInt(_0x285bee(0x1e2))/0x9*(-parseInt(_0x285bee(0x1ac))/0xa)+parseInt(_0x285bee(0x1c0))/0xb;if(_0x3e0255===_0x31ddb1)break;else _0x114c70['push'](_0x114c70['shift']());}catch(_0x1f7058){_0x114c70['push'](_0x114c70['shift']());}}}(a58_0x1656,0x81ea9));const a58_0x4a5cb3=(function(){let _0x371d2a=!![];return function(_0x56456a,_0x53b94d){const _0x4c2a67=_0x371d2a?function(){const _0x38facf=a58_0x2c22;if(_0x53b94d){const _0x569c90=_0x53b94d[_0x38facf(0x1d2)](_0x56456a,arguments);return _0x53b94d=null,_0x569c90;}}:function(){};return _0x371d2a=![],_0x4c2a67;};}()),a58_0x4cc8ca=a58_0x4a5cb3(this,function(){const _0x3a01ac=a58_0x2c22;return a58_0x4cc8ca[_0x3a01ac(0x1e3)]()[_0x3a01ac(0x1e1)]('(((.+)+)+)+$')[_0x3a01ac(0x1e3)]()[_0x3a01ac(0x1be)](a58_0x4cc8ca)[_0x3a01ac(0x1e1)]('(((.+)+)+)+$');});a58_0x4cc8ca();'use strict';var __importDefault=this&&this[a58_0x46b082(0x1bc)]||function(_0x396498){const _0x32fbb2=a58_0x46b082;return _0x396498&&_0x396498[_0x32fbb2(0x1e8)]?_0x396498:{'default':_0x396498};};Object[a58_0x46b082(0x1b1)](exports,a58_0x46b082(0x1e8),{'value':!![]}),exports[a58_0x46b082(0x1b0)]=void 0x0;const path_1=__importDefault(require(a58_0x46b082(0x1ce))),logger_enums_1=require(a58_0x46b082(0x1ba)),base_logger_1=require(a58_0x46b082(0x1d0)),promises_1=require(a58_0x46b082(0x1ae)),job_detail_1=require(a58_0x46b082(0x1e5)),utils_1=require(a58_0x46b082(0x1db)),job_1=require(a58_0x46b082(0x1aa));class LoggerJobState extends base_logger_1[a58_0x46b082(0x1df)]{constructor(){const _0x18e097=a58_0x46b082;super(...arguments),this[_0x18e097(0x1d3)]=![];}get['isLoggerInit'](){const _0x3cbedd=a58_0x46b082;return this[_0x3cbedd(0x1d3)];}set[a58_0x46b082(0x1ad)](_0x1346cb){const _0x152910=a58_0x46b082;this[_0x152910(0x1d3)]=_0x1346cb;}get['jobState'](){const _0x244d74=a58_0x46b082;if(!this['isLoggerInit'])throw new Error('Logger\x20Job\x20State\x20wasn\x27t\x20init');return this[_0x244d74(0x1dc)];}get[a58_0x46b082(0x1bd)](){const _0x427ddc=a58_0x46b082;return path_1[_0x427ddc(0x1d8)][_0x427ddc(0x1a9)](this['_jobPath'],job_1[_0x427ddc(0x1c4)]);}async['init'](_0x11fdbd){const _0x1d5fd8=a58_0x46b082;return this[_0x1d5fd8(0x1dc)]=await this[_0x1d5fd8(0x1b3)](),this['_jobState'][_0x1d5fd8(0x1cd)]=this[_0x1d5fd8(0x1c6)](_0x11fdbd),await this['write'](),await this[_0x1d5fd8(0x1e4)](),this['isLoggerInit']=!![],this;}[a58_0x46b082(0x1c8)](_0x74f938,_0x2a362e){const _0x1cd0ae=a58_0x46b082;this[_0x1cd0ae(0x1c9)](_0x74f938)[_0x1cd0ae(0x1e6)]=_0x2a362e,this[_0x1cd0ae(0x1de)]();}[a58_0x46b082(0x1e0)](_0x214ead){const _0xc600ee=a58_0x46b082;this[_0xc600ee(0x1b2)][_0xc600ee(0x1e6)]=_0x214ead,[logger_enums_1[_0xc600ee(0x1b5)]['FAILED'],logger_enums_1[_0xc600ee(0x1b5)]['COMPLETED']][_0xc600ee(0x1b7)](_0x214ead)&&(this[_0xc600ee(0x1b2)][_0xc600ee(0x1d7)]=new Date()[_0xc600ee(0x1bb)]()),this['updateLoggerState']();}['setJobError'](_0x46ffdf){const _0x43891f=a58_0x46b082;this[_0x43891f(0x1b2)][_0x43891f(0x1a8)]=_0x46ffdf,this[_0x43891f(0x1de)]();}[a58_0x46b082(0x1c3)](_0x591ca8,_0x1eecf8,_0x46ff0b){const _0x2e5078=a58_0x46b082,_0x10950c=this[_0x2e5078(0x1c9)](_0x591ca8);_0x10950c[_0x2e5078(0x1d4)]+=_0x1eecf8,_0x10950c['failed']+=_0x46ff0b,this[_0x2e5078(0x1b2)]['successful']+=_0x1eecf8,this[_0x2e5078(0x1b2)][_0x2e5078(0x1b9)]+=_0x46ff0b,this[_0x2e5078(0x1de)]();}[a58_0x46b082(0x1c9)](_0x5e33b9){const _0x56350b=a58_0x46b082;var _0x1b20fb;const _0x355187=(_0x1b20fb=this[_0x56350b(0x1b2)][_0x56350b(0x1cd)])===null||_0x1b20fb===void 0x0?void 0x0:_0x1b20fb['find'](_0x5b1df9=>_0x5b1df9[_0x56350b(0x1c2)]===_0x5e33b9);if(!_0x355187)throw new Error(_0x56350b(0x1af)+_0x5e33b9+_0x56350b(0x1c5));return _0x355187;}async['getJobState'](){const _0x3e8a16=a58_0x46b082;if(!await utils_1['FsUtils'][_0x3e8a16(0x1da)](this[_0x3e8a16(0x1bd)]))return this[_0x3e8a16(0x1cb)]();const _0x5b7fd6=await(0x0,promises_1[_0x3e8a16(0x1ca)])(job_detail_1['jobStorePath']+'/'+job_1[_0x3e8a16(0x1c4)],{'encoding':'utf-8'});return JSON[_0x3e8a16(0x1dd)](_0x5b7fd6);}[a58_0x46b082(0x1cb)](){const _0x55499d=a58_0x46b082;return{'id':this['_jobId'],'status':logger_enums_1[_0x55499d(0x1b5)][_0x55499d(0x1c7)],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}[a58_0x46b082(0x1c6)](_0x404234){const _0x437dbe=a58_0x46b082;return _0x404234[_0x437dbe(0x1ab)](_0x13a66d=>({'name':_0x13a66d,'status':logger_enums_1[_0x437dbe(0x1e7)][_0x437dbe(0x1c7)],'failed':0x0,'successful':0x0}));}[a58_0x46b082(0x1cf)](){const _0x280964=a58_0x46b082;return(0x0,promises_1[_0x280964(0x1c1)])(this[_0x280964(0x1bd)],JSON[_0x280964(0x1d6)](this[_0x280964(0x1dc)]));}}exports[a58_0x46b082(0x1b0)]=LoggerJobState;