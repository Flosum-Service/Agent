const a58_0xd9208f=a58_0x4a4a;(function(_0x242ed4,_0x4d7091){const _0x34ea28=a58_0x4a4a,_0x5f09a5=_0x242ed4();while(!![]){try{const _0x1e6729=-parseInt(_0x34ea28(0x96))/0x1*(-parseInt(_0x34ea28(0x8a))/0x2)+parseInt(_0x34ea28(0xae))/0x3*(-parseInt(_0x34ea28(0x8b))/0x4)+parseInt(_0x34ea28(0x85))/0x5*(parseInt(_0x34ea28(0x77))/0x6)+parseInt(_0x34ea28(0xa2))/0x7*(-parseInt(_0x34ea28(0xb4))/0x8)+-parseInt(_0x34ea28(0x7e))/0x9+parseInt(_0x34ea28(0xad))/0xa*(parseInt(_0x34ea28(0x9a))/0xb)+parseInt(_0x34ea28(0x82))/0xc;if(_0x1e6729===_0x4d7091)break;else _0x5f09a5['push'](_0x5f09a5['shift']());}catch(_0xa83a46){_0x5f09a5['push'](_0x5f09a5['shift']());}}}(a58_0x5563,0x86fb3));function a58_0x4a4a(_0x5e8283,_0x4b6419){const _0x56730d=a58_0x5563();return a58_0x4a4a=function(_0xd126e4,_0xd91a62){_0xd126e4=_0xd126e4-0x75;let _0x556352=_0x56730d[_0xd126e4];return _0x556352;},a58_0x4a4a(_0x5e8283,_0x4b6419);}const a58_0xd91a62=(function(){let _0x44eeb0=!![];return function(_0x335a36,_0x511b01){const _0x110051=_0x44eeb0?function(){const _0x1d476b=a58_0x4a4a;if(_0x511b01){const _0x17ef33=_0x511b01[_0x1d476b(0x80)](_0x335a36,arguments);return _0x511b01=null,_0x17ef33;}}:function(){};return _0x44eeb0=![],_0x110051;};}()),a58_0xd126e4=a58_0xd91a62(this,function(){const _0x45bd3d=a58_0x4a4a;return a58_0xd126e4[_0x45bd3d(0x9b)]()['search']('(((.+)+)+)+$')[_0x45bd3d(0x9b)]()[_0x45bd3d(0x87)](a58_0xd126e4)[_0x45bd3d(0x9f)](_0x45bd3d(0xb6));});a58_0xd126e4();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4564dd){const _0x1878d8=a58_0x4a4a;return _0x4564dd&&_0x4564dd[_0x1878d8(0xa3)]?_0x4564dd:{'default':_0x4564dd};};Object[a58_0xd9208f(0x7a)](exports,a58_0xd9208f(0xa3),{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a58_0xd9208f(0x92))),logger_enums_1=require(a58_0xd9208f(0xab)),base_logger_1=require('./base-logger'),promises_1=require('fs/promises'),job_detail_1=require(a58_0xd9208f(0x95)),utils_1=require(a58_0xd9208f(0x76)),job_1=require(a58_0xd9208f(0x81));function a58_0x5563(){const _0x4b759d=['readFile','constructor','getObjectState','Logger\x20Job\x20State\x20wasn\x27t\x20init','11236HNtTDj','90740FqfmnF','ObjectStatus','successful','status','join','map','isExistsPath','path','\x27\x20in\x20statistic','default','../../job-detail','73JHeqsp','QUEUED','FAILED','failed','83149lHNHQv','toString','COMPLETED','setJobStatus','jobState','search','jobStorePath','stringify','9506zTJQuG','__esModule','JobStatus','writeFile','error','getTime','getJobState','updateLoggerState','BaseLogger','../../enums/logger.enums','JOB_LOG_STATE_FILENAME','1010IMZjGb','102woPdda','LoggerJobState','_isLoggerInit','includes','_jobState','write','2456FlYQzG','Cannot\x20find\x20object\x20\x27','(((.+)+)+)+$','initObjectStatistics','@flosum/utils','1532922EqWxBe','utf-8','isLoggerInit','defineProperty','parse','find','start','3899412WKIUmZ','processed','apply','../../../../../constants/job','8943444FfjlCz','filePath','name','5fEkRaE'];a58_0x5563=function(){return _0x4b759d;};return a58_0x5563();}class LoggerJobState extends base_logger_1[a58_0xd9208f(0xaa)]{constructor(){const _0x146180=a58_0xd9208f;super(...arguments),this[_0x146180(0xb0)]=![];}get[a58_0xd9208f(0x79)](){const _0x4200c3=a58_0xd9208f;return this[_0x4200c3(0xb0)];}set['isLoggerInit'](_0x56e914){const _0x5a16ce=a58_0xd9208f;this[_0x5a16ce(0xb0)]=_0x56e914;}get[a58_0xd9208f(0x9e)](){const _0x3e6a75=a58_0xd9208f;if(!this[_0x3e6a75(0x79)])throw new Error(_0x3e6a75(0x89));return this[_0x3e6a75(0xb2)];}get[a58_0xd9208f(0x83)](){const _0x24b89b=a58_0xd9208f;return path_1[_0x24b89b(0x94)][_0x24b89b(0x8f)](this['_jobPath'],job_1['JOB_LOG_STATE_FILENAME']);}async['init'](_0x2303ac){const _0x8a88fb=a58_0xd9208f;return this[_0x8a88fb(0xb2)]=await this[_0x8a88fb(0xa8)](),this['_jobState']['processed']=this[_0x8a88fb(0x75)](_0x2303ac),await this[_0x8a88fb(0xb3)](),await this[_0x8a88fb(0x7d)](),this[_0x8a88fb(0x79)]=!![],this;}['setObjectStatus'](_0x3178cc,_0x580177){const _0x4a33ef=a58_0xd9208f;this[_0x4a33ef(0x88)](_0x3178cc)[_0x4a33ef(0x8e)]=_0x580177,this['updateLoggerState']();}[a58_0xd9208f(0x9d)](_0x3fcf99){const _0x2834c8=a58_0xd9208f;this[_0x2834c8(0x9e)][_0x2834c8(0x8e)]=_0x3fcf99,[logger_enums_1[_0x2834c8(0xa4)][_0x2834c8(0x98)],logger_enums_1[_0x2834c8(0xa4)][_0x2834c8(0x9c)]][_0x2834c8(0xb1)](_0x3fcf99)&&(this[_0x2834c8(0x9e)]['completedDate']=new Date()[_0x2834c8(0xa7)]()),this['updateLoggerState']();}['setJobError'](_0x5bb0ea){const _0x1e75d0=a58_0xd9208f;this[_0x1e75d0(0x9e)][_0x1e75d0(0xa6)]=_0x5bb0ea,this[_0x1e75d0(0xa9)]();}['updateObjectProcess'](_0x13045a,_0x34c71c,_0x47a8b9){const _0x14da41=a58_0xd9208f,_0x5dfbac=this[_0x14da41(0x88)](_0x13045a);_0x5dfbac['successful']+=_0x34c71c,_0x5dfbac[_0x14da41(0x99)]+=_0x47a8b9,this['jobState'][_0x14da41(0x8d)]+=_0x34c71c,this['jobState'][_0x14da41(0x99)]+=_0x47a8b9,this['updateLoggerState']();}['getObjectState'](_0x1bd06d){const _0x1817e5=a58_0xd9208f;var _0x5a176e;const _0x5328aa=(_0x5a176e=this[_0x1817e5(0x9e)][_0x1817e5(0x7f)])===null||_0x5a176e===void 0x0?void 0x0:_0x5a176e[_0x1817e5(0x7c)](_0x817460=>_0x817460[_0x1817e5(0x84)]===_0x1bd06d);if(!_0x5328aa)throw new Error(_0x1817e5(0xb5)+_0x1bd06d+_0x1817e5(0x93));return _0x5328aa;}async[a58_0xd9208f(0xa8)](){const _0x35920=a58_0xd9208f;if(!await utils_1['FsUtils'][_0x35920(0x91)](this[_0x35920(0x83)]))return this['initJobState']();const _0x50f688=await(0x0,promises_1[_0x35920(0x86)])(job_detail_1[_0x35920(0xa0)]+'/'+job_1[_0x35920(0xac)],{'encoding':_0x35920(0x78)});return JSON[_0x35920(0x7b)](_0x50f688);}['initJobState'](){const _0x556a5b=a58_0xd9208f;return{'id':this['_jobId'],'status':logger_enums_1[_0x556a5b(0xa4)][_0x556a5b(0x97)],'processed':[],'createdDate':new Date()[_0x556a5b(0xa7)](),'successful':0x0,'failed':0x0};}[a58_0xd9208f(0x75)](_0x3222ab){const _0x4df409=a58_0xd9208f;return _0x3222ab[_0x4df409(0x90)](_0x24c602=>({'name':_0x24c602,'status':logger_enums_1[_0x4df409(0x8c)][_0x4df409(0x97)],'failed':0x0,'successful':0x0}));}['write'](){const _0x32b4f1=a58_0xd9208f;return(0x0,promises_1[_0x32b4f1(0xa5)])(this['filePath'],JSON[_0x32b4f1(0xa1)](this[_0x32b4f1(0xb2)]));}}exports[a58_0xd9208f(0xaf)]=LoggerJobState;