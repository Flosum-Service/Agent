const a58_0xa42480=a58_0x42ae;(function(_0x432804,_0x5a999c){const _0xc1aa8a=a58_0x42ae,_0x3197d3=_0x432804();while(!![]){try{const _0x48cf83=-parseInt(_0xc1aa8a(0xc5))/0x1*(-parseInt(_0xc1aa8a(0xe3))/0x2)+-parseInt(_0xc1aa8a(0xe5))/0x3+parseInt(_0xc1aa8a(0xb6))/0x4*(parseInt(_0xc1aa8a(0xad))/0x5)+-parseInt(_0xc1aa8a(0xdd))/0x6*(-parseInt(_0xc1aa8a(0xdc))/0x7)+parseInt(_0xc1aa8a(0xe0))/0x8*(-parseInt(_0xc1aa8a(0xdf))/0x9)+-parseInt(_0xc1aa8a(0xd7))/0xa*(-parseInt(_0xc1aa8a(0xca))/0xb)+parseInt(_0xc1aa8a(0xd3))/0xc*(-parseInt(_0xc1aa8a(0xb4))/0xd);if(_0x48cf83===_0x5a999c)break;else _0x3197d3['push'](_0x3197d3['shift']());}catch(_0x47a6cf){_0x3197d3['push'](_0x3197d3['shift']());}}}(a58_0x5309,0x95390));function a58_0x5309(){const _0x571b00=['66PymwxG','getObjectState','18YuVvIQ','2246240aVBTVg','write','jobStorePath','4BcjxBf','defineProperty','3066237ADyAmt','setJobError','search','COMPLETED','ObjectStatus','_jobPath','start','./base-logger','name','_jobId','init','constructor','toString','isLoggerInit','193035QbDWul','updateObjectProcess','successful','processed','(((.+)+)+)+$','getTime','../../../../../constants/job','1847742WJlZhF','completedDate','116DGDRWs','updateLoggerState','error','status','LoggerJobState','includes','FAILED','QUEUED','__esModule','initObjectStatistics','failed','utf-8','Logger\x20Job\x20State\x20wasn\x27t\x20init','../../job-detail','filePath','409834FTemCq','JOB_LOG_STATE_FILENAME','getJobState','apply','../../enums/logger.enums','22xTCTmU','fs/promises','_isLoggerInit','map','parse','find','JobStatus','default','join','84XgOIHx','setObjectStatus','setJobStatus','isExistsPath','1144100cZOGgN','_jobState','jobState','__importDefault','writeFile','650174UlYYPf'];a58_0x5309=function(){return _0x571b00;};return a58_0x5309();}const a58_0x4eef0a=(function(){let _0x214abe=!![];return function(_0x187345,_0x388424){const _0x4d6c8f=_0x214abe?function(){const _0x4ec425=a58_0x42ae;if(_0x388424){const _0x15e9a7=_0x388424[_0x4ec425(0xc8)](_0x187345,arguments);return _0x388424=null,_0x15e9a7;}}:function(){};return _0x214abe=![],_0x4d6c8f;};}()),a58_0x3095fd=a58_0x4eef0a(this,function(){const _0x31dab5=a58_0x42ae;return a58_0x3095fd[_0x31dab5(0xf1)]()[_0x31dab5(0xe7)]('(((.+)+)+)+$')[_0x31dab5(0xf1)]()[_0x31dab5(0xf0)](a58_0x3095fd)[_0x31dab5(0xe7)](_0x31dab5(0xb1));});function a58_0x42ae(_0x4ca2e5,_0x58db36){const _0x17d100=a58_0x5309();return a58_0x42ae=function(_0x3095fd,_0x4eef0a){_0x3095fd=_0x3095fd-0xac;let _0x530960=_0x17d100[_0x3095fd];return _0x530960;},a58_0x42ae(_0x4ca2e5,_0x58db36);}a58_0x3095fd();'use strict';var __importDefault=this&&this[a58_0xa42480(0xda)]||function(_0x1e84b7){const _0x1ee654=a58_0xa42480;return _0x1e84b7&&_0x1e84b7[_0x1ee654(0xbe)]?_0x1e84b7:{'default':_0x1e84b7};};Object[a58_0xa42480(0xe4)](exports,a58_0xa42480(0xbe),{'value':!![]}),exports[a58_0xa42480(0xba)]=void 0x0;const path_1=__importDefault(require('path')),logger_enums_1=require(a58_0xa42480(0xc9)),base_logger_1=require(a58_0xa42480(0xec)),promises_1=require(a58_0xa42480(0xcb)),job_detail_1=require(a58_0xa42480(0xc3)),utils_1=require('@flosum/utils'),job_1=require(a58_0xa42480(0xb3));class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){super(...arguments),this['_isLoggerInit']=![];}get['isLoggerInit'](){const _0x489b5a=a58_0xa42480;return this[_0x489b5a(0xcc)];}set['isLoggerInit'](_0x4c214b){const _0x2f91b1=a58_0xa42480;this[_0x2f91b1(0xcc)]=_0x4c214b;}get[a58_0xa42480(0xd9)](){const _0x439436=a58_0xa42480;if(!this['isLoggerInit'])throw new Error(_0x439436(0xc2));return this[_0x439436(0xd8)];}get[a58_0xa42480(0xc4)](){const _0x150acf=a58_0xa42480;return path_1[_0x150acf(0xd1)][_0x150acf(0xd2)](this[_0x150acf(0xea)],job_1[_0x150acf(0xc6)]);}async[a58_0xa42480(0xef)](_0x10eed){const _0x31edd7=a58_0xa42480;return this['_jobState']=await this[_0x31edd7(0xc7)](),this[_0x31edd7(0xd8)][_0x31edd7(0xb0)]=this[_0x31edd7(0xbf)](_0x10eed),await this['write'](),await this[_0x31edd7(0xeb)](),this[_0x31edd7(0xac)]=!![],this;}[a58_0xa42480(0xd4)](_0x1ad9ac,_0x6502eb){const _0x330d4d=a58_0xa42480;this[_0x330d4d(0xde)](_0x1ad9ac)[_0x330d4d(0xb9)]=_0x6502eb,this['updateLoggerState']();}[a58_0xa42480(0xd5)](_0x28fc70){const _0x4a73e6=a58_0xa42480;this[_0x4a73e6(0xd9)][_0x4a73e6(0xb9)]=_0x28fc70,[logger_enums_1[_0x4a73e6(0xd0)][_0x4a73e6(0xbc)],logger_enums_1[_0x4a73e6(0xd0)][_0x4a73e6(0xe8)]][_0x4a73e6(0xbb)](_0x28fc70)&&(this['jobState'][_0x4a73e6(0xb5)]=new Date()[_0x4a73e6(0xb2)]()),this[_0x4a73e6(0xb7)]();}[a58_0xa42480(0xe6)](_0x32dbe6){const _0x5a499a=a58_0xa42480;this[_0x5a499a(0xd9)][_0x5a499a(0xb8)]=_0x32dbe6,this['updateLoggerState']();}[a58_0xa42480(0xae)](_0xfd7f03,_0x268ff6,_0x268c75){const _0x183464=a58_0xa42480,_0x490dd8=this['getObjectState'](_0xfd7f03);_0x490dd8['successful']+=_0x268ff6,_0x490dd8[_0x183464(0xc0)]+=_0x268c75,this[_0x183464(0xd9)][_0x183464(0xaf)]+=_0x268ff6,this[_0x183464(0xd9)]['failed']+=_0x268c75,this[_0x183464(0xb7)]();}[a58_0xa42480(0xde)](_0x134bbf){const _0x1b60d1=a58_0xa42480;var _0x3c4f18;const _0x7153a2=(_0x3c4f18=this['jobState'][_0x1b60d1(0xb0)])===null||_0x3c4f18===void 0x0?void 0x0:_0x3c4f18[_0x1b60d1(0xcf)](_0x4a83c0=>_0x4a83c0[_0x1b60d1(0xed)]===_0x134bbf);if(!_0x7153a2)throw new Error('Cannot\x20find\x20object\x20\x27'+_0x134bbf+'\x27\x20in\x20statistic');return _0x7153a2;}async[a58_0xa42480(0xc7)](){const _0x19e2ae=a58_0xa42480;if(!await utils_1['FsUtils'][_0x19e2ae(0xd6)](this[_0x19e2ae(0xc4)]))return this['initJobState']();const _0x55e060=await(0x0,promises_1['readFile'])(job_detail_1[_0x19e2ae(0xe2)]+'/'+job_1[_0x19e2ae(0xc6)],{'encoding':_0x19e2ae(0xc1)});return JSON[_0x19e2ae(0xce)](_0x55e060);}['initJobState'](){const _0x209817=a58_0xa42480;return{'id':this[_0x209817(0xee)],'status':logger_enums_1[_0x209817(0xd0)]['QUEUED'],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}[a58_0xa42480(0xbf)](_0x1ec376){const _0x5739f4=a58_0xa42480;return _0x1ec376[_0x5739f4(0xcd)](_0x183d71=>({'name':_0x183d71,'status':logger_enums_1[_0x5739f4(0xe9)][_0x5739f4(0xbd)],'failed':0x0,'successful':0x0}));}[a58_0xa42480(0xe1)](){const _0x53d987=a58_0xa42480;return(0x0,promises_1[_0x53d987(0xdb)])(this[_0x53d987(0xc4)],JSON['stringify'](this['_jobState']));}}exports[a58_0xa42480(0xba)]=LoggerJobState;