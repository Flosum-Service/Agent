const a76_0x3e1980=a76_0x5c17;(function(_0x4e70f7,_0x24ec53){const _0x20324e=a76_0x5c17,_0x2d64c6=_0x4e70f7();while(!![]){try{const _0x497cea=parseInt(_0x20324e(0x11f))/0x1+parseInt(_0x20324e(0x156))/0x2*(-parseInt(_0x20324e(0x138))/0x3)+parseInt(_0x20324e(0x14c))/0x4+-parseInt(_0x20324e(0x131))/0x5*(parseInt(_0x20324e(0x12a))/0x6)+-parseInt(_0x20324e(0x13a))/0x7+parseInt(_0x20324e(0x154))/0x8+parseInt(_0x20324e(0x13c))/0x9;if(_0x497cea===_0x24ec53)break;else _0x2d64c6['push'](_0x2d64c6['shift']());}catch(_0xd4d8de){_0x2d64c6['push'](_0x2d64c6['shift']());}}}(a76_0x4097,0x5f904));function a76_0x4097(){const _0xe7da2b=['FsUtils','Cannot\x20find\x20object\x20\x27','jobStorePath','2200004WNFkoy','./base-logger','includes','LoggerJobState','_jobPath','__esModule','getTime','toString','2228888RLpfuP','updateLoggerState','98128GGhLce','error','constructor','isLoggerInit','_jobId','map','setObjectStatus','isExistsPath','COMPLETED','start','110138QjietC','completedDate','QUEUED','_isLoggerInit','ObjectStatus','successful','FAILED','@flosum/utils','BaseLogger','status','writeFile','30LHrPSC','(((.+)+)+)+$','\x27\x20in\x20statistic','join','find','failed','initJobState','280680CdqszP','getJobState','write','filePath','fs/promises','../../enums/logger.enums','../../job-detail','33VhlEUi','default','4831995PlHiEJ','setJobError','8670123iunpIt','getObjectState','_jobState','updateObjectProcess','jobState','JOB_LOG_STATE_FILENAME','initObjectStatistics','processed','search','__importDefault','Logger\x20Job\x20State\x20wasn\x27t\x20init','JobStatus','readFile'];a76_0x4097=function(){return _0xe7da2b;};return a76_0x4097();}const a76_0x5ecb52=(function(){let _0x4bb844=!![];return function(_0x5d4b9a,_0x222f1a){const _0x17345b=_0x4bb844?function(){if(_0x222f1a){const _0x25bdaf=_0x222f1a['apply'](_0x5d4b9a,arguments);return _0x222f1a=null,_0x25bdaf;}}:function(){};return _0x4bb844=![],_0x17345b;};}()),a76_0x44050e=a76_0x5ecb52(this,function(){const _0x12ad42=a76_0x5c17;return a76_0x44050e[_0x12ad42(0x153)]()[_0x12ad42(0x144)](_0x12ad42(0x12b))['toString']()[_0x12ad42(0x158)](a76_0x44050e)[_0x12ad42(0x144)](_0x12ad42(0x12b));});a76_0x44050e();'use strict';var __importDefault=this&&this[a76_0x3e1980(0x145)]||function(_0x1992ac){const _0x16938c=a76_0x3e1980;return _0x1992ac&&_0x1992ac[_0x16938c(0x151)]?_0x1992ac:{'default':_0x1992ac};};Object['defineProperty'](exports,a76_0x3e1980(0x151),{'value':!![]}),exports[a76_0x3e1980(0x14f)]=void 0x0;function a76_0x5c17(_0x433520,_0x4c748c){const _0x981850=a76_0x4097();return a76_0x5c17=function(_0x44050e,_0x5ecb52){_0x44050e=_0x44050e-0x11b;let _0x4097fa=_0x981850[_0x44050e];return _0x4097fa;},a76_0x5c17(_0x433520,_0x4c748c);}const path_1=__importDefault(require('path')),logger_enums_1=require(a76_0x3e1980(0x136)),base_logger_1=require(a76_0x3e1980(0x14d)),promises_1=require(a76_0x3e1980(0x135)),job_detail_1=require(a76_0x3e1980(0x137)),utils_1=require(a76_0x3e1980(0x126)),job_1=require('../../../../../constants/job');class LoggerJobState extends base_logger_1[a76_0x3e1980(0x127)]{constructor(){const _0x258221=a76_0x3e1980;super(...arguments),this[_0x258221(0x122)]=![];}get[a76_0x3e1980(0x159)](){const _0x5e7053=a76_0x3e1980;return this[_0x5e7053(0x122)];}set['isLoggerInit'](_0x5b3e0a){const _0x1d10e0=a76_0x3e1980;this[_0x1d10e0(0x122)]=_0x5b3e0a;}get[a76_0x3e1980(0x140)](){const _0x4c2497=a76_0x3e1980;if(!this[_0x4c2497(0x159)])throw new Error(_0x4c2497(0x146));return this[_0x4c2497(0x13e)];}get[a76_0x3e1980(0x134)](){const _0x4b9186=a76_0x3e1980;return path_1[_0x4b9186(0x139)][_0x4b9186(0x12d)](this[_0x4b9186(0x150)],job_1[_0x4b9186(0x141)]);}async['init'](_0xebc823){const _0x1ab0cc=a76_0x3e1980;return this[_0x1ab0cc(0x13e)]=await this[_0x1ab0cc(0x132)](),this[_0x1ab0cc(0x13e)]['processed']=this[_0x1ab0cc(0x142)](_0xebc823),await this[_0x1ab0cc(0x133)](),await this[_0x1ab0cc(0x11e)](),this['isLoggerInit']=!![],this;}[a76_0x3e1980(0x11b)](_0x1dbce6,_0x112f7f){const _0x244d04=a76_0x3e1980;this[_0x244d04(0x13d)](_0x1dbce6)[_0x244d04(0x128)]=_0x112f7f,this[_0x244d04(0x155)]();}['setJobStatus'](_0x190628){const _0x3ea411=a76_0x3e1980;this['jobState'][_0x3ea411(0x128)]=_0x190628,[logger_enums_1[_0x3ea411(0x147)][_0x3ea411(0x125)],logger_enums_1[_0x3ea411(0x147)][_0x3ea411(0x11d)]][_0x3ea411(0x14e)](_0x190628)&&(this[_0x3ea411(0x140)][_0x3ea411(0x120)]=new Date()[_0x3ea411(0x152)]()),this[_0x3ea411(0x155)]();}[a76_0x3e1980(0x13b)](_0x170990){const _0x3bd2b6=a76_0x3e1980;this[_0x3bd2b6(0x140)][_0x3bd2b6(0x157)]=_0x170990,this[_0x3bd2b6(0x155)]();}[a76_0x3e1980(0x13f)](_0x1eca37,_0x2a8555,_0x50372d){const _0x2bd81d=a76_0x3e1980,_0x5c2c6f=this[_0x2bd81d(0x13d)](_0x1eca37);_0x5c2c6f[_0x2bd81d(0x124)]+=_0x2a8555,_0x5c2c6f['failed']+=_0x50372d,this[_0x2bd81d(0x140)]['successful']+=_0x2a8555,this[_0x2bd81d(0x140)][_0x2bd81d(0x12f)]+=_0x50372d,this[_0x2bd81d(0x155)]();}[a76_0x3e1980(0x13d)](_0x4dfc89){const _0x520ba5=a76_0x3e1980;var _0x4d8792;const _0x3228f9=(_0x4d8792=this[_0x520ba5(0x140)][_0x520ba5(0x143)])===null||_0x4d8792===void 0x0?void 0x0:_0x4d8792[_0x520ba5(0x12e)](_0x45de69=>_0x45de69['name']===_0x4dfc89);if(!_0x3228f9)throw new Error(_0x520ba5(0x14a)+_0x4dfc89+_0x520ba5(0x12c));return _0x3228f9;}async[a76_0x3e1980(0x132)](){const _0x5c4290=a76_0x3e1980;if(!await utils_1[_0x5c4290(0x149)][_0x5c4290(0x11c)](this['filePath']))return this[_0x5c4290(0x130)]();const _0x486980=await(0x0,promises_1[_0x5c4290(0x148)])(job_detail_1[_0x5c4290(0x14b)]+'/'+job_1['JOB_LOG_STATE_FILENAME'],{'encoding':'utf-8'});return JSON['parse'](_0x486980);}['initJobState'](){const _0x41c975=a76_0x3e1980;return{'id':this[_0x41c975(0x15a)],'status':logger_enums_1[_0x41c975(0x147)][_0x41c975(0x121)],'processed':[],'createdDate':new Date()[_0x41c975(0x152)](),'successful':0x0,'failed':0x0};}[a76_0x3e1980(0x142)](_0x14b030){const _0x398767=a76_0x3e1980;return _0x14b030[_0x398767(0x15b)](_0x4f609b=>({'name':_0x4f609b,'status':logger_enums_1[_0x398767(0x123)]['QUEUED'],'failed':0x0,'successful':0x0}));}[a76_0x3e1980(0x133)](){const _0x231deb=a76_0x3e1980;return(0x0,promises_1[_0x231deb(0x129)])(this[_0x231deb(0x134)],JSON['stringify'](this['_jobState']));}}exports[a76_0x3e1980(0x14f)]=LoggerJobState;