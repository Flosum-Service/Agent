const a58_0x51ba9b=a58_0x5378;(function(_0x34b6cc,_0x580b0c){const _0x514288=a58_0x5378,_0x4c88e9=_0x34b6cc();while(!![]){try{const _0x11ee0e=-parseInt(_0x514288(0x102))/0x1+-parseInt(_0x514288(0x116))/0x2*(-parseInt(_0x514288(0x10c))/0x3)+parseInt(_0x514288(0x11c))/0x4*(-parseInt(_0x514288(0x125))/0x5)+parseInt(_0x514288(0x12d))/0x6+-parseInt(_0x514288(0xfb))/0x7+-parseInt(_0x514288(0x127))/0x8*(-parseInt(_0x514288(0x12e))/0x9)+parseInt(_0x514288(0x109))/0xa;if(_0x11ee0e===_0x580b0c)break;else _0x4c88e9['push'](_0x4c88e9['shift']());}catch(_0x34c5f5){_0x4c88e9['push'](_0x4c88e9['shift']());}}}(a58_0xe836,0xe1a40));function a58_0xe836(){const _0x22ebde=['updateObjectProcess','COMPLETED','6281910JcuODC','utf-8','filePath','575904GtBbJY','constructor','@flosum/utils','_jobState','FAILED','JobStatus','name','Logger\x20Job\x20State\x20wasn\x27t\x20init','getObjectState','jobState','16qxVALZ','getTime','\x27\x20in\x20statistic','FsUtils','write','setObjectStatus','4TFpEgN','writeFile','defineProperty','stringify','fs/promises','toString','__importDefault','start','successful','2462410GwYDKV','_isLoggerInit','104wcnHIi','search','initObjectStatistics','getJobState','failed','Cannot\x20find\x20object\x20\x27','2977452bATcfA','72909JDfwEe','processed','isLoggerInit','status','3192wTWgNn','(((.+)+)+)+$','__esModule','initJobState','readFile','JOB_LOG_STATE_FILENAME','updateLoggerState','1348328CxGVGv','includes','QUEUED','./base-logger','LoggerJobState'];a58_0xe836=function(){return _0x22ebde;};return a58_0xe836();}const a58_0xab538c=(function(){let _0xfca20c=!![];return function(_0x3b9d23,_0x3d10e3){const _0x3bf9f5=_0xfca20c?function(){if(_0x3d10e3){const _0x295686=_0x3d10e3['apply'](_0x3b9d23,arguments);return _0x3d10e3=null,_0x295686;}}:function(){};return _0xfca20c=![],_0x3bf9f5;};}()),a58_0x59f96b=a58_0xab538c(this,function(){const _0x19a57c=a58_0x5378;return a58_0x59f96b[_0x19a57c(0x121)]()[_0x19a57c(0x128)](_0x19a57c(0xfc))['toString']()[_0x19a57c(0x10d)](a58_0x59f96b)['search']('(((.+)+)+)+$');});a58_0x59f96b();'use strict';var __importDefault=this&&this[a58_0x51ba9b(0x122)]||function(_0x14d99f){return _0x14d99f&&_0x14d99f['__esModule']?_0x14d99f:{'default':_0x14d99f};};Object[a58_0x51ba9b(0x11e)](exports,a58_0x51ba9b(0xfd),{'value':!![]}),exports[a58_0x51ba9b(0x106)]=void 0x0;const path_1=__importDefault(require('path')),logger_enums_1=require('../../enums/logger.enums'),base_logger_1=require(a58_0x51ba9b(0x105)),promises_1=require(a58_0x51ba9b(0x120)),job_detail_1=require('../../job-detail'),utils_1=require(a58_0x51ba9b(0x10e)),job_1=require('../../../../../constants/job');class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){super(...arguments),this['_isLoggerInit']=![];}get['isLoggerInit'](){const _0x593f29=a58_0x51ba9b;return this[_0x593f29(0x126)];}set[a58_0x51ba9b(0xf9)](_0xce2a0a){const _0x56aa2d=a58_0x51ba9b;this[_0x56aa2d(0x126)]=_0xce2a0a;}get['jobState'](){const _0xafcfc4=a58_0x51ba9b;if(!this['isLoggerInit'])throw new Error(_0xafcfc4(0x113));return this[_0xafcfc4(0x10f)];}get[a58_0x51ba9b(0x10b)](){const _0x555c62=a58_0x51ba9b;return path_1['default']['join'](this['_jobPath'],job_1[_0x555c62(0x100)]);}async['init'](_0x54709f){const _0x41e096=a58_0x51ba9b;return this['_jobState']=await this['getJobState'](),this[_0x41e096(0x10f)]['processed']=this[_0x41e096(0x129)](_0x54709f),await this[_0x41e096(0x11a)](),await this[_0x41e096(0x123)](),this['isLoggerInit']=!![],this;}[a58_0x51ba9b(0x11b)](_0x5a8e6b,_0x5da1c6){const _0x5d48cf=a58_0x51ba9b;this[_0x5d48cf(0x114)](_0x5a8e6b)['status']=_0x5da1c6,this[_0x5d48cf(0x101)]();}['setJobStatus'](_0x449ee3){const _0x4ab467=a58_0x51ba9b;this[_0x4ab467(0x115)][_0x4ab467(0xfa)]=_0x449ee3,[logger_enums_1[_0x4ab467(0x111)][_0x4ab467(0x110)],logger_enums_1[_0x4ab467(0x111)][_0x4ab467(0x108)]][_0x4ab467(0x103)](_0x449ee3)&&(this[_0x4ab467(0x115)]['completedDate']=new Date()['getTime']()),this[_0x4ab467(0x101)]();}['setJobError'](_0x43b68e){const _0xdb5b32=a58_0x51ba9b;this['jobState']['error']=_0x43b68e,this[_0xdb5b32(0x101)]();}[a58_0x51ba9b(0x107)](_0x551ded,_0x451d5b,_0x580ca1){const _0x16cbef=a58_0x51ba9b,_0x5ef2cd=this[_0x16cbef(0x114)](_0x551ded);_0x5ef2cd[_0x16cbef(0x124)]+=_0x451d5b,_0x5ef2cd['failed']+=_0x580ca1,this[_0x16cbef(0x115)][_0x16cbef(0x124)]+=_0x451d5b,this[_0x16cbef(0x115)][_0x16cbef(0x12b)]+=_0x580ca1,this[_0x16cbef(0x101)]();}['getObjectState'](_0x5276cd){const _0x5246c1=a58_0x51ba9b;var _0x57b354;const _0x3f4d46=(_0x57b354=this[_0x5246c1(0x115)][_0x5246c1(0x12f)])===null||_0x57b354===void 0x0?void 0x0:_0x57b354['find'](_0x4cf44d=>_0x4cf44d[_0x5246c1(0x112)]===_0x5276cd);if(!_0x3f4d46)throw new Error(_0x5246c1(0x12c)+_0x5276cd+_0x5246c1(0x118));return _0x3f4d46;}async[a58_0x51ba9b(0x12a)](){const _0x1564f9=a58_0x51ba9b;if(!await utils_1[_0x1564f9(0x119)]['isExistsPath'](this[_0x1564f9(0x10b)]))return this[_0x1564f9(0xfe)]();const _0x32aac4=await(0x0,promises_1[_0x1564f9(0xff)])(job_detail_1['jobStorePath']+'/'+job_1[_0x1564f9(0x100)],{'encoding':_0x1564f9(0x10a)});return JSON['parse'](_0x32aac4);}[a58_0x51ba9b(0xfe)](){const _0x25c976=a58_0x51ba9b;return{'id':this['_jobId'],'status':logger_enums_1[_0x25c976(0x111)][_0x25c976(0x104)],'processed':[],'createdDate':new Date()[_0x25c976(0x117)](),'successful':0x0,'failed':0x0};}[a58_0x51ba9b(0x129)](_0x206f95){const _0x3758d3=a58_0x51ba9b;return _0x206f95['map'](_0xffaab1=>({'name':_0xffaab1,'status':logger_enums_1['ObjectStatus'][_0x3758d3(0x104)],'failed':0x0,'successful':0x0}));}[a58_0x51ba9b(0x11a)](){const _0x36640a=a58_0x51ba9b;return(0x0,promises_1[_0x36640a(0x11d)])(this['filePath'],JSON[_0x36640a(0x11f)](this['_jobState']));}}function a58_0x5378(_0x22fc59,_0x582a5e){const _0x7ad76b=a58_0xe836();return a58_0x5378=function(_0x59f96b,_0xab538c){_0x59f96b=_0x59f96b-0xf9;let _0xe836b6=_0x7ad76b[_0x59f96b];return _0xe836b6;},a58_0x5378(_0x22fc59,_0x582a5e);}exports['LoggerJobState']=LoggerJobState;