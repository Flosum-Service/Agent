const a58_0x5ccc39=a58_0x2d86;(function(_0x355617,_0x73c2d7){const _0x4d8757=a58_0x2d86,_0x3bc8a1=_0x355617();while(!![]){try{const _0x30846b=parseInt(_0x4d8757(0x161))/0x1+parseInt(_0x4d8757(0x162))/0x2+-parseInt(_0x4d8757(0x135))/0x3+parseInt(_0x4d8757(0x133))/0x4*(parseInt(_0x4d8757(0x149))/0x5)+-parseInt(_0x4d8757(0x152))/0x6*(parseInt(_0x4d8757(0x145))/0x7)+-parseInt(_0x4d8757(0x138))/0x8+parseInt(_0x4d8757(0x129))/0x9*(parseInt(_0x4d8757(0x14e))/0xa);if(_0x30846b===_0x73c2d7)break;else _0x3bc8a1['push'](_0x3bc8a1['shift']());}catch(_0xeaa2f2){_0x3bc8a1['push'](_0x3bc8a1['shift']());}}}(a58_0x1bbc,0xe3d67));const a58_0x41031d=(function(){let _0x774de8=!![];return function(_0x645cbd,_0x32ab32){const _0x1cfe65=_0x774de8?function(){const _0x54c237=a58_0x2d86;if(_0x32ab32){const _0x22cec7=_0x32ab32[_0x54c237(0x13c)](_0x645cbd,arguments);return _0x32ab32=null,_0x22cec7;}}:function(){};return _0x774de8=![],_0x1cfe65;};}()),a58_0x2c57f0=a58_0x41031d(this,function(){const _0x2bfe77=a58_0x2d86;return a58_0x2c57f0[_0x2bfe77(0x12f)]()[_0x2bfe77(0x136)]('(((.+)+)+)+$')['toString']()[_0x2bfe77(0x13b)](a58_0x2c57f0)[_0x2bfe77(0x136)](_0x2bfe77(0x15f));});a58_0x2c57f0();'use strict';function a58_0x2d86(_0x2de8b0,_0x53bdbd){const _0x193e91=a58_0x1bbc();return a58_0x2d86=function(_0x2c57f0,_0x41031d){_0x2c57f0=_0x2c57f0-0x128;let _0x1bbcb7=_0x193e91[_0x2c57f0];return _0x1bbcb7;},a58_0x2d86(_0x2de8b0,_0x53bdbd);}var __importDefault=this&&this[a58_0x5ccc39(0x154)]||function(_0x24d7e2){return _0x24d7e2&&_0x24d7e2['__esModule']?_0x24d7e2:{'default':_0x24d7e2};};function a58_0x1bbc(){const _0x508831=['filePath','constructor','apply','initObjectStatistics','path','getTime','isExistsPath','JOB_LOG_STATE_FILENAME','Logger\x20Job\x20State\x20wasn\x27t\x20init','_jobPath','isLoggerInit','567xngozT','find','ObjectStatus','map','9745jzgSUN','_isLoggerInit','stringify','successful','processed','20wsvqvM','write','fs/promises','LoggerJobState','7716RSkSOV','JobStatus','__importDefault','name','status','jobStorePath','QUEUED','FsUtils','setJobError','\x27\x20in\x20statistic','getObjectState','../../enums/logger.enums','_jobId','(((.+)+)+)+$','_jobState','1194513TTwGZX','2582284VULcIK','updateLoggerState','includes','../../../../../constants/job','setJobStatus','6257421OJGWfn','jobState','COMPLETED','initJobState','@flosum/utils','writeFile','toString','start','readFile','failed','92sbEwPO','./base-logger','5162616ejBnmj','search','join','9302072TNVKPD','getJobState'];a58_0x1bbc=function(){return _0x508831;};return a58_0x1bbc();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a58_0x5ccc39(0x151)]=void 0x0;const path_1=__importDefault(require(a58_0x5ccc39(0x13e))),logger_enums_1=require(a58_0x5ccc39(0x15d)),base_logger_1=require(a58_0x5ccc39(0x134)),promises_1=require(a58_0x5ccc39(0x150)),job_detail_1=require('../../job-detail'),utils_1=require(a58_0x5ccc39(0x12d)),job_1=require(a58_0x5ccc39(0x165));class LoggerJobState extends base_logger_1['BaseLogger']{constructor(){const _0x369009=a58_0x5ccc39;super(...arguments),this[_0x369009(0x14a)]=![];}get[a58_0x5ccc39(0x144)](){const _0x237b0b=a58_0x5ccc39;return this[_0x237b0b(0x14a)];}set[a58_0x5ccc39(0x144)](_0x542bb1){const _0x13e669=a58_0x5ccc39;this[_0x13e669(0x14a)]=_0x542bb1;}get['jobState'](){const _0x4a8861=a58_0x5ccc39;if(!this[_0x4a8861(0x144)])throw new Error(_0x4a8861(0x142));return this[_0x4a8861(0x160)];}get[a58_0x5ccc39(0x13a)](){const _0x3d0523=a58_0x5ccc39;return path_1['default'][_0x3d0523(0x137)](this[_0x3d0523(0x143)],job_1[_0x3d0523(0x141)]);}async['init'](_0x33c5ea){const _0x972126=a58_0x5ccc39;return this[_0x972126(0x160)]=await this[_0x972126(0x139)](),this[_0x972126(0x160)][_0x972126(0x14d)]=this[_0x972126(0x13d)](_0x33c5ea),await this[_0x972126(0x14f)](),await this[_0x972126(0x130)](),this[_0x972126(0x144)]=!![],this;}['setObjectStatus'](_0x5e2b62,_0x2e9296){const _0x38c399=a58_0x5ccc39;this[_0x38c399(0x15c)](_0x5e2b62)[_0x38c399(0x156)]=_0x2e9296,this[_0x38c399(0x163)]();}[a58_0x5ccc39(0x128)](_0x137741){const _0x526dc2=a58_0x5ccc39;this['jobState'][_0x526dc2(0x156)]=_0x137741,[logger_enums_1[_0x526dc2(0x153)]['FAILED'],logger_enums_1[_0x526dc2(0x153)][_0x526dc2(0x12b)]][_0x526dc2(0x164)](_0x137741)&&(this[_0x526dc2(0x12a)]['completedDate']=new Date()[_0x526dc2(0x13f)]()),this[_0x526dc2(0x163)]();}[a58_0x5ccc39(0x15a)](_0x5a6b0e){const _0x308f2a=a58_0x5ccc39;this[_0x308f2a(0x12a)]['error']=_0x5a6b0e,this['updateLoggerState']();}['updateObjectProcess'](_0x3916c0,_0x55d924,_0x1ef2de){const _0x189c82=a58_0x5ccc39,_0x2ab3ca=this[_0x189c82(0x15c)](_0x3916c0);_0x2ab3ca[_0x189c82(0x14c)]+=_0x55d924,_0x2ab3ca[_0x189c82(0x132)]+=_0x1ef2de,this[_0x189c82(0x12a)][_0x189c82(0x14c)]+=_0x55d924,this[_0x189c82(0x12a)][_0x189c82(0x132)]+=_0x1ef2de,this['updateLoggerState']();}[a58_0x5ccc39(0x15c)](_0x111b2c){const _0xa4075d=a58_0x5ccc39;var _0x4302c4;const _0x3a4e56=(_0x4302c4=this[_0xa4075d(0x12a)]['processed'])===null||_0x4302c4===void 0x0?void 0x0:_0x4302c4[_0xa4075d(0x146)](_0x2d0505=>_0x2d0505[_0xa4075d(0x155)]===_0x111b2c);if(!_0x3a4e56)throw new Error('Cannot\x20find\x20object\x20\x27'+_0x111b2c+_0xa4075d(0x15b));return _0x3a4e56;}async[a58_0x5ccc39(0x139)](){const _0x572cda=a58_0x5ccc39;if(!await utils_1[_0x572cda(0x159)][_0x572cda(0x140)](this[_0x572cda(0x13a)]))return this[_0x572cda(0x12c)]();const _0x85a522=await(0x0,promises_1[_0x572cda(0x131)])(job_detail_1[_0x572cda(0x157)]+'/'+job_1['JOB_LOG_STATE_FILENAME'],{'encoding':'utf-8'});return JSON['parse'](_0x85a522);}[a58_0x5ccc39(0x12c)](){const _0x2e07aa=a58_0x5ccc39;return{'id':this[_0x2e07aa(0x15e)],'status':logger_enums_1['JobStatus'][_0x2e07aa(0x158)],'processed':[],'createdDate':new Date()[_0x2e07aa(0x13f)](),'successful':0x0,'failed':0x0};}[a58_0x5ccc39(0x13d)](_0x1b9a6b){const _0x541cba=a58_0x5ccc39;return _0x1b9a6b[_0x541cba(0x148)](_0x290c36=>({'name':_0x290c36,'status':logger_enums_1[_0x541cba(0x147)][_0x541cba(0x158)],'failed':0x0,'successful':0x0}));}['write'](){const _0x2e8165=a58_0x5ccc39;return(0x0,promises_1[_0x2e8165(0x12e)])(this[_0x2e8165(0x13a)],JSON[_0x2e8165(0x14b)](this[_0x2e8165(0x160)]));}}exports[a58_0x5ccc39(0x151)]=LoggerJobState;