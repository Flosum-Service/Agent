const a57_0xee3d4b=a57_0x5120;(function(_0x430757,_0x4cc766){const _0x5f058b=a57_0x5120,_0x2eb700=_0x430757();while(!![]){try{const _0x2a800d=parseInt(_0x5f058b(0x1d0))/0x1*(-parseInt(_0x5f058b(0x1c9))/0x2)+parseInt(_0x5f058b(0x1bf))/0x3*(-parseInt(_0x5f058b(0x191))/0x4)+parseInt(_0x5f058b(0x1b7))/0x5+-parseInt(_0x5f058b(0x1aa))/0x6+-parseInt(_0x5f058b(0x1bd))/0x7+-parseInt(_0x5f058b(0x1ac))/0x8+parseInt(_0x5f058b(0x197))/0x9;if(_0x2a800d===_0x4cc766)break;else _0x2eb700['push'](_0x2eb700['shift']());}catch(_0x2873cd){_0x2eb700['push'](_0x2eb700['shift']());}}}(a57_0x3bd8,0xe254a));const a57_0x45d018=(function(){let _0x2c8a58=!![];return function(_0x2e5413,_0x4dd892){const _0x3ea266=_0x2c8a58?function(){if(_0x4dd892){const _0x58443e=_0x4dd892['apply'](_0x2e5413,arguments);return _0x4dd892=null,_0x58443e;}}:function(){};return _0x2c8a58=![],_0x3ea266;};}()),a57_0x5c5e2e=a57_0x45d018(this,function(){const _0x4c889c=a57_0x5120;return a57_0x5c5e2e['toString']()['search']('(((.+)+)+)+$')[_0x4c889c(0x1c0)]()['constructor'](a57_0x5c5e2e)[_0x4c889c(0x19b)](_0x4c889c(0x1ba));});function a57_0x3bd8(){const _0x55122a=['setObjectStatus','join','initObjectStatistics','isExistsPath','default','45615078dILMng','../../job-detail','failed','_isLoggerInit','search','__esModule','jobStorePath','JOB_LOG_STATE_FILENAME','parse','updateObjectProcess','FAILED','_jobState','BaseLogger','isLoggerInit','_jobId','writeFile','initJobState','status','setJobStatus','6719622kBfkcj','../../../../../constants/job','5539272JkPbKy','getObjectState','ObjectStatus','Logger\x20Job\x20State\x20wasn\x27t\x20init','COMPLETED','utf-8','jobState','fs/promises','JobStatus','defineProperty','error','2835555YNCSWO','__importDefault','write','(((.+)+)+)+$','./base-logger','setJobError','7191891HhdOmo','getJobState','3kIeSze','toString','successful','name','QUEUED','filePath','readFile','path','LoggerJobState','../../enums/logger.enums','6LzPWaW','init','processed','getTime','map','FsUtils','updateLoggerState','343647AUfRbp','3350812yzcpyl'];a57_0x3bd8=function(){return _0x55122a;};return a57_0x3bd8();}a57_0x5c5e2e();'use strict';function a57_0x5120(_0x4ee637,_0x526cbc){const _0x2a1a9b=a57_0x3bd8();return a57_0x5120=function(_0x5c5e2e,_0x45d018){_0x5c5e2e=_0x5c5e2e-0x191;let _0x3bd882=_0x2a1a9b[_0x5c5e2e];return _0x3bd882;},a57_0x5120(_0x4ee637,_0x526cbc);}var __importDefault=this&&this[a57_0xee3d4b(0x1b8)]||function(_0x5e0261){const _0x16ccb2=a57_0xee3d4b;return _0x5e0261&&_0x5e0261[_0x16ccb2(0x19c)]?_0x5e0261:{'default':_0x5e0261};};Object[a57_0xee3d4b(0x1b5)](exports,a57_0xee3d4b(0x19c),{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a57_0xee3d4b(0x1c6))),logger_enums_1=require(a57_0xee3d4b(0x1c8)),base_logger_1=require(a57_0xee3d4b(0x1bb)),promises_1=require(a57_0xee3d4b(0x1b3)),job_detail_1=require(a57_0xee3d4b(0x198)),utils_1=require('@flosum/utils'),job_1=require(a57_0xee3d4b(0x1ab));class LoggerJobState extends base_logger_1[a57_0xee3d4b(0x1a3)]{constructor(){const _0x2b5ba6=a57_0xee3d4b;super(...arguments),this[_0x2b5ba6(0x19a)]=![];}get[a57_0xee3d4b(0x1a4)](){const _0x238b1a=a57_0xee3d4b;return this[_0x238b1a(0x19a)];}set[a57_0xee3d4b(0x1a4)](_0x6ae664){const _0x1a45e1=a57_0xee3d4b;this[_0x1a45e1(0x19a)]=_0x6ae664;}get['jobState'](){const _0x1a0c26=a57_0xee3d4b;if(!this['isLoggerInit'])throw new Error(_0x1a0c26(0x1af));return this[_0x1a0c26(0x1a2)];}get[a57_0xee3d4b(0x1c4)](){const _0x3afe19=a57_0xee3d4b;return path_1[_0x3afe19(0x196)][_0x3afe19(0x193)](this['_jobPath'],job_1[_0x3afe19(0x19e)]);}async[a57_0xee3d4b(0x1ca)](_0x1ba18c){const _0x38f4af=a57_0xee3d4b;return this[_0x38f4af(0x1a2)]=await this[_0x38f4af(0x1be)](),this[_0x38f4af(0x1a2)][_0x38f4af(0x1cb)]=this[_0x38f4af(0x194)](_0x1ba18c),await this[_0x38f4af(0x1b9)](),await this['start'](),this['isLoggerInit']=!![],this;}[a57_0xee3d4b(0x192)](_0x159aac,_0x8d99c3){const _0x4cf4cd=a57_0xee3d4b;this[_0x4cf4cd(0x1ad)](_0x159aac)[_0x4cf4cd(0x1a8)]=_0x8d99c3,this['updateLoggerState']();}[a57_0xee3d4b(0x1a9)](_0x59b19b){const _0x3a43b6=a57_0xee3d4b;this[_0x3a43b6(0x1b2)][_0x3a43b6(0x1a8)]=_0x59b19b,[logger_enums_1[_0x3a43b6(0x1b4)][_0x3a43b6(0x1a1)],logger_enums_1[_0x3a43b6(0x1b4)][_0x3a43b6(0x1b0)]]['includes'](_0x59b19b)&&(this[_0x3a43b6(0x1b2)]['completedDate']=new Date()['getTime']()),this[_0x3a43b6(0x1cf)]();}[a57_0xee3d4b(0x1bc)](_0xa89cf7){const _0x2b2065=a57_0xee3d4b;this['jobState'][_0x2b2065(0x1b6)]=_0xa89cf7,this['updateLoggerState']();}[a57_0xee3d4b(0x1a0)](_0x301b06,_0x41bc55,_0xb5ce4b){const _0xd41056=a57_0xee3d4b,_0x4828d3=this[_0xd41056(0x1ad)](_0x301b06);_0x4828d3[_0xd41056(0x1c1)]+=_0x41bc55,_0x4828d3[_0xd41056(0x199)]+=_0xb5ce4b,this['jobState']['successful']+=_0x41bc55,this['jobState']['failed']+=_0xb5ce4b,this[_0xd41056(0x1cf)]();}[a57_0xee3d4b(0x1ad)](_0x196390){const _0x2a7cea=a57_0xee3d4b;var _0x5e50e7;const _0x4292a7=(_0x5e50e7=this[_0x2a7cea(0x1b2)][_0x2a7cea(0x1cb)])===null||_0x5e50e7===void 0x0?void 0x0:_0x5e50e7['find'](_0x25bac8=>_0x25bac8[_0x2a7cea(0x1c2)]===_0x196390);if(!_0x4292a7)throw new Error('Cannot\x20find\x20object\x20\x27'+_0x196390+'\x27\x20in\x20statistic');return _0x4292a7;}async[a57_0xee3d4b(0x1be)](){const _0x555214=a57_0xee3d4b;if(!await utils_1[_0x555214(0x1ce)][_0x555214(0x195)](this[_0x555214(0x1c4)]))return this[_0x555214(0x1a7)]();const _0x5a9550=await(0x0,promises_1[_0x555214(0x1c5)])(job_detail_1[_0x555214(0x19d)]+'/'+job_1[_0x555214(0x19e)],{'encoding':_0x555214(0x1b1)});return JSON[_0x555214(0x19f)](_0x5a9550);}[a57_0xee3d4b(0x1a7)](){const _0x463803=a57_0xee3d4b;return{'id':this[_0x463803(0x1a5)],'status':logger_enums_1[_0x463803(0x1b4)][_0x463803(0x1c3)],'processed':[],'createdDate':new Date()[_0x463803(0x1cc)](),'successful':0x0,'failed':0x0};}[a57_0xee3d4b(0x194)](_0x1779f7){const _0x26a53e=a57_0xee3d4b;return _0x1779f7[_0x26a53e(0x1cd)](_0x5d4db0=>({'name':_0x5d4db0,'status':logger_enums_1[_0x26a53e(0x1ae)]['QUEUED'],'failed':0x0,'successful':0x0}));}[a57_0xee3d4b(0x1b9)](){const _0x680158=a57_0xee3d4b;return(0x0,promises_1[_0x680158(0x1a6)])(this[_0x680158(0x1c4)],JSON['stringify'](this['_jobState']));}}exports[a57_0xee3d4b(0x1c7)]=LoggerJobState;