const a75_0x3b9936=a75_0x1821;(function(_0x2c6c5a,_0x233260){const _0x35878c=a75_0x1821,_0xf557e1=_0x2c6c5a();while(!![]){try{const _0x4851b2=-parseInt(_0x35878c(0xa4))/0x1+parseInt(_0x35878c(0xaf))/0x2*(parseInt(_0x35878c(0xb1))/0x3)+-parseInt(_0x35878c(0xb8))/0x4+parseInt(_0x35878c(0xb2))/0x5*(parseInt(_0x35878c(0xdb))/0x6)+-parseInt(_0x35878c(0xab))/0x7*(-parseInt(_0x35878c(0xc1))/0x8)+-parseInt(_0x35878c(0xb5))/0x9*(parseInt(_0x35878c(0xc9))/0xa)+parseInt(_0x35878c(0xc5))/0xb;if(_0x4851b2===_0x233260)break;else _0xf557e1['push'](_0xf557e1['shift']());}catch(_0x1f0215){_0xf557e1['push'](_0xf557e1['shift']());}}}(a75_0x3634,0xebda8));const a75_0x3d4e22=(function(){let _0x3508ef=!![];return function(_0x31896e,_0x249845){const _0x3d2553=_0x3508ef?function(){if(_0x249845){const _0x71b217=_0x249845['apply'](_0x31896e,arguments);return _0x249845=null,_0x71b217;}}:function(){};return _0x3508ef=![],_0x3d2553;};}()),a75_0x15658d=a75_0x3d4e22(this,function(){const _0x31944a=a75_0x1821;return a75_0x15658d[_0x31944a(0xb0)]()[_0x31944a(0xae)](_0x31944a(0xb6))['toString']()[_0x31944a(0xa7)](a75_0x15658d)['search'](_0x31944a(0xb6));});a75_0x15658d();'use strict';var __importDefault=this&&this[a75_0x3b9936(0xce)]||function(_0xb23ed){const _0x52aec1=a75_0x3b9936;return _0xb23ed&&_0xb23ed[_0x52aec1(0xd1)]?_0xb23ed:{'default':_0xb23ed};};Object[a75_0x3b9936(0xa3)](exports,'__esModule',{'value':!![]}),exports[a75_0x3b9936(0xdc)]=void 0x0;function a75_0x3634(){const _0x420527=['2883340djNNel','completedDate','find','QUEUED','readFile','__importDefault','updateLoggerState','processed','__esModule','setObjectStatus','write','fs/promises','JobStatus','getTime','_jobId','initObjectStatistics','../../job-detail','../../enums/logger.enums','18WxMfrO','LoggerJobState','getJobState','path','map','status','Cannot\x20find\x20object\x20\x27','defineProperty','550340nldvys','failed','start','constructor','BaseLogger','isLoggerInit','filePath','28oFLmQF','_jobState','jobStorePath','search','172YtzjKk','toString','61833AIuaGL','1134940lrEDjO','JOB_LOG_STATE_FILENAME','successful','45CQiraG','(((.+)+)+)+$','@flosum/utils','6756188syRBPW','../../../../../constants/job','init','_isLoggerInit','isExistsPath','writeFile','jobState','name','updateObjectProcess','722952DbLWbv','Logger\x20Job\x20State\x20wasn\x27t\x20init','initJobState','FAILED','20153397zUgTxk','\x27\x20in\x20statistic','./base-logger','getObjectState'];a75_0x3634=function(){return _0x420527;};return a75_0x3634();}const path_1=__importDefault(require(a75_0x3b9936(0xde))),logger_enums_1=require(a75_0x3b9936(0xda)),base_logger_1=require(a75_0x3b9936(0xc7)),promises_1=require(a75_0x3b9936(0xd4)),job_detail_1=require(a75_0x3b9936(0xd9)),utils_1=require(a75_0x3b9936(0xb7)),job_1=require(a75_0x3b9936(0xb9));class LoggerJobState extends base_logger_1[a75_0x3b9936(0xa8)]{constructor(){super(...arguments),this['_isLoggerInit']=![];}get[a75_0x3b9936(0xa9)](){const _0x5a1ca=a75_0x3b9936;return this[_0x5a1ca(0xbb)];}set[a75_0x3b9936(0xa9)](_0x4d7366){const _0x2b1a0c=a75_0x3b9936;this[_0x2b1a0c(0xbb)]=_0x4d7366;}get[a75_0x3b9936(0xbe)](){const _0x15ab93=a75_0x3b9936;if(!this['isLoggerInit'])throw new Error(_0x15ab93(0xc2));return this[_0x15ab93(0xac)];}get[a75_0x3b9936(0xaa)](){const _0x2d6a32=a75_0x3b9936;return path_1['default']['join'](this['_jobPath'],job_1[_0x2d6a32(0xb3)]);}async[a75_0x3b9936(0xba)](_0x539107){const _0x4a62eb=a75_0x3b9936;return this[_0x4a62eb(0xac)]=await this['getJobState'](),this['_jobState'][_0x4a62eb(0xd0)]=this['initObjectStatistics'](_0x539107),await this[_0x4a62eb(0xd3)](),await this[_0x4a62eb(0xa6)](),this['isLoggerInit']=!![],this;}[a75_0x3b9936(0xd2)](_0x1354da,_0x433b75){this['getObjectState'](_0x1354da)['status']=_0x433b75,this['updateLoggerState']();}['setJobStatus'](_0x479977){const _0x5939a2=a75_0x3b9936;this[_0x5939a2(0xbe)][_0x5939a2(0xe0)]=_0x479977,[logger_enums_1['JobStatus'][_0x5939a2(0xc4)],logger_enums_1[_0x5939a2(0xd5)]['COMPLETED']]['includes'](_0x479977)&&(this['jobState'][_0x5939a2(0xca)]=new Date()[_0x5939a2(0xd6)]()),this[_0x5939a2(0xcf)]();}['setJobError'](_0xfc4306){const _0x21059a=a75_0x3b9936;this[_0x21059a(0xbe)]['error']=_0xfc4306,this['updateLoggerState']();}[a75_0x3b9936(0xc0)](_0x1348dd,_0x281d60,_0x1bcb99){const _0x1ae71d=a75_0x3b9936,_0x81bec7=this[_0x1ae71d(0xc8)](_0x1348dd);_0x81bec7[_0x1ae71d(0xb4)]+=_0x281d60,_0x81bec7[_0x1ae71d(0xa5)]+=_0x1bcb99,this[_0x1ae71d(0xbe)][_0x1ae71d(0xb4)]+=_0x281d60,this['jobState'][_0x1ae71d(0xa5)]+=_0x1bcb99,this['updateLoggerState']();}[a75_0x3b9936(0xc8)](_0x37c36c){const _0x3f244e=a75_0x3b9936;var _0x2009d8;const _0x3b3c37=(_0x2009d8=this['jobState'][_0x3f244e(0xd0)])===null||_0x2009d8===void 0x0?void 0x0:_0x2009d8[_0x3f244e(0xcb)](_0x51c82c=>_0x51c82c[_0x3f244e(0xbf)]===_0x37c36c);if(!_0x3b3c37)throw new Error(_0x3f244e(0xe1)+_0x37c36c+_0x3f244e(0xc6));return _0x3b3c37;}async[a75_0x3b9936(0xdd)](){const _0x4c3354=a75_0x3b9936;if(!await utils_1['FsUtils'][_0x4c3354(0xbc)](this['filePath']))return this[_0x4c3354(0xc3)]();const _0x38afbb=await(0x0,promises_1[_0x4c3354(0xcd)])(job_detail_1[_0x4c3354(0xad)]+'/'+job_1[_0x4c3354(0xb3)],{'encoding':'utf-8'});return JSON['parse'](_0x38afbb);}[a75_0x3b9936(0xc3)](){const _0x5670d1=a75_0x3b9936;return{'id':this[_0x5670d1(0xd7)],'status':logger_enums_1[_0x5670d1(0xd5)][_0x5670d1(0xcc)],'processed':[],'createdDate':new Date()[_0x5670d1(0xd6)](),'successful':0x0,'failed':0x0};}[a75_0x3b9936(0xd8)](_0x247e4d){const _0x1f9ec5=a75_0x3b9936;return _0x247e4d[_0x1f9ec5(0xdf)](_0x5f49bb=>({'name':_0x5f49bb,'status':logger_enums_1['ObjectStatus']['QUEUED'],'failed':0x0,'successful':0x0}));}[a75_0x3b9936(0xd3)](){const _0x292927=a75_0x3b9936;return(0x0,promises_1[_0x292927(0xbd)])(this['filePath'],JSON['stringify'](this[_0x292927(0xac)]));}}function a75_0x1821(_0x22330b,_0x51f59a){const _0x2876fb=a75_0x3634();return a75_0x1821=function(_0x15658d,_0x3d4e22){_0x15658d=_0x15658d-0xa3;let _0x36348e=_0x2876fb[_0x15658d];return _0x36348e;},a75_0x1821(_0x22330b,_0x51f59a);}exports[a75_0x3b9936(0xdc)]=LoggerJobState;