function a75_0x3dea(){const _0x56b175=['search','BaseLogger','apply','LoggerJobState','updateLoggerState','join','8tYMTJq','\x27\x20in\x20statistic','_jobState','getTime','status','name','ObjectStatus','54qORgEw','508664cpBdIh','successful','isLoggerInit','updateObjectProcess','writeFile','failed','69881EHwmxi','134510wiSOjG','readFile','../../job-detail','toString','JobStatus','FAILED','@flosum/utils','Logger\x20Job\x20State\x20wasn\x27t\x20init','parse','../../enums/logger.enums','Cannot\x20find\x20object\x20\x27','fs/promises','./base-logger','373915oWBeyT','defineProperty','setJobStatus','_jobId','2048UptAdA','initObjectStatistics','jobState','path','find','getObjectState','COMPLETED','write','jobStorePath','_isLoggerInit','filePath','map','4392072CvzKTn','JOB_LOG_STATE_FILENAME','801nUONUQ','2904496AqgcCk','isExistsPath','getJobState','FsUtils','constructor','processed','includes','initJobState','stringify','QUEUED','default','451RoQDNC'];a75_0x3dea=function(){return _0x56b175;};return a75_0x3dea();}const a75_0x48f81d=a75_0x14fb;(function(_0x3cf7be,_0x1eb2bb){const _0x99800b=a75_0x14fb,_0x1d4f33=_0x3cf7be();while(!![]){try{const _0xf498e3=parseInt(_0x99800b(0x200))/0x1+parseInt(_0x99800b(0x1d7))/0x2*(-parseInt(_0x99800b(0x1e5))/0x3)+parseInt(_0x99800b(0x1f8))/0x4*(-parseInt(_0x99800b(0x1d3))/0x5)+-parseInt(_0x99800b(0x1ff))/0x6*(parseInt(_0x99800b(0x206))/0x7)+parseInt(_0x99800b(0x1e6))/0x8+parseInt(_0x99800b(0x1e3))/0x9+-parseInt(_0x99800b(0x207))/0xa*(parseInt(_0x99800b(0x1f1))/0xb);if(_0xf498e3===_0x1eb2bb)break;else _0x1d4f33['push'](_0x1d4f33['shift']());}catch(_0x2ac842){_0x1d4f33['push'](_0x1d4f33['shift']());}}}(a75_0x3dea,0x481fe));const a75_0x440a47=(function(){let _0x3c9589=!![];return function(_0x4c5033,_0x3b2e0d){const _0x135379=_0x3c9589?function(){const _0x1c7d8b=a75_0x14fb;if(_0x3b2e0d){const _0x89b8e3=_0x3b2e0d[_0x1c7d8b(0x1f4)](_0x4c5033,arguments);return _0x3b2e0d=null,_0x89b8e3;}}:function(){};return _0x3c9589=![],_0x135379;};}()),a75_0x9ff835=a75_0x440a47(this,function(){const _0x4cffb4=a75_0x14fb;return a75_0x9ff835[_0x4cffb4(0x20a)]()[_0x4cffb4(0x1f2)]('(((.+)+)+)+$')['toString']()[_0x4cffb4(0x1ea)](a75_0x9ff835)[_0x4cffb4(0x1f2)]('(((.+)+)+)+$');});a75_0x9ff835();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x23287c){return _0x23287c&&_0x23287c['__esModule']?_0x23287c:{'default':_0x23287c};};Object[a75_0x48f81d(0x1d4)](exports,'__esModule',{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a75_0x48f81d(0x1da))),logger_enums_1=require(a75_0x48f81d(0x210)),base_logger_1=require(a75_0x48f81d(0x1d2)),promises_1=require(a75_0x48f81d(0x212)),job_detail_1=require(a75_0x48f81d(0x209)),utils_1=require(a75_0x48f81d(0x20d)),job_1=require('../../../../../constants/job');function a75_0x14fb(_0xa923f3,_0x498b46){const _0x199391=a75_0x3dea();return a75_0x14fb=function(_0x9ff835,_0x440a47){_0x9ff835=_0x9ff835-0x1d2;let _0x3deaca=_0x199391[_0x9ff835];return _0x3deaca;},a75_0x14fb(_0xa923f3,_0x498b46);}class LoggerJobState extends base_logger_1[a75_0x48f81d(0x1f3)]{constructor(){const _0x1427d5=a75_0x48f81d;super(...arguments),this[_0x1427d5(0x1e0)]=![];}get[a75_0x48f81d(0x202)](){const _0x35f001=a75_0x48f81d;return this[_0x35f001(0x1e0)];}set['isLoggerInit'](_0x3b10de){const _0x322776=a75_0x48f81d;this[_0x322776(0x1e0)]=_0x3b10de;}get[a75_0x48f81d(0x1d9)](){const _0x462f61=a75_0x48f81d;if(!this[_0x462f61(0x202)])throw new Error(_0x462f61(0x20e));return this[_0x462f61(0x1fa)];}get[a75_0x48f81d(0x1e1)](){const _0x4c8aa2=a75_0x48f81d;return path_1[_0x4c8aa2(0x1f0)][_0x4c8aa2(0x1f7)](this['_jobPath'],job_1['JOB_LOG_STATE_FILENAME']);}async['init'](_0x12c4e6){const _0x2acec1=a75_0x48f81d;return this[_0x2acec1(0x1fa)]=await this[_0x2acec1(0x1e8)](),this[_0x2acec1(0x1fa)][_0x2acec1(0x1eb)]=this[_0x2acec1(0x1d8)](_0x12c4e6),await this['write'](),await this['start'](),this[_0x2acec1(0x202)]=!![],this;}['setObjectStatus'](_0xc12cc2,_0x2b8c07){const _0x45ac38=a75_0x48f81d;this[_0x45ac38(0x1dc)](_0xc12cc2)[_0x45ac38(0x1fc)]=_0x2b8c07,this[_0x45ac38(0x1f6)]();}[a75_0x48f81d(0x1d5)](_0x2d2af9){const _0x50c960=a75_0x48f81d;this[_0x50c960(0x1d9)][_0x50c960(0x1fc)]=_0x2d2af9,[logger_enums_1[_0x50c960(0x20b)][_0x50c960(0x20c)],logger_enums_1['JobStatus'][_0x50c960(0x1dd)]][_0x50c960(0x1ec)](_0x2d2af9)&&(this[_0x50c960(0x1d9)]['completedDate']=new Date()[_0x50c960(0x1fb)]()),this[_0x50c960(0x1f6)]();}['setJobError'](_0x2eabd9){const _0x47f778=a75_0x48f81d;this[_0x47f778(0x1d9)]['error']=_0x2eabd9,this[_0x47f778(0x1f6)]();}[a75_0x48f81d(0x203)](_0x5ba508,_0x5d1649,_0x336f96){const _0x4b3b80=a75_0x48f81d,_0x222db3=this[_0x4b3b80(0x1dc)](_0x5ba508);_0x222db3['successful']+=_0x5d1649,_0x222db3['failed']+=_0x336f96,this[_0x4b3b80(0x1d9)][_0x4b3b80(0x201)]+=_0x5d1649,this['jobState'][_0x4b3b80(0x205)]+=_0x336f96,this[_0x4b3b80(0x1f6)]();}[a75_0x48f81d(0x1dc)](_0x29d254){const _0x31b324=a75_0x48f81d;var _0x51a2d2;const _0x32087d=(_0x51a2d2=this['jobState']['processed'])===null||_0x51a2d2===void 0x0?void 0x0:_0x51a2d2[_0x31b324(0x1db)](_0x14516c=>_0x14516c[_0x31b324(0x1fd)]===_0x29d254);if(!_0x32087d)throw new Error(_0x31b324(0x211)+_0x29d254+_0x31b324(0x1f9));return _0x32087d;}async[a75_0x48f81d(0x1e8)](){const _0x44c2db=a75_0x48f81d;if(!await utils_1[_0x44c2db(0x1e9)][_0x44c2db(0x1e7)](this[_0x44c2db(0x1e1)]))return this[_0x44c2db(0x1ed)]();const _0x5752d7=await(0x0,promises_1[_0x44c2db(0x208)])(job_detail_1[_0x44c2db(0x1df)]+'/'+job_1[_0x44c2db(0x1e4)],{'encoding':'utf-8'});return JSON[_0x44c2db(0x20f)](_0x5752d7);}[a75_0x48f81d(0x1ed)](){const _0x16d406=a75_0x48f81d;return{'id':this[_0x16d406(0x1d6)],'status':logger_enums_1[_0x16d406(0x20b)][_0x16d406(0x1ef)],'processed':[],'createdDate':new Date()[_0x16d406(0x1fb)](),'successful':0x0,'failed':0x0};}[a75_0x48f81d(0x1d8)](_0x33f312){const _0x3f965c=a75_0x48f81d;return _0x33f312[_0x3f965c(0x1e2)](_0x3d5816=>({'name':_0x3d5816,'status':logger_enums_1[_0x3f965c(0x1fe)][_0x3f965c(0x1ef)],'failed':0x0,'successful':0x0}));}[a75_0x48f81d(0x1de)](){const _0x3bbd3c=a75_0x48f81d;return(0x0,promises_1[_0x3bbd3c(0x204)])(this[_0x3bbd3c(0x1e1)],JSON[_0x3bbd3c(0x1ee)](this[_0x3bbd3c(0x1fa)]));}}exports[a75_0x48f81d(0x1f5)]=LoggerJobState;