const a58_0x268104=a58_0x4dab;(function(_0x524125,_0xdd05cc){const _0x4ae460=a58_0x4dab,_0x5c4410=_0x524125();while(!![]){try{const _0x229ada=-parseInt(_0x4ae460(0x199))/0x1*(parseInt(_0x4ae460(0x165))/0x2)+parseInt(_0x4ae460(0x171))/0x3*(parseInt(_0x4ae460(0x18a))/0x4)+-parseInt(_0x4ae460(0x17c))/0x5+parseInt(_0x4ae460(0x19b))/0x6+-parseInt(_0x4ae460(0x163))/0x7*(parseInt(_0x4ae460(0x185))/0x8)+-parseInt(_0x4ae460(0x187))/0x9*(-parseInt(_0x4ae460(0x16c))/0xa)+-parseInt(_0x4ae460(0x198))/0xb*(parseInt(_0x4ae460(0x191))/0xc);if(_0x229ada===_0xdd05cc)break;else _0x5c4410['push'](_0x5c4410['shift']());}catch(_0x7ccec1){_0x5c4410['push'](_0x5c4410['shift']());}}}(a58_0x1d54,0xd7e09));const a58_0x4703dd=(function(){let _0x31ddbe=!![];return function(_0x3ccd36,_0x460e20){const _0x18a118=_0x31ddbe?function(){const _0x44f43f=a58_0x4dab;if(_0x460e20){const _0x16a1d6=_0x460e20[_0x44f43f(0x188)](_0x3ccd36,arguments);return _0x460e20=null,_0x16a1d6;}}:function(){};return _0x31ddbe=![],_0x18a118;};}()),a58_0xdfc19a=a58_0x4703dd(this,function(){const _0x1ddca3=a58_0x4dab;return a58_0xdfc19a[_0x1ddca3(0x182)]()[_0x1ddca3(0x196)]('(((.+)+)+)+$')['toString']()['constructor'](a58_0xdfc19a)[_0x1ddca3(0x196)](_0x1ddca3(0x179));});function a58_0x1d54(){const _0x44d214=['JOB_LOG_STATE_FILENAME','2422428mMvUim','setObjectStatus','jobStorePath','processed','7746746LdTKJt','JobStatus','886108oXAzZu','_jobState','__esModule','default','@flosum/utils','getJobState','updateLoggerState','63730DTWgzS','COMPLETED','getTime','completedDate','isExistsPath','2116593GEgbjH','../../enums/logger.enums','QUEUED','initObjectStatistics','FsUtils','Logger\x20Job\x20State\x20wasn\x27t\x20init','isLoggerInit','setJobError','(((.+)+)+)+$','init','successful','3786720mtkCqU','defineProperty','utf-8','_isLoggerInit','path','jobState','toString','stringify','./base-logger','8dByDfw','writeFile','2493sJYCcS','apply','error','8yPxxUU','filePath','initJobState','failed','_jobPath','map','BaseLogger','36lZyMTZ','FAILED','\x27\x20in\x20statistic','join','write','search','includes','1425644Fhfowb','1rnsHpI'];a58_0x1d54=function(){return _0x44d214;};return a58_0x1d54();}a58_0xdfc19a();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x252062){const _0x4762fc=a58_0x4dab;return _0x252062&&_0x252062[_0x4762fc(0x167)]?_0x252062:{'default':_0x252062};};Object[a58_0x268104(0x17d)](exports,a58_0x268104(0x167),{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a58_0x268104(0x180))),logger_enums_1=require(a58_0x268104(0x172)),base_logger_1=require(a58_0x268104(0x184)),promises_1=require('fs/promises'),job_detail_1=require('../../job-detail'),utils_1=require(a58_0x268104(0x169)),job_1=require('../../../../../constants/job');class LoggerJobState extends base_logger_1[a58_0x268104(0x190)]{constructor(){const _0x22f984=a58_0x268104;super(...arguments),this[_0x22f984(0x17f)]=![];}get[a58_0x268104(0x177)](){return this['_isLoggerInit'];}set[a58_0x268104(0x177)](_0x2cdb41){const _0x5a51be=a58_0x268104;this[_0x5a51be(0x17f)]=_0x2cdb41;}get[a58_0x268104(0x181)](){const _0x45a114=a58_0x268104;if(!this[_0x45a114(0x177)])throw new Error(_0x45a114(0x176));return this[_0x45a114(0x166)];}get[a58_0x268104(0x18b)](){const _0xa1340d=a58_0x268104;return path_1[_0xa1340d(0x168)][_0xa1340d(0x194)](this[_0xa1340d(0x18e)],job_1[_0xa1340d(0x19a)]);}async[a58_0x268104(0x17a)](_0x5e31c0){const _0xb3c565=a58_0x268104;return this['_jobState']=await this[_0xb3c565(0x16a)](),this['_jobState'][_0xb3c565(0x162)]=this[_0xb3c565(0x174)](_0x5e31c0),await this[_0xb3c565(0x195)](),await this['start'](),this['isLoggerInit']=!![],this;}[a58_0x268104(0x160)](_0x57015d,_0x241018){const _0x4a95b1=a58_0x268104;this['getObjectState'](_0x57015d)['status']=_0x241018,this[_0x4a95b1(0x16b)]();}['setJobStatus'](_0x2a8611){const _0xae96ea=a58_0x268104;this['jobState']['status']=_0x2a8611,[logger_enums_1[_0xae96ea(0x164)][_0xae96ea(0x192)],logger_enums_1[_0xae96ea(0x164)][_0xae96ea(0x16d)]][_0xae96ea(0x197)](_0x2a8611)&&(this[_0xae96ea(0x181)][_0xae96ea(0x16f)]=new Date()[_0xae96ea(0x16e)]()),this['updateLoggerState']();}[a58_0x268104(0x178)](_0xf3e48b){const _0x2f7fe1=a58_0x268104;this[_0x2f7fe1(0x181)][_0x2f7fe1(0x189)]=_0xf3e48b,this[_0x2f7fe1(0x16b)]();}['updateObjectProcess'](_0x29a9af,_0x30fdd5,_0x3dff0f){const _0x3fdcc7=a58_0x268104,_0x21a256=this['getObjectState'](_0x29a9af);_0x21a256[_0x3fdcc7(0x17b)]+=_0x30fdd5,_0x21a256[_0x3fdcc7(0x18d)]+=_0x3dff0f,this[_0x3fdcc7(0x181)][_0x3fdcc7(0x17b)]+=_0x30fdd5,this[_0x3fdcc7(0x181)][_0x3fdcc7(0x18d)]+=_0x3dff0f,this[_0x3fdcc7(0x16b)]();}['getObjectState'](_0x35b7d3){const _0x3f159b=a58_0x268104;var _0xf14560;const _0x22841b=(_0xf14560=this[_0x3f159b(0x181)]['processed'])===null||_0xf14560===void 0x0?void 0x0:_0xf14560['find'](_0x4ae188=>_0x4ae188['name']===_0x35b7d3);if(!_0x22841b)throw new Error('Cannot\x20find\x20object\x20\x27'+_0x35b7d3+_0x3f159b(0x193));return _0x22841b;}async[a58_0x268104(0x16a)](){const _0x5a332c=a58_0x268104;if(!await utils_1[_0x5a332c(0x175)][_0x5a332c(0x170)](this[_0x5a332c(0x18b)]))return this[_0x5a332c(0x18c)]();const _0x260f5d=await(0x0,promises_1['readFile'])(job_detail_1[_0x5a332c(0x161)]+'/'+job_1[_0x5a332c(0x19a)],{'encoding':_0x5a332c(0x17e)});return JSON['parse'](_0x260f5d);}[a58_0x268104(0x18c)](){const _0x12c2e2=a58_0x268104;return{'id':this['_jobId'],'status':logger_enums_1['JobStatus'][_0x12c2e2(0x173)],'processed':[],'createdDate':new Date()[_0x12c2e2(0x16e)](),'successful':0x0,'failed':0x0};}[a58_0x268104(0x174)](_0x3d1d76){const _0x47f540=a58_0x268104;return _0x3d1d76[_0x47f540(0x18f)](_0x13a71c=>({'name':_0x13a71c,'status':logger_enums_1['ObjectStatus']['QUEUED'],'failed':0x0,'successful':0x0}));}[a58_0x268104(0x195)](){const _0x5bb914=a58_0x268104;return(0x0,promises_1[_0x5bb914(0x186)])(this[_0x5bb914(0x18b)],JSON[_0x5bb914(0x183)](this[_0x5bb914(0x166)]));}}function a58_0x4dab(_0x123472,_0x4cd5fb){const _0x319deb=a58_0x1d54();return a58_0x4dab=function(_0xdfc19a,_0x4703dd){_0xdfc19a=_0xdfc19a-0x160;let _0x1d5458=_0x319deb[_0xdfc19a];return _0x1d5458;},a58_0x4dab(_0x123472,_0x4cd5fb);}exports['LoggerJobState']=LoggerJobState;