const a58_0x46aee6=a58_0x44df;(function(_0x2904aa,_0x2604fa){const _0x556255=a58_0x44df,_0x9ac6a=_0x2904aa();while(!![]){try{const _0x14721e=parseInt(_0x556255(0x127))/0x1+-parseInt(_0x556255(0x15f))/0x2*(parseInt(_0x556255(0x12b))/0x3)+-parseInt(_0x556255(0x14a))/0x4*(parseInt(_0x556255(0x140))/0x5)+-parseInt(_0x556255(0x158))/0x6*(-parseInt(_0x556255(0x138))/0x7)+-parseInt(_0x556255(0x120))/0x8*(parseInt(_0x556255(0x11f))/0x9)+parseInt(_0x556255(0x148))/0xa*(parseInt(_0x556255(0x145))/0xb)+parseInt(_0x556255(0x131))/0xc;if(_0x14721e===_0x2604fa)break;else _0x9ac6a['push'](_0x9ac6a['shift']());}catch(_0xdf6528){_0x9ac6a['push'](_0x9ac6a['shift']());}}}(a58_0x130d,0xd6710));const a58_0x1c18d0=(function(){let _0x208f63=!![];return function(_0x321fdf,_0x2aa975){const _0x2a63fa=_0x208f63?function(){const _0x5dab54=a58_0x44df;if(_0x2aa975){const _0x4da5cd=_0x2aa975[_0x5dab54(0x125)](_0x321fdf,arguments);return _0x2aa975=null,_0x4da5cd;}}:function(){};return _0x208f63=![],_0x2a63fa;};}()),a58_0x21d641=a58_0x1c18d0(this,function(){const _0x47b9a6=a58_0x44df;return a58_0x21d641[_0x47b9a6(0x14f)]()['search'](_0x47b9a6(0x142))[_0x47b9a6(0x14f)]()[_0x47b9a6(0x13c)](a58_0x21d641)[_0x47b9a6(0x136)](_0x47b9a6(0x142));});a58_0x21d641();function a58_0x44df(_0x11bc54,_0x50f189){const _0x5d2ae3=a58_0x130d();return a58_0x44df=function(_0x21d641,_0x1c18d0){_0x21d641=_0x21d641-0x11d;let _0x130da7=_0x5d2ae3[_0x21d641];return _0x130da7;},a58_0x44df(_0x11bc54,_0x50f189);}'use strict';var __importDefault=this&&this[a58_0x46aee6(0x146)]||function(_0x23fb74){const _0x4e2454=a58_0x46aee6;return _0x23fb74&&_0x23fb74[_0x4e2454(0x15e)]?_0x23fb74:{'default':_0x23fb74};};Object[a58_0x46aee6(0x154)](exports,'__esModule',{'value':!![]}),exports[a58_0x46aee6(0x143)]=void 0x0;const path_1=__importDefault(require(a58_0x46aee6(0x14e))),logger_enums_1=require(a58_0x46aee6(0x135)),base_logger_1=require(a58_0x46aee6(0x147)),promises_1=require(a58_0x46aee6(0x160)),job_detail_1=require(a58_0x46aee6(0x15c)),utils_1=require(a58_0x46aee6(0x153)),job_1=require(a58_0x46aee6(0x122));class LoggerJobState extends base_logger_1[a58_0x46aee6(0x141)]{constructor(){super(...arguments),this['_isLoggerInit']=![];}get[a58_0x46aee6(0x11e)](){const _0x3810f7=a58_0x46aee6;return this[_0x3810f7(0x15b)];}set[a58_0x46aee6(0x11e)](_0x592a02){const _0x54f5cd=a58_0x46aee6;this[_0x54f5cd(0x15b)]=_0x592a02;}get['jobState'](){const _0x4d2d58=a58_0x46aee6;if(!this[_0x4d2d58(0x11e)])throw new Error(_0x4d2d58(0x13f));return this[_0x4d2d58(0x168)];}get[a58_0x46aee6(0x155)](){const _0x2986f6=a58_0x46aee6;return path_1[_0x2986f6(0x166)][_0x2986f6(0x159)](this[_0x2986f6(0x13e)],job_1[_0x2986f6(0x12e)]);}async['init'](_0x10366a){const _0x3f1e5f=a58_0x46aee6;return this[_0x3f1e5f(0x168)]=await this[_0x3f1e5f(0x15a)](),this['_jobState'][_0x3f1e5f(0x157)]=this['initObjectStatistics'](_0x10366a),await this[_0x3f1e5f(0x121)](),await this[_0x3f1e5f(0x128)](),this['isLoggerInit']=!![],this;}[a58_0x46aee6(0x162)](_0x36b1f4,_0x1f7a9d){const _0x324ac8=a58_0x46aee6;this['getObjectState'](_0x36b1f4)[_0x324ac8(0x13d)]=_0x1f7a9d,this['updateLoggerState']();}[a58_0x46aee6(0x161)](_0x483ef7){const _0x464ed0=a58_0x46aee6;this[_0x464ed0(0x156)]['status']=_0x483ef7,[logger_enums_1['JobStatus'][_0x464ed0(0x134)],logger_enums_1[_0x464ed0(0x164)][_0x464ed0(0x152)]][_0x464ed0(0x132)](_0x483ef7)&&(this[_0x464ed0(0x156)][_0x464ed0(0x129)]=new Date()[_0x464ed0(0x14d)]()),this[_0x464ed0(0x126)]();}[a58_0x46aee6(0x15d)](_0x174b39){const _0x5a7061=a58_0x46aee6;this[_0x5a7061(0x156)][_0x5a7061(0x124)]=_0x174b39,this[_0x5a7061(0x126)]();}[a58_0x46aee6(0x123)](_0x3abd26,_0xa5a8b0,_0x28cc27){const _0x321126=a58_0x46aee6,_0x4a4b46=this[_0x321126(0x137)](_0x3abd26);_0x4a4b46[_0x321126(0x12c)]+=_0xa5a8b0,_0x4a4b46[_0x321126(0x12a)]+=_0x28cc27,this['jobState'][_0x321126(0x12c)]+=_0xa5a8b0,this[_0x321126(0x156)]['failed']+=_0x28cc27,this[_0x321126(0x126)]();}[a58_0x46aee6(0x137)](_0x4fce34){const _0x1d4879=a58_0x46aee6;var _0x1f4922;const _0xac0d81=(_0x1f4922=this[_0x1d4879(0x156)][_0x1d4879(0x157)])===null||_0x1f4922===void 0x0?void 0x0:_0x1f4922[_0x1d4879(0x13a)](_0x46c941=>_0x46c941[_0x1d4879(0x167)]===_0x4fce34);if(!_0xac0d81)throw new Error(_0x1d4879(0x13b)+_0x4fce34+_0x1d4879(0x149));return _0xac0d81;}async[a58_0x46aee6(0x15a)](){const _0x2cc2aa=a58_0x46aee6;if(!await utils_1[_0x2cc2aa(0x14c)][_0x2cc2aa(0x12d)](this[_0x2cc2aa(0x155)]))return this['initJobState']();const _0x596acd=await(0x0,promises_1[_0x2cc2aa(0x130)])(job_detail_1[_0x2cc2aa(0x144)]+'/'+job_1[_0x2cc2aa(0x12e)],{'encoding':_0x2cc2aa(0x139)});return JSON[_0x2cc2aa(0x12f)](_0x596acd);}['initJobState'](){const _0xe906cd=a58_0x46aee6;return{'id':this[_0xe906cd(0x11d)],'status':logger_enums_1[_0xe906cd(0x164)][_0xe906cd(0x150)],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}[a58_0x46aee6(0x163)](_0x4e72fa){const _0x1b4dca=a58_0x46aee6;return _0x4e72fa[_0x1b4dca(0x14b)](_0x54a5e2=>({'name':_0x54a5e2,'status':logger_enums_1[_0x1b4dca(0x151)]['QUEUED'],'failed':0x0,'successful':0x0}));}[a58_0x46aee6(0x121)](){const _0x2f890a=a58_0x46aee6;return(0x0,promises_1[_0x2f890a(0x133)])(this[_0x2f890a(0x155)],JSON[_0x2f890a(0x165)](this[_0x2f890a(0x168)]));}}function a58_0x130d(){const _0x3f7ef2=['(((.+)+)+)+$','LoggerJobState','jobStorePath','121RQNGVi','__importDefault','./base-logger','348470dssakP','\x27\x20in\x20statistic','92qQpbya','map','FsUtils','getTime','path','toString','QUEUED','ObjectStatus','COMPLETED','@flosum/utils','defineProperty','filePath','jobState','processed','30iFjVoj','join','getJobState','_isLoggerInit','../../job-detail','setJobError','__esModule','3366194mxbAzO','fs/promises','setJobStatus','setObjectStatus','initObjectStatistics','JobStatus','stringify','default','name','_jobState','_jobId','isLoggerInit','117SCgzaF','55672EEuLVn','write','../../../../../constants/job','updateObjectProcess','error','apply','updateLoggerState','617035PrIjpG','start','completedDate','failed','3SICKeK','successful','isExistsPath','JOB_LOG_STATE_FILENAME','parse','readFile','34106352BwjcKM','includes','writeFile','FAILED','../../enums/logger.enums','search','getObjectState','471807dpAUVo','utf-8','find','Cannot\x20find\x20object\x20\x27','constructor','status','_jobPath','Logger\x20Job\x20State\x20wasn\x27t\x20init','332095POyXWp','BaseLogger'];a58_0x130d=function(){return _0x3f7ef2;};return a58_0x130d();}exports[a58_0x46aee6(0x143)]=LoggerJobState;