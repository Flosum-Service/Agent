const a57_0x59dde0=a57_0x231a;(function(_0xf423e2,_0xdd5925){const _0x4a1bf3=a57_0x231a,_0x370093=_0xf423e2();while(!![]){try{const _0x527019=-parseInt(_0x4a1bf3(0x1bf))/0x1+-parseInt(_0x4a1bf3(0x1b8))/0x2+parseInt(_0x4a1bf3(0x1cc))/0x3*(-parseInt(_0x4a1bf3(0x1d0))/0x4)+parseInt(_0x4a1bf3(0x197))/0x5*(parseInt(_0x4a1bf3(0x1c8))/0x6)+parseInt(_0x4a1bf3(0x1c1))/0x7+parseInt(_0x4a1bf3(0x19b))/0x8*(-parseInt(_0x4a1bf3(0x1d9))/0x9)+parseInt(_0x4a1bf3(0x1a1))/0xa;if(_0x527019===_0xdd5925)break;else _0x370093['push'](_0x370093['shift']());}catch(_0x1e6c61){_0x370093['push'](_0x370093['shift']());}}}(a57_0x55a8,0x62af0));const a57_0x30f0ad=(function(){let _0x336558=!![];return function(_0x40f6e2,_0xa2c11c){const _0x52148c=_0x336558?function(){if(_0xa2c11c){const _0x1178cb=_0xa2c11c['apply'](_0x40f6e2,arguments);return _0xa2c11c=null,_0x1178cb;}}:function(){};return _0x336558=![],_0x52148c;};}()),a57_0x343af6=a57_0x30f0ad(this,function(){const _0x37b85c=a57_0x231a;return a57_0x343af6[_0x37b85c(0x1b6)]()[_0x37b85c(0x1d5)](_0x37b85c(0x1bd))[_0x37b85c(0x1b6)]()[_0x37b85c(0x1b3)](a57_0x343af6)[_0x37b85c(0x1d5)](_0x37b85c(0x1bd));});a57_0x343af6();'use strict';var __importDefault=this&&this[a57_0x59dde0(0x1ca)]||function(_0x5c58fa){const _0x35d105=a57_0x59dde0;return _0x5c58fa&&_0x5c58fa[_0x35d105(0x1ac)]?_0x5c58fa:{'default':_0x5c58fa};};function a57_0x55a8(){const _0x5138c8=['QUEUED','map','initObjectStatistics','BaseLogger','constructor','processed','FsUtils','toString','getTime','520206hJkRQV','updateLoggerState','isLoggerInit','includes','_jobState','(((.+)+)+)+$','jobStorePath','782852foKbej','path','546084aaOnnQ','@flosum/utils','filePath','initJobState','join','failed','write','6HfCqru','_jobId','__importDefault','../../job-detail','137649pAAIYx','defineProperty','../../enums/logger.enums','JobStatus','28VFuhGW','_jobPath','./base-logger','getJobState','getObjectState','search','find','updateObjectProcess','COMPLETED','6597927HUKzdL','name','../../../../../constants/job','25590iHaULa','setObjectStatus','start','Cannot\x20find\x20object\x20\x27','8cmhhXt','writeFile','error','utf-8','init','parse','24183170rplPfp','LoggerJobState','successful','default','jobState','status','JOB_LOG_STATE_FILENAME','setJobStatus','stringify','\x27\x20in\x20statistic','_isLoggerInit','__esModule','fs/promises','Logger\x20Job\x20State\x20wasn\x27t\x20init'];a57_0x55a8=function(){return _0x5138c8;};return a57_0x55a8();}Object[a57_0x59dde0(0x1cd)](exports,a57_0x59dde0(0x1ac),{'value':!![]}),exports[a57_0x59dde0(0x1a2)]=void 0x0;function a57_0x231a(_0x9f0d97,_0x118e1f){const _0x324975=a57_0x55a8();return a57_0x231a=function(_0x343af6,_0x30f0ad){_0x343af6=_0x343af6-0x195;let _0x55a888=_0x324975[_0x343af6];return _0x55a888;},a57_0x231a(_0x9f0d97,_0x118e1f);}const path_1=__importDefault(require(a57_0x59dde0(0x1c0))),logger_enums_1=require(a57_0x59dde0(0x1ce)),base_logger_1=require(a57_0x59dde0(0x1d2)),promises_1=require(a57_0x59dde0(0x1ad)),job_detail_1=require(a57_0x59dde0(0x1cb)),utils_1=require(a57_0x59dde0(0x1c2)),job_1=require(a57_0x59dde0(0x196));class LoggerJobState extends base_logger_1[a57_0x59dde0(0x1b2)]{constructor(){const _0x45fad0=a57_0x59dde0;super(...arguments),this[_0x45fad0(0x1ab)]=![];}get[a57_0x59dde0(0x1ba)](){const _0x4cd8cb=a57_0x59dde0;return this[_0x4cd8cb(0x1ab)];}set[a57_0x59dde0(0x1ba)](_0x1939c0){const _0xc04a33=a57_0x59dde0;this[_0xc04a33(0x1ab)]=_0x1939c0;}get[a57_0x59dde0(0x1a5)](){const _0xcc7a6a=a57_0x59dde0;if(!this[_0xcc7a6a(0x1ba)])throw new Error(_0xcc7a6a(0x1ae));return this[_0xcc7a6a(0x1bc)];}get[a57_0x59dde0(0x1c3)](){const _0x3abe99=a57_0x59dde0;return path_1[_0x3abe99(0x1a4)][_0x3abe99(0x1c5)](this[_0x3abe99(0x1d1)],job_1[_0x3abe99(0x1a7)]);}async[a57_0x59dde0(0x19f)](_0x1bee5b){const _0x5e1287=a57_0x59dde0;return this[_0x5e1287(0x1bc)]=await this[_0x5e1287(0x1d3)](),this['_jobState'][_0x5e1287(0x1b4)]=this[_0x5e1287(0x1b1)](_0x1bee5b),await this[_0x5e1287(0x1c7)](),await this[_0x5e1287(0x199)](),this[_0x5e1287(0x1ba)]=!![],this;}[a57_0x59dde0(0x198)](_0x476299,_0x3abfdd){const _0x1ce2b5=a57_0x59dde0;this[_0x1ce2b5(0x1d4)](_0x476299)[_0x1ce2b5(0x1a6)]=_0x3abfdd,this['updateLoggerState']();}[a57_0x59dde0(0x1a8)](_0x40ea46){const _0x280c81=a57_0x59dde0;this['jobState'][_0x280c81(0x1a6)]=_0x40ea46,[logger_enums_1[_0x280c81(0x1cf)]['FAILED'],logger_enums_1[_0x280c81(0x1cf)][_0x280c81(0x1d8)]][_0x280c81(0x1bb)](_0x40ea46)&&(this[_0x280c81(0x1a5)]['completedDate']=new Date()[_0x280c81(0x1b7)]()),this['updateLoggerState']();}['setJobError'](_0x3a7014){const _0x2b7419=a57_0x59dde0;this[_0x2b7419(0x1a5)][_0x2b7419(0x19d)]=_0x3a7014,this[_0x2b7419(0x1b9)]();}[a57_0x59dde0(0x1d7)](_0x47a256,_0x1cae04,_0x36def5){const _0x25edc4=a57_0x59dde0,_0x39432b=this[_0x25edc4(0x1d4)](_0x47a256);_0x39432b[_0x25edc4(0x1a3)]+=_0x1cae04,_0x39432b[_0x25edc4(0x1c6)]+=_0x36def5,this[_0x25edc4(0x1a5)][_0x25edc4(0x1a3)]+=_0x1cae04,this[_0x25edc4(0x1a5)][_0x25edc4(0x1c6)]+=_0x36def5,this[_0x25edc4(0x1b9)]();}[a57_0x59dde0(0x1d4)](_0x5b393d){const _0x2e6fbb=a57_0x59dde0;var _0x2f389b;const _0x5d5c4b=(_0x2f389b=this[_0x2e6fbb(0x1a5)][_0x2e6fbb(0x1b4)])===null||_0x2f389b===void 0x0?void 0x0:_0x2f389b[_0x2e6fbb(0x1d6)](_0x219a6b=>_0x219a6b[_0x2e6fbb(0x195)]===_0x5b393d);if(!_0x5d5c4b)throw new Error(_0x2e6fbb(0x19a)+_0x5b393d+_0x2e6fbb(0x1aa));return _0x5d5c4b;}async[a57_0x59dde0(0x1d3)](){const _0xb1802f=a57_0x59dde0;if(!await utils_1[_0xb1802f(0x1b5)]['isExistsPath'](this[_0xb1802f(0x1c3)]))return this['initJobState']();const _0x2603a1=await(0x0,promises_1['readFile'])(job_detail_1[_0xb1802f(0x1be)]+'/'+job_1[_0xb1802f(0x1a7)],{'encoding':_0xb1802f(0x19e)});return JSON[_0xb1802f(0x1a0)](_0x2603a1);}[a57_0x59dde0(0x1c4)](){const _0x4fb680=a57_0x59dde0;return{'id':this[_0x4fb680(0x1c9)],'status':logger_enums_1[_0x4fb680(0x1cf)][_0x4fb680(0x1af)],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}[a57_0x59dde0(0x1b1)](_0x42fccd){const _0x527303=a57_0x59dde0;return _0x42fccd[_0x527303(0x1b0)](_0x73f258=>({'name':_0x73f258,'status':logger_enums_1['ObjectStatus'][_0x527303(0x1af)],'failed':0x0,'successful':0x0}));}['write'](){const _0x51cd61=a57_0x59dde0;return(0x0,promises_1[_0x51cd61(0x19c)])(this[_0x51cd61(0x1c3)],JSON[_0x51cd61(0x1a9)](this[_0x51cd61(0x1bc)]));}}exports['LoggerJobState']=LoggerJobState;