const a73_0x974451=a73_0x1c40;(function(_0x2609e6,_0x24e5e3){const _0x5e18a0=a73_0x1c40,_0x4debf8=_0x2609e6();while(!![]){try{const _0x3db386=parseInt(_0x5e18a0(0xf8))/0x1*(parseInt(_0x5e18a0(0xe7))/0x2)+parseInt(_0x5e18a0(0xf2))/0x3+-parseInt(_0x5e18a0(0xe0))/0x4+-parseInt(_0x5e18a0(0xfc))/0x5*(-parseInt(_0x5e18a0(0x103))/0x6)+parseInt(_0x5e18a0(0x110))/0x7*(-parseInt(_0x5e18a0(0x104))/0x8)+-parseInt(_0x5e18a0(0xea))/0x9+-parseInt(_0x5e18a0(0x109))/0xa*(parseInt(_0x5e18a0(0xdf))/0xb);if(_0x3db386===_0x24e5e3)break;else _0x4debf8['push'](_0x4debf8['shift']());}catch(_0x46d3c8){_0x4debf8['push'](_0x4debf8['shift']());}}}(a73_0x3419,0xc81fe));function a73_0x3419(){const _0x9a3048=['JobStatus','LoggerJobState','initJobState','209RbtAjZ','2284168VYkNyk','updateLoggerState','successful','COMPLETED','(((.+)+)+)+$','updateObjectProcess','toString','17102rYxBrc','processed','../../../../../constants/job','6951861AQzUbp','QUEUED','isLoggerInit','isExistsPath','Logger\x20Job\x20State\x20wasn\x27t\x20init','_jobId','init','_jobPath','3912426sQmWGt','jobStorePath','setJobStatus','failed','setObjectStatus','../../enums/logger.enums','36MiEcuF','BaseLogger','__esModule','filePath','3090bvhcys','FsUtils','writeFile','\x27\x20in\x20statistic','utf-8','status','initObjectStatistics','13002uXEEEF','5133776JfEqIM','../../job-detail','error','@flosum/utils','getJobState','76990Uaefcr','Cannot\x20find\x20object\x20\x27','_isLoggerInit','JOB_LOG_STATE_FILENAME','jobState','setJobError','join','7rMyxvV','fs/promises','default','./base-logger','find','stringify','_jobState','defineProperty','write','getTime','parse','FAILED','completedDate','start','map','getObjectState','__importDefault','readFile'];a73_0x3419=function(){return _0x9a3048;};return a73_0x3419();}const a73_0x13932f=(function(){let _0x4efcb0=!![];return function(_0x347611,_0x4b77e3){const _0x194b13=_0x4efcb0?function(){if(_0x4b77e3){const _0x41c45f=_0x4b77e3['apply'](_0x347611,arguments);return _0x4b77e3=null,_0x41c45f;}}:function(){};return _0x4efcb0=![],_0x194b13;};}()),a73_0x3a60a7=a73_0x13932f(this,function(){const _0x55ffc7=a73_0x1c40;return a73_0x3a60a7[_0x55ffc7(0xe6)]()['search']('(((.+)+)+)+$')[_0x55ffc7(0xe6)]()['constructor'](a73_0x3a60a7)['search'](_0x55ffc7(0xe4));});a73_0x3a60a7();function a73_0x1c40(_0x21ac2e,_0x4d2e5f){const _0x3ea9f9=a73_0x3419();return a73_0x1c40=function(_0x3a60a7,_0x13932f){_0x3a60a7=_0x3a60a7-0xcd;let _0x3419a0=_0x3ea9f9[_0x3a60a7];return _0x3419a0;},a73_0x1c40(_0x21ac2e,_0x4d2e5f);}'use strict';var __importDefault=this&&this[a73_0x974451(0xda)]||function(_0x5f4ce0){const _0x6f73e=a73_0x974451;return _0x5f4ce0&&_0x5f4ce0[_0x6f73e(0xfa)]?_0x5f4ce0:{'default':_0x5f4ce0};};Object[a73_0x974451(0xd1)](exports,a73_0x974451(0xfa),{'value':!![]}),exports[a73_0x974451(0xdd)]=void 0x0;const path_1=__importDefault(require('path')),logger_enums_1=require(a73_0x974451(0xf7)),base_logger_1=require(a73_0x974451(0xcd)),promises_1=require(a73_0x974451(0x111)),job_detail_1=require(a73_0x974451(0x105)),utils_1=require(a73_0x974451(0x107)),job_1=require(a73_0x974451(0xe9));class LoggerJobState extends base_logger_1[a73_0x974451(0xf9)]{constructor(){const _0x4e3782=a73_0x974451;super(...arguments),this[_0x4e3782(0x10b)]=![];}get[a73_0x974451(0xec)](){const _0x5bf91a=a73_0x974451;return this[_0x5bf91a(0x10b)];}set['isLoggerInit'](_0x4e9ddc){this['_isLoggerInit']=_0x4e9ddc;}get[a73_0x974451(0x10d)](){const _0x4f0824=a73_0x974451;if(!this[_0x4f0824(0xec)])throw new Error(_0x4f0824(0xee));return this[_0x4f0824(0xd0)];}get[a73_0x974451(0xfb)](){const _0xf420d9=a73_0x974451;return path_1[_0xf420d9(0x112)][_0xf420d9(0x10f)](this[_0xf420d9(0xf1)],job_1[_0xf420d9(0x10c)]);}async[a73_0x974451(0xf0)](_0x66bb02){const _0x4797b5=a73_0x974451;return this[_0x4797b5(0xd0)]=await this['getJobState'](),this['_jobState'][_0x4797b5(0xe8)]=this[_0x4797b5(0x102)](_0x66bb02),await this['write'](),await this[_0x4797b5(0xd7)](),this[_0x4797b5(0xec)]=!![],this;}[a73_0x974451(0xf6)](_0x57a587,_0x4432c8){const _0x46b8bb=a73_0x974451;this[_0x46b8bb(0xd9)](_0x57a587)[_0x46b8bb(0x101)]=_0x4432c8,this[_0x46b8bb(0xe1)]();}[a73_0x974451(0xf4)](_0x3e61ad){const _0x51e0a8=a73_0x974451;this['jobState'][_0x51e0a8(0x101)]=_0x3e61ad,[logger_enums_1[_0x51e0a8(0xdc)][_0x51e0a8(0xd5)],logger_enums_1[_0x51e0a8(0xdc)][_0x51e0a8(0xe3)]]['includes'](_0x3e61ad)&&(this[_0x51e0a8(0x10d)][_0x51e0a8(0xd6)]=new Date()['getTime']()),this[_0x51e0a8(0xe1)]();}[a73_0x974451(0x10e)](_0x12d6cc){const _0x5a3f49=a73_0x974451;this[_0x5a3f49(0x10d)][_0x5a3f49(0x106)]=_0x12d6cc,this['updateLoggerState']();}[a73_0x974451(0xe5)](_0x2d5c7e,_0x6cbbc7,_0x1d98b3){const _0xed8f7=a73_0x974451,_0x3f7659=this['getObjectState'](_0x2d5c7e);_0x3f7659[_0xed8f7(0xe2)]+=_0x6cbbc7,_0x3f7659['failed']+=_0x1d98b3,this[_0xed8f7(0x10d)][_0xed8f7(0xe2)]+=_0x6cbbc7,this[_0xed8f7(0x10d)][_0xed8f7(0xf5)]+=_0x1d98b3,this['updateLoggerState']();}[a73_0x974451(0xd9)](_0xd3950f){const _0xd527ad=a73_0x974451;var _0x6ae7fb;const _0x117c8d=(_0x6ae7fb=this[_0xd527ad(0x10d)][_0xd527ad(0xe8)])===null||_0x6ae7fb===void 0x0?void 0x0:_0x6ae7fb[_0xd527ad(0xce)](_0x39bc8e=>_0x39bc8e['name']===_0xd3950f);if(!_0x117c8d)throw new Error(_0xd527ad(0x10a)+_0xd3950f+_0xd527ad(0xff));return _0x117c8d;}async[a73_0x974451(0x108)](){const _0x6d83af=a73_0x974451;if(!await utils_1[_0x6d83af(0xfd)][_0x6d83af(0xed)](this[_0x6d83af(0xfb)]))return this[_0x6d83af(0xde)]();const _0x130ca3=await(0x0,promises_1[_0x6d83af(0xdb)])(job_detail_1[_0x6d83af(0xf3)]+'/'+job_1[_0x6d83af(0x10c)],{'encoding':_0x6d83af(0x100)});return JSON[_0x6d83af(0xd4)](_0x130ca3);}['initJobState'](){const _0x4ff198=a73_0x974451;return{'id':this[_0x4ff198(0xef)],'status':logger_enums_1[_0x4ff198(0xdc)]['QUEUED'],'processed':[],'createdDate':new Date()[_0x4ff198(0xd3)](),'successful':0x0,'failed':0x0};}[a73_0x974451(0x102)](_0x59d186){const _0x5ce339=a73_0x974451;return _0x59d186[_0x5ce339(0xd8)](_0x4abb84=>({'name':_0x4abb84,'status':logger_enums_1['ObjectStatus'][_0x5ce339(0xeb)],'failed':0x0,'successful':0x0}));}[a73_0x974451(0xd2)](){const _0x2f00ac=a73_0x974451;return(0x0,promises_1[_0x2f00ac(0xfe)])(this[_0x2f00ac(0xfb)],JSON[_0x2f00ac(0xcf)](this[_0x2f00ac(0xd0)]));}}exports[a73_0x974451(0xdd)]=LoggerJobState;