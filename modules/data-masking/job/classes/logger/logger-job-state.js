const a75_0x8a0057=a75_0xe473;(function(_0x77c4f4,_0x36f822){const _0x40e25f=a75_0xe473,_0x4ba919=_0x77c4f4();while(!![]){try{const _0x4602fe=-parseInt(_0x40e25f(0x1b1))/0x1+-parseInt(_0x40e25f(0x1d5))/0x2*(parseInt(_0x40e25f(0x1c7))/0x3)+-parseInt(_0x40e25f(0x1cb))/0x4*(parseInt(_0x40e25f(0x1d9))/0x5)+-parseInt(_0x40e25f(0x1b6))/0x6+parseInt(_0x40e25f(0x1db))/0x7+parseInt(_0x40e25f(0x1ec))/0x8+parseInt(_0x40e25f(0x1cf))/0x9*(parseInt(_0x40e25f(0x1ab))/0xa);if(_0x4602fe===_0x36f822)break;else _0x4ba919['push'](_0x4ba919['shift']());}catch(_0x456e50){_0x4ba919['push'](_0x4ba919['shift']());}}}(a75_0x5bb7,0x68581));const a75_0x3dc72f=(function(){let _0x2c5ab4=!![];return function(_0x3dabfb,_0x1d4b78){const _0x45eb01=_0x2c5ab4?function(){const _0x589fbd=a75_0xe473;if(_0x1d4b78){const _0xea7dd8=_0x1d4b78[_0x589fbd(0x1e9)](_0x3dabfb,arguments);return _0x1d4b78=null,_0xea7dd8;}}:function(){};return _0x2c5ab4=![],_0x45eb01;};}()),a75_0xe045a8=a75_0x3dc72f(this,function(){const _0x4705c2=a75_0xe473;return a75_0xe045a8[_0x4705c2(0x1c3)]()[_0x4705c2(0x1b8)](_0x4705c2(0x1cd))['toString']()[_0x4705c2(0x1e2)](a75_0xe045a8)[_0x4705c2(0x1b8)](_0x4705c2(0x1cd));});a75_0xe045a8();function a75_0xe473(_0x481bee,_0x52d782){const _0x2ba19e=a75_0x5bb7();return a75_0xe473=function(_0xe045a8,_0x3dc72f){_0xe045a8=_0xe045a8-0x1a7;let _0x5bb7ae=_0x2ba19e[_0xe045a8];return _0x5bb7ae;},a75_0xe473(_0x481bee,_0x52d782);}'use strict';var __importDefault=this&&this[a75_0x8a0057(0x1d0)]||function(_0x7ce84b){const _0x23a335=a75_0x8a0057;return _0x7ce84b&&_0x7ce84b[_0x23a335(0x1ae)]?_0x7ce84b:{'default':_0x7ce84b};};Object[a75_0x8a0057(0x1b5)](exports,a75_0x8a0057(0x1ae),{'value':!![]}),exports['LoggerJobState']=void 0x0;const path_1=__importDefault(require(a75_0x8a0057(0x1c6))),logger_enums_1=require(a75_0x8a0057(0x1e6)),base_logger_1=require(a75_0x8a0057(0x1b9)),promises_1=require(a75_0x8a0057(0x1ac)),job_detail_1=require('../../job-detail'),utils_1=require(a75_0x8a0057(0x1b4)),job_1=require(a75_0x8a0057(0x1c1));function a75_0x5bb7(){const _0x4ac75f=['join','5615904XNJejU','default','getObjectState','jobState','completedDate','QUEUED','error','constructor','JobStatus','_isLoggerInit','_jobState','../../enums/logger.enums','_jobPath','setJobStatus','apply','FsUtils','updateObjectProcess','2376024IclsZl','isExistsPath','initJobState','name','init','344950HXoEnb','fs/promises','status','__esModule','writeFile','isLoggerInit','199321KMSYwL','utf-8','_jobId','@flosum/utils','defineProperty','2766114mApdBS','readFile','search','./base-logger','initObjectStatistics','LoggerJobState','failed','write','processed','map','filePath','../../../../../constants/job','COMPLETED','toString','FAILED','getTime','path','1020219NBawsd','updateLoggerState','stringify','BaseLogger','13912FEJNMk','start','(((.+)+)+)+$','setObjectStatus','279siPSPb','__importDefault','successful','JOB_LOG_STATE_FILENAME','includes','getJobState','2QUQNkK','parse','Logger\x20Job\x20State\x20wasn\x27t\x20init','ObjectStatus','1065DmfTNk'];a75_0x5bb7=function(){return _0x4ac75f;};return a75_0x5bb7();}class LoggerJobState extends base_logger_1[a75_0x8a0057(0x1ca)]{constructor(){const _0x4c75de=a75_0x8a0057;super(...arguments),this[_0x4c75de(0x1e4)]=![];}get['isLoggerInit'](){const _0xb39da4=a75_0x8a0057;return this[_0xb39da4(0x1e4)];}set['isLoggerInit'](_0x1c3bc9){const _0x42ba32=a75_0x8a0057;this[_0x42ba32(0x1e4)]=_0x1c3bc9;}get['jobState'](){const _0x206c68=a75_0x8a0057;if(!this['isLoggerInit'])throw new Error(_0x206c68(0x1d7));return this[_0x206c68(0x1e5)];}get[a75_0x8a0057(0x1c0)](){const _0x47457e=a75_0x8a0057;return path_1[_0x47457e(0x1dc)][_0x47457e(0x1da)](this[_0x47457e(0x1e7)],job_1['JOB_LOG_STATE_FILENAME']);}async[a75_0x8a0057(0x1aa)](_0x5f3738){const _0x7399e0=a75_0x8a0057;return this[_0x7399e0(0x1e5)]=await this['getJobState'](),this[_0x7399e0(0x1e5)]['processed']=this[_0x7399e0(0x1ba)](_0x5f3738),await this[_0x7399e0(0x1bd)](),await this[_0x7399e0(0x1cc)](),this[_0x7399e0(0x1b0)]=!![],this;}[a75_0x8a0057(0x1ce)](_0x6a2a08,_0x51edd4){const _0x390f21=a75_0x8a0057;this[_0x390f21(0x1dd)](_0x6a2a08)[_0x390f21(0x1ad)]=_0x51edd4,this[_0x390f21(0x1c8)]();}[a75_0x8a0057(0x1e8)](_0x213758){const _0x5b39bd=a75_0x8a0057;this[_0x5b39bd(0x1de)][_0x5b39bd(0x1ad)]=_0x213758,[logger_enums_1[_0x5b39bd(0x1e3)][_0x5b39bd(0x1c4)],logger_enums_1[_0x5b39bd(0x1e3)][_0x5b39bd(0x1c2)]][_0x5b39bd(0x1d3)](_0x213758)&&(this[_0x5b39bd(0x1de)][_0x5b39bd(0x1df)]=new Date()[_0x5b39bd(0x1c5)]()),this[_0x5b39bd(0x1c8)]();}['setJobError'](_0x575102){const _0x239e8a=a75_0x8a0057;this[_0x239e8a(0x1de)][_0x239e8a(0x1e1)]=_0x575102,this[_0x239e8a(0x1c8)]();}[a75_0x8a0057(0x1eb)](_0x54a9bf,_0x450b9b,_0x4aeada){const _0x3abc0a=a75_0x8a0057,_0xf3b001=this['getObjectState'](_0x54a9bf);_0xf3b001[_0x3abc0a(0x1d1)]+=_0x450b9b,_0xf3b001[_0x3abc0a(0x1bc)]+=_0x4aeada,this[_0x3abc0a(0x1de)][_0x3abc0a(0x1d1)]+=_0x450b9b,this[_0x3abc0a(0x1de)][_0x3abc0a(0x1bc)]+=_0x4aeada,this[_0x3abc0a(0x1c8)]();}[a75_0x8a0057(0x1dd)](_0x33244c){const _0x59ac49=a75_0x8a0057;var _0x48b8a6;const _0x351817=(_0x48b8a6=this[_0x59ac49(0x1de)][_0x59ac49(0x1be)])===null||_0x48b8a6===void 0x0?void 0x0:_0x48b8a6['find'](_0x3477cf=>_0x3477cf[_0x59ac49(0x1a9)]===_0x33244c);if(!_0x351817)throw new Error('Cannot\x20find\x20object\x20\x27'+_0x33244c+'\x27\x20in\x20statistic');return _0x351817;}async[a75_0x8a0057(0x1d4)](){const _0x4bbc96=a75_0x8a0057;if(!await utils_1[_0x4bbc96(0x1ea)][_0x4bbc96(0x1a7)](this['filePath']))return this[_0x4bbc96(0x1a8)]();const _0x4cecaf=await(0x0,promises_1[_0x4bbc96(0x1b7)])(job_detail_1['jobStorePath']+'/'+job_1[_0x4bbc96(0x1d2)],{'encoding':_0x4bbc96(0x1b2)});return JSON[_0x4bbc96(0x1d6)](_0x4cecaf);}['initJobState'](){const _0x11bb9c=a75_0x8a0057;return{'id':this[_0x11bb9c(0x1b3)],'status':logger_enums_1[_0x11bb9c(0x1e3)][_0x11bb9c(0x1e0)],'processed':[],'createdDate':new Date()[_0x11bb9c(0x1c5)](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x2ab7c9){const _0x1a2c30=a75_0x8a0057;return _0x2ab7c9[_0x1a2c30(0x1bf)](_0x3a208d=>({'name':_0x3a208d,'status':logger_enums_1[_0x1a2c30(0x1d8)][_0x1a2c30(0x1e0)],'failed':0x0,'successful':0x0}));}[a75_0x8a0057(0x1bd)](){const _0x3acd7d=a75_0x8a0057;return(0x0,promises_1[_0x3acd7d(0x1af)])(this['filePath'],JSON[_0x3acd7d(0x1c9)](this[_0x3acd7d(0x1e5)]));}}exports[a75_0x8a0057(0x1bb)]=LoggerJobState;