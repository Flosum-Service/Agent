const a76_0x4f6929=a76_0x15b3;(function(_0x6c8574,_0x20129f){const _0x44362f=a76_0x15b3,_0x31e865=_0x6c8574();while(!![]){try{const _0x149dbb=parseInt(_0x44362f(0x1ef))/0x1*(parseInt(_0x44362f(0x1fa))/0x2)+-parseInt(_0x44362f(0x1e2))/0x3*(-parseInt(_0x44362f(0x202))/0x4)+-parseInt(_0x44362f(0x201))/0x5*(parseInt(_0x44362f(0x211))/0x6)+-parseInt(_0x44362f(0x213))/0x7+-parseInt(_0x44362f(0x20a))/0x8*(parseInt(_0x44362f(0x1e9))/0x9)+parseInt(_0x44362f(0x217))/0xa+parseInt(_0x44362f(0x21a))/0xb;if(_0x149dbb===_0x20129f)break;else _0x31e865['push'](_0x31e865['shift']());}catch(_0x2e87ff){_0x31e865['push'](_0x31e865['shift']());}}}(a76_0x5e2a,0xe4500));const a76_0x6f067c=(function(){let _0x3c8554=!![];return function(_0x3579d7,_0x2431cd){const _0x2d45c7=_0x3c8554?function(){const _0x54fd79=a76_0x15b3;if(_0x2431cd){const _0x554938=_0x2431cd[_0x54fd79(0x1f9)](_0x3579d7,arguments);return _0x2431cd=null,_0x554938;}}:function(){};return _0x3c8554=![],_0x2d45c7;};}()),a76_0x21fdb1=a76_0x6f067c(this,function(){const _0x19dd15=a76_0x15b3;return a76_0x21fdb1[_0x19dd15(0x20f)]()[_0x19dd15(0x1f6)](_0x19dd15(0x20b))[_0x19dd15(0x20f)]()[_0x19dd15(0x215)](a76_0x21fdb1)[_0x19dd15(0x1f6)](_0x19dd15(0x20b));});a76_0x21fdb1();'use strict';var __importDefault=this&&this['__importDefault']||function(_0xb45b2){const _0x51f912=a76_0x15b3;return _0xb45b2&&_0xb45b2[_0x51f912(0x20d)]?_0xb45b2:{'default':_0xb45b2};};function a76_0x5e2a(){const _0x359e5f=['JOB_LOG_STATE_FILENAME','18269150wDSFVL','ObjectStatus','jobState','504988juWQiG','setObjectStatus','name','completedDate','status','map','_isLoggerInit','default','63579YdvGTv','FsUtils','filePath','start','BaseLogger','jobStorePath','COMPLETED','603eqDmuw','_jobState','write','FAILED','updateObjectProcess','JobStatus','179DLqCiO','LoggerJobState','successful','updateLoggerState','setJobError','stringify','setJobStatus','search','../../../../../constants/job','isExistsPath','apply','7154quLZsY','path','../../enums/logger.enums','includes','_jobPath','Cannot\x20find\x20object\x20\x27','../../job-detail','10UeHeVM','92xZLdOS','join','\x27\x20in\x20statistic','_jobId','QUEUED','getJobState','getObjectState','failed','133752UsqpYF','(((.+)+)+)+$','writeFile','__esModule','processed','toString','isLoggerInit','129294IxbBuA','error','6314742DpLcdE','readFile','constructor'];a76_0x5e2a=function(){return _0x359e5f;};return a76_0x5e2a();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a76_0x4f6929(0x1f0)]=void 0x0;const path_1=__importDefault(require(a76_0x4f6929(0x1fb))),logger_enums_1=require(a76_0x4f6929(0x1fc)),base_logger_1=require('./base-logger'),promises_1=require('fs/promises'),job_detail_1=require(a76_0x4f6929(0x200)),utils_1=require('@flosum/utils'),job_1=require(a76_0x4f6929(0x1f7));function a76_0x15b3(_0x43132a,_0x494fde){const _0x41fc5=a76_0x5e2a();return a76_0x15b3=function(_0x21fdb1,_0x6f067c){_0x21fdb1=_0x21fdb1-0x1e1;let _0x5e2a2f=_0x41fc5[_0x21fdb1];return _0x5e2a2f;},a76_0x15b3(_0x43132a,_0x494fde);}class LoggerJobState extends base_logger_1[a76_0x4f6929(0x1e6)]{constructor(){const _0x862ad1=a76_0x4f6929;super(...arguments),this[_0x862ad1(0x220)]=![];}get[a76_0x4f6929(0x210)](){const _0x1ebc15=a76_0x4f6929;return this[_0x1ebc15(0x220)];}set[a76_0x4f6929(0x210)](_0x276b17){this['_isLoggerInit']=_0x276b17;}get[a76_0x4f6929(0x219)](){const _0x121e21=a76_0x4f6929;if(!this[_0x121e21(0x210)])throw new Error('Logger\x20Job\x20State\x20wasn\x27t\x20init');return this[_0x121e21(0x1ea)];}get[a76_0x4f6929(0x1e4)](){const _0x49927c=a76_0x4f6929;return path_1[_0x49927c(0x1e1)][_0x49927c(0x203)](this[_0x49927c(0x1fe)],job_1[_0x49927c(0x216)]);}async['init'](_0x430d78){const _0xf67e69=a76_0x4f6929;return this[_0xf67e69(0x1ea)]=await this[_0xf67e69(0x207)](),this[_0xf67e69(0x1ea)][_0xf67e69(0x20e)]=this['initObjectStatistics'](_0x430d78),await this[_0xf67e69(0x1eb)](),await this[_0xf67e69(0x1e5)](),this[_0xf67e69(0x210)]=!![],this;}[a76_0x4f6929(0x21b)](_0x3a86c0,_0x5977be){const _0x2bd64e=a76_0x4f6929;this[_0x2bd64e(0x208)](_0x3a86c0)[_0x2bd64e(0x21e)]=_0x5977be,this[_0x2bd64e(0x1f2)]();}[a76_0x4f6929(0x1f5)](_0x4d1364){const _0xd6b39=a76_0x4f6929;this[_0xd6b39(0x219)][_0xd6b39(0x21e)]=_0x4d1364,[logger_enums_1[_0xd6b39(0x1ee)][_0xd6b39(0x1ec)],logger_enums_1[_0xd6b39(0x1ee)][_0xd6b39(0x1e8)]][_0xd6b39(0x1fd)](_0x4d1364)&&(this[_0xd6b39(0x219)][_0xd6b39(0x21d)]=new Date()['getTime']()),this[_0xd6b39(0x1f2)]();}[a76_0x4f6929(0x1f3)](_0x13f4e0){const _0x4e2409=a76_0x4f6929;this[_0x4e2409(0x219)][_0x4e2409(0x212)]=_0x13f4e0,this[_0x4e2409(0x1f2)]();}[a76_0x4f6929(0x1ed)](_0x536a98,_0x11d819,_0x2ce260){const _0x90e84f=a76_0x4f6929,_0x2a6a21=this[_0x90e84f(0x208)](_0x536a98);_0x2a6a21[_0x90e84f(0x1f1)]+=_0x11d819,_0x2a6a21[_0x90e84f(0x209)]+=_0x2ce260,this[_0x90e84f(0x219)]['successful']+=_0x11d819,this[_0x90e84f(0x219)][_0x90e84f(0x209)]+=_0x2ce260,this[_0x90e84f(0x1f2)]();}[a76_0x4f6929(0x208)](_0x5aa5e3){const _0x1b9335=a76_0x4f6929;var _0x288444;const _0x50c781=(_0x288444=this['jobState'][_0x1b9335(0x20e)])===null||_0x288444===void 0x0?void 0x0:_0x288444['find'](_0x5b4e0c=>_0x5b4e0c[_0x1b9335(0x21c)]===_0x5aa5e3);if(!_0x50c781)throw new Error(_0x1b9335(0x1ff)+_0x5aa5e3+_0x1b9335(0x204));return _0x50c781;}async[a76_0x4f6929(0x207)](){const _0x527b0a=a76_0x4f6929;if(!await utils_1[_0x527b0a(0x1e3)][_0x527b0a(0x1f8)](this[_0x527b0a(0x1e4)]))return this['initJobState']();const _0x83c4dc=await(0x0,promises_1[_0x527b0a(0x214)])(job_detail_1[_0x527b0a(0x1e7)]+'/'+job_1[_0x527b0a(0x216)],{'encoding':'utf-8'});return JSON['parse'](_0x83c4dc);}['initJobState'](){const _0x4b10e5=a76_0x4f6929;return{'id':this[_0x4b10e5(0x205)],'status':logger_enums_1[_0x4b10e5(0x1ee)][_0x4b10e5(0x206)],'processed':[],'createdDate':new Date()['getTime'](),'successful':0x0,'failed':0x0};}['initObjectStatistics'](_0x4d9333){const _0x1d3912=a76_0x4f6929;return _0x4d9333[_0x1d3912(0x21f)](_0x30ef7f=>({'name':_0x30ef7f,'status':logger_enums_1[_0x1d3912(0x218)][_0x1d3912(0x206)],'failed':0x0,'successful':0x0}));}['write'](){const _0x1df460=a76_0x4f6929;return(0x0,promises_1[_0x1df460(0x20c)])(this[_0x1df460(0x1e4)],JSON[_0x1df460(0x1f4)](this[_0x1df460(0x1ea)]));}}exports['LoggerJobState']=LoggerJobState;