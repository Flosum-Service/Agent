function a81_0x570c(){const _0x34e14e=['join','MaskingService','../../../configs/path','isExistsPath','writeFile','JOB_LOG_STATE_NAME','makeDir','__esModule','toString','NotFoundError','../../../core/errors/not-found.error','__createBinding','2117924ygnTHK','createMaskingJob','../job/classes/logger/logger-job-state','readFile','JOB_LOG_STATE_FILENAME','stringify','maskingFolderPath','parse','status','utf-8','setJobStatus','JobStatus','__importDefault','default','@flosum/utils','get','init','create','646030lGmbxy','1518503fHfJve','625384wheMfG','call','generateJobId','logErrorStartJob','420noGBnf','getJobState','24793592QWbcJl','defineProperty','__importStar','kill','getJobs','../../shared/utils/job.utils','(((.+)+)+)+$','../../shared/utils/fs.utils','apply','Job\x20Id\x20not\x20found.','../../../constants/job','1475187KfKTPG','dataPath','../job/enums/logger.enums','DATA_MASKING_FOLDER_NAME','getJobDetails','MANIFEST_FILENAME','__setModuleDefault','search','getLog','LoggerJobState','setJobError','JOB_LOG_DETAILS_NAME','configurable','completedDate','push','failed','successful','FsUtils','FAILED','1405goChFb','message','hasOwnProperty','constructor'];a81_0x570c=function(){return _0x34e14e;};return a81_0x570c();}const a81_0x285d76=a81_0x3f2a;(function(_0x68b68d,_0x7b7cec){const _0x59c79d=a81_0x3f2a,_0x13107b=_0x68b68d();while(!![]){try{const _0x2d1774=-parseInt(_0x59c79d(0x1ce))/0x1+parseInt(_0x59c79d(0x1cf))/0x2+-parseInt(_0x59c79d(0x1e0))/0x3+-parseInt(_0x59c79d(0x203))/0x4+parseInt(_0x59c79d(0x1f3))/0x5*(-parseInt(_0x59c79d(0x1d3))/0x6)+-parseInt(_0x59c79d(0x1cd))/0x7+parseInt(_0x59c79d(0x1d5))/0x8;if(_0x2d1774===_0x7b7cec)break;else _0x13107b['push'](_0x13107b['shift']());}catch(_0x1decde){_0x13107b['push'](_0x13107b['shift']());}}}(a81_0x570c,0xb999a));const a81_0x2b59d3=(function(){let _0x26ecab=!![];return function(_0x96b039,_0x120438){const _0x5104aa=_0x26ecab?function(){const _0xf73942=a81_0x3f2a;if(_0x120438){const _0x17de6f=_0x120438[_0xf73942(0x1dd)](_0x96b039,arguments);return _0x120438=null,_0x17de6f;}}:function(){};return _0x26ecab=![],_0x5104aa;};}()),a81_0x498dd0=a81_0x2b59d3(this,function(){const _0x5bf716=a81_0x3f2a;return a81_0x498dd0[_0x5bf716(0x1ff)]()[_0x5bf716(0x1e7)](_0x5bf716(0x1db))['toString']()[_0x5bf716(0x1f6)](a81_0x498dd0)[_0x5bf716(0x1e7)](_0x5bf716(0x1db));});a81_0x498dd0();'use strict';function a81_0x3f2a(_0x2eb14d,_0x5fed79){const _0x1596a7=a81_0x570c();return a81_0x3f2a=function(_0x498dd0,_0x2b59d3){_0x498dd0=_0x498dd0-0x1bc;let _0x570cc0=_0x1596a7[_0x498dd0];return _0x570cc0;},a81_0x3f2a(_0x2eb14d,_0x5fed79);}var __createBinding=this&&this[a81_0x285d76(0x202)]||(Object[a81_0x285d76(0x1cc)]?function(_0x334eae,_0x232183,_0x4e63f3,_0x1b22f3){const _0x35aa75=a81_0x285d76;if(_0x1b22f3===undefined)_0x1b22f3=_0x4e63f3;var _0x2f668e=Object['getOwnPropertyDescriptor'](_0x232183,_0x4e63f3);(!_0x2f668e||(_0x35aa75(0x1ca)in _0x2f668e?!_0x232183[_0x35aa75(0x1fe)]:_0x2f668e['writable']||_0x2f668e[_0x35aa75(0x1ec)]))&&(_0x2f668e={'enumerable':!![],'get':function(){return _0x232183[_0x4e63f3];}}),Object[_0x35aa75(0x1d6)](_0x334eae,_0x1b22f3,_0x2f668e);}:function(_0x5c2f4a,_0x2fdde0,_0x587a64,_0x1ac322){if(_0x1ac322===undefined)_0x1ac322=_0x587a64;_0x5c2f4a[_0x1ac322]=_0x2fdde0[_0x587a64];}),__setModuleDefault=this&&this[a81_0x285d76(0x1e6)]||(Object[a81_0x285d76(0x1cc)]?function(_0x5aa9c8,_0x5e914f){const _0x2752bf=a81_0x285d76;Object[_0x2752bf(0x1d6)](_0x5aa9c8,'default',{'enumerable':!![],'value':_0x5e914f});}:function(_0x4e8f74,_0x4e3ff2){_0x4e8f74['default']=_0x4e3ff2;}),__importStar=this&&this[a81_0x285d76(0x1d7)]||function(_0x305431){const _0x469757=a81_0x285d76;if(_0x305431&&_0x305431['__esModule'])return _0x305431;var _0x2c010f={};if(_0x305431!=null){for(var _0x1d5fbb in _0x305431)if(_0x1d5fbb!==_0x469757(0x1c8)&&Object['prototype'][_0x469757(0x1f5)][_0x469757(0x1d0)](_0x305431,_0x1d5fbb))__createBinding(_0x2c010f,_0x305431,_0x1d5fbb);}return __setModuleDefault(_0x2c010f,_0x305431),_0x2c010f;},__importDefault=this&&this[a81_0x285d76(0x1c7)]||function(_0x230dd3){return _0x230dd3&&_0x230dd3['__esModule']?_0x230dd3:{'default':_0x230dd3};};Object[a81_0x285d76(0x1d6)](exports,'__esModule',{'value':!![]}),exports[a81_0x285d76(0x1f8)]=void 0x0;const path_1=__importStar(require('path')),fs_utils_1=require(a81_0x285d76(0x1dc)),promises_1=require('fs/promises'),logger_job_state_1=require(a81_0x285d76(0x1bd)),logger_enums_1=require(a81_0x285d76(0x1e2)),sync_1=require('csv-parse/sync'),utils_1=require(a81_0x285d76(0x1c9)),not_found_error_1=require(a81_0x285d76(0x201)),job_1=require(a81_0x285d76(0x1df)),job_utils_1=__importDefault(require(a81_0x285d76(0x1da))),constants_1=require('../constants'),path_2=require(a81_0x285d76(0x1f9));class MaskingService{static async[a81_0x285d76(0x1bc)](_0x1f7bdc){const _0x482633=a81_0x285d76,_0x209da4=job_utils_1[_0x482633(0x1c8)][_0x482633(0x1d1)](),_0x1c0bcc=(0x0,path_1['join'])(MaskingService[_0x482633(0x1c1)],_0x209da4);await(0x0,fs_utils_1[_0x482633(0x1fd)])(_0x1c0bcc),await(0x0,promises_1[_0x482633(0x1fb)])(_0x1c0bcc+'/'+job_1[_0x482633(0x1e5)],JSON[_0x482633(0x1c0)]({'details':_0x1f7bdc}));const _0x205995=await new logger_job_state_1[(_0x482633(0x1e9))](_0x1c0bcc,_0x209da4)[_0x482633(0x1cb)]([]);await _0x205995[_0x482633(0x1d8)]();const _0x229518=path_1['default'][_0x482633(0x1f7)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x482633(0x1c8)]['runJob'](_0x229518,{'jobStorePath':_0x1c0bcc,'jobId':_0x209da4})['catch'](_0xdfa413=>this['logErrorStartJob'](_0x1c0bcc,_0x209da4,_0xdfa413)),{'jobId':_0x209da4};}static async[a81_0x285d76(0x1d9)](_0x46fbdf,_0x2a4bbb){const _0xd9b365=a81_0x285d76,_0x4c0bcb=await job_utils_1[_0xd9b365(0x1c8)]['getJobsIds'](MaskingService[_0xd9b365(0x1c1)]),_0x519020=await job_utils_1[_0xd9b365(0x1c8)]['sortJobsIds'](MaskingService[_0xd9b365(0x1c1)],_0x4c0bcb),_0x3cf8f1=_0x519020['slice'](_0x2a4bbb,_0x2a4bbb+_0x46fbdf),_0x15205d=[];for(const _0x662679 of _0x3cf8f1){const _0x2f1e7f=await this['getJobState'](_0x662679,![]);_0x15205d[_0xd9b365(0x1ee)](_0x2f1e7f);}return _0x15205d;}static async[a81_0x285d76(0x1d4)](_0x3d860b,_0x4025a9){const _0x50236b=a81_0x285d76,_0x3e64f1=await this[_0x50236b(0x1e8)](_0x3d860b,job_1[_0x50236b(0x1bf)],constants_1[_0x50236b(0x1fc)]),_0x122f09=JSON[_0x50236b(0x1c2)](_0x3e64f1),_0x34d20b={'id':_0x122f09['id'],'status':_0x122f09[_0x50236b(0x1c3)],'createdDate':_0x122f09['createdDate'],'completedDate':_0x122f09[_0x50236b(0x1ed)],'successful':_0x122f09[_0x50236b(0x1f0)],'failed':_0x122f09[_0x50236b(0x1ef)]};return _0x4025a9?_0x122f09:_0x34d20b;}static async[a81_0x285d76(0x1e4)](_0x282cad){const _0x1ca1b0=a81_0x285d76,_0xdeeb0f=await this['getLog'](_0x282cad,job_1['JOB_LOG_DETAILS_FILENAME'],constants_1[_0x1ca1b0(0x1eb)]);return(0x0,sync_1[_0x1ca1b0(0x1c2)])(_0xdeeb0f,{'columns':!![]});}static async['getLog'](_0x2ec865,_0x73e931,_0x2edf02){const _0x234c98=a81_0x285d76,_0x2c09a2=(0x0,path_1[_0x234c98(0x1f7)])(MaskingService['maskingFolderPath'],_0x2ec865),_0x17ba91=(0x0,path_1[_0x234c98(0x1f7)])(_0x2c09a2,_0x73e931);if(!await utils_1['FsUtils']['isExistsPath'](_0x2c09a2))throw new not_found_error_1[(_0x234c98(0x200))](_0x234c98(0x1de));if(!await utils_1[_0x234c98(0x1f1)][_0x234c98(0x1fa)](_0x17ba91))throw new not_found_error_1['NotFoundError'](_0x2edf02+'\x20not\x20found.');return(0x0,promises_1[_0x234c98(0x1be)])(_0x17ba91,{'encoding':_0x234c98(0x1c4)});}static async[a81_0x285d76(0x1d2)](_0x2af5a7,_0x398035,_0x61e3ce){const _0x3afb7a=a81_0x285d76,_0x5427d6=await new logger_job_state_1[(_0x3afb7a(0x1e9))](_0x2af5a7,_0x398035)['init']([]);_0x5427d6[_0x3afb7a(0x1c5)](logger_enums_1[_0x3afb7a(0x1c6)][_0x3afb7a(0x1f2)]),_0x5427d6[_0x3afb7a(0x1ea)](_0x61e3ce[_0x3afb7a(0x1f4)]),await _0x5427d6['kill']();}}exports[a81_0x285d76(0x1f8)]=MaskingService,MaskingService[a81_0x285d76(0x1c1)]=path_1[a81_0x285d76(0x1c8)][a81_0x285d76(0x1f7)](path_2[a81_0x285d76(0x1e1)],constants_1[a81_0x285d76(0x1e3)]);