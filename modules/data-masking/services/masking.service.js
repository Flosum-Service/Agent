const a98_0x3b7f1b=a98_0x4d64;(function(_0x208ca7,_0x4f55f3){const _0x46f022=a98_0x4d64,_0x3eb1cf=_0x208ca7();while(!![]){try{const _0x52a1a9=-parseInt(_0x46f022(0xaf))/0x1+parseInt(_0x46f022(0xaa))/0x2+parseInt(_0x46f022(0xa1))/0x3+-parseInt(_0x46f022(0x9f))/0x4*(-parseInt(_0x46f022(0xb1))/0x5)+-parseInt(_0x46f022(0xcb))/0x6*(parseInt(_0x46f022(0xda))/0x7)+-parseInt(_0x46f022(0xd5))/0x8*(-parseInt(_0x46f022(0xa5))/0x9)+-parseInt(_0x46f022(0xae))/0xa;if(_0x52a1a9===_0x4f55f3)break;else _0x3eb1cf['push'](_0x3eb1cf['shift']());}catch(_0x2a520a){_0x3eb1cf['push'](_0x3eb1cf['shift']());}}}(a98_0x42f2,0x65ca7));const a98_0x581e83=(function(){let _0x408dc6=!![];return function(_0x53fa07,_0x30b347){const _0x4764be=_0x408dc6?function(){const _0x3008f5=a98_0x4d64;if(_0x30b347){const _0x39ae86=_0x30b347[_0x3008f5(0xd6)](_0x53fa07,arguments);return _0x30b347=null,_0x39ae86;}}:function(){};return _0x408dc6=![],_0x4764be;};}()),a98_0x18c337=a98_0x581e83(this,function(){const _0x4dbdfa=a98_0x4d64;return a98_0x18c337['toString']()[_0x4dbdfa(0xca)](_0x4dbdfa(0xb9))['toString']()[_0x4dbdfa(0x9c)](a98_0x18c337)[_0x4dbdfa(0xca)](_0x4dbdfa(0xb9));});a98_0x18c337();'use strict';var __createBinding=this&&this[a98_0x3b7f1b(0xb4)]||(Object[a98_0x3b7f1b(0xa8)]?function(_0x251986,_0x1d3ed0,_0x5a0795,_0x4e3248){const _0x2a9635=a98_0x3b7f1b;if(_0x4e3248===undefined)_0x4e3248=_0x5a0795;var _0x17d297=Object[_0x2a9635(0x9b)](_0x1d3ed0,_0x5a0795);(!_0x17d297||(_0x2a9635(0x92)in _0x17d297?!_0x1d3ed0[_0x2a9635(0xb7)]:_0x17d297['writable']||_0x17d297[_0x2a9635(0xcc)]))&&(_0x17d297={'enumerable':!![],'get':function(){return _0x1d3ed0[_0x5a0795];}}),Object['defineProperty'](_0x251986,_0x4e3248,_0x17d297);}:function(_0x1941d6,_0x106539,_0x23e6c9,_0x35d245){if(_0x35d245===undefined)_0x35d245=_0x23e6c9;_0x1941d6[_0x35d245]=_0x106539[_0x23e6c9];}),__setModuleDefault=this&&this[a98_0x3b7f1b(0xc5)]||(Object['create']?function(_0x5ad7aa,_0x44f211){const _0x385005=a98_0x3b7f1b;Object[_0x385005(0xcf)](_0x5ad7aa,_0x385005(0xce),{'enumerable':!![],'value':_0x44f211});}:function(_0x1f8bba,_0x4286ed){const _0x42abc7=a98_0x3b7f1b;_0x1f8bba[_0x42abc7(0xce)]=_0x4286ed;}),__importStar=this&&this[a98_0x3b7f1b(0xd9)]||function(_0x47eb87){const _0x1ed944=a98_0x3b7f1b;if(_0x47eb87&&_0x47eb87[_0x1ed944(0xb7)])return _0x47eb87;var _0x23e3e3={};if(_0x47eb87!=null){for(var _0x1f3b75 in _0x47eb87)if(_0x1f3b75!==_0x1ed944(0xce)&&Object[_0x1ed944(0xc7)][_0x1ed944(0xbb)][_0x1ed944(0xd7)](_0x47eb87,_0x1f3b75))__createBinding(_0x23e3e3,_0x47eb87,_0x1f3b75);}return __setModuleDefault(_0x23e3e3,_0x47eb87),_0x23e3e3;},__importDefault=this&&this[a98_0x3b7f1b(0xd1)]||function(_0x303e6e){return _0x303e6e&&_0x303e6e['__esModule']?_0x303e6e:{'default':_0x303e6e};};Object[a98_0x3b7f1b(0xcf)](exports,a98_0x3b7f1b(0xb7),{'value':!![]}),exports[a98_0x3b7f1b(0xa2)]=void 0x0;function a98_0x4d64(_0x3074b6,_0x43fbef){const _0x24f7bf=a98_0x42f2();return a98_0x4d64=function(_0x18c337,_0x581e83){_0x18c337=_0x18c337-0x8d;let _0x42f230=_0x24f7bf[_0x18c337];return _0x42f230;},a98_0x4d64(_0x3074b6,_0x43fbef);}const path_1=__importStar(require(a98_0x3b7f1b(0x95))),fs_utils_1=require(a98_0x3b7f1b(0xd8)),promises_1=require(a98_0x3b7f1b(0xb2)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a98_0x3b7f1b(0xc4)),sync_1=require(a98_0x3b7f1b(0x96)),utils_1=require(a98_0x3b7f1b(0xbe)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a98_0x3b7f1b(0x8e))),constants_1=require(a98_0x3b7f1b(0x97)),path_2=require(a98_0x3b7f1b(0x93));class MaskingService{static async[a98_0x3b7f1b(0xd3)](_0x2365ca){const _0x4ebfe2=a98_0x3b7f1b,_0x55e1f1=job_utils_1[_0x4ebfe2(0xce)][_0x4ebfe2(0xc9)](),_0x91b93e=(0x0,path_1[_0x4ebfe2(0x99)])(MaskingService['maskingFolderPath'],_0x55e1f1);await(0x0,fs_utils_1[_0x4ebfe2(0xa4)])(_0x91b93e),await(0x0,promises_1[_0x4ebfe2(0xba)])(_0x91b93e+'/'+job_1[_0x4ebfe2(0xa0)],JSON[_0x4ebfe2(0xcd)]({'details':_0x2365ca}));const _0x597531=await new logger_job_state_1['LoggerJobState'](_0x91b93e,_0x55e1f1)['init']([]);await _0x597531[_0x4ebfe2(0xb3)]();const _0x1aa9e5=path_1['default'][_0x4ebfe2(0x99)](__dirname,job_1[_0x4ebfe2(0xad)]);return job_utils_1['default'][_0x4ebfe2(0x91)](_0x1aa9e5,{'jobStorePath':_0x91b93e,'jobId':_0x55e1f1})[_0x4ebfe2(0xac)](_0x3b492c=>this[_0x4ebfe2(0xc8)](_0x91b93e,_0x55e1f1,_0x3b492c)),{'jobId':_0x55e1f1};}static async[a98_0x3b7f1b(0xbf)](_0x508995,_0x29da08){const _0x5c8cd9=a98_0x3b7f1b,_0x557fac=await job_utils_1[_0x5c8cd9(0xce)][_0x5c8cd9(0xc2)](MaskingService[_0x5c8cd9(0xa3)]),_0x1c4b73=await job_utils_1['default'][_0x5c8cd9(0x9a)](MaskingService[_0x5c8cd9(0xa3)],_0x557fac),_0x278ecf=_0x1c4b73[_0x5c8cd9(0xc1)](_0x29da08,_0x29da08+_0x508995),_0x254220=[];for(const _0x4f12da of _0x278ecf){const _0x4275e9=await this[_0x5c8cd9(0xc6)](_0x4f12da,![]);_0x254220['push'](_0x4275e9);}return _0x254220;}static async[a98_0x3b7f1b(0xc6)](_0x5245d8,_0x400be4){const _0xa9474b=a98_0x3b7f1b,_0x59af3e=await this['getLog'](_0x5245d8,job_1[_0xa9474b(0xb6)],constants_1['JOB_LOG_STATE_NAME']),_0x43e576=JSON[_0xa9474b(0xa6)](_0x59af3e),_0x478cca={'id':_0x43e576['id'],'status':_0x43e576[_0xa9474b(0xab)],'createdDate':_0x43e576[_0xa9474b(0xb0)],'completedDate':_0x43e576[_0xa9474b(0xbc)],'successful':_0x43e576[_0xa9474b(0xa9)],'failed':_0x43e576[_0xa9474b(0xd4)]};return _0x400be4?_0x43e576:_0x478cca;}static async['getJobDetails'](_0x4d35a0){const _0x489457=a98_0x3b7f1b,_0x3e1735=await this[_0x489457(0xbd)](_0x4d35a0,job_1[_0x489457(0x9d)],constants_1[_0x489457(0x9e)]);return(0x0,sync_1[_0x489457(0xa6)])(_0x3e1735,{'columns':!![]});}static async[a98_0x3b7f1b(0xbd)](_0x3b1be8,_0x3f3f0f,_0x2a0590){const _0x39073a=a98_0x3b7f1b,_0x53a7c4=(0x0,path_1[_0x39073a(0x99)])(MaskingService[_0x39073a(0xa3)],_0x3b1be8),_0x313214=(0x0,path_1[_0x39073a(0x99)])(_0x53a7c4,_0x3f3f0f);if(!await utils_1['FsUtils']['isExistsPath'](_0x53a7c4))throw new not_found_error_1[(_0x39073a(0x8d))]('Job\x20Id\x20not\x20found.');if(!await utils_1['FsUtils'][_0x39073a(0x94)](_0x313214))throw new not_found_error_1['NotFoundError'](_0x2a0590+_0x39073a(0xa7));return(0x0,promises_1[_0x39073a(0xb8)])(_0x313214,{'encoding':_0x39073a(0x8f)});}static async[a98_0x3b7f1b(0xc8)](_0x233c4f,_0x2d6e15,_0x4c6e59){const _0x12cc90=a98_0x3b7f1b,_0x52dfd0=await new logger_job_state_1[(_0x12cc90(0xd0))](_0x233c4f,_0x2d6e15)[_0x12cc90(0x98)]([]);_0x52dfd0[_0x12cc90(0xc3)](logger_enums_1[_0x12cc90(0x90)][_0x12cc90(0xb5)]),_0x52dfd0[_0x12cc90(0xc0)](_0x4c6e59[_0x12cc90(0xd2)]),await _0x52dfd0[_0x12cc90(0xb3)]();}}exports[a98_0x3b7f1b(0xa2)]=MaskingService,MaskingService[a98_0x3b7f1b(0xa3)]=path_1[a98_0x3b7f1b(0xce)][a98_0x3b7f1b(0x99)](path_2['dataPath'],constants_1['DATA_MASKING_FOLDER_NAME']);function a98_0x42f2(){const _0x584320=['__importStar','14BdPHZJ','NotFoundError','../../shared/utils/job.utils','utf-8','JobStatus','runJob','get','../../../configs/path','isExistsPath','path','csv-parse/sync','../constants','init','join','sortJobsIds','getOwnPropertyDescriptor','constructor','JOB_LOG_DETAILS_FILENAME','JOB_LOG_DETAILS_NAME','44pgkPSB','MANIFEST_FILENAME','1803546jjVixs','MaskingService','maskingFolderPath','makeDir','170190vPUfhG','parse','\x20not\x20found.','create','successful','1611258pDEFJe','status','catch','JOB_PATH','4998130oTsHbW','686313PvwvlL','createdDate','235830NJlRZj','fs/promises','kill','__createBinding','FAILED','JOB_LOG_STATE_FILENAME','__esModule','readFile','(((.+)+)+)+$','writeFile','hasOwnProperty','completedDate','getLog','@flosum/utils','getJobs','setJobError','slice','getJobsIds','setJobStatus','../job/enums/logger.enums','__setModuleDefault','getJobState','prototype','logErrorStartJob','generateJobId','search','1818678kvphSs','configurable','stringify','default','defineProperty','LoggerJobState','__importDefault','message','createMaskingJob','failed','120xnlccm','apply','call','../../shared/utils/fs.utils'];a98_0x42f2=function(){return _0x584320;};return a98_0x42f2();}