const a81_0x54888d=a81_0x6121;function a81_0x6121(_0x32a41b,_0x3c3eaa){const _0x1e726f=a81_0x92e8();return a81_0x6121=function(_0x2572cb,_0x3b4009){_0x2572cb=_0x2572cb-0x114;let _0x92e860=_0x1e726f[_0x2572cb];return _0x92e860;},a81_0x6121(_0x32a41b,_0x3c3eaa);}(function(_0x2bdd0f,_0x2475a8){const _0x116129=a81_0x6121,_0x155f50=_0x2bdd0f();while(!![]){try{const _0x593539=-parseInt(_0x116129(0x139))/0x1+parseInt(_0x116129(0x11e))/0x2+parseInt(_0x116129(0x135))/0x3+-parseInt(_0x116129(0x121))/0x4+parseInt(_0x116129(0x133))/0x5*(parseInt(_0x116129(0x14f))/0x6)+parseInt(_0x116129(0x128))/0x7+parseInt(_0x116129(0x148))/0x8*(-parseInt(_0x116129(0x14b))/0x9);if(_0x593539===_0x2475a8)break;else _0x155f50['push'](_0x155f50['shift']());}catch(_0x174e9d){_0x155f50['push'](_0x155f50['shift']());}}}(a81_0x92e8,0x5935f));const a81_0x3b4009=(function(){let _0x571a65=!![];return function(_0x472ac9,_0x190904){const _0x5ad96a=_0x571a65?function(){const _0x5f4e87=a81_0x6121;if(_0x190904){const _0x3cdb15=_0x190904[_0x5f4e87(0x155)](_0x472ac9,arguments);return _0x190904=null,_0x3cdb15;}}:function(){};return _0x571a65=![],_0x5ad96a;};}()),a81_0x2572cb=a81_0x3b4009(this,function(){const _0x5e22cf=a81_0x6121;return a81_0x2572cb['toString']()[_0x5e22cf(0x141)](_0x5e22cf(0x140))[_0x5e22cf(0x15d)]()['constructor'](a81_0x2572cb)[_0x5e22cf(0x141)](_0x5e22cf(0x140));});a81_0x2572cb();'use strict';var __createBinding=this&&this[a81_0x54888d(0x120)]||(Object['create']?function(_0x5d7219,_0x286772,_0x41a98a,_0x9b0b21){const _0x18472e=a81_0x54888d;if(_0x9b0b21===undefined)_0x9b0b21=_0x41a98a;var _0x37dfe5=Object['getOwnPropertyDescriptor'](_0x286772,_0x41a98a);(!_0x37dfe5||(_0x18472e(0x13d)in _0x37dfe5?!_0x286772[_0x18472e(0x14c)]:_0x37dfe5[_0x18472e(0x126)]||_0x37dfe5['configurable']))&&(_0x37dfe5={'enumerable':!![],'get':function(){return _0x286772[_0x41a98a];}}),Object[_0x18472e(0x124)](_0x5d7219,_0x9b0b21,_0x37dfe5);}:function(_0xa7a6ef,_0x304b04,_0x34ef56,_0x3e0ad4){if(_0x3e0ad4===undefined)_0x3e0ad4=_0x34ef56;_0xa7a6ef[_0x3e0ad4]=_0x304b04[_0x34ef56];}),__setModuleDefault=this&&this[a81_0x54888d(0x156)]||(Object[a81_0x54888d(0x158)]?function(_0x472099,_0x3c2004){const _0x5635b0=a81_0x54888d;Object[_0x5635b0(0x124)](_0x472099,_0x5635b0(0x137),{'enumerable':!![],'value':_0x3c2004});}:function(_0x5e5955,_0x149cfa){_0x5e5955['default']=_0x149cfa;}),__importStar=this&&this[a81_0x54888d(0x119)]||function(_0x8370eb){const _0x725fe2=a81_0x54888d;if(_0x8370eb&&_0x8370eb[_0x725fe2(0x14c)])return _0x8370eb;var _0x224055={};if(_0x8370eb!=null){for(var _0x158ec8 in _0x8370eb)if(_0x158ec8!=='default'&&Object[_0x725fe2(0x12f)][_0x725fe2(0x11c)][_0x725fe2(0x12c)](_0x8370eb,_0x158ec8))__createBinding(_0x224055,_0x8370eb,_0x158ec8);}return __setModuleDefault(_0x224055,_0x8370eb),_0x224055;},__importDefault=this&&this[a81_0x54888d(0x14a)]||function(_0x56f43b){const _0x3a1443=a81_0x54888d;return _0x56f43b&&_0x56f43b[_0x3a1443(0x14c)]?_0x56f43b:{'default':_0x56f43b};};Object['defineProperty'](exports,a81_0x54888d(0x14c),{'value':!![]}),exports[a81_0x54888d(0x153)]=void 0x0;const path_1=__importStar(require(a81_0x54888d(0x154))),fs_utils_1=require(a81_0x54888d(0x143)),promises_1=require(a81_0x54888d(0x11a)),logger_job_state_1=require(a81_0x54888d(0x13a)),logger_enums_1=require('../job/enums/logger.enums'),sync_1=require(a81_0x54888d(0x127)),utils_1=require(a81_0x54888d(0x116)),not_found_error_1=require(a81_0x54888d(0x136)),job_1=require(a81_0x54888d(0x15a)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a81_0x54888d(0x13e)),path_2=require(a81_0x54888d(0x11b));class MaskingService{static async[a81_0x54888d(0x144)](_0x55a405){const _0xf9d912=a81_0x54888d,_0x342f59=job_utils_1[_0xf9d912(0x137)][_0xf9d912(0x14e)](),_0xe58726=(0x0,path_1[_0xf9d912(0x157)])(MaskingService[_0xf9d912(0x142)],_0x342f59);await(0x0,fs_utils_1[_0xf9d912(0x159)])(_0xe58726),await(0x0,promises_1[_0xf9d912(0x138)])(_0xe58726+'/'+job_1[_0xf9d912(0x118)],JSON[_0xf9d912(0x147)]({'details':_0x55a405}));const _0x593e56=await new logger_job_state_1[(_0xf9d912(0x15b))](_0xe58726,_0x342f59)[_0xf9d912(0x15c)]([]);await _0x593e56[_0xf9d912(0x13f)]();const _0xc8330f=path_1[_0xf9d912(0x137)][_0xf9d912(0x157)](__dirname,job_1[_0xf9d912(0x12d)]);return job_utils_1[_0xf9d912(0x137)]['runJob'](_0xc8330f,{'jobStorePath':_0xe58726,'jobId':_0x342f59})['catch'](_0x4bfc66=>this[_0xf9d912(0x152)](_0xe58726,_0x342f59,_0x4bfc66)),{'jobId':_0x342f59};}static async[a81_0x54888d(0x145)](_0x50dffd,_0x2b8588){const _0x27eefd=a81_0x54888d,_0x5a0ae7=await job_utils_1[_0x27eefd(0x137)][_0x27eefd(0x131)](MaskingService['maskingFolderPath']),_0x413d8b=await job_utils_1[_0x27eefd(0x137)][_0x27eefd(0x14d)](MaskingService[_0x27eefd(0x142)],_0x5a0ae7),_0x54eb80=_0x413d8b[_0x27eefd(0x146)](_0x2b8588,_0x2b8588+_0x50dffd),_0x1e405a=[];for(const _0x381600 of _0x54eb80){const _0x34e436=await this['getJobState'](_0x381600,![]);_0x1e405a[_0x27eefd(0x117)](_0x34e436);}return _0x1e405a;}static async[a81_0x54888d(0x13b)](_0x3eb8fa,_0x2a1fe2){const _0x234742=a81_0x54888d,_0x1c324d=await this[_0x234742(0x11d)](_0x3eb8fa,job_1[_0x234742(0x130)],constants_1['JOB_LOG_STATE_NAME']),_0x1a10d2=JSON[_0x234742(0x122)](_0x1c324d),_0x58483c={'id':_0x1a10d2['id'],'status':_0x1a10d2[_0x234742(0x125)],'createdDate':_0x1a10d2[_0x234742(0x150)],'completedDate':_0x1a10d2[_0x234742(0x12e)],'successful':_0x1a10d2[_0x234742(0x115)],'failed':_0x1a10d2[_0x234742(0x149)]};return _0x2a1fe2?_0x1a10d2:_0x58483c;}static async['getJobDetails'](_0x2f28f4){const _0x2d7732=a81_0x54888d,_0x59dab6=await this['getLog'](_0x2f28f4,job_1[_0x2d7732(0x12a)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0x2d7732(0x122)])(_0x59dab6,{'columns':!![]});}static async[a81_0x54888d(0x11d)](_0x2c08da,_0xaec934,_0x57d2e6){const _0x46d166=a81_0x54888d,_0x22eafc=(0x0,path_1[_0x46d166(0x157)])(MaskingService[_0x46d166(0x142)],_0x2c08da),_0x4d35c0=(0x0,path_1[_0x46d166(0x157)])(_0x22eafc,_0xaec934);if(!await utils_1['FsUtils']['isExistsPath'](_0x22eafc))throw new not_found_error_1[(_0x46d166(0x12b))](_0x46d166(0x11f));if(!await utils_1['FsUtils'][_0x46d166(0x132)](_0x4d35c0))throw new not_found_error_1[(_0x46d166(0x12b))](_0x57d2e6+'\x20not\x20found.');return(0x0,promises_1[_0x46d166(0x129)])(_0x4d35c0,{'encoding':_0x46d166(0x151)});}static async[a81_0x54888d(0x152)](_0x5d5874,_0x3148d1,_0x3aaffe){const _0x14dd53=a81_0x54888d,_0x1dd886=await new logger_job_state_1[(_0x14dd53(0x15b))](_0x5d5874,_0x3148d1)[_0x14dd53(0x15c)]([]);_0x1dd886['setJobStatus'](logger_enums_1[_0x14dd53(0x114)]['FAILED']),_0x1dd886['setJobError'](_0x3aaffe[_0x14dd53(0x123)]),await _0x1dd886[_0x14dd53(0x13f)]();}}function a81_0x92e8(){const _0x3a7a01=['1257036FoirdC','parse','message','defineProperty','status','writable','csv-parse/sync','3959354WRISCe','readFile','JOB_LOG_DETAILS_FILENAME','NotFoundError','call','JOB_PATH','completedDate','prototype','JOB_LOG_STATE_FILENAME','getJobsIds','isExistsPath','180lyeWNd','DATA_MASKING_FOLDER_NAME','1669776WLpzAr','../../../core/errors/not-found.error','default','writeFile','709383eFCMAk','../job/classes/logger/logger-job-state','getJobState','dataPath','get','../constants','kill','(((.+)+)+)+$','search','maskingFolderPath','../../shared/utils/fs.utils','createMaskingJob','getJobs','slice','stringify','495776LZsABr','failed','__importDefault','72FacYTE','__esModule','sortJobsIds','generateJobId','45756psynYV','createdDate','utf-8','logErrorStartJob','MaskingService','path','apply','__setModuleDefault','join','create','makeDir','../../../constants/job','LoggerJobState','init','toString','JobStatus','successful','@flosum/utils','push','MANIFEST_FILENAME','__importStar','fs/promises','../../../configs/path','hasOwnProperty','getLog','976150qCdOZf','Job\x20Id\x20not\x20found.','__createBinding'];a81_0x92e8=function(){return _0x3a7a01;};return a81_0x92e8();}exports['MaskingService']=MaskingService,MaskingService[a81_0x54888d(0x142)]=path_1[a81_0x54888d(0x137)][a81_0x54888d(0x157)](path_2[a81_0x54888d(0x13c)],constants_1[a81_0x54888d(0x134)]);