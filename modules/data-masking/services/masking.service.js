const a81_0x35baef=a81_0x25af;(function(_0x4e1c14,_0xf322c4){const _0x2b1c35=a81_0x25af,_0xa2f9e8=_0x4e1c14();while(!![]){try{const _0x30efd8=-parseInt(_0x2b1c35(0x1de))/0x1+-parseInt(_0x2b1c35(0x1b2))/0x2+-parseInt(_0x2b1c35(0x1b9))/0x3+-parseInt(_0x2b1c35(0x1ca))/0x4+-parseInt(_0x2b1c35(0x1c3))/0x5+-parseInt(_0x2b1c35(0x1c4))/0x6*(parseInt(_0x2b1c35(0x1d5))/0x7)+-parseInt(_0x2b1c35(0x1ae))/0x8*(-parseInt(_0x2b1c35(0x1a5))/0x9);if(_0x30efd8===_0xf322c4)break;else _0xa2f9e8['push'](_0xa2f9e8['shift']());}catch(_0x4fd338){_0xa2f9e8['push'](_0xa2f9e8['shift']());}}}(a81_0x4d37,0x7b14b));const a81_0x1ba5d5=(function(){let _0x55fc34=!![];return function(_0x1f72e7,_0x3e85d5){const _0x40f550=_0x55fc34?function(){if(_0x3e85d5){const _0x274a13=_0x3e85d5['apply'](_0x1f72e7,arguments);return _0x3e85d5=null,_0x274a13;}}:function(){};return _0x55fc34=![],_0x40f550;};}()),a81_0x3317bf=a81_0x1ba5d5(this,function(){const _0x49ca5a=a81_0x25af;return a81_0x3317bf[_0x49ca5a(0x1c1)]()[_0x49ca5a(0x1ad)]('(((.+)+)+)+$')[_0x49ca5a(0x1c1)]()[_0x49ca5a(0x1e8)](a81_0x3317bf)['search'](_0x49ca5a(0x1d6));});a81_0x3317bf();'use strict';function a81_0x25af(_0x316ce1,_0x55aca0){const _0x2296a8=a81_0x4d37();return a81_0x25af=function(_0x3317bf,_0x1ba5d5){_0x3317bf=_0x3317bf-0x1a4;let _0x4d37f9=_0x2296a8[_0x3317bf];return _0x4d37f9;},a81_0x25af(_0x316ce1,_0x55aca0);}var __createBinding=this&&this[a81_0x35baef(0x1d1)]||(Object[a81_0x35baef(0x1c8)]?function(_0x2f9939,_0x520063,_0x511dd4,_0x2dba3c){const _0x243488=a81_0x35baef;if(_0x2dba3c===undefined)_0x2dba3c=_0x511dd4;var _0x157e10=Object['getOwnPropertyDescriptor'](_0x520063,_0x511dd4);(!_0x157e10||(_0x243488(0x1cc)in _0x157e10?!_0x520063[_0x243488(0x1a7)]:_0x157e10[_0x243488(0x1c2)]||_0x157e10[_0x243488(0x1ce)]))&&(_0x157e10={'enumerable':!![],'get':function(){return _0x520063[_0x511dd4];}}),Object['defineProperty'](_0x2f9939,_0x2dba3c,_0x157e10);}:function(_0x16206f,_0x2d21b7,_0x10e8f2,_0x4bf36b){if(_0x4bf36b===undefined)_0x4bf36b=_0x10e8f2;_0x16206f[_0x4bf36b]=_0x2d21b7[_0x10e8f2];}),__setModuleDefault=this&&this[a81_0x35baef(0x1c0)]||(Object['create']?function(_0x5ad10a,_0x4fca2c){const _0x21ac2e=a81_0x35baef;Object[_0x21ac2e(0x1a8)](_0x5ad10a,_0x21ac2e(0x1e3),{'enumerable':!![],'value':_0x4fca2c});}:function(_0x4abee9,_0x12a663){const _0x19a3ee=a81_0x35baef;_0x4abee9[_0x19a3ee(0x1e3)]=_0x12a663;}),__importStar=this&&this['__importStar']||function(_0x445016){const _0x5c957a=a81_0x35baef;if(_0x445016&&_0x445016[_0x5c957a(0x1a7)])return _0x445016;var _0x2b6283={};if(_0x445016!=null){for(var _0x45a15f in _0x445016)if(_0x45a15f!==_0x5c957a(0x1e3)&&Object['prototype'][_0x5c957a(0x1dc)][_0x5c957a(0x1e5)](_0x445016,_0x45a15f))__createBinding(_0x2b6283,_0x445016,_0x45a15f);}return __setModuleDefault(_0x2b6283,_0x445016),_0x2b6283;},__importDefault=this&&this[a81_0x35baef(0x1e0)]||function(_0x385114){const _0x88c9f4=a81_0x35baef;return _0x385114&&_0x385114[_0x88c9f4(0x1a7)]?_0x385114:{'default':_0x385114};};Object[a81_0x35baef(0x1a8)](exports,a81_0x35baef(0x1a7),{'value':!![]}),exports[a81_0x35baef(0x1b3)]=void 0x0;function a81_0x4d37(){const _0x299f5d=['../../shared/utils/fs.utils','getLog','slice','162050tboKpP','(((.+)+)+)+$','\x20not\x20found.','../../../configs/path','LoggerJobState','JOB_LOG_DETAILS_FILENAME','message','hasOwnProperty','JobStatus','949523zygeXc','../job/enums/logger.enums','__importDefault','join','makeDir','default','generateJobId','call','dataPath','setJobError','constructor','push','sortJobsIds','logErrorStartJob','6035247YSYyEw','JOB_LOG_DETAILS_NAME','__esModule','defineProperty','getJobsIds','path','@flosum/utils','getJobState','search','64iKxqrz','NotFoundError','../constants','createMaskingJob','1906636nnRYJj','MaskingService','isExistsPath','runJob','catch','kill','FsUtils','2254377xFTulI','getJobDetails','setJobStatus','failed','csv-parse/sync','../../../core/errors/not-found.error','writeFile','__setModuleDefault','toString','writable','4078020ldUyNq','222BUaiJq','completedDate','stringify','init','create','parse','2136284iftVye','Job\x20Id\x20not\x20found.','get','status','configurable','maskingFolderPath','../../../constants/job','__createBinding'];a81_0x4d37=function(){return _0x299f5d;};return a81_0x4d37();}const path_1=__importStar(require(a81_0x35baef(0x1aa))),fs_utils_1=require(a81_0x35baef(0x1d2)),promises_1=require('fs/promises'),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a81_0x35baef(0x1df)),sync_1=require(a81_0x35baef(0x1bd)),utils_1=require(a81_0x35baef(0x1ab)),not_found_error_1=require(a81_0x35baef(0x1be)),job_1=require(a81_0x35baef(0x1d0)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a81_0x35baef(0x1b0)),path_2=require(a81_0x35baef(0x1d8));class MaskingService{static async[a81_0x35baef(0x1b1)](_0x291b7a){const _0x446706=a81_0x35baef,_0x322093=job_utils_1[_0x446706(0x1e3)][_0x446706(0x1e4)](),_0x2299a7=(0x0,path_1['join'])(MaskingService[_0x446706(0x1cf)],_0x322093);await(0x0,fs_utils_1[_0x446706(0x1e2)])(_0x2299a7),await(0x0,promises_1[_0x446706(0x1bf)])(_0x2299a7+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x446706(0x1c6)]({'details':_0x291b7a}));const _0x1182fe=await new logger_job_state_1['LoggerJobState'](_0x2299a7,_0x322093)[_0x446706(0x1c7)]([]);await _0x1182fe[_0x446706(0x1b7)]();const _0x467564=path_1[_0x446706(0x1e3)][_0x446706(0x1e1)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x446706(0x1e3)][_0x446706(0x1b5)](_0x467564,{'jobStorePath':_0x2299a7,'jobId':_0x322093})[_0x446706(0x1b6)](_0x1f0ac5=>this[_0x446706(0x1a4)](_0x2299a7,_0x322093,_0x1f0ac5)),{'jobId':_0x322093};}static async['getJobs'](_0x2efb1f,_0x3ec8d3){const _0x2e1f94=a81_0x35baef,_0x3f07e6=await job_utils_1[_0x2e1f94(0x1e3)][_0x2e1f94(0x1a9)](MaskingService[_0x2e1f94(0x1cf)]),_0x53685d=await job_utils_1['default'][_0x2e1f94(0x1ea)](MaskingService[_0x2e1f94(0x1cf)],_0x3f07e6),_0x597774=_0x53685d[_0x2e1f94(0x1d4)](_0x3ec8d3,_0x3ec8d3+_0x2efb1f),_0x70d9b0=[];for(const _0x41041f of _0x597774){const _0x277d4b=await this[_0x2e1f94(0x1ac)](_0x41041f,![]);_0x70d9b0[_0x2e1f94(0x1e9)](_0x277d4b);}return _0x70d9b0;}static async[a81_0x35baef(0x1ac)](_0x7f069e,_0x29e72b){const _0x51641e=a81_0x35baef,_0x35524e=await this['getLog'](_0x7f069e,job_1['JOB_LOG_STATE_FILENAME'],constants_1['JOB_LOG_STATE_NAME']),_0x3da8f3=JSON[_0x51641e(0x1c9)](_0x35524e),_0x52c767={'id':_0x3da8f3['id'],'status':_0x3da8f3[_0x51641e(0x1cd)],'createdDate':_0x3da8f3['createdDate'],'completedDate':_0x3da8f3[_0x51641e(0x1c5)],'successful':_0x3da8f3['successful'],'failed':_0x3da8f3[_0x51641e(0x1bc)]};return _0x29e72b?_0x3da8f3:_0x52c767;}static async[a81_0x35baef(0x1ba)](_0x2bed6e){const _0x20007c=a81_0x35baef,_0x428f1f=await this[_0x20007c(0x1d3)](_0x2bed6e,job_1[_0x20007c(0x1da)],constants_1[_0x20007c(0x1a6)]);return(0x0,sync_1[_0x20007c(0x1c9)])(_0x428f1f,{'columns':!![]});}static async[a81_0x35baef(0x1d3)](_0x17b653,_0x185fd6,_0x2cc35f){const _0x22f83b=a81_0x35baef,_0x5d6061=(0x0,path_1[_0x22f83b(0x1e1)])(MaskingService['maskingFolderPath'],_0x17b653),_0x529497=(0x0,path_1[_0x22f83b(0x1e1)])(_0x5d6061,_0x185fd6);if(!await utils_1[_0x22f83b(0x1b8)][_0x22f83b(0x1b4)](_0x5d6061))throw new not_found_error_1['NotFoundError'](_0x22f83b(0x1cb));if(!await utils_1[_0x22f83b(0x1b8)]['isExistsPath'](_0x529497))throw new not_found_error_1[(_0x22f83b(0x1af))](_0x2cc35f+_0x22f83b(0x1d7));return(0x0,promises_1['readFile'])(_0x529497,{'encoding':'utf-8'});}static async[a81_0x35baef(0x1a4)](_0x4538f4,_0x228fde,_0x4dd55f){const _0x5a361e=a81_0x35baef,_0x7b9ae=await new logger_job_state_1[(_0x5a361e(0x1d9))](_0x4538f4,_0x228fde)[_0x5a361e(0x1c7)]([]);_0x7b9ae[_0x5a361e(0x1bb)](logger_enums_1[_0x5a361e(0x1dd)]['FAILED']),_0x7b9ae[_0x5a361e(0x1e7)](_0x4dd55f[_0x5a361e(0x1db)]),await _0x7b9ae['kill']();}}exports[a81_0x35baef(0x1b3)]=MaskingService,MaskingService[a81_0x35baef(0x1cf)]=path_1['default']['join'](path_2[a81_0x35baef(0x1e6)],constants_1['DATA_MASKING_FOLDER_NAME']);