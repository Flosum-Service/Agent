const a81_0x478e59=a81_0x3e1d;(function(_0x489a5f,_0x42bea4){const _0x22c2b5=a81_0x3e1d,_0x184ed4=_0x489a5f();while(!![]){try{const _0x2dbf10=-parseInt(_0x22c2b5(0x1ea))/0x1*(-parseInt(_0x22c2b5(0x1cb))/0x2)+parseInt(_0x22c2b5(0x208))/0x3*(-parseInt(_0x22c2b5(0x1d0))/0x4)+-parseInt(_0x22c2b5(0x20b))/0x5+-parseInt(_0x22c2b5(0x1d1))/0x6*(parseInt(_0x22c2b5(0x1ed))/0x7)+-parseInt(_0x22c2b5(0x1e4))/0x8*(parseInt(_0x22c2b5(0x1d3))/0x9)+parseInt(_0x22c2b5(0x204))/0xa+parseInt(_0x22c2b5(0x1d5))/0xb;if(_0x2dbf10===_0x42bea4)break;else _0x184ed4['push'](_0x184ed4['shift']());}catch(_0x4cfbc9){_0x184ed4['push'](_0x184ed4['shift']());}}}(a81_0x1681,0x98690));const a81_0x3be8de=(function(){let _0x35d124=!![];return function(_0x3ee566,_0x547a3c){const _0x2c1eeb=_0x35d124?function(){const _0x2bcfe5=a81_0x3e1d;if(_0x547a3c){const _0x34fdf1=_0x547a3c[_0x2bcfe5(0x1e9)](_0x3ee566,arguments);return _0x547a3c=null,_0x34fdf1;}}:function(){};return _0x35d124=![],_0x2c1eeb;};}()),a81_0x4f64e8=a81_0x3be8de(this,function(){const _0x39a7f6=a81_0x3e1d;return a81_0x4f64e8['toString']()[_0x39a7f6(0x1e2)](_0x39a7f6(0x1de))[_0x39a7f6(0x1ef)]()[_0x39a7f6(0x211)](a81_0x4f64e8)[_0x39a7f6(0x1e2)]('(((.+)+)+)+$');});a81_0x4f64e8();'use strict';var __createBinding=this&&this[a81_0x478e59(0x1fd)]||(Object[a81_0x478e59(0x1d2)]?function(_0x2c6e36,_0x3d5058,_0x4f3c3a,_0x10b62f){const _0x336c48=a81_0x478e59;if(_0x10b62f===undefined)_0x10b62f=_0x4f3c3a;var _0x1e2fc4=Object[_0x336c48(0x1c9)](_0x3d5058,_0x4f3c3a);(!_0x1e2fc4||(_0x336c48(0x1f7)in _0x1e2fc4?!_0x3d5058[_0x336c48(0x1df)]:_0x1e2fc4['writable']||_0x1e2fc4['configurable']))&&(_0x1e2fc4={'enumerable':!![],'get':function(){return _0x3d5058[_0x4f3c3a];}}),Object[_0x336c48(0x1f6)](_0x2c6e36,_0x10b62f,_0x1e2fc4);}:function(_0x3f362a,_0x22799e,_0x1b33d2,_0x222fc2){if(_0x222fc2===undefined)_0x222fc2=_0x1b33d2;_0x3f362a[_0x222fc2]=_0x22799e[_0x1b33d2];}),__setModuleDefault=this&&this[a81_0x478e59(0x1f9)]||(Object[a81_0x478e59(0x1d2)]?function(_0x36394e,_0x151f97){const _0x45f34f=a81_0x478e59;Object[_0x45f34f(0x1f6)](_0x36394e,'default',{'enumerable':!![],'value':_0x151f97});}:function(_0x1a12f2,_0x168287){const _0x3135df=a81_0x478e59;_0x1a12f2[_0x3135df(0x1d8)]=_0x168287;}),__importStar=this&&this[a81_0x478e59(0x20d)]||function(_0x454def){const _0x2b7e76=a81_0x478e59;if(_0x454def&&_0x454def[_0x2b7e76(0x1df)])return _0x454def;var _0x387c07={};if(_0x454def!=null){for(var _0x1fbfb4 in _0x454def)if(_0x1fbfb4!=='default'&&Object[_0x2b7e76(0x209)]['hasOwnProperty'][_0x2b7e76(0x1f4)](_0x454def,_0x1fbfb4))__createBinding(_0x387c07,_0x454def,_0x1fbfb4);}return __setModuleDefault(_0x387c07,_0x454def),_0x387c07;},__importDefault=this&&this['__importDefault']||function(_0x1c92ed){return _0x1c92ed&&_0x1c92ed['__esModule']?_0x1c92ed:{'default':_0x1c92ed};};Object[a81_0x478e59(0x1f6)](exports,a81_0x478e59(0x1df),{'value':!![]}),exports[a81_0x478e59(0x206)]=void 0x0;const path_1=__importStar(require(a81_0x478e59(0x20c))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a81_0x478e59(0x1d9)),logger_job_state_1=require(a81_0x478e59(0x1cc)),logger_enums_1=require(a81_0x478e59(0x1db)),sync_1=require('csv-parse/sync'),utils_1=require(a81_0x478e59(0x1fc)),not_found_error_1=require(a81_0x478e59(0x20a)),job_1=require(a81_0x478e59(0x200)),job_utils_1=__importDefault(require(a81_0x478e59(0x1ce))),constants_1=require(a81_0x478e59(0x1dd)),path_2=require(a81_0x478e59(0x1f3));function a81_0x3e1d(_0x2ce871,_0x52d4a5){const _0x176d99=a81_0x1681();return a81_0x3e1d=function(_0x4f64e8,_0x3be8de){_0x4f64e8=_0x4f64e8-0x1c7;let _0x168112=_0x176d99[_0x4f64e8];return _0x168112;},a81_0x3e1d(_0x2ce871,_0x52d4a5);}function a81_0x1681(){const _0xfccddc=['9144ilmURU','create','2503035bprnXj','JOB_LOG_DETAILS_NAME','14923986SskDww','JobStatus','init','default','fs/promises','maskingFolderPath','../job/enums/logger.enums','JOB_LOG_STATE_FILENAME','../constants','(((.+)+)+)+$','__esModule','readFile','makeDir','search','successful','8OfGIiX','getLog','DATA_MASKING_FOLDER_NAME','createMaskingJob','message','apply','1781haofrL','JOB_LOG_DETAILS_FILENAME','failed','5285DkzPFq','catch','toString','getJobsIds','runJob','LoggerJobState','../../../configs/path','call','getJobState','defineProperty','get','FsUtils','__setModuleDefault','parse','push','@flosum/utils','__createBinding','NotFoundError','getJobDetails','../../../constants/job','dataPath','getJobs','slice','9476210jbEkLt','kill','MaskingService','isExistsPath','1567878NTiWAr','prototype','../../../core/errors/not-found.error','4048905NXGTgx','path','__importStar','utf-8','stringify','generateJobId','constructor','Job\x20Id\x20not\x20found.','join','sortJobsIds','getOwnPropertyDescriptor','FAILED','1214NtAnwR','../job/classes/logger/logger-job-state','logErrorStartJob','../../shared/utils/job.utils','createdDate','4WHHuuv'];a81_0x1681=function(){return _0xfccddc;};return a81_0x1681();}class MaskingService{static async[a81_0x478e59(0x1e7)](_0x128ea3){const _0x52ae30=a81_0x478e59,_0x20403f=job_utils_1[_0x52ae30(0x1d8)][_0x52ae30(0x210)](),_0x584df8=(0x0,path_1[_0x52ae30(0x1c7)])(MaskingService[_0x52ae30(0x1da)],_0x20403f);await(0x0,fs_utils_1[_0x52ae30(0x1e1)])(_0x584df8),await(0x0,promises_1['writeFile'])(_0x584df8+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x52ae30(0x20f)]({'details':_0x128ea3}));const _0x1d45fe=await new logger_job_state_1[(_0x52ae30(0x1f2))](_0x584df8,_0x20403f)[_0x52ae30(0x1d7)]([]);await _0x1d45fe[_0x52ae30(0x205)]();const _0x179d5c=path_1[_0x52ae30(0x1d8)][_0x52ae30(0x1c7)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x52ae30(0x1d8)][_0x52ae30(0x1f1)](_0x179d5c,{'jobStorePath':_0x584df8,'jobId':_0x20403f})[_0x52ae30(0x1ee)](_0x515c51=>this[_0x52ae30(0x1cd)](_0x584df8,_0x20403f,_0x515c51)),{'jobId':_0x20403f};}static async[a81_0x478e59(0x202)](_0x42967f,_0x40da0e){const _0x2565e7=a81_0x478e59,_0x944a13=await job_utils_1[_0x2565e7(0x1d8)][_0x2565e7(0x1f0)](MaskingService[_0x2565e7(0x1da)]),_0x4ae799=await job_utils_1[_0x2565e7(0x1d8)][_0x2565e7(0x1c8)](MaskingService[_0x2565e7(0x1da)],_0x944a13),_0x299360=_0x4ae799[_0x2565e7(0x203)](_0x40da0e,_0x40da0e+_0x42967f),_0x43b2f3=[];for(const _0xd7354c of _0x299360){const _0x1f253f=await this['getJobState'](_0xd7354c,![]);_0x43b2f3[_0x2565e7(0x1fb)](_0x1f253f);}return _0x43b2f3;}static async[a81_0x478e59(0x1f5)](_0x5077e4,_0x3e6fad){const _0x45854e=a81_0x478e59,_0x415db5=await this[_0x45854e(0x1e5)](_0x5077e4,job_1[_0x45854e(0x1dc)],constants_1['JOB_LOG_STATE_NAME']),_0x36e060=JSON[_0x45854e(0x1fa)](_0x415db5),_0x223300={'id':_0x36e060['id'],'status':_0x36e060['status'],'createdDate':_0x36e060[_0x45854e(0x1cf)],'completedDate':_0x36e060['completedDate'],'successful':_0x36e060[_0x45854e(0x1e3)],'failed':_0x36e060[_0x45854e(0x1ec)]};return _0x3e6fad?_0x36e060:_0x223300;}static async[a81_0x478e59(0x1ff)](_0x1260e0){const _0x56570d=a81_0x478e59,_0x443e8a=await this[_0x56570d(0x1e5)](_0x1260e0,job_1[_0x56570d(0x1eb)],constants_1[_0x56570d(0x1d4)]);return(0x0,sync_1[_0x56570d(0x1fa)])(_0x443e8a,{'columns':!![]});}static async[a81_0x478e59(0x1e5)](_0x3f48c8,_0x504aef,_0x15f047){const _0x29cb10=a81_0x478e59,_0x1a6192=(0x0,path_1[_0x29cb10(0x1c7)])(MaskingService['maskingFolderPath'],_0x3f48c8),_0x45b8b4=(0x0,path_1[_0x29cb10(0x1c7)])(_0x1a6192,_0x504aef);if(!await utils_1[_0x29cb10(0x1f8)][_0x29cb10(0x207)](_0x1a6192))throw new not_found_error_1[(_0x29cb10(0x1fe))](_0x29cb10(0x212));if(!await utils_1['FsUtils'][_0x29cb10(0x207)](_0x45b8b4))throw new not_found_error_1[(_0x29cb10(0x1fe))](_0x15f047+'\x20not\x20found.');return(0x0,promises_1[_0x29cb10(0x1e0)])(_0x45b8b4,{'encoding':_0x29cb10(0x20e)});}static async[a81_0x478e59(0x1cd)](_0x574f2c,_0x4d7264,_0x25146f){const _0x16143c=a81_0x478e59,_0x35677c=await new logger_job_state_1[(_0x16143c(0x1f2))](_0x574f2c,_0x4d7264)['init']([]);_0x35677c['setJobStatus'](logger_enums_1[_0x16143c(0x1d6)][_0x16143c(0x1ca)]),_0x35677c['setJobError'](_0x25146f[_0x16143c(0x1e8)]),await _0x35677c[_0x16143c(0x205)]();}}exports[a81_0x478e59(0x206)]=MaskingService,MaskingService['maskingFolderPath']=path_1[a81_0x478e59(0x1d8)][a81_0x478e59(0x1c7)](path_2[a81_0x478e59(0x201)],constants_1[a81_0x478e59(0x1e6)]);