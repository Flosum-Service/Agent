const a81_0x5fa120=a81_0xaeac;(function(_0x3d66bb,_0x5cd569){const _0x2966ce=a81_0xaeac,_0x5d8ba1=_0x3d66bb();while(!![]){try{const _0x129b8c=parseInt(_0x2966ce(0x1da))/0x1*(-parseInt(_0x2966ce(0x1cc))/0x2)+-parseInt(_0x2966ce(0x1c6))/0x3*(parseInt(_0x2966ce(0x191))/0x4)+-parseInt(_0x2966ce(0x1be))/0x5+-parseInt(_0x2966ce(0x1ae))/0x6*(parseInt(_0x2966ce(0x1c4))/0x7)+parseInt(_0x2966ce(0x1b9))/0x8*(parseInt(_0x2966ce(0x1c2))/0x9)+-parseInt(_0x2966ce(0x1bb))/0xa*(parseInt(_0x2966ce(0x1bc))/0xb)+-parseInt(_0x2966ce(0x1ad))/0xc*(-parseInt(_0x2966ce(0x19b))/0xd);if(_0x129b8c===_0x5cd569)break;else _0x5d8ba1['push'](_0x5d8ba1['shift']());}catch(_0x21046a){_0x5d8ba1['push'](_0x5d8ba1['shift']());}}}(a81_0x1537,0x46ba3));const a81_0x2d83c2=(function(){let _0x4c3ef9=!![];return function(_0x52a41a,_0x3fe41c){const _0x3b3170=_0x4c3ef9?function(){const _0x3281fc=a81_0xaeac;if(_0x3fe41c){const _0x5d30b3=_0x3fe41c[_0x3281fc(0x1c8)](_0x52a41a,arguments);return _0x3fe41c=null,_0x5d30b3;}}:function(){};return _0x4c3ef9=![],_0x3b3170;};}()),a81_0xbcad23=a81_0x2d83c2(this,function(){const _0x1a1016=a81_0xaeac;return a81_0xbcad23[_0x1a1016(0x1cb)]()[_0x1a1016(0x1df)]('(((.+)+)+)+$')[_0x1a1016(0x1cb)]()[_0x1a1016(0x1d0)](a81_0xbcad23)['search']('(((.+)+)+)+$');});function a81_0xaeac(_0x25eb8b,_0x5922d3){const _0x44893b=a81_0x1537();return a81_0xaeac=function(_0xbcad23,_0x2d83c2){_0xbcad23=_0xbcad23-0x191;let _0x1537c4=_0x44893b[_0xbcad23];return _0x1537c4;},a81_0xaeac(_0x25eb8b,_0x5922d3);}a81_0xbcad23();function a81_0x1537(){const _0x2a44f9=['@flosum/utils','FsUtils','runJob','\x20not\x20found.','init','MaskingService','call','kill','793yRkafK','join','create','../job/classes/logger/logger-job-state','push','__esModule','generateJobId','DATA_MASKING_FOLDER_NAME','MANIFEST_FILENAME','default','JOB_LOG_STATE_FILENAME','catch','writeFile','message','logErrorStartJob','../constants','sortJobsIds','../job/enums/logger.enums','143112HITSXY','19674xBwDIW','fs/promises','setJobStatus','__importStar','../../shared/utils/fs.utils','getLog','configurable','JobStatus','../../../configs/path','writable','setJobError','3638616mHMBhU','prototype','130BHqRLe','27082XhsGve','path','1435575eFHjtO','status','getJobDetails','readFile','9OXqjFw','../../../core/errors/not-found.error','770cYMjwR','__setModuleDefault','2235PqqfCc','createdDate','apply','csv-parse/sync','failed','toString','6jSPaZp','slice','isExistsPath','dataPath','constructor','successful','makeDir','../../shared/utils/job.utils','hasOwnProperty','__createBinding','../../../constants/job','JOB_LOG_STATE_NAME','defineProperty','JOB_LOG_DETAILS_NAME','40886FoDpxl','__importDefault','stringify','JOB_PATH','maskingFolderPath','search','parse','484oLpUku','LoggerJobState'];a81_0x1537=function(){return _0x2a44f9;};return a81_0x1537();}'use strict';var __createBinding=this&&this[a81_0x5fa120(0x1d5)]||(Object[a81_0x5fa120(0x19d)]?function(_0x3254d6,_0x36ecb3,_0x23f2ad,_0x2fb371){const _0x472920=a81_0x5fa120;if(_0x2fb371===undefined)_0x2fb371=_0x23f2ad;var _0x2fbe1b=Object['getOwnPropertyDescriptor'](_0x36ecb3,_0x23f2ad);(!_0x2fbe1b||('get'in _0x2fbe1b?!_0x36ecb3[_0x472920(0x1a0)]:_0x2fbe1b[_0x472920(0x1b7)]||_0x2fbe1b[_0x472920(0x1b4)]))&&(_0x2fbe1b={'enumerable':!![],'get':function(){return _0x36ecb3[_0x23f2ad];}}),Object[_0x472920(0x1d8)](_0x3254d6,_0x2fb371,_0x2fbe1b);}:function(_0x536be6,_0x21cdf2,_0x420ccc,_0x6c2e46){if(_0x6c2e46===undefined)_0x6c2e46=_0x420ccc;_0x536be6[_0x6c2e46]=_0x21cdf2[_0x420ccc];}),__setModuleDefault=this&&this[a81_0x5fa120(0x1c5)]||(Object[a81_0x5fa120(0x19d)]?function(_0x2fc90b,_0x331d09){const _0x538610=a81_0x5fa120;Object[_0x538610(0x1d8)](_0x2fc90b,_0x538610(0x1a4),{'enumerable':!![],'value':_0x331d09});}:function(_0xfceac4,_0x51915d){const _0xef7495=a81_0x5fa120;_0xfceac4[_0xef7495(0x1a4)]=_0x51915d;}),__importStar=this&&this[a81_0x5fa120(0x1b1)]||function(_0x2e2fb3){const _0x2554eb=a81_0x5fa120;if(_0x2e2fb3&&_0x2e2fb3[_0x2554eb(0x1a0)])return _0x2e2fb3;var _0x1d24f1={};if(_0x2e2fb3!=null){for(var _0x224180 in _0x2e2fb3)if(_0x224180!=='default'&&Object[_0x2554eb(0x1ba)][_0x2554eb(0x1d4)][_0x2554eb(0x199)](_0x2e2fb3,_0x224180))__createBinding(_0x1d24f1,_0x2e2fb3,_0x224180);}return __setModuleDefault(_0x1d24f1,_0x2e2fb3),_0x1d24f1;},__importDefault=this&&this[a81_0x5fa120(0x1db)]||function(_0x54fd35){return _0x54fd35&&_0x54fd35['__esModule']?_0x54fd35:{'default':_0x54fd35};};Object[a81_0x5fa120(0x1d8)](exports,a81_0x5fa120(0x1a0),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a81_0x5fa120(0x1bd))),fs_utils_1=require(a81_0x5fa120(0x1b2)),promises_1=require(a81_0x5fa120(0x1af)),logger_job_state_1=require(a81_0x5fa120(0x19e)),logger_enums_1=require(a81_0x5fa120(0x1ac)),sync_1=require(a81_0x5fa120(0x1c9)),utils_1=require(a81_0x5fa120(0x193)),not_found_error_1=require(a81_0x5fa120(0x1c3)),job_1=require(a81_0x5fa120(0x1d6)),job_utils_1=__importDefault(require(a81_0x5fa120(0x1d3))),constants_1=require(a81_0x5fa120(0x1aa)),path_2=require(a81_0x5fa120(0x1b6));class MaskingService{static async['createMaskingJob'](_0x298026){const _0x5e341e=a81_0x5fa120,_0x1cf56c=job_utils_1[_0x5e341e(0x1a4)][_0x5e341e(0x1a1)](),_0x30ef32=(0x0,path_1[_0x5e341e(0x19c)])(MaskingService[_0x5e341e(0x1de)],_0x1cf56c);await(0x0,fs_utils_1[_0x5e341e(0x1d2)])(_0x30ef32),await(0x0,promises_1[_0x5e341e(0x1a7)])(_0x30ef32+'/'+job_1[_0x5e341e(0x1a3)],JSON[_0x5e341e(0x1dc)]({'details':_0x298026}));const _0x1a32af=await new logger_job_state_1[(_0x5e341e(0x192))](_0x30ef32,_0x1cf56c)[_0x5e341e(0x197)]([]);await _0x1a32af[_0x5e341e(0x19a)]();const _0x43c474=path_1[_0x5e341e(0x1a4)]['join'](__dirname,job_1[_0x5e341e(0x1dd)]);return job_utils_1[_0x5e341e(0x1a4)][_0x5e341e(0x195)](_0x43c474,{'jobStorePath':_0x30ef32,'jobId':_0x1cf56c})[_0x5e341e(0x1a6)](_0x2704f8=>this[_0x5e341e(0x1a9)](_0x30ef32,_0x1cf56c,_0x2704f8)),{'jobId':_0x1cf56c};}static async['getJobs'](_0xe97da5,_0x1e0ee5){const _0xb5cd50=a81_0x5fa120,_0x39b0d8=await job_utils_1[_0xb5cd50(0x1a4)]['getJobsIds'](MaskingService[_0xb5cd50(0x1de)]),_0x2eb4ba=await job_utils_1[_0xb5cd50(0x1a4)][_0xb5cd50(0x1ab)](MaskingService[_0xb5cd50(0x1de)],_0x39b0d8),_0x36a77e=_0x2eb4ba[_0xb5cd50(0x1cd)](_0x1e0ee5,_0x1e0ee5+_0xe97da5),_0x56ce8e=[];for(const _0x469606 of _0x36a77e){const _0x338c28=await this['getJobState'](_0x469606,![]);_0x56ce8e[_0xb5cd50(0x19f)](_0x338c28);}return _0x56ce8e;}static async['getJobState'](_0x21190f,_0x106226){const _0x2f5c2e=a81_0x5fa120,_0x1fc514=await this[_0x2f5c2e(0x1b3)](_0x21190f,job_1[_0x2f5c2e(0x1a5)],constants_1[_0x2f5c2e(0x1d7)]),_0x37c532=JSON['parse'](_0x1fc514),_0x8238d6={'id':_0x37c532['id'],'status':_0x37c532[_0x2f5c2e(0x1bf)],'createdDate':_0x37c532[_0x2f5c2e(0x1c7)],'completedDate':_0x37c532['completedDate'],'successful':_0x37c532[_0x2f5c2e(0x1d1)],'failed':_0x37c532[_0x2f5c2e(0x1ca)]};return _0x106226?_0x37c532:_0x8238d6;}static async[a81_0x5fa120(0x1c0)](_0x231d34){const _0x356735=a81_0x5fa120,_0x2cec67=await this[_0x356735(0x1b3)](_0x231d34,job_1['JOB_LOG_DETAILS_FILENAME'],constants_1[_0x356735(0x1d9)]);return(0x0,sync_1[_0x356735(0x1e0)])(_0x2cec67,{'columns':!![]});}static async[a81_0x5fa120(0x1b3)](_0x21037a,_0x59bb29,_0x3bc437){const _0xd53da8=a81_0x5fa120,_0x536e93=(0x0,path_1[_0xd53da8(0x19c)])(MaskingService['maskingFolderPath'],_0x21037a),_0x5eddf2=(0x0,path_1[_0xd53da8(0x19c)])(_0x536e93,_0x59bb29);if(!await utils_1[_0xd53da8(0x194)]['isExistsPath'](_0x536e93))throw new not_found_error_1['NotFoundError']('Job\x20Id\x20not\x20found.');if(!await utils_1[_0xd53da8(0x194)][_0xd53da8(0x1ce)](_0x5eddf2))throw new not_found_error_1['NotFoundError'](_0x3bc437+_0xd53da8(0x196));return(0x0,promises_1[_0xd53da8(0x1c1)])(_0x5eddf2,{'encoding':'utf-8'});}static async[a81_0x5fa120(0x1a9)](_0x39332c,_0x22df0e,_0x1a82bd){const _0x53ad3f=a81_0x5fa120,_0x576109=await new logger_job_state_1[(_0x53ad3f(0x192))](_0x39332c,_0x22df0e)[_0x53ad3f(0x197)]([]);_0x576109[_0x53ad3f(0x1b0)](logger_enums_1[_0x53ad3f(0x1b5)]['FAILED']),_0x576109[_0x53ad3f(0x1b8)](_0x1a82bd[_0x53ad3f(0x1a8)]),await _0x576109[_0x53ad3f(0x19a)]();}}exports[a81_0x5fa120(0x198)]=MaskingService,MaskingService[a81_0x5fa120(0x1de)]=path_1['default'][a81_0x5fa120(0x19c)](path_2[a81_0x5fa120(0x1cf)],constants_1[a81_0x5fa120(0x1a2)]);