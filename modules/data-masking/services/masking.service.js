const a81_0x2bcd58=a81_0x52f0;(function(_0x329e4c,_0x5c3b6c){const _0x5f0901=a81_0x52f0,_0x437414=_0x329e4c();while(!![]){try{const _0x2d8c7f=parseInt(_0x5f0901(0x1c9))/0x1+parseInt(_0x5f0901(0x1a9))/0x2+-parseInt(_0x5f0901(0x1d0))/0x3*(-parseInt(_0x5f0901(0x1b5))/0x4)+-parseInt(_0x5f0901(0x1b9))/0x5+-parseInt(_0x5f0901(0x1ca))/0x6+-parseInt(_0x5f0901(0x1b2))/0x7*(parseInt(_0x5f0901(0x1e1))/0x8)+parseInt(_0x5f0901(0x1e6))/0x9;if(_0x2d8c7f===_0x5c3b6c)break;else _0x437414['push'](_0x437414['shift']());}catch(_0x3f327d){_0x437414['push'](_0x437414['shift']());}}}(a81_0x2be9,0xbd470));const a81_0x2964e9=(function(){let _0x547687=!![];return function(_0x57bbbb,_0x522103){const _0x57350d=_0x547687?function(){const _0x49dde4=a81_0x52f0;if(_0x522103){const _0x751f23=_0x522103[_0x49dde4(0x1d3)](_0x57bbbb,arguments);return _0x522103=null,_0x751f23;}}:function(){};return _0x547687=![],_0x57350d;};}()),a81_0xcecb08=a81_0x2964e9(this,function(){const _0x41e646=a81_0x52f0;return a81_0xcecb08[_0x41e646(0x1df)]()[_0x41e646(0x1d9)](_0x41e646(0x1cf))[_0x41e646(0x1df)]()[_0x41e646(0x1e7)](a81_0xcecb08)['search']('(((.+)+)+)+$');});a81_0xcecb08();function a81_0x52f0(_0x129b71,_0x43dfca){const _0x17b346=a81_0x2be9();return a81_0x52f0=function(_0xcecb08,_0x2964e9){_0xcecb08=_0xcecb08-0x1a6;let _0x2be952=_0x17b346[_0xcecb08];return _0x2be952;},a81_0x52f0(_0x129b71,_0x43dfca);}'use strict';var __createBinding=this&&this[a81_0x2bcd58(0x1ae)]||(Object['create']?function(_0x46d5d8,_0x53bfe0,_0x1b26c7,_0xf31b68){const _0x1c5134=a81_0x2bcd58;if(_0xf31b68===undefined)_0xf31b68=_0x1b26c7;var _0x280ca6=Object[_0x1c5134(0x1ba)](_0x53bfe0,_0x1b26c7);(!_0x280ca6||(_0x1c5134(0x1db)in _0x280ca6?!_0x53bfe0[_0x1c5134(0x1ab)]:_0x280ca6[_0x1c5134(0x1d4)]||_0x280ca6['configurable']))&&(_0x280ca6={'enumerable':!![],'get':function(){return _0x53bfe0[_0x1b26c7];}}),Object[_0x1c5134(0x1b0)](_0x46d5d8,_0xf31b68,_0x280ca6);}:function(_0x2dfa4f,_0xfd14ea,_0x5cca4b,_0xabc154){if(_0xabc154===undefined)_0xabc154=_0x5cca4b;_0x2dfa4f[_0xabc154]=_0xfd14ea[_0x5cca4b];}),__setModuleDefault=this&&this[a81_0x2bcd58(0x1d8)]||(Object['create']?function(_0x18cd04,_0x5d6ed0){const _0x234cfa=a81_0x2bcd58;Object[_0x234cfa(0x1b0)](_0x18cd04,_0x234cfa(0x1af),{'enumerable':!![],'value':_0x5d6ed0});}:function(_0x5ed35b,_0x540b88){const _0x1f3188=a81_0x2bcd58;_0x5ed35b[_0x1f3188(0x1af)]=_0x540b88;}),__importStar=this&&this['__importStar']||function(_0x354389){const _0x5af38b=a81_0x2bcd58;if(_0x354389&&_0x354389[_0x5af38b(0x1ab)])return _0x354389;var _0x3f6dad={};if(_0x354389!=null){for(var _0x499e4b in _0x354389)if(_0x499e4b!=='default'&&Object[_0x5af38b(0x1c3)]['hasOwnProperty']['call'](_0x354389,_0x499e4b))__createBinding(_0x3f6dad,_0x354389,_0x499e4b);}return __setModuleDefault(_0x3f6dad,_0x354389),_0x3f6dad;},__importDefault=this&&this['__importDefault']||function(_0x56349d){return _0x56349d&&_0x56349d['__esModule']?_0x56349d:{'default':_0x56349d};};Object[a81_0x2bcd58(0x1b0)](exports,a81_0x2bcd58(0x1ab),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require('path')),fs_utils_1=require(a81_0x2bcd58(0x1d6)),promises_1=require(a81_0x2bcd58(0x1a8)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a81_0x2bcd58(0x1d2)),sync_1=require(a81_0x2bcd58(0x1de)),utils_1=require(a81_0x2bcd58(0x1ea)),not_found_error_1=require(a81_0x2bcd58(0x1b1)),job_1=require(a81_0x2bcd58(0x1da)),job_utils_1=__importDefault(require(a81_0x2bcd58(0x1ad))),constants_1=require(a81_0x2bcd58(0x1b3)),path_2=require('../../../configs/path');class MaskingService{static async[a81_0x2bcd58(0x1d7)](_0x44fc7f){const _0x5b3e92=a81_0x2bcd58,_0x465bfd=job_utils_1['default'][_0x5b3e92(0x1e3)](),_0x205e14=(0x0,path_1[_0x5b3e92(0x1ec)])(MaskingService[_0x5b3e92(0x1e2)],_0x465bfd);await(0x0,fs_utils_1['makeDir'])(_0x205e14),await(0x0,promises_1['writeFile'])(_0x205e14+'/'+job_1[_0x5b3e92(0x1ce)],JSON[_0x5b3e92(0x1e9)]({'details':_0x44fc7f}));const _0x240486=await new logger_job_state_1['LoggerJobState'](_0x205e14,_0x465bfd)[_0x5b3e92(0x1bb)]([]);await _0x240486[_0x5b3e92(0x1d5)]();const _0x132209=path_1['default'][_0x5b3e92(0x1ec)](__dirname,job_1[_0x5b3e92(0x1e0)]);return job_utils_1[_0x5b3e92(0x1af)][_0x5b3e92(0x1e5)](_0x132209,{'jobStorePath':_0x205e14,'jobId':_0x465bfd})[_0x5b3e92(0x1c2)](_0x5acdf5=>this[_0x5b3e92(0x1bf)](_0x205e14,_0x465bfd,_0x5acdf5)),{'jobId':_0x465bfd};}static async[a81_0x2bcd58(0x1dd)](_0x596792,_0xf5d3c7){const _0x17cd3f=a81_0x2bcd58,_0x5bfb47=await job_utils_1[_0x17cd3f(0x1af)][_0x17cd3f(0x1b8)](MaskingService[_0x17cd3f(0x1e2)]),_0x4dc442=await job_utils_1[_0x17cd3f(0x1af)]['sortJobsIds'](MaskingService[_0x17cd3f(0x1e2)],_0x5bfb47),_0x2d06dc=_0x4dc442['slice'](_0xf5d3c7,_0xf5d3c7+_0x596792),_0x31f8a0=[];for(const _0xab8d3e of _0x2d06dc){const _0xaf9c09=await this[_0x17cd3f(0x1e8)](_0xab8d3e,![]);_0x31f8a0[_0x17cd3f(0x1ac)](_0xaf9c09);}return _0x31f8a0;}static async[a81_0x2bcd58(0x1e8)](_0x42d449,_0x2624b0){const _0x40ea05=a81_0x2bcd58,_0x1038e1=await this[_0x40ea05(0x1be)](_0x42d449,job_1[_0x40ea05(0x1c0)],constants_1['JOB_LOG_STATE_NAME']),_0x3f2f01=JSON[_0x40ea05(0x1e4)](_0x1038e1),_0x5dd4cf={'id':_0x3f2f01['id'],'status':_0x3f2f01[_0x40ea05(0x1c1)],'createdDate':_0x3f2f01[_0x40ea05(0x1b4)],'completedDate':_0x3f2f01['completedDate'],'successful':_0x3f2f01[_0x40ea05(0x1a6)],'failed':_0x3f2f01[_0x40ea05(0x1c6)]};return _0x2624b0?_0x3f2f01:_0x5dd4cf;}static async[a81_0x2bcd58(0x1eb)](_0x45cfde){const _0xf523b0=a81_0x2bcd58,_0x4ff59e=await this[_0xf523b0(0x1be)](_0x45cfde,job_1[_0xf523b0(0x1c7)],constants_1[_0xf523b0(0x1c5)]);return(0x0,sync_1[_0xf523b0(0x1e4)])(_0x4ff59e,{'columns':!![]});}static async[a81_0x2bcd58(0x1be)](_0x50f1e4,_0x40fd3e,_0x1db469){const _0x357ea0=a81_0x2bcd58,_0x366d83=(0x0,path_1[_0x357ea0(0x1ec)])(MaskingService['maskingFolderPath'],_0x50f1e4),_0x2a713b=(0x0,path_1[_0x357ea0(0x1ec)])(_0x366d83,_0x40fd3e);if(!await utils_1[_0x357ea0(0x1a7)][_0x357ea0(0x1dc)](_0x366d83))throw new not_found_error_1['NotFoundError'](_0x357ea0(0x1bd));if(!await utils_1[_0x357ea0(0x1a7)][_0x357ea0(0x1dc)](_0x2a713b))throw new not_found_error_1[(_0x357ea0(0x1bc))](_0x1db469+_0x357ea0(0x1b6));return(0x0,promises_1['readFile'])(_0x2a713b,{'encoding':_0x357ea0(0x1aa)});}static async['logErrorStartJob'](_0x56dd3c,_0x5767d5,_0x5fdffe){const _0x2aaf25=a81_0x2bcd58,_0x44e817=await new logger_job_state_1['LoggerJobState'](_0x56dd3c,_0x5767d5)[_0x2aaf25(0x1bb)]([]);_0x44e817[_0x2aaf25(0x1b7)](logger_enums_1[_0x2aaf25(0x1d1)][_0x2aaf25(0x1c8)]),_0x44e817['setJobError'](_0x5fdffe[_0x2aaf25(0x1cb)]),await _0x44e817[_0x2aaf25(0x1d5)]();}}function a81_0x2be9(){const _0x5ab664=['877940RfXHRI','getOwnPropertyDescriptor','init','NotFoundError','Job\x20Id\x20not\x20found.','getLog','logErrorStartJob','JOB_LOG_STATE_FILENAME','status','catch','prototype','DATA_MASKING_FOLDER_NAME','JOB_LOG_DETAILS_NAME','failed','JOB_LOG_DETAILS_FILENAME','FAILED','474717qbRtZx','8412978lxwpXn','message','dataPath','MaskingService','MANIFEST_FILENAME','(((.+)+)+)+$','684498MnGeEO','JobStatus','../job/enums/logger.enums','apply','writable','kill','../../shared/utils/fs.utils','createMaskingJob','__setModuleDefault','search','../../../constants/job','get','isExistsPath','getJobs','csv-parse/sync','toString','JOB_PATH','120EgsJPu','maskingFolderPath','generateJobId','parse','runJob','7252308UZDeJV','constructor','getJobState','stringify','@flosum/utils','getJobDetails','join','successful','FsUtils','fs/promises','1873442uExenP','utf-8','__esModule','push','../../shared/utils/job.utils','__createBinding','default','defineProperty','../../../core/errors/not-found.error','43113jeHOdi','../constants','createdDate','4VQcZGO','\x20not\x20found.','setJobStatus','getJobsIds'];a81_0x2be9=function(){return _0x5ab664;};return a81_0x2be9();}exports[a81_0x2bcd58(0x1cd)]=MaskingService,MaskingService[a81_0x2bcd58(0x1e2)]=path_1[a81_0x2bcd58(0x1af)][a81_0x2bcd58(0x1ec)](path_2[a81_0x2bcd58(0x1cc)],constants_1[a81_0x2bcd58(0x1c4)]);