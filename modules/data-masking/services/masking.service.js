const a81_0x4601c6=a81_0x59e7;(function(_0x2ea10f,_0x1dbca9){const _0x4b5e8d=a81_0x59e7,_0x4cb854=_0x2ea10f();while(!![]){try{const _0x35e214=-parseInt(_0x4b5e8d(0x178))/0x1*(parseInt(_0x4b5e8d(0x1a0))/0x2)+parseInt(_0x4b5e8d(0x17c))/0x3*(parseInt(_0x4b5e8d(0x1ab))/0x4)+-parseInt(_0x4b5e8d(0x198))/0x5+parseInt(_0x4b5e8d(0x16b))/0x6+-parseInt(_0x4b5e8d(0x197))/0x7*(parseInt(_0x4b5e8d(0x17b))/0x8)+-parseInt(_0x4b5e8d(0x164))/0x9+parseInt(_0x4b5e8d(0x196))/0xa;if(_0x35e214===_0x1dbca9)break;else _0x4cb854['push'](_0x4cb854['shift']());}catch(_0x13e542){_0x4cb854['push'](_0x4cb854['shift']());}}}(a81_0x4622,0xde83c));const a81_0x751220=(function(){let _0x382500=!![];return function(_0x44230d,_0x4d32d4){const _0x594e81=_0x382500?function(){const _0x401e44=a81_0x59e7;if(_0x4d32d4){const _0x5bc515=_0x4d32d4[_0x401e44(0x170)](_0x44230d,arguments);return _0x4d32d4=null,_0x5bc515;}}:function(){};return _0x382500=![],_0x594e81;};}()),a81_0x196cf1=a81_0x751220(this,function(){const _0x118d23=a81_0x59e7;return a81_0x196cf1[_0x118d23(0x1ac)]()['search'](_0x118d23(0x193))[_0x118d23(0x1ac)]()[_0x118d23(0x1a6)](a81_0x196cf1)['search'](_0x118d23(0x193));});a81_0x196cf1();function a81_0x59e7(_0x3bfc46,_0x334f42){const _0x580860=a81_0x4622();return a81_0x59e7=function(_0x196cf1,_0x751220){_0x196cf1=_0x196cf1-0x163;let _0x4622e8=_0x580860[_0x196cf1];return _0x4622e8;},a81_0x59e7(_0x3bfc46,_0x334f42);}'use strict';function a81_0x4622(){const _0x248da2=['4647639EZHBtl','stringify','successful','FsUtils','writable','completedDate','../../../core/errors/not-found.error','runJob','failed','LoggerJobState','createdDate','createMaskingJob','utf-8','csv-parse/sync','__setModuleDefault','configurable','getJobState','catch','logErrorStartJob','path','isExistsPath','join','setJobStatus','(((.+)+)+)+$','sortJobsIds','defineProperty','7563650LBsxKt','49ZogoaP','1725785ZLWgas','slice','dataPath','writeFile','MaskingService','status','init','push','3551854ylZlUW','NotFoundError','kill','__esModule','JOB_LOG_DETAILS_NAME','getJobsIds','constructor','hasOwnProperty','default','setJobError','../../shared/utils/fs.utils','4rLVJTH','toString','__importDefault','3446127WrblXj','__createBinding','getLog','message','maskingFolderPath','parse','JOB_PATH','9089976wHSLej','JOB_LOG_STATE_NAME','prototype','../job/enums/logger.enums','@flosum/utils','apply','getOwnPropertyDescriptor','../job/classes/logger/logger-job-state','MANIFEST_FILENAME','call','get','FAILED','../../shared/utils/job.utils','1mgvnRO','fs/promises','create','463048PTJCrR'];a81_0x4622=function(){return _0x248da2;};return a81_0x4622();}var __createBinding=this&&this[a81_0x4601c6(0x165)]||(Object['create']?function(_0x94f346,_0xe2fc0a,_0x5d02c8,_0x1e3526){const _0x5aab8d=a81_0x4601c6;if(_0x1e3526===undefined)_0x1e3526=_0x5d02c8;var _0x3b90a2=Object[_0x5aab8d(0x171)](_0xe2fc0a,_0x5d02c8);(!_0x3b90a2||(_0x5aab8d(0x175)in _0x3b90a2?!_0xe2fc0a['__esModule']:_0x3b90a2[_0x5aab8d(0x180)]||_0x3b90a2[_0x5aab8d(0x18b)]))&&(_0x3b90a2={'enumerable':!![],'get':function(){return _0xe2fc0a[_0x5d02c8];}}),Object['defineProperty'](_0x94f346,_0x1e3526,_0x3b90a2);}:function(_0x18a926,_0x2dcfc9,_0x32f72d,_0x309420){if(_0x309420===undefined)_0x309420=_0x32f72d;_0x18a926[_0x309420]=_0x2dcfc9[_0x32f72d];}),__setModuleDefault=this&&this[a81_0x4601c6(0x18a)]||(Object[a81_0x4601c6(0x17a)]?function(_0x120213,_0x9c994d){const _0x514f36=a81_0x4601c6;Object[_0x514f36(0x195)](_0x120213,_0x514f36(0x1a8),{'enumerable':!![],'value':_0x9c994d});}:function(_0x529311,_0x316d4d){const _0x46a129=a81_0x4601c6;_0x529311[_0x46a129(0x1a8)]=_0x316d4d;}),__importStar=this&&this['__importStar']||function(_0x44f798){const _0x36364c=a81_0x4601c6;if(_0x44f798&&_0x44f798[_0x36364c(0x1a3)])return _0x44f798;var _0x4c405a={};if(_0x44f798!=null){for(var _0x14fa57 in _0x44f798)if(_0x14fa57!==_0x36364c(0x1a8)&&Object[_0x36364c(0x16d)][_0x36364c(0x1a7)][_0x36364c(0x174)](_0x44f798,_0x14fa57))__createBinding(_0x4c405a,_0x44f798,_0x14fa57);}return __setModuleDefault(_0x4c405a,_0x44f798),_0x4c405a;},__importDefault=this&&this[a81_0x4601c6(0x163)]||function(_0x174b1d){return _0x174b1d&&_0x174b1d['__esModule']?_0x174b1d:{'default':_0x174b1d};};Object['defineProperty'](exports,a81_0x4601c6(0x1a3),{'value':!![]}),exports[a81_0x4601c6(0x19c)]=void 0x0;const path_1=__importStar(require(a81_0x4601c6(0x18f))),fs_utils_1=require(a81_0x4601c6(0x1aa)),promises_1=require(a81_0x4601c6(0x179)),logger_job_state_1=require(a81_0x4601c6(0x172)),logger_enums_1=require(a81_0x4601c6(0x16e)),sync_1=require(a81_0x4601c6(0x189)),utils_1=require(a81_0x4601c6(0x16f)),not_found_error_1=require(a81_0x4601c6(0x182)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a81_0x4601c6(0x177))),constants_1=require('../constants'),path_2=require('../../../configs/path');class MaskingService{static async[a81_0x4601c6(0x187)](_0x4bb509){const _0x2ad96e=a81_0x4601c6,_0x41fdca=job_utils_1[_0x2ad96e(0x1a8)]['generateJobId'](),_0x5eb917=(0x0,path_1[_0x2ad96e(0x191)])(MaskingService[_0x2ad96e(0x168)],_0x41fdca);await(0x0,fs_utils_1['makeDir'])(_0x5eb917),await(0x0,promises_1[_0x2ad96e(0x19b)])(_0x5eb917+'/'+job_1[_0x2ad96e(0x173)],JSON[_0x2ad96e(0x17d)]({'details':_0x4bb509}));const _0x27e8d8=await new logger_job_state_1[(_0x2ad96e(0x185))](_0x5eb917,_0x41fdca)[_0x2ad96e(0x19e)]([]);await _0x27e8d8[_0x2ad96e(0x1a2)]();const _0x32f4de=path_1[_0x2ad96e(0x1a8)][_0x2ad96e(0x191)](__dirname,job_1[_0x2ad96e(0x16a)]);return job_utils_1[_0x2ad96e(0x1a8)][_0x2ad96e(0x183)](_0x32f4de,{'jobStorePath':_0x5eb917,'jobId':_0x41fdca})[_0x2ad96e(0x18d)](_0x5c8120=>this[_0x2ad96e(0x18e)](_0x5eb917,_0x41fdca,_0x5c8120)),{'jobId':_0x41fdca};}static async['getJobs'](_0x30c9d7,_0x221037){const _0x432d8a=a81_0x4601c6,_0x75f436=await job_utils_1[_0x432d8a(0x1a8)][_0x432d8a(0x1a5)](MaskingService['maskingFolderPath']),_0x767ac4=await job_utils_1[_0x432d8a(0x1a8)][_0x432d8a(0x194)](MaskingService[_0x432d8a(0x168)],_0x75f436),_0x1d2bb7=_0x767ac4[_0x432d8a(0x199)](_0x221037,_0x221037+_0x30c9d7),_0x11d5ea=[];for(const _0x396a2e of _0x1d2bb7){const _0x5ee80f=await this[_0x432d8a(0x18c)](_0x396a2e,![]);_0x11d5ea[_0x432d8a(0x19f)](_0x5ee80f);}return _0x11d5ea;}static async[a81_0x4601c6(0x18c)](_0x4d4aeb,_0x1e69d3){const _0x154045=a81_0x4601c6,_0x301028=await this[_0x154045(0x166)](_0x4d4aeb,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x154045(0x16c)]),_0x326153=JSON[_0x154045(0x169)](_0x301028),_0x5b7bcf={'id':_0x326153['id'],'status':_0x326153[_0x154045(0x19d)],'createdDate':_0x326153[_0x154045(0x186)],'completedDate':_0x326153[_0x154045(0x181)],'successful':_0x326153[_0x154045(0x17e)],'failed':_0x326153[_0x154045(0x184)]};return _0x1e69d3?_0x326153:_0x5b7bcf;}static async['getJobDetails'](_0x13509e){const _0x4a165f=a81_0x4601c6,_0x4789ea=await this['getLog'](_0x13509e,job_1['JOB_LOG_DETAILS_FILENAME'],constants_1[_0x4a165f(0x1a4)]);return(0x0,sync_1[_0x4a165f(0x169)])(_0x4789ea,{'columns':!![]});}static async[a81_0x4601c6(0x166)](_0x13baa9,_0x362408,_0x2aa8c9){const _0x82038f=a81_0x4601c6,_0x3e3739=(0x0,path_1[_0x82038f(0x191)])(MaskingService[_0x82038f(0x168)],_0x13baa9),_0x9164ec=(0x0,path_1['join'])(_0x3e3739,_0x362408);if(!await utils_1[_0x82038f(0x17f)][_0x82038f(0x190)](_0x3e3739))throw new not_found_error_1[(_0x82038f(0x1a1))]('Job\x20Id\x20not\x20found.');if(!await utils_1['FsUtils']['isExistsPath'](_0x9164ec))throw new not_found_error_1['NotFoundError'](_0x2aa8c9+'\x20not\x20found.');return(0x0,promises_1['readFile'])(_0x9164ec,{'encoding':_0x82038f(0x188)});}static async['logErrorStartJob'](_0x386801,_0x2fedf6,_0x4af99b){const _0x5df815=a81_0x4601c6,_0x4a5e6c=await new logger_job_state_1[(_0x5df815(0x185))](_0x386801,_0x2fedf6)['init']([]);_0x4a5e6c[_0x5df815(0x192)](logger_enums_1['JobStatus'][_0x5df815(0x176)]),_0x4a5e6c[_0x5df815(0x1a9)](_0x4af99b[_0x5df815(0x167)]),await _0x4a5e6c[_0x5df815(0x1a2)]();}}exports['MaskingService']=MaskingService,MaskingService['maskingFolderPath']=path_1[a81_0x4601c6(0x1a8)]['join'](path_2[a81_0x4601c6(0x19a)],constants_1['DATA_MASKING_FOLDER_NAME']);