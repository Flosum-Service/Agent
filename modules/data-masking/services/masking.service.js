const a98_0x514b0c=a98_0x4c86;(function(_0x1fb4ee,_0x1714a2){const _0x32d115=a98_0x4c86,_0x332fae=_0x1fb4ee();while(!![]){try{const _0x2a99d4=-parseInt(_0x32d115(0x219))/0x1+parseInt(_0x32d115(0x215))/0x2*(parseInt(_0x32d115(0x200))/0x3)+-parseInt(_0x32d115(0x1fa))/0x4+parseInt(_0x32d115(0x1fb))/0x5*(-parseInt(_0x32d115(0x221))/0x6)+parseInt(_0x32d115(0x20e))/0x7+parseInt(_0x32d115(0x20d))/0x8+parseInt(_0x32d115(0x1f8))/0x9*(parseInt(_0x32d115(0x1ee))/0xa);if(_0x2a99d4===_0x1714a2)break;else _0x332fae['push'](_0x332fae['shift']());}catch(_0x2686bc){_0x332fae['push'](_0x332fae['shift']());}}}(a98_0x5190,0x5b586));const a98_0x1e5c3d=(function(){let _0x3ac787=!![];return function(_0x1c7267,_0x5b11be){const _0x1066c8=_0x3ac787?function(){const _0x1060a7=a98_0x4c86;if(_0x5b11be){const _0x38aef9=_0x5b11be[_0x1060a7(0x209)](_0x1c7267,arguments);return _0x5b11be=null,_0x38aef9;}}:function(){};return _0x3ac787=![],_0x1066c8;};}()),a98_0x4c3b78=a98_0x1e5c3d(this,function(){const _0x16f0f0=a98_0x4c86;return a98_0x4c3b78['toString']()[_0x16f0f0(0x1e7)](_0x16f0f0(0x228))[_0x16f0f0(0x210)]()[_0x16f0f0(0x22e)](a98_0x4c3b78)[_0x16f0f0(0x1e7)](_0x16f0f0(0x228));});a98_0x4c3b78();'use strict';var __createBinding=this&&this[a98_0x514b0c(0x203)]||(Object[a98_0x514b0c(0x224)]?function(_0x4afff1,_0x8dac6b,_0x4d4305,_0x29a6c2){const _0x1b4e95=a98_0x514b0c;if(_0x29a6c2===undefined)_0x29a6c2=_0x4d4305;var _0x177719=Object[_0x1b4e95(0x223)](_0x8dac6b,_0x4d4305);(!_0x177719||(_0x1b4e95(0x1e9)in _0x177719?!_0x8dac6b[_0x1b4e95(0x1e6)]:_0x177719['writable']||_0x177719[_0x1b4e95(0x1e2)]))&&(_0x177719={'enumerable':!![],'get':function(){return _0x8dac6b[_0x4d4305];}}),Object[_0x1b4e95(0x21b)](_0x4afff1,_0x29a6c2,_0x177719);}:function(_0x1fb668,_0x47bbd,_0x2877cc,_0xd6e783){if(_0xd6e783===undefined)_0xd6e783=_0x2877cc;_0x1fb668[_0xd6e783]=_0x47bbd[_0x2877cc];}),__setModuleDefault=this&&this[a98_0x514b0c(0x217)]||(Object[a98_0x514b0c(0x224)]?function(_0x1ef422,_0x11fac6){const _0x114593=a98_0x514b0c;Object[_0x114593(0x21b)](_0x1ef422,_0x114593(0x1fc),{'enumerable':!![],'value':_0x11fac6});}:function(_0x3204a3,_0x47186d){const _0x2ec4e2=a98_0x514b0c;_0x3204a3[_0x2ec4e2(0x1fc)]=_0x47186d;}),__importStar=this&&this['__importStar']||function(_0x4002c2){const _0x45a716=a98_0x514b0c;if(_0x4002c2&&_0x4002c2[_0x45a716(0x1e6)])return _0x4002c2;var _0x2c443c={};if(_0x4002c2!=null){for(var _0x37e35a in _0x4002c2)if(_0x37e35a!==_0x45a716(0x1fc)&&Object[_0x45a716(0x21c)][_0x45a716(0x1f7)][_0x45a716(0x208)](_0x4002c2,_0x37e35a))__createBinding(_0x2c443c,_0x4002c2,_0x37e35a);}return __setModuleDefault(_0x2c443c,_0x4002c2),_0x2c443c;},__importDefault=this&&this[a98_0x514b0c(0x214)]||function(_0x5896a4){const _0x52af76=a98_0x514b0c;return _0x5896a4&&_0x5896a4[_0x52af76(0x1e6)]?_0x5896a4:{'default':_0x5896a4};};Object[a98_0x514b0c(0x21b)](exports,a98_0x514b0c(0x1e6),{'value':!![]}),exports[a98_0x514b0c(0x1fd)]=void 0x0;const path_1=__importStar(require('path')),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a98_0x514b0c(0x222)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a98_0x514b0c(0x227)),sync_1=require(a98_0x514b0c(0x1f5)),utils_1=require(a98_0x514b0c(0x1ef)),not_found_error_1=require(a98_0x514b0c(0x21a)),job_1=require(a98_0x514b0c(0x216)),job_utils_1=__importDefault(require(a98_0x514b0c(0x226))),constants_1=require(a98_0x514b0c(0x1fe)),path_2=require(a98_0x514b0c(0x213));class MaskingService{static async[a98_0x514b0c(0x1e4)](_0x70c314){const _0x8376c4=a98_0x514b0c,_0x9995e9=job_utils_1['default'][_0x8376c4(0x21d)](),_0x5969c3=(0x0,path_1[_0x8376c4(0x1ec)])(MaskingService[_0x8376c4(0x1f1)],_0x9995e9);await(0x0,fs_utils_1['makeDir'])(_0x5969c3),await(0x0,promises_1['writeFile'])(_0x5969c3+'/'+job_1[_0x8376c4(0x202)],JSON[_0x8376c4(0x1f0)]({'details':_0x70c314}));const _0xaa0843=await new logger_job_state_1['LoggerJobState'](_0x5969c3,_0x9995e9)[_0x8376c4(0x207)]([]);await _0xaa0843[_0x8376c4(0x22c)]();const _0x41608a=path_1[_0x8376c4(0x1fc)]['join'](__dirname,job_1[_0x8376c4(0x1f3)]);return job_utils_1[_0x8376c4(0x1fc)][_0x8376c4(0x229)](_0x41608a,{'jobStorePath':_0x5969c3,'jobId':_0x9995e9})[_0x8376c4(0x20b)](_0xe80e91=>this[_0x8376c4(0x1e3)](_0x5969c3,_0x9995e9,_0xe80e91)),{'jobId':_0x9995e9};}static async[a98_0x514b0c(0x1f4)](_0x3d7f43,_0x509f46){const _0x3e3180=a98_0x514b0c,_0x320aa0=await job_utils_1['default'][_0x3e3180(0x1e8)](MaskingService[_0x3e3180(0x1f1)]),_0x252793=await job_utils_1['default'][_0x3e3180(0x205)](MaskingService[_0x3e3180(0x1f1)],_0x320aa0),_0x451e7b=_0x252793[_0x3e3180(0x20c)](_0x509f46,_0x509f46+_0x3d7f43),_0x9fd559=[];for(const _0x4a9e47 of _0x451e7b){const _0x2dcdca=await this[_0x3e3180(0x21f)](_0x4a9e47,![]);_0x9fd559[_0x3e3180(0x1f9)](_0x2dcdca);}return _0x9fd559;}static async[a98_0x514b0c(0x21f)](_0x2a834b,_0xd689e1){const _0x4ab2db=a98_0x514b0c,_0x5cde5f=await this['getLog'](_0x2a834b,job_1[_0x4ab2db(0x22a)],constants_1['JOB_LOG_STATE_NAME']),_0x304f5a=JSON['parse'](_0x5cde5f),_0x23cd3f={'id':_0x304f5a['id'],'status':_0x304f5a['status'],'createdDate':_0x304f5a[_0x4ab2db(0x211)],'completedDate':_0x304f5a[_0x4ab2db(0x220)],'successful':_0x304f5a[_0x4ab2db(0x1e1)],'failed':_0x304f5a[_0x4ab2db(0x20a)]};return _0xd689e1?_0x304f5a:_0x23cd3f;}static async[a98_0x514b0c(0x1e5)](_0x539cb9){const _0x3229c1=a98_0x514b0c,_0x40ace8=await this[_0x3229c1(0x1ff)](_0x539cb9,job_1[_0x3229c1(0x20f)],constants_1[_0x3229c1(0x218)]);return(0x0,sync_1[_0x3229c1(0x225)])(_0x40ace8,{'columns':!![]});}static async[a98_0x514b0c(0x1ff)](_0x1dfb16,_0x538a9a,_0xe52f86){const _0x5a1f14=a98_0x514b0c,_0x1b047f=(0x0,path_1[_0x5a1f14(0x1ec)])(MaskingService['maskingFolderPath'],_0x1dfb16),_0x4ba940=(0x0,path_1['join'])(_0x1b047f,_0x538a9a);if(!await utils_1[_0x5a1f14(0x204)]['isExistsPath'](_0x1b047f))throw new not_found_error_1[(_0x5a1f14(0x22d))](_0x5a1f14(0x1f2));if(!await utils_1[_0x5a1f14(0x204)][_0x5a1f14(0x21e)](_0x4ba940))throw new not_found_error_1[(_0x5a1f14(0x22d))](_0xe52f86+_0x5a1f14(0x212));return(0x0,promises_1[_0x5a1f14(0x1ed)])(_0x4ba940,{'encoding':_0x5a1f14(0x22b)});}static async[a98_0x514b0c(0x1e3)](_0x685ac3,_0x3f0ac7,_0x436b07){const _0x504dd0=a98_0x514b0c,_0x25d61f=await new logger_job_state_1[(_0x504dd0(0x206))](_0x685ac3,_0x3f0ac7)[_0x504dd0(0x207)]([]);_0x25d61f[_0x504dd0(0x201)](logger_enums_1['JobStatus'][_0x504dd0(0x1f6)]),_0x25d61f['setJobError'](_0x436b07['message']),await _0x25d61f[_0x504dd0(0x22c)]();}}function a98_0x5190(){const _0x248f01=['join','readFile','10QlQWco','@flosum/utils','stringify','maskingFolderPath','Job\x20Id\x20not\x20found.','JOB_PATH','getJobs','csv-parse/sync','FAILED','hasOwnProperty','5937264pRBZOW','push','782300orMNcV','1324405oPAcsd','default','MaskingService','../constants','getLog','421653LOqIxN','setJobStatus','MANIFEST_FILENAME','__createBinding','FsUtils','sortJobsIds','LoggerJobState','init','call','apply','failed','catch','slice','738344zaBvGo','2427019HwAtvg','JOB_LOG_DETAILS_FILENAME','toString','createdDate','\x20not\x20found.','../../../configs/path','__importDefault','4rBrxUA','../../../constants/job','__setModuleDefault','JOB_LOG_DETAILS_NAME','545202UTZAZI','../../../core/errors/not-found.error','defineProperty','prototype','generateJobId','isExistsPath','getJobState','completedDate','6RIYPRv','fs/promises','getOwnPropertyDescriptor','create','parse','../../shared/utils/job.utils','../job/enums/logger.enums','(((.+)+)+)+$','runJob','JOB_LOG_STATE_FILENAME','utf-8','kill','NotFoundError','constructor','successful','configurable','logErrorStartJob','createMaskingJob','getJobDetails','__esModule','search','getJobsIds','get','dataPath','DATA_MASKING_FOLDER_NAME'];a98_0x5190=function(){return _0x248f01;};return a98_0x5190();}function a98_0x4c86(_0x458315,_0x3e5873){const _0x571f2f=a98_0x5190();return a98_0x4c86=function(_0x4c3b78,_0x1e5c3d){_0x4c3b78=_0x4c3b78-0x1e1;let _0x519072=_0x571f2f[_0x4c3b78];return _0x519072;},a98_0x4c86(_0x458315,_0x3e5873);}exports['MaskingService']=MaskingService,MaskingService[a98_0x514b0c(0x1f1)]=path_1[a98_0x514b0c(0x1fc)]['join'](path_2[a98_0x514b0c(0x1ea)],constants_1[a98_0x514b0c(0x1eb)]);