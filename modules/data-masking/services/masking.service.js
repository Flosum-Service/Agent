const a98_0x2970a6=a98_0x4b55;function a98_0x3350(){const _0x1cb72f=['../job/enums/logger.enums','3146274TlOydW','../../shared/utils/job.utils','parse','stringify','maskingFolderPath','csv-parse/sync','sortJobsIds','readFile','setJobStatus','failed','2211310XVHGwL','kill','5028KegUmO','FAILED','JOB_PATH','MANIFEST_FILENAME','get','default','makeDir','configurable','(((.+)+)+)+$','writeFile','DATA_MASKING_FOLDER_NAME','create','60NIwekn','254CKuiKZ','path','JOB_LOG_STATE_NAME','JobStatus','__setModuleDefault','defineProperty','Job\x20Id\x20not\x20found.','search','completedDate','getLog','message','__esModule','runJob','../../../constants/job','utf-8','FsUtils','dataPath','successful','102GiGyNz','305734pOeaYf','9795OjYvnF','getJobsIds','3591688SHdyUX','../job/classes/logger/logger-job-state','NotFoundError','../constants','createdDate','LoggerJobState','MaskingService','isExistsPath','__importDefault','__importStar','init','logErrorStartJob','status','getJobState','hasOwnProperty','join','getOwnPropertyDescriptor','toString','__createBinding','27377BVnfhJ','writable','push','22TKbdgL','constructor','getJobs','JOB_LOG_DETAILS_FILENAME'];a98_0x3350=function(){return _0x1cb72f;};return a98_0x3350();}(function(_0x3b3aa6,_0x8e2d09){const _0xfcd63b=a98_0x4b55,_0x1769e=_0x3b3aa6();while(!![]){try{const _0x10fe40=-parseInt(_0xfcd63b(0x135))/0x1+parseInt(_0xfcd63b(0x122))/0x2*(parseInt(_0xfcd63b(0x115))/0x3)+-parseInt(_0xfcd63b(0x121))/0x4*(-parseInt(_0xfcd63b(0x136))/0x5)+-parseInt(_0xfcd63b(0x134))/0x6*(parseInt(_0xfcd63b(0x14b))/0x7)+parseInt(_0xfcd63b(0x138))/0x8+parseInt(_0xfcd63b(0x153))/0x9+-parseInt(_0xfcd63b(0x113))/0xa*(parseInt(_0xfcd63b(0x14e))/0xb);if(_0x10fe40===_0x8e2d09)break;else _0x1769e['push'](_0x1769e['shift']());}catch(_0x54670e){_0x1769e['push'](_0x1769e['shift']());}}}(a98_0x3350,0x373fd));function a98_0x4b55(_0x307fbc,_0x2a0a71){const _0x5af9cc=a98_0x3350();return a98_0x4b55=function(_0x46e6f1,_0x104cfc){_0x46e6f1=_0x46e6f1-0x10a;let _0x33505c=_0x5af9cc[_0x46e6f1];return _0x33505c;},a98_0x4b55(_0x307fbc,_0x2a0a71);}const a98_0x104cfc=(function(){let _0x21e65a=!![];return function(_0x3ebfe3,_0xf7964){const _0x3be5cd=_0x21e65a?function(){if(_0xf7964){const _0x21f052=_0xf7964['apply'](_0x3ebfe3,arguments);return _0xf7964=null,_0x21f052;}}:function(){};return _0x21e65a=![],_0x3be5cd;};}()),a98_0x46e6f1=a98_0x104cfc(this,function(){const _0x599f1c=a98_0x4b55;return a98_0x46e6f1[_0x599f1c(0x149)]()['search'](_0x599f1c(0x11d))['toString']()[_0x599f1c(0x14f)](a98_0x46e6f1)[_0x599f1c(0x129)](_0x599f1c(0x11d));});a98_0x46e6f1();'use strict';var __createBinding=this&&this[a98_0x2970a6(0x14a)]||(Object[a98_0x2970a6(0x120)]?function(_0x550ca0,_0x50ca10,_0x4317a3,_0x53c37d){const _0x121e9c=a98_0x2970a6;if(_0x53c37d===undefined)_0x53c37d=_0x4317a3;var _0x5566fb=Object[_0x121e9c(0x148)](_0x50ca10,_0x4317a3);(!_0x5566fb||(_0x121e9c(0x119)in _0x5566fb?!_0x50ca10[_0x121e9c(0x12d)]:_0x5566fb[_0x121e9c(0x14c)]||_0x5566fb[_0x121e9c(0x11c)]))&&(_0x5566fb={'enumerable':!![],'get':function(){return _0x50ca10[_0x4317a3];}}),Object[_0x121e9c(0x127)](_0x550ca0,_0x53c37d,_0x5566fb);}:function(_0x280673,_0x2e4733,_0xa69d46,_0x52fb31){if(_0x52fb31===undefined)_0x52fb31=_0xa69d46;_0x280673[_0x52fb31]=_0x2e4733[_0xa69d46];}),__setModuleDefault=this&&this[a98_0x2970a6(0x126)]||(Object[a98_0x2970a6(0x120)]?function(_0x47386a,_0x2b8dc4){const _0x52dc30=a98_0x2970a6;Object['defineProperty'](_0x47386a,_0x52dc30(0x11a),{'enumerable':!![],'value':_0x2b8dc4});}:function(_0x539c44,_0x165924){const _0x2ad600=a98_0x2970a6;_0x539c44[_0x2ad600(0x11a)]=_0x165924;}),__importStar=this&&this[a98_0x2970a6(0x141)]||function(_0xdb7896){const _0x318f94=a98_0x2970a6;if(_0xdb7896&&_0xdb7896['__esModule'])return _0xdb7896;var _0x2fc966={};if(_0xdb7896!=null){for(var _0x4edc05 in _0xdb7896)if(_0x4edc05!==_0x318f94(0x11a)&&Object['prototype'][_0x318f94(0x146)]['call'](_0xdb7896,_0x4edc05))__createBinding(_0x2fc966,_0xdb7896,_0x4edc05);}return __setModuleDefault(_0x2fc966,_0xdb7896),_0x2fc966;},__importDefault=this&&this[a98_0x2970a6(0x140)]||function(_0x37d4ec){const _0x2e0bdb=a98_0x2970a6;return _0x37d4ec&&_0x37d4ec[_0x2e0bdb(0x12d)]?_0x37d4ec:{'default':_0x37d4ec};};Object[a98_0x2970a6(0x127)](exports,'__esModule',{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a98_0x2970a6(0x123))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require('fs/promises'),logger_job_state_1=require(a98_0x2970a6(0x139)),logger_enums_1=require(a98_0x2970a6(0x152)),sync_1=require(a98_0x2970a6(0x10e)),utils_1=require('@flosum/utils'),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a98_0x2970a6(0x12f)),job_utils_1=__importDefault(require(a98_0x2970a6(0x10a))),constants_1=require(a98_0x2970a6(0x13b)),path_2=require('../../../configs/path');class MaskingService{static async['createMaskingJob'](_0x14c871){const _0x2e8170=a98_0x2970a6,_0x4d1bf6=job_utils_1[_0x2e8170(0x11a)]['generateJobId'](),_0x459b1a=(0x0,path_1[_0x2e8170(0x147)])(MaskingService[_0x2e8170(0x10d)],_0x4d1bf6);await(0x0,fs_utils_1[_0x2e8170(0x11b)])(_0x459b1a),await(0x0,promises_1[_0x2e8170(0x11e)])(_0x459b1a+'/'+job_1[_0x2e8170(0x118)],JSON[_0x2e8170(0x10c)]({'details':_0x14c871}));const _0x290b06=await new logger_job_state_1[(_0x2e8170(0x13d))](_0x459b1a,_0x4d1bf6)['init']([]);await _0x290b06['kill']();const _0x52784f=path_1['default']['join'](__dirname,job_1[_0x2e8170(0x117)]);return job_utils_1['default'][_0x2e8170(0x12e)](_0x52784f,{'jobStorePath':_0x459b1a,'jobId':_0x4d1bf6})['catch'](_0x59deae=>this[_0x2e8170(0x143)](_0x459b1a,_0x4d1bf6,_0x59deae)),{'jobId':_0x4d1bf6};}static async[a98_0x2970a6(0x150)](_0x190d58,_0x26f6c4){const _0x458131=a98_0x2970a6,_0x34166f=await job_utils_1[_0x458131(0x11a)][_0x458131(0x137)](MaskingService[_0x458131(0x10d)]),_0x55de55=await job_utils_1[_0x458131(0x11a)][_0x458131(0x10f)](MaskingService['maskingFolderPath'],_0x34166f),_0x27bfa6=_0x55de55['slice'](_0x26f6c4,_0x26f6c4+_0x190d58),_0x119df5=[];for(const _0x11ab90 of _0x27bfa6){const _0x353be4=await this[_0x458131(0x145)](_0x11ab90,![]);_0x119df5[_0x458131(0x14d)](_0x353be4);}return _0x119df5;}static async[a98_0x2970a6(0x145)](_0x12677e,_0x19e98d){const _0x478211=a98_0x2970a6,_0x13875d=await this['getLog'](_0x12677e,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x478211(0x124)]),_0x402d60=JSON['parse'](_0x13875d),_0x4b8f42={'id':_0x402d60['id'],'status':_0x402d60[_0x478211(0x144)],'createdDate':_0x402d60[_0x478211(0x13c)],'completedDate':_0x402d60[_0x478211(0x12a)],'successful':_0x402d60[_0x478211(0x133)],'failed':_0x402d60[_0x478211(0x112)]};return _0x19e98d?_0x402d60:_0x4b8f42;}static async['getJobDetails'](_0x216c39){const _0x5a9dfe=a98_0x2970a6,_0x17477b=await this[_0x5a9dfe(0x12b)](_0x216c39,job_1[_0x5a9dfe(0x151)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0x5a9dfe(0x10b)])(_0x17477b,{'columns':!![]});}static async[a98_0x2970a6(0x12b)](_0x36fa1b,_0x34bb0a,_0x2ef18c){const _0x473f28=a98_0x2970a6,_0x229efb=(0x0,path_1['join'])(MaskingService['maskingFolderPath'],_0x36fa1b),_0x4adb05=(0x0,path_1[_0x473f28(0x147)])(_0x229efb,_0x34bb0a);if(!await utils_1[_0x473f28(0x131)]['isExistsPath'](_0x229efb))throw new not_found_error_1[(_0x473f28(0x13a))](_0x473f28(0x128));if(!await utils_1[_0x473f28(0x131)][_0x473f28(0x13f)](_0x4adb05))throw new not_found_error_1['NotFoundError'](_0x2ef18c+'\x20not\x20found.');return(0x0,promises_1[_0x473f28(0x110)])(_0x4adb05,{'encoding':_0x473f28(0x130)});}static async['logErrorStartJob'](_0x2f6a71,_0x4d23ff,_0x1f33db){const _0xebef0b=a98_0x2970a6,_0xc9fa10=await new logger_job_state_1[(_0xebef0b(0x13d))](_0x2f6a71,_0x4d23ff)[_0xebef0b(0x142)]([]);_0xc9fa10[_0xebef0b(0x111)](logger_enums_1[_0xebef0b(0x125)][_0xebef0b(0x116)]),_0xc9fa10['setJobError'](_0x1f33db[_0xebef0b(0x12c)]),await _0xc9fa10[_0xebef0b(0x114)]();}}exports[a98_0x2970a6(0x13e)]=MaskingService,MaskingService[a98_0x2970a6(0x10d)]=path_1[a98_0x2970a6(0x11a)][a98_0x2970a6(0x147)](path_2[a98_0x2970a6(0x132)],constants_1[a98_0x2970a6(0x11f)]);