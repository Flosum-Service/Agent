const a98_0x2e2f5c=a98_0x1781;(function(_0x2a703e,_0x435606){const _0x1027e7=a98_0x1781,_0x2203b6=_0x2a703e();while(!![]){try{const _0x145ad8=-parseInt(_0x1027e7(0x119))/0x1+-parseInt(_0x1027e7(0x107))/0x2*(parseInt(_0x1027e7(0x110))/0x3)+-parseInt(_0x1027e7(0xe2))/0x4*(parseInt(_0x1027e7(0x104))/0x5)+parseInt(_0x1027e7(0x111))/0x6*(parseInt(_0x1027e7(0xf1))/0x7)+parseInt(_0x1027e7(0xf3))/0x8+-parseInt(_0x1027e7(0xf7))/0x9+parseInt(_0x1027e7(0x121))/0xa*(parseInt(_0x1027e7(0xf0))/0xb);if(_0x145ad8===_0x435606)break;else _0x2203b6['push'](_0x2203b6['shift']());}catch(_0x2dead1){_0x2203b6['push'](_0x2203b6['shift']());}}}(a98_0x5b1d,0x19a6f));const a98_0x5547cc=(function(){let _0x172ce6=!![];return function(_0x172602,_0x57b05d){const _0x3c7c15=_0x172ce6?function(){const _0xe151cc=a98_0x1781;if(_0x57b05d){const _0x4e57c4=_0x57b05d[_0xe151cc(0xdd)](_0x172602,arguments);return _0x57b05d=null,_0x4e57c4;}}:function(){};return _0x172ce6=![],_0x3c7c15;};}()),a98_0x4ce8fb=a98_0x5547cc(this,function(){const _0x4fd8ea=a98_0x1781;return a98_0x4ce8fb[_0x4fd8ea(0xea)]()[_0x4fd8ea(0x103)](_0x4fd8ea(0x105))[_0x4fd8ea(0xea)]()[_0x4fd8ea(0x116)](a98_0x4ce8fb)[_0x4fd8ea(0x103)]('(((.+)+)+)+$');});function a98_0x5b1d(){const _0x5d463b=['getJobState','path','122754MWUYxc','getLog','isExistsPath','JOB_PATH','MANIFEST_FILENAME','csv-parse/sync','stringify','create','54770oelsMS','../../../constants/job','sortJobsIds','defineProperty','completedDate','apply','NotFoundError','kill','../constants','../../shared/utils/job.utils','12IavtAt','JOB_LOG_DETAILS_FILENAME','writeFile','join','__setModuleDefault','getJobsIds','get','call','toString','successful','JOB_LOG_STATE_FILENAME','../../../core/errors/not-found.error','default','Job\x20Id\x20not\x20found.','913BkDghb','742EbFauG','../../../configs/path','117216dwMxMk','utf-8','runJob','FAILED','1693692QaANYu','__importDefault','../job/enums/logger.enums','FsUtils','configurable','createMaskingJob','__createBinding','JOB_LOG_DETAILS_NAME','setJobStatus','getJobs','setJobError','push','search','99485yZLLTe','(((.+)+)+)+$','dataPath','2bAXcgn','makeDir','parse','createdDate','message','MaskingService','DATA_MASKING_FOLDER_NAME','__esModule','../job/classes/logger/logger-job-state','234699ukFcaY','4794bnStPm','readFile','LoggerJobState','catch','maskingFolderPath','constructor'];a98_0x5b1d=function(){return _0x5d463b;};return a98_0x5b1d();}function a98_0x1781(_0x2e7049,_0x27d9ea){const _0x3d531b=a98_0x5b1d();return a98_0x1781=function(_0x4ce8fb,_0x5547cc){_0x4ce8fb=_0x4ce8fb-0xda;let _0x5b1d3e=_0x3d531b[_0x4ce8fb];return _0x5b1d3e;},a98_0x1781(_0x2e7049,_0x27d9ea);}a98_0x4ce8fb();'use strict';var __createBinding=this&&this[a98_0x2e2f5c(0xfd)]||(Object[a98_0x2e2f5c(0x120)]?function(_0x2b9b97,_0x357cc6,_0x1f4fb5,_0x1c742b){const _0x2faab4=a98_0x2e2f5c;if(_0x1c742b===undefined)_0x1c742b=_0x1f4fb5;var _0x54289c=Object['getOwnPropertyDescriptor'](_0x357cc6,_0x1f4fb5);(!_0x54289c||(_0x2faab4(0xe8)in _0x54289c?!_0x357cc6[_0x2faab4(0x10e)]:_0x54289c['writable']||_0x54289c[_0x2faab4(0xfb)]))&&(_0x54289c={'enumerable':!![],'get':function(){return _0x357cc6[_0x1f4fb5];}}),Object[_0x2faab4(0xdb)](_0x2b9b97,_0x1c742b,_0x54289c);}:function(_0x34e2bb,_0x260990,_0x14d7cb,_0x2cb098){if(_0x2cb098===undefined)_0x2cb098=_0x14d7cb;_0x34e2bb[_0x2cb098]=_0x260990[_0x14d7cb];}),__setModuleDefault=this&&this[a98_0x2e2f5c(0xe6)]||(Object[a98_0x2e2f5c(0x120)]?function(_0x20ea41,_0x1b5481){const _0x5c2edd=a98_0x2e2f5c;Object[_0x5c2edd(0xdb)](_0x20ea41,_0x5c2edd(0xee),{'enumerable':!![],'value':_0x1b5481});}:function(_0x18f921,_0x15e603){const _0x20aa70=a98_0x2e2f5c;_0x18f921[_0x20aa70(0xee)]=_0x15e603;}),__importStar=this&&this['__importStar']||function(_0x53db2d){const _0x13b068=a98_0x2e2f5c;if(_0x53db2d&&_0x53db2d[_0x13b068(0x10e)])return _0x53db2d;var _0x572829={};if(_0x53db2d!=null){for(var _0x1cb4ae in _0x53db2d)if(_0x1cb4ae!==_0x13b068(0xee)&&Object['prototype']['hasOwnProperty'][_0x13b068(0xe9)](_0x53db2d,_0x1cb4ae))__createBinding(_0x572829,_0x53db2d,_0x1cb4ae);}return __setModuleDefault(_0x572829,_0x53db2d),_0x572829;},__importDefault=this&&this[a98_0x2e2f5c(0xf8)]||function(_0x4956c9){return _0x4956c9&&_0x4956c9['__esModule']?_0x4956c9:{'default':_0x4956c9};};Object[a98_0x2e2f5c(0xdb)](exports,'__esModule',{'value':!![]}),exports[a98_0x2e2f5c(0x10c)]=void 0x0;const path_1=__importStar(require(a98_0x2e2f5c(0x118))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require('fs/promises'),logger_job_state_1=require(a98_0x2e2f5c(0x10f)),logger_enums_1=require(a98_0x2e2f5c(0xf9)),sync_1=require(a98_0x2e2f5c(0x11e)),utils_1=require('@flosum/utils'),not_found_error_1=require(a98_0x2e2f5c(0xed)),job_1=require(a98_0x2e2f5c(0x122)),job_utils_1=__importDefault(require(a98_0x2e2f5c(0xe1))),constants_1=require(a98_0x2e2f5c(0xe0)),path_2=require(a98_0x2e2f5c(0xf2));class MaskingService{static async[a98_0x2e2f5c(0xfc)](_0x27168e){const _0x5865f9=a98_0x2e2f5c,_0x593c76=job_utils_1[_0x5865f9(0xee)]['generateJobId'](),_0x5f494a=(0x0,path_1[_0x5865f9(0xe5)])(MaskingService[_0x5865f9(0x115)],_0x593c76);await(0x0,fs_utils_1[_0x5865f9(0x108)])(_0x5f494a),await(0x0,promises_1[_0x5865f9(0xe4)])(_0x5f494a+'/'+job_1[_0x5865f9(0x11d)],JSON[_0x5865f9(0x11f)]({'details':_0x27168e}));const _0x6cf533=await new logger_job_state_1[(_0x5865f9(0x113))](_0x5f494a,_0x593c76)['init']([]);await _0x6cf533[_0x5865f9(0xdf)]();const _0x40df86=path_1[_0x5865f9(0xee)][_0x5865f9(0xe5)](__dirname,job_1[_0x5865f9(0x11c)]);return job_utils_1['default'][_0x5865f9(0xf5)](_0x40df86,{'jobStorePath':_0x5f494a,'jobId':_0x593c76})[_0x5865f9(0x114)](_0x571c62=>this['logErrorStartJob'](_0x5f494a,_0x593c76,_0x571c62)),{'jobId':_0x593c76};}static async[a98_0x2e2f5c(0x100)](_0x3e981d,_0x5fa941){const _0x535bfb=a98_0x2e2f5c,_0x2f4b0f=await job_utils_1['default'][_0x535bfb(0xe7)](MaskingService[_0x535bfb(0x115)]),_0x41c0e2=await job_utils_1[_0x535bfb(0xee)][_0x535bfb(0xda)](MaskingService[_0x535bfb(0x115)],_0x2f4b0f),_0x57e076=_0x41c0e2['slice'](_0x5fa941,_0x5fa941+_0x3e981d),_0x251490=[];for(const _0xa4c8b2 of _0x57e076){const _0x17ec3c=await this[_0x535bfb(0x117)](_0xa4c8b2,![]);_0x251490[_0x535bfb(0x102)](_0x17ec3c);}return _0x251490;}static async[a98_0x2e2f5c(0x117)](_0x2ce59a,_0x4538b5){const _0x33b8fd=a98_0x2e2f5c,_0x18c98a=await this['getLog'](_0x2ce59a,job_1[_0x33b8fd(0xec)],constants_1['JOB_LOG_STATE_NAME']),_0x1b72b5=JSON[_0x33b8fd(0x109)](_0x18c98a),_0x418976={'id':_0x1b72b5['id'],'status':_0x1b72b5['status'],'createdDate':_0x1b72b5[_0x33b8fd(0x10a)],'completedDate':_0x1b72b5[_0x33b8fd(0xdc)],'successful':_0x1b72b5[_0x33b8fd(0xeb)],'failed':_0x1b72b5['failed']};return _0x4538b5?_0x1b72b5:_0x418976;}static async['getJobDetails'](_0x5aa8ea){const _0x56d52c=a98_0x2e2f5c,_0x542e35=await this[_0x56d52c(0x11a)](_0x5aa8ea,job_1[_0x56d52c(0xe3)],constants_1[_0x56d52c(0xfe)]);return(0x0,sync_1[_0x56d52c(0x109)])(_0x542e35,{'columns':!![]});}static async[a98_0x2e2f5c(0x11a)](_0x3d69d7,_0x26e5ac,_0x3e2062){const _0x3c38bc=a98_0x2e2f5c,_0x1954d2=(0x0,path_1['join'])(MaskingService[_0x3c38bc(0x115)],_0x3d69d7),_0x4c63b8=(0x0,path_1[_0x3c38bc(0xe5)])(_0x1954d2,_0x26e5ac);if(!await utils_1[_0x3c38bc(0xfa)][_0x3c38bc(0x11b)](_0x1954d2))throw new not_found_error_1[(_0x3c38bc(0xde))](_0x3c38bc(0xef));if(!await utils_1[_0x3c38bc(0xfa)][_0x3c38bc(0x11b)](_0x4c63b8))throw new not_found_error_1[(_0x3c38bc(0xde))](_0x3e2062+'\x20not\x20found.');return(0x0,promises_1[_0x3c38bc(0x112)])(_0x4c63b8,{'encoding':_0x3c38bc(0xf4)});}static async['logErrorStartJob'](_0x28feea,_0x41530b,_0x2fe69f){const _0x8cfd55=a98_0x2e2f5c,_0x492309=await new logger_job_state_1[(_0x8cfd55(0x113))](_0x28feea,_0x41530b)['init']([]);_0x492309[_0x8cfd55(0xff)](logger_enums_1['JobStatus'][_0x8cfd55(0xf6)]),_0x492309[_0x8cfd55(0x101)](_0x2fe69f[_0x8cfd55(0x10b)]),await _0x492309['kill']();}}exports[a98_0x2e2f5c(0x10c)]=MaskingService,MaskingService[a98_0x2e2f5c(0x115)]=path_1[a98_0x2e2f5c(0xee)][a98_0x2e2f5c(0xe5)](path_2[a98_0x2e2f5c(0x106)],constants_1[a98_0x2e2f5c(0x10d)]);