function a81_0x4c9e(_0x5eddbd,_0x532327){const _0x1a1402=a81_0x1216();return a81_0x4c9e=function(_0x1bba06,_0x4bc7e5){_0x1bba06=_0x1bba06-0x98;let _0x1216f9=_0x1a1402[_0x1bba06];return _0x1216f9;},a81_0x4c9e(_0x5eddbd,_0x532327);}const a81_0x4d1b37=a81_0x4c9e;(function(_0xbbf06a,_0x81efa6){const _0x2ac1c1=a81_0x4c9e,_0x312928=_0xbbf06a();while(!![]){try{const _0x81e268=-parseInt(_0x2ac1c1(0xc0))/0x1+parseInt(_0x2ac1c1(0xcc))/0x2+parseInt(_0x2ac1c1(0x9c))/0x3+parseInt(_0x2ac1c1(0xa1))/0x4*(parseInt(_0x2ac1c1(0xcb))/0x5)+parseInt(_0x2ac1c1(0xcd))/0x6+parseInt(_0x2ac1c1(0xb2))/0x7*(-parseInt(_0x2ac1c1(0xd7))/0x8)+-parseInt(_0x2ac1c1(0x9f))/0x9;if(_0x81e268===_0x81efa6)break;else _0x312928['push'](_0x312928['shift']());}catch(_0x1803a4){_0x312928['push'](_0x312928['shift']());}}}(a81_0x1216,0xe1289));const a81_0x4bc7e5=(function(){let _0x43e77e=!![];return function(_0x2d45ce,_0x2479b5){const _0x2d186e=_0x43e77e?function(){if(_0x2479b5){const _0x3a5e74=_0x2479b5['apply'](_0x2d45ce,arguments);return _0x2479b5=null,_0x3a5e74;}}:function(){};return _0x43e77e=![],_0x2d186e;};}()),a81_0x1bba06=a81_0x4bc7e5(this,function(){const _0x35dd4e=a81_0x4c9e;return a81_0x1bba06[_0x35dd4e(0xda)]()['search'](_0x35dd4e(0xb5))[_0x35dd4e(0xda)]()[_0x35dd4e(0xac)](a81_0x1bba06)[_0x35dd4e(0x9e)](_0x35dd4e(0xb5));});a81_0x1bba06();'use strict';var __createBinding=this&&this[a81_0x4d1b37(0xab)]||(Object[a81_0x4d1b37(0xbb)]?function(_0x123f4d,_0x839f0b,_0x5d469f,_0x35a8c1){const _0x9f3280=a81_0x4d1b37;if(_0x35a8c1===undefined)_0x35a8c1=_0x5d469f;var _0x3bc520=Object[_0x9f3280(0xa6)](_0x839f0b,_0x5d469f);(!_0x3bc520||(_0x9f3280(0xc1)in _0x3bc520?!_0x839f0b[_0x9f3280(0xce)]:_0x3bc520[_0x9f3280(0xe1)]||_0x3bc520[_0x9f3280(0xd2)]))&&(_0x3bc520={'enumerable':!![],'get':function(){return _0x839f0b[_0x5d469f];}}),Object[_0x9f3280(0xad)](_0x123f4d,_0x35a8c1,_0x3bc520);}:function(_0x272764,_0x10fce1,_0x45d250,_0x38a6da){if(_0x38a6da===undefined)_0x38a6da=_0x45d250;_0x272764[_0x38a6da]=_0x10fce1[_0x45d250];}),__setModuleDefault=this&&this[a81_0x4d1b37(0xdd)]||(Object[a81_0x4d1b37(0xbb)]?function(_0x53e15e,_0x4b4c03){const _0x4fb3bb=a81_0x4d1b37;Object[_0x4fb3bb(0xad)](_0x53e15e,'default',{'enumerable':!![],'value':_0x4b4c03});}:function(_0x3ed9bb,_0x1e3519){const _0x36931f=a81_0x4d1b37;_0x3ed9bb[_0x36931f(0xbd)]=_0x1e3519;}),__importStar=this&&this[a81_0x4d1b37(0xd3)]||function(_0x1ff130){const _0x408b64=a81_0x4d1b37;if(_0x1ff130&&_0x1ff130[_0x408b64(0xce)])return _0x1ff130;var _0x580445={};if(_0x1ff130!=null){for(var _0x36c9b9 in _0x1ff130)if(_0x36c9b9!==_0x408b64(0xbd)&&Object[_0x408b64(0xc3)][_0x408b64(0xbe)][_0x408b64(0xc5)](_0x1ff130,_0x36c9b9))__createBinding(_0x580445,_0x1ff130,_0x36c9b9);}return __setModuleDefault(_0x580445,_0x1ff130),_0x580445;},__importDefault=this&&this[a81_0x4d1b37(0xae)]||function(_0xaf30c8){const _0x21aaa8=a81_0x4d1b37;return _0xaf30c8&&_0xaf30c8[_0x21aaa8(0xce)]?_0xaf30c8:{'default':_0xaf30c8};};Object[a81_0x4d1b37(0xad)](exports,a81_0x4d1b37(0xce),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a81_0x4d1b37(0xdc))),fs_utils_1=require(a81_0x4d1b37(0xdf)),promises_1=require('fs/promises'),logger_job_state_1=require(a81_0x4d1b37(0x9d)),logger_enums_1=require(a81_0x4d1b37(0xba)),sync_1=require(a81_0x4d1b37(0xa8)),utils_1=require('@flosum/utils'),not_found_error_1=require(a81_0x4d1b37(0xc4)),job_1=require(a81_0x4d1b37(0xc7)),job_utils_1=__importDefault(require(a81_0x4d1b37(0xd5))),constants_1=require(a81_0x4d1b37(0xb8)),path_2=require('../../../configs/path');class MaskingService{static async[a81_0x4d1b37(0xd8)](_0x41b7e3){const _0x3d9fc3=a81_0x4d1b37,_0x5cad18=job_utils_1[_0x3d9fc3(0xbd)]['generateJobId'](),_0x4838ed=(0x0,path_1[_0x3d9fc3(0xa0)])(MaskingService[_0x3d9fc3(0xb1)],_0x5cad18);await(0x0,fs_utils_1[_0x3d9fc3(0xc9)])(_0x4838ed),await(0x0,promises_1[_0x3d9fc3(0xc2)])(_0x4838ed+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x3d9fc3(0xb0)]({'details':_0x41b7e3}));const _0x2ca6c0=await new logger_job_state_1[(_0x3d9fc3(0xd0))](_0x4838ed,_0x5cad18)[_0x3d9fc3(0x9b)]([]);await _0x2ca6c0[_0x3d9fc3(0x9a)]();const _0x4faaaf=path_1[_0x3d9fc3(0xbd)][_0x3d9fc3(0xa0)](__dirname,job_1[_0x3d9fc3(0xc6)]);return job_utils_1[_0x3d9fc3(0xbd)]['runJob'](_0x4faaaf,{'jobStorePath':_0x4838ed,'jobId':_0x5cad18})[_0x3d9fc3(0xe2)](_0x5a640c=>this[_0x3d9fc3(0x98)](_0x4838ed,_0x5cad18,_0x5a640c)),{'jobId':_0x5cad18};}static async[a81_0x4d1b37(0xd9)](_0x3b0172,_0x202420){const _0xa09a1=a81_0x4d1b37,_0x3fa63b=await job_utils_1[_0xa09a1(0xbd)][_0xa09a1(0xb4)](MaskingService[_0xa09a1(0xb1)]),_0x5dd011=await job_utils_1[_0xa09a1(0xbd)][_0xa09a1(0xa5)](MaskingService[_0xa09a1(0xb1)],_0x3fa63b),_0x229805=_0x5dd011['slice'](_0x202420,_0x202420+_0x3b0172),_0xb62d30=[];for(const _0xd8231c of _0x229805){const _0x21cabf=await this['getJobState'](_0xd8231c,![]);_0xb62d30[_0xa09a1(0xaf)](_0x21cabf);}return _0xb62d30;}static async[a81_0x4d1b37(0xa7)](_0x49b454,_0x26313b){const _0x7d17cd=a81_0x4d1b37,_0x555f37=await this['getLog'](_0x49b454,job_1[_0x7d17cd(0xc8)],constants_1[_0x7d17cd(0xb9)]),_0x2f030f=JSON['parse'](_0x555f37),_0x3309d6={'id':_0x2f030f['id'],'status':_0x2f030f['status'],'createdDate':_0x2f030f['createdDate'],'completedDate':_0x2f030f['completedDate'],'successful':_0x2f030f[_0x7d17cd(0xde)],'failed':_0x2f030f[_0x7d17cd(0xbc)]};return _0x26313b?_0x2f030f:_0x3309d6;}static async[a81_0x4d1b37(0xd1)](_0x2a2656){const _0x5859ff=a81_0x4d1b37,_0x58a390=await this[_0x5859ff(0x99)](_0x2a2656,job_1[_0x5859ff(0xcf)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0x5859ff(0xd6)])(_0x58a390,{'columns':!![]});}static async[a81_0x4d1b37(0x99)](_0x946abc,_0x46ac08,_0x25f0ae){const _0x1c6533=a81_0x4d1b37,_0x60fbc3=(0x0,path_1['join'])(MaskingService['maskingFolderPath'],_0x946abc),_0x59e0f3=(0x0,path_1[_0x1c6533(0xa0)])(_0x60fbc3,_0x46ac08);if(!await utils_1[_0x1c6533(0xa3)][_0x1c6533(0xbf)](_0x60fbc3))throw new not_found_error_1['NotFoundError'](_0x1c6533(0xa2));if(!await utils_1['FsUtils'][_0x1c6533(0xbf)](_0x59e0f3))throw new not_found_error_1[(_0x1c6533(0xb6))](_0x25f0ae+_0x1c6533(0xb7));return(0x0,promises_1[_0x1c6533(0xe0)])(_0x59e0f3,{'encoding':'utf-8'});}static async['logErrorStartJob'](_0xf31339,_0x5835af,_0x5a7cc9){const _0x2763b8=a81_0x4d1b37,_0xdb97b8=await new logger_job_state_1[(_0x2763b8(0xd0))](_0xf31339,_0x5835af)[_0x2763b8(0x9b)]([]);_0xdb97b8[_0x2763b8(0xd4)](logger_enums_1[_0x2763b8(0xb3)][_0x2763b8(0xa9)]),_0xdb97b8[_0x2763b8(0xaa)](_0x5a7cc9[_0x2763b8(0xa4)]),await _0xdb97b8[_0x2763b8(0x9a)]();}}exports['MaskingService']=MaskingService,MaskingService['maskingFolderPath']=path_1[a81_0x4d1b37(0xbd)][a81_0x4d1b37(0xa0)](path_2[a81_0x4d1b37(0xca)],constants_1[a81_0x4d1b37(0xdb)]);function a81_0x1216(){const _0x5a0535=['JOB_PATH','../../../constants/job','JOB_LOG_STATE_FILENAME','makeDir','dataPath','1145XQFqnf','1789014QvDgrm','7776846iUPfTe','__esModule','JOB_LOG_DETAILS_FILENAME','LoggerJobState','getJobDetails','configurable','__importStar','setJobStatus','../../shared/utils/job.utils','parse','16EtgqeN','createMaskingJob','getJobs','toString','DATA_MASKING_FOLDER_NAME','path','__setModuleDefault','successful','../../shared/utils/fs.utils','readFile','writable','catch','logErrorStartJob','getLog','kill','init','3687447FxTViV','../job/classes/logger/logger-job-state','search','23493114shKaqn','join','14808iSHfFG','Job\x20Id\x20not\x20found.','FsUtils','message','sortJobsIds','getOwnPropertyDescriptor','getJobState','csv-parse/sync','FAILED','setJobError','__createBinding','constructor','defineProperty','__importDefault','push','stringify','maskingFolderPath','479052MtQmHj','JobStatus','getJobsIds','(((.+)+)+)+$','NotFoundError','\x20not\x20found.','../constants','JOB_LOG_STATE_NAME','../job/enums/logger.enums','create','failed','default','hasOwnProperty','isExistsPath','598088SQjFhq','get','writeFile','prototype','../../../core/errors/not-found.error','call'];a81_0x1216=function(){return _0x5a0535;};return a81_0x1216();}