const a99_0x2ce2fb=a99_0x91a8;(function(_0xc141a8,_0x2f84cb){const _0x37b85b=a99_0x91a8,_0x4151b5=_0xc141a8();while(!![]){try{const _0x59776e=-parseInt(_0x37b85b(0x126))/0x1+parseInt(_0x37b85b(0x11c))/0x2*(parseInt(_0x37b85b(0x120))/0x3)+parseInt(_0x37b85b(0x121))/0x4*(parseInt(_0x37b85b(0x13d))/0x5)+-parseInt(_0x37b85b(0x10b))/0x6+-parseInt(_0x37b85b(0x12e))/0x7+parseInt(_0x37b85b(0x12f))/0x8*(parseInt(_0x37b85b(0x137))/0x9)+-parseInt(_0x37b85b(0x122))/0xa*(-parseInt(_0x37b85b(0x12c))/0xb);if(_0x59776e===_0x2f84cb)break;else _0x4151b5['push'](_0x4151b5['shift']());}catch(_0x102ab5){_0x4151b5['push'](_0x4151b5['shift']());}}}(a99_0x405e,0x81250));const a99_0x1c34dc=(function(){let _0x2f918d=!![];return function(_0x4a1959,_0x516738){const _0x3ae475=_0x2f918d?function(){if(_0x516738){const _0x55fbc7=_0x516738['apply'](_0x4a1959,arguments);return _0x516738=null,_0x55fbc7;}}:function(){};return _0x2f918d=![],_0x3ae475;};}()),a99_0x409e93=a99_0x1c34dc(this,function(){const _0x3aa1c3=a99_0x91a8;return a99_0x409e93[_0x3aa1c3(0x111)]()[_0x3aa1c3(0x115)]('(((.+)+)+)+$')[_0x3aa1c3(0x111)]()[_0x3aa1c3(0x112)](a99_0x409e93)[_0x3aa1c3(0x115)](_0x3aa1c3(0x133));});a99_0x409e93();'use strict';var __createBinding=this&&this[a99_0x2ce2fb(0x13c)]||(Object[a99_0x2ce2fb(0x110)]?function(_0xccb3fa,_0x74550e,_0x592637,_0x985fde){const _0x514184=a99_0x2ce2fb;if(_0x985fde===undefined)_0x985fde=_0x592637;var _0x3fb457=Object[_0x514184(0x10f)](_0x74550e,_0x592637);(!_0x3fb457||(_0x514184(0x11e)in _0x3fb457?!_0x74550e[_0x514184(0x119)]:_0x3fb457['writable']||_0x3fb457['configurable']))&&(_0x3fb457={'enumerable':!![],'get':function(){return _0x74550e[_0x592637];}}),Object[_0x514184(0x13e)](_0xccb3fa,_0x985fde,_0x3fb457);}:function(_0xa3d3fc,_0x296c84,_0xe7afcf,_0x431f59){if(_0x431f59===undefined)_0x431f59=_0xe7afcf;_0xa3d3fc[_0x431f59]=_0x296c84[_0xe7afcf];}),__setModuleDefault=this&&this[a99_0x2ce2fb(0x10e)]||(Object[a99_0x2ce2fb(0x110)]?function(_0x2f2e50,_0x263491){const _0x5134f7=a99_0x2ce2fb;Object['defineProperty'](_0x2f2e50,_0x5134f7(0x104),{'enumerable':!![],'value':_0x263491});}:function(_0x1ccc2c,_0x10b050){const _0x11ff67=a99_0x2ce2fb;_0x1ccc2c[_0x11ff67(0x104)]=_0x10b050;}),__importStar=this&&this[a99_0x2ce2fb(0x127)]||function(_0x216743){const _0x55f84d=a99_0x2ce2fb;if(_0x216743&&_0x216743[_0x55f84d(0x119)])return _0x216743;var _0x5557bc={};if(_0x216743!=null){for(var _0x45575e in _0x216743)if(_0x45575e!=='default'&&Object['prototype'][_0x55f84d(0x125)][_0x55f84d(0x13f)](_0x216743,_0x45575e))__createBinding(_0x5557bc,_0x216743,_0x45575e);}return __setModuleDefault(_0x5557bc,_0x216743),_0x5557bc;},__importDefault=this&&this[a99_0x2ce2fb(0x11d)]||function(_0x51e3db){const _0x2320f5=a99_0x2ce2fb;return _0x51e3db&&_0x51e3db[_0x2320f5(0x119)]?_0x51e3db:{'default':_0x51e3db};};function a99_0x91a8(_0x7f07e0,_0x4e5783){const _0x1129a3=a99_0x405e();return a99_0x91a8=function(_0x409e93,_0x1c34dc){_0x409e93=_0x409e93-0xfb;let _0x405ebe=_0x1129a3[_0x409e93];return _0x405ebe;},a99_0x91a8(_0x7f07e0,_0x4e5783);}function a99_0x405e(){const _0x1ed601=['JOB_LOG_DETAILS_NAME','../../shared/utils/fs.utils','default','setJobError','join','JOB_LOG_STATE_FILENAME','kill','../../../constants/job','createdDate','4050234GfIEMf','status','MaskingService','__setModuleDefault','getOwnPropertyDescriptor','create','toString','constructor','../../shared/utils/job.utils','LoggerJobState','search','writeFile','maskingFolderPath','getJobs','__esModule','getJobState','path','118UUjcSt','__importDefault','get','init','26655GhEIBm','4cDMxGb','76030JoCYlC','catch','slice','hasOwnProperty','900236WqfmmV','__importStar','csv-parse/sync','JOB_PATH','generateJobId','FAILED','2541eURgHL','readFile','2707656RQJeIE','103176useKCA','\x20not\x20found.','setJobStatus','fs/promises','(((.+)+)+)+$','../constants','isExistsPath','push','9ipKZFs','getLog','../job/enums/logger.enums','@flosum/utils','failed','__createBinding','988270hKiTdf','defineProperty','call','dataPath','parse','makeDir','utf-8','logErrorStartJob','sortJobsIds','runJob','getJobsIds'];a99_0x405e=function(){return _0x1ed601;};return a99_0x405e();}Object[a99_0x2ce2fb(0x13e)](exports,a99_0x2ce2fb(0x119),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a99_0x2ce2fb(0x11b))),fs_utils_1=require(a99_0x2ce2fb(0x103)),promises_1=require(a99_0x2ce2fb(0x132)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a99_0x2ce2fb(0x139)),sync_1=require(a99_0x2ce2fb(0x128)),utils_1=require(a99_0x2ce2fb(0x13a)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a99_0x2ce2fb(0x109)),job_utils_1=__importDefault(require(a99_0x2ce2fb(0x113))),constants_1=require(a99_0x2ce2fb(0x134)),path_2=require('../../../configs/path');class MaskingService{static async['createMaskingJob'](_0x41468d){const _0x5c942b=a99_0x2ce2fb,_0x5274ba=job_utils_1[_0x5c942b(0x104)][_0x5c942b(0x12a)](),_0x26cc59=(0x0,path_1[_0x5c942b(0x106)])(MaskingService['maskingFolderPath'],_0x5274ba);await(0x0,fs_utils_1[_0x5c942b(0xfc)])(_0x26cc59),await(0x0,promises_1[_0x5c942b(0x116)])(_0x26cc59+'/'+job_1['MANIFEST_FILENAME'],JSON['stringify']({'details':_0x41468d}));const _0x580f45=await new logger_job_state_1[(_0x5c942b(0x114))](_0x26cc59,_0x5274ba)[_0x5c942b(0x11f)]([]);await _0x580f45[_0x5c942b(0x108)]();const _0x556ca5=path_1['default'][_0x5c942b(0x106)](__dirname,job_1[_0x5c942b(0x129)]);return job_utils_1[_0x5c942b(0x104)][_0x5c942b(0x100)](_0x556ca5,{'jobStorePath':_0x26cc59,'jobId':_0x5274ba})[_0x5c942b(0x123)](_0x37d14d=>this['logErrorStartJob'](_0x26cc59,_0x5274ba,_0x37d14d)),{'jobId':_0x5274ba};}static async[a99_0x2ce2fb(0x118)](_0x36a1f2,_0xb1736e){const _0x85b7d6=a99_0x2ce2fb,_0x473f41=await job_utils_1[_0x85b7d6(0x104)][_0x85b7d6(0x101)](MaskingService[_0x85b7d6(0x117)]),_0x3f9ffc=await job_utils_1['default'][_0x85b7d6(0xff)](MaskingService[_0x85b7d6(0x117)],_0x473f41),_0x1f9567=_0x3f9ffc[_0x85b7d6(0x124)](_0xb1736e,_0xb1736e+_0x36a1f2),_0x462eb3=[];for(const _0x536f18 of _0x1f9567){const _0xbfc21c=await this[_0x85b7d6(0x11a)](_0x536f18,![]);_0x462eb3[_0x85b7d6(0x136)](_0xbfc21c);}return _0x462eb3;}static async[a99_0x2ce2fb(0x11a)](_0x40d134,_0x32300c){const _0x2515ba=a99_0x2ce2fb,_0x2b84fb=await this[_0x2515ba(0x138)](_0x40d134,job_1[_0x2515ba(0x107)],constants_1['JOB_LOG_STATE_NAME']),_0x1a0b7e=JSON[_0x2515ba(0xfb)](_0x2b84fb),_0x44f56b={'id':_0x1a0b7e['id'],'status':_0x1a0b7e[_0x2515ba(0x10c)],'createdDate':_0x1a0b7e[_0x2515ba(0x10a)],'completedDate':_0x1a0b7e['completedDate'],'successful':_0x1a0b7e['successful'],'failed':_0x1a0b7e[_0x2515ba(0x13b)]};return _0x32300c?_0x1a0b7e:_0x44f56b;}static async['getJobDetails'](_0x2dbacb){const _0x3046bb=a99_0x2ce2fb,_0x43599d=await this[_0x3046bb(0x138)](_0x2dbacb,job_1['JOB_LOG_DETAILS_FILENAME'],constants_1[_0x3046bb(0x102)]);return(0x0,sync_1['parse'])(_0x43599d,{'columns':!![]});}static async['getLog'](_0xaffbcc,_0x37de04,_0x11c311){const _0x2ad263=a99_0x2ce2fb,_0x1af628=(0x0,path_1['join'])(MaskingService['maskingFolderPath'],_0xaffbcc),_0x5d56b6=(0x0,path_1[_0x2ad263(0x106)])(_0x1af628,_0x37de04);if(!await utils_1['FsUtils'][_0x2ad263(0x135)](_0x1af628))throw new not_found_error_1['NotFoundError']('Job\x20Id\x20not\x20found.');if(!await utils_1['FsUtils']['isExistsPath'](_0x5d56b6))throw new not_found_error_1['NotFoundError'](_0x11c311+_0x2ad263(0x130));return(0x0,promises_1[_0x2ad263(0x12d)])(_0x5d56b6,{'encoding':_0x2ad263(0xfd)});}static async[a99_0x2ce2fb(0xfe)](_0xe90030,_0x2f426d,_0x23ffeb){const _0x1694ff=a99_0x2ce2fb,_0x13ea3f=await new logger_job_state_1[(_0x1694ff(0x114))](_0xe90030,_0x2f426d)[_0x1694ff(0x11f)]([]);_0x13ea3f[_0x1694ff(0x131)](logger_enums_1['JobStatus'][_0x1694ff(0x12b)]),_0x13ea3f[_0x1694ff(0x105)](_0x23ffeb['message']),await _0x13ea3f[_0x1694ff(0x108)]();}}exports[a99_0x2ce2fb(0x10d)]=MaskingService,MaskingService[a99_0x2ce2fb(0x117)]=path_1[a99_0x2ce2fb(0x104)][a99_0x2ce2fb(0x106)](path_2[a99_0x2ce2fb(0x140)],constants_1['DATA_MASKING_FOLDER_NAME']);