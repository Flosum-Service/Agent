const a81_0x23d636=a81_0x4c74;(function(_0x90f644,_0x2cc1bc){const _0x4985a6=a81_0x4c74,_0x266bc7=_0x90f644();while(!![]){try{const _0x489568=parseInt(_0x4985a6(0xc1))/0x1+parseInt(_0x4985a6(0xec))/0x2*(-parseInt(_0x4985a6(0xce))/0x3)+parseInt(_0x4985a6(0xda))/0x4+-parseInt(_0x4985a6(0xb7))/0x5+-parseInt(_0x4985a6(0xcc))/0x6*(parseInt(_0x4985a6(0xbc))/0x7)+-parseInt(_0x4985a6(0xbb))/0x8+parseInt(_0x4985a6(0xed))/0x9*(parseInt(_0x4985a6(0xdb))/0xa);if(_0x489568===_0x2cc1bc)break;else _0x266bc7['push'](_0x266bc7['shift']());}catch(_0x19c4b3){_0x266bc7['push'](_0x266bc7['shift']());}}}(a81_0x4c30,0xd8f03));const a81_0x3e8dbd=(function(){let _0x5252f8=!![];return function(_0x1ad2e9,_0x18c365){const _0x2e7bd8=_0x5252f8?function(){const _0x24c0d8=a81_0x4c74;if(_0x18c365){const _0x15a6fc=_0x18c365[_0x24c0d8(0xc9)](_0x1ad2e9,arguments);return _0x18c365=null,_0x15a6fc;}}:function(){};return _0x5252f8=![],_0x2e7bd8;};}()),a81_0x5bc79e=a81_0x3e8dbd(this,function(){const _0x3985ca=a81_0x4c74;return a81_0x5bc79e[_0x3985ca(0xb4)]()[_0x3985ca(0xb3)](_0x3985ca(0xd9))[_0x3985ca(0xb4)]()[_0x3985ca(0xbd)](a81_0x5bc79e)['search'](_0x3985ca(0xd9));});a81_0x5bc79e();'use strict';var __createBinding=this&&this[a81_0x23d636(0xb0)]||(Object[a81_0x23d636(0xad)]?function(_0x2d0e28,_0x158b01,_0x1ae22e,_0x5044be){const _0x4d7cb1=a81_0x23d636;if(_0x5044be===undefined)_0x5044be=_0x1ae22e;var _0x4e58c7=Object['getOwnPropertyDescriptor'](_0x158b01,_0x1ae22e);(!_0x4e58c7||('get'in _0x4e58c7?!_0x158b01[_0x4d7cb1(0xb8)]:_0x4e58c7['writable']||_0x4e58c7[_0x4d7cb1(0xac)]))&&(_0x4e58c7={'enumerable':!![],'get':function(){return _0x158b01[_0x1ae22e];}}),Object[_0x4d7cb1(0xba)](_0x2d0e28,_0x5044be,_0x4e58c7);}:function(_0x1bb779,_0x330283,_0x5ec7b7,_0x29164c){if(_0x29164c===undefined)_0x29164c=_0x5ec7b7;_0x1bb779[_0x29164c]=_0x330283[_0x5ec7b7];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a81_0x23d636(0xad)]?function(_0x22629a,_0x46eb94){const _0x37a9e5=a81_0x23d636;Object[_0x37a9e5(0xba)](_0x22629a,'default',{'enumerable':!![],'value':_0x46eb94});}:function(_0x11f800,_0x237b73){const _0x41d8fb=a81_0x23d636;_0x11f800[_0x41d8fb(0xe8)]=_0x237b73;}),__importStar=this&&this[a81_0x23d636(0xb6)]||function(_0x2b0963){const _0x150390=a81_0x23d636;if(_0x2b0963&&_0x2b0963['__esModule'])return _0x2b0963;var _0x1515bf={};if(_0x2b0963!=null){for(var _0x317584 in _0x2b0963)if(_0x317584!=='default'&&Object[_0x150390(0xb5)][_0x150390(0xeb)]['call'](_0x2b0963,_0x317584))__createBinding(_0x1515bf,_0x2b0963,_0x317584);}return __setModuleDefault(_0x1515bf,_0x2b0963),_0x1515bf;},__importDefault=this&&this[a81_0x23d636(0xc2)]||function(_0x3f7088){return _0x3f7088&&_0x3f7088['__esModule']?_0x3f7088:{'default':_0x3f7088};};function a81_0x4c30(){const _0x5b01c4=['__esModule','NotFoundError','defineProperty','7575888TTOhct','7aJttjv','constructor','MANIFEST_FILENAME','LoggerJobState','../../shared/utils/fs.utils','1178528PqYNxd','__importDefault','kill','getJobState','writeFile','runJob','Job\x20Id\x20not\x20found.','DATA_MASKING_FOLDER_NAME','apply','JOB_LOG_STATE_FILENAME','failed','8013948CXrBLh','setJobStatus','275127QVsbTD','getLog','dataPath','readFile','parse','getJobDetails','@flosum/utils','utf-8','status','completedDate','slice','(((.+)+)+)+$','2527672tuhrGx','85780uwtIct','sortJobsIds','init','message','path','../constants','logErrorStartJob','maskingFolderPath','csv-parse/sync','../../../configs/path','catch','join','makeDir','default','JobStatus','JOB_LOG_DETAILS_NAME','hasOwnProperty','26etiQaL','4176bTQNmy','push','JOB_PATH','FsUtils','JOB_LOG_DETAILS_FILENAME','isExistsPath','MaskingService','configurable','create','getJobsIds','createMaskingJob','__createBinding','createdDate','JOB_LOG_STATE_NAME','search','toString','prototype','__importStar','7135990CZTaON'];a81_0x4c30=function(){return _0x5b01c4;};return a81_0x4c30();}Object[a81_0x23d636(0xba)](exports,a81_0x23d636(0xb8),{'value':!![]}),exports[a81_0x23d636(0xab)]=void 0x0;function a81_0x4c74(_0x22c32f,_0x4c2795){const _0x5def6d=a81_0x4c30();return a81_0x4c74=function(_0x5bc79e,_0x3e8dbd){_0x5bc79e=_0x5bc79e-0xab;let _0x4c30c8=_0x5def6d[_0x5bc79e];return _0x4c30c8;},a81_0x4c74(_0x22c32f,_0x4c2795);}const path_1=__importStar(require(a81_0x23d636(0xdf))),fs_utils_1=require(a81_0x23d636(0xc0)),promises_1=require('fs/promises'),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require('../job/enums/logger.enums'),sync_1=require(a81_0x23d636(0xe3)),utils_1=require(a81_0x23d636(0xd4)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a81_0x23d636(0xe0)),path_2=require(a81_0x23d636(0xe4));class MaskingService{static async[a81_0x23d636(0xaf)](_0x443160){const _0xaf2920=a81_0x23d636,_0x4cdf34=job_utils_1[_0xaf2920(0xe8)]['generateJobId'](),_0x3e0f8b=(0x0,path_1['join'])(MaskingService[_0xaf2920(0xe2)],_0x4cdf34);await(0x0,fs_utils_1[_0xaf2920(0xe7)])(_0x3e0f8b),await(0x0,promises_1[_0xaf2920(0xc5)])(_0x3e0f8b+'/'+job_1[_0xaf2920(0xbe)],JSON['stringify']({'details':_0x443160}));const _0x3e21f7=await new logger_job_state_1['LoggerJobState'](_0x3e0f8b,_0x4cdf34)[_0xaf2920(0xdd)]([]);await _0x3e21f7[_0xaf2920(0xc3)]();const _0x526857=path_1[_0xaf2920(0xe8)][_0xaf2920(0xe6)](__dirname,job_1[_0xaf2920(0xef)]);return job_utils_1[_0xaf2920(0xe8)][_0xaf2920(0xc6)](_0x526857,{'jobStorePath':_0x3e0f8b,'jobId':_0x4cdf34})[_0xaf2920(0xe5)](_0x59fc68=>this[_0xaf2920(0xe1)](_0x3e0f8b,_0x4cdf34,_0x59fc68)),{'jobId':_0x4cdf34};}static async['getJobs'](_0x4564fe,_0x358cb7){const _0x7e6adb=a81_0x23d636,_0x604ae9=await job_utils_1['default'][_0x7e6adb(0xae)](MaskingService[_0x7e6adb(0xe2)]),_0x323792=await job_utils_1[_0x7e6adb(0xe8)][_0x7e6adb(0xdc)](MaskingService['maskingFolderPath'],_0x604ae9),_0x842ae7=_0x323792[_0x7e6adb(0xd8)](_0x358cb7,_0x358cb7+_0x4564fe),_0x38bcd8=[];for(const _0xbc7fcf of _0x842ae7){const _0x2faca2=await this[_0x7e6adb(0xc4)](_0xbc7fcf,![]);_0x38bcd8[_0x7e6adb(0xee)](_0x2faca2);}return _0x38bcd8;}static async[a81_0x23d636(0xc4)](_0x524394,_0x29dcc5){const _0x2c2d85=a81_0x23d636,_0x341529=await this[_0x2c2d85(0xcf)](_0x524394,job_1[_0x2c2d85(0xca)],constants_1[_0x2c2d85(0xb2)]),_0x4fbd67=JSON['parse'](_0x341529),_0x153742={'id':_0x4fbd67['id'],'status':_0x4fbd67[_0x2c2d85(0xd6)],'createdDate':_0x4fbd67[_0x2c2d85(0xb1)],'completedDate':_0x4fbd67[_0x2c2d85(0xd7)],'successful':_0x4fbd67['successful'],'failed':_0x4fbd67[_0x2c2d85(0xcb)]};return _0x29dcc5?_0x4fbd67:_0x153742;}static async[a81_0x23d636(0xd3)](_0x3e7805){const _0x1483c5=a81_0x23d636,_0x14bf06=await this[_0x1483c5(0xcf)](_0x3e7805,job_1[_0x1483c5(0xf1)],constants_1[_0x1483c5(0xea)]);return(0x0,sync_1[_0x1483c5(0xd2)])(_0x14bf06,{'columns':!![]});}static async[a81_0x23d636(0xcf)](_0x5ba2bf,_0x966e3f,_0xbbf309){const _0x207c8a=a81_0x23d636,_0x5bb4dd=(0x0,path_1[_0x207c8a(0xe6)])(MaskingService[_0x207c8a(0xe2)],_0x5ba2bf),_0x54801c=(0x0,path_1[_0x207c8a(0xe6)])(_0x5bb4dd,_0x966e3f);if(!await utils_1[_0x207c8a(0xf0)][_0x207c8a(0xf2)](_0x5bb4dd))throw new not_found_error_1[(_0x207c8a(0xb9))](_0x207c8a(0xc7));if(!await utils_1['FsUtils'][_0x207c8a(0xf2)](_0x54801c))throw new not_found_error_1[(_0x207c8a(0xb9))](_0xbbf309+'\x20not\x20found.');return(0x0,promises_1[_0x207c8a(0xd1)])(_0x54801c,{'encoding':_0x207c8a(0xd5)});}static async[a81_0x23d636(0xe1)](_0x1745de,_0x414d76,_0x15a9cf){const _0x1b9b33=a81_0x23d636,_0x5b68ac=await new logger_job_state_1[(_0x1b9b33(0xbf))](_0x1745de,_0x414d76)[_0x1b9b33(0xdd)]([]);_0x5b68ac[_0x1b9b33(0xcd)](logger_enums_1[_0x1b9b33(0xe9)]['FAILED']),_0x5b68ac['setJobError'](_0x15a9cf[_0x1b9b33(0xde)]),await _0x5b68ac[_0x1b9b33(0xc3)]();}}exports['MaskingService']=MaskingService,MaskingService[a81_0x23d636(0xe2)]=path_1['default'][a81_0x23d636(0xe6)](path_2[a81_0x23d636(0xd0)],constants_1[a81_0x23d636(0xc8)]);