function a81_0x3239(){const _0x1b8d18=['get','@flosum/utils','toString','../../../constants/job','JobStatus','parse','getLog','33wzcdJg','../constants','create','JOB_LOG_STATE_FILENAME','slice','__setModuleDefault','MaskingService','573790jdNRIQ','1072bBmjnr','25103GGUQMN','defineProperty','getJobs','init','runJob','getJobDetails','MANIFEST_FILENAME','writable','__createBinding','failed','search','31055FHWWBG','maskingFolderPath','constructor','readFile','../job/classes/logger/logger-job-state','fs/promises','utf-8','hasOwnProperty','push','JOB_LOG_STATE_NAME','path','configurable','apply','successful','920730yypVSd','../../shared/utils/job.utils','LoggerJobState','Job\x20Id\x20not\x20found.','logErrorStartJob','generateJobId','__importDefault','1923733OGhRIZ','call','setJobStatus','makeDir','catch','stringify','getJobState','JOB_LOG_DETAILS_FILENAME','getJobsIds','setJobError','30018MfXSdE','36kOmBRc','FsUtils','15003rJjljZ','FAILED','completedDate','kill','__esModule','__importStar','isExistsPath','../../shared/utils/fs.utils','sortJobsIds','getOwnPropertyDescriptor','(((.+)+)+)+$','default','createdDate','join','../job/enums/logger.enums','NotFoundError','message','152jQWDLg'];a81_0x3239=function(){return _0x1b8d18;};return a81_0x3239();}const a81_0x3d71fc=a81_0x3835;(function(_0x123a49,_0x14ba83){const _0x4ca173=a81_0x3835,_0x18ef47=_0x123a49();while(!![]){try{const _0x49c1cc=parseInt(_0x4ca173(0x187))/0x1+parseInt(_0x4ca173(0x163))/0x2*(parseInt(_0x4ca173(0x162))/0x3)+parseInt(_0x4ca173(0x176))/0x4*(-parseInt(_0x4ca173(0x192))/0x5)+-parseInt(_0x4ca173(0x1a0))/0x6+parseInt(_0x4ca173(0x158))/0x7+-parseInt(_0x4ca173(0x186))/0x8*(-parseInt(_0x4ca173(0x165))/0x9)+-parseInt(_0x4ca173(0x185))/0xa*(parseInt(_0x4ca173(0x17e))/0xb);if(_0x49c1cc===_0x14ba83)break;else _0x18ef47['push'](_0x18ef47['shift']());}catch(_0x5e8228){_0x18ef47['push'](_0x18ef47['shift']());}}}(a81_0x3239,0x229e6));function a81_0x3835(_0x49742a,_0x37180f){const _0x5db29d=a81_0x3239();return a81_0x3835=function(_0x23bd55,_0xe46a19){_0x23bd55=_0x23bd55-0x155;let _0x323928=_0x5db29d[_0x23bd55];return _0x323928;},a81_0x3835(_0x49742a,_0x37180f);}const a81_0xe46a19=(function(){let _0x5884ae=!![];return function(_0x567523,_0x39cc65){const _0xd77eb1=_0x5884ae?function(){const _0x6bc89f=a81_0x3835;if(_0x39cc65){const _0x4b7d2a=_0x39cc65[_0x6bc89f(0x19e)](_0x567523,arguments);return _0x39cc65=null,_0x4b7d2a;}}:function(){};return _0x5884ae=![],_0xd77eb1;};}()),a81_0x23bd55=a81_0xe46a19(this,function(){const _0x3716d1=a81_0x3835;return a81_0x23bd55['toString']()[_0x3716d1(0x191)]('(((.+)+)+)+$')[_0x3716d1(0x179)]()[_0x3716d1(0x194)](a81_0x23bd55)[_0x3716d1(0x191)](_0x3716d1(0x16f));});a81_0x23bd55();'use strict';var __createBinding=this&&this[a81_0x3d71fc(0x18f)]||(Object[a81_0x3d71fc(0x180)]?function(_0xc80bcd,_0x27f6f5,_0x11b474,_0x13fcea){const _0x301756=a81_0x3d71fc;if(_0x13fcea===undefined)_0x13fcea=_0x11b474;var _0x57e9ad=Object[_0x301756(0x16e)](_0x27f6f5,_0x11b474);(!_0x57e9ad||(_0x301756(0x177)in _0x57e9ad?!_0x27f6f5[_0x301756(0x169)]:_0x57e9ad[_0x301756(0x18e)]||_0x57e9ad[_0x301756(0x19d)]))&&(_0x57e9ad={'enumerable':!![],'get':function(){return _0x27f6f5[_0x11b474];}}),Object['defineProperty'](_0xc80bcd,_0x13fcea,_0x57e9ad);}:function(_0x3f2c16,_0x3033a9,_0x556b96,_0x21deec){if(_0x21deec===undefined)_0x21deec=_0x556b96;_0x3f2c16[_0x21deec]=_0x3033a9[_0x556b96];}),__setModuleDefault=this&&this[a81_0x3d71fc(0x183)]||(Object[a81_0x3d71fc(0x180)]?function(_0x424337,_0x1f667f){const _0x39aee4=a81_0x3d71fc;Object[_0x39aee4(0x188)](_0x424337,_0x39aee4(0x170),{'enumerable':!![],'value':_0x1f667f});}:function(_0x36e622,_0x24e0b5){_0x36e622['default']=_0x24e0b5;}),__importStar=this&&this[a81_0x3d71fc(0x16a)]||function(_0x5930b0){const _0x158f90=a81_0x3d71fc;if(_0x5930b0&&_0x5930b0[_0x158f90(0x169)])return _0x5930b0;var _0x59d1dd={};if(_0x5930b0!=null){for(var _0x279f5c in _0x5930b0)if(_0x279f5c!=='default'&&Object['prototype'][_0x158f90(0x199)][_0x158f90(0x159)](_0x5930b0,_0x279f5c))__createBinding(_0x59d1dd,_0x5930b0,_0x279f5c);}return __setModuleDefault(_0x59d1dd,_0x5930b0),_0x59d1dd;},__importDefault=this&&this[a81_0x3d71fc(0x157)]||function(_0x307648){const _0xf7d333=a81_0x3d71fc;return _0x307648&&_0x307648[_0xf7d333(0x169)]?_0x307648:{'default':_0x307648};};Object[a81_0x3d71fc(0x188)](exports,a81_0x3d71fc(0x169),{'value':!![]}),exports[a81_0x3d71fc(0x184)]=void 0x0;const path_1=__importStar(require(a81_0x3d71fc(0x19c))),fs_utils_1=require(a81_0x3d71fc(0x16c)),promises_1=require(a81_0x3d71fc(0x197)),logger_job_state_1=require(a81_0x3d71fc(0x196)),logger_enums_1=require(a81_0x3d71fc(0x173)),sync_1=require('csv-parse/sync'),utils_1=require(a81_0x3d71fc(0x178)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a81_0x3d71fc(0x17a)),job_utils_1=__importDefault(require(a81_0x3d71fc(0x1a1))),constants_1=require(a81_0x3d71fc(0x17f)),path_2=require('../../../configs/path');class MaskingService{static async['createMaskingJob'](_0xde531b){const _0x1e3ff6=a81_0x3d71fc,_0x8e5f7b=job_utils_1[_0x1e3ff6(0x170)][_0x1e3ff6(0x156)](),_0x1dd973=(0x0,path_1[_0x1e3ff6(0x172)])(MaskingService['maskingFolderPath'],_0x8e5f7b);await(0x0,fs_utils_1[_0x1e3ff6(0x15b)])(_0x1dd973),await(0x0,promises_1['writeFile'])(_0x1dd973+'/'+job_1[_0x1e3ff6(0x18d)],JSON[_0x1e3ff6(0x15d)]({'details':_0xde531b}));const _0x12786f=await new logger_job_state_1[(_0x1e3ff6(0x1a2))](_0x1dd973,_0x8e5f7b)[_0x1e3ff6(0x18a)]([]);await _0x12786f[_0x1e3ff6(0x168)]();const _0x39b61a=path_1[_0x1e3ff6(0x170)][_0x1e3ff6(0x172)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x1e3ff6(0x170)][_0x1e3ff6(0x18b)](_0x39b61a,{'jobStorePath':_0x1dd973,'jobId':_0x8e5f7b})[_0x1e3ff6(0x15c)](_0x56bd19=>this[_0x1e3ff6(0x155)](_0x1dd973,_0x8e5f7b,_0x56bd19)),{'jobId':_0x8e5f7b};}static async[a81_0x3d71fc(0x189)](_0x336ff6,_0x59a639){const _0x24f05c=a81_0x3d71fc,_0x3704a6=await job_utils_1['default'][_0x24f05c(0x160)](MaskingService[_0x24f05c(0x193)]),_0x34e793=await job_utils_1[_0x24f05c(0x170)][_0x24f05c(0x16d)](MaskingService[_0x24f05c(0x193)],_0x3704a6),_0xd752aa=_0x34e793[_0x24f05c(0x182)](_0x59a639,_0x59a639+_0x336ff6),_0x33649f=[];for(const _0x33b1f4 of _0xd752aa){const _0x46fbbe=await this[_0x24f05c(0x15e)](_0x33b1f4,![]);_0x33649f[_0x24f05c(0x19a)](_0x46fbbe);}return _0x33649f;}static async[a81_0x3d71fc(0x15e)](_0x338b1e,_0x1a0f80){const _0xe3aae9=a81_0x3d71fc,_0xefceb4=await this['getLog'](_0x338b1e,job_1[_0xe3aae9(0x181)],constants_1[_0xe3aae9(0x19b)]),_0x250dad=JSON[_0xe3aae9(0x17c)](_0xefceb4),_0x196a00={'id':_0x250dad['id'],'status':_0x250dad['status'],'createdDate':_0x250dad[_0xe3aae9(0x171)],'completedDate':_0x250dad[_0xe3aae9(0x167)],'successful':_0x250dad[_0xe3aae9(0x19f)],'failed':_0x250dad[_0xe3aae9(0x190)]};return _0x1a0f80?_0x250dad:_0x196a00;}static async[a81_0x3d71fc(0x18c)](_0x269bc6){const _0x2a5112=a81_0x3d71fc,_0x3dfd87=await this[_0x2a5112(0x17d)](_0x269bc6,job_1[_0x2a5112(0x15f)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0x2a5112(0x17c)])(_0x3dfd87,{'columns':!![]});}static async[a81_0x3d71fc(0x17d)](_0x301dc8,_0xdea9c,_0x4b94ca){const _0x1d58a5=a81_0x3d71fc,_0x1681c8=(0x0,path_1[_0x1d58a5(0x172)])(MaskingService['maskingFolderPath'],_0x301dc8),_0x1871c2=(0x0,path_1[_0x1d58a5(0x172)])(_0x1681c8,_0xdea9c);if(!await utils_1[_0x1d58a5(0x164)][_0x1d58a5(0x16b)](_0x1681c8))throw new not_found_error_1[(_0x1d58a5(0x174))](_0x1d58a5(0x1a3));if(!await utils_1['FsUtils'][_0x1d58a5(0x16b)](_0x1871c2))throw new not_found_error_1[(_0x1d58a5(0x174))](_0x4b94ca+'\x20not\x20found.');return(0x0,promises_1[_0x1d58a5(0x195)])(_0x1871c2,{'encoding':_0x1d58a5(0x198)});}static async[a81_0x3d71fc(0x155)](_0x3ce5cd,_0x572d13,_0x116e72){const _0xee6545=a81_0x3d71fc,_0x56bea6=await new logger_job_state_1[(_0xee6545(0x1a2))](_0x3ce5cd,_0x572d13)['init']([]);_0x56bea6[_0xee6545(0x15a)](logger_enums_1[_0xee6545(0x17b)][_0xee6545(0x166)]),_0x56bea6[_0xee6545(0x161)](_0x116e72[_0xee6545(0x175)]),await _0x56bea6[_0xee6545(0x168)]();}}exports['MaskingService']=MaskingService,MaskingService[a81_0x3d71fc(0x193)]=path_1['default']['join'](path_2['dataPath'],constants_1['DATA_MASKING_FOLDER_NAME']);