const a98_0x45e172=a98_0xaf69;(function(_0x562910,_0x1a8ccc){const _0x353958=a98_0xaf69,_0x573aee=_0x562910();while(!![]){try{const _0x54ee13=parseInt(_0x353958(0xb6))/0x1*(-parseInt(_0x353958(0xac))/0x2)+parseInt(_0x353958(0xa7))/0x3+-parseInt(_0x353958(0xb4))/0x4*(-parseInt(_0x353958(0x97))/0x5)+-parseInt(_0x353958(0x8a))/0x6*(-parseInt(_0x353958(0xb3))/0x7)+parseInt(_0x353958(0xc0))/0x8*(parseInt(_0x353958(0x91))/0x9)+parseInt(_0x353958(0xb5))/0xa+-parseInt(_0x353958(0xa5))/0xb;if(_0x54ee13===_0x1a8ccc)break;else _0x573aee['push'](_0x573aee['shift']());}catch(_0x39bc38){_0x573aee['push'](_0x573aee['shift']());}}}(a98_0xb9aa,0x702ff));const a98_0x4c7894=(function(){let _0x20e976=!![];return function(_0x378210,_0x49f3ca){const _0x5a67af=_0x20e976?function(){if(_0x49f3ca){const _0x4ee190=_0x49f3ca['apply'](_0x378210,arguments);return _0x49f3ca=null,_0x4ee190;}}:function(){};return _0x20e976=![],_0x5a67af;};}()),a98_0x1d5c5b=a98_0x4c7894(this,function(){const _0x4ad47c=a98_0xaf69;return a98_0x1d5c5b['toString']()[_0x4ad47c(0x96)](_0x4ad47c(0xc6))[_0x4ad47c(0xaa)]()['constructor'](a98_0x1d5c5b)[_0x4ad47c(0x96)](_0x4ad47c(0xc6));});a98_0x1d5c5b();'use strict';var __createBinding=this&&this[a98_0x45e172(0xa1)]||(Object['create']?function(_0x16a1e,_0x5244b2,_0x5ca942,_0x1d8c51){const _0x3606bf=a98_0x45e172;if(_0x1d8c51===undefined)_0x1d8c51=_0x5ca942;var _0x281093=Object['getOwnPropertyDescriptor'](_0x5244b2,_0x5ca942);(!_0x281093||(_0x3606bf(0xbe)in _0x281093?!_0x5244b2[_0x3606bf(0xa9)]:_0x281093[_0x3606bf(0xa2)]||_0x281093[_0x3606bf(0xaf)]))&&(_0x281093={'enumerable':!![],'get':function(){return _0x5244b2[_0x5ca942];}}),Object['defineProperty'](_0x16a1e,_0x1d8c51,_0x281093);}:function(_0x431f85,_0x2590ad,_0x14315e,_0x4726bc){if(_0x4726bc===undefined)_0x4726bc=_0x14315e;_0x431f85[_0x4726bc]=_0x2590ad[_0x14315e];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x220202,_0x57388d){const _0x2f3fb6=a98_0x45e172;Object[_0x2f3fb6(0x9f)](_0x220202,_0x2f3fb6(0x92),{'enumerable':!![],'value':_0x57388d});}:function(_0x58958b,_0xe3ca35){const _0x4ce3c2=a98_0x45e172;_0x58958b[_0x4ce3c2(0x92)]=_0xe3ca35;}),__importStar=this&&this[a98_0x45e172(0x9b)]||function(_0x31e5bc){const _0x8b5453=a98_0x45e172;if(_0x31e5bc&&_0x31e5bc[_0x8b5453(0xa9)])return _0x31e5bc;var _0x4c2607={};if(_0x31e5bc!=null){for(var _0x2f8627 in _0x31e5bc)if(_0x2f8627!==_0x8b5453(0x92)&&Object['prototype']['hasOwnProperty']['call'](_0x31e5bc,_0x2f8627))__createBinding(_0x4c2607,_0x31e5bc,_0x2f8627);}return __setModuleDefault(_0x4c2607,_0x31e5bc),_0x4c2607;},__importDefault=this&&this['__importDefault']||function(_0x24abbc){const _0x950497=a98_0x45e172;return _0x24abbc&&_0x24abbc[_0x950497(0xa9)]?_0x24abbc:{'default':_0x24abbc};};function a98_0xaf69(_0x10544c,_0xc3c9ba){const _0xc30d85=a98_0xb9aa();return a98_0xaf69=function(_0x1d5c5b,_0x4c7894){_0x1d5c5b=_0x1d5c5b-0x89;let _0xb9aa66=_0xc30d85[_0x1d5c5b];return _0xb9aa66;},a98_0xaf69(_0x10544c,_0xc3c9ba);}Object[a98_0x45e172(0x9f)](exports,a98_0x45e172(0xa9),{'value':!![]}),exports[a98_0x45e172(0x8e)]=void 0x0;const path_1=__importStar(require(a98_0x45e172(0xa6))),fs_utils_1=require(a98_0x45e172(0xbf)),promises_1=require(a98_0x45e172(0xa4)),logger_job_state_1=require(a98_0x45e172(0xba)),logger_enums_1=require(a98_0x45e172(0xb7)),sync_1=require(a98_0x45e172(0x99)),utils_1=require(a98_0x45e172(0x93)),not_found_error_1=require(a98_0x45e172(0xbc)),job_1=require(a98_0x45e172(0x9a)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require('../constants'),path_2=require('../../../configs/path');class MaskingService{static async['createMaskingJob'](_0x1d5e35){const _0x9d5da2=a98_0x45e172,_0x3af7ee=job_utils_1[_0x9d5da2(0x92)][_0x9d5da2(0xc3)](),_0x47a1da=(0x0,path_1[_0x9d5da2(0x98)])(MaskingService['maskingFolderPath'],_0x3af7ee);await(0x0,fs_utils_1[_0x9d5da2(0xb0)])(_0x47a1da),await(0x0,promises_1[_0x9d5da2(0x8f)])(_0x47a1da+'/'+job_1[_0x9d5da2(0x9c)],JSON[_0x9d5da2(0x8b)]({'details':_0x1d5e35}));const _0x126e76=await new logger_job_state_1[(_0x9d5da2(0xbd))](_0x47a1da,_0x3af7ee)['init']([]);await _0x126e76['kill']();const _0x45d462=path_1[_0x9d5da2(0x92)][_0x9d5da2(0x98)](__dirname,job_1[_0x9d5da2(0xad)]);return job_utils_1[_0x9d5da2(0x92)]['runJob'](_0x45d462,{'jobStorePath':_0x47a1da,'jobId':_0x3af7ee})[_0x9d5da2(0x90)](_0x66a203=>this[_0x9d5da2(0xa3)](_0x47a1da,_0x3af7ee,_0x66a203)),{'jobId':_0x3af7ee};}static async['getJobs'](_0x4b1f24,_0x589dde){const _0x1ce851=a98_0x45e172,_0x2b9c97=await job_utils_1[_0x1ce851(0x92)][_0x1ce851(0x89)](MaskingService[_0x1ce851(0xc5)]),_0x4e0184=await job_utils_1[_0x1ce851(0x92)]['sortJobsIds'](MaskingService['maskingFolderPath'],_0x2b9c97),_0x318a0e=_0x4e0184['slice'](_0x589dde,_0x589dde+_0x4b1f24),_0x13b8d3=[];for(const _0x2864c3 of _0x318a0e){const _0x332cca=await this[_0x1ce851(0xb8)](_0x2864c3,![]);_0x13b8d3[_0x1ce851(0xc4)](_0x332cca);}return _0x13b8d3;}static async[a98_0x45e172(0xb8)](_0x6bdfc6,_0x2b14ad){const _0x343801=a98_0x45e172,_0x3179cc=await this[_0x343801(0xb2)](_0x6bdfc6,job_1[_0x343801(0xab)],constants_1['JOB_LOG_STATE_NAME']),_0x60f549=JSON[_0x343801(0x8c)](_0x3179cc),_0x25159b={'id':_0x60f549['id'],'status':_0x60f549[_0x343801(0xc7)],'createdDate':_0x60f549['createdDate'],'completedDate':_0x60f549['completedDate'],'successful':_0x60f549[_0x343801(0xc2)],'failed':_0x60f549['failed']};return _0x2b14ad?_0x60f549:_0x25159b;}static async[a98_0x45e172(0xb1)](_0x50b8ce){const _0x282c63=a98_0x45e172,_0x30cd3f=await this['getLog'](_0x50b8ce,job_1[_0x282c63(0xa8)],constants_1[_0x282c63(0x9e)]);return(0x0,sync_1[_0x282c63(0x8c)])(_0x30cd3f,{'columns':!![]});}static async['getLog'](_0x474e8c,_0x540247,_0x45f34d){const _0x120308=a98_0x45e172,_0x152afa=(0x0,path_1[_0x120308(0x98)])(MaskingService[_0x120308(0xc5)],_0x474e8c),_0x403e4c=(0x0,path_1['join'])(_0x152afa,_0x540247);if(!await utils_1[_0x120308(0xae)][_0x120308(0xc1)](_0x152afa))throw new not_found_error_1[(_0x120308(0x94))]('Job\x20Id\x20not\x20found.');if(!await utils_1[_0x120308(0xae)][_0x120308(0xc1)](_0x403e4c))throw new not_found_error_1[(_0x120308(0x94))](_0x45f34d+'\x20not\x20found.');return(0x0,promises_1[_0x120308(0x8d)])(_0x403e4c,{'encoding':'utf-8'});}static async[a98_0x45e172(0xa3)](_0x255474,_0x2a8ded,_0x9ba18f){const _0x8e306c=a98_0x45e172,_0x123ffc=await new logger_job_state_1['LoggerJobState'](_0x255474,_0x2a8ded)[_0x8e306c(0xa0)]([]);_0x123ffc[_0x8e306c(0x95)](logger_enums_1[_0x8e306c(0xbb)][_0x8e306c(0x9d)]),_0x123ffc['setJobError'](_0x9ba18f['message']),await _0x123ffc[_0x8e306c(0xb9)]();}}exports['MaskingService']=MaskingService,MaskingService[a98_0x45e172(0xc5)]=path_1[a98_0x45e172(0x92)][a98_0x45e172(0x98)](path_2['dataPath'],constants_1['DATA_MASKING_FOLDER_NAME']);function a98_0xb9aa(){const _0x304a5b=['catch','995157QzIVxx','default','@flosum/utils','NotFoundError','setJobStatus','search','504715NMBngQ','join','csv-parse/sync','../../../constants/job','__importStar','MANIFEST_FILENAME','FAILED','JOB_LOG_DETAILS_NAME','defineProperty','init','__createBinding','writable','logErrorStartJob','fs/promises','13456707pYYAeF','path','1940799TZdQIo','JOB_LOG_DETAILS_FILENAME','__esModule','toString','JOB_LOG_STATE_FILENAME','24994oyrSPc','JOB_PATH','FsUtils','configurable','makeDir','getJobDetails','getLog','7Jkrfon','8AyhBFP','8729090MUHeEd','37EQcraq','../job/enums/logger.enums','getJobState','kill','../job/classes/logger/logger-job-state','JobStatus','../../../core/errors/not-found.error','LoggerJobState','get','../../shared/utils/fs.utils','8pimTvf','isExistsPath','successful','generateJobId','push','maskingFolderPath','(((.+)+)+)+$','status','getJobsIds','1877664kxfhOx','stringify','parse','readFile','MaskingService','writeFile'];a98_0xb9aa=function(){return _0x304a5b;};return a98_0xb9aa();}