const a98_0x26f8bf=a98_0x7554;(function(_0x4f966b,_0x415a2e){const _0x1e422b=a98_0x7554,_0x5e3e0f=_0x4f966b();while(!![]){try{const _0x29cc70=parseInt(_0x1e422b(0x194))/0x1*(-parseInt(_0x1e422b(0x182))/0x2)+parseInt(_0x1e422b(0x1b6))/0x3+-parseInt(_0x1e422b(0x1c1))/0x4*(-parseInt(_0x1e422b(0x196))/0x5)+parseInt(_0x1e422b(0x1a8))/0x6+-parseInt(_0x1e422b(0x18e))/0x7+-parseInt(_0x1e422b(0x19c))/0x8+parseInt(_0x1e422b(0x1c2))/0x9;if(_0x29cc70===_0x415a2e)break;else _0x5e3e0f['push'](_0x5e3e0f['shift']());}catch(_0x565682){_0x5e3e0f['push'](_0x5e3e0f['shift']());}}}(a98_0x3beb,0xf2d0d));const a98_0x15b469=(function(){let _0x1b7284=!![];return function(_0x436a93,_0x52b5da){const _0xf01684=_0x1b7284?function(){const _0x53a602=a98_0x7554;if(_0x52b5da){const _0x4487a2=_0x52b5da[_0x53a602(0x1c3)](_0x436a93,arguments);return _0x52b5da=null,_0x4487a2;}}:function(){};return _0x1b7284=![],_0xf01684;};}()),a98_0x4048a2=a98_0x15b469(this,function(){const _0x20403a=a98_0x7554;return a98_0x4048a2[_0x20403a(0x1a9)]()[_0x20403a(0x181)](_0x20403a(0x19f))['toString']()[_0x20403a(0x18c)](a98_0x4048a2)[_0x20403a(0x181)](_0x20403a(0x19f));});a98_0x4048a2();'use strict';var __createBinding=this&&this[a98_0x26f8bf(0x18b)]||(Object['create']?function(_0x4ee92a,_0x1a113d,_0x5c6858,_0x2edd57){const _0x214ce9=a98_0x26f8bf;if(_0x2edd57===undefined)_0x2edd57=_0x5c6858;var _0x42bd0d=Object[_0x214ce9(0x198)](_0x1a113d,_0x5c6858);(!_0x42bd0d||(_0x214ce9(0x188)in _0x42bd0d?!_0x1a113d[_0x214ce9(0x1bf)]:_0x42bd0d[_0x214ce9(0x19e)]||_0x42bd0d['configurable']))&&(_0x42bd0d={'enumerable':!![],'get':function(){return _0x1a113d[_0x5c6858];}}),Object[_0x214ce9(0x19d)](_0x4ee92a,_0x2edd57,_0x42bd0d);}:function(_0x59db21,_0x48b4e9,_0x43fbb3,_0x200900){if(_0x200900===undefined)_0x200900=_0x43fbb3;_0x59db21[_0x200900]=_0x48b4e9[_0x43fbb3];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x2dcd9e,_0x4fe0cc){const _0x2bb01e=a98_0x26f8bf;Object[_0x2bb01e(0x19d)](_0x2dcd9e,_0x2bb01e(0x192),{'enumerable':!![],'value':_0x4fe0cc});}:function(_0x24d6ff,_0x41485c){const _0x4a432a=a98_0x26f8bf;_0x24d6ff[_0x4a432a(0x192)]=_0x41485c;}),__importStar=this&&this['__importStar']||function(_0x8986eb){const _0xa952b5=a98_0x26f8bf;if(_0x8986eb&&_0x8986eb[_0xa952b5(0x1bf)])return _0x8986eb;var _0x4a3421={};if(_0x8986eb!=null){for(var _0x370a9c in _0x8986eb)if(_0x370a9c!=='default'&&Object[_0xa952b5(0x1ba)][_0xa952b5(0x1a7)][_0xa952b5(0x183)](_0x8986eb,_0x370a9c))__createBinding(_0x4a3421,_0x8986eb,_0x370a9c);}return __setModuleDefault(_0x4a3421,_0x8986eb),_0x4a3421;},__importDefault=this&&this[a98_0x26f8bf(0x1b2)]||function(_0xf8f7fd){const _0x6b6527=a98_0x26f8bf;return _0xf8f7fd&&_0xf8f7fd[_0x6b6527(0x1bf)]?_0xf8f7fd:{'default':_0xf8f7fd};};function a98_0x3beb(){const _0x5ec71a=['getJobState','push','default','../../../constants/job','37WJVYOj','failed','8408830zxkgoA','setJobStatus','getOwnPropertyDescriptor','parse','path','../job/enums/logger.enums','15788008SHkqsm','defineProperty','writable','(((.+)+)+)+$','FsUtils','createMaskingJob','../../shared/utils/fs.utils','isExistsPath','join','status','successful','hasOwnProperty','460122YXbxAn','toString','DATA_MASKING_FOLDER_NAME','generateJobId','completedDate','@flosum/utils','writeFile','JOB_LOG_DETAILS_FILENAME','getLog','NotFoundError','__importDefault','../../../configs/path','MANIFEST_FILENAME','readFile','2798208lSfOoT','getJobs','logErrorStartJob','fs/promises','prototype','../constants','kill','JOB_LOG_DETAILS_NAME','dataPath','__esModule','../../../core/errors/not-found.error','4ZpUyjE','23648994IQBiTH','apply','sortJobsIds','JOB_LOG_STATE_FILENAME','search','81118wwHnYX','call','\x20not\x20found.','message','maskingFolderPath','LoggerJobState','get','JobStatus','csv-parse/sync','__createBinding','constructor','init','5950686vSmLcZ','JOB_LOG_STATE_NAME'];a98_0x3beb=function(){return _0x5ec71a;};return a98_0x3beb();}function a98_0x7554(_0x2896ed,_0x26ff79){const _0x52fdda=a98_0x3beb();return a98_0x7554=function(_0x4048a2,_0x15b469){_0x4048a2=_0x4048a2-0x181;let _0x3bebd4=_0x52fdda[_0x4048a2];return _0x3bebd4;},a98_0x7554(_0x2896ed,_0x26ff79);}Object[a98_0x26f8bf(0x19d)](exports,a98_0x26f8bf(0x1bf),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a98_0x26f8bf(0x19a))),fs_utils_1=require(a98_0x26f8bf(0x1a2)),promises_1=require(a98_0x26f8bf(0x1b9)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a98_0x26f8bf(0x19b)),sync_1=require(a98_0x26f8bf(0x18a)),utils_1=require(a98_0x26f8bf(0x1ad)),not_found_error_1=require(a98_0x26f8bf(0x1c0)),job_1=require(a98_0x26f8bf(0x193)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a98_0x26f8bf(0x1bb)),path_2=require(a98_0x26f8bf(0x1b3));class MaskingService{static async[a98_0x26f8bf(0x1a1)](_0xd28bd1){const _0xd1fb8a=a98_0x26f8bf,_0x480a82=job_utils_1[_0xd1fb8a(0x192)][_0xd1fb8a(0x1ab)](),_0x30e644=(0x0,path_1[_0xd1fb8a(0x1a4)])(MaskingService['maskingFolderPath'],_0x480a82);await(0x0,fs_utils_1['makeDir'])(_0x30e644),await(0x0,promises_1[_0xd1fb8a(0x1ae)])(_0x30e644+'/'+job_1[_0xd1fb8a(0x1b4)],JSON['stringify']({'details':_0xd28bd1}));const _0x5cfbf8=await new logger_job_state_1['LoggerJobState'](_0x30e644,_0x480a82)[_0xd1fb8a(0x18d)]([]);await _0x5cfbf8[_0xd1fb8a(0x1bc)]();const _0x52a7ed=path_1[_0xd1fb8a(0x192)][_0xd1fb8a(0x1a4)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0xd1fb8a(0x192)]['runJob'](_0x52a7ed,{'jobStorePath':_0x30e644,'jobId':_0x480a82})['catch'](_0x5d7f68=>this[_0xd1fb8a(0x1b8)](_0x30e644,_0x480a82,_0x5d7f68)),{'jobId':_0x480a82};}static async[a98_0x26f8bf(0x1b7)](_0x587525,_0x100bb8){const _0x1774cb=a98_0x26f8bf,_0x335add=await job_utils_1[_0x1774cb(0x192)]['getJobsIds'](MaskingService[_0x1774cb(0x186)]),_0x387049=await job_utils_1[_0x1774cb(0x192)][_0x1774cb(0x1c4)](MaskingService['maskingFolderPath'],_0x335add),_0x20e080=_0x387049['slice'](_0x100bb8,_0x100bb8+_0x587525),_0x287551=[];for(const _0x40e351 of _0x20e080){const _0x2a86b7=await this[_0x1774cb(0x190)](_0x40e351,![]);_0x287551[_0x1774cb(0x191)](_0x2a86b7);}return _0x287551;}static async[a98_0x26f8bf(0x190)](_0x345a3b,_0x3a9533){const _0x4f40b2=a98_0x26f8bf,_0x78e4fe=await this[_0x4f40b2(0x1b0)](_0x345a3b,job_1[_0x4f40b2(0x1c5)],constants_1[_0x4f40b2(0x18f)]),_0x22bc71=JSON['parse'](_0x78e4fe),_0x195995={'id':_0x22bc71['id'],'status':_0x22bc71[_0x4f40b2(0x1a5)],'createdDate':_0x22bc71['createdDate'],'completedDate':_0x22bc71[_0x4f40b2(0x1ac)],'successful':_0x22bc71[_0x4f40b2(0x1a6)],'failed':_0x22bc71[_0x4f40b2(0x195)]};return _0x3a9533?_0x22bc71:_0x195995;}static async['getJobDetails'](_0x428682){const _0x564fad=a98_0x26f8bf,_0x58f60b=await this[_0x564fad(0x1b0)](_0x428682,job_1[_0x564fad(0x1af)],constants_1[_0x564fad(0x1bd)]);return(0x0,sync_1[_0x564fad(0x199)])(_0x58f60b,{'columns':!![]});}static async[a98_0x26f8bf(0x1b0)](_0x1577df,_0xdfbfb8,_0x4c975c){const _0x4c4d92=a98_0x26f8bf,_0x34e1c3=(0x0,path_1['join'])(MaskingService[_0x4c4d92(0x186)],_0x1577df),_0x1ac536=(0x0,path_1[_0x4c4d92(0x1a4)])(_0x34e1c3,_0xdfbfb8);if(!await utils_1[_0x4c4d92(0x1a0)][_0x4c4d92(0x1a3)](_0x34e1c3))throw new not_found_error_1[(_0x4c4d92(0x1b1))]('Job\x20Id\x20not\x20found.');if(!await utils_1[_0x4c4d92(0x1a0)][_0x4c4d92(0x1a3)](_0x1ac536))throw new not_found_error_1[(_0x4c4d92(0x1b1))](_0x4c975c+_0x4c4d92(0x184));return(0x0,promises_1[_0x4c4d92(0x1b5)])(_0x1ac536,{'encoding':'utf-8'});}static async['logErrorStartJob'](_0x535ae5,_0x52c04d,_0x48f04d){const _0x13a01e=a98_0x26f8bf,_0x2e46e7=await new logger_job_state_1[(_0x13a01e(0x187))](_0x535ae5,_0x52c04d)[_0x13a01e(0x18d)]([]);_0x2e46e7[_0x13a01e(0x197)](logger_enums_1[_0x13a01e(0x189)]['FAILED']),_0x2e46e7['setJobError'](_0x48f04d[_0x13a01e(0x185)]),await _0x2e46e7[_0x13a01e(0x1bc)]();}}exports['MaskingService']=MaskingService,MaskingService[a98_0x26f8bf(0x186)]=path_1['default']['join'](path_2[a98_0x26f8bf(0x1be)],constants_1[a98_0x26f8bf(0x1aa)]);