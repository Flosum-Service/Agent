const a80_0x460419=a80_0x37f9;(function(_0xdead5a,_0x661f8d){const _0x514c61=a80_0x37f9,_0x5659e7=_0xdead5a();while(!![]){try{const _0x5a4881=-parseInt(_0x514c61(0x192))/0x1+parseInt(_0x514c61(0x199))/0x2*(-parseInt(_0x514c61(0x1b5))/0x3)+-parseInt(_0x514c61(0x185))/0x4+parseInt(_0x514c61(0x18f))/0x5*(parseInt(_0x514c61(0x1be))/0x6)+parseInt(_0x514c61(0x19b))/0x7*(-parseInt(_0x514c61(0x17f))/0x8)+parseInt(_0x514c61(0x1bd))/0x9*(parseInt(_0x514c61(0x1b3))/0xa)+parseInt(_0x514c61(0x1bb))/0xb*(parseInt(_0x514c61(0x1ac))/0xc);if(_0x5a4881===_0x661f8d)break;else _0x5659e7['push'](_0x5659e7['shift']());}catch(_0x2fe2d9){_0x5659e7['push'](_0x5659e7['shift']());}}}(a80_0x285a,0x621a1));function a80_0x285a(){const _0x3bb0f9=['status','generateJobId','JOB_LOG_STATE_NAME','catch','makeDir','(((.+)+)+)+$','slice','__createBinding','readFile','__importDefault','search','../../shared/utils/job.utils','parse','8yZkItQ','MANIFEST_FILENAME','../../shared/utils/fs.utils','FAILED','create','@flosum/utils','243868VCowsB','configurable','defineProperty','getOwnPropertyDescriptor','sortJobsIds','isExistsPath','JOB_PATH','hasOwnProperty','DATA_MASKING_FOLDER_NAME','MaskingService','1849990ZyLyqQ','push','createdDate','467196PlEWDs','writeFile','toString','utf-8','__esModule','../constants','../job/classes/logger/logger-job-state','2bjFVyY','call','5613447DhUNBj','successful','failed','kill','JOB_LOG_DETAILS_FILENAME','JOB_LOG_STATE_FILENAME','LoggerJobState','constructor','getJobDetails','getLog','message','getJobsIds','maskingFolderPath','runJob','stringify','../../../core/errors/not-found.error','\x20not\x20found.','16188UYWSDN','get','Job\x20Id\x20not\x20found.','NotFoundError','logErrorStartJob','join','getJobState','330viVwni','getJobs','1140027UViIOS','FsUtils','path','init','dataPath','completedDate','10945RHzDAV','../job/enums/logger.enums','8091NxqEUD','12juDlPo','../../../configs/path','setJobStatus','__importStar','default'];a80_0x285a=function(){return _0x3bb0f9;};return a80_0x285a();}const a80_0x5ce335=(function(){let _0x13a4fb=!![];return function(_0x998bc,_0x2e0c0a){const _0x857c95=_0x13a4fb?function(){if(_0x2e0c0a){const _0x3efdbc=_0x2e0c0a['apply'](_0x998bc,arguments);return _0x2e0c0a=null,_0x3efdbc;}}:function(){};return _0x13a4fb=![],_0x857c95;};}()),a80_0x531fd1=a80_0x5ce335(this,function(){const _0x448428=a80_0x37f9;return a80_0x531fd1['toString']()['search']('(((.+)+)+)+$')[_0x448428(0x194)]()[_0x448428(0x1a2)](a80_0x531fd1)[_0x448428(0x17c)](_0x448428(0x1c8));});function a80_0x37f9(_0x1fb215,_0x34c819){const _0x2cd55c=a80_0x285a();return a80_0x37f9=function(_0x531fd1,_0x5ce335){_0x531fd1=_0x531fd1-0x179;let _0x285a37=_0x2cd55c[_0x531fd1];return _0x285a37;},a80_0x37f9(_0x1fb215,_0x34c819);}a80_0x531fd1();'use strict';var __createBinding=this&&this[a80_0x460419(0x179)]||(Object[a80_0x460419(0x183)]?function(_0x3ae382,_0x2cbd85,_0x2389fd,_0x266c0a){const _0xccf425=a80_0x460419;if(_0x266c0a===undefined)_0x266c0a=_0x2389fd;var _0x5d5788=Object[_0xccf425(0x188)](_0x2cbd85,_0x2389fd);(!_0x5d5788||(_0xccf425(0x1ad)in _0x5d5788?!_0x2cbd85[_0xccf425(0x196)]:_0x5d5788['writable']||_0x5d5788[_0xccf425(0x186)]))&&(_0x5d5788={'enumerable':!![],'get':function(){return _0x2cbd85[_0x2389fd];}}),Object[_0xccf425(0x187)](_0x3ae382,_0x266c0a,_0x5d5788);}:function(_0x5f0a28,_0x38ac95,_0x5291b4,_0x490308){if(_0x490308===undefined)_0x490308=_0x5291b4;_0x5f0a28[_0x490308]=_0x38ac95[_0x5291b4];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a80_0x460419(0x183)]?function(_0xf16821,_0xef0437){const _0x59fd5b=a80_0x460419;Object[_0x59fd5b(0x187)](_0xf16821,_0x59fd5b(0x1c2),{'enumerable':!![],'value':_0xef0437});}:function(_0x3b46ff,_0x34b534){const _0x2a1983=a80_0x460419;_0x3b46ff[_0x2a1983(0x1c2)]=_0x34b534;}),__importStar=this&&this[a80_0x460419(0x1c1)]||function(_0x552506){const _0x1d555f=a80_0x460419;if(_0x552506&&_0x552506[_0x1d555f(0x196)])return _0x552506;var _0x545c77={};if(_0x552506!=null){for(var _0x5abd7f in _0x552506)if(_0x5abd7f!==_0x1d555f(0x1c2)&&Object['prototype'][_0x1d555f(0x18c)][_0x1d555f(0x19a)](_0x552506,_0x5abd7f))__createBinding(_0x545c77,_0x552506,_0x5abd7f);}return __setModuleDefault(_0x545c77,_0x552506),_0x545c77;},__importDefault=this&&this[a80_0x460419(0x17b)]||function(_0x28284a){return _0x28284a&&_0x28284a['__esModule']?_0x28284a:{'default':_0x28284a};};Object['defineProperty'](exports,a80_0x460419(0x196),{'value':!![]}),exports[a80_0x460419(0x18e)]=void 0x0;const path_1=__importStar(require(a80_0x460419(0x1b7))),fs_utils_1=require(a80_0x460419(0x181)),promises_1=require('fs/promises'),logger_job_state_1=require(a80_0x460419(0x198)),logger_enums_1=require(a80_0x460419(0x1bc)),sync_1=require('csv-parse/sync'),utils_1=require(a80_0x460419(0x184)),not_found_error_1=require(a80_0x460419(0x1aa)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a80_0x460419(0x17d))),constants_1=require(a80_0x460419(0x197)),path_2=require(a80_0x460419(0x1bf));class MaskingService{static async['createMaskingJob'](_0x19f6aa){const _0x34aa7f=a80_0x460419,_0x9dd288=job_utils_1['default'][_0x34aa7f(0x1c4)](),_0x623db4=(0x0,path_1['join'])(MaskingService[_0x34aa7f(0x1a7)],_0x9dd288);await(0x0,fs_utils_1[_0x34aa7f(0x1c7)])(_0x623db4),await(0x0,promises_1[_0x34aa7f(0x193)])(_0x623db4+'/'+job_1[_0x34aa7f(0x180)],JSON[_0x34aa7f(0x1a9)]({'details':_0x19f6aa}));const _0x3ce5b4=await new logger_job_state_1[(_0x34aa7f(0x1a1))](_0x623db4,_0x9dd288)[_0x34aa7f(0x1b8)]([]);await _0x3ce5b4[_0x34aa7f(0x19e)]();const _0x5c303e=path_1[_0x34aa7f(0x1c2)]['join'](__dirname,job_1[_0x34aa7f(0x18b)]);return job_utils_1[_0x34aa7f(0x1c2)][_0x34aa7f(0x1a8)](_0x5c303e,{'jobStorePath':_0x623db4,'jobId':_0x9dd288})[_0x34aa7f(0x1c6)](_0x3bd295=>this[_0x34aa7f(0x1b0)](_0x623db4,_0x9dd288,_0x3bd295)),{'jobId':_0x9dd288};}static async[a80_0x460419(0x1b4)](_0x3b9876,_0x4648d6){const _0x3d3fc3=a80_0x460419,_0x5a2600=await job_utils_1[_0x3d3fc3(0x1c2)][_0x3d3fc3(0x1a6)](MaskingService[_0x3d3fc3(0x1a7)]),_0x194729=await job_utils_1['default'][_0x3d3fc3(0x189)](MaskingService[_0x3d3fc3(0x1a7)],_0x5a2600),_0x5137cb=_0x194729[_0x3d3fc3(0x1c9)](_0x4648d6,_0x4648d6+_0x3b9876),_0x259a47=[];for(const _0x118aa3 of _0x5137cb){const _0x210f5b=await this[_0x3d3fc3(0x1b2)](_0x118aa3,![]);_0x259a47[_0x3d3fc3(0x190)](_0x210f5b);}return _0x259a47;}static async['getJobState'](_0x36f9be,_0x4e5ca3){const _0x96e531=a80_0x460419,_0x19fb64=await this['getLog'](_0x36f9be,job_1[_0x96e531(0x1a0)],constants_1[_0x96e531(0x1c5)]),_0x2763be=JSON[_0x96e531(0x17e)](_0x19fb64),_0x51cf09={'id':_0x2763be['id'],'status':_0x2763be[_0x96e531(0x1c3)],'createdDate':_0x2763be[_0x96e531(0x191)],'completedDate':_0x2763be[_0x96e531(0x1ba)],'successful':_0x2763be[_0x96e531(0x19c)],'failed':_0x2763be[_0x96e531(0x19d)]};return _0x4e5ca3?_0x2763be:_0x51cf09;}static async[a80_0x460419(0x1a3)](_0x4054f5){const _0x38bfa1=a80_0x460419,_0x31e7f6=await this[_0x38bfa1(0x1a4)](_0x4054f5,job_1[_0x38bfa1(0x19f)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0x38bfa1(0x17e)])(_0x31e7f6,{'columns':!![]});}static async[a80_0x460419(0x1a4)](_0x2a1f87,_0x3a297f,_0x124327){const _0x57c123=a80_0x460419,_0x3c9c5c=(0x0,path_1[_0x57c123(0x1b1)])(MaskingService[_0x57c123(0x1a7)],_0x2a1f87),_0x15c897=(0x0,path_1[_0x57c123(0x1b1)])(_0x3c9c5c,_0x3a297f);if(!await utils_1[_0x57c123(0x1b6)][_0x57c123(0x18a)](_0x3c9c5c))throw new not_found_error_1['NotFoundError'](_0x57c123(0x1ae));if(!await utils_1['FsUtils'][_0x57c123(0x18a)](_0x15c897))throw new not_found_error_1[(_0x57c123(0x1af))](_0x124327+_0x57c123(0x1ab));return(0x0,promises_1[_0x57c123(0x17a)])(_0x15c897,{'encoding':_0x57c123(0x195)});}static async[a80_0x460419(0x1b0)](_0x43ace6,_0x227f80,_0x4e6ee0){const _0x4c3974=a80_0x460419,_0x369f9b=await new logger_job_state_1['LoggerJobState'](_0x43ace6,_0x227f80)[_0x4c3974(0x1b8)]([]);_0x369f9b[_0x4c3974(0x1c0)](logger_enums_1['JobStatus'][_0x4c3974(0x182)]),_0x369f9b['setJobError'](_0x4e6ee0[_0x4c3974(0x1a5)]),await _0x369f9b[_0x4c3974(0x19e)]();}}exports['MaskingService']=MaskingService,MaskingService[a80_0x460419(0x1a7)]=path_1['default']['join'](path_2[a80_0x460419(0x1b9)],constants_1[a80_0x460419(0x18d)]);