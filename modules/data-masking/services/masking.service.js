const a98_0x4182fc=a98_0x3303;(function(_0x319a43,_0x4c5662){const _0x1fcba5=a98_0x3303,_0xf76012=_0x319a43();while(!![]){try{const _0x5f5128=-parseInt(_0x1fcba5(0x1e7))/0x1+parseInt(_0x1fcba5(0x1fb))/0x2+parseInt(_0x1fcba5(0x218))/0x3+parseInt(_0x1fcba5(0x20b))/0x4*(parseInt(_0x1fcba5(0x20f))/0x5)+-parseInt(_0x1fcba5(0x1fd))/0x6*(-parseInt(_0x1fcba5(0x202))/0x7)+-parseInt(_0x1fcba5(0x1f6))/0x8+-parseInt(_0x1fcba5(0x1d5))/0x9*(parseInt(_0x1fcba5(0x1ed))/0xa);if(_0x5f5128===_0x4c5662)break;else _0xf76012['push'](_0xf76012['shift']());}catch(_0x31d8dd){_0xf76012['push'](_0xf76012['shift']());}}}(a98_0x1033,0xd86a2));const a98_0x3bcc9d=(function(){let _0x40257c=!![];return function(_0x37b8ac,_0x5e81da){const _0xbc06a2=_0x40257c?function(){const _0x427e97=a98_0x3303;if(_0x5e81da){const _0x2f7451=_0x5e81da[_0x427e97(0x205)](_0x37b8ac,arguments);return _0x5e81da=null,_0x2f7451;}}:function(){};return _0x40257c=![],_0xbc06a2;};}()),a98_0x8654b4=a98_0x3bcc9d(this,function(){const _0x5ffc41=a98_0x3303;return a98_0x8654b4[_0x5ffc41(0x1e3)]()[_0x5ffc41(0x1cf)](_0x5ffc41(0x1ec))['toString']()[_0x5ffc41(0x1da)](a98_0x8654b4)[_0x5ffc41(0x1cf)](_0x5ffc41(0x1ec));});a98_0x8654b4();'use strict';var __createBinding=this&&this[a98_0x4182fc(0x1dc)]||(Object['create']?function(_0x1dff3e,_0x2cb756,_0x1ad9c3,_0x3001fe){const _0x20ce6b=a98_0x4182fc;if(_0x3001fe===undefined)_0x3001fe=_0x1ad9c3;var _0x1be1c0=Object[_0x20ce6b(0x1f8)](_0x2cb756,_0x1ad9c3);(!_0x1be1c0||(_0x20ce6b(0x1ee)in _0x1be1c0?!_0x2cb756[_0x20ce6b(0x208)]:_0x1be1c0[_0x20ce6b(0x1df)]||_0x1be1c0[_0x20ce6b(0x1fa)]))&&(_0x1be1c0={'enumerable':!![],'get':function(){return _0x2cb756[_0x1ad9c3];}}),Object[_0x20ce6b(0x1e0)](_0x1dff3e,_0x3001fe,_0x1be1c0);}:function(_0x6bce4,_0x3a1970,_0x2fa231,_0x171c69){if(_0x171c69===undefined)_0x171c69=_0x2fa231;_0x6bce4[_0x171c69]=_0x3a1970[_0x2fa231];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a98_0x4182fc(0x215)]?function(_0x427701,_0x5ba182){const _0x6e45c8=a98_0x4182fc;Object[_0x6e45c8(0x1e0)](_0x427701,'default',{'enumerable':!![],'value':_0x5ba182});}:function(_0x529506,_0x40dedd){const _0x57d63a=a98_0x4182fc;_0x529506[_0x57d63a(0x203)]=_0x40dedd;}),__importStar=this&&this[a98_0x4182fc(0x1ef)]||function(_0x288f99){const _0x21fb05=a98_0x4182fc;if(_0x288f99&&_0x288f99[_0x21fb05(0x208)])return _0x288f99;var _0x52a86a={};if(_0x288f99!=null){for(var _0x4ea8a6 in _0x288f99)if(_0x4ea8a6!==_0x21fb05(0x203)&&Object['prototype'][_0x21fb05(0x1e2)][_0x21fb05(0x1e4)](_0x288f99,_0x4ea8a6))__createBinding(_0x52a86a,_0x288f99,_0x4ea8a6);}return __setModuleDefault(_0x52a86a,_0x288f99),_0x52a86a;},__importDefault=this&&this['__importDefault']||function(_0x5c403c){return _0x5c403c&&_0x5c403c['__esModule']?_0x5c403c:{'default':_0x5c403c};};function a98_0x3303(_0x4d82ff,_0x255908){const _0x160401=a98_0x1033();return a98_0x3303=function(_0x8654b4,_0x3bcc9d){_0x8654b4=_0x8654b4-0x1ce;let _0x1033bd=_0x160401[_0x8654b4];return _0x1033bd;},a98_0x3303(_0x4d82ff,_0x255908);}Object[a98_0x4182fc(0x1e0)](exports,'__esModule',{'value':!![]}),exports[a98_0x4182fc(0x1d6)]=void 0x0;const path_1=__importStar(require(a98_0x4182fc(0x1f7))),fs_utils_1=require(a98_0x4182fc(0x1e1)),promises_1=require('fs/promises'),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a98_0x4182fc(0x1fc)),sync_1=require(a98_0x4182fc(0x1e8)),utils_1=require(a98_0x4182fc(0x212)),not_found_error_1=require(a98_0x4182fc(0x1dd)),job_1=require(a98_0x4182fc(0x1d2)),job_utils_1=__importDefault(require(a98_0x4182fc(0x1e5))),constants_1=require('../constants'),path_2=require('../../../configs/path');function a98_0x1033(){const _0x15d40a=['setJobStatus','runJob','../../../constants/job','setJobError','readFile','6513543syLQdP','MaskingService','message','kill','getJobs','constructor','isExistsPath','__createBinding','../../../core/errors/not-found.error','parse','writable','defineProperty','../../shared/utils/fs.utils','hasOwnProperty','toString','call','../../shared/utils/job.utils','getJobState','980483eKqtII','csv-parse/sync','generateJobId','completedDate','JobStatus','(((.+)+)+)+$','10waOQBe','get','__importStar','MANIFEST_FILENAME','logErrorStartJob','catch','utf-8','makeDir','getJobDetails','4718912nlaTuA','path','getOwnPropertyDescriptor','JOB_LOG_STATE_FILENAME','configurable','1846954AsbRrj','../job/enums/logger.enums','6Sueaon','writeFile','getJobsIds','sortJobsIds','slice','12061098QCZixZ','default','LoggerJobState','apply','JOB_LOG_DETAILS_NAME','createMaskingJob','__esModule','getLog','FsUtils','4xfLFcS','dataPath','maskingFolderPath','NotFoundError','1081090DwHBBp','JOB_LOG_STATE_NAME','\x20not\x20found.','@flosum/utils','status','JOB_LOG_DETAILS_FILENAME','create','JOB_PATH','stringify','953397RJtVdT','join','search'];a98_0x1033=function(){return _0x15d40a;};return a98_0x1033();}class MaskingService{static async[a98_0x4182fc(0x207)](_0x3ca75f){const _0xf467d9=a98_0x4182fc,_0x4089f0=job_utils_1[_0xf467d9(0x203)][_0xf467d9(0x1e9)](),_0x562c5d=(0x0,path_1['join'])(MaskingService[_0xf467d9(0x20d)],_0x4089f0);await(0x0,fs_utils_1[_0xf467d9(0x1f4)])(_0x562c5d),await(0x0,promises_1[_0xf467d9(0x1fe)])(_0x562c5d+'/'+job_1[_0xf467d9(0x1f0)],JSON[_0xf467d9(0x217)]({'details':_0x3ca75f}));const _0xdd91f9=await new logger_job_state_1[(_0xf467d9(0x204))](_0x562c5d,_0x4089f0)['init']([]);await _0xdd91f9[_0xf467d9(0x1d8)]();const _0x1d2ff9=path_1[_0xf467d9(0x203)]['join'](__dirname,job_1[_0xf467d9(0x216)]);return job_utils_1['default'][_0xf467d9(0x1d1)](_0x1d2ff9,{'jobStorePath':_0x562c5d,'jobId':_0x4089f0})[_0xf467d9(0x1f2)](_0xd00d96=>this['logErrorStartJob'](_0x562c5d,_0x4089f0,_0xd00d96)),{'jobId':_0x4089f0};}static async[a98_0x4182fc(0x1d9)](_0x9a5436,_0x2062d2){const _0x11a422=a98_0x4182fc,_0x175e2f=await job_utils_1[_0x11a422(0x203)][_0x11a422(0x1ff)](MaskingService[_0x11a422(0x20d)]),_0x3d5641=await job_utils_1[_0x11a422(0x203)][_0x11a422(0x200)](MaskingService['maskingFolderPath'],_0x175e2f),_0x3fdb61=_0x3d5641[_0x11a422(0x201)](_0x2062d2,_0x2062d2+_0x9a5436),_0x34b62f=[];for(const _0x5a2ace of _0x3fdb61){const _0x5c71ac=await this[_0x11a422(0x1e6)](_0x5a2ace,![]);_0x34b62f['push'](_0x5c71ac);}return _0x34b62f;}static async[a98_0x4182fc(0x1e6)](_0x23d811,_0x2d3622){const _0x3db130=a98_0x4182fc,_0x1684ff=await this[_0x3db130(0x209)](_0x23d811,job_1[_0x3db130(0x1f9)],constants_1[_0x3db130(0x210)]),_0x3b0950=JSON[_0x3db130(0x1de)](_0x1684ff),_0x2b4543={'id':_0x3b0950['id'],'status':_0x3b0950[_0x3db130(0x213)],'createdDate':_0x3b0950['createdDate'],'completedDate':_0x3b0950[_0x3db130(0x1ea)],'successful':_0x3b0950['successful'],'failed':_0x3b0950['failed']};return _0x2d3622?_0x3b0950:_0x2b4543;}static async[a98_0x4182fc(0x1f5)](_0x2407cb){const _0xd78c86=a98_0x4182fc,_0xf8604=await this[_0xd78c86(0x209)](_0x2407cb,job_1[_0xd78c86(0x214)],constants_1[_0xd78c86(0x206)]);return(0x0,sync_1[_0xd78c86(0x1de)])(_0xf8604,{'columns':!![]});}static async[a98_0x4182fc(0x209)](_0x302541,_0x113b95,_0x9bf9af){const _0x1afe21=a98_0x4182fc,_0x4ff121=(0x0,path_1[_0x1afe21(0x1ce)])(MaskingService['maskingFolderPath'],_0x302541),_0x59a5fd=(0x0,path_1[_0x1afe21(0x1ce)])(_0x4ff121,_0x113b95);if(!await utils_1['FsUtils']['isExistsPath'](_0x4ff121))throw new not_found_error_1[(_0x1afe21(0x20e))]('Job\x20Id\x20not\x20found.');if(!await utils_1[_0x1afe21(0x20a)][_0x1afe21(0x1db)](_0x59a5fd))throw new not_found_error_1['NotFoundError'](_0x9bf9af+_0x1afe21(0x211));return(0x0,promises_1[_0x1afe21(0x1d4)])(_0x59a5fd,{'encoding':_0x1afe21(0x1f3)});}static async[a98_0x4182fc(0x1f1)](_0x3fa538,_0x3821f5,_0x48cd48){const _0x45f394=a98_0x4182fc,_0x3a4772=await new logger_job_state_1[(_0x45f394(0x204))](_0x3fa538,_0x3821f5)['init']([]);_0x3a4772[_0x45f394(0x1d0)](logger_enums_1[_0x45f394(0x1eb)]['FAILED']),_0x3a4772[_0x45f394(0x1d3)](_0x48cd48[_0x45f394(0x1d7)]),await _0x3a4772[_0x45f394(0x1d8)]();}}exports[a98_0x4182fc(0x1d6)]=MaskingService,MaskingService[a98_0x4182fc(0x20d)]=path_1[a98_0x4182fc(0x203)]['join'](path_2[a98_0x4182fc(0x20c)],constants_1['DATA_MASKING_FOLDER_NAME']);