const a80_0x3961f1=a80_0x1f1d;(function(_0x246484,_0x4d0397){const _0x3ef5e6=a80_0x1f1d,_0x3fda9b=_0x246484();while(!![]){try{const _0x4b2ec7=parseInt(_0x3ef5e6(0xda))/0x1+-parseInt(_0x3ef5e6(0xc5))/0x2+parseInt(_0x3ef5e6(0xcd))/0x3+parseInt(_0x3ef5e6(0xb3))/0x4*(-parseInt(_0x3ef5e6(0xce))/0x5)+parseInt(_0x3ef5e6(0xd6))/0x6*(-parseInt(_0x3ef5e6(0xb7))/0x7)+parseInt(_0x3ef5e6(0xae))/0x8*(parseInt(_0x3ef5e6(0xb2))/0x9)+-parseInt(_0x3ef5e6(0xdf))/0xa*(parseInt(_0x3ef5e6(0x9b))/0xb);if(_0x4b2ec7===_0x4d0397)break;else _0x3fda9b['push'](_0x3fda9b['shift']());}catch(_0x6cc93f){_0x3fda9b['push'](_0x3fda9b['shift']());}}}(a80_0x429a,0x5190b));const a80_0x5d6507=(function(){let _0x51d065=!![];return function(_0xd56497,_0x15d081){const _0xa6aadc=_0x51d065?function(){const _0x35b8fb=a80_0x1f1d;if(_0x15d081){const _0x4f7ec2=_0x15d081[_0x35b8fb(0xbf)](_0xd56497,arguments);return _0x15d081=null,_0x4f7ec2;}}:function(){};return _0x51d065=![],_0xa6aadc;};}()),a80_0x5ec322=a80_0x5d6507(this,function(){const _0xc55222=a80_0x1f1d;return a80_0x5ec322[_0xc55222(0xb5)]()['search']('(((.+)+)+)+$')[_0xc55222(0xb5)]()[_0xc55222(0xbc)](a80_0x5ec322)[_0xc55222(0xe2)](_0xc55222(0xd1));});function a80_0x1f1d(_0x256bdd,_0x502c6e){const _0x11d997=a80_0x429a();return a80_0x1f1d=function(_0x5ec322,_0x5d6507){_0x5ec322=_0x5ec322-0x9a;let _0x429ae2=_0x11d997[_0x5ec322];return _0x429ae2;},a80_0x1f1d(_0x256bdd,_0x502c6e);}a80_0x5ec322();'use strict';var __createBinding=this&&this[a80_0x3961f1(0xde)]||(Object[a80_0x3961f1(0xdd)]?function(_0x15aa34,_0x53a3f8,_0x38bdbb,_0x31e823){const _0x2e7bac=a80_0x3961f1;if(_0x31e823===undefined)_0x31e823=_0x38bdbb;var _0x13fe99=Object[_0x2e7bac(0xb9)](_0x53a3f8,_0x38bdbb);(!_0x13fe99||(_0x2e7bac(0xb0)in _0x13fe99?!_0x53a3f8[_0x2e7bac(0xcf)]:_0x13fe99[_0x2e7bac(0xba)]||_0x13fe99[_0x2e7bac(0xd0)]))&&(_0x13fe99={'enumerable':!![],'get':function(){return _0x53a3f8[_0x38bdbb];}}),Object[_0x2e7bac(0xa7)](_0x15aa34,_0x31e823,_0x13fe99);}:function(_0xb6e82a,_0x32c06f,_0x4dc485,_0x2ce834){if(_0x2ce834===undefined)_0x2ce834=_0x4dc485;_0xb6e82a[_0x2ce834]=_0x32c06f[_0x4dc485];}),__setModuleDefault=this&&this[a80_0x3961f1(0xa0)]||(Object[a80_0x3961f1(0xdd)]?function(_0x82ef9d,_0x7656e0){const _0x3d6355=a80_0x3961f1;Object[_0x3d6355(0xa7)](_0x82ef9d,'default',{'enumerable':!![],'value':_0x7656e0});}:function(_0x1124e5,_0x257729){_0x1124e5['default']=_0x257729;}),__importStar=this&&this[a80_0x3961f1(0xe0)]||function(_0x3886b7){const _0x3ebe54=a80_0x3961f1;if(_0x3886b7&&_0x3886b7['__esModule'])return _0x3886b7;var _0x4011b5={};if(_0x3886b7!=null){for(var _0x37f972 in _0x3886b7)if(_0x37f972!==_0x3ebe54(0xcb)&&Object[_0x3ebe54(0xaf)]['hasOwnProperty'][_0x3ebe54(0xcc)](_0x3886b7,_0x37f972))__createBinding(_0x4011b5,_0x3886b7,_0x37f972);}return __setModuleDefault(_0x4011b5,_0x3886b7),_0x4011b5;},__importDefault=this&&this[a80_0x3961f1(0xa2)]||function(_0x45ccce){const _0x422c4f=a80_0x3961f1;return _0x45ccce&&_0x45ccce[_0x422c4f(0xcf)]?_0x45ccce:{'default':_0x45ccce};};function a80_0x429a(){const _0x5303ce=['JOB_LOG_STATE_NAME','slice','completedDate','63852XFKkrR','DATA_MASKING_FOLDER_NAME','getJobs','@flosum/utils','182931EhnAtx','../constants','path','create','__createBinding','192630fTWTaG','__importStar','parse','search','MANIFEST_FILENAME','297VIyczh','makeDir','JOB_PATH','createdDate','kill','__setModuleDefault','dataPath','__importDefault','failed','getJobsIds','fs/promises','JOB_LOG_STATE_FILENAME','defineProperty','\x20not\x20found.','../../../configs/path','readFile','push','logErrorStartJob','JOB_LOG_DETAILS_NAME','56EcYnNw','prototype','get','catch','734940NAkFBd','4YFJFNQ','getJobDetails','toString','FsUtils','154mzfBWc','init','getOwnPropertyDescriptor','writable','maskingFolderPath','constructor','generateJobId','getLog','apply','JOB_LOG_DETAILS_FILENAME','JobStatus','join','../job/enums/logger.enums','../../../core/errors/not-found.error','363138LeQdVh','getJobState','isExistsPath','successful','NotFoundError','Job\x20Id\x20not\x20found.','default','call','1788501LaEzTt','404165JNoAjI','__esModule','configurable','(((.+)+)+)+$','csv-parse/sync'];a80_0x429a=function(){return _0x5303ce;};return a80_0x429a();}Object[a80_0x3961f1(0xa7)](exports,a80_0x3961f1(0xcf),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a80_0x3961f1(0xdc))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a80_0x3961f1(0xa5)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a80_0x3961f1(0xc3)),sync_1=require(a80_0x3961f1(0xd2)),utils_1=require(a80_0x3961f1(0xd9)),not_found_error_1=require(a80_0x3961f1(0xc4)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a80_0x3961f1(0xdb)),path_2=require(a80_0x3961f1(0xa9));class MaskingService{static async['createMaskingJob'](_0x73946c){const _0x37b5ca=a80_0x3961f1,_0x4355ec=job_utils_1[_0x37b5ca(0xcb)][_0x37b5ca(0xbd)](),_0x395a8c=(0x0,path_1['join'])(MaskingService[_0x37b5ca(0xbb)],_0x4355ec);await(0x0,fs_utils_1[_0x37b5ca(0x9c)])(_0x395a8c),await(0x0,promises_1['writeFile'])(_0x395a8c+'/'+job_1[_0x37b5ca(0x9a)],JSON['stringify']({'details':_0x73946c}));const _0x24fa64=await new logger_job_state_1['LoggerJobState'](_0x395a8c,_0x4355ec)[_0x37b5ca(0xb8)]([]);await _0x24fa64[_0x37b5ca(0x9f)]();const _0x527024=path_1[_0x37b5ca(0xcb)][_0x37b5ca(0xc2)](__dirname,job_1[_0x37b5ca(0x9d)]);return job_utils_1[_0x37b5ca(0xcb)]['runJob'](_0x527024,{'jobStorePath':_0x395a8c,'jobId':_0x4355ec})[_0x37b5ca(0xb1)](_0x40dcef=>this[_0x37b5ca(0xac)](_0x395a8c,_0x4355ec,_0x40dcef)),{'jobId':_0x4355ec};}static async[a80_0x3961f1(0xd8)](_0x26a3ac,_0x3b1ee5){const _0x232f4d=a80_0x3961f1,_0x54a20f=await job_utils_1[_0x232f4d(0xcb)][_0x232f4d(0xa4)](MaskingService['maskingFolderPath']),_0x61a208=await job_utils_1[_0x232f4d(0xcb)]['sortJobsIds'](MaskingService[_0x232f4d(0xbb)],_0x54a20f),_0x5892de=_0x61a208[_0x232f4d(0xd4)](_0x3b1ee5,_0x3b1ee5+_0x26a3ac),_0x5ce6d8=[];for(const _0x26b2b0 of _0x5892de){const _0x3cdf96=await this[_0x232f4d(0xc6)](_0x26b2b0,![]);_0x5ce6d8[_0x232f4d(0xab)](_0x3cdf96);}return _0x5ce6d8;}static async[a80_0x3961f1(0xc6)](_0x33ff6e,_0x89938f){const _0x1f3104=a80_0x3961f1,_0x36329d=await this[_0x1f3104(0xbe)](_0x33ff6e,job_1[_0x1f3104(0xa6)],constants_1[_0x1f3104(0xd3)]),_0x3ac1bf=JSON[_0x1f3104(0xe1)](_0x36329d),_0x47ce56={'id':_0x3ac1bf['id'],'status':_0x3ac1bf['status'],'createdDate':_0x3ac1bf[_0x1f3104(0x9e)],'completedDate':_0x3ac1bf[_0x1f3104(0xd5)],'successful':_0x3ac1bf[_0x1f3104(0xc8)],'failed':_0x3ac1bf[_0x1f3104(0xa3)]};return _0x89938f?_0x3ac1bf:_0x47ce56;}static async[a80_0x3961f1(0xb4)](_0x517b71){const _0x34ddbf=a80_0x3961f1,_0x245a7f=await this[_0x34ddbf(0xbe)](_0x517b71,job_1[_0x34ddbf(0xc0)],constants_1[_0x34ddbf(0xad)]);return(0x0,sync_1['parse'])(_0x245a7f,{'columns':!![]});}static async[a80_0x3961f1(0xbe)](_0x1be494,_0x284143,_0x277ad8){const _0x1ff87a=a80_0x3961f1,_0xf1690c=(0x0,path_1[_0x1ff87a(0xc2)])(MaskingService['maskingFolderPath'],_0x1be494),_0x47a6a5=(0x0,path_1[_0x1ff87a(0xc2)])(_0xf1690c,_0x284143);if(!await utils_1['FsUtils']['isExistsPath'](_0xf1690c))throw new not_found_error_1[(_0x1ff87a(0xc9))](_0x1ff87a(0xca));if(!await utils_1[_0x1ff87a(0xb6)][_0x1ff87a(0xc7)](_0x47a6a5))throw new not_found_error_1[(_0x1ff87a(0xc9))](_0x277ad8+_0x1ff87a(0xa8));return(0x0,promises_1[_0x1ff87a(0xaa)])(_0x47a6a5,{'encoding':'utf-8'});}static async[a80_0x3961f1(0xac)](_0x1bd71c,_0x34b864,_0x3f2680){const _0x571b01=a80_0x3961f1,_0xb59de0=await new logger_job_state_1['LoggerJobState'](_0x1bd71c,_0x34b864)['init']([]);_0xb59de0['setJobStatus'](logger_enums_1[_0x571b01(0xc1)]['FAILED']),_0xb59de0['setJobError'](_0x3f2680['message']),await _0xb59de0[_0x571b01(0x9f)]();}}exports['MaskingService']=MaskingService,MaskingService[a80_0x3961f1(0xbb)]=path_1[a80_0x3961f1(0xcb)]['join'](path_2[a80_0x3961f1(0xa1)],constants_1[a80_0x3961f1(0xd7)]);