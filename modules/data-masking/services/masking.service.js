const a81_0x499bd3=a81_0x23a1;(function(_0x3476c5,_0x2b2b0c){const _0x4f63ae=a81_0x23a1,_0x413919=_0x3476c5();while(!![]){try{const _0x54303f=parseInt(_0x4f63ae(0x11b))/0x1+parseInt(_0x4f63ae(0x106))/0x2+parseInt(_0x4f63ae(0x135))/0x3+-parseInt(_0x4f63ae(0xfe))/0x4*(parseInt(_0x4f63ae(0x108))/0x5)+-parseInt(_0x4f63ae(0x138))/0x6+parseInt(_0x4f63ae(0x112))/0x7+-parseInt(_0x4f63ae(0x11f))/0x8*(-parseInt(_0x4f63ae(0x10d))/0x9);if(_0x54303f===_0x2b2b0c)break;else _0x413919['push'](_0x413919['shift']());}catch(_0x398f4f){_0x413919['push'](_0x413919['shift']());}}}(a81_0x5ca8,0xc84a8));const a81_0x223deb=(function(){let _0x5cd8f3=!![];return function(_0x236211,_0x3ab823){const _0x191239=_0x5cd8f3?function(){const _0x4493d3=a81_0x23a1;if(_0x3ab823){const _0x336d9d=_0x3ab823[_0x4493d3(0x12c)](_0x236211,arguments);return _0x3ab823=null,_0x336d9d;}}:function(){};return _0x5cd8f3=![],_0x191239;};}()),a81_0x1d10dd=a81_0x223deb(this,function(){const _0x2a2ecb=a81_0x23a1;return a81_0x1d10dd[_0x2a2ecb(0xf9)]()[_0x2a2ecb(0x111)](_0x2a2ecb(0xfd))[_0x2a2ecb(0xf9)]()[_0x2a2ecb(0xf8)](a81_0x1d10dd)['search'](_0x2a2ecb(0xfd));});a81_0x1d10dd();'use strict';function a81_0x5ca8(){const _0x9f343=['constructor','toString','fs/promises','__importDefault','../job/enums/logger.enums','(((.+)+)+)+$','8UwgQgq','__setModuleDefault','JOB_PATH','writeFile','push','../../../constants/job','utf-8','default','1059694VbymBl','Job\x20Id\x20not\x20found.','2097170XeqWuB','getJobState','stringify','dataPath','JOB_LOG_STATE_FILENAME','3369348bJKaqr','JOB_LOG_STATE_NAME','maskingFolderPath','../job/classes/logger/logger-job-state','search','3449159SnjHGm','getJobsIds','MaskingService','@flosum/utils','\x20not\x20found.','call','../../../configs/path','join','makeDir','1045310hcrXyf','catch','LoggerJobState','path','16MMypqj','DATA_MASKING_FOLDER_NAME','status','defineProperty','parse','readFile','FsUtils','init','JOB_LOG_DETAILS_FILENAME','FAILED','completedDate','createdDate','__esModule','apply','setJobStatus','slice','isExistsPath','../../shared/utils/job.utils','writable','getLog','../../shared/utils/fs.utils','get','205554FBuHap','generateJobId','configurable','7355376GnglDW','failed','runJob','create','successful','JOB_LOG_DETAILS_NAME','../constants','kill','getOwnPropertyDescriptor','../../../core/errors/not-found.error'];a81_0x5ca8=function(){return _0x9f343;};return a81_0x5ca8();}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x1e91ec,_0x451e2a,_0x1f7e90,_0x2c4f93){const _0x4886d2=a81_0x23a1;if(_0x2c4f93===undefined)_0x2c4f93=_0x1f7e90;var _0x54deb5=Object[_0x4886d2(0xf6)](_0x451e2a,_0x1f7e90);(!_0x54deb5||(_0x4886d2(0x134)in _0x54deb5?!_0x451e2a[_0x4886d2(0x12b)]:_0x54deb5[_0x4886d2(0x131)]||_0x54deb5[_0x4886d2(0x137)]))&&(_0x54deb5={'enumerable':!![],'get':function(){return _0x451e2a[_0x1f7e90];}}),Object[_0x4886d2(0x122)](_0x1e91ec,_0x2c4f93,_0x54deb5);}:function(_0x49ac86,_0x1af5ae,_0x3f9fcd,_0x1d861b){if(_0x1d861b===undefined)_0x1d861b=_0x3f9fcd;_0x49ac86[_0x1d861b]=_0x1af5ae[_0x3f9fcd];}),__setModuleDefault=this&&this[a81_0x499bd3(0xff)]||(Object[a81_0x499bd3(0x13b)]?function(_0x3d6bca,_0x243ee9){const _0x5e0b5e=a81_0x499bd3;Object[_0x5e0b5e(0x122)](_0x3d6bca,'default',{'enumerable':!![],'value':_0x243ee9});}:function(_0x28cd1a,_0x2787a2){const _0x4f6f7c=a81_0x499bd3;_0x28cd1a[_0x4f6f7c(0x105)]=_0x2787a2;}),__importStar=this&&this['__importStar']||function(_0x41dced){const _0x5ed79c=a81_0x499bd3;if(_0x41dced&&_0x41dced['__esModule'])return _0x41dced;var _0x34caf6={};if(_0x41dced!=null){for(var _0x44e277 in _0x41dced)if(_0x44e277!=='default'&&Object['prototype']['hasOwnProperty'][_0x5ed79c(0x117)](_0x41dced,_0x44e277))__createBinding(_0x34caf6,_0x41dced,_0x44e277);}return __setModuleDefault(_0x34caf6,_0x41dced),_0x34caf6;},__importDefault=this&&this[a81_0x499bd3(0xfb)]||function(_0x115f08){const _0x37417c=a81_0x499bd3;return _0x115f08&&_0x115f08[_0x37417c(0x12b)]?_0x115f08:{'default':_0x115f08};};Object[a81_0x499bd3(0x122)](exports,a81_0x499bd3(0x12b),{'value':!![]}),exports[a81_0x499bd3(0x114)]=void 0x0;const path_1=__importStar(require(a81_0x499bd3(0x11e))),fs_utils_1=require(a81_0x499bd3(0x133)),promises_1=require(a81_0x499bd3(0xfa)),logger_job_state_1=require(a81_0x499bd3(0x110)),logger_enums_1=require(a81_0x499bd3(0xfc)),sync_1=require('csv-parse/sync'),utils_1=require(a81_0x499bd3(0x115)),not_found_error_1=require(a81_0x499bd3(0xf7)),job_1=require(a81_0x499bd3(0x103)),job_utils_1=__importDefault(require(a81_0x499bd3(0x130))),constants_1=require(a81_0x499bd3(0xf4)),path_2=require(a81_0x499bd3(0x118));function a81_0x23a1(_0xe22e54,_0x55e67a){const _0x5e823b=a81_0x5ca8();return a81_0x23a1=function(_0x1d10dd,_0x223deb){_0x1d10dd=_0x1d10dd-0xf2;let _0x5ca880=_0x5e823b[_0x1d10dd];return _0x5ca880;},a81_0x23a1(_0xe22e54,_0x55e67a);}class MaskingService{static async['createMaskingJob'](_0x4b936b){const _0x4c20f2=a81_0x499bd3,_0x5209df=job_utils_1[_0x4c20f2(0x105)][_0x4c20f2(0x136)](),_0x316191=(0x0,path_1[_0x4c20f2(0x119)])(MaskingService[_0x4c20f2(0x10f)],_0x5209df);await(0x0,fs_utils_1[_0x4c20f2(0x11a)])(_0x316191),await(0x0,promises_1[_0x4c20f2(0x101)])(_0x316191+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x4c20f2(0x10a)]({'details':_0x4b936b}));const _0x33e10a=await new logger_job_state_1[(_0x4c20f2(0x11d))](_0x316191,_0x5209df)['init']([]);await _0x33e10a[_0x4c20f2(0xf5)]();const _0x3937e7=path_1[_0x4c20f2(0x105)][_0x4c20f2(0x119)](__dirname,job_1[_0x4c20f2(0x100)]);return job_utils_1[_0x4c20f2(0x105)][_0x4c20f2(0x13a)](_0x3937e7,{'jobStorePath':_0x316191,'jobId':_0x5209df})[_0x4c20f2(0x11c)](_0x27b8fe=>this['logErrorStartJob'](_0x316191,_0x5209df,_0x27b8fe)),{'jobId':_0x5209df};}static async['getJobs'](_0x1a86c3,_0x44f13f){const _0x49a459=a81_0x499bd3,_0x3a52bc=await job_utils_1[_0x49a459(0x105)][_0x49a459(0x113)](MaskingService[_0x49a459(0x10f)]),_0x158dba=await job_utils_1[_0x49a459(0x105)]['sortJobsIds'](MaskingService[_0x49a459(0x10f)],_0x3a52bc),_0x19d059=_0x158dba[_0x49a459(0x12e)](_0x44f13f,_0x44f13f+_0x1a86c3),_0x17cebb=[];for(const _0x46c4c8 of _0x19d059){const _0x4516c9=await this[_0x49a459(0x109)](_0x46c4c8,![]);_0x17cebb[_0x49a459(0x102)](_0x4516c9);}return _0x17cebb;}static async[a81_0x499bd3(0x109)](_0x189308,_0x194197){const _0x3ccf04=a81_0x499bd3,_0x58b79b=await this[_0x3ccf04(0x132)](_0x189308,job_1[_0x3ccf04(0x10c)],constants_1[_0x3ccf04(0x10e)]),_0x8ec941=JSON[_0x3ccf04(0x123)](_0x58b79b),_0x5278a1={'id':_0x8ec941['id'],'status':_0x8ec941[_0x3ccf04(0x121)],'createdDate':_0x8ec941[_0x3ccf04(0x12a)],'completedDate':_0x8ec941[_0x3ccf04(0x129)],'successful':_0x8ec941[_0x3ccf04(0xf2)],'failed':_0x8ec941[_0x3ccf04(0x139)]};return _0x194197?_0x8ec941:_0x5278a1;}static async['getJobDetails'](_0x4c6f47){const _0x17eff8=a81_0x499bd3,_0x3b9211=await this[_0x17eff8(0x132)](_0x4c6f47,job_1[_0x17eff8(0x127)],constants_1[_0x17eff8(0xf3)]);return(0x0,sync_1['parse'])(_0x3b9211,{'columns':!![]});}static async[a81_0x499bd3(0x132)](_0x4cd62b,_0x54f32f,_0x245970){const _0x36ebf6=a81_0x499bd3,_0x5387ad=(0x0,path_1['join'])(MaskingService[_0x36ebf6(0x10f)],_0x4cd62b),_0x4b8660=(0x0,path_1['join'])(_0x5387ad,_0x54f32f);if(!await utils_1[_0x36ebf6(0x125)][_0x36ebf6(0x12f)](_0x5387ad))throw new not_found_error_1['NotFoundError'](_0x36ebf6(0x107));if(!await utils_1[_0x36ebf6(0x125)][_0x36ebf6(0x12f)](_0x4b8660))throw new not_found_error_1['NotFoundError'](_0x245970+_0x36ebf6(0x116));return(0x0,promises_1[_0x36ebf6(0x124)])(_0x4b8660,{'encoding':_0x36ebf6(0x104)});}static async['logErrorStartJob'](_0x6bff0d,_0x5de37d,_0x27dfeb){const _0x32bd51=a81_0x499bd3,_0x468401=await new logger_job_state_1['LoggerJobState'](_0x6bff0d,_0x5de37d)[_0x32bd51(0x126)]([]);_0x468401[_0x32bd51(0x12d)](logger_enums_1['JobStatus'][_0x32bd51(0x128)]),_0x468401['setJobError'](_0x27dfeb['message']),await _0x468401[_0x32bd51(0xf5)]();}}exports['MaskingService']=MaskingService,MaskingService['maskingFolderPath']=path_1['default'][a81_0x499bd3(0x119)](path_2[a81_0x499bd3(0x10b)],constants_1[a81_0x499bd3(0x120)]);