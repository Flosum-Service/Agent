const a99_0x123dd4=a99_0x562a;(function(_0x3bb6f6,_0x5da17a){const _0x3e2871=a99_0x562a,_0x52f84b=_0x3bb6f6();while(!![]){try{const _0x2bc659=-parseInt(_0x3e2871(0x11b))/0x1+-parseInt(_0x3e2871(0x12d))/0x2*(-parseInt(_0x3e2871(0x119))/0x3)+-parseInt(_0x3e2871(0x100))/0x4*(-parseInt(_0x3e2871(0x131))/0x5)+parseInt(_0x3e2871(0xf5))/0x6+parseInt(_0x3e2871(0x104))/0x7*(-parseInt(_0x3e2871(0x120))/0x8)+-parseInt(_0x3e2871(0x130))/0x9*(-parseInt(_0x3e2871(0x106))/0xa)+parseInt(_0x3e2871(0x115))/0xb*(-parseInt(_0x3e2871(0x10b))/0xc);if(_0x2bc659===_0x5da17a)break;else _0x52f84b['push'](_0x52f84b['shift']());}catch(_0x48e9f8){_0x52f84b['push'](_0x52f84b['shift']());}}}(a99_0x23fd,0xd57f9));const a99_0x285cbe=(function(){let _0x52e7af=!![];return function(_0x4b98bd,_0x256c5b){const _0x4d5eaf=_0x52e7af?function(){const _0x309fec=a99_0x562a;if(_0x256c5b){const _0x515b31=_0x256c5b[_0x309fec(0x128)](_0x4b98bd,arguments);return _0x256c5b=null,_0x515b31;}}:function(){};return _0x52e7af=![],_0x4d5eaf;};}()),a99_0x1dae19=a99_0x285cbe(this,function(){const _0x3a415b=a99_0x562a;return a99_0x1dae19[_0x3a415b(0x108)]()[_0x3a415b(0x103)]('(((.+)+)+)+$')[_0x3a415b(0x108)]()[_0x3a415b(0x107)](a99_0x1dae19)[_0x3a415b(0x103)]('(((.+)+)+)+$');});function a99_0x23fd(){const _0x468410=['__createBinding','failed','440967uAKLvr','../../../configs/path','1020939qYeFUP','completedDate','makeDir','setJobStatus','catch','8qgPfSJ','FAILED','Job\x20Id\x20not\x20found.','../job/classes/logger/logger-job-state','JOB_PATH','setJobError','utf-8','getLog','apply','runJob','writable','path','../../../constants/job','4AjWDOA','LoggerJobState','../../shared/utils/job.utils','27bibdcb','4217290nhpYtb','prototype','maskingFolderPath','stringify','logErrorStartJob','getJobsIds','parse','\x20not\x20found.','message','../job/enums/logger.enums','JOB_LOG_DETAILS_NAME','kill','JOB_LOG_DETAILS_FILENAME','__esModule','JOB_LOG_STATE_FILENAME','FsUtils','isExistsPath','8017404bCZVpM','DATA_MASKING_FOLDER_NAME','../../../core/errors/not-found.error','successful','join','get','defineProperty','@flosum/utils','getOwnPropertyDescriptor','getJobs','fs/promises','8BtHJAY','getJobState','NotFoundError','search','57505pxsSNo','createMaskingJob','4439730SYtNAD','constructor','toString','MaskingService','default','48NTSzaz','slice','__importStar','call','__importDefault','push','init','csv-parse/sync','hasOwnProperty','configurable','7549861HhMUud','getJobDetails'];a99_0x23fd=function(){return _0x468410;};return a99_0x23fd();}a99_0x1dae19();'use strict';var __createBinding=this&&this[a99_0x123dd4(0x117)]||(Object['create']?function(_0x3c176d,_0xa820a3,_0x488244,_0x1af531){const _0x5c827e=a99_0x123dd4;if(_0x1af531===undefined)_0x1af531=_0x488244;var _0x26a870=Object[_0x5c827e(0xfd)](_0xa820a3,_0x488244);(!_0x26a870||(_0x5c827e(0xfa)in _0x26a870?!_0xa820a3['__esModule']:_0x26a870[_0x5c827e(0x12a)]||_0x26a870[_0x5c827e(0x114)]))&&(_0x26a870={'enumerable':!![],'get':function(){return _0xa820a3[_0x488244];}}),Object[_0x5c827e(0xfb)](_0x3c176d,_0x1af531,_0x26a870);}:function(_0x23ab4c,_0x1adfbd,_0x1843d4,_0x2f80e0){if(_0x2f80e0===undefined)_0x2f80e0=_0x1843d4;_0x23ab4c[_0x2f80e0]=_0x1adfbd[_0x1843d4];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0xa7e2e0,_0x174392){const _0x2f8beb=a99_0x123dd4;Object['defineProperty'](_0xa7e2e0,_0x2f8beb(0x10a),{'enumerable':!![],'value':_0x174392});}:function(_0x2aaa4,_0x46b8cb){_0x2aaa4['default']=_0x46b8cb;}),__importStar=this&&this[a99_0x123dd4(0x10d)]||function(_0x3773aa){const _0x552702=a99_0x123dd4;if(_0x3773aa&&_0x3773aa[_0x552702(0xf1)])return _0x3773aa;var _0x399697={};if(_0x3773aa!=null){for(var _0x4518ea in _0x3773aa)if(_0x4518ea!==_0x552702(0x10a)&&Object[_0x552702(0x132)][_0x552702(0x113)][_0x552702(0x10e)](_0x3773aa,_0x4518ea))__createBinding(_0x399697,_0x3773aa,_0x4518ea);}return __setModuleDefault(_0x399697,_0x3773aa),_0x399697;},__importDefault=this&&this[a99_0x123dd4(0x10f)]||function(_0x5794da){const _0x5d49e4=a99_0x123dd4;return _0x5794da&&_0x5794da[_0x5d49e4(0xf1)]?_0x5794da:{'default':_0x5794da};};Object[a99_0x123dd4(0xfb)](exports,a99_0x123dd4(0xf1),{'value':!![]}),exports[a99_0x123dd4(0x109)]=void 0x0;function a99_0x562a(_0x4550e3,_0xc6e8af){const _0x15a135=a99_0x23fd();return a99_0x562a=function(_0x1dae19,_0x285cbe){_0x1dae19=_0x1dae19-0xef;let _0x23fda4=_0x15a135[_0x1dae19];return _0x23fda4;},a99_0x562a(_0x4550e3,_0xc6e8af);}const path_1=__importStar(require(a99_0x123dd4(0x12b))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a99_0x123dd4(0xff)),logger_job_state_1=require(a99_0x123dd4(0x123)),logger_enums_1=require(a99_0x123dd4(0x13a)),sync_1=require(a99_0x123dd4(0x112)),utils_1=require(a99_0x123dd4(0xfc)),not_found_error_1=require(a99_0x123dd4(0xf7)),job_1=require(a99_0x123dd4(0x12c)),job_utils_1=__importDefault(require(a99_0x123dd4(0x12f))),constants_1=require('../constants'),path_2=require(a99_0x123dd4(0x11a));class MaskingService{static async[a99_0x123dd4(0x105)](_0x522d2c){const _0x555b34=a99_0x123dd4,_0x2887a7=job_utils_1[_0x555b34(0x10a)]['generateJobId'](),_0x3487ee=(0x0,path_1[_0x555b34(0xf9)])(MaskingService[_0x555b34(0x133)],_0x2887a7);await(0x0,fs_utils_1[_0x555b34(0x11d)])(_0x3487ee),await(0x0,promises_1['writeFile'])(_0x3487ee+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x555b34(0x134)]({'details':_0x522d2c}));const _0x2d66d3=await new logger_job_state_1[(_0x555b34(0x12e))](_0x3487ee,_0x2887a7)[_0x555b34(0x111)]([]);await _0x2d66d3['kill']();const _0x26e8bd=path_1[_0x555b34(0x10a)][_0x555b34(0xf9)](__dirname,job_1[_0x555b34(0x124)]);return job_utils_1['default'][_0x555b34(0x129)](_0x26e8bd,{'jobStorePath':_0x3487ee,'jobId':_0x2887a7})[_0x555b34(0x11f)](_0x413d21=>this[_0x555b34(0x135)](_0x3487ee,_0x2887a7,_0x413d21)),{'jobId':_0x2887a7};}static async[a99_0x123dd4(0xfe)](_0x49a411,_0x1a8421){const _0x1e8da2=a99_0x123dd4,_0x408e8b=await job_utils_1[_0x1e8da2(0x10a)][_0x1e8da2(0x136)](MaskingService[_0x1e8da2(0x133)]),_0x4ffab9=await job_utils_1[_0x1e8da2(0x10a)]['sortJobsIds'](MaskingService['maskingFolderPath'],_0x408e8b),_0x2c802a=_0x4ffab9[_0x1e8da2(0x10c)](_0x1a8421,_0x1a8421+_0x49a411),_0x1f4f70=[];for(const _0x4b1530 of _0x2c802a){const _0x1280bf=await this[_0x1e8da2(0x101)](_0x4b1530,![]);_0x1f4f70[_0x1e8da2(0x110)](_0x1280bf);}return _0x1f4f70;}static async[a99_0x123dd4(0x101)](_0x1f69f4,_0x482617){const _0x1fde16=a99_0x123dd4,_0x2b89f2=await this[_0x1fde16(0x127)](_0x1f69f4,job_1[_0x1fde16(0xf2)],constants_1['JOB_LOG_STATE_NAME']),_0x1abc11=JSON[_0x1fde16(0x137)](_0x2b89f2),_0x310afc={'id':_0x1abc11['id'],'status':_0x1abc11['status'],'createdDate':_0x1abc11['createdDate'],'completedDate':_0x1abc11[_0x1fde16(0x11c)],'successful':_0x1abc11[_0x1fde16(0xf8)],'failed':_0x1abc11[_0x1fde16(0x118)]};return _0x482617?_0x1abc11:_0x310afc;}static async[a99_0x123dd4(0x116)](_0x1455b1){const _0x3d29dd=a99_0x123dd4,_0x3b4844=await this['getLog'](_0x1455b1,job_1[_0x3d29dd(0xf0)],constants_1[_0x3d29dd(0x13b)]);return(0x0,sync_1[_0x3d29dd(0x137)])(_0x3b4844,{'columns':!![]});}static async['getLog'](_0x4623d1,_0x1c690a,_0x1b0496){const _0x33f4d4=a99_0x123dd4,_0x2002f6=(0x0,path_1[_0x33f4d4(0xf9)])(MaskingService[_0x33f4d4(0x133)],_0x4623d1),_0x4c3fda=(0x0,path_1[_0x33f4d4(0xf9)])(_0x2002f6,_0x1c690a);if(!await utils_1['FsUtils']['isExistsPath'](_0x2002f6))throw new not_found_error_1[(_0x33f4d4(0x102))](_0x33f4d4(0x122));if(!await utils_1[_0x33f4d4(0xf3)][_0x33f4d4(0xf4)](_0x4c3fda))throw new not_found_error_1[(_0x33f4d4(0x102))](_0x1b0496+_0x33f4d4(0x138));return(0x0,promises_1['readFile'])(_0x4c3fda,{'encoding':_0x33f4d4(0x126)});}static async[a99_0x123dd4(0x135)](_0x158cd9,_0x328b63,_0x4ba18f){const _0x30798a=a99_0x123dd4,_0x1bfa41=await new logger_job_state_1['LoggerJobState'](_0x158cd9,_0x328b63)['init']([]);_0x1bfa41[_0x30798a(0x11e)](logger_enums_1['JobStatus'][_0x30798a(0x121)]),_0x1bfa41[_0x30798a(0x125)](_0x4ba18f[_0x30798a(0x139)]),await _0x1bfa41[_0x30798a(0xef)]();}}exports['MaskingService']=MaskingService,MaskingService[a99_0x123dd4(0x133)]=path_1[a99_0x123dd4(0x10a)][a99_0x123dd4(0xf9)](path_2['dataPath'],constants_1[a99_0x123dd4(0xf6)]);