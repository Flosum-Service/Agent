const a80_0x3fd23f=a80_0xa561;(function(_0x517b4e,_0x34cdc6){const _0xa28cab=a80_0xa561,_0x4b3355=_0x517b4e();while(!![]){try{const _0x47219a=parseInt(_0xa28cab(0x1f1))/0x1*(-parseInt(_0xa28cab(0x1e8))/0x2)+parseInt(_0xa28cab(0x214))/0x3+parseInt(_0xa28cab(0x1ed))/0x4*(-parseInt(_0xa28cab(0x202))/0x5)+parseInt(_0xa28cab(0x21b))/0x6+-parseInt(_0xa28cab(0x1f4))/0x7*(-parseInt(_0xa28cab(0x21c))/0x8)+-parseInt(_0xa28cab(0x213))/0x9*(-parseInt(_0xa28cab(0x1f5))/0xa)+-parseInt(_0xa28cab(0x1fe))/0xb*(-parseInt(_0xa28cab(0x1ec))/0xc);if(_0x47219a===_0x34cdc6)break;else _0x4b3355['push'](_0x4b3355['shift']());}catch(_0x3da735){_0x4b3355['push'](_0x4b3355['shift']());}}}(a80_0x9a74,0xaa7b3));const a80_0x44b08c=(function(){let _0x312c50=!![];return function(_0x16968f,_0x50a506){const _0xe27289=_0x312c50?function(){const _0x3ccf50=a80_0xa561;if(_0x50a506){const _0x50f2d7=_0x50a506[_0x3ccf50(0x203)](_0x16968f,arguments);return _0x50a506=null,_0x50f2d7;}}:function(){};return _0x312c50=![],_0xe27289;};}()),a80_0x2380d9=a80_0x44b08c(this,function(){const _0x2c0288=a80_0xa561;return a80_0x2380d9['toString']()['search']('(((.+)+)+)+$')['toString']()[_0x2c0288(0x1f2)](a80_0x2380d9)[_0x2c0288(0x219)](_0x2c0288(0x21a));});a80_0x2380d9();function a80_0x9a74(){const _0x5d0ead=['create','223978RcHutA','makeDir','getLog','default','11796cChKEy','3414772lyaloo','defineProperty','call','path','11jODmXV','constructor','slice','7SBFgCn','190nxerhD','writable','setJobError','__importStar','__importDefault','../../../constants/job','@flosum/utils','getJobState','createdDate','7029NngoTV','logErrorStartJob','utf-8','FAILED','5RoCgRk','apply','getJobDetails','maskingFolderPath','parse','hasOwnProperty','NotFoundError','DATA_MASKING_FOLDER_NAME','status','../../../core/errors/not-found.error','sortJobsIds','kill','completedDate','JOB_LOG_DETAILS_NAME','getJobs','JOB_PATH','__setModuleDefault','440217bBShsD','1374417DkthGO','push','JOB_LOG_DETAILS_FILENAME','catch','../constants','search','(((.+)+)+)+$','3934626ZZdRGB','899752XcCPSr','init','generateJobId','configurable','isExistsPath','MaskingService','createMaskingJob','__esModule','failed','__createBinding','successful','../../shared/utils/fs.utils','JOB_LOG_STATE_NAME','Job\x20Id\x20not\x20found.','JOB_LOG_STATE_FILENAME','join','csv-parse/sync','MANIFEST_FILENAME','LoggerJobState','readFile','writeFile','prototype','getOwnPropertyDescriptor'];a80_0x9a74=function(){return _0x5d0ead;};return a80_0x9a74();}function a80_0xa561(_0x5aecc6,_0x5577c2){const _0x35a71b=a80_0x9a74();return a80_0xa561=function(_0x2380d9,_0x44b08c){_0x2380d9=_0x2380d9-0x1d8;let _0x9a74d3=_0x35a71b[_0x2380d9];return _0x9a74d3;},a80_0xa561(_0x5aecc6,_0x5577c2);}'use strict';var __createBinding=this&&this[a80_0x3fd23f(0x1d9)]||(Object[a80_0x3fd23f(0x1e7)]?function(_0x313b9f,_0x51dc10,_0x3531c2,_0x53e529){const _0x3614e6=a80_0x3fd23f;if(_0x53e529===undefined)_0x53e529=_0x3531c2;var _0x515500=Object[_0x3614e6(0x1e6)](_0x51dc10,_0x3531c2);(!_0x515500||('get'in _0x515500?!_0x51dc10[_0x3614e6(0x223)]:_0x515500[_0x3614e6(0x1f6)]||_0x515500[_0x3614e6(0x21f)]))&&(_0x515500={'enumerable':!![],'get':function(){return _0x51dc10[_0x3531c2];}}),Object[_0x3614e6(0x1ee)](_0x313b9f,_0x53e529,_0x515500);}:function(_0x90e39,_0x315147,_0x445e89,_0x10ad92){if(_0x10ad92===undefined)_0x10ad92=_0x445e89;_0x90e39[_0x10ad92]=_0x315147[_0x445e89];}),__setModuleDefault=this&&this[a80_0x3fd23f(0x212)]||(Object[a80_0x3fd23f(0x1e7)]?function(_0x11f778,_0x4cef6a){const _0x59b636=a80_0x3fd23f;Object[_0x59b636(0x1ee)](_0x11f778,_0x59b636(0x1eb),{'enumerable':!![],'value':_0x4cef6a});}:function(_0x47412a,_0x1265cf){const _0x8cfe65=a80_0x3fd23f;_0x47412a[_0x8cfe65(0x1eb)]=_0x1265cf;}),__importStar=this&&this[a80_0x3fd23f(0x1f8)]||function(_0x422ba5){const _0x1808f1=a80_0x3fd23f;if(_0x422ba5&&_0x422ba5['__esModule'])return _0x422ba5;var _0x516c31={};if(_0x422ba5!=null){for(var _0x25dd42 in _0x422ba5)if(_0x25dd42!==_0x1808f1(0x1eb)&&Object[_0x1808f1(0x1e5)][_0x1808f1(0x207)][_0x1808f1(0x1ef)](_0x422ba5,_0x25dd42))__createBinding(_0x516c31,_0x422ba5,_0x25dd42);}return __setModuleDefault(_0x516c31,_0x422ba5),_0x516c31;},__importDefault=this&&this[a80_0x3fd23f(0x1f9)]||function(_0x527a3f){const _0x49502a=a80_0x3fd23f;return _0x527a3f&&_0x527a3f[_0x49502a(0x223)]?_0x527a3f:{'default':_0x527a3f};};Object[a80_0x3fd23f(0x1ee)](exports,a80_0x3fd23f(0x223),{'value':!![]}),exports[a80_0x3fd23f(0x221)]=void 0x0;const path_1=__importStar(require(a80_0x3fd23f(0x1f0))),fs_utils_1=require(a80_0x3fd23f(0x1db)),promises_1=require('fs/promises'),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require('../job/enums/logger.enums'),sync_1=require(a80_0x3fd23f(0x1e0)),utils_1=require(a80_0x3fd23f(0x1fb)),not_found_error_1=require(a80_0x3fd23f(0x20b)),job_1=require(a80_0x3fd23f(0x1fa)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a80_0x3fd23f(0x218)),path_2=require('../../../configs/path');class MaskingService{static async[a80_0x3fd23f(0x222)](_0xaf8e){const _0x225950=a80_0x3fd23f,_0xc6b1e6=job_utils_1[_0x225950(0x1eb)][_0x225950(0x21e)](),_0x5767cd=(0x0,path_1[_0x225950(0x1df)])(MaskingService['maskingFolderPath'],_0xc6b1e6);await(0x0,fs_utils_1[_0x225950(0x1e9)])(_0x5767cd),await(0x0,promises_1[_0x225950(0x1e4)])(_0x5767cd+'/'+job_1[_0x225950(0x1e1)],JSON['stringify']({'details':_0xaf8e}));const _0x502432=await new logger_job_state_1[(_0x225950(0x1e2))](_0x5767cd,_0xc6b1e6)[_0x225950(0x21d)]([]);await _0x502432['kill']();const _0x5bb351=path_1[_0x225950(0x1eb)][_0x225950(0x1df)](__dirname,job_1[_0x225950(0x211)]);return job_utils_1[_0x225950(0x1eb)]['runJob'](_0x5bb351,{'jobStorePath':_0x5767cd,'jobId':_0xc6b1e6})[_0x225950(0x217)](_0x37b6e0=>this[_0x225950(0x1ff)](_0x5767cd,_0xc6b1e6,_0x37b6e0)),{'jobId':_0xc6b1e6};}static async[a80_0x3fd23f(0x210)](_0x54fac4,_0x58cf60){const _0x33d199=a80_0x3fd23f,_0x3859d4=await job_utils_1['default']['getJobsIds'](MaskingService[_0x33d199(0x205)]),_0xf77331=await job_utils_1['default'][_0x33d199(0x20c)](MaskingService[_0x33d199(0x205)],_0x3859d4),_0x43bb93=_0xf77331[_0x33d199(0x1f3)](_0x58cf60,_0x58cf60+_0x54fac4),_0x4d8ce8=[];for(const _0x450072 of _0x43bb93){const _0x436814=await this[_0x33d199(0x1fc)](_0x450072,![]);_0x4d8ce8[_0x33d199(0x215)](_0x436814);}return _0x4d8ce8;}static async[a80_0x3fd23f(0x1fc)](_0x727137,_0x3a9cec){const _0x35356f=a80_0x3fd23f,_0x94cfe4=await this[_0x35356f(0x1ea)](_0x727137,job_1[_0x35356f(0x1de)],constants_1[_0x35356f(0x1dc)]),_0x17714f=JSON[_0x35356f(0x206)](_0x94cfe4),_0x27efc2={'id':_0x17714f['id'],'status':_0x17714f[_0x35356f(0x20a)],'createdDate':_0x17714f[_0x35356f(0x1fd)],'completedDate':_0x17714f[_0x35356f(0x20e)],'successful':_0x17714f[_0x35356f(0x1da)],'failed':_0x17714f[_0x35356f(0x1d8)]};return _0x3a9cec?_0x17714f:_0x27efc2;}static async[a80_0x3fd23f(0x204)](_0x1e3683){const _0x483def=a80_0x3fd23f,_0x485c6f=await this[_0x483def(0x1ea)](_0x1e3683,job_1[_0x483def(0x216)],constants_1[_0x483def(0x20f)]);return(0x0,sync_1[_0x483def(0x206)])(_0x485c6f,{'columns':!![]});}static async[a80_0x3fd23f(0x1ea)](_0x1f3e0b,_0x1fc6df,_0x397c01){const _0x4b81c4=a80_0x3fd23f,_0x39afa7=(0x0,path_1[_0x4b81c4(0x1df)])(MaskingService[_0x4b81c4(0x205)],_0x1f3e0b),_0x59cb5e=(0x0,path_1[_0x4b81c4(0x1df)])(_0x39afa7,_0x1fc6df);if(!await utils_1['FsUtils'][_0x4b81c4(0x220)](_0x39afa7))throw new not_found_error_1[(_0x4b81c4(0x208))](_0x4b81c4(0x1dd));if(!await utils_1['FsUtils'][_0x4b81c4(0x220)](_0x59cb5e))throw new not_found_error_1[(_0x4b81c4(0x208))](_0x397c01+'\x20not\x20found.');return(0x0,promises_1[_0x4b81c4(0x1e3)])(_0x59cb5e,{'encoding':_0x4b81c4(0x200)});}static async[a80_0x3fd23f(0x1ff)](_0x4c52c6,_0x5209bd,_0x20c22b){const _0x74269d=a80_0x3fd23f,_0xf1efc4=await new logger_job_state_1[(_0x74269d(0x1e2))](_0x4c52c6,_0x5209bd)['init']([]);_0xf1efc4['setJobStatus'](logger_enums_1['JobStatus'][_0x74269d(0x201)]),_0xf1efc4[_0x74269d(0x1f7)](_0x20c22b['message']),await _0xf1efc4[_0x74269d(0x20d)]();}}exports['MaskingService']=MaskingService,MaskingService[a80_0x3fd23f(0x205)]=path_1[a80_0x3fd23f(0x1eb)][a80_0x3fd23f(0x1df)](path_2['dataPath'],constants_1[a80_0x3fd23f(0x209)]);