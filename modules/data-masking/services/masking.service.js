const a81_0x39415f=a81_0x3132;(function(_0x170b59,_0x1add62){const _0x494665=a81_0x3132,_0x3f132f=_0x170b59();while(!![]){try{const _0x2d497c=parseInt(_0x494665(0x1b7))/0x1*(-parseInt(_0x494665(0x192))/0x2)+parseInt(_0x494665(0x1bd))/0x3+parseInt(_0x494665(0x1b4))/0x4+-parseInt(_0x494665(0x1be))/0x5*(parseInt(_0x494665(0x1ad))/0x6)+-parseInt(_0x494665(0x195))/0x7+-parseInt(_0x494665(0x188))/0x8*(parseInt(_0x494665(0x187))/0x9)+parseInt(_0x494665(0x18a))/0xa*(parseInt(_0x494665(0x1bc))/0xb);if(_0x2d497c===_0x1add62)break;else _0x3f132f['push'](_0x3f132f['shift']());}catch(_0x56c0b4){_0x3f132f['push'](_0x3f132f['shift']());}}}(a81_0x140e,0x5fc8e));function a81_0x140e(){const _0x329716=['failed','apply','default','@flosum/utils','createMaskingJob','JOB_LOG_STATE_NAME','slice','search','../../../core/errors/not-found.error','../../../constants/job','__importDefault','defineProperty','configurable','runJob','getJobs','push','../../shared/utils/job.utils','__esModule','JOB_LOG_STATE_FILENAME','getOwnPropertyDescriptor','NotFoundError','toString','../job/classes/logger/logger-job-state','182502feHBkH','../../../configs/path','readFile','getJobsIds','create','status','get','666700nSLwSF','fs/promises','__importStar','42gEjtUh','Job\x20Id\x20not\x20found.','LoggerJobState','successful','FsUtils','198GLWKsO','499473QzwBPF','95dQPuxt','isExistsPath','init','kill','getJobState','path','maskingFolderPath','../constants','makeDir','parse','csv-parse/sync','JobStatus','logErrorStartJob','__setModuleDefault','catch','message','getLog','writable','FAILED','18QKqUxy','882584greNAU','createdDate','688800rBNQcs','JOB_LOG_DETAILS_FILENAME','join','../job/enums/logger.enums','MaskingService','DATA_MASKING_FOLDER_NAME','JOB_PATH','setJobError','12530TYFSgo','../../shared/utils/fs.utils','generateJobId','832811TsybYh'];a81_0x140e=function(){return _0x329716;};return a81_0x140e();}const a81_0x151a77=(function(){let _0xa6a4f3=!![];return function(_0x5684b2,_0x2e7993){const _0x5c11d6=_0xa6a4f3?function(){const _0x9f17bc=a81_0x3132;if(_0x2e7993){const _0x58ebf3=_0x2e7993[_0x9f17bc(0x197)](_0x5684b2,arguments);return _0x2e7993=null,_0x58ebf3;}}:function(){};return _0xa6a4f3=![],_0x5c11d6;};}()),a81_0x42d280=a81_0x151a77(this,function(){const _0x3c9534=a81_0x3132;return a81_0x42d280[_0x3c9534(0x1ab)]()[_0x3c9534(0x19d)]('(((.+)+)+)+$')[_0x3c9534(0x1ab)]()['constructor'](a81_0x42d280)[_0x3c9534(0x19d)]('(((.+)+)+)+$');});a81_0x42d280();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a81_0x39415f(0x1b1)]?function(_0x56ccd2,_0x22173f,_0x2dd039,_0x3fc92c){const _0x3e9656=a81_0x39415f;if(_0x3fc92c===undefined)_0x3fc92c=_0x2dd039;var _0x36b74a=Object[_0x3e9656(0x1a9)](_0x22173f,_0x2dd039);(!_0x36b74a||(_0x3e9656(0x1b3)in _0x36b74a?!_0x22173f[_0x3e9656(0x1a7)]:_0x36b74a[_0x3e9656(0x185)]||_0x36b74a[_0x3e9656(0x1a2)]))&&(_0x36b74a={'enumerable':!![],'get':function(){return _0x22173f[_0x2dd039];}}),Object['defineProperty'](_0x56ccd2,_0x3fc92c,_0x36b74a);}:function(_0x6f6794,_0x2e8a9b,_0x564ba3,_0x73a39f){if(_0x73a39f===undefined)_0x73a39f=_0x564ba3;_0x6f6794[_0x73a39f]=_0x2e8a9b[_0x564ba3];}),__setModuleDefault=this&&this[a81_0x39415f(0x181)]||(Object['create']?function(_0x554b12,_0x32406f){const _0x10c735=a81_0x39415f;Object[_0x10c735(0x1a1)](_0x554b12,_0x10c735(0x198),{'enumerable':!![],'value':_0x32406f});}:function(_0x1b1b09,_0x6a4b6d){const _0x5d70cd=a81_0x39415f;_0x1b1b09[_0x5d70cd(0x198)]=_0x6a4b6d;}),__importStar=this&&this[a81_0x39415f(0x1b6)]||function(_0x304b20){const _0xc35100=a81_0x39415f;if(_0x304b20&&_0x304b20[_0xc35100(0x1a7)])return _0x304b20;var _0x5be2cd={};if(_0x304b20!=null){for(var _0x678d16 in _0x304b20)if(_0x678d16!=='default'&&Object['prototype']['hasOwnProperty']['call'](_0x304b20,_0x678d16))__createBinding(_0x5be2cd,_0x304b20,_0x678d16);}return __setModuleDefault(_0x5be2cd,_0x304b20),_0x5be2cd;},__importDefault=this&&this[a81_0x39415f(0x1a0)]||function(_0x4e43d5){return _0x4e43d5&&_0x4e43d5['__esModule']?_0x4e43d5:{'default':_0x4e43d5};};Object['defineProperty'](exports,a81_0x39415f(0x1a7),{'value':!![]}),exports[a81_0x39415f(0x18e)]=void 0x0;const path_1=__importStar(require(a81_0x39415f(0x1c3))),fs_utils_1=require(a81_0x39415f(0x193)),promises_1=require(a81_0x39415f(0x1b5)),logger_job_state_1=require(a81_0x39415f(0x1ac)),logger_enums_1=require(a81_0x39415f(0x18d)),sync_1=require(a81_0x39415f(0x1c8)),utils_1=require(a81_0x39415f(0x199)),not_found_error_1=require(a81_0x39415f(0x19e)),job_1=require(a81_0x39415f(0x19f)),job_utils_1=__importDefault(require(a81_0x39415f(0x1a6))),constants_1=require(a81_0x39415f(0x1c5)),path_2=require(a81_0x39415f(0x1ae));function a81_0x3132(_0xc7d8eb,_0x1f7837){const _0x511a9c=a81_0x140e();return a81_0x3132=function(_0x42d280,_0x151a77){_0x42d280=_0x42d280-0x180;let _0x140ebb=_0x511a9c[_0x42d280];return _0x140ebb;},a81_0x3132(_0xc7d8eb,_0x1f7837);}class MaskingService{static async[a81_0x39415f(0x19a)](_0x3f7d94){const _0x2592f2=a81_0x39415f,_0x473e70=job_utils_1['default'][_0x2592f2(0x194)](),_0x5c6e1a=(0x0,path_1[_0x2592f2(0x18c)])(MaskingService[_0x2592f2(0x1c4)],_0x473e70);await(0x0,fs_utils_1[_0x2592f2(0x1c6)])(_0x5c6e1a),await(0x0,promises_1['writeFile'])(_0x5c6e1a+'/'+job_1['MANIFEST_FILENAME'],JSON['stringify']({'details':_0x3f7d94}));const _0x4841bc=await new logger_job_state_1[(_0x2592f2(0x1b9))](_0x5c6e1a,_0x473e70)[_0x2592f2(0x1c0)]([]);await _0x4841bc[_0x2592f2(0x1c1)]();const _0x483a54=path_1[_0x2592f2(0x198)]['join'](__dirname,job_1[_0x2592f2(0x190)]);return job_utils_1[_0x2592f2(0x198)][_0x2592f2(0x1a3)](_0x483a54,{'jobStorePath':_0x5c6e1a,'jobId':_0x473e70})[_0x2592f2(0x182)](_0x388dd9=>this['logErrorStartJob'](_0x5c6e1a,_0x473e70,_0x388dd9)),{'jobId':_0x473e70};}static async[a81_0x39415f(0x1a4)](_0x4be698,_0x4b5440){const _0x243c60=a81_0x39415f,_0x70102c=await job_utils_1[_0x243c60(0x198)][_0x243c60(0x1b0)](MaskingService['maskingFolderPath']),_0x884417=await job_utils_1[_0x243c60(0x198)]['sortJobsIds'](MaskingService[_0x243c60(0x1c4)],_0x70102c),_0x951f13=_0x884417[_0x243c60(0x19c)](_0x4b5440,_0x4b5440+_0x4be698),_0xd54efa=[];for(const _0x22ac09 of _0x951f13){const _0x36cb2e=await this[_0x243c60(0x1c2)](_0x22ac09,![]);_0xd54efa[_0x243c60(0x1a5)](_0x36cb2e);}return _0xd54efa;}static async[a81_0x39415f(0x1c2)](_0x1b2ba9,_0x17b659){const _0x300047=a81_0x39415f,_0x23756b=await this['getLog'](_0x1b2ba9,job_1[_0x300047(0x1a8)],constants_1[_0x300047(0x19b)]),_0xc2c281=JSON['parse'](_0x23756b),_0x1ff727={'id':_0xc2c281['id'],'status':_0xc2c281[_0x300047(0x1b2)],'createdDate':_0xc2c281[_0x300047(0x189)],'completedDate':_0xc2c281['completedDate'],'successful':_0xc2c281[_0x300047(0x1ba)],'failed':_0xc2c281[_0x300047(0x196)]};return _0x17b659?_0xc2c281:_0x1ff727;}static async['getJobDetails'](_0x543346){const _0x6093c6=a81_0x39415f,_0x9e2502=await this[_0x6093c6(0x184)](_0x543346,job_1[_0x6093c6(0x18b)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0x6093c6(0x1c7)])(_0x9e2502,{'columns':!![]});}static async[a81_0x39415f(0x184)](_0x2d4908,_0x5dd698,_0x1e72fd){const _0xf5de5=a81_0x39415f,_0x440127=(0x0,path_1[_0xf5de5(0x18c)])(MaskingService[_0xf5de5(0x1c4)],_0x2d4908),_0x88e7f4=(0x0,path_1[_0xf5de5(0x18c)])(_0x440127,_0x5dd698);if(!await utils_1['FsUtils']['isExistsPath'](_0x440127))throw new not_found_error_1[(_0xf5de5(0x1aa))](_0xf5de5(0x1b8));if(!await utils_1[_0xf5de5(0x1bb)][_0xf5de5(0x1bf)](_0x88e7f4))throw new not_found_error_1[(_0xf5de5(0x1aa))](_0x1e72fd+'\x20not\x20found.');return(0x0,promises_1[_0xf5de5(0x1af)])(_0x88e7f4,{'encoding':'utf-8'});}static async[a81_0x39415f(0x180)](_0x48446a,_0x2951e0,_0x4324eb){const _0x342a14=a81_0x39415f,_0x2e6f78=await new logger_job_state_1[(_0x342a14(0x1b9))](_0x48446a,_0x2951e0)[_0x342a14(0x1c0)]([]);_0x2e6f78['setJobStatus'](logger_enums_1[_0x342a14(0x1c9)][_0x342a14(0x186)]),_0x2e6f78[_0x342a14(0x191)](_0x4324eb[_0x342a14(0x183)]),await _0x2e6f78[_0x342a14(0x1c1)]();}}exports['MaskingService']=MaskingService,MaskingService[a81_0x39415f(0x1c4)]=path_1[a81_0x39415f(0x198)]['join'](path_2['dataPath'],constants_1[a81_0x39415f(0x18f)]);