const a99_0x380b40=a99_0x4b72;function a99_0x4b72(_0x347e4b,_0x4eebac){const _0x378e9f=a99_0x55c5();return a99_0x4b72=function(_0x3f74ab,_0x1874f0){_0x3f74ab=_0x3f74ab-0xa1;let _0x55c57c=_0x378e9f[_0x3f74ab];return _0x55c57c;},a99_0x4b72(_0x347e4b,_0x4eebac);}(function(_0x4c5f68,_0x41fcd4){const _0x17ce30=a99_0x4b72,_0x248c75=_0x4c5f68();while(!![]){try{const _0x2f682f=parseInt(_0x17ce30(0xda))/0x1*(-parseInt(_0x17ce30(0xb2))/0x2)+parseInt(_0x17ce30(0xbb))/0x3*(parseInt(_0x17ce30(0xde))/0x4)+parseInt(_0x17ce30(0xe9))/0x5*(-parseInt(_0x17ce30(0xce))/0x6)+-parseInt(_0x17ce30(0xb9))/0x7*(parseInt(_0x17ce30(0xe6))/0x8)+parseInt(_0x17ce30(0xac))/0x9+-parseInt(_0x17ce30(0xea))/0xa*(-parseInt(_0x17ce30(0xb6))/0xb)+parseInt(_0x17ce30(0xe0))/0xc;if(_0x2f682f===_0x41fcd4)break;else _0x248c75['push'](_0x248c75['shift']());}catch(_0x5de4b7){_0x248c75['push'](_0x248c75['shift']());}}}(a99_0x55c5,0x538c9));const a99_0x1874f0=(function(){let _0x26268b=!![];return function(_0x3f196c,_0x396abf){const _0x5d7999=_0x26268b?function(){const _0x3cf5b3=a99_0x4b72;if(_0x396abf){const _0x1bdc9d=_0x396abf[_0x3cf5b3(0xf2)](_0x3f196c,arguments);return _0x396abf=null,_0x1bdc9d;}}:function(){};return _0x26268b=![],_0x5d7999;};}()),a99_0x3f74ab=a99_0x1874f0(this,function(){const _0x4749b7=a99_0x4b72;return a99_0x3f74ab[_0x4749b7(0xbc)]()[_0x4749b7(0xa4)](_0x4749b7(0xa3))[_0x4749b7(0xbc)]()[_0x4749b7(0xb1)](a99_0x3f74ab)[_0x4749b7(0xa4)]('(((.+)+)+)+$');});a99_0x3f74ab();'use strict';var __createBinding=this&&this[a99_0x380b40(0xa9)]||(Object[a99_0x380b40(0xe5)]?function(_0x20209d,_0x756c67,_0x4b0d1c,_0x1bfbaf){const _0x155b02=a99_0x380b40;if(_0x1bfbaf===undefined)_0x1bfbaf=_0x4b0d1c;var _0x204265=Object[_0x155b02(0xa2)](_0x756c67,_0x4b0d1c);(!_0x204265||(_0x155b02(0xd0)in _0x204265?!_0x756c67[_0x155b02(0xc8)]:_0x204265[_0x155b02(0xcb)]||_0x204265[_0x155b02(0xca)]))&&(_0x204265={'enumerable':!![],'get':function(){return _0x756c67[_0x4b0d1c];}}),Object[_0x155b02(0xa8)](_0x20209d,_0x1bfbaf,_0x204265);}:function(_0x1adda9,_0x585c94,_0x1c5479,_0x4dd20b){if(_0x4dd20b===undefined)_0x4dd20b=_0x1c5479;_0x1adda9[_0x4dd20b]=_0x585c94[_0x1c5479];}),__setModuleDefault=this&&this[a99_0x380b40(0xa5)]||(Object[a99_0x380b40(0xe5)]?function(_0x4e3f0c,_0x5b504f){const _0x302666=a99_0x380b40;Object[_0x302666(0xa8)](_0x4e3f0c,_0x302666(0xdb),{'enumerable':!![],'value':_0x5b504f});}:function(_0x3d46f0,_0x4915b5){const _0xb1bbd9=a99_0x380b40;_0x3d46f0[_0xb1bbd9(0xdb)]=_0x4915b5;}),__importStar=this&&this[a99_0x380b40(0xd3)]||function(_0x175e5f){const _0x44c511=a99_0x380b40;if(_0x175e5f&&_0x175e5f['__esModule'])return _0x175e5f;var _0x12bef6={};if(_0x175e5f!=null){for(var _0x3c2c3a in _0x175e5f)if(_0x3c2c3a!=='default'&&Object[_0x44c511(0xb3)]['hasOwnProperty'][_0x44c511(0xef)](_0x175e5f,_0x3c2c3a))__createBinding(_0x12bef6,_0x175e5f,_0x3c2c3a);}return __setModuleDefault(_0x12bef6,_0x175e5f),_0x12bef6;},__importDefault=this&&this[a99_0x380b40(0xe7)]||function(_0x1bcfea){const _0x274dc7=a99_0x380b40;return _0x1bcfea&&_0x1bcfea[_0x274dc7(0xc8)]?_0x1bcfea:{'default':_0x1bcfea};};Object[a99_0x380b40(0xa8)](exports,a99_0x380b40(0xc8),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a99_0x380b40(0xe8))),fs_utils_1=require(a99_0x380b40(0xd9)),promises_1=require(a99_0x380b40(0xcf)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a99_0x380b40(0xd7)),sync_1=require('csv-parse/sync'),utils_1=require(a99_0x380b40(0xdc)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a99_0x380b40(0xc4)),job_utils_1=__importDefault(require(a99_0x380b40(0xec))),constants_1=require(a99_0x380b40(0xaf)),path_2=require(a99_0x380b40(0xab));function a99_0x55c5(){const _0x349cfb=['prototype','DATA_MASKING_FOLDER_NAME','init','1578313ZLhuDZ','LoggerJobState','getJobDetails','105847MkWLxl','getLog','15xCKRJW','toString','FsUtils','Job\x20Id\x20not\x20found.','JOB_LOG_STATE_FILENAME','getJobState','join','JobStatus','completedDate','../../../constants/job','writeFile','makeDir','setJobStatus','__esModule','successful','configurable','writable','push','JOB_LOG_DETAILS_FILENAME','6666EQKttI','fs/promises','get','maskingFolderPath','MaskingService','__importStar','NotFoundError','failed','stringify','../job/enums/logger.enums','MANIFEST_FILENAME','../../shared/utils/fs.utils','531989Plkiul','default','@flosum/utils','\x20not\x20found.','228972PyVBMR','dataPath','17780352hdaOmK','parse','runJob','sortJobsIds','isExistsPath','create','336yBYPMC','__importDefault','path','2000Sakkki','10DBOguo','JOB_LOG_DETAILS_NAME','../../shared/utils/job.utils','JOB_PATH','logErrorStartJob','call','status','createdDate','apply','slice','getOwnPropertyDescriptor','(((.+)+)+)+$','search','__setModuleDefault','getJobsIds','catch','defineProperty','__createBinding','kill','../../../configs/path','380646HZtBGk','message','getJobs','../constants','FAILED','constructor','2TnYgcL'];a99_0x55c5=function(){return _0x349cfb;};return a99_0x55c5();}class MaskingService{static async['createMaskingJob'](_0x307d8a){const _0x47158f=a99_0x380b40,_0x302a8f=job_utils_1[_0x47158f(0xdb)]['generateJobId'](),_0x420b45=(0x0,path_1[_0x47158f(0xc1)])(MaskingService[_0x47158f(0xd1)],_0x302a8f);await(0x0,fs_utils_1[_0x47158f(0xc6)])(_0x420b45),await(0x0,promises_1[_0x47158f(0xc5)])(_0x420b45+'/'+job_1[_0x47158f(0xd8)],JSON[_0x47158f(0xd6)]({'details':_0x307d8a}));const _0x19018a=await new logger_job_state_1[(_0x47158f(0xb7))](_0x420b45,_0x302a8f)[_0x47158f(0xb5)]([]);await _0x19018a[_0x47158f(0xaa)]();const _0x2d1687=path_1[_0x47158f(0xdb)]['join'](__dirname,job_1[_0x47158f(0xed)]);return job_utils_1[_0x47158f(0xdb)][_0x47158f(0xe2)](_0x2d1687,{'jobStorePath':_0x420b45,'jobId':_0x302a8f})[_0x47158f(0xa7)](_0xd49cd8=>this[_0x47158f(0xee)](_0x420b45,_0x302a8f,_0xd49cd8)),{'jobId':_0x302a8f};}static async[a99_0x380b40(0xae)](_0x3611d4,_0x4a53fd){const _0x3abcd2=a99_0x380b40,_0x1792d9=await job_utils_1[_0x3abcd2(0xdb)][_0x3abcd2(0xa6)](MaskingService[_0x3abcd2(0xd1)]),_0x54a3d0=await job_utils_1['default'][_0x3abcd2(0xe3)](MaskingService[_0x3abcd2(0xd1)],_0x1792d9),_0x383fb7=_0x54a3d0[_0x3abcd2(0xa1)](_0x4a53fd,_0x4a53fd+_0x3611d4),_0x556a25=[];for(const _0x154fdb of _0x383fb7){const _0xa9cb9e=await this[_0x3abcd2(0xc0)](_0x154fdb,![]);_0x556a25[_0x3abcd2(0xcc)](_0xa9cb9e);}return _0x556a25;}static async[a99_0x380b40(0xc0)](_0x232767,_0x32aa4a){const _0x3a0392=a99_0x380b40,_0xea2716=await this['getLog'](_0x232767,job_1[_0x3a0392(0xbf)],constants_1['JOB_LOG_STATE_NAME']),_0x350d8f=JSON[_0x3a0392(0xe1)](_0xea2716),_0x2c0cf1={'id':_0x350d8f['id'],'status':_0x350d8f[_0x3a0392(0xf0)],'createdDate':_0x350d8f[_0x3a0392(0xf1)],'completedDate':_0x350d8f[_0x3a0392(0xc3)],'successful':_0x350d8f[_0x3a0392(0xc9)],'failed':_0x350d8f[_0x3a0392(0xd5)]};return _0x32aa4a?_0x350d8f:_0x2c0cf1;}static async[a99_0x380b40(0xb8)](_0x17a92b){const _0x2962d5=a99_0x380b40,_0x5a7070=await this['getLog'](_0x17a92b,job_1[_0x2962d5(0xcd)],constants_1[_0x2962d5(0xeb)]);return(0x0,sync_1['parse'])(_0x5a7070,{'columns':!![]});}static async[a99_0x380b40(0xba)](_0x588ca2,_0x43340e,_0x5416ff){const _0x43bb1d=a99_0x380b40,_0x411c44=(0x0,path_1[_0x43bb1d(0xc1)])(MaskingService[_0x43bb1d(0xd1)],_0x588ca2),_0x587c7c=(0x0,path_1['join'])(_0x411c44,_0x43340e);if(!await utils_1[_0x43bb1d(0xbd)][_0x43bb1d(0xe4)](_0x411c44))throw new not_found_error_1[(_0x43bb1d(0xd4))](_0x43bb1d(0xbe));if(!await utils_1[_0x43bb1d(0xbd)][_0x43bb1d(0xe4)](_0x587c7c))throw new not_found_error_1['NotFoundError'](_0x5416ff+_0x43bb1d(0xdd));return(0x0,promises_1['readFile'])(_0x587c7c,{'encoding':'utf-8'});}static async[a99_0x380b40(0xee)](_0x2abfe9,_0x1265d1,_0x12821e){const _0x458f52=a99_0x380b40,_0x469156=await new logger_job_state_1[(_0x458f52(0xb7))](_0x2abfe9,_0x1265d1)[_0x458f52(0xb5)]([]);_0x469156[_0x458f52(0xc7)](logger_enums_1[_0x458f52(0xc2)][_0x458f52(0xb0)]),_0x469156['setJobError'](_0x12821e[_0x458f52(0xad)]),await _0x469156[_0x458f52(0xaa)]();}}exports[a99_0x380b40(0xd2)]=MaskingService,MaskingService[a99_0x380b40(0xd1)]=path_1[a99_0x380b40(0xdb)][a99_0x380b40(0xc1)](path_2[a99_0x380b40(0xdf)],constants_1[a99_0x380b40(0xb4)]);