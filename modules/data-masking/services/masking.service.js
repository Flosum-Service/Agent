function a81_0x394e(_0x3a038f,_0xd0a77){const _0x14f582=a81_0x2ec0();return a81_0x394e=function(_0x1b6aa2,_0x51123f){_0x1b6aa2=_0x1b6aa2-0xed;let _0x2ec0e1=_0x14f582[_0x1b6aa2];return _0x2ec0e1;},a81_0x394e(_0x3a038f,_0xd0a77);}const a81_0x2af963=a81_0x394e;(function(_0x24644b,_0x209cf3){const _0x59905f=a81_0x394e,_0x59871c=_0x24644b();while(!![]){try{const _0x3aa5b6=-parseInt(_0x59905f(0x104))/0x1*(-parseInt(_0x59905f(0x10f))/0x2)+parseInt(_0x59905f(0x118))/0x3+parseInt(_0x59905f(0xfa))/0x4*(-parseInt(_0x59905f(0xf0))/0x5)+-parseInt(_0x59905f(0x12b))/0x6*(parseInt(_0x59905f(0xf2))/0x7)+-parseInt(_0x59905f(0x122))/0x8*(parseInt(_0x59905f(0x131))/0x9)+parseInt(_0x59905f(0x130))/0xa*(-parseInt(_0x59905f(0x12f))/0xb)+parseInt(_0x59905f(0x132))/0xc;if(_0x3aa5b6===_0x209cf3)break;else _0x59871c['push'](_0x59871c['shift']());}catch(_0x559100){_0x59871c['push'](_0x59871c['shift']());}}}(a81_0x2ec0,0x7a081));const a81_0x51123f=(function(){let _0x3053ce=!![];return function(_0x18c950,_0xc8f167){const _0x34d184=_0x3053ce?function(){const _0x5c0aa6=a81_0x394e;if(_0xc8f167){const _0x1936d2=_0xc8f167[_0x5c0aa6(0x114)](_0x18c950,arguments);return _0xc8f167=null,_0x1936d2;}}:function(){};return _0x3053ce=![],_0x34d184;};}()),a81_0x1b6aa2=a81_0x51123f(this,function(){const _0x1b8fb7=a81_0x394e;return a81_0x1b6aa2['toString']()[_0x1b8fb7(0xed)](_0x1b8fb7(0xf1))[_0x1b8fb7(0x105)]()['constructor'](a81_0x1b6aa2)['search'](_0x1b8fb7(0xf1));});a81_0x1b6aa2();'use strict';var __createBinding=this&&this[a81_0x2af963(0x107)]||(Object[a81_0x2af963(0x111)]?function(_0x553d87,_0x4e55e0,_0x3a8063,_0x229472){const _0x49a67e=a81_0x2af963;if(_0x229472===undefined)_0x229472=_0x3a8063;var _0x2a386e=Object[_0x49a67e(0x120)](_0x4e55e0,_0x3a8063);(!_0x2a386e||('get'in _0x2a386e?!_0x4e55e0['__esModule']:_0x2a386e[_0x49a67e(0x113)]||_0x2a386e[_0x49a67e(0x123)]))&&(_0x2a386e={'enumerable':!![],'get':function(){return _0x4e55e0[_0x3a8063];}}),Object[_0x49a67e(0x128)](_0x553d87,_0x229472,_0x2a386e);}:function(_0xde7b58,_0x5ede1c,_0x4516c3,_0x406dde){if(_0x406dde===undefined)_0x406dde=_0x4516c3;_0xde7b58[_0x406dde]=_0x5ede1c[_0x4516c3];}),__setModuleDefault=this&&this[a81_0x2af963(0x10b)]||(Object[a81_0x2af963(0x111)]?function(_0x38dc47,_0x1956a0){const _0x55b0d3=a81_0x2af963;Object['defineProperty'](_0x38dc47,_0x55b0d3(0x127),{'enumerable':!![],'value':_0x1956a0});}:function(_0x190f6e,_0x3783c0){const _0x2116b9=a81_0x2af963;_0x190f6e[_0x2116b9(0x127)]=_0x3783c0;}),__importStar=this&&this[a81_0x2af963(0x119)]||function(_0x2fab19){const _0x399ad4=a81_0x2af963;if(_0x2fab19&&_0x2fab19['__esModule'])return _0x2fab19;var _0x1a6eec={};if(_0x2fab19!=null){for(var _0x2d76d1 in _0x2fab19)if(_0x2d76d1!==_0x399ad4(0x127)&&Object[_0x399ad4(0x103)]['hasOwnProperty'][_0x399ad4(0xf3)](_0x2fab19,_0x2d76d1))__createBinding(_0x1a6eec,_0x2fab19,_0x2d76d1);}return __setModuleDefault(_0x1a6eec,_0x2fab19),_0x1a6eec;},__importDefault=this&&this['__importDefault']||function(_0x1e7004){const _0xd2b3ff=a81_0x2af963;return _0x1e7004&&_0x1e7004[_0xd2b3ff(0x133)]?_0x1e7004:{'default':_0x1e7004};};function a81_0x2ec0(){const _0x1b6539=['259qkqRtT','call','../../../core/errors/not-found.error','completedDate','init','isExistsPath','NotFoundError','getJobs','1186880uilGdc','JOB_LOG_STATE_FILENAME','Job\x20Id\x20not\x20found.','FsUtils','getLog','JOB_LOG_STATE_NAME','FAILED','successful','csv-parse/sync','prototype','609671zCqCNp','toString','stringify','__createBinding','utf-8','message','path','__setModuleDefault','DATA_MASKING_FOLDER_NAME','getJobsIds','LoggerJobState','2UsAckP','../../../configs/path','create','JOB_LOG_DETAILS_NAME','writable','apply','../../shared/utils/job.utils','failed','setJobError','951555pUjQal','__importStar','writeFile','\x20not\x20found.','makeDir','MaskingService','createdDate','catch','getOwnPropertyDescriptor','../job/enums/logger.enums','2298568WcLhRl','configurable','../job/classes/logger/logger-job-state','parse','runJob','default','defineProperty','join','../../../constants/job','102738AwNfKb','JOB_LOG_DETAILS_FILENAME','maskingFolderPath','fs/promises','36278rglsiC','890WMlWuC','9qJDfHD','13009188YMLQtf','__esModule','../constants','search','MANIFEST_FILENAME','getJobState','5egUdDj','(((.+)+)+)+$'];a81_0x2ec0=function(){return _0x1b6539;};return a81_0x2ec0();}Object[a81_0x2af963(0x128)](exports,a81_0x2af963(0x133),{'value':!![]}),exports[a81_0x2af963(0x11d)]=void 0x0;const path_1=__importStar(require(a81_0x2af963(0x10a))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a81_0x2af963(0x12e)),logger_job_state_1=require(a81_0x2af963(0x124)),logger_enums_1=require(a81_0x2af963(0x121)),sync_1=require(a81_0x2af963(0x102)),utils_1=require('@flosum/utils'),not_found_error_1=require(a81_0x2af963(0xf4)),job_1=require(a81_0x2af963(0x12a)),job_utils_1=__importDefault(require(a81_0x2af963(0x115))),constants_1=require(a81_0x2af963(0x134)),path_2=require(a81_0x2af963(0x110));class MaskingService{static async['createMaskingJob'](_0x3fd36a){const _0x220295=a81_0x2af963,_0x2416f1=job_utils_1[_0x220295(0x127)]['generateJobId'](),_0x25de47=(0x0,path_1[_0x220295(0x129)])(MaskingService['maskingFolderPath'],_0x2416f1);await(0x0,fs_utils_1[_0x220295(0x11c)])(_0x25de47),await(0x0,promises_1[_0x220295(0x11a)])(_0x25de47+'/'+job_1[_0x220295(0xee)],JSON[_0x220295(0x106)]({'details':_0x3fd36a}));const _0x21fce2=await new logger_job_state_1[(_0x220295(0x10e))](_0x25de47,_0x2416f1)[_0x220295(0xf6)]([]);await _0x21fce2['kill']();const _0x1f29c0=path_1[_0x220295(0x127)][_0x220295(0x129)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x220295(0x127)][_0x220295(0x126)](_0x1f29c0,{'jobStorePath':_0x25de47,'jobId':_0x2416f1})[_0x220295(0x11f)](_0x247588=>this['logErrorStartJob'](_0x25de47,_0x2416f1,_0x247588)),{'jobId':_0x2416f1};}static async[a81_0x2af963(0xf9)](_0x146e4c,_0x2a8ed3){const _0x522114=a81_0x2af963,_0x441d6d=await job_utils_1[_0x522114(0x127)][_0x522114(0x10d)](MaskingService['maskingFolderPath']),_0x4f813a=await job_utils_1[_0x522114(0x127)]['sortJobsIds'](MaskingService[_0x522114(0x12d)],_0x441d6d),_0xd2f3b8=_0x4f813a['slice'](_0x2a8ed3,_0x2a8ed3+_0x146e4c),_0x3c5e25=[];for(const _0x24427e of _0xd2f3b8){const _0x577563=await this[_0x522114(0xef)](_0x24427e,![]);_0x3c5e25['push'](_0x577563);}return _0x3c5e25;}static async[a81_0x2af963(0xef)](_0x1cf12e,_0x3f76bd){const _0x3070e0=a81_0x2af963,_0x138039=await this[_0x3070e0(0xfe)](_0x1cf12e,job_1[_0x3070e0(0xfb)],constants_1[_0x3070e0(0xff)]),_0x3554bf=JSON[_0x3070e0(0x125)](_0x138039),_0x1d85a9={'id':_0x3554bf['id'],'status':_0x3554bf['status'],'createdDate':_0x3554bf[_0x3070e0(0x11e)],'completedDate':_0x3554bf[_0x3070e0(0xf5)],'successful':_0x3554bf[_0x3070e0(0x101)],'failed':_0x3554bf[_0x3070e0(0x116)]};return _0x3f76bd?_0x3554bf:_0x1d85a9;}static async['getJobDetails'](_0x5d6f0d){const _0x1050bd=a81_0x2af963,_0x48b2ae=await this['getLog'](_0x5d6f0d,job_1[_0x1050bd(0x12c)],constants_1[_0x1050bd(0x112)]);return(0x0,sync_1[_0x1050bd(0x125)])(_0x48b2ae,{'columns':!![]});}static async[a81_0x2af963(0xfe)](_0x891b70,_0x3dba8d,_0x40c655){const _0x14b832=a81_0x2af963,_0x4e654f=(0x0,path_1['join'])(MaskingService[_0x14b832(0x12d)],_0x891b70),_0x59d381=(0x0,path_1[_0x14b832(0x129)])(_0x4e654f,_0x3dba8d);if(!await utils_1[_0x14b832(0xfd)][_0x14b832(0xf7)](_0x4e654f))throw new not_found_error_1[(_0x14b832(0xf8))](_0x14b832(0xfc));if(!await utils_1['FsUtils'][_0x14b832(0xf7)](_0x59d381))throw new not_found_error_1['NotFoundError'](_0x40c655+_0x14b832(0x11b));return(0x0,promises_1['readFile'])(_0x59d381,{'encoding':_0x14b832(0x108)});}static async['logErrorStartJob'](_0x88b33f,_0x97d202,_0x1ae71a){const _0x2a772f=a81_0x2af963,_0x419207=await new logger_job_state_1['LoggerJobState'](_0x88b33f,_0x97d202)[_0x2a772f(0xf6)]([]);_0x419207['setJobStatus'](logger_enums_1['JobStatus'][_0x2a772f(0x100)]),_0x419207[_0x2a772f(0x117)](_0x1ae71a[_0x2a772f(0x109)]),await _0x419207['kill']();}}exports[a81_0x2af963(0x11d)]=MaskingService,MaskingService[a81_0x2af963(0x12d)]=path_1[a81_0x2af963(0x127)][a81_0x2af963(0x129)](path_2['dataPath'],constants_1[a81_0x2af963(0x10c)]);