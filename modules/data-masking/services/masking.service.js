const a81_0x4a4387=a81_0x3f85;(function(_0x4ca21b,_0x411b95){const _0x38d18c=a81_0x3f85,_0x59382b=_0x4ca21b();while(!![]){try{const _0x2a6b5f=parseInt(_0x38d18c(0x196))/0x1+-parseInt(_0x38d18c(0x1b7))/0x2+-parseInt(_0x38d18c(0x1c4))/0x3*(-parseInt(_0x38d18c(0x199))/0x4)+-parseInt(_0x38d18c(0x1b8))/0x5+-parseInt(_0x38d18c(0x1af))/0x6+-parseInt(_0x38d18c(0x1a3))/0x7+parseInt(_0x38d18c(0x1b1))/0x8;if(_0x2a6b5f===_0x411b95)break;else _0x59382b['push'](_0x59382b['shift']());}catch(_0x8760cc){_0x59382b['push'](_0x59382b['shift']());}}}(a81_0x510c,0x8508d));const a81_0x993425=(function(){let _0x52d153=!![];return function(_0x33e7a2,_0x4a3819){const _0x218e27=_0x52d153?function(){const _0x1effea=a81_0x3f85;if(_0x4a3819){const _0x5eb798=_0x4a3819[_0x1effea(0x1c3)](_0x33e7a2,arguments);return _0x4a3819=null,_0x5eb798;}}:function(){};return _0x52d153=![],_0x218e27;};}()),a81_0x19b16a=a81_0x993425(this,function(){const _0x8f8af6=a81_0x3f85;return a81_0x19b16a[_0x8f8af6(0x198)]()['search'](_0x8f8af6(0x1d5))['toString']()[_0x8f8af6(0x1a4)](a81_0x19b16a)[_0x8f8af6(0x1a6)]('(((.+)+)+)+$');});function a81_0x3f85(_0x3e6368,_0x3e880e){const _0x4a5d94=a81_0x510c();return a81_0x3f85=function(_0x19b16a,_0x993425){_0x19b16a=_0x19b16a-0x191;let _0x510c32=_0x4a5d94[_0x19b16a];return _0x510c32;},a81_0x3f85(_0x3e6368,_0x3e880e);}a81_0x19b16a();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a81_0x4a4387(0x191)]?function(_0x4a8d8e,_0x4e3a54,_0xc7f681,_0x5c5325){const _0x2b3506=a81_0x4a4387;if(_0x5c5325===undefined)_0x5c5325=_0xc7f681;var _0x4cd14d=Object[_0x2b3506(0x1d6)](_0x4e3a54,_0xc7f681);(!_0x4cd14d||(_0x2b3506(0x1ba)in _0x4cd14d?!_0x4e3a54[_0x2b3506(0x1c8)]:_0x4cd14d[_0x2b3506(0x1ad)]||_0x4cd14d[_0x2b3506(0x1d7)]))&&(_0x4cd14d={'enumerable':!![],'get':function(){return _0x4e3a54[_0xc7f681];}}),Object[_0x2b3506(0x1cf)](_0x4a8d8e,_0x5c5325,_0x4cd14d);}:function(_0x34f387,_0x3d1543,_0x449661,_0x2732ce){if(_0x2732ce===undefined)_0x2732ce=_0x449661;_0x34f387[_0x2732ce]=_0x3d1543[_0x449661];}),__setModuleDefault=this&&this[a81_0x4a4387(0x1d2)]||(Object[a81_0x4a4387(0x191)]?function(_0x9ea3d7,_0x6d0326){const _0x343d11=a81_0x4a4387;Object[_0x343d11(0x1cf)](_0x9ea3d7,'default',{'enumerable':!![],'value':_0x6d0326});}:function(_0xb549a9,_0x3cae7d){const _0x2f73f1=a81_0x4a4387;_0xb549a9[_0x2f73f1(0x1cb)]=_0x3cae7d;}),__importStar=this&&this[a81_0x4a4387(0x1cc)]||function(_0x58cf30){const _0x3e595b=a81_0x4a4387;if(_0x58cf30&&_0x58cf30[_0x3e595b(0x1c8)])return _0x58cf30;var _0x4ba582={};if(_0x58cf30!=null){for(var _0xeb9964 in _0x58cf30)if(_0xeb9964!==_0x3e595b(0x1cb)&&Object[_0x3e595b(0x19c)]['hasOwnProperty'][_0x3e595b(0x1ce)](_0x58cf30,_0xeb9964))__createBinding(_0x4ba582,_0x58cf30,_0xeb9964);}return __setModuleDefault(_0x4ba582,_0x58cf30),_0x4ba582;},__importDefault=this&&this[a81_0x4a4387(0x1d3)]||function(_0x5ed4e8){const _0xa490ad=a81_0x4a4387;return _0x5ed4e8&&_0x5ed4e8[_0xa490ad(0x1c8)]?_0x5ed4e8:{'default':_0x5ed4e8};};function a81_0x510c(){const _0x4c9b19=['Job\x20Id\x20not\x20found.','create','csv-parse/sync','sortJobsIds','setJobStatus','getJobsIds','965543WpBwTD','setJobError','toString','4FscRrj','LoggerJobState','slice','prototype','logErrorStartJob','catch','../constants','getJobState','kill','successful','3293066ysHsWq','constructor','push','search','MaskingService','JOB_LOG_STATE_NAME','path','JOB_LOG_DETAILS_FILENAME','../../../constants/job','JobStatus','writable','utf-8','2813820ptMRLX','stringify','10163512FDOqlT','FsUtils','status','../../shared/utils/job.utils','MANIFEST_FILENAME','completedDate','2042168ZOVVcf','3844905QByuop','readFile','get','isExistsPath','maskingFolderPath','../../../core/errors/not-found.error','getJobs','getJobDetails','makeDir','../job/classes/logger/logger-job-state','DATA_MASKING_FOLDER_NAME','apply','3115200jnvVwK','createMaskingJob','../../shared/utils/fs.utils','generateJobId','__esModule','JOB_LOG_STATE_FILENAME','getLog','default','__importStar','init','call','defineProperty','parse','NotFoundError','__setModuleDefault','__importDefault','runJob','(((.+)+)+)+$','getOwnPropertyDescriptor','configurable','join'];a81_0x510c=function(){return _0x4c9b19;};return a81_0x510c();}Object[a81_0x4a4387(0x1cf)](exports,a81_0x4a4387(0x1c8),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a81_0x4a4387(0x1a9))),fs_utils_1=require(a81_0x4a4387(0x1c6)),promises_1=require('fs/promises'),logger_job_state_1=require(a81_0x4a4387(0x1c1)),logger_enums_1=require('../job/enums/logger.enums'),sync_1=require(a81_0x4a4387(0x192)),utils_1=require('@flosum/utils'),not_found_error_1=require(a81_0x4a4387(0x1bd)),job_1=require(a81_0x4a4387(0x1ab)),job_utils_1=__importDefault(require(a81_0x4a4387(0x1b4))),constants_1=require(a81_0x4a4387(0x19f)),path_2=require('../../../configs/path');class MaskingService{static async[a81_0x4a4387(0x1c5)](_0x6f712a){const _0x2fe9bf=a81_0x4a4387,_0x1a7aba=job_utils_1[_0x2fe9bf(0x1cb)][_0x2fe9bf(0x1c7)](),_0x3c0878=(0x0,path_1[_0x2fe9bf(0x1d8)])(MaskingService[_0x2fe9bf(0x1bc)],_0x1a7aba);await(0x0,fs_utils_1[_0x2fe9bf(0x1c0)])(_0x3c0878),await(0x0,promises_1['writeFile'])(_0x3c0878+'/'+job_1[_0x2fe9bf(0x1b5)],JSON[_0x2fe9bf(0x1b0)]({'details':_0x6f712a}));const _0x4f95be=await new logger_job_state_1[(_0x2fe9bf(0x19a))](_0x3c0878,_0x1a7aba)[_0x2fe9bf(0x1cd)]([]);await _0x4f95be[_0x2fe9bf(0x1a1)]();const _0x50981c=path_1[_0x2fe9bf(0x1cb)][_0x2fe9bf(0x1d8)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x2fe9bf(0x1cb)][_0x2fe9bf(0x1d4)](_0x50981c,{'jobStorePath':_0x3c0878,'jobId':_0x1a7aba})[_0x2fe9bf(0x19e)](_0x4e534e=>this['logErrorStartJob'](_0x3c0878,_0x1a7aba,_0x4e534e)),{'jobId':_0x1a7aba};}static async[a81_0x4a4387(0x1be)](_0x7d5d9a,_0x278df9){const _0x30e315=a81_0x4a4387,_0x4e0bf5=await job_utils_1[_0x30e315(0x1cb)][_0x30e315(0x195)](MaskingService[_0x30e315(0x1bc)]),_0x50223a=await job_utils_1[_0x30e315(0x1cb)][_0x30e315(0x193)](MaskingService[_0x30e315(0x1bc)],_0x4e0bf5),_0x24cb2a=_0x50223a[_0x30e315(0x19b)](_0x278df9,_0x278df9+_0x7d5d9a),_0x44700c=[];for(const _0x337765 of _0x24cb2a){const _0xbd2e53=await this[_0x30e315(0x1a0)](_0x337765,![]);_0x44700c[_0x30e315(0x1a5)](_0xbd2e53);}return _0x44700c;}static async[a81_0x4a4387(0x1a0)](_0x2d71e,_0x587e89){const _0x3b80de=a81_0x4a4387,_0x58053c=await this[_0x3b80de(0x1ca)](_0x2d71e,job_1[_0x3b80de(0x1c9)],constants_1[_0x3b80de(0x1a8)]),_0x38d3d1=JSON[_0x3b80de(0x1d0)](_0x58053c),_0x176b46={'id':_0x38d3d1['id'],'status':_0x38d3d1[_0x3b80de(0x1b3)],'createdDate':_0x38d3d1['createdDate'],'completedDate':_0x38d3d1[_0x3b80de(0x1b6)],'successful':_0x38d3d1[_0x3b80de(0x1a2)],'failed':_0x38d3d1['failed']};return _0x587e89?_0x38d3d1:_0x176b46;}static async[a81_0x4a4387(0x1bf)](_0x2fd318){const _0xbb009b=a81_0x4a4387,_0x1ed87e=await this['getLog'](_0x2fd318,job_1[_0xbb009b(0x1aa)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0xbb009b(0x1d0)])(_0x1ed87e,{'columns':!![]});}static async[a81_0x4a4387(0x1ca)](_0x21ab52,_0x1d7a53,_0x431a5c){const _0x29a292=a81_0x4a4387,_0x33f8b4=(0x0,path_1[_0x29a292(0x1d8)])(MaskingService[_0x29a292(0x1bc)],_0x21ab52),_0x188c38=(0x0,path_1[_0x29a292(0x1d8)])(_0x33f8b4,_0x1d7a53);if(!await utils_1[_0x29a292(0x1b2)][_0x29a292(0x1bb)](_0x33f8b4))throw new not_found_error_1[(_0x29a292(0x1d1))](_0x29a292(0x1d9));if(!await utils_1['FsUtils']['isExistsPath'](_0x188c38))throw new not_found_error_1[(_0x29a292(0x1d1))](_0x431a5c+'\x20not\x20found.');return(0x0,promises_1[_0x29a292(0x1b9)])(_0x188c38,{'encoding':_0x29a292(0x1ae)});}static async[a81_0x4a4387(0x19d)](_0x5a6174,_0x41010d,_0xe4620c){const _0x17fb93=a81_0x4a4387,_0x967493=await new logger_job_state_1[(_0x17fb93(0x19a))](_0x5a6174,_0x41010d)[_0x17fb93(0x1cd)]([]);_0x967493[_0x17fb93(0x194)](logger_enums_1[_0x17fb93(0x1ac)]['FAILED']),_0x967493[_0x17fb93(0x197)](_0xe4620c['message']),await _0x967493['kill']();}}exports[a81_0x4a4387(0x1a7)]=MaskingService,MaskingService[a81_0x4a4387(0x1bc)]=path_1[a81_0x4a4387(0x1cb)][a81_0x4a4387(0x1d8)](path_2['dataPath'],constants_1[a81_0x4a4387(0x1c2)]);