const a98_0x89b966=a98_0x5d35;(function(_0x30c43a,_0x443698){const _0x205057=a98_0x5d35,_0x106078=_0x30c43a();while(!![]){try{const _0x5686fe=parseInt(_0x205057(0x1ac))/0x1+-parseInt(_0x205057(0x1b1))/0x2*(parseInt(_0x205057(0x19f))/0x3)+parseInt(_0x205057(0x188))/0x4+-parseInt(_0x205057(0x1a8))/0x5*(parseInt(_0x205057(0x177))/0x6)+parseInt(_0x205057(0x19a))/0x7*(-parseInt(_0x205057(0x1a2))/0x8)+-parseInt(_0x205057(0x18c))/0x9+-parseInt(_0x205057(0x192))/0xa*(-parseInt(_0x205057(0x1b5))/0xb);if(_0x5686fe===_0x443698)break;else _0x106078['push'](_0x106078['shift']());}catch(_0x19ceba){_0x106078['push'](_0x106078['shift']());}}}(a98_0x1ddf,0x41aab));const a98_0x333883=(function(){let _0xc39883=!![];return function(_0x4dc7b1,_0x185c76){const _0x4c4588=_0xc39883?function(){const _0x71ec77=a98_0x5d35;if(_0x185c76){const _0x1ea115=_0x185c76[_0x71ec77(0x180)](_0x4dc7b1,arguments);return _0x185c76=null,_0x1ea115;}}:function(){};return _0xc39883=![],_0x4c4588;};}()),a98_0x469276=a98_0x333883(this,function(){const _0x1275d5=a98_0x5d35;return a98_0x469276[_0x1275d5(0x190)]()[_0x1275d5(0x189)](_0x1275d5(0x19e))[_0x1275d5(0x190)]()['constructor'](a98_0x469276)[_0x1275d5(0x189)]('(((.+)+)+)+$');});function a98_0x1ddf(){const _0xef3b91=['\x20not\x20found.','maskingFolderPath','2019240UUnBkE','search','message','setJobError','810639mwUtKv','__importDefault','runJob','../../../configs/path','toString','JOB_LOG_DETAILS_FILENAME','470GdTptk','path','utf-8','defineProperty','parse','__importStar','kill','completedDate','369271SJvKXi','writeFile','successful','JOB_PATH','(((.+)+)+)+$','12dvcDdw','getJobs','join','72QLqHhl','../../shared/utils/fs.utils','hasOwnProperty','create','getOwnPropertyDescriptor','../job/enums/logger.enums','9895QuElkt','stringify','sortJobsIds','fs/promises','289207pbQebe','../../../constants/job','call','../constants','readFile','28334cNwGfy','failed','NotFoundError','catch','33231TOaqaA','MaskingService','isExistsPath','makeDir','default','LoggerJobState','FsUtils','push','logErrorStartJob','setJobStatus','status','138jsSwOg','getJobState','FAILED','csv-parse/sync','getJobsIds','generateJobId','JOB_LOG_DETAILS_NAME','init','__esModule','apply','Job\x20Id\x20not\x20found.','@flosum/utils','getLog','createdDate','getJobDetails'];a98_0x1ddf=function(){return _0xef3b91;};return a98_0x1ddf();}a98_0x469276();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a98_0x89b966(0x1a5)]?function(_0x19be8b,_0x4d0019,_0xb94f78,_0x260727){const _0x26824d=a98_0x89b966;if(_0x260727===undefined)_0x260727=_0xb94f78;var _0x3a46ab=Object[_0x26824d(0x1a6)](_0x4d0019,_0xb94f78);(!_0x3a46ab||('get'in _0x3a46ab?!_0x4d0019[_0x26824d(0x17f)]:_0x3a46ab['writable']||_0x3a46ab['configurable']))&&(_0x3a46ab={'enumerable':!![],'get':function(){return _0x4d0019[_0xb94f78];}}),Object[_0x26824d(0x195)](_0x19be8b,_0x260727,_0x3a46ab);}:function(_0x2d44b7,_0xc637d3,_0x1fbc02,_0x1dab17){if(_0x1dab17===undefined)_0x1dab17=_0x1fbc02;_0x2d44b7[_0x1dab17]=_0xc637d3[_0x1fbc02];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a98_0x89b966(0x1a5)]?function(_0x3a725c,_0x551aab){const _0x318ccd=a98_0x89b966;Object[_0x318ccd(0x195)](_0x3a725c,_0x318ccd(0x1b9),{'enumerable':!![],'value':_0x551aab});}:function(_0xcdcf49,_0x450fa0){const _0x222822=a98_0x89b966;_0xcdcf49[_0x222822(0x1b9)]=_0x450fa0;}),__importStar=this&&this[a98_0x89b966(0x197)]||function(_0x314433){const _0x1a9675=a98_0x89b966;if(_0x314433&&_0x314433[_0x1a9675(0x17f)])return _0x314433;var _0x392d89={};if(_0x314433!=null){for(var _0x104a07 in _0x314433)if(_0x104a07!==_0x1a9675(0x1b9)&&Object['prototype'][_0x1a9675(0x1a4)][_0x1a9675(0x1ae)](_0x314433,_0x104a07))__createBinding(_0x392d89,_0x314433,_0x104a07);}return __setModuleDefault(_0x392d89,_0x314433),_0x392d89;},__importDefault=this&&this[a98_0x89b966(0x18d)]||function(_0x25c855){return _0x25c855&&_0x25c855['__esModule']?_0x25c855:{'default':_0x25c855};};Object['defineProperty'](exports,a98_0x89b966(0x17f),{'value':!![]}),exports[a98_0x89b966(0x1b6)]=void 0x0;const path_1=__importStar(require(a98_0x89b966(0x193))),fs_utils_1=require(a98_0x89b966(0x1a3)),promises_1=require(a98_0x89b966(0x1ab)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a98_0x89b966(0x1a7)),sync_1=require(a98_0x89b966(0x17a)),utils_1=require(a98_0x89b966(0x182)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a98_0x89b966(0x1ad)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a98_0x89b966(0x1af)),path_2=require(a98_0x89b966(0x18f));function a98_0x5d35(_0x3d28f6,_0x3172e1){const _0x5343a2=a98_0x1ddf();return a98_0x5d35=function(_0x469276,_0x333883){_0x469276=_0x469276-0x171;let _0x1ddfcb=_0x5343a2[_0x469276];return _0x1ddfcb;},a98_0x5d35(_0x3d28f6,_0x3172e1);}class MaskingService{static async['createMaskingJob'](_0x501f60){const _0x225cc4=a98_0x89b966,_0x4a5a39=job_utils_1[_0x225cc4(0x1b9)][_0x225cc4(0x17c)](),_0x12d308=(0x0,path_1[_0x225cc4(0x1a1)])(MaskingService['maskingFolderPath'],_0x4a5a39);await(0x0,fs_utils_1[_0x225cc4(0x1b8)])(_0x12d308),await(0x0,promises_1[_0x225cc4(0x19b)])(_0x12d308+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x225cc4(0x1a9)]({'details':_0x501f60}));const _0x3132f0=await new logger_job_state_1[(_0x225cc4(0x171))](_0x12d308,_0x4a5a39)[_0x225cc4(0x17e)]([]);await _0x3132f0[_0x225cc4(0x198)]();const _0x25e6be=path_1[_0x225cc4(0x1b9)]['join'](__dirname,job_1[_0x225cc4(0x19d)]);return job_utils_1[_0x225cc4(0x1b9)][_0x225cc4(0x18e)](_0x25e6be,{'jobStorePath':_0x12d308,'jobId':_0x4a5a39})[_0x225cc4(0x1b4)](_0x552995=>this[_0x225cc4(0x174)](_0x12d308,_0x4a5a39,_0x552995)),{'jobId':_0x4a5a39};}static async[a98_0x89b966(0x1a0)](_0x340fd1,_0x1dcaf3){const _0x353a3f=a98_0x89b966,_0x28f014=await job_utils_1[_0x353a3f(0x1b9)][_0x353a3f(0x17b)](MaskingService[_0x353a3f(0x187)]),_0x30a9ab=await job_utils_1['default'][_0x353a3f(0x1aa)](MaskingService[_0x353a3f(0x187)],_0x28f014),_0x6e091=_0x30a9ab['slice'](_0x1dcaf3,_0x1dcaf3+_0x340fd1),_0x21a330=[];for(const _0x29bdc8 of _0x6e091){const _0x2726b2=await this[_0x353a3f(0x178)](_0x29bdc8,![]);_0x21a330[_0x353a3f(0x173)](_0x2726b2);}return _0x21a330;}static async[a98_0x89b966(0x178)](_0x4223a2,_0x4810c1){const _0x267426=a98_0x89b966,_0x22db7b=await this[_0x267426(0x183)](_0x4223a2,job_1['JOB_LOG_STATE_FILENAME'],constants_1['JOB_LOG_STATE_NAME']),_0x2fc3c4=JSON['parse'](_0x22db7b),_0x535601={'id':_0x2fc3c4['id'],'status':_0x2fc3c4[_0x267426(0x176)],'createdDate':_0x2fc3c4[_0x267426(0x184)],'completedDate':_0x2fc3c4[_0x267426(0x199)],'successful':_0x2fc3c4[_0x267426(0x19c)],'failed':_0x2fc3c4[_0x267426(0x1b2)]};return _0x4810c1?_0x2fc3c4:_0x535601;}static async[a98_0x89b966(0x185)](_0x533a78){const _0x58c661=a98_0x89b966,_0x2cb39c=await this[_0x58c661(0x183)](_0x533a78,job_1[_0x58c661(0x191)],constants_1[_0x58c661(0x17d)]);return(0x0,sync_1[_0x58c661(0x196)])(_0x2cb39c,{'columns':!![]});}static async['getLog'](_0x2a982b,_0x33cf8f,_0x5e1979){const _0x33c67d=a98_0x89b966,_0x2317a5=(0x0,path_1[_0x33c67d(0x1a1)])(MaskingService['maskingFolderPath'],_0x2a982b),_0x280745=(0x0,path_1['join'])(_0x2317a5,_0x33cf8f);if(!await utils_1[_0x33c67d(0x172)][_0x33c67d(0x1b7)](_0x2317a5))throw new not_found_error_1['NotFoundError'](_0x33c67d(0x181));if(!await utils_1[_0x33c67d(0x172)][_0x33c67d(0x1b7)](_0x280745))throw new not_found_error_1[(_0x33c67d(0x1b3))](_0x5e1979+_0x33c67d(0x186));return(0x0,promises_1[_0x33c67d(0x1b0)])(_0x280745,{'encoding':_0x33c67d(0x194)});}static async[a98_0x89b966(0x174)](_0x5323b9,_0x30c11b,_0xa20725){const _0x589ae5=a98_0x89b966,_0x1a06d2=await new logger_job_state_1[(_0x589ae5(0x171))](_0x5323b9,_0x30c11b)[_0x589ae5(0x17e)]([]);_0x1a06d2[_0x589ae5(0x175)](logger_enums_1['JobStatus'][_0x589ae5(0x179)]),_0x1a06d2[_0x589ae5(0x18b)](_0xa20725[_0x589ae5(0x18a)]),await _0x1a06d2[_0x589ae5(0x198)]();}}exports[a98_0x89b966(0x1b6)]=MaskingService,MaskingService[a98_0x89b966(0x187)]=path_1[a98_0x89b966(0x1b9)][a98_0x89b966(0x1a1)](path_2['dataPath'],constants_1['DATA_MASKING_FOLDER_NAME']);