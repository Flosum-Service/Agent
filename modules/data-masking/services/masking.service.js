function a81_0x2944(_0x51ec90,_0x2710a5){const _0x5d33d9=a81_0x4d6d();return a81_0x2944=function(_0xac524b,_0x260abc){_0xac524b=_0xac524b-0x65;let _0x4d6d53=_0x5d33d9[_0xac524b];return _0x4d6d53;},a81_0x2944(_0x51ec90,_0x2710a5);}const a81_0x523f7e=a81_0x2944;(function(_0x585b61,_0x34abe3){const _0x5e6dc3=a81_0x2944,_0x32fbbf=_0x585b61();while(!![]){try{const _0x9b2c4f=parseInt(_0x5e6dc3(0x7a))/0x1*(-parseInt(_0x5e6dc3(0x7d))/0x2)+parseInt(_0x5e6dc3(0x80))/0x3*(parseInt(_0x5e6dc3(0x97))/0x4)+-parseInt(_0x5e6dc3(0x9f))/0x5+parseInt(_0x5e6dc3(0x89))/0x6+parseInt(_0x5e6dc3(0x98))/0x7+parseInt(_0x5e6dc3(0x82))/0x8*(-parseInt(_0x5e6dc3(0xa7))/0x9)+-parseInt(_0x5e6dc3(0x8a))/0xa;if(_0x9b2c4f===_0x34abe3)break;else _0x32fbbf['push'](_0x32fbbf['shift']());}catch(_0x58741d){_0x32fbbf['push'](_0x32fbbf['shift']());}}}(a81_0x4d6d,0x7e6c8));const a81_0x260abc=(function(){let _0x32b6a3=!![];return function(_0x3f57a5,_0x12db45){const _0x402e72=_0x32b6a3?function(){if(_0x12db45){const _0x179b1b=_0x12db45['apply'](_0x3f57a5,arguments);return _0x12db45=null,_0x179b1b;}}:function(){};return _0x32b6a3=![],_0x402e72;};}()),a81_0xac524b=a81_0x260abc(this,function(){const _0xd76278=a81_0x2944;return a81_0xac524b[_0xd76278(0xaf)]()[_0xd76278(0x8b)](_0xd76278(0x6c))[_0xd76278(0xaf)]()[_0xd76278(0xa2)](a81_0xac524b)['search'](_0xd76278(0x6c));});a81_0xac524b();function a81_0x4d6d(){const _0x2a4b87=['4OjijPx','2467059KLJDKP','__createBinding','__esModule','__importDefault','path','makeDir','../../../configs/path','2222345qNeOZD','sortJobsIds','get','constructor','JOB_LOG_DETAILS_FILENAME','DATA_MASKING_FOLDER_NAME','../../../constants/job','dataPath','9QkquHz','getJobState','getJobs','isExistsPath','createMaskingJob','failed','utf-8','message','toString','init','default','MaskingService','MANIFEST_FILENAME','completedDate','prototype','getJobsIds','(((.+)+)+)+$','writeFile','__setModuleDefault','join','getLog','createdDate','slice','configurable','../constants','setJobError','hasOwnProperty','push','\x20not\x20found.','@flosum/utils','102cJFgTE','Job\x20Id\x20not\x20found.','getJobDetails','226oOSIlh','maskingFolderPath','create','2783910wCcPLz','call','3009752ZdhMnf','JobStatus','readFile','defineProperty','__importStar','NotFoundError','../../shared/utils/job.utils','3883566IeUnEk','5776220jDHWOi','search','../job/enums/logger.enums','kill','JOB_LOG_DETAILS_NAME','JOB_PATH','getOwnPropertyDescriptor','parse','setJobStatus','runJob','LoggerJobState','writable','FsUtils'];a81_0x4d6d=function(){return _0x2a4b87;};return a81_0x4d6d();}'use strict';var __createBinding=this&&this[a81_0x523f7e(0x99)]||(Object[a81_0x523f7e(0x7f)]?function(_0x2c7ee4,_0x37bc16,_0x504d1c,_0x494fe3){const _0x2984e2=a81_0x523f7e;if(_0x494fe3===undefined)_0x494fe3=_0x504d1c;var _0x2f1a33=Object[_0x2984e2(0x90)](_0x37bc16,_0x504d1c);(!_0x2f1a33||(_0x2984e2(0xa1)in _0x2f1a33?!_0x37bc16['__esModule']:_0x2f1a33[_0x2984e2(0x95)]||_0x2f1a33[_0x2984e2(0x73)]))&&(_0x2f1a33={'enumerable':!![],'get':function(){return _0x37bc16[_0x504d1c];}}),Object[_0x2984e2(0x85)](_0x2c7ee4,_0x494fe3,_0x2f1a33);}:function(_0x33b7a6,_0x8a9a3c,_0x2a80c0,_0x3b8074){if(_0x3b8074===undefined)_0x3b8074=_0x2a80c0;_0x33b7a6[_0x3b8074]=_0x8a9a3c[_0x2a80c0];}),__setModuleDefault=this&&this[a81_0x523f7e(0x6e)]||(Object[a81_0x523f7e(0x7f)]?function(_0x41c05e,_0x53d9df){const _0x19a950=a81_0x523f7e;Object[_0x19a950(0x85)](_0x41c05e,'default',{'enumerable':!![],'value':_0x53d9df});}:function(_0x36473c,_0x3c193b){const _0x4258c9=a81_0x523f7e;_0x36473c[_0x4258c9(0x66)]=_0x3c193b;}),__importStar=this&&this[a81_0x523f7e(0x86)]||function(_0x456a1d){const _0x319929=a81_0x523f7e;if(_0x456a1d&&_0x456a1d[_0x319929(0x9a)])return _0x456a1d;var _0x1d257b={};if(_0x456a1d!=null){for(var _0x2a43ef in _0x456a1d)if(_0x2a43ef!==_0x319929(0x66)&&Object[_0x319929(0x6a)][_0x319929(0x76)][_0x319929(0x81)](_0x456a1d,_0x2a43ef))__createBinding(_0x1d257b,_0x456a1d,_0x2a43ef);}return __setModuleDefault(_0x1d257b,_0x456a1d),_0x1d257b;},__importDefault=this&&this[a81_0x523f7e(0x9b)]||function(_0x32afae){const _0xab0dad=a81_0x523f7e;return _0x32afae&&_0x32afae[_0xab0dad(0x9a)]?_0x32afae:{'default':_0x32afae};};Object[a81_0x523f7e(0x85)](exports,a81_0x523f7e(0x9a),{'value':!![]}),exports[a81_0x523f7e(0x67)]=void 0x0;const path_1=__importStar(require(a81_0x523f7e(0x9c))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require('fs/promises'),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a81_0x523f7e(0x8c)),sync_1=require('csv-parse/sync'),utils_1=require(a81_0x523f7e(0x79)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a81_0x523f7e(0xa5)),job_utils_1=__importDefault(require(a81_0x523f7e(0x88))),constants_1=require(a81_0x523f7e(0x74)),path_2=require(a81_0x523f7e(0x9e));class MaskingService{static async[a81_0x523f7e(0xab)](_0x35770d){const _0x1bf88e=a81_0x523f7e,_0x36b689=job_utils_1[_0x1bf88e(0x66)]['generateJobId'](),_0x2aa492=(0x0,path_1[_0x1bf88e(0x6f)])(MaskingService[_0x1bf88e(0x7e)],_0x36b689);await(0x0,fs_utils_1[_0x1bf88e(0x9d)])(_0x2aa492),await(0x0,promises_1[_0x1bf88e(0x6d)])(_0x2aa492+'/'+job_1[_0x1bf88e(0x68)],JSON['stringify']({'details':_0x35770d}));const _0x104980=await new logger_job_state_1['LoggerJobState'](_0x2aa492,_0x36b689)['init']([]);await _0x104980[_0x1bf88e(0x8d)]();const _0x4da217=path_1[_0x1bf88e(0x66)]['join'](__dirname,job_1[_0x1bf88e(0x8f)]);return job_utils_1[_0x1bf88e(0x66)][_0x1bf88e(0x93)](_0x4da217,{'jobStorePath':_0x2aa492,'jobId':_0x36b689})['catch'](_0x8b5165=>this['logErrorStartJob'](_0x2aa492,_0x36b689,_0x8b5165)),{'jobId':_0x36b689};}static async[a81_0x523f7e(0xa9)](_0x33f893,_0x8da050){const _0xcfc8d1=a81_0x523f7e,_0x187110=await job_utils_1[_0xcfc8d1(0x66)][_0xcfc8d1(0x6b)](MaskingService[_0xcfc8d1(0x7e)]),_0x36f199=await job_utils_1[_0xcfc8d1(0x66)][_0xcfc8d1(0xa0)](MaskingService['maskingFolderPath'],_0x187110),_0x261f6d=_0x36f199[_0xcfc8d1(0x72)](_0x8da050,_0x8da050+_0x33f893),_0x7ca8ec=[];for(const _0x3a898a of _0x261f6d){const _0x469954=await this[_0xcfc8d1(0xa8)](_0x3a898a,![]);_0x7ca8ec[_0xcfc8d1(0x77)](_0x469954);}return _0x7ca8ec;}static async['getJobState'](_0x151418,_0x157023){const _0x5ae323=a81_0x523f7e,_0x23ccff=await this[_0x5ae323(0x70)](_0x151418,job_1['JOB_LOG_STATE_FILENAME'],constants_1['JOB_LOG_STATE_NAME']),_0x48b9f1=JSON[_0x5ae323(0x91)](_0x23ccff),_0x1cd9f8={'id':_0x48b9f1['id'],'status':_0x48b9f1['status'],'createdDate':_0x48b9f1[_0x5ae323(0x71)],'completedDate':_0x48b9f1[_0x5ae323(0x69)],'successful':_0x48b9f1['successful'],'failed':_0x48b9f1[_0x5ae323(0xac)]};return _0x157023?_0x48b9f1:_0x1cd9f8;}static async[a81_0x523f7e(0x7c)](_0xb573d8){const _0x78184=a81_0x523f7e,_0x3eb19c=await this[_0x78184(0x70)](_0xb573d8,job_1[_0x78184(0xa3)],constants_1[_0x78184(0x8e)]);return(0x0,sync_1[_0x78184(0x91)])(_0x3eb19c,{'columns':!![]});}static async['getLog'](_0x5b396b,_0x555001,_0x15cda8){const _0x538f6b=a81_0x523f7e,_0x166e49=(0x0,path_1['join'])(MaskingService['maskingFolderPath'],_0x5b396b),_0x4c2f56=(0x0,path_1['join'])(_0x166e49,_0x555001);if(!await utils_1[_0x538f6b(0x96)]['isExistsPath'](_0x166e49))throw new not_found_error_1[(_0x538f6b(0x87))](_0x538f6b(0x7b));if(!await utils_1['FsUtils'][_0x538f6b(0xaa)](_0x4c2f56))throw new not_found_error_1[(_0x538f6b(0x87))](_0x15cda8+_0x538f6b(0x78));return(0x0,promises_1[_0x538f6b(0x84)])(_0x4c2f56,{'encoding':_0x538f6b(0xad)});}static async['logErrorStartJob'](_0x57f2c7,_0x3ab77a,_0x48c48c){const _0x339006=a81_0x523f7e,_0x3fd8eb=await new logger_job_state_1[(_0x339006(0x94))](_0x57f2c7,_0x3ab77a)[_0x339006(0x65)]([]);_0x3fd8eb[_0x339006(0x92)](logger_enums_1[_0x339006(0x83)]['FAILED']),_0x3fd8eb[_0x339006(0x75)](_0x48c48c[_0x339006(0xae)]),await _0x3fd8eb[_0x339006(0x8d)]();}}exports[a81_0x523f7e(0x67)]=MaskingService,MaskingService['maskingFolderPath']=path_1[a81_0x523f7e(0x66)][a81_0x523f7e(0x6f)](path_2[a81_0x523f7e(0xa6)],constants_1[a81_0x523f7e(0xa4)]);