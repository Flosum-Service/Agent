const a81_0x406aab=a81_0x1543;(function(_0x5a76bc,_0xbf79d3){const _0x1f48b7=a81_0x1543,_0x228df3=_0x5a76bc();while(!![]){try{const _0xebe38c=parseInt(_0x1f48b7(0x89))/0x1*(-parseInt(_0x1f48b7(0xbe))/0x2)+parseInt(_0x1f48b7(0x99))/0x3+-parseInt(_0x1f48b7(0x98))/0x4*(-parseInt(_0x1f48b7(0x77))/0x5)+-parseInt(_0x1f48b7(0x9b))/0x6+parseInt(_0x1f48b7(0xaa))/0x7+parseInt(_0x1f48b7(0x95))/0x8*(parseInt(_0x1f48b7(0x81))/0x9)+parseInt(_0x1f48b7(0x8a))/0xa;if(_0xebe38c===_0xbf79d3)break;else _0x228df3['push'](_0x228df3['shift']());}catch(_0x4abcf7){_0x228df3['push'](_0x228df3['shift']());}}}(a81_0x7e31,0x21a6a));const a81_0x23b41d=(function(){let _0x249255=!![];return function(_0x5835d2,_0x364594){const _0x17c589=_0x249255?function(){const _0x147b89=a81_0x1543;if(_0x364594){const _0x4376b4=_0x364594[_0x147b89(0xb5)](_0x5835d2,arguments);return _0x364594=null,_0x4376b4;}}:function(){};return _0x249255=![],_0x17c589;};}()),a81_0xb77ad7=a81_0x23b41d(this,function(){const _0x5095d1=a81_0x1543;return a81_0xb77ad7[_0x5095d1(0xb1)]()[_0x5095d1(0x92)](_0x5095d1(0x71))[_0x5095d1(0xb1)]()[_0x5095d1(0x8d)](a81_0xb77ad7)[_0x5095d1(0x92)](_0x5095d1(0x71));});function a81_0x1543(_0x118b06,_0x467837){const _0x3a1051=a81_0x7e31();return a81_0x1543=function(_0xb77ad7,_0x23b41d){_0xb77ad7=_0xb77ad7-0x71;let _0x7e31d2=_0x3a1051[_0xb77ad7];return _0x7e31d2;},a81_0x1543(_0x118b06,_0x467837);}a81_0xb77ad7();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a81_0x406aab(0x73)]?function(_0x109eb6,_0x188949,_0x3b9ecf,_0x30e48f){const _0xe1e8d8=a81_0x406aab;if(_0x30e48f===undefined)_0x30e48f=_0x3b9ecf;var _0x2786af=Object[_0xe1e8d8(0xaf)](_0x188949,_0x3b9ecf);(!_0x2786af||(_0xe1e8d8(0x85)in _0x2786af?!_0x188949['__esModule']:_0x2786af[_0xe1e8d8(0x7a)]||_0x2786af[_0xe1e8d8(0xb3)]))&&(_0x2786af={'enumerable':!![],'get':function(){return _0x188949[_0x3b9ecf];}}),Object['defineProperty'](_0x109eb6,_0x30e48f,_0x2786af);}:function(_0x530555,_0x26532c,_0x2e8a50,_0x14687b){if(_0x14687b===undefined)_0x14687b=_0x2e8a50;_0x530555[_0x14687b]=_0x26532c[_0x2e8a50];}),__setModuleDefault=this&&this[a81_0x406aab(0xbd)]||(Object['create']?function(_0x513fe1,_0x1260ba){const _0x5e2188=a81_0x406aab;Object[_0x5e2188(0xba)](_0x513fe1,_0x5e2188(0x78),{'enumerable':!![],'value':_0x1260ba});}:function(_0x2626cc,_0x255106){_0x2626cc['default']=_0x255106;}),__importStar=this&&this[a81_0x406aab(0x91)]||function(_0x5d5714){const _0x224c19=a81_0x406aab;if(_0x5d5714&&_0x5d5714[_0x224c19(0x7b)])return _0x5d5714;var _0xa6d098={};if(_0x5d5714!=null){for(var _0x2ab1c7 in _0x5d5714)if(_0x2ab1c7!==_0x224c19(0x78)&&Object[_0x224c19(0x88)]['hasOwnProperty'][_0x224c19(0x9f)](_0x5d5714,_0x2ab1c7))__createBinding(_0xa6d098,_0x5d5714,_0x2ab1c7);}return __setModuleDefault(_0xa6d098,_0x5d5714),_0xa6d098;},__importDefault=this&&this[a81_0x406aab(0xb8)]||function(_0x50034d){const _0x494ace=a81_0x406aab;return _0x50034d&&_0x50034d[_0x494ace(0x7b)]?_0x50034d:{'default':_0x50034d};};function a81_0x7e31(){const _0x495524=['writable','__esModule','MaskingService','../../../core/errors/not-found.error','JOB_LOG_DETAILS_FILENAME','generateJobId','../job/classes/logger/logger-job-state','531585PbBFlf','getJobDetails','JobStatus','status','get','join','maskingFolderPath','prototype','16355DHvmCS','112900vnrIpZ','FAILED','kill','constructor','getLog','push','catch','__importStar','search','getJobState','message','24kpgxbw','JOB_LOG_DETAILS_NAME','setJobError','3364GjbdNt','482436JeBMnx','getJobs','136362eYphLi','DATA_MASKING_FOLDER_NAME','utf-8','dataPath','call','runJob','../../../configs/path','createdDate','makeDir','writeFile','NotFoundError','@flosum/utils','path','MANIFEST_FILENAME','isExistsPath','210371PfZHnL','../../../constants/job','successful','sortJobsIds','JOB_LOG_STATE_NAME','getOwnPropertyDescriptor','JOB_LOG_STATE_FILENAME','toString','\x20not\x20found.','configurable','../../shared/utils/job.utils','apply','failed','init','__importDefault','LoggerJobState','defineProperty','logErrorStartJob','../job/enums/logger.enums','__setModuleDefault','32OAHppI','csv-parse/sync','(((.+)+)+)+$','slice','create','completedDate','parse','getJobsIds','255EJAFeY','default','../constants'];a81_0x7e31=function(){return _0x495524;};return a81_0x7e31();}Object[a81_0x406aab(0xba)](exports,'__esModule',{'value':!![]}),exports[a81_0x406aab(0x7c)]=void 0x0;const path_1=__importStar(require(a81_0x406aab(0xa7))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require('fs/promises'),logger_job_state_1=require(a81_0x406aab(0x80)),logger_enums_1=require(a81_0x406aab(0xbc)),sync_1=require(a81_0x406aab(0xbf)),utils_1=require(a81_0x406aab(0xa6)),not_found_error_1=require(a81_0x406aab(0x7d)),job_1=require(a81_0x406aab(0xab)),job_utils_1=__importDefault(require(a81_0x406aab(0xb4))),constants_1=require(a81_0x406aab(0x79)),path_2=require(a81_0x406aab(0xa1));class MaskingService{static async['createMaskingJob'](_0x5b22e3){const _0x3b3fb4=a81_0x406aab,_0xa5ffb0=job_utils_1[_0x3b3fb4(0x78)][_0x3b3fb4(0x7f)](),_0x7deb9d=(0x0,path_1[_0x3b3fb4(0x86)])(MaskingService['maskingFolderPath'],_0xa5ffb0);await(0x0,fs_utils_1[_0x3b3fb4(0xa3)])(_0x7deb9d),await(0x0,promises_1[_0x3b3fb4(0xa4)])(_0x7deb9d+'/'+job_1[_0x3b3fb4(0xa8)],JSON['stringify']({'details':_0x5b22e3}));const _0x45ca70=await new logger_job_state_1[(_0x3b3fb4(0xb9))](_0x7deb9d,_0xa5ffb0)[_0x3b3fb4(0xb7)]([]);await _0x45ca70['kill']();const _0x2af122=path_1[_0x3b3fb4(0x78)][_0x3b3fb4(0x86)](__dirname,job_1['JOB_PATH']);return job_utils_1['default'][_0x3b3fb4(0xa0)](_0x2af122,{'jobStorePath':_0x7deb9d,'jobId':_0xa5ffb0})[_0x3b3fb4(0x90)](_0x5b8263=>this['logErrorStartJob'](_0x7deb9d,_0xa5ffb0,_0x5b8263)),{'jobId':_0xa5ffb0};}static async[a81_0x406aab(0x9a)](_0x44e254,_0x37db44){const _0x39e7db=a81_0x406aab,_0x64e11c=await job_utils_1['default'][_0x39e7db(0x76)](MaskingService[_0x39e7db(0x87)]),_0x264ab2=await job_utils_1[_0x39e7db(0x78)][_0x39e7db(0xad)](MaskingService['maskingFolderPath'],_0x64e11c),_0xb2539f=_0x264ab2[_0x39e7db(0x72)](_0x37db44,_0x37db44+_0x44e254),_0x37fa66=[];for(const _0x5b1a98 of _0xb2539f){const _0xc35c9a=await this[_0x39e7db(0x93)](_0x5b1a98,![]);_0x37fa66[_0x39e7db(0x8f)](_0xc35c9a);}return _0x37fa66;}static async['getJobState'](_0x4ec4cf,_0x27a7f1){const _0x625efa=a81_0x406aab,_0x145ca7=await this['getLog'](_0x4ec4cf,job_1[_0x625efa(0xb0)],constants_1[_0x625efa(0xae)]),_0x1c84d4=JSON[_0x625efa(0x75)](_0x145ca7),_0x32bfdd={'id':_0x1c84d4['id'],'status':_0x1c84d4[_0x625efa(0x84)],'createdDate':_0x1c84d4[_0x625efa(0xa2)],'completedDate':_0x1c84d4[_0x625efa(0x74)],'successful':_0x1c84d4[_0x625efa(0xac)],'failed':_0x1c84d4[_0x625efa(0xb6)]};return _0x27a7f1?_0x1c84d4:_0x32bfdd;}static async[a81_0x406aab(0x82)](_0x31941b){const _0x6e6028=a81_0x406aab,_0x3d0ecb=await this[_0x6e6028(0x8e)](_0x31941b,job_1[_0x6e6028(0x7e)],constants_1[_0x6e6028(0x96)]);return(0x0,sync_1[_0x6e6028(0x75)])(_0x3d0ecb,{'columns':!![]});}static async[a81_0x406aab(0x8e)](_0x363ea6,_0x3dfd7f,_0x4b5095){const _0x3a70f9=a81_0x406aab,_0x48bf8e=(0x0,path_1[_0x3a70f9(0x86)])(MaskingService[_0x3a70f9(0x87)],_0x363ea6),_0x2719b6=(0x0,path_1['join'])(_0x48bf8e,_0x3dfd7f);if(!await utils_1['FsUtils'][_0x3a70f9(0xa9)](_0x48bf8e))throw new not_found_error_1[(_0x3a70f9(0xa5))]('Job\x20Id\x20not\x20found.');if(!await utils_1['FsUtils'][_0x3a70f9(0xa9)](_0x2719b6))throw new not_found_error_1[(_0x3a70f9(0xa5))](_0x4b5095+_0x3a70f9(0xb2));return(0x0,promises_1['readFile'])(_0x2719b6,{'encoding':_0x3a70f9(0x9d)});}static async[a81_0x406aab(0xbb)](_0x95a936,_0x9656b4,_0x1421df){const _0x27d6f6=a81_0x406aab,_0x5a58f2=await new logger_job_state_1[(_0x27d6f6(0xb9))](_0x95a936,_0x9656b4)[_0x27d6f6(0xb7)]([]);_0x5a58f2['setJobStatus'](logger_enums_1[_0x27d6f6(0x83)][_0x27d6f6(0x8b)]),_0x5a58f2[_0x27d6f6(0x97)](_0x1421df[_0x27d6f6(0x94)]),await _0x5a58f2[_0x27d6f6(0x8c)]();}}exports[a81_0x406aab(0x7c)]=MaskingService,MaskingService[a81_0x406aab(0x87)]=path_1['default'][a81_0x406aab(0x86)](path_2[a81_0x406aab(0x9e)],constants_1[a81_0x406aab(0x9c)]);