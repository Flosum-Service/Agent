const a99_0x4b5525=a99_0x4041;(function(_0x3d5352,_0x195eaa){const _0x56b4ea=a99_0x4041,_0x4a7eff=_0x3d5352();while(!![]){try{const _0x1603b9=-parseInt(_0x56b4ea(0x75))/0x1+parseInt(_0x56b4ea(0x90))/0x2+parseInt(_0x56b4ea(0x85))/0x3*(parseInt(_0x56b4ea(0x8f))/0x4)+parseInt(_0x56b4ea(0x77))/0x5*(parseInt(_0x56b4ea(0x86))/0x6)+-parseInt(_0x56b4ea(0x8e))/0x7+-parseInt(_0x56b4ea(0xa6))/0x8*(-parseInt(_0x56b4ea(0x9d))/0x9)+-parseInt(_0x56b4ea(0x7e))/0xa;if(_0x1603b9===_0x195eaa)break;else _0x4a7eff['push'](_0x4a7eff['shift']());}catch(_0x244be9){_0x4a7eff['push'](_0x4a7eff['shift']());}}}(a99_0x376d,0x2e233));const a99_0x361346=(function(){let _0x54f156=!![];return function(_0x225c91,_0x4e44d5){const _0x42fa8f=_0x54f156?function(){const _0x3d06b7=a99_0x4041;if(_0x4e44d5){const _0x1654d6=_0x4e44d5[_0x3d06b7(0x92)](_0x225c91,arguments);return _0x4e44d5=null,_0x1654d6;}}:function(){};return _0x54f156=![],_0x42fa8f;};}()),a99_0x39bee3=a99_0x361346(this,function(){const _0x239ace=a99_0x4041;return a99_0x39bee3[_0x239ace(0xa0)]()[_0x239ace(0x6d)](_0x239ace(0xab))['toString']()[_0x239ace(0x76)](a99_0x39bee3)[_0x239ace(0x6d)](_0x239ace(0xab));});a99_0x39bee3();function a99_0x376d(){const _0x34ffa3=['kill','utf-8','csv-parse/sync','1691320mvknpr','get','FAILED','\x20not\x20found.','fs/promises','__setModuleDefault','JOB_LOG_DETAILS_FILENAME','196920ZfBuHj','492ZQJzMI','getLog','successful','default','getJobDetails','catch','getJobState','FsUtils','434749ktlNlD','4fbxUBE','394268LZCgXg','init','apply','parse','call','push','setJobStatus','setJobError','JOB_LOG_DETAILS_NAME','Job\x20Id\x20not\x20found.','MANIFEST_FILENAME','getOwnPropertyDescriptor','../../../core/errors/not-found.error','1951902LydojE','__importStar','failed','toString','../../../configs/path','dataPath','completedDate','join','logErrorStartJob','8IzFsdw','../../shared/utils/job.utils','maskingFolderPath','MaskingService','generateJobId','(((.+)+)+)+$','isExistsPath','../job/enums/logger.enums','LoggerJobState','NotFoundError','../../shared/utils/fs.utils','createdDate','create','JobStatus','search','__esModule','makeDir','slice','configurable','writable','JOB_PATH','../job/classes/logger/logger-job-state','179072uUfHxh','constructor','7295adivZT','JOB_LOG_STATE_NAME','DATA_MASKING_FOLDER_NAME','defineProperty'];a99_0x376d=function(){return _0x34ffa3;};return a99_0x376d();}'use strict';function a99_0x4041(_0x24c214,_0x4f4780){const _0x3152d1=a99_0x376d();return a99_0x4041=function(_0x39bee3,_0x361346){_0x39bee3=_0x39bee3-0x69;let _0x376d07=_0x3152d1[_0x39bee3];return _0x376d07;},a99_0x4041(_0x24c214,_0x4f4780);}var __createBinding=this&&this['__createBinding']||(Object[a99_0x4b5525(0x6b)]?function(_0x3d276e,_0x5c398b,_0x2e740f,_0x1611ad){const _0x2bead4=a99_0x4b5525;if(_0x1611ad===undefined)_0x1611ad=_0x2e740f;var _0x7a8c5f=Object[_0x2bead4(0x9b)](_0x5c398b,_0x2e740f);(!_0x7a8c5f||(_0x2bead4(0x7f)in _0x7a8c5f?!_0x5c398b[_0x2bead4(0x6e)]:_0x7a8c5f[_0x2bead4(0x72)]||_0x7a8c5f[_0x2bead4(0x71)]))&&(_0x7a8c5f={'enumerable':!![],'get':function(){return _0x5c398b[_0x2e740f];}}),Object[_0x2bead4(0x7a)](_0x3d276e,_0x1611ad,_0x7a8c5f);}:function(_0x46bd1a,_0x32c55c,_0x2a860d,_0x418de1){if(_0x418de1===undefined)_0x418de1=_0x2a860d;_0x46bd1a[_0x418de1]=_0x32c55c[_0x2a860d];}),__setModuleDefault=this&&this[a99_0x4b5525(0x83)]||(Object['create']?function(_0x1b72a9,_0x12969c){const _0x245317=a99_0x4b5525;Object[_0x245317(0x7a)](_0x1b72a9,'default',{'enumerable':!![],'value':_0x12969c});}:function(_0x55f1e4,_0x57c9d3){const _0x2eee88=a99_0x4b5525;_0x55f1e4[_0x2eee88(0x89)]=_0x57c9d3;}),__importStar=this&&this[a99_0x4b5525(0x9e)]||function(_0x456b54){const _0x57b923=a99_0x4b5525;if(_0x456b54&&_0x456b54[_0x57b923(0x6e)])return _0x456b54;var _0x5b1852={};if(_0x456b54!=null){for(var _0x1ef62f in _0x456b54)if(_0x1ef62f!==_0x57b923(0x89)&&Object['prototype']['hasOwnProperty'][_0x57b923(0x94)](_0x456b54,_0x1ef62f))__createBinding(_0x5b1852,_0x456b54,_0x1ef62f);}return __setModuleDefault(_0x5b1852,_0x456b54),_0x5b1852;},__importDefault=this&&this['__importDefault']||function(_0x16e4f7){const _0x92e087=a99_0x4b5525;return _0x16e4f7&&_0x16e4f7[_0x92e087(0x6e)]?_0x16e4f7:{'default':_0x16e4f7};};Object['defineProperty'](exports,a99_0x4b5525(0x6e),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require('path')),fs_utils_1=require(a99_0x4b5525(0x69)),promises_1=require(a99_0x4b5525(0x82)),logger_job_state_1=require(a99_0x4b5525(0x74)),logger_enums_1=require(a99_0x4b5525(0xad)),sync_1=require(a99_0x4b5525(0x7d)),utils_1=require('@flosum/utils'),not_found_error_1=require(a99_0x4b5525(0x9c)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a99_0x4b5525(0xa7))),constants_1=require('../constants'),path_2=require(a99_0x4b5525(0xa1));class MaskingService{static async['createMaskingJob'](_0x2c06ef){const _0x24f5ae=a99_0x4b5525,_0x202e59=job_utils_1[_0x24f5ae(0x89)][_0x24f5ae(0xaa)](),_0x53e46d=(0x0,path_1['join'])(MaskingService[_0x24f5ae(0xa8)],_0x202e59);await(0x0,fs_utils_1[_0x24f5ae(0x6f)])(_0x53e46d),await(0x0,promises_1['writeFile'])(_0x53e46d+'/'+job_1[_0x24f5ae(0x9a)],JSON['stringify']({'details':_0x2c06ef}));const _0x5ea9ef=await new logger_job_state_1['LoggerJobState'](_0x53e46d,_0x202e59)[_0x24f5ae(0x91)]([]);await _0x5ea9ef[_0x24f5ae(0x7b)]();const _0x22bcc0=path_1[_0x24f5ae(0x89)][_0x24f5ae(0xa4)](__dirname,job_1[_0x24f5ae(0x73)]);return job_utils_1[_0x24f5ae(0x89)]['runJob'](_0x22bcc0,{'jobStorePath':_0x53e46d,'jobId':_0x202e59})[_0x24f5ae(0x8b)](_0x4b8db6=>this[_0x24f5ae(0xa5)](_0x53e46d,_0x202e59,_0x4b8db6)),{'jobId':_0x202e59};}static async['getJobs'](_0x164662,_0x13731d){const _0xbf7bf7=a99_0x4b5525,_0x5b1be4=await job_utils_1['default']['getJobsIds'](MaskingService['maskingFolderPath']),_0x3bdf5b=await job_utils_1['default']['sortJobsIds'](MaskingService[_0xbf7bf7(0xa8)],_0x5b1be4),_0xcf3499=_0x3bdf5b[_0xbf7bf7(0x70)](_0x13731d,_0x13731d+_0x164662),_0x12fe33=[];for(const _0x37cfe7 of _0xcf3499){const _0x59f541=await this[_0xbf7bf7(0x8c)](_0x37cfe7,![]);_0x12fe33[_0xbf7bf7(0x95)](_0x59f541);}return _0x12fe33;}static async[a99_0x4b5525(0x8c)](_0x14e10f,_0x400a07){const _0x6e4585=a99_0x4b5525,_0x19e3d3=await this[_0x6e4585(0x87)](_0x14e10f,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x6e4585(0x78)]),_0x14cd6e=JSON[_0x6e4585(0x93)](_0x19e3d3),_0x53a011={'id':_0x14cd6e['id'],'status':_0x14cd6e['status'],'createdDate':_0x14cd6e[_0x6e4585(0x6a)],'completedDate':_0x14cd6e[_0x6e4585(0xa3)],'successful':_0x14cd6e[_0x6e4585(0x88)],'failed':_0x14cd6e[_0x6e4585(0x9f)]};return _0x400a07?_0x14cd6e:_0x53a011;}static async[a99_0x4b5525(0x8a)](_0x186cff){const _0x4975d1=a99_0x4b5525,_0x36c0f1=await this[_0x4975d1(0x87)](_0x186cff,job_1[_0x4975d1(0x84)],constants_1[_0x4975d1(0x98)]);return(0x0,sync_1[_0x4975d1(0x93)])(_0x36c0f1,{'columns':!![]});}static async[a99_0x4b5525(0x87)](_0x153c29,_0x5c65bd,_0x2a2d60){const _0x2314be=a99_0x4b5525,_0x28c4c3=(0x0,path_1[_0x2314be(0xa4)])(MaskingService[_0x2314be(0xa8)],_0x153c29),_0x3923d9=(0x0,path_1[_0x2314be(0xa4)])(_0x28c4c3,_0x5c65bd);if(!await utils_1[_0x2314be(0x8d)][_0x2314be(0xac)](_0x28c4c3))throw new not_found_error_1['NotFoundError'](_0x2314be(0x99));if(!await utils_1[_0x2314be(0x8d)]['isExistsPath'](_0x3923d9))throw new not_found_error_1[(_0x2314be(0xaf))](_0x2a2d60+_0x2314be(0x81));return(0x0,promises_1['readFile'])(_0x3923d9,{'encoding':_0x2314be(0x7c)});}static async[a99_0x4b5525(0xa5)](_0x2f4d2f,_0x539602,_0x2e0c9d){const _0x200c0e=a99_0x4b5525,_0x2ce5b8=await new logger_job_state_1[(_0x200c0e(0xae))](_0x2f4d2f,_0x539602)[_0x200c0e(0x91)]([]);_0x2ce5b8[_0x200c0e(0x96)](logger_enums_1[_0x200c0e(0x6c)][_0x200c0e(0x80)]),_0x2ce5b8[_0x200c0e(0x97)](_0x2e0c9d['message']),await _0x2ce5b8[_0x200c0e(0x7b)]();}}exports[a99_0x4b5525(0xa9)]=MaskingService,MaskingService[a99_0x4b5525(0xa8)]=path_1[a99_0x4b5525(0x89)][a99_0x4b5525(0xa4)](path_2[a99_0x4b5525(0xa2)],constants_1[a99_0x4b5525(0x79)]);