const a98_0x1af5b1=a98_0x5c9e;(function(_0x227de5,_0x23d167){const _0x29d868=a98_0x5c9e,_0xfb0029=_0x227de5();while(!![]){try{const _0x13d1e9=-parseInt(_0x29d868(0x195))/0x1+-parseInt(_0x29d868(0x189))/0x2+-parseInt(_0x29d868(0x19d))/0x3+parseInt(_0x29d868(0x193))/0x4+-parseInt(_0x29d868(0x1b8))/0x5+-parseInt(_0x29d868(0x190))/0x6+-parseInt(_0x29d868(0x1b4))/0x7*(-parseInt(_0x29d868(0x19a))/0x8);if(_0x13d1e9===_0x23d167)break;else _0xfb0029['push'](_0xfb0029['shift']());}catch(_0x39bd29){_0xfb0029['push'](_0xfb0029['shift']());}}}(a98_0x6a72,0x2d25f));const a98_0x3e0ac5=(function(){let _0x4e5cf3=!![];return function(_0x146906,_0x5061b1){const _0x2f04c0=_0x4e5cf3?function(){const _0x366c95=a98_0x5c9e;if(_0x5061b1){const _0x4495c8=_0x5061b1[_0x366c95(0x1ab)](_0x146906,arguments);return _0x5061b1=null,_0x4495c8;}}:function(){};return _0x4e5cf3=![],_0x2f04c0;};}()),a98_0x2a7391=a98_0x3e0ac5(this,function(){const _0x28483c=a98_0x5c9e;return a98_0x2a7391['toString']()[_0x28483c(0x18e)](_0x28483c(0x1ae))[_0x28483c(0x19f)]()[_0x28483c(0x17c)](a98_0x2a7391)[_0x28483c(0x18e)](_0x28483c(0x1ae));});a98_0x2a7391();'use strict';var __createBinding=this&&this[a98_0x1af5b1(0x18f)]||(Object[a98_0x1af5b1(0x184)]?function(_0x2a2cc7,_0x2ca70d,_0x3e7325,_0xbda6b7){const _0x3a7d1c=a98_0x1af5b1;if(_0xbda6b7===undefined)_0xbda6b7=_0x3e7325;var _0x40b966=Object[_0x3a7d1c(0x1b6)](_0x2ca70d,_0x3e7325);(!_0x40b966||(_0x3a7d1c(0x1a6)in _0x40b966?!_0x2ca70d[_0x3a7d1c(0x17a)]:_0x40b966[_0x3a7d1c(0x1b9)]||_0x40b966[_0x3a7d1c(0x197)]))&&(_0x40b966={'enumerable':!![],'get':function(){return _0x2ca70d[_0x3e7325];}}),Object[_0x3a7d1c(0x19b)](_0x2a2cc7,_0xbda6b7,_0x40b966);}:function(_0x14a112,_0x4ce7e0,_0x271d6c,_0x5e1dd0){if(_0x5e1dd0===undefined)_0x5e1dd0=_0x271d6c;_0x14a112[_0x5e1dd0]=_0x4ce7e0[_0x271d6c];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a98_0x1af5b1(0x184)]?function(_0x485987,_0x2d6449){const _0x1b2f6d=a98_0x1af5b1;Object['defineProperty'](_0x485987,_0x1b2f6d(0x175),{'enumerable':!![],'value':_0x2d6449});}:function(_0x3457cf,_0x4af5f3){const _0x362fb8=a98_0x1af5b1;_0x3457cf[_0x362fb8(0x175)]=_0x4af5f3;}),__importStar=this&&this[a98_0x1af5b1(0x17d)]||function(_0x1b347f){const _0x11c03a=a98_0x1af5b1;if(_0x1b347f&&_0x1b347f[_0x11c03a(0x17a)])return _0x1b347f;var _0xb4444b={};if(_0x1b347f!=null){for(var _0x13c774 in _0x1b347f)if(_0x13c774!==_0x11c03a(0x175)&&Object[_0x11c03a(0x183)][_0x11c03a(0x176)][_0x11c03a(0x1b7)](_0x1b347f,_0x13c774))__createBinding(_0xb4444b,_0x1b347f,_0x13c774);}return __setModuleDefault(_0xb4444b,_0x1b347f),_0xb4444b;},__importDefault=this&&this[a98_0x1af5b1(0x173)]||function(_0x11b0af){const _0x3cca86=a98_0x1af5b1;return _0x11b0af&&_0x11b0af[_0x3cca86(0x17a)]?_0x11b0af:{'default':_0x11b0af};};function a98_0x5c9e(_0x3a06c2,_0x47fe35){const _0x42223d=a98_0x6a72();return a98_0x5c9e=function(_0x2a7391,_0x3e0ac5){_0x2a7391=_0x2a7391-0x172;let _0x6a72fa=_0x42223d[_0x2a7391];return _0x6a72fa;},a98_0x5c9e(_0x3a06c2,_0x47fe35);}function a98_0x6a72(){const _0x17147e=['598710CbUsgK','getJobsIds','../job/enums/logger.enums','1354700wxsemJ','getJobDetails','233054HrCXuy','fs/promises','configurable','status','path','304CWejba','defineProperty','../../shared/utils/fs.utils','305085gfMUvw','getJobState','toString','JobStatus','getLog','../../../constants/job','../../../core/errors/not-found.error','\x20not\x20found.','NotFoundError','get','JOB_LOG_DETAILS_FILENAME','slice','failed','maskingFolderPath','apply','getJobs','../../../configs/path','(((.+)+)+)+$','kill','catch','successful','push','JOB_LOG_STATE_FILENAME','123634jStehU','utf-8','getOwnPropertyDescriptor','call','788135cwEQVT','writable','isExistsPath','__importDefault','DATA_MASKING_FOLDER_NAME','default','hasOwnProperty','@flosum/utils','generateJobId','JOB_PATH','__esModule','../../shared/utils/job.utils','constructor','__importStar','LoggerJobState','MANIFEST_FILENAME','csv-parse/sync','setJobStatus','writeFile','prototype','create','join','Job\x20Id\x20not\x20found.','dataPath','message','465486diguSi','parse','../constants','logErrorStartJob','MaskingService','search','__createBinding'];a98_0x6a72=function(){return _0x17147e;};return a98_0x6a72();}Object[a98_0x1af5b1(0x19b)](exports,a98_0x1af5b1(0x17a),{'value':!![]}),exports[a98_0x1af5b1(0x18d)]=void 0x0;const path_1=__importStar(require(a98_0x1af5b1(0x199))),fs_utils_1=require(a98_0x1af5b1(0x19c)),promises_1=require(a98_0x1af5b1(0x196)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a98_0x1af5b1(0x192)),sync_1=require(a98_0x1af5b1(0x180)),utils_1=require(a98_0x1af5b1(0x177)),not_found_error_1=require(a98_0x1af5b1(0x1a3)),job_1=require(a98_0x1af5b1(0x1a2)),job_utils_1=__importDefault(require(a98_0x1af5b1(0x17b))),constants_1=require(a98_0x1af5b1(0x18b)),path_2=require(a98_0x1af5b1(0x1ad));class MaskingService{static async['createMaskingJob'](_0x1e6f81){const _0x163432=a98_0x1af5b1,_0x24d003=job_utils_1[_0x163432(0x175)][_0x163432(0x178)](),_0x5f1708=(0x0,path_1[_0x163432(0x185)])(MaskingService[_0x163432(0x1aa)],_0x24d003);await(0x0,fs_utils_1['makeDir'])(_0x5f1708),await(0x0,promises_1[_0x163432(0x182)])(_0x5f1708+'/'+job_1[_0x163432(0x17f)],JSON['stringify']({'details':_0x1e6f81}));const _0x3a0921=await new logger_job_state_1[(_0x163432(0x17e))](_0x5f1708,_0x24d003)['init']([]);await _0x3a0921[_0x163432(0x1af)]();const _0x1c8637=path_1[_0x163432(0x175)][_0x163432(0x185)](__dirname,job_1[_0x163432(0x179)]);return job_utils_1[_0x163432(0x175)]['runJob'](_0x1c8637,{'jobStorePath':_0x5f1708,'jobId':_0x24d003})[_0x163432(0x1b0)](_0x10b5fc=>this[_0x163432(0x18c)](_0x5f1708,_0x24d003,_0x10b5fc)),{'jobId':_0x24d003};}static async[a98_0x1af5b1(0x1ac)](_0x3337f1,_0x20d51d){const _0x2f61a6=a98_0x1af5b1,_0x19e547=await job_utils_1[_0x2f61a6(0x175)][_0x2f61a6(0x191)](MaskingService[_0x2f61a6(0x1aa)]),_0x4aad89=await job_utils_1['default']['sortJobsIds'](MaskingService[_0x2f61a6(0x1aa)],_0x19e547),_0x2ad08a=_0x4aad89[_0x2f61a6(0x1a8)](_0x20d51d,_0x20d51d+_0x3337f1),_0x8183e2=[];for(const _0x45750b of _0x2ad08a){const _0x27759e=await this['getJobState'](_0x45750b,![]);_0x8183e2[_0x2f61a6(0x1b2)](_0x27759e);}return _0x8183e2;}static async[a98_0x1af5b1(0x19e)](_0xd4a888,_0x27dfb2){const _0x310079=a98_0x1af5b1,_0x1fbbfa=await this[_0x310079(0x1a1)](_0xd4a888,job_1[_0x310079(0x1b3)],constants_1['JOB_LOG_STATE_NAME']),_0x1beffb=JSON[_0x310079(0x18a)](_0x1fbbfa),_0x1d6a8e={'id':_0x1beffb['id'],'status':_0x1beffb[_0x310079(0x198)],'createdDate':_0x1beffb['createdDate'],'completedDate':_0x1beffb['completedDate'],'successful':_0x1beffb[_0x310079(0x1b1)],'failed':_0x1beffb[_0x310079(0x1a9)]};return _0x27dfb2?_0x1beffb:_0x1d6a8e;}static async[a98_0x1af5b1(0x194)](_0x106b3a){const _0x105f1e=a98_0x1af5b1,_0x88bdab=await this[_0x105f1e(0x1a1)](_0x106b3a,job_1[_0x105f1e(0x1a7)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1['parse'])(_0x88bdab,{'columns':!![]});}static async[a98_0x1af5b1(0x1a1)](_0x5bf865,_0x4b6aba,_0xaae41c){const _0x34aaa4=a98_0x1af5b1,_0x166c01=(0x0,path_1[_0x34aaa4(0x185)])(MaskingService[_0x34aaa4(0x1aa)],_0x5bf865),_0x1a6a40=(0x0,path_1['join'])(_0x166c01,_0x4b6aba);if(!await utils_1['FsUtils'][_0x34aaa4(0x172)](_0x166c01))throw new not_found_error_1[(_0x34aaa4(0x1a5))](_0x34aaa4(0x186));if(!await utils_1['FsUtils']['isExistsPath'](_0x1a6a40))throw new not_found_error_1[(_0x34aaa4(0x1a5))](_0xaae41c+_0x34aaa4(0x1a4));return(0x0,promises_1['readFile'])(_0x1a6a40,{'encoding':_0x34aaa4(0x1b5)});}static async[a98_0x1af5b1(0x18c)](_0xa6d4fb,_0x5564d7,_0x22565f){const _0x2df6f2=a98_0x1af5b1,_0x152430=await new logger_job_state_1[(_0x2df6f2(0x17e))](_0xa6d4fb,_0x5564d7)['init']([]);_0x152430[_0x2df6f2(0x181)](logger_enums_1[_0x2df6f2(0x1a0)]['FAILED']),_0x152430['setJobError'](_0x22565f[_0x2df6f2(0x188)]),await _0x152430[_0x2df6f2(0x1af)]();}}exports['MaskingService']=MaskingService,MaskingService[a98_0x1af5b1(0x1aa)]=path_1['default'][a98_0x1af5b1(0x185)](path_2[a98_0x1af5b1(0x187)],constants_1[a98_0x1af5b1(0x174)]);