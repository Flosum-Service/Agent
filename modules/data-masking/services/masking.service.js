const a81_0x503c13=a81_0x2a50;function a81_0x2a50(_0x309934,_0x4d3bc4){const _0x39ff6b=a81_0x1a4e();return a81_0x2a50=function(_0x5a0a1c,_0x3c700b){_0x5a0a1c=_0x5a0a1c-0x19c;let _0x1a4efc=_0x39ff6b[_0x5a0a1c];return _0x1a4efc;},a81_0x2a50(_0x309934,_0x4d3bc4);}(function(_0x3bb6ba,_0x40c25b){const _0x1efa29=a81_0x2a50,_0xc9a06e=_0x3bb6ba();while(!![]){try{const _0x236d4e=parseInt(_0x1efa29(0x1d6))/0x1*(parseInt(_0x1efa29(0x1a2))/0x2)+-parseInt(_0x1efa29(0x1ac))/0x3+parseInt(_0x1efa29(0x1cc))/0x4*(-parseInt(_0x1efa29(0x1c9))/0x5)+-parseInt(_0x1efa29(0x1bc))/0x6+parseInt(_0x1efa29(0x1a3))/0x7+-parseInt(_0x1efa29(0x1df))/0x8*(parseInt(_0x1efa29(0x1a4))/0x9)+parseInt(_0x1efa29(0x1e5))/0xa;if(_0x236d4e===_0x40c25b)break;else _0xc9a06e['push'](_0xc9a06e['shift']());}catch(_0x2736ae){_0xc9a06e['push'](_0xc9a06e['shift']());}}}(a81_0x1a4e,0xabc72));const a81_0x3c700b=(function(){let _0x16b10f=!![];return function(_0x3cf11e,_0x2017d8){const _0x42538d=_0x16b10f?function(){if(_0x2017d8){const _0x563f24=_0x2017d8['apply'](_0x3cf11e,arguments);return _0x2017d8=null,_0x563f24;}}:function(){};return _0x16b10f=![],_0x42538d;};}()),a81_0x5a0a1c=a81_0x3c700b(this,function(){const _0x5b622d=a81_0x2a50;return a81_0x5a0a1c['toString']()[_0x5b622d(0x1dd)](_0x5b622d(0x1d0))[_0x5b622d(0x1e0)]()[_0x5b622d(0x1b2)](a81_0x5a0a1c)[_0x5b622d(0x1dd)](_0x5b622d(0x1d0));});a81_0x5a0a1c();'use strict';var __createBinding=this&&this[a81_0x503c13(0x1bd)]||(Object[a81_0x503c13(0x1b8)]?function(_0x4a042e,_0x512eac,_0x4ba1c4,_0x23c654){const _0x22d5f7=a81_0x503c13;if(_0x23c654===undefined)_0x23c654=_0x4ba1c4;var _0x3190ad=Object[_0x22d5f7(0x1a6)](_0x512eac,_0x4ba1c4);(!_0x3190ad||(_0x22d5f7(0x1d1)in _0x3190ad?!_0x512eac['__esModule']:_0x3190ad['writable']||_0x3190ad[_0x22d5f7(0x1c6)]))&&(_0x3190ad={'enumerable':!![],'get':function(){return _0x512eac[_0x4ba1c4];}}),Object[_0x22d5f7(0x1e7)](_0x4a042e,_0x23c654,_0x3190ad);}:function(_0x6cd163,_0x8d7491,_0xdd6f3b,_0x106368){if(_0x106368===undefined)_0x106368=_0xdd6f3b;_0x6cd163[_0x106368]=_0x8d7491[_0xdd6f3b];}),__setModuleDefault=this&&this[a81_0x503c13(0x1e1)]||(Object[a81_0x503c13(0x1b8)]?function(_0x4438bd,_0x1327aa){const _0x2d61c0=a81_0x503c13;Object[_0x2d61c0(0x1e7)](_0x4438bd,_0x2d61c0(0x1b6),{'enumerable':!![],'value':_0x1327aa});}:function(_0x313876,_0x404f07){const _0xceec5c=a81_0x503c13;_0x313876[_0xceec5c(0x1b6)]=_0x404f07;}),__importStar=this&&this[a81_0x503c13(0x1cd)]||function(_0x332b9d){const _0x2e05f7=a81_0x503c13;if(_0x332b9d&&_0x332b9d['__esModule'])return _0x332b9d;var _0x1df983={};if(_0x332b9d!=null){for(var _0x25fdec in _0x332b9d)if(_0x25fdec!==_0x2e05f7(0x1b6)&&Object[_0x2e05f7(0x1c3)][_0x2e05f7(0x19c)][_0x2e05f7(0x1b0)](_0x332b9d,_0x25fdec))__createBinding(_0x1df983,_0x332b9d,_0x25fdec);}return __setModuleDefault(_0x1df983,_0x332b9d),_0x1df983;},__importDefault=this&&this[a81_0x503c13(0x1ab)]||function(_0x33dd95){const _0x4e1d1a=a81_0x503c13;return _0x33dd95&&_0x33dd95[_0x4e1d1a(0x1e4)]?_0x33dd95:{'default':_0x33dd95};};Object[a81_0x503c13(0x1e7)](exports,a81_0x503c13(0x1e4),{'value':!![]}),exports[a81_0x503c13(0x1d5)]=void 0x0;const path_1=__importStar(require(a81_0x503c13(0x1c8))),fs_utils_1=require(a81_0x503c13(0x1c0)),promises_1=require(a81_0x503c13(0x1ca)),logger_job_state_1=require(a81_0x503c13(0x1ce)),logger_enums_1=require(a81_0x503c13(0x1e6)),sync_1=require('csv-parse/sync'),utils_1=require(a81_0x503c13(0x1aa)),not_found_error_1=require(a81_0x503c13(0x1cf)),job_1=require(a81_0x503c13(0x1ea)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a81_0x503c13(0x1d4)),path_2=require('../../../configs/path');function a81_0x1a4e(){const _0x446ac0=['../job/enums/logger.enums','defineProperty','MANIFEST_FILENAME','createdDate','../../../constants/job','hasOwnProperty','stringify','getJobState','JOB_LOG_DETAILS_FILENAME','runJob','JOB_PATH','1264048JyYpvW','2659230IrUmSh','45zFEiBC','push','getOwnPropertyDescriptor','FAILED','setJobStatus','failed','@flosum/utils','__importDefault','1439061IjcjmO','init','generateJobId','LoggerJobState','call','kill','constructor','getJobsIds','sortJobsIds','utf-8','default','maskingFolderPath','create','JobStatus','parse','getJobDetails','3750288mVlKrP','__createBinding','message','JOB_LOG_DETAILS_NAME','../../shared/utils/fs.utils','\x20not\x20found.','catch','prototype','join','Job\x20Id\x20not\x20found.','configurable','getLog','path','75lAQBNB','fs/promises','getJobs','232172QTFVMM','__importStar','../job/classes/logger/logger-job-state','../../../core/errors/not-found.error','(((.+)+)+)+$','get','completedDate','JOB_LOG_STATE_FILENAME','../constants','MaskingService','2Cyghci','setJobError','createMaskingJob','dataPath','status','logErrorStartJob','FsUtils','search','JOB_LOG_STATE_NAME','476024TZObcL','toString','__setModuleDefault','NotFoundError','isExistsPath','__esModule','13325590ijsNzv'];a81_0x1a4e=function(){return _0x446ac0;};return a81_0x1a4e();}class MaskingService{static async[a81_0x503c13(0x1d8)](_0x14ef8c){const _0x390501=a81_0x503c13,_0x2a485a=job_utils_1[_0x390501(0x1b6)][_0x390501(0x1ae)](),_0x517594=(0x0,path_1['join'])(MaskingService[_0x390501(0x1b7)],_0x2a485a);await(0x0,fs_utils_1['makeDir'])(_0x517594),await(0x0,promises_1['writeFile'])(_0x517594+'/'+job_1[_0x390501(0x1e8)],JSON[_0x390501(0x19d)]({'details':_0x14ef8c}));const _0x119c25=await new logger_job_state_1[(_0x390501(0x1af))](_0x517594,_0x2a485a)['init']([]);await _0x119c25[_0x390501(0x1b1)]();const _0x7ac233=path_1['default']['join'](__dirname,job_1[_0x390501(0x1a1)]);return job_utils_1[_0x390501(0x1b6)][_0x390501(0x1a0)](_0x7ac233,{'jobStorePath':_0x517594,'jobId':_0x2a485a})[_0x390501(0x1c2)](_0x4c673=>this[_0x390501(0x1db)](_0x517594,_0x2a485a,_0x4c673)),{'jobId':_0x2a485a};}static async[a81_0x503c13(0x1cb)](_0x25376f,_0x1abadb){const _0x387489=a81_0x503c13,_0x59963c=await job_utils_1[_0x387489(0x1b6)][_0x387489(0x1b3)](MaskingService['maskingFolderPath']),_0x386594=await job_utils_1[_0x387489(0x1b6)][_0x387489(0x1b4)](MaskingService[_0x387489(0x1b7)],_0x59963c),_0x4c8440=_0x386594['slice'](_0x1abadb,_0x1abadb+_0x25376f),_0x3749fb=[];for(const _0x1ce0ee of _0x4c8440){const _0x1afed2=await this[_0x387489(0x19e)](_0x1ce0ee,![]);_0x3749fb[_0x387489(0x1a5)](_0x1afed2);}return _0x3749fb;}static async[a81_0x503c13(0x19e)](_0xd4c8d5,_0x44ac6e){const _0x4ecee3=a81_0x503c13,_0x10b396=await this['getLog'](_0xd4c8d5,job_1[_0x4ecee3(0x1d3)],constants_1[_0x4ecee3(0x1de)]),_0x34eadd=JSON[_0x4ecee3(0x1ba)](_0x10b396),_0x35b04d={'id':_0x34eadd['id'],'status':_0x34eadd[_0x4ecee3(0x1da)],'createdDate':_0x34eadd[_0x4ecee3(0x1e9)],'completedDate':_0x34eadd[_0x4ecee3(0x1d2)],'successful':_0x34eadd['successful'],'failed':_0x34eadd[_0x4ecee3(0x1a9)]};return _0x44ac6e?_0x34eadd:_0x35b04d;}static async[a81_0x503c13(0x1bb)](_0x51eb7f){const _0x17dd98=a81_0x503c13,_0x460591=await this[_0x17dd98(0x1c7)](_0x51eb7f,job_1[_0x17dd98(0x19f)],constants_1[_0x17dd98(0x1bf)]);return(0x0,sync_1['parse'])(_0x460591,{'columns':!![]});}static async[a81_0x503c13(0x1c7)](_0x204210,_0x4d0459,_0x33c101){const _0x1dc25f=a81_0x503c13,_0x10227a=(0x0,path_1[_0x1dc25f(0x1c4)])(MaskingService[_0x1dc25f(0x1b7)],_0x204210),_0xe6fc34=(0x0,path_1[_0x1dc25f(0x1c4)])(_0x10227a,_0x4d0459);if(!await utils_1[_0x1dc25f(0x1dc)][_0x1dc25f(0x1e3)](_0x10227a))throw new not_found_error_1[(_0x1dc25f(0x1e2))](_0x1dc25f(0x1c5));if(!await utils_1[_0x1dc25f(0x1dc)]['isExistsPath'](_0xe6fc34))throw new not_found_error_1[(_0x1dc25f(0x1e2))](_0x33c101+_0x1dc25f(0x1c1));return(0x0,promises_1['readFile'])(_0xe6fc34,{'encoding':_0x1dc25f(0x1b5)});}static async[a81_0x503c13(0x1db)](_0x1f7861,_0x29a21b,_0xdb3e48){const _0x30176c=a81_0x503c13,_0x300b26=await new logger_job_state_1[(_0x30176c(0x1af))](_0x1f7861,_0x29a21b)[_0x30176c(0x1ad)]([]);_0x300b26[_0x30176c(0x1a8)](logger_enums_1[_0x30176c(0x1b9)][_0x30176c(0x1a7)]),_0x300b26[_0x30176c(0x1d7)](_0xdb3e48[_0x30176c(0x1be)]),await _0x300b26[_0x30176c(0x1b1)]();}}exports[a81_0x503c13(0x1d5)]=MaskingService,MaskingService[a81_0x503c13(0x1b7)]=path_1[a81_0x503c13(0x1b6)][a81_0x503c13(0x1c4)](path_2[a81_0x503c13(0x1d9)],constants_1['DATA_MASKING_FOLDER_NAME']);