const a96_0x5b5aa3=a96_0x5e5e;(function(_0x83ee,_0x3f000b){const _0x4ae5b5=a96_0x5e5e,_0x4b6015=_0x83ee();while(!![]){try{const _0x442bd1=-parseInt(_0x4ae5b5(0xb2))/0x1*(-parseInt(_0x4ae5b5(0xb0))/0x2)+-parseInt(_0x4ae5b5(0xb8))/0x3+-parseInt(_0x4ae5b5(0xbd))/0x4+-parseInt(_0x4ae5b5(0x8c))/0x5+parseInt(_0x4ae5b5(0x97))/0x6+-parseInt(_0x4ae5b5(0xaf))/0x7+-parseInt(_0x4ae5b5(0xb7))/0x8*(-parseInt(_0x4ae5b5(0xae))/0x9);if(_0x442bd1===_0x3f000b)break;else _0x4b6015['push'](_0x4b6015['shift']());}catch(_0x38843c){_0x4b6015['push'](_0x4b6015['shift']());}}}(a96_0x20b8,0x20c42));function a96_0x5e5e(_0x47781f,_0x1892d7){const _0x4cc8cb=a96_0x20b8();return a96_0x5e5e=function(_0x5df1ca,_0x59e277){_0x5df1ca=_0x5df1ca-0x89;let _0x20b828=_0x4cc8cb[_0x5df1ca];return _0x20b828;},a96_0x5e5e(_0x47781f,_0x1892d7);}const a96_0x59e277=(function(){let _0x241092=!![];return function(_0x3a65d6,_0xf4e162){const _0x1a4c34=_0x241092?function(){const _0x23e313=a96_0x5e5e;if(_0xf4e162){const _0xaeb46e=_0xf4e162[_0x23e313(0x9a)](_0x3a65d6,arguments);return _0xf4e162=null,_0xaeb46e;}}:function(){};return _0x241092=![],_0x1a4c34;};}()),a96_0x5df1ca=a96_0x59e277(this,function(){const _0x5c344a=a96_0x5e5e;return a96_0x5df1ca['toString']()[_0x5c344a(0x8b)]('(((.+)+)+)+$')['toString']()[_0x5c344a(0x9b)](a96_0x5df1ca)['search'](_0x5c344a(0xb1));});a96_0x5df1ca();'use strict';var __createBinding=this&&this[a96_0x5b5aa3(0x92)]||(Object[a96_0x5b5aa3(0x9e)]?function(_0x52aba2,_0x145a00,_0x4bce89,_0xa962f5){const _0x597774=a96_0x5b5aa3;if(_0xa962f5===undefined)_0xa962f5=_0x4bce89;var _0x540dd0=Object['getOwnPropertyDescriptor'](_0x145a00,_0x4bce89);(!_0x540dd0||(_0x597774(0xc7)in _0x540dd0?!_0x145a00[_0x597774(0xaa)]:_0x540dd0[_0x597774(0x8a)]||_0x540dd0[_0x597774(0xad)]))&&(_0x540dd0={'enumerable':!![],'get':function(){return _0x145a00[_0x4bce89];}}),Object[_0x597774(0xba)](_0x52aba2,_0xa962f5,_0x540dd0);}:function(_0x14707b,_0x31934b,_0x1e1d72,_0x121a58){if(_0x121a58===undefined)_0x121a58=_0x1e1d72;_0x14707b[_0x121a58]=_0x31934b[_0x1e1d72];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a96_0x5b5aa3(0x9e)]?function(_0x466641,_0x45881b){const _0x130cb5=a96_0x5b5aa3;Object[_0x130cb5(0xba)](_0x466641,_0x130cb5(0xc9),{'enumerable':!![],'value':_0x45881b});}:function(_0x5444b0,_0x492ad3){_0x5444b0['default']=_0x492ad3;}),__importStar=this&&this['__importStar']||function(_0x21e639){const _0x219c25=a96_0x5b5aa3;if(_0x21e639&&_0x21e639[_0x219c25(0xaa)])return _0x21e639;var _0x19b0d0={};if(_0x21e639!=null){for(var _0x524f75 in _0x21e639)if(_0x524f75!=='default'&&Object[_0x219c25(0xa3)]['hasOwnProperty']['call'](_0x21e639,_0x524f75))__createBinding(_0x19b0d0,_0x21e639,_0x524f75);}return __setModuleDefault(_0x19b0d0,_0x21e639),_0x19b0d0;},__importDefault=this&&this['__importDefault']||function(_0x56027f){const _0x52b046=a96_0x5b5aa3;return _0x56027f&&_0x56027f[_0x52b046(0xaa)]?_0x56027f:{'default':_0x56027f};};Object[a96_0x5b5aa3(0xba)](exports,a96_0x5b5aa3(0xaa),{'value':!![]}),exports[a96_0x5b5aa3(0xc1)]=void 0x0;const path_1=__importStar(require(a96_0x5b5aa3(0xb6))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a96_0x5b5aa3(0x91)),logger_job_state_1=require(a96_0x5b5aa3(0xa9)),logger_enums_1=require(a96_0x5b5aa3(0x98)),sync_1=require('csv-parse/sync'),utils_1=require('@flosum/utils'),not_found_error_1=require(a96_0x5b5aa3(0x89)),job_1=require(a96_0x5b5aa3(0xcb)),job_utils_1=__importDefault(require(a96_0x5b5aa3(0xac))),constants_1=require('../constants'),path_2=require(a96_0x5b5aa3(0xab));class MaskingService{static async['createMaskingJob'](_0x26dff7){const _0x8deb9e=a96_0x5b5aa3,_0x2d784a=job_utils_1[_0x8deb9e(0xc9)]['generateJobId'](),_0x151a6f=(0x0,path_1[_0x8deb9e(0xc3)])(MaskingService[_0x8deb9e(0x9d)],_0x2d784a);await(0x0,fs_utils_1[_0x8deb9e(0xa5)])(_0x151a6f),await(0x0,promises_1[_0x8deb9e(0xb9)])(_0x151a6f+'/'+job_1[_0x8deb9e(0x95)],JSON[_0x8deb9e(0xa7)]({'details':_0x26dff7}));const _0x38cd05=await new logger_job_state_1[(_0x8deb9e(0xbe))](_0x151a6f,_0x2d784a)[_0x8deb9e(0x90)]([]);await _0x38cd05[_0x8deb9e(0x8d)]();const _0x48d1f7=path_1[_0x8deb9e(0xc9)][_0x8deb9e(0xc3)](__dirname,job_1[_0x8deb9e(0xc2)]);return job_utils_1[_0x8deb9e(0xc9)][_0x8deb9e(0x9c)](_0x48d1f7,{'jobStorePath':_0x151a6f,'jobId':_0x2d784a})['catch'](_0x2a8d5=>this[_0x8deb9e(0xa2)](_0x151a6f,_0x2d784a,_0x2a8d5)),{'jobId':_0x2d784a};}static async[a96_0x5b5aa3(0xbb)](_0x36a6d1,_0x55323c){const _0x13e3e5=a96_0x5b5aa3,_0x2f3e05=await job_utils_1[_0x13e3e5(0xc9)][_0x13e3e5(0xc0)](MaskingService[_0x13e3e5(0x9d)]),_0x2d0bac=await job_utils_1[_0x13e3e5(0xc9)][_0x13e3e5(0x94)](MaskingService[_0x13e3e5(0x9d)],_0x2f3e05),_0x73f79e=_0x2d0bac[_0x13e3e5(0xca)](_0x55323c,_0x55323c+_0x36a6d1),_0x396fcd=[];for(const _0x277cf5 of _0x73f79e){const _0x3b6986=await this[_0x13e3e5(0x8f)](_0x277cf5,![]);_0x396fcd['push'](_0x3b6986);}return _0x396fcd;}static async[a96_0x5b5aa3(0x8f)](_0x422878,_0x109a31){const _0x25aa1f=a96_0x5b5aa3,_0x4f9eaf=await this[_0x25aa1f(0xcc)](_0x422878,job_1[_0x25aa1f(0xa8)],constants_1[_0x25aa1f(0xb5)]),_0x1b15fa=JSON[_0x25aa1f(0x8e)](_0x4f9eaf),_0x23cc31={'id':_0x1b15fa['id'],'status':_0x1b15fa[_0x25aa1f(0xa4)],'createdDate':_0x1b15fa[_0x25aa1f(0xa1)],'completedDate':_0x1b15fa['completedDate'],'successful':_0x1b15fa[_0x25aa1f(0xc6)],'failed':_0x1b15fa['failed']};return _0x109a31?_0x1b15fa:_0x23cc31;}static async[a96_0x5b5aa3(0xc8)](_0x421188){const _0x2bc7f6=a96_0x5b5aa3,_0x285332=await this[_0x2bc7f6(0xcc)](_0x421188,job_1[_0x2bc7f6(0x9f)],constants_1[_0x2bc7f6(0xa0)]);return(0x0,sync_1[_0x2bc7f6(0x8e)])(_0x285332,{'columns':!![]});}static async[a96_0x5b5aa3(0xcc)](_0x857268,_0x273f83,_0x1a3132){const _0x19e219=a96_0x5b5aa3,_0x1869ad=(0x0,path_1[_0x19e219(0xc3)])(MaskingService[_0x19e219(0x9d)],_0x857268),_0x432d34=(0x0,path_1[_0x19e219(0xc3)])(_0x1869ad,_0x273f83);if(!await utils_1[_0x19e219(0xb3)]['isExistsPath'](_0x1869ad))throw new not_found_error_1[(_0x19e219(0xb4))](_0x19e219(0x99));if(!await utils_1['FsUtils']['isExistsPath'](_0x432d34))throw new not_found_error_1['NotFoundError'](_0x1a3132+'\x20not\x20found.');return(0x0,promises_1['readFile'])(_0x432d34,{'encoding':_0x19e219(0xbc)});}static async[a96_0x5b5aa3(0xa2)](_0x5d27c3,_0x321805,_0x2f3fcd){const _0x4eb402=a96_0x5b5aa3,_0x3111ad=await new logger_job_state_1[(_0x4eb402(0xbe))](_0x5d27c3,_0x321805)[_0x4eb402(0x90)]([]);_0x3111ad[_0x4eb402(0xa6)](logger_enums_1[_0x4eb402(0xbf)][_0x4eb402(0x96)]),_0x3111ad['setJobError'](_0x2f3fcd[_0x4eb402(0xc5)]),await _0x3111ad[_0x4eb402(0x8d)]();}}exports[a96_0x5b5aa3(0xc1)]=MaskingService,MaskingService[a96_0x5b5aa3(0x9d)]=path_1[a96_0x5b5aa3(0xc9)]['join'](path_2[a96_0x5b5aa3(0xc4)],constants_1[a96_0x5b5aa3(0x93)]);function a96_0x20b8(){const _0x3df572=['getJobState','init','fs/promises','__createBinding','DATA_MASKING_FOLDER_NAME','sortJobsIds','MANIFEST_FILENAME','FAILED','532800dRrpcc','../job/enums/logger.enums','Job\x20Id\x20not\x20found.','apply','constructor','runJob','maskingFolderPath','create','JOB_LOG_DETAILS_FILENAME','JOB_LOG_DETAILS_NAME','createdDate','logErrorStartJob','prototype','status','makeDir','setJobStatus','stringify','JOB_LOG_STATE_FILENAME','../job/classes/logger/logger-job-state','__esModule','../../../configs/path','../../shared/utils/job.utils','configurable','18uTdKKJ','1499162hSlUiQ','508flxdKd','(((.+)+)+)+$','964KzPioq','FsUtils','NotFoundError','JOB_LOG_STATE_NAME','path','1026808FnAwCM','404646lksPhV','writeFile','defineProperty','getJobs','utf-8','172344jWDlPC','LoggerJobState','JobStatus','getJobsIds','MaskingService','JOB_PATH','join','dataPath','message','successful','get','getJobDetails','default','slice','../../../constants/job','getLog','../../../core/errors/not-found.error','writable','search','320070JKxFOp','kill','parse'];a96_0x20b8=function(){return _0x3df572;};return a96_0x20b8();}