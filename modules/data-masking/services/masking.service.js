const a80_0x3c70a0=a80_0x15e7;(function(_0x17f940,_0x58bb31){const _0x130109=a80_0x15e7,_0x4f86b3=_0x17f940();while(!![]){try{const _0x2331de=-parseInt(_0x130109(0x15f))/0x1+parseInt(_0x130109(0x171))/0x2*(parseInt(_0x130109(0x16d))/0x3)+parseInt(_0x130109(0x186))/0x4+-parseInt(_0x130109(0x172))/0x5+parseInt(_0x130109(0x15b))/0x6+parseInt(_0x130109(0x185))/0x7+parseInt(_0x130109(0x141))/0x8*(-parseInt(_0x130109(0x14f))/0x9);if(_0x2331de===_0x58bb31)break;else _0x4f86b3['push'](_0x4f86b3['shift']());}catch(_0xbd32bd){_0x4f86b3['push'](_0x4f86b3['shift']());}}}(a80_0x4e8a,0x21d6c));const a80_0x693d82=(function(){let _0x4472ad=!![];return function(_0x1e23f4,_0xecdf62){const _0x514078=_0x4472ad?function(){const _0x575551=a80_0x15e7;if(_0xecdf62){const _0x5969ab=_0xecdf62[_0x575551(0x168)](_0x1e23f4,arguments);return _0xecdf62=null,_0x5969ab;}}:function(){};return _0x4472ad=![],_0x514078;};}()),a80_0x1a09f3=a80_0x693d82(this,function(){const _0x18e79f=a80_0x15e7;return a80_0x1a09f3[_0x18e79f(0x169)]()[_0x18e79f(0x181)](_0x18e79f(0x179))[_0x18e79f(0x169)]()[_0x18e79f(0x146)](a80_0x1a09f3)[_0x18e79f(0x181)]('(((.+)+)+)+$');});a80_0x1a09f3();'use strict';var __createBinding=this&&this[a80_0x3c70a0(0x142)]||(Object[a80_0x3c70a0(0x165)]?function(_0x5ce85b,_0x453109,_0x1a2979,_0x337b6f){const _0x42f882=a80_0x3c70a0;if(_0x337b6f===undefined)_0x337b6f=_0x1a2979;var _0x5a43ed=Object['getOwnPropertyDescriptor'](_0x453109,_0x1a2979);(!_0x5a43ed||(_0x42f882(0x175)in _0x5a43ed?!_0x453109[_0x42f882(0x173)]:_0x5a43ed[_0x42f882(0x14c)]||_0x5a43ed['configurable']))&&(_0x5a43ed={'enumerable':!![],'get':function(){return _0x453109[_0x1a2979];}}),Object[_0x42f882(0x17e)](_0x5ce85b,_0x337b6f,_0x5a43ed);}:function(_0x1b8bc6,_0x1c946f,_0x247bc1,_0x4d7b1b){if(_0x4d7b1b===undefined)_0x4d7b1b=_0x247bc1;_0x1b8bc6[_0x4d7b1b]=_0x1c946f[_0x247bc1];}),__setModuleDefault=this&&this[a80_0x3c70a0(0x164)]||(Object[a80_0x3c70a0(0x165)]?function(_0x19e6a2,_0x471e91){const _0x157d2a=a80_0x3c70a0;Object[_0x157d2a(0x17e)](_0x19e6a2,_0x157d2a(0x161),{'enumerable':!![],'value':_0x471e91});}:function(_0x25d3a4,_0x3a3b39){const _0x34e3ce=a80_0x3c70a0;_0x25d3a4[_0x34e3ce(0x161)]=_0x3a3b39;}),__importStar=this&&this[a80_0x3c70a0(0x13f)]||function(_0x29bdae){const _0x97b63e=a80_0x3c70a0;if(_0x29bdae&&_0x29bdae[_0x97b63e(0x173)])return _0x29bdae;var _0x1a3f08={};if(_0x29bdae!=null){for(var _0x2a5465 in _0x29bdae)if(_0x2a5465!=='default'&&Object[_0x97b63e(0x177)][_0x97b63e(0x157)]['call'](_0x29bdae,_0x2a5465))__createBinding(_0x1a3f08,_0x29bdae,_0x2a5465);}return __setModuleDefault(_0x1a3f08,_0x29bdae),_0x1a3f08;},__importDefault=this&&this[a80_0x3c70a0(0x148)]||function(_0x4fb699){const _0x3d5013=a80_0x3c70a0;return _0x4fb699&&_0x4fb699[_0x3d5013(0x173)]?_0x4fb699:{'default':_0x4fb699};};Object[a80_0x3c70a0(0x17e)](exports,'__esModule',{'value':!![]}),exports[a80_0x3c70a0(0x17d)]=void 0x0;const path_1=__importStar(require(a80_0x3c70a0(0x17a))),fs_utils_1=require(a80_0x3c70a0(0x17f)),promises_1=require('fs/promises'),logger_job_state_1=require(a80_0x3c70a0(0x150)),logger_enums_1=require('../job/enums/logger.enums'),sync_1=require(a80_0x3c70a0(0x16e)),utils_1=require(a80_0x3c70a0(0x163)),not_found_error_1=require(a80_0x3c70a0(0x14a)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a80_0x3c70a0(0x145))),constants_1=require(a80_0x3c70a0(0x166)),path_2=require(a80_0x3c70a0(0x140));class MaskingService{static async['createMaskingJob'](_0x2f2472){const _0x1152c8=a80_0x3c70a0,_0x1a2913=job_utils_1['default']['generateJobId'](),_0x1f5e33=(0x0,path_1[_0x1152c8(0x151)])(MaskingService['maskingFolderPath'],_0x1a2913);await(0x0,fs_utils_1[_0x1152c8(0x14b)])(_0x1f5e33),await(0x0,promises_1[_0x1152c8(0x183)])(_0x1f5e33+'/'+job_1[_0x1152c8(0x16c)],JSON[_0x1152c8(0x174)]({'details':_0x2f2472}));const _0x1f8817=await new logger_job_state_1['LoggerJobState'](_0x1f5e33,_0x1a2913)[_0x1152c8(0x176)]([]);await _0x1f8817[_0x1152c8(0x170)]();const _0x5f1e64=path_1[_0x1152c8(0x161)]['join'](__dirname,job_1[_0x1152c8(0x178)]);return job_utils_1['default']['runJob'](_0x5f1e64,{'jobStorePath':_0x1f5e33,'jobId':_0x1a2913})['catch'](_0x1f0adb=>this[_0x1152c8(0x153)](_0x1f5e33,_0x1a2913,_0x1f0adb)),{'jobId':_0x1a2913};}static async[a80_0x3c70a0(0x15d)](_0x3d9b56,_0x4bd501){const _0x110d12=a80_0x3c70a0,_0x5c532b=await job_utils_1[_0x110d12(0x161)][_0x110d12(0x159)](MaskingService[_0x110d12(0x158)]),_0x10cfbd=await job_utils_1[_0x110d12(0x161)][_0x110d12(0x152)](MaskingService['maskingFolderPath'],_0x5c532b),_0x3e8775=_0x10cfbd[_0x110d12(0x149)](_0x4bd501,_0x4bd501+_0x3d9b56),_0x538ad3=[];for(const _0x3b4aff of _0x3e8775){const _0x393ed6=await this[_0x110d12(0x156)](_0x3b4aff,![]);_0x538ad3[_0x110d12(0x16a)](_0x393ed6);}return _0x538ad3;}static async['getJobState'](_0x491220,_0x46f695){const _0x3722f5=a80_0x3c70a0,_0x23e487=await this[_0x3722f5(0x17b)](_0x491220,job_1[_0x3722f5(0x160)],constants_1[_0x3722f5(0x14e)]),_0x44ce25=JSON['parse'](_0x23e487),_0x4059dd={'id':_0x44ce25['id'],'status':_0x44ce25[_0x3722f5(0x17c)],'createdDate':_0x44ce25['createdDate'],'completedDate':_0x44ce25[_0x3722f5(0x15c)]};return _0x46f695?_0x44ce25:_0x4059dd;}static async[a80_0x3c70a0(0x182)](_0x33b865){const _0x53f6cd=a80_0x3c70a0,_0xa5063b=await this[_0x53f6cd(0x17b)](_0x33b865,job_1[_0x53f6cd(0x162)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0x53f6cd(0x13e)])(_0xa5063b,{'columns':!![]});}static async[a80_0x3c70a0(0x17b)](_0x584e8c,_0x138410,_0x251830){const _0x27bd32=a80_0x3c70a0,_0x122f28=(0x0,path_1[_0x27bd32(0x151)])(MaskingService[_0x27bd32(0x158)],_0x584e8c),_0x866aaa=(0x0,path_1[_0x27bd32(0x151)])(_0x122f28,_0x138410);if(!await utils_1['FsUtils'][_0x27bd32(0x144)](_0x122f28))throw new not_found_error_1[(_0x27bd32(0x147))](_0x27bd32(0x155));if(!await utils_1['FsUtils'][_0x27bd32(0x144)](_0x866aaa))throw new not_found_error_1[(_0x27bd32(0x147))](_0x251830+_0x27bd32(0x15e));return(0x0,promises_1[_0x27bd32(0x167)])(_0x866aaa,{'encoding':_0x27bd32(0x15a)});}static async[a80_0x3c70a0(0x153)](_0x2d70b5,_0x2bc4ef,_0x67f4b3){const _0x37f890=a80_0x3c70a0,_0x5aa29a=await new logger_job_state_1[(_0x37f890(0x16b))](_0x2d70b5,_0x2bc4ef)[_0x37f890(0x176)]([]);_0x5aa29a[_0x37f890(0x16f)](logger_enums_1[_0x37f890(0x180)][_0x37f890(0x154)]),_0x5aa29a[_0x37f890(0x14d)](_0x67f4b3[_0x37f890(0x143)]),await _0x5aa29a[_0x37f890(0x170)]();}}function a80_0x15e7(_0x33f103,_0x3689f8){const _0x1196da=a80_0x4e8a();return a80_0x15e7=function(_0x1a09f3,_0x693d82){_0x1a09f3=_0x1a09f3-0x13e;let _0x4e8a7e=_0x1196da[_0x1a09f3];return _0x4e8a7e;},a80_0x15e7(_0x33f103,_0x3689f8);}function a80_0x4e8a(){const _0x51cadd=['__createBinding','message','isExistsPath','../../shared/utils/job.utils','constructor','NotFoundError','__importDefault','slice','../../../core/errors/not-found.error','makeDir','writable','setJobError','JOB_LOG_STATE_NAME','27PlHLLN','../job/classes/logger/logger-job-state','join','sortJobsIds','logErrorStartJob','FAILED','Job\x20Id\x20not\x20found.','getJobState','hasOwnProperty','maskingFolderPath','getJobsIds','utf-8','1492224IJbVfK','completedDate','getJobs','\x20not\x20found.','221064sAcgzQ','JOB_LOG_STATE_FILENAME','default','JOB_LOG_DETAILS_FILENAME','@flosum/utils','__setModuleDefault','create','../constants','readFile','apply','toString','push','LoggerJobState','MANIFEST_FILENAME','1965rzDZBJ','csv-parse/sync','setJobStatus','kill','274eNqHmR','569025BzCFFA','__esModule','stringify','get','init','prototype','JOB_PATH','(((.+)+)+)+$','path','getLog','status','MaskingService','defineProperty','../../shared/utils/fs.utils','JobStatus','search','getJobDetails','writeFile','DATA_MASKING_FOLDER_NAME','1722441iGwoTy','650392wqamRj','parse','__importStar','../../../configs/path','729672zCClOW'];a80_0x4e8a=function(){return _0x51cadd;};return a80_0x4e8a();}exports[a80_0x3c70a0(0x17d)]=MaskingService,MaskingService[a80_0x3c70a0(0x158)]=path_1['default'][a80_0x3c70a0(0x151)](path_2['dataPath'],constants_1[a80_0x3c70a0(0x184)]);