function a81_0x34b8(_0x294662,_0x30fe83){const _0x461750=a81_0x7499();return a81_0x34b8=function(_0x5d1fd1,_0x2588db){_0x5d1fd1=_0x5d1fd1-0x9b;let _0x7499fa=_0x461750[_0x5d1fd1];return _0x7499fa;},a81_0x34b8(_0x294662,_0x30fe83);}const a81_0x552a02=a81_0x34b8;(function(_0x371ca9,_0x2f0117){const _0x5a4125=a81_0x34b8,_0x1967e6=_0x371ca9();while(!![]){try{const _0x26008c=parseInt(_0x5a4125(0xdb))/0x1*(parseInt(_0x5a4125(0xd4))/0x2)+parseInt(_0x5a4125(0xb8))/0x3*(-parseInt(_0x5a4125(0xcb))/0x4)+-parseInt(_0x5a4125(0xdc))/0x5+parseInt(_0x5a4125(0xb2))/0x6+parseInt(_0x5a4125(0x9c))/0x7*(parseInt(_0x5a4125(0xd2))/0x8)+parseInt(_0x5a4125(0xd0))/0x9+parseInt(_0x5a4125(0xaf))/0xa;if(_0x26008c===_0x2f0117)break;else _0x1967e6['push'](_0x1967e6['shift']());}catch(_0x50ddeb){_0x1967e6['push'](_0x1967e6['shift']());}}}(a81_0x7499,0x40b1e));const a81_0x2588db=(function(){let _0x2ce309=!![];return function(_0x20a8e9,_0x3c9d83){const _0x4fd308=_0x2ce309?function(){const _0x1878f4=a81_0x34b8;if(_0x3c9d83){const _0x2b2f93=_0x3c9d83[_0x1878f4(0xad)](_0x20a8e9,arguments);return _0x3c9d83=null,_0x2b2f93;}}:function(){};return _0x2ce309=![],_0x4fd308;};}()),a81_0x5d1fd1=a81_0x2588db(this,function(){const _0x4c75df=a81_0x34b8;return a81_0x5d1fd1[_0x4c75df(0xc7)]()['search']('(((.+)+)+)+$')[_0x4c75df(0xc7)]()[_0x4c75df(0xa5)](a81_0x5d1fd1)[_0x4c75df(0xcc)](_0x4c75df(0xde));});a81_0x5d1fd1();'use strict';var __createBinding=this&&this[a81_0x552a02(0xc9)]||(Object[a81_0x552a02(0xd8)]?function(_0x23744c,_0x225a8a,_0x24ef80,_0x326d42){const _0x41eba9=a81_0x552a02;if(_0x326d42===undefined)_0x326d42=_0x24ef80;var _0x5124c3=Object[_0x41eba9(0x9f)](_0x225a8a,_0x24ef80);(!_0x5124c3||('get'in _0x5124c3?!_0x225a8a[_0x41eba9(0xb3)]:_0x5124c3['writable']||_0x5124c3[_0x41eba9(0xc8)]))&&(_0x5124c3={'enumerable':!![],'get':function(){return _0x225a8a[_0x24ef80];}}),Object[_0x41eba9(0xda)](_0x23744c,_0x326d42,_0x5124c3);}:function(_0x4b8afe,_0x301d53,_0x30682e,_0x20d5c0){if(_0x20d5c0===undefined)_0x20d5c0=_0x30682e;_0x4b8afe[_0x20d5c0]=_0x301d53[_0x30682e];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a81_0x552a02(0xd8)]?function(_0x2c4ba6,_0x4cdc7a){const _0x5ed8b5=a81_0x552a02;Object['defineProperty'](_0x2c4ba6,_0x5ed8b5(0xac),{'enumerable':!![],'value':_0x4cdc7a});}:function(_0x417c12,_0x2c660b){const _0x3aa8a9=a81_0x552a02;_0x417c12[_0x3aa8a9(0xac)]=_0x2c660b;}),__importStar=this&&this[a81_0x552a02(0xd1)]||function(_0x354ca1){const _0x2c1f1f=a81_0x552a02;if(_0x354ca1&&_0x354ca1['__esModule'])return _0x354ca1;var _0x11a1ff={};if(_0x354ca1!=null){for(var _0x1f99f2 in _0x354ca1)if(_0x1f99f2!==_0x2c1f1f(0xac)&&Object[_0x2c1f1f(0xc6)][_0x2c1f1f(0xd7)][_0x2c1f1f(0xb9)](_0x354ca1,_0x1f99f2))__createBinding(_0x11a1ff,_0x354ca1,_0x1f99f2);}return __setModuleDefault(_0x11a1ff,_0x354ca1),_0x11a1ff;},__importDefault=this&&this['__importDefault']||function(_0x34031b){const _0x29e6fc=a81_0x552a02;return _0x34031b&&_0x34031b[_0x29e6fc(0xb3)]?_0x34031b:{'default':_0x34031b};};Object['defineProperty'](exports,a81_0x552a02(0xb3),{'value':!![]}),exports[a81_0x552a02(0xa0)]=void 0x0;const path_1=__importStar(require(a81_0x552a02(0xd3))),fs_utils_1=require(a81_0x552a02(0xa2)),promises_1=require('fs/promises'),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a81_0x552a02(0xc3)),sync_1=require(a81_0x552a02(0xce)),utils_1=require('@flosum/utils'),not_found_error_1=require(a81_0x552a02(0xb1)),job_1=require(a81_0x552a02(0xd6)),job_utils_1=__importDefault(require(a81_0x552a02(0xd5))),constants_1=require(a81_0x552a02(0xc0)),path_2=require(a81_0x552a02(0xbd));function a81_0x7499(){const _0x5c17bc=['JOB_LOG_STATE_NAME','getOwnPropertyDescriptor','MaskingService','LoggerJobState','../../shared/utils/fs.utils','sortJobsIds','utf-8','constructor','parse','\x20not\x20found.','kill','generateJobId','FsUtils','readFile','default','apply','message','1349480tJMqCS','dataPath','../../../core/errors/not-found.error','3084306TVrAWn','__esModule','init','join','status','catch','9kuysDB','call','getLog','completedDate','JOB_LOG_DETAILS_FILENAME','../../../configs/path','JOB_LOG_DETAILS_NAME','successful','../constants','getJobsIds','stringify','../job/enums/logger.enums','FAILED','maskingFolderPath','prototype','toString','configurable','__createBinding','JOB_LOG_STATE_FILENAME','496236WssboX','search','Job\x20Id\x20not\x20found.','csv-parse/sync','createdDate','1622529wIPWHe','__importStar','226664VOeGtD','path','472434pGUPrH','../../shared/utils/job.utils','../../../constants/job','hasOwnProperty','create','isExistsPath','defineProperty','1KvLRpm','2566645qkUkox','getJobState','(((.+)+)+)+$','createMaskingJob','21qaAsae','JobStatus'];a81_0x7499=function(){return _0x5c17bc;};return a81_0x7499();}class MaskingService{static async[a81_0x552a02(0x9b)](_0x130d14){const _0x243581=a81_0x552a02,_0x1ea766=job_utils_1['default'][_0x243581(0xa9)](),_0xeb1f03=(0x0,path_1[_0x243581(0xb5)])(MaskingService['maskingFolderPath'],_0x1ea766);await(0x0,fs_utils_1['makeDir'])(_0xeb1f03),await(0x0,promises_1['writeFile'])(_0xeb1f03+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x243581(0xc2)]({'details':_0x130d14}));const _0x28a71b=await new logger_job_state_1['LoggerJobState'](_0xeb1f03,_0x1ea766)[_0x243581(0xb4)]([]);await _0x28a71b[_0x243581(0xa8)]();const _0x2d9175=path_1[_0x243581(0xac)][_0x243581(0xb5)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x243581(0xac)]['runJob'](_0x2d9175,{'jobStorePath':_0xeb1f03,'jobId':_0x1ea766})[_0x243581(0xb7)](_0x27d2bd=>this['logErrorStartJob'](_0xeb1f03,_0x1ea766,_0x27d2bd)),{'jobId':_0x1ea766};}static async['getJobs'](_0x124532,_0x2956ba){const _0x44e293=a81_0x552a02,_0x3a2278=await job_utils_1[_0x44e293(0xac)][_0x44e293(0xc1)](MaskingService['maskingFolderPath']),_0x3c3112=await job_utils_1['default'][_0x44e293(0xa3)](MaskingService[_0x44e293(0xc5)],_0x3a2278),_0x31f880=_0x3c3112['slice'](_0x2956ba,_0x2956ba+_0x124532),_0x1ab6a8=[];for(const _0xb3571e of _0x31f880){const _0x5189ed=await this[_0x44e293(0xdd)](_0xb3571e,![]);_0x1ab6a8['push'](_0x5189ed);}return _0x1ab6a8;}static async[a81_0x552a02(0xdd)](_0x11fec6,_0x5ab1e8){const _0x2e7e49=a81_0x552a02,_0x332e6e=await this[_0x2e7e49(0xba)](_0x11fec6,job_1[_0x2e7e49(0xca)],constants_1[_0x2e7e49(0x9e)]),_0x53b86a=JSON[_0x2e7e49(0xa6)](_0x332e6e),_0x4dd055={'id':_0x53b86a['id'],'status':_0x53b86a[_0x2e7e49(0xb6)],'createdDate':_0x53b86a[_0x2e7e49(0xcf)],'completedDate':_0x53b86a[_0x2e7e49(0xbb)],'successful':_0x53b86a[_0x2e7e49(0xbf)],'failed':_0x53b86a['failed']};return _0x5ab1e8?_0x53b86a:_0x4dd055;}static async['getJobDetails'](_0x1ee118){const _0x3f671e=a81_0x552a02,_0x27cb8e=await this[_0x3f671e(0xba)](_0x1ee118,job_1[_0x3f671e(0xbc)],constants_1[_0x3f671e(0xbe)]);return(0x0,sync_1[_0x3f671e(0xa6)])(_0x27cb8e,{'columns':!![]});}static async[a81_0x552a02(0xba)](_0x44a2c1,_0x2a085d,_0x976f4f){const _0x1c1038=a81_0x552a02,_0x2179e5=(0x0,path_1[_0x1c1038(0xb5)])(MaskingService[_0x1c1038(0xc5)],_0x44a2c1),_0x5e5fb4=(0x0,path_1['join'])(_0x2179e5,_0x2a085d);if(!await utils_1[_0x1c1038(0xaa)]['isExistsPath'](_0x2179e5))throw new not_found_error_1['NotFoundError'](_0x1c1038(0xcd));if(!await utils_1[_0x1c1038(0xaa)][_0x1c1038(0xd9)](_0x5e5fb4))throw new not_found_error_1['NotFoundError'](_0x976f4f+_0x1c1038(0xa7));return(0x0,promises_1[_0x1c1038(0xab)])(_0x5e5fb4,{'encoding':_0x1c1038(0xa4)});}static async['logErrorStartJob'](_0x3a8c20,_0x2443d1,_0x1787b4){const _0x65c213=a81_0x552a02,_0x2a784b=await new logger_job_state_1[(_0x65c213(0xa1))](_0x3a8c20,_0x2443d1)[_0x65c213(0xb4)]([]);_0x2a784b['setJobStatus'](logger_enums_1[_0x65c213(0x9d)][_0x65c213(0xc4)]),_0x2a784b['setJobError'](_0x1787b4[_0x65c213(0xae)]),await _0x2a784b[_0x65c213(0xa8)]();}}exports['MaskingService']=MaskingService,MaskingService[a81_0x552a02(0xc5)]=path_1['default'][a81_0x552a02(0xb5)](path_2[a81_0x552a02(0xb0)],constants_1['DATA_MASKING_FOLDER_NAME']);