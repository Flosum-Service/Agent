const a81_0x30fca9=a81_0x5614;(function(_0x1025af,_0xaf1259){const _0x120b0e=a81_0x5614,_0x1382c8=_0x1025af();while(!![]){try{const _0x103b0c=parseInt(_0x120b0e(0x1d5))/0x1+-parseInt(_0x120b0e(0x1d2))/0x2*(parseInt(_0x120b0e(0x1fc))/0x3)+parseInt(_0x120b0e(0x209))/0x4*(parseInt(_0x120b0e(0x1d4))/0x5)+-parseInt(_0x120b0e(0x20d))/0x6*(-parseInt(_0x120b0e(0x208))/0x7)+-parseInt(_0x120b0e(0x1e1))/0x8*(-parseInt(_0x120b0e(0x1cb))/0x9)+-parseInt(_0x120b0e(0x1df))/0xa+-parseInt(_0x120b0e(0x1de))/0xb*(parseInt(_0x120b0e(0x1fd))/0xc);if(_0x103b0c===_0xaf1259)break;else _0x1382c8['push'](_0x1382c8['shift']());}catch(_0x3c4128){_0x1382c8['push'](_0x1382c8['shift']());}}}(a81_0x23a1,0x9f4ad));function a81_0x5614(_0x315e20,_0x4db31b){const _0x26f203=a81_0x23a1();return a81_0x5614=function(_0x38c511,_0x586ca7){_0x38c511=_0x38c511-0x1ca;let _0x23a1e6=_0x26f203[_0x38c511];return _0x23a1e6;},a81_0x5614(_0x315e20,_0x4db31b);}const a81_0x586ca7=(function(){let _0x189c6f=!![];return function(_0x556638,_0x5b98aa){const _0x395461=_0x189c6f?function(){if(_0x5b98aa){const _0x11dbc0=_0x5b98aa['apply'](_0x556638,arguments);return _0x5b98aa=null,_0x11dbc0;}}:function(){};return _0x189c6f=![],_0x395461;};}()),a81_0x38c511=a81_0x586ca7(this,function(){const _0x34bfbe=a81_0x5614;return a81_0x38c511[_0x34bfbe(0x206)]()[_0x34bfbe(0x20e)](_0x34bfbe(0x1ea))[_0x34bfbe(0x206)]()[_0x34bfbe(0x1e5)](a81_0x38c511)[_0x34bfbe(0x20e)](_0x34bfbe(0x1ea));});a81_0x38c511();'use strict';function a81_0x23a1(){const _0x16845e=['maskingFolderPath','LoggerJobState','isExistsPath','FsUtils','JOB_LOG_DETAILS_FILENAME','\x20not\x20found.','configurable','getJobs','JOB_PATH','4863stOymP','24VuNWVI','call','parse','stringify','__importStar','prototype','dataPath','default','join','toString','generateJobId','203nagiKA','977128Bctswc','MaskingService','sortJobsIds','get','54hFwDps','search','push','@flosum/utils','JOB_LOG_STATE_FILENAME','failed','defineProperty','createdDate','../../../configs/path','getJobState','readFile','8520867cRogrE','fs/promises','../job/enums/logger.enums','../../../core/errors/not-found.error','../job/classes/logger/logger-job-state','setJobStatus','path','470DHzuyc','__createBinding','15xByWMd','913475hqdsTU','../../shared/utils/job.utils','runJob','kill','MANIFEST_FILENAME','makeDir','init','getJobDetails','slice','7980313rEUTUg','1089830FWyRLN','setJobError','8oMZjih','successful','completedDate','getJobsIds','constructor','JobStatus','DATA_MASKING_FOLDER_NAME','NotFoundError','__esModule','(((.+)+)+)+$','getLog','createMaskingJob','logErrorStartJob','JOB_LOG_STATE_NAME','JOB_LOG_DETAILS_NAME','catch','writable','create'];a81_0x23a1=function(){return _0x16845e;};return a81_0x23a1();}var __createBinding=this&&this[a81_0x30fca9(0x1d3)]||(Object[a81_0x30fca9(0x1f2)]?function(_0x5a3506,_0x57ccb7,_0x40825f,_0x4ec47e){const _0x54a9b1=a81_0x30fca9;if(_0x4ec47e===undefined)_0x4ec47e=_0x40825f;var _0xacba79=Object['getOwnPropertyDescriptor'](_0x57ccb7,_0x40825f);(!_0xacba79||(_0x54a9b1(0x20c)in _0xacba79?!_0x57ccb7[_0x54a9b1(0x1e9)]:_0xacba79[_0x54a9b1(0x1f1)]||_0xacba79[_0x54a9b1(0x1f9)]))&&(_0xacba79={'enumerable':!![],'get':function(){return _0x57ccb7[_0x40825f];}}),Object[_0x54a9b1(0x213)](_0x5a3506,_0x4ec47e,_0xacba79);}:function(_0x5337fb,_0x5a2391,_0x1cce69,_0x3366b7){if(_0x3366b7===undefined)_0x3366b7=_0x1cce69;_0x5337fb[_0x3366b7]=_0x5a2391[_0x1cce69];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a81_0x30fca9(0x1f2)]?function(_0x419e5c,_0x375151){const _0x38097b=a81_0x30fca9;Object[_0x38097b(0x213)](_0x419e5c,_0x38097b(0x204),{'enumerable':!![],'value':_0x375151});}:function(_0x4b9cbe,_0x4ac000){const _0x5d851c=a81_0x30fca9;_0x4b9cbe[_0x5d851c(0x204)]=_0x4ac000;}),__importStar=this&&this[a81_0x30fca9(0x201)]||function(_0x234dd2){const _0x24258b=a81_0x30fca9;if(_0x234dd2&&_0x234dd2[_0x24258b(0x1e9)])return _0x234dd2;var _0x57274c={};if(_0x234dd2!=null){for(var _0x57dd48 in _0x234dd2)if(_0x57dd48!==_0x24258b(0x204)&&Object[_0x24258b(0x202)]['hasOwnProperty'][_0x24258b(0x1fe)](_0x234dd2,_0x57dd48))__createBinding(_0x57274c,_0x234dd2,_0x57dd48);}return __setModuleDefault(_0x57274c,_0x234dd2),_0x57274c;},__importDefault=this&&this['__importDefault']||function(_0x521e10){const _0x4d626e=a81_0x30fca9;return _0x521e10&&_0x521e10[_0x4d626e(0x1e9)]?_0x521e10:{'default':_0x521e10};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a81_0x30fca9(0x20a)]=void 0x0;const path_1=__importStar(require(a81_0x30fca9(0x1d1))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a81_0x30fca9(0x1cc)),logger_job_state_1=require(a81_0x30fca9(0x1cf)),logger_enums_1=require(a81_0x30fca9(0x1cd)),sync_1=require('csv-parse/sync'),utils_1=require(a81_0x30fca9(0x210)),not_found_error_1=require(a81_0x30fca9(0x1ce)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a81_0x30fca9(0x1d6))),constants_1=require('../constants'),path_2=require(a81_0x30fca9(0x215));class MaskingService{static async[a81_0x30fca9(0x1ec)](_0x4a2d20){const _0x28a5d7=a81_0x30fca9,_0x165acb=job_utils_1['default'][_0x28a5d7(0x207)](),_0x5db9cf=(0x0,path_1[_0x28a5d7(0x205)])(MaskingService[_0x28a5d7(0x1f3)],_0x165acb);await(0x0,fs_utils_1[_0x28a5d7(0x1da)])(_0x5db9cf),await(0x0,promises_1['writeFile'])(_0x5db9cf+'/'+job_1[_0x28a5d7(0x1d9)],JSON[_0x28a5d7(0x200)]({'details':_0x4a2d20}));const _0x3ec2f0=await new logger_job_state_1[(_0x28a5d7(0x1f4))](_0x5db9cf,_0x165acb)[_0x28a5d7(0x1db)]([]);await _0x3ec2f0['kill']();const _0x40f682=path_1['default'][_0x28a5d7(0x205)](__dirname,job_1[_0x28a5d7(0x1fb)]);return job_utils_1[_0x28a5d7(0x204)][_0x28a5d7(0x1d7)](_0x40f682,{'jobStorePath':_0x5db9cf,'jobId':_0x165acb})[_0x28a5d7(0x1f0)](_0x51e5c0=>this[_0x28a5d7(0x1ed)](_0x5db9cf,_0x165acb,_0x51e5c0)),{'jobId':_0x165acb};}static async[a81_0x30fca9(0x1fa)](_0x498c41,_0x272dda){const _0x42d972=a81_0x30fca9,_0x4e4048=await job_utils_1[_0x42d972(0x204)][_0x42d972(0x1e4)](MaskingService[_0x42d972(0x1f3)]),_0x4ecccd=await job_utils_1['default'][_0x42d972(0x20b)](MaskingService[_0x42d972(0x1f3)],_0x4e4048),_0x437219=_0x4ecccd[_0x42d972(0x1dd)](_0x272dda,_0x272dda+_0x498c41),_0x28f943=[];for(const _0x1fcdc8 of _0x437219){const _0x1debc8=await this[_0x42d972(0x216)](_0x1fcdc8,![]);_0x28f943[_0x42d972(0x20f)](_0x1debc8);}return _0x28f943;}static async[a81_0x30fca9(0x216)](_0x1e0548,_0x5577f9){const _0x2fd558=a81_0x30fca9,_0x1c983d=await this[_0x2fd558(0x1eb)](_0x1e0548,job_1[_0x2fd558(0x211)],constants_1[_0x2fd558(0x1ee)]),_0x9d9eab=JSON[_0x2fd558(0x1ff)](_0x1c983d),_0x14150e={'id':_0x9d9eab['id'],'status':_0x9d9eab['status'],'createdDate':_0x9d9eab[_0x2fd558(0x214)],'completedDate':_0x9d9eab[_0x2fd558(0x1e3)],'successful':_0x9d9eab[_0x2fd558(0x1e2)],'failed':_0x9d9eab[_0x2fd558(0x212)]};return _0x5577f9?_0x9d9eab:_0x14150e;}static async[a81_0x30fca9(0x1dc)](_0x275948){const _0x562605=a81_0x30fca9,_0x27c269=await this[_0x562605(0x1eb)](_0x275948,job_1[_0x562605(0x1f7)],constants_1[_0x562605(0x1ef)]);return(0x0,sync_1[_0x562605(0x1ff)])(_0x27c269,{'columns':!![]});}static async['getLog'](_0x53eeb9,_0x94f28,_0x5afcdd){const _0x48c535=a81_0x30fca9,_0x357345=(0x0,path_1['join'])(MaskingService[_0x48c535(0x1f3)],_0x53eeb9),_0xe74ef1=(0x0,path_1[_0x48c535(0x205)])(_0x357345,_0x94f28);if(!await utils_1[_0x48c535(0x1f6)][_0x48c535(0x1f5)](_0x357345))throw new not_found_error_1[(_0x48c535(0x1e8))]('Job\x20Id\x20not\x20found.');if(!await utils_1[_0x48c535(0x1f6)]['isExistsPath'](_0xe74ef1))throw new not_found_error_1[(_0x48c535(0x1e8))](_0x5afcdd+_0x48c535(0x1f8));return(0x0,promises_1[_0x48c535(0x1ca)])(_0xe74ef1,{'encoding':'utf-8'});}static async[a81_0x30fca9(0x1ed)](_0x1ca358,_0x4270b8,_0x25cddb){const _0x4e9693=a81_0x30fca9,_0x25d14e=await new logger_job_state_1['LoggerJobState'](_0x1ca358,_0x4270b8)[_0x4e9693(0x1db)]([]);_0x25d14e[_0x4e9693(0x1d0)](logger_enums_1[_0x4e9693(0x1e6)]['FAILED']),_0x25d14e[_0x4e9693(0x1e0)](_0x25cddb['message']),await _0x25d14e[_0x4e9693(0x1d8)]();}}exports[a81_0x30fca9(0x20a)]=MaskingService,MaskingService[a81_0x30fca9(0x1f3)]=path_1[a81_0x30fca9(0x204)]['join'](path_2[a81_0x30fca9(0x203)],constants_1[a81_0x30fca9(0x1e7)]);