const a81_0x53d309=a81_0x5452;(function(_0x1a2ea7,_0x52bc06){const _0x476339=a81_0x5452,_0x143ce2=_0x1a2ea7();while(!![]){try{const _0x3746ff=-parseInt(_0x476339(0x21f))/0x1*(-parseInt(_0x476339(0x20b))/0x2)+-parseInt(_0x476339(0x1fa))/0x3*(-parseInt(_0x476339(0x201))/0x4)+-parseInt(_0x476339(0x211))/0x5*(-parseInt(_0x476339(0x21c))/0x6)+-parseInt(_0x476339(0x1de))/0x7+parseInt(_0x476339(0x212))/0x8*(-parseInt(_0x476339(0x1f4))/0x9)+parseInt(_0x476339(0x1e8))/0xa+parseInt(_0x476339(0x220))/0xb*(-parseInt(_0x476339(0x1e6))/0xc);if(_0x3746ff===_0x52bc06)break;else _0x143ce2['push'](_0x143ce2['shift']());}catch(_0x2112a2){_0x143ce2['push'](_0x143ce2['shift']());}}}(a81_0x177e,0xc8a1c));const a81_0x5c2f27=(function(){let _0x3e65e6=!![];return function(_0xda6673,_0x114f64){const _0x3fd778=_0x3e65e6?function(){if(_0x114f64){const _0x358f66=_0x114f64['apply'](_0xda6673,arguments);return _0x114f64=null,_0x358f66;}}:function(){};return _0x3e65e6=![],_0x3fd778;};}()),a81_0x30fdca=a81_0x5c2f27(this,function(){const _0x6c4a64=a81_0x5452;return a81_0x30fdca[_0x6c4a64(0x20e)]()[_0x6c4a64(0x223)](_0x6c4a64(0x1f9))['toString']()[_0x6c4a64(0x20c)](a81_0x30fdca)[_0x6c4a64(0x223)](_0x6c4a64(0x1f9));});function a81_0x5452(_0x3967ff,_0x4bff0e){const _0x21a267=a81_0x177e();return a81_0x5452=function(_0x30fdca,_0x5c2f27){_0x30fdca=_0x30fdca-0x1dd;let _0x177e50=_0x21a267[_0x30fdca];return _0x177e50;},a81_0x5452(_0x3967ff,_0x4bff0e);}a81_0x30fdca();'use strict';var __createBinding=this&&this[a81_0x53d309(0x1ed)]||(Object[a81_0x53d309(0x1e9)]?function(_0x388e3a,_0x1ad8b5,_0x15416f,_0x379c39){const _0x249a6e=a81_0x53d309;if(_0x379c39===undefined)_0x379c39=_0x15416f;var _0x5d4068=Object[_0x249a6e(0x204)](_0x1ad8b5,_0x15416f);(!_0x5d4068||('get'in _0x5d4068?!_0x1ad8b5[_0x249a6e(0x1fe)]:_0x5d4068[_0x249a6e(0x20f)]||_0x5d4068[_0x249a6e(0x210)]))&&(_0x5d4068={'enumerable':!![],'get':function(){return _0x1ad8b5[_0x15416f];}}),Object[_0x249a6e(0x20d)](_0x388e3a,_0x379c39,_0x5d4068);}:function(_0x37bce5,_0x24a45c,_0x1d92d6,_0x1a13d1){if(_0x1a13d1===undefined)_0x1a13d1=_0x1d92d6;_0x37bce5[_0x1a13d1]=_0x24a45c[_0x1d92d6];}),__setModuleDefault=this&&this[a81_0x53d309(0x1fd)]||(Object[a81_0x53d309(0x1e9)]?function(_0x3d562b,_0x3d0dd6){const _0x1b72e9=a81_0x53d309;Object[_0x1b72e9(0x20d)](_0x3d562b,'default',{'enumerable':!![],'value':_0x3d0dd6});}:function(_0x2c4165,_0x96e8d2){_0x2c4165['default']=_0x96e8d2;}),__importStar=this&&this['__importStar']||function(_0x335b3b){const _0x25094b=a81_0x53d309;if(_0x335b3b&&_0x335b3b['__esModule'])return _0x335b3b;var _0x2184b4={};if(_0x335b3b!=null){for(var _0x36add8 in _0x335b3b)if(_0x36add8!==_0x25094b(0x1e5)&&Object['prototype'][_0x25094b(0x1ee)][_0x25094b(0x214)](_0x335b3b,_0x36add8))__createBinding(_0x2184b4,_0x335b3b,_0x36add8);}return __setModuleDefault(_0x2184b4,_0x335b3b),_0x2184b4;},__importDefault=this&&this[a81_0x53d309(0x21d)]||function(_0x4d3917){return _0x4d3917&&_0x4d3917['__esModule']?_0x4d3917:{'default':_0x4d3917};};Object[a81_0x53d309(0x20d)](exports,a81_0x53d309(0x1fe),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a81_0x53d309(0x1e4))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a81_0x53d309(0x1ff)),logger_job_state_1=require(a81_0x53d309(0x1ea)),logger_enums_1=require(a81_0x53d309(0x1fc)),sync_1=require('csv-parse/sync'),utils_1=require(a81_0x53d309(0x21a)),not_found_error_1=require(a81_0x53d309(0x21b)),job_1=require(a81_0x53d309(0x225)),job_utils_1=__importDefault(require(a81_0x53d309(0x1eb))),constants_1=require(a81_0x53d309(0x205)),path_2=require(a81_0x53d309(0x1e1));class MaskingService{static async['createMaskingJob'](_0x59b5c9){const _0x4815ee=a81_0x53d309,_0x4e975a=job_utils_1[_0x4815ee(0x1e5)][_0x4815ee(0x219)](),_0x5f0517=(0x0,path_1[_0x4815ee(0x1dd)])(MaskingService[_0x4815ee(0x207)],_0x4e975a);await(0x0,fs_utils_1[_0x4815ee(0x1f3)])(_0x5f0517),await(0x0,promises_1[_0x4815ee(0x1f2)])(_0x5f0517+'/'+job_1[_0x4815ee(0x1f7)],JSON['stringify']({'details':_0x59b5c9}));const _0x12db58=await new logger_job_state_1['LoggerJobState'](_0x5f0517,_0x4e975a)[_0x4815ee(0x1f0)]([]);await _0x12db58[_0x4815ee(0x20a)]();const _0x23c3d7=path_1[_0x4815ee(0x1e5)][_0x4815ee(0x1dd)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x4815ee(0x1e5)][_0x4815ee(0x1e2)](_0x23c3d7,{'jobStorePath':_0x5f0517,'jobId':_0x4e975a})[_0x4815ee(0x216)](_0x59d32f=>this['logErrorStartJob'](_0x5f0517,_0x4e975a,_0x59d32f)),{'jobId':_0x4e975a};}static async[a81_0x53d309(0x217)](_0xdf4973,_0x4640a3){const _0x41ad21=a81_0x53d309,_0x2c12b9=await job_utils_1['default']['getJobsIds'](MaskingService[_0x41ad21(0x207)]),_0x4a5745=await job_utils_1[_0x41ad21(0x1e5)]['sortJobsIds'](MaskingService[_0x41ad21(0x207)],_0x2c12b9),_0x5e3618=_0x4a5745[_0x41ad21(0x200)](_0x4640a3,_0x4640a3+_0xdf4973),_0x118806=[];for(const _0x5d312d of _0x5e3618){const _0x14aae0=await this[_0x41ad21(0x1f1)](_0x5d312d,![]);_0x118806['push'](_0x14aae0);}return _0x118806;}static async[a81_0x53d309(0x1f1)](_0x3966c0,_0x4de9bd){const _0x2e6558=a81_0x53d309,_0x2de365=await this[_0x2e6558(0x1ef)](_0x3966c0,job_1[_0x2e6558(0x215)],constants_1[_0x2e6558(0x203)]),_0x4b7dcd=JSON['parse'](_0x2de365),_0x3282f6={'id':_0x4b7dcd['id'],'status':_0x4b7dcd[_0x2e6558(0x209)],'createdDate':_0x4b7dcd['createdDate'],'completedDate':_0x4b7dcd[_0x2e6558(0x1f8)],'successful':_0x4b7dcd[_0x2e6558(0x1df)],'failed':_0x4b7dcd[_0x2e6558(0x218)]};return _0x4de9bd?_0x4b7dcd:_0x3282f6;}static async['getJobDetails'](_0x3684a3){const _0x2a1323=a81_0x53d309,_0x886b2=await this['getLog'](_0x3684a3,job_1[_0x2a1323(0x21e)],constants_1[_0x2a1323(0x224)]);return(0x0,sync_1[_0x2a1323(0x1fb)])(_0x886b2,{'columns':!![]});}static async[a81_0x53d309(0x1ef)](_0xfa54c1,_0x26df90,_0x3e0a7b){const _0x82bd6d=a81_0x53d309,_0x3ec674=(0x0,path_1['join'])(MaskingService[_0x82bd6d(0x207)],_0xfa54c1),_0x25e488=(0x0,path_1['join'])(_0x3ec674,_0x26df90);if(!await utils_1[_0x82bd6d(0x226)]['isExistsPath'](_0x3ec674))throw new not_found_error_1[(_0x82bd6d(0x1ec))](_0x82bd6d(0x221));if(!await utils_1[_0x82bd6d(0x226)]['isExistsPath'](_0x25e488))throw new not_found_error_1[(_0x82bd6d(0x1ec))](_0x3e0a7b+_0x82bd6d(0x1e7));return(0x0,promises_1['readFile'])(_0x25e488,{'encoding':_0x82bd6d(0x1e0)});}static async[a81_0x53d309(0x206)](_0x27b007,_0xd0c241,_0x14dc6c){const _0x276219=a81_0x53d309,_0x408068=await new logger_job_state_1[(_0x276219(0x213))](_0x27b007,_0xd0c241)[_0x276219(0x1f0)]([]);_0x408068[_0x276219(0x208)](logger_enums_1[_0x276219(0x202)]['FAILED']),_0x408068['setJobError'](_0x14dc6c[_0x276219(0x1f5)]),await _0x408068[_0x276219(0x20a)]();}}function a81_0x177e(){const _0x5b4fef=['1435113EguSZE','parse','../job/enums/logger.enums','__setModuleDefault','__esModule','fs/promises','slice','12eHdPCq','JobStatus','JOB_LOG_STATE_NAME','getOwnPropertyDescriptor','../constants','logErrorStartJob','maskingFolderPath','setJobStatus','status','kill','2770OIHMEJ','constructor','defineProperty','toString','writable','configurable','1889845iYQTxp','8voQkbr','LoggerJobState','call','JOB_LOG_STATE_FILENAME','catch','getJobs','failed','generateJobId','@flosum/utils','../../../core/errors/not-found.error','6ZQapbc','__importDefault','JOB_LOG_DETAILS_FILENAME','97PQvJbN','429cvfssr','Job\x20Id\x20not\x20found.','MaskingService','search','JOB_LOG_DETAILS_NAME','../../../constants/job','FsUtils','join','1671992PupgOE','successful','utf-8','../../../configs/path','runJob','dataPath','path','default','580080tVVwVP','\x20not\x20found.','14521950vskNJM','create','../job/classes/logger/logger-job-state','../../shared/utils/job.utils','NotFoundError','__createBinding','hasOwnProperty','getLog','init','getJobState','writeFile','makeDir','4083462ObOAtM','message','DATA_MASKING_FOLDER_NAME','MANIFEST_FILENAME','completedDate','(((.+)+)+)+$'];a81_0x177e=function(){return _0x5b4fef;};return a81_0x177e();}exports[a81_0x53d309(0x222)]=MaskingService,MaskingService['maskingFolderPath']=path_1['default'][a81_0x53d309(0x1dd)](path_2[a81_0x53d309(0x1e3)],constants_1[a81_0x53d309(0x1f6)]);