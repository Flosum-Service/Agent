const a98_0x391d29=a98_0x75df;function a98_0x2847(){const _0x2db12e=['MANIFEST_FILENAME','completedDate','../job/enums/logger.enums','path','JOB_LOG_DETAILS_NAME','../../../configs/path','JOB_LOG_DETAILS_FILENAME','(((.+)+)+)+$','FsUtils','3385368CYMWTP','configurable','__importStar','getLog','parse','call','init','slice','160670euDEvN','NotFoundError','FAILED','32421sOHwZR','2101925TYUUBG','../../../core/errors/not-found.error','getJobsIds','defineProperty','default','join','LoggerJobState','writable','readFile','getJobState','DATA_MASKING_FOLDER_NAME','1217656czYuQu','../job/classes/logger/logger-job-state','status','create','fs/promises','csv-parse/sync','hasOwnProperty','../../shared/utils/fs.utils','maskingFolderPath','JOB_PATH','setJobError','getOwnPropertyDescriptor','MaskingService','118UFlnwQ','writeFile','getJobDetails','1494076mUASvo','5mIbKtR','kill','getJobs','stringify','__esModule','279492laRGoA','makeDir','catch','toString','logErrorStartJob','JOB_LOG_STATE_NAME','generateJobId','isExistsPath','\x20not\x20found.','__setModuleDefault','search','setJobStatus','@flosum/utils','createdDate','../../shared/utils/job.utils'];a98_0x2847=function(){return _0x2db12e;};return a98_0x2847();}(function(_0x243a61,_0xeefde7){const _0x59709e=a98_0x75df,_0x1ff0c3=_0x243a61();while(!![]){try{const _0xed7326=-parseInt(_0x59709e(0x1d1))/0x1+parseInt(_0x59709e(0x1ed))/0x2*(parseInt(_0x59709e(0x1d4))/0x3)+parseInt(_0x59709e(0x1f0))/0x4*(parseInt(_0x59709e(0x1f1))/0x5)+parseInt(_0x59709e(0x1f6))/0x6+-parseInt(_0x59709e(0x1d5))/0x7+parseInt(_0x59709e(0x1e0))/0x8+-parseInt(_0x59709e(0x1c9))/0x9;if(_0xed7326===_0xeefde7)break;else _0x1ff0c3['push'](_0x1ff0c3['shift']());}catch(_0x245f65){_0x1ff0c3['push'](_0x1ff0c3['shift']());}}}(a98_0x2847,0x5b058));const a98_0x42ddcd=(function(){let _0xd8ea2=!![];return function(_0xa3f004,_0x3cbf20){const _0x4e0e0b=_0xd8ea2?function(){if(_0x3cbf20){const _0x408a1b=_0x3cbf20['apply'](_0xa3f004,arguments);return _0x3cbf20=null,_0x408a1b;}}:function(){};return _0xd8ea2=![],_0x4e0e0b;};}()),a98_0x1ef85c=a98_0x42ddcd(this,function(){const _0x4f619a=a98_0x75df;return a98_0x1ef85c[_0x4f619a(0x1f9)]()[_0x4f619a(0x200)](_0x4f619a(0x1c7))['toString']()['constructor'](a98_0x1ef85c)[_0x4f619a(0x200)]('(((.+)+)+)+$');});a98_0x1ef85c();'use strict';function a98_0x75df(_0xbca6e4,_0x45a32b){const _0x49cf66=a98_0x2847();return a98_0x75df=function(_0x1ef85c,_0x42ddcd){_0x1ef85c=_0x1ef85c-0x1c7;let _0x2847a4=_0x49cf66[_0x1ef85c];return _0x2847a4;},a98_0x75df(_0xbca6e4,_0x45a32b);}var __createBinding=this&&this['__createBinding']||(Object[a98_0x391d29(0x1e3)]?function(_0x14eff8,_0x21a43c,_0x44f943,_0x18f279){const _0x377eb3=a98_0x391d29;if(_0x18f279===undefined)_0x18f279=_0x44f943;var _0x5c1fa3=Object[_0x377eb3(0x1eb)](_0x21a43c,_0x44f943);(!_0x5c1fa3||('get'in _0x5c1fa3?!_0x21a43c[_0x377eb3(0x1f5)]:_0x5c1fa3[_0x377eb3(0x1dc)]||_0x5c1fa3[_0x377eb3(0x1ca)]))&&(_0x5c1fa3={'enumerable':!![],'get':function(){return _0x21a43c[_0x44f943];}}),Object[_0x377eb3(0x1d8)](_0x14eff8,_0x18f279,_0x5c1fa3);}:function(_0x320dc6,_0x78ebc4,_0x55526f,_0x41a349){if(_0x41a349===undefined)_0x41a349=_0x55526f;_0x320dc6[_0x41a349]=_0x78ebc4[_0x55526f];}),__setModuleDefault=this&&this[a98_0x391d29(0x1ff)]||(Object[a98_0x391d29(0x1e3)]?function(_0x51d6c6,_0x33d182){const _0x4742f9=a98_0x391d29;Object[_0x4742f9(0x1d8)](_0x51d6c6,'default',{'enumerable':!![],'value':_0x33d182});}:function(_0x1db6c1,_0x594410){const _0x2862f1=a98_0x391d29;_0x1db6c1[_0x2862f1(0x1d9)]=_0x594410;}),__importStar=this&&this[a98_0x391d29(0x1cb)]||function(_0x3db5db){const _0x1cda43=a98_0x391d29;if(_0x3db5db&&_0x3db5db[_0x1cda43(0x1f5)])return _0x3db5db;var _0x3782c4={};if(_0x3db5db!=null){for(var _0x59eb67 in _0x3db5db)if(_0x59eb67!==_0x1cda43(0x1d9)&&Object['prototype'][_0x1cda43(0x1e6)][_0x1cda43(0x1ce)](_0x3db5db,_0x59eb67))__createBinding(_0x3782c4,_0x3db5db,_0x59eb67);}return __setModuleDefault(_0x3782c4,_0x3db5db),_0x3782c4;},__importDefault=this&&this['__importDefault']||function(_0x527b9e){return _0x527b9e&&_0x527b9e['__esModule']?_0x527b9e:{'default':_0x527b9e};};Object['defineProperty'](exports,a98_0x391d29(0x1f5),{'value':!![]}),exports[a98_0x391d29(0x1ec)]=void 0x0;const path_1=__importStar(require(a98_0x391d29(0x208))),fs_utils_1=require(a98_0x391d29(0x1e7)),promises_1=require(a98_0x391d29(0x1e4)),logger_job_state_1=require(a98_0x391d29(0x1e1)),logger_enums_1=require(a98_0x391d29(0x207)),sync_1=require(a98_0x391d29(0x1e5)),utils_1=require(a98_0x391d29(0x202)),not_found_error_1=require(a98_0x391d29(0x1d6)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a98_0x391d29(0x204))),constants_1=require('../constants'),path_2=require(a98_0x391d29(0x20a));class MaskingService{static async['createMaskingJob'](_0x40b161){const _0x56c405=a98_0x391d29,_0x3ac343=job_utils_1[_0x56c405(0x1d9)][_0x56c405(0x1fc)](),_0x35f954=(0x0,path_1[_0x56c405(0x1da)])(MaskingService[_0x56c405(0x1e8)],_0x3ac343);await(0x0,fs_utils_1[_0x56c405(0x1f7)])(_0x35f954),await(0x0,promises_1[_0x56c405(0x1ee)])(_0x35f954+'/'+job_1[_0x56c405(0x205)],JSON[_0x56c405(0x1f4)]({'details':_0x40b161}));const _0x13a815=await new logger_job_state_1[(_0x56c405(0x1db))](_0x35f954,_0x3ac343)['init']([]);await _0x13a815[_0x56c405(0x1f2)]();const _0x56b08a=path_1[_0x56c405(0x1d9)][_0x56c405(0x1da)](__dirname,job_1[_0x56c405(0x1e9)]);return job_utils_1[_0x56c405(0x1d9)]['runJob'](_0x56b08a,{'jobStorePath':_0x35f954,'jobId':_0x3ac343})[_0x56c405(0x1f8)](_0x2eceea=>this[_0x56c405(0x1fa)](_0x35f954,_0x3ac343,_0x2eceea)),{'jobId':_0x3ac343};}static async[a98_0x391d29(0x1f3)](_0x271a94,_0x16c77c){const _0x55ca2f=a98_0x391d29,_0xd368de=await job_utils_1[_0x55ca2f(0x1d9)][_0x55ca2f(0x1d7)](MaskingService['maskingFolderPath']),_0x3b98fe=await job_utils_1[_0x55ca2f(0x1d9)]['sortJobsIds'](MaskingService[_0x55ca2f(0x1e8)],_0xd368de),_0x4aa85e=_0x3b98fe[_0x55ca2f(0x1d0)](_0x16c77c,_0x16c77c+_0x271a94),_0x25b584=[];for(const _0x2ede04 of _0x4aa85e){const _0x1dc6a6=await this['getJobState'](_0x2ede04,![]);_0x25b584['push'](_0x1dc6a6);}return _0x25b584;}static async[a98_0x391d29(0x1de)](_0x1f272e,_0x546eba){const _0x161749=a98_0x391d29,_0x2ecd43=await this['getLog'](_0x1f272e,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x161749(0x1fb)]),_0x18adbf=JSON[_0x161749(0x1cd)](_0x2ecd43),_0x5c045e={'id':_0x18adbf['id'],'status':_0x18adbf[_0x161749(0x1e2)],'createdDate':_0x18adbf[_0x161749(0x203)],'completedDate':_0x18adbf[_0x161749(0x206)],'successful':_0x18adbf['successful'],'failed':_0x18adbf['failed']};return _0x546eba?_0x18adbf:_0x5c045e;}static async[a98_0x391d29(0x1ef)](_0xbe25c8){const _0x4b721b=a98_0x391d29,_0x5a30f3=await this[_0x4b721b(0x1cc)](_0xbe25c8,job_1[_0x4b721b(0x20b)],constants_1[_0x4b721b(0x209)]);return(0x0,sync_1[_0x4b721b(0x1cd)])(_0x5a30f3,{'columns':!![]});}static async[a98_0x391d29(0x1cc)](_0x44496f,_0x4eab6a,_0x5afde3){const _0x26ae59=a98_0x391d29,_0x3c10fc=(0x0,path_1[_0x26ae59(0x1da)])(MaskingService[_0x26ae59(0x1e8)],_0x44496f),_0x59eadb=(0x0,path_1[_0x26ae59(0x1da)])(_0x3c10fc,_0x4eab6a);if(!await utils_1[_0x26ae59(0x1c8)]['isExistsPath'](_0x3c10fc))throw new not_found_error_1[(_0x26ae59(0x1d2))]('Job\x20Id\x20not\x20found.');if(!await utils_1['FsUtils'][_0x26ae59(0x1fd)](_0x59eadb))throw new not_found_error_1[(_0x26ae59(0x1d2))](_0x5afde3+_0x26ae59(0x1fe));return(0x0,promises_1[_0x26ae59(0x1dd)])(_0x59eadb,{'encoding':'utf-8'});}static async[a98_0x391d29(0x1fa)](_0x118b03,_0xbd3e6b,_0x433ece){const _0x2899ab=a98_0x391d29,_0x35e65e=await new logger_job_state_1[(_0x2899ab(0x1db))](_0x118b03,_0xbd3e6b)[_0x2899ab(0x1cf)]([]);_0x35e65e[_0x2899ab(0x201)](logger_enums_1['JobStatus'][_0x2899ab(0x1d3)]),_0x35e65e[_0x2899ab(0x1ea)](_0x433ece['message']),await _0x35e65e[_0x2899ab(0x1f2)]();}}exports[a98_0x391d29(0x1ec)]=MaskingService,MaskingService[a98_0x391d29(0x1e8)]=path_1[a98_0x391d29(0x1d9)]['join'](path_2['dataPath'],constants_1[a98_0x391d29(0x1df)]);