const a81_0x53d3d5=a81_0x4a13;(function(_0x33ec3a,_0x2b0894){const _0x1cc080=a81_0x4a13,_0x5e7c34=_0x33ec3a();while(!![]){try{const _0x430442=parseInt(_0x1cc080(0x1fb))/0x1*(-parseInt(_0x1cc080(0x1f1))/0x2)+-parseInt(_0x1cc080(0x201))/0x3+-parseInt(_0x1cc080(0x20b))/0x4+parseInt(_0x1cc080(0x20f))/0x5*(parseInt(_0x1cc080(0x1e4))/0x6)+-parseInt(_0x1cc080(0x218))/0x7+parseInt(_0x1cc080(0x1e7))/0x8+parseInt(_0x1cc080(0x223))/0x9;if(_0x430442===_0x2b0894)break;else _0x5e7c34['push'](_0x5e7c34['shift']());}catch(_0x2a6461){_0x5e7c34['push'](_0x5e7c34['shift']());}}}(a81_0x4222,0xdcc37));const a81_0x3c7aa6=(function(){let _0x274d55=!![];return function(_0x335233,_0x270e97){const _0x4af624=_0x274d55?function(){const _0x42e294=a81_0x4a13;if(_0x270e97){const _0x561960=_0x270e97[_0x42e294(0x1ed)](_0x335233,arguments);return _0x270e97=null,_0x561960;}}:function(){};return _0x274d55=![],_0x4af624;};}()),a81_0x4542a9=a81_0x3c7aa6(this,function(){const _0x388689=a81_0x4a13;return a81_0x4542a9[_0x388689(0x21b)]()[_0x388689(0x205)](_0x388689(0x220))[_0x388689(0x21b)]()[_0x388689(0x209)](a81_0x4542a9)['search'](_0x388689(0x220));});a81_0x4542a9();'use strict';function a81_0x4a13(_0x70da5,_0x2c0d24){const _0x2d854c=a81_0x4222();return a81_0x4a13=function(_0x4542a9,_0x3c7aa6){_0x4542a9=_0x4542a9-0x1e3;let _0x4222cc=_0x2d854c[_0x4542a9];return _0x4222cc;},a81_0x4a13(_0x70da5,_0x2c0d24);}var __createBinding=this&&this[a81_0x53d3d5(0x1e3)]||(Object[a81_0x53d3d5(0x215)]?function(_0x11e8a4,_0x341d98,_0x402014,_0x5aa16a){const _0x4c96dd=a81_0x53d3d5;if(_0x5aa16a===undefined)_0x5aa16a=_0x402014;var _0x51c405=Object['getOwnPropertyDescriptor'](_0x341d98,_0x402014);(!_0x51c405||(_0x4c96dd(0x228)in _0x51c405?!_0x341d98[_0x4c96dd(0x200)]:_0x51c405[_0x4c96dd(0x1ea)]||_0x51c405[_0x4c96dd(0x20a)]))&&(_0x51c405={'enumerable':!![],'get':function(){return _0x341d98[_0x402014];}}),Object[_0x4c96dd(0x1f2)](_0x11e8a4,_0x5aa16a,_0x51c405);}:function(_0x32ac8c,_0x127e76,_0x54d607,_0xc43e12){if(_0xc43e12===undefined)_0xc43e12=_0x54d607;_0x32ac8c[_0xc43e12]=_0x127e76[_0x54d607];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a81_0x53d3d5(0x215)]?function(_0x5ccd09,_0x2d422e){const _0x8b3e42=a81_0x53d3d5;Object[_0x8b3e42(0x1f2)](_0x5ccd09,'default',{'enumerable':!![],'value':_0x2d422e});}:function(_0x408e4a,_0x1583aa){const _0x29d973=a81_0x53d3d5;_0x408e4a[_0x29d973(0x210)]=_0x1583aa;}),__importStar=this&&this[a81_0x53d3d5(0x21e)]||function(_0x12d67f){const _0x596e51=a81_0x53d3d5;if(_0x12d67f&&_0x12d67f[_0x596e51(0x200)])return _0x12d67f;var _0x5caaef={};if(_0x12d67f!=null){for(var _0x5eecec in _0x12d67f)if(_0x5eecec!=='default'&&Object[_0x596e51(0x1f4)][_0x596e51(0x206)][_0x596e51(0x1fe)](_0x12d67f,_0x5eecec))__createBinding(_0x5caaef,_0x12d67f,_0x5eecec);}return __setModuleDefault(_0x5caaef,_0x12d67f),_0x5caaef;},__importDefault=this&&this[a81_0x53d3d5(0x219)]||function(_0x582825){const _0x381e6d=a81_0x53d3d5;return _0x582825&&_0x582825[_0x381e6d(0x200)]?_0x582825:{'default':_0x582825};};Object[a81_0x53d3d5(0x1f2)](exports,'__esModule',{'value':!![]}),exports[a81_0x53d3d5(0x214)]=void 0x0;const path_1=__importStar(require(a81_0x53d3d5(0x222))),fs_utils_1=require(a81_0x53d3d5(0x208)),promises_1=require('fs/promises'),logger_job_state_1=require(a81_0x53d3d5(0x20e)),logger_enums_1=require(a81_0x53d3d5(0x202)),sync_1=require(a81_0x53d3d5(0x207)),utils_1=require(a81_0x53d3d5(0x229)),not_found_error_1=require(a81_0x53d3d5(0x224)),job_1=require(a81_0x53d3d5(0x22c)),job_utils_1=__importDefault(require(a81_0x53d3d5(0x20d))),constants_1=require(a81_0x53d3d5(0x21f)),path_2=require(a81_0x53d3d5(0x1f0));class MaskingService{static async[a81_0x53d3d5(0x221)](_0x109054){const _0x82d064=a81_0x53d3d5,_0x512da8=job_utils_1['default'][_0x82d064(0x1e6)](),_0x3155b8=(0x0,path_1[_0x82d064(0x1f3)])(MaskingService[_0x82d064(0x1ff)],_0x512da8);await(0x0,fs_utils_1['makeDir'])(_0x3155b8),await(0x0,promises_1[_0x82d064(0x1eb)])(_0x3155b8+'/'+job_1[_0x82d064(0x213)],JSON['stringify']({'details':_0x109054}));const _0x3a7a58=await new logger_job_state_1['LoggerJobState'](_0x3155b8,_0x512da8)[_0x82d064(0x1f7)]([]);await _0x3a7a58[_0x82d064(0x21a)]();const _0x5ec716=path_1['default']['join'](__dirname,job_1[_0x82d064(0x225)]);return job_utils_1[_0x82d064(0x210)]['runJob'](_0x5ec716,{'jobStorePath':_0x3155b8,'jobId':_0x512da8})[_0x82d064(0x1f5)](_0x5573e3=>this[_0x82d064(0x21d)](_0x3155b8,_0x512da8,_0x5573e3)),{'jobId':_0x512da8};}static async['getJobs'](_0x144cf4,_0x30dc3f){const _0x4f9116=a81_0x53d3d5,_0x4580b4=await job_utils_1[_0x4f9116(0x210)][_0x4f9116(0x1e9)](MaskingService['maskingFolderPath']),_0x1091e4=await job_utils_1['default'][_0x4f9116(0x1fd)](MaskingService[_0x4f9116(0x1ff)],_0x4580b4),_0xd2f4a3=_0x1091e4[_0x4f9116(0x1e5)](_0x30dc3f,_0x30dc3f+_0x144cf4),_0x1ca9b2=[];for(const _0x2c2868 of _0xd2f4a3){const _0xa5419b=await this[_0x4f9116(0x211)](_0x2c2868,![]);_0x1ca9b2[_0x4f9116(0x216)](_0xa5419b);}return _0x1ca9b2;}static async['getJobState'](_0x3be643,_0x38bb0b){const _0x206219=a81_0x53d3d5,_0x23ea98=await this[_0x206219(0x226)](_0x3be643,job_1[_0x206219(0x204)],constants_1[_0x206219(0x1e8)]),_0x274a43=JSON['parse'](_0x23ea98),_0x523436={'id':_0x274a43['id'],'status':_0x274a43['status'],'createdDate':_0x274a43[_0x206219(0x203)],'completedDate':_0x274a43[_0x206219(0x21c)],'successful':_0x274a43['successful'],'failed':_0x274a43[_0x206219(0x227)]};return _0x38bb0b?_0x274a43:_0x523436;}static async[a81_0x53d3d5(0x217)](_0x27b21a){const _0x53d9eb=a81_0x53d3d5,_0x14b6e9=await this['getLog'](_0x27b21a,job_1[_0x53d9eb(0x1ec)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1['parse'])(_0x14b6e9,{'columns':!![]});}static async[a81_0x53d3d5(0x226)](_0x45e80c,_0x62aa02,_0x10d8c8){const _0x95b5e4=a81_0x53d3d5,_0x3f9f73=(0x0,path_1[_0x95b5e4(0x1f3)])(MaskingService[_0x95b5e4(0x1ff)],_0x45e80c),_0x3cc717=(0x0,path_1['join'])(_0x3f9f73,_0x62aa02);if(!await utils_1['FsUtils'][_0x95b5e4(0x212)](_0x3f9f73))throw new not_found_error_1[(_0x95b5e4(0x1f6))](_0x95b5e4(0x1f9));if(!await utils_1[_0x95b5e4(0x1f8)][_0x95b5e4(0x212)](_0x3cc717))throw new not_found_error_1[(_0x95b5e4(0x1f6))](_0x10d8c8+_0x95b5e4(0x20c));return(0x0,promises_1['readFile'])(_0x3cc717,{'encoding':_0x95b5e4(0x1ee)});}static async[a81_0x53d3d5(0x21d)](_0x36866a,_0xcc0fce,_0x21eafb){const _0x13a9e0=a81_0x53d3d5,_0x207d9e=await new logger_job_state_1[(_0x13a9e0(0x1ef))](_0x36866a,_0xcc0fce)['init']([]);_0x207d9e[_0x13a9e0(0x1fc)](logger_enums_1[_0x13a9e0(0x22d)]['FAILED']),_0x207d9e[_0x13a9e0(0x22a)](_0x21eafb['message']),await _0x207d9e[_0x13a9e0(0x21a)]();}}function a81_0x4222(){const _0x191a82=['../../shared/utils/job.utils','../job/classes/logger/logger-job-state','275uKguHv','default','getJobState','isExistsPath','MANIFEST_FILENAME','MaskingService','create','push','getJobDetails','9610664xzmvdR','__importDefault','kill','toString','completedDate','logErrorStartJob','__importStar','../constants','(((.+)+)+)+$','createMaskingJob','path','45747585FejAQq','../../../core/errors/not-found.error','JOB_PATH','getLog','failed','get','@flosum/utils','setJobError','dataPath','../../../constants/job','JobStatus','__createBinding','40830IwBaJQ','slice','generateJobId','35984HiEjqI','JOB_LOG_STATE_NAME','getJobsIds','writable','writeFile','JOB_LOG_DETAILS_FILENAME','apply','utf-8','LoggerJobState','../../../configs/path','2CqaIsT','defineProperty','join','prototype','catch','NotFoundError','init','FsUtils','Job\x20Id\x20not\x20found.','DATA_MASKING_FOLDER_NAME','177731nBvnab','setJobStatus','sortJobsIds','call','maskingFolderPath','__esModule','4985859UKbKUg','../job/enums/logger.enums','createdDate','JOB_LOG_STATE_FILENAME','search','hasOwnProperty','csv-parse/sync','../../shared/utils/fs.utils','constructor','configurable','5379820VpHuHc','\x20not\x20found.'];a81_0x4222=function(){return _0x191a82;};return a81_0x4222();}exports['MaskingService']=MaskingService,MaskingService[a81_0x53d3d5(0x1ff)]=path_1[a81_0x53d3d5(0x210)]['join'](path_2[a81_0x53d3d5(0x22b)],constants_1[a81_0x53d3d5(0x1fa)]);