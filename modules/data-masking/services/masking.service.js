const a80_0x22bc47=a80_0x37ee;(function(_0x31ae48,_0x28ce4e){const _0x51be23=a80_0x37ee,_0x2605a4=_0x31ae48();while(!![]){try{const _0x273e85=-parseInt(_0x51be23(0x1b9))/0x1*(parseInt(_0x51be23(0x1a3))/0x2)+parseInt(_0x51be23(0x198))/0x3*(parseInt(_0x51be23(0x18f))/0x4)+parseInt(_0x51be23(0x188))/0x5*(-parseInt(_0x51be23(0x183))/0x6)+parseInt(_0x51be23(0x1af))/0x7+-parseInt(_0x51be23(0x1ae))/0x8+-parseInt(_0x51be23(0x17c))/0x9*(parseInt(_0x51be23(0x199))/0xa)+parseInt(_0x51be23(0x18a))/0xb;if(_0x273e85===_0x28ce4e)break;else _0x2605a4['push'](_0x2605a4['shift']());}catch(_0x37ea95){_0x2605a4['push'](_0x2605a4['shift']());}}}(a80_0x5b7a,0x60ba7));const a80_0x936122=(function(){let _0x5030ee=!![];return function(_0x5c729a,_0x4c7e01){const _0x27fe02=_0x5030ee?function(){const _0x25e0a2=a80_0x37ee;if(_0x4c7e01){const _0x1005e5=_0x4c7e01[_0x25e0a2(0x192)](_0x5c729a,arguments);return _0x4c7e01=null,_0x1005e5;}}:function(){};return _0x5030ee=![],_0x27fe02;};}()),a80_0x39dfa2=a80_0x936122(this,function(){const _0x5a148b=a80_0x37ee;return a80_0x39dfa2[_0x5a148b(0x1b1)]()[_0x5a148b(0x17d)]('(((.+)+)+)+$')[_0x5a148b(0x1b1)]()['constructor'](a80_0x39dfa2)[_0x5a148b(0x17d)]('(((.+)+)+)+$');});a80_0x39dfa2();'use strict';function a80_0x37ee(_0x5bcae7,_0x20b719){const _0x2eaf66=a80_0x5b7a();return a80_0x37ee=function(_0x39dfa2,_0x936122){_0x39dfa2=_0x39dfa2-0x179;let _0x5b7adf=_0x2eaf66[_0x39dfa2];return _0x5b7adf;},a80_0x37ee(_0x5bcae7,_0x20b719);}var __createBinding=this&&this['__createBinding']||(Object[a80_0x22bc47(0x1b8)]?function(_0x1b1503,_0x1c3959,_0x2f92e1,_0x367efc){const _0x2860cc=a80_0x22bc47;if(_0x367efc===undefined)_0x367efc=_0x2f92e1;var _0x8843d2=Object['getOwnPropertyDescriptor'](_0x1c3959,_0x2f92e1);(!_0x8843d2||(_0x2860cc(0x18c)in _0x8843d2?!_0x1c3959['__esModule']:_0x8843d2[_0x2860cc(0x1b4)]||_0x8843d2['configurable']))&&(_0x8843d2={'enumerable':!![],'get':function(){return _0x1c3959[_0x2f92e1];}}),Object[_0x2860cc(0x186)](_0x1b1503,_0x367efc,_0x8843d2);}:function(_0x2c1c49,_0x16ef21,_0x37bfb8,_0x15349b){if(_0x15349b===undefined)_0x15349b=_0x37bfb8;_0x2c1c49[_0x15349b]=_0x16ef21[_0x37bfb8];}),__setModuleDefault=this&&this[a80_0x22bc47(0x1b5)]||(Object[a80_0x22bc47(0x1b8)]?function(_0xded230,_0x6114b0){const _0x1f1ea9=a80_0x22bc47;Object['defineProperty'](_0xded230,_0x1f1ea9(0x17e),{'enumerable':!![],'value':_0x6114b0});}:function(_0x464a31,_0x87f195){const _0x30e136=a80_0x22bc47;_0x464a31[_0x30e136(0x17e)]=_0x87f195;}),__importStar=this&&this[a80_0x22bc47(0x1a0)]||function(_0x2bf66b){const _0x3f83c8=a80_0x22bc47;if(_0x2bf66b&&_0x2bf66b[_0x3f83c8(0x191)])return _0x2bf66b;var _0x259f65={};if(_0x2bf66b!=null){for(var _0x1956ea in _0x2bf66b)if(_0x1956ea!==_0x3f83c8(0x17e)&&Object[_0x3f83c8(0x180)][_0x3f83c8(0x181)][_0x3f83c8(0x1c0)](_0x2bf66b,_0x1956ea))__createBinding(_0x259f65,_0x2bf66b,_0x1956ea);}return __setModuleDefault(_0x259f65,_0x2bf66b),_0x259f65;},__importDefault=this&&this[a80_0x22bc47(0x1c3)]||function(_0x2303aa){return _0x2303aa&&_0x2303aa['__esModule']?_0x2303aa:{'default':_0x2303aa};};Object[a80_0x22bc47(0x186)](exports,a80_0x22bc47(0x191),{'value':!![]}),exports[a80_0x22bc47(0x17f)]=void 0x0;function a80_0x5b7a(){const _0xb3da0f=['FAILED','create','348261ZdzLcO','getJobs','getJobsIds','join','utf-8','../../shared/utils/job.utils','JOB_LOG_DETAILS_FILENAME','call','isExistsPath','NotFoundError','__importDefault','../../../configs/path','createdDate','../job/classes/logger/logger-job-state','11682mQhCpX','search','default','MaskingService','prototype','hasOwnProperty','JobStatus','206286kHZRQT','catch','setJobStatus','defineProperty','JOB_LOG_DETAILS_NAME','35svxhej','fs/promises','16103857XzrApX','parse','get','../../../core/errors/not-found.error','writeFile','4qCbKso','completedDate','__esModule','apply','runJob','../../shared/utils/fs.utils','LoggerJobState','path','getJobState','724305mXYdmE','2910bSnGnx','DATA_MASKING_FOLDER_NAME','createMaskingJob','makeDir','readFile','getJobDetails','message','__importStar','dataPath','generateJobId','2UPiuGK','slice','../../../constants/job','@flosum/utils','stringify','../constants','Job\x20Id\x20not\x20found.','status','init','JOB_LOG_STATE_NAME','kill','5821144OFuMli','2695462NYmsnz','logErrorStartJob','toString','maskingFolderPath','\x20not\x20found.','writable','__setModuleDefault','MANIFEST_FILENAME'];a80_0x5b7a=function(){return _0xb3da0f;};return a80_0x5b7a();}const path_1=__importStar(require(a80_0x22bc47(0x196))),fs_utils_1=require(a80_0x22bc47(0x194)),promises_1=require(a80_0x22bc47(0x189)),logger_job_state_1=require(a80_0x22bc47(0x17b)),logger_enums_1=require('../job/enums/logger.enums'),sync_1=require('csv-parse/sync'),utils_1=require(a80_0x22bc47(0x1a6)),not_found_error_1=require(a80_0x22bc47(0x18d)),job_1=require(a80_0x22bc47(0x1a5)),job_utils_1=__importDefault(require(a80_0x22bc47(0x1be))),constants_1=require(a80_0x22bc47(0x1a8)),path_2=require(a80_0x22bc47(0x179));class MaskingService{static async[a80_0x22bc47(0x19b)](_0x5617aa){const _0x339803=a80_0x22bc47,_0x398df1=job_utils_1['default'][_0x339803(0x1a2)](),_0x4e5418=(0x0,path_1['join'])(MaskingService[_0x339803(0x1b2)],_0x398df1);await(0x0,fs_utils_1[_0x339803(0x19c)])(_0x4e5418),await(0x0,promises_1[_0x339803(0x18e)])(_0x4e5418+'/'+job_1[_0x339803(0x1b6)],JSON[_0x339803(0x1a7)]({'details':_0x5617aa}));const _0x38542f=await new logger_job_state_1['LoggerJobState'](_0x4e5418,_0x398df1)[_0x339803(0x1ab)]([]);await _0x38542f['kill']();const _0x558458=path_1['default'][_0x339803(0x1bc)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x339803(0x17e)][_0x339803(0x193)](_0x558458,{'jobStorePath':_0x4e5418,'jobId':_0x398df1})[_0x339803(0x184)](_0x45dc57=>this[_0x339803(0x1b0)](_0x4e5418,_0x398df1,_0x45dc57)),{'jobId':_0x398df1};}static async[a80_0x22bc47(0x1ba)](_0x2a1974,_0x3cd199){const _0x5c6a28=a80_0x22bc47,_0x3001cb=await job_utils_1[_0x5c6a28(0x17e)][_0x5c6a28(0x1bb)](MaskingService[_0x5c6a28(0x1b2)]),_0x28914b=await job_utils_1[_0x5c6a28(0x17e)]['sortJobsIds'](MaskingService['maskingFolderPath'],_0x3001cb),_0x295c4c=_0x28914b[_0x5c6a28(0x1a4)](_0x3cd199,_0x3cd199+_0x2a1974),_0x50eb0b=[];for(const _0x19940e of _0x295c4c){const _0xf47830=await this[_0x5c6a28(0x197)](_0x19940e,![]);_0x50eb0b['push'](_0xf47830);}return _0x50eb0b;}static async['getJobState'](_0x432d1e,_0x57f9b0){const _0x3e0c6e=a80_0x22bc47,_0x1b09d0=await this['getLog'](_0x432d1e,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x3e0c6e(0x1ac)]),_0x5d3dac=JSON[_0x3e0c6e(0x18b)](_0x1b09d0),_0xfa291e={'id':_0x5d3dac['id'],'status':_0x5d3dac[_0x3e0c6e(0x1aa)],'createdDate':_0x5d3dac[_0x3e0c6e(0x17a)],'completedDate':_0x5d3dac[_0x3e0c6e(0x190)]};return _0x57f9b0?_0x5d3dac:_0xfa291e;}static async[a80_0x22bc47(0x19e)](_0x2550c3){const _0x8d458e=a80_0x22bc47,_0x2395a7=await this['getLog'](_0x2550c3,job_1[_0x8d458e(0x1bf)],constants_1[_0x8d458e(0x187)]);return(0x0,sync_1[_0x8d458e(0x18b)])(_0x2395a7,{'columns':!![]});}static async['getLog'](_0x50c5a2,_0x5efe18,_0x5b47e8){const _0x345823=a80_0x22bc47,_0x1121d1=(0x0,path_1[_0x345823(0x1bc)])(MaskingService[_0x345823(0x1b2)],_0x50c5a2),_0x105210=(0x0,path_1['join'])(_0x1121d1,_0x5efe18);if(!await utils_1['FsUtils'][_0x345823(0x1c1)](_0x1121d1))throw new not_found_error_1['NotFoundError'](_0x345823(0x1a9));if(!await utils_1['FsUtils'][_0x345823(0x1c1)](_0x105210))throw new not_found_error_1[(_0x345823(0x1c2))](_0x5b47e8+_0x345823(0x1b3));return(0x0,promises_1[_0x345823(0x19d)])(_0x105210,{'encoding':_0x345823(0x1bd)});}static async[a80_0x22bc47(0x1b0)](_0x5d53fb,_0x181cc6,_0xcc5e26){const _0x502b7e=a80_0x22bc47,_0x3d71c6=await new logger_job_state_1[(_0x502b7e(0x195))](_0x5d53fb,_0x181cc6)['init']([]);_0x3d71c6[_0x502b7e(0x185)](logger_enums_1[_0x502b7e(0x182)][_0x502b7e(0x1b7)]),_0x3d71c6['setJobError'](_0xcc5e26[_0x502b7e(0x19f)]),await _0x3d71c6[_0x502b7e(0x1ad)]();}}exports[a80_0x22bc47(0x17f)]=MaskingService,MaskingService['maskingFolderPath']=path_1['default'][a80_0x22bc47(0x1bc)](path_2[a80_0x22bc47(0x1a1)],constants_1[a80_0x22bc47(0x19a)]);