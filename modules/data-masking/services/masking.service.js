const a81_0x23d406=a81_0x1f7a;(function(_0x5d1892,_0x39ae9e){const _0x492cf1=a81_0x1f7a,_0x44b067=_0x5d1892();while(!![]){try{const _0x1c40c5=-parseInt(_0x492cf1(0x18b))/0x1*(parseInt(_0x492cf1(0x15d))/0x2)+parseInt(_0x492cf1(0x152))/0x3*(parseInt(_0x492cf1(0x153))/0x4)+-parseInt(_0x492cf1(0x164))/0x5+parseInt(_0x492cf1(0x18f))/0x6+parseInt(_0x492cf1(0x16e))/0x7+-parseInt(_0x492cf1(0x193))/0x8+-parseInt(_0x492cf1(0x157))/0x9;if(_0x1c40c5===_0x39ae9e)break;else _0x44b067['push'](_0x44b067['shift']());}catch(_0x1503fb){_0x44b067['push'](_0x44b067['shift']());}}}(a81_0x1146,0x1d7c8));const a81_0x2a9bda=(function(){let _0x5655a7=!![];return function(_0x3cb47e,_0x12759d){const _0x50b4ad=_0x5655a7?function(){if(_0x12759d){const _0x42707c=_0x12759d['apply'](_0x3cb47e,arguments);return _0x12759d=null,_0x42707c;}}:function(){};return _0x5655a7=![],_0x50b4ad;};}()),a81_0x118d25=a81_0x2a9bda(this,function(){const _0x1154b5=a81_0x1f7a;return a81_0x118d25[_0x1154b5(0x179)]()[_0x1154b5(0x191)]('(((.+)+)+)+$')['toString']()[_0x1154b5(0x167)](a81_0x118d25)[_0x1154b5(0x191)](_0x1154b5(0x17e));});function a81_0x1146(){const _0x41f2fc=['760536rTrRlQ','successful','getJobs','435PRnOgt','4980qNeCyu','logErrorStartJob','csv-parse/sync','message','62253wulpeg','status','writable','__importDefault','failed','join','22zgndMJ','default','__createBinding','../../shared/utils/fs.utils','getJobDetails','init','setJobError','872785Nbhcge','../job/classes/logger/logger-job-state','JOB_PATH','constructor','defineProperty','maskingFolderPath','makeDir','__esModule','completedDate','create','1084741KvMHNp','MaskingService','JobStatus','../../shared/utils/job.utils','getLog','FsUtils','getJobState','JOB_LOG_STATE_NAME','slice','generateJobId','FAILED','toString','getOwnPropertyDescriptor','sortJobsIds','JOB_LOG_DETAILS_NAME','createMaskingJob','(((.+)+)+)+$','isExistsPath','@flosum/utils','LoggerJobState','parse','__setModuleDefault','../../../configs/path','getJobsIds','Job\x20Id\x20not\x20found.','writeFile','../constants','dataPath','../job/enums/logger.enums','11119gqxZup','push','fs/promises','DATA_MASKING_FOLDER_NAME','1104828fhvKya','stringify','search','NotFoundError'];a81_0x1146=function(){return _0x41f2fc;};return a81_0x1146();}a81_0x118d25();function a81_0x1f7a(_0x5d7e2c,_0x166ec6){const _0x2f662a=a81_0x1146();return a81_0x1f7a=function(_0x118d25,_0x2a9bda){_0x118d25=_0x118d25-0x151;let _0x11464b=_0x2f662a[_0x118d25];return _0x11464b;},a81_0x1f7a(_0x5d7e2c,_0x166ec6);}'use strict';var __createBinding=this&&this[a81_0x23d406(0x15f)]||(Object[a81_0x23d406(0x16d)]?function(_0x4e0b24,_0x5a8caa,_0x3f1b1b,_0x526f45){const _0x9bc080=a81_0x23d406;if(_0x526f45===undefined)_0x526f45=_0x3f1b1b;var _0x387338=Object[_0x9bc080(0x17a)](_0x5a8caa,_0x3f1b1b);(!_0x387338||('get'in _0x387338?!_0x5a8caa['__esModule']:_0x387338[_0x9bc080(0x159)]||_0x387338['configurable']))&&(_0x387338={'enumerable':!![],'get':function(){return _0x5a8caa[_0x3f1b1b];}}),Object['defineProperty'](_0x4e0b24,_0x526f45,_0x387338);}:function(_0x3aef8a,_0x168d07,_0x15d663,_0x229560){if(_0x229560===undefined)_0x229560=_0x15d663;_0x3aef8a[_0x229560]=_0x168d07[_0x15d663];}),__setModuleDefault=this&&this[a81_0x23d406(0x183)]||(Object[a81_0x23d406(0x16d)]?function(_0x56ac3f,_0xe6d374){const _0x2eaf12=a81_0x23d406;Object[_0x2eaf12(0x168)](_0x56ac3f,_0x2eaf12(0x15e),{'enumerable':!![],'value':_0xe6d374});}:function(_0x352fb1,_0x3c72b0){_0x352fb1['default']=_0x3c72b0;}),__importStar=this&&this['__importStar']||function(_0x50ff16){const _0xedcc7f=a81_0x23d406;if(_0x50ff16&&_0x50ff16[_0xedcc7f(0x16b)])return _0x50ff16;var _0x3c6a69={};if(_0x50ff16!=null){for(var _0x1ee6c8 in _0x50ff16)if(_0x1ee6c8!=='default'&&Object['prototype']['hasOwnProperty']['call'](_0x50ff16,_0x1ee6c8))__createBinding(_0x3c6a69,_0x50ff16,_0x1ee6c8);}return __setModuleDefault(_0x3c6a69,_0x50ff16),_0x3c6a69;},__importDefault=this&&this[a81_0x23d406(0x15a)]||function(_0x522741){const _0x336232=a81_0x23d406;return _0x522741&&_0x522741[_0x336232(0x16b)]?_0x522741:{'default':_0x522741};};Object[a81_0x23d406(0x168)](exports,a81_0x23d406(0x16b),{'value':!![]}),exports[a81_0x23d406(0x16f)]=void 0x0;const path_1=__importStar(require('path')),fs_utils_1=require(a81_0x23d406(0x160)),promises_1=require(a81_0x23d406(0x18d)),logger_job_state_1=require(a81_0x23d406(0x165)),logger_enums_1=require(a81_0x23d406(0x18a)),sync_1=require(a81_0x23d406(0x155)),utils_1=require(a81_0x23d406(0x180)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a81_0x23d406(0x171))),constants_1=require(a81_0x23d406(0x188)),path_2=require(a81_0x23d406(0x184));class MaskingService{static async[a81_0x23d406(0x17d)](_0x185317){const _0x34464d=a81_0x23d406,_0x46bb46=job_utils_1['default'][_0x34464d(0x177)](),_0x250c28=(0x0,path_1[_0x34464d(0x15c)])(MaskingService[_0x34464d(0x169)],_0x46bb46);await(0x0,fs_utils_1[_0x34464d(0x16a)])(_0x250c28),await(0x0,promises_1[_0x34464d(0x187)])(_0x250c28+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x34464d(0x190)]({'details':_0x185317}));const _0x403fa9=await new logger_job_state_1[(_0x34464d(0x181))](_0x250c28,_0x46bb46)[_0x34464d(0x162)]([]);await _0x403fa9['kill']();const _0x12e4d3=path_1[_0x34464d(0x15e)]['join'](__dirname,job_1[_0x34464d(0x166)]);return job_utils_1['default']['runJob'](_0x12e4d3,{'jobStorePath':_0x250c28,'jobId':_0x46bb46})['catch'](_0x4d11bb=>this[_0x34464d(0x154)](_0x250c28,_0x46bb46,_0x4d11bb)),{'jobId':_0x46bb46};}static async[a81_0x23d406(0x151)](_0x18c98a,_0x4d7e61){const _0x5754e4=a81_0x23d406,_0x1877fe=await job_utils_1[_0x5754e4(0x15e)][_0x5754e4(0x185)](MaskingService[_0x5754e4(0x169)]),_0x49445f=await job_utils_1['default'][_0x5754e4(0x17b)](MaskingService[_0x5754e4(0x169)],_0x1877fe),_0x11fe6f=_0x49445f[_0x5754e4(0x176)](_0x4d7e61,_0x4d7e61+_0x18c98a),_0x52deb6=[];for(const _0x5ee247 of _0x11fe6f){const _0x1f3c82=await this['getJobState'](_0x5ee247,![]);_0x52deb6[_0x5754e4(0x18c)](_0x1f3c82);}return _0x52deb6;}static async[a81_0x23d406(0x174)](_0x105832,_0x2546eb){const _0x2adfcc=a81_0x23d406,_0x469855=await this[_0x2adfcc(0x172)](_0x105832,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x2adfcc(0x175)]),_0x4913d2=JSON[_0x2adfcc(0x182)](_0x469855),_0x4fb1de={'id':_0x4913d2['id'],'status':_0x4913d2[_0x2adfcc(0x158)],'createdDate':_0x4913d2['createdDate'],'completedDate':_0x4913d2[_0x2adfcc(0x16c)],'successful':_0x4913d2[_0x2adfcc(0x194)],'failed':_0x4913d2[_0x2adfcc(0x15b)]};return _0x2546eb?_0x4913d2:_0x4fb1de;}static async[a81_0x23d406(0x161)](_0x4352a4){const _0x5c9295=a81_0x23d406,_0x4d1307=await this[_0x5c9295(0x172)](_0x4352a4,job_1['JOB_LOG_DETAILS_FILENAME'],constants_1[_0x5c9295(0x17c)]);return(0x0,sync_1[_0x5c9295(0x182)])(_0x4d1307,{'columns':!![]});}static async['getLog'](_0x3844a8,_0x1479c5,_0x1c6774){const _0x144a18=a81_0x23d406,_0x25564d=(0x0,path_1[_0x144a18(0x15c)])(MaskingService[_0x144a18(0x169)],_0x3844a8),_0x3fc4aa=(0x0,path_1['join'])(_0x25564d,_0x1479c5);if(!await utils_1[_0x144a18(0x173)][_0x144a18(0x17f)](_0x25564d))throw new not_found_error_1[(_0x144a18(0x192))](_0x144a18(0x186));if(!await utils_1[_0x144a18(0x173)]['isExistsPath'](_0x3fc4aa))throw new not_found_error_1[(_0x144a18(0x192))](_0x1c6774+'\x20not\x20found.');return(0x0,promises_1['readFile'])(_0x3fc4aa,{'encoding':'utf-8'});}static async['logErrorStartJob'](_0x46efd5,_0x3c32d6,_0x452dd2){const _0xfdd4e4=a81_0x23d406,_0x1bf085=await new logger_job_state_1[(_0xfdd4e4(0x181))](_0x46efd5,_0x3c32d6)['init']([]);_0x1bf085['setJobStatus'](logger_enums_1[_0xfdd4e4(0x170)][_0xfdd4e4(0x178)]),_0x1bf085[_0xfdd4e4(0x163)](_0x452dd2[_0xfdd4e4(0x156)]),await _0x1bf085['kill']();}}exports[a81_0x23d406(0x16f)]=MaskingService,MaskingService['maskingFolderPath']=path_1[a81_0x23d406(0x15e)][a81_0x23d406(0x15c)](path_2[a81_0x23d406(0x189)],constants_1[a81_0x23d406(0x18e)]);