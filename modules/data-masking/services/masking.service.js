const a81_0x40a72a=a81_0x50bd;function a81_0x2157(){const _0x209175=['JOB_LOG_DETAILS_NAME','maskingFolderPath','../../shared/utils/fs.utils','getJobs','runJob','setJobStatus','utf-8','JOB_PATH','configurable','search','push','FsUtils','writable','generateJobId','getJobDetails','makeDir','kill','readFile','default','sortJobsIds','\x20not\x20found.','(((.+)+)+)+$','135820AYZAeX','__esModule','../../../constants/job','MaskingService','toString','getLog','25fNPvva','JOB_LOG_DETAILS_FILENAME','../../shared/utils/job.utils','call','get','csv-parse/sync','361188xzTGJy','__setModuleDefault','successful','28ZhuQEg','init','__createBinding','JOB_LOG_STATE_NAME','defineProperty','dataPath','3375936apKYjw','constructor','../job/enums/logger.enums','120MBnvJr','DATA_MASKING_FOLDER_NAME','message','../../../configs/path','142877UoZrln','failed','__importStar','../job/classes/logger/logger-job-state','308732LeyHrI','createMaskingJob','createdDate','getJobState','catch','path','prototype','status','LoggerJobState','Job\x20Id\x20not\x20found.','158025OTHBCk','stringify','parse','../constants','JobStatus','FAILED','logErrorStartJob','getOwnPropertyDescriptor','JOB_LOG_STATE_FILENAME','NotFoundError','apply','join','220IvhGPn','279537lwuTvu','completedDate'];a81_0x2157=function(){return _0x209175;};return a81_0x2157();}(function(_0x119609,_0xfc7d2d){const _0x47350=a81_0x50bd,_0x1ac6ca=_0x119609();while(!![]){try{const _0x3291d8=parseInt(_0x47350(0xbd))/0x1+parseInt(_0x47350(0xf5))/0x2+-parseInt(_0x47350(0xff))/0x3*(-parseInt(_0x47350(0xe4))/0x4)+-parseInt(_0x47350(0xdb))/0x5*(parseInt(_0x47350(0xe1))/0x6)+parseInt(_0x47350(0xf1))/0x7*(-parseInt(_0x47350(0xed))/0x8)+parseInt(_0x47350(0xea))/0x9+parseInt(_0x47350(0xd5))/0xa*(-parseInt(_0x47350(0x10b))/0xb);if(_0x3291d8===_0xfc7d2d)break;else _0x1ac6ca['push'](_0x1ac6ca['shift']());}catch(_0x2391d6){_0x1ac6ca['push'](_0x1ac6ca['shift']());}}}(a81_0x2157,0x48fb9));const a81_0x5901ab=(function(){let _0x155625=!![];return function(_0x143a7e,_0x21c969){const _0xae4a9b=_0x155625?function(){const _0x1ab919=a81_0x50bd;if(_0x21c969){const _0x1725cb=_0x21c969[_0x1ab919(0x109)](_0x143a7e,arguments);return _0x21c969=null,_0x1725cb;}}:function(){};return _0x155625=![],_0xae4a9b;};}()),a81_0x5151f0=a81_0x5901ab(this,function(){const _0x3ef0cf=a81_0x50bd;return a81_0x5151f0[_0x3ef0cf(0xd9)]()[_0x3ef0cf(0xc8)](_0x3ef0cf(0xd4))[_0x3ef0cf(0xd9)]()[_0x3ef0cf(0xeb)](a81_0x5151f0)[_0x3ef0cf(0xc8)](_0x3ef0cf(0xd4));});a81_0x5151f0();'use strict';var __createBinding=this&&this[a81_0x40a72a(0xe6)]||(Object['create']?function(_0x59bc21,_0x2406d5,_0x1605fb,_0x5055f6){const _0x3af4b2=a81_0x40a72a;if(_0x5055f6===undefined)_0x5055f6=_0x1605fb;var _0xdda719=Object[_0x3af4b2(0x106)](_0x2406d5,_0x1605fb);(!_0xdda719||(_0x3af4b2(0xdf)in _0xdda719?!_0x2406d5[_0x3af4b2(0xd6)]:_0xdda719[_0x3af4b2(0xcb)]||_0xdda719[_0x3af4b2(0xc7)]))&&(_0xdda719={'enumerable':!![],'get':function(){return _0x2406d5[_0x1605fb];}}),Object[_0x3af4b2(0xe8)](_0x59bc21,_0x5055f6,_0xdda719);}:function(_0x3cc8a0,_0x81a4e6,_0x1eda21,_0x196119){if(_0x196119===undefined)_0x196119=_0x1eda21;_0x3cc8a0[_0x196119]=_0x81a4e6[_0x1eda21];}),__setModuleDefault=this&&this[a81_0x40a72a(0xe2)]||(Object['create']?function(_0x2f798d,_0x224459){const _0x29a95d=a81_0x40a72a;Object['defineProperty'](_0x2f798d,_0x29a95d(0xd1),{'enumerable':!![],'value':_0x224459});}:function(_0x255e43,_0x59025c){const _0x2e57eb=a81_0x40a72a;_0x255e43[_0x2e57eb(0xd1)]=_0x59025c;}),__importStar=this&&this[a81_0x40a72a(0xf3)]||function(_0x292022){const _0x149bb2=a81_0x40a72a;if(_0x292022&&_0x292022['__esModule'])return _0x292022;var _0x5b0a29={};if(_0x292022!=null){for(var _0x5e871b in _0x292022)if(_0x5e871b!==_0x149bb2(0xd1)&&Object[_0x149bb2(0xfb)]['hasOwnProperty'][_0x149bb2(0xde)](_0x292022,_0x5e871b))__createBinding(_0x5b0a29,_0x292022,_0x5e871b);}return __setModuleDefault(_0x5b0a29,_0x292022),_0x5b0a29;},__importDefault=this&&this['__importDefault']||function(_0xd0a5a0){const _0x5c544b=a81_0x40a72a;return _0xd0a5a0&&_0xd0a5a0[_0x5c544b(0xd6)]?_0xd0a5a0:{'default':_0xd0a5a0};};function a81_0x50bd(_0x291fda,_0x3a2b25){const _0x4e5d2d=a81_0x2157();return a81_0x50bd=function(_0x5151f0,_0x5901ab){_0x5151f0=_0x5151f0-0xbd;let _0x2157e1=_0x4e5d2d[_0x5151f0];return _0x2157e1;},a81_0x50bd(_0x291fda,_0x3a2b25);}Object[a81_0x40a72a(0xe8)](exports,a81_0x40a72a(0xd6),{'value':!![]}),exports[a81_0x40a72a(0xd8)]=void 0x0;const path_1=__importStar(require(a81_0x40a72a(0xfa))),fs_utils_1=require(a81_0x40a72a(0xc1)),promises_1=require('fs/promises'),logger_job_state_1=require(a81_0x40a72a(0xf4)),logger_enums_1=require(a81_0x40a72a(0xec)),sync_1=require(a81_0x40a72a(0xe0)),utils_1=require('@flosum/utils'),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a81_0x40a72a(0xd7)),job_utils_1=__importDefault(require(a81_0x40a72a(0xdd))),constants_1=require(a81_0x40a72a(0x102)),path_2=require(a81_0x40a72a(0xf0));class MaskingService{static async[a81_0x40a72a(0xf6)](_0x1a2fb6){const _0x40c397=a81_0x40a72a,_0x325ded=job_utils_1[_0x40c397(0xd1)][_0x40c397(0xcc)](),_0x2ffbc8=(0x0,path_1[_0x40c397(0x10a)])(MaskingService['maskingFolderPath'],_0x325ded);await(0x0,fs_utils_1[_0x40c397(0xce)])(_0x2ffbc8),await(0x0,promises_1['writeFile'])(_0x2ffbc8+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x40c397(0x100)]({'details':_0x1a2fb6}));const _0x1e6cb1=await new logger_job_state_1[(_0x40c397(0xfd))](_0x2ffbc8,_0x325ded)[_0x40c397(0xe5)]([]);await _0x1e6cb1[_0x40c397(0xcf)]();const _0x56e371=path_1['default'][_0x40c397(0x10a)](__dirname,job_1[_0x40c397(0xc6)]);return job_utils_1[_0x40c397(0xd1)][_0x40c397(0xc3)](_0x56e371,{'jobStorePath':_0x2ffbc8,'jobId':_0x325ded})[_0x40c397(0xf9)](_0x50ccd1=>this[_0x40c397(0x105)](_0x2ffbc8,_0x325ded,_0x50ccd1)),{'jobId':_0x325ded};}static async[a81_0x40a72a(0xc2)](_0x22fdfc,_0x424262){const _0x19ee1c=a81_0x40a72a,_0x572282=await job_utils_1['default']['getJobsIds'](MaskingService[_0x19ee1c(0xc0)]),_0x5d4fc1=await job_utils_1[_0x19ee1c(0xd1)][_0x19ee1c(0xd2)](MaskingService[_0x19ee1c(0xc0)],_0x572282),_0x496688=_0x5d4fc1['slice'](_0x424262,_0x424262+_0x22fdfc),_0x515afd=[];for(const _0x46762a of _0x496688){const _0x2e2de6=await this[_0x19ee1c(0xf8)](_0x46762a,![]);_0x515afd[_0x19ee1c(0xc9)](_0x2e2de6);}return _0x515afd;}static async['getJobState'](_0x162fd1,_0x16f060){const _0x36f8fb=a81_0x40a72a,_0x5c16c9=await this[_0x36f8fb(0xda)](_0x162fd1,job_1[_0x36f8fb(0x107)],constants_1[_0x36f8fb(0xe7)]),_0x2044a7=JSON[_0x36f8fb(0x101)](_0x5c16c9),_0x5b3d85={'id':_0x2044a7['id'],'status':_0x2044a7[_0x36f8fb(0xfc)],'createdDate':_0x2044a7[_0x36f8fb(0xf7)],'completedDate':_0x2044a7[_0x36f8fb(0xbe)],'successful':_0x2044a7[_0x36f8fb(0xe3)],'failed':_0x2044a7[_0x36f8fb(0xf2)]};return _0x16f060?_0x2044a7:_0x5b3d85;}static async[a81_0x40a72a(0xcd)](_0x500689){const _0x30c70d=a81_0x40a72a,_0x182edc=await this[_0x30c70d(0xda)](_0x500689,job_1[_0x30c70d(0xdc)],constants_1[_0x30c70d(0xbf)]);return(0x0,sync_1[_0x30c70d(0x101)])(_0x182edc,{'columns':!![]});}static async[a81_0x40a72a(0xda)](_0x3ced3d,_0x3d9cbc,_0x464057){const _0x29b704=a81_0x40a72a,_0x2b2633=(0x0,path_1[_0x29b704(0x10a)])(MaskingService[_0x29b704(0xc0)],_0x3ced3d),_0x1c1c99=(0x0,path_1[_0x29b704(0x10a)])(_0x2b2633,_0x3d9cbc);if(!await utils_1[_0x29b704(0xca)]['isExistsPath'](_0x2b2633))throw new not_found_error_1['NotFoundError'](_0x29b704(0xfe));if(!await utils_1[_0x29b704(0xca)]['isExistsPath'](_0x1c1c99))throw new not_found_error_1[(_0x29b704(0x108))](_0x464057+_0x29b704(0xd3));return(0x0,promises_1[_0x29b704(0xd0)])(_0x1c1c99,{'encoding':_0x29b704(0xc5)});}static async['logErrorStartJob'](_0xdbfbe5,_0x2631b9,_0x3fc132){const _0x31e4a1=a81_0x40a72a,_0x4cc3de=await new logger_job_state_1[(_0x31e4a1(0xfd))](_0xdbfbe5,_0x2631b9)[_0x31e4a1(0xe5)]([]);_0x4cc3de[_0x31e4a1(0xc4)](logger_enums_1[_0x31e4a1(0x103)][_0x31e4a1(0x104)]),_0x4cc3de['setJobError'](_0x3fc132[_0x31e4a1(0xef)]),await _0x4cc3de[_0x31e4a1(0xcf)]();}}exports[a81_0x40a72a(0xd8)]=MaskingService,MaskingService[a81_0x40a72a(0xc0)]=path_1[a81_0x40a72a(0xd1)]['join'](path_2[a81_0x40a72a(0xe9)],constants_1[a81_0x40a72a(0xee)]);