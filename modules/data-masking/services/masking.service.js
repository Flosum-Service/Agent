const a98_0x3a7c10=a98_0x3e74;function a98_0x3e74(_0x38306d,_0x5a1d67){const _0x56b244=a98_0x54b4();return a98_0x3e74=function(_0x3071ab,_0x14e439){_0x3071ab=_0x3071ab-0xd9;let _0x54b42b=_0x56b244[_0x3071ab];return _0x54b42b;},a98_0x3e74(_0x38306d,_0x5a1d67);}(function(_0x41e3b0,_0x48fdc3){const _0x15df55=a98_0x3e74,_0x5dc19d=_0x41e3b0();while(!![]){try{const _0x4d7f64=-parseInt(_0x15df55(0xd9))/0x1*(parseInt(_0x15df55(0xf7))/0x2)+-parseInt(_0x15df55(0xeb))/0x3+parseInt(_0x15df55(0x10f))/0x4*(-parseInt(_0x15df55(0x100))/0x5)+parseInt(_0x15df55(0xfe))/0x6+-parseInt(_0x15df55(0xdc))/0x7+-parseInt(_0x15df55(0xfa))/0x8+parseInt(_0x15df55(0x10d))/0x9;if(_0x4d7f64===_0x48fdc3)break;else _0x5dc19d['push'](_0x5dc19d['shift']());}catch(_0x10ce05){_0x5dc19d['push'](_0x5dc19d['shift']());}}}(a98_0x54b4,0xb6047));function a98_0x54b4(){const _0x4b58bf=['6616248qvoTOm','__importDefault','@flosum/utils','get','427254SaApyZ','getLog','120jAAFBr','FAILED','utf-8','DATA_MASKING_FOLDER_NAME','getJobState','kill','../../../constants/job','MaskingService','__esModule','readFile','NotFoundError','parse','../../shared/utils/fs.utils','42015816HJidEz','setJobStatus','80072kCBYZt','stringify','setJobError','createMaskingJob','getOwnPropertyDescriptor','fs/promises','join','path','configurable','sortJobsIds','../job/enums/logger.enums','prototype','create','(((.+)+)+)+$','__createBinding','../../../core/errors/not-found.error','../job/classes/logger/logger-job-state','completedDate','FsUtils','JobStatus','default','133953EySKDH','hasOwnProperty','LoggerJobState','9679943kdpEXO','__importStar','JOB_LOG_DETAILS_NAME','defineProperty','toString','makeDir','successful','../../shared/utils/job.utils','__setModuleDefault','search','../../../configs/path','push','constructor','slice','status','1902039zPvCXl','writeFile','generateJobId','MANIFEST_FILENAME','call','init','writable','maskingFolderPath','JOB_LOG_DETAILS_FILENAME','isExistsPath','createdDate','apply','10Ramsar','csv-parse/sync','logErrorStartJob'];a98_0x54b4=function(){return _0x4b58bf;};return a98_0x54b4();}const a98_0x14e439=(function(){let _0x4b06e9=!![];return function(_0x34dba2,_0x4dd285){const _0x2f88d5=_0x4b06e9?function(){const _0x136494=a98_0x3e74;if(_0x4dd285){const _0x25fcff=_0x4dd285[_0x136494(0xf6)](_0x34dba2,arguments);return _0x4dd285=null,_0x25fcff;}}:function(){};return _0x4b06e9=![],_0x2f88d5;};}()),a98_0x3071ab=a98_0x14e439(this,function(){const _0x4988e7=a98_0x3e74;return a98_0x3071ab[_0x4988e7(0xe0)]()[_0x4988e7(0xe5)](_0x4988e7(0x11c))['toString']()[_0x4988e7(0xe8)](a98_0x3071ab)[_0x4988e7(0xe5)](_0x4988e7(0x11c));});a98_0x3071ab();'use strict';var __createBinding=this&&this[a98_0x3a7c10(0x11d)]||(Object[a98_0x3a7c10(0x11b)]?function(_0x244bea,_0x5f0707,_0x51137b,_0x491f02){const _0x4cc106=a98_0x3a7c10;if(_0x491f02===undefined)_0x491f02=_0x51137b;var _0x427c85=Object[_0x4cc106(0x113)](_0x5f0707,_0x51137b);(!_0x427c85||(_0x4cc106(0xfd)in _0x427c85?!_0x5f0707[_0x4cc106(0x108)]:_0x427c85[_0x4cc106(0xf1)]||_0x427c85[_0x4cc106(0x117)]))&&(_0x427c85={'enumerable':!![],'get':function(){return _0x5f0707[_0x51137b];}}),Object[_0x4cc106(0xdf)](_0x244bea,_0x491f02,_0x427c85);}:function(_0x3353c7,_0xe51d35,_0x15abd9,_0x5b7ed8){if(_0x5b7ed8===undefined)_0x5b7ed8=_0x15abd9;_0x3353c7[_0x5b7ed8]=_0xe51d35[_0x15abd9];}),__setModuleDefault=this&&this[a98_0x3a7c10(0xe4)]||(Object[a98_0x3a7c10(0x11b)]?function(_0x3dec52,_0x176a02){const _0x28e78e=a98_0x3a7c10;Object[_0x28e78e(0xdf)](_0x3dec52,_0x28e78e(0x123),{'enumerable':!![],'value':_0x176a02});}:function(_0x24e433,_0x424b42){const _0xeaee34=a98_0x3a7c10;_0x24e433[_0xeaee34(0x123)]=_0x424b42;}),__importStar=this&&this[a98_0x3a7c10(0xdd)]||function(_0x458c90){const _0x3c1ada=a98_0x3a7c10;if(_0x458c90&&_0x458c90[_0x3c1ada(0x108)])return _0x458c90;var _0x1fda3e={};if(_0x458c90!=null){for(var _0x33dd6b in _0x458c90)if(_0x33dd6b!==_0x3c1ada(0x123)&&Object[_0x3c1ada(0x11a)][_0x3c1ada(0xda)][_0x3c1ada(0xef)](_0x458c90,_0x33dd6b))__createBinding(_0x1fda3e,_0x458c90,_0x33dd6b);}return __setModuleDefault(_0x1fda3e,_0x458c90),_0x1fda3e;},__importDefault=this&&this[a98_0x3a7c10(0xfb)]||function(_0x17de6c){return _0x17de6c&&_0x17de6c['__esModule']?_0x17de6c:{'default':_0x17de6c};};Object[a98_0x3a7c10(0xdf)](exports,a98_0x3a7c10(0x108),{'value':!![]}),exports[a98_0x3a7c10(0x107)]=void 0x0;const path_1=__importStar(require(a98_0x3a7c10(0x116))),fs_utils_1=require(a98_0x3a7c10(0x10c)),promises_1=require(a98_0x3a7c10(0x114)),logger_job_state_1=require(a98_0x3a7c10(0x11f)),logger_enums_1=require(a98_0x3a7c10(0x119)),sync_1=require(a98_0x3a7c10(0xf8)),utils_1=require(a98_0x3a7c10(0xfc)),not_found_error_1=require(a98_0x3a7c10(0x11e)),job_1=require(a98_0x3a7c10(0x106)),job_utils_1=__importDefault(require(a98_0x3a7c10(0xe3))),constants_1=require('../constants'),path_2=require(a98_0x3a7c10(0xe6));class MaskingService{static async[a98_0x3a7c10(0x112)](_0x5930ba){const _0x1abfe2=a98_0x3a7c10,_0x1442a7=job_utils_1[_0x1abfe2(0x123)][_0x1abfe2(0xed)](),_0x4f6405=(0x0,path_1['join'])(MaskingService[_0x1abfe2(0xf2)],_0x1442a7);await(0x0,fs_utils_1[_0x1abfe2(0xe1)])(_0x4f6405),await(0x0,promises_1[_0x1abfe2(0xec)])(_0x4f6405+'/'+job_1[_0x1abfe2(0xee)],JSON[_0x1abfe2(0x110)]({'details':_0x5930ba}));const _0x1d09ca=await new logger_job_state_1[(_0x1abfe2(0xdb))](_0x4f6405,_0x1442a7)[_0x1abfe2(0xf0)]([]);await _0x1d09ca[_0x1abfe2(0x105)]();const _0x4d4140=path_1[_0x1abfe2(0x123)][_0x1abfe2(0x115)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x1abfe2(0x123)]['runJob'](_0x4d4140,{'jobStorePath':_0x4f6405,'jobId':_0x1442a7})['catch'](_0x20fca5=>this['logErrorStartJob'](_0x4f6405,_0x1442a7,_0x20fca5)),{'jobId':_0x1442a7};}static async['getJobs'](_0xaf966b,_0xecfd60){const _0x45f61a=a98_0x3a7c10,_0x566379=await job_utils_1['default']['getJobsIds'](MaskingService[_0x45f61a(0xf2)]),_0x2d83b6=await job_utils_1[_0x45f61a(0x123)][_0x45f61a(0x118)](MaskingService['maskingFolderPath'],_0x566379),_0x56a4c8=_0x2d83b6[_0x45f61a(0xe9)](_0xecfd60,_0xecfd60+_0xaf966b),_0x36aace=[];for(const _0x345f33 of _0x56a4c8){const _0x363637=await this[_0x45f61a(0x104)](_0x345f33,![]);_0x36aace[_0x45f61a(0xe7)](_0x363637);}return _0x36aace;}static async[a98_0x3a7c10(0x104)](_0x51d672,_0x2ce1be){const _0x11b4c5=a98_0x3a7c10,_0x3ff23d=await this[_0x11b4c5(0xff)](_0x51d672,job_1['JOB_LOG_STATE_FILENAME'],constants_1['JOB_LOG_STATE_NAME']),_0x2f4aff=JSON['parse'](_0x3ff23d),_0xa9ea7b={'id':_0x2f4aff['id'],'status':_0x2f4aff[_0x11b4c5(0xea)],'createdDate':_0x2f4aff[_0x11b4c5(0xf5)],'completedDate':_0x2f4aff[_0x11b4c5(0x120)],'successful':_0x2f4aff[_0x11b4c5(0xe2)],'failed':_0x2f4aff['failed']};return _0x2ce1be?_0x2f4aff:_0xa9ea7b;}static async['getJobDetails'](_0x2e9466){const _0x3827e2=a98_0x3a7c10,_0x5300a0=await this['getLog'](_0x2e9466,job_1[_0x3827e2(0xf3)],constants_1[_0x3827e2(0xde)]);return(0x0,sync_1[_0x3827e2(0x10b)])(_0x5300a0,{'columns':!![]});}static async[a98_0x3a7c10(0xff)](_0x3eb83a,_0x4f15da,_0x2b3489){const _0x5b46c2=a98_0x3a7c10,_0x222170=(0x0,path_1['join'])(MaskingService[_0x5b46c2(0xf2)],_0x3eb83a),_0x12afab=(0x0,path_1['join'])(_0x222170,_0x4f15da);if(!await utils_1[_0x5b46c2(0x121)][_0x5b46c2(0xf4)](_0x222170))throw new not_found_error_1['NotFoundError']('Job\x20Id\x20not\x20found.');if(!await utils_1[_0x5b46c2(0x121)][_0x5b46c2(0xf4)](_0x12afab))throw new not_found_error_1[(_0x5b46c2(0x10a))](_0x2b3489+'\x20not\x20found.');return(0x0,promises_1[_0x5b46c2(0x109)])(_0x12afab,{'encoding':_0x5b46c2(0x102)});}static async[a98_0x3a7c10(0xf9)](_0x7a2c6a,_0xd154fc,_0x3ff467){const _0x40da74=a98_0x3a7c10,_0x54053e=await new logger_job_state_1[(_0x40da74(0xdb))](_0x7a2c6a,_0xd154fc)[_0x40da74(0xf0)]([]);_0x54053e[_0x40da74(0x10e)](logger_enums_1[_0x40da74(0x122)][_0x40da74(0x101)]),_0x54053e[_0x40da74(0x111)](_0x3ff467['message']),await _0x54053e[_0x40da74(0x105)]();}}exports['MaskingService']=MaskingService,MaskingService[a98_0x3a7c10(0xf2)]=path_1[a98_0x3a7c10(0x123)]['join'](path_2['dataPath'],constants_1[a98_0x3a7c10(0x103)]);