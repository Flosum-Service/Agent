const a81_0x1fa8ff=a81_0x5b6d;function a81_0x5b6d(_0x2fcd62,_0xab0447){const _0x2d829a=a81_0x4983();return a81_0x5b6d=function(_0x2bd0a9,_0x271df3){_0x2bd0a9=_0x2bd0a9-0x1e8;let _0x498357=_0x2d829a[_0x2bd0a9];return _0x498357;},a81_0x5b6d(_0x2fcd62,_0xab0447);}(function(_0x4e9e98,_0x1604aa){const _0x51cc5e=a81_0x5b6d,_0x48589a=_0x4e9e98();while(!![]){try{const _0x9942c9=-parseInt(_0x51cc5e(0x218))/0x1*(parseInt(_0x51cc5e(0x210))/0x2)+-parseInt(_0x51cc5e(0x1f2))/0x3+parseInt(_0x51cc5e(0x231))/0x4*(-parseInt(_0x51cc5e(0x22c))/0x5)+-parseInt(_0x51cc5e(0x21d))/0x6*(parseInt(_0x51cc5e(0x236))/0x7)+parseInt(_0x51cc5e(0x1ed))/0x8*(-parseInt(_0x51cc5e(0x232))/0x9)+-parseInt(_0x51cc5e(0x214))/0xa+parseInt(_0x51cc5e(0x1f5))/0xb;if(_0x9942c9===_0x1604aa)break;else _0x48589a['push'](_0x48589a['shift']());}catch(_0x3deda7){_0x48589a['push'](_0x48589a['shift']());}}}(a81_0x4983,0xa7da7));const a81_0x271df3=(function(){let _0x16990c=!![];return function(_0x12e958,_0xef54eb){const _0x1d9726=_0x16990c?function(){const _0x28e3af=a81_0x5b6d;if(_0xef54eb){const _0x2a835e=_0xef54eb[_0x28e3af(0x222)](_0x12e958,arguments);return _0xef54eb=null,_0x2a835e;}}:function(){};return _0x16990c=![],_0x1d9726;};}()),a81_0x2bd0a9=a81_0x271df3(this,function(){const _0x26e708=a81_0x5b6d;return a81_0x2bd0a9[_0x26e708(0x1fe)]()[_0x26e708(0x206)]('(((.+)+)+)+$')[_0x26e708(0x1fe)]()[_0x26e708(0x22e)](a81_0x2bd0a9)[_0x26e708(0x206)](_0x26e708(0x220));});a81_0x2bd0a9();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a81_0x1fa8ff(0x201)]?function(_0x34d05b,_0x192329,_0xb2fc3f,_0x28cf97){const _0x224d41=a81_0x1fa8ff;if(_0x28cf97===undefined)_0x28cf97=_0xb2fc3f;var _0x53625c=Object[_0x224d41(0x1f3)](_0x192329,_0xb2fc3f);(!_0x53625c||(_0x224d41(0x1f0)in _0x53625c?!_0x192329[_0x224d41(0x21c)]:_0x53625c[_0x224d41(0x226)]||_0x53625c[_0x224d41(0x216)]))&&(_0x53625c={'enumerable':!![],'get':function(){return _0x192329[_0xb2fc3f];}}),Object[_0x224d41(0x1f1)](_0x34d05b,_0x28cf97,_0x53625c);}:function(_0x46deff,_0x7d48b0,_0x2c4909,_0x4a624b){if(_0x4a624b===undefined)_0x4a624b=_0x2c4909;_0x46deff[_0x4a624b]=_0x7d48b0[_0x2c4909];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x4e5a12,_0x107b8c){const _0x4ee178=a81_0x1fa8ff;Object[_0x4ee178(0x1f1)](_0x4e5a12,'default',{'enumerable':!![],'value':_0x107b8c});}:function(_0x1a983c,_0x5a40db){_0x1a983c['default']=_0x5a40db;}),__importStar=this&&this['__importStar']||function(_0x3e9d3){const _0x78539f=a81_0x1fa8ff;if(_0x3e9d3&&_0x3e9d3[_0x78539f(0x21c)])return _0x3e9d3;var _0x348812={};if(_0x3e9d3!=null){for(var _0x527b08 in _0x3e9d3)if(_0x527b08!==_0x78539f(0x22a)&&Object[_0x78539f(0x21f)]['hasOwnProperty']['call'](_0x3e9d3,_0x527b08))__createBinding(_0x348812,_0x3e9d3,_0x527b08);}return __setModuleDefault(_0x348812,_0x3e9d3),_0x348812;},__importDefault=this&&this[a81_0x1fa8ff(0x1ef)]||function(_0x9bab55){const _0x199bcb=a81_0x1fa8ff;return _0x9bab55&&_0x9bab55[_0x199bcb(0x21c)]?_0x9bab55:{'default':_0x9bab55};};Object[a81_0x1fa8ff(0x1f1)](exports,a81_0x1fa8ff(0x21c),{'value':!![]}),exports[a81_0x1fa8ff(0x227)]=void 0x0;const path_1=__importStar(require(a81_0x1fa8ff(0x1f4))),fs_utils_1=require(a81_0x1fa8ff(0x208)),promises_1=require(a81_0x1fa8ff(0x205)),logger_job_state_1=require(a81_0x1fa8ff(0x1ec)),logger_enums_1=require('../job/enums/logger.enums'),sync_1=require(a81_0x1fa8ff(0x228)),utils_1=require(a81_0x1fa8ff(0x203)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a81_0x1fa8ff(0x20f)),job_utils_1=__importDefault(require(a81_0x1fa8ff(0x22b))),constants_1=require('../constants'),path_2=require(a81_0x1fa8ff(0x225));class MaskingService{static async[a81_0x1fa8ff(0x1eb)](_0x1982df){const _0x291382=a81_0x1fa8ff,_0x330cad=job_utils_1[_0x291382(0x22a)][_0x291382(0x22f)](),_0x314957=(0x0,path_1['join'])(MaskingService[_0x291382(0x212)],_0x330cad);await(0x0,fs_utils_1[_0x291382(0x20b)])(_0x314957),await(0x0,promises_1[_0x291382(0x1fa)])(_0x314957+'/'+job_1[_0x291382(0x234)],JSON[_0x291382(0x1fc)]({'details':_0x1982df}));const _0x1fa691=await new logger_job_state_1['LoggerJobState'](_0x314957,_0x330cad)['init']([]);await _0x1fa691[_0x291382(0x22d)]();const _0x134f11=path_1[_0x291382(0x22a)][_0x291382(0x1fd)](__dirname,job_1[_0x291382(0x21e)]);return job_utils_1['default']['runJob'](_0x134f11,{'jobStorePath':_0x314957,'jobId':_0x330cad})[_0x291382(0x1ee)](_0x2f24d3=>this[_0x291382(0x1f9)](_0x314957,_0x330cad,_0x2f24d3)),{'jobId':_0x330cad};}static async[a81_0x1fa8ff(0x20d)](_0x4a5c1d,_0x4525b0){const _0x4ac8da=a81_0x1fa8ff,_0x30a5ab=await job_utils_1[_0x4ac8da(0x22a)][_0x4ac8da(0x1f8)](MaskingService[_0x4ac8da(0x212)]),_0x3371a5=await job_utils_1[_0x4ac8da(0x22a)][_0x4ac8da(0x230)](MaskingService[_0x4ac8da(0x212)],_0x30a5ab),_0x3d7f7b=_0x3371a5['slice'](_0x4525b0,_0x4525b0+_0x4a5c1d),_0x40fb2c=[];for(const _0x2e2784 of _0x3d7f7b){const _0x37fd30=await this[_0x4ac8da(0x217)](_0x2e2784,![]);_0x40fb2c[_0x4ac8da(0x20c)](_0x37fd30);}return _0x40fb2c;}static async[a81_0x1fa8ff(0x217)](_0x58e02b,_0x3f5962){const _0x4e1336=a81_0x1fa8ff,_0x39e335=await this[_0x4e1336(0x215)](_0x58e02b,job_1[_0x4e1336(0x1e9)],constants_1[_0x4e1336(0x235)]),_0x5b2822=JSON[_0x4e1336(0x211)](_0x39e335),_0x197f51={'id':_0x5b2822['id'],'status':_0x5b2822[_0x4e1336(0x1f6)],'createdDate':_0x5b2822[_0x4e1336(0x1ff)],'completedDate':_0x5b2822[_0x4e1336(0x1f7)],'successful':_0x5b2822['successful'],'failed':_0x5b2822['failed']};return _0x3f5962?_0x5b2822:_0x197f51;}static async[a81_0x1fa8ff(0x229)](_0x35ed57){const _0xf563fb=a81_0x1fa8ff,_0x1f8f1c=await this[_0xf563fb(0x215)](_0x35ed57,job_1[_0xf563fb(0x224)],constants_1[_0xf563fb(0x209)]);return(0x0,sync_1['parse'])(_0x1f8f1c,{'columns':!![]});}static async[a81_0x1fa8ff(0x215)](_0x2b6263,_0xc6aa8,_0x59b947){const _0x216106=a81_0x1fa8ff,_0x5489c1=(0x0,path_1[_0x216106(0x1fd)])(MaskingService['maskingFolderPath'],_0x2b6263),_0x3ffb5a=(0x0,path_1[_0x216106(0x1fd)])(_0x5489c1,_0xc6aa8);if(!await utils_1[_0x216106(0x1ea)][_0x216106(0x221)](_0x5489c1))throw new not_found_error_1[(_0x216106(0x200))](_0x216106(0x223));if(!await utils_1[_0x216106(0x1ea)][_0x216106(0x221)](_0x3ffb5a))throw new not_found_error_1[(_0x216106(0x200))](_0x59b947+_0x216106(0x204));return(0x0,promises_1[_0x216106(0x202)])(_0x3ffb5a,{'encoding':_0x216106(0x219)});}static async[a81_0x1fa8ff(0x1f9)](_0x24439f,_0x4bbdc1,_0x4bc217){const _0x484445=a81_0x1fa8ff,_0x43e38c=await new logger_job_state_1[(_0x484445(0x213))](_0x24439f,_0x4bbdc1)[_0x484445(0x20e)]([]);_0x43e38c[_0x484445(0x20a)](logger_enums_1[_0x484445(0x233)][_0x484445(0x1fb)]),_0x43e38c[_0x484445(0x21b)](_0x4bc217[_0x484445(0x207)]),await _0x43e38c[_0x484445(0x22d)]();}}exports[a81_0x1fa8ff(0x227)]=MaskingService,MaskingService[a81_0x1fa8ff(0x212)]=path_1[a81_0x1fa8ff(0x22a)][a81_0x1fa8ff(0x1fd)](path_2[a81_0x1fa8ff(0x21a)],constants_1[a81_0x1fa8ff(0x1e8)]);function a81_0x4983(){const _0x1c4ed9=['39980072UdSdVx','status','completedDate','getJobsIds','logErrorStartJob','writeFile','FAILED','stringify','join','toString','createdDate','NotFoundError','create','readFile','@flosum/utils','\x20not\x20found.','fs/promises','search','message','../../shared/utils/fs.utils','JOB_LOG_DETAILS_NAME','setJobStatus','makeDir','push','getJobs','init','../../../constants/job','4566gzUldY','parse','maskingFolderPath','LoggerJobState','6651940YPzMbX','getLog','configurable','getJobState','71rmUofX','utf-8','dataPath','setJobError','__esModule','5298RpfmZE','JOB_PATH','prototype','(((.+)+)+)+$','isExistsPath','apply','Job\x20Id\x20not\x20found.','JOB_LOG_DETAILS_FILENAME','../../../configs/path','writable','MaskingService','csv-parse/sync','getJobDetails','default','../../shared/utils/job.utils','6525zIynBa','kill','constructor','generateJobId','sortJobsIds','2180SteXfG','790938zSqkfu','JobStatus','MANIFEST_FILENAME','JOB_LOG_STATE_NAME','5999tiGtKm','DATA_MASKING_FOLDER_NAME','JOB_LOG_STATE_FILENAME','FsUtils','createMaskingJob','../job/classes/logger/logger-job-state','32GPblff','catch','__importDefault','get','defineProperty','900762ieGOrc','getOwnPropertyDescriptor','path'];a81_0x4983=function(){return _0x1c4ed9;};return a81_0x4983();}