const a81_0x1f5124=a81_0x2ca1;(function(_0x804d45,_0x49615e){const _0x57551e=a81_0x2ca1,_0x3559e2=_0x804d45();while(!![]){try{const _0x52e2a5=-parseInt(_0x57551e(0x116))/0x1*(-parseInt(_0x57551e(0xf1))/0x2)+-parseInt(_0x57551e(0x132))/0x3+-parseInt(_0x57551e(0x127))/0x4+parseInt(_0x57551e(0xea))/0x5*(parseInt(_0x57551e(0xf0))/0x6)+parseInt(_0x57551e(0x12a))/0x7+parseInt(_0x57551e(0x103))/0x8+-parseInt(_0x57551e(0x12c))/0x9;if(_0x52e2a5===_0x49615e)break;else _0x3559e2['push'](_0x3559e2['shift']());}catch(_0x236004){_0x3559e2['push'](_0x3559e2['shift']());}}}(a81_0x2603,0x1c7bf));const a81_0x4b4bbc=(function(){let _0x3b87ba=!![];return function(_0x224dd6,_0x511761){const _0xd2a1e3=_0x3b87ba?function(){const _0x3c3e7f=a81_0x2ca1;if(_0x511761){const _0x4530dc=_0x511761[_0x3c3e7f(0xff)](_0x224dd6,arguments);return _0x511761=null,_0x4530dc;}}:function(){};return _0x3b87ba=![],_0xd2a1e3;};}()),a81_0x4906fa=a81_0x4b4bbc(this,function(){const _0x200836=a81_0x2ca1;return a81_0x4906fa[_0x200836(0x128)]()[_0x200836(0x111)](_0x200836(0x12e))[_0x200836(0x128)]()['constructor'](a81_0x4906fa)['search'](_0x200836(0x12e));});a81_0x4906fa();function a81_0x2ca1(_0x117ca3,_0xbd4a6d){const _0x2ace61=a81_0x2603();return a81_0x2ca1=function(_0x4906fa,_0x4b4bbc){_0x4906fa=_0x4906fa-0xea;let _0x2603f4=_0x2ace61[_0x4906fa];return _0x2603f4;},a81_0x2ca1(_0x117ca3,_0xbd4a6d);}function a81_0x2603(){const _0x27f31f=['(((.+)+)+)+$','generateJobId','logErrorStartJob','../job/enums/logger.enums','209553wAIkMc','100zeEkvT','join','FAILED','readFile','createMaskingJob','FsUtils','35886ZawuLt','8KzlvuW','default','getJobDetails','hasOwnProperty','../constants','sortJobsIds','\x20not\x20found.','push','JOB_LOG_DETAILS_FILENAME','successful','../../../configs/path','kill','get','__importStar','apply','JOB_LOG_STATE_FILENAME','@flosum/utils','getLog','47992tzqAJv','../job/classes/logger/logger-job-state','Job\x20Id\x20not\x20found.','init','setJobError','create','MaskingService','stringify','getJobs','catch','parse','JOB_LOG_STATE_NAME','DATA_MASKING_FOLDER_NAME','getOwnPropertyDescriptor','search','dataPath','__esModule','JobStatus','defineProperty','14407ISIwDu','csv-parse/sync','__setModuleDefault','makeDir','failed','writeFile','__importDefault','completedDate','runJob','utf-8','slice','NotFoundError','../../../core/errors/not-found.error','JOB_LOG_DETAILS_NAME','maskingFolderPath','isExistsPath','../../../constants/job','17956CNRxau','toString','../../shared/utils/job.utils','473865vyEQgF','path','539379bsgpEf','MANIFEST_FILENAME'];a81_0x2603=function(){return _0x27f31f;};return a81_0x2603();}'use strict';var __createBinding=this&&this['__createBinding']||(Object[a81_0x1f5124(0x108)]?function(_0x32ea3e,_0x21178d,_0x9b03a6,_0x5587aa){const _0x1565c7=a81_0x1f5124;if(_0x5587aa===undefined)_0x5587aa=_0x9b03a6;var _0x490659=Object[_0x1565c7(0x110)](_0x21178d,_0x9b03a6);(!_0x490659||(_0x1565c7(0xfd)in _0x490659?!_0x21178d[_0x1565c7(0x113)]:_0x490659['writable']||_0x490659['configurable']))&&(_0x490659={'enumerable':!![],'get':function(){return _0x21178d[_0x9b03a6];}}),Object[_0x1565c7(0x115)](_0x32ea3e,_0x5587aa,_0x490659);}:function(_0x4ab9e9,_0x8b378b,_0x5cd9e7,_0x29f3f2){if(_0x29f3f2===undefined)_0x29f3f2=_0x5cd9e7;_0x4ab9e9[_0x29f3f2]=_0x8b378b[_0x5cd9e7];}),__setModuleDefault=this&&this[a81_0x1f5124(0x118)]||(Object[a81_0x1f5124(0x108)]?function(_0x33cf9e,_0xd0e82f){const _0x476182=a81_0x1f5124;Object['defineProperty'](_0x33cf9e,_0x476182(0xf2),{'enumerable':!![],'value':_0xd0e82f});}:function(_0x3ff48e,_0x11bf0c){_0x3ff48e['default']=_0x11bf0c;}),__importStar=this&&this[a81_0x1f5124(0xfe)]||function(_0x1840bc){const _0x164f9b=a81_0x1f5124;if(_0x1840bc&&_0x1840bc[_0x164f9b(0x113)])return _0x1840bc;var _0x5f460f={};if(_0x1840bc!=null){for(var _0x378e1a in _0x1840bc)if(_0x378e1a!=='default'&&Object['prototype'][_0x164f9b(0xf4)]['call'](_0x1840bc,_0x378e1a))__createBinding(_0x5f460f,_0x1840bc,_0x378e1a);}return __setModuleDefault(_0x5f460f,_0x1840bc),_0x5f460f;},__importDefault=this&&this[a81_0x1f5124(0x11c)]||function(_0x210cd1){const _0x5c29d7=a81_0x1f5124;return _0x210cd1&&_0x210cd1[_0x5c29d7(0x113)]?_0x210cd1:{'default':_0x210cd1};};Object[a81_0x1f5124(0x115)](exports,a81_0x1f5124(0x113),{'value':!![]}),exports[a81_0x1f5124(0x109)]=void 0x0;const path_1=__importStar(require(a81_0x1f5124(0x12b))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require('fs/promises'),logger_job_state_1=require(a81_0x1f5124(0x104)),logger_enums_1=require(a81_0x1f5124(0x131)),sync_1=require(a81_0x1f5124(0x117)),utils_1=require(a81_0x1f5124(0x101)),not_found_error_1=require(a81_0x1f5124(0x122)),job_1=require(a81_0x1f5124(0x126)),job_utils_1=__importDefault(require(a81_0x1f5124(0x129))),constants_1=require(a81_0x1f5124(0xf5)),path_2=require(a81_0x1f5124(0xfb));class MaskingService{static async[a81_0x1f5124(0xee)](_0x237c3c){const _0x339eff=a81_0x1f5124,_0x4d4f12=job_utils_1[_0x339eff(0xf2)][_0x339eff(0x12f)](),_0x2a0613=(0x0,path_1['join'])(MaskingService['maskingFolderPath'],_0x4d4f12);await(0x0,fs_utils_1[_0x339eff(0x119)])(_0x2a0613),await(0x0,promises_1[_0x339eff(0x11b)])(_0x2a0613+'/'+job_1[_0x339eff(0x12d)],JSON[_0x339eff(0x10a)]({'details':_0x237c3c}));const _0x4dee70=await new logger_job_state_1['LoggerJobState'](_0x2a0613,_0x4d4f12)[_0x339eff(0x106)]([]);await _0x4dee70[_0x339eff(0xfc)]();const _0x2d4357=path_1['default'][_0x339eff(0xeb)](__dirname,job_1['JOB_PATH']);return job_utils_1['default'][_0x339eff(0x11e)](_0x2d4357,{'jobStorePath':_0x2a0613,'jobId':_0x4d4f12})[_0x339eff(0x10c)](_0x231af5=>this[_0x339eff(0x130)](_0x2a0613,_0x4d4f12,_0x231af5)),{'jobId':_0x4d4f12};}static async[a81_0x1f5124(0x10b)](_0x1f9229,_0x51da1a){const _0x47d615=a81_0x1f5124,_0x2ac47b=await job_utils_1[_0x47d615(0xf2)]['getJobsIds'](MaskingService['maskingFolderPath']),_0x5eac08=await job_utils_1[_0x47d615(0xf2)][_0x47d615(0xf6)](MaskingService[_0x47d615(0x124)],_0x2ac47b),_0x3c70f7=_0x5eac08[_0x47d615(0x120)](_0x51da1a,_0x51da1a+_0x1f9229),_0x2e0ff5=[];for(const _0x2d9ecf of _0x3c70f7){const _0xee6e15=await this['getJobState'](_0x2d9ecf,![]);_0x2e0ff5[_0x47d615(0xf8)](_0xee6e15);}return _0x2e0ff5;}static async['getJobState'](_0x2026c8,_0x30c4e4){const _0x51124e=a81_0x1f5124,_0x28df1e=await this[_0x51124e(0x102)](_0x2026c8,job_1[_0x51124e(0x100)],constants_1[_0x51124e(0x10e)]),_0x403bd9=JSON[_0x51124e(0x10d)](_0x28df1e),_0x93f8dc={'id':_0x403bd9['id'],'status':_0x403bd9['status'],'createdDate':_0x403bd9['createdDate'],'completedDate':_0x403bd9[_0x51124e(0x11d)],'successful':_0x403bd9[_0x51124e(0xfa)],'failed':_0x403bd9[_0x51124e(0x11a)]};return _0x30c4e4?_0x403bd9:_0x93f8dc;}static async[a81_0x1f5124(0xf3)](_0x2f0948){const _0x18a4eb=a81_0x1f5124,_0x153cb4=await this[_0x18a4eb(0x102)](_0x2f0948,job_1[_0x18a4eb(0xf9)],constants_1[_0x18a4eb(0x123)]);return(0x0,sync_1[_0x18a4eb(0x10d)])(_0x153cb4,{'columns':!![]});}static async[a81_0x1f5124(0x102)](_0x1ff5fc,_0x50a2b0,_0x3df74a){const _0x1b1b40=a81_0x1f5124,_0x4c18a4=(0x0,path_1[_0x1b1b40(0xeb)])(MaskingService['maskingFolderPath'],_0x1ff5fc),_0x3cc83e=(0x0,path_1['join'])(_0x4c18a4,_0x50a2b0);if(!await utils_1[_0x1b1b40(0xef)][_0x1b1b40(0x125)](_0x4c18a4))throw new not_found_error_1[(_0x1b1b40(0x121))](_0x1b1b40(0x105));if(!await utils_1['FsUtils'][_0x1b1b40(0x125)](_0x3cc83e))throw new not_found_error_1[(_0x1b1b40(0x121))](_0x3df74a+_0x1b1b40(0xf7));return(0x0,promises_1[_0x1b1b40(0xed)])(_0x3cc83e,{'encoding':_0x1b1b40(0x11f)});}static async[a81_0x1f5124(0x130)](_0x2d5a38,_0x214580,_0x4e1f9b){const _0x35c073=a81_0x1f5124,_0xccd7af=await new logger_job_state_1['LoggerJobState'](_0x2d5a38,_0x214580)[_0x35c073(0x106)]([]);_0xccd7af['setJobStatus'](logger_enums_1[_0x35c073(0x114)][_0x35c073(0xec)]),_0xccd7af[_0x35c073(0x107)](_0x4e1f9b['message']),await _0xccd7af[_0x35c073(0xfc)]();}}exports[a81_0x1f5124(0x109)]=MaskingService,MaskingService[a81_0x1f5124(0x124)]=path_1[a81_0x1f5124(0xf2)][a81_0x1f5124(0xeb)](path_2[a81_0x1f5124(0x112)],constants_1[a81_0x1f5124(0x10f)]);