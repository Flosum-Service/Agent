const a81_0x52c1ef=a81_0x13e5;(function(_0x218ea7,_0x17ff98){const _0x1eb254=a81_0x13e5,_0x1f95db=_0x218ea7();while(!![]){try{const _0x5aed95=-parseInt(_0x1eb254(0x203))/0x1*(-parseInt(_0x1eb254(0x22a))/0x2)+parseInt(_0x1eb254(0x227))/0x3+parseInt(_0x1eb254(0x1fb))/0x4+-parseInt(_0x1eb254(0x1fc))/0x5*(-parseInt(_0x1eb254(0x1e5))/0x6)+parseInt(_0x1eb254(0x1f7))/0x7*(parseInt(_0x1eb254(0x226))/0x8)+parseInt(_0x1eb254(0x21e))/0x9+-parseInt(_0x1eb254(0x1f4))/0xa;if(_0x5aed95===_0x17ff98)break;else _0x1f95db['push'](_0x1f95db['shift']());}catch(_0x200e68){_0x1f95db['push'](_0x1f95db['shift']());}}}(a81_0x78cd,0x5ff51));const a81_0x1fb59f=(function(){let _0x25fb24=!![];return function(_0xa5a949,_0x1cadd1){const _0x2b0c0f=_0x25fb24?function(){const _0x3a31c4=a81_0x13e5;if(_0x1cadd1){const _0xd85014=_0x1cadd1[_0x3a31c4(0x20d)](_0xa5a949,arguments);return _0x1cadd1=null,_0xd85014;}}:function(){};return _0x25fb24=![],_0x2b0c0f;};}()),a81_0xb4b038=a81_0x1fb59f(this,function(){const _0x4b9bce=a81_0x13e5;return a81_0xb4b038[_0x4b9bce(0x205)]()[_0x4b9bce(0x223)]('(((.+)+)+)+$')[_0x4b9bce(0x205)]()['constructor'](a81_0xb4b038)['search'](_0x4b9bce(0x22d));});a81_0xb4b038();'use strict';var __createBinding=this&&this[a81_0x52c1ef(0x21a)]||(Object[a81_0x52c1ef(0x21b)]?function(_0x23645f,_0x16fac6,_0x4c1a78,_0x9dba68){const _0x398a0f=a81_0x52c1ef;if(_0x9dba68===undefined)_0x9dba68=_0x4c1a78;var _0x2f5788=Object[_0x398a0f(0x1ea)](_0x16fac6,_0x4c1a78);(!_0x2f5788||(_0x398a0f(0x1f0)in _0x2f5788?!_0x16fac6['__esModule']:_0x2f5788[_0x398a0f(0x213)]||_0x2f5788[_0x398a0f(0x20f)]))&&(_0x2f5788={'enumerable':!![],'get':function(){return _0x16fac6[_0x4c1a78];}}),Object['defineProperty'](_0x23645f,_0x9dba68,_0x2f5788);}:function(_0x37a31e,_0x5cf123,_0x17f779,_0x2852d9){if(_0x2852d9===undefined)_0x2852d9=_0x17f779;_0x37a31e[_0x2852d9]=_0x5cf123[_0x17f779];}),__setModuleDefault=this&&this[a81_0x52c1ef(0x218)]||(Object[a81_0x52c1ef(0x21b)]?function(_0x5dd1f4,_0x12e917){const _0x40e232=a81_0x52c1ef;Object[_0x40e232(0x1ec)](_0x5dd1f4,_0x40e232(0x202),{'enumerable':!![],'value':_0x12e917});}:function(_0x23f090,_0x580c1c){const _0x12091a=a81_0x52c1ef;_0x23f090[_0x12091a(0x202)]=_0x580c1c;}),__importStar=this&&this[a81_0x52c1ef(0x1f8)]||function(_0x42e748){const _0x43ba38=a81_0x52c1ef;if(_0x42e748&&_0x42e748['__esModule'])return _0x42e748;var _0x27d231={};if(_0x42e748!=null){for(var _0x2c5a87 in _0x42e748)if(_0x2c5a87!=='default'&&Object['prototype'][_0x43ba38(0x212)]['call'](_0x42e748,_0x2c5a87))__createBinding(_0x27d231,_0x42e748,_0x2c5a87);}return __setModuleDefault(_0x27d231,_0x42e748),_0x27d231;},__importDefault=this&&this[a81_0x52c1ef(0x1f1)]||function(_0x1b0f23){const _0x517e85=a81_0x52c1ef;return _0x1b0f23&&_0x1b0f23[_0x517e85(0x214)]?_0x1b0f23:{'default':_0x1b0f23};};Object['defineProperty'](exports,a81_0x52c1ef(0x214),{'value':!![]}),exports[a81_0x52c1ef(0x1ff)]=void 0x0;function a81_0x78cd(){const _0x1169d8=['get','__importDefault','../constants','runJob','16631150wVziJu','completedDate','JOB_LOG_STATE_FILENAME','2149UwsjKj','__importStar','slice','DATA_MASKING_FOLDER_NAME','1412756akaSMN','6725dbxgIH','push','fs/promises','MaskingService','logErrorStartJob','../../../constants/job','default','955oeVcgp','setJobStatus','toString','../../../configs/path','../../shared/utils/fs.utils','getJobDetails','JobStatus','dataPath','failed','@flosum/utils','apply','maskingFolderPath','configurable','message','FAILED','hasOwnProperty','writable','__esModule','createMaskingJob','join','Job\x20Id\x20not\x20found.','__setModuleDefault','isExistsPath','__createBinding','create','utf-8','getJobsIds','3090861hkITrI','../job/classes/logger/logger-job-state','getLog','getJobs','LoggerJobState','search','JOB_LOG_DETAILS_FILENAME','readFile','7464trhiJG','712251XTBEvi','makeDir','FsUtils','584IaETdG','stringify','path','(((.+)+)+)+$','2484PavoFy','parse','../job/enums/logger.enums','JOB_PATH','\x20not\x20found.','getOwnPropertyDescriptor','setJobError','defineProperty','getJobState','../../shared/utils/job.utils','sortJobsIds'];a81_0x78cd=function(){return _0x1169d8;};return a81_0x78cd();}function a81_0x13e5(_0x4d70dd,_0x577f01){const _0x3c4655=a81_0x78cd();return a81_0x13e5=function(_0xb4b038,_0x1fb59f){_0xb4b038=_0xb4b038-0x1e5;let _0x78cd44=_0x3c4655[_0xb4b038];return _0x78cd44;},a81_0x13e5(_0x4d70dd,_0x577f01);}const path_1=__importStar(require(a81_0x52c1ef(0x22c))),fs_utils_1=require(a81_0x52c1ef(0x207)),promises_1=require(a81_0x52c1ef(0x1fe)),logger_job_state_1=require(a81_0x52c1ef(0x21f)),logger_enums_1=require(a81_0x52c1ef(0x1e7)),sync_1=require('csv-parse/sync'),utils_1=require(a81_0x52c1ef(0x20c)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a81_0x52c1ef(0x201)),job_utils_1=__importDefault(require(a81_0x52c1ef(0x1ee))),constants_1=require(a81_0x52c1ef(0x1f2)),path_2=require(a81_0x52c1ef(0x206));class MaskingService{static async[a81_0x52c1ef(0x215)](_0x39d54c){const _0x3ce195=a81_0x52c1ef,_0x1c81f6=job_utils_1[_0x3ce195(0x202)]['generateJobId'](),_0x1488a3=(0x0,path_1[_0x3ce195(0x216)])(MaskingService['maskingFolderPath'],_0x1c81f6);await(0x0,fs_utils_1[_0x3ce195(0x228)])(_0x1488a3),await(0x0,promises_1['writeFile'])(_0x1488a3+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x3ce195(0x22b)]({'details':_0x39d54c}));const _0x2202ff=await new logger_job_state_1[(_0x3ce195(0x222))](_0x1488a3,_0x1c81f6)['init']([]);await _0x2202ff['kill']();const _0x1da9ad=path_1[_0x3ce195(0x202)]['join'](__dirname,job_1[_0x3ce195(0x1e8)]);return job_utils_1[_0x3ce195(0x202)][_0x3ce195(0x1f3)](_0x1da9ad,{'jobStorePath':_0x1488a3,'jobId':_0x1c81f6})['catch'](_0x41593a=>this[_0x3ce195(0x200)](_0x1488a3,_0x1c81f6,_0x41593a)),{'jobId':_0x1c81f6};}static async[a81_0x52c1ef(0x221)](_0x40a10a,_0xfb4103){const _0x4cd535=a81_0x52c1ef,_0x45c500=await job_utils_1['default'][_0x4cd535(0x21d)](MaskingService[_0x4cd535(0x20e)]),_0x278168=await job_utils_1[_0x4cd535(0x202)][_0x4cd535(0x1ef)](MaskingService['maskingFolderPath'],_0x45c500),_0x61abd0=_0x278168[_0x4cd535(0x1f9)](_0xfb4103,_0xfb4103+_0x40a10a),_0x4dc850=[];for(const _0x24c5ba of _0x61abd0){const _0x6285a9=await this[_0x4cd535(0x1ed)](_0x24c5ba,![]);_0x4dc850[_0x4cd535(0x1fd)](_0x6285a9);}return _0x4dc850;}static async[a81_0x52c1ef(0x1ed)](_0x7a409c,_0x2971fd){const _0x558b59=a81_0x52c1ef,_0x58859a=await this[_0x558b59(0x220)](_0x7a409c,job_1[_0x558b59(0x1f6)],constants_1['JOB_LOG_STATE_NAME']),_0x26b8d7=JSON[_0x558b59(0x1e6)](_0x58859a),_0x4c6a23={'id':_0x26b8d7['id'],'status':_0x26b8d7['status'],'createdDate':_0x26b8d7['createdDate'],'completedDate':_0x26b8d7[_0x558b59(0x1f5)],'successful':_0x26b8d7['successful'],'failed':_0x26b8d7[_0x558b59(0x20b)]};return _0x2971fd?_0x26b8d7:_0x4c6a23;}static async[a81_0x52c1ef(0x208)](_0x13333b){const _0x231577=a81_0x52c1ef,_0x1e4091=await this[_0x231577(0x220)](_0x13333b,job_1[_0x231577(0x224)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1['parse'])(_0x1e4091,{'columns':!![]});}static async[a81_0x52c1ef(0x220)](_0x47c314,_0x3b3b31,_0x34dbb6){const _0x3074b0=a81_0x52c1ef,_0x4b289d=(0x0,path_1[_0x3074b0(0x216)])(MaskingService[_0x3074b0(0x20e)],_0x47c314),_0x121967=(0x0,path_1['join'])(_0x4b289d,_0x3b3b31);if(!await utils_1['FsUtils'][_0x3074b0(0x219)](_0x4b289d))throw new not_found_error_1['NotFoundError'](_0x3074b0(0x217));if(!await utils_1[_0x3074b0(0x229)]['isExistsPath'](_0x121967))throw new not_found_error_1['NotFoundError'](_0x34dbb6+_0x3074b0(0x1e9));return(0x0,promises_1[_0x3074b0(0x225)])(_0x121967,{'encoding':_0x3074b0(0x21c)});}static async[a81_0x52c1ef(0x200)](_0x190a89,_0x501a39,_0xf1a02b){const _0x3ae284=a81_0x52c1ef,_0x24702d=await new logger_job_state_1[(_0x3ae284(0x222))](_0x190a89,_0x501a39)['init']([]);_0x24702d[_0x3ae284(0x204)](logger_enums_1[_0x3ae284(0x209)][_0x3ae284(0x211)]),_0x24702d[_0x3ae284(0x1eb)](_0xf1a02b[_0x3ae284(0x210)]),await _0x24702d['kill']();}}exports[a81_0x52c1ef(0x1ff)]=MaskingService,MaskingService[a81_0x52c1ef(0x20e)]=path_1[a81_0x52c1ef(0x202)][a81_0x52c1ef(0x216)](path_2[a81_0x52c1ef(0x20a)],constants_1[a81_0x52c1ef(0x1fa)]);