function a98_0x27d8(_0x1a7965,_0x47d690){const _0x1bfa98=a98_0x3779();return a98_0x27d8=function(_0x196a70,_0x13a264){_0x196a70=_0x196a70-0x1e1;let _0x377960=_0x1bfa98[_0x196a70];return _0x377960;},a98_0x27d8(_0x1a7965,_0x47d690);}const a98_0x544619=a98_0x27d8;(function(_0x11e3f6,_0xe72276){const _0xba372=a98_0x27d8,_0x38920b=_0x11e3f6();while(!![]){try{const _0x33a0b8=parseInt(_0xba372(0x218))/0x1*(parseInt(_0xba372(0x1ff))/0x2)+parseInt(_0xba372(0x215))/0x3+-parseInt(_0xba372(0x1e8))/0x4+parseInt(_0xba372(0x223))/0x5*(parseInt(_0xba372(0x203))/0x6)+parseInt(_0xba372(0x217))/0x7*(parseInt(_0xba372(0x226))/0x8)+-parseInt(_0xba372(0x200))/0x9*(-parseInt(_0xba372(0x1fa))/0xa)+-parseInt(_0xba372(0x221))/0xb*(parseInt(_0xba372(0x22e))/0xc);if(_0x33a0b8===_0xe72276)break;else _0x38920b['push'](_0x38920b['shift']());}catch(_0x231792){_0x38920b['push'](_0x38920b['shift']());}}}(a98_0x3779,0x19056));const a98_0x13a264=(function(){let _0x67f99c=!![];return function(_0xf4ec53,_0x1e6b57){const _0x32db28=_0x67f99c?function(){if(_0x1e6b57){const _0x5376bc=_0x1e6b57['apply'](_0xf4ec53,arguments);return _0x1e6b57=null,_0x5376bc;}}:function(){};return _0x67f99c=![],_0x32db28;};}()),a98_0x196a70=a98_0x13a264(this,function(){const _0x2ab601=a98_0x27d8;return a98_0x196a70[_0x2ab601(0x21c)]()[_0x2ab601(0x216)](_0x2ab601(0x20e))['toString']()[_0x2ab601(0x1e2)](a98_0x196a70)[_0x2ab601(0x216)]('(((.+)+)+)+$');});a98_0x196a70();'use strict';var __createBinding=this&&this[a98_0x544619(0x1f2)]||(Object['create']?function(_0x342a7d,_0x1ce6bb,_0x4d4068,_0x164be9){const _0xbf80=a98_0x544619;if(_0x164be9===undefined)_0x164be9=_0x4d4068;var _0x4a10f7=Object[_0xbf80(0x1e3)](_0x1ce6bb,_0x4d4068);(!_0x4a10f7||('get'in _0x4a10f7?!_0x1ce6bb[_0xbf80(0x1e4)]:_0x4a10f7[_0xbf80(0x1e7)]||_0x4a10f7[_0xbf80(0x1f9)]))&&(_0x4a10f7={'enumerable':!![],'get':function(){return _0x1ce6bb[_0x4d4068];}}),Object[_0xbf80(0x20a)](_0x342a7d,_0x164be9,_0x4a10f7);}:function(_0x7380c8,_0x2fa75f,_0x7e5704,_0x2d0ed5){if(_0x2d0ed5===undefined)_0x2d0ed5=_0x7e5704;_0x7380c8[_0x2d0ed5]=_0x2fa75f[_0x7e5704];}),__setModuleDefault=this&&this[a98_0x544619(0x1ef)]||(Object[a98_0x544619(0x21a)]?function(_0x361df2,_0x566d7f){const _0xa13724=a98_0x544619;Object[_0xa13724(0x20a)](_0x361df2,_0xa13724(0x1f1),{'enumerable':!![],'value':_0x566d7f});}:function(_0x1a64e3,_0x3c00ba){_0x1a64e3['default']=_0x3c00ba;}),__importStar=this&&this['__importStar']||function(_0x325a0b){const _0x34b7f3=a98_0x544619;if(_0x325a0b&&_0x325a0b[_0x34b7f3(0x1e4)])return _0x325a0b;var _0x31970c={};if(_0x325a0b!=null){for(var _0x3a5775 in _0x325a0b)if(_0x3a5775!=='default'&&Object['prototype'][_0x34b7f3(0x1f5)][_0x34b7f3(0x201)](_0x325a0b,_0x3a5775))__createBinding(_0x31970c,_0x325a0b,_0x3a5775);}return __setModuleDefault(_0x31970c,_0x325a0b),_0x31970c;},__importDefault=this&&this[a98_0x544619(0x1fe)]||function(_0x1f0e90){return _0x1f0e90&&_0x1f0e90['__esModule']?_0x1f0e90:{'default':_0x1f0e90};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a98_0x544619(0x1ed)]=void 0x0;const path_1=__importStar(require(a98_0x544619(0x22b))),fs_utils_1=require(a98_0x544619(0x1e9)),promises_1=require(a98_0x544619(0x211)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a98_0x544619(0x1e6)),sync_1=require(a98_0x544619(0x1f3)),utils_1=require(a98_0x544619(0x224)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a98_0x544619(0x202)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a98_0x544619(0x22c)),path_2=require('../../../configs/path');class MaskingService{static async[a98_0x544619(0x1ec)](_0x5242ec){const _0x2a7dde=a98_0x544619,_0x1e8dbf=job_utils_1[_0x2a7dde(0x1f1)][_0x2a7dde(0x214)](),_0x480d18=(0x0,path_1[_0x2a7dde(0x21d)])(MaskingService[_0x2a7dde(0x1e1)],_0x1e8dbf);await(0x0,fs_utils_1[_0x2a7dde(0x20c)])(_0x480d18),await(0x0,promises_1[_0x2a7dde(0x219)])(_0x480d18+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x2a7dde(0x207)]({'details':_0x5242ec}));const _0x2d8922=await new logger_job_state_1[(_0x2a7dde(0x205))](_0x480d18,_0x1e8dbf)[_0x2a7dde(0x225)]([]);await _0x2d8922[_0x2a7dde(0x1f6)]();const _0x1f75ec=path_1[_0x2a7dde(0x1f1)][_0x2a7dde(0x21d)](__dirname,job_1[_0x2a7dde(0x22f)]);return job_utils_1[_0x2a7dde(0x1f1)][_0x2a7dde(0x213)](_0x1f75ec,{'jobStorePath':_0x480d18,'jobId':_0x1e8dbf})[_0x2a7dde(0x1eb)](_0x427bb6=>this[_0x2a7dde(0x22d)](_0x480d18,_0x1e8dbf,_0x427bb6)),{'jobId':_0x1e8dbf};}static async[a98_0x544619(0x210)](_0x28f81f,_0xe29069){const _0xa0396f=a98_0x544619,_0x4363a0=await job_utils_1[_0xa0396f(0x1f1)][_0xa0396f(0x229)](MaskingService[_0xa0396f(0x1e1)]),_0x499c70=await job_utils_1['default'][_0xa0396f(0x206)](MaskingService[_0xa0396f(0x1e1)],_0x4363a0),_0x7c4c89=_0x499c70[_0xa0396f(0x1f7)](_0xe29069,_0xe29069+_0x28f81f),_0x1dea12=[];for(const _0x4dfcf2 of _0x7c4c89){const _0x50fb2d=await this[_0xa0396f(0x227)](_0x4dfcf2,![]);_0x1dea12['push'](_0x50fb2d);}return _0x1dea12;}static async[a98_0x544619(0x227)](_0x336982,_0x5096a1){const _0x25f07a=a98_0x544619,_0x1374a5=await this[_0x25f07a(0x1ea)](_0x336982,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x25f07a(0x220)]),_0x11655f=JSON[_0x25f07a(0x1e5)](_0x1374a5),_0x43c504={'id':_0x11655f['id'],'status':_0x11655f[_0x25f07a(0x1fd)],'createdDate':_0x11655f[_0x25f07a(0x204)],'completedDate':_0x11655f[_0x25f07a(0x21e)],'successful':_0x11655f[_0x25f07a(0x21f)],'failed':_0x11655f[_0x25f07a(0x228)]};return _0x5096a1?_0x11655f:_0x43c504;}static async['getJobDetails'](_0x5a7bfd){const _0x619158=a98_0x544619,_0x506e44=await this[_0x619158(0x1ea)](_0x5a7bfd,job_1[_0x619158(0x21b)],constants_1[_0x619158(0x1fb)]);return(0x0,sync_1[_0x619158(0x1e5)])(_0x506e44,{'columns':!![]});}static async[a98_0x544619(0x1ea)](_0x3d3db3,_0x4e5dba,_0x114811){const _0x426c35=a98_0x544619,_0x32cd38=(0x0,path_1[_0x426c35(0x21d)])(MaskingService[_0x426c35(0x1e1)],_0x3d3db3),_0x2f7829=(0x0,path_1[_0x426c35(0x21d)])(_0x32cd38,_0x4e5dba);if(!await utils_1[_0x426c35(0x212)][_0x426c35(0x1f0)](_0x32cd38))throw new not_found_error_1[(_0x426c35(0x209))](_0x426c35(0x1f4));if(!await utils_1[_0x426c35(0x212)][_0x426c35(0x1f0)](_0x2f7829))throw new not_found_error_1['NotFoundError'](_0x114811+_0x426c35(0x20b));return(0x0,promises_1['readFile'])(_0x2f7829,{'encoding':_0x426c35(0x1fc)});}static async['logErrorStartJob'](_0x14655b,_0x18c3c8,_0x9f9b8){const _0x406c22=a98_0x544619,_0x2034a8=await new logger_job_state_1[(_0x406c22(0x205))](_0x14655b,_0x18c3c8)[_0x406c22(0x225)]([]);_0x2034a8[_0x406c22(0x22a)](logger_enums_1[_0x406c22(0x20f)][_0x406c22(0x208)]),_0x2034a8[_0x406c22(0x1ee)](_0x9f9b8[_0x406c22(0x20d)]),await _0x2034a8[_0x406c22(0x1f6)]();}}function a98_0x3779(){const _0x3ddd8b=['getJobState','failed','getJobsIds','setJobStatus','path','../constants','logErrorStartJob','920604BEOLwl','JOB_PATH','maskingFolderPath','constructor','getOwnPropertyDescriptor','__esModule','parse','../job/enums/logger.enums','writable','17932CjHhCX','../../shared/utils/fs.utils','getLog','catch','createMaskingJob','MaskingService','setJobError','__setModuleDefault','isExistsPath','default','__createBinding','csv-parse/sync','Job\x20Id\x20not\x20found.','hasOwnProperty','kill','slice','dataPath','configurable','56020miiTPQ','JOB_LOG_DETAILS_NAME','utf-8','status','__importDefault','4tDWFPj','54tFRoza','call','../../../constants/job','60MVheep','createdDate','LoggerJobState','sortJobsIds','stringify','FAILED','NotFoundError','defineProperty','\x20not\x20found.','makeDir','message','(((.+)+)+)+$','JobStatus','getJobs','fs/promises','FsUtils','runJob','generateJobId','488520TzIebj','search','6111atIkeb','3870XDcNxO','writeFile','create','JOB_LOG_DETAILS_FILENAME','toString','join','completedDate','successful','JOB_LOG_STATE_NAME','44irgAHS','DATA_MASKING_FOLDER_NAME','32800mAOguH','@flosum/utils','init','1320rUZOyJ'];a98_0x3779=function(){return _0x3ddd8b;};return a98_0x3779();}exports[a98_0x544619(0x1ed)]=MaskingService,MaskingService[a98_0x544619(0x1e1)]=path_1[a98_0x544619(0x1f1)][a98_0x544619(0x21d)](path_2[a98_0x544619(0x1f8)],constants_1[a98_0x544619(0x222)]);