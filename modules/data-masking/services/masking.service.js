const a80_0x487224=a80_0x5bed;function a80_0x4471(){const _0x3c7fb6=['MaskingService','NotFoundError','isExistsPath','JOB_LOG_DETAILS_FILENAME','725676qbYarA','create','path','stringify','search','MANIFEST_FILENAME','successful','639736eCTKdD','setJobStatus','fs/promises','1681498JNnGmw','message','LoggerJobState','__importDefault','__setModuleDefault','8270008KgRfFF','JOB_LOG_DETAILS_NAME','__esModule','207auBoAa','join','getJobState','default','status','892427HYnKNB','FAILED','constructor','__importStar','toString','csv-parse/sync','catch','kill','Job\x20Id\x20not\x20found.','\x20not\x20found.','../job/enums/logger.enums','maskingFolderPath','12kdoHGG','apply','logErrorStartJob','getLog','prototype','sortJobsIds','185070QWkTuu','../../../configs/path','utf-8','../job/classes/logger/logger-job-state','defineProperty','init','getJobs','setJobError','completedDate','createdDate','../../../constants/job','1489230sLFeqV','readFile','writable','__createBinding','dataPath','configurable','slice','push','parse','@flosum/utils','getOwnPropertyDescriptor','getJobDetails','../../shared/utils/job.utils','2EIQUjh','hasOwnProperty','JOB_PATH','writeFile','JOB_LOG_STATE_NAME','(((.+)+)+)+$','failed'];a80_0x4471=function(){return _0x3c7fb6;};return a80_0x4471();}(function(_0xd761c3,_0x2ce722){const _0x410940=a80_0x5bed,_0x48d3a1=_0xd761c3();while(!![]){try{const _0x52c9ed=-parseInt(_0x410940(0xe4))/0x1*(parseInt(_0x410940(0x10e))/0x2)+-parseInt(_0x410940(0xcd))/0x3+parseInt(_0x410940(0xd4))/0x4+-parseInt(_0x410940(0xf6))/0x5+-parseInt(_0x410940(0xf0))/0x6*(parseInt(_0x410940(0xd7))/0x7)+-parseInt(_0x410940(0xdc))/0x8+-parseInt(_0x410940(0xdf))/0x9*(-parseInt(_0x410940(0x101))/0xa);if(_0x52c9ed===_0x2ce722)break;else _0x48d3a1['push'](_0x48d3a1['shift']());}catch(_0x2589fc){_0x48d3a1['push'](_0x48d3a1['shift']());}}}(a80_0x4471,0xdba43));const a80_0xd6cd9=(function(){let _0x5c3d23=!![];return function(_0x2f91c9,_0x51716e){const _0x1df37f=_0x5c3d23?function(){const _0x4a9eb0=a80_0x5bed;if(_0x51716e){const _0x47efc0=_0x51716e[_0x4a9eb0(0xf1)](_0x2f91c9,arguments);return _0x51716e=null,_0x47efc0;}}:function(){};return _0x5c3d23=![],_0x1df37f;};}()),a80_0x4c49f8=a80_0xd6cd9(this,function(){const _0x1c4d56=a80_0x5bed;return a80_0x4c49f8[_0x1c4d56(0xe8)]()[_0x1c4d56(0xd1)](_0x1c4d56(0x113))['toString']()[_0x1c4d56(0xe6)](a80_0x4c49f8)['search'](_0x1c4d56(0x113));});a80_0x4c49f8();function a80_0x5bed(_0x458530,_0x1906fd){const _0x5e1d2b=a80_0x4471();return a80_0x5bed=function(_0x4c49f8,_0xd6cd9){_0x4c49f8=_0x4c49f8-0xcb;let _0x44711d=_0x5e1d2b[_0x4c49f8];return _0x44711d;},a80_0x5bed(_0x458530,_0x1906fd);}'use strict';var __createBinding=this&&this[a80_0x487224(0x104)]||(Object[a80_0x487224(0xce)]?function(_0x45a4a4,_0x140d45,_0x47570d,_0x48893b){const _0xbb15da=a80_0x487224;if(_0x48893b===undefined)_0x48893b=_0x47570d;var _0x4c0a90=Object[_0xbb15da(0x10b)](_0x140d45,_0x47570d);(!_0x4c0a90||('get'in _0x4c0a90?!_0x140d45[_0xbb15da(0xde)]:_0x4c0a90[_0xbb15da(0x103)]||_0x4c0a90[_0xbb15da(0x106)]))&&(_0x4c0a90={'enumerable':!![],'get':function(){return _0x140d45[_0x47570d];}}),Object[_0xbb15da(0xfa)](_0x45a4a4,_0x48893b,_0x4c0a90);}:function(_0x223f5d,_0x47459c,_0x1588cc,_0x4e2486){if(_0x4e2486===undefined)_0x4e2486=_0x1588cc;_0x223f5d[_0x4e2486]=_0x47459c[_0x1588cc];}),__setModuleDefault=this&&this[a80_0x487224(0xdb)]||(Object[a80_0x487224(0xce)]?function(_0x4735f8,_0x2182e7){const _0x5637ca=a80_0x487224;Object[_0x5637ca(0xfa)](_0x4735f8,_0x5637ca(0xe2),{'enumerable':!![],'value':_0x2182e7});}:function(_0x3dc258,_0x36d605){const _0x1e558e=a80_0x487224;_0x3dc258[_0x1e558e(0xe2)]=_0x36d605;}),__importStar=this&&this[a80_0x487224(0xe7)]||function(_0x51aaa2){const _0x5681cb=a80_0x487224;if(_0x51aaa2&&_0x51aaa2['__esModule'])return _0x51aaa2;var _0x1b8433={};if(_0x51aaa2!=null){for(var _0x45f041 in _0x51aaa2)if(_0x45f041!==_0x5681cb(0xe2)&&Object[_0x5681cb(0xf4)][_0x5681cb(0x10f)]['call'](_0x51aaa2,_0x45f041))__createBinding(_0x1b8433,_0x51aaa2,_0x45f041);}return __setModuleDefault(_0x1b8433,_0x51aaa2),_0x1b8433;},__importDefault=this&&this[a80_0x487224(0xda)]||function(_0x4efa02){return _0x4efa02&&_0x4efa02['__esModule']?_0x4efa02:{'default':_0x4efa02};};Object['defineProperty'](exports,a80_0x487224(0xde),{'value':!![]}),exports[a80_0x487224(0x115)]=void 0x0;const path_1=__importStar(require(a80_0x487224(0xcf))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a80_0x487224(0xd6)),logger_job_state_1=require(a80_0x487224(0xf9)),logger_enums_1=require(a80_0x487224(0xee)),sync_1=require(a80_0x487224(0xe9)),utils_1=require(a80_0x487224(0x10a)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require(a80_0x487224(0x100)),job_utils_1=__importDefault(require(a80_0x487224(0x10d))),constants_1=require('../constants'),path_2=require(a80_0x487224(0xf7));class MaskingService{static async['createMaskingJob'](_0x57d548){const _0x244df7=a80_0x487224,_0x588ac9=job_utils_1[_0x244df7(0xe2)]['generateJobId'](),_0x386c09=(0x0,path_1[_0x244df7(0xe0)])(MaskingService[_0x244df7(0xef)],_0x588ac9);await(0x0,fs_utils_1['makeDir'])(_0x386c09),await(0x0,promises_1[_0x244df7(0x111)])(_0x386c09+'/'+job_1[_0x244df7(0xd2)],JSON[_0x244df7(0xd0)]({'details':_0x57d548}));const _0x33f288=await new logger_job_state_1[(_0x244df7(0xd9))](_0x386c09,_0x588ac9)['init']([]);await _0x33f288[_0x244df7(0xeb)]();const _0x44281b=path_1['default'][_0x244df7(0xe0)](__dirname,job_1[_0x244df7(0x110)]);return job_utils_1[_0x244df7(0xe2)]['runJob'](_0x44281b,{'jobStorePath':_0x386c09,'jobId':_0x588ac9})[_0x244df7(0xea)](_0x43ccfc=>this[_0x244df7(0xf2)](_0x386c09,_0x588ac9,_0x43ccfc)),{'jobId':_0x588ac9};}static async[a80_0x487224(0xfc)](_0x2fa338,_0x113341){const _0x7e9992=a80_0x487224,_0x470edd=await job_utils_1['default']['getJobsIds'](MaskingService[_0x7e9992(0xef)]),_0x407809=await job_utils_1['default'][_0x7e9992(0xf5)](MaskingService[_0x7e9992(0xef)],_0x470edd),_0x140ad5=_0x407809[_0x7e9992(0x107)](_0x113341,_0x113341+_0x2fa338),_0x293c20=[];for(const _0x4c4570 of _0x140ad5){const _0x9d0757=await this[_0x7e9992(0xe1)](_0x4c4570,![]);_0x293c20[_0x7e9992(0x108)](_0x9d0757);}return _0x293c20;}static async[a80_0x487224(0xe1)](_0x203e50,_0x10068b){const _0x2a4f6e=a80_0x487224,_0xc1283d=await this[_0x2a4f6e(0xf3)](_0x203e50,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x2a4f6e(0x112)]),_0x17941=JSON[_0x2a4f6e(0x109)](_0xc1283d),_0x594477={'id':_0x17941['id'],'status':_0x17941[_0x2a4f6e(0xe3)],'createdDate':_0x17941[_0x2a4f6e(0xff)],'completedDate':_0x17941[_0x2a4f6e(0xfe)],'successful':_0x17941[_0x2a4f6e(0xd3)],'failed':_0x17941[_0x2a4f6e(0x114)]};return _0x10068b?_0x17941:_0x594477;}static async[a80_0x487224(0x10c)](_0x45a147){const _0x431b89=a80_0x487224,_0x52d229=await this[_0x431b89(0xf3)](_0x45a147,job_1[_0x431b89(0xcc)],constants_1[_0x431b89(0xdd)]);return(0x0,sync_1[_0x431b89(0x109)])(_0x52d229,{'columns':!![]});}static async[a80_0x487224(0xf3)](_0x38fa64,_0x174fcf,_0x3684aa){const _0x57a561=a80_0x487224,_0x5b967b=(0x0,path_1[_0x57a561(0xe0)])(MaskingService['maskingFolderPath'],_0x38fa64),_0x25f8b0=(0x0,path_1[_0x57a561(0xe0)])(_0x5b967b,_0x174fcf);if(!await utils_1['FsUtils'][_0x57a561(0xcb)](_0x5b967b))throw new not_found_error_1[(_0x57a561(0x116))](_0x57a561(0xec));if(!await utils_1['FsUtils'][_0x57a561(0xcb)](_0x25f8b0))throw new not_found_error_1['NotFoundError'](_0x3684aa+_0x57a561(0xed));return(0x0,promises_1[_0x57a561(0x102)])(_0x25f8b0,{'encoding':_0x57a561(0xf8)});}static async['logErrorStartJob'](_0x23de62,_0x56f2b4,_0x275f43){const _0x1110e9=a80_0x487224,_0x56b2d2=await new logger_job_state_1[(_0x1110e9(0xd9))](_0x23de62,_0x56f2b4)[_0x1110e9(0xfb)]([]);_0x56b2d2[_0x1110e9(0xd5)](logger_enums_1['JobStatus'][_0x1110e9(0xe5)]),_0x56b2d2[_0x1110e9(0xfd)](_0x275f43[_0x1110e9(0xd8)]),await _0x56b2d2[_0x1110e9(0xeb)]();}}exports[a80_0x487224(0x115)]=MaskingService,MaskingService[a80_0x487224(0xef)]=path_1['default'][a80_0x487224(0xe0)](path_2[a80_0x487224(0x105)],constants_1['DATA_MASKING_FOLDER_NAME']);