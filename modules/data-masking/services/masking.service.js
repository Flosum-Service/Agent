const a98_0x3af8a7=a98_0x2102;(function(_0x551b9b,_0x563b35){const _0x47db24=a98_0x2102,_0x2c6585=_0x551b9b();while(!![]){try{const _0x15bbed=-parseInt(_0x47db24(0x194))/0x1*(parseInt(_0x47db24(0x1af))/0x2)+-parseInt(_0x47db24(0x19c))/0x3*(parseInt(_0x47db24(0x1d8))/0x4)+-parseInt(_0x47db24(0x1d9))/0x5*(-parseInt(_0x47db24(0x1cd))/0x6)+-parseInt(_0x47db24(0x1ce))/0x7+-parseInt(_0x47db24(0x1a4))/0x8+parseInt(_0x47db24(0x1c8))/0x9*(-parseInt(_0x47db24(0x1a3))/0xa)+parseInt(_0x47db24(0x1d6))/0xb;if(_0x15bbed===_0x563b35)break;else _0x2c6585['push'](_0x2c6585['shift']());}catch(_0x25af13){_0x2c6585['push'](_0x2c6585['shift']());}}}(a98_0x34ce,0xc29fc));const a98_0x1ce50d=(function(){let _0x4b62cf=!![];return function(_0xc81a91,_0x475f21){const _0x4c35f0=_0x4b62cf?function(){const _0x5ac62c=a98_0x2102;if(_0x475f21){const _0x1b5745=_0x475f21[_0x5ac62c(0x1ad)](_0xc81a91,arguments);return _0x475f21=null,_0x1b5745;}}:function(){};return _0x4b62cf=![],_0x4c35f0;};}()),a98_0x193939=a98_0x1ce50d(this,function(){const _0x140e63=a98_0x2102;return a98_0x193939[_0x140e63(0x1c9)]()[_0x140e63(0x19b)](_0x140e63(0x1d3))[_0x140e63(0x1c9)]()[_0x140e63(0x1b5)](a98_0x193939)[_0x140e63(0x19b)](_0x140e63(0x1d3));});a98_0x193939();'use strict';function a98_0x34ce(){const _0x2d0ff2=['FAILED','../../../core/errors/not-found.error','push','dataPath','isExistsPath','readFile','path','runJob','csv-parse/sync','getJobsIds','JOB_LOG_STATE_FILENAME','../../../configs/path','NotFoundError','default','../constants','JOB_LOG_STATE_NAME','fs/promises','1953XKalyg','toString','completedDate','successful','prototype','438plxYLF','7161413OwyZYV','setJobStatus','DATA_MASKING_FOLDER_NAME','sortJobsIds','__esModule','(((.+)+)+)+$','../job/classes/logger/logger-job-state','slice','67706078YVzNNA','LoggerJobState','4dCttKZ','38435VpgUvg','writable','catch','stringify','Job\x20Id\x20not\x20found.','getJobs','get','__importStar','logErrorStartJob','32293lbnPGP','../../shared/utils/job.utils','JOB_LOG_DETAILS_NAME','getLog','generateJobId','createdDate','__importDefault','search','4229163xDWTrm','JOB_LOG_DETAILS_FILENAME','failed','message','call','kill','maskingFolderPath','71310Evhwcz','7502232QmNntE','join','__setModuleDefault','setJobError','MaskingService','defineProperty','parse','__createBinding','create','apply','createMaskingJob','62ukFezL','hasOwnProperty','utf-8','FsUtils','init','JobStatus','constructor','MANIFEST_FILENAME'];a98_0x34ce=function(){return _0x2d0ff2;};return a98_0x34ce();}var __createBinding=this&&this[a98_0x3af8a7(0x1ab)]||(Object[a98_0x3af8a7(0x1ac)]?function(_0x1ea404,_0xe76c10,_0x3e1bc1,_0x414cbd){const _0x5cbb5b=a98_0x3af8a7;if(_0x414cbd===undefined)_0x414cbd=_0x3e1bc1;var _0x47bc64=Object['getOwnPropertyDescriptor'](_0xe76c10,_0x3e1bc1);(!_0x47bc64||(_0x5cbb5b(0x1df)in _0x47bc64?!_0xe76c10[_0x5cbb5b(0x1d2)]:_0x47bc64[_0x5cbb5b(0x1da)]||_0x47bc64['configurable']))&&(_0x47bc64={'enumerable':!![],'get':function(){return _0xe76c10[_0x3e1bc1];}}),Object['defineProperty'](_0x1ea404,_0x414cbd,_0x47bc64);}:function(_0x46ea99,_0x359b69,_0x246775,_0x48c155){if(_0x48c155===undefined)_0x48c155=_0x246775;_0x46ea99[_0x48c155]=_0x359b69[_0x246775];}),__setModuleDefault=this&&this[a98_0x3af8a7(0x1a6)]||(Object[a98_0x3af8a7(0x1ac)]?function(_0x337a93,_0x391b20){const _0x20512d=a98_0x3af8a7;Object[_0x20512d(0x1a9)](_0x337a93,_0x20512d(0x1c4),{'enumerable':!![],'value':_0x391b20});}:function(_0x3793fa,_0x22541d){const _0x52aee9=a98_0x3af8a7;_0x3793fa[_0x52aee9(0x1c4)]=_0x22541d;}),__importStar=this&&this[a98_0x3af8a7(0x192)]||function(_0x55659e){const _0x3fd1bf=a98_0x3af8a7;if(_0x55659e&&_0x55659e['__esModule'])return _0x55659e;var _0x2cc48a={};if(_0x55659e!=null){for(var _0x4ed76f in _0x55659e)if(_0x4ed76f!==_0x3fd1bf(0x1c4)&&Object[_0x3fd1bf(0x1cc)][_0x3fd1bf(0x1b0)][_0x3fd1bf(0x1a0)](_0x55659e,_0x4ed76f))__createBinding(_0x2cc48a,_0x55659e,_0x4ed76f);}return __setModuleDefault(_0x2cc48a,_0x55659e),_0x2cc48a;},__importDefault=this&&this[a98_0x3af8a7(0x19a)]||function(_0xeaa877){return _0xeaa877&&_0xeaa877['__esModule']?_0xeaa877:{'default':_0xeaa877};};function a98_0x2102(_0x3bc019,_0x19ea39){const _0x10866f=a98_0x34ce();return a98_0x2102=function(_0x193939,_0x1ce50d){_0x193939=_0x193939-0x192;let _0x34ce3a=_0x10866f[_0x193939];return _0x34ce3a;},a98_0x2102(_0x3bc019,_0x19ea39);}Object['defineProperty'](exports,a98_0x3af8a7(0x1d2),{'value':!![]}),exports[a98_0x3af8a7(0x1a8)]=void 0x0;const path_1=__importStar(require(a98_0x3af8a7(0x1bd))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a98_0x3af8a7(0x1c7)),logger_job_state_1=require(a98_0x3af8a7(0x1d4)),logger_enums_1=require('../job/enums/logger.enums'),sync_1=require(a98_0x3af8a7(0x1bf)),utils_1=require('@flosum/utils'),not_found_error_1=require(a98_0x3af8a7(0x1b8)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a98_0x3af8a7(0x195))),constants_1=require(a98_0x3af8a7(0x1c5)),path_2=require(a98_0x3af8a7(0x1c2));class MaskingService{static async[a98_0x3af8a7(0x1ae)](_0x1e53a7){const _0x3ca8ad=a98_0x3af8a7,_0x4d14d8=job_utils_1[_0x3ca8ad(0x1c4)][_0x3ca8ad(0x198)](),_0x2c1078=(0x0,path_1['join'])(MaskingService[_0x3ca8ad(0x1a2)],_0x4d14d8);await(0x0,fs_utils_1['makeDir'])(_0x2c1078),await(0x0,promises_1['writeFile'])(_0x2c1078+'/'+job_1[_0x3ca8ad(0x1b6)],JSON[_0x3ca8ad(0x1dc)]({'details':_0x1e53a7}));const _0x1a1ab2=await new logger_job_state_1[(_0x3ca8ad(0x1d7))](_0x2c1078,_0x4d14d8)[_0x3ca8ad(0x1b3)]([]);await _0x1a1ab2['kill']();const _0x479ee7=path_1[_0x3ca8ad(0x1c4)][_0x3ca8ad(0x1a5)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x3ca8ad(0x1c4)][_0x3ca8ad(0x1be)](_0x479ee7,{'jobStorePath':_0x2c1078,'jobId':_0x4d14d8})[_0x3ca8ad(0x1db)](_0x54b908=>this[_0x3ca8ad(0x193)](_0x2c1078,_0x4d14d8,_0x54b908)),{'jobId':_0x4d14d8};}static async[a98_0x3af8a7(0x1de)](_0xbce3d,_0x941f27){const _0x1f0d83=a98_0x3af8a7,_0x1c63e4=await job_utils_1[_0x1f0d83(0x1c4)][_0x1f0d83(0x1c0)](MaskingService[_0x1f0d83(0x1a2)]),_0x269701=await job_utils_1[_0x1f0d83(0x1c4)][_0x1f0d83(0x1d1)](MaskingService[_0x1f0d83(0x1a2)],_0x1c63e4),_0x9e02d8=_0x269701[_0x1f0d83(0x1d5)](_0x941f27,_0x941f27+_0xbce3d),_0x285220=[];for(const _0x52f5f9 of _0x9e02d8){const _0x22efc6=await this['getJobState'](_0x52f5f9,![]);_0x285220[_0x1f0d83(0x1b9)](_0x22efc6);}return _0x285220;}static async['getJobState'](_0x203d64,_0x242a2b){const _0x4101a4=a98_0x3af8a7,_0x13189f=await this[_0x4101a4(0x197)](_0x203d64,job_1[_0x4101a4(0x1c1)],constants_1[_0x4101a4(0x1c6)]),_0x4e0425=JSON['parse'](_0x13189f),_0x59118b={'id':_0x4e0425['id'],'status':_0x4e0425['status'],'createdDate':_0x4e0425[_0x4101a4(0x199)],'completedDate':_0x4e0425[_0x4101a4(0x1ca)],'successful':_0x4e0425[_0x4101a4(0x1cb)],'failed':_0x4e0425[_0x4101a4(0x19e)]};return _0x242a2b?_0x4e0425:_0x59118b;}static async['getJobDetails'](_0x5af2c4){const _0x405ea0=a98_0x3af8a7,_0x3a065b=await this[_0x405ea0(0x197)](_0x5af2c4,job_1[_0x405ea0(0x19d)],constants_1[_0x405ea0(0x196)]);return(0x0,sync_1[_0x405ea0(0x1aa)])(_0x3a065b,{'columns':!![]});}static async[a98_0x3af8a7(0x197)](_0x56c144,_0x480509,_0x539324){const _0x5abf1a=a98_0x3af8a7,_0x22a49d=(0x0,path_1['join'])(MaskingService[_0x5abf1a(0x1a2)],_0x56c144),_0x51a610=(0x0,path_1[_0x5abf1a(0x1a5)])(_0x22a49d,_0x480509);if(!await utils_1[_0x5abf1a(0x1b2)][_0x5abf1a(0x1bb)](_0x22a49d))throw new not_found_error_1[(_0x5abf1a(0x1c3))](_0x5abf1a(0x1dd));if(!await utils_1[_0x5abf1a(0x1b2)][_0x5abf1a(0x1bb)](_0x51a610))throw new not_found_error_1[(_0x5abf1a(0x1c3))](_0x539324+'\x20not\x20found.');return(0x0,promises_1[_0x5abf1a(0x1bc)])(_0x51a610,{'encoding':_0x5abf1a(0x1b1)});}static async[a98_0x3af8a7(0x193)](_0x3b7682,_0x571913,_0x51bb5a){const _0x1706f7=a98_0x3af8a7,_0x2a420f=await new logger_job_state_1[(_0x1706f7(0x1d7))](_0x3b7682,_0x571913)[_0x1706f7(0x1b3)]([]);_0x2a420f[_0x1706f7(0x1cf)](logger_enums_1[_0x1706f7(0x1b4)][_0x1706f7(0x1b7)]),_0x2a420f[_0x1706f7(0x1a7)](_0x51bb5a[_0x1706f7(0x19f)]),await _0x2a420f[_0x1706f7(0x1a1)]();}}exports['MaskingService']=MaskingService,MaskingService[a98_0x3af8a7(0x1a2)]=path_1[a98_0x3af8a7(0x1c4)]['join'](path_2[a98_0x3af8a7(0x1ba)],constants_1[a98_0x3af8a7(0x1d0)]);