const a81_0x19d6be=a81_0x23de;(function(_0x38dc18,_0x2d4ed4){const _0x2b09f3=a81_0x23de,_0x39414b=_0x38dc18();while(!![]){try{const _0x1bbf46=-parseInt(_0x2b09f3(0x16c))/0x1+parseInt(_0x2b09f3(0x1a4))/0x2*(parseInt(_0x2b09f3(0x189))/0x3)+parseInt(_0x2b09f3(0x184))/0x4+-parseInt(_0x2b09f3(0x181))/0x5+parseInt(_0x2b09f3(0x163))/0x6*(-parseInt(_0x2b09f3(0x180))/0x7)+parseInt(_0x2b09f3(0x177))/0x8*(-parseInt(_0x2b09f3(0x160))/0x9)+-parseInt(_0x2b09f3(0x18a))/0xa;if(_0x1bbf46===_0x2d4ed4)break;else _0x39414b['push'](_0x39414b['shift']());}catch(_0x2a9e3d){_0x39414b['push'](_0x39414b['shift']());}}}(a81_0x592d,0x4d891));const a81_0x4d77cc=(function(){let _0x4c6f83=!![];return function(_0x537d41,_0x169eb4){const _0x39fdb7=_0x4c6f83?function(){const _0x1b590f=a81_0x23de;if(_0x169eb4){const _0x13d329=_0x169eb4[_0x1b590f(0x174)](_0x537d41,arguments);return _0x169eb4=null,_0x13d329;}}:function(){};return _0x4c6f83=![],_0x39fdb7;};}()),a81_0x9c4501=a81_0x4d77cc(this,function(){const _0xf674d7=a81_0x23de;return a81_0x9c4501[_0xf674d7(0x175)]()['search'](_0xf674d7(0x17e))['toString']()[_0xf674d7(0x1a1)](a81_0x9c4501)[_0xf674d7(0x16d)](_0xf674d7(0x17e));});a81_0x9c4501();'use strict';var __createBinding=this&&this[a81_0x19d6be(0x158)]||(Object[a81_0x19d6be(0x167)]?function(_0x24f5ec,_0x1e3eeb,_0xfa05a,_0x180e05){const _0xa247db=a81_0x19d6be;if(_0x180e05===undefined)_0x180e05=_0xfa05a;var _0x361e4f=Object[_0xa247db(0x182)](_0x1e3eeb,_0xfa05a);(!_0x361e4f||(_0xa247db(0x19a)in _0x361e4f?!_0x1e3eeb[_0xa247db(0x199)]:_0x361e4f[_0xa247db(0x187)]||_0x361e4f['configurable']))&&(_0x361e4f={'enumerable':!![],'get':function(){return _0x1e3eeb[_0xfa05a];}}),Object[_0xa247db(0x16f)](_0x24f5ec,_0x180e05,_0x361e4f);}:function(_0x2294ae,_0xc457a3,_0x3547b1,_0x4ad879){if(_0x4ad879===undefined)_0x4ad879=_0x3547b1;_0x2294ae[_0x4ad879]=_0xc457a3[_0x3547b1];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a81_0x19d6be(0x167)]?function(_0x97fbb2,_0x1c57cc){const _0x307ceb=a81_0x19d6be;Object[_0x307ceb(0x16f)](_0x97fbb2,_0x307ceb(0x17d),{'enumerable':!![],'value':_0x1c57cc});}:function(_0x241985,_0x90f2f6){_0x241985['default']=_0x90f2f6;}),__importStar=this&&this[a81_0x19d6be(0x162)]||function(_0x32ac1a){const _0x3d3561=a81_0x19d6be;if(_0x32ac1a&&_0x32ac1a[_0x3d3561(0x199)])return _0x32ac1a;var _0xba24b5={};if(_0x32ac1a!=null){for(var _0x2a9332 in _0x32ac1a)if(_0x2a9332!==_0x3d3561(0x17d)&&Object[_0x3d3561(0x195)][_0x3d3561(0x1a2)][_0x3d3561(0x18b)](_0x32ac1a,_0x2a9332))__createBinding(_0xba24b5,_0x32ac1a,_0x2a9332);}return __setModuleDefault(_0xba24b5,_0x32ac1a),_0xba24b5;},__importDefault=this&&this['__importDefault']||function(_0x4bff24){return _0x4bff24&&_0x4bff24['__esModule']?_0x4bff24:{'default':_0x4bff24};};Object[a81_0x19d6be(0x16f)](exports,a81_0x19d6be(0x199),{'value':!![]}),exports[a81_0x19d6be(0x16b)]=void 0x0;const path_1=__importStar(require(a81_0x19d6be(0x19f))),fs_utils_1=require(a81_0x19d6be(0x17a)),promises_1=require(a81_0x19d6be(0x197)),logger_job_state_1=require(a81_0x19d6be(0x161)),logger_enums_1=require(a81_0x19d6be(0x191)),sync_1=require(a81_0x19d6be(0x165)),utils_1=require(a81_0x19d6be(0x15e)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a81_0x19d6be(0x185))),constants_1=require(a81_0x19d6be(0x19b)),path_2=require('../../../configs/path');function a81_0x592d(){const _0x5ad4d7=['../job/enums/logger.enums','stringify','failed','maskingFolderPath','prototype','FsUtils','fs/promises','readFile','__esModule','get','../constants','utf-8','createdDate','Job\x20Id\x20not\x20found.','path','MANIFEST_FILENAME','constructor','hasOwnProperty','join','582206aoysQz','__createBinding','isExistsPath','getJobs','message','logErrorStartJob','JOB_LOG_DETAILS_NAME','@flosum/utils','successful','39186huHtlN','../job/classes/logger/logger-job-state','__importStar','414PTWUMb','FAILED','csv-parse/sync','createMaskingJob','create','JobStatus','generateJobId','runJob','MaskingService','3833HGmVZd','search','DATA_MASKING_FOLDER_NAME','defineProperty','status','parse','LoggerJobState','setJobError','apply','toString','JOB_LOG_STATE_FILENAME','320ZSaOBc','kill','completedDate','../../shared/utils/fs.utils','getJobState','getJobDetails','default','(((.+)+)+)+$','getLog','11746YrGyUw','1289910VPHTry','getOwnPropertyDescriptor','init','1475048RvsPPz','../../shared/utils/job.utils','JOB_PATH','writable','NotFoundError','6nTMPUp','816260Lqmznp','call','writeFile','JOB_LOG_STATE_NAME','dataPath','push','sortJobsIds'];a81_0x592d=function(){return _0x5ad4d7;};return a81_0x592d();}function a81_0x23de(_0x2687e0,_0x11823a){const _0x29c780=a81_0x592d();return a81_0x23de=function(_0x9c4501,_0x4d77cc){_0x9c4501=_0x9c4501-0x158;let _0x592d1a=_0x29c780[_0x9c4501];return _0x592d1a;},a81_0x23de(_0x2687e0,_0x11823a);}class MaskingService{static async[a81_0x19d6be(0x166)](_0x471898){const _0x4632cb=a81_0x19d6be,_0xb85bfe=job_utils_1['default'][_0x4632cb(0x169)](),_0x1a6293=(0x0,path_1[_0x4632cb(0x1a3)])(MaskingService[_0x4632cb(0x194)],_0xb85bfe);await(0x0,fs_utils_1['makeDir'])(_0x1a6293),await(0x0,promises_1[_0x4632cb(0x18c)])(_0x1a6293+'/'+job_1[_0x4632cb(0x1a0)],JSON[_0x4632cb(0x192)]({'details':_0x471898}));const _0x290b2e=await new logger_job_state_1[(_0x4632cb(0x172))](_0x1a6293,_0xb85bfe)[_0x4632cb(0x183)]([]);await _0x290b2e[_0x4632cb(0x178)]();const _0x3323bd=path_1[_0x4632cb(0x17d)][_0x4632cb(0x1a3)](__dirname,job_1[_0x4632cb(0x186)]);return job_utils_1['default'][_0x4632cb(0x16a)](_0x3323bd,{'jobStorePath':_0x1a6293,'jobId':_0xb85bfe})['catch'](_0x4defb7=>this['logErrorStartJob'](_0x1a6293,_0xb85bfe,_0x4defb7)),{'jobId':_0xb85bfe};}static async[a81_0x19d6be(0x15a)](_0x223a37,_0x3178f2){const _0x3f876f=a81_0x19d6be,_0x496480=await job_utils_1[_0x3f876f(0x17d)]['getJobsIds'](MaskingService[_0x3f876f(0x194)]),_0x2de561=await job_utils_1[_0x3f876f(0x17d)][_0x3f876f(0x190)](MaskingService['maskingFolderPath'],_0x496480),_0x4d42d7=_0x2de561['slice'](_0x3178f2,_0x3178f2+_0x223a37),_0x568e17=[];for(const _0x47a397 of _0x4d42d7){const _0x57ca78=await this[_0x3f876f(0x17b)](_0x47a397,![]);_0x568e17[_0x3f876f(0x18f)](_0x57ca78);}return _0x568e17;}static async[a81_0x19d6be(0x17b)](_0x4173aa,_0x5c941f){const _0x4bce14=a81_0x19d6be,_0x3ef4af=await this[_0x4bce14(0x17f)](_0x4173aa,job_1[_0x4bce14(0x176)],constants_1[_0x4bce14(0x18d)]),_0x23939b=JSON['parse'](_0x3ef4af),_0x3a9b4d={'id':_0x23939b['id'],'status':_0x23939b[_0x4bce14(0x170)],'createdDate':_0x23939b[_0x4bce14(0x19d)],'completedDate':_0x23939b[_0x4bce14(0x179)],'successful':_0x23939b[_0x4bce14(0x15f)],'failed':_0x23939b[_0x4bce14(0x193)]};return _0x5c941f?_0x23939b:_0x3a9b4d;}static async[a81_0x19d6be(0x17c)](_0x282759){const _0x16d894=a81_0x19d6be,_0x11eb08=await this[_0x16d894(0x17f)](_0x282759,job_1['JOB_LOG_DETAILS_FILENAME'],constants_1[_0x16d894(0x15d)]);return(0x0,sync_1[_0x16d894(0x171)])(_0x11eb08,{'columns':!![]});}static async['getLog'](_0x7c4a44,_0x353dbe,_0x27bc18){const _0x570fb4=a81_0x19d6be,_0x38b595=(0x0,path_1['join'])(MaskingService[_0x570fb4(0x194)],_0x7c4a44),_0x211f70=(0x0,path_1[_0x570fb4(0x1a3)])(_0x38b595,_0x353dbe);if(!await utils_1['FsUtils'][_0x570fb4(0x159)](_0x38b595))throw new not_found_error_1[(_0x570fb4(0x188))](_0x570fb4(0x19e));if(!await utils_1[_0x570fb4(0x196)][_0x570fb4(0x159)](_0x211f70))throw new not_found_error_1[(_0x570fb4(0x188))](_0x27bc18+'\x20not\x20found.');return(0x0,promises_1[_0x570fb4(0x198)])(_0x211f70,{'encoding':_0x570fb4(0x19c)});}static async[a81_0x19d6be(0x15c)](_0x4272a6,_0x417d67,_0x53b254){const _0x60b6e4=a81_0x19d6be,_0x5ca64d=await new logger_job_state_1[(_0x60b6e4(0x172))](_0x4272a6,_0x417d67)[_0x60b6e4(0x183)]([]);_0x5ca64d['setJobStatus'](logger_enums_1[_0x60b6e4(0x168)][_0x60b6e4(0x164)]),_0x5ca64d[_0x60b6e4(0x173)](_0x53b254[_0x60b6e4(0x15b)]),await _0x5ca64d[_0x60b6e4(0x178)]();}}exports[a81_0x19d6be(0x16b)]=MaskingService,MaskingService[a81_0x19d6be(0x194)]=path_1[a81_0x19d6be(0x17d)]['join'](path_2[a81_0x19d6be(0x18e)],constants_1[a81_0x19d6be(0x16e)]);