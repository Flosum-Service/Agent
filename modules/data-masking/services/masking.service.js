const a96_0x4c45ff=a96_0x11a8;(function(_0x58a4e3,_0x2bf46e){const _0x4c71fa=a96_0x11a8,_0x4f6361=_0x58a4e3();while(!![]){try{const _0x4410b7=-parseInt(_0x4c71fa(0x11f))/0x1+parseInt(_0x4c71fa(0x114))/0x2+-parseInt(_0x4c71fa(0x11a))/0x3*(-parseInt(_0x4c71fa(0x10d))/0x4)+-parseInt(_0x4c71fa(0x117))/0x5+parseInt(_0x4c71fa(0x11d))/0x6*(-parseInt(_0x4c71fa(0xf0))/0x7)+parseInt(_0x4c71fa(0xf4))/0x8*(parseInt(_0x4c71fa(0xff))/0x9)+-parseInt(_0x4c71fa(0x125))/0xa*(-parseInt(_0x4c71fa(0x115))/0xb);if(_0x4410b7===_0x2bf46e)break;else _0x4f6361['push'](_0x4f6361['shift']());}catch(_0x26062e){_0x4f6361['push'](_0x4f6361['shift']());}}}(a96_0x47da,0xd1dde));const a96_0x267cda=(function(){let _0x2091ef=!![];return function(_0x29d3f9,_0x5430c3){const _0x4c5827=_0x2091ef?function(){const _0xc5ab69=a96_0x11a8;if(_0x5430c3){const _0x4dc7d3=_0x5430c3[_0xc5ab69(0x124)](_0x29d3f9,arguments);return _0x5430c3=null,_0x4dc7d3;}}:function(){};return _0x2091ef=![],_0x4c5827;};}()),a96_0x43d264=a96_0x267cda(this,function(){const _0x296d78=a96_0x11a8;return a96_0x43d264[_0x296d78(0xee)]()['search'](_0x296d78(0x121))['toString']()['constructor'](a96_0x43d264)[_0x296d78(0x100)](_0x296d78(0x121));});a96_0x43d264();'use strict';var __createBinding=this&&this[a96_0x4c45ff(0x12c)]||(Object[a96_0x4c45ff(0xf3)]?function(_0x58bbeb,_0x469c1f,_0x29c5fa,_0x1b9a04){const _0x312e24=a96_0x4c45ff;if(_0x1b9a04===undefined)_0x1b9a04=_0x29c5fa;var _0x1d401b=Object[_0x312e24(0x105)](_0x469c1f,_0x29c5fa);(!_0x1d401b||('get'in _0x1d401b?!_0x469c1f[_0x312e24(0xec)]:_0x1d401b[_0x312e24(0xf1)]||_0x1d401b[_0x312e24(0x113)]))&&(_0x1d401b={'enumerable':!![],'get':function(){return _0x469c1f[_0x29c5fa];}}),Object[_0x312e24(0x12b)](_0x58bbeb,_0x1b9a04,_0x1d401b);}:function(_0x13e383,_0x48c45f,_0x57381f,_0x349e52){if(_0x349e52===undefined)_0x349e52=_0x57381f;_0x13e383[_0x349e52]=_0x48c45f[_0x57381f];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a96_0x4c45ff(0xf3)]?function(_0x3eea3a,_0x28fef2){const _0x136404=a96_0x4c45ff;Object[_0x136404(0x12b)](_0x3eea3a,'default',{'enumerable':!![],'value':_0x28fef2});}:function(_0x109dc8,_0x1b2f76){const _0x5daae1=a96_0x4c45ff;_0x109dc8[_0x5daae1(0xf5)]=_0x1b2f76;}),__importStar=this&&this[a96_0x4c45ff(0x107)]||function(_0xd24fe0){const _0x1943ac=a96_0x4c45ff;if(_0xd24fe0&&_0xd24fe0[_0x1943ac(0xec)])return _0xd24fe0;var _0xa90803={};if(_0xd24fe0!=null){for(var _0x3a9ce1 in _0xd24fe0)if(_0x3a9ce1!==_0x1943ac(0xf5)&&Object[_0x1943ac(0x111)]['hasOwnProperty']['call'](_0xd24fe0,_0x3a9ce1))__createBinding(_0xa90803,_0xd24fe0,_0x3a9ce1);}return __setModuleDefault(_0xa90803,_0xd24fe0),_0xa90803;},__importDefault=this&&this['__importDefault']||function(_0x19b70e){return _0x19b70e&&_0x19b70e['__esModule']?_0x19b70e:{'default':_0x19b70e};};Object[a96_0x4c45ff(0x12b)](exports,a96_0x4c45ff(0xec),{'value':!![]}),exports[a96_0x4c45ff(0xf2)]=void 0x0;const path_1=__importStar(require(a96_0x4c45ff(0x110))),fs_utils_1=require(a96_0x4c45ff(0x12d)),promises_1=require('fs/promises'),logger_job_state_1=require(a96_0x4c45ff(0x11c)),logger_enums_1=require(a96_0x4c45ff(0xfd)),sync_1=require(a96_0x4c45ff(0xf6)),utils_1=require(a96_0x4c45ff(0x129)),not_found_error_1=require(a96_0x4c45ff(0x12a)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a96_0x4c45ff(0x102))),constants_1=require(a96_0x4c45ff(0x118)),path_2=require(a96_0x4c45ff(0x116));function a96_0x11a8(_0x3f2fc8,_0x21bf92){const _0x16197d=a96_0x47da();return a96_0x11a8=function(_0x43d264,_0x267cda){_0x43d264=_0x43d264-0xec;let _0x47da71=_0x16197d[_0x43d264];return _0x47da71;},a96_0x11a8(_0x3f2fc8,_0x21bf92);}class MaskingService{static async['createMaskingJob'](_0x1fd83c){const _0x30153b=a96_0x4c45ff,_0x3448c8=job_utils_1[_0x30153b(0xf5)][_0x30153b(0xef)](),_0x1b85d1=(0x0,path_1[_0x30153b(0xf9)])(MaskingService[_0x30153b(0x10c)],_0x3448c8);await(0x0,fs_utils_1[_0x30153b(0x11b)])(_0x1b85d1),await(0x0,promises_1['writeFile'])(_0x1b85d1+'/'+job_1[_0x30153b(0x123)],JSON[_0x30153b(0xfc)]({'details':_0x1fd83c}));const _0x335f6a=await new logger_job_state_1[(_0x30153b(0x101))](_0x1b85d1,_0x3448c8)['init']([]);await _0x335f6a['kill']();const _0x44575c=path_1[_0x30153b(0xf5)][_0x30153b(0xf9)](__dirname,job_1[_0x30153b(0x127)]);return job_utils_1[_0x30153b(0xf5)][_0x30153b(0x119)](_0x44575c,{'jobStorePath':_0x1b85d1,'jobId':_0x3448c8})['catch'](_0x2aa1ec=>this[_0x30153b(0x104)](_0x1b85d1,_0x3448c8,_0x2aa1ec)),{'jobId':_0x3448c8};}static async['getJobs'](_0x28aa41,_0x330b25){const _0x3a6a3b=a96_0x4c45ff,_0x4de8f3=await job_utils_1['default']['getJobsIds'](MaskingService[_0x3a6a3b(0x10c)]),_0x2ccd9a=await job_utils_1[_0x3a6a3b(0xf5)]['sortJobsIds'](MaskingService['maskingFolderPath'],_0x4de8f3),_0x3bea8f=_0x2ccd9a[_0x3a6a3b(0xed)](_0x330b25,_0x330b25+_0x28aa41),_0x2c4d7a=[];for(const _0x130f2f of _0x3bea8f){const _0xb4833e=await this['getJobState'](_0x130f2f,![]);_0x2c4d7a['push'](_0xb4833e);}return _0x2c4d7a;}static async['getJobState'](_0xef7343,_0x54818b){const _0x5c800d=a96_0x4c45ff,_0x7346e1=await this['getLog'](_0xef7343,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x5c800d(0xfa)]),_0x47568a=JSON['parse'](_0x7346e1),_0x353404={'id':_0x47568a['id'],'status':_0x47568a[_0x5c800d(0x10b)],'createdDate':_0x47568a['createdDate'],'completedDate':_0x47568a[_0x5c800d(0x128)],'successful':_0x47568a['successful'],'failed':_0x47568a[_0x5c800d(0x103)]};return _0x54818b?_0x47568a:_0x353404;}static async['getJobDetails'](_0x9fe2ec){const _0x1c6c71=a96_0x4c45ff,_0x5e8bc1=await this['getLog'](_0x9fe2ec,job_1[_0x1c6c71(0xf7)],constants_1[_0x1c6c71(0xfe)]);return(0x0,sync_1[_0x1c6c71(0x108)])(_0x5e8bc1,{'columns':!![]});}static async['getLog'](_0x5931a7,_0x14b660,_0x35c060){const _0x3a83bd=a96_0x4c45ff,_0xd6e073=(0x0,path_1[_0x3a83bd(0xf9)])(MaskingService[_0x3a83bd(0x10c)],_0x5931a7),_0x350e59=(0x0,path_1[_0x3a83bd(0xf9)])(_0xd6e073,_0x14b660);if(!await utils_1[_0x3a83bd(0xf8)][_0x3a83bd(0x120)](_0xd6e073))throw new not_found_error_1['NotFoundError'](_0x3a83bd(0x10e));if(!await utils_1[_0x3a83bd(0xf8)][_0x3a83bd(0x120)](_0x350e59))throw new not_found_error_1['NotFoundError'](_0x35c060+_0x3a83bd(0x126));return(0x0,promises_1[_0x3a83bd(0x10a)])(_0x350e59,{'encoding':'utf-8'});}static async[a96_0x4c45ff(0x104)](_0x337aa4,_0x202408,_0x2c1e0b){const _0x2c7d3b=a96_0x4c45ff,_0x22b06b=await new logger_job_state_1[(_0x2c7d3b(0x101))](_0x337aa4,_0x202408)['init']([]);_0x22b06b[_0x2c7d3b(0x109)](logger_enums_1[_0x2c7d3b(0x10f)]['FAILED']),_0x22b06b[_0x2c7d3b(0x122)](_0x2c1e0b[_0x2c7d3b(0x112)]),await _0x22b06b[_0x2c7d3b(0x11e)]();}}function a96_0x47da(){const _0x4da0a7=['parse','setJobStatus','readFile','status','maskingFolderPath','296LrXiHO','Job\x20Id\x20not\x20found.','JobStatus','path','prototype','message','configurable','3110420fylhLf','12058090BnLCfM','../../../configs/path','6963015guBZLL','../constants','runJob','63201MoIMwc','makeDir','../job/classes/logger/logger-job-state','6QvImoj','kill','1293746KjvjPz','isExistsPath','(((.+)+)+)+$','setJobError','MANIFEST_FILENAME','apply','10WWordo','\x20not\x20found.','JOB_PATH','completedDate','@flosum/utils','../../../core/errors/not-found.error','defineProperty','__createBinding','../../shared/utils/fs.utils','__esModule','slice','toString','generateJobId','8824543mRBzEi','writable','MaskingService','create','8BRShPy','default','csv-parse/sync','JOB_LOG_DETAILS_FILENAME','FsUtils','join','JOB_LOG_STATE_NAME','DATA_MASKING_FOLDER_NAME','stringify','../job/enums/logger.enums','JOB_LOG_DETAILS_NAME','5366286vLsxlt','search','LoggerJobState','../../shared/utils/job.utils','failed','logErrorStartJob','getOwnPropertyDescriptor','dataPath','__importStar'];a96_0x47da=function(){return _0x4da0a7;};return a96_0x47da();}exports[a96_0x4c45ff(0xf2)]=MaskingService,MaskingService[a96_0x4c45ff(0x10c)]=path_1[a96_0x4c45ff(0xf5)]['join'](path_2[a96_0x4c45ff(0x106)],constants_1[a96_0x4c45ff(0xfb)]);