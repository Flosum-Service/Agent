const a80_0x2ebd2e=a80_0x1c35;(function(_0x99227,_0x236dac){const _0x4a177c=a80_0x1c35,_0x16aeac=_0x99227();while(!![]){try{const _0x5888f6=parseInt(_0x4a177c(0x1c0))/0x1*(-parseInt(_0x4a177c(0x1bc))/0x2)+-parseInt(_0x4a177c(0x1dd))/0x3+-parseInt(_0x4a177c(0x1a8))/0x4*(-parseInt(_0x4a177c(0x1ad))/0x5)+parseInt(_0x4a177c(0x19c))/0x6+parseInt(_0x4a177c(0x198))/0x7+parseInt(_0x4a177c(0x1b7))/0x8*(parseInt(_0x4a177c(0x19f))/0x9)+-parseInt(_0x4a177c(0x1d6))/0xa;if(_0x5888f6===_0x236dac)break;else _0x16aeac['push'](_0x16aeac['shift']());}catch(_0xe13f94){_0x16aeac['push'](_0x16aeac['shift']());}}}(a80_0x4834,0x44dd0));const a80_0x139b4e=(function(){let _0x14dc20=!![];return function(_0x2c7770,_0x4066d2){const _0x1b5017=_0x14dc20?function(){const _0x4859e2=a80_0x1c35;if(_0x4066d2){const _0x33f38f=_0x4066d2[_0x4859e2(0x1c4)](_0x2c7770,arguments);return _0x4066d2=null,_0x33f38f;}}:function(){};return _0x14dc20=![],_0x1b5017;};}()),a80_0x11387b=a80_0x139b4e(this,function(){const _0x3ce38b=a80_0x1c35;return a80_0x11387b['toString']()[_0x3ce38b(0x1dc)](_0x3ce38b(0x1ce))[_0x3ce38b(0x19d)]()[_0x3ce38b(0x1ae)](a80_0x11387b)[_0x3ce38b(0x1dc)](_0x3ce38b(0x1ce));});a80_0x11387b();'use strict';var __createBinding=this&&this[a80_0x2ebd2e(0x1e1)]||(Object['create']?function(_0x433fe3,_0x2663da,_0xedef85,_0x52a36c){const _0xd5efca=a80_0x2ebd2e;if(_0x52a36c===undefined)_0x52a36c=_0xedef85;var _0x5929c6=Object[_0xd5efca(0x1ca)](_0x2663da,_0xedef85);(!_0x5929c6||('get'in _0x5929c6?!_0x2663da[_0xd5efca(0x1d9)]:_0x5929c6[_0xd5efca(0x1b3)]||_0x5929c6[_0xd5efca(0x1b4)]))&&(_0x5929c6={'enumerable':!![],'get':function(){return _0x2663da[_0xedef85];}}),Object['defineProperty'](_0x433fe3,_0x52a36c,_0x5929c6);}:function(_0x3d0e78,_0x14374c,_0x36219a,_0xf92e9d){if(_0xf92e9d===undefined)_0xf92e9d=_0x36219a;_0x3d0e78[_0xf92e9d]=_0x14374c[_0x36219a];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a80_0x2ebd2e(0x1c2)]?function(_0x5f5abc,_0x57a4bb){const _0x2f3c3a=a80_0x2ebd2e;Object[_0x2f3c3a(0x1e0)](_0x5f5abc,'default',{'enumerable':!![],'value':_0x57a4bb});}:function(_0x3634bb,_0x1f08c0){const _0xfb23b9=a80_0x2ebd2e;_0x3634bb[_0xfb23b9(0x1a7)]=_0x1f08c0;}),__importStar=this&&this['__importStar']||function(_0x5bb044){const _0x461b7b=a80_0x2ebd2e;if(_0x5bb044&&_0x5bb044[_0x461b7b(0x1d9)])return _0x5bb044;var _0x2187b7={};if(_0x5bb044!=null){for(var _0x51ed28 in _0x5bb044)if(_0x51ed28!=='default'&&Object[_0x461b7b(0x1c1)][_0x461b7b(0x1a9)][_0x461b7b(0x1bf)](_0x5bb044,_0x51ed28))__createBinding(_0x2187b7,_0x5bb044,_0x51ed28);}return __setModuleDefault(_0x2187b7,_0x5bb044),_0x2187b7;},__importDefault=this&&this['__importDefault']||function(_0x22cafe){const _0x1d0eae=a80_0x2ebd2e;return _0x22cafe&&_0x22cafe[_0x1d0eae(0x1d9)]?_0x22cafe:{'default':_0x22cafe};};function a80_0x4834(){const _0x3e5feb=['../constants','\x20not\x20found.','logErrorStartJob','getLog','getOwnPropertyDescriptor','makeDir','createdDate','sortJobsIds','(((.+)+)+)+$','isExistsPath','MANIFEST_FILENAME','JOB_LOG_STATE_FILENAME','../../../core/errors/not-found.error','fs/promises','parse','path','1303050IEbAcj','stringify','status','__esModule','failed','createMaskingJob','search','734151VpCGNk','../../shared/utils/fs.utils','FsUtils','defineProperty','__createBinding','push','JOB_LOG_DETAILS_NAME','../job/enums/logger.enums','slice','../job/classes/logger/logger-job-state','generateJobId','370727yvDlgN','JobStatus','join','setJobError','993024lfXBdp','toString','successful','608103GidCgE','maskingFolderPath','getJobState','MaskingService','@flosum/utils','getJobDetails','kill','readFile','default','76twDyAf','hasOwnProperty','getJobsIds','completedDate','../../../configs/path','32935PWsWJW','constructor','setJobStatus','LoggerJobState','JOB_PATH','../../../constants/job','writable','configurable','dataPath','init','40TKjQHK','message','csv-parse/sync','NotFoundError','../../shared/utils/job.utils','2knqfsG','runJob','utf-8','call','24367CGCvkZ','prototype','create','writeFile','apply','catch'];a80_0x4834=function(){return _0x3e5feb;};return a80_0x4834();}Object[a80_0x2ebd2e(0x1e0)](exports,a80_0x2ebd2e(0x1d9),{'value':!![]}),exports[a80_0x2ebd2e(0x1a2)]=void 0x0;const path_1=__importStar(require(a80_0x2ebd2e(0x1d5))),fs_utils_1=require(a80_0x2ebd2e(0x1de)),promises_1=require(a80_0x2ebd2e(0x1d3)),logger_job_state_1=require(a80_0x2ebd2e(0x196)),logger_enums_1=require(a80_0x2ebd2e(0x194)),sync_1=require(a80_0x2ebd2e(0x1b9)),utils_1=require(a80_0x2ebd2e(0x1a3)),not_found_error_1=require(a80_0x2ebd2e(0x1d2)),job_1=require(a80_0x2ebd2e(0x1b2)),job_utils_1=__importDefault(require(a80_0x2ebd2e(0x1bb))),constants_1=require(a80_0x2ebd2e(0x1c6)),path_2=require(a80_0x2ebd2e(0x1ac));function a80_0x1c35(_0x1edbcd,_0x59fcc6){const _0x44ba41=a80_0x4834();return a80_0x1c35=function(_0x11387b,_0x139b4e){_0x11387b=_0x11387b-0x194;let _0x4834b6=_0x44ba41[_0x11387b];return _0x4834b6;},a80_0x1c35(_0x1edbcd,_0x59fcc6);}class MaskingService{static async[a80_0x2ebd2e(0x1db)](_0x435506){const _0x2cfe7e=a80_0x2ebd2e,_0x1b3c68=job_utils_1[_0x2cfe7e(0x1a7)][_0x2cfe7e(0x197)](),_0x1d9fa4=(0x0,path_1[_0x2cfe7e(0x19a)])(MaskingService['maskingFolderPath'],_0x1b3c68);await(0x0,fs_utils_1[_0x2cfe7e(0x1cb)])(_0x1d9fa4),await(0x0,promises_1[_0x2cfe7e(0x1c3)])(_0x1d9fa4+'/'+job_1[_0x2cfe7e(0x1d0)],JSON[_0x2cfe7e(0x1d7)]({'details':_0x435506}));const _0x4d9f96=await new logger_job_state_1[(_0x2cfe7e(0x1b0))](_0x1d9fa4,_0x1b3c68)[_0x2cfe7e(0x1b6)]([]);await _0x4d9f96[_0x2cfe7e(0x1a5)]();const _0xc17083=path_1[_0x2cfe7e(0x1a7)][_0x2cfe7e(0x19a)](__dirname,job_1[_0x2cfe7e(0x1b1)]);return job_utils_1[_0x2cfe7e(0x1a7)][_0x2cfe7e(0x1bd)](_0xc17083,{'jobStorePath':_0x1d9fa4,'jobId':_0x1b3c68})[_0x2cfe7e(0x1c5)](_0x1b47c3=>this[_0x2cfe7e(0x1c8)](_0x1d9fa4,_0x1b3c68,_0x1b47c3)),{'jobId':_0x1b3c68};}static async['getJobs'](_0x225bf5,_0x5b5556){const _0x2efa01=a80_0x2ebd2e,_0x5b572a=await job_utils_1[_0x2efa01(0x1a7)][_0x2efa01(0x1aa)](MaskingService[_0x2efa01(0x1a0)]),_0x4dbf05=await job_utils_1[_0x2efa01(0x1a7)][_0x2efa01(0x1cd)](MaskingService[_0x2efa01(0x1a0)],_0x5b572a),_0x3f014b=_0x4dbf05[_0x2efa01(0x195)](_0x5b5556,_0x5b5556+_0x225bf5),_0x423291=[];for(const _0x5e91c0 of _0x3f014b){const _0x4623fa=await this[_0x2efa01(0x1a1)](_0x5e91c0,![]);_0x423291[_0x2efa01(0x1e2)](_0x4623fa);}return _0x423291;}static async[a80_0x2ebd2e(0x1a1)](_0x165003,_0x3e3330){const _0x43cb5c=a80_0x2ebd2e,_0x3ec659=await this['getLog'](_0x165003,job_1[_0x43cb5c(0x1d1)],constants_1['JOB_LOG_STATE_NAME']),_0x236899=JSON[_0x43cb5c(0x1d4)](_0x3ec659),_0x4c5908={'id':_0x236899['id'],'status':_0x236899[_0x43cb5c(0x1d8)],'createdDate':_0x236899[_0x43cb5c(0x1cc)],'completedDate':_0x236899[_0x43cb5c(0x1ab)],'successful':_0x236899[_0x43cb5c(0x19e)],'failed':_0x236899[_0x43cb5c(0x1da)]};return _0x3e3330?_0x236899:_0x4c5908;}static async[a80_0x2ebd2e(0x1a4)](_0x5754ee){const _0x52f357=a80_0x2ebd2e,_0x5d7175=await this[_0x52f357(0x1c9)](_0x5754ee,job_1['JOB_LOG_DETAILS_FILENAME'],constants_1[_0x52f357(0x1e3)]);return(0x0,sync_1[_0x52f357(0x1d4)])(_0x5d7175,{'columns':!![]});}static async[a80_0x2ebd2e(0x1c9)](_0x1d66ee,_0x5dc9b6,_0x6260f7){const _0x152161=a80_0x2ebd2e,_0x1db8b9=(0x0,path_1[_0x152161(0x19a)])(MaskingService[_0x152161(0x1a0)],_0x1d66ee),_0xe13c26=(0x0,path_1[_0x152161(0x19a)])(_0x1db8b9,_0x5dc9b6);if(!await utils_1[_0x152161(0x1df)][_0x152161(0x1cf)](_0x1db8b9))throw new not_found_error_1[(_0x152161(0x1ba))]('Job\x20Id\x20not\x20found.');if(!await utils_1[_0x152161(0x1df)][_0x152161(0x1cf)](_0xe13c26))throw new not_found_error_1['NotFoundError'](_0x6260f7+_0x152161(0x1c7));return(0x0,promises_1[_0x152161(0x1a6)])(_0xe13c26,{'encoding':_0x152161(0x1be)});}static async['logErrorStartJob'](_0x528ee1,_0x3a84e1,_0x1b8188){const _0x295cc3=a80_0x2ebd2e,_0x4ace20=await new logger_job_state_1['LoggerJobState'](_0x528ee1,_0x3a84e1)[_0x295cc3(0x1b6)]([]);_0x4ace20[_0x295cc3(0x1af)](logger_enums_1[_0x295cc3(0x199)]['FAILED']),_0x4ace20[_0x295cc3(0x19b)](_0x1b8188[_0x295cc3(0x1b8)]),await _0x4ace20[_0x295cc3(0x1a5)]();}}exports[a80_0x2ebd2e(0x1a2)]=MaskingService,MaskingService[a80_0x2ebd2e(0x1a0)]=path_1[a80_0x2ebd2e(0x1a7)]['join'](path_2[a80_0x2ebd2e(0x1b5)],constants_1['DATA_MASKING_FOLDER_NAME']);