const a98_0x572ba4=a98_0x19b8;(function(_0x5d4bcb,_0x186c6e){const _0x361a98=a98_0x19b8,_0x55010e=_0x5d4bcb();while(!![]){try{const _0x1cad67=parseInt(_0x361a98(0x19f))/0x1*(-parseInt(_0x361a98(0x190))/0x2)+parseInt(_0x361a98(0x197))/0x3*(-parseInt(_0x361a98(0x1d1))/0x4)+-parseInt(_0x361a98(0x1bf))/0x5+parseInt(_0x361a98(0x1b1))/0x6+-parseInt(_0x361a98(0x191))/0x7+-parseInt(_0x361a98(0x1ca))/0x8*(-parseInt(_0x361a98(0x1b3))/0x9)+parseInt(_0x361a98(0x1a3))/0xa*(parseInt(_0x361a98(0x1b4))/0xb);if(_0x1cad67===_0x186c6e)break;else _0x55010e['push'](_0x55010e['shift']());}catch(_0x19d8de){_0x55010e['push'](_0x55010e['shift']());}}}(a98_0x4eed,0x8ae77));const a98_0x52dc6c=(function(){let _0x3f4f1d=!![];return function(_0x5667a7,_0x19d2b3){const _0x49191b=_0x3f4f1d?function(){const _0x203e38=a98_0x19b8;if(_0x19d2b3){const _0x179c45=_0x19d2b3[_0x203e38(0x19d)](_0x5667a7,arguments);return _0x19d2b3=null,_0x179c45;}}:function(){};return _0x3f4f1d=![],_0x49191b;};}()),a98_0x1f681e=a98_0x52dc6c(this,function(){const _0x494bae=a98_0x19b8;return a98_0x1f681e[_0x494bae(0x1a1)]()[_0x494bae(0x1c4)](_0x494bae(0x1bd))[_0x494bae(0x1a1)]()[_0x494bae(0x1d5)](a98_0x1f681e)['search'](_0x494bae(0x1bd));});a98_0x1f681e();'use strict';var __createBinding=this&&this[a98_0x572ba4(0x19b)]||(Object['create']?function(_0x2a7051,_0x4f554b,_0x48ec43,_0x1a1209){const _0x17f489=a98_0x572ba4;if(_0x1a1209===undefined)_0x1a1209=_0x48ec43;var _0x2cd773=Object[_0x17f489(0x1b0)](_0x4f554b,_0x48ec43);(!_0x2cd773||(_0x17f489(0x1c1)in _0x2cd773?!_0x4f554b[_0x17f489(0x1c3)]:_0x2cd773[_0x17f489(0x1be)]||_0x2cd773['configurable']))&&(_0x2cd773={'enumerable':!![],'get':function(){return _0x4f554b[_0x48ec43];}}),Object[_0x17f489(0x193)](_0x2a7051,_0x1a1209,_0x2cd773);}:function(_0x49cac3,_0x3a37d5,_0xc1a13c,_0x49e202){if(_0x49e202===undefined)_0x49e202=_0xc1a13c;_0x49cac3[_0x49e202]=_0x3a37d5[_0xc1a13c];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a98_0x572ba4(0x1c2)]?function(_0x5a4ec1,_0x534e6e){const _0x4c0178=a98_0x572ba4;Object['defineProperty'](_0x5a4ec1,_0x4c0178(0x1c7),{'enumerable':!![],'value':_0x534e6e});}:function(_0x62b18d,_0x5c3eb8){const _0x5032ba=a98_0x572ba4;_0x62b18d[_0x5032ba(0x1c7)]=_0x5c3eb8;}),__importStar=this&&this[a98_0x572ba4(0x1ab)]||function(_0x5eee5f){const _0x4df265=a98_0x572ba4;if(_0x5eee5f&&_0x5eee5f['__esModule'])return _0x5eee5f;var _0x26fcbe={};if(_0x5eee5f!=null){for(var _0x3a125a in _0x5eee5f)if(_0x3a125a!==_0x4df265(0x1c7)&&Object[_0x4df265(0x195)][_0x4df265(0x1aa)][_0x4df265(0x1c5)](_0x5eee5f,_0x3a125a))__createBinding(_0x26fcbe,_0x5eee5f,_0x3a125a);}return __setModuleDefault(_0x26fcbe,_0x5eee5f),_0x26fcbe;},__importDefault=this&&this[a98_0x572ba4(0x19c)]||function(_0x348279){return _0x348279&&_0x348279['__esModule']?_0x348279:{'default':_0x348279};};function a98_0x19b8(_0x21138e,_0x5c1d80){const _0x200b36=a98_0x4eed();return a98_0x19b8=function(_0x1f681e,_0x52dc6c){_0x1f681e=_0x1f681e-0x190;let _0x4eedbf=_0x200b36[_0x1f681e];return _0x4eedbf;},a98_0x19b8(_0x21138e,_0x5c1d80);}Object[a98_0x572ba4(0x193)](exports,a98_0x572ba4(0x1c3),{'value':!![]}),exports[a98_0x572ba4(0x19a)]=void 0x0;function a98_0x4eed(){const _0x16b5a2=['\x20not\x20found.','logErrorStartJob','../../../configs/path','(((.+)+)+)+$','writable','5316490ilGkNJ','message','get','create','__esModule','search','call','@flosum/utils','default','catch','writeFile','8855624zfDLKY','../job/classes/logger/logger-job-state','getJobDetails','../../../constants/job','csv-parse/sync','setJobStatus','JOB_LOG_DETAILS_NAME','4jlnroY','Job\x20Id\x20not\x20found.','generateJobId','NotFoundError','constructor','JOB_PATH','../../shared/utils/fs.utils','completedDate','../../shared/utils/job.utils','isExistsPath','DATA_MASKING_FOLDER_NAME','getLog','9568Xqytiu','5395929wMWfsq','../../../core/errors/not-found.error','defineProperty','setJobError','prototype','maskingFolderPath','1205676rKFmXE','utf-8','FsUtils','MaskingService','__createBinding','__importDefault','apply','dataPath','169JWyhmA','parse','toString','runJob','30rIEaVH','push','JOB_LOG_DETAILS_FILENAME','stringify','MANIFEST_FILENAME','../job/enums/logger.enums','LoggerJobState','hasOwnProperty','__importStar','successful','join','failed','path','getOwnPropertyDescriptor','5649324lSidle','JobStatus','9ASEjTj','5738249crkcOY','readFile','sortJobsIds','status','getJobsIds','getJobs'];a98_0x4eed=function(){return _0x16b5a2;};return a98_0x4eed();}const path_1=__importStar(require(a98_0x572ba4(0x1af))),fs_utils_1=require(a98_0x572ba4(0x1d7)),promises_1=require('fs/promises'),logger_job_state_1=require(a98_0x572ba4(0x1cb)),logger_enums_1=require(a98_0x572ba4(0x1a8)),sync_1=require(a98_0x572ba4(0x1ce)),utils_1=require(a98_0x572ba4(0x1c6)),not_found_error_1=require(a98_0x572ba4(0x192)),job_1=require(a98_0x572ba4(0x1cd)),job_utils_1=__importDefault(require(a98_0x572ba4(0x1d9))),constants_1=require('../constants'),path_2=require(a98_0x572ba4(0x1bc));class MaskingService{static async['createMaskingJob'](_0x25aed0){const _0x4bca38=a98_0x572ba4,_0x52c7aa=job_utils_1[_0x4bca38(0x1c7)][_0x4bca38(0x1d3)](),_0x2350d7=(0x0,path_1['join'])(MaskingService[_0x4bca38(0x196)],_0x52c7aa);await(0x0,fs_utils_1['makeDir'])(_0x2350d7),await(0x0,promises_1[_0x4bca38(0x1c9)])(_0x2350d7+'/'+job_1[_0x4bca38(0x1a7)],JSON[_0x4bca38(0x1a6)]({'details':_0x25aed0}));const _0x4692be=await new logger_job_state_1[(_0x4bca38(0x1a9))](_0x2350d7,_0x52c7aa)['init']([]);await _0x4692be['kill']();const _0x1a35fb=path_1[_0x4bca38(0x1c7)][_0x4bca38(0x1ad)](__dirname,job_1[_0x4bca38(0x1d6)]);return job_utils_1[_0x4bca38(0x1c7)][_0x4bca38(0x1a2)](_0x1a35fb,{'jobStorePath':_0x2350d7,'jobId':_0x52c7aa})[_0x4bca38(0x1c8)](_0x1b99b4=>this[_0x4bca38(0x1bb)](_0x2350d7,_0x52c7aa,_0x1b99b4)),{'jobId':_0x52c7aa};}static async[a98_0x572ba4(0x1b9)](_0x57fec2,_0x5235c2){const _0x475d79=a98_0x572ba4,_0x1dc5c6=await job_utils_1[_0x475d79(0x1c7)][_0x475d79(0x1b8)](MaskingService['maskingFolderPath']),_0x43b414=await job_utils_1[_0x475d79(0x1c7)][_0x475d79(0x1b6)](MaskingService[_0x475d79(0x196)],_0x1dc5c6),_0x5911b8=_0x43b414['slice'](_0x5235c2,_0x5235c2+_0x57fec2),_0x49576c=[];for(const _0x362971 of _0x5911b8){const _0x3bee33=await this['getJobState'](_0x362971,![]);_0x49576c[_0x475d79(0x1a4)](_0x3bee33);}return _0x49576c;}static async['getJobState'](_0x3ba1cd,_0x3e60d9){const _0x4a3cba=a98_0x572ba4,_0x1d3973=await this[_0x4a3cba(0x1dc)](_0x3ba1cd,job_1['JOB_LOG_STATE_FILENAME'],constants_1['JOB_LOG_STATE_NAME']),_0x24ae49=JSON[_0x4a3cba(0x1a0)](_0x1d3973),_0xeab039={'id':_0x24ae49['id'],'status':_0x24ae49[_0x4a3cba(0x1b7)],'createdDate':_0x24ae49['createdDate'],'completedDate':_0x24ae49[_0x4a3cba(0x1d8)],'successful':_0x24ae49[_0x4a3cba(0x1ac)],'failed':_0x24ae49[_0x4a3cba(0x1ae)]};return _0x3e60d9?_0x24ae49:_0xeab039;}static async[a98_0x572ba4(0x1cc)](_0x47ecda){const _0x1cc82f=a98_0x572ba4,_0x223728=await this[_0x1cc82f(0x1dc)](_0x47ecda,job_1[_0x1cc82f(0x1a5)],constants_1[_0x1cc82f(0x1d0)]);return(0x0,sync_1['parse'])(_0x223728,{'columns':!![]});}static async['getLog'](_0x4609ef,_0x562f57,_0x17d6e1){const _0x8efac4=a98_0x572ba4,_0x470376=(0x0,path_1[_0x8efac4(0x1ad)])(MaskingService['maskingFolderPath'],_0x4609ef),_0x20b3f5=(0x0,path_1[_0x8efac4(0x1ad)])(_0x470376,_0x562f57);if(!await utils_1[_0x8efac4(0x199)][_0x8efac4(0x1da)](_0x470376))throw new not_found_error_1[(_0x8efac4(0x1d4))](_0x8efac4(0x1d2));if(!await utils_1[_0x8efac4(0x199)][_0x8efac4(0x1da)](_0x20b3f5))throw new not_found_error_1[(_0x8efac4(0x1d4))](_0x17d6e1+_0x8efac4(0x1ba));return(0x0,promises_1[_0x8efac4(0x1b5)])(_0x20b3f5,{'encoding':_0x8efac4(0x198)});}static async[a98_0x572ba4(0x1bb)](_0x51d7d9,_0x274e55,_0x58f27a){const _0x2aca13=a98_0x572ba4,_0x6615cf=await new logger_job_state_1[(_0x2aca13(0x1a9))](_0x51d7d9,_0x274e55)['init']([]);_0x6615cf[_0x2aca13(0x1cf)](logger_enums_1[_0x2aca13(0x1b2)]['FAILED']),_0x6615cf[_0x2aca13(0x194)](_0x58f27a[_0x2aca13(0x1c0)]),await _0x6615cf['kill']();}}exports[a98_0x572ba4(0x19a)]=MaskingService,MaskingService[a98_0x572ba4(0x196)]=path_1['default'][a98_0x572ba4(0x1ad)](path_2[a98_0x572ba4(0x19e)],constants_1[a98_0x572ba4(0x1db)]);