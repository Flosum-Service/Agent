const a96_0x2eb73e=a96_0x31ff;function a96_0x5d67(){const _0x2b2af4=['defineProperty','isExistsPath','10ABoHYh','parse','writeFile','JOB_PATH','20399744itosRW','setJobError','__importStar','successful','get','configurable','JOB_LOG_DETAILS_FILENAME','../../../configs/path','getLog','MaskingService','hasOwnProperty','kill','setJobStatus','JobStatus','../constants','JOB_LOG_STATE_NAME','3001842kXTmfE','apply','sortJobsIds','getJobState','../job/enums/logger.enums','__esModule','350691koRcaR','889483msPcEb','getOwnPropertyDescriptor','\x20not\x20found.','join','search','prototype','message','maskingFolderPath','DATA_MASKING_FOLDER_NAME','slice','completedDate','__createBinding','create','generateJobId','4457856NmRyaz','Job\x20Id\x20not\x20found.','csv-parse/sync','__setModuleDefault','getJobsIds','4984410Jjrofx','FsUtils','toString','failed','MANIFEST_FILENAME','constructor','readFile','__importDefault','call','JOB_LOG_DETAILS_NAME','runJob','default','createMaskingJob','NotFoundError','stringify','createdDate','../../shared/utils/fs.utils','@flosum/utils','path','getJobDetails','LoggerJobState','7790671IYoYKM','logErrorStartJob','dataPath','(((.+)+)+)+$','init','FAILED','getJobs','fs/promises'];a96_0x5d67=function(){return _0x2b2af4;};return a96_0x5d67();}(function(_0x2e8f07,_0x4abdf6){const _0x494020=a96_0x31ff,_0x5c5bc6=_0x2e8f07();while(!![]){try{const _0x574aff=-parseInt(_0x494020(0xcb))/0x1+parseInt(_0x494020(0xb0))/0x2*(-parseInt(_0x494020(0xca))/0x3)+parseInt(_0x494020(0x8c))/0x4+-parseInt(_0x494020(0x91))/0x5+parseInt(_0x494020(0xc4))/0x6+-parseInt(_0x494020(0xa6))/0x7+parseInt(_0x494020(0xb4))/0x8;if(_0x574aff===_0x4abdf6)break;else _0x5c5bc6['push'](_0x5c5bc6['shift']());}catch(_0x36415a){_0x5c5bc6['push'](_0x5c5bc6['shift']());}}}(a96_0x5d67,0x8dd48));const a96_0x5ae1ef=(function(){let _0x4b7a86=!![];return function(_0x2444e9,_0x59969c){const _0x28a231=_0x4b7a86?function(){const _0x58eb5c=a96_0x31ff;if(_0x59969c){const _0x5b3f85=_0x59969c[_0x58eb5c(0xc5)](_0x2444e9,arguments);return _0x59969c=null,_0x5b3f85;}}:function(){};return _0x4b7a86=![],_0x28a231;};}()),a96_0xb64372=a96_0x5ae1ef(this,function(){const _0x36473e=a96_0x31ff;return a96_0xb64372[_0x36473e(0x93)]()[_0x36473e(0xcf)]('(((.+)+)+)+$')[_0x36473e(0x93)]()[_0x36473e(0x96)](a96_0xb64372)['search'](_0x36473e(0xa9));});a96_0xb64372();'use strict';function a96_0x31ff(_0x19434b,_0x2a187e){const _0x55cc44=a96_0x5d67();return a96_0x31ff=function(_0xb64372,_0x5ae1ef){_0xb64372=_0xb64372-0x83;let _0x5d6715=_0x55cc44[_0xb64372];return _0x5d6715;},a96_0x31ff(_0x19434b,_0x2a187e);}var __createBinding=this&&this[a96_0x2eb73e(0x89)]||(Object[a96_0x2eb73e(0x8a)]?function(_0x498faf,_0x2d40ee,_0x2a05dd,_0xadd957){const _0x375774=a96_0x2eb73e;if(_0xadd957===undefined)_0xadd957=_0x2a05dd;var _0x492d76=Object[_0x375774(0xcc)](_0x2d40ee,_0x2a05dd);(!_0x492d76||(_0x375774(0xb8)in _0x492d76?!_0x2d40ee['__esModule']:_0x492d76['writable']||_0x492d76[_0x375774(0xb9)]))&&(_0x492d76={'enumerable':!![],'get':function(){return _0x2d40ee[_0x2a05dd];}}),Object[_0x375774(0xae)](_0x498faf,_0xadd957,_0x492d76);}:function(_0x20359a,_0x4c33c3,_0x85450b,_0x5d015f){if(_0x5d015f===undefined)_0x5d015f=_0x85450b;_0x20359a[_0x5d015f]=_0x4c33c3[_0x85450b];}),__setModuleDefault=this&&this[a96_0x2eb73e(0x8f)]||(Object[a96_0x2eb73e(0x8a)]?function(_0x3b7765,_0x2edfe6){const _0x2304f9=a96_0x2eb73e;Object[_0x2304f9(0xae)](_0x3b7765,'default',{'enumerable':!![],'value':_0x2edfe6});}:function(_0x58f816,_0x2d5290){_0x58f816['default']=_0x2d5290;}),__importStar=this&&this[a96_0x2eb73e(0xb6)]||function(_0x68d027){const _0x2175e7=a96_0x2eb73e;if(_0x68d027&&_0x68d027[_0x2175e7(0xc9)])return _0x68d027;var _0x1290d7={};if(_0x68d027!=null){for(var _0x2c3c49 in _0x68d027)if(_0x2c3c49!=='default'&&Object[_0x2175e7(0x83)][_0x2175e7(0xbe)][_0x2175e7(0x99)](_0x68d027,_0x2c3c49))__createBinding(_0x1290d7,_0x68d027,_0x2c3c49);}return __setModuleDefault(_0x1290d7,_0x68d027),_0x1290d7;},__importDefault=this&&this[a96_0x2eb73e(0x98)]||function(_0x586797){const _0x174af7=a96_0x2eb73e;return _0x586797&&_0x586797[_0x174af7(0xc9)]?_0x586797:{'default':_0x586797};};Object[a96_0x2eb73e(0xae)](exports,a96_0x2eb73e(0xc9),{'value':!![]}),exports[a96_0x2eb73e(0xbd)]=void 0x0;const path_1=__importStar(require(a96_0x2eb73e(0xa3))),fs_utils_1=require(a96_0x2eb73e(0xa1)),promises_1=require(a96_0x2eb73e(0xad)),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a96_0x2eb73e(0xc8)),sync_1=require(a96_0x2eb73e(0x8e)),utils_1=require(a96_0x2eb73e(0xa2)),not_found_error_1=require('../../../core/errors/not-found.error'),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a96_0x2eb73e(0xc2)),path_2=require(a96_0x2eb73e(0xbb));class MaskingService{static async[a96_0x2eb73e(0x9d)](_0x72be9b){const _0x2ec9ff=a96_0x2eb73e,_0x2f65ba=job_utils_1[_0x2ec9ff(0x9c)][_0x2ec9ff(0x8b)](),_0x2b1df6=(0x0,path_1[_0x2ec9ff(0xce)])(MaskingService[_0x2ec9ff(0x85)],_0x2f65ba);await(0x0,fs_utils_1['makeDir'])(_0x2b1df6),await(0x0,promises_1[_0x2ec9ff(0xb2)])(_0x2b1df6+'/'+job_1[_0x2ec9ff(0x95)],JSON[_0x2ec9ff(0x9f)]({'details':_0x72be9b}));const _0x17b128=await new logger_job_state_1[(_0x2ec9ff(0xa5))](_0x2b1df6,_0x2f65ba)[_0x2ec9ff(0xaa)]([]);await _0x17b128['kill']();const _0x33153d=path_1[_0x2ec9ff(0x9c)][_0x2ec9ff(0xce)](__dirname,job_1[_0x2ec9ff(0xb3)]);return job_utils_1['default'][_0x2ec9ff(0x9b)](_0x33153d,{'jobStorePath':_0x2b1df6,'jobId':_0x2f65ba})['catch'](_0x3885dc=>this[_0x2ec9ff(0xa7)](_0x2b1df6,_0x2f65ba,_0x3885dc)),{'jobId':_0x2f65ba};}static async[a96_0x2eb73e(0xac)](_0x19bbf5,_0x3e3ca1){const _0x25f590=a96_0x2eb73e,_0x4f4c77=await job_utils_1[_0x25f590(0x9c)][_0x25f590(0x90)](MaskingService['maskingFolderPath']),_0x26d95f=await job_utils_1[_0x25f590(0x9c)][_0x25f590(0xc6)](MaskingService[_0x25f590(0x85)],_0x4f4c77),_0x5daaa1=_0x26d95f[_0x25f590(0x87)](_0x3e3ca1,_0x3e3ca1+_0x19bbf5),_0x24b6b8=[];for(const _0x64b059 of _0x5daaa1){const _0x3348f8=await this[_0x25f590(0xc7)](_0x64b059,![]);_0x24b6b8['push'](_0x3348f8);}return _0x24b6b8;}static async[a96_0x2eb73e(0xc7)](_0x54d024,_0x4ba6da){const _0x3c07e3=a96_0x2eb73e,_0xbba1f6=await this[_0x3c07e3(0xbc)](_0x54d024,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x3c07e3(0xc3)]),_0xd8be7e=JSON['parse'](_0xbba1f6),_0xe1791f={'id':_0xd8be7e['id'],'status':_0xd8be7e['status'],'createdDate':_0xd8be7e[_0x3c07e3(0xa0)],'completedDate':_0xd8be7e[_0x3c07e3(0x88)],'successful':_0xd8be7e[_0x3c07e3(0xb7)],'failed':_0xd8be7e[_0x3c07e3(0x94)]};return _0x4ba6da?_0xd8be7e:_0xe1791f;}static async[a96_0x2eb73e(0xa4)](_0xfa6da5){const _0x2a4d13=a96_0x2eb73e,_0x211bc4=await this[_0x2a4d13(0xbc)](_0xfa6da5,job_1[_0x2a4d13(0xba)],constants_1[_0x2a4d13(0x9a)]);return(0x0,sync_1[_0x2a4d13(0xb1)])(_0x211bc4,{'columns':!![]});}static async['getLog'](_0x40b764,_0x164aa6,_0x50400d){const _0x22278c=a96_0x2eb73e,_0x578f44=(0x0,path_1[_0x22278c(0xce)])(MaskingService[_0x22278c(0x85)],_0x40b764),_0x5a15a1=(0x0,path_1['join'])(_0x578f44,_0x164aa6);if(!await utils_1[_0x22278c(0x92)][_0x22278c(0xaf)](_0x578f44))throw new not_found_error_1[(_0x22278c(0x9e))](_0x22278c(0x8d));if(!await utils_1[_0x22278c(0x92)]['isExistsPath'](_0x5a15a1))throw new not_found_error_1[(_0x22278c(0x9e))](_0x50400d+_0x22278c(0xcd));return(0x0,promises_1[_0x22278c(0x97)])(_0x5a15a1,{'encoding':'utf-8'});}static async[a96_0x2eb73e(0xa7)](_0x39d363,_0xef3f5f,_0x44d2d1){const _0x545596=a96_0x2eb73e,_0x4c8451=await new logger_job_state_1[(_0x545596(0xa5))](_0x39d363,_0xef3f5f)[_0x545596(0xaa)]([]);_0x4c8451[_0x545596(0xc0)](logger_enums_1[_0x545596(0xc1)][_0x545596(0xab)]),_0x4c8451[_0x545596(0xb5)](_0x44d2d1[_0x545596(0x84)]),await _0x4c8451[_0x545596(0xbf)]();}}exports['MaskingService']=MaskingService,MaskingService[a96_0x2eb73e(0x85)]=path_1[a96_0x2eb73e(0x9c)][a96_0x2eb73e(0xce)](path_2[a96_0x2eb73e(0xa8)],constants_1[a96_0x2eb73e(0x86)]);