const a81_0x42312f=a81_0x149a;(function(_0x51de59,_0x1034c9){const _0x49e566=a81_0x149a,_0x89c89e=_0x51de59();while(!![]){try{const _0x5568e8=parseInt(_0x49e566(0x128))/0x1+parseInt(_0x49e566(0x122))/0x2+parseInt(_0x49e566(0x151))/0x3+-parseInt(_0x49e566(0x140))/0x4*(-parseInt(_0x49e566(0x11a))/0x5)+parseInt(_0x49e566(0x126))/0x6*(-parseInt(_0x49e566(0x156))/0x7)+parseInt(_0x49e566(0x12f))/0x8+-parseInt(_0x49e566(0x137))/0x9*(parseInt(_0x49e566(0x159))/0xa);if(_0x5568e8===_0x1034c9)break;else _0x89c89e['push'](_0x89c89e['shift']());}catch(_0x497125){_0x89c89e['push'](_0x89c89e['shift']());}}}(a81_0x1835,0x395fd));const a81_0x2151fa=(function(){let _0x37b368=!![];return function(_0x466728,_0x3af6ab){const _0x4aef17=_0x37b368?function(){const _0x56e158=a81_0x149a;if(_0x3af6ab){const _0x4dcd6e=_0x3af6ab[_0x56e158(0x124)](_0x466728,arguments);return _0x3af6ab=null,_0x4dcd6e;}}:function(){};return _0x37b368=![],_0x4aef17;};}()),a81_0x111aef=a81_0x2151fa(this,function(){const _0x2b96a2=a81_0x149a;return a81_0x111aef[_0x2b96a2(0x13e)]()['search'](_0x2b96a2(0x14b))[_0x2b96a2(0x13e)]()['constructor'](a81_0x111aef)[_0x2b96a2(0x11d)](_0x2b96a2(0x14b));});a81_0x111aef();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a81_0x42312f(0x145)]?function(_0x29e098,_0x5abf53,_0x17b3d2,_0xe237f3){const _0x1cae96=a81_0x42312f;if(_0xe237f3===undefined)_0xe237f3=_0x17b3d2;var _0x27a1a6=Object[_0x1cae96(0x153)](_0x5abf53,_0x17b3d2);(!_0x27a1a6||(_0x1cae96(0x125)in _0x27a1a6?!_0x5abf53[_0x1cae96(0x15e)]:_0x27a1a6[_0x1cae96(0x11c)]||_0x27a1a6['configurable']))&&(_0x27a1a6={'enumerable':!![],'get':function(){return _0x5abf53[_0x17b3d2];}}),Object['defineProperty'](_0x29e098,_0xe237f3,_0x27a1a6);}:function(_0x221d23,_0xb6a283,_0x598126,_0x5454c8){if(_0x5454c8===undefined)_0x5454c8=_0x598126;_0x221d23[_0x5454c8]=_0xb6a283[_0x598126];}),__setModuleDefault=this&&this[a81_0x42312f(0x129)]||(Object[a81_0x42312f(0x145)]?function(_0x386195,_0x18f11a){const _0x43aa7d=a81_0x42312f;Object[_0x43aa7d(0x15c)](_0x386195,'default',{'enumerable':!![],'value':_0x18f11a});}:function(_0x1be96b,_0x1a7628){const _0x5ae407=a81_0x42312f;_0x1be96b[_0x5ae407(0x136)]=_0x1a7628;}),__importStar=this&&this[a81_0x42312f(0x130)]||function(_0x4c1bab){const _0x39e6b6=a81_0x42312f;if(_0x4c1bab&&_0x4c1bab[_0x39e6b6(0x15e)])return _0x4c1bab;var _0x2cda02={};if(_0x4c1bab!=null){for(var _0x23d6bc in _0x4c1bab)if(_0x23d6bc!==_0x39e6b6(0x136)&&Object[_0x39e6b6(0x134)][_0x39e6b6(0x117)][_0x39e6b6(0x158)](_0x4c1bab,_0x23d6bc))__createBinding(_0x2cda02,_0x4c1bab,_0x23d6bc);}return __setModuleDefault(_0x2cda02,_0x4c1bab),_0x2cda02;},__importDefault=this&&this[a81_0x42312f(0x121)]||function(_0x13339d){const _0x568e85=a81_0x42312f;return _0x13339d&&_0x13339d[_0x568e85(0x15e)]?_0x13339d:{'default':_0x13339d};};function a81_0x1835(){const _0x97a752=['search','setJobStatus','NotFoundError','@flosum/utils','__importDefault','870448krIDnZ','MANIFEST_FILENAME','apply','get','430818NFmUMu','MaskingService','30010iaqOQp','__setModuleDefault','kill','failed','getJobs','makeDir','csv-parse/sync','1202088NgMXkz','__importStar','JOB_LOG_DETAILS_FILENAME','successful','../job/enums/logger.enums','prototype','FsUtils','default','9981UxpOue','JOB_LOG_DETAILS_NAME','\x20not\x20found.','init','LoggerJobState','JOB_LOG_STATE_NAME','join','toString','../../shared/utils/job.utils','32IBzPJc','push','createMaskingJob','isExistsPath','JOB_PATH','create','maskingFolderPath','slice','path','completedDate','generateJobId','(((.+)+)+)+$','logErrorStartJob','readFile','getLog','dataPath','setJobError','562659OPCjyE','../constants','getOwnPropertyDescriptor','getJobState','../../../core/errors/not-found.error','28ZJoHtE','parse','call','5470kjWNcb','runJob','stringify','defineProperty','createdDate','__esModule','utf-8','Job\x20Id\x20not\x20found.','hasOwnProperty','../../../configs/path','../../shared/utils/fs.utils','203620qWWXjw','JOB_LOG_STATE_FILENAME','writable'];a81_0x1835=function(){return _0x97a752;};return a81_0x1835();}Object[a81_0x42312f(0x15c)](exports,'__esModule',{'value':!![]}),exports[a81_0x42312f(0x127)]=void 0x0;function a81_0x149a(_0x13c3f7,_0x38cff8){const _0x480a18=a81_0x1835();return a81_0x149a=function(_0x111aef,_0x2151fa){_0x111aef=_0x111aef-0x115;let _0x1835f9=_0x480a18[_0x111aef];return _0x1835f9;},a81_0x149a(_0x13c3f7,_0x38cff8);}const path_1=__importStar(require(a81_0x42312f(0x148))),fs_utils_1=require(a81_0x42312f(0x119)),promises_1=require('fs/promises'),logger_job_state_1=require('../job/classes/logger/logger-job-state'),logger_enums_1=require(a81_0x42312f(0x133)),sync_1=require(a81_0x42312f(0x12e)),utils_1=require(a81_0x42312f(0x120)),not_found_error_1=require(a81_0x42312f(0x155)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a81_0x42312f(0x13f))),constants_1=require(a81_0x42312f(0x152)),path_2=require(a81_0x42312f(0x118));class MaskingService{static async[a81_0x42312f(0x142)](_0x5ddaf3){const _0x535d62=a81_0x42312f,_0x594440=job_utils_1['default'][_0x535d62(0x14a)](),_0x32940c=(0x0,path_1[_0x535d62(0x13d)])(MaskingService['maskingFolderPath'],_0x594440);await(0x0,fs_utils_1[_0x535d62(0x12d)])(_0x32940c),await(0x0,promises_1['writeFile'])(_0x32940c+'/'+job_1[_0x535d62(0x123)],JSON[_0x535d62(0x15b)]({'details':_0x5ddaf3}));const _0x143fba=await new logger_job_state_1[(_0x535d62(0x13b))](_0x32940c,_0x594440)[_0x535d62(0x13a)]([]);await _0x143fba['kill']();const _0x948bdb=path_1[_0x535d62(0x136)][_0x535d62(0x13d)](__dirname,job_1[_0x535d62(0x144)]);return job_utils_1[_0x535d62(0x136)][_0x535d62(0x15a)](_0x948bdb,{'jobStorePath':_0x32940c,'jobId':_0x594440})['catch'](_0x57c234=>this[_0x535d62(0x14c)](_0x32940c,_0x594440,_0x57c234)),{'jobId':_0x594440};}static async[a81_0x42312f(0x12c)](_0x15cca4,_0x187834){const _0x24e3a4=a81_0x42312f,_0x348c64=await job_utils_1['default']['getJobsIds'](MaskingService[_0x24e3a4(0x146)]),_0x3323f0=await job_utils_1[_0x24e3a4(0x136)]['sortJobsIds'](MaskingService[_0x24e3a4(0x146)],_0x348c64),_0xefc698=_0x3323f0[_0x24e3a4(0x147)](_0x187834,_0x187834+_0x15cca4),_0x2f3ec3=[];for(const _0x2f6777 of _0xefc698){const _0x1d08a6=await this[_0x24e3a4(0x154)](_0x2f6777,![]);_0x2f3ec3[_0x24e3a4(0x141)](_0x1d08a6);}return _0x2f3ec3;}static async[a81_0x42312f(0x154)](_0x57d6f4,_0x40c66c){const _0x5e3506=a81_0x42312f,_0x47da27=await this[_0x5e3506(0x14e)](_0x57d6f4,job_1[_0x5e3506(0x11b)],constants_1[_0x5e3506(0x13c)]),_0x16210c=JSON[_0x5e3506(0x157)](_0x47da27),_0x8b1173={'id':_0x16210c['id'],'status':_0x16210c['status'],'createdDate':_0x16210c[_0x5e3506(0x15d)],'completedDate':_0x16210c[_0x5e3506(0x149)],'successful':_0x16210c[_0x5e3506(0x132)],'failed':_0x16210c[_0x5e3506(0x12b)]};return _0x40c66c?_0x16210c:_0x8b1173;}static async['getJobDetails'](_0x4359aa){const _0xb16728=a81_0x42312f,_0x3ce2fc=await this[_0xb16728(0x14e)](_0x4359aa,job_1[_0xb16728(0x131)],constants_1[_0xb16728(0x138)]);return(0x0,sync_1[_0xb16728(0x157)])(_0x3ce2fc,{'columns':!![]});}static async['getLog'](_0x4f38ce,_0x5d6b76,_0x19857e){const _0x16aa73=a81_0x42312f,_0x57ba2e=(0x0,path_1[_0x16aa73(0x13d)])(MaskingService[_0x16aa73(0x146)],_0x4f38ce),_0x20a5c1=(0x0,path_1[_0x16aa73(0x13d)])(_0x57ba2e,_0x5d6b76);if(!await utils_1['FsUtils'][_0x16aa73(0x143)](_0x57ba2e))throw new not_found_error_1[(_0x16aa73(0x11f))](_0x16aa73(0x116));if(!await utils_1[_0x16aa73(0x135)]['isExistsPath'](_0x20a5c1))throw new not_found_error_1['NotFoundError'](_0x19857e+_0x16aa73(0x139));return(0x0,promises_1[_0x16aa73(0x14d)])(_0x20a5c1,{'encoding':_0x16aa73(0x115)});}static async['logErrorStartJob'](_0x4b6c73,_0x1302f4,_0x3f589f){const _0x40f234=a81_0x42312f,_0x2e654b=await new logger_job_state_1[(_0x40f234(0x13b))](_0x4b6c73,_0x1302f4)[_0x40f234(0x13a)]([]);_0x2e654b[_0x40f234(0x11e)](logger_enums_1['JobStatus']['FAILED']),_0x2e654b[_0x40f234(0x150)](_0x3f589f['message']),await _0x2e654b[_0x40f234(0x12a)]();}}exports[a81_0x42312f(0x127)]=MaskingService,MaskingService[a81_0x42312f(0x146)]=path_1[a81_0x42312f(0x136)][a81_0x42312f(0x13d)](path_2[a81_0x42312f(0x14f)],constants_1['DATA_MASKING_FOLDER_NAME']);