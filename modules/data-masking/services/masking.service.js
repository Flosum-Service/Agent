function a81_0x3ca1(_0x44a05c,_0x3dfe5c){const _0x29bb33=a81_0x1b19();return a81_0x3ca1=function(_0x27e3ca,_0x2fc704){_0x27e3ca=_0x27e3ca-0x16f;let _0x1b1928=_0x29bb33[_0x27e3ca];return _0x1b1928;},a81_0x3ca1(_0x44a05c,_0x3dfe5c);}const a81_0x41ad17=a81_0x3ca1;(function(_0x10ed01,_0xc97d8e){const _0x5e5536=a81_0x3ca1,_0x1a9753=_0x10ed01();while(!![]){try{const _0x1a4949=parseInt(_0x5e5536(0x195))/0x1+-parseInt(_0x5e5536(0x192))/0x2*(parseInt(_0x5e5536(0x1a4))/0x3)+-parseInt(_0x5e5536(0x1b8))/0x4+-parseInt(_0x5e5536(0x187))/0x5+parseInt(_0x5e5536(0x1bb))/0x6+parseInt(_0x5e5536(0x193))/0x7+parseInt(_0x5e5536(0x1a7))/0x8*(parseInt(_0x5e5536(0x199))/0x9);if(_0x1a4949===_0xc97d8e)break;else _0x1a9753['push'](_0x1a9753['shift']());}catch(_0x303c13){_0x1a9753['push'](_0x1a9753['shift']());}}}(a81_0x1b19,0xc5877));const a81_0x2fc704=(function(){let _0x2cafa9=!![];return function(_0x24450a,_0x475d19){const _0x5c4b47=_0x2cafa9?function(){const _0x4424d0=a81_0x3ca1;if(_0x475d19){const _0x1ee009=_0x475d19[_0x4424d0(0x1b9)](_0x24450a,arguments);return _0x475d19=null,_0x1ee009;}}:function(){};return _0x2cafa9=![],_0x5c4b47;};}()),a81_0x27e3ca=a81_0x2fc704(this,function(){const _0x7dc694=a81_0x3ca1;return a81_0x27e3ca[_0x7dc694(0x1ba)]()[_0x7dc694(0x181)](_0x7dc694(0x17b))['toString']()['constructor'](a81_0x27e3ca)[_0x7dc694(0x181)](_0x7dc694(0x17b));});a81_0x27e3ca();'use strict';var __createBinding=this&&this[a81_0x41ad17(0x1b4)]||(Object[a81_0x41ad17(0x19c)]?function(_0x1898bd,_0x4b89f0,_0x5f062f,_0x50359d){const _0x854f7a=a81_0x41ad17;if(_0x50359d===undefined)_0x50359d=_0x5f062f;var _0x37205d=Object[_0x854f7a(0x1ac)](_0x4b89f0,_0x5f062f);(!_0x37205d||('get'in _0x37205d?!_0x4b89f0['__esModule']:_0x37205d[_0x854f7a(0x1b5)]||_0x37205d[_0x854f7a(0x1a0)]))&&(_0x37205d={'enumerable':!![],'get':function(){return _0x4b89f0[_0x5f062f];}}),Object[_0x854f7a(0x174)](_0x1898bd,_0x50359d,_0x37205d);}:function(_0x4aab3,_0x27b4f2,_0x2ececc,_0x18773e){if(_0x18773e===undefined)_0x18773e=_0x2ececc;_0x4aab3[_0x18773e]=_0x27b4f2[_0x2ececc];}),__setModuleDefault=this&&this[a81_0x41ad17(0x183)]||(Object[a81_0x41ad17(0x19c)]?function(_0x35cbb1,_0x35a1a7){const _0x208bac=a81_0x41ad17;Object[_0x208bac(0x174)](_0x35cbb1,_0x208bac(0x17d),{'enumerable':!![],'value':_0x35a1a7});}:function(_0x48b730,_0xf0e422){_0x48b730['default']=_0xf0e422;}),__importStar=this&&this['__importStar']||function(_0x2e7d13){const _0x110dae=a81_0x41ad17;if(_0x2e7d13&&_0x2e7d13[_0x110dae(0x184)])return _0x2e7d13;var _0x3c8ca3={};if(_0x2e7d13!=null){for(var _0x4e78fa in _0x2e7d13)if(_0x4e78fa!=='default'&&Object[_0x110dae(0x1b1)][_0x110dae(0x19e)]['call'](_0x2e7d13,_0x4e78fa))__createBinding(_0x3c8ca3,_0x2e7d13,_0x4e78fa);}return __setModuleDefault(_0x3c8ca3,_0x2e7d13),_0x3c8ca3;},__importDefault=this&&this[a81_0x41ad17(0x1b6)]||function(_0x48d60b){const _0xe5923=a81_0x41ad17;return _0x48d60b&&_0x48d60b[_0xe5923(0x184)]?_0x48d60b:{'default':_0x48d60b};};Object[a81_0x41ad17(0x174)](exports,'__esModule',{'value':!![]}),exports[a81_0x41ad17(0x198)]=void 0x0;const path_1=__importStar(require(a81_0x41ad17(0x18b))),fs_utils_1=require(a81_0x41ad17(0x186)),promises_1=require(a81_0x41ad17(0x177)),logger_job_state_1=require(a81_0x41ad17(0x1a3)),logger_enums_1=require(a81_0x41ad17(0x18c)),sync_1=require('csv-parse/sync'),utils_1=require(a81_0x41ad17(0x1a1)),not_found_error_1=require(a81_0x41ad17(0x1b7)),job_1=require(a81_0x41ad17(0x170)),job_utils_1=__importDefault(require(a81_0x41ad17(0x1a6))),constants_1=require(a81_0x41ad17(0x17a)),path_2=require(a81_0x41ad17(0x18f));function a81_0x1b19(){const _0x20c852=['../../shared/utils/job.utils','413608enHHqU','failed','maskingFolderPath','init','dataPath','getOwnPropertyDescriptor','kill','isExistsPath','LoggerJobState','push','prototype','getJobDetails','createdDate','__createBinding','writable','__importDefault','../../../core/errors/not-found.error','6315940kVLXto','apply','toString','1556892LfZZFT','parse','../../../constants/job','successful','JOB_PATH','getLog','defineProperty','getJobs','catch','fs/promises','status','join','../constants','(((.+)+)+)+$','runJob','default','readFile','\x20not\x20found.','FsUtils','search','FAILED','__setModuleDefault','__esModule','JOB_LOG_STATE_NAME','../../shared/utils/fs.utils','3028375CfSSUs','generateJobId','setJobError','NotFoundError','path','../job/enums/logger.enums','slice','Job\x20Id\x20not\x20found.','../../../configs/path','DATA_MASKING_FOLDER_NAME','message','46RKfpet','8840720AKqHGn','utf-8','339650CSceYd','logErrorStartJob','MANIFEST_FILENAME','MaskingService','342NKQXyA','JobStatus','JOB_LOG_DETAILS_FILENAME','create','stringify','hasOwnProperty','sortJobsIds','configurable','@flosum/utils','getJobState','../job/classes/logger/logger-job-state','108651JjoFpz','JOB_LOG_DETAILS_NAME'];a81_0x1b19=function(){return _0x20c852;};return a81_0x1b19();}class MaskingService{static async['createMaskingJob'](_0x4c2d0a){const _0x5e6f6f=a81_0x41ad17,_0x556137=job_utils_1[_0x5e6f6f(0x17d)][_0x5e6f6f(0x188)](),_0x16df98=(0x0,path_1['join'])(MaskingService[_0x5e6f6f(0x1a9)],_0x556137);await(0x0,fs_utils_1['makeDir'])(_0x16df98),await(0x0,promises_1['writeFile'])(_0x16df98+'/'+job_1[_0x5e6f6f(0x197)],JSON[_0x5e6f6f(0x19d)]({'details':_0x4c2d0a}));const _0x2d69c5=await new logger_job_state_1['LoggerJobState'](_0x16df98,_0x556137)[_0x5e6f6f(0x1aa)]([]);await _0x2d69c5[_0x5e6f6f(0x1ad)]();const _0x38a59c=path_1[_0x5e6f6f(0x17d)][_0x5e6f6f(0x179)](__dirname,job_1[_0x5e6f6f(0x172)]);return job_utils_1[_0x5e6f6f(0x17d)][_0x5e6f6f(0x17c)](_0x38a59c,{'jobStorePath':_0x16df98,'jobId':_0x556137})[_0x5e6f6f(0x176)](_0x6568eb=>this['logErrorStartJob'](_0x16df98,_0x556137,_0x6568eb)),{'jobId':_0x556137};}static async[a81_0x41ad17(0x175)](_0x1778e3,_0x351327){const _0x1eecf5=a81_0x41ad17,_0x4927ac=await job_utils_1[_0x1eecf5(0x17d)]['getJobsIds'](MaskingService['maskingFolderPath']),_0x1d2668=await job_utils_1[_0x1eecf5(0x17d)][_0x1eecf5(0x19f)](MaskingService['maskingFolderPath'],_0x4927ac),_0x55fb2f=_0x1d2668[_0x1eecf5(0x18d)](_0x351327,_0x351327+_0x1778e3),_0x385db8=[];for(const _0x5f2433 of _0x55fb2f){const _0x5c34be=await this[_0x1eecf5(0x1a2)](_0x5f2433,![]);_0x385db8[_0x1eecf5(0x1b0)](_0x5c34be);}return _0x385db8;}static async['getJobState'](_0x2cc2dc,_0x5d8343){const _0x879239=a81_0x41ad17,_0x251e83=await this['getLog'](_0x2cc2dc,job_1['JOB_LOG_STATE_FILENAME'],constants_1[_0x879239(0x185)]),_0x26f69e=JSON[_0x879239(0x16f)](_0x251e83),_0xa090e2={'id':_0x26f69e['id'],'status':_0x26f69e[_0x879239(0x178)],'createdDate':_0x26f69e[_0x879239(0x1b3)],'completedDate':_0x26f69e['completedDate'],'successful':_0x26f69e[_0x879239(0x171)],'failed':_0x26f69e[_0x879239(0x1a8)]};return _0x5d8343?_0x26f69e:_0xa090e2;}static async[a81_0x41ad17(0x1b2)](_0x165847){const _0x41c185=a81_0x41ad17,_0x2592cd=await this[_0x41c185(0x173)](_0x165847,job_1[_0x41c185(0x19b)],constants_1[_0x41c185(0x1a5)]);return(0x0,sync_1['parse'])(_0x2592cd,{'columns':!![]});}static async['getLog'](_0x4eceac,_0x16393c,_0x1892c7){const _0x5996e6=a81_0x41ad17,_0x3f033a=(0x0,path_1['join'])(MaskingService['maskingFolderPath'],_0x4eceac),_0x5c39be=(0x0,path_1[_0x5996e6(0x179)])(_0x3f033a,_0x16393c);if(!await utils_1[_0x5996e6(0x180)][_0x5996e6(0x1ae)](_0x3f033a))throw new not_found_error_1[(_0x5996e6(0x18a))](_0x5996e6(0x18e));if(!await utils_1[_0x5996e6(0x180)]['isExistsPath'](_0x5c39be))throw new not_found_error_1[(_0x5996e6(0x18a))](_0x1892c7+_0x5996e6(0x17f));return(0x0,promises_1[_0x5996e6(0x17e)])(_0x5c39be,{'encoding':_0x5996e6(0x194)});}static async[a81_0x41ad17(0x196)](_0x346980,_0x28711a,_0xa3ee51){const _0x2a85ea=a81_0x41ad17,_0x3059d6=await new logger_job_state_1[(_0x2a85ea(0x1af))](_0x346980,_0x28711a)[_0x2a85ea(0x1aa)]([]);_0x3059d6['setJobStatus'](logger_enums_1[_0x2a85ea(0x19a)][_0x2a85ea(0x182)]),_0x3059d6[_0x2a85ea(0x189)](_0xa3ee51[_0x2a85ea(0x191)]),await _0x3059d6[_0x2a85ea(0x1ad)]();}}exports[a81_0x41ad17(0x198)]=MaskingService,MaskingService[a81_0x41ad17(0x1a9)]=path_1[a81_0x41ad17(0x17d)][a81_0x41ad17(0x179)](path_2[a81_0x41ad17(0x1ab)],constants_1[a81_0x41ad17(0x190)]);