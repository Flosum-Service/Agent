function a81_0x4363(){const _0x52531c=['\x20not\x20found.','toString','MaskingService','../../../constants/job','writable','maskingFolderPath','10BDYiMP','call','getJobDetails','__importDefault','JOB_LOG_STATE_FILENAME','../../shared/utils/fs.utils','prototype','../../shared/utils/job.utils','1800051fnTRmb','(((.+)+)+)+$','generateJobId','push','getOwnPropertyDescriptor','writeFile','readFile','failed','2601140ugwSMr','setJobStatus','8qrUWPe','successful','defineProperty','utf-8','../../../configs/path','503815jROpqA','MANIFEST_FILENAME','setJobError','getJobState','LoggerJobState','init','../../../core/errors/not-found.error','__esModule','status','__createBinding','1927344mCNMZy','kill','hasOwnProperty','message','search','create','20631249FkouYs','constructor','join','createMaskingJob','default','../job/classes/logger/logger-job-state','logErrorStartJob','FsUtils','createdDate','8725048OBknXj','637noNvce','catch','dataPath','apply','Job\x20Id\x20not\x20found.','parse','JOB_LOG_DETAILS_FILENAME','NotFoundError','getLog','../constants','slice','JOB_PATH','../job/enums/logger.enums','97146sYuJOg','runJob'];a81_0x4363=function(){return _0x52531c;};return a81_0x4363();}const a81_0x69bd41=a81_0x5e77;(function(_0x142f62,_0x11b43b){const _0x208cc4=a81_0x5e77,_0x2a9441=_0x142f62();while(!![]){try{const _0x37e8a0=parseInt(_0x208cc4(0xbe))/0x1+-parseInt(_0x208cc4(0x82))/0x2+parseInt(_0x208cc4(0xaf))/0x3*(-parseInt(_0x208cc4(0xb9))/0x4)+parseInt(_0x208cc4(0xb7))/0x5+parseInt(_0x208cc4(0x9f))/0x6*(-parseInt(_0x208cc4(0x92))/0x7)+parseInt(_0x208cc4(0x91))/0x8+-parseInt(_0x208cc4(0x88))/0x9*(-parseInt(_0x208cc4(0xa7))/0xa);if(_0x37e8a0===_0x11b43b)break;else _0x2a9441['push'](_0x2a9441['shift']());}catch(_0x1f3cd7){_0x2a9441['push'](_0x2a9441['shift']());}}}(a81_0x4363,0xbbf9c));const a81_0x194dc4=(function(){let _0x1323ed=!![];return function(_0x2cafd0,_0x408b17){const _0x3805d2=_0x1323ed?function(){const _0x2a7886=a81_0x5e77;if(_0x408b17){const _0x1ebf62=_0x408b17[_0x2a7886(0x95)](_0x2cafd0,arguments);return _0x408b17=null,_0x1ebf62;}}:function(){};return _0x1323ed=![],_0x3805d2;};}()),a81_0x4a104e=a81_0x194dc4(this,function(){const _0xb3ebfe=a81_0x5e77;return a81_0x4a104e[_0xb3ebfe(0xa2)]()[_0xb3ebfe(0x86)](_0xb3ebfe(0xb0))[_0xb3ebfe(0xa2)]()[_0xb3ebfe(0x89)](a81_0x4a104e)[_0xb3ebfe(0x86)](_0xb3ebfe(0xb0));});a81_0x4a104e();'use strict';var __createBinding=this&&this[a81_0x69bd41(0x81)]||(Object[a81_0x69bd41(0x87)]?function(_0x3717fb,_0x59c144,_0x485ae2,_0x41c9b4){const _0x17b4c2=a81_0x69bd41;if(_0x41c9b4===undefined)_0x41c9b4=_0x485ae2;var _0x44c13e=Object[_0x17b4c2(0xb3)](_0x59c144,_0x485ae2);(!_0x44c13e||('get'in _0x44c13e?!_0x59c144[_0x17b4c2(0x7f)]:_0x44c13e[_0x17b4c2(0xa5)]||_0x44c13e['configurable']))&&(_0x44c13e={'enumerable':!![],'get':function(){return _0x59c144[_0x485ae2];}}),Object[_0x17b4c2(0xbb)](_0x3717fb,_0x41c9b4,_0x44c13e);}:function(_0x23a29d,_0xd9c73d,_0x200587,_0x109659){if(_0x109659===undefined)_0x109659=_0x200587;_0x23a29d[_0x109659]=_0xd9c73d[_0x200587];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a81_0x69bd41(0x87)]?function(_0x26b3bf,_0x35adf3){const _0x11609f=a81_0x69bd41;Object['defineProperty'](_0x26b3bf,_0x11609f(0x8c),{'enumerable':!![],'value':_0x35adf3});}:function(_0x1ca02e,_0x39314c){_0x1ca02e['default']=_0x39314c;}),__importStar=this&&this['__importStar']||function(_0x1be0f6){const _0x598fab=a81_0x69bd41;if(_0x1be0f6&&_0x1be0f6[_0x598fab(0x7f)])return _0x1be0f6;var _0x19bf1d={};if(_0x1be0f6!=null){for(var _0x9e3c18 in _0x1be0f6)if(_0x9e3c18!=='default'&&Object[_0x598fab(0xad)][_0x598fab(0x84)][_0x598fab(0xa8)](_0x1be0f6,_0x9e3c18))__createBinding(_0x19bf1d,_0x1be0f6,_0x9e3c18);}return __setModuleDefault(_0x19bf1d,_0x1be0f6),_0x19bf1d;},__importDefault=this&&this[a81_0x69bd41(0xaa)]||function(_0x59be0d){const _0x3d6289=a81_0x69bd41;return _0x59be0d&&_0x59be0d[_0x3d6289(0x7f)]?_0x59be0d:{'default':_0x59be0d};};Object[a81_0x69bd41(0xbb)](exports,a81_0x69bd41(0x7f),{'value':!![]}),exports[a81_0x69bd41(0xa3)]=void 0x0;const path_1=__importStar(require('path')),fs_utils_1=require(a81_0x69bd41(0xac)),promises_1=require('fs/promises'),logger_job_state_1=require(a81_0x69bd41(0x8d)),logger_enums_1=require(a81_0x69bd41(0x9e)),sync_1=require('csv-parse/sync'),utils_1=require('@flosum/utils'),not_found_error_1=require(a81_0x69bd41(0x7e)),job_1=require(a81_0x69bd41(0xa4)),job_utils_1=__importDefault(require(a81_0x69bd41(0xae))),constants_1=require(a81_0x69bd41(0x9b)),path_2=require(a81_0x69bd41(0xbd));function a81_0x5e77(_0x1d983f,_0x12f42b){const _0x5d0869=a81_0x4363();return a81_0x5e77=function(_0x4a104e,_0x194dc4){_0x4a104e=_0x4a104e-0x7a;let _0x436361=_0x5d0869[_0x4a104e];return _0x436361;},a81_0x5e77(_0x1d983f,_0x12f42b);}class MaskingService{static async[a81_0x69bd41(0x8b)](_0x394ff2){const _0x4d910b=a81_0x69bd41,_0x2cadbd=job_utils_1[_0x4d910b(0x8c)][_0x4d910b(0xb1)](),_0x5ba7de=(0x0,path_1['join'])(MaskingService[_0x4d910b(0xa6)],_0x2cadbd);await(0x0,fs_utils_1['makeDir'])(_0x5ba7de),await(0x0,promises_1[_0x4d910b(0xb4)])(_0x5ba7de+'/'+job_1[_0x4d910b(0xbf)],JSON['stringify']({'details':_0x394ff2}));const _0x30f6bd=await new logger_job_state_1[(_0x4d910b(0x7c))](_0x5ba7de,_0x2cadbd)[_0x4d910b(0x7d)]([]);await _0x30f6bd[_0x4d910b(0x83)]();const _0x193055=path_1[_0x4d910b(0x8c)]['join'](__dirname,job_1[_0x4d910b(0x9d)]);return job_utils_1['default'][_0x4d910b(0xa0)](_0x193055,{'jobStorePath':_0x5ba7de,'jobId':_0x2cadbd})[_0x4d910b(0x93)](_0x4d7fdb=>this['logErrorStartJob'](_0x5ba7de,_0x2cadbd,_0x4d7fdb)),{'jobId':_0x2cadbd};}static async['getJobs'](_0x5993d3,_0x1e3e47){const _0x236acc=a81_0x69bd41,_0x2bcaa7=await job_utils_1['default']['getJobsIds'](MaskingService[_0x236acc(0xa6)]),_0x4b4353=await job_utils_1[_0x236acc(0x8c)]['sortJobsIds'](MaskingService[_0x236acc(0xa6)],_0x2bcaa7),_0x2d0a7b=_0x4b4353[_0x236acc(0x9c)](_0x1e3e47,_0x1e3e47+_0x5993d3),_0x3adeb6=[];for(const _0x36f07e of _0x2d0a7b){const _0x6edfb1=await this[_0x236acc(0x7b)](_0x36f07e,![]);_0x3adeb6[_0x236acc(0xb2)](_0x6edfb1);}return _0x3adeb6;}static async[a81_0x69bd41(0x7b)](_0x5756d7,_0x4cc6e2){const _0x5179be=a81_0x69bd41,_0x36d204=await this[_0x5179be(0x9a)](_0x5756d7,job_1[_0x5179be(0xab)],constants_1['JOB_LOG_STATE_NAME']),_0x2ba88d=JSON['parse'](_0x36d204),_0x280860={'id':_0x2ba88d['id'],'status':_0x2ba88d[_0x5179be(0x80)],'createdDate':_0x2ba88d[_0x5179be(0x90)],'completedDate':_0x2ba88d['completedDate'],'successful':_0x2ba88d[_0x5179be(0xba)],'failed':_0x2ba88d[_0x5179be(0xb6)]};return _0x4cc6e2?_0x2ba88d:_0x280860;}static async[a81_0x69bd41(0xa9)](_0x4a94e9){const _0x51e604=a81_0x69bd41,_0x412e3c=await this[_0x51e604(0x9a)](_0x4a94e9,job_1[_0x51e604(0x98)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0x51e604(0x97)])(_0x412e3c,{'columns':!![]});}static async['getLog'](_0x57bdcf,_0x1652ff,_0x4efbea){const _0x53436b=a81_0x69bd41,_0x2b44f3=(0x0,path_1[_0x53436b(0x8a)])(MaskingService[_0x53436b(0xa6)],_0x57bdcf),_0x325727=(0x0,path_1['join'])(_0x2b44f3,_0x1652ff);if(!await utils_1[_0x53436b(0x8f)]['isExistsPath'](_0x2b44f3))throw new not_found_error_1[(_0x53436b(0x99))](_0x53436b(0x96));if(!await utils_1['FsUtils']['isExistsPath'](_0x325727))throw new not_found_error_1[(_0x53436b(0x99))](_0x4efbea+_0x53436b(0xa1));return(0x0,promises_1[_0x53436b(0xb5)])(_0x325727,{'encoding':_0x53436b(0xbc)});}static async[a81_0x69bd41(0x8e)](_0x2d0344,_0x1cb66b,_0x45b5e4){const _0x5c1dc6=a81_0x69bd41,_0x5e6d10=await new logger_job_state_1['LoggerJobState'](_0x2d0344,_0x1cb66b)['init']([]);_0x5e6d10[_0x5c1dc6(0xb8)](logger_enums_1['JobStatus']['FAILED']),_0x5e6d10[_0x5c1dc6(0x7a)](_0x45b5e4[_0x5c1dc6(0x85)]),await _0x5e6d10[_0x5c1dc6(0x83)]();}}exports['MaskingService']=MaskingService,MaskingService['maskingFolderPath']=path_1[a81_0x69bd41(0x8c)]['join'](path_2[a81_0x69bd41(0x94)],constants_1['DATA_MASKING_FOLDER_NAME']);