const a81_0x3cfc33=a81_0x4c88;(function(_0x242c69,_0x537156){const _0x31627d=a81_0x4c88,_0xce4e65=_0x242c69();while(!![]){try{const _0xe55a06=parseInt(_0x31627d(0xda))/0x1*(parseInt(_0x31627d(0xc7))/0x2)+-parseInt(_0x31627d(0xd6))/0x3*(parseInt(_0x31627d(0xb4))/0x4)+parseInt(_0x31627d(0xc5))/0x5*(parseInt(_0x31627d(0xc3))/0x6)+parseInt(_0x31627d(0xad))/0x7+-parseInt(_0x31627d(0xe7))/0x8+parseInt(_0x31627d(0xa4))/0x9*(parseInt(_0x31627d(0xc6))/0xa)+-parseInt(_0x31627d(0xde))/0xb*(parseInt(_0x31627d(0xe0))/0xc);if(_0xe55a06===_0x537156)break;else _0xce4e65['push'](_0xce4e65['shift']());}catch(_0x596f00){_0xce4e65['push'](_0xce4e65['shift']());}}}(a81_0x171a,0xb315e));const a81_0xfa1b5a=(function(){let _0x5de779=!![];return function(_0x4b66ab,_0x1cde91){const _0x8dcfd0=_0x5de779?function(){const _0x3e8708=a81_0x4c88;if(_0x1cde91){const _0x6bab25=_0x1cde91[_0x3e8708(0xdb)](_0x4b66ab,arguments);return _0x1cde91=null,_0x6bab25;}}:function(){};return _0x5de779=![],_0x8dcfd0;};}()),a81_0x20ea0c=a81_0xfa1b5a(this,function(){const _0x9c4cc0=a81_0x4c88;return a81_0x20ea0c[_0x9c4cc0(0xe4)]()[_0x9c4cc0(0xa6)](_0x9c4cc0(0xd1))[_0x9c4cc0(0xe4)]()[_0x9c4cc0(0xc8)](a81_0x20ea0c)[_0x9c4cc0(0xa6)]('(((.+)+)+)+$');});a81_0x20ea0c();'use strict';function a81_0x4c88(_0xd97d4d,_0x575a4e){const _0x378d58=a81_0x171a();return a81_0x4c88=function(_0x20ea0c,_0xfa1b5a){_0x20ea0c=_0x20ea0c-0xa2;let _0x171aa3=_0x378d58[_0x20ea0c];return _0x171aa3;},a81_0x4c88(_0xd97d4d,_0x575a4e);}var __createBinding=this&&this[a81_0x3cfc33(0xba)]||(Object[a81_0x3cfc33(0xb1)]?function(_0x4a7ac1,_0x4b10f2,_0x39ea06,_0x44bb68){const _0x5d3b45=a81_0x3cfc33;if(_0x44bb68===undefined)_0x44bb68=_0x39ea06;var _0x3cb2d8=Object[_0x5d3b45(0xc1)](_0x4b10f2,_0x39ea06);(!_0x3cb2d8||(_0x5d3b45(0xa3)in _0x3cb2d8?!_0x4b10f2[_0x5d3b45(0xc9)]:_0x3cb2d8['writable']||_0x3cb2d8['configurable']))&&(_0x3cb2d8={'enumerable':!![],'get':function(){return _0x4b10f2[_0x39ea06];}}),Object[_0x5d3b45(0xb3)](_0x4a7ac1,_0x44bb68,_0x3cb2d8);}:function(_0x53e231,_0x59cf90,_0x369573,_0x3b9ff7){if(_0x3b9ff7===undefined)_0x3b9ff7=_0x369573;_0x53e231[_0x3b9ff7]=_0x59cf90[_0x369573];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x545f4d,_0x55fb47){const _0x18e8c2=a81_0x3cfc33;Object[_0x18e8c2(0xb3)](_0x545f4d,_0x18e8c2(0xe1),{'enumerable':!![],'value':_0x55fb47});}:function(_0xd45011,_0x485304){const _0x331e2c=a81_0x3cfc33;_0xd45011[_0x331e2c(0xe1)]=_0x485304;}),__importStar=this&&this[a81_0x3cfc33(0xb7)]||function(_0x50b8dd){const _0x275715=a81_0x3cfc33;if(_0x50b8dd&&_0x50b8dd[_0x275715(0xc9)])return _0x50b8dd;var _0x16a2f3={};if(_0x50b8dd!=null){for(var _0x3d6431 in _0x50b8dd)if(_0x3d6431!==_0x275715(0xe1)&&Object[_0x275715(0xa7)][_0x275715(0xb5)][_0x275715(0xd8)](_0x50b8dd,_0x3d6431))__createBinding(_0x16a2f3,_0x50b8dd,_0x3d6431);}return __setModuleDefault(_0x16a2f3,_0x50b8dd),_0x16a2f3;},__importDefault=this&&this[a81_0x3cfc33(0xcf)]||function(_0x16c174){const _0x402c56=a81_0x3cfc33;return _0x16c174&&_0x16c174[_0x402c56(0xc9)]?_0x16c174:{'default':_0x16c174};};Object['defineProperty'](exports,a81_0x3cfc33(0xc9),{'value':!![]}),exports[a81_0x3cfc33(0xea)]=void 0x0;function a81_0x171a(){const _0x1f7110=['2555812hjKUQf','hasOwnProperty','JOB_LOG_DETAILS_NAME','__importStar','../job/classes/logger/logger-job-state','setJobError','__createBinding','../../../core/errors/not-found.error','JOB_LOG_DETAILS_FILENAME','isExistsPath','../../../configs/path','getJobState','writeFile','getOwnPropertyDescriptor','status','134688zNddyg','FsUtils','130ZkYTkO','10fncrvD','852184pVpgKj','constructor','__esModule','MANIFEST_FILENAME','csv-parse/sync','push','getLog','../../../constants/job','__importDefault','makeDir','(((.+)+)+)+$','fs/promises','generateJobId','../../shared/utils/job.utils','setJobStatus','3OPFAec','successful','call','getJobDetails','1EzQNAk','apply','completedDate','utf-8','88zKjSyB','catch','2191020XQnSYD','default','failed','init','toString','join','LoggerJobState','4310544WFrHGU','@flosum/utils','kill','MaskingService','JOB_LOG_STATE_FILENAME','maskingFolderPath','JOB_PATH','getJobs','parse','createdDate','DATA_MASKING_FOLDER_NAME','logErrorStartJob','FAILED','get','12237354BRrOWP','JobStatus','search','prototype','NotFoundError','JOB_LOG_STATE_NAME','slice','Job\x20Id\x20not\x20found.','message','7017773CVRokH','dataPath','runJob','path','create','\x20not\x20found.','defineProperty'];a81_0x171a=function(){return _0x1f7110;};return a81_0x171a();}const path_1=__importStar(require(a81_0x3cfc33(0xb0))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a81_0x3cfc33(0xd2)),logger_job_state_1=require(a81_0x3cfc33(0xb8)),logger_enums_1=require('../job/enums/logger.enums'),sync_1=require(a81_0x3cfc33(0xcb)),utils_1=require(a81_0x3cfc33(0xe8)),not_found_error_1=require(a81_0x3cfc33(0xbb)),job_1=require(a81_0x3cfc33(0xce)),job_utils_1=__importDefault(require(a81_0x3cfc33(0xd4))),constants_1=require('../constants'),path_2=require(a81_0x3cfc33(0xbe));class MaskingService{static async['createMaskingJob'](_0x5b3897){const _0x250b93=a81_0x3cfc33,_0x2973ab=job_utils_1[_0x250b93(0xe1)][_0x250b93(0xd3)](),_0x4aa888=(0x0,path_1['join'])(MaskingService[_0x250b93(0xec)],_0x2973ab);await(0x0,fs_utils_1[_0x250b93(0xd0)])(_0x4aa888),await(0x0,promises_1[_0x250b93(0xc0)])(_0x4aa888+'/'+job_1[_0x250b93(0xca)],JSON['stringify']({'details':_0x5b3897}));const _0x551122=await new logger_job_state_1[(_0x250b93(0xe6))](_0x4aa888,_0x2973ab)[_0x250b93(0xe3)]([]);await _0x551122['kill']();const _0x1b538=path_1[_0x250b93(0xe1)][_0x250b93(0xe5)](__dirname,job_1[_0x250b93(0xed)]);return job_utils_1[_0x250b93(0xe1)][_0x250b93(0xaf)](_0x1b538,{'jobStorePath':_0x4aa888,'jobId':_0x2973ab})[_0x250b93(0xdf)](_0x188764=>this[_0x250b93(0xf2)](_0x4aa888,_0x2973ab,_0x188764)),{'jobId':_0x2973ab};}static async[a81_0x3cfc33(0xee)](_0x439050,_0x115be8){const _0x1418b1=a81_0x3cfc33,_0x216c57=await job_utils_1[_0x1418b1(0xe1)]['getJobsIds'](MaskingService['maskingFolderPath']),_0x107040=await job_utils_1[_0x1418b1(0xe1)]['sortJobsIds'](MaskingService[_0x1418b1(0xec)],_0x216c57),_0x47aaf3=_0x107040[_0x1418b1(0xaa)](_0x115be8,_0x115be8+_0x439050),_0x41af59=[];for(const _0xb2db6d of _0x47aaf3){const _0x54a8d6=await this[_0x1418b1(0xbf)](_0xb2db6d,![]);_0x41af59[_0x1418b1(0xcc)](_0x54a8d6);}return _0x41af59;}static async[a81_0x3cfc33(0xbf)](_0x110ac8,_0x849276){const _0x20166b=a81_0x3cfc33,_0x1d00ca=await this['getLog'](_0x110ac8,job_1[_0x20166b(0xeb)],constants_1[_0x20166b(0xa9)]),_0x1b7363=JSON[_0x20166b(0xef)](_0x1d00ca),_0x24f5fa={'id':_0x1b7363['id'],'status':_0x1b7363[_0x20166b(0xc2)],'createdDate':_0x1b7363[_0x20166b(0xf0)],'completedDate':_0x1b7363[_0x20166b(0xdc)],'successful':_0x1b7363[_0x20166b(0xd7)],'failed':_0x1b7363[_0x20166b(0xe2)]};return _0x849276?_0x1b7363:_0x24f5fa;}static async[a81_0x3cfc33(0xd9)](_0x5527b8){const _0x332f60=a81_0x3cfc33,_0x98d840=await this[_0x332f60(0xcd)](_0x5527b8,job_1[_0x332f60(0xbc)],constants_1[_0x332f60(0xb6)]);return(0x0,sync_1['parse'])(_0x98d840,{'columns':!![]});}static async[a81_0x3cfc33(0xcd)](_0x5aa82e,_0x5ea050,_0x1faacc){const _0x5f155b=a81_0x3cfc33,_0x554edc=(0x0,path_1['join'])(MaskingService[_0x5f155b(0xec)],_0x5aa82e),_0x5b81f5=(0x0,path_1['join'])(_0x554edc,_0x5ea050);if(!await utils_1[_0x5f155b(0xc4)][_0x5f155b(0xbd)](_0x554edc))throw new not_found_error_1[(_0x5f155b(0xa8))](_0x5f155b(0xab));if(!await utils_1[_0x5f155b(0xc4)][_0x5f155b(0xbd)](_0x5b81f5))throw new not_found_error_1[(_0x5f155b(0xa8))](_0x1faacc+_0x5f155b(0xb2));return(0x0,promises_1['readFile'])(_0x5b81f5,{'encoding':_0x5f155b(0xdd)});}static async[a81_0x3cfc33(0xf2)](_0x9cd6ed,_0x5cd1bc,_0x426031){const _0x215f93=a81_0x3cfc33,_0x1aedd2=await new logger_job_state_1['LoggerJobState'](_0x9cd6ed,_0x5cd1bc)[_0x215f93(0xe3)]([]);_0x1aedd2[_0x215f93(0xd5)](logger_enums_1[_0x215f93(0xa5)][_0x215f93(0xa2)]),_0x1aedd2[_0x215f93(0xb9)](_0x426031[_0x215f93(0xac)]),await _0x1aedd2[_0x215f93(0xe9)]();}}exports[a81_0x3cfc33(0xea)]=MaskingService,MaskingService['maskingFolderPath']=path_1['default'][a81_0x3cfc33(0xe5)](path_2[a81_0x3cfc33(0xae)],constants_1[a81_0x3cfc33(0xf1)]);