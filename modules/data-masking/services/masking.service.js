const a81_0x390c21=a81_0xabc6;(function(_0x36c198,_0x307d82){const _0x565cee=a81_0xabc6,_0x1325f5=_0x36c198();while(!![]){try{const _0x787c5a=-parseInt(_0x565cee(0x138))/0x1+parseInt(_0x565cee(0x114))/0x2*(parseInt(_0x565cee(0x124))/0x3)+-parseInt(_0x565cee(0xfd))/0x4*(-parseInt(_0x565cee(0xf6))/0x5)+parseInt(_0x565cee(0x126))/0x6*(parseInt(_0x565cee(0x142))/0x7)+-parseInt(_0x565cee(0x118))/0x8*(parseInt(_0x565cee(0x12b))/0x9)+-parseInt(_0x565cee(0x107))/0xa+parseInt(_0x565cee(0x101))/0xb;if(_0x787c5a===_0x307d82)break;else _0x1325f5['push'](_0x1325f5['shift']());}catch(_0x537338){_0x1325f5['push'](_0x1325f5['shift']());}}}(a81_0x1711,0x20f80));const a81_0x156dfa=(function(){let _0x183b68=!![];return function(_0x9234a0,_0x14a101){const _0xf983a5=_0x183b68?function(){const _0x321fb3=a81_0xabc6;if(_0x14a101){const _0x269b42=_0x14a101[_0x321fb3(0x116)](_0x9234a0,arguments);return _0x14a101=null,_0x269b42;}}:function(){};return _0x183b68=![],_0xf983a5;};}()),a81_0x239003=a81_0x156dfa(this,function(){const _0x20da35=a81_0xabc6;return a81_0x239003[_0x20da35(0x125)]()[_0x20da35(0x13a)]('(((.+)+)+)+$')[_0x20da35(0x125)]()[_0x20da35(0x10c)](a81_0x239003)['search']('(((.+)+)+)+$');});function a81_0x1711(){const _0x489e52=['95uYahkw','setJobError','status','message','catch','writable','generateJobId','38976QNeXVY','../constants','csv-parse/sync','getOwnPropertyDescriptor','1130008ZdwfFL','JOB_LOG_DETAILS_NAME','defineProperty','configurable','../../shared/utils/job.utils','../../shared/utils/fs.utils','286030IDDgEj','setJobStatus','JOB_LOG_STATE_FILENAME','kill','maskingFolderPath','constructor','fs/promises','getJobState','getJobs','successful','createdDate','../../../configs/path','slice','2ZyTkGw','MANIFEST_FILENAME','apply','__createBinding','2024BiOwYV','__importDefault','../job/classes/logger/logger-job-state','completedDate','\x20not\x20found.','FsUtils','prototype','LoggerJobState','runJob','Job\x20Id\x20not\x20found.','init','getLog','1119ysndfR','toString','176352izgxyr','../job/enums/logger.enums','writeFile','logErrorStartJob','../../../core/errors/not-found.error','8541njepif','makeDir','readFile','__esModule','JOB_LOG_DETAILS_FILENAME','isExistsPath','default','path','dataPath','createMaskingJob','utf-8','FAILED','MaskingService','90241TTqcKJ','get','search','parse','JOB_PATH','join','DATA_MASKING_FOLDER_NAME','create','JobStatus','NotFoundError','49Sgwrba','__importStar','../../../constants/job'];a81_0x1711=function(){return _0x489e52;};return a81_0x1711();}function a81_0xabc6(_0x49da4c,_0x246b21){const _0x13a27c=a81_0x1711();return a81_0xabc6=function(_0x239003,_0x156dfa){_0x239003=_0x239003-0xf6;let _0x1711e8=_0x13a27c[_0x239003];return _0x1711e8;},a81_0xabc6(_0x49da4c,_0x246b21);}a81_0x239003();'use strict';var __createBinding=this&&this[a81_0x390c21(0x117)]||(Object['create']?function(_0xcbe3ed,_0x185ea0,_0x535106,_0x150dbc){const _0x8097e2=a81_0x390c21;if(_0x150dbc===undefined)_0x150dbc=_0x535106;var _0x58f23b=Object[_0x8097e2(0x100)](_0x185ea0,_0x535106);(!_0x58f23b||(_0x8097e2(0x139)in _0x58f23b?!_0x185ea0[_0x8097e2(0x12e)]:_0x58f23b[_0x8097e2(0xfb)]||_0x58f23b[_0x8097e2(0x104)]))&&(_0x58f23b={'enumerable':!![],'get':function(){return _0x185ea0[_0x535106];}}),Object['defineProperty'](_0xcbe3ed,_0x150dbc,_0x58f23b);}:function(_0x16e871,_0x4a11d5,_0x3ceb01,_0x43d82e){if(_0x43d82e===undefined)_0x43d82e=_0x3ceb01;_0x16e871[_0x43d82e]=_0x4a11d5[_0x3ceb01];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a81_0x390c21(0x13f)]?function(_0x568dfd,_0x2a40ce){const _0x1882c8=a81_0x390c21;Object[_0x1882c8(0x103)](_0x568dfd,_0x1882c8(0x131),{'enumerable':!![],'value':_0x2a40ce});}:function(_0xdac80e,_0x327e70){const _0x3c77f3=a81_0x390c21;_0xdac80e[_0x3c77f3(0x131)]=_0x327e70;}),__importStar=this&&this[a81_0x390c21(0x143)]||function(_0x3e1dcb){const _0x5606ca=a81_0x390c21;if(_0x3e1dcb&&_0x3e1dcb[_0x5606ca(0x12e)])return _0x3e1dcb;var _0x1e37b8={};if(_0x3e1dcb!=null){for(var _0x435bc0 in _0x3e1dcb)if(_0x435bc0!=='default'&&Object[_0x5606ca(0x11e)]['hasOwnProperty']['call'](_0x3e1dcb,_0x435bc0))__createBinding(_0x1e37b8,_0x3e1dcb,_0x435bc0);}return __setModuleDefault(_0x1e37b8,_0x3e1dcb),_0x1e37b8;},__importDefault=this&&this[a81_0x390c21(0x119)]||function(_0x35c766){const _0x34dd77=a81_0x390c21;return _0x35c766&&_0x35c766[_0x34dd77(0x12e)]?_0x35c766:{'default':_0x35c766};};Object[a81_0x390c21(0x103)](exports,a81_0x390c21(0x12e),{'value':!![]}),exports[a81_0x390c21(0x137)]=void 0x0;const path_1=__importStar(require(a81_0x390c21(0x132))),fs_utils_1=require(a81_0x390c21(0x106)),promises_1=require(a81_0x390c21(0x10d)),logger_job_state_1=require(a81_0x390c21(0x11a)),logger_enums_1=require(a81_0x390c21(0x127)),sync_1=require(a81_0x390c21(0xff)),utils_1=require('@flosum/utils'),not_found_error_1=require(a81_0x390c21(0x12a)),job_1=require(a81_0x390c21(0x144)),job_utils_1=__importDefault(require(a81_0x390c21(0x105))),constants_1=require(a81_0x390c21(0xfe)),path_2=require(a81_0x390c21(0x112));class MaskingService{static async[a81_0x390c21(0x134)](_0x3b42c5){const _0x338c45=a81_0x390c21,_0x29bc9b=job_utils_1[_0x338c45(0x131)][_0x338c45(0xfc)](),_0x4d55cf=(0x0,path_1[_0x338c45(0x13d)])(MaskingService['maskingFolderPath'],_0x29bc9b);await(0x0,fs_utils_1[_0x338c45(0x12c)])(_0x4d55cf),await(0x0,promises_1[_0x338c45(0x128)])(_0x4d55cf+'/'+job_1[_0x338c45(0x115)],JSON['stringify']({'details':_0x3b42c5}));const _0x2970e3=await new logger_job_state_1[(_0x338c45(0x11f))](_0x4d55cf,_0x29bc9b)[_0x338c45(0x122)]([]);await _0x2970e3[_0x338c45(0x10a)]();const _0x185ed7=path_1[_0x338c45(0x131)]['join'](__dirname,job_1[_0x338c45(0x13c)]);return job_utils_1[_0x338c45(0x131)][_0x338c45(0x120)](_0x185ed7,{'jobStorePath':_0x4d55cf,'jobId':_0x29bc9b})[_0x338c45(0xfa)](_0x3b90fa=>this['logErrorStartJob'](_0x4d55cf,_0x29bc9b,_0x3b90fa)),{'jobId':_0x29bc9b};}static async[a81_0x390c21(0x10f)](_0x1e3f57,_0x547613){const _0xfb6a86=a81_0x390c21,_0x23920b=await job_utils_1[_0xfb6a86(0x131)]['getJobsIds'](MaskingService['maskingFolderPath']),_0x5dc843=await job_utils_1[_0xfb6a86(0x131)]['sortJobsIds'](MaskingService[_0xfb6a86(0x10b)],_0x23920b),_0x2f4642=_0x5dc843[_0xfb6a86(0x113)](_0x547613,_0x547613+_0x1e3f57),_0x454cc8=[];for(const _0x23fb9f of _0x2f4642){const _0xab5905=await this[_0xfb6a86(0x10e)](_0x23fb9f,![]);_0x454cc8['push'](_0xab5905);}return _0x454cc8;}static async['getJobState'](_0x34bedc,_0x244aa3){const _0x6b5dc4=a81_0x390c21,_0x4d067c=await this[_0x6b5dc4(0x123)](_0x34bedc,job_1[_0x6b5dc4(0x109)],constants_1['JOB_LOG_STATE_NAME']),_0x11438e=JSON[_0x6b5dc4(0x13b)](_0x4d067c),_0x109ef7={'id':_0x11438e['id'],'status':_0x11438e[_0x6b5dc4(0xf8)],'createdDate':_0x11438e[_0x6b5dc4(0x111)],'completedDate':_0x11438e[_0x6b5dc4(0x11b)],'successful':_0x11438e[_0x6b5dc4(0x110)],'failed':_0x11438e['failed']};return _0x244aa3?_0x11438e:_0x109ef7;}static async['getJobDetails'](_0xa209b3){const _0x22dcd5=a81_0x390c21,_0xdb2b90=await this[_0x22dcd5(0x123)](_0xa209b3,job_1[_0x22dcd5(0x12f)],constants_1[_0x22dcd5(0x102)]);return(0x0,sync_1[_0x22dcd5(0x13b)])(_0xdb2b90,{'columns':!![]});}static async[a81_0x390c21(0x123)](_0x28e0c7,_0x2cb176,_0x3ad279){const _0x46d465=a81_0x390c21,_0x2521c2=(0x0,path_1['join'])(MaskingService[_0x46d465(0x10b)],_0x28e0c7),_0x5e3270=(0x0,path_1[_0x46d465(0x13d)])(_0x2521c2,_0x2cb176);if(!await utils_1['FsUtils'][_0x46d465(0x130)](_0x2521c2))throw new not_found_error_1[(_0x46d465(0x141))](_0x46d465(0x121));if(!await utils_1[_0x46d465(0x11d)]['isExistsPath'](_0x5e3270))throw new not_found_error_1[(_0x46d465(0x141))](_0x3ad279+_0x46d465(0x11c));return(0x0,promises_1[_0x46d465(0x12d)])(_0x5e3270,{'encoding':_0x46d465(0x135)});}static async[a81_0x390c21(0x129)](_0x4455d0,_0x5a1b7d,_0x24b72e){const _0x4b2222=a81_0x390c21,_0x25130e=await new logger_job_state_1[(_0x4b2222(0x11f))](_0x4455d0,_0x5a1b7d)[_0x4b2222(0x122)]([]);_0x25130e[_0x4b2222(0x108)](logger_enums_1[_0x4b2222(0x140)][_0x4b2222(0x136)]),_0x25130e[_0x4b2222(0xf7)](_0x24b72e[_0x4b2222(0xf9)]),await _0x25130e['kill']();}}exports['MaskingService']=MaskingService,MaskingService[a81_0x390c21(0x10b)]=path_1[a81_0x390c21(0x131)][a81_0x390c21(0x13d)](path_2[a81_0x390c21(0x133)],constants_1[a81_0x390c21(0x13e)]);