const a98_0x269364=a98_0xa6cf;(function(_0x437d32,_0x1934ac){const _0x3014eb=a98_0xa6cf,_0x1c7d37=_0x437d32();while(!![]){try{const _0x329813=parseInt(_0x3014eb(0x12e))/0x1+parseInt(_0x3014eb(0x105))/0x2+-parseInt(_0x3014eb(0x125))/0x3*(parseInt(_0x3014eb(0xf3))/0x4)+parseInt(_0x3014eb(0x13d))/0x5*(-parseInt(_0x3014eb(0x132))/0x6)+parseInt(_0x3014eb(0xf6))/0x7*(-parseInt(_0x3014eb(0xf9))/0x8)+parseInt(_0x3014eb(0x11e))/0x9*(-parseInt(_0x3014eb(0xfd))/0xa)+parseInt(_0x3014eb(0x12b))/0xb*(parseInt(_0x3014eb(0x11b))/0xc);if(_0x329813===_0x1934ac)break;else _0x1c7d37['push'](_0x1c7d37['shift']());}catch(_0x2407f4){_0x1c7d37['push'](_0x1c7d37['shift']());}}}(a98_0x6f5c,0xd5ccd));const a98_0x19839b=(function(){let _0x28932f=!![];return function(_0x33c0d7,_0x4de8ec){const _0x4b4909=_0x28932f?function(){const _0x549c2a=a98_0xa6cf;if(_0x4de8ec){const _0xa73df=_0x4de8ec[_0x549c2a(0x121)](_0x33c0d7,arguments);return _0x4de8ec=null,_0xa73df;}}:function(){};return _0x28932f=![],_0x4b4909;};}()),a98_0x1fcc4e=a98_0x19839b(this,function(){const _0x5a20ba=a98_0xa6cf;return a98_0x1fcc4e[_0x5a20ba(0x104)]()[_0x5a20ba(0x11a)](_0x5a20ba(0xf7))[_0x5a20ba(0x104)]()[_0x5a20ba(0x12a)](a98_0x1fcc4e)[_0x5a20ba(0x11a)](_0x5a20ba(0xf7));});a98_0x1fcc4e();'use strict';function a98_0x6f5c(){const _0x286e1d=['../job/enums/logger.enums','../../../core/errors/not-found.error','JobStatus','writable','JOB_LOG_DETAILS_FILENAME','__setModuleDefault','../../../configs/path','default','search','37279644bxhrFj','../job/classes/logger/logger-job-state','prototype','45SeXRMu','Job\x20Id\x20not\x20found.','../constants','apply','readFile','createdDate','FsUtils','69DWSpVK','__esModule','JOB_PATH','getJobDetails','configurable','constructor','11UpxlWQ','LoggerJobState','makeDir','500844NtQlVK','createMaskingJob','sortJobsIds','MaskingService','7122EYucdz','runJob','stringify','getLog','init','getOwnPropertyDescriptor','completedDate','isExistsPath','parse','csv-parse/sync','NotFoundError','5675nTYGBZ','logErrorStartJob','__importDefault','MANIFEST_FILENAME','51292YVDKxs','@flosum/utils','get','2871120BkLkkv','(((.+)+)+)+$','create','24WyvctN','generateJobId','utf-8','../../shared/utils/fs.utils','3008930kXNsBm','slice','path','setJobError','fs/promises','DATA_MASKING_FOLDER_NAME','JOB_LOG_STATE_NAME','toString','3290726kDIrNJ','call','\x20not\x20found.','maskingFolderPath','JOB_LOG_STATE_FILENAME','../../../constants/job','hasOwnProperty','defineProperty','../../shared/utils/job.utils','push','__importStar','kill','join'];a98_0x6f5c=function(){return _0x286e1d;};return a98_0x6f5c();}var __createBinding=this&&this['__createBinding']||(Object[a98_0x269364(0xf8)]?function(_0x5da038,_0x167175,_0x39fab4,_0x168556){const _0x3754cc=a98_0x269364;if(_0x168556===undefined)_0x168556=_0x39fab4;var _0x28b4e7=Object[_0x3754cc(0x137)](_0x167175,_0x39fab4);(!_0x28b4e7||(_0x3754cc(0xf5)in _0x28b4e7?!_0x167175[_0x3754cc(0x126)]:_0x28b4e7[_0x3754cc(0x115)]||_0x28b4e7[_0x3754cc(0x129)]))&&(_0x28b4e7={'enumerable':!![],'get':function(){return _0x167175[_0x39fab4];}}),Object['defineProperty'](_0x5da038,_0x168556,_0x28b4e7);}:function(_0x44569e,_0x592a16,_0x4f25bd,_0x449f65){if(_0x449f65===undefined)_0x449f65=_0x4f25bd;_0x44569e[_0x449f65]=_0x592a16[_0x4f25bd];}),__setModuleDefault=this&&this[a98_0x269364(0x117)]||(Object['create']?function(_0x5db215,_0xbf9804){const _0x58a9dd=a98_0x269364;Object[_0x58a9dd(0x10c)](_0x5db215,_0x58a9dd(0x119),{'enumerable':!![],'value':_0xbf9804});}:function(_0x281475,_0x160e9c){const _0x53acd3=a98_0x269364;_0x281475[_0x53acd3(0x119)]=_0x160e9c;}),__importStar=this&&this[a98_0x269364(0x10f)]||function(_0x244998){const _0x3b242=a98_0x269364;if(_0x244998&&_0x244998[_0x3b242(0x126)])return _0x244998;var _0x162bdf={};if(_0x244998!=null){for(var _0x15fd86 in _0x244998)if(_0x15fd86!==_0x3b242(0x119)&&Object[_0x3b242(0x11d)][_0x3b242(0x10b)][_0x3b242(0x106)](_0x244998,_0x15fd86))__createBinding(_0x162bdf,_0x244998,_0x15fd86);}return __setModuleDefault(_0x162bdf,_0x244998),_0x162bdf;},__importDefault=this&&this[a98_0x269364(0x13f)]||function(_0x4a8712){return _0x4a8712&&_0x4a8712['__esModule']?_0x4a8712:{'default':_0x4a8712};};Object[a98_0x269364(0x10c)](exports,'__esModule',{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a98_0x269364(0xff))),fs_utils_1=require(a98_0x269364(0xfc)),promises_1=require(a98_0x269364(0x101)),logger_job_state_1=require(a98_0x269364(0x11c)),logger_enums_1=require(a98_0x269364(0x112)),sync_1=require(a98_0x269364(0x13b)),utils_1=require(a98_0x269364(0xf4)),not_found_error_1=require(a98_0x269364(0x113)),job_1=require(a98_0x269364(0x10a)),job_utils_1=__importDefault(require(a98_0x269364(0x10d))),constants_1=require(a98_0x269364(0x120)),path_2=require(a98_0x269364(0x118));class MaskingService{static async[a98_0x269364(0x12f)](_0x3af887){const _0x22d1ca=a98_0x269364,_0x25f98e=job_utils_1['default'][_0x22d1ca(0xfa)](),_0x33797b=(0x0,path_1['join'])(MaskingService[_0x22d1ca(0x108)],_0x25f98e);await(0x0,fs_utils_1[_0x22d1ca(0x12d)])(_0x33797b),await(0x0,promises_1['writeFile'])(_0x33797b+'/'+job_1[_0x22d1ca(0xf2)],JSON[_0x22d1ca(0x134)]({'details':_0x3af887}));const _0x5b07e2=await new logger_job_state_1['LoggerJobState'](_0x33797b,_0x25f98e)[_0x22d1ca(0x136)]([]);await _0x5b07e2[_0x22d1ca(0x110)]();const _0x3776cb=path_1[_0x22d1ca(0x119)][_0x22d1ca(0x111)](__dirname,job_1[_0x22d1ca(0x127)]);return job_utils_1[_0x22d1ca(0x119)][_0x22d1ca(0x133)](_0x3776cb,{'jobStorePath':_0x33797b,'jobId':_0x25f98e})['catch'](_0x2ef6f9=>this[_0x22d1ca(0x13e)](_0x33797b,_0x25f98e,_0x2ef6f9)),{'jobId':_0x25f98e};}static async['getJobs'](_0x26e6f3,_0x4ecb4){const _0x5a32bd=a98_0x269364,_0x12a23e=await job_utils_1['default']['getJobsIds'](MaskingService['maskingFolderPath']),_0x1a4e3e=await job_utils_1[_0x5a32bd(0x119)][_0x5a32bd(0x130)](MaskingService['maskingFolderPath'],_0x12a23e),_0x5a5e12=_0x1a4e3e[_0x5a32bd(0xfe)](_0x4ecb4,_0x4ecb4+_0x26e6f3),_0x5c2b48=[];for(const _0x1dd8a4 of _0x5a5e12){const _0x261f94=await this['getJobState'](_0x1dd8a4,![]);_0x5c2b48[_0x5a32bd(0x10e)](_0x261f94);}return _0x5c2b48;}static async['getJobState'](_0x5cc1af,_0x8031d1){const _0x1b3bd6=a98_0x269364,_0x100a13=await this[_0x1b3bd6(0x135)](_0x5cc1af,job_1[_0x1b3bd6(0x109)],constants_1[_0x1b3bd6(0x103)]),_0x3e75b0=JSON['parse'](_0x100a13),_0x4cf056={'id':_0x3e75b0['id'],'status':_0x3e75b0['status'],'createdDate':_0x3e75b0[_0x1b3bd6(0x123)],'completedDate':_0x3e75b0[_0x1b3bd6(0x138)],'successful':_0x3e75b0['successful'],'failed':_0x3e75b0['failed']};return _0x8031d1?_0x3e75b0:_0x4cf056;}static async[a98_0x269364(0x128)](_0x5ecd20){const _0x59b5b3=a98_0x269364,_0x2431ba=await this[_0x59b5b3(0x135)](_0x5ecd20,job_1[_0x59b5b3(0x116)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0x59b5b3(0x13a)])(_0x2431ba,{'columns':!![]});}static async[a98_0x269364(0x135)](_0x3b50c0,_0xe752cd,_0x3bb0c4){const _0x1c0c00=a98_0x269364,_0x2acdc5=(0x0,path_1[_0x1c0c00(0x111)])(MaskingService[_0x1c0c00(0x108)],_0x3b50c0),_0x257827=(0x0,path_1[_0x1c0c00(0x111)])(_0x2acdc5,_0xe752cd);if(!await utils_1[_0x1c0c00(0x124)][_0x1c0c00(0x139)](_0x2acdc5))throw new not_found_error_1[(_0x1c0c00(0x13c))](_0x1c0c00(0x11f));if(!await utils_1['FsUtils'][_0x1c0c00(0x139)](_0x257827))throw new not_found_error_1[(_0x1c0c00(0x13c))](_0x3bb0c4+_0x1c0c00(0x107));return(0x0,promises_1[_0x1c0c00(0x122)])(_0x257827,{'encoding':_0x1c0c00(0xfb)});}static async[a98_0x269364(0x13e)](_0x46bd16,_0xb5ee3e,_0x4bd7d6){const _0x57788d=a98_0x269364,_0x15f870=await new logger_job_state_1[(_0x57788d(0x12c))](_0x46bd16,_0xb5ee3e)[_0x57788d(0x136)]([]);_0x15f870['setJobStatus'](logger_enums_1[_0x57788d(0x114)]['FAILED']),_0x15f870[_0x57788d(0x100)](_0x4bd7d6['message']),await _0x15f870[_0x57788d(0x110)]();}}function a98_0xa6cf(_0x1a2fd3,_0x3b60d9){const _0x1b9b1c=a98_0x6f5c();return a98_0xa6cf=function(_0x1fcc4e,_0x19839b){_0x1fcc4e=_0x1fcc4e-0xf2;let _0x6f5cb8=_0x1b9b1c[_0x1fcc4e];return _0x6f5cb8;},a98_0xa6cf(_0x1a2fd3,_0x3b60d9);}exports[a98_0x269364(0x131)]=MaskingService,MaskingService['maskingFolderPath']=path_1[a98_0x269364(0x119)]['join'](path_2['dataPath'],constants_1[a98_0x269364(0x102)]);