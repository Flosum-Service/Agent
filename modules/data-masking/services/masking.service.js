const a81_0x4bef08=a81_0x54f7;(function(_0x2db4c8,_0x59d09e){const _0x20ccec=a81_0x54f7,_0x5a6328=_0x2db4c8();while(!![]){try{const _0x20a04f=parseInt(_0x20ccec(0xc2))/0x1*(-parseInt(_0x20ccec(0x80))/0x2)+parseInt(_0x20ccec(0xa2))/0x3*(-parseInt(_0x20ccec(0x9c))/0x4)+parseInt(_0x20ccec(0xb8))/0x5*(-parseInt(_0x20ccec(0xa1))/0x6)+-parseInt(_0x20ccec(0x95))/0x7*(-parseInt(_0x20ccec(0x7e))/0x8)+-parseInt(_0x20ccec(0xb1))/0x9+-parseInt(_0x20ccec(0xb6))/0xa+parseInt(_0x20ccec(0x9b))/0xb*(parseInt(_0x20ccec(0x8e))/0xc);if(_0x20a04f===_0x59d09e)break;else _0x5a6328['push'](_0x5a6328['shift']());}catch(_0x516775){_0x5a6328['push'](_0x5a6328['shift']());}}}(a81_0x1b57,0xe4c73));const a81_0x45bf9c=(function(){let _0x5e56ee=!![];return function(_0x41a9c3,_0x39c14b){const _0x136560=_0x5e56ee?function(){const _0x46e761=a81_0x54f7;if(_0x39c14b){const _0x1013a1=_0x39c14b[_0x46e761(0x7c)](_0x41a9c3,arguments);return _0x39c14b=null,_0x1013a1;}}:function(){};return _0x5e56ee=![],_0x136560;};}()),a81_0x576f07=a81_0x45bf9c(this,function(){const _0x3ce754=a81_0x54f7;return a81_0x576f07[_0x3ce754(0x78)]()[_0x3ce754(0x98)](_0x3ce754(0x8d))[_0x3ce754(0x78)]()['constructor'](a81_0x576f07)[_0x3ce754(0x98)]('(((.+)+)+)+$');});a81_0x576f07();function a81_0x54f7(_0x307764,_0x2ef376){const _0x33947e=a81_0x1b57();return a81_0x54f7=function(_0x576f07,_0x45bf9c){_0x576f07=_0x576f07-0x78;let _0x1b5774=_0x33947e[_0x576f07];return _0x1b5774;},a81_0x54f7(_0x307764,_0x2ef376);}'use strict';var __createBinding=this&&this[a81_0x4bef08(0xa8)]||(Object['create']?function(_0x317cee,_0x3c8b86,_0x37a274,_0xacbb3f){const _0x2640e5=a81_0x4bef08;if(_0xacbb3f===undefined)_0xacbb3f=_0x37a274;var _0x8787ec=Object[_0x2640e5(0x87)](_0x3c8b86,_0x37a274);(!_0x8787ec||(_0x2640e5(0x92)in _0x8787ec?!_0x3c8b86[_0x2640e5(0x84)]:_0x8787ec[_0x2640e5(0x88)]||_0x8787ec[_0x2640e5(0xc1)]))&&(_0x8787ec={'enumerable':!![],'get':function(){return _0x3c8b86[_0x37a274];}}),Object['defineProperty'](_0x317cee,_0xacbb3f,_0x8787ec);}:function(_0x393a41,_0x3eda2c,_0x5cda8f,_0x428665){if(_0x428665===undefined)_0x428665=_0x5cda8f;_0x393a41[_0x428665]=_0x3eda2c[_0x5cda8f];}),__setModuleDefault=this&&this[a81_0x4bef08(0x8b)]||(Object['create']?function(_0x55bc13,_0x3bd2c0){const _0x273521=a81_0x4bef08;Object[_0x273521(0xbc)](_0x55bc13,_0x273521(0xb2),{'enumerable':!![],'value':_0x3bd2c0});}:function(_0x1b490b,_0x1f64e8){_0x1b490b['default']=_0x1f64e8;}),__importStar=this&&this['__importStar']||function(_0x3c0633){const _0x39d9ba=a81_0x4bef08;if(_0x3c0633&&_0x3c0633[_0x39d9ba(0x84)])return _0x3c0633;var _0x45c479={};if(_0x3c0633!=null){for(var _0x27295a in _0x3c0633)if(_0x27295a!==_0x39d9ba(0xb2)&&Object[_0x39d9ba(0x7f)][_0x39d9ba(0xaa)]['call'](_0x3c0633,_0x27295a))__createBinding(_0x45c479,_0x3c0633,_0x27295a);}return __setModuleDefault(_0x45c479,_0x3c0633),_0x45c479;},__importDefault=this&&this[a81_0x4bef08(0x9f)]||function(_0x535cf1){const _0x552da9=a81_0x4bef08;return _0x535cf1&&_0x535cf1[_0x552da9(0x84)]?_0x535cf1:{'default':_0x535cf1};};Object[a81_0x4bef08(0xbc)](exports,a81_0x4bef08(0x84),{'value':!![]}),exports['MaskingService']=void 0x0;const path_1=__importStar(require(a81_0x4bef08(0xa9))),fs_utils_1=require('../../shared/utils/fs.utils'),promises_1=require(a81_0x4bef08(0xb7)),logger_job_state_1=require(a81_0x4bef08(0x85)),logger_enums_1=require(a81_0x4bef08(0xae)),sync_1=require(a81_0x4bef08(0x8c)),utils_1=require(a81_0x4bef08(0x93)),not_found_error_1=require(a81_0x4bef08(0x83)),job_1=require(a81_0x4bef08(0x89)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),constants_1=require(a81_0x4bef08(0xba)),path_2=require(a81_0x4bef08(0x79));class MaskingService{static async[a81_0x4bef08(0x8f)](_0x16aa70){const _0x280f49=a81_0x4bef08,_0x4b4572=job_utils_1[_0x280f49(0xb2)]['generateJobId'](),_0x3c0995=(0x0,path_1[_0x280f49(0x96)])(MaskingService[_0x280f49(0xaf)],_0x4b4572);await(0x0,fs_utils_1[_0x280f49(0x9d)])(_0x3c0995),await(0x0,promises_1[_0x280f49(0xc0)])(_0x3c0995+'/'+job_1['MANIFEST_FILENAME'],JSON[_0x280f49(0xbb)]({'details':_0x16aa70}));const _0x1a44c3=await new logger_job_state_1['LoggerJobState'](_0x3c0995,_0x4b4572)[_0x280f49(0x7d)]([]);await _0x1a44c3[_0x280f49(0x81)]();const _0x3cca9f=path_1[_0x280f49(0xb2)][_0x280f49(0x96)](__dirname,job_1[_0x280f49(0xb4)]);return job_utils_1['default'][_0x280f49(0xb3)](_0x3cca9f,{'jobStorePath':_0x3c0995,'jobId':_0x4b4572})[_0x280f49(0x99)](_0x394bb4=>this[_0x280f49(0x82)](_0x3c0995,_0x4b4572,_0x394bb4)),{'jobId':_0x4b4572};}static async[a81_0x4bef08(0x94)](_0x11b4fc,_0x41615c){const _0x352e7b=a81_0x4bef08,_0x5a0822=await job_utils_1[_0x352e7b(0xb2)][_0x352e7b(0x91)](MaskingService['maskingFolderPath']),_0x279f45=await job_utils_1[_0x352e7b(0xb2)][_0x352e7b(0x8a)](MaskingService[_0x352e7b(0xaf)],_0x5a0822),_0x2fb0a9=_0x279f45[_0x352e7b(0x86)](_0x41615c,_0x41615c+_0x11b4fc),_0x2ad8d8=[];for(const _0x376bee of _0x2fb0a9){const _0x5a08c6=await this[_0x352e7b(0x97)](_0x376bee,![]);_0x2ad8d8[_0x352e7b(0xa5)](_0x5a08c6);}return _0x2ad8d8;}static async[a81_0x4bef08(0x97)](_0x3f6edc,_0x49b90f){const _0x501349=a81_0x4bef08,_0x385f68=await this[_0x501349(0xac)](_0x3f6edc,job_1[_0x501349(0xb0)],constants_1['JOB_LOG_STATE_NAME']),_0x4eb981=JSON[_0x501349(0xa6)](_0x385f68),_0x2dee3a={'id':_0x4eb981['id'],'status':_0x4eb981['status'],'createdDate':_0x4eb981[_0x501349(0x7a)],'completedDate':_0x4eb981[_0x501349(0x90)],'successful':_0x4eb981[_0x501349(0x9a)],'failed':_0x4eb981['failed']};return _0x49b90f?_0x4eb981:_0x2dee3a;}static async[a81_0x4bef08(0xbf)](_0x18ccf1){const _0xb532d1=a81_0x4bef08,_0x5bee29=await this[_0xb532d1(0xac)](_0x18ccf1,job_1[_0xb532d1(0xa4)],constants_1['JOB_LOG_DETAILS_NAME']);return(0x0,sync_1[_0xb532d1(0xa6)])(_0x5bee29,{'columns':!![]});}static async['getLog'](_0x43346e,_0x3fd4f9,_0x30853c){const _0x39357c=a81_0x4bef08,_0x2f0569=(0x0,path_1['join'])(MaskingService[_0x39357c(0xaf)],_0x43346e),_0x521bc6=(0x0,path_1[_0x39357c(0x96)])(_0x2f0569,_0x3fd4f9);if(!await utils_1[_0x39357c(0xbd)][_0x39357c(0xa0)](_0x2f0569))throw new not_found_error_1[(_0x39357c(0xab))]('Job\x20Id\x20not\x20found.');if(!await utils_1[_0x39357c(0xbd)]['isExistsPath'](_0x521bc6))throw new not_found_error_1[(_0x39357c(0xab))](_0x30853c+_0x39357c(0x7b));return(0x0,promises_1['readFile'])(_0x521bc6,{'encoding':_0x39357c(0xa3)});}static async[a81_0x4bef08(0x82)](_0x327113,_0x4dc6b6,_0x1fa1c2){const _0x1d0f8a=a81_0x4bef08,_0x222d5=await new logger_job_state_1[(_0x1d0f8a(0xbe))](_0x327113,_0x4dc6b6)[_0x1d0f8a(0x7d)]([]);_0x222d5[_0x1d0f8a(0xa7)](logger_enums_1[_0x1d0f8a(0xb5)][_0x1d0f8a(0xad)]),_0x222d5[_0x1d0f8a(0x9e)](_0x1fa1c2[_0x1d0f8a(0xb9)]),await _0x222d5[_0x1d0f8a(0x81)]();}}exports['MaskingService']=MaskingService,MaskingService[a81_0x4bef08(0xaf)]=path_1[a81_0x4bef08(0xb2)][a81_0x4bef08(0x96)](path_2['dataPath'],constants_1['DATA_MASKING_FOLDER_NAME']);function a81_0x1b57(){const _0x567f88=['utf-8','JOB_LOG_DETAILS_FILENAME','push','parse','setJobStatus','__createBinding','path','hasOwnProperty','NotFoundError','getLog','FAILED','../job/enums/logger.enums','maskingFolderPath','JOB_LOG_STATE_FILENAME','662580WdGxpi','default','runJob','JOB_PATH','JobStatus','1564960VnJerZ','fs/promises','1651325IqDnZc','message','../constants','stringify','defineProperty','FsUtils','LoggerJobState','getJobDetails','writeFile','configurable','1261QahUMn','toString','../../../configs/path','createdDate','\x20not\x20found.','apply','init','8wvYpzr','prototype','718qEvuPy','kill','logErrorStartJob','../../../core/errors/not-found.error','__esModule','../job/classes/logger/logger-job-state','slice','getOwnPropertyDescriptor','writable','../../../constants/job','sortJobsIds','__setModuleDefault','csv-parse/sync','(((.+)+)+)+$','107988DhJyqE','createMaskingJob','completedDate','getJobsIds','get','@flosum/utils','getJobs','8479870xJKFKY','join','getJobState','search','catch','successful','3432iWzTMy','98836UsGZzR','makeDir','setJobError','__importDefault','isExistsPath','18WTFCQb','171fhHUUk'];a81_0x1b57=function(){return _0x567f88;};return a81_0x1b57();}