const a310_0x43fd72=a310_0xf432;function a310_0xf432(_0x51bdd0,_0x213b83){const _0x36ad22=a310_0x1050();return a310_0xf432=function(_0x5983be,_0x4e0567){_0x5983be=_0x5983be-0x1b6;let _0x10500d=_0x36ad22[_0x5983be];return _0x10500d;},a310_0xf432(_0x51bdd0,_0x213b83);}(function(_0x44e52c,_0x13988a){const _0x471e89=a310_0xf432,_0x12956f=_0x44e52c();while(!![]){try{const _0x47ada6=-parseInt(_0x471e89(0x1c5))/0x1*(-parseInt(_0x471e89(0x1fe))/0x2)+parseInt(_0x471e89(0x1df))/0x3+parseInt(_0x471e89(0x1f3))/0x4+parseInt(_0x471e89(0x1b6))/0x5*(-parseInt(_0x471e89(0x1fc))/0x6)+-parseInt(_0x471e89(0x1c2))/0x7*(parseInt(_0x471e89(0x1d0))/0x8)+-parseInt(_0x471e89(0x1f9))/0x9*(-parseInt(_0x471e89(0x1d4))/0xa)+parseInt(_0x471e89(0x1b7))/0xb;if(_0x47ada6===_0x13988a)break;else _0x12956f['push'](_0x12956f['shift']());}catch(_0x41912f){_0x12956f['push'](_0x12956f['shift']());}}}(a310_0x1050,0xc4cba));const a310_0x4e0567=(function(){let _0x5c567d=!![];return function(_0x37704b,_0xc9a1c9){const _0x43450f=_0x5c567d?function(){if(_0xc9a1c9){const _0x3cf7f0=_0xc9a1c9['apply'](_0x37704b,arguments);return _0xc9a1c9=null,_0x3cf7f0;}}:function(){};return _0x5c567d=![],_0x43450f;};}()),a310_0x5983be=a310_0x4e0567(this,function(){const _0x11c5b2=a310_0xf432;return a310_0x5983be[_0x11c5b2(0x1ca)]()[_0x11c5b2(0x1bc)](_0x11c5b2(0x1f5))[_0x11c5b2(0x1ca)]()[_0x11c5b2(0x1e4)](a310_0x5983be)['search'](_0x11c5b2(0x1f5));});a310_0x5983be();function a310_0x1050(){const _0x15b809=['10FmNVeL','name','_branchId','../enums/status.enums','lastModifiedDate','No\x20components\x20found\x20in\x20Veeva','componentType','../dtos/veeva-component.dto','./salesforce.service','filter','VeevaService','194088RItatQ','retrieveDependencyVeevaComponents','toLowerCase','Component__c\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20','sourceComponentId','constructor','AppResponseStatus','get','executeManyVQL','type','retrieveRecords','_connectionSalesforce','set','../dtos/component.dto','has','length','../../../constants','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27','chunkArray','FLOSUM_NAMESPACE','3146032ZpqCWQ','No\x20veeva\x20components\x20found\x20in\x20branch','(((.+)+)+)+$','execute','componentName','map','844029vowuev','targetComponentId','retrieveComponents','282LacWXh','reduce','2htrWZH','includes','89410XiAcWH','4608175IibPvc','VeevaComponentRelationshipDto','SalesforceService','\x27,\x27','../../shared/utils','search','retrieveVeevaComponentsById','branchId','values','../dtos/veeva-component-relationship.dto','BUILD_WHERE_BY_ID_LIMIT','1727439TXAzFo','_connectionVeeva','createDataResult','529395NQJUrR','No\x20relationship\x20found\x20in\x20Veeva','Veeva_Component__c\x20=\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','status','__esModule','toString','DependencyService','defineProperty','VeevaComponentDto','join','VeevaConstants','8JdWoOc','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_name__v\x20CONTAINS\x20(\x27','ENDPOINT_VQL','BUILD_WHERE_BY_NAME_LIMIT'];a310_0x1050=function(){return _0x15b809;};return a310_0x1050();}'use strict';Object[a310_0x43fd72(0x1cc)](exports,a310_0x43fd72(0x1c9),{'value':!![]}),exports['DependencyService']=void 0x0;const veeva_constants_1=require('../constants/veeva.constants'),veeva_service_1=require('./veeva.service'),component_dto_1=require(a310_0x43fd72(0x1ec)),veeva_component_dto_1=require(a310_0x43fd72(0x1db)),veeva_component_relationship_dto_1=require(a310_0x43fd72(0x1c0)),utils_1=require(a310_0x43fd72(0x1bb)),constants_1=require(a310_0x43fd72(0x1ef)),status_enums_1=require(a310_0x43fd72(0x1d7)),salesforce_service_1=require(a310_0x43fd72(0x1dc));class DependencyService{constructor(_0xa0bfbd,_0x129cd1,_0x58cb33){const _0x54f8b4=a310_0x43fd72;this['_connectionSalesforce']=_0x129cd1,this[_0x54f8b4(0x1c3)]=_0x58cb33,this[_0x54f8b4(0x1d6)]=_0xa0bfbd[_0x54f8b4(0x1be)];}async[a310_0x43fd72(0x1f6)](){const _0x4e7845=a310_0x43fd72,_0x1f505e=await this[_0x4e7845(0x1fb)](),_0x27090d=await this['retrieveVeevaComponentsByTypeAndName'](_0x1f505e),_0x27249f=await this[_0x4e7845(0x1e0)](_0x27090d),_0x1a6b69=_0x27249f[_0x4e7845(0x1f8)](_0x51deb9=>_0x51deb9[_0x4e7845(0x1fa)]),_0x807f46=await this[_0x4e7845(0x1bd)](_0x1a6b69),_0x307ebf=DependencyService[_0x4e7845(0x1c4)](_0x27090d,_0x807f46,_0x27249f);return{'responseStatus':status_enums_1[_0x4e7845(0x1e5)]['SUCCESS'],'data':_0x307ebf};}async['retrieveComponents'](){const _0x293c20=a310_0x43fd72,_0x539bae='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20'+constants_1['FLOSUM_NAMESPACE']+'Component_Name__c,\x20'+constants_1[_0x293c20(0x1f2)]+'Component_Type__c\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20'+constants_1['FLOSUM_NAMESPACE']+_0x293c20(0x1e2)+constants_1['FLOSUM_NAMESPACE']+'Branch__c\x20=\x20\x27'+this[_0x293c20(0x1d6)]+'\x27\x20AND\x20'+constants_1[_0x293c20(0x1f2)]+_0x293c20(0x1c7),_0x49e4d1=await salesforce_service_1[_0x293c20(0x1b9)][_0x293c20(0x1e9)](this[_0x293c20(0x1ea)],_0x539bae);if(!_0x49e4d1[_0x293c20(0x1ee)])throw new Error(_0x293c20(0x1f4));return _0x49e4d1[_0x293c20(0x1f8)](_0x5258ad=>new component_dto_1['ComponentDto'](_0x5258ad));}async['retrieveVeevaComponentsByTypeAndName'](_0x553ff5){const _0x4c182e=a310_0x43fd72,_0x4ced1c=_0x553ff5[_0x4c182e(0x1fd)]((_0x686905,_0x362a64)=>_0x686905['add']((_0x362a64[_0x4c182e(0x1da)]+'.'+_0x362a64[_0x4c182e(0x1f7)])[_0x4c182e(0x1e1)]()),new Set()),_0x525dc0=_0x553ff5[_0x4c182e(0x1f8)](_0x5ad40e=>_0x5ad40e[_0x4c182e(0x1f7)]),_0x3de2ab=(0x0,utils_1[_0x4c182e(0x1f1)])(_0x525dc0,veeva_constants_1[_0x4c182e(0x1cf)][_0x4c182e(0x1d3)]),_0x1e650a=_0x3de2ab[_0x4c182e(0x1f8)](_0x418a69=>veeva_constants_1[_0x4c182e(0x1cf)][_0x4c182e(0x1d2)]+(_0x4c182e(0x1d1)+_0x418a69['join'](_0x4c182e(0x1ba))+'\x27)')),_0x3d3fd5=await veeva_service_1[_0x4c182e(0x1de)][_0x4c182e(0x1e7)](_0x1e650a,this[_0x4c182e(0x1c3)]),_0x393534=_0x3d3fd5[_0x4c182e(0x1f8)](_0x4cc871=>new veeva_component_dto_1[(_0x4c182e(0x1cd))](_0x4cc871))[_0x4c182e(0x1dd)](_0x49bee7=>_0x4ced1c['has']((_0x49bee7[_0x4c182e(0x1e8)]+'.'+_0x49bee7[_0x4c182e(0x1d5)])[_0x4c182e(0x1e1)]()));if(!_0x393534[_0x4c182e(0x1ee)])throw new Error(_0x4c182e(0x1d9));return _0x393534;}async[a310_0x43fd72(0x1bd)](_0x4c5486){const _0x5aa3cd=a310_0x43fd72,_0x48417d=(0x0,utils_1['chunkArray'])(_0x4c5486,veeva_constants_1['VeevaConstants']['BUILD_WHERE_BY_ID_LIMIT']),_0x3e02f6=_0x48417d[_0x5aa3cd(0x1f8)](_0x923e1a=>veeva_constants_1[_0x5aa3cd(0x1cf)][_0x5aa3cd(0x1d2)]+(_0x5aa3cd(0x1f0)+_0x923e1a[_0x5aa3cd(0x1ce)](_0x5aa3cd(0x1ba))+'\x27)')),_0x4e9415=await veeva_service_1[_0x5aa3cd(0x1de)][_0x5aa3cd(0x1e7)](_0x3e02f6,this['_connectionVeeva']),_0x213a1a=_0x4e9415[_0x5aa3cd(0x1f8)](_0xefa417=>new veeva_component_dto_1[(_0x5aa3cd(0x1cd))](_0xefa417))['filter'](_0x1db676=>!_0x1db676[_0x5aa3cd(0x1c8)][_0x5aa3cd(0x1ff)]('inactive__v'));if(!_0x213a1a[_0x5aa3cd(0x1ee)])throw new Error('No\x20dependency\x20components\x20found\x20in\x20Veeva');return _0x213a1a;}async['retrieveDependencyVeevaComponents'](_0x248f95){const _0x13b3f3=a310_0x43fd72,_0x5ea645=_0x248f95[_0x13b3f3(0x1f8)](_0xaa33cf=>_0xaa33cf['id']),_0x21b7c8=(0x0,utils_1['chunkArray'])(_0x5ea645,veeva_constants_1[_0x13b3f3(0x1cf)][_0x13b3f3(0x1c1)]),_0x2cab1f=_0x21b7c8[_0x13b3f3(0x1f8)](_0x48ce09=>veeva_constants_1[_0x13b3f3(0x1cf)][_0x13b3f3(0x1d2)]+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20source_component__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20target_component__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20target_component_name__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20created_date__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component_relationship__sys\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20source_component__sys\x20CONTAINS\x20(\x27'+_0x48ce09[_0x13b3f3(0x1ce)](_0x13b3f3(0x1ba))+'\x27)')),_0x1007b3=await veeva_service_1['VeevaService'][_0x13b3f3(0x1e7)](_0x2cab1f,this['_connectionVeeva']),_0x5c31d7=_0x1007b3[_0x13b3f3(0x1f8)](_0x5ce830=>new veeva_component_relationship_dto_1[(_0x13b3f3(0x1b8))](_0x5ce830));if(!_0x5c31d7[_0x13b3f3(0x1ee)])throw new Error(_0x13b3f3(0x1c6));return DependencyService['deleteDependencyVeevaComponentDuplicates'](_0x5c31d7);}static['deleteDependencyVeevaComponentDuplicates'](_0x338c76){const _0x11aaa4=a310_0x43fd72,_0x235819=_0x338c76[_0x11aaa4(0x1fd)]((_0x25ce10,_0x2db88a)=>_0x25ce10['set'](_0x2db88a[_0x11aaa4(0x1e3)]+'.'+_0x2db88a[_0x11aaa4(0x1fa)],_0x2db88a),new Map());return[..._0x235819[_0x11aaa4(0x1bf)]()];}static[a310_0x43fd72(0x1c4)](_0x82ec7,_0x48d18a,_0x22abb5){const _0x1f4f4e=a310_0x43fd72,_0x1e9537={},_0x18fff3=_0x82ec7[_0x1f4f4e(0x1fd)]((_0xd0d968,_0x581c72)=>_0xd0d968[_0x1f4f4e(0x1eb)](_0x581c72['id'],_0x581c72),new Map()),_0x1d4b28=_0x48d18a[_0x1f4f4e(0x1fd)]((_0x5f593a,_0x1848e5)=>_0x5f593a[_0x1f4f4e(0x1eb)](_0x1848e5['id'],_0x1848e5),new Map());for(const _0x5733d5 of _0x22abb5){const _0x1e5800=_0x18fff3['has'](_0x5733d5['sourceComponentId'])&&_0x1d4b28[_0x1f4f4e(0x1ed)](_0x5733d5['targetComponentId']);if(!_0x1e5800)continue;const _0x4ecec1=_0x18fff3[_0x1f4f4e(0x1e6)](_0x5733d5[_0x1f4f4e(0x1e3)]),_0x6a9cfd=_0x1d4b28[_0x1f4f4e(0x1e6)](_0x5733d5['targetComponentId']);!_0x1e9537[_0x4ecec1[_0x1f4f4e(0x1d5)]+':'+_0x4ecec1['type']]&&(_0x1e9537[_0x4ecec1[_0x1f4f4e(0x1d5)]+':'+_0x4ecec1[_0x1f4f4e(0x1e8)]]={'dependencies':[],'label':_0x4ecec1['name']+'\x20('+_0x4ecec1[_0x1f4f4e(0x1e8)]+')','type':_0x4ecec1[_0x1f4f4e(0x1e8)],'name':_0x4ecec1['name']}),_0x1e9537[_0x4ecec1[_0x1f4f4e(0x1d5)]+':'+_0x4ecec1[_0x1f4f4e(0x1e8)]]['dependencies']['push']({'label':_0x6a9cfd[_0x1f4f4e(0x1d5)]+'\x20('+_0x6a9cfd[_0x1f4f4e(0x1e8)]+')','name':_0x6a9cfd[_0x1f4f4e(0x1d5)],'type':_0x6a9cfd[_0x1f4f4e(0x1e8)],'lastUpdate':_0x6a9cfd[_0x1f4f4e(0x1d8)],'isMissing':!_0x18fff3[_0x1f4f4e(0x1ed)](_0x5733d5[_0x1f4f4e(0x1fa)])});}return _0x1e9537;}}exports[a310_0x43fd72(0x1cb)]=DependencyService;