const a309_0x6599af=a309_0x197c;function a309_0x197c(_0x413718,_0x57611f){const _0xe4b1ec=a309_0x5ecc();return a309_0x197c=function(_0x573afa,_0x45177f){_0x573afa=_0x573afa-0x7f;let _0x5ecc3f=_0xe4b1ec[_0x573afa];return _0x5ecc3f;},a309_0x197c(_0x413718,_0x57611f);}(function(_0x35ee86,_0x1934e3){const _0xffe43a=a309_0x197c,_0x595912=_0x35ee86();while(!![]){try{const _0xce3753=-parseInt(_0xffe43a(0xa2))/0x1+-parseInt(_0xffe43a(0xb7))/0x2+parseInt(_0xffe43a(0x85))/0x3+-parseInt(_0xffe43a(0x91))/0x4+-parseInt(_0xffe43a(0xbd))/0x5+-parseInt(_0xffe43a(0xab))/0x6+parseInt(_0xffe43a(0xb4))/0x7*(parseInt(_0xffe43a(0x9b))/0x8);if(_0xce3753===_0x1934e3)break;else _0x595912['push'](_0x595912['shift']());}catch(_0x8b182a){_0x595912['push'](_0x595912['shift']());}}}(a309_0x5ecc,0xd416d));const a309_0x45177f=(function(){let _0x192fa9=!![];return function(_0x34a057,_0x32275f){const _0x41931f=_0x192fa9?function(){const _0x41c1a9=a309_0x197c;if(_0x32275f){const _0x44bf5b=_0x32275f[_0x41c1a9(0x96)](_0x34a057,arguments);return _0x32275f=null,_0x44bf5b;}}:function(){};return _0x192fa9=![],_0x41931f;};}()),a309_0x573afa=a309_0x45177f(this,function(){const _0x2f937e=a309_0x197c;return a309_0x573afa[_0x2f937e(0xa0)]()[_0x2f937e(0xa6)]('(((.+)+)+)+$')['toString']()[_0x2f937e(0x95)](a309_0x573afa)['search'](_0x2f937e(0x7f));});a309_0x573afa();'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['DependencyService']=void 0x0;const veeva_constants_1=require(a309_0x6599af(0xb1)),veeva_service_1=require(a309_0x6599af(0x80)),component_dto_1=require(a309_0x6599af(0x8d)),veeva_component_dto_1=require(a309_0x6599af(0x8a)),veeva_component_relationship_dto_1=require(a309_0x6599af(0xae)),utils_1=require(a309_0x6599af(0xba)),constants_1=require(a309_0x6599af(0xaa)),status_enums_1=require('../enums/status.enums'),salesforce_service_1=require('./salesforce.service');function a309_0x5ecc(){const _0x3c6571=['createDataResult','\x27,\x27','sourceComponentId','1893032isMNeK','deleteDependencyVeevaComponentDuplicates','get','reduce','SalesforceService','toString','ENDPOINT_VQL','1484688KiXbdH','componentName','map','Branch__c\x20=\x20\x27','search','add','retrieveRecords','Component_Type__c\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20','../../../constants','6230316ZBrPWt','VeevaComponentDto','retrieveDependencyVeevaComponents','../dtos/veeva-component-relationship.dto','execute','componentType','../constants/veeva.constants','Veeva_Component__c\x20=\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','SUCCESS','140evpcjH','dependencies','targetComponentId','2985894fqyHBK','No\x20veeva\x20components\x20found\x20in\x20branch','VeevaConstants','../../shared/utils','executeManyVQL','VeevaComponentRelationshipDto','3009465gEVTON','_connectionSalesforce','Component_Name__c,\x20','retrieveVeevaComponentsById','values','_branchId','retrieveVeevaComponentsByTypeAndName','toLowerCase','name','filter','(((.+)+)+)+$','./veeva.service','No\x20dependency\x20components\x20found\x20in\x20Veeva','has','retrieveComponents','FLOSUM_NAMESPACE','2481555ZxnRyf','\x27\x20AND\x20','join','chunkArray','length','../dtos/veeva-component.dto','VeevaService','type','../dtos/component.dto','Component__c\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20','BUILD_WHERE_BY_ID_LIMIT','292536QAVeWA','No\x20relationship\x20found\x20in\x20Veeva','_connectionVeeva','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27','constructor','apply','set'];a309_0x5ecc=function(){return _0x3c6571;};return a309_0x5ecc();}class DependencyService{constructor(_0x8d0ad3,_0x388151,_0x5e455e){const _0x13079c=a309_0x6599af;this[_0x13079c(0xbe)]=_0x388151,this[_0x13079c(0x93)]=_0x5e455e,this[_0x13079c(0xc2)]=_0x8d0ad3['branchId'];}async[a309_0x6599af(0xaf)](){const _0x54cdc4=a309_0x6599af,_0x4329b3=await this[_0x54cdc4(0x83)](),_0x50ea9a=await this['retrieveVeevaComponentsByTypeAndName'](_0x4329b3),_0x53e1fe=await this[_0x54cdc4(0xad)](_0x50ea9a),_0x52e6e5=_0x53e1fe[_0x54cdc4(0xa4)](_0xf2d73f=>_0xf2d73f[_0x54cdc4(0xb6)]),_0xdd517e=await this['retrieveVeevaComponentsById'](_0x52e6e5),_0x5b03f0=DependencyService[_0x54cdc4(0x98)](_0x50ea9a,_0xdd517e,_0x53e1fe);return{'responseStatus':status_enums_1['AppResponseStatus'][_0x54cdc4(0xb3)],'data':_0x5b03f0};}async['retrieveComponents'](){const _0x287578=a309_0x6599af,_0x606695=_0x287578(0x8f)+constants_1[_0x287578(0x84)]+_0x287578(0xbf)+constants_1[_0x287578(0x84)]+_0x287578(0xa9)+constants_1[_0x287578(0x84)]+_0x287578(0x8e)+constants_1[_0x287578(0x84)]+_0x287578(0xa5)+this[_0x287578(0xc2)]+_0x287578(0x86)+constants_1[_0x287578(0x84)]+_0x287578(0xb2),_0x465dbd=await salesforce_service_1[_0x287578(0x9f)][_0x287578(0xa8)](this['_connectionSalesforce'],_0x606695);if(!_0x465dbd['length'])throw new Error(_0x287578(0xb8));return _0x465dbd[_0x287578(0xa4)](_0x10b6b7=>new component_dto_1['ComponentDto'](_0x10b6b7));}async[a309_0x6599af(0xc3)](_0xba1279){const _0x3f6d43=a309_0x6599af,_0x167347=_0xba1279[_0x3f6d43(0x9e)]((_0x3b442d,_0x4e76f1)=>_0x3b442d[_0x3f6d43(0xa7)]((_0x4e76f1[_0x3f6d43(0xb0)]+'.'+_0x4e76f1['componentName'])['toLowerCase']()),new Set()),_0x970cd8=_0xba1279[_0x3f6d43(0xa4)](_0xdff59c=>_0xdff59c[_0x3f6d43(0xa3)]),_0x1f129d=(0x0,utils_1[_0x3f6d43(0x88)])(_0x970cd8,veeva_constants_1[_0x3f6d43(0xb9)]['BUILD_WHERE_BY_NAME_LIMIT']),_0x5b65ac=_0x1f129d[_0x3f6d43(0xa4)](_0x310364=>veeva_constants_1[_0x3f6d43(0xb9)][_0x3f6d43(0xa1)]+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_name__v\x20CONTAINS\x20(\x27'+_0x310364['join'](_0x3f6d43(0x99))+'\x27)')),_0x4a48f4=await veeva_service_1[_0x3f6d43(0x8b)][_0x3f6d43(0xbb)](_0x5b65ac,this[_0x3f6d43(0x93)]),_0x54bc4d=_0x4a48f4[_0x3f6d43(0xa4)](_0xd66b30=>new veeva_component_dto_1[(_0x3f6d43(0xac))](_0xd66b30))[_0x3f6d43(0xc6)](_0x42d62f=>_0x167347[_0x3f6d43(0x82)]((_0x42d62f[_0x3f6d43(0x8c)]+'.'+_0x42d62f['name'])[_0x3f6d43(0xc4)]()));if(!_0x54bc4d[_0x3f6d43(0x89)])throw new Error('No\x20components\x20found\x20in\x20Veeva');return _0x54bc4d;}async[a309_0x6599af(0xc0)](_0x5e5179){const _0x4ba033=a309_0x6599af,_0x497408=(0x0,utils_1[_0x4ba033(0x88)])(_0x5e5179,veeva_constants_1[_0x4ba033(0xb9)][_0x4ba033(0x90)]),_0x39e069=_0x497408[_0x4ba033(0xa4)](_0x3c88bf=>veeva_constants_1[_0x4ba033(0xb9)][_0x4ba033(0xa1)]+(_0x4ba033(0x94)+_0x3c88bf[_0x4ba033(0x87)](_0x4ba033(0x99))+'\x27)')),_0x50919e=await veeva_service_1[_0x4ba033(0x8b)]['executeManyVQL'](_0x39e069,this[_0x4ba033(0x93)]),_0x3be5c3=_0x50919e[_0x4ba033(0xa4)](_0x17863e=>new veeva_component_dto_1[(_0x4ba033(0xac))](_0x17863e))[_0x4ba033(0xc6)](_0xab28da=>!_0xab28da['status']['includes']('inactive__v'));if(!_0x3be5c3[_0x4ba033(0x89)])throw new Error(_0x4ba033(0x81));return _0x3be5c3;}async[a309_0x6599af(0xad)](_0x477e27){const _0xf330cb=a309_0x6599af,_0x2bb03a=_0x477e27[_0xf330cb(0xa4)](_0x29d341=>_0x29d341['id']),_0x463afa=(0x0,utils_1['chunkArray'])(_0x2bb03a,veeva_constants_1['VeevaConstants']['BUILD_WHERE_BY_ID_LIMIT']),_0x3782e3=_0x463afa['map'](_0x5d05e0=>veeva_constants_1[_0xf330cb(0xb9)][_0xf330cb(0xa1)]+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20source_component__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20target_component__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20target_component_name__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20created_date__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component_relationship__sys\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20source_component__sys\x20CONTAINS\x20(\x27'+_0x5d05e0[_0xf330cb(0x87)](_0xf330cb(0x99))+'\x27)')),_0x9ddc65=await veeva_service_1[_0xf330cb(0x8b)][_0xf330cb(0xbb)](_0x3782e3,this['_connectionVeeva']),_0x3f8ca3=_0x9ddc65[_0xf330cb(0xa4)](_0x58ef80=>new veeva_component_relationship_dto_1[(_0xf330cb(0xbc))](_0x58ef80));if(!_0x3f8ca3['length'])throw new Error(_0xf330cb(0x92));return DependencyService[_0xf330cb(0x9c)](_0x3f8ca3);}static[a309_0x6599af(0x9c)](_0x21395d){const _0x4aed13=a309_0x6599af,_0x230f55=_0x21395d[_0x4aed13(0x9e)]((_0x3085f5,_0x55207b)=>_0x3085f5[_0x4aed13(0x97)](_0x55207b['sourceComponentId']+'.'+_0x55207b['targetComponentId'],_0x55207b),new Map());return[..._0x230f55[_0x4aed13(0xc1)]()];}static[a309_0x6599af(0x98)](_0x2f4223,_0x324150,_0x1c0480){const _0x1c31c5=a309_0x6599af,_0x33b390={},_0x23a09b=_0x2f4223[_0x1c31c5(0x9e)]((_0x361f79,_0x4e342f)=>_0x361f79[_0x1c31c5(0x97)](_0x4e342f['id'],_0x4e342f),new Map()),_0xb9b8dc=_0x324150['reduce']((_0x5cd316,_0x1e0320)=>_0x5cd316[_0x1c31c5(0x97)](_0x1e0320['id'],_0x1e0320),new Map());for(const _0x19e4f6 of _0x1c0480){const _0x374859=_0x23a09b[_0x1c31c5(0x82)](_0x19e4f6[_0x1c31c5(0x9a)])&&_0xb9b8dc[_0x1c31c5(0x82)](_0x19e4f6[_0x1c31c5(0xb6)]);if(!_0x374859)continue;const _0x1a9705=_0x23a09b[_0x1c31c5(0x9d)](_0x19e4f6[_0x1c31c5(0x9a)]),_0x348836=_0xb9b8dc[_0x1c31c5(0x9d)](_0x19e4f6[_0x1c31c5(0xb6)]);!_0x33b390[_0x1a9705[_0x1c31c5(0xc5)]+':'+_0x1a9705[_0x1c31c5(0x8c)]]&&(_0x33b390[_0x1a9705[_0x1c31c5(0xc5)]+':'+_0x1a9705[_0x1c31c5(0x8c)]]={'dependencies':[],'label':_0x1a9705[_0x1c31c5(0xc5)]+'\x20('+_0x1a9705['type']+')','type':_0x1a9705['type'],'name':_0x1a9705['name']}),_0x33b390[_0x1a9705[_0x1c31c5(0xc5)]+':'+_0x1a9705[_0x1c31c5(0x8c)]][_0x1c31c5(0xb5)]['push']({'label':_0x348836[_0x1c31c5(0xc5)]+'\x20('+_0x348836[_0x1c31c5(0x8c)]+')','name':_0x348836[_0x1c31c5(0xc5)],'type':_0x348836['type'],'lastUpdate':_0x348836['lastModifiedDate'],'isMissing':!_0x23a09b[_0x1c31c5(0x82)](_0x19e4f6[_0x1c31c5(0xb6)])});}return _0x33b390;}}exports['DependencyService']=DependencyService;