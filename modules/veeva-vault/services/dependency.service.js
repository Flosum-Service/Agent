const a256_0x4bbc05=a256_0x1054;(function(_0x7b7e3c,_0x456039){const _0x49647e=a256_0x1054,_0x59b1ce=_0x7b7e3c();while(!![]){try{const _0x55936a=parseInt(_0x49647e(0x152))/0x1+parseInt(_0x49647e(0x12d))/0x2+parseInt(_0x49647e(0x15a))/0x3+-parseInt(_0x49647e(0x126))/0x4+-parseInt(_0x49647e(0x156))/0x5+-parseInt(_0x49647e(0x161))/0x6*(parseInt(_0x49647e(0x14a))/0x7)+parseInt(_0x49647e(0x153))/0x8;if(_0x55936a===_0x456039)break;else _0x59b1ce['push'](_0x59b1ce['shift']());}catch(_0x250168){_0x59b1ce['push'](_0x59b1ce['shift']());}}}(a256_0x2b06,0xc7321));const a256_0x5e0b9f=(function(){let _0x594320=!![];return function(_0x591fb2,_0x4af5c3){const _0x3857c6=_0x594320?function(){if(_0x4af5c3){const _0x3e96ba=_0x4af5c3['apply'](_0x591fb2,arguments);return _0x4af5c3=null,_0x3e96ba;}}:function(){};return _0x594320=![],_0x3857c6;};}()),a256_0x5277d4=a256_0x5e0b9f(this,function(){const _0x3213f4=a256_0x1054;return a256_0x5277d4[_0x3213f4(0x142)]()['search'](_0x3213f4(0x163))[_0x3213f4(0x142)]()[_0x3213f4(0x16d)](a256_0x5277d4)[_0x3213f4(0x150)](_0x3213f4(0x163));});function a256_0x2b06(){const _0x37d734=['FLOSUM_NAMESPACE','filter','status','\x27,\x27','has','includes','VeevaComponentDto','constructor','_connectionVeeva','sourceComponentId','5478896egxWEg','./veeva.service','length','targetComponentId','deleteDependencyVeevaComponentDuplicates','retrieveDependencyVeevaComponents','set','2736038aLbHFa','../constants/veeva.constants','Component_Type__c\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20','_connectionSalesforce','../dtos/veeva-component.dto','toLowerCase','createDataResult','../enums/status.enums','No\x20relationship\x20found\x20in\x20Veeva','../../../constants','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_name__v\x20CONTAINS\x20(\x27','retrieveVeevaComponentsByTypeAndName','VeevaConstants','SalesforceService','add','retrieveRecords','No\x20dependency\x20components\x20found\x20in\x20Veeva','Component__c\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20','componentName','push','BUILD_WHERE_BY_NAME_LIMIT','toString','componentType','Branch__c\x20=\x20\x27','VeevaComponentRelationshipDto','map','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20','chunkArray','Component_Name__c,\x20','21ZLUyKL','../../shared/utils','DependencyService','dependencies','__esModule','BUILD_WHERE_BY_ID_LIMIT','search','branchId','956209rGmnYO','1602904jMWWZk','_branchId','inactive__v','2569135UBxOdz','defineProperty','VeevaService','retrieveComponents','1362522ELdxfh','type','join','executeManyVQL','name','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27','retrieveVeevaComponentsById','558618CWyoMG','reduce','(((.+)+)+)+$','ENDPOINT_VQL','./salesforce.service'];a256_0x2b06=function(){return _0x37d734;};return a256_0x2b06();}a256_0x5277d4();'use strict';function a256_0x1054(_0x238874,_0x3ffdb9){const _0x57dcf0=a256_0x2b06();return a256_0x1054=function(_0x5277d4,_0x5e0b9f){_0x5277d4=_0x5277d4-0x126;let _0x2b06b8=_0x57dcf0[_0x5277d4];return _0x2b06b8;},a256_0x1054(_0x238874,_0x3ffdb9);}Object[a256_0x4bbc05(0x157)](exports,a256_0x4bbc05(0x14e),{'value':!![]}),exports['DependencyService']=void 0x0;const veeva_constants_1=require(a256_0x4bbc05(0x12e)),veeva_service_1=require(a256_0x4bbc05(0x127)),component_dto_1=require('../dtos/component.dto'),veeva_component_dto_1=require(a256_0x4bbc05(0x131)),veeva_component_relationship_dto_1=require('../dtos/veeva-component-relationship.dto'),utils_1=require(a256_0x4bbc05(0x14b)),constants_1=require(a256_0x4bbc05(0x136)),status_enums_1=require(a256_0x4bbc05(0x134)),salesforce_service_1=require(a256_0x4bbc05(0x165));class DependencyService{constructor(_0x28c06a,_0x4b449e,_0x16c99c){const _0x59a1fa=a256_0x4bbc05;this[_0x59a1fa(0x130)]=_0x4b449e,this[_0x59a1fa(0x16e)]=_0x16c99c,this['_branchId']=_0x28c06a[_0x59a1fa(0x151)];}async['execute'](){const _0x32dcf0=a256_0x4bbc05,_0x473740=await this[_0x32dcf0(0x159)](),_0x5c90c1=await this['retrieveVeevaComponentsByTypeAndName'](_0x473740),_0x31504f=await this[_0x32dcf0(0x12b)](_0x5c90c1),_0xaed074=_0x31504f['map'](_0x170e70=>_0x170e70[_0x32dcf0(0x129)]),_0x2fb6d4=await this['retrieveVeevaComponentsById'](_0xaed074),_0x3fc95e=DependencyService[_0x32dcf0(0x133)](_0x5c90c1,_0x2fb6d4,_0x31504f);return{'responseStatus':status_enums_1['AppResponseStatus']['SUCCESS'],'data':_0x3fc95e};}async['retrieveComponents'](){const _0x413528=a256_0x4bbc05,_0x3460d9=_0x413528(0x147)+constants_1['FLOSUM_NAMESPACE']+_0x413528(0x149)+constants_1[_0x413528(0x166)]+_0x413528(0x12f)+constants_1['FLOSUM_NAMESPACE']+_0x413528(0x13e)+constants_1['FLOSUM_NAMESPACE']+_0x413528(0x144)+this[_0x413528(0x154)]+'\x27\x20AND\x20'+constants_1[_0x413528(0x166)]+'Veeva_Component__c\x20=\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x437365=await salesforce_service_1[_0x413528(0x13a)][_0x413528(0x13c)](this[_0x413528(0x130)],_0x3460d9);if(!_0x437365['length'])throw new Error('No\x20veeva\x20components\x20found\x20in\x20branch');return _0x437365[_0x413528(0x146)](_0x1a6fdd=>new component_dto_1['ComponentDto'](_0x1a6fdd));}async[a256_0x4bbc05(0x138)](_0x38f569){const _0x184a1f=a256_0x4bbc05,_0x5ec52a=_0x38f569['reduce']((_0x2c6234,_0xf5566d)=>_0x2c6234[_0x184a1f(0x13b)]((_0xf5566d[_0x184a1f(0x143)]+'.'+_0xf5566d['componentName'])[_0x184a1f(0x132)]()),new Set()),_0x34469a=_0x38f569[_0x184a1f(0x146)](_0x839bbf=>_0x839bbf[_0x184a1f(0x13f)]),_0x279d67=(0x0,utils_1[_0x184a1f(0x148)])(_0x34469a,veeva_constants_1['VeevaConstants'][_0x184a1f(0x141)]),_0x312119=_0x279d67[_0x184a1f(0x146)](_0x102401=>veeva_constants_1[_0x184a1f(0x139)][_0x184a1f(0x164)]+(_0x184a1f(0x137)+_0x102401['join'](_0x184a1f(0x169))+'\x27)')),_0x50eb75=await veeva_service_1[_0x184a1f(0x158)][_0x184a1f(0x15d)](_0x312119,this[_0x184a1f(0x16e)]),_0x76549b=_0x50eb75['map'](_0x171eed=>new veeva_component_dto_1[(_0x184a1f(0x16c))](_0x171eed))[_0x184a1f(0x167)](_0x12e846=>_0x5ec52a[_0x184a1f(0x16a)]((_0x12e846[_0x184a1f(0x15b)]+'.'+_0x12e846[_0x184a1f(0x15e)])[_0x184a1f(0x132)]()));if(!_0x76549b[_0x184a1f(0x128)])throw new Error('No\x20components\x20found\x20in\x20Veeva');return _0x76549b;}async[a256_0x4bbc05(0x160)](_0x2790b4){const _0x3cfcfb=a256_0x4bbc05,_0x4f1331=(0x0,utils_1[_0x3cfcfb(0x148)])(_0x2790b4,veeva_constants_1[_0x3cfcfb(0x139)][_0x3cfcfb(0x14f)]),_0x5c34ff=_0x4f1331['map'](_0x5b8e08=>veeva_constants_1['VeevaConstants'][_0x3cfcfb(0x164)]+(_0x3cfcfb(0x15f)+_0x5b8e08['join'](_0x3cfcfb(0x169))+'\x27)')),_0x202d78=await veeva_service_1[_0x3cfcfb(0x158)]['executeManyVQL'](_0x5c34ff,this[_0x3cfcfb(0x16e)]),_0xf5ebbd=_0x202d78['map'](_0x3bbbf5=>new veeva_component_dto_1[(_0x3cfcfb(0x16c))](_0x3bbbf5))[_0x3cfcfb(0x167)](_0x5a6be1=>!_0x5a6be1[_0x3cfcfb(0x168)][_0x3cfcfb(0x16b)](_0x3cfcfb(0x155)));if(!_0xf5ebbd[_0x3cfcfb(0x128)])throw new Error(_0x3cfcfb(0x13d));return _0xf5ebbd;}async[a256_0x4bbc05(0x12b)](_0x745cfb){const _0x58d7bc=a256_0x4bbc05,_0x2078e2=_0x745cfb[_0x58d7bc(0x146)](_0x1cdd16=>_0x1cdd16['id']),_0x14ee6d=(0x0,utils_1[_0x58d7bc(0x148)])(_0x2078e2,veeva_constants_1[_0x58d7bc(0x139)][_0x58d7bc(0x14f)]),_0xe6e177=_0x14ee6d['map'](_0x13abfc=>veeva_constants_1[_0x58d7bc(0x139)][_0x58d7bc(0x164)]+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20source_component__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20target_component__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20target_component_name__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20created_date__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component_relationship__sys\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20source_component__sys\x20CONTAINS\x20(\x27'+_0x13abfc[_0x58d7bc(0x15c)](_0x58d7bc(0x169))+'\x27)')),_0x3eb362=await veeva_service_1['VeevaService']['executeManyVQL'](_0xe6e177,this[_0x58d7bc(0x16e)]),_0x579727=_0x3eb362[_0x58d7bc(0x146)](_0x2cef96=>new veeva_component_relationship_dto_1[(_0x58d7bc(0x145))](_0x2cef96));if(!_0x579727[_0x58d7bc(0x128)])throw new Error(_0x58d7bc(0x135));return DependencyService[_0x58d7bc(0x12a)](_0x579727);}static['deleteDependencyVeevaComponentDuplicates'](_0x196643){const _0x4b2b49=a256_0x4bbc05,_0x427e6a=_0x196643[_0x4b2b49(0x162)]((_0x4db656,_0x13da31)=>_0x4db656[_0x4b2b49(0x12c)](_0x13da31[_0x4b2b49(0x16f)]+'.'+_0x13da31['targetComponentId'],_0x13da31),new Map());return[..._0x427e6a['values']()];}static[a256_0x4bbc05(0x133)](_0x177941,_0xa48907,_0xe94ede){const _0x3e0104=a256_0x4bbc05,_0xc5b3d2={},_0x1b01f2=_0x177941['reduce']((_0xeaa762,_0x56813f)=>_0xeaa762[_0x3e0104(0x12c)](_0x56813f['id'],_0x56813f),new Map()),_0x106cd8=_0xa48907['reduce']((_0xb86db4,_0x7f0829)=>_0xb86db4[_0x3e0104(0x12c)](_0x7f0829['id'],_0x7f0829),new Map());for(const _0x406b19 of _0xe94ede){const _0x3812a4=_0x1b01f2[_0x3e0104(0x16a)](_0x406b19[_0x3e0104(0x16f)])&&_0x106cd8[_0x3e0104(0x16a)](_0x406b19[_0x3e0104(0x129)]);if(!_0x3812a4)continue;const _0x4b1bd6=_0x1b01f2['get'](_0x406b19['sourceComponentId']),_0x3fab64=_0x106cd8['get'](_0x406b19[_0x3e0104(0x129)]);!_0xc5b3d2[_0x4b1bd6[_0x3e0104(0x15e)]+':'+_0x4b1bd6['type']]&&(_0xc5b3d2[_0x4b1bd6[_0x3e0104(0x15e)]+':'+_0x4b1bd6[_0x3e0104(0x15b)]]={'dependencies':[],'label':_0x4b1bd6[_0x3e0104(0x15e)]+'\x20('+_0x4b1bd6[_0x3e0104(0x15b)]+')','type':_0x4b1bd6[_0x3e0104(0x15b)],'name':_0x4b1bd6[_0x3e0104(0x15e)]}),_0xc5b3d2[_0x4b1bd6[_0x3e0104(0x15e)]+':'+_0x4b1bd6[_0x3e0104(0x15b)]][_0x3e0104(0x14d)][_0x3e0104(0x140)]({'label':_0x3fab64[_0x3e0104(0x15e)]+'\x20('+_0x3fab64[_0x3e0104(0x15b)]+')','name':_0x3fab64[_0x3e0104(0x15e)],'type':_0x3fab64[_0x3e0104(0x15b)],'lastUpdate':_0x3fab64['lastModifiedDate'],'isMissing':!_0x1b01f2[_0x3e0104(0x16a)](_0x406b19[_0x3e0104(0x129)])});}return _0xc5b3d2;}}exports[a256_0x4bbc05(0x14c)]=DependencyService;