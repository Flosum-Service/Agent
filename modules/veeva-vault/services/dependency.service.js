const a310_0x46d86c=a310_0x4984;(function(_0x30195d,_0x32390a){const _0x45cb27=a310_0x4984,_0x2bf4b0=_0x30195d();while(!![]){try{const _0x123da7=parseInt(_0x45cb27(0x217))/0x1*(-parseInt(_0x45cb27(0x204))/0x2)+parseInt(_0x45cb27(0x1e2))/0x3*(parseInt(_0x45cb27(0x1d5))/0x4)+-parseInt(_0x45cb27(0x1f8))/0x5+parseInt(_0x45cb27(0x1d2))/0x6+-parseInt(_0x45cb27(0x218))/0x7*(parseInt(_0x45cb27(0x210))/0x8)+parseInt(_0x45cb27(0x1d8))/0x9+-parseInt(_0x45cb27(0x1d9))/0xa;if(_0x123da7===_0x32390a)break;else _0x2bf4b0['push'](_0x2bf4b0['shift']());}catch(_0x5f5b11){_0x2bf4b0['push'](_0x2bf4b0['shift']());}}}(a310_0x548b,0x4624f));const a310_0x44198d=(function(){let _0x43fc84=!![];return function(_0x39e431,_0x1d2a3c){const _0x30fd34=_0x43fc84?function(){const _0x49723d=a310_0x4984;if(_0x1d2a3c){const _0x35e1a7=_0x1d2a3c[_0x49723d(0x1db)](_0x39e431,arguments);return _0x1d2a3c=null,_0x35e1a7;}}:function(){};return _0x43fc84=![],_0x30fd34;};}()),a310_0x3c8faf=a310_0x44198d(this,function(){const _0x1827cf=a310_0x4984;return a310_0x3c8faf[_0x1827cf(0x201)]()[_0x1827cf(0x1f4)](_0x1827cf(0x1e9))[_0x1827cf(0x201)]()['constructor'](a310_0x3c8faf)[_0x1827cf(0x1f4)](_0x1827cf(0x1e9));});a310_0x3c8faf();function a310_0x548b(){const _0x52cda3=['./veeva.service','1591928zMRXfT','push','DependencyService','VeevaComponentDto','createDataResult','toLowerCase','length','225842MIjMoo','7tOPKyn','inactive__v','Component_Type__c\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20','includes','FLOSUM_NAMESPACE','retrieveComponents','reduce','Veeva_Component__c\x20=\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27','../../shared/utils','2924304YsPPAO','No\x20dependency\x20components\x20found\x20in\x20Veeva','map','4wVuOea','execute','name','3265677lqmSpH','104070mNmvKq','SalesforceService','apply','defineProperty','\x27,\x27','add','status','No\x20relationship\x20found\x20in\x20Veeva','retrieveDependencyVeevaComponents','1436436EmjtEf','values','_connectionSalesforce','Component__c\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20','No\x20components\x20found\x20in\x20Veeva','retrieveRecords','sourceComponentId','(((.+)+)+)+$','dependencies','VeevaComponentRelationshipDto','targetComponentId','branchId','../dtos/veeva-component.dto','\x27\x20AND\x20','../dtos/veeva-component-relationship.dto','BUILD_WHERE_BY_ID_LIMIT','join','set','search','type','componentName','VeevaService','1903280PaBaca','_branchId','lastModifiedDate','VeevaConstants','Branch__c\x20=\x20\x27','ComponentDto','../constants/veeva.constants','get','deleteDependencyVeevaComponentDuplicates','toString','retrieveVeevaComponentsById','retrieveVeevaComponentsByTypeAndName','4uDsIxG','chunkArray','../enums/status.enums','_connectionVeeva','SUCCESS','../dtos/component.dto','Component_Name__c,\x20','executeManyVQL','../../../constants','has','ENDPOINT_VQL'];a310_0x548b=function(){return _0x52cda3;};return a310_0x548b();}function a310_0x4984(_0x160864,_0x90121b){const _0x43f08e=a310_0x548b();return a310_0x4984=function(_0x3c8faf,_0x44198d){_0x3c8faf=_0x3c8faf-0x1d2;let _0x548b30=_0x43f08e[_0x3c8faf];return _0x548b30;},a310_0x4984(_0x160864,_0x90121b);}'use strict';Object[a310_0x46d86c(0x1dc)](exports,'__esModule',{'value':!![]}),exports[a310_0x46d86c(0x212)]=void 0x0;const veeva_constants_1=require(a310_0x46d86c(0x1fe)),veeva_service_1=require(a310_0x46d86c(0x20f)),component_dto_1=require(a310_0x46d86c(0x209)),veeva_component_dto_1=require(a310_0x46d86c(0x1ee)),veeva_component_relationship_dto_1=require(a310_0x46d86c(0x1f0)),utils_1=require(a310_0x46d86c(0x221)),constants_1=require(a310_0x46d86c(0x20c)),status_enums_1=require(a310_0x46d86c(0x206)),salesforce_service_1=require('./salesforce.service');class DependencyService{constructor(_0x307685,_0xdda75c,_0x309b8d){const _0x5e0666=a310_0x46d86c;this[_0x5e0666(0x1e4)]=_0xdda75c,this[_0x5e0666(0x207)]=_0x309b8d,this[_0x5e0666(0x1f9)]=_0x307685[_0x5e0666(0x1ed)];}async[a310_0x46d86c(0x1d6)](){const _0x38db80=a310_0x46d86c,_0x32c357=await this[_0x38db80(0x21d)](),_0x47257e=await this['retrieveVeevaComponentsByTypeAndName'](_0x32c357),_0x1911bb=await this['retrieveDependencyVeevaComponents'](_0x47257e),_0x385d8c=_0x1911bb['map'](_0x259e63=>_0x259e63[_0x38db80(0x1ec)]),_0x37917e=await this['retrieveVeevaComponentsById'](_0x385d8c),_0x131ebc=DependencyService[_0x38db80(0x214)](_0x47257e,_0x37917e,_0x1911bb);return{'responseStatus':status_enums_1['AppResponseStatus'][_0x38db80(0x208)],'data':_0x131ebc};}async[a310_0x46d86c(0x21d)](){const _0x1f2e22=a310_0x46d86c,_0x56f79e='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20'+constants_1[_0x1f2e22(0x21c)]+_0x1f2e22(0x20a)+constants_1['FLOSUM_NAMESPACE']+_0x1f2e22(0x21a)+constants_1[_0x1f2e22(0x21c)]+_0x1f2e22(0x1e5)+constants_1[_0x1f2e22(0x21c)]+_0x1f2e22(0x1fc)+this[_0x1f2e22(0x1f9)]+_0x1f2e22(0x1ef)+constants_1[_0x1f2e22(0x21c)]+_0x1f2e22(0x21f),_0x4375df=await salesforce_service_1[_0x1f2e22(0x1da)][_0x1f2e22(0x1e7)](this[_0x1f2e22(0x1e4)],_0x56f79e);if(!_0x4375df[_0x1f2e22(0x216)])throw new Error('No\x20veeva\x20components\x20found\x20in\x20branch');return _0x4375df[_0x1f2e22(0x1d4)](_0x101124=>new component_dto_1[(_0x1f2e22(0x1fd))](_0x101124));}async[a310_0x46d86c(0x203)](_0x2aa0c1){const _0x4f5e83=a310_0x46d86c,_0x485c15=_0x2aa0c1[_0x4f5e83(0x21e)]((_0x50d201,_0x2c07fb)=>_0x50d201[_0x4f5e83(0x1de)]((_0x2c07fb['componentType']+'.'+_0x2c07fb[_0x4f5e83(0x1f6)])[_0x4f5e83(0x215)]()),new Set()),_0xa258b3=_0x2aa0c1[_0x4f5e83(0x1d4)](_0x20c8ad=>_0x20c8ad[_0x4f5e83(0x1f6)]),_0x50d4cd=(0x0,utils_1[_0x4f5e83(0x205)])(_0xa258b3,veeva_constants_1[_0x4f5e83(0x1fb)]['BUILD_WHERE_BY_NAME_LIMIT']),_0x889302=_0x50d4cd[_0x4f5e83(0x1d4)](_0x16f11b=>veeva_constants_1['VeevaConstants'][_0x4f5e83(0x20e)]+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_name__v\x20CONTAINS\x20(\x27'+_0x16f11b[_0x4f5e83(0x1f2)](_0x4f5e83(0x1dd))+'\x27)')),_0x508aeb=await veeva_service_1['VeevaService'][_0x4f5e83(0x20b)](_0x889302,this[_0x4f5e83(0x207)]),_0x3f4de6=_0x508aeb[_0x4f5e83(0x1d4)](_0x4349f8=>new veeva_component_dto_1[(_0x4f5e83(0x213))](_0x4349f8))['filter'](_0x67dee8=>_0x485c15[_0x4f5e83(0x20d)]((_0x67dee8[_0x4f5e83(0x1f5)]+'.'+_0x67dee8['name'])[_0x4f5e83(0x215)]()));if(!_0x3f4de6['length'])throw new Error(_0x4f5e83(0x1e6));return _0x3f4de6;}async[a310_0x46d86c(0x202)](_0x3797e0){const _0x3efee7=a310_0x46d86c,_0x598c70=(0x0,utils_1['chunkArray'])(_0x3797e0,veeva_constants_1['VeevaConstants'][_0x3efee7(0x1f1)]),_0x992de=_0x598c70[_0x3efee7(0x1d4)](_0xbd1233=>veeva_constants_1[_0x3efee7(0x1fb)][_0x3efee7(0x20e)]+(_0x3efee7(0x220)+_0xbd1233[_0x3efee7(0x1f2)](_0x3efee7(0x1dd))+'\x27)')),_0x229ed4=await veeva_service_1[_0x3efee7(0x1f7)][_0x3efee7(0x20b)](_0x992de,this[_0x3efee7(0x207)]),_0x4c4541=_0x229ed4['map'](_0x440c42=>new veeva_component_dto_1['VeevaComponentDto'](_0x440c42))['filter'](_0x180a55=>!_0x180a55[_0x3efee7(0x1df)][_0x3efee7(0x21b)](_0x3efee7(0x219)));if(!_0x4c4541[_0x3efee7(0x216)])throw new Error(_0x3efee7(0x1d3));return _0x4c4541;}async[a310_0x46d86c(0x1e1)](_0xaad81c){const _0x555954=a310_0x46d86c,_0x15f8f4=_0xaad81c[_0x555954(0x1d4)](_0x55d81d=>_0x55d81d['id']),_0x28cd66=(0x0,utils_1[_0x555954(0x205)])(_0x15f8f4,veeva_constants_1['VeevaConstants'][_0x555954(0x1f1)]),_0x4347b4=_0x28cd66[_0x555954(0x1d4)](_0x4ea94c=>veeva_constants_1[_0x555954(0x1fb)][_0x555954(0x20e)]+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20source_component__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20target_component__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20target_component_name__sys,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20created_date__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component_relationship__sys\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20source_component__sys\x20CONTAINS\x20(\x27'+_0x4ea94c['join']('\x27,\x27')+'\x27)')),_0x2341ca=await veeva_service_1['VeevaService'][_0x555954(0x20b)](_0x4347b4,this['_connectionVeeva']),_0x4d2681=_0x2341ca[_0x555954(0x1d4)](_0x3b74ae=>new veeva_component_relationship_dto_1[(_0x555954(0x1eb))](_0x3b74ae));if(!_0x4d2681[_0x555954(0x216)])throw new Error(_0x555954(0x1e0));return DependencyService[_0x555954(0x200)](_0x4d2681);}static[a310_0x46d86c(0x200)](_0x5167a2){const _0x52a120=a310_0x46d86c,_0x5495dc=_0x5167a2[_0x52a120(0x21e)]((_0xa65225,_0x714ada)=>_0xa65225[_0x52a120(0x1f3)](_0x714ada[_0x52a120(0x1e8)]+'.'+_0x714ada[_0x52a120(0x1ec)],_0x714ada),new Map());return[..._0x5495dc[_0x52a120(0x1e3)]()];}static[a310_0x46d86c(0x214)](_0x58a69c,_0x49a012,_0x30e1d3){const _0x35f3eb=a310_0x46d86c,_0x7d5a9d={},_0x4a796a=_0x58a69c[_0x35f3eb(0x21e)]((_0x5e9770,_0x324019)=>_0x5e9770[_0x35f3eb(0x1f3)](_0x324019['id'],_0x324019),new Map()),_0x29cacd=_0x49a012[_0x35f3eb(0x21e)]((_0x3e5592,_0xd1f032)=>_0x3e5592[_0x35f3eb(0x1f3)](_0xd1f032['id'],_0xd1f032),new Map());for(const _0x1f2dd3 of _0x30e1d3){const _0x249fe0=_0x4a796a[_0x35f3eb(0x20d)](_0x1f2dd3['sourceComponentId'])&&_0x29cacd[_0x35f3eb(0x20d)](_0x1f2dd3[_0x35f3eb(0x1ec)]);if(!_0x249fe0)continue;const _0xc11b10=_0x4a796a[_0x35f3eb(0x1ff)](_0x1f2dd3[_0x35f3eb(0x1e8)]),_0x4aee7a=_0x29cacd[_0x35f3eb(0x1ff)](_0x1f2dd3['targetComponentId']);!_0x7d5a9d[_0xc11b10[_0x35f3eb(0x1d7)]+':'+_0xc11b10['type']]&&(_0x7d5a9d[_0xc11b10[_0x35f3eb(0x1d7)]+':'+_0xc11b10[_0x35f3eb(0x1f5)]]={'dependencies':[],'label':_0xc11b10['name']+'\x20('+_0xc11b10[_0x35f3eb(0x1f5)]+')','type':_0xc11b10['type'],'name':_0xc11b10['name']}),_0x7d5a9d[_0xc11b10[_0x35f3eb(0x1d7)]+':'+_0xc11b10['type']][_0x35f3eb(0x1ea)][_0x35f3eb(0x211)]({'label':_0x4aee7a[_0x35f3eb(0x1d7)]+'\x20('+_0x4aee7a[_0x35f3eb(0x1f5)]+')','name':_0x4aee7a[_0x35f3eb(0x1d7)],'type':_0x4aee7a[_0x35f3eb(0x1f5)],'lastUpdate':_0x4aee7a[_0x35f3eb(0x1fa)],'isMissing':!_0x4a796a[_0x35f3eb(0x20d)](_0x1f2dd3['targetComponentId'])});}return _0x7d5a9d;}}exports[a310_0x46d86c(0x212)]=DependencyService;