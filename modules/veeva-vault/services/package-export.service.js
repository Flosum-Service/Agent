function a375_0x3e72(_0x3c85ee,_0x459106){const _0x3846ca=a375_0x1a2c();return a375_0x3e72=function(_0xd30494,_0x1ddc26){_0xd30494=_0xd30494-0x1ec;let _0x1a2c49=_0x3846ca[_0xd30494];return _0x1a2c49;},a375_0x3e72(_0x3c85ee,_0x459106);}const a375_0x56579b=a375_0x3e72;(function(_0x1c173c,_0x4a6cd9){const _0x3816f1=a375_0x3e72,_0xa86c1a=_0x1c173c();while(!![]){try{const _0x2b61c3=parseInt(_0x3816f1(0x209))/0x1*(-parseInt(_0x3816f1(0x20b))/0x2)+-parseInt(_0x3816f1(0x1fe))/0x3*(-parseInt(_0x3816f1(0x22c))/0x4)+-parseInt(_0x3816f1(0x1ee))/0x5+parseInt(_0x3816f1(0x232))/0x6+parseInt(_0x3816f1(0x1ff))/0x7*(parseInt(_0x3816f1(0x216))/0x8)+parseInt(_0x3816f1(0x226))/0x9*(parseInt(_0x3816f1(0x233))/0xa)+-parseInt(_0x3816f1(0x22e))/0xb;if(_0x2b61c3===_0x4a6cd9)break;else _0xa86c1a['push'](_0xa86c1a['shift']());}catch(_0x46ca23){_0xa86c1a['push'](_0xa86c1a['shift']());}}}(a375_0x1a2c,0xd84dd));const a375_0x1ddc26=(function(){let _0x40aa49=!![];return function(_0x7c1a29,_0x7d77f1){const _0x89bf00=_0x40aa49?function(){const _0x1dec8a=a375_0x3e72;if(_0x7d77f1){const _0x557348=_0x7d77f1[_0x1dec8a(0x236)](_0x7c1a29,arguments);return _0x7d77f1=null,_0x557348;}}:function(){};return _0x40aa49=![],_0x89bf00;};}()),a375_0xd30494=a375_0x1ddc26(this,function(){const _0x3847af=a375_0x3e72;return a375_0xd30494[_0x3847af(0x1f1)]()[_0x3847af(0x1f2)](_0x3847af(0x1f9))[_0x3847af(0x1f1)]()[_0x3847af(0x215)](a375_0xd30494)['search']('(((.+)+)+)+$');});a375_0xd30494();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x43dc77){const _0x596d1d=a375_0x3e72;return _0x43dc77&&_0x43dc77[_0x596d1d(0x224)]?_0x43dc77:{'default':_0x43dc77};};Object[a375_0x56579b(0x201)](exports,'__esModule',{'value':!![]}),exports['PackageExportService']=void 0x0;function a375_0x1a2c(){const _0x46bde2=['links','VeevaResponseStatus','migration__sys','reduce','ENDPOINT_EXPORT_IMPORT_PACKAGE','values','parse','Adding\x20components\x20to\x20outbound\x20package','constructor','8BjnyaK','Creating\x20outbound\x20packages','length','_logger','from','artifacts','log','MAXIMUM_SIZE_OF_PACKAGE','package_component__v','createExportOutboundPackages','SUCCESS','../classes/errors/veeva-error','fill','retrieveVPKList','__esModule','getJobResult','783ThwWqL','includes','push','packageName','join','getPackageNames','312412LQMpMk','name__v','18365908KCnDbL','deleteOutboundPackages','ceil','_connection','2154042INcisx','140010lCQSJQ','Retrieve\x20Outbound\x20Package\x20zip\x20list','outbound_package__v','apply','../constants/veeva.constants','../enums/status.enums','Deleting\x20outbound\x20packages.','3390160lTsvrq','deletePackageComponents','VeevaError','toString','search','getEndpointArtifactList','createOutboundPackages','_veevaService','createVeevaObjectRecords','export','arraybuffer','(((.+)+)+)+$','application/json','set','errors','Create\x20Export\x20outbound\x20packages.','12nWGpEO','12075301oWYnYd','VeevaConstants','defineProperty','jszip','PackageExportService','deleteVeevaObjectRecords','all','ENDPOINT_CREATE_RECORDS','createPackageComponents','map','1PKDdso','loadAsync','761816yBLoyc','responseStatus'];a375_0x1a2c=function(){return _0x46bde2;};return a375_0x1a2c();}const veeva_constants_1=require(a375_0x56579b(0x237)),jszip_1=__importDefault(require(a375_0x56579b(0x202))),status_enums_1=require(a375_0x56579b(0x1ec)),veeva_error_1=require(a375_0x56579b(0x221));class PackageExportService{constructor({veevaService:_0x387d77,connection:_0x2bbe98,logger:_0x574294}){const _0x58ca33=a375_0x56579b;this[_0x58ca33(0x1f5)]=_0x387d77,this[_0x58ca33(0x231)]=_0x2bbe98,this[_0x58ca33(0x219)]=_0x574294;}async[a375_0x56579b(0x1f4)](_0x253e1b,_0x3a5428){const _0x445f45=a375_0x56579b;this[_0x445f45(0x219)][_0x445f45(0x21c)](_0x445f45(0x217));const _0x539227=veeva_constants_1[_0x445f45(0x200)][_0x445f45(0x206)]+_0x445f45(0x235),_0x10db70=new Array(_0x253e1b)[_0x445f45(0x222)]({'summary__v':_0x3a5428,'object_type__v.api__name__v':_0x445f45(0x20f)});return await this['_veevaService'][_0x445f45(0x1f6)](_0x539227,_0x10db70);}async[a375_0x56579b(0x207)](_0x3e8c10,_0x30b4c1){const _0x1a3353=a375_0x56579b;this[_0x1a3353(0x219)]['log'](_0x1a3353(0x214));const _0x4c0168=veeva_constants_1[_0x1a3353(0x200)][_0x1a3353(0x206)]+_0x1a3353(0x21e),_0xa31442=_0x3e8c10[_0x1a3353(0x208)]((_0x3877f2,_0x4c4af5)=>({'vault_component__v':_0x3877f2['id'],'outbound_package__v':_0x30b4c1[Math[_0x1a3353(0x230)]((_0x4c4af5+0x1)/veeva_constants_1['VeevaConstants'][_0x1a3353(0x21d)])-0x1]}));return await this[_0x1a3353(0x1f5)][_0x1a3353(0x1f6)](_0x4c0168,_0xa31442);}async['getPackageNames'](_0x4e976c){const _0x3eea2a=a375_0x56579b;this[_0x3eea2a(0x219)][_0x3eea2a(0x21c)]('Getting\x20names\x20of\x20outbound\x20packages');const _0x4d4232='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27'+_0x4e976c[_0x3eea2a(0x22a)]('\x27,\x27')+'\x27)',_0x8628ff=await this[_0x3eea2a(0x1f5)]['executeVQL'](_0x4d4232);return _0x8628ff[_0x3eea2a(0x210)]((_0x349b80,_0x29271a)=>_0x349b80[_0x3eea2a(0x1fb)](_0x29271a['id'],_0x29271a[_0x3eea2a(0x22d)]),new Map());}async[a375_0x56579b(0x21f)](_0x1a8074){const _0x1c64a5=a375_0x56579b;this[_0x1c64a5(0x219)][_0x1c64a5(0x21c)](_0x1c64a5(0x1fd));const _0x48ede6=[],_0x445e6c=_0x1a8074[_0x1c64a5(0x208)](_0x1bf3fe=>{const _0x3e510f=_0x1c64a5;return this[_0x3e510f(0x231)]['post'](veeva_constants_1[_0x3e510f(0x200)][_0x3e510f(0x211)],encodeURI(_0x3e510f(0x229))+'='+encodeURI(_0x1bf3fe),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}});}),_0x54df36=await Promise[_0x1c64a5(0x205)](_0x445e6c);for(const {data:_0x81c244}of _0x54df36){if(_0x81c244[_0x1c64a5(0x20c)]===status_enums_1[_0x1c64a5(0x20e)][_0x1c64a5(0x220)]){const {url:_0x360a4d}=_0x81c244;_0x48ede6['push'](_0x360a4d);}else throw new veeva_error_1[(_0x1c64a5(0x1f0))](_0x81c244[_0x1c64a5(0x1fc)]);}return _0x48ede6;}async['getEndpointArtifactList'](_0x354957){const _0x36af16=a375_0x56579b;this[_0x36af16(0x219)][_0x36af16(0x21c)]('Retrieve\x20Jobs\x20Status');const _0x5c33c2=[],_0x28e49f=await this['_veevaService'][_0x36af16(0x225)](_0x354957);for(const _0x4abbd7 of _0x28e49f){const _0x3db924=_0x4abbd7[_0x36af16(0x20d)]['filter'](_0x3dff00=>_0x3dff00['rel']===_0x36af16(0x21b))[_0x36af16(0x208)](_0xcb422d=>_0xcb422d['href']);_0x5c33c2[_0x36af16(0x228)](..._0x3db924);}return _0x5c33c2;}async[a375_0x56579b(0x223)](_0x19bc8c){const _0x42d19a=a375_0x56579b;var _0x5ce9da;const _0x14acec=[];this[_0x42d19a(0x219)][_0x42d19a(0x21c)](_0x42d19a(0x234));for(const _0x581d75 of _0x19bc8c){const {data:_0x2b370b,headers:_0x4524c8}=await this['_connection']['get'](_0x581d75,{'responseType':_0x42d19a(0x1f8)}),_0x2d2c4b=(_0x5ce9da=_0x4524c8['content-type'])===null||_0x5ce9da===void 0x0?void 0x0:_0x5ce9da[_0x42d19a(0x227)](_0x42d19a(0x1fa));if(!_0x2d2c4b){const _0x3b9bc1=_0x2b370b,_0x141cf7=new jszip_1['default']();await _0x141cf7[_0x42d19a(0x20a)](_0x3b9bc1),_0x14acec[_0x42d19a(0x228)](_0x141cf7);}else{const _0x2f35b7=JSON[_0x42d19a(0x213)](_0x2b370b);throw new veeva_error_1['VeevaError'](_0x2f35b7[_0x42d19a(0x1fc)]);}}return _0x14acec;}async['deletePackageComponents'](_0x42d93d){const _0x17c90e=a375_0x56579b;this['_logger']['log']('Removing\x20components\x20from\x20outbound\x20packages.');const _0x11d1ec=veeva_constants_1[_0x17c90e(0x200)][_0x17c90e(0x206)]+_0x17c90e(0x21e);await this[_0x17c90e(0x1f5)][_0x17c90e(0x204)](_0x11d1ec,_0x42d93d);}async['deleteOutboundPackages'](_0x29cb5d){const _0x4ade2d=a375_0x56579b;this[_0x4ade2d(0x219)]['log'](_0x4ade2d(0x1ed));const _0x2f6070=veeva_constants_1['VeevaConstants'][_0x4ade2d(0x206)]+_0x4ade2d(0x235);await this[_0x4ade2d(0x1f5)][_0x4ade2d(0x204)](_0x2f6070,_0x29cb5d);}async[a375_0x56579b(0x1f7)](_0x5b4d2d,_0x2bed58){const _0x4edcb8=a375_0x56579b,_0x4df813=await this[_0x4edcb8(0x1f4)](Math[_0x4edcb8(0x230)](_0x5b4d2d[_0x4edcb8(0x218)]/veeva_constants_1['VeevaConstants']['MAXIMUM_SIZE_OF_PACKAGE']),_0x2bed58),_0x221bfd=await this[_0x4edcb8(0x207)](_0x5b4d2d,_0x4df813),_0x5c95c3=await this[_0x4edcb8(0x22b)](_0x4df813),_0x587cfc=await this[_0x4edcb8(0x21f)](Array[_0x4edcb8(0x21a)](_0x5c95c3[_0x4edcb8(0x212)]())),_0x26cd3f=await this[_0x4edcb8(0x1f3)](_0x587cfc),_0x5a4c9f=await this[_0x4edcb8(0x223)](_0x26cd3f);return await this[_0x4edcb8(0x1ef)](_0x221bfd),await this[_0x4edcb8(0x22f)](_0x4df813),_0x5a4c9f;}}exports[a375_0x56579b(0x203)]=PackageExportService;