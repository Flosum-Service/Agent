const a403_0xaa54ff=a403_0x3e3d;(function(_0x61e6ca,_0x2bae8c){const _0x5222ba=a403_0x3e3d,_0x2e7c90=_0x61e6ca();while(!![]){try{const _0xc3f97e=-parseInt(_0x5222ba(0xb1))/0x1*(parseInt(_0x5222ba(0xf1))/0x2)+parseInt(_0x5222ba(0xd0))/0x3+parseInt(_0x5222ba(0xde))/0x4*(-parseInt(_0x5222ba(0xb2))/0x5)+-parseInt(_0x5222ba(0xf9))/0x6*(-parseInt(_0x5222ba(0xcf))/0x7)+-parseInt(_0x5222ba(0xef))/0x8*(-parseInt(_0x5222ba(0xc1))/0x9)+-parseInt(_0x5222ba(0xae))/0xa*(-parseInt(_0x5222ba(0xf0))/0xb)+-parseInt(_0x5222ba(0xf5))/0xc;if(_0xc3f97e===_0x2bae8c)break;else _0x2e7c90['push'](_0x2e7c90['shift']());}catch(_0xdc7514){_0x2e7c90['push'](_0x2e7c90['shift']());}}}(a403_0x1da7,0x21393));function a403_0x1da7(){const _0x501216=['715437EdUMSb','fill','Deleting\x20outbound\x20packages.','export','SUCCESS','_veevaService','_logger','toString','Removing\x20components\x20from\x20outbound\x20packages.','includes','deleteOutboundPackages','artifacts','ENDPOINT_CREATE_RECORDS','__esModule','63oSaWrM','359721shjoTq','getJobResult','application/x-www-form-urlencoded','VeevaConstants','name__v','log','errors','map','arraybuffer','responseStatus','push','all','post','executeVQL','20yMSUNK','packageName','PackageExportService','content-type','filter','rel','\x27,\x27','apply','_connection','VeevaResponseStatus','createPackageComponents','href','get','parse','Retrieve\x20Jobs\x20Status','ENDPOINT_EXPORT_IMPORT_PACKAGE','set','8AAYYLh','109769mdOCCl','7414ZNsPxL','createVeevaObjectRecords','VeevaError','Creating\x20outbound\x20packages','2296128ZHSWxF','deleteVeevaObjectRecords','migration__sys','search','179034CoiZAr','ceil','../enums/status.enums','getPackageNames','outbound_package__v','from','120LdINGD','MAXIMUM_SIZE_OF_PACKAGE','createOutboundPackages','61jNhvcA','34145MHdfNI','length','createExportOutboundPackages','Adding\x20components\x20to\x20outbound\x20package','links','retrieveVPKList','Create\x20Export\x20outbound\x20packages.','Retrieve\x20Outbound\x20Package\x20zip\x20list','Getting\x20names\x20of\x20outbound\x20packages','default','deletePackageComponents','values','getEndpointArtifactList','__importDefault','(((.+)+)+)+$'];a403_0x1da7=function(){return _0x501216;};return a403_0x1da7();}const a403_0x4fd622=(function(){let _0x30f3f7=!![];return function(_0x41cc78,_0x52f705){const _0xa81a84=_0x30f3f7?function(){const _0x4bc102=a403_0x3e3d;if(_0x52f705){const _0x128997=_0x52f705[_0x4bc102(0xe5)](_0x41cc78,arguments);return _0x52f705=null,_0x128997;}}:function(){};return _0x30f3f7=![],_0xa81a84;};}()),a403_0x2748f5=a403_0x4fd622(this,function(){const _0x15d487=a403_0x3e3d;return a403_0x2748f5[_0x15d487(0xc8)]()[_0x15d487(0xf8)](_0x15d487(0xc0))[_0x15d487(0xc8)]()['constructor'](a403_0x2748f5)['search'](_0x15d487(0xc0));});a403_0x2748f5();'use strict';var __importDefault=this&&this[a403_0xaa54ff(0xbf)]||function(_0x4d90dc){return _0x4d90dc&&_0x4d90dc['__esModule']?_0x4d90dc:{'default':_0x4d90dc};};function a403_0x3e3d(_0x1f5b2b,_0x2231fc){const _0x59ee17=a403_0x1da7();return a403_0x3e3d=function(_0x2748f5,_0x4fd622){_0x2748f5=_0x2748f5-0xae;let _0x1da73e=_0x59ee17[_0x2748f5];return _0x1da73e;},a403_0x3e3d(_0x1f5b2b,_0x2231fc);}Object['defineProperty'](exports,a403_0xaa54ff(0xce),{'value':!![]}),exports[a403_0xaa54ff(0xe0)]=void 0x0;const veeva_constants_1=require('../constants/veeva.constants'),jszip_1=__importDefault(require('jszip')),status_enums_1=require(a403_0xaa54ff(0xfb)),veeva_error_1=require('../classes/errors/veeva-error');class PackageExportService{constructor({veevaService:_0x5e99f9,connection:_0x22386e,logger:_0xd0fe86}){const _0xbafe56=a403_0xaa54ff;this[_0xbafe56(0xc6)]=_0x5e99f9,this[_0xbafe56(0xe6)]=_0x22386e,this['_logger']=_0xd0fe86;}async[a403_0xaa54ff(0xb0)](_0x506e84,_0x824200){const _0x6b54d7=a403_0xaa54ff;this[_0x6b54d7(0xc7)][_0x6b54d7(0xd5)](_0x6b54d7(0xf4));const _0x2753d7=veeva_constants_1[_0x6b54d7(0xd3)][_0x6b54d7(0xcd)]+_0x6b54d7(0xfd),_0x31e09b=new Array(_0x506e84)[_0x6b54d7(0xc2)]({'summary__v':_0x824200,'object_type__v.api__name__v':_0x6b54d7(0xf7)});return await this['_veevaService'][_0x6b54d7(0xf2)](_0x2753d7,_0x31e09b);}async[a403_0xaa54ff(0xe8)](_0x59af54,_0x4fc82e){const _0x7329c=a403_0xaa54ff;this[_0x7329c(0xc7)][_0x7329c(0xd5)](_0x7329c(0xb5));const _0x19b8aa=veeva_constants_1[_0x7329c(0xd3)][_0x7329c(0xcd)]+'package_component__v',_0x664444=_0x59af54['map']((_0x5c91d6,_0x3885cd)=>({'vault_component__v':_0x5c91d6['id'],'outbound_package__v':_0x4fc82e[Math[_0x7329c(0xfa)]((_0x3885cd+0x1)/veeva_constants_1[_0x7329c(0xd3)][_0x7329c(0xaf)])-0x1]}));return await this['_veevaService'][_0x7329c(0xf2)](_0x19b8aa,_0x664444);}async[a403_0xaa54ff(0xfc)](_0x56d134){const _0x1363ce=a403_0xaa54ff;this[_0x1363ce(0xc7)][_0x1363ce(0xd5)](_0x1363ce(0xba));const _0x314dab='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27'+_0x56d134['join'](_0x1363ce(0xe4))+'\x27)',_0x49b530=await this['_veevaService'][_0x1363ce(0xdd)](_0x314dab);return _0x49b530['reduce']((_0x2bede7,_0x8fc56f)=>_0x2bede7[_0x1363ce(0xee)](_0x8fc56f['id'],_0x8fc56f[_0x1363ce(0xd4)]),new Map());}async[a403_0xaa54ff(0xb4)](_0x133852){const _0x109c80=a403_0xaa54ff;this['_logger'][_0x109c80(0xd5)](_0x109c80(0xb8));const _0x23cb2e=[],_0x43cf15=_0x133852['map'](_0x296fd3=>{const _0x50e399=_0x109c80;return this[_0x50e399(0xe6)][_0x50e399(0xdc)](veeva_constants_1['VeevaConstants'][_0x50e399(0xed)],encodeURI(_0x50e399(0xdf))+'='+encodeURI(_0x296fd3),{'headers':{'Content-Type':_0x50e399(0xd2)}});}),_0x2b527c=await Promise[_0x109c80(0xdb)](_0x43cf15);for(const {data:_0x2f1485}of _0x2b527c){if(_0x2f1485[_0x109c80(0xd9)]===status_enums_1[_0x109c80(0xe7)][_0x109c80(0xc5)]){const {url:_0x246f54}=_0x2f1485;_0x23cb2e[_0x109c80(0xda)](_0x246f54);}else throw new veeva_error_1[(_0x109c80(0xf3))](_0x2f1485[_0x109c80(0xd6)]);}return _0x23cb2e;}async[a403_0xaa54ff(0xbe)](_0x23d933){const _0x5f82d7=a403_0xaa54ff;this['_logger'][_0x5f82d7(0xd5)](_0x5f82d7(0xec));const _0x35d3f9=[],_0x9a2a3=await this['_veevaService'][_0x5f82d7(0xd1)](_0x23d933);for(const _0x32a6fd of _0x9a2a3){const _0x5dfea0=_0x32a6fd[_0x5f82d7(0xb6)][_0x5f82d7(0xe2)](_0x533576=>_0x533576[_0x5f82d7(0xe3)]===_0x5f82d7(0xcc))[_0x5f82d7(0xd7)](_0x349d81=>_0x349d81[_0x5f82d7(0xe9)]);_0x35d3f9[_0x5f82d7(0xda)](..._0x5dfea0);}return _0x35d3f9;}async[a403_0xaa54ff(0xb7)](_0x14060f){const _0x1e2911=a403_0xaa54ff;var _0x39b7f8;const _0x594c06=[];this[_0x1e2911(0xc7)][_0x1e2911(0xd5)](_0x1e2911(0xb9));for(const _0x5c6ea3 of _0x14060f){const {data:_0x29d20a,headers:_0x1a4108}=await this[_0x1e2911(0xe6)][_0x1e2911(0xea)](_0x5c6ea3,{'responseType':_0x1e2911(0xd8)}),_0x56312b=(_0x39b7f8=_0x1a4108[_0x1e2911(0xe1)])===null||_0x39b7f8===void 0x0?void 0x0:_0x39b7f8[_0x1e2911(0xca)]('application/json');if(!_0x56312b){const _0x11e022=_0x29d20a,_0x36cb5f=new jszip_1[(_0x1e2911(0xbb))]();await _0x36cb5f['loadAsync'](_0x11e022),_0x594c06[_0x1e2911(0xda)](_0x36cb5f);}else{const _0x382de8=JSON[_0x1e2911(0xeb)](_0x29d20a);throw new veeva_error_1['VeevaError'](_0x382de8[_0x1e2911(0xd6)]);}}return _0x594c06;}async[a403_0xaa54ff(0xbc)](_0x32fa27){const _0x467660=a403_0xaa54ff;this[_0x467660(0xc7)][_0x467660(0xd5)](_0x467660(0xc9));const _0x475454=veeva_constants_1[_0x467660(0xd3)][_0x467660(0xcd)]+'package_component__v';await this[_0x467660(0xc6)][_0x467660(0xf6)](_0x475454,_0x32fa27);}async[a403_0xaa54ff(0xcb)](_0xac17f0){const _0x140c2a=a403_0xaa54ff;this[_0x140c2a(0xc7)][_0x140c2a(0xd5)](_0x140c2a(0xc3));const _0x4486f9=veeva_constants_1[_0x140c2a(0xd3)][_0x140c2a(0xcd)]+'outbound_package__v';await this[_0x140c2a(0xc6)][_0x140c2a(0xf6)](_0x4486f9,_0xac17f0);}async[a403_0xaa54ff(0xc4)](_0x506e44,_0x5d29e1){const _0x5b7eae=a403_0xaa54ff,_0x58cf97=await this[_0x5b7eae(0xb0)](Math[_0x5b7eae(0xfa)](_0x506e44[_0x5b7eae(0xb3)]/veeva_constants_1[_0x5b7eae(0xd3)][_0x5b7eae(0xaf)]),_0x5d29e1),_0x5f50b7=await this[_0x5b7eae(0xe8)](_0x506e44,_0x58cf97),_0x553c72=await this[_0x5b7eae(0xfc)](_0x58cf97),_0x8fdb4=await this[_0x5b7eae(0xb4)](Array[_0x5b7eae(0xfe)](_0x553c72[_0x5b7eae(0xbd)]())),_0x3b202b=await this[_0x5b7eae(0xbe)](_0x8fdb4),_0x4b0320=await this[_0x5b7eae(0xb7)](_0x3b202b);return await this[_0x5b7eae(0xbc)](_0x5f50b7),await this[_0x5b7eae(0xcb)](_0x58cf97),_0x4b0320;}}exports[a403_0xaa54ff(0xe0)]=PackageExportService;