const a313_0x4eef4a=a313_0x34ed;(function(_0x471902,_0x19cfaf){const _0x520862=a313_0x34ed,_0xf959b9=_0x471902();while(!![]){try{const _0xe367e=-parseInt(_0x520862(0x21a))/0x1*(-parseInt(_0x520862(0x1cc))/0x2)+-parseInt(_0x520862(0x1dc))/0x3*(parseInt(_0x520862(0x23c))/0x4)+parseInt(_0x520862(0x1a9))/0x5+parseInt(_0x520862(0x1c2))/0x6+parseInt(_0x520862(0x1b1))/0x7+-parseInt(_0x520862(0x20a))/0x8*(-parseInt(_0x520862(0x204))/0x9)+-parseInt(_0x520862(0x209))/0xa;if(_0xe367e===_0x19cfaf)break;else _0xf959b9['push'](_0xf959b9['shift']());}catch(_0x567328){_0xf959b9['push'](_0xf959b9['shift']());}}}(a313_0x53ed,0x4a183));const a313_0x3cba81=(function(){let _0x4dc390=!![];return function(_0x46bf50,_0x47f914){const _0x417370=_0x4dc390?function(){const _0x39691e=a313_0x34ed;if(_0x47f914){const _0xd13b5d=_0x47f914[_0x39691e(0x1d8)](_0x46bf50,arguments);return _0x47f914=null,_0xd13b5d;}}:function(){};return _0x4dc390=![],_0x417370;};}()),a313_0x461a65=a313_0x3cba81(this,function(){const _0x3e36b1=a313_0x34ed;return a313_0x461a65[_0x3e36b1(0x1af)]()[_0x3e36b1(0x1e8)](_0x3e36b1(0x1ae))['toString']()[_0x3e36b1(0x199)](a313_0x461a65)[_0x3e36b1(0x1e8)](_0x3e36b1(0x1ae));});a313_0x461a65();'use strict';var __importDefault=this&&this[a313_0x4eef4a(0x228)]||function(_0x56f03a){const _0x2031ff=a313_0x4eef4a;return _0x56f03a&&_0x56f03a[_0x2031ff(0x1fa)]?_0x56f03a:{'default':_0x56f03a};};Object[a313_0x4eef4a(0x22f)](exports,a313_0x4eef4a(0x1fa),{'value':!![]}),exports[a313_0x4eef4a(0x1d7)]=void 0x0;function a313_0x53ed(){const _0x321e61=['1686zoHNZy','../constants/veeva.constants','saveAttachments','outbound_package__v','packageName','jszip','ATTACMENT','arraybuffer','Snapshot\x20started.','Snapshot__c','catch','SnapshotService','apply','MAXIMUM_SIZE_OF_PACKAGE','chunkArray','Cannot\x20retrieve\x20','17601whRznG','ENDPOINT_VQL','application/x-www-form-urlencoded','COMPLETED','push','file','default','Deleting\x20outbound\x20packages.','map','finishSnapshot','selectedMetaTypes','loadAsync','search','createVeevaObjectRecords','.mdl','logError','post','API_Name__c','\x20Metadata\x20Items','getEndpointArtifactList','Attachment_ID__c','selectedComponentMap','ENDPOINT_EXPORT_IMPORT_PACKAGE','Removing\x20components\x20from\x20outbound\x20packages.','migration__sys','\x20from\x20outbound\x20package','formAttachments','Succeed__c','BUILD_WHERE_BY_NAME_LIMIT','_connectionVeeva','__esModule','Retrieve\x20Outbound\x20Package\x20zip\x20list','log','filter','_systemLogger','_timeZone','_connectionSalesforce','ceil','Name__c','VeevaComponentDto','162ZeMMey','success','Metadata_Log__c/','deletePackageComponents','_selectedMetaTypes','11116270xiWpfp','240864AwgTDt','Metadata_Item__c','getComponentsMetadataByTypeAndName','executeManyVQL','Attachment','./veeva.service','\x27,\x27','apiName','Cannot\x20Save\x20Metadata\x20Items','Retrieve\x20collection\x20metadata\x20of\x20components','rel','Adding\x20components\x20to\x20outbound\x20package','Retrieve\x20collection\x20metadata\x20of\x20components\x20by\x20type\x20and\x20names','deleteOutboundPackages','get','body','187NRufSU','base64','responseStatus','createPackageComponents','successfully','from','VeevaError','OUTBOUND_PACKAGE_NAME','../dtos/metadata-item.dto','exportOutboundPackage','Snapshot','with\x20error','links','ENDPOINT_CREATE_RECORDS','__importDefault','includes','FlosumConstants','MetadataLogStatus','type','../../shared/utils','Retrieve\x20Jobs\x20Status','defineProperty','files','getJobResult','Is_Retrieved__c','Snapshot\x20completed\x20','Is_Completed__c','forEach','Saving\x20','getComponentsMetadataByTypes','VeevaService','content-type','Is_Error__c','fill','332FKArus','inactive__v','_selectedComponentMap','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20CONTAINS\x20(\x27','../dtos/veeva-component.dto','VeevaResponseStatus','name','Creating\x20outbound\x20packages','join','errors','set','\x27\x20AND\x20component_name__v\x20CONTAINS\x20(\x27','Status__c','Label__c','error','timeZone','attachmentId','../classes/errors/veeva-error','constructor','generateAsync','SalesforceDmlError','FLOSUM_NAMESPACE','createMetadataItemListWithBody','Create\x20Export\x20outbound\x20packages.','createExportOutboundPackages','retrieveVPKList','updateLog','createOutboundPackages','name__v','parse','SUCCESS','EXCEPTION','artifacts','saveComponentsInSalesforce','785335UFxAtk','application/zip','SalesforceService','split','_logger','(((.+)+)+)+$','toString','VeevaConstants','4071627nvHtwv','metadataLogId','../constants/flosum.constants','veevaComponentType','href','values','Unpack\x20zip\x20and\x20create\x20metadata\x20items.','_metadataLogId','Saving\x20Attachments.','_attachmentLogId','ENDPOINT_UPSERT_RECORD','getPackageNames','Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20','length','lastModifiedDate','deleteVeevaObjectRecords','isRetrieved','2782596OdZVtW','package_component__v','insertMultipleRecords','snapshotId','attachmentLogId','label','patch','_snapshotId','Last_Modified_Date__c','string'];a313_0x53ed=function(){return _0x321e61;};return a313_0x53ed();}const jszip_1=__importDefault(require(a313_0x4eef4a(0x1d1))),flosum_constants_1=require(a313_0x4eef4a(0x1b3)),veeva_constants_1=require(a313_0x4eef4a(0x1cd)),veeva_service_1=require(a313_0x4eef4a(0x20f)),veeva_component_dto_1=require(a313_0x4eef4a(0x240)),metadata_item_dto_1=require(a313_0x4eef4a(0x222)),utils_1=require(a313_0x4eef4a(0x22d)),constants_1=require('../../../constants'),salesforce_service_1=require('./salesforce.service'),status_enums_1=require('../enums/status.enums'),salesforce_dml_error_1=require('../classes/errors/salesforce-dml-error'),veeva_error_1=require(a313_0x4eef4a(0x198));class SnapshotService{constructor(_0x50ce76,_0x38866b,_0x77652d,_0x559d6f){const _0x1c2327=a313_0x4eef4a;this[_0x1c2327(0x200)]=_0x38866b,this[_0x1c2327(0x1f9)]=_0x77652d,this[_0x1c2327(0x1ad)]=_0x559d6f,this[_0x1c2327(0x1c9)]=_0x50ce76[_0x1c2327(0x1c5)],this[_0x1c2327(0x1b8)]=_0x50ce76[_0x1c2327(0x1b2)],this[_0x1c2327(0x1ba)]=_0x50ce76[_0x1c2327(0x1c6)],this[_0x1c2327(0x1ff)]=_0x50ce76[_0x1c2327(0x196)],this[_0x1c2327(0x208)]=_0x50ce76[_0x1c2327(0x1e6)],this['_selectedComponentMap']=_0x50ce76[_0x1c2327(0x1f1)];}async['execute'](){const _0xf6b4b6=a313_0x4eef4a;try{this[_0xf6b4b6(0x1ad)][_0xf6b4b6(0x1fc)](_0xf6b4b6(0x1d4));const _0xeb35a2=Array[_0xf6b4b6(0x21f)](Object[_0xf6b4b6(0x1b6)](this[_0xf6b4b6(0x23e)]))[_0xf6b4b6(0x1be)]?await this[_0xf6b4b6(0x20c)]():await this[_0xf6b4b6(0x237)]();await this['_logger'][_0xf6b4b6(0x1a1)]();const _0x445c95=await this[_0xf6b4b6(0x1a2)](Math[_0xf6b4b6(0x201)](_0xeb35a2[_0xf6b4b6(0x1be)]/veeva_constants_1[_0xf6b4b6(0x1b0)][_0xf6b4b6(0x1d9)])),_0x174cfd=await this[_0xf6b4b6(0x21d)](_0xeb35a2,_0x445c95);await this[_0xf6b4b6(0x1ad)][_0xf6b4b6(0x1a1)]();const _0x4a3159=await this[_0xf6b4b6(0x223)](_0x445c95),_0x5d541f=await this[_0xf6b4b6(0x19d)](_0xeb35a2,_0x4a3159);await this[_0xf6b4b6(0x1a8)](_0x5d541f),await this[_0xf6b4b6(0x1ad)][_0xf6b4b6(0x1a1)](),await this[_0xf6b4b6(0x207)](_0x174cfd),await this[_0xf6b4b6(0x217)](_0x445c95),await this[_0xf6b4b6(0x1e5)](!![]);}catch(_0x55f88f){this['_logger'][_0xf6b4b6(0x1eb)](_0x55f88f),await this[_0xf6b4b6(0x1e5)](![])[_0xf6b4b6(0x1d6)](_0x2b6547=>this[_0xf6b4b6(0x1fe)][_0xf6b4b6(0x195)](_0x2b6547));}}async[a313_0x4eef4a(0x237)](){const _0x24a887=a313_0x4eef4a;this[_0x24a887(0x1ad)][_0x24a887(0x1fc)](_0x24a887(0x213));const _0x4999c1=[],_0x46de76=_0x24a887(0x23f)+this[_0x24a887(0x208)][_0x24a887(0x244)](_0x24a887(0x210))+'\x27)',_0xd62691=veeva_constants_1[_0x24a887(0x1b0)][_0x24a887(0x1dd)]+_0x46de76,_0x1af8a9=await veeva_service_1[_0x24a887(0x238)]['executeVQL'](_0xd62691,this[_0x24a887(0x1f9)]);for(const _0x1e6ff4 of _0x1af8a9){const _0x1548cb=new veeva_component_dto_1[(_0x24a887(0x203))](_0x1e6ff4),{name:_0x1736a6,type:_0x4ff5d3,status:_0x592a58}=_0x1548cb;_0x592a58[_0x24a887(0x229)](_0x24a887(0x23d))?this[_0x24a887(0x1ad)][_0x24a887(0x1fc)]('Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20'+_0x4ff5d3+'.'+_0x1736a6):_0x4999c1['push'](_0x1548cb);}return _0x4999c1;}async[a313_0x4eef4a(0x20c)](){const _0x1079fb=a313_0x4eef4a;this[_0x1079fb(0x1ad)][_0x1079fb(0x1fc)](_0x1079fb(0x216));const _0x1f9c29=[];for(const _0x281315 in this[_0x1079fb(0x23e)]){const _0x6954a5=(0x0,utils_1[_0x1079fb(0x1da)])(this['_selectedComponentMap'][_0x281315],veeva_constants_1['VeevaConstants'][_0x1079fb(0x1f8)]),_0x11e9d2=_0x6954a5[_0x1079fb(0x1e4)](_0x21a277=>veeva_constants_1[_0x1079fb(0x1b0)]['ENDPOINT_VQL']+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20=\x27'+_0x281315+_0x1079fb(0x247)+_0x21a277[_0x1079fb(0x244)]('\x27,\x27')+'\x27)'));_0x1f9c29['push'](..._0x11e9d2);}const _0x16acfc=[],_0x1f424f=await veeva_service_1['VeevaService'][_0x1079fb(0x20d)](_0x1f9c29,this[_0x1079fb(0x1f9)]);for(const _0x580f91 of _0x1f424f){const _0x3af534=new veeva_component_dto_1['VeevaComponentDto'](_0x580f91),{name:_0x515ef5,type:_0x5da3b2,status:_0x527551}=_0x3af534,_0x5186be=_0x527551[_0x1079fb(0x229)](_0x1079fb(0x23d));_0x5186be?this[_0x1079fb(0x1ad)]['log'](_0x1079fb(0x1bd)+_0x5da3b2+'.'+_0x515ef5):_0x16acfc['push'](_0x3af534);}return _0x16acfc;}async[a313_0x4eef4a(0x1a2)](_0x5a4260){const _0x34130f=a313_0x4eef4a;this[_0x34130f(0x1ad)][_0x34130f(0x1fc)](_0x34130f(0x243));const _0x48cbf4=veeva_constants_1[_0x34130f(0x1b0)][_0x34130f(0x227)]+_0x34130f(0x1cf),_0xcc93ef=new Array(_0x5a4260)[_0x34130f(0x23b)]({'summary__v':SnapshotService[_0x34130f(0x221)],'object_type__v.api__name__v':_0x34130f(0x1f4)});return await veeva_service_1[_0x34130f(0x238)][_0x34130f(0x1e9)](_0x48cbf4,this[_0x34130f(0x1f9)],_0xcc93ef,this[_0x34130f(0x1ad)]);}async['createPackageComponents'](_0x2d04d2,_0x426809){const _0x4e6764=a313_0x4eef4a;this[_0x4e6764(0x1ad)]['log'](_0x4e6764(0x215));const _0x548b39=veeva_constants_1[_0x4e6764(0x1b0)][_0x4e6764(0x227)]+_0x4e6764(0x1c3),_0x132c70=_0x2d04d2[_0x4e6764(0x1e4)]((_0x5a2525,_0x2a4e5a)=>({'vault_component__v':_0x5a2525['id'],'outbound_package__v':_0x426809[Math[_0x4e6764(0x201)]((_0x2a4e5a+0x1)/veeva_constants_1['VeevaConstants'][_0x4e6764(0x1d9)])-0x1]}));return await veeva_service_1[_0x4e6764(0x238)][_0x4e6764(0x1e9)](_0x548b39,this[_0x4e6764(0x1f9)],_0x132c70,this[_0x4e6764(0x1ad)]);}async[a313_0x4eef4a(0x223)](_0x43f9ee){const _0x5d2cf7=a313_0x4eef4a,_0x4c01a1=await this[_0x5d2cf7(0x1bc)](_0x43f9ee),_0xa20541=await this[_0x5d2cf7(0x19f)](Array[_0x5d2cf7(0x21f)](_0x4c01a1[_0x5d2cf7(0x1b6)]())),_0x306e8a=await this[_0x5d2cf7(0x1ef)](_0xa20541);return await this[_0x5d2cf7(0x1a0)](_0x306e8a);}async['getPackageNames'](_0x4cb1eb){const _0xf4662a=a313_0x4eef4a;this[_0xf4662a(0x1ad)][_0xf4662a(0x1fc)]('Getting\x20names\x20of\x20outbound\x20packages');const _0x499133='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27'+_0x4cb1eb[_0xf4662a(0x244)]('\x27,\x27')+'\x27)',_0x5a466e=veeva_constants_1['VeevaConstants']['ENDPOINT_VQL']+_0x499133,_0x275b93=await veeva_service_1[_0xf4662a(0x238)]['executeVQL'](_0x5a466e,this[_0xf4662a(0x1f9)]);return _0x275b93['reduce']((_0x416b3c,_0x240979)=>_0x416b3c[_0xf4662a(0x246)](_0x240979['id'],_0x240979[_0xf4662a(0x1a3)]),new Map());}async[a313_0x4eef4a(0x19f)](_0x22dbdb){const _0x4cb93d=a313_0x4eef4a;this[_0x4cb93d(0x1ad)]['log'](_0x4cb93d(0x19e));const _0x319583=[],_0x45f616=_0x22dbdb[_0x4cb93d(0x1e4)](_0x4c5f39=>{const _0x2b8ae8=_0x4cb93d;return this[_0x2b8ae8(0x1f9)][_0x2b8ae8(0x1ec)](veeva_constants_1[_0x2b8ae8(0x1b0)][_0x2b8ae8(0x1f2)],encodeURI(_0x2b8ae8(0x1d0))+'='+encodeURI(_0x4c5f39),{'headers':{'Content-Type':_0x2b8ae8(0x1de)}});}),_0x8b4301=await Promise['all'](_0x45f616);for(const {data:_0x234540}of _0x8b4301){if(_0x234540[_0x4cb93d(0x21c)]===status_enums_1[_0x4cb93d(0x241)][_0x4cb93d(0x1a5)]){const {url:_0x45a50a}=_0x234540;_0x319583[_0x4cb93d(0x1e0)](_0x45a50a);}else throw new veeva_error_1[(_0x4cb93d(0x220))](_0x234540[_0x4cb93d(0x245)]);}return _0x319583;}async['getEndpointArtifactList'](_0x28eb16){const _0x483178=a313_0x4eef4a;this[_0x483178(0x1ad)][_0x483178(0x1fc)](_0x483178(0x22e));const _0x3257ca=[],_0x3eff0a=await veeva_service_1['VeevaService'][_0x483178(0x231)](_0x28eb16,this['_connectionVeeva'],this[_0x483178(0x1ad)]);for(const _0x5e2958 of _0x3eff0a){const _0x4f2a94=_0x5e2958[_0x483178(0x226)][_0x483178(0x1fd)](_0x4231f8=>_0x4231f8[_0x483178(0x214)]===_0x483178(0x1a7))[_0x483178(0x1e4)](_0x5346db=>_0x5346db[_0x483178(0x1b5)]);_0x3257ca[_0x483178(0x1e0)](..._0x4f2a94);}return _0x3257ca;}async['retrieveVPKList'](_0x5c761d){const _0xb8dd05=a313_0x4eef4a;var _0x19b8a9;const _0x3c0da9=[];this[_0xb8dd05(0x1ad)][_0xb8dd05(0x1fc)](_0xb8dd05(0x1fb));for(const _0x1483f7 of _0x5c761d){const {data:_0x20b4e6,headers:_0x15d226}=await this[_0xb8dd05(0x1f9)][_0xb8dd05(0x218)](_0x1483f7,{'responseType':_0xb8dd05(0x1d3)}),_0x5ba7ce=(_0x19b8a9=_0x15d226[_0xb8dd05(0x239)])===null||_0x19b8a9===void 0x0?void 0x0:_0x19b8a9[_0xb8dd05(0x229)]('application/json');if(!_0x5ba7ce){const _0x5be36c=_0x20b4e6,_0x3b56cc=new jszip_1[(_0xb8dd05(0x1e2))]();await _0x3b56cc[_0xb8dd05(0x1e7)](_0x5be36c),_0x3c0da9['push'](_0x3b56cc);}else{const _0x524c9a=JSON[_0xb8dd05(0x1a4)](_0x20b4e6);throw new veeva_error_1[(_0xb8dd05(0x220))](_0x524c9a[_0xb8dd05(0x245)]);}}return _0x3c0da9;}async[a313_0x4eef4a(0x19d)](_0x35e592,_0xddf5f9){const _0x1ae544=a313_0x4eef4a;var _0x5838de;this['_logger'][_0x1ae544(0x1fc)](_0x1ae544(0x1b7));const _0x4ce0ce=this['formMetadataItemDtoList'](_0x35e592),_0x4271a3=_0x4ce0ce['reduce']((_0x66be6c,_0x4333a3)=>_0x66be6c[_0x1ae544(0x246)](_0x4333a3[_0x1ae544(0x1c7)],_0x4333a3),new Map());for(const _0x56093d of _0xddf5f9){for(const _0xde6c62 in _0x56093d[_0x1ae544(0x230)]){const _0x31c07f=_0xde6c62[_0x1ae544(0x1ac)]('/')['at'](-0x1);if(_0x4271a3['has'](_0x31c07f)){const _0x48dc01=await((_0x5838de=_0x56093d[_0x1ae544(0x1e1)](_0xde6c62))===null||_0x5838de===void 0x0?void 0x0:_0x5838de['async'](_0x1ae544(0x1cb)));if(_0x48dc01){const _0x3609e9=new jszip_1[(_0x1ae544(0x1e2))]();_0x3609e9[_0x1ae544(0x1e1)](_0x31c07f,_0x48dc01),_0x4271a3[_0x1ae544(0x218)](_0x31c07f)['body']=await _0x3609e9[_0x1ae544(0x19a)]({'type':_0x1ae544(0x21b)});}}}}return _0x4ce0ce[_0x1ae544(0x1fd)](_0x53a963=>!_0x53a963[_0x1ae544(0x219)])['forEach'](_0x414075=>{const _0xe50064=_0x1ae544;this[_0xe50064(0x1ad)][_0xe50064(0x1fc)](_0xe50064(0x1db)+_0x414075['veevaComponentType']+'.'+_0x414075[_0xe50064(0x242)]+_0xe50064(0x1f5));}),_0x4ce0ce[_0x1ae544(0x1fd)](_0x3190b9=>_0x3190b9[_0x1ae544(0x219)]);}['formMetadataItemDtoList'](_0x351083){const _0x7afd95=a313_0x4eef4a;return _0x351083[_0x7afd95(0x1e4)](_0x2a9fb4=>{const _0xe7c5fe=_0x7afd95,_0x1fac90=new metadata_item_dto_1['MetadataItemDto']();return _0x1fac90[_0xe7c5fe(0x242)]=_0x2a9fb4[_0xe7c5fe(0x242)],_0x1fac90['apiName']=_0x2a9fb4['name'],_0x1fac90[_0xe7c5fe(0x1c5)]=this['_snapshotId'],_0x1fac90[_0xe7c5fe(0x1c7)]=_0x2a9fb4['type']+'.'+_0x2a9fb4[_0xe7c5fe(0x242)]+_0xe7c5fe(0x1ea),_0x1fac90[_0xe7c5fe(0x1b4)]=_0x2a9fb4[_0xe7c5fe(0x22c)],_0x1fac90['lastModifiedDate']=_0x2a9fb4[_0xe7c5fe(0x1bf)],_0x1fac90[_0xe7c5fe(0x1c1)]=![],_0x1fac90;});}async[a313_0x4eef4a(0x207)](_0x6e8949){const _0x4586a4=a313_0x4eef4a;this[_0x4586a4(0x1ad)][_0x4586a4(0x1fc)](_0x4586a4(0x1f3));const _0x45b4ef=veeva_constants_1[_0x4586a4(0x1b0)][_0x4586a4(0x227)]+_0x4586a4(0x1c3);await veeva_service_1['VeevaService'][_0x4586a4(0x1c0)](_0x45b4ef,this['_connectionVeeva'],_0x6e8949,this['_logger']);}async[a313_0x4eef4a(0x217)](_0x4561b2){const _0x34b652=a313_0x4eef4a;this['_logger'][_0x34b652(0x1fc)](_0x34b652(0x1e3));const _0x3d6e70=veeva_constants_1[_0x34b652(0x1b0)][_0x34b652(0x227)]+'outbound_package__v';await veeva_service_1[_0x34b652(0x238)][_0x34b652(0x1c0)](_0x3d6e70,this['_connectionVeeva'],_0x4561b2,this[_0x34b652(0x1ad)]);}async[a313_0x4eef4a(0x1a8)](_0x50e304){const _0x5f2f8e=a313_0x4eef4a;this[_0x5f2f8e(0x1ad)][_0x5f2f8e(0x1fc)](_0x5f2f8e(0x1b9)),await this[_0x5f2f8e(0x1ce)](_0x50e304),this['_logger']['log'](_0x5f2f8e(0x236)+_0x50e304[_0x5f2f8e(0x1be)]+_0x5f2f8e(0x1ee));const _0x3a4a9a=_0x50e304[_0x5f2f8e(0x1e4)](_0x27719d=>{const _0x4381cc=_0x5f2f8e;return{[constants_1[_0x4381cc(0x19c)]+_0x4381cc(0x202)]:_0x27719d[_0x4381cc(0x242)],[constants_1[_0x4381cc(0x19c)]+_0x4381cc(0x1ed)]:_0x27719d[_0x4381cc(0x211)],[constants_1['FLOSUM_NAMESPACE']+_0x4381cc(0x1d5)]:_0x27719d[_0x4381cc(0x1c5)],[constants_1[_0x4381cc(0x19c)]+_0x4381cc(0x249)]:_0x27719d[_0x4381cc(0x1c7)],[constants_1[_0x4381cc(0x19c)]+_0x4381cc(0x232)]:_0x27719d[_0x4381cc(0x1c1)],[constants_1[_0x4381cc(0x19c)]+'Veeva_Component_Type__c']:_0x27719d[_0x4381cc(0x1b4)],[constants_1[_0x4381cc(0x19c)]+_0x4381cc(0x1f0)]:_0x27719d[_0x4381cc(0x197)],[constants_1[_0x4381cc(0x19c)]+_0x4381cc(0x1ca)]:_0x27719d['lastModifiedDate']};}),_0x3672ed=await salesforce_service_1[_0x5f2f8e(0x1ab)][_0x5f2f8e(0x1c4)](this[_0x5f2f8e(0x200)],constants_1[_0x5f2f8e(0x19c)]+_0x5f2f8e(0x20b),_0x3a4a9a);let _0x232cc6=!![];_0x3672ed[_0x5f2f8e(0x235)]((_0x3bd151,_0xb7a999)=>{const _0x2e87db=_0x5f2f8e;this[_0x2e87db(0x1ad)][_0x2e87db(0x1fc)]('Saving\x20'+_0x50e304[_0xb7a999][_0x2e87db(0x1b4)]+'.'+_0x50e304[_0xb7a999][_0x2e87db(0x242)]);if(!_0x3bd151[_0x2e87db(0x205)]){_0x232cc6=![];const _0x1fa2f5=new salesforce_dml_error_1[(_0x2e87db(0x19b))](_0x3bd151[_0x2e87db(0x245)]);this[_0x2e87db(0x1ad)][_0x2e87db(0x1eb)](_0x1fa2f5);}});if(!_0x232cc6)throw new Error(_0x5f2f8e(0x212));}async[a313_0x4eef4a(0x1ce)](_0x53d2aa){const _0x160406=a313_0x4eef4a,_0x518146=this['formAttachments'](_0x53d2aa),_0xb45e7e=await salesforce_service_1[_0x160406(0x1ab)][_0x160406(0x1c4)](this[_0x160406(0x200)],SnapshotService[_0x160406(0x1d2)],_0x518146),_0x37de5b=[];_0xb45e7e['forEach']((_0x144430,_0x1bafab)=>{const _0x422999=_0x160406;_0x144430[_0x422999(0x205)]?(_0x53d2aa[_0x1bafab][_0x422999(0x197)]=_0x144430['id'],_0x53d2aa[_0x1bafab][_0x422999(0x1c1)]=!![]):_0x37de5b[_0x422999(0x1e0)](..._0x144430['errors']);});if(_0x37de5b[_0x160406(0x1be)])throw new salesforce_dml_error_1[(_0x160406(0x19b))](_0x37de5b);}[a313_0x4eef4a(0x1f6)](_0x2b6904){const _0x57113e=a313_0x4eef4a;return _0x2b6904[_0x57113e(0x1e4)](_0x460a9b=>({'ParentId':this[_0x57113e(0x1c9)],'Name':_0x460a9b[_0x57113e(0x1b4)],'ContentType':_0x57113e(0x1aa),'Body':_0x460a9b['body'],'Description':_0x460a9b[_0x57113e(0x1b4)]}));}async[a313_0x4eef4a(0x1e5)](_0x5024c0){const _0xddc0cd=a313_0x4eef4a,_0x555734={[constants_1[_0xddc0cd(0x19c)]+_0xddc0cd(0x234)]:!![],[constants_1[_0xddc0cd(0x19c)]+_0xddc0cd(0x23a)]:!_0x5024c0},_0x397047={[constants_1[_0xddc0cd(0x19c)]+'Is_Error__c']:!_0x5024c0,[constants_1[_0xddc0cd(0x19c)]+_0xddc0cd(0x1f7)]:_0x5024c0,[constants_1['FLOSUM_NAMESPACE']+_0xddc0cd(0x248)]:_0x5024c0?status_enums_1[_0xddc0cd(0x22b)][_0xddc0cd(0x1df)]:status_enums_1[_0xddc0cd(0x22b)][_0xddc0cd(0x1a6)],[constants_1[_0xddc0cd(0x19c)]+'Job_Completed__c']:!![]};await this['_connectionSalesforce']['patch'](flosum_constants_1['FlosumConstants']['ENDPOINT_UPSERT_RECORD']+'/'+constants_1['FLOSUM_NAMESPACE']+'Snapshot__c/'+this[_0xddc0cd(0x1c9)],_0x555734),await this[_0xddc0cd(0x200)][_0xddc0cd(0x1c8)](flosum_constants_1[_0xddc0cd(0x22a)][_0xddc0cd(0x1bb)]+'/'+constants_1[_0xddc0cd(0x19c)]+_0xddc0cd(0x206)+this['_metadataLogId'],_0x397047),this['_logger'][_0xddc0cd(0x1fc)](_0xddc0cd(0x233)+(_0x5024c0?_0xddc0cd(0x21e):_0xddc0cd(0x225))+'.'),await this[_0xddc0cd(0x1ad)][_0xddc0cd(0x1a1)]();}}function a313_0x34ed(_0x25d7a0,_0x159712){const _0x1ff77e=a313_0x53ed();return a313_0x34ed=function(_0x461a65,_0x3cba81){_0x461a65=_0x461a65-0x195;let _0x53ed58=_0x1ff77e[_0x461a65];return _0x53ed58;},a313_0x34ed(_0x25d7a0,_0x159712);}exports[a313_0x4eef4a(0x1d7)]=SnapshotService,SnapshotService[a313_0x4eef4a(0x221)]=a313_0x4eef4a(0x224),SnapshotService['ATTACMENT']=a313_0x4eef4a(0x20e);