const a312_0xc44e74=a312_0x2447;(function(_0x1535f1,_0x1f8891){const _0x5a81f7=a312_0x2447,_0x6902ac=_0x1535f1();while(!![]){try{const _0x14f9bb=parseInt(_0x5a81f7(0x120))/0x1*(parseInt(_0x5a81f7(0x111))/0x2)+parseInt(_0x5a81f7(0xb1))/0x3+-parseInt(_0x5a81f7(0x12e))/0x4+-parseInt(_0x5a81f7(0x9a))/0x5*(-parseInt(_0x5a81f7(0xe3))/0x6)+parseInt(_0x5a81f7(0x10d))/0x7+parseInt(_0x5a81f7(0x132))/0x8+-parseInt(_0x5a81f7(0xc9))/0x9*(parseInt(_0x5a81f7(0xd6))/0xa);if(_0x14f9bb===_0x1f8891)break;else _0x6902ac['push'](_0x6902ac['shift']());}catch(_0x39077a){_0x6902ac['push'](_0x6902ac['shift']());}}}(a312_0x44d7,0xe1341));const a312_0x474bd5=(function(){let _0x536397=!![];return function(_0x33de0d,_0x117ff9){const _0x3c240d=_0x536397?function(){if(_0x117ff9){const _0x53b9e1=_0x117ff9['apply'](_0x33de0d,arguments);return _0x117ff9=null,_0x53b9e1;}}:function(){};return _0x536397=![],_0x3c240d;};}()),a312_0x2befc7=a312_0x474bd5(this,function(){const _0x177c82=a312_0x2447;return a312_0x2befc7[_0x177c82(0xfa)]()['search'](_0x177c82(0x119))['toString']()[_0x177c82(0xf2)](a312_0x2befc7)[_0x177c82(0xb9)](_0x177c82(0x119));});a312_0x2befc7();'use strict';var __importDefault=this&&this[a312_0xc44e74(0x115)]||function(_0x3924cf){const _0x327122=a312_0xc44e74;return _0x3924cf&&_0x3924cf[_0x327122(0xca)]?_0x3924cf:{'default':_0x3924cf};};function a312_0x2447(_0x4c87c7,_0x4517f0){const _0x4ff2b3=a312_0x44d7();return a312_0x2447=function(_0x2befc7,_0x474bd5){_0x2befc7=_0x2befc7-0x8a;let _0x44d77e=_0x4ff2b3[_0x2befc7];return _0x44d77e;},a312_0x2447(_0x4c87c7,_0x4517f0);}Object[a312_0xc44e74(0xe9)](exports,a312_0xc44e74(0xca),{'value':!![]}),exports[a312_0xc44e74(0xd5)]=void 0x0;const jszip_1=__importDefault(require(a312_0xc44e74(0x131))),flosum_constants_1=require(a312_0xc44e74(0xb5)),veeva_constants_1=require('../constants/veeva.constants'),veeva_service_1=require(a312_0xc44e74(0x97)),veeva_component_dto_1=require('../dtos/veeva-component.dto'),metadata_item_dto_1=require(a312_0xc44e74(0x11b)),utils_1=require('../../shared/utils'),constants_1=require(a312_0xc44e74(0xb6)),salesforce_service_1=require('./salesforce.service'),status_enums_1=require(a312_0xc44e74(0xa6)),salesforce_dml_error_1=require(a312_0xc44e74(0xa7)),veeva_error_1=require('../classes/errors/veeva-error');class SnapshotService{constructor(_0x526226,_0x259f81,_0x181200,_0x9ddfb1){const _0x2cc4cb=a312_0xc44e74;this[_0x2cc4cb(0xfd)]=_0x259f81,this[_0x2cc4cb(0xa0)]=_0x181200,this['_logger']=_0x9ddfb1,this[_0x2cc4cb(0x99)]=_0x526226[_0x2cc4cb(0x109)],this['_metadataLogId']=_0x526226[_0x2cc4cb(0xaa)],this['_attachmentLogId']=_0x526226[_0x2cc4cb(0x100)],this['_timeZone']=_0x526226[_0x2cc4cb(0x105)],this[_0x2cc4cb(0xed)]=_0x526226[_0x2cc4cb(0xd1)],this[_0x2cc4cb(0xc0)]=_0x526226[_0x2cc4cb(0xf8)];}async['execute'](){const _0x31c646=a312_0xc44e74;try{this[_0x31c646(0x10f)][_0x31c646(0x8f)](_0x31c646(0x117));const _0x5c945c=Array[_0x31c646(0x10c)](Object[_0x31c646(0xe7)](this[_0x31c646(0xc0)]))[_0x31c646(0xe1)]?await this['getComponentsMetadataByTypeAndName']():await this[_0x31c646(0xdc)]();await this[_0x31c646(0x10f)][_0x31c646(0xd2)]();const _0x40e9d7=await this[_0x31c646(0xc7)](Math[_0x31c646(0xef)](_0x5c945c[_0x31c646(0xe1)]/veeva_constants_1['VeevaConstants']['MAXIMUM_SIZE_OF_PACKAGE'])),_0x666e80=await this['createPackageComponents'](_0x5c945c,_0x40e9d7);await this[_0x31c646(0x10f)][_0x31c646(0xd2)]();const _0x54a098=await this[_0x31c646(0xa8)](_0x40e9d7),_0x214c81=await this[_0x31c646(0xf5)](_0x5c945c,_0x54a098);await this[_0x31c646(0x12f)](_0x214c81),await this[_0x31c646(0x10f)]['updateLog'](),await this[_0x31c646(0x121)](_0x666e80),await this[_0x31c646(0x103)](_0x40e9d7),await this['finishSnapshot'](!![]);}catch(_0xb01b7c){this['_logger'][_0x31c646(0x92)](_0xb01b7c),await this['finishSnapshot'](![])['catch'](_0x48abc4=>this[_0x31c646(0xff)][_0x31c646(0xdb)](_0x48abc4));}}async['getComponentsMetadataByTypes'](){const _0x2627ef=a312_0xc44e74;this[_0x2627ef(0x10f)][_0x2627ef(0x8f)](_0x2627ef(0xfc));const _0x4bbe6a=[],_0x2e7c7d=_0x2627ef(0xd4)+this[_0x2627ef(0xed)]['join'](_0x2627ef(0xb0))+'\x27)',_0x20d4d8=veeva_constants_1['VeevaConstants'][_0x2627ef(0x127)]+_0x2e7c7d,_0x503f5d=await veeva_service_1['VeevaService'][_0x2627ef(0xf4)](_0x20d4d8,this[_0x2627ef(0xa0)]);for(const _0x53e5c2 of _0x503f5d){const _0x2846be=new veeva_component_dto_1['VeevaComponentDto'](_0x53e5c2),{name:_0x58b5ba,type:_0x3cbaa0,status:_0x8ed68b}=_0x2846be;_0x8ed68b[_0x2627ef(0x114)](_0x2627ef(0x8d))?this[_0x2627ef(0x10f)][_0x2627ef(0x8f)](_0x2627ef(0xe6)+_0x3cbaa0+'.'+_0x58b5ba):_0x4bbe6a[_0x2627ef(0x126)](_0x2846be);}return _0x4bbe6a;}async['getComponentsMetadataByTypeAndName'](){const _0x40ba8b=a312_0xc44e74;this[_0x40ba8b(0x10f)][_0x40ba8b(0x8f)](_0x40ba8b(0x10a));const _0x1a05f2=[];for(const _0x435378 in this['_selectedComponentMap']){const _0x1d4c0d=(0x0,utils_1[_0x40ba8b(0x8b)])(this[_0x40ba8b(0xc0)][_0x435378],veeva_constants_1[_0x40ba8b(0xa2)][_0x40ba8b(0xc8)]),_0x5cac55=_0x1d4c0d[_0x40ba8b(0xf6)](_0x4cf225=>veeva_constants_1[_0x40ba8b(0xa2)][_0x40ba8b(0x127)]+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20=\x27'+_0x435378+_0x40ba8b(0xae)+_0x4cf225[_0x40ba8b(0xe2)](_0x40ba8b(0xb0))+'\x27)'));_0x1a05f2['push'](..._0x5cac55);}const _0x5187cc=[],_0x241bdf=await veeva_service_1[_0x40ba8b(0xc2)][_0x40ba8b(0xde)](_0x1a05f2,this[_0x40ba8b(0xa0)]);for(const _0x349f11 of _0x241bdf){const _0x3c365a=new veeva_component_dto_1[(_0x40ba8b(0x108))](_0x349f11),{name:_0x150000,type:_0x178d72,status:_0x16fec6}=_0x3c365a,_0x1e4c01=_0x16fec6['includes'](_0x40ba8b(0x8d));_0x1e4c01?this[_0x40ba8b(0x10f)][_0x40ba8b(0x8f)]('Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20'+_0x178d72+'.'+_0x150000):_0x5187cc['push'](_0x3c365a);}return _0x5187cc;}async[a312_0xc44e74(0xc7)](_0x215ca0){const _0x2c02bf=a312_0xc44e74;this[_0x2c02bf(0x10f)][_0x2c02bf(0x8f)](_0x2c02bf(0xa5));const _0x1e8b47=veeva_constants_1[_0x2c02bf(0xa2)][_0x2c02bf(0x8a)]+_0x2c02bf(0xbb),_0x302954=new Array(_0x215ca0)[_0x2c02bf(0xfb)]({'summary__v':SnapshotService[_0x2c02bf(0xbf)],'object_type__v.api__name__v':_0x2c02bf(0x104)});return await veeva_service_1[_0x2c02bf(0xc2)][_0x2c02bf(0x90)](_0x1e8b47,this[_0x2c02bf(0xa0)],_0x302954,this[_0x2c02bf(0x10f)]);}async[a312_0xc44e74(0x8c)](_0x1a2ce3,_0xf36ba8){const _0x41bf84=a312_0xc44e74;this[_0x41bf84(0x10f)][_0x41bf84(0x8f)](_0x41bf84(0xbd));const _0x4700d7=veeva_constants_1['VeevaConstants']['ENDPOINT_CREATE_RECORDS']+_0x41bf84(0x122),_0x3f1b83=_0x1a2ce3['map']((_0x58ae49,_0x455fc9)=>({'vault_component__v':_0x58ae49['id'],'outbound_package__v':_0xf36ba8[Math[_0x41bf84(0xef)]((_0x455fc9+0x1)/veeva_constants_1[_0x41bf84(0xa2)][_0x41bf84(0xc5)])-0x1]}));return await veeva_service_1['VeevaService'][_0x41bf84(0x90)](_0x4700d7,this['_connectionVeeva'],_0x3f1b83,this[_0x41bf84(0x10f)]);}async[a312_0xc44e74(0xa8)](_0x3644be){const _0x39d619=a312_0xc44e74,_0x58b7f3=await this['getPackageNames'](_0x3644be),_0x3df8de=await this['createExportOutboundPackages'](Array[_0x39d619(0x10c)](_0x58b7f3[_0x39d619(0xe7)]())),_0x2c445c=await this['getEndpointArtifactList'](_0x3df8de);return await this[_0x39d619(0xfe)](_0x2c445c);}async[a312_0xc44e74(0x11c)](_0x27e8ec){const _0x5527e4=a312_0xc44e74;this[_0x5527e4(0x10f)][_0x5527e4(0x8f)]('Getting\x20names\x20of\x20outbound\x20packages');const _0x4be2b4=_0x5527e4(0x12a)+_0x27e8ec[_0x5527e4(0xe2)]('\x27,\x27')+'\x27)',_0x5e2dbd=veeva_constants_1[_0x5527e4(0xa2)]['ENDPOINT_VQL']+_0x4be2b4,_0x440f3e=await veeva_service_1[_0x5527e4(0xc2)]['executeVQL'](_0x5e2dbd,this[_0x5527e4(0xa0)]);return _0x440f3e[_0x5527e4(0xf9)]((_0x2e3a6a,_0x1a3b71)=>_0x2e3a6a[_0x5527e4(0x91)](_0x1a3b71['id'],_0x1a3b71[_0x5527e4(0xcb)]),new Map());}async[a312_0xc44e74(0xba)](_0x20766d){const _0x175a6b=a312_0xc44e74;this['_logger'][_0x175a6b(0x8f)](_0x175a6b(0xad));const _0x49ed0f=[],_0x1d3ff2=_0x20766d['map'](_0x11e3bc=>{const _0x1f370f=_0x175a6b;return this[_0x1f370f(0xa0)][_0x1f370f(0xa4)](veeva_constants_1[_0x1f370f(0xa2)][_0x1f370f(0xf3)],encodeURI(_0x1f370f(0xeb))+'='+encodeURI(_0x11e3bc),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}});}),_0x69ba7b=await Promise[_0x175a6b(0x130)](_0x1d3ff2);for(const {data:_0x52be7f}of _0x69ba7b){if(_0x52be7f[_0x175a6b(0x9e)]===status_enums_1[_0x175a6b(0x107)][_0x175a6b(0xdd)]){const {url:_0x3477bf}=_0x52be7f;_0x49ed0f[_0x175a6b(0x126)](_0x3477bf);}else throw new veeva_error_1[(_0x175a6b(0xbc))](_0x52be7f[_0x175a6b(0xf7)]);}return _0x49ed0f;}async['getEndpointArtifactList'](_0x310e30){const _0x126493=a312_0xc44e74;this['_logger']['log'](_0x126493(0xd3));const _0x2f55e1=[],_0x532540=await veeva_service_1['VeevaService'][_0x126493(0x11f)](_0x310e30,this['_connectionVeeva'],this[_0x126493(0x10f)]);for(const _0x5cf153 of _0x532540){const _0xc9e637=_0x5cf153[_0x126493(0x113)][_0x126493(0xe4)](_0x48021e=>_0x48021e[_0x126493(0xa1)]===_0x126493(0xcc))['map'](_0x5be3ab=>_0x5be3ab[_0x126493(0xac)]);_0x2f55e1[_0x126493(0x126)](..._0xc9e637);}return _0x2f55e1;}async['retrieveVPKList'](_0xadff29){const _0x23bd0d=a312_0xc44e74;var _0xd59591;const _0x1eac28=[];this['_logger'][_0x23bd0d(0x8f)]('Retrieve\x20Outbound\x20Package\x20zip\x20list');for(const _0x53b00c of _0xadff29){const {data:_0x3bce01,headers:_0xc466c7}=await this[_0x23bd0d(0xa0)][_0x23bd0d(0x11a)](_0x53b00c,{'responseType':_0x23bd0d(0x95)}),_0xd267a6=(_0xd59591=_0xc466c7[_0x23bd0d(0xcd)])===null||_0xd59591===void 0x0?void 0x0:_0xd59591[_0x23bd0d(0x114)](_0x23bd0d(0xb3));if(!_0xd267a6){const _0x4f766a=_0x3bce01,_0x242911=new jszip_1[(_0x23bd0d(0x12b))]();await _0x242911[_0x23bd0d(0x128)](_0x4f766a),_0x1eac28[_0x23bd0d(0x126)](_0x242911);}else{const _0x2970c4=JSON['parse'](_0x3bce01);throw new veeva_error_1[(_0x23bd0d(0xbc))](_0x2970c4[_0x23bd0d(0xf7)]);}}return _0x1eac28;}async[a312_0xc44e74(0xf5)](_0x2197dd,_0x3325fe){const _0x51b29c=a312_0xc44e74;var _0x589293;this['_logger'][_0x51b29c(0x8f)]('Unpack\x20zip\x20and\x20create\x20metadata\x20items.');const _0x51e075=this[_0x51b29c(0x12d)](_0x2197dd),_0x5576a0=_0x51e075[_0x51b29c(0xf9)]((_0x2a8191,_0x59b386)=>_0x2a8191[_0x51b29c(0x91)](_0x59b386['label'],_0x59b386),new Map());for(const _0x5ea92f of _0x3325fe){for(const _0x1a331f in _0x5ea92f[_0x51b29c(0xf0)]){const _0x3c2107=_0x1a331f[_0x51b29c(0xa9)]('/')['at'](-0x1);if(_0x5576a0[_0x51b29c(0x8e)](_0x3c2107)){const _0x47ef34=await((_0x589293=_0x5ea92f[_0x51b29c(0xd0)](_0x1a331f))===null||_0x589293===void 0x0?void 0x0:_0x589293[_0x51b29c(0xdf)]('string'));if(_0x47ef34){const _0xd10ba7=new jszip_1[(_0x51b29c(0x12b))]();_0xd10ba7[_0x51b29c(0xd0)](_0x3c2107,_0x47ef34),_0x5576a0[_0x51b29c(0x11a)](_0x3c2107)['body']=await _0xd10ba7[_0x51b29c(0x129)]({'type':'base64'});}}}}return _0x51e075[_0x51b29c(0xe4)](_0xd6f315=>!_0xd6f315['body'])[_0x51b29c(0x124)](_0xc0c8eb=>{const _0x36b4f2=_0x51b29c;this[_0x36b4f2(0x10f)][_0x36b4f2(0x8f)](_0x36b4f2(0xab)+_0xc0c8eb[_0x36b4f2(0xe5)]+'.'+_0xc0c8eb[_0x36b4f2(0xce)]+_0x36b4f2(0x98));}),_0x51e075[_0x51b29c(0xe4)](_0xadbd4f=>_0xadbd4f[_0x51b29c(0x11e)]);}[a312_0xc44e74(0x12d)](_0x81b756){return _0x81b756['map'](_0x83fcd0=>{const _0x197158=a312_0x2447,_0x4b9372=new metadata_item_dto_1[(_0x197158(0x116))]();return _0x4b9372[_0x197158(0xce)]=_0x83fcd0[_0x197158(0xce)],_0x4b9372[_0x197158(0x11d)]=_0x83fcd0[_0x197158(0xce)],_0x4b9372[_0x197158(0x109)]=this['_snapshotId'],_0x4b9372['label']=_0x83fcd0[_0x197158(0x9b)]+'.'+_0x83fcd0[_0x197158(0xce)]+_0x197158(0x9c),_0x4b9372[_0x197158(0xe5)]=_0x83fcd0[_0x197158(0x9b)],_0x4b9372['lastModifiedDate']=_0x83fcd0[_0x197158(0x112)],_0x4b9372[_0x197158(0xd8)]=![],_0x4b9372;});}async['deletePackageComponents'](_0xe35de8){const _0xd657dd=a312_0xc44e74;this['_logger'][_0xd657dd(0x8f)]('Removing\x20components\x20from\x20outbound\x20packages.');const _0x3b3e91=veeva_constants_1[_0xd657dd(0xa2)][_0xd657dd(0x8a)]+_0xd657dd(0x122);await veeva_service_1[_0xd657dd(0xc2)][_0xd657dd(0x102)](_0x3b3e91,this[_0xd657dd(0xa0)],_0xe35de8,this['_logger']);}async['deleteOutboundPackages'](_0x4a0c0d){const _0x28eb51=a312_0xc44e74;this[_0x28eb51(0x10f)][_0x28eb51(0x8f)]('Deleting\x20outbound\x20packages.');const _0x4f6bd5=veeva_constants_1['VeevaConstants']['ENDPOINT_CREATE_RECORDS']+_0x28eb51(0xbb);await veeva_service_1['VeevaService']['deleteVeevaObjectRecords'](_0x4f6bd5,this[_0x28eb51(0xa0)],_0x4a0c0d,this['_logger']);}async[a312_0xc44e74(0x12f)](_0x59dbcb){const _0x279fcd=a312_0xc44e74;this[_0x279fcd(0x10f)][_0x279fcd(0x8f)]('Saving\x20Attachments.'),await this[_0x279fcd(0xb7)](_0x59dbcb),this[_0x279fcd(0x10f)][_0x279fcd(0x8f)](_0x279fcd(0x9d)+_0x59dbcb[_0x279fcd(0xe1)]+_0x279fcd(0xb2));const _0x26d91f=_0x59dbcb[_0x279fcd(0xf6)](_0x2937ae=>{const _0x52370f=_0x279fcd;return{[constants_1[_0x52370f(0x9f)]+_0x52370f(0x106)]:_0x2937ae[_0x52370f(0xce)],[constants_1[_0x52370f(0x9f)]+'API_Name__c']:_0x2937ae[_0x52370f(0x11d)],[constants_1[_0x52370f(0x9f)]+_0x52370f(0xe8)]:_0x2937ae[_0x52370f(0x109)],[constants_1['FLOSUM_NAMESPACE']+_0x52370f(0x10e)]:_0x2937ae[_0x52370f(0xaf)],[constants_1['FLOSUM_NAMESPACE']+_0x52370f(0xbe)]:_0x2937ae[_0x52370f(0xd8)],[constants_1['FLOSUM_NAMESPACE']+_0x52370f(0x94)]:_0x2937ae[_0x52370f(0xe5)],[constants_1[_0x52370f(0x9f)]+_0x52370f(0xb4)]:_0x2937ae[_0x52370f(0xc6)],[constants_1[_0x52370f(0x9f)]+_0x52370f(0xd7)]:_0x2937ae[_0x52370f(0x112)]};}),_0x3f2d8f=await salesforce_service_1['SalesforceService'][_0x279fcd(0x123)](this[_0x279fcd(0xfd)],constants_1[_0x279fcd(0x9f)]+_0x279fcd(0xd9),_0x26d91f);let _0x2c6519=!![];_0x3f2d8f['forEach']((_0x7d9226,_0x21ae17)=>{const _0xe9044f=_0x279fcd;this[_0xe9044f(0x10f)][_0xe9044f(0x8f)](_0xe9044f(0x9d)+_0x59dbcb[_0x21ae17]['veevaComponentType']+'.'+_0x59dbcb[_0x21ae17][_0xe9044f(0xce)]);if(!_0x7d9226[_0xe9044f(0xc4)]){_0x2c6519=![];const _0x15eb39=new salesforce_dml_error_1[(_0xe9044f(0xea))](_0x7d9226['errors']);this[_0xe9044f(0x10f)][_0xe9044f(0x92)](_0x15eb39);}});if(!_0x2c6519)throw new Error('Cannot\x20Save\x20Metadata\x20Items');}async[a312_0xc44e74(0xb7)](_0x4281b1){const _0x433b92=a312_0xc44e74,_0x1be21a=this['formAttachments'](_0x4281b1),_0x5ade92=await salesforce_service_1[_0x433b92(0xda)][_0x433b92(0x123)](this[_0x433b92(0xfd)],SnapshotService[_0x433b92(0x101)],_0x1be21a),_0x11c391=[];_0x5ade92[_0x433b92(0x124)]((_0xce0aa8,_0x5a4d5f)=>{const _0x1915bd=_0x433b92;_0xce0aa8[_0x1915bd(0xc4)]?(_0x4281b1[_0x5a4d5f][_0x1915bd(0xc6)]=_0xce0aa8['id'],_0x4281b1[_0x5a4d5f][_0x1915bd(0xd8)]=!![]):_0x11c391[_0x1915bd(0x126)](..._0xce0aa8['errors']);});if(_0x11c391[_0x433b92(0xe1)])throw new salesforce_dml_error_1[(_0x433b92(0xea))](_0x11c391);}['formAttachments'](_0x3d75d9){const _0x11a718=a312_0xc44e74;return _0x3d75d9[_0x11a718(0xf6)](_0x24825f=>({'ParentId':this[_0x11a718(0x99)],'Name':_0x24825f[_0x11a718(0xe5)],'ContentType':_0x11a718(0x10b),'Body':_0x24825f[_0x11a718(0x11e)],'Description':_0x24825f[_0x11a718(0xe5)]}));}async[a312_0xc44e74(0x96)](_0xef7649){const _0x2823b1=a312_0xc44e74,_0x421e8d={[constants_1[_0x2823b1(0x9f)]+_0x2823b1(0xcf)]:!![],[constants_1[_0x2823b1(0x9f)]+_0x2823b1(0xb8)]:!_0xef7649},_0x3acc48={[constants_1['FLOSUM_NAMESPACE']+_0x2823b1(0xb8)]:!_0xef7649,[constants_1[_0x2823b1(0x9f)]+_0x2823b1(0xe0)]:_0xef7649,[constants_1[_0x2823b1(0x9f)]+_0x2823b1(0xee)]:_0xef7649?status_enums_1[_0x2823b1(0x12c)][_0x2823b1(0x125)]:status_enums_1[_0x2823b1(0x12c)]['EXCEPTION'],[constants_1[_0x2823b1(0x9f)]+_0x2823b1(0xf1)]:!![]};await this['_connectionSalesforce']['patch'](flosum_constants_1[_0x2823b1(0xc3)]['ENDPOINT_UPSERT_RECORD']+'/'+constants_1['FLOSUM_NAMESPACE']+_0x2823b1(0x93)+this['_snapshotId'],_0x421e8d),await this[_0x2823b1(0xfd)]['patch'](flosum_constants_1['FlosumConstants']['ENDPOINT_UPSERT_RECORD']+'/'+constants_1['FLOSUM_NAMESPACE']+_0x2823b1(0xec)+this[_0x2823b1(0x118)],_0x3acc48),this[_0x2823b1(0x10f)][_0x2823b1(0x8f)](_0x2823b1(0x110)+(_0xef7649?'successfully':'with\x20error')+'.'),await this[_0x2823b1(0x10f)][_0x2823b1(0xd2)]();}}function a312_0x44d7(){const _0x559e5e=['Retrieve\x20Jobs\x20Status','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20CONTAINS\x20(\x27','SnapshotService','17968690JizpRL','Last_Modified_Date__c','isRetrieved','Metadata_Item__c','SalesforceService','error','getComponentsMetadataByTypes','SUCCESS','executeManyVQL','async','Succeed__c','length','join','6OGBUjY','filter','veevaComponentType','Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20','values','Snapshot__c','defineProperty','SalesforceDmlError','packageName','Metadata_Log__c/','_selectedMetaTypes','Status__c','ceil','files','Job_Completed__c','constructor','ENDPOINT_EXPORT_IMPORT_PACKAGE','executeVQL','createMetadataItemListWithBody','map','errors','selectedComponentMap','reduce','toString','fill','Retrieve\x20collection\x20metadata\x20of\x20components','_connectionSalesforce','retrieveVPKList','_systemLogger','attachmentLogId','ATTACMENT','deleteVeevaObjectRecords','deleteOutboundPackages','migration__sys','timeZone','Name__c','VeevaResponseStatus','VeevaComponentDto','snapshotId','Retrieve\x20collection\x20metadata\x20of\x20components\x20by\x20type\x20and\x20names','application/zip','from','2559767FwHaLh','Label__c','_logger','Snapshot\x20completed\x20','2kUNRXD','lastModifiedDate','links','includes','__importDefault','MetadataItemDto','Snapshot\x20started.','_metadataLogId','(((.+)+)+)+$','get','../dtos/metadata-item.dto','getPackageNames','apiName','body','getJobResult','974502wJbZQu','deletePackageComponents','package_component__v','insertMultipleRecords','forEach','COMPLETED','push','ENDPOINT_VQL','loadAsync','generateAsync','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27','default','MetadataLogStatus','formMetadataItemDtoList','5363744jYwoEe','saveComponentsInSalesforce','all','jszip','7881840nbxpEN','ENDPOINT_CREATE_RECORDS','chunkArray','createPackageComponents','inactive__v','has','log','createVeevaObjectRecords','set','logError','Snapshot__c/','Veeva_Component_Type__c','arraybuffer','finishSnapshot','./veeva.service','\x20from\x20outbound\x20package','_snapshotId','3334910TXPBIM','type','.mdl','Saving\x20','responseStatus','FLOSUM_NAMESPACE','_connectionVeeva','rel','VeevaConstants','Snapshot','post','Creating\x20outbound\x20packages','../enums/status.enums','../classes/errors/salesforce-dml-error','exportOutboundPackage','split','metadataLogId','Cannot\x20retrieve\x20','href','Create\x20Export\x20outbound\x20packages.','\x27\x20AND\x20component_name__v\x20CONTAINS\x20(\x27','label','\x27,\x27','3203529XLGUsa','\x20Metadata\x20Items','application/json','Attachment_ID__c','../constants/flosum.constants','../../../constants','saveAttachments','Is_Error__c','search','createExportOutboundPackages','outbound_package__v','VeevaError','Adding\x20components\x20to\x20outbound\x20package','Is_Retrieved__c','OUTBOUND_PACKAGE_NAME','_selectedComponentMap','Attachment','VeevaService','FlosumConstants','success','MAXIMUM_SIZE_OF_PACKAGE','attachmentId','createOutboundPackages','BUILD_WHERE_BY_NAME_LIMIT','9vtFXYc','__esModule','name__v','artifacts','content-type','name','Is_Completed__c','file','selectedMetaTypes','updateLog'];a312_0x44d7=function(){return _0x559e5e;};return a312_0x44d7();}exports[a312_0xc44e74(0xd5)]=SnapshotService,SnapshotService[a312_0xc44e74(0xbf)]=a312_0xc44e74(0xa3),SnapshotService[a312_0xc44e74(0x101)]=a312_0xc44e74(0xc1);