const a259_0x40a4dd=a259_0x1850;(function(_0x1b12ec,_0x4f3944){const _0x350001=a259_0x1850,_0x18925d=_0x1b12ec();while(!![]){try{const _0x2e46d9=-parseInt(_0x350001(0x166))/0x1*(-parseInt(_0x350001(0x186))/0x2)+-parseInt(_0x350001(0x137))/0x3*(parseInt(_0x350001(0x1a2))/0x4)+-parseInt(_0x350001(0x120))/0x5*(parseInt(_0x350001(0x19d))/0x6)+-parseInt(_0x350001(0x173))/0x7+parseInt(_0x350001(0x10e))/0x8+-parseInt(_0x350001(0x116))/0x9+-parseInt(_0x350001(0xf6))/0xa*(parseInt(_0x350001(0x199))/0xb);if(_0x2e46d9===_0x4f3944)break;else _0x18925d['push'](_0x18925d['shift']());}catch(_0x1c04bc){_0x18925d['push'](_0x18925d['shift']());}}}(a259_0xb841,0x52eca));const a259_0xd075a=(function(){let _0x59f8af=!![];return function(_0x32e422,_0x11eb81){const _0x11c312=_0x59f8af?function(){const _0x522bde=a259_0x1850;if(_0x11eb81){const _0x29413d=_0x11eb81[_0x522bde(0x11b)](_0x32e422,arguments);return _0x11eb81=null,_0x29413d;}}:function(){};return _0x59f8af=![],_0x11c312;};}()),a259_0x407a2c=a259_0xd075a(this,function(){const _0x63ded2=a259_0x1850;return a259_0x407a2c[_0x63ded2(0x168)]()['search']('(((.+)+)+)+$')[_0x63ded2(0x168)]()[_0x63ded2(0x12a)](a259_0x407a2c)[_0x63ded2(0x123)](_0x63ded2(0x15c));});a259_0x407a2c();'use strict';function a259_0x1850(_0x2c5af2,_0x39d91e){const _0x522e97=a259_0xb841();return a259_0x1850=function(_0x407a2c,_0xd075a){_0x407a2c=_0x407a2c-0xf6;let _0xb841e2=_0x522e97[_0x407a2c];return _0xb841e2;},a259_0x1850(_0x2c5af2,_0x39d91e);}var __importDefault=this&&this[a259_0x40a4dd(0x11f)]||function(_0x3f0186){const _0x481daa=a259_0x40a4dd;return _0x3f0186&&_0x3f0186[_0x481daa(0x17f)]?_0x3f0186:{'default':_0x3f0186};};function a259_0xb841(){const _0x42a44f=['values','executeVQL','../dtos/metadata-item.dto','_logger','Removing\x20components\x20from\x20outbound\x20packages.','constructor','insertMultipleRecords','log','base64','../enums/status.enums','FlosumConstants','createVeevaObjectRecords','links','responseStatus','EXCEPTION','from','jszip','application/json','3ppKbaT','_systemLogger','Attachment_ID__c','SnapshotService','VeevaComponentDto','Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20','getEndpointArtifactList','executeManyVQL','\x27,\x27','Cannot\x20retrieve\x20','OUTBOUND_PACKAGE_NAME','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20CONTAINS\x20(\x27','Last_Modified_Date__c','retrieveVPKList','Create\x20Export\x20outbound\x20packages.','_timeZone','getComponentsMetadataByTypeAndName','error','join','Creating\x20outbound\x20packages','MetadataLogStatus','SUCCESS','reduce','createExportOutboundPackages','Saving\x20','formAttachments','MAXIMUM_SIZE_OF_PACKAGE','post','COMPLETED','../classes/errors/veeva-error','generateAsync','Deleting\x20outbound\x20packages.','ATTACMENT','getPackageNames','FLOSUM_NAMESPACE','getComponentsMetadataByTypes','../constants/veeva.constants','(((.+)+)+)+$','finishSnapshot','Snapshot\x20completed\x20','ceil','createPackageComponents','includes','application/x-www-form-urlencoded','type','ENDPOINT_UPSERT_RECORD','Succeed__c','11642WUdVAk','application/zip','toString','name','apiName','.mdl','Snapshot__c','name__v','logError','filter','ENDPOINT_CREATE_RECORDS','_metadataLogId','ENDPOINT_EXPORT_IMPORT_PACKAGE','527905GQlZXK','Veeva_Component_Type__c','content-type','BUILD_WHERE_BY_NAME_LIMIT','Getting\x20names\x20of\x20outbound\x20packages','deletePackageComponents','\x20Metadata\x20Items','API_Name__c','patch','veevaComponentType','_connectionSalesforce','metadataLogId','__esModule','errors','has','execute','length','catch','successfully','16rBKOms','default','Is_Error__c','SalesforceService','forEach','./veeva.service','_selectedMetaTypes','string','ENDPOINT_VQL','label','Retrieve\x20Outbound\x20Package\x20zip\x20list','chunkArray','parse','push','VeevaService','Saving\x20Attachments.','../dtos/veeva-component.dto','snapshotId','set','2959XwTlyE','./salesforce.service','Attachment','createOutboundPackages','498KBQzCl','selectedMetaTypes','Retrieve\x20Jobs\x20Status','split','saveAttachments','674716QIqjmc','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20=\x27','arraybuffer','createMetadataItemListWithBody','attachmentLogId','2430LSujPR','deleteVeevaObjectRecords','deleteOutboundPackages','MetadataItemDto','files','map','../../../constants','timeZone','get','artifacts','_connectionVeeva','all','defineProperty','isRetrieved','updateLog','VeevaResponseStatus','loadAsync','VeevaError','attachmentId','Status__c','body','outbound_package__v','VeevaConstants','success','5273824EahOsc','SalesforceDmlError','_selectedComponentMap','Unpack\x20zip\x20and\x20create\x20metadata\x20items.','formMetadataItemDtoList','packageName','Cannot\x20Save\x20Metadata\x20Items','Snapshot\x20started.','596790xOedzq','../constants/flosum.constants','../../shared/utils','\x20from\x20outbound\x20package','_attachmentLogId','apply','Label__c','lastModifiedDate','Metadata_Item__c','__importDefault','2225mnkRWy','exportOutboundPackage','package_component__v','search','_snapshotId'];a259_0xb841=function(){return _0x42a44f;};return a259_0xb841();}Object[a259_0x40a4dd(0x102)](exports,a259_0x40a4dd(0x17f),{'value':!![]}),exports[a259_0x40a4dd(0x13a)]=void 0x0;const jszip_1=__importDefault(require(a259_0x40a4dd(0x135))),flosum_constants_1=require(a259_0x40a4dd(0x117)),veeva_constants_1=require(a259_0x40a4dd(0x15b)),veeva_service_1=require(a259_0x40a4dd(0x18b)),veeva_component_dto_1=require(a259_0x40a4dd(0x196)),metadata_item_dto_1=require(a259_0x40a4dd(0x127)),utils_1=require(a259_0x40a4dd(0x118)),constants_1=require(a259_0x40a4dd(0xfc)),salesforce_service_1=require(a259_0x40a4dd(0x19a)),status_enums_1=require(a259_0x40a4dd(0x12e)),salesforce_dml_error_1=require('../classes/errors/salesforce-dml-error'),veeva_error_1=require(a259_0x40a4dd(0x154));class SnapshotService{constructor(_0x3594e0,_0x9e367c,_0x328ac9,_0x40f82c){const _0x327964=a259_0x40a4dd;this[_0x327964(0x17d)]=_0x9e367c,this[_0x327964(0x100)]=_0x328ac9,this[_0x327964(0x128)]=_0x40f82c,this[_0x327964(0x124)]=_0x3594e0[_0x327964(0x197)],this[_0x327964(0x171)]=_0x3594e0[_0x327964(0x17e)],this[_0x327964(0x11a)]=_0x3594e0[_0x327964(0x1a6)],this[_0x327964(0x146)]=_0x3594e0[_0x327964(0xfd)],this[_0x327964(0x18c)]=_0x3594e0[_0x327964(0x19e)],this[_0x327964(0x110)]=_0x3594e0['selectedComponentMap'];}async[a259_0x40a4dd(0x182)](){const _0x2fcea6=a259_0x40a4dd;try{this[_0x2fcea6(0x128)][_0x2fcea6(0x12c)](_0x2fcea6(0x115));const _0x3b3576=Array[_0x2fcea6(0x134)](Object[_0x2fcea6(0x125)](this[_0x2fcea6(0x110)]))[_0x2fcea6(0x183)]?await this['getComponentsMetadataByTypeAndName']():await this[_0x2fcea6(0x15a)]();await this[_0x2fcea6(0x128)]['updateLog']();const _0x417945=await this[_0x2fcea6(0x19c)](Math['ceil'](_0x3b3576[_0x2fcea6(0x183)]/veeva_constants_1['VeevaConstants'][_0x2fcea6(0x151)])),_0x2ae0a1=await this[_0x2fcea6(0x160)](_0x3b3576,_0x417945);await this[_0x2fcea6(0x128)][_0x2fcea6(0x104)]();const _0x33c8d9=await this[_0x2fcea6(0x121)](_0x417945),_0x4939a6=await this[_0x2fcea6(0x1a5)](_0x3b3576,_0x33c8d9);await this['saveComponentsInSalesforce'](_0x4939a6),await this[_0x2fcea6(0x128)]['updateLog'](),await this[_0x2fcea6(0x178)](_0x2ae0a1),await this[_0x2fcea6(0xf8)](_0x417945),await this[_0x2fcea6(0x15d)](!![]);}catch(_0x357857){this[_0x2fcea6(0x128)][_0x2fcea6(0x16e)](_0x357857),await this[_0x2fcea6(0x15d)](![])[_0x2fcea6(0x184)](_0x9a78bb=>this[_0x2fcea6(0x138)][_0x2fcea6(0x148)](_0x9a78bb));}}async['getComponentsMetadataByTypes'](){const _0x53bbba=a259_0x40a4dd;this[_0x53bbba(0x128)][_0x53bbba(0x12c)]('Retrieve\x20collection\x20metadata\x20of\x20components');const _0x4dff01=[],_0x55c543=_0x53bbba(0x142)+this['_selectedMetaTypes'][_0x53bbba(0x149)](_0x53bbba(0x13f))+'\x27)',_0x263963=veeva_constants_1[_0x53bbba(0x10c)][_0x53bbba(0x18e)]+_0x55c543,_0x249a3e=await veeva_service_1['VeevaService'][_0x53bbba(0x126)](_0x263963,this['_connectionVeeva']);for(const _0x59524d of _0x249a3e){const _0x509cc5=new veeva_component_dto_1[(_0x53bbba(0x13b))](_0x59524d),{name:_0x33a94b,type:_0x4faa2e,status:_0x4b56bb}=_0x509cc5;_0x4b56bb[_0x53bbba(0x161)]('inactive__v')?this[_0x53bbba(0x128)]['log'](_0x53bbba(0x13c)+_0x4faa2e+'.'+_0x33a94b):_0x4dff01['push'](_0x509cc5);}return _0x4dff01;}async[a259_0x40a4dd(0x147)](){const _0x49c8ac=a259_0x40a4dd;this['_logger']['log']('Retrieve\x20collection\x20metadata\x20of\x20components\x20by\x20type\x20and\x20names');const _0x1667a3=[];for(const _0x3b9953 in this['_selectedComponentMap']){const _0xe6e8d0=(0x0,utils_1[_0x49c8ac(0x191)])(this[_0x49c8ac(0x110)][_0x3b9953],veeva_constants_1['VeevaConstants'][_0x49c8ac(0x176)]),_0x74fb14=_0xe6e8d0[_0x49c8ac(0xfb)](_0x4005ee=>veeva_constants_1['VeevaConstants'][_0x49c8ac(0x18e)]+(_0x49c8ac(0x1a3)+_0x3b9953+'\x27\x20AND\x20component_name__v\x20CONTAINS\x20(\x27'+_0x4005ee[_0x49c8ac(0x149)](_0x49c8ac(0x13f))+'\x27)'));_0x1667a3[_0x49c8ac(0x193)](..._0x74fb14);}const _0x2b474b=[],_0x233502=await veeva_service_1[_0x49c8ac(0x194)][_0x49c8ac(0x13e)](_0x1667a3,this['_connectionVeeva']);for(const _0x1272ab of _0x233502){const _0x3dea=new veeva_component_dto_1[(_0x49c8ac(0x13b))](_0x1272ab),{name:_0x46e2f2,type:_0x3070ea,status:_0x46d260}=_0x3dea,_0x2a8e54=_0x46d260['includes']('inactive__v');_0x2a8e54?this['_logger'][_0x49c8ac(0x12c)](_0x49c8ac(0x13c)+_0x3070ea+'.'+_0x46e2f2):_0x2b474b[_0x49c8ac(0x193)](_0x3dea);}return _0x2b474b;}async['createOutboundPackages'](_0x1cfdd1){const _0x37fb9e=a259_0x40a4dd;this['_logger']['log'](_0x37fb9e(0x14a));const _0x9c743d=veeva_constants_1[_0x37fb9e(0x10c)][_0x37fb9e(0x170)]+'outbound_package__v',_0x1b73a4=new Array(_0x1cfdd1)['fill']({'summary__v':SnapshotService[_0x37fb9e(0x141)],'object_type__v.api__name__v':'migration__sys'});return await veeva_service_1[_0x37fb9e(0x194)][_0x37fb9e(0x130)](_0x9c743d,this['_connectionVeeva'],_0x1b73a4,this[_0x37fb9e(0x128)]);}async[a259_0x40a4dd(0x160)](_0x6d5e53,_0x35b2d5){const _0xc4deab=a259_0x40a4dd;this[_0xc4deab(0x128)][_0xc4deab(0x12c)]('Adding\x20components\x20to\x20outbound\x20package');const _0x10d38e=veeva_constants_1[_0xc4deab(0x10c)]['ENDPOINT_CREATE_RECORDS']+'package_component__v',_0x256670=_0x6d5e53[_0xc4deab(0xfb)]((_0x47f475,_0x55a722)=>({'vault_component__v':_0x47f475['id'],'outbound_package__v':_0x35b2d5[Math[_0xc4deab(0x15f)]((_0x55a722+0x1)/veeva_constants_1['VeevaConstants']['MAXIMUM_SIZE_OF_PACKAGE'])-0x1]}));return await veeva_service_1[_0xc4deab(0x194)][_0xc4deab(0x130)](_0x10d38e,this[_0xc4deab(0x100)],_0x256670,this[_0xc4deab(0x128)]);}async[a259_0x40a4dd(0x121)](_0x2979f9){const _0x4fb1ce=a259_0x40a4dd,_0x41bb39=await this[_0x4fb1ce(0x158)](_0x2979f9),_0x18d3a1=await this[_0x4fb1ce(0x14e)](Array[_0x4fb1ce(0x134)](_0x41bb39[_0x4fb1ce(0x125)]())),_0x3e68bd=await this['getEndpointArtifactList'](_0x18d3a1);return await this[_0x4fb1ce(0x144)](_0x3e68bd);}async[a259_0x40a4dd(0x158)](_0x5bc4d2){const _0x39b28a=a259_0x40a4dd;this[_0x39b28a(0x128)][_0x39b28a(0x12c)](_0x39b28a(0x177));const _0x4975c8='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27'+_0x5bc4d2[_0x39b28a(0x149)](_0x39b28a(0x13f))+'\x27)',_0x4d208b=veeva_constants_1[_0x39b28a(0x10c)][_0x39b28a(0x18e)]+_0x4975c8,_0x4bece2=await veeva_service_1[_0x39b28a(0x194)][_0x39b28a(0x126)](_0x4d208b,this[_0x39b28a(0x100)]);return _0x4bece2[_0x39b28a(0x14d)]((_0x463a44,_0x5476bc)=>_0x463a44[_0x39b28a(0x198)](_0x5476bc['id'],_0x5476bc[_0x39b28a(0x16d)]),new Map());}async[a259_0x40a4dd(0x14e)](_0x2775c7){const _0xa78cc0=a259_0x40a4dd;this['_logger'][_0xa78cc0(0x12c)](_0xa78cc0(0x145));const _0xa539d8=[],_0x118eb5=_0x2775c7[_0xa78cc0(0xfb)](_0x318da4=>{const _0x2d3e2e=_0xa78cc0;return this[_0x2d3e2e(0x100)][_0x2d3e2e(0x152)](veeva_constants_1[_0x2d3e2e(0x10c)][_0x2d3e2e(0x172)],encodeURI(_0x2d3e2e(0x113))+'='+encodeURI(_0x318da4),{'headers':{'Content-Type':_0x2d3e2e(0x162)}});}),_0x16fdd0=await Promise[_0xa78cc0(0x101)](_0x118eb5);for(const {data:_0x245094}of _0x16fdd0){if(_0x245094[_0xa78cc0(0x132)]===status_enums_1[_0xa78cc0(0x105)][_0xa78cc0(0x14c)]){const {url:_0x47da9d}=_0x245094;_0xa539d8[_0xa78cc0(0x193)](_0x47da9d);}else throw new veeva_error_1['VeevaError'](_0x245094[_0xa78cc0(0x180)]);}return _0xa539d8;}async[a259_0x40a4dd(0x13d)](_0x5f5768){const _0x31e6e0=a259_0x40a4dd;this[_0x31e6e0(0x128)][_0x31e6e0(0x12c)](_0x31e6e0(0x19f));const _0x57f0c1=[],_0xc95340=await veeva_service_1[_0x31e6e0(0x194)]['getJobResult'](_0x5f5768,this['_connectionVeeva'],this['_logger']);for(const _0x440ba9 of _0xc95340){const _0x4bea39=_0x440ba9[_0x31e6e0(0x131)][_0x31e6e0(0x16f)](_0x3f9c8b=>_0x3f9c8b['rel']===_0x31e6e0(0xff))['map'](_0x591601=>_0x591601['href']);_0x57f0c1[_0x31e6e0(0x193)](..._0x4bea39);}return _0x57f0c1;}async[a259_0x40a4dd(0x144)](_0x279d39){const _0x29f627=a259_0x40a4dd;var _0x21a0fc;const _0x2a043a=[];this[_0x29f627(0x128)][_0x29f627(0x12c)](_0x29f627(0x190));for(const _0x21b0c8 of _0x279d39){const {data:_0x7369c2,headers:_0x2f8d9c}=await this[_0x29f627(0x100)][_0x29f627(0xfe)](_0x21b0c8,{'responseType':_0x29f627(0x1a4)}),_0x4b4bd3=(_0x21a0fc=_0x2f8d9c[_0x29f627(0x175)])===null||_0x21a0fc===void 0x0?void 0x0:_0x21a0fc[_0x29f627(0x161)](_0x29f627(0x136));if(!_0x4b4bd3){const _0x19e863=_0x7369c2,_0x5a1f3b=new jszip_1[(_0x29f627(0x187))]();await _0x5a1f3b[_0x29f627(0x106)](_0x19e863),_0x2a043a[_0x29f627(0x193)](_0x5a1f3b);}else{const _0xbb3b0a=JSON[_0x29f627(0x192)](_0x7369c2);throw new veeva_error_1[(_0x29f627(0x107))](_0xbb3b0a['errors']);}}return _0x2a043a;}async[a259_0x40a4dd(0x1a5)](_0x1c6264,_0x4d0782){const _0x1e4ca0=a259_0x40a4dd;var _0x83cdb9;this[_0x1e4ca0(0x128)][_0x1e4ca0(0x12c)](_0x1e4ca0(0x111));const _0x579ffd=this[_0x1e4ca0(0x112)](_0x1c6264),_0x41dd83=_0x579ffd[_0x1e4ca0(0x14d)]((_0x472f34,_0x15e12d)=>_0x472f34[_0x1e4ca0(0x198)](_0x15e12d[_0x1e4ca0(0x18f)],_0x15e12d),new Map());for(const _0x235c25 of _0x4d0782){for(const _0x33e893 in _0x235c25[_0x1e4ca0(0xfa)]){const _0x5024a5=_0x33e893[_0x1e4ca0(0x1a0)]('/')['at'](-0x1);if(_0x41dd83[_0x1e4ca0(0x181)](_0x5024a5)){const _0x43daa0=await((_0x83cdb9=_0x235c25['file'](_0x33e893))===null||_0x83cdb9===void 0x0?void 0x0:_0x83cdb9['async'](_0x1e4ca0(0x18d)));if(_0x43daa0){const _0x2102f4=new jszip_1[(_0x1e4ca0(0x187))]();_0x2102f4['file'](_0x5024a5,_0x43daa0),_0x41dd83['get'](_0x5024a5)[_0x1e4ca0(0x10a)]=await _0x2102f4[_0x1e4ca0(0x155)]({'type':_0x1e4ca0(0x12d)});}}}}return _0x579ffd[_0x1e4ca0(0x16f)](_0x2a7ba3=>!_0x2a7ba3[_0x1e4ca0(0x10a)])[_0x1e4ca0(0x18a)](_0x150980=>{const _0x332ba9=_0x1e4ca0;this[_0x332ba9(0x128)][_0x332ba9(0x12c)](_0x332ba9(0x140)+_0x150980['veevaComponentType']+'.'+_0x150980[_0x332ba9(0x169)]+_0x332ba9(0x119));}),_0x579ffd[_0x1e4ca0(0x16f)](_0x154347=>_0x154347[_0x1e4ca0(0x10a)]);}[a259_0x40a4dd(0x112)](_0x171c20){return _0x171c20['map'](_0x4f004a=>{const _0x45df9e=a259_0x1850,_0xf43960=new metadata_item_dto_1[(_0x45df9e(0xf9))]();return _0xf43960[_0x45df9e(0x169)]=_0x4f004a[_0x45df9e(0x169)],_0xf43960[_0x45df9e(0x16a)]=_0x4f004a['name'],_0xf43960['snapshotId']=this[_0x45df9e(0x124)],_0xf43960[_0x45df9e(0x18f)]=_0x4f004a[_0x45df9e(0x163)]+'.'+_0x4f004a[_0x45df9e(0x169)]+_0x45df9e(0x16b),_0xf43960[_0x45df9e(0x17c)]=_0x4f004a[_0x45df9e(0x163)],_0xf43960[_0x45df9e(0x11d)]=_0x4f004a[_0x45df9e(0x11d)],_0xf43960[_0x45df9e(0x103)]=![],_0xf43960;});}async[a259_0x40a4dd(0x178)](_0x3d174b){const _0x5cfdc4=a259_0x40a4dd;this[_0x5cfdc4(0x128)][_0x5cfdc4(0x12c)](_0x5cfdc4(0x129));const _0xc92f1b=veeva_constants_1[_0x5cfdc4(0x10c)]['ENDPOINT_CREATE_RECORDS']+_0x5cfdc4(0x122);await veeva_service_1[_0x5cfdc4(0x194)][_0x5cfdc4(0xf7)](_0xc92f1b,this[_0x5cfdc4(0x100)],_0x3d174b,this[_0x5cfdc4(0x128)]);}async[a259_0x40a4dd(0xf8)](_0x54e6f0){const _0x6b2e12=a259_0x40a4dd;this[_0x6b2e12(0x128)]['log'](_0x6b2e12(0x156));const _0x3116ad=veeva_constants_1[_0x6b2e12(0x10c)]['ENDPOINT_CREATE_RECORDS']+_0x6b2e12(0x10b);await veeva_service_1[_0x6b2e12(0x194)]['deleteVeevaObjectRecords'](_0x3116ad,this[_0x6b2e12(0x100)],_0x54e6f0,this[_0x6b2e12(0x128)]);}async['saveComponentsInSalesforce'](_0x379e6a){const _0x1eef55=a259_0x40a4dd;this[_0x1eef55(0x128)]['log'](_0x1eef55(0x195)),await this[_0x1eef55(0x1a1)](_0x379e6a),this[_0x1eef55(0x128)][_0x1eef55(0x12c)]('Saving\x20'+_0x379e6a[_0x1eef55(0x183)]+_0x1eef55(0x179));const _0x2ed986=_0x379e6a['map'](_0x222105=>{const _0x56aa69=_0x1eef55;return{[constants_1['FLOSUM_NAMESPACE']+'Name__c']:_0x222105[_0x56aa69(0x169)],[constants_1[_0x56aa69(0x159)]+_0x56aa69(0x17a)]:_0x222105['apiName'],[constants_1[_0x56aa69(0x159)]+_0x56aa69(0x16c)]:_0x222105[_0x56aa69(0x197)],[constants_1[_0x56aa69(0x159)]+_0x56aa69(0x11c)]:_0x222105[_0x56aa69(0x18f)],[constants_1['FLOSUM_NAMESPACE']+'Is_Retrieved__c']:_0x222105['isRetrieved'],[constants_1[_0x56aa69(0x159)]+_0x56aa69(0x174)]:_0x222105[_0x56aa69(0x17c)],[constants_1['FLOSUM_NAMESPACE']+_0x56aa69(0x139)]:_0x222105['attachmentId'],[constants_1['FLOSUM_NAMESPACE']+_0x56aa69(0x143)]:_0x222105[_0x56aa69(0x11d)]};}),_0x39e8a9=await salesforce_service_1['SalesforceService'][_0x1eef55(0x12b)](this[_0x1eef55(0x17d)],constants_1[_0x1eef55(0x159)]+_0x1eef55(0x11e),_0x2ed986);let _0x4e26f8=!![];_0x39e8a9['forEach']((_0x425b60,_0x65de0d)=>{const _0x1fd5b1=_0x1eef55;this[_0x1fd5b1(0x128)][_0x1fd5b1(0x12c)](_0x1fd5b1(0x14f)+_0x379e6a[_0x65de0d][_0x1fd5b1(0x17c)]+'.'+_0x379e6a[_0x65de0d][_0x1fd5b1(0x169)]);if(!_0x425b60[_0x1fd5b1(0x10d)]){_0x4e26f8=![];const _0x14da6f=new salesforce_dml_error_1[(_0x1fd5b1(0x10f))](_0x425b60[_0x1fd5b1(0x180)]);this[_0x1fd5b1(0x128)]['logError'](_0x14da6f);}});if(!_0x4e26f8)throw new Error(_0x1eef55(0x114));}async[a259_0x40a4dd(0x1a1)](_0x1d7e63){const _0x586983=a259_0x40a4dd,_0x12b906=this[_0x586983(0x150)](_0x1d7e63),_0x2986a5=await salesforce_service_1[_0x586983(0x189)][_0x586983(0x12b)](this['_connectionSalesforce'],SnapshotService['ATTACMENT'],_0x12b906),_0x216371=[];_0x2986a5[_0x586983(0x18a)]((_0x16828e,_0x2c15e0)=>{const _0x5ace6e=_0x586983;_0x16828e[_0x5ace6e(0x10d)]?(_0x1d7e63[_0x2c15e0][_0x5ace6e(0x108)]=_0x16828e['id'],_0x1d7e63[_0x2c15e0][_0x5ace6e(0x103)]=!![]):_0x216371[_0x5ace6e(0x193)](..._0x16828e['errors']);});if(_0x216371[_0x586983(0x183)])throw new salesforce_dml_error_1[(_0x586983(0x10f))](_0x216371);}[a259_0x40a4dd(0x150)](_0x46f23d){const _0x5c7f69=a259_0x40a4dd;return _0x46f23d[_0x5c7f69(0xfb)](_0x188e23=>({'ParentId':this[_0x5c7f69(0x124)],'Name':_0x188e23[_0x5c7f69(0x17c)],'ContentType':_0x5c7f69(0x167),'Body':_0x188e23[_0x5c7f69(0x10a)],'Description':_0x188e23[_0x5c7f69(0x17c)]}));}async['finishSnapshot'](_0x144370){const _0x31470e=a259_0x40a4dd,_0x4f5680={[constants_1['FLOSUM_NAMESPACE']+'Is_Completed__c']:!![],[constants_1[_0x31470e(0x159)]+_0x31470e(0x188)]:!_0x144370},_0x53bdf8={[constants_1[_0x31470e(0x159)]+_0x31470e(0x188)]:!_0x144370,[constants_1[_0x31470e(0x159)]+_0x31470e(0x165)]:_0x144370,[constants_1[_0x31470e(0x159)]+_0x31470e(0x109)]:_0x144370?status_enums_1[_0x31470e(0x14b)][_0x31470e(0x153)]:status_enums_1[_0x31470e(0x14b)][_0x31470e(0x133)],[constants_1[_0x31470e(0x159)]+'Job_Completed__c']:!![]};await this[_0x31470e(0x17d)][_0x31470e(0x17b)](flosum_constants_1[_0x31470e(0x12f)][_0x31470e(0x164)]+'/'+constants_1[_0x31470e(0x159)]+'Snapshot__c/'+this['_snapshotId'],_0x4f5680),await this[_0x31470e(0x17d)]['patch'](flosum_constants_1['FlosumConstants'][_0x31470e(0x164)]+'/'+constants_1[_0x31470e(0x159)]+'Metadata_Log__c/'+this[_0x31470e(0x171)],_0x53bdf8),this[_0x31470e(0x128)]['log'](_0x31470e(0x15e)+(_0x144370?_0x31470e(0x185):'with\x20error')+'.'),await this[_0x31470e(0x128)][_0x31470e(0x104)]();}}exports[a259_0x40a4dd(0x13a)]=SnapshotService,SnapshotService[a259_0x40a4dd(0x141)]='Snapshot',SnapshotService[a259_0x40a4dd(0x157)]=a259_0x40a4dd(0x19b);