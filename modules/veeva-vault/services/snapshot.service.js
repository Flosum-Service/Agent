const a313_0x2be841=a313_0x3349;(function(_0x127a68,_0x2fe818){const _0x21d7b4=a313_0x3349,_0x12929a=_0x127a68();while(!![]){try{const _0xbd322d=parseInt(_0x21d7b4(0x18f))/0x1*(-parseInt(_0x21d7b4(0x17f))/0x2)+parseInt(_0x21d7b4(0x182))/0x3+parseInt(_0x21d7b4(0x1a5))/0x4+-parseInt(_0x21d7b4(0x153))/0x5+-parseInt(_0x21d7b4(0x1c0))/0x6+parseInt(_0x21d7b4(0x1c6))/0x7+parseInt(_0x21d7b4(0x1ac))/0x8;if(_0xbd322d===_0x2fe818)break;else _0x12929a['push'](_0x12929a['shift']());}catch(_0x6d0b8d){_0x12929a['push'](_0x12929a['shift']());}}}(a313_0x361e,0x8d9ea));const a313_0x27ffd0=(function(){let _0x69023d=!![];return function(_0x423952,_0x5895fb){const _0x2df09a=_0x69023d?function(){const _0x442ae4=a313_0x3349;if(_0x5895fb){const _0x14d2de=_0x5895fb[_0x442ae4(0x148)](_0x423952,arguments);return _0x5895fb=null,_0x14d2de;}}:function(){};return _0x69023d=![],_0x2df09a;};}()),a313_0x5c379d=a313_0x27ffd0(this,function(){const _0x1e2aa7=a313_0x3349;return a313_0x5c379d[_0x1e2aa7(0x1b1)]()[_0x1e2aa7(0x1b3)](_0x1e2aa7(0x16b))[_0x1e2aa7(0x1b1)]()[_0x1e2aa7(0x18d)](a313_0x5c379d)[_0x1e2aa7(0x1b3)](_0x1e2aa7(0x16b));});a313_0x5c379d();'use strict';var __importDefault=this&&this[a313_0x2be841(0x18b)]||function(_0x1fef35){return _0x1fef35&&_0x1fef35['__esModule']?_0x1fef35:{'default':_0x1fef35};};function a313_0x3349(_0x1da410,_0x4da857){const _0x4b566b=a313_0x361e();return a313_0x3349=function(_0x5c379d,_0x27ffd0){_0x5c379d=_0x5c379d-0x12c;let _0x361ea9=_0x4b566b[_0x5c379d];return _0x361ea9;},a313_0x3349(_0x1da410,_0x4da857);}Object[a313_0x2be841(0x15d)](exports,a313_0x2be841(0x1d0),{'value':!![]}),exports['SnapshotService']=void 0x0;const jszip_1=__importDefault(require(a313_0x2be841(0x146))),flosum_constants_1=require(a313_0x2be841(0x196)),veeva_constants_1=require('../constants/veeva.constants'),veeva_service_1=require('./veeva.service'),veeva_component_dto_1=require(a313_0x2be841(0x175)),metadata_item_dto_1=require(a313_0x2be841(0x177)),utils_1=require(a313_0x2be841(0x198)),constants_1=require('../../../constants'),salesforce_service_1=require(a313_0x2be841(0x1b7)),status_enums_1=require(a313_0x2be841(0x149)),salesforce_dml_error_1=require(a313_0x2be841(0x14e)),veeva_error_1=require(a313_0x2be841(0x14f));class SnapshotService{constructor(_0x1bfb2c,_0x49d2a5,_0x32cbda,_0x3abd2c){const _0x745fcb=a313_0x2be841;this[_0x745fcb(0x12e)]=_0x49d2a5,this['_connectionVeeva']=_0x32cbda,this[_0x745fcb(0x1a4)]=_0x3abd2c,this[_0x745fcb(0x161)]=_0x1bfb2c['snapshotId'],this['_metadataLogId']=_0x1bfb2c[_0x745fcb(0x1c7)],this[_0x745fcb(0x12d)]=_0x1bfb2c['attachmentLogId'],this[_0x745fcb(0x139)]=_0x1bfb2c[_0x745fcb(0x194)],this[_0x745fcb(0x18c)]=_0x1bfb2c[_0x745fcb(0x1a3)],this[_0x745fcb(0x13f)]=_0x1bfb2c['selectedComponentMap'];}async['execute'](){const _0x35709a=a313_0x2be841;try{this[_0x35709a(0x1a4)][_0x35709a(0x1cb)]('Snapshot\x20started.');const _0x52146a=Array[_0x35709a(0x1b6)](Object['values'](this['_selectedComponentMap']))['length']?await this['getComponentsMetadataByTypeAndName']():await this[_0x35709a(0x16f)]();await this[_0x35709a(0x1a4)][_0x35709a(0x16d)]();const _0x96c266=await this[_0x35709a(0x14c)](Math[_0x35709a(0x166)](_0x52146a[_0x35709a(0x17a)]/veeva_constants_1[_0x35709a(0x174)]['MAXIMUM_SIZE_OF_PACKAGE'])),_0x18afe3=await this[_0x35709a(0x136)](_0x52146a,_0x96c266);await this['_logger']['updateLog']();const _0x470e58=await this[_0x35709a(0x1a0)](_0x96c266),_0x2d69b5=await this[_0x35709a(0x1b4)](_0x52146a,_0x470e58);await this[_0x35709a(0x19c)](_0x2d69b5),await this[_0x35709a(0x1a4)]['updateLog'](),await this[_0x35709a(0x13a)](_0x18afe3),await this[_0x35709a(0x184)](_0x96c266),await this[_0x35709a(0x1bb)](!![]);}catch(_0x304a0e){this[_0x35709a(0x1a4)][_0x35709a(0x12f)](_0x304a0e),await this[_0x35709a(0x1bb)](![])[_0x35709a(0x1a2)](_0x2418db=>this[_0x35709a(0x170)]['error'](_0x2418db));}}async['getComponentsMetadataByTypes'](){const _0xb8e363=a313_0x2be841;this['_logger']['log']('Retrieve\x20collection\x20metadata\x20of\x20components');const _0x3b7396=[],_0x4a4894=_0xb8e363(0x1a7)+this[_0xb8e363(0x18c)][_0xb8e363(0x145)](_0xb8e363(0x132))+'\x27)',_0x52f52d=veeva_constants_1[_0xb8e363(0x174)][_0xb8e363(0x155)]+_0x4a4894,_0x2d8335=await veeva_service_1['VeevaService'][_0xb8e363(0x189)](_0x52f52d,this[_0xb8e363(0x144)]);for(const _0x268a24 of _0x2d8335){const _0x486e82=new veeva_component_dto_1[(_0xb8e363(0x1b0))](_0x268a24),{name:_0x190d9f,type:_0x401232,status:_0x2b59cb}=_0x486e82;_0x2b59cb[_0xb8e363(0x1ce)](_0xb8e363(0x19e))?this[_0xb8e363(0x1a4)]['log']('Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20'+_0x401232+'.'+_0x190d9f):_0x3b7396[_0xb8e363(0x187)](_0x486e82);}return _0x3b7396;}async[a313_0x2be841(0x1cc)](){const _0x2a817f=a313_0x2be841;this['_logger']['log'](_0x2a817f(0x1a1));const _0x20404b=[];for(const _0x394262 in this[_0x2a817f(0x13f)]){const _0x2ad700=(0x0,utils_1['chunkArray'])(this[_0x2a817f(0x13f)][_0x394262],veeva_constants_1[_0x2a817f(0x174)][_0x2a817f(0x13b)]),_0x372547=_0x2ad700[_0x2a817f(0x150)](_0x114902=>veeva_constants_1[_0x2a817f(0x174)][_0x2a817f(0x155)]+(_0x2a817f(0x1b5)+_0x394262+_0x2a817f(0x17e)+_0x114902['join'](_0x2a817f(0x132))+'\x27)'));_0x20404b[_0x2a817f(0x187)](..._0x372547);}const _0x49aed5=[],_0x3bee15=await veeva_service_1[_0x2a817f(0x16e)][_0x2a817f(0x199)](_0x20404b,this[_0x2a817f(0x144)]);for(const _0x33b50a of _0x3bee15){const _0x4af3d5=new veeva_component_dto_1[(_0x2a817f(0x1b0))](_0x33b50a),{name:_0x2f244,type:_0x56e86f,status:_0x4d0949}=_0x4af3d5,_0x2cb281=_0x4d0949[_0x2a817f(0x1ce)]('inactive__v');_0x2cb281?this['_logger'][_0x2a817f(0x1cb)](_0x2a817f(0x1a8)+_0x56e86f+'.'+_0x2f244):_0x49aed5[_0x2a817f(0x187)](_0x4af3d5);}return _0x49aed5;}async['createOutboundPackages'](_0x4879da){const _0x2502a8=a313_0x2be841;this[_0x2502a8(0x1a4)][_0x2502a8(0x1cb)](_0x2502a8(0x164));const _0x28e869=veeva_constants_1['VeevaConstants'][_0x2502a8(0x1a6)]+_0x2502a8(0x15a),_0x414ea7=new Array(_0x4879da)[_0x2502a8(0x180)]({'summary__v':SnapshotService[_0x2502a8(0x1af)],'object_type__v.api__name__v':_0x2502a8(0x12c)});return await veeva_service_1[_0x2502a8(0x16e)][_0x2502a8(0x1ad)](_0x28e869,this[_0x2502a8(0x144)],_0x414ea7,this[_0x2502a8(0x1a4)]);}async['createPackageComponents'](_0x51686a,_0x8ff100){const _0x3b4131=a313_0x2be841;this[_0x3b4131(0x1a4)][_0x3b4131(0x1cb)](_0x3b4131(0x193));const _0x4ab87a=veeva_constants_1['VeevaConstants'][_0x3b4131(0x1a6)]+_0x3b4131(0x17d),_0x2400b9=_0x51686a['map']((_0x58fbb0,_0x44bbe2)=>({'vault_component__v':_0x58fbb0['id'],'outbound_package__v':_0x8ff100[Math[_0x3b4131(0x166)]((_0x44bbe2+0x1)/veeva_constants_1[_0x3b4131(0x174)][_0x3b4131(0x1c4)])-0x1]}));return await veeva_service_1[_0x3b4131(0x16e)][_0x3b4131(0x1ad)](_0x4ab87a,this[_0x3b4131(0x144)],_0x2400b9,this['_logger']);}async['exportOutboundPackage'](_0x57daf6){const _0x5ee357=a313_0x2be841,_0x162fed=await this['getPackageNames'](_0x57daf6),_0x59ddd4=await this[_0x5ee357(0x186)](Array['from'](_0x162fed[_0x5ee357(0x168)]())),_0x18aa36=await this[_0x5ee357(0x159)](_0x59ddd4);return await this['retrieveVPKList'](_0x18aa36);}async[a313_0x2be841(0x131)](_0x5087c4){const _0x2f299f=a313_0x2be841;this['_logger'][_0x2f299f(0x1cb)](_0x2f299f(0x169));const _0x516966='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27'+_0x5087c4[_0x2f299f(0x145)](_0x2f299f(0x132))+'\x27)',_0x11d418=veeva_constants_1[_0x2f299f(0x174)]['ENDPOINT_VQL']+_0x516966,_0x7d3fc8=await veeva_service_1[_0x2f299f(0x16e)][_0x2f299f(0x189)](_0x11d418,this[_0x2f299f(0x144)]);return _0x7d3fc8[_0x2f299f(0x19d)]((_0x2cb7af,_0xc87b91)=>_0x2cb7af[_0x2f299f(0x181)](_0xc87b91['id'],_0xc87b91[_0x2f299f(0x162)]),new Map());}async['createExportOutboundPackages'](_0x346211){const _0x595c4b=a313_0x2be841;this[_0x595c4b(0x1a4)][_0x595c4b(0x1cb)](_0x595c4b(0x152));const _0x340e88=[],_0x1ff61a=_0x346211[_0x595c4b(0x150)](_0x25504d=>{const _0xb422dd=_0x595c4b;return this[_0xb422dd(0x144)]['post'](veeva_constants_1[_0xb422dd(0x174)]['ENDPOINT_EXPORT_IMPORT_PACKAGE'],encodeURI(_0xb422dd(0x191))+'='+encodeURI(_0x25504d),{'headers':{'Content-Type':_0xb422dd(0x1cd)}});}),_0xd86900=await Promise[_0x595c4b(0x1c9)](_0x1ff61a);for(const {data:_0x1b0314}of _0xd86900){if(_0x1b0314[_0x595c4b(0x137)]===status_enums_1['VeevaResponseStatus'][_0x595c4b(0x190)]){const {url:_0x4ca558}=_0x1b0314;_0x340e88['push'](_0x4ca558);}else throw new veeva_error_1[(_0x595c4b(0x185))](_0x1b0314[_0x595c4b(0x14d)]);}return _0x340e88;}async[a313_0x2be841(0x159)](_0x16c558){const _0x3c1312=a313_0x2be841;this[_0x3c1312(0x1a4)][_0x3c1312(0x1cb)](_0x3c1312(0x172));const _0xfc9c13=[],_0x17faa5=await veeva_service_1[_0x3c1312(0x16e)]['getJobResult'](_0x16c558,this[_0x3c1312(0x144)],this['_logger']);for(const _0x306532 of _0x17faa5){const _0x3c3af0=_0x306532['links'][_0x3c1312(0x140)](_0x1b3f79=>_0x1b3f79[_0x3c1312(0x1ae)]===_0x3c1312(0x179))[_0x3c1312(0x150)](_0x521189=>_0x521189[_0x3c1312(0x19b)]);_0xfc9c13[_0x3c1312(0x187)](..._0x3c3af0);}return _0xfc9c13;}async[a313_0x2be841(0x173)](_0x2d56eb){const _0x2e95fb=a313_0x2be841;var _0x3dfb47;const _0x1b7ef8=[];this['_logger'][_0x2e95fb(0x1cb)](_0x2e95fb(0x188));for(const _0x3fa1d7 of _0x2d56eb){const {data:_0x3e05d8,headers:_0xfb1a93}=await this['_connectionVeeva']['get'](_0x3fa1d7,{'responseType':'arraybuffer'}),_0x12bad2=(_0x3dfb47=_0xfb1a93[_0x2e95fb(0x1b2)])===null||_0x3dfb47===void 0x0?void 0x0:_0x3dfb47[_0x2e95fb(0x1ce)]('application/json');if(!_0x12bad2){const _0x153ede=_0x3e05d8,_0x253bca=new jszip_1[(_0x2e95fb(0x1a9))]();await _0x253bca[_0x2e95fb(0x142)](_0x153ede),_0x1b7ef8['push'](_0x253bca);}else{const _0x4c70b8=JSON[_0x2e95fb(0x1bf)](_0x3e05d8);throw new veeva_error_1[(_0x2e95fb(0x185))](_0x4c70b8[_0x2e95fb(0x14d)]);}}return _0x1b7ef8;}async['createMetadataItemListWithBody'](_0x4ef7a8,_0x2decb7){const _0x570a55=a313_0x2be841;var _0xde5f98;this[_0x570a55(0x1a4)][_0x570a55(0x1cb)](_0x570a55(0x134));const _0x462ed8=this['formMetadataItemDtoList'](_0x4ef7a8),_0x521582=_0x462ed8['reduce']((_0x535872,_0x2e684f)=>_0x535872[_0x570a55(0x181)](_0x2e684f[_0x570a55(0x1ca)],_0x2e684f),new Map());for(const _0x2893ae of _0x2decb7){for(const _0x3cbfbb in _0x2893ae[_0x570a55(0x19a)]){const _0x3bdca9=_0x3cbfbb[_0x570a55(0x158)]('/')['at'](-0x1);if(_0x521582[_0x570a55(0x16a)](_0x3bdca9)){const _0x21af4c=await((_0xde5f98=_0x2893ae[_0x570a55(0x1ab)](_0x3cbfbb))===null||_0xde5f98===void 0x0?void 0x0:_0xde5f98[_0x570a55(0x130)](_0x570a55(0x17c)));if(_0x21af4c){const _0x3879cd=new jszip_1[(_0x570a55(0x1a9))]();_0x3879cd[_0x570a55(0x1ab)](_0x3bdca9,_0x21af4c),_0x521582[_0x570a55(0x154)](_0x3bdca9)[_0x570a55(0x18e)]=await _0x3879cd['generateAsync']({'type':_0x570a55(0x1bd)});}}}}return _0x462ed8[_0x570a55(0x140)](_0x555eb9=>!_0x555eb9[_0x570a55(0x18e)])[_0x570a55(0x19f)](_0x5654db=>{const _0x1d1e82=_0x570a55;this['_logger'][_0x1d1e82(0x1cb)]('Cannot\x20retrieve\x20'+_0x5654db[_0x1d1e82(0x1be)]+'.'+_0x5654db[_0x1d1e82(0x1b8)]+_0x1d1e82(0x147));}),_0x462ed8[_0x570a55(0x140)](_0x3e563f=>_0x3e563f[_0x570a55(0x18e)]);}[a313_0x2be841(0x1c3)](_0x4cd961){const _0x2fa7cd=a313_0x2be841;return _0x4cd961[_0x2fa7cd(0x150)](_0x322b11=>{const _0xdec332=_0x2fa7cd,_0x2e22ce=new metadata_item_dto_1[(_0xdec332(0x176))]();return _0x2e22ce[_0xdec332(0x1b8)]=_0x322b11[_0xdec332(0x1b8)],_0x2e22ce['apiName']=_0x322b11[_0xdec332(0x1b8)],_0x2e22ce[_0xdec332(0x151)]=this[_0xdec332(0x161)],_0x2e22ce[_0xdec332(0x1ca)]=_0x322b11[_0xdec332(0x1cf)]+'.'+_0x322b11[_0xdec332(0x1b8)]+_0xdec332(0x171),_0x2e22ce[_0xdec332(0x1be)]=_0x322b11[_0xdec332(0x1cf)],_0x2e22ce[_0xdec332(0x1c2)]=_0x322b11['lastModifiedDate'],_0x2e22ce[_0xdec332(0x143)]=![],_0x2e22ce;});}async['deletePackageComponents'](_0x3097f3){const _0x4a0f62=a313_0x2be841;this[_0x4a0f62(0x1a4)][_0x4a0f62(0x1cb)](_0x4a0f62(0x15c));const _0x47ae4f=veeva_constants_1[_0x4a0f62(0x174)]['ENDPOINT_CREATE_RECORDS']+_0x4a0f62(0x17d);await veeva_service_1[_0x4a0f62(0x16e)][_0x4a0f62(0x1ba)](_0x47ae4f,this['_connectionVeeva'],_0x3097f3,this[_0x4a0f62(0x1a4)]);}async[a313_0x2be841(0x184)](_0x365a2b){const _0x8660df=a313_0x2be841;this[_0x8660df(0x1a4)][_0x8660df(0x1cb)](_0x8660df(0x1bc));const _0x53db13=veeva_constants_1['VeevaConstants'][_0x8660df(0x1a6)]+_0x8660df(0x15a);await veeva_service_1[_0x8660df(0x16e)][_0x8660df(0x1ba)](_0x53db13,this[_0x8660df(0x144)],_0x365a2b,this[_0x8660df(0x1a4)]);}async[a313_0x2be841(0x19c)](_0x39dc0f){const _0x15372e=a313_0x2be841;this[_0x15372e(0x1a4)][_0x15372e(0x1cb)]('Saving\x20Attachments.'),await this[_0x15372e(0x18a)](_0x39dc0f),this['_logger']['log']('Saving\x20'+_0x39dc0f[_0x15372e(0x17a)]+_0x15372e(0x15e));const _0xb81c3=_0x39dc0f[_0x15372e(0x150)](_0x79037b=>{const _0x37143a=_0x15372e;return{[constants_1[_0x37143a(0x197)]+'Name__c']:_0x79037b[_0x37143a(0x1b8)],[constants_1[_0x37143a(0x197)]+_0x37143a(0x16c)]:_0x79037b[_0x37143a(0x17b)],[constants_1[_0x37143a(0x197)]+'Snapshot__c']:_0x79037b[_0x37143a(0x151)],[constants_1[_0x37143a(0x197)]+_0x37143a(0x167)]:_0x79037b[_0x37143a(0x1ca)],[constants_1['FLOSUM_NAMESPACE']+'Is_Retrieved__c']:_0x79037b[_0x37143a(0x143)],[constants_1[_0x37143a(0x197)]+'Veeva_Component_Type__c']:_0x79037b[_0x37143a(0x1be)],[constants_1[_0x37143a(0x197)]+_0x37143a(0x157)]:_0x79037b['attachmentId'],[constants_1[_0x37143a(0x197)]+_0x37143a(0x138)]:_0x79037b[_0x37143a(0x1c2)]};}),_0x248c94=await salesforce_service_1[_0x15372e(0x1c5)][_0x15372e(0x133)](this[_0x15372e(0x12e)],constants_1[_0x15372e(0x197)]+_0x15372e(0x13e),_0xb81c3);let _0x3cea37=!![];_0x248c94[_0x15372e(0x19f)]((_0x35e981,_0x35b4af)=>{const _0x506421=_0x15372e;this[_0x506421(0x1a4)]['log'](_0x506421(0x141)+_0x39dc0f[_0x35b4af]['veevaComponentType']+'.'+_0x39dc0f[_0x35b4af][_0x506421(0x1b8)]);if(!_0x35e981[_0x506421(0x135)]){_0x3cea37=![];const _0x1c67ec=new salesforce_dml_error_1[(_0x506421(0x13d))](_0x35e981[_0x506421(0x14d)]);this[_0x506421(0x1a4)][_0x506421(0x12f)](_0x1c67ec);}});if(!_0x3cea37)throw new Error(_0x15372e(0x192));}async[a313_0x2be841(0x18a)](_0x145460){const _0x2232d4=a313_0x2be841,_0x24f112=this[_0x2232d4(0x15f)](_0x145460),_0x19386a=await salesforce_service_1['SalesforceService'][_0x2232d4(0x133)](this['_connectionSalesforce'],SnapshotService[_0x2232d4(0x165)],_0x24f112),_0x2f761f=[];_0x19386a[_0x2232d4(0x19f)]((_0x99853f,_0x5c687f)=>{const _0x3b260b=_0x2232d4;_0x99853f['success']?(_0x145460[_0x5c687f][_0x3b260b(0x183)]=_0x99853f['id'],_0x145460[_0x5c687f][_0x3b260b(0x143)]=!![]):_0x2f761f[_0x3b260b(0x187)](..._0x99853f[_0x3b260b(0x14d)]);});if(_0x2f761f[_0x2232d4(0x17a)])throw new salesforce_dml_error_1[(_0x2232d4(0x13d))](_0x2f761f);}[a313_0x2be841(0x15f)](_0x334151){const _0x232ce5=a313_0x2be841;return _0x334151[_0x232ce5(0x150)](_0x21a563=>({'ParentId':this[_0x232ce5(0x161)],'Name':_0x21a563['veevaComponentType'],'ContentType':_0x232ce5(0x13c),'Body':_0x21a563[_0x232ce5(0x18e)],'Description':_0x21a563[_0x232ce5(0x1be)]}));}async[a313_0x2be841(0x1bb)](_0x1adfb0){const _0x51119a=a313_0x2be841,_0x13deae={[constants_1['FLOSUM_NAMESPACE']+_0x51119a(0x195)]:!![],[constants_1[_0x51119a(0x197)]+'Is_Error__c']:!_0x1adfb0},_0x2662c5={[constants_1[_0x51119a(0x197)]+_0x51119a(0x160)]:!_0x1adfb0,[constants_1[_0x51119a(0x197)]+_0x51119a(0x1c8)]:_0x1adfb0,[constants_1['FLOSUM_NAMESPACE']+_0x51119a(0x1c1)]:_0x1adfb0?status_enums_1[_0x51119a(0x14b)][_0x51119a(0x1b9)]:status_enums_1[_0x51119a(0x14b)][_0x51119a(0x163)],[constants_1[_0x51119a(0x197)]+'Job_Completed__c']:!![]};await this[_0x51119a(0x12e)]['patch'](flosum_constants_1[_0x51119a(0x1aa)]['ENDPOINT_UPSERT_RECORD']+'/'+constants_1[_0x51119a(0x197)]+'Snapshot__c/'+this[_0x51119a(0x161)],_0x13deae),await this['_connectionSalesforce']['patch'](flosum_constants_1[_0x51119a(0x1aa)]['ENDPOINT_UPSERT_RECORD']+'/'+constants_1[_0x51119a(0x197)]+'Metadata_Log__c/'+this[_0x51119a(0x15b)],_0x2662c5),this[_0x51119a(0x1a4)][_0x51119a(0x1cb)](_0x51119a(0x178)+(_0x1adfb0?_0x51119a(0x156):_0x51119a(0x14a))+'.'),await this[_0x51119a(0x1a4)]['updateLog']();}}exports['SnapshotService']=SnapshotService,SnapshotService[a313_0x2be841(0x1af)]='Snapshot',SnapshotService[a313_0x2be841(0x165)]='Attachment';function a313_0x361e(){const _0x24c9a0=['formMetadataItemDtoList','MAXIMUM_SIZE_OF_PACKAGE','SalesforceService','1939042JDUAor','metadataLogId','Succeed__c','all','label','log','getComponentsMetadataByTypeAndName','application/x-www-form-urlencoded','includes','type','__esModule','migration__sys','_attachmentLogId','_connectionSalesforce','logError','async','getPackageNames','\x27,\x27','insertMultipleRecords','Unpack\x20zip\x20and\x20create\x20metadata\x20items.','success','createPackageComponents','responseStatus','Last_Modified_Date__c','_timeZone','deletePackageComponents','BUILD_WHERE_BY_NAME_LIMIT','application/zip','SalesforceDmlError','Metadata_Item__c','_selectedComponentMap','filter','Saving\x20','loadAsync','isRetrieved','_connectionVeeva','join','jszip','\x20from\x20outbound\x20package','apply','../enums/status.enums','with\x20error','MetadataLogStatus','createOutboundPackages','errors','../classes/errors/salesforce-dml-error','../classes/errors/veeva-error','map','snapshotId','Create\x20Export\x20outbound\x20packages.','4690085bHeFEe','get','ENDPOINT_VQL','successfully','Attachment_ID__c','split','getEndpointArtifactList','outbound_package__v','_metadataLogId','Removing\x20components\x20from\x20outbound\x20packages.','defineProperty','\x20Metadata\x20Items','formAttachments','Is_Error__c','_snapshotId','name__v','EXCEPTION','Creating\x20outbound\x20packages','ATTACMENT','ceil','Label__c','values','Getting\x20names\x20of\x20outbound\x20packages','has','(((.+)+)+)+$','API_Name__c','updateLog','VeevaService','getComponentsMetadataByTypes','_systemLogger','.mdl','Retrieve\x20Jobs\x20Status','retrieveVPKList','VeevaConstants','../dtos/veeva-component.dto','MetadataItemDto','../dtos/metadata-item.dto','Snapshot\x20completed\x20','artifacts','length','apiName','string','package_component__v','\x27\x20AND\x20component_name__v\x20CONTAINS\x20(\x27','2BbOlKl','fill','set','3099291VmhkfW','attachmentId','deleteOutboundPackages','VeevaError','createExportOutboundPackages','push','Retrieve\x20Outbound\x20Package\x20zip\x20list','executeVQL','saveAttachments','__importDefault','_selectedMetaTypes','constructor','body','416931GlOHLs','SUCCESS','packageName','Cannot\x20Save\x20Metadata\x20Items','Adding\x20components\x20to\x20outbound\x20package','timeZone','Is_Completed__c','../constants/flosum.constants','FLOSUM_NAMESPACE','../../shared/utils','executeManyVQL','files','href','saveComponentsInSalesforce','reduce','inactive__v','forEach','exportOutboundPackage','Retrieve\x20collection\x20metadata\x20of\x20components\x20by\x20type\x20and\x20names','catch','selectedMetaTypes','_logger','1162996qqazvg','ENDPOINT_CREATE_RECORDS','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20CONTAINS\x20(\x27','Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20','default','FlosumConstants','file','6081712QDQvKw','createVeevaObjectRecords','rel','OUTBOUND_PACKAGE_NAME','VeevaComponentDto','toString','content-type','search','createMetadataItemListWithBody','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20=\x27','from','./salesforce.service','name','COMPLETED','deleteVeevaObjectRecords','finishSnapshot','Deleting\x20outbound\x20packages.','base64','veevaComponentType','parse','2556264USjtVD','Status__c','lastModifiedDate'];a313_0x361e=function(){return _0x24c9a0;};return a313_0x361e();}