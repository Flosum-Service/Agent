function a312_0x1f96(){const _0x1dd4b0=['includes','Saving\x20','default','VeevaConstants','label','_systemLogger','async','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20CONTAINS\x20(\x27','createExportOutboundPackages','loadAsync','SalesforceService','catch','Cannot\x20Save\x20Metadata\x20Items','fill','Is_Completed__c','formMetadataItemDtoList','artifacts','getComponentsMetadataByTypeAndName','get','apiName','Last_Modified_Date__c','Retrieve\x20Outbound\x20Package\x20zip\x20list','SnapshotService','createMetadataItemListWithBody','saveComponentsInSalesforce','215202JFDBuf','Attachment_ID__c','Name__c','timeZone','2095751XQJozL','API_Name__c','errors','Saving\x20Attachments.','logError','49500LparZK','\x27\x20AND\x20component_name__v\x20CONTAINS\x20(\x27','VeevaService','veevaComponentType','attachmentLogId','executeManyVQL','__importDefault','../../../constants','createPackageComponents','application/zip','exportOutboundPackage','rel','chunkArray','join','Snapshot\x20started.','outbound_package__v','../classes/errors/salesforce-dml-error','log','_snapshotId','selectedMetaTypes','44XEagQB','lastModifiedDate','ceil','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27','Label__c','SUCCESS','../dtos/veeva-component.dto','_metadataLogId','isRetrieved','body','type','VeevaError','values','FlosumConstants','_timeZone','string','toString','length','Is_Error__c','file','successfully','./salesforce.service','\x27,\x27','search','Unpack\x20zip\x20and\x20create\x20metadata\x20items.','constructor','Deleting\x20outbound\x20packages.','createVeevaObjectRecords','success','Creating\x20outbound\x20packages','MAXIMUM_SIZE_OF_PACKAGE','has','ENDPOINT_CREATE_RECORDS','_connectionVeeva','finishSnapshot','_connectionSalesforce','jszip','ATTACMENT','Getting\x20names\x20of\x20outbound\x20packages','deleteOutboundPackages','927835ywrHvC','OUTBOUND_PACKAGE_NAME','Snapshot__c','snapshotId','packageName','Retrieve\x20Jobs\x20Status','selectedComponentMap','1202166ORNTQw','deleteVeevaObjectRecords','application/x-www-form-urlencoded','inactive__v','getJobResult','../../shared/utils','Retrieve\x20collection\x20metadata\x20of\x20components\x20by\x20type\x20and\x20names','from','_logger','migration__sys','Snapshot\x20completed\x20','getComponentsMetadataByTypes','package_component__v','formAttachments','forEach','FLOSUM_NAMESPACE','Is_Retrieved__c','defineProperty','reduce','updateLog','MetadataItemDto','post','MetadataLogStatus','saveAttachments','Metadata_Log__c/','Cannot\x20retrieve\x20','Veeva_Component_Type__c','content-type','error','ENDPOINT_UPSERT_RECORD','push','Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20','596064kSVaEd','set','__esModule','generateAsync','../dtos/metadata-item.dto','createOutboundPackages','COMPLETED','deletePackageComponents','ENDPOINT_VQL','../constants/flosum.constants','attachmentId','getEndpointArtifactList','apply','split','retrieveVPKList','filter','metadataLogId','287713EOKuZA','_selectedComponentMap','Job_Completed__c','name','map','getPackageNames','_selectedMetaTypes','responseStatus','insertMultipleRecords'];a312_0x1f96=function(){return _0x1dd4b0;};return a312_0x1f96();}const a312_0x4c9bcd=a312_0x5291;(function(_0x2cd6c2,_0x2f93c3){const _0xa66d00=a312_0x5291,_0x4ae487=_0x2cd6c2();while(!![]){try{const _0x2b610e=parseInt(_0xa66d00(0x174))/0x1+parseInt(_0xa66d00(0xf7))/0x2+parseInt(_0xa66d00(0x100))/0x3*(parseInt(_0xa66d00(0x114))/0x4)+parseInt(_0xa66d00(0x13c))/0x5+-parseInt(_0xa66d00(0x143))/0x6+-parseInt(_0xa66d00(0xfb))/0x7+-parseInt(_0xa66d00(0x163))/0x8;if(_0x2b610e===_0x2f93c3)break;else _0x4ae487['push'](_0x4ae487['shift']());}catch(_0xd8f870){_0x4ae487['push'](_0x4ae487['shift']());}}}(a312_0x1f96,0x2ded7));const a312_0x39f204=(function(){let _0x27ed0e=!![];return function(_0x1ef96d,_0x189025){const _0x478441=_0x27ed0e?function(){const _0x511a29=a312_0x5291;if(_0x189025){const _0x35d41f=_0x189025[_0x511a29(0x16f)](_0x1ef96d,arguments);return _0x189025=null,_0x35d41f;}}:function(){};return _0x27ed0e=![],_0x478441;};}()),a312_0x2537ee=a312_0x39f204(this,function(){const _0x911d0e=a312_0x5291;return a312_0x2537ee[_0x911d0e(0x124)]()[_0x911d0e(0x12b)]('(((.+)+)+)+$')['toString']()[_0x911d0e(0x12d)](a312_0x2537ee)[_0x911d0e(0x12b)]('(((.+)+)+)+$');});function a312_0x5291(_0x3c4d0f,_0x4a6211){const _0x2880b1=a312_0x1f96();return a312_0x5291=function(_0x2537ee,_0x39f204){_0x2537ee=_0x2537ee-0xee;let _0x1f9646=_0x2880b1[_0x2537ee];return _0x1f9646;},a312_0x5291(_0x3c4d0f,_0x4a6211);}a312_0x2537ee();'use strict';var __importDefault=this&&this[a312_0x4c9bcd(0x106)]||function(_0x41aa50){const _0x152db2=a312_0x4c9bcd;return _0x41aa50&&_0x41aa50[_0x152db2(0x165)]?_0x41aa50:{'default':_0x41aa50};};Object[a312_0x4c9bcd(0x154)](exports,'__esModule',{'value':!![]}),exports[a312_0x4c9bcd(0xf4)]=void 0x0;const jszip_1=__importDefault(require(a312_0x4c9bcd(0x138))),flosum_constants_1=require(a312_0x4c9bcd(0x16c)),veeva_constants_1=require('../constants/veeva.constants'),veeva_service_1=require('./veeva.service'),veeva_component_dto_1=require(a312_0x4c9bcd(0x11a)),metadata_item_dto_1=require(a312_0x4c9bcd(0x167)),utils_1=require(a312_0x4c9bcd(0x148)),constants_1=require(a312_0x4c9bcd(0x107)),salesforce_service_1=require(a312_0x4c9bcd(0x129)),status_enums_1=require('../enums/status.enums'),salesforce_dml_error_1=require(a312_0x4c9bcd(0x110)),veeva_error_1=require('../classes/errors/veeva-error');class SnapshotService{constructor(_0x300abc,_0x5430c2,_0x3a7944,_0x412894){const _0x39e342=a312_0x4c9bcd;this[_0x39e342(0x137)]=_0x5430c2,this[_0x39e342(0x135)]=_0x3a7944,this[_0x39e342(0x14b)]=_0x412894,this['_snapshotId']=_0x300abc['snapshotId'],this[_0x39e342(0x11b)]=_0x300abc[_0x39e342(0x173)],this['_attachmentLogId']=_0x300abc[_0x39e342(0x104)],this[_0x39e342(0x122)]=_0x300abc[_0x39e342(0xfa)],this[_0x39e342(0x17a)]=_0x300abc[_0x39e342(0x113)],this[_0x39e342(0x175)]=_0x300abc[_0x39e342(0x142)];}async['execute'](){const _0x4580e0=a312_0x4c9bcd;try{this['_logger']['log'](_0x4580e0(0x10e));const _0x54cf72=Array[_0x4580e0(0x14a)](Object[_0x4580e0(0x120)](this['_selectedComponentMap']))[_0x4580e0(0x125)]?await this[_0x4580e0(0xef)]():await this['getComponentsMetadataByTypes']();await this[_0x4580e0(0x14b)][_0x4580e0(0x156)]();const _0x2f155a=await this[_0x4580e0(0x168)](Math[_0x4580e0(0x116)](_0x54cf72['length']/veeva_constants_1['VeevaConstants'][_0x4580e0(0x132)])),_0x32c360=await this[_0x4580e0(0x108)](_0x54cf72,_0x2f155a);await this[_0x4580e0(0x14b)]['updateLog']();const _0x2fa6c9=await this[_0x4580e0(0x10a)](_0x2f155a),_0x189e7e=await this[_0x4580e0(0xf5)](_0x54cf72,_0x2fa6c9);await this[_0x4580e0(0xf6)](_0x189e7e),await this['_logger'][_0x4580e0(0x156)](),await this['deletePackageComponents'](_0x32c360),await this['deleteOutboundPackages'](_0x2f155a),await this[_0x4580e0(0x136)](!![]);}catch(_0xee03d3){this[_0x4580e0(0x14b)][_0x4580e0(0xff)](_0xee03d3),await this[_0x4580e0(0x136)](![])[_0x4580e0(0x188)](_0x1b3b73=>this[_0x4580e0(0x182)][_0x4580e0(0x15f)](_0x1b3b73));}}async[a312_0x4c9bcd(0x14e)](){const _0x1a035b=a312_0x4c9bcd;this[_0x1a035b(0x14b)][_0x1a035b(0x111)]('Retrieve\x20collection\x20metadata\x20of\x20components');const _0x13224a=[],_0x1d3f60=_0x1a035b(0x184)+this[_0x1a035b(0x17a)][_0x1a035b(0x10d)](_0x1a035b(0x12a))+'\x27)',_0x5bb0c1=veeva_constants_1[_0x1a035b(0x180)][_0x1a035b(0x16b)]+_0x1d3f60,_0x240b85=await veeva_service_1[_0x1a035b(0x102)]['executeVQL'](_0x5bb0c1,this[_0x1a035b(0x135)]);for(const _0x3512f3 of _0x240b85){const _0x237bb6=new veeva_component_dto_1['VeevaComponentDto'](_0x3512f3),{name:_0x91f1d3,type:_0x8afbed,status:_0x1eb51e}=_0x237bb6;_0x1eb51e['includes'](_0x1a035b(0x146))?this[_0x1a035b(0x14b)][_0x1a035b(0x111)](_0x1a035b(0x162)+_0x8afbed+'.'+_0x91f1d3):_0x13224a[_0x1a035b(0x161)](_0x237bb6);}return _0x13224a;}async[a312_0x4c9bcd(0xef)](){const _0x388593=a312_0x4c9bcd;this[_0x388593(0x14b)][_0x388593(0x111)](_0x388593(0x149));const _0x2c2bad=[];for(const _0x17fbbd in this[_0x388593(0x175)]){const _0x2cbdf4=(0x0,utils_1[_0x388593(0x10c)])(this['_selectedComponentMap'][_0x17fbbd],veeva_constants_1['VeevaConstants']['BUILD_WHERE_BY_NAME_LIMIT']),_0x1717f2=_0x2cbdf4['map'](_0x5e43e4=>veeva_constants_1['VeevaConstants'][_0x388593(0x16b)]+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20=\x27'+_0x17fbbd+_0x388593(0x101)+_0x5e43e4[_0x388593(0x10d)](_0x388593(0x12a))+'\x27)'));_0x2c2bad['push'](..._0x1717f2);}const _0xecea1f=[],_0x2fe355=await veeva_service_1['VeevaService'][_0x388593(0x105)](_0x2c2bad,this[_0x388593(0x135)]);for(const _0xd8cae0 of _0x2fe355){const _0x25aead=new veeva_component_dto_1['VeevaComponentDto'](_0xd8cae0),{name:_0x54bac8,type:_0x336fe8,status:_0x3f0eb7}=_0x25aead,_0x42855c=_0x3f0eb7[_0x388593(0x17d)]('inactive__v');_0x42855c?this[_0x388593(0x14b)]['log'](_0x388593(0x162)+_0x336fe8+'.'+_0x54bac8):_0xecea1f[_0x388593(0x161)](_0x25aead);}return _0xecea1f;}async[a312_0x4c9bcd(0x168)](_0x1d2510){const _0x4815a2=a312_0x4c9bcd;this[_0x4815a2(0x14b)][_0x4815a2(0x111)](_0x4815a2(0x131));const _0x4e4e4f=veeva_constants_1[_0x4815a2(0x180)][_0x4815a2(0x134)]+'outbound_package__v',_0x2726d4=new Array(_0x1d2510)[_0x4815a2(0x18a)]({'summary__v':SnapshotService[_0x4815a2(0x13d)],'object_type__v.api__name__v':_0x4815a2(0x14c)});return await veeva_service_1[_0x4815a2(0x102)][_0x4815a2(0x12f)](_0x4e4e4f,this[_0x4815a2(0x135)],_0x2726d4,this[_0x4815a2(0x14b)]);}async['createPackageComponents'](_0xc22b68,_0x57349d){const _0x20f034=a312_0x4c9bcd;this['_logger'][_0x20f034(0x111)]('Adding\x20components\x20to\x20outbound\x20package');const _0x3ed13d=veeva_constants_1[_0x20f034(0x180)][_0x20f034(0x134)]+_0x20f034(0x14f),_0x3433f7=_0xc22b68[_0x20f034(0x178)]((_0x5dfc6c,_0x4e30f4)=>({'vault_component__v':_0x5dfc6c['id'],'outbound_package__v':_0x57349d[Math[_0x20f034(0x116)]((_0x4e30f4+0x1)/veeva_constants_1[_0x20f034(0x180)][_0x20f034(0x132)])-0x1]}));return await veeva_service_1[_0x20f034(0x102)][_0x20f034(0x12f)](_0x3ed13d,this[_0x20f034(0x135)],_0x3433f7,this['_logger']);}async['exportOutboundPackage'](_0x1c6831){const _0x4a5032=a312_0x4c9bcd,_0x35bc40=await this['getPackageNames'](_0x1c6831),_0x2db3b8=await this[_0x4a5032(0x185)](Array[_0x4a5032(0x14a)](_0x35bc40[_0x4a5032(0x120)]())),_0xc46ca4=await this[_0x4a5032(0x16e)](_0x2db3b8);return await this[_0x4a5032(0x171)](_0xc46ca4);}async[a312_0x4c9bcd(0x179)](_0x249434){const _0x963e45=a312_0x4c9bcd;this[_0x963e45(0x14b)][_0x963e45(0x111)](_0x963e45(0x13a));const _0x1e1058=_0x963e45(0x117)+_0x249434['join'](_0x963e45(0x12a))+'\x27)',_0x305635=veeva_constants_1[_0x963e45(0x180)][_0x963e45(0x16b)]+_0x1e1058,_0x11375c=await veeva_service_1[_0x963e45(0x102)]['executeVQL'](_0x305635,this[_0x963e45(0x135)]);return _0x11375c[_0x963e45(0x155)]((_0x4f60a4,_0x4e0d97)=>_0x4f60a4[_0x963e45(0x164)](_0x4e0d97['id'],_0x4e0d97['name__v']),new Map());}async['createExportOutboundPackages'](_0x3bea01){const _0x48b163=a312_0x4c9bcd;this[_0x48b163(0x14b)][_0x48b163(0x111)]('Create\x20Export\x20outbound\x20packages.');const _0x3b4ff3=[],_0x49fb28=_0x3bea01[_0x48b163(0x178)](_0xd25899=>{const _0x10335d=_0x48b163;return this['_connectionVeeva'][_0x10335d(0x158)](veeva_constants_1[_0x10335d(0x180)]['ENDPOINT_EXPORT_IMPORT_PACKAGE'],encodeURI(_0x10335d(0x140))+'='+encodeURI(_0xd25899),{'headers':{'Content-Type':_0x10335d(0x145)}});}),_0x85e524=await Promise['all'](_0x49fb28);for(const {data:_0x4f14db}of _0x85e524){if(_0x4f14db[_0x48b163(0x17b)]===status_enums_1['VeevaResponseStatus'][_0x48b163(0x119)]){const {url:_0x1400ea}=_0x4f14db;_0x3b4ff3[_0x48b163(0x161)](_0x1400ea);}else throw new veeva_error_1[(_0x48b163(0x11f))](_0x4f14db[_0x48b163(0xfd)]);}return _0x3b4ff3;}async['getEndpointArtifactList'](_0x4d4c28){const _0x1b2c2a=a312_0x4c9bcd;this[_0x1b2c2a(0x14b)]['log'](_0x1b2c2a(0x141));const _0x44be1f=[],_0x3f9cf8=await veeva_service_1[_0x1b2c2a(0x102)][_0x1b2c2a(0x147)](_0x4d4c28,this[_0x1b2c2a(0x135)],this[_0x1b2c2a(0x14b)]);for(const _0x54d134 of _0x3f9cf8){const _0x27cf13=_0x54d134['links'][_0x1b2c2a(0x172)](_0xd1e813=>_0xd1e813[_0x1b2c2a(0x10b)]===_0x1b2c2a(0xee))[_0x1b2c2a(0x178)](_0x4676f6=>_0x4676f6['href']);_0x44be1f[_0x1b2c2a(0x161)](..._0x27cf13);}return _0x44be1f;}async[a312_0x4c9bcd(0x171)](_0x58bb45){const _0x21da3a=a312_0x4c9bcd;var _0x32c650;const _0x2acfc7=[];this['_logger'][_0x21da3a(0x111)](_0x21da3a(0xf3));for(const _0x1d0ed0 of _0x58bb45){const {data:_0x106d3d,headers:_0x3805f4}=await this[_0x21da3a(0x135)]['get'](_0x1d0ed0,{'responseType':'arraybuffer'}),_0x55d67a=(_0x32c650=_0x3805f4[_0x21da3a(0x15e)])===null||_0x32c650===void 0x0?void 0x0:_0x32c650['includes']('application/json');if(!_0x55d67a){const _0x26b03e=_0x106d3d,_0x358a89=new jszip_1[(_0x21da3a(0x17f))]();await _0x358a89[_0x21da3a(0x186)](_0x26b03e),_0x2acfc7[_0x21da3a(0x161)](_0x358a89);}else{const _0x49bb20=JSON['parse'](_0x106d3d);throw new veeva_error_1['VeevaError'](_0x49bb20['errors']);}}return _0x2acfc7;}async[a312_0x4c9bcd(0xf5)](_0x569f86,_0x3bc9fe){const _0x561bb8=a312_0x4c9bcd;var _0x30aff2;this[_0x561bb8(0x14b)][_0x561bb8(0x111)](_0x561bb8(0x12c));const _0x203e67=this[_0x561bb8(0x18c)](_0x569f86),_0x14390d=_0x203e67[_0x561bb8(0x155)]((_0x37cf85,_0x34962d)=>_0x37cf85[_0x561bb8(0x164)](_0x34962d[_0x561bb8(0x181)],_0x34962d),new Map());for(const _0x32279d of _0x3bc9fe){for(const _0x37f5de in _0x32279d['files']){const _0xe08522=_0x37f5de[_0x561bb8(0x170)]('/')['at'](-0x1);if(_0x14390d[_0x561bb8(0x133)](_0xe08522)){const _0x2c0c8d=await((_0x30aff2=_0x32279d[_0x561bb8(0x127)](_0x37f5de))===null||_0x30aff2===void 0x0?void 0x0:_0x30aff2[_0x561bb8(0x183)](_0x561bb8(0x123)));if(_0x2c0c8d){const _0x18c97b=new jszip_1['default']();_0x18c97b[_0x561bb8(0x127)](_0xe08522,_0x2c0c8d),_0x14390d[_0x561bb8(0xf0)](_0xe08522)[_0x561bb8(0x11d)]=await _0x18c97b[_0x561bb8(0x166)]({'type':'base64'});}}}}return _0x203e67[_0x561bb8(0x172)](_0xbddf7e=>!_0xbddf7e['body'])[_0x561bb8(0x151)](_0x47c7d5=>{const _0x2629f1=_0x561bb8;this[_0x2629f1(0x14b)][_0x2629f1(0x111)](_0x2629f1(0x15c)+_0x47c7d5[_0x2629f1(0x103)]+'.'+_0x47c7d5[_0x2629f1(0x177)]+'\x20from\x20outbound\x20package');}),_0x203e67[_0x561bb8(0x172)](_0x4a9c59=>_0x4a9c59['body']);}['formMetadataItemDtoList'](_0x5a72e7){const _0x4b81d3=a312_0x4c9bcd;return _0x5a72e7[_0x4b81d3(0x178)](_0x582acf=>{const _0x1fd516=_0x4b81d3,_0x707cf=new metadata_item_dto_1[(_0x1fd516(0x157))]();return _0x707cf['name']=_0x582acf[_0x1fd516(0x177)],_0x707cf['apiName']=_0x582acf[_0x1fd516(0x177)],_0x707cf[_0x1fd516(0x13f)]=this[_0x1fd516(0x112)],_0x707cf['label']=_0x582acf['type']+'.'+_0x582acf[_0x1fd516(0x177)]+'.mdl',_0x707cf[_0x1fd516(0x103)]=_0x582acf[_0x1fd516(0x11e)],_0x707cf[_0x1fd516(0x115)]=_0x582acf['lastModifiedDate'],_0x707cf['isRetrieved']=![],_0x707cf;});}async[a312_0x4c9bcd(0x16a)](_0x271be3){const _0x527e4d=a312_0x4c9bcd;this[_0x527e4d(0x14b)][_0x527e4d(0x111)]('Removing\x20components\x20from\x20outbound\x20packages.');const _0x4fbcc6=veeva_constants_1[_0x527e4d(0x180)][_0x527e4d(0x134)]+_0x527e4d(0x14f);await veeva_service_1[_0x527e4d(0x102)]['deleteVeevaObjectRecords'](_0x4fbcc6,this[_0x527e4d(0x135)],_0x271be3,this[_0x527e4d(0x14b)]);}async[a312_0x4c9bcd(0x13b)](_0x1b5be0){const _0x5017bf=a312_0x4c9bcd;this[_0x5017bf(0x14b)][_0x5017bf(0x111)](_0x5017bf(0x12e));const _0x1e1d81=veeva_constants_1[_0x5017bf(0x180)][_0x5017bf(0x134)]+_0x5017bf(0x10f);await veeva_service_1['VeevaService'][_0x5017bf(0x144)](_0x1e1d81,this[_0x5017bf(0x135)],_0x1b5be0,this[_0x5017bf(0x14b)]);}async[a312_0x4c9bcd(0xf6)](_0x21fbdb){const _0x19a5a5=a312_0x4c9bcd;this[_0x19a5a5(0x14b)][_0x19a5a5(0x111)](_0x19a5a5(0xfe)),await this[_0x19a5a5(0x15a)](_0x21fbdb),this[_0x19a5a5(0x14b)]['log'](_0x19a5a5(0x17e)+_0x21fbdb[_0x19a5a5(0x125)]+'\x20Metadata\x20Items');const _0x498e75=_0x21fbdb[_0x19a5a5(0x178)](_0x55d976=>{const _0x2993db=_0x19a5a5;return{[constants_1[_0x2993db(0x152)]+_0x2993db(0xf9)]:_0x55d976['name'],[constants_1['FLOSUM_NAMESPACE']+_0x2993db(0xfc)]:_0x55d976[_0x2993db(0xf1)],[constants_1[_0x2993db(0x152)]+_0x2993db(0x13e)]:_0x55d976[_0x2993db(0x13f)],[constants_1[_0x2993db(0x152)]+_0x2993db(0x118)]:_0x55d976[_0x2993db(0x181)],[constants_1[_0x2993db(0x152)]+_0x2993db(0x153)]:_0x55d976[_0x2993db(0x11c)],[constants_1['FLOSUM_NAMESPACE']+_0x2993db(0x15d)]:_0x55d976[_0x2993db(0x103)],[constants_1['FLOSUM_NAMESPACE']+_0x2993db(0xf8)]:_0x55d976[_0x2993db(0x16d)],[constants_1[_0x2993db(0x152)]+_0x2993db(0xf2)]:_0x55d976[_0x2993db(0x115)]};}),_0xa823d6=await salesforce_service_1['SalesforceService']['insertMultipleRecords'](this['_connectionSalesforce'],constants_1['FLOSUM_NAMESPACE']+'Metadata_Item__c',_0x498e75);let _0x33ad46=!![];_0xa823d6[_0x19a5a5(0x151)]((_0x4e4248,_0x42bad7)=>{const _0x4ee95d=_0x19a5a5;this[_0x4ee95d(0x14b)][_0x4ee95d(0x111)](_0x4ee95d(0x17e)+_0x21fbdb[_0x42bad7][_0x4ee95d(0x103)]+'.'+_0x21fbdb[_0x42bad7][_0x4ee95d(0x177)]);if(!_0x4e4248[_0x4ee95d(0x130)]){_0x33ad46=![];const _0x2ee3cd=new salesforce_dml_error_1['SalesforceDmlError'](_0x4e4248[_0x4ee95d(0xfd)]);this[_0x4ee95d(0x14b)][_0x4ee95d(0xff)](_0x2ee3cd);}});if(!_0x33ad46)throw new Error(_0x19a5a5(0x189));}async['saveAttachments'](_0x58f7ba){const _0x2a4c27=a312_0x4c9bcd,_0x3f00e2=this['formAttachments'](_0x58f7ba),_0x4704ae=await salesforce_service_1[_0x2a4c27(0x187)][_0x2a4c27(0x17c)](this[_0x2a4c27(0x137)],SnapshotService[_0x2a4c27(0x139)],_0x3f00e2),_0x40d047=[];_0x4704ae['forEach']((_0x102a57,_0x4d8591)=>{const _0x52aec8=_0x2a4c27;_0x102a57[_0x52aec8(0x130)]?(_0x58f7ba[_0x4d8591][_0x52aec8(0x16d)]=_0x102a57['id'],_0x58f7ba[_0x4d8591][_0x52aec8(0x11c)]=!![]):_0x40d047[_0x52aec8(0x161)](..._0x102a57[_0x52aec8(0xfd)]);});if(_0x40d047[_0x2a4c27(0x125)])throw new salesforce_dml_error_1['SalesforceDmlError'](_0x40d047);}[a312_0x4c9bcd(0x150)](_0x1eb707){const _0x131b0a=a312_0x4c9bcd;return _0x1eb707[_0x131b0a(0x178)](_0xa93265=>({'ParentId':this[_0x131b0a(0x112)],'Name':_0xa93265['veevaComponentType'],'ContentType':_0x131b0a(0x109),'Body':_0xa93265['body'],'Description':_0xa93265[_0x131b0a(0x103)]}));}async['finishSnapshot'](_0x4bddcb){const _0x11365d=a312_0x4c9bcd,_0x3dc198={[constants_1['FLOSUM_NAMESPACE']+_0x11365d(0x18b)]:!![],[constants_1['FLOSUM_NAMESPACE']+_0x11365d(0x126)]:!_0x4bddcb},_0x2992f8={[constants_1['FLOSUM_NAMESPACE']+_0x11365d(0x126)]:!_0x4bddcb,[constants_1[_0x11365d(0x152)]+'Succeed__c']:_0x4bddcb,[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0x4bddcb?status_enums_1[_0x11365d(0x159)][_0x11365d(0x169)]:status_enums_1[_0x11365d(0x159)]['EXCEPTION'],[constants_1[_0x11365d(0x152)]+_0x11365d(0x176)]:!![]};await this[_0x11365d(0x137)]['patch'](flosum_constants_1[_0x11365d(0x121)][_0x11365d(0x160)]+'/'+constants_1[_0x11365d(0x152)]+'Snapshot__c/'+this['_snapshotId'],_0x3dc198),await this[_0x11365d(0x137)]['patch'](flosum_constants_1[_0x11365d(0x121)][_0x11365d(0x160)]+'/'+constants_1['FLOSUM_NAMESPACE']+_0x11365d(0x15b)+this['_metadataLogId'],_0x2992f8),this[_0x11365d(0x14b)][_0x11365d(0x111)](_0x11365d(0x14d)+(_0x4bddcb?_0x11365d(0x128):'with\x20error')+'.'),await this[_0x11365d(0x14b)][_0x11365d(0x156)]();}}exports[a312_0x4c9bcd(0xf4)]=SnapshotService,SnapshotService[a312_0x4c9bcd(0x13d)]='Snapshot',SnapshotService[a312_0x4c9bcd(0x139)]='Attachment';