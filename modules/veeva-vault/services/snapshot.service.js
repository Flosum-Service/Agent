const a312_0x5c3aa2=a312_0x5197;(function(_0x242075,_0x2f7460){const _0x52d2e5=a312_0x5197,_0x175667=_0x242075();while(!![]){try{const _0x27e702=parseInt(_0x52d2e5(0x181))/0x1*(parseInt(_0x52d2e5(0x17b))/0x2)+parseInt(_0x52d2e5(0x188))/0x3+-parseInt(_0x52d2e5(0x1a3))/0x4+-parseInt(_0x52d2e5(0x191))/0x5*(parseInt(_0x52d2e5(0x16a))/0x6)+parseInt(_0x52d2e5(0x13f))/0x7+parseInt(_0x52d2e5(0x18f))/0x8*(-parseInt(_0x52d2e5(0x170))/0x9)+parseInt(_0x52d2e5(0x190))/0xa;if(_0x27e702===_0x2f7460)break;else _0x175667['push'](_0x175667['shift']());}catch(_0x595dfe){_0x175667['push'](_0x175667['shift']());}}}(a312_0x3523,0xe8549));const a312_0x5d12be=(function(){let _0x229d2b=!![];return function(_0x5a7ed1,_0x319e84){const _0x42a8b3=_0x229d2b?function(){const _0x54b3eb=a312_0x5197;if(_0x319e84){const _0x1f9143=_0x319e84[_0x54b3eb(0x13d)](_0x5a7ed1,arguments);return _0x319e84=null,_0x1f9143;}}:function(){};return _0x229d2b=![],_0x42a8b3;};}()),a312_0x31a5c6=a312_0x5d12be(this,function(){const _0x13f61a=a312_0x5197;return a312_0x31a5c6[_0x13f61a(0x157)]()[_0x13f61a(0x148)](_0x13f61a(0x14b))[_0x13f61a(0x157)]()[_0x13f61a(0x17a)](a312_0x31a5c6)[_0x13f61a(0x148)](_0x13f61a(0x14b));});a312_0x31a5c6();function a312_0x3523(){const _0x9a8c0f=['446096ZIElCv','fill','../enums/status.enums','createMetadataItemListWithBody','isRetrieved','\x20Metadata\x20Items','../../shared/utils','_connectionSalesforce','name__v','search','Snapshot\x20completed\x20','getPackageNames','(((.+)+)+)+$','href','file','packageName','application/json','catch','deleteOutboundPackages','insertMultipleRecords','Attachment','createExportOutboundPackages','_connectionVeeva','./salesforce.service','toString','push','Retrieve\x20collection\x20metadata\x20of\x20components\x20by\x20type\x20and\x20names','exportOutboundPackage','EXCEPTION','default','__importDefault','reduce','base64','../../../constants','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20=\x27','\x27,\x27','MAXIMUM_SIZE_OF_PACKAGE','getEndpointArtifactList','formMetadataItemDtoList','values','post','_attachmentLogId','application/zip','14154ElYHga','lastModifiedDate','getComponentsMetadataByTypeAndName','length','getJobResult','string','81QjvIZF','SalesforceService','FlosumConstants','snapshotId','forEach','ENDPOINT_VQL','body','responseStatus','deletePackageComponents','label','constructor','632174ltLmOG','SalesforceDmlError','all','artifacts','loadAsync','Snapshot','5PQHeiS','getComponentsMetadataByTypes','outbound_package__v','Creating\x20outbound\x20packages','_systemLogger','Metadata_Log__c/','\x20from\x20outbound\x20package','2489601dLGpRc','Adding\x20components\x20to\x20outbound\x20package','Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20','../constants/veeva.constants','../constants/flosum.constants','from','FLOSUM_NAMESPACE','347960NjqamB','10243140zmrTdc','1310BwgVgr','../classes/errors/salesforce-dml-error','Retrieve\x20Outbound\x20Package\x20zip\x20list','application/x-www-form-urlencoded','name','apiName','_timeZone','type','ATTACMENT','metadataLogId','VeevaService','Name__c','patch','_selectedComponentMap','VeevaComponentDto','VeevaError','attachmentLogId','error','6148824pOFXZj','Getting\x20names\x20of\x20outbound\x20packages','Is_Error__c','veevaComponentType','deleteVeevaObjectRecords','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20CONTAINS\x20(\x27','./veeva.service','logError','BUILD_WHERE_BY_NAME_LIMIT','Removing\x20components\x20from\x20outbound\x20packages.','Succeed__c','Retrieve\x20collection\x20metadata\x20of\x20components','_selectedMetaTypes','map','Cannot\x20Save\x20Metadata\x20Items','split','Attachment_ID__c','filter','set','createOutboundPackages','finishSnapshot','attachmentId','formAttachments','Status__c','Is_Completed__c','chunkArray','Saving\x20Attachments.','\x27\x20AND\x20component_name__v\x20CONTAINS\x20(\x27','retrieveVPKList','ceil','_logger','OUTBOUND_PACKAGE_NAME','get','SUCCESS','createVeevaObjectRecords','MetadataLogStatus','with\x20error','files','SnapshotService','Metadata_Item__c','log','ENDPOINT_UPSERT_RECORD','saveComponentsInSalesforce','execute','COMPLETED','inactive__v','_metadataLogId','includes','_snapshotId','arraybuffer','MetadataItemDto','content-type','defineProperty','VeevaConstants','Label__c','errors','__esModule','Job_Completed__c','../dtos/metadata-item.dto','join','ENDPOINT_CREATE_RECORDS','successfully','createPackageComponents','Snapshot__c/','saveAttachments','updateLog','API_Name__c','rel','executeVQL','success','Saving\x20','apply','Veeva_Component_Type__c'];a312_0x3523=function(){return _0x9a8c0f;};return a312_0x3523();}'use strict';var __importDefault=this&&this[a312_0x5c3aa2(0x15d)]||function(_0x55de39){const _0x505cad=a312_0x5c3aa2;return _0x55de39&&_0x55de39[_0x505cad(0x12e)]?_0x55de39:{'default':_0x55de39};};Object[a312_0x5c3aa2(0x12a)](exports,a312_0x5c3aa2(0x12e),{'value':!![]}),exports[a312_0x5c3aa2(0x11c)]=void 0x0;const jszip_1=__importDefault(require('jszip')),flosum_constants_1=require(a312_0x5c3aa2(0x18c)),veeva_constants_1=require(a312_0x5c3aa2(0x18b)),veeva_service_1=require(a312_0x5c3aa2(0x1a9)),veeva_component_dto_1=require('../dtos/veeva-component.dto'),metadata_item_dto_1=require(a312_0x5c3aa2(0x130)),utils_1=require(a312_0x5c3aa2(0x145)),constants_1=require(a312_0x5c3aa2(0x160)),salesforce_service_1=require(a312_0x5c3aa2(0x156)),status_enums_1=require(a312_0x5c3aa2(0x141)),salesforce_dml_error_1=require(a312_0x5c3aa2(0x192)),veeva_error_1=require('../classes/errors/veeva-error');class SnapshotService{constructor(_0x4038f9,_0x106143,_0x37ea3d,_0x17b9c5){const _0x431ec9=a312_0x5c3aa2;this['_connectionSalesforce']=_0x106143,this[_0x431ec9(0x155)]=_0x37ea3d,this[_0x431ec9(0x114)]=_0x17b9c5,this[_0x431ec9(0x126)]=_0x4038f9[_0x431ec9(0x173)],this[_0x431ec9(0x124)]=_0x4038f9[_0x431ec9(0x19a)],this[_0x431ec9(0x168)]=_0x4038f9[_0x431ec9(0x1a1)],this[_0x431ec9(0x197)]=_0x4038f9['timeZone'],this[_0x431ec9(0x1af)]=_0x4038f9['selectedMetaTypes'],this[_0x431ec9(0x19e)]=_0x4038f9['selectedComponentMap'];}async[a312_0x5c3aa2(0x121)](){const _0x11f246=a312_0x5c3aa2;try{this[_0x11f246(0x114)]['log']('Snapshot\x20started.');const _0x34ddc5=Array[_0x11f246(0x18d)](Object['values'](this[_0x11f246(0x19e)]))[_0x11f246(0x16d)]?await this[_0x11f246(0x16c)]():await this[_0x11f246(0x182)]();await this[_0x11f246(0x114)][_0x11f246(0x137)]();const _0x2d3542=await this[_0x11f246(0x109)](Math[_0x11f246(0x113)](_0x34ddc5[_0x11f246(0x16d)]/veeva_constants_1[_0x11f246(0x12b)][_0x11f246(0x163)])),_0x276c8b=await this[_0x11f246(0x134)](_0x34ddc5,_0x2d3542);await this['_logger'][_0x11f246(0x137)]();const _0x263dd2=await this[_0x11f246(0x15a)](_0x2d3542),_0x5ecc44=await this[_0x11f246(0x142)](_0x34ddc5,_0x263dd2);await this[_0x11f246(0x120)](_0x5ecc44),await this[_0x11f246(0x114)]['updateLog'](),await this[_0x11f246(0x178)](_0x276c8b),await this[_0x11f246(0x151)](_0x2d3542),await this[_0x11f246(0x10a)](!![]);}catch(_0x561008){this[_0x11f246(0x114)][_0x11f246(0x1aa)](_0x561008),await this['finishSnapshot'](![])[_0x11f246(0x150)](_0x5df887=>this[_0x11f246(0x185)][_0x11f246(0x1a2)](_0x5df887));}}async['getComponentsMetadataByTypes'](){const _0x557859=a312_0x5c3aa2;this[_0x557859(0x114)]['log'](_0x557859(0x1ae));const _0x46cd37=[],_0x2fdc18=_0x557859(0x1a8)+this[_0x557859(0x1af)][_0x557859(0x131)](_0x557859(0x162))+'\x27)',_0x2936e9=veeva_constants_1[_0x557859(0x12b)][_0x557859(0x175)]+_0x2fdc18,_0x3c4267=await veeva_service_1[_0x557859(0x19b)][_0x557859(0x13a)](_0x2936e9,this[_0x557859(0x155)]);for(const _0x596ad4 of _0x3c4267){const _0x3ccd80=new veeva_component_dto_1[(_0x557859(0x19f))](_0x596ad4),{name:_0x1f5b95,type:_0x3ae5b5,status:_0x198b3d}=_0x3ccd80;_0x198b3d['includes'](_0x557859(0x123))?this['_logger'][_0x557859(0x11e)](_0x557859(0x18a)+_0x3ae5b5+'.'+_0x1f5b95):_0x46cd37[_0x557859(0x158)](_0x3ccd80);}return _0x46cd37;}async[a312_0x5c3aa2(0x16c)](){const _0x42f8df=a312_0x5c3aa2;this['_logger']['log'](_0x42f8df(0x159));const _0x78ced6=[];for(const _0x343d16 in this['_selectedComponentMap']){const _0x35e5b8=(0x0,utils_1[_0x42f8df(0x10f)])(this[_0x42f8df(0x19e)][_0x343d16],veeva_constants_1[_0x42f8df(0x12b)][_0x42f8df(0x1ab)]),_0x276cbf=_0x35e5b8[_0x42f8df(0x103)](_0x38d9b3=>veeva_constants_1[_0x42f8df(0x12b)]['ENDPOINT_VQL']+(_0x42f8df(0x161)+_0x343d16+_0x42f8df(0x111)+_0x38d9b3[_0x42f8df(0x131)](_0x42f8df(0x162))+'\x27)'));_0x78ced6[_0x42f8df(0x158)](..._0x276cbf);}const _0x318836=[],_0x2fb54c=await veeva_service_1[_0x42f8df(0x19b)]['executeManyVQL'](_0x78ced6,this[_0x42f8df(0x155)]);for(const _0x33536a of _0x2fb54c){const _0x34bf47=new veeva_component_dto_1[(_0x42f8df(0x19f))](_0x33536a),{name:_0x47030a,type:_0x176e17,status:_0x50c0b9}=_0x34bf47,_0x15f8d0=_0x50c0b9['includes'](_0x42f8df(0x123));_0x15f8d0?this[_0x42f8df(0x114)]['log'](_0x42f8df(0x18a)+_0x176e17+'.'+_0x47030a):_0x318836[_0x42f8df(0x158)](_0x34bf47);}return _0x318836;}async[a312_0x5c3aa2(0x109)](_0x5c5b07){const _0x5bdf23=a312_0x5c3aa2;this['_logger'][_0x5bdf23(0x11e)](_0x5bdf23(0x184));const _0x37364d=veeva_constants_1[_0x5bdf23(0x12b)][_0x5bdf23(0x132)]+_0x5bdf23(0x183),_0x333c44=new Array(_0x5c5b07)[_0x5bdf23(0x140)]({'summary__v':SnapshotService[_0x5bdf23(0x115)],'object_type__v.api__name__v':'migration__sys'});return await veeva_service_1[_0x5bdf23(0x19b)][_0x5bdf23(0x118)](_0x37364d,this[_0x5bdf23(0x155)],_0x333c44,this[_0x5bdf23(0x114)]);}async[a312_0x5c3aa2(0x134)](_0x1572c2,_0x1893c0){const _0x5eea9d=a312_0x5c3aa2;this['_logger'][_0x5eea9d(0x11e)](_0x5eea9d(0x189));const _0x5e16ea=veeva_constants_1[_0x5eea9d(0x12b)][_0x5eea9d(0x132)]+'package_component__v',_0x14100f=_0x1572c2['map']((_0x32e94e,_0x462edb)=>({'vault_component__v':_0x32e94e['id'],'outbound_package__v':_0x1893c0[Math['ceil']((_0x462edb+0x1)/veeva_constants_1[_0x5eea9d(0x12b)][_0x5eea9d(0x163)])-0x1]}));return await veeva_service_1[_0x5eea9d(0x19b)][_0x5eea9d(0x118)](_0x5e16ea,this[_0x5eea9d(0x155)],_0x14100f,this[_0x5eea9d(0x114)]);}async['exportOutboundPackage'](_0x2f8673){const _0x22d895=a312_0x5c3aa2,_0x1010a5=await this[_0x22d895(0x14a)](_0x2f8673),_0x185a12=await this[_0x22d895(0x154)](Array[_0x22d895(0x18d)](_0x1010a5[_0x22d895(0x166)]())),_0x34bb5b=await this[_0x22d895(0x164)](_0x185a12);return await this[_0x22d895(0x112)](_0x34bb5b);}async[a312_0x5c3aa2(0x14a)](_0x7a1600){const _0x37aaa8=a312_0x5c3aa2;this[_0x37aaa8(0x114)][_0x37aaa8(0x11e)](_0x37aaa8(0x1a4));const _0x477e35='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27'+_0x7a1600[_0x37aaa8(0x131)](_0x37aaa8(0x162))+'\x27)',_0x3cb056=veeva_constants_1['VeevaConstants'][_0x37aaa8(0x175)]+_0x477e35,_0x175444=await veeva_service_1[_0x37aaa8(0x19b)][_0x37aaa8(0x13a)](_0x3cb056,this['_connectionVeeva']);return _0x175444[_0x37aaa8(0x15e)]((_0x53415d,_0x43824a)=>_0x53415d['set'](_0x43824a['id'],_0x43824a[_0x37aaa8(0x147)]),new Map());}async[a312_0x5c3aa2(0x154)](_0x4d8cf2){const _0xf3d444=a312_0x5c3aa2;this[_0xf3d444(0x114)]['log']('Create\x20Export\x20outbound\x20packages.');const _0x4840b6=[],_0x236976=_0x4d8cf2[_0xf3d444(0x103)](_0x2f6fa0=>{const _0xac47fa=_0xf3d444;return this[_0xac47fa(0x155)][_0xac47fa(0x167)](veeva_constants_1[_0xac47fa(0x12b)]['ENDPOINT_EXPORT_IMPORT_PACKAGE'],encodeURI(_0xac47fa(0x14e))+'='+encodeURI(_0x2f6fa0),{'headers':{'Content-Type':_0xac47fa(0x194)}});}),_0x4b94db=await Promise[_0xf3d444(0x17d)](_0x236976);for(const {data:_0x45f4da}of _0x4b94db){if(_0x45f4da[_0xf3d444(0x177)]===status_enums_1['VeevaResponseStatus'][_0xf3d444(0x117)]){const {url:_0x516616}=_0x45f4da;_0x4840b6[_0xf3d444(0x158)](_0x516616);}else throw new veeva_error_1['VeevaError'](_0x45f4da['errors']);}return _0x4840b6;}async[a312_0x5c3aa2(0x164)](_0x252abf){const _0x4b1ee6=a312_0x5c3aa2;this['_logger'][_0x4b1ee6(0x11e)]('Retrieve\x20Jobs\x20Status');const _0x11d4e1=[],_0x383108=await veeva_service_1[_0x4b1ee6(0x19b)][_0x4b1ee6(0x16e)](_0x252abf,this[_0x4b1ee6(0x155)],this[_0x4b1ee6(0x114)]);for(const _0x1754b6 of _0x383108){const _0x39d73f=_0x1754b6['links'][_0x4b1ee6(0x107)](_0x35aba3=>_0x35aba3[_0x4b1ee6(0x139)]===_0x4b1ee6(0x17e))[_0x4b1ee6(0x103)](_0x5f39b4=>_0x5f39b4[_0x4b1ee6(0x14c)]);_0x11d4e1[_0x4b1ee6(0x158)](..._0x39d73f);}return _0x11d4e1;}async[a312_0x5c3aa2(0x112)](_0x48465a){const _0x3ef87d=a312_0x5c3aa2;var _0x3f5ecb;const _0x55cfe1=[];this[_0x3ef87d(0x114)][_0x3ef87d(0x11e)](_0x3ef87d(0x193));for(const _0x13dbd5 of _0x48465a){const {data:_0xc7c7d3,headers:_0x5e7785}=await this['_connectionVeeva'][_0x3ef87d(0x116)](_0x13dbd5,{'responseType':_0x3ef87d(0x127)}),_0x552d4a=(_0x3f5ecb=_0x5e7785[_0x3ef87d(0x129)])===null||_0x3f5ecb===void 0x0?void 0x0:_0x3f5ecb[_0x3ef87d(0x125)](_0x3ef87d(0x14f));if(!_0x552d4a){const _0x39bb10=_0xc7c7d3,_0x1258b0=new jszip_1[(_0x3ef87d(0x15c))]();await _0x1258b0[_0x3ef87d(0x17f)](_0x39bb10),_0x55cfe1['push'](_0x1258b0);}else{const _0xa3f933=JSON['parse'](_0xc7c7d3);throw new veeva_error_1[(_0x3ef87d(0x1a0))](_0xa3f933[_0x3ef87d(0x12d)]);}}return _0x55cfe1;}async[a312_0x5c3aa2(0x142)](_0x9f86f4,_0xb7ab13){const _0xd893e0=a312_0x5c3aa2;var _0x518fac;this[_0xd893e0(0x114)][_0xd893e0(0x11e)]('Unpack\x20zip\x20and\x20create\x20metadata\x20items.');const _0x262c1f=this[_0xd893e0(0x165)](_0x9f86f4),_0x431df4=_0x262c1f[_0xd893e0(0x15e)]((_0x24e628,_0x26fef2)=>_0x24e628[_0xd893e0(0x108)](_0x26fef2[_0xd893e0(0x179)],_0x26fef2),new Map());for(const _0x2549f1 of _0xb7ab13){for(const _0x7383d9 in _0x2549f1[_0xd893e0(0x11b)]){const _0x3d97d8=_0x7383d9[_0xd893e0(0x105)]('/')['at'](-0x1);if(_0x431df4['has'](_0x3d97d8)){const _0x1fde90=await((_0x518fac=_0x2549f1['file'](_0x7383d9))===null||_0x518fac===void 0x0?void 0x0:_0x518fac['async'](_0xd893e0(0x16f)));if(_0x1fde90){const _0x439b02=new jszip_1[(_0xd893e0(0x15c))]();_0x439b02[_0xd893e0(0x14d)](_0x3d97d8,_0x1fde90),_0x431df4[_0xd893e0(0x116)](_0x3d97d8)['body']=await _0x439b02['generateAsync']({'type':_0xd893e0(0x15f)});}}}}return _0x262c1f[_0xd893e0(0x107)](_0x3bd79c=>!_0x3bd79c['body'])[_0xd893e0(0x174)](_0x30559b=>{const _0x4d12e6=_0xd893e0;this[_0x4d12e6(0x114)][_0x4d12e6(0x11e)]('Cannot\x20retrieve\x20'+_0x30559b[_0x4d12e6(0x1a6)]+'.'+_0x30559b[_0x4d12e6(0x195)]+_0x4d12e6(0x187));}),_0x262c1f['filter'](_0x1f0e4a=>_0x1f0e4a[_0xd893e0(0x176)]);}[a312_0x5c3aa2(0x165)](_0x4e65fb){const _0x556f77=a312_0x5c3aa2;return _0x4e65fb[_0x556f77(0x103)](_0x4b4fe0=>{const _0x365619=_0x556f77,_0x7c6edb=new metadata_item_dto_1[(_0x365619(0x128))]();return _0x7c6edb[_0x365619(0x195)]=_0x4b4fe0[_0x365619(0x195)],_0x7c6edb[_0x365619(0x196)]=_0x4b4fe0[_0x365619(0x195)],_0x7c6edb[_0x365619(0x173)]=this['_snapshotId'],_0x7c6edb[_0x365619(0x179)]=_0x4b4fe0[_0x365619(0x198)]+'.'+_0x4b4fe0[_0x365619(0x195)]+'.mdl',_0x7c6edb['veevaComponentType']=_0x4b4fe0[_0x365619(0x198)],_0x7c6edb[_0x365619(0x16b)]=_0x4b4fe0[_0x365619(0x16b)],_0x7c6edb[_0x365619(0x143)]=![],_0x7c6edb;});}async[a312_0x5c3aa2(0x178)](_0x2fe2b7){const _0x56f8a9=a312_0x5c3aa2;this[_0x56f8a9(0x114)][_0x56f8a9(0x11e)](_0x56f8a9(0x1ac));const _0xb14de5=veeva_constants_1[_0x56f8a9(0x12b)]['ENDPOINT_CREATE_RECORDS']+'package_component__v';await veeva_service_1['VeevaService'][_0x56f8a9(0x1a7)](_0xb14de5,this[_0x56f8a9(0x155)],_0x2fe2b7,this['_logger']);}async[a312_0x5c3aa2(0x151)](_0x446b72){const _0x56fe01=a312_0x5c3aa2;this['_logger'][_0x56fe01(0x11e)]('Deleting\x20outbound\x20packages.');const _0x18610f=veeva_constants_1[_0x56fe01(0x12b)][_0x56fe01(0x132)]+_0x56fe01(0x183);await veeva_service_1[_0x56fe01(0x19b)][_0x56fe01(0x1a7)](_0x18610f,this['_connectionVeeva'],_0x446b72,this[_0x56fe01(0x114)]);}async[a312_0x5c3aa2(0x120)](_0x1c9803){const _0x3866dd=a312_0x5c3aa2;this['_logger'][_0x3866dd(0x11e)](_0x3866dd(0x110)),await this[_0x3866dd(0x136)](_0x1c9803),this[_0x3866dd(0x114)][_0x3866dd(0x11e)](_0x3866dd(0x13c)+_0x1c9803[_0x3866dd(0x16d)]+_0x3866dd(0x144));const _0xd64f3f=_0x1c9803['map'](_0x42f73b=>{const _0x33aa57=_0x3866dd;return{[constants_1[_0x33aa57(0x18e)]+_0x33aa57(0x19c)]:_0x42f73b[_0x33aa57(0x195)],[constants_1[_0x33aa57(0x18e)]+_0x33aa57(0x138)]:_0x42f73b[_0x33aa57(0x196)],[constants_1['FLOSUM_NAMESPACE']+'Snapshot__c']:_0x42f73b[_0x33aa57(0x173)],[constants_1[_0x33aa57(0x18e)]+_0x33aa57(0x12c)]:_0x42f73b[_0x33aa57(0x179)],[constants_1[_0x33aa57(0x18e)]+'Is_Retrieved__c']:_0x42f73b[_0x33aa57(0x143)],[constants_1[_0x33aa57(0x18e)]+_0x33aa57(0x13e)]:_0x42f73b[_0x33aa57(0x1a6)],[constants_1[_0x33aa57(0x18e)]+_0x33aa57(0x106)]:_0x42f73b[_0x33aa57(0x10b)],[constants_1[_0x33aa57(0x18e)]+'Last_Modified_Date__c']:_0x42f73b['lastModifiedDate']};}),_0x46f09d=await salesforce_service_1[_0x3866dd(0x171)][_0x3866dd(0x152)](this[_0x3866dd(0x146)],constants_1[_0x3866dd(0x18e)]+_0x3866dd(0x11d),_0xd64f3f);let _0x5259d8=!![];_0x46f09d[_0x3866dd(0x174)]((_0x135aa2,_0x2732ec)=>{const _0x1e7536=_0x3866dd;this[_0x1e7536(0x114)][_0x1e7536(0x11e)](_0x1e7536(0x13c)+_0x1c9803[_0x2732ec]['veevaComponentType']+'.'+_0x1c9803[_0x2732ec]['name']);if(!_0x135aa2[_0x1e7536(0x13b)]){_0x5259d8=![];const _0x48a69c=new salesforce_dml_error_1['SalesforceDmlError'](_0x135aa2[_0x1e7536(0x12d)]);this[_0x1e7536(0x114)][_0x1e7536(0x1aa)](_0x48a69c);}});if(!_0x5259d8)throw new Error(_0x3866dd(0x104));}async[a312_0x5c3aa2(0x136)](_0x55b2a6){const _0x33ee60=a312_0x5c3aa2,_0x2c99e2=this[_0x33ee60(0x10c)](_0x55b2a6),_0x23ecbe=await salesforce_service_1['SalesforceService']['insertMultipleRecords'](this[_0x33ee60(0x146)],SnapshotService[_0x33ee60(0x199)],_0x2c99e2),_0x12f1ae=[];_0x23ecbe[_0x33ee60(0x174)]((_0x69bce6,_0x3a6338)=>{const _0x5096d5=_0x33ee60;_0x69bce6[_0x5096d5(0x13b)]?(_0x55b2a6[_0x3a6338][_0x5096d5(0x10b)]=_0x69bce6['id'],_0x55b2a6[_0x3a6338][_0x5096d5(0x143)]=!![]):_0x12f1ae[_0x5096d5(0x158)](..._0x69bce6[_0x5096d5(0x12d)]);});if(_0x12f1ae[_0x33ee60(0x16d)])throw new salesforce_dml_error_1[(_0x33ee60(0x17c))](_0x12f1ae);}[a312_0x5c3aa2(0x10c)](_0x1e853a){const _0x5081f3=a312_0x5c3aa2;return _0x1e853a[_0x5081f3(0x103)](_0x32b8f1=>({'ParentId':this[_0x5081f3(0x126)],'Name':_0x32b8f1['veevaComponentType'],'ContentType':_0x5081f3(0x169),'Body':_0x32b8f1[_0x5081f3(0x176)],'Description':_0x32b8f1[_0x5081f3(0x1a6)]}));}async[a312_0x5c3aa2(0x10a)](_0x22cec8){const _0x239c7b=a312_0x5c3aa2,_0x4a878e={[constants_1['FLOSUM_NAMESPACE']+_0x239c7b(0x10e)]:!![],[constants_1[_0x239c7b(0x18e)]+_0x239c7b(0x1a5)]:!_0x22cec8},_0x1c21f0={[constants_1[_0x239c7b(0x18e)]+_0x239c7b(0x1a5)]:!_0x22cec8,[constants_1[_0x239c7b(0x18e)]+_0x239c7b(0x1ad)]:_0x22cec8,[constants_1[_0x239c7b(0x18e)]+_0x239c7b(0x10d)]:_0x22cec8?status_enums_1[_0x239c7b(0x119)][_0x239c7b(0x122)]:status_enums_1[_0x239c7b(0x119)][_0x239c7b(0x15b)],[constants_1['FLOSUM_NAMESPACE']+_0x239c7b(0x12f)]:!![]};await this['_connectionSalesforce'][_0x239c7b(0x19d)](flosum_constants_1[_0x239c7b(0x172)][_0x239c7b(0x11f)]+'/'+constants_1[_0x239c7b(0x18e)]+_0x239c7b(0x135)+this['_snapshotId'],_0x4a878e),await this['_connectionSalesforce']['patch'](flosum_constants_1['FlosumConstants']['ENDPOINT_UPSERT_RECORD']+'/'+constants_1[_0x239c7b(0x18e)]+_0x239c7b(0x186)+this['_metadataLogId'],_0x1c21f0),this[_0x239c7b(0x114)][_0x239c7b(0x11e)](_0x239c7b(0x149)+(_0x22cec8?_0x239c7b(0x133):_0x239c7b(0x11a))+'.'),await this['_logger'][_0x239c7b(0x137)]();}}function a312_0x5197(_0x2a1e0c,_0x193774){const _0x660149=a312_0x3523();return a312_0x5197=function(_0x31a5c6,_0x5d12be){_0x31a5c6=_0x31a5c6-0x103;let _0x3523b9=_0x660149[_0x31a5c6];return _0x3523b9;},a312_0x5197(_0x2a1e0c,_0x193774);}exports[a312_0x5c3aa2(0x11c)]=SnapshotService,SnapshotService[a312_0x5c3aa2(0x115)]=a312_0x5c3aa2(0x180),SnapshotService[a312_0x5c3aa2(0x199)]=a312_0x5c3aa2(0x153);