const a312_0xa3f3a8=a312_0x2e1a;(function(_0x12a12c,_0x115536){const _0x5937f0=a312_0x2e1a,_0x7f2c10=_0x12a12c();while(!![]){try{const _0x14adc5=-parseInt(_0x5937f0(0x1ad))/0x1+-parseInt(_0x5937f0(0x1d4))/0x2*(-parseInt(_0x5937f0(0x14f))/0x3)+parseInt(_0x5937f0(0x181))/0x4+parseInt(_0x5937f0(0x1e5))/0x5*(parseInt(_0x5937f0(0x16e))/0x6)+-parseInt(_0x5937f0(0x163))/0x7+parseInt(_0x5937f0(0x1b2))/0x8*(-parseInt(_0x5937f0(0x184))/0x9)+-parseInt(_0x5937f0(0x1c9))/0xa;if(_0x14adc5===_0x115536)break;else _0x7f2c10['push'](_0x7f2c10['shift']());}catch(_0x1808e9){_0x7f2c10['push'](_0x7f2c10['shift']());}}}(a312_0x2c83,0x63c7f));function a312_0x2c83(){const _0x7ee78a=['reduce','.mdl','_logger','Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20','exportOutboundPackage','responseStatus','attachmentId','../../shared/utils','finishSnapshot','lastModifiedDate','Adding\x20components\x20to\x20outbound\x20package','length','snapshotId','attachmentLogId','retrieveVPKList','apiName','SalesforceDmlError','424202jJCTXr','_selectedMetaTypes','FlosumConstants','toString','has','332120xpiSdz','name','_timeZone','OUTBOUND_PACKAGE_NAME','saveComponentsInSalesforce','string','Retrieve\x20Outbound\x20Package\x20zip\x20list','href','push','insertMultipleRecords','Is_Completed__c','artifacts','Attachment_ID__c','getJobResult','timeZone','deleteVeevaObjectRecords','VeevaComponentDto','loadAsync','MetadataLogStatus','formAttachments','VeevaResponseStatus','Label__c','file','3932360zIwVws','Snapshot','migration__sys','Succeed__c','API_Name__c','metadataLogId','\x27,\x27','Create\x20Export\x20outbound\x20packages.','createExportOutboundPackages','label','chunkArray','2BAPaKX','(((.+)+)+)+$','createOutboundPackages','_connectionSalesforce','values','\x27\x20AND\x20component_name__v\x20CONTAINS\x20(\x27','../constants/flosum.constants','with\x20error','async','_snapshotId','name__v','join','inactive__v','constructor','updateLog','_attachmentLogId','createPackageComponents','2374745OuOEoE','Saving\x20Attachments.','COMPLETED','outbound_package__v','Metadata_Log__c/','package_component__v','fill','Retrieve\x20Jobs\x20Status','getComponentsMetadataByTypeAndName','type','all','Snapshot\x20completed\x20','Retrieve\x20collection\x20metadata\x20of\x20components','1454289YhuNBb','./salesforce.service','filter','veevaComponentType','formMetadataItemDtoList','VeevaError','isRetrieved','default','error','MAXIMUM_SIZE_OF_PACKAGE','SUCCESS','FLOSUM_NAMESPACE','executeManyVQL','../../../constants','_metadataLogId','get','success','ENDPOINT_VQL','VeevaConstants','Name__c','6699zFydOt','Saving\x20','errors','./veeva.service','ATTACMENT','logError','map','Unpack\x20zip\x20and\x20create\x20metadata\x20items.','SnapshotService','deleteOutboundPackages','rel','6VHEZbY','apply','deletePackageComponents','_connectionVeeva','executeVQL','Is_Error__c','../classes/errors/veeva-error','createMetadataItemListWithBody','\x20from\x20outbound\x20package','getPackageNames','__importDefault','Attachment','Removing\x20components\x20from\x20outbound\x20packages.','../dtos/veeva-component.dto','search','createVeevaObjectRecords','_selectedComponentMap','Veeva_Component_Type__c','patch','1567724hHeOzP','VeevaService','post','27CtBeog','content-type','SalesforceService','jszip','arraybuffer','ENDPOINT_CREATE_RECORDS','body','log','Job_Completed__c','__esModule','forEach','Metadata_Item__c','Getting\x20names\x20of\x20outbound\x20packages','includes','Deleting\x20outbound\x20packages.','../dtos/metadata-item.dto','EXCEPTION','ceil','execute','saveAttachments','ENDPOINT_UPSERT_RECORD','Snapshot__c','getComponentsMetadataByTypes','base64'];a312_0x2c83=function(){return _0x7ee78a;};return a312_0x2c83();}const a312_0x18e9cd=(function(){let _0x368364=!![];return function(_0x3fc93a,_0x4bca85){const _0x2abe38=_0x368364?function(){const _0x32418=a312_0x2e1a;if(_0x4bca85){const _0x18b2d5=_0x4bca85[_0x32418(0x16f)](_0x3fc93a,arguments);return _0x4bca85=null,_0x18b2d5;}}:function(){};return _0x368364=![],_0x2abe38;};}()),a312_0x4be27e=a312_0x18e9cd(this,function(){const _0x5e1f20=a312_0x2e1a;return a312_0x4be27e['toString']()[_0x5e1f20(0x17c)](_0x5e1f20(0x1d5))[_0x5e1f20(0x1b0)]()[_0x5e1f20(0x1e1)](a312_0x4be27e)['search'](_0x5e1f20(0x1d5));});a312_0x4be27e();'use strict';var __importDefault=this&&this[a312_0xa3f3a8(0x178)]||function(_0x28697c){return _0x28697c&&_0x28697c['__esModule']?_0x28697c:{'default':_0x28697c};};Object['defineProperty'](exports,a312_0xa3f3a8(0x18d),{'value':!![]}),exports[a312_0xa3f3a8(0x16b)]=void 0x0;const jszip_1=__importDefault(require(a312_0xa3f3a8(0x187))),flosum_constants_1=require(a312_0xa3f3a8(0x1da)),veeva_constants_1=require('../constants/veeva.constants'),veeva_service_1=require(a312_0xa3f3a8(0x166)),veeva_component_dto_1=require(a312_0xa3f3a8(0x17b)),metadata_item_dto_1=require(a312_0xa3f3a8(0x193)),utils_1=require(a312_0xa3f3a8(0x1a3)),constants_1=require(a312_0xa3f3a8(0x15c)),salesforce_service_1=require(a312_0xa3f3a8(0x150)),status_enums_1=require('../enums/status.enums'),salesforce_dml_error_1=require('../classes/errors/salesforce-dml-error'),veeva_error_1=require(a312_0xa3f3a8(0x174));function a312_0x2e1a(_0x1c134e,_0x45e6b8){const _0x3c059f=a312_0x2c83();return a312_0x2e1a=function(_0x4be27e,_0x18e9cd){_0x4be27e=_0x4be27e-0x149;let _0x2c833b=_0x3c059f[_0x4be27e];return _0x2c833b;},a312_0x2e1a(_0x1c134e,_0x45e6b8);}class SnapshotService{constructor(_0x33cbbb,_0xb87998,_0x187b68,_0x26179f){const _0x7a3d61=a312_0xa3f3a8;this['_connectionSalesforce']=_0xb87998,this[_0x7a3d61(0x171)]=_0x187b68,this[_0x7a3d61(0x19e)]=_0x26179f,this[_0x7a3d61(0x1dd)]=_0x33cbbb[_0x7a3d61(0x1a8)],this[_0x7a3d61(0x15d)]=_0x33cbbb[_0x7a3d61(0x1ce)],this[_0x7a3d61(0x1e3)]=_0x33cbbb[_0x7a3d61(0x1a9)],this[_0x7a3d61(0x1b4)]=_0x33cbbb[_0x7a3d61(0x1c0)],this['_selectedMetaTypes']=_0x33cbbb['selectedMetaTypes'],this[_0x7a3d61(0x17e)]=_0x33cbbb['selectedComponentMap'];}async[a312_0xa3f3a8(0x196)](){const _0x3da45a=a312_0xa3f3a8;try{this['_logger'][_0x3da45a(0x18b)]('Snapshot\x20started.');const _0x1c1b6c=Array['from'](Object[_0x3da45a(0x1d8)](this[_0x3da45a(0x17e)]))[_0x3da45a(0x1a7)]?await this['getComponentsMetadataByTypeAndName']():await this[_0x3da45a(0x19a)]();await this[_0x3da45a(0x19e)][_0x3da45a(0x1e2)]();const _0x4a0d7e=await this[_0x3da45a(0x1d6)](Math[_0x3da45a(0x195)](_0x1c1b6c['length']/veeva_constants_1['VeevaConstants']['MAXIMUM_SIZE_OF_PACKAGE'])),_0x59527e=await this[_0x3da45a(0x1e4)](_0x1c1b6c,_0x4a0d7e);await this['_logger']['updateLog']();const _0x5b8d59=await this['exportOutboundPackage'](_0x4a0d7e),_0x1ded67=await this['createMetadataItemListWithBody'](_0x1c1b6c,_0x5b8d59);await this[_0x3da45a(0x1b6)](_0x1ded67),await this[_0x3da45a(0x19e)]['updateLog'](),await this[_0x3da45a(0x170)](_0x59527e),await this[_0x3da45a(0x16c)](_0x4a0d7e),await this['finishSnapshot'](!![]);}catch(_0x4d8009){this[_0x3da45a(0x19e)][_0x3da45a(0x168)](_0x4d8009),await this[_0x3da45a(0x1a4)](![])['catch'](_0x3157f2=>this['_systemLogger'][_0x3da45a(0x157)](_0x3157f2));}}async['getComponentsMetadataByTypes'](){const _0x4c0862=a312_0xa3f3a8;this[_0x4c0862(0x19e)]['log'](_0x4c0862(0x14e));const _0x2ced32=[],_0x4c2486='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20CONTAINS\x20(\x27'+this[_0x4c0862(0x1ae)][_0x4c0862(0x1df)](_0x4c0862(0x1cf))+'\x27)',_0x38d118=veeva_constants_1[_0x4c0862(0x161)][_0x4c0862(0x160)]+_0x4c2486,_0x339eae=await veeva_service_1['VeevaService'][_0x4c0862(0x172)](_0x38d118,this[_0x4c0862(0x171)]);for(const _0x4cea1a of _0x339eae){const _0x4edb38=new veeva_component_dto_1[(_0x4c0862(0x1c2))](_0x4cea1a),{name:_0x42bfb5,type:_0xeeb022,status:_0x3e960f}=_0x4edb38;_0x3e960f[_0x4c0862(0x191)](_0x4c0862(0x1e0))?this[_0x4c0862(0x19e)][_0x4c0862(0x18b)](_0x4c0862(0x19f)+_0xeeb022+'.'+_0x42bfb5):_0x2ced32[_0x4c0862(0x1ba)](_0x4edb38);}return _0x2ced32;}async[a312_0xa3f3a8(0x14a)](){const _0x4e3cae=a312_0xa3f3a8;this[_0x4e3cae(0x19e)]['log']('Retrieve\x20collection\x20metadata\x20of\x20components\x20by\x20type\x20and\x20names');const _0x37f2ac=[];for(const _0x5c5cd8 in this['_selectedComponentMap']){const _0x4d20ef=(0x0,utils_1[_0x4e3cae(0x1d3)])(this[_0x4e3cae(0x17e)][_0x5c5cd8],veeva_constants_1[_0x4e3cae(0x161)]['BUILD_WHERE_BY_NAME_LIMIT']),_0x20bd63=_0x4d20ef['map'](_0x432d6b=>veeva_constants_1[_0x4e3cae(0x161)]['ENDPOINT_VQL']+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20=\x27'+_0x5c5cd8+_0x4e3cae(0x1d9)+_0x432d6b[_0x4e3cae(0x1df)](_0x4e3cae(0x1cf))+'\x27)'));_0x37f2ac[_0x4e3cae(0x1ba)](..._0x20bd63);}const _0x3d17bf=[],_0xa39674=await veeva_service_1['VeevaService'][_0x4e3cae(0x15b)](_0x37f2ac,this[_0x4e3cae(0x171)]);for(const _0x168d17 of _0xa39674){const _0x1502d9=new veeva_component_dto_1[(_0x4e3cae(0x1c2))](_0x168d17),{name:_0x3688ec,type:_0x2966d6,status:_0x5dd2c2}=_0x1502d9,_0x178ef0=_0x5dd2c2[_0x4e3cae(0x191)](_0x4e3cae(0x1e0));_0x178ef0?this[_0x4e3cae(0x19e)][_0x4e3cae(0x18b)](_0x4e3cae(0x19f)+_0x2966d6+'.'+_0x3688ec):_0x3d17bf['push'](_0x1502d9);}return _0x3d17bf;}async[a312_0xa3f3a8(0x1d6)](_0x217dd4){const _0x13b0bb=a312_0xa3f3a8;this[_0x13b0bb(0x19e)][_0x13b0bb(0x18b)]('Creating\x20outbound\x20packages');const _0x2adfd5=veeva_constants_1[_0x13b0bb(0x161)][_0x13b0bb(0x189)]+'outbound_package__v',_0x1e27dd=new Array(_0x217dd4)[_0x13b0bb(0x1eb)]({'summary__v':SnapshotService[_0x13b0bb(0x1b5)],'object_type__v.api__name__v':_0x13b0bb(0x1cb)});return await veeva_service_1[_0x13b0bb(0x182)]['createVeevaObjectRecords'](_0x2adfd5,this[_0x13b0bb(0x171)],_0x1e27dd,this[_0x13b0bb(0x19e)]);}async[a312_0xa3f3a8(0x1e4)](_0x1f7510,_0x3ffe66){const _0x56ed0e=a312_0xa3f3a8;this['_logger'][_0x56ed0e(0x18b)](_0x56ed0e(0x1a6));const _0x4e0294=veeva_constants_1[_0x56ed0e(0x161)][_0x56ed0e(0x189)]+_0x56ed0e(0x1ea),_0x5e7b37=_0x1f7510[_0x56ed0e(0x169)]((_0x12d8b8,_0x513fb1)=>({'vault_component__v':_0x12d8b8['id'],'outbound_package__v':_0x3ffe66[Math[_0x56ed0e(0x195)]((_0x513fb1+0x1)/veeva_constants_1[_0x56ed0e(0x161)][_0x56ed0e(0x158)])-0x1]}));return await veeva_service_1['VeevaService'][_0x56ed0e(0x17d)](_0x4e0294,this[_0x56ed0e(0x171)],_0x5e7b37,this[_0x56ed0e(0x19e)]);}async[a312_0xa3f3a8(0x1a0)](_0x1daf04){const _0x133aed=a312_0xa3f3a8,_0x5f0de3=await this[_0x133aed(0x177)](_0x1daf04),_0x5f2701=await this[_0x133aed(0x1d1)](Array['from'](_0x5f0de3[_0x133aed(0x1d8)]())),_0x6e3e1f=await this['getEndpointArtifactList'](_0x5f2701);return await this[_0x133aed(0x1aa)](_0x6e3e1f);}async[a312_0xa3f3a8(0x177)](_0x4777d9){const _0x3a55a5=a312_0xa3f3a8;this[_0x3a55a5(0x19e)]['log'](_0x3a55a5(0x190));const _0x100a89='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27'+_0x4777d9[_0x3a55a5(0x1df)](_0x3a55a5(0x1cf))+'\x27)',_0x2df48a=veeva_constants_1[_0x3a55a5(0x161)][_0x3a55a5(0x160)]+_0x100a89,_0x3d7a5a=await veeva_service_1[_0x3a55a5(0x182)][_0x3a55a5(0x172)](_0x2df48a,this[_0x3a55a5(0x171)]);return _0x3d7a5a[_0x3a55a5(0x19c)]((_0x14eab9,_0x2c386a)=>_0x14eab9['set'](_0x2c386a['id'],_0x2c386a[_0x3a55a5(0x1de)]),new Map());}async[a312_0xa3f3a8(0x1d1)](_0x4101b2){const _0xdf0b5f=a312_0xa3f3a8;this[_0xdf0b5f(0x19e)][_0xdf0b5f(0x18b)](_0xdf0b5f(0x1d0));const _0x2436ff=[],_0x3e1f63=_0x4101b2[_0xdf0b5f(0x169)](_0x38f11e=>{const _0x7080d3=_0xdf0b5f;return this[_0x7080d3(0x171)][_0x7080d3(0x183)](veeva_constants_1[_0x7080d3(0x161)]['ENDPOINT_EXPORT_IMPORT_PACKAGE'],encodeURI('packageName')+'='+encodeURI(_0x38f11e),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}});}),_0x413f24=await Promise[_0xdf0b5f(0x14c)](_0x3e1f63);for(const {data:_0x480f90}of _0x413f24){if(_0x480f90[_0xdf0b5f(0x1a1)]===status_enums_1[_0xdf0b5f(0x1c6)][_0xdf0b5f(0x159)]){const {url:_0x1e0303}=_0x480f90;_0x2436ff[_0xdf0b5f(0x1ba)](_0x1e0303);}else throw new veeva_error_1[(_0xdf0b5f(0x154))](_0x480f90[_0xdf0b5f(0x165)]);}return _0x2436ff;}async['getEndpointArtifactList'](_0x2b9d0e){const _0x2ebfad=a312_0xa3f3a8;this[_0x2ebfad(0x19e)][_0x2ebfad(0x18b)](_0x2ebfad(0x149));const _0x5904a4=[],_0x4fc137=await veeva_service_1[_0x2ebfad(0x182)][_0x2ebfad(0x1bf)](_0x2b9d0e,this[_0x2ebfad(0x171)],this[_0x2ebfad(0x19e)]);for(const _0x5a053c of _0x4fc137){const _0x588596=_0x5a053c['links']['filter'](_0x38e59b=>_0x38e59b[_0x2ebfad(0x16d)]===_0x2ebfad(0x1bd))[_0x2ebfad(0x169)](_0x47cd8d=>_0x47cd8d[_0x2ebfad(0x1b9)]);_0x5904a4[_0x2ebfad(0x1ba)](..._0x588596);}return _0x5904a4;}async['retrieveVPKList'](_0x53dedf){const _0x48296a=a312_0xa3f3a8;var _0x4f8143;const _0x52acc3=[];this[_0x48296a(0x19e)][_0x48296a(0x18b)](_0x48296a(0x1b8));for(const _0x5261c8 of _0x53dedf){const {data:_0x4eddeb,headers:_0x454b09}=await this[_0x48296a(0x171)][_0x48296a(0x15e)](_0x5261c8,{'responseType':_0x48296a(0x188)}),_0x2404bc=(_0x4f8143=_0x454b09[_0x48296a(0x185)])===null||_0x4f8143===void 0x0?void 0x0:_0x4f8143[_0x48296a(0x191)]('application/json');if(!_0x2404bc){const _0x4bb41d=_0x4eddeb,_0x1c70b8=new jszip_1[(_0x48296a(0x156))]();await _0x1c70b8[_0x48296a(0x1c3)](_0x4bb41d),_0x52acc3[_0x48296a(0x1ba)](_0x1c70b8);}else{const _0x303f51=JSON['parse'](_0x4eddeb);throw new veeva_error_1[(_0x48296a(0x154))](_0x303f51[_0x48296a(0x165)]);}}return _0x52acc3;}async[a312_0xa3f3a8(0x175)](_0x523303,_0x1960cc){const _0x378650=a312_0xa3f3a8;var _0x9eca6e;this[_0x378650(0x19e)]['log'](_0x378650(0x16a));const _0x7c8cbc=this[_0x378650(0x153)](_0x523303),_0x20fe1c=_0x7c8cbc[_0x378650(0x19c)]((_0x49cc57,_0x534d3c)=>_0x49cc57['set'](_0x534d3c[_0x378650(0x1d2)],_0x534d3c),new Map());for(const _0xc52f67 of _0x1960cc){for(const _0x21c367 in _0xc52f67['files']){const _0xeca13c=_0x21c367['split']('/')['at'](-0x1);if(_0x20fe1c[_0x378650(0x1b1)](_0xeca13c)){const _0x402433=await((_0x9eca6e=_0xc52f67[_0x378650(0x1c8)](_0x21c367))===null||_0x9eca6e===void 0x0?void 0x0:_0x9eca6e[_0x378650(0x1dc)](_0x378650(0x1b7)));if(_0x402433){const _0x53feac=new jszip_1[(_0x378650(0x156))]();_0x53feac[_0x378650(0x1c8)](_0xeca13c,_0x402433),_0x20fe1c['get'](_0xeca13c)[_0x378650(0x18a)]=await _0x53feac['generateAsync']({'type':_0x378650(0x19b)});}}}}return _0x7c8cbc['filter'](_0x39d666=>!_0x39d666[_0x378650(0x18a)])[_0x378650(0x18e)](_0x463913=>{const _0x516f64=_0x378650;this['_logger']['log']('Cannot\x20retrieve\x20'+_0x463913[_0x516f64(0x152)]+'.'+_0x463913[_0x516f64(0x1b3)]+_0x516f64(0x176));}),_0x7c8cbc[_0x378650(0x151)](_0x754c79=>_0x754c79['body']);}['formMetadataItemDtoList'](_0xd2ac99){const _0x5788bb=a312_0xa3f3a8;return _0xd2ac99[_0x5788bb(0x169)](_0x598677=>{const _0x28cad6=_0x5788bb,_0x423b56=new metadata_item_dto_1['MetadataItemDto']();return _0x423b56['name']=_0x598677[_0x28cad6(0x1b3)],_0x423b56[_0x28cad6(0x1ab)]=_0x598677['name'],_0x423b56[_0x28cad6(0x1a8)]=this[_0x28cad6(0x1dd)],_0x423b56[_0x28cad6(0x1d2)]=_0x598677[_0x28cad6(0x14b)]+'.'+_0x598677[_0x28cad6(0x1b3)]+_0x28cad6(0x19d),_0x423b56[_0x28cad6(0x152)]=_0x598677[_0x28cad6(0x14b)],_0x423b56[_0x28cad6(0x1a5)]=_0x598677[_0x28cad6(0x1a5)],_0x423b56[_0x28cad6(0x155)]=![],_0x423b56;});}async[a312_0xa3f3a8(0x170)](_0x2819fc){const _0x3a55c7=a312_0xa3f3a8;this[_0x3a55c7(0x19e)][_0x3a55c7(0x18b)](_0x3a55c7(0x17a));const _0x1f9e49=veeva_constants_1[_0x3a55c7(0x161)][_0x3a55c7(0x189)]+_0x3a55c7(0x1ea);await veeva_service_1[_0x3a55c7(0x182)][_0x3a55c7(0x1c1)](_0x1f9e49,this[_0x3a55c7(0x171)],_0x2819fc,this[_0x3a55c7(0x19e)]);}async[a312_0xa3f3a8(0x16c)](_0x3b9ae2){const _0x4d7cbf=a312_0xa3f3a8;this[_0x4d7cbf(0x19e)][_0x4d7cbf(0x18b)](_0x4d7cbf(0x192));const _0x1591e1=veeva_constants_1[_0x4d7cbf(0x161)][_0x4d7cbf(0x189)]+_0x4d7cbf(0x1e8);await veeva_service_1['VeevaService'][_0x4d7cbf(0x1c1)](_0x1591e1,this[_0x4d7cbf(0x171)],_0x3b9ae2,this['_logger']);}async[a312_0xa3f3a8(0x1b6)](_0x31e1a9){const _0x40baea=a312_0xa3f3a8;this['_logger'][_0x40baea(0x18b)](_0x40baea(0x1e6)),await this[_0x40baea(0x197)](_0x31e1a9),this[_0x40baea(0x19e)][_0x40baea(0x18b)](_0x40baea(0x164)+_0x31e1a9['length']+'\x20Metadata\x20Items');const _0x5b2bbc=_0x31e1a9['map'](_0x435ee1=>{const _0x1ec720=_0x40baea;return{[constants_1[_0x1ec720(0x15a)]+_0x1ec720(0x162)]:_0x435ee1[_0x1ec720(0x1b3)],[constants_1[_0x1ec720(0x15a)]+_0x1ec720(0x1cd)]:_0x435ee1[_0x1ec720(0x1ab)],[constants_1[_0x1ec720(0x15a)]+_0x1ec720(0x199)]:_0x435ee1[_0x1ec720(0x1a8)],[constants_1[_0x1ec720(0x15a)]+_0x1ec720(0x1c7)]:_0x435ee1['label'],[constants_1[_0x1ec720(0x15a)]+'Is_Retrieved__c']:_0x435ee1[_0x1ec720(0x155)],[constants_1['FLOSUM_NAMESPACE']+_0x1ec720(0x17f)]:_0x435ee1[_0x1ec720(0x152)],[constants_1['FLOSUM_NAMESPACE']+_0x1ec720(0x1be)]:_0x435ee1[_0x1ec720(0x1a2)],[constants_1[_0x1ec720(0x15a)]+'Last_Modified_Date__c']:_0x435ee1['lastModifiedDate']};}),_0x4e950=await salesforce_service_1['SalesforceService'][_0x40baea(0x1bb)](this[_0x40baea(0x1d7)],constants_1[_0x40baea(0x15a)]+_0x40baea(0x18f),_0x5b2bbc);let _0x5ba60b=!![];_0x4e950[_0x40baea(0x18e)]((_0x4c28fb,_0x5b8988)=>{const _0x1e9d67=_0x40baea;this[_0x1e9d67(0x19e)][_0x1e9d67(0x18b)](_0x1e9d67(0x164)+_0x31e1a9[_0x5b8988][_0x1e9d67(0x152)]+'.'+_0x31e1a9[_0x5b8988]['name']);if(!_0x4c28fb['success']){_0x5ba60b=![];const _0x5029cf=new salesforce_dml_error_1[(_0x1e9d67(0x1ac))](_0x4c28fb['errors']);this[_0x1e9d67(0x19e)][_0x1e9d67(0x168)](_0x5029cf);}});if(!_0x5ba60b)throw new Error('Cannot\x20Save\x20Metadata\x20Items');}async[a312_0xa3f3a8(0x197)](_0x3a627e){const _0x25d5d9=a312_0xa3f3a8,_0x4e3647=this[_0x25d5d9(0x1c5)](_0x3a627e),_0x3ddb18=await salesforce_service_1[_0x25d5d9(0x186)][_0x25d5d9(0x1bb)](this[_0x25d5d9(0x1d7)],SnapshotService[_0x25d5d9(0x167)],_0x4e3647),_0x5057e0=[];_0x3ddb18['forEach']((_0x79d8,_0x3a4411)=>{const _0x2a4048=_0x25d5d9;_0x79d8[_0x2a4048(0x15f)]?(_0x3a627e[_0x3a4411][_0x2a4048(0x1a2)]=_0x79d8['id'],_0x3a627e[_0x3a4411]['isRetrieved']=!![]):_0x5057e0['push'](..._0x79d8[_0x2a4048(0x165)]);});if(_0x5057e0[_0x25d5d9(0x1a7)])throw new salesforce_dml_error_1[(_0x25d5d9(0x1ac))](_0x5057e0);}['formAttachments'](_0x5087df){const _0x7626f5=a312_0xa3f3a8;return _0x5087df['map'](_0xda438d=>({'ParentId':this[_0x7626f5(0x1dd)],'Name':_0xda438d[_0x7626f5(0x152)],'ContentType':'application/zip','Body':_0xda438d[_0x7626f5(0x18a)],'Description':_0xda438d[_0x7626f5(0x152)]}));}async[a312_0xa3f3a8(0x1a4)](_0x3b7673){const _0x2a6946=a312_0xa3f3a8,_0x262ca4={[constants_1[_0x2a6946(0x15a)]+_0x2a6946(0x1bc)]:!![],[constants_1['FLOSUM_NAMESPACE']+_0x2a6946(0x173)]:!_0x3b7673},_0x3f1dca={[constants_1[_0x2a6946(0x15a)]+_0x2a6946(0x173)]:!_0x3b7673,[constants_1[_0x2a6946(0x15a)]+_0x2a6946(0x1cc)]:_0x3b7673,[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0x3b7673?status_enums_1[_0x2a6946(0x1c4)][_0x2a6946(0x1e7)]:status_enums_1[_0x2a6946(0x1c4)][_0x2a6946(0x194)],[constants_1['FLOSUM_NAMESPACE']+_0x2a6946(0x18c)]:!![]};await this[_0x2a6946(0x1d7)]['patch'](flosum_constants_1[_0x2a6946(0x1af)][_0x2a6946(0x198)]+'/'+constants_1[_0x2a6946(0x15a)]+'Snapshot__c/'+this[_0x2a6946(0x1dd)],_0x262ca4),await this[_0x2a6946(0x1d7)][_0x2a6946(0x180)](flosum_constants_1[_0x2a6946(0x1af)][_0x2a6946(0x198)]+'/'+constants_1[_0x2a6946(0x15a)]+_0x2a6946(0x1e9)+this[_0x2a6946(0x15d)],_0x3f1dca),this[_0x2a6946(0x19e)][_0x2a6946(0x18b)](_0x2a6946(0x14d)+(_0x3b7673?'successfully':_0x2a6946(0x1db))+'.'),await this[_0x2a6946(0x19e)][_0x2a6946(0x1e2)]();}}exports[a312_0xa3f3a8(0x16b)]=SnapshotService,SnapshotService[a312_0xa3f3a8(0x1b5)]=a312_0xa3f3a8(0x1ca),SnapshotService[a312_0xa3f3a8(0x167)]=a312_0xa3f3a8(0x179);