function a312_0x19b9(){const _0x4847a0=['Status__c','loadAsync','toString','deletePackageComponents','_metadataLogId','getEndpointArtifactList','ENDPOINT_VQL','packageName','../classes/errors/veeva-error','getPackageNames','FlosumConstants','MetadataItemDto','MAXIMUM_SIZE_OF_PACKAGE','logError','8126650kyNTSL','deleteOutboundPackages','API_Name__c','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20=\x27','ceil','.mdl','getComponentsMetadataByTypeAndName','package_component__v','FLOSUM_NAMESPACE','split','patch','_snapshotId','Retrieve\x20Jobs\x20Status','selectedMetaTypes','application/x-www-form-urlencoded','apply','\x27,\x27','label','attachmentId','successfully','../../../constants','_connectionSalesforce','(((.+)+)+)+$','createMetadataItemListWithBody','../classes/errors/salesforce-dml-error','Snapshot\x20started.','errors','Last_Modified_Date__c','createPackageComponents','VeevaComponentDto','createOutboundPackages','Snapshot__c','Metadata_Log__c/','164037rSQhnp','../enums/status.enums','name','name__v','chunkArray','Saving\x20','post','VeevaConstants','Snapshot','Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20','OUTBOUND_PACKAGE_NAME','retrieveVPKList','from','with\x20error','finishSnapshot','body','isRetrieved','async','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20CONTAINS\x20(\x27','parse','success','_selectedMetaTypes','Snapshot__c/','SalesforceService','_systemLogger','default','string','timeZone','values','formMetadataItemDtoList','1389412AIALrl','COMPLETED','generateAsync','application/zip','Cannot\x20retrieve\x20','./veeva.service','ATTACMENT','all','ENDPOINT_CREATE_RECORDS','_selectedComponentMap','VeevaError','VeevaService','length','Name__c','search','Removing\x20components\x20from\x20outbound\x20packages.','saveAttachments','24BahjjF','275KjoeFJ','Job_Completed__c','\x27\x20AND\x20component_name__v\x20CONTAINS\x20(\x27','forEach','get','catch','exportOutboundPackage','__esModule','push','Create\x20Export\x20outbound\x20packages.','Label__c','ENDPOINT_EXPORT_IMPORT_PACKAGE','1684143AfyNEi','snapshotId','createExportOutboundPackages','../dtos/veeva-component.dto','deleteVeevaObjectRecords','updateLog','../../shared/utils','filter','saveComponentsInSalesforce','./salesforce.service','createVeevaObjectRecords','set','includes','executeManyVQL','432572Mqpwtj','href','apiName','210832crJprg','base64','Deleting\x20outbound\x20packages.','Is_Retrieved__c','outbound_package__v','has','log','Snapshot\x20completed\x20','_logger','reduce','Cannot\x20Save\x20Metadata\x20Items','\x20Metadata\x20Items','responseStatus','inactive__v','constructor','Retrieve\x20Outbound\x20Package\x20zip\x20list','SalesforceDmlError','lastModifiedDate','join','ENDPOINT_UPSERT_RECORD','execute','file','executeVQL','Is_Error__c','insertMultipleRecords','Metadata_Item__c','Retrieve\x20collection\x20metadata\x20of\x20components\x20by\x20type\x20and\x20names','veevaComponentType','19950fsMYoA','getComponentsMetadataByTypes','selectedComponentMap','_connectionVeeva','3vFgWfp','__importDefault','type','arraybuffer','formAttachments','Succeed__c','map'];a312_0x19b9=function(){return _0x4847a0;};return a312_0x19b9();}const a312_0x1789f7=a312_0x5b2e;(function(_0x5909eb,_0x197691){const _0x2bc11d=a312_0x5b2e,_0x137ca3=_0x5909eb();while(!![]){try{const _0x2541fe=-parseInt(_0x2bc11d(0x93))/0x1+parseInt(_0x2bc11d(0xe0))/0x2+-parseInt(_0x2bc11d(0x100))/0x3*(parseInt(_0x2bc11d(0xb1))/0x4)+parseInt(_0x2bc11d(0xc3))/0x5*(parseInt(_0x2bc11d(0xfc))/0x6)+-parseInt(_0x2bc11d(0xdd))/0x7*(parseInt(_0x2bc11d(0xc2))/0x8)+-parseInt(_0x2bc11d(0xcf))/0x9+parseInt(_0x2bc11d(0x72))/0xa;if(_0x2541fe===_0x197691)break;else _0x137ca3['push'](_0x137ca3['shift']());}catch(_0x360859){_0x137ca3['push'](_0x137ca3['shift']());}}}(a312_0x19b9,0x34fdb));const a312_0x1510ec=(function(){let _0x37783c=!![];return function(_0x3904f6,_0x33ad30){const _0x3deb91=_0x37783c?function(){const _0x14476d=a312_0x5b2e;if(_0x33ad30){const _0x1e75c0=_0x33ad30[_0x14476d(0x81)](_0x3904f6,arguments);return _0x33ad30=null,_0x1e75c0;}}:function(){};return _0x37783c=![],_0x3deb91;};}()),a312_0x373230=a312_0x1510ec(this,function(){const _0x15e502=a312_0x5b2e;return a312_0x373230['toString']()[_0x15e502(0xbf)](_0x15e502(0x88))[_0x15e502(0x109)]()[_0x15e502(0xee)](a312_0x373230)['search']('(((.+)+)+)+$');});a312_0x373230();function a312_0x5b2e(_0xf12513,_0x56092f){const _0x241f1c=a312_0x19b9();return a312_0x5b2e=function(_0x373230,_0x1510ec){_0x373230=_0x373230-0x70;let _0x19b961=_0x241f1c[_0x373230];return _0x19b961;},a312_0x5b2e(_0xf12513,_0x56092f);}'use strict';var __importDefault=this&&this[a312_0x1789f7(0x101)]||function(_0x421eaf){const _0x17de2c=a312_0x1789f7;return _0x421eaf&&_0x421eaf[_0x17de2c(0xca)]?_0x421eaf:{'default':_0x421eaf};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['SnapshotService']=void 0x0;const jszip_1=__importDefault(require('jszip')),flosum_constants_1=require('../constants/flosum.constants'),veeva_constants_1=require('../constants/veeva.constants'),veeva_service_1=require(a312_0x1789f7(0xb6)),veeva_component_dto_1=require(a312_0x1789f7(0xd2)),metadata_item_dto_1=require('../dtos/metadata-item.dto'),utils_1=require(a312_0x1789f7(0xd5)),constants_1=require(a312_0x1789f7(0x86)),salesforce_service_1=require(a312_0x1789f7(0xd8)),status_enums_1=require(a312_0x1789f7(0x94)),salesforce_dml_error_1=require(a312_0x1789f7(0x8a)),veeva_error_1=require(a312_0x1789f7(0x10f));class SnapshotService{constructor(_0x337b07,_0x216ac8,_0x2d3d8a,_0x4ca55a){const _0x2087a6=a312_0x1789f7;this[_0x2087a6(0x87)]=_0x216ac8,this[_0x2087a6(0xff)]=_0x2d3d8a,this['_logger']=_0x4ca55a,this[_0x2087a6(0x7d)]=_0x337b07[_0x2087a6(0xd0)],this[_0x2087a6(0x10b)]=_0x337b07['metadataLogId'],this['_attachmentLogId']=_0x337b07['attachmentLogId'],this['_timeZone']=_0x337b07[_0x2087a6(0xae)],this[_0x2087a6(0xa8)]=_0x337b07[_0x2087a6(0x7f)],this['_selectedComponentMap']=_0x337b07[_0x2087a6(0xfe)];}async[a312_0x1789f7(0xf4)](){const _0x3cc47f=a312_0x1789f7;try{this[_0x3cc47f(0xe8)][_0x3cc47f(0xe6)](_0x3cc47f(0x8b));const _0x5883b6=Array[_0x3cc47f(0x9f)](Object[_0x3cc47f(0xaf)](this[_0x3cc47f(0xba)]))[_0x3cc47f(0xbd)]?await this[_0x3cc47f(0x78)]():await this[_0x3cc47f(0xfd)]();await this[_0x3cc47f(0xe8)][_0x3cc47f(0xd4)]();const _0x359c56=await this[_0x3cc47f(0x90)](Math[_0x3cc47f(0x76)](_0x5883b6['length']/veeva_constants_1[_0x3cc47f(0x9a)][_0x3cc47f(0x70)])),_0xcf31cd=await this[_0x3cc47f(0x8e)](_0x5883b6,_0x359c56);await this[_0x3cc47f(0xe8)][_0x3cc47f(0xd4)]();const _0x299903=await this[_0x3cc47f(0xc9)](_0x359c56),_0x40c9cc=await this[_0x3cc47f(0x89)](_0x5883b6,_0x299903);await this[_0x3cc47f(0xd7)](_0x40c9cc),await this['_logger'][_0x3cc47f(0xd4)](),await this[_0x3cc47f(0x10a)](_0xcf31cd),await this[_0x3cc47f(0x73)](_0x359c56),await this[_0x3cc47f(0xa1)](!![]);}catch(_0x54009b){this[_0x3cc47f(0xe8)][_0x3cc47f(0x71)](_0x54009b),await this[_0x3cc47f(0xa1)](![])[_0x3cc47f(0xc8)](_0x4fc9a0=>this[_0x3cc47f(0xab)]['error'](_0x4fc9a0));}}async[a312_0x1789f7(0xfd)](){const _0x4ca214=a312_0x1789f7;this[_0x4ca214(0xe8)][_0x4ca214(0xe6)]('Retrieve\x20collection\x20metadata\x20of\x20components');const _0xbfed50=[],_0xb604d1=_0x4ca214(0xa5)+this[_0x4ca214(0xa8)][_0x4ca214(0xf2)](_0x4ca214(0x82))+'\x27)',_0x1c8aa0=veeva_constants_1[_0x4ca214(0x9a)][_0x4ca214(0x10d)]+_0xb604d1,_0x1f8cda=await veeva_service_1['VeevaService'][_0x4ca214(0xf6)](_0x1c8aa0,this['_connectionVeeva']);for(const _0x12c136 of _0x1f8cda){const _0x3d71e9=new veeva_component_dto_1[(_0x4ca214(0x8f))](_0x12c136),{name:_0x36bf17,type:_0x490290,status:_0x4aaf93}=_0x3d71e9;_0x4aaf93[_0x4ca214(0xdb)](_0x4ca214(0xed))?this[_0x4ca214(0xe8)][_0x4ca214(0xe6)](_0x4ca214(0x9c)+_0x490290+'.'+_0x36bf17):_0xbfed50[_0x4ca214(0xcb)](_0x3d71e9);}return _0xbfed50;}async[a312_0x1789f7(0x78)](){const _0x3a6176=a312_0x1789f7;this['_logger'][_0x3a6176(0xe6)](_0x3a6176(0xfa));const _0x38c671=[];for(const _0x1bad9c in this[_0x3a6176(0xba)]){const _0x511218=(0x0,utils_1[_0x3a6176(0x97)])(this[_0x3a6176(0xba)][_0x1bad9c],veeva_constants_1[_0x3a6176(0x9a)]['BUILD_WHERE_BY_NAME_LIMIT']),_0x194c68=_0x511218['map'](_0x2cb338=>veeva_constants_1[_0x3a6176(0x9a)][_0x3a6176(0x10d)]+(_0x3a6176(0x75)+_0x1bad9c+_0x3a6176(0xc5)+_0x2cb338[_0x3a6176(0xf2)]('\x27,\x27')+'\x27)'));_0x38c671[_0x3a6176(0xcb)](..._0x194c68);}const _0x405ddb=[],_0x3fa25d=await veeva_service_1['VeevaService'][_0x3a6176(0xdc)](_0x38c671,this['_connectionVeeva']);for(const _0x2ee063 of _0x3fa25d){const _0x221355=new veeva_component_dto_1['VeevaComponentDto'](_0x2ee063),{name:_0x222d02,type:_0x28bca0,status:_0x5efada}=_0x221355,_0xcfce98=_0x5efada['includes'](_0x3a6176(0xed));_0xcfce98?this[_0x3a6176(0xe8)]['log'](_0x3a6176(0x9c)+_0x28bca0+'.'+_0x222d02):_0x405ddb[_0x3a6176(0xcb)](_0x221355);}return _0x405ddb;}async['createOutboundPackages'](_0x18e4d7){const _0x239f0d=a312_0x1789f7;this[_0x239f0d(0xe8)][_0x239f0d(0xe6)]('Creating\x20outbound\x20packages');const _0x2ac9c5=veeva_constants_1['VeevaConstants'][_0x239f0d(0xb9)]+_0x239f0d(0xe4),_0x33294f=new Array(_0x18e4d7)['fill']({'summary__v':SnapshotService['OUTBOUND_PACKAGE_NAME'],'object_type__v.api__name__v':'migration__sys'});return await veeva_service_1[_0x239f0d(0xbc)][_0x239f0d(0xd9)](_0x2ac9c5,this[_0x239f0d(0xff)],_0x33294f,this[_0x239f0d(0xe8)]);}async[a312_0x1789f7(0x8e)](_0x1bcd58,_0xb23582){const _0x3e93c2=a312_0x1789f7;this[_0x3e93c2(0xe8)]['log']('Adding\x20components\x20to\x20outbound\x20package');const _0x5cf0ce=veeva_constants_1['VeevaConstants']['ENDPOINT_CREATE_RECORDS']+_0x3e93c2(0x79),_0x41cad5=_0x1bcd58[_0x3e93c2(0x106)]((_0x5222c2,_0x38c945)=>({'vault_component__v':_0x5222c2['id'],'outbound_package__v':_0xb23582[Math[_0x3e93c2(0x76)]((_0x38c945+0x1)/veeva_constants_1[_0x3e93c2(0x9a)][_0x3e93c2(0x70)])-0x1]}));return await veeva_service_1[_0x3e93c2(0xbc)][_0x3e93c2(0xd9)](_0x5cf0ce,this['_connectionVeeva'],_0x41cad5,this[_0x3e93c2(0xe8)]);}async[a312_0x1789f7(0xc9)](_0x502ff4){const _0x169d29=a312_0x1789f7,_0x45bd6a=await this['getPackageNames'](_0x502ff4),_0x256367=await this[_0x169d29(0xd1)](Array['from'](_0x45bd6a[_0x169d29(0xaf)]())),_0x4d4060=await this[_0x169d29(0x10c)](_0x256367);return await this[_0x169d29(0x9e)](_0x4d4060);}async[a312_0x1789f7(0x110)](_0x630512){const _0x30e643=a312_0x1789f7;this[_0x30e643(0xe8)][_0x30e643(0xe6)]('Getting\x20names\x20of\x20outbound\x20packages');const _0x4c8787='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27'+_0x630512['join'](_0x30e643(0x82))+'\x27)',_0x502127=veeva_constants_1['VeevaConstants'][_0x30e643(0x10d)]+_0x4c8787,_0x51fc3f=await veeva_service_1[_0x30e643(0xbc)][_0x30e643(0xf6)](_0x502127,this[_0x30e643(0xff)]);return _0x51fc3f[_0x30e643(0xe9)]((_0x4548ea,_0x240388)=>_0x4548ea['set'](_0x240388['id'],_0x240388[_0x30e643(0x96)]),new Map());}async[a312_0x1789f7(0xd1)](_0x16697e){const _0x144ba6=a312_0x1789f7;this[_0x144ba6(0xe8)][_0x144ba6(0xe6)](_0x144ba6(0xcc));const _0x300316=[],_0x8c336e=_0x16697e[_0x144ba6(0x106)](_0x2f2430=>{const _0x1425dd=_0x144ba6;return this[_0x1425dd(0xff)][_0x1425dd(0x99)](veeva_constants_1[_0x1425dd(0x9a)][_0x1425dd(0xce)],encodeURI(_0x1425dd(0x10e))+'='+encodeURI(_0x2f2430),{'headers':{'Content-Type':_0x1425dd(0x80)}});}),_0x9c4b45=await Promise[_0x144ba6(0xb8)](_0x8c336e);for(const {data:_0x457a75}of _0x9c4b45){if(_0x457a75[_0x144ba6(0xec)]===status_enums_1['VeevaResponseStatus']['SUCCESS']){const {url:_0x5e164e}=_0x457a75;_0x300316[_0x144ba6(0xcb)](_0x5e164e);}else throw new veeva_error_1[(_0x144ba6(0xbb))](_0x457a75[_0x144ba6(0x8c)]);}return _0x300316;}async[a312_0x1789f7(0x10c)](_0x52b08e){const _0x259282=a312_0x1789f7;this['_logger']['log'](_0x259282(0x7e));const _0x319db3=[],_0x21707e=await veeva_service_1[_0x259282(0xbc)]['getJobResult'](_0x52b08e,this[_0x259282(0xff)],this['_logger']);for(const _0x3db3b4 of _0x21707e){const _0x4a6ad1=_0x3db3b4['links']['filter'](_0x182a16=>_0x182a16['rel']==='artifacts')[_0x259282(0x106)](_0x21133f=>_0x21133f[_0x259282(0xde)]);_0x319db3[_0x259282(0xcb)](..._0x4a6ad1);}return _0x319db3;}async[a312_0x1789f7(0x9e)](_0xbd0d26){const _0xa2aeb8=a312_0x1789f7;var _0x59d04e;const _0x47e3f3=[];this['_logger'][_0xa2aeb8(0xe6)](_0xa2aeb8(0xef));for(const _0x1794ff of _0xbd0d26){const {data:_0x227ab8,headers:_0xc56928}=await this[_0xa2aeb8(0xff)][_0xa2aeb8(0xc7)](_0x1794ff,{'responseType':_0xa2aeb8(0x103)}),_0x45613b=(_0x59d04e=_0xc56928['content-type'])===null||_0x59d04e===void 0x0?void 0x0:_0x59d04e['includes']('application/json');if(!_0x45613b){const _0x373667=_0x227ab8,_0x4681d3=new jszip_1[(_0xa2aeb8(0xac))]();await _0x4681d3[_0xa2aeb8(0x108)](_0x373667),_0x47e3f3['push'](_0x4681d3);}else{const _0x582b90=JSON[_0xa2aeb8(0xa6)](_0x227ab8);throw new veeva_error_1[(_0xa2aeb8(0xbb))](_0x582b90[_0xa2aeb8(0x8c)]);}}return _0x47e3f3;}async[a312_0x1789f7(0x89)](_0x322e9d,_0x33b4e1){const _0x400127=a312_0x1789f7;var _0x2454aa;this[_0x400127(0xe8)][_0x400127(0xe6)]('Unpack\x20zip\x20and\x20create\x20metadata\x20items.');const _0x1dfff4=this['formMetadataItemDtoList'](_0x322e9d),_0x1abdb6=_0x1dfff4[_0x400127(0xe9)]((_0x589ed2,_0x1247da)=>_0x589ed2[_0x400127(0xda)](_0x1247da['label'],_0x1247da),new Map());for(const _0x2e3e08 of _0x33b4e1){for(const _0x32da82 in _0x2e3e08['files']){const _0x564e62=_0x32da82[_0x400127(0x7b)]('/')['at'](-0x1);if(_0x1abdb6[_0x400127(0xe5)](_0x564e62)){const _0x4c22ea=await((_0x2454aa=_0x2e3e08[_0x400127(0xf5)](_0x32da82))===null||_0x2454aa===void 0x0?void 0x0:_0x2454aa[_0x400127(0xa4)](_0x400127(0xad)));if(_0x4c22ea){const _0x1d3a65=new jszip_1['default']();_0x1d3a65[_0x400127(0xf5)](_0x564e62,_0x4c22ea),_0x1abdb6[_0x400127(0xc7)](_0x564e62)['body']=await _0x1d3a65[_0x400127(0xb3)]({'type':_0x400127(0xe1)});}}}}return _0x1dfff4[_0x400127(0xd6)](_0x3af81e=>!_0x3af81e[_0x400127(0xa2)])[_0x400127(0xc6)](_0x3ff267=>{const _0x32f64b=_0x400127;this['_logger'][_0x32f64b(0xe6)](_0x32f64b(0xb5)+_0x3ff267[_0x32f64b(0xfb)]+'.'+_0x3ff267[_0x32f64b(0x95)]+'\x20from\x20outbound\x20package');}),_0x1dfff4[_0x400127(0xd6)](_0x43d19c=>_0x43d19c[_0x400127(0xa2)]);}[a312_0x1789f7(0xb0)](_0x4cc5d4){return _0x4cc5d4['map'](_0x510338=>{const _0x1904a8=a312_0x5b2e,_0x2d5b23=new metadata_item_dto_1[(_0x1904a8(0x112))]();return _0x2d5b23['name']=_0x510338['name'],_0x2d5b23[_0x1904a8(0xdf)]=_0x510338['name'],_0x2d5b23['snapshotId']=this['_snapshotId'],_0x2d5b23[_0x1904a8(0x83)]=_0x510338[_0x1904a8(0x102)]+'.'+_0x510338[_0x1904a8(0x95)]+_0x1904a8(0x77),_0x2d5b23[_0x1904a8(0xfb)]=_0x510338[_0x1904a8(0x102)],_0x2d5b23[_0x1904a8(0xf1)]=_0x510338[_0x1904a8(0xf1)],_0x2d5b23[_0x1904a8(0xa3)]=![],_0x2d5b23;});}async[a312_0x1789f7(0x10a)](_0x5e4727){const _0x1dd510=a312_0x1789f7;this[_0x1dd510(0xe8)][_0x1dd510(0xe6)](_0x1dd510(0xc0));const _0x4ccf18=veeva_constants_1[_0x1dd510(0x9a)][_0x1dd510(0xb9)]+_0x1dd510(0x79);await veeva_service_1[_0x1dd510(0xbc)][_0x1dd510(0xd3)](_0x4ccf18,this[_0x1dd510(0xff)],_0x5e4727,this['_logger']);}async[a312_0x1789f7(0x73)](_0x388fc2){const _0x20fc1a=a312_0x1789f7;this[_0x20fc1a(0xe8)][_0x20fc1a(0xe6)](_0x20fc1a(0xe2));const _0x31428d=veeva_constants_1[_0x20fc1a(0x9a)]['ENDPOINT_CREATE_RECORDS']+_0x20fc1a(0xe4);await veeva_service_1[_0x20fc1a(0xbc)]['deleteVeevaObjectRecords'](_0x31428d,this[_0x20fc1a(0xff)],_0x388fc2,this[_0x20fc1a(0xe8)]);}async[a312_0x1789f7(0xd7)](_0x255a19){const _0x51c576=a312_0x1789f7;this['_logger'][_0x51c576(0xe6)]('Saving\x20Attachments.'),await this[_0x51c576(0xc1)](_0x255a19),this['_logger'][_0x51c576(0xe6)](_0x51c576(0x98)+_0x255a19[_0x51c576(0xbd)]+_0x51c576(0xeb));const _0x44e6e7=_0x255a19[_0x51c576(0x106)](_0x1cd9f3=>{const _0x4e83bd=_0x51c576;return{[constants_1[_0x4e83bd(0x7a)]+_0x4e83bd(0xbe)]:_0x1cd9f3[_0x4e83bd(0x95)],[constants_1[_0x4e83bd(0x7a)]+_0x4e83bd(0x74)]:_0x1cd9f3[_0x4e83bd(0xdf)],[constants_1['FLOSUM_NAMESPACE']+_0x4e83bd(0x91)]:_0x1cd9f3[_0x4e83bd(0xd0)],[constants_1['FLOSUM_NAMESPACE']+_0x4e83bd(0xcd)]:_0x1cd9f3[_0x4e83bd(0x83)],[constants_1['FLOSUM_NAMESPACE']+_0x4e83bd(0xe3)]:_0x1cd9f3[_0x4e83bd(0xa3)],[constants_1[_0x4e83bd(0x7a)]+'Veeva_Component_Type__c']:_0x1cd9f3[_0x4e83bd(0xfb)],[constants_1[_0x4e83bd(0x7a)]+'Attachment_ID__c']:_0x1cd9f3[_0x4e83bd(0x84)],[constants_1[_0x4e83bd(0x7a)]+_0x4e83bd(0x8d)]:_0x1cd9f3['lastModifiedDate']};}),_0x21d4e6=await salesforce_service_1[_0x51c576(0xaa)][_0x51c576(0xf8)](this['_connectionSalesforce'],constants_1[_0x51c576(0x7a)]+_0x51c576(0xf9),_0x44e6e7);let _0x17a1fa=!![];_0x21d4e6['forEach']((_0x2e316c,_0x21fc2d)=>{const _0x47d328=_0x51c576;this[_0x47d328(0xe8)][_0x47d328(0xe6)]('Saving\x20'+_0x255a19[_0x21fc2d][_0x47d328(0xfb)]+'.'+_0x255a19[_0x21fc2d]['name']);if(!_0x2e316c[_0x47d328(0xa7)]){_0x17a1fa=![];const _0x4c4f28=new salesforce_dml_error_1[(_0x47d328(0xf0))](_0x2e316c[_0x47d328(0x8c)]);this[_0x47d328(0xe8)]['logError'](_0x4c4f28);}});if(!_0x17a1fa)throw new Error(_0x51c576(0xea));}async[a312_0x1789f7(0xc1)](_0x3dc9c1){const _0x513f64=a312_0x1789f7,_0x1863aa=this['formAttachments'](_0x3dc9c1),_0x328736=await salesforce_service_1[_0x513f64(0xaa)][_0x513f64(0xf8)](this[_0x513f64(0x87)],SnapshotService[_0x513f64(0xb7)],_0x1863aa),_0x100f0f=[];_0x328736[_0x513f64(0xc6)]((_0x183451,_0x4923f4)=>{const _0x1c87ee=_0x513f64;_0x183451['success']?(_0x3dc9c1[_0x4923f4][_0x1c87ee(0x84)]=_0x183451['id'],_0x3dc9c1[_0x4923f4][_0x1c87ee(0xa3)]=!![]):_0x100f0f[_0x1c87ee(0xcb)](..._0x183451[_0x1c87ee(0x8c)]);});if(_0x100f0f['length'])throw new salesforce_dml_error_1[(_0x513f64(0xf0))](_0x100f0f);}[a312_0x1789f7(0x104)](_0x3db08d){const _0x2d4513=a312_0x1789f7;return _0x3db08d[_0x2d4513(0x106)](_0x3747e2=>({'ParentId':this[_0x2d4513(0x7d)],'Name':_0x3747e2[_0x2d4513(0xfb)],'ContentType':_0x2d4513(0xb4),'Body':_0x3747e2['body'],'Description':_0x3747e2[_0x2d4513(0xfb)]}));}async[a312_0x1789f7(0xa1)](_0x19f786){const _0x386cae=a312_0x1789f7,_0xbb0490={[constants_1[_0x386cae(0x7a)]+'Is_Completed__c']:!![],[constants_1[_0x386cae(0x7a)]+_0x386cae(0xf7)]:!_0x19f786},_0x2b95ee={[constants_1[_0x386cae(0x7a)]+_0x386cae(0xf7)]:!_0x19f786,[constants_1['FLOSUM_NAMESPACE']+_0x386cae(0x105)]:_0x19f786,[constants_1['FLOSUM_NAMESPACE']+_0x386cae(0x107)]:_0x19f786?status_enums_1['MetadataLogStatus'][_0x386cae(0xb2)]:status_enums_1['MetadataLogStatus']['EXCEPTION'],[constants_1['FLOSUM_NAMESPACE']+_0x386cae(0xc4)]:!![]};await this['_connectionSalesforce'][_0x386cae(0x7c)](flosum_constants_1['FlosumConstants'][_0x386cae(0xf3)]+'/'+constants_1[_0x386cae(0x7a)]+_0x386cae(0xa9)+this['_snapshotId'],_0xbb0490),await this['_connectionSalesforce']['patch'](flosum_constants_1[_0x386cae(0x111)][_0x386cae(0xf3)]+'/'+constants_1[_0x386cae(0x7a)]+_0x386cae(0x92)+this[_0x386cae(0x10b)],_0x2b95ee),this['_logger'][_0x386cae(0xe6)](_0x386cae(0xe7)+(_0x19f786?_0x386cae(0x85):_0x386cae(0xa0))+'.'),await this['_logger']['updateLog']();}}exports['SnapshotService']=SnapshotService,SnapshotService[a312_0x1789f7(0x9d)]=a312_0x1789f7(0x9b),SnapshotService['ATTACMENT']='Attachment';