function a312_0x2785(_0x5e33f1,_0x228b84){const _0x458574=a312_0x2eba();return a312_0x2785=function(_0x16ecfd,_0x491c93){_0x16ecfd=_0x16ecfd-0x87;let _0x2eba26=_0x458574[_0x16ecfd];return _0x2eba26;},a312_0x2785(_0x5e33f1,_0x228b84);}const a312_0x11c16c=a312_0x2785;(function(_0x155029,_0xf59a8c){const _0xda48eb=a312_0x2785,_0x380764=_0x155029();while(!![]){try{const _0x4189b2=-parseInt(_0xda48eb(0xf4))/0x1*(-parseInt(_0xda48eb(0x96))/0x2)+parseInt(_0xda48eb(0x110))/0x3+parseInt(_0xda48eb(0xa2))/0x4*(-parseInt(_0xda48eb(0xd7))/0x5)+-parseInt(_0xda48eb(0x94))/0x6+-parseInt(_0xda48eb(0xc2))/0x7*(parseInt(_0xda48eb(0x124))/0x8)+-parseInt(_0xda48eb(0xbd))/0x9+parseInt(_0xda48eb(0x8a))/0xa;if(_0x4189b2===_0xf59a8c)break;else _0x380764['push'](_0x380764['shift']());}catch(_0x7e1b8a){_0x380764['push'](_0x380764['shift']());}}}(a312_0x2eba,0x4c593));const a312_0x491c93=(function(){let _0x15a433=!![];return function(_0x468d90,_0x18810b){const _0x3fa8b7=_0x15a433?function(){const _0x10ea97=a312_0x2785;if(_0x18810b){const _0x7cac11=_0x18810b[_0x10ea97(0xdb)](_0x468d90,arguments);return _0x18810b=null,_0x7cac11;}}:function(){};return _0x15a433=![],_0x3fa8b7;};}()),a312_0x16ecfd=a312_0x491c93(this,function(){const _0x151337=a312_0x2785;return a312_0x16ecfd[_0x151337(0x90)]()[_0x151337(0xc1)](_0x151337(0x108))[_0x151337(0x90)]()['constructor'](a312_0x16ecfd)[_0x151337(0xc1)](_0x151337(0x108));});a312_0x16ecfd();'use strict';var __importDefault=this&&this[a312_0x11c16c(0x92)]||function(_0xd0ff4f){const _0x3a0f4d=a312_0x11c16c;return _0xd0ff4f&&_0xd0ff4f[_0x3a0f4d(0x11a)]?_0xd0ff4f:{'default':_0xd0ff4f};};function a312_0x2eba(){const _0x1a860b=['930234TeOpYo','MetadataLogStatus','saveAttachments','veevaComponentType','Snapshot\x20started.','../dtos/veeva-component.dto','Saving\x20Attachments.','finishSnapshot','Succeed__c','defineProperty','__esModule','VeevaConstants','artifacts','push','Retrieve\x20Jobs\x20Status','apiName','Status__c','FLOSUM_NAMESPACE','filter','Last_Modified_Date__c','24736JfvLzw','inactive__v','../constants/veeva.constants','rel','name','../constants/flosum.constants','type','saveComponentsInSalesforce','responseStatus','execute','Unpack\x20zip\x20and\x20create\x20metadata\x20items.','7417410iUHyYK','EXCEPTION','Getting\x20names\x20of\x20outbound\x20packages','\x27\x20AND\x20component_name__v\x20CONTAINS\x20(\x27','label','base64','toString','VeevaService','__importDefault','Snapshot__c','3146088BkrGkM','default','6iGmIVC','Metadata_Item__c','SalesforceService','_logger','post','../dtos/metadata-item.dto','isRetrieved','Attachment','SUCCESS','createVeevaObjectRecords','Cannot\x20Save\x20Metadata\x20Items','metadataLogId','39252DvZWaw','set','includes','Attachment_ID__c','map','getComponentsMetadataByTypes','deleteOutboundPackages','length','Saving\x20','application/json','links','SnapshotService','Retrieve\x20Outbound\x20Package\x20zip\x20list','chunkArray','Name__c','createExportOutboundPackages','from','ATTACMENT','getJobResult','Is_Error__c','MetadataItemDto','Cannot\x20retrieve\x20','MAXIMUM_SIZE_OF_PACKAGE','arraybuffer','_attachmentLogId','formAttachments','_connectionVeeva','1601748VZeeta','content-type','name__v','./veeva.service','search','49IVqtAo','BUILD_WHERE_BY_NAME_LIMIT','formMetadataItemDtoList','_connectionSalesforce','API_Name__c','Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20','files','../classes/errors/veeva-error','_metadataLogId','outbound_package__v','timeZone','package_component__v','patch','reduce','VeevaComponentDto','errors','log','_selectedMetaTypes','_selectedComponentMap','executeVQL','updateLog','155pEtYGt','join','all','Creating\x20outbound\x20packages','apply','Label__c','_systemLogger','deleteVeevaObjectRecords','Snapshot','with\x20error','application/x-www-form-urlencoded','has','./salesforce.service','body','lastModifiedDate','exportOutboundPackage','Adding\x20components\x20to\x20outbound\x20package','attachmentId','ENDPOINT_UPSERT_RECORD','get','split','SalesforceDmlError','ceil','Is_Completed__c','.mdl','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20CONTAINS\x20(\x27','executeManyVQL','migration__sys','jszip','96357bxScRu','getEndpointArtifactList','retrieveVPKList','success','COMPLETED','insertMultipleRecords','Deleting\x20outbound\x20packages.','getComponentsMetadataByTypeAndName','file','Retrieve\x20collection\x20metadata\x20of\x20components','OUTBOUND_PACKAGE_NAME','snapshotId','VeevaResponseStatus','ENDPOINT_VQL','FlosumConstants','values','../../shared/utils','_snapshotId','ENDPOINT_CREATE_RECORDS','createOutboundPackages','(((.+)+)+)+$','logError','createPackageComponents','selectedMetaTypes','\x27,\x27','async','application/zip','deletePackageComponents'];a312_0x2eba=function(){return _0x1a860b;};return a312_0x2eba();}Object[a312_0x11c16c(0x119)](exports,a312_0x11c16c(0x11a),{'value':!![]}),exports['SnapshotService']=void 0x0;const jszip_1=__importDefault(require(a312_0x11c16c(0xf3))),flosum_constants_1=require(a312_0x11c16c(0x129)),veeva_constants_1=require(a312_0x11c16c(0x126)),veeva_service_1=require(a312_0x11c16c(0xc0)),veeva_component_dto_1=require(a312_0x11c16c(0x115)),metadata_item_dto_1=require(a312_0x11c16c(0x9b)),utils_1=require(a312_0x11c16c(0x104)),constants_1=require('../../../constants'),salesforce_service_1=require(a312_0x11c16c(0xe3)),status_enums_1=require('../enums/status.enums'),salesforce_dml_error_1=require('../classes/errors/salesforce-dml-error'),veeva_error_1=require(a312_0x11c16c(0xc9));class SnapshotService{constructor(_0x2b3c72,_0x4f18d8,_0x46be89,_0x4a6b21){const _0x2904de=a312_0x11c16c;this[_0x2904de(0xc5)]=_0x4f18d8,this['_connectionVeeva']=_0x46be89,this[_0x2904de(0x99)]=_0x4a6b21,this[_0x2904de(0x105)]=_0x2b3c72['snapshotId'],this[_0x2904de(0xca)]=_0x2b3c72[_0x2904de(0xa1)],this[_0x2904de(0xba)]=_0x2b3c72['attachmentLogId'],this['_timeZone']=_0x2b3c72[_0x2904de(0xcc)],this['_selectedMetaTypes']=_0x2b3c72[_0x2904de(0x10b)],this[_0x2904de(0xd4)]=_0x2b3c72['selectedComponentMap'];}async[a312_0x11c16c(0x88)](){const _0x458640=a312_0x11c16c;try{this['_logger']['log'](_0x458640(0x114));const _0x5e4c45=Array[_0x458640(0xb2)](Object['values'](this[_0x458640(0xd4)]))[_0x458640(0xa9)]?await this['getComponentsMetadataByTypeAndName']():await this['getComponentsMetadataByTypes']();await this[_0x458640(0x99)]['updateLog']();const _0x540eed=await this[_0x458640(0x107)](Math[_0x458640(0xed)](_0x5e4c45['length']/veeva_constants_1['VeevaConstants']['MAXIMUM_SIZE_OF_PACKAGE'])),_0x318bf2=await this[_0x458640(0x10a)](_0x5e4c45,_0x540eed);await this[_0x458640(0x99)]['updateLog']();const _0x213fd8=await this[_0x458640(0xe6)](_0x540eed),_0x1ab7e8=await this['createMetadataItemListWithBody'](_0x5e4c45,_0x213fd8);await this['saveComponentsInSalesforce'](_0x1ab7e8),await this[_0x458640(0x99)][_0x458640(0xd6)](),await this[_0x458640(0x10f)](_0x318bf2),await this[_0x458640(0xa8)](_0x540eed),await this[_0x458640(0x117)](!![]);}catch(_0x528473){this[_0x458640(0x99)][_0x458640(0x109)](_0x528473),await this[_0x458640(0x117)](![])['catch'](_0x4eb99e=>this[_0x458640(0xdd)]['error'](_0x4eb99e));}}async[a312_0x11c16c(0xa7)](){const _0x223f95=a312_0x11c16c;this['_logger'][_0x223f95(0xd2)](_0x223f95(0xfd));const _0x364f62=[],_0x1f5853=_0x223f95(0xf0)+this[_0x223f95(0xd3)][_0x223f95(0xd8)](_0x223f95(0x10c))+'\x27)',_0x4984df=veeva_constants_1[_0x223f95(0x11b)][_0x223f95(0x101)]+_0x1f5853,_0x5c82f7=await veeva_service_1[_0x223f95(0x91)][_0x223f95(0xd5)](_0x4984df,this[_0x223f95(0xbc)]);for(const _0x288c66 of _0x5c82f7){const _0x3cae2f=new veeva_component_dto_1[(_0x223f95(0xd0))](_0x288c66),{name:_0x4794e4,type:_0x2e203d,status:_0xa97448}=_0x3cae2f;_0xa97448[_0x223f95(0xa4)](_0x223f95(0x125))?this[_0x223f95(0x99)][_0x223f95(0xd2)](_0x223f95(0xc7)+_0x2e203d+'.'+_0x4794e4):_0x364f62[_0x223f95(0x11d)](_0x3cae2f);}return _0x364f62;}async[a312_0x11c16c(0xfb)](){const _0x3151f0=a312_0x11c16c;this[_0x3151f0(0x99)]['log']('Retrieve\x20collection\x20metadata\x20of\x20components\x20by\x20type\x20and\x20names');const _0x57f14d=[];for(const _0x3b54fd in this['_selectedComponentMap']){const _0x3058fe=(0x0,utils_1[_0x3151f0(0xaf)])(this['_selectedComponentMap'][_0x3b54fd],veeva_constants_1[_0x3151f0(0x11b)][_0x3151f0(0xc3)]),_0x5ab855=_0x3058fe[_0x3151f0(0xa6)](_0x4e4ce6=>veeva_constants_1['VeevaConstants']['ENDPOINT_VQL']+('SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20=\x27'+_0x3b54fd+_0x3151f0(0x8d)+_0x4e4ce6[_0x3151f0(0xd8)](_0x3151f0(0x10c))+'\x27)'));_0x57f14d[_0x3151f0(0x11d)](..._0x5ab855);}const _0x2cc890=[],_0x4ef48d=await veeva_service_1[_0x3151f0(0x91)][_0x3151f0(0xf1)](_0x57f14d,this[_0x3151f0(0xbc)]);for(const _0x3361bf of _0x4ef48d){const _0xbe9bb0=new veeva_component_dto_1[(_0x3151f0(0xd0))](_0x3361bf),{name:_0x5a486e,type:_0x399249,status:_0x481692}=_0xbe9bb0,_0x30cec0=_0x481692[_0x3151f0(0xa4)](_0x3151f0(0x125));_0x30cec0?this[_0x3151f0(0x99)][_0x3151f0(0xd2)](_0x3151f0(0xc7)+_0x399249+'.'+_0x5a486e):_0x2cc890[_0x3151f0(0x11d)](_0xbe9bb0);}return _0x2cc890;}async[a312_0x11c16c(0x107)](_0x2f076e){const _0x249cbd=a312_0x11c16c;this[_0x249cbd(0x99)]['log'](_0x249cbd(0xda));const _0x2fc4d0=veeva_constants_1['VeevaConstants'][_0x249cbd(0x106)]+'outbound_package__v',_0x3cd593=new Array(_0x2f076e)['fill']({'summary__v':SnapshotService['OUTBOUND_PACKAGE_NAME'],'object_type__v.api__name__v':_0x249cbd(0xf2)});return await veeva_service_1[_0x249cbd(0x91)][_0x249cbd(0x9f)](_0x2fc4d0,this[_0x249cbd(0xbc)],_0x3cd593,this['_logger']);}async[a312_0x11c16c(0x10a)](_0x2dd9fc,_0x36b92a){const _0x2ad093=a312_0x11c16c;this[_0x2ad093(0x99)][_0x2ad093(0xd2)](_0x2ad093(0xe7));const _0x1371a8=veeva_constants_1[_0x2ad093(0x11b)][_0x2ad093(0x106)]+_0x2ad093(0xcd),_0x48c4c8=_0x2dd9fc[_0x2ad093(0xa6)]((_0x51fb1b,_0x149bf0)=>({'vault_component__v':_0x51fb1b['id'],'outbound_package__v':_0x36b92a[Math[_0x2ad093(0xed)]((_0x149bf0+0x1)/veeva_constants_1[_0x2ad093(0x11b)][_0x2ad093(0xb8)])-0x1]}));return await veeva_service_1['VeevaService'][_0x2ad093(0x9f)](_0x1371a8,this['_connectionVeeva'],_0x48c4c8,this['_logger']);}async[a312_0x11c16c(0xe6)](_0x570389){const _0x201b6c=a312_0x11c16c,_0x42911a=await this['getPackageNames'](_0x570389),_0x3d6b0a=await this[_0x201b6c(0xb1)](Array[_0x201b6c(0xb2)](_0x42911a[_0x201b6c(0x103)]())),_0x2875ef=await this[_0x201b6c(0xf5)](_0x3d6b0a);return await this[_0x201b6c(0xf6)](_0x2875ef);}async['getPackageNames'](_0x190104){const _0x550039=a312_0x11c16c;this[_0x550039(0x99)]['log'](_0x550039(0x8c));const _0x29d8ec='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27'+_0x190104[_0x550039(0xd8)]('\x27,\x27')+'\x27)',_0x3ada8e=veeva_constants_1[_0x550039(0x11b)][_0x550039(0x101)]+_0x29d8ec,_0x575db5=await veeva_service_1['VeevaService']['executeVQL'](_0x3ada8e,this[_0x550039(0xbc)]);return _0x575db5[_0x550039(0xcf)]((_0x558768,_0x4755fd)=>_0x558768[_0x550039(0xa3)](_0x4755fd['id'],_0x4755fd[_0x550039(0xbf)]),new Map());}async[a312_0x11c16c(0xb1)](_0x11ae1a){const _0x3aa95c=a312_0x11c16c;this[_0x3aa95c(0x99)][_0x3aa95c(0xd2)]('Create\x20Export\x20outbound\x20packages.');const _0x5b981d=[],_0x3e6c4c=_0x11ae1a['map'](_0x1cc4b1=>{const _0x2a15ec=_0x3aa95c;return this['_connectionVeeva'][_0x2a15ec(0x9a)](veeva_constants_1[_0x2a15ec(0x11b)]['ENDPOINT_EXPORT_IMPORT_PACKAGE'],encodeURI('packageName')+'='+encodeURI(_0x1cc4b1),{'headers':{'Content-Type':_0x2a15ec(0xe1)}});}),_0x355b14=await Promise[_0x3aa95c(0xd9)](_0x3e6c4c);for(const {data:_0x5c2391}of _0x355b14){if(_0x5c2391[_0x3aa95c(0x87)]===status_enums_1[_0x3aa95c(0x100)][_0x3aa95c(0x9e)]){const {url:_0x13038a}=_0x5c2391;_0x5b981d[_0x3aa95c(0x11d)](_0x13038a);}else throw new veeva_error_1['VeevaError'](_0x5c2391[_0x3aa95c(0xd1)]);}return _0x5b981d;}async[a312_0x11c16c(0xf5)](_0x14ff32){const _0x4e851d=a312_0x11c16c;this[_0x4e851d(0x99)][_0x4e851d(0xd2)](_0x4e851d(0x11e));const _0x558913=[],_0x6177ad=await veeva_service_1[_0x4e851d(0x91)][_0x4e851d(0xb4)](_0x14ff32,this[_0x4e851d(0xbc)],this[_0x4e851d(0x99)]);for(const _0x6f05ea of _0x6177ad){const _0x18283a=_0x6f05ea[_0x4e851d(0xac)][_0x4e851d(0x122)](_0x182bb6=>_0x182bb6[_0x4e851d(0x127)]===_0x4e851d(0x11c))['map'](_0x3a1a07=>_0x3a1a07['href']);_0x558913[_0x4e851d(0x11d)](..._0x18283a);}return _0x558913;}async[a312_0x11c16c(0xf6)](_0x482c32){const _0xc23944=a312_0x11c16c;var _0x474b73;const _0x3a3c5f=[];this[_0xc23944(0x99)][_0xc23944(0xd2)](_0xc23944(0xae));for(const _0x1a45de of _0x482c32){const {data:_0x5bef47,headers:_0x1708a8}=await this[_0xc23944(0xbc)]['get'](_0x1a45de,{'responseType':_0xc23944(0xb9)}),_0x1368bb=(_0x474b73=_0x1708a8[_0xc23944(0xbe)])===null||_0x474b73===void 0x0?void 0x0:_0x474b73[_0xc23944(0xa4)](_0xc23944(0xab));if(!_0x1368bb){const _0x3ac8a0=_0x5bef47,_0x23b6a6=new jszip_1[(_0xc23944(0x95))]();await _0x23b6a6['loadAsync'](_0x3ac8a0),_0x3a3c5f['push'](_0x23b6a6);}else{const _0x4db842=JSON['parse'](_0x5bef47);throw new veeva_error_1['VeevaError'](_0x4db842[_0xc23944(0xd1)]);}}return _0x3a3c5f;}async['createMetadataItemListWithBody'](_0x326f53,_0x3c02ed){const _0x4a4dfc=a312_0x11c16c;var _0x528b8a;this[_0x4a4dfc(0x99)][_0x4a4dfc(0xd2)](_0x4a4dfc(0x89));const _0x22832d=this['formMetadataItemDtoList'](_0x326f53),_0x3e8492=_0x22832d['reduce']((_0x28943f,_0x15485c)=>_0x28943f[_0x4a4dfc(0xa3)](_0x15485c['label'],_0x15485c),new Map());for(const _0x579872 of _0x3c02ed){for(const _0x202c43 in _0x579872[_0x4a4dfc(0xc8)]){const _0x4d8329=_0x202c43[_0x4a4dfc(0xeb)]('/')['at'](-0x1);if(_0x3e8492[_0x4a4dfc(0xe2)](_0x4d8329)){const _0x34d4fa=await((_0x528b8a=_0x579872[_0x4a4dfc(0xfc)](_0x202c43))===null||_0x528b8a===void 0x0?void 0x0:_0x528b8a[_0x4a4dfc(0x10d)]('string'));if(_0x34d4fa){const _0xf33260=new jszip_1[(_0x4a4dfc(0x95))]();_0xf33260[_0x4a4dfc(0xfc)](_0x4d8329,_0x34d4fa),_0x3e8492[_0x4a4dfc(0xea)](_0x4d8329)[_0x4a4dfc(0xe4)]=await _0xf33260['generateAsync']({'type':_0x4a4dfc(0x8f)});}}}}return _0x22832d[_0x4a4dfc(0x122)](_0x31a411=>!_0x31a411['body'])['forEach'](_0x3477cb=>{const _0x4c3280=_0x4a4dfc;this[_0x4c3280(0x99)][_0x4c3280(0xd2)](_0x4c3280(0xb7)+_0x3477cb[_0x4c3280(0x113)]+'.'+_0x3477cb[_0x4c3280(0x128)]+'\x20from\x20outbound\x20package');}),_0x22832d[_0x4a4dfc(0x122)](_0x43659b=>_0x43659b[_0x4a4dfc(0xe4)]);}[a312_0x11c16c(0xc4)](_0x2f7a83){const _0x384fd4=a312_0x11c16c;return _0x2f7a83[_0x384fd4(0xa6)](_0x3d4ccb=>{const _0x4fe75c=_0x384fd4,_0x2ddf9c=new metadata_item_dto_1[(_0x4fe75c(0xb6))]();return _0x2ddf9c[_0x4fe75c(0x128)]=_0x3d4ccb[_0x4fe75c(0x128)],_0x2ddf9c[_0x4fe75c(0x11f)]=_0x3d4ccb[_0x4fe75c(0x128)],_0x2ddf9c[_0x4fe75c(0xff)]=this[_0x4fe75c(0x105)],_0x2ddf9c['label']=_0x3d4ccb[_0x4fe75c(0x12a)]+'.'+_0x3d4ccb[_0x4fe75c(0x128)]+_0x4fe75c(0xef),_0x2ddf9c[_0x4fe75c(0x113)]=_0x3d4ccb[_0x4fe75c(0x12a)],_0x2ddf9c[_0x4fe75c(0xe5)]=_0x3d4ccb[_0x4fe75c(0xe5)],_0x2ddf9c['isRetrieved']=![],_0x2ddf9c;});}async['deletePackageComponents'](_0xd6dd9b){const _0xa70f92=a312_0x11c16c;this[_0xa70f92(0x99)]['log']('Removing\x20components\x20from\x20outbound\x20packages.');const _0x4b35bf=veeva_constants_1[_0xa70f92(0x11b)]['ENDPOINT_CREATE_RECORDS']+_0xa70f92(0xcd);await veeva_service_1[_0xa70f92(0x91)][_0xa70f92(0xde)](_0x4b35bf,this[_0xa70f92(0xbc)],_0xd6dd9b,this[_0xa70f92(0x99)]);}async[a312_0x11c16c(0xa8)](_0x187e2b){const _0x35ead1=a312_0x11c16c;this[_0x35ead1(0x99)][_0x35ead1(0xd2)](_0x35ead1(0xfa));const _0x439c02=veeva_constants_1[_0x35ead1(0x11b)]['ENDPOINT_CREATE_RECORDS']+_0x35ead1(0xcb);await veeva_service_1[_0x35ead1(0x91)][_0x35ead1(0xde)](_0x439c02,this[_0x35ead1(0xbc)],_0x187e2b,this[_0x35ead1(0x99)]);}async[a312_0x11c16c(0x12b)](_0x1b04c0){const _0x129dc4=a312_0x11c16c;this[_0x129dc4(0x99)]['log'](_0x129dc4(0x116)),await this[_0x129dc4(0x112)](_0x1b04c0),this[_0x129dc4(0x99)][_0x129dc4(0xd2)](_0x129dc4(0xaa)+_0x1b04c0[_0x129dc4(0xa9)]+'\x20Metadata\x20Items');const _0x37cdb9=_0x1b04c0[_0x129dc4(0xa6)](_0x396935=>{const _0x1d293c=_0x129dc4;return{[constants_1[_0x1d293c(0x121)]+_0x1d293c(0xb0)]:_0x396935[_0x1d293c(0x128)],[constants_1[_0x1d293c(0x121)]+_0x1d293c(0xc6)]:_0x396935[_0x1d293c(0x11f)],[constants_1[_0x1d293c(0x121)]+_0x1d293c(0x93)]:_0x396935[_0x1d293c(0xff)],[constants_1[_0x1d293c(0x121)]+_0x1d293c(0xdc)]:_0x396935[_0x1d293c(0x8e)],[constants_1[_0x1d293c(0x121)]+'Is_Retrieved__c']:_0x396935[_0x1d293c(0x9c)],[constants_1[_0x1d293c(0x121)]+'Veeva_Component_Type__c']:_0x396935[_0x1d293c(0x113)],[constants_1[_0x1d293c(0x121)]+_0x1d293c(0xa5)]:_0x396935['attachmentId'],[constants_1[_0x1d293c(0x121)]+_0x1d293c(0x123)]:_0x396935[_0x1d293c(0xe5)]};}),_0x714c79=await salesforce_service_1[_0x129dc4(0x98)][_0x129dc4(0xf9)](this['_connectionSalesforce'],constants_1[_0x129dc4(0x121)]+_0x129dc4(0x97),_0x37cdb9);let _0x515d69=!![];_0x714c79['forEach']((_0x4d2e48,_0x501f32)=>{const _0x697daa=_0x129dc4;this['_logger'][_0x697daa(0xd2)]('Saving\x20'+_0x1b04c0[_0x501f32][_0x697daa(0x113)]+'.'+_0x1b04c0[_0x501f32][_0x697daa(0x128)]);if(!_0x4d2e48[_0x697daa(0xf7)]){_0x515d69=![];const _0x8292f9=new salesforce_dml_error_1['SalesforceDmlError'](_0x4d2e48['errors']);this['_logger'][_0x697daa(0x109)](_0x8292f9);}});if(!_0x515d69)throw new Error(_0x129dc4(0xa0));}async[a312_0x11c16c(0x112)](_0x39717e){const _0x18dca6=a312_0x11c16c,_0x407e5c=this[_0x18dca6(0xbb)](_0x39717e),_0x2e79bf=await salesforce_service_1[_0x18dca6(0x98)][_0x18dca6(0xf9)](this['_connectionSalesforce'],SnapshotService[_0x18dca6(0xb3)],_0x407e5c),_0x2d0ad7=[];_0x2e79bf['forEach']((_0x17f6c6,_0x11cd6a)=>{const _0x361a7d=_0x18dca6;_0x17f6c6[_0x361a7d(0xf7)]?(_0x39717e[_0x11cd6a][_0x361a7d(0xe8)]=_0x17f6c6['id'],_0x39717e[_0x11cd6a][_0x361a7d(0x9c)]=!![]):_0x2d0ad7['push'](..._0x17f6c6[_0x361a7d(0xd1)]);});if(_0x2d0ad7[_0x18dca6(0xa9)])throw new salesforce_dml_error_1[(_0x18dca6(0xec))](_0x2d0ad7);}[a312_0x11c16c(0xbb)](_0x4b8d34){const _0x2b9569=a312_0x11c16c;return _0x4b8d34[_0x2b9569(0xa6)](_0x329af9=>({'ParentId':this[_0x2b9569(0x105)],'Name':_0x329af9[_0x2b9569(0x113)],'ContentType':_0x2b9569(0x10e),'Body':_0x329af9[_0x2b9569(0xe4)],'Description':_0x329af9[_0x2b9569(0x113)]}));}async[a312_0x11c16c(0x117)](_0x5c03a4){const _0x3f646d=a312_0x11c16c,_0x45f602={[constants_1[_0x3f646d(0x121)]+_0x3f646d(0xee)]:!![],[constants_1[_0x3f646d(0x121)]+_0x3f646d(0xb5)]:!_0x5c03a4},_0x4033a8={[constants_1[_0x3f646d(0x121)]+'Is_Error__c']:!_0x5c03a4,[constants_1[_0x3f646d(0x121)]+_0x3f646d(0x118)]:_0x5c03a4,[constants_1[_0x3f646d(0x121)]+_0x3f646d(0x120)]:_0x5c03a4?status_enums_1[_0x3f646d(0x111)][_0x3f646d(0xf8)]:status_enums_1[_0x3f646d(0x111)][_0x3f646d(0x8b)],[constants_1[_0x3f646d(0x121)]+'Job_Completed__c']:!![]};await this[_0x3f646d(0xc5)][_0x3f646d(0xce)](flosum_constants_1[_0x3f646d(0x102)][_0x3f646d(0xe9)]+'/'+constants_1['FLOSUM_NAMESPACE']+'Snapshot__c/'+this[_0x3f646d(0x105)],_0x45f602),await this[_0x3f646d(0xc5)][_0x3f646d(0xce)](flosum_constants_1[_0x3f646d(0x102)][_0x3f646d(0xe9)]+'/'+constants_1['FLOSUM_NAMESPACE']+'Metadata_Log__c/'+this['_metadataLogId'],_0x4033a8),this[_0x3f646d(0x99)][_0x3f646d(0xd2)]('Snapshot\x20completed\x20'+(_0x5c03a4?'successfully':_0x3f646d(0xe0))+'.'),await this[_0x3f646d(0x99)]['updateLog']();}}exports[a312_0x11c16c(0xad)]=SnapshotService,SnapshotService[a312_0x11c16c(0xfe)]=a312_0x11c16c(0xdf),SnapshotService[a312_0x11c16c(0xb3)]=a312_0x11c16c(0x9d);