const a257_0x3237cd=a257_0x3005;(function(_0x4ebaa0,_0x518514){const _0xa8891e=a257_0x3005,_0x41b344=_0x4ebaa0();while(!![]){try{const _0x19c286=parseInt(_0xa8891e(0x169))/0x1+-parseInt(_0xa8891e(0x155))/0x2+-parseInt(_0xa8891e(0xcc))/0x3*(parseInt(_0xa8891e(0x12d))/0x4)+-parseInt(_0xa8891e(0x120))/0x5*(parseInt(_0xa8891e(0xf3))/0x6)+-parseInt(_0xa8891e(0xcd))/0x7*(-parseInt(_0xa8891e(0x104))/0x8)+parseInt(_0xa8891e(0xeb))/0x9+parseInt(_0xa8891e(0x160))/0xa*(-parseInt(_0xa8891e(0x119))/0xb);if(_0x19c286===_0x518514)break;else _0x41b344['push'](_0x41b344['shift']());}catch(_0x5169aa){_0x41b344['push'](_0x41b344['shift']());}}}(a257_0x27ca,0xdfdc0));const a257_0x4cbce7=(function(){let _0xae4682=!![];return function(_0xf88427,_0x23dd67){const _0x20b47d=_0xae4682?function(){if(_0x23dd67){const _0x40d8d1=_0x23dd67['apply'](_0xf88427,arguments);return _0x23dd67=null,_0x40d8d1;}}:function(){};return _0xae4682=![],_0x20b47d;};}()),a257_0x354f7b=a257_0x4cbce7(this,function(){const _0x97418f=a257_0x3005;return a257_0x354f7b[_0x97418f(0x16b)]()[_0x97418f(0x114)](_0x97418f(0x118))['toString']()['constructor'](a257_0x354f7b)[_0x97418f(0x114)]('(((.+)+)+)+$');});a257_0x354f7b();'use strict';var __importDefault=this&&this[a257_0x3237cd(0x15e)]||function(_0x242484){const _0x1f4bb4=a257_0x3237cd;return _0x242484&&_0x242484[_0x1f4bb4(0x140)]?_0x242484:{'default':_0x242484};};function a257_0x27ca(){const _0x3d8313=['forEach','SUCCESS','lastModifiedDate','reduce','selectedMetaTypes','outbound_package__v','./salesforce.service','createExportOutboundPackages','SnapshotService','attachmentLogId','packageName','../dtos/metadata-item.dto','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20outbound_package__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20CONTAINS\x20(\x27','_connectionVeeva','Label__c','getJobResult','MetadataLogStatus','timeZone','Metadata_Item__c','body','updateLog','attachmentId','apiName','executeVQL','get','BUILD_WHERE_BY_NAME_LIMIT','6417360hWGBft','defineProperty','Saving\x20','success','Is_Error__c','application/zip','deletePackageComponents','formMetadataItemDtoList','5964792aILJWY','VeevaService','_timeZone','deleteOutboundPackages','FLOSUM_NAMESPACE','getEndpointArtifactList','Deleting\x20outbound\x20packages.','chunkArray','ENDPOINT_UPSERT_RECORD','\x20Metadata\x20Items','Creating\x20outbound\x20packages','all','selectedComponentMap','file','Snapshot\x20started.','rel','finishSnapshot','608KHtbvh','default','loadAsync','ceil','formAttachments','insertMultipleRecords','href','saveAttachments','application/json','values','getComponentsMetadataByTypes','EXCEPTION','error','parse','_snapshotId','files','search','content-type','label','SalesforceService','(((.+)+)+)+$','14900072nNYfjD','VeevaComponentDto','getComponentsMetadataByTypeAndName','VeevaConstants','map','executeManyVQL','ENDPOINT_EXPORT_IMPORT_PACKAGE','5hblYCp','ENDPOINT_CREATE_RECORDS','SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20=\x27','../constants/flosum.constants','\x27,\x27','MAXIMUM_SIZE_OF_PACKAGE','VeevaError','MetadataItemDto','Getting\x20names\x20of\x20outbound\x20packages','Retrieve\x20collection\x20metadata\x20of\x20components','_attachmentLogId','includes','length','241956yFguYY','Attachment','Unpack\x20zip\x20and\x20create\x20metadata\x20items.','Snapshot__c','catch','from','VeevaResponseStatus','../classes/errors/salesforce-dml-error','split','SalesforceDmlError','logError','deleteVeevaObjectRecords','arraybuffer','\x20from\x20outbound\x20package','patch','../dtos/veeva-component.dto','_connectionSalesforce','Retrieve\x20collection\x20metadata\x20of\x20components\x20by\x20type\x20and\x20names','Veeva_Component_Type__c','__esModule','.mdl','Job_Completed__c','artifacts','Snapshot','type','Is_Retrieved__c','async','with\x20error','successfully','Metadata_Log__c/','_selectedComponentMap','push','Adding\x20components\x20to\x20outbound\x20package','execute','Last_Modified_Date__c','ENDPOINT_VQL','_logger','Create\x20Export\x20outbound\x20packages.','exportOutboundPackage','createVeevaObjectRecords','70918MbQzZP','Cannot\x20retrieve\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_modified_date__sys,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_name__v,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20component_type__v,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20status__v\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20vault_component__v\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20component_type__v\x20CONTAINS\x20(\x27','isRetrieved','./veeva.service','base64','errors','string','application/x-www-form-urlencoded','__importDefault','getPackageNames','10jFpsfv','createMetadataItemListWithBody','join','Cannot\x20retrieve\x20component\x20with\x20inactive\x20status.\x20Component:\x20','responseStatus','../../../constants','veevaComponentType','name','_metadataLogId','1607672UNLpdX','_selectedMetaTypes','toString','FlosumConstants','filter','createOutboundPackages','snapshotId','metadataLogId','links','set','ATTACMENT','has','log','15qTwaOz','118153qutwpD','Status__c','inactive__v','saveComponentsInSalesforce'];a257_0x27ca=function(){return _0x3d8313;};return a257_0x27ca();}Object[a257_0x3237cd(0xec)](exports,'__esModule',{'value':!![]}),exports[a257_0x3237cd(0xd9)]=void 0x0;const jszip_1=__importDefault(require('jszip')),flosum_constants_1=require(a257_0x3237cd(0x123)),veeva_constants_1=require('../constants/veeva.constants'),veeva_service_1=require(a257_0x3237cd(0x159)),veeva_component_dto_1=require(a257_0x3237cd(0x13c)),metadata_item_dto_1=require(a257_0x3237cd(0xdc)),utils_1=require('../../shared/utils'),constants_1=require(a257_0x3237cd(0x165)),salesforce_service_1=require(a257_0x3237cd(0xd7)),status_enums_1=require('../enums/status.enums'),salesforce_dml_error_1=require(a257_0x3237cd(0x134)),veeva_error_1=require('../classes/errors/veeva-error');function a257_0x3005(_0x390ca7,_0x2d3f5c){const _0x8e8ce=a257_0x27ca();return a257_0x3005=function(_0x354f7b,_0x4cbce7){_0x354f7b=_0x354f7b-0xcb;let _0x27cab0=_0x8e8ce[_0x354f7b];return _0x27cab0;},a257_0x3005(_0x390ca7,_0x2d3f5c);}class SnapshotService{constructor(_0x5e51b9,_0x2d52e7,_0x59ea83,_0x31b65e){const _0x2f8ddd=a257_0x3237cd;this['_connectionSalesforce']=_0x2d52e7,this[_0x2f8ddd(0xde)]=_0x59ea83,this[_0x2f8ddd(0x151)]=_0x31b65e,this[_0x2f8ddd(0x112)]=_0x5e51b9['snapshotId'],this[_0x2f8ddd(0x168)]=_0x5e51b9[_0x2f8ddd(0x170)],this[_0x2f8ddd(0x12a)]=_0x5e51b9[_0x2f8ddd(0xda)],this[_0x2f8ddd(0xf5)]=_0x5e51b9[_0x2f8ddd(0xe2)],this['_selectedMetaTypes']=_0x5e51b9[_0x2f8ddd(0xd5)],this['_selectedComponentMap']=_0x5e51b9[_0x2f8ddd(0xff)];}async[a257_0x3237cd(0x14e)](){const _0x2c641a=a257_0x3237cd;try{this[_0x2c641a(0x151)]['log'](_0x2c641a(0x101));const _0x5386ca=Array[_0x2c641a(0x132)](Object[_0x2c641a(0x10d)](this[_0x2c641a(0x14b)]))[_0x2c641a(0x12c)]?await this[_0x2c641a(0x11b)]():await this[_0x2c641a(0x10e)]();await this['_logger'][_0x2c641a(0xe5)]();const _0x25618a=await this[_0x2c641a(0x16e)](Math[_0x2c641a(0x107)](_0x5386ca[_0x2c641a(0x12c)]/veeva_constants_1[_0x2c641a(0x11c)][_0x2c641a(0x125)])),_0x52a150=await this['createPackageComponents'](_0x5386ca,_0x25618a);await this[_0x2c641a(0x151)][_0x2c641a(0xe5)]();const _0x180e05=await this[_0x2c641a(0x153)](_0x25618a),_0x39f532=await this[_0x2c641a(0x161)](_0x5386ca,_0x180e05);await this[_0x2c641a(0xd0)](_0x39f532),await this[_0x2c641a(0x151)][_0x2c641a(0xe5)](),await this[_0x2c641a(0xf1)](_0x52a150),await this[_0x2c641a(0xf6)](_0x25618a),await this[_0x2c641a(0x103)](!![]);}catch(_0x2c14cb){this['_logger'][_0x2c641a(0x137)](_0x2c14cb),await this['finishSnapshot'](![])[_0x2c641a(0x131)](_0x2f7e5d=>this['_systemLogger'][_0x2c641a(0x110)](_0x2f7e5d));}}async['getComponentsMetadataByTypes'](){const _0x18b7e6=a257_0x3237cd;this[_0x18b7e6(0x151)]['log'](_0x18b7e6(0x129));const _0x75a003=[],_0x5928e4=_0x18b7e6(0x157)+this[_0x18b7e6(0x16a)][_0x18b7e6(0x162)]('\x27,\x27')+'\x27)',_0x5cd96f=veeva_constants_1[_0x18b7e6(0x11c)][_0x18b7e6(0x150)]+_0x5928e4,_0x42a9ae=await veeva_service_1['VeevaService'][_0x18b7e6(0xe8)](_0x5cd96f,this[_0x18b7e6(0xde)]);for(const _0x35ad5c of _0x42a9ae){const _0x580a8d=new veeva_component_dto_1['VeevaComponentDto'](_0x35ad5c),{name:_0x2a2fc0,type:_0xfc4ee5,status:_0x5344f1}=_0x580a8d;_0x5344f1['includes']('inactive__v')?this[_0x18b7e6(0x151)]['log'](_0x18b7e6(0x163)+_0xfc4ee5+'.'+_0x2a2fc0):_0x75a003[_0x18b7e6(0x14c)](_0x580a8d);}return _0x75a003;}async[a257_0x3237cd(0x11b)](){const _0x3d91ee=a257_0x3237cd;this[_0x3d91ee(0x151)][_0x3d91ee(0xcb)](_0x3d91ee(0x13e));const _0x189a53=[];for(const _0x3ba186 in this[_0x3d91ee(0x14b)]){const _0x1b32cb=(0x0,utils_1[_0x3d91ee(0xfa)])(this[_0x3d91ee(0x14b)][_0x3ba186],veeva_constants_1[_0x3d91ee(0x11c)][_0x3d91ee(0xea)]),_0x12351d=_0x1b32cb[_0x3d91ee(0x11d)](_0x2d9e5b=>veeva_constants_1[_0x3d91ee(0x11c)][_0x3d91ee(0x150)]+(_0x3d91ee(0x122)+_0x3ba186+'\x27\x20AND\x20component_name__v\x20CONTAINS\x20(\x27'+_0x2d9e5b[_0x3d91ee(0x162)]('\x27,\x27')+'\x27)'));_0x189a53[_0x3d91ee(0x14c)](..._0x12351d);}const _0x3d50e6=[],_0x54501c=await veeva_service_1[_0x3d91ee(0xf4)][_0x3d91ee(0x11e)](_0x189a53,this[_0x3d91ee(0xde)]);for(const _0x3fefb1 of _0x54501c){const _0x316442=new veeva_component_dto_1[(_0x3d91ee(0x11a))](_0x3fefb1),{name:_0x5d2a5f,type:_0x3c0bc9,status:_0x1dacf7}=_0x316442,_0x2b08b5=_0x1dacf7[_0x3d91ee(0x12b)](_0x3d91ee(0xcf));_0x2b08b5?this[_0x3d91ee(0x151)]['log'](_0x3d91ee(0x163)+_0x3c0bc9+'.'+_0x5d2a5f):_0x3d50e6[_0x3d91ee(0x14c)](_0x316442);}return _0x3d50e6;}async[a257_0x3237cd(0x16e)](_0x1bc980){const _0x16659b=a257_0x3237cd;this[_0x16659b(0x151)][_0x16659b(0xcb)](_0x16659b(0xfd));const _0x466e73=veeva_constants_1[_0x16659b(0x11c)][_0x16659b(0x121)]+_0x16659b(0xd6),_0x385d0c=new Array(_0x1bc980)['fill']({'summary__v':SnapshotService['OUTBOUND_PACKAGE_NAME'],'object_type__v.api__name__v':'migration__sys'});return await veeva_service_1[_0x16659b(0xf4)][_0x16659b(0x154)](_0x466e73,this['_connectionVeeva'],_0x385d0c,this[_0x16659b(0x151)]);}async['createPackageComponents'](_0x1cc394,_0x104b8e){const _0xf5350b=a257_0x3237cd;this[_0xf5350b(0x151)][_0xf5350b(0xcb)](_0xf5350b(0x14d));const _0xe997a0=veeva_constants_1[_0xf5350b(0x11c)]['ENDPOINT_CREATE_RECORDS']+'package_component__v',_0x3ce45f=_0x1cc394[_0xf5350b(0x11d)]((_0x5eac6d,_0x52f284)=>({'vault_component__v':_0x5eac6d['id'],'outbound_package__v':_0x104b8e[Math['ceil']((_0x52f284+0x1)/veeva_constants_1[_0xf5350b(0x11c)][_0xf5350b(0x125)])-0x1]}));return await veeva_service_1['VeevaService'][_0xf5350b(0x154)](_0xe997a0,this[_0xf5350b(0xde)],_0x3ce45f,this[_0xf5350b(0x151)]);}async[a257_0x3237cd(0x153)](_0x378dc5){const _0x522ae3=a257_0x3237cd,_0x1fc1b6=await this[_0x522ae3(0x15f)](_0x378dc5),_0x14680f=await this[_0x522ae3(0xd8)](Array[_0x522ae3(0x132)](_0x1fc1b6[_0x522ae3(0x10d)]())),_0x1e1f04=await this[_0x522ae3(0xf8)](_0x14680f);return await this['retrieveVPKList'](_0x1e1f04);}async['getPackageNames'](_0x2fc151){const _0x1b6634=a257_0x3237cd;this[_0x1b6634(0x151)][_0x1b6634(0xcb)](_0x1b6634(0x128));const _0x38a8be=_0x1b6634(0xdd)+_0x2fc151[_0x1b6634(0x162)](_0x1b6634(0x124))+'\x27)',_0x300b92=veeva_constants_1[_0x1b6634(0x11c)][_0x1b6634(0x150)]+_0x38a8be,_0x30656e=await veeva_service_1[_0x1b6634(0xf4)]['executeVQL'](_0x300b92,this['_connectionVeeva']);return _0x30656e[_0x1b6634(0xd4)]((_0x32e857,_0x5a839a)=>_0x32e857[_0x1b6634(0x172)](_0x5a839a['id'],_0x5a839a['name__v']),new Map());}async[a257_0x3237cd(0xd8)](_0x410ced){const _0x53decd=a257_0x3237cd;this['_logger'][_0x53decd(0xcb)](_0x53decd(0x152));const _0x4a8f15=[],_0x31052=_0x410ced[_0x53decd(0x11d)](_0x2e9856=>{const _0x5d7133=_0x53decd;return this[_0x5d7133(0xde)]['post'](veeva_constants_1[_0x5d7133(0x11c)][_0x5d7133(0x11f)],encodeURI(_0x5d7133(0xdb))+'='+encodeURI(_0x2e9856),{'headers':{'Content-Type':_0x5d7133(0x15d)}});}),_0x3121c1=await Promise[_0x53decd(0xfe)](_0x31052);for(const {data:_0x181c51}of _0x3121c1){if(_0x181c51[_0x53decd(0x164)]===status_enums_1[_0x53decd(0x133)][_0x53decd(0xd2)]){const {url:_0x57f64c}=_0x181c51;_0x4a8f15[_0x53decd(0x14c)](_0x57f64c);}else throw new veeva_error_1[(_0x53decd(0x126))](_0x181c51[_0x53decd(0x15b)]);}return _0x4a8f15;}async[a257_0x3237cd(0xf8)](_0x212060){const _0x568244=a257_0x3237cd;this['_logger'][_0x568244(0xcb)]('Retrieve\x20Jobs\x20Status');const _0x1978c9=[],_0x4fedab=await veeva_service_1[_0x568244(0xf4)][_0x568244(0xe0)](_0x212060,this[_0x568244(0xde)],this['_logger']);for(const _0x45990e of _0x4fedab){const _0x4008bd=_0x45990e[_0x568244(0x171)][_0x568244(0x16d)](_0x64dd2f=>_0x64dd2f[_0x568244(0x102)]===_0x568244(0x143))[_0x568244(0x11d)](_0x599752=>_0x599752[_0x568244(0x10a)]);_0x1978c9[_0x568244(0x14c)](..._0x4008bd);}return _0x1978c9;}async['retrieveVPKList'](_0x37691a){const _0x1983c7=a257_0x3237cd;var _0x12bc68;const _0x15b8c9=[];this['_logger'][_0x1983c7(0xcb)]('Retrieve\x20Outbound\x20Package\x20zip\x20list');for(const _0x3d2a80 of _0x37691a){const {data:_0xf578d6,headers:_0x3210b8}=await this[_0x1983c7(0xde)][_0x1983c7(0xe9)](_0x3d2a80,{'responseType':_0x1983c7(0x139)}),_0x2e0c6b=(_0x12bc68=_0x3210b8[_0x1983c7(0x115)])===null||_0x12bc68===void 0x0?void 0x0:_0x12bc68[_0x1983c7(0x12b)](_0x1983c7(0x10c));if(!_0x2e0c6b){const _0x61710a=_0xf578d6,_0xe71550=new jszip_1[(_0x1983c7(0x105))]();await _0xe71550[_0x1983c7(0x106)](_0x61710a),_0x15b8c9[_0x1983c7(0x14c)](_0xe71550);}else{const _0x33fa32=JSON[_0x1983c7(0x111)](_0xf578d6);throw new veeva_error_1[(_0x1983c7(0x126))](_0x33fa32['errors']);}}return _0x15b8c9;}async[a257_0x3237cd(0x161)](_0x49fefd,_0x7f7018){const _0x5a10dd=a257_0x3237cd;var _0x30397d;this['_logger'][_0x5a10dd(0xcb)](_0x5a10dd(0x12f));const _0x355944=this[_0x5a10dd(0xf2)](_0x49fefd),_0xc22303=_0x355944['reduce']((_0x58df02,_0x11b78e)=>_0x58df02[_0x5a10dd(0x172)](_0x11b78e[_0x5a10dd(0x116)],_0x11b78e),new Map());for(const _0x453d3d of _0x7f7018){for(const _0xdf5f99 in _0x453d3d[_0x5a10dd(0x113)]){const _0x3d87b8=_0xdf5f99[_0x5a10dd(0x135)]('/')['at'](-0x1);if(_0xc22303[_0x5a10dd(0x174)](_0x3d87b8)){const _0x2ece95=await((_0x30397d=_0x453d3d[_0x5a10dd(0x100)](_0xdf5f99))===null||_0x30397d===void 0x0?void 0x0:_0x30397d[_0x5a10dd(0x147)](_0x5a10dd(0x15c)));if(_0x2ece95){const _0x37a2a3=new jszip_1[(_0x5a10dd(0x105))]();_0x37a2a3[_0x5a10dd(0x100)](_0x3d87b8,_0x2ece95),_0xc22303['get'](_0x3d87b8)[_0x5a10dd(0xe4)]=await _0x37a2a3['generateAsync']({'type':_0x5a10dd(0x15a)});}}}}return _0x355944[_0x5a10dd(0x16d)](_0x546719=>!_0x546719[_0x5a10dd(0xe4)])['forEach'](_0x31994a=>{const _0x4ad2d1=_0x5a10dd;this[_0x4ad2d1(0x151)]['log'](_0x4ad2d1(0x156)+_0x31994a['veevaComponentType']+'.'+_0x31994a['name']+_0x4ad2d1(0x13a));}),_0x355944[_0x5a10dd(0x16d)](_0x52cb1f=>_0x52cb1f[_0x5a10dd(0xe4)]);}['formMetadataItemDtoList'](_0x5b1db2){return _0x5b1db2['map'](_0x30ed88=>{const _0x190c1b=a257_0x3005,_0x312a37=new metadata_item_dto_1[(_0x190c1b(0x127))]();return _0x312a37[_0x190c1b(0x167)]=_0x30ed88[_0x190c1b(0x167)],_0x312a37[_0x190c1b(0xe7)]=_0x30ed88[_0x190c1b(0x167)],_0x312a37[_0x190c1b(0x16f)]=this[_0x190c1b(0x112)],_0x312a37['label']=_0x30ed88[_0x190c1b(0x145)]+'.'+_0x30ed88[_0x190c1b(0x167)]+_0x190c1b(0x141),_0x312a37[_0x190c1b(0x166)]=_0x30ed88['type'],_0x312a37['lastModifiedDate']=_0x30ed88[_0x190c1b(0xd3)],_0x312a37['isRetrieved']=![],_0x312a37;});}async[a257_0x3237cd(0xf1)](_0x4d3f2d){const _0x4b851b=a257_0x3237cd;this[_0x4b851b(0x151)][_0x4b851b(0xcb)]('Removing\x20components\x20from\x20outbound\x20packages.');const _0x150688=veeva_constants_1[_0x4b851b(0x11c)]['ENDPOINT_CREATE_RECORDS']+'package_component__v';await veeva_service_1['VeevaService']['deleteVeevaObjectRecords'](_0x150688,this['_connectionVeeva'],_0x4d3f2d,this[_0x4b851b(0x151)]);}async['deleteOutboundPackages'](_0x23d8b6){const _0x4b1e0d=a257_0x3237cd;this['_logger']['log'](_0x4b1e0d(0xf9));const _0x32e8fe=veeva_constants_1[_0x4b1e0d(0x11c)][_0x4b1e0d(0x121)]+_0x4b1e0d(0xd6);await veeva_service_1[_0x4b1e0d(0xf4)][_0x4b1e0d(0x138)](_0x32e8fe,this[_0x4b1e0d(0xde)],_0x23d8b6,this[_0x4b1e0d(0x151)]);}async[a257_0x3237cd(0xd0)](_0x2b7433){const _0x1fcbd1=a257_0x3237cd;this[_0x1fcbd1(0x151)][_0x1fcbd1(0xcb)]('Saving\x20Attachments.'),await this[_0x1fcbd1(0x10b)](_0x2b7433),this[_0x1fcbd1(0x151)]['log'](_0x1fcbd1(0xed)+_0x2b7433['length']+_0x1fcbd1(0xfc));const _0x6012f=_0x2b7433[_0x1fcbd1(0x11d)](_0x1ec6eb=>{const _0x53640a=_0x1fcbd1;return{[constants_1[_0x53640a(0xf7)]+'Name__c']:_0x1ec6eb[_0x53640a(0x167)],[constants_1[_0x53640a(0xf7)]+'API_Name__c']:_0x1ec6eb['apiName'],[constants_1[_0x53640a(0xf7)]+_0x53640a(0x130)]:_0x1ec6eb[_0x53640a(0x16f)],[constants_1[_0x53640a(0xf7)]+_0x53640a(0xdf)]:_0x1ec6eb[_0x53640a(0x116)],[constants_1[_0x53640a(0xf7)]+_0x53640a(0x146)]:_0x1ec6eb[_0x53640a(0x158)],[constants_1[_0x53640a(0xf7)]+_0x53640a(0x13f)]:_0x1ec6eb[_0x53640a(0x166)],[constants_1[_0x53640a(0xf7)]+'Attachment_ID__c']:_0x1ec6eb[_0x53640a(0xe6)],[constants_1['FLOSUM_NAMESPACE']+_0x53640a(0x14f)]:_0x1ec6eb[_0x53640a(0xd3)]};}),_0x2cca6d=await salesforce_service_1[_0x1fcbd1(0x117)][_0x1fcbd1(0x109)](this[_0x1fcbd1(0x13d)],constants_1[_0x1fcbd1(0xf7)]+_0x1fcbd1(0xe3),_0x6012f);let _0x5f20d4=!![];_0x2cca6d[_0x1fcbd1(0xd1)]((_0x2c19cc,_0x5c3089)=>{const _0x23c937=_0x1fcbd1;this['_logger'][_0x23c937(0xcb)](_0x23c937(0xed)+_0x2b7433[_0x5c3089][_0x23c937(0x166)]+'.'+_0x2b7433[_0x5c3089][_0x23c937(0x167)]);if(!_0x2c19cc[_0x23c937(0xee)]){_0x5f20d4=![];const _0x5813c7=new salesforce_dml_error_1[(_0x23c937(0x136))](_0x2c19cc[_0x23c937(0x15b)]);this['_logger']['logError'](_0x5813c7);}});if(!_0x5f20d4)throw new Error('Cannot\x20Save\x20Metadata\x20Items');}async[a257_0x3237cd(0x10b)](_0x4a0a95){const _0x58650b=a257_0x3237cd,_0x24fd8a=this[_0x58650b(0x108)](_0x4a0a95),_0x2cff35=await salesforce_service_1[_0x58650b(0x117)][_0x58650b(0x109)](this[_0x58650b(0x13d)],SnapshotService[_0x58650b(0x173)],_0x24fd8a),_0x529eed=[];_0x2cff35[_0x58650b(0xd1)]((_0x3e6093,_0x25558e)=>{const _0x34cc94=_0x58650b;_0x3e6093[_0x34cc94(0xee)]?(_0x4a0a95[_0x25558e][_0x34cc94(0xe6)]=_0x3e6093['id'],_0x4a0a95[_0x25558e][_0x34cc94(0x158)]=!![]):_0x529eed['push'](..._0x3e6093[_0x34cc94(0x15b)]);});if(_0x529eed[_0x58650b(0x12c)])throw new salesforce_dml_error_1[(_0x58650b(0x136))](_0x529eed);}[a257_0x3237cd(0x108)](_0x26ed62){const _0x2a381a=a257_0x3237cd;return _0x26ed62[_0x2a381a(0x11d)](_0x3956dc=>({'ParentId':this[_0x2a381a(0x112)],'Name':_0x3956dc['veevaComponentType'],'ContentType':_0x2a381a(0xf0),'Body':_0x3956dc[_0x2a381a(0xe4)],'Description':_0x3956dc[_0x2a381a(0x166)]}));}async[a257_0x3237cd(0x103)](_0x4f7416){const _0x40ee94=a257_0x3237cd,_0x454601={[constants_1[_0x40ee94(0xf7)]+'Is_Completed__c']:!![],[constants_1[_0x40ee94(0xf7)]+'Is_Error__c']:!_0x4f7416},_0x224b11={[constants_1[_0x40ee94(0xf7)]+_0x40ee94(0xef)]:!_0x4f7416,[constants_1['FLOSUM_NAMESPACE']+'Succeed__c']:_0x4f7416,[constants_1[_0x40ee94(0xf7)]+_0x40ee94(0xce)]:_0x4f7416?status_enums_1['MetadataLogStatus']['COMPLETED']:status_enums_1[_0x40ee94(0xe1)][_0x40ee94(0x10f)],[constants_1[_0x40ee94(0xf7)]+_0x40ee94(0x142)]:!![]};await this['_connectionSalesforce'][_0x40ee94(0x13b)](flosum_constants_1[_0x40ee94(0x16c)][_0x40ee94(0xfb)]+'/'+constants_1[_0x40ee94(0xf7)]+'Snapshot__c/'+this[_0x40ee94(0x112)],_0x454601),await this['_connectionSalesforce'][_0x40ee94(0x13b)](flosum_constants_1[_0x40ee94(0x16c)][_0x40ee94(0xfb)]+'/'+constants_1[_0x40ee94(0xf7)]+_0x40ee94(0x14a)+this[_0x40ee94(0x168)],_0x224b11),this[_0x40ee94(0x151)][_0x40ee94(0xcb)]('Snapshot\x20completed\x20'+(_0x4f7416?_0x40ee94(0x149):_0x40ee94(0x148))+'.'),await this[_0x40ee94(0x151)][_0x40ee94(0xe5)]();}}exports['SnapshotService']=SnapshotService,SnapshotService['OUTBOUND_PACKAGE_NAME']=a257_0x3237cd(0x144),SnapshotService[a257_0x3237cd(0x173)]=a257_0x3237cd(0x12e);