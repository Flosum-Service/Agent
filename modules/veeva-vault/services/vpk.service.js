const a365_0x2cbda5=a365_0x11d8;(function(_0x59a1ce,_0x1eb656){const _0x2b79e4=a365_0x11d8,_0x29c0af=_0x59a1ce();while(!![]){try{const _0x17fc2e=parseInt(_0x2b79e4(0x1ca))/0x1*(-parseInt(_0x2b79e4(0x1da))/0x2)+parseInt(_0x2b79e4(0x1db))/0x3+parseInt(_0x2b79e4(0x1d0))/0x4*(-parseInt(_0x2b79e4(0x1cd))/0x5)+-parseInt(_0x2b79e4(0x1ea))/0x6+parseInt(_0x2b79e4(0x1d4))/0x7+parseInt(_0x2b79e4(0x1d2))/0x8+parseInt(_0x2b79e4(0x1d3))/0x9;if(_0x17fc2e===_0x1eb656)break;else _0x29c0af['push'](_0x29c0af['shift']());}catch(_0x5b2c1d){_0x29c0af['push'](_0x29c0af['shift']());}}}(a365_0x32e9,0xb4169));const a365_0x447d43=(function(){let _0x160fcf=!![];return function(_0x1c46d5,_0x2df581){const _0x342a37=_0x160fcf?function(){const _0x2b1cb5=a365_0x11d8;if(_0x2df581){const _0x2ab52a=_0x2df581[_0x2b1cb5(0x1e1)](_0x1c46d5,arguments);return _0x2df581=null,_0x2ab52a;}}:function(){};return _0x160fcf=![],_0x342a37;};}()),a365_0xeffbd9=a365_0x447d43(this,function(){const _0x2f050b=a365_0x11d8;return a365_0xeffbd9[_0x2f050b(0x1d8)]()['search'](_0x2f050b(0x1e4))[_0x2f050b(0x1d8)]()[_0x2f050b(0x1d6)](a365_0xeffbd9)['search'](_0x2f050b(0x1e4));});a365_0xeffbd9();function a365_0x11d8(_0x280274,_0x4da990){const _0x58a842=a365_0x32e9();return a365_0x11d8=function(_0xeffbd9,_0x447d43){_0xeffbd9=_0xeffbd9-0x1ca;let _0x32e9d3=_0x58a842[_0xeffbd9];return _0x32e9d3;},a365_0x11d8(_0x280274,_0x4da990);}'use strict';var __importDefault=this&&this[a365_0x2cbda5(0x1ef)]||function(_0x4a85b8){return _0x4a85b8&&_0x4a85b8['__esModule']?_0x4a85b8:{'default':_0x4a85b8};};Object['defineProperty'](exports,a365_0x2cbda5(0x1ed),{'value':!![]}),exports[a365_0x2cbda5(0x1eb)]=void 0x0;const form_data_1=__importDefault(require('form-data')),fs_1=require('fs'),veeva_constants_1=require('../constants/veeva.constants'),veeva_auth_utils_1=require('../utils/veeva-auth.utils'),veeva_error_1=require(a365_0x2cbda5(0x1ce)),status_enums_1=require(a365_0x2cbda5(0x1de));function a365_0x32e9(){const _0x3df276=['3981003jzTtFn','includes','parse','../enums/status.enums','post','generate','apply','ENDPOINT_VALIDATE_VPK','append','(((.+)+)+)+$','validate','SUCCESS','responseStatus','multipart/form-data','createReadStream','723690ImLryh','VpkService','default','__esModule','VeevaResponseStatus','__importDefault','1LbSkOa','_connection','VeevaConstants','5qLRFZZ','../classes/errors/veeva-error','updateVeevaConnection','5018868RgZkJq','errors','7091832WQwdkn','4432149hQRrPl','1011584GjGtgt','data','constructor','content-type','toString','file','1474960HqIiWQ'];a365_0x32e9=function(){return _0x3df276;};return a365_0x32e9();}class VpkService{constructor({connection:_0x10319e}){const _0x863976=a365_0x2cbda5;this[_0x863976(0x1cb)]=_0x10319e;}async[a365_0x2cbda5(0x1e0)](_0x571b0f,_0x5c918a=0x1){const _0x439360=a365_0x2cbda5;var _0x924752;const _0x45c8c5=new form_data_1['default']();_0x45c8c5['append'](_0x439360(0x1d9),(0x0,fs_1['createReadStream'])(_0x571b0f));const _0x303c78=await this[_0x439360(0x1cb)][_0x439360(0x1df)](veeva_constants_1[_0x439360(0x1cc)]['ENDPOINT_EXPORT_IMPORT_PACKAGE'],_0x45c8c5,{'responseType':'arraybuffer','headers':{'Content-Type':_0x439360(0x1e8)}}),_0x4b00f3=(_0x924752=_0x303c78['headers'][_0x439360(0x1d7)])===null||_0x924752===void 0x0?void 0x0:_0x924752[_0x439360(0x1dc)]('application/json');if(!_0x4b00f3)return _0x303c78['data'];else{const _0x556fa4=JSON[_0x439360(0x1dd)](_0x303c78['data']);if(_0x5c918a>0x0)return await(0x0,veeva_auth_utils_1[_0x439360(0x1cf)])(this['_connection']),await this[_0x439360(0x1e0)](_0x571b0f,_0x5c918a-0x1);throw new veeva_error_1['VeevaError'](_0x556fa4[_0x439360(0x1d1)]);}}async[a365_0x2cbda5(0x1e5)](_0x29b941,_0x16dbdf=0x1){const _0x1a7a59=a365_0x2cbda5,_0x17f5bc=new form_data_1[(_0x1a7a59(0x1ec))]();_0x17f5bc[_0x1a7a59(0x1e3)](_0x1a7a59(0x1d9),(0x0,fs_1[_0x1a7a59(0x1e9)])(_0x29b941));const _0x3b1244=await this['_connection'][_0x1a7a59(0x1df)](veeva_constants_1[_0x1a7a59(0x1cc)][_0x1a7a59(0x1e2)],_0x17f5bc,{'headers':{'Content-Type':_0x1a7a59(0x1e8)}}),_0x5ce7e5=_0x3b1244[_0x1a7a59(0x1d5)];if(_0x5ce7e5[_0x1a7a59(0x1e7)]===status_enums_1[_0x1a7a59(0x1ee)][_0x1a7a59(0x1e6)])return _0x5ce7e5;else{if(_0x16dbdf>0x0)return await(0x0,veeva_auth_utils_1['updateVeevaConnection'])(this['_connection']),await this[_0x1a7a59(0x1e5)](_0x29b941,_0x16dbdf-0x1);throw new veeva_error_1['VeevaError'](_0x5ce7e5['errors']);}}}exports[a365_0x2cbda5(0x1eb)]=VpkService;