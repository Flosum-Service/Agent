const a357_0x3c5dab=a357_0x4d58;function a357_0x399d(){const _0x30ca03=['476045lJarFJ','arraybuffer','generate','errors','SUCCESS','1048152oRGbXT','../constants/veeva.constants','17739xDwBmJ','defineProperty','search','../enums/status.enums','VpkService','includes','456191UndYJP','post','default','application/json','createReadStream','332VGvPeB','_connection','VeevaError','multipart/form-data','toString','../classes/errors/veeva-error','394376ZxKyRK','form-data','../utils/veeva-auth.utils','updateVeevaConnection','18905300SSiBST','headers','append','__importDefault','constructor','VeevaResponseStatus','ENDPOINT_VALIDATE_VPK','6trPGrY','data','VeevaConstants','1949598EXhMgQ','file','validate','28aHeXYY','__esModule'];a357_0x399d=function(){return _0x30ca03;};return a357_0x399d();}(function(_0x3c543f,_0x18124a){const _0x305899=a357_0x4d58,_0x18c2cc=_0x3c543f();while(!![]){try{const _0x161d87=-parseInt(_0x305899(0x111))/0x1+-parseInt(_0x305899(0x134))/0x2+-parseInt(_0x305899(0x136))/0x3*(parseInt(_0x305899(0x116))/0x4)+-parseInt(_0x305899(0x12f))/0x5*(parseInt(_0x305899(0x127))/0x6)+-parseInt(_0x305899(0x12d))/0x7*(parseInt(_0x305899(0x11c))/0x8)+parseInt(_0x305899(0x12a))/0x9+parseInt(_0x305899(0x120))/0xa;if(_0x161d87===_0x18124a)break;else _0x18c2cc['push'](_0x18c2cc['shift']());}catch(_0x5cd8b3){_0x18c2cc['push'](_0x18c2cc['shift']());}}}(a357_0x399d,0x53e9d));const a357_0x4dc8c3=(function(){let _0x532edd=!![];return function(_0xe4cb7f,_0xf0a390){const _0x1395e1=_0x532edd?function(){if(_0xf0a390){const _0x5cc829=_0xf0a390['apply'](_0xe4cb7f,arguments);return _0xf0a390=null,_0x5cc829;}}:function(){};return _0x532edd=![],_0x1395e1;};}()),a357_0x4b3fa7=a357_0x4dc8c3(this,function(){const _0x166718=a357_0x4d58;return a357_0x4b3fa7[_0x166718(0x11a)]()[_0x166718(0x10d)]('(((.+)+)+)+$')[_0x166718(0x11a)]()[_0x166718(0x124)](a357_0x4b3fa7)[_0x166718(0x10d)]('(((.+)+)+)+$');});a357_0x4b3fa7();function a357_0x4d58(_0x3f8013,_0x2baf6a){const _0x2b864c=a357_0x399d();return a357_0x4d58=function(_0x4b3fa7,_0x4dc8c3){_0x4b3fa7=_0x4b3fa7-0x10c;let _0x399d08=_0x2b864c[_0x4b3fa7];return _0x399d08;},a357_0x4d58(_0x3f8013,_0x2baf6a);}'use strict';var __importDefault=this&&this[a357_0x3c5dab(0x123)]||function(_0x297083){const _0x2e718e=a357_0x3c5dab;return _0x297083&&_0x297083[_0x2e718e(0x12e)]?_0x297083:{'default':_0x297083};};Object[a357_0x3c5dab(0x10c)](exports,a357_0x3c5dab(0x12e),{'value':!![]}),exports[a357_0x3c5dab(0x10f)]=void 0x0;const form_data_1=__importDefault(require(a357_0x3c5dab(0x11d))),fs_1=require('fs'),veeva_constants_1=require(a357_0x3c5dab(0x135)),veeva_auth_utils_1=require(a357_0x3c5dab(0x11e)),veeva_error_1=require(a357_0x3c5dab(0x11b)),status_enums_1=require(a357_0x3c5dab(0x10e));class VpkService{constructor({connection:_0x23478a}){this['_connection']=_0x23478a;}async[a357_0x3c5dab(0x131)](_0x523241,_0x4fa798=0x1){const _0x1a72d4=a357_0x3c5dab;var _0x549ae0;const _0x4391c2=new form_data_1[(_0x1a72d4(0x113))]();_0x4391c2[_0x1a72d4(0x122)](_0x1a72d4(0x12b),(0x0,fs_1[_0x1a72d4(0x115)])(_0x523241));const _0x1ce14a=await this['_connection'][_0x1a72d4(0x112)](veeva_constants_1[_0x1a72d4(0x129)]['ENDPOINT_EXPORT_IMPORT_PACKAGE'],_0x4391c2,{'responseType':_0x1a72d4(0x130),'headers':{'Content-Type':'multipart/form-data'}}),_0x1d2945=(_0x549ae0=_0x1ce14a[_0x1a72d4(0x121)]['content-type'])===null||_0x549ae0===void 0x0?void 0x0:_0x549ae0[_0x1a72d4(0x110)](_0x1a72d4(0x114));if(!_0x1d2945)return _0x1ce14a[_0x1a72d4(0x128)];else{const _0x2ce807=JSON['parse'](_0x1ce14a['data']);if(_0x4fa798>0x0)return await(0x0,veeva_auth_utils_1['updateVeevaConnection'])(this[_0x1a72d4(0x117)]),await this[_0x1a72d4(0x131)](_0x523241,_0x4fa798-0x1);throw new veeva_error_1[(_0x1a72d4(0x118))](_0x2ce807[_0x1a72d4(0x132)]);}}async['validate'](_0x4b3f83,_0x3f3de6=0x1){const _0x463ed9=a357_0x3c5dab,_0x5123b9=new form_data_1[(_0x463ed9(0x113))]();_0x5123b9[_0x463ed9(0x122)](_0x463ed9(0x12b),(0x0,fs_1[_0x463ed9(0x115)])(_0x4b3f83));const _0x42fa43=await this[_0x463ed9(0x117)][_0x463ed9(0x112)](veeva_constants_1[_0x463ed9(0x129)][_0x463ed9(0x126)],_0x5123b9,{'headers':{'Content-Type':_0x463ed9(0x119)}}),_0x5b91fe=_0x42fa43[_0x463ed9(0x128)];if(_0x5b91fe['responseStatus']===status_enums_1[_0x463ed9(0x125)][_0x463ed9(0x133)])return _0x5b91fe;else{if(_0x3f3de6>0x0)return await(0x0,veeva_auth_utils_1[_0x463ed9(0x11f)])(this[_0x463ed9(0x117)]),await this[_0x463ed9(0x12c)](_0x4b3f83,_0x3f3de6-0x1);throw new veeva_error_1['VeevaError'](_0x5b91fe[_0x463ed9(0x132)]);}}}exports[a357_0x3c5dab(0x10f)]=VpkService;