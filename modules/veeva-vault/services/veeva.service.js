const a408_0x4f81a8=a408_0x4b4e;function a408_0x4b4e(_0x254c21,_0x3b53ed){const _0x1084d9=a408_0x3517();return a408_0x4b4e=function(_0x2f8c94,_0x2bd8a7){_0x2f8c94=_0x2f8c94-0xc1;let _0x35176e=_0x1084d9[_0x2f8c94];return _0x35176e;},a408_0x4b4e(_0x254c21,_0x3b53ed);}(function(_0x4bb011,_0x35fc6c){const _0x35647f=a408_0x4b4e,_0x3713ee=_0x4bb011();while(!![]){try{const _0x4d3e34=parseInt(_0x35647f(0xf9))/0x1*(parseInt(_0x35647f(0xf8))/0x2)+-parseInt(_0x35647f(0xd3))/0x3*(parseInt(_0x35647f(0xc4))/0x4)+parseInt(_0x35647f(0xe3))/0x5+-parseInt(_0x35647f(0xd2))/0x6*(parseInt(_0x35647f(0xd4))/0x7)+parseInt(_0x35647f(0xe4))/0x8*(parseInt(_0x35647f(0xc6))/0x9)+parseInt(_0x35647f(0xd6))/0xa+-parseInt(_0x35647f(0xe2))/0xb;if(_0x4d3e34===_0x35fc6c)break;else _0x3713ee['push'](_0x3713ee['shift']());}catch(_0x44b399){_0x3713ee['push'](_0x3713ee['shift']());}}}(a408_0x3517,0xba565));const a408_0x2bd8a7=(function(){let _0x2bc008=!![];return function(_0x47a2aa,_0x32f10d){const _0x5ac409=_0x2bc008?function(){const _0x1a5068=a408_0x4b4e;if(_0x32f10d){const _0x1d86a6=_0x32f10d[_0x1a5068(0xce)](_0x47a2aa,arguments);return _0x32f10d=null,_0x1d86a6;}}:function(){};return _0x2bc008=![],_0x5ac409;};}()),a408_0x2f8c94=a408_0x2bd8a7(this,function(){const _0x2982d1=a408_0x4b4e;return a408_0x2f8c94[_0x2982d1(0xfc)]()[_0x2982d1(0xc9)]('(((.+)+)+)+$')[_0x2982d1(0xfc)]()[_0x2982d1(0xe9)](a408_0x2f8c94)[_0x2982d1(0xc9)](_0x2982d1(0xdc));});function a408_0x3517(){const _0x4acecc=['application/x-www-form-urlencoded','CANCELLED','data','flat','Creating\x20','MISSED_SCHEDULE','SCHEDULED','map','length','errors','RUNNING','112KuSJst','4582ugAuUH','executeVQL','ENDPOINT_VQL','toString','VeevaConstants','push','CREATE_RECORDS_LIMIT','DELETE_RECORDS_LIMIT','16JmDcdm','../../shared/utils','153DwzssJ','_logger','SUCCESS','search','application/json','JOB_STATUS_TIMEOUT','log','VeevaJobStatus','apply','getJobResult','Unknown\x20Job\x20status\x20:\x20\x27','VeevaResponseStatus','145158wWeXEO','812982sCEVWm','63nPlgsZ','delete','3425410NCZXHu','__esModule','defineProperty','VeevaService','get','responseStatus','(((.+)+)+)+$','status','executeManyVQL','../constants/veeva.constants','../enums/status.enums','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','3617614YFnZDf','5232520tfhUrd','352088STRLax','Deleting\x20','post','deleteVeevaObjectRecords','_connection','constructor','all','VeevaError','QUEUEING'];a408_0x3517=function(){return _0x4acecc;};return a408_0x3517();}a408_0x2f8c94();'use strict';Object[a408_0x4f81a8(0xd8)](exports,a408_0x4f81a8(0xd7),{'value':!![]}),exports[a408_0x4f81a8(0xd9)]=void 0x0;const utils_1=require(a408_0x4f81a8(0xc5)),status_enums_1=require(a408_0x4f81a8(0xe0)),veeva_error_1=require('../classes/errors/veeva-error'),veeva_constants_1=require(a408_0x4f81a8(0xdf));class VeevaService{constructor({connection:_0x23e249,logger:_0x227b76}){const _0x1ce77f=a408_0x4f81a8;this[_0x1ce77f(0xe8)]=_0x23e249,this[_0x1ce77f(0xc7)]=_0x227b76;}async[a408_0x4f81a8(0xde)](_0x2949db){const _0xe53938=a408_0x4f81a8,_0x3e2b3f=[];for(const _0xbea82b of _0x2949db){_0x3e2b3f['push'](this['executeVQL'](_0xbea82b));}const _0x5161c=await Promise[_0xe53938(0xea)](_0x3e2b3f);return _0x5161c[_0xe53938(0xf0)]();}async[a408_0x4f81a8(0xfa)](_0x3f4f00){const _0x40da24=a408_0x4f81a8,_0x5f1dcd=[];let _0x5ac129=this[_0x40da24(0xe8)][_0x40da24(0xe6)](veeva_constants_1[_0x40da24(0xfd)][_0x40da24(0xfb)],new URLSearchParams([['q',_0x3f4f00]]),{'headers':{'Content-Type':_0x40da24(0xed)}}),_0x59784d=![];do{const _0x42a350=await _0x5ac129,_0x113dc6=_0x42a350[_0x40da24(0xef)];if(_0x113dc6[_0x40da24(0xdb)]!==status_enums_1[_0x40da24(0xd1)][_0x40da24(0xc8)])throw new veeva_error_1['VeevaError'](_0x113dc6[_0x40da24(0xf6)]);const {responseDetails:{next_page:_0x3ce11d},data:_0x2d9b72}=_0x113dc6;_0x3ce11d?_0x5ac129=this[_0x40da24(0xe8)][_0x40da24(0xda)](_0x3ce11d):_0x59784d=!![],_0x5f1dcd[_0x40da24(0xc1)](..._0x2d9b72);}while(!_0x59784d);return _0x5f1dcd;}async['createVeevaObjectRecords'](_0x400700,_0x4bcd76){const _0x1b5c5b=a408_0x4f81a8,_0x32422f=[],_0x954990=(0x0,utils_1['chunkArray'])(_0x4bcd76,VeevaService[_0x1b5c5b(0xc2)]),_0x219585=_0x4bcd76['length'];let _0x8884fe=0x0;for(const _0x3426cf of _0x954990){_0x8884fe+=_0x3426cf[_0x1b5c5b(0xf5)],this[_0x1b5c5b(0xc7)]['log'](_0x1b5c5b(0xf1)+_0x8884fe+'/'+_0x219585+'\x20records.');const _0x5cf445=await this[_0x1b5c5b(0xe8)][_0x1b5c5b(0xe6)](_0x400700,_0x3426cf),_0x1b1eb5=_0x5cf445[_0x1b5c5b(0xef)];if(_0x1b1eb5[_0x1b5c5b(0xdb)]===status_enums_1[_0x1b5c5b(0xd1)]['SUCCESS'])for(const {responseStatus:_0x4c4561,data:_0x31f312}of _0x1b1eb5[_0x1b5c5b(0xef)]){if(_0x4c4561===status_enums_1[_0x1b5c5b(0xd1)][_0x1b5c5b(0xc8)])_0x32422f['push'](_0x31f312['id']);else throw new veeva_error_1['VeevaError'](_0x1b1eb5[_0x1b5c5b(0xf6)]);}else throw new veeva_error_1['VeevaError'](_0x1b1eb5[_0x1b5c5b(0xf6)]);}return _0x32422f;}async[a408_0x4f81a8(0xe7)](_0x565840,_0x56d14b){const _0x3deddb=a408_0x4f81a8,_0x3de3ab=_0x56d14b[_0x3deddb(0xf4)](_0x3065a7=>({'id':_0x3065a7})),_0x4aba36=(0x0,utils_1['chunkArray'])(_0x3de3ab,VeevaService[_0x3deddb(0xc3)]);let _0x3dc827=0x0;for(const _0x1ff25f of _0x4aba36){_0x3dc827+=_0x1ff25f[_0x3deddb(0xf5)],this[_0x3deddb(0xc7)][_0x3deddb(0xcc)](_0x3deddb(0xe5)+_0x3dc827+'/'+_0x56d14b['length']+'\x20records');const {data:_0x425c3a}=await this['_connection'][_0x3deddb(0xd5)](_0x565840,{'headers':{'Content-Type':_0x3deddb(0xca)},'data':_0x1ff25f});if(_0x425c3a[_0x3deddb(0xdb)]===status_enums_1['VeevaResponseStatus']['SUCCESS'])for(const _0x4b11b9 of _0x425c3a[_0x3deddb(0xef)]){const {responseStatus:_0x343dd5,errors:_0x35ec57}=_0x4b11b9;if(_0x343dd5!==status_enums_1[_0x3deddb(0xd1)][_0x3deddb(0xc8)])throw new veeva_error_1['VeevaError'](_0x35ec57);}else throw new veeva_error_1[(_0x3deddb(0xeb))](_0x425c3a[_0x3deddb(0xf6)]);}}async[a408_0x4f81a8(0xcf)](_0x4def3f){const _0x30dc9f=a408_0x4f81a8,_0x42ecbe=[];do{this['_logger']['log']('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1['sleep'])(VeevaService[_0x30dc9f(0xcb)]);const _0x2cd96f=[];for(const _0x43cbc7 of _0x4def3f){const {data:_0x3fe7ec}=await this['_connection']['get'](_0x43cbc7);if(_0x3fe7ec[_0x30dc9f(0xdb)]===status_enums_1[_0x30dc9f(0xd1)][_0x30dc9f(0xc8)]){const {data:_0x44e212}=_0x3fe7ec;switch(_0x44e212[_0x30dc9f(0xdd)]){case status_enums_1['VeevaJobStatus'][_0x30dc9f(0xc8)]:case status_enums_1['VeevaJobStatus']['ERRORS_ENCOUNTERED']:_0x42ecbe['push'](_0x44e212);break;case status_enums_1['VeevaJobStatus'][_0x30dc9f(0xec)]:case status_enums_1[_0x30dc9f(0xcd)][_0x30dc9f(0xee)]:case status_enums_1[_0x30dc9f(0xcd)][_0x30dc9f(0xf2)]:throw new Error(_0x30dc9f(0xe1)+_0x44e212[_0x30dc9f(0xdd)]);case status_enums_1['VeevaJobStatus']['QUEUED']:case status_enums_1[_0x30dc9f(0xcd)][_0x30dc9f(0xf7)]:case status_enums_1[_0x30dc9f(0xcd)][_0x30dc9f(0xf3)]:_0x2cd96f[_0x30dc9f(0xc1)](_0x43cbc7);break;default:throw new Error(_0x30dc9f(0xd0)+_0x44e212[_0x30dc9f(0xdd)]+'\x27');}}else throw new veeva_error_1[(_0x30dc9f(0xeb))](_0x3fe7ec[_0x30dc9f(0xf6)]);}_0x4def3f=_0x2cd96f;}while(_0x4def3f['length']);return _0x42ecbe;}}exports[a408_0x4f81a8(0xd9)]=VeevaService,VeevaService[a408_0x4f81a8(0xcb)]=0x2710,VeevaService[a408_0x4f81a8(0xc2)]=0x1f4,VeevaService[a408_0x4f81a8(0xc3)]=0x1f4;