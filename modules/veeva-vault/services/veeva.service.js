const a364_0x54fbfb=a364_0x134f;function a364_0x2fc5(){const _0x4830d3=['3527898jOSvXy','Creating\x20','VeevaJobStatus','(((.+)+)+)+$','QUEUEING','QUEUED','getJobResult','errors','5iiuZkc','240252pYIoto','defineProperty','SUCCESS','sleep','flat','4512840adqISN','apply','../enums/status.enums','all','../constants/veeva.constants','executeManyVQL','__esModule','toString','VeevaError','data','constructor','Deleting\x20','MISSED_SCHEDULE','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','5635917rpTAly','JOB_STATUS_TIMEOUT','status','../../shared/utils','VeevaService','post','push','Unknown\x20Job\x20status\x20:\x20\x27','\x20records.','VeevaResponseStatus','2YfrBUy','36sOwBTw','executeVQL','delete','_logger','\x20records','2416365EukeQz','RUNNING','createVeevaObjectRecords','chunkArray','_connection','responseStatus','application/json','search','1144316WIGlMa','VeevaConstants','3308224gUUYmR','log','CREATE_RECORDS_LIMIT','length','DELETE_RECORDS_LIMIT','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'];a364_0x2fc5=function(){return _0x4830d3;};return a364_0x2fc5();}(function(_0x47faeb,_0x63a7a7){const _0x3f5e8d=a364_0x134f,_0x34dfdf=_0x47faeb();while(!![]){try{const _0x4e7ac3=parseInt(_0x3f5e8d(0xff))/0x1*(-parseInt(_0x3f5e8d(0xe2))/0x2)+-parseInt(_0x3f5e8d(0x105))/0x3+parseInt(_0x3f5e8d(0x10d))/0x4+-parseInt(_0x3f5e8d(0xe1))/0x5*(-parseInt(_0x3f5e8d(0x115))/0x6)+-parseInt(_0x3f5e8d(0xf5))/0x7+-parseInt(_0x3f5e8d(0x10f))/0x8+parseInt(_0x3f5e8d(0x100))/0x9*(parseInt(_0x3f5e8d(0xe7))/0xa);if(_0x4e7ac3===_0x63a7a7)break;else _0x34dfdf['push'](_0x34dfdf['shift']());}catch(_0x1c9aa2){_0x34dfdf['push'](_0x34dfdf['shift']());}}}(a364_0x2fc5,0x65470));function a364_0x134f(_0x4cb837,_0x2cdf8a){const _0xf254a7=a364_0x2fc5();return a364_0x134f=function(_0x5a7c88,_0x5b7f40){_0x5a7c88=_0x5a7c88-0xdb;let _0x2fc575=_0xf254a7[_0x5a7c88];return _0x2fc575;},a364_0x134f(_0x4cb837,_0x2cdf8a);}const a364_0x5b7f40=(function(){let _0x29a834=!![];return function(_0x1fe70b,_0x461d2e){const _0x143ee0=_0x29a834?function(){const _0x4db54c=a364_0x134f;if(_0x461d2e){const _0x57f72b=_0x461d2e[_0x4db54c(0xe8)](_0x1fe70b,arguments);return _0x461d2e=null,_0x57f72b;}}:function(){};return _0x29a834=![],_0x143ee0;};}()),a364_0x5a7c88=a364_0x5b7f40(this,function(){const _0x3ad744=a364_0x134f;return a364_0x5a7c88[_0x3ad744(0xee)]()['search'](_0x3ad744(0xdc))[_0x3ad744(0xee)]()[_0x3ad744(0xf1)](a364_0x5a7c88)[_0x3ad744(0x10c)](_0x3ad744(0xdc));});a364_0x5a7c88();'use strict';Object[a364_0x54fbfb(0xe3)](exports,a364_0x54fbfb(0xed),{'value':!![]}),exports[a364_0x54fbfb(0xf9)]=void 0x0;const utils_1=require(a364_0x54fbfb(0xf8)),status_enums_1=require(a364_0x54fbfb(0xe9)),veeva_error_1=require('../classes/errors/veeva-error'),veeva_constants_1=require(a364_0x54fbfb(0xeb));class VeevaService{constructor({connection:_0x122ecb,logger:_0x515f85}){const _0x90c5cf=a364_0x54fbfb;this['_connection']=_0x122ecb,this[_0x90c5cf(0x103)]=_0x515f85;}async[a364_0x54fbfb(0xec)](_0x32692d){const _0x171361=a364_0x54fbfb,_0x4db5c0=[];for(const _0x2f7c50 of _0x32692d){_0x4db5c0[_0x171361(0xfb)](this[_0x171361(0x101)](_0x2f7c50));}const _0x59c6da=await Promise[_0x171361(0xea)](_0x4db5c0);return _0x59c6da[_0x171361(0xe6)]();}async[a364_0x54fbfb(0x101)](_0x84b8c6){const _0x51c2be=a364_0x54fbfb,_0x33ce92=[];let _0x23f3bd=this[_0x51c2be(0x109)][_0x51c2be(0xfa)](veeva_constants_1[_0x51c2be(0x10e)]['ENDPOINT_VQL'],new URLSearchParams([['q',_0x84b8c6]]),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}}),_0x4e9aad=![];do{const _0x4e051e=await _0x23f3bd,_0x3242b1=_0x4e051e[_0x51c2be(0xf0)];if(_0x3242b1[_0x51c2be(0x10a)]!==status_enums_1[_0x51c2be(0xfe)][_0x51c2be(0xe4)])throw new veeva_error_1[(_0x51c2be(0xef))](_0x3242b1[_0x51c2be(0xe0)]);const {responseDetails:{next_page:_0x1fb9d6},data:_0x217335}=_0x3242b1;_0x1fb9d6?_0x23f3bd=this['_connection']['get'](_0x1fb9d6):_0x4e9aad=!![],_0x33ce92[_0x51c2be(0xfb)](..._0x217335);}while(!_0x4e9aad);return _0x33ce92;}async[a364_0x54fbfb(0x107)](_0x5b8a31,_0x77c5a7){const _0x290953=a364_0x54fbfb,_0x5caad0=[],_0x151d32=(0x0,utils_1[_0x290953(0x108)])(_0x77c5a7,VeevaService[_0x290953(0x111)]),_0x2eafd5=_0x77c5a7['length'];let _0x4188e0=0x0;for(const _0x4f53d3 of _0x151d32){_0x4188e0+=_0x4f53d3['length'],this[_0x290953(0x103)][_0x290953(0x110)](_0x290953(0x116)+_0x4188e0+'/'+_0x2eafd5+_0x290953(0xfd));const _0x546d27=await this[_0x290953(0x109)]['post'](_0x5b8a31,_0x4f53d3),_0x29b741=_0x546d27[_0x290953(0xf0)];if(_0x29b741[_0x290953(0x10a)]===status_enums_1[_0x290953(0xfe)]['SUCCESS'])for(const {responseStatus:_0x2f0455,data:_0x13e1b0}of _0x29b741[_0x290953(0xf0)]){if(_0x2f0455===status_enums_1['VeevaResponseStatus'][_0x290953(0xe4)])_0x5caad0[_0x290953(0xfb)](_0x13e1b0['id']);else throw new veeva_error_1[(_0x290953(0xef))](_0x29b741[_0x290953(0xe0)]);}else throw new veeva_error_1[(_0x290953(0xef))](_0x29b741[_0x290953(0xe0)]);}return _0x5caad0;}async['deleteVeevaObjectRecords'](_0x40cbfa,_0x498f53){const _0x23865b=a364_0x54fbfb,_0x5b36bd=_0x498f53['map'](_0xdab706=>({'id':_0xdab706})),_0x41f3ea=(0x0,utils_1[_0x23865b(0x108)])(_0x5b36bd,VeevaService[_0x23865b(0x113)]);let _0x827de2=0x0;for(const _0x1e5afa of _0x41f3ea){_0x827de2+=_0x1e5afa[_0x23865b(0x112)],this[_0x23865b(0x103)][_0x23865b(0x110)](_0x23865b(0xf2)+_0x827de2+'/'+_0x498f53[_0x23865b(0x112)]+_0x23865b(0x104));const {data:_0x4da127}=await this['_connection'][_0x23865b(0x102)](_0x40cbfa,{'headers':{'Content-Type':_0x23865b(0x10b)},'data':_0x1e5afa});if(_0x4da127[_0x23865b(0x10a)]===status_enums_1[_0x23865b(0xfe)][_0x23865b(0xe4)])for(const _0x35d6d8 of _0x4da127[_0x23865b(0xf0)]){const {responseStatus:_0x39423c,errors:_0x30881d}=_0x35d6d8;if(_0x39423c!==status_enums_1[_0x23865b(0xfe)]['SUCCESS'])throw new veeva_error_1[(_0x23865b(0xef))](_0x30881d);}else throw new veeva_error_1[(_0x23865b(0xef))](_0x4da127[_0x23865b(0xe0)]);}}async[a364_0x54fbfb(0xdf)](_0x1c7c86){const _0x38629f=a364_0x54fbfb,_0x36da02=[];do{this[_0x38629f(0x103)][_0x38629f(0x110)](_0x38629f(0x114)),await(0x0,utils_1[_0x38629f(0xe5)])(VeevaService[_0x38629f(0xf6)]);const _0x19ec0a=[];for(const _0x2494a9 of _0x1c7c86){const {data:_0x484d91}=await this[_0x38629f(0x109)]['get'](_0x2494a9);if(_0x484d91['responseStatus']===status_enums_1[_0x38629f(0xfe)][_0x38629f(0xe4)]){const {data:_0x4e3ee3}=_0x484d91;switch(_0x4e3ee3[_0x38629f(0xf7)]){case status_enums_1[_0x38629f(0xdb)][_0x38629f(0xe4)]:case status_enums_1[_0x38629f(0xdb)]['ERRORS_ENCOUNTERED']:_0x36da02[_0x38629f(0xfb)](_0x4e3ee3);break;case status_enums_1['VeevaJobStatus'][_0x38629f(0xdd)]:case status_enums_1['VeevaJobStatus']['CANCELLED']:case status_enums_1['VeevaJobStatus'][_0x38629f(0xf3)]:throw new Error(_0x38629f(0xf4)+_0x4e3ee3[_0x38629f(0xf7)]);case status_enums_1['VeevaJobStatus'][_0x38629f(0xde)]:case status_enums_1[_0x38629f(0xdb)][_0x38629f(0x106)]:case status_enums_1[_0x38629f(0xdb)]['SCHEDULED']:_0x19ec0a[_0x38629f(0xfb)](_0x2494a9);break;default:throw new Error(_0x38629f(0xfc)+_0x4e3ee3['status']+'\x27');}}else throw new veeva_error_1['VeevaError'](_0x484d91[_0x38629f(0xe0)]);}_0x1c7c86=_0x19ec0a;}while(_0x1c7c86[_0x38629f(0x112)]);return _0x36da02;}}exports[a364_0x54fbfb(0xf9)]=VeevaService,VeevaService[a364_0x54fbfb(0xf6)]=0x2710,VeevaService[a364_0x54fbfb(0x111)]=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;