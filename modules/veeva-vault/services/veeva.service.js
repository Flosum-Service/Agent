const a408_0xb9587b=a408_0x5bf1;(function(_0x45c8e1,_0x100fd3){const _0xa7a8b=a408_0x5bf1,_0x396649=_0x45c8e1();while(!![]){try{const _0x223731=-parseInt(_0xa7a8b(0xed))/0x1+parseInt(_0xa7a8b(0xce))/0x2*(-parseInt(_0xa7a8b(0xda))/0x3)+parseInt(_0xa7a8b(0xd6))/0x4*(-parseInt(_0xa7a8b(0x103))/0x5)+-parseInt(_0xa7a8b(0xe4))/0x6*(-parseInt(_0xa7a8b(0xe7))/0x7)+-parseInt(_0xa7a8b(0xf0))/0x8*(parseInt(_0xa7a8b(0xf8))/0x9)+parseInt(_0xa7a8b(0xcc))/0xa+parseInt(_0xa7a8b(0xf7))/0xb*(parseInt(_0xa7a8b(0xdd))/0xc);if(_0x223731===_0x100fd3)break;else _0x396649['push'](_0x396649['shift']());}catch(_0x5a5073){_0x396649['push'](_0x396649['shift']());}}}(a408_0x176e,0xbb08c));const a408_0x50ca9c=(function(){let _0x5bd050=!![];return function(_0x16202b,_0x212061){const _0x3125e4=_0x5bd050?function(){const _0x4abcda=a408_0x5bf1;if(_0x212061){const _0x4f2e44=_0x212061[_0x4abcda(0x101)](_0x16202b,arguments);return _0x212061=null,_0x4f2e44;}}:function(){};return _0x5bd050=![],_0x3125e4;};}()),a408_0x1447fb=a408_0x50ca9c(this,function(){const _0x351287=a408_0x5bf1;return a408_0x1447fb[_0x351287(0xf2)]()[_0x351287(0xea)](_0x351287(0xe5))[_0x351287(0xf2)]()[_0x351287(0xf3)](a408_0x1447fb)[_0x351287(0xea)](_0x351287(0xe5));});a408_0x1447fb();function a408_0x176e(){const _0x2297f9=['880668VLDwLC','JOB_STATUS_TIMEOUT','delete','2832KdcHho','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','toString','constructor','application/x-www-form-urlencoded','VeevaJobStatus','MISSED_SCHEDULE','11tkzVNU','24021HaBlxg','SCHEDULED','_logger','../../shared/utils','RUNNING','flat','VeevaError','getJobResult','Creating\x20','apply','executeManyVQL','337945YbkTjS','CREATE_RECORDS_LIMIT','push','VeevaConstants','responseStatus','12132440oJCmSW','_connection','941974OiUUoC','data','errors','chunkArray','deleteVeevaObjectRecords','log','get','VeevaService','4BwhrWE','Deleting\x20','__esModule','DELETE_RECORDS_LIMIT','9gGnzcC','post','ERRORS_ENCOUNTERED','32382852Emdzty','SUCCESS','../classes/errors/veeva-error','status','ENDPOINT_VQL','VeevaResponseStatus','QUEUEING','222dJqTyT','(((.+)+)+)+$','Unknown\x20Job\x20status\x20:\x20\x27','30331rqHyJM','../constants/veeva.constants','CANCELLED','search','length','executeVQL'];a408_0x176e=function(){return _0x2297f9;};return a408_0x176e();}'use strict';Object['defineProperty'](exports,a408_0xb9587b(0xd8),{'value':!![]}),exports[a408_0xb9587b(0xd5)]=void 0x0;const utils_1=require(a408_0xb9587b(0xfb)),status_enums_1=require('../enums/status.enums'),veeva_error_1=require(a408_0xb9587b(0xdf)),veeva_constants_1=require(a408_0xb9587b(0xe8));class VeevaService{constructor({connection:_0x468006,logger:_0x28af3f}){const _0x2358a5=a408_0xb9587b;this[_0x2358a5(0xcd)]=_0x468006,this['_logger']=_0x28af3f;}async[a408_0xb9587b(0x102)](_0x5cbf66){const _0x4c7f35=a408_0xb9587b,_0x21b0c2=[];for(const _0x22b819 of _0x5cbf66){_0x21b0c2['push'](this[_0x4c7f35(0xec)](_0x22b819));}const _0x58c174=await Promise['all'](_0x21b0c2);return _0x58c174[_0x4c7f35(0xfd)]();}async[a408_0xb9587b(0xec)](_0x5766a3){const _0x91cb17=a408_0xb9587b,_0xd3e31c=[];let _0x361d03=this[_0x91cb17(0xcd)]['post'](veeva_constants_1[_0x91cb17(0xca)][_0x91cb17(0xe1)],new URLSearchParams([['q',_0x5766a3]]),{'headers':{'Content-Type':_0x91cb17(0xf4)}}),_0x4dc0a4=![];do{const _0x2024d6=await _0x361d03,_0x31b8a4=_0x2024d6[_0x91cb17(0xcf)];if(_0x31b8a4['responseStatus']!==status_enums_1[_0x91cb17(0xe2)][_0x91cb17(0xde)])throw new veeva_error_1['VeevaError'](_0x31b8a4[_0x91cb17(0xd0)]);const {responseDetails:{next_page:_0x391bc0},data:_0x2fc75d}=_0x31b8a4;_0x391bc0?_0x361d03=this[_0x91cb17(0xcd)][_0x91cb17(0xd4)](_0x391bc0):_0x4dc0a4=!![],_0xd3e31c[_0x91cb17(0xc9)](..._0x2fc75d);}while(!_0x4dc0a4);return _0xd3e31c;}async['createVeevaObjectRecords'](_0x199794,_0x5790c6){const _0x11e5f6=a408_0xb9587b,_0x5cec5a=[],_0x1c444e=(0x0,utils_1[_0x11e5f6(0xd1)])(_0x5790c6,VeevaService[_0x11e5f6(0xc8)]),_0x260162=_0x5790c6[_0x11e5f6(0xeb)];let _0x437a8e=0x0;for(const _0xefd5c0 of _0x1c444e){_0x437a8e+=_0xefd5c0[_0x11e5f6(0xeb)],this[_0x11e5f6(0xfa)]['log'](_0x11e5f6(0x100)+_0x437a8e+'/'+_0x260162+'\x20records.');const _0x5828de=await this['_connection'][_0x11e5f6(0xdb)](_0x199794,_0xefd5c0),_0x2b1ae1=_0x5828de['data'];if(_0x2b1ae1[_0x11e5f6(0xcb)]===status_enums_1[_0x11e5f6(0xe2)][_0x11e5f6(0xde)])for(const {responseStatus:_0x2cd314,data:_0xffad98}of _0x2b1ae1[_0x11e5f6(0xcf)]){if(_0x2cd314===status_enums_1['VeevaResponseStatus'][_0x11e5f6(0xde)])_0x5cec5a[_0x11e5f6(0xc9)](_0xffad98['id']);else throw new veeva_error_1[(_0x11e5f6(0xfe))](_0x2b1ae1[_0x11e5f6(0xd0)]);}else throw new veeva_error_1['VeevaError'](_0x2b1ae1[_0x11e5f6(0xd0)]);}return _0x5cec5a;}async[a408_0xb9587b(0xd2)](_0xe9dd92,_0x49f62c){const _0x3f9ad9=a408_0xb9587b,_0x2c4b36=_0x49f62c['map'](_0x4c1881=>({'id':_0x4c1881})),_0x53193d=(0x0,utils_1['chunkArray'])(_0x2c4b36,VeevaService[_0x3f9ad9(0xd9)]);let _0x2f1826=0x0;for(const _0x4a7287 of _0x53193d){_0x2f1826+=_0x4a7287[_0x3f9ad9(0xeb)],this[_0x3f9ad9(0xfa)][_0x3f9ad9(0xd3)](_0x3f9ad9(0xd7)+_0x2f1826+'/'+_0x49f62c[_0x3f9ad9(0xeb)]+'\x20records');const {data:_0x59ced5}=await this[_0x3f9ad9(0xcd)][_0x3f9ad9(0xef)](_0xe9dd92,{'headers':{'Content-Type':'application/json'},'data':_0x4a7287});if(_0x59ced5['responseStatus']===status_enums_1['VeevaResponseStatus'][_0x3f9ad9(0xde)])for(const _0x516c5d of _0x59ced5[_0x3f9ad9(0xcf)]){const {responseStatus:_0x209c2a,errors:_0x1b6b60}=_0x516c5d;if(_0x209c2a!==status_enums_1['VeevaResponseStatus'][_0x3f9ad9(0xde)])throw new veeva_error_1['VeevaError'](_0x1b6b60);}else throw new veeva_error_1[(_0x3f9ad9(0xfe))](_0x59ced5['errors']);}}async[a408_0xb9587b(0xff)](_0x3dd9e0){const _0x345852=a408_0xb9587b,_0x393fbf=[];do{this[_0x345852(0xfa)][_0x345852(0xd3)](_0x345852(0xf1)),await(0x0,utils_1['sleep'])(VeevaService[_0x345852(0xee)]);const _0x2c212c=[];for(const _0x5e7dc9 of _0x3dd9e0){const {data:_0x56a168}=await this[_0x345852(0xcd)][_0x345852(0xd4)](_0x5e7dc9);if(_0x56a168[_0x345852(0xcb)]===status_enums_1['VeevaResponseStatus']['SUCCESS']){const {data:_0x49cd29}=_0x56a168;switch(_0x49cd29['status']){case status_enums_1['VeevaJobStatus']['SUCCESS']:case status_enums_1['VeevaJobStatus'][_0x345852(0xdc)]:_0x393fbf[_0x345852(0xc9)](_0x49cd29);break;case status_enums_1[_0x345852(0xf5)][_0x345852(0xe3)]:case status_enums_1[_0x345852(0xf5)][_0x345852(0xe9)]:case status_enums_1[_0x345852(0xf5)][_0x345852(0xf6)]:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x49cd29['status']);case status_enums_1[_0x345852(0xf5)]['QUEUED']:case status_enums_1[_0x345852(0xf5)][_0x345852(0xfc)]:case status_enums_1[_0x345852(0xf5)][_0x345852(0xf9)]:_0x2c212c[_0x345852(0xc9)](_0x5e7dc9);break;default:throw new Error(_0x345852(0xe6)+_0x49cd29[_0x345852(0xe0)]+'\x27');}}else throw new veeva_error_1[(_0x345852(0xfe))](_0x56a168[_0x345852(0xd0)]);}_0x3dd9e0=_0x2c212c;}while(_0x3dd9e0[_0x345852(0xeb)]);return _0x393fbf;}}function a408_0x5bf1(_0x560217,_0x16f091){const _0x5e1c5e=a408_0x176e();return a408_0x5bf1=function(_0x1447fb,_0x50ca9c){_0x1447fb=_0x1447fb-0xc8;let _0x176ea9=_0x5e1c5e[_0x1447fb];return _0x176ea9;},a408_0x5bf1(_0x560217,_0x16f091);}exports[a408_0xb9587b(0xd5)]=VeevaService,VeevaService[a408_0xb9587b(0xee)]=0x2710,VeevaService[a408_0xb9587b(0xc8)]=0x1f4,VeevaService[a408_0xb9587b(0xd9)]=0x1f4;