const a364_0x5c5494=a364_0x2ab2;(function(_0x3c4331,_0x863b50){const _0x4cf74c=a364_0x2ab2,_0x2959f2=_0x3c4331();while(!![]){try{const _0xa1510f=parseInt(_0x4cf74c(0xa1))/0x1+-parseInt(_0x4cf74c(0xa3))/0x2*(parseInt(_0x4cf74c(0xb3))/0x3)+-parseInt(_0x4cf74c(0x9c))/0x4*(parseInt(_0x4cf74c(0x8b))/0x5)+-parseInt(_0x4cf74c(0xa6))/0x6*(parseInt(_0x4cf74c(0x8e))/0x7)+parseInt(_0x4cf74c(0x89))/0x8+-parseInt(_0x4cf74c(0xad))/0x9*(parseInt(_0x4cf74c(0x98))/0xa)+parseInt(_0x4cf74c(0xa2))/0xb;if(_0xa1510f===_0x863b50)break;else _0x2959f2['push'](_0x2959f2['shift']());}catch(_0x2fa52a){_0x2959f2['push'](_0x2959f2['shift']());}}}(a364_0x1dd4,0x726ee));const a364_0x22615e=(function(){let _0x206c1d=!![];return function(_0x136660,_0x48bc59){const _0x2a4a48=_0x206c1d?function(){const _0x5105af=a364_0x2ab2;if(_0x48bc59){const _0x1d295d=_0x48bc59[_0x5105af(0x82)](_0x136660,arguments);return _0x48bc59=null,_0x1d295d;}}:function(){};return _0x206c1d=![],_0x2a4a48;};}()),a364_0x2942eb=a364_0x22615e(this,function(){const _0x58c460=a364_0x2ab2;return a364_0x2942eb[_0x58c460(0x8a)]()[_0x58c460(0x83)](_0x58c460(0x92))[_0x58c460(0x8a)]()['constructor'](a364_0x2942eb)[_0x58c460(0x83)](_0x58c460(0x92));});function a364_0x2ab2(_0x31928b,_0x4881c5){const _0x503471=a364_0x1dd4();return a364_0x2ab2=function(_0x2942eb,_0x22615e){_0x2942eb=_0x2942eb-0x7b;let _0x1dd4fa=_0x503471[_0x2942eb];return _0x1dd4fa;},a364_0x2ab2(_0x31928b,_0x4881c5);}a364_0x2942eb();'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a364_0x5c5494(0x91)]=void 0x0;const utils_1=require(a364_0x5c5494(0x9f)),status_enums_1=require('../enums/status.enums'),veeva_error_1=require(a364_0x5c5494(0x9d)),veeva_constants_1=require(a364_0x5c5494(0x94));class VeevaService{constructor({connection:_0xec364d,logger:_0x3d51ee}){const _0x17ff6a=a364_0x5c5494;this['_connection']=_0xec364d,this[_0x17ff6a(0x84)]=_0x3d51ee;}async[a364_0x5c5494(0x81)](_0x4d7022){const _0x3d74e7=a364_0x5c5494,_0x3ba5f0=[];for(const _0x52712e of _0x4d7022){_0x3ba5f0[_0x3d74e7(0xb4)](this['executeVQL'](_0x52712e));}const _0x733900=await Promise[_0x3d74e7(0x9b)](_0x3ba5f0);return _0x733900[_0x3d74e7(0x9a)]();}async['executeVQL'](_0x473655){const _0x1351fe=a364_0x5c5494,_0x2bac56=[];let _0x581a06=this[_0x1351fe(0x7c)][_0x1351fe(0x80)](veeva_constants_1[_0x1351fe(0x86)]['ENDPOINT_VQL'],new URLSearchParams([['q',_0x473655]]),{'headers':{'Content-Type':_0x1351fe(0xa0)}}),_0x4005c9=![];do{const _0x2bdad4=await _0x581a06,_0x1f8cd4=_0x2bdad4['data'];if(_0x1f8cd4[_0x1351fe(0x95)]!==status_enums_1[_0x1351fe(0xb0)]['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x1f8cd4[_0x1351fe(0xa4)]);const {responseDetails:{next_page:_0x256625},data:_0x4b786e}=_0x1f8cd4;_0x256625?_0x581a06=this[_0x1351fe(0x7c)][_0x1351fe(0xa8)](_0x256625):_0x4005c9=!![],_0x2bac56[_0x1351fe(0xb4)](..._0x4b786e);}while(!_0x4005c9);return _0x2bac56;}async[a364_0x5c5494(0xae)](_0x28d6c0,_0x3661f8){const _0x57ebbe=a364_0x5c5494,_0xd09fa0=[],_0x4d4e44=(0x0,utils_1[_0x57ebbe(0xac)])(_0x3661f8,VeevaService['CREATE_RECORDS_LIMIT']),_0x3e7b43=_0x3661f8[_0x57ebbe(0x93)];let _0x3d4be1=0x0;for(const _0x481d63 of _0x4d4e44){_0x3d4be1+=_0x481d63[_0x57ebbe(0x93)],this['_logger'][_0x57ebbe(0xaf)]('Creating\x20'+_0x3d4be1+'/'+_0x3e7b43+_0x57ebbe(0x7e));const _0x39b091=await this['_connection'][_0x57ebbe(0x80)](_0x28d6c0,_0x481d63),_0x399a4e=_0x39b091[_0x57ebbe(0x97)];if(_0x399a4e[_0x57ebbe(0x95)]===status_enums_1[_0x57ebbe(0xb0)][_0x57ebbe(0xb2)])for(const {responseStatus:_0x4c5c87,data:_0xa4f263}of _0x399a4e[_0x57ebbe(0x97)]){if(_0x4c5c87===status_enums_1['VeevaResponseStatus'][_0x57ebbe(0xb2)])_0xd09fa0[_0x57ebbe(0xb4)](_0xa4f263['id']);else throw new veeva_error_1[(_0x57ebbe(0xb5))](_0x399a4e[_0x57ebbe(0xa4)]);}else throw new veeva_error_1['VeevaError'](_0x399a4e[_0x57ebbe(0xa4)]);}return _0xd09fa0;}async[a364_0x5c5494(0x7d)](_0x32da8e,_0x141b06){const _0x25d69e=a364_0x5c5494,_0x1f1890=_0x141b06[_0x25d69e(0xaa)](_0xde5fba=>({'id':_0xde5fba})),_0x324f7b=(0x0,utils_1[_0x25d69e(0xac)])(_0x1f1890,VeevaService['DELETE_RECORDS_LIMIT']);let _0x24dc98=0x0;for(const _0x35b2cc of _0x324f7b){_0x24dc98+=_0x35b2cc[_0x25d69e(0x93)],this[_0x25d69e(0x84)][_0x25d69e(0xaf)]('Deleting\x20'+_0x24dc98+'/'+_0x141b06[_0x25d69e(0x93)]+_0x25d69e(0x99));const {data:_0x9150fd}=await this[_0x25d69e(0x7c)][_0x25d69e(0xa9)](_0x32da8e,{'headers':{'Content-Type':_0x25d69e(0x9e)},'data':_0x35b2cc});if(_0x9150fd[_0x25d69e(0x95)]===status_enums_1[_0x25d69e(0xb0)]['SUCCESS'])for(const _0x502843 of _0x9150fd[_0x25d69e(0x97)]){const {responseStatus:_0x212044,errors:_0xc0411b}=_0x502843;if(_0x212044!==status_enums_1[_0x25d69e(0xb0)][_0x25d69e(0xb2)])throw new veeva_error_1[(_0x25d69e(0xb5))](_0xc0411b);}else throw new veeva_error_1['VeevaError'](_0x9150fd[_0x25d69e(0xa4)]);}}async['getJobResult'](_0x4ebfe5){const _0x225c49=a364_0x5c5494,_0x2a82d1=[];do{this[_0x225c49(0x84)][_0x225c49(0xaf)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0x225c49(0x96)])(VeevaService[_0x225c49(0xa7)]);const _0x5692c8=[];for(const _0x4d4698 of _0x4ebfe5){const {data:_0x311b02}=await this[_0x225c49(0x7c)][_0x225c49(0xa8)](_0x4d4698);if(_0x311b02[_0x225c49(0x95)]===status_enums_1[_0x225c49(0xb0)][_0x225c49(0xb2)]){const {data:_0x10b2fd}=_0x311b02;switch(_0x10b2fd['status']){case status_enums_1[_0x225c49(0x7b)][_0x225c49(0xb2)]:case status_enums_1[_0x225c49(0x7b)][_0x225c49(0x8c)]:_0x2a82d1[_0x225c49(0xb4)](_0x10b2fd);break;case status_enums_1['VeevaJobStatus'][_0x225c49(0x85)]:case status_enums_1[_0x225c49(0x7b)][_0x225c49(0x88)]:case status_enums_1[_0x225c49(0x7b)]['MISSED_SCHEDULE']:throw new Error(_0x225c49(0x87)+_0x10b2fd['status']);case status_enums_1[_0x225c49(0x7b)][_0x225c49(0x7f)]:case status_enums_1[_0x225c49(0x7b)][_0x225c49(0xb1)]:case status_enums_1[_0x225c49(0x7b)][_0x225c49(0x90)]:_0x5692c8[_0x225c49(0xb4)](_0x4d4698);break;default:throw new Error(_0x225c49(0xab)+_0x10b2fd[_0x225c49(0x8f)]+'\x27');}}else throw new veeva_error_1[(_0x225c49(0xb5))](_0x311b02[_0x225c49(0xa4)]);}_0x4ebfe5=_0x5692c8;}while(_0x4ebfe5[_0x225c49(0x93)]);return _0x2a82d1;}}exports[a364_0x5c5494(0x91)]=VeevaService,VeevaService[a364_0x5c5494(0xa7)]=0x2710,VeevaService[a364_0x5c5494(0xa5)]=0x1f4,VeevaService[a364_0x5c5494(0x8d)]=0x1f4;function a364_0x1dd4(){const _0x9d50f9=['toString','20CqKpHW','ERRORS_ENCOUNTERED','DELETE_RECORDS_LIMIT','91GMywfi','status','SCHEDULED','VeevaService','(((.+)+)+)+$','length','../constants/veeva.constants','responseStatus','sleep','data','160IxSncj','\x20records','flat','all','16464vTwYlC','../classes/errors/veeva-error','application/json','../../shared/utils','application/x-www-form-urlencoded','40769bZzcTE','11474584YHmZNV','10LNoDCo','errors','CREATE_RECORDS_LIMIT','244578JELTTk','JOB_STATUS_TIMEOUT','get','delete','map','Unknown\x20Job\x20status\x20:\x20\x27','chunkArray','20187qFFuYX','createVeevaObjectRecords','log','VeevaResponseStatus','RUNNING','SUCCESS','68421gmFVtL','push','VeevaError','VeevaJobStatus','_connection','deleteVeevaObjectRecords','\x20records.','QUEUED','post','executeManyVQL','apply','search','_logger','QUEUEING','VeevaConstants','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','CANCELLED','648888ETNwDM'];a364_0x1dd4=function(){return _0x9d50f9;};return a364_0x1dd4();}