const a340_0x18b70d=a340_0x5431;(function(_0x41ae65,_0x2ba8e6){const _0x3188a9=a340_0x5431,_0x28d28a=_0x41ae65();while(!![]){try{const _0x530432=parseInt(_0x3188a9(0x196))/0x1*(-parseInt(_0x3188a9(0x17c))/0x2)+-parseInt(_0x3188a9(0x1a9))/0x3+parseInt(_0x3188a9(0x182))/0x4+-parseInt(_0x3188a9(0x1a8))/0x5*(parseInt(_0x3188a9(0x1ae))/0x6)+-parseInt(_0x3188a9(0x1ad))/0x7*(-parseInt(_0x3188a9(0x180))/0x8)+parseInt(_0x3188a9(0x17d))/0x9+-parseInt(_0x3188a9(0x190))/0xa*(-parseInt(_0x3188a9(0x19b))/0xb);if(_0x530432===_0x2ba8e6)break;else _0x28d28a['push'](_0x28d28a['shift']());}catch(_0x3456d3){_0x28d28a['push'](_0x28d28a['shift']());}}}(a340_0x585a,0x9027b));const a340_0xd68be6=(function(){let _0xbf2d82=!![];return function(_0x394a15,_0x892b86){const _0x5a3c7d=_0xbf2d82?function(){const _0x58f5cd=a340_0x5431;if(_0x892b86){const _0xa49966=_0x892b86[_0x58f5cd(0x19a)](_0x394a15,arguments);return _0x892b86=null,_0xa49966;}}:function(){};return _0xbf2d82=![],_0x5a3c7d;};}()),a340_0x1b90ab=a340_0xd68be6(this,function(){const _0x583607=a340_0x5431;return a340_0x1b90ab['toString']()[_0x583607(0x195)](_0x583607(0x1a0))[_0x583607(0x1a7)]()[_0x583607(0x1a5)](a340_0x1b90ab)['search'](_0x583607(0x1a0));});a340_0x1b90ab();'use strict';Object[a340_0x18b70d(0x193)](exports,a340_0x18b70d(0x1a6),{'value':!![]}),exports['VeevaService']=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a340_0x18b70d(0x1ac)),veeva_error_1=require('../classes/errors/veeva-error');function a340_0x5431(_0x125d5c,_0xb7f991){const _0x56cd1c=a340_0x585a();return a340_0x5431=function(_0x1b90ab,_0xd68be6){_0x1b90ab=_0x1b90ab-0x177;let _0x585a87=_0x56cd1c[_0x1b90ab];return _0x585a87;},a340_0x5431(_0x125d5c,_0xb7f991);}class VeevaService{constructor({connection:_0x1608d0,logger:_0x24c357}){this['_connection']=_0x1608d0,this['_logger']=_0x24c357;}async[a340_0x18b70d(0x18a)](_0x5c58e7){const _0x5d2b28=a340_0x18b70d,_0x196a30=[];for(const _0x387cff of _0x5c58e7){_0x196a30[_0x5d2b28(0x194)](this['executeVQL'](_0x387cff));}const _0x174208=await Promise['all'](_0x196a30);return _0x174208['flat']();}async[a340_0x18b70d(0x18b)](_0x32284a){const _0x17d4f1=a340_0x18b70d,_0x4bdcad=[];do{const _0x1660d4=await this[_0x17d4f1(0x18d)][_0x17d4f1(0x1aa)](_0x32284a),_0x30e72d=_0x1660d4[_0x17d4f1(0x18c)];if(_0x30e72d[_0x17d4f1(0x177)]===status_enums_1[_0x17d4f1(0x189)][_0x17d4f1(0x19c)]){const {responseDetails:{next_page:_0x1f417d},data:_0x4190d6}=_0x30e72d;_0x32284a=_0x1f417d||null,_0x4bdcad['push'](..._0x4190d6);}else throw new veeva_error_1[(_0x17d4f1(0x18e))](_0x30e72d[_0x17d4f1(0x19d)]);}while(_0x32284a);return _0x4bdcad;}async[a340_0x18b70d(0x192)](_0x224f65,_0x25b468){const _0x3cf182=a340_0x18b70d,_0x581127=[],_0x391d18=(0x0,utils_1[_0x3cf182(0x179)])(_0x25b468,VeevaService['CREATE_RECORDS_LIMIT']),_0x22ca3f=_0x25b468[_0x3cf182(0x183)];let _0x3813af=0x0;for(const _0x5c385d of _0x391d18){_0x3813af+=_0x5c385d[_0x3cf182(0x183)],this['_logger']['log'](_0x3cf182(0x1a2)+_0x3813af+'/'+_0x22ca3f+_0x3cf182(0x187));const _0x5e7983=await this[_0x3cf182(0x18d)][_0x3cf182(0x17b)](_0x224f65,_0x5c385d),_0x45c30e=_0x5e7983[_0x3cf182(0x18c)];if(_0x45c30e[_0x3cf182(0x177)]===status_enums_1['VeevaResponseStatus'][_0x3cf182(0x19c)])for(const {responseStatus:_0x1d6323,data:_0x3b5a3f}of _0x45c30e[_0x3cf182(0x18c)]){if(_0x1d6323===status_enums_1[_0x3cf182(0x189)][_0x3cf182(0x19c)])_0x581127[_0x3cf182(0x194)](_0x3b5a3f['id']);else throw new veeva_error_1[(_0x3cf182(0x18e))](_0x45c30e['errors']);}else throw new veeva_error_1[(_0x3cf182(0x18e))](_0x45c30e[_0x3cf182(0x19d)]);}return _0x581127;}async[a340_0x18b70d(0x191)](_0x253f94,_0xcca370){const _0x36c377=a340_0x18b70d,_0x1a0256=_0xcca370[_0x36c377(0x197)](_0x2dd17f=>({'id':_0x2dd17f})),_0x753899=(0x0,utils_1['chunkArray'])(_0x1a0256,VeevaService['DELETE_RECORDS_LIMIT']);let _0x370e96=0x0;for(const _0x384e9c of _0x753899){_0x370e96+=_0x384e9c[_0x36c377(0x183)],this[_0x36c377(0x188)]['log'](_0x36c377(0x184)+_0x370e96+'/'+_0xcca370[_0x36c377(0x183)]+_0x36c377(0x181));const {data:_0x489285}=await this[_0x36c377(0x18d)][_0x36c377(0x1a3)](_0x253f94,{'headers':{'Content-Type':_0x36c377(0x185)},'data':_0x384e9c});if(_0x489285[_0x36c377(0x177)]===status_enums_1[_0x36c377(0x189)][_0x36c377(0x19c)])for(const _0x40420e of _0x489285[_0x36c377(0x18c)]){const {responseStatus:_0x408548,errors:_0x505ef0}=_0x40420e;if(_0x408548!==status_enums_1[_0x36c377(0x189)]['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x505ef0);}else throw new veeva_error_1['VeevaError'](_0x489285[_0x36c377(0x19d)]);}}async[a340_0x18b70d(0x1a4)](_0x49ea23){const _0x21649c=a340_0x18b70d,_0x5af478=[];do{this[_0x21649c(0x188)][_0x21649c(0x198)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1['sleep'])(VeevaService[_0x21649c(0x1ab)]);const _0x45f998=[];for(const _0x39f3fa of _0x49ea23){const {data:_0x5c114c}=await this[_0x21649c(0x18d)][_0x21649c(0x1aa)](_0x39f3fa);if(_0x5c114c[_0x21649c(0x177)]===status_enums_1[_0x21649c(0x189)][_0x21649c(0x19c)]){const {data:_0x3359f1}=_0x5c114c;switch(_0x3359f1[_0x21649c(0x1a1)]){case status_enums_1[_0x21649c(0x19f)]['SUCCESS']:case status_enums_1['VeevaJobStatus'][_0x21649c(0x19e)]:_0x5af478[_0x21649c(0x194)](_0x3359f1);break;case status_enums_1[_0x21649c(0x19f)][_0x21649c(0x17e)]:case status_enums_1[_0x21649c(0x19f)][_0x21649c(0x199)]:case status_enums_1[_0x21649c(0x19f)][_0x21649c(0x17f)]:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x3359f1[_0x21649c(0x1a1)]);case status_enums_1[_0x21649c(0x19f)][_0x21649c(0x186)]:case status_enums_1['VeevaJobStatus'][_0x21649c(0x18f)]:case status_enums_1[_0x21649c(0x19f)]['SCHEDULED']:_0x45f998[_0x21649c(0x194)](_0x39f3fa);break;default:throw new Error(_0x21649c(0x178)+_0x3359f1[_0x21649c(0x1a1)]+'\x27');}}else throw new veeva_error_1[(_0x21649c(0x18e))](_0x5c114c[_0x21649c(0x19d)]);}_0x49ea23=_0x45f998;}while(_0x49ea23['length']);return _0x5af478;}}exports['VeevaService']=VeevaService,VeevaService['JOB_STATUS_TIMEOUT']=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService[a340_0x18b70d(0x17a)]=0x1f4;function a340_0x585a(){const _0x1d7f91=['chunkArray','DELETE_RECORDS_LIMIT','post','172202lhqtBB','7948377EeZAAI','QUEUEING','MISSED_SCHEDULE','40DZmneZ','\x20records','2584632duzBnd','length','Deleting\x20','application/json','QUEUED','\x20records.','_logger','VeevaResponseStatus','executeManyVQL','executeVQL','data','_connection','VeevaError','RUNNING','15070AxtuMj','deleteVeevaObjectRecords','createVeevaObjectRecords','defineProperty','push','search','6psFONM','map','log','CANCELLED','apply','2860PmYUsY','SUCCESS','errors','ERRORS_ENCOUNTERED','VeevaJobStatus','(((.+)+)+)+$','status','Creating\x20','delete','getJobResult','constructor','__esModule','toString','1228535EvzbSM','1319700BrrIGz','get','JOB_STATUS_TIMEOUT','../enums/status.enums','508137RtgHyf','18dUyzbk','responseStatus','Unknown\x20Job\x20status\x20:\x20\x27'];a340_0x585a=function(){return _0x1d7f91;};return a340_0x585a();}