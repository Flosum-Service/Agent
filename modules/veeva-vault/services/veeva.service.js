const a363_0x8d1ba2=a363_0x29fd;(function(_0x5ef93c,_0x421139){const _0x7dfe06=a363_0x29fd,_0x2832e9=_0x5ef93c();while(!![]){try{const _0x2f8247=parseInt(_0x7dfe06(0x93))/0x1*(-parseInt(_0x7dfe06(0xb3))/0x2)+-parseInt(_0x7dfe06(0xa6))/0x3+-parseInt(_0x7dfe06(0xac))/0x4*(-parseInt(_0x7dfe06(0xb2))/0x5)+parseInt(_0x7dfe06(0xae))/0x6*(-parseInt(_0x7dfe06(0xb1))/0x7)+parseInt(_0x7dfe06(0x8e))/0x8+parseInt(_0x7dfe06(0x8f))/0x9*(-parseInt(_0x7dfe06(0xb6))/0xa)+parseInt(_0x7dfe06(0xa4))/0xb*(-parseInt(_0x7dfe06(0x8d))/0xc);if(_0x2f8247===_0x421139)break;else _0x2832e9['push'](_0x2832e9['shift']());}catch(_0x193375){_0x2832e9['push'](_0x2832e9['shift']());}}}(a363_0x3725,0x33785));const a363_0x353039=(function(){let _0x33b65f=!![];return function(_0x2335e2,_0x4c7e77){const _0x1d7b5a=_0x33b65f?function(){const _0x35a6c4=a363_0x29fd;if(_0x4c7e77){const _0x3ba171=_0x4c7e77[_0x35a6c4(0x87)](_0x2335e2,arguments);return _0x4c7e77=null,_0x3ba171;}}:function(){};return _0x33b65f=![],_0x1d7b5a;};}()),a363_0x3818a6=a363_0x353039(this,function(){const _0x23279a=a363_0x29fd;return a363_0x3818a6[_0x23279a(0xaf)]()[_0x23279a(0x7f)](_0x23279a(0x99))[_0x23279a(0xaf)]()[_0x23279a(0xa9)](a363_0x3818a6)[_0x23279a(0x7f)](_0x23279a(0x99));});a363_0x3818a6();'use strict';function a363_0x29fd(_0x12ed2d,_0x224232){const _0x495380=a363_0x3725();return a363_0x29fd=function(_0x3818a6,_0x353039){_0x3818a6=_0x3818a6-0x7f;let _0x3725a3=_0x495380[_0x3818a6];return _0x3725a3;},a363_0x29fd(_0x12ed2d,_0x224232);}function a363_0x3725(){const _0x407353=['_logger','QUEUED','JOB_STATUS_TIMEOUT','VeevaResponseStatus','VeevaJobStatus','length','chunkArray','apply','executeVQL','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','responseStatus','Deleting\x20','SUCCESS','12KrIeJB','1661056bagBgH','100260doJTtk','push','get','__esModule','5XjMLAX','Unknown\x20Job\x20status\x20:\x20\x27','Creating\x20','log','data','application/json','(((.+)+)+)+$','flat','createVeevaObjectRecords','DELETE_RECORDS_LIMIT','errors','VeevaError','map','_connection','ERRORS_ENCOUNTERED','all','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','910217RPpGWK','executeManyVQL','106431cFTZvM','../enums/status.enums','status','constructor','delete','../classes/errors/veeva-error','5664QaJHCr','\x20records','828MYIPQv','toString','CREATE_RECORDS_LIMIT','1512hoSLor','1155nbKEtK','12422CESYqG','RUNNING','\x20records.','130cZBngS','VeevaService','CANCELLED','search'];a363_0x3725=function(){return _0x407353;};return a363_0x3725();}Object['defineProperty'](exports,a363_0x8d1ba2(0x92),{'value':!![]}),exports[a363_0x8d1ba2(0xb7)]=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a363_0x8d1ba2(0xa7)),veeva_error_1=require(a363_0x8d1ba2(0xab));class VeevaService{constructor({connection:_0x345546,logger:_0x1aa572}){const _0x135ab6=a363_0x8d1ba2;this['_connection']=_0x345546,this[_0x135ab6(0x80)]=_0x1aa572;}async[a363_0x8d1ba2(0xa5)](_0x322d2e){const _0x3244af=a363_0x8d1ba2,_0x34bcde=[];for(const _0x41e731 of _0x322d2e){_0x34bcde[_0x3244af(0x90)](this[_0x3244af(0x88)](_0x41e731));}const _0x21d6f0=await Promise[_0x3244af(0xa2)](_0x34bcde);return _0x21d6f0[_0x3244af(0x9a)]();}async[a363_0x8d1ba2(0x88)](_0x349831){const _0x16ca79=a363_0x8d1ba2,_0x3bdbef=[];do{const _0x3e0871=await this['_connection'][_0x16ca79(0x91)](_0x349831),_0x2694d8=_0x3e0871[_0x16ca79(0x97)];if(_0x2694d8[_0x16ca79(0x8a)]===status_enums_1['VeevaResponseStatus'][_0x16ca79(0x8c)]){const {responseDetails:{next_page:_0x4e1ea3},data:_0x354802}=_0x2694d8;_0x349831=_0x4e1ea3||null,_0x3bdbef['push'](..._0x354802);}else throw new veeva_error_1['VeevaError'](_0x2694d8[_0x16ca79(0x9d)]);}while(_0x349831);return _0x3bdbef;}async[a363_0x8d1ba2(0x9b)](_0x5cd7d7,_0x54f4e2){const _0x246873=a363_0x8d1ba2,_0x1af9bd=[],_0x4e7a14=(0x0,utils_1[_0x246873(0x86)])(_0x54f4e2,VeevaService[_0x246873(0xb0)]),_0x12157a=_0x54f4e2[_0x246873(0x85)];let _0xd62905=0x0;for(const _0x29ae6f of _0x4e7a14){_0xd62905+=_0x29ae6f[_0x246873(0x85)],this[_0x246873(0x80)][_0x246873(0x96)](_0x246873(0x95)+_0xd62905+'/'+_0x12157a+_0x246873(0xb5));const _0x594dd=await this[_0x246873(0xa0)]['post'](_0x5cd7d7,_0x29ae6f),_0xd5328b=_0x594dd[_0x246873(0x97)];if(_0xd5328b[_0x246873(0x8a)]===status_enums_1['VeevaResponseStatus'][_0x246873(0x8c)])for(const {responseStatus:_0x505443,data:_0x429cf9}of _0xd5328b['data']){if(_0x505443===status_enums_1[_0x246873(0x83)][_0x246873(0x8c)])_0x1af9bd[_0x246873(0x90)](_0x429cf9['id']);else throw new veeva_error_1[(_0x246873(0x9e))](_0xd5328b['errors']);}else throw new veeva_error_1['VeevaError'](_0xd5328b[_0x246873(0x9d)]);}return _0x1af9bd;}async['deleteVeevaObjectRecords'](_0x2e35c0,_0xac848){const _0x25562b=a363_0x8d1ba2,_0x4ca0e0=_0xac848[_0x25562b(0x9f)](_0x296841=>({'id':_0x296841})),_0x43618e=(0x0,utils_1[_0x25562b(0x86)])(_0x4ca0e0,VeevaService[_0x25562b(0x9c)]);let _0x3e2d0f=0x0;for(const _0x2e2fc4 of _0x43618e){_0x3e2d0f+=_0x2e2fc4[_0x25562b(0x85)],this['_logger'][_0x25562b(0x96)](_0x25562b(0x8b)+_0x3e2d0f+'/'+_0xac848['length']+_0x25562b(0xad));const {data:_0x246a9b}=await this[_0x25562b(0xa0)][_0x25562b(0xaa)](_0x2e35c0,{'headers':{'Content-Type':_0x25562b(0x98)},'data':_0x2e2fc4});if(_0x246a9b[_0x25562b(0x8a)]===status_enums_1[_0x25562b(0x83)][_0x25562b(0x8c)])for(const _0x5e05cc of _0x246a9b[_0x25562b(0x97)]){const {responseStatus:_0xc425b8,errors:_0x5e89c7}=_0x5e05cc;if(_0xc425b8!==status_enums_1['VeevaResponseStatus'][_0x25562b(0x8c)])throw new veeva_error_1[(_0x25562b(0x9e))](_0x5e89c7);}else throw new veeva_error_1[(_0x25562b(0x9e))](_0x246a9b[_0x25562b(0x9d)]);}}async['getJobResult'](_0x356c96){const _0x56260c=a363_0x8d1ba2,_0x207aa6=[];do{this[_0x56260c(0x80)][_0x56260c(0x96)](_0x56260c(0x89)),await(0x0,utils_1['sleep'])(VeevaService['JOB_STATUS_TIMEOUT']);const _0x560dd1=[];for(const _0x393641 of _0x356c96){const {data:_0x4d23f7}=await this[_0x56260c(0xa0)][_0x56260c(0x91)](_0x393641);if(_0x4d23f7['responseStatus']===status_enums_1['VeevaResponseStatus'][_0x56260c(0x8c)]){const {data:_0x5695f3}=_0x4d23f7;switch(_0x5695f3[_0x56260c(0xa8)]){case status_enums_1[_0x56260c(0x84)][_0x56260c(0x8c)]:case status_enums_1[_0x56260c(0x84)][_0x56260c(0xa1)]:_0x207aa6[_0x56260c(0x90)](_0x5695f3);break;case status_enums_1[_0x56260c(0x84)]['QUEUEING']:case status_enums_1[_0x56260c(0x84)][_0x56260c(0xb8)]:case status_enums_1['VeevaJobStatus']['MISSED_SCHEDULE']:throw new Error(_0x56260c(0xa3)+_0x5695f3['status']);case status_enums_1[_0x56260c(0x84)][_0x56260c(0x81)]:case status_enums_1[_0x56260c(0x84)][_0x56260c(0xb4)]:case status_enums_1[_0x56260c(0x84)]['SCHEDULED']:_0x560dd1[_0x56260c(0x90)](_0x393641);break;default:throw new Error(_0x56260c(0x94)+_0x5695f3[_0x56260c(0xa8)]+'\x27');}}else throw new veeva_error_1[(_0x56260c(0x9e))](_0x4d23f7['errors']);}_0x356c96=_0x560dd1;}while(_0x356c96[_0x56260c(0x85)]);return _0x207aa6;}}exports['VeevaService']=VeevaService,VeevaService[a363_0x8d1ba2(0x82)]=0x2710,VeevaService[a363_0x8d1ba2(0xb0)]=0x1f4,VeevaService[a363_0x8d1ba2(0x9c)]=0x1f4;