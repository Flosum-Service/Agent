const a408_0x66cef2=a408_0x221c;(function(_0x454ed3,_0x6b74db){const _0x4f5349=a408_0x221c,_0x5cce46=_0x454ed3();while(!![]){try{const _0xb25931=parseInt(_0x4f5349(0x14f))/0x1+-parseInt(_0x4f5349(0x177))/0x2*(parseInt(_0x4f5349(0x151))/0x3)+-parseInt(_0x4f5349(0x147))/0x4+-parseInt(_0x4f5349(0x166))/0x5+parseInt(_0x4f5349(0x158))/0x6+-parseInt(_0x4f5349(0x16d))/0x7*(parseInt(_0x4f5349(0x15d))/0x8)+parseInt(_0x4f5349(0x180))/0x9;if(_0xb25931===_0x6b74db)break;else _0x5cce46['push'](_0x5cce46['shift']());}catch(_0x26b153){_0x5cce46['push'](_0x5cce46['shift']());}}}(a408_0x1dd1,0xaf266));const a408_0x162d49=(function(){let _0x540eb7=!![];return function(_0x373ba7,_0x1e9743){const _0x384065=_0x540eb7?function(){const _0x320f7=a408_0x221c;if(_0x1e9743){const _0xcdf1e0=_0x1e9743[_0x320f7(0x149)](_0x373ba7,arguments);return _0x1e9743=null,_0xcdf1e0;}}:function(){};return _0x540eb7=![],_0x384065;};}()),a408_0x3c505f=a408_0x162d49(this,function(){const _0x557a81=a408_0x221c;return a408_0x3c505f[_0x557a81(0x171)]()[_0x557a81(0x14d)](_0x557a81(0x170))[_0x557a81(0x171)]()['constructor'](a408_0x3c505f)[_0x557a81(0x14d)]('(((.+)+)+)+$');});a408_0x3c505f();function a408_0x1dd1(){const _0x19b116=['get','defineProperty','SCHEDULED','post','errors','VeevaService','sleep','5593275ueTFkH','Deleting\x20','../classes/errors/veeva-error','log','RUNNING','flat','MISSED_SCHEDULE','313411yCsFwm','JOB_STATUS_TIMEOUT','chunkArray','(((.+)+)+)+$','toString','createVeevaObjectRecords','executeManyVQL','length','VeevaError','responseStatus','1712572FQCdgJ','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','\x20records','QUEUEING','__esModule','ERRORS_ENCOUNTERED','Creating\x20','map','VeevaJobStatus','28998522sFzUrv','_connection','QUEUED','VeevaConstants','status','1745080GvUmMa','application/x-www-form-urlencoded','apply','getJobResult','\x20records.','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','search','ENDPOINT_VQL','635314aexAhK','_logger','3ouZVSZ','deleteVeevaObjectRecords','VeevaResponseStatus','../constants/veeva.constants','SUCCESS','data','executeVQL','2343468DATwmR','../enums/status.enums','push','CREATE_RECORDS_LIMIT','application/json','200koKVYv','DELETE_RECORDS_LIMIT'];a408_0x1dd1=function(){return _0x19b116;};return a408_0x1dd1();}function a408_0x221c(_0x1b5773,_0x48eca3){const _0x35b050=a408_0x1dd1();return a408_0x221c=function(_0x3c505f,_0x162d49){_0x3c505f=_0x3c505f-0x147;let _0x1dd100=_0x35b050[_0x3c505f];return _0x1dd100;},a408_0x221c(_0x1b5773,_0x48eca3);}'use strict';Object[a408_0x66cef2(0x160)](exports,a408_0x66cef2(0x17b),{'value':!![]}),exports[a408_0x66cef2(0x164)]=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a408_0x66cef2(0x159)),veeva_error_1=require(a408_0x66cef2(0x168)),veeva_constants_1=require(a408_0x66cef2(0x154));class VeevaService{constructor({connection:_0x668b09,logger:_0x241a9a}){this['_connection']=_0x668b09,this['_logger']=_0x241a9a;}async[a408_0x66cef2(0x173)](_0x14fda5){const _0xf0e2b0=a408_0x66cef2,_0x207b4f=[];for(const _0x2f6067 of _0x14fda5){_0x207b4f['push'](this[_0xf0e2b0(0x157)](_0x2f6067));}const _0x2188f6=await Promise['all'](_0x207b4f);return _0x2188f6[_0xf0e2b0(0x16b)]();}async[a408_0x66cef2(0x157)](_0x41b627){const _0x4ceef1=a408_0x66cef2,_0x2be244=[];let _0x58e0e1=this['_connection'][_0x4ceef1(0x162)](veeva_constants_1[_0x4ceef1(0x183)][_0x4ceef1(0x14e)],new URLSearchParams([['q',_0x41b627]]),{'headers':{'Content-Type':_0x4ceef1(0x148)}}),_0x4ffe18=![];do{const _0x58d749=await _0x58e0e1,_0x1b6d3d=_0x58d749[_0x4ceef1(0x156)];if(_0x1b6d3d[_0x4ceef1(0x176)]!==status_enums_1[_0x4ceef1(0x153)]['SUCCESS'])throw new veeva_error_1[(_0x4ceef1(0x175))](_0x1b6d3d['errors']);const {responseDetails:{next_page:_0x1d873e},data:_0x27964f}=_0x1b6d3d;_0x1d873e?_0x58e0e1=this['_connection'][_0x4ceef1(0x15f)](_0x1d873e):_0x4ffe18=!![],_0x2be244[_0x4ceef1(0x15a)](..._0x27964f);}while(!_0x4ffe18);return _0x2be244;}async[a408_0x66cef2(0x172)](_0x495e73,_0x6e271d){const _0x467e89=a408_0x66cef2,_0x9654f0=[],_0x35535f=(0x0,utils_1['chunkArray'])(_0x6e271d,VeevaService['CREATE_RECORDS_LIMIT']),_0x42898f=_0x6e271d['length'];let _0x4f9395=0x0;for(const _0x104fdf of _0x35535f){_0x4f9395+=_0x104fdf[_0x467e89(0x174)],this[_0x467e89(0x150)][_0x467e89(0x169)](_0x467e89(0x17d)+_0x4f9395+'/'+_0x42898f+_0x467e89(0x14b));const _0x5a59b7=await this['_connection'][_0x467e89(0x162)](_0x495e73,_0x104fdf),_0xe01cc1=_0x5a59b7[_0x467e89(0x156)];if(_0xe01cc1[_0x467e89(0x176)]===status_enums_1[_0x467e89(0x153)][_0x467e89(0x155)])for(const {responseStatus:_0x503046,data:_0x456859}of _0xe01cc1['data']){if(_0x503046===status_enums_1['VeevaResponseStatus'][_0x467e89(0x155)])_0x9654f0[_0x467e89(0x15a)](_0x456859['id']);else throw new veeva_error_1['VeevaError'](_0xe01cc1[_0x467e89(0x163)]);}else throw new veeva_error_1[(_0x467e89(0x175))](_0xe01cc1['errors']);}return _0x9654f0;}async[a408_0x66cef2(0x152)](_0x403168,_0x4810b0){const _0x119765=a408_0x66cef2,_0x56271d=_0x4810b0[_0x119765(0x17e)](_0xd4966d=>({'id':_0xd4966d})),_0x918306=(0x0,utils_1[_0x119765(0x16f)])(_0x56271d,VeevaService[_0x119765(0x15e)]);let _0x331417=0x0;for(const _0x260ff5 of _0x918306){_0x331417+=_0x260ff5[_0x119765(0x174)],this[_0x119765(0x150)]['log'](_0x119765(0x167)+_0x331417+'/'+_0x4810b0[_0x119765(0x174)]+_0x119765(0x179));const {data:_0x1da810}=await this['_connection']['delete'](_0x403168,{'headers':{'Content-Type':_0x119765(0x15c)},'data':_0x260ff5});if(_0x1da810[_0x119765(0x176)]===status_enums_1[_0x119765(0x153)][_0x119765(0x155)])for(const _0x43d5e3 of _0x1da810[_0x119765(0x156)]){const {responseStatus:_0x5d65b1,errors:_0x57a7f0}=_0x43d5e3;if(_0x5d65b1!==status_enums_1[_0x119765(0x153)][_0x119765(0x155)])throw new veeva_error_1[(_0x119765(0x175))](_0x57a7f0);}else throw new veeva_error_1[(_0x119765(0x175))](_0x1da810[_0x119765(0x163)]);}}async[a408_0x66cef2(0x14a)](_0x5705c9){const _0x11d67e=a408_0x66cef2,_0x13ca9c=[];do{this[_0x11d67e(0x150)][_0x11d67e(0x169)](_0x11d67e(0x14c)),await(0x0,utils_1[_0x11d67e(0x165)])(VeevaService[_0x11d67e(0x16e)]);const _0x425b91=[];for(const _0x5ce2e5 of _0x5705c9){const {data:_0x10ced4}=await this[_0x11d67e(0x181)]['get'](_0x5ce2e5);if(_0x10ced4['responseStatus']===status_enums_1['VeevaResponseStatus'][_0x11d67e(0x155)]){const {data:_0x426fbf}=_0x10ced4;switch(_0x426fbf['status']){case status_enums_1[_0x11d67e(0x17f)][_0x11d67e(0x155)]:case status_enums_1[_0x11d67e(0x17f)][_0x11d67e(0x17c)]:_0x13ca9c[_0x11d67e(0x15a)](_0x426fbf);break;case status_enums_1[_0x11d67e(0x17f)][_0x11d67e(0x17a)]:case status_enums_1['VeevaJobStatus']['CANCELLED']:case status_enums_1['VeevaJobStatus'][_0x11d67e(0x16c)]:throw new Error(_0x11d67e(0x178)+_0x426fbf[_0x11d67e(0x184)]);case status_enums_1[_0x11d67e(0x17f)][_0x11d67e(0x182)]:case status_enums_1['VeevaJobStatus'][_0x11d67e(0x16a)]:case status_enums_1[_0x11d67e(0x17f)][_0x11d67e(0x161)]:_0x425b91['push'](_0x5ce2e5);break;default:throw new Error('Unknown\x20Job\x20status\x20:\x20\x27'+_0x426fbf[_0x11d67e(0x184)]+'\x27');}}else throw new veeva_error_1['VeevaError'](_0x10ced4[_0x11d67e(0x163)]);}_0x5705c9=_0x425b91;}while(_0x5705c9[_0x11d67e(0x174)]);return _0x13ca9c;}}exports[a408_0x66cef2(0x164)]=VeevaService,VeevaService[a408_0x66cef2(0x16e)]=0x2710,VeevaService[a408_0x66cef2(0x15b)]=0x1f4,VeevaService[a408_0x66cef2(0x15e)]=0x1f4;