const a408_0xe2728c=a408_0xc477;(function(_0x5184a2,_0x2a5406){const _0xa13e68=a408_0xc477,_0x5ab116=_0x5184a2();while(!![]){try{const _0x5e8b50=-parseInt(_0xa13e68(0x98))/0x1*(parseInt(_0xa13e68(0xab))/0x2)+parseInt(_0xa13e68(0xbf))/0x3+parseInt(_0xa13e68(0xbd))/0x4+-parseInt(_0xa13e68(0x99))/0x5*(parseInt(_0xa13e68(0xbb))/0x6)+parseInt(_0xa13e68(0x91))/0x7*(-parseInt(_0xa13e68(0xb9))/0x8)+parseInt(_0xa13e68(0x8c))/0x9*(-parseInt(_0xa13e68(0xbe))/0xa)+-parseInt(_0xa13e68(0xaf))/0xb*(parseInt(_0xa13e68(0xae))/0xc);if(_0x5e8b50===_0x2a5406)break;else _0x5ab116['push'](_0x5ab116['shift']());}catch(_0x1cf714){_0x5ab116['push'](_0x5ab116['shift']());}}}(a408_0x1b91,0x54a83));const a408_0x3cbcfb=(function(){let _0x487064=!![];return function(_0x3b9f87,_0x5acea6){const _0x31e6b9=_0x487064?function(){const _0x2856cd=a408_0xc477;if(_0x5acea6){const _0x51fbb9=_0x5acea6[_0x2856cd(0xa6)](_0x3b9f87,arguments);return _0x5acea6=null,_0x51fbb9;}}:function(){};return _0x487064=![],_0x31e6b9;};}()),a408_0x301fba=a408_0x3cbcfb(this,function(){const _0x920a82=a408_0xc477;return a408_0x301fba[_0x920a82(0x96)]()[_0x920a82(0x90)](_0x920a82(0xa8))[_0x920a82(0x96)]()[_0x920a82(0xb6)](a408_0x301fba)['search'](_0x920a82(0xa8));});a408_0x301fba();'use strict';function a408_0xc477(_0xc877be,_0x2968cb){const _0x5652d7=a408_0x1b91();return a408_0xc477=function(_0x301fba,_0x3cbcfb){_0x301fba=_0x301fba-0x87;let _0x1b91a9=_0x5652d7[_0x301fba];return _0x1b91a9;},a408_0xc477(_0xc877be,_0x2968cb);}Object['defineProperty'](exports,a408_0xe2728c(0x9e),{'value':!![]}),exports[a408_0xe2728c(0xb2)]=void 0x0;function a408_0x1b91(){const _0x28da51=['4030rvbYLE','5mWqjKz','_connection','status','responseStatus','errors','__esModule','chunkArray','../enums/status.enums','VeevaError','application/json','post','\x20records.','createVeevaObjectRecords','apply','log','(((.+)+)+)+$','data','get','38GPmKtu','QUEUED','SUCCESS','382692YdxwnH','121zoORnz','length','delete','VeevaService','../constants/veeva.constants','VeevaJobStatus','VeevaResponseStatus','constructor','ENDPOINT_VQL','all','1832uQnJQN','VeevaConstants','569838VyfdOr','executeManyVQL','2723024iiSvdY','10jSdAVw','1417338nqwVmw','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','ERRORS_ENCOUNTERED','_logger','executeVQL','Creating\x20','1522305DNvaGf','getJobResult','JOB_STATUS_TIMEOUT','CREATE_RECORDS_LIMIT','search','3514tixRIR','../../shared/utils','push','Deleting\x20','../classes/errors/veeva-error','toString','DELETE_RECORDS_LIMIT'];a408_0x1b91=function(){return _0x28da51;};return a408_0x1b91();}const utils_1=require(a408_0xe2728c(0x92)),status_enums_1=require(a408_0xe2728c(0xa0)),veeva_error_1=require(a408_0xe2728c(0x95)),veeva_constants_1=require(a408_0xe2728c(0xb3));class VeevaService{constructor({connection:_0x189d99,logger:_0x4f25b3}){const _0x1c998a=a408_0xe2728c;this[_0x1c998a(0x9a)]=_0x189d99,this[_0x1c998a(0x89)]=_0x4f25b3;}async[a408_0xe2728c(0xbc)](_0x212642){const _0x385224=a408_0xe2728c,_0xfbf816=[];for(const _0x413af5 of _0x212642){_0xfbf816[_0x385224(0x93)](this['executeVQL'](_0x413af5));}const _0x358181=await Promise[_0x385224(0xb8)](_0xfbf816);return _0x358181['flat']();}async[a408_0xe2728c(0x8a)](_0x4e5aa3){const _0x34a51e=a408_0xe2728c,_0x3e104a=[];let _0x5e7593=this[_0x34a51e(0x9a)][_0x34a51e(0xa3)](veeva_constants_1[_0x34a51e(0xba)][_0x34a51e(0xb7)],new URLSearchParams([['q',_0x4e5aa3]]),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}}),_0x24b685=![];do{const _0x286cb8=await _0x5e7593,_0x4618bc=_0x286cb8[_0x34a51e(0xa9)];if(_0x4618bc['responseStatus']!==status_enums_1['VeevaResponseStatus'][_0x34a51e(0xad)])throw new veeva_error_1[(_0x34a51e(0xa1))](_0x4618bc[_0x34a51e(0x9d)]);const {responseDetails:{next_page:_0x4aea10},data:_0x529fe0}=_0x4618bc;_0x4aea10?_0x5e7593=this[_0x34a51e(0x9a)][_0x34a51e(0xaa)](_0x4aea10):_0x24b685=!![],_0x3e104a[_0x34a51e(0x93)](..._0x529fe0);}while(!_0x24b685);return _0x3e104a;}async[a408_0xe2728c(0xa5)](_0x57b3c1,_0x3a691c){const _0xa7ac4d=a408_0xe2728c,_0x119d33=[],_0x3cdf5f=(0x0,utils_1[_0xa7ac4d(0x9f)])(_0x3a691c,VeevaService[_0xa7ac4d(0x8f)]),_0xd8584d=_0x3a691c[_0xa7ac4d(0xb0)];let _0x241c90=0x0;for(const _0x1f41aa of _0x3cdf5f){_0x241c90+=_0x1f41aa[_0xa7ac4d(0xb0)],this[_0xa7ac4d(0x89)][_0xa7ac4d(0xa7)](_0xa7ac4d(0x8b)+_0x241c90+'/'+_0xd8584d+_0xa7ac4d(0xa4));const _0x4641c3=await this[_0xa7ac4d(0x9a)][_0xa7ac4d(0xa3)](_0x57b3c1,_0x1f41aa),_0x54f276=_0x4641c3[_0xa7ac4d(0xa9)];if(_0x54f276['responseStatus']===status_enums_1[_0xa7ac4d(0xb5)][_0xa7ac4d(0xad)])for(const {responseStatus:_0x33b5ed,data:_0x3b677e}of _0x54f276['data']){if(_0x33b5ed===status_enums_1[_0xa7ac4d(0xb5)][_0xa7ac4d(0xad)])_0x119d33[_0xa7ac4d(0x93)](_0x3b677e['id']);else throw new veeva_error_1['VeevaError'](_0x54f276[_0xa7ac4d(0x9d)]);}else throw new veeva_error_1[(_0xa7ac4d(0xa1))](_0x54f276[_0xa7ac4d(0x9d)]);}return _0x119d33;}async['deleteVeevaObjectRecords'](_0x399d21,_0x26c79b){const _0x16534b=a408_0xe2728c,_0x594100=_0x26c79b['map'](_0x6760f3=>({'id':_0x6760f3})),_0x1ede82=(0x0,utils_1['chunkArray'])(_0x594100,VeevaService[_0x16534b(0x97)]);let _0x5d6ce9=0x0;for(const _0x5e6c43 of _0x1ede82){_0x5d6ce9+=_0x5e6c43['length'],this[_0x16534b(0x89)][_0x16534b(0xa7)](_0x16534b(0x94)+_0x5d6ce9+'/'+_0x26c79b[_0x16534b(0xb0)]+'\x20records');const {data:_0x4b3e52}=await this[_0x16534b(0x9a)][_0x16534b(0xb1)](_0x399d21,{'headers':{'Content-Type':_0x16534b(0xa2)},'data':_0x5e6c43});if(_0x4b3e52[_0x16534b(0x9c)]===status_enums_1[_0x16534b(0xb5)][_0x16534b(0xad)])for(const _0x39d44f of _0x4b3e52[_0x16534b(0xa9)]){const {responseStatus:_0x180728,errors:_0x59b712}=_0x39d44f;if(_0x180728!==status_enums_1[_0x16534b(0xb5)]['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x59b712);}else throw new veeva_error_1['VeevaError'](_0x4b3e52[_0x16534b(0x9d)]);}}async[a408_0xe2728c(0x8d)](_0x577c4d){const _0x443491=a408_0xe2728c,_0x5a446c=[];do{this['_logger'][_0x443491(0xa7)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1['sleep'])(VeevaService[_0x443491(0x8e)]);const _0x55d9e2=[];for(const _0x2925f1 of _0x577c4d){const {data:_0x206ca2}=await this[_0x443491(0x9a)][_0x443491(0xaa)](_0x2925f1);if(_0x206ca2[_0x443491(0x9c)]===status_enums_1[_0x443491(0xb5)][_0x443491(0xad)]){const {data:_0x540a03}=_0x206ca2;switch(_0x540a03['status']){case status_enums_1[_0x443491(0xb4)][_0x443491(0xad)]:case status_enums_1['VeevaJobStatus'][_0x443491(0x88)]:_0x5a446c[_0x443491(0x93)](_0x540a03);break;case status_enums_1[_0x443491(0xb4)]['QUEUEING']:case status_enums_1[_0x443491(0xb4)]['CANCELLED']:case status_enums_1['VeevaJobStatus']['MISSED_SCHEDULE']:throw new Error(_0x443491(0x87)+_0x540a03[_0x443491(0x9b)]);case status_enums_1[_0x443491(0xb4)][_0x443491(0xac)]:case status_enums_1[_0x443491(0xb4)]['RUNNING']:case status_enums_1['VeevaJobStatus']['SCHEDULED']:_0x55d9e2[_0x443491(0x93)](_0x2925f1);break;default:throw new Error('Unknown\x20Job\x20status\x20:\x20\x27'+_0x540a03[_0x443491(0x9b)]+'\x27');}}else throw new veeva_error_1['VeevaError'](_0x206ca2[_0x443491(0x9d)]);}_0x577c4d=_0x55d9e2;}while(_0x577c4d[_0x443491(0xb0)]);return _0x5a446c;}}exports[a408_0xe2728c(0xb2)]=VeevaService,VeevaService[a408_0xe2728c(0x8e)]=0x2710,VeevaService[a408_0xe2728c(0x8f)]=0x1f4,VeevaService[a408_0xe2728c(0x97)]=0x1f4;