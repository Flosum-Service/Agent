const a380_0xb7e14b=a380_0x516e;(function(_0x420e8d,_0x3bbf5d){const _0x3f2a8d=a380_0x516e,_0x5a8db8=_0x420e8d();while(!![]){try{const _0xf262b2=-parseInt(_0x3f2a8d(0x1d3))/0x1+parseInt(_0x3f2a8d(0x1ba))/0x2*(-parseInt(_0x3f2a8d(0x1d9))/0x3)+parseInt(_0x3f2a8d(0x1d4))/0x4*(parseInt(_0x3f2a8d(0x1d8))/0x5)+-parseInt(_0x3f2a8d(0x1be))/0x6*(parseInt(_0x3f2a8d(0x1bd))/0x7)+-parseInt(_0x3f2a8d(0x1af))/0x8*(-parseInt(_0x3f2a8d(0x1c2))/0x9)+parseInt(_0x3f2a8d(0x1c6))/0xa+-parseInt(_0x3f2a8d(0x1cf))/0xb*(-parseInt(_0x3f2a8d(0x1cb))/0xc);if(_0xf262b2===_0x3bbf5d)break;else _0x5a8db8['push'](_0x5a8db8['shift']());}catch(_0x2696b1){_0x5a8db8['push'](_0x5a8db8['shift']());}}}(a380_0x1e53,0x24ab7));const a380_0x4244ec=(function(){let _0x382724=!![];return function(_0x9ebd9c,_0x17547d){const _0x201f13=_0x382724?function(){const _0x4d9ed9=a380_0x516e;if(_0x17547d){const _0x107670=_0x17547d[_0x4d9ed9(0x1bb)](_0x9ebd9c,arguments);return _0x17547d=null,_0x107670;}}:function(){};return _0x382724=![],_0x201f13;};}()),a380_0x522a09=a380_0x4244ec(this,function(){const _0x33720a=a380_0x516e;return a380_0x522a09[_0x33720a(0x1a6)]()[_0x33720a(0x1cd)](_0x33720a(0x1a8))['toString']()[_0x33720a(0x1de)](a380_0x522a09)['search'](_0x33720a(0x1a8));});a380_0x522a09();'use strict';Object['defineProperty'](exports,a380_0xb7e14b(0x1c8),{'value':!![]}),exports[a380_0xb7e14b(0x1b4)]=void 0x0;function a380_0x1e53(){const _0x26634b=['push','\x20records','length','1065210LkfPLh','VeevaJobStatus','__esModule','Deleting\x20','Unknown\x20Job\x20status\x20:\x20\x27','11112ravTvF','getJobResult','search','application/x-www-form-urlencoded','451acrLGT','responseStatus','../classes/errors/veeva-error','CANCELLED','194369nxhJeV','20YoHjJt','VeevaConstants','errors','VeevaResponseStatus','65055oXVlNv','6tHWWne','_logger','JOB_STATUS_TIMEOUT','CREATE_RECORDS_LIMIT','ENDPOINT_VQL','constructor','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','../../shared/utils','MISSED_SCHEDULE','chunkArray','toString','createVeevaObjectRecords','(((.+)+)+)+$','executeManyVQL','log','Creating\x20','DELETE_RECORDS_LIMIT','status','ERRORS_ENCOUNTERED','1764392pLbGUB','\x20records.','../constants/veeva.constants','VeevaError','application/json','VeevaService','SUCCESS','RUNNING','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','_connection','executeVQL','51734KdpGTU','apply','get','49ZGpfXB','28962xJyHBO','QUEUED','data','SCHEDULED','9bSJoNr'];a380_0x1e53=function(){return _0x26634b;};return a380_0x1e53();}function a380_0x516e(_0x4767c7,_0x51c1d9){const _0x2ed35a=a380_0x1e53();return a380_0x516e=function(_0x522a09,_0x4244ec){_0x522a09=_0x522a09-0x1a2;let _0x1e5338=_0x2ed35a[_0x522a09];return _0x1e5338;},a380_0x516e(_0x4767c7,_0x51c1d9);}const utils_1=require(a380_0xb7e14b(0x1a3)),status_enums_1=require('../enums/status.enums'),veeva_error_1=require(a380_0xb7e14b(0x1d1)),veeva_constants_1=require(a380_0xb7e14b(0x1b1));class VeevaService{constructor({connection:_0x28f69d,logger:_0x5bdc6b}){const _0x476fe8=a380_0xb7e14b;this[_0x476fe8(0x1b8)]=_0x28f69d,this[_0x476fe8(0x1da)]=_0x5bdc6b;}async[a380_0xb7e14b(0x1a9)](_0x175eba){const _0x551dd7=a380_0xb7e14b,_0x84e3b8=[];for(const _0x48c602 of _0x175eba){_0x84e3b8[_0x551dd7(0x1c3)](this[_0x551dd7(0x1b9)](_0x48c602));}const _0x2db037=await Promise['all'](_0x84e3b8);return _0x2db037['flat']();}async[a380_0xb7e14b(0x1b9)](_0x3dd9fc){const _0x3c6487=a380_0xb7e14b,_0x1fa984=[];let _0x41d2ea=this['_connection']['post'](veeva_constants_1[_0x3c6487(0x1d5)][_0x3c6487(0x1dd)],new URLSearchParams([['q',_0x3dd9fc]]),{'headers':{'Content-Type':_0x3c6487(0x1ce)}}),_0x41d763=![];do{const _0x382919=await _0x41d2ea,_0x510fbb=_0x382919[_0x3c6487(0x1c0)];if(_0x510fbb[_0x3c6487(0x1d0)]!==status_enums_1['VeevaResponseStatus'][_0x3c6487(0x1b5)])throw new veeva_error_1[(_0x3c6487(0x1b2))](_0x510fbb['errors']);const {responseDetails:{next_page:_0x1ba525},data:_0x3fbd44}=_0x510fbb;_0x1ba525?_0x41d2ea=this['_connection'][_0x3c6487(0x1bc)](_0x1ba525):_0x41d763=!![],_0x1fa984[_0x3c6487(0x1c3)](..._0x3fbd44);}while(!_0x41d763);return _0x1fa984;}async[a380_0xb7e14b(0x1a7)](_0x24a498,_0x411924){const _0x11a248=a380_0xb7e14b,_0x264308=[],_0x4a55e0=(0x0,utils_1[_0x11a248(0x1a5)])(_0x411924,VeevaService[_0x11a248(0x1dc)]),_0x3349b7=_0x411924[_0x11a248(0x1c5)];let _0x3cd4ff=0x0;for(const _0x3eee26 of _0x4a55e0){_0x3cd4ff+=_0x3eee26[_0x11a248(0x1c5)],this[_0x11a248(0x1da)][_0x11a248(0x1aa)](_0x11a248(0x1ab)+_0x3cd4ff+'/'+_0x3349b7+_0x11a248(0x1b0));const _0x412f8a=await this[_0x11a248(0x1b8)]['post'](_0x24a498,_0x3eee26),_0x1e67f8=_0x412f8a[_0x11a248(0x1c0)];if(_0x1e67f8[_0x11a248(0x1d0)]===status_enums_1[_0x11a248(0x1d7)]['SUCCESS'])for(const {responseStatus:_0x2f012f,data:_0x3bf0bc}of _0x1e67f8[_0x11a248(0x1c0)]){if(_0x2f012f===status_enums_1['VeevaResponseStatus']['SUCCESS'])_0x264308[_0x11a248(0x1c3)](_0x3bf0bc['id']);else throw new veeva_error_1[(_0x11a248(0x1b2))](_0x1e67f8['errors']);}else throw new veeva_error_1[(_0x11a248(0x1b2))](_0x1e67f8[_0x11a248(0x1d6)]);}return _0x264308;}async['deleteVeevaObjectRecords'](_0x4c3255,_0x2d7a7d){const _0x34fc9b=a380_0xb7e14b,_0x14625e=_0x2d7a7d['map'](_0x58ba24=>({'id':_0x58ba24})),_0x33b8e2=(0x0,utils_1[_0x34fc9b(0x1a5)])(_0x14625e,VeevaService[_0x34fc9b(0x1ac)]);let _0x173ba1=0x0;for(const _0x3af07d of _0x33b8e2){_0x173ba1+=_0x3af07d[_0x34fc9b(0x1c5)],this[_0x34fc9b(0x1da)]['log'](_0x34fc9b(0x1c9)+_0x173ba1+'/'+_0x2d7a7d['length']+_0x34fc9b(0x1c4));const {data:_0x2a7164}=await this[_0x34fc9b(0x1b8)]['delete'](_0x4c3255,{'headers':{'Content-Type':_0x34fc9b(0x1b3)},'data':_0x3af07d});if(_0x2a7164[_0x34fc9b(0x1d0)]===status_enums_1[_0x34fc9b(0x1d7)][_0x34fc9b(0x1b5)])for(const _0x9e1ee6 of _0x2a7164[_0x34fc9b(0x1c0)]){const {responseStatus:_0x3c8f40,errors:_0x4b1091}=_0x9e1ee6;if(_0x3c8f40!==status_enums_1[_0x34fc9b(0x1d7)][_0x34fc9b(0x1b5)])throw new veeva_error_1[(_0x34fc9b(0x1b2))](_0x4b1091);}else throw new veeva_error_1[(_0x34fc9b(0x1b2))](_0x2a7164[_0x34fc9b(0x1d6)]);}}async[a380_0xb7e14b(0x1cc)](_0x25388b){const _0xfe93d1=a380_0xb7e14b,_0x26dde4=[];do{this[_0xfe93d1(0x1da)][_0xfe93d1(0x1aa)](_0xfe93d1(0x1a2)),await(0x0,utils_1['sleep'])(VeevaService[_0xfe93d1(0x1db)]);const _0x30c4a8=[];for(const _0x1cb643 of _0x25388b){const {data:_0x3d5208}=await this['_connection']['get'](_0x1cb643);if(_0x3d5208[_0xfe93d1(0x1d0)]===status_enums_1[_0xfe93d1(0x1d7)][_0xfe93d1(0x1b5)]){const {data:_0x532c05}=_0x3d5208;switch(_0x532c05['status']){case status_enums_1[_0xfe93d1(0x1c7)][_0xfe93d1(0x1b5)]:case status_enums_1[_0xfe93d1(0x1c7)][_0xfe93d1(0x1ae)]:_0x26dde4['push'](_0x532c05);break;case status_enums_1[_0xfe93d1(0x1c7)]['QUEUEING']:case status_enums_1[_0xfe93d1(0x1c7)][_0xfe93d1(0x1d2)]:case status_enums_1['VeevaJobStatus'][_0xfe93d1(0x1a4)]:throw new Error(_0xfe93d1(0x1b7)+_0x532c05[_0xfe93d1(0x1ad)]);case status_enums_1['VeevaJobStatus'][_0xfe93d1(0x1bf)]:case status_enums_1[_0xfe93d1(0x1c7)][_0xfe93d1(0x1b6)]:case status_enums_1[_0xfe93d1(0x1c7)][_0xfe93d1(0x1c1)]:_0x30c4a8[_0xfe93d1(0x1c3)](_0x1cb643);break;default:throw new Error(_0xfe93d1(0x1ca)+_0x532c05['status']+'\x27');}}else throw new veeva_error_1[(_0xfe93d1(0x1b2))](_0x3d5208['errors']);}_0x25388b=_0x30c4a8;}while(_0x25388b[_0xfe93d1(0x1c5)]);return _0x26dde4;}}exports[a380_0xb7e14b(0x1b4)]=VeevaService,VeevaService[a380_0xb7e14b(0x1db)]=0x2710,VeevaService[a380_0xb7e14b(0x1dc)]=0x1f4,VeevaService[a380_0xb7e14b(0x1ac)]=0x1f4;