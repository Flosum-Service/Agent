const a379_0x41a436=a379_0x506b;(function(_0xb5587,_0x56d3ec){const _0x356900=a379_0x506b,_0x168465=_0xb5587();while(!![]){try{const _0x2fa145=parseInt(_0x356900(0xc8))/0x1+parseInt(_0x356900(0xc4))/0x2+parseInt(_0x356900(0xbc))/0x3+-parseInt(_0x356900(0xca))/0x4+parseInt(_0x356900(0xde))/0x5+-parseInt(_0x356900(0xe3))/0x6*(-parseInt(_0x356900(0xc9))/0x7)+-parseInt(_0x356900(0xb3))/0x8;if(_0x2fa145===_0x56d3ec)break;else _0x168465['push'](_0x168465['shift']());}catch(_0x4220cb){_0x168465['push'](_0x168465['shift']());}}}(a379_0x2a19,0x4c87c));const a379_0x43a127=(function(){let _0x5160ea=!![];return function(_0x33c5b6,_0x2b31ee){const _0x39a46c=_0x5160ea?function(){const _0x14b346=a379_0x506b;if(_0x2b31ee){const _0xc4a868=_0x2b31ee[_0x14b346(0xd1)](_0x33c5b6,arguments);return _0x2b31ee=null,_0xc4a868;}}:function(){};return _0x5160ea=![],_0x39a46c;};}()),a379_0x45bfa0=a379_0x43a127(this,function(){const _0x48110c=a379_0x506b;return a379_0x45bfa0['toString']()[_0x48110c(0xb9)](_0x48110c(0xda))[_0x48110c(0xd5)]()[_0x48110c(0xba)](a379_0x45bfa0)['search']('(((.+)+)+)+$');});function a379_0x2a19(){const _0x218ede=['chunkArray','../../shared/utils','1482qCBpkJ','VeevaService','../enums/status.enums','Deleting\x20','errors','SCHEDULED','CREATE_RECORDS_LIMIT','../classes/errors/veeva-error','__esModule','7164984oiLLxE','get','_connection','data','DELETE_RECORDS_LIMIT','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','search','constructor','VeevaJobStatus','575514wgSJgr','../constants/veeva.constants','VeevaError','RUNNING','ENDPOINT_VQL','executeManyVQL','createVeevaObjectRecords','MISSED_SCHEDULE','695280DacdZe','log','getJobResult','Creating\x20','102934APpBhZ','1022SZHyCL','71524uVFPol','QUEUED','_logger','responseStatus','Unknown\x20Job\x20status\x20:\x20\x27','push','length','apply','post','status','sleep','toString','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','JOB_STATUS_TIMEOUT','\x20records','defineProperty','(((.+)+)+)+$','deleteVeevaObjectRecords','all','VeevaResponseStatus','2742490BMRkGq','SUCCESS','executeVQL'];a379_0x2a19=function(){return _0x218ede;};return a379_0x2a19();}a379_0x45bfa0();'use strict';Object[a379_0x41a436(0xd9)](exports,a379_0x41a436(0xb2),{'value':!![]}),exports[a379_0x41a436(0xe4)]=void 0x0;const utils_1=require(a379_0x41a436(0xe2)),status_enums_1=require(a379_0x41a436(0xac)),veeva_error_1=require(a379_0x41a436(0xb1)),veeva_constants_1=require(a379_0x41a436(0xbd));class VeevaService{constructor({connection:_0x2ae996,logger:_0x3d74c0}){const _0x4894c3=a379_0x41a436;this[_0x4894c3(0xb5)]=_0x2ae996,this[_0x4894c3(0xcc)]=_0x3d74c0;}async[a379_0x41a436(0xc1)](_0x39100c){const _0x37464d=a379_0x41a436,_0x523ab6=[];for(const _0x11cfd8 of _0x39100c){_0x523ab6[_0x37464d(0xcf)](this[_0x37464d(0xe0)](_0x11cfd8));}const _0x2dfdde=await Promise[_0x37464d(0xdc)](_0x523ab6);return _0x2dfdde['flat']();}async['executeVQL'](_0x3199d3){const _0x44651a=a379_0x41a436,_0x10fd1c=[];let _0x2a9494=this[_0x44651a(0xb5)][_0x44651a(0xd2)](veeva_constants_1['VeevaConstants'][_0x44651a(0xc0)],new URLSearchParams([['q',_0x3199d3]]),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}}),_0x4d4dfa=![];do{const _0x15755a=await _0x2a9494,_0x5d0325=_0x15755a[_0x44651a(0xb6)];if(_0x5d0325[_0x44651a(0xcd)]!==status_enums_1[_0x44651a(0xdd)][_0x44651a(0xdf)])throw new veeva_error_1[(_0x44651a(0xbe))](_0x5d0325[_0x44651a(0xae)]);const {responseDetails:{next_page:_0x448405},data:_0x326b7c}=_0x5d0325;_0x448405?_0x2a9494=this[_0x44651a(0xb5)][_0x44651a(0xb4)](_0x448405):_0x4d4dfa=!![],_0x10fd1c[_0x44651a(0xcf)](..._0x326b7c);}while(!_0x4d4dfa);return _0x10fd1c;}async[a379_0x41a436(0xc2)](_0x43b6e2,_0x3bc3f3){const _0x218bb3=a379_0x41a436,_0x34c838=[],_0x437d84=(0x0,utils_1[_0x218bb3(0xe1)])(_0x3bc3f3,VeevaService[_0x218bb3(0xb0)]),_0x5c285a=_0x3bc3f3[_0x218bb3(0xd0)];let _0x84ed09=0x0;for(const _0x3b06a8 of _0x437d84){_0x84ed09+=_0x3b06a8[_0x218bb3(0xd0)],this[_0x218bb3(0xcc)]['log'](_0x218bb3(0xc7)+_0x84ed09+'/'+_0x5c285a+'\x20records.');const _0x207586=await this[_0x218bb3(0xb5)][_0x218bb3(0xd2)](_0x43b6e2,_0x3b06a8),_0x109417=_0x207586['data'];if(_0x109417['responseStatus']===status_enums_1[_0x218bb3(0xdd)]['SUCCESS'])for(const {responseStatus:_0x2edd1d,data:_0xe71d97}of _0x109417[_0x218bb3(0xb6)]){if(_0x2edd1d===status_enums_1[_0x218bb3(0xdd)][_0x218bb3(0xdf)])_0x34c838[_0x218bb3(0xcf)](_0xe71d97['id']);else throw new veeva_error_1['VeevaError'](_0x109417['errors']);}else throw new veeva_error_1['VeevaError'](_0x109417[_0x218bb3(0xae)]);}return _0x34c838;}async[a379_0x41a436(0xdb)](_0x184446,_0x107e34){const _0x5dced5=a379_0x41a436,_0x57edc2=_0x107e34['map'](_0x59d4d9=>({'id':_0x59d4d9})),_0x3ee380=(0x0,utils_1[_0x5dced5(0xe1)])(_0x57edc2,VeevaService[_0x5dced5(0xb7)]);let _0x12327c=0x0;for(const _0x4971cb of _0x3ee380){_0x12327c+=_0x4971cb[_0x5dced5(0xd0)],this[_0x5dced5(0xcc)][_0x5dced5(0xc5)](_0x5dced5(0xad)+_0x12327c+'/'+_0x107e34[_0x5dced5(0xd0)]+_0x5dced5(0xd8));const {data:_0x1bff50}=await this[_0x5dced5(0xb5)]['delete'](_0x184446,{'headers':{'Content-Type':'application/json'},'data':_0x4971cb});if(_0x1bff50[_0x5dced5(0xcd)]===status_enums_1[_0x5dced5(0xdd)][_0x5dced5(0xdf)])for(const _0x46cee7 of _0x1bff50[_0x5dced5(0xb6)]){const {responseStatus:_0x55483c,errors:_0x272421}=_0x46cee7;if(_0x55483c!==status_enums_1[_0x5dced5(0xdd)]['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x272421);}else throw new veeva_error_1['VeevaError'](_0x1bff50[_0x5dced5(0xae)]);}}async[a379_0x41a436(0xc6)](_0x3092d9){const _0x38756c=a379_0x41a436,_0x29280b=[];do{this['_logger']['log'](_0x38756c(0xd6)),await(0x0,utils_1[_0x38756c(0xd4)])(VeevaService[_0x38756c(0xd7)]);const _0x3bf133=[];for(const _0x4d6e69 of _0x3092d9){const {data:_0x22492b}=await this[_0x38756c(0xb5)][_0x38756c(0xb4)](_0x4d6e69);if(_0x22492b[_0x38756c(0xcd)]===status_enums_1[_0x38756c(0xdd)][_0x38756c(0xdf)]){const {data:_0x5ab736}=_0x22492b;switch(_0x5ab736[_0x38756c(0xd3)]){case status_enums_1[_0x38756c(0xbb)][_0x38756c(0xdf)]:case status_enums_1[_0x38756c(0xbb)]['ERRORS_ENCOUNTERED']:_0x29280b[_0x38756c(0xcf)](_0x5ab736);break;case status_enums_1[_0x38756c(0xbb)]['QUEUEING']:case status_enums_1[_0x38756c(0xbb)]['CANCELLED']:case status_enums_1[_0x38756c(0xbb)][_0x38756c(0xc3)]:throw new Error(_0x38756c(0xb8)+_0x5ab736['status']);case status_enums_1['VeevaJobStatus'][_0x38756c(0xcb)]:case status_enums_1[_0x38756c(0xbb)][_0x38756c(0xbf)]:case status_enums_1[_0x38756c(0xbb)][_0x38756c(0xaf)]:_0x3bf133[_0x38756c(0xcf)](_0x4d6e69);break;default:throw new Error(_0x38756c(0xce)+_0x5ab736[_0x38756c(0xd3)]+'\x27');}}else throw new veeva_error_1[(_0x38756c(0xbe))](_0x22492b[_0x38756c(0xae)]);}_0x3092d9=_0x3bf133;}while(_0x3092d9[_0x38756c(0xd0)]);return _0x29280b;}}function a379_0x506b(_0xa2e59e,_0x3942de){const _0x1c543b=a379_0x2a19();return a379_0x506b=function(_0x45bfa0,_0x43a127){_0x45bfa0=_0x45bfa0-0xac;let _0x2a19e5=_0x1c543b[_0x45bfa0];return _0x2a19e5;},a379_0x506b(_0xa2e59e,_0x3942de);}exports[a379_0x41a436(0xe4)]=VeevaService,VeevaService[a379_0x41a436(0xd7)]=0x2710,VeevaService[a379_0x41a436(0xb0)]=0x1f4,VeevaService[a379_0x41a436(0xb7)]=0x1f4;