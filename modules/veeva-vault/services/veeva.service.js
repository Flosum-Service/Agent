const a396_0x36d629=a396_0x3cd4;(function(_0x488757,_0x45f71c){const _0x34c860=a396_0x3cd4,_0x41d529=_0x488757();while(!![]){try{const _0x4d5f86=parseInt(_0x34c860(0x10c))/0x1*(-parseInt(_0x34c860(0xfd))/0x2)+-parseInt(_0x34c860(0xd9))/0x3*(-parseInt(_0x34c860(0xe3))/0x4)+parseInt(_0x34c860(0xeb))/0x5+parseInt(_0x34c860(0x106))/0x6+parseInt(_0x34c860(0xf3))/0x7*(-parseInt(_0x34c860(0xd8))/0x8)+-parseInt(_0x34c860(0xfe))/0x9+-parseInt(_0x34c860(0xdb))/0xa*(-parseInt(_0x34c860(0xfb))/0xb);if(_0x4d5f86===_0x45f71c)break;else _0x41d529['push'](_0x41d529['shift']());}catch(_0x1d6281){_0x41d529['push'](_0x41d529['shift']());}}}(a396_0x2ed6,0xecac3));const a396_0x5b3f8d=(function(){let _0x57dee8=!![];return function(_0x3ae66b,_0x194bd8){const _0x34f50e=_0x57dee8?function(){const _0xfee871=a396_0x3cd4;if(_0x194bd8){const _0x55cb71=_0x194bd8[_0xfee871(0xd5)](_0x3ae66b,arguments);return _0x194bd8=null,_0x55cb71;}}:function(){};return _0x57dee8=![],_0x34f50e;};}()),a396_0xb53ca9=a396_0x5b3f8d(this,function(){const _0x3c406c=a396_0x3cd4;return a396_0xb53ca9[_0x3c406c(0xe7)]()[_0x3c406c(0xd2)]('(((.+)+)+)+$')[_0x3c406c(0xe7)]()[_0x3c406c(0xf0)](a396_0xb53ca9)[_0x3c406c(0xd2)]('(((.+)+)+)+$');});a396_0xb53ca9();'use strict';Object['defineProperty'](exports,a396_0x36d629(0xf9),{'value':!![]}),exports['VeevaService']=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a396_0x36d629(0xe8)),veeva_error_1=require(a396_0x36d629(0xee)),veeva_constants_1=require('../constants/veeva.constants');function a396_0x2ed6(){const _0x33cbdc=['constructor','\x20records','errors','3289426WZLPQI','application/x-www-form-urlencoded','ENDPOINT_VQL','application/json','MISSED_SCHEDULE','_logger','__esModule','VeevaService','11NrpozS','map','34pwrFrC','14990949zyrqgO','get','delete','getJobResult','executeVQL','deleteVeevaObjectRecords','SUCCESS','\x20records.','9553836wqYwBb','post','Deleting\x20','responseStatus','CREATE_RECORDS_LIMIT','VeevaJobStatus','71441AdxHMy','sleep','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','chunkArray','status','search','Creating\x20','createVeevaObjectRecords','apply','all','QUEUEING','16AmYNLc','3TwLDRF','VeevaError','6671260ZpZsLi','JOB_STATUS_TIMEOUT','RUNNING','log','VeevaResponseStatus','DELETE_RECORDS_LIMIT','flat','data','5598112QQbWxn','_connection','QUEUED','executeManyVQL','toString','../enums/status.enums','push','length','5652225QQnxgE','ERRORS_ENCOUNTERED','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','../classes/errors/veeva-error','VeevaConstants'];a396_0x2ed6=function(){return _0x33cbdc;};return a396_0x2ed6();}function a396_0x3cd4(_0x4fae68,_0x42e9f9){const _0x2e399a=a396_0x2ed6();return a396_0x3cd4=function(_0xb53ca9,_0x5b3f8d){_0xb53ca9=_0xb53ca9-0xd0;let _0x2ed647=_0x2e399a[_0xb53ca9];return _0x2ed647;},a396_0x3cd4(_0x4fae68,_0x42e9f9);}class VeevaService{constructor({connection:_0x2b60d9,logger:_0x215b15}){const _0x3c74e5=a396_0x36d629;this[_0x3c74e5(0xe4)]=_0x2b60d9,this[_0x3c74e5(0xf8)]=_0x215b15;}async[a396_0x36d629(0xe6)](_0x2f12c4){const _0x35a423=a396_0x36d629,_0x45ebb8=[];for(const _0x2c3b35 of _0x2f12c4){_0x45ebb8[_0x35a423(0xe9)](this[_0x35a423(0x102)](_0x2c3b35));}const _0x4827fd=await Promise[_0x35a423(0xd6)](_0x45ebb8);return _0x4827fd[_0x35a423(0xe1)]();}async['executeVQL'](_0x54182f){const _0x36821c=a396_0x36d629,_0x54369a=[];let _0x4e01f1=this[_0x36821c(0xe4)][_0x36821c(0x107)](veeva_constants_1[_0x36821c(0xef)][_0x36821c(0xf5)],new URLSearchParams([['q',_0x54182f]]),{'headers':{'Content-Type':_0x36821c(0xf4)}}),_0x51ab8f=![];do{const _0x48cecc=await _0x4e01f1,_0x151be3=_0x48cecc[_0x36821c(0xe2)];if(_0x151be3[_0x36821c(0x109)]!==status_enums_1[_0x36821c(0xdf)]['SUCCESS'])throw new veeva_error_1[(_0x36821c(0xda))](_0x151be3[_0x36821c(0xf2)]);const {responseDetails:{next_page:_0x25a6e6},data:_0x2e2907}=_0x151be3;_0x25a6e6?_0x4e01f1=this[_0x36821c(0xe4)][_0x36821c(0xff)](_0x25a6e6):_0x51ab8f=!![],_0x54369a[_0x36821c(0xe9)](..._0x2e2907);}while(!_0x51ab8f);return _0x54369a;}async[a396_0x36d629(0xd4)](_0xb419d0,_0x2ef152){const _0x22873d=a396_0x36d629,_0x534a28=[],_0x877823=(0x0,utils_1[_0x22873d(0xd0)])(_0x2ef152,VeevaService[_0x22873d(0x10a)]),_0x25f333=_0x2ef152[_0x22873d(0xea)];let _0x2a038a=0x0;for(const _0x172e18 of _0x877823){_0x2a038a+=_0x172e18[_0x22873d(0xea)],this[_0x22873d(0xf8)][_0x22873d(0xde)](_0x22873d(0xd3)+_0x2a038a+'/'+_0x25f333+_0x22873d(0x105));const _0x136e65=await this['_connection']['post'](_0xb419d0,_0x172e18),_0x4ed0dc=_0x136e65['data'];if(_0x4ed0dc['responseStatus']===status_enums_1[_0x22873d(0xdf)][_0x22873d(0x104)])for(const {responseStatus:_0x26c54c,data:_0x510941}of _0x4ed0dc['data']){if(_0x26c54c===status_enums_1['VeevaResponseStatus'][_0x22873d(0x104)])_0x534a28['push'](_0x510941['id']);else throw new veeva_error_1['VeevaError'](_0x4ed0dc[_0x22873d(0xf2)]);}else throw new veeva_error_1['VeevaError'](_0x4ed0dc[_0x22873d(0xf2)]);}return _0x534a28;}async[a396_0x36d629(0x103)](_0x17598f,_0x3cded7){const _0xf6ca96=a396_0x36d629,_0x3de4f7=_0x3cded7[_0xf6ca96(0xfc)](_0x35bd5c=>({'id':_0x35bd5c})),_0x4125c0=(0x0,utils_1[_0xf6ca96(0xd0)])(_0x3de4f7,VeevaService[_0xf6ca96(0xe0)]);let _0x408411=0x0;for(const _0x41e72f of _0x4125c0){_0x408411+=_0x41e72f[_0xf6ca96(0xea)],this[_0xf6ca96(0xf8)]['log'](_0xf6ca96(0x108)+_0x408411+'/'+_0x3cded7[_0xf6ca96(0xea)]+_0xf6ca96(0xf1));const {data:_0x3dcfff}=await this['_connection'][_0xf6ca96(0x100)](_0x17598f,{'headers':{'Content-Type':_0xf6ca96(0xf6)},'data':_0x41e72f});if(_0x3dcfff['responseStatus']===status_enums_1[_0xf6ca96(0xdf)]['SUCCESS'])for(const _0x87cd80 of _0x3dcfff[_0xf6ca96(0xe2)]){const {responseStatus:_0x45ecb2,errors:_0x52891c}=_0x87cd80;if(_0x45ecb2!==status_enums_1['VeevaResponseStatus'][_0xf6ca96(0x104)])throw new veeva_error_1['VeevaError'](_0x52891c);}else throw new veeva_error_1[(_0xf6ca96(0xda))](_0x3dcfff['errors']);}}async[a396_0x36d629(0x101)](_0x5a7fa5){const _0x5a0e26=a396_0x36d629,_0x469ca2=[];do{this[_0x5a0e26(0xf8)][_0x5a0e26(0xde)](_0x5a0e26(0x10e)),await(0x0,utils_1[_0x5a0e26(0x10d)])(VeevaService[_0x5a0e26(0xdc)]);const _0x30a750=[];for(const _0x5a6371 of _0x5a7fa5){const {data:_0x46dbd6}=await this[_0x5a0e26(0xe4)]['get'](_0x5a6371);if(_0x46dbd6[_0x5a0e26(0x109)]===status_enums_1[_0x5a0e26(0xdf)][_0x5a0e26(0x104)]){const {data:_0x1d9c4b}=_0x46dbd6;switch(_0x1d9c4b[_0x5a0e26(0xd1)]){case status_enums_1['VeevaJobStatus']['SUCCESS']:case status_enums_1['VeevaJobStatus'][_0x5a0e26(0xec)]:_0x469ca2[_0x5a0e26(0xe9)](_0x1d9c4b);break;case status_enums_1[_0x5a0e26(0x10b)][_0x5a0e26(0xd7)]:case status_enums_1[_0x5a0e26(0x10b)]['CANCELLED']:case status_enums_1[_0x5a0e26(0x10b)][_0x5a0e26(0xf7)]:throw new Error(_0x5a0e26(0xed)+_0x1d9c4b[_0x5a0e26(0xd1)]);case status_enums_1[_0x5a0e26(0x10b)][_0x5a0e26(0xe5)]:case status_enums_1[_0x5a0e26(0x10b)][_0x5a0e26(0xdd)]:case status_enums_1[_0x5a0e26(0x10b)]['SCHEDULED']:_0x30a750[_0x5a0e26(0xe9)](_0x5a6371);break;default:throw new Error('Unknown\x20Job\x20status\x20:\x20\x27'+_0x1d9c4b[_0x5a0e26(0xd1)]+'\x27');}}else throw new veeva_error_1[(_0x5a0e26(0xda))](_0x46dbd6[_0x5a0e26(0xf2)]);}_0x5a7fa5=_0x30a750;}while(_0x5a7fa5['length']);return _0x469ca2;}}exports[a396_0x36d629(0xfa)]=VeevaService,VeevaService[a396_0x36d629(0xdc)]=0x2710,VeevaService[a396_0x36d629(0x10a)]=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;