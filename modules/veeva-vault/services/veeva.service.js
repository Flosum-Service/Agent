const a379_0x35f242=a379_0x27b0;(function(_0xe5c6a3,_0x5127de){const _0x26cbe7=a379_0x27b0,_0xb187f9=_0xe5c6a3();while(!![]){try{const _0x439da8=-parseInt(_0x26cbe7(0x101))/0x1*(-parseInt(_0x26cbe7(0x117))/0x2)+parseInt(_0x26cbe7(0x114))/0x3+parseInt(_0x26cbe7(0x10b))/0x4+-parseInt(_0x26cbe7(0x104))/0x5*(-parseInt(_0x26cbe7(0x11b))/0x6)+parseInt(_0x26cbe7(0x106))/0x7*(parseInt(_0x26cbe7(0xfe))/0x8)+-parseInt(_0x26cbe7(0x11c))/0x9*(parseInt(_0x26cbe7(0x121))/0xa)+-parseInt(_0x26cbe7(0x129))/0xb;if(_0x439da8===_0x5127de)break;else _0xb187f9['push'](_0xb187f9['shift']());}catch(_0x22f2cf){_0xb187f9['push'](_0xb187f9['shift']());}}}(a379_0x4988,0x8dabe));const a379_0x5e1514=(function(){let _0x59be34=!![];return function(_0x565cc5,_0x246551){const _0x5c96d2=_0x59be34?function(){const _0x560894=a379_0x27b0;if(_0x246551){const _0x1a8ec8=_0x246551[_0x560894(0xf7)](_0x565cc5,arguments);return _0x246551=null,_0x1a8ec8;}}:function(){};return _0x59be34=![],_0x5c96d2;};}()),a379_0xd403d1=a379_0x5e1514(this,function(){const _0x228eaa=a379_0x27b0;return a379_0xd403d1['toString']()[_0x228eaa(0x10d)](_0x228eaa(0x108))['toString']()[_0x228eaa(0xf3)](a379_0xd403d1)[_0x228eaa(0x10d)](_0x228eaa(0x108));});a379_0xd403d1();function a379_0x27b0(_0x12a593,_0x5a42a9){const _0x168703=a379_0x4988();return a379_0x27b0=function(_0xd403d1,_0x5e1514){_0xd403d1=_0xd403d1-0xf2;let _0x4988ac=_0x168703[_0xd403d1];return _0x4988ac;},a379_0x27b0(_0x12a593,_0x5a42a9);}'use strict';Object['defineProperty'](exports,a379_0x35f242(0xf2),{'value':!![]}),exports[a379_0x35f242(0x113)]=void 0x0;const utils_1=require(a379_0x35f242(0xf4)),status_enums_1=require('../enums/status.enums'),veeva_error_1=require(a379_0x35f242(0x11e)),veeva_constants_1=require(a379_0x35f242(0x12e));class VeevaService{constructor({connection:_0x25704c,logger:_0x284d4d}){const _0x3054f0=a379_0x35f242;this[_0x3054f0(0x124)]=_0x25704c,this[_0x3054f0(0x10f)]=_0x284d4d;}async[a379_0x35f242(0x109)](_0x52b001){const _0x4fdcb5=a379_0x35f242,_0x1f70d3=[];for(const _0x1c112d of _0x52b001){_0x1f70d3['push'](this[_0x4fdcb5(0xf9)](_0x1c112d));}const _0x3d13a5=await Promise[_0x4fdcb5(0x116)](_0x1f70d3);return _0x3d13a5[_0x4fdcb5(0xf8)]();}async[a379_0x35f242(0xf9)](_0x394525){const _0x3fcf2f=a379_0x35f242,_0x1cb536=[];let _0x3e573f=this[_0x3fcf2f(0x124)][_0x3fcf2f(0x11d)](veeva_constants_1[_0x3fcf2f(0xfd)][_0x3fcf2f(0xf5)],new URLSearchParams([['q',_0x394525]]),{'headers':{'Content-Type':_0x3fcf2f(0x10c)}}),_0x1bfb1d=![];do{const _0x1c40f2=await _0x3e573f,_0x16aae5=_0x1c40f2[_0x3fcf2f(0x119)];if(_0x16aae5[_0x3fcf2f(0x107)]!==status_enums_1[_0x3fcf2f(0x128)][_0x3fcf2f(0x10e)])throw new veeva_error_1['VeevaError'](_0x16aae5[_0x3fcf2f(0xfc)]);const {responseDetails:{next_page:_0x1f86ef},data:_0x1141c}=_0x16aae5;_0x1f86ef?_0x3e573f=this[_0x3fcf2f(0x124)]['get'](_0x1f86ef):_0x1bfb1d=!![],_0x1cb536[_0x3fcf2f(0x115)](..._0x1141c);}while(!_0x1bfb1d);return _0x1cb536;}async['createVeevaObjectRecords'](_0x4e3bd5,_0x4bd57a){const _0x5eb4d2=a379_0x35f242,_0xaa8337=[],_0x549ca1=(0x0,utils_1[_0x5eb4d2(0x100)])(_0x4bd57a,VeevaService[_0x5eb4d2(0x122)]),_0x52d5e4=_0x4bd57a[_0x5eb4d2(0x127)];let _0x2538fc=0x0;for(const _0x4ed903 of _0x549ca1){_0x2538fc+=_0x4ed903['length'],this['_logger'][_0x5eb4d2(0xfb)](_0x5eb4d2(0x118)+_0x2538fc+'/'+_0x52d5e4+_0x5eb4d2(0x120));const _0x5981bf=await this['_connection'][_0x5eb4d2(0x11d)](_0x4e3bd5,_0x4ed903),_0x1b3e9f=_0x5981bf[_0x5eb4d2(0x119)];if(_0x1b3e9f[_0x5eb4d2(0x107)]===status_enums_1[_0x5eb4d2(0x128)][_0x5eb4d2(0x10e)])for(const {responseStatus:_0xd699a9,data:_0x43ea1d}of _0x1b3e9f['data']){if(_0xd699a9===status_enums_1[_0x5eb4d2(0x128)][_0x5eb4d2(0x10e)])_0xaa8337[_0x5eb4d2(0x115)](_0x43ea1d['id']);else throw new veeva_error_1['VeevaError'](_0x1b3e9f['errors']);}else throw new veeva_error_1[(_0x5eb4d2(0x11f))](_0x1b3e9f[_0x5eb4d2(0xfc)]);}return _0xaa8337;}async[a379_0x35f242(0x103)](_0x292758,_0x2e7c4e){const _0x5ec431=a379_0x35f242,_0x26cf82=_0x2e7c4e[_0x5ec431(0x12d)](_0x1c6c3e=>({'id':_0x1c6c3e})),_0x2295ac=(0x0,utils_1[_0x5ec431(0x100)])(_0x26cf82,VeevaService['DELETE_RECORDS_LIMIT']);let _0x4f39e1=0x0;for(const _0xe9038a of _0x2295ac){_0x4f39e1+=_0xe9038a[_0x5ec431(0x127)],this[_0x5ec431(0x10f)][_0x5ec431(0xfb)](_0x5ec431(0x123)+_0x4f39e1+'/'+_0x2e7c4e[_0x5ec431(0x127)]+_0x5ec431(0x12c));const {data:_0x26d00c}=await this[_0x5ec431(0x124)]['delete'](_0x292758,{'headers':{'Content-Type':_0x5ec431(0x131)},'data':_0xe9038a});if(_0x26d00c[_0x5ec431(0x107)]===status_enums_1['VeevaResponseStatus'][_0x5ec431(0x10e)])for(const _0x1ab171 of _0x26d00c['data']){const {responseStatus:_0x49cf1c,errors:_0x3e78e3}=_0x1ab171;if(_0x49cf1c!==status_enums_1['VeevaResponseStatus'][_0x5ec431(0x10e)])throw new veeva_error_1[(_0x5ec431(0x11f))](_0x3e78e3);}else throw new veeva_error_1[(_0x5ec431(0x11f))](_0x26d00c[_0x5ec431(0xfc)]);}}async[a379_0x35f242(0x126)](_0x563d04){const _0x4136c7=a379_0x35f242,_0x4f8c33=[];do{this[_0x4136c7(0x10f)]['log'](_0x4136c7(0x102)),await(0x0,utils_1[_0x4136c7(0x12f)])(VeevaService[_0x4136c7(0x125)]);const _0x23848c=[];for(const _0x18e6c2 of _0x563d04){const {data:_0x28026a}=await this['_connection'][_0x4136c7(0x12a)](_0x18e6c2);if(_0x28026a['responseStatus']===status_enums_1[_0x4136c7(0x128)][_0x4136c7(0x10e)]){const {data:_0x5a6d96}=_0x28026a;switch(_0x5a6d96[_0x4136c7(0x110)]){case status_enums_1['VeevaJobStatus'][_0x4136c7(0x10e)]:case status_enums_1['VeevaJobStatus'][_0x4136c7(0x111)]:_0x4f8c33[_0x4136c7(0x115)](_0x5a6d96);break;case status_enums_1[_0x4136c7(0x130)]['QUEUEING']:case status_enums_1[_0x4136c7(0x130)][_0x4136c7(0xff)]:case status_enums_1[_0x4136c7(0x130)][_0x4136c7(0x105)]:throw new Error(_0x4136c7(0xfa)+_0x5a6d96[_0x4136c7(0x110)]);case status_enums_1[_0x4136c7(0x130)][_0x4136c7(0x112)]:case status_enums_1[_0x4136c7(0x130)][_0x4136c7(0x10a)]:case status_enums_1[_0x4136c7(0x130)][_0x4136c7(0xf6)]:_0x23848c['push'](_0x18e6c2);break;default:throw new Error(_0x4136c7(0x11a)+_0x5a6d96[_0x4136c7(0x110)]+'\x27');}}else throw new veeva_error_1[(_0x4136c7(0x11f))](_0x28026a[_0x4136c7(0xfc)]);}_0x563d04=_0x23848c;}while(_0x563d04[_0x4136c7(0x127)]);return _0x4f8c33;}}exports['VeevaService']=VeevaService,VeevaService[a379_0x35f242(0x125)]=0x2710,VeevaService[a379_0x35f242(0x122)]=0x1f4,VeevaService[a379_0x35f242(0x12b)]=0x1f4;function a379_0x4988(){const _0x4d8ed1=['3051003kMVPNE','push','all','1213486xjtpUW','Creating\x20','data','Unknown\x20Job\x20status\x20:\x20\x27','12GvkfFo','1359PUpMCe','post','../classes/errors/veeva-error','VeevaError','\x20records.','8350stoMNs','CREATE_RECORDS_LIMIT','Deleting\x20','_connection','JOB_STATUS_TIMEOUT','getJobResult','length','VeevaResponseStatus','27884791OBUPUn','get','DELETE_RECORDS_LIMIT','\x20records','map','../constants/veeva.constants','sleep','VeevaJobStatus','application/json','__esModule','constructor','../../shared/utils','ENDPOINT_VQL','SCHEDULED','apply','flat','executeVQL','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','log','errors','VeevaConstants','3844528didDjA','CANCELLED','chunkArray','1kHbKFs','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','deleteVeevaObjectRecords','530985BkBkhQ','MISSED_SCHEDULE','7pIPdjj','responseStatus','(((.+)+)+)+$','executeManyVQL','RUNNING','3698592lxxegH','application/x-www-form-urlencoded','search','SUCCESS','_logger','status','ERRORS_ENCOUNTERED','QUEUED','VeevaService'];a379_0x4988=function(){return _0x4d8ed1;};return a379_0x4988();}