const a364_0x43e0c4=a364_0x1fe2;(function(_0x328880,_0x277299){const _0x54a6f9=a364_0x1fe2,_0x396930=_0x328880();while(!![]){try{const _0x4304eb=parseInt(_0x54a6f9(0x19a))/0x1+-parseInt(_0x54a6f9(0x171))/0x2*(-parseInt(_0x54a6f9(0x178))/0x3)+parseInt(_0x54a6f9(0x177))/0x4*(-parseInt(_0x54a6f9(0x16b))/0x5)+-parseInt(_0x54a6f9(0x164))/0x6*(-parseInt(_0x54a6f9(0x18e))/0x7)+-parseInt(_0x54a6f9(0x19b))/0x8+parseInt(_0x54a6f9(0x19d))/0x9+-parseInt(_0x54a6f9(0x198))/0xa;if(_0x4304eb===_0x277299)break;else _0x396930['push'](_0x396930['shift']());}catch(_0x4f2f06){_0x396930['push'](_0x396930['shift']());}}}(a364_0x3b1c,0xd4b89));const a364_0xe325b=(function(){let _0x5d8dae=!![];return function(_0x52b9be,_0x5501e1){const _0x219667=_0x5d8dae?function(){const _0x52fccb=a364_0x1fe2;if(_0x5501e1){const _0x20d0bf=_0x5501e1[_0x52fccb(0x18a)](_0x52b9be,arguments);return _0x5501e1=null,_0x20d0bf;}}:function(){};return _0x5d8dae=![],_0x219667;};}()),a364_0x227507=a364_0xe325b(this,function(){const _0x5049b4=a364_0x1fe2;return a364_0x227507['toString']()[_0x5049b4(0x16a)](_0x5049b4(0x16d))[_0x5049b4(0x18b)]()['constructor'](a364_0x227507)[_0x5049b4(0x16a)]('(((.+)+)+)+$');});a364_0x227507();'use strict';Object[a364_0x43e0c4(0x19f)](exports,'__esModule',{'value':!![]}),exports[a364_0x43e0c4(0x199)]=void 0x0;function a364_0x1fe2(_0x589f6e,_0x1080a0){const _0x179e52=a364_0x3b1c();return a364_0x1fe2=function(_0x227507,_0xe325b){_0x227507=_0x227507-0x164;let _0x3b1ca0=_0x179e52[_0x227507];return _0x3b1ca0;},a364_0x1fe2(_0x589f6e,_0x1080a0);}const utils_1=require('../../shared/utils'),status_enums_1=require(a364_0x43e0c4(0x190)),veeva_error_1=require(a364_0x43e0c4(0x193)),veeva_constants_1=require(a364_0x43e0c4(0x183));function a364_0x3b1c(){const _0x559bc3=['defineProperty','1405806qCifme','CREATE_RECORDS_LIMIT','VeevaJobStatus','_connection','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','VeevaConstants','search','5815885CbXfoy','status','(((.+)+)+)+$','log','MISSED_SCHEDULE','JOB_STATUS_TIMEOUT','3244hZuOyY','executeVQL','VeevaResponseStatus','get','push','CANCELLED','4nzixko','1473kfCLXr','VeevaError','RUNNING','_logger','responseStatus','SUCCESS','chunkArray','getJobResult','Unknown\x20Job\x20status\x20:\x20\x27','QUEUED','delete','../constants/veeva.constants','post','data','DELETE_RECORDS_LIMIT','\x20records','errors','Creating\x20','apply','toString','SCHEDULED','\x20records.','49pBidGo','deleteVeevaObjectRecords','../enums/status.enums','application/x-www-form-urlencoded','sleep','../classes/errors/veeva-error','application/json','all','length','ENDPOINT_VQL','4781930fpUEMY','VeevaService','691703UXXfKX','7601456aDdCmN','ERRORS_ENCOUNTERED','3011805GJtQAE','executeManyVQL'];a364_0x3b1c=function(){return _0x559bc3;};return a364_0x3b1c();}class VeevaService{constructor({connection:_0x7da3b8,logger:_0x5c821d}){const _0x285929=a364_0x43e0c4;this[_0x285929(0x167)]=_0x7da3b8,this[_0x285929(0x17b)]=_0x5c821d;}async[a364_0x43e0c4(0x19e)](_0x20e630){const _0x24ff38=a364_0x43e0c4,_0x2a9053=[];for(const _0x1b3d2b of _0x20e630){_0x2a9053['push'](this[_0x24ff38(0x172)](_0x1b3d2b));}const _0x2d2c77=await Promise[_0x24ff38(0x195)](_0x2a9053);return _0x2d2c77['flat']();}async[a364_0x43e0c4(0x172)](_0x5f5c31){const _0x275a16=a364_0x43e0c4,_0x30a6c1=[];let _0x2bed0c=this[_0x275a16(0x167)][_0x275a16(0x184)](veeva_constants_1[_0x275a16(0x169)][_0x275a16(0x197)],new URLSearchParams([['q',_0x5f5c31]]),{'headers':{'Content-Type':_0x275a16(0x191)}}),_0x1c2882=![];do{const _0x225f4e=await _0x2bed0c,_0x2a66da=_0x225f4e[_0x275a16(0x185)];if(_0x2a66da['responseStatus']!==status_enums_1['VeevaResponseStatus']['SUCCESS'])throw new veeva_error_1[(_0x275a16(0x179))](_0x2a66da[_0x275a16(0x188)]);const {responseDetails:{next_page:_0x2a6753},data:_0x4fd2be}=_0x2a66da;_0x2a6753?_0x2bed0c=this['_connection']['get'](_0x2a6753):_0x1c2882=!![],_0x30a6c1['push'](..._0x4fd2be);}while(!_0x1c2882);return _0x30a6c1;}async['createVeevaObjectRecords'](_0xcc3d39,_0x50296d){const _0x51b668=a364_0x43e0c4,_0x1309b1=[],_0x184fa9=(0x0,utils_1[_0x51b668(0x17e)])(_0x50296d,VeevaService[_0x51b668(0x165)]),_0x4b7632=_0x50296d[_0x51b668(0x196)];let _0x56c2b6=0x0;for(const _0x53746c of _0x184fa9){_0x56c2b6+=_0x53746c['length'],this[_0x51b668(0x17b)][_0x51b668(0x16e)](_0x51b668(0x189)+_0x56c2b6+'/'+_0x4b7632+_0x51b668(0x18d));const _0x545682=await this[_0x51b668(0x167)][_0x51b668(0x184)](_0xcc3d39,_0x53746c),_0x3546dc=_0x545682[_0x51b668(0x185)];if(_0x3546dc['responseStatus']===status_enums_1['VeevaResponseStatus']['SUCCESS'])for(const {responseStatus:_0x31627c,data:_0x1f151a}of _0x3546dc[_0x51b668(0x185)]){if(_0x31627c===status_enums_1[_0x51b668(0x173)][_0x51b668(0x17d)])_0x1309b1[_0x51b668(0x175)](_0x1f151a['id']);else throw new veeva_error_1[(_0x51b668(0x179))](_0x3546dc[_0x51b668(0x188)]);}else throw new veeva_error_1[(_0x51b668(0x179))](_0x3546dc[_0x51b668(0x188)]);}return _0x1309b1;}async[a364_0x43e0c4(0x18f)](_0x446347,_0x41f115){const _0x1ce41a=a364_0x43e0c4,_0x33bec3=_0x41f115['map'](_0x539a72=>({'id':_0x539a72})),_0x37604f=(0x0,utils_1[_0x1ce41a(0x17e)])(_0x33bec3,VeevaService[_0x1ce41a(0x186)]);let _0x3f8bf2=0x0;for(const _0x24049f of _0x37604f){_0x3f8bf2+=_0x24049f[_0x1ce41a(0x196)],this[_0x1ce41a(0x17b)][_0x1ce41a(0x16e)]('Deleting\x20'+_0x3f8bf2+'/'+_0x41f115['length']+_0x1ce41a(0x187));const {data:_0x1c7142}=await this[_0x1ce41a(0x167)][_0x1ce41a(0x182)](_0x446347,{'headers':{'Content-Type':_0x1ce41a(0x194)},'data':_0x24049f});if(_0x1c7142[_0x1ce41a(0x17c)]===status_enums_1[_0x1ce41a(0x173)][_0x1ce41a(0x17d)])for(const _0x3be2a2 of _0x1c7142[_0x1ce41a(0x185)]){const {responseStatus:_0x289442,errors:_0x3a28ba}=_0x3be2a2;if(_0x289442!==status_enums_1[_0x1ce41a(0x173)]['SUCCESS'])throw new veeva_error_1[(_0x1ce41a(0x179))](_0x3a28ba);}else throw new veeva_error_1[(_0x1ce41a(0x179))](_0x1c7142[_0x1ce41a(0x188)]);}}async[a364_0x43e0c4(0x17f)](_0x340e22){const _0x48d7e2=a364_0x43e0c4,_0x5a2b26=[];do{this[_0x48d7e2(0x17b)][_0x48d7e2(0x16e)](_0x48d7e2(0x168)),await(0x0,utils_1[_0x48d7e2(0x192)])(VeevaService[_0x48d7e2(0x170)]);const _0x39f47e=[];for(const _0x36bbe7 of _0x340e22){const {data:_0x371b3b}=await this[_0x48d7e2(0x167)][_0x48d7e2(0x174)](_0x36bbe7);if(_0x371b3b[_0x48d7e2(0x17c)]===status_enums_1[_0x48d7e2(0x173)]['SUCCESS']){const {data:_0x5a965e}=_0x371b3b;switch(_0x5a965e[_0x48d7e2(0x16c)]){case status_enums_1['VeevaJobStatus'][_0x48d7e2(0x17d)]:case status_enums_1[_0x48d7e2(0x166)][_0x48d7e2(0x19c)]:_0x5a2b26['push'](_0x5a965e);break;case status_enums_1[_0x48d7e2(0x166)]['QUEUEING']:case status_enums_1[_0x48d7e2(0x166)][_0x48d7e2(0x176)]:case status_enums_1['VeevaJobStatus'][_0x48d7e2(0x16f)]:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x5a965e[_0x48d7e2(0x16c)]);case status_enums_1['VeevaJobStatus'][_0x48d7e2(0x181)]:case status_enums_1[_0x48d7e2(0x166)][_0x48d7e2(0x17a)]:case status_enums_1[_0x48d7e2(0x166)][_0x48d7e2(0x18c)]:_0x39f47e[_0x48d7e2(0x175)](_0x36bbe7);break;default:throw new Error(_0x48d7e2(0x180)+_0x5a965e['status']+'\x27');}}else throw new veeva_error_1[(_0x48d7e2(0x179))](_0x371b3b[_0x48d7e2(0x188)]);}_0x340e22=_0x39f47e;}while(_0x340e22[_0x48d7e2(0x196)]);return _0x5a2b26;}}exports[a364_0x43e0c4(0x199)]=VeevaService,VeevaService['JOB_STATUS_TIMEOUT']=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService[a364_0x43e0c4(0x186)]=0x1f4;