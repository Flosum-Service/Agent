const a407_0x27fd9f=a407_0x4d4b;(function(_0x4217c0,_0x41f1d7){const _0x25678d=a407_0x4d4b,_0x31ba9d=_0x4217c0();while(!![]){try{const _0x5905e0=-parseInt(_0x25678d(0x111))/0x1*(-parseInt(_0x25678d(0x102))/0x2)+-parseInt(_0x25678d(0x105))/0x3+parseInt(_0x25678d(0x124))/0x4*(-parseInt(_0x25678d(0x118))/0x5)+-parseInt(_0x25678d(0x10b))/0x6+-parseInt(_0x25678d(0x10a))/0x7+parseInt(_0x25678d(0x123))/0x8*(parseInt(_0x25678d(0x133))/0x9)+parseInt(_0x25678d(0x128))/0xa;if(_0x5905e0===_0x41f1d7)break;else _0x31ba9d['push'](_0x31ba9d['shift']());}catch(_0x3a7923){_0x31ba9d['push'](_0x31ba9d['shift']());}}}(a407_0x161c,0x4e1a2));function a407_0x4d4b(_0x5ac2d9,_0x398bb0){const _0x24aee3=a407_0x161c();return a407_0x4d4b=function(_0x377e18,_0x559363){_0x377e18=_0x377e18-0xfe;let _0x161c81=_0x24aee3[_0x377e18];return _0x161c81;},a407_0x4d4b(_0x5ac2d9,_0x398bb0);}function a407_0x161c(){const _0x566e66=['2612832FWTuiZ','CREATE_RECORDS_LIMIT','DELETE_RECORDS_LIMIT','SCHEDULED','search','all','1129KPJvqy','../constants/veeva.constants','CANCELLED','errors','executeManyVQL','QUEUED','status','5ipFQzW','toString','VeevaJobStatus','_logger','map','__esModule','createVeevaObjectRecords','VeevaError','sleep','RUNNING','post','3670608fWpwgW','1710112CmPscH','executeVQL','../../shared/utils','SUCCESS','12542020rfdnCp','../classes/errors/veeva-error','_connection','application/x-www-form-urlencoded','VeevaService','length','ENDPOINT_VQL','data','chunkArray','ERRORS_ENCOUNTERED','MISSED_SCHEDULE','9hvEQuq','get','JOB_STATUS_TIMEOUT','Deleting\x20','log','push','\x20records.','defineProperty','340MTqVIE','VeevaResponseStatus','getJobResult','270255irtiIE','(((.+)+)+)+$','../enums/status.enums','responseStatus','delete','4423769iWJzFf'];a407_0x161c=function(){return _0x566e66;};return a407_0x161c();}const a407_0x559363=(function(){let _0x131c94=!![];return function(_0x1de98f,_0x16364a){const _0x1c2736=_0x131c94?function(){if(_0x16364a){const _0x4f69dc=_0x16364a['apply'](_0x1de98f,arguments);return _0x16364a=null,_0x4f69dc;}}:function(){};return _0x131c94=![],_0x1c2736;};}()),a407_0x377e18=a407_0x559363(this,function(){const _0x5bb7be=a407_0x4d4b;return a407_0x377e18[_0x5bb7be(0x119)]()[_0x5bb7be(0x10f)](_0x5bb7be(0x106))[_0x5bb7be(0x119)]()['constructor'](a407_0x377e18)[_0x5bb7be(0x10f)](_0x5bb7be(0x106));});a407_0x377e18();'use strict';Object[a407_0x27fd9f(0x101)](exports,a407_0x27fd9f(0x11d),{'value':!![]}),exports['VeevaService']=void 0x0;const utils_1=require(a407_0x27fd9f(0x126)),status_enums_1=require(a407_0x27fd9f(0x107)),veeva_error_1=require(a407_0x27fd9f(0x129)),veeva_constants_1=require(a407_0x27fd9f(0x112));class VeevaService{constructor({connection:_0x4abfb0,logger:_0x24f8b7}){const _0x27f5b9=a407_0x27fd9f;this[_0x27f5b9(0x12a)]=_0x4abfb0,this['_logger']=_0x24f8b7;}async[a407_0x27fd9f(0x115)](_0xe794a4){const _0x46ae5f=a407_0x27fd9f,_0x46f9d2=[];for(const _0x286dca of _0xe794a4){_0x46f9d2[_0x46ae5f(0xff)](this[_0x46ae5f(0x125)](_0x286dca));}const _0x331c3e=await Promise[_0x46ae5f(0x110)](_0x46f9d2);return _0x331c3e['flat']();}async['executeVQL'](_0x51fc08){const _0x462af1=a407_0x27fd9f,_0x53c3b9=[];let _0x3bdd00=this[_0x462af1(0x12a)][_0x462af1(0x122)](veeva_constants_1['VeevaConstants'][_0x462af1(0x12e)],new URLSearchParams([['q',_0x51fc08]]),{'headers':{'Content-Type':_0x462af1(0x12b)}}),_0x985a86=![];do{const _0x287989=await _0x3bdd00,_0xe4fc4e=_0x287989[_0x462af1(0x12f)];if(_0xe4fc4e[_0x462af1(0x108)]!==status_enums_1[_0x462af1(0x103)]['SUCCESS'])throw new veeva_error_1[(_0x462af1(0x11f))](_0xe4fc4e[_0x462af1(0x114)]);const {responseDetails:{next_page:_0xa029cc},data:_0x205b9b}=_0xe4fc4e;_0xa029cc?_0x3bdd00=this[_0x462af1(0x12a)][_0x462af1(0x134)](_0xa029cc):_0x985a86=!![],_0x53c3b9['push'](..._0x205b9b);}while(!_0x985a86);return _0x53c3b9;}async[a407_0x27fd9f(0x11e)](_0x5c0878,_0x16f8d2){const _0x3d1257=a407_0x27fd9f,_0x36dedd=[],_0x2d415f=(0x0,utils_1[_0x3d1257(0x130)])(_0x16f8d2,VeevaService[_0x3d1257(0x10c)]),_0x4bf6fb=_0x16f8d2[_0x3d1257(0x12d)];let _0x4b8186=0x0;for(const _0x361454 of _0x2d415f){_0x4b8186+=_0x361454[_0x3d1257(0x12d)],this[_0x3d1257(0x11b)][_0x3d1257(0xfe)]('Creating\x20'+_0x4b8186+'/'+_0x4bf6fb+_0x3d1257(0x100));const _0x1eb7e6=await this[_0x3d1257(0x12a)][_0x3d1257(0x122)](_0x5c0878,_0x361454),_0xa28c38=_0x1eb7e6[_0x3d1257(0x12f)];if(_0xa28c38[_0x3d1257(0x108)]===status_enums_1[_0x3d1257(0x103)][_0x3d1257(0x127)])for(const {responseStatus:_0x36d5c8,data:_0x11c10f}of _0xa28c38['data']){if(_0x36d5c8===status_enums_1[_0x3d1257(0x103)][_0x3d1257(0x127)])_0x36dedd[_0x3d1257(0xff)](_0x11c10f['id']);else throw new veeva_error_1['VeevaError'](_0xa28c38[_0x3d1257(0x114)]);}else throw new veeva_error_1[(_0x3d1257(0x11f))](_0xa28c38[_0x3d1257(0x114)]);}return _0x36dedd;}async['deleteVeevaObjectRecords'](_0x227798,_0x1574ca){const _0x2ecfd2=a407_0x27fd9f,_0x5e06e4=_0x1574ca[_0x2ecfd2(0x11c)](_0x3f2e1a=>({'id':_0x3f2e1a})),_0x1b300e=(0x0,utils_1[_0x2ecfd2(0x130)])(_0x5e06e4,VeevaService[_0x2ecfd2(0x10d)]);let _0x12baac=0x0;for(const _0x3ac227 of _0x1b300e){_0x12baac+=_0x3ac227[_0x2ecfd2(0x12d)],this['_logger'][_0x2ecfd2(0xfe)](_0x2ecfd2(0x136)+_0x12baac+'/'+_0x1574ca['length']+'\x20records');const {data:_0xada1d1}=await this[_0x2ecfd2(0x12a)][_0x2ecfd2(0x109)](_0x227798,{'headers':{'Content-Type':'application/json'},'data':_0x3ac227});if(_0xada1d1['responseStatus']===status_enums_1[_0x2ecfd2(0x103)][_0x2ecfd2(0x127)])for(const _0x1c6bb9 of _0xada1d1[_0x2ecfd2(0x12f)]){const {responseStatus:_0x3acc2a,errors:_0x345b4f}=_0x1c6bb9;if(_0x3acc2a!==status_enums_1[_0x2ecfd2(0x103)][_0x2ecfd2(0x127)])throw new veeva_error_1[(_0x2ecfd2(0x11f))](_0x345b4f);}else throw new veeva_error_1[(_0x2ecfd2(0x11f))](_0xada1d1[_0x2ecfd2(0x114)]);}}async[a407_0x27fd9f(0x104)](_0x127e33){const _0x2eef8f=a407_0x27fd9f,_0x1091ee=[];do{this[_0x2eef8f(0x11b)][_0x2eef8f(0xfe)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0x2eef8f(0x120)])(VeevaService[_0x2eef8f(0x135)]);const _0x2b47c=[];for(const _0x57ab88 of _0x127e33){const {data:_0x57a8d6}=await this[_0x2eef8f(0x12a)]['get'](_0x57ab88);if(_0x57a8d6[_0x2eef8f(0x108)]===status_enums_1['VeevaResponseStatus'][_0x2eef8f(0x127)]){const {data:_0x205610}=_0x57a8d6;switch(_0x205610['status']){case status_enums_1[_0x2eef8f(0x11a)][_0x2eef8f(0x127)]:case status_enums_1[_0x2eef8f(0x11a)][_0x2eef8f(0x131)]:_0x1091ee[_0x2eef8f(0xff)](_0x205610);break;case status_enums_1[_0x2eef8f(0x11a)]['QUEUEING']:case status_enums_1['VeevaJobStatus'][_0x2eef8f(0x113)]:case status_enums_1[_0x2eef8f(0x11a)][_0x2eef8f(0x132)]:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x205610['status']);case status_enums_1['VeevaJobStatus'][_0x2eef8f(0x116)]:case status_enums_1[_0x2eef8f(0x11a)][_0x2eef8f(0x121)]:case status_enums_1[_0x2eef8f(0x11a)][_0x2eef8f(0x10e)]:_0x2b47c[_0x2eef8f(0xff)](_0x57ab88);break;default:throw new Error('Unknown\x20Job\x20status\x20:\x20\x27'+_0x205610[_0x2eef8f(0x117)]+'\x27');}}else throw new veeva_error_1['VeevaError'](_0x57a8d6[_0x2eef8f(0x114)]);}_0x127e33=_0x2b47c;}while(_0x127e33[_0x2eef8f(0x12d)]);return _0x1091ee;}}exports[a407_0x27fd9f(0x12c)]=VeevaService,VeevaService[a407_0x27fd9f(0x135)]=0x2710,VeevaService[a407_0x27fd9f(0x10c)]=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;