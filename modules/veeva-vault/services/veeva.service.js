const a408_0x449879=a408_0x6a50;(function(_0x3eb795,_0x4de8a3){const _0x50f857=a408_0x6a50,_0x23ae8c=_0x3eb795();while(!![]){try{const _0x3f2a2d=-parseInt(_0x50f857(0x13f))/0x1+parseInt(_0x50f857(0x15d))/0x2*(parseInt(_0x50f857(0x157))/0x3)+-parseInt(_0x50f857(0x13e))/0x4+parseInt(_0x50f857(0x16c))/0x5+parseInt(_0x50f857(0x152))/0x6*(-parseInt(_0x50f857(0x165))/0x7)+-parseInt(_0x50f857(0x13a))/0x8*(parseInt(_0x50f857(0x15a))/0x9)+parseInt(_0x50f857(0x14b))/0xa;if(_0x3f2a2d===_0x4de8a3)break;else _0x23ae8c['push'](_0x23ae8c['shift']());}catch(_0xe3cce5){_0x23ae8c['push'](_0x23ae8c['shift']());}}}(a408_0x4653,0x47611));const a408_0x193ef4=(function(){let _0x5518e8=!![];return function(_0xf5044e,_0x59674f){const _0x444e70=_0x5518e8?function(){const _0x2d49e4=a408_0x6a50;if(_0x59674f){const _0xfddaf8=_0x59674f[_0x2d49e4(0x14f)](_0xf5044e,arguments);return _0x59674f=null,_0xfddaf8;}}:function(){};return _0x5518e8=![],_0x444e70;};}()),a408_0x16c8c5=a408_0x193ef4(this,function(){const _0x395021=a408_0x6a50;return a408_0x16c8c5[_0x395021(0x145)]()[_0x395021(0x170)](_0x395021(0x13c))[_0x395021(0x145)]()[_0x395021(0x13b)](a408_0x16c8c5)[_0x395021(0x170)](_0x395021(0x13c));});a408_0x16c8c5();'use strict';Object['defineProperty'](exports,a408_0x449879(0x168),{'value':!![]}),exports[a408_0x449879(0x169)]=void 0x0;const utils_1=require(a408_0x449879(0x160)),status_enums_1=require('../enums/status.enums'),veeva_error_1=require(a408_0x449879(0x15e)),veeva_constants_1=require(a408_0x449879(0x159));class VeevaService{constructor({connection:_0x2bd684,logger:_0x290c55}){const _0x45928c=a408_0x449879;this[_0x45928c(0x148)]=_0x2bd684,this[_0x45928c(0x151)]=_0x290c55;}async[a408_0x449879(0x163)](_0x458d07){const _0x33bbf9=a408_0x449879,_0x41c7cb=[];for(const _0x251a6f of _0x458d07){_0x41c7cb[_0x33bbf9(0x135)](this[_0x33bbf9(0x140)](_0x251a6f));}const _0x341389=await Promise['all'](_0x41c7cb);return _0x341389['flat']();}async[a408_0x449879(0x140)](_0x29997b){const _0x585260=a408_0x449879,_0x455034=[];let _0x3b82a9=this[_0x585260(0x148)][_0x585260(0x164)](veeva_constants_1[_0x585260(0x16d)][_0x585260(0x162)],new URLSearchParams([['q',_0x29997b]]),{'headers':{'Content-Type':_0x585260(0x144)}}),_0x419953=![];do{const _0x10fe1e=await _0x3b82a9,_0xa87f4=_0x10fe1e['data'];if(_0xa87f4[_0x585260(0x15b)]!==status_enums_1[_0x585260(0x167)]['SUCCESS'])throw new veeva_error_1[(_0x585260(0x15c))](_0xa87f4[_0x585260(0x166)]);const {responseDetails:{next_page:_0x59eea5},data:_0x40fe49}=_0xa87f4;_0x59eea5?_0x3b82a9=this[_0x585260(0x148)][_0x585260(0x14c)](_0x59eea5):_0x419953=!![],_0x455034['push'](..._0x40fe49);}while(!_0x419953);return _0x455034;}async[a408_0x449879(0x16a)](_0x48c84f,_0x2801f5){const _0x51f970=a408_0x449879,_0x455828=[],_0x426b36=(0x0,utils_1[_0x51f970(0x139)])(_0x2801f5,VeevaService['CREATE_RECORDS_LIMIT']),_0x2b9f36=_0x2801f5[_0x51f970(0x16e)];let _0x3dad8c=0x0;for(const _0x270912 of _0x426b36){_0x3dad8c+=_0x270912[_0x51f970(0x16e)],this['_logger']['log'](_0x51f970(0x142)+_0x3dad8c+'/'+_0x2b9f36+'\x20records.');const _0x446c00=await this[_0x51f970(0x148)][_0x51f970(0x164)](_0x48c84f,_0x270912),_0x2feae9=_0x446c00[_0x51f970(0x146)];if(_0x2feae9['responseStatus']===status_enums_1[_0x51f970(0x167)][_0x51f970(0x137)])for(const {responseStatus:_0x287bd5,data:_0x421cdc}of _0x2feae9[_0x51f970(0x146)]){if(_0x287bd5===status_enums_1[_0x51f970(0x167)][_0x51f970(0x137)])_0x455828[_0x51f970(0x135)](_0x421cdc['id']);else throw new veeva_error_1[(_0x51f970(0x15c))](_0x2feae9[_0x51f970(0x166)]);}else throw new veeva_error_1[(_0x51f970(0x15c))](_0x2feae9['errors']);}return _0x455828;}async[a408_0x449879(0x136)](_0x25d77c,_0x420b77){const _0x477ed4=a408_0x449879,_0x1b9708=_0x420b77[_0x477ed4(0x155)](_0x56397b=>({'id':_0x56397b})),_0x5dc5be=(0x0,utils_1[_0x477ed4(0x139)])(_0x1b9708,VeevaService[_0x477ed4(0x15f)]);let _0x3f06a9=0x0;for(const _0x70869e of _0x5dc5be){_0x3f06a9+=_0x70869e['length'],this['_logger'][_0x477ed4(0x156)](_0x477ed4(0x153)+_0x3f06a9+'/'+_0x420b77['length']+_0x477ed4(0x150));const {data:_0x368225}=await this[_0x477ed4(0x148)][_0x477ed4(0x154)](_0x25d77c,{'headers':{'Content-Type':_0x477ed4(0x14a)},'data':_0x70869e});if(_0x368225[_0x477ed4(0x15b)]===status_enums_1['VeevaResponseStatus']['SUCCESS'])for(const _0x4a9f70 of _0x368225[_0x477ed4(0x146)]){const {responseStatus:_0x2e8c41,errors:_0x201c02}=_0x4a9f70;if(_0x2e8c41!==status_enums_1[_0x477ed4(0x167)][_0x477ed4(0x137)])throw new veeva_error_1[(_0x477ed4(0x15c))](_0x201c02);}else throw new veeva_error_1[(_0x477ed4(0x15c))](_0x368225[_0x477ed4(0x166)]);}}async[a408_0x449879(0x149)](_0x15b196){const _0x2b8615=a408_0x449879,_0x47f3d3=[];do{this[_0x2b8615(0x151)][_0x2b8615(0x156)](_0x2b8615(0x16f)),await(0x0,utils_1[_0x2b8615(0x158)])(VeevaService['JOB_STATUS_TIMEOUT']);const _0x5352a4=[];for(const _0xdf8bb1 of _0x15b196){const {data:_0x5e1e00}=await this[_0x2b8615(0x148)][_0x2b8615(0x14c)](_0xdf8bb1);if(_0x5e1e00[_0x2b8615(0x15b)]===status_enums_1['VeevaResponseStatus'][_0x2b8615(0x137)]){const {data:_0x4468c7}=_0x5e1e00;switch(_0x4468c7[_0x2b8615(0x143)]){case status_enums_1[_0x2b8615(0x147)][_0x2b8615(0x137)]:case status_enums_1[_0x2b8615(0x147)][_0x2b8615(0x14d)]:_0x47f3d3[_0x2b8615(0x135)](_0x4468c7);break;case status_enums_1[_0x2b8615(0x147)][_0x2b8615(0x16b)]:case status_enums_1[_0x2b8615(0x147)][_0x2b8615(0x141)]:case status_enums_1[_0x2b8615(0x147)]['MISSED_SCHEDULE']:throw new Error(_0x2b8615(0x161)+_0x4468c7[_0x2b8615(0x143)]);case status_enums_1[_0x2b8615(0x147)]['QUEUED']:case status_enums_1[_0x2b8615(0x147)]['RUNNING']:case status_enums_1[_0x2b8615(0x147)][_0x2b8615(0x14e)]:_0x5352a4[_0x2b8615(0x135)](_0xdf8bb1);break;default:throw new Error(_0x2b8615(0x13d)+_0x4468c7[_0x2b8615(0x143)]+'\x27');}}else throw new veeva_error_1['VeevaError'](_0x5e1e00[_0x2b8615(0x166)]);}_0x15b196=_0x5352a4;}while(_0x15b196[_0x2b8615(0x16e)]);return _0x47f3d3;}}exports[a408_0x449879(0x169)]=VeevaService,VeevaService['JOB_STATUS_TIMEOUT']=0x2710,VeevaService[a408_0x449879(0x138)]=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;function a408_0x6a50(_0x386374,_0x3a5534){const _0x5b2c78=a408_0x4653();return a408_0x6a50=function(_0x16c8c5,_0x193ef4){_0x16c8c5=_0x16c8c5-0x135;let _0x465367=_0x5b2c78[_0x16c8c5];return _0x465367;},a408_0x6a50(_0x386374,_0x3a5534);}function a408_0x4653(){const _0x21b786=['deleteVeevaObjectRecords','SUCCESS','CREATE_RECORDS_LIMIT','chunkArray','671128WsatGU','constructor','(((.+)+)+)+$','Unknown\x20Job\x20status\x20:\x20\x27','2030376ijvFdy','576654mnkiiH','executeVQL','CANCELLED','Creating\x20','status','application/x-www-form-urlencoded','toString','data','VeevaJobStatus','_connection','getJobResult','application/json','13057800Necgeo','get','ERRORS_ENCOUNTERED','SCHEDULED','apply','\x20records','_logger','29364gQFJnx','Deleting\x20','delete','map','log','169290Tdepzj','sleep','../constants/veeva.constants','27DPCjQm','responseStatus','VeevaError','10EfEEDV','../classes/errors/veeva-error','DELETE_RECORDS_LIMIT','../../shared/utils','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','ENDPOINT_VQL','executeManyVQL','post','301NeXtSc','errors','VeevaResponseStatus','__esModule','VeevaService','createVeevaObjectRecords','QUEUEING','1254010UFMwFB','VeevaConstants','length','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','search','push'];a408_0x4653=function(){return _0x21b786;};return a408_0x4653();}