const a396_0x40dde5=a396_0xf0c2;(function(_0x1da3d8,_0x5e7eb5){const _0x2cb900=a396_0xf0c2,_0x3970c5=_0x1da3d8();while(!![]){try{const _0x539b61=parseInt(_0x2cb900(0x1d8))/0x1+parseInt(_0x2cb900(0x1d3))/0x2*(parseInt(_0x2cb900(0x1fd))/0x3)+parseInt(_0x2cb900(0x1e1))/0x4*(-parseInt(_0x2cb900(0x1e4))/0x5)+parseInt(_0x2cb900(0x1ee))/0x6*(parseInt(_0x2cb900(0x1e2))/0x7)+-parseInt(_0x2cb900(0x1f4))/0x8*(-parseInt(_0x2cb900(0x1fb))/0x9)+-parseInt(_0x2cb900(0x1ff))/0xa+-parseInt(_0x2cb900(0x1d2))/0xb;if(_0x539b61===_0x5e7eb5)break;else _0x3970c5['push'](_0x3970c5['shift']());}catch(_0x278af9){_0x3970c5['push'](_0x3970c5['shift']());}}}(a396_0xb757,0x3b87c));function a396_0xf0c2(_0x4cf429,_0x24277f){const _0x5d2dcd=a396_0xb757();return a396_0xf0c2=function(_0x3c2f85,_0x4343aa){_0x3c2f85=_0x3c2f85-0x1cd;let _0xb757f9=_0x5d2dcd[_0x3c2f85];return _0xb757f9;},a396_0xf0c2(_0x4cf429,_0x24277f);}const a396_0x4343aa=(function(){let _0x53b6f9=!![];return function(_0x22f84d,_0x17d5e6){const _0x42d386=_0x53b6f9?function(){const _0x40a027=a396_0xf0c2;if(_0x17d5e6){const _0x2cb531=_0x17d5e6[_0x40a027(0x1e9)](_0x22f84d,arguments);return _0x17d5e6=null,_0x2cb531;}}:function(){};return _0x53b6f9=![],_0x42d386;};}()),a396_0x3c2f85=a396_0x4343aa(this,function(){const _0x3e676f=a396_0xf0c2;return a396_0x3c2f85['toString']()[_0x3e676f(0x1da)]('(((.+)+)+)+$')['toString']()['constructor'](a396_0x3c2f85)[_0x3e676f(0x1da)]('(((.+)+)+)+$');});a396_0x3c2f85();'use strict';function a396_0xb757(){const _0x39d5f0=['201576EWiytr','CREATE_RECORDS_LIMIT','__esModule','deleteVeevaObjectRecords','length','RUNNING','../enums/status.enums','63MJVbST','createVeevaObjectRecords','12mmfXWA','_logger','1775210dpgMiR','sleep','responseStatus','status','executeManyVQL','Unknown\x20Job\x20status\x20:\x20\x27','JOB_STATUS_TIMEOUT','application/json','VeevaResponseStatus','3644036QvJVzF','235276MPMAYK','MISSED_SCHEDULE','../constants/veeva.constants','flat','VeevaConstants','123609QSkwMw','VeevaJobStatus','search','push','QUEUEING','getJobResult','log','application/x-www-form-urlencoded','data','14272LoYlUs','3997eJJlkC','SUCCESS','530TAFYcR','_connection','\x20records.','QUEUED','CANCELLED','apply','ERRORS_ENCOUNTERED','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','VeevaError','DELETE_RECORDS_LIMIT','3786exKvdP','executeVQL','chunkArray','errors','Creating\x20','../classes/errors/veeva-error'];a396_0xb757=function(){return _0x39d5f0;};return a396_0xb757();}Object['defineProperty'](exports,a396_0x40dde5(0x1f6),{'value':!![]}),exports['VeevaService']=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a396_0x40dde5(0x1fa)),veeva_error_1=require(a396_0x40dde5(0x1f3)),veeva_constants_1=require(a396_0x40dde5(0x1d5));class VeevaService{constructor({connection:_0x4eaffb,logger:_0x50fa1c}){const _0x1bcc1f=a396_0x40dde5;this['_connection']=_0x4eaffb,this[_0x1bcc1f(0x1fe)]=_0x50fa1c;}async[a396_0x40dde5(0x1cd)](_0x255906){const _0x5a907e=a396_0x40dde5,_0x58c39c=[];for(const _0x1f6c4 of _0x255906){_0x58c39c[_0x5a907e(0x1db)](this[_0x5a907e(0x1ef)](_0x1f6c4));}const _0x21629f=await Promise['all'](_0x58c39c);return _0x21629f[_0x5a907e(0x1d6)]();}async[a396_0x40dde5(0x1ef)](_0x50b795){const _0xafe5e1=a396_0x40dde5,_0x24ab66=[];let _0x59915f=this[_0xafe5e1(0x1e5)]['post'](veeva_constants_1[_0xafe5e1(0x1d7)]['ENDPOINT_VQL'],new URLSearchParams([['q',_0x50b795]]),{'headers':{'Content-Type':_0xafe5e1(0x1df)}}),_0x2c8b03=![];do{const _0x445269=await _0x59915f,_0x36ff91=_0x445269[_0xafe5e1(0x1e0)];if(_0x36ff91[_0xafe5e1(0x201)]!==status_enums_1[_0xafe5e1(0x1d1)][_0xafe5e1(0x1e3)])throw new veeva_error_1[(_0xafe5e1(0x1ec))](_0x36ff91[_0xafe5e1(0x1f1)]);const {responseDetails:{next_page:_0x9fef37},data:_0x124b09}=_0x36ff91;_0x9fef37?_0x59915f=this[_0xafe5e1(0x1e5)]['get'](_0x9fef37):_0x2c8b03=!![],_0x24ab66[_0xafe5e1(0x1db)](..._0x124b09);}while(!_0x2c8b03);return _0x24ab66;}async[a396_0x40dde5(0x1fc)](_0x252584,_0x94643f){const _0x27b0dd=a396_0x40dde5,_0x2140d7=[],_0x367132=(0x0,utils_1[_0x27b0dd(0x1f0)])(_0x94643f,VeevaService[_0x27b0dd(0x1f5)]),_0x4f4586=_0x94643f[_0x27b0dd(0x1f8)];let _0x454d09=0x0;for(const _0x22cfe8 of _0x367132){_0x454d09+=_0x22cfe8[_0x27b0dd(0x1f8)],this['_logger'][_0x27b0dd(0x1de)](_0x27b0dd(0x1f2)+_0x454d09+'/'+_0x4f4586+_0x27b0dd(0x1e6));const _0x2161fb=await this['_connection']['post'](_0x252584,_0x22cfe8),_0x21be5a=_0x2161fb['data'];if(_0x21be5a[_0x27b0dd(0x201)]===status_enums_1[_0x27b0dd(0x1d1)]['SUCCESS'])for(const {responseStatus:_0x51755d,data:_0xd25ea4}of _0x21be5a[_0x27b0dd(0x1e0)]){if(_0x51755d===status_enums_1[_0x27b0dd(0x1d1)][_0x27b0dd(0x1e3)])_0x2140d7[_0x27b0dd(0x1db)](_0xd25ea4['id']);else throw new veeva_error_1['VeevaError'](_0x21be5a['errors']);}else throw new veeva_error_1[(_0x27b0dd(0x1ec))](_0x21be5a['errors']);}return _0x2140d7;}async[a396_0x40dde5(0x1f7)](_0x515320,_0xa101bd){const _0xce9a8f=a396_0x40dde5,_0x364667=_0xa101bd['map'](_0x530bee=>({'id':_0x530bee})),_0x2489d3=(0x0,utils_1[_0xce9a8f(0x1f0)])(_0x364667,VeevaService[_0xce9a8f(0x1ed)]);let _0x4ba8c4=0x0;for(const _0x4bfba9 of _0x2489d3){_0x4ba8c4+=_0x4bfba9[_0xce9a8f(0x1f8)],this['_logger'][_0xce9a8f(0x1de)]('Deleting\x20'+_0x4ba8c4+'/'+_0xa101bd[_0xce9a8f(0x1f8)]+'\x20records');const {data:_0x35748e}=await this['_connection']['delete'](_0x515320,{'headers':{'Content-Type':_0xce9a8f(0x1d0)},'data':_0x4bfba9});if(_0x35748e[_0xce9a8f(0x201)]===status_enums_1['VeevaResponseStatus']['SUCCESS'])for(const _0x52fc82 of _0x35748e[_0xce9a8f(0x1e0)]){const {responseStatus:_0x4cd5b0,errors:_0xe187be}=_0x52fc82;if(_0x4cd5b0!==status_enums_1['VeevaResponseStatus'][_0xce9a8f(0x1e3)])throw new veeva_error_1[(_0xce9a8f(0x1ec))](_0xe187be);}else throw new veeva_error_1[(_0xce9a8f(0x1ec))](_0x35748e[_0xce9a8f(0x1f1)]);}}async[a396_0x40dde5(0x1dd)](_0x4fc902){const _0x92d842=a396_0x40dde5,_0x18e7ad=[];do{this[_0x92d842(0x1fe)][_0x92d842(0x1de)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0x92d842(0x200)])(VeevaService[_0x92d842(0x1cf)]);const _0x2e8826=[];for(const _0x5495b6 of _0x4fc902){const {data:_0x244d89}=await this[_0x92d842(0x1e5)]['get'](_0x5495b6);if(_0x244d89['responseStatus']===status_enums_1[_0x92d842(0x1d1)]['SUCCESS']){const {data:_0x26cc8c}=_0x244d89;switch(_0x26cc8c['status']){case status_enums_1['VeevaJobStatus'][_0x92d842(0x1e3)]:case status_enums_1['VeevaJobStatus'][_0x92d842(0x1ea)]:_0x18e7ad['push'](_0x26cc8c);break;case status_enums_1[_0x92d842(0x1d9)][_0x92d842(0x1dc)]:case status_enums_1[_0x92d842(0x1d9)][_0x92d842(0x1e8)]:case status_enums_1[_0x92d842(0x1d9)][_0x92d842(0x1d4)]:throw new Error(_0x92d842(0x1eb)+_0x26cc8c[_0x92d842(0x202)]);case status_enums_1[_0x92d842(0x1d9)][_0x92d842(0x1e7)]:case status_enums_1[_0x92d842(0x1d9)][_0x92d842(0x1f9)]:case status_enums_1[_0x92d842(0x1d9)]['SCHEDULED']:_0x2e8826['push'](_0x5495b6);break;default:throw new Error(_0x92d842(0x1ce)+_0x26cc8c[_0x92d842(0x202)]+'\x27');}}else throw new veeva_error_1[(_0x92d842(0x1ec))](_0x244d89[_0x92d842(0x1f1)]);}_0x4fc902=_0x2e8826;}while(_0x4fc902['length']);return _0x18e7ad;}}exports['VeevaService']=VeevaService,VeevaService[a396_0x40dde5(0x1cf)]=0x2710,VeevaService[a396_0x40dde5(0x1f5)]=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;