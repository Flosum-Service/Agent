const a395_0x48002b=a395_0x20b3;(function(_0x10299d,_0x478382){const _0x3c95ca=a395_0x20b3,_0x1a11f8=_0x10299d();while(!![]){try{const _0x1f87d3=-parseInt(_0x3c95ca(0x207))/0x1+parseInt(_0x3c95ca(0x1f0))/0x2+parseInt(_0x3c95ca(0x1e5))/0x3+-parseInt(_0x3c95ca(0x1d7))/0x4*(parseInt(_0x3c95ca(0x1d2))/0x5)+parseInt(_0x3c95ca(0x200))/0x6+-parseInt(_0x3c95ca(0x208))/0x7+parseInt(_0x3c95ca(0x1ed))/0x8*(parseInt(_0x3c95ca(0x1e6))/0x9);if(_0x1f87d3===_0x478382)break;else _0x1a11f8['push'](_0x1a11f8['shift']());}catch(_0x54f3bc){_0x1a11f8['push'](_0x1a11f8['shift']());}}}(a395_0x52b4,0x893b3));const a395_0x2405a9=(function(){let _0x30accc=!![];return function(_0x57773c,_0x1f5e4){const _0x25cc18=_0x30accc?function(){const _0x32e2de=a395_0x20b3;if(_0x1f5e4){const _0x6fff12=_0x1f5e4[_0x32e2de(0x1d6)](_0x57773c,arguments);return _0x1f5e4=null,_0x6fff12;}}:function(){};return _0x30accc=![],_0x25cc18;};}()),a395_0x3ac392=a395_0x2405a9(this,function(){const _0x249851=a395_0x20b3;return a395_0x3ac392[_0x249851(0x1fd)]()['search'](_0x249851(0x1f8))[_0x249851(0x1fd)]()[_0x249851(0x1da)](a395_0x3ac392)[_0x249851(0x1f3)](_0x249851(0x1f8));});a395_0x3ac392();'use strict';Object[a395_0x48002b(0x209)](exports,'__esModule',{'value':!![]}),exports[a395_0x48002b(0x1f9)]=void 0x0;const utils_1=require(a395_0x48002b(0x1e7)),status_enums_1=require(a395_0x48002b(0x203)),veeva_error_1=require('../classes/errors/veeva-error'),veeva_constants_1=require(a395_0x48002b(0x1f2));class VeevaService{constructor({connection:_0x76ba06,logger:_0x5d8d16}){const _0x59724d=a395_0x48002b;this['_connection']=_0x76ba06,this[_0x59724d(0x1d8)]=_0x5d8d16;}async[a395_0x48002b(0x1e9)](_0x28986e){const _0x5acea2=a395_0x48002b,_0x314710=[];for(const _0x4a082d of _0x28986e){_0x314710['push'](this['executeVQL'](_0x4a082d));}const _0x58a7e0=await Promise[_0x5acea2(0x1d3)](_0x314710);return _0x58a7e0['flat']();}async['executeVQL'](_0x53da83){const _0x102381=a395_0x48002b,_0x153f9b=[];let _0x735b4=this['_connection'][_0x102381(0x201)](veeva_constants_1['VeevaConstants']['ENDPOINT_VQL'],new URLSearchParams([['q',_0x53da83]]),{'headers':{'Content-Type':_0x102381(0x1f5)}}),_0x3e811d=![];do{const _0x469940=await _0x735b4,_0x5f1228=_0x469940['data'];if(_0x5f1228[_0x102381(0x1f4)]!==status_enums_1[_0x102381(0x1d4)]['SUCCESS'])throw new veeva_error_1[(_0x102381(0x1e0))](_0x5f1228['errors']);const {responseDetails:{next_page:_0x568c9b},data:_0x4d329c}=_0x5f1228;_0x568c9b?_0x735b4=this['_connection'][_0x102381(0x1ea)](_0x568c9b):_0x3e811d=!![],_0x153f9b[_0x102381(0x1e4)](..._0x4d329c);}while(!_0x3e811d);return _0x153f9b;}async[a395_0x48002b(0x205)](_0xee7f6b,_0x14c7d0){const _0x4dfdc6=a395_0x48002b,_0x460967=[],_0x4731e6=(0x0,utils_1['chunkArray'])(_0x14c7d0,VeevaService[_0x4dfdc6(0x1ef)]),_0x42ec66=_0x14c7d0[_0x4dfdc6(0x1d9)];let _0x44fcd4=0x0;for(const _0x2c5045 of _0x4731e6){_0x44fcd4+=_0x2c5045[_0x4dfdc6(0x1d9)],this['_logger'][_0x4dfdc6(0x1eb)]('Creating\x20'+_0x44fcd4+'/'+_0x42ec66+_0x4dfdc6(0x1ff));const _0x201080=await this[_0x4dfdc6(0x1dd)][_0x4dfdc6(0x201)](_0xee7f6b,_0x2c5045),_0x3c6420=_0x201080[_0x4dfdc6(0x1d1)];if(_0x3c6420[_0x4dfdc6(0x1f4)]===status_enums_1['VeevaResponseStatus'][_0x4dfdc6(0x1e2)])for(const {responseStatus:_0x56aa27,data:_0x556b25}of _0x3c6420[_0x4dfdc6(0x1d1)]){if(_0x56aa27===status_enums_1[_0x4dfdc6(0x1d4)][_0x4dfdc6(0x1e2)])_0x460967['push'](_0x556b25['id']);else throw new veeva_error_1[(_0x4dfdc6(0x1e0))](_0x3c6420[_0x4dfdc6(0x202)]);}else throw new veeva_error_1['VeevaError'](_0x3c6420['errors']);}return _0x460967;}async[a395_0x48002b(0x1f7)](_0x559cd9,_0x5a1984){const _0x5c950c=a395_0x48002b,_0x25ffb9=_0x5a1984['map'](_0x19a04f=>({'id':_0x19a04f})),_0x4a41a0=(0x0,utils_1[_0x5c950c(0x1fa)])(_0x25ffb9,VeevaService[_0x5c950c(0x1fb)]);let _0x111cea=0x0;for(const _0x488016 of _0x4a41a0){_0x111cea+=_0x488016[_0x5c950c(0x1d9)],this[_0x5c950c(0x1d8)][_0x5c950c(0x1eb)](_0x5c950c(0x1e3)+_0x111cea+'/'+_0x5a1984['length']+'\x20records');const {data:_0x4d23aa}=await this[_0x5c950c(0x1dd)]['delete'](_0x559cd9,{'headers':{'Content-Type':'application/json'},'data':_0x488016});if(_0x4d23aa['responseStatus']===status_enums_1[_0x5c950c(0x1d4)]['SUCCESS'])for(const _0x15e303 of _0x4d23aa[_0x5c950c(0x1d1)]){const {responseStatus:_0x224dd7,errors:_0x1cde83}=_0x15e303;if(_0x224dd7!==status_enums_1[_0x5c950c(0x1d4)]['SUCCESS'])throw new veeva_error_1[(_0x5c950c(0x1e0))](_0x1cde83);}else throw new veeva_error_1[(_0x5c950c(0x1e0))](_0x4d23aa['errors']);}}async[a395_0x48002b(0x1e8)](_0x2ec2ed){const _0x26024d=a395_0x48002b,_0x3f2864=[];do{this['_logger'][_0x26024d(0x1eb)](_0x26024d(0x1e1)),await(0x0,utils_1[_0x26024d(0x1fc)])(VeevaService[_0x26024d(0x1fe)]);const _0x48c315=[];for(const _0x1c6203 of _0x2ec2ed){const {data:_0x4e3607}=await this[_0x26024d(0x1dd)][_0x26024d(0x1ea)](_0x1c6203);if(_0x4e3607[_0x26024d(0x1f4)]===status_enums_1[_0x26024d(0x1d4)][_0x26024d(0x1e2)]){const {data:_0x439926}=_0x4e3607;switch(_0x439926[_0x26024d(0x1f1)]){case status_enums_1[_0x26024d(0x1db)][_0x26024d(0x1e2)]:case status_enums_1[_0x26024d(0x1db)][_0x26024d(0x1ee)]:_0x3f2864['push'](_0x439926);break;case status_enums_1[_0x26024d(0x1db)][_0x26024d(0x204)]:case status_enums_1['VeevaJobStatus'][_0x26024d(0x1ec)]:case status_enums_1[_0x26024d(0x1db)][_0x26024d(0x1de)]:throw new Error(_0x26024d(0x1d5)+_0x439926[_0x26024d(0x1f1)]);case status_enums_1[_0x26024d(0x1db)][_0x26024d(0x1df)]:case status_enums_1['VeevaJobStatus'][_0x26024d(0x1f6)]:case status_enums_1['VeevaJobStatus'][_0x26024d(0x1dc)]:_0x48c315[_0x26024d(0x1e4)](_0x1c6203);break;default:throw new Error(_0x26024d(0x206)+_0x439926[_0x26024d(0x1f1)]+'\x27');}}else throw new veeva_error_1[(_0x26024d(0x1e0))](_0x4e3607[_0x26024d(0x202)]);}_0x2ec2ed=_0x48c315;}while(_0x2ec2ed['length']);return _0x3f2864;}}exports[a395_0x48002b(0x1f9)]=VeevaService,VeevaService[a395_0x48002b(0x1fe)]=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService[a395_0x48002b(0x1fb)]=0x1f4;function a395_0x20b3(_0x4ddd90,_0x3a503f){const _0x306836=a395_0x52b4();return a395_0x20b3=function(_0x3ac392,_0x2405a9){_0x3ac392=_0x3ac392-0x1d1;let _0x52b454=_0x306836[_0x3ac392];return _0x52b454;},a395_0x20b3(_0x4ddd90,_0x3a503f);}function a395_0x52b4(){const _0x18aa2b=['\x20records.','6507414UyWPSC','post','errors','../enums/status.enums','QUEUEING','createVeevaObjectRecords','Unknown\x20Job\x20status\x20:\x20\x27','996616qjXuQA','5320861kLJzMz','defineProperty','data','135qILmyN','all','VeevaResponseStatus','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','apply','4152UdhXux','_logger','length','constructor','VeevaJobStatus','SCHEDULED','_connection','MISSED_SCHEDULE','QUEUED','VeevaError','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','SUCCESS','Deleting\x20','push','247551ypwCWF','9rzrbLW','../../shared/utils','getJobResult','executeManyVQL','get','log','CANCELLED','3724680hXlFWP','ERRORS_ENCOUNTERED','CREATE_RECORDS_LIMIT','1428386NYHsQc','status','../constants/veeva.constants','search','responseStatus','application/x-www-form-urlencoded','RUNNING','deleteVeevaObjectRecords','(((.+)+)+)+$','VeevaService','chunkArray','DELETE_RECORDS_LIMIT','sleep','toString','JOB_STATUS_TIMEOUT'];a395_0x52b4=function(){return _0x18aa2b;};return a395_0x52b4();}