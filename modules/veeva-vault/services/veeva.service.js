function a396_0x37d5(_0x4725aa,_0x18a17f){const _0x47cced=a396_0x5d39();return a396_0x37d5=function(_0x563453,_0x26f532){_0x563453=_0x563453-0x1ed;let _0x5d39d3=_0x47cced[_0x563453];return _0x5d39d3;},a396_0x37d5(_0x4725aa,_0x18a17f);}const a396_0x326f20=a396_0x37d5;(function(_0x1ae83b,_0x2ecfd9){const _0x1bb34a=a396_0x37d5,_0x3d0fd6=_0x1ae83b();while(!![]){try{const _0x29343b=parseInt(_0x1bb34a(0x208))/0x1*(-parseInt(_0x1bb34a(0x210))/0x2)+parseInt(_0x1bb34a(0x1f6))/0x3+parseInt(_0x1bb34a(0x222))/0x4*(parseInt(_0x1bb34a(0x21b))/0x5)+-parseInt(_0x1bb34a(0x20b))/0x6*(parseInt(_0x1bb34a(0x21c))/0x7)+-parseInt(_0x1bb34a(0x226))/0x8+parseInt(_0x1bb34a(0x219))/0x9*(-parseInt(_0x1bb34a(0x229))/0xa)+parseInt(_0x1bb34a(0x1f1))/0xb;if(_0x29343b===_0x2ecfd9)break;else _0x3d0fd6['push'](_0x3d0fd6['shift']());}catch(_0x32c14d){_0x3d0fd6['push'](_0x3d0fd6['shift']());}}}(a396_0x5d39,0xa9d84));const a396_0x26f532=(function(){let _0xfd72b4=!![];return function(_0xf9912d,_0x27665d){const _0x5a7e4c=_0xfd72b4?function(){if(_0x27665d){const _0x138737=_0x27665d['apply'](_0xf9912d,arguments);return _0x27665d=null,_0x138737;}}:function(){};return _0xfd72b4=![],_0x5a7e4c;};}()),a396_0x563453=a396_0x26f532(this,function(){const _0x185a08=a396_0x37d5;return a396_0x563453[_0x185a08(0x201)]()['search'](_0x185a08(0x202))[_0x185a08(0x201)]()[_0x185a08(0x212)](a396_0x563453)[_0x185a08(0x211)]('(((.+)+)+)+$');});a396_0x563453();'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a396_0x326f20(0x1fa)]=void 0x0;const utils_1=require(a396_0x326f20(0x1fc)),status_enums_1=require(a396_0x326f20(0x1ff)),veeva_error_1=require(a396_0x326f20(0x20a)),veeva_constants_1=require(a396_0x326f20(0x225));function a396_0x5d39(){const _0x5c8877=['map','application/json','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','executeManyVQL','\x20records','910011OjJAIN','ENDPOINT_VQL','../classes/errors/veeva-error','5691390aTORkt','MISSED_SCHEDULE','JOB_STATUS_TIMEOUT','push','createVeevaObjectRecords','2nmofhD','search','constructor','Deleting\x20','DELETE_RECORDS_LIMIT','log','post','executeVQL','Unknown\x20Job\x20status\x20:\x20\x27','3987mjHpjd','responseStatus','2680jREFFT','7RBDXOw','ERRORS_ENCOUNTERED','SCHEDULED','flat','status','RUNNING','3916BmOgVx','_logger','VeevaJobStatus','../constants/veeva.constants','4838416XMezii','VeevaResponseStatus','CANCELLED','5330HDLuRy','data','VeevaConstants','get','_connection','26836656ZPApLc','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','VeevaError','chunkArray','length','1292223gyEFgx','all','errors','sleep','VeevaService','QUEUED','../../shared/utils','Creating\x20','SUCCESS','../enums/status.enums','CREATE_RECORDS_LIMIT','toString','(((.+)+)+)+$'];a396_0x5d39=function(){return _0x5c8877;};return a396_0x5d39();}class VeevaService{constructor({connection:_0x1e5634,logger:_0x36656b}){const _0x1cb0fe=a396_0x326f20;this[_0x1cb0fe(0x1f0)]=_0x1e5634,this[_0x1cb0fe(0x223)]=_0x36656b;}async[a396_0x326f20(0x206)](_0x298010){const _0x59546a=a396_0x326f20,_0x2dbdc4=[];for(const _0x242d00 of _0x298010){_0x2dbdc4[_0x59546a(0x20e)](this[_0x59546a(0x217)](_0x242d00));}const _0x59eda1=await Promise[_0x59546a(0x1f7)](_0x2dbdc4);return _0x59eda1[_0x59546a(0x21f)]();}async[a396_0x326f20(0x217)](_0x1993fb){const _0xdd9e76=a396_0x326f20,_0x1605f8=[];let _0x5c925f=this['_connection'][_0xdd9e76(0x216)](veeva_constants_1[_0xdd9e76(0x1ee)][_0xdd9e76(0x209)],new URLSearchParams([['q',_0x1993fb]]),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}}),_0x1d8243=![];do{const _0x19ff96=await _0x5c925f,_0x4b305e=_0x19ff96[_0xdd9e76(0x1ed)];if(_0x4b305e[_0xdd9e76(0x21a)]!==status_enums_1['VeevaResponseStatus']['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x4b305e[_0xdd9e76(0x1f8)]);const {responseDetails:{next_page:_0x2d01c9},data:_0x341e24}=_0x4b305e;_0x2d01c9?_0x5c925f=this[_0xdd9e76(0x1f0)][_0xdd9e76(0x1ef)](_0x2d01c9):_0x1d8243=!![],_0x1605f8[_0xdd9e76(0x20e)](..._0x341e24);}while(!_0x1d8243);return _0x1605f8;}async[a396_0x326f20(0x20f)](_0xd63364,_0x4679df){const _0x342e3f=a396_0x326f20,_0x579ef2=[],_0x59b473=(0x0,utils_1['chunkArray'])(_0x4679df,VeevaService[_0x342e3f(0x200)]),_0x4e512c=_0x4679df[_0x342e3f(0x1f5)];let _0x408093=0x0;for(const _0x57b0f5 of _0x59b473){_0x408093+=_0x57b0f5['length'],this[_0x342e3f(0x223)]['log'](_0x342e3f(0x1fd)+_0x408093+'/'+_0x4e512c+'\x20records.');const _0xf4dc2d=await this['_connection'][_0x342e3f(0x216)](_0xd63364,_0x57b0f5),_0x52da6d=_0xf4dc2d[_0x342e3f(0x1ed)];if(_0x52da6d[_0x342e3f(0x21a)]===status_enums_1[_0x342e3f(0x227)][_0x342e3f(0x1fe)])for(const {responseStatus:_0x4c6ac4,data:_0x5bd067}of _0x52da6d['data']){if(_0x4c6ac4===status_enums_1['VeevaResponseStatus'][_0x342e3f(0x1fe)])_0x579ef2['push'](_0x5bd067['id']);else throw new veeva_error_1[(_0x342e3f(0x1f3))](_0x52da6d[_0x342e3f(0x1f8)]);}else throw new veeva_error_1['VeevaError'](_0x52da6d['errors']);}return _0x579ef2;}async['deleteVeevaObjectRecords'](_0x4a32b7,_0xe06e49){const _0x23d826=a396_0x326f20,_0x27585f=_0xe06e49[_0x23d826(0x203)](_0x3e9bf5=>({'id':_0x3e9bf5})),_0x3da8ca=(0x0,utils_1[_0x23d826(0x1f4)])(_0x27585f,VeevaService[_0x23d826(0x214)]);let _0x20d805=0x0;for(const _0x2b14a1 of _0x3da8ca){_0x20d805+=_0x2b14a1[_0x23d826(0x1f5)],this[_0x23d826(0x223)][_0x23d826(0x215)](_0x23d826(0x213)+_0x20d805+'/'+_0xe06e49['length']+_0x23d826(0x207));const {data:_0x55b9a6}=await this['_connection']['delete'](_0x4a32b7,{'headers':{'Content-Type':_0x23d826(0x204)},'data':_0x2b14a1});if(_0x55b9a6[_0x23d826(0x21a)]===status_enums_1[_0x23d826(0x227)][_0x23d826(0x1fe)])for(const _0x4f66a7 of _0x55b9a6[_0x23d826(0x1ed)]){const {responseStatus:_0x5f14af,errors:_0x4d1cd4}=_0x4f66a7;if(_0x5f14af!==status_enums_1[_0x23d826(0x227)][_0x23d826(0x1fe)])throw new veeva_error_1[(_0x23d826(0x1f3))](_0x4d1cd4);}else throw new veeva_error_1[(_0x23d826(0x1f3))](_0x55b9a6['errors']);}}async['getJobResult'](_0x23c8dd){const _0x36349d=a396_0x326f20,_0x3584c9=[];do{this[_0x36349d(0x223)][_0x36349d(0x215)](_0x36349d(0x1f2)),await(0x0,utils_1[_0x36349d(0x1f9)])(VeevaService[_0x36349d(0x20d)]);const _0x4b3220=[];for(const _0x481c95 of _0x23c8dd){const {data:_0x137444}=await this['_connection'][_0x36349d(0x1ef)](_0x481c95);if(_0x137444['responseStatus']===status_enums_1[_0x36349d(0x227)][_0x36349d(0x1fe)]){const {data:_0x2b1e94}=_0x137444;switch(_0x2b1e94[_0x36349d(0x220)]){case status_enums_1['VeevaJobStatus'][_0x36349d(0x1fe)]:case status_enums_1['VeevaJobStatus'][_0x36349d(0x21d)]:_0x3584c9[_0x36349d(0x20e)](_0x2b1e94);break;case status_enums_1['VeevaJobStatus']['QUEUEING']:case status_enums_1[_0x36349d(0x224)][_0x36349d(0x228)]:case status_enums_1[_0x36349d(0x224)][_0x36349d(0x20c)]:throw new Error(_0x36349d(0x205)+_0x2b1e94[_0x36349d(0x220)]);case status_enums_1[_0x36349d(0x224)][_0x36349d(0x1fb)]:case status_enums_1['VeevaJobStatus'][_0x36349d(0x221)]:case status_enums_1['VeevaJobStatus'][_0x36349d(0x21e)]:_0x4b3220[_0x36349d(0x20e)](_0x481c95);break;default:throw new Error(_0x36349d(0x218)+_0x2b1e94[_0x36349d(0x220)]+'\x27');}}else throw new veeva_error_1[(_0x36349d(0x1f3))](_0x137444[_0x36349d(0x1f8)]);}_0x23c8dd=_0x4b3220;}while(_0x23c8dd[_0x36349d(0x1f5)]);return _0x3584c9;}}exports[a396_0x326f20(0x1fa)]=VeevaService,VeevaService[a396_0x326f20(0x20d)]=0x2710,VeevaService[a396_0x326f20(0x200)]=0x1f4,VeevaService[a396_0x326f20(0x214)]=0x1f4;