function a380_0x3a71(_0x2f16d3,_0x4d94c8){const _0x52e3ff=a380_0x53ae();return a380_0x3a71=function(_0x1577bb,_0x35dbde){_0x1577bb=_0x1577bb-0x158;let _0x53aef3=_0x52e3ff[_0x1577bb];return _0x53aef3;},a380_0x3a71(_0x2f16d3,_0x4d94c8);}const a380_0x5955ca=a380_0x3a71;(function(_0x3b6c4f,_0x5289d5){const _0x139d09=a380_0x3a71,_0x46aa5d=_0x3b6c4f();while(!![]){try{const _0x5b3bbc=-parseInt(_0x139d09(0x177))/0x1+-parseInt(_0x139d09(0x17d))/0x2+-parseInt(_0x139d09(0x161))/0x3+-parseInt(_0x139d09(0x18b))/0x4+parseInt(_0x139d09(0x15b))/0x5+parseInt(_0x139d09(0x170))/0x6+parseInt(_0x139d09(0x16c))/0x7*(parseInt(_0x139d09(0x15a))/0x8);if(_0x5b3bbc===_0x5289d5)break;else _0x46aa5d['push'](_0x46aa5d['shift']());}catch(_0x3114aa){_0x46aa5d['push'](_0x46aa5d['shift']());}}}(a380_0x53ae,0xb7c8c));const a380_0x35dbde=(function(){let _0x535bd6=!![];return function(_0x3757e1,_0x453736){const _0x91ac67=_0x535bd6?function(){if(_0x453736){const _0x22b394=_0x453736['apply'](_0x3757e1,arguments);return _0x453736=null,_0x22b394;}}:function(){};return _0x535bd6=![],_0x91ac67;};}()),a380_0x1577bb=a380_0x35dbde(this,function(){const _0x12b17b=a380_0x3a71;return a380_0x1577bb[_0x12b17b(0x167)]()[_0x12b17b(0x18a)](_0x12b17b(0x188))['toString']()[_0x12b17b(0x17a)](a380_0x1577bb)['search'](_0x12b17b(0x188));});a380_0x1577bb();function a380_0x53ae(){const _0x5b3f86=['flat','SUCCESS','executeVQL','_logger','17743352SDMkrH','4272980sqAZJe','MISSED_SCHEDULE','data','defineProperty','CREATE_RECORDS_LIMIT','__esModule','4290219YhETcq','VeevaConstants','\x20records.','application/json','Creating\x20','createVeevaObjectRecords','toString','../classes/errors/veeva-error','../constants/veeva.constants','Unknown\x20Job\x20status\x20:\x20\x27','all','7JvIAMJ','get','errors','VeevaService','6206466luSXYx','log','responseStatus','executeManyVQL','JOB_STATUS_TIMEOUT','chunkArray','VeevaError','963076huyTMl','status','_connection','constructor','VeevaResponseStatus','DELETE_RECORDS_LIMIT','1086858mfxhSP','length','QUEUEING','../enums/status.enums','post','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','push','map','RUNNING','ERRORS_ENCOUNTERED','QUEUED','(((.+)+)+)+$','delete','search','1670272jCFsFQ','VeevaJobStatus','sleep','CANCELLED'];a380_0x53ae=function(){return _0x5b3f86;};return a380_0x53ae();}'use strict';Object[a380_0x5955ca(0x15e)](exports,a380_0x5955ca(0x160),{'value':!![]}),exports[a380_0x5955ca(0x16f)]=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a380_0x5955ca(0x180)),veeva_error_1=require(a380_0x5955ca(0x168)),veeva_constants_1=require(a380_0x5955ca(0x169));class VeevaService{constructor({connection:_0x20fbf8,logger:_0x1e1e08}){const _0x59e1b0=a380_0x5955ca;this[_0x59e1b0(0x179)]=_0x20fbf8,this['_logger']=_0x1e1e08;}async[a380_0x5955ca(0x173)](_0x2aab37){const _0x176bef=a380_0x5955ca,_0x5a5837=[];for(const _0x130e74 of _0x2aab37){_0x5a5837['push'](this[_0x176bef(0x158)](_0x130e74));}const _0x46d92e=await Promise[_0x176bef(0x16b)](_0x5a5837);return _0x46d92e[_0x176bef(0x18f)]();}async['executeVQL'](_0x1db2da){const _0x509dae=a380_0x5955ca,_0x5e54c9=[];let _0xa2d2fa=this[_0x509dae(0x179)]['post'](veeva_constants_1[_0x509dae(0x162)]['ENDPOINT_VQL'],new URLSearchParams([['q',_0x1db2da]]),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}}),_0x3b51de=![];do{const _0x244d4c=await _0xa2d2fa,_0x718f3=_0x244d4c[_0x509dae(0x15d)];if(_0x718f3[_0x509dae(0x172)]!==status_enums_1[_0x509dae(0x17b)][_0x509dae(0x190)])throw new veeva_error_1[(_0x509dae(0x176))](_0x718f3[_0x509dae(0x16e)]);const {responseDetails:{next_page:_0xe8ee2a},data:_0x249be8}=_0x718f3;_0xe8ee2a?_0xa2d2fa=this[_0x509dae(0x179)][_0x509dae(0x16d)](_0xe8ee2a):_0x3b51de=!![],_0x5e54c9[_0x509dae(0x183)](..._0x249be8);}while(!_0x3b51de);return _0x5e54c9;}async[a380_0x5955ca(0x166)](_0x2e79c7,_0x4ba34b){const _0x1ff6e7=a380_0x5955ca,_0x3aaf3c=[],_0x2e458f=(0x0,utils_1[_0x1ff6e7(0x175)])(_0x4ba34b,VeevaService[_0x1ff6e7(0x15f)]),_0x297e10=_0x4ba34b['length'];let _0x58b636=0x0;for(const _0x533a2a of _0x2e458f){_0x58b636+=_0x533a2a['length'],this[_0x1ff6e7(0x159)][_0x1ff6e7(0x171)](_0x1ff6e7(0x165)+_0x58b636+'/'+_0x297e10+_0x1ff6e7(0x163));const _0x321d1f=await this[_0x1ff6e7(0x179)][_0x1ff6e7(0x181)](_0x2e79c7,_0x533a2a),_0x288376=_0x321d1f['data'];if(_0x288376[_0x1ff6e7(0x172)]===status_enums_1[_0x1ff6e7(0x17b)]['SUCCESS'])for(const {responseStatus:_0x35b339,data:_0x1760f5}of _0x288376[_0x1ff6e7(0x15d)]){if(_0x35b339===status_enums_1[_0x1ff6e7(0x17b)][_0x1ff6e7(0x190)])_0x3aaf3c[_0x1ff6e7(0x183)](_0x1760f5['id']);else throw new veeva_error_1[(_0x1ff6e7(0x176))](_0x288376[_0x1ff6e7(0x16e)]);}else throw new veeva_error_1[(_0x1ff6e7(0x176))](_0x288376[_0x1ff6e7(0x16e)]);}return _0x3aaf3c;}async['deleteVeevaObjectRecords'](_0x32dc4b,_0x33de25){const _0x4b730f=a380_0x5955ca,_0x2ecff7=_0x33de25[_0x4b730f(0x184)](_0x5b9821=>({'id':_0x5b9821})),_0xf35ee2=(0x0,utils_1[_0x4b730f(0x175)])(_0x2ecff7,VeevaService['DELETE_RECORDS_LIMIT']);let _0x32e082=0x0;for(const _0x4bc4cc of _0xf35ee2){_0x32e082+=_0x4bc4cc[_0x4b730f(0x17e)],this['_logger']['log']('Deleting\x20'+_0x32e082+'/'+_0x33de25[_0x4b730f(0x17e)]+'\x20records');const {data:_0x2b2790}=await this[_0x4b730f(0x179)][_0x4b730f(0x189)](_0x32dc4b,{'headers':{'Content-Type':_0x4b730f(0x164)},'data':_0x4bc4cc});if(_0x2b2790[_0x4b730f(0x172)]===status_enums_1['VeevaResponseStatus']['SUCCESS'])for(const _0x26aa48 of _0x2b2790[_0x4b730f(0x15d)]){const {responseStatus:_0x4ef8f3,errors:_0x373cd2}=_0x26aa48;if(_0x4ef8f3!==status_enums_1[_0x4b730f(0x17b)]['SUCCESS'])throw new veeva_error_1[(_0x4b730f(0x176))](_0x373cd2);}else throw new veeva_error_1['VeevaError'](_0x2b2790[_0x4b730f(0x16e)]);}}async['getJobResult'](_0x4bc05e){const _0x1b4119=a380_0x5955ca,_0x4b28dd=[];do{this[_0x1b4119(0x159)][_0x1b4119(0x171)](_0x1b4119(0x182)),await(0x0,utils_1[_0x1b4119(0x18d)])(VeevaService[_0x1b4119(0x174)]);const _0x23248c=[];for(const _0x525c30 of _0x4bc05e){const {data:_0x57fc45}=await this['_connection'][_0x1b4119(0x16d)](_0x525c30);if(_0x57fc45[_0x1b4119(0x172)]===status_enums_1['VeevaResponseStatus'][_0x1b4119(0x190)]){const {data:_0x589b19}=_0x57fc45;switch(_0x589b19['status']){case status_enums_1[_0x1b4119(0x18c)][_0x1b4119(0x190)]:case status_enums_1['VeevaJobStatus'][_0x1b4119(0x186)]:_0x4b28dd[_0x1b4119(0x183)](_0x589b19);break;case status_enums_1[_0x1b4119(0x18c)][_0x1b4119(0x17f)]:case status_enums_1['VeevaJobStatus'][_0x1b4119(0x18e)]:case status_enums_1[_0x1b4119(0x18c)][_0x1b4119(0x15c)]:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x589b19[_0x1b4119(0x178)]);case status_enums_1[_0x1b4119(0x18c)][_0x1b4119(0x187)]:case status_enums_1[_0x1b4119(0x18c)][_0x1b4119(0x185)]:case status_enums_1[_0x1b4119(0x18c)]['SCHEDULED']:_0x23248c['push'](_0x525c30);break;default:throw new Error(_0x1b4119(0x16a)+_0x589b19[_0x1b4119(0x178)]+'\x27');}}else throw new veeva_error_1[(_0x1b4119(0x176))](_0x57fc45[_0x1b4119(0x16e)]);}_0x4bc05e=_0x23248c;}while(_0x4bc05e['length']);return _0x4b28dd;}}exports[a380_0x5955ca(0x16f)]=VeevaService,VeevaService['JOB_STATUS_TIMEOUT']=0x2710,VeevaService[a380_0x5955ca(0x15f)]=0x1f4,VeevaService[a380_0x5955ca(0x17c)]=0x1f4;