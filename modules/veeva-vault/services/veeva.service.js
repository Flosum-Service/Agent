const a364_0x3fd6bc=a364_0x1cc8;function a364_0x1cc8(_0x278f9c,_0x13e639){const _0x46aa40=a364_0x366b();return a364_0x1cc8=function(_0x29a143,_0x42ff71){_0x29a143=_0x29a143-0x166;let _0x366b00=_0x46aa40[_0x29a143];return _0x366b00;},a364_0x1cc8(_0x278f9c,_0x13e639);}(function(_0x6fbe8a,_0x8974ad){const _0x1fbd4f=a364_0x1cc8,_0x3c5956=_0x6fbe8a();while(!![]){try{const _0x549a2b=-parseInt(_0x1fbd4f(0x17f))/0x1+-parseInt(_0x1fbd4f(0x193))/0x2+-parseInt(_0x1fbd4f(0x171))/0x3+parseInt(_0x1fbd4f(0x196))/0x4+parseInt(_0x1fbd4f(0x173))/0x5*(parseInt(_0x1fbd4f(0x176))/0x6)+-parseInt(_0x1fbd4f(0x18c))/0x7+parseInt(_0x1fbd4f(0x18e))/0x8;if(_0x549a2b===_0x8974ad)break;else _0x3c5956['push'](_0x3c5956['shift']());}catch(_0x14772a){_0x3c5956['push'](_0x3c5956['shift']());}}}(a364_0x366b,0x862ae));function a364_0x366b(){const _0x423ef0=['../../shared/utils','chunkArray','VeevaJobStatus','constructor','1263162pWNjxt','application/json','5345Btiefe','log','executeVQL','2274tGrCBa','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','get','VeevaService','QUEUED','status','toString','_logger','defineProperty','783102ZMEWuA','push','responseStatus','CREATE_RECORDS_LIMIT','data','Creating\x20','RUNNING','(((.+)+)+)+$','executeManyVQL','DELETE_RECORDS_LIMIT','createVeevaObjectRecords','sleep','_connection','6819673FGQGAl','Deleting\x20','18764072kzDqwa','../enums/status.enums','VeevaError','apply','SUCCESS','1234130oducQw','delete','search','2377400KtHtTo','JOB_STATUS_TIMEOUT','VeevaResponseStatus','map','errors','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','length','SCHEDULED'];a364_0x366b=function(){return _0x423ef0;};return a364_0x366b();}const a364_0x42ff71=(function(){let _0x446241=!![];return function(_0x43b859,_0x499b90){const _0x453ce8=_0x446241?function(){const _0x595e6f=a364_0x1cc8;if(_0x499b90){const _0xbb4886=_0x499b90[_0x595e6f(0x191)](_0x43b859,arguments);return _0x499b90=null,_0xbb4886;}}:function(){};return _0x446241=![],_0x453ce8;};}()),a364_0x29a143=a364_0x42ff71(this,function(){const _0x6c6fe0=a364_0x1cc8;return a364_0x29a143[_0x6c6fe0(0x17c)]()[_0x6c6fe0(0x195)]('(((.+)+)+)+$')['toString']()[_0x6c6fe0(0x170)](a364_0x29a143)[_0x6c6fe0(0x195)](_0x6c6fe0(0x186));});a364_0x29a143();'use strict';Object[a364_0x3fd6bc(0x17e)](exports,'__esModule',{'value':!![]}),exports[a364_0x3fd6bc(0x179)]=void 0x0;const utils_1=require(a364_0x3fd6bc(0x16d)),status_enums_1=require(a364_0x3fd6bc(0x18f)),veeva_error_1=require('../classes/errors/veeva-error');class VeevaService{constructor({connection:_0x11e715,logger:_0x319791}){const _0x1c12e8=a364_0x3fd6bc;this[_0x1c12e8(0x18b)]=_0x11e715,this[_0x1c12e8(0x17d)]=_0x319791;}async[a364_0x3fd6bc(0x187)](_0x261e85){const _0x3bc2ee=a364_0x3fd6bc,_0x4f4358=[];for(const _0x6f3851 of _0x261e85){_0x4f4358[_0x3bc2ee(0x180)](this[_0x3bc2ee(0x175)](_0x6f3851));}const _0x14e59c=await Promise['all'](_0x4f4358);return _0x14e59c['flat']();}async[a364_0x3fd6bc(0x175)](_0x3447a6){const _0x2636f9=a364_0x3fd6bc,_0x57d4e6=[];do{const _0x19f1a0=await this['_connection'][_0x2636f9(0x178)](_0x3447a6),_0x3d1488=_0x19f1a0[_0x2636f9(0x183)];if(_0x3d1488[_0x2636f9(0x181)]===status_enums_1[_0x2636f9(0x167)][_0x2636f9(0x192)]){const {responseDetails:{next_page:_0x3b6f55},data:_0x5eba16}=_0x3d1488;_0x3447a6=_0x3b6f55||null,_0x57d4e6['push'](..._0x5eba16);}else throw new veeva_error_1['VeevaError'](_0x3d1488[_0x2636f9(0x169)]);}while(_0x3447a6);return _0x57d4e6;}async[a364_0x3fd6bc(0x189)](_0x1f5dd6,_0x3fea42){const _0x25a57e=a364_0x3fd6bc,_0x2872d6=[],_0x2e0974=(0x0,utils_1[_0x25a57e(0x16e)])(_0x3fea42,VeevaService[_0x25a57e(0x182)]),_0x23a79a=_0x3fea42[_0x25a57e(0x16b)];let _0x49f19e=0x0;for(const _0x2059d5 of _0x2e0974){_0x49f19e+=_0x2059d5[_0x25a57e(0x16b)],this[_0x25a57e(0x17d)][_0x25a57e(0x174)](_0x25a57e(0x184)+_0x49f19e+'/'+_0x23a79a+'\x20records.');const _0x26e0ef=await this[_0x25a57e(0x18b)]['post'](_0x1f5dd6,_0x2059d5),_0x3fd3ac=_0x26e0ef['data'];if(_0x3fd3ac[_0x25a57e(0x181)]===status_enums_1[_0x25a57e(0x167)][_0x25a57e(0x192)])for(const {responseStatus:_0x36757a,data:_0x46c618}of _0x3fd3ac[_0x25a57e(0x183)]){if(_0x36757a===status_enums_1[_0x25a57e(0x167)][_0x25a57e(0x192)])_0x2872d6['push'](_0x46c618['id']);else throw new veeva_error_1[(_0x25a57e(0x190))](_0x3fd3ac['errors']);}else throw new veeva_error_1['VeevaError'](_0x3fd3ac[_0x25a57e(0x169)]);}return _0x2872d6;}async['deleteVeevaObjectRecords'](_0xeb3836,_0x102483){const _0x339ceb=a364_0x3fd6bc,_0x9c1dca=_0x102483[_0x339ceb(0x168)](_0x32b40c=>({'id':_0x32b40c})),_0x4a92cb=(0x0,utils_1[_0x339ceb(0x16e)])(_0x9c1dca,VeevaService[_0x339ceb(0x188)]);let _0x255fe0=0x0;for(const _0x4efe9e of _0x4a92cb){_0x255fe0+=_0x4efe9e[_0x339ceb(0x16b)],this[_0x339ceb(0x17d)][_0x339ceb(0x174)](_0x339ceb(0x18d)+_0x255fe0+'/'+_0x102483[_0x339ceb(0x16b)]+'\x20records');const {data:_0x39ab8a}=await this['_connection'][_0x339ceb(0x194)](_0xeb3836,{'headers':{'Content-Type':_0x339ceb(0x172)},'data':_0x4efe9e});if(_0x39ab8a[_0x339ceb(0x181)]===status_enums_1[_0x339ceb(0x167)][_0x339ceb(0x192)])for(const _0x3fee7a of _0x39ab8a[_0x339ceb(0x183)]){const {responseStatus:_0x1cb863,errors:_0x1f0f2b}=_0x3fee7a;if(_0x1cb863!==status_enums_1['VeevaResponseStatus'][_0x339ceb(0x192)])throw new veeva_error_1[(_0x339ceb(0x190))](_0x1f0f2b);}else throw new veeva_error_1[(_0x339ceb(0x190))](_0x39ab8a['errors']);}}async['getJobResult'](_0x36fa32){const _0x189eba=a364_0x3fd6bc,_0x34a0b4=[];do{this[_0x189eba(0x17d)][_0x189eba(0x174)](_0x189eba(0x177)),await(0x0,utils_1[_0x189eba(0x18a)])(VeevaService[_0x189eba(0x166)]);const _0x5ddddf=[];for(const _0xce457f of _0x36fa32){const {data:_0x286616}=await this[_0x189eba(0x18b)][_0x189eba(0x178)](_0xce457f);if(_0x286616[_0x189eba(0x181)]===status_enums_1[_0x189eba(0x167)][_0x189eba(0x192)]){const {data:_0x280184}=_0x286616;switch(_0x280184[_0x189eba(0x17b)]){case status_enums_1[_0x189eba(0x16f)][_0x189eba(0x192)]:case status_enums_1[_0x189eba(0x16f)]['ERRORS_ENCOUNTERED']:_0x34a0b4[_0x189eba(0x180)](_0x280184);break;case status_enums_1[_0x189eba(0x16f)]['QUEUEING']:case status_enums_1[_0x189eba(0x16f)]['CANCELLED']:case status_enums_1[_0x189eba(0x16f)]['MISSED_SCHEDULE']:throw new Error(_0x189eba(0x16a)+_0x280184[_0x189eba(0x17b)]);case status_enums_1[_0x189eba(0x16f)][_0x189eba(0x17a)]:case status_enums_1['VeevaJobStatus'][_0x189eba(0x185)]:case status_enums_1['VeevaJobStatus'][_0x189eba(0x16c)]:_0x5ddddf['push'](_0xce457f);break;default:throw new Error('Unknown\x20Job\x20status\x20:\x20\x27'+_0x280184[_0x189eba(0x17b)]+'\x27');}}else throw new veeva_error_1[(_0x189eba(0x190))](_0x286616['errors']);}_0x36fa32=_0x5ddddf;}while(_0x36fa32['length']);return _0x34a0b4;}}exports[a364_0x3fd6bc(0x179)]=VeevaService,VeevaService[a364_0x3fd6bc(0x166)]=0x2710,VeevaService[a364_0x3fd6bc(0x182)]=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;