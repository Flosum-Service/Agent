const a363_0x1e9b28=a363_0x2d05;(function(_0x21bba4,_0x3cd03d){const _0x4a1004=a363_0x2d05,_0x2a6262=_0x21bba4();while(!![]){try{const _0x973a2e=parseInt(_0x4a1004(0xff))/0x1*(-parseInt(_0x4a1004(0x119))/0x2)+-parseInt(_0x4a1004(0x105))/0x3+parseInt(_0x4a1004(0x101))/0x4+parseInt(_0x4a1004(0xf3))/0x5+parseInt(_0x4a1004(0x11a))/0x6+parseInt(_0x4a1004(0xf9))/0x7*(-parseInt(_0x4a1004(0xf6))/0x8)+parseInt(_0x4a1004(0xf8))/0x9*(-parseInt(_0x4a1004(0xe5))/0xa);if(_0x973a2e===_0x3cd03d)break;else _0x2a6262['push'](_0x2a6262['shift']());}catch(_0x4bf5f3){_0x2a6262['push'](_0x2a6262['shift']());}}}(a363_0xf3d5,0x75131));const a363_0x3239f9=(function(){let _0x133723=!![];return function(_0x5a9c0f,_0x48cf5a){const _0x558c84=_0x133723?function(){if(_0x48cf5a){const _0x1a6efb=_0x48cf5a['apply'](_0x5a9c0f,arguments);return _0x48cf5a=null,_0x1a6efb;}}:function(){};return _0x133723=![],_0x558c84;};}()),a363_0x3a8b53=a363_0x3239f9(this,function(){const _0xabc523=a363_0x2d05;return a363_0x3a8b53['toString']()[_0xabc523(0xf4)]('(((.+)+)+)+$')['toString']()[_0xabc523(0x10d)](a363_0x3a8b53)['search'](_0xabc523(0xf2));});function a363_0xf3d5(){const _0xcf50ca=['_logger','constructor','_connection','SCHEDULED','application/json','VeevaResponseStatus','deleteVeevaObjectRecords','CREATE_RECORDS_LIMIT','QUEUED','VeevaJobStatus','defineProperty','RUNNING','MISSED_SCHEDULE','67708kVlweb','2536590DvCwfV','DELETE_RECORDS_LIMIT','JOB_STATUS_TIMEOUT','250Cojowe','length','CANCELLED','get','errors','SUCCESS','sleep','Creating\x20','VeevaService','log','__esModule','executeManyVQL','data','(((.+)+)+)+$','2866495eWtwBC','search','status','16JSgmiR','Unknown\x20Job\x20status\x20:\x20\x27','269055XPcIFh','1665090OjeQCR','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','map','../classes/errors/veeva-error','\x20records','QUEUEING','1rRaxmS','../enums/status.enums','3442872KSPpnE','push','executeVQL','ERRORS_ENCOUNTERED','360828NBquoZ','VeevaError','all','\x20records.','responseStatus','chunkArray','flat'];a363_0xf3d5=function(){return _0xcf50ca;};return a363_0xf3d5();}a363_0x3a8b53();function a363_0x2d05(_0x59e3c9,_0x323d5c){const _0x51e4b9=a363_0xf3d5();return a363_0x2d05=function(_0x3a8b53,_0x3239f9){_0x3a8b53=_0x3a8b53-0xe3;let _0xf3d5cf=_0x51e4b9[_0x3a8b53];return _0xf3d5cf;},a363_0x2d05(_0x59e3c9,_0x323d5c);}'use strict';Object[a363_0x1e9b28(0x116)](exports,a363_0x1e9b28(0xef),{'value':!![]}),exports['VeevaService']=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a363_0x1e9b28(0x100)),veeva_error_1=require(a363_0x1e9b28(0xfc));class VeevaService{constructor({connection:_0xfa3d35,logger:_0x120d44}){const _0x1afef9=a363_0x1e9b28;this[_0x1afef9(0x10e)]=_0xfa3d35,this[_0x1afef9(0x10c)]=_0x120d44;}async[a363_0x1e9b28(0xf0)](_0x53d730){const _0x443686=a363_0x1e9b28,_0x10d265=[];for(const _0x1a0556 of _0x53d730){_0x10d265[_0x443686(0x102)](this['executeVQL'](_0x1a0556));}const _0x144cec=await Promise[_0x443686(0x107)](_0x10d265);return _0x144cec[_0x443686(0x10b)]();}async[a363_0x1e9b28(0x103)](_0x4c50ac){const _0x3d9890=a363_0x1e9b28,_0x3e4213=[];do{const _0x4b8519=await this['_connection'][_0x3d9890(0xe8)](_0x4c50ac),_0x470799=_0x4b8519[_0x3d9890(0xf1)];if(_0x470799[_0x3d9890(0x109)]===status_enums_1[_0x3d9890(0x111)][_0x3d9890(0xea)]){const {responseDetails:{next_page:_0x489d09},data:_0x2b74cd}=_0x470799;_0x4c50ac=_0x489d09||null,_0x3e4213['push'](..._0x2b74cd);}else throw new veeva_error_1[(_0x3d9890(0x106))](_0x470799['errors']);}while(_0x4c50ac);return _0x3e4213;}async['createVeevaObjectRecords'](_0x1b623e,_0x1fd7ca){const _0x3833f0=a363_0x1e9b28,_0x109576=[],_0x1d3cd4=(0x0,utils_1[_0x3833f0(0x10a)])(_0x1fd7ca,VeevaService['CREATE_RECORDS_LIMIT']),_0x4e4ef2=_0x1fd7ca[_0x3833f0(0xe6)];let _0x25fb59=0x0;for(const _0x4496e6 of _0x1d3cd4){_0x25fb59+=_0x4496e6['length'],this[_0x3833f0(0x10c)][_0x3833f0(0xee)](_0x3833f0(0xec)+_0x25fb59+'/'+_0x4e4ef2+_0x3833f0(0x108));const _0x1f5a7d=await this[_0x3833f0(0x10e)]['post'](_0x1b623e,_0x4496e6),_0x5de19f=_0x1f5a7d[_0x3833f0(0xf1)];if(_0x5de19f[_0x3833f0(0x109)]===status_enums_1[_0x3833f0(0x111)][_0x3833f0(0xea)])for(const {responseStatus:_0x1a3bb7,data:_0x18059f}of _0x5de19f[_0x3833f0(0xf1)]){if(_0x1a3bb7===status_enums_1[_0x3833f0(0x111)]['SUCCESS'])_0x109576[_0x3833f0(0x102)](_0x18059f['id']);else throw new veeva_error_1[(_0x3833f0(0x106))](_0x5de19f[_0x3833f0(0xe9)]);}else throw new veeva_error_1[(_0x3833f0(0x106))](_0x5de19f[_0x3833f0(0xe9)]);}return _0x109576;}async[a363_0x1e9b28(0x112)](_0x3d5e37,_0x3db44f){const _0xb0ceaf=a363_0x1e9b28,_0x449dd4=_0x3db44f[_0xb0ceaf(0xfb)](_0x3700ac=>({'id':_0x3700ac})),_0x182c8c=(0x0,utils_1[_0xb0ceaf(0x10a)])(_0x449dd4,VeevaService[_0xb0ceaf(0xe3)]);let _0x2d2371=0x0;for(const _0x1bbac7 of _0x182c8c){_0x2d2371+=_0x1bbac7[_0xb0ceaf(0xe6)],this[_0xb0ceaf(0x10c)][_0xb0ceaf(0xee)]('Deleting\x20'+_0x2d2371+'/'+_0x3db44f['length']+_0xb0ceaf(0xfd));const {data:_0x56597e}=await this[_0xb0ceaf(0x10e)]['delete'](_0x3d5e37,{'headers':{'Content-Type':_0xb0ceaf(0x110)},'data':_0x1bbac7});if(_0x56597e[_0xb0ceaf(0x109)]===status_enums_1[_0xb0ceaf(0x111)][_0xb0ceaf(0xea)])for(const _0x354561 of _0x56597e[_0xb0ceaf(0xf1)]){const {responseStatus:_0x47f970,errors:_0x347676}=_0x354561;if(_0x47f970!==status_enums_1['VeevaResponseStatus']['SUCCESS'])throw new veeva_error_1[(_0xb0ceaf(0x106))](_0x347676);}else throw new veeva_error_1['VeevaError'](_0x56597e[_0xb0ceaf(0xe9)]);}}async['getJobResult'](_0x5e9bfa){const _0x14d333=a363_0x1e9b28,_0x1217e7=[];do{this[_0x14d333(0x10c)][_0x14d333(0xee)](_0x14d333(0xfa)),await(0x0,utils_1[_0x14d333(0xeb)])(VeevaService[_0x14d333(0xe4)]);const _0x4ed1b8=[];for(const _0x48f8d0 of _0x5e9bfa){const {data:_0x35b27e}=await this[_0x14d333(0x10e)]['get'](_0x48f8d0);if(_0x35b27e[_0x14d333(0x109)]===status_enums_1[_0x14d333(0x111)][_0x14d333(0xea)]){const {data:_0x5e7351}=_0x35b27e;switch(_0x5e7351[_0x14d333(0xf5)]){case status_enums_1[_0x14d333(0x115)][_0x14d333(0xea)]:case status_enums_1['VeevaJobStatus'][_0x14d333(0x104)]:_0x1217e7['push'](_0x5e7351);break;case status_enums_1['VeevaJobStatus'][_0x14d333(0xfe)]:case status_enums_1[_0x14d333(0x115)][_0x14d333(0xe7)]:case status_enums_1['VeevaJobStatus'][_0x14d333(0x118)]:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x5e7351['status']);case status_enums_1[_0x14d333(0x115)][_0x14d333(0x114)]:case status_enums_1['VeevaJobStatus'][_0x14d333(0x117)]:case status_enums_1[_0x14d333(0x115)][_0x14d333(0x10f)]:_0x4ed1b8[_0x14d333(0x102)](_0x48f8d0);break;default:throw new Error(_0x14d333(0xf7)+_0x5e7351[_0x14d333(0xf5)]+'\x27');}}else throw new veeva_error_1[(_0x14d333(0x106))](_0x35b27e[_0x14d333(0xe9)]);}_0x5e9bfa=_0x4ed1b8;}while(_0x5e9bfa['length']);return _0x1217e7;}}exports[a363_0x1e9b28(0xed)]=VeevaService,VeevaService['JOB_STATUS_TIMEOUT']=0x2710,VeevaService[a363_0x1e9b28(0x113)]=0x1f4,VeevaService[a363_0x1e9b28(0xe3)]=0x1f4;