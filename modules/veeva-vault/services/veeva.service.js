const a363_0x5a4982=a363_0xd02a;(function(_0x4c9b74,_0x79bee9){const _0x223553=a363_0xd02a,_0x559399=_0x4c9b74();while(!![]){try{const _0x5a2039=-parseInt(_0x223553(0x19c))/0x1+-parseInt(_0x223553(0x1c0))/0x2*(-parseInt(_0x223553(0x1c4))/0x3)+parseInt(_0x223553(0x1cc))/0x4+-parseInt(_0x223553(0x1b4))/0x5*(parseInt(_0x223553(0x1cf))/0x6)+parseInt(_0x223553(0x1b3))/0x7*(-parseInt(_0x223553(0x1a0))/0x8)+-parseInt(_0x223553(0x1b8))/0x9+-parseInt(_0x223553(0x1b6))/0xa*(-parseInt(_0x223553(0x1c1))/0xb);if(_0x5a2039===_0x79bee9)break;else _0x559399['push'](_0x559399['shift']());}catch(_0x41889b){_0x559399['push'](_0x559399['shift']());}}}(a363_0x366c,0xf26a1));function a363_0xd02a(_0x8a1c34,_0x214808){const _0x33cfe6=a363_0x366c();return a363_0xd02a=function(_0x340e82,_0x2cace2){_0x340e82=_0x340e82-0x19c;let _0x366cae=_0x33cfe6[_0x340e82];return _0x366cae;},a363_0xd02a(_0x8a1c34,_0x214808);}const a363_0x2cace2=(function(){let _0x1e5858=!![];return function(_0x5a6318,_0x53e28c){const _0x2c716b=_0x1e5858?function(){const _0x216213=a363_0xd02a;if(_0x53e28c){const _0x26cae8=_0x53e28c[_0x216213(0x1d5)](_0x5a6318,arguments);return _0x53e28c=null,_0x26cae8;}}:function(){};return _0x1e5858=![],_0x2c716b;};}()),a363_0x340e82=a363_0x2cace2(this,function(){const _0x38a5f3=a363_0xd02a;return a363_0x340e82['toString']()[_0x38a5f3(0x1c6)](_0x38a5f3(0x1ae))[_0x38a5f3(0x1c7)]()['constructor'](a363_0x340e82)['search'](_0x38a5f3(0x1ae));});a363_0x340e82();function a363_0x366c(){const _0x2f1d9a=['chunkArray','log','201930pPyqkT','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','search','toString','__esModule','deleteVeevaObjectRecords','RUNNING','VeevaError','2038436jAAWSn','flat','push','114EbbJlb','post','QUEUEING','executeVQL','QUEUED','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','apply','\x20records.','565235hMqenn','DELETE_RECORDS_LIMIT','getJobResult','data','13016dITNGf','../../shared/utils','sleep','Unknown\x20Job\x20status\x20:\x20\x27','application/json','VeevaResponseStatus','Creating\x20','createVeevaObjectRecords','VeevaService','get','JOB_STATUS_TIMEOUT','responseStatus','SCHEDULED','\x20records','(((.+)+)+)+$','CREATE_RECORDS_LIMIT','status','_logger','SUCCESS','3353zZCPrS','323580sSybdM','executeManyVQL','110lpGKaF','delete','13945311Dmcwcw','ERRORS_ENCOUNTERED','errors','VeevaJobStatus','../enums/status.enums','MISSED_SCHEDULE','_connection','length','34pCCEAF','3462701JavPqj'];a363_0x366c=function(){return _0x2f1d9a;};return a363_0x366c();}'use strict';Object['defineProperty'](exports,a363_0x5a4982(0x1c8),{'value':!![]}),exports['VeevaService']=void 0x0;const utils_1=require(a363_0x5a4982(0x1a1)),status_enums_1=require(a363_0x5a4982(0x1bc)),veeva_error_1=require('../classes/errors/veeva-error');class VeevaService{constructor({connection:_0x35d815,logger:_0x186d17}){const _0x125e4a=a363_0x5a4982;this[_0x125e4a(0x1be)]=_0x35d815,this[_0x125e4a(0x1b1)]=_0x186d17;}async[a363_0x5a4982(0x1b5)](_0x40119b){const _0xb3580c=a363_0x5a4982,_0x1a933c=[];for(const _0x3acd18 of _0x40119b){_0x1a933c[_0xb3580c(0x1ce)](this[_0xb3580c(0x1d2)](_0x3acd18));}const _0x2fa331=await Promise['all'](_0x1a933c);return _0x2fa331[_0xb3580c(0x1cd)]();}async[a363_0x5a4982(0x1d2)](_0x29894f){const _0x4244e2=a363_0x5a4982,_0x4ae9ac=[];do{const _0xa58939=await this[_0x4244e2(0x1be)][_0x4244e2(0x1a9)](_0x29894f),_0x650ef2=_0xa58939[_0x4244e2(0x19f)];if(_0x650ef2[_0x4244e2(0x1ab)]===status_enums_1[_0x4244e2(0x1a5)][_0x4244e2(0x1b2)]){const {responseDetails:{next_page:_0x69656a},data:_0x17c318}=_0x650ef2;_0x29894f=_0x69656a||null,_0x4ae9ac[_0x4244e2(0x1ce)](..._0x17c318);}else throw new veeva_error_1[(_0x4244e2(0x1cb))](_0x650ef2[_0x4244e2(0x1ba)]);}while(_0x29894f);return _0x4ae9ac;}async[a363_0x5a4982(0x1a7)](_0x5c5f22,_0x2be058){const _0x3a019a=a363_0x5a4982,_0x2d7249=[],_0x413918=(0x0,utils_1[_0x3a019a(0x1c2)])(_0x2be058,VeevaService[_0x3a019a(0x1af)]),_0x4f0f7f=_0x2be058[_0x3a019a(0x1bf)];let _0x12f3d3=0x0;for(const _0x37d1d9 of _0x413918){_0x12f3d3+=_0x37d1d9[_0x3a019a(0x1bf)],this['_logger'][_0x3a019a(0x1c3)](_0x3a019a(0x1a6)+_0x12f3d3+'/'+_0x4f0f7f+_0x3a019a(0x1d6));const _0x1c00c5=await this[_0x3a019a(0x1be)][_0x3a019a(0x1d0)](_0x5c5f22,_0x37d1d9),_0x3a1154=_0x1c00c5['data'];if(_0x3a1154['responseStatus']===status_enums_1[_0x3a019a(0x1a5)][_0x3a019a(0x1b2)])for(const {responseStatus:_0x147d15,data:_0x105140}of _0x3a1154[_0x3a019a(0x19f)]){if(_0x147d15===status_enums_1['VeevaResponseStatus'][_0x3a019a(0x1b2)])_0x2d7249[_0x3a019a(0x1ce)](_0x105140['id']);else throw new veeva_error_1[(_0x3a019a(0x1cb))](_0x3a1154['errors']);}else throw new veeva_error_1[(_0x3a019a(0x1cb))](_0x3a1154[_0x3a019a(0x1ba)]);}return _0x2d7249;}async[a363_0x5a4982(0x1c9)](_0x430dd9,_0x4982b0){const _0xdf0a46=a363_0x5a4982,_0x34425f=_0x4982b0['map'](_0x2d8b7f=>({'id':_0x2d8b7f})),_0x997109=(0x0,utils_1[_0xdf0a46(0x1c2)])(_0x34425f,VeevaService[_0xdf0a46(0x19d)]);let _0x4cd4c7=0x0;for(const _0xc65be6 of _0x997109){_0x4cd4c7+=_0xc65be6[_0xdf0a46(0x1bf)],this[_0xdf0a46(0x1b1)][_0xdf0a46(0x1c3)]('Deleting\x20'+_0x4cd4c7+'/'+_0x4982b0[_0xdf0a46(0x1bf)]+_0xdf0a46(0x1ad));const {data:_0x5ae5d7}=await this[_0xdf0a46(0x1be)][_0xdf0a46(0x1b7)](_0x430dd9,{'headers':{'Content-Type':_0xdf0a46(0x1a4)},'data':_0xc65be6});if(_0x5ae5d7['responseStatus']===status_enums_1[_0xdf0a46(0x1a5)][_0xdf0a46(0x1b2)])for(const _0x4b4c87 of _0x5ae5d7[_0xdf0a46(0x19f)]){const {responseStatus:_0x449ffe,errors:_0x21c9e0}=_0x4b4c87;if(_0x449ffe!==status_enums_1[_0xdf0a46(0x1a5)][_0xdf0a46(0x1b2)])throw new veeva_error_1[(_0xdf0a46(0x1cb))](_0x21c9e0);}else throw new veeva_error_1['VeevaError'](_0x5ae5d7[_0xdf0a46(0x1ba)]);}}async[a363_0x5a4982(0x19e)](_0x10436c){const _0x101e9b=a363_0x5a4982,_0xf5dd35=[];do{this[_0x101e9b(0x1b1)][_0x101e9b(0x1c3)](_0x101e9b(0x1d4)),await(0x0,utils_1[_0x101e9b(0x1a2)])(VeevaService[_0x101e9b(0x1aa)]);const _0x47c487=[];for(const _0x4581c1 of _0x10436c){const {data:_0x20d2ad}=await this[_0x101e9b(0x1be)][_0x101e9b(0x1a9)](_0x4581c1);if(_0x20d2ad['responseStatus']===status_enums_1[_0x101e9b(0x1a5)]['SUCCESS']){const {data:_0x343d86}=_0x20d2ad;switch(_0x343d86[_0x101e9b(0x1b0)]){case status_enums_1['VeevaJobStatus']['SUCCESS']:case status_enums_1[_0x101e9b(0x1bb)][_0x101e9b(0x1b9)]:_0xf5dd35[_0x101e9b(0x1ce)](_0x343d86);break;case status_enums_1[_0x101e9b(0x1bb)][_0x101e9b(0x1d1)]:case status_enums_1[_0x101e9b(0x1bb)]['CANCELLED']:case status_enums_1['VeevaJobStatus'][_0x101e9b(0x1bd)]:throw new Error(_0x101e9b(0x1c5)+_0x343d86[_0x101e9b(0x1b0)]);case status_enums_1['VeevaJobStatus'][_0x101e9b(0x1d3)]:case status_enums_1[_0x101e9b(0x1bb)][_0x101e9b(0x1ca)]:case status_enums_1[_0x101e9b(0x1bb)][_0x101e9b(0x1ac)]:_0x47c487[_0x101e9b(0x1ce)](_0x4581c1);break;default:throw new Error(_0x101e9b(0x1a3)+_0x343d86[_0x101e9b(0x1b0)]+'\x27');}}else throw new veeva_error_1['VeevaError'](_0x20d2ad[_0x101e9b(0x1ba)]);}_0x10436c=_0x47c487;}while(_0x10436c[_0x101e9b(0x1bf)]);return _0xf5dd35;}}exports[a363_0x5a4982(0x1a8)]=VeevaService,VeevaService[a363_0x5a4982(0x1aa)]=0x2710,VeevaService[a363_0x5a4982(0x1af)]=0x1f4,VeevaService[a363_0x5a4982(0x19d)]=0x1f4;