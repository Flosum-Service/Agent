const a364_0x3b17d2=a364_0x1781;(function(_0x1219a1,_0x1d16af){const _0x5cd410=a364_0x1781,_0x4b1338=_0x1219a1();while(!![]){try{const _0x441bd5=parseInt(_0x5cd410(0x174))/0x1+-parseInt(_0x5cd410(0x167))/0x2*(parseInt(_0x5cd410(0x197))/0x3)+-parseInt(_0x5cd410(0x16c))/0x4*(parseInt(_0x5cd410(0x1a1))/0x5)+-parseInt(_0x5cd410(0x192))/0x6*(parseInt(_0x5cd410(0x1a5))/0x7)+parseInt(_0x5cd410(0x170))/0x8*(-parseInt(_0x5cd410(0x193))/0x9)+-parseInt(_0x5cd410(0x175))/0xa+-parseInt(_0x5cd410(0x168))/0xb*(-parseInt(_0x5cd410(0x1a3))/0xc);if(_0x441bd5===_0x1d16af)break;else _0x4b1338['push'](_0x4b1338['shift']());}catch(_0x59c070){_0x4b1338['push'](_0x4b1338['shift']());}}}(a364_0x28ee,0x74d47));function a364_0x28ee(){const _0x3fbb3b=['VeevaJobStatus','responseStatus','sleep','SUCCESS','log','CANCELLED','all','application/json','../classes/errors/veeva-error','6dopCnD','1716345OuUOGh','data','QUEUEING','_connection','723ZHicVx','post','status','\x20records','delete','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','CREATE_RECORDS_LIMIT','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','../../shared/utils','(((.+)+)+)+$','7510tNwHJy','ENDPOINT_VQL','36CCqmtX','getJobResult','4101356yNyDaJ','Deleting\x20','../constants/veeva.constants','JOB_STATUS_TIMEOUT','deleteVeevaObjectRecords','MISSED_SCHEDULE','7166Pytmlq','6566351SdVTiS','search','Unknown\x20Job\x20status\x20:\x20\x27','defineProperty','500zLcAui','DELETE_RECORDS_LIMIT','errors','createVeevaObjectRecords','16tiZHWr','get','length','_logger','891251hdoWCI','1849680SuYJPD','constructor','VeevaResponseStatus','executeManyVQL','Creating\x20','__esModule','../enums/status.enums','VeevaError','map','VeevaConstants','QUEUED','ERRORS_ENCOUNTERED','\x20records.','RUNNING','chunkArray','push','flat','toString','VeevaService','executeVQL'];a364_0x28ee=function(){return _0x3fbb3b;};return a364_0x28ee();}const a364_0x37acbb=(function(){let _0x435ef4=!![];return function(_0x551f00,_0x4ac4e8){const _0x2d0396=_0x435ef4?function(){if(_0x4ac4e8){const _0x963b9f=_0x4ac4e8['apply'](_0x551f00,arguments);return _0x4ac4e8=null,_0x963b9f;}}:function(){};return _0x435ef4=![],_0x2d0396;};}()),a364_0x5313e5=a364_0x37acbb(this,function(){const _0x2b8ca4=a364_0x1781;return a364_0x5313e5[_0x2b8ca4(0x186)]()[_0x2b8ca4(0x169)](_0x2b8ca4(0x1a0))[_0x2b8ca4(0x186)]()[_0x2b8ca4(0x176)](a364_0x5313e5)[_0x2b8ca4(0x169)]('(((.+)+)+)+$');});a364_0x5313e5();'use strict';Object[a364_0x3b17d2(0x16b)](exports,a364_0x3b17d2(0x17a),{'value':!![]}),exports[a364_0x3b17d2(0x187)]=void 0x0;const utils_1=require(a364_0x3b17d2(0x19f)),status_enums_1=require(a364_0x3b17d2(0x17b)),veeva_error_1=require(a364_0x3b17d2(0x191)),veeva_constants_1=require(a364_0x3b17d2(0x1a7));class VeevaService{constructor({connection:_0x53c259,logger:_0x45da54}){const _0x394aa0=a364_0x3b17d2;this['_connection']=_0x53c259,this[_0x394aa0(0x173)]=_0x45da54;}async[a364_0x3b17d2(0x178)](_0x2c3d9a){const _0x2f8fd6=a364_0x3b17d2,_0x5313b8=[];for(const _0x438ffd of _0x2c3d9a){_0x5313b8[_0x2f8fd6(0x184)](this[_0x2f8fd6(0x188)](_0x438ffd));}const _0x24fb33=await Promise[_0x2f8fd6(0x18f)](_0x5313b8);return _0x24fb33[_0x2f8fd6(0x185)]();}async[a364_0x3b17d2(0x188)](_0x44b955){const _0x497dee=a364_0x3b17d2,_0x42a323=[];let _0x5dada4=this[_0x497dee(0x196)]['post'](veeva_constants_1[_0x497dee(0x17e)][_0x497dee(0x1a2)],new URLSearchParams([['q',_0x44b955]]),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}}),_0x57fcdd=![];do{const _0x649e4e=await _0x5dada4,_0xb5416f=_0x649e4e[_0x497dee(0x194)];if(_0xb5416f[_0x497dee(0x18a)]!==status_enums_1[_0x497dee(0x177)][_0x497dee(0x18c)])throw new veeva_error_1['VeevaError'](_0xb5416f[_0x497dee(0x16e)]);const {responseDetails:{next_page:_0x7f28ba},data:_0x4fee47}=_0xb5416f;_0x7f28ba?_0x5dada4=this[_0x497dee(0x196)][_0x497dee(0x171)](_0x7f28ba):_0x57fcdd=!![],_0x42a323[_0x497dee(0x184)](..._0x4fee47);}while(!_0x57fcdd);return _0x42a323;}async[a364_0x3b17d2(0x16f)](_0x3c5a55,_0x2751d8){const _0x1f91bd=a364_0x3b17d2,_0x1a5203=[],_0x570454=(0x0,utils_1[_0x1f91bd(0x183)])(_0x2751d8,VeevaService[_0x1f91bd(0x19d)]),_0x101d39=_0x2751d8['length'];let _0x5e090c=0x0;for(const _0x57542b of _0x570454){_0x5e090c+=_0x57542b[_0x1f91bd(0x172)],this[_0x1f91bd(0x173)][_0x1f91bd(0x18d)](_0x1f91bd(0x179)+_0x5e090c+'/'+_0x101d39+_0x1f91bd(0x181));const _0x4e1508=await this[_0x1f91bd(0x196)][_0x1f91bd(0x198)](_0x3c5a55,_0x57542b),_0x2167bf=_0x4e1508[_0x1f91bd(0x194)];if(_0x2167bf[_0x1f91bd(0x18a)]===status_enums_1[_0x1f91bd(0x177)][_0x1f91bd(0x18c)])for(const {responseStatus:_0x3d5b48,data:_0x531014}of _0x2167bf[_0x1f91bd(0x194)]){if(_0x3d5b48===status_enums_1[_0x1f91bd(0x177)][_0x1f91bd(0x18c)])_0x1a5203[_0x1f91bd(0x184)](_0x531014['id']);else throw new veeva_error_1[(_0x1f91bd(0x17c))](_0x2167bf[_0x1f91bd(0x16e)]);}else throw new veeva_error_1['VeevaError'](_0x2167bf[_0x1f91bd(0x16e)]);}return _0x1a5203;}async[a364_0x3b17d2(0x1a9)](_0x576397,_0x12422d){const _0x86eb1a=a364_0x3b17d2,_0x43e0cf=_0x12422d[_0x86eb1a(0x17d)](_0x43549a=>({'id':_0x43549a})),_0x3f9d11=(0x0,utils_1[_0x86eb1a(0x183)])(_0x43e0cf,VeevaService['DELETE_RECORDS_LIMIT']);let _0x30ed8c=0x0;for(const _0x43c88d of _0x3f9d11){_0x30ed8c+=_0x43c88d[_0x86eb1a(0x172)],this[_0x86eb1a(0x173)][_0x86eb1a(0x18d)](_0x86eb1a(0x1a6)+_0x30ed8c+'/'+_0x12422d[_0x86eb1a(0x172)]+_0x86eb1a(0x19a));const {data:_0x454316}=await this[_0x86eb1a(0x196)][_0x86eb1a(0x19b)](_0x576397,{'headers':{'Content-Type':_0x86eb1a(0x190)},'data':_0x43c88d});if(_0x454316[_0x86eb1a(0x18a)]===status_enums_1['VeevaResponseStatus'][_0x86eb1a(0x18c)])for(const _0x5a49ab of _0x454316['data']){const {responseStatus:_0xd3cda6,errors:_0x1c9c8b}=_0x5a49ab;if(_0xd3cda6!==status_enums_1[_0x86eb1a(0x177)][_0x86eb1a(0x18c)])throw new veeva_error_1['VeevaError'](_0x1c9c8b);}else throw new veeva_error_1[(_0x86eb1a(0x17c))](_0x454316[_0x86eb1a(0x16e)]);}}async[a364_0x3b17d2(0x1a4)](_0x5a14b7){const _0x358a65=a364_0x3b17d2,_0x380b75=[];do{this['_logger'][_0x358a65(0x18d)](_0x358a65(0x19c)),await(0x0,utils_1[_0x358a65(0x18b)])(VeevaService['JOB_STATUS_TIMEOUT']);const _0x58f63e=[];for(const _0xacafcb of _0x5a14b7){const {data:_0x267471}=await this['_connection'][_0x358a65(0x171)](_0xacafcb);if(_0x267471['responseStatus']===status_enums_1['VeevaResponseStatus'][_0x358a65(0x18c)]){const {data:_0x48745e}=_0x267471;switch(_0x48745e[_0x358a65(0x199)]){case status_enums_1['VeevaJobStatus'][_0x358a65(0x18c)]:case status_enums_1[_0x358a65(0x189)][_0x358a65(0x180)]:_0x380b75[_0x358a65(0x184)](_0x48745e);break;case status_enums_1[_0x358a65(0x189)][_0x358a65(0x195)]:case status_enums_1[_0x358a65(0x189)][_0x358a65(0x18e)]:case status_enums_1[_0x358a65(0x189)][_0x358a65(0x1aa)]:throw new Error(_0x358a65(0x19e)+_0x48745e['status']);case status_enums_1[_0x358a65(0x189)][_0x358a65(0x17f)]:case status_enums_1[_0x358a65(0x189)][_0x358a65(0x182)]:case status_enums_1[_0x358a65(0x189)]['SCHEDULED']:_0x58f63e['push'](_0xacafcb);break;default:throw new Error(_0x358a65(0x16a)+_0x48745e[_0x358a65(0x199)]+'\x27');}}else throw new veeva_error_1[(_0x358a65(0x17c))](_0x267471[_0x358a65(0x16e)]);}_0x5a14b7=_0x58f63e;}while(_0x5a14b7[_0x358a65(0x172)]);return _0x380b75;}}function a364_0x1781(_0x5d2323,_0x32d495){const _0x4c270c=a364_0x28ee();return a364_0x1781=function(_0x5313e5,_0x37acbb){_0x5313e5=_0x5313e5-0x167;let _0x28ee6f=_0x4c270c[_0x5313e5];return _0x28ee6f;},a364_0x1781(_0x5d2323,_0x32d495);}exports[a364_0x3b17d2(0x187)]=VeevaService,VeevaService[a364_0x3b17d2(0x1a8)]=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService[a364_0x3b17d2(0x16d)]=0x1f4;