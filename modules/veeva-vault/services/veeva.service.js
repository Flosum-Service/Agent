const a408_0x1ce3aa=a408_0x3806;function a408_0x3975(){const _0x107638=['responseStatus','ERRORS_ENCOUNTERED','QUEUED','88adVFfn','push','VeevaJobStatus','VeevaResponseStatus','46551tvUdeA','defineProperty','(((.+)+)+)+$','391444MzgBsF','../../shared/utils','_connection','JOB_STATUS_TIMEOUT','__esModule','../classes/errors/veeva-error','QUEUEING','_logger','93276MIWeZq','ENDPOINT_VQL','toString','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','executeVQL','Deleting\x20','status','log','CANCELLED','Unknown\x20Job\x20status\x20:\x20\x27','apply','DELETE_RECORDS_LIMIT','SCHEDULED','getJobResult','map','\x20records','application/x-www-form-urlencoded','232236efrWQC','search','VeevaService','2126770vBVkOg','2134015qrsHIy','CREATE_RECORDS_LIMIT','get','chunkArray','VeevaError','data','4favQJv','\x20records.','executeManyVQL','all','SUCCESS','RUNNING','length','../enums/status.enums','../constants/veeva.constants','VeevaConstants','MISSED_SCHEDULE','3655519OnAiSm','flat','6wnMoFU','errors'];a408_0x3975=function(){return _0x107638;};return a408_0x3975();}(function(_0x53122e,_0xfeb14c){const _0x3a3133=a408_0x3806,_0x2f1017=_0x53122e();while(!![]){try{const _0x4f65f7=parseInt(_0x3a3133(0x171))/0x1+-parseInt(_0x3a3133(0x174))/0x2*(parseInt(_0x3a3133(0x168))/0x3)+-parseInt(_0x3a3133(0x15b))/0x4*(parseInt(_0x3a3133(0x155))/0x5)+parseInt(_0x3a3133(0x17c))/0x6+parseInt(_0x3a3133(0x166))/0x7+parseInt(_0x3a3133(0x16d))/0x8*(parseInt(_0x3a3133(0x151))/0x9)+parseInt(_0x3a3133(0x154))/0xa;if(_0x4f65f7===_0xfeb14c)break;else _0x2f1017['push'](_0x2f1017['shift']());}catch(_0x6cfcee){_0x2f1017['push'](_0x2f1017['shift']());}}}(a408_0x3975,0x401bc));const a408_0x1426ee=(function(){let _0x3f2220=!![];return function(_0x5a0243,_0x422c8a){const _0x42b0fa=_0x3f2220?function(){const _0xaac258=a408_0x3806;if(_0x422c8a){const _0x1a025a=_0x422c8a[_0xaac258(0x14a)](_0x5a0243,arguments);return _0x422c8a=null,_0x1a025a;}}:function(){};return _0x3f2220=![],_0x42b0fa;};}()),a408_0x312949=a408_0x1426ee(this,function(){const _0x10d4fe=a408_0x3806;return a408_0x312949[_0x10d4fe(0x17e)]()[_0x10d4fe(0x152)]('(((.+)+)+)+$')[_0x10d4fe(0x17e)]()['constructor'](a408_0x312949)[_0x10d4fe(0x152)](_0x10d4fe(0x173));});a408_0x312949();'use strict';function a408_0x3806(_0x4d567c,_0x469419){const _0x510316=a408_0x3975();return a408_0x3806=function(_0x312949,_0x1426ee){_0x312949=_0x312949-0x145;let _0x3975ba=_0x510316[_0x312949];return _0x3975ba;},a408_0x3806(_0x4d567c,_0x469419);}Object[a408_0x1ce3aa(0x172)](exports,a408_0x1ce3aa(0x178),{'value':!![]}),exports[a408_0x1ce3aa(0x153)]=void 0x0;const utils_1=require(a408_0x1ce3aa(0x175)),status_enums_1=require(a408_0x1ce3aa(0x162)),veeva_error_1=require(a408_0x1ce3aa(0x179)),veeva_constants_1=require(a408_0x1ce3aa(0x163));class VeevaService{constructor({connection:_0x60bf70,logger:_0x5ac016}){const _0x315c11=a408_0x1ce3aa;this['_connection']=_0x60bf70,this[_0x315c11(0x17b)]=_0x5ac016;}async[a408_0x1ce3aa(0x15d)](_0x3e691b){const _0x1df45b=a408_0x1ce3aa,_0x44e2d1=[];for(const _0x9c5395 of _0x3e691b){_0x44e2d1[_0x1df45b(0x16e)](this['executeVQL'](_0x9c5395));}const _0x25e1df=await Promise[_0x1df45b(0x15e)](_0x44e2d1);return _0x25e1df[_0x1df45b(0x167)]();}async[a408_0x1ce3aa(0x180)](_0x1990bc){const _0x35855c=a408_0x1ce3aa,_0x168e2e=[];let _0x2656f1=this['_connection']['post'](veeva_constants_1[_0x35855c(0x164)][_0x35855c(0x17d)],new URLSearchParams([['q',_0x1990bc]]),{'headers':{'Content-Type':_0x35855c(0x150)}}),_0x324b78=![];do{const _0x6cf4f3=await _0x2656f1,_0x3c62aa=_0x6cf4f3[_0x35855c(0x15a)];if(_0x3c62aa['responseStatus']!==status_enums_1[_0x35855c(0x170)]['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x3c62aa[_0x35855c(0x169)]);const {responseDetails:{next_page:_0x23cb0b},data:_0x4cb6b8}=_0x3c62aa;_0x23cb0b?_0x2656f1=this['_connection'][_0x35855c(0x157)](_0x23cb0b):_0x324b78=!![],_0x168e2e[_0x35855c(0x16e)](..._0x4cb6b8);}while(!_0x324b78);return _0x168e2e;}async['createVeevaObjectRecords'](_0xcca4d0,_0x53575f){const _0x172d47=a408_0x1ce3aa,_0x28d204=[],_0x4253ee=(0x0,utils_1[_0x172d47(0x158)])(_0x53575f,VeevaService[_0x172d47(0x156)]),_0x55b057=_0x53575f[_0x172d47(0x161)];let _0x3f4706=0x0;for(const _0x1a610b of _0x4253ee){_0x3f4706+=_0x1a610b[_0x172d47(0x161)],this[_0x172d47(0x17b)][_0x172d47(0x147)]('Creating\x20'+_0x3f4706+'/'+_0x55b057+_0x172d47(0x15c));const _0x38a2d4=await this[_0x172d47(0x176)]['post'](_0xcca4d0,_0x1a610b),_0x434f14=_0x38a2d4[_0x172d47(0x15a)];if(_0x434f14[_0x172d47(0x16a)]===status_enums_1[_0x172d47(0x170)][_0x172d47(0x15f)])for(const {responseStatus:_0x898b51,data:_0x13a0ce}of _0x434f14[_0x172d47(0x15a)]){if(_0x898b51===status_enums_1[_0x172d47(0x170)]['SUCCESS'])_0x28d204[_0x172d47(0x16e)](_0x13a0ce['id']);else throw new veeva_error_1[(_0x172d47(0x159))](_0x434f14[_0x172d47(0x169)]);}else throw new veeva_error_1[(_0x172d47(0x159))](_0x434f14[_0x172d47(0x169)]);}return _0x28d204;}async['deleteVeevaObjectRecords'](_0x2313a0,_0x3497c4){const _0x250312=a408_0x1ce3aa,_0x24090a=_0x3497c4[_0x250312(0x14e)](_0x442c77=>({'id':_0x442c77})),_0xaa689f=(0x0,utils_1['chunkArray'])(_0x24090a,VeevaService[_0x250312(0x14b)]);let _0x430e1f=0x0;for(const _0x4d74df of _0xaa689f){_0x430e1f+=_0x4d74df[_0x250312(0x161)],this[_0x250312(0x17b)]['log'](_0x250312(0x145)+_0x430e1f+'/'+_0x3497c4['length']+_0x250312(0x14f));const {data:_0x27cfaf}=await this[_0x250312(0x176)]['delete'](_0x2313a0,{'headers':{'Content-Type':'application/json'},'data':_0x4d74df});if(_0x27cfaf[_0x250312(0x16a)]===status_enums_1[_0x250312(0x170)]['SUCCESS'])for(const _0x164c27 of _0x27cfaf[_0x250312(0x15a)]){const {responseStatus:_0x4b00fc,errors:_0x1b4772}=_0x164c27;if(_0x4b00fc!==status_enums_1['VeevaResponseStatus'][_0x250312(0x15f)])throw new veeva_error_1['VeevaError'](_0x1b4772);}else throw new veeva_error_1[(_0x250312(0x159))](_0x27cfaf[_0x250312(0x169)]);}}async[a408_0x1ce3aa(0x14d)](_0x355507){const _0x4ed22d=a408_0x1ce3aa,_0x1c3c7e=[];do{this['_logger']['log']('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1['sleep'])(VeevaService[_0x4ed22d(0x177)]);const _0x10ec34=[];for(const _0x560ccc of _0x355507){const {data:_0x83d30d}=await this['_connection']['get'](_0x560ccc);if(_0x83d30d[_0x4ed22d(0x16a)]===status_enums_1[_0x4ed22d(0x170)][_0x4ed22d(0x15f)]){const {data:_0x389656}=_0x83d30d;switch(_0x389656[_0x4ed22d(0x146)]){case status_enums_1['VeevaJobStatus']['SUCCESS']:case status_enums_1[_0x4ed22d(0x16f)][_0x4ed22d(0x16b)]:_0x1c3c7e['push'](_0x389656);break;case status_enums_1['VeevaJobStatus'][_0x4ed22d(0x17a)]:case status_enums_1['VeevaJobStatus'][_0x4ed22d(0x148)]:case status_enums_1[_0x4ed22d(0x16f)][_0x4ed22d(0x165)]:throw new Error(_0x4ed22d(0x17f)+_0x389656[_0x4ed22d(0x146)]);case status_enums_1[_0x4ed22d(0x16f)][_0x4ed22d(0x16c)]:case status_enums_1[_0x4ed22d(0x16f)][_0x4ed22d(0x160)]:case status_enums_1[_0x4ed22d(0x16f)][_0x4ed22d(0x14c)]:_0x10ec34[_0x4ed22d(0x16e)](_0x560ccc);break;default:throw new Error(_0x4ed22d(0x149)+_0x389656[_0x4ed22d(0x146)]+'\x27');}}else throw new veeva_error_1[(_0x4ed22d(0x159))](_0x83d30d['errors']);}_0x355507=_0x10ec34;}while(_0x355507[_0x4ed22d(0x161)]);return _0x1c3c7e;}}exports[a408_0x1ce3aa(0x153)]=VeevaService,VeevaService[a408_0x1ce3aa(0x177)]=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService[a408_0x1ce3aa(0x14b)]=0x1f4;