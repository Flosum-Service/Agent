const a407_0x454764=a407_0x3962;(function(_0x473598,_0x432a43){const _0x4ec158=a407_0x3962,_0x3c20a0=_0x473598();while(!![]){try{const _0x17502f=parseInt(_0x4ec158(0x12b))/0x1*(parseInt(_0x4ec158(0x143))/0x2)+parseInt(_0x4ec158(0x11f))/0x3*(-parseInt(_0x4ec158(0x12d))/0x4)+parseInt(_0x4ec158(0x14b))/0x5*(parseInt(_0x4ec158(0x145))/0x6)+parseInt(_0x4ec158(0x147))/0x7*(parseInt(_0x4ec158(0x13b))/0x8)+-parseInt(_0x4ec158(0x123))/0x9*(parseInt(_0x4ec158(0x142))/0xa)+parseInt(_0x4ec158(0x153))/0xb+-parseInt(_0x4ec158(0x12c))/0xc;if(_0x17502f===_0x432a43)break;else _0x3c20a0['push'](_0x3c20a0['shift']());}catch(_0x4d76a3){_0x3c20a0['push'](_0x3c20a0['shift']());}}}(a407_0x50d1,0x43671));const a407_0xe8431d=(function(){let _0x55bb92=!![];return function(_0xfcb08d,_0x277737){const _0x104af8=_0x55bb92?function(){if(_0x277737){const _0x5d2fdc=_0x277737['apply'](_0xfcb08d,arguments);return _0x277737=null,_0x5d2fdc;}}:function(){};return _0x55bb92=![],_0x104af8;};}()),a407_0x1a9072=a407_0xe8431d(this,function(){const _0x58d8e5=a407_0x3962;return a407_0x1a9072[_0x58d8e5(0x146)]()[_0x58d8e5(0x121)](_0x58d8e5(0x13a))[_0x58d8e5(0x146)]()[_0x58d8e5(0x129)](a407_0x1a9072)['search'](_0x58d8e5(0x13a));});a407_0x1a9072();'use strict';Object[a407_0x454764(0x141)](exports,a407_0x454764(0x157),{'value':!![]}),exports[a407_0x454764(0x11b)]=void 0x0;const utils_1=require(a407_0x454764(0x14e)),status_enums_1=require(a407_0x454764(0x130)),veeva_error_1=require('../classes/errors/veeva-error'),veeva_constants_1=require(a407_0x454764(0x11e));class VeevaService{constructor({connection:_0x255522,logger:_0x58b6d9}){const _0x2ac062=a407_0x454764;this[_0x2ac062(0x11d)]=_0x255522,this['_logger']=_0x58b6d9;}async[a407_0x454764(0x131)](_0x2d6b3a){const _0x1e65fd=a407_0x454764,_0x3387e5=[];for(const _0x3e9f30 of _0x2d6b3a){_0x3387e5[_0x1e65fd(0x14a)](this[_0x1e65fd(0x156)](_0x3e9f30));}const _0x53816f=await Promise[_0x1e65fd(0x155)](_0x3387e5);return _0x53816f[_0x1e65fd(0x133)]();}async[a407_0x454764(0x156)](_0x503632){const _0x2eae2e=a407_0x454764,_0x971771=[];let _0x184f36=this[_0x2eae2e(0x11d)][_0x2eae2e(0x124)](veeva_constants_1[_0x2eae2e(0x136)]['ENDPOINT_VQL'],new URLSearchParams([['q',_0x503632]]),{'headers':{'Content-Type':_0x2eae2e(0x13c)}}),_0x289ac3=![];do{const _0x1ded09=await _0x184f36,_0xa74d08=_0x1ded09[_0x2eae2e(0x122)];if(_0xa74d08[_0x2eae2e(0x154)]!==status_enums_1[_0x2eae2e(0x151)]['SUCCESS'])throw new veeva_error_1[(_0x2eae2e(0x132))](_0xa74d08[_0x2eae2e(0x126)]);const {responseDetails:{next_page:_0x1f51a1},data:_0x512a49}=_0xa74d08;_0x1f51a1?_0x184f36=this[_0x2eae2e(0x11d)]['get'](_0x1f51a1):_0x289ac3=!![],_0x971771[_0x2eae2e(0x14a)](..._0x512a49);}while(!_0x289ac3);return _0x971771;}async[a407_0x454764(0x144)](_0x4fd6bb,_0x456ba6){const _0x5dd320=a407_0x454764,_0x60c84e=[],_0x320ba9=(0x0,utils_1[_0x5dd320(0x13e)])(_0x456ba6,VeevaService[_0x5dd320(0x135)]),_0xf8e4a9=_0x456ba6[_0x5dd320(0x12a)];let _0x29da9b=0x0;for(const _0x36f8bc of _0x320ba9){_0x29da9b+=_0x36f8bc[_0x5dd320(0x12a)],this[_0x5dd320(0x149)][_0x5dd320(0x11a)]('Creating\x20'+_0x29da9b+'/'+_0xf8e4a9+_0x5dd320(0x134));const _0x4f4ee9=await this[_0x5dd320(0x11d)][_0x5dd320(0x124)](_0x4fd6bb,_0x36f8bc),_0x2f670a=_0x4f4ee9[_0x5dd320(0x122)];if(_0x2f670a['responseStatus']===status_enums_1[_0x5dd320(0x151)][_0x5dd320(0x152)])for(const {responseStatus:_0x12a2b6,data:_0x3f6364}of _0x2f670a[_0x5dd320(0x122)]){if(_0x12a2b6===status_enums_1[_0x5dd320(0x151)]['SUCCESS'])_0x60c84e[_0x5dd320(0x14a)](_0x3f6364['id']);else throw new veeva_error_1[(_0x5dd320(0x132))](_0x2f670a[_0x5dd320(0x126)]);}else throw new veeva_error_1['VeevaError'](_0x2f670a[_0x5dd320(0x126)]);}return _0x60c84e;}async['deleteVeevaObjectRecords'](_0x38c865,_0x185627){const _0x4ccb27=a407_0x454764,_0x58ef28=_0x185627[_0x4ccb27(0x14f)](_0x1a5eee=>({'id':_0x1a5eee})),_0x378294=(0x0,utils_1[_0x4ccb27(0x13e)])(_0x58ef28,VeevaService[_0x4ccb27(0x13f)]);let _0x2afb36=0x0;for(const _0x56c1d9 of _0x378294){_0x2afb36+=_0x56c1d9[_0x4ccb27(0x12a)],this[_0x4ccb27(0x149)][_0x4ccb27(0x11a)](_0x4ccb27(0x12f)+_0x2afb36+'/'+_0x185627[_0x4ccb27(0x12a)]+_0x4ccb27(0x12e));const {data:_0x24efa1}=await this[_0x4ccb27(0x11d)][_0x4ccb27(0x120)](_0x38c865,{'headers':{'Content-Type':'application/json'},'data':_0x56c1d9});if(_0x24efa1[_0x4ccb27(0x154)]===status_enums_1[_0x4ccb27(0x151)]['SUCCESS'])for(const _0x308360 of _0x24efa1['data']){const {responseStatus:_0x73512a,errors:_0x21cf89}=_0x308360;if(_0x73512a!==status_enums_1[_0x4ccb27(0x151)][_0x4ccb27(0x152)])throw new veeva_error_1[(_0x4ccb27(0x132))](_0x21cf89);}else throw new veeva_error_1[(_0x4ccb27(0x132))](_0x24efa1[_0x4ccb27(0x126)]);}}async[a407_0x454764(0x128)](_0x40dd76){const _0xb178b5=a407_0x454764,_0x1cf08b=[];do{this[_0xb178b5(0x149)][_0xb178b5(0x11a)](_0xb178b5(0x14d)),await(0x0,utils_1[_0xb178b5(0x148)])(VeevaService[_0xb178b5(0x138)]);const _0x2321f0=[];for(const _0x1192d0 of _0x40dd76){const {data:_0x4f501a}=await this[_0xb178b5(0x11d)][_0xb178b5(0x139)](_0x1192d0);if(_0x4f501a['responseStatus']===status_enums_1[_0xb178b5(0x151)][_0xb178b5(0x152)]){const {data:_0x364965}=_0x4f501a;switch(_0x364965[_0xb178b5(0x14c)]){case status_enums_1[_0xb178b5(0x150)]['SUCCESS']:case status_enums_1[_0xb178b5(0x150)][_0xb178b5(0x13d)]:_0x1cf08b[_0xb178b5(0x14a)](_0x364965);break;case status_enums_1[_0xb178b5(0x150)][_0xb178b5(0x125)]:case status_enums_1[_0xb178b5(0x150)][_0xb178b5(0x158)]:case status_enums_1[_0xb178b5(0x150)]['MISSED_SCHEDULE']:throw new Error(_0xb178b5(0x140)+_0x364965[_0xb178b5(0x14c)]);case status_enums_1['VeevaJobStatus']['QUEUED']:case status_enums_1[_0xb178b5(0x150)][_0xb178b5(0x137)]:case status_enums_1[_0xb178b5(0x150)][_0xb178b5(0x11c)]:_0x2321f0[_0xb178b5(0x14a)](_0x1192d0);break;default:throw new Error(_0xb178b5(0x127)+_0x364965[_0xb178b5(0x14c)]+'\x27');}}else throw new veeva_error_1[(_0xb178b5(0x132))](_0x4f501a['errors']);}_0x40dd76=_0x2321f0;}while(_0x40dd76[_0xb178b5(0x12a)]);return _0x1cf08b;}}function a407_0x3962(_0x816a20,_0x284f63){const _0x24fbc5=a407_0x50d1();return a407_0x3962=function(_0x1a9072,_0xe8431d){_0x1a9072=_0x1a9072-0x11a;let _0x50d17b=_0x24fbc5[_0x1a9072];return _0x50d17b;},a407_0x3962(_0x816a20,_0x284f63);}exports['VeevaService']=VeevaService,VeevaService[a407_0x454764(0x138)]=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService[a407_0x454764(0x13f)]=0x1f4;function a407_0x50d1(){const _0xe74c89=['Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','../../shared/utils','map','VeevaJobStatus','VeevaResponseStatus','SUCCESS','3003451XTFxWf','responseStatus','all','executeVQL','__esModule','CANCELLED','log','VeevaService','SCHEDULED','_connection','../constants/veeva.constants','6459YVJncl','delete','search','data','9JBstqz','post','QUEUEING','errors','Unknown\x20Job\x20status\x20:\x20\x27','getJobResult','constructor','length','62732TGdIRr','3551772OqUWwl','852UkJjCu','\x20records','Deleting\x20','../enums/status.enums','executeManyVQL','VeevaError','flat','\x20records.','CREATE_RECORDS_LIMIT','VeevaConstants','RUNNING','JOB_STATUS_TIMEOUT','get','(((.+)+)+)+$','248aZGvDs','application/x-www-form-urlencoded','ERRORS_ENCOUNTERED','chunkArray','DELETE_RECORDS_LIMIT','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','defineProperty','888710YRNFPk','4nhyQku','createVeevaObjectRecords','2105448nQgfnz','toString','83573DCkhcc','sleep','_logger','push','5MVLssq','status'];a407_0x50d1=function(){return _0xe74c89;};return a407_0x50d1();}