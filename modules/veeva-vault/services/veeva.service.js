const a364_0x5141a2=a364_0x1cf4;(function(_0x2dfc20,_0x110411){const _0x49b0e0=a364_0x1cf4,_0x4e1005=_0x2dfc20();while(!![]){try{const _0x47c523=parseInt(_0x49b0e0(0x1c2))/0x1*(parseInt(_0x49b0e0(0x1d0))/0x2)+-parseInt(_0x49b0e0(0x1e6))/0x3*(parseInt(_0x49b0e0(0x1bf))/0x4)+parseInt(_0x49b0e0(0x1bd))/0x5*(-parseInt(_0x49b0e0(0x1e4))/0x6)+-parseInt(_0x49b0e0(0x1cf))/0x7*(-parseInt(_0x49b0e0(0x1d9))/0x8)+parseInt(_0x49b0e0(0x1b7))/0x9*(parseInt(_0x49b0e0(0x1c7))/0xa)+parseInt(_0x49b0e0(0x1ea))/0xb+parseInt(_0x49b0e0(0x1c0))/0xc*(-parseInt(_0x49b0e0(0x1b1))/0xd);if(_0x47c523===_0x110411)break;else _0x4e1005['push'](_0x4e1005['shift']());}catch(_0x4bc352){_0x4e1005['push'](_0x4e1005['shift']());}}}(a364_0x3ed1,0xd7e10));const a364_0x41c59c=(function(){let _0x53643e=!![];return function(_0x2cca4f,_0x49ac6d){const _0x4c026e=_0x53643e?function(){const _0x3f4c8f=a364_0x1cf4;if(_0x49ac6d){const _0x249d5e=_0x49ac6d[_0x3f4c8f(0x1d8)](_0x2cca4f,arguments);return _0x49ac6d=null,_0x249d5e;}}:function(){};return _0x53643e=![],_0x4c026e;};}()),a364_0x47209c=a364_0x41c59c(this,function(){const _0x134f15=a364_0x1cf4;return a364_0x47209c[_0x134f15(0x1d7)]()['search']('(((.+)+)+)+$')[_0x134f15(0x1d7)]()[_0x134f15(0x1db)](a364_0x47209c)['search'](_0x134f15(0x1e7));});a364_0x47209c();'use strict';Object['defineProperty'](exports,a364_0x5141a2(0x1b2),{'value':!![]}),exports[a364_0x5141a2(0x1b9)]=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a364_0x5141a2(0x1cc)),veeva_error_1=require(a364_0x5141a2(0x1b6));function a364_0x1cf4(_0x2a32c1,_0x3680ce){const _0x4b7085=a364_0x3ed1();return a364_0x1cf4=function(_0x47209c,_0x41c59c){_0x47209c=_0x47209c-0x1ae;let _0x3ed17f=_0x4b7085[_0x47209c];return _0x3ed17f;},a364_0x1cf4(_0x2a32c1,_0x3680ce);}function a364_0x3ed1(){const _0x2cc023=['MISSED_SCHEDULE','application/json','VeevaError','Unknown\x20Job\x20status\x20:\x20\x27','map','962238pMzXrk','get','3PDhqDp','(((.+)+)+)+$','JOB_STATUS_TIMEOUT','CREATE_RECORDS_LIMIT','14183807ImBvLA','status','errors','chunkArray','_logger','SCHEDULED','8065980EZPqaJ','__esModule','Creating\x20','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','VeevaJobStatus','../classes/errors/veeva-error','1174923vNJaKq','RUNNING','VeevaService','DELETE_RECORDS_LIMIT','all','getJobResult','25eAiugD','QUEUEING','6317964ehCXnE','12gKIxqk','data','13lvbQAv','delete','ERRORS_ENCOUNTERED','push','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','110zuPQJr','_connection','\x20records','deleteVeevaObjectRecords','VeevaResponseStatus','../enums/status.enums','QUEUED','sleep','7ugZhPM','7354INxsPD','post','log','length','flat','\x20records.','SUCCESS','toString','apply','8902408nDmAJx','responseStatus','constructor','CANCELLED','executeManyVQL','createVeevaObjectRecords'];a364_0x3ed1=function(){return _0x2cc023;};return a364_0x3ed1();}class VeevaService{constructor({connection:_0x4c25cd,logger:_0x56d1b4}){const _0xab503b=a364_0x5141a2;this[_0xab503b(0x1c8)]=_0x4c25cd,this[_0xab503b(0x1af)]=_0x56d1b4;}async[a364_0x5141a2(0x1dd)](_0x117e25){const _0x2cebf9=a364_0x5141a2,_0x1b49ea=[];for(const _0x17b56f of _0x117e25){_0x1b49ea['push'](this['executeVQL'](_0x17b56f));}const _0x5e87e8=await Promise[_0x2cebf9(0x1bb)](_0x1b49ea);return _0x5e87e8[_0x2cebf9(0x1d4)]();}async['executeVQL'](_0x5c3db6){const _0x2ee0ce=a364_0x5141a2,_0x50c646=[];do{const _0x1b1974=await this[_0x2ee0ce(0x1c8)][_0x2ee0ce(0x1e5)](_0x5c3db6),_0x463262=_0x1b1974[_0x2ee0ce(0x1c1)];if(_0x463262[_0x2ee0ce(0x1da)]===status_enums_1[_0x2ee0ce(0x1cb)][_0x2ee0ce(0x1d6)]){const {responseDetails:{next_page:_0x5d7100},data:_0x117591}=_0x463262;_0x5c3db6=_0x5d7100||null,_0x50c646[_0x2ee0ce(0x1c5)](..._0x117591);}else throw new veeva_error_1['VeevaError'](_0x463262['errors']);}while(_0x5c3db6);return _0x50c646;}async[a364_0x5141a2(0x1de)](_0x39dbdd,_0x2d2c68){const _0x2ba0dd=a364_0x5141a2,_0x325dd7=[],_0x28ce5d=(0x0,utils_1['chunkArray'])(_0x2d2c68,VeevaService[_0x2ba0dd(0x1e9)]),_0x18467c=_0x2d2c68['length'];let _0x243b1a=0x0;for(const _0x1ea164 of _0x28ce5d){_0x243b1a+=_0x1ea164[_0x2ba0dd(0x1d3)],this[_0x2ba0dd(0x1af)][_0x2ba0dd(0x1d2)](_0x2ba0dd(0x1b3)+_0x243b1a+'/'+_0x18467c+_0x2ba0dd(0x1d5));const _0x364b17=await this[_0x2ba0dd(0x1c8)][_0x2ba0dd(0x1d1)](_0x39dbdd,_0x1ea164),_0x5a0256=_0x364b17[_0x2ba0dd(0x1c1)];if(_0x5a0256['responseStatus']===status_enums_1[_0x2ba0dd(0x1cb)]['SUCCESS'])for(const {responseStatus:_0x528adf,data:_0x4660c0}of _0x5a0256[_0x2ba0dd(0x1c1)]){if(_0x528adf===status_enums_1['VeevaResponseStatus']['SUCCESS'])_0x325dd7[_0x2ba0dd(0x1c5)](_0x4660c0['id']);else throw new veeva_error_1['VeevaError'](_0x5a0256[_0x2ba0dd(0x1ec)]);}else throw new veeva_error_1[(_0x2ba0dd(0x1e1))](_0x5a0256[_0x2ba0dd(0x1ec)]);}return _0x325dd7;}async[a364_0x5141a2(0x1ca)](_0x101fef,_0x5cf7c2){const _0x483cf9=a364_0x5141a2,_0xe62387=_0x5cf7c2[_0x483cf9(0x1e3)](_0xb44a8f=>({'id':_0xb44a8f})),_0x3d0f10=(0x0,utils_1[_0x483cf9(0x1ae)])(_0xe62387,VeevaService[_0x483cf9(0x1ba)]);let _0x2e6841=0x0;for(const _0x4169d7 of _0x3d0f10){_0x2e6841+=_0x4169d7[_0x483cf9(0x1d3)],this[_0x483cf9(0x1af)][_0x483cf9(0x1d2)]('Deleting\x20'+_0x2e6841+'/'+_0x5cf7c2[_0x483cf9(0x1d3)]+_0x483cf9(0x1c9));const {data:_0x55cae3}=await this['_connection'][_0x483cf9(0x1c3)](_0x101fef,{'headers':{'Content-Type':_0x483cf9(0x1e0)},'data':_0x4169d7});if(_0x55cae3[_0x483cf9(0x1da)]===status_enums_1[_0x483cf9(0x1cb)][_0x483cf9(0x1d6)])for(const _0x2c182a of _0x55cae3['data']){const {responseStatus:_0x1b8c89,errors:_0x177fbc}=_0x2c182a;if(_0x1b8c89!==status_enums_1[_0x483cf9(0x1cb)][_0x483cf9(0x1d6)])throw new veeva_error_1['VeevaError'](_0x177fbc);}else throw new veeva_error_1[(_0x483cf9(0x1e1))](_0x55cae3[_0x483cf9(0x1ec)]);}}async[a364_0x5141a2(0x1bc)](_0x1738e4){const _0x30405f=a364_0x5141a2,_0x10cf55=[];do{this['_logger'][_0x30405f(0x1d2)](_0x30405f(0x1b4)),await(0x0,utils_1[_0x30405f(0x1ce)])(VeevaService[_0x30405f(0x1e8)]);const _0x16db38=[];for(const _0x55469f of _0x1738e4){const {data:_0x7ff9ef}=await this[_0x30405f(0x1c8)][_0x30405f(0x1e5)](_0x55469f);if(_0x7ff9ef[_0x30405f(0x1da)]===status_enums_1[_0x30405f(0x1cb)][_0x30405f(0x1d6)]){const {data:_0xc13aa}=_0x7ff9ef;switch(_0xc13aa[_0x30405f(0x1eb)]){case status_enums_1['VeevaJobStatus'][_0x30405f(0x1d6)]:case status_enums_1[_0x30405f(0x1b5)][_0x30405f(0x1c4)]:_0x10cf55[_0x30405f(0x1c5)](_0xc13aa);break;case status_enums_1[_0x30405f(0x1b5)][_0x30405f(0x1be)]:case status_enums_1['VeevaJobStatus'][_0x30405f(0x1dc)]:case status_enums_1[_0x30405f(0x1b5)][_0x30405f(0x1df)]:throw new Error(_0x30405f(0x1c6)+_0xc13aa['status']);case status_enums_1[_0x30405f(0x1b5)][_0x30405f(0x1cd)]:case status_enums_1[_0x30405f(0x1b5)][_0x30405f(0x1b8)]:case status_enums_1['VeevaJobStatus'][_0x30405f(0x1b0)]:_0x16db38['push'](_0x55469f);break;default:throw new Error(_0x30405f(0x1e2)+_0xc13aa['status']+'\x27');}}else throw new veeva_error_1['VeevaError'](_0x7ff9ef[_0x30405f(0x1ec)]);}_0x1738e4=_0x16db38;}while(_0x1738e4['length']);return _0x10cf55;}}exports['VeevaService']=VeevaService,VeevaService[a364_0x5141a2(0x1e8)]=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;