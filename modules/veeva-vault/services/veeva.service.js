const a396_0x2d501b=a396_0x1089;function a396_0x5d1d(){const _0x320cb5=['CREATE_RECORDS_LIMIT','10315FpknQi','VeevaResponseStatus','status','DELETE_RECORDS_LIMIT','../constants/veeva.constants','all','_connection','SCHEDULED','2406775aLxKse','1868188vBiiRH','defineProperty','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','SUCCESS','RUNNING','QUEUED','_logger','toString','../enums/status.enums','469548MMMFqL','1590eAEfph','constructor','VeevaError','1587znpIAQ','../../shared/utils','Creating\x20','JOB_STATUS_TIMEOUT','ERRORS_ENCOUNTERED','QUEUEING','MISSED_SCHEDULE','5643328MzrJuA','length','search','Deleting\x20','application/x-www-form-urlencoded','deleteVeevaObjectRecords','58348nJiErT','apply','createVeevaObjectRecords','VeevaService','responseStatus','push','post','delete','2062EZIJeu','CANCELLED','Unknown\x20Job\x20status\x20:\x20\x27','VeevaJobStatus','errors','sleep','map','ENDPOINT_VQL','getJobResult','get','data','\x20records.','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'];a396_0x5d1d=function(){return _0x320cb5;};return a396_0x5d1d();}(function(_0xb475c5,_0x416f45){const _0x4c9a19=a396_0x1089,_0x38fbca=_0xb475c5();while(!![]){try{const _0x5bd018=parseInt(_0x4c9a19(0x19d))/0x1+-parseInt(_0x4c9a19(0x1a5))/0x2*(parseInt(_0x4c9a19(0x1c9))/0x3)+parseInt(_0x4c9a19(0x1bc))/0x4+parseInt(_0x4c9a19(0x1b3))/0x5*(-parseInt(_0x4c9a19(0x1c6))/0x6)+parseInt(_0x4c9a19(0x1bb))/0x7+parseInt(_0x4c9a19(0x1d0))/0x8+-parseInt(_0x4c9a19(0x1c5))/0x9;if(_0x5bd018===_0x416f45)break;else _0x38fbca['push'](_0x38fbca['shift']());}catch(_0x42e83f){_0x38fbca['push'](_0x38fbca['shift']());}}}(a396_0x5d1d,0x69122));function a396_0x1089(_0x38ff83,_0x4bb4dc){const _0x2a180b=a396_0x5d1d();return a396_0x1089=function(_0x5acb0d,_0x5848da){_0x5acb0d=_0x5acb0d-0x19b;let _0x5d1d33=_0x2a180b[_0x5acb0d];return _0x5d1d33;},a396_0x1089(_0x38ff83,_0x4bb4dc);}const a396_0x5848da=(function(){let _0x14b9ec=!![];return function(_0x40e2f9,_0xb1429e){const _0x1bc4a6=_0x14b9ec?function(){const _0x4a8e26=a396_0x1089;if(_0xb1429e){const _0x5ad38c=_0xb1429e[_0x4a8e26(0x19e)](_0x40e2f9,arguments);return _0xb1429e=null,_0x5ad38c;}}:function(){};return _0x14b9ec=![],_0x1bc4a6;};}()),a396_0x5acb0d=a396_0x5848da(this,function(){const _0x26a584=a396_0x1089;return a396_0x5acb0d['toString']()[_0x26a584(0x1d2)]('(((.+)+)+)+$')[_0x26a584(0x1c3)]()[_0x26a584(0x1c7)](a396_0x5acb0d)[_0x26a584(0x1d2)]('(((.+)+)+)+$');});a396_0x5acb0d();'use strict';Object[a396_0x2d501b(0x1bd)](exports,'__esModule',{'value':!![]}),exports[a396_0x2d501b(0x1a0)]=void 0x0;const utils_1=require(a396_0x2d501b(0x1ca)),status_enums_1=require(a396_0x2d501b(0x1c4)),veeva_error_1=require('../classes/errors/veeva-error'),veeva_constants_1=require(a396_0x2d501b(0x1b7));class VeevaService{constructor({connection:_0x12bb2a,logger:_0x2ed59b}){this['_connection']=_0x12bb2a,this['_logger']=_0x2ed59b;}async['executeManyVQL'](_0x599bc1){const _0x17f009=a396_0x2d501b,_0x5b28ff=[];for(const _0x3c0fdb of _0x599bc1){_0x5b28ff[_0x17f009(0x1a2)](this['executeVQL'](_0x3c0fdb));}const _0x5cbf48=await Promise[_0x17f009(0x1b8)](_0x5b28ff);return _0x5cbf48['flat']();}async['executeVQL'](_0xd623af){const _0xdf2286=a396_0x2d501b,_0x1ca5e3=[];let _0x4ad557=this['_connection'][_0xdf2286(0x1a3)](veeva_constants_1['VeevaConstants'][_0xdf2286(0x1ac)],new URLSearchParams([['q',_0xd623af]]),{'headers':{'Content-Type':_0xdf2286(0x19b)}}),_0x1c05a1=![];do{const _0x47715c=await _0x4ad557,_0x309bda=_0x47715c[_0xdf2286(0x1af)];if(_0x309bda[_0xdf2286(0x1a1)]!==status_enums_1[_0xdf2286(0x1b4)]['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x309bda['errors']);const {responseDetails:{next_page:_0x25bb1e},data:_0x5ebac4}=_0x309bda;_0x25bb1e?_0x4ad557=this[_0xdf2286(0x1b9)][_0xdf2286(0x1ae)](_0x25bb1e):_0x1c05a1=!![],_0x1ca5e3[_0xdf2286(0x1a2)](..._0x5ebac4);}while(!_0x1c05a1);return _0x1ca5e3;}async[a396_0x2d501b(0x19f)](_0x10839f,_0x1370b7){const _0x4b3f39=a396_0x2d501b,_0x5ee85e=[],_0x317a4d=(0x0,utils_1['chunkArray'])(_0x1370b7,VeevaService[_0x4b3f39(0x1b2)]),_0x366131=_0x1370b7[_0x4b3f39(0x1d1)];let _0x4f06cc=0x0;for(const _0x3d025b of _0x317a4d){_0x4f06cc+=_0x3d025b[_0x4b3f39(0x1d1)],this[_0x4b3f39(0x1c2)]['log'](_0x4b3f39(0x1cb)+_0x4f06cc+'/'+_0x366131+_0x4b3f39(0x1b0));const _0x575f20=await this[_0x4b3f39(0x1b9)][_0x4b3f39(0x1a3)](_0x10839f,_0x3d025b),_0x38fd96=_0x575f20[_0x4b3f39(0x1af)];if(_0x38fd96[_0x4b3f39(0x1a1)]===status_enums_1[_0x4b3f39(0x1b4)]['SUCCESS'])for(const {responseStatus:_0x18a964,data:_0x48123d}of _0x38fd96[_0x4b3f39(0x1af)]){if(_0x18a964===status_enums_1[_0x4b3f39(0x1b4)]['SUCCESS'])_0x5ee85e[_0x4b3f39(0x1a2)](_0x48123d['id']);else throw new veeva_error_1[(_0x4b3f39(0x1c8))](_0x38fd96[_0x4b3f39(0x1a9)]);}else throw new veeva_error_1['VeevaError'](_0x38fd96[_0x4b3f39(0x1a9)]);}return _0x5ee85e;}async[a396_0x2d501b(0x19c)](_0x453a50,_0x17a233){const _0x49a582=a396_0x2d501b,_0x2115f1=_0x17a233[_0x49a582(0x1ab)](_0x18a487=>({'id':_0x18a487})),_0x44aaeb=(0x0,utils_1['chunkArray'])(_0x2115f1,VeevaService[_0x49a582(0x1b6)]);let _0x56cadc=0x0;for(const _0x2196de of _0x44aaeb){_0x56cadc+=_0x2196de['length'],this[_0x49a582(0x1c2)]['log'](_0x49a582(0x1d3)+_0x56cadc+'/'+_0x17a233['length']+'\x20records');const {data:_0x181b3f}=await this['_connection'][_0x49a582(0x1a4)](_0x453a50,{'headers':{'Content-Type':'application/json'},'data':_0x2196de});if(_0x181b3f['responseStatus']===status_enums_1['VeevaResponseStatus'][_0x49a582(0x1bf)])for(const _0x405326 of _0x181b3f[_0x49a582(0x1af)]){const {responseStatus:_0x2f0525,errors:_0x181c19}=_0x405326;if(_0x2f0525!==status_enums_1['VeevaResponseStatus']['SUCCESS'])throw new veeva_error_1[(_0x49a582(0x1c8))](_0x181c19);}else throw new veeva_error_1[(_0x49a582(0x1c8))](_0x181b3f[_0x49a582(0x1a9)]);}}async[a396_0x2d501b(0x1ad)](_0x57ec39){const _0x53763f=a396_0x2d501b,_0x5c9173=[];do{this[_0x53763f(0x1c2)]['log'](_0x53763f(0x1be)),await(0x0,utils_1[_0x53763f(0x1aa)])(VeevaService[_0x53763f(0x1cc)]);const _0x13c7d7=[];for(const _0x5d8702 of _0x57ec39){const {data:_0xc3553a}=await this[_0x53763f(0x1b9)][_0x53763f(0x1ae)](_0x5d8702);if(_0xc3553a[_0x53763f(0x1a1)]===status_enums_1[_0x53763f(0x1b4)]['SUCCESS']){const {data:_0x134298}=_0xc3553a;switch(_0x134298['status']){case status_enums_1['VeevaJobStatus'][_0x53763f(0x1bf)]:case status_enums_1[_0x53763f(0x1a8)][_0x53763f(0x1cd)]:_0x5c9173['push'](_0x134298);break;case status_enums_1['VeevaJobStatus'][_0x53763f(0x1ce)]:case status_enums_1[_0x53763f(0x1a8)][_0x53763f(0x1a6)]:case status_enums_1[_0x53763f(0x1a8)][_0x53763f(0x1cf)]:throw new Error(_0x53763f(0x1b1)+_0x134298[_0x53763f(0x1b5)]);case status_enums_1['VeevaJobStatus'][_0x53763f(0x1c1)]:case status_enums_1['VeevaJobStatus'][_0x53763f(0x1c0)]:case status_enums_1[_0x53763f(0x1a8)][_0x53763f(0x1ba)]:_0x13c7d7[_0x53763f(0x1a2)](_0x5d8702);break;default:throw new Error(_0x53763f(0x1a7)+_0x134298[_0x53763f(0x1b5)]+'\x27');}}else throw new veeva_error_1['VeevaError'](_0xc3553a['errors']);}_0x57ec39=_0x13c7d7;}while(_0x57ec39['length']);return _0x5c9173;}}exports[a396_0x2d501b(0x1a0)]=VeevaService,VeevaService[a396_0x2d501b(0x1cc)]=0x2710,VeevaService[a396_0x2d501b(0x1b2)]=0x1f4,VeevaService[a396_0x2d501b(0x1b6)]=0x1f4;