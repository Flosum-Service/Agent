const a408_0x495b32=a408_0x5baa;(function(_0x5ed836,_0x4e3113){const _0x4a6f08=a408_0x5baa,_0x420124=_0x5ed836();while(!![]){try{const _0x403cba=parseInt(_0x4a6f08(0x146))/0x1+parseInt(_0x4a6f08(0x159))/0x2+parseInt(_0x4a6f08(0x132))/0x3+-parseInt(_0x4a6f08(0x135))/0x4+-parseInt(_0x4a6f08(0x153))/0x5*(-parseInt(_0x4a6f08(0x139))/0x6)+parseInt(_0x4a6f08(0x149))/0x7+-parseInt(_0x4a6f08(0x13c))/0x8*(parseInt(_0x4a6f08(0x14d))/0x9);if(_0x403cba===_0x4e3113)break;else _0x420124['push'](_0x420124['shift']());}catch(_0x237ce8){_0x420124['push'](_0x420124['shift']());}}}(a408_0x41db,0x7fdb1));const a408_0x3bfefc=(function(){let _0x547076=!![];return function(_0xbe70cf,_0x493f96){const _0x349cc1=_0x547076?function(){const _0x5b3d97=a408_0x5baa;if(_0x493f96){const _0x47cfb8=_0x493f96[_0x5b3d97(0x143)](_0xbe70cf,arguments);return _0x493f96=null,_0x47cfb8;}}:function(){};return _0x547076=![],_0x349cc1;};}()),a408_0x281666=a408_0x3bfefc(this,function(){const _0x2d3658=a408_0x5baa;return a408_0x281666[_0x2d3658(0x144)]()[_0x2d3658(0x14c)](_0x2d3658(0x148))[_0x2d3658(0x144)]()['constructor'](a408_0x281666)['search']('(((.+)+)+)+$');});a408_0x281666();function a408_0x5baa(_0x28e0b9,_0x5305f6){const _0x368c7e=a408_0x41db();return a408_0x5baa=function(_0x281666,_0x3bfefc){_0x281666=_0x281666-0x128;let _0x41db07=_0x368c7e[_0x281666];return _0x41db07;},a408_0x5baa(_0x28e0b9,_0x5305f6);}'use strict';function a408_0x41db(){const _0x1cfd10=['128926FbAgFH','data','SUCCESS','chunkArray','VeevaJobStatus','VeevaError','QUEUEING','executeManyVQL','application/x-www-form-urlencoded','../../shared/utils','\x20records','deleteVeevaObjectRecords','CANCELLED','Unknown\x20Job\x20status\x20:\x20\x27','length','CREATE_RECORDS_LIMIT','getJobResult','2436693MMXrZR','VeevaConstants','executeVQL','279444MMfzQB','VeevaService','post','delete','114aHgTRy','errors','_connection','256GFbXEt','ERRORS_ENCOUNTERED','get','all','log','status','../constants/veeva.constants','apply','toString','DELETE_RECORDS_LIMIT','557568IZeIuz','push','(((.+)+)+)+$','2126474cFuNan','QUEUED','__esModule','search','562986aQBRdp','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','RUNNING','JOB_STATUS_TIMEOUT','responseStatus','application/json','225590BGibvY','createVeevaObjectRecords','VeevaResponseStatus','_logger','../enums/status.enums','sleep'];a408_0x41db=function(){return _0x1cfd10;};return a408_0x41db();}Object['defineProperty'](exports,a408_0x495b32(0x14b),{'value':!![]}),exports['VeevaService']=void 0x0;const utils_1=require(a408_0x495b32(0x12a)),status_enums_1=require(a408_0x495b32(0x157)),veeva_error_1=require('../classes/errors/veeva-error'),veeva_constants_1=require(a408_0x495b32(0x142));class VeevaService{constructor({connection:_0x576c6c,logger:_0x52e6ac}){const _0x1329c8=a408_0x495b32;this[_0x1329c8(0x13b)]=_0x576c6c,this[_0x1329c8(0x156)]=_0x52e6ac;}async[a408_0x495b32(0x128)](_0x2cb83b){const _0x166a3d=a408_0x495b32,_0x396155=[];for(const _0x3f7e19 of _0x2cb83b){_0x396155['push'](this['executeVQL'](_0x3f7e19));}const _0x45e80c=await Promise[_0x166a3d(0x13f)](_0x396155);return _0x45e80c['flat']();}async[a408_0x495b32(0x134)](_0x2457c8){const _0x4bac6a=a408_0x495b32,_0x520158=[];let _0x5183f6=this[_0x4bac6a(0x13b)][_0x4bac6a(0x137)](veeva_constants_1[_0x4bac6a(0x133)]['ENDPOINT_VQL'],new URLSearchParams([['q',_0x2457c8]]),{'headers':{'Content-Type':_0x4bac6a(0x129)}}),_0x33e291=![];do{const _0x21b19a=await _0x5183f6,_0xcf1c5c=_0x21b19a[_0x4bac6a(0x15a)];if(_0xcf1c5c[_0x4bac6a(0x151)]!==status_enums_1[_0x4bac6a(0x155)]['SUCCESS'])throw new veeva_error_1[(_0x4bac6a(0x15e))](_0xcf1c5c[_0x4bac6a(0x13a)]);const {responseDetails:{next_page:_0x3760e2},data:_0x219245}=_0xcf1c5c;_0x3760e2?_0x5183f6=this[_0x4bac6a(0x13b)][_0x4bac6a(0x13e)](_0x3760e2):_0x33e291=!![],_0x520158[_0x4bac6a(0x147)](..._0x219245);}while(!_0x33e291);return _0x520158;}async[a408_0x495b32(0x154)](_0x984e57,_0x1028b4){const _0x29a4ee=a408_0x495b32,_0x4b9d68=[],_0x2973a0=(0x0,utils_1[_0x29a4ee(0x15c)])(_0x1028b4,VeevaService['CREATE_RECORDS_LIMIT']),_0x301467=_0x1028b4['length'];let _0x168b6a=0x0;for(const _0x552cdd of _0x2973a0){_0x168b6a+=_0x552cdd[_0x29a4ee(0x12f)],this['_logger'][_0x29a4ee(0x140)]('Creating\x20'+_0x168b6a+'/'+_0x301467+'\x20records.');const _0x2b91d6=await this[_0x29a4ee(0x13b)]['post'](_0x984e57,_0x552cdd),_0x3317c7=_0x2b91d6[_0x29a4ee(0x15a)];if(_0x3317c7['responseStatus']===status_enums_1[_0x29a4ee(0x155)][_0x29a4ee(0x15b)])for(const {responseStatus:_0x4d54f9,data:_0x10d363}of _0x3317c7['data']){if(_0x4d54f9===status_enums_1[_0x29a4ee(0x155)][_0x29a4ee(0x15b)])_0x4b9d68['push'](_0x10d363['id']);else throw new veeva_error_1[(_0x29a4ee(0x15e))](_0x3317c7['errors']);}else throw new veeva_error_1[(_0x29a4ee(0x15e))](_0x3317c7[_0x29a4ee(0x13a)]);}return _0x4b9d68;}async[a408_0x495b32(0x12c)](_0x57c8bb,_0x54e776){const _0x358e22=a408_0x495b32,_0x562ca1=_0x54e776['map'](_0x5cb0ac=>({'id':_0x5cb0ac})),_0x3457a6=(0x0,utils_1[_0x358e22(0x15c)])(_0x562ca1,VeevaService[_0x358e22(0x145)]);let _0x2f8a0f=0x0;for(const _0x1b2449 of _0x3457a6){_0x2f8a0f+=_0x1b2449[_0x358e22(0x12f)],this[_0x358e22(0x156)][_0x358e22(0x140)]('Deleting\x20'+_0x2f8a0f+'/'+_0x54e776['length']+_0x358e22(0x12b));const {data:_0x58ae82}=await this[_0x358e22(0x13b)][_0x358e22(0x138)](_0x57c8bb,{'headers':{'Content-Type':_0x358e22(0x152)},'data':_0x1b2449});if(_0x58ae82[_0x358e22(0x151)]===status_enums_1[_0x358e22(0x155)][_0x358e22(0x15b)])for(const _0xdf5748 of _0x58ae82[_0x358e22(0x15a)]){const {responseStatus:_0x1f68d5,errors:_0x3e61fe}=_0xdf5748;if(_0x1f68d5!==status_enums_1[_0x358e22(0x155)][_0x358e22(0x15b)])throw new veeva_error_1['VeevaError'](_0x3e61fe);}else throw new veeva_error_1['VeevaError'](_0x58ae82[_0x358e22(0x13a)]);}}async[a408_0x495b32(0x131)](_0x4aec81){const _0x3612ee=a408_0x495b32,_0x4fa084=[];do{this[_0x3612ee(0x156)][_0x3612ee(0x140)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0x3612ee(0x158)])(VeevaService[_0x3612ee(0x150)]);const _0x583873=[];for(const _0x9d0e61 of _0x4aec81){const {data:_0x144d50}=await this[_0x3612ee(0x13b)][_0x3612ee(0x13e)](_0x9d0e61);if(_0x144d50[_0x3612ee(0x151)]===status_enums_1[_0x3612ee(0x155)][_0x3612ee(0x15b)]){const {data:_0x9378d5}=_0x144d50;switch(_0x9378d5[_0x3612ee(0x141)]){case status_enums_1[_0x3612ee(0x15d)][_0x3612ee(0x15b)]:case status_enums_1[_0x3612ee(0x15d)][_0x3612ee(0x13d)]:_0x4fa084[_0x3612ee(0x147)](_0x9378d5);break;case status_enums_1[_0x3612ee(0x15d)][_0x3612ee(0x15f)]:case status_enums_1[_0x3612ee(0x15d)][_0x3612ee(0x12d)]:case status_enums_1[_0x3612ee(0x15d)]['MISSED_SCHEDULE']:throw new Error(_0x3612ee(0x14e)+_0x9378d5[_0x3612ee(0x141)]);case status_enums_1['VeevaJobStatus'][_0x3612ee(0x14a)]:case status_enums_1[_0x3612ee(0x15d)][_0x3612ee(0x14f)]:case status_enums_1[_0x3612ee(0x15d)]['SCHEDULED']:_0x583873[_0x3612ee(0x147)](_0x9d0e61);break;default:throw new Error(_0x3612ee(0x12e)+_0x9378d5['status']+'\x27');}}else throw new veeva_error_1[(_0x3612ee(0x15e))](_0x144d50[_0x3612ee(0x13a)]);}_0x4aec81=_0x583873;}while(_0x4aec81[_0x3612ee(0x12f)]);return _0x4fa084;}}exports[a408_0x495b32(0x136)]=VeevaService,VeevaService[a408_0x495b32(0x150)]=0x2710,VeevaService[a408_0x495b32(0x130)]=0x1f4,VeevaService[a408_0x495b32(0x145)]=0x1f4;