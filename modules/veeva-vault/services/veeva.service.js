const a380_0x3625f6=a380_0x491c;(function(_0x5aa6cc,_0x258c71){const _0x3e0847=a380_0x491c,_0x41b754=_0x5aa6cc();while(!![]){try{const _0x5ef160=parseInt(_0x3e0847(0xef))/0x1+-parseInt(_0x3e0847(0xd5))/0x2+parseInt(_0x3e0847(0xe8))/0x3*(-parseInt(_0x3e0847(0xfb))/0x4)+-parseInt(_0x3e0847(0xe3))/0x5+-parseInt(_0x3e0847(0xc3))/0x6+parseInt(_0x3e0847(0xf4))/0x7+parseInt(_0x3e0847(0xce))/0x8;if(_0x5ef160===_0x258c71)break;else _0x41b754['push'](_0x41b754['shift']());}catch(_0xe1d1f1){_0x41b754['push'](_0x41b754['shift']());}}}(a380_0x475c,0xda9c0));const a380_0x635de5=(function(){let _0x486693=!![];return function(_0x4c9a44,_0x25d489){const _0x3b3b30=_0x486693?function(){const _0xae7155=a380_0x491c;if(_0x25d489){const _0x389e44=_0x25d489[_0xae7155(0xda)](_0x4c9a44,arguments);return _0x25d489=null,_0x389e44;}}:function(){};return _0x486693=![],_0x3b3b30;};}()),a380_0xe2b48b=a380_0x635de5(this,function(){const _0x5bd12f=a380_0x491c;return a380_0xe2b48b[_0x5bd12f(0xf3)]()[_0x5bd12f(0xea)](_0x5bd12f(0xf6))[_0x5bd12f(0xf3)]()[_0x5bd12f(0xca)](a380_0xe2b48b)[_0x5bd12f(0xea)](_0x5bd12f(0xf6));});a380_0xe2b48b();'use strict';Object[a380_0x3625f6(0xd3)](exports,'__esModule',{'value':!![]}),exports['VeevaService']=void 0x0;function a380_0x491c(_0x66a862,_0x1858a4){const _0x24393f=a380_0x475c();return a380_0x491c=function(_0xe2b48b,_0x635de5){_0xe2b48b=_0xe2b48b-0xc2;let _0x475c49=_0x24393f[_0xe2b48b];return _0x475c49;},a380_0x491c(_0x66a862,_0x1858a4);}const utils_1=require(a380_0x3625f6(0xed)),status_enums_1=require(a380_0x3625f6(0xe0)),veeva_error_1=require('../classes/errors/veeva-error'),veeva_constants_1=require(a380_0x3625f6(0xc2));function a380_0x475c(){const _0x1a3454=['3074192gigUas','responseStatus','log','all','get','apply','_connection','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','Deleting\x20','VeevaResponseStatus','chunkArray','../enums/status.enums','Unknown\x20Job\x20status\x20:\x20\x27','SCHEDULED','4707365ThdZmb','\x20records.','executeManyVQL','VeevaError','ENDPOINT_VQL','38769eHSksR','VeevaJobStatus','search','DELETE_RECORDS_LIMIT','CREATE_RECORDS_LIMIT','../../shared/utils','sleep','1320993grmhVw','createVeevaObjectRecords','CANCELLED','executeVQL','toString','3402112kPiYoA','Creating\x20','(((.+)+)+)+$','application/x-www-form-urlencoded','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','VeevaService','status','548jYacsz','QUEUED','length','../constants/veeva.constants','4096248HsQODU','data','delete','_logger','post','push','errors','constructor','application/json','SUCCESS','MISSED_SCHEDULE','32161144AhVuev','JOB_STATUS_TIMEOUT','getJobResult','deleteVeevaObjectRecords','VeevaConstants','defineProperty','QUEUEING'];a380_0x475c=function(){return _0x1a3454;};return a380_0x475c();}class VeevaService{constructor({connection:_0x1991cd,logger:_0x386c09}){const _0xe2f9be=a380_0x3625f6;this[_0xe2f9be(0xdb)]=_0x1991cd,this[_0xe2f9be(0xc6)]=_0x386c09;}async[a380_0x3625f6(0xe5)](_0x258204){const _0x4d8efd=a380_0x3625f6,_0xebe012=[];for(const _0x31f0e9 of _0x258204){_0xebe012['push'](this['executeVQL'](_0x31f0e9));}const _0x2cc5c7=await Promise[_0x4d8efd(0xd8)](_0xebe012);return _0x2cc5c7['flat']();}async[a380_0x3625f6(0xf2)](_0xf679cf){const _0x235e4f=a380_0x3625f6,_0x19b132=[];let _0x3e5bb7=this[_0x235e4f(0xdb)][_0x235e4f(0xc7)](veeva_constants_1[_0x235e4f(0xd2)][_0x235e4f(0xe7)],new URLSearchParams([['q',_0xf679cf]]),{'headers':{'Content-Type':_0x235e4f(0xf7)}}),_0x26aa50=![];do{const _0x2947ce=await _0x3e5bb7,_0x39a669=_0x2947ce['data'];if(_0x39a669['responseStatus']!==status_enums_1[_0x235e4f(0xde)]['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x39a669[_0x235e4f(0xc9)]);const {responseDetails:{next_page:_0x3c1be2},data:_0x5b3e79}=_0x39a669;_0x3c1be2?_0x3e5bb7=this['_connection'][_0x235e4f(0xd9)](_0x3c1be2):_0x26aa50=!![],_0x19b132['push'](..._0x5b3e79);}while(!_0x26aa50);return _0x19b132;}async[a380_0x3625f6(0xf0)](_0x26ae15,_0xe0fefd){const _0x4d79ac=a380_0x3625f6,_0x3cd163=[],_0x1699e0=(0x0,utils_1[_0x4d79ac(0xdf)])(_0xe0fefd,VeevaService[_0x4d79ac(0xec)]),_0x273c9f=_0xe0fefd[_0x4d79ac(0xfd)];let _0x55a542=0x0;for(const _0xf71123 of _0x1699e0){_0x55a542+=_0xf71123[_0x4d79ac(0xfd)],this['_logger']['log'](_0x4d79ac(0xf5)+_0x55a542+'/'+_0x273c9f+_0x4d79ac(0xe4));const _0x3f9da1=await this['_connection'][_0x4d79ac(0xc7)](_0x26ae15,_0xf71123),_0x203a6c=_0x3f9da1[_0x4d79ac(0xc4)];if(_0x203a6c[_0x4d79ac(0xd6)]===status_enums_1['VeevaResponseStatus'][_0x4d79ac(0xcc)])for(const {responseStatus:_0xdab612,data:_0xc84077}of _0x203a6c[_0x4d79ac(0xc4)]){if(_0xdab612===status_enums_1[_0x4d79ac(0xde)]['SUCCESS'])_0x3cd163[_0x4d79ac(0xc8)](_0xc84077['id']);else throw new veeva_error_1['VeevaError'](_0x203a6c['errors']);}else throw new veeva_error_1['VeevaError'](_0x203a6c['errors']);}return _0x3cd163;}async[a380_0x3625f6(0xd1)](_0x5dd334,_0x22118f){const _0x390baa=a380_0x3625f6,_0x1ca61c=_0x22118f['map'](_0x405b94=>({'id':_0x405b94})),_0x2d7b7d=(0x0,utils_1[_0x390baa(0xdf)])(_0x1ca61c,VeevaService[_0x390baa(0xeb)]);let _0x4be3d1=0x0;for(const _0x1d4a43 of _0x2d7b7d){_0x4be3d1+=_0x1d4a43[_0x390baa(0xfd)],this['_logger']['log'](_0x390baa(0xdd)+_0x4be3d1+'/'+_0x22118f['length']+'\x20records');const {data:_0x1b2688}=await this['_connection'][_0x390baa(0xc5)](_0x5dd334,{'headers':{'Content-Type':_0x390baa(0xcb)},'data':_0x1d4a43});if(_0x1b2688['responseStatus']===status_enums_1[_0x390baa(0xde)]['SUCCESS'])for(const _0x59cd60 of _0x1b2688['data']){const {responseStatus:_0x131daa,errors:_0x10ffcc}=_0x59cd60;if(_0x131daa!==status_enums_1['VeevaResponseStatus'][_0x390baa(0xcc)])throw new veeva_error_1[(_0x390baa(0xe6))](_0x10ffcc);}else throw new veeva_error_1[(_0x390baa(0xe6))](_0x1b2688[_0x390baa(0xc9)]);}}async[a380_0x3625f6(0xd0)](_0x5e0d91){const _0x22150e=a380_0x3625f6,_0x2d8b58=[];do{this[_0x22150e(0xc6)][_0x22150e(0xd7)](_0x22150e(0xf8)),await(0x0,utils_1[_0x22150e(0xee)])(VeevaService[_0x22150e(0xcf)]);const _0x26e48b=[];for(const _0x434e46 of _0x5e0d91){const {data:_0x5947ad}=await this[_0x22150e(0xdb)][_0x22150e(0xd9)](_0x434e46);if(_0x5947ad[_0x22150e(0xd6)]===status_enums_1[_0x22150e(0xde)][_0x22150e(0xcc)]){const {data:_0x3405c}=_0x5947ad;switch(_0x3405c[_0x22150e(0xfa)]){case status_enums_1[_0x22150e(0xe9)][_0x22150e(0xcc)]:case status_enums_1[_0x22150e(0xe9)]['ERRORS_ENCOUNTERED']:_0x2d8b58[_0x22150e(0xc8)](_0x3405c);break;case status_enums_1[_0x22150e(0xe9)][_0x22150e(0xd4)]:case status_enums_1[_0x22150e(0xe9)][_0x22150e(0xf1)]:case status_enums_1[_0x22150e(0xe9)][_0x22150e(0xcd)]:throw new Error(_0x22150e(0xdc)+_0x3405c[_0x22150e(0xfa)]);case status_enums_1[_0x22150e(0xe9)][_0x22150e(0xfc)]:case status_enums_1[_0x22150e(0xe9)]['RUNNING']:case status_enums_1['VeevaJobStatus'][_0x22150e(0xe2)]:_0x26e48b['push'](_0x434e46);break;default:throw new Error(_0x22150e(0xe1)+_0x3405c[_0x22150e(0xfa)]+'\x27');}}else throw new veeva_error_1[(_0x22150e(0xe6))](_0x5947ad[_0x22150e(0xc9)]);}_0x5e0d91=_0x26e48b;}while(_0x5e0d91[_0x22150e(0xfd)]);return _0x2d8b58;}}exports[a380_0x3625f6(0xf9)]=VeevaService,VeevaService[a380_0x3625f6(0xcf)]=0x2710,VeevaService[a380_0x3625f6(0xec)]=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;