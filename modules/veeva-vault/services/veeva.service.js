const a407_0x49b80f=a407_0x20da;(function(_0x58af1e,_0x3e0e26){const _0x2625e8=a407_0x20da,_0x43aeca=_0x58af1e();while(!![]){try{const _0x4d38b2=-parseInt(_0x2625e8(0x14d))/0x1*(parseInt(_0x2625e8(0x157))/0x2)+parseInt(_0x2625e8(0x136))/0x3*(-parseInt(_0x2625e8(0x160))/0x4)+-parseInt(_0x2625e8(0x161))/0x5*(-parseInt(_0x2625e8(0x142))/0x6)+-parseInt(_0x2625e8(0x140))/0x7+parseInt(_0x2625e8(0x13a))/0x8+-parseInt(_0x2625e8(0x135))/0x9+parseInt(_0x2625e8(0x14c))/0xa;if(_0x4d38b2===_0x3e0e26)break;else _0x43aeca['push'](_0x43aeca['shift']());}catch(_0x378730){_0x43aeca['push'](_0x43aeca['shift']());}}}(a407_0x56c1,0x4b638));const a407_0x5d7b7d=(function(){let _0x49d388=!![];return function(_0x1c054b,_0x46dd5b){const _0x3c61ec=_0x49d388?function(){const _0x2a42a0=a407_0x20da;if(_0x46dd5b){const _0x5ad835=_0x46dd5b[_0x2a42a0(0x144)](_0x1c054b,arguments);return _0x46dd5b=null,_0x5ad835;}}:function(){};return _0x49d388=![],_0x3c61ec;};}()),a407_0xbd98c7=a407_0x5d7b7d(this,function(){const _0x49f7af=a407_0x20da;return a407_0xbd98c7[_0x49f7af(0x155)]()['search'](_0x49f7af(0x13c))['toString']()['constructor'](a407_0xbd98c7)[_0x49f7af(0x134)](_0x49f7af(0x13c));});function a407_0x56c1(){const _0x38722f=['SUCCESS','ENDPOINT_VQL','map','data','search','492489uIHiBh','1771959fDIjWv','errors','QUEUED','../constants/veeva.constants','121664bTOgua','status','(((.+)+)+)+$','VeevaResponseStatus','MISSED_SCHEDULE','chunkArray','83356ueLbuW','VeevaConstants','1923666elhPlz','VeevaService','apply','defineProperty','Deleting\x20','executeVQL','push','DELETE_RECORDS_LIMIT','responseStatus','application/x-www-form-urlencoded','12134590zHApPV','4YEnVJk','Unknown\x20Job\x20status\x20:\x20\x27','_connection','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','deleteVeevaObjectRecords','VeevaError','application/json','get','toString','all','291602FVsEkl','../classes/errors/veeva-error','ERRORS_ENCOUNTERED','createVeevaObjectRecords','CANCELLED','VeevaJobStatus','post','flat','_logger','4RAEsBt','5llDjBh','log','length','CREATE_RECORDS_LIMIT','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','__esModule','../enums/status.enums','JOB_STATUS_TIMEOUT'];a407_0x56c1=function(){return _0x38722f;};return a407_0x56c1();}a407_0xbd98c7();function a407_0x20da(_0x50e6f6,_0xdf6da4){const _0x2024d5=a407_0x56c1();return a407_0x20da=function(_0xbd98c7,_0x5d7b7d){_0xbd98c7=_0xbd98c7-0x12e;let _0x56c10=_0x2024d5[_0xbd98c7];return _0x56c10;},a407_0x20da(_0x50e6f6,_0xdf6da4);}'use strict';Object[a407_0x49b80f(0x145)](exports,a407_0x49b80f(0x166),{'value':!![]}),exports[a407_0x49b80f(0x143)]=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a407_0x49b80f(0x12e)),veeva_error_1=require(a407_0x49b80f(0x158)),veeva_constants_1=require(a407_0x49b80f(0x139));class VeevaService{constructor({connection:_0x3679a1,logger:_0x28f984}){const _0x464d57=a407_0x49b80f;this[_0x464d57(0x14f)]=_0x3679a1,this[_0x464d57(0x15f)]=_0x28f984;}async['executeManyVQL'](_0x43824d){const _0x2abf8c=a407_0x49b80f,_0x3aea7a=[];for(const _0x2d5514 of _0x43824d){_0x3aea7a[_0x2abf8c(0x148)](this[_0x2abf8c(0x147)](_0x2d5514));}const _0x1f120e=await Promise[_0x2abf8c(0x156)](_0x3aea7a);return _0x1f120e[_0x2abf8c(0x15e)]();}async[a407_0x49b80f(0x147)](_0x49492f){const _0xc9a42=a407_0x49b80f,_0xd30fd9=[];let _0x1f2d49=this[_0xc9a42(0x14f)]['post'](veeva_constants_1[_0xc9a42(0x141)][_0xc9a42(0x131)],new URLSearchParams([['q',_0x49492f]]),{'headers':{'Content-Type':_0xc9a42(0x14b)}}),_0x20e68b=![];do{const _0x4533c9=await _0x1f2d49,_0x214db6=_0x4533c9[_0xc9a42(0x133)];if(_0x214db6[_0xc9a42(0x14a)]!==status_enums_1[_0xc9a42(0x13d)]['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x214db6[_0xc9a42(0x137)]);const {responseDetails:{next_page:_0x4e54f7},data:_0x3e67c0}=_0x214db6;_0x4e54f7?_0x1f2d49=this[_0xc9a42(0x14f)][_0xc9a42(0x154)](_0x4e54f7):_0x20e68b=!![],_0xd30fd9['push'](..._0x3e67c0);}while(!_0x20e68b);return _0xd30fd9;}async[a407_0x49b80f(0x15a)](_0x141679,_0x20e1dd){const _0x1b0a98=a407_0x49b80f,_0x3c6f65=[],_0x425e63=(0x0,utils_1[_0x1b0a98(0x13f)])(_0x20e1dd,VeevaService[_0x1b0a98(0x164)]),_0x49aa22=_0x20e1dd[_0x1b0a98(0x163)];let _0x3aa9f3=0x0;for(const _0x97d24a of _0x425e63){_0x3aa9f3+=_0x97d24a[_0x1b0a98(0x163)],this[_0x1b0a98(0x15f)][_0x1b0a98(0x162)]('Creating\x20'+_0x3aa9f3+'/'+_0x49aa22+'\x20records.');const _0x457054=await this['_connection'][_0x1b0a98(0x15d)](_0x141679,_0x97d24a),_0x4f4440=_0x457054[_0x1b0a98(0x133)];if(_0x4f4440['responseStatus']===status_enums_1[_0x1b0a98(0x13d)]['SUCCESS'])for(const {responseStatus:_0x432347,data:_0x362d6c}of _0x4f4440[_0x1b0a98(0x133)]){if(_0x432347===status_enums_1[_0x1b0a98(0x13d)][_0x1b0a98(0x130)])_0x3c6f65[_0x1b0a98(0x148)](_0x362d6c['id']);else throw new veeva_error_1['VeevaError'](_0x4f4440[_0x1b0a98(0x137)]);}else throw new veeva_error_1['VeevaError'](_0x4f4440['errors']);}return _0x3c6f65;}async[a407_0x49b80f(0x151)](_0x351dcc,_0x5538d6){const _0x4595fa=a407_0x49b80f,_0x45d0e0=_0x5538d6[_0x4595fa(0x132)](_0x58328b=>({'id':_0x58328b})),_0x31fbbb=(0x0,utils_1[_0x4595fa(0x13f)])(_0x45d0e0,VeevaService[_0x4595fa(0x149)]);let _0x42143d=0x0;for(const _0x43fdac of _0x31fbbb){_0x42143d+=_0x43fdac[_0x4595fa(0x163)],this[_0x4595fa(0x15f)][_0x4595fa(0x162)](_0x4595fa(0x146)+_0x42143d+'/'+_0x5538d6[_0x4595fa(0x163)]+'\x20records');const {data:_0x4f1d6b}=await this[_0x4595fa(0x14f)]['delete'](_0x351dcc,{'headers':{'Content-Type':_0x4595fa(0x153)},'data':_0x43fdac});if(_0x4f1d6b[_0x4595fa(0x14a)]===status_enums_1[_0x4595fa(0x13d)][_0x4595fa(0x130)])for(const _0x47765c of _0x4f1d6b['data']){const {responseStatus:_0x2ed399,errors:_0x2aae95}=_0x47765c;if(_0x2ed399!==status_enums_1['VeevaResponseStatus'][_0x4595fa(0x130)])throw new veeva_error_1[(_0x4595fa(0x152))](_0x2aae95);}else throw new veeva_error_1[(_0x4595fa(0x152))](_0x4f1d6b[_0x4595fa(0x137)]);}}async['getJobResult'](_0x4e963c){const _0x559931=a407_0x49b80f,_0x2bcd86=[];do{this[_0x559931(0x15f)][_0x559931(0x162)](_0x559931(0x150)),await(0x0,utils_1['sleep'])(VeevaService[_0x559931(0x12f)]);const _0x479136=[];for(const _0x3ec185 of _0x4e963c){const {data:_0x5a8136}=await this['_connection'][_0x559931(0x154)](_0x3ec185);if(_0x5a8136[_0x559931(0x14a)]===status_enums_1['VeevaResponseStatus']['SUCCESS']){const {data:_0x229582}=_0x5a8136;switch(_0x229582[_0x559931(0x13b)]){case status_enums_1[_0x559931(0x15c)]['SUCCESS']:case status_enums_1[_0x559931(0x15c)][_0x559931(0x159)]:_0x2bcd86[_0x559931(0x148)](_0x229582);break;case status_enums_1[_0x559931(0x15c)]['QUEUEING']:case status_enums_1[_0x559931(0x15c)][_0x559931(0x15b)]:case status_enums_1['VeevaJobStatus'][_0x559931(0x13e)]:throw new Error(_0x559931(0x165)+_0x229582[_0x559931(0x13b)]);case status_enums_1[_0x559931(0x15c)][_0x559931(0x138)]:case status_enums_1[_0x559931(0x15c)]['RUNNING']:case status_enums_1[_0x559931(0x15c)]['SCHEDULED']:_0x479136[_0x559931(0x148)](_0x3ec185);break;default:throw new Error(_0x559931(0x14e)+_0x229582[_0x559931(0x13b)]+'\x27');}}else throw new veeva_error_1[(_0x559931(0x152))](_0x5a8136[_0x559931(0x137)]);}_0x4e963c=_0x479136;}while(_0x4e963c[_0x559931(0x163)]);return _0x2bcd86;}}exports['VeevaService']=VeevaService,VeevaService[a407_0x49b80f(0x12f)]=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService[a407_0x49b80f(0x149)]=0x1f4;