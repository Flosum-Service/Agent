const a408_0xfc4943=a408_0x4ca6;(function(_0x1c31a6,_0x3bd122){const _0x104766=a408_0x4ca6,_0x427703=_0x1c31a6();while(!![]){try{const _0x4b27b7=-parseInt(_0x104766(0x1f1))/0x1+parseInt(_0x104766(0x1e1))/0x2*(-parseInt(_0x104766(0x1ef))/0x3)+parseInt(_0x104766(0x219))/0x4+parseInt(_0x104766(0x204))/0x5+-parseInt(_0x104766(0x21b))/0x6*(-parseInt(_0x104766(0x1f8))/0x7)+parseInt(_0x104766(0x1ee))/0x8+parseInt(_0x104766(0x1fa))/0x9*(-parseInt(_0x104766(0x20b))/0xa);if(_0x4b27b7===_0x3bd122)break;else _0x427703['push'](_0x427703['shift']());}catch(_0x34801b){_0x427703['push'](_0x427703['shift']());}}}(a408_0x4b90,0x4e99c));const a408_0x59794d=(function(){let _0xcbb83e=!![];return function(_0x201aaf,_0x5cfacc){const _0x4b6b2a=_0xcbb83e?function(){if(_0x5cfacc){const _0x353b2b=_0x5cfacc['apply'](_0x201aaf,arguments);return _0x5cfacc=null,_0x353b2b;}}:function(){};return _0xcbb83e=![],_0x4b6b2a;};}()),a408_0x418f74=a408_0x59794d(this,function(){const _0x29df18=a408_0x4ca6;return a408_0x418f74['toString']()[_0x29df18(0x1fb)]('(((.+)+)+)+$')[_0x29df18(0x218)]()[_0x29df18(0x20e)](a408_0x418f74)[_0x29df18(0x1fb)]('(((.+)+)+)+$');});a408_0x418f74();function a408_0x4b90(){const _0x39de50=['DELETE_RECORDS_LIMIT','log','SCHEDULED','chunkArray','ERRORS_ENCOUNTERED','getJobResult','VeevaError','push','../constants/veeva.constants','toString','1609016QrVcHZ','VeevaService','2615232zLBrnB','ENDPOINT_VQL','map','1516VoZDnL','data','__esModule','VeevaJobStatus','Creating\x20','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','_connection','../classes/errors/veeva-error','status','QUEUEING','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','../../shared/utils','flat','432872MhKHtj','1077iZYPvi','executeVQL','559621iUUlsV','CANCELLED','length','\x20records','VeevaConstants','QUEUED','errors','7PJwLAe','deleteVeevaObjectRecords','43209yftSkh','search','VeevaResponseStatus','responseStatus','sleep','\x20records.','MISSED_SCHEDULE','post','_logger','get','3107655ksDvjW','SUCCESS','Unknown\x20Job\x20status\x20:\x20\x27','application/json','CREATE_RECORDS_LIMIT','defineProperty','delete','750hmRJxS','application/x-www-form-urlencoded','JOB_STATUS_TIMEOUT','constructor'];a408_0x4b90=function(){return _0x39de50;};return a408_0x4b90();}'use strict';Object[a408_0xfc4943(0x209)](exports,a408_0xfc4943(0x1e3),{'value':!![]}),exports[a408_0xfc4943(0x21a)]=void 0x0;const utils_1=require(a408_0xfc4943(0x1ec)),status_enums_1=require('../enums/status.enums'),veeva_error_1=require(a408_0xfc4943(0x1e8)),veeva_constants_1=require(a408_0xfc4943(0x217));class VeevaService{constructor({connection:_0x1a3651,logger:_0x557732}){const _0x22f75c=a408_0xfc4943;this[_0x22f75c(0x1e7)]=_0x1a3651,this[_0x22f75c(0x202)]=_0x557732;}async['executeManyVQL'](_0x1bcd69){const _0x3d5fd5=a408_0xfc4943,_0x510620=[];for(const _0x13c736 of _0x1bcd69){_0x510620[_0x3d5fd5(0x216)](this['executeVQL'](_0x13c736));}const _0xd5ef65=await Promise['all'](_0x510620);return _0xd5ef65[_0x3d5fd5(0x1ed)]();}async[a408_0xfc4943(0x1f0)](_0x50ee3e){const _0x16d821=a408_0xfc4943,_0x9ad06=[];let _0x33cfcb=this[_0x16d821(0x1e7)]['post'](veeva_constants_1[_0x16d821(0x1f5)][_0x16d821(0x1df)],new URLSearchParams([['q',_0x50ee3e]]),{'headers':{'Content-Type':_0x16d821(0x20c)}}),_0x4763be=![];do{const _0x2a6a15=await _0x33cfcb,_0x19cd08=_0x2a6a15['data'];if(_0x19cd08[_0x16d821(0x1fd)]!==status_enums_1[_0x16d821(0x1fc)][_0x16d821(0x205)])throw new veeva_error_1[(_0x16d821(0x215))](_0x19cd08[_0x16d821(0x1f7)]);const {responseDetails:{next_page:_0x149be8},data:_0x4bf5ae}=_0x19cd08;_0x149be8?_0x33cfcb=this[_0x16d821(0x1e7)][_0x16d821(0x203)](_0x149be8):_0x4763be=!![],_0x9ad06[_0x16d821(0x216)](..._0x4bf5ae);}while(!_0x4763be);return _0x9ad06;}async['createVeevaObjectRecords'](_0x80394f,_0x24405f){const _0x59f6dc=a408_0xfc4943,_0x22608b=[],_0x42b8ac=(0x0,utils_1[_0x59f6dc(0x212)])(_0x24405f,VeevaService['CREATE_RECORDS_LIMIT']),_0x3f5551=_0x24405f[_0x59f6dc(0x1f3)];let _0x31ce4c=0x0;for(const _0x2891e6 of _0x42b8ac){_0x31ce4c+=_0x2891e6[_0x59f6dc(0x1f3)],this['_logger'][_0x59f6dc(0x210)](_0x59f6dc(0x1e5)+_0x31ce4c+'/'+_0x3f5551+_0x59f6dc(0x1ff));const _0x4cb7ec=await this[_0x59f6dc(0x1e7)][_0x59f6dc(0x201)](_0x80394f,_0x2891e6),_0x2e9aad=_0x4cb7ec[_0x59f6dc(0x1e2)];if(_0x2e9aad[_0x59f6dc(0x1fd)]===status_enums_1['VeevaResponseStatus'][_0x59f6dc(0x205)])for(const {responseStatus:_0x562b11,data:_0x3f5aa5}of _0x2e9aad[_0x59f6dc(0x1e2)]){if(_0x562b11===status_enums_1[_0x59f6dc(0x1fc)][_0x59f6dc(0x205)])_0x22608b[_0x59f6dc(0x216)](_0x3f5aa5['id']);else throw new veeva_error_1[(_0x59f6dc(0x215))](_0x2e9aad['errors']);}else throw new veeva_error_1['VeevaError'](_0x2e9aad[_0x59f6dc(0x1f7)]);}return _0x22608b;}async[a408_0xfc4943(0x1f9)](_0x1e3c95,_0x1abb1d){const _0x4cedff=a408_0xfc4943,_0x302e5a=_0x1abb1d[_0x4cedff(0x1e0)](_0x3e5fb2=>({'id':_0x3e5fb2})),_0x3a670a=(0x0,utils_1['chunkArray'])(_0x302e5a,VeevaService[_0x4cedff(0x20f)]);let _0x52b2e4=0x0;for(const _0x1f7926 of _0x3a670a){_0x52b2e4+=_0x1f7926[_0x4cedff(0x1f3)],this[_0x4cedff(0x202)]['log']('Deleting\x20'+_0x52b2e4+'/'+_0x1abb1d[_0x4cedff(0x1f3)]+_0x4cedff(0x1f4));const {data:_0x3338a0}=await this['_connection'][_0x4cedff(0x20a)](_0x1e3c95,{'headers':{'Content-Type':_0x4cedff(0x207)},'data':_0x1f7926});if(_0x3338a0[_0x4cedff(0x1fd)]===status_enums_1[_0x4cedff(0x1fc)][_0x4cedff(0x205)])for(const _0x58bd09 of _0x3338a0[_0x4cedff(0x1e2)]){const {responseStatus:_0x10847d,errors:_0x17b605}=_0x58bd09;if(_0x10847d!==status_enums_1[_0x4cedff(0x1fc)]['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x17b605);}else throw new veeva_error_1[(_0x4cedff(0x215))](_0x3338a0[_0x4cedff(0x1f7)]);}}async[a408_0xfc4943(0x214)](_0x4d7216){const _0x205dea=a408_0xfc4943,_0x34c9a6=[];do{this['_logger']['log'](_0x205dea(0x1e6)),await(0x0,utils_1[_0x205dea(0x1fe)])(VeevaService[_0x205dea(0x20d)]);const _0x31417d=[];for(const _0x5208cc of _0x4d7216){const {data:_0xa7de6a}=await this[_0x205dea(0x1e7)][_0x205dea(0x203)](_0x5208cc);if(_0xa7de6a['responseStatus']===status_enums_1[_0x205dea(0x1fc)]['SUCCESS']){const {data:_0x3054c0}=_0xa7de6a;switch(_0x3054c0[_0x205dea(0x1e9)]){case status_enums_1[_0x205dea(0x1e4)]['SUCCESS']:case status_enums_1[_0x205dea(0x1e4)][_0x205dea(0x213)]:_0x34c9a6[_0x205dea(0x216)](_0x3054c0);break;case status_enums_1['VeevaJobStatus'][_0x205dea(0x1ea)]:case status_enums_1[_0x205dea(0x1e4)][_0x205dea(0x1f2)]:case status_enums_1['VeevaJobStatus'][_0x205dea(0x200)]:throw new Error(_0x205dea(0x1eb)+_0x3054c0['status']);case status_enums_1['VeevaJobStatus'][_0x205dea(0x1f6)]:case status_enums_1[_0x205dea(0x1e4)]['RUNNING']:case status_enums_1[_0x205dea(0x1e4)][_0x205dea(0x211)]:_0x31417d[_0x205dea(0x216)](_0x5208cc);break;default:throw new Error(_0x205dea(0x206)+_0x3054c0[_0x205dea(0x1e9)]+'\x27');}}else throw new veeva_error_1[(_0x205dea(0x215))](_0xa7de6a['errors']);}_0x4d7216=_0x31417d;}while(_0x4d7216[_0x205dea(0x1f3)]);return _0x34c9a6;}}function a408_0x4ca6(_0x1606bf,_0x588425){const _0x474aa7=a408_0x4b90();return a408_0x4ca6=function(_0x418f74,_0x59794d){_0x418f74=_0x418f74-0x1df;let _0x4b906b=_0x474aa7[_0x418f74];return _0x4b906b;},a408_0x4ca6(_0x1606bf,_0x588425);}exports[a408_0xfc4943(0x21a)]=VeevaService,VeevaService['JOB_STATUS_TIMEOUT']=0x2710,VeevaService[a408_0xfc4943(0x208)]=0x1f4,VeevaService[a408_0xfc4943(0x20f)]=0x1f4;