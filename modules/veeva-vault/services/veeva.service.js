const a409_0x5dedf9=a409_0x12c4;(function(_0x593cd8,_0x142aa5){const _0x4171a6=a409_0x12c4,_0x19904d=_0x593cd8();while(!![]){try{const _0x254095=-parseInt(_0x4171a6(0xe7))/0x1*(parseInt(_0x4171a6(0xee))/0x2)+-parseInt(_0x4171a6(0xea))/0x3+parseInt(_0x4171a6(0xd7))/0x4+-parseInt(_0x4171a6(0xf7))/0x5+parseInt(_0x4171a6(0xce))/0x6*(-parseInt(_0x4171a6(0xe5))/0x7)+-parseInt(_0x4171a6(0xfa))/0x8+parseInt(_0x4171a6(0xca))/0x9*(parseInt(_0x4171a6(0xe0))/0xa);if(_0x254095===_0x142aa5)break;else _0x19904d['push'](_0x19904d['shift']());}catch(_0x102218){_0x19904d['push'](_0x19904d['shift']());}}}(a409_0x583b,0x1c36d));const a409_0x580bb7=(function(){let _0x2649a0=!![];return function(_0x4e7360,_0x10ef77){const _0xf42cf2=_0x2649a0?function(){const _0x475ecf=a409_0x12c4;if(_0x10ef77){const _0x2cb4bf=_0x10ef77[_0x475ecf(0xcd)](_0x4e7360,arguments);return _0x10ef77=null,_0x2cb4bf;}}:function(){};return _0x2649a0=![],_0xf42cf2;};}()),a409_0x47f8bf=a409_0x580bb7(this,function(){const _0x3d2de9=a409_0x12c4;return a409_0x47f8bf['toString']()[_0x3d2de9(0xdb)](_0x3d2de9(0xde))[_0x3d2de9(0xf6)]()['constructor'](a409_0x47f8bf)[_0x3d2de9(0xdb)](_0x3d2de9(0xde));});a409_0x47f8bf();function a409_0x12c4(_0x45fd44,_0x1e130b){const _0x370e46=a409_0x583b();return a409_0x12c4=function(_0x47f8bf,_0x580bb7){_0x47f8bf=_0x47f8bf-0xc5;let _0x583bf2=_0x370e46[_0x47f8bf];return _0x583bf2;},a409_0x12c4(_0x45fd44,_0x1e130b);}'use strict';Object[a409_0x5dedf9(0xd1)](exports,a409_0x5dedf9(0xfd),{'value':!![]}),exports[a409_0x5dedf9(0xc9)]=void 0x0;const utils_1=require(a409_0x5dedf9(0xc5)),status_enums_1=require(a409_0x5dedf9(0xdd)),veeva_error_1=require(a409_0x5dedf9(0xd6)),veeva_constants_1=require(a409_0x5dedf9(0xf9));class VeevaService{constructor({connection:_0x3ff0c7,logger:_0x292514}){const _0x26cceb=a409_0x5dedf9;this[_0x26cceb(0xe9)]=_0x3ff0c7,this['_logger']=_0x292514;}async[a409_0x5dedf9(0xd0)](_0x423c80){const _0x53b96b=a409_0x5dedf9,_0x1e59ec=[];for(const _0x5a48a6 of _0x423c80){_0x1e59ec[_0x53b96b(0xf0)](this['executeVQL'](_0x5a48a6));}const _0x4d3c2c=await Promise[_0x53b96b(0xd9)](_0x1e59ec);return _0x4d3c2c[_0x53b96b(0xdf)]();}async[a409_0x5dedf9(0xda)](_0x117f9a){const _0x190aee=a409_0x5dedf9,_0x399cc5=[];let _0x132900=this['_connection'][_0x190aee(0xcc)](veeva_constants_1[_0x190aee(0xe6)][_0x190aee(0xe8)],new URLSearchParams([['q',_0x117f9a]]),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}}),_0x26bc03=![];do{const _0x1001fe=await _0x132900,_0xffec16=_0x1001fe[_0x190aee(0xc8)];if(_0xffec16[_0x190aee(0xef)]!==status_enums_1['VeevaResponseStatus'][_0x190aee(0xec)])throw new veeva_error_1[(_0x190aee(0xc6))](_0xffec16['errors']);const {responseDetails:{next_page:_0x30ad45},data:_0x17e302}=_0xffec16;_0x30ad45?_0x132900=this[_0x190aee(0xe9)][_0x190aee(0xdc)](_0x30ad45):_0x26bc03=!![],_0x399cc5['push'](..._0x17e302);}while(!_0x26bc03);return _0x399cc5;}async[a409_0x5dedf9(0x102)](_0x20b551,_0x5ce1ff){const _0x17e49d=a409_0x5dedf9,_0x1affb1=[],_0x1962bf=(0x0,utils_1[_0x17e49d(0xe4)])(_0x5ce1ff,VeevaService[_0x17e49d(0xcb)]),_0x5bc133=_0x5ce1ff[_0x17e49d(0x103)];let _0x11abc3=0x0;for(const _0x24c014 of _0x1962bf){_0x11abc3+=_0x24c014[_0x17e49d(0x103)],this[_0x17e49d(0xf5)][_0x17e49d(0xc7)](_0x17e49d(0xe2)+_0x11abc3+'/'+_0x5bc133+_0x17e49d(0xeb));const _0x5a800d=await this['_connection'][_0x17e49d(0xcc)](_0x20b551,_0x24c014),_0x3dd40a=_0x5a800d[_0x17e49d(0xc8)];if(_0x3dd40a[_0x17e49d(0xef)]===status_enums_1['VeevaResponseStatus'][_0x17e49d(0xec)])for(const {responseStatus:_0x30d019,data:_0x24b4c3}of _0x3dd40a[_0x17e49d(0xc8)]){if(_0x30d019===status_enums_1[_0x17e49d(0x100)]['SUCCESS'])_0x1affb1[_0x17e49d(0xf0)](_0x24b4c3['id']);else throw new veeva_error_1['VeevaError'](_0x3dd40a['errors']);}else throw new veeva_error_1['VeevaError'](_0x3dd40a[_0x17e49d(0xd5)]);}return _0x1affb1;}async['deleteVeevaObjectRecords'](_0x26e8c7,_0x2a0f62){const _0x154cb1=a409_0x5dedf9,_0x3ff571=_0x2a0f62[_0x154cb1(0xcf)](_0x14f821=>({'id':_0x14f821})),_0x1b15fc=(0x0,utils_1[_0x154cb1(0xe4)])(_0x3ff571,VeevaService[_0x154cb1(0xd3)]);let _0x52dfa=0x0;for(const _0x4326a2 of _0x1b15fc){_0x52dfa+=_0x4326a2[_0x154cb1(0x103)],this['_logger'][_0x154cb1(0xc7)](_0x154cb1(0xf2)+_0x52dfa+'/'+_0x2a0f62[_0x154cb1(0x103)]+_0x154cb1(0xff));const {data:_0x463233}=await this[_0x154cb1(0xe9)]['delete'](_0x26e8c7,{'headers':{'Content-Type':_0x154cb1(0xd8)},'data':_0x4326a2});if(_0x463233[_0x154cb1(0xef)]===status_enums_1[_0x154cb1(0x100)]['SUCCESS'])for(const _0x102182 of _0x463233[_0x154cb1(0xc8)]){const {responseStatus:_0x339f71,errors:_0x21b3e8}=_0x102182;if(_0x339f71!==status_enums_1[_0x154cb1(0x100)][_0x154cb1(0xec)])throw new veeva_error_1[(_0x154cb1(0xc6))](_0x21b3e8);}else throw new veeva_error_1[(_0x154cb1(0xc6))](_0x463233['errors']);}}async['getJobResult'](_0x1c5d67){const _0x1ac4ec=a409_0x5dedf9,_0x35a6be=[];do{this['_logger'][_0x1ac4ec(0xc7)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0x1ac4ec(0xed)])(VeevaService[_0x1ac4ec(0x101)]);const _0x2ac8d7=[];for(const _0x56b21b of _0x1c5d67){const {data:_0x14ca2a}=await this[_0x1ac4ec(0xe9)][_0x1ac4ec(0xdc)](_0x56b21b);if(_0x14ca2a['responseStatus']===status_enums_1['VeevaResponseStatus'][_0x1ac4ec(0xec)]){const {data:_0x500d94}=_0x14ca2a;switch(_0x500d94[_0x1ac4ec(0xfe)]){case status_enums_1[_0x1ac4ec(0xf3)][_0x1ac4ec(0xec)]:case status_enums_1['VeevaJobStatus'][_0x1ac4ec(0xe1)]:_0x35a6be[_0x1ac4ec(0xf0)](_0x500d94);break;case status_enums_1[_0x1ac4ec(0xf3)][_0x1ac4ec(0xf8)]:case status_enums_1['VeevaJobStatus'][_0x1ac4ec(0xd2)]:case status_enums_1[_0x1ac4ec(0xf3)][_0x1ac4ec(0xf4)]:throw new Error(_0x1ac4ec(0xfc)+_0x500d94[_0x1ac4ec(0xfe)]);case status_enums_1[_0x1ac4ec(0xf3)][_0x1ac4ec(0xfb)]:case status_enums_1[_0x1ac4ec(0xf3)][_0x1ac4ec(0xf1)]:case status_enums_1[_0x1ac4ec(0xf3)][_0x1ac4ec(0xd4)]:_0x2ac8d7[_0x1ac4ec(0xf0)](_0x56b21b);break;default:throw new Error(_0x1ac4ec(0xe3)+_0x500d94[_0x1ac4ec(0xfe)]+'\x27');}}else throw new veeva_error_1[(_0x1ac4ec(0xc6))](_0x14ca2a['errors']);}_0x1c5d67=_0x2ac8d7;}while(_0x1c5d67['length']);return _0x35a6be;}}exports[a409_0x5dedf9(0xc9)]=VeevaService,VeevaService[a409_0x5dedf9(0x101)]=0x2710,VeevaService[a409_0x5dedf9(0xcb)]=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;function a409_0x583b(){const _0x24e38e=['push','RUNNING','Deleting\x20','VeevaJobStatus','MISSED_SCHEDULE','_logger','toString','834705MfmVRm','QUEUEING','../constants/veeva.constants','529752jjtqlz','QUEUED','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','__esModule','status','\x20records','VeevaResponseStatus','JOB_STATUS_TIMEOUT','createVeevaObjectRecords','length','../../shared/utils','VeevaError','log','data','VeevaService','666Wzasbu','CREATE_RECORDS_LIMIT','post','apply','186qBaWLY','map','executeManyVQL','defineProperty','CANCELLED','DELETE_RECORDS_LIMIT','SCHEDULED','errors','../classes/errors/veeva-error','800324aThiYl','application/json','all','executeVQL','search','get','../enums/status.enums','(((.+)+)+)+$','flat','37860eHMNuS','ERRORS_ENCOUNTERED','Creating\x20','Unknown\x20Job\x20status\x20:\x20\x27','chunkArray','21763TUEjPX','VeevaConstants','13RuLqMU','ENDPOINT_VQL','_connection','17985fBsyfG','\x20records.','SUCCESS','sleep','4484LWpQis','responseStatus'];a409_0x583b=function(){return _0x24e38e;};return a409_0x583b();}