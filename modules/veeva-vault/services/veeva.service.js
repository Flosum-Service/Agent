const a363_0x239225=a363_0x2a69;(function(_0x282e95,_0x5041c6){const _0x1268d2=a363_0x2a69,_0x279cec=_0x282e95();while(!![]){try{const _0x268836=-parseInt(_0x1268d2(0x1c4))/0x1*(-parseInt(_0x1268d2(0x1bd))/0x2)+parseInt(_0x1268d2(0x1cb))/0x3+parseInt(_0x1268d2(0x1a5))/0x4*(-parseInt(_0x1268d2(0x1af))/0x5)+parseInt(_0x1268d2(0x1ae))/0x6*(parseInt(_0x1268d2(0x1b9))/0x7)+parseInt(_0x1268d2(0x1ac))/0x8*(parseInt(_0x1268d2(0x1d2))/0x9)+-parseInt(_0x1268d2(0x1b2))/0xa+parseInt(_0x1268d2(0x1cd))/0xb*(-parseInt(_0x1268d2(0x1ce))/0xc);if(_0x268836===_0x5041c6)break;else _0x279cec['push'](_0x279cec['shift']());}catch(_0x17ca59){_0x279cec['push'](_0x279cec['shift']());}}}(a363_0x3504,0xaed78));const a363_0x3d11be=(function(){let _0x1e8780=!![];return function(_0x25694d,_0x8440b6){const _0x356946=_0x1e8780?function(){const _0x1c1103=a363_0x2a69;if(_0x8440b6){const _0x14cb35=_0x8440b6[_0x1c1103(0x1bc)](_0x25694d,arguments);return _0x8440b6=null,_0x14cb35;}}:function(){};return _0x1e8780=![],_0x356946;};}()),a363_0x54cf5a=a363_0x3d11be(this,function(){const _0x175291=a363_0x2a69;return a363_0x54cf5a[_0x175291(0x1c9)]()['search'](_0x175291(0x1c2))['toString']()[_0x175291(0x1d3)](a363_0x54cf5a)[_0x175291(0x1c6)](_0x175291(0x1c2));});a363_0x54cf5a();function a363_0x2a69(_0xe49790,_0x544a3c){const _0x8c2afa=a363_0x3504();return a363_0x2a69=function(_0x54cf5a,_0x3d11be){_0x54cf5a=_0x54cf5a-0x1a5;let _0x350468=_0x8c2afa[_0x54cf5a];return _0x350468;},a363_0x2a69(_0xe49790,_0x544a3c);}'use strict';Object[a363_0x239225(0x1a8)](exports,a363_0x239225(0x1ab),{'value':!![]}),exports[a363_0x239225(0x1d4)]=void 0x0;function a363_0x3504(){const _0x3b4284=['JOB_STATUS_TIMEOUT','deleteVeevaObjectRecords','_logger','VeevaResponseStatus','Creating\x20','Deleting\x20','sleep','12508nfLOAk','errors','chunkArray','defineProperty','ERRORS_ENCOUNTERED','../classes/errors/veeva-error','__esModule','72dJmwMx','executeVQL','245886vqcJVA','230YnsoUy','post','executeManyVQL','6360150shgoTZ','QUEUED','push','\x20records.','data','VeevaJobStatus','../../shared/utils','7vMBNft','status','DELETE_RECORDS_LIMIT','apply','202GxQQnu','responseStatus','length','QUEUEING','map','(((.+)+)+)+$','VeevaError','5843JPBGXV','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','search','log','SUCCESS','toString','CREATE_RECORDS_LIMIT','2599098KCYrMp','createVeevaObjectRecords','1199oZcadt','60432KWbfjX','_connection','get','application/json','547443NQgKiM','constructor','VeevaService'];a363_0x3504=function(){return _0x3b4284;};return a363_0x3504();}const utils_1=require(a363_0x239225(0x1b8)),status_enums_1=require('../enums/status.enums'),veeva_error_1=require(a363_0x239225(0x1aa));class VeevaService{constructor({connection:_0x42b7d2,logger:_0x5408e9}){const _0x1796fa=a363_0x239225;this[_0x1796fa(0x1cf)]=_0x42b7d2,this[_0x1796fa(0x1d7)]=_0x5408e9;}async[a363_0x239225(0x1b1)](_0x32f961){const _0x23b7d1=a363_0x239225,_0x4cdb8d=[];for(const _0x1155b4 of _0x32f961){_0x4cdb8d[_0x23b7d1(0x1b4)](this['executeVQL'](_0x1155b4));}const _0x37ad5e=await Promise['all'](_0x4cdb8d);return _0x37ad5e['flat']();}async[a363_0x239225(0x1ad)](_0x3725ba){const _0x44e707=a363_0x239225,_0x2d5f55=[];do{const _0x90c7b7=await this[_0x44e707(0x1cf)][_0x44e707(0x1d0)](_0x3725ba),_0x429c69=_0x90c7b7[_0x44e707(0x1b6)];if(_0x429c69[_0x44e707(0x1be)]===status_enums_1[_0x44e707(0x1d8)]['SUCCESS']){const {responseDetails:{next_page:_0x38851c},data:_0x49efed}=_0x429c69;_0x3725ba=_0x38851c||null,_0x2d5f55['push'](..._0x49efed);}else throw new veeva_error_1[(_0x44e707(0x1c3))](_0x429c69[_0x44e707(0x1a6)]);}while(_0x3725ba);return _0x2d5f55;}async[a363_0x239225(0x1cc)](_0x3d887e,_0x58f7c9){const _0x5b3ad9=a363_0x239225,_0x47c961=[],_0x36e3ad=(0x0,utils_1[_0x5b3ad9(0x1a7)])(_0x58f7c9,VeevaService[_0x5b3ad9(0x1ca)]),_0x2a6421=_0x58f7c9[_0x5b3ad9(0x1bf)];let _0xf6b31d=0x0;for(const _0xa64487 of _0x36e3ad){_0xf6b31d+=_0xa64487['length'],this[_0x5b3ad9(0x1d7)][_0x5b3ad9(0x1c7)](_0x5b3ad9(0x1d9)+_0xf6b31d+'/'+_0x2a6421+_0x5b3ad9(0x1b5));const _0x43d9da=await this['_connection'][_0x5b3ad9(0x1b0)](_0x3d887e,_0xa64487),_0x1bc3d4=_0x43d9da[_0x5b3ad9(0x1b6)];if(_0x1bc3d4[_0x5b3ad9(0x1be)]===status_enums_1[_0x5b3ad9(0x1d8)][_0x5b3ad9(0x1c8)])for(const {responseStatus:_0x269dde,data:_0x22fc4c}of _0x1bc3d4[_0x5b3ad9(0x1b6)]){if(_0x269dde===status_enums_1[_0x5b3ad9(0x1d8)][_0x5b3ad9(0x1c8)])_0x47c961[_0x5b3ad9(0x1b4)](_0x22fc4c['id']);else throw new veeva_error_1['VeevaError'](_0x1bc3d4[_0x5b3ad9(0x1a6)]);}else throw new veeva_error_1['VeevaError'](_0x1bc3d4[_0x5b3ad9(0x1a6)]);}return _0x47c961;}async[a363_0x239225(0x1d6)](_0x4d51a2,_0x277075){const _0x466058=a363_0x239225,_0x55b0bd=_0x277075[_0x466058(0x1c1)](_0x153b77=>({'id':_0x153b77})),_0x27beba=(0x0,utils_1[_0x466058(0x1a7)])(_0x55b0bd,VeevaService['DELETE_RECORDS_LIMIT']);let _0x5c0c63=0x0;for(const _0xcd513f of _0x27beba){_0x5c0c63+=_0xcd513f[_0x466058(0x1bf)],this['_logger']['log'](_0x466058(0x1da)+_0x5c0c63+'/'+_0x277075['length']+'\x20records');const {data:_0x50392f}=await this[_0x466058(0x1cf)]['delete'](_0x4d51a2,{'headers':{'Content-Type':_0x466058(0x1d1)},'data':_0xcd513f});if(_0x50392f['responseStatus']===status_enums_1['VeevaResponseStatus'][_0x466058(0x1c8)])for(const _0x45da33 of _0x50392f[_0x466058(0x1b6)]){const {responseStatus:_0x2f475c,errors:_0x57aaf3}=_0x45da33;if(_0x2f475c!==status_enums_1[_0x466058(0x1d8)][_0x466058(0x1c8)])throw new veeva_error_1[(_0x466058(0x1c3))](_0x57aaf3);}else throw new veeva_error_1[(_0x466058(0x1c3))](_0x50392f[_0x466058(0x1a6)]);}}async['getJobResult'](_0x43107c){const _0x8236b5=a363_0x239225,_0x51e491=[];do{this[_0x8236b5(0x1d7)][_0x8236b5(0x1c7)](_0x8236b5(0x1c5)),await(0x0,utils_1[_0x8236b5(0x1db)])(VeevaService[_0x8236b5(0x1d5)]);const _0x4624f3=[];for(const _0x54d22c of _0x43107c){const {data:_0x39c1ae}=await this[_0x8236b5(0x1cf)][_0x8236b5(0x1d0)](_0x54d22c);if(_0x39c1ae[_0x8236b5(0x1be)]===status_enums_1[_0x8236b5(0x1d8)][_0x8236b5(0x1c8)]){const {data:_0x13ba2f}=_0x39c1ae;switch(_0x13ba2f[_0x8236b5(0x1ba)]){case status_enums_1[_0x8236b5(0x1b7)][_0x8236b5(0x1c8)]:case status_enums_1[_0x8236b5(0x1b7)][_0x8236b5(0x1a9)]:_0x51e491[_0x8236b5(0x1b4)](_0x13ba2f);break;case status_enums_1[_0x8236b5(0x1b7)][_0x8236b5(0x1c0)]:case status_enums_1[_0x8236b5(0x1b7)]['CANCELLED']:case status_enums_1[_0x8236b5(0x1b7)]['MISSED_SCHEDULE']:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x13ba2f[_0x8236b5(0x1ba)]);case status_enums_1[_0x8236b5(0x1b7)][_0x8236b5(0x1b3)]:case status_enums_1['VeevaJobStatus']['RUNNING']:case status_enums_1['VeevaJobStatus']['SCHEDULED']:_0x4624f3[_0x8236b5(0x1b4)](_0x54d22c);break;default:throw new Error('Unknown\x20Job\x20status\x20:\x20\x27'+_0x13ba2f[_0x8236b5(0x1ba)]+'\x27');}}else throw new veeva_error_1[(_0x8236b5(0x1c3))](_0x39c1ae['errors']);}_0x43107c=_0x4624f3;}while(_0x43107c[_0x8236b5(0x1bf)]);return _0x51e491;}}exports[a363_0x239225(0x1d4)]=VeevaService,VeevaService[a363_0x239225(0x1d5)]=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService[a363_0x239225(0x1bb)]=0x1f4;