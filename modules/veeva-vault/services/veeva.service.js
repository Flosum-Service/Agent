const a364_0x1d7fa7=a364_0x3134;(function(_0x374072,_0x49846b){const _0x51908c=a364_0x3134,_0x12159b=_0x374072();while(!![]){try{const _0x5a0528=-parseInt(_0x51908c(0x14d))/0x1*(-parseInt(_0x51908c(0x153))/0x2)+parseInt(_0x51908c(0x162))/0x3+-parseInt(_0x51908c(0x168))/0x4+parseInt(_0x51908c(0x13d))/0x5*(-parseInt(_0x51908c(0x150))/0x6)+parseInt(_0x51908c(0x145))/0x7*(-parseInt(_0x51908c(0x15c))/0x8)+parseInt(_0x51908c(0x16a))/0x9+-parseInt(_0x51908c(0x173))/0xa;if(_0x5a0528===_0x49846b)break;else _0x12159b['push'](_0x12159b['shift']());}catch(_0x3f01d9){_0x12159b['push'](_0x12159b['shift']());}}}(a364_0x377b,0xcafcf));function a364_0x377b(){const _0x38fa20=['MISSED_SCHEDULE','SUCCESS','CREATE_RECORDS_LIMIT','ERRORS_ENCOUNTERED','5JMyydw','sleep','\x20records.','15948cqWohV','constructor','Unknown\x20Job\x20status\x20:\x20\x27','563452xwVNcR','CANCELLED','QUEUEING','status','flat','VeevaConstants','ENDPOINT_VQL','VeevaJobStatus','\x20records','5457968jgQhvi','chunkArray','log','get','_logger','JOB_STATUS_TIMEOUT','3834150eCecaC','responseStatus','Creating\x20','../enums/status.enums','../classes/errors/veeva-error','Deleting\x20','2115888yfiKUn','data','6240357DvOeec','search','../../shared/utils','executeVQL','createVeevaObjectRecords','getJobResult','_connection','length','(((.+)+)+)+$','1182340HCxDro','__esModule','application/x-www-form-urlencoded','apply','1010ptMOMS','VeevaResponseStatus','toString','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','VeevaService','defineProperty','errors','application/json','14fKEHYs','DELETE_RECORDS_LIMIT','push','VeevaError'];a364_0x377b=function(){return _0x38fa20;};return a364_0x377b();}const a364_0x2e66c6=(function(){let _0x8f1265=!![];return function(_0x345829,_0x13d5b2){const _0x3c6edb=_0x8f1265?function(){const _0x4d1a68=a364_0x3134;if(_0x13d5b2){const _0x17ac70=_0x13d5b2[_0x4d1a68(0x13c)](_0x345829,arguments);return _0x13d5b2=null,_0x17ac70;}}:function(){};return _0x8f1265=![],_0x3c6edb;};}()),a364_0x584965=a364_0x2e66c6(this,function(){const _0x5f4bf0=a364_0x3134;return a364_0x584965[_0x5f4bf0(0x13f)]()[_0x5f4bf0(0x16b)]('(((.+)+)+)+$')[_0x5f4bf0(0x13f)]()[_0x5f4bf0(0x151)](a364_0x584965)[_0x5f4bf0(0x16b)](_0x5f4bf0(0x172));});a364_0x584965();'use strict';Object[a364_0x1d7fa7(0x142)](exports,a364_0x1d7fa7(0x13a),{'value':!![]}),exports[a364_0x1d7fa7(0x141)]=void 0x0;const utils_1=require(a364_0x1d7fa7(0x16c)),status_enums_1=require(a364_0x1d7fa7(0x165)),veeva_error_1=require(a364_0x1d7fa7(0x166)),veeva_constants_1=require('../constants/veeva.constants');class VeevaService{constructor({connection:_0x17c9b8,logger:_0x178979}){const _0xd74e4c=a364_0x1d7fa7;this[_0xd74e4c(0x170)]=_0x17c9b8,this['_logger']=_0x178979;}async['executeManyVQL'](_0x1b33ce){const _0x1185df=a364_0x1d7fa7,_0xbeae41=[];for(const _0x4b795e of _0x1b33ce){_0xbeae41[_0x1185df(0x147)](this['executeVQL'](_0x4b795e));}const _0x1a4ad9=await Promise['all'](_0xbeae41);return _0x1a4ad9[_0x1185df(0x157)]();}async[a364_0x1d7fa7(0x16d)](_0x29b136){const _0x46f4e5=a364_0x1d7fa7,_0x239d6f=[];let _0x55e347=this[_0x46f4e5(0x170)]['post'](veeva_constants_1[_0x46f4e5(0x158)][_0x46f4e5(0x159)],new URLSearchParams([['q',_0x29b136]]),{'headers':{'Content-Type':_0x46f4e5(0x13b)}}),_0x2b7762=![];do{const _0x3a86b1=await _0x55e347,_0x152038=_0x3a86b1[_0x46f4e5(0x169)];if(_0x152038[_0x46f4e5(0x163)]!==status_enums_1[_0x46f4e5(0x13e)][_0x46f4e5(0x14a)])throw new veeva_error_1[(_0x46f4e5(0x148))](_0x152038['errors']);const {responseDetails:{next_page:_0x419eea},data:_0x90afa0}=_0x152038;_0x419eea?_0x55e347=this[_0x46f4e5(0x170)][_0x46f4e5(0x15f)](_0x419eea):_0x2b7762=!![],_0x239d6f[_0x46f4e5(0x147)](..._0x90afa0);}while(!_0x2b7762);return _0x239d6f;}async[a364_0x1d7fa7(0x16e)](_0x584b15,_0x5874d0){const _0x10a37b=a364_0x1d7fa7,_0x2ca495=[],_0x2ce3d6=(0x0,utils_1[_0x10a37b(0x15d)])(_0x5874d0,VeevaService[_0x10a37b(0x14b)]),_0x31f7dd=_0x5874d0[_0x10a37b(0x171)];let _0x1a197e=0x0;for(const _0x2afd49 of _0x2ce3d6){_0x1a197e+=_0x2afd49[_0x10a37b(0x171)],this[_0x10a37b(0x160)][_0x10a37b(0x15e)](_0x10a37b(0x164)+_0x1a197e+'/'+_0x31f7dd+_0x10a37b(0x14f));const _0x551090=await this[_0x10a37b(0x170)]['post'](_0x584b15,_0x2afd49),_0x3f6d5f=_0x551090[_0x10a37b(0x169)];if(_0x3f6d5f[_0x10a37b(0x163)]===status_enums_1['VeevaResponseStatus'][_0x10a37b(0x14a)])for(const {responseStatus:_0x21df8f,data:_0x1cc35d}of _0x3f6d5f[_0x10a37b(0x169)]){if(_0x21df8f===status_enums_1['VeevaResponseStatus'][_0x10a37b(0x14a)])_0x2ca495[_0x10a37b(0x147)](_0x1cc35d['id']);else throw new veeva_error_1['VeevaError'](_0x3f6d5f['errors']);}else throw new veeva_error_1['VeevaError'](_0x3f6d5f[_0x10a37b(0x143)]);}return _0x2ca495;}async['deleteVeevaObjectRecords'](_0x285d70,_0x370639){const _0x548e2e=a364_0x1d7fa7,_0x4dd5ff=_0x370639['map'](_0x2e2420=>({'id':_0x2e2420})),_0x145795=(0x0,utils_1[_0x548e2e(0x15d)])(_0x4dd5ff,VeevaService[_0x548e2e(0x146)]);let _0x57fd90=0x0;for(const _0x4c3a3c of _0x145795){_0x57fd90+=_0x4c3a3c[_0x548e2e(0x171)],this[_0x548e2e(0x160)][_0x548e2e(0x15e)](_0x548e2e(0x167)+_0x57fd90+'/'+_0x370639['length']+_0x548e2e(0x15b));const {data:_0x21aac8}=await this['_connection']['delete'](_0x285d70,{'headers':{'Content-Type':_0x548e2e(0x144)},'data':_0x4c3a3c});if(_0x21aac8['responseStatus']===status_enums_1[_0x548e2e(0x13e)]['SUCCESS'])for(const _0xf53096 of _0x21aac8[_0x548e2e(0x169)]){const {responseStatus:_0x30a7e3,errors:_0x361b19}=_0xf53096;if(_0x30a7e3!==status_enums_1[_0x548e2e(0x13e)]['SUCCESS'])throw new veeva_error_1[(_0x548e2e(0x148))](_0x361b19);}else throw new veeva_error_1[(_0x548e2e(0x148))](_0x21aac8[_0x548e2e(0x143)]);}}async[a364_0x1d7fa7(0x16f)](_0x119e84){const _0x18b9f7=a364_0x1d7fa7,_0x180ef1=[];do{this[_0x18b9f7(0x160)]['log'](_0x18b9f7(0x140)),await(0x0,utils_1[_0x18b9f7(0x14e)])(VeevaService[_0x18b9f7(0x161)]);const _0x53cc40=[];for(const _0x152684 of _0x119e84){const {data:_0x5a3346}=await this[_0x18b9f7(0x170)][_0x18b9f7(0x15f)](_0x152684);if(_0x5a3346[_0x18b9f7(0x163)]===status_enums_1[_0x18b9f7(0x13e)][_0x18b9f7(0x14a)]){const {data:_0x539452}=_0x5a3346;switch(_0x539452[_0x18b9f7(0x156)]){case status_enums_1[_0x18b9f7(0x15a)][_0x18b9f7(0x14a)]:case status_enums_1[_0x18b9f7(0x15a)][_0x18b9f7(0x14c)]:_0x180ef1['push'](_0x539452);break;case status_enums_1['VeevaJobStatus'][_0x18b9f7(0x155)]:case status_enums_1[_0x18b9f7(0x15a)][_0x18b9f7(0x154)]:case status_enums_1[_0x18b9f7(0x15a)][_0x18b9f7(0x149)]:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x539452[_0x18b9f7(0x156)]);case status_enums_1[_0x18b9f7(0x15a)]['QUEUED']:case status_enums_1['VeevaJobStatus']['RUNNING']:case status_enums_1['VeevaJobStatus']['SCHEDULED']:_0x53cc40[_0x18b9f7(0x147)](_0x152684);break;default:throw new Error(_0x18b9f7(0x152)+_0x539452['status']+'\x27');}}else throw new veeva_error_1['VeevaError'](_0x5a3346['errors']);}_0x119e84=_0x53cc40;}while(_0x119e84[_0x18b9f7(0x171)]);return _0x180ef1;}}function a364_0x3134(_0x28cd1f,_0x232948){const _0x194bbc=a364_0x377b();return a364_0x3134=function(_0x584965,_0x2e66c6){_0x584965=_0x584965-0x13a;let _0x377b81=_0x194bbc[_0x584965];return _0x377b81;},a364_0x3134(_0x28cd1f,_0x232948);}exports[a364_0x1d7fa7(0x141)]=VeevaService,VeevaService[a364_0x1d7fa7(0x161)]=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;