const a364_0x315c4a=a364_0x5826;(function(_0x3305c9,_0x100bf1){const _0x3f62b9=a364_0x5826,_0x435978=_0x3305c9();while(!![]){try{const _0x5aba34=-parseInt(_0x3f62b9(0x215))/0x1+-parseInt(_0x3f62b9(0x1fb))/0x2+parseInt(_0x3f62b9(0x21e))/0x3+parseInt(_0x3f62b9(0x208))/0x4*(-parseInt(_0x3f62b9(0x221))/0x5)+-parseInt(_0x3f62b9(0x1f7))/0x6*(parseInt(_0x3f62b9(0x1f3))/0x7)+parseInt(_0x3f62b9(0x20f))/0x8+parseInt(_0x3f62b9(0x20b))/0x9*(parseInt(_0x3f62b9(0x1f0))/0xa);if(_0x5aba34===_0x100bf1)break;else _0x435978['push'](_0x435978['shift']());}catch(_0x556c6b){_0x435978['push'](_0x435978['shift']());}}}(a364_0x4fa2,0x916d8));function a364_0x5826(_0x5f6714,_0x270cb4){const _0x4b21e6=a364_0x4fa2();return a364_0x5826=function(_0x13bfe8,_0x229a1c){_0x13bfe8=_0x13bfe8-0x1ed;let _0x4fa2fd=_0x4b21e6[_0x13bfe8];return _0x4fa2fd;},a364_0x5826(_0x5f6714,_0x270cb4);}function a364_0x4fa2(){const _0x3e6552=['409479iJANVF','_logger','DELETE_RECORDS_LIMIT','CREATE_RECORDS_LIMIT','executeVQL','responseStatus','Deleting\x20','data','RUNNING','2903985nktgCQ','Creating\x20','\x20records','1904715ERAarL','length','errors','post','delete','application/json','log','toString','status','SUCCESS','2529410vFUBwx','../../shared/utils','flat','7AGslAF','sleep','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','JOB_STATUS_TIMEOUT','4174116ESTzJf','(((.+)+)+)+$','VeevaError','createVeevaObjectRecords','2027648oqmbfv','../classes/errors/veeva-error','_connection','executeManyVQL','\x20records.','../enums/status.enums','QUEUED','constructor','VeevaJobStatus','deleteVeevaObjectRecords','VeevaService','getJobResult','VeevaConstants','12yhkBSz','Unknown\x20Job\x20status\x20:\x20\x27','get','72lXYDJC','defineProperty','ENDPOINT_VQL','application/x-www-form-urlencoded','6927736lsIzyi','all','push','chunkArray','search','VeevaResponseStatus'];a364_0x4fa2=function(){return _0x3e6552;};return a364_0x4fa2();}const a364_0x229a1c=(function(){let _0x2d87ee=!![];return function(_0x31beb8,_0x56892a){const _0x28177d=_0x2d87ee?function(){if(_0x56892a){const _0x321ffc=_0x56892a['apply'](_0x31beb8,arguments);return _0x56892a=null,_0x321ffc;}}:function(){};return _0x2d87ee=![],_0x28177d;};}()),a364_0x13bfe8=a364_0x229a1c(this,function(){const _0x47f688=a364_0x5826;return a364_0x13bfe8[_0x47f688(0x1ed)]()[_0x47f688(0x213)](_0x47f688(0x1f8))['toString']()[_0x47f688(0x202)](a364_0x13bfe8)['search']('(((.+)+)+)+$');});a364_0x13bfe8();'use strict';Object[a364_0x315c4a(0x20c)](exports,'__esModule',{'value':!![]}),exports[a364_0x315c4a(0x205)]=void 0x0;const utils_1=require(a364_0x315c4a(0x1f1)),status_enums_1=require(a364_0x315c4a(0x200)),veeva_error_1=require(a364_0x315c4a(0x1fc)),veeva_constants_1=require('../constants/veeva.constants');class VeevaService{constructor({connection:_0x4fbb7a,logger:_0x1f1b06}){const _0x601d18=a364_0x315c4a;this['_connection']=_0x4fbb7a,this[_0x601d18(0x216)]=_0x1f1b06;}async[a364_0x315c4a(0x1fe)](_0x26472e){const _0x311a6=a364_0x315c4a,_0x221a42=[];for(const _0x51d04f of _0x26472e){_0x221a42['push'](this['executeVQL'](_0x51d04f));}const _0x15f991=await Promise[_0x311a6(0x210)](_0x221a42);return _0x15f991[_0x311a6(0x1f2)]();}async[a364_0x315c4a(0x219)](_0x43e014){const _0x2154f4=a364_0x315c4a,_0x23323c=[];let _0x162620=this[_0x2154f4(0x1fd)][_0x2154f4(0x224)](veeva_constants_1[_0x2154f4(0x207)][_0x2154f4(0x20d)],new URLSearchParams([['q',_0x43e014]]),{'headers':{'Content-Type':_0x2154f4(0x20e)}}),_0x1830da=![];do{const _0x1ccb49=await _0x162620,_0x4b7d5d=_0x1ccb49[_0x2154f4(0x21c)];if(_0x4b7d5d[_0x2154f4(0x21a)]!==status_enums_1[_0x2154f4(0x214)]['SUCCESS'])throw new veeva_error_1[(_0x2154f4(0x1f9))](_0x4b7d5d[_0x2154f4(0x223)]);const {responseDetails:{next_page:_0x5618e3},data:_0x1a0ee6}=_0x4b7d5d;_0x5618e3?_0x162620=this[_0x2154f4(0x1fd)][_0x2154f4(0x20a)](_0x5618e3):_0x1830da=!![],_0x23323c[_0x2154f4(0x211)](..._0x1a0ee6);}while(!_0x1830da);return _0x23323c;}async[a364_0x315c4a(0x1fa)](_0x304216,_0x50cf22){const _0x1bbc46=a364_0x315c4a,_0x2db35d=[],_0x1ceb70=(0x0,utils_1['chunkArray'])(_0x50cf22,VeevaService['CREATE_RECORDS_LIMIT']),_0x3b8dc5=_0x50cf22[_0x1bbc46(0x222)];let _0x5607e3=0x0;for(const _0x3ad8cc of _0x1ceb70){_0x5607e3+=_0x3ad8cc[_0x1bbc46(0x222)],this[_0x1bbc46(0x216)][_0x1bbc46(0x227)](_0x1bbc46(0x21f)+_0x5607e3+'/'+_0x3b8dc5+_0x1bbc46(0x1ff));const _0x25be8c=await this[_0x1bbc46(0x1fd)][_0x1bbc46(0x224)](_0x304216,_0x3ad8cc),_0x4c1156=_0x25be8c[_0x1bbc46(0x21c)];if(_0x4c1156['responseStatus']===status_enums_1[_0x1bbc46(0x214)][_0x1bbc46(0x1ef)])for(const {responseStatus:_0x4a708e,data:_0x2198e9}of _0x4c1156[_0x1bbc46(0x21c)]){if(_0x4a708e===status_enums_1[_0x1bbc46(0x214)][_0x1bbc46(0x1ef)])_0x2db35d['push'](_0x2198e9['id']);else throw new veeva_error_1[(_0x1bbc46(0x1f9))](_0x4c1156[_0x1bbc46(0x223)]);}else throw new veeva_error_1['VeevaError'](_0x4c1156[_0x1bbc46(0x223)]);}return _0x2db35d;}async[a364_0x315c4a(0x204)](_0x1b853a,_0x800704){const _0x3ea58f=a364_0x315c4a,_0x51c22e=_0x800704['map'](_0x1dfab5=>({'id':_0x1dfab5})),_0x1dbc76=(0x0,utils_1[_0x3ea58f(0x212)])(_0x51c22e,VeevaService[_0x3ea58f(0x217)]);let _0x5f425e=0x0;for(const _0x5c7368 of _0x1dbc76){_0x5f425e+=_0x5c7368[_0x3ea58f(0x222)],this[_0x3ea58f(0x216)][_0x3ea58f(0x227)](_0x3ea58f(0x21b)+_0x5f425e+'/'+_0x800704[_0x3ea58f(0x222)]+_0x3ea58f(0x220));const {data:_0x48970b}=await this[_0x3ea58f(0x1fd)][_0x3ea58f(0x225)](_0x1b853a,{'headers':{'Content-Type':_0x3ea58f(0x226)},'data':_0x5c7368});if(_0x48970b[_0x3ea58f(0x21a)]===status_enums_1[_0x3ea58f(0x214)][_0x3ea58f(0x1ef)])for(const _0x46f436 of _0x48970b['data']){const {responseStatus:_0x5a68fb,errors:_0x2f6496}=_0x46f436;if(_0x5a68fb!==status_enums_1[_0x3ea58f(0x214)]['SUCCESS'])throw new veeva_error_1[(_0x3ea58f(0x1f9))](_0x2f6496);}else throw new veeva_error_1['VeevaError'](_0x48970b[_0x3ea58f(0x223)]);}}async[a364_0x315c4a(0x206)](_0x40ce94){const _0x273399=a364_0x315c4a,_0x1f2ffb=[];do{this[_0x273399(0x216)][_0x273399(0x227)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0x273399(0x1f4)])(VeevaService[_0x273399(0x1f6)]);const _0x36de18=[];for(const _0x491f8a of _0x40ce94){const {data:_0x39cfc2}=await this[_0x273399(0x1fd)][_0x273399(0x20a)](_0x491f8a);if(_0x39cfc2['responseStatus']===status_enums_1[_0x273399(0x214)][_0x273399(0x1ef)]){const {data:_0x46ee58}=_0x39cfc2;switch(_0x46ee58[_0x273399(0x1ee)]){case status_enums_1['VeevaJobStatus'][_0x273399(0x1ef)]:case status_enums_1['VeevaJobStatus']['ERRORS_ENCOUNTERED']:_0x1f2ffb[_0x273399(0x211)](_0x46ee58);break;case status_enums_1[_0x273399(0x203)]['QUEUEING']:case status_enums_1['VeevaJobStatus']['CANCELLED']:case status_enums_1[_0x273399(0x203)]['MISSED_SCHEDULE']:throw new Error(_0x273399(0x1f5)+_0x46ee58[_0x273399(0x1ee)]);case status_enums_1[_0x273399(0x203)][_0x273399(0x201)]:case status_enums_1['VeevaJobStatus'][_0x273399(0x21d)]:case status_enums_1[_0x273399(0x203)]['SCHEDULED']:_0x36de18[_0x273399(0x211)](_0x491f8a);break;default:throw new Error(_0x273399(0x209)+_0x46ee58[_0x273399(0x1ee)]+'\x27');}}else throw new veeva_error_1[(_0x273399(0x1f9))](_0x39cfc2[_0x273399(0x223)]);}_0x40ce94=_0x36de18;}while(_0x40ce94[_0x273399(0x222)]);return _0x1f2ffb;}}exports[a364_0x315c4a(0x205)]=VeevaService,VeevaService[a364_0x315c4a(0x1f6)]=0x2710,VeevaService[a364_0x315c4a(0x218)]=0x1f4,VeevaService[a364_0x315c4a(0x217)]=0x1f4;