const a340_0x300bfa=a340_0xb5b4;(function(_0x165e71,_0x468f23){const _0xa4769c=a340_0xb5b4,_0x4336af=_0x165e71();while(!![]){try{const _0x245c6a=-parseInt(_0xa4769c(0xec))/0x1+-parseInt(_0xa4769c(0x105))/0x2+parseInt(_0xa4769c(0xde))/0x3*(-parseInt(_0xa4769c(0xda))/0x4)+-parseInt(_0xa4769c(0xd1))/0x5+-parseInt(_0xa4769c(0xef))/0x6*(-parseInt(_0xa4769c(0xd2))/0x7)+-parseInt(_0xa4769c(0xd0))/0x8*(-parseInt(_0xa4769c(0xf5))/0x9)+parseInt(_0xa4769c(0xd8))/0xa;if(_0x245c6a===_0x468f23)break;else _0x4336af['push'](_0x4336af['shift']());}catch(_0x46a5aa){_0x4336af['push'](_0x4336af['shift']());}}}(a340_0x24f9,0xe72a1));const a340_0x3e21c0=(function(){let _0x265bc7=!![];return function(_0x3e37fb,_0x21560b){const _0x28cd9b=_0x265bc7?function(){const _0x1bd76e=a340_0xb5b4;if(_0x21560b){const _0x25f35e=_0x21560b[_0x1bd76e(0xea)](_0x3e37fb,arguments);return _0x21560b=null,_0x25f35e;}}:function(){};return _0x265bc7=![],_0x28cd9b;};}()),a340_0x3421ab=a340_0x3e21c0(this,function(){const _0x109ffa=a340_0xb5b4;return a340_0x3421ab[_0x109ffa(0xff)]()['search'](_0x109ffa(0xdb))['toString']()['constructor'](a340_0x3421ab)[_0x109ffa(0xcd)](_0x109ffa(0xdb));});a340_0x3421ab();'use strict';function a340_0xb5b4(_0x675edb,_0x3acc1e){const _0x2f23a2=a340_0x24f9();return a340_0xb5b4=function(_0x3421ab,_0x3e21c0){_0x3421ab=_0x3421ab-0xcd;let _0x24f9c5=_0x2f23a2[_0x3421ab];return _0x24f9c5;},a340_0xb5b4(_0x675edb,_0x3acc1e);}Object[a340_0x300bfa(0xed)](exports,a340_0x300bfa(0x104),{'value':!![]}),exports[a340_0x300bfa(0xe2)]=void 0x0;function a340_0x24f9(){const _0x2a7c4f=['toString','\x20records.','log','map','VeevaJobStatus','__esModule','2871782pXuatE','search','VeevaResponseStatus','executeManyVQL','248xpKXEf','3892470iyNSxS','6237889nadkrb','JOB_STATUS_TIMEOUT','delete','status','data','sleep','26918860tXkVnp','Creating\x20','25516rfVjdX','(((.+)+)+)+$','\x20records','SUCCESS','606jRvpYo','SCHEDULED','VeevaError','../../shared/utils','VeevaService','DELETE_RECORDS_LIMIT','_connection','../classes/errors/veeva-error','Unknown\x20Job\x20status\x20:\x20\x27','MISSED_SCHEDULE','chunkArray','createVeevaObjectRecords','apply','CANCELLED','45334aqLYSI','defineProperty','RUNNING','6yrNmdQ','errors','executeVQL','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','QUEUED','CREATE_RECORDS_LIMIT','264807nsapkO','post','length','ERRORS_ENCOUNTERED','push','deleteVeevaObjectRecords','getJobResult','responseStatus','get','_logger'];a340_0x24f9=function(){return _0x2a7c4f;};return a340_0x24f9();}const utils_1=require(a340_0x300bfa(0xe1)),status_enums_1=require('../enums/status.enums'),veeva_error_1=require(a340_0x300bfa(0xe5));class VeevaService{constructor({connection:_0x1168f4,logger:_0x27cb89}){const _0x3a474e=a340_0x300bfa;this[_0x3a474e(0xe4)]=_0x1168f4,this[_0x3a474e(0xfe)]=_0x27cb89;}async[a340_0x300bfa(0xcf)](_0x35de0e){const _0x3cba27=a340_0x300bfa,_0x20fe6a=[];for(const _0x5f0065 of _0x35de0e){_0x20fe6a['push'](this[_0x3cba27(0xf1)](_0x5f0065));}const _0x52ab1a=await Promise['all'](_0x20fe6a);return _0x52ab1a['flat']();}async[a340_0x300bfa(0xf1)](_0x58a402){const _0x10e85c=a340_0x300bfa,_0x583ad4=[];do{const _0x347718=await this[_0x10e85c(0xe4)][_0x10e85c(0xfd)](_0x58a402),_0xacb5cb=_0x347718[_0x10e85c(0xd6)];if(_0xacb5cb[_0x10e85c(0xfc)]===status_enums_1[_0x10e85c(0xce)]['SUCCESS']){const {responseDetails:{next_page:_0x1b503c},data:_0x43524d}=_0xacb5cb;_0x58a402=_0x1b503c||null,_0x583ad4[_0x10e85c(0xf9)](..._0x43524d);}else throw new veeva_error_1[(_0x10e85c(0xe0))](_0xacb5cb[_0x10e85c(0xf0)]);}while(_0x58a402);return _0x583ad4;}async[a340_0x300bfa(0xe9)](_0x22f45d,_0x15855d){const _0x5c82c2=a340_0x300bfa,_0x1299eb=[],_0x1aea99=(0x0,utils_1[_0x5c82c2(0xe8)])(_0x15855d,VeevaService[_0x5c82c2(0xf4)]),_0x28f19c=_0x15855d['length'];let _0x3f5c3b=0x0;for(const _0x82d471 of _0x1aea99){_0x3f5c3b+=_0x82d471[_0x5c82c2(0xf7)],this[_0x5c82c2(0xfe)]['log'](_0x5c82c2(0xd9)+_0x3f5c3b+'/'+_0x28f19c+_0x5c82c2(0x100));const _0x4c204d=await this[_0x5c82c2(0xe4)][_0x5c82c2(0xf6)](_0x22f45d,_0x82d471),_0xe5d728=_0x4c204d[_0x5c82c2(0xd6)];if(_0xe5d728['responseStatus']===status_enums_1[_0x5c82c2(0xce)]['SUCCESS'])for(const {responseStatus:_0x3dbb1b,data:_0x53699d}of _0xe5d728[_0x5c82c2(0xd6)]){if(_0x3dbb1b===status_enums_1[_0x5c82c2(0xce)][_0x5c82c2(0xdd)])_0x1299eb[_0x5c82c2(0xf9)](_0x53699d['id']);else throw new veeva_error_1[(_0x5c82c2(0xe0))](_0xe5d728['errors']);}else throw new veeva_error_1[(_0x5c82c2(0xe0))](_0xe5d728[_0x5c82c2(0xf0)]);}return _0x1299eb;}async[a340_0x300bfa(0xfa)](_0x954e95,_0x384579){const _0x5bc34c=a340_0x300bfa,_0x3cd0b8=_0x384579[_0x5bc34c(0x102)](_0x3cefd0=>({'id':_0x3cefd0})),_0x2f5e36=(0x0,utils_1[_0x5bc34c(0xe8)])(_0x3cd0b8,VeevaService['DELETE_RECORDS_LIMIT']);let _0xb61422=0x0;for(const _0x4a6ade of _0x2f5e36){_0xb61422+=_0x4a6ade['length'],this[_0x5bc34c(0xfe)][_0x5bc34c(0x101)]('Deleting\x20'+_0xb61422+'/'+_0x384579[_0x5bc34c(0xf7)]+_0x5bc34c(0xdc));const {data:_0x38bbaa}=await this[_0x5bc34c(0xe4)][_0x5bc34c(0xd4)](_0x954e95,{'headers':{'Content-Type':'application/json'},'data':_0x4a6ade});if(_0x38bbaa[_0x5bc34c(0xfc)]===status_enums_1[_0x5bc34c(0xce)][_0x5bc34c(0xdd)])for(const _0x296b98 of _0x38bbaa[_0x5bc34c(0xd6)]){const {responseStatus:_0x265d85,errors:_0x5979fa}=_0x296b98;if(_0x265d85!==status_enums_1[_0x5bc34c(0xce)][_0x5bc34c(0xdd)])throw new veeva_error_1[(_0x5bc34c(0xe0))](_0x5979fa);}else throw new veeva_error_1['VeevaError'](_0x38bbaa[_0x5bc34c(0xf0)]);}}async[a340_0x300bfa(0xfb)](_0xf42b21){const _0x9ffbaf=a340_0x300bfa,_0x513d11=[];do{this[_0x9ffbaf(0xfe)][_0x9ffbaf(0x101)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0x9ffbaf(0xd7)])(VeevaService[_0x9ffbaf(0xd3)]);const _0x416c52=[];for(const _0x39e875 of _0xf42b21){const {data:_0x22748}=await this[_0x9ffbaf(0xe4)][_0x9ffbaf(0xfd)](_0x39e875);if(_0x22748['responseStatus']===status_enums_1['VeevaResponseStatus']['SUCCESS']){const {data:_0x47aecb}=_0x22748;switch(_0x47aecb[_0x9ffbaf(0xd5)]){case status_enums_1[_0x9ffbaf(0x103)][_0x9ffbaf(0xdd)]:case status_enums_1[_0x9ffbaf(0x103)][_0x9ffbaf(0xf8)]:_0x513d11[_0x9ffbaf(0xf9)](_0x47aecb);break;case status_enums_1[_0x9ffbaf(0x103)]['QUEUEING']:case status_enums_1[_0x9ffbaf(0x103)][_0x9ffbaf(0xeb)]:case status_enums_1[_0x9ffbaf(0x103)][_0x9ffbaf(0xe7)]:throw new Error(_0x9ffbaf(0xf2)+_0x47aecb[_0x9ffbaf(0xd5)]);case status_enums_1['VeevaJobStatus'][_0x9ffbaf(0xf3)]:case status_enums_1[_0x9ffbaf(0x103)][_0x9ffbaf(0xee)]:case status_enums_1[_0x9ffbaf(0x103)][_0x9ffbaf(0xdf)]:_0x416c52['push'](_0x39e875);break;default:throw new Error(_0x9ffbaf(0xe6)+_0x47aecb['status']+'\x27');}}else throw new veeva_error_1[(_0x9ffbaf(0xe0))](_0x22748[_0x9ffbaf(0xf0)]);}_0xf42b21=_0x416c52;}while(_0xf42b21[_0x9ffbaf(0xf7)]);return _0x513d11;}}exports[a340_0x300bfa(0xe2)]=VeevaService,VeevaService[a340_0x300bfa(0xd3)]=0x2710,VeevaService[a340_0x300bfa(0xf4)]=0x1f4,VeevaService[a340_0x300bfa(0xe3)]=0x1f4;