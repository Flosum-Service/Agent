const a407_0x36d61c=a407_0x2f5c;(function(_0x534515,_0x4c2790){const _0x53c836=a407_0x2f5c,_0x13329c=_0x534515();while(!![]){try{const _0x6a7cf2=-parseInt(_0x53c836(0x161))/0x1+-parseInt(_0x53c836(0x15e))/0x2+parseInt(_0x53c836(0x155))/0x3+-parseInt(_0x53c836(0x153))/0x4+-parseInt(_0x53c836(0x15f))/0x5*(parseInt(_0x53c836(0x14c))/0x6)+-parseInt(_0x53c836(0x14a))/0x7*(parseInt(_0x53c836(0x17b))/0x8)+-parseInt(_0x53c836(0x173))/0x9*(-parseInt(_0x53c836(0x16e))/0xa);if(_0x6a7cf2===_0x4c2790)break;else _0x13329c['push'](_0x13329c['shift']());}catch(_0x4ed239){_0x13329c['push'](_0x13329c['shift']());}}}(a407_0xcba8,0xe0674));const a407_0x1b39f7=(function(){let _0x2df767=!![];return function(_0x475a4a,_0x1ac8e8){const _0x1260de=_0x2df767?function(){const _0x11657c=a407_0x2f5c;if(_0x1ac8e8){const _0x331b7f=_0x1ac8e8[_0x11657c(0x159)](_0x475a4a,arguments);return _0x1ac8e8=null,_0x331b7f;}}:function(){};return _0x2df767=![],_0x1260de;};}()),a407_0x514b3a=a407_0x1b39f7(this,function(){const _0x2761e5=a407_0x2f5c;return a407_0x514b3a[_0x2761e5(0x16f)]()['search'](_0x2761e5(0x145))[_0x2761e5(0x16f)]()['constructor'](a407_0x514b3a)['search'](_0x2761e5(0x145));});a407_0x514b3a();'use strict';Object[a407_0x36d61c(0x147)](exports,a407_0x36d61c(0x164),{'value':!![]}),exports[a407_0x36d61c(0x15b)]=void 0x0;function a407_0xcba8(){const _0x1a1c7c=['ENDPOINT_VQL','(((.+)+)+)+$','QUEUED','defineProperty','sleep','application/x-www-form-urlencoded','7YSGstF','../constants/veeva.constants','474lVYinm','post','VeevaConstants','_logger','responseStatus','\x20records.','../enums/status.enums','5083360QomQcd','getJobResult','591234RCTuWj','chunkArray','application/json','VeevaResponseStatus','apply','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','VeevaService','get','DELETE_RECORDS_LIMIT','2409566DXHlNm','46025jJAGxp','SUCCESS','1487488dsxZcv','VeevaError','../classes/errors/veeva-error','__esModule','QUEUEING','status','executeVQL','../../shared/utils','length','createVeevaObjectRecords','VeevaJobStatus','push','RUNNING','115490dOcbWa','toString','log','_connection','Deleting\x20','5517jsnxbf','errors','MISSED_SCHEDULE','deleteVeevaObjectRecords','JOB_STATUS_TIMEOUT','Creating\x20','data','ERRORS_ENCOUNTERED','13337224HRoCgr','CREATE_RECORDS_LIMIT','delete'];a407_0xcba8=function(){return _0x1a1c7c;};return a407_0xcba8();}const utils_1=require(a407_0x36d61c(0x168)),status_enums_1=require(a407_0x36d61c(0x152)),veeva_error_1=require(a407_0x36d61c(0x163)),veeva_constants_1=require(a407_0x36d61c(0x14b));class VeevaService{constructor({connection:_0x2028df,logger:_0x2ad220}){const _0x38da6b=a407_0x36d61c;this[_0x38da6b(0x171)]=_0x2028df,this['_logger']=_0x2ad220;}async['executeManyVQL'](_0x2395ea){const _0x4e0d94=a407_0x36d61c,_0x565fe9=[];for(const _0x18a324 of _0x2395ea){_0x565fe9['push'](this[_0x4e0d94(0x167)](_0x18a324));}const _0x35b4b2=await Promise['all'](_0x565fe9);return _0x35b4b2['flat']();}async[a407_0x36d61c(0x167)](_0x50a5a2){const _0x5bcab5=a407_0x36d61c,_0x11a953=[];let _0x5a99a9=this[_0x5bcab5(0x171)]['post'](veeva_constants_1[_0x5bcab5(0x14e)][_0x5bcab5(0x17e)],new URLSearchParams([['q',_0x50a5a2]]),{'headers':{'Content-Type':_0x5bcab5(0x149)}}),_0x2f32f5=![];do{const _0x2bc326=await _0x5a99a9,_0x3b7b54=_0x2bc326[_0x5bcab5(0x179)];if(_0x3b7b54[_0x5bcab5(0x150)]!==status_enums_1[_0x5bcab5(0x158)][_0x5bcab5(0x160)])throw new veeva_error_1[(_0x5bcab5(0x162))](_0x3b7b54[_0x5bcab5(0x174)]);const {responseDetails:{next_page:_0x36ba5b},data:_0x1366ed}=_0x3b7b54;_0x36ba5b?_0x5a99a9=this[_0x5bcab5(0x171)]['get'](_0x36ba5b):_0x2f32f5=!![],_0x11a953['push'](..._0x1366ed);}while(!_0x2f32f5);return _0x11a953;}async[a407_0x36d61c(0x16a)](_0x6a1490,_0x46cf6f){const _0x330ff8=a407_0x36d61c,_0x5d08b8=[],_0x432d09=(0x0,utils_1[_0x330ff8(0x156)])(_0x46cf6f,VeevaService[_0x330ff8(0x17c)]),_0x50e3a1=_0x46cf6f['length'];let _0x1581a9=0x0;for(const _0x413c40 of _0x432d09){_0x1581a9+=_0x413c40[_0x330ff8(0x169)],this[_0x330ff8(0x14f)]['log'](_0x330ff8(0x178)+_0x1581a9+'/'+_0x50e3a1+_0x330ff8(0x151));const _0x272ee9=await this['_connection'][_0x330ff8(0x14d)](_0x6a1490,_0x413c40),_0x33f069=_0x272ee9['data'];if(_0x33f069['responseStatus']===status_enums_1[_0x330ff8(0x158)][_0x330ff8(0x160)])for(const {responseStatus:_0xafbb60,data:_0x24a35b}of _0x33f069[_0x330ff8(0x179)]){if(_0xafbb60===status_enums_1['VeevaResponseStatus'][_0x330ff8(0x160)])_0x5d08b8['push'](_0x24a35b['id']);else throw new veeva_error_1[(_0x330ff8(0x162))](_0x33f069[_0x330ff8(0x174)]);}else throw new veeva_error_1['VeevaError'](_0x33f069[_0x330ff8(0x174)]);}return _0x5d08b8;}async[a407_0x36d61c(0x176)](_0x4b6aa9,_0x1efd18){const _0x46e684=a407_0x36d61c,_0x2202e2=_0x1efd18['map'](_0x4124da=>({'id':_0x4124da})),_0x3b2f5b=(0x0,utils_1[_0x46e684(0x156)])(_0x2202e2,VeevaService[_0x46e684(0x15d)]);let _0x5aeaa7=0x0;for(const _0xeddc79 of _0x3b2f5b){_0x5aeaa7+=_0xeddc79[_0x46e684(0x169)],this[_0x46e684(0x14f)][_0x46e684(0x170)](_0x46e684(0x172)+_0x5aeaa7+'/'+_0x1efd18[_0x46e684(0x169)]+'\x20records');const {data:_0x55a00c}=await this[_0x46e684(0x171)][_0x46e684(0x17d)](_0x4b6aa9,{'headers':{'Content-Type':_0x46e684(0x157)},'data':_0xeddc79});if(_0x55a00c['responseStatus']===status_enums_1[_0x46e684(0x158)][_0x46e684(0x160)])for(const _0x1b04ee of _0x55a00c[_0x46e684(0x179)]){const {responseStatus:_0x3e1151,errors:_0x214e35}=_0x1b04ee;if(_0x3e1151!==status_enums_1[_0x46e684(0x158)][_0x46e684(0x160)])throw new veeva_error_1['VeevaError'](_0x214e35);}else throw new veeva_error_1[(_0x46e684(0x162))](_0x55a00c['errors']);}}async[a407_0x36d61c(0x154)](_0x5c34a0){const _0x20d957=a407_0x36d61c,_0x2d1d89=[];do{this[_0x20d957(0x14f)][_0x20d957(0x170)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0x20d957(0x148)])(VeevaService[_0x20d957(0x177)]);const _0x33a16d=[];for(const _0x3f6ba6 of _0x5c34a0){const {data:_0x1cae83}=await this[_0x20d957(0x171)][_0x20d957(0x15c)](_0x3f6ba6);if(_0x1cae83[_0x20d957(0x150)]===status_enums_1[_0x20d957(0x158)][_0x20d957(0x160)]){const {data:_0x4445a3}=_0x1cae83;switch(_0x4445a3[_0x20d957(0x166)]){case status_enums_1[_0x20d957(0x16b)]['SUCCESS']:case status_enums_1[_0x20d957(0x16b)][_0x20d957(0x17a)]:_0x2d1d89[_0x20d957(0x16c)](_0x4445a3);break;case status_enums_1[_0x20d957(0x16b)][_0x20d957(0x165)]:case status_enums_1[_0x20d957(0x16b)]['CANCELLED']:case status_enums_1['VeevaJobStatus'][_0x20d957(0x175)]:throw new Error(_0x20d957(0x15a)+_0x4445a3[_0x20d957(0x166)]);case status_enums_1[_0x20d957(0x16b)][_0x20d957(0x146)]:case status_enums_1[_0x20d957(0x16b)][_0x20d957(0x16d)]:case status_enums_1[_0x20d957(0x16b)]['SCHEDULED']:_0x33a16d[_0x20d957(0x16c)](_0x3f6ba6);break;default:throw new Error('Unknown\x20Job\x20status\x20:\x20\x27'+_0x4445a3['status']+'\x27');}}else throw new veeva_error_1[(_0x20d957(0x162))](_0x1cae83[_0x20d957(0x174)]);}_0x5c34a0=_0x33a16d;}while(_0x5c34a0[_0x20d957(0x169)]);return _0x2d1d89;}}function a407_0x2f5c(_0x55e6f4,_0x39a89b){const _0x499250=a407_0xcba8();return a407_0x2f5c=function(_0x514b3a,_0x1b39f7){_0x514b3a=_0x514b3a-0x145;let _0xcba83b=_0x499250[_0x514b3a];return _0xcba83b;},a407_0x2f5c(_0x55e6f4,_0x39a89b);}exports[a407_0x36d61c(0x15b)]=VeevaService,VeevaService[a407_0x36d61c(0x177)]=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;