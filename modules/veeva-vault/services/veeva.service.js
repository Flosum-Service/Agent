const a364_0x2abeef=a364_0x2582;(function(_0xe10e9,_0x187f24){const _0xfed682=a364_0x2582,_0x256f30=_0xe10e9();while(!![]){try{const _0x5bf9d8=parseInt(_0xfed682(0xb0))/0x1*(-parseInt(_0xfed682(0x84))/0x2)+-parseInt(_0xfed682(0xab))/0x3+-parseInt(_0xfed682(0x91))/0x4*(parseInt(_0xfed682(0x95))/0x5)+-parseInt(_0xfed682(0xae))/0x6+-parseInt(_0xfed682(0xad))/0x7+-parseInt(_0xfed682(0xb5))/0x8*(parseInt(_0xfed682(0x9a))/0x9)+parseInt(_0xfed682(0x96))/0xa;if(_0x5bf9d8===_0x187f24)break;else _0x256f30['push'](_0x256f30['shift']());}catch(_0x466d56){_0x256f30['push'](_0x256f30['shift']());}}}(a364_0xad79,0x1d74f));const a364_0x16a675=(function(){let _0xf1e665=!![];return function(_0x2a4822,_0x173430){const _0x4d8c44=_0xf1e665?function(){const _0x419f50=a364_0x2582;if(_0x173430){const _0x26b333=_0x173430[_0x419f50(0xa4)](_0x2a4822,arguments);return _0x173430=null,_0x26b333;}}:function(){};return _0xf1e665=![],_0x4d8c44;};}()),a364_0x2f311b=a364_0x16a675(this,function(){const _0x2a4ee3=a364_0x2582;return a364_0x2f311b['toString']()[_0x2a4ee3(0xa7)](_0x2a4ee3(0x8c))[_0x2a4ee3(0xa1)]()[_0x2a4ee3(0xa2)](a364_0x2f311b)[_0x2a4ee3(0xa7)](_0x2a4ee3(0x8c));});function a364_0xad79(){const _0x4175ed=['\x20records','(((.+)+)+)+$','flat','CREATE_RECORDS_LIMIT','responseStatus','defineProperty','71408eRiWNL','data','_connection','log','15olCkuW','7919990dxSSal','SCHEDULED','VeevaError','all','14481STsjCo','ERRORS_ENCOUNTERED','../enums/status.enums','QUEUEING','get','createVeevaObjectRecords','executeVQL','toString','constructor','CANCELLED','apply','status','application/json','search','MISSED_SCHEDULE','../../shared/utils','SUCCESS','275628lHGlwm','chunkArray','1622544JWMEzU','438558PRVbQA','Creating\x20','11329rypmfO','VeevaService','push','errors','QUEUED','592qXrIRz','executeManyVQL','JOB_STATUS_TIMEOUT','RUNNING','post','sleep','../classes/errors/veeva-error','VeevaResponseStatus','18ntYCqE','map','\x20records.','_logger','VeevaJobStatus','length','Unknown\x20Job\x20status\x20:\x20\x27'];a364_0xad79=function(){return _0x4175ed;};return a364_0xad79();}function a364_0x2582(_0x358ae8,_0x145863){const _0x22524f=a364_0xad79();return a364_0x2582=function(_0x2f311b,_0x16a675){_0x2f311b=_0x2f311b-0x7e;let _0xad7980=_0x22524f[_0x2f311b];return _0xad7980;},a364_0x2582(_0x358ae8,_0x145863);}a364_0x2f311b();'use strict';Object[a364_0x2abeef(0x90)](exports,'__esModule',{'value':!![]}),exports['VeevaService']=void 0x0;const utils_1=require(a364_0x2abeef(0xa9)),status_enums_1=require(a364_0x2abeef(0x9c)),veeva_error_1=require(a364_0x2abeef(0x82));class VeevaService{constructor({connection:_0xf4c0e7,logger:_0x266422}){const _0x4a693d=a364_0x2abeef;this[_0x4a693d(0x93)]=_0xf4c0e7,this[_0x4a693d(0x87)]=_0x266422;}async[a364_0x2abeef(0xb6)](_0x4aad91){const _0x135494=a364_0x2abeef,_0xe6e769=[];for(const _0x59dcaa of _0x4aad91){_0xe6e769['push'](this[_0x135494(0xa0)](_0x59dcaa));}const _0x4afe9b=await Promise[_0x135494(0x99)](_0xe6e769);return _0x4afe9b[_0x135494(0x8d)]();}async[a364_0x2abeef(0xa0)](_0x17eb89){const _0x120bd3=a364_0x2abeef,_0x3e6bf4=[];do{const _0x5e5dfd=await this['_connection']['get'](_0x17eb89),_0x4ef35f=_0x5e5dfd[_0x120bd3(0x92)];if(_0x4ef35f['responseStatus']===status_enums_1[_0x120bd3(0x83)]['SUCCESS']){const {responseDetails:{next_page:_0x3fe897},data:_0x531602}=_0x4ef35f;_0x17eb89=_0x3fe897||null,_0x3e6bf4[_0x120bd3(0xb2)](..._0x531602);}else throw new veeva_error_1[(_0x120bd3(0x98))](_0x4ef35f[_0x120bd3(0xb3)]);}while(_0x17eb89);return _0x3e6bf4;}async[a364_0x2abeef(0x9f)](_0x4f1370,_0x527d48){const _0x3ae9a0=a364_0x2abeef,_0x537e79=[],_0x4f887a=(0x0,utils_1['chunkArray'])(_0x527d48,VeevaService[_0x3ae9a0(0x8e)]),_0x393ae9=_0x527d48[_0x3ae9a0(0x89)];let _0x28e806=0x0;for(const _0x5b6732 of _0x4f887a){_0x28e806+=_0x5b6732[_0x3ae9a0(0x89)],this[_0x3ae9a0(0x87)][_0x3ae9a0(0x94)](_0x3ae9a0(0xaf)+_0x28e806+'/'+_0x393ae9+_0x3ae9a0(0x86));const _0x13dc9b=await this[_0x3ae9a0(0x93)][_0x3ae9a0(0x80)](_0x4f1370,_0x5b6732),_0x56d73d=_0x13dc9b[_0x3ae9a0(0x92)];if(_0x56d73d[_0x3ae9a0(0x8f)]===status_enums_1[_0x3ae9a0(0x83)][_0x3ae9a0(0xaa)])for(const {responseStatus:_0x311366,data:_0x1f6c44}of _0x56d73d[_0x3ae9a0(0x92)]){if(_0x311366===status_enums_1[_0x3ae9a0(0x83)][_0x3ae9a0(0xaa)])_0x537e79['push'](_0x1f6c44['id']);else throw new veeva_error_1[(_0x3ae9a0(0x98))](_0x56d73d[_0x3ae9a0(0xb3)]);}else throw new veeva_error_1[(_0x3ae9a0(0x98))](_0x56d73d[_0x3ae9a0(0xb3)]);}return _0x537e79;}async['deleteVeevaObjectRecords'](_0x3f3a0f,_0x21d8ca){const _0x30082f=a364_0x2abeef,_0x2741b9=_0x21d8ca[_0x30082f(0x85)](_0x189e2a=>({'id':_0x189e2a})),_0x1646ff=(0x0,utils_1[_0x30082f(0xac)])(_0x2741b9,VeevaService['DELETE_RECORDS_LIMIT']);let _0x2f4080=0x0;for(const _0x32edcc of _0x1646ff){_0x2f4080+=_0x32edcc[_0x30082f(0x89)],this[_0x30082f(0x87)][_0x30082f(0x94)]('Deleting\x20'+_0x2f4080+'/'+_0x21d8ca['length']+_0x30082f(0x8b));const {data:_0x61c1b4}=await this[_0x30082f(0x93)]['delete'](_0x3f3a0f,{'headers':{'Content-Type':_0x30082f(0xa6)},'data':_0x32edcc});if(_0x61c1b4[_0x30082f(0x8f)]===status_enums_1[_0x30082f(0x83)]['SUCCESS'])for(const _0x363541 of _0x61c1b4[_0x30082f(0x92)]){const {responseStatus:_0x40bc58,errors:_0x21734c}=_0x363541;if(_0x40bc58!==status_enums_1[_0x30082f(0x83)][_0x30082f(0xaa)])throw new veeva_error_1[(_0x30082f(0x98))](_0x21734c);}else throw new veeva_error_1[(_0x30082f(0x98))](_0x61c1b4[_0x30082f(0xb3)]);}}async['getJobResult'](_0x33cedd){const _0x15d8ba=a364_0x2abeef,_0x5b30d2=[];do{this[_0x15d8ba(0x87)]['log']('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0x15d8ba(0x81)])(VeevaService['JOB_STATUS_TIMEOUT']);const _0x4be9f7=[];for(const _0x298d26 of _0x33cedd){const {data:_0x2ce0d3}=await this['_connection'][_0x15d8ba(0x9e)](_0x298d26);if(_0x2ce0d3[_0x15d8ba(0x8f)]===status_enums_1['VeevaResponseStatus'][_0x15d8ba(0xaa)]){const {data:_0x12f809}=_0x2ce0d3;switch(_0x12f809[_0x15d8ba(0xa5)]){case status_enums_1['VeevaJobStatus'][_0x15d8ba(0xaa)]:case status_enums_1[_0x15d8ba(0x88)][_0x15d8ba(0x9b)]:_0x5b30d2[_0x15d8ba(0xb2)](_0x12f809);break;case status_enums_1[_0x15d8ba(0x88)][_0x15d8ba(0x9d)]:case status_enums_1[_0x15d8ba(0x88)][_0x15d8ba(0xa3)]:case status_enums_1[_0x15d8ba(0x88)][_0x15d8ba(0xa8)]:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x12f809[_0x15d8ba(0xa5)]);case status_enums_1['VeevaJobStatus'][_0x15d8ba(0xb4)]:case status_enums_1[_0x15d8ba(0x88)][_0x15d8ba(0x7f)]:case status_enums_1[_0x15d8ba(0x88)][_0x15d8ba(0x97)]:_0x4be9f7[_0x15d8ba(0xb2)](_0x298d26);break;default:throw new Error(_0x15d8ba(0x8a)+_0x12f809[_0x15d8ba(0xa5)]+'\x27');}}else throw new veeva_error_1[(_0x15d8ba(0x98))](_0x2ce0d3['errors']);}_0x33cedd=_0x4be9f7;}while(_0x33cedd['length']);return _0x5b30d2;}}exports[a364_0x2abeef(0xb1)]=VeevaService,VeevaService[a364_0x2abeef(0x7e)]=0x2710,VeevaService[a364_0x2abeef(0x8e)]=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;