const a408_0x1f9181=a408_0x431e;(function(_0x260201,_0x16b45c){const _0x4c1ad9=a408_0x431e,_0x13e6b8=_0x260201();while(!![]){try{const _0x239172=parseInt(_0x4c1ad9(0x155))/0x1*(parseInt(_0x4c1ad9(0x175))/0x2)+-parseInt(_0x4c1ad9(0x160))/0x3*(-parseInt(_0x4c1ad9(0x149))/0x4)+-parseInt(_0x4c1ad9(0x158))/0x5*(parseInt(_0x4c1ad9(0x177))/0x6)+parseInt(_0x4c1ad9(0x159))/0x7+parseInt(_0x4c1ad9(0x164))/0x8+parseInt(_0x4c1ad9(0x13f))/0x9+parseInt(_0x4c1ad9(0x152))/0xa*(-parseInt(_0x4c1ad9(0x172))/0xb);if(_0x239172===_0x16b45c)break;else _0x13e6b8['push'](_0x13e6b8['shift']());}catch(_0x2dcd5d){_0x13e6b8['push'](_0x13e6b8['shift']());}}}(a408_0x342c,0x7e6ec));function a408_0x342c(){const _0x21d013=['17775CszTlI','7195524LRsCXC','DELETE_RECORDS_LIMIT','SCHEDULED','ENDPOINT_VQL','createVeevaObjectRecords','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','JOB_STATUS_TIMEOUT','13767UUehXT','delete','../classes/errors/veeva-error','get','710008fhwATN','flat','map','_connection','RUNNING','../enums/status.enums','VeevaResponseStatus','chunkArray','push','_logger','VeevaService','search','ERRORS_ENCOUNTERED','executeManyVQL','22dKuSEo','Unknown\x20Job\x20status\x20:\x20\x27','constructor','5466qBmMnZ','errors','570CiMpmN','defineProperty','all','getJobResult','MISSED_SCHEDULE','8904483zAgKLJ','(((.+)+)+)+$','SUCCESS','application/x-www-form-urlencoded','data','CANCELLED','executeVQL','toString','deleteVeevaObjectRecords','status','556domzdO','responseStatus','VeevaJobStatus','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','QUEUED','__esModule','VeevaConstants','log','VeevaError','13923860iiiKuv','length','\x20records.','328UDVewU','apply','post'];a408_0x342c=function(){return _0x21d013;};return a408_0x342c();}const a408_0x41b859=(function(){let _0x283f25=!![];return function(_0x127017,_0x523ebc){const _0x39fb1c=_0x283f25?function(){const _0x396498=a408_0x431e;if(_0x523ebc){const _0x52968a=_0x523ebc[_0x396498(0x156)](_0x127017,arguments);return _0x523ebc=null,_0x52968a;}}:function(){};return _0x283f25=![],_0x39fb1c;};}()),a408_0x537e98=a408_0x41b859(this,function(){const _0x33eec3=a408_0x431e;return a408_0x537e98['toString']()['search'](_0x33eec3(0x140))[_0x33eec3(0x146)]()[_0x33eec3(0x174)](a408_0x537e98)[_0x33eec3(0x16f)](_0x33eec3(0x140));});a408_0x537e98();function a408_0x431e(_0x19f4dd,_0x40add0){const _0xe32ed3=a408_0x342c();return a408_0x431e=function(_0x537e98,_0x41b859){_0x537e98=_0x537e98-0x13e;let _0x342c99=_0xe32ed3[_0x537e98];return _0x342c99;},a408_0x431e(_0x19f4dd,_0x40add0);}'use strict';Object[a408_0x1f9181(0x178)](exports,a408_0x1f9181(0x14e),{'value':!![]}),exports[a408_0x1f9181(0x16e)]=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a408_0x1f9181(0x169)),veeva_error_1=require(a408_0x1f9181(0x162)),veeva_constants_1=require('../constants/veeva.constants');class VeevaService{constructor({connection:_0x134ee9,logger:_0x2eda74}){const _0x58f280=a408_0x1f9181;this['_connection']=_0x134ee9,this[_0x58f280(0x16d)]=_0x2eda74;}async[a408_0x1f9181(0x171)](_0x3d290b){const _0x39654d=a408_0x1f9181,_0x564ba3=[];for(const _0x562d0a of _0x3d290b){_0x564ba3[_0x39654d(0x16c)](this[_0x39654d(0x145)](_0x562d0a));}const _0x442518=await Promise[_0x39654d(0x179)](_0x564ba3);return _0x442518[_0x39654d(0x165)]();}async[a408_0x1f9181(0x145)](_0x5c5765){const _0x4c6c02=a408_0x1f9181,_0x2824ee=[];let _0x329131=this['_connection'][_0x4c6c02(0x157)](veeva_constants_1[_0x4c6c02(0x14f)][_0x4c6c02(0x15c)],new URLSearchParams([['q',_0x5c5765]]),{'headers':{'Content-Type':_0x4c6c02(0x142)}}),_0x4fc60d=![];do{const _0x218ce1=await _0x329131,_0x3a88bd=_0x218ce1[_0x4c6c02(0x143)];if(_0x3a88bd[_0x4c6c02(0x14a)]!==status_enums_1['VeevaResponseStatus'][_0x4c6c02(0x141)])throw new veeva_error_1[(_0x4c6c02(0x151))](_0x3a88bd[_0x4c6c02(0x176)]);const {responseDetails:{next_page:_0x5c9546},data:_0x150649}=_0x3a88bd;_0x5c9546?_0x329131=this[_0x4c6c02(0x167)][_0x4c6c02(0x163)](_0x5c9546):_0x4fc60d=!![],_0x2824ee[_0x4c6c02(0x16c)](..._0x150649);}while(!_0x4fc60d);return _0x2824ee;}async[a408_0x1f9181(0x15d)](_0x2d35ab,_0xfadfd5){const _0x44db07=a408_0x1f9181,_0x1df9ec=[],_0xf74028=(0x0,utils_1[_0x44db07(0x16b)])(_0xfadfd5,VeevaService['CREATE_RECORDS_LIMIT']),_0x405338=_0xfadfd5[_0x44db07(0x153)];let _0x38b5d5=0x0;for(const _0x2265b4 of _0xf74028){_0x38b5d5+=_0x2265b4[_0x44db07(0x153)],this[_0x44db07(0x16d)][_0x44db07(0x150)]('Creating\x20'+_0x38b5d5+'/'+_0x405338+_0x44db07(0x154));const _0x43ed81=await this[_0x44db07(0x167)][_0x44db07(0x157)](_0x2d35ab,_0x2265b4),_0x14acbe=_0x43ed81[_0x44db07(0x143)];if(_0x14acbe[_0x44db07(0x14a)]===status_enums_1[_0x44db07(0x16a)][_0x44db07(0x141)])for(const {responseStatus:_0x12cfbf,data:_0xe3c494}of _0x14acbe[_0x44db07(0x143)]){if(_0x12cfbf===status_enums_1[_0x44db07(0x16a)][_0x44db07(0x141)])_0x1df9ec[_0x44db07(0x16c)](_0xe3c494['id']);else throw new veeva_error_1[(_0x44db07(0x151))](_0x14acbe[_0x44db07(0x176)]);}else throw new veeva_error_1[(_0x44db07(0x151))](_0x14acbe[_0x44db07(0x176)]);}return _0x1df9ec;}async[a408_0x1f9181(0x147)](_0x1a6e62,_0x3e2628){const _0x3402ce=a408_0x1f9181,_0x2f94c4=_0x3e2628[_0x3402ce(0x166)](_0x5efde4=>({'id':_0x5efde4})),_0x585ca4=(0x0,utils_1[_0x3402ce(0x16b)])(_0x2f94c4,VeevaService[_0x3402ce(0x15a)]);let _0x1550bf=0x0;for(const _0x1318aa of _0x585ca4){_0x1550bf+=_0x1318aa[_0x3402ce(0x153)],this[_0x3402ce(0x16d)][_0x3402ce(0x150)]('Deleting\x20'+_0x1550bf+'/'+_0x3e2628[_0x3402ce(0x153)]+'\x20records');const {data:_0x346405}=await this[_0x3402ce(0x167)][_0x3402ce(0x161)](_0x1a6e62,{'headers':{'Content-Type':'application/json'},'data':_0x1318aa});if(_0x346405[_0x3402ce(0x14a)]===status_enums_1[_0x3402ce(0x16a)][_0x3402ce(0x141)])for(const _0x39c8ba of _0x346405[_0x3402ce(0x143)]){const {responseStatus:_0x3c605d,errors:_0x587e95}=_0x39c8ba;if(_0x3c605d!==status_enums_1[_0x3402ce(0x16a)][_0x3402ce(0x141)])throw new veeva_error_1['VeevaError'](_0x587e95);}else throw new veeva_error_1['VeevaError'](_0x346405[_0x3402ce(0x176)]);}}async[a408_0x1f9181(0x17a)](_0x5b6f03){const _0x111a84=a408_0x1f9181,_0x3b2f5a=[];do{this[_0x111a84(0x16d)][_0x111a84(0x150)](_0x111a84(0x14c)),await(0x0,utils_1['sleep'])(VeevaService['JOB_STATUS_TIMEOUT']);const _0x5471e8=[];for(const _0x52d283 of _0x5b6f03){const {data:_0x58c487}=await this[_0x111a84(0x167)][_0x111a84(0x163)](_0x52d283);if(_0x58c487[_0x111a84(0x14a)]===status_enums_1[_0x111a84(0x16a)]['SUCCESS']){const {data:_0x4a7853}=_0x58c487;switch(_0x4a7853[_0x111a84(0x148)]){case status_enums_1[_0x111a84(0x14b)][_0x111a84(0x141)]:case status_enums_1[_0x111a84(0x14b)][_0x111a84(0x170)]:_0x3b2f5a[_0x111a84(0x16c)](_0x4a7853);break;case status_enums_1[_0x111a84(0x14b)]['QUEUEING']:case status_enums_1[_0x111a84(0x14b)][_0x111a84(0x144)]:case status_enums_1[_0x111a84(0x14b)][_0x111a84(0x13e)]:throw new Error(_0x111a84(0x15e)+_0x4a7853['status']);case status_enums_1[_0x111a84(0x14b)][_0x111a84(0x14d)]:case status_enums_1[_0x111a84(0x14b)][_0x111a84(0x168)]:case status_enums_1[_0x111a84(0x14b)][_0x111a84(0x15b)]:_0x5471e8[_0x111a84(0x16c)](_0x52d283);break;default:throw new Error(_0x111a84(0x173)+_0x4a7853[_0x111a84(0x148)]+'\x27');}}else throw new veeva_error_1[(_0x111a84(0x151))](_0x58c487[_0x111a84(0x176)]);}_0x5b6f03=_0x5471e8;}while(_0x5b6f03[_0x111a84(0x153)]);return _0x3b2f5a;}}exports['VeevaService']=VeevaService,VeevaService[a408_0x1f9181(0x15f)]=0x2710,VeevaService['CREATE_RECORDS_LIMIT']=0x1f4,VeevaService[a408_0x1f9181(0x15a)]=0x1f4;