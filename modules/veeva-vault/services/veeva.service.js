function a364_0x47f4(_0xa9cd45,_0x5ee464){const _0x16f3df=a364_0x1206();return a364_0x47f4=function(_0x2a29bc,_0x2df702){_0x2a29bc=_0x2a29bc-0x163;let _0x12069d=_0x16f3df[_0x2a29bc];return _0x12069d;},a364_0x47f4(_0xa9cd45,_0x5ee464);}const a364_0xb84249=a364_0x47f4;(function(_0x46d22c,_0x47712a){const _0x1327ba=a364_0x47f4,_0x4902ad=_0x46d22c();while(!![]){try{const _0x2c700f=-parseInt(_0x1327ba(0x17e))/0x1+parseInt(_0x1327ba(0x18e))/0x2+-parseInt(_0x1327ba(0x18d))/0x3*(parseInt(_0x1327ba(0x19b))/0x4)+parseInt(_0x1327ba(0x169))/0x5+parseInt(_0x1327ba(0x188))/0x6+-parseInt(_0x1327ba(0x166))/0x7+-parseInt(_0x1327ba(0x184))/0x8*(-parseInt(_0x1327ba(0x181))/0x9);if(_0x2c700f===_0x47712a)break;else _0x4902ad['push'](_0x4902ad['shift']());}catch(_0x202df2){_0x4902ad['push'](_0x4902ad['shift']());}}}(a364_0x1206,0x95117));const a364_0x2df702=(function(){let _0x4ffa35=!![];return function(_0x4c613a,_0x272fe1){const _0x5198e7=_0x4ffa35?function(){const _0x24fb30=a364_0x47f4;if(_0x272fe1){const _0xcd8c53=_0x272fe1[_0x24fb30(0x179)](_0x4c613a,arguments);return _0x272fe1=null,_0xcd8c53;}}:function(){};return _0x4ffa35=![],_0x5198e7;};}()),a364_0x2a29bc=a364_0x2df702(this,function(){const _0x2cb2da=a364_0x47f4;return a364_0x2a29bc['toString']()['search']('(((.+)+)+)+$')[_0x2cb2da(0x18f)]()[_0x2cb2da(0x172)](a364_0x2a29bc)[_0x2cb2da(0x190)]('(((.+)+)+)+$');});a364_0x2a29bc();'use strict';function a364_0x1206(){const _0x4ea79c=['application/json','executeVQL','Unknown\x20Job\x20status\x20:\x20\x27','executeManyVQL','2617006gnfKOi','VeevaError','_logger','4457715dKooOe','sleep','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','\x20records.','CREATE_RECORDS_LIMIT','get','all','CANCELLED','VeevaResponseStatus','constructor','VeevaConstants','SUCCESS','QUEUEING','createVeevaObjectRecords','map','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','apply','Creating\x20','../constants/veeva.constants','\x20records','chunkArray','1182473AMBbMW','../enums/status.enums','RUNNING','117FIjIUN','_connection','__esModule','610984xkXwJw','MISSED_SCHEDULE','application/x-www-form-urlencoded','length','280266XLloif','DELETE_RECORDS_LIMIT','push','getJobResult','post','1350996wVYVoq','1372286DmuOsU','toString','search','status','errors','VeevaJobStatus','log','ENDPOINT_VQL','JOB_STATUS_TIMEOUT','VeevaService','responseStatus','Deleting\x20','data','4OmMTUc'];a364_0x1206=function(){return _0x4ea79c;};return a364_0x1206();}Object['defineProperty'](exports,a364_0xb84249(0x183),{'value':!![]}),exports[a364_0xb84249(0x197)]=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require(a364_0xb84249(0x17f)),veeva_error_1=require('../classes/errors/veeva-error'),veeva_constants_1=require(a364_0xb84249(0x17b));class VeevaService{constructor({connection:_0x2bd1b8,logger:_0x58fd20}){const _0x5c1321=a364_0xb84249;this[_0x5c1321(0x182)]=_0x2bd1b8,this[_0x5c1321(0x168)]=_0x58fd20;}async[a364_0xb84249(0x165)](_0x1e3875){const _0x41cda7=a364_0xb84249,_0xe7f079=[];for(const _0x4186de of _0x1e3875){_0xe7f079['push'](this[_0x41cda7(0x163)](_0x4186de));}const _0x3d287e=await Promise[_0x41cda7(0x16f)](_0xe7f079);return _0x3d287e['flat']();}async['executeVQL'](_0x3a158a){const _0x429b1e=a364_0xb84249,_0x39d0f2=[];let _0x384dfb=this['_connection'][_0x429b1e(0x18c)](veeva_constants_1[_0x429b1e(0x173)][_0x429b1e(0x195)],new URLSearchParams([['q',_0x3a158a]]),{'headers':{'Content-Type':_0x429b1e(0x186)}}),_0x1a6901=![];do{const _0x1bc15f=await _0x384dfb,_0x2d0ad7=_0x1bc15f['data'];if(_0x2d0ad7['responseStatus']!==status_enums_1[_0x429b1e(0x171)][_0x429b1e(0x174)])throw new veeva_error_1[(_0x429b1e(0x167))](_0x2d0ad7[_0x429b1e(0x192)]);const {responseDetails:{next_page:_0xe73739},data:_0x5dbc28}=_0x2d0ad7;_0xe73739?_0x384dfb=this[_0x429b1e(0x182)][_0x429b1e(0x16e)](_0xe73739):_0x1a6901=!![],_0x39d0f2[_0x429b1e(0x18a)](..._0x5dbc28);}while(!_0x1a6901);return _0x39d0f2;}async[a364_0xb84249(0x176)](_0x572581,_0x3722ca){const _0x25aaf0=a364_0xb84249,_0x251625=[],_0x3754d0=(0x0,utils_1[_0x25aaf0(0x17d)])(_0x3722ca,VeevaService[_0x25aaf0(0x16d)]),_0x2a85ae=_0x3722ca[_0x25aaf0(0x187)];let _0x43f176=0x0;for(const _0x19378b of _0x3754d0){_0x43f176+=_0x19378b[_0x25aaf0(0x187)],this[_0x25aaf0(0x168)][_0x25aaf0(0x194)](_0x25aaf0(0x17a)+_0x43f176+'/'+_0x2a85ae+_0x25aaf0(0x16c));const _0x5ea3fa=await this[_0x25aaf0(0x182)][_0x25aaf0(0x18c)](_0x572581,_0x19378b),_0x32cfc7=_0x5ea3fa[_0x25aaf0(0x19a)];if(_0x32cfc7[_0x25aaf0(0x198)]===status_enums_1[_0x25aaf0(0x171)][_0x25aaf0(0x174)])for(const {responseStatus:_0x347c19,data:_0xdf7be6}of _0x32cfc7[_0x25aaf0(0x19a)]){if(_0x347c19===status_enums_1[_0x25aaf0(0x171)][_0x25aaf0(0x174)])_0x251625['push'](_0xdf7be6['id']);else throw new veeva_error_1[(_0x25aaf0(0x167))](_0x32cfc7[_0x25aaf0(0x192)]);}else throw new veeva_error_1['VeevaError'](_0x32cfc7[_0x25aaf0(0x192)]);}return _0x251625;}async['deleteVeevaObjectRecords'](_0x227443,_0x219577){const _0x2b173a=a364_0xb84249,_0x2fe7af=_0x219577[_0x2b173a(0x177)](_0x33a0f2=>({'id':_0x33a0f2})),_0xb9a927=(0x0,utils_1[_0x2b173a(0x17d)])(_0x2fe7af,VeevaService[_0x2b173a(0x189)]);let _0x57a36e=0x0;for(const _0x205ed1 of _0xb9a927){_0x57a36e+=_0x205ed1[_0x2b173a(0x187)],this['_logger'][_0x2b173a(0x194)](_0x2b173a(0x199)+_0x57a36e+'/'+_0x219577[_0x2b173a(0x187)]+_0x2b173a(0x17c));const {data:_0x4e37f5}=await this[_0x2b173a(0x182)]['delete'](_0x227443,{'headers':{'Content-Type':_0x2b173a(0x19c)},'data':_0x205ed1});if(_0x4e37f5['responseStatus']===status_enums_1[_0x2b173a(0x171)]['SUCCESS'])for(const _0x3adc42 of _0x4e37f5[_0x2b173a(0x19a)]){const {responseStatus:_0x52ffc3,errors:_0x2b49f1}=_0x3adc42;if(_0x52ffc3!==status_enums_1['VeevaResponseStatus'][_0x2b173a(0x174)])throw new veeva_error_1[(_0x2b173a(0x167))](_0x2b49f1);}else throw new veeva_error_1['VeevaError'](_0x4e37f5['errors']);}}async[a364_0xb84249(0x18b)](_0x2e8a3a){const _0x65150=a364_0xb84249,_0x5293b6=[];do{this[_0x65150(0x168)]['log'](_0x65150(0x16b)),await(0x0,utils_1[_0x65150(0x16a)])(VeevaService['JOB_STATUS_TIMEOUT']);const _0x5b46bd=[];for(const _0x379018 of _0x2e8a3a){const {data:_0x5f390d}=await this[_0x65150(0x182)][_0x65150(0x16e)](_0x379018);if(_0x5f390d['responseStatus']===status_enums_1['VeevaResponseStatus'][_0x65150(0x174)]){const {data:_0x265756}=_0x5f390d;switch(_0x265756[_0x65150(0x191)]){case status_enums_1[_0x65150(0x193)]['SUCCESS']:case status_enums_1['VeevaJobStatus']['ERRORS_ENCOUNTERED']:_0x5293b6[_0x65150(0x18a)](_0x265756);break;case status_enums_1['VeevaJobStatus'][_0x65150(0x175)]:case status_enums_1[_0x65150(0x193)][_0x65150(0x170)]:case status_enums_1['VeevaJobStatus'][_0x65150(0x185)]:throw new Error(_0x65150(0x178)+_0x265756[_0x65150(0x191)]);case status_enums_1[_0x65150(0x193)]['QUEUED']:case status_enums_1[_0x65150(0x193)][_0x65150(0x180)]:case status_enums_1[_0x65150(0x193)]['SCHEDULED']:_0x5b46bd[_0x65150(0x18a)](_0x379018);break;default:throw new Error(_0x65150(0x164)+_0x265756[_0x65150(0x191)]+'\x27');}}else throw new veeva_error_1[(_0x65150(0x167))](_0x5f390d[_0x65150(0x192)]);}_0x2e8a3a=_0x5b46bd;}while(_0x2e8a3a[_0x65150(0x187)]);return _0x5293b6;}}exports[a364_0xb84249(0x197)]=VeevaService,VeevaService[a364_0xb84249(0x196)]=0x2710,VeevaService[a364_0xb84249(0x16d)]=0x1f4,VeevaService[a364_0xb84249(0x189)]=0x1f4;