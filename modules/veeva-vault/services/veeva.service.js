const a364_0x50ae57=a364_0x3411;(function(_0x526c19,_0xb1b21b){const _0x2c0174=a364_0x3411,_0x4f069c=_0x526c19();while(!![]){try{const _0x3111a2=parseInt(_0x2c0174(0x1f6))/0x1+-parseInt(_0x2c0174(0x1fd))/0x2+-parseInt(_0x2c0174(0x1d6))/0x3*(-parseInt(_0x2c0174(0x1e3))/0x4)+parseInt(_0x2c0174(0x1e2))/0x5*(parseInt(_0x2c0174(0x1d7))/0x6)+-parseInt(_0x2c0174(0x1f8))/0x7+parseInt(_0x2c0174(0x1ff))/0x8*(-parseInt(_0x2c0174(0x207))/0x9)+parseInt(_0x2c0174(0x1e9))/0xa;if(_0x3111a2===_0xb1b21b)break;else _0x4f069c['push'](_0x4f069c['shift']());}catch(_0x102270){_0x4f069c['push'](_0x4f069c['shift']());}}}(a364_0x4a27,0xd3751));const a364_0x4719ff=(function(){let _0x392280=!![];return function(_0x8a69e5,_0x39f93d){const _0x5ee257=_0x392280?function(){const _0x59028d=a364_0x3411;if(_0x39f93d){const _0xbc8501=_0x39f93d[_0x59028d(0x205)](_0x8a69e5,arguments);return _0x39f93d=null,_0xbc8501;}}:function(){};return _0x392280=![],_0x5ee257;};}()),a364_0x2cf5ec=a364_0x4719ff(this,function(){const _0x131ddb=a364_0x3411;return a364_0x2cf5ec[_0x131ddb(0x1e5)]()['search'](_0x131ddb(0x1d3))['toString']()[_0x131ddb(0x1df)](a364_0x2cf5ec)[_0x131ddb(0x1dc)]('(((.+)+)+)+$');});a364_0x2cf5ec();function a364_0x4a27(){const _0x4bd9b7=['Creating\x20','4992561PCAbFn','VeevaError','DELETE_RECORDS_LIMIT','executeVQL','length','1111100OrqqNJ','sleep','1659944cnOfKv','defineProperty','JOB_STATUS_TIMEOUT','VeevaResponseStatus','push','delete','apply','data','18XMjaPQ','Deleting\x20','../classes/errors/veeva-error','(((.+)+)+)+$','map','chunkArray','28599TFefkM','27606ZqqLRs','\x20records','status','responseStatus','SCHEDULED','search','errors','all','constructor','createVeevaObjectRecords','\x20records.','1350sulzID','44hpoZsT','_logger','toString','log','__esModule','RUNNING','847840WJqbyJ','deleteVeevaObjectRecords','QUEUEING','VeevaJobStatus','SUCCESS','executeManyVQL','getJobResult','application/json','CANCELLED','CREATE_RECORDS_LIMIT','ERRORS_ENCOUNTERED','_connection','get','1117971LXIUQL'];a364_0x4a27=function(){return _0x4bd9b7;};return a364_0x4a27();}function a364_0x3411(_0xff1c09,_0x2750c1){const _0x16a076=a364_0x4a27();return a364_0x3411=function(_0x2cf5ec,_0x4719ff){_0x2cf5ec=_0x2cf5ec-0x1d1;let _0x4a2708=_0x16a076[_0x2cf5ec];return _0x4a2708;},a364_0x3411(_0xff1c09,_0x2750c1);}'use strict';Object[a364_0x50ae57(0x200)](exports,a364_0x50ae57(0x1e7),{'value':!![]}),exports['VeevaService']=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require('../enums/status.enums'),veeva_error_1=require(a364_0x50ae57(0x1d2));class VeevaService{constructor({connection:_0x788c37,logger:_0x59f784}){const _0x23068f=a364_0x50ae57;this['_connection']=_0x788c37,this[_0x23068f(0x1e4)]=_0x59f784;}async[a364_0x50ae57(0x1ee)](_0x3cacea){const _0x13be06=a364_0x50ae57,_0x51e5ea=[];for(const _0x48f456 of _0x3cacea){_0x51e5ea[_0x13be06(0x203)](this[_0x13be06(0x1fb)](_0x48f456));}const _0x3538d6=await Promise[_0x13be06(0x1de)](_0x51e5ea);return _0x3538d6['flat']();}async[a364_0x50ae57(0x1fb)](_0x5ec230){const _0x52f657=a364_0x50ae57,_0x4739f1=[];do{const _0x401d82=await this[_0x52f657(0x1f4)][_0x52f657(0x1f5)](_0x5ec230),_0x265d25=_0x401d82[_0x52f657(0x206)];if(_0x265d25['responseStatus']===status_enums_1['VeevaResponseStatus']['SUCCESS']){const {responseDetails:{next_page:_0x5bc274},data:_0x4e94e4}=_0x265d25;_0x5ec230=_0x5bc274||null,_0x4739f1[_0x52f657(0x203)](..._0x4e94e4);}else throw new veeva_error_1['VeevaError'](_0x265d25[_0x52f657(0x1dd)]);}while(_0x5ec230);return _0x4739f1;}async[a364_0x50ae57(0x1e0)](_0x2a6fcd,_0x1b57b3){const _0x51341b=a364_0x50ae57,_0x525587=[],_0x561d3b=(0x0,utils_1['chunkArray'])(_0x1b57b3,VeevaService[_0x51341b(0x1f2)]),_0x1378b1=_0x1b57b3[_0x51341b(0x1fc)];let _0x5c55df=0x0;for(const _0x249e5b of _0x561d3b){_0x5c55df+=_0x249e5b[_0x51341b(0x1fc)],this[_0x51341b(0x1e4)][_0x51341b(0x1e6)](_0x51341b(0x1f7)+_0x5c55df+'/'+_0x1378b1+_0x51341b(0x1e1));const _0x1885ae=await this[_0x51341b(0x1f4)]['post'](_0x2a6fcd,_0x249e5b),_0x360dde=_0x1885ae[_0x51341b(0x206)];if(_0x360dde[_0x51341b(0x1da)]===status_enums_1[_0x51341b(0x202)][_0x51341b(0x1ed)])for(const {responseStatus:_0x5bb048,data:_0x2a3619}of _0x360dde['data']){if(_0x5bb048===status_enums_1[_0x51341b(0x202)][_0x51341b(0x1ed)])_0x525587[_0x51341b(0x203)](_0x2a3619['id']);else throw new veeva_error_1[(_0x51341b(0x1f9))](_0x360dde[_0x51341b(0x1dd)]);}else throw new veeva_error_1[(_0x51341b(0x1f9))](_0x360dde[_0x51341b(0x1dd)]);}return _0x525587;}async[a364_0x50ae57(0x1ea)](_0x35f3e3,_0x2273c4){const _0x4d1396=a364_0x50ae57,_0x27beb5=_0x2273c4[_0x4d1396(0x1d4)](_0x5ed73f=>({'id':_0x5ed73f})),_0x3c0cbf=(0x0,utils_1[_0x4d1396(0x1d5)])(_0x27beb5,VeevaService[_0x4d1396(0x1fa)]);let _0x5d38ae=0x0;for(const _0x430a50 of _0x3c0cbf){_0x5d38ae+=_0x430a50[_0x4d1396(0x1fc)],this['_logger'][_0x4d1396(0x1e6)](_0x4d1396(0x1d1)+_0x5d38ae+'/'+_0x2273c4[_0x4d1396(0x1fc)]+_0x4d1396(0x1d8));const {data:_0x460292}=await this[_0x4d1396(0x1f4)][_0x4d1396(0x204)](_0x35f3e3,{'headers':{'Content-Type':_0x4d1396(0x1f0)},'data':_0x430a50});if(_0x460292[_0x4d1396(0x1da)]===status_enums_1['VeevaResponseStatus'][_0x4d1396(0x1ed)])for(const _0x24d657 of _0x460292['data']){const {responseStatus:_0x1431d1,errors:_0x42d172}=_0x24d657;if(_0x1431d1!==status_enums_1['VeevaResponseStatus']['SUCCESS'])throw new veeva_error_1[(_0x4d1396(0x1f9))](_0x42d172);}else throw new veeva_error_1[(_0x4d1396(0x1f9))](_0x460292['errors']);}}async[a364_0x50ae57(0x1ef)](_0x29dbb9){const _0xec59c7=a364_0x50ae57,_0x4f9d3f=[];do{this['_logger']['log']('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0xec59c7(0x1fe)])(VeevaService[_0xec59c7(0x201)]);const _0x5c7976=[];for(const _0x2fd9b4 of _0x29dbb9){const {data:_0x40637f}=await this[_0xec59c7(0x1f4)][_0xec59c7(0x1f5)](_0x2fd9b4);if(_0x40637f['responseStatus']===status_enums_1[_0xec59c7(0x202)][_0xec59c7(0x1ed)]){const {data:_0x338b61}=_0x40637f;switch(_0x338b61[_0xec59c7(0x1d9)]){case status_enums_1[_0xec59c7(0x1ec)][_0xec59c7(0x1ed)]:case status_enums_1[_0xec59c7(0x1ec)][_0xec59c7(0x1f3)]:_0x4f9d3f[_0xec59c7(0x203)](_0x338b61);break;case status_enums_1['VeevaJobStatus'][_0xec59c7(0x1eb)]:case status_enums_1[_0xec59c7(0x1ec)][_0xec59c7(0x1f1)]:case status_enums_1[_0xec59c7(0x1ec)]['MISSED_SCHEDULE']:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x338b61[_0xec59c7(0x1d9)]);case status_enums_1[_0xec59c7(0x1ec)]['QUEUED']:case status_enums_1[_0xec59c7(0x1ec)][_0xec59c7(0x1e8)]:case status_enums_1[_0xec59c7(0x1ec)][_0xec59c7(0x1db)]:_0x5c7976[_0xec59c7(0x203)](_0x2fd9b4);break;default:throw new Error('Unknown\x20Job\x20status\x20:\x20\x27'+_0x338b61[_0xec59c7(0x1d9)]+'\x27');}}else throw new veeva_error_1[(_0xec59c7(0x1f9))](_0x40637f[_0xec59c7(0x1dd)]);}_0x29dbb9=_0x5c7976;}while(_0x29dbb9['length']);return _0x4f9d3f;}}exports['VeevaService']=VeevaService,VeevaService[a364_0x50ae57(0x201)]=0x2710,VeevaService[a364_0x50ae57(0x1f2)]=0x1f4,VeevaService[a364_0x50ae57(0x1fa)]=0x1f4;