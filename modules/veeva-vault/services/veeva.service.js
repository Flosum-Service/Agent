const a363_0x2d408a=a363_0xcca5;function a363_0x870d(){const _0x573504=['VeevaResponseStatus','all','Unknown\x20Job\x20status\x20:\x20\x27','deleteVeevaObjectRecords','sleep','log','length','toString','responseStatus','40jCpUcy','(((.+)+)+)+$','apply','340683aAgEnK','defineProperty','../../shared/utils','CREATE_RECORDS_LIMIT','2989940ejXxnk','3237363XYsYMX','264hEmLPm','ERRORS_ENCOUNTERED','QUEUED','post','../classes/errors/veeva-error','\x20records.','get','2MKTNzp','VeevaError','Creating\x20','map','SUCCESS','VeevaJobStatus','delete','\x20records','1861822CPrZpy','2954388iViBZr','12JQVQGY','push','_logger','1692051HlAfSB','search','DELETE_RECORDS_LIMIT','chunkArray','status','MISSED_SCHEDULE','data','executeManyVQL','CANCELLED','JOB_STATUS_TIMEOUT','SCHEDULED','RUNNING','VeevaService','errors','_connection','executeVQL','15987422WQOThi'];a363_0x870d=function(){return _0x573504;};return a363_0x870d();}(function(_0x535c0c,_0x35b29a){const _0x1b3f69=a363_0xcca5,_0x4e7481=_0x535c0c();while(!![]){try{const _0x337c2f=-parseInt(_0x1b3f69(0x1db))/0x1*(-parseInt(_0x1b3f69(0x1ac))/0x2)+-parseInt(_0x1b3f69(0x1b1))/0x3+parseInt(_0x1b3f69(0x1ae))/0x4*(parseInt(_0x1b3f69(0x1d2))/0x5)+-parseInt(_0x1b3f69(0x1ad))/0x6+-parseInt(_0x1b3f69(0x1ce))/0x7*(parseInt(_0x1b3f69(0x1d4))/0x8)+parseInt(_0x1b3f69(0x1d3))/0x9*(parseInt(_0x1b3f69(0x1cb))/0xa)+-parseInt(_0x1b3f69(0x1c1))/0xb;if(_0x337c2f===_0x35b29a)break;else _0x4e7481['push'](_0x4e7481['shift']());}catch(_0x355e15){_0x4e7481['push'](_0x4e7481['shift']());}}}(a363_0x870d,0xeef20));const a363_0x359a87=(function(){let _0x11860b=!![];return function(_0x58e2d6,_0xe37375){const _0x265e24=_0x11860b?function(){const _0x2618f3=a363_0xcca5;if(_0xe37375){const _0x117e83=_0xe37375[_0x2618f3(0x1cd)](_0x58e2d6,arguments);return _0xe37375=null,_0x117e83;}}:function(){};return _0x11860b=![],_0x265e24;};}()),a363_0x5cc93c=a363_0x359a87(this,function(){const _0x3c10ac=a363_0xcca5;return a363_0x5cc93c[_0x3c10ac(0x1c9)]()[_0x3c10ac(0x1b2)](_0x3c10ac(0x1cc))['toString']()['constructor'](a363_0x5cc93c)[_0x3c10ac(0x1b2)](_0x3c10ac(0x1cc));});a363_0x5cc93c();'use strict';function a363_0xcca5(_0x58a6ad,_0x46d552){const _0x15154e=a363_0x870d();return a363_0xcca5=function(_0x5cc93c,_0x359a87){_0x5cc93c=_0x5cc93c-0x1ac;let _0x870ddd=_0x15154e[_0x5cc93c];return _0x870ddd;},a363_0xcca5(_0x58a6ad,_0x46d552);}Object[a363_0x2d408a(0x1cf)](exports,'__esModule',{'value':!![]}),exports[a363_0x2d408a(0x1bd)]=void 0x0;const utils_1=require(a363_0x2d408a(0x1d0)),status_enums_1=require('../enums/status.enums'),veeva_error_1=require(a363_0x2d408a(0x1d8));class VeevaService{constructor({connection:_0x329943,logger:_0x23f0e2}){this['_connection']=_0x329943,this['_logger']=_0x23f0e2;}async[a363_0x2d408a(0x1b8)](_0xf59014){const _0x415879=a363_0x2d408a,_0x5cf7e7=[];for(const _0x3c0309 of _0xf59014){_0x5cf7e7['push'](this[_0x415879(0x1c0)](_0x3c0309));}const _0x1471f4=await Promise[_0x415879(0x1c3)](_0x5cf7e7);return _0x1471f4['flat']();}async[a363_0x2d408a(0x1c0)](_0x3d2317){const _0xfb1b5c=a363_0x2d408a,_0x241386=[];do{const _0x14d01a=await this[_0xfb1b5c(0x1bf)][_0xfb1b5c(0x1da)](_0x3d2317),_0x124699=_0x14d01a['data'];if(_0x124699['responseStatus']===status_enums_1[_0xfb1b5c(0x1c2)][_0xfb1b5c(0x1df)]){const {responseDetails:{next_page:_0x15c26a},data:_0x4902d8}=_0x124699;_0x3d2317=_0x15c26a||null,_0x241386[_0xfb1b5c(0x1af)](..._0x4902d8);}else throw new veeva_error_1[(_0xfb1b5c(0x1dc))](_0x124699['errors']);}while(_0x3d2317);return _0x241386;}async['createVeevaObjectRecords'](_0x1cf51b,_0x1f2b86){const _0x548ffa=a363_0x2d408a,_0x252369=[],_0x17a7a6=(0x0,utils_1[_0x548ffa(0x1b4)])(_0x1f2b86,VeevaService[_0x548ffa(0x1d1)]),_0x1e65c5=_0x1f2b86[_0x548ffa(0x1c8)];let _0x598251=0x0;for(const _0x4e79f8 of _0x17a7a6){_0x598251+=_0x4e79f8[_0x548ffa(0x1c8)],this[_0x548ffa(0x1b0)][_0x548ffa(0x1c7)](_0x548ffa(0x1dd)+_0x598251+'/'+_0x1e65c5+_0x548ffa(0x1d9));const _0x2b9ce8=await this['_connection'][_0x548ffa(0x1d7)](_0x1cf51b,_0x4e79f8),_0x3e756e=_0x2b9ce8[_0x548ffa(0x1b7)];if(_0x3e756e['responseStatus']===status_enums_1['VeevaResponseStatus']['SUCCESS'])for(const {responseStatus:_0x59dc56,data:_0x3d1289}of _0x3e756e[_0x548ffa(0x1b7)]){if(_0x59dc56===status_enums_1[_0x548ffa(0x1c2)][_0x548ffa(0x1df)])_0x252369['push'](_0x3d1289['id']);else throw new veeva_error_1[(_0x548ffa(0x1dc))](_0x3e756e['errors']);}else throw new veeva_error_1[(_0x548ffa(0x1dc))](_0x3e756e['errors']);}return _0x252369;}async[a363_0x2d408a(0x1c5)](_0x240d76,_0x47e3bb){const _0xecac6f=a363_0x2d408a,_0x3b41c4=_0x47e3bb[_0xecac6f(0x1de)](_0x31f877=>({'id':_0x31f877})),_0x14bf8b=(0x0,utils_1[_0xecac6f(0x1b4)])(_0x3b41c4,VeevaService['DELETE_RECORDS_LIMIT']);let _0x2b07ad=0x0;for(const _0x428acf of _0x14bf8b){_0x2b07ad+=_0x428acf[_0xecac6f(0x1c8)],this['_logger'][_0xecac6f(0x1c7)]('Deleting\x20'+_0x2b07ad+'/'+_0x47e3bb[_0xecac6f(0x1c8)]+_0xecac6f(0x1e2));const {data:_0x16e0c2}=await this['_connection'][_0xecac6f(0x1e1)](_0x240d76,{'headers':{'Content-Type':'application/json'},'data':_0x428acf});if(_0x16e0c2[_0xecac6f(0x1ca)]===status_enums_1['VeevaResponseStatus'][_0xecac6f(0x1df)])for(const _0x3095b9 of _0x16e0c2[_0xecac6f(0x1b7)]){const {responseStatus:_0x10b710,errors:_0x38c81}=_0x3095b9;if(_0x10b710!==status_enums_1[_0xecac6f(0x1c2)]['SUCCESS'])throw new veeva_error_1[(_0xecac6f(0x1dc))](_0x38c81);}else throw new veeva_error_1[(_0xecac6f(0x1dc))](_0x16e0c2[_0xecac6f(0x1be)]);}}async['getJobResult'](_0xf41c12){const _0x4e8b56=a363_0x2d408a,_0x13bbba=[];do{this['_logger'][_0x4e8b56(0x1c7)]('Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.'),await(0x0,utils_1[_0x4e8b56(0x1c6)])(VeevaService[_0x4e8b56(0x1ba)]);const _0x2f0320=[];for(const _0x2c3378 of _0xf41c12){const {data:_0x32e77a}=await this[_0x4e8b56(0x1bf)][_0x4e8b56(0x1da)](_0x2c3378);if(_0x32e77a[_0x4e8b56(0x1ca)]===status_enums_1[_0x4e8b56(0x1c2)][_0x4e8b56(0x1df)]){const {data:_0x324a6f}=_0x32e77a;switch(_0x324a6f[_0x4e8b56(0x1b5)]){case status_enums_1[_0x4e8b56(0x1e0)][_0x4e8b56(0x1df)]:case status_enums_1[_0x4e8b56(0x1e0)][_0x4e8b56(0x1d5)]:_0x13bbba[_0x4e8b56(0x1af)](_0x324a6f);break;case status_enums_1[_0x4e8b56(0x1e0)]['QUEUEING']:case status_enums_1[_0x4e8b56(0x1e0)][_0x4e8b56(0x1b9)]:case status_enums_1[_0x4e8b56(0x1e0)][_0x4e8b56(0x1b6)]:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x324a6f[_0x4e8b56(0x1b5)]);case status_enums_1[_0x4e8b56(0x1e0)][_0x4e8b56(0x1d6)]:case status_enums_1[_0x4e8b56(0x1e0)][_0x4e8b56(0x1bc)]:case status_enums_1[_0x4e8b56(0x1e0)][_0x4e8b56(0x1bb)]:_0x2f0320['push'](_0x2c3378);break;default:throw new Error(_0x4e8b56(0x1c4)+_0x324a6f[_0x4e8b56(0x1b5)]+'\x27');}}else throw new veeva_error_1[(_0x4e8b56(0x1dc))](_0x32e77a[_0x4e8b56(0x1be)]);}_0xf41c12=_0x2f0320;}while(_0xf41c12[_0x4e8b56(0x1c8)]);return _0x13bbba;}}exports['VeevaService']=VeevaService,VeevaService[a363_0x2d408a(0x1ba)]=0x2710,VeevaService[a363_0x2d408a(0x1d1)]=0x1f4,VeevaService[a363_0x2d408a(0x1b3)]=0x1f4;