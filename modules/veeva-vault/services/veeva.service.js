const a364_0x3663b9=a364_0x4c6f;(function(_0x5daf32,_0x51f589){const _0x22f004=a364_0x4c6f,_0x38bab6=_0x5daf32();while(!![]){try{const _0x37d4da=-parseInt(_0x22f004(0xc8))/0x1*(parseInt(_0x22f004(0x9d))/0x2)+-parseInt(_0x22f004(0xbc))/0x3+parseInt(_0x22f004(0xb1))/0x4+parseInt(_0x22f004(0xb2))/0x5+-parseInt(_0x22f004(0xc1))/0x6*(-parseInt(_0x22f004(0xa5))/0x7)+-parseInt(_0x22f004(0x94))/0x8*(parseInt(_0x22f004(0xbe))/0x9)+parseInt(_0x22f004(0xac))/0xa*(-parseInt(_0x22f004(0x96))/0xb);if(_0x37d4da===_0x51f589)break;else _0x38bab6['push'](_0x38bab6['shift']());}catch(_0x596b54){_0x38bab6['push'](_0x38bab6['shift']());}}}(a364_0x3195,0x8eeab));const a364_0x245fa1=(function(){let _0x46e495=!![];return function(_0x1f5943,_0x50ab63){const _0x267efe=_0x46e495?function(){const _0x2e48c7=a364_0x4c6f;if(_0x50ab63){const _0x1192d4=_0x50ab63[_0x2e48c7(0xb8)](_0x1f5943,arguments);return _0x50ab63=null,_0x1192d4;}}:function(){};return _0x46e495=![],_0x267efe;};}()),a364_0x22d9db=a364_0x245fa1(this,function(){const _0x5f4bab=a364_0x4c6f;return a364_0x22d9db[_0x5f4bab(0x9a)]()['search'](_0x5f4bab(0xc9))[_0x5f4bab(0x9a)]()['constructor'](a364_0x22d9db)['search']('(((.+)+)+)+$');});a364_0x22d9db();function a364_0x3195(){const _0x598754=['executeManyVQL','24bOKUMV','VeevaJobStatus','7784414FnKcAz','Creating\x20','VeevaResponseStatus','responseStatus','toString','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','errors','22nViFKd','status','SCHEDULED','RUNNING','executeVQL','sleep','length','createVeevaObjectRecords','72457VAeKmY','MISSED_SCHEDULE','CANCELLED','../../shared/utils','ERRORS_ENCOUNTERED','SUCCESS','log','10xwVMaJ','Unknown\x20Job\x20status\x20:\x20\x27','_logger','VeevaService','post','3346836CIYepf','4437020MPFBSh','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','QUEUEING','../enums/status.enums','JOB_STATUS_TIMEOUT','chunkArray','apply','QUEUED','VeevaError','__esModule','243600OouKlI','_connection','837531lURVdD','map','DELETE_RECORDS_LIMIT','294exzwEJ','\x20records','deleteVeevaObjectRecords','../classes/errors/veeva-error','CREATE_RECORDS_LIMIT','push','getJobResult','52534dBRxPJ','(((.+)+)+)+$','data'];a364_0x3195=function(){return _0x598754;};return a364_0x3195();}'use strict';Object['defineProperty'](exports,a364_0x3663b9(0xbb),{'value':!![]}),exports[a364_0x3663b9(0xaf)]=void 0x0;function a364_0x4c6f(_0x3f1a0f,_0x5bc6fe){const _0x5d4dd0=a364_0x3195();return a364_0x4c6f=function(_0x22d9db,_0x245fa1){_0x22d9db=_0x22d9db-0x93;let _0x31955f=_0x5d4dd0[_0x22d9db];return _0x31955f;},a364_0x4c6f(_0x3f1a0f,_0x5bc6fe);}const utils_1=require(a364_0x3663b9(0xa8)),status_enums_1=require(a364_0x3663b9(0xb5)),veeva_error_1=require(a364_0x3663b9(0xc4));class VeevaService{constructor({connection:_0x51d9de,logger:_0x45807f}){this['_connection']=_0x51d9de,this['_logger']=_0x45807f;}async[a364_0x3663b9(0x93)](_0xddcef2){const _0x5436a3=a364_0x3663b9,_0x5ecde2=[];for(const _0x57f8b0 of _0xddcef2){_0x5ecde2[_0x5436a3(0xc6)](this[_0x5436a3(0xa1)](_0x57f8b0));}const _0x29b157=await Promise['all'](_0x5ecde2);return _0x29b157['flat']();}async[a364_0x3663b9(0xa1)](_0x23883c){const _0x2eb0fc=a364_0x3663b9,_0x3eb9ac=[];do{const _0x566f05=await this[_0x2eb0fc(0xbd)]['get'](_0x23883c),_0xa44d9f=_0x566f05['data'];if(_0xa44d9f[_0x2eb0fc(0x99)]===status_enums_1[_0x2eb0fc(0x98)]['SUCCESS']){const {responseDetails:{next_page:_0x47029f},data:_0x35bd36}=_0xa44d9f;_0x23883c=_0x47029f||null,_0x3eb9ac[_0x2eb0fc(0xc6)](..._0x35bd36);}else throw new veeva_error_1['VeevaError'](_0xa44d9f[_0x2eb0fc(0x9c)]);}while(_0x23883c);return _0x3eb9ac;}async[a364_0x3663b9(0xa4)](_0x1f193e,_0x39e877){const _0x21794a=a364_0x3663b9,_0x37c955=[],_0x56303b=(0x0,utils_1['chunkArray'])(_0x39e877,VeevaService[_0x21794a(0xc5)]),_0x544713=_0x39e877[_0x21794a(0xa3)];let _0x16e767=0x0;for(const _0x282d66 of _0x56303b){_0x16e767+=_0x282d66[_0x21794a(0xa3)],this['_logger'][_0x21794a(0xab)](_0x21794a(0x97)+_0x16e767+'/'+_0x544713+'\x20records.');const _0x1ac69e=await this[_0x21794a(0xbd)][_0x21794a(0xb0)](_0x1f193e,_0x282d66),_0x25394c=_0x1ac69e[_0x21794a(0xca)];if(_0x25394c[_0x21794a(0x99)]===status_enums_1[_0x21794a(0x98)][_0x21794a(0xaa)])for(const {responseStatus:_0x1ae417,data:_0x18875c}of _0x25394c[_0x21794a(0xca)]){if(_0x1ae417===status_enums_1[_0x21794a(0x98)]['SUCCESS'])_0x37c955[_0x21794a(0xc6)](_0x18875c['id']);else throw new veeva_error_1[(_0x21794a(0xba))](_0x25394c[_0x21794a(0x9c)]);}else throw new veeva_error_1[(_0x21794a(0xba))](_0x25394c[_0x21794a(0x9c)]);}return _0x37c955;}async[a364_0x3663b9(0xc3)](_0x13cc17,_0xa6893b){const _0x1bcf63=a364_0x3663b9,_0x29be8c=_0xa6893b[_0x1bcf63(0xbf)](_0x3e4229=>({'id':_0x3e4229})),_0x3bde82=(0x0,utils_1[_0x1bcf63(0xb7)])(_0x29be8c,VeevaService['DELETE_RECORDS_LIMIT']);let _0x30b751=0x0;for(const _0x40348e of _0x3bde82){_0x30b751+=_0x40348e[_0x1bcf63(0xa3)],this[_0x1bcf63(0xae)][_0x1bcf63(0xab)]('Deleting\x20'+_0x30b751+'/'+_0xa6893b['length']+_0x1bcf63(0xc2));const {data:_0x55d065}=await this[_0x1bcf63(0xbd)]['delete'](_0x13cc17,{'headers':{'Content-Type':'application/json'},'data':_0x40348e});if(_0x55d065[_0x1bcf63(0x99)]===status_enums_1[_0x1bcf63(0x98)][_0x1bcf63(0xaa)])for(const _0x4b9423 of _0x55d065[_0x1bcf63(0xca)]){const {responseStatus:_0x60d39c,errors:_0x54360f}=_0x4b9423;if(_0x60d39c!==status_enums_1[_0x1bcf63(0x98)]['SUCCESS'])throw new veeva_error_1[(_0x1bcf63(0xba))](_0x54360f);}else throw new veeva_error_1[(_0x1bcf63(0xba))](_0x55d065[_0x1bcf63(0x9c)]);}}async[a364_0x3663b9(0xc7)](_0x182037){const _0x40c3ad=a364_0x3663b9,_0x4112af=[];do{this[_0x40c3ad(0xae)][_0x40c3ad(0xab)](_0x40c3ad(0xb3)),await(0x0,utils_1[_0x40c3ad(0xa2)])(VeevaService['JOB_STATUS_TIMEOUT']);const _0x20d844=[];for(const _0x2f30a9 of _0x182037){const {data:_0x833cb1}=await this[_0x40c3ad(0xbd)]['get'](_0x2f30a9);if(_0x833cb1[_0x40c3ad(0x99)]===status_enums_1[_0x40c3ad(0x98)][_0x40c3ad(0xaa)]){const {data:_0x12b413}=_0x833cb1;switch(_0x12b413[_0x40c3ad(0x9e)]){case status_enums_1['VeevaJobStatus']['SUCCESS']:case status_enums_1['VeevaJobStatus'][_0x40c3ad(0xa9)]:_0x4112af['push'](_0x12b413);break;case status_enums_1[_0x40c3ad(0x95)][_0x40c3ad(0xb4)]:case status_enums_1[_0x40c3ad(0x95)][_0x40c3ad(0xa7)]:case status_enums_1[_0x40c3ad(0x95)][_0x40c3ad(0xa6)]:throw new Error(_0x40c3ad(0x9b)+_0x12b413[_0x40c3ad(0x9e)]);case status_enums_1[_0x40c3ad(0x95)][_0x40c3ad(0xb9)]:case status_enums_1['VeevaJobStatus'][_0x40c3ad(0xa0)]:case status_enums_1[_0x40c3ad(0x95)][_0x40c3ad(0x9f)]:_0x20d844['push'](_0x2f30a9);break;default:throw new Error(_0x40c3ad(0xad)+_0x12b413[_0x40c3ad(0x9e)]+'\x27');}}else throw new veeva_error_1[(_0x40c3ad(0xba))](_0x833cb1['errors']);}_0x182037=_0x20d844;}while(_0x182037[_0x40c3ad(0xa3)]);return _0x4112af;}}exports[a364_0x3663b9(0xaf)]=VeevaService,VeevaService[a364_0x3663b9(0xb6)]=0x2710,VeevaService[a364_0x3663b9(0xc5)]=0x1f4,VeevaService[a364_0x3663b9(0xc0)]=0x1f4;