const a340_0x24ee9b=a340_0x39f5;(function(_0x594600,_0x281a65){const _0x5dc250=a340_0x39f5,_0x2ed42e=_0x594600();while(!![]){try{const _0x3a056b=-parseInt(_0x5dc250(0x1cf))/0x1+parseInt(_0x5dc250(0x1fb))/0x2*(-parseInt(_0x5dc250(0x1db))/0x3)+parseInt(_0x5dc250(0x1ff))/0x4+parseInt(_0x5dc250(0x1dc))/0x5*(parseInt(_0x5dc250(0x1d6))/0x6)+-parseInt(_0x5dc250(0x1e2))/0x7*(-parseInt(_0x5dc250(0x1ce))/0x8)+parseInt(_0x5dc250(0x1ed))/0x9+parseInt(_0x5dc250(0x1e1))/0xa;if(_0x3a056b===_0x281a65)break;else _0x2ed42e['push'](_0x2ed42e['shift']());}catch(_0x936c03){_0x2ed42e['push'](_0x2ed42e['shift']());}}}(a340_0x4e69,0x215da));const a340_0x28a7d4=(function(){let _0x3f2e98=!![];return function(_0x247709,_0x3cb380){const _0x3ff662=_0x3f2e98?function(){const _0x18ab5e=a340_0x39f5;if(_0x3cb380){const _0x514cb1=_0x3cb380[_0x18ab5e(0x1d3)](_0x247709,arguments);return _0x3cb380=null,_0x514cb1;}}:function(){};return _0x3f2e98=![],_0x3ff662;};}()),a340_0x1f7da3=a340_0x28a7d4(this,function(){const _0x2db2c9=a340_0x39f5;return a340_0x1f7da3[_0x2db2c9(0x1d1)]()[_0x2db2c9(0x1d2)]('(((.+)+)+)+$')[_0x2db2c9(0x1d1)]()[_0x2db2c9(0x1ee)](a340_0x1f7da3)[_0x2db2c9(0x1d2)](_0x2db2c9(0x202));});a340_0x1f7da3();function a340_0x39f5(_0x24b702,_0x516b8b){const _0x5e03bc=a340_0x4e69();return a340_0x39f5=function(_0x1f7da3,_0x28a7d4){_0x1f7da3=_0x1f7da3-0x1ce;let _0x4e6909=_0x5e03bc[_0x1f7da3];return _0x4e6909;},a340_0x39f5(_0x24b702,_0x516b8b);}'use strict';function a340_0x4e69(){const _0x5c2046=['JOB_STATUS_TIMEOUT','(((.+)+)+)+$','errors','11272SveDPE','71259luaooB','status','toString','search','apply','\x20records','chunkArray','12JVFwOU','ERRORS_ENCOUNTERED','createVeevaObjectRecords','__esModule','\x20records.','3qsUJvU','26975FTzoAB','responseStatus','sleep','CANCELLED','data','1945040gCHfoq','413IqRxtA','DELETE_RECORDS_LIMIT','QUEUED','VeevaJobStatus','RUNNING','all','VeevaError','_logger','Creating\x20','_connection','VeevaService','212409azEXBd','constructor','map','QUEUEING','length','application/json','MISSED_SCHEDULE','get','defineProperty','log','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','flat','VeevaResponseStatus','executeVQL','376602sBjGmu','CREATE_RECORDS_LIMIT','SUCCESS','Unknown\x20Job\x20status\x20:\x20\x27','336800rdVzft','push'];a340_0x4e69=function(){return _0x5c2046;};return a340_0x4e69();}Object[a340_0x24ee9b(0x1f5)](exports,a340_0x24ee9b(0x1d9),{'value':!![]}),exports[a340_0x24ee9b(0x1ec)]=void 0x0;const utils_1=require('../../shared/utils'),status_enums_1=require('../enums/status.enums'),veeva_error_1=require('../classes/errors/veeva-error');class VeevaService{constructor({connection:_0xc2eb4b,logger:_0x41d2e8}){const _0x335a0c=a340_0x24ee9b;this[_0x335a0c(0x1eb)]=_0xc2eb4b,this[_0x335a0c(0x1e9)]=_0x41d2e8;}async['executeManyVQL'](_0x529032){const _0x418f61=a340_0x24ee9b,_0x5216b2=[];for(const _0x150c04 of _0x529032){_0x5216b2['push'](this[_0x418f61(0x1fa)](_0x150c04));}const _0x2896d6=await Promise[_0x418f61(0x1e7)](_0x5216b2);return _0x2896d6[_0x418f61(0x1f8)]();}async[a340_0x24ee9b(0x1fa)](_0x5a9e0d){const _0x4ab80c=a340_0x24ee9b,_0x1335ef=[];do{const _0x1f1f58=await this[_0x4ab80c(0x1eb)][_0x4ab80c(0x1f4)](_0x5a9e0d),_0x2f911b=_0x1f1f58['data'];if(_0x2f911b[_0x4ab80c(0x1dd)]===status_enums_1[_0x4ab80c(0x1f9)][_0x4ab80c(0x1fd)]){const {responseDetails:{next_page:_0x3e6be8},data:_0x4d3aca}=_0x2f911b;_0x5a9e0d=_0x3e6be8||null,_0x1335ef[_0x4ab80c(0x200)](..._0x4d3aca);}else throw new veeva_error_1['VeevaError'](_0x2f911b[_0x4ab80c(0x203)]);}while(_0x5a9e0d);return _0x1335ef;}async[a340_0x24ee9b(0x1d8)](_0x32a72f,_0x5dc667){const _0x548501=a340_0x24ee9b,_0x3debc0=[],_0x2d3a0d=(0x0,utils_1[_0x548501(0x1d5)])(_0x5dc667,VeevaService[_0x548501(0x1fc)]),_0x35ff29=_0x5dc667[_0x548501(0x1f1)];let _0x36c50c=0x0;for(const _0x52a9d5 of _0x2d3a0d){_0x36c50c+=_0x52a9d5[_0x548501(0x1f1)],this[_0x548501(0x1e9)][_0x548501(0x1f6)](_0x548501(0x1ea)+_0x36c50c+'/'+_0x35ff29+_0x548501(0x1da));const _0x2ed0e3=await this[_0x548501(0x1eb)]['post'](_0x32a72f,_0x52a9d5),_0x4fef8f=_0x2ed0e3[_0x548501(0x1e0)];if(_0x4fef8f[_0x548501(0x1dd)]===status_enums_1[_0x548501(0x1f9)][_0x548501(0x1fd)])for(const {responseStatus:_0x54f8e5,data:_0x3cff55}of _0x4fef8f[_0x548501(0x1e0)]){if(_0x54f8e5===status_enums_1[_0x548501(0x1f9)][_0x548501(0x1fd)])_0x3debc0[_0x548501(0x200)](_0x3cff55['id']);else throw new veeva_error_1[(_0x548501(0x1e8))](_0x4fef8f[_0x548501(0x203)]);}else throw new veeva_error_1[(_0x548501(0x1e8))](_0x4fef8f['errors']);}return _0x3debc0;}async['deleteVeevaObjectRecords'](_0x527b4f,_0x2a5df9){const _0x5d9549=a340_0x24ee9b,_0x308070=_0x2a5df9[_0x5d9549(0x1ef)](_0x2ac27b=>({'id':_0x2ac27b})),_0x56d8ff=(0x0,utils_1['chunkArray'])(_0x308070,VeevaService[_0x5d9549(0x1e3)]);let _0x3ad7e3=0x0;for(const _0x186a57 of _0x56d8ff){_0x3ad7e3+=_0x186a57[_0x5d9549(0x1f1)],this['_logger']['log']('Deleting\x20'+_0x3ad7e3+'/'+_0x2a5df9[_0x5d9549(0x1f1)]+_0x5d9549(0x1d4));const {data:_0x3a62ce}=await this[_0x5d9549(0x1eb)]['delete'](_0x527b4f,{'headers':{'Content-Type':_0x5d9549(0x1f2)},'data':_0x186a57});if(_0x3a62ce[_0x5d9549(0x1dd)]===status_enums_1[_0x5d9549(0x1f9)]['SUCCESS'])for(const _0x42ddba of _0x3a62ce[_0x5d9549(0x1e0)]){const {responseStatus:_0x205e3e,errors:_0xd4c9c7}=_0x42ddba;if(_0x205e3e!==status_enums_1[_0x5d9549(0x1f9)][_0x5d9549(0x1fd)])throw new veeva_error_1[(_0x5d9549(0x1e8))](_0xd4c9c7);}else throw new veeva_error_1[(_0x5d9549(0x1e8))](_0x3a62ce['errors']);}}async['getJobResult'](_0x3ab7e8){const _0x46062d=a340_0x24ee9b,_0x57aad1=[];do{this[_0x46062d(0x1e9)]['log'](_0x46062d(0x1f7)),await(0x0,utils_1[_0x46062d(0x1de)])(VeevaService[_0x46062d(0x201)]);const _0x37c6dc=[];for(const _0x31d736 of _0x3ab7e8){const {data:_0x4664e5}=await this[_0x46062d(0x1eb)][_0x46062d(0x1f4)](_0x31d736);if(_0x4664e5[_0x46062d(0x1dd)]===status_enums_1[_0x46062d(0x1f9)]['SUCCESS']){const {data:_0x489492}=_0x4664e5;switch(_0x489492['status']){case status_enums_1[_0x46062d(0x1e5)][_0x46062d(0x1fd)]:case status_enums_1[_0x46062d(0x1e5)][_0x46062d(0x1d7)]:_0x57aad1['push'](_0x489492);break;case status_enums_1[_0x46062d(0x1e5)][_0x46062d(0x1f0)]:case status_enums_1[_0x46062d(0x1e5)][_0x46062d(0x1df)]:case status_enums_1[_0x46062d(0x1e5)][_0x46062d(0x1f3)]:throw new Error('Cannot\x20retrieve\x20job.\x20Job\x20status:\x20'+_0x489492[_0x46062d(0x1d0)]);case status_enums_1['VeevaJobStatus'][_0x46062d(0x1e4)]:case status_enums_1[_0x46062d(0x1e5)][_0x46062d(0x1e6)]:case status_enums_1[_0x46062d(0x1e5)]['SCHEDULED']:_0x37c6dc[_0x46062d(0x200)](_0x31d736);break;default:throw new Error(_0x46062d(0x1fe)+_0x489492[_0x46062d(0x1d0)]+'\x27');}}else throw new veeva_error_1[(_0x46062d(0x1e8))](_0x4664e5[_0x46062d(0x203)]);}_0x3ab7e8=_0x37c6dc;}while(_0x3ab7e8[_0x46062d(0x1f1)]);return _0x57aad1;}}exports[a340_0x24ee9b(0x1ec)]=VeevaService,VeevaService[a340_0x24ee9b(0x201)]=0x2710,VeevaService[a340_0x24ee9b(0x1fc)]=0x1f4,VeevaService[a340_0x24ee9b(0x1e3)]=0x1f4;