const a340_0x1117d4=a340_0x4b30;(function(_0x5f3bdf,_0x5adabe){const _0x3d5c5e=a340_0x4b30,_0x47480b=_0x5f3bdf();while(!![]){try{const _0x54b25b=parseInt(_0x3d5c5e(0xc7))/0x1+-parseInt(_0x3d5c5e(0xca))/0x2*(parseInt(_0x3d5c5e(0xc4))/0x3)+-parseInt(_0x3d5c5e(0xd0))/0x4*(-parseInt(_0x3d5c5e(0xb4))/0x5)+parseInt(_0x3d5c5e(0xab))/0x6+parseInt(_0x3d5c5e(0xad))/0x7+-parseInt(_0x3d5c5e(0xac))/0x8+-parseInt(_0x3d5c5e(0xa6))/0x9;if(_0x54b25b===_0x5adabe)break;else _0x47480b['push'](_0x47480b['shift']());}catch(_0x4524bc){_0x47480b['push'](_0x47480b['shift']());}}}(a340_0x1d84,0xc06fd));const a340_0x4e63b0=(function(){let _0xe204c7=!![];return function(_0x1e0496,_0x6e5ca6){const _0x419fa5=_0xe204c7?function(){if(_0x6e5ca6){const _0x2e44c3=_0x6e5ca6['apply'](_0x1e0496,arguments);return _0x6e5ca6=null,_0x2e44c3;}}:function(){};return _0xe204c7=![],_0x419fa5;};}()),a340_0x3df0de=a340_0x4e63b0(this,function(){const _0x43eecc=a340_0x4b30;return a340_0x3df0de[_0x43eecc(0xa0)]()[_0x43eecc(0xd2)](_0x43eecc(0xc5))[_0x43eecc(0xa0)]()['constructor'](a340_0x3df0de)['search'](_0x43eecc(0xc5));});a340_0x3df0de();'use strict';Object[a340_0x1117d4(0xa9)](exports,a340_0x1117d4(0xb0),{'value':!![]}),exports['VeevaService']=void 0x0;function a340_0x4b30(_0x2cdc4a,_0x472ab8){const _0x59e994=a340_0x1d84();return a340_0x4b30=function(_0x3df0de,_0x4e63b0){_0x3df0de=_0x3df0de-0x9f;let _0x1d84da=_0x59e994[_0x3df0de];return _0x1d84da;},a340_0x4b30(_0x2cdc4a,_0x472ab8);}const utils_1=require(a340_0x1117d4(0xc1)),status_enums_1=require(a340_0x1117d4(0xb7)),veeva_error_1=require(a340_0x1117d4(0xa3));class VeevaService{constructor({connection:_0x1758da,logger:_0x5a1606}){const _0x106926=a340_0x1117d4;this[_0x106926(0xc2)]=_0x1758da,this[_0x106926(0x9f)]=_0x5a1606;}async[a340_0x1117d4(0xa5)](_0x47ad0e){const _0x1cf1ac=a340_0x1117d4,_0x24d12a=[];for(const _0x128da4 of _0x47ad0e){_0x24d12a['push'](this[_0x1cf1ac(0xcd)](_0x128da4));}const _0x4e856b=await Promise[_0x1cf1ac(0xcf)](_0x24d12a);return _0x4e856b[_0x1cf1ac(0xbe)]();}async[a340_0x1117d4(0xcd)](_0x218da1){const _0x4fda6e=a340_0x1117d4,_0x104567=[];do{const _0x3d4cb8=await this[_0x4fda6e(0xc2)][_0x4fda6e(0xb3)](_0x218da1),_0x48b019=_0x3d4cb8[_0x4fda6e(0xa2)];if(_0x48b019[_0x4fda6e(0xcb)]===status_enums_1[_0x4fda6e(0xaa)][_0x4fda6e(0xc6)]){const {responseDetails:{next_page:_0x446f39},data:_0x8de74c}=_0x48b019;_0x218da1=_0x446f39||null,_0x104567[_0x4fda6e(0xa4)](..._0x8de74c);}else throw new veeva_error_1[(_0x4fda6e(0xa7))](_0x48b019[_0x4fda6e(0xbf)]);}while(_0x218da1);return _0x104567;}async[a340_0x1117d4(0xd4)](_0x29483c,_0x9def36){const _0x145824=a340_0x1117d4,_0x511e95=[],_0x3d3f21=(0x0,utils_1[_0x145824(0xb8)])(_0x9def36,VeevaService[_0x145824(0xc3)]),_0x299cbc=_0x9def36[_0x145824(0xce)];let _0x302b9b=0x0;for(const _0x2d1c5f of _0x3d3f21){_0x302b9b+=_0x2d1c5f['length'],this[_0x145824(0x9f)][_0x145824(0xd3)](_0x145824(0xb9)+_0x302b9b+'/'+_0x299cbc+_0x145824(0xc0));const _0x1eed29=await this['_connection'][_0x145824(0xba)](_0x29483c,_0x2d1c5f),_0x3a1cee=_0x1eed29[_0x145824(0xa2)];if(_0x3a1cee['responseStatus']===status_enums_1['VeevaResponseStatus'][_0x145824(0xc6)])for(const {responseStatus:_0x9b673a,data:_0x1712b8}of _0x3a1cee[_0x145824(0xa2)]){if(_0x9b673a===status_enums_1[_0x145824(0xaa)][_0x145824(0xc6)])_0x511e95[_0x145824(0xa4)](_0x1712b8['id']);else throw new veeva_error_1[(_0x145824(0xa7))](_0x3a1cee[_0x145824(0xbf)]);}else throw new veeva_error_1[(_0x145824(0xa7))](_0x3a1cee[_0x145824(0xbf)]);}return _0x511e95;}async['deleteVeevaObjectRecords'](_0x36970d,_0x57a5f9){const _0x1eb2d2=a340_0x1117d4,_0x33b8af=_0x57a5f9[_0x1eb2d2(0xaf)](_0x2fc417=>({'id':_0x2fc417})),_0x91fdef=(0x0,utils_1[_0x1eb2d2(0xb8)])(_0x33b8af,VeevaService['DELETE_RECORDS_LIMIT']);let _0x59044d=0x0;for(const _0x43edff of _0x91fdef){_0x59044d+=_0x43edff[_0x1eb2d2(0xce)],this[_0x1eb2d2(0x9f)]['log'](_0x1eb2d2(0xbb)+_0x59044d+'/'+_0x57a5f9[_0x1eb2d2(0xce)]+_0x1eb2d2(0xa8));const {data:_0x2b6077}=await this[_0x1eb2d2(0xc2)]['delete'](_0x36970d,{'headers':{'Content-Type':'application/json'},'data':_0x43edff});if(_0x2b6077[_0x1eb2d2(0xcb)]===status_enums_1[_0x1eb2d2(0xaa)][_0x1eb2d2(0xc6)])for(const _0x22d498 of _0x2b6077[_0x1eb2d2(0xa2)]){const {responseStatus:_0x6fdbca,errors:_0x5be055}=_0x22d498;if(_0x6fdbca!==status_enums_1[_0x1eb2d2(0xaa)]['SUCCESS'])throw new veeva_error_1['VeevaError'](_0x5be055);}else throw new veeva_error_1[(_0x1eb2d2(0xa7))](_0x2b6077[_0x1eb2d2(0xbf)]);}}async[a340_0x1117d4(0xc8)](_0x437a1f){const _0x4e7c32=a340_0x1117d4,_0x23ea85=[];do{this['_logger']['log'](_0x4e7c32(0xae)),await(0x0,utils_1['sleep'])(VeevaService[_0x4e7c32(0xb1)]);const _0x1b432a=[];for(const _0x552d1e of _0x437a1f){const {data:_0x4c734f}=await this[_0x4e7c32(0xc2)][_0x4e7c32(0xb3)](_0x552d1e);if(_0x4c734f[_0x4e7c32(0xcb)]===status_enums_1[_0x4e7c32(0xaa)][_0x4e7c32(0xc6)]){const {data:_0x471638}=_0x4c734f;switch(_0x471638[_0x4e7c32(0xbc)]){case status_enums_1['VeevaJobStatus'][_0x4e7c32(0xc6)]:case status_enums_1[_0x4e7c32(0xbd)]['ERRORS_ENCOUNTERED']:_0x23ea85['push'](_0x471638);break;case status_enums_1['VeevaJobStatus'][_0x4e7c32(0xa1)]:case status_enums_1[_0x4e7c32(0xbd)][_0x4e7c32(0xb2)]:case status_enums_1[_0x4e7c32(0xbd)]['MISSED_SCHEDULE']:throw new Error(_0x4e7c32(0xc9)+_0x471638[_0x4e7c32(0xbc)]);case status_enums_1[_0x4e7c32(0xbd)][_0x4e7c32(0xcc)]:case status_enums_1[_0x4e7c32(0xbd)][_0x4e7c32(0xb5)]:case status_enums_1[_0x4e7c32(0xbd)]['SCHEDULED']:_0x1b432a[_0x4e7c32(0xa4)](_0x552d1e);break;default:throw new Error(_0x4e7c32(0xb6)+_0x471638[_0x4e7c32(0xbc)]+'\x27');}}else throw new veeva_error_1[(_0x4e7c32(0xa7))](_0x4c734f[_0x4e7c32(0xbf)]);}_0x437a1f=_0x1b432a;}while(_0x437a1f[_0x4e7c32(0xce)]);return _0x23ea85;}}function a340_0x1d84(){const _0x470cbe=['6UYdtpL','(((.+)+)+)+$','SUCCESS','1425052fsdRWV','getJobResult','Cannot\x20retrieve\x20job.\x20Job\x20status:\x20','426966BJTmCw','responseStatus','QUEUED','executeVQL','length','all','174084ZuFCrK','VeevaService','search','log','createVeevaObjectRecords','_logger','toString','QUEUEING','data','../classes/errors/veeva-error','push','executeManyVQL','19570554MFlXPb','VeevaError','\x20records','defineProperty','VeevaResponseStatus','6082392rqFQsx','2737032GCpoVD','2349032daSTxn','Check\x20Retrieval\x20Status:\x20Not\x20Completed.\x20Next\x20check\x20after\x2010\x20seconds.','map','__esModule','JOB_STATUS_TIMEOUT','CANCELLED','get','110cCotKh','RUNNING','Unknown\x20Job\x20status\x20:\x20\x27','../enums/status.enums','chunkArray','Creating\x20','post','Deleting\x20','status','VeevaJobStatus','flat','errors','\x20records.','../../shared/utils','_connection','CREATE_RECORDS_LIMIT'];a340_0x1d84=function(){return _0x470cbe;};return a340_0x1d84();}exports[a340_0x1117d4(0xd1)]=VeevaService,VeevaService['JOB_STATUS_TIMEOUT']=0x2710,VeevaService[a340_0x1117d4(0xc3)]=0x1f4,VeevaService['DELETE_RECORDS_LIMIT']=0x1f4;