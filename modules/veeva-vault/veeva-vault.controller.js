const a318_0x672b19=a318_0x37be;(function(_0x210bd4,_0x54bddf){const _0x446893=a318_0x37be,_0x30a253=_0x210bd4();while(!![]){try{const _0xa3ae09=-parseInt(_0x446893(0x1e7))/0x1*(-parseInt(_0x446893(0x1fc))/0x2)+-parseInt(_0x446893(0x1f1))/0x3*(parseInt(_0x446893(0x1fd))/0x4)+parseInt(_0x446893(0x1cc))/0x5*(-parseInt(_0x446893(0x1fa))/0x6)+parseInt(_0x446893(0x1ce))/0x7*(parseInt(_0x446893(0x1c6))/0x8)+-parseInt(_0x446893(0x1e0))/0x9*(-parseInt(_0x446893(0x1d4))/0xa)+-parseInt(_0x446893(0x1e5))/0xb*(-parseInt(_0x446893(0x205))/0xc)+parseInt(_0x446893(0x1f6))/0xd*(parseInt(_0x446893(0x1d7))/0xe);if(_0xa3ae09===_0x54bddf)break;else _0x30a253['push'](_0x30a253['shift']());}catch(_0x5ecbd0){_0x30a253['push'](_0x30a253['shift']());}}}(a318_0x6b94,0xa72ac));const a318_0x51a718=(function(){let _0x150c7a=!![];return function(_0x3ff374,_0x292bfb){const _0x5f125b=_0x150c7a?function(){const _0x433a3c=a318_0x37be;if(_0x292bfb){const _0x159300=_0x292bfb[_0x433a3c(0x1cd)](_0x3ff374,arguments);return _0x292bfb=null,_0x159300;}}:function(){};return _0x150c7a=![],_0x5f125b;};}()),a318_0x491505=a318_0x51a718(this,function(){const _0x16d861=a318_0x37be;return a318_0x491505['toString']()['search'](_0x16d861(0x1d8))[_0x16d861(0x1c7)]()['constructor'](a318_0x491505)[_0x16d861(0x1c4)](_0x16d861(0x1d8));});a318_0x491505();'use strict';var __decorate=this&&this[a318_0x672b19(0x1d5)]||function(_0xa9d64f,_0x5b1a13,_0xb2e430,_0x378cb2){const _0x533fda=a318_0x672b19;var _0x44be3e=arguments[_0x533fda(0x1d0)],_0x4e37fd=_0x44be3e<0x3?_0x5b1a13:_0x378cb2===null?_0x378cb2=Object[_0x533fda(0x1f0)](_0x5b1a13,_0xb2e430):_0x378cb2,_0xc52175;if(typeof Reflect===_0x533fda(0x1ed)&&typeof Reflect[_0x533fda(0x1d2)]===_0x533fda(0x1df))_0x4e37fd=Reflect[_0x533fda(0x1d2)](_0xa9d64f,_0x5b1a13,_0xb2e430,_0x378cb2);else{for(var _0x30746c=_0xa9d64f['length']-0x1;_0x30746c>=0x0;_0x30746c--)if(_0xc52175=_0xa9d64f[_0x30746c])_0x4e37fd=(_0x44be3e<0x3?_0xc52175(_0x4e37fd):_0x44be3e>0x3?_0xc52175(_0x5b1a13,_0xb2e430,_0x4e37fd):_0xc52175(_0x5b1a13,_0xb2e430))||_0x4e37fd;}return _0x44be3e>0x3&&_0x4e37fd&&Object[_0x533fda(0x1c8)](_0x5b1a13,_0xb2e430,_0x4e37fd),_0x4e37fd;},__metadata=this&&this['__metadata']||function(_0x5c378c,_0x496d36){const _0x54524b=a318_0x672b19;if(typeof Reflect===_0x54524b(0x1ed)&&typeof Reflect[_0x54524b(0x1ea)]==='function')return Reflect['metadata'](_0x5c378c,_0x496d36);},__param=this&&this[a318_0x672b19(0x1d6)]||function(_0x265e30,_0x40ce8e){return function(_0x39ed91,_0x552560){_0x40ce8e(_0x39ed91,_0x552560,_0x265e30);};},__importDefault=this&&this[a318_0x672b19(0x1ef)]||function(_0x1f3f59){const _0x94cc5a=a318_0x672b19;return _0x1f3f59&&_0x1f3f59[_0x94cc5a(0x1f4)]?_0x1f3f59:{'default':_0x1f3f59};};Object[a318_0x672b19(0x1c8)](exports,a318_0x672b19(0x1f4),{'value':!![]}),exports[a318_0x672b19(0x1ec)]=void 0x0;const core_1=require(a318_0x672b19(0x1c9)),dependency_service_1=require('./services/dependency.service'),snapshot_service_1=require('./services/snapshot.service'),deploy_service_1=require('./services/deploy.service'),veeva_request_utils_1=require('./utils/veeva-request.utils'),status_enums_1=require('./enums/status.enums'),shortid_1=__importDefault(require(a318_0x672b19(0x1dc))),fs_util_1=require(a318_0x672b19(0x1ff)),logger_1=require(a318_0x672b19(0x1da)),promises_1=require(a318_0x672b19(0x1d9)),base_veeva_error_1=require(a318_0x672b19(0x1cf)),salesforce_request_utils_1=require(a318_0x672b19(0x202)),veeva_auth_1=require(a318_0x672b19(0x1e9)),salesforce_auth_1=require('./classes/auth/salesforce-auth'),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;function a318_0x37be(_0x4c3929,_0x48b269){const _0x31ba2e=a318_0x6b94();return a318_0x37be=function(_0x491505,_0x51a718){_0x491505=_0x491505-0x1c3;let _0x6b9498=_0x31ba2e[_0x491505];return _0x6b9498;},a318_0x37be(_0x4c3929,_0x48b269);}let VeevaVaultController=class VeevaVaultController{async[a318_0x672b19(0x200)](_0x5cdde5){const _0x9cde07=a318_0x672b19,{veevaAuth:_0x506b60,timeZone:_0x3af049,attachmentLogId:_0x2a12ac}=_0x5cdde5;try{const _0x5af717=(0x0,veeva_request_utils_1['createVeevaRequest'])(new veeva_auth_1[(_0x9cde07(0x1f3))](_0x506b60,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x23493a=await salesforce_auth_1[_0x9cde07(0x1d3)]['getAuthDetails'](),_0x25e333=(0x0,salesforce_request_utils_1[_0x9cde07(0x1e2)])(new salesforce_auth_1[(_0x9cde07(0x1d3))](_0x23493a)),_0x264506=new logger_1[(_0x9cde07(0x1db))](_0x25e333,_0x3af049,_0x2a12ac),_0x3a44db=new snapshot_service_1['SnapshotService'](_0x5cdde5,_0x25e333,_0x5af717,_0x264506);return _0x3a44db['execute']()['then'](),{'responseStatus':status_enums_1[_0x9cde07(0x207)][_0x9cde07(0x1d1)]};}catch(_0x1c9dd1){return{'responseStatus':status_enums_1['AppResponseStatus'][_0x9cde07(0x1dd)],'responseMessage':_0x1c9dd1[_0x9cde07(0x1c3)]};}}async['deployFromBranch'](_0x45f119){const _0x10f4a1=a318_0x672b19,{veevaAuth:_0x426780,timeZone:_0x4ddd8e,attachmentLogId:_0x2f8e4a}=_0x45f119;try{const _0x5dc2b2=(0x0,veeva_request_utils_1[_0x10f4a1(0x1f8)])(new veeva_auth_1[(_0x10f4a1(0x1f3))](_0x426780,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x39369a=await salesforce_auth_1['SalesforceAuth'][_0x10f4a1(0x1f5)](),_0x2ac984=(0x0,salesforce_request_utils_1['createSalesforceRequest'])(new salesforce_auth_1[(_0x10f4a1(0x1d3))](_0x39369a)),_0x4bdd05=new logger_1[(_0x10f4a1(0x1db))](_0x2ac984,_0x4ddd8e,_0x2f8e4a),_0x2c6938=_0x10f4a1(0x1f2)+(0x0,shortid_1[_0x10f4a1(0x1de)])();await(0x0,fs_util_1[_0x10f4a1(0x1eb)])(_0x2c6938);const _0x1d224a=new deploy_service_1['DeployService'](_0x45f119,_0x2ac984,_0x5dc2b2,_0x4bdd05,_0x2c6938,_0x39369a[_0x10f4a1(0x1fe)]);return _0x1d224a[_0x10f4a1(0x1fb)]()['finally'](()=>(0x0,promises_1['rm'])(_0x2c6938,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x10f4a1(0x207)]['SUCCESS']};}catch(_0x5f11e1){return{'responseStatus':status_enums_1[_0x10f4a1(0x207)]['FAILURE'],'responseMessage':_0x5f11e1[_0x10f4a1(0x1c3)]};}}async[a318_0x672b19(0x1f7)](_0x1eb38b){const _0x1035c7=a318_0x672b19,{veevaAuth:_0x3f859e}=_0x1eb38b;try{const _0x461239=(0x0,veeva_request_utils_1[_0x1035c7(0x1f8)])(new veeva_auth_1[(_0x1035c7(0x1f3))](_0x3f859e)),_0x1a37cd=await salesforce_auth_1['SalesforceAuth']['getAuthDetails'](),_0x30a0c2=(0x0,salesforce_request_utils_1[_0x1035c7(0x1e2)])(new salesforce_auth_1['SalesforceAuth'](_0x1a37cd)),_0x17fd42=new dependency_service_1['DependencyService'](_0x1eb38b,_0x30a0c2,_0x461239);return await _0x17fd42['execute']();}catch(_0x4611c0){const _0x35418c=_0x4611c0 instanceof base_veeva_error_1['BaseVeevaError']?_0x4611c0[_0x1035c7(0x1e4)]()[_0x1035c7(0x1cb)]('\x0a'):_0x4611c0[_0x1035c7(0x1c3)];return{'responseStatus':status_enums_1[_0x1035c7(0x207)][_0x1035c7(0x1dd)],'responseMessage':_0x35418c};}}};function a318_0x6b94(){const _0x304849=['671778QBuAEr','temp/veeva/deploy_','VeevaAuth','__esModule','getAuthDetails','481fuXOrG','retrieveDependency','createVeevaRequest','body','2718maBFKg','execute','2300734rkvaNx','24VtIxqm','instanceUrl','./utils/fs-util','doSnapshot','design:returntype','./utils/salesforce-request.utils','deploy','prototype','24LglpPG','deployFromBranch','AppResponseStatus','message','search','design:type','84112FecIjR','toString','defineProperty','../../core','dependency','join','2285NSGjbr','apply','119imYQGA','./classes/errors/base-veeva-error','length','SUCCESS','decorate','SalesforceAuth','212880TzwhRz','__decorate','__param','19292KpZBZa','(((.+)+)+)+$','fs/promises','./classes/logger','Logger','shortid','FAILURE','default','function','324lODhRs','param','createSalesforceRequest','snapshot','getMessages','488587VXPvBl','Controller','1biTXAt','Post','./classes/auth/veeva-auth','metadata','makeDir','VeevaVaultController','object','design:paramtypes','__importDefault','getOwnPropertyDescriptor'];a318_0x6b94=function(){return _0x304849;};return a318_0x6b94();}__decorate([(0x0,core_1['Post'])(a318_0x672b19(0x1e3)),__param(0x0,core_1[a318_0x672b19(0x1e1)]['body']()),__metadata('design:type',Function),__metadata(a318_0x672b19(0x1ee),[Object]),__metadata('design:returntype',Promise)],VeevaVaultController['prototype'],a318_0x672b19(0x200),null),__decorate([(0x0,core_1[a318_0x672b19(0x1e8)])(a318_0x672b19(0x203)),__param(0x0,core_1[a318_0x672b19(0x1e1)][a318_0x672b19(0x1f9)]()),__metadata(a318_0x672b19(0x1c5),Function),__metadata(a318_0x672b19(0x1ee),[Object]),__metadata(a318_0x672b19(0x201),Promise)],VeevaVaultController[a318_0x672b19(0x204)],a318_0x672b19(0x206),null),__decorate([(0x0,core_1[a318_0x672b19(0x1e8)])(a318_0x672b19(0x1ca)),__param(0x0,core_1['param'][a318_0x672b19(0x1f9)]()),__metadata(a318_0x672b19(0x1c5),Function),__metadata(a318_0x672b19(0x1ee),[Object]),__metadata(a318_0x672b19(0x201),Promise)],VeevaVaultController[a318_0x672b19(0x204)],'retrieveDependency',null),VeevaVaultController=__decorate([(0x0,core_1[a318_0x672b19(0x1e6)])('veeva-vault'),(0x0,core_1['Version'])('v1')],VeevaVaultController),exports[a318_0x672b19(0x1ec)]=VeevaVaultController;