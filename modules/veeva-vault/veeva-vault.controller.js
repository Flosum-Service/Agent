const a265_0x2f3707=a265_0x5eca;(function(_0x211704,_0xa9e18f){const _0x258891=a265_0x5eca,_0x4ba632=_0x211704();while(!![]){try{const _0x355499=-parseInt(_0x258891(0x1a8))/0x1*(-parseInt(_0x258891(0x1da))/0x2)+parseInt(_0x258891(0x1a1))/0x3*(-parseInt(_0x258891(0x1d5))/0x4)+-parseInt(_0x258891(0x1d0))/0x5*(-parseInt(_0x258891(0x1bd))/0x6)+-parseInt(_0x258891(0x1bb))/0x7+parseInt(_0x258891(0x1a5))/0x8*(-parseInt(_0x258891(0x1d4))/0x9)+parseInt(_0x258891(0x1ad))/0xa*(-parseInt(_0x258891(0x1cc))/0xb)+parseInt(_0x258891(0x1bc))/0xc;if(_0x355499===_0xa9e18f)break;else _0x4ba632['push'](_0x4ba632['shift']());}catch(_0x258589){_0x4ba632['push'](_0x4ba632['shift']());}}}(a265_0x2338,0x18f46));const a265_0x3b0683=(function(){let _0xe3a233=!![];return function(_0x4094d5,_0x266c26){const _0x41011c=_0xe3a233?function(){const _0xb16f67=a265_0x5eca;if(_0x266c26){const _0x146a5b=_0x266c26[_0xb16f67(0x1aa)](_0x4094d5,arguments);return _0x266c26=null,_0x146a5b;}}:function(){};return _0xe3a233=![],_0x41011c;};}()),a265_0x42f4b5=a265_0x3b0683(this,function(){const _0x3c5a93=a265_0x5eca;return a265_0x42f4b5[_0x3c5a93(0x1d7)]()['search'](_0x3c5a93(0x1bf))['toString']()[_0x3c5a93(0x1d2)](a265_0x42f4b5)[_0x3c5a93(0x1a7)](_0x3c5a93(0x1bf));});a265_0x42f4b5();'use strict';function a265_0x2338(){const _0x3834d6=['./utils/veeva-request.utils','metadata','default','getOwnPropertyDescriptor','deploy','body','execute','VeevaVaultController','veeva-vault','decorate','doSnapshot','187EpXOgk','defineProperty','Post','design:paramtypes','97795gErkgf','object','constructor','makeDir','1506915OauaAZ','316SffiEi','./services/snapshot.service','toString','AppResponseStatus','./enums/status.enums','42zEUAPo','temp/veeva/deploy_','createVeevaRequest','./services/deploy.service','length','../../core','fs/promises','getAuthDetails','then','Controller','param','message','6339NZDQnD','finally','DeployService','retrieveDependency','8fhyjJO','Logger','search','5145yztKVW','./classes/logger','apply','VeevaAuth','__param','65140xvvzLN','SalesforceAuth','design:type','deployFromBranch','./classes/auth/salesforce-auth','./utils/salesforce-request.utils','./classes/auth/veeva-auth','__esModule','./classes/errors/base-veeva-error','createSalesforceRequest','prototype','getMessages','./services/dependency.service','FAILURE','809543pJiUYQ','5485476FOFcma','30eiVeVw','./utils/fs-util','(((.+)+)+)+$','design:returntype'];a265_0x2338=function(){return _0x3834d6;};return a265_0x2338();}var __decorate=this&&this['__decorate']||function(_0x2ded1e,_0x11d8a4,_0x1199c6,_0x140317){const _0x4c5979=a265_0x5eca;var _0x3c6b01=arguments[_0x4c5979(0x199)],_0x3513d8=_0x3c6b01<0x3?_0x11d8a4:_0x140317===null?_0x140317=Object[_0x4c5979(0x1c4)](_0x11d8a4,_0x1199c6):_0x140317,_0x119676;if(typeof Reflect===_0x4c5979(0x1d1)&&typeof Reflect[_0x4c5979(0x1ca)]==='function')_0x3513d8=Reflect[_0x4c5979(0x1ca)](_0x2ded1e,_0x11d8a4,_0x1199c6,_0x140317);else{for(var _0x4f6bc5=_0x2ded1e[_0x4c5979(0x199)]-0x1;_0x4f6bc5>=0x0;_0x4f6bc5--)if(_0x119676=_0x2ded1e[_0x4f6bc5])_0x3513d8=(_0x3c6b01<0x3?_0x119676(_0x3513d8):_0x3c6b01>0x3?_0x119676(_0x11d8a4,_0x1199c6,_0x3513d8):_0x119676(_0x11d8a4,_0x1199c6))||_0x3513d8;}return _0x3c6b01>0x3&&_0x3513d8&&Object[_0x4c5979(0x1cd)](_0x11d8a4,_0x1199c6,_0x3513d8),_0x3513d8;},__metadata=this&&this['__metadata']||function(_0x8c6f01,_0x24acc6){const _0x5a8c92=a265_0x5eca;if(typeof Reflect===_0x5a8c92(0x1d1)&&typeof Reflect[_0x5a8c92(0x1c2)]==='function')return Reflect[_0x5a8c92(0x1c2)](_0x8c6f01,_0x24acc6);},__param=this&&this[a265_0x2f3707(0x1ac)]||function(_0x2befce,_0x52804a){return function(_0x496073,_0x320ac5){_0x52804a(_0x496073,_0x320ac5,_0x2befce);};},__importDefault=this&&this['__importDefault']||function(_0x564e82){const _0x2d3ef4=a265_0x2f3707;return _0x564e82&&_0x564e82[_0x2d3ef4(0x1b4)]?_0x564e82:{'default':_0x564e82};};Object[a265_0x2f3707(0x1cd)](exports,'__esModule',{'value':!![]}),exports[a265_0x2f3707(0x1c8)]=void 0x0;function a265_0x5eca(_0x362bad,_0x561d5e){const _0x3bea13=a265_0x2338();return a265_0x5eca=function(_0x42f4b5,_0x3b0683){_0x42f4b5=_0x42f4b5-0x198;let _0x233811=_0x3bea13[_0x42f4b5];return _0x233811;},a265_0x5eca(_0x362bad,_0x561d5e);}const core_1=require(a265_0x2f3707(0x19a)),dependency_service_1=require(a265_0x2f3707(0x1b9)),snapshot_service_1=require(a265_0x2f3707(0x1d6)),deploy_service_1=require(a265_0x2f3707(0x198)),veeva_request_utils_1=require(a265_0x2f3707(0x1c1)),status_enums_1=require(a265_0x2f3707(0x1d9)),shortid_1=__importDefault(require('shortid')),fs_util_1=require(a265_0x2f3707(0x1be)),logger_1=require(a265_0x2f3707(0x1a9)),promises_1=require(a265_0x2f3707(0x19b)),base_veeva_error_1=require(a265_0x2f3707(0x1b5)),salesforce_request_utils_1=require(a265_0x2f3707(0x1b2)),veeva_auth_1=require(a265_0x2f3707(0x1b3)),salesforce_auth_1=require(a265_0x2f3707(0x1b1)),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;let VeevaVaultController=class VeevaVaultController{async[a265_0x2f3707(0x1cb)](_0xd8d406){const _0x37b1e1=a265_0x2f3707,{veevaAuth:_0x4e341d,timeZone:_0x45be60,attachmentLogId:_0x4418f1}=_0xd8d406;try{const _0x648e3d=(0x0,veeva_request_utils_1['createVeevaRequest'])(new veeva_auth_1[(_0x37b1e1(0x1ab))](_0x4e341d,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x22fb23=await salesforce_auth_1[_0x37b1e1(0x1ae)][_0x37b1e1(0x19c)](),_0x42617f=(0x0,salesforce_request_utils_1[_0x37b1e1(0x1b6)])(new salesforce_auth_1[(_0x37b1e1(0x1ae))](_0x22fb23)),_0x4b7f84=new logger_1[(_0x37b1e1(0x1a6))](_0x42617f,_0x45be60,_0x4418f1),_0x2d93e4=new snapshot_service_1['SnapshotService'](_0xd8d406,_0x42617f,_0x648e3d,_0x4b7f84);return _0x2d93e4[_0x37b1e1(0x1c7)]()[_0x37b1e1(0x19d)](),{'responseStatus':status_enums_1[_0x37b1e1(0x1d8)]['SUCCESS']};}catch(_0x1533a2){return{'responseStatus':status_enums_1[_0x37b1e1(0x1d8)]['FAILURE'],'responseMessage':_0x1533a2[_0x37b1e1(0x1a0)]};}}async[a265_0x2f3707(0x1b0)](_0x11fecb){const _0x14eec7=a265_0x2f3707,{veevaAuth:_0x4d86a5,timeZone:_0x2c1de3,attachmentLogId:_0x3b973d}=_0x11fecb;try{const _0x31b70a=(0x0,veeva_request_utils_1[_0x14eec7(0x1dc)])(new veeva_auth_1[(_0x14eec7(0x1ab))](_0x4d86a5,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x53f234=await salesforce_auth_1[_0x14eec7(0x1ae)]['getAuthDetails'](),_0x5606d2=(0x0,salesforce_request_utils_1['createSalesforceRequest'])(new salesforce_auth_1['SalesforceAuth'](_0x53f234)),_0x335b70=new logger_1[(_0x14eec7(0x1a6))](_0x5606d2,_0x2c1de3,_0x3b973d),_0x3438a4=_0x14eec7(0x1db)+(0x0,shortid_1[_0x14eec7(0x1c3)])();await(0x0,fs_util_1[_0x14eec7(0x1d3)])(_0x3438a4);const _0x12ac44=new deploy_service_1[(_0x14eec7(0x1a3))](_0x11fecb,_0x5606d2,_0x31b70a,_0x335b70,_0x3438a4,_0x53f234['instanceUrl']);return _0x12ac44['execute']()[_0x14eec7(0x1a2)](()=>(0x0,promises_1['rm'])(_0x3438a4,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x14eec7(0x1d8)]['SUCCESS']};}catch(_0x40e867){return{'responseStatus':status_enums_1[_0x14eec7(0x1d8)][_0x14eec7(0x1ba)],'responseMessage':_0x40e867[_0x14eec7(0x1a0)]};}}async[a265_0x2f3707(0x1a4)](_0x2521ea){const _0x12e2a5=a265_0x2f3707,{veevaAuth:_0x4810f5}=_0x2521ea;try{const _0x406df2=(0x0,veeva_request_utils_1[_0x12e2a5(0x1dc)])(new veeva_auth_1[(_0x12e2a5(0x1ab))](_0x4810f5)),_0x308ba6=await salesforce_auth_1[_0x12e2a5(0x1ae)][_0x12e2a5(0x19c)](),_0xee40ae=(0x0,salesforce_request_utils_1['createSalesforceRequest'])(new salesforce_auth_1['SalesforceAuth'](_0x308ba6)),_0x47dd61=new dependency_service_1['DependencyService'](_0x2521ea,_0xee40ae,_0x406df2);return await _0x47dd61[_0x12e2a5(0x1c7)]();}catch(_0x2d771a){const _0x300590=_0x2d771a instanceof base_veeva_error_1['BaseVeevaError']?_0x2d771a[_0x12e2a5(0x1b8)]()['join']('\x0a'):_0x2d771a[_0x12e2a5(0x1a0)];return{'responseStatus':status_enums_1[_0x12e2a5(0x1d8)][_0x12e2a5(0x1ba)],'responseMessage':_0x300590};}}};__decorate([(0x0,core_1[a265_0x2f3707(0x1ce)])('snapshot'),__param(0x0,core_1[a265_0x2f3707(0x19f)][a265_0x2f3707(0x1c6)]()),__metadata('design:type',Function),__metadata(a265_0x2f3707(0x1cf),[Object]),__metadata('design:returntype',Promise)],VeevaVaultController['prototype'],a265_0x2f3707(0x1cb),null),__decorate([(0x0,core_1['Post'])(a265_0x2f3707(0x1c5)),__param(0x0,core_1[a265_0x2f3707(0x19f)]['body']()),__metadata(a265_0x2f3707(0x1af),Function),__metadata(a265_0x2f3707(0x1cf),[Object]),__metadata(a265_0x2f3707(0x1c0),Promise)],VeevaVaultController[a265_0x2f3707(0x1b7)],a265_0x2f3707(0x1b0),null),__decorate([(0x0,core_1[a265_0x2f3707(0x1ce)])('dependency'),__param(0x0,core_1[a265_0x2f3707(0x19f)]['body']()),__metadata(a265_0x2f3707(0x1af),Function),__metadata(a265_0x2f3707(0x1cf),[Object]),__metadata(a265_0x2f3707(0x1c0),Promise)],VeevaVaultController[a265_0x2f3707(0x1b7)],'retrieveDependency',null),VeevaVaultController=__decorate([(0x0,core_1[a265_0x2f3707(0x19e)])(a265_0x2f3707(0x1c9)),(0x0,core_1['Version'])('v1')],VeevaVaultController),exports[a265_0x2f3707(0x1c8)]=VeevaVaultController;