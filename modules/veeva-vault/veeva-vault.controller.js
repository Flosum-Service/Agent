function a403_0xec4b(_0x68d57d,_0x1013fc){const _0x1a7237=a403_0x5d30();return a403_0xec4b=function(_0x1cda38,_0x1793ce){_0x1cda38=_0x1cda38-0x115;let _0x5d30c3=_0x1a7237[_0x1cda38];return _0x5d30c3;},a403_0xec4b(_0x68d57d,_0x1013fc);}const a403_0x49979f=a403_0xec4b;(function(_0x2acb56,_0x3aafc4){const _0x30844a=a403_0xec4b,_0x45443b=_0x2acb56();while(!![]){try{const _0x1baeaa=-parseInt(_0x30844a(0x149))/0x1+-parseInt(_0x30844a(0x132))/0x2+parseInt(_0x30844a(0x157))/0x3*(parseInt(_0x30844a(0x125))/0x4)+parseInt(_0x30844a(0x146))/0x5+-parseInt(_0x30844a(0x150))/0x6+parseInt(_0x30844a(0x14c))/0x7+-parseInt(_0x30844a(0x152))/0x8*(-parseInt(_0x30844a(0x12e))/0x9);if(_0x1baeaa===_0x3aafc4)break;else _0x45443b['push'](_0x45443b['shift']());}catch(_0x17a9db){_0x45443b['push'](_0x45443b['shift']());}}}(a403_0x5d30,0xca84d));const a403_0x1793ce=(function(){let _0x124e6a=!![];return function(_0x3b617e,_0x129ef4){const _0x13b84d=_0x124e6a?function(){if(_0x129ef4){const _0xaf756c=_0x129ef4['apply'](_0x3b617e,arguments);return _0x129ef4=null,_0xaf756c;}}:function(){};return _0x124e6a=![],_0x13b84d;};}()),a403_0x1cda38=a403_0x1793ce(this,function(){const _0x1a8567=a403_0xec4b;return a403_0x1cda38[_0x1a8567(0x142)]()[_0x1a8567(0x13b)](_0x1a8567(0x12d))[_0x1a8567(0x142)]()[_0x1a8567(0x14d)](a403_0x1cda38)['search'](_0x1a8567(0x12d));});a403_0x1cda38();function a403_0x5d30(){const _0x34c5af=['./services/dependency.service','675230GrlaKd','finally','temp/veeva/deploy_','261842Xqbpdl','./enums/status.enums','v1.1','646793lgtCQJ','constructor','default','./classes/loggers/logger','6436632lhsiBi','instanceUrl','16QkNovA','getAuthDetails','FAILURE','design:returntype','../../core','62073ZXHJCl','BaseVeevaError','./classes/auth/salesforce-auth','length','Controller','SalesforceAuth','then','__param','object','retrieveDependency','__decorate','getOwnPropertyDescriptor','./classes/auth/veeva-auth','VeevaVaultController','prototype','design:paramtypes','__importDefault','shortid','./services/rollback.service','SnapshotService','dependency','208ZxjgDO','defineProperty','__esModule','deployFromBranch','./services/deploy.service','createSalesforceRequest','join','body','(((.+)+)+)+$','9637335jnIQkz','DependencyService','./classes/errors/base-veeva-error','rollback','2561752nnHcZJ','fs/promises','doSnapshot','temp/veeva/rollback_','param','Logger','message','execute','decorate','search','AppResponseStatus','SUCCESS','createVeevaRequest','./utils/salesforce-request.utils','metadata','Post','toString','VeevaAuth','design:type'];a403_0x5d30=function(){return _0x34c5af;};return a403_0x5d30();}'use strict';var __decorate=this&&this[a403_0x49979f(0x11a)]||function(_0x103dac,_0x41f3e3,_0x51adf6,_0x1b178b){const _0x1df799=a403_0x49979f;var _0xc9069f=arguments[_0x1df799(0x15a)],_0xef3f57=_0xc9069f<0x3?_0x41f3e3:_0x1b178b===null?_0x1b178b=Object[_0x1df799(0x11b)](_0x41f3e3,_0x51adf6):_0x1b178b,_0x21c79c;if(typeof Reflect===_0x1df799(0x118)&&typeof Reflect[_0x1df799(0x13a)]==='function')_0xef3f57=Reflect[_0x1df799(0x13a)](_0x103dac,_0x41f3e3,_0x51adf6,_0x1b178b);else{for(var _0x460fbf=_0x103dac[_0x1df799(0x15a)]-0x1;_0x460fbf>=0x0;_0x460fbf--)if(_0x21c79c=_0x103dac[_0x460fbf])_0xef3f57=(_0xc9069f<0x3?_0x21c79c(_0xef3f57):_0xc9069f>0x3?_0x21c79c(_0x41f3e3,_0x51adf6,_0xef3f57):_0x21c79c(_0x41f3e3,_0x51adf6))||_0xef3f57;}return _0xc9069f>0x3&&_0xef3f57&&Object[_0x1df799(0x126)](_0x41f3e3,_0x51adf6,_0xef3f57),_0xef3f57;},__metadata=this&&this['__metadata']||function(_0x25213b,_0x54a536){const _0x174dee=a403_0x49979f;if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect[_0x174dee(0x140)](_0x25213b,_0x54a536);},__param=this&&this[a403_0x49979f(0x117)]||function(_0x14752d,_0x474f97){return function(_0x37874b,_0x787ffa){_0x474f97(_0x37874b,_0x787ffa,_0x14752d);};},__importDefault=this&&this[a403_0x49979f(0x120)]||function(_0x5a2d80){const _0x423160=a403_0x49979f;return _0x5a2d80&&_0x5a2d80[_0x423160(0x127)]?_0x5a2d80:{'default':_0x5a2d80};};Object['defineProperty'](exports,a403_0x49979f(0x127),{'value':!![]}),exports[a403_0x49979f(0x11d)]=void 0x0;const core_1=require(a403_0x49979f(0x156)),dependency_service_1=require(a403_0x49979f(0x145)),snapshot_service_1=require('./services/snapshot.service'),deploy_service_1=require(a403_0x49979f(0x129)),veeva_request_utils_1=require('./utils/veeva-request.utils'),status_enums_1=require(a403_0x49979f(0x14a)),shortid_1=__importDefault(require(a403_0x49979f(0x121))),fs_util_1=require('./utils/fs-util'),logger_1=require(a403_0x49979f(0x14f)),promises_1=require(a403_0x49979f(0x133)),base_veeva_error_1=require(a403_0x49979f(0x130)),salesforce_request_utils_1=require(a403_0x49979f(0x13f)),veeva_auth_1=require(a403_0x49979f(0x11c)),salesforce_auth_1=require(a403_0x49979f(0x159)),rollback_service_1=require(a403_0x49979f(0x122)),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;let VeevaVaultController=class VeevaVaultController{async['doSnapshot'](_0x266b0e){const _0x4072a1=a403_0x49979f,{veevaAuth:_0x33e491,timeZone:_0x2a3318,attachmentLogId:_0x48e347}=_0x266b0e;try{const _0x198233=(0x0,veeva_request_utils_1[_0x4072a1(0x13e)])(new veeva_auth_1[(_0x4072a1(0x143))](_0x33e491,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x2c4a6d=await salesforce_auth_1['SalesforceAuth'][_0x4072a1(0x153)](),_0xfcd884=(0x0,salesforce_request_utils_1[_0x4072a1(0x12a)])(new salesforce_auth_1['SalesforceAuth'](_0x2c4a6d)),_0xa217b7=new logger_1[(_0x4072a1(0x137))](_0xfcd884,_0x2a3318,_0x48e347),_0x361800=new snapshot_service_1[(_0x4072a1(0x123))](_0x266b0e,_0xfcd884,_0x198233,_0xa217b7);return _0x361800[_0x4072a1(0x139)]()[_0x4072a1(0x116)](),{'responseStatus':status_enums_1[_0x4072a1(0x13c)][_0x4072a1(0x13d)]};}catch(_0x41df6b){return{'responseStatus':status_enums_1[_0x4072a1(0x13c)]['FAILURE'],'responseMessage':_0x41df6b[_0x4072a1(0x138)]};}}async[a403_0x49979f(0x128)](_0x5901fa){const _0x333512=a403_0x49979f,{veevaAuth:_0x234831,timeZone:_0x4c289a,attachmentLogId:_0x152d51}=_0x5901fa;try{const _0x155dda=(0x0,veeva_request_utils_1[_0x333512(0x13e)])(new veeva_auth_1[(_0x333512(0x143))](_0x234831,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x2886d6=await salesforce_auth_1['SalesforceAuth'][_0x333512(0x153)](),_0x27eee2=(0x0,salesforce_request_utils_1[_0x333512(0x12a)])(new salesforce_auth_1[(_0x333512(0x115))](_0x2886d6)),_0x41e455=new logger_1[(_0x333512(0x137))](_0x27eee2,_0x4c289a,_0x152d51),_0x424a5d=_0x333512(0x148)+(0x0,shortid_1[_0x333512(0x14e)])();await(0x0,fs_util_1['makeDir'])(_0x424a5d);const _0x370b32=new deploy_service_1['DeployService'](_0x5901fa,_0x27eee2,_0x155dda,_0x41e455,_0x424a5d,_0x2886d6['instanceUrl']);return _0x370b32['execute']()[_0x333512(0x147)](()=>(0x0,promises_1['rm'])(_0x424a5d,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x333512(0x13c)][_0x333512(0x13d)]};}catch(_0x5f3ace){return{'responseStatus':status_enums_1[_0x333512(0x13c)][_0x333512(0x154)],'responseMessage':_0x5f3ace[_0x333512(0x138)]};}}async[a403_0x49979f(0x119)](_0x54ae8b){const _0x5f14f0=a403_0x49979f,{veevaAuth:_0x50e005}=_0x54ae8b;try{const _0x42e1e1=(0x0,veeva_request_utils_1[_0x5f14f0(0x13e)])(new veeva_auth_1['VeevaAuth'](_0x50e005)),_0x4a1f90=await salesforce_auth_1[_0x5f14f0(0x115)][_0x5f14f0(0x153)](),_0x255f0a=(0x0,salesforce_request_utils_1[_0x5f14f0(0x12a)])(new salesforce_auth_1['SalesforceAuth'](_0x4a1f90)),_0x26588d=new dependency_service_1[(_0x5f14f0(0x12f))](_0x54ae8b,_0x255f0a,_0x42e1e1);return await _0x26588d[_0x5f14f0(0x139)]();}catch(_0x3892fd){const _0x2d0408=_0x3892fd instanceof base_veeva_error_1[_0x5f14f0(0x158)]?_0x3892fd['getMessages']()[_0x5f14f0(0x12b)]('\x0a'):_0x3892fd[_0x5f14f0(0x138)];return{'responseStatus':status_enums_1['AppResponseStatus'][_0x5f14f0(0x154)],'responseMessage':_0x2d0408};}}async[a403_0x49979f(0x131)](_0x200587){const _0x5cb555=a403_0x49979f,{veevaAuth:_0x85a7b1,timeZone:_0x186f28,attachmentLogId:_0x19b576}=_0x200587;try{const _0x3e2339=(0x0,veeva_request_utils_1[_0x5cb555(0x13e)])(new veeva_auth_1[(_0x5cb555(0x143))](_0x85a7b1,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x526403=await salesforce_auth_1['SalesforceAuth'][_0x5cb555(0x153)](),_0x372816=(0x0,salesforce_request_utils_1['createSalesforceRequest'])(new salesforce_auth_1[(_0x5cb555(0x115))](_0x526403)),_0x3ac000=new logger_1[(_0x5cb555(0x137))](_0x372816,_0x186f28,_0x19b576),_0x189836=_0x5cb555(0x135)+(0x0,shortid_1['default'])();await(0x0,fs_util_1['makeDir'])(_0x189836);const _0x5172f6=new rollback_service_1['RollbackService']({..._0x200587,'connectionVeeva':_0x3e2339,'connectionSalesforce':_0x372816,'logger':_0x3ac000,'tempFolder':_0x189836,'instanceUrl':_0x526403[_0x5cb555(0x151)]});return _0x5172f6[_0x5cb555(0x139)]()[_0x5cb555(0x147)](()=>(0x0,promises_1['rm'])(_0x189836,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1['AppResponseStatus'][_0x5cb555(0x13d)]};}catch(_0x6446f1){return{'responseStatus':status_enums_1[_0x5cb555(0x13c)]['FAILURE'],'responseMessage':_0x6446f1[_0x5cb555(0x138)]};}}};__decorate([(0x0,core_1[a403_0x49979f(0x141)])('snapshot'),__param(0x0,core_1[a403_0x49979f(0x136)][a403_0x49979f(0x12c)]()),__metadata(a403_0x49979f(0x144),Function),__metadata(a403_0x49979f(0x11f),[Object]),__metadata(a403_0x49979f(0x155),Promise)],VeevaVaultController['prototype'],a403_0x49979f(0x134),null),__decorate([(0x0,core_1[a403_0x49979f(0x141)])('deploy'),__param(0x0,core_1['param'][a403_0x49979f(0x12c)]()),__metadata(a403_0x49979f(0x144),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],VeevaVaultController[a403_0x49979f(0x11e)],a403_0x49979f(0x128),null),__decorate([(0x0,core_1[a403_0x49979f(0x141)])(a403_0x49979f(0x124)),__param(0x0,core_1[a403_0x49979f(0x136)][a403_0x49979f(0x12c)]()),__metadata(a403_0x49979f(0x144),Function),__metadata(a403_0x49979f(0x11f),[Object]),__metadata(a403_0x49979f(0x155),Promise)],VeevaVaultController[a403_0x49979f(0x11e)],a403_0x49979f(0x119),null),__decorate([(0x0,core_1[a403_0x49979f(0x141)])('rollback'),__param(0x0,core_1[a403_0x49979f(0x136)][a403_0x49979f(0x12c)]()),__metadata(a403_0x49979f(0x144),Function),__metadata(a403_0x49979f(0x11f),[Object]),__metadata(a403_0x49979f(0x155),Promise)],VeevaVaultController[a403_0x49979f(0x11e)],'rollback',null),VeevaVaultController=__decorate([(0x0,core_1[a403_0x49979f(0x15b)])('veeva-vault'),(0x0,core_1['Version'])(a403_0x49979f(0x14b))],VeevaVaultController),exports[a403_0x49979f(0x11d)]=VeevaVaultController;