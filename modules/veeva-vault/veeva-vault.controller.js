function a402_0x2507(){const _0xe5e374=['temp/veeva/deploy_','43717RHaKId','./utils/veeva-request.utils','VeevaAuth','RollbackService','__decorate','design:returntype','temp/veeva/rollback_','760600WsIUhb','247288WuwlCu','design:paramtypes','toString','../../core','deploy','BaseVeevaError','decorate','Version','6nuzxJK','42IBoYlT','AppResponseStatus','apply','48OUXkzG','./classes/auth/veeva-auth','doSnapshot','./services/deploy.service','function','./services/snapshot.service','design:type','6969105STxArA','getAuthDetails','join','defineProperty','FAILURE','SalesforceAuth','retrieveDependency','./services/rollback.service','execute','instanceUrl','prototype','search','body','Post','makeDir','createVeevaRequest','Logger','metadata','deployFromBranch','10380sItoYS','51340NQGJzx','./classes/auth/salesforce-auth','./classes/errors/base-veeva-error','finally','v1.1','snapshot','__param','SnapshotService','1180417JabbxV','./services/dependency.service','4410IYlHFl','default','__esModule','(((.+)+)+)+$','__importDefault','VeevaVaultController','createSalesforceRequest','./classes/loggers/logger','SUCCESS','length','rollback','then','message','./utils/salesforce-request.utils','param'];a402_0x2507=function(){return _0xe5e374;};return a402_0x2507();}const a402_0x590d7e=a402_0x18e6;(function(_0x574f3e,_0x22c7c8){const _0x2ec953=a402_0x18e6,_0x3dcb71=_0x574f3e();while(!![]){try{const _0x4b43cf=parseInt(_0x2ec953(0xa7))/0x1*(-parseInt(_0x2ec953(0xb7))/0x2)+-parseInt(_0x2ec953(0xbb))/0x3*(parseInt(_0x2ec953(0x8d))/0x4)+-parseInt(_0x2ec953(0xae))/0x5+parseInt(_0x2ec953(0xb8))/0x6*(parseInt(_0x2ec953(0x95))/0x7)+parseInt(_0x2ec953(0xaf))/0x8+parseInt(_0x2ec953(0x97))/0x9*(parseInt(_0x2ec953(0x8c))/0xa)+-parseInt(_0x2ec953(0xc2))/0xb;if(_0x4b43cf===_0x22c7c8)break;else _0x3dcb71['push'](_0x3dcb71['shift']());}catch(_0x12cff9){_0x3dcb71['push'](_0x3dcb71['shift']());}}}(a402_0x2507,0x91f02));function a402_0x18e6(_0x13310f,_0x18a611){const _0x15ab75=a402_0x2507();return a402_0x18e6=function(_0x11aa0f,_0x45cd96){_0x11aa0f=_0x11aa0f-0x7a;let _0x2507a4=_0x15ab75[_0x11aa0f];return _0x2507a4;},a402_0x18e6(_0x13310f,_0x18a611);}const a402_0x45cd96=(function(){let _0x4d18d2=!![];return function(_0x2f6ab9,_0x3b9917){const _0x5c7a82=_0x4d18d2?function(){const _0x5b9f8b=a402_0x18e6;if(_0x3b9917){const _0x47b07f=_0x3b9917[_0x5b9f8b(0xba)](_0x2f6ab9,arguments);return _0x3b9917=null,_0x47b07f;}}:function(){};return _0x4d18d2=![],_0x5c7a82;};}()),a402_0x11aa0f=a402_0x45cd96(this,function(){const _0xe62db3=a402_0x18e6;return a402_0x11aa0f[_0xe62db3(0xb1)]()[_0xe62db3(0x84)](_0xe62db3(0x9a))['toString']()['constructor'](a402_0x11aa0f)[_0xe62db3(0x84)]('(((.+)+)+)+$');});a402_0x11aa0f();'use strict';var __decorate=this&&this[a402_0x590d7e(0xab)]||function(_0x43e1f0,_0x3b6461,_0x4b9388,_0xcf089a){const _0x1fe820=a402_0x590d7e;var _0x37e68b=arguments[_0x1fe820(0xa0)],_0x283b33=_0x37e68b<0x3?_0x3b6461:_0xcf089a===null?_0xcf089a=Object['getOwnPropertyDescriptor'](_0x3b6461,_0x4b9388):_0xcf089a,_0x2d7e01;if(typeof Reflect==='object'&&typeof Reflect[_0x1fe820(0xb5)]===_0x1fe820(0xbf))_0x283b33=Reflect[_0x1fe820(0xb5)](_0x43e1f0,_0x3b6461,_0x4b9388,_0xcf089a);else{for(var _0x5362ef=_0x43e1f0[_0x1fe820(0xa0)]-0x1;_0x5362ef>=0x0;_0x5362ef--)if(_0x2d7e01=_0x43e1f0[_0x5362ef])_0x283b33=(_0x37e68b<0x3?_0x2d7e01(_0x283b33):_0x37e68b>0x3?_0x2d7e01(_0x3b6461,_0x4b9388,_0x283b33):_0x2d7e01(_0x3b6461,_0x4b9388))||_0x283b33;}return _0x37e68b>0x3&&_0x283b33&&Object[_0x1fe820(0x7c)](_0x3b6461,_0x4b9388,_0x283b33),_0x283b33;},__metadata=this&&this['__metadata']||function(_0x2964f1,_0x47432e){const _0x210cdd=a402_0x590d7e;if(typeof Reflect==='object'&&typeof Reflect[_0x210cdd(0x8a)]===_0x210cdd(0xbf))return Reflect['metadata'](_0x2964f1,_0x47432e);},__param=this&&this[a402_0x590d7e(0x93)]||function(_0x5b1a27,_0x4c0fae){return function(_0x3051ff,_0x1d3e83){_0x4c0fae(_0x3051ff,_0x1d3e83,_0x5b1a27);};},__importDefault=this&&this[a402_0x590d7e(0x9b)]||function(_0x50de0f){const _0x3db401=a402_0x590d7e;return _0x50de0f&&_0x50de0f[_0x3db401(0x99)]?_0x50de0f:{'default':_0x50de0f};};Object[a402_0x590d7e(0x7c)](exports,a402_0x590d7e(0x99),{'value':!![]}),exports[a402_0x590d7e(0x9c)]=void 0x0;const core_1=require(a402_0x590d7e(0xb2)),dependency_service_1=require(a402_0x590d7e(0x96)),snapshot_service_1=require(a402_0x590d7e(0xc0)),deploy_service_1=require(a402_0x590d7e(0xbe)),veeva_request_utils_1=require(a402_0x590d7e(0xa8)),status_enums_1=require('./enums/status.enums'),shortid_1=__importDefault(require('shortid')),fs_util_1=require('./utils/fs-util'),logger_1=require(a402_0x590d7e(0x9e)),promises_1=require('fs/promises'),base_veeva_error_1=require(a402_0x590d7e(0x8f)),salesforce_request_utils_1=require(a402_0x590d7e(0xa4)),veeva_auth_1=require(a402_0x590d7e(0xbc)),salesforce_auth_1=require(a402_0x590d7e(0x8e)),rollback_service_1=require(a402_0x590d7e(0x80)),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;let VeevaVaultController=class VeevaVaultController{async[a402_0x590d7e(0xbd)](_0x9fc058){const _0x3c6b93=a402_0x590d7e,{veevaAuth:_0x29f9dc,timeZone:_0x4d32c7,attachmentLogId:_0x3a403d}=_0x9fc058;try{const _0x56fb68=(0x0,veeva_request_utils_1['createVeevaRequest'])(new veeva_auth_1[(_0x3c6b93(0xa9))](_0x29f9dc,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x4929a9=await salesforce_auth_1[_0x3c6b93(0x7e)]['getAuthDetails'](),_0x26c0cd=(0x0,salesforce_request_utils_1[_0x3c6b93(0x9d)])(new salesforce_auth_1[(_0x3c6b93(0x7e))](_0x4929a9)),_0x14e4ee=new logger_1[(_0x3c6b93(0x89))](_0x26c0cd,_0x4d32c7,_0x3a403d),_0xd434b4=new snapshot_service_1[(_0x3c6b93(0x94))](_0x9fc058,_0x26c0cd,_0x56fb68,_0x14e4ee);return _0xd434b4[_0x3c6b93(0x81)]()[_0x3c6b93(0xa2)](),{'responseStatus':status_enums_1[_0x3c6b93(0xb9)]['SUCCESS']};}catch(_0x3a94a2){return{'responseStatus':status_enums_1[_0x3c6b93(0xb9)][_0x3c6b93(0x7d)],'responseMessage':_0x3a94a2['message']};}}async[a402_0x590d7e(0x8b)](_0x46bce6){const _0x4c53de=a402_0x590d7e,{veevaAuth:_0x1ade10,timeZone:_0xac5f8f,attachmentLogId:_0x3f5277}=_0x46bce6;try{const _0x1d1883=(0x0,veeva_request_utils_1['createVeevaRequest'])(new veeva_auth_1[(_0x4c53de(0xa9))](_0x1ade10,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x1c9df1=await salesforce_auth_1['SalesforceAuth'][_0x4c53de(0x7a)](),_0x11e5df=(0x0,salesforce_request_utils_1['createSalesforceRequest'])(new salesforce_auth_1[(_0x4c53de(0x7e))](_0x1c9df1)),_0x5d83bb=new logger_1[(_0x4c53de(0x89))](_0x11e5df,_0xac5f8f,_0x3f5277),_0x4dd9ef=_0x4c53de(0xa6)+(0x0,shortid_1[_0x4c53de(0x98)])();await(0x0,fs_util_1[_0x4c53de(0x87)])(_0x4dd9ef);const _0x224bd8=new deploy_service_1['DeployService'](_0x46bce6,_0x11e5df,_0x1d1883,_0x5d83bb,_0x4dd9ef,_0x1c9df1[_0x4c53de(0x82)]);return _0x224bd8[_0x4c53de(0x81)]()[_0x4c53de(0x90)](()=>(0x0,promises_1['rm'])(_0x4dd9ef,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1['AppResponseStatus']['SUCCESS']};}catch(_0x54afe9){return{'responseStatus':status_enums_1[_0x4c53de(0xb9)][_0x4c53de(0x7d)],'responseMessage':_0x54afe9[_0x4c53de(0xa3)]};}}async['retrieveDependency'](_0x235112){const _0x4ce916=a402_0x590d7e,{veevaAuth:_0x45ec47}=_0x235112;try{const _0x48fc12=(0x0,veeva_request_utils_1[_0x4ce916(0x88)])(new veeva_auth_1['VeevaAuth'](_0x45ec47)),_0x3758f8=await salesforce_auth_1[_0x4ce916(0x7e)]['getAuthDetails'](),_0x9fa53b=(0x0,salesforce_request_utils_1['createSalesforceRequest'])(new salesforce_auth_1['SalesforceAuth'](_0x3758f8)),_0x3879c9=new dependency_service_1['DependencyService'](_0x235112,_0x9fa53b,_0x48fc12);return await _0x3879c9[_0x4ce916(0x81)]();}catch(_0x1d7e76){const _0x460f8b=_0x1d7e76 instanceof base_veeva_error_1[_0x4ce916(0xb4)]?_0x1d7e76['getMessages']()[_0x4ce916(0x7b)]('\x0a'):_0x1d7e76[_0x4ce916(0xa3)];return{'responseStatus':status_enums_1[_0x4ce916(0xb9)][_0x4ce916(0x7d)],'responseMessage':_0x460f8b};}}async[a402_0x590d7e(0xa1)](_0xffa129){const _0x256191=a402_0x590d7e,{veevaAuth:_0xf14745,timeZone:_0x77b930,attachmentLogId:_0x2079a0}=_0xffa129;try{const _0x514861=(0x0,veeva_request_utils_1[_0x256191(0x88)])(new veeva_auth_1[(_0x256191(0xa9))](_0xf14745,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x335cbe=await salesforce_auth_1[_0x256191(0x7e)][_0x256191(0x7a)](),_0x2daef7=(0x0,salesforce_request_utils_1['createSalesforceRequest'])(new salesforce_auth_1['SalesforceAuth'](_0x335cbe)),_0x43b138=new logger_1[(_0x256191(0x89))](_0x2daef7,_0x77b930,_0x2079a0),_0x1f461f=_0x256191(0xad)+(0x0,shortid_1[_0x256191(0x98)])();await(0x0,fs_util_1[_0x256191(0x87)])(_0x1f461f);const _0x5902d0=new rollback_service_1[(_0x256191(0xaa))]({..._0xffa129,'connectionVeeva':_0x514861,'connectionSalesforce':_0x2daef7,'logger':_0x43b138,'tempFolder':_0x1f461f,'instanceUrl':_0x335cbe[_0x256191(0x82)]});return _0x5902d0['execute']()[_0x256191(0x90)](()=>(0x0,promises_1['rm'])(_0x1f461f,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x256191(0xb9)][_0x256191(0x9f)]};}catch(_0x453ae6){return{'responseStatus':status_enums_1[_0x256191(0xb9)][_0x256191(0x7d)],'responseMessage':_0x453ae6['message']};}}};__decorate([(0x0,core_1[a402_0x590d7e(0x86)])(a402_0x590d7e(0x92)),__param(0x0,core_1[a402_0x590d7e(0xa5)][a402_0x590d7e(0x85)]()),__metadata(a402_0x590d7e(0xc1),Function),__metadata('design:paramtypes',[Object]),__metadata(a402_0x590d7e(0xac),Promise)],VeevaVaultController[a402_0x590d7e(0x83)],a402_0x590d7e(0xbd),null),__decorate([(0x0,core_1[a402_0x590d7e(0x86)])(a402_0x590d7e(0xb3)),__param(0x0,core_1['param']['body']()),__metadata(a402_0x590d7e(0xc1),Function),__metadata('design:paramtypes',[Object]),__metadata(a402_0x590d7e(0xac),Promise)],VeevaVaultController['prototype'],a402_0x590d7e(0x8b),null),__decorate([(0x0,core_1[a402_0x590d7e(0x86)])('dependency'),__param(0x0,core_1['param'][a402_0x590d7e(0x85)]()),__metadata(a402_0x590d7e(0xc1),Function),__metadata(a402_0x590d7e(0xb0),[Object]),__metadata(a402_0x590d7e(0xac),Promise)],VeevaVaultController['prototype'],a402_0x590d7e(0x7f),null),__decorate([(0x0,core_1[a402_0x590d7e(0x86)])(a402_0x590d7e(0xa1)),__param(0x0,core_1['param']['body']()),__metadata(a402_0x590d7e(0xc1),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],VeevaVaultController[a402_0x590d7e(0x83)],a402_0x590d7e(0xa1),null),VeevaVaultController=__decorate([(0x0,core_1['Controller'])('veeva-vault'),(0x0,core_1[a402_0x590d7e(0xb6)])(a402_0x590d7e(0x91))],VeevaVaultController),exports[a402_0x590d7e(0x9c)]=VeevaVaultController;