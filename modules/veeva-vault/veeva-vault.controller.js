const a318_0x22187e=a318_0xda27;(function(_0x48a184,_0x223dc1){const _0x4be0a9=a318_0xda27,_0x398890=_0x48a184();while(!![]){try{const _0x3d2702=-parseInt(_0x4be0a9(0x23c))/0x1*(parseInt(_0x4be0a9(0x22c))/0x2)+-parseInt(_0x4be0a9(0x1fb))/0x3*(parseInt(_0x4be0a9(0x1f6))/0x4)+-parseInt(_0x4be0a9(0x22b))/0x5*(parseInt(_0x4be0a9(0x1fa))/0x6)+parseInt(_0x4be0a9(0x204))/0x7*(parseInt(_0x4be0a9(0x225))/0x8)+parseInt(_0x4be0a9(0x235))/0x9*(parseInt(_0x4be0a9(0x23b))/0xa)+parseInt(_0x4be0a9(0x239))/0xb*(-parseInt(_0x4be0a9(0x228))/0xc)+parseInt(_0x4be0a9(0x211))/0xd;if(_0x3d2702===_0x223dc1)break;else _0x398890['push'](_0x398890['shift']());}catch(_0x3755ef){_0x398890['push'](_0x398890['shift']());}}}(a318_0x4f25,0x1bc8d));const a318_0x2a8bf5=(function(){let _0x470ef6=!![];return function(_0x169a9f,_0x322dc8){const _0x1e71d3=_0x470ef6?function(){const _0x4edac5=a318_0xda27;if(_0x322dc8){const _0x5d9bea=_0x322dc8[_0x4edac5(0x202)](_0x169a9f,arguments);return _0x322dc8=null,_0x5d9bea;}}:function(){};return _0x470ef6=![],_0x1e71d3;};}()),a318_0x163134=a318_0x2a8bf5(this,function(){const _0x310e8f=a318_0xda27;return a318_0x163134[_0x310e8f(0x200)]()['search']('(((.+)+)+)+$')[_0x310e8f(0x200)]()[_0x310e8f(0x236)](a318_0x163134)[_0x310e8f(0x21a)](_0x310e8f(0x229));});a318_0x163134();'use strict';function a318_0x4f25(){const _0x4b69cd=['DependencyService','param','./services/dependency.service','createVeevaRequest','getAuthDetails','design:paramtypes','100179nbbZrG','constructor','dependency','function','66242vHjqEp','default','110bgEgfJ','1SQMUyI','Post','deployFromBranch','getMessages','22496XiAvwG','temp/veeva/deploy_','Logger','DeployService','216ZayZPq','21pLLSyH','./classes/logger','veeva-vault','Controller','VeevaAuth','toString','AppResponseStatus','apply','design:type','14zgpeIz','length','doSnapshot','instanceUrl','./classes/errors/base-veeva-error','VeevaVaultController','__esModule','./utils/salesforce-request.utils','deploy','FAILURE','./services/deploy.service','prototype','fs/promises','1417637TPQqZA','finally','object','defineProperty','retrieveDependency','shortid','./utils/veeva-request.utils','design:returntype','message','search','../../core','snapshot','body','./classes/auth/salesforce-auth','getOwnPropertyDescriptor','makeDir','decorate','__decorate','execute','createSalesforceRequest','637088pfpzvX','Version','metadata','276IkvGWH','(((.+)+)+)+$','__param','5095TrVDJU','124798RXYuzS','SUCCESS','SalesforceAuth'];a318_0x4f25=function(){return _0x4b69cd;};return a318_0x4f25();}var __decorate=this&&this[a318_0x22187e(0x222)]||function(_0x46a954,_0x4f8802,_0x2d930b,_0x10c61b){const _0x1f60bf=a318_0x22187e;var _0xb9bd4a=arguments[_0x1f60bf(0x205)],_0x3fe5f7=_0xb9bd4a<0x3?_0x4f8802:_0x10c61b===null?_0x10c61b=Object[_0x1f60bf(0x21f)](_0x4f8802,_0x2d930b):_0x10c61b,_0x3a6cfd;if(typeof Reflect===_0x1f60bf(0x213)&&typeof Reflect[_0x1f60bf(0x221)]===_0x1f60bf(0x238))_0x3fe5f7=Reflect[_0x1f60bf(0x221)](_0x46a954,_0x4f8802,_0x2d930b,_0x10c61b);else{for(var _0x3de185=_0x46a954['length']-0x1;_0x3de185>=0x0;_0x3de185--)if(_0x3a6cfd=_0x46a954[_0x3de185])_0x3fe5f7=(_0xb9bd4a<0x3?_0x3a6cfd(_0x3fe5f7):_0xb9bd4a>0x3?_0x3a6cfd(_0x4f8802,_0x2d930b,_0x3fe5f7):_0x3a6cfd(_0x4f8802,_0x2d930b))||_0x3fe5f7;}return _0xb9bd4a>0x3&&_0x3fe5f7&&Object[_0x1f60bf(0x214)](_0x4f8802,_0x2d930b,_0x3fe5f7),_0x3fe5f7;},__metadata=this&&this['__metadata']||function(_0x35b9ad,_0x462a6f){const _0x4d6f1d=a318_0x22187e;if(typeof Reflect==='object'&&typeof Reflect[_0x4d6f1d(0x227)]===_0x4d6f1d(0x238))return Reflect[_0x4d6f1d(0x227)](_0x35b9ad,_0x462a6f);},__param=this&&this[a318_0x22187e(0x22a)]||function(_0x394ef9,_0xdce759){return function(_0x202cf1,_0x4589b3){_0xdce759(_0x202cf1,_0x4589b3,_0x394ef9);};},__importDefault=this&&this['__importDefault']||function(_0x3a91b1){const _0x389e21=a318_0x22187e;return _0x3a91b1&&_0x3a91b1[_0x389e21(0x20a)]?_0x3a91b1:{'default':_0x3a91b1};};Object[a318_0x22187e(0x214)](exports,a318_0x22187e(0x20a),{'value':!![]}),exports[a318_0x22187e(0x209)]=void 0x0;function a318_0xda27(_0x56abc4,_0x1e2abc){const _0x402f34=a318_0x4f25();return a318_0xda27=function(_0x163134,_0x2a8bf5){_0x163134=_0x163134-0x1f3;let _0x4f25af=_0x402f34[_0x163134];return _0x4f25af;},a318_0xda27(_0x56abc4,_0x1e2abc);}const core_1=require(a318_0x22187e(0x21b)),dependency_service_1=require(a318_0x22187e(0x231)),snapshot_service_1=require('./services/snapshot.service'),deploy_service_1=require(a318_0x22187e(0x20e)),veeva_request_utils_1=require(a318_0x22187e(0x217)),status_enums_1=require('./enums/status.enums'),shortid_1=__importDefault(require(a318_0x22187e(0x216))),fs_util_1=require('./utils/fs-util'),logger_1=require(a318_0x22187e(0x1fc)),promises_1=require(a318_0x22187e(0x210)),base_veeva_error_1=require(a318_0x22187e(0x208)),salesforce_request_utils_1=require(a318_0x22187e(0x20b)),veeva_auth_1=require('./classes/auth/veeva-auth'),salesforce_auth_1=require(a318_0x22187e(0x21e)),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;let VeevaVaultController=class VeevaVaultController{async[a318_0x22187e(0x206)](_0x592e6d){const _0xb09485=a318_0x22187e,{veevaAuth:_0x3df3ff,timeZone:_0x38a06f,attachmentLogId:_0x3cf9a1}=_0x592e6d;try{const _0x21b63f=(0x0,veeva_request_utils_1[_0xb09485(0x232)])(new veeva_auth_1['VeevaAuth'](_0x3df3ff,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x56e8e6=await salesforce_auth_1[_0xb09485(0x22e)][_0xb09485(0x233)](),_0x82603d=(0x0,salesforce_request_utils_1[_0xb09485(0x224)])(new salesforce_auth_1['SalesforceAuth'](_0x56e8e6)),_0x20fdd8=new logger_1['Logger'](_0x82603d,_0x38a06f,_0x3cf9a1),_0x114091=new snapshot_service_1['SnapshotService'](_0x592e6d,_0x82603d,_0x21b63f,_0x20fdd8);return _0x114091['execute']()['then'](),{'responseStatus':status_enums_1[_0xb09485(0x201)][_0xb09485(0x22d)]};}catch(_0x408b08){return{'responseStatus':status_enums_1[_0xb09485(0x201)][_0xb09485(0x20d)],'responseMessage':_0x408b08[_0xb09485(0x219)]};}}async[a318_0x22187e(0x1f4)](_0x16b64c){const _0xffdc98=a318_0x22187e,{veevaAuth:_0x1fed76,timeZone:_0x2b3c09,attachmentLogId:_0x3b25d9}=_0x16b64c;try{const _0x13e968=(0x0,veeva_request_utils_1[_0xffdc98(0x232)])(new veeva_auth_1['VeevaAuth'](_0x1fed76,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x62151f=await salesforce_auth_1['SalesforceAuth'][_0xffdc98(0x233)](),_0x48f65e=(0x0,salesforce_request_utils_1[_0xffdc98(0x224)])(new salesforce_auth_1[(_0xffdc98(0x22e))](_0x62151f)),_0x633ad5=new logger_1[(_0xffdc98(0x1f8))](_0x48f65e,_0x2b3c09,_0x3b25d9),_0x2ce617=_0xffdc98(0x1f7)+(0x0,shortid_1[_0xffdc98(0x23a)])();await(0x0,fs_util_1[_0xffdc98(0x220)])(_0x2ce617);const _0x20fe69=new deploy_service_1[(_0xffdc98(0x1f9))](_0x16b64c,_0x48f65e,_0x13e968,_0x633ad5,_0x2ce617,_0x62151f[_0xffdc98(0x207)]);return _0x20fe69[_0xffdc98(0x223)]()[_0xffdc98(0x212)](()=>(0x0,promises_1['rm'])(_0x2ce617,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0xffdc98(0x201)][_0xffdc98(0x22d)]};}catch(_0x333ff0){return{'responseStatus':status_enums_1[_0xffdc98(0x201)]['FAILURE'],'responseMessage':_0x333ff0['message']};}}async[a318_0x22187e(0x215)](_0x2d342d){const _0xe22fca=a318_0x22187e,{veevaAuth:_0x4b5633}=_0x2d342d;try{const _0x40d9b5=(0x0,veeva_request_utils_1['createVeevaRequest'])(new veeva_auth_1[(_0xe22fca(0x1ff))](_0x4b5633)),_0x104ad8=await salesforce_auth_1[_0xe22fca(0x22e)][_0xe22fca(0x233)](),_0x2aa7c2=(0x0,salesforce_request_utils_1[_0xe22fca(0x224)])(new salesforce_auth_1[(_0xe22fca(0x22e))](_0x104ad8)),_0x2ff5c3=new dependency_service_1[(_0xe22fca(0x22f))](_0x2d342d,_0x2aa7c2,_0x40d9b5);return await _0x2ff5c3['execute']();}catch(_0x27788f){const _0x59e0d1=_0x27788f instanceof base_veeva_error_1['BaseVeevaError']?_0x27788f[_0xe22fca(0x1f5)]()['join']('\x0a'):_0x27788f[_0xe22fca(0x219)];return{'responseStatus':status_enums_1[_0xe22fca(0x201)]['FAILURE'],'responseMessage':_0x59e0d1};}}};__decorate([(0x0,core_1[a318_0x22187e(0x1f3)])(a318_0x22187e(0x21c)),__param(0x0,core_1[a318_0x22187e(0x230)][a318_0x22187e(0x21d)]()),__metadata(a318_0x22187e(0x203),Function),__metadata(a318_0x22187e(0x234),[Object]),__metadata('design:returntype',Promise)],VeevaVaultController['prototype'],a318_0x22187e(0x206),null),__decorate([(0x0,core_1[a318_0x22187e(0x1f3)])(a318_0x22187e(0x20c)),__param(0x0,core_1['param'][a318_0x22187e(0x21d)]()),__metadata(a318_0x22187e(0x203),Function),__metadata(a318_0x22187e(0x234),[Object]),__metadata(a318_0x22187e(0x218),Promise)],VeevaVaultController[a318_0x22187e(0x20f)],a318_0x22187e(0x1f4),null),__decorate([(0x0,core_1[a318_0x22187e(0x1f3)])(a318_0x22187e(0x237)),__param(0x0,core_1[a318_0x22187e(0x230)][a318_0x22187e(0x21d)]()),__metadata(a318_0x22187e(0x203),Function),__metadata(a318_0x22187e(0x234),[Object]),__metadata(a318_0x22187e(0x218),Promise)],VeevaVaultController[a318_0x22187e(0x20f)],a318_0x22187e(0x215),null),VeevaVaultController=__decorate([(0x0,core_1[a318_0x22187e(0x1fe)])(a318_0x22187e(0x1fd)),(0x0,core_1[a318_0x22187e(0x226)])('v1')],VeevaVaultController),exports['VeevaVaultController']=VeevaVaultController;