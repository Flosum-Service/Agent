function a319_0x2084(_0x57ff85,_0x20a6ad){const _0x5b645f=a319_0x114a();return a319_0x2084=function(_0x41d4fd,_0x160dfb){_0x41d4fd=_0x41d4fd-0x16b;let _0x114abc=_0x5b645f[_0x41d4fd];return _0x114abc;},a319_0x2084(_0x57ff85,_0x20a6ad);}const a319_0x51fecf=a319_0x2084;(function(_0x2280e7,_0x5eb988){const _0xbf1d8c=a319_0x2084,_0x28af34=_0x2280e7();while(!![]){try{const _0x46bd9c=-parseInt(_0xbf1d8c(0x19d))/0x1+parseInt(_0xbf1d8c(0x18e))/0x2+-parseInt(_0xbf1d8c(0x16d))/0x3+-parseInt(_0xbf1d8c(0x1a6))/0x4+parseInt(_0xbf1d8c(0x186))/0x5+parseInt(_0xbf1d8c(0x1a4))/0x6+-parseInt(_0xbf1d8c(0x178))/0x7*(-parseInt(_0xbf1d8c(0x18c))/0x8);if(_0x46bd9c===_0x5eb988)break;else _0x28af34['push'](_0x28af34['shift']());}catch(_0x1087c5){_0x28af34['push'](_0x28af34['shift']());}}}(a319_0x114a,0x25abe));const a319_0x160dfb=(function(){let _0x30568f=!![];return function(_0x24faa8,_0x269ffd){const _0x348af5=_0x30568f?function(){const _0x43cc6a=a319_0x2084;if(_0x269ffd){const _0x35d03c=_0x269ffd[_0x43cc6a(0x185)](_0x24faa8,arguments);return _0x269ffd=null,_0x35d03c;}}:function(){};return _0x30568f=![],_0x348af5;};}()),a319_0x41d4fd=a319_0x160dfb(this,function(){const _0x13ac9a=a319_0x2084;return a319_0x41d4fd[_0x13ac9a(0x190)]()[_0x13ac9a(0x198)](_0x13ac9a(0x17c))[_0x13ac9a(0x190)]()['constructor'](a319_0x41d4fd)[_0x13ac9a(0x198)](_0x13ac9a(0x17c));});a319_0x41d4fd();function a319_0x114a(){const _0xcd52a9=['snapshot','Logger','temp/veeva/deploy_','./utils/fs-util','Version','SnapshotService','default','search','VeevaAuth','./classes/errors/base-veeva-error','AppResponseStatus','createSalesforceRequest','78119erzfKE','getOwnPropertyDescriptor','decorate','message','makeDir','Post','doSnapshot','575142AiTJat','shortid','837008qwWYWl','defineProperty','Controller','body','SUCCESS','createVeevaRequest','metadata','deployFromBranch','626658WIqUyW','__importDefault','./utils/salesforce-request.utils','SalesforceAuth','length','object','fs/promises','retrieveDependency','FAILURE','__esModule','__metadata','7hHzyUw','dependency','VeevaVaultController','__param','(((.+)+)+)+$','./services/dependency.service','../../core','execute','deploy','./classes/auth/salesforce-auth','join','design:paramtypes','design:returntype','apply','608855XUlPAc','function','prototype','param','design:type','./utils/veeva-request.utils','2617096udtEKD','getAuthDetails','211588zmqpwc','BaseVeevaError','toString'];a319_0x114a=function(){return _0xcd52a9;};return a319_0x114a();}'use strict';var __decorate=this&&this['__decorate']||function(_0x310bec,_0x59160e,_0x1173a2,_0x1d404f){const _0x5afc71=a319_0x2084;var _0xbc270f=arguments[_0x5afc71(0x171)],_0x4d37af=_0xbc270f<0x3?_0x59160e:_0x1d404f===null?_0x1d404f=Object[_0x5afc71(0x19e)](_0x59160e,_0x1173a2):_0x1d404f,_0x2cdd0f;if(typeof Reflect===_0x5afc71(0x172)&&typeof Reflect[_0x5afc71(0x19f)]===_0x5afc71(0x187))_0x4d37af=Reflect[_0x5afc71(0x19f)](_0x310bec,_0x59160e,_0x1173a2,_0x1d404f);else{for(var _0xad4e11=_0x310bec['length']-0x1;_0xad4e11>=0x0;_0xad4e11--)if(_0x2cdd0f=_0x310bec[_0xad4e11])_0x4d37af=(_0xbc270f<0x3?_0x2cdd0f(_0x4d37af):_0xbc270f>0x3?_0x2cdd0f(_0x59160e,_0x1173a2,_0x4d37af):_0x2cdd0f(_0x59160e,_0x1173a2))||_0x4d37af;}return _0xbc270f>0x3&&_0x4d37af&&Object[_0x5afc71(0x1a7)](_0x59160e,_0x1173a2,_0x4d37af),_0x4d37af;},__metadata=this&&this[a319_0x51fecf(0x177)]||function(_0x34549d,_0x38429c){const _0x1cabfe=a319_0x51fecf;if(typeof Reflect==='object'&&typeof Reflect[_0x1cabfe(0x16b)]===_0x1cabfe(0x187))return Reflect[_0x1cabfe(0x16b)](_0x34549d,_0x38429c);},__param=this&&this[a319_0x51fecf(0x17b)]||function(_0x5c2be2,_0x8a9b2){return function(_0x3c5b95,_0x2677c1){_0x8a9b2(_0x3c5b95,_0x2677c1,_0x5c2be2);};},__importDefault=this&&this[a319_0x51fecf(0x16e)]||function(_0x31beaa){const _0x4b18d6=a319_0x51fecf;return _0x31beaa&&_0x31beaa[_0x4b18d6(0x176)]?_0x31beaa:{'default':_0x31beaa};};Object[a319_0x51fecf(0x1a7)](exports,a319_0x51fecf(0x176),{'value':!![]}),exports['VeevaVaultController']=void 0x0;const core_1=require(a319_0x51fecf(0x17e)),dependency_service_1=require(a319_0x51fecf(0x17d)),snapshot_service_1=require('./services/snapshot.service'),deploy_service_1=require('./services/deploy.service'),veeva_request_utils_1=require(a319_0x51fecf(0x18b)),status_enums_1=require('./enums/status.enums'),shortid_1=__importDefault(require(a319_0x51fecf(0x1a5))),fs_util_1=require(a319_0x51fecf(0x194)),logger_1=require('./classes/logger'),promises_1=require(a319_0x51fecf(0x173)),base_veeva_error_1=require(a319_0x51fecf(0x19a)),salesforce_request_utils_1=require(a319_0x51fecf(0x16f)),veeva_auth_1=require('./classes/auth/veeva-auth'),salesforce_auth_1=require(a319_0x51fecf(0x181)),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;let VeevaVaultController=class VeevaVaultController{async[a319_0x51fecf(0x1a3)](_0x174df3){const _0x1b3b8c=a319_0x51fecf,{veevaAuth:_0x5d306a,timeZone:_0x64d761,attachmentLogId:_0x2fc0d5}=_0x174df3;try{const _0x1f0fc5=(0x0,veeva_request_utils_1[_0x1b3b8c(0x1ab)])(new veeva_auth_1['VeevaAuth'](_0x5d306a,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x58b438=await salesforce_auth_1[_0x1b3b8c(0x170)]['getAuthDetails'](),_0x423de6=(0x0,salesforce_request_utils_1[_0x1b3b8c(0x19c)])(new salesforce_auth_1[(_0x1b3b8c(0x170))](_0x58b438)),_0x73ddd=new logger_1[(_0x1b3b8c(0x192))](_0x423de6,_0x64d761,_0x2fc0d5),_0x1086af=new snapshot_service_1[(_0x1b3b8c(0x196))](_0x174df3,_0x423de6,_0x1f0fc5,_0x73ddd);return _0x1086af[_0x1b3b8c(0x17f)]()['then'](),{'responseStatus':status_enums_1[_0x1b3b8c(0x19b)][_0x1b3b8c(0x1aa)]};}catch(_0x2510fc){return{'responseStatus':status_enums_1[_0x1b3b8c(0x19b)][_0x1b3b8c(0x175)],'responseMessage':_0x2510fc[_0x1b3b8c(0x1a0)]};}}async[a319_0x51fecf(0x16c)](_0x3b756a){const _0x3d119e=a319_0x51fecf,{veevaAuth:_0x34067a,timeZone:_0x3619d2,attachmentLogId:_0x575114}=_0x3b756a;try{const _0x20a54a=(0x0,veeva_request_utils_1[_0x3d119e(0x1ab)])(new veeva_auth_1[(_0x3d119e(0x199))](_0x34067a,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x5f2692=await salesforce_auth_1[_0x3d119e(0x170)][_0x3d119e(0x18d)](),_0x14a416=(0x0,salesforce_request_utils_1[_0x3d119e(0x19c)])(new salesforce_auth_1[(_0x3d119e(0x170))](_0x5f2692)),_0xd8ca97=new logger_1[(_0x3d119e(0x192))](_0x14a416,_0x3619d2,_0x575114),_0x39a7f8=_0x3d119e(0x193)+(0x0,shortid_1[_0x3d119e(0x197)])();await(0x0,fs_util_1[_0x3d119e(0x1a1)])(_0x39a7f8);const _0x64e1cd=new deploy_service_1['DeployService'](_0x3b756a,_0x14a416,_0x20a54a,_0xd8ca97,_0x39a7f8,_0x5f2692['instanceUrl']);return _0x64e1cd[_0x3d119e(0x17f)]()['finally'](()=>(0x0,promises_1['rm'])(_0x39a7f8,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x3d119e(0x19b)][_0x3d119e(0x1aa)]};}catch(_0x3b92ee){return{'responseStatus':status_enums_1['AppResponseStatus'][_0x3d119e(0x175)],'responseMessage':_0x3b92ee['message']};}}async[a319_0x51fecf(0x174)](_0x4df8a6){const _0x14dc93=a319_0x51fecf,{veevaAuth:_0x2f79f7}=_0x4df8a6;try{const _0x36e33a=(0x0,veeva_request_utils_1[_0x14dc93(0x1ab)])(new veeva_auth_1[(_0x14dc93(0x199))](_0x2f79f7)),_0x4ce227=await salesforce_auth_1[_0x14dc93(0x170)][_0x14dc93(0x18d)](),_0x3d4a6=(0x0,salesforce_request_utils_1[_0x14dc93(0x19c)])(new salesforce_auth_1['SalesforceAuth'](_0x4ce227)),_0x3fcfd1=new dependency_service_1['DependencyService'](_0x4df8a6,_0x3d4a6,_0x36e33a);return await _0x3fcfd1[_0x14dc93(0x17f)]();}catch(_0x21b695){const _0x19319b=_0x21b695 instanceof base_veeva_error_1[_0x14dc93(0x18f)]?_0x21b695['getMessages']()[_0x14dc93(0x182)]('\x0a'):_0x21b695[_0x14dc93(0x1a0)];return{'responseStatus':status_enums_1[_0x14dc93(0x19b)][_0x14dc93(0x175)],'responseMessage':_0x19319b};}}};__decorate([(0x0,core_1[a319_0x51fecf(0x1a2)])(a319_0x51fecf(0x191)),__param(0x0,core_1[a319_0x51fecf(0x189)][a319_0x51fecf(0x1a9)]()),__metadata(a319_0x51fecf(0x18a),Function),__metadata(a319_0x51fecf(0x183),[Object]),__metadata(a319_0x51fecf(0x184),Promise)],VeevaVaultController[a319_0x51fecf(0x188)],'doSnapshot',null),__decorate([(0x0,core_1[a319_0x51fecf(0x1a2)])(a319_0x51fecf(0x180)),__param(0x0,core_1[a319_0x51fecf(0x189)][a319_0x51fecf(0x1a9)]()),__metadata(a319_0x51fecf(0x18a),Function),__metadata(a319_0x51fecf(0x183),[Object]),__metadata(a319_0x51fecf(0x184),Promise)],VeevaVaultController['prototype'],a319_0x51fecf(0x16c),null),__decorate([(0x0,core_1['Post'])(a319_0x51fecf(0x179)),__param(0x0,core_1[a319_0x51fecf(0x189)][a319_0x51fecf(0x1a9)]()),__metadata(a319_0x51fecf(0x18a),Function),__metadata(a319_0x51fecf(0x183),[Object]),__metadata('design:returntype',Promise)],VeevaVaultController[a319_0x51fecf(0x188)],a319_0x51fecf(0x174),null),VeevaVaultController=__decorate([(0x0,core_1[a319_0x51fecf(0x1a8)])('veeva-vault'),(0x0,core_1[a319_0x51fecf(0x195)])('v1')],VeevaVaultController),exports[a319_0x51fecf(0x17a)]=VeevaVaultController;