function a415_0x1398(){const _0x24fd33=['defineProperty','(((.+)+)+)+$','design:returntype','getAuthDetails','../../core','229910BhYgtY','VeevaVaultController','./utils/fs-util','2943873LoBCwB','DependencyService','__decorate','AppResponseStatus','DeployService','join','prototype','SalesforceAuth','SUCCESS','param','shortid','./utils/veeva-request.utils','metadata','SnapshotService','Version','makeDir','createSalesforceRequest','temp/veeva/deploy_','toString','doSnapshot','message','fs/promises','3707880oFfZHk','veeva-vault','retrieveDependency','6489iIZHAR','length','Controller','execute','./classes/loggers/logger','RollbackService','createVeevaRequest','4axCRpe','552mHCVIM','./classes/auth/veeva-auth','snapshot','__metadata','getMessages','VeevaAuth','default','__esModule','Post','instanceUrl','382511dBLjao','FAILURE','object','./services/snapshot.service','function','3466115dEpfLz','decorate','body','dependency','./services/dependency.service','design:type','design:paramtypes','then','./classes/auth/salesforce-auth','v1.1','__param','166008zjbVLA','deployFromBranch','getOwnPropertyDescriptor','./utils/salesforce-request.utils','Logger','search'];a415_0x1398=function(){return _0x24fd33;};return a415_0x1398();}const a415_0x436f0d=a415_0x35f2;(function(_0x21e257,_0x5170e7){const _0xd429d6=a415_0x35f2,_0x4a3408=_0x21e257();while(!![]){try{const _0x52ba7b=parseInt(_0xd429d6(0x125))/0x1+parseInt(_0xd429d6(0x140))/0x2+-parseInt(_0xd429d6(0x135))/0x3*(-parseInt(_0xd429d6(0x11a))/0x4)+parseInt(_0xd429d6(0x12a))/0x5+parseInt(_0xd429d6(0x11b))/0x6*(-parseInt(_0xd429d6(0x113))/0x7)+-parseInt(_0xd429d6(0x110))/0x8+-parseInt(_0xd429d6(0x143))/0x9;if(_0x52ba7b===_0x5170e7)break;else _0x4a3408['push'](_0x4a3408['shift']());}catch(_0x9a3b26){_0x4a3408['push'](_0x4a3408['shift']());}}}(a415_0x1398,0x5a5ef));const a415_0x1f964e=(function(){let _0x8c906e=!![];return function(_0x19f441,_0x1e4174){const _0x1dcd74=_0x8c906e?function(){if(_0x1e4174){const _0x21f5ea=_0x1e4174['apply'](_0x19f441,arguments);return _0x1e4174=null,_0x21f5ea;}}:function(){};return _0x8c906e=![],_0x1dcd74;};}()),a415_0x544657=a415_0x1f964e(this,function(){const _0x5bae93=a415_0x35f2;return a415_0x544657[_0x5bae93(0x10c)]()[_0x5bae93(0x13a)](_0x5bae93(0x13c))[_0x5bae93(0x10c)]()['constructor'](a415_0x544657)[_0x5bae93(0x13a)](_0x5bae93(0x13c));});a415_0x544657();function a415_0x35f2(_0x127a1a,_0x28ceb6){const _0x9b95bc=a415_0x1398();return a415_0x35f2=function(_0x544657,_0x1f964e){_0x544657=_0x544657-0xfc;let _0x1398e8=_0x9b95bc[_0x544657];return _0x1398e8;},a415_0x35f2(_0x127a1a,_0x28ceb6);}'use strict';var __decorate=this&&this[a415_0x436f0d(0xfc)]||function(_0x547145,_0xb5dba,_0x38ebb8,_0x16d393){const _0x6d1f6c=a415_0x436f0d;var _0xb65336=arguments[_0x6d1f6c(0x114)],_0x57e0a2=_0xb65336<0x3?_0xb5dba:_0x16d393===null?_0x16d393=Object[_0x6d1f6c(0x137)](_0xb5dba,_0x38ebb8):_0x16d393,_0x45809c;if(typeof Reflect===_0x6d1f6c(0x127)&&typeof Reflect[_0x6d1f6c(0x12b)]===_0x6d1f6c(0x129))_0x57e0a2=Reflect[_0x6d1f6c(0x12b)](_0x547145,_0xb5dba,_0x38ebb8,_0x16d393);else{for(var _0x5c0c2b=_0x547145[_0x6d1f6c(0x114)]-0x1;_0x5c0c2b>=0x0;_0x5c0c2b--)if(_0x45809c=_0x547145[_0x5c0c2b])_0x57e0a2=(_0xb65336<0x3?_0x45809c(_0x57e0a2):_0xb65336>0x3?_0x45809c(_0xb5dba,_0x38ebb8,_0x57e0a2):_0x45809c(_0xb5dba,_0x38ebb8))||_0x57e0a2;}return _0xb65336>0x3&&_0x57e0a2&&Object[_0x6d1f6c(0x13b)](_0xb5dba,_0x38ebb8,_0x57e0a2),_0x57e0a2;},__metadata=this&&this[a415_0x436f0d(0x11e)]||function(_0x28230f,_0x33cb7d){const _0x105b6f=a415_0x436f0d;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x105b6f(0x129))return Reflect[_0x105b6f(0x106)](_0x28230f,_0x33cb7d);},__param=this&&this[a415_0x436f0d(0x134)]||function(_0x225a1f,_0x549c5e){return function(_0x2a4099,_0x2e0218){_0x549c5e(_0x2a4099,_0x2e0218,_0x225a1f);};},__importDefault=this&&this['__importDefault']||function(_0x4b3e9e){const _0x1bfaf4=a415_0x436f0d;return _0x4b3e9e&&_0x4b3e9e[_0x1bfaf4(0x122)]?_0x4b3e9e:{'default':_0x4b3e9e};};Object[a415_0x436f0d(0x13b)](exports,a415_0x436f0d(0x122),{'value':!![]}),exports[a415_0x436f0d(0x141)]=void 0x0;const core_1=require(a415_0x436f0d(0x13f)),dependency_service_1=require(a415_0x436f0d(0x12e)),snapshot_service_1=require(a415_0x436f0d(0x128)),deploy_service_1=require('./services/deploy.service'),veeva_request_utils_1=require(a415_0x436f0d(0x105)),status_enums_1=require('./enums/status.enums'),shortid_1=__importDefault(require(a415_0x436f0d(0x104))),fs_util_1=require(a415_0x436f0d(0x142)),logger_1=require(a415_0x436f0d(0x117)),promises_1=require(a415_0x436f0d(0x10f)),base_veeva_error_1=require('./classes/errors/base-veeva-error'),salesforce_request_utils_1=require(a415_0x436f0d(0x138)),veeva_auth_1=require(a415_0x436f0d(0x11c)),salesforce_auth_1=require(a415_0x436f0d(0x132)),rollback_service_1=require('./services/rollback.service'),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;let VeevaVaultController=class VeevaVaultController{async[a415_0x436f0d(0x10d)](_0xef7b0b){const _0x2a48a4=a415_0x436f0d,{veevaAuth:_0x58beae,timeZone:_0x699b89,attachmentLogId:_0x3162b3}=_0xef7b0b;try{const _0x5e8610=(0x0,veeva_request_utils_1[_0x2a48a4(0x119)])(new veeva_auth_1[(_0x2a48a4(0x120))](_0x58beae,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x3e3667=await salesforce_auth_1['SalesforceAuth'][_0x2a48a4(0x13e)](),_0x15e0fd=(0x0,salesforce_request_utils_1[_0x2a48a4(0x10a)])(new salesforce_auth_1['SalesforceAuth'](_0x3e3667)),_0x809e9f=new logger_1['Logger'](_0x15e0fd,_0x699b89,_0x3162b3),_0x4c819c=new snapshot_service_1[(_0x2a48a4(0x107))](_0xef7b0b,_0x15e0fd,_0x5e8610,_0x809e9f);return _0x4c819c[_0x2a48a4(0x116)]()[_0x2a48a4(0x131)](),{'responseStatus':status_enums_1[_0x2a48a4(0xfd)][_0x2a48a4(0x102)]};}catch(_0x47f608){return{'responseStatus':status_enums_1[_0x2a48a4(0xfd)][_0x2a48a4(0x126)],'responseMessage':_0x47f608[_0x2a48a4(0x10e)]};}}async['deployFromBranch'](_0x3f0d21){const _0x30a018=a415_0x436f0d,{veevaAuth:_0x1c6a7d,timeZone:_0xc63ae,attachmentLogId:_0x17b326}=_0x3f0d21;try{const _0x56493d=(0x0,veeva_request_utils_1[_0x30a018(0x119)])(new veeva_auth_1[(_0x30a018(0x120))](_0x1c6a7d,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x3c3fb4=await salesforce_auth_1[_0x30a018(0x101)][_0x30a018(0x13e)](),_0x4c2d86=(0x0,salesforce_request_utils_1['createSalesforceRequest'])(new salesforce_auth_1[(_0x30a018(0x101))](_0x3c3fb4)),_0x23ed59=new logger_1[(_0x30a018(0x139))](_0x4c2d86,_0xc63ae,_0x17b326),_0x5d28e1=_0x30a018(0x10b)+(0x0,shortid_1[_0x30a018(0x121)])();await(0x0,fs_util_1[_0x30a018(0x109)])(_0x5d28e1);const _0xc9cec4=new deploy_service_1[(_0x30a018(0xfe))](_0x3f0d21,_0x4c2d86,_0x56493d,_0x23ed59,_0x5d28e1,_0x3c3fb4[_0x30a018(0x124)]);return _0xc9cec4[_0x30a018(0x116)]()['finally'](()=>(0x0,promises_1['rm'])(_0x5d28e1,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x30a018(0xfd)]['SUCCESS']};}catch(_0x569776){return{'responseStatus':status_enums_1['AppResponseStatus'][_0x30a018(0x126)],'responseMessage':_0x569776[_0x30a018(0x10e)]};}}async[a415_0x436f0d(0x112)](_0x38289d){const _0x16164b=a415_0x436f0d,{veevaAuth:_0x50380c}=_0x38289d;try{const _0x3e9732=(0x0,veeva_request_utils_1[_0x16164b(0x119)])(new veeva_auth_1[(_0x16164b(0x120))](_0x50380c)),_0x3c142c=await salesforce_auth_1[_0x16164b(0x101)][_0x16164b(0x13e)](),_0x44f758=(0x0,salesforce_request_utils_1[_0x16164b(0x10a)])(new salesforce_auth_1[(_0x16164b(0x101))](_0x3c142c)),_0x41896f=new dependency_service_1[(_0x16164b(0x144))](_0x38289d,_0x44f758,_0x3e9732);return await _0x41896f[_0x16164b(0x116)]();}catch(_0x494cba){const _0x415923=_0x494cba instanceof base_veeva_error_1['BaseVeevaError']?_0x494cba[_0x16164b(0x11f)]()[_0x16164b(0xff)]('\x0a'):_0x494cba[_0x16164b(0x10e)];return{'responseStatus':status_enums_1[_0x16164b(0xfd)][_0x16164b(0x126)],'responseMessage':_0x415923};}}async['rollback'](_0xe2a2a0){const _0x193c7e=a415_0x436f0d,{veevaAuth:_0x9771f4,timeZone:_0x11820d,attachmentLogId:_0x716c2b}=_0xe2a2a0;try{const _0x30fc99=(0x0,veeva_request_utils_1[_0x193c7e(0x119)])(new veeva_auth_1[(_0x193c7e(0x120))](_0x9771f4,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x2e9ea7=await salesforce_auth_1[_0x193c7e(0x101)][_0x193c7e(0x13e)](),_0x5ea5f9=(0x0,salesforce_request_utils_1[_0x193c7e(0x10a)])(new salesforce_auth_1[(_0x193c7e(0x101))](_0x2e9ea7)),_0x2d422a=new logger_1['Logger'](_0x5ea5f9,_0x11820d,_0x716c2b),_0x4ba932='temp/veeva/rollback_'+(0x0,shortid_1['default'])();await(0x0,fs_util_1[_0x193c7e(0x109)])(_0x4ba932);const _0x5953c6=new rollback_service_1[(_0x193c7e(0x118))]({..._0xe2a2a0,'connectionVeeva':_0x30fc99,'connectionSalesforce':_0x5ea5f9,'logger':_0x2d422a,'tempFolder':_0x4ba932,'instanceUrl':_0x2e9ea7['instanceUrl']});return _0x5953c6['execute']()['finally'](()=>(0x0,promises_1['rm'])(_0x4ba932,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x193c7e(0xfd)][_0x193c7e(0x102)]};}catch(_0x35ef42){return{'responseStatus':status_enums_1['AppResponseStatus'][_0x193c7e(0x126)],'responseMessage':_0x35ef42[_0x193c7e(0x10e)]};}}};__decorate([(0x0,core_1[a415_0x436f0d(0x123)])(a415_0x436f0d(0x11d)),__param(0x0,core_1[a415_0x436f0d(0x103)][a415_0x436f0d(0x12c)]()),__metadata(a415_0x436f0d(0x12f),Function),__metadata(a415_0x436f0d(0x130),[Object]),__metadata(a415_0x436f0d(0x13d),Promise)],VeevaVaultController[a415_0x436f0d(0x100)],a415_0x436f0d(0x10d),null),__decorate([(0x0,core_1[a415_0x436f0d(0x123)])('deploy'),__param(0x0,core_1[a415_0x436f0d(0x103)][a415_0x436f0d(0x12c)]()),__metadata('design:type',Function),__metadata(a415_0x436f0d(0x130),[Object]),__metadata(a415_0x436f0d(0x13d),Promise)],VeevaVaultController[a415_0x436f0d(0x100)],a415_0x436f0d(0x136),null),__decorate([(0x0,core_1[a415_0x436f0d(0x123)])(a415_0x436f0d(0x12d)),__param(0x0,core_1[a415_0x436f0d(0x103)][a415_0x436f0d(0x12c)]()),__metadata(a415_0x436f0d(0x12f),Function),__metadata(a415_0x436f0d(0x130),[Object]),__metadata(a415_0x436f0d(0x13d),Promise)],VeevaVaultController['prototype'],'retrieveDependency',null),__decorate([(0x0,core_1[a415_0x436f0d(0x123)])('rollback'),__param(0x0,core_1[a415_0x436f0d(0x103)][a415_0x436f0d(0x12c)]()),__metadata(a415_0x436f0d(0x12f),Function),__metadata(a415_0x436f0d(0x130),[Object]),__metadata(a415_0x436f0d(0x13d),Promise)],VeevaVaultController[a415_0x436f0d(0x100)],'rollback',null),VeevaVaultController=__decorate([(0x0,core_1[a415_0x436f0d(0x115)])(a415_0x436f0d(0x111)),(0x0,core_1[a415_0x436f0d(0x108)])(a415_0x436f0d(0x133))],VeevaVaultController),exports[a415_0x436f0d(0x141)]=VeevaVaultController;