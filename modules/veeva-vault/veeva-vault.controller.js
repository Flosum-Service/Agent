const a318_0xd25c7f=a318_0x10e6;(function(_0x57237d,_0x25a09e){const _0x256bc8=a318_0x10e6,_0x4a9ad2=_0x57237d();while(!![]){try{const _0x456db4=-parseInt(_0x256bc8(0x13a))/0x1+-parseInt(_0x256bc8(0x11a))/0x2*(parseInt(_0x256bc8(0x130))/0x3)+-parseInt(_0x256bc8(0x117))/0x4+parseInt(_0x256bc8(0x11c))/0x5*(parseInt(_0x256bc8(0x13d))/0x6)+-parseInt(_0x256bc8(0x118))/0x7*(-parseInt(_0x256bc8(0x149))/0x8)+-parseInt(_0x256bc8(0x11e))/0x9*(parseInt(_0x256bc8(0x11d))/0xa)+parseInt(_0x256bc8(0x10f))/0xb;if(_0x456db4===_0x25a09e)break;else _0x4a9ad2['push'](_0x4a9ad2['shift']());}catch(_0x243d6b){_0x4a9ad2['push'](_0x4a9ad2['shift']());}}}(a318_0x5b64,0x20857));const a318_0x5b2d6e=(function(){let _0x15a6f1=!![];return function(_0x3e4876,_0x49cce0){const _0x5c3198=_0x15a6f1?function(){const _0x1d3494=a318_0x10e6;if(_0x49cce0){const _0x4e6df5=_0x49cce0[_0x1d3494(0x10e)](_0x3e4876,arguments);return _0x49cce0=null,_0x4e6df5;}}:function(){};return _0x15a6f1=![],_0x5c3198;};}()),a318_0x34c2d2=a318_0x5b2d6e(this,function(){const _0x4d9628=a318_0x10e6;return a318_0x34c2d2[_0x4d9628(0x112)]()[_0x4d9628(0x107)](_0x4d9628(0x129))[_0x4d9628(0x112)]()['constructor'](a318_0x34c2d2)['search'](_0x4d9628(0x129));});a318_0x34c2d2();'use strict';function a318_0x5b64(){const _0x2ca90c=['SUCCESS','fs/promises','DeployService','SalesforceAuth','param','apply','6149990uLYdbo','body','then','toString','Version','prototype','./utils/veeva-request.utils','./services/deploy.service','780512BwAzCb','7wWxxne','__param','158RruHRj','__decorate','165BRyOpV','50DIQAEh','391698VILjeR','finally','Controller','Logger','design:paramtypes','default','getOwnPropertyDescriptor','VeevaAuth','message','__importDefault','./classes/auth/salesforce-auth','(((.+)+)+)+$','function','createVeevaRequest','decorate','retrieveDependency','length','./classes/errors/base-veeva-error','9054GXzZxf','__metadata','execute','VeevaVaultController','design:returntype','getAuthDetails','Post','__esModule','makeDir','instanceUrl','237012VpQiHu','deployFromBranch','DependencyService','40284fwRrfH','./services/dependency.service','./enums/status.enums','doSnapshot','./utils/salesforce-request.utils','getMessages','shortid','metadata','design:type','SnapshotService','object','../../core','1925816TDtgXQ','createSalesforceRequest','defineProperty','FAILURE','search','AppResponseStatus'];a318_0x5b64=function(){return _0x2ca90c;};return a318_0x5b64();}var __decorate=this&&this[a318_0xd25c7f(0x11b)]||function(_0x12be8e,_0x2d0c6e,_0x4becd7,_0x3e43dc){const _0xb851d6=a318_0xd25c7f;var _0x522709=arguments['length'],_0x1d87db=_0x522709<0x3?_0x2d0c6e:_0x3e43dc===null?_0x3e43dc=Object[_0xb851d6(0x124)](_0x2d0c6e,_0x4becd7):_0x3e43dc,_0x1cc9d2;if(typeof Reflect===_0xb851d6(0x147)&&typeof Reflect['decorate']===_0xb851d6(0x12a))_0x1d87db=Reflect[_0xb851d6(0x12c)](_0x12be8e,_0x2d0c6e,_0x4becd7,_0x3e43dc);else{for(var _0x54d697=_0x12be8e[_0xb851d6(0x12e)]-0x1;_0x54d697>=0x0;_0x54d697--)if(_0x1cc9d2=_0x12be8e[_0x54d697])_0x1d87db=(_0x522709<0x3?_0x1cc9d2(_0x1d87db):_0x522709>0x3?_0x1cc9d2(_0x2d0c6e,_0x4becd7,_0x1d87db):_0x1cc9d2(_0x2d0c6e,_0x4becd7))||_0x1d87db;}return _0x522709>0x3&&_0x1d87db&&Object['defineProperty'](_0x2d0c6e,_0x4becd7,_0x1d87db),_0x1d87db;},__metadata=this&&this[a318_0xd25c7f(0x131)]||function(_0xe9c770,_0x5c2efb){const _0x3e8dca=a318_0xd25c7f;if(typeof Reflect==='object'&&typeof Reflect[_0x3e8dca(0x144)]===_0x3e8dca(0x12a))return Reflect['metadata'](_0xe9c770,_0x5c2efb);},__param=this&&this[a318_0xd25c7f(0x119)]||function(_0x5d6bd8,_0x2af74f){return function(_0x2976e0,_0x2f2304){_0x2af74f(_0x2976e0,_0x2f2304,_0x5d6bd8);};},__importDefault=this&&this[a318_0xd25c7f(0x127)]||function(_0x2394bd){const _0x1b0f83=a318_0xd25c7f;return _0x2394bd&&_0x2394bd[_0x1b0f83(0x137)]?_0x2394bd:{'default':_0x2394bd};};Object[a318_0xd25c7f(0x14b)](exports,a318_0xd25c7f(0x137),{'value':!![]}),exports[a318_0xd25c7f(0x133)]=void 0x0;const core_1=require(a318_0xd25c7f(0x148)),dependency_service_1=require(a318_0xd25c7f(0x13e)),snapshot_service_1=require('./services/snapshot.service'),deploy_service_1=require(a318_0xd25c7f(0x116)),veeva_request_utils_1=require(a318_0xd25c7f(0x115)),status_enums_1=require(a318_0xd25c7f(0x13f)),shortid_1=__importDefault(require(a318_0xd25c7f(0x143))),fs_util_1=require('./utils/fs-util'),logger_1=require('./classes/logger'),promises_1=require(a318_0xd25c7f(0x10a)),base_veeva_error_1=require(a318_0xd25c7f(0x12f)),salesforce_request_utils_1=require(a318_0xd25c7f(0x141)),veeva_auth_1=require('./classes/auth/veeva-auth'),salesforce_auth_1=require(a318_0xd25c7f(0x128)),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;function a318_0x10e6(_0x119b60,_0x5535c3){const _0x5cdc60=a318_0x5b64();return a318_0x10e6=function(_0x34c2d2,_0x5b2d6e){_0x34c2d2=_0x34c2d2-0x107;let _0x5b64e7=_0x5cdc60[_0x34c2d2];return _0x5b64e7;},a318_0x10e6(_0x119b60,_0x5535c3);}let VeevaVaultController=class VeevaVaultController{async[a318_0xd25c7f(0x140)](_0x3ec7ee){const _0x3b8731=a318_0xd25c7f,{veevaAuth:_0x456b3e,timeZone:_0x5542d5,attachmentLogId:_0x206c6b}=_0x3ec7ee;try{const _0x4482e6=(0x0,veeva_request_utils_1[_0x3b8731(0x12b)])(new veeva_auth_1[(_0x3b8731(0x125))](_0x456b3e,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x262def=await salesforce_auth_1['SalesforceAuth']['getAuthDetails'](),_0x4cf64a=(0x0,salesforce_request_utils_1[_0x3b8731(0x14a)])(new salesforce_auth_1[(_0x3b8731(0x10c))](_0x262def)),_0x5a3057=new logger_1[(_0x3b8731(0x121))](_0x4cf64a,_0x5542d5,_0x206c6b),_0x3271e6=new snapshot_service_1[(_0x3b8731(0x146))](_0x3ec7ee,_0x4cf64a,_0x4482e6,_0x5a3057);return _0x3271e6[_0x3b8731(0x132)]()[_0x3b8731(0x111)](),{'responseStatus':status_enums_1['AppResponseStatus']['SUCCESS']};}catch(_0x595432){return{'responseStatus':status_enums_1[_0x3b8731(0x108)]['FAILURE'],'responseMessage':_0x595432[_0x3b8731(0x126)]};}}async[a318_0xd25c7f(0x13b)](_0x57d788){const _0x1df87e=a318_0xd25c7f,{veevaAuth:_0xa0fb70,timeZone:_0xa18d81,attachmentLogId:_0x24d979}=_0x57d788;try{const _0x3e9c70=(0x0,veeva_request_utils_1['createVeevaRequest'])(new veeva_auth_1[(_0x1df87e(0x125))](_0xa0fb70,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x50ee0e=await salesforce_auth_1[_0x1df87e(0x10c)][_0x1df87e(0x135)](),_0x124297=(0x0,salesforce_request_utils_1[_0x1df87e(0x14a)])(new salesforce_auth_1['SalesforceAuth'](_0x50ee0e)),_0xf7d419=new logger_1[(_0x1df87e(0x121))](_0x124297,_0xa18d81,_0x24d979),_0x274c65='temp/veeva/deploy_'+(0x0,shortid_1[_0x1df87e(0x123)])();await(0x0,fs_util_1[_0x1df87e(0x138)])(_0x274c65);const _0x44b62d=new deploy_service_1[(_0x1df87e(0x10b))](_0x57d788,_0x124297,_0x3e9c70,_0xf7d419,_0x274c65,_0x50ee0e[_0x1df87e(0x139)]);return _0x44b62d['execute']()[_0x1df87e(0x11f)](()=>(0x0,promises_1['rm'])(_0x274c65,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x1df87e(0x108)][_0x1df87e(0x109)]};}catch(_0x5cabde){return{'responseStatus':status_enums_1[_0x1df87e(0x108)][_0x1df87e(0x14c)],'responseMessage':_0x5cabde[_0x1df87e(0x126)]};}}async[a318_0xd25c7f(0x12d)](_0x1d4875){const _0x16deaa=a318_0xd25c7f,{veevaAuth:_0x44c5ec}=_0x1d4875;try{const _0x365d3=(0x0,veeva_request_utils_1['createVeevaRequest'])(new veeva_auth_1[(_0x16deaa(0x125))](_0x44c5ec)),_0x21010f=await salesforce_auth_1[_0x16deaa(0x10c)][_0x16deaa(0x135)](),_0x499640=(0x0,salesforce_request_utils_1[_0x16deaa(0x14a)])(new salesforce_auth_1[(_0x16deaa(0x10c))](_0x21010f)),_0x11d4d6=new dependency_service_1[(_0x16deaa(0x13c))](_0x1d4875,_0x499640,_0x365d3);return await _0x11d4d6['execute']();}catch(_0x533ddf){const _0x2d24ab=_0x533ddf instanceof base_veeva_error_1['BaseVeevaError']?_0x533ddf[_0x16deaa(0x142)]()['join']('\x0a'):_0x533ddf[_0x16deaa(0x126)];return{'responseStatus':status_enums_1['AppResponseStatus'][_0x16deaa(0x14c)],'responseMessage':_0x2d24ab};}}};__decorate([(0x0,core_1[a318_0xd25c7f(0x136)])('snapshot'),__param(0x0,core_1[a318_0xd25c7f(0x10d)][a318_0xd25c7f(0x110)]()),__metadata(a318_0xd25c7f(0x145),Function),__metadata(a318_0xd25c7f(0x122),[Object]),__metadata(a318_0xd25c7f(0x134),Promise)],VeevaVaultController['prototype'],a318_0xd25c7f(0x140),null),__decorate([(0x0,core_1[a318_0xd25c7f(0x136)])('deploy'),__param(0x0,core_1['param']['body']()),__metadata(a318_0xd25c7f(0x145),Function),__metadata('design:paramtypes',[Object]),__metadata(a318_0xd25c7f(0x134),Promise)],VeevaVaultController[a318_0xd25c7f(0x114)],a318_0xd25c7f(0x13b),null),__decorate([(0x0,core_1['Post'])('dependency'),__param(0x0,core_1[a318_0xd25c7f(0x10d)][a318_0xd25c7f(0x110)]()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a318_0xd25c7f(0x134),Promise)],VeevaVaultController['prototype'],a318_0xd25c7f(0x12d),null),VeevaVaultController=__decorate([(0x0,core_1[a318_0xd25c7f(0x120)])('veeva-vault'),(0x0,core_1[a318_0xd25c7f(0x113)])('v1')],VeevaVaultController),exports['VeevaVaultController']=VeevaVaultController;