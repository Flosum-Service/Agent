const a318_0x4085e3=a318_0x5ebb;(function(_0x173a44,_0x2cffbf){const _0x2c3a2b=a318_0x5ebb,_0x4c5226=_0x173a44();while(!![]){try{const _0x4b3dbe=-parseInt(_0x2c3a2b(0x114))/0x1*(-parseInt(_0x2c3a2b(0x121))/0x2)+-parseInt(_0x2c3a2b(0xf4))/0x3+-parseInt(_0x2c3a2b(0x109))/0x4+-parseInt(_0x2c3a2b(0x117))/0x5*(parseInt(_0x2c3a2b(0x134))/0x6)+-parseInt(_0x2c3a2b(0x11e))/0x7*(parseInt(_0x2c3a2b(0x115))/0x8)+parseInt(_0x2c3a2b(0xfb))/0x9*(parseInt(_0x2c3a2b(0xf1))/0xa)+parseInt(_0x2c3a2b(0x123))/0xb*(parseInt(_0x2c3a2b(0x10c))/0xc);if(_0x4b3dbe===_0x2cffbf)break;else _0x4c5226['push'](_0x4c5226['shift']());}catch(_0x42089c){_0x4c5226['push'](_0x4c5226['shift']());}}}(a318_0xc5c9,0x1cf0a));const a318_0x33b5c0=(function(){let _0x439123=!![];return function(_0x3a610f,_0x7446a3){const _0x40c4a3=_0x439123?function(){const _0x3f006d=a318_0x5ebb;if(_0x7446a3){const _0x325b11=_0x7446a3[_0x3f006d(0x127)](_0x3a610f,arguments);return _0x7446a3=null,_0x325b11;}}:function(){};return _0x439123=![],_0x40c4a3;};}()),a318_0x409ed5=a318_0x33b5c0(this,function(){const _0x57831f=a318_0x5ebb;return a318_0x409ed5[_0x57831f(0x106)]()[_0x57831f(0x108)](_0x57831f(0x10a))[_0x57831f(0x106)]()['constructor'](a318_0x409ed5)[_0x57831f(0x108)](_0x57831f(0x10a));});a318_0x409ed5();'use strict';function a318_0xc5c9(){const _0x57b4a8=['./classes/auth/veeva-auth','getAuthDetails','toString','./services/snapshot.service','search','935248LnMrjO','(((.+)+)+)+$','length','24fyskQj','./utils/salesforce-request.utils','object','createVeevaRequest','FAILURE','default','VeevaAuth','deployFromBranch','87014ZWQNwX','3848RDjhtv','dependency','5jpGLVH','defineProperty','__metadata','__esModule','SUCCESS','veeva-vault','AppResponseStatus','301AMToft','../../core','DependencyService','4XARXav','execute','1813900QnflUO','then','fs/promises','./services/deploy.service','apply','SalesforceAuth','message','design:paramtypes','./enums/status.enums','prototype','snapshot','doSnapshot','instanceUrl','VeevaVaultController','createSalesforceRequest','./classes/errors/base-veeva-error','shortid','1078302QVGzpP','retrieveDependency','makeDir','./utils/fs-util','2302810vFtKPK','Post','function','544077jCablJ','design:returntype','join','Controller','./classes/logger','DeployService','metadata','9dfINGM','body','design:type','param','__importDefault','BaseVeevaError','Logger','finally','./utils/veeva-request.utils'];a318_0xc5c9=function(){return _0x57b4a8;};return a318_0xc5c9();}var __decorate=this&&this['__decorate']||function(_0x3c8363,_0x55b501,_0x460ae3,_0x374437){const _0x502c72=a318_0x5ebb;var _0x42fbe5=arguments[_0x502c72(0x10b)],_0x973c06=_0x42fbe5<0x3?_0x55b501:_0x374437===null?_0x374437=Object['getOwnPropertyDescriptor'](_0x55b501,_0x460ae3):_0x374437,_0x507d75;if(typeof Reflect===_0x502c72(0x10e)&&typeof Reflect['decorate']===_0x502c72(0xf3))_0x973c06=Reflect['decorate'](_0x3c8363,_0x55b501,_0x460ae3,_0x374437);else{for(var _0x4bf8b5=_0x3c8363[_0x502c72(0x10b)]-0x1;_0x4bf8b5>=0x0;_0x4bf8b5--)if(_0x507d75=_0x3c8363[_0x4bf8b5])_0x973c06=(_0x42fbe5<0x3?_0x507d75(_0x973c06):_0x42fbe5>0x3?_0x507d75(_0x55b501,_0x460ae3,_0x973c06):_0x507d75(_0x55b501,_0x460ae3))||_0x973c06;}return _0x42fbe5>0x3&&_0x973c06&&Object['defineProperty'](_0x55b501,_0x460ae3,_0x973c06),_0x973c06;},__metadata=this&&this[a318_0x4085e3(0x119)]||function(_0x82d8fb,_0xf9b2b){const _0x4d8aa2=a318_0x4085e3;if(typeof Reflect===_0x4d8aa2(0x10e)&&typeof Reflect[_0x4d8aa2(0xfa)]===_0x4d8aa2(0xf3))return Reflect[_0x4d8aa2(0xfa)](_0x82d8fb,_0xf9b2b);},__param=this&&this['__param']||function(_0x56ae41,_0x115540){return function(_0x36fb6f,_0x1db867){_0x115540(_0x36fb6f,_0x1db867,_0x56ae41);};},__importDefault=this&&this[a318_0x4085e3(0xff)]||function(_0x192f7e){const _0x40ced2=a318_0x4085e3;return _0x192f7e&&_0x192f7e[_0x40ced2(0x11a)]?_0x192f7e:{'default':_0x192f7e};};function a318_0x5ebb(_0xc9192f,_0x56a89f){const _0x2264f5=a318_0xc5c9();return a318_0x5ebb=function(_0x409ed5,_0x33b5c0){_0x409ed5=_0x409ed5-0xee;let _0xc5c914=_0x2264f5[_0x409ed5];return _0xc5c914;},a318_0x5ebb(_0xc9192f,_0x56a89f);}Object[a318_0x4085e3(0x118)](exports,a318_0x4085e3(0x11a),{'value':!![]}),exports[a318_0x4085e3(0x130)]=void 0x0;const core_1=require(a318_0x4085e3(0x11f)),dependency_service_1=require('./services/dependency.service'),snapshot_service_1=require(a318_0x4085e3(0x107)),deploy_service_1=require(a318_0x4085e3(0x126)),veeva_request_utils_1=require(a318_0x4085e3(0x103)),status_enums_1=require(a318_0x4085e3(0x12b)),shortid_1=__importDefault(require(a318_0x4085e3(0x133))),fs_util_1=require(a318_0x4085e3(0xf0)),logger_1=require(a318_0x4085e3(0xf8)),promises_1=require(a318_0x4085e3(0x125)),base_veeva_error_1=require(a318_0x4085e3(0x132)),salesforce_request_utils_1=require(a318_0x4085e3(0x10d)),veeva_auth_1=require(a318_0x4085e3(0x104)),salesforce_auth_1=require('./classes/auth/salesforce-auth'),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;let VeevaVaultController=class VeevaVaultController{async[a318_0x4085e3(0x12e)](_0x55f587){const _0x55e0cd=a318_0x4085e3,{veevaAuth:_0x107d12,timeZone:_0x3597d1,attachmentLogId:_0x1d0414}=_0x55f587;try{const _0x3d01fb=(0x0,veeva_request_utils_1['createVeevaRequest'])(new veeva_auth_1['VeevaAuth'](_0x107d12,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x1e657b=await salesforce_auth_1['SalesforceAuth'][_0x55e0cd(0x105)](),_0x5d5494=(0x0,salesforce_request_utils_1[_0x55e0cd(0x131)])(new salesforce_auth_1[(_0x55e0cd(0x128))](_0x1e657b)),_0x19d304=new logger_1[(_0x55e0cd(0x101))](_0x5d5494,_0x3597d1,_0x1d0414),_0x2c1d32=new snapshot_service_1['SnapshotService'](_0x55f587,_0x5d5494,_0x3d01fb,_0x19d304);return _0x2c1d32[_0x55e0cd(0x122)]()[_0x55e0cd(0x124)](),{'responseStatus':status_enums_1[_0x55e0cd(0x11d)]['SUCCESS']};}catch(_0x19cf2f){return{'responseStatus':status_enums_1['AppResponseStatus'][_0x55e0cd(0x110)],'responseMessage':_0x19cf2f['message']};}}async[a318_0x4085e3(0x113)](_0x5b1d47){const _0x74d406=a318_0x4085e3,{veevaAuth:_0x7039b6,timeZone:_0x591d1e,attachmentLogId:_0x16177f}=_0x5b1d47;try{const _0x3a4d4c=(0x0,veeva_request_utils_1[_0x74d406(0x10f)])(new veeva_auth_1[(_0x74d406(0x112))](_0x7039b6,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x45f87b=await salesforce_auth_1['SalesforceAuth'][_0x74d406(0x105)](),_0x4e47d7=(0x0,salesforce_request_utils_1[_0x74d406(0x131)])(new salesforce_auth_1['SalesforceAuth'](_0x45f87b)),_0x30a7a8=new logger_1['Logger'](_0x4e47d7,_0x591d1e,_0x16177f),_0x1d1409='temp/veeva/deploy_'+(0x0,shortid_1[_0x74d406(0x111)])();await(0x0,fs_util_1[_0x74d406(0xef)])(_0x1d1409);const _0x24ffed=new deploy_service_1[(_0x74d406(0xf9))](_0x5b1d47,_0x4e47d7,_0x3a4d4c,_0x30a7a8,_0x1d1409,_0x45f87b[_0x74d406(0x12f)]);return _0x24ffed[_0x74d406(0x122)]()[_0x74d406(0x102)](()=>(0x0,promises_1['rm'])(_0x1d1409,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x74d406(0x11d)][_0x74d406(0x11b)]};}catch(_0x2dc9e9){return{'responseStatus':status_enums_1[_0x74d406(0x11d)][_0x74d406(0x110)],'responseMessage':_0x2dc9e9[_0x74d406(0x129)]};}}async[a318_0x4085e3(0xee)](_0x2520ca){const _0x38c689=a318_0x4085e3,{veevaAuth:_0x30089e}=_0x2520ca;try{const _0x28577b=(0x0,veeva_request_utils_1['createVeevaRequest'])(new veeva_auth_1[(_0x38c689(0x112))](_0x30089e)),_0x8df1df=await salesforce_auth_1['SalesforceAuth'][_0x38c689(0x105)](),_0x4e68a0=(0x0,salesforce_request_utils_1[_0x38c689(0x131)])(new salesforce_auth_1[(_0x38c689(0x128))](_0x8df1df)),_0x52e2e4=new dependency_service_1[(_0x38c689(0x120))](_0x2520ca,_0x4e68a0,_0x28577b);return await _0x52e2e4[_0x38c689(0x122)]();}catch(_0x2ba2ad){const _0x5b6433=_0x2ba2ad instanceof base_veeva_error_1[_0x38c689(0x100)]?_0x2ba2ad['getMessages']()[_0x38c689(0xf6)]('\x0a'):_0x2ba2ad[_0x38c689(0x129)];return{'responseStatus':status_enums_1['AppResponseStatus'][_0x38c689(0x110)],'responseMessage':_0x5b6433};}}};__decorate([(0x0,core_1[a318_0x4085e3(0xf2)])(a318_0x4085e3(0x12d)),__param(0x0,core_1['param'][a318_0x4085e3(0xfc)]()),__metadata(a318_0x4085e3(0xfd),Function),__metadata(a318_0x4085e3(0x12a),[Object]),__metadata('design:returntype',Promise)],VeevaVaultController[a318_0x4085e3(0x12c)],a318_0x4085e3(0x12e),null),__decorate([(0x0,core_1[a318_0x4085e3(0xf2)])('deploy'),__param(0x0,core_1[a318_0x4085e3(0xfe)][a318_0x4085e3(0xfc)]()),__metadata('design:type',Function),__metadata(a318_0x4085e3(0x12a),[Object]),__metadata('design:returntype',Promise)],VeevaVaultController[a318_0x4085e3(0x12c)],a318_0x4085e3(0x113),null),__decorate([(0x0,core_1['Post'])(a318_0x4085e3(0x116)),__param(0x0,core_1[a318_0x4085e3(0xfe)][a318_0x4085e3(0xfc)]()),__metadata(a318_0x4085e3(0xfd),Function),__metadata('design:paramtypes',[Object]),__metadata(a318_0x4085e3(0xf5),Promise)],VeevaVaultController[a318_0x4085e3(0x12c)],'retrieveDependency',null),VeevaVaultController=__decorate([(0x0,core_1[a318_0x4085e3(0xf7)])(a318_0x4085e3(0x11c)),(0x0,core_1['Version'])('v1')],VeevaVaultController),exports['VeevaVaultController']=VeevaVaultController;