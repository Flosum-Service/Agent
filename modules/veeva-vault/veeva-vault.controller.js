const a263_0x36e95d=a263_0x3fc4;(function(_0x3a4a66,_0x3afde1){const _0x33cb0a=a263_0x3fc4,_0x4a1865=_0x3a4a66();while(!![]){try{const _0x7226a3=parseInt(_0x33cb0a(0x102))/0x1+-parseInt(_0x33cb0a(0x115))/0x2+parseInt(_0x33cb0a(0x119))/0x3+parseInt(_0x33cb0a(0x114))/0x4*(-parseInt(_0x33cb0a(0x11d))/0x5)+-parseInt(_0x33cb0a(0x12c))/0x6+parseInt(_0x33cb0a(0x110))/0x7*(-parseInt(_0x33cb0a(0x10a))/0x8)+parseInt(_0x33cb0a(0x117))/0x9;if(_0x7226a3===_0x3afde1)break;else _0x4a1865['push'](_0x4a1865['shift']());}catch(_0x573c4a){_0x4a1865['push'](_0x4a1865['shift']());}}}(a263_0x32a0,0xdc324));const a263_0x1d11a5=(function(){let _0x1f31da=!![];return function(_0x3d2ebd,_0x107a5c){const _0x175158=_0x1f31da?function(){if(_0x107a5c){const _0x53a24f=_0x107a5c['apply'](_0x3d2ebd,arguments);return _0x107a5c=null,_0x53a24f;}}:function(){};return _0x1f31da=![],_0x175158;};}()),a263_0x2a8356=a263_0x1d11a5(this,function(){const _0x420695=a263_0x3fc4;return a263_0x2a8356[_0x420695(0x103)]()[_0x420695(0x106)](_0x420695(0x10c))[_0x420695(0x103)]()[_0x420695(0x12f)](a263_0x2a8356)['search'](_0x420695(0x10c));});a263_0x2a8356();'use strict';var __decorate=this&&this[a263_0x36e95d(0x10e)]||function(_0x3b0deb,_0x5ecdce,_0x3d4709,_0x44e2da){const _0x400f44=a263_0x36e95d;var _0xb26462=arguments[_0x400f44(0x128)],_0x5a7745=_0xb26462<0x3?_0x5ecdce:_0x44e2da===null?_0x44e2da=Object['getOwnPropertyDescriptor'](_0x5ecdce,_0x3d4709):_0x44e2da,_0x2a3970;if(typeof Reflect===_0x400f44(0x12e)&&typeof Reflect['decorate']===_0x400f44(0x12a))_0x5a7745=Reflect[_0x400f44(0x132)](_0x3b0deb,_0x5ecdce,_0x3d4709,_0x44e2da);else{for(var _0xdce1fd=_0x3b0deb[_0x400f44(0x128)]-0x1;_0xdce1fd>=0x0;_0xdce1fd--)if(_0x2a3970=_0x3b0deb[_0xdce1fd])_0x5a7745=(_0xb26462<0x3?_0x2a3970(_0x5a7745):_0xb26462>0x3?_0x2a3970(_0x5ecdce,_0x3d4709,_0x5a7745):_0x2a3970(_0x5ecdce,_0x3d4709))||_0x5a7745;}return _0xb26462>0x3&&_0x5a7745&&Object['defineProperty'](_0x5ecdce,_0x3d4709,_0x5a7745),_0x5a7745;},__metadata=this&&this[a263_0x36e95d(0x11a)]||function(_0x566d63,_0x58ad9d){const _0x5266e5=a263_0x36e95d;if(typeof Reflect===_0x5266e5(0x12e)&&typeof Reflect[_0x5266e5(0x130)]==='function')return Reflect[_0x5266e5(0x130)](_0x566d63,_0x58ad9d);},__param=this&&this[a263_0x36e95d(0x10f)]||function(_0x1f534a,_0x1cb556){return function(_0x39d31d,_0x4360c1){_0x1cb556(_0x39d31d,_0x4360c1,_0x1f534a);};},__importDefault=this&&this['__importDefault']||function(_0x2b10fc){const _0x579e42=a263_0x36e95d;return _0x2b10fc&&_0x2b10fc[_0x579e42(0x122)]?_0x2b10fc:{'default':_0x2b10fc};};Object[a263_0x36e95d(0x112)](exports,a263_0x36e95d(0x122),{'value':!![]}),exports[a263_0x36e95d(0x121)]=void 0x0;const core_1=require(a263_0x36e95d(0x134)),dependency_service_1=require('./services/dependency.service'),snapshot_service_1=require(a263_0x36e95d(0x11e)),deploy_service_1=require('./services/deploy.service'),veeva_request_utils_1=require(a263_0x36e95d(0x104)),status_enums_1=require(a263_0x36e95d(0x12d)),shortid_1=__importDefault(require('shortid')),fs_util_1=require('./utils/fs-util'),logger_1=require(a263_0x36e95d(0x124)),promises_1=require(a263_0x36e95d(0x118)),base_veeva_error_1=require(a263_0x36e95d(0x120)),salesforce_request_utils_1=require('./utils/salesforce-request.utils'),veeva_auth_1=require('./classes/auth/veeva-auth'),salesforce_auth_1=require(a263_0x36e95d(0x100)),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;function a263_0x3fc4(_0x25f8c8,_0x4ce2d8){const _0x2131b0=a263_0x32a0();return a263_0x3fc4=function(_0x2a8356,_0x1d11a5){_0x2a8356=_0x2a8356-0xf5;let _0x32a0c6=_0x2131b0[_0x2a8356];return _0x32a0c6;},a263_0x3fc4(_0x25f8c8,_0x4ce2d8);}function a263_0x32a0(){const _0x20d8ac=['1856934IfaSXd','__metadata','SUCCESS','body','10VhEyya','./services/snapshot.service','message','./classes/errors/base-veeva-error','VeevaVaultController','__esModule','createSalesforceRequest','./classes/logger','temp/veeva/deploy_','design:returntype','design:type','length','createVeevaRequest','function','Logger','1768044NXHowr','./enums/status.enums','object','constructor','metadata','finally','decorate','then','../../core','doSnapshot','Post','design:paramtypes','AppResponseStatus','FAILURE','VeevaAuth','snapshot','deployFromBranch','getMessages','param','dependency','./classes/auth/salesforce-auth','SnapshotService','1667897hajHsb','toString','./utils/veeva-request.utils','SalesforceAuth','search','prototype','execute','deploy','2446784LXLzhX','instanceUrl','(((.+)+)+)+$','DeployService','__decorate','__param','21sBRHER','Controller','defineProperty','getAuthDetails','2278808lAEndp','764240WMOtCS','join','12139119DbaqNh','fs/promises'];a263_0x32a0=function(){return _0x20d8ac;};return a263_0x32a0();}let VeevaVaultController=class VeevaVaultController{async[a263_0x36e95d(0xf5)](_0x4162f5){const _0x47d5e1=a263_0x36e95d,{veevaAuth:_0x4ac0a1,timeZone:_0x1dfae5,attachmentLogId:_0x6dbd78}=_0x4162f5;try{const _0x4a3d68=(0x0,veeva_request_utils_1[_0x47d5e1(0x129)])(new veeva_auth_1[(_0x47d5e1(0xfa))](_0x4ac0a1,JOB_UPDATE_TOKEN_ATTEMPTS)),_0xfb7270=await salesforce_auth_1[_0x47d5e1(0x105)][_0x47d5e1(0x113)](),_0x31c0b8=(0x0,salesforce_request_utils_1['createSalesforceRequest'])(new salesforce_auth_1[(_0x47d5e1(0x105))](_0xfb7270)),_0x5c420c=new logger_1[(_0x47d5e1(0x12b))](_0x31c0b8,_0x1dfae5,_0x6dbd78),_0x5755a2=new snapshot_service_1[(_0x47d5e1(0x101))](_0x4162f5,_0x31c0b8,_0x4a3d68,_0x5c420c);return _0x5755a2['execute']()[_0x47d5e1(0x133)](),{'responseStatus':status_enums_1[_0x47d5e1(0xf8)][_0x47d5e1(0x11b)]};}catch(_0x38b8b1){return{'responseStatus':status_enums_1[_0x47d5e1(0xf8)][_0x47d5e1(0xf9)],'responseMessage':_0x38b8b1[_0x47d5e1(0x11f)]};}}async[a263_0x36e95d(0xfc)](_0x39ece1){const _0x477e39=a263_0x36e95d,{veevaAuth:_0x59543f,timeZone:_0x1936d5,attachmentLogId:_0x1a3575}=_0x39ece1;try{const _0x1fb870=(0x0,veeva_request_utils_1[_0x477e39(0x129)])(new veeva_auth_1[(_0x477e39(0xfa))](_0x59543f,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x2c7ff6=await salesforce_auth_1[_0x477e39(0x105)][_0x477e39(0x113)](),_0x5f5ac0=(0x0,salesforce_request_utils_1[_0x477e39(0x123)])(new salesforce_auth_1[(_0x477e39(0x105))](_0x2c7ff6)),_0x2c1370=new logger_1[(_0x477e39(0x12b))](_0x5f5ac0,_0x1936d5,_0x1a3575),_0x56340b=_0x477e39(0x125)+(0x0,shortid_1['default'])();await(0x0,fs_util_1['makeDir'])(_0x56340b);const _0x7265fe=new deploy_service_1[(_0x477e39(0x10d))](_0x39ece1,_0x5f5ac0,_0x1fb870,_0x2c1370,_0x56340b,_0x2c7ff6[_0x477e39(0x10b)]);return _0x7265fe['execute']()[_0x477e39(0x131)](()=>(0x0,promises_1['rm'])(_0x56340b,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x477e39(0xf8)][_0x477e39(0x11b)]};}catch(_0x3336ad){return{'responseStatus':status_enums_1[_0x477e39(0xf8)]['FAILURE'],'responseMessage':_0x3336ad[_0x477e39(0x11f)]};}}async['retrieveDependency'](_0xac4558){const _0x31f1d6=a263_0x36e95d,{veevaAuth:_0xa37d2e}=_0xac4558;try{const _0x5ccaab=(0x0,veeva_request_utils_1[_0x31f1d6(0x129)])(new veeva_auth_1[(_0x31f1d6(0xfa))](_0xa37d2e)),_0x2c294c=await salesforce_auth_1['SalesforceAuth'][_0x31f1d6(0x113)](),_0x2ec1c4=(0x0,salesforce_request_utils_1[_0x31f1d6(0x123)])(new salesforce_auth_1['SalesforceAuth'](_0x2c294c)),_0x9a5f4=new dependency_service_1['DependencyService'](_0xac4558,_0x2ec1c4,_0x5ccaab);return await _0x9a5f4[_0x31f1d6(0x108)]();}catch(_0x8abc64){const _0x146e03=_0x8abc64 instanceof base_veeva_error_1['BaseVeevaError']?_0x8abc64[_0x31f1d6(0xfd)]()[_0x31f1d6(0x116)]('\x0a'):_0x8abc64[_0x31f1d6(0x11f)];return{'responseStatus':status_enums_1[_0x31f1d6(0xf8)][_0x31f1d6(0xf9)],'responseMessage':_0x146e03};}}};__decorate([(0x0,core_1[a263_0x36e95d(0xf6)])(a263_0x36e95d(0xfb)),__param(0x0,core_1[a263_0x36e95d(0xfe)][a263_0x36e95d(0x11c)]()),__metadata(a263_0x36e95d(0x127),Function),__metadata(a263_0x36e95d(0xf7),[Object]),__metadata('design:returntype',Promise)],VeevaVaultController['prototype'],a263_0x36e95d(0xf5),null),__decorate([(0x0,core_1[a263_0x36e95d(0xf6)])(a263_0x36e95d(0x109)),__param(0x0,core_1[a263_0x36e95d(0xfe)][a263_0x36e95d(0x11c)]()),__metadata(a263_0x36e95d(0x127),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],VeevaVaultController[a263_0x36e95d(0x107)],'deployFromBranch',null),__decorate([(0x0,core_1['Post'])(a263_0x36e95d(0xff)),__param(0x0,core_1[a263_0x36e95d(0xfe)][a263_0x36e95d(0x11c)]()),__metadata(a263_0x36e95d(0x127),Function),__metadata(a263_0x36e95d(0xf7),[Object]),__metadata(a263_0x36e95d(0x126),Promise)],VeevaVaultController[a263_0x36e95d(0x107)],'retrieveDependency',null),VeevaVaultController=__decorate([(0x0,core_1[a263_0x36e95d(0x111)])('veeva-vault'),(0x0,core_1['Version'])('v1')],VeevaVaultController),exports[a263_0x36e95d(0x121)]=VeevaVaultController;