function a319_0x457e(){const _0x192c8f=['24SbIGHS','Version','apply','metadata','then','27jwtqtV','641208jiEuQl','AppResponseStatus','12cWkkVI','default','object','49719lZAxuk','351429KcVnoC','design:paramtypes','message','7926giYmcm','./classes/auth/salesforce-auth','prototype','instanceUrl','559449ljsqBa','retrieveDependency','__esModule','SalesforceAuth','length','doSnapshot','dependency','VeevaAuth','join','__metadata','Post','./services/deploy.service','__param','design:returntype','toString','Controller','Logger','./services/dependency.service','VeevaVaultController','1243895tjaouN','body','function','fs/promises','param','FAILURE','getAuthDetails','BaseVeevaError','shortid','finally','./classes/logger','71429bfBcNR','getMessages','6ZMSGps','decorate','temp/veeva/deploy_','deploy','__importDefault','deployFromBranch','defineProperty','40rtXGIs','./utils/veeva-request.utils','search','__decorate','createVeevaRequest','./utils/fs-util','execute','./utils/salesforce-request.utils','veeva-vault','SUCCESS','./enums/status.enums','1099ffDYDZ','createSalesforceRequest','design:type'];a319_0x457e=function(){return _0x192c8f;};return a319_0x457e();}const a319_0x1f0c04=a319_0x2bb5;(function(_0x4801a4,_0x5efe5c){const _0x400892=a319_0x2bb5,_0x534daa=_0x4801a4();while(!![]){try{const _0x108b9b=parseInt(_0x400892(0x173))/0x1*(parseInt(_0x400892(0x175))/0x2)+-parseInt(_0x400892(0x14d))/0x3*(parseInt(_0x400892(0x142))/0x4)+-parseInt(_0x400892(0x168))/0x5+-parseInt(_0x400892(0x151))/0x6*(parseInt(_0x400892(0x13f))/0x7)+parseInt(_0x400892(0x148))/0x8*(parseInt(_0x400892(0x147))/0x9)+-parseInt(_0x400892(0x134))/0xa*(-parseInt(_0x400892(0x155))/0xb)+parseInt(_0x400892(0x14a))/0xc*(parseInt(_0x400892(0x14e))/0xd);if(_0x108b9b===_0x5efe5c)break;else _0x534daa['push'](_0x534daa['shift']());}catch(_0x42ae9f){_0x534daa['push'](_0x534daa['shift']());}}}(a319_0x457e,0x1fa3b));const a319_0x1974af=(function(){let _0x4b95ad=!![];return function(_0x44bcb0,_0x33c98a){const _0xb5bb48=_0x4b95ad?function(){const _0x4a3852=a319_0x2bb5;if(_0x33c98a){const _0x380844=_0x33c98a[_0x4a3852(0x144)](_0x44bcb0,arguments);return _0x33c98a=null,_0x380844;}}:function(){};return _0x4b95ad=![],_0xb5bb48;};}()),a319_0x46c0dc=a319_0x1974af(this,function(){const _0x80dd20=a319_0x2bb5;return a319_0x46c0dc[_0x80dd20(0x163)]()[_0x80dd20(0x136)]('(((.+)+)+)+$')[_0x80dd20(0x163)]()['constructor'](a319_0x46c0dc)[_0x80dd20(0x136)]('(((.+)+)+)+$');});function a319_0x2bb5(_0x54971a,_0x2bb08d){const _0x32036c=a319_0x457e();return a319_0x2bb5=function(_0x46c0dc,_0x1974af){_0x46c0dc=_0x46c0dc-0x133;let _0x457ed1=_0x32036c[_0x46c0dc];return _0x457ed1;},a319_0x2bb5(_0x54971a,_0x2bb08d);}a319_0x46c0dc();'use strict';var __decorate=this&&this[a319_0x1f0c04(0x137)]||function(_0x3a5937,_0x286239,_0x4bd9e3,_0xb901c6){const _0x5856d2=a319_0x1f0c04;var _0x4d85f6=arguments['length'],_0x5da385=_0x4d85f6<0x3?_0x286239:_0xb901c6===null?_0xb901c6=Object['getOwnPropertyDescriptor'](_0x286239,_0x4bd9e3):_0xb901c6,_0xfb0c0f;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x5856d2(0x16a))_0x5da385=Reflect[_0x5856d2(0x176)](_0x3a5937,_0x286239,_0x4bd9e3,_0xb901c6);else{for(var _0x4691c2=_0x3a5937[_0x5856d2(0x159)]-0x1;_0x4691c2>=0x0;_0x4691c2--)if(_0xfb0c0f=_0x3a5937[_0x4691c2])_0x5da385=(_0x4d85f6<0x3?_0xfb0c0f(_0x5da385):_0x4d85f6>0x3?_0xfb0c0f(_0x286239,_0x4bd9e3,_0x5da385):_0xfb0c0f(_0x286239,_0x4bd9e3))||_0x5da385;}return _0x4d85f6>0x3&&_0x5da385&&Object[_0x5856d2(0x133)](_0x286239,_0x4bd9e3,_0x5da385),_0x5da385;},__metadata=this&&this[a319_0x1f0c04(0x15e)]||function(_0x19260d,_0x2f7d92){const _0x489bb0=a319_0x1f0c04;if(typeof Reflect===_0x489bb0(0x14c)&&typeof Reflect['metadata']===_0x489bb0(0x16a))return Reflect[_0x489bb0(0x145)](_0x19260d,_0x2f7d92);},__param=this&&this[a319_0x1f0c04(0x161)]||function(_0x4ed1e8,_0x261e13){return function(_0x3394e1,_0x5ae457){_0x261e13(_0x3394e1,_0x5ae457,_0x4ed1e8);};},__importDefault=this&&this[a319_0x1f0c04(0x179)]||function(_0x2aaacd){const _0xee7aa2=a319_0x1f0c04;return _0x2aaacd&&_0x2aaacd[_0xee7aa2(0x157)]?_0x2aaacd:{'default':_0x2aaacd};};Object[a319_0x1f0c04(0x133)](exports,a319_0x1f0c04(0x157),{'value':!![]}),exports['VeevaVaultController']=void 0x0;const core_1=require('../../core'),dependency_service_1=require(a319_0x1f0c04(0x166)),snapshot_service_1=require('./services/snapshot.service'),deploy_service_1=require(a319_0x1f0c04(0x160)),veeva_request_utils_1=require(a319_0x1f0c04(0x135)),status_enums_1=require(a319_0x1f0c04(0x13e)),shortid_1=__importDefault(require(a319_0x1f0c04(0x170))),fs_util_1=require(a319_0x1f0c04(0x139)),logger_1=require(a319_0x1f0c04(0x172)),promises_1=require(a319_0x1f0c04(0x16b)),base_veeva_error_1=require('./classes/errors/base-veeva-error'),salesforce_request_utils_1=require(a319_0x1f0c04(0x13b)),veeva_auth_1=require('./classes/auth/veeva-auth'),salesforce_auth_1=require(a319_0x1f0c04(0x152)),JOB_UPDATE_TOKEN_ATTEMPTS=0x1;let VeevaVaultController=class VeevaVaultController{async[a319_0x1f0c04(0x15a)](_0x1964fc){const _0x17ae78=a319_0x1f0c04,{veevaAuth:_0x4c5efb,timeZone:_0xfb85a2,attachmentLogId:_0x3f27c5}=_0x1964fc;try{const _0x3c1edf=(0x0,veeva_request_utils_1[_0x17ae78(0x138)])(new veeva_auth_1[(_0x17ae78(0x15c))](_0x4c5efb,JOB_UPDATE_TOKEN_ATTEMPTS)),_0xc06e72=await salesforce_auth_1[_0x17ae78(0x158)][_0x17ae78(0x16e)](),_0x1dc30a=(0x0,salesforce_request_utils_1[_0x17ae78(0x140)])(new salesforce_auth_1[(_0x17ae78(0x158))](_0xc06e72)),_0x5698f6=new logger_1[(_0x17ae78(0x165))](_0x1dc30a,_0xfb85a2,_0x3f27c5),_0x360377=new snapshot_service_1['SnapshotService'](_0x1964fc,_0x1dc30a,_0x3c1edf,_0x5698f6);return _0x360377[_0x17ae78(0x13a)]()[_0x17ae78(0x146)](),{'responseStatus':status_enums_1[_0x17ae78(0x149)][_0x17ae78(0x13d)]};}catch(_0x4a1931){return{'responseStatus':status_enums_1[_0x17ae78(0x149)][_0x17ae78(0x16d)],'responseMessage':_0x4a1931[_0x17ae78(0x150)]};}}async[a319_0x1f0c04(0x17a)](_0x99e84e){const _0x5682b1=a319_0x1f0c04,{veevaAuth:_0x108b79,timeZone:_0x24996f,attachmentLogId:_0x3d129d}=_0x99e84e;try{const _0x57ff41=(0x0,veeva_request_utils_1[_0x5682b1(0x138)])(new veeva_auth_1[(_0x5682b1(0x15c))](_0x108b79,JOB_UPDATE_TOKEN_ATTEMPTS)),_0x9f62d2=await salesforce_auth_1[_0x5682b1(0x158)]['getAuthDetails'](),_0x418647=(0x0,salesforce_request_utils_1['createSalesforceRequest'])(new salesforce_auth_1['SalesforceAuth'](_0x9f62d2)),_0x1913d0=new logger_1[(_0x5682b1(0x165))](_0x418647,_0x24996f,_0x3d129d),_0x1e6edf=_0x5682b1(0x177)+(0x0,shortid_1[_0x5682b1(0x14b)])();await(0x0,fs_util_1['makeDir'])(_0x1e6edf);const _0x8c0680=new deploy_service_1['DeployService'](_0x99e84e,_0x418647,_0x57ff41,_0x1913d0,_0x1e6edf,_0x9f62d2[_0x5682b1(0x154)]);return _0x8c0680[_0x5682b1(0x13a)]()[_0x5682b1(0x171)](()=>(0x0,promises_1['rm'])(_0x1e6edf,{'recursive':!![],'force':!![]})),{'responseStatus':status_enums_1[_0x5682b1(0x149)][_0x5682b1(0x13d)]};}catch(_0xae9e92){return{'responseStatus':status_enums_1[_0x5682b1(0x149)][_0x5682b1(0x16d)],'responseMessage':_0xae9e92[_0x5682b1(0x150)]};}}async[a319_0x1f0c04(0x156)](_0x23dae6){const _0x31b4fc=a319_0x1f0c04,{veevaAuth:_0x4b953b}=_0x23dae6;try{const _0x53c6df=(0x0,veeva_request_utils_1[_0x31b4fc(0x138)])(new veeva_auth_1[(_0x31b4fc(0x15c))](_0x4b953b)),_0x100555=await salesforce_auth_1[_0x31b4fc(0x158)]['getAuthDetails'](),_0x502f34=(0x0,salesforce_request_utils_1[_0x31b4fc(0x140)])(new salesforce_auth_1[(_0x31b4fc(0x158))](_0x100555)),_0x28078d=new dependency_service_1['DependencyService'](_0x23dae6,_0x502f34,_0x53c6df);return await _0x28078d[_0x31b4fc(0x13a)]();}catch(_0x37ac2e){const _0x8d383a=_0x37ac2e instanceof base_veeva_error_1[_0x31b4fc(0x16f)]?_0x37ac2e[_0x31b4fc(0x174)]()[_0x31b4fc(0x15d)]('\x0a'):_0x37ac2e['message'];return{'responseStatus':status_enums_1[_0x31b4fc(0x149)][_0x31b4fc(0x16d)],'responseMessage':_0x8d383a};}}};__decorate([(0x0,core_1['Post'])('snapshot'),__param(0x0,core_1['param']['body']()),__metadata(a319_0x1f0c04(0x141),Function),__metadata('design:paramtypes',[Object]),__metadata(a319_0x1f0c04(0x162),Promise)],VeevaVaultController[a319_0x1f0c04(0x153)],a319_0x1f0c04(0x15a),null),__decorate([(0x0,core_1[a319_0x1f0c04(0x15f)])(a319_0x1f0c04(0x178)),__param(0x0,core_1[a319_0x1f0c04(0x16c)][a319_0x1f0c04(0x169)]()),__metadata(a319_0x1f0c04(0x141),Function),__metadata(a319_0x1f0c04(0x14f),[Object]),__metadata('design:returntype',Promise)],VeevaVaultController[a319_0x1f0c04(0x153)],a319_0x1f0c04(0x17a),null),__decorate([(0x0,core_1[a319_0x1f0c04(0x15f)])(a319_0x1f0c04(0x15b)),__param(0x0,core_1[a319_0x1f0c04(0x16c)][a319_0x1f0c04(0x169)]()),__metadata(a319_0x1f0c04(0x141),Function),__metadata(a319_0x1f0c04(0x14f),[Object]),__metadata(a319_0x1f0c04(0x162),Promise)],VeevaVaultController[a319_0x1f0c04(0x153)],a319_0x1f0c04(0x156),null),VeevaVaultController=__decorate([(0x0,core_1[a319_0x1f0c04(0x164)])(a319_0x1f0c04(0x13c)),(0x0,core_1[a319_0x1f0c04(0x143)])('v1')],VeevaVaultController),exports[a319_0x1f0c04(0x167)]=VeevaVaultController;