const a335_0x2de4f7=a335_0x36a0;(function(_0x241edc,_0x2ea425){const _0x73e5f3=a335_0x36a0,_0x1f0ad1=_0x241edc();while(!![]){try{const _0x619de0=-parseInt(_0x73e5f3(0xe2))/0x1+-parseInt(_0x73e5f3(0xd4))/0x2*(parseInt(_0x73e5f3(0xc5))/0x3)+parseInt(_0x73e5f3(0xc8))/0x4+parseInt(_0x73e5f3(0xd6))/0x5+parseInt(_0x73e5f3(0xe3))/0x6*(-parseInt(_0x73e5f3(0xdd))/0x7)+-parseInt(_0x73e5f3(0xc4))/0x8+parseInt(_0x73e5f3(0xce))/0x9;if(_0x619de0===_0x2ea425)break;else _0x1f0ad1['push'](_0x1f0ad1['shift']());}catch(_0x4697f2){_0x1f0ad1['push'](_0x1f0ad1['shift']());}}}(a335_0x31a9,0x773a9));const a335_0x50832c=(function(){let _0x381c74=!![];return function(_0x79d5d1,_0x13bb3c){const _0x2244e8=_0x381c74?function(){const _0x13885b=a335_0x36a0;if(_0x13bb3c){const _0x44fb74=_0x13bb3c[_0x13885b(0xd8)](_0x79d5d1,arguments);return _0x13bb3c=null,_0x44fb74;}}:function(){};return _0x381c74=![],_0x2244e8;};}()),a335_0x17595b=a335_0x50832c(this,function(){const _0x495884=a335_0x36a0;return a335_0x17595b[_0x495884(0xde)]()[_0x495884(0xc7)](_0x495884(0xc6))[_0x495884(0xde)]()[_0x495884(0xd0)](a335_0x17595b)[_0x495884(0xc7)](_0x495884(0xc6));});a335_0x17595b();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x417a50){const _0x5dd02a=a335_0x36a0;return _0x417a50&&_0x417a50[_0x5dd02a(0xc1)]?_0x417a50:{'default':_0x417a50};};Object[a335_0x2de4f7(0xd5)](exports,'__esModule',{'value':!![]}),exports[a335_0x2de4f7(0xd3)]=void 0x0;const jszip_1=__importDefault(require(a335_0x2de4f7(0xdf))),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require('xml2js');class ZipCreatorRollback{constructor({deploymentResults:_0x4db36b,backup:_0x228f5f,rollbackName:_0x1a6c18}){const _0x724753=a335_0x2de4f7;this['_deploymentResults']=_0x4db36b,this[_0x724753(0xcf)]=_0x1a6c18,this[_0x724753(0xbf)]=_0x228f5f;}async[a335_0x2de4f7(0xd9)](){const _0x54f2bd=a335_0x2de4f7;this[_0x54f2bd(0xcd)]=new jszip_1['default'](),this[_0x54f2bd(0xd1)]=new jszip_1[(_0x54f2bd(0xdb))](),await this[_0x54f2bd(0xcd)]['loadAsync'](this[_0x54f2bd(0xbf)],{'base64':!![]});}[a335_0x2de4f7(0xdc)](){const _0x4de802=a335_0x2de4f7;this['_deploymentResults']['sort']((_0x377da6,_0x5a20c1)=>_0x377da6[_0x4de802(0xcb)]<_0x5a20c1[_0x4de802(0xcb)]?0x1:_0x5a20c1[_0x4de802(0xcb)]<_0x377da6[_0x4de802(0xcb)]?-0x1:0x0);}async[a335_0x2de4f7(0xca)](){const _0x2a5a93=a335_0x2de4f7;for(const _0xd7f2c9 of this[_0x2a5a93(0xc3)]){const _0x3d54b7=await factory_body_creator_rollback_1[_0x2a5a93(0xc2)]['create']({'deploymentResult':_0xd7f2c9,'backupZip':this['_backupZip']})[_0x2a5a93(0xda)](),{type:_0x78fdd1,name:_0x41bfe0}=_0xd7f2c9;this[_0x2a5a93(0xd1)]['file'](_0x78fdd1+'.'+_0x41bfe0+'.mdl',_0x3d54b7);}const _0x21d76e=new xml2js_1[(_0x2a5a93(0xe4))]({'headless':!![]}),_0x4244f4={'vaultpackage':{'$':{'xmlns':_0x2a5a93(0xd2)},'name':this['_rollbackName'],'source':{'vault':undefined,'author':'Flosum'},'packagetype':'migration__v','summary':'Rollback','description':_0x2a5a93(0xc9)}};this[_0x2a5a93(0xd1)][_0x2a5a93(0xcc)](_0x2a5a93(0xd7),_0x21d76e[_0x2a5a93(0xc0)](_0x4244f4));}async['create'](){const _0x4b6bee=a335_0x2de4f7;return await this[_0x4b6bee(0xd9)](),this['sortDeploymentResults'](),await this[_0x4b6bee(0xca)](),this['_zip'][_0x4b6bee(0xe0)]({'type':_0x4b6bee(0xe1)});}}function a335_0x31a9(){const _0x3f226f=['501579fghHSD','713556BBYRKv','Builder','_backup','buildObject','__esModule','FactoryBodyCreatorRollback','_deploymentResults','31632XrvUmg','2322aPTeMI','(((.+)+)+)+$','search','1232264EtvqqF','null','fillZip','stepName','file','_backupZip','16704333ySyeKY','_rollbackName','constructor','_zip','https://veevavault.com/','ZipCreatorRollback','1656VWYxqk','defineProperty','326465itdkSY','vaultpackage.xml','apply','createZips','create','default','sortDeploymentResults','35eVhvZu','toString','jszip','generateAsync','nodebuffer'];a335_0x31a9=function(){return _0x3f226f;};return a335_0x31a9();}function a335_0x36a0(_0xb09d72,_0x3736af){const _0x1e1388=a335_0x31a9();return a335_0x36a0=function(_0x17595b,_0x50832c){_0x17595b=_0x17595b-0xbf;let _0x31a9d3=_0x1e1388[_0x17595b];return _0x31a9d3;},a335_0x36a0(_0xb09d72,_0x3736af);}exports[a335_0x2de4f7(0xd3)]=ZipCreatorRollback;