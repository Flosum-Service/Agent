const a335_0x2cb9e7=a335_0x22d0;(function(_0x30ee7e,_0x368b5c){const _0x1957f8=a335_0x22d0,_0x22530d=_0x30ee7e();while(!![]){try{const _0x5e1f78=-parseInt(_0x1957f8(0x1c2))/0x1+parseInt(_0x1957f8(0x1d7))/0x2*(parseInt(_0x1957f8(0x1dc))/0x3)+-parseInt(_0x1957f8(0x1e1))/0x4+parseInt(_0x1957f8(0x1c8))/0x5*(parseInt(_0x1957f8(0x1da))/0x6)+parseInt(_0x1957f8(0x1db))/0x7*(-parseInt(_0x1957f8(0x1c3))/0x8)+parseInt(_0x1957f8(0x1ba))/0x9*(-parseInt(_0x1957f8(0x1cf))/0xa)+-parseInt(_0x1957f8(0x1bb))/0xb*(-parseInt(_0x1957f8(0x1d8))/0xc);if(_0x5e1f78===_0x368b5c)break;else _0x22530d['push'](_0x22530d['shift']());}catch(_0x1f61e9){_0x22530d['push'](_0x22530d['shift']());}}}(a335_0x1326,0xc2b58));function a335_0x1326(){const _0x4e62b7=['7ogfrLu','162786mPlVnE','.mdl','null','stepName','_backup','1807920aqKkqy','https://veevavault.com/','create','_deploymentResults','file','fillZip','675EtWHpR','120142wUNJzY','_zip','FactoryBodyCreatorRollback','xml2js','__importDefault','(((.+)+)+)+$','nodebuffer','1132943cGRKsb','2750408XIUdFD','sort','_rollbackName','loadAsync','apply','5ihnzXj','sortDeploymentResults','createZips','__esModule','default','ZipCreatorRollback','search','50790ewSejr','constructor','migration__v','buildObject','_backupZip','./body-creator/factory.body-creator.rollback','generateAsync','jszip','30UByzdZ','1284xqcHFL','toString','6747558sNyrjh'];a335_0x1326=function(){return _0x4e62b7;};return a335_0x1326();}const a335_0x2384e5=(function(){let _0x4f840d=!![];return function(_0x578bb7,_0x1b23d5){const _0x3bb35b=_0x4f840d?function(){const _0x248920=a335_0x22d0;if(_0x1b23d5){const _0x4ad84d=_0x1b23d5[_0x248920(0x1c7)](_0x578bb7,arguments);return _0x1b23d5=null,_0x4ad84d;}}:function(){};return _0x4f840d=![],_0x3bb35b;};}()),a335_0x4a93a5=a335_0x2384e5(this,function(){const _0xaeccf9=a335_0x22d0;return a335_0x4a93a5['toString']()[_0xaeccf9(0x1ce)](_0xaeccf9(0x1c0))[_0xaeccf9(0x1d9)]()[_0xaeccf9(0x1d0)](a335_0x4a93a5)[_0xaeccf9(0x1ce)](_0xaeccf9(0x1c0));});a335_0x4a93a5();'use strict';var __importDefault=this&&this[a335_0x2cb9e7(0x1bf)]||function(_0x5220bf){return _0x5220bf&&_0x5220bf['__esModule']?_0x5220bf:{'default':_0x5220bf};};Object['defineProperty'](exports,a335_0x2cb9e7(0x1cb),{'value':!![]}),exports[a335_0x2cb9e7(0x1cd)]=void 0x0;const jszip_1=__importDefault(require(a335_0x2cb9e7(0x1d6))),factory_body_creator_rollback_1=require(a335_0x2cb9e7(0x1d4)),xml2js_1=require(a335_0x2cb9e7(0x1be));class ZipCreatorRollback{constructor({deploymentResults:_0x477e7f,backup:_0x133147,rollbackName:_0x2c5d71}){const _0x34f373=a335_0x2cb9e7;this[_0x34f373(0x1e4)]=_0x477e7f,this[_0x34f373(0x1c5)]=_0x2c5d71,this[_0x34f373(0x1e0)]=_0x133147;}async[a335_0x2cb9e7(0x1ca)](){const _0x2a5849=a335_0x2cb9e7;this['_backupZip']=new jszip_1[(_0x2a5849(0x1cc))](),this[_0x2a5849(0x1bc)]=new jszip_1[(_0x2a5849(0x1cc))](),await this['_backupZip'][_0x2a5849(0x1c6)](this[_0x2a5849(0x1e0)],{'base64':!![]});}[a335_0x2cb9e7(0x1c9)](){const _0x3a9728=a335_0x2cb9e7;this['_deploymentResults'][_0x3a9728(0x1c4)]((_0x516dcf,_0x4a26af)=>_0x516dcf[_0x3a9728(0x1df)]<_0x4a26af[_0x3a9728(0x1df)]?0x1:_0x4a26af[_0x3a9728(0x1df)]<_0x516dcf[_0x3a9728(0x1df)]?-0x1:0x0);}async['fillZip'](){const _0x2fe1d7=a335_0x2cb9e7;for(const _0x90ac9 of this[_0x2fe1d7(0x1e4)]){const _0x3e8e63=await factory_body_creator_rollback_1[_0x2fe1d7(0x1bd)]['create']({'deploymentResult':_0x90ac9,'backupZip':this[_0x2fe1d7(0x1d3)]})[_0x2fe1d7(0x1e3)](),{type:_0x41d9a5,name:_0x6c613f}=_0x90ac9;this[_0x2fe1d7(0x1bc)][_0x2fe1d7(0x1b8)](_0x41d9a5+'.'+_0x6c613f+_0x2fe1d7(0x1dd),_0x3e8e63);}const _0x30886a=new xml2js_1['Builder']({'headless':!![]}),_0x241c7d={'vaultpackage':{'$':{'xmlns':_0x2fe1d7(0x1e2)},'name':this[_0x2fe1d7(0x1c5)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x2fe1d7(0x1d1),'summary':'Rollback','description':_0x2fe1d7(0x1de)}};this[_0x2fe1d7(0x1bc)][_0x2fe1d7(0x1b8)]('vaultpackage.xml',_0x30886a[_0x2fe1d7(0x1d2)](_0x241c7d));}async[a335_0x2cb9e7(0x1e3)](){const _0x441bdd=a335_0x2cb9e7;return await this['createZips'](),this['sortDeploymentResults'](),await this[_0x441bdd(0x1b9)](),this[_0x441bdd(0x1bc)][_0x441bdd(0x1d5)]({'type':_0x441bdd(0x1c1)});}}function a335_0x22d0(_0x10b41d,_0x57cfd5){const _0x419d3e=a335_0x1326();return a335_0x22d0=function(_0x4a93a5,_0x2384e5){_0x4a93a5=_0x4a93a5-0x1b8;let _0x13268f=_0x419d3e[_0x4a93a5];return _0x13268f;},a335_0x22d0(_0x10b41d,_0x57cfd5);}exports[a335_0x2cb9e7(0x1cd)]=ZipCreatorRollback;