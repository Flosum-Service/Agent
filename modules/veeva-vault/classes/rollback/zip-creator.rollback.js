const a334_0x273f16=a334_0x5e24;(function(_0x1bb5ac,_0x5c190c){const _0x35f186=a334_0x5e24,_0x5596b8=_0x1bb5ac();while(!![]){try{const _0x30c2c5=parseInt(_0x35f186(0x7d))/0x1+parseInt(_0x35f186(0x96))/0x2*(-parseInt(_0x35f186(0x88))/0x3)+-parseInt(_0x35f186(0x80))/0x4+-parseInt(_0x35f186(0x82))/0x5+-parseInt(_0x35f186(0x79))/0x6+parseInt(_0x35f186(0x7b))/0x7+parseInt(_0x35f186(0x98))/0x8;if(_0x30c2c5===_0x5c190c)break;else _0x5596b8['push'](_0x5596b8['shift']());}catch(_0xd05809){_0x5596b8['push'](_0x5596b8['shift']());}}}(a334_0x1607,0x64d5f));function a334_0x1607(){const _0x43dab8=['_backup','apply','file','_zip','FactoryBodyCreatorRollback','https://veevavault.com/','./body-creator/factory.body-creator.rollback','loadAsync','nodebuffer','stepName','534zeaDTk','_rollbackName','5959576gRGFHe','null','fillZip','vaultpackage.xml','__esModule','(((.+)+)+)+$','Flosum','Builder','228924yVywkO','_backupZip','1723197uTpejC','defineProperty','651278RKVCDp','_deploymentResults','sort','2826176XTInhC','toString','1135100RISWPi','.mdl','default','search','create','ZipCreatorRollback','2895pKPxtY','Rollback','sortDeploymentResults','generateAsync'];a334_0x1607=function(){return _0x43dab8;};return a334_0x1607();}function a334_0x5e24(_0x47a6c1,_0xadf5f){const _0x4dd588=a334_0x1607();return a334_0x5e24=function(_0x127bc7,_0x3b1e32){_0x127bc7=_0x127bc7-0x75;let _0x1607c5=_0x4dd588[_0x127bc7];return _0x1607c5;},a334_0x5e24(_0x47a6c1,_0xadf5f);}const a334_0x3b1e32=(function(){let _0x4af3fd=!![];return function(_0x11fc97,_0x1154c9){const _0x1128c7=_0x4af3fd?function(){const _0x12762e=a334_0x5e24;if(_0x1154c9){const _0x249de0=_0x1154c9[_0x12762e(0x8d)](_0x11fc97,arguments);return _0x1154c9=null,_0x249de0;}}:function(){};return _0x4af3fd=![],_0x1128c7;};}()),a334_0x127bc7=a334_0x3b1e32(this,function(){const _0x48127e=a334_0x5e24;return a334_0x127bc7['toString']()[_0x48127e(0x85)](_0x48127e(0x76))[_0x48127e(0x81)]()['constructor'](a334_0x127bc7)['search'](_0x48127e(0x76));});a334_0x127bc7();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4abfec){const _0x996fdd=a334_0x5e24;return _0x4abfec&&_0x4abfec[_0x996fdd(0x75)]?_0x4abfec:{'default':_0x4abfec};};Object[a334_0x273f16(0x7c)](exports,a334_0x273f16(0x75),{'value':!![]}),exports[a334_0x273f16(0x87)]=void 0x0;const jszip_1=__importDefault(require('jszip')),factory_body_creator_rollback_1=require(a334_0x273f16(0x92)),xml2js_1=require('xml2js');class ZipCreatorRollback{constructor({deploymentResults:_0x19567d,backup:_0x460c2b,rollbackName:_0x52c306}){const _0x102a42=a334_0x273f16;this[_0x102a42(0x7e)]=_0x19567d,this['_rollbackName']=_0x52c306,this[_0x102a42(0x8c)]=_0x460c2b;}async['createZips'](){const _0x5e1500=a334_0x273f16;this[_0x5e1500(0x7a)]=new jszip_1['default'](),this[_0x5e1500(0x8f)]=new jszip_1[(_0x5e1500(0x84))](),await this[_0x5e1500(0x7a)][_0x5e1500(0x93)](this[_0x5e1500(0x8c)],{'base64':!![]});}[a334_0x273f16(0x8a)](){const _0x183f04=a334_0x273f16;this['_deploymentResults'][_0x183f04(0x7f)]((_0x3c43fa,_0x402707)=>_0x3c43fa[_0x183f04(0x95)]<_0x402707[_0x183f04(0x95)]?0x1:_0x402707[_0x183f04(0x95)]<_0x3c43fa[_0x183f04(0x95)]?-0x1:0x0);}async[a334_0x273f16(0x9a)](){const _0xbdb97c=a334_0x273f16;for(const _0x5aa2fe of this['_deploymentResults']){const _0x111557=await factory_body_creator_rollback_1[_0xbdb97c(0x90)]['create']({'deploymentResult':_0x5aa2fe,'backupZip':this[_0xbdb97c(0x7a)]})['create'](),{type:_0x135b87,name:_0x6255fe}=_0x5aa2fe;this['_zip'][_0xbdb97c(0x8e)](_0x135b87+'.'+_0x6255fe+_0xbdb97c(0x83),_0x111557);}const _0x5dc566=new xml2js_1[(_0xbdb97c(0x78))]({'headless':!![]}),_0x5ee342={'vaultpackage':{'$':{'xmlns':_0xbdb97c(0x91)},'name':this[_0xbdb97c(0x97)],'source':{'vault':undefined,'author':_0xbdb97c(0x77)},'packagetype':'migration__v','summary':_0xbdb97c(0x89),'description':_0xbdb97c(0x99)}};this[_0xbdb97c(0x8f)][_0xbdb97c(0x8e)](_0xbdb97c(0x9b),_0x5dc566['buildObject'](_0x5ee342));}async[a334_0x273f16(0x86)](){const _0x146b18=a334_0x273f16;return await this['createZips'](),this[_0x146b18(0x8a)](),await this[_0x146b18(0x9a)](),this['_zip'][_0x146b18(0x8b)]({'type':_0x146b18(0x94)});}}exports[a334_0x273f16(0x87)]=ZipCreatorRollback;