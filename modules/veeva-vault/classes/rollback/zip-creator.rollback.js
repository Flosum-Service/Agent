const a335_0x44b26f=a335_0x4693;(function(_0x1cc317,_0x16f305){const _0x39f8ff=a335_0x4693,_0x1fa72a=_0x1cc317();while(!![]){try{const _0x23d785=parseInt(_0x39f8ff(0x155))/0x1+parseInt(_0x39f8ff(0x149))/0x2+-parseInt(_0x39f8ff(0x15d))/0x3*(parseInt(_0x39f8ff(0x159))/0x4)+parseInt(_0x39f8ff(0x150))/0x5+-parseInt(_0x39f8ff(0x15b))/0x6+parseInt(_0x39f8ff(0x165))/0x7*(parseInt(_0x39f8ff(0x162))/0x8)+parseInt(_0x39f8ff(0x154))/0x9;if(_0x23d785===_0x16f305)break;else _0x1fa72a['push'](_0x1fa72a['shift']());}catch(_0x5e5770){_0x1fa72a['push'](_0x1fa72a['shift']());}}}(a335_0x3691,0xc4a64));const a335_0x111802=(function(){let _0x11230f=!![];return function(_0x16859a,_0x4f85c5){const _0xf577fe=_0x11230f?function(){if(_0x4f85c5){const _0x3984a4=_0x4f85c5['apply'](_0x16859a,arguments);return _0x4f85c5=null,_0x3984a4;}}:function(){};return _0x11230f=![],_0xf577fe;};}()),a335_0x2cf431=a335_0x111802(this,function(){const _0x45eabe=a335_0x4693;return a335_0x2cf431[_0x45eabe(0x164)]()['search'](_0x45eabe(0x148))[_0x45eabe(0x164)]()[_0x45eabe(0x147)](a335_0x2cf431)[_0x45eabe(0x156)](_0x45eabe(0x148));});function a335_0x3691(){const _0x46da67=['fillZip','6778464eJkZpj','createZips','30wdCvfj','./body-creator/factory.body-creator.rollback','_zip','file','__esModule','272oudLen','default','toString','35973nuaezl','stepName','.mdl','generateAsync','jszip','migration__v','null','nodebuffer','constructor','(((.+)+)+)+$','2498038Dtztei','FactoryBodyCreatorRollback','_deploymentResults','_rollbackName','buildObject','sortDeploymentResults','Rollback','744960jAZwUa','vaultpackage.xml','_backupZip','ZipCreatorRollback','5303250MXNWVa','439453TtctSo','search','Builder','create','266488kgbemm'];a335_0x3691=function(){return _0x46da67;};return a335_0x3691();}a335_0x2cf431();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x37241d){const _0x1c5f85=a335_0x4693;return _0x37241d&&_0x37241d[_0x1c5f85(0x161)]?_0x37241d:{'default':_0x37241d};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a335_0x44b26f(0x153)]=void 0x0;const jszip_1=__importDefault(require(a335_0x44b26f(0x169))),factory_body_creator_rollback_1=require(a335_0x44b26f(0x15e)),xml2js_1=require('xml2js');class ZipCreatorRollback{constructor({deploymentResults:_0x31add4,backup:_0x456257,rollbackName:_0x4861e2}){const _0x237467=a335_0x44b26f;this['_deploymentResults']=_0x31add4,this[_0x237467(0x14c)]=_0x4861e2,this['_backup']=_0x456257;}async[a335_0x44b26f(0x15c)](){const _0x405ce7=a335_0x44b26f;this[_0x405ce7(0x152)]=new jszip_1['default'](),this['_zip']=new jszip_1[(_0x405ce7(0x163))](),await this[_0x405ce7(0x152)]['loadAsync'](this['_backup'],{'base64':!![]});}[a335_0x44b26f(0x14e)](){const _0x473cac=a335_0x44b26f;this[_0x473cac(0x14b)]['sort']((_0x4eb017,_0x176a5a)=>_0x4eb017['stepName']<_0x176a5a[_0x473cac(0x166)]?0x1:_0x176a5a[_0x473cac(0x166)]<_0x4eb017[_0x473cac(0x166)]?-0x1:0x0);}async[a335_0x44b26f(0x15a)](){const _0x5b0b00=a335_0x44b26f;for(const _0x259538 of this[_0x5b0b00(0x14b)]){const _0x58af74=await factory_body_creator_rollback_1[_0x5b0b00(0x14a)][_0x5b0b00(0x158)]({'deploymentResult':_0x259538,'backupZip':this[_0x5b0b00(0x152)]})[_0x5b0b00(0x158)](),{type:_0x322197,name:_0x6388b6}=_0x259538;this[_0x5b0b00(0x15f)]['file'](_0x322197+'.'+_0x6388b6+_0x5b0b00(0x167),_0x58af74);}const _0x31415d=new xml2js_1[(_0x5b0b00(0x157))]({'headless':!![]}),_0xb1bb1a={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this[_0x5b0b00(0x14c)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x5b0b00(0x144),'summary':_0x5b0b00(0x14f),'description':_0x5b0b00(0x145)}};this[_0x5b0b00(0x15f)][_0x5b0b00(0x160)](_0x5b0b00(0x151),_0x31415d[_0x5b0b00(0x14d)](_0xb1bb1a));}async[a335_0x44b26f(0x158)](){const _0x1619d0=a335_0x44b26f;return await this[_0x1619d0(0x15c)](),this[_0x1619d0(0x14e)](),await this['fillZip'](),this[_0x1619d0(0x15f)][_0x1619d0(0x168)]({'type':_0x1619d0(0x146)});}}function a335_0x4693(_0xa6c097,_0x354781){const _0x3d331c=a335_0x3691();return a335_0x4693=function(_0x2cf431,_0x111802){_0x2cf431=_0x2cf431-0x144;let _0x36912e=_0x3d331c[_0x2cf431];return _0x36912e;},a335_0x4693(_0xa6c097,_0x354781);}exports[a335_0x44b26f(0x153)]=ZipCreatorRollback;