const a378_0x90234=a378_0x18df;(function(_0x26e461,_0x46d95f){const _0x10dccd=a378_0x18df,_0xb441f4=_0x26e461();while(!![]){try{const _0x50dfe2=parseInt(_0x10dccd(0x95))/0x1+parseInt(_0x10dccd(0xa3))/0x2+parseInt(_0x10dccd(0xa8))/0x3*(-parseInt(_0x10dccd(0x85))/0x4)+-parseInt(_0x10dccd(0x86))/0x5+parseInt(_0x10dccd(0x88))/0x6+parseInt(_0x10dccd(0x99))/0x7*(parseInt(_0x10dccd(0xa5))/0x8)+-parseInt(_0x10dccd(0xa0))/0x9;if(_0x50dfe2===_0x46d95f)break;else _0xb441f4['push'](_0xb441f4['shift']());}catch(_0x3034a9){_0xb441f4['push'](_0xb441f4['shift']());}}}(a378_0x939d,0x6123f));const a378_0x54c56e=(function(){let _0xe0d0ab=!![];return function(_0x5d043c,_0x7c0243){const _0xbd8666=_0xe0d0ab?function(){const _0x3f1ff4=a378_0x18df;if(_0x7c0243){const _0x199d54=_0x7c0243[_0x3f1ff4(0x84)](_0x5d043c,arguments);return _0x7c0243=null,_0x199d54;}}:function(){};return _0xe0d0ab=![],_0xbd8666;};}()),a378_0x300e30=a378_0x54c56e(this,function(){const _0x2224a1=a378_0x18df;return a378_0x300e30[_0x2224a1(0xae)]()[_0x2224a1(0x97)](_0x2224a1(0x8d))[_0x2224a1(0xae)]()[_0x2224a1(0x9e)](a378_0x300e30)['search'](_0x2224a1(0x8d));});a378_0x300e30();'use strict';function a378_0x18df(_0x1c8735,_0x1d2882){const _0xf3e86a=a378_0x939d();return a378_0x18df=function(_0x300e30,_0x54c56e){_0x300e30=_0x300e30-0x84;let _0x939dbc=_0xf3e86a[_0x300e30];return _0x939dbc;},a378_0x18df(_0x1c8735,_0x1d2882);}var __importDefault=this&&this[a378_0x90234(0xab)]||function(_0x578038){return _0x578038&&_0x578038['__esModule']?_0x578038:{'default':_0x578038};};Object[a378_0x90234(0xa1)](exports,a378_0x90234(0xaf),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;const jszip_1=__importDefault(require(a378_0x90234(0x9a))),factory_body_creator_rollback_1=require(a378_0x90234(0xa4)),xml2js_1=require(a378_0x90234(0xa9));function a378_0x939d(){const _0x5eefed=['sort','buildObject','Builder','file','617333KJWQUx','nodebuffer','search','Flosum','567266okBaDE','jszip','fillZip','Rollback','null','constructor','.mdl','6397686gdRQWf','defineProperty','vaultpackage.xml','693442TwDxUI','./body-creator/factory.body-creator.rollback','56vicICn','createZips','migration__v','279861IWZowN','xml2js','_deploymentResults','__importDefault','loadAsync','stepName','toString','__esModule','_rollbackName','apply','20HInjYV','109700YKZEol','_backupZip','394776gSTvFf','https://veevavault.com/','sortDeploymentResults','generateAsync','create','(((.+)+)+)+$','default','_zip','_backup'];a378_0x939d=function(){return _0x5eefed;};return a378_0x939d();}class ZipCreatorRollback{constructor({deploymentResults:_0x6cd892,backup:_0x1d46cc,rollbackName:_0x22271f}){const _0x29ec19=a378_0x90234;this['_deploymentResults']=_0x6cd892,this[_0x29ec19(0xb0)]=_0x22271f,this['_backup']=_0x1d46cc;}async[a378_0x90234(0xa6)](){const _0x1a8cfb=a378_0x90234;this[_0x1a8cfb(0x87)]=new jszip_1[(_0x1a8cfb(0x8e))](),this['_zip']=new jszip_1[(_0x1a8cfb(0x8e))](),await this['_backupZip'][_0x1a8cfb(0xac)](this[_0x1a8cfb(0x90)],{'base64':!![]});}[a378_0x90234(0x8a)](){const _0x1711bd=a378_0x90234;this[_0x1711bd(0xaa)][_0x1711bd(0x91)]((_0x952719,_0x50df0d)=>_0x952719['stepName']<_0x50df0d['stepName']?0x1:_0x50df0d[_0x1711bd(0xad)]<_0x952719[_0x1711bd(0xad)]?-0x1:0x0);}async['fillZip'](){const _0x39d8d9=a378_0x90234;for(const _0x1758d0 of this[_0x39d8d9(0xaa)]){const _0x31cc79=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback'][_0x39d8d9(0x8c)]({'deploymentResult':_0x1758d0,'backupZip':this[_0x39d8d9(0x87)]})[_0x39d8d9(0x8c)](),{type:_0x21f5c9,name:_0x4ce89c}=_0x1758d0;this[_0x39d8d9(0x8f)][_0x39d8d9(0x94)](_0x21f5c9+'.'+_0x4ce89c+_0x39d8d9(0x9f),_0x31cc79);}const _0x176f47=new xml2js_1[(_0x39d8d9(0x93))]({'headless':!![]}),_0x1ef025={'vaultpackage':{'$':{'xmlns':_0x39d8d9(0x89)},'name':this[_0x39d8d9(0xb0)],'source':{'vault':undefined,'author':_0x39d8d9(0x98)},'packagetype':_0x39d8d9(0xa7),'summary':_0x39d8d9(0x9c),'description':_0x39d8d9(0x9d)}};this[_0x39d8d9(0x8f)]['file'](_0x39d8d9(0xa2),_0x176f47[_0x39d8d9(0x92)](_0x1ef025));}async[a378_0x90234(0x8c)](){const _0xfa652e=a378_0x90234;return await this[_0xfa652e(0xa6)](),this['sortDeploymentResults'](),await this[_0xfa652e(0x9b)](),this[_0xfa652e(0x8f)][_0xfa652e(0x8b)]({'type':_0xfa652e(0x96)});}}exports['ZipCreatorRollback']=ZipCreatorRollback;