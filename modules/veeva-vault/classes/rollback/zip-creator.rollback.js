const a335_0x279f7f=a335_0x4d86;(function(_0x55a50f,_0x4c9ad5){const _0x3f0504=a335_0x4d86,_0x1bc489=_0x55a50f();while(!![]){try{const _0x35a29b=parseInt(_0x3f0504(0xe6))/0x1*(parseInt(_0x3f0504(0xdc))/0x2)+-parseInt(_0x3f0504(0xe1))/0x3+parseInt(_0x3f0504(0xd5))/0x4+-parseInt(_0x3f0504(0xe4))/0x5*(parseInt(_0x3f0504(0xdf))/0x6)+-parseInt(_0x3f0504(0xcc))/0x7*(-parseInt(_0x3f0504(0xd7))/0x8)+parseInt(_0x3f0504(0xd1))/0x9+-parseInt(_0x3f0504(0xe9))/0xa*(-parseInt(_0x3f0504(0xde))/0xb);if(_0x35a29b===_0x4c9ad5)break;else _0x1bc489['push'](_0x1bc489['shift']());}catch(_0x3f9ebe){_0x1bc489['push'](_0x1bc489['shift']());}}}(a335_0xc49b,0x4442c));const a335_0x456ecb=(function(){let _0x3b048e=!![];return function(_0x3085b6,_0x434e21){const _0x312f21=_0x3b048e?function(){if(_0x434e21){const _0x24aa9a=_0x434e21['apply'](_0x3085b6,arguments);return _0x434e21=null,_0x24aa9a;}}:function(){};return _0x3b048e=![],_0x312f21;};}()),a335_0x25665d=a335_0x456ecb(this,function(){const _0x311fd9=a335_0x4d86;return a335_0x25665d[_0x311fd9(0xc8)]()[_0x311fd9(0xc2)](_0x311fd9(0xd4))[_0x311fd9(0xc8)]()[_0x311fd9(0xc7)](a335_0x25665d)[_0x311fd9(0xc2)](_0x311fd9(0xd4));});function a335_0xc49b(){const _0x153eb1=['./body-creator/factory.body-creator.rollback','13335cJbEeO','xml2js','createZips','FactoryBodyCreatorRollback','stepName','963954pXHLdg','_deploymentResults','Flosum','(((.+)+)+)+$','60164SrXckC','buildObject','2288qHwNSQ','defineProperty','_rollbackName','nodebuffer','__esModule','2GmEBvP','null','34111VVbzpJ','6TKlBju','ZipCreatorRollback','1212162GZKKEY','generateAsync','sortDeploymentResults','2151965QDPPAP','_backupZip','347834bTwqqf','__importDefault','create','320RbhOPf','_zip','file','search','fillZip','.mdl','Rollback','https://veevavault.com/','constructor','toString','default','jszip'];a335_0xc49b=function(){return _0x153eb1;};return a335_0xc49b();}a335_0x25665d();'use strict';var __importDefault=this&&this[a335_0x279f7f(0xe7)]||function(_0x4c586e){const _0x9087c4=a335_0x279f7f;return _0x4c586e&&_0x4c586e[_0x9087c4(0xdb)]?_0x4c586e:{'default':_0x4c586e};};Object[a335_0x279f7f(0xd8)](exports,a335_0x279f7f(0xdb),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;const jszip_1=__importDefault(require(a335_0x279f7f(0xca))),factory_body_creator_rollback_1=require(a335_0x279f7f(0xcb)),xml2js_1=require(a335_0x279f7f(0xcd));function a335_0x4d86(_0x1019c1,_0x39c0ec){const _0x179eb5=a335_0xc49b();return a335_0x4d86=function(_0x25665d,_0x456ecb){_0x25665d=_0x25665d-0xc1;let _0xc49b8d=_0x179eb5[_0x25665d];return _0xc49b8d;},a335_0x4d86(_0x1019c1,_0x39c0ec);}class ZipCreatorRollback{constructor({deploymentResults:_0x57436f,backup:_0x9db3f9,rollbackName:_0x26cfb9}){const _0x487a4d=a335_0x279f7f;this[_0x487a4d(0xd2)]=_0x57436f,this['_rollbackName']=_0x26cfb9,this['_backup']=_0x9db3f9;}async[a335_0x279f7f(0xce)](){const _0x41ee0d=a335_0x279f7f;this[_0x41ee0d(0xe5)]=new jszip_1[(_0x41ee0d(0xc9))](),this[_0x41ee0d(0xea)]=new jszip_1[(_0x41ee0d(0xc9))](),await this[_0x41ee0d(0xe5)]['loadAsync'](this['_backup'],{'base64':!![]});}['sortDeploymentResults'](){const _0x1c73b0=a335_0x279f7f;this[_0x1c73b0(0xd2)]['sort']((_0x5216d9,_0x476798)=>_0x5216d9[_0x1c73b0(0xd0)]<_0x476798[_0x1c73b0(0xd0)]?0x1:_0x476798[_0x1c73b0(0xd0)]<_0x5216d9[_0x1c73b0(0xd0)]?-0x1:0x0);}async[a335_0x279f7f(0xc3)](){const _0x4a1698=a335_0x279f7f;for(const _0x175904 of this[_0x4a1698(0xd2)]){const _0x277e54=await factory_body_creator_rollback_1[_0x4a1698(0xcf)][_0x4a1698(0xe8)]({'deploymentResult':_0x175904,'backupZip':this['_backupZip']})['create'](),{type:_0x33f7a9,name:_0x1fc1c9}=_0x175904;this[_0x4a1698(0xea)][_0x4a1698(0xc1)](_0x33f7a9+'.'+_0x1fc1c9+_0x4a1698(0xc4),_0x277e54);}const _0x2d285f=new xml2js_1['Builder']({'headless':!![]}),_0x452f68={'vaultpackage':{'$':{'xmlns':_0x4a1698(0xc6)},'name':this[_0x4a1698(0xd9)],'source':{'vault':undefined,'author':_0x4a1698(0xd3)},'packagetype':'migration__v','summary':_0x4a1698(0xc5),'description':_0x4a1698(0xdd)}};this[_0x4a1698(0xea)][_0x4a1698(0xc1)]('vaultpackage.xml',_0x2d285f[_0x4a1698(0xd6)](_0x452f68));}async[a335_0x279f7f(0xe8)](){const _0x51af20=a335_0x279f7f;return await this[_0x51af20(0xce)](),this[_0x51af20(0xe3)](),await this['fillZip'](),this['_zip'][_0x51af20(0xe2)]({'type':_0x51af20(0xda)});}}exports[a335_0x279f7f(0xe0)]=ZipCreatorRollback;