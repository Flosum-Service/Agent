const a380_0x2cc9e6=a380_0x40bb;(function(_0x150b06,_0x37655c){const _0x477962=a380_0x40bb,_0x5d7ab1=_0x150b06();while(!![]){try{const _0x26ff98=-parseInt(_0x477962(0x1bc))/0x1*(parseInt(_0x477962(0x1be))/0x2)+-parseInt(_0x477962(0x1c3))/0x3+-parseInt(_0x477962(0x1bf))/0x4*(-parseInt(_0x477962(0x1ba))/0x5)+-parseInt(_0x477962(0x1d3))/0x6+parseInt(_0x477962(0x1bb))/0x7*(-parseInt(_0x477962(0x1d7))/0x8)+parseInt(_0x477962(0x1dc))/0x9+parseInt(_0x477962(0x1c0))/0xa;if(_0x26ff98===_0x37655c)break;else _0x5d7ab1['push'](_0x5d7ab1['shift']());}catch(_0x29cdde){_0x5d7ab1['push'](_0x5d7ab1['shift']());}}}(a380_0x5889,0xe9218));const a380_0x53e696=(function(){let _0x458db0=!![];return function(_0x4349fc,_0x403940){const _0x10fccb=_0x458db0?function(){const _0x5c09b0=a380_0x40bb;if(_0x403940){const _0x38dad8=_0x403940[_0x5c09b0(0x1cb)](_0x4349fc,arguments);return _0x403940=null,_0x38dad8;}}:function(){};return _0x458db0=![],_0x10fccb;};}()),a380_0x3aafdb=a380_0x53e696(this,function(){const _0xbe94a7=a380_0x40bb;return a380_0x3aafdb[_0xbe94a7(0x1cc)]()[_0xbe94a7(0x1c1)](_0xbe94a7(0x1d9))['toString']()[_0xbe94a7(0x1c5)](a380_0x3aafdb)[_0xbe94a7(0x1c1)]('(((.+)+)+)+$');});a380_0x3aafdb();function a380_0x40bb(_0x1226a6,_0x24bc6f){const _0x114622=a380_0x5889();return a380_0x40bb=function(_0x3aafdb,_0x53e696){_0x3aafdb=_0x3aafdb-0x1b7;let _0x58896f=_0x114622[_0x3aafdb];return _0x58896f;},a380_0x40bb(_0x1226a6,_0x24bc6f);}'use strict';var __importDefault=this&&this[a380_0x2cc9e6(0x1c9)]||function(_0x4ec6ac){return _0x4ec6ac&&_0x4ec6ac['__esModule']?_0x4ec6ac:{'default':_0x4ec6ac};};Object['defineProperty'](exports,a380_0x2cc9e6(0x1c2),{'value':!![]}),exports[a380_0x2cc9e6(0x1c8)]=void 0x0;function a380_0x5889(){const _0x484b43=['apply','toString','xml2js','create','https://veevavault.com/','sortDeploymentResults','file','Rollback','6979536YcFdzV','jszip','buildObject','_zip','8KPvISA','Builder','(((.+)+)+)+$','sort','_backup','1445868THGqYY','_backupZip','stepName','fillZip','vaultpackage.xml','null','./body-creator/factory.body-creator.rollback','90465YYOZhL','12744319WSkrTF','643IJFpIQ','loadAsync','5138zxWnnL','148LQDnhd','47989530kcFwTm','search','__esModule','115206gIJQpc','_deploymentResults','constructor','.mdl','default','ZipCreatorRollback','__importDefault','migration__v'];a380_0x5889=function(){return _0x484b43;};return a380_0x5889();}const jszip_1=__importDefault(require(a380_0x2cc9e6(0x1d4))),factory_body_creator_rollback_1=require(a380_0x2cc9e6(0x1b9)),xml2js_1=require(a380_0x2cc9e6(0x1cd));class ZipCreatorRollback{constructor({deploymentResults:_0x5b16ab,backup:_0x40e5b5,rollbackName:_0x352adb}){const _0x592a5a=a380_0x2cc9e6;this[_0x592a5a(0x1c4)]=_0x5b16ab,this['_rollbackName']=_0x352adb,this[_0x592a5a(0x1db)]=_0x40e5b5;}async['createZips'](){const _0xb6ad48=a380_0x2cc9e6;this['_backupZip']=new jszip_1[(_0xb6ad48(0x1c7))](),this['_zip']=new jszip_1[(_0xb6ad48(0x1c7))](),await this[_0xb6ad48(0x1dd)][_0xb6ad48(0x1bd)](this['_backup'],{'base64':!![]});}['sortDeploymentResults'](){const _0x5bab19=a380_0x2cc9e6;this[_0x5bab19(0x1c4)][_0x5bab19(0x1da)]((_0x289af5,_0x201af4)=>_0x289af5[_0x5bab19(0x1de)]<_0x201af4[_0x5bab19(0x1de)]?0x1:_0x201af4[_0x5bab19(0x1de)]<_0x289af5[_0x5bab19(0x1de)]?-0x1:0x0);}async[a380_0x2cc9e6(0x1df)](){const _0x20db51=a380_0x2cc9e6;for(const _0x35401f of this['_deploymentResults']){const _0x1a8248=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback']['create']({'deploymentResult':_0x35401f,'backupZip':this['_backupZip']})[_0x20db51(0x1ce)](),{type:_0x1ac11c,name:_0x130dfd}=_0x35401f;this[_0x20db51(0x1d6)][_0x20db51(0x1d1)](_0x1ac11c+'.'+_0x130dfd+_0x20db51(0x1c6),_0x1a8248);}const _0x5f58d4=new xml2js_1[(_0x20db51(0x1d8))]({'headless':!![]}),_0x336525={'vaultpackage':{'$':{'xmlns':_0x20db51(0x1cf)},'name':this['_rollbackName'],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x20db51(0x1ca),'summary':_0x20db51(0x1d2),'description':_0x20db51(0x1b8)}};this[_0x20db51(0x1d6)]['file'](_0x20db51(0x1b7),_0x5f58d4[_0x20db51(0x1d5)](_0x336525));}async[a380_0x2cc9e6(0x1ce)](){const _0x429562=a380_0x2cc9e6;return await this['createZips'](),this[_0x429562(0x1d0)](),await this['fillZip'](),this['_zip']['generateAsync']({'type':'nodebuffer'});}}exports[a380_0x2cc9e6(0x1c8)]=ZipCreatorRollback;