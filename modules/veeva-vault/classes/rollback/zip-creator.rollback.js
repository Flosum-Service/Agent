const a334_0x3f6095=a334_0x5aea;function a334_0x5aea(_0x49856b,_0x33ba5a){const _0x508423=a334_0x5e64();return a334_0x5aea=function(_0x1a25fd,_0x1b35f8){_0x1a25fd=_0x1a25fd-0x10c;let _0x5e6459=_0x508423[_0x1a25fd];return _0x5e6459;},a334_0x5aea(_0x49856b,_0x33ba5a);}(function(_0x3a6f4b,_0x2f8a8e){const _0x20523f=a334_0x5aea,_0x552ccc=_0x3a6f4b();while(!![]){try{const _0x4fc1cc=parseInt(_0x20523f(0x131))/0x1+parseInt(_0x20523f(0x10d))/0x2+-parseInt(_0x20523f(0x10e))/0x3+-parseInt(_0x20523f(0x129))/0x4+parseInt(_0x20523f(0x134))/0x5*(-parseInt(_0x20523f(0x116))/0x6)+-parseInt(_0x20523f(0x12e))/0x7*(-parseInt(_0x20523f(0x122))/0x8)+parseInt(_0x20523f(0x11c))/0x9;if(_0x4fc1cc===_0x2f8a8e)break;else _0x552ccc['push'](_0x552ccc['shift']());}catch(_0x22d7b6){_0x552ccc['push'](_0x552ccc['shift']());}}}(a334_0x5e64,0xe1411));const a334_0x1b35f8=(function(){let _0x5cc845=!![];return function(_0x2c73e5,_0x51be1b){const _0x595c77=_0x5cc845?function(){const _0x1d38c7=a334_0x5aea;if(_0x51be1b){const _0x5acfe9=_0x51be1b[_0x1d38c7(0x10f)](_0x2c73e5,arguments);return _0x51be1b=null,_0x5acfe9;}}:function(){};return _0x5cc845=![],_0x595c77;};}()),a334_0x1a25fd=a334_0x1b35f8(this,function(){const _0x51d2bd=a334_0x5aea;return a334_0x1a25fd[_0x51d2bd(0x12f)]()['search'](_0x51d2bd(0x118))['toString']()[_0x51d2bd(0x11f)](a334_0x1a25fd)['search'](_0x51d2bd(0x118));});a334_0x1a25fd();'use strict';function a334_0x5e64(){const _0x32ec69=['defineProperty','vaultpackage.xml','5630256ToDCBO','_backup','createZips','constructor','stepName','nodebuffer','13085008zhBPcK','__importDefault','sortDeploymentResults','Flosum','.mdl','_deploymentResults','fillZip','4049780LmQtzp','create','_backupZip','https://veevavault.com/','Rollback','7VfMhRV','toString','__esModule','74403lBdoxA','file','_rollbackName','10ublseR','default','buildObject','3166194MhxMHy','2971986VZFhGH','apply','null','loadAsync','_zip','xml2js','ZipCreatorRollback','sort','2978886MMmgDm','FactoryBodyCreatorRollback','(((.+)+)+)+$','Builder'];a334_0x5e64=function(){return _0x32ec69;};return a334_0x5e64();}var __importDefault=this&&this[a334_0x3f6095(0x123)]||function(_0x2d30e6){return _0x2d30e6&&_0x2d30e6['__esModule']?_0x2d30e6:{'default':_0x2d30e6};};Object[a334_0x3f6095(0x11a)](exports,a334_0x3f6095(0x130),{'value':!![]}),exports[a334_0x3f6095(0x114)]=void 0x0;const jszip_1=__importDefault(require('jszip')),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require(a334_0x3f6095(0x113));class ZipCreatorRollback{constructor({deploymentResults:_0x4450bb,backup:_0x1134a5,rollbackName:_0xc751f8}){const _0x2abc43=a334_0x3f6095;this[_0x2abc43(0x127)]=_0x4450bb,this[_0x2abc43(0x133)]=_0xc751f8,this['_backup']=_0x1134a5;}async[a334_0x3f6095(0x11e)](){const _0x53fd56=a334_0x3f6095;this[_0x53fd56(0x12b)]=new jszip_1[(_0x53fd56(0x135))](),this[_0x53fd56(0x112)]=new jszip_1[(_0x53fd56(0x135))](),await this[_0x53fd56(0x12b)][_0x53fd56(0x111)](this[_0x53fd56(0x11d)],{'base64':!![]});}[a334_0x3f6095(0x124)](){const _0xfac08b=a334_0x3f6095;this['_deploymentResults'][_0xfac08b(0x115)]((_0x420f07,_0x2967ec)=>_0x420f07[_0xfac08b(0x120)]<_0x2967ec[_0xfac08b(0x120)]?0x1:_0x2967ec[_0xfac08b(0x120)]<_0x420f07['stepName']?-0x1:0x0);}async['fillZip'](){const _0x35897b=a334_0x3f6095;for(const _0x183a55 of this[_0x35897b(0x127)]){const _0x3ecb92=await factory_body_creator_rollback_1[_0x35897b(0x117)][_0x35897b(0x12a)]({'deploymentResult':_0x183a55,'backupZip':this[_0x35897b(0x12b)]})[_0x35897b(0x12a)](),{type:_0x2db536,name:_0xd9687d}=_0x183a55;this[_0x35897b(0x112)][_0x35897b(0x132)](_0x2db536+'.'+_0xd9687d+_0x35897b(0x126),_0x3ecb92);}const _0x3c3185=new xml2js_1[(_0x35897b(0x119))]({'headless':!![]}),_0x2dbd4c={'vaultpackage':{'$':{'xmlns':_0x35897b(0x12c)},'name':this[_0x35897b(0x133)],'source':{'vault':undefined,'author':_0x35897b(0x125)},'packagetype':'migration__v','summary':_0x35897b(0x12d),'description':_0x35897b(0x110)}};this[_0x35897b(0x112)][_0x35897b(0x132)](_0x35897b(0x11b),_0x3c3185[_0x35897b(0x10c)](_0x2dbd4c));}async[a334_0x3f6095(0x12a)](){const _0x10b66d=a334_0x3f6095;return await this[_0x10b66d(0x11e)](),this[_0x10b66d(0x124)](),await this[_0x10b66d(0x128)](),this['_zip']['generateAsync']({'type':_0x10b66d(0x121)});}}exports['ZipCreatorRollback']=ZipCreatorRollback;