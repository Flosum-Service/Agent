const a367_0x516082=a367_0xd2b2;(function(_0x17e2df,_0x503dec){const _0x1e1621=a367_0xd2b2,_0x2c7bc5=_0x17e2df();while(!![]){try{const _0x4f2890=parseInt(_0x1e1621(0x14e))/0x1+parseInt(_0x1e1621(0x146))/0x2*(-parseInt(_0x1e1621(0x15b))/0x3)+parseInt(_0x1e1621(0x141))/0x4+parseInt(_0x1e1621(0x14a))/0x5+parseInt(_0x1e1621(0x148))/0x6*(-parseInt(_0x1e1621(0x14f))/0x7)+-parseInt(_0x1e1621(0x13c))/0x8*(-parseInt(_0x1e1621(0x14b))/0x9)+-parseInt(_0x1e1621(0x147))/0xa;if(_0x4f2890===_0x503dec)break;else _0x2c7bc5['push'](_0x2c7bc5['shift']());}catch(_0x1f797f){_0x2c7bc5['push'](_0x2c7bc5['shift']());}}}(a367_0x2173,0x538da));const a367_0x30e6db=(function(){let _0x1ae039=!![];return function(_0x4d4a14,_0x141dc3){const _0x433906=_0x1ae039?function(){const _0x5815a6=a367_0xd2b2;if(_0x141dc3){const _0xd930b3=_0x141dc3[_0x5815a6(0x139)](_0x4d4a14,arguments);return _0x141dc3=null,_0xd930b3;}}:function(){};return _0x1ae039=![],_0x433906;};}()),a367_0x1fb21b=a367_0x30e6db(this,function(){const _0x13f452=a367_0xd2b2;return a367_0x1fb21b['toString']()['search'](_0x13f452(0x149))['toString']()[_0x13f452(0x152)](a367_0x1fb21b)[_0x13f452(0x143)](_0x13f452(0x149));});a367_0x1fb21b();'use strict';var __importDefault=this&&this[a367_0x516082(0x138)]||function(_0x59ff0f){const _0x145e81=a367_0x516082;return _0x59ff0f&&_0x59ff0f[_0x145e81(0x136)]?_0x59ff0f:{'default':_0x59ff0f};};Object[a367_0x516082(0x13e)](exports,'__esModule',{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;const jszip_1=__importDefault(require(a367_0x516082(0x159))),factory_body_creator_rollback_1=require(a367_0x516082(0x13d)),xml2js_1=require(a367_0x516082(0x15a));class ZipCreatorRollback{constructor({deploymentResults:_0x4d3cbf,backup:_0x44a24b,rollbackName:_0x43076f}){const _0xbc73c4=a367_0x516082;this[_0xbc73c4(0x14d)]=_0x4d3cbf,this[_0xbc73c4(0x142)]=_0x43076f,this['_backup']=_0x44a24b;}async['createZips'](){const _0x16e4e2=a367_0x516082;this[_0x16e4e2(0x13f)]=new jszip_1['default'](),this[_0x16e4e2(0x155)]=new jszip_1[(_0x16e4e2(0x154))](),await this[_0x16e4e2(0x13f)][_0x16e4e2(0x156)](this[_0x16e4e2(0x157)],{'base64':!![]});}[a367_0x516082(0x13b)](){const _0x4b9cb1=a367_0x516082;this[_0x4b9cb1(0x14d)]['sort']((_0x58178d,_0x17811c)=>_0x58178d[_0x4b9cb1(0x150)]<_0x17811c[_0x4b9cb1(0x150)]?0x1:_0x17811c[_0x4b9cb1(0x150)]<_0x58178d[_0x4b9cb1(0x150)]?-0x1:0x0);}async['fillZip'](){const _0x4a7c1f=a367_0x516082;for(const _0x1c7e75 of this[_0x4a7c1f(0x14d)]){const _0x462544=await factory_body_creator_rollback_1[_0x4a7c1f(0x145)][_0x4a7c1f(0x144)]({'deploymentResult':_0x1c7e75,'backupZip':this[_0x4a7c1f(0x13f)]})[_0x4a7c1f(0x144)](),{type:_0x192459,name:_0x4629c8}=_0x1c7e75;this[_0x4a7c1f(0x155)][_0x4a7c1f(0x140)](_0x192459+'.'+_0x4629c8+_0x4a7c1f(0x153),_0x462544);}const _0x34f1c9=new xml2js_1['Builder']({'headless':!![]}),_0x261c40={'vaultpackage':{'$':{'xmlns':_0x4a7c1f(0x151)},'name':this[_0x4a7c1f(0x142)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':'migration__v','summary':'Rollback','description':_0x4a7c1f(0x137)}};this[_0x4a7c1f(0x155)]['file']('vaultpackage.xml',_0x34f1c9[_0x4a7c1f(0x14c)](_0x261c40));}async[a367_0x516082(0x144)](){const _0x46f4f8=a367_0x516082;return await this['createZips'](),this[_0x46f4f8(0x13b)](),await this['fillZip'](),this[_0x46f4f8(0x155)][_0x46f4f8(0x13a)]({'type':'nodebuffer'});}}exports[a367_0x516082(0x158)]=ZipCreatorRollback;function a367_0xd2b2(_0x895423,_0x49a519){const _0x209d96=a367_0x2173();return a367_0xd2b2=function(_0x1fb21b,_0x30e6db){_0x1fb21b=_0x1fb21b-0x136;let _0x2173c4=_0x209d96[_0x1fb21b];return _0x2173c4;},a367_0xd2b2(_0x895423,_0x49a519);}function a367_0x2173(){const _0x45e767=['ZipCreatorRollback','jszip','xml2js','63tRzbsI','__esModule','null','__importDefault','apply','generateAsync','sortDeploymentResults','8ALGUhS','./body-creator/factory.body-creator.rollback','defineProperty','_backupZip','file','667464AwPywU','_rollbackName','search','create','FactoryBodyCreatorRollback','3188jhcVlZ','7797860czArhP','54XSzdty','(((.+)+)+)+$','2929960cPLrZb','5293935idtUvb','buildObject','_deploymentResults','219970sFYSdF','315427yvMplV','stepName','https://veevavault.com/','constructor','.mdl','default','_zip','loadAsync','_backup'];a367_0x2173=function(){return _0x45e767;};return a367_0x2173();}