const a378_0x39a1eb=a378_0x5785;function a378_0x3332(){const _0x23adcf=['(((.+)+)+)+$','createZips','347444tyWbzK','toString','https://veevavault.com/','default','FactoryBodyCreatorRollback','1822272uKbzao','_zip','migration__v','666171ckcqiR','.mdl','apply','Rollback','vaultpackage.xml','274024jPtbSn','Flosum','558684AjdtMt','sort','_rollbackName','_backupZip','_deploymentResults','stepName','_backup','__importDefault','xml2js','search','loadAsync','file','1709448gGbtZT','1909385IfHYFp','ZipCreatorRollback','generateAsync','create','sortDeploymentResults','__esModule','./body-creator/factory.body-creator.rollback','defineProperty','buildObject','21XHvWGQ','Builder'];a378_0x3332=function(){return _0x23adcf;};return a378_0x3332();}(function(_0x9e9169,_0x2c7642){const _0xb92075=a378_0x5785,_0x59047b=_0x9e9169();while(!![]){try{const _0xf66649=-parseInt(_0xb92075(0x160))/0x1+parseInt(_0xb92075(0x16f))/0x2+parseInt(_0xb92075(0x168))/0x3+parseInt(_0xb92075(0x16d))/0x4+parseInt(_0xb92075(0x17c))/0x5+parseInt(_0xb92075(0x165))/0x6+-parseInt(_0xb92075(0x185))/0x7*(parseInt(_0xb92075(0x17b))/0x8);if(_0xf66649===_0x2c7642)break;else _0x59047b['push'](_0x59047b['shift']());}catch(_0x4cf723){_0x59047b['push'](_0x59047b['shift']());}}}(a378_0x3332,0x412ff));const a378_0x5d4c5e=(function(){let _0x5e45d7=!![];return function(_0x237977,_0x3a2886){const _0x12ccaf=_0x5e45d7?function(){const _0x18e44a=a378_0x5785;if(_0x3a2886){const _0x38b971=_0x3a2886[_0x18e44a(0x16a)](_0x237977,arguments);return _0x3a2886=null,_0x38b971;}}:function(){};return _0x5e45d7=![],_0x12ccaf;};}()),a378_0x4e40c0=a378_0x5d4c5e(this,function(){const _0x1d185f=a378_0x5785;return a378_0x4e40c0[_0x1d185f(0x161)]()[_0x1d185f(0x178)](_0x1d185f(0x187))[_0x1d185f(0x161)]()['constructor'](a378_0x4e40c0)['search']('(((.+)+)+)+$');});a378_0x4e40c0();'use strict';var __importDefault=this&&this[a378_0x39a1eb(0x176)]||function(_0x26d259){const _0x48c75a=a378_0x39a1eb;return _0x26d259&&_0x26d259[_0x48c75a(0x181)]?_0x26d259:{'default':_0x26d259};};Object[a378_0x39a1eb(0x183)](exports,a378_0x39a1eb(0x181),{'value':!![]}),exports[a378_0x39a1eb(0x17d)]=void 0x0;const jszip_1=__importDefault(require('jszip')),factory_body_creator_rollback_1=require(a378_0x39a1eb(0x182)),xml2js_1=require(a378_0x39a1eb(0x177));class ZipCreatorRollback{constructor({deploymentResults:_0x247930,backup:_0x395001,rollbackName:_0xe44450}){const _0x236b99=a378_0x39a1eb;this[_0x236b99(0x173)]=_0x247930,this[_0x236b99(0x171)]=_0xe44450,this[_0x236b99(0x175)]=_0x395001;}async[a378_0x39a1eb(0x188)](){const _0x3f5403=a378_0x39a1eb;this[_0x3f5403(0x172)]=new jszip_1[(_0x3f5403(0x163))](),this[_0x3f5403(0x166)]=new jszip_1['default'](),await this['_backupZip'][_0x3f5403(0x179)](this[_0x3f5403(0x175)],{'base64':!![]});}['sortDeploymentResults'](){const _0xc50c21=a378_0x39a1eb;this[_0xc50c21(0x173)][_0xc50c21(0x170)]((_0x42b53a,_0xf7593)=>_0x42b53a[_0xc50c21(0x174)]<_0xf7593['stepName']?0x1:_0xf7593[_0xc50c21(0x174)]<_0x42b53a[_0xc50c21(0x174)]?-0x1:0x0);}async['fillZip'](){const _0x3f0616=a378_0x39a1eb;for(const _0x550daf of this['_deploymentResults']){const _0x132f9a=await factory_body_creator_rollback_1[_0x3f0616(0x164)][_0x3f0616(0x17f)]({'deploymentResult':_0x550daf,'backupZip':this[_0x3f0616(0x172)]})[_0x3f0616(0x17f)](),{type:_0x81198,name:_0x571683}=_0x550daf;this[_0x3f0616(0x166)][_0x3f0616(0x17a)](_0x81198+'.'+_0x571683+_0x3f0616(0x169),_0x132f9a);}const _0x4237e6=new xml2js_1[(_0x3f0616(0x186))]({'headless':!![]}),_0x5cdbd9={'vaultpackage':{'$':{'xmlns':_0x3f0616(0x162)},'name':this[_0x3f0616(0x171)],'source':{'vault':undefined,'author':_0x3f0616(0x16e)},'packagetype':_0x3f0616(0x167),'summary':_0x3f0616(0x16b),'description':'null'}};this[_0x3f0616(0x166)]['file'](_0x3f0616(0x16c),_0x4237e6[_0x3f0616(0x184)](_0x5cdbd9));}async[a378_0x39a1eb(0x17f)](){const _0x227da9=a378_0x39a1eb;return await this[_0x227da9(0x188)](),this[_0x227da9(0x180)](),await this['fillZip'](),this[_0x227da9(0x166)][_0x227da9(0x17e)]({'type':'nodebuffer'});}}function a378_0x5785(_0x3ace82,_0x17c47b){const _0x54bc87=a378_0x3332();return a378_0x5785=function(_0x4e40c0,_0x5d4c5e){_0x4e40c0=_0x4e40c0-0x160;let _0x33328f=_0x54bc87[_0x4e40c0];return _0x33328f;},a378_0x5785(_0x3ace82,_0x17c47b);}exports['ZipCreatorRollback']=ZipCreatorRollback;