const a378_0x24ec00=a378_0x4b8b;(function(_0x8246f2,_0x405249){const _0x4d527f=a378_0x4b8b,_0x1f435d=_0x8246f2();while(!![]){try{const _0x12d775=parseInt(_0x4d527f(0x196))/0x1+-parseInt(_0x4d527f(0x1a3))/0x2*(-parseInt(_0x4d527f(0x1a4))/0x3)+-parseInt(_0x4d527f(0x1b1))/0x4+-parseInt(_0x4d527f(0x19d))/0x5+-parseInt(_0x4d527f(0x190))/0x6+parseInt(_0x4d527f(0x1aa))/0x7*(-parseInt(_0x4d527f(0x1ab))/0x8)+-parseInt(_0x4d527f(0x194))/0x9*(-parseInt(_0x4d527f(0x1a2))/0xa);if(_0x12d775===_0x405249)break;else _0x1f435d['push'](_0x1f435d['shift']());}catch(_0x10f505){_0x1f435d['push'](_0x1f435d['shift']());}}}(a378_0x300a,0xe0691));const a378_0x86a190=(function(){let _0x397667=!![];return function(_0x2c5159,_0x32a346){const _0x55e6f1=_0x397667?function(){const _0x10de83=a378_0x4b8b;if(_0x32a346){const _0x273c31=_0x32a346[_0x10de83(0x18a)](_0x2c5159,arguments);return _0x32a346=null,_0x273c31;}}:function(){};return _0x397667=![],_0x55e6f1;};}()),a378_0xddc18f=a378_0x86a190(this,function(){const _0x1782d5=a378_0x4b8b;return a378_0xddc18f['toString']()[_0x1782d5(0x187)](_0x1782d5(0x19a))[_0x1782d5(0x19f)]()[_0x1782d5(0x192)](a378_0xddc18f)[_0x1782d5(0x187)](_0x1782d5(0x19a));});function a378_0x4b8b(_0x3885b4,_0x2c1b7e){const _0x577e42=a378_0x300a();return a378_0x4b8b=function(_0xddc18f,_0x86a190){_0xddc18f=_0xddc18f-0x187;let _0x300aef=_0x577e42[_0xddc18f];return _0x300aef;},a378_0x4b8b(_0x3885b4,_0x2c1b7e);}function a378_0x300a(){const _0x175a2c=['__importDefault','stepName','670pyokxh','4ZITQsW','2192073TKfQdm','vaultpackage.xml','create','.mdl','default','null','173614JtDPcv','592aoQtSq','createZips','Rollback','Builder','migration__v','sortDeploymentResults','6536756xcbQWl','_backupZip','_rollbackName','search','loadAsync','fillZip','apply','_deploymentResults','buildObject','ZipCreatorRollback','defineProperty','https://veevavault.com/','8677734sbgSUy','file','constructor','FactoryBodyCreatorRollback','434403SCyNwU','generateAsync','1582295WlIdOo','xml2js','_zip','./body-creator/factory.body-creator.rollback','(((.+)+)+)+$','_backup','jszip','2212775AdeapC','__esModule','toString'];a378_0x300a=function(){return _0x175a2c;};return a378_0x300a();}a378_0xddc18f();'use strict';var __importDefault=this&&this[a378_0x24ec00(0x1a0)]||function(_0x37e483){return _0x37e483&&_0x37e483['__esModule']?_0x37e483:{'default':_0x37e483};};Object[a378_0x24ec00(0x18e)](exports,a378_0x24ec00(0x19e),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;const jszip_1=__importDefault(require(a378_0x24ec00(0x19c))),factory_body_creator_rollback_1=require(a378_0x24ec00(0x199)),xml2js_1=require(a378_0x24ec00(0x197));class ZipCreatorRollback{constructor({deploymentResults:_0x5084d7,backup:_0x51a87f,rollbackName:_0xf1a851}){const _0x4b430c=a378_0x24ec00;this['_deploymentResults']=_0x5084d7,this[_0x4b430c(0x1b3)]=_0xf1a851,this[_0x4b430c(0x19b)]=_0x51a87f;}async[a378_0x24ec00(0x1ac)](){const _0x383921=a378_0x24ec00;this['_backupZip']=new jszip_1[(_0x383921(0x1a8))](),this[_0x383921(0x198)]=new jszip_1[(_0x383921(0x1a8))](),await this[_0x383921(0x1b2)][_0x383921(0x188)](this[_0x383921(0x19b)],{'base64':!![]});}[a378_0x24ec00(0x1b0)](){const _0x4e7de3=a378_0x24ec00;this['_deploymentResults']['sort']((_0x22aa22,_0x23c1e8)=>_0x22aa22[_0x4e7de3(0x1a1)]<_0x23c1e8[_0x4e7de3(0x1a1)]?0x1:_0x23c1e8[_0x4e7de3(0x1a1)]<_0x22aa22[_0x4e7de3(0x1a1)]?-0x1:0x0);}async[a378_0x24ec00(0x189)](){const _0x3cbae1=a378_0x24ec00;for(const _0x2f914f of this[_0x3cbae1(0x18b)]){const _0x29d2b9=await factory_body_creator_rollback_1[_0x3cbae1(0x193)]['create']({'deploymentResult':_0x2f914f,'backupZip':this[_0x3cbae1(0x1b2)]})[_0x3cbae1(0x1a6)](),{type:_0x221856,name:_0x49744c}=_0x2f914f;this[_0x3cbae1(0x198)][_0x3cbae1(0x191)](_0x221856+'.'+_0x49744c+_0x3cbae1(0x1a7),_0x29d2b9);}const _0x430dd2=new xml2js_1[(_0x3cbae1(0x1ae))]({'headless':!![]}),_0x526213={'vaultpackage':{'$':{'xmlns':_0x3cbae1(0x18f)},'name':this[_0x3cbae1(0x1b3)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x3cbae1(0x1af),'summary':_0x3cbae1(0x1ad),'description':_0x3cbae1(0x1a9)}};this[_0x3cbae1(0x198)][_0x3cbae1(0x191)](_0x3cbae1(0x1a5),_0x430dd2[_0x3cbae1(0x18c)](_0x526213));}async[a378_0x24ec00(0x1a6)](){const _0x44de0e=a378_0x24ec00;return await this[_0x44de0e(0x1ac)](),this['sortDeploymentResults'](),await this['fillZip'](),this['_zip'][_0x44de0e(0x195)]({'type':'nodebuffer'});}}exports[a378_0x24ec00(0x18d)]=ZipCreatorRollback;