function a351_0x1a17(){const _0xbd279d=['9636176cXfHxx','Builder','stepName','file','_rollbackName','sort','270918qBJldx','fillZip','(((.+)+)+)+$','5404889khgifZ','search','_backupZip','9wVGiWW','generateAsync','default','null','defineProperty','migration__v','_backup','https://veevavault.com/','createZips','4POsAHm','toString','3140900wUbsRk','buildObject','48542ysNLmS','ZipCreatorRollback','__esModule','328709ePtVyL','Rollback','3635871DPEYzo','__importDefault','_zip','create','constructor','_deploymentResults','Flosum','./body-creator/factory.body-creator.rollback','FactoryBodyCreatorRollback'];a351_0x1a17=function(){return _0xbd279d;};return a351_0x1a17();}const a351_0x109787=a351_0x56f9;(function(_0x300138,_0x3b2064){const _0x1b283d=a351_0x56f9,_0x4d1cd4=_0x300138();while(!![]){try{const _0x3c2bf8=-parseInt(_0x1b283d(0x8c))/0x1+-parseInt(_0x1b283d(0x89))/0x2+parseInt(_0x1b283d(0x8e))/0x3*(parseInt(_0x1b283d(0x85))/0x4)+-parseInt(_0x1b283d(0x87))/0x5+-parseInt(_0x1b283d(0x76))/0x6+-parseInt(_0x1b283d(0x79))/0x7+parseInt(_0x1b283d(0x97))/0x8*(parseInt(_0x1b283d(0x7c))/0x9);if(_0x3c2bf8===_0x3b2064)break;else _0x4d1cd4['push'](_0x4d1cd4['shift']());}catch(_0x3412f8){_0x4d1cd4['push'](_0x4d1cd4['shift']());}}}(a351_0x1a17,0x96e37));const a351_0xf6eb88=(function(){let _0x5cf8ef=!![];return function(_0x3cc594,_0x29865c){const _0x2f5f9=_0x5cf8ef?function(){if(_0x29865c){const _0x406906=_0x29865c['apply'](_0x3cc594,arguments);return _0x29865c=null,_0x406906;}}:function(){};return _0x5cf8ef=![],_0x2f5f9;};}()),a351_0x3104e7=a351_0xf6eb88(this,function(){const _0xefd378=a351_0x56f9;return a351_0x3104e7[_0xefd378(0x86)]()[_0xefd378(0x7a)](_0xefd378(0x78))['toString']()[_0xefd378(0x92)](a351_0x3104e7)['search'](_0xefd378(0x78));});a351_0x3104e7();'use strict';var __importDefault=this&&this[a351_0x109787(0x8f)]||function(_0xc12c83){const _0x1d0672=a351_0x109787;return _0xc12c83&&_0xc12c83[_0x1d0672(0x8b)]?_0xc12c83:{'default':_0xc12c83};};function a351_0x56f9(_0x460e9f,_0x1adc53){const _0x208507=a351_0x1a17();return a351_0x56f9=function(_0x3104e7,_0xf6eb88){_0x3104e7=_0x3104e7-0x75;let _0x1a1774=_0x208507[_0x3104e7];return _0x1a1774;},a351_0x56f9(_0x460e9f,_0x1adc53);}Object[a351_0x109787(0x80)](exports,'__esModule',{'value':!![]}),exports[a351_0x109787(0x8a)]=void 0x0;const jszip_1=__importDefault(require('jszip')),factory_body_creator_rollback_1=require(a351_0x109787(0x95)),xml2js_1=require('xml2js');class ZipCreatorRollback{constructor({deploymentResults:_0x3e255e,backup:_0x4b86d1,rollbackName:_0x30fe76}){const _0x3c52c2=a351_0x109787;this[_0x3c52c2(0x93)]=_0x3e255e,this['_rollbackName']=_0x30fe76,this[_0x3c52c2(0x82)]=_0x4b86d1;}async[a351_0x109787(0x84)](){const _0xaa8c7e=a351_0x109787;this['_backupZip']=new jszip_1['default'](),this[_0xaa8c7e(0x90)]=new jszip_1[(_0xaa8c7e(0x7e))](),await this[_0xaa8c7e(0x7b)]['loadAsync'](this['_backup'],{'base64':!![]});}['sortDeploymentResults'](){const _0x5b48e9=a351_0x109787;this['_deploymentResults'][_0x5b48e9(0x75)]((_0xb24960,_0x70f3e9)=>_0xb24960['stepName']<_0x70f3e9[_0x5b48e9(0x99)]?0x1:_0x70f3e9[_0x5b48e9(0x99)]<_0xb24960[_0x5b48e9(0x99)]?-0x1:0x0);}async[a351_0x109787(0x77)](){const _0x4245bb=a351_0x109787;for(const _0x113287 of this['_deploymentResults']){const _0x51d1ee=await factory_body_creator_rollback_1[_0x4245bb(0x96)]['create']({'deploymentResult':_0x113287,'backupZip':this[_0x4245bb(0x7b)]})[_0x4245bb(0x91)](),{type:_0x19d47f,name:_0x247caa}=_0x113287;this['_zip'][_0x4245bb(0x9a)](_0x19d47f+'.'+_0x247caa+'.mdl',_0x51d1ee);}const _0x24ffca=new xml2js_1[(_0x4245bb(0x98))]({'headless':!![]}),_0x217c73={'vaultpackage':{'$':{'xmlns':_0x4245bb(0x83)},'name':this[_0x4245bb(0x9b)],'source':{'vault':undefined,'author':_0x4245bb(0x94)},'packagetype':_0x4245bb(0x81),'summary':_0x4245bb(0x8d),'description':_0x4245bb(0x7f)}};this[_0x4245bb(0x90)]['file']('vaultpackage.xml',_0x24ffca[_0x4245bb(0x88)](_0x217c73));}async['create'](){const _0x444cf5=a351_0x109787;return await this['createZips'](),this['sortDeploymentResults'](),await this[_0x444cf5(0x77)](),this[_0x444cf5(0x90)][_0x444cf5(0x7d)]({'type':'nodebuffer'});}}exports[a351_0x109787(0x8a)]=ZipCreatorRollback;