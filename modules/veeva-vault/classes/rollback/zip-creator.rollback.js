const a328_0x3e660f=a328_0x58b2;(function(_0xdce0bf,_0x497104){const _0x427e81=a328_0x58b2,_0x595aa0=_0xdce0bf();while(!![]){try{const _0x3739d0=-parseInt(_0x427e81(0x163))/0x1+parseInt(_0x427e81(0x155))/0x2+parseInt(_0x427e81(0x166))/0x3+-parseInt(_0x427e81(0x14b))/0x4*(parseInt(_0x427e81(0x147))/0x5)+-parseInt(_0x427e81(0x152))/0x6*(parseInt(_0x427e81(0x14c))/0x7)+-parseInt(_0x427e81(0x160))/0x8+parseInt(_0x427e81(0x16a))/0x9*(parseInt(_0x427e81(0x162))/0xa);if(_0x3739d0===_0x497104)break;else _0x595aa0['push'](_0x595aa0['shift']());}catch(_0x25ce22){_0x595aa0['push'](_0x595aa0['shift']());}}}(a328_0x1b5f,0xf0beb));const a328_0x229779=(function(){let _0x390138=!![];return function(_0x3c16fa,_0x49e4cb){const _0x391c05=_0x390138?function(){if(_0x49e4cb){const _0x4116d1=_0x49e4cb['apply'](_0x3c16fa,arguments);return _0x49e4cb=null,_0x4116d1;}}:function(){};return _0x390138=![],_0x391c05;};}()),a328_0x45b1ec=a328_0x229779(this,function(){const _0x5d32ad=a328_0x58b2;return a328_0x45b1ec[_0x5d32ad(0x164)]()[_0x5d32ad(0x16b)](_0x5d32ad(0x148))['toString']()[_0x5d32ad(0x150)](a328_0x45b1ec)['search']('(((.+)+)+)+$');});function a328_0x58b2(_0x2089bf,_0x6cdcc2){const _0x4cb4e4=a328_0x1b5f();return a328_0x58b2=function(_0x45b1ec,_0x229779){_0x45b1ec=_0x45b1ec-0x147;let _0x1b5f8d=_0x4cb4e4[_0x45b1ec];return _0x1b5f8d;},a328_0x58b2(_0x2089bf,_0x6cdcc2);}a328_0x45b1ec();'use strict';var __importDefault=this&&this[a328_0x3e660f(0x169)]||function(_0x569e3c){const _0x4ca2eb=a328_0x3e660f;return _0x569e3c&&_0x569e3c[_0x4ca2eb(0x15b)]?_0x569e3c:{'default':_0x569e3c};};Object['defineProperty'](exports,a328_0x3e660f(0x15b),{'value':!![]}),exports[a328_0x3e660f(0x14a)]=void 0x0;const jszip_1=__importDefault(require(a328_0x3e660f(0x159))),factory_body_creator_rollback_1=require(a328_0x3e660f(0x15c)),xml2js_1=require(a328_0x3e660f(0x149));class ZipCreatorRollback{constructor({deploymentResults:_0xd6e8c,backup:_0x2eca34,rollbackName:_0x3ab20d}){this['_deploymentResults']=_0xd6e8c,this['_rollbackName']=_0x3ab20d,this['_backup']=_0x2eca34;}async[a328_0x3e660f(0x158)](){const _0x4dcb4e=a328_0x3e660f;this[_0x4dcb4e(0x168)]=new jszip_1['default'](),this['_zip']=new jszip_1['default'](),await this[_0x4dcb4e(0x168)]['loadAsync'](this[_0x4dcb4e(0x14e)],{'base64':!![]});}[a328_0x3e660f(0x15e)](){const _0x29063b=a328_0x3e660f;this[_0x29063b(0x154)]['sort']((_0x45d189,_0x3b32e7)=>_0x45d189[_0x29063b(0x156)]<_0x3b32e7[_0x29063b(0x156)]?0x1:_0x3b32e7[_0x29063b(0x156)]<_0x45d189['stepName']?-0x1:0x0);}async[a328_0x3e660f(0x15d)](){const _0x2d69d4=a328_0x3e660f;for(const _0x497e8c of this[_0x2d69d4(0x154)]){const _0x379d8f=await factory_body_creator_rollback_1[_0x2d69d4(0x14f)][_0x2d69d4(0x15a)]({'deploymentResult':_0x497e8c,'backupZip':this['_backupZip']})['create'](),{type:_0x415d49,name:_0xe641fa}=_0x497e8c;this[_0x2d69d4(0x14d)][_0x2d69d4(0x151)](_0x415d49+'.'+_0xe641fa+'.mdl',_0x379d8f);}const _0x1f5fcd=new xml2js_1['Builder']({'headless':!![]}),_0xf2d70d={'vaultpackage':{'$':{'xmlns':_0x2d69d4(0x16c)},'name':this[_0x2d69d4(0x167)],'source':{'vault':undefined,'author':_0x2d69d4(0x153)},'packagetype':'migration__v','summary':_0x2d69d4(0x165),'description':_0x2d69d4(0x161)}};this['_zip'][_0x2d69d4(0x151)](_0x2d69d4(0x157),_0x1f5fcd[_0x2d69d4(0x16d)](_0xf2d70d));}async[a328_0x3e660f(0x15a)](){const _0x3aca93=a328_0x3e660f;return await this['createZips'](),this[_0x3aca93(0x15e)](),await this[_0x3aca93(0x15d)](),this[_0x3aca93(0x14d)]['generateAsync']({'type':_0x3aca93(0x15f)});}}function a328_0x1b5f(){const _0x4d7cf3=['1863728dKUKze','stepName','vaultpackage.xml','createZips','jszip','create','__esModule','./body-creator/factory.body-creator.rollback','fillZip','sortDeploymentResults','nodebuffer','1781728VPoILJ','null','6330VEGAar','974898KdShbQ','toString','Rollback','5344941ljOLRJ','_rollbackName','_backupZip','__importDefault','20871tVnrwR','search','https://veevavault.com/','buildObject','805jQmXIh','(((.+)+)+)+$','xml2js','ZipCreatorRollback','24504yFKPrB','262227TTwDDJ','_zip','_backup','FactoryBodyCreatorRollback','constructor','file','162gPhzAw','Flosum','_deploymentResults'];a328_0x1b5f=function(){return _0x4d7cf3;};return a328_0x1b5f();}exports[a328_0x3e660f(0x14a)]=ZipCreatorRollback;