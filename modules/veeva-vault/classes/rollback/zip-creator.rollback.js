const a379_0x328ad9=a379_0x9dcc;(function(_0x20bc9c,_0x3797c5){const _0x4f4e52=a379_0x9dcc,_0x4fd88a=_0x20bc9c();while(!![]){try{const _0x5eb0dc=-parseInt(_0x4f4e52(0xa1))/0x1*(parseInt(_0x4f4e52(0xa8))/0x2)+-parseInt(_0x4f4e52(0xb0))/0x3+-parseInt(_0x4f4e52(0xba))/0x4+-parseInt(_0x4f4e52(0x9f))/0x5+parseInt(_0x4f4e52(0xc5))/0x6+-parseInt(_0x4f4e52(0xa6))/0x7+parseInt(_0x4f4e52(0xad))/0x8*(parseInt(_0x4f4e52(0xaa))/0x9);if(_0x5eb0dc===_0x3797c5)break;else _0x4fd88a['push'](_0x4fd88a['shift']());}catch(_0x4aa084){_0x4fd88a['push'](_0x4fd88a['shift']());}}}(a379_0x239e,0xc5a00));const a379_0x3b9929=(function(){let _0x4f4a36=!![];return function(_0x5c51a5,_0x18cbbd){const _0x1f27e2=_0x4f4a36?function(){const _0x227ae3=a379_0x9dcc;if(_0x18cbbd){const _0x4f5b31=_0x18cbbd[_0x227ae3(0xb5)](_0x5c51a5,arguments);return _0x18cbbd=null,_0x4f5b31;}}:function(){};return _0x4f4a36=![],_0x1f27e2;};}()),a379_0x490841=a379_0x3b9929(this,function(){const _0x310ab5=a379_0x9dcc;return a379_0x490841[_0x310ab5(0xb9)]()[_0x310ab5(0x9e)](_0x310ab5(0xbe))['toString']()['constructor'](a379_0x490841)[_0x310ab5(0x9e)](_0x310ab5(0xbe));});a379_0x490841();'use strict';function a379_0x9dcc(_0x45de6f,_0x2afdfc){const _0xadcb27=a379_0x239e();return a379_0x9dcc=function(_0x490841,_0x3b9929){_0x490841=_0x490841-0x9e;let _0x239ed1=_0xadcb27[_0x490841];return _0x239ed1;},a379_0x9dcc(_0x45de6f,_0x2afdfc);}var __importDefault=this&&this['__importDefault']||function(_0x2a071d){const _0x4fef04=a379_0x9dcc;return _0x2a071d&&_0x2a071d[_0x4fef04(0xaf)]?_0x2a071d:{'default':_0x2a071d};};Object[a379_0x328ad9(0xbf)](exports,a379_0x328ad9(0xaf),{'value':!![]}),exports[a379_0x328ad9(0xac)]=void 0x0;function a379_0x239e(){const _0x1037e0=['default','toString','3615988xeOFPK','_rollbackName','stepName','_deploymentResults','(((.+)+)+)+$','defineProperty','_backup','https://veevavault.com/','buildObject','migration__v','.mdl','8121462GqFMpM','xml2js','create','sortDeploymentResults','search','7163015CvGPOs','fillZip','1247362kzOvrC','sort','createZips','file','_backupZip','3922142cLdjfC','Flosum','2TSEdxj','nodebuffer','9LCWrWR','_zip','ZipCreatorRollback','36273832aVOqUh','generateAsync','__esModule','2802198qhEKNS','jszip','./body-creator/factory.body-creator.rollback','FactoryBodyCreatorRollback','null','apply','loadAsync','Rollback'];a379_0x239e=function(){return _0x1037e0;};return a379_0x239e();}const jszip_1=__importDefault(require(a379_0x328ad9(0xb1))),factory_body_creator_rollback_1=require(a379_0x328ad9(0xb2)),xml2js_1=require(a379_0x328ad9(0xc6));class ZipCreatorRollback{constructor({deploymentResults:_0x2f52dc,backup:_0x552cfc,rollbackName:_0x511093}){const _0x53372b=a379_0x328ad9;this[_0x53372b(0xbd)]=_0x2f52dc,this[_0x53372b(0xbb)]=_0x511093,this['_backup']=_0x552cfc;}async[a379_0x328ad9(0xa3)](){const _0x20377e=a379_0x328ad9;this[_0x20377e(0xa5)]=new jszip_1[(_0x20377e(0xb8))](),this[_0x20377e(0xab)]=new jszip_1['default'](),await this[_0x20377e(0xa5)][_0x20377e(0xb6)](this[_0x20377e(0xc0)],{'base64':!![]});}[a379_0x328ad9(0xc8)](){const _0x41a827=a379_0x328ad9;this[_0x41a827(0xbd)][_0x41a827(0xa2)]((_0x2dc4a1,_0x425538)=>_0x2dc4a1[_0x41a827(0xbc)]<_0x425538[_0x41a827(0xbc)]?0x1:_0x425538[_0x41a827(0xbc)]<_0x2dc4a1['stepName']?-0x1:0x0);}async[a379_0x328ad9(0xa0)](){const _0x5bb8d8=a379_0x328ad9;for(const _0x3b27a3 of this['_deploymentResults']){const _0x5dca1d=await factory_body_creator_rollback_1[_0x5bb8d8(0xb3)][_0x5bb8d8(0xc7)]({'deploymentResult':_0x3b27a3,'backupZip':this['_backupZip']})[_0x5bb8d8(0xc7)](),{type:_0x2a76e0,name:_0x3ac14a}=_0x3b27a3;this['_zip'][_0x5bb8d8(0xa4)](_0x2a76e0+'.'+_0x3ac14a+_0x5bb8d8(0xc4),_0x5dca1d);}const _0x2d48bd=new xml2js_1['Builder']({'headless':!![]}),_0x127b11={'vaultpackage':{'$':{'xmlns':_0x5bb8d8(0xc1)},'name':this[_0x5bb8d8(0xbb)],'source':{'vault':undefined,'author':_0x5bb8d8(0xa7)},'packagetype':_0x5bb8d8(0xc3),'summary':_0x5bb8d8(0xb7),'description':_0x5bb8d8(0xb4)}};this[_0x5bb8d8(0xab)][_0x5bb8d8(0xa4)]('vaultpackage.xml',_0x2d48bd[_0x5bb8d8(0xc2)](_0x127b11));}async[a379_0x328ad9(0xc7)](){const _0x363c57=a379_0x328ad9;return await this[_0x363c57(0xa3)](),this[_0x363c57(0xc8)](),await this['fillZip'](),this[_0x363c57(0xab)][_0x363c57(0xae)]({'type':_0x363c57(0xa9)});}}exports['ZipCreatorRollback']=ZipCreatorRollback;