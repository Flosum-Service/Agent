const a330_0x1663af=a330_0x1810;function a330_0x1810(_0x3aac88,_0x262ef2){const _0x354441=a330_0x2aa4();return a330_0x1810=function(_0x316ab3,_0x22e12e){_0x316ab3=_0x316ab3-0x165;let _0x2aa4d7=_0x354441[_0x316ab3];return _0x2aa4d7;},a330_0x1810(_0x3aac88,_0x262ef2);}(function(_0x3e9c62,_0xec6e5c){const _0x32d8b7=a330_0x1810,_0x44b94c=_0x3e9c62();while(!![]){try{const _0x4ded61=parseInt(_0x32d8b7(0x176))/0x1*(-parseInt(_0x32d8b7(0x189))/0x2)+parseInt(_0x32d8b7(0x173))/0x3*(-parseInt(_0x32d8b7(0x181))/0x4)+parseInt(_0x32d8b7(0x175))/0x5+parseInt(_0x32d8b7(0x171))/0x6+parseInt(_0x32d8b7(0x16d))/0x7+parseInt(_0x32d8b7(0x169))/0x8+-parseInt(_0x32d8b7(0x166))/0x9;if(_0x4ded61===_0xec6e5c)break;else _0x44b94c['push'](_0x44b94c['shift']());}catch(_0x48b504){_0x44b94c['push'](_0x44b94c['shift']());}}}(a330_0x2aa4,0x5eff7));const a330_0x22e12e=(function(){let _0x1092bd=!![];return function(_0x45b001,_0x2fc908){const _0xbac0b=_0x1092bd?function(){const _0x1d18ec=a330_0x1810;if(_0x2fc908){const _0x18c68f=_0x2fc908[_0x1d18ec(0x177)](_0x45b001,arguments);return _0x2fc908=null,_0x18c68f;}}:function(){};return _0x1092bd=![],_0xbac0b;};}()),a330_0x316ab3=a330_0x22e12e(this,function(){const _0x47153f=a330_0x1810;return a330_0x316ab3[_0x47153f(0x179)]()[_0x47153f(0x178)](_0x47153f(0x18b))[_0x47153f(0x179)]()[_0x47153f(0x168)](a330_0x316ab3)[_0x47153f(0x178)](_0x47153f(0x18b));});a330_0x316ab3();'use strict';var __importDefault=this&&this[a330_0x1663af(0x167)]||function(_0x5253aa){return _0x5253aa&&_0x5253aa['__esModule']?_0x5253aa:{'default':_0x5253aa};};Object['defineProperty'](exports,a330_0x1663af(0x18c),{'value':!![]}),exports[a330_0x1663af(0x16c)]=void 0x0;const jszip_1=__importDefault(require(a330_0x1663af(0x16b))),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require(a330_0x1663af(0x18f));function a330_0x2aa4(){const _0x4729bd=['createZips','https://veevavault.com/','Flosum','null','nodebuffer','Rollback','create','24dsqoVR','sortDeploymentResults','(((.+)+)+)+$','__esModule','_rollbackName','_deploymentResults','xml2js','default','5374341HPxpTn','__importDefault','constructor','1225072xdenMQ','loadAsync','jszip','ZipCreatorRollback','4468499WLwzVW','sort','_zip','stepName','2262240SNAuBg','file','77829cHgSFZ','_backup','3360370xtejhl','30119QzHXLK','apply','search','toString','fillZip','Builder','.mdl','vaultpackage.xml','_backupZip','FactoryBodyCreatorRollback','buildObject','76mWxzFn'];a330_0x2aa4=function(){return _0x4729bd;};return a330_0x2aa4();}class ZipCreatorRollback{constructor({deploymentResults:_0x45b833,backup:_0x1780cf,rollbackName:_0x2a2e59}){const _0xa8f468=a330_0x1663af;this[_0xa8f468(0x18e)]=_0x45b833,this[_0xa8f468(0x18d)]=_0x2a2e59,this[_0xa8f468(0x174)]=_0x1780cf;}async[a330_0x1663af(0x182)](){const _0x5854af=a330_0x1663af;this[_0x5854af(0x17e)]=new jszip_1[(_0x5854af(0x165))](),this['_zip']=new jszip_1[(_0x5854af(0x165))](),await this[_0x5854af(0x17e)][_0x5854af(0x16a)](this[_0x5854af(0x174)],{'base64':!![]});}[a330_0x1663af(0x18a)](){const _0x33b58e=a330_0x1663af;this[_0x33b58e(0x18e)][_0x33b58e(0x16e)]((_0x4933f1,_0x34f93b)=>_0x4933f1[_0x33b58e(0x170)]<_0x34f93b['stepName']?0x1:_0x34f93b[_0x33b58e(0x170)]<_0x4933f1[_0x33b58e(0x170)]?-0x1:0x0);}async[a330_0x1663af(0x17a)](){const _0x3a716e=a330_0x1663af;for(const _0x4ab8a7 of this[_0x3a716e(0x18e)]){const _0x217089=await factory_body_creator_rollback_1[_0x3a716e(0x17f)][_0x3a716e(0x188)]({'deploymentResult':_0x4ab8a7,'backupZip':this['_backupZip']})[_0x3a716e(0x188)](),{type:_0x1d0621,name:_0x5b7d40}=_0x4ab8a7;this[_0x3a716e(0x16f)][_0x3a716e(0x172)](_0x1d0621+'.'+_0x5b7d40+_0x3a716e(0x17c),_0x217089);}const _0x324b09=new xml2js_1[(_0x3a716e(0x17b))]({'headless':!![]}),_0x43dd00={'vaultpackage':{'$':{'xmlns':_0x3a716e(0x183)},'name':this[_0x3a716e(0x18d)],'source':{'vault':undefined,'author':_0x3a716e(0x184)},'packagetype':'migration__v','summary':_0x3a716e(0x187),'description':_0x3a716e(0x185)}};this[_0x3a716e(0x16f)][_0x3a716e(0x172)](_0x3a716e(0x17d),_0x324b09[_0x3a716e(0x180)](_0x43dd00));}async['create'](){const _0x8f4f5a=a330_0x1663af;return await this[_0x8f4f5a(0x182)](),this['sortDeploymentResults'](),await this['fillZip'](),this[_0x8f4f5a(0x16f)]['generateAsync']({'type':_0x8f4f5a(0x186)});}}exports[a330_0x1663af(0x16c)]=ZipCreatorRollback;