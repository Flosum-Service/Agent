function a335_0x5486(_0x158fa5,_0x5d2fc3){const _0x170160=a335_0x2e13();return a335_0x5486=function(_0x35a6b9,_0x386816){_0x35a6b9=_0x35a6b9-0x9e;let _0x2e135a=_0x170160[_0x35a6b9];return _0x2e135a;},a335_0x5486(_0x158fa5,_0x5d2fc3);}const a335_0x4fa27f=a335_0x5486;(function(_0x2839a6,_0x2ac472){const _0x14d32b=a335_0x5486,_0x58f768=_0x2839a6();while(!![]){try{const _0x258d1a=parseInt(_0x14d32b(0xb8))/0x1*(parseInt(_0x14d32b(0xae))/0x2)+-parseInt(_0x14d32b(0xb5))/0x3*(-parseInt(_0x14d32b(0xb2))/0x4)+-parseInt(_0x14d32b(0xc5))/0x5+-parseInt(_0x14d32b(0x9f))/0x6+parseInt(_0x14d32b(0x9e))/0x7+parseInt(_0x14d32b(0xbb))/0x8*(parseInt(_0x14d32b(0xc8))/0x9)+parseInt(_0x14d32b(0xa9))/0xa*(-parseInt(_0x14d32b(0xa7))/0xb);if(_0x258d1a===_0x2ac472)break;else _0x58f768['push'](_0x58f768['shift']());}catch(_0x2be332){_0x58f768['push'](_0x58f768['shift']());}}}(a335_0x2e13,0x73ba5));function a335_0x2e13(){const _0x4a1faa=['migration__v','create','Flosum','toString','1344706GuhNSh','defineProperty','10ogpeDo','.mdl','(((.+)+)+)+$','search','_backupZip','262546lCWJJh','apply','constructor','Builder','865268jnEiCp','loadAsync','sort','9YwqGuh','https://veevavault.com/','generateAsync','1ZUPZwQ','./body-creator/factory.body-creator.rollback','createZips','25336JFDTwa','__esModule','default','sortDeploymentResults','file','Rollback','_rollbackName','_backup','fillZip','stepName','4353620ikCmZn','_deploymentResults','__importDefault','2403eDKfYP','ZipCreatorRollback','4201589WvbaFs','4554294OpnuIG','nodebuffer','buildObject','_zip'];a335_0x2e13=function(){return _0x4a1faa;};return a335_0x2e13();}const a335_0x386816=(function(){let _0x31a5c4=!![];return function(_0x45fadd,_0x11fe34){const _0x27f3d0=_0x31a5c4?function(){const _0x1046f5=a335_0x5486;if(_0x11fe34){const _0x2c7e98=_0x11fe34[_0x1046f5(0xaf)](_0x45fadd,arguments);return _0x11fe34=null,_0x2c7e98;}}:function(){};return _0x31a5c4=![],_0x27f3d0;};}()),a335_0x35a6b9=a335_0x386816(this,function(){const _0x5e21af=a335_0x5486;return a335_0x35a6b9[_0x5e21af(0xa6)]()[_0x5e21af(0xac)](_0x5e21af(0xab))[_0x5e21af(0xa6)]()[_0x5e21af(0xb0)](a335_0x35a6b9)[_0x5e21af(0xac)]('(((.+)+)+)+$');});a335_0x35a6b9();'use strict';var __importDefault=this&&this[a335_0x4fa27f(0xc7)]||function(_0x22ce58){return _0x22ce58&&_0x22ce58['__esModule']?_0x22ce58:{'default':_0x22ce58};};Object[a335_0x4fa27f(0xa8)](exports,a335_0x4fa27f(0xbc),{'value':!![]}),exports[a335_0x4fa27f(0xc9)]=void 0x0;const jszip_1=__importDefault(require('jszip')),factory_body_creator_rollback_1=require(a335_0x4fa27f(0xb9)),xml2js_1=require('xml2js');class ZipCreatorRollback{constructor({deploymentResults:_0x219779,backup:_0x2a3a8d,rollbackName:_0x1f4cc2}){const _0x2f2185=a335_0x4fa27f;this[_0x2f2185(0xc6)]=_0x219779,this['_rollbackName']=_0x1f4cc2,this[_0x2f2185(0xc2)]=_0x2a3a8d;}async[a335_0x4fa27f(0xba)](){const _0x13fd92=a335_0x4fa27f;this['_backupZip']=new jszip_1['default'](),this[_0x13fd92(0xa2)]=new jszip_1[(_0x13fd92(0xbd))](),await this[_0x13fd92(0xad)][_0x13fd92(0xb3)](this['_backup'],{'base64':!![]});}[a335_0x4fa27f(0xbe)](){const _0x130a48=a335_0x4fa27f;this[_0x130a48(0xc6)][_0x130a48(0xb4)]((_0x5c1c41,_0x52e6e1)=>_0x5c1c41[_0x130a48(0xc4)]<_0x52e6e1['stepName']?0x1:_0x52e6e1[_0x130a48(0xc4)]<_0x5c1c41[_0x130a48(0xc4)]?-0x1:0x0);}async['fillZip'](){const _0x473fd6=a335_0x4fa27f;for(const _0x27a30b of this[_0x473fd6(0xc6)]){const _0x56765f=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback']['create']({'deploymentResult':_0x27a30b,'backupZip':this[_0x473fd6(0xad)]})[_0x473fd6(0xa4)](),{type:_0x132c6f,name:_0x3a5ad0}=_0x27a30b;this[_0x473fd6(0xa2)]['file'](_0x132c6f+'.'+_0x3a5ad0+_0x473fd6(0xaa),_0x56765f);}const _0x283d34=new xml2js_1[(_0x473fd6(0xb1))]({'headless':!![]}),_0x4364dc={'vaultpackage':{'$':{'xmlns':_0x473fd6(0xb6)},'name':this[_0x473fd6(0xc1)],'source':{'vault':undefined,'author':_0x473fd6(0xa5)},'packagetype':_0x473fd6(0xa3),'summary':_0x473fd6(0xc0),'description':'null'}};this[_0x473fd6(0xa2)][_0x473fd6(0xbf)]('vaultpackage.xml',_0x283d34[_0x473fd6(0xa1)](_0x4364dc));}async[a335_0x4fa27f(0xa4)](){const _0x87662d=a335_0x4fa27f;return await this[_0x87662d(0xba)](),this['sortDeploymentResults'](),await this[_0x87662d(0xc3)](),this['_zip'][_0x87662d(0xb7)]({'type':_0x87662d(0xa0)});}}exports['ZipCreatorRollback']=ZipCreatorRollback;