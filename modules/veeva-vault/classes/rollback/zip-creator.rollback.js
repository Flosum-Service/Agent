const a334_0x306201=a334_0x2bc4;(function(_0x368cc8,_0x33e0ca){const _0x267de3=a334_0x2bc4,_0x23f657=_0x368cc8();while(!![]){try{const _0x579aa7=parseInt(_0x267de3(0x117))/0x1*(-parseInt(_0x267de3(0x119))/0x2)+-parseInt(_0x267de3(0x11a))/0x3+parseInt(_0x267de3(0x123))/0x4*(parseInt(_0x267de3(0x135))/0x5)+parseInt(_0x267de3(0x128))/0x6+-parseInt(_0x267de3(0x121))/0x7*(-parseInt(_0x267de3(0x12c))/0x8)+parseInt(_0x267de3(0x126))/0x9+parseInt(_0x267de3(0x132))/0xa*(-parseInt(_0x267de3(0x120))/0xb);if(_0x579aa7===_0x33e0ca)break;else _0x23f657['push'](_0x23f657['shift']());}catch(_0x342897){_0x23f657['push'](_0x23f657['shift']());}}}(a334_0x5c52,0x28513));const a334_0x399754=(function(){let _0x1dd104=!![];return function(_0x5911dd,_0x5051f8){const _0x56d437=_0x1dd104?function(){if(_0x5051f8){const _0x1a314b=_0x5051f8['apply'](_0x5911dd,arguments);return _0x5051f8=null,_0x1a314b;}}:function(){};return _0x1dd104=![],_0x56d437;};}()),a334_0x174392=a334_0x399754(this,function(){const _0x2b7b60=a334_0x2bc4;return a334_0x174392[_0x2b7b60(0x139)]()[_0x2b7b60(0x114)](_0x2b7b60(0x122))['toString']()[_0x2b7b60(0x115)](a334_0x174392)[_0x2b7b60(0x114)]('(((.+)+)+)+$');});a334_0x174392();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4ddba9){return _0x4ddba9&&_0x4ddba9['__esModule']?_0x4ddba9:{'default':_0x4ddba9};};function a334_0x5c52(){const _0x3adc40=['1951624wEJUiv','_backup','generateAsync','vaultpackage.xml','loadAsync','nodebuffer','50ZXftxP','file','createZips','5MalvCX','migration__v','sortDeploymentResults','stepName','toString','https://veevavault.com/','Flosum','Builder','_zip','search','constructor','.mdl','131501qvVWoO','__esModule','2PtoEvA','637359NmjxTO','_deploymentResults','xml2js','sort','buildObject','fillZip','732556RMTCcI','7vRlbSz','(((.+)+)+)+$','696764CIKkoZ','_rollbackName','jszip','1690254xvvMNw','ZipCreatorRollback','1416738VVtojS','create','defineProperty','_backupZip'];a334_0x5c52=function(){return _0x3adc40;};return a334_0x5c52();}function a334_0x2bc4(_0x1c7682,_0x265529){const _0x458b1d=a334_0x5c52();return a334_0x2bc4=function(_0x174392,_0x399754){_0x174392=_0x174392-0x114;let _0x5c52fa=_0x458b1d[_0x174392];return _0x5c52fa;},a334_0x2bc4(_0x1c7682,_0x265529);}Object[a334_0x306201(0x12a)](exports,a334_0x306201(0x118),{'value':!![]}),exports[a334_0x306201(0x127)]=void 0x0;const jszip_1=__importDefault(require(a334_0x306201(0x125))),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require(a334_0x306201(0x11c));class ZipCreatorRollback{constructor({deploymentResults:_0x567811,backup:_0x2d94d7,rollbackName:_0x308212}){const _0x2369b6=a334_0x306201;this[_0x2369b6(0x11b)]=_0x567811,this['_rollbackName']=_0x308212,this[_0x2369b6(0x12d)]=_0x2d94d7;}async[a334_0x306201(0x134)](){const _0x21f724=a334_0x306201;this[_0x21f724(0x12b)]=new jszip_1['default'](),this['_zip']=new jszip_1['default'](),await this[_0x21f724(0x12b)][_0x21f724(0x130)](this[_0x21f724(0x12d)],{'base64':!![]});}[a334_0x306201(0x137)](){const _0xa3a88f=a334_0x306201;this['_deploymentResults'][_0xa3a88f(0x11d)]((_0x3b1fcf,_0x1000c3)=>_0x3b1fcf[_0xa3a88f(0x138)]<_0x1000c3[_0xa3a88f(0x138)]?0x1:_0x1000c3[_0xa3a88f(0x138)]<_0x3b1fcf[_0xa3a88f(0x138)]?-0x1:0x0);}async[a334_0x306201(0x11f)](){const _0x62a91a=a334_0x306201;for(const _0x49cbf7 of this['_deploymentResults']){const _0x508128=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback'][_0x62a91a(0x129)]({'deploymentResult':_0x49cbf7,'backupZip':this[_0x62a91a(0x12b)]})['create'](),{type:_0x125c20,name:_0x2a50d6}=_0x49cbf7;this['_zip']['file'](_0x125c20+'.'+_0x2a50d6+_0x62a91a(0x116),_0x508128);}const _0x20bcc1=new xml2js_1[(_0x62a91a(0x13c))]({'headless':!![]}),_0x55abe6={'vaultpackage':{'$':{'xmlns':_0x62a91a(0x13a)},'name':this[_0x62a91a(0x124)],'source':{'vault':undefined,'author':_0x62a91a(0x13b)},'packagetype':_0x62a91a(0x136),'summary':'Rollback','description':'null'}};this['_zip'][_0x62a91a(0x133)](_0x62a91a(0x12f),_0x20bcc1[_0x62a91a(0x11e)](_0x55abe6));}async['create'](){const _0x145a58=a334_0x306201;return await this[_0x145a58(0x134)](),this['sortDeploymentResults'](),await this['fillZip'](),this[_0x145a58(0x13d)][_0x145a58(0x12e)]({'type':_0x145a58(0x131)});}}exports[a334_0x306201(0x127)]=ZipCreatorRollback;