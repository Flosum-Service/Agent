const a350_0x5780d1=a350_0x579f;(function(_0x450663,_0x5ccf39){const _0x5af28f=a350_0x579f,_0x32bd7d=_0x450663();while(!![]){try{const _0x2093f0=parseInt(_0x5af28f(0xd6))/0x1*(parseInt(_0x5af28f(0xba))/0x2)+-parseInt(_0x5af28f(0xcd))/0x3+parseInt(_0x5af28f(0xd0))/0x4+parseInt(_0x5af28f(0xcb))/0x5+parseInt(_0x5af28f(0xc1))/0x6+parseInt(_0x5af28f(0xc3))/0x7+-parseInt(_0x5af28f(0xc7))/0x8*(parseInt(_0x5af28f(0xd3))/0x9);if(_0x2093f0===_0x5ccf39)break;else _0x32bd7d['push'](_0x32bd7d['shift']());}catch(_0x480e36){_0x32bd7d['push'](_0x32bd7d['shift']());}}}(a350_0x5426,0xbe986));function a350_0x579f(_0x3740de,_0x7316bd){const _0x15e46c=a350_0x5426();return a350_0x579f=function(_0x112f17,_0x1dd0ba){_0x112f17=_0x112f17-0xb9;let _0x542622=_0x15e46c[_0x112f17];return _0x542622;},a350_0x579f(_0x3740de,_0x7316bd);}const a350_0x1dd0ba=(function(){let _0x3190db=!![];return function(_0x34f1f2,_0x4cc488){const _0xbf7876=_0x3190db?function(){const _0x404053=a350_0x579f;if(_0x4cc488){const _0x57060a=_0x4cc488[_0x404053(0xbd)](_0x34f1f2,arguments);return _0x4cc488=null,_0x57060a;}}:function(){};return _0x3190db=![],_0xbf7876;};}()),a350_0x112f17=a350_0x1dd0ba(this,function(){const _0x1fa68f=a350_0x579f;return a350_0x112f17[_0x1fa68f(0xc8)]()[_0x1fa68f(0xbb)]('(((.+)+)+)+$')['toString']()[_0x1fa68f(0xd7)](a350_0x112f17)[_0x1fa68f(0xbb)]('(((.+)+)+)+$');});a350_0x112f17();'use strict';var __importDefault=this&&this[a350_0x5780d1(0xbe)]||function(_0x4aa9b5){const _0x31aabf=a350_0x5780d1;return _0x4aa9b5&&_0x4aa9b5[_0x31aabf(0xc2)]?_0x4aa9b5:{'default':_0x4aa9b5};};Object[a350_0x5780d1(0xd4)](exports,a350_0x5780d1(0xc2),{'value':!![]}),exports[a350_0x5780d1(0xde)]=void 0x0;function a350_0x5426(){const _0x3bb928=['_backupZip','xml2js','604974lPRjvH','__esModule','1600487wWTpYk','migration__v','_zip','stepName','3208ImdbTT','toString','sortDeploymentResults','jszip','6679995tTkZbX','sort','2452113oBqFFL','null','createZips','5771016JRENfs','loadAsync','Rollback','59751ULAHqK','defineProperty','file','95IKnYcd','constructor','vaultpackage.xml','create','_deploymentResults','buildObject','_backup','FactoryBodyCreatorRollback','ZipCreatorRollback','Builder','24254HkdXmi','search','default','apply','__importDefault'];a350_0x5426=function(){return _0x3bb928;};return a350_0x5426();}const jszip_1=__importDefault(require(a350_0x5780d1(0xca))),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require(a350_0x5780d1(0xc0));class ZipCreatorRollback{constructor({deploymentResults:_0x530ba1,backup:_0x990044,rollbackName:_0xe38f70}){const _0x33b2dc=a350_0x5780d1;this['_deploymentResults']=_0x530ba1,this['_rollbackName']=_0xe38f70,this[_0x33b2dc(0xdc)]=_0x990044;}async['createZips'](){const _0x44c88f=a350_0x5780d1;this['_backupZip']=new jszip_1[(_0x44c88f(0xbc))](),this['_zip']=new jszip_1[(_0x44c88f(0xbc))](),await this['_backupZip'][_0x44c88f(0xd1)](this[_0x44c88f(0xdc)],{'base64':!![]});}[a350_0x5780d1(0xc9)](){const _0x373457=a350_0x5780d1;this[_0x373457(0xda)][_0x373457(0xcc)]((_0x5cf7e7,_0x434a53)=>_0x5cf7e7[_0x373457(0xc6)]<_0x434a53['stepName']?0x1:_0x434a53['stepName']<_0x5cf7e7[_0x373457(0xc6)]?-0x1:0x0);}async['fillZip'](){const _0x13c0e4=a350_0x5780d1;for(const _0x1cca5c of this[_0x13c0e4(0xda)]){const _0x575063=await factory_body_creator_rollback_1[_0x13c0e4(0xdd)]['create']({'deploymentResult':_0x1cca5c,'backupZip':this[_0x13c0e4(0xbf)]})[_0x13c0e4(0xd9)](),{type:_0x14fab5,name:_0x105082}=_0x1cca5c;this[_0x13c0e4(0xc5)][_0x13c0e4(0xd5)](_0x14fab5+'.'+_0x105082+'.mdl',_0x575063);}const _0x2e5f15=new xml2js_1[(_0x13c0e4(0xb9))]({'headless':!![]}),_0x4cca36={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this['_rollbackName'],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x13c0e4(0xc4),'summary':_0x13c0e4(0xd2),'description':_0x13c0e4(0xce)}};this[_0x13c0e4(0xc5)][_0x13c0e4(0xd5)](_0x13c0e4(0xd8),_0x2e5f15[_0x13c0e4(0xdb)](_0x4cca36));}async['create'](){const _0x5cac6f=a350_0x5780d1;return await this[_0x5cac6f(0xcf)](),this[_0x5cac6f(0xc9)](),await this['fillZip'](),this[_0x5cac6f(0xc5)]['generateAsync']({'type':'nodebuffer'});}}exports[a350_0x5780d1(0xde)]=ZipCreatorRollback;