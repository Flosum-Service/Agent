const a379_0x23b0b7=a379_0x497d;function a379_0x497d(_0x49415b,_0x13dbe9){const _0x42db7e=a379_0x4d11();return a379_0x497d=function(_0xb136d4,_0x326b29){_0xb136d4=_0xb136d4-0x19c;let _0x4d1102=_0x42db7e[_0xb136d4];return _0x4d1102;},a379_0x497d(_0x49415b,_0x13dbe9);}(function(_0x2ea065,_0x3ad67a){const _0x20b4c5=a379_0x497d,_0x2c9a5a=_0x2ea065();while(!![]){try{const _0x1ff190=parseInt(_0x20b4c5(0x1a6))/0x1+parseInt(_0x20b4c5(0x1c1))/0x2*(parseInt(_0x20b4c5(0x1bb))/0x3)+-parseInt(_0x20b4c5(0x1c4))/0x4*(parseInt(_0x20b4c5(0x1af))/0x5)+-parseInt(_0x20b4c5(0x1ad))/0x6+parseInt(_0x20b4c5(0x1b0))/0x7*(-parseInt(_0x20b4c5(0x1bc))/0x8)+-parseInt(_0x20b4c5(0x19d))/0x9*(parseInt(_0x20b4c5(0x19c))/0xa)+-parseInt(_0x20b4c5(0x1b2))/0xb*(-parseInt(_0x20b4c5(0x1a7))/0xc);if(_0x1ff190===_0x3ad67a)break;else _0x2c9a5a['push'](_0x2c9a5a['shift']());}catch(_0x3ecb3e){_0x2c9a5a['push'](_0x2c9a5a['shift']());}}}(a379_0x4d11,0x3c4a4));const a379_0x326b29=(function(){let _0x5ed509=!![];return function(_0x434c42,_0x3bc81e){const _0x459338=_0x5ed509?function(){const _0x369b39=a379_0x497d;if(_0x3bc81e){const _0x364b2a=_0x3bc81e[_0x369b39(0x1c2)](_0x434c42,arguments);return _0x3bc81e=null,_0x364b2a;}}:function(){};return _0x5ed509=![],_0x459338;};}()),a379_0xb136d4=a379_0x326b29(this,function(){const _0x330c6e=a379_0x497d;return a379_0xb136d4['toString']()[_0x330c6e(0x1a5)](_0x330c6e(0x1a1))['toString']()['constructor'](a379_0xb136d4)[_0x330c6e(0x1a5)](_0x330c6e(0x1a1));});a379_0xb136d4();'use strict';var __importDefault=this&&this[a379_0x23b0b7(0x1aa)]||function(_0xc11adc){const _0x4ac4a3=a379_0x23b0b7;return _0xc11adc&&_0xc11adc[_0x4ac4a3(0x1a8)]?_0xc11adc:{'default':_0xc11adc};};Object[a379_0x23b0b7(0x1ae)](exports,a379_0x23b0b7(0x1a8),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;const jszip_1=__importDefault(require(a379_0x23b0b7(0x1a4))),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require(a379_0x23b0b7(0x1a2));class ZipCreatorRollback{constructor({deploymentResults:_0x2a01de,backup:_0x47d8eb,rollbackName:_0x5b0b66}){const _0x23cc4d=a379_0x23b0b7;this[_0x23cc4d(0x1be)]=_0x2a01de,this['_rollbackName']=_0x5b0b66,this[_0x23cc4d(0x1a3)]=_0x47d8eb;}async['createZips'](){const _0x2ade43=a379_0x23b0b7;this[_0x2ade43(0x1b5)]=new jszip_1['default'](),this[_0x2ade43(0x1b1)]=new jszip_1[(_0x2ade43(0x1ab))](),await this[_0x2ade43(0x1b5)]['loadAsync'](this[_0x2ade43(0x1a3)],{'base64':!![]});}[a379_0x23b0b7(0x1b6)](){const _0x5c5341=a379_0x23b0b7;this[_0x5c5341(0x1be)]['sort']((_0x381d48,_0x27a776)=>_0x381d48['stepName']<_0x27a776[_0x5c5341(0x1c0)]?0x1:_0x27a776[_0x5c5341(0x1c0)]<_0x381d48[_0x5c5341(0x1c0)]?-0x1:0x0);}async[a379_0x23b0b7(0x1a0)](){const _0x5526a5=a379_0x23b0b7;for(const _0x22fe2e of this[_0x5526a5(0x1be)]){const _0x3c2e6b=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback'][_0x5526a5(0x1b8)]({'deploymentResult':_0x22fe2e,'backupZip':this[_0x5526a5(0x1b5)]})[_0x5526a5(0x1b8)](),{type:_0x2a92fa,name:_0x3e7337}=_0x22fe2e;this['_zip'][_0x5526a5(0x1c3)](_0x2a92fa+'.'+_0x3e7337+_0x5526a5(0x1bd),_0x3c2e6b);}const _0x42eba2=new xml2js_1[(_0x5526a5(0x1b4))]({'headless':!![]}),_0x1c9622={'vaultpackage':{'$':{'xmlns':_0x5526a5(0x19f)},'name':this['_rollbackName'],'source':{'vault':undefined,'author':_0x5526a5(0x1bf)},'packagetype':_0x5526a5(0x1b9),'summary':_0x5526a5(0x1ac),'description':'null'}};this[_0x5526a5(0x1b1)]['file'](_0x5526a5(0x1b7),_0x42eba2[_0x5526a5(0x1ba)](_0x1c9622));}async[a379_0x23b0b7(0x1b8)](){const _0x474a2f=a379_0x23b0b7;return await this[_0x474a2f(0x1b3)](),this['sortDeploymentResults'](),await this[_0x474a2f(0x1a0)](),this[_0x474a2f(0x1b1)]['generateAsync']({'type':_0x474a2f(0x19e)});}}function a379_0x4d11(){const _0x27c2fd=['2284HIxRzM','10ZHnKzm','1810323UxAnXT','nodebuffer','https://veevavault.com/','fillZip','(((.+)+)+)+$','xml2js','_backup','jszip','search','8771CiQWPa','16882212IRlfSu','__esModule','ZipCreatorRollback','__importDefault','default','Rollback','1696410hPXXCk','defineProperty','2935IHFKHn','1051939dplmwE','_zip','11XrkJpb','createZips','Builder','_backupZip','sortDeploymentResults','vaultpackage.xml','create','migration__v','buildObject','75912KQRTFZ','24bSqHiX','.mdl','_deploymentResults','Flosum','stepName','8HAuLtr','apply','file'];a379_0x4d11=function(){return _0x27c2fd;};return a379_0x4d11();}exports[a379_0x23b0b7(0x1a9)]=ZipCreatorRollback;