const a366_0x16a103=a366_0x5a5c;(function(_0x991974,_0x2e29e4){const _0x5c5a78=a366_0x5a5c,_0x2ee341=_0x991974();while(!![]){try{const _0xaf4656=-parseInt(_0x5c5a78(0x11a))/0x1+parseInt(_0x5c5a78(0x103))/0x2*(parseInt(_0x5c5a78(0x110))/0x3)+-parseInt(_0x5c5a78(0x112))/0x4+-parseInt(_0x5c5a78(0x122))/0x5+parseInt(_0x5c5a78(0x11b))/0x6*(parseInt(_0x5c5a78(0x104))/0x7)+parseInt(_0x5c5a78(0x10c))/0x8+-parseInt(_0x5c5a78(0x111))/0x9*(parseInt(_0x5c5a78(0x116))/0xa);if(_0xaf4656===_0x2e29e4)break;else _0x2ee341['push'](_0x2ee341['shift']());}catch(_0x22626f){_0x2ee341['push'](_0x2ee341['shift']());}}}(a366_0x73fd,0xcac1f));const a366_0x384fee=(function(){let _0x5613ea=!![];return function(_0x5b19ee,_0x49a05a){const _0x4d9934=_0x5613ea?function(){if(_0x49a05a){const _0x44ac99=_0x49a05a['apply'](_0x5b19ee,arguments);return _0x49a05a=null,_0x44ac99;}}:function(){};return _0x5613ea=![],_0x4d9934;};}()),a366_0x273199=a366_0x384fee(this,function(){const _0x250423=a366_0x5a5c;return a366_0x273199[_0x250423(0x123)]()['search'](_0x250423(0x117))['toString']()[_0x250423(0x107)](a366_0x273199)[_0x250423(0x128)](_0x250423(0x117));});function a366_0x73fd(){const _0x1a660b=['(((.+)+)+)+$','_rollbackName','sortDeploymentResults','492188JmMrdS','6jXPlzJ','__importDefault','_backupZip','fillZip','null','stepName','FactoryBodyCreatorRollback','3657580lClAsF','toString','defineProperty','createZips','default','Builder','search','generateAsync','_backup','vaultpackage.xml','2AWyxrn','9326765sZhijH','buildObject','./body-creator/factory.body-creator.rollback','constructor','file','ZipCreatorRollback','xml2js','create','12747992nZeIwK','jszip','_deploymentResults','_zip','4416231yMIJgd','2538EMfKxD','3370744AYPAeE','migration__v','.mdl','__esModule','53230aGQSHO'];a366_0x73fd=function(){return _0x1a660b;};return a366_0x73fd();}a366_0x273199();'use strict';var __importDefault=this&&this[a366_0x16a103(0x11c)]||function(_0x4fec10){return _0x4fec10&&_0x4fec10['__esModule']?_0x4fec10:{'default':_0x4fec10};};Object[a366_0x16a103(0x124)](exports,a366_0x16a103(0x115),{'value':!![]}),exports[a366_0x16a103(0x109)]=void 0x0;const jszip_1=__importDefault(require(a366_0x16a103(0x10d))),factory_body_creator_rollback_1=require(a366_0x16a103(0x106)),xml2js_1=require(a366_0x16a103(0x10a));class ZipCreatorRollback{constructor({deploymentResults:_0x30434e,backup:_0xc58481,rollbackName:_0x4390be}){const _0x4d1a0b=a366_0x16a103;this[_0x4d1a0b(0x10e)]=_0x30434e,this[_0x4d1a0b(0x118)]=_0x4390be,this['_backup']=_0xc58481;}async[a366_0x16a103(0x125)](){const _0x5c44e6=a366_0x16a103;this[_0x5c44e6(0x11d)]=new jszip_1['default'](),this[_0x5c44e6(0x10f)]=new jszip_1[(_0x5c44e6(0x126))](),await this['_backupZip']['loadAsync'](this[_0x5c44e6(0x12a)],{'base64':!![]});}[a366_0x16a103(0x119)](){const _0xdd2377=a366_0x16a103;this[_0xdd2377(0x10e)]['sort']((_0xb25125,_0x1c42fa)=>_0xb25125[_0xdd2377(0x120)]<_0x1c42fa[_0xdd2377(0x120)]?0x1:_0x1c42fa[_0xdd2377(0x120)]<_0xb25125[_0xdd2377(0x120)]?-0x1:0x0);}async[a366_0x16a103(0x11e)](){const _0x28f9ed=a366_0x16a103;for(const _0x416a3d of this[_0x28f9ed(0x10e)]){const _0x2cf1cb=await factory_body_creator_rollback_1[_0x28f9ed(0x121)][_0x28f9ed(0x10b)]({'deploymentResult':_0x416a3d,'backupZip':this['_backupZip']})[_0x28f9ed(0x10b)](),{type:_0x1176e4,name:_0x151167}=_0x416a3d;this[_0x28f9ed(0x10f)][_0x28f9ed(0x108)](_0x1176e4+'.'+_0x151167+_0x28f9ed(0x114),_0x2cf1cb);}const _0x35d764=new xml2js_1[(_0x28f9ed(0x127))]({'headless':!![]}),_0x536270={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this[_0x28f9ed(0x118)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x28f9ed(0x113),'summary':'Rollback','description':_0x28f9ed(0x11f)}};this[_0x28f9ed(0x10f)][_0x28f9ed(0x108)](_0x28f9ed(0x12b),_0x35d764[_0x28f9ed(0x105)](_0x536270));}async[a366_0x16a103(0x10b)](){const _0x23fd6b=a366_0x16a103;return await this[_0x23fd6b(0x125)](),this[_0x23fd6b(0x119)](),await this['fillZip'](),this[_0x23fd6b(0x10f)][_0x23fd6b(0x129)]({'type':'nodebuffer'});}}function a366_0x5a5c(_0x3ab82c,_0x117819){const _0x11ed5c=a366_0x73fd();return a366_0x5a5c=function(_0x273199,_0x384fee){_0x273199=_0x273199-0x103;let _0x73fdaf=_0x11ed5c[_0x273199];return _0x73fdaf;},a366_0x5a5c(_0x3ab82c,_0x117819);}exports[a366_0x16a103(0x109)]=ZipCreatorRollback;