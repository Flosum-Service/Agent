const a367_0x40c7bb=a367_0x4ef4;(function(_0x44dd1a,_0x59643f){const _0x4902ee=a367_0x4ef4,_0x18df07=_0x44dd1a();while(!![]){try{const _0x3885fb=parseInt(_0x4902ee(0x15e))/0x1*(parseInt(_0x4902ee(0x158))/0x2)+-parseInt(_0x4902ee(0x178))/0x3+parseInt(_0x4902ee(0x156))/0x4*(parseInt(_0x4902ee(0x180))/0x5)+parseInt(_0x4902ee(0x17c))/0x6+parseInt(_0x4902ee(0x170))/0x7+parseInt(_0x4902ee(0x15b))/0x8+parseInt(_0x4902ee(0x17e))/0x9*(-parseInt(_0x4902ee(0x166))/0xa);if(_0x3885fb===_0x59643f)break;else _0x18df07['push'](_0x18df07['shift']());}catch(_0x3b2fed){_0x18df07['push'](_0x18df07['shift']());}}}(a367_0x3ab9,0x433bd));const a367_0x1c3b78=(function(){let _0x12f199=!![];return function(_0x45eaa5,_0x1dd050){const _0x3eb8ff=_0x12f199?function(){const _0x425c7e=a367_0x4ef4;if(_0x1dd050){const _0x2f8030=_0x1dd050[_0x425c7e(0x15f)](_0x45eaa5,arguments);return _0x1dd050=null,_0x2f8030;}}:function(){};return _0x12f199=![],_0x3eb8ff;};}()),a367_0x55e053=a367_0x1c3b78(this,function(){const _0xe1c490=a367_0x4ef4;return a367_0x55e053[_0xe1c490(0x160)]()[_0xe1c490(0x174)](_0xe1c490(0x164))[_0xe1c490(0x160)]()[_0xe1c490(0x16a)](a367_0x55e053)['search']('(((.+)+)+)+$');});a367_0x55e053();'use strict';function a367_0x4ef4(_0x541212,_0x117ea1){const _0x364523=a367_0x3ab9();return a367_0x4ef4=function(_0x55e053,_0x1c3b78){_0x55e053=_0x55e053-0x155;let _0x3ab9ae=_0x364523[_0x55e053];return _0x3ab9ae;},a367_0x4ef4(_0x541212,_0x117ea1);}var __importDefault=this&&this[a367_0x40c7bb(0x17a)]||function(_0x2145f3){const _0x126cc0=a367_0x40c7bb;return _0x2145f3&&_0x2145f3[_0x126cc0(0x171)]?_0x2145f3:{'default':_0x2145f3};};Object[a367_0x40c7bb(0x16b)](exports,a367_0x40c7bb(0x171),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;const jszip_1=__importDefault(require(a367_0x40c7bb(0x168))),factory_body_creator_rollback_1=require(a367_0x40c7bb(0x157)),xml2js_1=require(a367_0x40c7bb(0x179));function a367_0x3ab9(){const _0x392801=['332AiNLTO','loadAsync','stepName','3254288jdjsJJ','fillZip','create','622Harznd','apply','toString','nodebuffer','file','https://veevavault.com/','(((.+)+)+)+$','sort','8130fMtden','_zip','jszip','ZipCreatorRollback','constructor','defineProperty','.mdl','Rollback','migration__v','sortDeploymentResults','3508085RQVDxM','__esModule','default','_backupZip','search','_rollbackName','_backup','FactoryBodyCreatorRollback','882531YkcEiG','xml2js','__importDefault','buildObject','378510UywVuQ','Flosum','5949vDtLiQ','vaultpackage.xml','55zlJwTA','_deploymentResults','11884Xxkhng','./body-creator/factory.body-creator.rollback'];a367_0x3ab9=function(){return _0x392801;};return a367_0x3ab9();}class ZipCreatorRollback{constructor({deploymentResults:_0x19adf8,backup:_0xb8eade,rollbackName:_0x335783}){const _0x16cfe4=a367_0x40c7bb;this[_0x16cfe4(0x155)]=_0x19adf8,this[_0x16cfe4(0x175)]=_0x335783,this['_backup']=_0xb8eade;}async['createZips'](){const _0x2fc2a3=a367_0x40c7bb;this['_backupZip']=new jszip_1[(_0x2fc2a3(0x172))](),this[_0x2fc2a3(0x167)]=new jszip_1[(_0x2fc2a3(0x172))](),await this[_0x2fc2a3(0x173)][_0x2fc2a3(0x159)](this[_0x2fc2a3(0x176)],{'base64':!![]});}[a367_0x40c7bb(0x16f)](){const _0x47493f=a367_0x40c7bb;this[_0x47493f(0x155)][_0x47493f(0x165)]((_0x1539fd,_0x1b5b55)=>_0x1539fd[_0x47493f(0x15a)]<_0x1b5b55[_0x47493f(0x15a)]?0x1:_0x1b5b55[_0x47493f(0x15a)]<_0x1539fd['stepName']?-0x1:0x0);}async['fillZip'](){const _0x4a6e81=a367_0x40c7bb;for(const _0x2c03f6 of this[_0x4a6e81(0x155)]){const _0x59ac9a=await factory_body_creator_rollback_1[_0x4a6e81(0x177)]['create']({'deploymentResult':_0x2c03f6,'backupZip':this[_0x4a6e81(0x173)]})['create'](),{type:_0x4fc61d,name:_0x46a677}=_0x2c03f6;this[_0x4a6e81(0x167)][_0x4a6e81(0x162)](_0x4fc61d+'.'+_0x46a677+_0x4a6e81(0x16c),_0x59ac9a);}const _0x338b38=new xml2js_1['Builder']({'headless':!![]}),_0x379087={'vaultpackage':{'$':{'xmlns':_0x4a6e81(0x163)},'name':this[_0x4a6e81(0x175)],'source':{'vault':undefined,'author':_0x4a6e81(0x17d)},'packagetype':_0x4a6e81(0x16e),'summary':_0x4a6e81(0x16d),'description':'null'}};this['_zip'][_0x4a6e81(0x162)](_0x4a6e81(0x17f),_0x338b38[_0x4a6e81(0x17b)](_0x379087));}async[a367_0x40c7bb(0x15d)](){const _0x15fe11=a367_0x40c7bb;return await this['createZips'](),this[_0x15fe11(0x16f)](),await this[_0x15fe11(0x15c)](),this[_0x15fe11(0x167)]['generateAsync']({'type':_0x15fe11(0x161)});}}exports[a367_0x40c7bb(0x169)]=ZipCreatorRollback;