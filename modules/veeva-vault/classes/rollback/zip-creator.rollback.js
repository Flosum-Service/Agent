const a379_0x4163d9=a379_0x59b1;(function(_0x3d4df7,_0x67a5c5){const _0x484441=a379_0x59b1,_0x5d20ed=_0x3d4df7();while(!![]){try{const _0x1eaadf=-parseInt(_0x484441(0x1a9))/0x1+-parseInt(_0x484441(0x190))/0x2+parseInt(_0x484441(0x196))/0x3*(parseInt(_0x484441(0x18d))/0x4)+parseInt(_0x484441(0x195))/0x5+parseInt(_0x484441(0x19e))/0x6+-parseInt(_0x484441(0x182))/0x7+parseInt(_0x484441(0x184))/0x8;if(_0x1eaadf===_0x67a5c5)break;else _0x5d20ed['push'](_0x5d20ed['shift']());}catch(_0x3e3f6f){_0x5d20ed['push'](_0x5d20ed['shift']());}}}(a379_0x3abd,0x31b72));const a379_0x17f173=(function(){let _0x5a5d31=!![];return function(_0x3e59f9,_0x307951){const _0x59f842=_0x5a5d31?function(){const _0x285251=a379_0x59b1;if(_0x307951){const _0x4374a6=_0x307951[_0x285251(0x19b)](_0x3e59f9,arguments);return _0x307951=null,_0x4374a6;}}:function(){};return _0x5a5d31=![],_0x59f842;};}()),a379_0x372312=a379_0x17f173(this,function(){const _0x4bbbb9=a379_0x59b1;return a379_0x372312[_0x4bbbb9(0x1a5)]()[_0x4bbbb9(0x198)](_0x4bbbb9(0x19a))['toString']()[_0x4bbbb9(0x19f)](a379_0x372312)[_0x4bbbb9(0x198)](_0x4bbbb9(0x19a));});a379_0x372312();'use strict';var __importDefault=this&&this[a379_0x4163d9(0x191)]||function(_0x545ac8){const _0x1e77f6=a379_0x4163d9;return _0x545ac8&&_0x545ac8[_0x1e77f6(0x199)]?_0x545ac8:{'default':_0x545ac8};};function a379_0x3abd(){const _0x2e6a4b=['ZipCreatorRollback','99354rwRjLl','constructor','_rollbackName','.mdl','null','vaultpackage.xml','./body-creator/factory.body-creator.rollback','toString','file','generateAsync','create','53439fNcVek','Builder','1873249pcOTAo','https://veevavault.com/','2066680BdEnWv','sortDeploymentResults','xml2js','_deploymentResults','FactoryBodyCreatorRollback','defineProperty','_backupZip','createZips','_zip','32LJfowP','buildObject','stepName','100610WjocLV','__importDefault','loadAsync','_backup','fillZip','777135SazAoV','54249fBgFpU','Flosum','search','__esModule','(((.+)+)+)+$','apply','Rollback'];a379_0x3abd=function(){return _0x2e6a4b;};return a379_0x3abd();}function a379_0x59b1(_0x10e0e7,_0x58da74){const _0x4aa91a=a379_0x3abd();return a379_0x59b1=function(_0x372312,_0x17f173){_0x372312=_0x372312-0x182;let _0x3abd1a=_0x4aa91a[_0x372312];return _0x3abd1a;},a379_0x59b1(_0x10e0e7,_0x58da74);}Object[a379_0x4163d9(0x189)](exports,a379_0x4163d9(0x199),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;const jszip_1=__importDefault(require('jszip')),factory_body_creator_rollback_1=require(a379_0x4163d9(0x1a4)),xml2js_1=require(a379_0x4163d9(0x186));class ZipCreatorRollback{constructor({deploymentResults:_0x5f51d4,backup:_0x50e85d,rollbackName:_0x349170}){const _0x121043=a379_0x4163d9;this[_0x121043(0x187)]=_0x5f51d4,this['_rollbackName']=_0x349170,this[_0x121043(0x193)]=_0x50e85d;}async[a379_0x4163d9(0x18b)](){const _0x5a559d=a379_0x4163d9;this[_0x5a559d(0x18a)]=new jszip_1['default'](),this['_zip']=new jszip_1['default'](),await this['_backupZip'][_0x5a559d(0x192)](this[_0x5a559d(0x193)],{'base64':!![]});}[a379_0x4163d9(0x185)](){const _0x1de5e6=a379_0x4163d9;this[_0x1de5e6(0x187)]['sort']((_0x3b185c,_0x5bba90)=>_0x3b185c[_0x1de5e6(0x18f)]<_0x5bba90[_0x1de5e6(0x18f)]?0x1:_0x5bba90['stepName']<_0x3b185c['stepName']?-0x1:0x0);}async[a379_0x4163d9(0x194)](){const _0x4c9e7e=a379_0x4163d9;for(const _0x1a27e5 of this[_0x4c9e7e(0x187)]){const _0x77d968=await factory_body_creator_rollback_1[_0x4c9e7e(0x188)][_0x4c9e7e(0x1a8)]({'deploymentResult':_0x1a27e5,'backupZip':this[_0x4c9e7e(0x18a)]})[_0x4c9e7e(0x1a8)](),{type:_0x1f8a22,name:_0x81ad23}=_0x1a27e5;this[_0x4c9e7e(0x18c)][_0x4c9e7e(0x1a6)](_0x1f8a22+'.'+_0x81ad23+_0x4c9e7e(0x1a1),_0x77d968);}const _0x29a938=new xml2js_1[(_0x4c9e7e(0x1aa))]({'headless':!![]}),_0x339d4f={'vaultpackage':{'$':{'xmlns':_0x4c9e7e(0x183)},'name':this[_0x4c9e7e(0x1a0)],'source':{'vault':undefined,'author':_0x4c9e7e(0x197)},'packagetype':'migration__v','summary':_0x4c9e7e(0x19c),'description':_0x4c9e7e(0x1a2)}};this[_0x4c9e7e(0x18c)][_0x4c9e7e(0x1a6)](_0x4c9e7e(0x1a3),_0x29a938[_0x4c9e7e(0x18e)](_0x339d4f));}async['create'](){const _0x55a203=a379_0x4163d9;return await this[_0x55a203(0x18b)](),this['sortDeploymentResults'](),await this[_0x55a203(0x194)](),this[_0x55a203(0x18c)][_0x55a203(0x1a7)]({'type':'nodebuffer'});}}exports[a379_0x4163d9(0x19d)]=ZipCreatorRollback;