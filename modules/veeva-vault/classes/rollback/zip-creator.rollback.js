const a378_0x39780a=a378_0x17e7;(function(_0x3982c7,_0x108640){const _0x5d31fc=a378_0x17e7,_0xd62ae4=_0x3982c7();while(!![]){try{const _0x2cc34c=-parseInt(_0x5d31fc(0x8a))/0x1*(parseInt(_0x5d31fc(0x97))/0x2)+-parseInt(_0x5d31fc(0x95))/0x3+parseInt(_0x5d31fc(0x98))/0x4*(-parseInt(_0x5d31fc(0xa5))/0x5)+-parseInt(_0x5d31fc(0x89))/0x6+-parseInt(_0x5d31fc(0x91))/0x7+parseInt(_0x5d31fc(0xa1))/0x8*(-parseInt(_0x5d31fc(0x92))/0x9)+parseInt(_0x5d31fc(0xae))/0xa*(parseInt(_0x5d31fc(0x8e))/0xb);if(_0x2cc34c===_0x108640)break;else _0xd62ae4['push'](_0xd62ae4['shift']());}catch(_0x43e35f){_0xd62ae4['push'](_0xd62ae4['shift']());}}}(a378_0x4c81,0xb1f4e));const a378_0x26288a=(function(){let _0x28932b=!![];return function(_0x14142e,_0x461eca){const _0x15d6bd=_0x28932b?function(){const _0x422a57=a378_0x17e7;if(_0x461eca){const _0x46474e=_0x461eca[_0x422a57(0x93)](_0x14142e,arguments);return _0x461eca=null,_0x46474e;}}:function(){};return _0x28932b=![],_0x15d6bd;};}()),a378_0x1c9717=a378_0x26288a(this,function(){const _0x468199=a378_0x17e7;return a378_0x1c9717['toString']()[_0x468199(0x96)](_0x468199(0xb4))[_0x468199(0x9a)]()[_0x468199(0xa2)](a378_0x1c9717)[_0x468199(0x96)](_0x468199(0xb4));});a378_0x1c9717();'use strict';var __importDefault=this&&this[a378_0x39780a(0xb1)]||function(_0x46ab2b){const _0x1549e4=a378_0x39780a;return _0x46ab2b&&_0x46ab2b[_0x1549e4(0xa7)]?_0x46ab2b:{'default':_0x46ab2b};};Object[a378_0x39780a(0x8b)](exports,'__esModule',{'value':!![]}),exports[a378_0x39780a(0x99)]=void 0x0;const jszip_1=__importDefault(require(a378_0x39780a(0xaa))),factory_body_creator_rollback_1=require(a378_0x39780a(0x9f)),xml2js_1=require(a378_0x39780a(0x8c));class ZipCreatorRollback{constructor({deploymentResults:_0x1bbc29,backup:_0x14074b,rollbackName:_0x611a3a}){const _0x16db79=a378_0x39780a;this[_0x16db79(0xab)]=_0x1bbc29,this[_0x16db79(0xb2)]=_0x611a3a,this[_0x16db79(0xac)]=_0x14074b;}async[a378_0x39780a(0x8f)](){const _0x2a6c5d=a378_0x39780a;this[_0x2a6c5d(0xa0)]=new jszip_1[(_0x2a6c5d(0xb0))](),this['_zip']=new jszip_1[(_0x2a6c5d(0xb0))](),await this[_0x2a6c5d(0xa0)][_0x2a6c5d(0x8d)](this[_0x2a6c5d(0xac)],{'base64':!![]});}[a378_0x39780a(0x9b)](){const _0x5ac020=a378_0x39780a;this['_deploymentResults'][_0x5ac020(0x9c)]((_0x3cd5eb,_0x7e150f)=>_0x3cd5eb[_0x5ac020(0xaf)]<_0x7e150f[_0x5ac020(0xaf)]?0x1:_0x7e150f[_0x5ac020(0xaf)]<_0x3cd5eb['stepName']?-0x1:0x0);}async[a378_0x39780a(0x9e)](){const _0x188039=a378_0x39780a;for(const _0x5b2bb5 of this['_deploymentResults']){const _0x247837=await factory_body_creator_rollback_1[_0x188039(0xa3)][_0x188039(0xa8)]({'deploymentResult':_0x5b2bb5,'backupZip':this['_backupZip']})['create'](),{type:_0x1c5711,name:_0x4078ee}=_0x5b2bb5;this[_0x188039(0xa9)]['file'](_0x1c5711+'.'+_0x4078ee+'.mdl',_0x247837);}const _0x3e9db7=new xml2js_1[(_0x188039(0x94))]({'headless':!![]}),_0xcd59f={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this[_0x188039(0xb2)],'source':{'vault':undefined,'author':_0x188039(0x90)},'packagetype':_0x188039(0xad),'summary':'Rollback','description':_0x188039(0x9d)}};this['_zip'][_0x188039(0xa4)](_0x188039(0xa6),_0x3e9db7['buildObject'](_0xcd59f));}async['create'](){const _0x56d07c=a378_0x39780a;return await this[_0x56d07c(0x8f)](),this['sortDeploymentResults'](),await this[_0x56d07c(0x9e)](),this['_zip'][_0x56d07c(0xb3)]({'type':'nodebuffer'});}}exports[a378_0x39780a(0x99)]=ZipCreatorRollback;function a378_0x17e7(_0x4a5857,_0x527d6a){const _0x303e4c=a378_0x4c81();return a378_0x17e7=function(_0x1c9717,_0x26288a){_0x1c9717=_0x1c9717-0x89;let _0x4c8162=_0x303e4c[_0x1c9717];return _0x4c8162;},a378_0x17e7(_0x4a5857,_0x527d6a);}function a378_0x4c81(){const _0x584e19=['1059895nyDlJe','vaultpackage.xml','__esModule','create','_zip','jszip','_deploymentResults','_backup','migration__v','16034810pNgMVK','stepName','default','__importDefault','_rollbackName','generateAsync','(((.+)+)+)+$','4410120dKDrHY','3650ZwIWAl','defineProperty','xml2js','loadAsync','22brCKiH','createZips','Flosum','863695DsZTFi','139842lQUGWQ','apply','Builder','1988652TWQcHD','search','42fXklxA','4eCoOGG','ZipCreatorRollback','toString','sortDeploymentResults','sort','null','fillZip','./body-creator/factory.body-creator.rollback','_backupZip','344VAQxqd','constructor','FactoryBodyCreatorRollback','file'];a378_0x4c81=function(){return _0x584e19;};return a378_0x4c81();}