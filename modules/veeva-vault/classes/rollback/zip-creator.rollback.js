const a312_0x23248e=a312_0x5bae;(function(_0x37a152,_0x57b4de){const _0x17883f=a312_0x5bae,_0x20e259=_0x37a152();while(!![]){try{const _0x3a7a03=parseInt(_0x17883f(0x167))/0x1+-parseInt(_0x17883f(0x185))/0x2*(-parseInt(_0x17883f(0x17a))/0x3)+parseInt(_0x17883f(0x16a))/0x4+parseInt(_0x17883f(0x175))/0x5*(parseInt(_0x17883f(0x169))/0x6)+-parseInt(_0x17883f(0x186))/0x7*(parseInt(_0x17883f(0x174))/0x8)+parseInt(_0x17883f(0x170))/0x9+-parseInt(_0x17883f(0x164))/0xa;if(_0x3a7a03===_0x57b4de)break;else _0x20e259['push'](_0x20e259['shift']());}catch(_0x481817){_0x20e259['push'](_0x20e259['shift']());}}}(a312_0x4632,0xbbd94));const a312_0x4fa698=(function(){let _0x4f814b=!![];return function(_0x2ec35a,_0x3d1646){const _0x26377d=_0x4f814b?function(){const _0x2da1d8=a312_0x5bae;if(_0x3d1646){const _0x1c6697=_0x3d1646[_0x2da1d8(0x17c)](_0x2ec35a,arguments);return _0x3d1646=null,_0x1c6697;}}:function(){};return _0x4f814b=![],_0x26377d;};}()),a312_0x715759=a312_0x4fa698(this,function(){const _0x248555=a312_0x5bae;return a312_0x715759[_0x248555(0x165)]()[_0x248555(0x181)](_0x248555(0x178))[_0x248555(0x165)]()[_0x248555(0x187)](a312_0x715759)[_0x248555(0x181)](_0x248555(0x178));});a312_0x715759();'use strict';var __importDefault=this&&this[a312_0x23248e(0x18a)]||function(_0x7ff005){return _0x7ff005&&_0x7ff005['__esModule']?_0x7ff005:{'default':_0x7ff005};};Object[a312_0x23248e(0x17e)](exports,a312_0x23248e(0x16e),{'value':!![]}),exports[a312_0x23248e(0x172)]=void 0x0;const jszip_1=__importDefault(require('jszip')),factory_body_creator_rollback_1=require(a312_0x23248e(0x171)),xml2js_1=require(a312_0x23248e(0x184));class ZipCreatorRollback{constructor({deploymentResults:_0x344693,backup:_0x1c1fb5,rollbackName:_0xa8cf40}){const _0x586c71=a312_0x23248e;this[_0x586c71(0x188)]=_0x344693,this[_0x586c71(0x179)]=_0xa8cf40,this[_0x586c71(0x16b)]=_0x1c1fb5;}async['createZips'](){const _0x519e7c=a312_0x23248e;this['_backupZip']=new jszip_1['default'](),this[_0x519e7c(0x177)]=new jszip_1['default'](),await this[_0x519e7c(0x17d)][_0x519e7c(0x176)](this[_0x519e7c(0x16b)],{'base64':!![]});}['sortDeploymentResults'](){const _0x13e027=a312_0x23248e;this[_0x13e027(0x188)][_0x13e027(0x16d)]((_0xea5c56,_0x558b17)=>_0xea5c56['stepName']<_0x558b17[_0x13e027(0x168)]?0x1:_0x558b17[_0x13e027(0x168)]<_0xea5c56['stepName']?-0x1:0x0);}async[a312_0x23248e(0x183)](){const _0x1e1894=a312_0x23248e;for(const _0x3f6a81 of this[_0x1e1894(0x188)]){const _0x4b27a5=await factory_body_creator_rollback_1[_0x1e1894(0x166)]['create']({'deploymentResult':_0x3f6a81,'backupZip':this[_0x1e1894(0x17d)]})[_0x1e1894(0x173)](),{type:_0x33a66d,name:_0x589b7f}=_0x3f6a81;this[_0x1e1894(0x177)][_0x1e1894(0x16c)](_0x33a66d+'.'+_0x589b7f+'.mdl',_0x4b27a5);}const _0x124fb7=new xml2js_1[(_0x1e1894(0x16f))]({'headless':!![]}),_0x401e7e={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this['_rollbackName'],'source':{'vault':undefined,'author':'Flosum'},'packagetype':'migration__v','summary':_0x1e1894(0x17b),'description':'null'}};this[_0x1e1894(0x177)]['file']('vaultpackage.xml',_0x124fb7[_0x1e1894(0x189)](_0x401e7e));}async[a312_0x23248e(0x173)](){const _0x31f8f9=a312_0x23248e;return await this[_0x31f8f9(0x180)](),this[_0x31f8f9(0x182)](),await this[_0x31f8f9(0x183)](),this[_0x31f8f9(0x177)]['generateAsync']({'type':_0x31f8f9(0x17f)});}}function a312_0x4632(){const _0x546f93=['xml2js','177382UsqLGS','7BXkgDC','constructor','_deploymentResults','buildObject','__importDefault','8434130gWlZwa','toString','FactoryBodyCreatorRollback','16818pNlRUz','stepName','2635734VCAvUs','4140048xYocth','_backup','file','sort','__esModule','Builder','4002939jgdxin','./body-creator/factory.body-creator.rollback','ZipCreatorRollback','create','8227288BNIlGp','10kyoMoX','loadAsync','_zip','(((.+)+)+)+$','_rollbackName','9aHtnYl','Rollback','apply','_backupZip','defineProperty','nodebuffer','createZips','search','sortDeploymentResults','fillZip'];a312_0x4632=function(){return _0x546f93;};return a312_0x4632();}function a312_0x5bae(_0x38cbb4,_0x56dccb){const _0x2caa62=a312_0x4632();return a312_0x5bae=function(_0x715759,_0x4fa698){_0x715759=_0x715759-0x164;let _0x463245=_0x2caa62[_0x715759];return _0x463245;},a312_0x5bae(_0x38cbb4,_0x56dccb);}exports[a312_0x23248e(0x172)]=ZipCreatorRollback;