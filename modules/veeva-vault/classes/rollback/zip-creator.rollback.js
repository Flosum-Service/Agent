const a378_0x214189=a378_0x1fca;function a378_0x1fca(_0x57ee56,_0x4427af){const _0x3a9e55=a378_0x21bc();return a378_0x1fca=function(_0x276411,_0x1a1621){_0x276411=_0x276411-0xce;let _0x21bcb1=_0x3a9e55[_0x276411];return _0x21bcb1;},a378_0x1fca(_0x57ee56,_0x4427af);}(function(_0x16f40b,_0x470763){const _0x1bf3bd=a378_0x1fca,_0x10af04=_0x16f40b();while(!![]){try{const _0x128340=parseInt(_0x1bf3bd(0xf2))/0x1*(-parseInt(_0x1bf3bd(0xd5))/0x2)+parseInt(_0x1bf3bd(0xce))/0x3*(parseInt(_0x1bf3bd(0xdc))/0x4)+-parseInt(_0x1bf3bd(0xe0))/0x5*(parseInt(_0x1bf3bd(0xdd))/0x6)+parseInt(_0x1bf3bd(0xed))/0x7*(parseInt(_0x1bf3bd(0xe4))/0x8)+-parseInt(_0x1bf3bd(0xd7))/0x9+parseInt(_0x1bf3bd(0xd9))/0xa*(-parseInt(_0x1bf3bd(0xe6))/0xb)+parseInt(_0x1bf3bd(0xe8))/0xc;if(_0x128340===_0x470763)break;else _0x10af04['push'](_0x10af04['shift']());}catch(_0x4c3aab){_0x10af04['push'](_0x10af04['shift']());}}}(a378_0x21bc,0xc841c));function a378_0x21bc(){const _0x4b39e5=['4777333Dehwvx','create','39271392YotPwH','nodebuffer','generateAsync','createZips','migration__v','1277465gSslZH','default','(((.+)+)+)+$','fillZip','sortDeploymentResults','28795zcmjoi','search','_backup','stepName','__esModule','Rollback','.mdl','145533HVRIjL','file','loadAsync','vaultpackage.xml','https://veevavault.com/','_zip','null','62QmMFrK','_rollbackName','12359871chpBED','toString','10KIYYIq','xml2js','_backupZip','84pDyGkn','6Dycerw','defineProperty','Flosum','4766615MoMHCp','sort','_deploymentResults','jszip','8oIpkWF','ZipCreatorRollback'];a378_0x21bc=function(){return _0x4b39e5;};return a378_0x21bc();}const a378_0x1a1621=(function(){let _0x102087=!![];return function(_0x419ac7,_0x4c74db){const _0x5420f1=_0x102087?function(){if(_0x4c74db){const _0x3511a8=_0x4c74db['apply'](_0x419ac7,arguments);return _0x4c74db=null,_0x3511a8;}}:function(){};return _0x102087=![],_0x5420f1;};}()),a378_0x276411=a378_0x1a1621(this,function(){const _0x3b4802=a378_0x1fca;return a378_0x276411['toString']()['search'](_0x3b4802(0xef))[_0x3b4802(0xd8)]()['constructor'](a378_0x276411)[_0x3b4802(0xf3)](_0x3b4802(0xef));});a378_0x276411();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2f4e18){const _0x35f07e=a378_0x1fca;return _0x2f4e18&&_0x2f4e18[_0x35f07e(0xf6)]?_0x2f4e18:{'default':_0x2f4e18};};Object[a378_0x214189(0xde)](exports,a378_0x214189(0xf6),{'value':!![]}),exports[a378_0x214189(0xe5)]=void 0x0;const jszip_1=__importDefault(require(a378_0x214189(0xe3))),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require(a378_0x214189(0xda));class ZipCreatorRollback{constructor({deploymentResults:_0x2cd61b,backup:_0x30ed37,rollbackName:_0x1138d2}){const _0x4f09fa=a378_0x214189;this[_0x4f09fa(0xe2)]=_0x2cd61b,this[_0x4f09fa(0xd6)]=_0x1138d2,this[_0x4f09fa(0xf4)]=_0x30ed37;}async[a378_0x214189(0xeb)](){const _0x2aa23d=a378_0x214189;this[_0x2aa23d(0xdb)]=new jszip_1[(_0x2aa23d(0xee))](),this[_0x2aa23d(0xd3)]=new jszip_1[(_0x2aa23d(0xee))](),await this['_backupZip'][_0x2aa23d(0xd0)](this['_backup'],{'base64':!![]});}[a378_0x214189(0xf1)](){const _0x771cea=a378_0x214189;this[_0x771cea(0xe2)][_0x771cea(0xe1)]((_0x2bf6e7,_0x57b0bd)=>_0x2bf6e7[_0x771cea(0xf5)]<_0x57b0bd['stepName']?0x1:_0x57b0bd[_0x771cea(0xf5)]<_0x2bf6e7['stepName']?-0x1:0x0);}async[a378_0x214189(0xf0)](){const _0x593bd5=a378_0x214189;for(const _0x28c0cc of this['_deploymentResults']){const _0x540b74=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback'][_0x593bd5(0xe7)]({'deploymentResult':_0x28c0cc,'backupZip':this['_backupZip']})[_0x593bd5(0xe7)](),{type:_0x105feb,name:_0x43d262}=_0x28c0cc;this[_0x593bd5(0xd3)]['file'](_0x105feb+'.'+_0x43d262+_0x593bd5(0xf8),_0x540b74);}const _0x2998a0=new xml2js_1['Builder']({'headless':!![]}),_0xca3823={'vaultpackage':{'$':{'xmlns':_0x593bd5(0xd2)},'name':this[_0x593bd5(0xd6)],'source':{'vault':undefined,'author':_0x593bd5(0xdf)},'packagetype':_0x593bd5(0xec),'summary':_0x593bd5(0xf7),'description':_0x593bd5(0xd4)}};this['_zip'][_0x593bd5(0xcf)](_0x593bd5(0xd1),_0x2998a0['buildObject'](_0xca3823));}async[a378_0x214189(0xe7)](){const _0x33a333=a378_0x214189;return await this['createZips'](),this[_0x33a333(0xf1)](),await this[_0x33a333(0xf0)](),this['_zip'][_0x33a333(0xea)]({'type':_0x33a333(0xe9)});}}exports[a378_0x214189(0xe5)]=ZipCreatorRollback;