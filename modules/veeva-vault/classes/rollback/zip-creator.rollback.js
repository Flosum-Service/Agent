const a351_0x244998=a351_0x8601;(function(_0x5beebf,_0x5703e5){const _0x5d186d=a351_0x8601,_0x195b36=_0x5beebf();while(!![]){try{const _0x3b4422=-parseInt(_0x5d186d(0x1b6))/0x1+parseInt(_0x5d186d(0x19a))/0x2*(-parseInt(_0x5d186d(0x1aa))/0x3)+-parseInt(_0x5d186d(0x1ae))/0x4+parseInt(_0x5d186d(0x1bd))/0x5+-parseInt(_0x5d186d(0x1b4))/0x6+parseInt(_0x5d186d(0x1a1))/0x7*(parseInt(_0x5d186d(0x1b1))/0x8)+parseInt(_0x5d186d(0x19c))/0x9;if(_0x3b4422===_0x5703e5)break;else _0x195b36['push'](_0x195b36['shift']());}catch(_0x3332e6){_0x195b36['push'](_0x195b36['shift']());}}}(a351_0x4dd1,0x8305c));const a351_0x5b5830=(function(){let _0x387ef0=!![];return function(_0xc73fe0,_0x54eddb){const _0x45358f=_0x387ef0?function(){if(_0x54eddb){const _0x34baf4=_0x54eddb['apply'](_0xc73fe0,arguments);return _0x54eddb=null,_0x34baf4;}}:function(){};return _0x387ef0=![],_0x45358f;};}()),a351_0x37118a=a351_0x5b5830(this,function(){const _0x416e60=a351_0x8601;return a351_0x37118a[_0x416e60(0x1ad)]()[_0x416e60(0x1ba)]('(((.+)+)+)+$')[_0x416e60(0x1ad)]()[_0x416e60(0x19b)](a351_0x37118a)['search'](_0x416e60(0x1b8));});a351_0x37118a();function a351_0x4dd1(){const _0x5834c7=['56103PIvQGF','file','createZips','toString','2311188aFvMln','jszip','_rollbackName','3536448NChqfs','default','Flosum','3535494dmatHl','__esModule','613581FCZSMk','loadAsync','(((.+)+)+)+$','.mdl','search','_backupZip','fillZip','1053190BVUhmF','./body-creator/factory.body-creator.rollback','null','vaultpackage.xml','migration__v','nodebuffer','Builder','generateAsync','58oeOBYB','constructor','15883866YIeiWu','xml2js','_backup','Rollback','https://veevavault.com/','14qjvwvw','sort','_zip','stepName','__importDefault','defineProperty','buildObject','_deploymentResults','create'];a351_0x4dd1=function(){return _0x5834c7;};return a351_0x4dd1();}function a351_0x8601(_0x157ba0,_0x3aa6d1){const _0x56df95=a351_0x4dd1();return a351_0x8601=function(_0x37118a,_0x5b5830){_0x37118a=_0x37118a-0x198;let _0x4dd1ba=_0x56df95[_0x37118a];return _0x4dd1ba;},a351_0x8601(_0x157ba0,_0x3aa6d1);}'use strict';var __importDefault=this&&this[a351_0x244998(0x1a5)]||function(_0xd59aaf){const _0x3d08ac=a351_0x244998;return _0xd59aaf&&_0xd59aaf[_0x3d08ac(0x1b5)]?_0xd59aaf:{'default':_0xd59aaf};};Object[a351_0x244998(0x1a6)](exports,a351_0x244998(0x1b5),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;const jszip_1=__importDefault(require(a351_0x244998(0x1af))),factory_body_creator_rollback_1=require(a351_0x244998(0x1be)),xml2js_1=require(a351_0x244998(0x19d));class ZipCreatorRollback{constructor({deploymentResults:_0x549b91,backup:_0x49dd06,rollbackName:_0x5e658a}){const _0x5789c2=a351_0x244998;this[_0x5789c2(0x1a8)]=_0x549b91,this['_rollbackName']=_0x5e658a,this[_0x5789c2(0x19e)]=_0x49dd06;}async[a351_0x244998(0x1ac)](){const _0x32ba16=a351_0x244998;this['_backupZip']=new jszip_1[(_0x32ba16(0x1b2))](),this['_zip']=new jszip_1['default'](),await this[_0x32ba16(0x1bb)][_0x32ba16(0x1b7)](this[_0x32ba16(0x19e)],{'base64':!![]});}['sortDeploymentResults'](){const _0x1dad4c=a351_0x244998;this['_deploymentResults'][_0x1dad4c(0x1a2)]((_0x24f2ab,_0x3eb15c)=>_0x24f2ab['stepName']<_0x3eb15c[_0x1dad4c(0x1a4)]?0x1:_0x3eb15c[_0x1dad4c(0x1a4)]<_0x24f2ab[_0x1dad4c(0x1a4)]?-0x1:0x0);}async[a351_0x244998(0x1bc)](){const _0x524853=a351_0x244998;for(const _0x4fe8e8 of this['_deploymentResults']){const _0x41b592=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback'][_0x524853(0x1a9)]({'deploymentResult':_0x4fe8e8,'backupZip':this[_0x524853(0x1bb)]})[_0x524853(0x1a9)](),{type:_0x24129c,name:_0x779ee6}=_0x4fe8e8;this[_0x524853(0x1a3)][_0x524853(0x1ab)](_0x24129c+'.'+_0x779ee6+_0x524853(0x1b9),_0x41b592);}const _0x2245a7=new xml2js_1[(_0x524853(0x198))]({'headless':!![]}),_0x2212c1={'vaultpackage':{'$':{'xmlns':_0x524853(0x1a0)},'name':this[_0x524853(0x1b0)],'source':{'vault':undefined,'author':_0x524853(0x1b3)},'packagetype':_0x524853(0x1c1),'summary':_0x524853(0x19f),'description':_0x524853(0x1bf)}};this[_0x524853(0x1a3)][_0x524853(0x1ab)](_0x524853(0x1c0),_0x2245a7[_0x524853(0x1a7)](_0x2212c1));}async[a351_0x244998(0x1a9)](){const _0x132932=a351_0x244998;return await this[_0x132932(0x1ac)](),this['sortDeploymentResults'](),await this['fillZip'](),this[_0x132932(0x1a3)][_0x132932(0x199)]({'type':_0x132932(0x1c2)});}}exports['ZipCreatorRollback']=ZipCreatorRollback;