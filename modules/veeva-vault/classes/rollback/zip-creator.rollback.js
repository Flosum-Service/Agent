const a335_0x2ee947=a335_0x56bc;(function(_0x3ee985,_0x268bd8){const _0x4130c8=a335_0x56bc,_0x334021=_0x3ee985();while(!![]){try{const _0x131b01=-parseInt(_0x4130c8(0x1bb))/0x1*(parseInt(_0x4130c8(0x1b2))/0x2)+-parseInt(_0x4130c8(0x1ba))/0x3+parseInt(_0x4130c8(0x1b9))/0x4*(parseInt(_0x4130c8(0x1b5))/0x5)+-parseInt(_0x4130c8(0x1c7))/0x6*(parseInt(_0x4130c8(0x1d9))/0x7)+parseInt(_0x4130c8(0x1dd))/0x8+parseInt(_0x4130c8(0x1bf))/0x9*(-parseInt(_0x4130c8(0x1dc))/0xa)+parseInt(_0x4130c8(0x1c9))/0xb*(parseInt(_0x4130c8(0x1b4))/0xc);if(_0x131b01===_0x268bd8)break;else _0x334021['push'](_0x334021['shift']());}catch(_0x3fd4f2){_0x334021['push'](_0x334021['shift']());}}}(a335_0x5458,0x43e15));const a335_0x2ceb28=(function(){let _0x18578c=!![];return function(_0x44d8c9,_0x357adf){const _0x5daf3d=_0x18578c?function(){const _0x1c49ae=a335_0x56bc;if(_0x357adf){const _0x51f434=_0x357adf[_0x1c49ae(0x1ce)](_0x44d8c9,arguments);return _0x357adf=null,_0x51f434;}}:function(){};return _0x18578c=![],_0x5daf3d;};}()),a335_0x3fc255=a335_0x2ceb28(this,function(){const _0x4392cd=a335_0x56bc;return a335_0x3fc255[_0x4392cd(0x1bc)]()['search'](_0x4392cd(0x1d3))['toString']()[_0x4392cd(0x1cf)](a335_0x3fc255)[_0x4392cd(0x1d0)]('(((.+)+)+)+$');});function a335_0x5458(){const _0x34892a=['1645690qZHwwy','3027032cjpDil','__esModule','2ehOzib','./body-creator/factory.body-creator.rollback','372itsrub','1565nMzIzE','null','stepName','.mdl','1256qNZrQG','888468BdGeeK','504642CkHHzg','toString','jszip','Rollback','18wKVwVQ','_zip','ZipCreatorRollback','_backupZip','vaultpackage.xml','sort','__importDefault','defineProperty','221478PEemIr','sortDeploymentResults','448349jdlIIs','FactoryBodyCreatorRollback','xml2js','_deploymentResults','create','apply','constructor','search','loadAsync','_backup','(((.+)+)+)+$','nodebuffer','_rollbackName','file','migration__v','default','63dNnEWe','Builder','fillZip'];a335_0x5458=function(){return _0x34892a;};return a335_0x5458();}a335_0x3fc255();'use strict';var __importDefault=this&&this[a335_0x2ee947(0x1c5)]||function(_0x4005e1){const _0x28f98e=a335_0x2ee947;return _0x4005e1&&_0x4005e1[_0x28f98e(0x1de)]?_0x4005e1:{'default':_0x4005e1};};Object[a335_0x2ee947(0x1c6)](exports,a335_0x2ee947(0x1de),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;function a335_0x56bc(_0x3fc1a0,_0x47d65f){const _0x5245ba=a335_0x5458();return a335_0x56bc=function(_0x3fc255,_0x2ceb28){_0x3fc255=_0x3fc255-0x1b2;let _0x5458a9=_0x5245ba[_0x3fc255];return _0x5458a9;},a335_0x56bc(_0x3fc1a0,_0x47d65f);}const jszip_1=__importDefault(require(a335_0x2ee947(0x1bd))),factory_body_creator_rollback_1=require(a335_0x2ee947(0x1b3)),xml2js_1=require(a335_0x2ee947(0x1cb));class ZipCreatorRollback{constructor({deploymentResults:_0x39855a,backup:_0x3614b4,rollbackName:_0x2475fe}){const _0x909f2b=a335_0x2ee947;this[_0x909f2b(0x1cc)]=_0x39855a,this[_0x909f2b(0x1d5)]=_0x2475fe,this[_0x909f2b(0x1d2)]=_0x3614b4;}async['createZips'](){const _0x44d908=a335_0x2ee947;this[_0x44d908(0x1c2)]=new jszip_1['default'](),this[_0x44d908(0x1c0)]=new jszip_1[(_0x44d908(0x1d8))](),await this[_0x44d908(0x1c2)][_0x44d908(0x1d1)](this['_backup'],{'base64':!![]});}['sortDeploymentResults'](){const _0xa63b15=a335_0x2ee947;this['_deploymentResults'][_0xa63b15(0x1c4)]((_0x4bddda,_0x32fe60)=>_0x4bddda[_0xa63b15(0x1b7)]<_0x32fe60[_0xa63b15(0x1b7)]?0x1:_0x32fe60[_0xa63b15(0x1b7)]<_0x4bddda[_0xa63b15(0x1b7)]?-0x1:0x0);}async[a335_0x2ee947(0x1db)](){const _0xafbd23=a335_0x2ee947;for(const _0xdbd353 of this['_deploymentResults']){const _0x2c164d=await factory_body_creator_rollback_1[_0xafbd23(0x1ca)][_0xafbd23(0x1cd)]({'deploymentResult':_0xdbd353,'backupZip':this[_0xafbd23(0x1c2)]})[_0xafbd23(0x1cd)](),{type:_0xd15801,name:_0x1b1994}=_0xdbd353;this[_0xafbd23(0x1c0)][_0xafbd23(0x1d6)](_0xd15801+'.'+_0x1b1994+_0xafbd23(0x1b8),_0x2c164d);}const _0x947c2b=new xml2js_1[(_0xafbd23(0x1da))]({'headless':!![]}),_0xa3f35f={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this[_0xafbd23(0x1d5)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0xafbd23(0x1d7),'summary':_0xafbd23(0x1be),'description':_0xafbd23(0x1b6)}};this[_0xafbd23(0x1c0)][_0xafbd23(0x1d6)](_0xafbd23(0x1c3),_0x947c2b['buildObject'](_0xa3f35f));}async[a335_0x2ee947(0x1cd)](){const _0x5f1464=a335_0x2ee947;return await this['createZips'](),this[_0x5f1464(0x1c8)](),await this['fillZip'](),this[_0x5f1464(0x1c0)]['generateAsync']({'type':_0x5f1464(0x1d4)});}}exports[a335_0x2ee947(0x1c1)]=ZipCreatorRollback;