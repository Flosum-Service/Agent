const a312_0x597b61=a312_0x4727;(function(_0x17bab7,_0x1307da){const _0x3f8edd=a312_0x4727,_0x4436ff=_0x17bab7();while(!![]){try{const _0x46e11a=-parseInt(_0x3f8edd(0xe6))/0x1*(parseInt(_0x3f8edd(0xf1))/0x2)+-parseInt(_0x3f8edd(0xe5))/0x3*(-parseInt(_0x3f8edd(0xcd))/0x4)+parseInt(_0x3f8edd(0xd4))/0x5*(parseInt(_0x3f8edd(0xd1))/0x6)+parseInt(_0x3f8edd(0xd9))/0x7*(-parseInt(_0x3f8edd(0xf0))/0x8)+parseInt(_0x3f8edd(0xdc))/0x9*(-parseInt(_0x3f8edd(0xc7))/0xa)+-parseInt(_0x3f8edd(0xee))/0xb*(parseInt(_0x3f8edd(0xe0))/0xc)+-parseInt(_0x3f8edd(0xd8))/0xd*(-parseInt(_0x3f8edd(0xe2))/0xe);if(_0x46e11a===_0x1307da)break;else _0x4436ff['push'](_0x4436ff['shift']());}catch(_0x11b85d){_0x4436ff['push'](_0x4436ff['shift']());}}}(a312_0x3396,0xdd3c9));const a312_0x258759=(function(){let _0xd49a0a=!![];return function(_0x4e378d,_0x16e13a){const _0x4fda02=_0xd49a0a?function(){if(_0x16e13a){const _0x40206a=_0x16e13a['apply'](_0x4e378d,arguments);return _0x16e13a=null,_0x40206a;}}:function(){};return _0xd49a0a=![],_0x4fda02;};}()),a312_0x1993d9=a312_0x258759(this,function(){const _0x7827fa=a312_0x4727;return a312_0x1993d9[_0x7827fa(0xd7)]()[_0x7827fa(0xe7)]('(((.+)+)+)+$')['toString']()[_0x7827fa(0xd0)](a312_0x1993d9)[_0x7827fa(0xe7)](_0x7827fa(0xd5));});a312_0x1993d9();function a312_0x3396(){const _0x4b22e9=['42190QvwjBo','jszip','https://veevavault.com/','file','fillZip','xml2js','1662952UIbvxw','Builder','__importDefault','constructor','53370kQklvw','_deploymentResults','null','985nfLURy','(((.+)+)+)+$','createZips','toString','884kxwqBc','50526enQCmR','_backupZip','defineProperty','252uFiCiW','.mdl','Flosum','stepName','828jjrltC','_backup','14056MryYQD','sort','default','9SlFYwK','865357kWLHPg','search','__esModule','vaultpackage.xml','_zip','sortDeploymentResults','ZipCreatorRollback','migration__v','41679TtWgFL','generateAsync','1016uqXnON','2BxTMFX','create'];a312_0x3396=function(){return _0x4b22e9;};return a312_0x3396();}'use strict';var __importDefault=this&&this[a312_0x597b61(0xcf)]||function(_0x2069dc){const _0x37e265=a312_0x597b61;return _0x2069dc&&_0x2069dc[_0x37e265(0xe8)]?_0x2069dc:{'default':_0x2069dc};};Object[a312_0x597b61(0xdb)](exports,'__esModule',{'value':!![]}),exports[a312_0x597b61(0xec)]=void 0x0;const jszip_1=__importDefault(require(a312_0x597b61(0xc8))),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require(a312_0x597b61(0xcc));function a312_0x4727(_0x1a1fbd,_0x4d01b8){const _0x832949=a312_0x3396();return a312_0x4727=function(_0x1993d9,_0x258759){_0x1993d9=_0x1993d9-0xc6;let _0x3396d5=_0x832949[_0x1993d9];return _0x3396d5;},a312_0x4727(_0x1a1fbd,_0x4d01b8);}class ZipCreatorRollback{constructor({deploymentResults:_0x5aad31,backup:_0x4dd928,rollbackName:_0x52d990}){this['_deploymentResults']=_0x5aad31,this['_rollbackName']=_0x52d990,this['_backup']=_0x4dd928;}async[a312_0x597b61(0xd6)](){const _0x4ef1ef=a312_0x597b61;this['_backupZip']=new jszip_1[(_0x4ef1ef(0xe4))](),this['_zip']=new jszip_1['default'](),await this[_0x4ef1ef(0xda)]['loadAsync'](this[_0x4ef1ef(0xe1)],{'base64':!![]});}[a312_0x597b61(0xeb)](){const _0x185245=a312_0x597b61;this[_0x185245(0xd2)][_0x185245(0xe3)]((_0x40da9a,_0x558387)=>_0x40da9a[_0x185245(0xdf)]<_0x558387['stepName']?0x1:_0x558387[_0x185245(0xdf)]<_0x40da9a[_0x185245(0xdf)]?-0x1:0x0);}async[a312_0x597b61(0xcb)](){const _0x3d4c1b=a312_0x597b61;for(const _0x3db43a of this[_0x3d4c1b(0xd2)]){const _0x191bc3=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback'][_0x3d4c1b(0xc6)]({'deploymentResult':_0x3db43a,'backupZip':this[_0x3d4c1b(0xda)]})[_0x3d4c1b(0xc6)](),{type:_0x29cab4,name:_0x3b1b31}=_0x3db43a;this[_0x3d4c1b(0xea)]['file'](_0x29cab4+'.'+_0x3b1b31+_0x3d4c1b(0xdd),_0x191bc3);}const _0x26ccd6=new xml2js_1[(_0x3d4c1b(0xce))]({'headless':!![]}),_0x4c37f5={'vaultpackage':{'$':{'xmlns':_0x3d4c1b(0xc9)},'name':this['_rollbackName'],'source':{'vault':undefined,'author':_0x3d4c1b(0xde)},'packagetype':_0x3d4c1b(0xed),'summary':'Rollback','description':_0x3d4c1b(0xd3)}};this[_0x3d4c1b(0xea)][_0x3d4c1b(0xca)](_0x3d4c1b(0xe9),_0x26ccd6['buildObject'](_0x4c37f5));}async[a312_0x597b61(0xc6)](){const _0x3deb15=a312_0x597b61;return await this[_0x3deb15(0xd6)](),this[_0x3deb15(0xeb)](),await this[_0x3deb15(0xcb)](),this[_0x3deb15(0xea)][_0x3deb15(0xef)]({'type':'nodebuffer'});}}exports[a312_0x597b61(0xec)]=ZipCreatorRollback;