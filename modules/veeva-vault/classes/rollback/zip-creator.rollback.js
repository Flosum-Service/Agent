const a335_0x24bf27=a335_0x534e;(function(_0x1d7b74,_0x40dde6){const _0x300091=a335_0x534e,_0x5ce909=_0x1d7b74();while(!![]){try{const _0x3606ae=-parseInt(_0x300091(0x196))/0x1+parseInt(_0x300091(0x19c))/0x2+-parseInt(_0x300091(0x19e))/0x3*(parseInt(_0x300091(0x194))/0x4)+-parseInt(_0x300091(0x19d))/0x5*(parseInt(_0x300091(0x188))/0x6)+parseInt(_0x300091(0x184))/0x7*(parseInt(_0x300091(0x181))/0x8)+parseInt(_0x300091(0x1a2))/0x9+-parseInt(_0x300091(0x19a))/0xa;if(_0x3606ae===_0x40dde6)break;else _0x5ce909['push'](_0x5ce909['shift']());}catch(_0x438c18){_0x5ce909['push'](_0x5ce909['shift']());}}}(a335_0x4e00,0xa943b));const a335_0x5588a1=(function(){let _0x3b2244=!![];return function(_0x256d77,_0x49d104){const _0x1e1c24=_0x3b2244?function(){const _0x2f6ef3=a335_0x534e;if(_0x49d104){const _0x26a81f=_0x49d104[_0x2f6ef3(0x199)](_0x256d77,arguments);return _0x49d104=null,_0x26a81f;}}:function(){};return _0x3b2244=![],_0x1e1c24;};}()),a335_0x9e7abd=a335_0x5588a1(this,function(){const _0x28edca=a335_0x534e;return a335_0x9e7abd[_0x28edca(0x191)]()[_0x28edca(0x1a4)](_0x28edca(0x17d))[_0x28edca(0x191)]()[_0x28edca(0x186)](a335_0x9e7abd)[_0x28edca(0x1a4)](_0x28edca(0x17d));});a335_0x9e7abd();'use strict';function a335_0x4e00(){const _0x496c6=['apply','2169510RhteiA','_rollbackName','1425022XVdwPQ','15775ezrzDF','531XqBwvq','file','__importDefault','buildObject','4533957ihNKgS','create','search','jszip','createZips','(((.+)+)+)+$','_zip','ZipCreatorRollback','Builder','8RLidge','__esModule','_backup','5546149VyYbGZ','./body-creator/factory.body-creator.rollback','constructor','null','546BhKgWV','generateAsync','_backupZip','Rollback','Flosum','stepName','vaultpackage.xml','defineProperty','default','toString','nodebuffer','migration__v','1132ocBGYZ','sortDeploymentResults','761137pJCLYe','loadAsync','_deploymentResults'];a335_0x4e00=function(){return _0x496c6;};return a335_0x4e00();}var __importDefault=this&&this[a335_0x24bf27(0x1a0)]||function(_0x3e4e2d){const _0x5ae980=a335_0x24bf27;return _0x3e4e2d&&_0x3e4e2d[_0x5ae980(0x182)]?_0x3e4e2d:{'default':_0x3e4e2d};};function a335_0x534e(_0x514c84,_0x5b1d26){const _0x3c5e8c=a335_0x4e00();return a335_0x534e=function(_0x9e7abd,_0x5588a1){_0x9e7abd=_0x9e7abd-0x17b;let _0x4e007c=_0x3c5e8c[_0x9e7abd];return _0x4e007c;},a335_0x534e(_0x514c84,_0x5b1d26);}Object[a335_0x24bf27(0x18f)](exports,a335_0x24bf27(0x182),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;const jszip_1=__importDefault(require(a335_0x24bf27(0x17b))),factory_body_creator_rollback_1=require(a335_0x24bf27(0x185)),xml2js_1=require('xml2js');class ZipCreatorRollback{constructor({deploymentResults:_0x22f576,backup:_0xbfec3e,rollbackName:_0x24ef43}){const _0x4f5abc=a335_0x24bf27;this[_0x4f5abc(0x198)]=_0x22f576,this[_0x4f5abc(0x19b)]=_0x24ef43,this[_0x4f5abc(0x183)]=_0xbfec3e;}async[a335_0x24bf27(0x17c)](){const _0x30ef47=a335_0x24bf27;this[_0x30ef47(0x18a)]=new jszip_1[(_0x30ef47(0x190))](),this[_0x30ef47(0x17e)]=new jszip_1[(_0x30ef47(0x190))](),await this['_backupZip'][_0x30ef47(0x197)](this['_backup'],{'base64':!![]});}['sortDeploymentResults'](){const _0x32a378=a335_0x24bf27;this[_0x32a378(0x198)]['sort']((_0x29bd6f,_0x275d1)=>_0x29bd6f[_0x32a378(0x18d)]<_0x275d1[_0x32a378(0x18d)]?0x1:_0x275d1[_0x32a378(0x18d)]<_0x29bd6f[_0x32a378(0x18d)]?-0x1:0x0);}async['fillZip'](){const _0x115e1e=a335_0x24bf27;for(const _0x72a08f of this['_deploymentResults']){const _0x4b0456=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback'][_0x115e1e(0x1a3)]({'deploymentResult':_0x72a08f,'backupZip':this['_backupZip']})['create'](),{type:_0x1984c1,name:_0x3f9238}=_0x72a08f;this[_0x115e1e(0x17e)]['file'](_0x1984c1+'.'+_0x3f9238+'.mdl',_0x4b0456);}const _0x1d76ef=new xml2js_1[(_0x115e1e(0x180))]({'headless':!![]}),_0x5cbd51={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this[_0x115e1e(0x19b)],'source':{'vault':undefined,'author':_0x115e1e(0x18c)},'packagetype':_0x115e1e(0x193),'summary':_0x115e1e(0x18b),'description':_0x115e1e(0x187)}};this['_zip'][_0x115e1e(0x19f)](_0x115e1e(0x18e),_0x1d76ef[_0x115e1e(0x1a1)](_0x5cbd51));}async['create'](){const _0x56f9d1=a335_0x24bf27;return await this['createZips'](),this[_0x56f9d1(0x195)](),await this['fillZip'](),this[_0x56f9d1(0x17e)][_0x56f9d1(0x189)]({'type':_0x56f9d1(0x192)});}}exports[a335_0x24bf27(0x17f)]=ZipCreatorRollback;