const a367_0x38fa84=a367_0x1fa2;(function(_0x24127b,_0x4a4b95){const _0x2c3e6a=a367_0x1fa2,_0x23cb38=_0x24127b();while(!![]){try{const _0x48a08d=parseInt(_0x2c3e6a(0xb2))/0x1*(parseInt(_0x2c3e6a(0xac))/0x2)+-parseInt(_0x2c3e6a(0xc4))/0x3*(parseInt(_0x2c3e6a(0xb7))/0x4)+parseInt(_0x2c3e6a(0xbd))/0x5*(-parseInt(_0x2c3e6a(0xb0))/0x6)+-parseInt(_0x2c3e6a(0xc2))/0x7+-parseInt(_0x2c3e6a(0xbb))/0x8*(parseInt(_0x2c3e6a(0xbf))/0x9)+parseInt(_0x2c3e6a(0xae))/0xa*(parseInt(_0x2c3e6a(0xaf))/0xb)+parseInt(_0x2c3e6a(0xb6))/0xc*(parseInt(_0x2c3e6a(0xc3))/0xd);if(_0x48a08d===_0x4a4b95)break;else _0x23cb38['push'](_0x23cb38['shift']());}catch(_0x4cdd65){_0x23cb38['push'](_0x23cb38['shift']());}}}(a367_0x5c1f,0xdb20c));const a367_0x26c68c=(function(){let _0x289be3=!![];return function(_0x451fc4,_0x54a442){const _0x4bd32a=_0x289be3?function(){const _0x2c8aa5=a367_0x1fa2;if(_0x54a442){const _0x44833f=_0x54a442[_0x2c8aa5(0xc7)](_0x451fc4,arguments);return _0x54a442=null,_0x44833f;}}:function(){};return _0x289be3=![],_0x4bd32a;};}()),a367_0x4525ad=a367_0x26c68c(this,function(){const _0x2ace73=a367_0x1fa2;return a367_0x4525ad['toString']()[_0x2ace73(0xb4)]('(((.+)+)+)+$')['toString']()[_0x2ace73(0xc8)](a367_0x4525ad)[_0x2ace73(0xb4)]('(((.+)+)+)+$');});a367_0x4525ad();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x19ea00){const _0x459aed=a367_0x1fa2;return _0x19ea00&&_0x19ea00[_0x459aed(0xa9)]?_0x19ea00:{'default':_0x19ea00};};Object['defineProperty'](exports,a367_0x38fa84(0xa9),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;function a367_0x5c1f(){const _0x8adb08=['search','sortDeploymentResults','6769140JIVxNU','4ruIhlK','_zip','jszip','migration__v','8663016mrNkGE','_backupZip','80zLmrij','null','9SrEtsk','createZips','Builder','11981550EwZRCu','91witXsJ','4720434GzueBM','./body-creator/factory.body-creator.rollback','create','apply','constructor','vaultpackage.xml','sort','.mdl','Rollback','file','stepName','nodebuffer','__esModule','_rollbackName','default','2503834ZPVxqE','_deploymentResults','16046990wwWqMx','11wmBHdn','577398pkwwoG','https://veevavault.com/','1Fzqkbq','generateAsync'];a367_0x5c1f=function(){return _0x8adb08;};return a367_0x5c1f();}const jszip_1=__importDefault(require(a367_0x38fa84(0xb9))),factory_body_creator_rollback_1=require(a367_0x38fa84(0xc5)),xml2js_1=require('xml2js');class ZipCreatorRollback{constructor({deploymentResults:_0x668206,backup:_0x5276b8,rollbackName:_0x3597d2}){const _0x318147=a367_0x38fa84;this[_0x318147(0xad)]=_0x668206,this[_0x318147(0xaa)]=_0x3597d2,this['_backup']=_0x5276b8;}async[a367_0x38fa84(0xc0)](){const _0x24468e=a367_0x38fa84;this[_0x24468e(0xbc)]=new jszip_1[(_0x24468e(0xab))](),this[_0x24468e(0xb8)]=new jszip_1[(_0x24468e(0xab))](),await this[_0x24468e(0xbc)]['loadAsync'](this['_backup'],{'base64':!![]});}['sortDeploymentResults'](){const _0x319a14=a367_0x38fa84;this[_0x319a14(0xad)][_0x319a14(0xca)]((_0x1dc67b,_0x4b35c8)=>_0x1dc67b['stepName']<_0x4b35c8[_0x319a14(0xa7)]?0x1:_0x4b35c8[_0x319a14(0xa7)]<_0x1dc67b[_0x319a14(0xa7)]?-0x1:0x0);}async['fillZip'](){const _0x57721e=a367_0x38fa84;for(const _0x435092 of this[_0x57721e(0xad)]){const _0x14e20d=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback'][_0x57721e(0xc6)]({'deploymentResult':_0x435092,'backupZip':this['_backupZip']})[_0x57721e(0xc6)](),{type:_0x5b4c7f,name:_0x30fe1d}=_0x435092;this[_0x57721e(0xb8)][_0x57721e(0xa6)](_0x5b4c7f+'.'+_0x30fe1d+_0x57721e(0xcb),_0x14e20d);}const _0x514483=new xml2js_1[(_0x57721e(0xc1))]({'headless':!![]}),_0x4ab769={'vaultpackage':{'$':{'xmlns':_0x57721e(0xb1)},'name':this[_0x57721e(0xaa)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x57721e(0xba),'summary':_0x57721e(0xcc),'description':_0x57721e(0xbe)}};this[_0x57721e(0xb8)][_0x57721e(0xa6)](_0x57721e(0xc9),_0x514483['buildObject'](_0x4ab769));}async['create'](){const _0x3174c9=a367_0x38fa84;return await this[_0x3174c9(0xc0)](),this[_0x3174c9(0xb5)](),await this['fillZip'](),this[_0x3174c9(0xb8)][_0x3174c9(0xb3)]({'type':_0x3174c9(0xa8)});}}function a367_0x1fa2(_0x6de117,_0xd017b5){const _0x1af3a0=a367_0x5c1f();return a367_0x1fa2=function(_0x4525ad,_0x26c68c){_0x4525ad=_0x4525ad-0xa6;let _0x5c1fb2=_0x1af3a0[_0x4525ad];return _0x5c1fb2;},a367_0x1fa2(_0x6de117,_0xd017b5);}exports['ZipCreatorRollback']=ZipCreatorRollback;