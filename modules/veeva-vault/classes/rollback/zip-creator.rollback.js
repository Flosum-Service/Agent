const a334_0x44413d=a334_0x26a6;(function(_0x1c9dab,_0x1105c7){const _0x1731dc=a334_0x26a6,_0x27a528=_0x1c9dab();while(!![]){try{const _0x6f69c4=-parseInt(_0x1731dc(0x11d))/0x1*(-parseInt(_0x1731dc(0x10a))/0x2)+parseInt(_0x1731dc(0x104))/0x3*(parseInt(_0x1731dc(0x11c))/0x4)+-parseInt(_0x1731dc(0x10b))/0x5+-parseInt(_0x1731dc(0x108))/0x6*(parseInt(_0x1731dc(0x123))/0x7)+parseInt(_0x1731dc(0x10f))/0x8*(parseInt(_0x1731dc(0x107))/0x9)+parseInt(_0x1731dc(0x10d))/0xa+parseInt(_0x1731dc(0x113))/0xb*(parseInt(_0x1731dc(0x12a))/0xc);if(_0x6f69c4===_0x1105c7)break;else _0x27a528['push'](_0x27a528['shift']());}catch(_0x30eb80){_0x27a528['push'](_0x27a528['shift']());}}}(a334_0x2490,0x2f8b5));const a334_0x16a8ef=(function(){let _0x340c66=!![];return function(_0x197cfc,_0x338522){const _0x146a77=_0x340c66?function(){if(_0x338522){const _0x259242=_0x338522['apply'](_0x197cfc,arguments);return _0x338522=null,_0x259242;}}:function(){};return _0x340c66=![],_0x146a77;};}()),a334_0x5ad059=a334_0x16a8ef(this,function(){const _0x275a58=a334_0x26a6;return a334_0x5ad059['toString']()['search']('(((.+)+)+)+$')[_0x275a58(0x112)]()[_0x275a58(0x115)](a334_0x5ad059)[_0x275a58(0x11e)](_0x275a58(0x11b));});a334_0x5ad059();'use strict';var __importDefault=this&&this[a334_0x44413d(0x121)]||function(_0x2492ae){return _0x2492ae&&_0x2492ae['__esModule']?_0x2492ae:{'default':_0x2492ae};};Object[a334_0x44413d(0x12b)](exports,a334_0x44413d(0x106),{'value':!![]}),exports[a334_0x44413d(0x10c)]=void 0x0;const jszip_1=__importDefault(require('jszip')),factory_body_creator_rollback_1=require(a334_0x44413d(0x12c)),xml2js_1=require(a334_0x44413d(0x114));class ZipCreatorRollback{constructor({deploymentResults:_0x263f3b,backup:_0x5aba93,rollbackName:_0x347ca4}){const _0x6d4128=a334_0x44413d;this['_deploymentResults']=_0x263f3b,this[_0x6d4128(0x11f)]=_0x347ca4,this['_backup']=_0x5aba93;}async[a334_0x44413d(0x116)](){const _0x1907d2=a334_0x44413d;this[_0x1907d2(0x11a)]=new jszip_1[(_0x1907d2(0x125))](),this[_0x1907d2(0x120)]=new jszip_1[(_0x1907d2(0x125))](),await this[_0x1907d2(0x11a)][_0x1907d2(0x127)](this[_0x1907d2(0x119)],{'base64':!![]});}[a334_0x44413d(0x124)](){const _0x172a7f=a334_0x44413d;this['_deploymentResults'][_0x172a7f(0x105)]((_0x1010be,_0x325f46)=>_0x1010be[_0x172a7f(0x118)]<_0x325f46[_0x172a7f(0x118)]?0x1:_0x325f46['stepName']<_0x1010be[_0x172a7f(0x118)]?-0x1:0x0);}async[a334_0x44413d(0x111)](){const _0x34dbc3=a334_0x44413d;for(const _0xcf36c8 of this['_deploymentResults']){const _0x266e68=await factory_body_creator_rollback_1[_0x34dbc3(0x126)][_0x34dbc3(0x128)]({'deploymentResult':_0xcf36c8,'backupZip':this[_0x34dbc3(0x11a)]})[_0x34dbc3(0x128)](),{type:_0x3de4d3,name:_0xf3009}=_0xcf36c8;this[_0x34dbc3(0x120)][_0x34dbc3(0x109)](_0x3de4d3+'.'+_0xf3009+_0x34dbc3(0x10e),_0x266e68);}const _0x1489f8=new xml2js_1['Builder']({'headless':!![]}),_0x2d1389={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this[_0x34dbc3(0x11f)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':'migration__v','summary':_0x34dbc3(0x117),'description':_0x34dbc3(0x122)}};this[_0x34dbc3(0x120)][_0x34dbc3(0x109)](_0x34dbc3(0x12d),_0x1489f8[_0x34dbc3(0x129)](_0x2d1389));}async['create'](){const _0x786fcd=a334_0x44413d;return await this[_0x786fcd(0x116)](),this['sortDeploymentResults'](),await this['fillZip'](),this[_0x786fcd(0x120)][_0x786fcd(0x110)]({'type':'nodebuffer'});}}function a334_0x26a6(_0x36c128,_0x50fc40){const _0x2ca004=a334_0x2490();return a334_0x26a6=function(_0x5ad059,_0x16a8ef){_0x5ad059=_0x5ad059-0x104;let _0x2490cd=_0x2ca004[_0x5ad059];return _0x2490cd;},a334_0x26a6(_0x36c128,_0x50fc40);}function a334_0x2490(){const _0x12dfd8=['default','FactoryBodyCreatorRollback','loadAsync','create','buildObject','254112XToODC','defineProperty','./body-creator/factory.body-creator.rollback','vaultpackage.xml','7392yjYQtt','sort','__esModule','9kQnHmp','6eyHyHX','file','34eCToaJ','855670apzbfC','ZipCreatorRollback','3211300HSCXWC','.mdl','378776ywjECK','generateAsync','fillZip','toString','66KNPCjj','xml2js','constructor','createZips','Rollback','stepName','_backup','_backupZip','(((.+)+)+)+$','16IBfLMh','13027Gwnriy','search','_rollbackName','_zip','__importDefault','null','2526811sjkhSR','sortDeploymentResults'];a334_0x2490=function(){return _0x12dfd8;};return a334_0x2490();}exports['ZipCreatorRollback']=ZipCreatorRollback;