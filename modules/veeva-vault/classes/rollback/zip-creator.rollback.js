function a351_0x1bd1(_0x4d9f6a,_0x31950c){const _0x1087ce=a351_0x4640();return a351_0x1bd1=function(_0x4c1320,_0x23e92f){_0x4c1320=_0x4c1320-0x151;let _0x46402d=_0x1087ce[_0x4c1320];return _0x46402d;},a351_0x1bd1(_0x4d9f6a,_0x31950c);}const a351_0x1b2e3c=a351_0x1bd1;(function(_0x1aa41a,_0x32a1d5){const _0x204356=a351_0x1bd1,_0x347dc5=_0x1aa41a();while(!![]){try{const _0x564854=parseInt(_0x204356(0x154))/0x1*(-parseInt(_0x204356(0x152))/0x2)+-parseInt(_0x204356(0x155))/0x3*(parseInt(_0x204356(0x15a))/0x4)+parseInt(_0x204356(0x172))/0x5*(-parseInt(_0x204356(0x156))/0x6)+-parseInt(_0x204356(0x153))/0x7*(parseInt(_0x204356(0x171))/0x8)+-parseInt(_0x204356(0x151))/0x9+-parseInt(_0x204356(0x17c))/0xa*(-parseInt(_0x204356(0x15b))/0xb)+parseInt(_0x204356(0x179))/0xc;if(_0x564854===_0x32a1d5)break;else _0x347dc5['push'](_0x347dc5['shift']());}catch(_0x3aedbd){_0x347dc5['push'](_0x347dc5['shift']());}}}(a351_0x4640,0x964f1));const a351_0x23e92f=(function(){let _0x1c029c=!![];return function(_0x36dea5,_0x26c6af){const _0x108eb1=_0x1c029c?function(){const _0x41fc2e=a351_0x1bd1;if(_0x26c6af){const _0x1fd12d=_0x26c6af[_0x41fc2e(0x16f)](_0x36dea5,arguments);return _0x26c6af=null,_0x1fd12d;}}:function(){};return _0x1c029c=![],_0x108eb1;};}()),a351_0x4c1320=a351_0x23e92f(this,function(){const _0x19dccc=a351_0x1bd1;return a351_0x4c1320[_0x19dccc(0x164)]()[_0x19dccc(0x175)](_0x19dccc(0x17b))[_0x19dccc(0x164)]()[_0x19dccc(0x15d)](a351_0x4c1320)['search']('(((.+)+)+)+$');});a351_0x4c1320();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3a6c46){const _0x50feb6=a351_0x1bd1;return _0x3a6c46&&_0x3a6c46[_0x50feb6(0x15c)]?_0x3a6c46:{'default':_0x3a6c46};};Object[a351_0x1b2e3c(0x16d)](exports,a351_0x1b2e3c(0x15c),{'value':!![]}),exports[a351_0x1b2e3c(0x165)]=void 0x0;function a351_0x4640(){const _0x1f96e3=['toString','ZipCreatorRollback','default','createZips','loadAsync','generateAsync','https://veevavault.com/','_zip','_backupZip','defineProperty','Builder','apply','fillZip','393512tLIQau','260yNfuOV','xml2js','Flosum','search','null','nodebuffer','FactoryBodyCreatorRollback','42982212zhyEEK','create','(((.+)+)+)+$','6019500MrDarM','3271041lYOUVu','2DwLhcS','91GoAjOa','1196425XboOcB','3PWaaUE','55998gJHSHP','sort','_backup','jszip','3533956UlVdzv','11IDugAp','__esModule','constructor','_rollbackName','./body-creator/factory.body-creator.rollback','file','stepName','.mdl','_deploymentResults'];a351_0x4640=function(){return _0x1f96e3;};return a351_0x4640();}const jszip_1=__importDefault(require(a351_0x1b2e3c(0x159))),factory_body_creator_rollback_1=require(a351_0x1b2e3c(0x15f)),xml2js_1=require(a351_0x1b2e3c(0x173));class ZipCreatorRollback{constructor({deploymentResults:_0x1adab8,backup:_0x44fe7b,rollbackName:_0x30808f}){const _0x3a7194=a351_0x1b2e3c;this[_0x3a7194(0x163)]=_0x1adab8,this[_0x3a7194(0x15e)]=_0x30808f,this['_backup']=_0x44fe7b;}async[a351_0x1b2e3c(0x167)](){const _0x1c0f8c=a351_0x1b2e3c;this[_0x1c0f8c(0x16c)]=new jszip_1[(_0x1c0f8c(0x166))](),this[_0x1c0f8c(0x16b)]=new jszip_1['default'](),await this[_0x1c0f8c(0x16c)][_0x1c0f8c(0x168)](this[_0x1c0f8c(0x158)],{'base64':!![]});}['sortDeploymentResults'](){const _0x5d0416=a351_0x1b2e3c;this['_deploymentResults'][_0x5d0416(0x157)]((_0x4b0ca6,_0x56f520)=>_0x4b0ca6[_0x5d0416(0x161)]<_0x56f520[_0x5d0416(0x161)]?0x1:_0x56f520[_0x5d0416(0x161)]<_0x4b0ca6[_0x5d0416(0x161)]?-0x1:0x0);}async[a351_0x1b2e3c(0x170)](){const _0x221a14=a351_0x1b2e3c;for(const _0x4a409a of this[_0x221a14(0x163)]){const _0x4f76af=await factory_body_creator_rollback_1[_0x221a14(0x178)][_0x221a14(0x17a)]({'deploymentResult':_0x4a409a,'backupZip':this['_backupZip']})[_0x221a14(0x17a)](),{type:_0x5d3549,name:_0x562cf4}=_0x4a409a;this[_0x221a14(0x16b)]['file'](_0x5d3549+'.'+_0x562cf4+_0x221a14(0x162),_0x4f76af);}const _0x430a17=new xml2js_1[(_0x221a14(0x16e))]({'headless':!![]}),_0x31bfaf={'vaultpackage':{'$':{'xmlns':_0x221a14(0x16a)},'name':this['_rollbackName'],'source':{'vault':undefined,'author':_0x221a14(0x174)},'packagetype':'migration__v','summary':'Rollback','description':_0x221a14(0x176)}};this[_0x221a14(0x16b)][_0x221a14(0x160)]('vaultpackage.xml',_0x430a17['buildObject'](_0x31bfaf));}async['create'](){const _0xf4fa2e=a351_0x1b2e3c;return await this[_0xf4fa2e(0x167)](),this['sortDeploymentResults'](),await this[_0xf4fa2e(0x170)](),this[_0xf4fa2e(0x16b)][_0xf4fa2e(0x169)]({'type':_0xf4fa2e(0x177)});}}exports[a351_0x1b2e3c(0x165)]=ZipCreatorRollback;