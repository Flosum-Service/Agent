const a350_0x5a65ab=a350_0x5a90;(function(_0x161fef,_0x3bcd13){const _0x298c7f=a350_0x5a90,_0x3083d0=_0x161fef();while(!![]){try{const _0x5585c1=parseInt(_0x298c7f(0x172))/0x1*(parseInt(_0x298c7f(0x192))/0x2)+-parseInt(_0x298c7f(0x17c))/0x3+parseInt(_0x298c7f(0x16a))/0x4*(-parseInt(_0x298c7f(0x17e))/0x5)+-parseInt(_0x298c7f(0x170))/0x6+-parseInt(_0x298c7f(0x180))/0x7*(parseInt(_0x298c7f(0x188))/0x8)+-parseInt(_0x298c7f(0x184))/0x9+-parseInt(_0x298c7f(0x16b))/0xa*(-parseInt(_0x298c7f(0x179))/0xb);if(_0x5585c1===_0x3bcd13)break;else _0x3083d0['push'](_0x3083d0['shift']());}catch(_0x33b0b6){_0x3083d0['push'](_0x3083d0['shift']());}}}(a350_0x21fa,0x5c95e));const a350_0x45be0e=(function(){let _0x2a4a2d=!![];return function(_0x38ba6c,_0xebdc15){const _0x1b76f7=_0x2a4a2d?function(){if(_0xebdc15){const _0x3f3d68=_0xebdc15['apply'](_0x38ba6c,arguments);return _0xebdc15=null,_0x3f3d68;}}:function(){};return _0x2a4a2d=![],_0x1b76f7;};}()),a350_0x32a14b=a350_0x45be0e(this,function(){const _0x393d85=a350_0x5a90;return a350_0x32a14b[_0x393d85(0x18e)]()[_0x393d85(0x174)](_0x393d85(0x18b))['toString']()[_0x393d85(0x16d)](a350_0x32a14b)['search'](_0x393d85(0x18b));});a350_0x32a14b();'use strict';var __importDefault=this&&this['__importDefault']||function(_0xd72eda){const _0x1dfff7=a350_0x5a90;return _0xd72eda&&_0xd72eda[_0x1dfff7(0x18f)]?_0xd72eda:{'default':_0xd72eda};};function a350_0x5a90(_0x38a721,_0x2aae9b){const _0x1f924f=a350_0x21fa();return a350_0x5a90=function(_0x32a14b,_0x45be0e){_0x32a14b=_0x32a14b-0x16a;let _0x21fa96=_0x1f924f[_0x32a14b];return _0x21fa96;},a350_0x5a90(_0x38a721,_0x2aae9b);}Object[a350_0x5a65ab(0x181)](exports,a350_0x5a65ab(0x18f),{'value':!![]}),exports[a350_0x5a65ab(0x193)]=void 0x0;const jszip_1=__importDefault(require(a350_0x5a65ab(0x189))),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require(a350_0x5a65ab(0x16c));function a350_0x21fa(){const _0x5f2b87=['5700651Gmszpq','default','FactoryBodyCreatorRollback','1325025clXWQS','createZips','5IZXnmR','buildObject','56jkNyPr','defineProperty','Builder','https://veevavault.com/','1308231UAnWvP','Flosum','stepName','sortDeploymentResults','163288LbbYLp','jszip','loadAsync','(((.+)+)+)+$','null','_backupZip','toString','__esModule','_deploymentResults','.mdl','22GAdZVF','ZipCreatorRollback','2911532bzHxhf','40oieQVN','xml2js','constructor','generateAsync','file','3595056gjceGr','_zip','34877ceyvIi','vaultpackage.xml','search','Rollback','create','fillZip','migration__v'];a350_0x21fa=function(){return _0x5f2b87;};return a350_0x21fa();}class ZipCreatorRollback{constructor({deploymentResults:_0xb040dd,backup:_0x15cc1b,rollbackName:_0x3143e1}){const _0x449ecc=a350_0x5a65ab;this[_0x449ecc(0x190)]=_0xb040dd,this['_rollbackName']=_0x3143e1,this['_backup']=_0x15cc1b;}async[a350_0x5a65ab(0x17d)](){const _0x1b22f3=a350_0x5a65ab;this[_0x1b22f3(0x18d)]=new jszip_1[(_0x1b22f3(0x17a))](),this['_zip']=new jszip_1[(_0x1b22f3(0x17a))](),await this['_backupZip'][_0x1b22f3(0x18a)](this['_backup'],{'base64':!![]});}[a350_0x5a65ab(0x187)](){const _0x37a9f=a350_0x5a65ab;this[_0x37a9f(0x190)]['sort']((_0x52d986,_0x2b9c84)=>_0x52d986['stepName']<_0x2b9c84[_0x37a9f(0x186)]?0x1:_0x2b9c84[_0x37a9f(0x186)]<_0x52d986[_0x37a9f(0x186)]?-0x1:0x0);}async[a350_0x5a65ab(0x177)](){const _0x2b8dab=a350_0x5a65ab;for(const _0x47272d of this[_0x2b8dab(0x190)]){const _0x1beb15=await factory_body_creator_rollback_1[_0x2b8dab(0x17b)][_0x2b8dab(0x176)]({'deploymentResult':_0x47272d,'backupZip':this[_0x2b8dab(0x18d)]})[_0x2b8dab(0x176)](),{type:_0xa3af8,name:_0x4b860c}=_0x47272d;this['_zip']['file'](_0xa3af8+'.'+_0x4b860c+_0x2b8dab(0x191),_0x1beb15);}const _0x1f1075=new xml2js_1[(_0x2b8dab(0x182))]({'headless':!![]}),_0x4a0de7={'vaultpackage':{'$':{'xmlns':_0x2b8dab(0x183)},'name':this['_rollbackName'],'source':{'vault':undefined,'author':_0x2b8dab(0x185)},'packagetype':_0x2b8dab(0x178),'summary':_0x2b8dab(0x175),'description':_0x2b8dab(0x18c)}};this[_0x2b8dab(0x171)][_0x2b8dab(0x16f)](_0x2b8dab(0x173),_0x1f1075[_0x2b8dab(0x17f)](_0x4a0de7));}async[a350_0x5a65ab(0x176)](){const _0x59b28f=a350_0x5a65ab;return await this[_0x59b28f(0x17d)](),this[_0x59b28f(0x187)](),await this[_0x59b28f(0x177)](),this['_zip'][_0x59b28f(0x16e)]({'type':'nodebuffer'});}}exports[a350_0x5a65ab(0x193)]=ZipCreatorRollback;