const a379_0x2ddd20=a379_0x487c;(function(_0x190347,_0x153409){const _0x20858f=a379_0x487c,_0x3a411a=_0x190347();while(!![]){try{const _0x3e48e0=-parseInt(_0x20858f(0xed))/0x1+-parseInt(_0x20858f(0xdd))/0x2*(parseInt(_0x20858f(0xe3))/0x3)+-parseInt(_0x20858f(0xd6))/0x4*(parseInt(_0x20858f(0xec))/0x5)+parseInt(_0x20858f(0xdb))/0x6+parseInt(_0x20858f(0xfa))/0x7*(parseInt(_0x20858f(0xda))/0x8)+parseInt(_0x20858f(0xd4))/0x9*(-parseInt(_0x20858f(0xf0))/0xa)+-parseInt(_0x20858f(0xd5))/0xb*(-parseInt(_0x20858f(0xe6))/0xc);if(_0x3e48e0===_0x153409)break;else _0x3a411a['push'](_0x3a411a['shift']());}catch(_0xb93d99){_0x3a411a['push'](_0x3a411a['shift']());}}}(a379_0x3099,0x462fa));const a379_0x3318a0=(function(){let _0x4f06d2=!![];return function(_0x10e00f,_0x2b1dcd){const _0x231c4f=_0x4f06d2?function(){const _0x4a2447=a379_0x487c;if(_0x2b1dcd){const _0x4a606c=_0x2b1dcd[_0x4a2447(0xe0)](_0x10e00f,arguments);return _0x2b1dcd=null,_0x4a606c;}}:function(){};return _0x4f06d2=![],_0x231c4f;};}()),a379_0x3d1e25=a379_0x3318a0(this,function(){const _0x524cce=a379_0x487c;return a379_0x3d1e25[_0x524cce(0xf7)]()['search'](_0x524cce(0xf2))[_0x524cce(0xf7)]()[_0x524cce(0xd8)](a379_0x3d1e25)[_0x524cce(0xfb)](_0x524cce(0xf2));});function a379_0x487c(_0x47ef9d,_0x45a64e){const _0x4f1869=a379_0x3099();return a379_0x487c=function(_0x3d1e25,_0x3318a0){_0x3d1e25=_0x3d1e25-0xd2;let _0x3099b6=_0x4f1869[_0x3d1e25];return _0x3099b6;},a379_0x487c(_0x47ef9d,_0x45a64e);}a379_0x3d1e25();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x30cd6b){const _0xddaedb=a379_0x487c;return _0x30cd6b&&_0x30cd6b[_0xddaedb(0xd9)]?_0x30cd6b:{'default':_0x30cd6b};};Object['defineProperty'](exports,a379_0x2ddd20(0xd9),{'value':!![]}),exports[a379_0x2ddd20(0xea)]=void 0x0;const jszip_1=__importDefault(require('jszip')),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require(a379_0x2ddd20(0xe7));class ZipCreatorRollback{constructor({deploymentResults:_0x58e497,backup:_0x18d7ac,rollbackName:_0x41d878}){const _0x3d6062=a379_0x2ddd20;this['_deploymentResults']=_0x58e497,this[_0x3d6062(0xeb)]=_0x41d878,this[_0x3d6062(0xdf)]=_0x18d7ac;}async['createZips'](){const _0x417301=a379_0x2ddd20;this['_backupZip']=new jszip_1[(_0x417301(0xe9))](),this[_0x417301(0xef)]=new jszip_1[(_0x417301(0xe9))](),await this[_0x417301(0xf9)][_0x417301(0xf6)](this[_0x417301(0xdf)],{'base64':!![]});}['sortDeploymentResults'](){const _0x2bcef7=a379_0x2ddd20;this[_0x2bcef7(0xd7)][_0x2bcef7(0xdc)]((_0xb9bd4d,_0x5dbbee)=>_0xb9bd4d[_0x2bcef7(0xd3)]<_0x5dbbee['stepName']?0x1:_0x5dbbee['stepName']<_0xb9bd4d['stepName']?-0x1:0x0);}async[a379_0x2ddd20(0xd2)](){const _0x58a7b8=a379_0x2ddd20;for(const _0x252991 of this[_0x58a7b8(0xd7)]){const _0x5ab2fd=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback']['create']({'deploymentResult':_0x252991,'backupZip':this['_backupZip']})[_0x58a7b8(0xf4)](),{type:_0x3229bf,name:_0x500092}=_0x252991;this[_0x58a7b8(0xef)][_0x58a7b8(0xe5)](_0x3229bf+'.'+_0x500092+_0x58a7b8(0xe4),_0x5ab2fd);}const _0x1ee527=new xml2js_1['Builder']({'headless':!![]}),_0x10431c={'vaultpackage':{'$':{'xmlns':_0x58a7b8(0xf8)},'name':this[_0x58a7b8(0xeb)],'source':{'vault':undefined,'author':_0x58a7b8(0xf1)},'packagetype':_0x58a7b8(0xf5),'summary':_0x58a7b8(0xf3),'description':'null'}};this[_0x58a7b8(0xef)][_0x58a7b8(0xe5)](_0x58a7b8(0xde),_0x1ee527[_0x58a7b8(0xe2)](_0x10431c));}async[a379_0x2ddd20(0xf4)](){const _0x5725b2=a379_0x2ddd20;return await this['createZips'](),this[_0x5725b2(0xe8)](),await this[_0x5725b2(0xd2)](),this[_0x5725b2(0xef)][_0x5725b2(0xee)]({'type':_0x5725b2(0xe1)});}}function a379_0x3099(){const _0x533760=['_zip','6040wgxGru','Flosum','(((.+)+)+)+$','Rollback','create','migration__v','loadAsync','toString','https://veevavault.com/','_backupZip','49dgcbWo','search','fillZip','stepName','6219RjhTRC','11YGICIS','1062524oGzgCy','_deploymentResults','constructor','__esModule','352432mUOmLX','2769924zObDub','sort','76gqpzim','vaultpackage.xml','_backup','apply','nodebuffer','buildObject','19797uCXdLx','.mdl','file','5879844EqGynp','xml2js','sortDeploymentResults','default','ZipCreatorRollback','_rollbackName','5RCDtNA','38780OhosSC','generateAsync'];a379_0x3099=function(){return _0x533760;};return a379_0x3099();}exports['ZipCreatorRollback']=ZipCreatorRollback;