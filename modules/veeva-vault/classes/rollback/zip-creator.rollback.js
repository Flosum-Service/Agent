const a335_0x4d0c78=a335_0x161e;(function(_0x2d79fb,_0x5efeb4){const _0x3b2bdc=a335_0x161e,_0x5b66aa=_0x2d79fb();while(!![]){try{const _0x1a29c0=parseInt(_0x3b2bdc(0xad))/0x1+-parseInt(_0x3b2bdc(0xaf))/0x2*(parseInt(_0x3b2bdc(0xc0))/0x3)+-parseInt(_0x3b2bdc(0xba))/0x4*(-parseInt(_0x3b2bdc(0xae))/0x5)+parseInt(_0x3b2bdc(0xa7))/0x6*(-parseInt(_0x3b2bdc(0xb7))/0x7)+-parseInt(_0x3b2bdc(0xb6))/0x8*(parseInt(_0x3b2bdc(0xbb))/0x9)+-parseInt(_0x3b2bdc(0xbf))/0xa+-parseInt(_0x3b2bdc(0xbc))/0xb*(-parseInt(_0x3b2bdc(0x9b))/0xc);if(_0x1a29c0===_0x5efeb4)break;else _0x5b66aa['push'](_0x5b66aa['shift']());}catch(_0x15a082){_0x5b66aa['push'](_0x5b66aa['shift']());}}}(a335_0x2c3a,0xf3f2b));const a335_0x464af4=(function(){let _0x2d192=!![];return function(_0x5f1ca8,_0x4b2626){const _0x2e47c1=_0x2d192?function(){const _0x4adfec=a335_0x161e;if(_0x4b2626){const _0x5260a6=_0x4b2626[_0x4adfec(0xbe)](_0x5f1ca8,arguments);return _0x4b2626=null,_0x5260a6;}}:function(){};return _0x2d192=![],_0x2e47c1;};}()),a335_0x1ddc71=a335_0x464af4(this,function(){const _0x33f95c=a335_0x161e;return a335_0x1ddc71[_0x33f95c(0xb3)]()[_0x33f95c(0xb9)](_0x33f95c(0x9e))[_0x33f95c(0xb3)]()[_0x33f95c(0xb4)](a335_0x1ddc71)[_0x33f95c(0xb9)]('(((.+)+)+)+$');});function a335_0x2c3a(){const _0x4889f4=['1122142ZIbRdu','nodebuffer','search','32vyRtlk','657zwcyks','5060CxSMcN','_deploymentResults','apply','6128150Llnwkz','6081pxktFN','ZipCreatorRollback','sort','jszip','_backup','createZips','19320akexIh','xml2js','defineProperty','(((.+)+)+)+$','.mdl','create','buildObject','sortDeploymentResults','__esModule','Rollback','_backupZip','null','6txDJgl','Builder','_zip','FactoryBodyCreatorRollback','_rollbackName','default','1779930AxlFHr','1094790NIoozP','1686RMslBS','Flosum','stepName','file','toString','constructor','https://veevavault.com/','86696XrnSgl'];a335_0x2c3a=function(){return _0x4889f4;};return a335_0x2c3a();}a335_0x1ddc71();function a335_0x161e(_0x264c1b,_0x54cfbc){const _0xc47b70=a335_0x2c3a();return a335_0x161e=function(_0x1ddc71,_0x464af4){_0x1ddc71=_0x1ddc71-0x96;let _0x2c3a1e=_0xc47b70[_0x1ddc71];return _0x2c3a1e;},a335_0x161e(_0x264c1b,_0x54cfbc);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x270021){return _0x270021&&_0x270021['__esModule']?_0x270021:{'default':_0x270021};};Object[a335_0x4d0c78(0x9d)](exports,a335_0x4d0c78(0xa3),{'value':!![]}),exports[a335_0x4d0c78(0x96)]=void 0x0;const jszip_1=__importDefault(require(a335_0x4d0c78(0x98))),factory_body_creator_rollback_1=require('./body-creator/factory.body-creator.rollback'),xml2js_1=require(a335_0x4d0c78(0x9c));class ZipCreatorRollback{constructor({deploymentResults:_0x4a7e80,backup:_0x53cfff,rollbackName:_0x2e519b}){const _0x57e123=a335_0x4d0c78;this[_0x57e123(0xbd)]=_0x4a7e80,this[_0x57e123(0xab)]=_0x2e519b,this['_backup']=_0x53cfff;}async[a335_0x4d0c78(0x9a)](){const _0x5ac7db=a335_0x4d0c78;this[_0x5ac7db(0xa5)]=new jszip_1[(_0x5ac7db(0xac))](),this[_0x5ac7db(0xa9)]=new jszip_1[(_0x5ac7db(0xac))](),await this[_0x5ac7db(0xa5)]['loadAsync'](this[_0x5ac7db(0x99)],{'base64':!![]});}['sortDeploymentResults'](){const _0x37ee54=a335_0x4d0c78;this[_0x37ee54(0xbd)][_0x37ee54(0x97)]((_0x4e1497,_0x136efc)=>_0x4e1497[_0x37ee54(0xb1)]<_0x136efc['stepName']?0x1:_0x136efc['stepName']<_0x4e1497['stepName']?-0x1:0x0);}async['fillZip'](){const _0x197483=a335_0x4d0c78;for(const _0x551e7a of this[_0x197483(0xbd)]){const _0xe503ed=await factory_body_creator_rollback_1[_0x197483(0xaa)][_0x197483(0xa0)]({'deploymentResult':_0x551e7a,'backupZip':this['_backupZip']})[_0x197483(0xa0)](),{type:_0x23295a,name:_0xea76a2}=_0x551e7a;this[_0x197483(0xa9)][_0x197483(0xb2)](_0x23295a+'.'+_0xea76a2+_0x197483(0x9f),_0xe503ed);}const _0x29250b=new xml2js_1[(_0x197483(0xa8))]({'headless':!![]}),_0x51b6de={'vaultpackage':{'$':{'xmlns':_0x197483(0xb5)},'name':this['_rollbackName'],'source':{'vault':undefined,'author':_0x197483(0xb0)},'packagetype':'migration__v','summary':_0x197483(0xa4),'description':_0x197483(0xa6)}};this[_0x197483(0xa9)][_0x197483(0xb2)]('vaultpackage.xml',_0x29250b[_0x197483(0xa1)](_0x51b6de));}async[a335_0x4d0c78(0xa0)](){const _0x8a7408=a335_0x4d0c78;return await this['createZips'](),this[_0x8a7408(0xa2)](),await this['fillZip'](),this['_zip']['generateAsync']({'type':_0x8a7408(0xb8)});}}exports[a335_0x4d0c78(0x96)]=ZipCreatorRollback;