const a312_0x583469=a312_0x21ae;(function(_0xd037c8,_0x42a605){const _0x581436=a312_0x21ae,_0x5eac54=_0xd037c8();while(!![]){try{const _0x2bfe43=-parseInt(_0x581436(0x1c9))/0x1+-parseInt(_0x581436(0x1b5))/0x2*(-parseInt(_0x581436(0x1c5))/0x3)+-parseInt(_0x581436(0x1be))/0x4*(-parseInt(_0x581436(0x1bd))/0x5)+parseInt(_0x581436(0x1c0))/0x6+-parseInt(_0x581436(0x1cc))/0x7*(-parseInt(_0x581436(0x1c6))/0x8)+-parseInt(_0x581436(0x1b1))/0x9*(parseInt(_0x581436(0x1a9))/0xa)+-parseInt(_0x581436(0x1cf))/0xb*(parseInt(_0x581436(0x1ae))/0xc);if(_0x2bfe43===_0x42a605)break;else _0x5eac54['push'](_0x5eac54['shift']());}catch(_0x50509f){_0x5eac54['push'](_0x5eac54['shift']());}}}(a312_0x4272,0xbb847));function a312_0x4272(){const _0x48f24f=['5724EHyUqT','FactoryBodyCreatorRollback','search','10359CuEieK','constructor','_zip','loadAsync','79490IOWNWQ','__importDefault','_backup','generateAsync','xml2js','Builder','stepName','./body-creator/factory.body-creator.rollback','1543305sIKZLU','12AGasHU','jszip','1538394JRdIGe','toString','createZips','defineProperty','.mdl','105eiMpRv','72bRTczY','_backupZip','fillZip','8755BwGecW','buildObject','_deploymentResults','1133895cfuBKP','create','default','59444ttxAlO','(((.+)+)+)+$','sort','ZipCreatorRollback','5880VkaqQj','migration__v','apply','file','__esModule'];a312_0x4272=function(){return _0x48f24f;};return a312_0x4272();}const a312_0x20ea97=(function(){let _0x4396c9=!![];return function(_0x46e950,_0x4866c7){const _0x3b788f=_0x4396c9?function(){const _0xdcc0ae=a312_0x21ae;if(_0x4866c7){const _0x4d70f1=_0x4866c7[_0xdcc0ae(0x1ab)](_0x46e950,arguments);return _0x4866c7=null,_0x4d70f1;}}:function(){};return _0x4396c9=![],_0x3b788f;};}()),a312_0x3713af=a312_0x20ea97(this,function(){const _0x3d99fa=a312_0x21ae;return a312_0x3713af[_0x3d99fa(0x1c1)]()[_0x3d99fa(0x1b0)](_0x3d99fa(0x1d0))['toString']()[_0x3d99fa(0x1b2)](a312_0x3713af)[_0x3d99fa(0x1b0)](_0x3d99fa(0x1d0));});a312_0x3713af();function a312_0x21ae(_0x3ff940,_0x27daad){const _0x4f601b=a312_0x4272();return a312_0x21ae=function(_0x3713af,_0x20ea97){_0x3713af=_0x3713af-0x1a9;let _0x427284=_0x4f601b[_0x3713af];return _0x427284;},a312_0x21ae(_0x3ff940,_0x27daad);}'use strict';var __importDefault=this&&this[a312_0x583469(0x1b6)]||function(_0x408220){const _0x27a836=a312_0x583469;return _0x408220&&_0x408220[_0x27a836(0x1ad)]?_0x408220:{'default':_0x408220};};Object[a312_0x583469(0x1c3)](exports,a312_0x583469(0x1ad),{'value':!![]}),exports[a312_0x583469(0x1d2)]=void 0x0;const jszip_1=__importDefault(require(a312_0x583469(0x1bf))),factory_body_creator_rollback_1=require(a312_0x583469(0x1bc)),xml2js_1=require(a312_0x583469(0x1b9));class ZipCreatorRollback{constructor({deploymentResults:_0x389c72,backup:_0x2667fe,rollbackName:_0x3434a1}){const _0x48f537=a312_0x583469;this[_0x48f537(0x1cb)]=_0x389c72,this['_rollbackName']=_0x3434a1,this[_0x48f537(0x1b7)]=_0x2667fe;}async[a312_0x583469(0x1c2)](){const _0x387992=a312_0x583469;this['_backupZip']=new jszip_1[(_0x387992(0x1ce))](),this[_0x387992(0x1b3)]=new jszip_1[(_0x387992(0x1ce))](),await this[_0x387992(0x1c7)][_0x387992(0x1b4)](this[_0x387992(0x1b7)],{'base64':!![]});}['sortDeploymentResults'](){const _0x4a6852=a312_0x583469;this[_0x4a6852(0x1cb)][_0x4a6852(0x1d1)]((_0x55bb79,_0x1c8b0c)=>_0x55bb79[_0x4a6852(0x1bb)]<_0x1c8b0c['stepName']?0x1:_0x1c8b0c[_0x4a6852(0x1bb)]<_0x55bb79[_0x4a6852(0x1bb)]?-0x1:0x0);}async[a312_0x583469(0x1c8)](){const _0x3c959f=a312_0x583469;for(const _0x4ef54c of this[_0x3c959f(0x1cb)]){const _0xeffd84=await factory_body_creator_rollback_1[_0x3c959f(0x1af)][_0x3c959f(0x1cd)]({'deploymentResult':_0x4ef54c,'backupZip':this[_0x3c959f(0x1c7)]})['create'](),{type:_0xb0dd23,name:_0x31b0c8}=_0x4ef54c;this[_0x3c959f(0x1b3)][_0x3c959f(0x1ac)](_0xb0dd23+'.'+_0x31b0c8+_0x3c959f(0x1c4),_0xeffd84);}const _0x2400f0=new xml2js_1[(_0x3c959f(0x1ba))]({'headless':!![]}),_0x2557d3={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this['_rollbackName'],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x3c959f(0x1aa),'summary':'Rollback','description':'null'}};this[_0x3c959f(0x1b3)][_0x3c959f(0x1ac)]('vaultpackage.xml',_0x2400f0[_0x3c959f(0x1ca)](_0x2557d3));}async['create'](){const _0x466229=a312_0x583469;return await this[_0x466229(0x1c2)](),this['sortDeploymentResults'](),await this[_0x466229(0x1c8)](),this['_zip'][_0x466229(0x1b8)]({'type':'nodebuffer'});}}exports[a312_0x583469(0x1d2)]=ZipCreatorRollback;