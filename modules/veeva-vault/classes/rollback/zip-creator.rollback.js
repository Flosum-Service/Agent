function a334_0x645c(){const _0x1576e9=['132401RtLFIa','generateAsync','defineProperty','114iQIgSh','1752420GyWERE','.mdl','Flosum','apply','12usGxUG','10mwEXmA','5306lIHAPU','file','jszip','loadAsync','_zip','nodebuffer','create','_deploymentResults','sortDeploymentResults','8sxfnrN','search','_backup','__esModule','(((.+)+)+)+$','./body-creator/factory.body-creator.rollback','toString','Builder','createZips','2585254RdTEYU','24778CawZau','https://veevavault.com/','fillZip','stepName','1763085celSWe','ZipCreatorRollback','default','_rollbackName','constructor','9ZxiFiX','Rollback','12TLQpPc','null','_backupZip','vaultpackage.xml','migration__v','6089204OyyczI','buildObject','38708ZvyUxX'];a334_0x645c=function(){return _0x1576e9;};return a334_0x645c();}const a334_0x1ebbf6=a334_0x2e02;(function(_0x457c2d,_0x4b12bf){const _0x5efcc9=a334_0x2e02,_0x80a384=_0x457c2d();while(!![]){try{const _0x2e3e6c=-parseInt(_0x5efcc9(0x18a))/0x1*(parseInt(_0x5efcc9(0x163))/0x2)+parseInt(_0x5efcc9(0x18d))/0x3*(parseInt(_0x5efcc9(0x189))/0x4)+-parseInt(_0x5efcc9(0x17b))/0x5*(parseInt(_0x5efcc9(0x162))/0x6)+parseInt(_0x5efcc9(0x176))/0x7*(parseInt(_0x5efcc9(0x16d))/0x8)+parseInt(_0x5efcc9(0x180))/0x9*(-parseInt(_0x5efcc9(0x18e))/0xa)+-parseInt(_0x5efcc9(0x187))/0xb*(-parseInt(_0x5efcc9(0x182))/0xc)+parseInt(_0x5efcc9(0x177))/0xd*(parseInt(_0x5efcc9(0x164))/0xe);if(_0x2e3e6c===_0x4b12bf)break;else _0x80a384['push'](_0x80a384['shift']());}catch(_0x31973d){_0x80a384['push'](_0x80a384['shift']());}}}(a334_0x645c,0x72de9));const a334_0x73202a=(function(){let _0x4ec229=!![];return function(_0x45e1bf,_0x197b5d){const _0x357b77=_0x4ec229?function(){const _0x4fe9be=a334_0x2e02;if(_0x197b5d){const _0x4a3d2d=_0x197b5d[_0x4fe9be(0x161)](_0x45e1bf,arguments);return _0x197b5d=null,_0x4a3d2d;}}:function(){};return _0x4ec229=![],_0x357b77;};}()),a334_0x649685=a334_0x73202a(this,function(){const _0x32641d=a334_0x2e02;return a334_0x649685[_0x32641d(0x173)]()[_0x32641d(0x16e)](_0x32641d(0x171))[_0x32641d(0x173)]()[_0x32641d(0x17f)](a334_0x649685)[_0x32641d(0x16e)](_0x32641d(0x171));});a334_0x649685();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x41dd16){const _0x4ed001=a334_0x2e02;return _0x41dd16&&_0x41dd16[_0x4ed001(0x170)]?_0x41dd16:{'default':_0x41dd16};};function a334_0x2e02(_0x219367,_0x4e431f){const _0x5042ef=a334_0x645c();return a334_0x2e02=function(_0x649685,_0x73202a){_0x649685=_0x649685-0x15f;let _0x645c3b=_0x5042ef[_0x649685];return _0x645c3b;},a334_0x2e02(_0x219367,_0x4e431f);}Object[a334_0x1ebbf6(0x18c)](exports,a334_0x1ebbf6(0x170),{'value':!![]}),exports[a334_0x1ebbf6(0x17c)]=void 0x0;const jszip_1=__importDefault(require(a334_0x1ebbf6(0x166))),factory_body_creator_rollback_1=require(a334_0x1ebbf6(0x172)),xml2js_1=require('xml2js');class ZipCreatorRollback{constructor({deploymentResults:_0x16cfc8,backup:_0x339e6d,rollbackName:_0x3b47f1}){const _0xa364b3=a334_0x1ebbf6;this[_0xa364b3(0x16b)]=_0x16cfc8,this[_0xa364b3(0x17e)]=_0x3b47f1,this['_backup']=_0x339e6d;}async[a334_0x1ebbf6(0x175)](){const _0x357865=a334_0x1ebbf6;this[_0x357865(0x184)]=new jszip_1[(_0x357865(0x17d))](),this[_0x357865(0x168)]=new jszip_1[(_0x357865(0x17d))](),await this[_0x357865(0x184)][_0x357865(0x167)](this[_0x357865(0x16f)],{'base64':!![]});}[a334_0x1ebbf6(0x16c)](){const _0x202c13=a334_0x1ebbf6;this['_deploymentResults']['sort']((_0xac00d8,_0x53692a)=>_0xac00d8['stepName']<_0x53692a['stepName']?0x1:_0x53692a['stepName']<_0xac00d8[_0x202c13(0x17a)]?-0x1:0x0);}async[a334_0x1ebbf6(0x179)](){const _0x3ec331=a334_0x1ebbf6;for(const _0x5ec1ab of this[_0x3ec331(0x16b)]){const _0x3d12aa=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback'][_0x3ec331(0x16a)]({'deploymentResult':_0x5ec1ab,'backupZip':this[_0x3ec331(0x184)]})[_0x3ec331(0x16a)](),{type:_0x57783c,name:_0x4da32f}=_0x5ec1ab;this[_0x3ec331(0x168)]['file'](_0x57783c+'.'+_0x4da32f+_0x3ec331(0x15f),_0x3d12aa);}const _0x196b60=new xml2js_1[(_0x3ec331(0x174))]({'headless':!![]}),_0x242a91={'vaultpackage':{'$':{'xmlns':_0x3ec331(0x178)},'name':this[_0x3ec331(0x17e)],'source':{'vault':undefined,'author':_0x3ec331(0x160)},'packagetype':_0x3ec331(0x186),'summary':_0x3ec331(0x181),'description':_0x3ec331(0x183)}};this[_0x3ec331(0x168)][_0x3ec331(0x165)](_0x3ec331(0x185),_0x196b60[_0x3ec331(0x188)](_0x242a91));}async[a334_0x1ebbf6(0x16a)](){const _0x5373ad=a334_0x1ebbf6;return await this[_0x5373ad(0x175)](),this[_0x5373ad(0x16c)](),await this[_0x5373ad(0x179)](),this[_0x5373ad(0x168)][_0x5373ad(0x18b)]({'type':_0x5373ad(0x169)});}}exports[a334_0x1ebbf6(0x17c)]=ZipCreatorRollback;