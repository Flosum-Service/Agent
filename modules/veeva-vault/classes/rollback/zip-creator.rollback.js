const a335_0x39a95d=a335_0x44ab;(function(_0x509581,_0x47f05f){const _0xbd644a=a335_0x44ab,_0x36ca18=_0x509581();while(!![]){try{const _0x5009f3=-parseInt(_0xbd644a(0xe6))/0x1*(-parseInt(_0xbd644a(0xee))/0x2)+-parseInt(_0xbd644a(0xfb))/0x3*(-parseInt(_0xbd644a(0xfd))/0x4)+parseInt(_0xbd644a(0x100))/0x5+parseInt(_0xbd644a(0x101))/0x6+parseInt(_0xbd644a(0xf4))/0x7+parseInt(_0xbd644a(0xeb))/0x8*(-parseInt(_0xbd644a(0xff))/0x9)+-parseInt(_0xbd644a(0xef))/0xa*(parseInt(_0xbd644a(0x10d))/0xb);if(_0x5009f3===_0x47f05f)break;else _0x36ca18['push'](_0x36ca18['shift']());}catch(_0x167636){_0x36ca18['push'](_0x36ca18['shift']());}}}(a335_0x52a1,0x6ae93));function a335_0x52a1(){const _0x37b716=['1258aBDLpq','119710tMHQjk','__importDefault','toString','_deploymentResults','nodebuffer','5187455ddvxmi','fillZip','(((.+)+)+)+$','buildObject','.mdl','loadAsync','_rollbackName','920844gTAUwe','https://veevavault.com/','8gsQUWC','default','192069urNqQo','2526900UbnNcE','2916996MCaAeR','__esModule','search','vaultpackage.xml','sort','file','createZips','sortDeploymentResults','ZipCreatorRollback','_zip','_backup','Flosum','2046xqSXhr','./body-creator/factory.body-creator.rollback','1252SfUCiH','Builder','constructor','_backupZip','create','176jMVXeF','stepName','Rollback'];a335_0x52a1=function(){return _0x37b716;};return a335_0x52a1();}const a335_0x4d1534=(function(){let _0x4f742b=!![];return function(_0x37ea80,_0x36b1de){const _0x43295f=_0x4f742b?function(){if(_0x36b1de){const _0x41849c=_0x36b1de['apply'](_0x37ea80,arguments);return _0x36b1de=null,_0x41849c;}}:function(){};return _0x4f742b=![],_0x43295f;};}()),a335_0x1fe2f7=a335_0x4d1534(this,function(){const _0x58cac1=a335_0x44ab;return a335_0x1fe2f7[_0x58cac1(0xf1)]()[_0x58cac1(0x103)](_0x58cac1(0xf6))['toString']()[_0x58cac1(0xe8)](a335_0x1fe2f7)[_0x58cac1(0x103)]('(((.+)+)+)+$');});a335_0x1fe2f7();'use strict';var __importDefault=this&&this[a335_0x39a95d(0xf0)]||function(_0x3c876c){const _0x99c650=a335_0x39a95d;return _0x3c876c&&_0x3c876c[_0x99c650(0x102)]?_0x3c876c:{'default':_0x3c876c};};Object['defineProperty'](exports,a335_0x39a95d(0x102),{'value':!![]}),exports['ZipCreatorRollback']=void 0x0;const jszip_1=__importDefault(require('jszip')),factory_body_creator_rollback_1=require(a335_0x39a95d(0xe5)),xml2js_1=require('xml2js');class ZipCreatorRollback{constructor({deploymentResults:_0x385156,backup:_0x3399ba,rollbackName:_0x869e98}){const _0x4dc3e7=a335_0x39a95d;this[_0x4dc3e7(0xf2)]=_0x385156,this[_0x4dc3e7(0xfa)]=_0x869e98,this[_0x4dc3e7(0x10b)]=_0x3399ba;}async[a335_0x39a95d(0x107)](){const _0x320467=a335_0x39a95d;this[_0x320467(0xe9)]=new jszip_1['default'](),this[_0x320467(0x10a)]=new jszip_1[(_0x320467(0xfe))](),await this[_0x320467(0xe9)][_0x320467(0xf9)](this[_0x320467(0x10b)],{'base64':!![]});}[a335_0x39a95d(0x108)](){const _0x121cf0=a335_0x39a95d;this[_0x121cf0(0xf2)][_0x121cf0(0x105)]((_0x4884a7,_0x444f60)=>_0x4884a7[_0x121cf0(0xec)]<_0x444f60['stepName']?0x1:_0x444f60[_0x121cf0(0xec)]<_0x4884a7[_0x121cf0(0xec)]?-0x1:0x0);}async[a335_0x39a95d(0xf5)](){const _0x48bbda=a335_0x39a95d;for(const _0x5b602f of this['_deploymentResults']){const _0x203b8f=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback'][_0x48bbda(0xea)]({'deploymentResult':_0x5b602f,'backupZip':this[_0x48bbda(0xe9)]})[_0x48bbda(0xea)](),{type:_0x5e1f77,name:_0x26ad53}=_0x5b602f;this['_zip']['file'](_0x5e1f77+'.'+_0x26ad53+_0x48bbda(0xf8),_0x203b8f);}const _0x27a183=new xml2js_1[(_0x48bbda(0xe7))]({'headless':!![]}),_0x551149={'vaultpackage':{'$':{'xmlns':_0x48bbda(0xfc)},'name':this[_0x48bbda(0xfa)],'source':{'vault':undefined,'author':_0x48bbda(0x10c)},'packagetype':'migration__v','summary':_0x48bbda(0xed),'description':'null'}};this['_zip'][_0x48bbda(0x106)](_0x48bbda(0x104),_0x27a183[_0x48bbda(0xf7)](_0x551149));}async[a335_0x39a95d(0xea)](){const _0x308e7d=a335_0x39a95d;return await this[_0x308e7d(0x107)](),this[_0x308e7d(0x108)](),await this[_0x308e7d(0xf5)](),this[_0x308e7d(0x10a)]['generateAsync']({'type':_0x308e7d(0xf3)});}}function a335_0x44ab(_0x42510b,_0x505b2a){const _0x388ef2=a335_0x52a1();return a335_0x44ab=function(_0x1fe2f7,_0x4d1534){_0x1fe2f7=_0x1fe2f7-0xe5;let _0x52a1a2=_0x388ef2[_0x1fe2f7];return _0x52a1a2;},a335_0x44ab(_0x42510b,_0x505b2a);}exports[a335_0x39a95d(0x109)]=ZipCreatorRollback;