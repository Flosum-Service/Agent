const a366_0x2844e9=a366_0x4980;(function(_0x11b337,_0x173496){const _0xdec109=a366_0x4980,_0x55838e=_0x11b337();while(!![]){try{const _0x391c6c=parseInt(_0xdec109(0x193))/0x1*(parseInt(_0xdec109(0x1ab))/0x2)+-parseInt(_0xdec109(0x197))/0x3*(-parseInt(_0xdec109(0x1b3))/0x4)+-parseInt(_0xdec109(0x1b5))/0x5*(-parseInt(_0xdec109(0x196))/0x6)+-parseInt(_0xdec109(0x18b))/0x7*(-parseInt(_0xdec109(0x198))/0x8)+-parseInt(_0xdec109(0x1b6))/0x9*(parseInt(_0xdec109(0x1a0))/0xa)+parseInt(_0xdec109(0x19a))/0xb*(parseInt(_0xdec109(0x18c))/0xc)+-parseInt(_0xdec109(0x1aa))/0xd;if(_0x391c6c===_0x173496)break;else _0x55838e['push'](_0x55838e['shift']());}catch(_0x3c9a59){_0x55838e['push'](_0x55838e['shift']());}}}(a366_0x457a,0xb9613));function a366_0x4980(_0x134a52,_0x137157){const _0x6a5d9e=a366_0x457a();return a366_0x4980=function(_0x3fbf96,_0x1e8228){_0x3fbf96=_0x3fbf96-0x18a;let _0x457a06=_0x6a5d9e[_0x3fbf96];return _0x457a06;},a366_0x4980(_0x134a52,_0x137157);}const a366_0x1e8228=(function(){let _0x36dc46=!![];return function(_0x4b9ba8,_0x34c341){const _0x523864=_0x36dc46?function(){if(_0x34c341){const _0x463b56=_0x34c341['apply'](_0x4b9ba8,arguments);return _0x34c341=null,_0x463b56;}}:function(){};return _0x36dc46=![],_0x523864;};}()),a366_0x3fbf96=a366_0x1e8228(this,function(){const _0x12cc63=a366_0x4980;return a366_0x3fbf96[_0x12cc63(0x1a7)]()['search'](_0x12cc63(0x19e))['toString']()['constructor'](a366_0x3fbf96)[_0x12cc63(0x191)](_0x12cc63(0x19e));});a366_0x3fbf96();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x16d3dd){const _0x34165f=a366_0x4980;return _0x16d3dd&&_0x16d3dd[_0x34165f(0x19d)]?_0x16d3dd:{'default':_0x16d3dd};};Object[a366_0x2844e9(0x195)](exports,a366_0x2844e9(0x19d),{'value':!![]}),exports[a366_0x2844e9(0x1a9)]=void 0x0;const jszip_1=__importDefault(require(a366_0x2844e9(0x1b2))),factory_body_creator_rollback_1=require(a366_0x2844e9(0x18a)),xml2js_1=require(a366_0x2844e9(0x18e));function a366_0x457a(){const _0x4a3107=['https://veevavault.com/','_backupZip','__esModule','(((.+)+)+)+$','.mdl','4419980lfgfSW','buildObject','Builder','vaultpackage.xml','createZips','Flosum','default','toString','fillZip','ZipCreatorRollback','28480673FSHjvD','22MPRcPx','_deploymentResults','nodebuffer','_backup','migration__v','create','_zip','jszip','4RayxWR','generateAsync','324790nPniXJ','9ANTguj','Rollback','./body-creator/factory.body-creator.rollback','182YYcuLn','1671768LjvOLy','stepName','xml2js','_rollbackName','null','search','sortDeploymentResults','575lYwWPN','loadAsync','defineProperty','72xyxMoe','2995683ZgqvrM','194632OuHOrY','file','77lJnofi'];a366_0x457a=function(){return _0x4a3107;};return a366_0x457a();}class ZipCreatorRollback{constructor({deploymentResults:_0x50f331,backup:_0x5e105e,rollbackName:_0xcddcd4}){const _0x4ed7f3=a366_0x2844e9;this[_0x4ed7f3(0x1ac)]=_0x50f331,this[_0x4ed7f3(0x18f)]=_0xcddcd4,this[_0x4ed7f3(0x1ae)]=_0x5e105e;}async['createZips'](){const _0x1ad1b5=a366_0x2844e9;this['_backupZip']=new jszip_1['default'](),this['_zip']=new jszip_1[(_0x1ad1b5(0x1a6))](),await this[_0x1ad1b5(0x19c)][_0x1ad1b5(0x194)](this[_0x1ad1b5(0x1ae)],{'base64':!![]});}[a366_0x2844e9(0x192)](){const _0x45f9d6=a366_0x2844e9;this[_0x45f9d6(0x1ac)]['sort']((_0x1cf02d,_0x57370b)=>_0x1cf02d['stepName']<_0x57370b[_0x45f9d6(0x18d)]?0x1:_0x57370b[_0x45f9d6(0x18d)]<_0x1cf02d['stepName']?-0x1:0x0);}async[a366_0x2844e9(0x1a8)](){const _0x3a39d3=a366_0x2844e9;for(const _0x137e75 of this[_0x3a39d3(0x1ac)]){const _0x28ac58=await factory_body_creator_rollback_1['FactoryBodyCreatorRollback']['create']({'deploymentResult':_0x137e75,'backupZip':this[_0x3a39d3(0x19c)]})[_0x3a39d3(0x1b0)](),{type:_0xdc3dff,name:_0x32d130}=_0x137e75;this[_0x3a39d3(0x1b1)]['file'](_0xdc3dff+'.'+_0x32d130+_0x3a39d3(0x19f),_0x28ac58);}const _0x21395b=new xml2js_1[(_0x3a39d3(0x1a2))]({'headless':!![]}),_0x530c6e={'vaultpackage':{'$':{'xmlns':_0x3a39d3(0x19b)},'name':this['_rollbackName'],'source':{'vault':undefined,'author':_0x3a39d3(0x1a5)},'packagetype':_0x3a39d3(0x1af),'summary':_0x3a39d3(0x1b7),'description':_0x3a39d3(0x190)}};this[_0x3a39d3(0x1b1)][_0x3a39d3(0x199)](_0x3a39d3(0x1a3),_0x21395b[_0x3a39d3(0x1a1)](_0x530c6e));}async[a366_0x2844e9(0x1b0)](){const _0x40f77c=a366_0x2844e9;return await this[_0x40f77c(0x1a4)](),this[_0x40f77c(0x192)](),await this[_0x40f77c(0x1a8)](),this[_0x40f77c(0x1b1)][_0x40f77c(0x1b4)]({'type':_0x40f77c(0x1ad)});}}exports[a366_0x2844e9(0x1a9)]=ZipCreatorRollback;