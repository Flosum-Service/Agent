function a379_0x2fa8(_0x310f25,_0x414071){const _0x43ab04=a379_0xf111();return a379_0x2fa8=function(_0x472add,_0xe5c5d0){_0x472add=_0x472add-0x64;let _0xf111bc=_0x43ab04[_0x472add];return _0xf111bc;},a379_0x2fa8(_0x310f25,_0x414071);}const a379_0x42173b=a379_0x2fa8;(function(_0x48d0ad,_0x2125c1){const _0x2a7d9b=a379_0x2fa8,_0x3294d2=_0x48d0ad();while(!![]){try{const _0x491b50=parseInt(_0x2a7d9b(0x7d))/0x1*(parseInt(_0x2a7d9b(0x7b))/0x2)+-parseInt(_0x2a7d9b(0x8e))/0x3*(parseInt(_0x2a7d9b(0x6a))/0x4)+-parseInt(_0x2a7d9b(0x6e))/0x5*(-parseInt(_0x2a7d9b(0x83))/0x6)+parseInt(_0x2a7d9b(0x7a))/0x7+-parseInt(_0x2a7d9b(0x8c))/0x8*(-parseInt(_0x2a7d9b(0x7f))/0x9)+-parseInt(_0x2a7d9b(0x74))/0xa*(-parseInt(_0x2a7d9b(0x7c))/0xb)+parseInt(_0x2a7d9b(0x68))/0xc*(-parseInt(_0x2a7d9b(0x72))/0xd);if(_0x491b50===_0x2125c1)break;else _0x3294d2['push'](_0x3294d2['shift']());}catch(_0xc0054d){_0x3294d2['push'](_0x3294d2['shift']());}}}(a379_0xf111,0x39aa4));const a379_0xe5c5d0=(function(){let _0xbcb965=!![];return function(_0x4454f6,_0x7c2a27){const _0x310638=_0xbcb965?function(){const _0x3d0d45=a379_0x2fa8;if(_0x7c2a27){const _0x30e13b=_0x7c2a27[_0x3d0d45(0x6f)](_0x4454f6,arguments);return _0x7c2a27=null,_0x30e13b;}}:function(){};return _0xbcb965=![],_0x310638;};}()),a379_0x472add=a379_0xe5c5d0(this,function(){const _0x2191fd=a379_0x2fa8;return a379_0x472add[_0x2191fd(0x88)]()['search'](_0x2191fd(0x77))[_0x2191fd(0x88)]()[_0x2191fd(0x7e)](a379_0x472add)[_0x2191fd(0x81)]('(((.+)+)+)+$');});a379_0x472add();'use strict';var __importDefault=this&&this[a379_0x42173b(0x75)]||function(_0x254f10){const _0x5b50a7=a379_0x42173b;return _0x254f10&&_0x254f10[_0x5b50a7(0x89)]?_0x254f10:{'default':_0x254f10};};Object[a379_0x42173b(0x73)](exports,a379_0x42173b(0x89),{'value':!![]}),exports[a379_0x42173b(0x76)]=void 0x0;const jszip_1=__importDefault(require(a379_0x42173b(0x66))),factory_body_creator_rollback_1=require(a379_0x42173b(0x8a)),xml2js_1=require('xml2js');function a379_0xf111(){const _0x18cbea=['ZipCreatorRollback','(((.+)+)+)+$','sort','null','69727YamPVM','2ZYZKmO','3729LBJuty','20929qFOFlA','constructor','133461ErzqyN','stepName','search','_deploymentResults','30GrdKTo','file','createZips','sortDeploymentResults','migration__v','toString','__esModule','./body-creator/factory.body-creator.rollback','Rollback','112MIIiNN','_rollbackName','45573abWMzZ','_backupZip','generateAsync','jszip','nodebuffer','84zaZZip','_zip','60evUfIx','create','FactoryBodyCreatorRollback','Builder','294465mEZLHu','apply','fillZip','_backup','518921QJZqrd','defineProperty','6210lzNxsk','__importDefault'];a379_0xf111=function(){return _0x18cbea;};return a379_0xf111();}class ZipCreatorRollback{constructor({deploymentResults:_0xa5c6fd,backup:_0x52b42e,rollbackName:_0x387023}){const _0x2b4646=a379_0x42173b;this[_0x2b4646(0x82)]=_0xa5c6fd,this['_rollbackName']=_0x387023,this['_backup']=_0x52b42e;}async[a379_0x42173b(0x85)](){const _0x4e9187=a379_0x42173b;this[_0x4e9187(0x64)]=new jszip_1['default'](),this[_0x4e9187(0x69)]=new jszip_1['default'](),await this[_0x4e9187(0x64)]['loadAsync'](this[_0x4e9187(0x71)],{'base64':!![]});}[a379_0x42173b(0x86)](){const _0x9aaf42=a379_0x42173b;this['_deploymentResults'][_0x9aaf42(0x78)]((_0x85e798,_0x4e4e00)=>_0x85e798[_0x9aaf42(0x80)]<_0x4e4e00[_0x9aaf42(0x80)]?0x1:_0x4e4e00[_0x9aaf42(0x80)]<_0x85e798['stepName']?-0x1:0x0);}async[a379_0x42173b(0x70)](){const _0x45823f=a379_0x42173b;for(const _0x56dec7 of this[_0x45823f(0x82)]){const _0x43a589=await factory_body_creator_rollback_1[_0x45823f(0x6c)][_0x45823f(0x6b)]({'deploymentResult':_0x56dec7,'backupZip':this[_0x45823f(0x64)]})[_0x45823f(0x6b)](),{type:_0x1b823e,name:_0x44fee8}=_0x56dec7;this[_0x45823f(0x69)]['file'](_0x1b823e+'.'+_0x44fee8+'.mdl',_0x43a589);}const _0x551f11=new xml2js_1[(_0x45823f(0x6d))]({'headless':!![]}),_0x4fd5b6={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this[_0x45823f(0x8d)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x45823f(0x87),'summary':_0x45823f(0x8b),'description':_0x45823f(0x79)}};this[_0x45823f(0x69)][_0x45823f(0x84)]('vaultpackage.xml',_0x551f11['buildObject'](_0x4fd5b6));}async[a379_0x42173b(0x6b)](){const _0x1723fb=a379_0x42173b;return await this[_0x1723fb(0x85)](),this[_0x1723fb(0x86)](),await this[_0x1723fb(0x70)](),this[_0x1723fb(0x69)][_0x1723fb(0x65)]({'type':_0x1723fb(0x67)});}}exports[a379_0x42173b(0x76)]=ZipCreatorRollback;