const a343_0x19d0fa=a343_0x1b3e;function a343_0x1b3e(_0x2f7919,_0x17b279){const _0x5bbc4c=a343_0x1363();return a343_0x1b3e=function(_0x1fd738,_0x4e7305){_0x1fd738=_0x1fd738-0x14e;let _0x136337=_0x5bbc4c[_0x1fd738];return _0x136337;},a343_0x1b3e(_0x2f7919,_0x17b279);}(function(_0x2a4004,_0x25d6c6){const _0x1abeae=a343_0x1b3e,_0x3759e1=_0x2a4004();while(!![]){try{const _0xf70aa5=-parseInt(_0x1abeae(0x15f))/0x1+parseInt(_0x1abeae(0x163))/0x2+-parseInt(_0x1abeae(0x167))/0x3+-parseInt(_0x1abeae(0x170))/0x4*(-parseInt(_0x1abeae(0x16a))/0x5)+parseInt(_0x1abeae(0x15b))/0x6*(parseInt(_0x1abeae(0x14e))/0x7)+parseInt(_0x1abeae(0x159))/0x8+parseInt(_0x1abeae(0x164))/0x9*(-parseInt(_0x1abeae(0x15e))/0xa);if(_0xf70aa5===_0x25d6c6)break;else _0x3759e1['push'](_0x3759e1['shift']());}catch(_0x1cab6b){_0x3759e1['push'](_0x3759e1['shift']());}}}(a343_0x1363,0x72453));function a343_0x1363(){const _0x385802=['6153200TlBvaD','433033boWHlL','fillFileByNames','path','dependencyFileByName','1693964uDoSkJ','18laVXJd','string','__esModule','174627kXghcn','__importDefault','constructor','28310LbmEwu','files','xml2js','(((.+)+)+)+$','addComponentsToMainZip','execute','512nXALYT','mainZip','loadAsync','deploymentName','search','ZipCreatorDeploy','toString','file','migration__v','addVaultPackageFileToMainZip','apply','default','SequenceCreatorDeploy','2158611gKjrus','MDL_EXTENSION','Flosum','mdlFileByName','attachmentBodies','has','Deploy','../../constants/veeva.constants','Builder','set','nodebuffer','2478736pFbmAO','buildObject','6bquRgQ','get','VeevaConstants'];a343_0x1363=function(){return _0x385802;};return a343_0x1363();}const a343_0x4e7305=(function(){let _0x3ae30d=!![];return function(_0x32303e,_0x20fa8d){const _0x1008f2=_0x3ae30d?function(){const _0x1b24e1=a343_0x1b3e;if(_0x20fa8d){const _0x3b18b0=_0x20fa8d[_0x1b24e1(0x17a)](_0x32303e,arguments);return _0x20fa8d=null,_0x3b18b0;}}:function(){};return _0x3ae30d=![],_0x1008f2;};}()),a343_0x1fd738=a343_0x4e7305(this,function(){const _0xf179c=a343_0x1b3e;return a343_0x1fd738[_0xf179c(0x176)]()[_0xf179c(0x174)](_0xf179c(0x16d))[_0xf179c(0x176)]()[_0xf179c(0x169)](a343_0x1fd738)[_0xf179c(0x174)](_0xf179c(0x16d));});a343_0x1fd738();'use strict';var __importDefault=this&&this[a343_0x19d0fa(0x168)]||function(_0x153d75){const _0x1423ec=a343_0x19d0fa;return _0x153d75&&_0x153d75[_0x1423ec(0x166)]?_0x153d75:{'default':_0x153d75};};Object['defineProperty'](exports,a343_0x19d0fa(0x166),{'value':!![]}),exports[a343_0x19d0fa(0x175)]=void 0x0;const jszip_1=__importDefault(require('jszip')),sequence_creator_deploy_1=require('./sequence-creator.deploy'),xml2js_1=require(a343_0x19d0fa(0x16c)),veeva_constants_1=require(a343_0x19d0fa(0x155)),path_1=__importDefault(require(a343_0x19d0fa(0x161))),VAULT_PACKAGE_FILENAME='vaultpackage.xml';class ZipCreatorDeploy{constructor({attachmentBodies:_0x3971a9,deploymentName:_0x2f1682}){const _0x4a3b8a=a343_0x19d0fa;this['dependencyFileByName']=new Map(),this['mdlFileByName']=new Map(),this[_0x4a3b8a(0x171)]=new jszip_1[(_0x4a3b8a(0x17b))](),this['attachmentBodies']=_0x3971a9,this[_0x4a3b8a(0x173)]=_0x2f1682;}async['fillFileByNames'](){const _0x4579d2=a343_0x19d0fa;var _0x1efed3;for(const _0x54e3e9 of this[_0x4579d2(0x152)]){const _0x65d58=new jszip_1[(_0x4579d2(0x17b))]();await _0x65d58[_0x4579d2(0x172)](_0x54e3e9,{'base64':!![]});for(const _0x38b089 in _0x65d58[_0x4579d2(0x16b)]){const _0x351dad=await((_0x1efed3=_0x65d58[_0x4579d2(0x177)](_0x38b089))===null||_0x1efed3===void 0x0?void 0x0:_0x1efed3['async'](_0x4579d2(0x165)));if(!_0x351dad)continue;const {name:_0x48688b,ext:_0x4ec66c}=path_1[_0x4579d2(0x17b)]['parse'](_0x38b089);switch(_0x4ec66c){case veeva_constants_1[_0x4579d2(0x15d)]['DEPENDENCY_EXTENSION']:this[_0x4579d2(0x162)][_0x4579d2(0x157)](_0x48688b,_0x351dad);break;case veeva_constants_1[_0x4579d2(0x15d)]['MDL_EXTENSION']:this[_0x4579d2(0x151)][_0x4579d2(0x157)](_0x48688b,_0x351dad);break;}}}}[a343_0x19d0fa(0x16e)](_0x5293a9){const _0xb4f8e5=a343_0x19d0fa;for(const _0xeec75b of _0x5293a9){const _0x3473e0=this[_0xb4f8e5(0x151)][_0xb4f8e5(0x15c)](_0xeec75b);_0x3473e0&&this[_0xb4f8e5(0x171)][_0xb4f8e5(0x177)](_0xeec75b+veeva_constants_1[_0xb4f8e5(0x15d)][_0xb4f8e5(0x14f)],_0x3473e0);}}[a343_0x19d0fa(0x179)](){const _0x18feb2=a343_0x19d0fa,_0x12e5bc=new xml2js_1[(_0x18feb2(0x156))]({'headless':!![]}),_0x11752c={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this[_0x18feb2(0x173)],'source':{'vault':undefined,'author':_0x18feb2(0x150)},'packagetype':_0x18feb2(0x178),'summary':_0x18feb2(0x154),'description':'null'}};this['mainZip'][_0x18feb2(0x177)](VAULT_PACKAGE_FILENAME,_0x12e5bc[_0x18feb2(0x15a)](_0x11752c));}async[a343_0x19d0fa(0x16f)](){const _0x458d81=a343_0x19d0fa;await this[_0x458d81(0x160)]();const _0x390966=Array['from'](this[_0x458d81(0x151)]['keys']())['filter'](_0x252ddc=>!this[_0x458d81(0x162)][_0x458d81(0x153)](_0x252ddc)),_0x2477c1=new sequence_creator_deploy_1[(_0x458d81(0x17c))]({'dependencyFileByName':this[_0x458d81(0x162)]})[_0x458d81(0x16f)]();return this[_0x458d81(0x16e)](_0x390966),this['addComponentsToMainZip'](_0x2477c1),this[_0x458d81(0x179)](),this['mainZip']['generateAsync']({'type':_0x458d81(0x158)});}}exports[a343_0x19d0fa(0x175)]=ZipCreatorDeploy;