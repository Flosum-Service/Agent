const a311_0x15dd4d=a311_0x2120;(function(_0x1550e6,_0x24cefc){const _0x20242c=a311_0x2120,_0x501ea5=_0x1550e6();while(!![]){try{const _0x3ecbde=parseInt(_0x20242c(0xe4))/0x1+-parseInt(_0x20242c(0xe8))/0x2+-parseInt(_0x20242c(0xec))/0x3+parseInt(_0x20242c(0xdc))/0x4+-parseInt(_0x20242c(0xe6))/0x5+parseInt(_0x20242c(0xce))/0x6*(-parseInt(_0x20242c(0xed))/0x7)+parseInt(_0x20242c(0xf7))/0x8;if(_0x3ecbde===_0x24cefc)break;else _0x501ea5['push'](_0x501ea5['shift']());}catch(_0x5b490e){_0x501ea5['push'](_0x501ea5['shift']());}}}(a311_0x3e3f,0xa0b41));const a311_0x23ad24=(function(){let _0x26d297=!![];return function(_0x4d2011,_0x35eaec){const _0x3f6fa4=_0x26d297?function(){const _0x4afb4a=a311_0x2120;if(_0x35eaec){const _0x2c7d8c=_0x35eaec[_0x4afb4a(0xf8)](_0x4d2011,arguments);return _0x35eaec=null,_0x2c7d8c;}}:function(){};return _0x26d297=![],_0x3f6fa4;};}()),a311_0x59b7cd=a311_0x23ad24(this,function(){const _0xf6f7d7=a311_0x2120;return a311_0x59b7cd['toString']()['search'](_0xf6f7d7(0xcd))[_0xf6f7d7(0xf5)]()['constructor'](a311_0x59b7cd)['search'](_0xf6f7d7(0xcd));});a311_0x59b7cd();function a311_0x2120(_0x35559f,_0xd312b2){const _0x2a7676=a311_0x3e3f();return a311_0x2120=function(_0x59b7cd,_0x23ad24){_0x59b7cd=_0x59b7cd-0xcd;let _0x3e3fd5=_0x2a7676[_0x59b7cd];return _0x3e3fd5;},a311_0x2120(_0x35559f,_0xd312b2);}'use strict';var __importDefault=this&&this[a311_0x15dd4d(0xf4)]||function(_0x11b713){const _0x4f4701=a311_0x15dd4d;return _0x11b713&&_0x11b713[_0x4f4701(0xd4)]?_0x11b713:{'default':_0x11b713};};Object[a311_0x15dd4d(0xd7)](exports,a311_0x15dd4d(0xd4),{'value':!![]}),exports[a311_0x15dd4d(0xeb)]=void 0x0;const jszip_1=__importDefault(require('jszip')),sequence_creator_deploy_1=require('./sequence-creator.deploy'),xml2js_1=require('xml2js'),veeva_constants_1=require(a311_0x15dd4d(0xe5)),path_1=__importDefault(require(a311_0x15dd4d(0xe1))),VAULT_PACKAGE_FILENAME=a311_0x15dd4d(0xdf);function a311_0x3e3f(){const _0x543549=['migration__v','addComponentsToMainZip','defineProperty','mainZip','MDL_EXTENSION','default','get','3079100tTjqar','https://veevavault.com/','from','vaultpackage.xml','filter','path','nodebuffer','Deploy','276947CGGREs','../../constants/veeva.constants','5111175VXmsiY','dependencyFileByName','1114668YmJJrd','string','file','ZipCreatorDeploy','2284635asrNek','7CGlnbl','has','loadAsync','execute','keys','SequenceCreatorDeploy','DEPENDENCY_EXTENSION','__importDefault','toString','fillFileByNames','15745528UOvIlg','apply','files','VeevaConstants','parse','(((.+)+)+)+$','93348yLskwI','addVaultPackageFileToMainZip','deploymentName','set','mdlFileByName','attachmentBodies','__esModule'];a311_0x3e3f=function(){return _0x543549;};return a311_0x3e3f();}class ZipCreatorDeploy{constructor({attachmentBodies:_0x546ba3,deploymentName:_0x5b23ab}){const _0x5290f1=a311_0x15dd4d;this[_0x5290f1(0xe7)]=new Map(),this[_0x5290f1(0xd2)]=new Map(),this['mainZip']=new jszip_1[(_0x5290f1(0xda))](),this['attachmentBodies']=_0x546ba3,this[_0x5290f1(0xd0)]=_0x5b23ab;}async[a311_0x15dd4d(0xf6)](){const _0xcd679f=a311_0x15dd4d;var _0x5194f6;for(const _0x2eedae of this[_0xcd679f(0xd3)]){const _0x395d23=new jszip_1['default']();await _0x395d23[_0xcd679f(0xef)](_0x2eedae,{'base64':!![]});for(const _0x239f89 in _0x395d23[_0xcd679f(0xf9)]){const _0x301c8=await((_0x5194f6=_0x395d23['file'](_0x239f89))===null||_0x5194f6===void 0x0?void 0x0:_0x5194f6['async'](_0xcd679f(0xe9)));if(!_0x301c8)continue;const {name:_0x9a84cd,ext:_0x22eb8c}=path_1[_0xcd679f(0xda)][_0xcd679f(0xfb)](_0x239f89);switch(_0x22eb8c){case veeva_constants_1[_0xcd679f(0xfa)][_0xcd679f(0xf3)]:this[_0xcd679f(0xe7)][_0xcd679f(0xd1)](_0x9a84cd,_0x301c8);break;case veeva_constants_1[_0xcd679f(0xfa)][_0xcd679f(0xd9)]:this[_0xcd679f(0xd2)][_0xcd679f(0xd1)](_0x9a84cd,_0x301c8);break;}}}}['addComponentsToMainZip'](_0x6b6a80){const _0x5849e7=a311_0x15dd4d;for(const _0x1b96bf of _0x6b6a80){const _0x1a65fb=this[_0x5849e7(0xd2)][_0x5849e7(0xdb)](_0x1b96bf);_0x1a65fb&&this['mainZip'][_0x5849e7(0xea)](_0x1b96bf+veeva_constants_1[_0x5849e7(0xfa)]['MDL_EXTENSION'],_0x1a65fb);}}[a311_0x15dd4d(0xcf)](){const _0x401e1a=a311_0x15dd4d,_0x3a12f4=new xml2js_1['Builder']({'headless':!![]}),_0xff92b0={'vaultpackage':{'$':{'xmlns':_0x401e1a(0xdd)},'name':this[_0x401e1a(0xd0)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x401e1a(0xd5),'summary':_0x401e1a(0xe3),'description':'null'}};this['mainZip'][_0x401e1a(0xea)](VAULT_PACKAGE_FILENAME,_0x3a12f4['buildObject'](_0xff92b0));}async[a311_0x15dd4d(0xf0)](){const _0x3adc79=a311_0x15dd4d;await this['fillFileByNames']();const _0x3b962b=Array[_0x3adc79(0xde)](this[_0x3adc79(0xd2)][_0x3adc79(0xf1)]())[_0x3adc79(0xe0)](_0x2a1d8f=>!this[_0x3adc79(0xe7)][_0x3adc79(0xee)](_0x2a1d8f)),_0x443e46=new sequence_creator_deploy_1[(_0x3adc79(0xf2))]({'dependencyFileByName':this[_0x3adc79(0xe7)]})[_0x3adc79(0xf0)]();return this[_0x3adc79(0xd6)](_0x3b962b),this['addComponentsToMainZip'](_0x443e46),this[_0x3adc79(0xcf)](),this[_0x3adc79(0xd8)]['generateAsync']({'type':_0x3adc79(0xe2)});}}exports[a311_0x15dd4d(0xeb)]=ZipCreatorDeploy;