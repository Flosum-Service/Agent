const a343_0x1ba332=a343_0x4788;(function(_0x16398d,_0x429803){const _0x5a8bb9=a343_0x4788,_0x435c49=_0x16398d();while(!![]){try{const _0x535c4b=parseInt(_0x5a8bb9(0x15f))/0x1*(-parseInt(_0x5a8bb9(0x169))/0x2)+-parseInt(_0x5a8bb9(0x159))/0x3*(-parseInt(_0x5a8bb9(0x16d))/0x4)+parseInt(_0x5a8bb9(0x16f))/0x5+parseInt(_0x5a8bb9(0x168))/0x6+parseInt(_0x5a8bb9(0x14d))/0x7+parseInt(_0x5a8bb9(0x152))/0x8+-parseInt(_0x5a8bb9(0x150))/0x9;if(_0x535c4b===_0x429803)break;else _0x435c49['push'](_0x435c49['shift']());}catch(_0x18ec3e){_0x435c49['push'](_0x435c49['shift']());}}}(a343_0x3b93,0x9d5e9));const a343_0x1059b0=(function(){let _0x6f199a=!![];return function(_0x20c20b,_0x496039){const _0x2f21fe=_0x6f199a?function(){const _0x470c2f=a343_0x4788;if(_0x496039){const _0x92049b=_0x496039[_0x470c2f(0x15b)](_0x20c20b,arguments);return _0x496039=null,_0x92049b;}}:function(){};return _0x6f199a=![],_0x2f21fe;};}()),a343_0x3b49fc=a343_0x1059b0(this,function(){const _0x102c75=a343_0x4788;return a343_0x3b49fc[_0x102c75(0x14f)]()['search'](_0x102c75(0x167))['toString']()[_0x102c75(0x160)](a343_0x3b49fc)['search']('(((.+)+)+)+$');});a343_0x3b49fc();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x19b2b2){const _0x5af57e=a343_0x4788;return _0x19b2b2&&_0x19b2b2[_0x5af57e(0x16b)]?_0x19b2b2:{'default':_0x19b2b2};};Object['defineProperty'](exports,a343_0x1ba332(0x16b),{'value':!![]}),exports[a343_0x1ba332(0x162)]=void 0x0;function a343_0x3b93(){const _0x1168f5=['constructor','buildObject','ZipCreatorDeploy','Builder','file','VeevaConstants','string','(((.+)+)+)+$','495888Wybjwe','2269576oxUyah','parse','__esModule','has','1242860jRUdJC','migration__v','6175810FhtWPf','addComponentsToMainZip','dependencyFileByName','set','addVaultPackageFileToMainZip','SequenceCreatorDeploy','get','path','Deploy','keys','fillFileByNames','loadAsync','attachmentBodies','default','7810488kknIPF','nodebuffer','toString','8735283uYDHHQ','deploymentName','45208tEMJkM','generateAsync','files','https://veevavault.com/','mdlFileByName','mainZip','null','3SdUTNi','../../constants/veeva.constants','apply','xml2js','Flosum','execute','1AJZvdt'];a343_0x3b93=function(){return _0x1168f5;};return a343_0x3b93();}const jszip_1=__importDefault(require('jszip')),sequence_creator_deploy_1=require('./sequence-creator.deploy'),xml2js_1=require(a343_0x1ba332(0x15c)),veeva_constants_1=require(a343_0x1ba332(0x15a)),path_1=__importDefault(require(a343_0x1ba332(0x146))),VAULT_PACKAGE_FILENAME='vaultpackage.xml';function a343_0x4788(_0x4049cd,_0x5ce04f){const _0x39f734=a343_0x3b93();return a343_0x4788=function(_0x3b49fc,_0x1059b0){_0x3b49fc=_0x3b49fc-0x141;let _0x3b93e1=_0x39f734[_0x3b49fc];return _0x3b93e1;},a343_0x4788(_0x4049cd,_0x5ce04f);}class ZipCreatorDeploy{constructor({attachmentBodies:_0x5727c5,deploymentName:_0x43edf6}){const _0x3d0baa=a343_0x1ba332;this[_0x3d0baa(0x141)]=new Map(),this['mdlFileByName']=new Map(),this['mainZip']=new jszip_1[(_0x3d0baa(0x14c))](),this[_0x3d0baa(0x14b)]=_0x5727c5,this[_0x3d0baa(0x151)]=_0x43edf6;}async['fillFileByNames'](){const _0x2141cd=a343_0x1ba332;var _0x12ff1e;for(const _0x1aca99 of this[_0x2141cd(0x14b)]){const _0x5e8a05=new jszip_1[(_0x2141cd(0x14c))]();await _0x5e8a05[_0x2141cd(0x14a)](_0x1aca99,{'base64':!![]});for(const _0x201b49 in _0x5e8a05[_0x2141cd(0x154)]){const _0x31f3e1=await((_0x12ff1e=_0x5e8a05[_0x2141cd(0x164)](_0x201b49))===null||_0x12ff1e===void 0x0?void 0x0:_0x12ff1e['async'](_0x2141cd(0x166)));if(!_0x31f3e1)continue;const {name:_0x593f73,ext:_0x25d1c5}=path_1[_0x2141cd(0x14c)][_0x2141cd(0x16a)](_0x201b49);switch(_0x25d1c5){case veeva_constants_1[_0x2141cd(0x165)]['DEPENDENCY_EXTENSION']:this['dependencyFileByName']['set'](_0x593f73,_0x31f3e1);break;case veeva_constants_1[_0x2141cd(0x165)]['MDL_EXTENSION']:this[_0x2141cd(0x156)][_0x2141cd(0x142)](_0x593f73,_0x31f3e1);break;}}}}['addComponentsToMainZip'](_0x4fe366){const _0xde6f54=a343_0x1ba332;for(const _0x12886c of _0x4fe366){const _0x22ea90=this['mdlFileByName'][_0xde6f54(0x145)](_0x12886c);_0x22ea90&&this[_0xde6f54(0x157)][_0xde6f54(0x164)](_0x12886c+veeva_constants_1[_0xde6f54(0x165)]['MDL_EXTENSION'],_0x22ea90);}}[a343_0x1ba332(0x143)](){const _0x54c87d=a343_0x1ba332,_0x340211=new xml2js_1[(_0x54c87d(0x163))]({'headless':!![]}),_0x405a48={'vaultpackage':{'$':{'xmlns':_0x54c87d(0x155)},'name':this['deploymentName'],'source':{'vault':undefined,'author':_0x54c87d(0x15d)},'packagetype':_0x54c87d(0x16e),'summary':_0x54c87d(0x147),'description':_0x54c87d(0x158)}};this[_0x54c87d(0x157)][_0x54c87d(0x164)](VAULT_PACKAGE_FILENAME,_0x340211[_0x54c87d(0x161)](_0x405a48));}async['execute'](){const _0x27d310=a343_0x1ba332;await this[_0x27d310(0x149)]();const _0x4cc16a=Array['from'](this[_0x27d310(0x156)][_0x27d310(0x148)]())['filter'](_0x509433=>!this[_0x27d310(0x141)][_0x27d310(0x16c)](_0x509433)),_0x5e16be=new sequence_creator_deploy_1[(_0x27d310(0x144))]({'dependencyFileByName':this[_0x27d310(0x141)]})[_0x27d310(0x15e)]();return this['addComponentsToMainZip'](_0x4cc16a),this[_0x27d310(0x170)](_0x5e16be),this[_0x27d310(0x143)](),this[_0x27d310(0x157)][_0x27d310(0x153)]({'type':_0x27d310(0x14e)});}}exports[a343_0x1ba332(0x162)]=ZipCreatorDeploy;