const a354_0x3845d4=a354_0xc32c;function a354_0x4063(){const _0x31a6dc=['path','__esModule','constructor','./sequence-creator.deploy','default','2124000ZsEnEM','__importDefault','(((.+)+)+)+$','execute','buildObject','set','addVaultPackageFileToMainZip','mainZip','keys','4570601gTqVNT','26532zrRRRP','file','Flosum','generateAsync','get','DEPENDENCY_EXTENSION','55767qodKJd','ZipCreatorDeploy','jszip','files','from','Builder','attachmentBodies','addComponentsToMainZip','search','toString','2490720ebjFeM','3252900qERFDk','migration__v','Deploy','VeevaConstants','string','async','https://veevavault.com/','apply','deploymentName','../../constants/veeva.constants','defineProperty','MDL_EXTENSION','24DzJVXs','dependencyFileByName','loadAsync','xml2js','fillFileByNames','mdlFileByName','nodebuffer','819001sSUBMq','vaultpackage.xml'];a354_0x4063=function(){return _0x31a6dc;};return a354_0x4063();}(function(_0x44e667,_0x363900){const _0x199f14=a354_0xc32c,_0x199f96=_0x44e667();while(!![]){try{const _0x110571=-parseInt(_0x199f14(0x1b7))/0x1+parseInt(_0x199f14(0x1be))/0x2+parseInt(_0x199f14(0x1ce))/0x3*(parseInt(_0x199f14(0x1e5))/0x4)+parseInt(_0x199f14(0x1d9))/0x5+parseInt(_0x199f14(0x1c8))/0x6+-parseInt(_0x199f14(0x1c7))/0x7+parseInt(_0x199f14(0x1d8))/0x8;if(_0x110571===_0x363900)break;else _0x199f96['push'](_0x199f96['shift']());}catch(_0x398719){_0x199f96['push'](_0x199f96['shift']());}}}(a354_0x4063,0xa311c));const a354_0x15731c=(function(){let _0x26cafb=!![];return function(_0x59d792,_0x5cec2c){const _0x4a3b30=_0x26cafb?function(){const _0x58d5c8=a354_0xc32c;if(_0x5cec2c){const _0x20dd3f=_0x5cec2c[_0x58d5c8(0x1e0)](_0x59d792,arguments);return _0x5cec2c=null,_0x20dd3f;}}:function(){};return _0x26cafb=![],_0x4a3b30;};}()),a354_0x33aacb=a354_0x15731c(this,function(){const _0xb0ff0b=a354_0xc32c;return a354_0x33aacb[_0xb0ff0b(0x1d7)]()['search'](_0xb0ff0b(0x1c0))['toString']()[_0xb0ff0b(0x1bb)](a354_0x33aacb)[_0xb0ff0b(0x1d6)]('(((.+)+)+)+$');});a354_0x33aacb();function a354_0xc32c(_0x2e283c,_0x488242){const _0x314027=a354_0x4063();return a354_0xc32c=function(_0x33aacb,_0x15731c){_0x33aacb=_0x33aacb-0x1b2;let _0x406347=_0x314027[_0x33aacb];return _0x406347;},a354_0xc32c(_0x2e283c,_0x488242);}'use strict';var __importDefault=this&&this[a354_0x3845d4(0x1bf)]||function(_0x4e8983){const _0xdc8a43=a354_0x3845d4;return _0x4e8983&&_0x4e8983[_0xdc8a43(0x1ba)]?_0x4e8983:{'default':_0x4e8983};};Object[a354_0x3845d4(0x1e3)](exports,a354_0x3845d4(0x1ba),{'value':!![]}),exports['ZipCreatorDeploy']=void 0x0;const jszip_1=__importDefault(require(a354_0x3845d4(0x1d0))),sequence_creator_deploy_1=require(a354_0x3845d4(0x1bc)),xml2js_1=require(a354_0x3845d4(0x1b3)),veeva_constants_1=require(a354_0x3845d4(0x1e2)),path_1=__importDefault(require(a354_0x3845d4(0x1b9))),VAULT_PACKAGE_FILENAME=a354_0x3845d4(0x1b8);class ZipCreatorDeploy{constructor({attachmentBodies:_0x13c900,deploymentName:_0x2ea945}){const _0x446915=a354_0x3845d4;this['dependencyFileByName']=new Map(),this[_0x446915(0x1b5)]=new Map(),this[_0x446915(0x1c5)]=new jszip_1[(_0x446915(0x1bd))](),this[_0x446915(0x1d4)]=_0x13c900,this['deploymentName']=_0x2ea945;}async['fillFileByNames'](){const _0x22253b=a354_0x3845d4;var _0x25b94d;for(const _0x592e8b of this['attachmentBodies']){const _0x1d4226=new jszip_1[(_0x22253b(0x1bd))]();await _0x1d4226[_0x22253b(0x1b2)](_0x592e8b,{'base64':!![]});for(const _0x1bc98c in _0x1d4226[_0x22253b(0x1d1)]){const _0x10bd15=await((_0x25b94d=_0x1d4226[_0x22253b(0x1c9)](_0x1bc98c))===null||_0x25b94d===void 0x0?void 0x0:_0x25b94d[_0x22253b(0x1de)](_0x22253b(0x1dd)));if(!_0x10bd15)continue;const {name:_0x49cc68,ext:_0x554b80}=path_1['default']['parse'](_0x1bc98c);switch(_0x554b80){case veeva_constants_1[_0x22253b(0x1dc)][_0x22253b(0x1cd)]:this[_0x22253b(0x1e6)][_0x22253b(0x1c3)](_0x49cc68,_0x10bd15);break;case veeva_constants_1['VeevaConstants'][_0x22253b(0x1e4)]:this['mdlFileByName'][_0x22253b(0x1c3)](_0x49cc68,_0x10bd15);break;}}}}[a354_0x3845d4(0x1d5)](_0x2e164d){const _0x176e35=a354_0x3845d4;for(const _0x4dc661 of _0x2e164d){const _0x34a13=this[_0x176e35(0x1b5)][_0x176e35(0x1cc)](_0x4dc661);_0x34a13&&this[_0x176e35(0x1c5)][_0x176e35(0x1c9)](_0x4dc661+veeva_constants_1['VeevaConstants'][_0x176e35(0x1e4)],_0x34a13);}}['addVaultPackageFileToMainZip'](){const _0x1e56ad=a354_0x3845d4,_0x5c0d2a=new xml2js_1[(_0x1e56ad(0x1d3))]({'headless':!![]}),_0x385dca={'vaultpackage':{'$':{'xmlns':_0x1e56ad(0x1df)},'name':this[_0x1e56ad(0x1e1)],'source':{'vault':undefined,'author':_0x1e56ad(0x1ca)},'packagetype':_0x1e56ad(0x1da),'summary':_0x1e56ad(0x1db),'description':'null'}};this[_0x1e56ad(0x1c5)][_0x1e56ad(0x1c9)](VAULT_PACKAGE_FILENAME,_0x5c0d2a[_0x1e56ad(0x1c2)](_0x385dca));}async['execute'](){const _0x25223d=a354_0x3845d4;await this[_0x25223d(0x1b4)]();const _0x3aa129=Array[_0x25223d(0x1d2)](this[_0x25223d(0x1b5)][_0x25223d(0x1c6)]())['filter'](_0x3b241c=>!this[_0x25223d(0x1e6)]['has'](_0x3b241c)),_0x288428=new sequence_creator_deploy_1['SequenceCreatorDeploy']({'dependencyFileByName':this[_0x25223d(0x1e6)]})[_0x25223d(0x1c1)]();return this[_0x25223d(0x1d5)](_0x3aa129),this[_0x25223d(0x1d5)](_0x288428),this[_0x25223d(0x1c4)](),this[_0x25223d(0x1c5)][_0x25223d(0x1cb)]({'type':_0x25223d(0x1b6)});}}exports[a354_0x3845d4(0x1cf)]=ZipCreatorDeploy;