const a327_0x252778=a327_0x2fef;(function(_0x86ae48,_0x25f584){const _0x437770=a327_0x2fef,_0xccd487=_0x86ae48();while(!![]){try{const _0x27e2b0=-parseInt(_0x437770(0x147))/0x1+-parseInt(_0x437770(0x155))/0x2+-parseInt(_0x437770(0x14b))/0x3+parseInt(_0x437770(0x165))/0x4*(-parseInt(_0x437770(0x13a))/0x5)+-parseInt(_0x437770(0x15a))/0x6*(-parseInt(_0x437770(0x159))/0x7)+-parseInt(_0x437770(0x151))/0x8*(-parseInt(_0x437770(0x148))/0x9)+parseInt(_0x437770(0x142))/0xa;if(_0x27e2b0===_0x25f584)break;else _0xccd487['push'](_0xccd487['shift']());}catch(_0x5e657c){_0xccd487['push'](_0xccd487['shift']());}}}(a327_0x58c7,0xea192));const a327_0x15e384=(function(){let _0x1af11e=!![];return function(_0x546f96,_0x279d14){const _0x2c1c05=_0x1af11e?function(){const _0x17d913=a327_0x2fef;if(_0x279d14){const _0x3bf0a6=_0x279d14[_0x17d913(0x13e)](_0x546f96,arguments);return _0x279d14=null,_0x3bf0a6;}}:function(){};return _0x1af11e=![],_0x2c1c05;};}()),a327_0x47652f=a327_0x15e384(this,function(){const _0x112813=a327_0x2fef;return a327_0x47652f['toString']()[_0x112813(0x13f)](_0x112813(0x166))['toString']()['constructor'](a327_0x47652f)['search'](_0x112813(0x166));});a327_0x47652f();function a327_0x58c7(){const _0x1bd3d2=['buildObject','370680PTgBDB','243dpcVmq','addComponentsToMainZip','xml2js','157218GyrOPS','../../constants/veeva.constants','filter','Deploy','default','MDL_EXTENSION','115472TdOOrW','has','set','Builder','2803532OIiyom','files','__importDefault','loadAsync','111349poswKj','222jCBJyl','mainZip','addVaultPackageFileToMainZip','VeevaConstants','execute','deploymentName','https://veevavault.com/','__esModule','fillFileByNames','path','migration__v','16MZNAFJ','(((.+)+)+)+$','./sequence-creator.deploy','vaultpackage.xml','SequenceCreatorDeploy','parse','string','file','dependencyFileByName','134920NdMqxT','mdlFileByName','attachmentBodies','from','apply','search','null','jszip','19133770ugvjDg','get','defineProperty','ZipCreatorDeploy'];a327_0x58c7=function(){return _0x1bd3d2;};return a327_0x58c7();}function a327_0x2fef(_0x361efa,_0x1561eb){const _0x301d3b=a327_0x58c7();return a327_0x2fef=function(_0x47652f,_0x15e384){_0x47652f=_0x47652f-0x136;let _0x58c742=_0x301d3b[_0x47652f];return _0x58c742;},a327_0x2fef(_0x361efa,_0x1561eb);}'use strict';var __importDefault=this&&this[a327_0x252778(0x157)]||function(_0x5634b1){const _0x1730d4=a327_0x252778;return _0x5634b1&&_0x5634b1[_0x1730d4(0x161)]?_0x5634b1:{'default':_0x5634b1};};Object[a327_0x252778(0x144)](exports,a327_0x252778(0x161),{'value':!![]}),exports[a327_0x252778(0x145)]=void 0x0;const jszip_1=__importDefault(require(a327_0x252778(0x141))),sequence_creator_deploy_1=require(a327_0x252778(0x167)),xml2js_1=require(a327_0x252778(0x14a)),veeva_constants_1=require(a327_0x252778(0x14c)),path_1=__importDefault(require(a327_0x252778(0x163))),VAULT_PACKAGE_FILENAME=a327_0x252778(0x168);class ZipCreatorDeploy{constructor({attachmentBodies:_0x4c8f07,deploymentName:_0x44b6fd}){const _0x5bd61c=a327_0x252778;this[_0x5bd61c(0x139)]=new Map(),this[_0x5bd61c(0x13b)]=new Map(),this[_0x5bd61c(0x15b)]=new jszip_1[(_0x5bd61c(0x14f))](),this[_0x5bd61c(0x13c)]=_0x4c8f07,this[_0x5bd61c(0x15f)]=_0x44b6fd;}async[a327_0x252778(0x162)](){const _0x36ff2f=a327_0x252778;var _0x38a9a7;for(const _0x4c393d of this['attachmentBodies']){const _0x5c4836=new jszip_1['default']();await _0x5c4836[_0x36ff2f(0x158)](_0x4c393d,{'base64':!![]});for(const _0x3e21af in _0x5c4836[_0x36ff2f(0x156)]){const _0x577fa4=await((_0x38a9a7=_0x5c4836[_0x36ff2f(0x138)](_0x3e21af))===null||_0x38a9a7===void 0x0?void 0x0:_0x38a9a7['async'](_0x36ff2f(0x137)));if(!_0x577fa4)continue;const {name:_0x30a908,ext:_0x5f47be}=path_1['default'][_0x36ff2f(0x136)](_0x3e21af);switch(_0x5f47be){case veeva_constants_1[_0x36ff2f(0x15d)]['DEPENDENCY_EXTENSION']:this[_0x36ff2f(0x139)][_0x36ff2f(0x153)](_0x30a908,_0x577fa4);break;case veeva_constants_1[_0x36ff2f(0x15d)][_0x36ff2f(0x150)]:this[_0x36ff2f(0x13b)][_0x36ff2f(0x153)](_0x30a908,_0x577fa4);break;}}}}[a327_0x252778(0x149)](_0x5ae7b2){const _0x262420=a327_0x252778;for(const _0x1153a3 of _0x5ae7b2){const _0xaf18ad=this[_0x262420(0x13b)][_0x262420(0x143)](_0x1153a3);_0xaf18ad&&this[_0x262420(0x15b)][_0x262420(0x138)](_0x1153a3+veeva_constants_1['VeevaConstants'][_0x262420(0x150)],_0xaf18ad);}}[a327_0x252778(0x15c)](){const _0x444750=a327_0x252778,_0x2f44eb=new xml2js_1[(_0x444750(0x154))]({'headless':!![]}),_0x534632={'vaultpackage':{'$':{'xmlns':_0x444750(0x160)},'name':this[_0x444750(0x15f)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x444750(0x164),'summary':_0x444750(0x14e),'description':_0x444750(0x140)}};this[_0x444750(0x15b)][_0x444750(0x138)](VAULT_PACKAGE_FILENAME,_0x2f44eb[_0x444750(0x146)](_0x534632));}async[a327_0x252778(0x15e)](){const _0x213745=a327_0x252778;await this[_0x213745(0x162)]();const _0x2c1ed3=Array[_0x213745(0x13d)](this[_0x213745(0x13b)]['keys']())[_0x213745(0x14d)](_0x5c04d3=>!this[_0x213745(0x139)][_0x213745(0x152)](_0x5c04d3)),_0xdd00b9=new sequence_creator_deploy_1[(_0x213745(0x169))]({'dependencyFileByName':this[_0x213745(0x139)]})[_0x213745(0x15e)]();return this[_0x213745(0x149)](_0x2c1ed3),this['addComponentsToMainZip'](_0xdd00b9),this['addVaultPackageFileToMainZip'](),this[_0x213745(0x15b)]['generateAsync']({'type':'nodebuffer'});}}exports[a327_0x252778(0x145)]=ZipCreatorDeploy;