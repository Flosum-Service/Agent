const a356_0x69d0b=a356_0x3374;function a356_0x3374(_0x88fe13,_0x72838d){const _0x526fb9=a356_0x59c2();return a356_0x3374=function(_0x20125d,_0x50bd5b){_0x20125d=_0x20125d-0x118;let _0x59c240=_0x526fb9[_0x20125d];return _0x59c240;},a356_0x3374(_0x88fe13,_0x72838d);}(function(_0x44327e,_0x3b04cc){const _0x1dcb9a=a356_0x3374,_0x3117c8=_0x44327e();while(!![]){try{const _0x5d2f2d=-parseInt(_0x1dcb9a(0x142))/0x1+-parseInt(_0x1dcb9a(0x12b))/0x2+-parseInt(_0x1dcb9a(0x149))/0x3+-parseInt(_0x1dcb9a(0x130))/0x4+parseInt(_0x1dcb9a(0x11f))/0x5+parseInt(_0x1dcb9a(0x11e))/0x6*(parseInt(_0x1dcb9a(0x135))/0x7)+-parseInt(_0x1dcb9a(0x13f))/0x8*(-parseInt(_0x1dcb9a(0x12a))/0x9);if(_0x5d2f2d===_0x3b04cc)break;else _0x3117c8['push'](_0x3117c8['shift']());}catch(_0x54b25e){_0x3117c8['push'](_0x3117c8['shift']());}}}(a356_0x59c2,0x2033e));const a356_0x50bd5b=(function(){let _0x4b2711=!![];return function(_0x4b0ced,_0x43a0cb){const _0x2f186b=_0x4b2711?function(){if(_0x43a0cb){const _0x199ab5=_0x43a0cb['apply'](_0x4b0ced,arguments);return _0x43a0cb=null,_0x199ab5;}}:function(){};return _0x4b2711=![],_0x2f186b;};}()),a356_0x20125d=a356_0x50bd5b(this,function(){const _0x1a7273=a356_0x3374;return a356_0x20125d[_0x1a7273(0x13c)]()[_0x1a7273(0x126)](_0x1a7273(0x138))[_0x1a7273(0x13c)]()[_0x1a7273(0x12f)](a356_0x20125d)[_0x1a7273(0x126)]('(((.+)+)+)+$');});function a356_0x59c2(){const _0x61cf90=['mdlFileByName','__esModule','async','file','default','DEPENDENCY_EXTENSION','MDL_EXTENSION','402QYKgFJ','986505bVeTZC','Flosum','ZipCreatorDeploy','string','filter','SequenceCreatorDeploy','https://veevavault.com/','search','execute','Deploy','VeevaConstants','1353879zuILJg','70102ESnaOM','addComponentsToMainZip','buildObject','jszip','constructor','658668wJATvE','Builder','files','loadAsync','parse','21770yKVkCp','set','__importDefault','(((.+)+)+)+$','deploymentName','has','migration__v','toString','path','attachmentBodies','8WYPFPJ','xml2js','fillFileByNames','6682Gvmeqy','from','vaultpackage.xml','get','mainZip','generateAsync','dependencyFileByName','653400FvenCz','../../constants/veeva.constants','defineProperty'];a356_0x59c2=function(){return _0x61cf90;};return a356_0x59c2();}a356_0x20125d();'use strict';var __importDefault=this&&this[a356_0x69d0b(0x137)]||function(_0x408202){const _0x425adc=a356_0x69d0b;return _0x408202&&_0x408202[_0x425adc(0x118)]?_0x408202:{'default':_0x408202};};Object[a356_0x69d0b(0x14b)](exports,a356_0x69d0b(0x118),{'value':!![]}),exports[a356_0x69d0b(0x121)]=void 0x0;const jszip_1=__importDefault(require(a356_0x69d0b(0x12e))),sequence_creator_deploy_1=require('./sequence-creator.deploy'),xml2js_1=require(a356_0x69d0b(0x140)),veeva_constants_1=require(a356_0x69d0b(0x14a)),path_1=__importDefault(require(a356_0x69d0b(0x13d))),VAULT_PACKAGE_FILENAME=a356_0x69d0b(0x144);class ZipCreatorDeploy{constructor({attachmentBodies:_0x1b3bb0,deploymentName:_0x38e2cf}){const _0x141746=a356_0x69d0b;this[_0x141746(0x148)]=new Map(),this['mdlFileByName']=new Map(),this['mainZip']=new jszip_1[(_0x141746(0x11b))](),this[_0x141746(0x13e)]=_0x1b3bb0,this[_0x141746(0x139)]=_0x38e2cf;}async[a356_0x69d0b(0x141)](){const _0xb3e310=a356_0x69d0b;var _0x19aba7;for(const _0x324f31 of this[_0xb3e310(0x13e)]){const _0x2e4621=new jszip_1[(_0xb3e310(0x11b))]();await _0x2e4621[_0xb3e310(0x133)](_0x324f31,{'base64':!![]});for(const _0x476f8d in _0x2e4621[_0xb3e310(0x132)]){const _0x205ce3=await((_0x19aba7=_0x2e4621['file'](_0x476f8d))===null||_0x19aba7===void 0x0?void 0x0:_0x19aba7[_0xb3e310(0x119)](_0xb3e310(0x122)));if(!_0x205ce3)continue;const {name:_0x5aacbe,ext:_0xe3ab58}=path_1[_0xb3e310(0x11b)][_0xb3e310(0x134)](_0x476f8d);switch(_0xe3ab58){case veeva_constants_1[_0xb3e310(0x129)][_0xb3e310(0x11c)]:this[_0xb3e310(0x148)][_0xb3e310(0x136)](_0x5aacbe,_0x205ce3);break;case veeva_constants_1['VeevaConstants']['MDL_EXTENSION']:this[_0xb3e310(0x14c)][_0xb3e310(0x136)](_0x5aacbe,_0x205ce3);break;}}}}[a356_0x69d0b(0x12c)](_0x4c4ed8){const _0x1d9ab1=a356_0x69d0b;for(const _0x5cf22f of _0x4c4ed8){const _0x1c862d=this['mdlFileByName'][_0x1d9ab1(0x145)](_0x5cf22f);_0x1c862d&&this['mainZip'][_0x1d9ab1(0x11a)](_0x5cf22f+veeva_constants_1[_0x1d9ab1(0x129)][_0x1d9ab1(0x11d)],_0x1c862d);}}['addVaultPackageFileToMainZip'](){const _0x2f3e51=a356_0x69d0b,_0x255f84=new xml2js_1[(_0x2f3e51(0x131))]({'headless':!![]}),_0x41c882={'vaultpackage':{'$':{'xmlns':_0x2f3e51(0x125)},'name':this['deploymentName'],'source':{'vault':undefined,'author':_0x2f3e51(0x120)},'packagetype':_0x2f3e51(0x13b),'summary':_0x2f3e51(0x128),'description':'null'}};this[_0x2f3e51(0x146)]['file'](VAULT_PACKAGE_FILENAME,_0x255f84[_0x2f3e51(0x12d)](_0x41c882));}async[a356_0x69d0b(0x127)](){const _0x3c0ac=a356_0x69d0b;await this[_0x3c0ac(0x141)]();const _0x107061=Array[_0x3c0ac(0x143)](this[_0x3c0ac(0x14c)]['keys']())[_0x3c0ac(0x123)](_0x249231=>!this[_0x3c0ac(0x148)][_0x3c0ac(0x13a)](_0x249231)),_0x162a83=new sequence_creator_deploy_1[(_0x3c0ac(0x124))]({'dependencyFileByName':this[_0x3c0ac(0x148)]})[_0x3c0ac(0x127)]();return this['addComponentsToMainZip'](_0x107061),this[_0x3c0ac(0x12c)](_0x162a83),this['addVaultPackageFileToMainZip'](),this['mainZip'][_0x3c0ac(0x147)]({'type':'nodebuffer'});}}exports['ZipCreatorDeploy']=ZipCreatorDeploy;