const a355_0xdce5ff=a355_0x454b;function a355_0x8a0e(){const _0x38d7a8=['addVaultPackageFileToMainZip','__esModule','https://veevavault.com/','null','fillFileByNames','set','mdlFileByName','from','../../constants/veeva.constants','110672ijXmNP','loadAsync','file','MDL_EXTENSION','vaultpackage.xml','path','2mKnaHC','VeevaConstants','filter','Deploy','constructor','execute','./sequence-creator.deploy','5240640OtxTbp','toString','deploymentName','jszip','3076965KAocld','ZipCreatorDeploy','564396ARpPhs','defineProperty','string','Builder','async','apply','DEPENDENCY_EXTENSION','8682UYuFeX','385rUBisv','default','addComponentsToMainZip','Flosum','xml2js','dependencyFileByName','buildObject','mainZip','432VHyWOM','(((.+)+)+)+$','attachmentBodies','generateAsync','208690HEwoVg','search','SequenceCreatorDeploy','3891261qyeiAa','parse','get'];a355_0x8a0e=function(){return _0x38d7a8;};return a355_0x8a0e();}(function(_0x183b14,_0x4501e6){const _0x3a31a9=a355_0x454b,_0x3782e3=_0x183b14();while(!![]){try{const _0x2e59f5=parseInt(_0x3a31a9(0x194))/0x1+-parseInt(_0x3a31a9(0x187))/0x2*(parseInt(_0x3a31a9(0x175))/0x3)+parseInt(_0x3a31a9(0x18e))/0x4+-parseInt(_0x3a31a9(0x192))/0x5+parseInt(_0x3a31a9(0x19b))/0x6*(parseInt(_0x3a31a9(0x166))/0x7)+parseInt(_0x3a31a9(0x181))/0x8*(parseInt(_0x3a31a9(0x16e))/0x9)+parseInt(_0x3a31a9(0x172))/0xa;if(_0x2e59f5===_0x4501e6)break;else _0x3782e3['push'](_0x3782e3['shift']());}catch(_0x2cbb68){_0x3782e3['push'](_0x3782e3['shift']());}}}(a355_0x8a0e,0xb1622));const a355_0xd22e9b=(function(){let _0x3684c9=!![];return function(_0x26edb0,_0x1e1171){const _0x2c6fe2=_0x3684c9?function(){const _0x4c4374=a355_0x454b;if(_0x1e1171){const _0x379320=_0x1e1171[_0x4c4374(0x199)](_0x26edb0,arguments);return _0x1e1171=null,_0x379320;}}:function(){};return _0x3684c9=![],_0x2c6fe2;};}()),a355_0x5282fc=a355_0xd22e9b(this,function(){const _0x31d7ef=a355_0x454b;return a355_0x5282fc[_0x31d7ef(0x18f)]()[_0x31d7ef(0x173)](_0x31d7ef(0x16f))[_0x31d7ef(0x18f)]()[_0x31d7ef(0x18b)](a355_0x5282fc)[_0x31d7ef(0x173)](_0x31d7ef(0x16f));});a355_0x5282fc();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2f6f21){const _0x1b5d20=a355_0x454b;return _0x2f6f21&&_0x2f6f21[_0x1b5d20(0x179)]?_0x2f6f21:{'default':_0x2f6f21};};Object[a355_0xdce5ff(0x195)](exports,a355_0xdce5ff(0x179),{'value':!![]}),exports[a355_0xdce5ff(0x193)]=void 0x0;function a355_0x454b(_0x528d88,_0x162381){const _0x56f94d=a355_0x8a0e();return a355_0x454b=function(_0x5282fc,_0xd22e9b){_0x5282fc=_0x5282fc-0x166;let _0x8a0e5c=_0x56f94d[_0x5282fc];return _0x8a0e5c;},a355_0x454b(_0x528d88,_0x162381);}const jszip_1=__importDefault(require(a355_0xdce5ff(0x191))),sequence_creator_deploy_1=require(a355_0xdce5ff(0x18d)),xml2js_1=require(a355_0xdce5ff(0x16a)),veeva_constants_1=require(a355_0xdce5ff(0x180)),path_1=__importDefault(require(a355_0xdce5ff(0x186))),VAULT_PACKAGE_FILENAME=a355_0xdce5ff(0x185);class ZipCreatorDeploy{constructor({attachmentBodies:_0x464777,deploymentName:_0x495ecb}){const _0x484bc4=a355_0xdce5ff;this[_0x484bc4(0x16b)]=new Map(),this[_0x484bc4(0x17e)]=new Map(),this[_0x484bc4(0x16d)]=new jszip_1[(_0x484bc4(0x167))](),this[_0x484bc4(0x170)]=_0x464777,this['deploymentName']=_0x495ecb;}async[a355_0xdce5ff(0x17c)](){const _0x1c127f=a355_0xdce5ff;var _0x4c19c7;for(const _0x6d8075 of this['attachmentBodies']){const _0x269f21=new jszip_1[(_0x1c127f(0x167))]();await _0x269f21[_0x1c127f(0x182)](_0x6d8075,{'base64':!![]});for(const _0x3a8f1c in _0x269f21['files']){const _0x83bd70=await((_0x4c19c7=_0x269f21['file'](_0x3a8f1c))===null||_0x4c19c7===void 0x0?void 0x0:_0x4c19c7[_0x1c127f(0x198)](_0x1c127f(0x196)));if(!_0x83bd70)continue;const {name:_0x12a40d,ext:_0x429e27}=path_1['default'][_0x1c127f(0x176)](_0x3a8f1c);switch(_0x429e27){case veeva_constants_1['VeevaConstants'][_0x1c127f(0x19a)]:this[_0x1c127f(0x16b)][_0x1c127f(0x17d)](_0x12a40d,_0x83bd70);break;case veeva_constants_1[_0x1c127f(0x188)][_0x1c127f(0x184)]:this[_0x1c127f(0x17e)][_0x1c127f(0x17d)](_0x12a40d,_0x83bd70);break;}}}}[a355_0xdce5ff(0x168)](_0x337fa3){const _0x525efd=a355_0xdce5ff;for(const _0x1b51ac of _0x337fa3){const _0x225b00=this[_0x525efd(0x17e)][_0x525efd(0x177)](_0x1b51ac);_0x225b00&&this[_0x525efd(0x16d)][_0x525efd(0x183)](_0x1b51ac+veeva_constants_1[_0x525efd(0x188)]['MDL_EXTENSION'],_0x225b00);}}[a355_0xdce5ff(0x178)](){const _0x29cc4f=a355_0xdce5ff,_0x4f03b1=new xml2js_1[(_0x29cc4f(0x197))]({'headless':!![]}),_0x30d6a1={'vaultpackage':{'$':{'xmlns':_0x29cc4f(0x17a)},'name':this[_0x29cc4f(0x190)],'source':{'vault':undefined,'author':_0x29cc4f(0x169)},'packagetype':'migration__v','summary':_0x29cc4f(0x18a),'description':_0x29cc4f(0x17b)}};this[_0x29cc4f(0x16d)][_0x29cc4f(0x183)](VAULT_PACKAGE_FILENAME,_0x4f03b1[_0x29cc4f(0x16c)](_0x30d6a1));}async[a355_0xdce5ff(0x18c)](){const _0x2fda09=a355_0xdce5ff;await this[_0x2fda09(0x17c)]();const _0x40e852=Array[_0x2fda09(0x17f)](this[_0x2fda09(0x17e)]['keys']())[_0x2fda09(0x189)](_0x500b80=>!this[_0x2fda09(0x16b)]['has'](_0x500b80)),_0x49301e=new sequence_creator_deploy_1[(_0x2fda09(0x174))]({'dependencyFileByName':this[_0x2fda09(0x16b)]})['execute']();return this[_0x2fda09(0x168)](_0x40e852),this[_0x2fda09(0x168)](_0x49301e),this[_0x2fda09(0x178)](),this[_0x2fda09(0x16d)][_0x2fda09(0x171)]({'type':'nodebuffer'});}}exports[a355_0xdce5ff(0x193)]=ZipCreatorDeploy;