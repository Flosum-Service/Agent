const a355_0x32951c=a355_0x2b99;function a355_0x3228(){const _0x3cc5f5=['has','5xCQFvk','8707855UckaCG','defineProperty','./sequence-creator.deploy','mdlFileByName','filter','migration__v','set','DEPENDENCY_EXTENSION','mainZip','Builder','VeevaConstants','path','292602Ygfomm','string','257775xTzNNL','vaultpackage.xml','jszip','file','default','addVaultPackageFileToMainZip','search','attachmentBodies','addComponentsToMainZip','102716kiivge','7266GbZJKX','keys','136nXGhss','__esModule','deploymentName','SequenceCreatorDeploy','36650EHbnAT','get','7745903rLbpbL','parse','ZipCreatorDeploy','12raMlxj','https://veevavault.com/','../../constants/veeva.constants','dependencyFileByName','1575bdseja','files','8rYqEuk','from','12mVmszB','MDL_EXTENSION','async','buildObject','execute','(((.+)+)+)+$','loadAsync'];a355_0x3228=function(){return _0x3cc5f5;};return a355_0x3228();}(function(_0x16b15b,_0x33bd7a){const _0x13e1f4=a355_0x2b99,_0xd78c77=_0x16b15b();while(!![]){try{const _0x470d22=-parseInt(_0x13e1f4(0x133))/0x1*(parseInt(_0x13e1f4(0x155))/0x2)+-parseInt(_0x13e1f4(0x14c))/0x3*(-parseInt(_0x13e1f4(0x135))/0x4)+parseInt(_0x13e1f4(0x13d))/0x5*(-parseInt(_0x13e1f4(0x14a))/0x6)+parseInt(_0x13e1f4(0x156))/0x7*(-parseInt(_0x13e1f4(0x158))/0x8)+-parseInt(_0x13e1f4(0x131))/0x9*(-parseInt(_0x13e1f4(0x15c))/0xa)+parseInt(_0x13e1f4(0x15e))/0xb*(parseInt(_0x13e1f4(0x161))/0xc)+-parseInt(_0x13e1f4(0x13e))/0xd;if(_0x470d22===_0x33bd7a)break;else _0xd78c77['push'](_0xd78c77['shift']());}catch(_0x656b76){_0xd78c77['push'](_0xd78c77['shift']());}}}(a355_0x3228,0x6f613));const a355_0x412e86=(function(){let _0x1f20b4=!![];return function(_0x32c8c2,_0x271d77){const _0x42ec2e=_0x1f20b4?function(){if(_0x271d77){const _0xa38f4b=_0x271d77['apply'](_0x32c8c2,arguments);return _0x271d77=null,_0xa38f4b;}}:function(){};return _0x1f20b4=![],_0x42ec2e;};}()),a355_0x42300=a355_0x412e86(this,function(){const _0x1b4de0=a355_0x2b99;return a355_0x42300['toString']()[_0x1b4de0(0x152)](_0x1b4de0(0x13a))['toString']()['constructor'](a355_0x42300)['search'](_0x1b4de0(0x13a));});a355_0x42300();function a355_0x2b99(_0x2f7841,_0x5e05ea){const _0x496493=a355_0x3228();return a355_0x2b99=function(_0x42300,_0x412e86){_0x42300=_0x42300-0x12e;let _0x3228a6=_0x496493[_0x42300];return _0x3228a6;},a355_0x2b99(_0x2f7841,_0x5e05ea);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x58cdaf){const _0x46a563=a355_0x2b99;return _0x58cdaf&&_0x58cdaf[_0x46a563(0x159)]?_0x58cdaf:{'default':_0x58cdaf};};Object[a355_0x32951c(0x13f)](exports,'__esModule',{'value':!![]}),exports[a355_0x32951c(0x160)]=void 0x0;const jszip_1=__importDefault(require(a355_0x32951c(0x14e))),sequence_creator_deploy_1=require(a355_0x32951c(0x140)),xml2js_1=require('xml2js'),veeva_constants_1=require(a355_0x32951c(0x12f)),path_1=__importDefault(require(a355_0x32951c(0x149))),VAULT_PACKAGE_FILENAME=a355_0x32951c(0x14d);class ZipCreatorDeploy{constructor({attachmentBodies:_0x109cc3,deploymentName:_0x513ab5}){const _0x552270=a355_0x32951c;this[_0x552270(0x130)]=new Map(),this['mdlFileByName']=new Map(),this['mainZip']=new jszip_1[(_0x552270(0x150))](),this[_0x552270(0x153)]=_0x109cc3,this[_0x552270(0x15a)]=_0x513ab5;}async['fillFileByNames'](){const _0x1a6ce5=a355_0x32951c;var _0x4ecdef;for(const _0x280e23 of this['attachmentBodies']){const _0xbeecae=new jszip_1[(_0x1a6ce5(0x150))]();await _0xbeecae[_0x1a6ce5(0x13b)](_0x280e23,{'base64':!![]});for(const _0x3fb443 in _0xbeecae[_0x1a6ce5(0x132)]){const _0x1c9f8a=await((_0x4ecdef=_0xbeecae[_0x1a6ce5(0x14f)](_0x3fb443))===null||_0x4ecdef===void 0x0?void 0x0:_0x4ecdef[_0x1a6ce5(0x137)](_0x1a6ce5(0x14b)));if(!_0x1c9f8a)continue;const {name:_0x36793e,ext:_0x33ed0c}=path_1['default'][_0x1a6ce5(0x15f)](_0x3fb443);switch(_0x33ed0c){case veeva_constants_1[_0x1a6ce5(0x148)][_0x1a6ce5(0x145)]:this[_0x1a6ce5(0x130)][_0x1a6ce5(0x144)](_0x36793e,_0x1c9f8a);break;case veeva_constants_1[_0x1a6ce5(0x148)]['MDL_EXTENSION']:this[_0x1a6ce5(0x141)][_0x1a6ce5(0x144)](_0x36793e,_0x1c9f8a);break;}}}}[a355_0x32951c(0x154)](_0x308e07){const _0x36d5d2=a355_0x32951c;for(const _0x3fa33d of _0x308e07){const _0x11d646=this[_0x36d5d2(0x141)][_0x36d5d2(0x15d)](_0x3fa33d);_0x11d646&&this[_0x36d5d2(0x146)]['file'](_0x3fa33d+veeva_constants_1[_0x36d5d2(0x148)][_0x36d5d2(0x136)],_0x11d646);}}[a355_0x32951c(0x151)](){const _0x5b496f=a355_0x32951c,_0x3d5a6d=new xml2js_1[(_0x5b496f(0x147))]({'headless':!![]}),_0x17d7fe={'vaultpackage':{'$':{'xmlns':_0x5b496f(0x12e)},'name':this['deploymentName'],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x5b496f(0x143),'summary':'Deploy','description':'null'}};this[_0x5b496f(0x146)][_0x5b496f(0x14f)](VAULT_PACKAGE_FILENAME,_0x3d5a6d[_0x5b496f(0x138)](_0x17d7fe));}async[a355_0x32951c(0x139)](){const _0x4ad242=a355_0x32951c;await this['fillFileByNames']();const _0x44dac6=Array[_0x4ad242(0x134)](this[_0x4ad242(0x141)][_0x4ad242(0x157)]())[_0x4ad242(0x142)](_0x1de514=>!this[_0x4ad242(0x130)][_0x4ad242(0x13c)](_0x1de514)),_0x59ce2=new sequence_creator_deploy_1[(_0x4ad242(0x15b))]({'dependencyFileByName':this['dependencyFileByName']})['execute']();return this[_0x4ad242(0x154)](_0x44dac6),this[_0x4ad242(0x154)](_0x59ce2),this[_0x4ad242(0x151)](),this[_0x4ad242(0x146)]['generateAsync']({'type':'nodebuffer'});}}exports['ZipCreatorDeploy']=ZipCreatorDeploy;