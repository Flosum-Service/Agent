const a326_0xe4f8f8=a326_0x2ef3;(function(_0x58a176,_0x51b673){const _0x5b9cef=a326_0x2ef3,_0x379b07=_0x58a176();while(!![]){try{const _0x47845b=-parseInt(_0x5b9cef(0x11d))/0x1*(parseInt(_0x5b9cef(0x10c))/0x2)+parseInt(_0x5b9cef(0x111))/0x3+-parseInt(_0x5b9cef(0x124))/0x4*(-parseInt(_0x5b9cef(0x10b))/0x5)+-parseInt(_0x5b9cef(0x12b))/0x6+-parseInt(_0x5b9cef(0xff))/0x7+-parseInt(_0x5b9cef(0x114))/0x8*(parseInt(_0x5b9cef(0x116))/0x9)+parseInt(_0x5b9cef(0x11a))/0xa;if(_0x47845b===_0x51b673)break;else _0x379b07['push'](_0x379b07['shift']());}catch(_0x54790d){_0x379b07['push'](_0x379b07['shift']());}}}(a326_0x3f53,0xba103));const a326_0xe9428=(function(){let _0x2b494d=!![];return function(_0x2ba5bb,_0x94e9ea){const _0x44f2aa=_0x2b494d?function(){const _0x2197bb=a326_0x2ef3;if(_0x94e9ea){const _0x336b0d=_0x94e9ea[_0x2197bb(0x120)](_0x2ba5bb,arguments);return _0x94e9ea=null,_0x336b0d;}}:function(){};return _0x2b494d=![],_0x44f2aa;};}()),a326_0x376799=a326_0xe9428(this,function(){const _0x189dd5=a326_0x2ef3;return a326_0x376799[_0x189dd5(0x110)]()[_0x189dd5(0xfd)](_0x189dd5(0x10a))[_0x189dd5(0x110)]()[_0x189dd5(0x11c)](a326_0x376799)['search'](_0x189dd5(0x10a));});a326_0x376799();'use strict';function a326_0x2ef3(_0x5519e5,_0x10b373){const _0x4d53cb=a326_0x3f53();return a326_0x2ef3=function(_0x376799,_0xe9428){_0x376799=_0x376799-0xfd;let _0x3f539e=_0x4d53cb[_0x376799];return _0x3f539e;},a326_0x2ef3(_0x5519e5,_0x10b373);}var __importDefault=this&&this[a326_0xe4f8f8(0x113)]||function(_0x4840d4){return _0x4840d4&&_0x4840d4['__esModule']?_0x4840d4:{'default':_0x4840d4};};Object[a326_0xe4f8f8(0x118)](exports,'__esModule',{'value':!![]}),exports[a326_0xe4f8f8(0x127)]=void 0x0;const jszip_1=__importDefault(require('jszip')),sequence_creator_deploy_1=require(a326_0xe4f8f8(0x104)),xml2js_1=require(a326_0xe4f8f8(0x11b)),veeva_constants_1=require('../../constants/veeva.constants'),path_1=__importDefault(require(a326_0xe4f8f8(0x122))),VAULT_PACKAGE_FILENAME=a326_0xe4f8f8(0x106);function a326_0x3f53(){const _0x5ce38a=['vaultpackage.xml','MDL_EXTENSION','addVaultPackageFileToMainZip','get','(((.+)+)+)+$','5jXdoIN','12DwiUKV','dependencyFileByName','file','mdlFileByName','toString','843039CPYVra','async','__importDefault','4976VyLQRG','VeevaConstants','18801tyIdgz','buildObject','defineProperty','loadAsync','24396100pQsMGV','xml2js','constructor','68766FbJOik','execute','from','apply','mainZip','path','Flosum','3193640wyTBVW','attachmentBodies','DEPENDENCY_EXTENSION','ZipCreatorDeploy','generateAsync','nodebuffer','default','2996940sOZMMW','fillFileByNames','search','parse','3818318gRzKyk','string','deploymentName','filter','addComponentsToMainZip','./sequence-creator.deploy','SequenceCreatorDeploy'];a326_0x3f53=function(){return _0x5ce38a;};return a326_0x3f53();}class ZipCreatorDeploy{constructor({attachmentBodies:_0x485971,deploymentName:_0x2a3d95}){const _0x49c027=a326_0xe4f8f8;this['dependencyFileByName']=new Map(),this[_0x49c027(0x10f)]=new Map(),this[_0x49c027(0x121)]=new jszip_1[(_0x49c027(0x12a))](),this[_0x49c027(0x125)]=_0x485971,this[_0x49c027(0x101)]=_0x2a3d95;}async[a326_0xe4f8f8(0x12c)](){const _0x2f9597=a326_0xe4f8f8;var _0xcab4bb;for(const _0x32e178 of this[_0x2f9597(0x125)]){const _0x3772ef=new jszip_1[(_0x2f9597(0x12a))]();await _0x3772ef[_0x2f9597(0x119)](_0x32e178,{'base64':!![]});for(const _0x5f1b27 in _0x3772ef['files']){const _0x26bc20=await((_0xcab4bb=_0x3772ef['file'](_0x5f1b27))===null||_0xcab4bb===void 0x0?void 0x0:_0xcab4bb[_0x2f9597(0x112)](_0x2f9597(0x100)));if(!_0x26bc20)continue;const {name:_0x475b7a,ext:_0x4bd35d}=path_1[_0x2f9597(0x12a)][_0x2f9597(0xfe)](_0x5f1b27);switch(_0x4bd35d){case veeva_constants_1[_0x2f9597(0x115)][_0x2f9597(0x126)]:this['dependencyFileByName']['set'](_0x475b7a,_0x26bc20);break;case veeva_constants_1['VeevaConstants'][_0x2f9597(0x107)]:this[_0x2f9597(0x10f)]['set'](_0x475b7a,_0x26bc20);break;}}}}[a326_0xe4f8f8(0x103)](_0x261315){const _0x111740=a326_0xe4f8f8;for(const _0x4588a6 of _0x261315){const _0x224e64=this[_0x111740(0x10f)][_0x111740(0x109)](_0x4588a6);_0x224e64&&this[_0x111740(0x121)][_0x111740(0x10e)](_0x4588a6+veeva_constants_1[_0x111740(0x115)]['MDL_EXTENSION'],_0x224e64);}}[a326_0xe4f8f8(0x108)](){const _0x19b433=a326_0xe4f8f8,_0x2b1966=new xml2js_1['Builder']({'headless':!![]}),_0x536bc6={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this[_0x19b433(0x101)],'source':{'vault':undefined,'author':_0x19b433(0x123)},'packagetype':'migration__v','summary':'Deploy','description':'null'}};this[_0x19b433(0x121)][_0x19b433(0x10e)](VAULT_PACKAGE_FILENAME,_0x2b1966[_0x19b433(0x117)](_0x536bc6));}async['execute'](){const _0x43cd71=a326_0xe4f8f8;await this[_0x43cd71(0x12c)]();const _0x11f6ef=Array[_0x43cd71(0x11f)](this[_0x43cd71(0x10f)]['keys']())[_0x43cd71(0x102)](_0x4720b8=>!this[_0x43cd71(0x10d)]['has'](_0x4720b8)),_0x164827=new sequence_creator_deploy_1[(_0x43cd71(0x105))]({'dependencyFileByName':this['dependencyFileByName']})[_0x43cd71(0x11e)]();return this[_0x43cd71(0x103)](_0x11f6ef),this[_0x43cd71(0x103)](_0x164827),this[_0x43cd71(0x108)](),this[_0x43cd71(0x121)][_0x43cd71(0x128)]({'type':_0x43cd71(0x129)});}}exports[a326_0xe4f8f8(0x127)]=ZipCreatorDeploy;