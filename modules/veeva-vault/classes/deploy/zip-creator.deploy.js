const a311_0x18d1aa=a311_0xffbf;(function(_0x2d8e5c,_0x5047e2){const _0x45a32e=a311_0xffbf,_0x4b5d43=_0x2d8e5c();while(!![]){try{const _0x44dc03=-parseInt(_0x45a32e(0xab))/0x1+parseInt(_0x45a32e(0xb3))/0x2+-parseInt(_0x45a32e(0xc6))/0x3+-parseInt(_0x45a32e(0xa5))/0x4*(parseInt(_0x45a32e(0xae))/0x5)+-parseInt(_0x45a32e(0xc7))/0x6+parseInt(_0x45a32e(0x9f))/0x7+parseInt(_0x45a32e(0xbf))/0x8;if(_0x44dc03===_0x5047e2)break;else _0x4b5d43['push'](_0x4b5d43['shift']());}catch(_0x1e74c1){_0x4b5d43['push'](_0x4b5d43['shift']());}}}(a311_0xbdbf,0x5d640));const a311_0x20ffcd=(function(){let _0x9200cd=!![];return function(_0x2f8720,_0x139188){const _0x55c864=_0x9200cd?function(){const _0x59e766=a311_0xffbf;if(_0x139188){const _0x33da92=_0x139188[_0x59e766(0xba)](_0x2f8720,arguments);return _0x139188=null,_0x33da92;}}:function(){};return _0x9200cd=![],_0x55c864;};}()),a311_0x166964=a311_0x20ffcd(this,function(){const _0x446ee7=a311_0xffbf;return a311_0x166964[_0x446ee7(0xc1)]()['search'](_0x446ee7(0xc5))[_0x446ee7(0xc1)]()[_0x446ee7(0xa0)](a311_0x166964)[_0x446ee7(0xb5)](_0x446ee7(0xc5));});a311_0x166964();'use strict';var __importDefault=this&&this[a311_0x18d1aa(0xaa)]||function(_0xa5f903){const _0x43ae88=a311_0x18d1aa;return _0xa5f903&&_0xa5f903[_0x43ae88(0xaf)]?_0xa5f903:{'default':_0xa5f903};};function a311_0xffbf(_0x400963,_0x5e4626){const _0x49b154=a311_0xbdbf();return a311_0xffbf=function(_0x166964,_0x20ffcd){_0x166964=_0x166964-0x9c;let _0xbdbf40=_0x49b154[_0x166964];return _0xbdbf40;},a311_0xffbf(_0x400963,_0x5e4626);}Object['defineProperty'](exports,a311_0x18d1aa(0xaf),{'value':!![]}),exports['ZipCreatorDeploy']=void 0x0;const jszip_1=__importDefault(require(a311_0x18d1aa(0xa9))),sequence_creator_deploy_1=require('./sequence-creator.deploy'),xml2js_1=require('xml2js'),veeva_constants_1=require('../../constants/veeva.constants'),path_1=__importDefault(require(a311_0x18d1aa(0xb7))),VAULT_PACKAGE_FILENAME=a311_0x18d1aa(0xad);class ZipCreatorDeploy{constructor({attachmentBodies:_0xf543e4,deploymentName:_0x14c6ac}){const _0x27752d=a311_0x18d1aa;this[_0x27752d(0x9c)]=new Map(),this[_0x27752d(0xc9)]=new Map(),this[_0x27752d(0xc4)]=new jszip_1[(_0x27752d(0xa1))](),this[_0x27752d(0xac)]=_0xf543e4,this[_0x27752d(0xbc)]=_0x14c6ac;}async[a311_0x18d1aa(0xbe)](){const _0x2f6f09=a311_0x18d1aa;var _0x3d32b8;for(const _0x27322e of this[_0x2f6f09(0xac)]){const _0x39559a=new jszip_1[(_0x2f6f09(0xa1))]();await _0x39559a[_0x2f6f09(0xb9)](_0x27322e,{'base64':!![]});for(const _0x2b1868 in _0x39559a['files']){const _0x332c4a=await((_0x3d32b8=_0x39559a[_0x2f6f09(0xb8)](_0x2b1868))===null||_0x3d32b8===void 0x0?void 0x0:_0x3d32b8['async'](_0x2f6f09(0xa2)));if(!_0x332c4a)continue;const {name:_0x2a6dc0,ext:_0x25cbf7}=path_1[_0x2f6f09(0xa1)][_0x2f6f09(0xa4)](_0x2b1868);switch(_0x25cbf7){case veeva_constants_1[_0x2f6f09(0xbb)][_0x2f6f09(0x9e)]:this[_0x2f6f09(0x9c)]['set'](_0x2a6dc0,_0x332c4a);break;case veeva_constants_1['VeevaConstants'][_0x2f6f09(0x9d)]:this[_0x2f6f09(0xc9)][_0x2f6f09(0xa8)](_0x2a6dc0,_0x332c4a);break;}}}}[a311_0x18d1aa(0xbd)](_0x16b5cb){const _0x85b7a3=a311_0x18d1aa;for(const _0x5929cb of _0x16b5cb){const _0x5358ce=this[_0x85b7a3(0xc9)][_0x85b7a3(0xb0)](_0x5929cb);_0x5358ce&&this['mainZip'][_0x85b7a3(0xb8)](_0x5929cb+veeva_constants_1[_0x85b7a3(0xbb)]['MDL_EXTENSION'],_0x5358ce);}}[a311_0x18d1aa(0xc3)](){const _0x3cd4dd=a311_0x18d1aa,_0xd3690a=new xml2js_1[(_0x3cd4dd(0xc0))]({'headless':!![]}),_0x579c8d={'vaultpackage':{'$':{'xmlns':_0x3cd4dd(0xb4)},'name':this['deploymentName'],'source':{'vault':undefined,'author':_0x3cd4dd(0xc2)},'packagetype':'migration__v','summary':'Deploy','description':_0x3cd4dd(0xa6)}};this['mainZip'][_0x3cd4dd(0xb8)](VAULT_PACKAGE_FILENAME,_0xd3690a['buildObject'](_0x579c8d));}async[a311_0x18d1aa(0xa7)](){const _0xc8ab3c=a311_0x18d1aa;await this['fillFileByNames']();const _0x4e7363=Array['from'](this[_0xc8ab3c(0xc9)]['keys']())[_0xc8ab3c(0xc8)](_0x405e86=>!this[_0xc8ab3c(0x9c)][_0xc8ab3c(0xb1)](_0x405e86)),_0x55253a=new sequence_creator_deploy_1[(_0xc8ab3c(0xb2))]({'dependencyFileByName':this[_0xc8ab3c(0x9c)]})[_0xc8ab3c(0xa7)]();return this[_0xc8ab3c(0xbd)](_0x4e7363),this[_0xc8ab3c(0xbd)](_0x55253a),this[_0xc8ab3c(0xc3)](),this['mainZip'][_0xc8ab3c(0xb6)]({'type':_0xc8ab3c(0xa3)});}}exports['ZipCreatorDeploy']=ZipCreatorDeploy;function a311_0xbdbf(){const _0x105016=['vaultpackage.xml','152715ICLVQK','__esModule','get','has','SequenceCreatorDeploy','1499108CWwdnH','https://veevavault.com/','search','generateAsync','path','file','loadAsync','apply','VeevaConstants','deploymentName','addComponentsToMainZip','fillFileByNames','12998296zHejyK','Builder','toString','Flosum','addVaultPackageFileToMainZip','mainZip','(((.+)+)+)+$','1814013ZoUVkw','4243224dNPoQt','filter','mdlFileByName','dependencyFileByName','MDL_EXTENSION','DEPENDENCY_EXTENSION','1622201vqMgvB','constructor','default','string','nodebuffer','parse','24FoFHLG','null','execute','set','jszip','__importDefault','728423zEkDVb','attachmentBodies'];a311_0xbdbf=function(){return _0x105016;};return a311_0xbdbf();}