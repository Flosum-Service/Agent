const a355_0x219706=a355_0x2308;(function(_0xd242f5,_0x36960a){const _0x448c35=a355_0x2308,_0xfa6ac7=_0xd242f5();while(!![]){try{const _0xdee3de=parseInt(_0x448c35(0x137))/0x1*(-parseInt(_0x448c35(0x122))/0x2)+parseInt(_0x448c35(0x124))/0x3*(-parseInt(_0x448c35(0x135))/0x4)+-parseInt(_0x448c35(0x151))/0x5*(-parseInt(_0x448c35(0x134))/0x6)+-parseInt(_0x448c35(0x138))/0x7*(parseInt(_0x448c35(0x129))/0x8)+parseInt(_0x448c35(0x146))/0x9*(-parseInt(_0x448c35(0x131))/0xa)+-parseInt(_0x448c35(0x152))/0xb*(parseInt(_0x448c35(0x12a))/0xc)+-parseInt(_0x448c35(0x144))/0xd*(-parseInt(_0x448c35(0x133))/0xe);if(_0xdee3de===_0x36960a)break;else _0xfa6ac7['push'](_0xfa6ac7['shift']());}catch(_0x134420){_0xfa6ac7['push'](_0xfa6ac7['shift']());}}}(a355_0x516f,0x8b88d));function a355_0x2308(_0x48b0b1,_0x4654a9){const _0x349464=a355_0x516f();return a355_0x2308=function(_0x490e34,_0x490566){_0x490e34=_0x490e34-0x121;let _0x516f8b=_0x349464[_0x490e34];return _0x516f8b;},a355_0x2308(_0x48b0b1,_0x4654a9);}const a355_0x490566=(function(){let _0x1122a6=!![];return function(_0x4544fb,_0x339ba5){const _0x5c85fe=_0x1122a6?function(){const _0x3cfd78=a355_0x2308;if(_0x339ba5){const _0x3ff865=_0x339ba5[_0x3cfd78(0x12d)](_0x4544fb,arguments);return _0x339ba5=null,_0x3ff865;}}:function(){};return _0x1122a6=![],_0x5c85fe;};}()),a355_0x490e34=a355_0x490566(this,function(){const _0x5bb2ee=a355_0x2308;return a355_0x490e34['toString']()[_0x5bb2ee(0x14c)](_0x5bb2ee(0x150))['toString']()['constructor'](a355_0x490e34)[_0x5bb2ee(0x14c)](_0x5bb2ee(0x150));});a355_0x490e34();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1ad5ec){const _0x4bcb71=a355_0x2308;return _0x1ad5ec&&_0x1ad5ec[_0x4bcb71(0x14b)]?_0x1ad5ec:{'default':_0x1ad5ec};};function a355_0x516f(){const _0x5169ea=['async','Deploy','keys','Flosum','__esModule','search','fillFileByNames','mdlFileByName','execute','(((.+)+)+)+$','5WSfMsh','165zDiXqD','mainZip','268PwHNQO','attachmentBodies','1206Lrewzv','file','https://veevavault.com/','addVaultPackageFileToMainZip','set','1054712vAWmtF','11460TqaOEh','has','vaultpackage.xml','apply','buildObject','loadAsync','migration__v','1766420gMOesp','parse','246932VNvBXA','3416214HzVTMW','9532lLnpJp','from','3719eGUolY','21NKcEif','MDL_EXTENSION','null','get','defineProperty','dependencyFileByName','xml2js','VeevaConstants','generateAsync','addComponentsToMainZip','ZipCreatorDeploy','default','2028keXMQV','DEPENDENCY_EXTENSION','45zpihPp'];a355_0x516f=function(){return _0x5169ea;};return a355_0x516f();}Object[a355_0x219706(0x13c)](exports,a355_0x219706(0x14b),{'value':!![]}),exports[a355_0x219706(0x142)]=void 0x0;const jszip_1=__importDefault(require('jszip')),sequence_creator_deploy_1=require('./sequence-creator.deploy'),xml2js_1=require(a355_0x219706(0x13e)),veeva_constants_1=require('../../constants/veeva.constants'),path_1=__importDefault(require('path')),VAULT_PACKAGE_FILENAME=a355_0x219706(0x12c);class ZipCreatorDeploy{constructor({attachmentBodies:_0x39cff3,deploymentName:_0x4279c3}){const _0x4382f2=a355_0x219706;this['dependencyFileByName']=new Map(),this[_0x4382f2(0x14e)]=new Map(),this[_0x4382f2(0x121)]=new jszip_1['default'](),this['attachmentBodies']=_0x39cff3,this['deploymentName']=_0x4279c3;}async['fillFileByNames'](){const _0x5f085f=a355_0x219706;var _0x1ae19a;for(const _0x535ee6 of this[_0x5f085f(0x123)]){const _0x1ff808=new jszip_1[(_0x5f085f(0x143))]();await _0x1ff808[_0x5f085f(0x12f)](_0x535ee6,{'base64':!![]});for(const _0x405be7 in _0x1ff808['files']){const _0x137b16=await((_0x1ae19a=_0x1ff808[_0x5f085f(0x125)](_0x405be7))===null||_0x1ae19a===void 0x0?void 0x0:_0x1ae19a[_0x5f085f(0x147)]('string'));if(!_0x137b16)continue;const {name:_0x4399b2,ext:_0x2de7f9}=path_1[_0x5f085f(0x143)][_0x5f085f(0x132)](_0x405be7);switch(_0x2de7f9){case veeva_constants_1[_0x5f085f(0x13f)][_0x5f085f(0x145)]:this['dependencyFileByName'][_0x5f085f(0x128)](_0x4399b2,_0x137b16);break;case veeva_constants_1[_0x5f085f(0x13f)]['MDL_EXTENSION']:this[_0x5f085f(0x14e)][_0x5f085f(0x128)](_0x4399b2,_0x137b16);break;}}}}[a355_0x219706(0x141)](_0x5266a5){const _0x47215d=a355_0x219706;for(const _0x315ae9 of _0x5266a5){const _0x18c934=this[_0x47215d(0x14e)][_0x47215d(0x13b)](_0x315ae9);_0x18c934&&this[_0x47215d(0x121)][_0x47215d(0x125)](_0x315ae9+veeva_constants_1[_0x47215d(0x13f)][_0x47215d(0x139)],_0x18c934);}}[a355_0x219706(0x127)](){const _0x326416=a355_0x219706,_0x1ce5db=new xml2js_1['Builder']({'headless':!![]}),_0x219130={'vaultpackage':{'$':{'xmlns':_0x326416(0x126)},'name':this['deploymentName'],'source':{'vault':undefined,'author':_0x326416(0x14a)},'packagetype':_0x326416(0x130),'summary':_0x326416(0x148),'description':_0x326416(0x13a)}};this[_0x326416(0x121)][_0x326416(0x125)](VAULT_PACKAGE_FILENAME,_0x1ce5db[_0x326416(0x12e)](_0x219130));}async[a355_0x219706(0x14f)](){const _0x5df6c0=a355_0x219706;await this[_0x5df6c0(0x14d)]();const _0x50183b=Array[_0x5df6c0(0x136)](this[_0x5df6c0(0x14e)][_0x5df6c0(0x149)]())['filter'](_0x23020a=>!this[_0x5df6c0(0x13d)][_0x5df6c0(0x12b)](_0x23020a)),_0x2bfb56=new sequence_creator_deploy_1['SequenceCreatorDeploy']({'dependencyFileByName':this[_0x5df6c0(0x13d)]})[_0x5df6c0(0x14f)]();return this['addComponentsToMainZip'](_0x50183b),this[_0x5df6c0(0x141)](_0x2bfb56),this[_0x5df6c0(0x127)](),this['mainZip'][_0x5df6c0(0x140)]({'type':'nodebuffer'});}}exports['ZipCreatorDeploy']=ZipCreatorDeploy;