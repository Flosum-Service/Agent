const a354_0x457794=a354_0x3b8f;(function(_0x304f31,_0x4905e6){const _0x4c9809=a354_0x3b8f,_0x2bb6f7=_0x304f31();while(!![]){try{const _0x122aae=-parseInt(_0x4c9809(0x1d2))/0x1*(-parseInt(_0x4c9809(0x1b8))/0x2)+-parseInt(_0x4c9809(0x1d8))/0x3+parseInt(_0x4c9809(0x1e0))/0x4+parseInt(_0x4c9809(0x1bf))/0x5+parseInt(_0x4c9809(0x1c3))/0x6*(parseInt(_0x4c9809(0x1cc))/0x7)+-parseInt(_0x4c9809(0x1ba))/0x8*(-parseInt(_0x4c9809(0x1da))/0x9)+parseInt(_0x4c9809(0x1dc))/0xa;if(_0x122aae===_0x4905e6)break;else _0x2bb6f7['push'](_0x2bb6f7['shift']());}catch(_0x2275a6){_0x2bb6f7['push'](_0x2bb6f7['shift']());}}}(a354_0x3f54,0x22a80));function a354_0x3b8f(_0x3f24bb,_0x252f29){const _0x518b13=a354_0x3f54();return a354_0x3b8f=function(_0x449fa8,_0x3eda8e){_0x449fa8=_0x449fa8-0x1b2;let _0x3f5463=_0x518b13[_0x449fa8];return _0x3f5463;},a354_0x3b8f(_0x3f24bb,_0x252f29);}const a354_0x3eda8e=(function(){let _0x53956d=!![];return function(_0x4b5a1b,_0x5f3955){const _0x52e252=_0x53956d?function(){const _0x55a37f=a354_0x3b8f;if(_0x5f3955){const _0x2865f9=_0x5f3955[_0x55a37f(0x1cb)](_0x4b5a1b,arguments);return _0x5f3955=null,_0x2865f9;}}:function(){};return _0x53956d=![],_0x52e252;};}()),a354_0x449fa8=a354_0x3eda8e(this,function(){const _0x245b4b=a354_0x3b8f;return a354_0x449fa8[_0x245b4b(0x1b4)]()[_0x245b4b(0x1d0)](_0x245b4b(0x1d6))[_0x245b4b(0x1b4)]()[_0x245b4b(0x1b9)](a354_0x449fa8)['search'](_0x245b4b(0x1d6));});a354_0x449fa8();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x205ed6){const _0x14c5c7=a354_0x3b8f;return _0x205ed6&&_0x205ed6[_0x14c5c7(0x1b2)]?_0x205ed6:{'default':_0x205ed6};};Object[a354_0x457794(0x1c9)](exports,'__esModule',{'value':!![]}),exports[a354_0x457794(0x1db)]=void 0x0;const jszip_1=__importDefault(require('jszip')),sequence_creator_deploy_1=require(a354_0x457794(0x1c5)),xml2js_1=require(a354_0x457794(0x1dd)),veeva_constants_1=require('../../constants/veeva.constants'),path_1=__importDefault(require('path')),VAULT_PACKAGE_FILENAME=a354_0x457794(0x1b5);class ZipCreatorDeploy{constructor({attachmentBodies:_0x139748,deploymentName:_0xb3d5a7}){const _0x50fd4a=a354_0x457794;this[_0x50fd4a(0x1bc)]=new Map(),this['mdlFileByName']=new Map(),this[_0x50fd4a(0x1b7)]=new jszip_1[(_0x50fd4a(0x1c0))](),this['attachmentBodies']=_0x139748,this[_0x50fd4a(0x1c1)]=_0xb3d5a7;}async[a354_0x457794(0x1b6)](){const _0x3680ee=a354_0x457794;var _0x4702fc;for(const _0x16412f of this[_0x3680ee(0x1ca)]){const _0x397fa6=new jszip_1['default']();await _0x397fa6['loadAsync'](_0x16412f,{'base64':!![]});for(const _0x32d666 in _0x397fa6['files']){const _0x19f6f5=await((_0x4702fc=_0x397fa6['file'](_0x32d666))===null||_0x4702fc===void 0x0?void 0x0:_0x4702fc[_0x3680ee(0x1be)]('string'));if(!_0x19f6f5)continue;const {name:_0x2c3fdc,ext:_0x38c3a9}=path_1[_0x3680ee(0x1c0)][_0x3680ee(0x1bb)](_0x32d666);switch(_0x38c3a9){case veeva_constants_1[_0x3680ee(0x1d4)]['DEPENDENCY_EXTENSION']:this[_0x3680ee(0x1bc)]['set'](_0x2c3fdc,_0x19f6f5);break;case veeva_constants_1['VeevaConstants']['MDL_EXTENSION']:this[_0x3680ee(0x1c8)][_0x3680ee(0x1d7)](_0x2c3fdc,_0x19f6f5);break;}}}}[a354_0x457794(0x1ce)](_0x9eaeb5){const _0xbe1b6d=a354_0x457794;for(const _0x15d34a of _0x9eaeb5){const _0x19fb82=this[_0xbe1b6d(0x1c8)]['get'](_0x15d34a);_0x19fb82&&this[_0xbe1b6d(0x1b7)][_0xbe1b6d(0x1cd)](_0x15d34a+veeva_constants_1[_0xbe1b6d(0x1d4)][_0xbe1b6d(0x1c7)],_0x19fb82);}}[a354_0x457794(0x1bd)](){const _0x15013b=a354_0x457794,_0x5cb8d4=new xml2js_1[(_0x15013b(0x1de))]({'headless':!![]}),_0x2b79a4={'vaultpackage':{'$':{'xmlns':_0x15013b(0x1d3)},'name':this[_0x15013b(0x1c1)],'source':{'vault':undefined,'author':_0x15013b(0x1d9)},'packagetype':_0x15013b(0x1c6),'summary':_0x15013b(0x1c4),'description':_0x15013b(0x1b3)}};this[_0x15013b(0x1b7)][_0x15013b(0x1cd)](VAULT_PACKAGE_FILENAME,_0x5cb8d4[_0x15013b(0x1d1)](_0x2b79a4));}async['execute'](){const _0xd99c9e=a354_0x457794;await this[_0xd99c9e(0x1b6)]();const _0x45b5fc=Array['from'](this[_0xd99c9e(0x1c8)][_0xd99c9e(0x1d5)]())['filter'](_0x1ce57f=>!this[_0xd99c9e(0x1bc)][_0xd99c9e(0x1df)](_0x1ce57f)),_0x47bc4f=new sequence_creator_deploy_1[(_0xd99c9e(0x1cf))]({'dependencyFileByName':this['dependencyFileByName']})[_0xd99c9e(0x1c2)]();return this['addComponentsToMainZip'](_0x45b5fc),this[_0xd99c9e(0x1ce)](_0x47bc4f),this[_0xd99c9e(0x1bd)](),this[_0xd99c9e(0x1b7)]['generateAsync']({'type':'nodebuffer'});}}exports[a354_0x457794(0x1db)]=ZipCreatorDeploy;function a354_0x3f54(){const _0x39dca2=['VeevaConstants','keys','(((.+)+)+)+$','set','656154EwxsPd','Flosum','9nRSzla','ZipCreatorDeploy','566670OupAZS','xml2js','Builder','has','417700PjVdiU','__esModule','null','toString','vaultpackage.xml','fillFileByNames','mainZip','44272TGkrAs','constructor','905416UBQBbI','parse','dependencyFileByName','addVaultPackageFileToMainZip','async','170245QEibUQ','default','deploymentName','execute','1212WeTCdV','Deploy','./sequence-creator.deploy','migration__v','MDL_EXTENSION','mdlFileByName','defineProperty','attachmentBodies','apply','280txYbBG','file','addComponentsToMainZip','SequenceCreatorDeploy','search','buildObject','2JcXhjT','https://veevavault.com/'];a354_0x3f54=function(){return _0x39dca2;};return a354_0x3f54();}