const a311_0x58eb85=a311_0x1fd9;(function(_0x167fb9,_0x36bade){const _0x45a830=a311_0x1fd9,_0x3051bc=_0x167fb9();while(!![]){try{const _0x23f2c3=-parseInt(_0x45a830(0x144))/0x1+parseInt(_0x45a830(0x14e))/0x2+parseInt(_0x45a830(0x12d))/0x3+parseInt(_0x45a830(0x13f))/0x4*(parseInt(_0x45a830(0x136))/0x5)+parseInt(_0x45a830(0x14b))/0x6*(-parseInt(_0x45a830(0x11f))/0x7)+parseInt(_0x45a830(0x134))/0x8+-parseInt(_0x45a830(0x126))/0x9;if(_0x23f2c3===_0x36bade)break;else _0x3051bc['push'](_0x3051bc['shift']());}catch(_0xe1f374){_0x3051bc['push'](_0x3051bc['shift']());}}}(a311_0x4712,0x9837b));const a311_0x239cdb=(function(){let _0xb4543c=!![];return function(_0x586ef7,_0x9f7ac0){const _0x3eb7ca=_0xb4543c?function(){const _0x1c19e7=a311_0x1fd9;if(_0x9f7ac0){const _0x36392a=_0x9f7ac0[_0x1c19e7(0x13b)](_0x586ef7,arguments);return _0x9f7ac0=null,_0x36392a;}}:function(){};return _0xb4543c=![],_0x3eb7ca;};}()),a311_0xb6c6e5=a311_0x239cdb(this,function(){const _0x30b085=a311_0x1fd9;return a311_0xb6c6e5['toString']()[_0x30b085(0x124)](_0x30b085(0x128))[_0x30b085(0x14c)]()['constructor'](a311_0xb6c6e5)['search'](_0x30b085(0x128));});a311_0xb6c6e5();'use strict';var __importDefault=this&&this[a311_0x58eb85(0x132)]||function(_0x30eef0){const _0xd9533a=a311_0x58eb85;return _0x30eef0&&_0x30eef0[_0xd9533a(0x13d)]?_0x30eef0:{'default':_0x30eef0};};Object[a311_0x58eb85(0x138)](exports,a311_0x58eb85(0x13d),{'value':!![]}),exports[a311_0x58eb85(0x142)]=void 0x0;const jszip_1=__importDefault(require(a311_0x58eb85(0x133))),sequence_creator_deploy_1=require(a311_0x58eb85(0x129)),xml2js_1=require(a311_0x58eb85(0x139)),veeva_constants_1=require('../../constants/veeva.constants'),path_1=__importDefault(require('path')),VAULT_PACKAGE_FILENAME=a311_0x58eb85(0x148);function a311_0x1fd9(_0x189b7f,_0x28199e){const _0x93be71=a311_0x4712();return a311_0x1fd9=function(_0xb6c6e5,_0x239cdb){_0xb6c6e5=_0xb6c6e5-0x11f;let _0x4712b1=_0x93be71[_0xb6c6e5];return _0x4712b1;},a311_0x1fd9(_0x189b7f,_0x28199e);}class ZipCreatorDeploy{constructor({attachmentBodies:_0x2c8837,deploymentName:_0x37a887}){const _0x4d6086=a311_0x58eb85;this['dependencyFileByName']=new Map(),this['mdlFileByName']=new Map(),this[_0x4d6086(0x121)]=new jszip_1['default'](),this[_0x4d6086(0x141)]=_0x2c8837,this[_0x4d6086(0x13c)]=_0x37a887;}async['fillFileByNames'](){const _0x497c8d=a311_0x58eb85;var _0xe7f294;for(const _0x1346bf of this[_0x497c8d(0x141)]){const _0x51d563=new jszip_1[(_0x497c8d(0x145))]();await _0x51d563[_0x497c8d(0x147)](_0x1346bf,{'base64':!![]});for(const _0x5397a2 in _0x51d563[_0x497c8d(0x14d)]){const _0x2c28e0=await((_0xe7f294=_0x51d563[_0x497c8d(0x12c)](_0x5397a2))===null||_0xe7f294===void 0x0?void 0x0:_0xe7f294[_0x497c8d(0x130)](_0x497c8d(0x125)));if(!_0x2c28e0)continue;const {name:_0xb1a17,ext:_0x1fce7a}=path_1['default'][_0x497c8d(0x127)](_0x5397a2);switch(_0x1fce7a){case veeva_constants_1[_0x497c8d(0x146)]['DEPENDENCY_EXTENSION']:this['dependencyFileByName'][_0x497c8d(0x14a)](_0xb1a17,_0x2c28e0);break;case veeva_constants_1[_0x497c8d(0x146)][_0x497c8d(0x12e)]:this['mdlFileByName']['set'](_0xb1a17,_0x2c28e0);break;}}}}[a311_0x58eb85(0x13a)](_0x49bfff){const _0x2776d0=a311_0x58eb85;for(const _0x52a837 of _0x49bfff){const _0xa523fa=this[_0x2776d0(0x12a)]['get'](_0x52a837);_0xa523fa&&this[_0x2776d0(0x121)][_0x2776d0(0x12c)](_0x52a837+veeva_constants_1['VeevaConstants'][_0x2776d0(0x12e)],_0xa523fa);}}['addVaultPackageFileToMainZip'](){const _0x41e5d7=a311_0x58eb85,_0x4cdd41=new xml2js_1['Builder']({'headless':!![]}),_0x4214aa={'vaultpackage':{'$':{'xmlns':'https://veevavault.com/'},'name':this[_0x41e5d7(0x13c)],'source':{'vault':undefined,'author':_0x41e5d7(0x143)},'packagetype':_0x41e5d7(0x137),'summary':'Deploy','description':'null'}};this[_0x41e5d7(0x121)][_0x41e5d7(0x12c)](VAULT_PACKAGE_FILENAME,_0x4cdd41[_0x41e5d7(0x131)](_0x4214aa));}async[a311_0x58eb85(0x13e)](){const _0xd91259=a311_0x58eb85;await this['fillFileByNames']();const _0x1181db=Array[_0xd91259(0x135)](this[_0xd91259(0x12a)][_0xd91259(0x122)]())['filter'](_0x531098=>!this[_0xd91259(0x12f)][_0xd91259(0x12b)](_0x531098)),_0x5dd4ff=new sequence_creator_deploy_1[(_0xd91259(0x120))]({'dependencyFileByName':this['dependencyFileByName']})[_0xd91259(0x13e)]();return this[_0xd91259(0x13a)](_0x1181db),this[_0xd91259(0x13a)](_0x5dd4ff),this[_0xd91259(0x140)](),this[_0xd91259(0x121)][_0xd91259(0x149)]({'type':_0xd91259(0x123)});}}function a311_0x4712(){const _0x4fac46=['defineProperty','xml2js','addComponentsToMainZip','apply','deploymentName','__esModule','execute','7996xbUQyL','addVaultPackageFileToMainZip','attachmentBodies','ZipCreatorDeploy','Flosum','582930HoeGwg','default','VeevaConstants','loadAsync','vaultpackage.xml','generateAsync','set','24MtmlcY','toString','files','1218578zYarqY','1346744rtnXYd','SequenceCreatorDeploy','mainZip','keys','nodebuffer','search','string','441954mUsjJy','parse','(((.+)+)+)+$','./sequence-creator.deploy','mdlFileByName','has','file','2255718jUXyJw','MDL_EXTENSION','dependencyFileByName','async','buildObject','__importDefault','jszip','2000792ewHnlS','from','1035jsHbUG','migration__v'];a311_0x4712=function(){return _0x4fac46;};return a311_0x4712();}exports['ZipCreatorDeploy']=ZipCreatorDeploy;