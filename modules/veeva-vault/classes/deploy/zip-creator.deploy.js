const a311_0x480f88=a311_0x3043;(function(_0x22d761,_0xfa9fd4){const _0xb911dc=a311_0x3043,_0x4dfd7d=_0x22d761();while(!![]){try{const _0x44ce3a=-parseInt(_0xb911dc(0x153))/0x1*(-parseInt(_0xb911dc(0x170))/0x2)+-parseInt(_0xb911dc(0x17b))/0x3*(parseInt(_0xb911dc(0x157))/0x4)+-parseInt(_0xb911dc(0x173))/0x5*(parseInt(_0xb911dc(0x159))/0x6)+-parseInt(_0xb911dc(0x17f))/0x7*(-parseInt(_0xb911dc(0x168))/0x8)+parseInt(_0xb911dc(0x156))/0x9+parseInt(_0xb911dc(0x160))/0xa*(-parseInt(_0xb911dc(0x155))/0xb)+parseInt(_0xb911dc(0x14d))/0xc;if(_0x44ce3a===_0xfa9fd4)break;else _0x4dfd7d['push'](_0x4dfd7d['shift']());}catch(_0x2b1325){_0x4dfd7d['push'](_0x4dfd7d['shift']());}}}(a311_0x9cab,0xf2051));const a311_0x5e6312=(function(){let _0x24485d=!![];return function(_0x533810,_0x3c1ece){const _0x5a73a4=_0x24485d?function(){const _0x2c0670=a311_0x3043;if(_0x3c1ece){const _0x594287=_0x3c1ece[_0x2c0670(0x15b)](_0x533810,arguments);return _0x3c1ece=null,_0x594287;}}:function(){};return _0x24485d=![],_0x5a73a4;};}()),a311_0x4de94c=a311_0x5e6312(this,function(){const _0x32240b=a311_0x3043;return a311_0x4de94c['toString']()[_0x32240b(0x16c)]('(((.+)+)+)+$')[_0x32240b(0x14c)]()[_0x32240b(0x178)](a311_0x4de94c)[_0x32240b(0x16c)](_0x32240b(0x177));});a311_0x4de94c();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x12e440){const _0x559063=a311_0x3043;return _0x12e440&&_0x12e440[_0x559063(0x172)]?_0x12e440:{'default':_0x12e440};};function a311_0x3043(_0x45d781,_0x485f7c){const _0x534ac5=a311_0x9cab();return a311_0x3043=function(_0x4de94c,_0x5e6312){_0x4de94c=_0x4de94c-0x14c;let _0x9cab67=_0x534ac5[_0x4de94c];return _0x9cab67;},a311_0x3043(_0x45d781,_0x485f7c);}function a311_0x9cab(){const _0x420fce=['fillFileByNames','https://veevavault.com/','migration__v','240303npPUeq','toString','20111016hJXoqA','deploymentName','null','parse','mdlFileByName','keys','29NsSmhN','path','29931wYCkzo','13517307GhuNlE','292aXgGvz','get','128346wKhxaE','execute','apply','xml2js','MDL_EXTENSION','Builder','string','5960uoUcaK','set','file','VeevaConstants','addComponentsToMainZip','filter','vaultpackage.xml','loadAsync','8wXtyHX','Deploy','jszip','dependencyFileByName','search','default','from','DEPENDENCY_EXTENSION','13092cRZvsA','defineProperty','__esModule','160aAtYwH','mainZip','generateAsync','addVaultPackageFileToMainZip','(((.+)+)+)+$','constructor','has','attachmentBodies','4293MuWOZe'];a311_0x9cab=function(){return _0x420fce;};return a311_0x9cab();}Object[a311_0x480f88(0x171)](exports,'__esModule',{'value':!![]}),exports['ZipCreatorDeploy']=void 0x0;const jszip_1=__importDefault(require(a311_0x480f88(0x16a))),sequence_creator_deploy_1=require('./sequence-creator.deploy'),xml2js_1=require(a311_0x480f88(0x15c)),veeva_constants_1=require('../../constants/veeva.constants'),path_1=__importDefault(require(a311_0x480f88(0x154))),VAULT_PACKAGE_FILENAME=a311_0x480f88(0x166);class ZipCreatorDeploy{constructor({attachmentBodies:_0x4da069,deploymentName:_0x41a504}){const _0x30489c=a311_0x480f88;this['dependencyFileByName']=new Map(),this['mdlFileByName']=new Map(),this[_0x30489c(0x174)]=new jszip_1[(_0x30489c(0x16d))](),this['attachmentBodies']=_0x4da069,this[_0x30489c(0x14e)]=_0x41a504;}async[a311_0x480f88(0x17c)](){const _0x3bb78d=a311_0x480f88;var _0x1288f0;for(const _0x69c327 of this[_0x3bb78d(0x17a)]){const _0x483792=new jszip_1[(_0x3bb78d(0x16d))]();await _0x483792[_0x3bb78d(0x167)](_0x69c327,{'base64':!![]});for(const _0x1719af in _0x483792['files']){const _0x3e43b7=await((_0x1288f0=_0x483792[_0x3bb78d(0x162)](_0x1719af))===null||_0x1288f0===void 0x0?void 0x0:_0x1288f0['async'](_0x3bb78d(0x15f)));if(!_0x3e43b7)continue;const {name:_0x561fc0,ext:_0xf72c0e}=path_1[_0x3bb78d(0x16d)][_0x3bb78d(0x150)](_0x1719af);switch(_0xf72c0e){case veeva_constants_1[_0x3bb78d(0x163)][_0x3bb78d(0x16f)]:this[_0x3bb78d(0x16b)][_0x3bb78d(0x161)](_0x561fc0,_0x3e43b7);break;case veeva_constants_1[_0x3bb78d(0x163)]['MDL_EXTENSION']:this[_0x3bb78d(0x151)][_0x3bb78d(0x161)](_0x561fc0,_0x3e43b7);break;}}}}['addComponentsToMainZip'](_0x17dbdb){const _0x5a8c4b=a311_0x480f88;for(const _0xb62d4c of _0x17dbdb){const _0x54f9ea=this['mdlFileByName'][_0x5a8c4b(0x158)](_0xb62d4c);_0x54f9ea&&this[_0x5a8c4b(0x174)]['file'](_0xb62d4c+veeva_constants_1[_0x5a8c4b(0x163)][_0x5a8c4b(0x15d)],_0x54f9ea);}}[a311_0x480f88(0x176)](){const _0x59d656=a311_0x480f88,_0x21c5f4=new xml2js_1[(_0x59d656(0x15e))]({'headless':!![]}),_0x1f9418={'vaultpackage':{'$':{'xmlns':_0x59d656(0x17d)},'name':this[_0x59d656(0x14e)],'source':{'vault':undefined,'author':'Flosum'},'packagetype':_0x59d656(0x17e),'summary':_0x59d656(0x169),'description':_0x59d656(0x14f)}};this[_0x59d656(0x174)][_0x59d656(0x162)](VAULT_PACKAGE_FILENAME,_0x21c5f4['buildObject'](_0x1f9418));}async['execute'](){const _0x50a51b=a311_0x480f88;await this[_0x50a51b(0x17c)]();const _0x505779=Array[_0x50a51b(0x16e)](this[_0x50a51b(0x151)][_0x50a51b(0x152)]())[_0x50a51b(0x165)](_0x188774=>!this['dependencyFileByName'][_0x50a51b(0x179)](_0x188774)),_0x443a6e=new sequence_creator_deploy_1['SequenceCreatorDeploy']({'dependencyFileByName':this[_0x50a51b(0x16b)]})[_0x50a51b(0x15a)]();return this['addComponentsToMainZip'](_0x505779),this[_0x50a51b(0x164)](_0x443a6e),this[_0x50a51b(0x176)](),this[_0x50a51b(0x174)][_0x50a51b(0x175)]({'type':'nodebuffer'});}}exports['ZipCreatorDeploy']=ZipCreatorDeploy;