const a311_0x52e0b1=a311_0x472e;(function(_0x4b3222,_0x5a654c){const _0x17a16f=a311_0x472e,_0x134819=_0x4b3222();while(!![]){try{const _0x24bc18=-parseInt(_0x17a16f(0x186))/0x1*(parseInt(_0x17a16f(0x178))/0x2)+-parseInt(_0x17a16f(0x165))/0x3*(parseInt(_0x17a16f(0x173))/0x4)+parseInt(_0x17a16f(0x164))/0x5+-parseInt(_0x17a16f(0x176))/0x6+parseInt(_0x17a16f(0x16e))/0x7*(parseInt(_0x17a16f(0x188))/0x8)+-parseInt(_0x17a16f(0x185))/0x9+-parseInt(_0x17a16f(0x16d))/0xa*(-parseInt(_0x17a16f(0x16c))/0xb);if(_0x24bc18===_0x5a654c)break;else _0x134819['push'](_0x134819['shift']());}catch(_0x3a2153){_0x134819['push'](_0x134819['shift']());}}}(a311_0x5212,0xb7a42));const a311_0x3b1eb1=(function(){let _0x335837=!![];return function(_0x1560a7,_0x156fe8){const _0x231bd8=_0x335837?function(){if(_0x156fe8){const _0x1c40e4=_0x156fe8['apply'](_0x1560a7,arguments);return _0x156fe8=null,_0x1c40e4;}}:function(){};return _0x335837=![],_0x231bd8;};}()),a311_0x5122cb=a311_0x3b1eb1(this,function(){const _0x3bfcd6=a311_0x472e;return a311_0x5122cb['toString']()[_0x3bfcd6(0x171)]('(((.+)+)+)+$')['toString']()['constructor'](a311_0x5122cb)[_0x3bfcd6(0x171)](_0x3bfcd6(0x17e));});a311_0x5122cb();'use strict';var __importDefault=this&&this[a311_0x52e0b1(0x161)]||function(_0x5ca16c){const _0x4067aa=a311_0x52e0b1;return _0x5ca16c&&_0x5ca16c[_0x4067aa(0x17b)]?_0x5ca16c:{'default':_0x5ca16c};};function a311_0x472e(_0x31ed6a,_0x48e1e7){const _0x4419e2=a311_0x5212();return a311_0x472e=function(_0x5122cb,_0x3b1eb1){_0x5122cb=_0x5122cb-0x161;let _0x52123e=_0x4419e2[_0x5122cb];return _0x52123e;},a311_0x472e(_0x31ed6a,_0x48e1e7);}Object['defineProperty'](exports,a311_0x52e0b1(0x17b),{'value':!![]}),exports[a311_0x52e0b1(0x172)]=void 0x0;const jszip_1=__importDefault(require('jszip')),sequence_creator_deploy_1=require('./sequence-creator.deploy'),xml2js_1=require('xml2js'),veeva_constants_1=require('../../constants/veeva.constants'),path_1=__importDefault(require(a311_0x52e0b1(0x180))),VAULT_PACKAGE_FILENAME='vaultpackage.xml';function a311_0x5212(){const _0x162371=['ZipCreatorDeploy','16wzmtjP','nodebuffer','loadAsync','3287646qnMxfV','Builder','3522BLfVCo','MDL_EXTENSION','attachmentBodies','__esModule','SequenceCreatorDeploy','DEPENDENCY_EXTENSION','(((.+)+)+)+$','Deploy','path','VeevaConstants','fillFileByNames','https://veevavault.com/','files','2243457TGyHaP','379pFRAhH','mainZip','8RavaOI','file','addVaultPackageFile','async','__importDefault','set','get','2321620CPdBYG','920028vHvCwH','deploymentName','migration__v','dependencyFileByName','mdlFileByName','null','Flosum','17775967kLieWy','10yTDNMs','9542470hSrUif','default','string','search'];a311_0x5212=function(){return _0x162371;};return a311_0x5212();}class ZipCreatorDeploy{constructor({attachmentBodies:_0x50eab3,deploymentName:_0xf80884}){const _0x3f18b9=a311_0x52e0b1;this[_0x3f18b9(0x168)]=new Map(),this[_0x3f18b9(0x169)]=new Map(),this[_0x3f18b9(0x187)]=new jszip_1[(_0x3f18b9(0x16f))](),this[_0x3f18b9(0x17a)]=_0x50eab3,this[_0x3f18b9(0x166)]=_0xf80884;}async['fillFileByNames'](){const _0x479f91=a311_0x52e0b1;var _0x183db6;for(const _0x210c2a of this['attachmentBodies']){const _0x2e5e47=new jszip_1[(_0x479f91(0x16f))]();await _0x2e5e47[_0x479f91(0x175)](_0x210c2a,{'base64':!![]});for(const _0x456131 in _0x2e5e47[_0x479f91(0x184)]){const _0x34877d=await((_0x183db6=_0x2e5e47[_0x479f91(0x189)](_0x456131))===null||_0x183db6===void 0x0?void 0x0:_0x183db6[_0x479f91(0x18b)](_0x479f91(0x170)));if(!_0x34877d)continue;const {name:_0x542538,ext:_0x1b9ecf}=path_1[_0x479f91(0x16f)]['parse'](_0x456131);switch(_0x1b9ecf){case veeva_constants_1['VeevaConstants'][_0x479f91(0x17d)]:this['dependencyFileByName']['set'](_0x542538,_0x34877d);break;case veeva_constants_1[_0x479f91(0x181)]['MDL_EXTENSION']:this[_0x479f91(0x169)][_0x479f91(0x162)](_0x542538,_0x34877d);break;}}}}[a311_0x52e0b1(0x18a)](){const _0xd4e173=a311_0x52e0b1,_0xf4709=new xml2js_1[(_0xd4e173(0x177))]({'headless':!![]}),_0x1e6377={'vaultpackage':{'$':{'xmlns':_0xd4e173(0x183)},'name':this[_0xd4e173(0x166)],'source':{'vault':undefined,'author':_0xd4e173(0x16b)},'packagetype':_0xd4e173(0x167),'summary':_0xd4e173(0x17f),'description':_0xd4e173(0x16a)}};this[_0xd4e173(0x187)]['file'](VAULT_PACKAGE_FILENAME,_0xf4709['buildObject'](_0x1e6377));}async['execute'](){const _0xc9599d=a311_0x52e0b1;await this[_0xc9599d(0x182)]();const _0x46e538=new sequence_creator_deploy_1[(_0xc9599d(0x17c))]({'dependencyFileByName':this[_0xc9599d(0x168)]})['execute']();for(const _0x26c2a1 of _0x46e538){const _0x510bc1=this[_0xc9599d(0x169)][_0xc9599d(0x163)](_0x26c2a1);_0x510bc1&&this[_0xc9599d(0x187)][_0xc9599d(0x189)](_0x26c2a1+veeva_constants_1[_0xc9599d(0x181)][_0xc9599d(0x179)],_0x510bc1);}return this[_0xc9599d(0x18a)](),this[_0xc9599d(0x187)]['generateAsync']({'type':_0xc9599d(0x174)});}}exports[a311_0x52e0b1(0x172)]=ZipCreatorDeploy;