const a69_0x4886fd=a69_0x338c;function a69_0x338c(_0x15b29e,_0x584dfc){const _0x558d60=a69_0x57a0();return a69_0x338c=function(_0x4d90d0,_0x3948b0){_0x4d90d0=_0x4d90d0-0xf0;let _0x57a09f=_0x558d60[_0x4d90d0];return _0x57a09f;},a69_0x338c(_0x15b29e,_0x584dfc);}(function(_0x251872,_0x544275){const _0x619196=a69_0x338c,_0x21c54a=_0x251872();while(!![]){try{const _0x285c88=-parseInt(_0x619196(0x10e))/0x1*(-parseInt(_0x619196(0x110))/0x2)+-parseInt(_0x619196(0x118))/0x3*(parseInt(_0x619196(0x10f))/0x4)+-parseInt(_0x619196(0xf5))/0x5*(-parseInt(_0x619196(0x12f))/0x6)+-parseInt(_0x619196(0x108))/0x7*(parseInt(_0x619196(0xf3))/0x8)+parseInt(_0x619196(0x109))/0x9*(-parseInt(_0x619196(0x101))/0xa)+-parseInt(_0x619196(0x107))/0xb*(-parseInt(_0x619196(0x12e))/0xc)+-parseInt(_0x619196(0x10a))/0xd*(-parseInt(_0x619196(0xf1))/0xe);if(_0x285c88===_0x544275)break;else _0x21c54a['push'](_0x21c54a['shift']());}catch(_0x45df24){_0x21c54a['push'](_0x21c54a['shift']());}}}(a69_0x57a0,0x936d4));const a69_0x3948b0=(function(){let _0x1e2c94=!![];return function(_0x2396b5,_0x2c0b99){const _0xe53442=_0x1e2c94?function(){if(_0x2c0b99){const _0x39eb2d=_0x2c0b99['apply'](_0x2396b5,arguments);return _0x2c0b99=null,_0x39eb2d;}}:function(){};return _0x1e2c94=![],_0xe53442;};}()),a69_0x4d90d0=a69_0x3948b0(this,function(){const _0xfaaa72=a69_0x338c;return a69_0x4d90d0[_0xfaaa72(0x105)]()[_0xfaaa72(0x103)](_0xfaaa72(0x129))[_0xfaaa72(0x105)]()['constructor'](a69_0x4d90d0)[_0xfaaa72(0x103)](_0xfaaa72(0x129));});a69_0x4d90d0();'use strict';var __decorate=this&&this[a69_0x4886fd(0x10b)]||function(_0x2a85f1,_0x3102cd,_0x34e343,_0x4569cf){const _0x13c92a=a69_0x4886fd;var _0x2fd2e2=arguments[_0x13c92a(0x102)],_0x212a38=_0x2fd2e2<0x3?_0x3102cd:_0x4569cf===null?_0x4569cf=Object[_0x13c92a(0x11a)](_0x3102cd,_0x34e343):_0x4569cf,_0x1251ab;if(typeof Reflect==='object'&&typeof Reflect[_0x13c92a(0xf0)]===_0x13c92a(0x123))_0x212a38=Reflect[_0x13c92a(0xf0)](_0x2a85f1,_0x3102cd,_0x34e343,_0x4569cf);else{for(var _0x4ed17f=_0x2a85f1[_0x13c92a(0x102)]-0x1;_0x4ed17f>=0x0;_0x4ed17f--)if(_0x1251ab=_0x2a85f1[_0x4ed17f])_0x212a38=(_0x2fd2e2<0x3?_0x1251ab(_0x212a38):_0x2fd2e2>0x3?_0x1251ab(_0x3102cd,_0x34e343,_0x212a38):_0x1251ab(_0x3102cd,_0x34e343))||_0x212a38;}return _0x2fd2e2>0x3&&_0x212a38&&Object[_0x13c92a(0x121)](_0x3102cd,_0x34e343,_0x212a38),_0x212a38;},__metadata=this&&this['__metadata']||function(_0xd216e4,_0x4febcc){const _0x384713=a69_0x4886fd;if(typeof Reflect==='object'&&typeof Reflect[_0x384713(0xfb)]===_0x384713(0x123))return Reflect[_0x384713(0xfb)](_0xd216e4,_0x4febcc);},__param=this&&this['__param']||function(_0x387fff,_0x1d5f5c){return function(_0x5896b5,_0x32b82b){_0x1d5f5c(_0x5896b5,_0x32b82b,_0x387fff);};},__importDefault=this&&this[a69_0x4886fd(0x11e)]||function(_0x50ba09){return _0x50ba09&&_0x50ba09['__esModule']?_0x50ba09:{'default':_0x50ba09};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a69_0x4886fd(0x111)]=void 0x0;function a69_0x57a0(){const _0x5f0de0=['getOwnPropertyDescriptor','../../shared/services/app-settings.service','accessToken','%clientToken%','__importDefault','createRequest','replace','defineProperty','post','function','user','typedi','update','request','now','(((.+)+)+)+$','AuthSettingsService','../../shared/services/auth-settings.service','checkAccessToken','interceptors','7920UrkDQJ','2937246EBqqtp','decorate','162246UFQfzp','isLoggedIn','1271248mkCeym','GitApiService','5qzpKUk','getHeaders','bitbucket','getAccessToken','apiRequest','Bearer\x20','metadata','AppSettingsService','./git-api.service','Authorization','headers','accessTokenExpiresAt','13090XPIwOB','length','search','getCurrentUser','toString','design:paramtypes','8635WRKwJX','7tTugiL','4275CgzjxN','715zkjADU','__decorate','MAX_REQUEST_PER_HOUR','authSettings','323fYFNeB','1304588kRADLt','2426PacAtW','BitbucketApiService','then','use','data','refreshToken','BITBUCKET_REFRESH_TOKEN_URL','grant_type=client_credentials','6pPMxfT','Service'];a69_0x57a0=function(){return _0x5f0de0;};return a69_0x57a0();}const constants_1=require('../../../constants'),app_settings_service_1=require(a69_0x4886fd(0x11b)),auth_settings_service_1=require(a69_0x4886fd(0x12b)),axios_1=__importDefault(require('axios')),typedi_1=require(a69_0x4886fd(0x125)),git_api_service_1=require(a69_0x4886fd(0xfd));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a69_0x4886fd(0xf4)]{constructor(_0x287aab,_0x523c25){const _0x13dab0=a69_0x4886fd;super(_0x287aab),this[_0x13dab0(0x10d)]=_0x523c25,this['accessTokenExpiresAt']=-0x1,this[_0x13dab0(0x10c)]=0x3e8,this[_0x13dab0(0x127)]=this['createRequest']();}get[a69_0x4886fd(0xf9)](){return this['request'];}[a69_0x4886fd(0x11f)](_0x278207){const _0x36a7fe=a69_0x4886fd,_0x53288e=super['createRequest'](_0x278207);return _0x53288e[_0x36a7fe(0x12d)][_0x36a7fe(0x127)][_0x36a7fe(0x113)](async _0x30798c=>{const _0x386dae=_0x36a7fe;return await this['checkAccessToken'](),_0x30798c[_0x386dae(0xff)][_0x386dae(0xfe)]=_0x386dae(0xfa)+this[_0x386dae(0x11c)],_0x30798c;}),_0x53288e;}async[a69_0x4886fd(0x12c)](){const _0x2717e5=a69_0x4886fd;if(this[_0x2717e5(0x11c)]&&Date[_0x2717e5(0x128)]()<this[_0x2717e5(0x100)])return;await this['refreshToken']();}async[a69_0x4886fd(0x115)](){const _0x2084b2=a69_0x4886fd,{clientToken:_0x5b8e51}=this[_0x2084b2(0x10d)][_0x2084b2(0xf7)],_0x29440e=await axios_1['default'][_0x2084b2(0x122)](constants_1[_0x2084b2(0x116)][_0x2084b2(0x120)](_0x2084b2(0x11d),_0x5b8e51),_0x2084b2(0x117))[_0x2084b2(0x112)](_0x1b55c6=>_0x1b55c6[_0x2084b2(0x114)]),{expires_in:_0x2611ff,access_token:_0x279d4a}=_0x29440e;this[_0x2084b2(0x10d)][_0x2084b2(0x126)]({'bitbucket':{...this[_0x2084b2(0x10d)][_0x2084b2(0xf7)],'token':_0x279d4a}}),this[_0x2084b2(0x100)]=Date[_0x2084b2(0x128)]()+_0x2611ff*0x3e8,this[_0x2084b2(0x11c)]=_0x279d4a;}[a69_0x4886fd(0xf6)](){return{};}[a69_0x4886fd(0x104)](){const _0x3b9e1b=a69_0x4886fd;return this[_0x3b9e1b(0x127)]['get'](_0x3b9e1b(0x124));}[a69_0x4886fd(0xf8)](){return this['accessToken'];}async[a69_0x4886fd(0xf2)](){const _0x11f26f=a69_0x4886fd;return await this[_0x11f26f(0x104)](),!![];}};BitbucketApiService=__decorate([typedi_1[a69_0x4886fd(0x119)](),__param(0x0,typedi_1['Inject']()),__metadata(a69_0x4886fd(0x106),[app_settings_service_1[a69_0x4886fd(0xfc)],auth_settings_service_1[a69_0x4886fd(0x12a)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;