const a70_0x20abe9=a70_0x51ec;function a70_0x2d45(){const _0x4cc8e9=['BitbucketApiService','MAX_REQUEST_PER_HOUR','replace','axios','%clientToken%','5963679jWERwO','constructor','__metadata','1911576RGNnoN','function','user','get','accessToken','1FCTtOk','interceptors','__esModule','defineProperty','createRequest','../../shared/services/auth-settings.service','10IlfkgT','apiRequest','checkAccessToken','default','accessTokenExpiresAt','8puyvIp','11svUUbd','getCurrentUser','length','Service','3681399jXDddW','Authorization','object','(((.+)+)+)+$','toString','metadata','request','../../../constants','update','apply','data','BITBUCKET_REFRESH_TOKEN_URL','../../shared/services/app-settings.service','bitbucket','refreshToken','4152636UIsLgj','now','typedi','6811903GkHKIW','decorate','Bearer\x20','GitApiService','authSettings','__param','search','then','2984UvrwCd','4525pmOfDC','getAccessToken','grant_type=client_credentials','1583046AYcVtG'];a70_0x2d45=function(){return _0x4cc8e9;};return a70_0x2d45();}(function(_0x10d8bc,_0x56e4bc){const _0x3c2456=a70_0x51ec,_0x44b789=_0x10d8bc();while(!![]){try{const _0x534110=-parseInt(_0x3c2456(0x102))/0x1*(-parseInt(_0x3c2456(0xfd))/0x2)+-parseInt(_0x3c2456(0x112))/0x3+parseInt(_0x3c2456(0x12c))/0x4*(parseInt(_0x3c2456(0x12d))/0x5)+parseInt(_0x3c2456(0xf4))/0x6+parseInt(_0x3c2456(0x124))/0x7*(parseInt(_0x3c2456(0x10d))/0x8)+parseInt(_0x3c2456(0xfa))/0x9*(-parseInt(_0x3c2456(0x108))/0xa)+-parseInt(_0x3c2456(0x10e))/0xb*(parseInt(_0x3c2456(0x121))/0xc);if(_0x534110===_0x56e4bc)break;else _0x44b789['push'](_0x44b789['shift']());}catch(_0x415d52){_0x44b789['push'](_0x44b789['shift']());}}}(a70_0x2d45,0x9a507));const a70_0x42d329=(function(){let _0x4145d3=!![];return function(_0x4a132e,_0x14b6f9){const _0x1091fc=_0x4145d3?function(){const _0x335b1e=a70_0x51ec;if(_0x14b6f9){const _0xdfc22a=_0x14b6f9[_0x335b1e(0x11b)](_0x4a132e,arguments);return _0x14b6f9=null,_0xdfc22a;}}:function(){};return _0x4145d3=![],_0x1091fc;};}()),a70_0x4f6a17=a70_0x42d329(this,function(){const _0x2a0fc8=a70_0x51ec;return a70_0x4f6a17[_0x2a0fc8(0x116)]()['search'](_0x2a0fc8(0x115))[_0x2a0fc8(0x116)]()[_0x2a0fc8(0xfb)](a70_0x4f6a17)[_0x2a0fc8(0x12a)](_0x2a0fc8(0x115));});a70_0x4f6a17();'use strict';var __decorate=this&&this['__decorate']||function(_0x164ea9,_0x29bab6,_0x37678a,_0x2d623e){const _0x114337=a70_0x51ec;var _0x120b2b=arguments[_0x114337(0x110)],_0x211e6f=_0x120b2b<0x3?_0x29bab6:_0x2d623e===null?_0x2d623e=Object['getOwnPropertyDescriptor'](_0x29bab6,_0x37678a):_0x2d623e,_0x4637a5;if(typeof Reflect===_0x114337(0x114)&&typeof Reflect[_0x114337(0x125)]===_0x114337(0xfe))_0x211e6f=Reflect['decorate'](_0x164ea9,_0x29bab6,_0x37678a,_0x2d623e);else{for(var _0x11d516=_0x164ea9['length']-0x1;_0x11d516>=0x0;_0x11d516--)if(_0x4637a5=_0x164ea9[_0x11d516])_0x211e6f=(_0x120b2b<0x3?_0x4637a5(_0x211e6f):_0x120b2b>0x3?_0x4637a5(_0x29bab6,_0x37678a,_0x211e6f):_0x4637a5(_0x29bab6,_0x37678a))||_0x211e6f;}return _0x120b2b>0x3&&_0x211e6f&&Object[_0x114337(0x105)](_0x29bab6,_0x37678a,_0x211e6f),_0x211e6f;},__metadata=this&&this[a70_0x20abe9(0xfc)]||function(_0x2e6a0f,_0x4ac6fd){const _0x1cb89a=a70_0x20abe9;if(typeof Reflect===_0x1cb89a(0x114)&&typeof Reflect[_0x1cb89a(0x117)]===_0x1cb89a(0xfe))return Reflect['metadata'](_0x2e6a0f,_0x4ac6fd);},__param=this&&this[a70_0x20abe9(0x129)]||function(_0x10f45a,_0x487b4c){return function(_0x3a0dc7,_0x2f5808){_0x487b4c(_0x3a0dc7,_0x2f5808,_0x10f45a);};},__importDefault=this&&this['__importDefault']||function(_0x3d380c){return _0x3d380c&&_0x3d380c['__esModule']?_0x3d380c:{'default':_0x3d380c};};Object[a70_0x20abe9(0x105)](exports,a70_0x20abe9(0x104),{'value':!![]}),exports[a70_0x20abe9(0xf5)]=void 0x0;const constants_1=require(a70_0x20abe9(0x119)),app_settings_service_1=require(a70_0x20abe9(0x11e)),auth_settings_service_1=require(a70_0x20abe9(0x107)),axios_1=__importDefault(require(a70_0x20abe9(0xf8))),typedi_1=require(a70_0x20abe9(0x123)),git_api_service_1=require('./git-api.service');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x20abe9(0x127)]{constructor(_0x4f0ddb,_0x1f97a2){const _0x8bd698=a70_0x20abe9;super(_0x4f0ddb),this['authSettings']=_0x1f97a2,this['accessTokenExpiresAt']=-0x1,this[_0x8bd698(0xf6)]=0x3e8,this[_0x8bd698(0x118)]=this[_0x8bd698(0x106)]();}get[a70_0x20abe9(0x109)](){const _0x517789=a70_0x20abe9;return this[_0x517789(0x118)];}[a70_0x20abe9(0x106)](_0x3b614c){const _0x2ea029=a70_0x20abe9,_0x5a4283=super[_0x2ea029(0x106)](_0x3b614c);return _0x5a4283[_0x2ea029(0x103)][_0x2ea029(0x118)]['use'](async _0x20d548=>{const _0x55ab0f=_0x2ea029;return await this[_0x55ab0f(0x10a)](),_0x20d548['headers'][_0x55ab0f(0x113)]=_0x55ab0f(0x126)+this[_0x55ab0f(0x101)],_0x20d548;}),_0x5a4283;}async[a70_0x20abe9(0x10a)](){const _0x259cb5=a70_0x20abe9;if(this[_0x259cb5(0x101)]&&Date[_0x259cb5(0x122)]()<this[_0x259cb5(0x10c)])return;await this[_0x259cb5(0x120)]();}async[a70_0x20abe9(0x120)](){const _0x2742fb=a70_0x20abe9,{clientToken:_0x4b5aa2}=this[_0x2742fb(0x128)][_0x2742fb(0x11f)],_0x331c1b=await axios_1[_0x2742fb(0x10b)]['post'](constants_1[_0x2742fb(0x11d)][_0x2742fb(0xf7)](_0x2742fb(0xf9),_0x4b5aa2),_0x2742fb(0x12f))[_0x2742fb(0x12b)](_0x5cd662=>_0x5cd662[_0x2742fb(0x11c)]),{expires_in:_0xce789c,access_token:_0x46f811}=_0x331c1b;this[_0x2742fb(0x128)][_0x2742fb(0x11a)]({'bitbucket':{...this['authSettings'][_0x2742fb(0x11f)],'token':_0x46f811}}),this['accessTokenExpiresAt']=Date[_0x2742fb(0x122)]()+_0xce789c*0x3e8,this[_0x2742fb(0x101)]=_0x46f811;}['getHeaders'](){return{};}[a70_0x20abe9(0x10f)](){const _0x394766=a70_0x20abe9;return this[_0x394766(0x118)][_0x394766(0x100)](_0x394766(0xff));}[a70_0x20abe9(0x12e)](){return this['accessToken'];}async['isLoggedIn'](){const _0x3bfe59=a70_0x20abe9;return await this[_0x3bfe59(0x10f)](),!![];}};function a70_0x51ec(_0x57a6cf,_0xec02d3){const _0x1d45fd=a70_0x2d45();return a70_0x51ec=function(_0x4f6a17,_0x42d329){_0x4f6a17=_0x4f6a17-0xf4;let _0x2d4537=_0x1d45fd[_0x4f6a17];return _0x2d4537;},a70_0x51ec(_0x57a6cf,_0xec02d3);}BitbucketApiService=__decorate([typedi_1[a70_0x20abe9(0x111)](),__param(0x0,typedi_1['Inject']()),__metadata('design:paramtypes',[app_settings_service_1['AppSettingsService'],auth_settings_service_1['AuthSettingsService']])],BitbucketApiService),exports[a70_0x20abe9(0xf5)]=BitbucketApiService;