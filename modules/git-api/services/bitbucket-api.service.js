const a69_0x506c5e=a69_0x95a2;(function(_0x51a0ed,_0x407246){const _0x200683=a69_0x95a2,_0xc2300f=_0x51a0ed();while(!![]){try{const _0x52933c=-parseInt(_0x200683(0xc7))/0x1*(parseInt(_0x200683(0xd9))/0x2)+parseInt(_0x200683(0xd4))/0x3*(-parseInt(_0x200683(0xd8))/0x4)+parseInt(_0x200683(0xf4))/0x5*(parseInt(_0x200683(0xce))/0x6)+parseInt(_0x200683(0xc4))/0x7*(-parseInt(_0x200683(0xf2))/0x8)+parseInt(_0x200683(0xcc))/0x9*(-parseInt(_0x200683(0xca))/0xa)+-parseInt(_0x200683(0xf6))/0xb*(-parseInt(_0x200683(0xb9))/0xc)+parseInt(_0x200683(0xbb))/0xd;if(_0x52933c===_0x407246)break;else _0xc2300f['push'](_0xc2300f['shift']());}catch(_0x5d4fdb){_0xc2300f['push'](_0xc2300f['shift']());}}}(a69_0x1ba3,0x646c8));function a69_0x95a2(_0x2d27f7,_0x21514a){const _0x5b065a=a69_0x1ba3();return a69_0x95a2=function(_0xd0cbe2,_0x104eda){_0xd0cbe2=_0xd0cbe2-0xb9;let _0x1ba35a=_0x5b065a[_0xd0cbe2];return _0x1ba35a;},a69_0x95a2(_0x2d27f7,_0x21514a);}const a69_0x104eda=(function(){let _0x4f4411=!![];return function(_0x367fec,_0x1d9d49){const _0x446b80=_0x4f4411?function(){const _0x88085f=a69_0x95a2;if(_0x1d9d49){const _0x3c7362=_0x1d9d49[_0x88085f(0xe8)](_0x367fec,arguments);return _0x1d9d49=null,_0x3c7362;}}:function(){};return _0x4f4411=![],_0x446b80;};}()),a69_0xd0cbe2=a69_0x104eda(this,function(){const _0x1caeb4=a69_0x95a2;return a69_0xd0cbe2[_0x1caeb4(0xe6)]()[_0x1caeb4(0xbd)](_0x1caeb4(0xeb))['toString']()[_0x1caeb4(0xba)](a69_0xd0cbe2)[_0x1caeb4(0xbd)](_0x1caeb4(0xeb));});a69_0xd0cbe2();'use strict';var __decorate=this&&this[a69_0x506c5e(0xe4)]||function(_0x2c0139,_0x5b4526,_0x18dadf,_0x4b2987){const _0x1dc725=a69_0x506c5e;var _0x5e7b6b=arguments['length'],_0xcb65d9=_0x5e7b6b<0x3?_0x5b4526:_0x4b2987===null?_0x4b2987=Object[_0x1dc725(0xec)](_0x5b4526,_0x18dadf):_0x4b2987,_0x4308fe;if(typeof Reflect===_0x1dc725(0xd5)&&typeof Reflect[_0x1dc725(0xcd)]==='function')_0xcb65d9=Reflect[_0x1dc725(0xcd)](_0x2c0139,_0x5b4526,_0x18dadf,_0x4b2987);else{for(var _0x10dacc=_0x2c0139['length']-0x1;_0x10dacc>=0x0;_0x10dacc--)if(_0x4308fe=_0x2c0139[_0x10dacc])_0xcb65d9=(_0x5e7b6b<0x3?_0x4308fe(_0xcb65d9):_0x5e7b6b>0x3?_0x4308fe(_0x5b4526,_0x18dadf,_0xcb65d9):_0x4308fe(_0x5b4526,_0x18dadf))||_0xcb65d9;}return _0x5e7b6b>0x3&&_0xcb65d9&&Object[_0x1dc725(0xbe)](_0x5b4526,_0x18dadf,_0xcb65d9),_0xcb65d9;},__metadata=this&&this[a69_0x506c5e(0xf3)]||function(_0x47182e,_0x2196ff){const _0x228d67=a69_0x506c5e;if(typeof Reflect===_0x228d67(0xd5)&&typeof Reflect[_0x228d67(0xc5)]===_0x228d67(0xe2))return Reflect['metadata'](_0x47182e,_0x2196ff);},__param=this&&this[a69_0x506c5e(0xe3)]||function(_0x2bb6ff,_0x3a035c){return function(_0x2da660,_0x235a06){_0x3a035c(_0x2da660,_0x235a06,_0x2bb6ff);};},__importDefault=this&&this[a69_0x506c5e(0xe1)]||function(_0x1bd189){const _0x54692f=a69_0x506c5e;return _0x1bd189&&_0x1bd189[_0x54692f(0xdb)]?_0x1bd189:{'default':_0x1bd189};};Object[a69_0x506c5e(0xbe)](exports,a69_0x506c5e(0xdb),{'value':!![]}),exports[a69_0x506c5e(0xea)]=void 0x0;const constants_1=require(a69_0x506c5e(0xd2)),app_settings_service_1=require(a69_0x506c5e(0xf1)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require('axios')),typedi_1=require(a69_0x506c5e(0xc8)),git_api_service_1=require(a69_0x506c5e(0xe5));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a69_0x506c5e(0xe7)]{constructor(_0xf1795,_0xc6455d){const _0x591eb5=a69_0x506c5e;super(_0xf1795),this['authSettings']=_0xc6455d,this['accessTokenExpiresAt']=-0x1,this[_0x591eb5(0xbc)]=0x3e8,this[_0x591eb5(0xd6)]=this[_0x591eb5(0xf0)]();}get['apiRequest'](){const _0x24b43c=a69_0x506c5e;return this[_0x24b43c(0xd6)];}[a69_0x506c5e(0xf0)](_0x3c65cb){const _0x356049=a69_0x506c5e,_0x22477d=super['createRequest'](_0x3c65cb);return _0x22477d['interceptors'][_0x356049(0xd6)][_0x356049(0xf5)](async _0x1be918=>{const _0x5c5c9b=_0x356049;return await this['checkAccessToken'](),_0x1be918['headers'][_0x5c5c9b(0xdf)]=_0x5c5c9b(0xbf)+this[_0x5c5c9b(0xc2)],_0x1be918;}),_0x22477d;}async['checkAccessToken'](){const _0x3739a2=a69_0x506c5e;if(this[_0x3739a2(0xc2)]&&Date[_0x3739a2(0xda)]()<this[_0x3739a2(0xcb)])return;await this['refreshToken']();}async[a69_0x506c5e(0xee)](){const _0x2ea771=a69_0x506c5e,{clientToken:_0x798e5a}=this[_0x2ea771(0xcf)][_0x2ea771(0xc0)],_0x1c9432=await axios_1['default'][_0x2ea771(0xe9)](constants_1[_0x2ea771(0xc6)][_0x2ea771(0xed)]('%clientToken%',_0x798e5a),_0x2ea771(0xc9))['then'](_0x597733=>_0x597733[_0x2ea771(0xef)]),{expires_in:_0x3ee357,access_token:_0xb298a4}=_0x1c9432;this['authSettings']['update']({'bitbucket':{...this[_0x2ea771(0xcf)]['bitbucket'],'token':_0xb298a4}}),this[_0x2ea771(0xcb)]=Date[_0x2ea771(0xda)]()+_0x3ee357*0x3e8,this[_0x2ea771(0xc2)]=_0xb298a4;}[a69_0x506c5e(0xdc)](){return{};}[a69_0x506c5e(0xc3)](){const _0x102e1c=a69_0x506c5e;return this['request'][_0x102e1c(0xe0)](_0x102e1c(0xc1));}[a69_0x506c5e(0xdd)](){return this['accessToken'];}async[a69_0x506c5e(0xd3)](){return await this['getCurrentUser'](),!![];}};function a69_0x1ba3(){const _0x447807=['44810mxdBZf','accessTokenExpiresAt','1071WPcTxT','decorate','24BopqTR','authSettings','Inject','Service','../../../constants','isLoggedIn','181533pZuvSo','object','request','design:paramtypes','44PmzcCt','34tHZOhL','now','__esModule','getHeaders','getAccessToken','AuthSettingsService','Authorization','get','__importDefault','function','__param','__decorate','./git-api.service','toString','GitApiService','apply','post','BitbucketApiService','(((.+)+)+)+$','getOwnPropertyDescriptor','replace','refreshToken','data','createRequest','../../shared/services/app-settings.service','696MNwzmS','__metadata','735340CoAkXr','use','72886dcDMuJ','1236jvMJui','constructor','20759908oPeFWN','MAX_REQUEST_PER_HOUR','search','defineProperty','Bearer\x20','bitbucket','user','accessToken','getCurrentUser','40033PqOKou','metadata','BITBUCKET_REFRESH_TOKEN_URL','44701QprLsX','typedi','grant_type=client_credentials'];a69_0x1ba3=function(){return _0x447807;};return a69_0x1ba3();}BitbucketApiService=__decorate([typedi_1[a69_0x506c5e(0xd1)](),__param(0x0,typedi_1[a69_0x506c5e(0xd0)]()),__metadata(a69_0x506c5e(0xd7),[app_settings_service_1['AppSettingsService'],auth_settings_service_1[a69_0x506c5e(0xde)]])],BitbucketApiService),exports[a69_0x506c5e(0xea)]=BitbucketApiService;