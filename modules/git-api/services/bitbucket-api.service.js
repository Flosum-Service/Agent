const a70_0x5b26cb=a70_0xa026;function a70_0xa026(_0x4f0a40,_0x3fa14f){const _0xd26acf=a70_0x1108();return a70_0xa026=function(_0xc427b7,_0x4075ec){_0xc427b7=_0xc427b7-0x1f1;let _0x1108b2=_0xd26acf[_0xc427b7];return _0x1108b2;},a70_0xa026(_0x4f0a40,_0x3fa14f);}(function(_0x4d4133,_0x1deb44){const _0x58c250=a70_0xa026,_0x2cee78=_0x4d4133();while(!![]){try{const _0x30e86c=-parseInt(_0x58c250(0x21c))/0x1*(parseInt(_0x58c250(0x1ff))/0x2)+parseInt(_0x58c250(0x1f4))/0x3+parseInt(_0x58c250(0x220))/0x4+-parseInt(_0x58c250(0x206))/0x5+-parseInt(_0x58c250(0x213))/0x6+-parseInt(_0x58c250(0x215))/0x7+-parseInt(_0x58c250(0x21d))/0x8*(-parseInt(_0x58c250(0x227))/0x9);if(_0x30e86c===_0x1deb44)break;else _0x2cee78['push'](_0x2cee78['shift']());}catch(_0x195364){_0x2cee78['push'](_0x2cee78['shift']());}}}(a70_0x1108,0x68e2d));function a70_0x1108(){const _0x2b43b5=['request','AppSettingsService','2329470tUeEJd','Bearer\x20','../../shared/services/auth-settings.service','function','(((.+)+)+)+$','checkAccessToken','__param','authSettings','interceptors','getCurrentUser','apply','5348GxabAF','get','Authorization','design:paramtypes','update','decorate','axios','2513640TmQKId','use','BitbucketApiService','data','MAX_REQUEST_PER_HOUR','AuthSettingsService','object','metadata','accessTokenExpiresAt','default','bitbucket','now','%clientToken%','1989810ZbqVxB','getHeaders','940758pzqjrU','getAccessToken','typedi','createRequest','toString','Inject','grant_type=client_credentials','223HCpMkc','5944136zViVjP','length','search','1900660iZRbPC','__importDefault','../../../constants','./git-api.service','defineProperty','accessToken','__esModule','9yRrqSR','replace','isLoggedIn','../../shared/services/app-settings.service','refreshToken','then','user'];a70_0x1108=function(){return _0x2b43b5;};return a70_0x1108();}const a70_0x4075ec=(function(){let _0x21511a=!![];return function(_0x5e87b3,_0x46be5e){const _0x1d9500=_0x21511a?function(){const _0x133359=a70_0xa026;if(_0x46be5e){const _0x351ade=_0x46be5e[_0x133359(0x1fe)](_0x5e87b3,arguments);return _0x46be5e=null,_0x351ade;}}:function(){};return _0x21511a=![],_0x1d9500;};}()),a70_0xc427b7=a70_0x4075ec(this,function(){const _0x287ec3=a70_0xa026;return a70_0xc427b7[_0x287ec3(0x219)]()[_0x287ec3(0x21f)](_0x287ec3(0x1f8))['toString']()['constructor'](a70_0xc427b7)['search']('(((.+)+)+)+$');});a70_0xc427b7();'use strict';var __decorate=this&&this['__decorate']||function(_0x267570,_0x4d530d,_0x1b37bf,_0x1c44ae){const _0x41bf44=a70_0xa026;var _0x3d5376=arguments[_0x41bf44(0x21e)],_0x163217=_0x3d5376<0x3?_0x4d530d:_0x1c44ae===null?_0x1c44ae=Object['getOwnPropertyDescriptor'](_0x4d530d,_0x1b37bf):_0x1c44ae,_0x5d4153;if(typeof Reflect===_0x41bf44(0x20c)&&typeof Reflect[_0x41bf44(0x204)]===_0x41bf44(0x1f7))_0x163217=Reflect[_0x41bf44(0x204)](_0x267570,_0x4d530d,_0x1b37bf,_0x1c44ae);else{for(var _0x4b67e0=_0x267570[_0x41bf44(0x21e)]-0x1;_0x4b67e0>=0x0;_0x4b67e0--)if(_0x5d4153=_0x267570[_0x4b67e0])_0x163217=(_0x3d5376<0x3?_0x5d4153(_0x163217):_0x3d5376>0x3?_0x5d4153(_0x4d530d,_0x1b37bf,_0x163217):_0x5d4153(_0x4d530d,_0x1b37bf))||_0x163217;}return _0x3d5376>0x3&&_0x163217&&Object[_0x41bf44(0x224)](_0x4d530d,_0x1b37bf,_0x163217),_0x163217;},__metadata=this&&this['__metadata']||function(_0x397044,_0x416794){const _0x1a8d84=a70_0xa026;if(typeof Reflect===_0x1a8d84(0x20c)&&typeof Reflect[_0x1a8d84(0x20d)]===_0x1a8d84(0x1f7))return Reflect['metadata'](_0x397044,_0x416794);},__param=this&&this[a70_0x5b26cb(0x1fa)]||function(_0x41ad4b,_0x3e2137){return function(_0x3bc57a,_0x51fca5){_0x3e2137(_0x3bc57a,_0x51fca5,_0x41ad4b);};},__importDefault=this&&this[a70_0x5b26cb(0x221)]||function(_0x141976){const _0x89c2f1=a70_0x5b26cb;return _0x141976&&_0x141976[_0x89c2f1(0x226)]?_0x141976:{'default':_0x141976};};Object[a70_0x5b26cb(0x224)](exports,a70_0x5b26cb(0x226),{'value':!![]}),exports[a70_0x5b26cb(0x208)]=void 0x0;const constants_1=require(a70_0x5b26cb(0x222)),app_settings_service_1=require(a70_0x5b26cb(0x22a)),auth_settings_service_1=require(a70_0x5b26cb(0x1f6)),axios_1=__importDefault(require(a70_0x5b26cb(0x205))),typedi_1=require(a70_0x5b26cb(0x217)),git_api_service_1=require(a70_0x5b26cb(0x223));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x3fbfce,_0x319acd){const _0x4d8270=a70_0x5b26cb;super(_0x3fbfce),this[_0x4d8270(0x1fb)]=_0x319acd,this[_0x4d8270(0x20e)]=-0x1,this[_0x4d8270(0x20a)]=0x3e8,this['request']=this['createRequest']();}get['apiRequest'](){const _0x2ea100=a70_0x5b26cb;return this[_0x2ea100(0x1f2)];}['createRequest'](_0x2ecc01){const _0x119e6c=a70_0x5b26cb,_0x441bed=super[_0x119e6c(0x218)](_0x2ecc01);return _0x441bed[_0x119e6c(0x1fc)][_0x119e6c(0x1f2)][_0x119e6c(0x207)](async _0x3d0535=>{const _0x100498=_0x119e6c;return await this[_0x100498(0x1f9)](),_0x3d0535['headers'][_0x100498(0x201)]=_0x100498(0x1f5)+this[_0x100498(0x225)],_0x3d0535;}),_0x441bed;}async['checkAccessToken'](){const _0x563b03=a70_0x5b26cb;if(this[_0x563b03(0x225)]&&Date[_0x563b03(0x211)]()<this[_0x563b03(0x20e)])return;await this[_0x563b03(0x22b)]();}async[a70_0x5b26cb(0x22b)](){const _0x5d81ad=a70_0x5b26cb,{clientToken:_0x5b6883}=this['authSettings'][_0x5d81ad(0x210)],_0x1f2797=await axios_1[_0x5d81ad(0x20f)]['post'](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x5d81ad(0x228)](_0x5d81ad(0x212),_0x5b6883),_0x5d81ad(0x21b))[_0x5d81ad(0x22c)](_0x323f09=>_0x323f09[_0x5d81ad(0x209)]),{expires_in:_0x3a10ed,access_token:_0x221ccb}=_0x1f2797;this['authSettings'][_0x5d81ad(0x203)]({'bitbucket':{...this[_0x5d81ad(0x1fb)][_0x5d81ad(0x210)],'token':_0x221ccb}}),this[_0x5d81ad(0x20e)]=Date[_0x5d81ad(0x211)]()+_0x3a10ed*0x3e8,this[_0x5d81ad(0x225)]=_0x221ccb;}[a70_0x5b26cb(0x214)](){return{};}[a70_0x5b26cb(0x1fd)](){const _0x4c649e=a70_0x5b26cb;return this['request'][_0x4c649e(0x200)](_0x4c649e(0x1f1));}[a70_0x5b26cb(0x216)](){const _0x1a254e=a70_0x5b26cb;return this[_0x1a254e(0x225)];}async[a70_0x5b26cb(0x229)](){const _0x5d304c=a70_0x5b26cb;return await this[_0x5d304c(0x1fd)](),!![];}};BitbucketApiService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1[a70_0x5b26cb(0x21a)]()),__metadata(a70_0x5b26cb(0x202),[app_settings_service_1[a70_0x5b26cb(0x1f3)],auth_settings_service_1[a70_0x5b26cb(0x20b)]])],BitbucketApiService),exports[a70_0x5b26cb(0x208)]=BitbucketApiService;