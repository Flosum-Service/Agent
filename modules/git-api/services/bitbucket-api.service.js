function a70_0x3455(_0x32f66a,_0x5387b1){const _0x3a1bbc=a70_0x5b0c();return a70_0x3455=function(_0x17f900,_0x5df56f){_0x17f900=_0x17f900-0x16e;let _0x5b0ccf=_0x3a1bbc[_0x17f900];return _0x5b0ccf;},a70_0x3455(_0x32f66a,_0x5387b1);}const a70_0x378fb7=a70_0x3455;(function(_0x549a62,_0x19aebf){const _0x234d37=a70_0x3455,_0x3bab8b=_0x549a62();while(!![]){try{const _0x365058=parseInt(_0x234d37(0x195))/0x1*(parseInt(_0x234d37(0x18a))/0x2)+parseInt(_0x234d37(0x176))/0x3*(parseInt(_0x234d37(0x173))/0x4)+parseInt(_0x234d37(0x19e))/0x5+parseInt(_0x234d37(0x175))/0x6*(-parseInt(_0x234d37(0x190))/0x7)+-parseInt(_0x234d37(0x174))/0x8*(-parseInt(_0x234d37(0x185))/0x9)+parseInt(_0x234d37(0x1a2))/0xa+-parseInt(_0x234d37(0x19a))/0xb;if(_0x365058===_0x19aebf)break;else _0x3bab8b['push'](_0x3bab8b['shift']());}catch(_0x1bf9b2){_0x3bab8b['push'](_0x3bab8b['shift']());}}}(a70_0x5b0c,0x38c2b));const a70_0x5df56f=(function(){let _0x21d972=!![];return function(_0x55a861,_0x1eb4bf){const _0x59b6ac=_0x21d972?function(){const _0x5c8799=a70_0x3455;if(_0x1eb4bf){const _0xc98b7d=_0x1eb4bf[_0x5c8799(0x19b)](_0x55a861,arguments);return _0x1eb4bf=null,_0xc98b7d;}}:function(){};return _0x21d972=![],_0x59b6ac;};}()),a70_0x17f900=a70_0x5df56f(this,function(){const _0x58b99a=a70_0x3455;return a70_0x17f900[_0x58b99a(0x1a0)]()[_0x58b99a(0x1ab)](_0x58b99a(0x19f))[_0x58b99a(0x1a0)]()[_0x58b99a(0x177)](a70_0x17f900)[_0x58b99a(0x1ab)]('(((.+)+)+)+$');});a70_0x17f900();'use strict';var __decorate=this&&this['__decorate']||function(_0x191881,_0x5efd48,_0xf544a,_0x330642){const _0x485532=a70_0x3455;var _0x1c1cbc=arguments[_0x485532(0x194)],_0x133a65=_0x1c1cbc<0x3?_0x5efd48:_0x330642===null?_0x330642=Object[_0x485532(0x184)](_0x5efd48,_0xf544a):_0x330642,_0x1ee1b9;if(typeof Reflect==='object'&&typeof Reflect['decorate']==='function')_0x133a65=Reflect[_0x485532(0x16f)](_0x191881,_0x5efd48,_0xf544a,_0x330642);else{for(var _0x5eb9f8=_0x191881['length']-0x1;_0x5eb9f8>=0x0;_0x5eb9f8--)if(_0x1ee1b9=_0x191881[_0x5eb9f8])_0x133a65=(_0x1c1cbc<0x3?_0x1ee1b9(_0x133a65):_0x1c1cbc>0x3?_0x1ee1b9(_0x5efd48,_0xf544a,_0x133a65):_0x1ee1b9(_0x5efd48,_0xf544a))||_0x133a65;}return _0x1c1cbc>0x3&&_0x133a65&&Object[_0x485532(0x17c)](_0x5efd48,_0xf544a,_0x133a65),_0x133a65;},__metadata=this&&this[a70_0x378fb7(0x186)]||function(_0x3a89a9,_0x7e09ed){const _0x1af090=a70_0x378fb7;if(typeof Reflect===_0x1af090(0x199)&&typeof Reflect[_0x1af090(0x182)]===_0x1af090(0x1a9))return Reflect[_0x1af090(0x182)](_0x3a89a9,_0x7e09ed);},__param=this&&this[a70_0x378fb7(0x1aa)]||function(_0x3dce86,_0x2f7abc){return function(_0x160770,_0x51a573){_0x2f7abc(_0x160770,_0x51a573,_0x3dce86);};},__importDefault=this&&this[a70_0x378fb7(0x1a7)]||function(_0x23f9ac){return _0x23f9ac&&_0x23f9ac['__esModule']?_0x23f9ac:{'default':_0x23f9ac};};Object['defineProperty'](exports,a70_0x378fb7(0x19d),{'value':!![]}),exports[a70_0x378fb7(0x1a6)]=void 0x0;const constants_1=require(a70_0x378fb7(0x17b)),app_settings_service_1=require(a70_0x378fb7(0x18d)),auth_settings_service_1=require(a70_0x378fb7(0x171)),axios_1=__importDefault(require(a70_0x378fb7(0x17d))),typedi_1=require(a70_0x378fb7(0x1a3)),git_api_service_1=require(a70_0x378fb7(0x191));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x378fb7(0x1a5)]{constructor(_0x2cb5e4,_0x572125){const _0x2f5512=a70_0x378fb7;super(_0x2cb5e4),this['authSettings']=_0x572125,this[_0x2f5512(0x1a4)]=-0x1,this[_0x2f5512(0x189)]=0x3e8,this[_0x2f5512(0x192)]=this[_0x2f5512(0x196)]();}get[a70_0x378fb7(0x172)](){const _0x433ed1=a70_0x378fb7;return this[_0x433ed1(0x192)];}[a70_0x378fb7(0x196)](_0x46cbb2){const _0x2fc4a3=a70_0x378fb7,_0x37430b=super['createRequest'](_0x46cbb2);return _0x37430b[_0x2fc4a3(0x17e)][_0x2fc4a3(0x192)][_0x2fc4a3(0x18c)](async _0x221bdc=>{const _0x506e9f=_0x2fc4a3;return await this['checkAccessToken'](),_0x221bdc[_0x506e9f(0x18e)][_0x506e9f(0x193)]=_0x506e9f(0x187)+this[_0x506e9f(0x198)],_0x221bdc;}),_0x37430b;}async['checkAccessToken'](){const _0x4ba69a=a70_0x378fb7;if(this['accessToken']&&Date[_0x4ba69a(0x197)]()<this['accessTokenExpiresAt'])return;await this[_0x4ba69a(0x19c)]();}async[a70_0x378fb7(0x19c)](){const _0x562cf6=a70_0x378fb7,{clientToken:_0x5f113e}=this[_0x562cf6(0x18b)][_0x562cf6(0x179)],_0x38d1cb=await axios_1[_0x562cf6(0x180)]['post'](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x562cf6(0x178)]('%clientToken%',_0x5f113e),_0x562cf6(0x16e))[_0x562cf6(0x181)](_0x5f48a1=>_0x5f48a1['data']),{expires_in:_0x41e707,access_token:_0x3c993f}=_0x38d1cb;this['authSettings'][_0x562cf6(0x1a8)]({'bitbucket':{...this[_0x562cf6(0x18b)]['bitbucket'],'token':_0x3c993f}}),this['accessTokenExpiresAt']=Date[_0x562cf6(0x197)]()+_0x41e707*0x3e8,this[_0x562cf6(0x198)]=_0x3c993f;}['getHeaders'](){return{};}['getCurrentUser'](){const _0x587841=a70_0x378fb7;return this['request'][_0x587841(0x1a1)](_0x587841(0x183));}['getAccessToken'](){const _0x82f3fe=a70_0x378fb7;return this[_0x82f3fe(0x198)];}async[a70_0x378fb7(0x17f)](){return await this['getCurrentUser'](),!![];}};function a70_0x5b0c(){const _0x42c232=['4837767nbgJME','apply','refreshToken','__esModule','518055rhxZLK','(((.+)+)+)+$','toString','get','3220290oBioIv','typedi','accessTokenExpiresAt','GitApiService','BitbucketApiService','__importDefault','update','function','__param','search','grant_type=client_credentials','decorate','AuthSettingsService','../../shared/services/auth-settings.service','apiRequest','160772bbRJbU','9960MuXwqG','2657796sQrFjH','18DHNJQJ','constructor','replace','bitbucket','Inject','../../../constants','defineProperty','axios','interceptors','isLoggedIn','default','then','metadata','user','getOwnPropertyDescriptor','711cZIhhd','__metadata','Bearer\x20','Service','MAX_REQUEST_PER_HOUR','9862RvQMLr','authSettings','use','../../shared/services/app-settings.service','headers','AppSettingsService','7XZMJgU','./git-api.service','request','Authorization','length','71dlTjbJ','createRequest','now','accessToken','object'];a70_0x5b0c=function(){return _0x42c232;};return a70_0x5b0c();}BitbucketApiService=__decorate([typedi_1[a70_0x378fb7(0x188)](),__param(0x0,typedi_1[a70_0x378fb7(0x17a)]()),__metadata('design:paramtypes',[app_settings_service_1[a70_0x378fb7(0x18f)],auth_settings_service_1[a70_0x378fb7(0x170)]])],BitbucketApiService),exports[a70_0x378fb7(0x1a6)]=BitbucketApiService;