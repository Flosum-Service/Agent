function a70_0x3642(_0x15dfca,_0x45e0d0){const _0x2aa3c3=a70_0x94bf();return a70_0x3642=function(_0x3d7dce,_0x3a336f){_0x3d7dce=_0x3d7dce-0x10a;let _0x94bf44=_0x2aa3c3[_0x3d7dce];return _0x94bf44;},a70_0x3642(_0x15dfca,_0x45e0d0);}const a70_0x46b8d4=a70_0x3642;(function(_0x465c0d,_0x42a188){const _0x367919=a70_0x3642,_0x43d4a4=_0x465c0d();while(!![]){try{const _0xffa918=parseInt(_0x367919(0x122))/0x1*(-parseInt(_0x367919(0x136))/0x2)+-parseInt(_0x367919(0x143))/0x3*(parseInt(_0x367919(0x11e))/0x4)+parseInt(_0x367919(0x13d))/0x5+-parseInt(_0x367919(0x146))/0x6*(parseInt(_0x367919(0x142))/0x7)+-parseInt(_0x367919(0x12f))/0x8*(-parseInt(_0x367919(0x119))/0x9)+parseInt(_0x367919(0x149))/0xa+parseInt(_0x367919(0x10f))/0xb;if(_0xffa918===_0x42a188)break;else _0x43d4a4['push'](_0x43d4a4['shift']());}catch(_0x42c117){_0x43d4a4['push'](_0x43d4a4['shift']());}}}(a70_0x94bf,0x25b84));const a70_0x3a336f=(function(){let _0x28ea08=!![];return function(_0x58042b,_0x3abcb3){const _0x509ae9=_0x28ea08?function(){const _0x3a4039=a70_0x3642;if(_0x3abcb3){const _0xf1a916=_0x3abcb3[_0x3a4039(0x129)](_0x58042b,arguments);return _0x3abcb3=null,_0xf1a916;}}:function(){};return _0x28ea08=![],_0x509ae9;};}()),a70_0x3d7dce=a70_0x3a336f(this,function(){const _0x55855a=a70_0x3642;return a70_0x3d7dce[_0x55855a(0x126)]()[_0x55855a(0x11d)]('(((.+)+)+)+$')['toString']()[_0x55855a(0x13a)](a70_0x3d7dce)[_0x55855a(0x11d)]('(((.+)+)+)+$');});a70_0x3d7dce();function a70_0x94bf(){const _0x4edfc9=['Bearer\x20','checkAccessToken','use','toString','default','object','apply','accessToken','createRequest','BitbucketApiService','./git-api.service','__param','24cxzwmw','Inject','accessTokenExpiresAt','replace','getAccessToken','now','decorate','33298XBeFdJ','%clientToken%','isLoggedIn','../../../constants','constructor','AppSettingsService','GitApiService','112040GzBCSu','interceptors','typedi','data','request','133742kOhoUx','3htgMnL','grant_type=client_credentials','function','90wdRttk','defineProperty','../../shared/services/auth-settings.service','1471480ULSIdO','then','post','../../shared/services/app-settings.service','metadata','AuthSettingsService','length','6156315nZgWof','refreshToken','design:paramtypes','authSettings','__decorate','bitbucket','__importDefault','getCurrentUser','update','headers','34740ZCBwYR','Service','getHeaders','getOwnPropertyDescriptor','search','399692xfglnr','MAX_REQUEST_PER_HOUR','__esModule','Authorization','12JwojjI'];a70_0x94bf=function(){return _0x4edfc9;};return a70_0x94bf();}'use strict';var __decorate=this&&this[a70_0x46b8d4(0x113)]||function(_0x4d7e8b,_0x226393,_0x551586,_0x1660c2){const _0x1fc6e1=a70_0x46b8d4;var _0x12655e=arguments[_0x1fc6e1(0x10e)],_0x29671d=_0x12655e<0x3?_0x226393:_0x1660c2===null?_0x1660c2=Object[_0x1fc6e1(0x11c)](_0x226393,_0x551586):_0x1660c2,_0x163b5c;if(typeof Reflect===_0x1fc6e1(0x128)&&typeof Reflect[_0x1fc6e1(0x135)]===_0x1fc6e1(0x145))_0x29671d=Reflect['decorate'](_0x4d7e8b,_0x226393,_0x551586,_0x1660c2);else{for(var _0x1f5041=_0x4d7e8b['length']-0x1;_0x1f5041>=0x0;_0x1f5041--)if(_0x163b5c=_0x4d7e8b[_0x1f5041])_0x29671d=(_0x12655e<0x3?_0x163b5c(_0x29671d):_0x12655e>0x3?_0x163b5c(_0x226393,_0x551586,_0x29671d):_0x163b5c(_0x226393,_0x551586))||_0x29671d;}return _0x12655e>0x3&&_0x29671d&&Object[_0x1fc6e1(0x147)](_0x226393,_0x551586,_0x29671d),_0x29671d;},__metadata=this&&this['__metadata']||function(_0x45411b,_0x557360){const _0xc9b18c=a70_0x46b8d4;if(typeof Reflect===_0xc9b18c(0x128)&&typeof Reflect[_0xc9b18c(0x10c)]===_0xc9b18c(0x145))return Reflect['metadata'](_0x45411b,_0x557360);},__param=this&&this[a70_0x46b8d4(0x12e)]||function(_0x1f4812,_0x366c16){return function(_0x12b318,_0x5f3537){_0x366c16(_0x12b318,_0x5f3537,_0x1f4812);};},__importDefault=this&&this[a70_0x46b8d4(0x115)]||function(_0x4d1455){return _0x4d1455&&_0x4d1455['__esModule']?_0x4d1455:{'default':_0x4d1455};};Object[a70_0x46b8d4(0x147)](exports,a70_0x46b8d4(0x120),{'value':!![]}),exports[a70_0x46b8d4(0x12c)]=void 0x0;const constants_1=require(a70_0x46b8d4(0x139)),app_settings_service_1=require(a70_0x46b8d4(0x10b)),auth_settings_service_1=require(a70_0x46b8d4(0x148)),axios_1=__importDefault(require('axios')),typedi_1=require(a70_0x46b8d4(0x13f)),git_api_service_1=require(a70_0x46b8d4(0x12d));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x46b8d4(0x13c)]{constructor(_0x2223e3,_0x4295e2){const _0x599bb1=a70_0x46b8d4;super(_0x2223e3),this[_0x599bb1(0x112)]=_0x4295e2,this[_0x599bb1(0x131)]=-0x1,this[_0x599bb1(0x11f)]=0x3e8,this[_0x599bb1(0x141)]=this[_0x599bb1(0x12b)]();}get['apiRequest'](){const _0x585616=a70_0x46b8d4;return this[_0x585616(0x141)];}[a70_0x46b8d4(0x12b)](_0x26428a){const _0x431e70=a70_0x46b8d4,_0x30d59d=super[_0x431e70(0x12b)](_0x26428a);return _0x30d59d[_0x431e70(0x13e)][_0x431e70(0x141)][_0x431e70(0x125)](async _0x301c09=>{const _0xdd5fd3=_0x431e70;return await this['checkAccessToken'](),_0x301c09[_0xdd5fd3(0x118)][_0xdd5fd3(0x121)]=_0xdd5fd3(0x123)+this[_0xdd5fd3(0x12a)],_0x301c09;}),_0x30d59d;}async[a70_0x46b8d4(0x124)](){const _0x2acc60=a70_0x46b8d4;if(this[_0x2acc60(0x12a)]&&Date[_0x2acc60(0x134)]()<this[_0x2acc60(0x131)])return;await this[_0x2acc60(0x110)]();}async['refreshToken'](){const _0x28ba54=a70_0x46b8d4,{clientToken:_0x3566c7}=this[_0x28ba54(0x112)][_0x28ba54(0x114)],_0x2a52d6=await axios_1[_0x28ba54(0x127)][_0x28ba54(0x10a)](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x28ba54(0x132)](_0x28ba54(0x137),_0x3566c7),_0x28ba54(0x144))[_0x28ba54(0x14a)](_0x159ed0=>_0x159ed0[_0x28ba54(0x140)]),{expires_in:_0x1c824c,access_token:_0x13c332}=_0x2a52d6;this['authSettings'][_0x28ba54(0x117)]({'bitbucket':{...this[_0x28ba54(0x112)][_0x28ba54(0x114)],'token':_0x13c332}}),this['accessTokenExpiresAt']=Date[_0x28ba54(0x134)]()+_0x1c824c*0x3e8,this[_0x28ba54(0x12a)]=_0x13c332;}[a70_0x46b8d4(0x11b)](){return{};}[a70_0x46b8d4(0x116)](){const _0x58ebcc=a70_0x46b8d4;return this[_0x58ebcc(0x141)]['get']('user');}[a70_0x46b8d4(0x133)](){const _0x31ec3c=a70_0x46b8d4;return this[_0x31ec3c(0x12a)];}async[a70_0x46b8d4(0x138)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([typedi_1[a70_0x46b8d4(0x11a)](),__param(0x0,typedi_1[a70_0x46b8d4(0x130)]()),__metadata(a70_0x46b8d4(0x111),[app_settings_service_1[a70_0x46b8d4(0x13b)],auth_settings_service_1[a70_0x46b8d4(0x10d)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;