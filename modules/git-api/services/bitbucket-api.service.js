const a70_0x27ee3d=a70_0x4218;(function(_0x519562,_0x711177){const _0x16a32b=a70_0x4218,_0x84dfa5=_0x519562();while(!![]){try{const _0x1b959a=-parseInt(_0x16a32b(0x21c))/0x1*(-parseInt(_0x16a32b(0x1e4))/0x2)+parseInt(_0x16a32b(0x223))/0x3+-parseInt(_0x16a32b(0x1fe))/0x4*(parseInt(_0x16a32b(0x20e))/0x5)+-parseInt(_0x16a32b(0x20d))/0x6*(-parseInt(_0x16a32b(0x210))/0x7)+parseInt(_0x16a32b(0x203))/0x8*(-parseInt(_0x16a32b(0x221))/0x9)+parseInt(_0x16a32b(0x1f3))/0xa*(-parseInt(_0x16a32b(0x1f8))/0xb)+-parseInt(_0x16a32b(0x200))/0xc;if(_0x1b959a===_0x711177)break;else _0x84dfa5['push'](_0x84dfa5['shift']());}catch(_0x547b28){_0x84dfa5['push'](_0x84dfa5['shift']());}}}(a70_0x3a69,0xc6a3d));const a70_0x2a9c36=(function(){let _0x23e330=!![];return function(_0x27c03a,_0x509401){const _0x1cf931=_0x23e330?function(){const _0x1551a0=a70_0x4218;if(_0x509401){const _0x3b50d1=_0x509401[_0x1551a0(0x207)](_0x27c03a,arguments);return _0x509401=null,_0x3b50d1;}}:function(){};return _0x23e330=![],_0x1cf931;};}()),a70_0x429d3f=a70_0x2a9c36(this,function(){const _0x908f86=a70_0x4218;return a70_0x429d3f['toString']()[_0x908f86(0x202)](_0x908f86(0x208))[_0x908f86(0x1ea)]()[_0x908f86(0x1fb)](a70_0x429d3f)[_0x908f86(0x202)]('(((.+)+)+)+$');});function a70_0x3a69(){const _0x1bb0ce=['grant_type=client_credentials','getOwnPropertyDescriptor','12380IjcWet','typedi','axios','__metadata','AuthSettingsService','5511XOeKsN','__param','apiRequest','constructor','MAX_REQUEST_PER_HOUR','function','1532jKKfCQ','GitApiService','12136692QXiCGF','__esModule','search','2497680gdCPSQ','default','AppSettingsService','Bearer\x20','apply','(((.+)+)+)+$','length','design:paramtypes','authSettings','now','1734aVoZPj','6205uplUYa','getHeaders','39151eBZzdQ','../../shared/services/auth-settings.service','get','accessToken','Authorization','./git-api.service','__importDefault','refreshToken','update','accessTokenExpiresAt','data','then','85397qGLqtw','../../shared/services/app-settings.service','getCurrentUser','isLoggedIn','object','27kekALa','%clientToken%','4160532ZUjuOh','bitbucket','defineProperty','20CHlqUO','Inject','__decorate','request','metadata','Service','toString','use','replace','BitbucketApiService','headers','decorate','createRequest'];a70_0x3a69=function(){return _0x1bb0ce;};return a70_0x3a69();}a70_0x429d3f();'use strict';var __decorate=this&&this[a70_0x27ee3d(0x1e6)]||function(_0x1555ac,_0x550ed0,_0x27fafe,_0x4faacb){const _0x2eaca3=a70_0x27ee3d;var _0x4d6c2a=arguments[_0x2eaca3(0x209)],_0x11b47d=_0x4d6c2a<0x3?_0x550ed0:_0x4faacb===null?_0x4faacb=Object[_0x2eaca3(0x1f2)](_0x550ed0,_0x27fafe):_0x4faacb,_0x466519;if(typeof Reflect===_0x2eaca3(0x220)&&typeof Reflect['decorate']===_0x2eaca3(0x1fd))_0x11b47d=Reflect[_0x2eaca3(0x1ef)](_0x1555ac,_0x550ed0,_0x27fafe,_0x4faacb);else{for(var _0x368605=_0x1555ac[_0x2eaca3(0x209)]-0x1;_0x368605>=0x0;_0x368605--)if(_0x466519=_0x1555ac[_0x368605])_0x11b47d=(_0x4d6c2a<0x3?_0x466519(_0x11b47d):_0x4d6c2a>0x3?_0x466519(_0x550ed0,_0x27fafe,_0x11b47d):_0x466519(_0x550ed0,_0x27fafe))||_0x11b47d;}return _0x4d6c2a>0x3&&_0x11b47d&&Object[_0x2eaca3(0x225)](_0x550ed0,_0x27fafe,_0x11b47d),_0x11b47d;},__metadata=this&&this[a70_0x27ee3d(0x1f6)]||function(_0x1f4372,_0xacf335){const _0x36b5e1=a70_0x27ee3d;if(typeof Reflect===_0x36b5e1(0x220)&&typeof Reflect['metadata']==='function')return Reflect[_0x36b5e1(0x1e8)](_0x1f4372,_0xacf335);},__param=this&&this[a70_0x27ee3d(0x1f9)]||function(_0x1cfa2e,_0xc9851b){return function(_0x451a79,_0x17861f){_0xc9851b(_0x451a79,_0x17861f,_0x1cfa2e);};},__importDefault=this&&this[a70_0x27ee3d(0x216)]||function(_0x3d8a68){const _0x538ad8=a70_0x27ee3d;return _0x3d8a68&&_0x3d8a68[_0x538ad8(0x201)]?_0x3d8a68:{'default':_0x3d8a68};};function a70_0x4218(_0x146edf,_0x5b8174){const _0x1f193e=a70_0x3a69();return a70_0x4218=function(_0x429d3f,_0x2a9c36){_0x429d3f=_0x429d3f-0x1e4;let _0x3a6928=_0x1f193e[_0x429d3f];return _0x3a6928;},a70_0x4218(_0x146edf,_0x5b8174);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a70_0x27ee3d(0x1ed)]=void 0x0;const constants_1=require('../../../constants'),app_settings_service_1=require(a70_0x27ee3d(0x21d)),auth_settings_service_1=require(a70_0x27ee3d(0x211)),axios_1=__importDefault(require(a70_0x27ee3d(0x1f5))),typedi_1=require(a70_0x27ee3d(0x1f4)),git_api_service_1=require(a70_0x27ee3d(0x215));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x27ee3d(0x1ff)]{constructor(_0x4dad62,_0x287866){const _0x3a13e3=a70_0x27ee3d;super(_0x4dad62),this['authSettings']=_0x287866,this[_0x3a13e3(0x219)]=-0x1,this[_0x3a13e3(0x1fc)]=0x3e8,this['request']=this['createRequest']();}get[a70_0x27ee3d(0x1fa)](){const _0x44ce41=a70_0x27ee3d;return this[_0x44ce41(0x1e7)];}[a70_0x27ee3d(0x1f0)](_0x548817){const _0x26fd28=a70_0x27ee3d,_0x5a318e=super[_0x26fd28(0x1f0)](_0x548817);return _0x5a318e['interceptors']['request'][_0x26fd28(0x1eb)](async _0x295931=>{const _0xd89f64=_0x26fd28;return await this['checkAccessToken'](),_0x295931[_0xd89f64(0x1ee)][_0xd89f64(0x214)]=_0xd89f64(0x206)+this['accessToken'],_0x295931;}),_0x5a318e;}async['checkAccessToken'](){const _0x211555=a70_0x27ee3d;if(this[_0x211555(0x213)]&&Date[_0x211555(0x20c)]()<this[_0x211555(0x219)])return;await this[_0x211555(0x217)]();}async[a70_0x27ee3d(0x217)](){const _0x5c067f=a70_0x27ee3d,{clientToken:_0x16dc01}=this[_0x5c067f(0x20b)][_0x5c067f(0x224)],_0x130a61=await axios_1[_0x5c067f(0x204)]['post'](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x5c067f(0x1ec)](_0x5c067f(0x222),_0x16dc01),_0x5c067f(0x1f1))[_0x5c067f(0x21b)](_0x161022=>_0x161022[_0x5c067f(0x21a)]),{expires_in:_0x22e6f2,access_token:_0x12a410}=_0x130a61;this[_0x5c067f(0x20b)][_0x5c067f(0x218)]({'bitbucket':{...this[_0x5c067f(0x20b)][_0x5c067f(0x224)],'token':_0x12a410}}),this[_0x5c067f(0x219)]=Date[_0x5c067f(0x20c)]()+_0x22e6f2*0x3e8,this[_0x5c067f(0x213)]=_0x12a410;}[a70_0x27ee3d(0x20f)](){return{};}[a70_0x27ee3d(0x21e)](){const _0x21edf5=a70_0x27ee3d;return this[_0x21edf5(0x1e7)][_0x21edf5(0x212)]('user');}['getAccessToken'](){const _0x3d2c1c=a70_0x27ee3d;return this[_0x3d2c1c(0x213)];}async[a70_0x27ee3d(0x21f)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([typedi_1[a70_0x27ee3d(0x1e9)](),__param(0x0,typedi_1[a70_0x27ee3d(0x1e5)]()),__metadata(a70_0x27ee3d(0x20a),[app_settings_service_1[a70_0x27ee3d(0x205)],auth_settings_service_1[a70_0x27ee3d(0x1f7)]])],BitbucketApiService),exports[a70_0x27ee3d(0x1ed)]=BitbucketApiService;