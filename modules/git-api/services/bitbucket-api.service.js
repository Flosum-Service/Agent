const a70_0x18d1ae=a70_0x46ab;(function(_0x1dd296,_0x22597f){const _0x3cf64f=a70_0x46ab,_0x52f43b=_0x1dd296();while(!![]){try{const _0xa52ab7=parseInt(_0x3cf64f(0x174))/0x1+-parseInt(_0x3cf64f(0x17a))/0x2+-parseInt(_0x3cf64f(0x16d))/0x3+parseInt(_0x3cf64f(0x186))/0x4*(-parseInt(_0x3cf64f(0x160))/0x5)+-parseInt(_0x3cf64f(0x17e))/0x6*(parseInt(_0x3cf64f(0x155))/0x7)+parseInt(_0x3cf64f(0x166))/0x8*(parseInt(_0x3cf64f(0x161))/0x9)+-parseInt(_0x3cf64f(0x18b))/0xa*(-parseInt(_0x3cf64f(0x153))/0xb);if(_0xa52ab7===_0x22597f)break;else _0x52f43b['push'](_0x52f43b['shift']());}catch(_0x1483f4){_0x52f43b['push'](_0x52f43b['shift']());}}}(a70_0x1283,0x20e75));const a70_0x94fc=(function(){let _0x5562ff=!![];return function(_0x36caa7,_0x1e4766){const _0x510bfe=_0x5562ff?function(){if(_0x1e4766){const _0x110a9e=_0x1e4766['apply'](_0x36caa7,arguments);return _0x1e4766=null,_0x110a9e;}}:function(){};return _0x5562ff=![],_0x510bfe;};}()),a70_0x29c195=a70_0x94fc(this,function(){const _0x1a0582=a70_0x46ab;return a70_0x29c195['toString']()[_0x1a0582(0x169)](_0x1a0582(0x184))[_0x1a0582(0x18a)]()[_0x1a0582(0x17c)](a70_0x29c195)[_0x1a0582(0x169)](_0x1a0582(0x184));});a70_0x29c195();function a70_0x1283(){const _0x2aadb7=['update','typedi','checkAccessToken','./git-api.service','236361qHRwjY','now','getHeaders','GitApiService','refreshToken','../../shared/services/app-settings.service','419744DkVmaH','metadata','constructor','Authorization','136602XXhMvU','object','use','getOwnPropertyDescriptor','AuthSettingsService','replace','(((.+)+)+)+$','authSettings','20zjiaUp','__esModule','request','bitbucket','toString','610JcwUkM','post','length','getAccessToken','decorate','BitbucketApiService','50314wcwszC','defineProperty','21CNDYim','grant_type=client_credentials','getCurrentUser','../../../constants','data','interceptors','AppSettingsService','__importDefault','accessToken','apiRequest','createRequest','219415kdzaGT','34470iLuDhb','%clientToken%','__decorate','isLoggedIn','headers','544EyZizs','accessTokenExpiresAt','then','search','get','../../shared/services/auth-settings.service','design:paramtypes','430362DRUwDE','default','user'];a70_0x1283=function(){return _0x2aadb7;};return a70_0x1283();}'use strict';var __decorate=this&&this[a70_0x18d1ae(0x163)]||function(_0x55906e,_0x193e93,_0x854b4e,_0x44b579){const _0x1ad0ea=a70_0x18d1ae;var _0x114b8d=arguments[_0x1ad0ea(0x14f)],_0x380860=_0x114b8d<0x3?_0x193e93:_0x44b579===null?_0x44b579=Object[_0x1ad0ea(0x181)](_0x193e93,_0x854b4e):_0x44b579,_0x58f131;if(typeof Reflect===_0x1ad0ea(0x17f)&&typeof Reflect[_0x1ad0ea(0x151)]==='function')_0x380860=Reflect[_0x1ad0ea(0x151)](_0x55906e,_0x193e93,_0x854b4e,_0x44b579);else{for(var _0x5866d9=_0x55906e[_0x1ad0ea(0x14f)]-0x1;_0x5866d9>=0x0;_0x5866d9--)if(_0x58f131=_0x55906e[_0x5866d9])_0x380860=(_0x114b8d<0x3?_0x58f131(_0x380860):_0x114b8d>0x3?_0x58f131(_0x193e93,_0x854b4e,_0x380860):_0x58f131(_0x193e93,_0x854b4e))||_0x380860;}return _0x114b8d>0x3&&_0x380860&&Object[_0x1ad0ea(0x154)](_0x193e93,_0x854b4e,_0x380860),_0x380860;},__metadata=this&&this['__metadata']||function(_0x4710bf,_0x1fa232){const _0x149cbe=a70_0x18d1ae;if(typeof Reflect==='object'&&typeof Reflect[_0x149cbe(0x17b)]==='function')return Reflect[_0x149cbe(0x17b)](_0x4710bf,_0x1fa232);},__param=this&&this['__param']||function(_0x58fe91,_0x3f84f4){return function(_0x517315,_0x527d5e){_0x3f84f4(_0x517315,_0x527d5e,_0x58fe91);};},__importDefault=this&&this[a70_0x18d1ae(0x15c)]||function(_0x36c366){const _0x4768a0=a70_0x18d1ae;return _0x36c366&&_0x36c366[_0x4768a0(0x187)]?_0x36c366:{'default':_0x36c366};};Object[a70_0x18d1ae(0x154)](exports,a70_0x18d1ae(0x187),{'value':!![]}),exports[a70_0x18d1ae(0x152)]=void 0x0;const constants_1=require(a70_0x18d1ae(0x158)),app_settings_service_1=require(a70_0x18d1ae(0x179)),auth_settings_service_1=require(a70_0x18d1ae(0x16b)),axios_1=__importDefault(require('axios')),typedi_1=require(a70_0x18d1ae(0x171)),git_api_service_1=require(a70_0x18d1ae(0x173));function a70_0x46ab(_0x162286,_0xa67df7){const _0x174bf8=a70_0x1283();return a70_0x46ab=function(_0x29c195,_0x94fc){_0x29c195=_0x29c195-0x14f;let _0x1283c7=_0x174bf8[_0x29c195];return _0x1283c7;},a70_0x46ab(_0x162286,_0xa67df7);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x18d1ae(0x177)]{constructor(_0x57527c,_0x2987c6){const _0x2e4022=a70_0x18d1ae;super(_0x57527c),this[_0x2e4022(0x185)]=_0x2987c6,this['accessTokenExpiresAt']=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8,this[_0x2e4022(0x188)]=this[_0x2e4022(0x15f)]();}get[a70_0x18d1ae(0x15e)](){const _0x413efa=a70_0x18d1ae;return this[_0x413efa(0x188)];}[a70_0x18d1ae(0x15f)](_0x25d752){const _0x5d4692=a70_0x18d1ae,_0x3e62f6=super[_0x5d4692(0x15f)](_0x25d752);return _0x3e62f6[_0x5d4692(0x15a)][_0x5d4692(0x188)][_0x5d4692(0x180)](async _0x3ef643=>{const _0x284442=_0x5d4692;return await this[_0x284442(0x172)](),_0x3ef643[_0x284442(0x165)][_0x284442(0x17d)]='Bearer\x20'+this['accessToken'],_0x3ef643;}),_0x3e62f6;}async[a70_0x18d1ae(0x172)](){const _0x5ea61d=a70_0x18d1ae;if(this[_0x5ea61d(0x15d)]&&Date[_0x5ea61d(0x175)]()<this['accessTokenExpiresAt'])return;await this[_0x5ea61d(0x178)]();}async[a70_0x18d1ae(0x178)](){const _0x43faca=a70_0x18d1ae,{clientToken:_0xc7592b}=this[_0x43faca(0x185)][_0x43faca(0x189)],_0x553271=await axios_1[_0x43faca(0x16e)][_0x43faca(0x18c)](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x43faca(0x183)](_0x43faca(0x162),_0xc7592b),_0x43faca(0x156))[_0x43faca(0x168)](_0x1c3b88=>_0x1c3b88[_0x43faca(0x159)]),{expires_in:_0x280af2,access_token:_0x51bd9e}=_0x553271;this[_0x43faca(0x185)][_0x43faca(0x170)]({'bitbucket':{...this['authSettings'][_0x43faca(0x189)],'token':_0x51bd9e}}),this[_0x43faca(0x167)]=Date[_0x43faca(0x175)]()+_0x280af2*0x3e8,this[_0x43faca(0x15d)]=_0x51bd9e;}[a70_0x18d1ae(0x176)](){return{};}[a70_0x18d1ae(0x157)](){const _0x211ad1=a70_0x18d1ae;return this[_0x211ad1(0x188)][_0x211ad1(0x16a)](_0x211ad1(0x16f));}[a70_0x18d1ae(0x150)](){const _0x38185f=a70_0x18d1ae;return this[_0x38185f(0x15d)];}async[a70_0x18d1ae(0x164)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1['Inject']()),__metadata(a70_0x18d1ae(0x16c),[app_settings_service_1[a70_0x18d1ae(0x15b)],auth_settings_service_1[a70_0x18d1ae(0x182)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;