const a70_0xf8dbd9=a70_0x2513;(function(_0x3a7184,_0x54592b){const _0xc620aa=a70_0x2513,_0x1a99c8=_0x3a7184();while(!![]){try{const _0x368fa9=-parseInt(_0xc620aa(0x193))/0x1+parseInt(_0xc620aa(0x1b3))/0x2*(-parseInt(_0xc620aa(0x184))/0x3)+-parseInt(_0xc620aa(0x1b4))/0x4+-parseInt(_0xc620aa(0x1a2))/0x5+parseInt(_0xc620aa(0x181))/0x6+-parseInt(_0xc620aa(0x1b8))/0x7+parseInt(_0xc620aa(0x18b))/0x8*(parseInt(_0xc620aa(0x190))/0x9);if(_0x368fa9===_0x54592b)break;else _0x1a99c8['push'](_0x1a99c8['shift']());}catch(_0x251bff){_0x1a99c8['push'](_0x1a99c8['shift']());}}}(a70_0x3763,0x45b18));function a70_0x2513(_0x5bc988,_0x89d4eb){const _0x9da790=a70_0x3763();return a70_0x2513=function(_0x342146,_0x1c3cd3){_0x342146=_0x342146-0x181;let _0x376351=_0x9da790[_0x342146];return _0x376351;},a70_0x2513(_0x5bc988,_0x89d4eb);}const a70_0x1c3cd3=(function(){let _0x1c48db=!![];return function(_0x396876,_0x426cf7){const _0x4916b9=_0x1c48db?function(){const _0x476201=a70_0x2513;if(_0x426cf7){const _0x5555db=_0x426cf7[_0x476201(0x1b1)](_0x396876,arguments);return _0x426cf7=null,_0x5555db;}}:function(){};return _0x1c48db=![],_0x4916b9;};}()),a70_0x342146=a70_0x1c3cd3(this,function(){const _0x1cbfcc=a70_0x2513;return a70_0x342146['toString']()[_0x1cbfcc(0x19f)](_0x1cbfcc(0x1ab))['toString']()['constructor'](a70_0x342146)[_0x1cbfcc(0x19f)](_0x1cbfcc(0x1ab));});a70_0x342146();'use strict';function a70_0x3763(){const _0x2ab169=['484840ikepnS','metadata','AppSettingsService','apiRequest','replace','update','default','%clientToken%','__esModule','(((.+)+)+)+$','BitbucketApiService','GitApiService','request','refreshToken','Service','apply','createRequest','251092WBeXmr','116340mqeVDT','function','length','./git-api.service','255850mwJiYS','accessToken','2617050wUjSuq','getHeaders','__importDefault','12oOvVFv','interceptors','now','../../shared/services/app-settings.service','isLoggedIn','AuthSettingsService','get','88gKOQQJ','Authorization','object','then','getOwnPropertyDescriptor','861777LcHJoZ','Bearer\x20','data','539207OnJxYN','authSettings','bitbucket','__decorate','../../../constants','decorate','Inject','defineProperty','getCurrentUser','use','checkAccessToken','BITBUCKET_REFRESH_TOKEN_URL','search','getAccessToken','accessTokenExpiresAt'];a70_0x3763=function(){return _0x2ab169;};return a70_0x3763();}var __decorate=this&&this[a70_0xf8dbd9(0x196)]||function(_0x2d7a64,_0x545465,_0x19b510,_0x257f53){const _0x32eaf0=a70_0xf8dbd9;var _0x3d5729=arguments[_0x32eaf0(0x1b6)],_0x4002ef=_0x3d5729<0x3?_0x545465:_0x257f53===null?_0x257f53=Object[_0x32eaf0(0x18f)](_0x545465,_0x19b510):_0x257f53,_0xe7638c;if(typeof Reflect==='object'&&typeof Reflect[_0x32eaf0(0x198)]===_0x32eaf0(0x1b5))_0x4002ef=Reflect['decorate'](_0x2d7a64,_0x545465,_0x19b510,_0x257f53);else{for(var _0x32cbf4=_0x2d7a64['length']-0x1;_0x32cbf4>=0x0;_0x32cbf4--)if(_0xe7638c=_0x2d7a64[_0x32cbf4])_0x4002ef=(_0x3d5729<0x3?_0xe7638c(_0x4002ef):_0x3d5729>0x3?_0xe7638c(_0x545465,_0x19b510,_0x4002ef):_0xe7638c(_0x545465,_0x19b510))||_0x4002ef;}return _0x3d5729>0x3&&_0x4002ef&&Object[_0x32eaf0(0x19a)](_0x545465,_0x19b510,_0x4002ef),_0x4002ef;},__metadata=this&&this['__metadata']||function(_0x3388ce,_0x2383bd){const _0x3e4fa7=a70_0xf8dbd9;if(typeof Reflect===_0x3e4fa7(0x18d)&&typeof Reflect[_0x3e4fa7(0x1a3)]==='function')return Reflect[_0x3e4fa7(0x1a3)](_0x3388ce,_0x2383bd);},__param=this&&this['__param']||function(_0x2b43c5,_0x2a87e0){return function(_0x44aeee,_0x5c990a){_0x2a87e0(_0x44aeee,_0x5c990a,_0x2b43c5);};},__importDefault=this&&this[a70_0xf8dbd9(0x183)]||function(_0xca7fbc){const _0x50e98c=a70_0xf8dbd9;return _0xca7fbc&&_0xca7fbc[_0x50e98c(0x1aa)]?_0xca7fbc:{'default':_0xca7fbc};};Object[a70_0xf8dbd9(0x19a)](exports,a70_0xf8dbd9(0x1aa),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const constants_1=require(a70_0xf8dbd9(0x197)),app_settings_service_1=require(a70_0xf8dbd9(0x187)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require('axios')),typedi_1=require('typedi'),git_api_service_1=require(a70_0xf8dbd9(0x1b7));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0xf8dbd9(0x1ad)]{constructor(_0xb62c6,_0x8aab7a){const _0x465ce3=a70_0xf8dbd9;super(_0xb62c6),this['authSettings']=_0x8aab7a,this['accessTokenExpiresAt']=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8,this['request']=this[_0x465ce3(0x1b2)]();}get[a70_0xf8dbd9(0x1a5)](){const _0x26a827=a70_0xf8dbd9;return this[_0x26a827(0x1ae)];}[a70_0xf8dbd9(0x1b2)](_0x16abd4){const _0x4e0e0a=a70_0xf8dbd9,_0xc9be7b=super[_0x4e0e0a(0x1b2)](_0x16abd4);return _0xc9be7b[_0x4e0e0a(0x185)][_0x4e0e0a(0x1ae)][_0x4e0e0a(0x19c)](async _0x57bf2e=>{const _0x710783=_0x4e0e0a;return await this[_0x710783(0x19d)](),_0x57bf2e['headers'][_0x710783(0x18c)]=_0x710783(0x191)+this[_0x710783(0x1b9)],_0x57bf2e;}),_0xc9be7b;}async[a70_0xf8dbd9(0x19d)](){const _0x22665f=a70_0xf8dbd9;if(this[_0x22665f(0x1b9)]&&Date[_0x22665f(0x186)]()<this[_0x22665f(0x1a1)])return;await this['refreshToken']();}async[a70_0xf8dbd9(0x1af)](){const _0x1a6783=a70_0xf8dbd9,{clientToken:_0x5044c7}=this[_0x1a6783(0x194)][_0x1a6783(0x195)],_0x10d5ca=await axios_1[_0x1a6783(0x1a8)]['post'](constants_1[_0x1a6783(0x19e)][_0x1a6783(0x1a6)](_0x1a6783(0x1a9),_0x5044c7),'grant_type=client_credentials')[_0x1a6783(0x18e)](_0x408c0d=>_0x408c0d[_0x1a6783(0x192)]),{expires_in:_0x946244,access_token:_0x59da60}=_0x10d5ca;this['authSettings'][_0x1a6783(0x1a7)]({'bitbucket':{...this[_0x1a6783(0x194)][_0x1a6783(0x195)],'token':_0x59da60}}),this['accessTokenExpiresAt']=Date['now']()+_0x946244*0x3e8,this[_0x1a6783(0x1b9)]=_0x59da60;}[a70_0xf8dbd9(0x182)](){return{};}[a70_0xf8dbd9(0x19b)](){const _0x25e398=a70_0xf8dbd9;return this[_0x25e398(0x1ae)][_0x25e398(0x18a)]('user');}[a70_0xf8dbd9(0x1a0)](){return this['accessToken'];}async[a70_0xf8dbd9(0x188)](){const _0x5a4a4f=a70_0xf8dbd9;return await this[_0x5a4a4f(0x19b)](),!![];}};BitbucketApiService=__decorate([typedi_1[a70_0xf8dbd9(0x1b0)](),__param(0x0,typedi_1[a70_0xf8dbd9(0x199)]()),__metadata('design:paramtypes',[app_settings_service_1[a70_0xf8dbd9(0x1a4)],auth_settings_service_1[a70_0xf8dbd9(0x189)]])],BitbucketApiService),exports[a70_0xf8dbd9(0x1ac)]=BitbucketApiService;