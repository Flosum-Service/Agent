const a70_0x2831dd=a70_0x2b99;(function(_0x383488,_0x21fc1b){const _0x471adf=a70_0x2b99,_0x11badc=_0x383488();while(!![]){try{const _0x1161ac=-parseInt(_0x471adf(0x146))/0x1*(-parseInt(_0x471adf(0x112))/0x2)+parseInt(_0x471adf(0x123))/0x3*(-parseInt(_0x471adf(0x132))/0x4)+-parseInt(_0x471adf(0x142))/0x5+parseInt(_0x471adf(0x115))/0x6+parseInt(_0x471adf(0x117))/0x7*(-parseInt(_0x471adf(0x12a))/0x8)+parseInt(_0x471adf(0x116))/0x9+parseInt(_0x471adf(0x144))/0xa*(parseInt(_0x471adf(0x12d))/0xb);if(_0x1161ac===_0x21fc1b)break;else _0x11badc['push'](_0x11badc['shift']());}catch(_0x57ca7e){_0x11badc['push'](_0x11badc['shift']());}}}(a70_0xfdbf,0xc8576));const a70_0x1e3c65=(function(){let _0x39b17e=!![];return function(_0x3f8899,_0x57715b){const _0x53786f=_0x39b17e?function(){const _0x382a12=a70_0x2b99;if(_0x57715b){const _0x58dabe=_0x57715b[_0x382a12(0x13d)](_0x3f8899,arguments);return _0x57715b=null,_0x58dabe;}}:function(){};return _0x39b17e=![],_0x53786f;};}()),a70_0x41ec81=a70_0x1e3c65(this,function(){const _0x1b6465=a70_0x2b99;return a70_0x41ec81[_0x1b6465(0x11a)]()[_0x1b6465(0x133)]('(((.+)+)+)+$')['toString']()['constructor'](a70_0x41ec81)['search']('(((.+)+)+)+$');});a70_0x41ec81();function a70_0xfdbf(){const _0x258ad2=['isLoggedIn','getCurrentUser','Bearer\x20','32uMNHyn','search','accessToken','bitbucket','now','GitApiService','metadata','../../shared/services/auth-settings.service','__importDefault','AppSettingsService','getHeaders','apply','authSettings','accessTokenExpiresAt','BitbucketApiService','apiRequest','6418250YrkcIF','checkAccessToken','150hJmPqV','typedi','353177ervmkn','length','Authorization','2HcseQU','defineProperty','MAX_REQUEST_PER_HOUR','8727858fEUeeu','2359035tKMhXD','136507BmDarP','%clientToken%','update','toString','./git-api.service','BITBUCKET_REFRESH_TOKEN_URL','refreshToken','object','__esModule','AuthSettingsService','function','get','392727eqdxLZ','request','interceptors','default','user','decorate','createRequest','280BwkzHr','__metadata','__param','1293688GdGFTv','data'];a70_0xfdbf=function(){return _0x258ad2;};return a70_0xfdbf();}'use strict';var __decorate=this&&this['__decorate']||function(_0x2cc608,_0x50d531,_0x2458a,_0x2faea0){const _0x5d24ac=a70_0x2b99;var _0x53a5df=arguments[_0x5d24ac(0x147)],_0x2f286e=_0x53a5df<0x3?_0x50d531:_0x2faea0===null?_0x2faea0=Object['getOwnPropertyDescriptor'](_0x50d531,_0x2458a):_0x2faea0,_0x38c902;if(typeof Reflect===_0x5d24ac(0x11e)&&typeof Reflect[_0x5d24ac(0x128)]===_0x5d24ac(0x121))_0x2f286e=Reflect[_0x5d24ac(0x128)](_0x2cc608,_0x50d531,_0x2458a,_0x2faea0);else{for(var _0x393c2f=_0x2cc608['length']-0x1;_0x393c2f>=0x0;_0x393c2f--)if(_0x38c902=_0x2cc608[_0x393c2f])_0x2f286e=(_0x53a5df<0x3?_0x38c902(_0x2f286e):_0x53a5df>0x3?_0x38c902(_0x50d531,_0x2458a,_0x2f286e):_0x38c902(_0x50d531,_0x2458a))||_0x2f286e;}return _0x53a5df>0x3&&_0x2f286e&&Object['defineProperty'](_0x50d531,_0x2458a,_0x2f286e),_0x2f286e;},__metadata=this&&this[a70_0x2831dd(0x12b)]||function(_0x31e6d5,_0x5b5126){const _0x27b86c=a70_0x2831dd;if(typeof Reflect===_0x27b86c(0x11e)&&typeof Reflect[_0x27b86c(0x138)]===_0x27b86c(0x121))return Reflect[_0x27b86c(0x138)](_0x31e6d5,_0x5b5126);},__param=this&&this[a70_0x2831dd(0x12c)]||function(_0x11d5ae,_0x358059){return function(_0x5a6115,_0x462a42){_0x358059(_0x5a6115,_0x462a42,_0x11d5ae);};},__importDefault=this&&this[a70_0x2831dd(0x13a)]||function(_0x393176){return _0x393176&&_0x393176['__esModule']?_0x393176:{'default':_0x393176};};Object[a70_0x2831dd(0x113)](exports,a70_0x2831dd(0x11f),{'value':!![]}),exports['BitbucketApiService']=void 0x0;function a70_0x2b99(_0x50662e,_0x1efee1){const _0x323ed3=a70_0xfdbf();return a70_0x2b99=function(_0x41ec81,_0x1e3c65){_0x41ec81=_0x41ec81-0x112;let _0xfdbffa=_0x323ed3[_0x41ec81];return _0xfdbffa;},a70_0x2b99(_0x50662e,_0x1efee1);}const constants_1=require('../../../constants'),app_settings_service_1=require('../../shared/services/app-settings.service'),auth_settings_service_1=require(a70_0x2831dd(0x139)),axios_1=__importDefault(require('axios')),typedi_1=require(a70_0x2831dd(0x145)),git_api_service_1=require(a70_0x2831dd(0x11b));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x2831dd(0x137)]{constructor(_0xe1c1b8,_0x462513){const _0x530539=a70_0x2831dd;super(_0xe1c1b8),this[_0x530539(0x13e)]=_0x462513,this['accessTokenExpiresAt']=-0x1,this[_0x530539(0x114)]=0x3e8,this['request']=this[_0x530539(0x129)]();}get[a70_0x2831dd(0x141)](){const _0xf2acd5=a70_0x2831dd;return this[_0xf2acd5(0x124)];}[a70_0x2831dd(0x129)](_0x519dfc){const _0x264099=a70_0x2831dd,_0x1b92bc=super[_0x264099(0x129)](_0x519dfc);return _0x1b92bc[_0x264099(0x125)]['request']['use'](async _0x2a92f6=>{const _0x252c35=_0x264099;return await this['checkAccessToken'](),_0x2a92f6['headers'][_0x252c35(0x148)]=_0x252c35(0x131)+this[_0x252c35(0x134)],_0x2a92f6;}),_0x1b92bc;}async[a70_0x2831dd(0x143)](){const _0x5271d4=a70_0x2831dd;if(this[_0x5271d4(0x134)]&&Date[_0x5271d4(0x136)]()<this[_0x5271d4(0x13f)])return;await this[_0x5271d4(0x11d)]();}async[a70_0x2831dd(0x11d)](){const _0x53bc99=a70_0x2831dd,{clientToken:_0x2df893}=this['authSettings'][_0x53bc99(0x135)],_0x33b1b3=await axios_1[_0x53bc99(0x126)]['post'](constants_1[_0x53bc99(0x11c)]['replace'](_0x53bc99(0x118),_0x2df893),'grant_type=client_credentials')['then'](_0x113702=>_0x113702[_0x53bc99(0x12e)]),{expires_in:_0x3f8b71,access_token:_0x42c70a}=_0x33b1b3;this['authSettings'][_0x53bc99(0x119)]({'bitbucket':{...this[_0x53bc99(0x13e)][_0x53bc99(0x135)],'token':_0x42c70a}}),this[_0x53bc99(0x13f)]=Date[_0x53bc99(0x136)]()+_0x3f8b71*0x3e8,this[_0x53bc99(0x134)]=_0x42c70a;}[a70_0x2831dd(0x13c)](){return{};}[a70_0x2831dd(0x130)](){const _0x41cc33=a70_0x2831dd;return this['request'][_0x41cc33(0x122)](_0x41cc33(0x127));}['getAccessToken'](){return this['accessToken'];}async[a70_0x2831dd(0x12f)](){const _0x4b9c5f=a70_0x2831dd;return await this[_0x4b9c5f(0x130)](),!![];}};BitbucketApiService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1['Inject']()),__metadata('design:paramtypes',[app_settings_service_1[a70_0x2831dd(0x13b)],auth_settings_service_1[a70_0x2831dd(0x120)]])],BitbucketApiService),exports[a70_0x2831dd(0x140)]=BitbucketApiService;