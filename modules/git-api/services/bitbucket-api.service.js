const a70_0x32d297=a70_0x111f;function a70_0x289d(){const _0x38b505=['user','use','design:paramtypes','createRequest','10VDkGxH','66440wMGqQn','toString','replace','interceptors','__esModule','Authorization','request','220488FFONhE','./git-api.service','getCurrentUser','update','Inject','decorate','then','accessToken','32268sEGVsx','Bearer\x20','search','getHeaders','default','GitApiService','MAX_REQUEST_PER_HOUR','../../../constants','length','constructor','grant_type=client_credentials','post','get','2616163uDydwU','function','../../shared/services/auth-settings.service','6KqChEj','metadata','authSettings','Service','bitbucket','1133672NwilLF','headers','apply','BITBUCKET_REFRESH_TOKEN_URL','(((.+)+)+)+$','accessTokenExpiresAt','__importDefault','defineProperty','isLoggedIn','apiRequest','14KmJpgS','object','2229957QgepnY','BitbucketApiService','__metadata','8LyNEYv','refreshToken','now','1204165PdtleF'];a70_0x289d=function(){return _0x38b505;};return a70_0x289d();}(function(_0x1c0a07,_0x170d42){const _0x5dd4ba=a70_0x111f,_0x591b93=_0x1c0a07();while(!![]){try{const _0x4d1eed=parseInt(_0x5dd4ba(0x14d))/0x1+-parseInt(_0x5dd4ba(0x146))/0x2+-parseInt(_0x5dd4ba(0x155))/0x3*(-parseInt(_0x5dd4ba(0x13d))/0x4)+parseInt(_0x5dd4ba(0x140))/0x5*(-parseInt(_0x5dd4ba(0x165))/0x6)+-parseInt(_0x5dd4ba(0x174))/0x7*(parseInt(_0x5dd4ba(0x16a))/0x8)+parseInt(_0x5dd4ba(0x13a))/0x9+-parseInt(_0x5dd4ba(0x145))/0xa*(-parseInt(_0x5dd4ba(0x162))/0xb);if(_0x4d1eed===_0x170d42)break;else _0x591b93['push'](_0x591b93['shift']());}catch(_0x300332){_0x591b93['push'](_0x591b93['shift']());}}}(a70_0x289d,0x29897));const a70_0xe6bf78=(function(){let _0x4eed93=!![];return function(_0x4195f3,_0x164fca){const _0x50ca07=_0x4eed93?function(){const _0x5cf4f6=a70_0x111f;if(_0x164fca){const _0x1df5a2=_0x164fca[_0x5cf4f6(0x16c)](_0x4195f3,arguments);return _0x164fca=null,_0x1df5a2;}}:function(){};return _0x4eed93=![],_0x50ca07;};}()),a70_0x4c990c=a70_0xe6bf78(this,function(){const _0x221470=a70_0x111f;return a70_0x4c990c[_0x221470(0x147)]()[_0x221470(0x157)](_0x221470(0x16e))[_0x221470(0x147)]()[_0x221470(0x15e)](a70_0x4c990c)['search'](_0x221470(0x16e));});a70_0x4c990c();'use strict';function a70_0x111f(_0x5052fa,_0x158407){const _0x214642=a70_0x289d();return a70_0x111f=function(_0x4c990c,_0xe6bf78){_0x4c990c=_0x4c990c-0x13a;let _0x289d0e=_0x214642[_0x4c990c];return _0x289d0e;},a70_0x111f(_0x5052fa,_0x158407);}var __decorate=this&&this['__decorate']||function(_0x24a163,_0x4cf7ae,_0x50381d,_0x150ac3){const _0x26ae2a=a70_0x111f;var _0x34dd2b=arguments[_0x26ae2a(0x15d)],_0x5f208f=_0x34dd2b<0x3?_0x4cf7ae:_0x150ac3===null?_0x150ac3=Object['getOwnPropertyDescriptor'](_0x4cf7ae,_0x50381d):_0x150ac3,_0x2c4853;if(typeof Reflect==='object'&&typeof Reflect[_0x26ae2a(0x152)]===_0x26ae2a(0x163))_0x5f208f=Reflect[_0x26ae2a(0x152)](_0x24a163,_0x4cf7ae,_0x50381d,_0x150ac3);else{for(var _0x79c6aa=_0x24a163['length']-0x1;_0x79c6aa>=0x0;_0x79c6aa--)if(_0x2c4853=_0x24a163[_0x79c6aa])_0x5f208f=(_0x34dd2b<0x3?_0x2c4853(_0x5f208f):_0x34dd2b>0x3?_0x2c4853(_0x4cf7ae,_0x50381d,_0x5f208f):_0x2c4853(_0x4cf7ae,_0x50381d))||_0x5f208f;}return _0x34dd2b>0x3&&_0x5f208f&&Object[_0x26ae2a(0x171)](_0x4cf7ae,_0x50381d,_0x5f208f),_0x5f208f;},__metadata=this&&this[a70_0x32d297(0x13c)]||function(_0x5a2a02,_0x18e67a){const _0x1b86e8=a70_0x32d297;if(typeof Reflect===_0x1b86e8(0x175)&&typeof Reflect['metadata']===_0x1b86e8(0x163))return Reflect[_0x1b86e8(0x166)](_0x5a2a02,_0x18e67a);},__param=this&&this['__param']||function(_0x452938,_0x2a3afc){return function(_0x52f67e,_0x28cc41){_0x2a3afc(_0x52f67e,_0x28cc41,_0x452938);};},__importDefault=this&&this[a70_0x32d297(0x170)]||function(_0x3dd3ea){const _0x1c18bb=a70_0x32d297;return _0x3dd3ea&&_0x3dd3ea[_0x1c18bb(0x14a)]?_0x3dd3ea:{'default':_0x3dd3ea};};Object[a70_0x32d297(0x171)](exports,a70_0x32d297(0x14a),{'value':!![]}),exports[a70_0x32d297(0x13b)]=void 0x0;const constants_1=require(a70_0x32d297(0x15c)),app_settings_service_1=require('../../shared/services/app-settings.service'),auth_settings_service_1=require(a70_0x32d297(0x164)),axios_1=__importDefault(require('axios')),typedi_1=require('typedi'),git_api_service_1=require(a70_0x32d297(0x14e));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x32d297(0x15a)]{constructor(_0x1ab7ad,_0x2157e3){const _0x55dc1f=a70_0x32d297;super(_0x1ab7ad),this[_0x55dc1f(0x167)]=_0x2157e3,this[_0x55dc1f(0x16f)]=-0x1,this[_0x55dc1f(0x15b)]=0x3e8,this['request']=this[_0x55dc1f(0x144)]();}get[a70_0x32d297(0x173)](){return this['request'];}[a70_0x32d297(0x144)](_0x54d761){const _0x14d3ad=a70_0x32d297,_0x11747e=super[_0x14d3ad(0x144)](_0x54d761);return _0x11747e[_0x14d3ad(0x149)][_0x14d3ad(0x14c)][_0x14d3ad(0x142)](async _0x37d395=>{const _0x330543=_0x14d3ad;return await this['checkAccessToken'](),_0x37d395[_0x330543(0x16b)][_0x330543(0x14b)]=_0x330543(0x156)+this[_0x330543(0x154)],_0x37d395;}),_0x11747e;}async['checkAccessToken'](){const _0x581c10=a70_0x32d297;if(this[_0x581c10(0x154)]&&Date['now']()<this[_0x581c10(0x16f)])return;await this[_0x581c10(0x13e)]();}async[a70_0x32d297(0x13e)](){const _0x1d1a27=a70_0x32d297,{clientToken:_0x3ab5ec}=this['authSettings'][_0x1d1a27(0x169)],_0x400fdb=await axios_1[_0x1d1a27(0x159)][_0x1d1a27(0x160)](constants_1[_0x1d1a27(0x16d)][_0x1d1a27(0x148)]('%clientToken%',_0x3ab5ec),_0x1d1a27(0x15f))[_0x1d1a27(0x153)](_0xafcdf4=>_0xafcdf4['data']),{expires_in:_0x4a3a9a,access_token:_0x51f448}=_0x400fdb;this[_0x1d1a27(0x167)][_0x1d1a27(0x150)]({'bitbucket':{...this[_0x1d1a27(0x167)][_0x1d1a27(0x169)],'token':_0x51f448}}),this[_0x1d1a27(0x16f)]=Date[_0x1d1a27(0x13f)]()+_0x4a3a9a*0x3e8,this[_0x1d1a27(0x154)]=_0x51f448;}[a70_0x32d297(0x158)](){return{};}[a70_0x32d297(0x14f)](){const _0x5b303a=a70_0x32d297;return this[_0x5b303a(0x14c)][_0x5b303a(0x161)](_0x5b303a(0x141));}['getAccessToken'](){const _0x52001b=a70_0x32d297;return this[_0x52001b(0x154)];}async[a70_0x32d297(0x172)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([typedi_1[a70_0x32d297(0x168)](),__param(0x0,typedi_1[a70_0x32d297(0x151)]()),__metadata(a70_0x32d297(0x143),[app_settings_service_1['AppSettingsService'],auth_settings_service_1['AuthSettingsService']])],BitbucketApiService),exports[a70_0x32d297(0x13b)]=BitbucketApiService;