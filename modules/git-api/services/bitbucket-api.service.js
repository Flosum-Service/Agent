const a69_0x420c10=a69_0x493c;function a69_0x13ed(){const _0x45b646=['interceptors','use','../../shared/services/app-settings.service','getOwnPropertyDescriptor','16WPamrC','request','AppSettingsService','__esModule','BitbucketApiService','post','object','accessToken','update','decorate','typedi','default','./git-api.service','search','Inject','authSettings','155925VboYFk','grant_type=client_credentials','getHeaders','../../../constants','__param','%clientToken%','__decorate','defineProperty','now','toString','1345779HOpPuh','length','__metadata','metadata','AuthSettingsService','axios','Service','getCurrentUser','43006210rlhmeM','createRequest','GitApiService','accessTokenExpiresAt','isLoggedIn','function','540171yUNhPU','replace','(((.+)+)+)+$','data','checkAccessToken','MAX_REQUEST_PER_HOUR','426EKZwJt','bitbucket','618323bpqBQd','11ecBjlg','constructor','BITBUCKET_REFRESH_TOKEN_URL','6326156EoVQZY','user','6PmQXqb','8311130gxLrty','../../shared/services/auth-settings.service','apply'];a69_0x13ed=function(){return _0x45b646;};return a69_0x13ed();}(function(_0x569585,_0x2c9d24){const _0x29f0a3=a69_0x493c,_0x1d5ef1=_0x569585();while(!![]){try{const _0x418282=parseInt(_0x29f0a3(0x18e))/0x1+parseInt(_0x29f0a3(0x194))/0x2*(-parseInt(_0x29f0a3(0x186))/0x3)+parseInt(_0x29f0a3(0x192))/0x4+parseInt(_0x29f0a3(0x195))/0x5+parseInt(_0x29f0a3(0x18c))/0x6*(parseInt(_0x29f0a3(0x1ac))/0x7)+parseInt(_0x29f0a3(0x19c))/0x8*(parseInt(_0x29f0a3(0x1b6))/0x9)+parseInt(_0x29f0a3(0x180))/0xa*(-parseInt(_0x29f0a3(0x18f))/0xb);if(_0x418282===_0x2c9d24)break;else _0x1d5ef1['push'](_0x1d5ef1['shift']());}catch(_0x3fb6a0){_0x1d5ef1['push'](_0x1d5ef1['shift']());}}}(a69_0x13ed,0xdc2fb));function a69_0x493c(_0x217026,_0x31b817){const _0x5df8b9=a69_0x13ed();return a69_0x493c=function(_0x3aa340,_0x1d2829){_0x3aa340=_0x3aa340-0x17f;let _0x13edae=_0x5df8b9[_0x3aa340];return _0x13edae;},a69_0x493c(_0x217026,_0x31b817);}const a69_0x1d2829=(function(){let _0x1293d8=!![];return function(_0x4885a2,_0x2f5fb0){const _0x382c59=_0x1293d8?function(){const _0x12c676=a69_0x493c;if(_0x2f5fb0){const _0x2452f9=_0x2f5fb0[_0x12c676(0x197)](_0x4885a2,arguments);return _0x2f5fb0=null,_0x2452f9;}}:function(){};return _0x1293d8=![],_0x382c59;};}()),a69_0x3aa340=a69_0x1d2829(this,function(){const _0x1145b5=a69_0x493c;return a69_0x3aa340[_0x1145b5(0x1b5)]()[_0x1145b5(0x1a9)](_0x1145b5(0x188))[_0x1145b5(0x1b5)]()[_0x1145b5(0x190)](a69_0x3aa340)['search'](_0x1145b5(0x188));});a69_0x3aa340();'use strict';var __decorate=this&&this[a69_0x420c10(0x1b2)]||function(_0x5c22d9,_0x2f2e1c,_0x137b15,_0xd3b56){const _0x508dc9=a69_0x420c10;var _0x5c7850=arguments[_0x508dc9(0x1b7)],_0x2729d9=_0x5c7850<0x3?_0x2f2e1c:_0xd3b56===null?_0xd3b56=Object[_0x508dc9(0x19b)](_0x2f2e1c,_0x137b15):_0xd3b56,_0x5b459c;if(typeof Reflect===_0x508dc9(0x1a2)&&typeof Reflect[_0x508dc9(0x1a5)]==='function')_0x2729d9=Reflect[_0x508dc9(0x1a5)](_0x5c22d9,_0x2f2e1c,_0x137b15,_0xd3b56);else{for(var _0x62d1b1=_0x5c22d9[_0x508dc9(0x1b7)]-0x1;_0x62d1b1>=0x0;_0x62d1b1--)if(_0x5b459c=_0x5c22d9[_0x62d1b1])_0x2729d9=(_0x5c7850<0x3?_0x5b459c(_0x2729d9):_0x5c7850>0x3?_0x5b459c(_0x2f2e1c,_0x137b15,_0x2729d9):_0x5b459c(_0x2f2e1c,_0x137b15))||_0x2729d9;}return _0x5c7850>0x3&&_0x2729d9&&Object['defineProperty'](_0x2f2e1c,_0x137b15,_0x2729d9),_0x2729d9;},__metadata=this&&this[a69_0x420c10(0x1b8)]||function(_0x4c1e46,_0x45ef6a){const _0x2f6593=a69_0x420c10;if(typeof Reflect===_0x2f6593(0x1a2)&&typeof Reflect['metadata']===_0x2f6593(0x185))return Reflect[_0x2f6593(0x1b9)](_0x4c1e46,_0x45ef6a);},__param=this&&this[a69_0x420c10(0x1b0)]||function(_0x3af0a0,_0x394a67){return function(_0x518918,_0x5729ff){_0x394a67(_0x518918,_0x5729ff,_0x3af0a0);};},__importDefault=this&&this['__importDefault']||function(_0x33e8f6){const _0x2b0f22=a69_0x420c10;return _0x33e8f6&&_0x33e8f6[_0x2b0f22(0x19f)]?_0x33e8f6:{'default':_0x33e8f6};};Object[a69_0x420c10(0x1b3)](exports,a69_0x420c10(0x19f),{'value':!![]}),exports[a69_0x420c10(0x1a0)]=void 0x0;const constants_1=require(a69_0x420c10(0x1af)),app_settings_service_1=require(a69_0x420c10(0x19a)),auth_settings_service_1=require(a69_0x420c10(0x196)),axios_1=__importDefault(require(a69_0x420c10(0x1bb))),typedi_1=require(a69_0x420c10(0x1a6)),git_api_service_1=require(a69_0x420c10(0x1a8));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a69_0x420c10(0x182)]{constructor(_0x40f736,_0x20a07f){const _0x46c2a6=a69_0x420c10;super(_0x40f736),this[_0x46c2a6(0x1ab)]=_0x20a07f,this['accessTokenExpiresAt']=-0x1,this[_0x46c2a6(0x18b)]=0x3e8,this['request']=this[_0x46c2a6(0x181)]();}get['apiRequest'](){const _0x44fb09=a69_0x420c10;return this[_0x44fb09(0x19d)];}[a69_0x420c10(0x181)](_0x308784){const _0x3bb4ab=a69_0x420c10,_0x5463f0=super['createRequest'](_0x308784);return _0x5463f0[_0x3bb4ab(0x198)][_0x3bb4ab(0x19d)][_0x3bb4ab(0x199)](async _0x352f97=>{const _0x47b1b6=_0x3bb4ab;return await this['checkAccessToken'](),_0x352f97['headers']['Authorization']='Bearer\x20'+this[_0x47b1b6(0x1a3)],_0x352f97;}),_0x5463f0;}async[a69_0x420c10(0x18a)](){const _0x36f55b=a69_0x420c10;if(this[_0x36f55b(0x1a3)]&&Date[_0x36f55b(0x1b4)]()<this[_0x36f55b(0x183)])return;await this['refreshToken']();}async['refreshToken'](){const _0x379f42=a69_0x420c10,{clientToken:_0x534eb4}=this[_0x379f42(0x1ab)][_0x379f42(0x18d)],_0x27daff=await axios_1[_0x379f42(0x1a7)][_0x379f42(0x1a1)](constants_1[_0x379f42(0x191)][_0x379f42(0x187)](_0x379f42(0x1b1),_0x534eb4),_0x379f42(0x1ad))['then'](_0x25abcc=>_0x25abcc[_0x379f42(0x189)]),{expires_in:_0x4b63be,access_token:_0x254320}=_0x27daff;this[_0x379f42(0x1ab)][_0x379f42(0x1a4)]({'bitbucket':{...this[_0x379f42(0x1ab)][_0x379f42(0x18d)],'token':_0x254320}}),this[_0x379f42(0x183)]=Date[_0x379f42(0x1b4)]()+_0x4b63be*0x3e8,this[_0x379f42(0x1a3)]=_0x254320;}[a69_0x420c10(0x1ae)](){return{};}[a69_0x420c10(0x17f)](){const _0x151935=a69_0x420c10;return this[_0x151935(0x19d)]['get'](_0x151935(0x193));}['getAccessToken'](){const _0x5c576e=a69_0x420c10;return this[_0x5c576e(0x1a3)];}async[a69_0x420c10(0x184)](){const _0x1fa8c5=a69_0x420c10;return await this[_0x1fa8c5(0x17f)](),!![];}};BitbucketApiService=__decorate([typedi_1[a69_0x420c10(0x1bc)](),__param(0x0,typedi_1[a69_0x420c10(0x1aa)]()),__metadata('design:paramtypes',[app_settings_service_1[a69_0x420c10(0x19e)],auth_settings_service_1[a69_0x420c10(0x1ba)]])],BitbucketApiService),exports[a69_0x420c10(0x1a0)]=BitbucketApiService;