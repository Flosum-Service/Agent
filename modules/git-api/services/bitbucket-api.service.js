const a70_0x12e1ea=a70_0x2b33;(function(_0x3bccc1,_0x47ecac){const _0x3cbc01=a70_0x2b33,_0x327980=_0x3bccc1();while(!![]){try{const _0xabb1fd=-parseInt(_0x3cbc01(0x213))/0x1+-parseInt(_0x3cbc01(0x1f8))/0x2*(parseInt(_0x3cbc01(0x221))/0x3)+parseInt(_0x3cbc01(0x219))/0x4*(parseInt(_0x3cbc01(0x20a))/0x5)+parseInt(_0x3cbc01(0x1ee))/0x6+-parseInt(_0x3cbc01(0x206))/0x7*(parseInt(_0x3cbc01(0x1ec))/0x8)+-parseInt(_0x3cbc01(0x210))/0x9*(parseInt(_0x3cbc01(0x1fe))/0xa)+parseInt(_0x3cbc01(0x1e8))/0xb*(parseInt(_0x3cbc01(0x1e7))/0xc);if(_0xabb1fd===_0x47ecac)break;else _0x327980['push'](_0x327980['shift']());}catch(_0x239522){_0x327980['push'](_0x327980['shift']());}}}(a70_0x5eaf,0x5f26b));const a70_0x1eb9a5=(function(){let _0x5bd75a=!![];return function(_0x1d8be4,_0x2138e6){const _0x55e810=_0x5bd75a?function(){if(_0x2138e6){const _0x22a164=_0x2138e6['apply'](_0x1d8be4,arguments);return _0x2138e6=null,_0x22a164;}}:function(){};return _0x5bd75a=![],_0x55e810;};}()),a70_0x13cdf4=a70_0x1eb9a5(this,function(){const _0x330f71=a70_0x2b33;return a70_0x13cdf4[_0x330f71(0x1fb)]()[_0x330f71(0x214)](_0x330f71(0x21e))[_0x330f71(0x1fb)]()['constructor'](a70_0x13cdf4)['search'](_0x330f71(0x21e));});function a70_0x5eaf(){const _0x1f6712=['update','1117644bePWVx','accessToken','request','MAX_REQUEST_PER_HOUR','GitApiService','getAccessToken','BitbucketApiService','getCurrentUser','typedi','interceptors','2wmhBqY','metadata','apiRequest','toString','bitbucket','Authorization','6873730HfIxFV','replace','%clientToken%','post','Service','createRequest','defineProperty','__metadata','693Tkygnw','axios','length','getHeaders','5XERaYq','function','../../../constants','__importDefault','AppSettingsService','Bearer\x20','9jiqeLs','refreshToken','now','58924eXncwe','search','authSettings','object','grant_type=client_credentials','BITBUCKET_REFRESH_TOKEN_URL','1546924NIJwxp','__decorate','get','../../shared/services/app-settings.service','accessTokenExpiresAt','(((.+)+)+)+$','__esModule','../../shared/services/auth-settings.service','1099923lqnLQY','__param','default','2293464FLsHwu','55hqmeTh','getOwnPropertyDescriptor','then','user','2096TIPqyj'];a70_0x5eaf=function(){return _0x1f6712;};return a70_0x5eaf();}a70_0x13cdf4();'use strict';var __decorate=this&&this[a70_0x12e1ea(0x21a)]||function(_0x162e56,_0x454301,_0x461917,_0x9d20be){const _0x363ccc=a70_0x12e1ea;var _0x3802a8=arguments['length'],_0x45f839=_0x3802a8<0x3?_0x454301:_0x9d20be===null?_0x9d20be=Object[_0x363ccc(0x1e9)](_0x454301,_0x461917):_0x9d20be,_0x428aa2;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x363ccc(0x20b))_0x45f839=Reflect['decorate'](_0x162e56,_0x454301,_0x461917,_0x9d20be);else{for(var _0x1d5c95=_0x162e56[_0x363ccc(0x208)]-0x1;_0x1d5c95>=0x0;_0x1d5c95--)if(_0x428aa2=_0x162e56[_0x1d5c95])_0x45f839=(_0x3802a8<0x3?_0x428aa2(_0x45f839):_0x3802a8>0x3?_0x428aa2(_0x454301,_0x461917,_0x45f839):_0x428aa2(_0x454301,_0x461917))||_0x45f839;}return _0x3802a8>0x3&&_0x45f839&&Object[_0x363ccc(0x204)](_0x454301,_0x461917,_0x45f839),_0x45f839;},__metadata=this&&this[a70_0x12e1ea(0x205)]||function(_0xf1733,_0x216c8e){const _0x47f520=a70_0x12e1ea;if(typeof Reflect===_0x47f520(0x216)&&typeof Reflect[_0x47f520(0x1f9)]==='function')return Reflect[_0x47f520(0x1f9)](_0xf1733,_0x216c8e);},__param=this&&this[a70_0x12e1ea(0x222)]||function(_0x3a25d9,_0x48fa5b){return function(_0x31d9e2,_0x479a66){_0x48fa5b(_0x31d9e2,_0x479a66,_0x3a25d9);};},__importDefault=this&&this[a70_0x12e1ea(0x20d)]||function(_0x136eaa){const _0x29ceeb=a70_0x12e1ea;return _0x136eaa&&_0x136eaa[_0x29ceeb(0x21f)]?_0x136eaa:{'default':_0x136eaa};};Object['defineProperty'](exports,a70_0x12e1ea(0x21f),{'value':!![]}),exports[a70_0x12e1ea(0x1f4)]=void 0x0;const constants_1=require(a70_0x12e1ea(0x20c)),app_settings_service_1=require(a70_0x12e1ea(0x21c)),auth_settings_service_1=require(a70_0x12e1ea(0x220)),axios_1=__importDefault(require(a70_0x12e1ea(0x207))),typedi_1=require(a70_0x12e1ea(0x1f6)),git_api_service_1=require('./git-api.service');function a70_0x2b33(_0x1706e0,_0x197133){const _0x51fd66=a70_0x5eaf();return a70_0x2b33=function(_0x13cdf4,_0x1eb9a5){_0x13cdf4=_0x13cdf4-0x1e7;let _0x5eaf80=_0x51fd66[_0x13cdf4];return _0x5eaf80;},a70_0x2b33(_0x1706e0,_0x197133);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x12e1ea(0x1f2)]{constructor(_0x3c5541,_0x15efed){const _0x5a1af9=a70_0x12e1ea;super(_0x3c5541),this['authSettings']=_0x15efed,this['accessTokenExpiresAt']=-0x1,this[_0x5a1af9(0x1f1)]=0x3e8,this[_0x5a1af9(0x1f0)]=this[_0x5a1af9(0x203)]();}get[a70_0x12e1ea(0x1fa)](){const _0x45de5e=a70_0x12e1ea;return this[_0x45de5e(0x1f0)];}[a70_0x12e1ea(0x203)](_0x39c33c){const _0x1cfd30=a70_0x12e1ea,_0x16bef=super[_0x1cfd30(0x203)](_0x39c33c);return _0x16bef[_0x1cfd30(0x1f7)][_0x1cfd30(0x1f0)]['use'](async _0x5e322b=>{const _0x89311e=_0x1cfd30;return await this['checkAccessToken'](),_0x5e322b['headers'][_0x89311e(0x1fd)]=_0x89311e(0x20f)+this[_0x89311e(0x1ef)],_0x5e322b;}),_0x16bef;}async['checkAccessToken'](){const _0x14bcc2=a70_0x12e1ea;if(this[_0x14bcc2(0x1ef)]&&Date['now']()<this['accessTokenExpiresAt'])return;await this[_0x14bcc2(0x211)]();}async[a70_0x12e1ea(0x211)](){const _0x8b7560=a70_0x12e1ea,{clientToken:_0x2c9656}=this['authSettings']['bitbucket'],_0x3e1954=await axios_1[_0x8b7560(0x223)][_0x8b7560(0x201)](constants_1[_0x8b7560(0x218)][_0x8b7560(0x1ff)](_0x8b7560(0x200),_0x2c9656),_0x8b7560(0x217))[_0x8b7560(0x1ea)](_0x1ee1cf=>_0x1ee1cf['data']),{expires_in:_0x582904,access_token:_0x5f1227}=_0x3e1954;this[_0x8b7560(0x215)][_0x8b7560(0x1ed)]({'bitbucket':{...this[_0x8b7560(0x215)][_0x8b7560(0x1fc)],'token':_0x5f1227}}),this[_0x8b7560(0x21d)]=Date[_0x8b7560(0x212)]()+_0x582904*0x3e8,this['accessToken']=_0x5f1227;}[a70_0x12e1ea(0x209)](){return{};}[a70_0x12e1ea(0x1f5)](){const _0x2f80ae=a70_0x12e1ea;return this[_0x2f80ae(0x1f0)][_0x2f80ae(0x21b)](_0x2f80ae(0x1eb));}[a70_0x12e1ea(0x1f3)](){const _0x4e50a1=a70_0x12e1ea;return this[_0x4e50a1(0x1ef)];}async['isLoggedIn'](){const _0x37dc90=a70_0x12e1ea;return await this[_0x37dc90(0x1f5)](),!![];}};BitbucketApiService=__decorate([typedi_1[a70_0x12e1ea(0x202)](),__param(0x0,typedi_1['Inject']()),__metadata('design:paramtypes',[app_settings_service_1[a70_0x12e1ea(0x20e)],auth_settings_service_1['AuthSettingsService']])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;