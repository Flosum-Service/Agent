const a70_0x584c6a=a70_0x5626;function a70_0xe521(){const _0x2fd3c2=['now','grant_type=client_credentials','GitApiService','metadata','699525DSdSkw','default','30LVsudi','Inject','74244rdMAma','user','getHeaders','function','getCurrentUser','isLoggedIn','use','BITBUCKET_REFRESH_TOKEN_URL','toString','__esModule','constructor','get','81MAbgom','headers','973216vqqaoe','AppSettingsService','authSettings','Authorization','apiRequest','refreshToken','request','5462270zISHvz','decorate','30830KnbJsx','interceptors','accessTokenExpiresAt','__decorate','search','1239208inzZhp','getOwnPropertyDescriptor','then','BitbucketApiService','__importDefault','../../../constants','bitbucket','defineProperty','accessToken','post','MAX_REQUEST_PER_HOUR','object','%clientToken%','update','7omSJNC','length','typedi','checkAccessToken','(((.+)+)+)+$','apply','axios','448768OVcqow','750vmqjcE','__metadata','createRequest'];a70_0xe521=function(){return _0x2fd3c2;};return a70_0xe521();}(function(_0x82cc6,_0x282af4){const _0x2323d9=a70_0x5626,_0x2edc29=_0x82cc6();while(!![]){try{const _0x3d5b2b=parseInt(_0x2323d9(0x19b))/0x1+parseInt(_0x2323d9(0x181))/0x2+-parseInt(_0x2323d9(0x199))/0x3*(parseInt(_0x2323d9(0x18d))/0x4)+parseInt(_0x2323d9(0x1a4))/0x5*(-parseInt(_0x2323d9(0x182))/0x6)+parseInt(_0x2323d9(0x17a))/0x7*(-parseInt(_0x2323d9(0x16c))/0x8)+parseInt(_0x2323d9(0x189))/0x9*(parseInt(_0x2323d9(0x18b))/0xa)+parseInt(_0x2323d9(0x1a2))/0xb;if(_0x3d5b2b===_0x282af4)break;else _0x2edc29['push'](_0x2edc29['shift']());}catch(_0x4eb985){_0x2edc29['push'](_0x2edc29['shift']());}}}(a70_0xe521,0x7a343));const a70_0x2743fe=(function(){let _0xbc8fb0=!![];return function(_0x4fac7c,_0x4aef65){const _0x456acb=_0xbc8fb0?function(){const _0x101ac1=a70_0x5626;if(_0x4aef65){const _0x1990d3=_0x4aef65[_0x101ac1(0x17f)](_0x4fac7c,arguments);return _0x4aef65=null,_0x1990d3;}}:function(){};return _0xbc8fb0=![],_0x456acb;};}()),a70_0x31b30c=a70_0x2743fe(this,function(){const _0x287df7=a70_0x5626;return a70_0x31b30c[_0x287df7(0x195)]()[_0x287df7(0x16b)](_0x287df7(0x17e))['toString']()[_0x287df7(0x197)](a70_0x31b30c)[_0x287df7(0x16b)]('(((.+)+)+)+$');});a70_0x31b30c();'use strict';var __decorate=this&&this[a70_0x584c6a(0x16a)]||function(_0x1bb683,_0x2cfa1c,_0x10fae3,_0x4f60ee){const _0x2ae6b9=a70_0x584c6a;var _0x520847=arguments[_0x2ae6b9(0x17b)],_0x3b41f5=_0x520847<0x3?_0x2cfa1c:_0x4f60ee===null?_0x4f60ee=Object[_0x2ae6b9(0x16d)](_0x2cfa1c,_0x10fae3):_0x4f60ee,_0xe53b6e;if(typeof Reflect==='object'&&typeof Reflect[_0x2ae6b9(0x1a3)]===_0x2ae6b9(0x190))_0x3b41f5=Reflect[_0x2ae6b9(0x1a3)](_0x1bb683,_0x2cfa1c,_0x10fae3,_0x4f60ee);else{for(var _0x5d6524=_0x1bb683[_0x2ae6b9(0x17b)]-0x1;_0x5d6524>=0x0;_0x5d6524--)if(_0xe53b6e=_0x1bb683[_0x5d6524])_0x3b41f5=(_0x520847<0x3?_0xe53b6e(_0x3b41f5):_0x520847>0x3?_0xe53b6e(_0x2cfa1c,_0x10fae3,_0x3b41f5):_0xe53b6e(_0x2cfa1c,_0x10fae3))||_0x3b41f5;}return _0x520847>0x3&&_0x3b41f5&&Object['defineProperty'](_0x2cfa1c,_0x10fae3,_0x3b41f5),_0x3b41f5;},__metadata=this&&this[a70_0x584c6a(0x183)]||function(_0x14411c,_0x3598be){const _0x558b2e=a70_0x584c6a;if(typeof Reflect===_0x558b2e(0x177)&&typeof Reflect[_0x558b2e(0x188)]===_0x558b2e(0x190))return Reflect['metadata'](_0x14411c,_0x3598be);},__param=this&&this['__param']||function(_0x3f9869,_0x6db19c){return function(_0x1ccaa3,_0xf1cd7f){_0x6db19c(_0x1ccaa3,_0xf1cd7f,_0x3f9869);};},__importDefault=this&&this[a70_0x584c6a(0x170)]||function(_0x72d0b0){const _0x296e03=a70_0x584c6a;return _0x72d0b0&&_0x72d0b0[_0x296e03(0x196)]?_0x72d0b0:{'default':_0x72d0b0};};Object[a70_0x584c6a(0x173)](exports,a70_0x584c6a(0x196),{'value':!![]}),exports[a70_0x584c6a(0x16f)]=void 0x0;const constants_1=require(a70_0x584c6a(0x171)),app_settings_service_1=require('../../shared/services/app-settings.service'),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require(a70_0x584c6a(0x180))),typedi_1=require(a70_0x584c6a(0x17c)),git_api_service_1=require('./git-api.service');function a70_0x5626(_0x249682,_0x5e3805){const _0x1bdb41=a70_0xe521();return a70_0x5626=function(_0x31b30c,_0x2743fe){_0x31b30c=_0x31b30c-0x16a;let _0xe5218e=_0x1bdb41[_0x31b30c];return _0xe5218e;},a70_0x5626(_0x249682,_0x5e3805);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x584c6a(0x187)]{constructor(_0x2a6c7f,_0x2aa38f){const _0x2829d0=a70_0x584c6a;super(_0x2a6c7f),this[_0x2829d0(0x19d)]=_0x2aa38f,this['accessTokenExpiresAt']=-0x1,this[_0x2829d0(0x176)]=0x3e8,this[_0x2829d0(0x1a1)]=this[_0x2829d0(0x184)]();}get[a70_0x584c6a(0x19f)](){const _0x590ae2=a70_0x584c6a;return this[_0x590ae2(0x1a1)];}['createRequest'](_0x400072){const _0x57db00=a70_0x584c6a,_0x2b405f=super[_0x57db00(0x184)](_0x400072);return _0x2b405f[_0x57db00(0x1a5)][_0x57db00(0x1a1)][_0x57db00(0x193)](async _0x154dc8=>{const _0x498f96=_0x57db00;return await this[_0x498f96(0x17d)](),_0x154dc8[_0x498f96(0x19a)][_0x498f96(0x19e)]='Bearer\x20'+this['accessToken'],_0x154dc8;}),_0x2b405f;}async[a70_0x584c6a(0x17d)](){const _0x1dad54=a70_0x584c6a;if(this[_0x1dad54(0x174)]&&Date['now']()<this['accessTokenExpiresAt'])return;await this[_0x1dad54(0x1a0)]();}async[a70_0x584c6a(0x1a0)](){const _0xf519db=a70_0x584c6a,{clientToken:_0x564c1f}=this[_0xf519db(0x19d)][_0xf519db(0x172)],_0x4fbd0c=await axios_1[_0xf519db(0x18a)][_0xf519db(0x175)](constants_1[_0xf519db(0x194)]['replace'](_0xf519db(0x178),_0x564c1f),_0xf519db(0x186))[_0xf519db(0x16e)](_0x8a2c82=>_0x8a2c82['data']),{expires_in:_0xef2f8a,access_token:_0x739171}=_0x4fbd0c;this[_0xf519db(0x19d)][_0xf519db(0x179)]({'bitbucket':{...this[_0xf519db(0x19d)][_0xf519db(0x172)],'token':_0x739171}}),this[_0xf519db(0x1a6)]=Date[_0xf519db(0x185)]()+_0xef2f8a*0x3e8,this[_0xf519db(0x174)]=_0x739171;}[a70_0x584c6a(0x18f)](){return{};}['getCurrentUser'](){const _0x384b8f=a70_0x584c6a;return this[_0x384b8f(0x1a1)][_0x384b8f(0x198)](_0x384b8f(0x18e));}['getAccessToken'](){return this['accessToken'];}async[a70_0x584c6a(0x192)](){const _0x5754ca=a70_0x584c6a;return await this[_0x5754ca(0x191)](),!![];}};BitbucketApiService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1[a70_0x584c6a(0x18c)]()),__metadata('design:paramtypes',[app_settings_service_1[a70_0x584c6a(0x19c)],auth_settings_service_1['AuthSettingsService']])],BitbucketApiService),exports[a70_0x584c6a(0x16f)]=BitbucketApiService;