function a339_0xac3c(_0x5095d2,_0x37b714){const _0x58b5c9=a339_0x2b17();return a339_0xac3c=function(_0x53b811,_0x33b68e){_0x53b811=_0x53b811-0x99;let _0x2b179f=_0x58b5c9[_0x53b811];return _0x2b179f;},a339_0xac3c(_0x5095d2,_0x37b714);}const a339_0x3845c0=a339_0xac3c;(function(_0x1a5a11,_0x4dafea){const _0x16b84c=a339_0xac3c,_0x354814=_0x1a5a11();while(!![]){try{const _0x43f2f3=-parseInt(_0x16b84c(0xaf))/0x1+-parseInt(_0x16b84c(0xa4))/0x2*(-parseInt(_0x16b84c(0xa3))/0x3)+parseInt(_0x16b84c(0xa5))/0x4+parseInt(_0x16b84c(0x9d))/0x5+-parseInt(_0x16b84c(0xee))/0x6+parseInt(_0x16b84c(0xea))/0x7*(-parseInt(_0x16b84c(0xd0))/0x8)+parseInt(_0x16b84c(0xb4))/0x9;if(_0x43f2f3===_0x4dafea)break;else _0x354814['push'](_0x354814['shift']());}catch(_0x1dee4b){_0x354814['push'](_0x354814['shift']());}}}(a339_0x2b17,0xcfc5c));const a339_0x33b68e=(function(){let _0x2285e7=!![];return function(_0x709709,_0x359b7c){const _0x58b7c5=_0x2285e7?function(){const _0x2460bd=a339_0xac3c;if(_0x359b7c){const _0x3b60bb=_0x359b7c[_0x2460bd(0xd8)](_0x709709,arguments);return _0x359b7c=null,_0x3b60bb;}}:function(){};return _0x2285e7=![],_0x58b7c5;};}()),a339_0x53b811=a339_0x33b68e(this,function(){const _0x372fb3=a339_0xac3c;return a339_0x53b811[_0x372fb3(0xb1)]()[_0x372fb3(0x9e)](_0x372fb3(0xae))[_0x372fb3(0xb1)]()[_0x372fb3(0xe0)](a339_0x53b811)[_0x372fb3(0x9e)](_0x372fb3(0xae));});a339_0x53b811();'use strict';function a339_0x2b17(){const _0x37f609=['push','Status__c','185712GcpXVZ','2GwTfEc','2754532LnKTxh','../../../../constants','createZip','ORG_COMPONENT_OBJECT_NAME','Revision_Counter__c','Readable','ATTACHMENT_OBJECT_NAME','FLOSUM_NAMESPACE','instance','(((.+)+)+)+$','1016755DFtsGP','deploy','toString','Attachment_ID__c','defineProperty','19878048DNzAfF','API_Name__c','RestSimpleDeployData','Folder__c','componentId','trackingSettingId','sourceMemberId','error','type','Is_Retrieved__c','BINARY_FIELD_NAME','records','\x20components','apiVersion','Is_Deleted__c','length','changedBy','Writable','binaryRecordsSizeChunk','from','_final','isReachedMaxChunk','then','addAttachmentToChunk','Component_Type__c','__esModule','OrganisationName__c','orgComponentsToDeployChunk','129320KTwaKp','update','resetChunks','generateAsync','_write','../../constants','log','Label__c','apply','has','revisionCounter','@flosum/salesforce','targetOrgId','logger','isNameObsolete','Tracking_Setting__c','constructor','fullName','deployAttachments','nodebuffer','fileName','default','addOrgComponentToChunk','byteLength','stream','handleDeployResult','294iBsfXi','successDeployedCounter','Retrieved','Source_Member_Id__c','10154178AVUoOI','Name__c','jszip','CompositeBinaryDeployData','attachmentsToDeployChunk','Last_Updated_By__c','deployOrgComponents','6399375QPOcwA','search','execute','ComponentsDeployer'];a339_0x2b17=function(){return _0x37f609;};return a339_0x2b17();}var __importDefault=this&&this['__importDefault']||function(_0x1b2315){const _0x3a63c4=a339_0xac3c;return _0x1b2315&&_0x1b2315[_0x3a63c4(0xcd)]?_0x1b2315:{'default':_0x1b2315};};Object[a339_0x3845c0(0xb3)](exports,'__esModule',{'value':!![]}),exports[a339_0x3845c0(0xa0)]=void 0x0;const salesforce_1=require(a339_0x3845c0(0xdb)),constants_1=require(a339_0x3845c0(0xd5)),stream_1=require(a339_0x3845c0(0xe8)),jszip_1=__importDefault(require(a339_0x3845c0(0xf0))),constants_2=require(a339_0x3845c0(0xa6)),MAX_COMPOSITE_CHUNK_COUNT=0xc8,EXTERNAL_ID_FIELD='Id',ATTACHMENT_FIELD_NAME=constants_2[a339_0x3845c0(0xac)]+a339_0x3845c0(0xb2),CONTENT_TYPE='application/zip';class ComponentsDeployer extends stream_1[a339_0x3845c0(0xc5)]{constructor({apiVersion:_0xb0501c,instance:_0x492343,logger:_0x410a34,targetOrgId:_0x1ad968,trackingSettingId:_0x144694}){const _0x46ab03=a339_0x3845c0;super({'objectMode':!![]}),this[_0x46ab03(0x9a)]={'records':[],'binary':[]},this[_0x46ab03(0xc6)]=0x0,this['orgComponentsToDeployChunk']=[],this[_0x46ab03(0xeb)]=0x0,this[_0x46ab03(0xc1)]=_0xb0501c,this[_0x46ab03(0xad)]=_0x492343,this[_0x46ab03(0xdd)]=_0x410a34,this['targetOrgId']=_0x1ad968,this[_0x46ab03(0xb9)]=_0x144694;}async[a339_0x3845c0(0xb0)](){const _0x4ff2a5=a339_0x3845c0;await this[_0x4ff2a5(0xe2)]()[_0x4ff2a5(0xca)](_0x138700=>this['populateAttachmentId'](_0x138700))[_0x4ff2a5(0xca)](()=>this[_0x4ff2a5(0x9c)]())[_0x4ff2a5(0xca)](_0x5e6c32=>this[_0x4ff2a5(0xe9)](_0x5e6c32)),this[_0x4ff2a5(0xd2)]();}[a339_0x3845c0(0xe2)](){const _0x58b191=a339_0x3845c0,_0x328bd0=new salesforce_1[(_0x58b191(0x99))]({'instance':this['instance'],'objectName':constants_1[_0x58b191(0xab)],'externalIdField':EXTERNAL_ID_FIELD,'allOrNone':![],'api':this['apiVersion']});return _0x328bd0[_0x58b191(0x9f)](this[_0x58b191(0x9a)]);}[a339_0x3845c0(0x9c)](){const _0x2ed3c6=a339_0x3845c0,_0xc583b1=new salesforce_1[(_0x2ed3c6(0xb6))]({'instance':this[_0x2ed3c6(0xad)],'objectName':constants_1[_0x2ed3c6(0xa8)],'api':this[_0x2ed3c6(0xc1)],'allOrNone':![],'externalIdField':'Id'});return _0xc583b1['execute']({'records':this['orgComponentsToDeployChunk']});}async[a339_0x3845c0(0xe9)](_0x41f213){const _0x4ee9ea=a339_0x3845c0;for(const {success:_0x18b8b1,error:_0x38b2ba}of _0x41f213){if(_0x18b8b1){this[_0x4ee9ea(0xeb)]++;continue;}_0x38b2ba&&this[_0x4ee9ea(0xdd)][_0x4ee9ea(0xbb)](_0x38b2ba);}}[a339_0x3845c0(0xc9)](_0x2d4189){const _0x48f6e4=a339_0x3845c0;return _0x2d4189+this[_0x48f6e4(0xc6)]>=salesforce_1['CompositeConstants']['MAX_BODY_SIZE']||this[_0x48f6e4(0x9a)]['records'][_0x48f6e4(0xc3)]===MAX_COMPOSITE_CHUNK_COUNT;}['resetChunks'](){const _0x363a00=a339_0x3845c0;this['binaryRecordsSizeChunk']=0x0,this[_0x363a00(0x9a)]={'records':[],'binary':[]},this['orgComponentsToDeployChunk']=[];}['populateAttachmentId'](_0x45d4e5){const _0x260e79=a339_0x3845c0;for(const _0x3bc3c8 in _0x45d4e5){this[_0x260e79(0xcf)][_0x3bc3c8][ATTACHMENT_FIELD_NAME]=_0x45d4e5[_0x3bc3c8]['id'];}}async[a339_0x3845c0(0xcb)](_0x514b9d,_0x27b44c){const _0x27f783=a339_0x3845c0,{listMetadataItem:_0x16491b,sourceMemberRecord:_0x3e5672}=_0x514b9d,_0x2dbcf9={'attributes':{'type':constants_1[_0x27f783(0xab)],'binaryPartName':_0x16491b[_0x27f783(0xe1)],'binaryPartNameAlias':constants_1[_0x27f783(0xbe)]},'Id':_0x3e5672['attachmentId'],'Name':_0x16491b['fullName'],'Description':_0x16491b[_0x27f783(0xbc)],'ContentType':CONTENT_TYPE,'ParentId':this['targetOrgId'],'Body':_0x16491b[_0x27f783(0xe1)]},_0x32bb46={'binaryFieldName':constants_1[_0x27f783(0xbe)],'name':_0x16491b[_0x27f783(0xe1)],'value':stream_1[_0x27f783(0xaa)][_0x27f783(0xc7)](_0x27b44c)};this[_0x27f783(0x9a)][_0x27f783(0xbf)]['push'](_0x2dbcf9),this[_0x27f783(0x9a)]['binary']['push'](_0x32bb46);}[a339_0x3845c0(0xa7)](_0x125bba){const _0x598a00=a339_0x3845c0,_0x15e4db=new jszip_1[(_0x598a00(0xe5))]();for(const _0x3fc278 in _0x125bba){_0x15e4db['file'](_0x3fc278,_0x125bba[_0x3fc278]);}return _0x15e4db[_0x598a00(0xd3)]({'type':_0x598a00(0xe3)});}[a339_0x3845c0(0xe6)](_0x2c3e12,_0x3d5a90){const _0x1a09aa=a339_0x3845c0,_0x46cd3d={'attributes':{'type':constants_1[_0x1a09aa(0xa8)]},'Id':_0x3d5a90[_0x1a09aa(0xb8)],[constants_2['FLOSUM_NAMESPACE']+_0x1a09aa(0xc2)]:_0x3d5a90[_0x1a09aa(0xde)],[constants_2[_0x1a09aa(0xac)]+_0x1a09aa(0xa9)]:_0x3d5a90[_0x1a09aa(0xda)],[constants_2[_0x1a09aa(0xac)]+_0x1a09aa(0xed)]:_0x3d5a90[_0x1a09aa(0xba)],[constants_2[_0x1a09aa(0xac)]+_0x1a09aa(0x9b)]:_0x3d5a90[_0x1a09aa(0xc4)],[constants_2[_0x1a09aa(0xac)]+_0x1a09aa(0xb5)]:_0x2c3e12[_0x1a09aa(0xe1)],[constants_2[_0x1a09aa(0xac)]+_0x1a09aa(0xef)]:_0x2c3e12[_0x1a09aa(0xe1)],[constants_2[_0x1a09aa(0xac)]+_0x1a09aa(0xcc)]:_0x2c3e12[_0x1a09aa(0xbc)],[constants_2['FLOSUM_NAMESPACE']+_0x1a09aa(0xd7)]:_0x2c3e12[_0x1a09aa(0xe4)],[constants_2[_0x1a09aa(0xac)]+_0x1a09aa(0xb7)]:constants_1['METADATA_FOLDER_MAP'][_0x1a09aa(0xd9)](_0x2c3e12['type'])||null,[constants_2['FLOSUM_NAMESPACE']+_0x1a09aa(0xbd)]:!![],[constants_2[_0x1a09aa(0xac)]+_0x1a09aa(0xce)]:this[_0x1a09aa(0xdc)],[constants_2[_0x1a09aa(0xac)]+_0x1a09aa(0xdf)]:this[_0x1a09aa(0xb9)],[constants_2['FLOSUM_NAMESPACE']+_0x1a09aa(0xa2)]:_0x1a09aa(0xec)};this[_0x1a09aa(0xcf)][_0x1a09aa(0xa1)](_0x46cd3d);}async[a339_0x3845c0(0xd4)](_0x4cca32,_0x37283e,_0xf22f75){const _0x5da777=a339_0x3845c0;try{const {listMetadataItem:_0x49fde9,sourceMemberRecord:_0x5240cf,files:_0x3acdf9}=_0x4cca32,_0x1487b2=await this[_0x5da777(0xa7)](_0x3acdf9),_0x396f32=Buffer[_0x5da777(0xe7)](_0x1487b2);this[_0x5da777(0xc9)](_0x396f32)&&await this[_0x5da777(0xb0)](),this[_0x5da777(0xc6)]+=_0x396f32,await this[_0x5da777(0xcb)](_0x4cca32,_0x1487b2),this[_0x5da777(0xe6)](_0x49fde9,_0x5240cf),_0xf22f75();}catch(_0x4b6394){_0xf22f75(_0x4b6394);}}async[a339_0x3845c0(0xc8)](_0x1b802e){const _0x339f09=a339_0x3845c0;try{this['attachmentsToDeployChunk'][_0x339f09(0xbf)][_0x339f09(0xc3)]&&this[_0x339f09(0xcf)]['length']&&await this['deploy'](),this[_0x339f09(0xdd)][_0x339f09(0xd6)]('Process\x20completed\x20for\x20'+this['successDeployedCounter']+_0x339f09(0xc0)),await this[_0x339f09(0xdd)][_0x339f09(0xd1)](),_0x1b802e();}catch(_0x20fca4){_0x1b802e(_0x20fca4);}}}exports[a339_0x3845c0(0xa0)]=ComponentsDeployer;