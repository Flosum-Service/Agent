const a295_0xb22d25=a295_0x459a;function a295_0x459a(_0x49327b,_0x6c2959){const _0x5317b2=a295_0x1033();return a295_0x459a=function(_0x394c10,_0x5f3550){_0x394c10=_0x394c10-0x173;let _0x103337=_0x5317b2[_0x394c10];return _0x103337;},a295_0x459a(_0x49327b,_0x6c2959);}(function(_0x23ebab,_0x425677){const _0x4f84c4=a295_0x459a,_0x5557d5=_0x23ebab();while(!![]){try{const _0x4e8378=-parseInt(_0x4f84c4(0x199))/0x1+parseInt(_0x4f84c4(0x17c))/0x2+parseInt(_0x4f84c4(0x1b8))/0x3*(parseInt(_0x4f84c4(0x1a4))/0x4)+parseInt(_0x4f84c4(0x1ae))/0x5*(-parseInt(_0x4f84c4(0x191))/0x6)+-parseInt(_0x4f84c4(0x19a))/0x7*(-parseInt(_0x4f84c4(0x176))/0x8)+-parseInt(_0x4f84c4(0x1a5))/0x9*(-parseInt(_0x4f84c4(0x193))/0xa)+-parseInt(_0x4f84c4(0x1b2))/0xb;if(_0x4e8378===_0x425677)break;else _0x5557d5['push'](_0x5557d5['shift']());}catch(_0x178fa7){_0x5557d5['push'](_0x5557d5['shift']());}}}(a295_0x1033,0xbfae1));const a295_0x5f3550=(function(){let _0x21887d=!![];return function(_0x5da8de,_0x51aec0){const _0x3d1063=_0x21887d?function(){const _0x4b16d8=a295_0x459a;if(_0x51aec0){const _0x403a9b=_0x51aec0[_0x4b16d8(0x1c5)](_0x5da8de,arguments);return _0x51aec0=null,_0x403a9b;}}:function(){};return _0x21887d=![],_0x3d1063;};}()),a295_0x394c10=a295_0x5f3550(this,function(){const _0x51a7c8=a295_0x459a;return a295_0x394c10[_0x51a7c8(0x198)]()[_0x51a7c8(0x1a8)](_0x51a7c8(0x1b3))[_0x51a7c8(0x198)]()[_0x51a7c8(0x1a0)](a295_0x394c10)[_0x51a7c8(0x1a8)]('(((.+)+)+)+$');});a295_0x394c10();'use strict';var __importDefault=this&&this[a295_0xb22d25(0x1bb)]||function(_0x4912c6){const _0x21b690=a295_0xb22d25;return _0x4912c6&&_0x4912c6[_0x21b690(0x185)]?_0x4912c6:{'default':_0x4912c6};};Object[a295_0xb22d25(0x192)](exports,a295_0xb22d25(0x185),{'value':!![]}),exports[a295_0xb22d25(0x190)]=void 0x0;const salesforce_1=require(a295_0xb22d25(0x1c2)),constants_1=require(a295_0xb22d25(0x183)),stream_1=require('stream'),jszip_1=__importDefault(require('jszip')),constants_2=require(a295_0xb22d25(0x18c)),MAX_COMPOSITE_CHUNK_COUNT=0xc8,EXTERNAL_ID_FIELD='Id',ATTACHMENT_FIELD_NAME=constants_2[a295_0xb22d25(0x18e)]+a295_0xb22d25(0x196),CONTENT_TYPE=a295_0xb22d25(0x1ba);class ComponentsDeployer extends stream_1['Writable']{constructor({apiVersion:_0x38ea20,instance:_0x36779a,logger:_0x4f6f48,targetOrgId:_0x3ca501,trackingSettingId:_0x3ece09}){const _0x30dc07=a295_0xb22d25;super({'objectMode':!![]}),this[_0x30dc07(0x1a9)]={'records':[],'binary':[]},this['binaryRecordsSizeChunk']=0x0,this[_0x30dc07(0x1bd)]=[],this[_0x30dc07(0x177)]=0x0,this[_0x30dc07(0x18d)]=_0x38ea20,this['instance']=_0x36779a,this[_0x30dc07(0x194)]=_0x4f6f48,this[_0x30dc07(0x179)]=_0x3ca501,this['trackingSettingId']=_0x3ece09;}async['deploy'](){const _0x159e72=a295_0xb22d25;await this[_0x159e72(0x19e)]()[_0x159e72(0x1a2)](_0x27b8ac=>this[_0x159e72(0x1b1)](_0x27b8ac))[_0x159e72(0x1a2)](()=>this[_0x159e72(0x1ad)]())[_0x159e72(0x1a2)](_0x48cd1d=>this[_0x159e72(0x1bf)](_0x48cd1d)),this['resetChunks']();}[a295_0xb22d25(0x19e)](){const _0x1af01b=a295_0xb22d25,_0x1a5d28=new salesforce_1[(_0x1af01b(0x17d))]({'instance':this[_0x1af01b(0x1c8)],'objectName':constants_1['ATTACHMENT_OBJECT_NAME'],'externalIdField':EXTERNAL_ID_FIELD,'allOrNone':![],'api':this[_0x1af01b(0x18d)]});return _0x1a5d28[_0x1af01b(0x19d)](this[_0x1af01b(0x1a9)]);}[a295_0xb22d25(0x1ad)](){const _0x32d4fd=a295_0xb22d25,_0x219e93=new salesforce_1[(_0x32d4fd(0x197))]({'instance':this['instance'],'objectName':constants_1[_0x32d4fd(0x188)],'api':this[_0x32d4fd(0x18d)],'allOrNone':![],'externalIdField':'Id'});return _0x219e93['execute']({'records':this[_0x32d4fd(0x1bd)]});}async['handleDeployResult'](_0x3ada91){const _0x360269=a295_0xb22d25;for(const {success:_0x1fda81,error:_0x17c78f}of _0x3ada91){if(_0x1fda81){this['successDeployedCounter']++;continue;}_0x17c78f&&this['logger'][_0x360269(0x1a7)](_0x17c78f);}}[a295_0xb22d25(0x1cb)](_0x4114de){const _0x8a656c=a295_0xb22d25;return _0x4114de+this[_0x8a656c(0x17a)]>=salesforce_1[_0x8a656c(0x1a3)][_0x8a656c(0x18b)]||this[_0x8a656c(0x1a9)][_0x8a656c(0x186)]['length']===MAX_COMPOSITE_CHUNK_COUNT;}[a295_0xb22d25(0x1b6)](){const _0x42b71f=a295_0xb22d25;this[_0x42b71f(0x17a)]=0x0,this[_0x42b71f(0x1a9)]={'records':[],'binary':[]},this[_0x42b71f(0x1bd)]=[];}[a295_0xb22d25(0x1b1)](_0x57b1f4){const _0x14d8ca=a295_0xb22d25;for(const _0x4ed196 in _0x57b1f4){this[_0x14d8ca(0x1bd)][_0x4ed196][ATTACHMENT_FIELD_NAME]=_0x57b1f4[_0x4ed196]['id'];}}async['addAttachmentToChunk'](_0x3d996c,_0x5749ca){const _0x3ce1a6=a295_0xb22d25,{listMetadataItem:_0x2c658d,sourceMemberRecord:_0x371943}=_0x3d996c,_0x42a31a={'attributes':{'type':constants_1[_0x3ce1a6(0x189)],'binaryPartName':_0x2c658d[_0x3ce1a6(0x1ac)],'binaryPartNameAlias':constants_1['BINARY_FIELD_NAME']},'Id':_0x371943['attachmentId'],'Name':_0x2c658d[_0x3ce1a6(0x1ac)],'Description':_0x2c658d['type'],'ContentType':CONTENT_TYPE,'ParentId':this[_0x3ce1a6(0x179)],'Body':_0x2c658d[_0x3ce1a6(0x1ac)]},_0x240279={'binaryFieldName':constants_1[_0x3ce1a6(0x18f)],'name':_0x2c658d[_0x3ce1a6(0x1ac)],'value':stream_1['Readable'][_0x3ce1a6(0x1c6)](_0x5749ca)};this[_0x3ce1a6(0x1a9)][_0x3ce1a6(0x186)][_0x3ce1a6(0x1b7)](_0x42a31a),this[_0x3ce1a6(0x1a9)][_0x3ce1a6(0x18a)]['push'](_0x240279);}[a295_0xb22d25(0x1b4)](_0x140bd3){const _0x2411f5=a295_0xb22d25,_0x35fed8=new jszip_1['default']();for(const _0x134d89 in _0x140bd3){_0x35fed8[_0x2411f5(0x1a6)](_0x134d89,_0x140bd3[_0x134d89]);}return _0x35fed8[_0x2411f5(0x19b)]({'type':_0x2411f5(0x1b9)});}[a295_0xb22d25(0x174)](_0x434913,_0xc2bdcf){const _0x302a55=a295_0xb22d25,_0x43d67b={'attributes':{'type':constants_1[_0x302a55(0x188)]},'Id':_0xc2bdcf[_0x302a55(0x1bc)],[constants_2[_0x302a55(0x18e)]+_0x302a55(0x182)]:_0xc2bdcf['isNameObsolete'],[constants_2[_0x302a55(0x18e)]+'Revision_Counter__c']:_0xc2bdcf[_0x302a55(0x1c7)],[constants_2[_0x302a55(0x18e)]+'Source_Member_Id__c']:_0xc2bdcf[_0x302a55(0x1aa)],[constants_2[_0x302a55(0x18e)]+_0x302a55(0x173)]:_0xc2bdcf[_0x302a55(0x1c3)],[constants_2['FLOSUM_NAMESPACE']+_0x302a55(0x1c0)]:_0x434913[_0x302a55(0x1ac)],[constants_2['FLOSUM_NAMESPACE']+_0x302a55(0x1ab)]:_0x434913[_0x302a55(0x1ac)],[constants_2[_0x302a55(0x18e)]+_0x302a55(0x1af)]:_0x434913[_0x302a55(0x19c)],[constants_2[_0x302a55(0x18e)]+_0x302a55(0x1c4)]:_0x434913[_0x302a55(0x1ca)],[constants_2[_0x302a55(0x18e)]+_0x302a55(0x1b0)]:constants_1[_0x302a55(0x175)]['has'](_0x434913['type'])||null,[constants_2[_0x302a55(0x18e)]+_0x302a55(0x17f)]:!![],[constants_2[_0x302a55(0x18e)]+_0x302a55(0x180)]:this[_0x302a55(0x179)],[constants_2[_0x302a55(0x18e)]+_0x302a55(0x17e)]:this['trackingSettingId'],[constants_2[_0x302a55(0x18e)]+_0x302a55(0x1b5)]:_0x302a55(0x195)};this[_0x302a55(0x1bd)][_0x302a55(0x1b7)](_0x43d67b);}async[a295_0xb22d25(0x178)](_0x5110bf,_0x1ff7cb,_0x731f20){const _0x32c492=a295_0xb22d25;try{const {listMetadataItem:_0xcf41d4,sourceMemberRecord:_0x29b337,files:_0x16f452}=_0x5110bf,_0x360744=await this[_0x32c492(0x1b4)](_0x16f452),_0x488028=Buffer[_0x32c492(0x1c1)](_0x360744);this[_0x32c492(0x1cb)](_0x488028)&&await this[_0x32c492(0x181)](),this[_0x32c492(0x17a)]+=_0x488028,await this[_0x32c492(0x19f)](_0x5110bf,_0x360744),this[_0x32c492(0x174)](_0xcf41d4,_0x29b337),_0x731f20();}catch(_0x247ca0){_0x731f20(_0x247ca0);}}async[a295_0xb22d25(0x1c9)](_0x3d8d52){const _0x355627=a295_0xb22d25;try{this[_0x355627(0x1a9)][_0x355627(0x186)][_0x355627(0x187)]&&this[_0x355627(0x1bd)][_0x355627(0x187)]&&await this['deploy'](),this[_0x355627(0x194)][_0x355627(0x184)](_0x355627(0x17b)+this[_0x355627(0x177)]+_0x355627(0x1a1)),await this[_0x355627(0x194)][_0x355627(0x1be)](),_0x3d8d52();}catch(_0x2790d1){_0x3d8d52(_0x2790d1);}}}exports[a295_0xb22d25(0x190)]=ComponentsDeployer;function a295_0x1033(){const _0x5930df=['5qZSSLT','Component_Type__c','Folder__c','populateAttachmentId','6514849EYsSIG','(((.+)+)+)+$','createZip','Status__c','resetChunks','push','1525449RZuYGN','nodebuffer','application/zip','__importDefault','componentId','orgComponentsToDeployChunk','update','handleDeployResult','API_Name__c','byteLength','@flosum/salesforce','changedBy','Label__c','apply','from','revisionCounter','instance','_final','fileName','isReachedMaxChunk','Last_Updated_By__c','addOrgComponentToChunk','METADATA_FOLDER_MAP','168uaaMqj','successDeployedCounter','_write','targetOrgId','binaryRecordsSizeChunk','Process\x20completed\x20for\x20','307878pGTnpH','CompositeBinaryDeployData','Tracking_Setting__c','Is_Retrieved__c','OrganisationName__c','deploy','Is_Deleted__c','../../constants','log','__esModule','records','length','ORG_COMPONENT_OBJECT_NAME','ATTACHMENT_OBJECT_NAME','binary','MAX_BODY_SIZE','../../../../constants','apiVersion','FLOSUM_NAMESPACE','BINARY_FIELD_NAME','ComponentsDeployer','1606314LzJgNj','defineProperty','10dYjOvZ','logger','Retrieved','Attachment_ID__c','RestSimpleDeployData','toString','1131725TqXrJo','434791qEtdlJ','generateAsync','type','execute','deployAttachments','addAttachmentToChunk','constructor','\x20components','then','CompositeConstants','4LkrNzd','7290261QYSPeR','file','error','search','attachmentsToDeployChunk','sourceMemberId','Name__c','fullName','deployOrgComponents'];a295_0x1033=function(){return _0x5930df;};return a295_0x1033();}