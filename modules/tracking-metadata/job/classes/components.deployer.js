const a338_0x1934d6=a338_0x155b;(function(_0x223abb,_0xb3079e){const _0x3e9b43=a338_0x155b,_0x40cf8d=_0x223abb();while(!![]){try{const _0x20d321=-parseInt(_0x3e9b43(0x106))/0x1+-parseInt(_0x3e9b43(0xf3))/0x2+parseInt(_0x3e9b43(0xe8))/0x3*(parseInt(_0x3e9b43(0xe9))/0x4)+parseInt(_0x3e9b43(0x100))/0x5+parseInt(_0x3e9b43(0xe2))/0x6*(-parseInt(_0x3e9b43(0xfb))/0x7)+parseInt(_0x3e9b43(0xeb))/0x8+parseInt(_0x3e9b43(0xb5))/0x9;if(_0x20d321===_0xb3079e)break;else _0x40cf8d['push'](_0x40cf8d['shift']());}catch(_0x370751){_0x40cf8d['push'](_0x40cf8d['shift']());}}}(a338_0x526f,0x764bb));const a338_0x3e7144=(function(){let _0x5284df=!![];return function(_0x39eaaf,_0x2aeefc){const _0x2b6af1=_0x5284df?function(){const _0x544254=a338_0x155b;if(_0x2aeefc){const _0x5da719=_0x2aeefc[_0x544254(0xdb)](_0x39eaaf,arguments);return _0x2aeefc=null,_0x5da719;}}:function(){};return _0x5284df=![],_0x2b6af1;};}()),a338_0x1e8301=a338_0x3e7144(this,function(){const _0x104c81=a338_0x155b;return a338_0x1e8301[_0x104c81(0xba)]()['search']('(((.+)+)+)+$')[_0x104c81(0xba)]()[_0x104c81(0xbd)](a338_0x1e8301)[_0x104c81(0xe7)](_0x104c81(0xd5));});a338_0x1e8301();'use strict';function a338_0x155b(_0x5756a0,_0x441f4e){const _0x2c93c2=a338_0x526f();return a338_0x155b=function(_0x1e8301,_0x3e7144){_0x1e8301=_0x1e8301-0xb0;let _0x526fc1=_0x2c93c2[_0x1e8301];return _0x526fc1;},a338_0x155b(_0x5756a0,_0x441f4e);}var __importDefault=this&&this[a338_0x1934d6(0xd6)]||function(_0x40598f){const _0x16afe7=a338_0x1934d6;return _0x40598f&&_0x40598f[_0x16afe7(0xb0)]?_0x40598f:{'default':_0x40598f};};Object[a338_0x1934d6(0xfd)](exports,a338_0x1934d6(0xb0),{'value':!![]}),exports[a338_0x1934d6(0xcb)]=void 0x0;const salesforce_1=require('@flosum/salesforce'),constants_1=require(a338_0x1934d6(0xfe)),stream_1=require(a338_0x1934d6(0xb3)),jszip_1=__importDefault(require(a338_0x1934d6(0xdc))),constants_2=require(a338_0x1934d6(0xd9)),MAX_COMPOSITE_CHUNK_COUNT=0xc8,EXTERNAL_ID_FIELD='Id',ATTACHMENT_FIELD_NAME=constants_2['FLOSUM_NAMESPACE']+a338_0x1934d6(0xb2),CONTENT_TYPE='application/zip';class ComponentsDeployer extends stream_1[a338_0x1934d6(0xb9)]{constructor({apiVersion:_0x35be12,instance:_0x3c1b60,logger:_0x503b13,targetOrgId:_0x884748,trackingSettingId:_0x308a3f}){const _0x20458a=a338_0x1934d6;super({'objectMode':!![]}),this['attachmentsToDeployChunk']={'records':[],'binary':[]},this[_0x20458a(0xed)]=0x0,this[_0x20458a(0xc2)]=[],this[_0x20458a(0xcd)]=0x0,this[_0x20458a(0xef)]=_0x35be12,this['instance']=_0x3c1b60,this['logger']=_0x503b13,this[_0x20458a(0xbe)]=_0x884748,this[_0x20458a(0xcf)]=_0x308a3f;}async[a338_0x1934d6(0xe3)](){const _0x1e639a=a338_0x1934d6;await this[_0x1e639a(0xca)]()[_0x1e639a(0xdd)](_0x39fc52=>this[_0x1e639a(0xc9)](_0x39fc52))[_0x1e639a(0xdd)](()=>this[_0x1e639a(0xbf)]())[_0x1e639a(0xdd)](_0x186162=>this[_0x1e639a(0xbb)](_0x186162)),this[_0x1e639a(0xc5)]();}[a338_0x1934d6(0xca)](){const _0x58b6f7=a338_0x1934d6,_0x1884b5=new salesforce_1[(_0x58b6f7(0xff))]({'instance':this[_0x58b6f7(0xde)],'objectName':constants_1[_0x58b6f7(0x105)],'externalIdField':EXTERNAL_ID_FIELD,'allOrNone':![],'api':this[_0x58b6f7(0xef)]});return _0x1884b5['execute'](this[_0x58b6f7(0xb4)]);}[a338_0x1934d6(0xbf)](){const _0x302880=a338_0x1934d6,_0x46c8b7=new salesforce_1[(_0x302880(0xec))]({'instance':this['instance'],'objectName':constants_1[_0x302880(0xd4)],'api':this[_0x302880(0xef)],'allOrNone':![],'externalIdField':'Id'});return _0x46c8b7[_0x302880(0xe0)]({'records':this[_0x302880(0xc2)]});}async['handleDeployResult'](_0x378550){const _0x838d32=a338_0x1934d6;for(const {success:_0x468c2d,error:_0x46206e}of _0x378550){if(_0x468c2d){this[_0x838d32(0xcd)]++;continue;}_0x46206e&&this[_0x838d32(0xd2)][_0x838d32(0xd3)](_0x46206e);}}[a338_0x1934d6(0xb7)](_0x251634){const _0x4fcf69=a338_0x1934d6;return _0x251634+this[_0x4fcf69(0xed)]>=salesforce_1[_0x4fcf69(0xce)][_0x4fcf69(0x104)]||this[_0x4fcf69(0xb4)][_0x4fcf69(0xf8)][_0x4fcf69(0xc3)]===MAX_COMPOSITE_CHUNK_COUNT;}[a338_0x1934d6(0xc5)](){const _0x2b2382=a338_0x1934d6;this['binaryRecordsSizeChunk']=0x0,this[_0x2b2382(0xb4)]={'records':[],'binary':[]},this[_0x2b2382(0xc2)]=[];}[a338_0x1934d6(0xc9)](_0x5c69bd){for(const _0x1467a3 in _0x5c69bd){this['orgComponentsToDeployChunk'][_0x1467a3][ATTACHMENT_FIELD_NAME]=_0x5c69bd[_0x1467a3]['id'];}}async[a338_0x1934d6(0xf9)](_0x41bdda,_0x5ecb6d){const _0x20d497=a338_0x1934d6,{listMetadataItem:_0x22c350,sourceMemberRecord:_0x331766}=_0x41bdda,_0x5656b1={'attributes':{'type':constants_1[_0x20d497(0x105)],'binaryPartName':_0x22c350[_0x20d497(0xd0)],'binaryPartNameAlias':constants_1['BINARY_FIELD_NAME']},'Id':_0x331766[_0x20d497(0xb6)],'Name':_0x22c350[_0x20d497(0xd0)],'Description':_0x22c350[_0x20d497(0xc4)],'ContentType':CONTENT_TYPE,'ParentId':this[_0x20d497(0xbe)],'Body':_0x22c350[_0x20d497(0xd0)]},_0x18571d={'binaryFieldName':constants_1[_0x20d497(0xda)],'name':_0x22c350['fullName'],'value':stream_1[_0x20d497(0xdf)][_0x20d497(0xcc)](_0x5ecb6d)};this[_0x20d497(0xb4)][_0x20d497(0xf8)][_0x20d497(0xd1)](_0x5656b1),this[_0x20d497(0xb4)][_0x20d497(0x102)][_0x20d497(0xd1)](_0x18571d);}[a338_0x1934d6(0xf1)](_0x132491){const _0x21510a=a338_0x1934d6,_0x40147a=new jszip_1['default']();for(const _0x7e38e1 in _0x132491){_0x40147a['file'](_0x7e38e1,_0x132491[_0x7e38e1]);}return _0x40147a[_0x21510a(0xbc)]({'type':_0x21510a(0xe4)});}[a338_0x1934d6(0xe5)](_0x3e44a1,_0x249eb9){const _0x51c89e=a338_0x1934d6,_0x1808f6={'attributes':{'type':constants_1[_0x51c89e(0xd4)]},'Id':_0x249eb9['componentId'],[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xe1)]:_0x249eb9[_0x51c89e(0x101)],[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xf7)]:_0x249eb9[_0x51c89e(0xd8)],[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xf4)]:_0x249eb9[_0x51c89e(0xc6)],[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xb8)]:_0x249eb9['changedBy'],[constants_2[_0x51c89e(0xf6)]+'API_Name__c']:_0x3e44a1['fullName'],[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xea)]:_0x3e44a1[_0x51c89e(0xd0)],[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xc8)]:_0x3e44a1[_0x51c89e(0xc4)],[constants_2['FLOSUM_NAMESPACE']+_0x51c89e(0xf2)]:_0x3e44a1['fileName'],[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xc0)]:constants_1['METADATA_FOLDER_MAP']['has'](_0x3e44a1[_0x51c89e(0xc4)])||null,[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xfa)]:!![],[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xf0)]:this['targetOrgId'],[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xfc)]:this[_0x51c89e(0xcf)],[constants_2[_0x51c89e(0xf6)]+_0x51c89e(0xf5)]:_0x51c89e(0xee)};this[_0x51c89e(0xc2)][_0x51c89e(0xd1)](_0x1808f6);}async[a338_0x1934d6(0xe6)](_0x114715,_0x349ca3,_0x4f3c55){const _0x53c7df=a338_0x1934d6;try{const {listMetadataItem:_0x3e8aa6,sourceMemberRecord:_0xad7e37,files:_0x1d8d38}=_0x114715,_0x1a9174=await this['createZip'](_0x1d8d38),_0x16d559=Buffer[_0x53c7df(0xc1)](_0x1a9174);this['isReachedMaxChunk'](_0x16d559)&&await this[_0x53c7df(0xe3)](),this[_0x53c7df(0xed)]+=_0x16d559,await this[_0x53c7df(0xf9)](_0x114715,_0x1a9174),this['addOrgComponentToChunk'](_0x3e8aa6,_0xad7e37),_0x4f3c55();}catch(_0x42ea2a){_0x4f3c55(_0x42ea2a);}}async[a338_0x1934d6(0xd7)](_0x23701c){const _0x4222d5=a338_0x1934d6;try{this[_0x4222d5(0xb4)][_0x4222d5(0xf8)][_0x4222d5(0xc3)]&&this[_0x4222d5(0xc2)][_0x4222d5(0xc3)]&&await this[_0x4222d5(0xe3)](),this[_0x4222d5(0xd2)][_0x4222d5(0x103)](_0x4222d5(0xc7)+this[_0x4222d5(0xcd)]+'\x20components'),await this[_0x4222d5(0xd2)][_0x4222d5(0xb1)](),_0x23701c();}catch(_0x4c5ddd){_0x23701c(_0x4c5ddd);}}}exports[a338_0x1934d6(0xcb)]=ComponentsDeployer;function a338_0x526f(){const _0x179f9d=['CompositeBinaryDeployData','2848340HwVQZC','isNameObsolete','binary','log','MAX_BODY_SIZE','ATTACHMENT_OBJECT_NAME','583447uDzzoQ','__esModule','update','Attachment_ID__c','stream','attachmentsToDeployChunk','11276181VSRRHC','attachmentId','isReachedMaxChunk','Last_Updated_By__c','Writable','toString','handleDeployResult','generateAsync','constructor','targetOrgId','deployOrgComponents','Folder__c','byteLength','orgComponentsToDeployChunk','length','type','resetChunks','sourceMemberId','Process\x20completed\x20for\x20','Component_Type__c','populateAttachmentId','deployAttachments','ComponentsDeployer','from','successDeployedCounter','CompositeConstants','trackingSettingId','fullName','push','logger','error','ORG_COMPONENT_OBJECT_NAME','(((.+)+)+)+$','__importDefault','_final','revisionCounter','../../../../constants','BINARY_FIELD_NAME','apply','jszip','then','instance','Readable','execute','Is_Deleted__c','18hsgsWB','deploy','nodebuffer','addOrgComponentToChunk','_write','search','1341537FdukAD','4ZMAkUx','Name__c','682168SYuLFC','RestSimpleDeployData','binaryRecordsSizeChunk','Retrieved','apiVersion','OrganisationName__c','createZip','Label__c','1324216gqzXtO','Source_Member_Id__c','Status__c','FLOSUM_NAMESPACE','Revision_Counter__c','records','addAttachmentToChunk','Is_Retrieved__c','1458177KhGEhZ','Tracking_Setting__c','defineProperty','../../constants'];a338_0x526f=function(){return _0x179f9d;};return a338_0x526f();}