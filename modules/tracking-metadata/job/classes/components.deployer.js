const a327_0x4c1d66=a327_0x2eca;(function(_0x4faef7,_0x332b85){const _0x57c736=a327_0x2eca,_0x1a5edd=_0x4faef7();while(!![]){try{const _0x4ba621=-parseInt(_0x57c736(0x17e))/0x1*(-parseInt(_0x57c736(0x19a))/0x2)+-parseInt(_0x57c736(0x193))/0x3*(-parseInt(_0x57c736(0x186))/0x4)+-parseInt(_0x57c736(0x196))/0x5*(-parseInt(_0x57c736(0x185))/0x6)+-parseInt(_0x57c736(0x16b))/0x7+parseInt(_0x57c736(0x156))/0x8+parseInt(_0x57c736(0x154))/0x9+parseInt(_0x57c736(0x152))/0xa*(parseInt(_0x57c736(0x161))/0xb);if(_0x4ba621===_0x332b85)break;else _0x1a5edd['push'](_0x1a5edd['shift']());}catch(_0x31b189){_0x1a5edd['push'](_0x1a5edd['shift']());}}}(a327_0x2166,0x6e806));function a327_0x2eca(_0x33ae81,_0xedb6cb){const _0x20cf5a=a327_0x2166();return a327_0x2eca=function(_0x5e331c,_0x570581){_0x5e331c=_0x5e331c-0x14b;let _0x21667d=_0x20cf5a[_0x5e331c];return _0x21667d;},a327_0x2eca(_0x33ae81,_0xedb6cb);}const a327_0x570581=(function(){let _0x164c99=!![];return function(_0x319627,_0x235e4e){const _0x2c9b2f=_0x164c99?function(){const _0x4a1d4c=a327_0x2eca;if(_0x235e4e){const _0x200c4f=_0x235e4e[_0x4a1d4c(0x187)](_0x319627,arguments);return _0x235e4e=null,_0x200c4f;}}:function(){};return _0x164c99=![],_0x2c9b2f;};}()),a327_0x5e331c=a327_0x570581(this,function(){const _0x16e711=a327_0x2eca;return a327_0x5e331c['toString']()[_0x16e711(0x151)](_0x16e711(0x19e))[_0x16e711(0x18f)]()['constructor'](a327_0x5e331c)[_0x16e711(0x151)](_0x16e711(0x19e));});a327_0x5e331c();function a327_0x2166(){const _0x3072e9=['Writable','file','trackingSettingId','revisionCounter','ORG_COMPONENT_OBJECT_NAME','CompositeBinaryDeployData','update','successDeployedCounter','4379935gsZbyU','populateAttachmentId','Is_Retrieved__c','Source_Member_Id__c','__esModule','\x20components','Process\x20completed\x20for\x20','isReachedMaxChunk','push','changedBy','Attachment_ID__c','deployOrgComponents','binaryRecordsSizeChunk','attachmentId','createZip','deploy','apiVersion','../../../../constants','execute','1InvCbh','generateAsync','addAttachmentToChunk','__importDefault','BINARY_FIELD_NAME','ComponentsDeployer','targetOrgId','1452TtsKJH','8388lApUXo','apply','log','Label__c','deployAttachments','nodebuffer','Name__c','handleDeployResult','RestSimpleDeployData','toString','ATTACHMENT_OBJECT_NAME','resetChunks','records','21cOABlw','logger','METADATA_FOLDER_MAP','2745gWUSSM','../../constants','attachmentsToDeployChunk','jszip','236386eDDqFO','fullName','Revision_Counter__c','Readable','(((.+)+)+)+$','Status__c','instance','addOrgComponentToChunk','has','type','@flosum/salesforce','FLOSUM_NAMESPACE','search','13370fQcHpM','application/zip','3162141ZuStMP','from','1240536JxYhzC','default','Folder__c','length','defineProperty','stream','_write','sourceMemberId','error','orgComponentsToDeployChunk','then','2519IywIiD','OrganisationName__c'];a327_0x2166=function(){return _0x3072e9;};return a327_0x2166();}'use strict';var __importDefault=this&&this[a327_0x4c1d66(0x181)]||function(_0x354449){const _0xa30f26=a327_0x4c1d66;return _0x354449&&_0x354449[_0xa30f26(0x16f)]?_0x354449:{'default':_0x354449};};Object[a327_0x4c1d66(0x15a)](exports,a327_0x4c1d66(0x16f),{'value':!![]}),exports['ComponentsDeployer']=void 0x0;const salesforce_1=require(a327_0x4c1d66(0x14f)),constants_1=require(a327_0x4c1d66(0x197)),stream_1=require(a327_0x4c1d66(0x15b)),jszip_1=__importDefault(require(a327_0x4c1d66(0x199))),constants_2=require(a327_0x4c1d66(0x17c)),MAX_COMPOSITE_CHUNK_COUNT=0xc8,EXTERNAL_ID_FIELD='Id',ATTACHMENT_FIELD_NAME=constants_2[a327_0x4c1d66(0x150)]+a327_0x4c1d66(0x175),CONTENT_TYPE=a327_0x4c1d66(0x153);class ComponentsDeployer extends stream_1[a327_0x4c1d66(0x163)]{constructor({apiVersion:_0x16cd32,instance:_0x2b0e4f,logger:_0x520ce8,targetOrgId:_0x2f89e8,trackingSettingId:_0x2c675d}){const _0x2c5ffd=a327_0x4c1d66;super({'objectMode':!![]}),this[_0x2c5ffd(0x198)]={'records':[],'binary':[]},this[_0x2c5ffd(0x177)]=0x0,this[_0x2c5ffd(0x15f)]=[],this['successDeployedCounter']=0x0,this[_0x2c5ffd(0x17b)]=_0x16cd32,this[_0x2c5ffd(0x14b)]=_0x2b0e4f,this[_0x2c5ffd(0x194)]=_0x520ce8,this[_0x2c5ffd(0x184)]=_0x2f89e8,this[_0x2c5ffd(0x165)]=_0x2c675d;}async[a327_0x4c1d66(0x17a)](){const _0x4eb096=a327_0x4c1d66;await this[_0x4eb096(0x18a)]()[_0x4eb096(0x160)](_0x435e81=>this[_0x4eb096(0x16c)](_0x435e81))[_0x4eb096(0x160)](()=>this[_0x4eb096(0x176)]())[_0x4eb096(0x160)](_0x58b629=>this[_0x4eb096(0x18d)](_0x58b629)),this['resetChunks']();}['deployAttachments'](){const _0x3a9989=a327_0x4c1d66,_0x27e186=new salesforce_1[(_0x3a9989(0x168))]({'instance':this[_0x3a9989(0x14b)],'objectName':constants_1['ATTACHMENT_OBJECT_NAME'],'externalIdField':EXTERNAL_ID_FIELD,'allOrNone':![],'api':this[_0x3a9989(0x17b)]});return _0x27e186[_0x3a9989(0x17d)](this[_0x3a9989(0x198)]);}[a327_0x4c1d66(0x176)](){const _0x440885=a327_0x4c1d66,_0x547404=new salesforce_1[(_0x440885(0x18e))]({'instance':this[_0x440885(0x14b)],'objectName':constants_1[_0x440885(0x167)],'api':this['apiVersion'],'allOrNone':![],'externalIdField':'Id'});return _0x547404[_0x440885(0x17d)]({'records':this[_0x440885(0x15f)]});}async['handleDeployResult'](_0x211418){const _0x5c9528=a327_0x4c1d66;for(const {success:_0x2f5e8a,error:_0xa3a219}of _0x211418){if(_0x2f5e8a){this[_0x5c9528(0x16a)]++;continue;}_0xa3a219&&this['logger'][_0x5c9528(0x15e)](_0xa3a219);}}[a327_0x4c1d66(0x172)](_0x58ab5f){const _0x31bc66=a327_0x4c1d66;return _0x58ab5f+this[_0x31bc66(0x177)]>=salesforce_1['CompositeConstants']['MAX_BODY_SIZE']||this[_0x31bc66(0x198)][_0x31bc66(0x192)][_0x31bc66(0x159)]===MAX_COMPOSITE_CHUNK_COUNT;}[a327_0x4c1d66(0x191)](){const _0x27fa50=a327_0x4c1d66;this[_0x27fa50(0x177)]=0x0,this[_0x27fa50(0x198)]={'records':[],'binary':[]},this[_0x27fa50(0x15f)]=[];}[a327_0x4c1d66(0x16c)](_0x3132da){const _0x298907=a327_0x4c1d66;for(const _0x5262c6 in _0x3132da){this[_0x298907(0x15f)][_0x5262c6][ATTACHMENT_FIELD_NAME]=_0x3132da[_0x5262c6]['id'];}}async['addAttachmentToChunk'](_0x5a8ad5,_0x260079){const _0x338590=a327_0x4c1d66,{listMetadataItem:_0x3d1a7f,sourceMemberRecord:_0x56c14f}=_0x5a8ad5,_0x22f254={'attributes':{'type':constants_1[_0x338590(0x190)],'binaryPartName':_0x3d1a7f['fullName'],'binaryPartNameAlias':constants_1[_0x338590(0x182)]},'Id':_0x56c14f[_0x338590(0x178)],'Name':_0x3d1a7f[_0x338590(0x19b)],'Description':_0x3d1a7f[_0x338590(0x14e)],'ContentType':CONTENT_TYPE,'ParentId':this['targetOrgId'],'Body':_0x3d1a7f[_0x338590(0x19b)]},_0x330475={'binaryFieldName':constants_1[_0x338590(0x182)],'name':_0x3d1a7f[_0x338590(0x19b)],'value':stream_1[_0x338590(0x19d)][_0x338590(0x155)](_0x260079)};this['attachmentsToDeployChunk'][_0x338590(0x192)][_0x338590(0x173)](_0x22f254),this[_0x338590(0x198)]['binary'][_0x338590(0x173)](_0x330475);}[a327_0x4c1d66(0x179)](_0x3a242d){const _0x42eae1=a327_0x4c1d66,_0x1d9162=new jszip_1[(_0x42eae1(0x157))]();for(const _0x14575a in _0x3a242d){_0x1d9162[_0x42eae1(0x164)](_0x14575a,_0x3a242d[_0x14575a]);}return _0x1d9162[_0x42eae1(0x17f)]({'type':_0x42eae1(0x18b)});}[a327_0x4c1d66(0x14c)](_0x2d9e54,_0x3bb74c){const _0x338294=a327_0x4c1d66,_0x5e2454={'attributes':{'type':constants_1[_0x338294(0x167)]},'Id':_0x3bb74c['componentId'],[constants_2['FLOSUM_NAMESPACE']+'Is_Deleted__c']:_0x3bb74c['isNameObsolete'],[constants_2[_0x338294(0x150)]+_0x338294(0x19c)]:_0x3bb74c[_0x338294(0x166)],[constants_2[_0x338294(0x150)]+_0x338294(0x16e)]:_0x3bb74c[_0x338294(0x15d)],[constants_2['FLOSUM_NAMESPACE']+'Last_Updated_By__c']:_0x3bb74c[_0x338294(0x174)],[constants_2[_0x338294(0x150)]+'API_Name__c']:_0x2d9e54['fullName'],[constants_2['FLOSUM_NAMESPACE']+_0x338294(0x18c)]:_0x2d9e54['fullName'],[constants_2[_0x338294(0x150)]+'Component_Type__c']:_0x2d9e54['type'],[constants_2[_0x338294(0x150)]+_0x338294(0x189)]:_0x2d9e54['fileName'],[constants_2['FLOSUM_NAMESPACE']+_0x338294(0x158)]:constants_1[_0x338294(0x195)][_0x338294(0x14d)](_0x2d9e54[_0x338294(0x14e)])||null,[constants_2['FLOSUM_NAMESPACE']+_0x338294(0x16d)]:!![],[constants_2[_0x338294(0x150)]+_0x338294(0x162)]:this[_0x338294(0x184)],[constants_2[_0x338294(0x150)]+'Tracking_Setting__c']:this['trackingSettingId'],[constants_2[_0x338294(0x150)]+_0x338294(0x19f)]:'Retrieved'};this[_0x338294(0x15f)]['push'](_0x5e2454);}async[a327_0x4c1d66(0x15c)](_0x10f4e6,_0x2d1530,_0xd49091){const _0xdd345e=a327_0x4c1d66;try{const {listMetadataItem:_0x4db8e1,sourceMemberRecord:_0x576e66,files:_0x17a9b8}=_0x10f4e6,_0x327865=await this['createZip'](_0x17a9b8),_0x2519ed=Buffer['byteLength'](_0x327865);this['isReachedMaxChunk'](_0x2519ed)&&await this[_0xdd345e(0x17a)](),this[_0xdd345e(0x177)]+=_0x2519ed,await this[_0xdd345e(0x180)](_0x10f4e6,_0x327865),this[_0xdd345e(0x14c)](_0x4db8e1,_0x576e66),_0xd49091();}catch(_0x1d68c5){_0xd49091(_0x1d68c5);}}async['_final'](_0x1c2d0f){const _0x367200=a327_0x4c1d66;try{this['attachmentsToDeployChunk'][_0x367200(0x192)][_0x367200(0x159)]&&this[_0x367200(0x15f)]['length']&&await this['deploy'](),this[_0x367200(0x194)][_0x367200(0x188)](_0x367200(0x171)+this[_0x367200(0x16a)]+_0x367200(0x170)),await this[_0x367200(0x194)][_0x367200(0x169)](),_0x1c2d0f();}catch(_0x56dd29){_0x1c2d0f(_0x56dd29);}}}exports[a327_0x4c1d66(0x183)]=ComponentsDeployer;