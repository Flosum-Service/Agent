const a295_0x202e84=a295_0x4035;(function(_0x22b78b,_0x5b6d78){const _0xe54cd5=a295_0x4035,_0x1e881d=_0x22b78b();while(!![]){try{const _0x104c48=-parseInt(_0xe54cd5(0x96))/0x1*(-parseInt(_0xe54cd5(0xc7))/0x2)+parseInt(_0xe54cd5(0xcc))/0x3*(parseInt(_0xe54cd5(0xbe))/0x4)+-parseInt(_0xe54cd5(0xda))/0x5+parseInt(_0xe54cd5(0xba))/0x6+parseInt(_0xe54cd5(0xd2))/0x7*(parseInt(_0xe54cd5(0xed))/0x8)+parseInt(_0xe54cd5(0xa9))/0x9*(-parseInt(_0xe54cd5(0xcf))/0xa)+-parseInt(_0xe54cd5(0xc0))/0xb;if(_0x104c48===_0x5b6d78)break;else _0x1e881d['push'](_0x1e881d['shift']());}catch(_0x25feca){_0x1e881d['push'](_0x1e881d['shift']());}}}(a295_0x291b,0x381e9));const a295_0x186502=(function(){let _0x1b937b=!![];return function(_0x543026,_0x4df806){const _0x502a09=_0x1b937b?function(){if(_0x4df806){const _0x24d5a3=_0x4df806['apply'](_0x543026,arguments);return _0x4df806=null,_0x24d5a3;}}:function(){};return _0x1b937b=![],_0x502a09;};}()),a295_0x3f2d8e=a295_0x186502(this,function(){const _0x449cd=a295_0x4035;return a295_0x3f2d8e[_0x449cd(0xdc)]()[_0x449cd(0xa3)]('(((.+)+)+)+$')[_0x449cd(0xdc)]()[_0x449cd(0xe4)](a295_0x3f2d8e)['search'](_0x449cd(0xa2));});a295_0x3f2d8e();function a295_0x291b(){const _0x2cf718=['instance','constructor','targetOrgId','Readable','stream','__importDefault','BINARY_FIELD_NAME','componentId','Is_Retrieved__c','length','1068472vKyaQC','4zLabXa','trackingSettingId','type','ComponentsDeployer','FLOSUM_NAMESPACE','deployOrgComponents','apiVersion','isNameObsolete','isReachedMaxChunk','../../../../constants','binaryRecordsSizeChunk','Process\x20completed\x20for\x20','(((.+)+)+)+$','search','Tracking_Setting__c','CompositeConstants','populateAttachmentId','Retrieved','RestSimpleDeployData','135GxsFZI','then','fileName','Name__c','default','revisionCounter','\x20components','METADATA_FOLDER_MAP','ORG_COMPONENT_OBJECT_NAME','attachmentsToDeployChunk','execute','fullName','orgComponentsToDeployChunk','_write','Label__c','Source_Member_Id__c','has','2632776yxBbvP','../../constants','application/zip','file','12MgkaKX','generateAsync','2173171FuuQdX','push','byteLength','@flosum/salesforce','MAX_BODY_SIZE','_final','Is_Deleted__c','137840rEteGk','jszip','__esModule','from','ATTACHMENT_OBJECT_NAME','370449emUhAX','changedBy','API_Name__c','246230ZoxRag','nodebuffer','update','7CNPION','logger','resetChunks','binary','addAttachmentToChunk','handleDeployResult','attachmentId','createZip','2108565AqIuoN','Status__c','toString','sourceMemberId','log','deployAttachments','successDeployedCounter','records','deploy'];a295_0x291b=function(){return _0x2cf718;};return a295_0x291b();}'use strict';var __importDefault=this&&this[a295_0x202e84(0xe8)]||function(_0xc7f3e4){return _0xc7f3e4&&_0xc7f3e4['__esModule']?_0xc7f3e4:{'default':_0xc7f3e4};};function a295_0x4035(_0x1744ba,_0x113073){const _0x2b3d04=a295_0x291b();return a295_0x4035=function(_0x3f2d8e,_0x186502){_0x3f2d8e=_0x3f2d8e-0x96;let _0x291bc0=_0x2b3d04[_0x3f2d8e];return _0x291bc0;},a295_0x4035(_0x1744ba,_0x113073);}Object['defineProperty'](exports,a295_0x202e84(0xc9),{'value':!![]}),exports['ComponentsDeployer']=void 0x0;const salesforce_1=require(a295_0x202e84(0xc3)),constants_1=require(a295_0x202e84(0xbb)),stream_1=require(a295_0x202e84(0xe7)),jszip_1=__importDefault(require(a295_0x202e84(0xc8))),constants_2=require(a295_0x202e84(0x9f)),MAX_COMPOSITE_CHUNK_COUNT=0xc8,EXTERNAL_ID_FIELD='Id',ATTACHMENT_FIELD_NAME=constants_2[a295_0x202e84(0x9a)]+'Attachment_ID__c',CONTENT_TYPE=a295_0x202e84(0xbc);class ComponentsDeployer extends stream_1['Writable']{constructor({apiVersion:_0x357bae,instance:_0xd35105,logger:_0x4fcb94,targetOrgId:_0x65abc6,trackingSettingId:_0x2bf2e3}){const _0x2bd58a=a295_0x202e84;super({'objectMode':!![]}),this[_0x2bd58a(0xb2)]={'records':[],'binary':[]},this[_0x2bd58a(0xa0)]=0x0,this[_0x2bd58a(0xb5)]=[],this[_0x2bd58a(0xe0)]=0x0,this[_0x2bd58a(0x9c)]=_0x357bae,this[_0x2bd58a(0xe3)]=_0xd35105,this[_0x2bd58a(0xd3)]=_0x4fcb94,this[_0x2bd58a(0xe5)]=_0x65abc6,this[_0x2bd58a(0x97)]=_0x2bf2e3;}async[a295_0x202e84(0xe2)](){const _0x576f47=a295_0x202e84;await this[_0x576f47(0xdf)]()[_0x576f47(0xaa)](_0x11736b=>this[_0x576f47(0xa6)](_0x11736b))[_0x576f47(0xaa)](()=>this[_0x576f47(0x9b)]())[_0x576f47(0xaa)](_0x1d01eb=>this[_0x576f47(0xd7)](_0x1d01eb)),this['resetChunks']();}[a295_0x202e84(0xdf)](){const _0x3ee4c9=a295_0x202e84,_0x1fe40b=new salesforce_1['CompositeBinaryDeployData']({'instance':this['instance'],'objectName':constants_1[_0x3ee4c9(0xcb)],'externalIdField':EXTERNAL_ID_FIELD,'allOrNone':![],'api':this[_0x3ee4c9(0x9c)]});return _0x1fe40b['execute'](this[_0x3ee4c9(0xb2)]);}[a295_0x202e84(0x9b)](){const _0x1f8d15=a295_0x202e84,_0x43026c=new salesforce_1[(_0x1f8d15(0xa8))]({'instance':this['instance'],'objectName':constants_1[_0x1f8d15(0xb1)],'api':this[_0x1f8d15(0x9c)],'allOrNone':![],'externalIdField':'Id'});return _0x43026c[_0x1f8d15(0xb3)]({'records':this[_0x1f8d15(0xb5)]});}async[a295_0x202e84(0xd7)](_0x50b5fb){const _0x39061b=a295_0x202e84;for(const {success:_0x1625b4,error:_0x5ebae9}of _0x50b5fb){if(_0x1625b4){this[_0x39061b(0xe0)]++;continue;}_0x5ebae9&&this[_0x39061b(0xd3)]['error'](_0x5ebae9);}}[a295_0x202e84(0x9e)](_0x5904f1){const _0x53d05d=a295_0x202e84;return _0x5904f1+this[_0x53d05d(0xa0)]>=salesforce_1[_0x53d05d(0xa5)][_0x53d05d(0xc4)]||this['attachmentsToDeployChunk']['records']['length']===MAX_COMPOSITE_CHUNK_COUNT;}[a295_0x202e84(0xd4)](){const _0xd20a2a=a295_0x202e84;this[_0xd20a2a(0xa0)]=0x0,this[_0xd20a2a(0xb2)]={'records':[],'binary':[]},this['orgComponentsToDeployChunk']=[];}[a295_0x202e84(0xa6)](_0x22c986){const _0x282a21=a295_0x202e84;for(const _0x5f5a68 in _0x22c986){this[_0x282a21(0xb5)][_0x5f5a68][ATTACHMENT_FIELD_NAME]=_0x22c986[_0x5f5a68]['id'];}}async[a295_0x202e84(0xd6)](_0x3f39ab,_0x319881){const _0x26aee7=a295_0x202e84,{listMetadataItem:_0x361032,sourceMemberRecord:_0x3b4f57}=_0x3f39ab,_0x2f449e={'attributes':{'type':constants_1['ATTACHMENT_OBJECT_NAME'],'binaryPartName':_0x361032[_0x26aee7(0xb4)],'binaryPartNameAlias':constants_1[_0x26aee7(0xe9)]},'Id':_0x3b4f57[_0x26aee7(0xd8)],'Name':_0x361032[_0x26aee7(0xb4)],'Description':_0x361032[_0x26aee7(0x98)],'ContentType':CONTENT_TYPE,'ParentId':this[_0x26aee7(0xe5)],'Body':_0x361032[_0x26aee7(0xb4)]},_0x259796={'binaryFieldName':constants_1[_0x26aee7(0xe9)],'name':_0x361032[_0x26aee7(0xb4)],'value':stream_1[_0x26aee7(0xe6)][_0x26aee7(0xca)](_0x319881)};this[_0x26aee7(0xb2)][_0x26aee7(0xe1)][_0x26aee7(0xc1)](_0x2f449e),this[_0x26aee7(0xb2)][_0x26aee7(0xd5)][_0x26aee7(0xc1)](_0x259796);}['createZip'](_0x562be9){const _0x3ff3eb=a295_0x202e84,_0x1df572=new jszip_1[(_0x3ff3eb(0xad))]();for(const _0x567965 in _0x562be9){_0x1df572[_0x3ff3eb(0xbd)](_0x567965,_0x562be9[_0x567965]);}return _0x1df572[_0x3ff3eb(0xbf)]({'type':_0x3ff3eb(0xd0)});}['addOrgComponentToChunk'](_0x41bec4,_0x220ed7){const _0xb5b87b=a295_0x202e84,_0x3b9aa2={'attributes':{'type':constants_1[_0xb5b87b(0xb1)]},'Id':_0x220ed7[_0xb5b87b(0xea)],[constants_2[_0xb5b87b(0x9a)]+_0xb5b87b(0xc6)]:_0x220ed7[_0xb5b87b(0x9d)],[constants_2[_0xb5b87b(0x9a)]+'Revision_Counter__c']:_0x220ed7[_0xb5b87b(0xae)],[constants_2[_0xb5b87b(0x9a)]+_0xb5b87b(0xb8)]:_0x220ed7[_0xb5b87b(0xdd)],[constants_2[_0xb5b87b(0x9a)]+'Last_Updated_By__c']:_0x220ed7[_0xb5b87b(0xcd)],[constants_2[_0xb5b87b(0x9a)]+_0xb5b87b(0xce)]:_0x41bec4[_0xb5b87b(0xb4)],[constants_2[_0xb5b87b(0x9a)]+_0xb5b87b(0xac)]:_0x41bec4[_0xb5b87b(0xb4)],[constants_2[_0xb5b87b(0x9a)]+'Component_Type__c']:_0x41bec4['type'],[constants_2[_0xb5b87b(0x9a)]+_0xb5b87b(0xb7)]:_0x41bec4[_0xb5b87b(0xab)],[constants_2[_0xb5b87b(0x9a)]+'Folder__c']:constants_1[_0xb5b87b(0xb0)][_0xb5b87b(0xb9)](_0x41bec4[_0xb5b87b(0x98)])||null,[constants_2[_0xb5b87b(0x9a)]+_0xb5b87b(0xeb)]:!![],[constants_2[_0xb5b87b(0x9a)]+'OrganisationName__c']:this[_0xb5b87b(0xe5)],[constants_2[_0xb5b87b(0x9a)]+_0xb5b87b(0xa4)]:this[_0xb5b87b(0x97)],[constants_2['FLOSUM_NAMESPACE']+_0xb5b87b(0xdb)]:_0xb5b87b(0xa7)};this[_0xb5b87b(0xb5)][_0xb5b87b(0xc1)](_0x3b9aa2);}async[a295_0x202e84(0xb6)](_0x415ddc,_0x574fbf,_0xbfc61e){const _0x4ae0a6=a295_0x202e84;try{const {listMetadataItem:_0x4d6343,sourceMemberRecord:_0x1f924f,files:_0x9fde59}=_0x415ddc,_0x1e9bb2=await this[_0x4ae0a6(0xd9)](_0x9fde59),_0x3b0c9c=Buffer[_0x4ae0a6(0xc2)](_0x1e9bb2);this[_0x4ae0a6(0x9e)](_0x3b0c9c)&&await this[_0x4ae0a6(0xe2)](),this[_0x4ae0a6(0xa0)]+=_0x3b0c9c,await this[_0x4ae0a6(0xd6)](_0x415ddc,_0x1e9bb2),this['addOrgComponentToChunk'](_0x4d6343,_0x1f924f),_0xbfc61e();}catch(_0x16b525){_0xbfc61e(_0x16b525);}}async[a295_0x202e84(0xc5)](_0x2032eb){const _0x790b04=a295_0x202e84;try{this[_0x790b04(0xb2)][_0x790b04(0xe1)][_0x790b04(0xec)]&&this[_0x790b04(0xb5)]['length']&&await this[_0x790b04(0xe2)](),this['logger'][_0x790b04(0xde)](_0x790b04(0xa1)+this[_0x790b04(0xe0)]+_0x790b04(0xaf)),await this[_0x790b04(0xd3)][_0x790b04(0xd1)](),_0x2032eb();}catch(_0x4a2a9b){_0x2032eb(_0x4a2a9b);}}}exports[a295_0x202e84(0x99)]=ComponentsDeployer;