const a338_0x24021c=a338_0x35e5;(function(_0x2bae64,_0x36c7c5){const _0x5ab4e=a338_0x35e5,_0x4ed65f=_0x2bae64();while(!![]){try{const _0x2c9482=-parseInt(_0x5ab4e(0x166))/0x1*(parseInt(_0x5ab4e(0x198))/0x2)+-parseInt(_0x5ab4e(0x183))/0x3*(parseInt(_0x5ab4e(0x169))/0x4)+parseInt(_0x5ab4e(0x1a2))/0x5*(-parseInt(_0x5ab4e(0x1a3))/0x6)+parseInt(_0x5ab4e(0x1b8))/0x7+-parseInt(_0x5ab4e(0x17c))/0x8*(parseInt(_0x5ab4e(0x186))/0x9)+-parseInt(_0x5ab4e(0x1a4))/0xa*(parseInt(_0x5ab4e(0x180))/0xb)+-parseInt(_0x5ab4e(0x171))/0xc*(-parseInt(_0x5ab4e(0x1b2))/0xd);if(_0x2c9482===_0x36c7c5)break;else _0x4ed65f['push'](_0x4ed65f['shift']());}catch(_0x480609){_0x4ed65f['push'](_0x4ed65f['shift']());}}}(a338_0x362b,0xcee57));const a338_0x157274=(function(){let _0x3fdb45=!![];return function(_0xaadf18,_0x176dd7){const _0x4f84af=_0x3fdb45?function(){const _0x1922c9=a338_0x35e5;if(_0x176dd7){const _0x258183=_0x176dd7[_0x1922c9(0x1ad)](_0xaadf18,arguments);return _0x176dd7=null,_0x258183;}}:function(){};return _0x3fdb45=![],_0x4f84af;};}()),a338_0x39515a=a338_0x157274(this,function(){const _0x11df35=a338_0x35e5;return a338_0x39515a[_0x11df35(0x1a5)]()[_0x11df35(0x18f)](_0x11df35(0x19b))['toString']()[_0x11df35(0x1b1)](a338_0x39515a)['search'](_0x11df35(0x19b));});function a338_0x362b(){const _0x3699cf=['handleDeployResult','_write','default','2242jERYBE','deployOrgComponents','Readable','346972xOyxur','MAX_BODY_SIZE','stream','createZip','isReachedMaxChunk','Folder__c','Is_Retrieved__c','byteLength','1452444sfAdag','__importDefault','ComponentsDeployer','CompositeBinaryDeployData','isNameObsolete','update','ORG_COMPONENT_OBJECT_NAME','trackingSettingId','orgComponentsToDeployChunk','componentId','FLOSUM_NAMESPACE','664OalvuI','execute','Retrieved','apiVersion','3459544SBzwvv','CompositeConstants','BINARY_FIELD_NAME','57tVPQwD','file','Source_Member_Id__c','122355Crmnhx','fullName','Status__c','jszip','targetOrgId','application/zip','instance','OrganisationName__c','logger','search','attachmentId','addAttachmentToChunk','push','../../constants','length','records','../../../../constants','then','1154DgINzZ','successDeployedCounter','sourceMemberId','(((.+)+)+)+$','Is_Deleted__c','ATTACHMENT_OBJECT_NAME','revisionCounter','resetChunks','attachmentsToDeployChunk','type','2207285Ltmwjz','6XinnPo','10QFxfSf','toString','Process\x20completed\x20for\x20','populateAttachmentId','binaryRecordsSizeChunk','error','__esModule','addOrgComponentToChunk','log','apply','Last_Updated_By__c','changedBy','Tracking_Setting__c','constructor','442yaDRQh','deployAttachments','Label__c','defineProperty','nodebuffer','deploy','10908002xqHwzM','@flosum/salesforce'];a338_0x362b=function(){return _0x3699cf;};return a338_0x362b();}a338_0x39515a();'use strict';var __importDefault=this&&this[a338_0x24021c(0x172)]||function(_0x25aa66){const _0x1d7426=a338_0x24021c;return _0x25aa66&&_0x25aa66[_0x1d7426(0x1aa)]?_0x25aa66:{'default':_0x25aa66};};function a338_0x35e5(_0x3b325b,_0x2ab088){const _0x483b5e=a338_0x362b();return a338_0x35e5=function(_0x39515a,_0x157274){_0x39515a=_0x39515a-0x162;let _0x362b91=_0x483b5e[_0x39515a];return _0x362b91;},a338_0x35e5(_0x3b325b,_0x2ab088);}Object[a338_0x24021c(0x1b5)](exports,a338_0x24021c(0x1aa),{'value':!![]}),exports[a338_0x24021c(0x173)]=void 0x0;const salesforce_1=require(a338_0x24021c(0x162)),constants_1=require(a338_0x24021c(0x193)),stream_1=require(a338_0x24021c(0x16b)),jszip_1=__importDefault(require(a338_0x24021c(0x189))),constants_2=require(a338_0x24021c(0x196)),MAX_COMPOSITE_CHUNK_COUNT=0xc8,EXTERNAL_ID_FIELD='Id',ATTACHMENT_FIELD_NAME=constants_2[a338_0x24021c(0x17b)]+'Attachment_ID__c',CONTENT_TYPE=a338_0x24021c(0x18b);class ComponentsDeployer extends stream_1['Writable']{constructor({apiVersion:_0x2d6b09,instance:_0x45f453,logger:_0x553d4c,targetOrgId:_0x572623,trackingSettingId:_0x1f3f62}){const _0x2408ee=a338_0x24021c;super({'objectMode':!![]}),this[_0x2408ee(0x1a0)]={'records':[],'binary':[]},this[_0x2408ee(0x1a8)]=0x0,this[_0x2408ee(0x179)]=[],this[_0x2408ee(0x199)]=0x0,this['apiVersion']=_0x2d6b09,this[_0x2408ee(0x18c)]=_0x45f453,this[_0x2408ee(0x18e)]=_0x553d4c,this[_0x2408ee(0x18a)]=_0x572623,this[_0x2408ee(0x178)]=_0x1f3f62;}async[a338_0x24021c(0x1b7)](){const _0x21ba46=a338_0x24021c;await this[_0x21ba46(0x1b3)]()['then'](_0x4f4236=>this['populateAttachmentId'](_0x4f4236))[_0x21ba46(0x197)](()=>this[_0x21ba46(0x167)]())[_0x21ba46(0x197)](_0x47297b=>this['handleDeployResult'](_0x47297b)),this[_0x21ba46(0x19f)]();}[a338_0x24021c(0x1b3)](){const _0x5824bf=a338_0x24021c,_0xf76c27=new salesforce_1[(_0x5824bf(0x174))]({'instance':this['instance'],'objectName':constants_1[_0x5824bf(0x19d)],'externalIdField':EXTERNAL_ID_FIELD,'allOrNone':![],'api':this[_0x5824bf(0x17f)]});return _0xf76c27[_0x5824bf(0x17d)](this[_0x5824bf(0x1a0)]);}[a338_0x24021c(0x167)](){const _0x57163c=a338_0x24021c,_0x7f2013=new salesforce_1['RestSimpleDeployData']({'instance':this[_0x57163c(0x18c)],'objectName':constants_1[_0x57163c(0x177)],'api':this[_0x57163c(0x17f)],'allOrNone':![],'externalIdField':'Id'});return _0x7f2013[_0x57163c(0x17d)]({'records':this[_0x57163c(0x179)]});}async[a338_0x24021c(0x163)](_0x4a8121){const _0x747c99=a338_0x24021c;for(const {success:_0x2571a7,error:_0x5895a3}of _0x4a8121){if(_0x2571a7){this[_0x747c99(0x199)]++;continue;}_0x5895a3&&this[_0x747c99(0x18e)][_0x747c99(0x1a9)](_0x5895a3);}}[a338_0x24021c(0x16d)](_0x9c292c){const _0x482249=a338_0x24021c;return _0x9c292c+this[_0x482249(0x1a8)]>=salesforce_1[_0x482249(0x181)][_0x482249(0x16a)]||this[_0x482249(0x1a0)][_0x482249(0x195)][_0x482249(0x194)]===MAX_COMPOSITE_CHUNK_COUNT;}['resetChunks'](){const _0x32ba3f=a338_0x24021c;this[_0x32ba3f(0x1a8)]=0x0,this[_0x32ba3f(0x1a0)]={'records':[],'binary':[]},this[_0x32ba3f(0x179)]=[];}[a338_0x24021c(0x1a7)](_0x2579af){const _0x3c0075=a338_0x24021c;for(const _0x43e271 in _0x2579af){this[_0x3c0075(0x179)][_0x43e271][ATTACHMENT_FIELD_NAME]=_0x2579af[_0x43e271]['id'];}}async[a338_0x24021c(0x191)](_0x1eaf00,_0x300d8e){const _0x58ae40=a338_0x24021c,{listMetadataItem:_0x668c48,sourceMemberRecord:_0x520385}=_0x1eaf00,_0x30b872={'attributes':{'type':constants_1[_0x58ae40(0x19d)],'binaryPartName':_0x668c48['fullName'],'binaryPartNameAlias':constants_1['BINARY_FIELD_NAME']},'Id':_0x520385[_0x58ae40(0x190)],'Name':_0x668c48[_0x58ae40(0x187)],'Description':_0x668c48[_0x58ae40(0x1a1)],'ContentType':CONTENT_TYPE,'ParentId':this['targetOrgId'],'Body':_0x668c48['fullName']},_0x3cea15={'binaryFieldName':constants_1[_0x58ae40(0x182)],'name':_0x668c48[_0x58ae40(0x187)],'value':stream_1[_0x58ae40(0x168)]['from'](_0x300d8e)};this[_0x58ae40(0x1a0)][_0x58ae40(0x195)][_0x58ae40(0x192)](_0x30b872),this['attachmentsToDeployChunk']['binary'][_0x58ae40(0x192)](_0x3cea15);}['createZip'](_0x434fac){const _0x5a5d0c=a338_0x24021c,_0x41608b=new jszip_1[(_0x5a5d0c(0x165))]();for(const _0x2471a7 in _0x434fac){_0x41608b[_0x5a5d0c(0x184)](_0x2471a7,_0x434fac[_0x2471a7]);}return _0x41608b['generateAsync']({'type':_0x5a5d0c(0x1b6)});}['addOrgComponentToChunk'](_0x388c9a,_0x334ebf){const _0x5a60e1=a338_0x24021c,_0x2275a6={'attributes':{'type':constants_1['ORG_COMPONENT_OBJECT_NAME']},'Id':_0x334ebf[_0x5a60e1(0x17a)],[constants_2[_0x5a60e1(0x17b)]+_0x5a60e1(0x19c)]:_0x334ebf[_0x5a60e1(0x175)],[constants_2['FLOSUM_NAMESPACE']+'Revision_Counter__c']:_0x334ebf[_0x5a60e1(0x19e)],[constants_2[_0x5a60e1(0x17b)]+_0x5a60e1(0x185)]:_0x334ebf[_0x5a60e1(0x19a)],[constants_2[_0x5a60e1(0x17b)]+_0x5a60e1(0x1ae)]:_0x334ebf[_0x5a60e1(0x1af)],[constants_2[_0x5a60e1(0x17b)]+'API_Name__c']:_0x388c9a[_0x5a60e1(0x187)],[constants_2[_0x5a60e1(0x17b)]+'Name__c']:_0x388c9a[_0x5a60e1(0x187)],[constants_2[_0x5a60e1(0x17b)]+'Component_Type__c']:_0x388c9a['type'],[constants_2[_0x5a60e1(0x17b)]+_0x5a60e1(0x1b4)]:_0x388c9a['fileName'],[constants_2['FLOSUM_NAMESPACE']+_0x5a60e1(0x16e)]:constants_1['METADATA_FOLDER_MAP']['has'](_0x388c9a[_0x5a60e1(0x1a1)])||null,[constants_2['FLOSUM_NAMESPACE']+_0x5a60e1(0x16f)]:!![],[constants_2[_0x5a60e1(0x17b)]+_0x5a60e1(0x18d)]:this[_0x5a60e1(0x18a)],[constants_2[_0x5a60e1(0x17b)]+_0x5a60e1(0x1b0)]:this[_0x5a60e1(0x178)],[constants_2['FLOSUM_NAMESPACE']+_0x5a60e1(0x188)]:_0x5a60e1(0x17e)};this[_0x5a60e1(0x179)][_0x5a60e1(0x192)](_0x2275a6);}async[a338_0x24021c(0x164)](_0x50694c,_0x2a3383,_0x76047){const _0x2c9338=a338_0x24021c;try{const {listMetadataItem:_0x4007ac,sourceMemberRecord:_0x402028,files:_0x52a674}=_0x50694c,_0x2b15fb=await this[_0x2c9338(0x16c)](_0x52a674),_0x471694=Buffer[_0x2c9338(0x170)](_0x2b15fb);this[_0x2c9338(0x16d)](_0x471694)&&await this[_0x2c9338(0x1b7)](),this[_0x2c9338(0x1a8)]+=_0x471694,await this[_0x2c9338(0x191)](_0x50694c,_0x2b15fb),this[_0x2c9338(0x1ab)](_0x4007ac,_0x402028),_0x76047();}catch(_0x3376cc){_0x76047(_0x3376cc);}}async['_final'](_0x2b5860){const _0x236e1a=a338_0x24021c;try{this['attachmentsToDeployChunk'][_0x236e1a(0x195)][_0x236e1a(0x194)]&&this[_0x236e1a(0x179)][_0x236e1a(0x194)]&&await this[_0x236e1a(0x1b7)](),this[_0x236e1a(0x18e)][_0x236e1a(0x1ac)](_0x236e1a(0x1a6)+this['successDeployedCounter']+'\x20components'),await this[_0x236e1a(0x18e)][_0x236e1a(0x176)](),_0x2b5860();}catch(_0x457a3f){_0x2b5860(_0x457a3f);}}}exports[a338_0x24021c(0x173)]=ComponentsDeployer;