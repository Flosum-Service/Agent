const a339_0x4da40e=a339_0x3be1;(function(_0x39e867,_0x5f4b8b){const _0x1dbb57=a339_0x3be1,_0x27fc85=_0x39e867();while(!![]){try{const _0x1d9a88=-parseInt(_0x1dbb57(0x212))/0x1*(-parseInt(_0x1dbb57(0x226))/0x2)+parseInt(_0x1dbb57(0x1f5))/0x3+-parseInt(_0x1dbb57(0x1f4))/0x4*(parseInt(_0x1dbb57(0x20f))/0x5)+parseInt(_0x1dbb57(0x21d))/0x6*(parseInt(_0x1dbb57(0x217))/0x7)+-parseInt(_0x1dbb57(0x1ff))/0x8+-parseInt(_0x1dbb57(0x1e2))/0x9+-parseInt(_0x1dbb57(0x1dc))/0xa*(parseInt(_0x1dbb57(0x202))/0xb);if(_0x1d9a88===_0x5f4b8b)break;else _0x27fc85['push'](_0x27fc85['shift']());}catch(_0x36ed01){_0x27fc85['push'](_0x27fc85['shift']());}}}(a339_0x1065,0x644b8));function a339_0x3be1(_0x25075f,_0x326746){const _0x2bd16a=a339_0x1065();return a339_0x3be1=function(_0x17a873,_0x5eda68){_0x17a873=_0x17a873-0x1d5;let _0x106568=_0x2bd16a[_0x17a873];return _0x106568;},a339_0x3be1(_0x25075f,_0x326746);}const a339_0x5eda68=(function(){let _0x1c49a6=!![];return function(_0x4c25d8,_0x14da26){const _0x5c4c72=_0x1c49a6?function(){const _0x2cda54=a339_0x3be1;if(_0x14da26){const _0x16b0fc=_0x14da26[_0x2cda54(0x1f6)](_0x4c25d8,arguments);return _0x14da26=null,_0x16b0fc;}}:function(){};return _0x1c49a6=![],_0x5c4c72;};}()),a339_0x17a873=a339_0x5eda68(this,function(){const _0x4e687e=a339_0x3be1;return a339_0x17a873['toString']()[_0x4e687e(0x21b)](_0x4e687e(0x228))[_0x4e687e(0x208)]()[_0x4e687e(0x1df)](a339_0x17a873)[_0x4e687e(0x21b)](_0x4e687e(0x228));});a339_0x17a873();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x9a2210){return _0x9a2210&&_0x9a2210['__esModule']?_0x9a2210:{'default':_0x9a2210};};Object[a339_0x4da40e(0x203)](exports,a339_0x4da40e(0x1ec),{'value':!![]}),exports[a339_0x4da40e(0x209)]=void 0x0;const salesforce_1=require(a339_0x4da40e(0x216)),constants_1=require(a339_0x4da40e(0x1ed)),stream_1=require(a339_0x4da40e(0x20c)),jszip_1=__importDefault(require(a339_0x4da40e(0x200))),constants_2=require(a339_0x4da40e(0x1da)),MAX_COMPOSITE_CHUNK_COUNT=0xc8,EXTERNAL_ID_FIELD='Id',ATTACHMENT_FIELD_NAME=constants_2[a339_0x4da40e(0x206)]+a339_0x4da40e(0x211),CONTENT_TYPE=a339_0x4da40e(0x213);class ComponentsDeployer extends stream_1[a339_0x4da40e(0x1f7)]{constructor({apiVersion:_0x374b22,instance:_0x1e7a31,logger:_0x5ec705,targetOrgId:_0x57d66c,trackingSettingId:_0x462155}){const _0x418580=a339_0x4da40e;super({'objectMode':!![]}),this[_0x418580(0x1d8)]={'records':[],'binary':[]},this[_0x418580(0x204)]=0x0,this[_0x418580(0x1f3)]=[],this[_0x418580(0x225)]=0x0,this[_0x418580(0x210)]=_0x374b22,this[_0x418580(0x1e0)]=_0x1e7a31,this['logger']=_0x5ec705,this['targetOrgId']=_0x57d66c,this['trackingSettingId']=_0x462155;}async[a339_0x4da40e(0x20a)](){const _0x426e2d=a339_0x4da40e;await this[_0x426e2d(0x21e)]()[_0x426e2d(0x20e)](_0x5ced5c=>this[_0x426e2d(0x220)](_0x5ced5c))['then'](()=>this[_0x426e2d(0x1fc)]())[_0x426e2d(0x20e)](_0x4cbf42=>this[_0x426e2d(0x1e5)](_0x4cbf42)),this[_0x426e2d(0x227)]();}[a339_0x4da40e(0x21e)](){const _0x2bd910=a339_0x4da40e,_0x1696a7=new salesforce_1[(_0x2bd910(0x1e7))]({'instance':this[_0x2bd910(0x1e0)],'objectName':constants_1['ATTACHMENT_OBJECT_NAME'],'externalIdField':EXTERNAL_ID_FIELD,'allOrNone':![],'api':this['apiVersion']});return _0x1696a7[_0x2bd910(0x20d)](this['attachmentsToDeployChunk']);}[a339_0x4da40e(0x1fc)](){const _0x4f70b2=a339_0x4da40e,_0x25d7a7=new salesforce_1[(_0x4f70b2(0x207))]({'instance':this[_0x4f70b2(0x1e0)],'objectName':constants_1[_0x4f70b2(0x1fd)],'api':this['apiVersion'],'allOrNone':![],'externalIdField':'Id'});return _0x25d7a7[_0x4f70b2(0x20d)]({'records':this[_0x4f70b2(0x1f3)]});}async[a339_0x4da40e(0x1e5)](_0xc73e56){const _0x4b4644=a339_0x4da40e;for(const {success:_0x42b90d,error:_0x20eef0}of _0xc73e56){if(_0x42b90d){this[_0x4b4644(0x225)]++;continue;}_0x20eef0&&this[_0x4b4644(0x1fe)][_0x4b4644(0x1f8)](_0x20eef0);}}['isReachedMaxChunk'](_0x16cb08){const _0x3a8cff=a339_0x4da40e;return _0x16cb08+this[_0x3a8cff(0x204)]>=salesforce_1[_0x3a8cff(0x218)]['MAX_BODY_SIZE']||this[_0x3a8cff(0x1d8)][_0x3a8cff(0x1eb)]['length']===MAX_COMPOSITE_CHUNK_COUNT;}[a339_0x4da40e(0x227)](){const _0x19064b=a339_0x4da40e;this[_0x19064b(0x204)]=0x0,this[_0x19064b(0x1d8)]={'records':[],'binary':[]},this[_0x19064b(0x1f3)]=[];}[a339_0x4da40e(0x220)](_0x5d6993){const _0x28ebd8=a339_0x4da40e;for(const _0x48f4a9 in _0x5d6993){this[_0x28ebd8(0x1f3)][_0x48f4a9][ATTACHMENT_FIELD_NAME]=_0x5d6993[_0x48f4a9]['id'];}}async[a339_0x4da40e(0x1e1)](_0x3cf91d,_0x1cce4a){const _0x1957a3=a339_0x4da40e,{listMetadataItem:_0x53a95b,sourceMemberRecord:_0x19a88e}=_0x3cf91d,_0x18b663={'attributes':{'type':constants_1[_0x1957a3(0x214)],'binaryPartName':_0x53a95b[_0x1957a3(0x223)],'binaryPartNameAlias':constants_1['BINARY_FIELD_NAME']},'Id':_0x19a88e[_0x1957a3(0x1d7)],'Name':_0x53a95b[_0x1957a3(0x223)],'Description':_0x53a95b[_0x1957a3(0x1f0)],'ContentType':CONTENT_TYPE,'ParentId':this[_0x1957a3(0x1d6)],'Body':_0x53a95b[_0x1957a3(0x223)]},_0x2d7404={'binaryFieldName':constants_1['BINARY_FIELD_NAME'],'name':_0x53a95b[_0x1957a3(0x223)],'value':stream_1['Readable']['from'](_0x1cce4a)};this[_0x1957a3(0x1d8)][_0x1957a3(0x1eb)][_0x1957a3(0x1fa)](_0x18b663),this['attachmentsToDeployChunk'][_0x1957a3(0x1e3)][_0x1957a3(0x1fa)](_0x2d7404);}[a339_0x4da40e(0x21f)](_0x3778c2){const _0x417a83=a339_0x4da40e,_0x273ba5=new jszip_1['default']();for(const _0xd92dfe in _0x3778c2){_0x273ba5[_0x417a83(0x1f2)](_0xd92dfe,_0x3778c2[_0xd92dfe]);}return _0x273ba5[_0x417a83(0x21a)]({'type':'nodebuffer'});}['addOrgComponentToChunk'](_0x3ad1ab,_0x2772eb){const _0x303691=a339_0x4da40e,_0x505356={'attributes':{'type':constants_1[_0x303691(0x1fd)]},'Id':_0x2772eb['componentId'],[constants_2[_0x303691(0x206)]+_0x303691(0x1dd)]:_0x2772eb[_0x303691(0x205)],[constants_2[_0x303691(0x206)]+_0x303691(0x1f9)]:_0x2772eb[_0x303691(0x1e8)],[constants_2[_0x303691(0x206)]+_0x303691(0x1db)]:_0x2772eb['sourceMemberId'],[constants_2['FLOSUM_NAMESPACE']+_0x303691(0x1e6)]:_0x2772eb[_0x303691(0x1de)],[constants_2[_0x303691(0x206)]+'API_Name__c']:_0x3ad1ab['fullName'],[constants_2[_0x303691(0x206)]+_0x303691(0x229)]:_0x3ad1ab[_0x303691(0x223)],[constants_2['FLOSUM_NAMESPACE']+_0x303691(0x219)]:_0x3ad1ab[_0x303691(0x1f0)],[constants_2[_0x303691(0x206)]+_0x303691(0x215)]:_0x3ad1ab['fileName'],[constants_2['FLOSUM_NAMESPACE']+_0x303691(0x222)]:constants_1['METADATA_FOLDER_MAP']['has'](_0x3ad1ab[_0x303691(0x1f0)])||null,[constants_2[_0x303691(0x206)]+_0x303691(0x20b)]:!![],[constants_2[_0x303691(0x206)]+_0x303691(0x1ea)]:this['targetOrgId'],[constants_2[_0x303691(0x206)]+_0x303691(0x1e4)]:this[_0x303691(0x201)],[constants_2[_0x303691(0x206)]+_0x303691(0x1d5)]:_0x303691(0x1e9)};this[_0x303691(0x1f3)][_0x303691(0x1fa)](_0x505356);}async[a339_0x4da40e(0x1f1)](_0x241052,_0x416278,_0x589058){const _0x10223b=a339_0x4da40e;try{const {listMetadataItem:_0x3e4050,sourceMemberRecord:_0x2a1ef9,files:_0xe75df}=_0x241052,_0x425eca=await this[_0x10223b(0x21f)](_0xe75df),_0x3469ab=Buffer[_0x10223b(0x1ee)](_0x425eca);this[_0x10223b(0x1ef)](_0x3469ab)&&await this[_0x10223b(0x20a)](),this['binaryRecordsSizeChunk']+=_0x3469ab,await this[_0x10223b(0x1e1)](_0x241052,_0x425eca),this[_0x10223b(0x1fb)](_0x3e4050,_0x2a1ef9),_0x589058();}catch(_0x2d7db9){_0x589058(_0x2d7db9);}}async['_final'](_0x3f33ac){const _0x84ffdf=a339_0x4da40e;try{this['attachmentsToDeployChunk'][_0x84ffdf(0x1eb)][_0x84ffdf(0x1d9)]&&this[_0x84ffdf(0x1f3)][_0x84ffdf(0x1d9)]&&await this[_0x84ffdf(0x20a)](),this[_0x84ffdf(0x1fe)]['log'](_0x84ffdf(0x21c)+this[_0x84ffdf(0x225)]+_0x84ffdf(0x221)),await this['logger'][_0x84ffdf(0x224)](),_0x3f33ac();}catch(_0xcd4849){_0x3f33ac(_0xcd4849);}}}function a339_0x1065(){const _0xc3556d=['handleDeployResult','Last_Updated_By__c','CompositeBinaryDeployData','revisionCounter','Retrieved','OrganisationName__c','records','__esModule','../../constants','byteLength','isReachedMaxChunk','type','_write','file','orgComponentsToDeployChunk','40CMmCHU','1455714gCVzJi','apply','Writable','error','Revision_Counter__c','push','addOrgComponentToChunk','deployOrgComponents','ORG_COMPONENT_OBJECT_NAME','logger','343144CHYxUQ','jszip','trackingSettingId','390093FBSQHR','defineProperty','binaryRecordsSizeChunk','isNameObsolete','FLOSUM_NAMESPACE','RestSimpleDeployData','toString','ComponentsDeployer','deploy','Is_Retrieved__c','stream','execute','then','279505mRJUss','apiVersion','Attachment_ID__c','1SCSJMF','application/zip','ATTACHMENT_OBJECT_NAME','Label__c','@flosum/salesforce','4244905SnyuAh','CompositeConstants','Component_Type__c','generateAsync','search','Process\x20completed\x20for\x20','6MSBxEE','deployAttachments','createZip','populateAttachmentId','\x20components','Folder__c','fullName','update','successDeployedCounter','1459748KoXLHV','resetChunks','(((.+)+)+)+$','Name__c','Status__c','targetOrgId','attachmentId','attachmentsToDeployChunk','length','../../../../constants','Source_Member_Id__c','180Wmrugq','Is_Deleted__c','changedBy','constructor','instance','addAttachmentToChunk','1534338ERykoc','binary','Tracking_Setting__c'];a339_0x1065=function(){return _0xc3556d;};return a339_0x1065();}exports['ComponentsDeployer']=ComponentsDeployer;