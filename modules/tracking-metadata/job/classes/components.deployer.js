function a295_0x4bd1(){const _0x2d14a1=['7EYPIjs','defineProperty','30MyvxGT','deployAttachments','13833859lnyFcX','binary','jszip','../../../../constants','attachmentId','sourceMemberId','changedBy','nodebuffer','fullName','isReachedMaxChunk','toString','instance','Readable','push','\x20components','from','records','targetOrgId','Status__c','Process\x20completed\x20for\x20','CompositeBinaryDeployData','deployOrgComponents','Name__c','isNameObsolete','6390444thPnfY','createZip','../../constants','1650985BRDBia','ComponentsDeployer','trackingSettingId','3eSxQFz','RestSimpleDeployData','@flosum/salesforce','Attachment_ID__c','handleDeployResult','search','addAttachmentToChunk','then','successDeployedCounter','deploy','5660768Ktqncm','30gPkaHu','constructor','34540BvaHOT','file','ORG_COMPONENT_OBJECT_NAME','length','binaryRecordsSizeChunk','BINARY_FIELD_NAME','CompositeConstants','__importDefault','58yaRTvX','attachmentsToDeployChunk','12lbbAjt','4715491fKHsdu','(((.+)+)+)+$','Folder__c','__esModule','Retrieved','OrganisationName__c','populateAttachmentId','resetChunks','Writable','error','generateAsync','apiVersion','Tracking_Setting__c','application/zip','type','log','3941532DvqAKB','execute','addOrgComponentToChunk','componentId','fileName','FLOSUM_NAMESPACE','logger','byteLength','Revision_Counter__c','orgComponentsToDeployChunk'];a295_0x4bd1=function(){return _0x2d14a1;};return a295_0x4bd1();}const a295_0xa311e0=a295_0x46d1;function a295_0x46d1(_0x2aa5f6,_0xb3fe6d){const _0x47e9fc=a295_0x4bd1();return a295_0x46d1=function(_0x30eccb,_0x192cc3){_0x30eccb=_0x30eccb-0x1dd;let _0x4bd190=_0x47e9fc[_0x30eccb];return _0x4bd190;},a295_0x46d1(_0x2aa5f6,_0xb3fe6d);}(function(_0x4bd720,_0x56d0d7){const _0x35a340=a295_0x46d1,_0x7b0bca=_0x4bd720();while(!![]){try{const _0x16d1ec=-parseInt(_0x35a340(0x22d))/0x1*(-parseInt(_0x35a340(0x1e1))/0x2)+-parseInt(_0x35a340(0x220))/0x3*(-parseInt(_0x35a340(0x21a))/0x4)+parseInt(_0x35a340(0x21d))/0x5*(-parseInt(_0x35a340(0x22b))/0x6)+parseInt(_0x35a340(0x1fe))/0x7*(-parseInt(_0x35a340(0x22a))/0x8)+parseInt(_0x35a340(0x1f4))/0x9+parseInt(_0x35a340(0x200))/0xa*(parseInt(_0x35a340(0x1e4))/0xb)+parseInt(_0x35a340(0x1e3))/0xc*(-parseInt(_0x35a340(0x202))/0xd);if(_0x16d1ec===_0x56d0d7)break;else _0x7b0bca['push'](_0x7b0bca['shift']());}catch(_0x5dd57d){_0x7b0bca['push'](_0x7b0bca['shift']());}}}(a295_0x4bd1,0xdbdba));const a295_0x192cc3=(function(){let _0x160649=!![];return function(_0x360fde,_0x2cb93b){const _0x8309f0=_0x160649?function(){if(_0x2cb93b){const _0x39d393=_0x2cb93b['apply'](_0x360fde,arguments);return _0x2cb93b=null,_0x39d393;}}:function(){};return _0x160649=![],_0x8309f0;};}()),a295_0x30eccb=a295_0x192cc3(this,function(){const _0xdfdb7e=a295_0x46d1;return a295_0x30eccb[_0xdfdb7e(0x20c)]()[_0xdfdb7e(0x225)](_0xdfdb7e(0x1e5))[_0xdfdb7e(0x20c)]()[_0xdfdb7e(0x22c)](a295_0x30eccb)[_0xdfdb7e(0x225)]('(((.+)+)+)+$');});a295_0x30eccb();'use strict';var __importDefault=this&&this[a295_0xa311e0(0x1e0)]||function(_0xc6f725){return _0xc6f725&&_0xc6f725['__esModule']?_0xc6f725:{'default':_0xc6f725};};Object[a295_0xa311e0(0x1ff)](exports,a295_0xa311e0(0x1e7),{'value':!![]}),exports[a295_0xa311e0(0x21e)]=void 0x0;const salesforce_1=require(a295_0xa311e0(0x222)),constants_1=require(a295_0xa311e0(0x21c)),stream_1=require('stream'),jszip_1=__importDefault(require(a295_0xa311e0(0x204))),constants_2=require(a295_0xa311e0(0x205)),MAX_COMPOSITE_CHUNK_COUNT=0xc8,EXTERNAL_ID_FIELD='Id',ATTACHMENT_FIELD_NAME=constants_2[a295_0xa311e0(0x1f9)]+a295_0xa311e0(0x223),CONTENT_TYPE=a295_0xa311e0(0x1f1);class ComponentsDeployer extends stream_1[a295_0xa311e0(0x1ec)]{constructor({apiVersion:_0x47a736,instance:_0x3edd43,logger:_0xadc187,targetOrgId:_0x19e164,trackingSettingId:_0xfcd833}){const _0x3b6891=a295_0xa311e0;super({'objectMode':!![]}),this[_0x3b6891(0x1e2)]={'records':[],'binary':[]},this[_0x3b6891(0x1dd)]=0x0,this[_0x3b6891(0x1fd)]=[],this['successDeployedCounter']=0x0,this[_0x3b6891(0x1ef)]=_0x47a736,this[_0x3b6891(0x20d)]=_0x3edd43,this[_0x3b6891(0x1fa)]=_0xadc187,this[_0x3b6891(0x213)]=_0x19e164,this[_0x3b6891(0x21f)]=_0xfcd833;}async[a295_0xa311e0(0x229)](){const _0x1c1cd7=a295_0xa311e0;await this[_0x1c1cd7(0x201)]()['then'](_0x5f0bc9=>this[_0x1c1cd7(0x1ea)](_0x5f0bc9))[_0x1c1cd7(0x227)](()=>this[_0x1c1cd7(0x217)]())['then'](_0x388c05=>this[_0x1c1cd7(0x224)](_0x388c05)),this['resetChunks']();}['deployAttachments'](){const _0x3b7086=a295_0xa311e0,_0x37a5e0=new salesforce_1[(_0x3b7086(0x216))]({'instance':this[_0x3b7086(0x20d)],'objectName':constants_1['ATTACHMENT_OBJECT_NAME'],'externalIdField':EXTERNAL_ID_FIELD,'allOrNone':![],'api':this[_0x3b7086(0x1ef)]});return _0x37a5e0['execute'](this[_0x3b7086(0x1e2)]);}['deployOrgComponents'](){const _0x1908dc=a295_0xa311e0,_0x563938=new salesforce_1[(_0x1908dc(0x221))]({'instance':this[_0x1908dc(0x20d)],'objectName':constants_1[_0x1908dc(0x22f)],'api':this['apiVersion'],'allOrNone':![],'externalIdField':'Id'});return _0x563938[_0x1908dc(0x1f5)]({'records':this['orgComponentsToDeployChunk']});}async[a295_0xa311e0(0x224)](_0x9ce6ac){const _0x2d0b43=a295_0xa311e0;for(const {success:_0x1c0cc2,error:_0x1a567b}of _0x9ce6ac){if(_0x1c0cc2){this['successDeployedCounter']++;continue;}_0x1a567b&&this['logger'][_0x2d0b43(0x1ed)](_0x1a567b);}}[a295_0xa311e0(0x20b)](_0x5b5c2e){const _0x303bef=a295_0xa311e0;return _0x5b5c2e+this[_0x303bef(0x1dd)]>=salesforce_1[_0x303bef(0x1df)]['MAX_BODY_SIZE']||this['attachmentsToDeployChunk'][_0x303bef(0x212)]['length']===MAX_COMPOSITE_CHUNK_COUNT;}[a295_0xa311e0(0x1eb)](){const _0x3f9508=a295_0xa311e0;this[_0x3f9508(0x1dd)]=0x0,this[_0x3f9508(0x1e2)]={'records':[],'binary':[]},this['orgComponentsToDeployChunk']=[];}['populateAttachmentId'](_0x13b0b5){for(const _0x4c4959 in _0x13b0b5){this['orgComponentsToDeployChunk'][_0x4c4959][ATTACHMENT_FIELD_NAME]=_0x13b0b5[_0x4c4959]['id'];}}async['addAttachmentToChunk'](_0x237991,_0x4bf2fb){const _0x2009fb=a295_0xa311e0,{listMetadataItem:_0xa0bc37,sourceMemberRecord:_0x2f1bb0}=_0x237991,_0x4998f9={'attributes':{'type':constants_1['ATTACHMENT_OBJECT_NAME'],'binaryPartName':_0xa0bc37[_0x2009fb(0x20a)],'binaryPartNameAlias':constants_1[_0x2009fb(0x1de)]},'Id':_0x2f1bb0[_0x2009fb(0x206)],'Name':_0xa0bc37[_0x2009fb(0x20a)],'Description':_0xa0bc37[_0x2009fb(0x1f2)],'ContentType':CONTENT_TYPE,'ParentId':this[_0x2009fb(0x213)],'Body':_0xa0bc37[_0x2009fb(0x20a)]},_0x32b39d={'binaryFieldName':constants_1['BINARY_FIELD_NAME'],'name':_0xa0bc37[_0x2009fb(0x20a)],'value':stream_1[_0x2009fb(0x20e)][_0x2009fb(0x211)](_0x4bf2fb)};this[_0x2009fb(0x1e2)]['records'][_0x2009fb(0x20f)](_0x4998f9),this[_0x2009fb(0x1e2)][_0x2009fb(0x203)][_0x2009fb(0x20f)](_0x32b39d);}['createZip'](_0x1dbd25){const _0x28be53=a295_0xa311e0,_0x173843=new jszip_1['default']();for(const _0x583071 in _0x1dbd25){_0x173843[_0x28be53(0x22e)](_0x583071,_0x1dbd25[_0x583071]);}return _0x173843[_0x28be53(0x1ee)]({'type':_0x28be53(0x209)});}['addOrgComponentToChunk'](_0x249dad,_0x36fa28){const _0x459f67=a295_0xa311e0,_0x1a40b6={'attributes':{'type':constants_1[_0x459f67(0x22f)]},'Id':_0x36fa28[_0x459f67(0x1f7)],[constants_2[_0x459f67(0x1f9)]+'Is_Deleted__c']:_0x36fa28[_0x459f67(0x219)],[constants_2['FLOSUM_NAMESPACE']+_0x459f67(0x1fc)]:_0x36fa28['revisionCounter'],[constants_2[_0x459f67(0x1f9)]+'Source_Member_Id__c']:_0x36fa28[_0x459f67(0x207)],[constants_2[_0x459f67(0x1f9)]+'Last_Updated_By__c']:_0x36fa28[_0x459f67(0x208)],[constants_2[_0x459f67(0x1f9)]+'API_Name__c']:_0x249dad[_0x459f67(0x20a)],[constants_2[_0x459f67(0x1f9)]+_0x459f67(0x218)]:_0x249dad[_0x459f67(0x20a)],[constants_2[_0x459f67(0x1f9)]+'Component_Type__c']:_0x249dad[_0x459f67(0x1f2)],[constants_2[_0x459f67(0x1f9)]+'Label__c']:_0x249dad[_0x459f67(0x1f8)],[constants_2[_0x459f67(0x1f9)]+_0x459f67(0x1e6)]:constants_1['METADATA_FOLDER_MAP']['has'](_0x249dad[_0x459f67(0x1f2)])||null,[constants_2['FLOSUM_NAMESPACE']+'Is_Retrieved__c']:!![],[constants_2[_0x459f67(0x1f9)]+_0x459f67(0x1e9)]:this[_0x459f67(0x213)],[constants_2[_0x459f67(0x1f9)]+_0x459f67(0x1f0)]:this['trackingSettingId'],[constants_2['FLOSUM_NAMESPACE']+_0x459f67(0x214)]:_0x459f67(0x1e8)};this[_0x459f67(0x1fd)][_0x459f67(0x20f)](_0x1a40b6);}async['_write'](_0x30c73f,_0x5af9b1,_0x5d8e5a){const _0x1dc675=a295_0xa311e0;try{const {listMetadataItem:_0x461af8,sourceMemberRecord:_0x4e1d14,files:_0x2e052d}=_0x30c73f,_0x104e1f=await this[_0x1dc675(0x21b)](_0x2e052d),_0x8eb213=Buffer[_0x1dc675(0x1fb)](_0x104e1f);this[_0x1dc675(0x20b)](_0x8eb213)&&await this[_0x1dc675(0x229)](),this[_0x1dc675(0x1dd)]+=_0x8eb213,await this[_0x1dc675(0x226)](_0x30c73f,_0x104e1f),this[_0x1dc675(0x1f6)](_0x461af8,_0x4e1d14),_0x5d8e5a();}catch(_0x7b155a){_0x5d8e5a(_0x7b155a);}}async['_final'](_0x4fefee){const _0x3e9081=a295_0xa311e0;try{this[_0x3e9081(0x1e2)]['records'][_0x3e9081(0x230)]&&this[_0x3e9081(0x1fd)][_0x3e9081(0x230)]&&await this['deploy'](),this[_0x3e9081(0x1fa)][_0x3e9081(0x1f3)](_0x3e9081(0x215)+this[_0x3e9081(0x228)]+_0x3e9081(0x210)),await this[_0x3e9081(0x1fa)]['update'](),_0x4fefee();}catch(_0x5a06f4){_0x4fefee(_0x5a06f4);}}}exports[a295_0xa311e0(0x21e)]=ComponentsDeployer;