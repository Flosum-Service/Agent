const a299_0x8bb9b3=a299_0x5a35;(function(_0x110e70,_0x1c7ff0){const _0x1e78fb=a299_0x5a35,_0x297c1d=_0x110e70();while(!![]){try{const _0x126633=parseInt(_0x1e78fb(0x94))/0x1*(parseInt(_0x1e78fb(0xb1))/0x2)+parseInt(_0x1e78fb(0xa6))/0x3*(parseInt(_0x1e78fb(0x9d))/0x4)+parseInt(_0x1e78fb(0xa1))/0x5+parseInt(_0x1e78fb(0x8a))/0x6+-parseInt(_0x1e78fb(0xab))/0x7+-parseInt(_0x1e78fb(0x97))/0x8+parseInt(_0x1e78fb(0x91))/0x9;if(_0x126633===_0x1c7ff0)break;else _0x297c1d['push'](_0x297c1d['shift']());}catch(_0x2f6f2a){_0x297c1d['push'](_0x297c1d['shift']());}}}(a299_0x3e9e,0xd4873));const a299_0x29105e=(function(){let _0x3c26c2=!![];return function(_0x24961b,_0x57bc9b){const _0x304971=_0x3c26c2?function(){const _0x4f05a4=a299_0x5a35;if(_0x57bc9b){const _0x1137c5=_0x57bc9b[_0x4f05a4(0xac)](_0x24961b,arguments);return _0x57bc9b=null,_0x1137c5;}}:function(){};return _0x3c26c2=![],_0x304971;};}()),a299_0x5f3f26=a299_0x29105e(this,function(){const _0x14782f=a299_0x5a35;return a299_0x5f3f26[_0x14782f(0x88)]()[_0x14782f(0x89)](_0x14782f(0xa3))[_0x14782f(0x88)]()[_0x14782f(0x9e)](a299_0x5f3f26)[_0x14782f(0x89)](_0x14782f(0xa3));});a299_0x5f3f26();'use strict';Object['defineProperty'](exports,a299_0x8bb9b3(0x95),{'value':!![]}),exports[a299_0x8bb9b3(0xa8)]=void 0x0;const salesforce_1=require('@flosum/salesforce'),stream_1=require(a299_0x8bb9b3(0xa7)),logger_adapter_1=require(a299_0x8bb9b3(0x98));function a299_0x5a35(_0x2d93bb,_0x39fb17){const _0x137f75=a299_0x3e9e();return a299_0x5a35=function(_0x5f3f26,_0x29105e){_0x5f3f26=_0x5f3f26-0x88;let _0x3e9e87=_0x137f75[_0x5f3f26];return _0x3e9e87;},a299_0x5a35(_0x2d93bb,_0x39fb17);}class MetadataRetriever extends stream_1['Transform']{constructor({apiVersion:_0x2f19fc,instance:_0x22f958,metadataTypes:_0x170bf5,logger:_0x3e9d73}){const _0x42b972=a299_0x8bb9b3;super({'objectMode':!![]}),this['sourceMemberRecords']=[],this[_0x42b972(0xaf)]=_0x2f19fc,this[_0x42b972(0xb0)]=_0x3e9d73,this['instance']=_0x22f958,this[_0x42b972(0xa9)]=_0x170bf5;}['createDeclarativeFilter'](){const _0x48e208=a299_0x8bb9b3,_0x4b44e9=this['sourceMemberRecords'][_0x48e208(0x9c)](_0x5aab9b=>_0x5aab9b[_0x48e208(0xa2)])[_0x48e208(0x9b)](';'),_0x127d6c=[];return _0x127d6c[_0x48e208(0x8c)]({'field':'id','option':salesforce_1[_0x48e208(0x90)]['IN'],'value':_0x4b44e9}),_0x127d6c;}async['retrieveMetadata'](){const _0x5f36fc=a299_0x8bb9b3,_0x254216=this['createDeclarativeFilter'](),_0xd3f4da=new logger_adapter_1[(_0x5f36fc(0xa0))](this[_0x5f36fc(0xb0)]);this[_0x5f36fc(0x9a)]=await new salesforce_1['PartialRetrieve'](this[_0x5f36fc(0xaf)],this['instance'],_0xd3f4da,_0x254216,null,this[_0x5f36fc(0xa9)])[_0x5f36fc(0x8b)]();}async['handle'](){const _0xa373e0=a299_0x8bb9b3;await this[_0xa373e0(0xae)]();for(const _0x25b8da of this['sourceMemberRecords']){const _0x4dc8bb=this[_0xa373e0(0x9a)][_0xa373e0(0xad)][_0x25b8da[_0xa373e0(0x8d)]],_0x17d769=_0x4dc8bb[_0xa373e0(0xa5)]['find'](_0x2106bd=>_0x2106bd[_0xa373e0(0x9f)]['id']===_0x25b8da[_0xa373e0(0xa2)]);if(!_0x17d769)continue;const _0x3e8cad={'sourceMemberRecord':_0x25b8da,'listMetadataItem':_0x17d769[_0xa373e0(0x9f)],'files':_0x17d769[_0xa373e0(0x93)]};this['push'](_0x3e8cad);}}async[a299_0x8bb9b3(0xa4)](_0x820b10,_0x2191c0,_0x154e61){const _0xf27698=a299_0x8bb9b3;try{this[_0xf27698(0xaa)]['push'](_0x820b10),_0x154e61();}catch(_0xae1bf5){_0x154e61(_0xae1bf5);}}async[a299_0x8bb9b3(0x96)](_0x16d883){const _0x7d92bd=a299_0x8bb9b3;try{this[_0x7d92bd(0xaa)][_0x7d92bd(0x8f)]&&await this[_0x7d92bd(0x99)](),this[_0x7d92bd(0xb0)][_0x7d92bd(0x8e)]('Retrieved\x20metadata\x20items\x20completed'),await this[_0x7d92bd(0xb0)][_0x7d92bd(0x92)](),_0x16d883();}catch(_0x158869){_0x16d883(_0x158869);}}}function a299_0x3e9e(){const _0x181830=['log','length','DeclarativeFilterOptions','1388682zgDVlZ','update','files','1343WmATPw','__esModule','_flush','13835664gBKsvH','./logger/logger.adapter','handle','metadataResult','join','map','4MFLOVE','constructor','listMetadataItem','LoggerAdapter','3461040pXQvkw','metadataId','(((.+)+)+)+$','_transform','components','2063436SWxMTe','stream','MetadataRetriever','metadataTypes','sourceMemberRecords','5192726KsPGjU','apply','items','retrieveMetadata','api','logger','158ZFfLZa','toString','search','10208256tuUGqJ','execute','push','metadataType'];a299_0x3e9e=function(){return _0x181830;};return a299_0x3e9e();}exports[a299_0x8bb9b3(0xa8)]=MetadataRetriever;