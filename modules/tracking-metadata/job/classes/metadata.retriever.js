const a342_0x4df1f2=a342_0x5779;(function(_0x39e567,_0x2de011){const _0x51812c=a342_0x5779,_0xb0a0de=_0x39e567();while(!![]){try{const _0x363621=-parseInt(_0x51812c(0x10f))/0x1+-parseInt(_0x51812c(0x11d))/0x2+-parseInt(_0x51812c(0x126))/0x3+parseInt(_0x51812c(0x118))/0x4*(parseInt(_0x51812c(0x130))/0x5)+-parseInt(_0x51812c(0x136))/0x6+parseInt(_0x51812c(0x115))/0x7*(parseInt(_0x51812c(0x12a))/0x8)+parseInt(_0x51812c(0x123))/0x9;if(_0x363621===_0x2de011)break;else _0xb0a0de['push'](_0xb0a0de['shift']());}catch(_0x1ba622){_0xb0a0de['push'](_0xb0a0de['shift']());}}}(a342_0x107c,0xeb612));function a342_0x107c(){const _0x35eb72=['instance','./logger/logger.adapter','41218236oqmQKB','@flosum/salesforce','metadataResult','4432008YZZqKD','items','search','map','5783984VbFpBY','push','defineProperty','metadataTypes','(((.+)+)+)+$','handle','5fMGIhb','MetadataRetriever','logger','execute','retrieveMetadata','files','7973760JOdSQt','__esModule','1209704uSgjHg','api','sourceMemberRecords','Transform','stream','metadataType','7smuqJs','listMetadataItem','toString','5054804VQIhIq','createDeclarativeFilter','log','constructor','_transform','3172778lNWBLO','components','join','update'];a342_0x107c=function(){return _0x35eb72;};return a342_0x107c();}const a342_0x44e083=(function(){let _0x511850=!![];return function(_0x431e6b,_0x3cab2e){const _0x1a6e24=_0x511850?function(){if(_0x3cab2e){const _0x4f1318=_0x3cab2e['apply'](_0x431e6b,arguments);return _0x3cab2e=null,_0x4f1318;}}:function(){};return _0x511850=![],_0x1a6e24;};}()),a342_0x1cadbf=a342_0x44e083(this,function(){const _0x29db38=a342_0x5779;return a342_0x1cadbf[_0x29db38(0x117)]()[_0x29db38(0x128)](_0x29db38(0x12e))['toString']()[_0x29db38(0x11b)](a342_0x1cadbf)[_0x29db38(0x128)]('(((.+)+)+)+$');});function a342_0x5779(_0x2e5b80,_0x2514ef){const _0x3dddbb=a342_0x107c();return a342_0x5779=function(_0x1cadbf,_0x44e083){_0x1cadbf=_0x1cadbf-0x10e;let _0x107c77=_0x3dddbb[_0x1cadbf];return _0x107c77;},a342_0x5779(_0x2e5b80,_0x2514ef);}a342_0x1cadbf();'use strict';Object[a342_0x4df1f2(0x12c)](exports,a342_0x4df1f2(0x10e),{'value':!![]}),exports[a342_0x4df1f2(0x131)]=void 0x0;const salesforce_1=require(a342_0x4df1f2(0x124)),stream_1=require(a342_0x4df1f2(0x113)),logger_adapter_1=require(a342_0x4df1f2(0x122));class MetadataRetriever extends stream_1[a342_0x4df1f2(0x112)]{constructor({apiVersion:_0x3ad6b7,instance:_0x3ca68b,metadataTypes:_0x39736c,logger:_0x299c86}){const _0x2c9ffa=a342_0x4df1f2;super({'objectMode':!![]}),this[_0x2c9ffa(0x111)]=[],this['api']=_0x3ad6b7,this[_0x2c9ffa(0x132)]=_0x299c86,this[_0x2c9ffa(0x121)]=_0x3ca68b,this[_0x2c9ffa(0x12d)]=_0x39736c;}[a342_0x4df1f2(0x119)](){const _0x2e04c1=a342_0x4df1f2,_0x4dd589=this['sourceMemberRecords'][_0x2e04c1(0x129)](_0x2cdaad=>_0x2cdaad['metadataId'])[_0x2e04c1(0x11f)](';'),_0x5bfffb=[];return _0x5bfffb['push']({'field':'id','option':salesforce_1['DeclarativeFilterOptions']['IN'],'value':_0x4dd589}),_0x5bfffb;}async[a342_0x4df1f2(0x134)](){const _0x493d1f=a342_0x4df1f2,_0x4d461a=this[_0x493d1f(0x119)](),_0x53e908=new logger_adapter_1['LoggerAdapter'](this[_0x493d1f(0x132)]);this[_0x493d1f(0x125)]=await new salesforce_1['PartialRetrieve'](this[_0x493d1f(0x110)],this[_0x493d1f(0x121)],_0x53e908,_0x4d461a,null,this[_0x493d1f(0x12d)])[_0x493d1f(0x133)]();}async['handle'](){const _0x56fee1=a342_0x4df1f2;await this[_0x56fee1(0x134)]();for(const _0x1c9f04 of this['sourceMemberRecords']){const _0x51bbc6=this[_0x56fee1(0x125)][_0x56fee1(0x127)][_0x1c9f04[_0x56fee1(0x114)]],_0x46733a=_0x51bbc6[_0x56fee1(0x11e)]['find'](_0xa2448b=>_0xa2448b['listMetadataItem']['id']===_0x1c9f04['metadataId']);if(!_0x46733a)continue;const _0x29c62b={'sourceMemberRecord':_0x1c9f04,'listMetadataItem':_0x46733a[_0x56fee1(0x116)],'files':_0x46733a[_0x56fee1(0x135)]};this[_0x56fee1(0x12b)](_0x29c62b);}}async[a342_0x4df1f2(0x11c)](_0x10e25f,_0x1cc844,_0x4e18d9){const _0x34a98f=a342_0x4df1f2;try{this[_0x34a98f(0x111)][_0x34a98f(0x12b)](_0x10e25f),_0x4e18d9();}catch(_0x3cc443){_0x4e18d9(_0x3cc443);}}async['_flush'](_0x39249f){const _0x5db9b5=a342_0x4df1f2;try{this[_0x5db9b5(0x111)]['length']&&await this[_0x5db9b5(0x12f)](),this[_0x5db9b5(0x132)][_0x5db9b5(0x11a)]('Retrieved\x20metadata\x20items\x20completed'),await this[_0x5db9b5(0x132)][_0x5db9b5(0x120)](),_0x39249f();}catch(_0x35b5ba){_0x39249f(_0x35b5ba);}}}exports[a342_0x4df1f2(0x131)]=MetadataRetriever;