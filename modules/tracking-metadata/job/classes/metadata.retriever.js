const a342_0x13743f=a342_0xb298;(function(_0x3c4789,_0x3c6f92){const _0x264ea5=a342_0xb298,_0x536e05=_0x3c4789();while(!![]){try{const _0x3d623a=parseInt(_0x264ea5(0x8b))/0x1+parseInt(_0x264ea5(0x7b))/0x2*(-parseInt(_0x264ea5(0x8e))/0x3)+parseInt(_0x264ea5(0x6e))/0x4*(-parseInt(_0x264ea5(0x70))/0x5)+-parseInt(_0x264ea5(0x6f))/0x6*(-parseInt(_0x264ea5(0x6d))/0x7)+parseInt(_0x264ea5(0x7c))/0x8+parseInt(_0x264ea5(0x8c))/0x9*(-parseInt(_0x264ea5(0x83))/0xa)+-parseInt(_0x264ea5(0x9b))/0xb;if(_0x3d623a===_0x3c6f92)break;else _0x536e05['push'](_0x536e05['shift']());}catch(_0x523eea){_0x536e05['push'](_0x536e05['shift']());}}}(a342_0x727a,0xb542d));function a342_0xb298(_0x275207,_0x26e3be){const _0x301a89=a342_0x727a();return a342_0xb298=function(_0x1b52a0,_0x615d05){_0x1b52a0=_0x1b52a0-0x6d;let _0x727a32=_0x301a89[_0x1b52a0];return _0x727a32;},a342_0xb298(_0x275207,_0x26e3be);}const a342_0x615d05=(function(){let _0x53da96=!![];return function(_0x167149,_0xab6ddf){const _0x4476a9=_0x53da96?function(){const _0x3fc9ea=a342_0xb298;if(_0xab6ddf){const _0x9fe56f=_0xab6ddf[_0x3fc9ea(0x7d)](_0x167149,arguments);return _0xab6ddf=null,_0x9fe56f;}}:function(){};return _0x53da96=![],_0x4476a9;};}()),a342_0x1b52a0=a342_0x615d05(this,function(){const _0x44d3c4=a342_0xb298;return a342_0x1b52a0[_0x44d3c4(0x89)]()['search']('(((.+)+)+)+$')[_0x44d3c4(0x89)]()[_0x44d3c4(0x94)](a342_0x1b52a0)[_0x44d3c4(0x72)]('(((.+)+)+)+$');});a342_0x1b52a0();'use strict';Object[a342_0x13743f(0x90)](exports,'__esModule',{'value':!![]}),exports[a342_0x13743f(0x95)]=void 0x0;function a342_0x727a(){const _0x41cebc=['logger','execute','listMetadataItem','metadataName','metadataTypes','3423940PmiqtF','Retrieved\x20metadata\x20items\x20completed','handle','sourceMemberRecords','metadataResult','DeclarativeFilterOptions','toString','components','1285568aPpTWe','18FCWQEM','@flosum/salesforce','153Ubhqey','LoggerAdapter','defineProperty','createDeclarativeFilter','join','metadataId','constructor','MetadataRetriever','Transform','find','api','_flush','push','10099518TuTWtS','116284wzfewX','4YBPqmg','504RsaHAJ','7286190zBAwEW','instance','search','items','length','map','update','log','\x20was\x20not\x20retrieved.','stream','metadataType','1514LbUEcE','9281920vKVUsr','apply'];a342_0x727a=function(){return _0x41cebc;};return a342_0x727a();}const salesforce_1=require(a342_0x13743f(0x8d)),stream_1=require(a342_0x13743f(0x79)),logger_adapter_1=require('./logger/logger.adapter');class MetadataRetriever extends stream_1[a342_0x13743f(0x96)]{constructor({apiVersion:_0x42d9da,instance:_0x8e3996,metadataTypes:_0x4237c8,logger:_0x240666}){const _0x1e20ce=a342_0x13743f;super({'objectMode':!![]}),this[_0x1e20ce(0x86)]=[],this[_0x1e20ce(0x98)]=_0x42d9da,this[_0x1e20ce(0x7e)]=_0x240666,this[_0x1e20ce(0x71)]=_0x8e3996,this[_0x1e20ce(0x82)]=_0x4237c8;}[a342_0x13743f(0x91)](){const _0x1ab99d=a342_0x13743f,_0x10b816=this[_0x1ab99d(0x86)][_0x1ab99d(0x75)](_0x3f6c13=>_0x3f6c13[_0x1ab99d(0x93)])[_0x1ab99d(0x92)](';'),_0x5e5d8a=[];return _0x5e5d8a[_0x1ab99d(0x9a)]({'field':'id','option':salesforce_1[_0x1ab99d(0x88)]['IN'],'value':_0x10b816}),_0x5e5d8a;}async['retrieveMetadata'](){const _0x34906c=a342_0x13743f,_0x3780e6=this[_0x34906c(0x91)](),_0xb708f=new logger_adapter_1[(_0x34906c(0x8f))](this['logger']);this['metadataResult']=await new salesforce_1['PartialRetrieve'](this['api'],this['instance'],_0xb708f,_0x3780e6,null,this['metadataTypes'])[_0x34906c(0x7f)]();}async[a342_0x13743f(0x85)](){const _0x4a33d6=a342_0x13743f;await this['retrieveMetadata']();for(const _0xd5dc94 of this[_0x4a33d6(0x86)]){const _0x3bd4d4=this[_0x4a33d6(0x87)][_0x4a33d6(0x73)][_0xd5dc94['metadataType']],_0x322080=_0x3bd4d4===null||_0x3bd4d4===void 0x0?void 0x0:_0x3bd4d4[_0x4a33d6(0x8a)][_0x4a33d6(0x97)](_0x3b040f=>_0x3b040f['listMetadataItem']['id']===_0xd5dc94[_0x4a33d6(0x93)]);if(!_0x322080){this['logger'][_0x4a33d6(0x77)]('The\x20'+_0xd5dc94[_0x4a33d6(0x81)]+'\x20'+_0xd5dc94[_0x4a33d6(0x7a)]+_0x4a33d6(0x78));continue;}const _0x5e6bec={'sourceMemberRecord':_0xd5dc94,'listMetadataItem':_0x322080[_0x4a33d6(0x80)],'files':_0x322080['files']};this['push'](_0x5e6bec);}}async['_transform'](_0x186ed6,_0x423a25,_0x2df9ae){const _0x4429cf=a342_0x13743f;try{this[_0x4429cf(0x86)][_0x4429cf(0x9a)](_0x186ed6),_0x2df9ae();}catch(_0x29ad59){_0x2df9ae(_0x29ad59);}}async[a342_0x13743f(0x99)](_0x1f99ab){const _0x351f19=a342_0x13743f;try{this['sourceMemberRecords'][_0x351f19(0x74)]&&await this[_0x351f19(0x85)](),this['logger'][_0x351f19(0x77)](_0x351f19(0x84)),await this[_0x351f19(0x7e)][_0x351f19(0x76)](),_0x1f99ab();}catch(_0x25559a){_0x1f99ab(_0x25559a);}}}exports[a342_0x13743f(0x95)]=MetadataRetriever;