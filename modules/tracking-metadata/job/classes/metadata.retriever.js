const a342_0x422b05=a342_0x2e55;(function(_0x272bbf,_0x1e61c9){const _0x224a05=a342_0x2e55,_0x59e66f=_0x272bbf();while(!![]){try{const _0x5c2989=-parseInt(_0x224a05(0x109))/0x1+-parseInt(_0x224a05(0xfb))/0x2+-parseInt(_0x224a05(0x104))/0x3*(-parseInt(_0x224a05(0x10f))/0x4)+-parseInt(_0x224a05(0x100))/0x5*(parseInt(_0x224a05(0x101))/0x6)+-parseInt(_0x224a05(0xfa))/0x7+parseInt(_0x224a05(0xed))/0x8*(-parseInt(_0x224a05(0xea))/0x9)+-parseInt(_0x224a05(0x105))/0xa*(-parseInt(_0x224a05(0xfd))/0xb);if(_0x5c2989===_0x1e61c9)break;else _0x59e66f['push'](_0x59e66f['shift']());}catch(_0x3c88d9){_0x59e66f['push'](_0x59e66f['shift']());}}}(a342_0x2e8b,0xce42b));const a342_0x3136fc=(function(){let _0x43ecf8=!![];return function(_0x21dc07,_0x53bfdb){const _0x547142=_0x43ecf8?function(){const _0xc6ea86=a342_0x2e55;if(_0x53bfdb){const _0x2e628e=_0x53bfdb[_0xc6ea86(0x113)](_0x21dc07,arguments);return _0x53bfdb=null,_0x2e628e;}}:function(){};return _0x43ecf8=![],_0x547142;};}()),a342_0x4c3016=a342_0x3136fc(this,function(){const _0x4f941b=a342_0x2e55;return a342_0x4c3016[_0x4f941b(0xf2)]()[_0x4f941b(0x108)]('(((.+)+)+)+$')['toString']()[_0x4f941b(0x107)](a342_0x4c3016)[_0x4f941b(0x108)](_0x4f941b(0xf1));});a342_0x4c3016();'use strict';Object[a342_0x422b05(0xf7)](exports,a342_0x422b05(0x10d),{'value':!![]}),exports[a342_0x422b05(0x110)]=void 0x0;const salesforce_1=require(a342_0x422b05(0xf5)),stream_1=require(a342_0x422b05(0x102)),logger_adapter_1=require('./logger/logger.adapter');function a342_0x2e55(_0x3ecdea,_0x465ca2){const _0x2e982d=a342_0x2e8b();return a342_0x2e55=function(_0x4c3016,_0x3136fc){_0x4c3016=_0x4c3016-0xe9;let _0x2e8b19=_0x2e982d[_0x4c3016];return _0x2e8b19;},a342_0x2e55(_0x3ecdea,_0x465ca2);}function a342_0x2e8b(){const _0x49707e=['metadataResult','defineProperty','push','sourceMemberRecords','6797448Icgmhw','3193402VNgEwb','LoggerAdapter','22BagMDj','execute','Retrieved\x20metadata\x20items\x20completed','775VrVbqD','42798kRIJQx','stream','createDeclarativeFilter','13428mttlWJ','31119370NnkiYb','metadataId','constructor','search','1519917RuZGqu','_transform','metadataTypes','handle','__esModule','update','84fMiOTM','MetadataRetriever','_flush','files','apply','length','503514uignGt','listMetadataItem','log','40fZxENG','find','metadataType','instance','(((.+)+)+)+$','toString','components','logger','@flosum/salesforce'];a342_0x2e8b=function(){return _0x49707e;};return a342_0x2e8b();}class MetadataRetriever extends stream_1['Transform']{constructor({apiVersion:_0x59e68f,instance:_0x210226,metadataTypes:_0x5e1cfb,logger:_0x197111}){const _0x1923ff=a342_0x422b05;super({'objectMode':!![]}),this[_0x1923ff(0xf9)]=[],this['api']=_0x59e68f,this[_0x1923ff(0xf4)]=_0x197111,this[_0x1923ff(0xf0)]=_0x210226,this[_0x1923ff(0x10b)]=_0x5e1cfb;}[a342_0x422b05(0x103)](){const _0x5c278b=this['sourceMemberRecords']['map'](_0x5247c0=>_0x5247c0['metadataId'])['join'](';'),_0x4f7e11=[];return _0x4f7e11['push']({'field':'id','option':salesforce_1['DeclarativeFilterOptions']['IN'],'value':_0x5c278b}),_0x4f7e11;}async['retrieveMetadata'](){const _0x5c675c=a342_0x422b05,_0x14878b=this[_0x5c675c(0x103)](),_0x38caab=new logger_adapter_1[(_0x5c675c(0xfc))](this['logger']);this[_0x5c675c(0xf6)]=await new salesforce_1['PartialRetrieve'](this['api'],this[_0x5c675c(0xf0)],_0x38caab,_0x14878b,null,this[_0x5c675c(0x10b)])[_0x5c675c(0xfe)]();}async[a342_0x422b05(0x10c)](){const _0x588a7f=a342_0x422b05;await this['retrieveMetadata']();for(const _0x339455 of this[_0x588a7f(0xf9)]){const _0x554e7c=this[_0x588a7f(0xf6)]['items'][_0x339455[_0x588a7f(0xef)]],_0x418f68=_0x554e7c[_0x588a7f(0xf3)][_0x588a7f(0xee)](_0x302bc7=>_0x302bc7[_0x588a7f(0xeb)]['id']===_0x339455[_0x588a7f(0x106)]);if(!_0x418f68)continue;const _0x44e99e={'sourceMemberRecord':_0x339455,'listMetadataItem':_0x418f68[_0x588a7f(0xeb)],'files':_0x418f68[_0x588a7f(0x112)]};this[_0x588a7f(0xf8)](_0x44e99e);}}async[a342_0x422b05(0x10a)](_0x3a433b,_0x1b4c4b,_0x29974c){const _0x1cf18c=a342_0x422b05;try{this[_0x1cf18c(0xf9)][_0x1cf18c(0xf8)](_0x3a433b),_0x29974c();}catch(_0x11bb58){_0x29974c(_0x11bb58);}}async[a342_0x422b05(0x111)](_0x1a6f5a){const _0x273648=a342_0x422b05;try{this[_0x273648(0xf9)][_0x273648(0xe9)]&&await this[_0x273648(0x10c)](),this['logger'][_0x273648(0xec)](_0x273648(0xff)),await this[_0x273648(0xf4)][_0x273648(0x10e)](),_0x1a6f5a();}catch(_0x2d1108){_0x1a6f5a(_0x2d1108);}}}exports[a342_0x422b05(0x110)]=MetadataRetriever;