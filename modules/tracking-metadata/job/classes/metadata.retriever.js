const a299_0x9ee6ac=a299_0x7241;(function(_0x3ae0d3,_0x22a43e){const _0x44b007=a299_0x7241,_0x5b0888=_0x3ae0d3();while(!![]){try{const _0x777081=parseInt(_0x44b007(0xa1))/0x1+-parseInt(_0x44b007(0xa2))/0x2*(-parseInt(_0x44b007(0xb6))/0x3)+parseInt(_0x44b007(0xba))/0x4+-parseInt(_0x44b007(0x97))/0x5+parseInt(_0x44b007(0xaa))/0x6+-parseInt(_0x44b007(0x99))/0x7*(-parseInt(_0x44b007(0xb3))/0x8)+parseInt(_0x44b007(0xbb))/0x9*(-parseInt(_0x44b007(0xb4))/0xa);if(_0x777081===_0x22a43e)break;else _0x5b0888['push'](_0x5b0888['shift']());}catch(_0x419ab1){_0x5b0888['push'](_0x5b0888['shift']());}}}(a299_0x1a7f,0x7f175));const a299_0x5736a7=(function(){let _0x2a6a78=!![];return function(_0x370ab3,_0x21e75e){const _0x2e2a89=_0x2a6a78?function(){if(_0x21e75e){const _0x417441=_0x21e75e['apply'](_0x370ab3,arguments);return _0x21e75e=null,_0x417441;}}:function(){};return _0x2a6a78=![],_0x2e2a89;};}()),a299_0x5ac2f4=a299_0x5736a7(this,function(){const _0xf51ab0=a299_0x7241;return a299_0x5ac2f4['toString']()[_0xf51ab0(0x94)]('(((.+)+)+)+$')[_0xf51ab0(0x98)]()[_0xf51ab0(0xb8)](a299_0x5ac2f4)[_0xf51ab0(0x94)](_0xf51ab0(0x95));});a299_0x5ac2f4();'use strict';Object['defineProperty'](exports,a299_0x9ee6ac(0xb0),{'value':!![]}),exports[a299_0x9ee6ac(0xa0)]=void 0x0;function a299_0x7241(_0x3f9c73,_0x124786){const _0x5e42bd=a299_0x1a7f();return a299_0x7241=function(_0x5ac2f4,_0x5736a7){_0x5ac2f4=_0x5ac2f4-0x92;let _0x1a7f08=_0x5e42bd[_0x5ac2f4];return _0x1a7f08;},a299_0x7241(_0x3f9c73,_0x124786);}function a299_0x1a7f(){const _0x5caa55=['7FsJAxK','instance','_transform','api','join','push','stream','MetadataRetriever','203757jXcNWU','221878nVJdZQ','PartialRetrieve','sourceMemberRecords','./logger/logger.adapter','log','Retrieved\x20metadata\x20items\x20completed','map','items','1178418iHqdKo','metadataType','logger','DeclarativeFilterOptions','retrieveMetadata','listMetadataItem','__esModule','handle','@flosum/salesforce','7670664LrJsuQ','1030cwGOZl','components','9uKQges','files','constructor','metadataTypes','3553152AopkMW','176067sSfaay','_flush','metadataId','search','(((.+)+)+)+$','metadataResult','222720ARnNJk','toString'];a299_0x1a7f=function(){return _0x5caa55;};return a299_0x1a7f();}const salesforce_1=require(a299_0x9ee6ac(0xb2)),stream_1=require(a299_0x9ee6ac(0x9f)),logger_adapter_1=require(a299_0x9ee6ac(0xa5));class MetadataRetriever extends stream_1['Transform']{constructor({apiVersion:_0x7fa05b,instance:_0x57b50f,metadataTypes:_0x369a43,logger:_0x5b334b}){const _0x2b135e=a299_0x9ee6ac;super({'objectMode':!![]}),this['sourceMemberRecords']=[],this['api']=_0x7fa05b,this['logger']=_0x5b334b,this[_0x2b135e(0x9a)]=_0x57b50f,this[_0x2b135e(0xb9)]=_0x369a43;}['createDeclarativeFilter'](){const _0x12cc7a=a299_0x9ee6ac,_0x2b21ef=this['sourceMemberRecords'][_0x12cc7a(0xa8)](_0x638b6e=>_0x638b6e[_0x12cc7a(0x93)])[_0x12cc7a(0x9d)](';'),_0x59241b=[];return _0x59241b[_0x12cc7a(0x9e)]({'field':'id','option':salesforce_1[_0x12cc7a(0xad)]['IN'],'value':_0x2b21ef}),_0x59241b;}async[a299_0x9ee6ac(0xae)](){const _0x2b825d=a299_0x9ee6ac,_0x3bb574=this['createDeclarativeFilter'](),_0x20fe81=new logger_adapter_1['LoggerAdapter'](this['logger']);this[_0x2b825d(0x96)]=await new salesforce_1[(_0x2b825d(0xa3))](this[_0x2b825d(0x9c)],this[_0x2b825d(0x9a)],_0x20fe81,_0x3bb574,null,this[_0x2b825d(0xb9)])['execute']();}async[a299_0x9ee6ac(0xb1)](){const _0x366eb7=a299_0x9ee6ac;await this[_0x366eb7(0xae)]();for(const _0x278725 of this[_0x366eb7(0xa4)]){const _0x2c4dae=this[_0x366eb7(0x96)][_0x366eb7(0xa9)][_0x278725[_0x366eb7(0xab)]],_0x43456d=_0x2c4dae[_0x366eb7(0xb5)]['find'](_0xefdf52=>_0xefdf52[_0x366eb7(0xaf)]['id']===_0x278725[_0x366eb7(0x93)]);if(!_0x43456d)continue;const _0x4e297c={'sourceMemberRecord':_0x278725,'listMetadataItem':_0x43456d[_0x366eb7(0xaf)],'files':_0x43456d[_0x366eb7(0xb7)]};this[_0x366eb7(0x9e)](_0x4e297c);}}async[a299_0x9ee6ac(0x9b)](_0x2ef569,_0xd3b49e,_0x129584){const _0x375393=a299_0x9ee6ac;try{this[_0x375393(0xa4)][_0x375393(0x9e)](_0x2ef569),_0x129584();}catch(_0x3e5806){_0x129584(_0x3e5806);}}async[a299_0x9ee6ac(0x92)](_0x5131be){const _0x193a54=a299_0x9ee6ac;try{this[_0x193a54(0xa4)]['length']&&await this[_0x193a54(0xb1)](),this[_0x193a54(0xac)][_0x193a54(0xa6)](_0x193a54(0xa7)),await this[_0x193a54(0xac)]['update'](),_0x5131be();}catch(_0x2a3fcb){_0x5131be(_0x2a3fcb);}}}exports[a299_0x9ee6ac(0xa0)]=MetadataRetriever;