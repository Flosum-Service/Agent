function a299_0x14d4(){const _0xa48ac8=['__esModule','sourceMemberRecords','metadataType','_transform','DeclarativeFilterOptions','MetadataRetriever','(((.+)+)+)+$','defineProperty','stream','276822qLJRxm','Transform','logger','627557yEhSKr','createDeclarativeFilter','log','912grWjGn','instance','execute','543213tgJorW','api','toString','@flosum/salesforce','retrieveMetadata','metadataResult','find','length','1809224IRarkf','metadataTypes','2295cNLZeP','470046aVFtqq','Retrieved\x20metadata\x20items\x20completed','listMetadataItem','11691POUOdt','_flush','search','constructor','push','items','files','update'];a299_0x14d4=function(){return _0xa48ac8;};return a299_0x14d4();}function a299_0x5842(_0x21de4e,_0x28b601){const _0x5668da=a299_0x14d4();return a299_0x5842=function(_0x7b471b,_0x3486f6){_0x7b471b=_0x7b471b-0xab;let _0x14d422=_0x5668da[_0x7b471b];return _0x14d422;},a299_0x5842(_0x21de4e,_0x28b601);}const a299_0x1b09e2=a299_0x5842;(function(_0x27a560,_0x194cf3){const _0x168ee2=a299_0x5842,_0x118e81=_0x27a560();while(!![]){try{const _0x1e4c68=-parseInt(_0x168ee2(0xcf))/0x1+parseInt(_0x168ee2(0xcc))/0x2+-parseInt(_0x168ee2(0xc1))/0x3+parseInt(_0x168ee2(0xbe))/0x4*(-parseInt(_0x168ee2(0xcb))/0x5)+parseInt(_0x168ee2(0xb8))/0x6+-parseInt(_0x168ee2(0xbb))/0x7+parseInt(_0x168ee2(0xc9))/0x8;if(_0x1e4c68===_0x194cf3)break;else _0x118e81['push'](_0x118e81['shift']());}catch(_0x51a99d){_0x118e81['push'](_0x118e81['shift']());}}}(a299_0x14d4,0x1d5b8));const a299_0x3486f6=(function(){let _0x3be25b=!![];return function(_0x338d51,_0x46f4cf){const _0x15a047=_0x3be25b?function(){if(_0x46f4cf){const _0x465f53=_0x46f4cf['apply'](_0x338d51,arguments);return _0x46f4cf=null,_0x465f53;}}:function(){};return _0x3be25b=![],_0x15a047;};}()),a299_0x7b471b=a299_0x3486f6(this,function(){const _0x155dc0=a299_0x5842;return a299_0x7b471b[_0x155dc0(0xc3)]()[_0x155dc0(0xd1)](_0x155dc0(0xb5))[_0x155dc0(0xc3)]()[_0x155dc0(0xd2)](a299_0x7b471b)[_0x155dc0(0xd1)]('(((.+)+)+)+$');});a299_0x7b471b();'use strict';Object[a299_0x1b09e2(0xb6)](exports,a299_0x1b09e2(0xaf),{'value':!![]}),exports[a299_0x1b09e2(0xb4)]=void 0x0;const salesforce_1=require(a299_0x1b09e2(0xc4)),stream_1=require(a299_0x1b09e2(0xb7)),logger_adapter_1=require('./logger/logger.adapter');class MetadataRetriever extends stream_1[a299_0x1b09e2(0xb9)]{constructor({apiVersion:_0x3c0f30,instance:_0x29974e,metadataTypes:_0x449e93,logger:_0x47bcbe}){const _0x1eea6a=a299_0x1b09e2;super({'objectMode':!![]}),this[_0x1eea6a(0xb0)]=[],this[_0x1eea6a(0xc2)]=_0x3c0f30,this[_0x1eea6a(0xba)]=_0x47bcbe,this[_0x1eea6a(0xbf)]=_0x29974e,this[_0x1eea6a(0xca)]=_0x449e93;}[a299_0x1b09e2(0xbc)](){const _0x18d456=a299_0x1b09e2,_0x416c7e=this['sourceMemberRecords']['map'](_0x293b77=>_0x293b77['metadataId'])['join'](';'),_0x5b1909=[];return _0x5b1909[_0x18d456(0xab)]({'field':'id','option':salesforce_1[_0x18d456(0xb3)]['IN'],'value':_0x416c7e}),_0x5b1909;}async[a299_0x1b09e2(0xc5)](){const _0x25283c=a299_0x1b09e2,_0x592e54=this['createDeclarativeFilter'](),_0x29151c=new logger_adapter_1['LoggerAdapter'](this[_0x25283c(0xba)]);this[_0x25283c(0xc6)]=await new salesforce_1['PartialRetrieve'](this[_0x25283c(0xc2)],this[_0x25283c(0xbf)],_0x29151c,_0x592e54,null,this[_0x25283c(0xca)])[_0x25283c(0xc0)]();}async['handle'](){const _0x40ab62=a299_0x1b09e2;await this[_0x40ab62(0xc5)]();for(const _0x23ddd9 of this[_0x40ab62(0xb0)]){const _0x283e94=this['metadataResult'][_0x40ab62(0xac)][_0x23ddd9[_0x40ab62(0xb1)]],_0x2e6630=_0x283e94['components'][_0x40ab62(0xc7)](_0x534e47=>_0x534e47[_0x40ab62(0xce)]['id']===_0x23ddd9['metadataId']);if(!_0x2e6630)continue;const _0x5d138c={'sourceMemberRecord':_0x23ddd9,'listMetadataItem':_0x2e6630['listMetadataItem'],'files':_0x2e6630[_0x40ab62(0xad)]};this['push'](_0x5d138c);}}async[a299_0x1b09e2(0xb2)](_0x1ef06f,_0x4e14d6,_0x3545af){const _0x15812e=a299_0x1b09e2;try{this[_0x15812e(0xb0)][_0x15812e(0xab)](_0x1ef06f),_0x3545af();}catch(_0x2954d7){_0x3545af(_0x2954d7);}}async[a299_0x1b09e2(0xd0)](_0x7e6af7){const _0x1fb6b2=a299_0x1b09e2;try{this[_0x1fb6b2(0xb0)][_0x1fb6b2(0xc8)]&&await this['handle'](),this[_0x1fb6b2(0xba)][_0x1fb6b2(0xbd)](_0x1fb6b2(0xcd)),await this[_0x1fb6b2(0xba)][_0x1fb6b2(0xae)](),_0x7e6af7();}catch(_0x177bb3){_0x7e6af7(_0x177bb3);}}}exports[a299_0x1b09e2(0xb4)]=MetadataRetriever;