function a299_0x534a(_0xb82118,_0x43cc82){const _0x99ca82=a299_0x1cf4();return a299_0x534a=function(_0x580c02,_0x29ad1a){_0x580c02=_0x580c02-0xac;let _0x1cf441=_0x99ca82[_0x580c02];return _0x1cf441;},a299_0x534a(_0xb82118,_0x43cc82);}const a299_0x104d6a=a299_0x534a;(function(_0x46eaba,_0x1e6511){const _0x16603c=a299_0x534a,_0x54adc9=_0x46eaba();while(!![]){try{const _0x328937=parseInt(_0x16603c(0xac))/0x1+parseInt(_0x16603c(0xb3))/0x2+-parseInt(_0x16603c(0xbf))/0x3+-parseInt(_0x16603c(0xc3))/0x4+parseInt(_0x16603c(0xc7))/0x5+-parseInt(_0x16603c(0xba))/0x6+parseInt(_0x16603c(0xae))/0x7*(parseInt(_0x16603c(0xb7))/0x8);if(_0x328937===_0x1e6511)break;else _0x54adc9['push'](_0x54adc9['shift']());}catch(_0x14ae95){_0x54adc9['push'](_0x54adc9['shift']());}}}(a299_0x1cf4,0xae63a));const a299_0x29ad1a=(function(){let _0x1a3c1a=!![];return function(_0x326815,_0x5eba33){const _0x54d39e=_0x1a3c1a?function(){if(_0x5eba33){const _0xf60915=_0x5eba33['apply'](_0x326815,arguments);return _0x5eba33=null,_0xf60915;}}:function(){};return _0x1a3c1a=![],_0x54d39e;};}()),a299_0x580c02=a299_0x29ad1a(this,function(){const _0x88d3a6=a299_0x534a;return a299_0x580c02[_0x88d3a6(0xbd)]()[_0x88d3a6(0xcd)](_0x88d3a6(0xb6))['toString']()['constructor'](a299_0x580c02)[_0x88d3a6(0xcd)]('(((.+)+)+)+$');});a299_0x580c02();'use strict';Object['defineProperty'](exports,a299_0x104d6a(0xbb),{'value':!![]}),exports[a299_0x104d6a(0xd0)]=void 0x0;const salesforce_1=require(a299_0x104d6a(0xb0)),stream_1=require(a299_0x104d6a(0xc9)),logger_adapter_1=require('./logger/logger.adapter');function a299_0x1cf4(){const _0x6a3a91=['length','6752628GbFdYx','__esModule','instance','toString','api','2118255Tecrja','items','metadataResult','execute','265988DNWrUh','DeclarativeFilterOptions','handle','metadataType','5011630OzjUBQ','_flush','stream','join','metadataId','sourceMemberRecords','search','metadataTypes','find','MetadataRetriever','retrieveMetadata','LoggerAdapter','448929MBRmEV','logger','259VIQCwB','listMetadataItem','@flosum/salesforce','Retrieved\x20metadata\x20items\x20completed','map','1426800UErEhE','push','log','(((.+)+)+)+$','96792vJgOwf','createDeclarativeFilter'];a299_0x1cf4=function(){return _0x6a3a91;};return a299_0x1cf4();}class MetadataRetriever extends stream_1['Transform']{constructor({apiVersion:_0x9e06c9,instance:_0xd6728c,metadataTypes:_0x5c7202,logger:_0x2f9d3d}){const _0x263642=a299_0x104d6a;super({'objectMode':!![]}),this[_0x263642(0xcc)]=[],this['api']=_0x9e06c9,this['logger']=_0x2f9d3d,this[_0x263642(0xbc)]=_0xd6728c,this[_0x263642(0xce)]=_0x5c7202;}['createDeclarativeFilter'](){const _0x35cd73=a299_0x104d6a,_0x583563=this[_0x35cd73(0xcc)][_0x35cd73(0xb2)](_0x27fb2f=>_0x27fb2f['metadataId'])[_0x35cd73(0xca)](';'),_0x293a4a=[];return _0x293a4a[_0x35cd73(0xb4)]({'field':'id','option':salesforce_1[_0x35cd73(0xc4)]['IN'],'value':_0x583563}),_0x293a4a;}async[a299_0x104d6a(0xd1)](){const _0x1f20d5=a299_0x104d6a,_0xc17746=this[_0x1f20d5(0xb8)](),_0x23d895=new logger_adapter_1[(_0x1f20d5(0xd2))](this[_0x1f20d5(0xad)]);this[_0x1f20d5(0xc1)]=await new salesforce_1['PartialRetrieve'](this[_0x1f20d5(0xbe)],this[_0x1f20d5(0xbc)],_0x23d895,_0xc17746,null,this[_0x1f20d5(0xce)])[_0x1f20d5(0xc2)]();}async[a299_0x104d6a(0xc5)](){const _0x335ebd=a299_0x104d6a;await this[_0x335ebd(0xd1)]();for(const _0x44c6a8 of this['sourceMemberRecords']){const _0x46f01b=this['metadataResult'][_0x335ebd(0xc0)][_0x44c6a8[_0x335ebd(0xc6)]],_0x776ac7=_0x46f01b['components'][_0x335ebd(0xcf)](_0x40868a=>_0x40868a[_0x335ebd(0xaf)]['id']===_0x44c6a8[_0x335ebd(0xcb)]);if(!_0x776ac7)continue;const _0x774867={'sourceMemberRecord':_0x44c6a8,'listMetadataItem':_0x776ac7[_0x335ebd(0xaf)],'files':_0x776ac7['files']};this[_0x335ebd(0xb4)](_0x774867);}}async['_transform'](_0x1cacca,_0x191e63,_0xe5b30d){const _0x3bfe11=a299_0x104d6a;try{this['sourceMemberRecords'][_0x3bfe11(0xb4)](_0x1cacca),_0xe5b30d();}catch(_0x154bea){_0xe5b30d(_0x154bea);}}async[a299_0x104d6a(0xc8)](_0x187208){const _0x5acb11=a299_0x104d6a;try{this[_0x5acb11(0xcc)][_0x5acb11(0xb9)]&&await this[_0x5acb11(0xc5)](),this[_0x5acb11(0xad)][_0x5acb11(0xb5)](_0x5acb11(0xb1)),await this[_0x5acb11(0xad)]['update'](),_0x187208();}catch(_0x109e08){_0x187208(_0x109e08);}}}exports[a299_0x104d6a(0xd0)]=MetadataRetriever;