const a299_0x4dae8a=a299_0x113a;(function(_0x180c6a,_0x20123c){const _0x2ae8e2=a299_0x113a,_0x11d00d=_0x180c6a();while(!![]){try{const _0x4e7d95=-parseInt(_0x2ae8e2(0xd3))/0x1*(-parseInt(_0x2ae8e2(0xe0))/0x2)+-parseInt(_0x2ae8e2(0xc5))/0x3+-parseInt(_0x2ae8e2(0xc8))/0x4*(-parseInt(_0x2ae8e2(0xc6))/0x5)+parseInt(_0x2ae8e2(0xd9))/0x6+parseInt(_0x2ae8e2(0xda))/0x7+parseInt(_0x2ae8e2(0xbb))/0x8+-parseInt(_0x2ae8e2(0xdf))/0x9;if(_0x4e7d95===_0x20123c)break;else _0x11d00d['push'](_0x11d00d['shift']());}catch(_0x9c96ad){_0x11d00d['push'](_0x11d00d['shift']());}}}(a299_0x1231,0xdbbe8));const a299_0x57ef93=(function(){let _0x5b742c=!![];return function(_0xa43a35,_0x1de443){const _0x4969fa=_0x5b742c?function(){const _0x52efa1=a299_0x113a;if(_0x1de443){const _0xe21e76=_0x1de443[_0x52efa1(0xd1)](_0xa43a35,arguments);return _0x1de443=null,_0xe21e76;}}:function(){};return _0x5b742c=![],_0x4969fa;};}()),a299_0x417859=a299_0x57ef93(this,function(){const _0x14ae1a=a299_0x113a;return a299_0x417859[_0x14ae1a(0xd6)]()[_0x14ae1a(0xc3)](_0x14ae1a(0xbf))['toString']()[_0x14ae1a(0xc4)](a299_0x417859)['search']('(((.+)+)+)+$');});a299_0x417859();'use strict';function a299_0x113a(_0x4c2afa,_0x79a39b){const _0x4f3862=a299_0x1231();return a299_0x113a=function(_0x417859,_0x57ef93){_0x417859=_0x417859-0xb7;let _0x123166=_0x4f3862[_0x417859];return _0x123166;},a299_0x113a(_0x4c2afa,_0x79a39b);}function a299_0x1231(){const _0x5e1a28=['2911716LmArWX','139657sYBvcj','MetadataRetriever','Retrieved\x20metadata\x20items\x20completed','components','metadataId','26130969swDJTT','1055458JzKImi','map','files','metadataTypes','api','createDeclarativeFilter','12959528dVvQoS','metadataType','LoggerAdapter','handle','(((.+)+)+)+$','metadataResult','@flosum/salesforce','length','search','constructor','4499358kORyZr','10xQxWDD','listMetadataItem','3189868VYGHfs','retrieveMetadata','logger','find','Transform','items','update','execute','join','apply','instance','3pLxInB','log','PartialRetrieve','toString','sourceMemberRecords','push'];a299_0x1231=function(){return _0x5e1a28;};return a299_0x1231();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a299_0x4dae8a(0xdb)]=void 0x0;const salesforce_1=require(a299_0x4dae8a(0xc1)),stream_1=require('stream'),logger_adapter_1=require('./logger/logger.adapter');class MetadataRetriever extends stream_1[a299_0x4dae8a(0xcc)]{constructor({apiVersion:_0x353c85,instance:_0x5a5c50,metadataTypes:_0x4863be,logger:_0x421928}){const _0x9273ae=a299_0x4dae8a;super({'objectMode':!![]}),this[_0x9273ae(0xd7)]=[],this['api']=_0x353c85,this['logger']=_0x421928,this['instance']=_0x5a5c50,this[_0x9273ae(0xb8)]=_0x4863be;}[a299_0x4dae8a(0xba)](){const _0x3fe31a=a299_0x4dae8a,_0x1bc593=this['sourceMemberRecords'][_0x3fe31a(0xe1)](_0x345729=>_0x345729[_0x3fe31a(0xde)])[_0x3fe31a(0xd0)](';'),_0x4d3ff8=[];return _0x4d3ff8[_0x3fe31a(0xd8)]({'field':'id','option':salesforce_1['DeclarativeFilterOptions']['IN'],'value':_0x1bc593}),_0x4d3ff8;}async[a299_0x4dae8a(0xc9)](){const _0x4eb1dd=a299_0x4dae8a,_0x50c0ad=this[_0x4eb1dd(0xba)](),_0x7772bb=new logger_adapter_1[(_0x4eb1dd(0xbd))](this[_0x4eb1dd(0xca)]);this[_0x4eb1dd(0xc0)]=await new salesforce_1[(_0x4eb1dd(0xd5))](this[_0x4eb1dd(0xb9)],this[_0x4eb1dd(0xd2)],_0x7772bb,_0x50c0ad,null,this['metadataTypes'])[_0x4eb1dd(0xcf)]();}async[a299_0x4dae8a(0xbe)](){const _0x118b37=a299_0x4dae8a;await this[_0x118b37(0xc9)]();for(const _0x58fdca of this[_0x118b37(0xd7)]){const _0x3c630f=this[_0x118b37(0xc0)][_0x118b37(0xcd)][_0x58fdca[_0x118b37(0xbc)]],_0x1f6e50=_0x3c630f[_0x118b37(0xdd)][_0x118b37(0xcb)](_0x2c39ad=>_0x2c39ad['listMetadataItem']['id']===_0x58fdca[_0x118b37(0xde)]);if(!_0x1f6e50)continue;const _0x2e9bb7={'sourceMemberRecord':_0x58fdca,'listMetadataItem':_0x1f6e50[_0x118b37(0xc7)],'files':_0x1f6e50[_0x118b37(0xb7)]};this['push'](_0x2e9bb7);}}async['_transform'](_0x19afa0,_0x27443a,_0x356e50){const _0x3cb587=a299_0x4dae8a;try{this[_0x3cb587(0xd7)]['push'](_0x19afa0),_0x356e50();}catch(_0x305689){_0x356e50(_0x305689);}}async['_flush'](_0x2699bc){const _0x27c93b=a299_0x4dae8a;try{this['sourceMemberRecords'][_0x27c93b(0xc2)]&&await this['handle'](),this[_0x27c93b(0xca)][_0x27c93b(0xd4)](_0x27c93b(0xdc)),await this[_0x27c93b(0xca)][_0x27c93b(0xce)](),_0x2699bc();}catch(_0x152f7b){_0x2699bc(_0x152f7b);}}}exports[a299_0x4dae8a(0xdb)]=MetadataRetriever;