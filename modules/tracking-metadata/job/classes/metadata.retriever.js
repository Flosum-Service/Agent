const a299_0x7d8819=a299_0x334b;(function(_0x273849,_0x373144){const _0x269518=a299_0x334b,_0x24bdfa=_0x273849();while(!![]){try{const _0x522a0c=-parseInt(_0x269518(0x175))/0x1*(parseInt(_0x269518(0x17d))/0x2)+-parseInt(_0x269518(0x177))/0x3*(parseInt(_0x269518(0x172))/0x4)+-parseInt(_0x269518(0x178))/0x5*(-parseInt(_0x269518(0x171))/0x6)+parseInt(_0x269518(0x164))/0x7*(parseInt(_0x269518(0x15e))/0x8)+-parseInt(_0x269518(0x170))/0x9*(parseInt(_0x269518(0x15d))/0xa)+-parseInt(_0x269518(0x176))/0xb*(-parseInt(_0x269518(0x157))/0xc)+-parseInt(_0x269518(0x173))/0xd;if(_0x522a0c===_0x373144)break;else _0x24bdfa['push'](_0x24bdfa['shift']());}catch(_0x3456c4){_0x24bdfa['push'](_0x24bdfa['shift']());}}}(a299_0x534d,0x75d67));const a299_0x217ffd=(function(){let _0x384e0b=!![];return function(_0x572bf1,_0x23e5df){const _0x3c99df=_0x384e0b?function(){const _0x4b2418=a299_0x334b;if(_0x23e5df){const _0x5b39b0=_0x23e5df[_0x4b2418(0x17a)](_0x572bf1,arguments);return _0x23e5df=null,_0x5b39b0;}}:function(){};return _0x384e0b=![],_0x3c99df;};}()),a299_0x7113b2=a299_0x217ffd(this,function(){const _0x50c832=a299_0x334b;return a299_0x7113b2[_0x50c832(0x179)]()[_0x50c832(0x174)]('(((.+)+)+)+$')[_0x50c832(0x179)]()[_0x50c832(0x160)](a299_0x7113b2)['search'](_0x50c832(0x159));});function a299_0x534d(){const _0x656303=['find','logger','10RbOfCG','8eDXXcr','sourceMemberRecords','constructor','push','api','_transform','2034011xKVmed','metadataId','length','execute','components','./logger/logger.adapter','DeclarativeFilterOptions','retrieveMetadata','PartialRetrieve','items','defineProperty','metadataResult','104499KVAPgr','369546cnOgBg','16glYGrP','1896037QAzjwP','search','21095tCCCut','1706606JmYawu','452391OjgXyh','60SETyXw','toString','apply','metadataTypes','createDeclarativeFilter','68DTosGS','handle','metadataType','files','instance','stream','listMetadataItem','72MhNsLy','@flosum/salesforce','(((.+)+)+)+$','MetadataRetriever'];a299_0x534d=function(){return _0x656303;};return a299_0x534d();}a299_0x7113b2();'use strict';Object[a299_0x7d8819(0x16e)](exports,'__esModule',{'value':!![]}),exports['MetadataRetriever']=void 0x0;function a299_0x334b(_0x15efc7,_0x5882aa){const _0x2c4bd6=a299_0x534d();return a299_0x334b=function(_0x7113b2,_0x217ffd){_0x7113b2=_0x7113b2-0x153;let _0x534d11=_0x2c4bd6[_0x7113b2];return _0x534d11;},a299_0x334b(_0x15efc7,_0x5882aa);}const salesforce_1=require(a299_0x7d8819(0x158)),stream_1=require(a299_0x7d8819(0x155)),logger_adapter_1=require(a299_0x7d8819(0x169));class MetadataRetriever extends stream_1['Transform']{constructor({apiVersion:_0x5035e2,instance:_0x4c978a,metadataTypes:_0x4163e8,logger:_0x4c2871}){const _0x52359e=a299_0x7d8819;super({'objectMode':!![]}),this[_0x52359e(0x15f)]=[],this['api']=_0x5035e2,this['logger']=_0x4c2871,this[_0x52359e(0x154)]=_0x4c978a,this['metadataTypes']=_0x4163e8;}['createDeclarativeFilter'](){const _0x293912=a299_0x7d8819,_0x541b47=this['sourceMemberRecords']['map'](_0x2251ae=>_0x2251ae[_0x293912(0x165)])['join'](';'),_0x385b6c=[];return _0x385b6c[_0x293912(0x161)]({'field':'id','option':salesforce_1[_0x293912(0x16a)]['IN'],'value':_0x541b47}),_0x385b6c;}async[a299_0x7d8819(0x16b)](){const _0x532067=a299_0x7d8819,_0x22e110=this[_0x532067(0x17c)](),_0x4277a9=new logger_adapter_1['LoggerAdapter'](this['logger']);this[_0x532067(0x16f)]=await new salesforce_1[(_0x532067(0x16c))](this[_0x532067(0x162)],this[_0x532067(0x154)],_0x4277a9,_0x22e110,null,this[_0x532067(0x17b)])[_0x532067(0x167)]();}async[a299_0x7d8819(0x17e)](){const _0x13a880=a299_0x7d8819;await this[_0x13a880(0x16b)]();for(const _0x3e10bb of this['sourceMemberRecords']){const _0xd9df3c=this['metadataResult'][_0x13a880(0x16d)][_0x3e10bb[_0x13a880(0x17f)]],_0x4cd056=_0xd9df3c[_0x13a880(0x168)][_0x13a880(0x15b)](_0x136a25=>_0x136a25[_0x13a880(0x156)]['id']===_0x3e10bb[_0x13a880(0x165)]);if(!_0x4cd056)continue;const _0x1213f0={'sourceMemberRecord':_0x3e10bb,'listMetadataItem':_0x4cd056[_0x13a880(0x156)],'files':_0x4cd056[_0x13a880(0x153)]};this[_0x13a880(0x161)](_0x1213f0);}}async[a299_0x7d8819(0x163)](_0x2633a1,_0xb93684,_0x208e35){const _0x2c059c=a299_0x7d8819;try{this['sourceMemberRecords'][_0x2c059c(0x161)](_0x2633a1),_0x208e35();}catch(_0x513b33){_0x208e35(_0x513b33);}}async['_flush'](_0x23d727){const _0x50254c=a299_0x7d8819;try{this[_0x50254c(0x15f)][_0x50254c(0x166)]&&await this[_0x50254c(0x17e)](),this[_0x50254c(0x15c)]['log']('Retrieved\x20metadata\x20items\x20completed'),await this[_0x50254c(0x15c)]['update'](),_0x23d727();}catch(_0x39d1be){_0x23d727(_0x39d1be);}}}exports[a299_0x7d8819(0x15a)]=MetadataRetriever;