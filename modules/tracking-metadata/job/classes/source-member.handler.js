const a300_0x463633=a300_0x2a13;(function(_0x4743b4,_0xa2986d){const _0x4b7991=a300_0x2a13,_0x617c0c=_0x4743b4();while(!![]){try{const _0x4fe27c=-parseInt(_0x4b7991(0x1ca))/0x1*(-parseInt(_0x4b7991(0x1c8))/0x2)+-parseInt(_0x4b7991(0x1a7))/0x3*(-parseInt(_0x4b7991(0x1d4))/0x4)+parseInt(_0x4b7991(0x1cf))/0x5*(-parseInt(_0x4b7991(0x1b1))/0x6)+parseInt(_0x4b7991(0x1a2))/0x7+parseInt(_0x4b7991(0x1e1))/0x8*(-parseInt(_0x4b7991(0x1aa))/0x9)+-parseInt(_0x4b7991(0x1b0))/0xa*(parseInt(_0x4b7991(0x1a5))/0xb)+parseInt(_0x4b7991(0x1ac))/0xc*(parseInt(_0x4b7991(0x1cd))/0xd);if(_0x4fe27c===_0xa2986d)break;else _0x617c0c['push'](_0x617c0c['shift']());}catch(_0x26c2f8){_0x617c0c['push'](_0x617c0c['shift']());}}}(a300_0x3f3e,0x1c7e3));const a300_0x26dd27=(function(){let _0x1aed34=!![];return function(_0x50a783,_0x1dbb5f){const _0x461ed2=_0x1aed34?function(){const _0x35f374=a300_0x2a13;if(_0x1dbb5f){const _0x1d1929=_0x1dbb5f[_0x35f374(0x1db)](_0x50a783,arguments);return _0x1dbb5f=null,_0x1d1929;}}:function(){};return _0x1aed34=![],_0x461ed2;};}()),a300_0xceeab7=a300_0x26dd27(this,function(){const _0x403ff3=a300_0x2a13;return a300_0xceeab7[_0x403ff3(0x1dd)]()['search'](_0x403ff3(0x1d9))['toString']()[_0x403ff3(0x1d0)](a300_0xceeab7)[_0x403ff3(0x1b3)](_0x403ff3(0x1d9));});a300_0xceeab7();'use strict';function a300_0x2a13(_0x136fe2,_0x1d69fb){const _0x7a1baf=a300_0x3f3e();return a300_0x2a13=function(_0xceeab7,_0x26dd27){_0xceeab7=_0xceeab7-0x1a1;let _0x3f3e36=_0x7a1baf[_0xceeab7];return _0x3f3e36;},a300_0x2a13(_0x136fe2,_0x1d69fb);}Object[a300_0x463633(0x1af)](exports,a300_0x463633(0x1e0),{'value':!![]}),exports[a300_0x463633(0x1c3)]=void 0x0;const stream_1=require(a300_0x463633(0x1d1)),salesforce_1=require(a300_0x463633(0x1da)),constants_1=require(a300_0x463633(0x1bc)),constants_2=require(a300_0x463633(0x1a6)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a300_0x463633(0x1a4),IS_NAME_OBSOLETE='IsNameObsolete',MEMBER_ID_FIELD_NAME=a300_0x463633(0x1c6),MEMBER_TYPE_FIELD_NAME=a300_0x463633(0x1d8),CHANGED_BY_FIELD_NAME=a300_0x463633(0x1ce),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a300_0x463633(0x1bb)]+a300_0x463633(0x1c7),ORGANIZATION_NAME_FIELD=constants_2[a300_0x463633(0x1bb)]+a300_0x463633(0x1b2),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2['FLOSUM_NAMESPACE']+'Revision_Counter__c',ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2['FLOSUM_NAMESPACE']+'Revision_Counter__c',constants_2[a300_0x463633(0x1bb)]+a300_0x463633(0x1dc),constants_2[a300_0x463633(0x1bb)]+a300_0x463633(0x1c2),constants_2[a300_0x463633(0x1bb)]+a300_0x463633(0x1d7),constants_2[a300_0x463633(0x1bb)]+'Source_Member_Id__c',constants_2[a300_0x463633(0x1bb)]+a300_0x463633(0x1b2),constants_2[a300_0x463633(0x1bb)]+a300_0x463633(0x1ba),constants_2[a300_0x463633(0x1bb)]+a300_0x463633(0x1c9)];function a300_0x3f3e(){const _0x358dd8=['FLOSUM_NAMESPACE','../../constants','handle','getIsDone','QueryBuilder','andWhere','\x20=\x20:targetOrgId','API_Name__c','SourceMemberHandler','addToChunk','CompositeRetrieveData','MemberIdOrName','Source_Member_Id__c','2686yYByqO','Folder__c','39nJgTlA','buildOrgComponentQuery','size','13hrSsQb','ChangedBy','3545mXTkCr','constructor','stream','execute','Changes\x20found\x20for\x20','4DyaMIv','logger','instance','Name__c','MemberType','(((.+)+)+)+$','@flosum/salesforce','apply','Component_Type__c','toString','_transform','set','__esModule','1115848cJGpcf','select','_flush','941934QYWvkt','where','RevisionCounter','627tFlNfl','../../../../constants','33162NbglUk','get','api','9CHQpzR','\x20IN\x20(:sourceMemberIds)','3707412DbvJmv','push','update','defineProperty','32300uOYAjY','564MqQWUb','OrganisationName__c','search','handledMembersCounter','\x20components','from','sourceMemberRecords','getComponentFromFlosum','ORG_COMPONENT_OBJECT_NAME','Attachment_ID__c'];a300_0x3f3e=function(){return _0x358dd8;};return a300_0x3f3e();}class SourceMemberHandler extends stream_1['Transform']{constructor({apiVersion:_0x3b152a,instance:_0x234af6,targetOrgId:_0x5c7529,logger:_0x217fe6}){const _0x26f772=a300_0x463633;super({'objectMode':!![]}),this[_0x26f772(0x1b7)]=new Map(),this[_0x26f772(0x1b4)]=0x0,this['api']=_0x3b152a,this[_0x26f772(0x1d6)]=_0x234af6,this['targetOrgId']=_0x5c7529,this[_0x26f772(0x1d5)]=_0x217fe6;}['buildOrgComponentQuery'](){const _0x4b2d4a=a300_0x463633;return new salesforce_1[(_0x4b2d4a(0x1bf))]()[_0x4b2d4a(0x1e2)](...ORG_COMPONENT_SELECT_FIELDS)[_0x4b2d4a(0x1b6)](constants_1[_0x4b2d4a(0x1b9)])[_0x4b2d4a(0x1a3)](SOURCE_MEMBER_ID_FIELD_NAME+_0x4b2d4a(0x1ab),{'sourceMemberIds':[...this['sourceMemberRecords']['keys']()]})[_0x4b2d4a(0x1c0)](ORGANIZATION_NAME_FIELD+_0x4b2d4a(0x1c1),{'targetOrgId':this['targetOrgId']});}async[a300_0x463633(0x1b8)](){const _0x121d2f=a300_0x463633,_0x5ea131=new salesforce_1[(_0x121d2f(0x1c5))]({'api':this[_0x121d2f(0x1a9)],'queryBuilder':this[_0x121d2f(0x1cb)](),'instance':this[_0x121d2f(0x1d6)],'isTooling':![]}),_0x2621fb=new Map();do{const {records:_0x181b45}=await _0x5ea131[_0x121d2f(0x1d2)]();for(const _0x15dc66 of _0x181b45){_0x2621fb['set'](_0x15dc66[SOURCE_MEMBER_ID_FIELD_NAME],_0x15dc66);}}while(!_0x5ea131[_0x121d2f(0x1be)]());return _0x2621fb;}async[a300_0x463633(0x1c4)](_0x1c7c18){const _0x1bb342=a300_0x463633;this[_0x1bb342(0x1b7)][_0x1bb342(0x1df)](_0x1c7c18['Id'],_0x1c7c18),this['sourceMemberRecords'][_0x1bb342(0x1cc)]===MAX_CHUNK_SIZE&&await this[_0x1bb342(0x1bd)]();}async[a300_0x463633(0x1bd)](){const _0x5c596d=a300_0x463633,_0x566369=await this[_0x5c596d(0x1b8)]();for(const [_0x498de9,_0x4b7b18]of this[_0x5c596d(0x1b7)]){const _0x64dc12=_0x566369[_0x5c596d(0x1a8)](_0x498de9);if(_0x64dc12&&_0x4b7b18[REVISION_COUNTER_FIELD_NAME]===_0x64dc12[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x147df7={'sourceMemberId':_0x4b7b18['Id'],'componentId':(_0x64dc12===null||_0x64dc12===void 0x0?void 0x0:_0x64dc12['Id'])||null,'attachmentId':(_0x64dc12===null||_0x64dc12===void 0x0?void 0x0:_0x64dc12['Attachment_ID__c'])||null,'metadataId':_0x4b7b18[MEMBER_ID_FIELD_NAME],'metadataType':_0x4b7b18[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x4b7b18[IS_NAME_OBSOLETE],'revisionCounter':_0x4b7b18[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x4b7b18[CHANGED_BY_FIELD_NAME]};this[_0x5c596d(0x1b4)]++,this[_0x5c596d(0x1ad)](_0x147df7);}this[_0x5c596d(0x1b7)]=new Map();}async[a300_0x463633(0x1de)](_0x437824,_0x305933,_0x20795a){const _0x29907e=a300_0x463633;try{await this[_0x29907e(0x1c4)](_0x437824),_0x20795a();}catch(_0x487afd){_0x20795a(_0x487afd);}}async[a300_0x463633(0x1a1)](_0x59b5f5){const _0x562365=a300_0x463633;try{this[_0x562365(0x1b7)][_0x562365(0x1cc)]&&await this[_0x562365(0x1bd)](),this[_0x562365(0x1d5)]['log'](_0x562365(0x1d3)+this[_0x562365(0x1b4)]+_0x562365(0x1b5)),await this[_0x562365(0x1d5)][_0x562365(0x1ae)](),_0x59b5f5();}catch(_0x47d489){_0x59b5f5(_0x47d489);}}}exports['SourceMemberHandler']=SourceMemberHandler;