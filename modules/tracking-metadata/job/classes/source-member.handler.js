const a343_0x609404=a343_0x5112;function a343_0x2b6e(){const _0x350855=['api','8652mSlOLx','\x20=\x20:targetOrgId','update','getIsDone','toString','execute','push','log','3324348jPAbsf','FLOSUM_NAMESPACE','targetOrgId','defineProperty','6685060AdSmds','andWhere','Folder__c','IsNameObsolete','SourceMemberHandler','getComponentFromFlosum','size','QueryBuilder','stream','1200242zYcXul','64163aMeUeZ','RevisionCounter','MemberType','Name__c','ChangedBy','Component_Type__c','get','constructor','handledMembersCounter','addToChunk','sourceMemberRecords','where','Transform','ORG_COMPONENT_OBJECT_NAME','Changes\x20found\x20for\x20','2330IBIKrC','CompositeRetrieveData','\x20IN\x20(:sourceMemberIds)','from','Source_Member_Id__c','22011948PVmsjZ','MemberIdOrName','search','16ylguXk','1495719SGQymw','1gkFgym','4uHbIRa','keys','buildOrgComponentQuery','instance','6027fBfruK','../../constants','@flosum/salesforce','OrganisationName__c','logger','_transform','_flush','Attachment_ID__c','(((.+)+)+)+$'];a343_0x2b6e=function(){return _0x350855;};return a343_0x2b6e();}(function(_0x3ee91f,_0x31d960){const _0x728720=a343_0x5112,_0x5f0f99=_0x3ee91f();while(!![]){try{const _0x1d9704=-parseInt(_0x728720(0x1ef))/0x1*(parseInt(_0x728720(0x213))/0x2)+parseInt(_0x728720(0x206))/0x3*(-parseInt(_0x728720(0x1f0))/0x4)+parseInt(_0x728720(0x20a))/0x5+-parseInt(_0x728720(0x1fe))/0x6*(-parseInt(_0x728720(0x1f4))/0x7)+parseInt(_0x728720(0x1ed))/0x8*(parseInt(_0x728720(0x1ee))/0x9)+-parseInt(_0x728720(0x1e5))/0xa*(-parseInt(_0x728720(0x214))/0xb)+-parseInt(_0x728720(0x1ea))/0xc;if(_0x1d9704===_0x31d960)break;else _0x5f0f99['push'](_0x5f0f99['shift']());}catch(_0x698543){_0x5f0f99['push'](_0x5f0f99['shift']());}}}(a343_0x2b6e,0xb19b7));const a343_0x1e6b85=(function(){let _0x1a665d=!![];return function(_0x1fccfe,_0x2f7666){const _0x1cbd87=_0x1a665d?function(){if(_0x2f7666){const _0x237de5=_0x2f7666['apply'](_0x1fccfe,arguments);return _0x2f7666=null,_0x237de5;}}:function(){};return _0x1a665d=![],_0x1cbd87;};}()),a343_0x467f68=a343_0x1e6b85(this,function(){const _0x281a2b=a343_0x5112;return a343_0x467f68['toString']()[_0x281a2b(0x1ec)](_0x281a2b(0x1fc))[_0x281a2b(0x202)]()[_0x281a2b(0x1dd)](a343_0x467f68)[_0x281a2b(0x1ec)](_0x281a2b(0x1fc));});function a343_0x5112(_0x45b029,_0x2363eb){const _0x25b063=a343_0x2b6e();return a343_0x5112=function(_0x467f68,_0x1e6b85){_0x467f68=_0x467f68-0x1dc;let _0x2b6e1e=_0x25b063[_0x467f68];return _0x2b6e1e;},a343_0x5112(_0x45b029,_0x2363eb);}a343_0x467f68();'use strict';Object[a343_0x609404(0x209)](exports,'__esModule',{'value':!![]}),exports[a343_0x609404(0x20e)]=void 0x0;const stream_1=require(a343_0x609404(0x212)),salesforce_1=require(a343_0x609404(0x1f6)),constants_1=require(a343_0x609404(0x1f5)),constants_2=require('../../../../constants'),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a343_0x609404(0x215),IS_NAME_OBSOLETE=a343_0x609404(0x20d),MEMBER_ID_FIELD_NAME=a343_0x609404(0x1eb),MEMBER_TYPE_FIELD_NAME=a343_0x609404(0x216),CHANGED_BY_FIELD_NAME=a343_0x609404(0x218),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a343_0x609404(0x207)]+a343_0x609404(0x1e9),ORGANIZATION_NAME_FIELD=constants_2[a343_0x609404(0x207)]+a343_0x609404(0x1f7),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a343_0x609404(0x207)]+'Revision_Counter__c',ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2['FLOSUM_NAMESPACE']+'Revision_Counter__c',constants_2[a343_0x609404(0x207)]+a343_0x609404(0x219),constants_2[a343_0x609404(0x207)]+'API_Name__c',constants_2['FLOSUM_NAMESPACE']+a343_0x609404(0x217),constants_2[a343_0x609404(0x207)]+a343_0x609404(0x1e9),constants_2[a343_0x609404(0x207)]+a343_0x609404(0x1f7),constants_2[a343_0x609404(0x207)]+a343_0x609404(0x1fb),constants_2[a343_0x609404(0x207)]+a343_0x609404(0x20c)];class SourceMemberHandler extends stream_1[a343_0x609404(0x1e2)]{constructor({apiVersion:_0x23a34c,instance:_0x540305,targetOrgId:_0x40ec76,logger:_0x3ec756}){const _0x1c15bd=a343_0x609404;super({'objectMode':!![]}),this[_0x1c15bd(0x1e0)]=new Map(),this[_0x1c15bd(0x1de)]=0x0,this[_0x1c15bd(0x1fd)]=_0x23a34c,this['instance']=_0x540305,this[_0x1c15bd(0x208)]=_0x40ec76,this[_0x1c15bd(0x1f8)]=_0x3ec756;}['buildOrgComponentQuery'](){const _0x8220af=a343_0x609404;return new salesforce_1[(_0x8220af(0x211))]()['select'](...ORG_COMPONENT_SELECT_FIELDS)[_0x8220af(0x1e8)](constants_1[_0x8220af(0x1e3)])[_0x8220af(0x1e1)](SOURCE_MEMBER_ID_FIELD_NAME+_0x8220af(0x1e7),{'sourceMemberIds':[...this[_0x8220af(0x1e0)][_0x8220af(0x1f1)]()]})[_0x8220af(0x20b)](ORGANIZATION_NAME_FIELD+_0x8220af(0x1ff),{'targetOrgId':this[_0x8220af(0x208)]});}async[a343_0x609404(0x20f)](){const _0x56eed8=a343_0x609404,_0x46df80=new salesforce_1[(_0x56eed8(0x1e6))]({'api':this['api'],'queryBuilder':this[_0x56eed8(0x1f2)](),'instance':this[_0x56eed8(0x1f3)],'isTooling':![]}),_0x4fbda0=new Map();do{const {records:_0x520e33}=await _0x46df80[_0x56eed8(0x203)]();for(const _0x3ba2ff of _0x520e33){_0x4fbda0['set'](_0x3ba2ff[SOURCE_MEMBER_ID_FIELD_NAME],_0x3ba2ff);}}while(!_0x46df80[_0x56eed8(0x201)]());return _0x4fbda0;}async['addToChunk'](_0x1b6273){const _0x579559=a343_0x609404;this[_0x579559(0x1e0)]['set'](_0x1b6273['Id'],_0x1b6273),this[_0x579559(0x1e0)][_0x579559(0x210)]===MAX_CHUNK_SIZE&&await this['handle']();}async['handle'](){const _0xe28270=a343_0x609404,_0x4407e0=await this[_0xe28270(0x20f)]();for(const [_0x139f9b,_0x1cac34]of this[_0xe28270(0x1e0)]){const _0x341aaa=_0x4407e0[_0xe28270(0x1dc)](_0x139f9b);if(_0x341aaa&&_0x1cac34[REVISION_COUNTER_FIELD_NAME]===_0x341aaa[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x23a9ee={'sourceMemberId':_0x1cac34['Id'],'componentId':(_0x341aaa===null||_0x341aaa===void 0x0?void 0x0:_0x341aaa['Id'])||null,'attachmentId':(_0x341aaa===null||_0x341aaa===void 0x0?void 0x0:_0x341aaa[_0xe28270(0x1fb)])||null,'metadataId':_0x1cac34[MEMBER_ID_FIELD_NAME],'metadataType':_0x1cac34[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x1cac34[IS_NAME_OBSOLETE],'revisionCounter':_0x1cac34[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x1cac34[CHANGED_BY_FIELD_NAME]};this[_0xe28270(0x1de)]++,this[_0xe28270(0x204)](_0x23a9ee);}this[_0xe28270(0x1e0)]=new Map();}async[a343_0x609404(0x1f9)](_0x4ef86a,_0x152a6f,_0x418ffa){const _0x48a0f8=a343_0x609404;try{await this[_0x48a0f8(0x1df)](_0x4ef86a),_0x418ffa();}catch(_0x32c558){_0x418ffa(_0x32c558);}}async[a343_0x609404(0x1fa)](_0x26bb15){const _0x4cd549=a343_0x609404;try{this[_0x4cd549(0x1e0)][_0x4cd549(0x210)]&&await this['handle'](),this[_0x4cd549(0x1f8)][_0x4cd549(0x205)](_0x4cd549(0x1e4)+this[_0x4cd549(0x1de)]+'\x20components'),await this[_0x4cd549(0x1f8)][_0x4cd549(0x200)](),_0x26bb15();}catch(_0x42faa9){_0x26bb15(_0x42faa9);}}}exports[a343_0x609404(0x20e)]=SourceMemberHandler;