function a300_0x3c8a(){const _0x294aab=['6421990sCvruR','FLOSUM_NAMESPACE','QueryBuilder','5167uOYqnH','../../constants','__esModule','Component_Type__c','defineProperty','instance','handledMembersCounter','1566985jwnqlw','RevisionCounter','ORG_COMPONENT_OBJECT_NAME','handle','update','MemberType','getIsDone','1861040JRZLFk','6MNbtrH','Name__c','Revision_Counter__c','16jrRehL','1221192gDFQJv','getComponentFromFlosum','(((.+)+)+)+$','api','1705032zYzKrM','stream','log','57QfJAxp','push','SourceMemberHandler','from','toString','Folder__c','Transform','52876PAwzJP','\x20components','andWhere','set','targetOrgId','\x20IN\x20(:sourceMemberIds)','where','logger','IsNameObsolete','@flosum/salesforce','search','sourceMemberRecords','_flush','get','buildOrgComponentQuery','OrganisationName__c','CompositeRetrieveData','size'];a300_0x3c8a=function(){return _0x294aab;};return a300_0x3c8a();}const a300_0x3dd92a=a300_0x1435;(function(_0x13b8d0,_0xa70ccd){const _0x384a64=a300_0x1435,_0x44d2da=_0x13b8d0();while(!![]){try{const _0xd34e01=-parseInt(_0x384a64(0x1af))/0x1*(parseInt(_0x384a64(0x1c1))/0x2)+parseInt(_0x384a64(0x1c9))/0x3*(-parseInt(_0x384a64(0x1d0))/0x4)+parseInt(_0x384a64(0x1b6))/0x5*(-parseInt(_0x384a64(0x1be))/0x6)+parseInt(_0x384a64(0x1c2))/0x7+-parseInt(_0x384a64(0x1bd))/0x8+parseInt(_0x384a64(0x1c6))/0x9+parseInt(_0x384a64(0x1ac))/0xa;if(_0xd34e01===_0xa70ccd)break;else _0x44d2da['push'](_0x44d2da['shift']());}catch(_0x5d8aca){_0x44d2da['push'](_0x44d2da['shift']());}}}(a300_0x3c8a,0x28e9b));const a300_0x16cac9=(function(){let _0x37ae6a=!![];return function(_0x1544a1,_0x3ea7b8){const _0x261915=_0x37ae6a?function(){if(_0x3ea7b8){const _0x3fa123=_0x3ea7b8['apply'](_0x1544a1,arguments);return _0x3ea7b8=null,_0x3fa123;}}:function(){};return _0x37ae6a=![],_0x261915;};}()),a300_0x5344cc=a300_0x16cac9(this,function(){const _0x17a4bc=a300_0x1435;return a300_0x5344cc[_0x17a4bc(0x1cd)]()[_0x17a4bc(0x1da)](_0x17a4bc(0x1c4))[_0x17a4bc(0x1cd)]()['constructor'](a300_0x5344cc)['search']('(((.+)+)+)+$');});a300_0x5344cc();'use strict';Object[a300_0x3dd92a(0x1b3)](exports,a300_0x3dd92a(0x1b1),{'value':!![]}),exports[a300_0x3dd92a(0x1cb)]=void 0x0;function a300_0x1435(_0x5baf8d,_0x3d62eb){const _0x287ad3=a300_0x3c8a();return a300_0x1435=function(_0x5344cc,_0x16cac9){_0x5344cc=_0x5344cc-0x1a9;let _0x3c8a2c=_0x287ad3[_0x5344cc];return _0x3c8a2c;},a300_0x1435(_0x5baf8d,_0x3d62eb);}const stream_1=require(a300_0x3dd92a(0x1c7)),salesforce_1=require(a300_0x3dd92a(0x1d9)),constants_1=require(a300_0x3dd92a(0x1b0)),constants_2=require('../../../../constants'),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a300_0x3dd92a(0x1b7),IS_NAME_OBSOLETE=a300_0x3dd92a(0x1d8),MEMBER_ID_FIELD_NAME='MemberIdOrName',MEMBER_TYPE_FIELD_NAME=a300_0x3dd92a(0x1bb),CHANGED_BY_FIELD_NAME='ChangedBy',SOURCE_MEMBER_ID_FIELD_NAME=constants_2['FLOSUM_NAMESPACE']+'Source_Member_Id__c',ORGANIZATION_NAME_FIELD=constants_2[a300_0x3dd92a(0x1ad)]+a300_0x3dd92a(0x1a9),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a300_0x3dd92a(0x1ad)]+a300_0x3dd92a(0x1c0),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a300_0x3dd92a(0x1ad)]+a300_0x3dd92a(0x1c0),constants_2[a300_0x3dd92a(0x1ad)]+a300_0x3dd92a(0x1b2),constants_2[a300_0x3dd92a(0x1ad)]+'API_Name__c',constants_2[a300_0x3dd92a(0x1ad)]+a300_0x3dd92a(0x1bf),constants_2[a300_0x3dd92a(0x1ad)]+'Source_Member_Id__c',constants_2[a300_0x3dd92a(0x1ad)]+'OrganisationName__c',constants_2[a300_0x3dd92a(0x1ad)]+'Attachment_ID__c',constants_2[a300_0x3dd92a(0x1ad)]+a300_0x3dd92a(0x1ce)];class SourceMemberHandler extends stream_1[a300_0x3dd92a(0x1cf)]{constructor({apiVersion:_0x3a4ce8,instance:_0x444271,targetOrgId:_0x51d364,logger:_0x130521}){const _0x514bae=a300_0x3dd92a;super({'objectMode':!![]}),this[_0x514bae(0x1db)]=new Map(),this[_0x514bae(0x1b5)]=0x0,this[_0x514bae(0x1c5)]=_0x3a4ce8,this[_0x514bae(0x1b4)]=_0x444271,this['targetOrgId']=_0x51d364,this[_0x514bae(0x1d7)]=_0x130521;}[a300_0x3dd92a(0x1de)](){const _0x139ac3=a300_0x3dd92a;return new salesforce_1[(_0x139ac3(0x1ae))]()['select'](...ORG_COMPONENT_SELECT_FIELDS)[_0x139ac3(0x1cc)](constants_1[_0x139ac3(0x1b8)])[_0x139ac3(0x1d6)](SOURCE_MEMBER_ID_FIELD_NAME+_0x139ac3(0x1d5),{'sourceMemberIds':[...this[_0x139ac3(0x1db)]['keys']()]})[_0x139ac3(0x1d2)](ORGANIZATION_NAME_FIELD+'\x20=\x20:targetOrgId',{'targetOrgId':this[_0x139ac3(0x1d4)]});}async[a300_0x3dd92a(0x1c3)](){const _0xda5b2a=a300_0x3dd92a,_0x2fbf0c=new salesforce_1[(_0xda5b2a(0x1aa))]({'api':this[_0xda5b2a(0x1c5)],'queryBuilder':this[_0xda5b2a(0x1de)](),'instance':this['instance'],'isTooling':![]}),_0x4d1996=new Map();do{const {records:_0x1715a5}=await _0x2fbf0c['execute']();for(const _0x39bf17 of _0x1715a5){_0x4d1996['set'](_0x39bf17[SOURCE_MEMBER_ID_FIELD_NAME],_0x39bf17);}}while(!_0x2fbf0c[_0xda5b2a(0x1bc)]());return _0x4d1996;}async['addToChunk'](_0x97074e){const _0x238dd3=a300_0x3dd92a;this[_0x238dd3(0x1db)][_0x238dd3(0x1d3)](_0x97074e['Id'],_0x97074e),this[_0x238dd3(0x1db)][_0x238dd3(0x1ab)]===MAX_CHUNK_SIZE&&await this[_0x238dd3(0x1b9)]();}async['handle'](){const _0x50c90e=a300_0x3dd92a,_0xf09606=await this[_0x50c90e(0x1c3)]();for(const [_0x111b18,_0x19db6c]of this[_0x50c90e(0x1db)]){const _0x440977=_0xf09606[_0x50c90e(0x1dd)](_0x111b18);if(_0x440977&&_0x19db6c[REVISION_COUNTER_FIELD_NAME]===_0x440977[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x56535a={'sourceMemberId':_0x19db6c['Id'],'componentId':(_0x440977===null||_0x440977===void 0x0?void 0x0:_0x440977['Id'])||null,'attachmentId':(_0x440977===null||_0x440977===void 0x0?void 0x0:_0x440977['Attachment_ID__c'])||null,'metadataId':_0x19db6c[MEMBER_ID_FIELD_NAME],'metadataType':_0x19db6c[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x19db6c[IS_NAME_OBSOLETE],'revisionCounter':_0x19db6c[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x19db6c[CHANGED_BY_FIELD_NAME]};this[_0x50c90e(0x1b5)]++,this[_0x50c90e(0x1ca)](_0x56535a);}this[_0x50c90e(0x1db)]=new Map();}async['_transform'](_0x45fcb3,_0x22640f,_0x44b5f3){try{await this['addToChunk'](_0x45fcb3),_0x44b5f3();}catch(_0x24e9cb){_0x44b5f3(_0x24e9cb);}}async[a300_0x3dd92a(0x1dc)](_0x5ed1d5){const _0x1a26b7=a300_0x3dd92a;try{this[_0x1a26b7(0x1db)][_0x1a26b7(0x1ab)]&&await this[_0x1a26b7(0x1b9)](),this[_0x1a26b7(0x1d7)][_0x1a26b7(0x1c8)]('Changes\x20found\x20for\x20'+this[_0x1a26b7(0x1b5)]+_0x1a26b7(0x1d1)),await this[_0x1a26b7(0x1d7)][_0x1a26b7(0x1ba)](),_0x5ed1d5();}catch(_0x35fee8){_0x5ed1d5(_0x35fee8);}}}exports[a300_0x3dd92a(0x1cb)]=SourceMemberHandler;