function a300_0x56e2(){const _0xdfdd5e=['search','Component_Type__c','944896KnJaLE','logger','toString','handledMembersCounter','keys','log','ChangedBy','MemberIdOrName','API_Name__c','Source_Member_Id__c','(((.+)+)+)+$','FLOSUM_NAMESPACE','4202559lmeNoI','size','get','Revision_Counter__c','1592bwslVi','_flush','api','\x20=\x20:targetOrgId','targetOrgId','3205lctzHC','Folder__c','getIsDone','20nkbKxd','RevisionCounter','@flosum/salesforce','handle','SourceMemberHandler','apply','Changes\x20found\x20for\x20','sourceMemberRecords','30018UvDHsS','\x20components','andWhere','stream','instance','_transform','OrganisationName__c','set','24101nlSNIW','ORG_COMPONENT_OBJECT_NAME','66qLceAO','where','addToChunk','Name__c','1266vYGocz','Attachment_ID__c','28985473AfLUlI','CompositeRetrieveData','../../../../constants','getComponentFromFlosum','buildOrgComponentQuery','1093673tFRBNN'];a300_0x56e2=function(){return _0xdfdd5e;};return a300_0x56e2();}const a300_0x52ddd7=a300_0x1670;(function(_0x41f7ba,_0x586fd8){const _0x137966=a300_0x1670,_0x130a61=_0x41f7ba();while(!![]){try{const _0x27b37e=-parseInt(_0x137966(0x1e7))/0x1+-parseInt(_0x137966(0x1dc))/0x2*(-parseInt(_0x137966(0x1d2))/0x3)+parseInt(_0x137966(0x1ea))/0x4+-parseInt(_0x137966(0x1ff))/0x5*(-parseInt(_0x137966(0x1e0))/0x6)+-parseInt(_0x137966(0x1da))/0x7*(parseInt(_0x137966(0x1fa))/0x8)+-parseInt(_0x137966(0x1f6))/0x9*(parseInt(_0x137966(0x1ca))/0xa)+parseInt(_0x137966(0x1e2))/0xb;if(_0x27b37e===_0x586fd8)break;else _0x130a61['push'](_0x130a61['shift']());}catch(_0x5ca79f){_0x130a61['push'](_0x130a61['shift']());}}}(a300_0x56e2,0x98570));function a300_0x1670(_0x353b34,_0xb0eb41){const _0x37ddf8=a300_0x56e2();return a300_0x1670=function(_0x305731,_0x4ab2d5){_0x305731=_0x305731-0x1c8;let _0x56e293=_0x37ddf8[_0x305731];return _0x56e293;},a300_0x1670(_0x353b34,_0xb0eb41);}const a300_0x4ab2d5=(function(){let _0x3e9e7b=!![];return function(_0x5dc46c,_0xfb826e){const _0x58e9fe=_0x3e9e7b?function(){const _0x2de293=a300_0x1670;if(_0xfb826e){const _0x34956c=_0xfb826e[_0x2de293(0x1cf)](_0x5dc46c,arguments);return _0xfb826e=null,_0x34956c;}}:function(){};return _0x3e9e7b=![],_0x58e9fe;};}()),a300_0x305731=a300_0x4ab2d5(this,function(){const _0x1e2068=a300_0x1670;return a300_0x305731[_0x1e2068(0x1ec)]()[_0x1e2068(0x1e8)](_0x1e2068(0x1f4))[_0x1e2068(0x1ec)]()['constructor'](a300_0x305731)[_0x1e2068(0x1e8)](_0x1e2068(0x1f4));});a300_0x305731();'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a300_0x52ddd7(0x1ce)]=void 0x0;const stream_1=require(a300_0x52ddd7(0x1d5)),salesforce_1=require(a300_0x52ddd7(0x1cc)),constants_1=require('../../constants'),constants_2=require(a300_0x52ddd7(0x1e4)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a300_0x52ddd7(0x1cb),IS_NAME_OBSOLETE='IsNameObsolete',MEMBER_ID_FIELD_NAME=a300_0x52ddd7(0x1f1),MEMBER_TYPE_FIELD_NAME='MemberType',CHANGED_BY_FIELD_NAME=a300_0x52ddd7(0x1f0),SOURCE_MEMBER_ID_FIELD_NAME=constants_2['FLOSUM_NAMESPACE']+a300_0x52ddd7(0x1f3),ORGANIZATION_NAME_FIELD=constants_2[a300_0x52ddd7(0x1f5)]+a300_0x52ddd7(0x1d8),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a300_0x52ddd7(0x1f5)]+a300_0x52ddd7(0x1f9),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a300_0x52ddd7(0x1f5)]+a300_0x52ddd7(0x1f9),constants_2[a300_0x52ddd7(0x1f5)]+a300_0x52ddd7(0x1e9),constants_2[a300_0x52ddd7(0x1f5)]+a300_0x52ddd7(0x1f2),constants_2[a300_0x52ddd7(0x1f5)]+a300_0x52ddd7(0x1df),constants_2[a300_0x52ddd7(0x1f5)]+'Source_Member_Id__c',constants_2[a300_0x52ddd7(0x1f5)]+a300_0x52ddd7(0x1d8),constants_2[a300_0x52ddd7(0x1f5)]+a300_0x52ddd7(0x1e1),constants_2[a300_0x52ddd7(0x1f5)]+a300_0x52ddd7(0x1c8)];class SourceMemberHandler extends stream_1['Transform']{constructor({apiVersion:_0x3baf25,instance:_0x2fe8a0,targetOrgId:_0x3a7104,logger:_0x122b68}){const _0x1d7cd5=a300_0x52ddd7;super({'objectMode':!![]}),this[_0x1d7cd5(0x1d1)]=new Map(),this[_0x1d7cd5(0x1ed)]=0x0,this[_0x1d7cd5(0x1fc)]=_0x3baf25,this[_0x1d7cd5(0x1d6)]=_0x2fe8a0,this['targetOrgId']=_0x3a7104,this[_0x1d7cd5(0x1eb)]=_0x122b68;}[a300_0x52ddd7(0x1e6)](){const _0x5dedae=a300_0x52ddd7;return new salesforce_1['QueryBuilder']()['select'](...ORG_COMPONENT_SELECT_FIELDS)['from'](constants_1[_0x5dedae(0x1db)])[_0x5dedae(0x1dd)](SOURCE_MEMBER_ID_FIELD_NAME+'\x20IN\x20(:sourceMemberIds)',{'sourceMemberIds':[...this['sourceMemberRecords'][_0x5dedae(0x1ee)]()]})[_0x5dedae(0x1d4)](ORGANIZATION_NAME_FIELD+_0x5dedae(0x1fd),{'targetOrgId':this[_0x5dedae(0x1fe)]});}async[a300_0x52ddd7(0x1e5)](){const _0x45ca8a=a300_0x52ddd7,_0x459cc3=new salesforce_1[(_0x45ca8a(0x1e3))]({'api':this[_0x45ca8a(0x1fc)],'queryBuilder':this[_0x45ca8a(0x1e6)](),'instance':this[_0x45ca8a(0x1d6)],'isTooling':![]}),_0x23d5eb=new Map();do{const {records:_0x6442c3}=await _0x459cc3['execute']();for(const _0x136cc6 of _0x6442c3){_0x23d5eb[_0x45ca8a(0x1d9)](_0x136cc6[SOURCE_MEMBER_ID_FIELD_NAME],_0x136cc6);}}while(!_0x459cc3[_0x45ca8a(0x1c9)]());return _0x23d5eb;}async[a300_0x52ddd7(0x1de)](_0x371146){const _0x1e494a=a300_0x52ddd7;this[_0x1e494a(0x1d1)][_0x1e494a(0x1d9)](_0x371146['Id'],_0x371146),this[_0x1e494a(0x1d1)]['size']===MAX_CHUNK_SIZE&&await this[_0x1e494a(0x1cd)]();}async['handle'](){const _0x3a011c=a300_0x52ddd7,_0x557d7e=await this[_0x3a011c(0x1e5)]();for(const [_0x493122,_0x10fc38]of this[_0x3a011c(0x1d1)]){const _0x57a522=_0x557d7e[_0x3a011c(0x1f8)](_0x493122);if(_0x57a522&&_0x10fc38[REVISION_COUNTER_FIELD_NAME]===_0x57a522[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x4df403={'sourceMemberId':_0x10fc38['Id'],'componentId':(_0x57a522===null||_0x57a522===void 0x0?void 0x0:_0x57a522['Id'])||null,'attachmentId':(_0x57a522===null||_0x57a522===void 0x0?void 0x0:_0x57a522[_0x3a011c(0x1e1)])||null,'metadataId':_0x10fc38[MEMBER_ID_FIELD_NAME],'metadataType':_0x10fc38[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x10fc38[IS_NAME_OBSOLETE],'revisionCounter':_0x10fc38[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x10fc38[CHANGED_BY_FIELD_NAME]};this[_0x3a011c(0x1ed)]++,this['push'](_0x4df403);}this[_0x3a011c(0x1d1)]=new Map();}async[a300_0x52ddd7(0x1d7)](_0x53a671,_0x44371a,_0x2287cc){const _0x207f10=a300_0x52ddd7;try{await this[_0x207f10(0x1de)](_0x53a671),_0x2287cc();}catch(_0x26a89b){_0x2287cc(_0x26a89b);}}async[a300_0x52ddd7(0x1fb)](_0x56e3c5){const _0x3e4277=a300_0x52ddd7;try{this['sourceMemberRecords'][_0x3e4277(0x1f7)]&&await this[_0x3e4277(0x1cd)](),this[_0x3e4277(0x1eb)][_0x3e4277(0x1ef)](_0x3e4277(0x1d0)+this[_0x3e4277(0x1ed)]+_0x3e4277(0x1d3)),await this['logger']['update'](),_0x56e3c5();}catch(_0xef03d9){_0x56e3c5(_0xef03d9);}}}exports['SourceMemberHandler']=SourceMemberHandler;