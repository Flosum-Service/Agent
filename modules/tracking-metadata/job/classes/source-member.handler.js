const a300_0x498fb1=a300_0x415b;(function(_0x34e1de,_0x1e910f){const _0x4985fc=a300_0x415b,_0x2cda40=_0x34e1de();while(!![]){try{const _0x3b3d62=-parseInt(_0x4985fc(0x1ae))/0x1+-parseInt(_0x4985fc(0x1bc))/0x2+parseInt(_0x4985fc(0x1cf))/0x3+-parseInt(_0x4985fc(0x1cc))/0x4*(parseInt(_0x4985fc(0x1c7))/0x5)+parseInt(_0x4985fc(0x1bd))/0x6+parseInt(_0x4985fc(0x1b2))/0x7*(-parseInt(_0x4985fc(0x1c8))/0x8)+parseInt(_0x4985fc(0x1d4))/0x9*(parseInt(_0x4985fc(0x1c5))/0xa);if(_0x3b3d62===_0x1e910f)break;else _0x2cda40['push'](_0x2cda40['shift']());}catch(_0x4d34ee){_0x2cda40['push'](_0x2cda40['shift']());}}}(a300_0xf42a,0x4001c));const a300_0x133999=(function(){let _0x1000de=!![];return function(_0x3335e4,_0x240880){const _0x19c2ab=_0x1000de?function(){const _0x351120=a300_0x415b;if(_0x240880){const _0x434607=_0x240880[_0x351120(0x1ca)](_0x3335e4,arguments);return _0x240880=null,_0x434607;}}:function(){};return _0x1000de=![],_0x19c2ab;};}()),a300_0xfd8753=a300_0x133999(this,function(){const _0x3e23e1=a300_0x415b;return a300_0xfd8753[_0x3e23e1(0x1d5)]()[_0x3e23e1(0x1af)](_0x3e23e1(0x1d6))[_0x3e23e1(0x1d5)]()['constructor'](a300_0xfd8753)[_0x3e23e1(0x1af)](_0x3e23e1(0x1d6));});a300_0xfd8753();'use strict';function a300_0xf42a(){const _0x1528d2=['push','handledMembersCounter','133086HRVffL','Changes\x20found\x20for\x20','log','stream','buildOrgComponentQuery','9aSgjWS','toString','(((.+)+)+)+$','_flush','OrganisationName__c','keys','API_Name__c','Source_Member_Id__c','instance','\x20=\x20:targetOrgId','sourceMemberRecords','Revision_Counter__c','from','\x20IN\x20(:sourceMemberIds)','\x20components','Component_Type__c','Folder__c','select','425642TBXwsB','search','getComponentFromFlosum','andWhere','1426495Icgwtq','logger','update','__esModule','QueryBuilder','addToChunk','handle','set','defineProperty','IsNameObsolete','824014gZQFDp','2388894RUERQg','get','size','MemberIdOrName','MemberType','SourceMemberHandler','FLOSUM_NAMESPACE','execute','12708070KctcJX','_transform','23945onhNPe','16mnhuKM','Attachment_ID__c','apply','RevisionCounter','172WOkJvB'];a300_0xf42a=function(){return _0x1528d2;};return a300_0xf42a();}Object[a300_0x498fb1(0x1ba)](exports,a300_0x498fb1(0x1b5),{'value':!![]}),exports['SourceMemberHandler']=void 0x0;function a300_0x415b(_0x1c76fc,_0x1a8b10){const _0x173409=a300_0xf42a();return a300_0x415b=function(_0xfd8753,_0x133999){_0xfd8753=_0xfd8753-0x1a3;let _0xf42a22=_0x173409[_0xfd8753];return _0xf42a22;},a300_0x415b(_0x1c76fc,_0x1a8b10);}const stream_1=require(a300_0x498fb1(0x1d2)),salesforce_1=require('@flosum/salesforce'),constants_1=require('../../constants'),constants_2=require('../../../../constants'),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a300_0x498fb1(0x1cb),IS_NAME_OBSOLETE=a300_0x498fb1(0x1bb),MEMBER_ID_FIELD_NAME=a300_0x498fb1(0x1c0),MEMBER_TYPE_FIELD_NAME=a300_0x498fb1(0x1c1),CHANGED_BY_FIELD_NAME='ChangedBy',SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a300_0x498fb1(0x1c3)]+a300_0x498fb1(0x1a3),ORGANIZATION_NAME_FIELD=constants_2[a300_0x498fb1(0x1c3)]+a300_0x498fb1(0x1d8),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a300_0x498fb1(0x1c3)]+'Revision_Counter__c',ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a300_0x498fb1(0x1c3)]+a300_0x498fb1(0x1a7),constants_2[a300_0x498fb1(0x1c3)]+a300_0x498fb1(0x1ab),constants_2[a300_0x498fb1(0x1c3)]+a300_0x498fb1(0x1da),constants_2[a300_0x498fb1(0x1c3)]+'Name__c',constants_2[a300_0x498fb1(0x1c3)]+a300_0x498fb1(0x1a3),constants_2[a300_0x498fb1(0x1c3)]+'OrganisationName__c',constants_2[a300_0x498fb1(0x1c3)]+a300_0x498fb1(0x1c9),constants_2['FLOSUM_NAMESPACE']+a300_0x498fb1(0x1ac)];class SourceMemberHandler extends stream_1['Transform']{constructor({apiVersion:_0x27baeb,instance:_0x36ec2b,targetOrgId:_0x3cb396,logger:_0x182f23}){const _0x205317=a300_0x498fb1;super({'objectMode':!![]}),this[_0x205317(0x1a6)]=new Map(),this[_0x205317(0x1ce)]=0x0,this['api']=_0x27baeb,this[_0x205317(0x1a4)]=_0x36ec2b,this['targetOrgId']=_0x3cb396,this['logger']=_0x182f23;}['buildOrgComponentQuery'](){const _0x507120=a300_0x498fb1;return new salesforce_1[(_0x507120(0x1b6))]()[_0x507120(0x1ad)](...ORG_COMPONENT_SELECT_FIELDS)[_0x507120(0x1a8)](constants_1['ORG_COMPONENT_OBJECT_NAME'])['where'](SOURCE_MEMBER_ID_FIELD_NAME+_0x507120(0x1a9),{'sourceMemberIds':[...this[_0x507120(0x1a6)][_0x507120(0x1d9)]()]})[_0x507120(0x1b1)](ORGANIZATION_NAME_FIELD+_0x507120(0x1a5),{'targetOrgId':this['targetOrgId']});}async[a300_0x498fb1(0x1b0)](){const _0x51436d=a300_0x498fb1,_0x5b5a8d=new salesforce_1['CompositeRetrieveData']({'api':this['api'],'queryBuilder':this[_0x51436d(0x1d3)](),'instance':this[_0x51436d(0x1a4)],'isTooling':![]}),_0xaa1aeb=new Map();do{const {records:_0x5d112b}=await _0x5b5a8d[_0x51436d(0x1c4)]();for(const _0x314e1f of _0x5d112b){_0xaa1aeb[_0x51436d(0x1b9)](_0x314e1f[SOURCE_MEMBER_ID_FIELD_NAME],_0x314e1f);}}while(!_0x5b5a8d['getIsDone']());return _0xaa1aeb;}async[a300_0x498fb1(0x1b7)](_0x2c7f7e){const _0x4b0f1c=a300_0x498fb1;this['sourceMemberRecords']['set'](_0x2c7f7e['Id'],_0x2c7f7e),this[_0x4b0f1c(0x1a6)][_0x4b0f1c(0x1bf)]===MAX_CHUNK_SIZE&&await this[_0x4b0f1c(0x1b8)]();}async[a300_0x498fb1(0x1b8)](){const _0x34e73a=a300_0x498fb1,_0xafa312=await this['getComponentFromFlosum']();for(const [_0x59b0e4,_0x1f1d23]of this[_0x34e73a(0x1a6)]){const _0x282170=_0xafa312[_0x34e73a(0x1be)](_0x59b0e4);if(_0x282170&&_0x1f1d23[REVISION_COUNTER_FIELD_NAME]===_0x282170[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0xd1f4b6={'sourceMemberId':_0x1f1d23['Id'],'componentId':(_0x282170===null||_0x282170===void 0x0?void 0x0:_0x282170['Id'])||null,'attachmentId':(_0x282170===null||_0x282170===void 0x0?void 0x0:_0x282170[_0x34e73a(0x1c9)])||null,'metadataId':_0x1f1d23[MEMBER_ID_FIELD_NAME],'metadataType':_0x1f1d23[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x1f1d23[IS_NAME_OBSOLETE],'revisionCounter':_0x1f1d23[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x1f1d23[CHANGED_BY_FIELD_NAME]};this[_0x34e73a(0x1ce)]++,this[_0x34e73a(0x1cd)](_0xd1f4b6);}this['sourceMemberRecords']=new Map();}async[a300_0x498fb1(0x1c6)](_0x413e59,_0x47fad4,_0x479ad0){const _0x4d0bfb=a300_0x498fb1;try{await this[_0x4d0bfb(0x1b7)](_0x413e59),_0x479ad0();}catch(_0x3288ab){_0x479ad0(_0x3288ab);}}async[a300_0x498fb1(0x1d7)](_0x519bd7){const _0x15a882=a300_0x498fb1;try{this[_0x15a882(0x1a6)][_0x15a882(0x1bf)]&&await this[_0x15a882(0x1b8)](),this[_0x15a882(0x1b3)][_0x15a882(0x1d1)](_0x15a882(0x1d0)+this[_0x15a882(0x1ce)]+_0x15a882(0x1aa)),await this[_0x15a882(0x1b3)][_0x15a882(0x1b4)](),_0x519bd7();}catch(_0x28d066){_0x519bd7(_0x28d066);}}}exports[a300_0x498fb1(0x1c2)]=SourceMemberHandler;