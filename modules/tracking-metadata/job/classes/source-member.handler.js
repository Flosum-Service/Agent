const a344_0x480916=a344_0x5382;(function(_0xca6f0e,_0x400139){const _0x5de920=a344_0x5382,_0x149ead=_0xca6f0e();while(!![]){try{const _0x32c660=parseInt(_0x5de920(0x1ef))/0x1*(parseInt(_0x5de920(0x1ec))/0x2)+parseInt(_0x5de920(0x1ea))/0x3+-parseInt(_0x5de920(0x1f3))/0x4*(parseInt(_0x5de920(0x21a))/0x5)+parseInt(_0x5de920(0x216))/0x6+parseInt(_0x5de920(0x1f6))/0x7+parseInt(_0x5de920(0x1fb))/0x8*(-parseInt(_0x5de920(0x1f2))/0x9)+-parseInt(_0x5de920(0x1eb))/0xa;if(_0x32c660===_0x400139)break;else _0x149ead['push'](_0x149ead['shift']());}catch(_0x380599){_0x149ead['push'](_0x149ead['shift']());}}}(a344_0x40ad,0x8d924));const a344_0x242193=(function(){let _0x3b1bbb=!![];return function(_0x3ac683,_0x49ac57){const _0x4f1721=_0x3b1bbb?function(){const _0x45d1ad=a344_0x5382;if(_0x49ac57){const _0x97492c=_0x49ac57[_0x45d1ad(0x1e8)](_0x3ac683,arguments);return _0x49ac57=null,_0x97492c;}}:function(){};return _0x3b1bbb=![],_0x4f1721;};}()),a344_0x5c934c=a344_0x242193(this,function(){const _0x43f446=a344_0x5382;return a344_0x5c934c[_0x43f446(0x217)]()[_0x43f446(0x203)](_0x43f446(0x214))[_0x43f446(0x217)]()['constructor'](a344_0x5c934c)[_0x43f446(0x203)](_0x43f446(0x214));});a344_0x5c934c();'use strict';Object[a344_0x480916(0x1fa)](exports,a344_0x480916(0x208),{'value':!![]}),exports[a344_0x480916(0x1ed)]=void 0x0;const stream_1=require(a344_0x480916(0x205)),salesforce_1=require(a344_0x480916(0x201)),constants_1=require('../../constants'),constants_2=require('../../../../constants'),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a344_0x480916(0x200),IS_NAME_OBSOLETE=a344_0x480916(0x1ee),MEMBER_ID_FIELD_NAME=a344_0x480916(0x209),MEMBER_TYPE_FIELD_NAME='MemberType',MEMBER_NAME=a344_0x480916(0x219),CHANGED_BY_FIELD_NAME=a344_0x480916(0x20a),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a344_0x480916(0x20b)]+a344_0x480916(0x1fc),ORGANIZATION_NAME_FIELD=constants_2[a344_0x480916(0x20b)]+'OrganisationName__c',REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a344_0x480916(0x20b)]+'Revision_Counter__c',ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a344_0x480916(0x20b)]+a344_0x480916(0x204),constants_2[a344_0x480916(0x20b)]+a344_0x480916(0x1e4),constants_2[a344_0x480916(0x20b)]+a344_0x480916(0x1e3),constants_2['FLOSUM_NAMESPACE']+'Name__c',constants_2[a344_0x480916(0x20b)]+'Source_Member_Id__c',constants_2['FLOSUM_NAMESPACE']+'OrganisationName__c',constants_2[a344_0x480916(0x20b)]+a344_0x480916(0x20e),constants_2[a344_0x480916(0x20b)]+a344_0x480916(0x1f9)];function a344_0x5382(_0x35658f,_0x315b89){const _0x4aeed8=a344_0x40ad();return a344_0x5382=function(_0x5c934c,_0x242193){_0x5c934c=_0x5c934c-0x1e2;let _0x40ad2c=_0x4aeed8[_0x5c934c];return _0x40ad2c;},a344_0x5382(_0x35658f,_0x315b89);}function a344_0x40ad(){const _0x29dccc=['Folder__c','defineProperty','4025936kfacYJ','Source_Member_Id__c','where','\x20components','api','RevisionCounter','@flosum/salesforce','push','search','Revision_Counter__c','stream','\x20IN\x20(:sourceMemberIds)','Changes\x20found\x20for\x20','__esModule','MemberIdOrName','ChangedBy','FLOSUM_NAMESPACE','keys','size','Attachment_ID__c','set','getComponentFromFlosum','select','from','get','(((.+)+)+)+$','handle','6851934yyhOOr','toString','QueryBuilder','MemberName','5WYWTny','instance','API_Name__c','Component_Type__c','addToChunk','update','sourceMemberRecords','apply','handledMembersCounter','398925LbOEyN','1519230dkuXeE','24220iVMiyd','SourceMemberHandler','IsNameObsolete','4VwtiVa','_transform','execute','18nMUgJa','2826388hBbqHb','_flush','log','7850332ouMqoy','logger','CompositeRetrieveData'];a344_0x40ad=function(){return _0x29dccc;};return a344_0x40ad();}class SourceMemberHandler extends stream_1['Transform']{constructor({apiVersion:_0x4ab268,instance:_0x5c3e08,targetOrgId:_0x4305ae,logger:_0x35064b}){const _0x4e965c=a344_0x480916;super({'objectMode':!![]}),this[_0x4e965c(0x1e7)]=new Map(),this[_0x4e965c(0x1e9)]=0x0,this[_0x4e965c(0x1ff)]=_0x4ab268,this[_0x4e965c(0x1e2)]=_0x5c3e08,this['targetOrgId']=_0x4305ae,this['logger']=_0x35064b;}['buildOrgComponentQuery'](){const _0x44a4a3=a344_0x480916;return new salesforce_1[(_0x44a4a3(0x218))]()[_0x44a4a3(0x211)](...ORG_COMPONENT_SELECT_FIELDS)[_0x44a4a3(0x212)](constants_1['ORG_COMPONENT_OBJECT_NAME'])[_0x44a4a3(0x1fd)](SOURCE_MEMBER_ID_FIELD_NAME+_0x44a4a3(0x206),{'sourceMemberIds':[...this[_0x44a4a3(0x1e7)][_0x44a4a3(0x20c)]()]})['andWhere'](ORGANIZATION_NAME_FIELD+'\x20=\x20:targetOrgId',{'targetOrgId':this['targetOrgId']});}async[a344_0x480916(0x210)](){const _0x2e0c8a=a344_0x480916,_0x3ec630=new salesforce_1[(_0x2e0c8a(0x1f8))]({'api':this[_0x2e0c8a(0x1ff)],'queryBuilder':this['buildOrgComponentQuery'](),'instance':this[_0x2e0c8a(0x1e2)],'isTooling':![]}),_0x41083d=new Map();do{const {records:_0x3499da}=await _0x3ec630[_0x2e0c8a(0x1f1)]();for(const _0x1d5c76 of _0x3499da){_0x41083d[_0x2e0c8a(0x20f)](_0x1d5c76[SOURCE_MEMBER_ID_FIELD_NAME],_0x1d5c76);}}while(!_0x3ec630['getIsDone']());return _0x41083d;}async[a344_0x480916(0x1e5)](_0x57c50d){const _0x4803e4=a344_0x480916;this[_0x4803e4(0x1e7)][_0x4803e4(0x20f)](_0x57c50d['Id'],_0x57c50d),this[_0x4803e4(0x1e7)]['size']===MAX_CHUNK_SIZE&&await this[_0x4803e4(0x215)]();}async[a344_0x480916(0x215)](){const _0x44eb2e=a344_0x480916,_0x9e478f=await this[_0x44eb2e(0x210)]();for(const [_0x34cbb4,_0x557d1c]of this[_0x44eb2e(0x1e7)]){const _0x2aa61a=_0x9e478f[_0x44eb2e(0x213)](_0x34cbb4);if(_0x2aa61a&&_0x557d1c[REVISION_COUNTER_FIELD_NAME]===_0x2aa61a[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x24adf8={'sourceMemberId':_0x557d1c['Id'],'componentId':(_0x2aa61a===null||_0x2aa61a===void 0x0?void 0x0:_0x2aa61a['Id'])||null,'attachmentId':(_0x2aa61a===null||_0x2aa61a===void 0x0?void 0x0:_0x2aa61a[_0x44eb2e(0x20e)])||null,'metadataId':_0x557d1c[MEMBER_ID_FIELD_NAME],'metadataType':_0x557d1c[MEMBER_TYPE_FIELD_NAME],'metadataName':_0x557d1c[MEMBER_NAME],'isNameObsolete':_0x557d1c[IS_NAME_OBSOLETE],'revisionCounter':_0x557d1c[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x557d1c[CHANGED_BY_FIELD_NAME]};this[_0x44eb2e(0x1e9)]++,this[_0x44eb2e(0x202)](_0x24adf8);}this[_0x44eb2e(0x1e7)]=new Map();}async[a344_0x480916(0x1f0)](_0xf0bdd0,_0x4e36be,_0x274f4a){const _0x40587f=a344_0x480916;try{await this[_0x40587f(0x1e5)](_0xf0bdd0),_0x274f4a();}catch(_0x3bfaa6){_0x274f4a(_0x3bfaa6);}}async[a344_0x480916(0x1f4)](_0x59a278){const _0x4da2e0=a344_0x480916;try{this[_0x4da2e0(0x1e7)][_0x4da2e0(0x20d)]&&await this['handle'](),this[_0x4da2e0(0x1f7)][_0x4da2e0(0x1f5)](_0x4da2e0(0x207)+this[_0x4da2e0(0x1e9)]+_0x4da2e0(0x1fe)),await this[_0x4da2e0(0x1f7)][_0x4da2e0(0x1e6)](),_0x59a278();}catch(_0x2066ee){_0x59a278(_0x2066ee);}}}exports[a344_0x480916(0x1ed)]=SourceMemberHandler;