const a344_0x4b78dd=a344_0x1bed;(function(_0xad3716,_0xefc4e8){const _0x87fde9=a344_0x1bed,_0x40591e=_0xad3716();while(!![]){try{const _0x491a8d=parseInt(_0x87fde9(0x176))/0x1+parseInt(_0x87fde9(0x178))/0x2*(-parseInt(_0x87fde9(0x188))/0x3)+parseInt(_0x87fde9(0x173))/0x4+-parseInt(_0x87fde9(0x171))/0x5+parseInt(_0x87fde9(0x179))/0x6*(-parseInt(_0x87fde9(0x16a))/0x7)+-parseInt(_0x87fde9(0x156))/0x8+parseInt(_0x87fde9(0x15c))/0x9;if(_0x491a8d===_0xefc4e8)break;else _0x40591e['push'](_0x40591e['shift']());}catch(_0x4b221b){_0x40591e['push'](_0x40591e['shift']());}}}(a344_0x3616,0xd6440));function a344_0x3616(){const _0x4fce65=['429iLoCKg','SourceMemberHandler','_transform','\x20components','Changes\x20found\x20for\x20','addToChunk','Attachment_ID__c','logger','size','select','instance','CompositeRetrieveData','6457608egDIRI','../../../../constants','keys','Component_Type__c','from','get','30587634vOXgnV','constructor','execute','__esModule','Revision_Counter__c','\x20IN\x20(:sourceMemberIds)','andWhere','@flosum/salesforce','API_Name__c','\x20=\x20:targetOrgId','targetOrgId','stream','push','api','310394sIWirb','Folder__c','ORG_COMPONENT_OBJECT_NAME','MemberName','getComponentFromFlosum','set','buildOrgComponentQuery','1478720feAnWo','OrganisationName__c','333824OgXZaw','update','(((.+)+)+)+$','130449aboHVv','Transform','6080dtwEPi','162GRWZnm','../../constants','handledMembersCounter','toString','RevisionCounter','log','handle','ChangedBy','search','FLOSUM_NAMESPACE','QueryBuilder','getIsDone','sourceMemberRecords','Source_Member_Id__c','MemberType'];a344_0x3616=function(){return _0x4fce65;};return a344_0x3616();}function a344_0x1bed(_0x6741f4,_0x47a715){const _0x421ced=a344_0x3616();return a344_0x1bed=function(_0x555d37,_0x43ebf6){_0x555d37=_0x555d37-0x155;let _0x3616ed=_0x421ced[_0x555d37];return _0x3616ed;},a344_0x1bed(_0x6741f4,_0x47a715);}const a344_0x43ebf6=(function(){let _0x42ab29=!![];return function(_0x7cbef6,_0x54b1a3){const _0x495768=_0x42ab29?function(){if(_0x54b1a3){const _0x20bb44=_0x54b1a3['apply'](_0x7cbef6,arguments);return _0x54b1a3=null,_0x20bb44;}}:function(){};return _0x42ab29=![],_0x495768;};}()),a344_0x555d37=a344_0x43ebf6(this,function(){const _0x4e5e7b=a344_0x1bed;return a344_0x555d37[_0x4e5e7b(0x17c)]()['search'](_0x4e5e7b(0x175))[_0x4e5e7b(0x17c)]()[_0x4e5e7b(0x15d)](a344_0x555d37)[_0x4e5e7b(0x181)](_0x4e5e7b(0x175));});a344_0x555d37();'use strict';Object['defineProperty'](exports,a344_0x4b78dd(0x15f),{'value':!![]}),exports[a344_0x4b78dd(0x189)]=void 0x0;const stream_1=require(a344_0x4b78dd(0x167)),salesforce_1=require(a344_0x4b78dd(0x163)),constants_1=require(a344_0x4b78dd(0x17a)),constants_2=require(a344_0x4b78dd(0x157)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a344_0x4b78dd(0x17d),IS_NAME_OBSOLETE='IsNameObsolete',MEMBER_ID_FIELD_NAME='MemberIdOrName',MEMBER_TYPE_FIELD_NAME=a344_0x4b78dd(0x187),MEMBER_NAME=a344_0x4b78dd(0x16d),CHANGED_BY_FIELD_NAME=a344_0x4b78dd(0x180),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a344_0x4b78dd(0x182)]+a344_0x4b78dd(0x186),ORGANIZATION_NAME_FIELD=constants_2[a344_0x4b78dd(0x182)]+'OrganisationName__c',REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2['FLOSUM_NAMESPACE']+a344_0x4b78dd(0x160),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2['FLOSUM_NAMESPACE']+'Revision_Counter__c',constants_2[a344_0x4b78dd(0x182)]+a344_0x4b78dd(0x159),constants_2[a344_0x4b78dd(0x182)]+a344_0x4b78dd(0x164),constants_2['FLOSUM_NAMESPACE']+'Name__c',constants_2[a344_0x4b78dd(0x182)]+a344_0x4b78dd(0x186),constants_2[a344_0x4b78dd(0x182)]+a344_0x4b78dd(0x172),constants_2[a344_0x4b78dd(0x182)]+'Attachment_ID__c',constants_2[a344_0x4b78dd(0x182)]+a344_0x4b78dd(0x16b)];class SourceMemberHandler extends stream_1[a344_0x4b78dd(0x177)]{constructor({apiVersion:_0x5b9157,instance:_0x19645e,targetOrgId:_0x4565ef,logger:_0x2e722f}){const _0x33dce7=a344_0x4b78dd;super({'objectMode':!![]}),this[_0x33dce7(0x185)]=new Map(),this['handledMembersCounter']=0x0,this[_0x33dce7(0x169)]=_0x5b9157,this['instance']=_0x19645e,this[_0x33dce7(0x166)]=_0x4565ef,this[_0x33dce7(0x18f)]=_0x2e722f;}['buildOrgComponentQuery'](){const _0x53410c=a344_0x4b78dd;return new salesforce_1[(_0x53410c(0x183))]()[_0x53410c(0x191)](...ORG_COMPONENT_SELECT_FIELDS)[_0x53410c(0x15a)](constants_1[_0x53410c(0x16c)])['where'](SOURCE_MEMBER_ID_FIELD_NAME+_0x53410c(0x161),{'sourceMemberIds':[...this[_0x53410c(0x185)][_0x53410c(0x158)]()]})[_0x53410c(0x162)](ORGANIZATION_NAME_FIELD+_0x53410c(0x165),{'targetOrgId':this[_0x53410c(0x166)]});}async[a344_0x4b78dd(0x16e)](){const _0xd59eb=a344_0x4b78dd,_0x30268d=new salesforce_1[(_0xd59eb(0x155))]({'api':this['api'],'queryBuilder':this[_0xd59eb(0x170)](),'instance':this[_0xd59eb(0x192)],'isTooling':![]}),_0xc71874=new Map();do{const {records:_0x7e4011}=await _0x30268d[_0xd59eb(0x15e)]();for(const _0x2f29b9 of _0x7e4011){_0xc71874[_0xd59eb(0x16f)](_0x2f29b9[SOURCE_MEMBER_ID_FIELD_NAME],_0x2f29b9);}}while(!_0x30268d[_0xd59eb(0x184)]());return _0xc71874;}async[a344_0x4b78dd(0x18d)](_0x4a5966){const _0x27a238=a344_0x4b78dd;this[_0x27a238(0x185)][_0x27a238(0x16f)](_0x4a5966['Id'],_0x4a5966),this['sourceMemberRecords'][_0x27a238(0x190)]===MAX_CHUNK_SIZE&&await this['handle']();}async[a344_0x4b78dd(0x17f)](){const _0x2dd932=a344_0x4b78dd,_0x2bb433=await this[_0x2dd932(0x16e)]();for(const [_0x10cfe2,_0x50b597]of this['sourceMemberRecords']){const _0x2ff62e=_0x2bb433[_0x2dd932(0x15b)](_0x10cfe2);if(_0x2ff62e&&_0x50b597[REVISION_COUNTER_FIELD_NAME]===_0x2ff62e[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x1a9f9a={'sourceMemberId':_0x50b597['Id'],'componentId':(_0x2ff62e===null||_0x2ff62e===void 0x0?void 0x0:_0x2ff62e['Id'])||null,'attachmentId':(_0x2ff62e===null||_0x2ff62e===void 0x0?void 0x0:_0x2ff62e[_0x2dd932(0x18e)])||null,'metadataId':_0x50b597[MEMBER_ID_FIELD_NAME],'metadataType':_0x50b597[MEMBER_TYPE_FIELD_NAME],'metadataName':_0x50b597[MEMBER_NAME],'isNameObsolete':_0x50b597[IS_NAME_OBSOLETE],'revisionCounter':_0x50b597[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x50b597[CHANGED_BY_FIELD_NAME]};this[_0x2dd932(0x17b)]++,this[_0x2dd932(0x168)](_0x1a9f9a);}this[_0x2dd932(0x185)]=new Map();}async[a344_0x4b78dd(0x18a)](_0x51754a,_0x3a50d3,_0xaebb23){const _0x5ebd89=a344_0x4b78dd;try{await this[_0x5ebd89(0x18d)](_0x51754a),_0xaebb23();}catch(_0x1c23d4){_0xaebb23(_0x1c23d4);}}async['_flush'](_0x3744e2){const _0x56736b=a344_0x4b78dd;try{this['sourceMemberRecords']['size']&&await this[_0x56736b(0x17f)](),this[_0x56736b(0x18f)][_0x56736b(0x17e)](_0x56736b(0x18c)+this[_0x56736b(0x17b)]+_0x56736b(0x18b)),await this[_0x56736b(0x18f)][_0x56736b(0x174)](),_0x3744e2();}catch(_0x2f4574){_0x3744e2(_0x2f4574);}}}exports[a344_0x4b78dd(0x189)]=SourceMemberHandler;