const a344_0x6db824=a344_0x42b7;(function(_0x42357c,_0x2e2737){const _0xb7cea0=a344_0x42b7,_0xf748c5=_0x42357c();while(!![]){try{const _0x4b76cc=parseInt(_0xb7cea0(0x83))/0x1*(-parseInt(_0xb7cea0(0x6e))/0x2)+parseInt(_0xb7cea0(0x7f))/0x3*(-parseInt(_0xb7cea0(0x96))/0x4)+parseInt(_0xb7cea0(0x84))/0x5*(parseInt(_0xb7cea0(0xa0))/0x6)+parseInt(_0xb7cea0(0x70))/0x7+-parseInt(_0xb7cea0(0x7a))/0x8*(-parseInt(_0xb7cea0(0x7c))/0x9)+-parseInt(_0xb7cea0(0x71))/0xa*(-parseInt(_0xb7cea0(0x92))/0xb)+-parseInt(_0xb7cea0(0x6b))/0xc*(parseInt(_0xb7cea0(0x8c))/0xd);if(_0x4b76cc===_0x2e2737)break;else _0xf748c5['push'](_0xf748c5['shift']());}catch(_0x428c3b){_0xf748c5['push'](_0xf748c5['shift']());}}}(a344_0x4586,0x41554));const a344_0x249628=(function(){let _0x32dd33=!![];return function(_0x69891,_0x28ed1d){const _0x2b4ebc=_0x32dd33?function(){const _0x14e393=a344_0x42b7;if(_0x28ed1d){const _0x17d985=_0x28ed1d[_0x14e393(0x7e)](_0x69891,arguments);return _0x28ed1d=null,_0x17d985;}}:function(){};return _0x32dd33=![],_0x2b4ebc;};}()),a344_0x17686d=a344_0x249628(this,function(){const _0x314ec6=a344_0x42b7;return a344_0x17686d['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](a344_0x17686d)[_0x314ec6(0x85)]('(((.+)+)+)+$');});a344_0x17686d();'use strict';Object[a344_0x6db824(0x81)](exports,'__esModule',{'value':!![]}),exports[a344_0x6db824(0x99)]=void 0x0;const stream_1=require(a344_0x6db824(0x87)),salesforce_1=require(a344_0x6db824(0xa3)),constants_1=require(a344_0x6db824(0x90)),constants_2=require(a344_0x6db824(0x82)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a344_0x6db824(0x97),IS_NAME_OBSOLETE=a344_0x6db824(0x9e),MEMBER_ID_FIELD_NAME='MemberIdOrName',MEMBER_TYPE_FIELD_NAME=a344_0x6db824(0xa8),MEMBER_NAME=a344_0x6db824(0x9b),CHANGED_BY_FIELD_NAME=a344_0x6db824(0x8d),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a344_0x6db824(0x9f)]+a344_0x6db824(0x6f),ORGANIZATION_NAME_FIELD=constants_2['FLOSUM_NAMESPACE']+a344_0x6db824(0x95),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a344_0x6db824(0x9f)]+a344_0x6db824(0x75),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a344_0x6db824(0x9f)]+'Revision_Counter__c',constants_2[a344_0x6db824(0x9f)]+'Component_Type__c',constants_2[a344_0x6db824(0x9f)]+a344_0x6db824(0x76),constants_2[a344_0x6db824(0x9f)]+a344_0x6db824(0x9a),constants_2[a344_0x6db824(0x9f)]+'Source_Member_Id__c',constants_2[a344_0x6db824(0x9f)]+a344_0x6db824(0x95),constants_2[a344_0x6db824(0x9f)]+a344_0x6db824(0x88),constants_2[a344_0x6db824(0x9f)]+a344_0x6db824(0x72)];function a344_0x42b7(_0x3ac611,_0x21abb6){const _0xe636fb=a344_0x4586();return a344_0x42b7=function(_0x17686d,_0x249628){_0x17686d=_0x17686d-0x6b;let _0x458687=_0xe636fb[_0x17686d];return _0x458687;},a344_0x42b7(_0x3ac611,_0x21abb6);}function a344_0x4586(){const _0x43f062=['\x20IN\x20(:sourceMemberIds)','execute','Revision_Counter__c','API_Name__c','_transform','andWhere','sourceMemberRecords','115384fjLCUX','addToChunk','189YQmvJY','logger','apply','3cqpZEW','CompositeRetrieveData','defineProperty','../../../../constants','3874vbCSSj','68465tqdGBb','search','getComponentFromFlosum','stream','Attachment_ID__c','\x20components','keys','handle','13mYIaeM','ChangedBy','Transform','update','../../constants','instance','495xThekd','where','set','OrganisationName__c','1917184cDZAgn','RevisionCounter','get','SourceMemberHandler','Name__c','MemberName','size','\x20=\x20:targetOrgId','IsNameObsolete','FLOSUM_NAMESPACE','42stOAvQ','from','select','@flosum/salesforce','getIsDone','ORG_COMPONENT_OBJECT_NAME','handledMembersCounter','targetOrgId','MemberType','QueryBuilder','1480332hQVFdN','_flush','push','30rLSYUj','Source_Member_Id__c','3357494ihLhps','11110kICspE','Folder__c'];a344_0x4586=function(){return _0x43f062;};return a344_0x4586();}class SourceMemberHandler extends stream_1[a344_0x6db824(0x8e)]{constructor({apiVersion:_0x2c78f0,instance:_0x312456,targetOrgId:_0x5d2c3e,logger:_0x203cd0}){const _0x238511=a344_0x6db824;super({'objectMode':!![]}),this[_0x238511(0x79)]=new Map(),this[_0x238511(0xa6)]=0x0,this['api']=_0x2c78f0,this[_0x238511(0x91)]=_0x312456,this[_0x238511(0xa7)]=_0x5d2c3e,this[_0x238511(0x7d)]=_0x203cd0;}['buildOrgComponentQuery'](){const _0x570ebf=a344_0x6db824;return new salesforce_1[(_0x570ebf(0xa9))]()[_0x570ebf(0xa2)](...ORG_COMPONENT_SELECT_FIELDS)[_0x570ebf(0xa1)](constants_1[_0x570ebf(0xa5)])[_0x570ebf(0x93)](SOURCE_MEMBER_ID_FIELD_NAME+_0x570ebf(0x73),{'sourceMemberIds':[...this[_0x570ebf(0x79)][_0x570ebf(0x8a)]()]})[_0x570ebf(0x78)](ORGANIZATION_NAME_FIELD+_0x570ebf(0x9d),{'targetOrgId':this['targetOrgId']});}async['getComponentFromFlosum'](){const _0xdfaf91=a344_0x6db824,_0x3995a0=new salesforce_1[(_0xdfaf91(0x80))]({'api':this['api'],'queryBuilder':this['buildOrgComponentQuery'](),'instance':this['instance'],'isTooling':![]}),_0x25a5f1=new Map();do{const {records:_0x243cdf}=await _0x3995a0[_0xdfaf91(0x74)]();for(const _0x1ba6c2 of _0x243cdf){_0x25a5f1['set'](_0x1ba6c2[SOURCE_MEMBER_ID_FIELD_NAME],_0x1ba6c2);}}while(!_0x3995a0[_0xdfaf91(0xa4)]());return _0x25a5f1;}async[a344_0x6db824(0x7b)](_0xb96b64){const _0x3d3e64=a344_0x6db824;this['sourceMemberRecords'][_0x3d3e64(0x94)](_0xb96b64['Id'],_0xb96b64),this[_0x3d3e64(0x79)]['size']===MAX_CHUNK_SIZE&&await this[_0x3d3e64(0x8b)]();}async[a344_0x6db824(0x8b)](){const _0x895f6b=a344_0x6db824,_0x226b4c=await this[_0x895f6b(0x86)]();for(const [_0x461bbd,_0x21e0ec]of this[_0x895f6b(0x79)]){const _0x25bac9=_0x226b4c[_0x895f6b(0x98)](_0x461bbd);if(_0x25bac9&&_0x21e0ec[REVISION_COUNTER_FIELD_NAME]===_0x25bac9[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x33d448={'sourceMemberId':_0x21e0ec['Id'],'componentId':(_0x25bac9===null||_0x25bac9===void 0x0?void 0x0:_0x25bac9['Id'])||null,'attachmentId':(_0x25bac9===null||_0x25bac9===void 0x0?void 0x0:_0x25bac9[_0x895f6b(0x88)])||null,'metadataId':_0x21e0ec[MEMBER_ID_FIELD_NAME],'metadataType':_0x21e0ec[MEMBER_TYPE_FIELD_NAME],'metadataName':_0x21e0ec[MEMBER_NAME],'isNameObsolete':_0x21e0ec[IS_NAME_OBSOLETE],'revisionCounter':_0x21e0ec[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x21e0ec[CHANGED_BY_FIELD_NAME]};this[_0x895f6b(0xa6)]++,this[_0x895f6b(0x6d)](_0x33d448);}this[_0x895f6b(0x79)]=new Map();}async[a344_0x6db824(0x77)](_0x238d59,_0x5df0ee,_0x474c22){try{await this['addToChunk'](_0x238d59),_0x474c22();}catch(_0x2d1c09){_0x474c22(_0x2d1c09);}}async[a344_0x6db824(0x6c)](_0x39c8b6){const _0x3c3486=a344_0x6db824;try{this[_0x3c3486(0x79)][_0x3c3486(0x9c)]&&await this[_0x3c3486(0x8b)](),this[_0x3c3486(0x7d)]['log']('Changes\x20found\x20for\x20'+this[_0x3c3486(0xa6)]+_0x3c3486(0x89)),await this['logger'][_0x3c3486(0x8f)](),_0x39c8b6();}catch(_0x3f9027){_0x39c8b6(_0x3f9027);}}}exports[a344_0x6db824(0x99)]=SourceMemberHandler;