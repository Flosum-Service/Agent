function a316_0x520e(){const _0x1d0fcb=['MemberType','stream','defineProperty','addToChunk','30CUWfcM','11025378CXfjJm','select','(((.+)+)+)+$','handledMembersCounter','@flosum/salesforce','\x20components','Changes\x20found\x20for\x20','andWhere','SourceMemberHandler','Component_Type__c','getComponentFromFlosum','\x20IN\x20(:sourceMemberIds)','OrganisationName__c','__esModule','api','1801830KMYgpR','search','4wzAKLu','Folder__c','Name__c','_transform','sourceMemberRecords','../../../../constants','constructor','9956289YNYNMd','12573KxXtLF','push','ChangedBy','691085oeHOSP','Revision_Counter__c','_flush','4192239nBzYHa','\x20=\x20:targetOrgId','buildOrgComponentQuery','CompositeRetrieveData','size','FLOSUM_NAMESPACE','RevisionCounter','5OyFzFO','instance','update','../../constants','apply','5416vnNUDZ','Attachment_ID__c','keys','handle','MemberIdOrName','API_Name__c','logger','from','toString','execute','2627383VoHYJB','getIsDone'];a316_0x520e=function(){return _0x1d0fcb;};return a316_0x520e();}function a316_0x3fb7(_0x459b0d,_0x313f22){const _0x10571c=a316_0x520e();return a316_0x3fb7=function(_0x55e98b,_0xfb70c6){_0x55e98b=_0x55e98b-0x1a8;let _0x520e2f=_0x10571c[_0x55e98b];return _0x520e2f;},a316_0x3fb7(_0x459b0d,_0x313f22);}const a316_0x5a5303=a316_0x3fb7;(function(_0x2e9fff,_0x2241d2){const _0x2c9e69=a316_0x3fb7,_0xd0db4f=_0x2e9fff();while(!![]){try{const _0x3591c6=-parseInt(_0x2c9e69(0x1b6))/0x1+parseInt(_0x2c9e69(0x1a9))/0x2+parseInt(_0x2c9e69(0x1b9))/0x3*(parseInt(_0x2c9e69(0x1ab))/0x4)+-parseInt(_0x2c9e69(0x1c0))/0x5*(parseInt(_0x2c9e69(0x1d6))/0x6)+parseInt(_0x2c9e69(0x1b2))/0x7+-parseInt(_0x2c9e69(0x1c5))/0x8*(parseInt(_0x2c9e69(0x1b3))/0x9)+-parseInt(_0x2c9e69(0x1d5))/0xa*(-parseInt(_0x2c9e69(0x1cf))/0xb);if(_0x3591c6===_0x2241d2)break;else _0xd0db4f['push'](_0xd0db4f['shift']());}catch(_0x52cf21){_0xd0db4f['push'](_0xd0db4f['shift']());}}}(a316_0x520e,0xeb0ed));const a316_0xfb70c6=(function(){let _0x520630=!![];return function(_0x29858f,_0x1e190d){const _0x51b187=_0x520630?function(){const _0x26f77a=a316_0x3fb7;if(_0x1e190d){const _0x102e3f=_0x1e190d[_0x26f77a(0x1c4)](_0x29858f,arguments);return _0x1e190d=null,_0x102e3f;}}:function(){};return _0x520630=![],_0x51b187;};}()),a316_0x55e98b=a316_0xfb70c6(this,function(){const _0x1ed1fc=a316_0x3fb7;return a316_0x55e98b[_0x1ed1fc(0x1cd)]()[_0x1ed1fc(0x1aa)]('(((.+)+)+)+$')['toString']()[_0x1ed1fc(0x1b1)](a316_0x55e98b)[_0x1ed1fc(0x1aa)](_0x1ed1fc(0x1d8));});a316_0x55e98b();'use strict';Object[a316_0x5a5303(0x1d3)](exports,a316_0x5a5303(0x1e3),{'value':!![]}),exports[a316_0x5a5303(0x1de)]=void 0x0;const stream_1=require(a316_0x5a5303(0x1d2)),salesforce_1=require(a316_0x5a5303(0x1da)),constants_1=require(a316_0x5a5303(0x1c3)),constants_2=require(a316_0x5a5303(0x1b0)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a316_0x5a5303(0x1bf),IS_NAME_OBSOLETE='IsNameObsolete',MEMBER_ID_FIELD_NAME=a316_0x5a5303(0x1c9),MEMBER_TYPE_FIELD_NAME=a316_0x5a5303(0x1d1),CHANGED_BY_FIELD_NAME=a316_0x5a5303(0x1b5),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a316_0x5a5303(0x1be)]+'Source_Member_Id__c',ORGANIZATION_NAME_FIELD=constants_2['FLOSUM_NAMESPACE']+a316_0x5a5303(0x1e2),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2['FLOSUM_NAMESPACE']+a316_0x5a5303(0x1b7),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a316_0x5a5303(0x1be)]+a316_0x5a5303(0x1b7),constants_2[a316_0x5a5303(0x1be)]+a316_0x5a5303(0x1df),constants_2[a316_0x5a5303(0x1be)]+a316_0x5a5303(0x1ca),constants_2[a316_0x5a5303(0x1be)]+a316_0x5a5303(0x1ad),constants_2[a316_0x5a5303(0x1be)]+'Source_Member_Id__c',constants_2[a316_0x5a5303(0x1be)]+'OrganisationName__c',constants_2[a316_0x5a5303(0x1be)]+'Attachment_ID__c',constants_2['FLOSUM_NAMESPACE']+a316_0x5a5303(0x1ac)];class SourceMemberHandler extends stream_1['Transform']{constructor({apiVersion:_0x433060,instance:_0x109e5c,targetOrgId:_0x22117d,logger:_0x375af1}){const _0x3b1651=a316_0x5a5303;super({'objectMode':!![]}),this[_0x3b1651(0x1af)]=new Map(),this[_0x3b1651(0x1d9)]=0x0,this[_0x3b1651(0x1a8)]=_0x433060,this['instance']=_0x109e5c,this['targetOrgId']=_0x22117d,this[_0x3b1651(0x1cb)]=_0x375af1;}[a316_0x5a5303(0x1bb)](){const _0x31de0f=a316_0x5a5303;return new salesforce_1['QueryBuilder']()[_0x31de0f(0x1d7)](...ORG_COMPONENT_SELECT_FIELDS)[_0x31de0f(0x1cc)](constants_1['ORG_COMPONENT_OBJECT_NAME'])['where'](SOURCE_MEMBER_ID_FIELD_NAME+_0x31de0f(0x1e1),{'sourceMemberIds':[...this['sourceMemberRecords'][_0x31de0f(0x1c7)]()]})[_0x31de0f(0x1dd)](ORGANIZATION_NAME_FIELD+_0x31de0f(0x1ba),{'targetOrgId':this['targetOrgId']});}async[a316_0x5a5303(0x1e0)](){const _0x547ebe=a316_0x5a5303,_0x20a17d=new salesforce_1[(_0x547ebe(0x1bc))]({'api':this['api'],'queryBuilder':this[_0x547ebe(0x1bb)](),'instance':this[_0x547ebe(0x1c1)],'isTooling':![]}),_0x17ce20=new Map();do{const {records:_0x5adf2a}=await _0x20a17d[_0x547ebe(0x1ce)]();for(const _0x5560a3 of _0x5adf2a){_0x17ce20['set'](_0x5560a3[SOURCE_MEMBER_ID_FIELD_NAME],_0x5560a3);}}while(!_0x20a17d[_0x547ebe(0x1d0)]());return _0x17ce20;}async['addToChunk'](_0x396719){const _0x3b4ddb=a316_0x5a5303;this['sourceMemberRecords']['set'](_0x396719['Id'],_0x396719),this[_0x3b4ddb(0x1af)][_0x3b4ddb(0x1bd)]===MAX_CHUNK_SIZE&&await this[_0x3b4ddb(0x1c8)]();}async[a316_0x5a5303(0x1c8)](){const _0x1a49df=a316_0x5a5303,_0x38838c=await this['getComponentFromFlosum']();for(const [_0x3327af,_0x4fb446]of this[_0x1a49df(0x1af)]){const _0x2d0e3a=_0x38838c['get'](_0x3327af);if(_0x2d0e3a&&_0x4fb446[REVISION_COUNTER_FIELD_NAME]===_0x2d0e3a[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x885a7d={'sourceMemberId':_0x4fb446['Id'],'componentId':(_0x2d0e3a===null||_0x2d0e3a===void 0x0?void 0x0:_0x2d0e3a['Id'])||null,'attachmentId':(_0x2d0e3a===null||_0x2d0e3a===void 0x0?void 0x0:_0x2d0e3a[_0x1a49df(0x1c6)])||null,'metadataId':_0x4fb446[MEMBER_ID_FIELD_NAME],'metadataType':_0x4fb446[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x4fb446[IS_NAME_OBSOLETE],'revisionCounter':_0x4fb446[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x4fb446[CHANGED_BY_FIELD_NAME]};this[_0x1a49df(0x1d9)]++,this[_0x1a49df(0x1b4)](_0x885a7d);}this[_0x1a49df(0x1af)]=new Map();}async[a316_0x5a5303(0x1ae)](_0x28274d,_0x13a0f3,_0x4eadb0){const _0x243b30=a316_0x5a5303;try{await this[_0x243b30(0x1d4)](_0x28274d),_0x4eadb0();}catch(_0x3f309a){_0x4eadb0(_0x3f309a);}}async[a316_0x5a5303(0x1b8)](_0x5e17ab){const _0x4dd14b=a316_0x5a5303;try{this[_0x4dd14b(0x1af)]['size']&&await this[_0x4dd14b(0x1c8)](),this[_0x4dd14b(0x1cb)]['log'](_0x4dd14b(0x1dc)+this[_0x4dd14b(0x1d9)]+_0x4dd14b(0x1db)),await this['logger'][_0x4dd14b(0x1c2)](),_0x5e17ab();}catch(_0x4f9f24){_0x5e17ab(_0x4f9f24);}}}exports[a316_0x5a5303(0x1de)]=SourceMemberHandler;