function a345_0x57da(){const _0x857661=['@flosum/salesforce','log','OrganisationName__c','../../constants','constructor','\x20=\x20:targetOrgId','Component_Type__c','3086704SZKLkJ','keys','MemberType','5hwLWzX','ChangedBy','set','api','getComponentFromFlosum','push','_transform','3998414JKndIX','_flush','instance','Revision_Counter__c','\x20components','Source_Member_Id__c','6700488MEMVLP','(((.+)+)+)+$','search','from','RevisionCounter','handle','Name__c','ORG_COMPONENT_OBJECT_NAME','FLOSUM_NAMESPACE','API_Name__c','10hYwlbR','IsNameObsolete','4222386jrhaWd','Attachment_ID__c','2ubKWaf','8oRKCJe','sourceMemberRecords','230662ifjkvF','toString','defineProperty','Folder__c','SourceMemberHandler','handledMembersCounter','get','logger','../../../../constants','execute','QueryBuilder','CompositeRetrieveData','addToChunk','13541957aTToVH','Transform','1371273eXuCFA','andWhere','MemberIdOrName','\x20IN\x20(:sourceMemberIds)','update','apply','buildOrgComponentQuery'];a345_0x57da=function(){return _0x857661;};return a345_0x57da();}function a345_0x2ff5(_0x39891c,_0x471abf){const _0x5a23e4=a345_0x57da();return a345_0x2ff5=function(_0x304951,_0xe2161e){_0x304951=_0x304951-0x1e1;let _0x57da9b=_0x5a23e4[_0x304951];return _0x57da9b;},a345_0x2ff5(_0x39891c,_0x471abf);}const a345_0x5b30fa=a345_0x2ff5;(function(_0x59a71e,_0x19ebf6){const _0x55033b=a345_0x2ff5,_0x204a7a=_0x59a71e();while(!![]){try{const _0x13d03f=parseInt(_0x55033b(0x1fe))/0x1*(-parseInt(_0x55033b(0x201))/0x2)+-parseInt(_0x55033b(0x210))/0x3*(parseInt(_0x55033b(0x1ff))/0x4)+parseInt(_0x55033b(0x1e3))/0x5*(parseInt(_0x55033b(0x1f0))/0x6)+parseInt(_0x55033b(0x1ea))/0x7+-parseInt(_0x55033b(0x21e))/0x8+-parseInt(_0x55033b(0x1fc))/0x9+parseInt(_0x55033b(0x1fa))/0xa*(parseInt(_0x55033b(0x20e))/0xb);if(_0x13d03f===_0x19ebf6)break;else _0x204a7a['push'](_0x204a7a['shift']());}catch(_0x370bf9){_0x204a7a['push'](_0x204a7a['shift']());}}}(a345_0x57da,0xe06a1));const a345_0xe2161e=(function(){let _0x58ae7d=!![];return function(_0x41a717,_0x5bf00b){const _0x549e01=_0x58ae7d?function(){const _0x45ae4b=a345_0x2ff5;if(_0x5bf00b){const _0xe6ff27=_0x5bf00b[_0x45ae4b(0x215)](_0x41a717,arguments);return _0x5bf00b=null,_0xe6ff27;}}:function(){};return _0x58ae7d=![],_0x549e01;};}()),a345_0x304951=a345_0xe2161e(this,function(){const _0x111e63=a345_0x2ff5;return a345_0x304951[_0x111e63(0x202)]()[_0x111e63(0x1f2)](_0x111e63(0x1f1))[_0x111e63(0x202)]()[_0x111e63(0x21b)](a345_0x304951)[_0x111e63(0x1f2)](_0x111e63(0x1f1));});a345_0x304951();'use strict';Object[a345_0x5b30fa(0x203)](exports,'__esModule',{'value':!![]}),exports[a345_0x5b30fa(0x205)]=void 0x0;const stream_1=require('stream'),salesforce_1=require(a345_0x5b30fa(0x217)),constants_1=require(a345_0x5b30fa(0x21a)),constants_2=require(a345_0x5b30fa(0x209)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a345_0x5b30fa(0x1f4),IS_NAME_OBSOLETE=a345_0x5b30fa(0x1fb),MEMBER_ID_FIELD_NAME=a345_0x5b30fa(0x212),MEMBER_TYPE_FIELD_NAME=a345_0x5b30fa(0x1e2),MEMBER_NAME='MemberName',CHANGED_BY_FIELD_NAME=a345_0x5b30fa(0x1e4),SOURCE_MEMBER_ID_FIELD_NAME=constants_2['FLOSUM_NAMESPACE']+a345_0x5b30fa(0x1ef),ORGANIZATION_NAME_FIELD=constants_2[a345_0x5b30fa(0x1f8)]+a345_0x5b30fa(0x219),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2['FLOSUM_NAMESPACE']+a345_0x5b30fa(0x1ed),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a345_0x5b30fa(0x1f8)]+a345_0x5b30fa(0x1ed),constants_2[a345_0x5b30fa(0x1f8)]+a345_0x5b30fa(0x21d),constants_2[a345_0x5b30fa(0x1f8)]+a345_0x5b30fa(0x1f9),constants_2[a345_0x5b30fa(0x1f8)]+a345_0x5b30fa(0x1f6),constants_2['FLOSUM_NAMESPACE']+'Source_Member_Id__c',constants_2[a345_0x5b30fa(0x1f8)]+a345_0x5b30fa(0x219),constants_2[a345_0x5b30fa(0x1f8)]+a345_0x5b30fa(0x1fd),constants_2[a345_0x5b30fa(0x1f8)]+a345_0x5b30fa(0x204)];class SourceMemberHandler extends stream_1[a345_0x5b30fa(0x20f)]{constructor({apiVersion:_0x2dada2,instance:_0x42fbb0,targetOrgId:_0x8f2e97,logger:_0x5d0f3b}){const _0x145afa=a345_0x5b30fa;super({'objectMode':!![]}),this[_0x145afa(0x200)]=new Map(),this[_0x145afa(0x206)]=0x0,this[_0x145afa(0x1e6)]=_0x2dada2,this[_0x145afa(0x1ec)]=_0x42fbb0,this['targetOrgId']=_0x8f2e97,this['logger']=_0x5d0f3b;}[a345_0x5b30fa(0x216)](){const _0x2a2229=a345_0x5b30fa;return new salesforce_1[(_0x2a2229(0x20b))]()['select'](...ORG_COMPONENT_SELECT_FIELDS)[_0x2a2229(0x1f3)](constants_1[_0x2a2229(0x1f7)])['where'](SOURCE_MEMBER_ID_FIELD_NAME+_0x2a2229(0x213),{'sourceMemberIds':[...this[_0x2a2229(0x200)][_0x2a2229(0x1e1)]()]})[_0x2a2229(0x211)](ORGANIZATION_NAME_FIELD+_0x2a2229(0x21c),{'targetOrgId':this['targetOrgId']});}async[a345_0x5b30fa(0x1e7)](){const _0x382d48=a345_0x5b30fa,_0x1a4b81=new salesforce_1[(_0x382d48(0x20c))]({'api':this[_0x382d48(0x1e6)],'queryBuilder':this[_0x382d48(0x216)](),'instance':this[_0x382d48(0x1ec)],'isTooling':![]}),_0x2b0e0d=new Map();do{const {records:_0x31e0de}=await _0x1a4b81[_0x382d48(0x20a)]();for(const _0x126541 of _0x31e0de){_0x2b0e0d[_0x382d48(0x1e5)](_0x126541[SOURCE_MEMBER_ID_FIELD_NAME],_0x126541);}}while(!_0x1a4b81['getIsDone']());return _0x2b0e0d;}async[a345_0x5b30fa(0x20d)](_0x13cad4){const _0x1727c6=a345_0x5b30fa;this[_0x1727c6(0x200)][_0x1727c6(0x1e5)](_0x13cad4['Id'],_0x13cad4),this[_0x1727c6(0x200)]['size']===MAX_CHUNK_SIZE&&await this[_0x1727c6(0x1f5)]();}async[a345_0x5b30fa(0x1f5)](){const _0x1d2e34=a345_0x5b30fa,_0x1cab8b=await this[_0x1d2e34(0x1e7)]();for(const [_0x51f145,_0x450b13]of this[_0x1d2e34(0x200)]){const _0x40c901=_0x1cab8b[_0x1d2e34(0x207)](_0x51f145);if(_0x40c901&&_0x450b13[REVISION_COUNTER_FIELD_NAME]===_0x40c901[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0xa3eb09={'sourceMemberId':_0x450b13['Id'],'componentId':(_0x40c901===null||_0x40c901===void 0x0?void 0x0:_0x40c901['Id'])||null,'attachmentId':(_0x40c901===null||_0x40c901===void 0x0?void 0x0:_0x40c901[_0x1d2e34(0x1fd)])||null,'metadataId':_0x450b13[MEMBER_ID_FIELD_NAME],'metadataType':_0x450b13[MEMBER_TYPE_FIELD_NAME],'metadataName':_0x450b13[MEMBER_NAME],'isNameObsolete':_0x450b13[IS_NAME_OBSOLETE],'revisionCounter':_0x450b13[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x450b13[CHANGED_BY_FIELD_NAME]};this[_0x1d2e34(0x206)]++,this[_0x1d2e34(0x1e8)](_0xa3eb09);}this[_0x1d2e34(0x200)]=new Map();}async[a345_0x5b30fa(0x1e9)](_0x502f15,_0x2d897f,_0x1516e7){try{await this['addToChunk'](_0x502f15),_0x1516e7();}catch(_0x108847){_0x1516e7(_0x108847);}}async[a345_0x5b30fa(0x1eb)](_0x4fbf44){const _0x339049=a345_0x5b30fa;try{this['sourceMemberRecords']['size']&&await this[_0x339049(0x1f5)](),this[_0x339049(0x208)][_0x339049(0x218)]('Changes\x20found\x20for\x20'+this[_0x339049(0x206)]+_0x339049(0x1ee)),await this[_0x339049(0x208)][_0x339049(0x214)](),_0x4fbf44();}catch(_0x54ad13){_0x4fbf44(_0x54ad13);}}}exports[a345_0x5b30fa(0x205)]=SourceMemberHandler;