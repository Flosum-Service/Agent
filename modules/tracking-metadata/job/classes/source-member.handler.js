const a300_0x422984=a300_0x4d4e;(function(_0x333256,_0x549597){const _0x752eae=a300_0x4d4e,_0xe59c72=_0x333256();while(!![]){try{const _0x4349ef=-parseInt(_0x752eae(0x1c1))/0x1*(parseInt(_0x752eae(0x1e5))/0x2)+parseInt(_0x752eae(0x1ba))/0x3*(parseInt(_0x752eae(0x1b4))/0x4)+-parseInt(_0x752eae(0x1cb))/0x5*(parseInt(_0x752eae(0x1c9))/0x6)+parseInt(_0x752eae(0x1cd))/0x7+parseInt(_0x752eae(0x1b7))/0x8+-parseInt(_0x752eae(0x1bc))/0x9+parseInt(_0x752eae(0x1e1))/0xa*(parseInt(_0x752eae(0x1bf))/0xb);if(_0x4349ef===_0x549597)break;else _0xe59c72['push'](_0xe59c72['shift']());}catch(_0x15efdd){_0xe59c72['push'](_0xe59c72['shift']());}}}(a300_0x5663,0xa8118));const a300_0x55644d=(function(){let _0x87d823=!![];return function(_0x34da43,_0xa85d){const _0x41e3d3=_0x87d823?function(){if(_0xa85d){const _0x4a58cc=_0xa85d['apply'](_0x34da43,arguments);return _0xa85d=null,_0x4a58cc;}}:function(){};return _0x87d823=![],_0x41e3d3;};}()),a300_0x3022df=a300_0x55644d(this,function(){const _0xbf8012=a300_0x4d4e;return a300_0x3022df[_0xbf8012(0x1b8)]()[_0xbf8012(0x1c8)](_0xbf8012(0x1ca))['toString']()['constructor'](a300_0x3022df)['search'](_0xbf8012(0x1ca));});a300_0x3022df();'use strict';Object[a300_0x422984(0x1d5)](exports,a300_0x422984(0x1bb),{'value':!![]}),exports[a300_0x422984(0x1ce)]=void 0x0;const stream_1=require('stream'),salesforce_1=require('@flosum/salesforce'),constants_1=require('../../constants'),constants_2=require(a300_0x422984(0x1d0)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a300_0x422984(0x1d1),IS_NAME_OBSOLETE=a300_0x422984(0x1dd),MEMBER_ID_FIELD_NAME=a300_0x422984(0x1b9),MEMBER_TYPE_FIELD_NAME=a300_0x422984(0x1d2),CHANGED_BY_FIELD_NAME='ChangedBy',SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a300_0x422984(0x1e3)]+a300_0x422984(0x1e7),ORGANIZATION_NAME_FIELD=constants_2[a300_0x422984(0x1e3)]+a300_0x422984(0x1c7),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a300_0x422984(0x1e3)]+a300_0x422984(0x1cf),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a300_0x422984(0x1e3)]+a300_0x422984(0x1cf),constants_2['FLOSUM_NAMESPACE']+a300_0x422984(0x1d7),constants_2[a300_0x422984(0x1e3)]+a300_0x422984(0x1d3),constants_2['FLOSUM_NAMESPACE']+'Name__c',constants_2[a300_0x422984(0x1e3)]+'Source_Member_Id__c',constants_2[a300_0x422984(0x1e3)]+a300_0x422984(0x1c7),constants_2[a300_0x422984(0x1e3)]+a300_0x422984(0x1b6),constants_2[a300_0x422984(0x1e3)]+a300_0x422984(0x1df)];function a300_0x4d4e(_0x2aada9,_0x20edce){const _0x266716=a300_0x5663();return a300_0x4d4e=function(_0x3022df,_0x55644d){_0x3022df=_0x3022df-0x1b3;let _0x5663ac=_0x266716[_0x3022df];return _0x5663ac;},a300_0x4d4e(_0x2aada9,_0x20edce);}class SourceMemberHandler extends stream_1['Transform']{constructor({apiVersion:_0x3e6e46,instance:_0x149846,targetOrgId:_0x4ccdd5,logger:_0x76d96b}){const _0x5ef9ef=a300_0x422984;super({'objectMode':!![]}),this[_0x5ef9ef(0x1db)]=new Map(),this[_0x5ef9ef(0x1d9)]=0x0,this[_0x5ef9ef(0x1cc)]=_0x3e6e46,this[_0x5ef9ef(0x1c4)]=_0x149846,this[_0x5ef9ef(0x1d8)]=_0x4ccdd5,this[_0x5ef9ef(0x1b5)]=_0x76d96b;}['buildOrgComponentQuery'](){const _0x37f01b=a300_0x422984;return new salesforce_1[(_0x37f01b(0x1e0))]()[_0x37f01b(0x1c2)](...ORG_COMPONENT_SELECT_FIELDS)[_0x37f01b(0x1be)](constants_1[_0x37f01b(0x1de)])[_0x37f01b(0x1d4)](SOURCE_MEMBER_ID_FIELD_NAME+_0x37f01b(0x1c0),{'sourceMemberIds':[...this['sourceMemberRecords'][_0x37f01b(0x1da)]()]})['andWhere'](ORGANIZATION_NAME_FIELD+_0x37f01b(0x1e6),{'targetOrgId':this[_0x37f01b(0x1d8)]});}async[a300_0x422984(0x1dc)](){const _0x44df74=a300_0x422984,_0x35edde=new salesforce_1[(_0x44df74(0x1ea))]({'api':this['api'],'queryBuilder':this['buildOrgComponentQuery'](),'instance':this[_0x44df74(0x1c4)],'isTooling':![]}),_0x4854e6=new Map();do{const {records:_0x58c2f4}=await _0x35edde['execute']();for(const _0x45fd22 of _0x58c2f4){_0x4854e6[_0x44df74(0x1bd)](_0x45fd22[SOURCE_MEMBER_ID_FIELD_NAME],_0x45fd22);}}while(!_0x35edde[_0x44df74(0x1c6)]());return _0x4854e6;}async[a300_0x422984(0x1d6)](_0x4d54b6){const _0x24e7b0=a300_0x422984;this[_0x24e7b0(0x1db)][_0x24e7b0(0x1bd)](_0x4d54b6['Id'],_0x4d54b6),this['sourceMemberRecords'][_0x24e7b0(0x1b3)]===MAX_CHUNK_SIZE&&await this['handle']();}async[a300_0x422984(0x1c3)](){const _0x296709=a300_0x422984,_0x20a965=await this[_0x296709(0x1dc)]();for(const [_0x4ad800,_0x4f8ae9]of this[_0x296709(0x1db)]){const _0x3c7d02=_0x20a965[_0x296709(0x1e4)](_0x4ad800);if(_0x3c7d02&&_0x4f8ae9[REVISION_COUNTER_FIELD_NAME]===_0x3c7d02[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x32d668={'sourceMemberId':_0x4f8ae9['Id'],'componentId':(_0x3c7d02===null||_0x3c7d02===void 0x0?void 0x0:_0x3c7d02['Id'])||null,'attachmentId':(_0x3c7d02===null||_0x3c7d02===void 0x0?void 0x0:_0x3c7d02[_0x296709(0x1b6)])||null,'metadataId':_0x4f8ae9[MEMBER_ID_FIELD_NAME],'metadataType':_0x4f8ae9[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x4f8ae9[IS_NAME_OBSOLETE],'revisionCounter':_0x4f8ae9[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x4f8ae9[CHANGED_BY_FIELD_NAME]};this[_0x296709(0x1d9)]++,this[_0x296709(0x1e9)](_0x32d668);}this[_0x296709(0x1db)]=new Map();}async[a300_0x422984(0x1e2)](_0x33a054,_0x184c54,_0x2e6017){const _0x419bf4=a300_0x422984;try{await this[_0x419bf4(0x1d6)](_0x33a054),_0x2e6017();}catch(_0x1f47c2){_0x2e6017(_0x1f47c2);}}async['_flush'](_0x9353a2){const _0x3abf93=a300_0x422984;try{this[_0x3abf93(0x1db)]['size']&&await this[_0x3abf93(0x1c3)](),this[_0x3abf93(0x1b5)]['log']('Changes\x20found\x20for\x20'+this[_0x3abf93(0x1d9)]+_0x3abf93(0x1e8)),await this['logger'][_0x3abf93(0x1c5)](),_0x9353a2();}catch(_0xdbf14){_0x9353a2(_0xdbf14);}}}exports[a300_0x422984(0x1ce)]=SourceMemberHandler;function a300_0x5663(){const _0x23c91c=['SourceMemberHandler','Revision_Counter__c','../../../../constants','RevisionCounter','MemberType','API_Name__c','where','defineProperty','addToChunk','Component_Type__c','targetOrgId','handledMembersCounter','keys','sourceMemberRecords','getComponentFromFlosum','IsNameObsolete','ORG_COMPONENT_OBJECT_NAME','Folder__c','QueryBuilder','11470yskAHj','_transform','FLOSUM_NAMESPACE','get','2361154WFgIXw','\x20=\x20:targetOrgId','Source_Member_Id__c','\x20components','push','CompositeRetrieveData','size','1692016TKYvdS','logger','Attachment_ID__c','3931624TXYfye','toString','MemberIdOrName','6lBVeuL','__esModule','812664fFIjVP','set','from','14333sOKMgR','\x20IN\x20(:sourceMemberIds)','1LfFdme','select','handle','instance','update','getIsDone','OrganisationName__c','search','18XxhAca','(((.+)+)+)+$','1818210FuLYvR','api','1527435UzAdmU'];a300_0x5663=function(){return _0x23c91c;};return a300_0x5663();}