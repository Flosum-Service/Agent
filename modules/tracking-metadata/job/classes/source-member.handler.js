function a315_0x40b0(_0x1a96d7,_0x1bd58c){const _0x1e7c4f=a315_0x4420();return a315_0x40b0=function(_0x251a9f,_0x25f3c8){_0x251a9f=_0x251a9f-0x14e;let _0x442005=_0x1e7c4f[_0x251a9f];return _0x442005;},a315_0x40b0(_0x1a96d7,_0x1bd58c);}const a315_0x122451=a315_0x40b0;(function(_0x12f29f,_0x43b0e6){const _0x4486ca=a315_0x40b0,_0x399ed8=_0x12f29f();while(!![]){try{const _0x1835f5=-parseInt(_0x4486ca(0x181))/0x1+-parseInt(_0x4486ca(0x17f))/0x2*(-parseInt(_0x4486ca(0x157))/0x3)+-parseInt(_0x4486ca(0x172))/0x4+-parseInt(_0x4486ca(0x164))/0x5+-parseInt(_0x4486ca(0x16c))/0x6+parseInt(_0x4486ca(0x161))/0x7+-parseInt(_0x4486ca(0x171))/0x8*(-parseInt(_0x4486ca(0x180))/0x9);if(_0x1835f5===_0x43b0e6)break;else _0x399ed8['push'](_0x399ed8['shift']());}catch(_0x55f0a6){_0x399ed8['push'](_0x399ed8['shift']());}}}(a315_0x4420,0x444b7));const a315_0x25f3c8=(function(){let _0x526386=!![];return function(_0x4dae14,_0x300e12){const _0x40c8e2=_0x526386?function(){const _0x473a51=a315_0x40b0;if(_0x300e12){const _0x305de9=_0x300e12[_0x473a51(0x179)](_0x4dae14,arguments);return _0x300e12=null,_0x305de9;}}:function(){};return _0x526386=![],_0x40c8e2;};}()),a315_0x251a9f=a315_0x25f3c8(this,function(){const _0x5c905e=a315_0x40b0;return a315_0x251a9f[_0x5c905e(0x173)]()[_0x5c905e(0x16d)](_0x5c905e(0x160))['toString']()[_0x5c905e(0x163)](a315_0x251a9f)['search']('(((.+)+)+)+$');});a315_0x251a9f();'use strict';Object['defineProperty'](exports,a315_0x122451(0x185),{'value':!![]}),exports[a315_0x122451(0x14f)]=void 0x0;function a315_0x4420(){const _0x30db69=['1898869tdKtPR','Name__c','constructor','1604575imatSV','Transform','set','update','\x20IN\x20(:sourceMemberIds)','addToChunk','handledMembersCounter','getComponentFromFlosum','882648UFTHcl','search','_flush','@flosum/salesforce','FLOSUM_NAMESPACE','73408MEsqkp','898196yGCjGt','toString','Source_Member_Id__c','logger','QueryBuilder','Component_Type__c','CompositeRetrieveData','apply','sourceMemberRecords','Folder__c','handle','push','Changes\x20found\x20for\x20','2bQBejH','423sQqILy','257581POiRgQ','log','Attachment_ID__c','getIsDone','__esModule','_transform','SourceMemberHandler','ChangedBy','buildOrgComponentQuery','where','../../../../constants','RevisionCounter','instance','size','1582047ISPYxW','select','Revision_Counter__c','MemberType','../../constants','targetOrgId','execute','api','\x20=\x20:targetOrgId','(((.+)+)+)+$'];a315_0x4420=function(){return _0x30db69;};return a315_0x4420();}const stream_1=require('stream'),salesforce_1=require(a315_0x122451(0x16f)),constants_1=require(a315_0x122451(0x15b)),constants_2=require(a315_0x122451(0x153)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a315_0x122451(0x154),IS_NAME_OBSOLETE='IsNameObsolete',MEMBER_ID_FIELD_NAME='MemberIdOrName',MEMBER_TYPE_FIELD_NAME=a315_0x122451(0x15a),CHANGED_BY_FIELD_NAME=a315_0x122451(0x150),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a315_0x122451(0x170)]+a315_0x122451(0x174),ORGANIZATION_NAME_FIELD=constants_2[a315_0x122451(0x170)]+'OrganisationName__c',REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a315_0x122451(0x170)]+a315_0x122451(0x159),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a315_0x122451(0x170)]+a315_0x122451(0x159),constants_2[a315_0x122451(0x170)]+a315_0x122451(0x177),constants_2[a315_0x122451(0x170)]+'API_Name__c',constants_2[a315_0x122451(0x170)]+a315_0x122451(0x162),constants_2[a315_0x122451(0x170)]+'Source_Member_Id__c',constants_2[a315_0x122451(0x170)]+'OrganisationName__c',constants_2['FLOSUM_NAMESPACE']+a315_0x122451(0x183),constants_2[a315_0x122451(0x170)]+a315_0x122451(0x17b)];class SourceMemberHandler extends stream_1[a315_0x122451(0x165)]{constructor({apiVersion:_0x5753d1,instance:_0x197ca5,targetOrgId:_0x16c95e,logger:_0x38f8f3}){const _0xe92b90=a315_0x122451;super({'objectMode':!![]}),this[_0xe92b90(0x17a)]=new Map(),this['handledMembersCounter']=0x0,this['api']=_0x5753d1,this[_0xe92b90(0x155)]=_0x197ca5,this['targetOrgId']=_0x16c95e,this['logger']=_0x38f8f3;}[a315_0x122451(0x151)](){const _0x183982=a315_0x122451;return new salesforce_1[(_0x183982(0x176))]()[_0x183982(0x158)](...ORG_COMPONENT_SELECT_FIELDS)['from'](constants_1['ORG_COMPONENT_OBJECT_NAME'])[_0x183982(0x152)](SOURCE_MEMBER_ID_FIELD_NAME+_0x183982(0x168),{'sourceMemberIds':[...this[_0x183982(0x17a)]['keys']()]})['andWhere'](ORGANIZATION_NAME_FIELD+_0x183982(0x15f),{'targetOrgId':this[_0x183982(0x15c)]});}async[a315_0x122451(0x16b)](){const _0x427df9=a315_0x122451,_0x2466ab=new salesforce_1[(_0x427df9(0x178))]({'api':this[_0x427df9(0x15e)],'queryBuilder':this[_0x427df9(0x151)](),'instance':this[_0x427df9(0x155)],'isTooling':![]}),_0x490a32=new Map();do{const {records:_0x185cc2}=await _0x2466ab[_0x427df9(0x15d)]();for(const _0x1245f2 of _0x185cc2){_0x490a32[_0x427df9(0x166)](_0x1245f2[SOURCE_MEMBER_ID_FIELD_NAME],_0x1245f2);}}while(!_0x2466ab[_0x427df9(0x184)]());return _0x490a32;}async[a315_0x122451(0x169)](_0x58cbab){const _0x17c20d=a315_0x122451;this[_0x17c20d(0x17a)][_0x17c20d(0x166)](_0x58cbab['Id'],_0x58cbab),this[_0x17c20d(0x17a)][_0x17c20d(0x156)]===MAX_CHUNK_SIZE&&await this['handle']();}async['handle'](){const _0x31a1f8=a315_0x122451,_0x2c9372=await this['getComponentFromFlosum']();for(const [_0x5547d0,_0x4e1cfc]of this[_0x31a1f8(0x17a)]){const _0x3051c9=_0x2c9372['get'](_0x5547d0);if(_0x3051c9&&_0x4e1cfc[REVISION_COUNTER_FIELD_NAME]===_0x3051c9[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x50a0f8={'sourceMemberId':_0x4e1cfc['Id'],'componentId':(_0x3051c9===null||_0x3051c9===void 0x0?void 0x0:_0x3051c9['Id'])||null,'attachmentId':(_0x3051c9===null||_0x3051c9===void 0x0?void 0x0:_0x3051c9[_0x31a1f8(0x183)])||null,'metadataId':_0x4e1cfc[MEMBER_ID_FIELD_NAME],'metadataType':_0x4e1cfc[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x4e1cfc[IS_NAME_OBSOLETE],'revisionCounter':_0x4e1cfc[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x4e1cfc[CHANGED_BY_FIELD_NAME]};this[_0x31a1f8(0x16a)]++,this[_0x31a1f8(0x17d)](_0x50a0f8);}this[_0x31a1f8(0x17a)]=new Map();}async[a315_0x122451(0x14e)](_0x445f55,_0x1392a9,_0x7aaac7){const _0x4bbf97=a315_0x122451;try{await this[_0x4bbf97(0x169)](_0x445f55),_0x7aaac7();}catch(_0x3e91af){_0x7aaac7(_0x3e91af);}}async[a315_0x122451(0x16e)](_0x1857ff){const _0x2e9596=a315_0x122451;try{this[_0x2e9596(0x17a)][_0x2e9596(0x156)]&&await this[_0x2e9596(0x17c)](),this[_0x2e9596(0x175)][_0x2e9596(0x182)](_0x2e9596(0x17e)+this[_0x2e9596(0x16a)]+'\x20components'),await this['logger'][_0x2e9596(0x167)](),_0x1857ff();}catch(_0x489ca9){_0x1857ff(_0x489ca9);}}}exports[a315_0x122451(0x14f)]=SourceMemberHandler;