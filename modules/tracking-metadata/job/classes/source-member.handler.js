const a300_0x19f95c=a300_0x7dea;(function(_0x2f7a9e,_0x449cac){const _0x126408=a300_0x7dea,_0x258ec4=_0x2f7a9e();while(!![]){try{const _0xf61030=parseInt(_0x126408(0xb0))/0x1+parseInt(_0x126408(0xce))/0x2*(-parseInt(_0x126408(0xe5))/0x3)+-parseInt(_0x126408(0xc3))/0x4*(parseInt(_0x126408(0xe2))/0x5)+parseInt(_0x126408(0xd8))/0x6+-parseInt(_0x126408(0xc8))/0x7+parseInt(_0x126408(0xe4))/0x8*(parseInt(_0x126408(0xb4))/0x9)+-parseInt(_0x126408(0xd7))/0xa*(parseInt(_0x126408(0xc6))/0xb);if(_0xf61030===_0x449cac)break;else _0x258ec4['push'](_0x258ec4['shift']());}catch(_0x74583e){_0x258ec4['push'](_0x258ec4['shift']());}}}(a300_0x1271,0xb40ac));function a300_0x1271(){const _0x3b3c5c=['from','FLOSUM_NAMESPACE','sourceMemberRecords','where','getComponentFromFlosum','toString','MemberType','5jfLpow','Source_Member_Id__c','636936LSKkvx','1661001KpSmSu','OrganisationName__c','\x20IN\x20(:sourceMemberIds)','Folder__c','instance','1415863NZPeJg','search','API_Name__c','getIsDone','153NZMeiB','set','Name__c','buildOrgComponentQuery','logger','__esModule','\x20=\x20:targetOrgId','@flosum/salesforce','_flush','handledMembersCounter','CompositeRetrieveData','keys','ORG_COMPONENT_OBJECT_NAME','ChangedBy','size','2529416ARvBsh','SourceMemberHandler','andWhere','486398nitJNK','Component_Type__c','4804800toaWUx','push','../../../../constants','(((.+)+)+)+$','update','handle','2NoFIVE','log','api','_transform','Attachment_ID__c','targetOrgId','Transform','Changes\x20found\x20for\x20','Revision_Counter__c','190KZZWYu','4083978tPCPEl','\x20components','QueryBuilder'];a300_0x1271=function(){return _0x3b3c5c;};return a300_0x1271();}const a300_0x196a08=(function(){let _0x4c3aa6=!![];return function(_0x3cc2e7,_0x325546){const _0x2c3398=_0x4c3aa6?function(){if(_0x325546){const _0x3f0291=_0x325546['apply'](_0x3cc2e7,arguments);return _0x325546=null,_0x3f0291;}}:function(){};return _0x4c3aa6=![],_0x2c3398;};}()),a300_0x42c3e1=a300_0x196a08(this,function(){const _0x5d5741=a300_0x7dea;return a300_0x42c3e1['toString']()[_0x5d5741(0xb1)](_0x5d5741(0xcb))[_0x5d5741(0xe0)]()['constructor'](a300_0x42c3e1)[_0x5d5741(0xb1)](_0x5d5741(0xcb));});a300_0x42c3e1();'use strict';Object['defineProperty'](exports,a300_0x19f95c(0xb9),{'value':!![]}),exports[a300_0x19f95c(0xc4)]=void 0x0;const stream_1=require('stream'),salesforce_1=require(a300_0x19f95c(0xbb)),constants_1=require('../../constants'),constants_2=require(a300_0x19f95c(0xca)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME='RevisionCounter',IS_NAME_OBSOLETE='IsNameObsolete',MEMBER_ID_FIELD_NAME='MemberIdOrName',MEMBER_TYPE_FIELD_NAME=a300_0x19f95c(0xe1),CHANGED_BY_FIELD_NAME=a300_0x19f95c(0xc1),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a300_0x19f95c(0xdc)]+a300_0x19f95c(0xe3),ORGANIZATION_NAME_FIELD=constants_2[a300_0x19f95c(0xdc)]+a300_0x19f95c(0xe6),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a300_0x19f95c(0xdc)]+a300_0x19f95c(0xd6),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2['FLOSUM_NAMESPACE']+a300_0x19f95c(0xd6),constants_2[a300_0x19f95c(0xdc)]+a300_0x19f95c(0xc7),constants_2[a300_0x19f95c(0xdc)]+a300_0x19f95c(0xb2),constants_2['FLOSUM_NAMESPACE']+a300_0x19f95c(0xb6),constants_2[a300_0x19f95c(0xdc)]+'Source_Member_Id__c',constants_2[a300_0x19f95c(0xdc)]+a300_0x19f95c(0xe6),constants_2[a300_0x19f95c(0xdc)]+a300_0x19f95c(0xd2),constants_2['FLOSUM_NAMESPACE']+a300_0x19f95c(0xe8)];function a300_0x7dea(_0x480787,_0x2def25){const _0x2fc5d1=a300_0x1271();return a300_0x7dea=function(_0x42c3e1,_0x196a08){_0x42c3e1=_0x42c3e1-0xb0;let _0x127133=_0x2fc5d1[_0x42c3e1];return _0x127133;},a300_0x7dea(_0x480787,_0x2def25);}class SourceMemberHandler extends stream_1[a300_0x19f95c(0xd4)]{constructor({apiVersion:_0x5f0e47,instance:_0x4338d1,targetOrgId:_0x40cab8,logger:_0x121f94}){const _0x1562ce=a300_0x19f95c;super({'objectMode':!![]}),this['sourceMemberRecords']=new Map(),this['handledMembersCounter']=0x0,this[_0x1562ce(0xd0)]=_0x5f0e47,this[_0x1562ce(0xe9)]=_0x4338d1,this[_0x1562ce(0xd3)]=_0x40cab8,this[_0x1562ce(0xb8)]=_0x121f94;}['buildOrgComponentQuery'](){const _0xf9b4b1=a300_0x19f95c;return new salesforce_1[(_0xf9b4b1(0xda))]()['select'](...ORG_COMPONENT_SELECT_FIELDS)[_0xf9b4b1(0xdb)](constants_1[_0xf9b4b1(0xc0)])[_0xf9b4b1(0xde)](SOURCE_MEMBER_ID_FIELD_NAME+_0xf9b4b1(0xe7),{'sourceMemberIds':[...this[_0xf9b4b1(0xdd)][_0xf9b4b1(0xbf)]()]})[_0xf9b4b1(0xc5)](ORGANIZATION_NAME_FIELD+_0xf9b4b1(0xba),{'targetOrgId':this[_0xf9b4b1(0xd3)]});}async['getComponentFromFlosum'](){const _0x487cba=a300_0x19f95c,_0xc98b94=new salesforce_1[(_0x487cba(0xbe))]({'api':this[_0x487cba(0xd0)],'queryBuilder':this[_0x487cba(0xb7)](),'instance':this[_0x487cba(0xe9)],'isTooling':![]}),_0x2a75cf=new Map();do{const {records:_0xb9fe62}=await _0xc98b94['execute']();for(const _0x1b064c of _0xb9fe62){_0x2a75cf[_0x487cba(0xb5)](_0x1b064c[SOURCE_MEMBER_ID_FIELD_NAME],_0x1b064c);}}while(!_0xc98b94[_0x487cba(0xb3)]());return _0x2a75cf;}async['addToChunk'](_0x37f4e0){const _0x36fa9f=a300_0x19f95c;this[_0x36fa9f(0xdd)][_0x36fa9f(0xb5)](_0x37f4e0['Id'],_0x37f4e0),this[_0x36fa9f(0xdd)][_0x36fa9f(0xc2)]===MAX_CHUNK_SIZE&&await this[_0x36fa9f(0xcd)]();}async[a300_0x19f95c(0xcd)](){const _0x583004=a300_0x19f95c,_0x48ad65=await this[_0x583004(0xdf)]();for(const [_0x3a70c3,_0x2969a9]of this[_0x583004(0xdd)]){const _0x827c04=_0x48ad65['get'](_0x3a70c3);if(_0x827c04&&_0x2969a9[REVISION_COUNTER_FIELD_NAME]===_0x827c04[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x4711c0={'sourceMemberId':_0x2969a9['Id'],'componentId':(_0x827c04===null||_0x827c04===void 0x0?void 0x0:_0x827c04['Id'])||null,'attachmentId':(_0x827c04===null||_0x827c04===void 0x0?void 0x0:_0x827c04[_0x583004(0xd2)])||null,'metadataId':_0x2969a9[MEMBER_ID_FIELD_NAME],'metadataType':_0x2969a9[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x2969a9[IS_NAME_OBSOLETE],'revisionCounter':_0x2969a9[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x2969a9[CHANGED_BY_FIELD_NAME]};this[_0x583004(0xbd)]++,this[_0x583004(0xc9)](_0x4711c0);}this['sourceMemberRecords']=new Map();}async[a300_0x19f95c(0xd1)](_0x3601be,_0x4cfdd4,_0x2749bf){try{await this['addToChunk'](_0x3601be),_0x2749bf();}catch(_0x4c1503){_0x2749bf(_0x4c1503);}}async[a300_0x19f95c(0xbc)](_0x1c1b25){const _0x11ff1a=a300_0x19f95c;try{this[_0x11ff1a(0xdd)][_0x11ff1a(0xc2)]&&await this[_0x11ff1a(0xcd)](),this[_0x11ff1a(0xb8)][_0x11ff1a(0xcf)](_0x11ff1a(0xd5)+this[_0x11ff1a(0xbd)]+_0x11ff1a(0xd9)),await this['logger'][_0x11ff1a(0xcc)](),_0x1c1b25();}catch(_0x16ba6e){_0x1c1b25(_0x16ba6e);}}}exports[a300_0x19f95c(0xc4)]=SourceMemberHandler;