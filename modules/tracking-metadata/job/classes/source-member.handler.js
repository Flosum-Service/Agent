function a332_0x50ac(_0x4cab9e,_0x3ff996){const _0x19403e=a332_0x5eec();return a332_0x50ac=function(_0x6ef6ee,_0x520a30){_0x6ef6ee=_0x6ef6ee-0x11a;let _0x5eec4e=_0x19403e[_0x6ef6ee];return _0x5eec4e;},a332_0x50ac(_0x4cab9e,_0x3ff996);}const a332_0x19220e=a332_0x50ac;(function(_0x46e5de,_0x278010){const _0x379ec6=a332_0x50ac,_0x4a250e=_0x46e5de();while(!![]){try{const _0x128a42=parseInt(_0x379ec6(0x13f))/0x1*(-parseInt(_0x379ec6(0x152))/0x2)+-parseInt(_0x379ec6(0x144))/0x3*(-parseInt(_0x379ec6(0x129))/0x4)+parseInt(_0x379ec6(0x11a))/0x5+parseInt(_0x379ec6(0x122))/0x6+-parseInt(_0x379ec6(0x13e))/0x7+parseInt(_0x379ec6(0x136))/0x8+-parseInt(_0x379ec6(0x120))/0x9;if(_0x128a42===_0x278010)break;else _0x4a250e['push'](_0x4a250e['shift']());}catch(_0x2e9e9c){_0x4a250e['push'](_0x4a250e['shift']());}}}(a332_0x5eec,0xdbcf4));const a332_0x520a30=(function(){let _0x5c0ed1=!![];return function(_0x1c3378,_0x4e7f27){const _0x30589c=_0x5c0ed1?function(){const _0x2772b9=a332_0x50ac;if(_0x4e7f27){const _0x2586ad=_0x4e7f27[_0x2772b9(0x12a)](_0x1c3378,arguments);return _0x4e7f27=null,_0x2586ad;}}:function(){};return _0x5c0ed1=![],_0x30589c;};}()),a332_0x6ef6ee=a332_0x520a30(this,function(){const _0x315d1d=a332_0x50ac;return a332_0x6ef6ee[_0x315d1d(0x124)]()[_0x315d1d(0x143)](_0x315d1d(0x14d))[_0x315d1d(0x124)]()[_0x315d1d(0x126)](a332_0x6ef6ee)[_0x315d1d(0x143)](_0x315d1d(0x14d));});a332_0x6ef6ee();'use strict';Object[a332_0x19220e(0x132)](exports,'__esModule',{'value':!![]}),exports[a332_0x19220e(0x11f)]=void 0x0;const stream_1=require('stream'),salesforce_1=require(a332_0x19220e(0x150)),constants_1=require(a332_0x19220e(0x14c)),constants_2=require(a332_0x19220e(0x123)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a332_0x19220e(0x135),IS_NAME_OBSOLETE=a332_0x19220e(0x142),MEMBER_ID_FIELD_NAME=a332_0x19220e(0x11e),MEMBER_TYPE_FIELD_NAME=a332_0x19220e(0x140),CHANGED_BY_FIELD_NAME='ChangedBy',SOURCE_MEMBER_ID_FIELD_NAME=constants_2['FLOSUM_NAMESPACE']+a332_0x19220e(0x139),ORGANIZATION_NAME_FIELD=constants_2[a332_0x19220e(0x12b)]+a332_0x19220e(0x13a),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a332_0x19220e(0x12b)]+a332_0x19220e(0x12c),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a332_0x19220e(0x12b)]+a332_0x19220e(0x12c),constants_2[a332_0x19220e(0x12b)]+a332_0x19220e(0x146),constants_2['FLOSUM_NAMESPACE']+a332_0x19220e(0x11c),constants_2['FLOSUM_NAMESPACE']+a332_0x19220e(0x14a),constants_2[a332_0x19220e(0x12b)]+a332_0x19220e(0x139),constants_2['FLOSUM_NAMESPACE']+a332_0x19220e(0x13a),constants_2[a332_0x19220e(0x12b)]+'Attachment_ID__c',constants_2[a332_0x19220e(0x12b)]+a332_0x19220e(0x133)];class SourceMemberHandler extends stream_1[a332_0x19220e(0x12e)]{constructor({apiVersion:_0x4133bd,instance:_0x27143d,targetOrgId:_0xacd934,logger:_0x5651ab}){const _0x4f5366=a332_0x19220e;super({'objectMode':!![]}),this[_0x4f5366(0x11d)]=new Map(),this[_0x4f5366(0x138)]=0x0,this['api']=_0x4133bd,this[_0x4f5366(0x13d)]=_0x27143d,this[_0x4f5366(0x12d)]=_0xacd934,this[_0x4f5366(0x14f)]=_0x5651ab;}[a332_0x19220e(0x125)](){const _0x4b179f=a332_0x19220e;return new salesforce_1[(_0x4b179f(0x145))]()['select'](...ORG_COMPONENT_SELECT_FIELDS)[_0x4b179f(0x13b)](constants_1[_0x4b179f(0x137)])['where'](SOURCE_MEMBER_ID_FIELD_NAME+'\x20IN\x20(:sourceMemberIds)',{'sourceMemberIds':[...this['sourceMemberRecords'][_0x4b179f(0x134)]()]})[_0x4b179f(0x13c)](ORGANIZATION_NAME_FIELD+'\x20=\x20:targetOrgId',{'targetOrgId':this[_0x4b179f(0x12d)]});}async['getComponentFromFlosum'](){const _0x269335=a332_0x19220e,_0x460c19=new salesforce_1['CompositeRetrieveData']({'api':this[_0x269335(0x12f)],'queryBuilder':this[_0x269335(0x125)](),'instance':this[_0x269335(0x13d)],'isTooling':![]}),_0x4ff7bb=new Map();do{const {records:_0x573132}=await _0x460c19[_0x269335(0x148)]();for(const _0x5bdd39 of _0x573132){_0x4ff7bb['set'](_0x5bdd39[SOURCE_MEMBER_ID_FIELD_NAME],_0x5bdd39);}}while(!_0x460c19[_0x269335(0x11b)]());return _0x4ff7bb;}async[a332_0x19220e(0x121)](_0x918c4){const _0x168009=a332_0x19220e;this[_0x168009(0x11d)][_0x168009(0x154)](_0x918c4['Id'],_0x918c4),this[_0x168009(0x11d)][_0x168009(0x151)]===MAX_CHUNK_SIZE&&await this['handle']();}async[a332_0x19220e(0x147)](){const _0x29b05e=a332_0x19220e,_0x4073c4=await this[_0x29b05e(0x14b)]();for(const [_0x67b343,_0x30164b]of this['sourceMemberRecords']){const _0x288e9f=_0x4073c4[_0x29b05e(0x128)](_0x67b343);if(_0x288e9f&&_0x30164b[REVISION_COUNTER_FIELD_NAME]===_0x288e9f[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x113d34={'sourceMemberId':_0x30164b['Id'],'componentId':(_0x288e9f===null||_0x288e9f===void 0x0?void 0x0:_0x288e9f['Id'])||null,'attachmentId':(_0x288e9f===null||_0x288e9f===void 0x0?void 0x0:_0x288e9f[_0x29b05e(0x130)])||null,'metadataId':_0x30164b[MEMBER_ID_FIELD_NAME],'metadataType':_0x30164b[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x30164b[IS_NAME_OBSOLETE],'revisionCounter':_0x30164b[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x30164b[CHANGED_BY_FIELD_NAME]};this[_0x29b05e(0x138)]++,this[_0x29b05e(0x127)](_0x113d34);}this['sourceMemberRecords']=new Map();}async['_transform'](_0x16ed92,_0x5dc414,_0x585ce2){const _0x1d07c3=a332_0x19220e;try{await this[_0x1d07c3(0x121)](_0x16ed92),_0x585ce2();}catch(_0x38f0f4){_0x585ce2(_0x38f0f4);}}async[a332_0x19220e(0x153)](_0x2b1121){const _0x569041=a332_0x19220e;try{this[_0x569041(0x11d)][_0x569041(0x151)]&&await this['handle'](),this[_0x569041(0x14f)][_0x569041(0x149)](_0x569041(0x141)+this[_0x569041(0x138)]+_0x569041(0x131)),await this[_0x569041(0x14f)][_0x569041(0x14e)](),_0x2b1121();}catch(_0x15fb94){_0x2b1121(_0x15fb94);}}}exports[a332_0x19220e(0x11f)]=SourceMemberHandler;function a332_0x5eec(){const _0x18d068=['size','6ZRTyQi','_flush','set','5837810tGjaNN','getIsDone','API_Name__c','sourceMemberRecords','MemberIdOrName','SourceMemberHandler','15265827XKRzex','addToChunk','9046692zOxthM','../../../../constants','toString','buildOrgComponentQuery','constructor','push','get','254780BlPEnA','apply','FLOSUM_NAMESPACE','Revision_Counter__c','targetOrgId','Transform','api','Attachment_ID__c','\x20components','defineProperty','Folder__c','keys','RevisionCounter','8185944uOhmLC','ORG_COMPONENT_OBJECT_NAME','handledMembersCounter','Source_Member_Id__c','OrganisationName__c','from','andWhere','instance','6949922AzvYQM','439801oTJMKH','MemberType','Changes\x20found\x20for\x20','IsNameObsolete','search','57DRRPLb','QueryBuilder','Component_Type__c','handle','execute','log','Name__c','getComponentFromFlosum','../../constants','(((.+)+)+)+$','update','logger','@flosum/salesforce'];a332_0x5eec=function(){return _0x18d068;};return a332_0x5eec();}