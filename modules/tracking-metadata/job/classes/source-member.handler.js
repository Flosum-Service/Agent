const a332_0x4f208a=a332_0x4cbd;(function(_0x36b2de,_0x740570){const _0x217a14=a332_0x4cbd,_0x4bfd05=_0x36b2de();while(!![]){try{const _0x523eb2=-parseInt(_0x217a14(0x16b))/0x1+-parseInt(_0x217a14(0x183))/0x2+parseInt(_0x217a14(0x190))/0x3+-parseInt(_0x217a14(0x176))/0x4*(parseInt(_0x217a14(0x17e))/0x5)+parseInt(_0x217a14(0x16d))/0x6*(parseInt(_0x217a14(0x174))/0x7)+parseInt(_0x217a14(0x19c))/0x8*(parseInt(_0x217a14(0x178))/0x9)+parseInt(_0x217a14(0x16c))/0xa;if(_0x523eb2===_0x740570)break;else _0x4bfd05['push'](_0x4bfd05['shift']());}catch(_0x55cb63){_0x4bfd05['push'](_0x4bfd05['shift']());}}}(a332_0x2791,0x82281));const a332_0x23aba8=(function(){let _0x18b86a=!![];return function(_0x41ab73,_0x55305b){const _0x250e21=_0x18b86a?function(){if(_0x55305b){const _0x5a58db=_0x55305b['apply'](_0x41ab73,arguments);return _0x55305b=null,_0x5a58db;}}:function(){};return _0x18b86a=![],_0x250e21;};}()),a332_0x423c58=a332_0x23aba8(this,function(){const _0x264e63=a332_0x4cbd;return a332_0x423c58[_0x264e63(0x18a)]()[_0x264e63(0x181)]('(((.+)+)+)+$')[_0x264e63(0x18a)]()[_0x264e63(0x19f)](a332_0x423c58)['search'](_0x264e63(0x19e));});function a332_0x2791(){const _0x155106=['API_Name__c','2210719GJMWAg','execute','316JYrCHz','Source_Member_Id__c','487098IwEGMk','OrganisationName__c','get','keys','ChangedBy','select','21135FshyUC','Name__c','_transform','search','getComponentFromFlosum','184246BAVWTI','set','IsNameObsolete','\x20components','@flosum/salesforce','Transform','SourceMemberHandler','toString','stream','Component_Type__c','logger','Folder__c','MemberIdOrName','23223uHxYkZ','targetOrgId','FLOSUM_NAMESPACE','defineProperty','../../constants','api','Changes\x20found\x20for\x20','handledMembersCounter','RevisionCounter','update','sourceMemberRecords','ORG_COMPONENT_OBJECT_NAME','64gjJUik','Attachment_ID__c','(((.+)+)+)+$','constructor','_flush','instance','addToChunk','\x20=\x20:targetOrgId','CompositeRetrieveData','378203tJFOVO','2650290rfMKdV','12NzlLIH','where','andWhere','__esModule','handle','../../../../constants'];a332_0x2791=function(){return _0x155106;};return a332_0x2791();}a332_0x423c58();'use strict';Object[a332_0x4f208a(0x193)](exports,a332_0x4f208a(0x170),{'value':!![]}),exports[a332_0x4f208a(0x189)]=void 0x0;function a332_0x4cbd(_0x38fa11,_0x38f1ba){const _0x2afa6f=a332_0x2791();return a332_0x4cbd=function(_0x423c58,_0x23aba8){_0x423c58=_0x423c58-0x169;let _0x279191=_0x2afa6f[_0x423c58];return _0x279191;},a332_0x4cbd(_0x38fa11,_0x38f1ba);}const stream_1=require(a332_0x4f208a(0x18b)),salesforce_1=require(a332_0x4f208a(0x187)),constants_1=require(a332_0x4f208a(0x194)),constants_2=require(a332_0x4f208a(0x172)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a332_0x4f208a(0x198),IS_NAME_OBSOLETE=a332_0x4f208a(0x185),MEMBER_ID_FIELD_NAME=a332_0x4f208a(0x18f),MEMBER_TYPE_FIELD_NAME='MemberType',CHANGED_BY_FIELD_NAME=a332_0x4f208a(0x17c),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a332_0x4f208a(0x192)]+a332_0x4f208a(0x177),ORGANIZATION_NAME_FIELD=constants_2['FLOSUM_NAMESPACE']+a332_0x4f208a(0x179),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a332_0x4f208a(0x192)]+'Revision_Counter__c',ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a332_0x4f208a(0x192)]+'Revision_Counter__c',constants_2['FLOSUM_NAMESPACE']+a332_0x4f208a(0x18c),constants_2[a332_0x4f208a(0x192)]+a332_0x4f208a(0x173),constants_2[a332_0x4f208a(0x192)]+a332_0x4f208a(0x17f),constants_2[a332_0x4f208a(0x192)]+a332_0x4f208a(0x177),constants_2['FLOSUM_NAMESPACE']+a332_0x4f208a(0x179),constants_2[a332_0x4f208a(0x192)]+'Attachment_ID__c',constants_2['FLOSUM_NAMESPACE']+a332_0x4f208a(0x18e)];class SourceMemberHandler extends stream_1[a332_0x4f208a(0x188)]{constructor({apiVersion:_0xf098f0,instance:_0x24133e,targetOrgId:_0x2fe60,logger:_0x54570b}){const _0x2fbdfc=a332_0x4f208a;super({'objectMode':!![]}),this[_0x2fbdfc(0x19a)]=new Map(),this['handledMembersCounter']=0x0,this[_0x2fbdfc(0x195)]=_0xf098f0,this[_0x2fbdfc(0x1a1)]=_0x24133e,this[_0x2fbdfc(0x191)]=_0x2fe60,this[_0x2fbdfc(0x18d)]=_0x54570b;}['buildOrgComponentQuery'](){const _0x149208=a332_0x4f208a;return new salesforce_1['QueryBuilder']()[_0x149208(0x17d)](...ORG_COMPONENT_SELECT_FIELDS)['from'](constants_1[_0x149208(0x19b)])[_0x149208(0x16e)](SOURCE_MEMBER_ID_FIELD_NAME+'\x20IN\x20(:sourceMemberIds)',{'sourceMemberIds':[...this[_0x149208(0x19a)][_0x149208(0x17b)]()]})[_0x149208(0x16f)](ORGANIZATION_NAME_FIELD+_0x149208(0x169),{'targetOrgId':this[_0x149208(0x191)]});}async[a332_0x4f208a(0x182)](){const _0x67dad8=a332_0x4f208a,_0x47f035=new salesforce_1[(_0x67dad8(0x16a))]({'api':this[_0x67dad8(0x195)],'queryBuilder':this['buildOrgComponentQuery'](),'instance':this[_0x67dad8(0x1a1)],'isTooling':![]}),_0x4b37f1=new Map();do{const {records:_0x5b997d}=await _0x47f035[_0x67dad8(0x175)]();for(const _0x155613 of _0x5b997d){_0x4b37f1[_0x67dad8(0x184)](_0x155613[SOURCE_MEMBER_ID_FIELD_NAME],_0x155613);}}while(!_0x47f035['getIsDone']());return _0x4b37f1;}async[a332_0x4f208a(0x1a2)](_0x349aa9){const _0x6b861=a332_0x4f208a;this['sourceMemberRecords'][_0x6b861(0x184)](_0x349aa9['Id'],_0x349aa9),this[_0x6b861(0x19a)]['size']===MAX_CHUNK_SIZE&&await this[_0x6b861(0x171)]();}async[a332_0x4f208a(0x171)](){const _0xfd18cf=a332_0x4f208a,_0x5bcd32=await this[_0xfd18cf(0x182)]();for(const [_0x1cafea,_0x3e52e0]of this[_0xfd18cf(0x19a)]){const _0x527c51=_0x5bcd32[_0xfd18cf(0x17a)](_0x1cafea);if(_0x527c51&&_0x3e52e0[REVISION_COUNTER_FIELD_NAME]===_0x527c51[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x4b0907={'sourceMemberId':_0x3e52e0['Id'],'componentId':(_0x527c51===null||_0x527c51===void 0x0?void 0x0:_0x527c51['Id'])||null,'attachmentId':(_0x527c51===null||_0x527c51===void 0x0?void 0x0:_0x527c51[_0xfd18cf(0x19d)])||null,'metadataId':_0x3e52e0[MEMBER_ID_FIELD_NAME],'metadataType':_0x3e52e0[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x3e52e0[IS_NAME_OBSOLETE],'revisionCounter':_0x3e52e0[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x3e52e0[CHANGED_BY_FIELD_NAME]};this[_0xfd18cf(0x197)]++,this['push'](_0x4b0907);}this[_0xfd18cf(0x19a)]=new Map();}async[a332_0x4f208a(0x180)](_0x1e98d7,_0x131d80,_0x55cc0b){const _0x6e4868=a332_0x4f208a;try{await this[_0x6e4868(0x1a2)](_0x1e98d7),_0x55cc0b();}catch(_0xa49cd2){_0x55cc0b(_0xa49cd2);}}async[a332_0x4f208a(0x1a0)](_0x4d4960){const _0x668fdd=a332_0x4f208a;try{this['sourceMemberRecords']['size']&&await this['handle'](),this[_0x668fdd(0x18d)]['log'](_0x668fdd(0x196)+this[_0x668fdd(0x197)]+_0x668fdd(0x186)),await this[_0x668fdd(0x18d)][_0x668fdd(0x199)](),_0x4d4960();}catch(_0x247f1e){_0x4d4960(_0x247f1e);}}}exports[a332_0x4f208a(0x189)]=SourceMemberHandler;