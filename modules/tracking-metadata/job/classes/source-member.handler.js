const a345_0x6b4c5c=a345_0x3a8f;(function(_0x2a2348,_0x4dd2c2){const _0x1e185b=a345_0x3a8f,_0x2605df=_0x2a2348();while(!![]){try{const _0x339820=-parseInt(_0x1e185b(0x84))/0x1+-parseInt(_0x1e185b(0x7f))/0x2*(-parseInt(_0x1e185b(0xae))/0x3)+-parseInt(_0x1e185b(0x7a))/0x4*(parseInt(_0x1e185b(0xa9))/0x5)+-parseInt(_0x1e185b(0xad))/0x6*(parseInt(_0x1e185b(0x91))/0x7)+-parseInt(_0x1e185b(0x95))/0x8*(parseInt(_0x1e185b(0x8c))/0x9)+-parseInt(_0x1e185b(0x9a))/0xa+parseInt(_0x1e185b(0x9b))/0xb;if(_0x339820===_0x4dd2c2)break;else _0x2605df['push'](_0x2605df['shift']());}catch(_0x13d515){_0x2605df['push'](_0x2605df['shift']());}}}(a345_0x2477,0x8b953));const a345_0x16e652=(function(){let _0x32fac2=!![];return function(_0x58a2fc,_0x5b1a5e){const _0x3704b3=_0x32fac2?function(){const _0x174174=a345_0x3a8f;if(_0x5b1a5e){const _0x3417eb=_0x5b1a5e[_0x174174(0x89)](_0x58a2fc,arguments);return _0x5b1a5e=null,_0x3417eb;}}:function(){};return _0x32fac2=![],_0x3704b3;};}()),a345_0x472278=a345_0x16e652(this,function(){const _0x21a94f=a345_0x3a8f;return a345_0x472278['toString']()[_0x21a94f(0x94)]('(((.+)+)+)+$')['toString']()[_0x21a94f(0xa5)](a345_0x472278)['search'](_0x21a94f(0x8e));});a345_0x472278();'use strict';Object['defineProperty'](exports,a345_0x6b4c5c(0x92),{'value':!![]}),exports[a345_0x6b4c5c(0x9e)]=void 0x0;const stream_1=require(a345_0x6b4c5c(0xb3)),salesforce_1=require(a345_0x6b4c5c(0x9c)),constants_1=require(a345_0x6b4c5c(0x82)),constants_2=require('../../../../constants'),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME='RevisionCounter',IS_NAME_OBSOLETE=a345_0x6b4c5c(0xa4),MEMBER_ID_FIELD_NAME=a345_0x6b4c5c(0x9f),MEMBER_TYPE_FIELD_NAME='MemberType',MEMBER_NAME=a345_0x6b4c5c(0x80),CHANGED_BY_FIELD_NAME=a345_0x6b4c5c(0x7c),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a345_0x6b4c5c(0x8d)]+a345_0x6b4c5c(0x8a),ORGANIZATION_NAME_FIELD=constants_2['FLOSUM_NAMESPACE']+a345_0x6b4c5c(0xb1),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2['FLOSUM_NAMESPACE']+a345_0x6b4c5c(0x86),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2['FLOSUM_NAMESPACE']+a345_0x6b4c5c(0x86),constants_2[a345_0x6b4c5c(0x8d)]+'Component_Type__c',constants_2[a345_0x6b4c5c(0x8d)]+a345_0x6b4c5c(0xb2),constants_2[a345_0x6b4c5c(0x8d)]+a345_0x6b4c5c(0x88),constants_2[a345_0x6b4c5c(0x8d)]+a345_0x6b4c5c(0x8a),constants_2[a345_0x6b4c5c(0x8d)]+'OrganisationName__c',constants_2[a345_0x6b4c5c(0x8d)]+a345_0x6b4c5c(0x93),constants_2[a345_0x6b4c5c(0x8d)]+a345_0x6b4c5c(0xb4)];class SourceMemberHandler extends stream_1[a345_0x6b4c5c(0x99)]{constructor({apiVersion:_0x2b4048,instance:_0x5d0bb8,targetOrgId:_0x8a00da,logger:_0x1ef21b}){const _0x4b2165=a345_0x6b4c5c;super({'objectMode':!![]}),this[_0x4b2165(0xa0)]=new Map(),this['handledMembersCounter']=0x0,this[_0x4b2165(0x83)]=_0x2b4048,this['instance']=_0x5d0bb8,this[_0x4b2165(0xaa)]=_0x8a00da,this[_0x4b2165(0xa8)]=_0x1ef21b;}[a345_0x6b4c5c(0x97)](){const _0x3b1a4a=a345_0x6b4c5c;return new salesforce_1[(_0x3b1a4a(0xab))]()[_0x3b1a4a(0xb0)](...ORG_COMPONENT_SELECT_FIELDS)[_0x3b1a4a(0x81)](constants_1[_0x3b1a4a(0xa2)])['where'](SOURCE_MEMBER_ID_FIELD_NAME+_0x3b1a4a(0xac),{'sourceMemberIds':[...this[_0x3b1a4a(0xa0)][_0x3b1a4a(0xa3)]()]})['andWhere'](ORGANIZATION_NAME_FIELD+_0x3b1a4a(0xa7),{'targetOrgId':this['targetOrgId']});}async[a345_0x6b4c5c(0x98)](){const _0x43ae44=a345_0x6b4c5c,_0x324e59=new salesforce_1['CompositeRetrieveData']({'api':this[_0x43ae44(0x83)],'queryBuilder':this[_0x43ae44(0x97)](),'instance':this['instance'],'isTooling':![]}),_0x2c159e=new Map();do{const {records:_0x1144df}=await _0x324e59[_0x43ae44(0x7e)]();for(const _0x1269a7 of _0x1144df){_0x2c159e[_0x43ae44(0xa1)](_0x1269a7[SOURCE_MEMBER_ID_FIELD_NAME],_0x1269a7);}}while(!_0x324e59[_0x43ae44(0x9d)]());return _0x2c159e;}async['addToChunk'](_0x45ddb0){const _0x2e61ca=a345_0x6b4c5c;this[_0x2e61ca(0xa0)][_0x2e61ca(0xa1)](_0x45ddb0['Id'],_0x45ddb0),this['sourceMemberRecords']['size']===MAX_CHUNK_SIZE&&await this[_0x2e61ca(0xaf)]();}async['handle'](){const _0xe22f4b=a345_0x6b4c5c,_0x15c7cb=await this[_0xe22f4b(0x98)]();for(const [_0x1a9467,_0x25b880]of this[_0xe22f4b(0xa0)]){const _0x375ca5=_0x15c7cb['get'](_0x1a9467);if(_0x375ca5&&_0x25b880[REVISION_COUNTER_FIELD_NAME]===_0x375ca5[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x11794e={'sourceMemberId':_0x25b880['Id'],'componentId':(_0x375ca5===null||_0x375ca5===void 0x0?void 0x0:_0x375ca5['Id'])||null,'attachmentId':(_0x375ca5===null||_0x375ca5===void 0x0?void 0x0:_0x375ca5['Attachment_ID__c'])||null,'metadataId':_0x25b880[MEMBER_ID_FIELD_NAME],'metadataType':_0x25b880[MEMBER_TYPE_FIELD_NAME],'metadataName':_0x25b880[MEMBER_NAME],'isNameObsolete':_0x25b880[IS_NAME_OBSOLETE],'revisionCounter':_0x25b880[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x25b880[CHANGED_BY_FIELD_NAME]};this[_0xe22f4b(0x7b)]++,this[_0xe22f4b(0x87)](_0x11794e);}this[_0xe22f4b(0xa0)]=new Map();}async[a345_0x6b4c5c(0xb5)](_0x9b7abd,_0x5244b2,_0x14df53){const _0x23bae8=a345_0x6b4c5c;try{await this[_0x23bae8(0xa6)](_0x9b7abd),_0x14df53();}catch(_0x192098){_0x14df53(_0x192098);}}async[a345_0x6b4c5c(0x7d)](_0x4f3bde){const _0x228fec=a345_0x6b4c5c;try{this[_0x228fec(0xa0)][_0x228fec(0x85)]&&await this[_0x228fec(0xaf)](),this['logger'][_0x228fec(0x8f)](_0x228fec(0x90)+this['handledMembersCounter']+_0x228fec(0x96)),await this['logger'][_0x228fec(0x8b)](),_0x4f3bde();}catch(_0x401083){_0x4f3bde(_0x401083);}}}function a345_0x3a8f(_0x2551f8,_0xd98b8){const _0x3eb304=a345_0x2477();return a345_0x3a8f=function(_0x472278,_0x16e652){_0x472278=_0x472278-0x7a;let _0x247738=_0x3eb304[_0x472278];return _0x247738;},a345_0x3a8f(_0x2551f8,_0xd98b8);}exports[a345_0x6b4c5c(0x9e)]=SourceMemberHandler;function a345_0x2477(){const _0x475d9a=['set','ORG_COMPONENT_OBJECT_NAME','keys','IsNameObsolete','constructor','addToChunk','\x20=\x20:targetOrgId','logger','10KzULqe','targetOrgId','QueryBuilder','\x20IN\x20(:sourceMemberIds)','2298tpDtsT','9sPulrF','handle','select','OrganisationName__c','API_Name__c','stream','Folder__c','_transform','1799924TzbKAQ','handledMembersCounter','ChangedBy','_flush','execute','38484IhvWjr','MemberName','from','../../constants','api','925907sVhGbL','size','Revision_Counter__c','push','Name__c','apply','Source_Member_Id__c','update','225suaXdk','FLOSUM_NAMESPACE','(((.+)+)+)+$','log','Changes\x20found\x20for\x20','19033WSDwnS','__esModule','Attachment_ID__c','search','351448lAJyXl','\x20components','buildOrgComponentQuery','getComponentFromFlosum','Transform','1917520xmupua','51384058BRrwva','@flosum/salesforce','getIsDone','SourceMemberHandler','MemberIdOrName','sourceMemberRecords'];a345_0x2477=function(){return _0x475d9a;};return a345_0x2477();}