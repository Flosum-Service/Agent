function a344_0x2246(_0x447a35,_0x482733){const _0xd3cbb3=a344_0x4612();return a344_0x2246=function(_0x2fdf04,_0x3e8291){_0x2fdf04=_0x2fdf04-0x133;let _0x46121a=_0xd3cbb3[_0x2fdf04];return _0x46121a;},a344_0x2246(_0x447a35,_0x482733);}const a344_0x2ac55e=a344_0x2246;(function(_0x1ce41b,_0xc51d12){const _0x4c8556=a344_0x2246,_0x42f573=_0x1ce41b();while(!![]){try{const _0x435930=parseInt(_0x4c8556(0x16b))/0x1+-parseInt(_0x4c8556(0x13c))/0x2*(parseInt(_0x4c8556(0x141))/0x3)+-parseInt(_0x4c8556(0x158))/0x4+parseInt(_0x4c8556(0x14b))/0x5*(parseInt(_0x4c8556(0x15d))/0x6)+-parseInt(_0x4c8556(0x134))/0x7+-parseInt(_0x4c8556(0x162))/0x8*(-parseInt(_0x4c8556(0x13b))/0x9)+parseInt(_0x4c8556(0x137))/0xa;if(_0x435930===_0xc51d12)break;else _0x42f573['push'](_0x42f573['shift']());}catch(_0x159e08){_0x42f573['push'](_0x42f573['shift']());}}}(a344_0x4612,0x70089));const a344_0x3e8291=(function(){let _0x150abd=!![];return function(_0x15e787,_0x565e7c){const _0x21c78a=_0x150abd?function(){const _0x39b87f=a344_0x2246;if(_0x565e7c){const _0x46beb4=_0x565e7c[_0x39b87f(0x13a)](_0x15e787,arguments);return _0x565e7c=null,_0x46beb4;}}:function(){};return _0x150abd=![],_0x21c78a;};}()),a344_0x2fdf04=a344_0x3e8291(this,function(){const _0xd794c7=a344_0x2246;return a344_0x2fdf04[_0xd794c7(0x140)]()[_0xd794c7(0x138)](_0xd794c7(0x15a))[_0xd794c7(0x140)]()[_0xd794c7(0x135)](a344_0x2fdf04)[_0xd794c7(0x138)]('(((.+)+)+)+$');});a344_0x2fdf04();'use strict';Object[a344_0x2ac55e(0x166)](exports,'__esModule',{'value':!![]}),exports[a344_0x2ac55e(0x145)]=void 0x0;const stream_1=require(a344_0x2ac55e(0x14e)),salesforce_1=require(a344_0x2ac55e(0x155)),constants_1=require('../../constants'),constants_2=require(a344_0x2ac55e(0x156)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a344_0x2ac55e(0x13e),IS_NAME_OBSOLETE='IsNameObsolete',MEMBER_ID_FIELD_NAME=a344_0x2ac55e(0x150),MEMBER_TYPE_FIELD_NAME=a344_0x2ac55e(0x15e),MEMBER_NAME='MemberName',CHANGED_BY_FIELD_NAME='ChangedBy',SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a344_0x2ac55e(0x133)]+'Source_Member_Id__c',ORGANIZATION_NAME_FIELD=constants_2[a344_0x2ac55e(0x133)]+'OrganisationName__c',REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a344_0x2ac55e(0x133)]+a344_0x2ac55e(0x157),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a344_0x2ac55e(0x133)]+'Revision_Counter__c',constants_2['FLOSUM_NAMESPACE']+a344_0x2ac55e(0x14d),constants_2[a344_0x2ac55e(0x133)]+a344_0x2ac55e(0x167),constants_2['FLOSUM_NAMESPACE']+'Name__c',constants_2['FLOSUM_NAMESPACE']+a344_0x2ac55e(0x160),constants_2['FLOSUM_NAMESPACE']+a344_0x2ac55e(0x143),constants_2[a344_0x2ac55e(0x133)]+a344_0x2ac55e(0x13f),constants_2[a344_0x2ac55e(0x133)]+a344_0x2ac55e(0x16f)];function a344_0x4612(){const _0x102b27=['_flush','execute','defineProperty','API_Name__c','targetOrgId','handle','api','250815lOoAZm','\x20IN\x20(:sourceMemberIds)','CompositeRetrieveData','getComponentFromFlosum','Folder__c','FLOSUM_NAMESPACE','4082267Fbnshx','constructor','logger','7658340ANbodi','search','\x20components','apply','18svIaNT','6TiFMEJ','size','RevisionCounter','Attachment_ID__c','toString','775839vDLfof','QueryBuilder','OrganisationName__c','andWhere','SourceMemberHandler','addToChunk','ORG_COMPONENT_OBJECT_NAME','buildOrgComponentQuery','Changes\x20found\x20for\x20','set','100VZLkJo','instance','Component_Type__c','stream','select','MemberIdOrName','get','keys','handledMembersCounter','push','@flosum/salesforce','../../../../constants','Revision_Counter__c','763816ovvfXE','getIsDone','(((.+)+)+)+$','Transform','_transform','141666SMrKEx','MemberType','log','Source_Member_Id__c','from','2079976BWAhDs','sourceMemberRecords'];a344_0x4612=function(){return _0x102b27;};return a344_0x4612();}class SourceMemberHandler extends stream_1[a344_0x2ac55e(0x15b)]{constructor({apiVersion:_0x3b4821,instance:_0x4575fb,targetOrgId:_0x4e443f,logger:_0xfc6a3c}){const _0x3f8d2d=a344_0x2ac55e;super({'objectMode':!![]}),this[_0x3f8d2d(0x163)]=new Map(),this[_0x3f8d2d(0x153)]=0x0,this[_0x3f8d2d(0x16a)]=_0x3b4821,this[_0x3f8d2d(0x14c)]=_0x4575fb,this[_0x3f8d2d(0x168)]=_0x4e443f,this['logger']=_0xfc6a3c;}['buildOrgComponentQuery'](){const _0xa9e921=a344_0x2ac55e;return new salesforce_1[(_0xa9e921(0x142))]()[_0xa9e921(0x14f)](...ORG_COMPONENT_SELECT_FIELDS)[_0xa9e921(0x161)](constants_1[_0xa9e921(0x147)])['where'](SOURCE_MEMBER_ID_FIELD_NAME+_0xa9e921(0x16c),{'sourceMemberIds':[...this[_0xa9e921(0x163)][_0xa9e921(0x152)]()]})[_0xa9e921(0x144)](ORGANIZATION_NAME_FIELD+'\x20=\x20:targetOrgId',{'targetOrgId':this[_0xa9e921(0x168)]});}async[a344_0x2ac55e(0x16e)](){const _0x1c9398=a344_0x2ac55e,_0xd50206=new salesforce_1[(_0x1c9398(0x16d))]({'api':this[_0x1c9398(0x16a)],'queryBuilder':this[_0x1c9398(0x148)](),'instance':this[_0x1c9398(0x14c)],'isTooling':![]}),_0x479073=new Map();do{const {records:_0x56116c}=await _0xd50206[_0x1c9398(0x165)]();for(const _0x168299 of _0x56116c){_0x479073[_0x1c9398(0x14a)](_0x168299[SOURCE_MEMBER_ID_FIELD_NAME],_0x168299);}}while(!_0xd50206[_0x1c9398(0x159)]());return _0x479073;}async[a344_0x2ac55e(0x146)](_0x2693e8){const _0x5d6426=a344_0x2ac55e;this[_0x5d6426(0x163)]['set'](_0x2693e8['Id'],_0x2693e8),this[_0x5d6426(0x163)]['size']===MAX_CHUNK_SIZE&&await this[_0x5d6426(0x169)]();}async[a344_0x2ac55e(0x169)](){const _0x1e0dc1=a344_0x2ac55e,_0x59d948=await this[_0x1e0dc1(0x16e)]();for(const [_0x1e6cdf,_0x42a899]of this[_0x1e0dc1(0x163)]){const _0x465809=_0x59d948[_0x1e0dc1(0x151)](_0x1e6cdf);if(_0x465809&&_0x42a899[REVISION_COUNTER_FIELD_NAME]===_0x465809[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x592a6d={'sourceMemberId':_0x42a899['Id'],'componentId':(_0x465809===null||_0x465809===void 0x0?void 0x0:_0x465809['Id'])||null,'attachmentId':(_0x465809===null||_0x465809===void 0x0?void 0x0:_0x465809[_0x1e0dc1(0x13f)])||null,'metadataId':_0x42a899[MEMBER_ID_FIELD_NAME],'metadataType':_0x42a899[MEMBER_TYPE_FIELD_NAME],'metadataName':_0x42a899[MEMBER_NAME],'isNameObsolete':_0x42a899[IS_NAME_OBSOLETE],'revisionCounter':_0x42a899[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x42a899[CHANGED_BY_FIELD_NAME]};this['handledMembersCounter']++,this[_0x1e0dc1(0x154)](_0x592a6d);}this[_0x1e0dc1(0x163)]=new Map();}async[a344_0x2ac55e(0x15c)](_0x6fa778,_0x16e19e,_0x93840e){const _0x5c0b3e=a344_0x2ac55e;try{await this[_0x5c0b3e(0x146)](_0x6fa778),_0x93840e();}catch(_0xf73df7){_0x93840e(_0xf73df7);}}async[a344_0x2ac55e(0x164)](_0xad5f35){const _0x4354c5=a344_0x2ac55e;try{this[_0x4354c5(0x163)][_0x4354c5(0x13d)]&&await this[_0x4354c5(0x169)](),this[_0x4354c5(0x136)][_0x4354c5(0x15f)](_0x4354c5(0x149)+this[_0x4354c5(0x153)]+_0x4354c5(0x139)),await this[_0x4354c5(0x136)]['update'](),_0xad5f35();}catch(_0x436abf){_0xad5f35(_0x436abf);}}}exports[a344_0x2ac55e(0x145)]=SourceMemberHandler;