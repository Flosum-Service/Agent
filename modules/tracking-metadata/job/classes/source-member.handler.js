const a332_0x88aa8b=a332_0x21c7;(function(_0x59bf48,_0x20aed1){const _0x35d133=a332_0x21c7,_0xfe4b11=_0x59bf48();while(!![]){try{const _0x5be5c8=parseInt(_0x35d133(0x76))/0x1+-parseInt(_0x35d133(0x68))/0x2+parseInt(_0x35d133(0x9d))/0x3*(parseInt(_0x35d133(0x7b))/0x4)+parseInt(_0x35d133(0x7d))/0x5*(parseInt(_0x35d133(0x7a))/0x6)+parseInt(_0x35d133(0x9c))/0x7+-parseInt(_0x35d133(0x98))/0x8*(-parseInt(_0x35d133(0xa2))/0x9)+-parseInt(_0x35d133(0x69))/0xa*(parseInt(_0x35d133(0x78))/0xb);if(_0x5be5c8===_0x20aed1)break;else _0xfe4b11['push'](_0xfe4b11['shift']());}catch(_0x5c88a4){_0xfe4b11['push'](_0xfe4b11['shift']());}}}(a332_0x5f3e,0x5c8e5));const a332_0x30b134=(function(){let _0x134291=!![];return function(_0x3c3a02,_0x15cdf6){const _0x1de5ad=_0x134291?function(){const _0x3e970d=a332_0x21c7;if(_0x15cdf6){const _0x337aed=_0x15cdf6[_0x3e970d(0x8c)](_0x3c3a02,arguments);return _0x15cdf6=null,_0x337aed;}}:function(){};return _0x134291=![],_0x1de5ad;};}()),a332_0x37aaea=a332_0x30b134(this,function(){const _0x547bad=a332_0x21c7;return a332_0x37aaea[_0x547bad(0x85)]()[_0x547bad(0x83)](_0x547bad(0x74))[_0x547bad(0x85)]()[_0x547bad(0x81)](a332_0x37aaea)['search'](_0x547bad(0x74));});a332_0x37aaea();function a332_0x21c7(_0x52ea00,_0x37bbd1){const _0x5946bb=a332_0x5f3e();return a332_0x21c7=function(_0x37aaea,_0x30b134){_0x37aaea=_0x37aaea-0x68;let _0x5f3e90=_0x5946bb[_0x37aaea];return _0x5f3e90;},a332_0x21c7(_0x52ea00,_0x37bbd1);}'use strict';Object[a332_0x88aa8b(0x6a)](exports,'__esModule',{'value':!![]}),exports[a332_0x88aa8b(0x80)]=void 0x0;function a332_0x5f3e(){const _0x57d516=['Component_Type__c','11APtjVJ','andWhere','198AFSxNf','148VGOqwv','targetOrgId','95005YURthM','FLOSUM_NAMESPACE','_flush','SourceMemberHandler','constructor','ORG_COMPONENT_OBJECT_NAME','search','\x20IN\x20(:sourceMemberIds)','toString','execute','\x20=\x20:targetOrgId','getComponentFromFlosum','\x20components','@flosum/salesforce','MemberIdOrName','apply','log','OrganisationName__c','where','Attachment_ID__c','keys','Revision_Counter__c','Changes\x20found\x20for\x20','buildOrgComponentQuery','Source_Member_Id__c','ChangedBy','instance','400tdTeBP','_transform','addToChunk','api','4249077PrDxAp','20943iMcXjI','handle','Transform','update','Name__c','114174jJIGUB','RevisionCounter','CompositeRetrieveData','set','480174PHmrHC','17178990ctUxCV','defineProperty','logger','stream','../../constants','handledMembersCounter','getIsDone','sourceMemberRecords','push','MemberType','get','(((.+)+)+)+$','../../../../constants','210454yIphoY'];a332_0x5f3e=function(){return _0x57d516;};return a332_0x5f3e();}const stream_1=require(a332_0x88aa8b(0x6c)),salesforce_1=require(a332_0x88aa8b(0x8a)),constants_1=require(a332_0x88aa8b(0x6d)),constants_2=require(a332_0x88aa8b(0x75)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME=a332_0x88aa8b(0xa3),IS_NAME_OBSOLETE='IsNameObsolete',MEMBER_ID_FIELD_NAME=a332_0x88aa8b(0x8b),MEMBER_TYPE_FIELD_NAME=a332_0x88aa8b(0x72),CHANGED_BY_FIELD_NAME=a332_0x88aa8b(0x96),SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a332_0x88aa8b(0x7e)]+a332_0x88aa8b(0x95),ORGANIZATION_NAME_FIELD=constants_2[a332_0x88aa8b(0x7e)]+a332_0x88aa8b(0x8e),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a332_0x88aa8b(0x7e)]+a332_0x88aa8b(0x92),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a332_0x88aa8b(0x7e)]+a332_0x88aa8b(0x92),constants_2['FLOSUM_NAMESPACE']+a332_0x88aa8b(0x77),constants_2[a332_0x88aa8b(0x7e)]+'API_Name__c',constants_2['FLOSUM_NAMESPACE']+a332_0x88aa8b(0xa1),constants_2[a332_0x88aa8b(0x7e)]+a332_0x88aa8b(0x95),constants_2[a332_0x88aa8b(0x7e)]+a332_0x88aa8b(0x8e),constants_2[a332_0x88aa8b(0x7e)]+a332_0x88aa8b(0x90),constants_2['FLOSUM_NAMESPACE']+'Folder__c'];class SourceMemberHandler extends stream_1[a332_0x88aa8b(0x9f)]{constructor({apiVersion:_0x5cee35,instance:_0x26e059,targetOrgId:_0x53a9db,logger:_0x5d433b}){const _0x1c645f=a332_0x88aa8b;super({'objectMode':!![]}),this[_0x1c645f(0x70)]=new Map(),this[_0x1c645f(0x6e)]=0x0,this[_0x1c645f(0x9b)]=_0x5cee35,this['instance']=_0x26e059,this[_0x1c645f(0x7c)]=_0x53a9db,this[_0x1c645f(0x6b)]=_0x5d433b;}['buildOrgComponentQuery'](){const _0x838209=a332_0x88aa8b;return new salesforce_1['QueryBuilder']()['select'](...ORG_COMPONENT_SELECT_FIELDS)['from'](constants_1[_0x838209(0x82)])[_0x838209(0x8f)](SOURCE_MEMBER_ID_FIELD_NAME+_0x838209(0x84),{'sourceMemberIds':[...this[_0x838209(0x70)][_0x838209(0x91)]()]})[_0x838209(0x79)](ORGANIZATION_NAME_FIELD+_0x838209(0x87),{'targetOrgId':this[_0x838209(0x7c)]});}async[a332_0x88aa8b(0x88)](){const _0xa6fd5f=a332_0x88aa8b,_0x52addf=new salesforce_1[(_0xa6fd5f(0xa4))]({'api':this[_0xa6fd5f(0x9b)],'queryBuilder':this[_0xa6fd5f(0x94)](),'instance':this[_0xa6fd5f(0x97)],'isTooling':![]}),_0x5a92b2=new Map();do{const {records:_0x4431d5}=await _0x52addf[_0xa6fd5f(0x86)]();for(const _0x519172 of _0x4431d5){_0x5a92b2[_0xa6fd5f(0xa5)](_0x519172[SOURCE_MEMBER_ID_FIELD_NAME],_0x519172);}}while(!_0x52addf[_0xa6fd5f(0x6f)]());return _0x5a92b2;}async['addToChunk'](_0x10c4a9){const _0x1f10fe=a332_0x88aa8b;this[_0x1f10fe(0x70)]['set'](_0x10c4a9['Id'],_0x10c4a9),this['sourceMemberRecords']['size']===MAX_CHUNK_SIZE&&await this[_0x1f10fe(0x9e)]();}async[a332_0x88aa8b(0x9e)](){const _0x5c7a37=a332_0x88aa8b,_0x591542=await this[_0x5c7a37(0x88)]();for(const [_0x22ad61,_0x4bc170]of this[_0x5c7a37(0x70)]){const _0x3b2b8d=_0x591542[_0x5c7a37(0x73)](_0x22ad61);if(_0x3b2b8d&&_0x4bc170[REVISION_COUNTER_FIELD_NAME]===_0x3b2b8d[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x152c95={'sourceMemberId':_0x4bc170['Id'],'componentId':(_0x3b2b8d===null||_0x3b2b8d===void 0x0?void 0x0:_0x3b2b8d['Id'])||null,'attachmentId':(_0x3b2b8d===null||_0x3b2b8d===void 0x0?void 0x0:_0x3b2b8d[_0x5c7a37(0x90)])||null,'metadataId':_0x4bc170[MEMBER_ID_FIELD_NAME],'metadataType':_0x4bc170[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x4bc170[IS_NAME_OBSOLETE],'revisionCounter':_0x4bc170[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x4bc170[CHANGED_BY_FIELD_NAME]};this[_0x5c7a37(0x6e)]++,this[_0x5c7a37(0x71)](_0x152c95);}this['sourceMemberRecords']=new Map();}async[a332_0x88aa8b(0x99)](_0x499af9,_0x402c7d,_0x158bf1){const _0x5dd776=a332_0x88aa8b;try{await this[_0x5dd776(0x9a)](_0x499af9),_0x158bf1();}catch(_0x54caa2){_0x158bf1(_0x54caa2);}}async[a332_0x88aa8b(0x7f)](_0x44759a){const _0x261caa=a332_0x88aa8b;try{this['sourceMemberRecords']['size']&&await this[_0x261caa(0x9e)](),this[_0x261caa(0x6b)][_0x261caa(0x8d)](_0x261caa(0x93)+this[_0x261caa(0x6e)]+_0x261caa(0x89)),await this[_0x261caa(0x6b)][_0x261caa(0xa0)](),_0x44759a();}catch(_0x98da01){_0x44759a(_0x98da01);}}}exports[a332_0x88aa8b(0x80)]=SourceMemberHandler;