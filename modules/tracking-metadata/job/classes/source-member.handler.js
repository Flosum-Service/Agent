function a300_0x5a67(_0x1224b7,_0x34af7e){const _0x3e7e44=a300_0x5563();return a300_0x5a67=function(_0x319c78,_0x4b83ca){_0x319c78=_0x319c78-0x17e;let _0x556306=_0x3e7e44[_0x319c78];return _0x556306;},a300_0x5a67(_0x1224b7,_0x34af7e);}const a300_0x8a0076=a300_0x5a67;(function(_0x5f4c3f,_0xaa5e1){const _0x3a46ee=a300_0x5a67,_0x4cfe8f=_0x5f4c3f();while(!![]){try{const _0x42a385=-parseInt(_0x3a46ee(0x1ae))/0x1+parseInt(_0x3a46ee(0x183))/0x2+-parseInt(_0x3a46ee(0x1a0))/0x3+parseInt(_0x3a46ee(0x1a9))/0x4+parseInt(_0x3a46ee(0x196))/0x5+parseInt(_0x3a46ee(0x187))/0x6+parseInt(_0x3a46ee(0x1b1))/0x7*(parseInt(_0x3a46ee(0x1b3))/0x8);if(_0x42a385===_0xaa5e1)break;else _0x4cfe8f['push'](_0x4cfe8f['shift']());}catch(_0x55db0c){_0x4cfe8f['push'](_0x4cfe8f['shift']());}}}(a300_0x5563,0xdee93));const a300_0x4b83ca=(function(){let _0x12f197=!![];return function(_0x255d0f,_0x1c49e9){const _0x5a3a0c=_0x12f197?function(){if(_0x1c49e9){const _0x3bc002=_0x1c49e9['apply'](_0x255d0f,arguments);return _0x1c49e9=null,_0x3bc002;}}:function(){};return _0x12f197=![],_0x5a3a0c;};}()),a300_0x319c78=a300_0x4b83ca(this,function(){const _0xdcd587=a300_0x5a67;return a300_0x319c78[_0xdcd587(0x197)]()[_0xdcd587(0x1a2)](_0xdcd587(0x19a))[_0xdcd587(0x197)]()['constructor'](a300_0x319c78)['search']('(((.+)+)+)+$');});function a300_0x5563(){const _0x383494=['OrganisationName__c','search','Component_Type__c','ORG_COMPONENT_OBJECT_NAME','_transform','from','andWhere','\x20components','411116leOOPF','defineProperty','FLOSUM_NAMESPACE','keys','Changes\x20found\x20for\x20','1491309hdiYbw','SourceMemberHandler','size','1428434unwCXj','@flosum/salesforce','8wGyUPw','__esModule','MemberIdOrName','getComponentFromFlosum','get','../../../../constants','1273124IzIbHE','instance','MemberType','log','8351910KfMqeD','handle','where','buildOrgComponentQuery','getIsDone','addToChunk','select','Revision_Counter__c','QueryBuilder','execute','Attachment_ID__c','\x20IN\x20(:sourceMemberIds)','set','targetOrgId','Name__c','8766345rYouKu','toString','sourceMemberRecords','logger','(((.+)+)+)+$','stream','_flush','handledMembersCounter','Source_Member_Id__c','api','5052915MUWfcK'];a300_0x5563=function(){return _0x383494;};return a300_0x5563();}a300_0x319c78();'use strict';Object[a300_0x8a0076(0x1aa)](exports,a300_0x8a0076(0x17e),{'value':!![]}),exports[a300_0x8a0076(0x1af)]=void 0x0;const stream_1=require(a300_0x8a0076(0x19b)),salesforce_1=require(a300_0x8a0076(0x1b2)),constants_1=require('../../constants'),constants_2=require(a300_0x8a0076(0x182)),MAX_CHUNK_SIZE=0xfa0,REVISION_COUNTER_FIELD_NAME='RevisionCounter',IS_NAME_OBSOLETE='IsNameObsolete',MEMBER_ID_FIELD_NAME=a300_0x8a0076(0x17f),MEMBER_TYPE_FIELD_NAME=a300_0x8a0076(0x185),CHANGED_BY_FIELD_NAME='ChangedBy',SOURCE_MEMBER_ID_FIELD_NAME=constants_2[a300_0x8a0076(0x1ab)]+a300_0x8a0076(0x19e),ORGANIZATION_NAME_FIELD=constants_2[a300_0x8a0076(0x1ab)]+a300_0x8a0076(0x1a1),REVISION_COUNTER_CUSTOM_FIELD_NAME=constants_2[a300_0x8a0076(0x1ab)]+a300_0x8a0076(0x18e),ORG_COMPONENT_SELECT_FIELDS=['Id',constants_2[a300_0x8a0076(0x1ab)]+a300_0x8a0076(0x18e),constants_2[a300_0x8a0076(0x1ab)]+a300_0x8a0076(0x1a3),constants_2['FLOSUM_NAMESPACE']+'API_Name__c',constants_2[a300_0x8a0076(0x1ab)]+a300_0x8a0076(0x195),constants_2[a300_0x8a0076(0x1ab)]+a300_0x8a0076(0x19e),constants_2[a300_0x8a0076(0x1ab)]+'OrganisationName__c',constants_2[a300_0x8a0076(0x1ab)]+a300_0x8a0076(0x191),constants_2['FLOSUM_NAMESPACE']+'Folder__c'];class SourceMemberHandler extends stream_1['Transform']{constructor({apiVersion:_0x289ecf,instance:_0x1492a1,targetOrgId:_0x43e9ca,logger:_0x38cad3}){const _0x24f535=a300_0x8a0076;super({'objectMode':!![]}),this[_0x24f535(0x198)]=new Map(),this[_0x24f535(0x19d)]=0x0,this[_0x24f535(0x19f)]=_0x289ecf,this[_0x24f535(0x184)]=_0x1492a1,this[_0x24f535(0x194)]=_0x43e9ca,this[_0x24f535(0x199)]=_0x38cad3;}[a300_0x8a0076(0x18a)](){const _0xf3ae69=a300_0x8a0076;return new salesforce_1[(_0xf3ae69(0x18f))]()[_0xf3ae69(0x18d)](...ORG_COMPONENT_SELECT_FIELDS)[_0xf3ae69(0x1a6)](constants_1[_0xf3ae69(0x1a4)])[_0xf3ae69(0x189)](SOURCE_MEMBER_ID_FIELD_NAME+_0xf3ae69(0x192),{'sourceMemberIds':[...this[_0xf3ae69(0x198)][_0xf3ae69(0x1ac)]()]})[_0xf3ae69(0x1a7)](ORGANIZATION_NAME_FIELD+'\x20=\x20:targetOrgId',{'targetOrgId':this['targetOrgId']});}async[a300_0x8a0076(0x180)](){const _0x26a688=a300_0x8a0076,_0x1ac85=new salesforce_1['CompositeRetrieveData']({'api':this['api'],'queryBuilder':this[_0x26a688(0x18a)](),'instance':this[_0x26a688(0x184)],'isTooling':![]}),_0x3a01c5=new Map();do{const {records:_0x2ed106}=await _0x1ac85[_0x26a688(0x190)]();for(const _0x6c933b of _0x2ed106){_0x3a01c5[_0x26a688(0x193)](_0x6c933b[SOURCE_MEMBER_ID_FIELD_NAME],_0x6c933b);}}while(!_0x1ac85[_0x26a688(0x18b)]());return _0x3a01c5;}async['addToChunk'](_0x471dbe){const _0x17d457=a300_0x8a0076;this[_0x17d457(0x198)][_0x17d457(0x193)](_0x471dbe['Id'],_0x471dbe),this[_0x17d457(0x198)][_0x17d457(0x1b0)]===MAX_CHUNK_SIZE&&await this[_0x17d457(0x188)]();}async[a300_0x8a0076(0x188)](){const _0x57a104=a300_0x8a0076,_0x229b88=await this[_0x57a104(0x180)]();for(const [_0x21f417,_0x1dd291]of this[_0x57a104(0x198)]){const _0x4d5d08=_0x229b88[_0x57a104(0x181)](_0x21f417);if(_0x4d5d08&&_0x1dd291[REVISION_COUNTER_FIELD_NAME]===_0x4d5d08[REVISION_COUNTER_CUSTOM_FIELD_NAME])continue;const _0x5d3eab={'sourceMemberId':_0x1dd291['Id'],'componentId':(_0x4d5d08===null||_0x4d5d08===void 0x0?void 0x0:_0x4d5d08['Id'])||null,'attachmentId':(_0x4d5d08===null||_0x4d5d08===void 0x0?void 0x0:_0x4d5d08['Attachment_ID__c'])||null,'metadataId':_0x1dd291[MEMBER_ID_FIELD_NAME],'metadataType':_0x1dd291[MEMBER_TYPE_FIELD_NAME],'isNameObsolete':_0x1dd291[IS_NAME_OBSOLETE],'revisionCounter':_0x1dd291[REVISION_COUNTER_FIELD_NAME],'changedBy':_0x1dd291[CHANGED_BY_FIELD_NAME]};this[_0x57a104(0x19d)]++,this['push'](_0x5d3eab);}this[_0x57a104(0x198)]=new Map();}async[a300_0x8a0076(0x1a5)](_0x9a96d8,_0x40ce6f,_0x2c1180){const _0x132641=a300_0x8a0076;try{await this[_0x132641(0x18c)](_0x9a96d8),_0x2c1180();}catch(_0x938fa){_0x2c1180(_0x938fa);}}async[a300_0x8a0076(0x19c)](_0x2063d3){const _0x36e301=a300_0x8a0076;try{this[_0x36e301(0x198)][_0x36e301(0x1b0)]&&await this[_0x36e301(0x188)](),this[_0x36e301(0x199)][_0x36e301(0x186)](_0x36e301(0x1ad)+this[_0x36e301(0x19d)]+_0x36e301(0x1a8)),await this[_0x36e301(0x199)]['update'](),_0x2063d3();}catch(_0x4274d2){_0x2063d3(_0x4274d2);}}}exports[a300_0x8a0076(0x1af)]=SourceMemberHandler;