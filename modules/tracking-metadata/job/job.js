const a304_0x5d55aa=a304_0x59e9;(function(_0x8bf069,_0x5064ee){const _0x38e9c2=a304_0x59e9,_0x15224c=_0x8bf069();while(!![]){try{const _0x2d0fcf=parseInt(_0x38e9c2(0x161))/0x1*(-parseInt(_0x38e9c2(0x11a))/0x2)+-parseInt(_0x38e9c2(0x136))/0x3+parseInt(_0x38e9c2(0x10e))/0x4+-parseInt(_0x38e9c2(0x158))/0x5+parseInt(_0x38e9c2(0x135))/0x6*(-parseInt(_0x38e9c2(0x123))/0x7)+-parseInt(_0x38e9c2(0x15f))/0x8+parseInt(_0x38e9c2(0x165))/0x9;if(_0x2d0fcf===_0x5064ee)break;else _0x15224c['push'](_0x15224c['shift']());}catch(_0x3d712e){_0x15224c['push'](_0x15224c['shift']());}}}(a304_0x84ca,0x8b98a));const a304_0x4da7a6=(function(){let _0x341dde=!![];return function(_0x190c84,_0x48a366){const _0x54a44a=_0x341dde?function(){const _0x4c15c2=a304_0x59e9;if(_0x48a366){const _0x469d95=_0x48a366[_0x4c15c2(0x149)](_0x190c84,arguments);return _0x48a366=null,_0x469d95;}}:function(){};return _0x341dde=![],_0x54a44a;};}()),a304_0x2a2d29=a304_0x4da7a6(this,function(){const _0x152494=a304_0x59e9;return a304_0x2a2d29['toString']()[_0x152494(0x15d)](_0x152494(0x139))[_0x152494(0x13c)]()['constructor'](a304_0x2a2d29)[_0x152494(0x15d)](_0x152494(0x139));});a304_0x2a2d29();function a304_0x59e9(_0x8fda84,_0x5de0b2){const _0x59bd93=a304_0x84ca();return a304_0x59e9=function(_0x2a2d29,_0x4da7a6){_0x2a2d29=_0x2a2d29-0x10e;let _0x84ca6d=_0x59bd93[_0x2a2d29];return _0x84ca6d;},a304_0x59e9(_0x8fda84,_0x5de0b2);}'use strict';var __importDefault=this&&this[a304_0x5d55aa(0x118)]||function(_0x14cdcd){const _0xbb06c9=a304_0x5d55aa;return _0x14cdcd&&_0x14cdcd[_0xbb06c9(0x168)]?_0x14cdcd:{'default':_0x14cdcd};};Object[a304_0x5d55aa(0x152)](exports,a304_0x5d55aa(0x168),{'value':!![]}),exports[a304_0x5d55aa(0x14c)]=void 0x0;const minimist_1=__importDefault(require(a304_0x5d55aa(0x15a))),core_1=require(a304_0x5d55aa(0x11d)),salesforce_1=require(a304_0x5d55aa(0x12d)),auth_manager_1=require('../../shared/managers/auth.manager'),logger_1=require(a304_0x5d55aa(0x14b)),promises_1=require(a304_0x5d55aa(0x127)),promises_2=require(a304_0x5d55aa(0x155)),path_1=__importDefault(require(a304_0x5d55aa(0x167))),metadata_retriever_1=require('./classes/metadata.retriever'),components_deployer_1=require(a304_0x5d55aa(0x146)),source_member_retriever_1=require(a304_0x5d55aa(0x13d)),source_member_handler_1=require('./classes/source-member.handler'),metadata_logger_1=require('./classes/metadata-logger'),job_1=require(a304_0x5d55aa(0x137)),constants_1=require(a304_0x5d55aa(0x169)),constants_2=require(a304_0x5d55aa(0x130)),{jobId,jobStorePath}=(0x0,minimist_1[a304_0x5d55aa(0x141)])(process[a304_0x5d55aa(0x115)][a304_0x5d55aa(0x119)](0x2)),systemLogger=new core_1[(a304_0x5d55aa(0x121))](jobId);function a304_0x84ca(){const _0x2bbad5=['metadataLogId','flosumInstance','default','FLOSUM_NAMESPACE','IN_PROGRESS','timeZone','Tracking_Setting__c','./classes/components.deployer','trackingSettingId','update','apply','createTrackingSettingRecord','./classes/logger/logger','Job','startDate','MANIFEST_FILENAME','Tracking\x20setting\x20updated','utf-8','initLogger','defineProperty','AuthManager','targetInstance','fs/promises','metadataLogger','create','5304830TDneoE','log','minimist','catch','MetadataLogger','search','then','811848MDMwIa','RestSimpleDeployData','38353HJUmbD','flosumOrgCredentials','metadataTypes','apiVersion','28815822zCgLrH','targetOrgCredentials','path','__esModule','../../../constants','3088636IrDZku','initManifest','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','Job\x20Error:\x20','AxiosInstanceUtils','updateTrackingSetting','SourceMemberHandler','argv','getComponentsDeployer','jobStorePath','__importDefault','slice','32WjQqAY','getSourceMemberRetriever','Last_Start_Retrieval__c','../../../core','error','getSourceMemberHandler','initMetadataLogger','Logger','jobId','14RmQoen','logger','execute','exit','stream/promises','COMPLETED','ComponentsDeployer','getMetadataRetriever','lastRetrieveDate','SourceMemberRetriever','@flosum/salesforce','Tracking\x20components\x20job\x20has\x20been\x20failed','Tracking\x20components\x20job\x20has\x20been\x20completed','../constants','pipeline','getTime','targetOrgId','initInstances','1547022GLeRNJ','3331086JThjhy','../../../constants/job','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','(((.+)+)+)+$','LogStatus','status','toString','./classes/source-member.retriever','success'];a304_0x84ca=function(){return _0x2bbad5;};return a304_0x84ca();}class Job{constructor(){const _0x289982=a304_0x5d55aa;this[_0x289982(0x117)]=jobStorePath,this[_0x289982(0x122)]=jobId;}async['initManifest'](){const _0x3036cf=a304_0x5d55aa,_0x468d78=path_1[_0x3036cf(0x141)]['join'](this['jobStorePath'],job_1[_0x3036cf(0x14e)]),_0x4cad67=await(0x0,promises_2['readFile'])(_0x468d78,{'encoding':_0x3036cf(0x150)})[_0x3036cf(0x15e)](JSON['parse'])[_0x3036cf(0x15e)](({details:_0x1f3be3})=>_0x1f3be3);await(0x0,promises_2['rm'])(_0x468d78,{'recursive':!![],'force':!![]}),this[_0x3036cf(0x164)]=_0x4cad67[_0x3036cf(0x164)],this[_0x3036cf(0x162)]=_0x4cad67[_0x3036cf(0x162)],this['targetOrgCredentials']=_0x4cad67[_0x3036cf(0x166)],this['targetOrgId']=_0x4cad67[_0x3036cf(0x133)],this['trackingSettingId']=_0x4cad67['trackingSettingId'],this[_0x3036cf(0x12b)]=_0x4cad67[_0x3036cf(0x12b)],this[_0x3036cf(0x163)]=_0x4cad67[_0x3036cf(0x163)],this[_0x3036cf(0x144)]=_0x4cad67[_0x3036cf(0x144)];}async['initInstances'](){const _0x39052d=a304_0x5d55aa;this[_0x39052d(0x140)]=await salesforce_1[_0x39052d(0x112)][_0x39052d(0x157)](new auth_manager_1[(_0x39052d(0x153))](this['flosumOrgCredentials']),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x39052d(0x154)]=await salesforce_1[_0x39052d(0x112)][_0x39052d(0x157)](new auth_manager_1[(_0x39052d(0x153))](this[_0x39052d(0x166)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a304_0x5d55aa(0x120)](){const _0x24ec2d=a304_0x5d55aa;this[_0x24ec2d(0x156)]=new metadata_logger_1[(_0x24ec2d(0x15c))]({'apiVersion':this[_0x24ec2d(0x164)],'instance':this['flosumInstance'],'targetOrgId':this[_0x24ec2d(0x133)],'trackingSettingId':this['trackingSettingId'],'startDate':this['startDate']}),this[_0x24ec2d(0x13f)]=await this[_0x24ec2d(0x156)]['init']();}['initLogger'](){const _0x33d268=a304_0x5d55aa;this[_0x33d268(0x124)]=new logger_1[(_0x33d268(0x121))]({'systemLogger':systemLogger,'apiVersion':this[_0x33d268(0x164)],'instance':this['flosumInstance'],'metadataLogId':this[_0x33d268(0x13f)],'timeZone':this[_0x33d268(0x144)]});}[a304_0x5d55aa(0x11b)](){const _0x2c7647=a304_0x5d55aa;return new source_member_retriever_1[(_0x2c7647(0x12c))]({'apiVersion':this[_0x2c7647(0x164)],'instance':this['targetInstance'],'logger':this['logger'],'lastRetrieveDate':this['lastRetrieveDate'],'currentRetrieveDate':this['startDate'],'metadataTypes':this['metadataTypes']});}[a304_0x5d55aa(0x11f)](){const _0x534f47=a304_0x5d55aa;return new source_member_handler_1[(_0x534f47(0x114))]({'instance':this['flosumInstance'],'apiVersion':this['apiVersion'],'logger':this[_0x534f47(0x124)],'targetOrgId':this[_0x534f47(0x133)]});}[a304_0x5d55aa(0x12a)](){const _0x1d4386=a304_0x5d55aa;return new metadata_retriever_1['MetadataRetriever']({'instance':this[_0x1d4386(0x154)],'apiVersion':this[_0x1d4386(0x164)],'logger':this[_0x1d4386(0x124)],'metadataTypes':this[_0x1d4386(0x163)]});}[a304_0x5d55aa(0x116)](){const _0x2bc614=a304_0x5d55aa;return new components_deployer_1[(_0x2bc614(0x129))]({'instance':this[_0x2bc614(0x140)],'logger':this[_0x2bc614(0x124)],'apiVersion':this[_0x2bc614(0x164)],'targetOrgId':this[_0x2bc614(0x133)],'trackingSettingId':this[_0x2bc614(0x147)]});}[a304_0x5d55aa(0x14a)](){const _0x28d7d8=a304_0x5d55aa;return{'attributes':{'type':constants_1[_0x28d7d8(0x142)]+_0x28d7d8(0x145)},'Id':this[_0x28d7d8(0x147)],[constants_1[_0x28d7d8(0x142)]+'Is_Processed__c']:![],[constants_1['FLOSUM_NAMESPACE']+_0x28d7d8(0x11c)]:this['startDate']};}async[a304_0x5d55aa(0x113)](){const _0x241252=a304_0x5d55aa,_0x6b9fdf=this[_0x241252(0x14a)](),_0x408263=new salesforce_1[(_0x241252(0x160))]({'instance':this[_0x241252(0x140)],'objectName':constants_1[_0x241252(0x142)]+_0x241252(0x145),'api':this[_0x241252(0x164)],'allOrNone':![],'externalIdField':'Id'}),_0x9fb700=await _0x408263['execute']({'records':[_0x6b9fdf]}),_0x4d6bc4=_0x9fb700['at'](0x0);(_0x4d6bc4===null||_0x4d6bc4===void 0x0?void 0x0:_0x4d6bc4[_0x241252(0x13e)])?this['logger'][_0x241252(0x159)](_0x241252(0x14f)):this['logger'][_0x241252(0x159)](_0x241252(0x110)+(_0x4d6bc4===null||_0x4d6bc4===void 0x0?void 0x0:_0x4d6bc4[_0x241252(0x11e)]));}async[a304_0x5d55aa(0x125)](){const _0x4117b0=a304_0x5d55aa;await this[_0x4117b0(0x10f)](),this[_0x4117b0(0x14d)]=new Date()[_0x4117b0(0x132)]();try{await this[_0x4117b0(0x134)](),await this[_0x4117b0(0x120)](),this[_0x4117b0(0x151)](),this['logger'][_0x4117b0(0x159)](_0x4117b0(0x138)+this[_0x4117b0(0x122)]),this[_0x4117b0(0x156)]['status']=constants_2['LogStatus'][_0x4117b0(0x143)],await this[_0x4117b0(0x156)][_0x4117b0(0x148)](),await this[_0x4117b0(0x124)]['update']();const _0x595841=this[_0x4117b0(0x11b)](),_0x2e916e=this[_0x4117b0(0x11f)](),_0x13d62b=this['getMetadataRetriever'](),_0x15c2d4=this[_0x4117b0(0x116)]();await(0x0,promises_1[_0x4117b0(0x131)])(_0x595841,_0x2e916e,_0x13d62b,_0x15c2d4),this[_0x4117b0(0x124)][_0x4117b0(0x159)](_0x4117b0(0x12f)),this[_0x4117b0(0x156)][_0x4117b0(0x13b)]=constants_2[_0x4117b0(0x13a)][_0x4117b0(0x128)];}catch(_0x429d07){this[_0x4117b0(0x124)][_0x4117b0(0x11e)](_0x4117b0(0x12e)),this[_0x4117b0(0x124)][_0x4117b0(0x11e)](_0x429d07['message']),this[_0x4117b0(0x156)]['status']=constants_2[_0x4117b0(0x13a)]['EXCEPTION'];}finally{await this[_0x4117b0(0x113)](),await this[_0x4117b0(0x124)][_0x4117b0(0x148)](),await this['metadataLogger'][_0x4117b0(0x148)]();}}}exports[a304_0x5d55aa(0x14c)]=Job,new Job()[a304_0x5d55aa(0x125)]()['then'](()=>process[a304_0x5d55aa(0x126)](0x0))[a304_0x5d55aa(0x15b)](_0x501436=>{const _0x5c60c9=a304_0x5d55aa;systemLogger['error'](_0x5c60c9(0x111)+_0x501436['message']),process['exit'](0x1);});