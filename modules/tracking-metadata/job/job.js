const a347_0x1913f8=a347_0x199f;(function(_0x24d5b4,_0x3d7e1b){const _0x56738a=a347_0x199f,_0x4f7d2a=_0x24d5b4();while(!![]){try{const _0x3f5ee6=-parseInt(_0x56738a(0x109))/0x1*(parseInt(_0x56738a(0x124))/0x2)+-parseInt(_0x56738a(0x118))/0x3*(parseInt(_0x56738a(0x13b))/0x4)+-parseInt(_0x56738a(0x112))/0x5*(-parseInt(_0x56738a(0x114))/0x6)+-parseInt(_0x56738a(0x10d))/0x7*(-parseInt(_0x56738a(0x142))/0x8)+parseInt(_0x56738a(0xff))/0x9*(parseInt(_0x56738a(0x122))/0xa)+parseInt(_0x56738a(0xee))/0xb*(parseInt(_0x56738a(0x117))/0xc)+-parseInt(_0x56738a(0x134))/0xd;if(_0x3f5ee6===_0x3d7e1b)break;else _0x4f7d2a['push'](_0x4f7d2a['shift']());}catch(_0x2deff0){_0x4f7d2a['push'](_0x4f7d2a['shift']());}}}(a347_0x3e4c,0x88ba0));const a347_0x3ccdbd=(function(){let _0x421a53=!![];return function(_0x19482a,_0x308394){const _0x28241a=_0x421a53?function(){if(_0x308394){const _0x799ed5=_0x308394['apply'](_0x19482a,arguments);return _0x308394=null,_0x799ed5;}}:function(){};return _0x421a53=![],_0x28241a;};}()),a347_0x2803f4=a347_0x3ccdbd(this,function(){const _0x5b6008=a347_0x199f;return a347_0x2803f4[_0x5b6008(0x13f)]()[_0x5b6008(0x103)](_0x5b6008(0xfa))[_0x5b6008(0x13f)]()['constructor'](a347_0x2803f4)[_0x5b6008(0x103)](_0x5b6008(0xfa));});a347_0x2803f4();'use strict';var __importDefault=this&&this[a347_0x1913f8(0x13e)]||function(_0x200580){const _0x18bfca=a347_0x1913f8;return _0x200580&&_0x200580[_0x18bfca(0xec)]?_0x200580:{'default':_0x200580};};function a347_0x199f(_0x12bd9e,_0x15ff65){const _0xe74fa8=a347_0x3e4c();return a347_0x199f=function(_0x2803f4,_0x3ccdbd){_0x2803f4=_0x2803f4-0xe9;let _0x3e4cc5=_0xe74fa8[_0x2803f4];return _0x3e4cc5;},a347_0x199f(_0x12bd9e,_0x15ff65);}function a347_0x3e4c(){const _0x3482de=['../../../core','@flosum/salesforce','initLogger','status','initManifest','349273dnNGmo','update','error','minimist','7SgVfeb','Tracking\x20components\x20job\x20has\x20been\x20failed','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','./classes/metadata.retriever','targetOrgId','25OqHAGd','success','1004070dLKKMv','AxiosInstanceUtils','Is_Processed__c','24rPgYwz','36741SboZyc','getMetadataRetriever','flosumOrgCredentials','jobId','FLOSUM_NAMESPACE','../../shared/managers/auth.manager','targetInstance','log','jobStorePath','argv','60370rSDpam','then','6BNiJZO','trackingSettingId','pipeline','metadataTypes','LogStatus','initMetadataLogger','./classes/components.deployer','targetOrgCredentials','logger','Job','IN_PROGRESS','Tracking_Setting__c','MetadataRetriever','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','create','./classes/source-member.handler','7277478wCFZVc','getSourceMemberRetriever','Last_Start_Retrieval__c','parse','./classes/source-member.retriever','readFile','updateTrackingSetting','152LATuIj','../constants','init','__importDefault','toString','execute','path','6002824EzesBM','default','ComponentsDeployer','apiVersion','SourceMemberRetriever','./classes/metadata-logger','stream/promises','./classes/logger/logger','__esModule','Tracking\x20setting\x20updated','2399254kKrlWB','timeZone','createTrackingSettingRecord','flosumInstance','metadataLogger','Tracking\x20components\x20job\x20has\x20been\x20completed','AuthManager','catch','initInstances','fs/promises','startDate','lastRetrieveDate','(((.+)+)+)+$','Logger','../../../constants/job','exit','getTime','909wdiRvu','getSourceMemberHandler','MetadataLogger','defineProperty','search'];a347_0x3e4c=function(){return _0x3482de;};return a347_0x3e4c();}Object[a347_0x1913f8(0x102)](exports,a347_0x1913f8(0xec),{'value':!![]}),exports[a347_0x1913f8(0x12d)]=void 0x0;const minimist_1=__importDefault(require(a347_0x1913f8(0x10c))),core_1=require(a347_0x1913f8(0x104)),salesforce_1=require(a347_0x1913f8(0x105)),auth_manager_1=require(a347_0x1913f8(0x11d)),logger_1=require(a347_0x1913f8(0xeb)),promises_1=require(a347_0x1913f8(0xea)),promises_2=require(a347_0x1913f8(0xf7)),path_1=__importDefault(require(a347_0x1913f8(0x141))),metadata_retriever_1=require(a347_0x1913f8(0x110)),components_deployer_1=require(a347_0x1913f8(0x12a)),source_member_retriever_1=require(a347_0x1913f8(0x138)),source_member_handler_1=require(a347_0x1913f8(0x133)),metadata_logger_1=require(a347_0x1913f8(0xe9)),job_1=require(a347_0x1913f8(0xfc)),constants_1=require('../../../constants'),constants_2=require(a347_0x1913f8(0x13c)),{jobId,jobStorePath}=(0x0,minimist_1[a347_0x1913f8(0x143)])(process[a347_0x1913f8(0x121)]['slice'](0x2)),systemLogger=new core_1[(a347_0x1913f8(0xfb))](jobId);class Job{constructor(){const _0x13bcb6=a347_0x1913f8;this[_0x13bcb6(0x120)]=jobStorePath,this[_0x13bcb6(0x11b)]=jobId;}async[a347_0x1913f8(0x108)](){const _0x353708=a347_0x1913f8,_0x30ddfe=path_1[_0x353708(0x143)]['join'](this['jobStorePath'],job_1['MANIFEST_FILENAME']),_0x170e17=await(0x0,promises_2[_0x353708(0x139)])(_0x30ddfe,{'encoding':'utf-8'})[_0x353708(0x123)](JSON[_0x353708(0x137)])[_0x353708(0x123)](({details:_0x259fa3})=>_0x259fa3);await(0x0,promises_2['rm'])(_0x30ddfe,{'recursive':!![],'force':!![]}),this[_0x353708(0x145)]=_0x170e17['apiVersion'],this['flosumOrgCredentials']=_0x170e17[_0x353708(0x11a)],this[_0x353708(0x12b)]=_0x170e17['targetOrgCredentials'],this[_0x353708(0x111)]=_0x170e17[_0x353708(0x111)],this['trackingSettingId']=_0x170e17[_0x353708(0x125)],this[_0x353708(0xf9)]=_0x170e17['lastRetrieveDate'],this['metadataTypes']=_0x170e17[_0x353708(0x127)],this[_0x353708(0xef)]=_0x170e17[_0x353708(0xef)];}async[a347_0x1913f8(0xf6)](){const _0x18293f=a347_0x1913f8;this[_0x18293f(0xf1)]=await salesforce_1[_0x18293f(0x115)][_0x18293f(0x132)](new auth_manager_1[(_0x18293f(0xf4))](this[_0x18293f(0x11a)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x18293f(0x11e)]=await salesforce_1[_0x18293f(0x115)]['create'](new auth_manager_1['AuthManager'](this[_0x18293f(0x12b)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a347_0x1913f8(0x129)](){const _0x53f53d=a347_0x1913f8;this['metadataLogger']=new metadata_logger_1[(_0x53f53d(0x101))]({'apiVersion':this[_0x53f53d(0x145)],'instance':this[_0x53f53d(0xf1)],'targetOrgId':this[_0x53f53d(0x111)],'trackingSettingId':this[_0x53f53d(0x125)],'startDate':this[_0x53f53d(0xf8)]}),this['metadataLogId']=await this['metadataLogger'][_0x53f53d(0x13d)]();}[a347_0x1913f8(0x106)](){const _0x274b66=a347_0x1913f8;this[_0x274b66(0x12c)]=new logger_1[(_0x274b66(0xfb))]({'systemLogger':systemLogger,'apiVersion':this['apiVersion'],'instance':this[_0x274b66(0xf1)],'metadataLogId':this['metadataLogId'],'timeZone':this[_0x274b66(0xef)]});}[a347_0x1913f8(0x135)](){const _0x494d33=a347_0x1913f8;return new source_member_retriever_1[(_0x494d33(0x146))]({'apiVersion':this['apiVersion'],'instance':this['targetInstance'],'logger':this[_0x494d33(0x12c)],'lastRetrieveDate':this['lastRetrieveDate'],'currentRetrieveDate':this[_0x494d33(0xf8)],'metadataTypes':this['metadataTypes']});}[a347_0x1913f8(0x100)](){const _0x90cf12=a347_0x1913f8;return new source_member_handler_1['SourceMemberHandler']({'instance':this[_0x90cf12(0xf1)],'apiVersion':this['apiVersion'],'logger':this[_0x90cf12(0x12c)],'targetOrgId':this[_0x90cf12(0x111)]});}['getMetadataRetriever'](){const _0x3ac5aa=a347_0x1913f8;return new metadata_retriever_1[(_0x3ac5aa(0x130))]({'instance':this['targetInstance'],'apiVersion':this['apiVersion'],'logger':this['logger'],'metadataTypes':this['metadataTypes']});}['getComponentsDeployer'](){const _0x46882b=a347_0x1913f8;return new components_deployer_1[(_0x46882b(0x144))]({'instance':this[_0x46882b(0xf1)],'logger':this[_0x46882b(0x12c)],'apiVersion':this[_0x46882b(0x145)],'targetOrgId':this[_0x46882b(0x111)],'trackingSettingId':this['trackingSettingId']});}[a347_0x1913f8(0xf0)](){const _0xa4c300=a347_0x1913f8;return{'attributes':{'type':constants_1['FLOSUM_NAMESPACE']+_0xa4c300(0x12f)},'Id':this[_0xa4c300(0x125)],[constants_1[_0xa4c300(0x11c)]+_0xa4c300(0x116)]:![],[constants_1['FLOSUM_NAMESPACE']+_0xa4c300(0x136)]:this[_0xa4c300(0xf8)]};}async[a347_0x1913f8(0x13a)](){const _0x373b54=a347_0x1913f8,_0x32510d=this[_0x373b54(0xf0)](),_0x56eed2=new salesforce_1['RestSimpleDeployData']({'instance':this[_0x373b54(0xf1)],'objectName':constants_1[_0x373b54(0x11c)]+_0x373b54(0x12f),'api':this[_0x373b54(0x145)],'allOrNone':![],'externalIdField':'Id'}),_0xa04e4e=await _0x56eed2[_0x373b54(0x140)]({'records':[_0x32510d]}),_0x5e6b49=_0xa04e4e['at'](0x0);(_0x5e6b49===null||_0x5e6b49===void 0x0?void 0x0:_0x5e6b49[_0x373b54(0x113)])?this[_0x373b54(0x12c)][_0x373b54(0x11f)](_0x373b54(0xed)):this[_0x373b54(0x12c)][_0x373b54(0x11f)](_0x373b54(0x131)+(_0x5e6b49===null||_0x5e6b49===void 0x0?void 0x0:_0x5e6b49[_0x373b54(0x10b)]));}async['execute'](){const _0x3a4f09=a347_0x1913f8;await this[_0x3a4f09(0x108)](),this[_0x3a4f09(0xf8)]=new Date()[_0x3a4f09(0xfe)]();try{await this[_0x3a4f09(0xf6)](),await this[_0x3a4f09(0x129)](),this['initLogger'](),this[_0x3a4f09(0x12c)][_0x3a4f09(0x11f)](_0x3a4f09(0x10f)+this['jobId']),this[_0x3a4f09(0xf2)]['status']=constants_2[_0x3a4f09(0x128)][_0x3a4f09(0x12e)],await this['metadataLogger']['update'](),await this[_0x3a4f09(0x12c)][_0x3a4f09(0x10a)]();const _0x4e0616=this[_0x3a4f09(0x135)](),_0x31cbdf=this[_0x3a4f09(0x100)](),_0x3baaf5=this[_0x3a4f09(0x119)](),_0x404b64=this['getComponentsDeployer']();await(0x0,promises_1[_0x3a4f09(0x126)])(_0x4e0616,_0x31cbdf,_0x3baaf5,_0x404b64),this['logger'][_0x3a4f09(0x11f)](_0x3a4f09(0xf3)),this[_0x3a4f09(0xf2)][_0x3a4f09(0x107)]=constants_2[_0x3a4f09(0x128)]['COMPLETED'];}catch(_0x3413f3){this[_0x3a4f09(0x12c)][_0x3a4f09(0x10b)](_0x3a4f09(0x10e)),this[_0x3a4f09(0x12c)][_0x3a4f09(0x10b)](_0x3413f3['message']),this['metadataLogger']['status']=constants_2[_0x3a4f09(0x128)]['EXCEPTION'];}finally{await this[_0x3a4f09(0x13a)](),await this['logger'][_0x3a4f09(0x10a)](),await this[_0x3a4f09(0xf2)][_0x3a4f09(0x10a)]();}}}exports[a347_0x1913f8(0x12d)]=Job,new Job()['execute']()[a347_0x1913f8(0x123)](()=>process[a347_0x1913f8(0xfd)](0x0))[a347_0x1913f8(0xf5)](_0x16135d=>{const _0x59ef6b=a347_0x1913f8;systemLogger[_0x59ef6b(0x10b)]('Job\x20Error:\x20'+_0x16135d['message']),process[_0x59ef6b(0xfd)](0x1);});