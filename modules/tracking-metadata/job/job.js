const a303_0xc26921=a303_0x6e14;(function(_0x2707fa,_0x51eb8f){const _0x14c7ac=a303_0x6e14,_0x4f0d6c=_0x2707fa();while(!![]){try{const _0x2c349d=-parseInt(_0x14c7ac(0x163))/0x1*(parseInt(_0x14c7ac(0x126))/0x2)+-parseInt(_0x14c7ac(0x143))/0x3+-parseInt(_0x14c7ac(0x116))/0x4+-parseInt(_0x14c7ac(0x168))/0x5+-parseInt(_0x14c7ac(0x15f))/0x6*(parseInt(_0x14c7ac(0x11e))/0x7)+parseInt(_0x14c7ac(0x129))/0x8*(-parseInt(_0x14c7ac(0x151))/0x9)+parseInt(_0x14c7ac(0x136))/0xa;if(_0x2c349d===_0x51eb8f)break;else _0x4f0d6c['push'](_0x4f0d6c['shift']());}catch(_0x32d5cf){_0x4f0d6c['push'](_0x4f0d6c['shift']());}}}(a303_0x23a5,0x3bdc9));const a303_0x3bd79f=(function(){let _0x2a662d=!![];return function(_0x4d1f1d,_0x55b52c){const _0x34c206=_0x2a662d?function(){const _0x11c934=a303_0x6e14;if(_0x55b52c){const _0x57c786=_0x55b52c[_0x11c934(0x127)](_0x4d1f1d,arguments);return _0x55b52c=null,_0x57c786;}}:function(){};return _0x2a662d=![],_0x34c206;};}()),a303_0x40fb32=a303_0x3bd79f(this,function(){const _0x5ec755=a303_0x6e14;return a303_0x40fb32[_0x5ec755(0x112)]()['search'](_0x5ec755(0x13c))[_0x5ec755(0x112)]()['constructor'](a303_0x40fb32)[_0x5ec755(0x111)]('(((.+)+)+)+$');});a303_0x40fb32();function a303_0x23a5(){const _0x347499=['../../shared/managers/auth.manager','getMetadataRetriever','timeZone','FLOSUM_NAMESPACE','catch','AuthManager','path','initManifest','LogStatus','./classes/source-member.handler','2076QYtWnx','Job','exit','targetInstance','102393KuExKk','initMetadataLogger','Is_Processed__c','message','getSourceMemberRetriever','6025oHPQnF','flosumOrgCredentials','EXCEPTION','initLogger','getTime','MANIFEST_FILENAME','Job\x20Error:\x20','logger','search','toString','status','log','Last_Start_Retrieval__c','1879268ziRhgY','readFile','Tracking_Setting__c','join','MetadataRetriever','startDate','getComponentsDeployer','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','9583TGLuwE','error','targetOrgId','trackingSettingId','stream/promises','../../../constants/job','Tracking\x20components\x20job\x20has\x20been\x20failed','lastRetrieveDate','6anRTWO','apply','jobStorePath','104GINgZG','metadataLogId','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','./classes/metadata-logger','argv','./classes/components.deployer','flosumInstance','./classes/metadata.retriever','AxiosInstanceUtils','utf-8','getSourceMemberHandler','__esModule','Logger','20311950HmIogG','__importDefault','defineProperty','ComponentsDeployer','then','targetOrgCredentials','(((.+)+)+)+$','slice','apiVersion','pipeline','minimist','../../../core','fs/promises','1264563qvDNVW','jobId','updateTrackingSetting','../constants','execute','./classes/logger/logger','Tracking\x20setting\x20updated','create','metadataLogger','update','default','metadataTypes','SourceMemberRetriever','createTrackingSettingRecord','77958SHXzyI','Tracking\x20components\x20job\x20has\x20been\x20completed','success','init'];a303_0x23a5=function(){return _0x347499;};return a303_0x23a5();}'use strict';var __importDefault=this&&this[a303_0xc26921(0x137)]||function(_0x1ff5d0){const _0x2ff70c=a303_0xc26921;return _0x1ff5d0&&_0x1ff5d0[_0x2ff70c(0x134)]?_0x1ff5d0:{'default':_0x1ff5d0};};Object[a303_0xc26921(0x138)](exports,a303_0xc26921(0x134),{'value':!![]}),exports['Job']=void 0x0;function a303_0x6e14(_0x269207,_0x5bb32c){const _0x23ba71=a303_0x23a5();return a303_0x6e14=function(_0x40fb32,_0x3bd79f){_0x40fb32=_0x40fb32-0x10d;let _0x23a551=_0x23ba71[_0x40fb32];return _0x23a551;},a303_0x6e14(_0x269207,_0x5bb32c);}const minimist_1=__importDefault(require(a303_0xc26921(0x140))),core_1=require(a303_0xc26921(0x141)),salesforce_1=require('@flosum/salesforce'),auth_manager_1=require(a303_0xc26921(0x155)),logger_1=require(a303_0xc26921(0x148)),promises_1=require(a303_0xc26921(0x122)),promises_2=require(a303_0xc26921(0x142)),path_1=__importDefault(require(a303_0xc26921(0x15b))),metadata_retriever_1=require(a303_0xc26921(0x130)),components_deployer_1=require(a303_0xc26921(0x12e)),source_member_retriever_1=require('./classes/source-member.retriever'),source_member_handler_1=require(a303_0xc26921(0x15e)),metadata_logger_1=require(a303_0xc26921(0x12c)),job_1=require(a303_0xc26921(0x123)),constants_1=require('../../../constants'),constants_2=require(a303_0xc26921(0x146)),{jobId,jobStorePath}=(0x0,minimist_1[a303_0xc26921(0x14d)])(process[a303_0xc26921(0x12d)][a303_0xc26921(0x13d)](0x2)),systemLogger=new core_1['Logger'](jobId);class Job{constructor(){const _0x74d4b6=a303_0xc26921;this[_0x74d4b6(0x128)]=jobStorePath,this['jobId']=jobId;}async[a303_0xc26921(0x15c)](){const _0x1c5b2d=a303_0xc26921,_0x461c8a=path_1[_0x1c5b2d(0x14d)][_0x1c5b2d(0x119)](this[_0x1c5b2d(0x128)],job_1[_0x1c5b2d(0x10e)]),_0x161697=await(0x0,promises_2[_0x1c5b2d(0x117)])(_0x461c8a,{'encoding':_0x1c5b2d(0x132)})[_0x1c5b2d(0x13a)](JSON['parse'])['then'](({details:_0x5c5892})=>_0x5c5892);await(0x0,promises_2['rm'])(_0x461c8a,{'recursive':!![],'force':!![]}),this[_0x1c5b2d(0x13e)]=_0x161697[_0x1c5b2d(0x13e)],this[_0x1c5b2d(0x169)]=_0x161697[_0x1c5b2d(0x169)],this['targetOrgCredentials']=_0x161697[_0x1c5b2d(0x13b)],this[_0x1c5b2d(0x120)]=_0x161697[_0x1c5b2d(0x120)],this[_0x1c5b2d(0x121)]=_0x161697[_0x1c5b2d(0x121)],this[_0x1c5b2d(0x125)]=_0x161697[_0x1c5b2d(0x125)],this[_0x1c5b2d(0x14e)]=_0x161697[_0x1c5b2d(0x14e)],this[_0x1c5b2d(0x157)]=_0x161697[_0x1c5b2d(0x157)];}async['initInstances'](){const _0x183ee4=a303_0xc26921;this[_0x183ee4(0x12f)]=await salesforce_1[_0x183ee4(0x131)]['create'](new auth_manager_1[(_0x183ee4(0x15a))](this['flosumOrgCredentials']),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x183ee4(0x162)]=await salesforce_1['AxiosInstanceUtils'][_0x183ee4(0x14a)](new auth_manager_1['AuthManager'](this[_0x183ee4(0x13b)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a303_0xc26921(0x164)](){const _0x2b3d9f=a303_0xc26921;this[_0x2b3d9f(0x14b)]=new metadata_logger_1['MetadataLogger']({'apiVersion':this['apiVersion'],'instance':this[_0x2b3d9f(0x12f)],'targetOrgId':this[_0x2b3d9f(0x120)],'trackingSettingId':this[_0x2b3d9f(0x121)],'startDate':this[_0x2b3d9f(0x11b)]}),this[_0x2b3d9f(0x12a)]=await this[_0x2b3d9f(0x14b)][_0x2b3d9f(0x154)]();}[a303_0xc26921(0x16b)](){const _0x537ed3=a303_0xc26921;this[_0x537ed3(0x110)]=new logger_1[(_0x537ed3(0x135))]({'systemLogger':systemLogger,'apiVersion':this[_0x537ed3(0x13e)],'instance':this['flosumInstance'],'metadataLogId':this[_0x537ed3(0x12a)],'timeZone':this[_0x537ed3(0x157)]});}[a303_0xc26921(0x167)](){const _0x48a835=a303_0xc26921;return new source_member_retriever_1[(_0x48a835(0x14f))]({'apiVersion':this['apiVersion'],'instance':this[_0x48a835(0x162)],'logger':this[_0x48a835(0x110)],'lastRetrieveDate':this[_0x48a835(0x125)],'currentRetrieveDate':this[_0x48a835(0x11b)],'metadataTypes':this[_0x48a835(0x14e)]});}['getSourceMemberHandler'](){const _0x4f5c80=a303_0xc26921;return new source_member_handler_1['SourceMemberHandler']({'instance':this[_0x4f5c80(0x12f)],'apiVersion':this['apiVersion'],'logger':this[_0x4f5c80(0x110)],'targetOrgId':this[_0x4f5c80(0x120)]});}[a303_0xc26921(0x156)](){const _0x213207=a303_0xc26921;return new metadata_retriever_1[(_0x213207(0x11a))]({'instance':this[_0x213207(0x162)],'apiVersion':this[_0x213207(0x13e)],'logger':this[_0x213207(0x110)],'metadataTypes':this[_0x213207(0x14e)]});}[a303_0xc26921(0x11c)](){const _0x163198=a303_0xc26921;return new components_deployer_1[(_0x163198(0x139))]({'instance':this[_0x163198(0x12f)],'logger':this['logger'],'apiVersion':this[_0x163198(0x13e)],'targetOrgId':this['targetOrgId'],'trackingSettingId':this[_0x163198(0x121)]});}[a303_0xc26921(0x150)](){const _0x4af3a7=a303_0xc26921;return{'attributes':{'type':constants_1[_0x4af3a7(0x158)]+_0x4af3a7(0x118)},'Id':this[_0x4af3a7(0x121)],[constants_1[_0x4af3a7(0x158)]+_0x4af3a7(0x165)]:![],[constants_1[_0x4af3a7(0x158)]+_0x4af3a7(0x115)]:this[_0x4af3a7(0x11b)]};}async[a303_0xc26921(0x145)](){const _0x414d60=a303_0xc26921,_0x26c52f=this[_0x414d60(0x150)](),_0x17cc46=new salesforce_1['RestSimpleDeployData']({'instance':this[_0x414d60(0x12f)],'objectName':constants_1[_0x414d60(0x158)]+_0x414d60(0x118),'api':this['apiVersion'],'allOrNone':![],'externalIdField':'Id'}),_0xf594ab=await _0x17cc46['execute']({'records':[_0x26c52f]}),_0x451fe3=_0xf594ab['at'](0x0);(_0x451fe3===null||_0x451fe3===void 0x0?void 0x0:_0x451fe3[_0x414d60(0x153)])?this[_0x414d60(0x110)][_0x414d60(0x114)](_0x414d60(0x149)):this[_0x414d60(0x110)][_0x414d60(0x114)](_0x414d60(0x12b)+(_0x451fe3===null||_0x451fe3===void 0x0?void 0x0:_0x451fe3[_0x414d60(0x11f)]));}async[a303_0xc26921(0x147)](){const _0x4949db=a303_0xc26921;await this[_0x4949db(0x15c)](),this['startDate']=new Date()[_0x4949db(0x10d)]();try{await this['initInstances'](),await this[_0x4949db(0x164)](),this['initLogger'](),this['logger'][_0x4949db(0x114)](_0x4949db(0x11d)+this[_0x4949db(0x144)]),this[_0x4949db(0x14b)][_0x4949db(0x113)]=constants_2[_0x4949db(0x15d)]['IN_PROGRESS'],await this[_0x4949db(0x14b)][_0x4949db(0x14c)](),await this[_0x4949db(0x110)]['update']();const _0x2e9f33=this[_0x4949db(0x167)](),_0x38307c=this[_0x4949db(0x133)](),_0x3da5b3=this['getMetadataRetriever'](),_0x3ca46a=this[_0x4949db(0x11c)]();await(0x0,promises_1[_0x4949db(0x13f)])(_0x2e9f33,_0x38307c,_0x3da5b3,_0x3ca46a),this['logger'][_0x4949db(0x114)](_0x4949db(0x152)),this[_0x4949db(0x14b)][_0x4949db(0x113)]=constants_2[_0x4949db(0x15d)]['COMPLETED'];}catch(_0x4237b4){this[_0x4949db(0x110)][_0x4949db(0x11f)](_0x4949db(0x124)),this['logger'][_0x4949db(0x11f)](_0x4237b4[_0x4949db(0x166)]),this[_0x4949db(0x14b)][_0x4949db(0x113)]=constants_2[_0x4949db(0x15d)][_0x4949db(0x16a)];}finally{await this[_0x4949db(0x145)](),await this[_0x4949db(0x110)][_0x4949db(0x14c)](),await this[_0x4949db(0x14b)][_0x4949db(0x14c)]();}}}exports[a303_0xc26921(0x160)]=Job,new Job()['execute']()[a303_0xc26921(0x13a)](()=>process[a303_0xc26921(0x161)](0x0))[a303_0xc26921(0x159)](_0x2a650d=>{const _0x36773f=a303_0xc26921;systemLogger[_0x36773f(0x11f)](_0x36773f(0x10f)+_0x2a650d[_0x36773f(0x166)]),process[_0x36773f(0x161)](0x1);});