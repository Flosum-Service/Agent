function a320_0x3ae7(){const _0x5ef4bc=['FLOSUM_NAMESPACE','MANIFEST_FILENAME','getComponentsDeployer','./classes/metadata-logger','AuthManager','update','Job\x20Error:\x20','default','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','Job','@flosum/salesforce','./classes/metadata.retriever','status','init','4272msYhkS','updateTrackingSetting','then','exit','./classes/logger/logger','argv','targetInstance','Logger','targetOrgCredentials','getSourceMemberRetriever','flosumInstance','minimist','LogStatus','log','../../../constants/job','logger','COMPLETED','621465GBolVX','initMetadataLogger','error','68NCyAYy','join','constructor','utf-8','IN_PROGRESS','success','metadataTypes','initManifest','pipeline','metadataLogger','metadataLogId','targetOrgId','catch','163012WsJjhk','168026fXvuqj','create','jobStorePath','../constants','MetadataRetriever','search','SourceMemberHandler','Last_Start_Retrieval__c','readFile','EXCEPTION','__esModule','timeZone','Tracking\x20components\x20job\x20has\x20been\x20failed','27105RyvZNE','(((.+)+)+)+$','./classes/source-member.handler','getMetadataRetriever','lastRetrieveDate','Tracking\x20components\x20job\x20has\x20been\x20completed','Is_Processed__c','./classes/source-member.retriever','../../../constants','trackingSettingId','4685877TXKhXI','execute','apiVersion','951942lSBzrD','3241CJnRJN','Tracking_Setting__c','jobId','getSourceMemberHandler','initInstances','message','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','./classes/components.deployer','parse','initLogger','createTrackingSettingRecord','startDate'];a320_0x3ae7=function(){return _0x5ef4bc;};return a320_0x3ae7();}const a320_0x3f38e1=a320_0x2118;(function(_0x1c1eb8,_0x48577b){const _0xb3e244=a320_0x2118,_0xb53df8=_0x1c1eb8();while(!![]){try{const _0x30dd62=-parseInt(_0xb3e244(0x1c6))/0x1+-parseInt(_0xb3e244(0x1c5))/0x2+-parseInt(_0xb3e244(0x1d3))/0x3*(-parseInt(_0xb3e244(0x1b8))/0x4)+parseInt(_0xb3e244(0x1b5))/0x5+-parseInt(_0xb3e244(0x1e0))/0x6+-parseInt(_0xb3e244(0x1e1))/0x7*(parseInt(_0xb3e244(0x1a4))/0x8)+parseInt(_0xb3e244(0x1dd))/0x9;if(_0x30dd62===_0x48577b)break;else _0xb53df8['push'](_0xb53df8['shift']());}catch(_0x555a9d){_0xb53df8['push'](_0xb53df8['shift']());}}}(a320_0x3ae7,0x22f06));const a320_0x45be14=(function(){let _0x2a0c36=!![];return function(_0x5ede71,_0x5a5daf){const _0xd587ce=_0x2a0c36?function(){if(_0x5a5daf){const _0x1b0710=_0x5a5daf['apply'](_0x5ede71,arguments);return _0x5a5daf=null,_0x1b0710;}}:function(){};return _0x2a0c36=![],_0xd587ce;};}()),a320_0x453af2=a320_0x45be14(this,function(){const _0x4965b5=a320_0x2118;return a320_0x453af2['toString']()[_0x4965b5(0x1cb)](_0x4965b5(0x1d4))['toString']()[_0x4965b5(0x1ba)](a320_0x453af2)[_0x4965b5(0x1cb)](_0x4965b5(0x1d4));});a320_0x453af2();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x433249){return _0x433249&&_0x433249['__esModule']?_0x433249:{'default':_0x433249};};Object['defineProperty'](exports,a320_0x3f38e1(0x1d0),{'value':!![]}),exports[a320_0x3f38e1(0x19f)]=void 0x0;function a320_0x2118(_0x3aff6c,_0x2c53d7){const _0x2aa264=a320_0x3ae7();return a320_0x2118=function(_0x453af2,_0x45be14){_0x453af2=_0x453af2-0x18f;let _0x3ae78a=_0x2aa264[_0x453af2];return _0x3ae78a;},a320_0x2118(_0x3aff6c,_0x2c53d7);}const minimist_1=__importDefault(require(a320_0x3f38e1(0x1af))),core_1=require('../../../core'),salesforce_1=require(a320_0x3f38e1(0x1a0)),auth_manager_1=require('../../shared/managers/auth.manager'),logger_1=require(a320_0x3f38e1(0x1a8)),promises_1=require('stream/promises'),promises_2=require('fs/promises'),path_1=__importDefault(require('path')),metadata_retriever_1=require(a320_0x3f38e1(0x1a1)),components_deployer_1=require(a320_0x3f38e1(0x191)),source_member_retriever_1=require(a320_0x3f38e1(0x1da)),source_member_handler_1=require(a320_0x3f38e1(0x1d5)),metadata_logger_1=require(a320_0x3f38e1(0x199)),job_1=require(a320_0x3f38e1(0x1b2)),constants_1=require(a320_0x3f38e1(0x1db)),constants_2=require(a320_0x3f38e1(0x1c9)),{jobId,jobStorePath}=(0x0,minimist_1[a320_0x3f38e1(0x19d)])(process[a320_0x3f38e1(0x1a9)]['slice'](0x2)),systemLogger=new core_1[(a320_0x3f38e1(0x1ab))](jobId);class Job{constructor(){const _0x3e33bb=a320_0x3f38e1;this['jobStorePath']=jobStorePath,this[_0x3e33bb(0x1e3)]=jobId;}async['initManifest'](){const _0x4c9a68=a320_0x3f38e1,_0x28b409=path_1[_0x4c9a68(0x19d)][_0x4c9a68(0x1b9)](this[_0x4c9a68(0x1c8)],job_1[_0x4c9a68(0x197)]),_0x5253c0=await(0x0,promises_2[_0x4c9a68(0x1ce)])(_0x28b409,{'encoding':_0x4c9a68(0x1bb)})[_0x4c9a68(0x1a6)](JSON[_0x4c9a68(0x192)])['then'](({details:_0x3ff291})=>_0x3ff291);await(0x0,promises_2['rm'])(_0x28b409,{'recursive':!![],'force':!![]}),this[_0x4c9a68(0x1df)]=_0x5253c0['apiVersion'],this['flosumOrgCredentials']=_0x5253c0['flosumOrgCredentials'],this[_0x4c9a68(0x1ac)]=_0x5253c0[_0x4c9a68(0x1ac)],this[_0x4c9a68(0x1c3)]=_0x5253c0[_0x4c9a68(0x1c3)],this[_0x4c9a68(0x1dc)]=_0x5253c0['trackingSettingId'],this[_0x4c9a68(0x1d7)]=_0x5253c0['lastRetrieveDate'],this[_0x4c9a68(0x1be)]=_0x5253c0[_0x4c9a68(0x1be)],this['timeZone']=_0x5253c0[_0x4c9a68(0x1d1)];}async[a320_0x3f38e1(0x1e5)](){const _0x5831e9=a320_0x3f38e1;this[_0x5831e9(0x1ae)]=await salesforce_1['AxiosInstanceUtils'][_0x5831e9(0x1c7)](new auth_manager_1['AuthManager'](this['flosumOrgCredentials']),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x5831e9(0x1aa)]=await salesforce_1['AxiosInstanceUtils']['create'](new auth_manager_1[(_0x5831e9(0x19a))](this[_0x5831e9(0x1ac)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async['initMetadataLogger'](){const _0x257703=a320_0x3f38e1;this[_0x257703(0x1c1)]=new metadata_logger_1['MetadataLogger']({'apiVersion':this[_0x257703(0x1df)],'instance':this['flosumInstance'],'targetOrgId':this['targetOrgId'],'trackingSettingId':this[_0x257703(0x1dc)],'startDate':this[_0x257703(0x195)]}),this[_0x257703(0x1c2)]=await this['metadataLogger'][_0x257703(0x1a3)]();}['initLogger'](){const _0x2a47d3=a320_0x3f38e1;this[_0x2a47d3(0x1b3)]=new logger_1[(_0x2a47d3(0x1ab))]({'systemLogger':systemLogger,'apiVersion':this[_0x2a47d3(0x1df)],'instance':this[_0x2a47d3(0x1ae)],'metadataLogId':this['metadataLogId'],'timeZone':this['timeZone']});}[a320_0x3f38e1(0x1ad)](){const _0x1188e7=a320_0x3f38e1;return new source_member_retriever_1['SourceMemberRetriever']({'apiVersion':this['apiVersion'],'instance':this[_0x1188e7(0x1aa)],'logger':this[_0x1188e7(0x1b3)],'lastRetrieveDate':this['lastRetrieveDate'],'currentRetrieveDate':this[_0x1188e7(0x195)],'metadataTypes':this[_0x1188e7(0x1be)]});}[a320_0x3f38e1(0x1e4)](){const _0x24e721=a320_0x3f38e1;return new source_member_handler_1[(_0x24e721(0x1cc))]({'instance':this[_0x24e721(0x1ae)],'apiVersion':this[_0x24e721(0x1df)],'logger':this['logger'],'targetOrgId':this[_0x24e721(0x1c3)]});}[a320_0x3f38e1(0x1d6)](){const _0x157e9b=a320_0x3f38e1;return new metadata_retriever_1[(_0x157e9b(0x1ca))]({'instance':this[_0x157e9b(0x1aa)],'apiVersion':this[_0x157e9b(0x1df)],'logger':this[_0x157e9b(0x1b3)],'metadataTypes':this['metadataTypes']});}[a320_0x3f38e1(0x198)](){const _0x1e57b9=a320_0x3f38e1;return new components_deployer_1['ComponentsDeployer']({'instance':this['flosumInstance'],'logger':this[_0x1e57b9(0x1b3)],'apiVersion':this[_0x1e57b9(0x1df)],'targetOrgId':this[_0x1e57b9(0x1c3)],'trackingSettingId':this[_0x1e57b9(0x1dc)]});}[a320_0x3f38e1(0x194)](){const _0x4a1a3c=a320_0x3f38e1;return{'attributes':{'type':constants_1[_0x4a1a3c(0x196)]+_0x4a1a3c(0x1e2)},'Id':this['trackingSettingId'],[constants_1['FLOSUM_NAMESPACE']+_0x4a1a3c(0x1d9)]:![],[constants_1[_0x4a1a3c(0x196)]+_0x4a1a3c(0x1cd)]:this[_0x4a1a3c(0x195)]};}async[a320_0x3f38e1(0x1a5)](){const _0x3e4eb5=a320_0x3f38e1,_0x4b40a1=this['createTrackingSettingRecord'](),_0x497594=new salesforce_1['RestSimpleDeployData']({'instance':this[_0x3e4eb5(0x1ae)],'objectName':constants_1[_0x3e4eb5(0x196)]+_0x3e4eb5(0x1e2),'api':this[_0x3e4eb5(0x1df)],'allOrNone':![],'externalIdField':'Id'}),_0xabc396=await _0x497594[_0x3e4eb5(0x1de)]({'records':[_0x4b40a1]}),_0xf78991=_0xabc396['at'](0x0);(_0xf78991===null||_0xf78991===void 0x0?void 0x0:_0xf78991[_0x3e4eb5(0x1bd)])?this[_0x3e4eb5(0x1b3)][_0x3e4eb5(0x1b1)]('Tracking\x20setting\x20updated'):this[_0x3e4eb5(0x1b3)][_0x3e4eb5(0x1b1)](_0x3e4eb5(0x19e)+(_0xf78991===null||_0xf78991===void 0x0?void 0x0:_0xf78991[_0x3e4eb5(0x1b7)]));}async[a320_0x3f38e1(0x1de)](){const _0x2d6f46=a320_0x3f38e1;await this[_0x2d6f46(0x1bf)](),this['startDate']=new Date()['getTime']();try{await this[_0x2d6f46(0x1e5)](),await this[_0x2d6f46(0x1b6)](),this[_0x2d6f46(0x193)](),this[_0x2d6f46(0x1b3)][_0x2d6f46(0x1b1)](_0x2d6f46(0x190)+this['jobId']),this[_0x2d6f46(0x1c1)]['status']=constants_2[_0x2d6f46(0x1b0)][_0x2d6f46(0x1bc)],await this['metadataLogger'][_0x2d6f46(0x19b)](),await this[_0x2d6f46(0x1b3)]['update']();const _0x152b42=this['getSourceMemberRetriever'](),_0xf492b8=this[_0x2d6f46(0x1e4)](),_0x401b6a=this['getMetadataRetriever'](),_0x38c7e4=this[_0x2d6f46(0x198)]();await(0x0,promises_1[_0x2d6f46(0x1c0)])(_0x152b42,_0xf492b8,_0x401b6a,_0x38c7e4),this[_0x2d6f46(0x1b3)][_0x2d6f46(0x1b1)](_0x2d6f46(0x1d8)),this[_0x2d6f46(0x1c1)][_0x2d6f46(0x1a2)]=constants_2[_0x2d6f46(0x1b0)][_0x2d6f46(0x1b4)];}catch(_0x2e5572){this[_0x2d6f46(0x1b3)][_0x2d6f46(0x1b7)](_0x2d6f46(0x1d2)),this[_0x2d6f46(0x1b3)][_0x2d6f46(0x1b7)](_0x2e5572[_0x2d6f46(0x18f)]),this[_0x2d6f46(0x1c1)]['status']=constants_2['LogStatus'][_0x2d6f46(0x1cf)];}finally{await this[_0x2d6f46(0x1a5)](),await this[_0x2d6f46(0x1b3)]['update'](),await this[_0x2d6f46(0x1c1)][_0x2d6f46(0x19b)]();}}}exports[a320_0x3f38e1(0x19f)]=Job,new Job()[a320_0x3f38e1(0x1de)]()['then'](()=>process[a320_0x3f38e1(0x1a7)](0x0))[a320_0x3f38e1(0x1c4)](_0x49dc67=>{const _0x19c9f9=a320_0x3f38e1;systemLogger['error'](_0x19c9f9(0x19c)+_0x49dc67[_0x19c9f9(0x18f)]),process[_0x19c9f9(0x1a7)](0x1);});