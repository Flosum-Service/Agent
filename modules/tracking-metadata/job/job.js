const a336_0x14ff53=a336_0x2759;(function(_0x5ed550,_0x1f2048){const _0x344194=a336_0x2759,_0x5ec696=_0x5ed550();while(!![]){try{const _0x4713f7=-parseInt(_0x344194(0x111))/0x1*(-parseInt(_0x344194(0x11d))/0x2)+parseInt(_0x344194(0x11c))/0x3+-parseInt(_0x344194(0x138))/0x4+-parseInt(_0x344194(0x100))/0x5+-parseInt(_0x344194(0xf5))/0x6*(parseInt(_0x344194(0x128))/0x7)+parseInt(_0x344194(0xec))/0x8+-parseInt(_0x344194(0x13a))/0x9;if(_0x4713f7===_0x1f2048)break;else _0x5ec696['push'](_0x5ec696['shift']());}catch(_0x47a9a4){_0x5ec696['push'](_0x5ec696['shift']());}}}(a336_0x5399,0x8d29f));const a336_0x466729=(function(){let _0x1d36ad=!![];return function(_0x3c3869,_0x4bf555){const _0x1b3e52=_0x1d36ad?function(){const _0x73ebec=a336_0x2759;if(_0x4bf555){const _0x502474=_0x4bf555[_0x73ebec(0x126)](_0x3c3869,arguments);return _0x4bf555=null,_0x502474;}}:function(){};return _0x1d36ad=![],_0x1b3e52;};}()),a336_0x18bbdc=a336_0x466729(this,function(){const _0xe7ada0=a336_0x2759;return a336_0x18bbdc[_0xe7ada0(0xea)]()['search'](_0xe7ada0(0x139))['toString']()['constructor'](a336_0x18bbdc)[_0xe7ada0(0xfd)](_0xe7ada0(0x139));});function a336_0x5399(){const _0x65846b=['4699590yoZPNu','Job','./classes/source-member.retriever','Tracking\x20components\x20job\x20has\x20been\x20completed','getTime','stream/promises','startDate','ComponentsDeployer','execute','then','FLOSUM_NAMESPACE','initManifest','createTrackingSettingRecord','slice','initMetadataLogger','metadataLogId','../../../constants/job','1zSRFqo','exit','../constants','targetOrgId','readFile','Tracking\x20setting\x20updated','__importDefault','SourceMemberHandler','utf-8','@flosum/salesforce','success','3226254GVSEYm','1142072rinPYD','./classes/metadata.retriever','../../shared/managers/auth.manager','./classes/metadata-logger','MetadataLogger','__esModule','IN_PROGRESS','getMetadataRetriever','updateTrackingSetting','apply','./classes/components.deployer','323743PHWNHh','join','fs/promises','flosumInstance','path','SourceMemberRetriever','Logger','timeZone','pipeline','Is_Processed__c','trackingSettingId','metadataLogger','COMPLETED','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','catch','EXCEPTION','366716BOjHrN','(((.+)+)+)+$','676764PhVHEB','status','RestSimpleDeployData','logger','targetOrgCredentials','metadataTypes','jobId','./classes/source-member.handler','default','defineProperty','targetInstance','MANIFEST_FILENAME','lastRetrieveDate','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','create','update','toString','minimist','2158328tTdpgg','log','./classes/logger/logger','getSourceMemberRetriever','../../../constants','initLogger','flosumOrgCredentials','initInstances','Tracking_Setting__c','30hOWPdu','AuthManager','message','getComponentsDeployer','getSourceMemberHandler','error','AxiosInstanceUtils','apiVersion','search','Job\x20Error:\x20','LogStatus'];a336_0x5399=function(){return _0x65846b;};return a336_0x5399();}a336_0x18bbdc();'use strict';var __importDefault=this&&this[a336_0x14ff53(0x117)]||function(_0x484824){return _0x484824&&_0x484824['__esModule']?_0x484824:{'default':_0x484824};};Object[a336_0x14ff53(0x143)](exports,a336_0x14ff53(0x122),{'value':!![]}),exports['Job']=void 0x0;const minimist_1=__importDefault(require(a336_0x14ff53(0xeb))),core_1=require('../../../core'),salesforce_1=require(a336_0x14ff53(0x11a)),auth_manager_1=require(a336_0x14ff53(0x11f)),logger_1=require(a336_0x14ff53(0xee)),promises_1=require(a336_0x14ff53(0x105)),promises_2=require(a336_0x14ff53(0x12a)),path_1=__importDefault(require(a336_0x14ff53(0x12c))),metadata_retriever_1=require(a336_0x14ff53(0x11e)),components_deployer_1=require(a336_0x14ff53(0x127)),source_member_retriever_1=require(a336_0x14ff53(0x102)),source_member_handler_1=require(a336_0x14ff53(0x141)),metadata_logger_1=require(a336_0x14ff53(0x120)),job_1=require(a336_0x14ff53(0x110)),constants_1=require(a336_0x14ff53(0xf0)),constants_2=require(a336_0x14ff53(0x113)),{jobId,jobStorePath}=(0x0,minimist_1[a336_0x14ff53(0x142)])(process['argv'][a336_0x14ff53(0x10d)](0x2)),systemLogger=new core_1[(a336_0x14ff53(0x12e))](jobId);class Job{constructor(){const _0x9bcd3b=a336_0x14ff53;this['jobStorePath']=jobStorePath,this[_0x9bcd3b(0x140)]=jobId;}async[a336_0x14ff53(0x10b)](){const _0x3dfbc1=a336_0x14ff53,_0x17761c=path_1['default'][_0x3dfbc1(0x129)](this['jobStorePath'],job_1[_0x3dfbc1(0x145)]),_0xd851e6=await(0x0,promises_2[_0x3dfbc1(0x115)])(_0x17761c,{'encoding':_0x3dfbc1(0x119)})[_0x3dfbc1(0x109)](JSON['parse'])['then'](({details:_0x1073bd})=>_0x1073bd);await(0x0,promises_2['rm'])(_0x17761c,{'recursive':!![],'force':!![]}),this['apiVersion']=_0xd851e6[_0x3dfbc1(0xfc)],this['flosumOrgCredentials']=_0xd851e6[_0x3dfbc1(0xf2)],this['targetOrgCredentials']=_0xd851e6['targetOrgCredentials'],this[_0x3dfbc1(0x114)]=_0xd851e6['targetOrgId'],this[_0x3dfbc1(0x132)]=_0xd851e6[_0x3dfbc1(0x132)],this[_0x3dfbc1(0x146)]=_0xd851e6[_0x3dfbc1(0x146)],this[_0x3dfbc1(0x13f)]=_0xd851e6['metadataTypes'],this[_0x3dfbc1(0x12f)]=_0xd851e6[_0x3dfbc1(0x12f)];}async[a336_0x14ff53(0xf3)](){const _0x461067=a336_0x14ff53;this[_0x461067(0x12b)]=await salesforce_1['AxiosInstanceUtils'][_0x461067(0xe8)](new auth_manager_1[(_0x461067(0xf6))](this[_0x461067(0xf2)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x461067(0x144)]=await salesforce_1[_0x461067(0xfb)][_0x461067(0xe8)](new auth_manager_1[(_0x461067(0xf6))](this[_0x461067(0x13e)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a336_0x14ff53(0x10e)](){const _0x183b88=a336_0x14ff53;this[_0x183b88(0x133)]=new metadata_logger_1[(_0x183b88(0x121))]({'apiVersion':this[_0x183b88(0xfc)],'instance':this[_0x183b88(0x12b)],'targetOrgId':this['targetOrgId'],'trackingSettingId':this['trackingSettingId'],'startDate':this[_0x183b88(0x106)]}),this['metadataLogId']=await this['metadataLogger']['init']();}[a336_0x14ff53(0xf1)](){const _0x4374ec=a336_0x14ff53;this[_0x4374ec(0x13d)]=new logger_1['Logger']({'systemLogger':systemLogger,'apiVersion':this[_0x4374ec(0xfc)],'instance':this[_0x4374ec(0x12b)],'metadataLogId':this[_0x4374ec(0x10f)],'timeZone':this[_0x4374ec(0x12f)]});}['getSourceMemberRetriever'](){const _0x22c629=a336_0x14ff53;return new source_member_retriever_1[(_0x22c629(0x12d))]({'apiVersion':this[_0x22c629(0xfc)],'instance':this['targetInstance'],'logger':this[_0x22c629(0x13d)],'lastRetrieveDate':this['lastRetrieveDate'],'currentRetrieveDate':this[_0x22c629(0x106)],'metadataTypes':this[_0x22c629(0x13f)]});}[a336_0x14ff53(0xf9)](){const _0x142741=a336_0x14ff53;return new source_member_handler_1[(_0x142741(0x118))]({'instance':this[_0x142741(0x12b)],'apiVersion':this[_0x142741(0xfc)],'logger':this[_0x142741(0x13d)],'targetOrgId':this[_0x142741(0x114)]});}[a336_0x14ff53(0x124)](){const _0x4adb02=a336_0x14ff53;return new metadata_retriever_1['MetadataRetriever']({'instance':this[_0x4adb02(0x144)],'apiVersion':this[_0x4adb02(0xfc)],'logger':this[_0x4adb02(0x13d)],'metadataTypes':this['metadataTypes']});}[a336_0x14ff53(0xf8)](){const _0x507515=a336_0x14ff53;return new components_deployer_1[(_0x507515(0x107))]({'instance':this[_0x507515(0x12b)],'logger':this['logger'],'apiVersion':this[_0x507515(0xfc)],'targetOrgId':this[_0x507515(0x114)],'trackingSettingId':this[_0x507515(0x132)]});}[a336_0x14ff53(0x10c)](){const _0x15c414=a336_0x14ff53;return{'attributes':{'type':constants_1[_0x15c414(0x10a)]+_0x15c414(0xf4)},'Id':this[_0x15c414(0x132)],[constants_1['FLOSUM_NAMESPACE']+_0x15c414(0x131)]:![],[constants_1[_0x15c414(0x10a)]+'Last_Start_Retrieval__c']:this['startDate']};}async[a336_0x14ff53(0x125)](){const _0x151d4d=a336_0x14ff53,_0x3cd7da=this['createTrackingSettingRecord'](),_0x406f6f=new salesforce_1[(_0x151d4d(0x13c))]({'instance':this['flosumInstance'],'objectName':constants_1[_0x151d4d(0x10a)]+_0x151d4d(0xf4),'api':this[_0x151d4d(0xfc)],'allOrNone':![],'externalIdField':'Id'}),_0x3a1c5f=await _0x406f6f[_0x151d4d(0x108)]({'records':[_0x3cd7da]}),_0x376eb7=_0x3a1c5f['at'](0x0);(_0x376eb7===null||_0x376eb7===void 0x0?void 0x0:_0x376eb7[_0x151d4d(0x11b)])?this['logger']['log'](_0x151d4d(0x116)):this[_0x151d4d(0x13d)][_0x151d4d(0xed)](_0x151d4d(0x147)+(_0x376eb7===null||_0x376eb7===void 0x0?void 0x0:_0x376eb7[_0x151d4d(0xfa)]));}async[a336_0x14ff53(0x108)](){const _0x5f922=a336_0x14ff53;await this[_0x5f922(0x10b)](),this[_0x5f922(0x106)]=new Date()[_0x5f922(0x104)]();try{await this[_0x5f922(0xf3)](),await this[_0x5f922(0x10e)](),this[_0x5f922(0xf1)](),this['logger']['log'](_0x5f922(0x135)+this[_0x5f922(0x140)]),this[_0x5f922(0x133)][_0x5f922(0x13b)]=constants_2[_0x5f922(0xff)][_0x5f922(0x123)],await this[_0x5f922(0x133)][_0x5f922(0xe9)](),await this[_0x5f922(0x13d)]['update']();const _0xab3f4=this[_0x5f922(0xef)](),_0x3a8940=this[_0x5f922(0xf9)](),_0x3684d1=this[_0x5f922(0x124)](),_0x457b89=this[_0x5f922(0xf8)]();await(0x0,promises_1[_0x5f922(0x130)])(_0xab3f4,_0x3a8940,_0x3684d1,_0x457b89),this[_0x5f922(0x13d)][_0x5f922(0xed)](_0x5f922(0x103)),this['metadataLogger'][_0x5f922(0x13b)]=constants_2[_0x5f922(0xff)][_0x5f922(0x134)];}catch(_0x55abe6){this[_0x5f922(0x13d)][_0x5f922(0xfa)]('Tracking\x20components\x20job\x20has\x20been\x20failed'),this[_0x5f922(0x13d)]['error'](_0x55abe6['message']),this['metadataLogger'][_0x5f922(0x13b)]=constants_2['LogStatus'][_0x5f922(0x137)];}finally{await this[_0x5f922(0x125)](),await this['logger']['update'](),await this['metadataLogger'][_0x5f922(0xe9)]();}}}function a336_0x2759(_0x276314,_0x10aad9){const _0x484cba=a336_0x5399();return a336_0x2759=function(_0x18bbdc,_0x466729){_0x18bbdc=_0x18bbdc-0xe8;let _0x53991a=_0x484cba[_0x18bbdc];return _0x53991a;},a336_0x2759(_0x276314,_0x10aad9);}exports[a336_0x14ff53(0x101)]=Job,new Job()[a336_0x14ff53(0x108)]()[a336_0x14ff53(0x109)](()=>process[a336_0x14ff53(0x112)](0x0))[a336_0x14ff53(0x136)](_0x3f3a7c=>{const _0x3e29c6=a336_0x14ff53;systemLogger[_0x3e29c6(0xfa)](_0x3e29c6(0xfe)+_0x3f3a7c[_0x3e29c6(0xf7)]),process[_0x3e29c6(0x112)](0x1);});