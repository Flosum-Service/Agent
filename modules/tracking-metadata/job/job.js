const a319_0x2bbca1=a319_0xc049;(function(_0x8140db,_0xc2331d){const _0x4dad5b=a319_0xc049,_0x1ddc03=_0x8140db();while(!![]){try{const _0x326bb2=parseInt(_0x4dad5b(0x11e))/0x1+parseInt(_0x4dad5b(0xfd))/0x2+parseInt(_0x4dad5b(0x130))/0x3*(parseInt(_0x4dad5b(0x115))/0x4)+parseInt(_0x4dad5b(0x116))/0x5+-parseInt(_0x4dad5b(0xde))/0x6+parseInt(_0x4dad5b(0xdd))/0x7*(parseInt(_0x4dad5b(0x108))/0x8)+-parseInt(_0x4dad5b(0x10b))/0x9*(parseInt(_0x4dad5b(0x12a))/0xa);if(_0x326bb2===_0xc2331d)break;else _0x1ddc03['push'](_0x1ddc03['shift']());}catch(_0xe77ae){_0x1ddc03['push'](_0x1ddc03['shift']());}}}(a319_0x246d,0xf25f3));const a319_0x3fe3ca=(function(){let _0x3cc180=!![];return function(_0x5d0cc,_0x59e139){const _0x280050=_0x3cc180?function(){const _0x18f47c=a319_0xc049;if(_0x59e139){const _0x25143a=_0x59e139[_0x18f47c(0x105)](_0x5d0cc,arguments);return _0x59e139=null,_0x25143a;}}:function(){};return _0x3cc180=![],_0x280050;};}()),a319_0x42de05=a319_0x3fe3ca(this,function(){const _0x7b3e54=a319_0xc049;return a319_0x42de05[_0x7b3e54(0x111)]()[_0x7b3e54(0xee)]('(((.+)+)+)+$')[_0x7b3e54(0x111)]()['constructor'](a319_0x42de05)[_0x7b3e54(0xee)](_0x7b3e54(0x12c));});a319_0x42de05();'use strict';function a319_0x246d(){const _0x34f36d=['./classes/logger/logger','SourceMemberHandler','3692702YsCsMP','fs/promises','jobId','../../../constants/job','success','MetadataRetriever','SourceMemberRetriever','apiVersion','apply','default','parse','22216diKULD','log','initMetadataLogger','35807481BFvgzw','targetOrgCredentials','getComponentsDeployer','Is_Processed__c','EXCEPTION','init','toString','IN_PROGRESS','FLOSUM_NAMESPACE','Logger','28872HCimSo','4278030UqDmAn','MANIFEST_FILENAME','./classes/metadata-logger','Job','exit','getSourceMemberHandler','execute','getSourceMemberRetriever','1081402DLrbSc','createTrackingSettingRecord','slice','../../../constants','__importDefault','pipeline','join','stream/promises','minimist','ComponentsDeployer','Tracking\x20setting\x20updated','path','10QMwACM','getMetadataRetriever','(((.+)+)+)+$','utf-8','trackingSettingId','Job\x20Error:\x20','582roxeyL','logger','jobStorePath','../../shared/managers/auth.manager','error','status','initInstances','metadataLogger','startDate','targetOrgId','3899nkVlhp','10554456XiJHoT','timeZone','initLogger','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','./classes/components.deployer','flosumOrgCredentials','updateTrackingSetting','targetInstance','metadataTypes','initManifest','flosumInstance','readFile','LogStatus','../constants','../../../core','lastRetrieveDate','search','argv','defineProperty','__esModule','catch','update','Last_Start_Retrieval__c','metadataLogId','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','AxiosInstanceUtils','Tracking_Setting__c','then','./classes/source-member.handler'];a319_0x246d=function(){return _0x34f36d;};return a319_0x246d();}function a319_0xc049(_0x2ab4da,_0xe7416){const _0x3a81ee=a319_0x246d();return a319_0xc049=function(_0x42de05,_0x3fe3ca){_0x42de05=_0x42de05-0xda;let _0x246d44=_0x3a81ee[_0x42de05];return _0x246d44;},a319_0xc049(_0x2ab4da,_0xe7416);}var __importDefault=this&&this[a319_0x2bbca1(0x122)]||function(_0x17fa9a){const _0x191479=a319_0x2bbca1;return _0x17fa9a&&_0x17fa9a[_0x191479(0xf1)]?_0x17fa9a:{'default':_0x17fa9a};};Object[a319_0x2bbca1(0xf0)](exports,a319_0x2bbca1(0xf1),{'value':!![]}),exports[a319_0x2bbca1(0x119)]=void 0x0;const minimist_1=__importDefault(require(a319_0x2bbca1(0x126))),core_1=require(a319_0x2bbca1(0xec)),salesforce_1=require('@flosum/salesforce'),auth_manager_1=require(a319_0x2bbca1(0x133)),logger_1=require(a319_0x2bbca1(0xfb)),promises_1=require(a319_0x2bbca1(0x125)),promises_2=require(a319_0x2bbca1(0xfe)),path_1=__importDefault(require(a319_0x2bbca1(0x129))),metadata_retriever_1=require('./classes/metadata.retriever'),components_deployer_1=require(a319_0x2bbca1(0xe2)),source_member_retriever_1=require('./classes/source-member.retriever'),source_member_handler_1=require(a319_0x2bbca1(0xfa)),metadata_logger_1=require(a319_0x2bbca1(0x118)),job_1=require(a319_0x2bbca1(0x100)),constants_1=require(a319_0x2bbca1(0x121)),constants_2=require(a319_0x2bbca1(0xeb)),{jobId,jobStorePath}=(0x0,minimist_1[a319_0x2bbca1(0x106)])(process[a319_0x2bbca1(0xef)][a319_0x2bbca1(0x120)](0x2)),systemLogger=new core_1[(a319_0x2bbca1(0x114))](jobId);class Job{constructor(){const _0x50844c=a319_0x2bbca1;this[_0x50844c(0x132)]=jobStorePath,this[_0x50844c(0xff)]=jobId;}async[a319_0x2bbca1(0xe7)](){const _0x1b1d99=a319_0x2bbca1,_0x391aa2=path_1[_0x1b1d99(0x106)][_0x1b1d99(0x124)](this[_0x1b1d99(0x132)],job_1[_0x1b1d99(0x117)]),_0x488636=await(0x0,promises_2[_0x1b1d99(0xe9)])(_0x391aa2,{'encoding':_0x1b1d99(0x12d)})['then'](JSON[_0x1b1d99(0x107)])[_0x1b1d99(0xf9)](({details:_0x48dd46})=>_0x48dd46);await(0x0,promises_2['rm'])(_0x391aa2,{'recursive':!![],'force':!![]}),this[_0x1b1d99(0x104)]=_0x488636[_0x1b1d99(0x104)],this[_0x1b1d99(0xe3)]=_0x488636[_0x1b1d99(0xe3)],this[_0x1b1d99(0x10c)]=_0x488636[_0x1b1d99(0x10c)],this[_0x1b1d99(0xdc)]=_0x488636[_0x1b1d99(0xdc)],this[_0x1b1d99(0x12e)]=_0x488636['trackingSettingId'],this[_0x1b1d99(0xed)]=_0x488636[_0x1b1d99(0xed)],this['metadataTypes']=_0x488636[_0x1b1d99(0xe6)],this[_0x1b1d99(0xdf)]=_0x488636[_0x1b1d99(0xdf)];}async[a319_0x2bbca1(0x136)](){const _0x465b4f=a319_0x2bbca1;this[_0x465b4f(0xe8)]=await salesforce_1['AxiosInstanceUtils']['create'](new auth_manager_1['AuthManager'](this[_0x465b4f(0xe3)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x465b4f(0xe5)]=await salesforce_1[_0x465b4f(0xf7)]['create'](new auth_manager_1['AuthManager'](this[_0x465b4f(0x10c)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a319_0x2bbca1(0x10a)](){const _0x4ef106=a319_0x2bbca1;this[_0x4ef106(0xda)]=new metadata_logger_1['MetadataLogger']({'apiVersion':this[_0x4ef106(0x104)],'instance':this[_0x4ef106(0xe8)],'targetOrgId':this[_0x4ef106(0xdc)],'trackingSettingId':this[_0x4ef106(0x12e)],'startDate':this[_0x4ef106(0xdb)]}),this[_0x4ef106(0xf5)]=await this['metadataLogger'][_0x4ef106(0x110)]();}[a319_0x2bbca1(0xe0)](){const _0x641abd=a319_0x2bbca1;this[_0x641abd(0x131)]=new logger_1[(_0x641abd(0x114))]({'systemLogger':systemLogger,'apiVersion':this[_0x641abd(0x104)],'instance':this['flosumInstance'],'metadataLogId':this[_0x641abd(0xf5)],'timeZone':this[_0x641abd(0xdf)]});}[a319_0x2bbca1(0x11d)](){const _0x11c2a5=a319_0x2bbca1;return new source_member_retriever_1[(_0x11c2a5(0x103))]({'apiVersion':this[_0x11c2a5(0x104)],'instance':this['targetInstance'],'logger':this[_0x11c2a5(0x131)],'lastRetrieveDate':this[_0x11c2a5(0xed)],'currentRetrieveDate':this[_0x11c2a5(0xdb)],'metadataTypes':this['metadataTypes']});}[a319_0x2bbca1(0x11b)](){const _0x24b95d=a319_0x2bbca1;return new source_member_handler_1[(_0x24b95d(0xfc))]({'instance':this['flosumInstance'],'apiVersion':this[_0x24b95d(0x104)],'logger':this[_0x24b95d(0x131)],'targetOrgId':this[_0x24b95d(0xdc)]});}[a319_0x2bbca1(0x12b)](){const _0xb6705=a319_0x2bbca1;return new metadata_retriever_1[(_0xb6705(0x102))]({'instance':this[_0xb6705(0xe5)],'apiVersion':this['apiVersion'],'logger':this[_0xb6705(0x131)],'metadataTypes':this['metadataTypes']});}[a319_0x2bbca1(0x10d)](){const _0x12748b=a319_0x2bbca1;return new components_deployer_1[(_0x12748b(0x127))]({'instance':this[_0x12748b(0xe8)],'logger':this['logger'],'apiVersion':this['apiVersion'],'targetOrgId':this[_0x12748b(0xdc)],'trackingSettingId':this[_0x12748b(0x12e)]});}['createTrackingSettingRecord'](){const _0x425b6e=a319_0x2bbca1;return{'attributes':{'type':constants_1[_0x425b6e(0x113)]+_0x425b6e(0xf8)},'Id':this[_0x425b6e(0x12e)],[constants_1[_0x425b6e(0x113)]+_0x425b6e(0x10e)]:![],[constants_1[_0x425b6e(0x113)]+_0x425b6e(0xf4)]:this[_0x425b6e(0xdb)]};}async[a319_0x2bbca1(0xe4)](){const _0x7f2172=a319_0x2bbca1,_0xcf9f3a=this[_0x7f2172(0x11f)](),_0x72138f=new salesforce_1['RestSimpleDeployData']({'instance':this[_0x7f2172(0xe8)],'objectName':constants_1[_0x7f2172(0x113)]+_0x7f2172(0xf8),'api':this[_0x7f2172(0x104)],'allOrNone':![],'externalIdField':'Id'}),_0x2b70c8=await _0x72138f[_0x7f2172(0x11c)]({'records':[_0xcf9f3a]}),_0x5b860f=_0x2b70c8['at'](0x0);(_0x5b860f===null||_0x5b860f===void 0x0?void 0x0:_0x5b860f[_0x7f2172(0x101)])?this[_0x7f2172(0x131)][_0x7f2172(0x109)](_0x7f2172(0x128)):this['logger'][_0x7f2172(0x109)](_0x7f2172(0xf6)+(_0x5b860f===null||_0x5b860f===void 0x0?void 0x0:_0x5b860f['error']));}async[a319_0x2bbca1(0x11c)](){const _0x3262db=a319_0x2bbca1;await this['initManifest'](),this[_0x3262db(0xdb)]=new Date()['getTime']();try{await this[_0x3262db(0x136)](),await this['initMetadataLogger'](),this[_0x3262db(0xe0)](),this[_0x3262db(0x131)][_0x3262db(0x109)](_0x3262db(0xe1)+this[_0x3262db(0xff)]),this['metadataLogger']['status']=constants_2[_0x3262db(0xea)][_0x3262db(0x112)],await this['metadataLogger'][_0x3262db(0xf3)](),await this['logger'][_0x3262db(0xf3)]();const _0xa7a5ca=this[_0x3262db(0x11d)](),_0x55097c=this[_0x3262db(0x11b)](),_0x361d52=this['getMetadataRetriever'](),_0x105299=this[_0x3262db(0x10d)]();await(0x0,promises_1[_0x3262db(0x123)])(_0xa7a5ca,_0x55097c,_0x361d52,_0x105299),this[_0x3262db(0x131)][_0x3262db(0x109)]('Tracking\x20components\x20job\x20has\x20been\x20completed'),this[_0x3262db(0xda)][_0x3262db(0x135)]=constants_2[_0x3262db(0xea)]['COMPLETED'];}catch(_0x13c58c){this[_0x3262db(0x131)][_0x3262db(0x134)]('Tracking\x20components\x20job\x20has\x20been\x20failed'),this['logger'][_0x3262db(0x134)](_0x13c58c['message']),this[_0x3262db(0xda)][_0x3262db(0x135)]=constants_2[_0x3262db(0xea)][_0x3262db(0x10f)];}finally{await this['updateTrackingSetting'](),await this['logger']['update'](),await this[_0x3262db(0xda)][_0x3262db(0xf3)]();}}}exports[a319_0x2bbca1(0x119)]=Job,new Job()[a319_0x2bbca1(0x11c)]()[a319_0x2bbca1(0xf9)](()=>process['exit'](0x0))[a319_0x2bbca1(0xf2)](_0x330921=>{const _0x2663b2=a319_0x2bbca1;systemLogger[_0x2663b2(0x134)](_0x2663b2(0x12f)+_0x330921['message']),process[_0x2663b2(0x11a)](0x1);});