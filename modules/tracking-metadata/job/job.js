function a336_0x3205(_0x5d811f,_0x48d5af){const _0xdf7ad9=a336_0x121e();return a336_0x3205=function(_0x1f14b5,_0x271f46){_0x1f14b5=_0x1f14b5-0x1b7;let _0x121efd=_0xdf7ad9[_0x1f14b5];return _0x121efd;},a336_0x3205(_0x5d811f,_0x48d5af);}const a336_0x4db668=a336_0x3205;(function(_0x457a31,_0x1b7e05){const _0xebba51=a336_0x3205,_0x256150=_0x457a31();while(!![]){try{const _0xf3c48c=-parseInt(_0xebba51(0x20c))/0x1+-parseInt(_0xebba51(0x1c6))/0x2+-parseInt(_0xebba51(0x1c9))/0x3+parseInt(_0xebba51(0x1f5))/0x4*(parseInt(_0xebba51(0x1c7))/0x5)+parseInt(_0xebba51(0x1ec))/0x6*(parseInt(_0xebba51(0x1e8))/0x7)+parseInt(_0xebba51(0x1ff))/0x8+parseInt(_0xebba51(0x1df))/0x9;if(_0xf3c48c===_0x1b7e05)break;else _0x256150['push'](_0x256150['shift']());}catch(_0x1e298c){_0x256150['push'](_0x256150['shift']());}}}(a336_0x121e,0x3f4fb));const a336_0x271f46=(function(){let _0x4df8cf=!![];return function(_0x188db8,_0x46c98f){const _0x201b9c=_0x4df8cf?function(){if(_0x46c98f){const _0x24ece3=_0x46c98f['apply'](_0x188db8,arguments);return _0x46c98f=null,_0x24ece3;}}:function(){};return _0x4df8cf=![],_0x201b9c;};}()),a336_0x1f14b5=a336_0x271f46(this,function(){const _0x2dafcb=a336_0x3205;return a336_0x1f14b5[_0x2dafcb(0x1da)]()[_0x2dafcb(0x209)](_0x2dafcb(0x1d8))[_0x2dafcb(0x1da)]()['constructor'](a336_0x1f14b5)['search']('(((.+)+)+)+$');});a336_0x1f14b5();function a336_0x121e(){const _0x73d4c3=['fs/promises','updateTrackingSetting','catch','./classes/source-member.retriever','utf-8','794294FxpHhI','65mFcBnu','apiVersion','1373304JAbiiN','../../../core','update','FLOSUM_NAMESPACE','defineProperty','readFile','initManifest','EXCEPTION','then','timeZone','MANIFEST_FILENAME','message','Job','metadataLogger','AuthManager','(((.+)+)+)+$','Tracking\x20components\x20job\x20has\x20been\x20completed','toString','metadataTypes','targetOrgCredentials','success','./classes/logger/logger','2208600wxdtoM','exit','pipeline','./classes/metadata-logger','../../../constants','@flosum/salesforce','initLogger','getSourceMemberRetriever','argv','161xnHGrL','getMetadataRetriever','Logger','Last_Start_Retrieval__c','123366GbkwNe','ComponentsDeployer','../constants','LogStatus','AxiosInstanceUtils','Tracking\x20setting\x20updated','execute','IN_PROGRESS','initInstances','4828HzdQuU','__esModule','../../../constants/job','./classes/source-member.handler','path','metadataLogId','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','Is_Processed__c','jobId','stream/promises','4139416FSNaNd','targetInstance','flosumOrgCredentials','default','trackingSettingId','Tracking_Setting__c','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','log','error','parse','search','status','getSourceMemberHandler','137183xnGrun','./classes/metadata.retriever','logger','lastRetrieveDate','targetOrgId','join','create','jobStorePath','initMetadataLogger','flosumInstance','MetadataRetriever','../../shared/managers/auth.manager','startDate','init'];a336_0x121e=function(){return _0x73d4c3;};return a336_0x121e();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x398177){const _0x375239=a336_0x3205;return _0x398177&&_0x398177[_0x375239(0x1f6)]?_0x398177:{'default':_0x398177};};Object[a336_0x4db668(0x1cd)](exports,a336_0x4db668(0x1f6),{'value':!![]}),exports['Job']=void 0x0;const minimist_1=__importDefault(require('minimist')),core_1=require(a336_0x4db668(0x1ca)),salesforce_1=require(a336_0x4db668(0x1e4)),auth_manager_1=require(a336_0x4db668(0x1be)),logger_1=require(a336_0x4db668(0x1de)),promises_1=require(a336_0x4db668(0x1fe)),promises_2=require(a336_0x4db668(0x1c1)),path_1=__importDefault(require(a336_0x4db668(0x1f9))),metadata_retriever_1=require(a336_0x4db668(0x20d)),components_deployer_1=require('./classes/components.deployer'),source_member_retriever_1=require(a336_0x4db668(0x1c4)),source_member_handler_1=require(a336_0x4db668(0x1f8)),metadata_logger_1=require(a336_0x4db668(0x1e2)),job_1=require(a336_0x4db668(0x1f7)),constants_1=require(a336_0x4db668(0x1e3)),constants_2=require(a336_0x4db668(0x1ee)),{jobId,jobStorePath}=(0x0,minimist_1[a336_0x4db668(0x202)])(process[a336_0x4db668(0x1e7)]['slice'](0x2)),systemLogger=new core_1[(a336_0x4db668(0x1ea))](jobId);class Job{constructor(){const _0x50ec42=a336_0x4db668;this[_0x50ec42(0x1ba)]=jobStorePath,this[_0x50ec42(0x1fd)]=jobId;}async[a336_0x4db668(0x1cf)](){const _0x843539=a336_0x4db668,_0x9fffc9=path_1[_0x843539(0x202)][_0x843539(0x1b8)](this[_0x843539(0x1ba)],job_1[_0x843539(0x1d3)]),_0x52a720=await(0x0,promises_2[_0x843539(0x1ce)])(_0x9fffc9,{'encoding':_0x843539(0x1c5)})['then'](JSON[_0x843539(0x208)])[_0x843539(0x1d1)](({details:_0x236d90})=>_0x236d90);await(0x0,promises_2['rm'])(_0x9fffc9,{'recursive':!![],'force':!![]}),this[_0x843539(0x1c8)]=_0x52a720[_0x843539(0x1c8)],this[_0x843539(0x201)]=_0x52a720[_0x843539(0x201)],this[_0x843539(0x1dc)]=_0x52a720[_0x843539(0x1dc)],this[_0x843539(0x1b7)]=_0x52a720[_0x843539(0x1b7)],this['trackingSettingId']=_0x52a720['trackingSettingId'],this[_0x843539(0x20f)]=_0x52a720['lastRetrieveDate'],this[_0x843539(0x1db)]=_0x52a720[_0x843539(0x1db)],this[_0x843539(0x1d2)]=_0x52a720['timeZone'];}async[a336_0x4db668(0x1f4)](){const _0x533772=a336_0x4db668;this[_0x533772(0x1bc)]=await salesforce_1[_0x533772(0x1f0)][_0x533772(0x1b9)](new auth_manager_1[(_0x533772(0x1d7))](this[_0x533772(0x201)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this['targetInstance']=await salesforce_1[_0x533772(0x1f0)]['create'](new auth_manager_1[(_0x533772(0x1d7))](this[_0x533772(0x1dc)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a336_0x4db668(0x1bb)](){const _0x2848f9=a336_0x4db668;this[_0x2848f9(0x1d6)]=new metadata_logger_1['MetadataLogger']({'apiVersion':this[_0x2848f9(0x1c8)],'instance':this[_0x2848f9(0x1bc)],'targetOrgId':this[_0x2848f9(0x1b7)],'trackingSettingId':this[_0x2848f9(0x203)],'startDate':this['startDate']}),this[_0x2848f9(0x1fa)]=await this[_0x2848f9(0x1d6)][_0x2848f9(0x1c0)]();}[a336_0x4db668(0x1e5)](){const _0x54600=a336_0x4db668;this[_0x54600(0x20e)]=new logger_1[(_0x54600(0x1ea))]({'systemLogger':systemLogger,'apiVersion':this[_0x54600(0x1c8)],'instance':this[_0x54600(0x1bc)],'metadataLogId':this['metadataLogId'],'timeZone':this[_0x54600(0x1d2)]});}[a336_0x4db668(0x1e6)](){const _0x5a9354=a336_0x4db668;return new source_member_retriever_1['SourceMemberRetriever']({'apiVersion':this['apiVersion'],'instance':this['targetInstance'],'logger':this['logger'],'lastRetrieveDate':this[_0x5a9354(0x20f)],'currentRetrieveDate':this[_0x5a9354(0x1bf)],'metadataTypes':this['metadataTypes']});}[a336_0x4db668(0x20b)](){const _0x3924da=a336_0x4db668;return new source_member_handler_1['SourceMemberHandler']({'instance':this[_0x3924da(0x1bc)],'apiVersion':this['apiVersion'],'logger':this['logger'],'targetOrgId':this[_0x3924da(0x1b7)]});}[a336_0x4db668(0x1e9)](){const _0x3537eb=a336_0x4db668;return new metadata_retriever_1[(_0x3537eb(0x1bd))]({'instance':this[_0x3537eb(0x200)],'apiVersion':this['apiVersion'],'logger':this[_0x3537eb(0x20e)],'metadataTypes':this['metadataTypes']});}['getComponentsDeployer'](){const _0x4e9653=a336_0x4db668;return new components_deployer_1[(_0x4e9653(0x1ed))]({'instance':this[_0x4e9653(0x1bc)],'logger':this[_0x4e9653(0x20e)],'apiVersion':this[_0x4e9653(0x1c8)],'targetOrgId':this['targetOrgId'],'trackingSettingId':this[_0x4e9653(0x203)]});}['createTrackingSettingRecord'](){const _0x8b6b8d=a336_0x4db668;return{'attributes':{'type':constants_1[_0x8b6b8d(0x1cc)]+_0x8b6b8d(0x204)},'Id':this[_0x8b6b8d(0x203)],[constants_1['FLOSUM_NAMESPACE']+_0x8b6b8d(0x1fc)]:![],[constants_1[_0x8b6b8d(0x1cc)]+_0x8b6b8d(0x1eb)]:this['startDate']};}async[a336_0x4db668(0x1c2)](){const _0x320ada=a336_0x4db668,_0x185e1a=this['createTrackingSettingRecord'](),_0x1aa160=new salesforce_1['RestSimpleDeployData']({'instance':this['flosumInstance'],'objectName':constants_1[_0x320ada(0x1cc)]+_0x320ada(0x204),'api':this[_0x320ada(0x1c8)],'allOrNone':![],'externalIdField':'Id'}),_0x343bf6=await _0x1aa160[_0x320ada(0x1f2)]({'records':[_0x185e1a]}),_0x1bc6aa=_0x343bf6['at'](0x0);(_0x1bc6aa===null||_0x1bc6aa===void 0x0?void 0x0:_0x1bc6aa[_0x320ada(0x1dd)])?this['logger'][_0x320ada(0x206)](_0x320ada(0x1f1)):this[_0x320ada(0x20e)][_0x320ada(0x206)](_0x320ada(0x205)+(_0x1bc6aa===null||_0x1bc6aa===void 0x0?void 0x0:_0x1bc6aa[_0x320ada(0x207)]));}async['execute'](){const _0x26016a=a336_0x4db668;await this[_0x26016a(0x1cf)](),this[_0x26016a(0x1bf)]=new Date()['getTime']();try{await this[_0x26016a(0x1f4)](),await this[_0x26016a(0x1bb)](),this[_0x26016a(0x1e5)](),this[_0x26016a(0x20e)][_0x26016a(0x206)](_0x26016a(0x1fb)+this[_0x26016a(0x1fd)]),this[_0x26016a(0x1d6)]['status']=constants_2[_0x26016a(0x1ef)][_0x26016a(0x1f3)],await this[_0x26016a(0x1d6)]['update'](),await this['logger'][_0x26016a(0x1cb)]();const _0x4a725c=this[_0x26016a(0x1e6)](),_0x306f5e=this['getSourceMemberHandler'](),_0x5a8658=this[_0x26016a(0x1e9)](),_0x16c30d=this['getComponentsDeployer']();await(0x0,promises_1[_0x26016a(0x1e1)])(_0x4a725c,_0x306f5e,_0x5a8658,_0x16c30d),this[_0x26016a(0x20e)][_0x26016a(0x206)](_0x26016a(0x1d9)),this[_0x26016a(0x1d6)][_0x26016a(0x20a)]=constants_2[_0x26016a(0x1ef)]['COMPLETED'];}catch(_0x2db73b){this[_0x26016a(0x20e)][_0x26016a(0x207)]('Tracking\x20components\x20job\x20has\x20been\x20failed'),this[_0x26016a(0x20e)]['error'](_0x2db73b[_0x26016a(0x1d4)]),this[_0x26016a(0x1d6)]['status']=constants_2[_0x26016a(0x1ef)][_0x26016a(0x1d0)];}finally{await this[_0x26016a(0x1c2)](),await this[_0x26016a(0x20e)][_0x26016a(0x1cb)](),await this[_0x26016a(0x1d6)]['update']();}}}exports[a336_0x4db668(0x1d5)]=Job,new Job()[a336_0x4db668(0x1f2)]()[a336_0x4db668(0x1d1)](()=>process[a336_0x4db668(0x1e0)](0x0))[a336_0x4db668(0x1c3)](_0x99b302=>{const _0x5b5f7c=a336_0x4db668;systemLogger['error']('Job\x20Error:\x20'+_0x99b302[_0x5b5f7c(0x1d4)]),process['exit'](0x1);});