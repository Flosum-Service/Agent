function a304_0x45a2(_0x5e0660,_0x9179af){const _0x37625a=a304_0x1406();return a304_0x45a2=function(_0x4bec9e,_0x51c87b){_0x4bec9e=_0x4bec9e-0x7e;let _0x14062c=_0x37625a[_0x4bec9e];return _0x14062c;},a304_0x45a2(_0x5e0660,_0x9179af);}const a304_0x185a84=a304_0x45a2;(function(_0x3306fd,_0x59af87){const _0x69f02d=a304_0x45a2,_0x2af77f=_0x3306fd();while(!![]){try{const _0x29b9bc=parseInt(_0x69f02d(0x8d))/0x1+-parseInt(_0x69f02d(0xa9))/0x2*(-parseInt(_0x69f02d(0xa5))/0x3)+parseInt(_0x69f02d(0x8c))/0x4+parseInt(_0x69f02d(0xb3))/0x5+-parseInt(_0x69f02d(0xaa))/0x6+parseInt(_0x69f02d(0xad))/0x7*(parseInt(_0x69f02d(0xc3))/0x8)+-parseInt(_0x69f02d(0xd6))/0x9;if(_0x29b9bc===_0x59af87)break;else _0x2af77f['push'](_0x2af77f['shift']());}catch(_0x225476){_0x2af77f['push'](_0x2af77f['shift']());}}}(a304_0x1406,0xeb8e0));const a304_0x51c87b=(function(){let _0x567730=!![];return function(_0x91502,_0x423cf5){const _0x9e3fa0=_0x567730?function(){const _0x5a4b77=a304_0x45a2;if(_0x423cf5){const _0x5af038=_0x423cf5[_0x5a4b77(0xbb)](_0x91502,arguments);return _0x423cf5=null,_0x5af038;}}:function(){};return _0x567730=![],_0x9e3fa0;};}()),a304_0x4bec9e=a304_0x51c87b(this,function(){const _0x56b54e=a304_0x45a2;return a304_0x4bec9e['toString']()[_0x56b54e(0xc6)](_0x56b54e(0x80))['toString']()[_0x56b54e(0xb4)](a304_0x4bec9e)['search'](_0x56b54e(0x80));});a304_0x4bec9e();'use strict';var __importDefault=this&&this[a304_0x185a84(0xb5)]||function(_0x2ef682){const _0x7f622c=a304_0x185a84;return _0x2ef682&&_0x2ef682[_0x7f622c(0x98)]?_0x2ef682:{'default':_0x2ef682};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a304_0x185a84(0xa1)]=void 0x0;function a304_0x1406(){const _0xdf6f2c=['__importDefault','update','path','Tracking_Setting__c','LogStatus','apiVersion','apply','error','status','parse','default','MetadataRetriever','readFile','MetadataLogger','176KDCMYB','timeZone','jobStorePath','search','SourceMemberHandler','metadataLogId','initMetadataLogger','./classes/metadata-logger','@flosum/salesforce','create','Tracking\x20components\x20job\x20has\x20been\x20failed','../../../constants','IN_PROGRESS','slice','FLOSUM_NAMESPACE','../constants','targetOrgCredentials','createTrackingSettingRecord','AxiosInstanceUtils','5824053rDvYYE','./classes/metadata.retriever','startDate','Logger','log','(((.+)+)+)+$','metadataLogger','getComponentsDeployer','updateTrackingSetting','exit','MANIFEST_FILENAME','pipeline','getSourceMemberHandler','getMetadataRetriever','fs/promises','getSourceMemberRetriever','../../../constants/job','2022964Xskfod','206295jQnPkk','metadataTypes','logger','SourceMemberRetriever','AuthManager','trackingSettingId','lastRetrieveDate','Last_Start_Retrieval__c','targetInstance','initLogger','./classes/logger/logger','__esModule','utf-8','Job\x20Error:\x20','../../shared/managers/auth.manager','initInstances','flosumOrgCredentials','jobId','init','message','Job','minimist','argv','targetOrgId','3oVDbNe','./classes/components.deployer','EXCEPTION','then','1282606aQePAe','7878312HNYtwA','execute','Tracking\x20components\x20job\x20has\x20been\x20completed','102914vzynUt','initManifest','join','ComponentsDeployer','flosumInstance','Tracking\x20setting\x20updated','6241090amGufh','constructor'];a304_0x1406=function(){return _0xdf6f2c;};return a304_0x1406();}const minimist_1=__importDefault(require(a304_0x185a84(0xa2))),core_1=require('../../../core'),salesforce_1=require(a304_0x185a84(0xcb)),auth_manager_1=require(a304_0x185a84(0x9b)),logger_1=require(a304_0x185a84(0x97)),promises_1=require('stream/promises'),promises_2=require(a304_0x185a84(0x89)),path_1=__importDefault(require(a304_0x185a84(0xb7))),metadata_retriever_1=require(a304_0x185a84(0xd7)),components_deployer_1=require(a304_0x185a84(0xa6)),source_member_retriever_1=require('./classes/source-member.retriever'),source_member_handler_1=require('./classes/source-member.handler'),metadata_logger_1=require(a304_0x185a84(0xca)),job_1=require(a304_0x185a84(0x8b)),constants_1=require(a304_0x185a84(0xce)),constants_2=require(a304_0x185a84(0xd2)),{jobId,jobStorePath}=(0x0,minimist_1[a304_0x185a84(0xbf)])(process[a304_0x185a84(0xa3)][a304_0x185a84(0xd0)](0x2)),systemLogger=new core_1[(a304_0x185a84(0x7e))](jobId);class Job{constructor(){const _0x2d209c=a304_0x185a84;this[_0x2d209c(0xc5)]=jobStorePath,this[_0x2d209c(0x9e)]=jobId;}async[a304_0x185a84(0xae)](){const _0x2fe2d8=a304_0x185a84,_0x52e0b8=path_1['default'][_0x2fe2d8(0xaf)](this[_0x2fe2d8(0xc5)],job_1[_0x2fe2d8(0x85)]),_0x51e269=await(0x0,promises_2[_0x2fe2d8(0xc1)])(_0x52e0b8,{'encoding':_0x2fe2d8(0x99)})['then'](JSON[_0x2fe2d8(0xbe)])['then'](({details:_0x2f83f0})=>_0x2f83f0);await(0x0,promises_2['rm'])(_0x52e0b8,{'recursive':!![],'force':!![]}),this[_0x2fe2d8(0xba)]=_0x51e269[_0x2fe2d8(0xba)],this['flosumOrgCredentials']=_0x51e269[_0x2fe2d8(0x9d)],this['targetOrgCredentials']=_0x51e269[_0x2fe2d8(0xd3)],this[_0x2fe2d8(0xa4)]=_0x51e269['targetOrgId'],this[_0x2fe2d8(0x92)]=_0x51e269[_0x2fe2d8(0x92)],this[_0x2fe2d8(0x93)]=_0x51e269[_0x2fe2d8(0x93)],this['metadataTypes']=_0x51e269[_0x2fe2d8(0x8e)],this['timeZone']=_0x51e269[_0x2fe2d8(0xc4)];}async[a304_0x185a84(0x9c)](){const _0x261536=a304_0x185a84;this[_0x261536(0xb1)]=await salesforce_1[_0x261536(0xd5)][_0x261536(0xcc)](new auth_manager_1[(_0x261536(0x91))](this[_0x261536(0x9d)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x261536(0x95)]=await salesforce_1[_0x261536(0xd5)][_0x261536(0xcc)](new auth_manager_1[(_0x261536(0x91))](this[_0x261536(0xd3)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a304_0x185a84(0xc9)](){const _0x534096=a304_0x185a84;this[_0x534096(0x81)]=new metadata_logger_1[(_0x534096(0xc2))]({'apiVersion':this['apiVersion'],'instance':this[_0x534096(0xb1)],'targetOrgId':this[_0x534096(0xa4)],'trackingSettingId':this['trackingSettingId'],'startDate':this[_0x534096(0xd8)]}),this[_0x534096(0xc8)]=await this[_0x534096(0x81)][_0x534096(0x9f)]();}['initLogger'](){const _0x129672=a304_0x185a84;this[_0x129672(0x8f)]=new logger_1[(_0x129672(0x7e))]({'systemLogger':systemLogger,'apiVersion':this[_0x129672(0xba)],'instance':this['flosumInstance'],'metadataLogId':this[_0x129672(0xc8)],'timeZone':this['timeZone']});}[a304_0x185a84(0x8a)](){const _0x27fd63=a304_0x185a84;return new source_member_retriever_1[(_0x27fd63(0x90))]({'apiVersion':this[_0x27fd63(0xba)],'instance':this['targetInstance'],'logger':this['logger'],'lastRetrieveDate':this[_0x27fd63(0x93)],'currentRetrieveDate':this[_0x27fd63(0xd8)],'metadataTypes':this[_0x27fd63(0x8e)]});}[a304_0x185a84(0x87)](){const _0x3c2e12=a304_0x185a84;return new source_member_handler_1[(_0x3c2e12(0xc7))]({'instance':this[_0x3c2e12(0xb1)],'apiVersion':this[_0x3c2e12(0xba)],'logger':this[_0x3c2e12(0x8f)],'targetOrgId':this['targetOrgId']});}[a304_0x185a84(0x88)](){const _0x86a792=a304_0x185a84;return new metadata_retriever_1[(_0x86a792(0xc0))]({'instance':this[_0x86a792(0x95)],'apiVersion':this[_0x86a792(0xba)],'logger':this['logger'],'metadataTypes':this[_0x86a792(0x8e)]});}[a304_0x185a84(0x82)](){const _0x49a9bf=a304_0x185a84;return new components_deployer_1[(_0x49a9bf(0xb0))]({'instance':this['flosumInstance'],'logger':this['logger'],'apiVersion':this[_0x49a9bf(0xba)],'targetOrgId':this[_0x49a9bf(0xa4)],'trackingSettingId':this['trackingSettingId']});}[a304_0x185a84(0xd4)](){const _0x5ef940=a304_0x185a84;return{'attributes':{'type':constants_1[_0x5ef940(0xd1)]+'Tracking_Setting__c'},'Id':this[_0x5ef940(0x92)],[constants_1[_0x5ef940(0xd1)]+'Is_Processed__c']:![],[constants_1['FLOSUM_NAMESPACE']+_0x5ef940(0x94)]:this[_0x5ef940(0xd8)]};}async[a304_0x185a84(0x83)](){const _0x4e28d8=a304_0x185a84,_0xeeb3bc=this['createTrackingSettingRecord'](),_0x4b6f09=new salesforce_1['RestSimpleDeployData']({'instance':this[_0x4e28d8(0xb1)],'objectName':constants_1[_0x4e28d8(0xd1)]+_0x4e28d8(0xb8),'api':this['apiVersion'],'allOrNone':![],'externalIdField':'Id'}),_0x254500=await _0x4b6f09[_0x4e28d8(0xab)]({'records':[_0xeeb3bc]}),_0xbb3e0c=_0x254500['at'](0x0);(_0xbb3e0c===null||_0xbb3e0c===void 0x0?void 0x0:_0xbb3e0c['success'])?this[_0x4e28d8(0x8f)][_0x4e28d8(0x7f)](_0x4e28d8(0xb2)):this[_0x4e28d8(0x8f)][_0x4e28d8(0x7f)]('Tracking\x20setting\x20not\x20updated\x20\x0a\x20'+(_0xbb3e0c===null||_0xbb3e0c===void 0x0?void 0x0:_0xbb3e0c[_0x4e28d8(0xbc)]));}async[a304_0x185a84(0xab)](){const _0x3857d0=a304_0x185a84;await this['initManifest'](),this[_0x3857d0(0xd8)]=new Date()['getTime']();try{await this['initInstances'](),await this['initMetadataLogger'](),this[_0x3857d0(0x96)](),this[_0x3857d0(0x8f)][_0x3857d0(0x7f)]('Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20'+this[_0x3857d0(0x9e)]),this[_0x3857d0(0x81)][_0x3857d0(0xbd)]=constants_2[_0x3857d0(0xb9)][_0x3857d0(0xcf)],await this[_0x3857d0(0x81)][_0x3857d0(0xb6)](),await this[_0x3857d0(0x8f)][_0x3857d0(0xb6)]();const _0x1e21a0=this[_0x3857d0(0x8a)](),_0x5deab1=this[_0x3857d0(0x87)](),_0x430923=this['getMetadataRetriever'](),_0x43a506=this[_0x3857d0(0x82)]();await(0x0,promises_1[_0x3857d0(0x86)])(_0x1e21a0,_0x5deab1,_0x430923,_0x43a506),this[_0x3857d0(0x8f)]['log'](_0x3857d0(0xac)),this[_0x3857d0(0x81)][_0x3857d0(0xbd)]=constants_2[_0x3857d0(0xb9)]['COMPLETED'];}catch(_0xf02754){this[_0x3857d0(0x8f)]['error'](_0x3857d0(0xcd)),this[_0x3857d0(0x8f)][_0x3857d0(0xbc)](_0xf02754['message']),this['metadataLogger']['status']=constants_2[_0x3857d0(0xb9)][_0x3857d0(0xa7)];}finally{await this[_0x3857d0(0x83)](),await this['logger'][_0x3857d0(0xb6)](),await this[_0x3857d0(0x81)][_0x3857d0(0xb6)]();}}}exports['Job']=Job,new Job()[a304_0x185a84(0xab)]()[a304_0x185a84(0xa8)](()=>process[a304_0x185a84(0x84)](0x0))['catch'](_0xf93eea=>{const _0x77c96b=a304_0x185a84;systemLogger[_0x77c96b(0xbc)](_0x77c96b(0x9a)+_0xf93eea[_0x77c96b(0xa0)]),process[_0x77c96b(0x84)](0x1);});