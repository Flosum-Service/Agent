const a348_0x266501=a348_0x3729;(function(_0x45a43c,_0x20b6dc){const _0x440b6e=a348_0x3729,_0x2619f1=_0x45a43c();while(!![]){try{const _0x3ef3eb=parseInt(_0x440b6e(0x121))/0x1+-parseInt(_0x440b6e(0xfe))/0x2+-parseInt(_0x440b6e(0x123))/0x3*(-parseInt(_0x440b6e(0x10a))/0x4)+-parseInt(_0x440b6e(0xed))/0x5*(parseInt(_0x440b6e(0x11c))/0x6)+parseInt(_0x440b6e(0x10d))/0x7+parseInt(_0x440b6e(0xea))/0x8*(-parseInt(_0x440b6e(0x107))/0x9)+parseInt(_0x440b6e(0xcc))/0xa;if(_0x3ef3eb===_0x20b6dc)break;else _0x2619f1['push'](_0x2619f1['shift']());}catch(_0xebbdf8){_0x2619f1['push'](_0x2619f1['shift']());}}}(a348_0x38fe,0xdc037));const a348_0x55104f=(function(){let _0x6349e8=!![];return function(_0x9cb179,_0x537774){const _0x497e56=_0x6349e8?function(){if(_0x537774){const _0x364a9a=_0x537774['apply'](_0x9cb179,arguments);return _0x537774=null,_0x364a9a;}}:function(){};return _0x6349e8=![],_0x497e56;};}()),a348_0x33d6fc=a348_0x55104f(this,function(){const _0x53743d=a348_0x3729;return a348_0x33d6fc[_0x53743d(0xf9)]()[_0x53743d(0x108)](_0x53743d(0x127))['toString']()['constructor'](a348_0x33d6fc)[_0x53743d(0x108)](_0x53743d(0x127));});a348_0x33d6fc();'use strict';function a348_0x38fe(){const _0x559315=['update','defineProperty','flosumInstance','initMetadataLogger','../../../core','execute','Logger','LogStatus','then','RestSimpleDeployData','./classes/metadata-logger','trackingSettingId','18crFYfI','getMetadataRetriever','updateTrackingSetting','metadataLogger','utf-8','702979eQSKcs','flosumOrgCredentials','21MEgWbX','pipeline','metadataTypes','MetadataLogger','(((.+)+)+)+$','5987650hIODTM','Last_Start_Retrieval__c','Tracking\x20components\x20job\x20has\x20been\x20completed','ComponentsDeployer','Tracking_Setting__c','jobStorePath','apiVersion','SourceMemberRetriever','jobId','../constants','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','AxiosInstanceUtils','status','__esModule','logger','metadataLogId','getSourceMemberHandler','./classes/components.deployer','./classes/metadata.retriever','SourceMemberHandler','./classes/logger/logger','IN_PROGRESS','MANIFEST_FILENAME','targetOrgId','exit','Is_Processed__c','timeZone','MetadataRetriever','log','catch','25744GFkMfg','isProcessed','@flosum/salesforce','20665edrvzM','Job','getComponentsDeployer','readFile','getTime','success','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','join','startDate','./classes/source-member.handler','initLogger','create','toString','error','FLOSUM_NAMESPACE','createTrackingSettingRecord','minimist','2409782eGNJCA','initInstances','targetOrgCredentials','Tracking\x20setting\x20updated','getSourceMemberRetriever','Job\x20Error:\x20','AuthManager','stream/promises','default','738FcfUgR','search','__importDefault','386164nhUnin','argv','targetInstance','2833670FWzoyj','../../../constants','initManifest'];a348_0x38fe=function(){return _0x559315;};return a348_0x38fe();}var __importDefault=this&&this[a348_0x266501(0x109)]||function(_0x5b15f1){const _0x5f91ab=a348_0x266501;return _0x5b15f1&&_0x5b15f1[_0x5f91ab(0xd9)]?_0x5b15f1:{'default':_0x5b15f1};};Object[a348_0x266501(0x111)](exports,a348_0x266501(0xd9),{'value':!![]}),exports[a348_0x266501(0xee)]=void 0x0;const minimist_1=__importDefault(require(a348_0x266501(0xfd))),core_1=require(a348_0x266501(0x114)),salesforce_1=require(a348_0x266501(0xec)),auth_manager_1=require('../../shared/managers/auth.manager'),logger_1=require(a348_0x266501(0xe0)),promises_1=require(a348_0x266501(0x105)),promises_2=require('fs/promises'),path_1=__importDefault(require('path')),metadata_retriever_1=require(a348_0x266501(0xde)),components_deployer_1=require(a348_0x266501(0xdd)),source_member_retriever_1=require('./classes/source-member.retriever'),source_member_handler_1=require(a348_0x266501(0xf6)),metadata_logger_1=require(a348_0x266501(0x11a)),job_1=require('../../../constants/job'),constants_1=require(a348_0x266501(0x10e)),constants_2=require(a348_0x266501(0xd5)),{jobId,jobStorePath}=(0x0,minimist_1[a348_0x266501(0x106)])(process[a348_0x266501(0x10b)]['slice'](0x2)),systemLogger=new core_1['Logger'](jobId);class Job{constructor(){const _0x2f589c=a348_0x266501;this['jobStorePath']=jobStorePath,this[_0x2f589c(0xd4)]=jobId;}async[a348_0x266501(0x10f)](){const _0x3ddf48=a348_0x266501,_0x370821=path_1['default'][_0x3ddf48(0xf4)](this[_0x3ddf48(0xd1)],job_1[_0x3ddf48(0xe2)]),_0x1910ac=await(0x0,promises_2[_0x3ddf48(0xf0)])(_0x370821,{'encoding':_0x3ddf48(0x120)})['then'](JSON['parse'])[_0x3ddf48(0x118)](({details:_0x58f4ac})=>_0x58f4ac);await(0x0,promises_2['rm'])(_0x370821,{'recursive':!![],'force':!![]}),this[_0x3ddf48(0xd2)]=_0x1910ac['apiVersion'],this[_0x3ddf48(0x122)]=_0x1910ac['flosumOrgCredentials'],this[_0x3ddf48(0x100)]=_0x1910ac['targetOrgCredentials'],this[_0x3ddf48(0xe3)]=_0x1910ac[_0x3ddf48(0xe3)],this['trackingSettingId']=_0x1910ac[_0x3ddf48(0x11b)],this['lastRetrieveDate']=_0x1910ac['lastRetrieveDate'],this[_0x3ddf48(0x125)]=_0x1910ac[_0x3ddf48(0x125)],this[_0x3ddf48(0xe6)]=_0x1910ac[_0x3ddf48(0xe6)];}async[a348_0x266501(0xff)](){const _0x1b39a8=a348_0x266501;this['flosumInstance']=await salesforce_1[_0x1b39a8(0xd7)][_0x1b39a8(0xf8)](new auth_manager_1[(_0x1b39a8(0x104))](this['flosumOrgCredentials']),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x1b39a8(0x10c)]=await salesforce_1[_0x1b39a8(0xd7)]['create'](new auth_manager_1[(_0x1b39a8(0x104))](this[_0x1b39a8(0x100)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a348_0x266501(0x113)](){const _0x55e767=a348_0x266501;this[_0x55e767(0x11f)]=new metadata_logger_1[(_0x55e767(0x126))]({'apiVersion':this[_0x55e767(0xd2)],'instance':this[_0x55e767(0x112)],'targetOrgId':this[_0x55e767(0xe3)],'trackingSettingId':this[_0x55e767(0x11b)],'startDate':this[_0x55e767(0xf5)]}),this[_0x55e767(0xdb)]=await this[_0x55e767(0x11f)]['init']();}['initLogger'](){const _0x231e51=a348_0x266501;this[_0x231e51(0xda)]=new logger_1[(_0x231e51(0x116))]({'systemLogger':systemLogger,'apiVersion':this[_0x231e51(0xd2)],'instance':this[_0x231e51(0x112)],'metadataLogId':this[_0x231e51(0xdb)],'timeZone':this['timeZone']});}[a348_0x266501(0x102)](){const _0x3361c7=a348_0x266501;return new source_member_retriever_1[(_0x3361c7(0xd3))]({'apiVersion':this['apiVersion'],'instance':this[_0x3361c7(0x10c)],'logger':this[_0x3361c7(0xda)],'lastRetrieveDate':this['lastRetrieveDate'],'currentRetrieveDate':this[_0x3361c7(0xf5)],'metadataTypes':this[_0x3361c7(0x125)]});}[a348_0x266501(0xdc)](){const _0x4a7730=a348_0x266501;return new source_member_handler_1[(_0x4a7730(0xdf))]({'instance':this[_0x4a7730(0x112)],'apiVersion':this['apiVersion'],'logger':this[_0x4a7730(0xda)],'targetOrgId':this[_0x4a7730(0xe3)]});}[a348_0x266501(0x11d)](){const _0x243e04=a348_0x266501;return new metadata_retriever_1[(_0x243e04(0xe7))]({'instance':this[_0x243e04(0x10c)],'apiVersion':this[_0x243e04(0xd2)],'logger':this['logger'],'metadataTypes':this[_0x243e04(0x125)]});}['getComponentsDeployer'](){const _0x308fe9=a348_0x266501;return new components_deployer_1[(_0x308fe9(0xcf))]({'instance':this[_0x308fe9(0x112)],'logger':this[_0x308fe9(0xda)],'apiVersion':this[_0x308fe9(0xd2)],'targetOrgId':this[_0x308fe9(0xe3)],'trackingSettingId':this[_0x308fe9(0x11b)]});}[a348_0x266501(0xfc)](){const _0x58b52a=a348_0x266501;return{'attributes':{'type':constants_1['FLOSUM_NAMESPACE']+_0x58b52a(0xd0)},'Id':this[_0x58b52a(0x11b)],[constants_1['FLOSUM_NAMESPACE']+_0x58b52a(0xe5)]:this[_0x58b52a(0xeb)],[constants_1['FLOSUM_NAMESPACE']+_0x58b52a(0xcd)]:this[_0x58b52a(0xf5)]};}async[a348_0x266501(0x11e)](){const _0x2e5e79=a348_0x266501,_0x9219b=this[_0x2e5e79(0xfc)](),_0x96713a=new salesforce_1[(_0x2e5e79(0x119))]({'instance':this['flosumInstance'],'objectName':constants_1[_0x2e5e79(0xfb)]+'Tracking_Setting__c','api':this[_0x2e5e79(0xd2)],'allOrNone':![],'externalIdField':'Id'}),_0x211552=await _0x96713a[_0x2e5e79(0x115)]({'records':[_0x9219b]}),_0x1f17ed=_0x211552['at'](0x0);(_0x1f17ed===null||_0x1f17ed===void 0x0?void 0x0:_0x1f17ed[_0x2e5e79(0xf2)])?this[_0x2e5e79(0xda)][_0x2e5e79(0xe8)](_0x2e5e79(0x101)):this[_0x2e5e79(0xda)]['log'](_0x2e5e79(0xd6)+(_0x1f17ed===null||_0x1f17ed===void 0x0?void 0x0:_0x1f17ed[_0x2e5e79(0xfa)]));}async['execute'](){const _0x25cd73=a348_0x266501;await this[_0x25cd73(0x10f)](),this[_0x25cd73(0xf5)]=new Date()[_0x25cd73(0xf1)]();try{await this[_0x25cd73(0xff)](),await this[_0x25cd73(0x113)](),this[_0x25cd73(0xf7)](),this['logger'][_0x25cd73(0xe8)](_0x25cd73(0xf3)+this[_0x25cd73(0xd4)]),this[_0x25cd73(0x11f)][_0x25cd73(0xd8)]=constants_2['LogStatus'][_0x25cd73(0xe1)],this[_0x25cd73(0xeb)]=!![],await this['updateTrackingSetting'](),await this['metadataLogger'][_0x25cd73(0x110)](),await this[_0x25cd73(0xda)][_0x25cd73(0x110)]();const _0x355075=this[_0x25cd73(0x102)](),_0x1f3f71=this[_0x25cd73(0xdc)](),_0xf843ff=this[_0x25cd73(0x11d)](),_0x300207=this[_0x25cd73(0xef)]();await(0x0,promises_1[_0x25cd73(0x124)])(_0x355075,_0x1f3f71,_0xf843ff,_0x300207),this['logger'][_0x25cd73(0xe8)](_0x25cd73(0xce)),this[_0x25cd73(0x11f)][_0x25cd73(0xd8)]=constants_2[_0x25cd73(0x117)]['COMPLETED'];}catch(_0x364383){this[_0x25cd73(0xda)][_0x25cd73(0xfa)]('Tracking\x20components\x20job\x20has\x20been\x20failed'),this[_0x25cd73(0xda)][_0x25cd73(0xfa)](_0x364383['message']),this[_0x25cd73(0x11f)]['status']=constants_2['LogStatus']['EXCEPTION'];}finally{this[_0x25cd73(0xeb)]=![],await this['updateTrackingSetting'](),await this[_0x25cd73(0xda)][_0x25cd73(0x110)](),await this[_0x25cd73(0x11f)]['update']();}}}function a348_0x3729(_0x21d80b,_0x6df07c){const _0x575bc8=a348_0x38fe();return a348_0x3729=function(_0x33d6fc,_0x55104f){_0x33d6fc=_0x33d6fc-0xcc;let _0x38fe3c=_0x575bc8[_0x33d6fc];return _0x38fe3c;},a348_0x3729(_0x21d80b,_0x6df07c);}exports[a348_0x266501(0xee)]=Job,new Job()[a348_0x266501(0x115)]()['then'](()=>process[a348_0x266501(0xe4)](0x0))[a348_0x266501(0xe9)](_0x18496d=>{const _0x398140=a348_0x266501;systemLogger['error'](_0x398140(0x103)+_0x18496d['message']),process[_0x398140(0xe4)](0x1);});