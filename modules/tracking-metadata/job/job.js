const a335_0x1e15b8=a335_0xcc63;(function(_0x5ac5b6,_0x583b18){const _0x448f47=a335_0xcc63,_0x446673=_0x5ac5b6();while(!![]){try{const _0x3fe3a9=-parseInt(_0x448f47(0x1e3))/0x1*(parseInt(_0x448f47(0x1eb))/0x2)+-parseInt(_0x448f47(0x1e5))/0x3*(parseInt(_0x448f47(0x207))/0x4)+-parseInt(_0x448f47(0x229))/0x5*(-parseInt(_0x448f47(0x202))/0x6)+-parseInt(_0x448f47(0x219))/0x7+parseInt(_0x448f47(0x22a))/0x8*(parseInt(_0x448f47(0x1f0))/0x9)+-parseInt(_0x448f47(0x214))/0xa*(parseInt(_0x448f47(0x218))/0xb)+parseInt(_0x448f47(0x212))/0xc;if(_0x3fe3a9===_0x583b18)break;else _0x446673['push'](_0x446673['shift']());}catch(_0x38ae81){_0x446673['push'](_0x446673['shift']());}}}(a335_0x3751,0x7f7f5));const a335_0x3aa8d2=(function(){let _0x5aa8ce=!![];return function(_0x12aeae,_0x4fca13){const _0x3be466=_0x5aa8ce?function(){const _0x4beb29=a335_0xcc63;if(_0x4fca13){const _0x25997a=_0x4fca13[_0x4beb29(0x213)](_0x12aeae,arguments);return _0x4fca13=null,_0x25997a;}}:function(){};return _0x5aa8ce=![],_0x3be466;};}()),a335_0x4641f1=a335_0x3aa8d2(this,function(){const _0x42a7ef=a335_0xcc63;return a335_0x4641f1['toString']()[_0x42a7ef(0x21b)](_0x42a7ef(0x22c))['toString']()[_0x42a7ef(0x22b)](a335_0x4641f1)['search'](_0x42a7ef(0x22c));});function a335_0x3751(){const _0x86e1e=['startDate','1649535XiSuoa','./classes/metadata-logger','jobId','flosumInstance','pipeline','Last_Start_Retrieval__c','700958ZwcGQS','getSourceMemberHandler','initLogger','SourceMemberHandler','timeZone','18LrZhyx','FLOSUM_NAMESPACE','getMetadataRetriever','./classes/logger/logger','create','Tracking\x20components\x20job\x20has\x20been\x20failed','initInstances','stream/promises','update','execute','metadataLogId','minimist','../constants','Job\x20Error:\x20','logger','flosumOrgCredentials','init','lastRetrieveDate','1218SNYdpH','./classes/metadata.retriever','./classes/components.deployer','targetInstance','status','4kNxWWc','__importDefault','__esModule','initMetadataLogger','@flosum/salesforce','trackingSettingId','log','MetadataRetriever','utf-8','SourceMemberRetriever','../../../constants','24392988NtsmUZ','apply','20PHkObR','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','Tracking_Setting__c','then','3528118XYPFLD','6390272QwjWDc','metadataTypes','search','../../../core','Job','Logger','error','getSourceMemberRetriever','fs/promises','getComponentsDeployer','./classes/source-member.handler','success','../../../constants/job','targetOrgCredentials','AuthManager','slice','5690UAwETa','2852648oGJbmt','constructor','(((.+)+)+)+$','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','Tracking\x20components\x20job\x20has\x20been\x20completed','message','createTrackingSettingRecord','jobStorePath','defineProperty','targetOrgId','Is_Processed__c','ComponentsDeployer','MANIFEST_FILENAME','readFile','RestSimpleDeployData','metadataLogger','catch','apiVersion','../../shared/managers/auth.manager','LogStatus','getTime','updateTrackingSetting','default','parse','1gVWiym'];a335_0x3751=function(){return _0x86e1e;};return a335_0x3751();}a335_0x4641f1();'use strict';function a335_0xcc63(_0x13d60d,_0x42035f){const _0x4a2b72=a335_0x3751();return a335_0xcc63=function(_0x4641f1,_0x3aa8d2){_0x4641f1=_0x4641f1-0x1dd;let _0x3751c5=_0x4a2b72[_0x4641f1];return _0x3751c5;},a335_0xcc63(_0x13d60d,_0x42035f);}var __importDefault=this&&this[a335_0x1e15b8(0x208)]||function(_0x4dd475){const _0x1beb8b=a335_0x1e15b8;return _0x4dd475&&_0x4dd475[_0x1beb8b(0x209)]?_0x4dd475:{'default':_0x4dd475};};Object[a335_0x1e15b8(0x232)](exports,a335_0x1e15b8(0x209),{'value':!![]}),exports[a335_0x1e15b8(0x21d)]=void 0x0;const minimist_1=__importDefault(require(a335_0x1e15b8(0x1fb))),core_1=require(a335_0x1e15b8(0x21c)),salesforce_1=require(a335_0x1e15b8(0x20b)),auth_manager_1=require(a335_0x1e15b8(0x1dd)),logger_1=require(a335_0x1e15b8(0x1f3)),promises_1=require(a335_0x1e15b8(0x1f7)),promises_2=require(a335_0x1e15b8(0x221)),path_1=__importDefault(require('path')),metadata_retriever_1=require(a335_0x1e15b8(0x203)),components_deployer_1=require(a335_0x1e15b8(0x204)),source_member_retriever_1=require('./classes/source-member.retriever'),source_member_handler_1=require(a335_0x1e15b8(0x223)),metadata_logger_1=require(a335_0x1e15b8(0x1e6)),job_1=require(a335_0x1e15b8(0x225)),constants_1=require(a335_0x1e15b8(0x211)),constants_2=require(a335_0x1e15b8(0x1fc)),{jobId,jobStorePath}=(0x0,minimist_1[a335_0x1e15b8(0x1e1)])(process['argv'][a335_0x1e15b8(0x228)](0x2)),systemLogger=new core_1[(a335_0x1e15b8(0x21e))](jobId);class Job{constructor(){const _0x13bb60=a335_0x1e15b8;this[_0x13bb60(0x231)]=jobStorePath,this[_0x13bb60(0x1e7)]=jobId;}async['initManifest'](){const _0x192568=a335_0x1e15b8,_0x577a03=path_1[_0x192568(0x1e1)]['join'](this['jobStorePath'],job_1[_0x192568(0x236)]),_0x3fb13c=await(0x0,promises_2[_0x192568(0x237)])(_0x577a03,{'encoding':_0x192568(0x20f)})[_0x192568(0x217)](JSON[_0x192568(0x1e2)])[_0x192568(0x217)](({details:_0x5bcab9})=>_0x5bcab9);await(0x0,promises_2['rm'])(_0x577a03,{'recursive':!![],'force':!![]}),this['apiVersion']=_0x3fb13c['apiVersion'],this[_0x192568(0x1ff)]=_0x3fb13c['flosumOrgCredentials'],this[_0x192568(0x226)]=_0x3fb13c[_0x192568(0x226)],this[_0x192568(0x233)]=_0x3fb13c[_0x192568(0x233)],this[_0x192568(0x20c)]=_0x3fb13c['trackingSettingId'],this[_0x192568(0x201)]=_0x3fb13c[_0x192568(0x201)],this[_0x192568(0x21a)]=_0x3fb13c['metadataTypes'],this['timeZone']=_0x3fb13c[_0x192568(0x1ef)];}async[a335_0x1e15b8(0x1f6)](){const _0x1af92c=a335_0x1e15b8;this[_0x1af92c(0x1e8)]=await salesforce_1['AxiosInstanceUtils'][_0x1af92c(0x1f4)](new auth_manager_1['AuthManager'](this[_0x1af92c(0x1ff)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x1af92c(0x205)]=await salesforce_1['AxiosInstanceUtils'][_0x1af92c(0x1f4)](new auth_manager_1[(_0x1af92c(0x227))](this[_0x1af92c(0x226)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async['initMetadataLogger'](){const _0x146bad=a335_0x1e15b8;this[_0x146bad(0x239)]=new metadata_logger_1['MetadataLogger']({'apiVersion':this[_0x146bad(0x23b)],'instance':this[_0x146bad(0x1e8)],'targetOrgId':this[_0x146bad(0x233)],'trackingSettingId':this['trackingSettingId'],'startDate':this[_0x146bad(0x1e4)]}),this['metadataLogId']=await this['metadataLogger'][_0x146bad(0x200)]();}[a335_0x1e15b8(0x1ed)](){const _0x288c19=a335_0x1e15b8;this[_0x288c19(0x1fe)]=new logger_1['Logger']({'systemLogger':systemLogger,'apiVersion':this['apiVersion'],'instance':this[_0x288c19(0x1e8)],'metadataLogId':this[_0x288c19(0x1fa)],'timeZone':this[_0x288c19(0x1ef)]});}[a335_0x1e15b8(0x220)](){const _0x5918d2=a335_0x1e15b8;return new source_member_retriever_1[(_0x5918d2(0x210))]({'apiVersion':this[_0x5918d2(0x23b)],'instance':this[_0x5918d2(0x205)],'logger':this[_0x5918d2(0x1fe)],'lastRetrieveDate':this[_0x5918d2(0x201)],'currentRetrieveDate':this[_0x5918d2(0x1e4)],'metadataTypes':this['metadataTypes']});}['getSourceMemberHandler'](){const _0x73c3c6=a335_0x1e15b8;return new source_member_handler_1[(_0x73c3c6(0x1ee))]({'instance':this[_0x73c3c6(0x1e8)],'apiVersion':this[_0x73c3c6(0x23b)],'logger':this['logger'],'targetOrgId':this['targetOrgId']});}[a335_0x1e15b8(0x1f2)](){const _0x25dcec=a335_0x1e15b8;return new metadata_retriever_1[(_0x25dcec(0x20e))]({'instance':this[_0x25dcec(0x205)],'apiVersion':this['apiVersion'],'logger':this[_0x25dcec(0x1fe)],'metadataTypes':this[_0x25dcec(0x21a)]});}[a335_0x1e15b8(0x222)](){const _0x2e488b=a335_0x1e15b8;return new components_deployer_1[(_0x2e488b(0x235))]({'instance':this[_0x2e488b(0x1e8)],'logger':this['logger'],'apiVersion':this[_0x2e488b(0x23b)],'targetOrgId':this['targetOrgId'],'trackingSettingId':this[_0x2e488b(0x20c)]});}[a335_0x1e15b8(0x230)](){const _0x518fae=a335_0x1e15b8;return{'attributes':{'type':constants_1[_0x518fae(0x1f1)]+_0x518fae(0x216)},'Id':this[_0x518fae(0x20c)],[constants_1[_0x518fae(0x1f1)]+_0x518fae(0x234)]:![],[constants_1[_0x518fae(0x1f1)]+_0x518fae(0x1ea)]:this[_0x518fae(0x1e4)]};}async[a335_0x1e15b8(0x1e0)](){const _0xa1de23=a335_0x1e15b8,_0x290117=this['createTrackingSettingRecord'](),_0x2c5260=new salesforce_1[(_0xa1de23(0x238))]({'instance':this[_0xa1de23(0x1e8)],'objectName':constants_1['FLOSUM_NAMESPACE']+_0xa1de23(0x216),'api':this['apiVersion'],'allOrNone':![],'externalIdField':'Id'}),_0x1f541c=await _0x2c5260[_0xa1de23(0x1f9)]({'records':[_0x290117]}),_0x189838=_0x1f541c['at'](0x0);(_0x189838===null||_0x189838===void 0x0?void 0x0:_0x189838[_0xa1de23(0x224)])?this[_0xa1de23(0x1fe)][_0xa1de23(0x20d)]('Tracking\x20setting\x20updated'):this[_0xa1de23(0x1fe)][_0xa1de23(0x20d)](_0xa1de23(0x22d)+(_0x189838===null||_0x189838===void 0x0?void 0x0:_0x189838['error']));}async['execute'](){const _0x49fa7f=a335_0x1e15b8;await this['initManifest'](),this[_0x49fa7f(0x1e4)]=new Date()[_0x49fa7f(0x1df)]();try{await this['initInstances'](),await this[_0x49fa7f(0x20a)](),this[_0x49fa7f(0x1ed)](),this[_0x49fa7f(0x1fe)]['log'](_0x49fa7f(0x215)+this[_0x49fa7f(0x1e7)]),this[_0x49fa7f(0x239)]['status']=constants_2['LogStatus']['IN_PROGRESS'],await this[_0x49fa7f(0x239)][_0x49fa7f(0x1f8)](),await this[_0x49fa7f(0x1fe)]['update']();const _0x23cc8e=this[_0x49fa7f(0x220)](),_0x1630d8=this[_0x49fa7f(0x1ec)](),_0x11e765=this[_0x49fa7f(0x1f2)](),_0x48f79e=this['getComponentsDeployer']();await(0x0,promises_1[_0x49fa7f(0x1e9)])(_0x23cc8e,_0x1630d8,_0x11e765,_0x48f79e),this[_0x49fa7f(0x1fe)][_0x49fa7f(0x20d)](_0x49fa7f(0x22e)),this[_0x49fa7f(0x239)][_0x49fa7f(0x206)]=constants_2['LogStatus']['COMPLETED'];}catch(_0x141a1f){this[_0x49fa7f(0x1fe)][_0x49fa7f(0x21f)](_0x49fa7f(0x1f5)),this[_0x49fa7f(0x1fe)][_0x49fa7f(0x21f)](_0x141a1f['message']),this[_0x49fa7f(0x239)][_0x49fa7f(0x206)]=constants_2[_0x49fa7f(0x1de)]['EXCEPTION'];}finally{await this[_0x49fa7f(0x1e0)](),await this[_0x49fa7f(0x1fe)][_0x49fa7f(0x1f8)](),await this[_0x49fa7f(0x239)][_0x49fa7f(0x1f8)]();}}}exports[a335_0x1e15b8(0x21d)]=Job,new Job()[a335_0x1e15b8(0x1f9)]()[a335_0x1e15b8(0x217)](()=>process['exit'](0x0))[a335_0x1e15b8(0x23a)](_0x33ccb8=>{const _0x108cc4=a335_0x1e15b8;systemLogger[_0x108cc4(0x21f)](_0x108cc4(0x1fd)+_0x33ccb8[_0x108cc4(0x22f)]),process['exit'](0x1);});