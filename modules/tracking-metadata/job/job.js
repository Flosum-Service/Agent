function a348_0x2ff2(_0x24b555,_0x49297a){const _0x355ae2=a348_0x2ca6();return a348_0x2ff2=function(_0x97143c,_0x1d31c4){_0x97143c=_0x97143c-0x151;let _0x2ca6e6=_0x355ae2[_0x97143c];return _0x2ca6e6;},a348_0x2ff2(_0x24b555,_0x49297a);}const a348_0x38b408=a348_0x2ff2;(function(_0x1070b8,_0x219702){const _0x48fed7=a348_0x2ff2,_0x52a66e=_0x1070b8();while(!![]){try{const _0x283888=-parseInt(_0x48fed7(0x165))/0x1*(parseInt(_0x48fed7(0x196))/0x2)+-parseInt(_0x48fed7(0x176))/0x3+-parseInt(_0x48fed7(0x18e))/0x4+parseInt(_0x48fed7(0x1b2))/0x5*(parseInt(_0x48fed7(0x17e))/0x6)+-parseInt(_0x48fed7(0x1a2))/0x7*(-parseInt(_0x48fed7(0x168))/0x8)+parseInt(_0x48fed7(0x162))/0x9*(-parseInt(_0x48fed7(0x18a))/0xa)+parseInt(_0x48fed7(0x1ad))/0xb;if(_0x283888===_0x219702)break;else _0x52a66e['push'](_0x52a66e['shift']());}catch(_0x1fa468){_0x52a66e['push'](_0x52a66e['shift']());}}}(a348_0x2ca6,0x77f82));const a348_0x1d31c4=(function(){let _0x13e209=!![];return function(_0x8c001b,_0xb95c10){const _0x1fde73=_0x13e209?function(){const _0x509fbb=a348_0x2ff2;if(_0xb95c10){const _0x1df0f1=_0xb95c10[_0x509fbb(0x19a)](_0x8c001b,arguments);return _0xb95c10=null,_0x1df0f1;}}:function(){};return _0x13e209=![],_0x1fde73;};}()),a348_0x97143c=a348_0x1d31c4(this,function(){const _0x4b25f2=a348_0x2ff2;return a348_0x97143c[_0x4b25f2(0x178)]()['search'](_0x4b25f2(0x156))[_0x4b25f2(0x178)]()[_0x4b25f2(0x17a)](a348_0x97143c)[_0x4b25f2(0x16e)](_0x4b25f2(0x156));});function a348_0x2ca6(){const _0x131bd8=['initManifest','1789328nNgUUb','RestSimpleDeployData','../../../constants/job','initInstances','./classes/logger/logger','./classes/metadata-logger','search','getSourceMemberHandler','error','Is_Processed__c','targetInstance','flosumInstance','./classes/source-member.handler','createTrackingSettingRecord','2417463tFTvUq','argv','toString','MetadataLogger','constructor','then','LogStatus','slice','6uwoItj','create','status','IN_PROGRESS','FLOSUM_NAMESPACE','pipeline','exit','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','./classes/components.deployer','join','../../../core','message','10nvNnXd','startDate','default','flosumOrgCredentials','3482088yrUuLV','utf-8','Tracking_Setting__c','update','defineProperty','targetOrgId','updateTrackingSetting','metadataLogId','12OposKl','init','metadataLogger','isProcessed','apply','timeZone','initMetadataLogger','jobId','Job','../../../constants','readFile','apiVersion','21akOtnA','getComponentsDeployer','lastRetrieveDate','Last_Start_Retrieval__c','./classes/source-member.retriever','SourceMemberRetriever','stream/promises','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','success','AuthManager','../constants','21801043zlEkhy','Logger','catch','jobStorePath','minimist','3066245PQPmkq','log','getMetadataRetriever','execute','targetOrgCredentials','@flosum/salesforce','AxiosInstanceUtils','(((.+)+)+)+$','SourceMemberHandler','MetadataRetriever','path','initLogger','__importDefault','trackingSettingId','getSourceMemberRetriever','EXCEPTION','./classes/metadata.retriever','metadataTypes','logger','1257309XiiONs','ComponentsDeployer','parse','159787QUcaiH','__esModule'];a348_0x2ca6=function(){return _0x131bd8;};return a348_0x2ca6();}a348_0x97143c();'use strict';var __importDefault=this&&this[a348_0x38b408(0x15b)]||function(_0xeb8a15){const _0x446459=a348_0x38b408;return _0xeb8a15&&_0xeb8a15[_0x446459(0x166)]?_0xeb8a15:{'default':_0xeb8a15};};Object[a348_0x38b408(0x192)](exports,a348_0x38b408(0x166),{'value':!![]}),exports['Job']=void 0x0;const minimist_1=__importDefault(require(a348_0x38b408(0x1b1))),core_1=require(a348_0x38b408(0x188)),salesforce_1=require(a348_0x38b408(0x154)),auth_manager_1=require('../../shared/managers/auth.manager'),logger_1=require(a348_0x38b408(0x16c)),promises_1=require(a348_0x38b408(0x1a8)),promises_2=require('fs/promises'),path_1=__importDefault(require(a348_0x38b408(0x159))),metadata_retriever_1=require(a348_0x38b408(0x15f)),components_deployer_1=require(a348_0x38b408(0x186)),source_member_retriever_1=require(a348_0x38b408(0x1a6)),source_member_handler_1=require(a348_0x38b408(0x174)),metadata_logger_1=require(a348_0x38b408(0x16d)),job_1=require(a348_0x38b408(0x16a)),constants_1=require(a348_0x38b408(0x19f)),constants_2=require(a348_0x38b408(0x1ac)),{jobId,jobStorePath}=(0x0,minimist_1['default'])(process[a348_0x38b408(0x177)][a348_0x38b408(0x17d)](0x2)),systemLogger=new core_1['Logger'](jobId);class Job{constructor(){const _0x510ee9=a348_0x38b408;this[_0x510ee9(0x1b0)]=jobStorePath,this[_0x510ee9(0x19d)]=jobId;}async[a348_0x38b408(0x167)](){const _0x25cfc4=a348_0x38b408,_0x13804a=path_1[_0x25cfc4(0x18c)][_0x25cfc4(0x187)](this[_0x25cfc4(0x1b0)],job_1['MANIFEST_FILENAME']),_0x18da44=await(0x0,promises_2[_0x25cfc4(0x1a0)])(_0x13804a,{'encoding':_0x25cfc4(0x18f)})['then'](JSON[_0x25cfc4(0x164)])[_0x25cfc4(0x17b)](({details:_0x627748})=>_0x627748);await(0x0,promises_2['rm'])(_0x13804a,{'recursive':!![],'force':!![]}),this[_0x25cfc4(0x1a1)]=_0x18da44[_0x25cfc4(0x1a1)],this['flosumOrgCredentials']=_0x18da44[_0x25cfc4(0x18d)],this[_0x25cfc4(0x153)]=_0x18da44[_0x25cfc4(0x153)],this[_0x25cfc4(0x193)]=_0x18da44[_0x25cfc4(0x193)],this['trackingSettingId']=_0x18da44[_0x25cfc4(0x15c)],this['lastRetrieveDate']=_0x18da44[_0x25cfc4(0x1a4)],this[_0x25cfc4(0x160)]=_0x18da44[_0x25cfc4(0x160)],this[_0x25cfc4(0x19b)]=_0x18da44['timeZone'];}async[a348_0x38b408(0x16b)](){const _0x515edb=a348_0x38b408;this[_0x515edb(0x173)]=await salesforce_1[_0x515edb(0x155)][_0x515edb(0x17f)](new auth_manager_1[(_0x515edb(0x1ab))](this['flosumOrgCredentials']),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x515edb(0x172)]=await salesforce_1[_0x515edb(0x155)][_0x515edb(0x17f)](new auth_manager_1[(_0x515edb(0x1ab))](this['targetOrgCredentials']),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a348_0x38b408(0x19c)](){const _0x26c120=a348_0x38b408;this[_0x26c120(0x198)]=new metadata_logger_1[(_0x26c120(0x179))]({'apiVersion':this[_0x26c120(0x1a1)],'instance':this['flosumInstance'],'targetOrgId':this[_0x26c120(0x193)],'trackingSettingId':this[_0x26c120(0x15c)],'startDate':this[_0x26c120(0x18b)]}),this[_0x26c120(0x195)]=await this['metadataLogger'][_0x26c120(0x197)]();}[a348_0x38b408(0x15a)](){const _0x304f97=a348_0x38b408;this[_0x304f97(0x161)]=new logger_1[(_0x304f97(0x1ae))]({'systemLogger':systemLogger,'apiVersion':this[_0x304f97(0x1a1)],'instance':this[_0x304f97(0x173)],'metadataLogId':this[_0x304f97(0x195)],'timeZone':this[_0x304f97(0x19b)]});}[a348_0x38b408(0x15d)](){const _0x758599=a348_0x38b408;return new source_member_retriever_1[(_0x758599(0x1a7))]({'apiVersion':this[_0x758599(0x1a1)],'instance':this[_0x758599(0x172)],'logger':this[_0x758599(0x161)],'lastRetrieveDate':this[_0x758599(0x1a4)],'currentRetrieveDate':this[_0x758599(0x18b)],'metadataTypes':this[_0x758599(0x160)]});}[a348_0x38b408(0x16f)](){const _0x404e09=a348_0x38b408;return new source_member_handler_1[(_0x404e09(0x157))]({'instance':this[_0x404e09(0x173)],'apiVersion':this[_0x404e09(0x1a1)],'logger':this[_0x404e09(0x161)],'targetOrgId':this[_0x404e09(0x193)]});}['getMetadataRetriever'](){const _0x4e647e=a348_0x38b408;return new metadata_retriever_1[(_0x4e647e(0x158))]({'instance':this[_0x4e647e(0x172)],'apiVersion':this[_0x4e647e(0x1a1)],'logger':this[_0x4e647e(0x161)],'metadataTypes':this[_0x4e647e(0x160)]});}[a348_0x38b408(0x1a3)](){const _0x4b8584=a348_0x38b408;return new components_deployer_1[(_0x4b8584(0x163))]({'instance':this['flosumInstance'],'logger':this[_0x4b8584(0x161)],'apiVersion':this[_0x4b8584(0x1a1)],'targetOrgId':this['targetOrgId'],'trackingSettingId':this[_0x4b8584(0x15c)]});}[a348_0x38b408(0x175)](){const _0xb24baf=a348_0x38b408;return{'attributes':{'type':constants_1[_0xb24baf(0x182)]+_0xb24baf(0x190)},'Id':this[_0xb24baf(0x15c)],[constants_1[_0xb24baf(0x182)]+_0xb24baf(0x171)]:this[_0xb24baf(0x199)],[constants_1[_0xb24baf(0x182)]+_0xb24baf(0x1a5)]:this[_0xb24baf(0x18b)]};}async[a348_0x38b408(0x194)](){const _0x22026d=a348_0x38b408,_0x3a1b92=this['createTrackingSettingRecord'](),_0x4d37f2=new salesforce_1[(_0x22026d(0x169))]({'instance':this[_0x22026d(0x173)],'objectName':constants_1[_0x22026d(0x182)]+'Tracking_Setting__c','api':this[_0x22026d(0x1a1)],'allOrNone':![],'externalIdField':'Id'}),_0x322601=await _0x4d37f2[_0x22026d(0x152)]({'records':[_0x3a1b92]}),_0x10e31d=_0x322601['at'](0x0);(_0x10e31d===null||_0x10e31d===void 0x0?void 0x0:_0x10e31d[_0x22026d(0x1aa)])?this[_0x22026d(0x161)][_0x22026d(0x1b3)]('Tracking\x20setting\x20updated'):this[_0x22026d(0x161)]['log'](_0x22026d(0x1a9)+(_0x10e31d===null||_0x10e31d===void 0x0?void 0x0:_0x10e31d['error']));}async['execute'](){const _0x1399d6=a348_0x38b408;await this[_0x1399d6(0x167)](),this[_0x1399d6(0x18b)]=new Date()['getTime']();try{await this[_0x1399d6(0x16b)](),await this[_0x1399d6(0x19c)](),this[_0x1399d6(0x15a)](),this[_0x1399d6(0x161)][_0x1399d6(0x1b3)](_0x1399d6(0x185)+this[_0x1399d6(0x19d)]),this['metadataLogger'][_0x1399d6(0x180)]=constants_2['LogStatus'][_0x1399d6(0x181)],this[_0x1399d6(0x199)]=!![],await this['updateTrackingSetting'](),await this[_0x1399d6(0x198)][_0x1399d6(0x191)](),await this[_0x1399d6(0x161)][_0x1399d6(0x191)]();const _0x4b6b06=this[_0x1399d6(0x15d)](),_0x35f340=this['getSourceMemberHandler'](),_0x1086c6=this[_0x1399d6(0x151)](),_0x29eb8d=this['getComponentsDeployer']();await(0x0,promises_1[_0x1399d6(0x183)])(_0x4b6b06,_0x35f340,_0x1086c6,_0x29eb8d),this[_0x1399d6(0x161)][_0x1399d6(0x1b3)]('Tracking\x20components\x20job\x20has\x20been\x20completed'),this['metadataLogger']['status']=constants_2[_0x1399d6(0x17c)]['COMPLETED'];}catch(_0x28f77b){this['logger'][_0x1399d6(0x170)]('Tracking\x20components\x20job\x20has\x20been\x20failed'),this['logger'][_0x1399d6(0x170)](_0x28f77b[_0x1399d6(0x189)]),this[_0x1399d6(0x198)][_0x1399d6(0x180)]=constants_2[_0x1399d6(0x17c)][_0x1399d6(0x15e)];}finally{this[_0x1399d6(0x199)]=![],await this['updateTrackingSetting'](),await this[_0x1399d6(0x161)][_0x1399d6(0x191)](),await this[_0x1399d6(0x198)][_0x1399d6(0x191)]();}}}exports[a348_0x38b408(0x19e)]=Job,new Job()[a348_0x38b408(0x152)]()[a348_0x38b408(0x17b)](()=>process[a348_0x38b408(0x184)](0x0))[a348_0x38b408(0x1af)](_0x5238b9=>{const _0x453de3=a348_0x38b408;systemLogger[_0x453de3(0x170)]('Job\x20Error:\x20'+_0x5238b9[_0x453de3(0x189)]),process[_0x453de3(0x184)](0x1);});