const a303_0x554f2c=a303_0x4177;(function(_0x4d6b71,_0x429093){const _0x30b3b0=a303_0x4177,_0x2477fc=_0x4d6b71();while(!![]){try{const _0x4a1c08=parseInt(_0x30b3b0(0x1e8))/0x1+parseInt(_0x30b3b0(0x1df))/0x2*(parseInt(_0x30b3b0(0x1db))/0x3)+-parseInt(_0x30b3b0(0x200))/0x4+parseInt(_0x30b3b0(0x1d8))/0x5+parseInt(_0x30b3b0(0x1d4))/0x6+-parseInt(_0x30b3b0(0x215))/0x7*(parseInt(_0x30b3b0(0x1f5))/0x8)+-parseInt(_0x30b3b0(0x1de))/0x9*(parseInt(_0x30b3b0(0x21b))/0xa);if(_0x4a1c08===_0x429093)break;else _0x2477fc['push'](_0x2477fc['shift']());}catch(_0x334e97){_0x2477fc['push'](_0x2477fc['shift']());}}}(a303_0x52ac,0xa6afc));const a303_0x4b7ebb=(function(){let _0x3e0072=!![];return function(_0xbc5610,_0x28822c){const _0x512aeb=_0x3e0072?function(){if(_0x28822c){const _0x59314c=_0x28822c['apply'](_0xbc5610,arguments);return _0x28822c=null,_0x59314c;}}:function(){};return _0x3e0072=![],_0x512aeb;};}()),a303_0x274e00=a303_0x4b7ebb(this,function(){const _0x5430a0=a303_0x4177;return a303_0x274e00[_0x5430a0(0x1d3)]()[_0x5430a0(0x1cd)](_0x5430a0(0x22a))['toString']()[_0x5430a0(0x1ce)](a303_0x274e00)['search']('(((.+)+)+)+$');});function a303_0x52ac(){const _0x147dd4=['createTrackingSettingRecord','targetInstance','Job\x20Error:\x20','argv','flosumInstance','Tracking\x20setting\x20updated','pipeline','FLOSUM_NAMESPACE','COMPLETED','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','initInstances','Tracking_Setting__c','../../../constants','lastRetrieveDate','(((.+)+)+)+$','search','constructor','initLogger','./classes/source-member.retriever','then','startDate','toString','1196310NrkpdP','getSourceMemberRetriever','path','Job','2100165JaAoOt','getComponentsDeployer','log','9JERTzR','RestSimpleDeployData','exit','291546mTzfNw','357382kCwJlR','targetOrgCredentials','apiVersion','timeZone','SourceMemberRetriever','message','jobStorePath','AuthManager','status','1192815QEpXbm','MetadataLogger','metadataLogId','Logger','../../shared/managers/auth.manager','EXCEPTION','../../../constants/job','Tracking\x20components\x20job\x20has\x20been\x20completed','metadataTypes','update','getTime','catch','getMetadataRetriever','8wedMfK','minimist','./classes/components.deployer','initManifest','trackingSettingId','initMetadataLogger','readFile','utf-8','flosumOrgCredentials','stream/promises','slice','704060RuyhIb','jobId','success','__esModule','logger','MetadataRetriever','updateTrackingSetting','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','metadataLogger','__importDefault','error','SourceMemberHandler','IN_PROGRESS','Last_Start_Retrieval__c','./classes/metadata.retriever','targetOrgId','AxiosInstanceUtils','@flosum/salesforce','join','execute','LogStatus','7705705VaYBza','Tracking\x20components\x20job\x20has\x20been\x20failed','ComponentsDeployer','default','Is_Processed__c','./classes/metadata-logger','120DHVZTG'];a303_0x52ac=function(){return _0x147dd4;};return a303_0x52ac();}a303_0x274e00();'use strict';var __importDefault=this&&this[a303_0x554f2c(0x209)]||function(_0x58b036){const _0x5c11ec=a303_0x554f2c;return _0x58b036&&_0x58b036[_0x5c11ec(0x203)]?_0x58b036:{'default':_0x58b036};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a303_0x554f2c(0x1d7)]=void 0x0;const minimist_1=__importDefault(require(a303_0x554f2c(0x1f6))),core_1=require('../../../core'),salesforce_1=require(a303_0x554f2c(0x211)),auth_manager_1=require(a303_0x554f2c(0x1ec)),logger_1=require('./classes/logger/logger'),promises_1=require(a303_0x554f2c(0x1fe)),promises_2=require('fs/promises'),path_1=__importDefault(require(a303_0x554f2c(0x1d6))),metadata_retriever_1=require(a303_0x554f2c(0x20e)),components_deployer_1=require(a303_0x554f2c(0x1f7)),source_member_retriever_1=require(a303_0x554f2c(0x1d0)),source_member_handler_1=require('./classes/source-member.handler'),metadata_logger_1=require(a303_0x554f2c(0x21a)),job_1=require(a303_0x554f2c(0x1ee)),constants_1=require(a303_0x554f2c(0x228)),constants_2=require('../constants'),{jobId,jobStorePath}=(0x0,minimist_1[a303_0x554f2c(0x218)])(process[a303_0x554f2c(0x21f)][a303_0x554f2c(0x1ff)](0x2)),systemLogger=new core_1[(a303_0x554f2c(0x1eb))](jobId);class Job{constructor(){const _0x1bd625=a303_0x554f2c;this[_0x1bd625(0x1e5)]=jobStorePath,this['jobId']=jobId;}async['initManifest'](){const _0x52e195=a303_0x554f2c,_0x298f5d=path_1[_0x52e195(0x218)][_0x52e195(0x212)](this[_0x52e195(0x1e5)],job_1['MANIFEST_FILENAME']),_0x31d973=await(0x0,promises_2[_0x52e195(0x1fb)])(_0x298f5d,{'encoding':_0x52e195(0x1fc)})[_0x52e195(0x1d1)](JSON['parse'])[_0x52e195(0x1d1)](({details:_0x247777})=>_0x247777);await(0x0,promises_2['rm'])(_0x298f5d,{'recursive':!![],'force':!![]}),this['apiVersion']=_0x31d973[_0x52e195(0x1e1)],this[_0x52e195(0x1fd)]=_0x31d973[_0x52e195(0x1fd)],this[_0x52e195(0x1e0)]=_0x31d973[_0x52e195(0x1e0)],this[_0x52e195(0x20f)]=_0x31d973['targetOrgId'],this[_0x52e195(0x1f9)]=_0x31d973[_0x52e195(0x1f9)],this['lastRetrieveDate']=_0x31d973[_0x52e195(0x229)],this[_0x52e195(0x1f0)]=_0x31d973[_0x52e195(0x1f0)],this['timeZone']=_0x31d973['timeZone'];}async[a303_0x554f2c(0x226)](){const _0x32b50d=a303_0x554f2c;this[_0x32b50d(0x220)]=await salesforce_1[_0x32b50d(0x210)]['create'](new auth_manager_1[(_0x32b50d(0x1e6))](this[_0x32b50d(0x1fd)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x32b50d(0x21d)]=await salesforce_1[_0x32b50d(0x210)]['create'](new auth_manager_1['AuthManager'](this[_0x32b50d(0x1e0)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a303_0x554f2c(0x1fa)](){const _0x1a0c09=a303_0x554f2c;this[_0x1a0c09(0x208)]=new metadata_logger_1[(_0x1a0c09(0x1e9))]({'apiVersion':this[_0x1a0c09(0x1e1)],'instance':this['flosumInstance'],'targetOrgId':this['targetOrgId'],'trackingSettingId':this[_0x1a0c09(0x1f9)],'startDate':this[_0x1a0c09(0x1d2)]}),this[_0x1a0c09(0x1ea)]=await this[_0x1a0c09(0x208)]['init']();}[a303_0x554f2c(0x1cf)](){const _0x29cb5d=a303_0x554f2c;this[_0x29cb5d(0x204)]=new logger_1[(_0x29cb5d(0x1eb))]({'systemLogger':systemLogger,'apiVersion':this[_0x29cb5d(0x1e1)],'instance':this[_0x29cb5d(0x220)],'metadataLogId':this[_0x29cb5d(0x1ea)],'timeZone':this[_0x29cb5d(0x1e2)]});}[a303_0x554f2c(0x1d5)](){const _0x2f2495=a303_0x554f2c;return new source_member_retriever_1[(_0x2f2495(0x1e3))]({'apiVersion':this['apiVersion'],'instance':this[_0x2f2495(0x21d)],'logger':this[_0x2f2495(0x204)],'lastRetrieveDate':this[_0x2f2495(0x229)],'currentRetrieveDate':this[_0x2f2495(0x1d2)],'metadataTypes':this[_0x2f2495(0x1f0)]});}['getSourceMemberHandler'](){const _0x597495=a303_0x554f2c;return new source_member_handler_1[(_0x597495(0x20b))]({'instance':this[_0x597495(0x220)],'apiVersion':this[_0x597495(0x1e1)],'logger':this[_0x597495(0x204)],'targetOrgId':this['targetOrgId']});}['getMetadataRetriever'](){const _0x69ed1a=a303_0x554f2c;return new metadata_retriever_1[(_0x69ed1a(0x205))]({'instance':this[_0x69ed1a(0x21d)],'apiVersion':this[_0x69ed1a(0x1e1)],'logger':this[_0x69ed1a(0x204)],'metadataTypes':this[_0x69ed1a(0x1f0)]});}[a303_0x554f2c(0x1d9)](){const _0x314f88=a303_0x554f2c;return new components_deployer_1[(_0x314f88(0x217))]({'instance':this[_0x314f88(0x220)],'logger':this[_0x314f88(0x204)],'apiVersion':this[_0x314f88(0x1e1)],'targetOrgId':this[_0x314f88(0x20f)],'trackingSettingId':this[_0x314f88(0x1f9)]});}[a303_0x554f2c(0x21c)](){const _0x296983=a303_0x554f2c;return{'attributes':{'type':constants_1['FLOSUM_NAMESPACE']+_0x296983(0x227)},'Id':this[_0x296983(0x1f9)],[constants_1[_0x296983(0x223)]+_0x296983(0x219)]:![],[constants_1[_0x296983(0x223)]+_0x296983(0x20d)]:this[_0x296983(0x1d2)]};}async[a303_0x554f2c(0x206)](){const _0x3ae3dd=a303_0x554f2c,_0x5278cf=this[_0x3ae3dd(0x21c)](),_0x4483e1=new salesforce_1[(_0x3ae3dd(0x1dc))]({'instance':this[_0x3ae3dd(0x220)],'objectName':constants_1[_0x3ae3dd(0x223)]+_0x3ae3dd(0x227),'api':this[_0x3ae3dd(0x1e1)],'allOrNone':![],'externalIdField':'Id'}),_0x2c900a=await _0x4483e1[_0x3ae3dd(0x213)]({'records':[_0x5278cf]}),_0x48b2f8=_0x2c900a['at'](0x0);(_0x48b2f8===null||_0x48b2f8===void 0x0?void 0x0:_0x48b2f8[_0x3ae3dd(0x202)])?this[_0x3ae3dd(0x204)][_0x3ae3dd(0x1da)](_0x3ae3dd(0x221)):this[_0x3ae3dd(0x204)][_0x3ae3dd(0x1da)](_0x3ae3dd(0x225)+(_0x48b2f8===null||_0x48b2f8===void 0x0?void 0x0:_0x48b2f8['error']));}async[a303_0x554f2c(0x213)](){const _0x253492=a303_0x554f2c;await this[_0x253492(0x1f8)](),this[_0x253492(0x1d2)]=new Date()[_0x253492(0x1f2)]();try{await this[_0x253492(0x226)](),await this[_0x253492(0x1fa)](),this[_0x253492(0x1cf)](),this[_0x253492(0x204)][_0x253492(0x1da)](_0x253492(0x207)+this[_0x253492(0x201)]),this[_0x253492(0x208)][_0x253492(0x1e7)]=constants_2[_0x253492(0x214)][_0x253492(0x20c)],await this['metadataLogger'][_0x253492(0x1f1)](),await this['logger'][_0x253492(0x1f1)]();const _0x3e3124=this[_0x253492(0x1d5)](),_0x48fd09=this['getSourceMemberHandler'](),_0x311a4a=this[_0x253492(0x1f4)](),_0x5b6a05=this[_0x253492(0x1d9)]();await(0x0,promises_1[_0x253492(0x222)])(_0x3e3124,_0x48fd09,_0x311a4a,_0x5b6a05),this[_0x253492(0x204)]['log'](_0x253492(0x1ef)),this['metadataLogger'][_0x253492(0x1e7)]=constants_2[_0x253492(0x214)][_0x253492(0x224)];}catch(_0x25d150){this[_0x253492(0x204)]['error'](_0x253492(0x216)),this['logger'][_0x253492(0x20a)](_0x25d150[_0x253492(0x1e4)]),this[_0x253492(0x208)][_0x253492(0x1e7)]=constants_2[_0x253492(0x214)][_0x253492(0x1ed)];}finally{await this[_0x253492(0x206)](),await this['logger'][_0x253492(0x1f1)](),await this[_0x253492(0x208)]['update']();}}}function a303_0x4177(_0x5872d5,_0x2ae158){const _0x2c3411=a303_0x52ac();return a303_0x4177=function(_0x274e00,_0x4b7ebb){_0x274e00=_0x274e00-0x1cd;let _0x52acc6=_0x2c3411[_0x274e00];return _0x52acc6;},a303_0x4177(_0x5872d5,_0x2ae158);}exports[a303_0x554f2c(0x1d7)]=Job,new Job()[a303_0x554f2c(0x213)]()['then'](()=>process[a303_0x554f2c(0x1dd)](0x0))[a303_0x554f2c(0x1f3)](_0x4eac18=>{const _0x2e7b71=a303_0x554f2c;systemLogger[_0x2e7b71(0x20a)](_0x2e7b71(0x21e)+_0x4eac18['message']),process['exit'](0x1);});