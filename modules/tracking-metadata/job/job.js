const a303_0xcc2c=a303_0x1ed8;(function(_0x4c7409,_0x30c268){const _0x3a3b0e=a303_0x1ed8,_0x305a2d=_0x4c7409();while(!![]){try{const _0x215b36=-parseInt(_0x3a3b0e(0x12f))/0x1+-parseInt(_0x3a3b0e(0x136))/0x2+parseInt(_0x3a3b0e(0x13d))/0x3*(parseInt(_0x3a3b0e(0x172))/0x4)+-parseInt(_0x3a3b0e(0x146))/0x5+-parseInt(_0x3a3b0e(0x15c))/0x6+-parseInt(_0x3a3b0e(0x14c))/0x7+-parseInt(_0x3a3b0e(0x175))/0x8*(-parseInt(_0x3a3b0e(0x150))/0x9);if(_0x215b36===_0x30c268)break;else _0x305a2d['push'](_0x305a2d['shift']());}catch(_0x116651){_0x305a2d['push'](_0x305a2d['shift']());}}}(a303_0x256e,0xae47d));const a303_0x45f3a4=(function(){let _0x66deba=!![];return function(_0x53d154,_0x5ba908){const _0x34b3a7=_0x66deba?function(){const _0x1eeadd=a303_0x1ed8;if(_0x5ba908){const _0x515c42=_0x5ba908[_0x1eeadd(0x13a)](_0x53d154,arguments);return _0x5ba908=null,_0x515c42;}}:function(){};return _0x66deba=![],_0x34b3a7;};}()),a303_0x30a445=a303_0x45f3a4(this,function(){const _0x1a514c=a303_0x1ed8;return a303_0x30a445['toString']()['search'](_0x1a514c(0x16c))[_0x1a514c(0x178)]()[_0x1a514c(0x176)](a303_0x30a445)['search'](_0x1a514c(0x16c));});a303_0x30a445();'use strict';function a303_0x256e(){const _0x9c7e85=['timeZone','(((.+)+)+)+$','flosumInstance','readFile','error','update','join','8rSuUGw','Tracking\x20components\x20job\x20has\x20been\x20failed','initInstances','317416BRjOut','constructor','Last_Start_Retrieval__c','toString','initManifest','initLogger','IN_PROGRESS','../../shared/managers/auth.manager','createTrackingSettingRecord','success','metadataLogId','MetadataLogger','then','./classes/source-member.retriever','targetOrgCredentials','startDate','minimist','default','Tracking\x20components\x20job\x20has\x20been\x20completed','utf-8','./classes/metadata-logger','@flosum/salesforce','247547BZcEQP','Logger','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','argv','../../../constants/job','flosumOrgCredentials','AxiosInstanceUtils','1035428ceMyzO','Job','RestSimpleDeployData','getMetadataRetriever','apply','../../../core','initMetadataLogger','1305111CGbtHt','catch','message','pipeline','EXCEPTION','lastRetrieveDate','Tracking\x20setting\x20updated','stream/promises','targetInstance','6906410AaeJaw','SourceMemberHandler','trackingSettingId','jobId','slice','metadataLogger','4053560ReSmet','create','Is_Processed__c','Job\x20Error:\x20','828QDRdaY','../../../constants','defineProperty','getSourceMemberHandler','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','jobStorePath','metadataTypes','logger','getComponentsDeployer','exit','apiVersion','Tracking_Setting__c','6485292PwUYZy','status','log','__esModule','MetadataRetriever','execute','targetOrgId','FLOSUM_NAMESPACE','./classes/components.deployer','MANIFEST_FILENAME','COMPLETED','./classes/source-member.handler','./classes/metadata.retriever','AuthManager','updateTrackingSetting'];a303_0x256e=function(){return _0x9c7e85;};return a303_0x256e();}var __importDefault=this&&this['__importDefault']||function(_0xb61a56){const _0x80387b=a303_0x1ed8;return _0xb61a56&&_0xb61a56[_0x80387b(0x15f)]?_0xb61a56:{'default':_0xb61a56};};Object[a303_0xcc2c(0x152)](exports,a303_0xcc2c(0x15f),{'value':!![]}),exports[a303_0xcc2c(0x137)]=void 0x0;const minimist_1=__importDefault(require(a303_0xcc2c(0x129))),core_1=require(a303_0xcc2c(0x13b)),salesforce_1=require(a303_0xcc2c(0x12e)),auth_manager_1=require(a303_0xcc2c(0x120)),logger_1=require('./classes/logger/logger'),promises_1=require(a303_0xcc2c(0x144)),promises_2=require('fs/promises'),path_1=__importDefault(require('path')),metadata_retriever_1=require(a303_0xcc2c(0x168)),components_deployer_1=require(a303_0xcc2c(0x164)),source_member_retriever_1=require(a303_0xcc2c(0x126)),source_member_handler_1=require(a303_0xcc2c(0x167)),metadata_logger_1=require(a303_0xcc2c(0x12d)),job_1=require(a303_0xcc2c(0x133)),constants_1=require(a303_0xcc2c(0x151)),constants_2=require('../constants'),{jobId,jobStorePath}=(0x0,minimist_1[a303_0xcc2c(0x12a)])(process[a303_0xcc2c(0x132)][a303_0xcc2c(0x14a)](0x2)),systemLogger=new core_1[(a303_0xcc2c(0x130))](jobId);function a303_0x1ed8(_0x39011c,_0x4aaeb5){const _0xa55941=a303_0x256e();return a303_0x1ed8=function(_0x30a445,_0x45f3a4){_0x30a445=_0x30a445-0x11f;let _0x256eb0=_0xa55941[_0x30a445];return _0x256eb0;},a303_0x1ed8(_0x39011c,_0x4aaeb5);}class Job{constructor(){const _0x334a69=a303_0xcc2c;this[_0x334a69(0x155)]=jobStorePath,this[_0x334a69(0x149)]=jobId;}async[a303_0xcc2c(0x179)](){const _0x438416=a303_0xcc2c,_0x16cfec=path_1[_0x438416(0x12a)][_0x438416(0x171)](this[_0x438416(0x155)],job_1[_0x438416(0x165)]),_0x47c796=await(0x0,promises_2[_0x438416(0x16e)])(_0x16cfec,{'encoding':_0x438416(0x12c)})[_0x438416(0x125)](JSON['parse'])[_0x438416(0x125)](({details:_0x2281af})=>_0x2281af);await(0x0,promises_2['rm'])(_0x16cfec,{'recursive':!![],'force':!![]}),this[_0x438416(0x15a)]=_0x47c796[_0x438416(0x15a)],this[_0x438416(0x134)]=_0x47c796[_0x438416(0x134)],this[_0x438416(0x127)]=_0x47c796[_0x438416(0x127)],this['targetOrgId']=_0x47c796[_0x438416(0x162)],this[_0x438416(0x148)]=_0x47c796[_0x438416(0x148)],this['lastRetrieveDate']=_0x47c796['lastRetrieveDate'],this[_0x438416(0x156)]=_0x47c796['metadataTypes'],this[_0x438416(0x16b)]=_0x47c796[_0x438416(0x16b)];}async['initInstances'](){const _0x32538e=a303_0xcc2c;this['flosumInstance']=await salesforce_1[_0x32538e(0x135)][_0x32538e(0x14d)](new auth_manager_1[(_0x32538e(0x169))](this[_0x32538e(0x134)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this['targetInstance']=await salesforce_1[_0x32538e(0x135)][_0x32538e(0x14d)](new auth_manager_1[(_0x32538e(0x169))](this[_0x32538e(0x127)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a303_0xcc2c(0x13c)](){const _0xd7baed=a303_0xcc2c;this['metadataLogger']=new metadata_logger_1[(_0xd7baed(0x124))]({'apiVersion':this['apiVersion'],'instance':this[_0xd7baed(0x16d)],'targetOrgId':this[_0xd7baed(0x162)],'trackingSettingId':this['trackingSettingId'],'startDate':this[_0xd7baed(0x128)]}),this[_0xd7baed(0x123)]=await this[_0xd7baed(0x14b)]['init']();}[a303_0xcc2c(0x17a)](){const _0x395d41=a303_0xcc2c;this[_0x395d41(0x157)]=new logger_1['Logger']({'systemLogger':systemLogger,'apiVersion':this['apiVersion'],'instance':this[_0x395d41(0x16d)],'metadataLogId':this[_0x395d41(0x123)],'timeZone':this[_0x395d41(0x16b)]});}['getSourceMemberRetriever'](){const _0x140b0f=a303_0xcc2c;return new source_member_retriever_1['SourceMemberRetriever']({'apiVersion':this[_0x140b0f(0x15a)],'instance':this['targetInstance'],'logger':this[_0x140b0f(0x157)],'lastRetrieveDate':this[_0x140b0f(0x142)],'currentRetrieveDate':this[_0x140b0f(0x128)],'metadataTypes':this[_0x140b0f(0x156)]});}[a303_0xcc2c(0x153)](){const _0x4c9527=a303_0xcc2c;return new source_member_handler_1[(_0x4c9527(0x147))]({'instance':this['flosumInstance'],'apiVersion':this[_0x4c9527(0x15a)],'logger':this[_0x4c9527(0x157)],'targetOrgId':this[_0x4c9527(0x162)]});}[a303_0xcc2c(0x139)](){const _0x12a9d1=a303_0xcc2c;return new metadata_retriever_1[(_0x12a9d1(0x160))]({'instance':this[_0x12a9d1(0x145)],'apiVersion':this[_0x12a9d1(0x15a)],'logger':this[_0x12a9d1(0x157)],'metadataTypes':this['metadataTypes']});}[a303_0xcc2c(0x158)](){const _0x206840=a303_0xcc2c;return new components_deployer_1['ComponentsDeployer']({'instance':this[_0x206840(0x16d)],'logger':this[_0x206840(0x157)],'apiVersion':this[_0x206840(0x15a)],'targetOrgId':this[_0x206840(0x162)],'trackingSettingId':this['trackingSettingId']});}[a303_0xcc2c(0x121)](){const _0x5f146c=a303_0xcc2c;return{'attributes':{'type':constants_1['FLOSUM_NAMESPACE']+'Tracking_Setting__c'},'Id':this[_0x5f146c(0x148)],[constants_1[_0x5f146c(0x163)]+_0x5f146c(0x14e)]:![],[constants_1[_0x5f146c(0x163)]+_0x5f146c(0x177)]:this[_0x5f146c(0x128)]};}async[a303_0xcc2c(0x16a)](){const _0x5645cf=a303_0xcc2c,_0x4347a7=this[_0x5645cf(0x121)](),_0x1ecfc3=new salesforce_1[(_0x5645cf(0x138))]({'instance':this[_0x5645cf(0x16d)],'objectName':constants_1[_0x5645cf(0x163)]+_0x5645cf(0x15b),'api':this[_0x5645cf(0x15a)],'allOrNone':![],'externalIdField':'Id'}),_0x5186d0=await _0x1ecfc3['execute']({'records':[_0x4347a7]}),_0x31c347=_0x5186d0['at'](0x0);(_0x31c347===null||_0x31c347===void 0x0?void 0x0:_0x31c347[_0x5645cf(0x122)])?this[_0x5645cf(0x157)]['log'](_0x5645cf(0x143)):this[_0x5645cf(0x157)][_0x5645cf(0x15e)](_0x5645cf(0x154)+(_0x31c347===null||_0x31c347===void 0x0?void 0x0:_0x31c347[_0x5645cf(0x16f)]));}async[a303_0xcc2c(0x161)](){const _0x2b6521=a303_0xcc2c;await this[_0x2b6521(0x179)](),this[_0x2b6521(0x128)]=new Date()['getTime']();try{await this[_0x2b6521(0x174)](),await this[_0x2b6521(0x13c)](),this['initLogger'](),this[_0x2b6521(0x157)][_0x2b6521(0x15e)](_0x2b6521(0x131)+this['jobId']),this[_0x2b6521(0x14b)]['status']=constants_2['LogStatus'][_0x2b6521(0x11f)],await this[_0x2b6521(0x14b)][_0x2b6521(0x170)](),await this[_0x2b6521(0x157)][_0x2b6521(0x170)]();const _0x4b47fe=this['getSourceMemberRetriever'](),_0x491a0a=this[_0x2b6521(0x153)](),_0x5961c2=this['getMetadataRetriever'](),_0x464da3=this[_0x2b6521(0x158)]();await(0x0,promises_1[_0x2b6521(0x140)])(_0x4b47fe,_0x491a0a,_0x5961c2,_0x464da3),this['logger']['log'](_0x2b6521(0x12b)),this[_0x2b6521(0x14b)][_0x2b6521(0x15d)]=constants_2['LogStatus'][_0x2b6521(0x166)];}catch(_0x361b03){this[_0x2b6521(0x157)][_0x2b6521(0x16f)](_0x2b6521(0x173)),this[_0x2b6521(0x157)][_0x2b6521(0x16f)](_0x361b03[_0x2b6521(0x13f)]),this[_0x2b6521(0x14b)][_0x2b6521(0x15d)]=constants_2['LogStatus'][_0x2b6521(0x141)];}finally{await this[_0x2b6521(0x16a)](),await this[_0x2b6521(0x157)][_0x2b6521(0x170)](),await this[_0x2b6521(0x14b)][_0x2b6521(0x170)]();}}}exports[a303_0xcc2c(0x137)]=Job,new Job()['execute']()['then'](()=>process[a303_0xcc2c(0x159)](0x0))[a303_0xcc2c(0x13e)](_0x5c0429=>{const _0x44d8c7=a303_0xcc2c;systemLogger[_0x44d8c7(0x16f)](_0x44d8c7(0x14f)+_0x5c0429[_0x44d8c7(0x13f)]),process[_0x44d8c7(0x159)](0x1);});