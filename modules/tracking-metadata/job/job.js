function a303_0x124a(_0x4eb1dd,_0x47221f){const _0x190d89=a303_0x503a();return a303_0x124a=function(_0x3ac7eb,_0x312587){_0x3ac7eb=_0x3ac7eb-0x6d;let _0x503af3=_0x190d89[_0x3ac7eb];return _0x503af3;},a303_0x124a(_0x4eb1dd,_0x47221f);}const a303_0xb58612=a303_0x124a;(function(_0x29f395,_0x68a134){const _0x253fbd=a303_0x124a,_0x3e9767=_0x29f395();while(!![]){try{const _0x27f381=parseInt(_0x253fbd(0x72))/0x1*(-parseInt(_0x253fbd(0x91))/0x2)+-parseInt(_0x253fbd(0x95))/0x3+parseInt(_0x253fbd(0x8e))/0x4*(parseInt(_0x253fbd(0x83))/0x5)+parseInt(_0x253fbd(0xc6))/0x6*(parseInt(_0x253fbd(0xa9))/0x7)+-parseInt(_0x253fbd(0x9d))/0x8+parseInt(_0x253fbd(0x7f))/0x9*(parseInt(_0x253fbd(0x6e))/0xa)+parseInt(_0x253fbd(0x8a))/0xb;if(_0x27f381===_0x68a134)break;else _0x3e9767['push'](_0x3e9767['shift']());}catch(_0x4d23ff){_0x3e9767['push'](_0x3e9767['shift']());}}}(a303_0x503a,0x21ef9));const a303_0x312587=(function(){let _0x404330=!![];return function(_0x1c3583,_0x2c18e0){const _0x46f21a=_0x404330?function(){const _0x506533=a303_0x124a;if(_0x2c18e0){const _0xd10938=_0x2c18e0[_0x506533(0xbe)](_0x1c3583,arguments);return _0x2c18e0=null,_0xd10938;}}:function(){};return _0x404330=![],_0x46f21a;};}()),a303_0x3ac7eb=a303_0x312587(this,function(){const _0x916a11=a303_0x124a;return a303_0x3ac7eb['toString']()[_0x916a11(0x79)](_0x916a11(0x97))[_0x916a11(0x7a)]()[_0x916a11(0x76)](a303_0x3ac7eb)['search'](_0x916a11(0x97));});a303_0x3ac7eb();'use strict';function a303_0x503a(){const _0x4e139f=['./classes/components.deployer','getSourceMemberHandler','SourceMemberHandler','AxiosInstanceUtils','lastRetrieveDate','./classes/source-member.handler','initLogger','error','175RinfrE','./classes/metadata.retriever','getSourceMemberRetriever','getMetadataRetriever','./classes/logger/logger','__importDefault','updateTrackingSetting','default','join','init','createTrackingSettingRecord','metadataLogId','timeZone','execute','exit','metadataTypes','log','Job\x20Error:\x20','COMPLETED','update','utf-8','apply','stream/promises','flosumInstance','Last_Start_Retrieval__c','defineProperty','success','FLOSUM_NAMESPACE','argv','35604RgMPfv','fs/promises','1905410UNMISJ','status','startDate','../../shared/managers/auth.manager','3PXHbFc','LogStatus','then','pipeline','constructor','SourceMemberRetriever','jobId','search','toString','catch','apiVersion','targetInstance','AuthManager','9DRxUFr','Tracking\x20components\x20job\x20has\x20been\x20completed','jobStorePath','getComponentsDeployer','227010ITsVjL','initInstances','initManifest','readFile','Job','targetOrgId','ComponentsDeployer','2386142dfUnga','targetOrgCredentials','Is_Processed__c','Logger','8YCxryR','flosumOrgCredentials','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','143114lrATMj','metadataLogger','RestSimpleDeployData','trackingSettingId','760887XAOriE','MetadataRetriever','(((.+)+)+)+$','create','Tracking\x20components\x20job\x20has\x20been\x20failed','Tracking\x20setting\x20updated','initMetadataLogger','slice','314528yGsOqV','message','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','logger'];a303_0x503a=function(){return _0x4e139f;};return a303_0x503a();}var __importDefault=this&&this[a303_0xb58612(0xae)]||function(_0x441f6d){return _0x441f6d&&_0x441f6d['__esModule']?_0x441f6d:{'default':_0x441f6d};};Object[a303_0xb58612(0xc2)](exports,'__esModule',{'value':!![]}),exports[a303_0xb58612(0x87)]=void 0x0;const minimist_1=__importDefault(require('minimist')),core_1=require('../../../core'),salesforce_1=require('@flosum/salesforce'),auth_manager_1=require(a303_0xb58612(0x71)),logger_1=require(a303_0xb58612(0xad)),promises_1=require(a303_0xb58612(0xbf)),promises_2=require(a303_0xb58612(0x6d)),path_1=__importDefault(require('path')),metadata_retriever_1=require(a303_0xb58612(0xaa)),components_deployer_1=require(a303_0xb58612(0xa1)),source_member_retriever_1=require('./classes/source-member.retriever'),source_member_handler_1=require(a303_0xb58612(0xa6)),metadata_logger_1=require('./classes/metadata-logger'),job_1=require('../../../constants/job'),constants_1=require('../../../constants'),constants_2=require('../constants'),{jobId,jobStorePath}=(0x0,minimist_1['default'])(process[a303_0xb58612(0xc5)][a303_0xb58612(0x9c)](0x2)),systemLogger=new core_1[(a303_0xb58612(0x8d))](jobId);class Job{constructor(){const _0x2d13cf=a303_0xb58612;this[_0x2d13cf(0x81)]=jobStorePath,this[_0x2d13cf(0x78)]=jobId;}async[a303_0xb58612(0x85)](){const _0x3a50a=a303_0xb58612,_0x8f51c4=path_1[_0x3a50a(0xb0)][_0x3a50a(0xb1)](this[_0x3a50a(0x81)],job_1['MANIFEST_FILENAME']),_0x3bd7b5=await(0x0,promises_2[_0x3a50a(0x86)])(_0x8f51c4,{'encoding':_0x3a50a(0xbd)})[_0x3a50a(0x74)](JSON['parse'])['then'](({details:_0x52acdf})=>_0x52acdf);await(0x0,promises_2['rm'])(_0x8f51c4,{'recursive':!![],'force':!![]}),this[_0x3a50a(0x7c)]=_0x3bd7b5[_0x3a50a(0x7c)],this[_0x3a50a(0x8f)]=_0x3bd7b5['flosumOrgCredentials'],this[_0x3a50a(0x8b)]=_0x3bd7b5[_0x3a50a(0x8b)],this[_0x3a50a(0x88)]=_0x3bd7b5[_0x3a50a(0x88)],this[_0x3a50a(0x94)]=_0x3bd7b5[_0x3a50a(0x94)],this[_0x3a50a(0xa5)]=_0x3bd7b5[_0x3a50a(0xa5)],this[_0x3a50a(0xb8)]=_0x3bd7b5[_0x3a50a(0xb8)],this['timeZone']=_0x3bd7b5[_0x3a50a(0xb5)];}async['initInstances'](){const _0x491b30=a303_0xb58612;this[_0x491b30(0xc0)]=await salesforce_1['AxiosInstanceUtils']['create'](new auth_manager_1[(_0x491b30(0x7e))](this[_0x491b30(0x8f)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x491b30(0x7d)]=await salesforce_1[_0x491b30(0xa4)][_0x491b30(0x98)](new auth_manager_1[(_0x491b30(0x7e))](this[_0x491b30(0x8b)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a303_0xb58612(0x9b)](){const _0x4154f9=a303_0xb58612;this[_0x4154f9(0x92)]=new metadata_logger_1['MetadataLogger']({'apiVersion':this['apiVersion'],'instance':this['flosumInstance'],'targetOrgId':this[_0x4154f9(0x88)],'trackingSettingId':this[_0x4154f9(0x94)],'startDate':this[_0x4154f9(0x70)]}),this[_0x4154f9(0xb4)]=await this[_0x4154f9(0x92)][_0x4154f9(0xb2)]();}[a303_0xb58612(0xa7)](){const _0x5ba949=a303_0xb58612;this[_0x5ba949(0xa0)]=new logger_1[(_0x5ba949(0x8d))]({'systemLogger':systemLogger,'apiVersion':this['apiVersion'],'instance':this['flosumInstance'],'metadataLogId':this[_0x5ba949(0xb4)],'timeZone':this['timeZone']});}[a303_0xb58612(0xab)](){const _0x5ab8ba=a303_0xb58612;return new source_member_retriever_1[(_0x5ab8ba(0x77))]({'apiVersion':this[_0x5ab8ba(0x7c)],'instance':this[_0x5ab8ba(0x7d)],'logger':this['logger'],'lastRetrieveDate':this[_0x5ab8ba(0xa5)],'currentRetrieveDate':this[_0x5ab8ba(0x70)],'metadataTypes':this['metadataTypes']});}[a303_0xb58612(0xa2)](){const _0x271b9a=a303_0xb58612;return new source_member_handler_1[(_0x271b9a(0xa3))]({'instance':this['flosumInstance'],'apiVersion':this[_0x271b9a(0x7c)],'logger':this[_0x271b9a(0xa0)],'targetOrgId':this[_0x271b9a(0x88)]});}['getMetadataRetriever'](){const _0x44a259=a303_0xb58612;return new metadata_retriever_1[(_0x44a259(0x96))]({'instance':this[_0x44a259(0x7d)],'apiVersion':this['apiVersion'],'logger':this[_0x44a259(0xa0)],'metadataTypes':this[_0x44a259(0xb8)]});}['getComponentsDeployer'](){const _0x3baa9e=a303_0xb58612;return new components_deployer_1[(_0x3baa9e(0x89))]({'instance':this[_0x3baa9e(0xc0)],'logger':this[_0x3baa9e(0xa0)],'apiVersion':this[_0x3baa9e(0x7c)],'targetOrgId':this[_0x3baa9e(0x88)],'trackingSettingId':this[_0x3baa9e(0x94)]});}[a303_0xb58612(0xb3)](){const _0x16bd71=a303_0xb58612;return{'attributes':{'type':constants_1[_0x16bd71(0xc4)]+'Tracking_Setting__c'},'Id':this[_0x16bd71(0x94)],[constants_1[_0x16bd71(0xc4)]+_0x16bd71(0x8c)]:![],[constants_1['FLOSUM_NAMESPACE']+_0x16bd71(0xc1)]:this['startDate']};}async[a303_0xb58612(0xaf)](){const _0x2e7002=a303_0xb58612,_0x2a9f02=this[_0x2e7002(0xb3)](),_0xcf4449=new salesforce_1[(_0x2e7002(0x93))]({'instance':this['flosumInstance'],'objectName':constants_1[_0x2e7002(0xc4)]+'Tracking_Setting__c','api':this[_0x2e7002(0x7c)],'allOrNone':![],'externalIdField':'Id'}),_0x5c5110=await _0xcf4449['execute']({'records':[_0x2a9f02]}),_0x2c9203=_0x5c5110['at'](0x0);(_0x2c9203===null||_0x2c9203===void 0x0?void 0x0:_0x2c9203[_0x2e7002(0xc3)])?this[_0x2e7002(0xa0)]['log'](_0x2e7002(0x9a)):this['logger'][_0x2e7002(0xb9)](_0x2e7002(0x9f)+(_0x2c9203===null||_0x2c9203===void 0x0?void 0x0:_0x2c9203[_0x2e7002(0xa8)]));}async[a303_0xb58612(0xb6)](){const _0x2a887d=a303_0xb58612;await this[_0x2a887d(0x85)](),this['startDate']=new Date()['getTime']();try{await this[_0x2a887d(0x84)](),await this[_0x2a887d(0x9b)](),this[_0x2a887d(0xa7)](),this[_0x2a887d(0xa0)][_0x2a887d(0xb9)](_0x2a887d(0x90)+this[_0x2a887d(0x78)]),this[_0x2a887d(0x92)][_0x2a887d(0x6f)]=constants_2[_0x2a887d(0x73)]['IN_PROGRESS'],await this[_0x2a887d(0x92)]['update'](),await this[_0x2a887d(0xa0)][_0x2a887d(0xbc)]();const _0x16ca7a=this[_0x2a887d(0xab)](),_0x5d50c3=this[_0x2a887d(0xa2)](),_0x7f121e=this[_0x2a887d(0xac)](),_0x5169a0=this[_0x2a887d(0x82)]();await(0x0,promises_1[_0x2a887d(0x75)])(_0x16ca7a,_0x5d50c3,_0x7f121e,_0x5169a0),this[_0x2a887d(0xa0)][_0x2a887d(0xb9)](_0x2a887d(0x80)),this['metadataLogger'][_0x2a887d(0x6f)]=constants_2[_0x2a887d(0x73)][_0x2a887d(0xbb)];}catch(_0x46cc2e){this[_0x2a887d(0xa0)][_0x2a887d(0xa8)](_0x2a887d(0x99)),this[_0x2a887d(0xa0)][_0x2a887d(0xa8)](_0x46cc2e['message']),this['metadataLogger']['status']=constants_2[_0x2a887d(0x73)]['EXCEPTION'];}finally{await this[_0x2a887d(0xaf)](),await this[_0x2a887d(0xa0)][_0x2a887d(0xbc)](),await this[_0x2a887d(0x92)][_0x2a887d(0xbc)]();}}}exports['Job']=Job,new Job()[a303_0xb58612(0xb6)]()[a303_0xb58612(0x74)](()=>process[a303_0xb58612(0xb7)](0x0))[a303_0xb58612(0x7b)](_0x25f890=>{const _0x38edc8=a303_0xb58612;systemLogger['error'](_0x38edc8(0xba)+_0x25f890[_0x38edc8(0x9e)]),process['exit'](0x1);});