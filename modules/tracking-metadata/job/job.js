function a303_0x5327(_0x51d635,_0x2f3fdf){const _0x4fdd7e=a303_0x4c01();return a303_0x5327=function(_0x255586,_0x4c467a){_0x255586=_0x255586-0xb1;let _0x4c0177=_0x4fdd7e[_0x255586];return _0x4c0177;},a303_0x5327(_0x51d635,_0x2f3fdf);}const a303_0x3d5471=a303_0x5327;(function(_0x4b6306,_0x1df772){const _0x4893c1=a303_0x5327,_0x6b1877=_0x4b6306();while(!![]){try{const _0x285d8d=-parseInt(_0x4893c1(0xcc))/0x1*(parseInt(_0x4893c1(0xb3))/0x2)+-parseInt(_0x4893c1(0xc1))/0x3+parseInt(_0x4893c1(0xdb))/0x4+-parseInt(_0x4893c1(0xe1))/0x5*(-parseInt(_0x4893c1(0xf9))/0x6)+-parseInt(_0x4893c1(0xeb))/0x7*(parseInt(_0x4893c1(0xf0))/0x8)+parseInt(_0x4893c1(0xfe))/0x9*(parseInt(_0x4893c1(0x108))/0xa)+parseInt(_0x4893c1(0xbe))/0xb;if(_0x285d8d===_0x1df772)break;else _0x6b1877['push'](_0x6b1877['shift']());}catch(_0x609cc5){_0x6b1877['push'](_0x6b1877['shift']());}}}(a303_0x4c01,0x9f427));const a303_0x4c467a=(function(){let _0x1e96da=!![];return function(_0x17b17a,_0x310487){const _0x5df3f6=_0x1e96da?function(){if(_0x310487){const _0x3635e2=_0x310487['apply'](_0x17b17a,arguments);return _0x310487=null,_0x3635e2;}}:function(){};return _0x1e96da=![],_0x5df3f6;};}()),a303_0x255586=a303_0x4c467a(this,function(){const _0x17b4d7=a303_0x5327;return a303_0x255586['toString']()[_0x17b4d7(0xfd)]('(((.+)+)+)+$')['toString']()[_0x17b4d7(0xb9)](a303_0x255586)[_0x17b4d7(0xfd)]('(((.+)+)+)+$');});a303_0x255586();'use strict';function a303_0x4c01(){const _0x3b6c99=['./classes/source-member.retriever','Is_Processed__c','execute','EXCEPTION','826226plemsm','metadataTypes','Tracking\x20setting\x20not\x20updated\x20\x0a\x20','Logger','update','metadataLogger','constructor','jobId','Tracking_Setting__c','AxiosInstanceUtils','getTime','15415565JUrzzK','jobStorePath','SourceMemberRetriever','1455387elTISM','MetadataRetriever','MetadataLogger','lastRetrieveDate','initManifest','./classes/source-member.handler','Tracking\x20components\x20job\x20has\x20been\x20started\x20with\x20id:\x20','COMPLETED','parse','getMetadataRetriever','apiVersion','1XnwrSy','./classes/components.deployer','join','fs/promises','__esModule','../../../core','./classes/metadata.retriever','init','getSourceMemberRetriever','Job','stream/promises','Tracking\x20setting\x20updated','FLOSUM_NAMESPACE','exit','initLogger','2075544nSaqHi','SourceMemberHandler','Last_Start_Retrieval__c','Tracking\x20components\x20job\x20has\x20been\x20completed','then','getSourceMemberHandler','5tilPjj','log','targetInstance','pipeline','metadataLogId','logger','updateTrackingSetting','defineProperty','flosumInstance','ComponentsDeployer','261842hIOoWF','argv','initMetadataLogger','flosumOrgCredentials','status','264pUfDKO','message','../constants','./classes/logger/logger','LogStatus','../../../constants/job','startDate','create','targetOrgId','1440870DvqCrG','slice','getComponentsDeployer','IN_PROGRESS','search','9hngfKs','Job\x20Error:\x20','createTrackingSettingRecord','error','./classes/metadata-logger','timeZone','@flosum/salesforce','MANIFEST_FILENAME','trackingSettingId','targetOrgCredentials','6245210vDlqdj'];a303_0x4c01=function(){return _0x3b6c99;};return a303_0x4c01();}var __importDefault=this&&this['__importDefault']||function(_0x2dfea1){const _0x185c34=a303_0x5327;return _0x2dfea1&&_0x2dfea1[_0x185c34(0xd0)]?_0x2dfea1:{'default':_0x2dfea1};};Object[a303_0x3d5471(0xe8)](exports,a303_0x3d5471(0xd0),{'value':!![]}),exports[a303_0x3d5471(0xd5)]=void 0x0;const minimist_1=__importDefault(require('minimist')),core_1=require(a303_0x3d5471(0xd1)),salesforce_1=require(a303_0x3d5471(0x104)),auth_manager_1=require('../../shared/managers/auth.manager'),logger_1=require(a303_0x3d5471(0xf3)),promises_1=require(a303_0x3d5471(0xd6)),promises_2=require(a303_0x3d5471(0xcf)),path_1=__importDefault(require('path')),metadata_retriever_1=require(a303_0x3d5471(0xd2)),components_deployer_1=require(a303_0x3d5471(0xcd)),source_member_retriever_1=require(a303_0x3d5471(0x109)),source_member_handler_1=require(a303_0x3d5471(0xc6)),metadata_logger_1=require(a303_0x3d5471(0x102)),job_1=require(a303_0x3d5471(0xf5)),constants_1=require('../../../constants'),constants_2=require(a303_0x3d5471(0xf2)),{jobId,jobStorePath}=(0x0,minimist_1['default'])(process[a303_0x3d5471(0xec)][a303_0x3d5471(0xfa)](0x2)),systemLogger=new core_1[(a303_0x3d5471(0xb6))](jobId);class Job{constructor(){const _0xfba0e9=a303_0x3d5471;this[_0xfba0e9(0xbf)]=jobStorePath,this[_0xfba0e9(0xba)]=jobId;}async[a303_0x3d5471(0xc5)](){const _0xb8b2c2=a303_0x3d5471,_0x254075=path_1['default'][_0xb8b2c2(0xce)](this['jobStorePath'],job_1[_0xb8b2c2(0x105)]),_0x2bdf89=await(0x0,promises_2['readFile'])(_0x254075,{'encoding':'utf-8'})['then'](JSON[_0xb8b2c2(0xc9)])['then'](({details:_0x480f10})=>_0x480f10);await(0x0,promises_2['rm'])(_0x254075,{'recursive':!![],'force':!![]}),this['apiVersion']=_0x2bdf89['apiVersion'],this[_0xb8b2c2(0xee)]=_0x2bdf89['flosumOrgCredentials'],this['targetOrgCredentials']=_0x2bdf89['targetOrgCredentials'],this[_0xb8b2c2(0xf8)]=_0x2bdf89[_0xb8b2c2(0xf8)],this[_0xb8b2c2(0x106)]=_0x2bdf89['trackingSettingId'],this[_0xb8b2c2(0xc4)]=_0x2bdf89[_0xb8b2c2(0xc4)],this[_0xb8b2c2(0xb4)]=_0x2bdf89[_0xb8b2c2(0xb4)],this[_0xb8b2c2(0x103)]=_0x2bdf89[_0xb8b2c2(0x103)];}async['initInstances'](){const _0x35edfe=a303_0x3d5471;this[_0x35edfe(0xe9)]=await salesforce_1[_0x35edfe(0xbc)]['create'](new auth_manager_1['AuthManager'](this[_0x35edfe(0xee)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),this[_0x35edfe(0xe3)]=await salesforce_1['AxiosInstanceUtils'][_0x35edfe(0xf7)](new auth_manager_1['AuthManager'](this[_0x35edfe(0x107)]),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a303_0x3d5471(0xed)](){const _0x4f932a=a303_0x3d5471;this[_0x4f932a(0xb8)]=new metadata_logger_1[(_0x4f932a(0xc3))]({'apiVersion':this[_0x4f932a(0xcb)],'instance':this[_0x4f932a(0xe9)],'targetOrgId':this[_0x4f932a(0xf8)],'trackingSettingId':this['trackingSettingId'],'startDate':this['startDate']}),this[_0x4f932a(0xe5)]=await this[_0x4f932a(0xb8)][_0x4f932a(0xd3)]();}[a303_0x3d5471(0xda)](){const _0x6bbd53=a303_0x3d5471;this['logger']=new logger_1[(_0x6bbd53(0xb6))]({'systemLogger':systemLogger,'apiVersion':this[_0x6bbd53(0xcb)],'instance':this[_0x6bbd53(0xe9)],'metadataLogId':this[_0x6bbd53(0xe5)],'timeZone':this[_0x6bbd53(0x103)]});}[a303_0x3d5471(0xd4)](){const _0x28542d=a303_0x3d5471;return new source_member_retriever_1[(_0x28542d(0xc0))]({'apiVersion':this['apiVersion'],'instance':this[_0x28542d(0xe3)],'logger':this['logger'],'lastRetrieveDate':this[_0x28542d(0xc4)],'currentRetrieveDate':this['startDate'],'metadataTypes':this[_0x28542d(0xb4)]});}[a303_0x3d5471(0xe0)](){const _0xad4f2f=a303_0x3d5471;return new source_member_handler_1[(_0xad4f2f(0xdc))]({'instance':this['flosumInstance'],'apiVersion':this[_0xad4f2f(0xcb)],'logger':this['logger'],'targetOrgId':this[_0xad4f2f(0xf8)]});}[a303_0x3d5471(0xca)](){const _0x1c79d6=a303_0x3d5471;return new metadata_retriever_1[(_0x1c79d6(0xc2))]({'instance':this[_0x1c79d6(0xe3)],'apiVersion':this[_0x1c79d6(0xcb)],'logger':this[_0x1c79d6(0xe6)],'metadataTypes':this[_0x1c79d6(0xb4)]});}[a303_0x3d5471(0xfb)](){const _0x2afd7c=a303_0x3d5471;return new components_deployer_1[(_0x2afd7c(0xea))]({'instance':this['flosumInstance'],'logger':this[_0x2afd7c(0xe6)],'apiVersion':this[_0x2afd7c(0xcb)],'targetOrgId':this[_0x2afd7c(0xf8)],'trackingSettingId':this[_0x2afd7c(0x106)]});}[a303_0x3d5471(0x100)](){const _0x4bfe8b=a303_0x3d5471;return{'attributes':{'type':constants_1['FLOSUM_NAMESPACE']+'Tracking_Setting__c'},'Id':this[_0x4bfe8b(0x106)],[constants_1['FLOSUM_NAMESPACE']+_0x4bfe8b(0x10a)]:![],[constants_1[_0x4bfe8b(0xd8)]+_0x4bfe8b(0xdd)]:this[_0x4bfe8b(0xf6)]};}async['updateTrackingSetting'](){const _0x75c584=a303_0x3d5471,_0xa1e22a=this[_0x75c584(0x100)](),_0x4a7010=new salesforce_1['RestSimpleDeployData']({'instance':this['flosumInstance'],'objectName':constants_1['FLOSUM_NAMESPACE']+_0x75c584(0xbb),'api':this[_0x75c584(0xcb)],'allOrNone':![],'externalIdField':'Id'}),_0x521160=await _0x4a7010[_0x75c584(0xb1)]({'records':[_0xa1e22a]}),_0xedce06=_0x521160['at'](0x0);(_0xedce06===null||_0xedce06===void 0x0?void 0x0:_0xedce06['success'])?this[_0x75c584(0xe6)]['log'](_0x75c584(0xd7)):this[_0x75c584(0xe6)][_0x75c584(0xe2)](_0x75c584(0xb5)+(_0xedce06===null||_0xedce06===void 0x0?void 0x0:_0xedce06[_0x75c584(0x101)]));}async[a303_0x3d5471(0xb1)](){const _0x50906a=a303_0x3d5471;await this[_0x50906a(0xc5)](),this['startDate']=new Date()[_0x50906a(0xbd)]();try{await this['initInstances'](),await this[_0x50906a(0xed)](),this[_0x50906a(0xda)](),this[_0x50906a(0xe6)]['log'](_0x50906a(0xc7)+this[_0x50906a(0xba)]),this[_0x50906a(0xb8)][_0x50906a(0xef)]=constants_2[_0x50906a(0xf4)][_0x50906a(0xfc)],await this['metadataLogger']['update'](),await this['logger'][_0x50906a(0xb7)]();const _0x312de1=this[_0x50906a(0xd4)](),_0x1aede6=this['getSourceMemberHandler'](),_0x27cf26=this[_0x50906a(0xca)](),_0x2af8e3=this[_0x50906a(0xfb)]();await(0x0,promises_1[_0x50906a(0xe4)])(_0x312de1,_0x1aede6,_0x27cf26,_0x2af8e3),this[_0x50906a(0xe6)]['log'](_0x50906a(0xde)),this[_0x50906a(0xb8)]['status']=constants_2[_0x50906a(0xf4)][_0x50906a(0xc8)];}catch(_0x4055eb){this['logger']['error']('Tracking\x20components\x20job\x20has\x20been\x20failed'),this[_0x50906a(0xe6)]['error'](_0x4055eb[_0x50906a(0xf1)]),this[_0x50906a(0xb8)][_0x50906a(0xef)]=constants_2[_0x50906a(0xf4)][_0x50906a(0xb2)];}finally{await this[_0x50906a(0xe7)](),await this[_0x50906a(0xe6)][_0x50906a(0xb7)](),await this[_0x50906a(0xb8)]['update']();}}}exports['Job']=Job,new Job()['execute']()[a303_0x3d5471(0xdf)](()=>process[a303_0x3d5471(0xd9)](0x0))['catch'](_0x41c51b=>{const _0x24562d=a303_0x3d5471;systemLogger[_0x24562d(0x101)](_0x24562d(0xff)+_0x41c51b[_0x24562d(0xf1)]),process['exit'](0x1);});