function a187_0x1e2c(){const _0x92b971=['syncDto','name','Unable\x20to\x20synchronize\x20repository\x20\x27','../../../core/errors/too-many-requests.error','Error','catch','logger','getHookLinkFor','getOwnPropertyDescriptor','../../salesforce/errors/salesforce.error','../jobs/git-sync.job','GitSyncJob','gitUrl','gitManager','isIntersects','createHookPayload','__metadata','defineProperty','Unable\x20to\x20synchronize\x20branch\x20\x27','SalesforceLogger2',']\x20due\x20error\x20-\x20','default','branchName','237352MwguXR','find',']\x20[','GitBranchNotFoundError','[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','__esModule','(((.+)+)+)+$','Service','url','Waiting','repositoriesIntersections','function','SyncDirection','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','repositoryName','sleep','checkValidNaming','test','HooksUtils','hasOwnProperty','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','call','../../hooks/hooks.utils','692396WkFIjF','../../salesforce/services/salesforce-sync.service','getBranchRecords','../../salesforce/services/salesforce-logger-v2.service','salesforceService','updateRemoteState','../../shared/git-provider.manager','all','__decorate','__createBinding','object','../../../constants','FlosumSyncJob','length','../../salesforce/dto/flosum-repository-sync.dto','push','toLowerCase','toString','branchId','repoService','syncID','handleRecordSyncError','8HojsHv','metadata','SalesforceService','salesforceSync','getOrCreateRepo','28343fqKbvu','SalesforceError','create','4317600EfdmkZ','[INFO]\x20Start\x20sync\x20job','search','GitProviderManager','FlosumToGit','REPOSITORY_NAME_REGEXP','__setModuleDefault','repoList','typedi','setStatus','__importStar','TooManyRequests','312TzByQb','setLoggerId','5188365mMQaZT','../../../core','45960cDRjfM','SalesforceSyncService','5aUpxsY','sfLogger','Not\x20Synchronized','20030290PSmdvI','BRANCH_NAME_REGEXP','SyncService','decorate','log','send','hooks','getAll','run','[INFO]\x20Repository\x20\x22','\x22\x20does\x20not\x20has\x20the\x20agent\x20webhook.\x20Creating\x20a\x20new\x20one.','getRepoService'];a187_0x1e2c=function(){return _0x92b971;};return a187_0x1e2c();}function a187_0x287b(_0x5860da,_0x1d9109){const _0x1f6561=a187_0x1e2c();return a187_0x287b=function(_0x2ce245,_0x30cd78){_0x2ce245=_0x2ce245-0x1e8;let _0x1e2ca3=_0x1f6561[_0x2ce245];return _0x1e2ca3;},a187_0x287b(_0x5860da,_0x1d9109);}const a187_0x21455e=a187_0x287b;(function(_0x8aaaf,_0x45d774){const _0x58d361=a187_0x287b,_0x5c0e32=_0x8aaaf();while(!![]){try{const _0x16b539=-parseInt(_0x58d361(0x1eb))/0x1+-parseInt(_0x58d361(0x201))/0x2*(parseInt(_0x58d361(0x219))/0x3)+parseInt(_0x58d361(0x241))/0x4*(parseInt(_0x58d361(0x21b))/0x5)+-parseInt(_0x58d361(0x215))/0x6*(-parseInt(_0x58d361(0x206))/0x7)+-parseInt(_0x58d361(0x209))/0x8+-parseInt(_0x58d361(0x217))/0x9+parseInt(_0x58d361(0x21e))/0xa;if(_0x16b539===_0x45d774)break;else _0x5c0e32['push'](_0x5c0e32['shift']());}catch(_0x3005fe){_0x5c0e32['push'](_0x5c0e32['shift']());}}}(a187_0x1e2c,0x6266e));const a187_0x30cd78=(function(){let _0x4eb444=!![];return function(_0x7dd7c9,_0x368ecd){const _0x1006bd=_0x4eb444?function(){if(_0x368ecd){const _0x343df1=_0x368ecd['apply'](_0x7dd7c9,arguments);return _0x368ecd=null,_0x343df1;}}:function(){};return _0x4eb444=![],_0x1006bd;};}()),a187_0x2ce245=a187_0x30cd78(this,function(){const _0x430c23=a187_0x287b;return a187_0x2ce245['toString']()['search'](_0x430c23(0x248))[_0x430c23(0x1fc)]()['constructor'](a187_0x2ce245)[_0x430c23(0x20b)](_0x430c23(0x248));});a187_0x2ce245();'use strict';var __createBinding=this&&this[a187_0x21455e(0x1f4)]||(Object['create']?function(_0x4185e4,_0x446e61,_0x147e3a,_0x374c79){const _0x3a4baf=a187_0x21455e;if(_0x374c79===undefined)_0x374c79=_0x147e3a;Object[_0x3a4baf(0x23b)](_0x4185e4,_0x374c79,{'enumerable':!![],'get':function(){return _0x446e61[_0x147e3a];}});}:function(_0x33f2f3,_0x762ff,_0x41d902,_0x476ff4){if(_0x476ff4===undefined)_0x476ff4=_0x41d902;_0x33f2f3[_0x476ff4]=_0x762ff[_0x41d902];}),__setModuleDefault=this&&this[a187_0x21455e(0x20f)]||(Object[a187_0x21455e(0x208)]?function(_0x59f425,_0x5053b3){const _0x53e2ee=a187_0x21455e;Object['defineProperty'](_0x59f425,_0x53e2ee(0x23f),{'enumerable':!![],'value':_0x5053b3});}:function(_0x588a12,_0x4c3bc6){const _0x4163b6=a187_0x21455e;_0x588a12[_0x4163b6(0x23f)]=_0x4c3bc6;}),__decorate=this&&this[a187_0x21455e(0x1f3)]||function(_0x485888,_0x22556a,_0x281172,_0x5540b0){const _0x34af1a=a187_0x21455e;var _0xd5a51a=arguments[_0x34af1a(0x1f8)],_0x32bef9=_0xd5a51a<0x3?_0x22556a:_0x5540b0===null?_0x5540b0=Object[_0x34af1a(0x232)](_0x22556a,_0x281172):_0x5540b0,_0x64f1d2;if(typeof Reflect==='object'&&typeof Reflect[_0x34af1a(0x221)]===_0x34af1a(0x24d))_0x32bef9=Reflect[_0x34af1a(0x221)](_0x485888,_0x22556a,_0x281172,_0x5540b0);else{for(var _0x3bf390=_0x485888['length']-0x1;_0x3bf390>=0x0;_0x3bf390--)if(_0x64f1d2=_0x485888[_0x3bf390])_0x32bef9=(_0xd5a51a<0x3?_0x64f1d2(_0x32bef9):_0xd5a51a>0x3?_0x64f1d2(_0x22556a,_0x281172,_0x32bef9):_0x64f1d2(_0x22556a,_0x281172))||_0x32bef9;}return _0xd5a51a>0x3&&_0x32bef9&&Object['defineProperty'](_0x22556a,_0x281172,_0x32bef9),_0x32bef9;},__importStar=this&&this[a187_0x21455e(0x213)]||function(_0x4141e6){const _0x543efe=a187_0x21455e;if(_0x4141e6&&_0x4141e6[_0x543efe(0x247)])return _0x4141e6;var _0x1f06f6={};if(_0x4141e6!=null){for(var _0x1dae43 in _0x4141e6)if(_0x1dae43!==_0x543efe(0x23f)&&Object['prototype'][_0x543efe(0x255)][_0x543efe(0x1e9)](_0x4141e6,_0x1dae43))__createBinding(_0x1f06f6,_0x4141e6,_0x1dae43);}return __setModuleDefault(_0x1f06f6,_0x4141e6),_0x1f06f6;},__metadata=this&&this[a187_0x21455e(0x23a)]||function(_0x2e0410,_0x760eae){const _0x63c7f4=a187_0x21455e;if(typeof Reflect===_0x63c7f4(0x1f5)&&typeof Reflect[_0x63c7f4(0x202)]===_0x63c7f4(0x24d))return Reflect['metadata'](_0x2e0410,_0x760eae);},SyncService_1;Object[a187_0x21455e(0x23b)](exports,'__esModule',{'value':!![]}),exports['SyncService']=void 0x0;const constants_1=require(a187_0x21455e(0x1f6)),core_1=require(a187_0x21455e(0x218)),too_many_requests_error_1=require(a187_0x21455e(0x22d)),flosum_repository_sync_dto_1=require(a187_0x21455e(0x1f9)),salesforce_error_1=require(a187_0x21455e(0x233)),salesforce_logger_v2_service_1=require(a187_0x21455e(0x1ee)),salesforce_sync_service_1=require(a187_0x21455e(0x1ec)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_provider_manager_1=require(a187_0x21455e(0x1f1)),utils_1=require('../../shared/utils'),typedi_1=__importStar(require(a187_0x21455e(0x211))),hooks_utils_1=require(a187_0x21455e(0x1ea)),git_branch_not_found_error_1=require('../errors/git-branch-not-found.error'),flosum_sync_job_1=require('../jobs/flosum-sync.job'),git_sync_job_1=require(a187_0x21455e(0x234));let SyncService=SyncService_1=class SyncService{constructor(_0x3c9479,_0x3f2c06,_0x40e038){const _0x3fce31=a187_0x21455e;this[_0x3fce31(0x1ef)]=_0x3c9479,this[_0x3fce31(0x204)]=_0x3f2c06,this[_0x3fce31(0x237)]=_0x40e038,this[_0x3fce31(0x230)]=new core_1['Logger'](SyncService_1[_0x3fce31(0x22b)]),this[_0x3fce31(0x24c)]={},this[_0x3fce31(0x210)]=[];}async[a187_0x21455e(0x200)](_0x50a417,_0x1b523f){const _0x2b6607=a187_0x21455e;if(_0x1b523f instanceof git_branch_not_found_error_1[_0x2b6607(0x244)]){await this[_0x2b6607(0x204)]['setStatus'](_0x50a417,_0x2b6607(0x21d));return;}if(_0x1b523f instanceof too_many_requests_error_1[_0x2b6607(0x214)]){await this[_0x2b6607(0x204)][_0x2b6607(0x212)](_0x50a417,_0x2b6607(0x24b));throw _0x1b523f;}try{await this[_0x2b6607(0x21c)]['log']('[ERROR]\x20Stop\x20sync\x20job\x20for\x20\x27'+_0x50a417['repositoryName']+'\x27\x20['+_0x50a417['branchName']+_0x2b6607(0x23e)+_0x1b523f)[_0x2b6607(0x223)](),await this['salesforceSync'][_0x2b6607(0x1f0)](_0x50a417,{}),await this[_0x2b6607(0x204)][_0x2b6607(0x212)](_0x50a417,_0x2b6607(0x22e));}catch(_0x16933e){if(_0x16933e instanceof salesforce_error_1[_0x2b6607(0x207)])throw _0x16933e;}}async[a187_0x21455e(0x238)](_0x5b85ad){const _0x5bd546=a187_0x21455e;if(_0x5b85ad['repositoryId']){const _0x45c858=_0x5b85ad[_0x5bd546(0x250)][_0x5bd546(0x1fb)](),_0x1d1684=this[_0x5bd546(0x24c)][_0x45c858];if(!_0x1d1684)this['repositoriesIntersections'][_0x45c858]=_0x5b85ad[_0x5bd546(0x250)];else{if(_0x1d1684&&_0x1d1684!==_0x5b85ad[_0x5bd546(0x250)])return await this[_0x5bd546(0x200)](_0x5b85ad,new Error(_0x5bd546(0x22c)+_0x5b85ad[_0x5bd546(0x250)]+_0x5bd546(0x24f)+_0x45c858+'\x27\x20-\x20\x27'+_0x1d1684+'\x27')),!![];}}return![];}async[a187_0x21455e(0x252)](_0x554973){const _0x413304=a187_0x21455e;if(!constants_1[_0x413304(0x20e)][_0x413304(0x253)](_0x554973['repositoryName']))return await this[_0x413304(0x200)](_0x554973,new Error(_0x413304(0x22c)+_0x554973[_0x413304(0x250)]+'\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.')),![];if(!constants_1[_0x413304(0x21f)][_0x413304(0x253)](_0x554973[_0x413304(0x240)]))return await this[_0x413304(0x200)](_0x554973,new Error(_0x413304(0x23c)+_0x554973[_0x413304(0x240)]+'\x27\x20in\x20repository\x20\x27'+_0x554973[_0x413304(0x250)]+_0x413304(0x246))),![];return!![];}async[a187_0x21455e(0x205)](_0x56e3b3,_0x50db50,_0x1e2188){const _0x421816=a187_0x21455e;let _0x34d098=this[_0x421816(0x210)][_0x421816(0x242)](_0x3e0e60=>_0x56e3b3[_0x421816(0x250)]===_0x3e0e60[_0x421816(0x22b)]);!_0x34d098&&(this[_0x421816(0x21c)][_0x421816(0x222)](_0x421816(0x227)+_0x56e3b3[_0x421816(0x250)]+'\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.'),_0x34d098=await this[_0x421816(0x1fe)][_0x421816(0x208)]({'name':_0x56e3b3['repositoryName'],'autoInit':!![],'defaultBranch':_0x56e3b3[_0x421816(0x240)],'private':!![],'createHook':this[_0x421816(0x22a)]['createHooks']}));if(this[_0x421816(0x22a)]['createHooks']){const _0x1bac2d=await _0x34d098[_0x421816(0x224)][_0x421816(0x225)]();!_0x1bac2d[_0x421816(0x242)](_0x244e43=>_0x244e43[_0x421816(0x24a)]===hooks_utils_1[_0x421816(0x254)][_0x421816(0x231)](_0x50db50,_0x1e2188))&&(this[_0x421816(0x21c)][_0x421816(0x222)]('[INFO]\x20Repository\x20\x22'+_0x56e3b3[_0x421816(0x250)]+_0x421816(0x228)),await _0x34d098[_0x421816(0x224)][_0x421816(0x208)](hooks_utils_1[_0x421816(0x254)][_0x421816(0x239)](_0x50db50,_0x34d098[_0x421816(0x224)],_0x1e2188)));}return this['repoList'][_0x421816(0x1fa)](_0x34d098),_0x34d098;}async[a187_0x21455e(0x226)](_0x8f4c14,_0x224c44,_0x282b43,_0x5bef7d){const _0x3471d3=a187_0x21455e;this['salesforceService'][_0x3471d3(0x216)](_0x224c44),this['repoService']=this[_0x3471d3(0x237)][_0x3471d3(0x229)](_0x282b43),this[_0x3471d3(0x21c)]=new salesforce_logger_v2_service_1[(_0x3471d3(0x23d))](_0x224c44,'['+SyncService_1['name']+_0x3471d3(0x243)+_0x282b43['toUpperCase']()+']'),this['syncDto']=_0x8f4c14;try{await this['sfLogger']['log'](_0x3471d3(0x20a))[_0x3471d3(0x223)]();const [_0x1f77ae,_0x5481d7]=await Promise[_0x3471d3(0x1f2)]([this[_0x3471d3(0x204)][_0x3471d3(0x1ed)](),this[_0x3471d3(0x204)]['getRepositoryRecords']()]);this[_0x3471d3(0x210)]=await this[_0x3471d3(0x1fe)]['getAll']();const _0x1584f0=[..._0x5481d7,..._0x1f77ae];this[_0x3471d3(0x230)][_0x3471d3(0x222)]('have\x20to\x20synchronize\x20%d\x20branches',_0x1584f0[_0x3471d3(0x1f8)]);for(const _0x42e2fb of _0x1584f0){this[_0x3471d3(0x230)][_0x3471d3(0x222)]('syncing\x20%s[%s]\x20repository\x20%s[%s]\x20branch',_0x42e2fb[_0x3471d3(0x250)],_0x42e2fb['repositoryId'],_0x42e2fb[_0x3471d3(0x240)],_0x42e2fb[_0x3471d3(0x1fd)]);const _0x317d71=await this[_0x3471d3(0x252)](_0x42e2fb);if(!_0x317d71)continue;const _0x38e9f3=await this[_0x3471d3(0x238)](_0x42e2fb);if(_0x38e9f3)continue;let _0xfcfbe9;try{_0xfcfbe9=await this[_0x3471d3(0x205)](_0x42e2fb,_0x282b43,_0x5bef7d);}catch(_0x336451){await this[_0x3471d3(0x200)](_0x42e2fb,_0x336451 instanceof too_many_requests_error_1[_0x3471d3(0x214)]?_0x336451:new Error(_0x3471d3(0x1e8)+_0x336451));continue;}await this[_0x3471d3(0x21c)][_0x3471d3(0x223)]();if(_0x42e2fb['direction']===flosum_repository_sync_dto_1[_0x3471d3(0x24e)][_0x3471d3(0x20d)]){const _0x1c651c=typedi_1[_0x3471d3(0x23f)]['get'](flosum_sync_job_1[_0x3471d3(0x1f7)]);await _0x1c651c[_0x3471d3(0x226)]({'repository':_0xfcfbe9,'convertToSFDX':_0x8f4c14['convertToSFDX'],'syncRecord':_0x42e2fb,'provider':_0x282b43,'logger':this[_0x3471d3(0x21c)]})[_0x3471d3(0x22f)](_0x39de08=>this[_0x3471d3(0x200)](_0x42e2fb,_0x39de08));}else{const _0x18bd48=typedi_1[_0x3471d3(0x23f)]['get'](git_sync_job_1[_0x3471d3(0x235)]);await _0x18bd48['run']({'repository':_0xfcfbe9,'branch':_0x42e2fb[_0x3471d3(0x240)],'provider':_0x282b43,'repositoryGit':_0xfcfbe9[_0x3471d3(0x236)],'syncRecord':_0x42e2fb,'logger':this[_0x3471d3(0x21c)]})[_0x3471d3(0x22f)](_0x2611b9=>this['handleRecordSyncError'](_0x42e2fb,_0x2611b9));}}}catch(_0x2050d6){this[_0x3471d3(0x230)]['error'](_0x2050d6);_0x2050d6 instanceof too_many_requests_error_1[_0x3471d3(0x214)]?(await this['sfLogger'][_0x3471d3(0x222)](_0x3471d3(0x245))[_0x3471d3(0x223)](),await utils_1[_0x3471d3(0x251)](0x3c*0x3c*0x3e8),this[_0x3471d3(0x226)](_0x8f4c14,_0x224c44,_0x282b43,_0x5bef7d)):await this[_0x3471d3(0x21c)][_0x3471d3(0x222)]('[ERROR]\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20'+_0x2050d6)[_0x3471d3(0x223)]();return;}await this['sfLogger'][_0x3471d3(0x222)]('[INFO]\x20Sync\x20job\x20done.')[_0x3471d3(0x223)](),await this['salesforceSync']['disableSync'](_0x8f4c14[_0x3471d3(0x1ff)])[_0x3471d3(0x22f)](()=>null);}};SyncService=SyncService_1=__decorate([typedi_1[a187_0x21455e(0x249)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_service_1[a187_0x21455e(0x203)],salesforce_sync_service_1[a187_0x21455e(0x21a)],git_provider_manager_1[a187_0x21455e(0x20c)]])],SyncService),exports[a187_0x21455e(0x220)]=SyncService;