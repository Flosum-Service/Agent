const a188_0x27e69e=a188_0x2230;(function(_0x72a76c,_0x268761){const _0x1cb121=a188_0x2230,_0x937007=_0x72a76c();while(!![]){try{const _0x227f4a=-parseInt(_0x1cb121(0x208))/0x1*(parseInt(_0x1cb121(0x1dc))/0x2)+-parseInt(_0x1cb121(0x220))/0x3+-parseInt(_0x1cb121(0x1e3))/0x4*(-parseInt(_0x1cb121(0x211))/0x5)+parseInt(_0x1cb121(0x1de))/0x6+-parseInt(_0x1cb121(0x23f))/0x7+parseInt(_0x1cb121(0x1d3))/0x8+parseInt(_0x1cb121(0x20f))/0x9;if(_0x227f4a===_0x268761)break;else _0x937007['push'](_0x937007['shift']());}catch(_0x1c8d8f){_0x937007['push'](_0x937007['shift']());}}}(a188_0x18d0,0x88429));const a188_0x1df948=(function(){let _0x520555=!![];return function(_0x5dc7af,_0x396e6d){const _0x3c91da=_0x520555?function(){const _0x33c759=a188_0x2230;if(_0x396e6d){const _0x2e78f0=_0x396e6d[_0x33c759(0x1e7)](_0x5dc7af,arguments);return _0x396e6d=null,_0x2e78f0;}}:function(){};return _0x520555=![],_0x3c91da;};}()),a188_0x546cc7=a188_0x1df948(this,function(){const _0x5aebc3=a188_0x2230;return a188_0x546cc7[_0x5aebc3(0x23e)]()['search'](_0x5aebc3(0x21e))[_0x5aebc3(0x23e)]()[_0x5aebc3(0x20c)](a188_0x546cc7)[_0x5aebc3(0x216)](_0x5aebc3(0x21e));});a188_0x546cc7();'use strict';var __createBinding=this&&this[a188_0x27e69e(0x1fc)]||(Object[a188_0x27e69e(0x1fa)]?function(_0x16c8d2,_0x435ca9,_0x3ec926,_0x36ab48){const _0x1213d9=a188_0x27e69e;if(_0x36ab48===undefined)_0x36ab48=_0x3ec926;Object[_0x1213d9(0x1e8)](_0x16c8d2,_0x36ab48,{'enumerable':!![],'get':function(){return _0x435ca9[_0x3ec926];}});}:function(_0x31bc22,_0x1c8d19,_0x3823e5,_0x4c37ad){if(_0x4c37ad===undefined)_0x4c37ad=_0x3823e5;_0x31bc22[_0x4c37ad]=_0x1c8d19[_0x3823e5];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a188_0x27e69e(0x1fa)]?function(_0x144bb4,_0x4af6d6){const _0x1fe5f3=a188_0x27e69e;Object['defineProperty'](_0x144bb4,_0x1fe5f3(0x23b),{'enumerable':!![],'value':_0x4af6d6});}:function(_0x567ae4,_0x269d1f){_0x567ae4['default']=_0x269d1f;}),__decorate=this&&this['__decorate']||function(_0xbcfda,_0x3a22f5,_0x3ee980,_0x2ad839){const _0x4bf7dc=a188_0x27e69e;var _0x5e46bd=arguments[_0x4bf7dc(0x235)],_0x35662b=_0x5e46bd<0x3?_0x3a22f5:_0x2ad839===null?_0x2ad839=Object[_0x4bf7dc(0x228)](_0x3a22f5,_0x3ee980):_0x2ad839,_0x2c51be;if(typeof Reflect===_0x4bf7dc(0x1f6)&&typeof Reflect[_0x4bf7dc(0x22a)]===_0x4bf7dc(0x1f4))_0x35662b=Reflect[_0x4bf7dc(0x22a)](_0xbcfda,_0x3a22f5,_0x3ee980,_0x2ad839);else{for(var _0x41c360=_0xbcfda[_0x4bf7dc(0x235)]-0x1;_0x41c360>=0x0;_0x41c360--)if(_0x2c51be=_0xbcfda[_0x41c360])_0x35662b=(_0x5e46bd<0x3?_0x2c51be(_0x35662b):_0x5e46bd>0x3?_0x2c51be(_0x3a22f5,_0x3ee980,_0x35662b):_0x2c51be(_0x3a22f5,_0x3ee980))||_0x35662b;}return _0x5e46bd>0x3&&_0x35662b&&Object[_0x4bf7dc(0x1e8)](_0x3a22f5,_0x3ee980,_0x35662b),_0x35662b;},__importStar=this&&this[a188_0x27e69e(0x21a)]||function(_0x1ea206){const _0x42051b=a188_0x27e69e;if(_0x1ea206&&_0x1ea206[_0x42051b(0x213)])return _0x1ea206;var _0x49d7ee={};if(_0x1ea206!=null){for(var _0x50edcb in _0x1ea206)if(_0x50edcb!==_0x42051b(0x23b)&&Object[_0x42051b(0x233)]['hasOwnProperty'][_0x42051b(0x1ec)](_0x1ea206,_0x50edcb))__createBinding(_0x49d7ee,_0x1ea206,_0x50edcb);}return __setModuleDefault(_0x49d7ee,_0x1ea206),_0x49d7ee;},__metadata=this&&this[a188_0x27e69e(0x20e)]||function(_0x17cdce,_0x42c8a5){const _0x5a7a2b=a188_0x27e69e;if(typeof Reflect===_0x5a7a2b(0x1f6)&&typeof Reflect[_0x5a7a2b(0x1dd)]==='function')return Reflect[_0x5a7a2b(0x1dd)](_0x17cdce,_0x42c8a5);},SyncService_1;Object[a188_0x27e69e(0x1e8)](exports,'__esModule',{'value':!![]}),exports[a188_0x27e69e(0x1d9)]=void 0x0;const constants_1=require('../../../constants'),core_1=require(a188_0x27e69e(0x1e6)),too_many_requests_error_1=require('../../../core/errors/too-many-requests.error'),flosum_repository_sync_dto_1=require('../../salesforce/dto/flosum-repository-sync.dto'),salesforce_error_1=require(a188_0x27e69e(0x1e2)),salesforce_logger_v2_service_1=require(a188_0x27e69e(0x219)),salesforce_sync_service_1=require(a188_0x27e69e(0x221)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_provider_manager_1=require('../../shared/git-provider.manager'),utils_1=require(a188_0x27e69e(0x234)),typedi_1=__importStar(require(a188_0x27e69e(0x1d1))),hooks_utils_1=require(a188_0x27e69e(0x240)),git_branch_not_found_error_1=require(a188_0x27e69e(0x225)),flosum_sync_job_1=require('../jobs/flosum-sync.job'),git_sync_job_1=require(a188_0x27e69e(0x22e));function a188_0x2230(_0x2f89fc,_0x2dcb20){const _0x14eed2=a188_0x18d0();return a188_0x2230=function(_0x546cc7,_0x1df948){_0x546cc7=_0x546cc7-0x1cf;let _0x18d011=_0x14eed2[_0x546cc7];return _0x18d011;},a188_0x2230(_0x2f89fc,_0x2dcb20);}let SyncService=SyncService_1=class SyncService{constructor(_0x137ba6,_0x260575,_0x36ada7){const _0x583847=a188_0x27e69e;this[_0x583847(0x1f9)]=_0x137ba6,this[_0x583847(0x226)]=_0x260575,this[_0x583847(0x207)]=_0x36ada7,this['logger']=new core_1[(_0x583847(0x209))](SyncService_1[_0x583847(0x224)]),this[_0x583847(0x1f5)]={},this[_0x583847(0x1ff)]=[];}async[a188_0x27e69e(0x1d6)](_0x506eab,_0x483fba){const _0x1cd1b2=a188_0x27e69e;if(_0x483fba instanceof git_branch_not_found_error_1[_0x1cd1b2(0x1d2)]){await this['salesforceSync'][_0x1cd1b2(0x1f0)](_0x506eab,_0x1cd1b2(0x205));return;}if(_0x483fba instanceof too_many_requests_error_1[_0x1cd1b2(0x21c)]){await this[_0x1cd1b2(0x226)][_0x1cd1b2(0x1f0)](_0x506eab,_0x1cd1b2(0x1d7));throw _0x483fba;}try{await this[_0x1cd1b2(0x23a)][_0x1cd1b2(0x1e0)](_0x1cd1b2(0x1eb)+_0x506eab[_0x1cd1b2(0x222)]+'\x27\x20['+_0x506eab[_0x1cd1b2(0x241)]+_0x1cd1b2(0x239)+_0x483fba)[_0x1cd1b2(0x20b)](),await this[_0x1cd1b2(0x226)][_0x1cd1b2(0x203)](_0x506eab,{}),await this[_0x1cd1b2(0x226)][_0x1cd1b2(0x1f0)](_0x506eab,'Error');}catch(_0x4f9fce){if(_0x4f9fce instanceof salesforce_error_1[_0x1cd1b2(0x22f)])throw _0x4f9fce;}}async[a188_0x27e69e(0x223)](_0x54ce18){const _0x566a94=a188_0x27e69e;if(_0x54ce18['repositoryId']){const _0x19c15b=_0x54ce18[_0x566a94(0x222)]['toLowerCase'](),_0x471705=this[_0x566a94(0x1f5)][_0x19c15b];if(!_0x471705)this['repositoriesIntersections'][_0x19c15b]=_0x54ce18[_0x566a94(0x222)];else{if(_0x471705&&_0x471705!==_0x54ce18[_0x566a94(0x222)])return await this[_0x566a94(0x1d6)](_0x54ce18,new Error(_0x566a94(0x1f1)+_0x54ce18[_0x566a94(0x222)]+'\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27'+_0x19c15b+_0x566a94(0x1df)+_0x471705+'\x27')),!![];}}return![];}async['checkValidNaming'](_0x36fc2c){const _0x166860=a188_0x27e69e;if(!constants_1[_0x166860(0x1d5)][_0x166860(0x22c)](_0x36fc2c[_0x166860(0x222)]))return await this[_0x166860(0x1d6)](_0x36fc2c,new Error(_0x166860(0x1f1)+_0x36fc2c[_0x166860(0x222)]+_0x166860(0x1ef))),![];if(!constants_1['BRANCH_NAME_REGEXP']['test'](_0x36fc2c['branchName']))return await this['handleRecordSyncError'](_0x36fc2c,new Error(_0x166860(0x204)+_0x36fc2c['branchName']+_0x166860(0x212)+_0x36fc2c[_0x166860(0x222)]+_0x166860(0x230))),![];return!![];}async[a188_0x27e69e(0x1e9)](_0x55e447,_0x2f1b7c,_0x545e6c){const _0x3e6adf=a188_0x27e69e;let _0x259153=this[_0x3e6adf(0x1ff)]['find'](_0x1479a2=>_0x55e447[_0x3e6adf(0x222)]===_0x1479a2[_0x3e6adf(0x224)]);!_0x259153&&(this[_0x3e6adf(0x23a)][_0x3e6adf(0x1e0)](_0x3e6adf(0x214)+_0x55e447[_0x3e6adf(0x222)]+_0x3e6adf(0x238)),_0x259153=await this[_0x3e6adf(0x1ee)][_0x3e6adf(0x1fa)]({'name':_0x55e447[_0x3e6adf(0x222)],'autoInit':!![],'defaultBranch':_0x55e447[_0x3e6adf(0x241)],'private':!![],'createHook':this['syncDto']['createHooks']}));if(this[_0x3e6adf(0x1cf)][_0x3e6adf(0x201)]){const _0x5a41e1=await _0x259153[_0x3e6adf(0x236)][_0x3e6adf(0x23d)]();!_0x5a41e1[_0x3e6adf(0x1ea)](_0x168f8e=>_0x168f8e['url']===hooks_utils_1[_0x3e6adf(0x1d0)][_0x3e6adf(0x1f7)](_0x2f1b7c,_0x545e6c))&&(this[_0x3e6adf(0x23a)][_0x3e6adf(0x1e0)]('[INFO]\x20Repository\x20\x22'+_0x55e447[_0x3e6adf(0x222)]+_0x3e6adf(0x1fe)),await _0x259153[_0x3e6adf(0x236)][_0x3e6adf(0x1fa)](hooks_utils_1[_0x3e6adf(0x1d0)][_0x3e6adf(0x1f8)](_0x2f1b7c,_0x259153[_0x3e6adf(0x236)],_0x545e6c)));}return this['repoList'][_0x3e6adf(0x1f2)](_0x259153),_0x259153;}async[a188_0x27e69e(0x1d4)](_0x34ef9c,_0x3a272f,_0x28bf1e,_0x149d0b){const _0x4cd525=a188_0x27e69e;this[_0x4cd525(0x1f9)][_0x4cd525(0x232)](_0x3a272f),this['repoService']=this['gitManager'][_0x4cd525(0x1e1)](_0x28bf1e),this[_0x4cd525(0x23a)]=new salesforce_logger_v2_service_1[(_0x4cd525(0x202))](_0x3a272f,'['+SyncService_1[_0x4cd525(0x224)]+']\x20['+_0x28bf1e[_0x4cd525(0x1e5)]()+']'),this['syncDto']=_0x34ef9c;try{await this['sfLogger'][_0x4cd525(0x1e0)](_0x4cd525(0x21d))['send']();const [_0x55f9c5,_0x261018]=await Promise[_0x4cd525(0x231)]([this[_0x4cd525(0x226)][_0x4cd525(0x22d)](),this[_0x4cd525(0x226)][_0x4cd525(0x1ed)]()]);this[_0x4cd525(0x1ff)]=await this[_0x4cd525(0x1ee)][_0x4cd525(0x23d)]();const _0x56d099=[..._0x261018,..._0x55f9c5];this[_0x4cd525(0x200)][_0x4cd525(0x1e0)]('have\x20to\x20synchronize\x20%d\x20branches',_0x56d099[_0x4cd525(0x235)]);for(const _0x142e57 of _0x56d099){this[_0x4cd525(0x200)][_0x4cd525(0x1e0)](_0x4cd525(0x1da),_0x142e57[_0x4cd525(0x222)],_0x142e57[_0x4cd525(0x227)],_0x142e57[_0x4cd525(0x241)],_0x142e57['branchId']);const _0x14b250=await this['checkValidNaming'](_0x142e57);if(!_0x14b250)continue;const _0x4fc663=await this[_0x4cd525(0x223)](_0x142e57);if(_0x4fc663)continue;let _0x47ba1a;try{_0x47ba1a=await this[_0x4cd525(0x1e9)](_0x142e57,_0x28bf1e,_0x149d0b);}catch(_0x3141fd){await this[_0x4cd525(0x1d6)](_0x142e57,_0x3141fd instanceof too_many_requests_error_1[_0x4cd525(0x21c)]?_0x3141fd:new Error(_0x4cd525(0x21f)+_0x3141fd));continue;}await this[_0x4cd525(0x23a)][_0x4cd525(0x20b)]();if(_0x142e57[_0x4cd525(0x21b)]===flosum_repository_sync_dto_1[_0x4cd525(0x20d)][_0x4cd525(0x1db)]){const _0x402139=typedi_1[_0x4cd525(0x23b)][_0x4cd525(0x1e4)](flosum_sync_job_1[_0x4cd525(0x237)]);await _0x402139[_0x4cd525(0x1d4)]({'repository':_0x47ba1a,'convertToSFDX':_0x34ef9c['convertToSFDX'],'syncRecord':_0x142e57,'provider':_0x28bf1e,'logger':this[_0x4cd525(0x23a)]})[_0x4cd525(0x218)](_0x231c7d=>this['handleRecordSyncError'](_0x142e57,_0x231c7d));}else{const _0x2a9433=typedi_1['default'][_0x4cd525(0x1e4)](git_sync_job_1[_0x4cd525(0x1d8)]);await _0x2a9433[_0x4cd525(0x1d4)]({'repository':_0x47ba1a,'branch':_0x142e57['branchName'],'provider':_0x28bf1e,'repositoryGit':_0x47ba1a[_0x4cd525(0x229)],'syncRecord':_0x142e57,'logger':this['sfLogger']})['catch'](_0x45b234=>this[_0x4cd525(0x1d6)](_0x142e57,_0x45b234));}}}catch(_0x15ded0){this['logger']['error'](_0x15ded0);_0x15ded0 instanceof too_many_requests_error_1[_0x4cd525(0x21c)]?(await this[_0x4cd525(0x23a)][_0x4cd525(0x1e0)](_0x4cd525(0x1f3))[_0x4cd525(0x20b)](),await utils_1[_0x4cd525(0x217)](0x3c*0x3c*0x3e8),this[_0x4cd525(0x1d4)](_0x34ef9c,_0x3a272f,_0x28bf1e,_0x149d0b)):await this[_0x4cd525(0x23a)][_0x4cd525(0x1e0)](_0x4cd525(0x1fd)+_0x15ded0)[_0x4cd525(0x20b)]();return;}await this[_0x4cd525(0x23a)][_0x4cd525(0x1e0)](_0x4cd525(0x22b))['send'](),await this[_0x4cd525(0x226)][_0x4cd525(0x206)](_0x34ef9c[_0x4cd525(0x210)])['catch'](()=>null);}};function a188_0x18d0(){const _0x4ce499=['../jobs/git-sync.job','SalesforceError','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','all','setLoggerId','prototype','../../shared/utils','length','hooks','FlosumSyncJob','\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.',']\x20due\x20error\x20-\x20','sfLogger','default','SalesforceSyncService','getAll','toString','2187535hBKhfY','../../hooks/hooks.utils','branchName','syncDto','HooksUtils','typedi','GitBranchNotFoundError','7596096CGMLpy','run','REPOSITORY_NAME_REGEXP','handleRecordSyncError','Waiting','GitSyncJob','SyncService','syncing\x20%s[%s]\x20repository\x20%s[%s]\x20branch','FlosumToGit','6GGMjEm','metadata','1443792eiCHgn','\x27\x20-\x20\x27','log','getRepoService','../../salesforce/errors/salesforce.error','90680xKkuzF','get','toUpperCase','../../../core','apply','defineProperty','getOrCreateRepo','find','[ERROR]\x20Stop\x20sync\x20job\x20for\x20\x27','call','getRepositoryRecords','repoService','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','setStatus','Unable\x20to\x20synchronize\x20repository\x20\x27','push','[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','function','repositoriesIntersections','object','getHookLinkFor','createHookPayload','salesforceService','create','design:paramtypes','__createBinding','[ERROR]\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20','\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.','repoList','logger','createHooks','SalesforceLogger2','updateRemoteState','Unable\x20to\x20synchronize\x20branch\x20\x27','Not\x20Synchronized','disableSync','gitManager','336639UXokKZ','Logger','GitProviderManager','send','constructor','SyncDirection','__metadata','6340158KBIvIb','syncID','15hGgwCu','\x27\x20in\x20repository\x20\x27','__esModule','[INFO]\x20Repository\x20\x22','Service','search','sleep','catch','../../salesforce/services/salesforce-logger-v2.service','__importStar','direction','TooManyRequests','[INFO]\x20Start\x20sync\x20job','(((.+)+)+)+$','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','246219jieMAW','../../salesforce/services/salesforce-sync.service','repositoryName','isIntersects','name','../errors/git-branch-not-found.error','salesforceSync','repositoryId','getOwnPropertyDescriptor','gitUrl','decorate','[INFO]\x20Sync\x20job\x20done.','test','getBranchRecords'];a188_0x18d0=function(){return _0x4ce499;};return a188_0x18d0();}SyncService=SyncService_1=__decorate([typedi_1[a188_0x27e69e(0x215)]({'transient':!![]}),__metadata(a188_0x27e69e(0x1fb),[salesforce_service_1['SalesforceService'],salesforce_sync_service_1[a188_0x27e69e(0x23c)],git_provider_manager_1[a188_0x27e69e(0x20a)]])],SyncService),exports[a188_0x27e69e(0x1d9)]=SyncService;