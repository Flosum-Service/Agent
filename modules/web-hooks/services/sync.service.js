function a187_0x416d(_0x5f4665,_0x567102){const _0x3972e5=a187_0x4d5a();return a187_0x416d=function(_0x20d1a8,_0x1dd71a){_0x20d1a8=_0x20d1a8-0x6c;let _0x4d5a64=_0x3972e5[_0x20d1a8];return _0x4d5a64;},a187_0x416d(_0x5f4665,_0x567102);}const a187_0x45df03=a187_0x416d;(function(_0x1c95eb,_0x573863){const _0x1a90b5=a187_0x416d,_0x179079=_0x1c95eb();while(!![]){try{const _0x58f4fb=-parseInt(_0x1a90b5(0xb5))/0x1*(-parseInt(_0x1a90b5(0xd8))/0x2)+-parseInt(_0x1a90b5(0xb3))/0x3*(parseInt(_0x1a90b5(0xaf))/0x4)+-parseInt(_0x1a90b5(0xd5))/0x5+parseInt(_0x1a90b5(0xcf))/0x6+parseInt(_0x1a90b5(0xdb))/0x7+-parseInt(_0x1a90b5(0x74))/0x8*(parseInt(_0x1a90b5(0x94))/0x9)+-parseInt(_0x1a90b5(0x81))/0xa*(-parseInt(_0x1a90b5(0x9d))/0xb);if(_0x58f4fb===_0x573863)break;else _0x179079['push'](_0x179079['shift']());}catch(_0x2f703b){_0x179079['push'](_0x179079['shift']());}}}(a187_0x4d5a,0x8eb6e));const a187_0x1dd71a=(function(){let _0x1623d0=!![];return function(_0x428cb9,_0x3be7c1){const _0x41b94b=_0x1623d0?function(){const _0x3f4d93=a187_0x416d;if(_0x3be7c1){const _0x3a9725=_0x3be7c1[_0x3f4d93(0x98)](_0x428cb9,arguments);return _0x3be7c1=null,_0x3a9725;}}:function(){};return _0x1623d0=![],_0x41b94b;};}()),a187_0x20d1a8=a187_0x1dd71a(this,function(){const _0x583333=a187_0x416d;return a187_0x20d1a8[_0x583333(0xa8)]()[_0x583333(0xab)](_0x583333(0xb2))[_0x583333(0xa8)]()[_0x583333(0x8c)](a187_0x20d1a8)[_0x583333(0xab)](_0x583333(0xb2));});a187_0x20d1a8();function a187_0x4d5a(){const _0x23890a=['constructor','../../salesforce/services/salesforce-logger-v2.service','syncID','SyncDirection','repositoryName','log','getBranchRecords','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','18kVxsqo','GitProviderManager','../../../core','checkValidNaming','apply','call','../../salesforce/errors/salesforce.error','sleep','SalesforceService','11AUawLc','branchId','create','design:paramtypes','Service','push','getOrCreateRepo','[INFO]\x20Sync\x20job\x20done.','isIntersects','__decorate','gitManager','toString','catch','SalesforceSyncService','search','../../shared/utils','get','createHooks','177240KZYyjg','../../hooks/hooks.utils','\x27\x20in\x20repository\x20\x27','(((.+)+)+)+$','24hKmLWb','syncDto','104qYjonR','[INFO]\x20Start\x20sync\x20job','function','repositoryId','salesforceSync','convertToSFDX','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','direction','../errors/git-branch-not-found.error','HooksUtils','logger','run','salesforceService','../../../core/errors/too-many-requests.error','syncing\x20%s[%s]\x20repository\x20%s[%s]\x20branch','Waiting','[ERROR]\x20Stop\x20sync\x20job\x20for\x20\x27','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','updateRemoteState','repoService','metadata','typedi','Unable\x20to\x20synchronize\x20repository\x20\x27','name','BRANCH_NAME_REGEXP','getHookLinkFor','4135506ZYZORV','repoList','length','TooManyRequests','handleRecordSyncError','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','1959630DCtaXq','object','setStatus','1294VQUtMM','Logger','defineProperty','5432161aKckzi','__importStar','hooks','getAll','error','../../salesforce/dto/flosum-repository-sync.dto','GitBranchNotFoundError','getRepositoryRecords','toUpperCase','test','branchName','[INFO]\x20Repository\x20\x22','2415536cUGtoA','url','sfLogger','__setModuleDefault','find','default','getOwnPropertyDescriptor',']\x20[','setLoggerId','repositoriesIntersections','decorate','__metadata','send','4022860BXulAv','disableSync','../jobs/git-sync.job','toLowerCase','../../salesforce/services/salesforce-sync.service','\x27\x20-\x20\x27','gitUrl','__esModule',']\x20due\x20error\x20-\x20','\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.','hasOwnProperty'];a187_0x4d5a=function(){return _0x23890a;};return a187_0x4d5a();}'use strict';var __createBinding=this&&this['__createBinding']||(Object[a187_0x45df03(0x9f)]?function(_0x3a282d,_0x3cf9c5,_0x2a0b1b,_0x448c3a){if(_0x448c3a===undefined)_0x448c3a=_0x2a0b1b;Object['defineProperty'](_0x3a282d,_0x448c3a,{'enumerable':!![],'get':function(){return _0x3cf9c5[_0x2a0b1b];}});}:function(_0x25f646,_0x1ab420,_0x4cfbce,_0x7c1426){if(_0x7c1426===undefined)_0x7c1426=_0x4cfbce;_0x25f646[_0x7c1426]=_0x1ab420[_0x4cfbce];}),__setModuleDefault=this&&this[a187_0x45df03(0x77)]||(Object[a187_0x45df03(0x9f)]?function(_0x13f85c,_0x47bc60){const _0x29a7a1=a187_0x45df03;Object[_0x29a7a1(0xda)](_0x13f85c,_0x29a7a1(0x79),{'enumerable':!![],'value':_0x47bc60});}:function(_0x51e549,_0x13c8cd){const _0x31040a=a187_0x45df03;_0x51e549[_0x31040a(0x79)]=_0x13c8cd;}),__decorate=this&&this[a187_0x45df03(0xa6)]||function(_0x403c4f,_0x386e65,_0x4e6774,_0x27b612){const _0x4fb774=a187_0x45df03;var _0x2eca2e=arguments[_0x4fb774(0xd1)],_0xf0f1cb=_0x2eca2e<0x3?_0x386e65:_0x27b612===null?_0x27b612=Object[_0x4fb774(0x7a)](_0x386e65,_0x4e6774):_0x27b612,_0x7d682b;if(typeof Reflect==='object'&&typeof Reflect[_0x4fb774(0x7e)]===_0x4fb774(0xb7))_0xf0f1cb=Reflect[_0x4fb774(0x7e)](_0x403c4f,_0x386e65,_0x4e6774,_0x27b612);else{for(var _0x206161=_0x403c4f[_0x4fb774(0xd1)]-0x1;_0x206161>=0x0;_0x206161--)if(_0x7d682b=_0x403c4f[_0x206161])_0xf0f1cb=(_0x2eca2e<0x3?_0x7d682b(_0xf0f1cb):_0x2eca2e>0x3?_0x7d682b(_0x386e65,_0x4e6774,_0xf0f1cb):_0x7d682b(_0x386e65,_0x4e6774))||_0xf0f1cb;}return _0x2eca2e>0x3&&_0xf0f1cb&&Object[_0x4fb774(0xda)](_0x386e65,_0x4e6774,_0xf0f1cb),_0xf0f1cb;},__importStar=this&&this[a187_0x45df03(0xdc)]||function(_0x50b38c){const _0x5871f7=a187_0x45df03;if(_0x50b38c&&_0x50b38c[_0x5871f7(0x88)])return _0x50b38c;var _0x55fdcc={};if(_0x50b38c!=null){for(var _0x1d0b77 in _0x50b38c)if(_0x1d0b77!=='default'&&Object['prototype'][_0x5871f7(0x8b)][_0x5871f7(0x99)](_0x50b38c,_0x1d0b77))__createBinding(_0x55fdcc,_0x50b38c,_0x1d0b77);}return __setModuleDefault(_0x55fdcc,_0x50b38c),_0x55fdcc;},__metadata=this&&this[a187_0x45df03(0x7f)]||function(_0x496368,_0x58e905){const _0x2fba4e=a187_0x45df03;if(typeof Reflect===_0x2fba4e(0xd6)&&typeof Reflect['metadata']===_0x2fba4e(0xb7))return Reflect[_0x2fba4e(0xc9)](_0x496368,_0x58e905);},SyncService_1;Object['defineProperty'](exports,a187_0x45df03(0x88),{'value':!![]}),exports['SyncService']=void 0x0;const constants_1=require('../../../constants'),core_1=require(a187_0x45df03(0x96)),too_many_requests_error_1=require(a187_0x45df03(0xc2)),flosum_repository_sync_dto_1=require(a187_0x45df03(0x6d)),salesforce_error_1=require(a187_0x45df03(0x9a)),salesforce_logger_v2_service_1=require(a187_0x45df03(0x8d)),salesforce_sync_service_1=require(a187_0x45df03(0x85)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_provider_manager_1=require('../../shared/git-provider.manager'),utils_1=require(a187_0x45df03(0xac)),typedi_1=__importStar(require(a187_0x45df03(0xca))),hooks_utils_1=require(a187_0x45df03(0xb0)),git_branch_not_found_error_1=require(a187_0x45df03(0xbd)),flosum_sync_job_1=require('../jobs/flosum-sync.job'),git_sync_job_1=require(a187_0x45df03(0x83));let SyncService=SyncService_1=class SyncService{constructor(_0x21679d,_0x286521,_0x43efbe){const _0x4cfdcf=a187_0x45df03;this[_0x4cfdcf(0xc1)]=_0x21679d,this['salesforceSync']=_0x286521,this[_0x4cfdcf(0xa7)]=_0x43efbe,this[_0x4cfdcf(0xbf)]=new core_1[(_0x4cfdcf(0xd9))](SyncService_1[_0x4cfdcf(0xcc)]),this[_0x4cfdcf(0x7d)]={},this[_0x4cfdcf(0xd0)]=[];}async[a187_0x45df03(0xd3)](_0x303e31,_0x353a60){const _0x111dcf=a187_0x45df03;if(_0x353a60 instanceof git_branch_not_found_error_1[_0x111dcf(0x6e)]){await this['salesforceSync'][_0x111dcf(0xd7)](_0x303e31,'Not\x20Synchronized');return;}if(_0x353a60 instanceof too_many_requests_error_1['TooManyRequests']){await this['salesforceSync'][_0x111dcf(0xd7)](_0x303e31,_0x111dcf(0xc4));throw _0x353a60;}try{await this[_0x111dcf(0x76)][_0x111dcf(0x91)](_0x111dcf(0xc5)+_0x303e31[_0x111dcf(0x90)]+'\x27\x20['+_0x303e31[_0x111dcf(0x72)]+_0x111dcf(0x89)+_0x353a60)[_0x111dcf(0x80)](),await this[_0x111dcf(0xb9)][_0x111dcf(0xc7)](_0x303e31,{}),await this[_0x111dcf(0xb9)][_0x111dcf(0xd7)](_0x303e31,'Error');}catch(_0x424ae9){if(_0x424ae9 instanceof salesforce_error_1['SalesforceError'])throw _0x424ae9;}}async[a187_0x45df03(0xa5)](_0x13a695){const _0x5d8d5a=a187_0x45df03;if(_0x13a695['repositoryId']){const _0x272948=_0x13a695[_0x5d8d5a(0x90)][_0x5d8d5a(0x84)](),_0x3a5c1e=this[_0x5d8d5a(0x7d)][_0x272948];if(!_0x3a5c1e)this[_0x5d8d5a(0x7d)][_0x272948]=_0x13a695[_0x5d8d5a(0x90)];else{if(_0x3a5c1e&&_0x3a5c1e!==_0x13a695[_0x5d8d5a(0x90)])return await this['handleRecordSyncError'](_0x13a695,new Error('Unable\x20to\x20synchronize\x20repository\x20\x27'+_0x13a695['repositoryName']+_0x5d8d5a(0xd4)+_0x272948+_0x5d8d5a(0x86)+_0x3a5c1e+'\x27')),!![];}}return![];}async[a187_0x45df03(0x97)](_0x5e7d80){const _0x247214=a187_0x45df03;if(!constants_1['REPOSITORY_NAME_REGEXP'][_0x247214(0x71)](_0x5e7d80[_0x247214(0x90)]))return await this[_0x247214(0xd3)](_0x5e7d80,new Error(_0x247214(0xcb)+_0x5e7d80[_0x247214(0x90)]+_0x247214(0x93))),![];if(!constants_1[_0x247214(0xcd)][_0x247214(0x71)](_0x5e7d80[_0x247214(0x72)]))return await this[_0x247214(0xd3)](_0x5e7d80,new Error('Unable\x20to\x20synchronize\x20branch\x20\x27'+_0x5e7d80[_0x247214(0x72)]+_0x247214(0xb1)+_0x5e7d80[_0x247214(0x90)]+_0x247214(0xbb))),![];return!![];}async[a187_0x45df03(0xa3)](_0x29c54e,_0x598dff,_0x570ed6){const _0x150393=a187_0x45df03;let _0xe93a86=this[_0x150393(0xd0)][_0x150393(0x78)](_0x16769a=>_0x29c54e[_0x150393(0x90)]===_0x16769a[_0x150393(0xcc)]);!_0xe93a86&&(this[_0x150393(0x76)][_0x150393(0x91)]('[INFO]\x20Repository\x20\x22'+_0x29c54e[_0x150393(0x90)]+_0x150393(0x8a)),_0xe93a86=await this[_0x150393(0xc8)][_0x150393(0x9f)]({'name':_0x29c54e[_0x150393(0x90)],'autoInit':!![],'defaultBranch':_0x29c54e[_0x150393(0x72)],'private':!![],'createHook':this[_0x150393(0xb4)][_0x150393(0xae)]}));if(this[_0x150393(0xb4)][_0x150393(0xae)]){const _0x17289=await _0xe93a86[_0x150393(0xdd)][_0x150393(0xde)]();!_0x17289[_0x150393(0x78)](_0x2ae00b=>_0x2ae00b[_0x150393(0x75)]===hooks_utils_1[_0x150393(0xbe)][_0x150393(0xce)](_0x598dff,_0x570ed6))&&(this[_0x150393(0x76)]['log'](_0x150393(0x73)+_0x29c54e[_0x150393(0x90)]+'\x22\x20does\x20not\x20has\x20the\x20agent\x20webhook.\x20Creating\x20a\x20new\x20one.'),await _0xe93a86[_0x150393(0xdd)][_0x150393(0x9f)](hooks_utils_1[_0x150393(0xbe)]['createHookPayload'](_0x598dff,_0xe93a86[_0x150393(0xdd)],_0x570ed6)));}return this[_0x150393(0xd0)][_0x150393(0xa2)](_0xe93a86),_0xe93a86;}async['run'](_0x6cf13a,_0x1a3bad,_0x22d901,_0x4d08cd){const _0x2d98ed=a187_0x45df03;this[_0x2d98ed(0xc1)][_0x2d98ed(0x7c)](_0x1a3bad),this[_0x2d98ed(0xc8)]=this[_0x2d98ed(0xa7)]['getRepoService'](_0x22d901),this[_0x2d98ed(0x76)]=new salesforce_logger_v2_service_1['SalesforceLogger2'](_0x1a3bad,'['+SyncService_1[_0x2d98ed(0xcc)]+_0x2d98ed(0x7b)+_0x22d901[_0x2d98ed(0x70)]()+']'),this[_0x2d98ed(0xb4)]=_0x6cf13a;try{await this[_0x2d98ed(0x76)][_0x2d98ed(0x91)](_0x2d98ed(0xb6))['send']();const [_0x14ce7d,_0x59d7fb]=await Promise['all']([this['salesforceSync'][_0x2d98ed(0x92)](),this[_0x2d98ed(0xb9)][_0x2d98ed(0x6f)]()]);this[_0x2d98ed(0xd0)]=await this[_0x2d98ed(0xc8)][_0x2d98ed(0xde)]();const _0x5063d2=[..._0x59d7fb,..._0x14ce7d];this[_0x2d98ed(0xbf)][_0x2d98ed(0x91)]('have\x20to\x20synchronize\x20%d\x20branches',_0x5063d2[_0x2d98ed(0xd1)]);for(const _0x29513f of _0x5063d2){this[_0x2d98ed(0xbf)][_0x2d98ed(0x91)](_0x2d98ed(0xc3),_0x29513f[_0x2d98ed(0x90)],_0x29513f[_0x2d98ed(0xb8)],_0x29513f[_0x2d98ed(0x72)],_0x29513f[_0x2d98ed(0x9e)]);const _0x5c15ac=await this['checkValidNaming'](_0x29513f);if(!_0x5c15ac)continue;const _0x42a9e9=await this[_0x2d98ed(0xa5)](_0x29513f);if(_0x42a9e9)continue;let _0x1d4074;try{_0x1d4074=await this[_0x2d98ed(0xa3)](_0x29513f,_0x22d901,_0x4d08cd);}catch(_0x3e082d){await this[_0x2d98ed(0xd3)](_0x29513f,_0x3e082d instanceof too_many_requests_error_1[_0x2d98ed(0xd2)]?_0x3e082d:new Error(_0x2d98ed(0xc6)+_0x3e082d));continue;}await this[_0x2d98ed(0x76)]['send']();if(_0x29513f[_0x2d98ed(0xbc)]===flosum_repository_sync_dto_1[_0x2d98ed(0x8f)]['FlosumToGit']){const _0x3b7268=typedi_1[_0x2d98ed(0x79)]['get'](flosum_sync_job_1['FlosumSyncJob']);await _0x3b7268['run']({'repository':_0x1d4074,'convertToSFDX':_0x6cf13a[_0x2d98ed(0xba)],'syncRecord':_0x29513f,'provider':_0x22d901,'logger':this[_0x2d98ed(0x76)]})[_0x2d98ed(0xa9)](_0x6f5f4a=>this[_0x2d98ed(0xd3)](_0x29513f,_0x6f5f4a));}else{const _0x3446a3=typedi_1[_0x2d98ed(0x79)][_0x2d98ed(0xad)](git_sync_job_1['GitSyncJob']);await _0x3446a3[_0x2d98ed(0xc0)]({'repository':_0x1d4074,'branch':_0x29513f[_0x2d98ed(0x72)],'provider':_0x22d901,'repositoryGit':_0x1d4074[_0x2d98ed(0x87)],'syncRecord':_0x29513f,'logger':this[_0x2d98ed(0x76)]})[_0x2d98ed(0xa9)](_0x506b9b=>this[_0x2d98ed(0xd3)](_0x29513f,_0x506b9b));}}}catch(_0x1b31ec){this[_0x2d98ed(0xbf)][_0x2d98ed(0x6c)](_0x1b31ec);_0x1b31ec instanceof too_many_requests_error_1['TooManyRequests']?(await this[_0x2d98ed(0x76)]['log']('[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.')[_0x2d98ed(0x80)](),await utils_1[_0x2d98ed(0x9b)](0x3c*0x3c*0x3e8),this[_0x2d98ed(0xc0)](_0x6cf13a,_0x1a3bad,_0x22d901,_0x4d08cd)):await this[_0x2d98ed(0x76)][_0x2d98ed(0x91)]('[ERROR]\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20'+_0x1b31ec)['send']();return;}await this['sfLogger'][_0x2d98ed(0x91)](_0x2d98ed(0xa4))[_0x2d98ed(0x80)](),await this[_0x2d98ed(0xb9)][_0x2d98ed(0x82)](_0x6cf13a[_0x2d98ed(0x8e)])[_0x2d98ed(0xa9)](()=>null);}};SyncService=SyncService_1=__decorate([typedi_1[a187_0x45df03(0xa1)]({'transient':!![]}),__metadata(a187_0x45df03(0xa0),[salesforce_service_1[a187_0x45df03(0x9c)],salesforce_sync_service_1[a187_0x45df03(0xaa)],git_provider_manager_1[a187_0x45df03(0x95)]])],SyncService),exports['SyncService']=SyncService;