const a186_0x569505=a186_0x1b00;(function(_0x3112e4,_0x3e17ca){const _0x1bd526=a186_0x1b00,_0x38d560=_0x3112e4();while(!![]){try{const _0x44f20e=parseInt(_0x1bd526(0x1d5))/0x1+-parseInt(_0x1bd526(0x1a9))/0x2*(parseInt(_0x1bd526(0x1ba))/0x3)+-parseInt(_0x1bd526(0x1e7))/0x4+-parseInt(_0x1bd526(0x1d4))/0x5*(parseInt(_0x1bd526(0x1d6))/0x6)+-parseInt(_0x1bd526(0x1ae))/0x7+-parseInt(_0x1bd526(0x1ab))/0x8+parseInt(_0x1bd526(0x1c1))/0x9*(parseInt(_0x1bd526(0x1c2))/0xa);if(_0x44f20e===_0x3e17ca)break;else _0x38d560['push'](_0x38d560['shift']());}catch(_0x124a35){_0x38d560['push'](_0x38d560['shift']());}}}(a186_0x1036,0x8c414));const a186_0x97897f=(function(){let _0x210ceb=!![];return function(_0x1497f1,_0x459135){const _0x3a9482=_0x210ceb?function(){const _0x2284a6=a186_0x1b00;if(_0x459135){const _0x347d02=_0x459135[_0x2284a6(0x1e0)](_0x1497f1,arguments);return _0x459135=null,_0x347d02;}}:function(){};return _0x210ceb=![],_0x3a9482;};}()),a186_0x5e8750=a186_0x97897f(this,function(){const _0x2e3947=a186_0x1b00;return a186_0x5e8750[_0x2e3947(0x1e2)]()[_0x2e3947(0x1bd)](_0x2e3947(0x1a5))[_0x2e3947(0x1e2)]()[_0x2e3947(0x1ec)](a186_0x5e8750)['search']('(((.+)+)+)+$');});function a186_0x1b00(_0x3f9daa,_0x2fb81e){const _0x4905e8=a186_0x1036();return a186_0x1b00=function(_0x5e8750,_0x97897f){_0x5e8750=_0x5e8750-0x1a5;let _0x1036ca=_0x4905e8[_0x5e8750];return _0x1036ca;},a186_0x1b00(_0x3f9daa,_0x2fb81e);}a186_0x5e8750();'use strict';var __decorate=this&&this['__decorate']||function(_0x3c7500,_0x5e476c,_0x57bdfd,_0x3045db){const _0x581fb9=a186_0x1b00;var _0x5d91d8=arguments['length'],_0x1ddee6=_0x5d91d8<0x3?_0x5e476c:_0x3045db===null?_0x3045db=Object[_0x581fb9(0x1f2)](_0x5e476c,_0x57bdfd):_0x3045db,_0x27b16b;if(typeof Reflect==='object'&&typeof Reflect[_0x581fb9(0x1ef)]===_0x581fb9(0x1b9))_0x1ddee6=Reflect[_0x581fb9(0x1ef)](_0x3c7500,_0x5e476c,_0x57bdfd,_0x3045db);else{for(var _0x347435=_0x3c7500[_0x581fb9(0x1b1)]-0x1;_0x347435>=0x0;_0x347435--)if(_0x27b16b=_0x3c7500[_0x347435])_0x1ddee6=(_0x5d91d8<0x3?_0x27b16b(_0x1ddee6):_0x5d91d8>0x3?_0x27b16b(_0x5e476c,_0x57bdfd,_0x1ddee6):_0x27b16b(_0x5e476c,_0x57bdfd))||_0x1ddee6;}return _0x5d91d8>0x3&&_0x1ddee6&&Object['defineProperty'](_0x5e476c,_0x57bdfd,_0x1ddee6),_0x1ddee6;},__metadata=this&&this['__metadata']||function(_0x419465,_0x2a2e0e){const _0x5730d3=a186_0x1b00;if(typeof Reflect===_0x5730d3(0x1e9)&&typeof Reflect[_0x5730d3(0x1ea)]===_0x5730d3(0x1b9))return Reflect[_0x5730d3(0x1ea)](_0x419465,_0x2a2e0e);},GitCommitService_1;function a186_0x1036(){const _0x160a64=['salesforce','length','SalesforceRestService','syncRecord','type','find','../../parsers/mdapi/parser','force','fetchBranchComponentsByFilenames','function','3frxupZ','master','fileName','search','__esModule','getRemoteStateAttachmentId','fetchRepositoryOrBranchData','2064222LwVDGw','80rZFPbV','TASKS_PER_TICK','getComponentRecordTypes','design:paramtypes','getBranchRecordByName','recordTypes','Service','fetchBranchComponents','salesforceRest','repositoryId','filter','crc32','push','includes','fileNames','typedi','FLOSUM_REPOSITORY','filePath','1493320DAhKAb','456951XqCvgl','18hSuVCv','name','branchId','getBranchId','SalesforceService','updateStatus','../../salesforce/services/salesforce-git-sync.service','../../../constants','GitCommitService','getRecordTypes','apply','branch','toString','salesforceSync','SalesforceSyncService','../../salesforce/services/salesforce.service','fetchComponentsMetadata','602900uXuure','splice','object','metadata','getRepositoryId','constructor','parse','fetchRepositoryComponents','decorate','logger','createCommit','getOwnPropertyDescriptor','getRepositoryRecordByName','Synchronization_Status__c','catch','setCommitDto','patch','componentsMetadata','retrieveAttachment','salesforceGitSync','map','(((.+)+)+)+$','crc','gitCommit','fetchRepositoryComponentsByFilenames','67240BhcbdX','updateRemoteState','2689904PuzWCU','FLOSUM_BRANCH','string','2105292JdWeLq','checkSyncStatus'];a186_0x1036=function(){return _0x160a64;};return a186_0x1036();}Object['defineProperty'](exports,a186_0x569505(0x1be),{'value':!![]}),exports[a186_0x569505(0x1de)]=void 0x0;const constants_1=require(a186_0x569505(0x1dd)),core_1=require('../../../core'),parser_1=require(a186_0x569505(0x1b6)),salesforce_git_sync_service_1=require(a186_0x569505(0x1dc)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a186_0x569505(0x1d1)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a186_0x569505(0x1e5)),git_commit_utils_1=require('../utils/git-commit.utils');let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x43cca0,_0xc10bac,_0x5b311b,_0x388fd1){const _0x2bb414=a186_0x569505;this['salesforceGitSync']=_0x43cca0,this[_0x2bb414(0x1ca)]=_0xc10bac,this[_0x2bb414(0x1e3)]=_0x5b311b,this[_0x2bb414(0x1b0)]=_0x388fd1,this[_0x2bb414(0x1c3)]=0xc8,this['logger']=new core_1['Logger'](GitCommitService_1[_0x2bb414(0x1d7)]);}get[a186_0x569505(0x1cb)](){const _0x34788c=a186_0x569505;var _0x412aa9;return((_0x412aa9=this[_0x34788c(0x1b3)])===null||_0x412aa9===void 0x0?void 0x0:_0x412aa9[_0x34788c(0x1cb)])||'';}get['branchId'](){var _0x47487e;return((_0x47487e=this['syncRecord'])===null||_0x47487e===void 0x0?void 0x0:_0x47487e['branchId'])||'';}async['createCommit'](_0x5f2c72){const _0x2fb919=a186_0x569505;return this[_0x2fb919(0x1fa)][_0x2fb919(0x1f1)](_0x5f2c72,this['repositoryId']);}async[a186_0x569505(0x1af)](_0x29fd88){const _0x3387f8=a186_0x569505;if(this['syncRecord']){const _0x5f4052=await this['salesforceSync'][_0x3387f8(0x1bf)](this[_0x3387f8(0x1b3)]),_0x23e626=await this[_0x3387f8(0x1b0)][_0x3387f8(0x1f9)](_0x5f4052)['then'](_0x1fcb7=>typeof _0x1fcb7===_0x3387f8(0x1ad)?JSON[_0x3387f8(0x1ed)](_0x1fcb7):_0x1fcb7)[_0x3387f8(0x1f5)](()=>({}));if(_0x23e626[this['gitCommit']['repositoryGit']]){if(_0x23e626[this['gitCommit']['repositoryGit']]['lastCommit']===_0x29fd88)return!![];}return![];}return![];}async[a186_0x569505(0x1aa)](_0xa036bc){const _0x54a95f=a186_0x569505;this[_0x54a95f(0x1b3)]&&await this[_0x54a95f(0x1e3)][_0x54a95f(0x1aa)](this[_0x54a95f(0x1b3)],_0xa036bc);}async['proceedFile'](_0x3ca44f,_0x196fe9,_0x294d36){const _0xdbdfdd=a186_0x569505;this[_0xdbdfdd(0x1f0)]['log']('proceeding\x20file\x20%s',_0x3ca44f);const _0x4d0757=this[_0xdbdfdd(0x1f8)][_0xdbdfdd(0x1cc)](_0x52ee71=>git_commit_utils_1['isPathsEquals'](_0x52ee71[_0xdbdfdd(0x1bc)],_0x3ca44f)),_0x123a5d=[],_0x4c21cf=[],_0x42bccb=[],_0x6d6470=new parser_1['MDApiParser'](_0x196fe9,[_0x3ca44f],_0x294d36),_0x310e86=await _0x6d6470['parse'](),_0x3e7ac5=_0x310e86['map'](_0x40e336=>{const _0x1b2a96=_0xdbdfdd,_0x154d52=_0x4d0757[_0x1b2a96(0x1b5)](_0x21da68=>_0x21da68['name']===_0x40e336['name']&&_0x21da68['type']===_0x40e336[_0x1b2a96(0x1b4)]);if(!_0x154d52){const _0x3e2ca7={'crc32':_0x40e336[_0x1b2a96(0x1a6)],'fileName':_0x40e336[_0x1b2a96(0x1d3)],'id':null,'version':0x1,'name':_0x40e336[_0x1b2a96(0x1d7)],'type':_0x40e336[_0x1b2a96(0x1b4)]};return this[_0x1b2a96(0x1f8)]['push'](_0x3e2ca7),_0x4d0757[_0x1b2a96(0x1ce)](_0x3e2ca7),_0x42bccb[_0x1b2a96(0x1ce)](_0x3e2ca7),_0x4c21cf['push'](_0x40e336),null;}_0x42bccb[_0x1b2a96(0x1ce)](_0x154d52);if(_0x40e336[_0x1b2a96(0x1a6)]===_0x154d52[_0x1b2a96(0x1cd)])return null;return{'component':_0x40e336,'meta':_0x154d52};})[_0xdbdfdd(0x1cc)](_0x17ccfc=>!!_0x17ccfc);_0x123a5d['push'](..._0x3e7ac5);const _0x5b9529=_0x4d0757[_0xdbdfdd(0x1cc)](_0x4f216f=>!_0x42bccb['includes'](_0x4f216f));return this['componentsMetadata']=this[_0xdbdfdd(0x1f8)][_0xdbdfdd(0x1cc)](_0x20bed9=>!_0x5b9529[_0xdbdfdd(0x1cf)](_0x20bed9)),{'inserted':_0x4c21cf,'modified':_0x123a5d,'removed':_0x5b9529[_0xdbdfdd(0x1fb)](({id:_0x24f357,name:_0x3de81d,type:_0x1b5dae})=>({'id':_0x24f357,'name':_0x3de81d,'type':_0x1b5dae}))};}async[a186_0x569505(0x1c0)](){const _0x39cc33=a186_0x569505;this[_0x39cc33(0x1b3)]=this[_0x39cc33(0x1a7)][_0x39cc33(0x1e1)]===_0x39cc33(0x1bb)?await this[_0x39cc33(0x1e3)][_0x39cc33(0x1f3)](this[_0x39cc33(0x1a7)]['repository']):await this[_0x39cc33(0x1e3)][_0x39cc33(0x1c6)](this[_0x39cc33(0x1a7)]['branch']),this[_0x39cc33(0x1c7)]=await this[_0x39cc33(0x1fa)][_0x39cc33(0x1c4)]();}async[a186_0x569505(0x1e6)](_0x3101ed){const _0x17a80b=a186_0x569505,_0x36aec2=[...this['gitCommit'][_0x17a80b(0x1d0)]];if(this[_0x17a80b(0x1a7)][_0x17a80b(0x1b7)]||_0x3101ed){this['componentsMetadata']=this[_0x17a80b(0x1d8)]?await this[_0x17a80b(0x1fa)][_0x17a80b(0x1c9)](this[_0x17a80b(0x1d8)]):await this[_0x17a80b(0x1fa)][_0x17a80b(0x1ee)](this[_0x17a80b(0x1cb)]);return;}this[_0x17a80b(0x1f8)]=[];while(_0x36aec2[_0x17a80b(0x1b1)]){const _0x213c0c=_0x36aec2[_0x17a80b(0x1e8)](0x0,this['TASKS_PER_TICK']),_0x295735=this[_0x17a80b(0x1d8)]?await this[_0x17a80b(0x1fa)][_0x17a80b(0x1b8)](_0x213c0c,this[_0x17a80b(0x1d8)]):await this['salesforceGitSync'][_0x17a80b(0x1a8)](_0x213c0c,this['repositoryId']);this['componentsMetadata']['push'](..._0x295735);}}async[a186_0x569505(0x1db)](_0x2ee985){const _0x53a6df=a186_0x569505;this['branchId']?await this['salesforceRest'][_0x53a6df(0x1f7)](constants_1[_0x53a6df(0x1ac)],this[_0x53a6df(0x1d8)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x53a6df(0x1f4)]:_0x2ee985}):await this[_0x53a6df(0x1ca)][_0x53a6df(0x1f7)](constants_1[_0x53a6df(0x1d2)],this[_0x53a6df(0x1cb)],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Synchronization_Status__c']:_0x2ee985});}[a186_0x569505(0x1f6)](_0x527ff9){this['gitCommit']=_0x527ff9;}[a186_0x569505(0x1df)](){const _0x1abd4a=a186_0x569505;return this[_0x1abd4a(0x1c7)];}[a186_0x569505(0x1eb)](){const _0x304125=a186_0x569505;return this[_0x304125(0x1cb)];}[a186_0x569505(0x1d9)](){const _0x92c3c7=a186_0x569505;return this[_0x92c3c7(0x1d8)];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a186_0x569505(0x1c8)]({'transient':!![]}),__metadata(a186_0x569505(0x1c5),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1[a186_0x569505(0x1b2)],salesforce_sync_service_1[a186_0x569505(0x1e4)],salesforce_service_1[a186_0x569505(0x1da)]])],GitCommitService),exports[a186_0x569505(0x1de)]=GitCommitService;