const a186_0x1899bb=a186_0xf57b;function a186_0xf57b(_0x33da9b,_0x506e9a){const _0x304364=a186_0x35ee();return a186_0xf57b=function(_0x5e1f2b,_0x2999d0){_0x5e1f2b=_0x5e1f2b-0x73;let _0x35ee4c=_0x304364[_0x5e1f2b];return _0x35ee4c;},a186_0xf57b(_0x33da9b,_0x506e9a);}(function(_0x518259,_0x30923d){const _0x4f516b=a186_0xf57b,_0x1f4044=_0x518259();while(!![]){try{const _0xff118f=parseInt(_0x4f516b(0xc0))/0x1*(parseInt(_0x4f516b(0xdd))/0x2)+-parseInt(_0x4f516b(0xb5))/0x3*(parseInt(_0x4f516b(0xce))/0x4)+parseInt(_0x4f516b(0x9d))/0x5*(parseInt(_0x4f516b(0xd7))/0x6)+-parseInt(_0x4f516b(0x7b))/0x7+parseInt(_0x4f516b(0xd5))/0x8+parseInt(_0x4f516b(0xba))/0x9+parseInt(_0x4f516b(0xd6))/0xa*(-parseInt(_0x4f516b(0x96))/0xb);if(_0xff118f===_0x30923d)break;else _0x1f4044['push'](_0x1f4044['shift']());}catch(_0x56d1f8){_0x1f4044['push'](_0x1f4044['shift']());}}}(a186_0x35ee,0x2c959));const a186_0x2999d0=(function(){let _0x2ddd52=!![];return function(_0x2f83e3,_0xefa498){const _0x2670e3=_0x2ddd52?function(){if(_0xefa498){const _0x33651b=_0xefa498['apply'](_0x2f83e3,arguments);return _0xefa498=null,_0x33651b;}}:function(){};return _0x2ddd52=![],_0x2670e3;};}()),a186_0x5e1f2b=a186_0x2999d0(this,function(){const _0x4b1381=a186_0xf57b;return a186_0x5e1f2b[_0x4b1381(0xaf)]()[_0x4b1381(0x87)]('(((.+)+)+)+$')[_0x4b1381(0xaf)]()[_0x4b1381(0x7f)](a186_0x5e1f2b)[_0x4b1381(0x87)](_0x4b1381(0x78));});a186_0x5e1f2b();'use strict';var __decorate=this&&this[a186_0x1899bb(0x91)]||function(_0xc75964,_0x5a9c2a,_0x1b9f47,_0x310296){const _0x5227e8=a186_0x1899bb;var _0x23228f=arguments[_0x5227e8(0xc3)],_0x4df5de=_0x23228f<0x3?_0x5a9c2a:_0x310296===null?_0x310296=Object['getOwnPropertyDescriptor'](_0x5a9c2a,_0x1b9f47):_0x310296,_0x935ae;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x5227e8(0xb8))_0x4df5de=Reflect[_0x5227e8(0xc1)](_0xc75964,_0x5a9c2a,_0x1b9f47,_0x310296);else{for(var _0x333527=_0xc75964[_0x5227e8(0xc3)]-0x1;_0x333527>=0x0;_0x333527--)if(_0x935ae=_0xc75964[_0x333527])_0x4df5de=(_0x23228f<0x3?_0x935ae(_0x4df5de):_0x23228f>0x3?_0x935ae(_0x5a9c2a,_0x1b9f47,_0x4df5de):_0x935ae(_0x5a9c2a,_0x1b9f47))||_0x4df5de;}return _0x23228f>0x3&&_0x4df5de&&Object['defineProperty'](_0x5a9c2a,_0x1b9f47,_0x4df5de),_0x4df5de;},__metadata=this&&this[a186_0x1899bb(0x80)]||function(_0x31805c,_0x5b96a7){const _0x4ce328=a186_0x1899bb;if(typeof Reflect===_0x4ce328(0xd1)&&typeof Reflect[_0x4ce328(0xbf)]===_0x4ce328(0xb8))return Reflect['metadata'](_0x31805c,_0x5b96a7);},GitCommitService_1;Object[a186_0x1899bb(0x8e)](exports,'__esModule',{'value':!![]}),exports['GitCommitService']=void 0x0;function a186_0x35ee(){const _0xb7ceac=['files\x20will\x20be\x20proceeded:\x20%s\x20[%d]','11zpQWsP','MDApiParser','gitCommit','SalesforceRestService','salesforce','proceeding\x20commit\x20%s','filter','35735XwQJQC','find','FLOSUM_BRANCH','join','salesforceSync','../../salesforce/services/salesforce.service','retrieveAttachment','component','SalesforceGitSyncService','branch','Service','master','repository','../utils/git-commit.utils','prepareGitChangedPaths','includes','name','push','toString','FLOSUM_GIT_NAMESPACE','fetchRepositoryComponents','type','filePath','catch','3VhTzoo','fetchBranchComponentsByFilenames','log','function','crc','77679BETUzA','fileName','salesforceGitSync','getRepositoryId','fetchRepositoryComponentsByFilenames','metadata','332702dzdxVy','decorate','syncRecord','length','branchId','SalesforceService','message','SalesforceSyncService','GitCommitService','salesforceRest','patch','crc32','../../salesforce/services/salesforce-sync.service','files\x20proceeded:\x20%d/%d','1143460nFqJpv','fetchBranchComponents','checkSyncStatus','object','fileNames','isPathsEquals','setCommitDto','2612864PFbzIG','4149560cUtkuB','246pQGbKS','fetchRepositoryOrBranchData','getBranchId','typedi','recordTypes','../../parsers/mdapi/parser','2GxnjSc','components\x20that\x20will\x20be\x20created\x20%s[%d]','proceedGitCommit','components\x20that\x20will\x20be\x20deleted\x20%s[%d]','then','repositoryGit','(((.+)+)+)+$','splice','updateRemoteState','542710kxxRFA','getBranchRecordByName','../../salesforce/services/salesforce-git-sync.service','Synchronization_Status__c','constructor','__metadata','../../salesforce/services/salesforce-rest.service','slice','components\x20that\x20will\x20be\x20updated\x20%s[%d]','parse','force','Logger','search','FLOSUM_REPOSITORY','design:paramtypes','TASKS_PER_TICK','logger','../../../core','repositoryId','defineProperty','map','componentsMetadata','__decorate','getRepositoryRecordByName','string','getComponentRecordTypes'];a186_0x35ee=function(){return _0xb7ceac;};return a186_0x35ee();}const constants_1=require('../../../constants'),core_1=require(a186_0x1899bb(0x8c)),parser_1=require(a186_0x1899bb(0xdc)),salesforce_git_sync_service_1=require(a186_0x1899bb(0x7d)),salesforce_rest_service_1=require(a186_0x1899bb(0x81)),typedi_1=require(a186_0x1899bb(0xda)),salesforce_sync_service_1=require(a186_0x1899bb(0xcc)),salesforce_service_1=require(a186_0x1899bb(0xa2)),git_commit_utils_1=require(a186_0x1899bb(0xaa));let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x36b04c,_0x5c8883,_0x405e82,_0x2d347b){const _0x744386=a186_0x1899bb;this[_0x744386(0xbc)]=_0x36b04c,this['salesforceRest']=_0x5c8883,this[_0x744386(0xa1)]=_0x405e82,this[_0x744386(0x9a)]=_0x2d347b,this[_0x744386(0x8a)]=0xc8,this[_0x744386(0x8b)]=new core_1[(_0x744386(0x86))](GitCommitService_1[_0x744386(0xad)]);}get[a186_0x1899bb(0x8d)](){const _0x246046=a186_0x1899bb;var _0x397606;return((_0x397606=this[_0x246046(0xc2)])===null||_0x397606===void 0x0?void 0x0:_0x397606[_0x246046(0x8d)])||'';}get[a186_0x1899bb(0xc4)](){const _0x10da3b=a186_0x1899bb;var _0x1cac4d;return((_0x1cac4d=this[_0x10da3b(0xc2)])===null||_0x1cac4d===void 0x0?void 0x0:_0x1cac4d['branchId'])||'';}async[a186_0x1899bb(0xd0)](_0x196fa9){const _0x301e0e=a186_0x1899bb;if(this[_0x301e0e(0xc2)]){const _0x5463c1=await this[_0x301e0e(0xa1)]['getRemoteStateAttachmentId'](this[_0x301e0e(0xc2)]),_0x1aea55=await this[_0x301e0e(0x9a)][_0x301e0e(0xa3)](_0x5463c1)[_0x301e0e(0x76)](_0x1fb1cd=>typeof _0x1fb1cd===_0x301e0e(0x93)?JSON['parse'](_0x1fb1cd):_0x1fb1cd)[_0x301e0e(0xb4)](()=>({}));if(_0x1aea55[this[_0x301e0e(0x98)][_0x301e0e(0x77)]]){if(_0x1aea55[this[_0x301e0e(0x98)][_0x301e0e(0x77)]]['lastCommit']===_0x196fa9)return!![];}return![];}return![];}async[a186_0x1899bb(0x7a)](_0x2d67f8){const _0x4788c1=a186_0x1899bb;this[_0x4788c1(0xc2)]&&await this['salesforceSync']['updateRemoteState'](this['syncRecord'],_0x2d67f8);}async[a186_0x1899bb(0x74)](_0x1d4d23,_0x4bb611,_0x43e583){const _0x2ee3ba=a186_0x1899bb;this[_0x2ee3ba(0x8b)][_0x2ee3ba(0xb7)](_0x2ee3ba(0x9b),_0x1d4d23['id']);const {added:_0x4b790d,modified:_0x8b0808,removed:_0x3fdf5d}=_0x1d4d23['files'];_0x43e583&&_0x8b0808[_0x2ee3ba(0xae)](..._0x3fdf5d[_0x2ee3ba(0x79)](0x0));const _0x36d8e2=git_commit_utils_1[_0x2ee3ba(0xab)]([..._0x4b790d,..._0x8b0808]),_0x2883a6=[..._0x36d8e2,..._0x43e583?git_commit_utils_1[_0x2ee3ba(0xab)](_0x3fdf5d):_0x3fdf5d];this[_0x2ee3ba(0x8b)][_0x2ee3ba(0xb7)](_0x2ee3ba(0x95),_0x2883a6[_0x2ee3ba(0x82)](0x0,0x14)[_0x2ee3ba(0xa0)](',\x20'),_0x2883a6['length']);const _0x546a7d=[],_0x372383=[],_0x355e9c=this['componentsMetadata'][_0x2ee3ba(0x9c)](_0x406a60=>!!_0x2883a6[_0x2ee3ba(0x9e)](_0xf9e693=>git_commit_utils_1[_0x2ee3ba(0xd3)](_0x406a60[_0x2ee3ba(0xbb)],_0xf9e693))),_0x288f52=[],_0x3ae979=_0x36d8e2[_0x2ee3ba(0xc3)];while(_0x36d8e2[_0x2ee3ba(0xc3)]){const _0x2e9f14=_0x36d8e2[_0x2ee3ba(0x79)](0x0,this[_0x2ee3ba(0x8a)]);this[_0x2ee3ba(0x8b)][_0x2ee3ba(0xb7)](_0x2ee3ba(0xcd),_0x3ae979-_0x36d8e2[_0x2ee3ba(0xc3)],_0x3ae979);const _0x470033=new parser_1[(_0x2ee3ba(0x97))](_0x4bb611,_0x2e9f14,_0x43e583),_0x370e6d=await _0x470033[_0x2ee3ba(0x84)](),_0x1ab147=_0x370e6d['map'](_0x1876b5=>{const _0x27f583=_0x2ee3ba,_0x2cce72=_0x355e9c['find'](_0x123d80=>_0x123d80[_0x27f583(0xad)]===_0x1876b5[_0x27f583(0xad)]&&_0x123d80[_0x27f583(0xb2)]===_0x1876b5['type']);if(!_0x2cce72){const _0x20c697={'crc32':_0x1876b5[_0x27f583(0xb9)],'fileName':_0x1876b5[_0x27f583(0xb3)],'id':null,'version':0x1,'name':_0x1876b5['name'],'type':_0x1876b5['type']};return this[_0x27f583(0x90)][_0x27f583(0xae)](_0x20c697),_0x355e9c['push'](_0x20c697),_0x288f52[_0x27f583(0xae)](_0x20c697),_0x372383['push'](_0x1876b5),null;}_0x288f52[_0x27f583(0xae)](_0x2cce72);if(_0x1876b5[_0x27f583(0xb9)]===_0x2cce72[_0x27f583(0xcb)])return null;return{'component':_0x1876b5,'meta':_0x2cce72};})['filter'](_0x255094=>!!_0x255094);_0x546a7d['push'](..._0x1ab147);}const _0x2b8b75=_0x355e9c['filter'](_0x5b28de=>!_0x288f52['includes'](_0x5b28de));return this['componentsMetadata']=this[_0x2ee3ba(0x90)][_0x2ee3ba(0x9c)](_0x5e3250=>!_0x2b8b75[_0x2ee3ba(0xac)](_0x5e3250)),this[_0x2ee3ba(0x8b)]['log'](_0x2ee3ba(0x73),_0x372383[_0x2ee3ba(0x8f)](_0x8864f9=>'\x27'+_0x8864f9[_0x2ee3ba(0xad)]+'\x27')[_0x2ee3ba(0x82)](0x0,0x14)[_0x2ee3ba(0xa0)](',\x20'),_0x372383[_0x2ee3ba(0xc3)]),this[_0x2ee3ba(0x8b)]['log'](_0x2ee3ba(0x83),_0x546a7d['map'](_0x69ddcc=>'\x27'+_0x69ddcc[_0x2ee3ba(0xa4)]['name']+'\x27')[_0x2ee3ba(0x82)](0x0,0x14)[_0x2ee3ba(0xa0)](',\x20'),_0x546a7d[_0x2ee3ba(0xc3)]),this[_0x2ee3ba(0x8b)][_0x2ee3ba(0xb7)](_0x2ee3ba(0x75),_0x2b8b75['map'](_0x4f1461=>'\x27'+_0x4f1461[_0x2ee3ba(0xad)]+'\x27')[_0x2ee3ba(0x82)](0x0,0x14)[_0x2ee3ba(0xa0)](',\x20'),_0x2b8b75[_0x2ee3ba(0xc3)]),{'author':_0x1d4d23['username'],'message':_0x1d4d23[_0x2ee3ba(0xc6)],'inserted':_0x372383,'modified':_0x546a7d,'removed':_0x2b8b75[_0x2ee3ba(0x8f)](_0x38ccc2=>({'componentType':_0x38ccc2[_0x2ee3ba(0xb2)],'componentName':_0x38ccc2[_0x2ee3ba(0xad)],'componentId':_0x38ccc2['id']}))};}async[a186_0x1899bb(0xd8)](){const _0x39c16c=a186_0x1899bb;this[_0x39c16c(0xc2)]=this[_0x39c16c(0x98)][_0x39c16c(0xa6)]===_0x39c16c(0xa8)?await this[_0x39c16c(0xa1)][_0x39c16c(0x92)](this[_0x39c16c(0x98)][_0x39c16c(0xa9)]):await this[_0x39c16c(0xa1)][_0x39c16c(0x7c)](this[_0x39c16c(0x98)][_0x39c16c(0xa6)]),this[_0x39c16c(0xdb)]=await this[_0x39c16c(0xbc)][_0x39c16c(0x94)]();}async['fetchComponentsMetadata'](_0x1df870){const _0x33662e=a186_0x1899bb,_0x39d9e3=[...this[_0x33662e(0x98)][_0x33662e(0xd2)]];if(this['gitCommit'][_0x33662e(0x85)]||_0x1df870){this[_0x33662e(0x90)]=this[_0x33662e(0xc4)]?await this[_0x33662e(0xbc)][_0x33662e(0xcf)](this['branchId']):await this[_0x33662e(0xbc)][_0x33662e(0xb1)](this[_0x33662e(0x8d)]);return;}this[_0x33662e(0x90)]=[];while(_0x39d9e3['length']){const _0x42b2c6=_0x39d9e3[_0x33662e(0x79)](0x0,this[_0x33662e(0x8a)]),_0x11e372=this[_0x33662e(0xc4)]?await this[_0x33662e(0xbc)][_0x33662e(0xb6)](_0x42b2c6,this[_0x33662e(0xc4)]):await this['salesforceGitSync'][_0x33662e(0xbe)](_0x42b2c6,this[_0x33662e(0x8d)]);this[_0x33662e(0x90)][_0x33662e(0xae)](..._0x11e372);}}async['updateStatus'](_0x953cd9){const _0x278745=a186_0x1899bb;this[_0x278745(0xc4)]?await this[_0x278745(0xc9)][_0x278745(0xca)](constants_1[_0x278745(0x9f)],this['branchId'],{[constants_1[_0x278745(0xb0)]+'Synchronization_Status__c']:_0x953cd9}):await this[_0x278745(0xc9)][_0x278745(0xca)](constants_1[_0x278745(0x88)],this['repositoryId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x278745(0x7e)]:_0x953cd9});}[a186_0x1899bb(0xd4)](_0x1ae207){this['gitCommit']=_0x1ae207;}['getRecordTypes'](){const _0x4a2598=a186_0x1899bb;return this[_0x4a2598(0xdb)];}[a186_0x1899bb(0xbd)](){return this['repositoryId'];}[a186_0x1899bb(0xd9)](){const _0x26b577=a186_0x1899bb;return this[_0x26b577(0xc4)];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a186_0x1899bb(0xa7)]({'transient':!![]}),__metadata(a186_0x1899bb(0x89),[salesforce_git_sync_service_1[a186_0x1899bb(0xa5)],salesforce_rest_service_1[a186_0x1899bb(0x99)],salesforce_sync_service_1[a186_0x1899bb(0xc7)],salesforce_service_1[a186_0x1899bb(0xc5)]])],GitCommitService),exports[a186_0x1899bb(0xc8)]=GitCommitService;