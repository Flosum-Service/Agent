const a187_0x71e87b=a187_0x1e3c;(function(_0x306ad7,_0x1984ff){const _0x32fc1b=a187_0x1e3c,_0x3e930e=_0x306ad7();while(!![]){try{const _0x1f86ed=parseInt(_0x32fc1b(0xe7))/0x1+parseInt(_0x32fc1b(0x113))/0x2*(parseInt(_0x32fc1b(0x10c))/0x3)+-parseInt(_0x32fc1b(0xd7))/0x4*(-parseInt(_0x32fc1b(0xec))/0x5)+-parseInt(_0x32fc1b(0xc9))/0x6*(-parseInt(_0x32fc1b(0x111))/0x7)+-parseInt(_0x32fc1b(0xee))/0x8+-parseInt(_0x32fc1b(0x112))/0x9+-parseInt(_0x32fc1b(0xe6))/0xa;if(_0x1f86ed===_0x1984ff)break;else _0x3e930e['push'](_0x3e930e['shift']());}catch(_0x365222){_0x3e930e['push'](_0x3e930e['shift']());}}}(a187_0x467f,0x7b507));const a187_0x413d16=(function(){let _0x1513eb=!![];return function(_0x4e2795,_0x4333a1){const _0x33b02f=_0x1513eb?function(){if(_0x4333a1){const _0x5de2b8=_0x4333a1['apply'](_0x4e2795,arguments);return _0x4333a1=null,_0x5de2b8;}}:function(){};return _0x1513eb=![],_0x33b02f;};}()),a187_0x15cbbf=a187_0x413d16(this,function(){const _0x87fa89=a187_0x1e3c;return a187_0x15cbbf[_0x87fa89(0xf3)]()[_0x87fa89(0x10f)]('(((.+)+)+)+$')['toString']()['constructor'](a187_0x15cbbf)[_0x87fa89(0x10f)](_0x87fa89(0xe0));});function a187_0x1e3c(_0x79dd3,_0x1738a2){const _0x4d8a18=a187_0x467f();return a187_0x1e3c=function(_0x15cbbf,_0x413d16){_0x15cbbf=_0x15cbbf-0xbd;let _0x467f22=_0x4d8a18[_0x15cbbf];return _0x467f22;},a187_0x1e3c(_0x79dd3,_0x1738a2);}a187_0x15cbbf();'use strict';var __decorate=this&&this[a187_0x71e87b(0xe1)]||function(_0x312ceb,_0x55ea89,_0x5469a5,_0x4d6d25){const _0x168f21=a187_0x71e87b;var _0x513a78=arguments['length'],_0x1a88ce=_0x513a78<0x3?_0x55ea89:_0x4d6d25===null?_0x4d6d25=Object[_0x168f21(0x108)](_0x55ea89,_0x5469a5):_0x4d6d25,_0x4a950b;if(typeof Reflect===_0x168f21(0xfc)&&typeof Reflect['decorate']===_0x168f21(0x109))_0x1a88ce=Reflect[_0x168f21(0xf5)](_0x312ceb,_0x55ea89,_0x5469a5,_0x4d6d25);else{for(var _0x1f1727=_0x312ceb['length']-0x1;_0x1f1727>=0x0;_0x1f1727--)if(_0x4a950b=_0x312ceb[_0x1f1727])_0x1a88ce=(_0x513a78<0x3?_0x4a950b(_0x1a88ce):_0x513a78>0x3?_0x4a950b(_0x55ea89,_0x5469a5,_0x1a88ce):_0x4a950b(_0x55ea89,_0x5469a5))||_0x1a88ce;}return _0x513a78>0x3&&_0x1a88ce&&Object[_0x168f21(0xcd)](_0x55ea89,_0x5469a5,_0x1a88ce),_0x1a88ce;},__metadata=this&&this[a187_0x71e87b(0x107)]||function(_0x52fc8a,_0x29cc57){const _0x2e1ab3=a187_0x71e87b;if(typeof Reflect===_0x2e1ab3(0xfc)&&typeof Reflect['metadata']===_0x2e1ab3(0x109))return Reflect[_0x2e1ab3(0xce)](_0x52fc8a,_0x29cc57);};function a187_0x467f(){const _0xecc640=['FLOSUM_GIT_NAMESPACE','getBranchRecordByName','design:paramtypes','updateRemoteState','10372VGLlSv','fileNames','fetchRepositoryComponents','SalesforceService','fetchRepositoryOrBranchData','typedi','repositoryGit','fetchComponentsMetadata','syncRecord','(((.+)+)+)+$','__decorate','getRepositoryRecordByName','salesforceRest','splice','includes','1618010IcqPrS','846224XfrZSP','find','name','FLOSUM_BRANCH','getRecordTypes','575QISaxi','then','4787408vMTXQf','GitCommitService','filter','branchId','proceedFile','toString','filePath','decorate','../../salesforce/services/salesforce-sync.service','gitCommit','Last_Updated_On__c','patch','now','updateStatus','object','SalesforceGitSyncService','createCommit','fetchBranchComponentsByFilenames','repositoryId','length','lastCommit','Synchronization_Status__c','fileName','crc','../utils/git-commit.utils','__metadata','getOwnPropertyDescriptor','function','map','type','2522958cxPahP','parse','salesforceSync','search','TASKS_PER_TICK','1792IdxMru','8280171mxjyeo','2qwjkfd','SalesforceSyncService','push','crc32','../../../constants','FLOSUM_REPOSITORY','FLOSUM_NAMESPACE','getRemoteStateAttachmentId','recordTypes','__esModule','checkSyncStatus','salesforceGitSync','master','branch','4686YkcNsT','../../parsers/mdapi/parser','getRepositoryId','retrieveAttachment','defineProperty','metadata','Service','componentsMetadata','fetchRepositoryComponentsByFilenames','salesforce'];a187_0x467f=function(){return _0xecc640;};return a187_0x467f();}Object['defineProperty'](exports,a187_0x71e87b(0xc4),{'value':!![]}),exports[a187_0x71e87b(0xef)]=void 0x0;const constants_1=require(a187_0x71e87b(0xbf)),parser_1=require(a187_0x71e87b(0xca)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a187_0x71e87b(0xdc)),salesforce_sync_service_1=require(a187_0x71e87b(0xf6)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_commit_utils_1=require(a187_0x71e87b(0x106));let GitCommitService=class GitCommitService{constructor(_0x1d2ae6,_0x5f5c32,_0x282c2d,_0x113d5c){const _0xed5eda=a187_0x71e87b;this[_0xed5eda(0xc6)]=_0x1d2ae6,this[_0xed5eda(0xe3)]=_0x5f5c32,this['salesforceSync']=_0x282c2d,this[_0xed5eda(0xd2)]=_0x113d5c,this[_0xed5eda(0x110)]=0xc8;}get[a187_0x71e87b(0x100)](){const _0x223c05=a187_0x71e87b;var _0x5d7490;return((_0x5d7490=this[_0x223c05(0xdf)])===null||_0x5d7490===void 0x0?void 0x0:_0x5d7490['repositoryId'])||'';}get['branchId'](){const _0x1aa985=a187_0x71e87b;var _0x310fce;return((_0x310fce=this[_0x1aa985(0xdf)])===null||_0x310fce===void 0x0?void 0x0:_0x310fce[_0x1aa985(0xf1)])||'';}async[a187_0x71e87b(0xfe)](_0x3edba6){const _0x43ba2b=a187_0x71e87b;return this[_0x43ba2b(0xc6)][_0x43ba2b(0xfe)](_0x3edba6,this['repositoryId']);}async[a187_0x71e87b(0xc5)](_0x1a7fef){const _0x45e130=a187_0x71e87b;if(this[_0x45e130(0xdf)]){const _0x556ad9=await this['salesforceSync'][_0x45e130(0xc2)](this['syncRecord']),_0x323acf=await this[_0x45e130(0xd2)][_0x45e130(0xcc)](_0x556ad9)[_0x45e130(0xed)](_0x935c09=>typeof _0x935c09==='string'?JSON[_0x45e130(0x10d)](_0x935c09):_0x935c09)['catch'](()=>({}));if(_0x323acf[this[_0x45e130(0xf7)][_0x45e130(0xdd)]]){if(_0x323acf[this[_0x45e130(0xf7)]['repositoryGit']][_0x45e130(0x102)]===_0x1a7fef)return!![];}return![];}return![];}async[a187_0x71e87b(0xd6)](_0x3cd0b5){const _0x54580f=a187_0x71e87b;this[_0x54580f(0xdf)]&&await this[_0x54580f(0x10e)]['updateRemoteState'](this[_0x54580f(0xdf)],_0x3cd0b5);}async[a187_0x71e87b(0xf2)](_0x544713,_0x31f62,_0x759276){const _0x448ce1=a187_0x71e87b,_0x187902=this[_0x448ce1(0xd0)]['filter'](_0x1a5572=>git_commit_utils_1['isPathsEquals'](_0x1a5572[_0x448ce1(0x104)],_0x544713)),_0x349e9e=[],_0x2af224=[],_0x33ec90=[],_0x2ca1fb=new parser_1['MDApiParser'](_0x31f62,[_0x544713],_0x759276),_0x622c6=await _0x2ca1fb['parse'](),_0x289fb0=_0x622c6['map'](_0x5c319b=>{const _0x4e99b8=_0x448ce1,_0x42b2bc=_0x187902[_0x4e99b8(0xe8)](_0x5bfcd0=>_0x5bfcd0[_0x4e99b8(0xe9)]===_0x5c319b[_0x4e99b8(0xe9)]&&_0x5bfcd0[_0x4e99b8(0x10b)]===_0x5c319b[_0x4e99b8(0x10b)]);if(!_0x42b2bc){const _0x28ae19={'crc32':_0x5c319b[_0x4e99b8(0x105)],'fileName':_0x5c319b[_0x4e99b8(0xf4)],'id':null,'version':0x1,'name':_0x5c319b[_0x4e99b8(0xe9)],'type':_0x5c319b[_0x4e99b8(0x10b)]};return this['componentsMetadata'][_0x4e99b8(0xbd)](_0x28ae19),_0x187902[_0x4e99b8(0xbd)](_0x28ae19),_0x33ec90[_0x4e99b8(0xbd)](_0x28ae19),_0x2af224['push'](_0x5c319b),null;}_0x33ec90[_0x4e99b8(0xbd)](_0x42b2bc);if(_0x5c319b[_0x4e99b8(0x105)]===_0x42b2bc[_0x4e99b8(0xbe)])return null;return{'component':_0x5c319b,'meta':_0x42b2bc};})[_0x448ce1(0xf0)](_0x4ebcae=>!!_0x4ebcae);_0x349e9e[_0x448ce1(0xbd)](..._0x289fb0);const _0x13f77b=_0x187902[_0x448ce1(0xf0)](_0x41ec68=>!_0x33ec90[_0x448ce1(0xe5)](_0x41ec68));return this['componentsMetadata']=this[_0x448ce1(0xd0)][_0x448ce1(0xf0)](_0x68f95c=>!_0x13f77b[_0x448ce1(0xe5)](_0x68f95c)),{'inserted':_0x2af224,'modified':_0x349e9e,'removed':_0x13f77b[_0x448ce1(0x10a)](({id:_0x2d998e,name:_0x1a2c35,type:_0x33139b})=>({'id':_0x2d998e,'name':_0x1a2c35,'type':_0x33139b}))};}async[a187_0x71e87b(0xdb)](){const _0xc30042=a187_0x71e87b;this[_0xc30042(0xdf)]=this[_0xc30042(0xf7)][_0xc30042(0xc8)]===_0xc30042(0xc7)?await this['salesforceSync'][_0xc30042(0xe2)](this[_0xc30042(0xf7)]['repository']):await this[_0xc30042(0x10e)][_0xc30042(0xd4)](this[_0xc30042(0xf7)][_0xc30042(0xc8)]),this['recordTypes']=await this['salesforceGitSync']['getComponentRecordTypes']();}async[a187_0x71e87b(0xde)](_0x5a2a98){const _0x33209d=a187_0x71e87b,_0x51215d=[...this[_0x33209d(0xf7)][_0x33209d(0xd8)]];if(this['gitCommit']['force']||_0x5a2a98){this['componentsMetadata']=this['branchId']?await this[_0x33209d(0xc6)]['fetchBranchComponents'](this['branchId']):await this[_0x33209d(0xc6)][_0x33209d(0xd9)](this[_0x33209d(0x100)]);return;}this[_0x33209d(0xd0)]=[];while(_0x51215d[_0x33209d(0x101)]){const _0x45f6b3=_0x51215d[_0x33209d(0xe4)](0x0,this[_0x33209d(0x110)]),_0x25bd5f=this[_0x33209d(0xf1)]?await this[_0x33209d(0xc6)][_0x33209d(0xff)](_0x45f6b3,this[_0x33209d(0xf1)]):await this['salesforceGitSync'][_0x33209d(0xd1)](_0x45f6b3,this[_0x33209d(0x100)]);this['componentsMetadata'][_0x33209d(0xbd)](..._0x25bd5f);}}async[a187_0x71e87b(0xfb)](_0x324433){const _0x68ab7e=a187_0x71e87b;this[_0x68ab7e(0xf1)]?await this['salesforceRest'][_0x68ab7e(0xf9)](constants_1[_0x68ab7e(0xea)],this[_0x68ab7e(0xf1)],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Synchronization_Status__c']:_0x324433,[constants_1[_0x68ab7e(0xc1)]+_0x68ab7e(0xf8)]:Date[_0x68ab7e(0xfa)]()}):await this['salesforceRest'][_0x68ab7e(0xf9)](constants_1[_0x68ab7e(0xc0)],this[_0x68ab7e(0x100)],{[constants_1[_0x68ab7e(0xd3)]+_0x68ab7e(0x103)]:_0x324433});}['setCommitDto'](_0x31214c){const _0x382f93=a187_0x71e87b;this[_0x382f93(0xf7)]=_0x31214c;}[a187_0x71e87b(0xeb)](){const _0x483cdb=a187_0x71e87b;return this[_0x483cdb(0xc3)];}[a187_0x71e87b(0xcb)](){const _0x277827=a187_0x71e87b;return this[_0x277827(0x100)];}['getBranchId'](){const _0x1c0711=a187_0x71e87b;return this[_0x1c0711(0xf1)];}};GitCommitService=__decorate([typedi_1[a187_0x71e87b(0xcf)]({'transient':!![]}),__metadata(a187_0x71e87b(0xd5),[salesforce_git_sync_service_1[a187_0x71e87b(0xfd)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a187_0x71e87b(0x114)],salesforce_service_1[a187_0x71e87b(0xda)]])],GitCommitService),exports[a187_0x71e87b(0xef)]=GitCommitService;