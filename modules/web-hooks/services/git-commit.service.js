const a187_0x48d74b=a187_0x24a8;(function(_0x39e57a,_0x49561f){const _0x848386=a187_0x24a8,_0x1f0930=_0x39e57a();while(!![]){try{const _0x1b6501=parseInt(_0x848386(0x71))/0x1+-parseInt(_0x848386(0xa4))/0x2+parseInt(_0x848386(0x6b))/0x3+-parseInt(_0x848386(0xa8))/0x4+-parseInt(_0x848386(0x9b))/0x5+parseInt(_0x848386(0x8f))/0x6+parseInt(_0x848386(0x68))/0x7;if(_0x1b6501===_0x49561f)break;else _0x1f0930['push'](_0x1f0930['shift']());}catch(_0x46f7c4){_0x1f0930['push'](_0x1f0930['shift']());}}}(a187_0x51b1,0xb0963));const a187_0x1869c4=(function(){let _0x532c91=!![];return function(_0xa1de00,_0x49486d){const _0x270ba8=_0x532c91?function(){if(_0x49486d){const _0x3ad455=_0x49486d['apply'](_0xa1de00,arguments);return _0x49486d=null,_0x3ad455;}}:function(){};return _0x532c91=![],_0x270ba8;};}()),a187_0x19bb36=a187_0x1869c4(this,function(){const _0x23a704=a187_0x24a8;return a187_0x19bb36[_0x23a704(0xb4)]()[_0x23a704(0x79)](_0x23a704(0xb7))[_0x23a704(0xb4)]()['constructor'](a187_0x19bb36)['search'](_0x23a704(0xb7));});a187_0x19bb36();'use strict';var __decorate=this&&this['__decorate']||function(_0x4b2dcb,_0x4a0343,_0x27b218,_0x28cf4c){const _0x18d3d7=a187_0x24a8;var _0x1987d6=arguments[_0x18d3d7(0xab)],_0x1b9327=_0x1987d6<0x3?_0x4a0343:_0x28cf4c===null?_0x28cf4c=Object[_0x18d3d7(0x89)](_0x4a0343,_0x27b218):_0x28cf4c,_0x42b134;if(typeof Reflect===_0x18d3d7(0x90)&&typeof Reflect['decorate']==='function')_0x1b9327=Reflect[_0x18d3d7(0x7a)](_0x4b2dcb,_0x4a0343,_0x27b218,_0x28cf4c);else{for(var _0x5893a4=_0x4b2dcb[_0x18d3d7(0xab)]-0x1;_0x5893a4>=0x0;_0x5893a4--)if(_0x42b134=_0x4b2dcb[_0x5893a4])_0x1b9327=(_0x1987d6<0x3?_0x42b134(_0x1b9327):_0x1987d6>0x3?_0x42b134(_0x4a0343,_0x27b218,_0x1b9327):_0x42b134(_0x4a0343,_0x27b218))||_0x1b9327;}return _0x1987d6>0x3&&_0x1b9327&&Object[_0x18d3d7(0x81)](_0x4a0343,_0x27b218,_0x1b9327),_0x1b9327;},__metadata=this&&this[a187_0x48d74b(0xb5)]||function(_0xb19e20,_0xe0c106){const _0x1264dd=a187_0x48d74b;if(typeof Reflect===_0x1264dd(0x90)&&typeof Reflect[_0x1264dd(0x8c)]===_0x1264dd(0x9c))return Reflect[_0x1264dd(0x8c)](_0xb19e20,_0xe0c106);},GitCommitService_1;function a187_0x24a8(_0x28dc16,_0x565afa){const _0x49808a=a187_0x51b1();return a187_0x24a8=function(_0x19bb36,_0x1869c4){_0x19bb36=_0x19bb36-0x65;let _0x51b1c2=_0x49808a[_0x19bb36];return _0x51b1c2;},a187_0x24a8(_0x28dc16,_0x565afa);}Object[a187_0x48d74b(0x81)](exports,a187_0x48d74b(0xa0),{'value':!![]}),exports[a187_0x48d74b(0x7e)]=void 0x0;const constants_1=require(a187_0x48d74b(0x94)),core_1=require(a187_0x48d74b(0x80)),parser_1=require(a187_0x48d74b(0x9f)),salesforce_git_sync_service_1=require(a187_0x48d74b(0x6f)),salesforce_rest_service_1=require(a187_0x48d74b(0xb0)),typedi_1=require(a187_0x48d74b(0x8e)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a187_0x48d74b(0xa9)),git_commit_utils_1=require('../utils/git-commit.utils');function a187_0x51b1(){const _0x4d4a28=['splice','setCommitDto','FLOSUM_GIT_NAMESPACE','TASKS_PER_TICK','salesforceGitSync','fetchRepositoryOrBranchData','5396490oILUmi','function','salesforceSync','getBranchId','../../parsers/mdapi/parser','__esModule','map','includes','branchId','2282154njwgSV','Synchronization_Status__c','salesforceRest','MDApiParser','4575316CxsHzC','../../salesforce/services/salesforce.service','fetchBranchComponents','length','fetchRepositoryComponents','getComponentRecordTypes','catch','find','../../salesforce/services/salesforce-rest.service','repositoryId','parse','filter','toString','__metadata','crc','(((.+)+)+)+$','getRepositoryId','SalesforceService','lastCommit','push','repositoryGit','getRemoteStateAttachmentId','16445695qnoMYL','Logger','master','2135691uONufZ','retrieveAttachment','updateStatus','getRecordTypes','../../salesforce/services/salesforce-git-sync.service','proceedFile','404315AxJeau','SalesforceSyncService','then','FLOSUM_REPOSITORY','fetchBranchComponentsByFilenames','componentsMetadata','fileName','design:paramtypes','search','decorate','branch','string','logger','GitCommitService','getBranchRecordByName','../../../core','defineProperty','Service','updateRemoteState','name','gitCommit','createCommit','log','fileNames','getOwnPropertyDescriptor','salesforce','SalesforceRestService','metadata','syncRecord','typedi','3731436qsXIzD','object','type','fetchRepositoryComponentsByFilenames','proceeding\x20file\x20%s','../../../constants'];a187_0x51b1=function(){return _0x4d4a28;};return a187_0x51b1();}let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x57d2a6,_0x10cf43,_0x3d2d99,_0x3107b5){const _0x4500a1=a187_0x48d74b;this[_0x4500a1(0x99)]=_0x57d2a6,this[_0x4500a1(0xa6)]=_0x10cf43,this[_0x4500a1(0x9d)]=_0x3d2d99,this[_0x4500a1(0x8a)]=_0x3107b5,this[_0x4500a1(0x98)]=0xc8,this[_0x4500a1(0x7d)]=new core_1[(_0x4500a1(0x69))](GitCommitService_1[_0x4500a1(0x84)]);}get[a187_0x48d74b(0xb1)](){const _0x773b30=a187_0x48d74b;var _0x473047;return((_0x473047=this[_0x773b30(0x8d)])===null||_0x473047===void 0x0?void 0x0:_0x473047[_0x773b30(0xb1)])||'';}get['branchId'](){const _0x49c873=a187_0x48d74b;var _0x24c938;return((_0x24c938=this[_0x49c873(0x8d)])===null||_0x24c938===void 0x0?void 0x0:_0x24c938[_0x49c873(0xa3)])||'';}async[a187_0x48d74b(0x86)](_0x2d8585){const _0x5bb64b=a187_0x48d74b;return this['salesforceGitSync']['createCommit'](_0x2d8585,this[_0x5bb64b(0xb1)]);}async['checkSyncStatus'](_0xb536f){const _0x2771b0=a187_0x48d74b;if(this[_0x2771b0(0x8d)]){const _0x4236e8=await this[_0x2771b0(0x9d)][_0x2771b0(0x67)](this[_0x2771b0(0x8d)]),_0x3d9b2b=await this[_0x2771b0(0x8a)][_0x2771b0(0x6c)](_0x4236e8)[_0x2771b0(0x73)](_0x41401b=>typeof _0x41401b===_0x2771b0(0x7c)?JSON['parse'](_0x41401b):_0x41401b)[_0x2771b0(0xae)](()=>({}));if(_0x3d9b2b[this[_0x2771b0(0x85)][_0x2771b0(0x66)]]){if(_0x3d9b2b[this[_0x2771b0(0x85)]['repositoryGit']][_0x2771b0(0xba)]===_0xb536f)return!![];}return![];}return![];}async[a187_0x48d74b(0x83)](_0x1c4e54){const _0x197a1c=a187_0x48d74b;this[_0x197a1c(0x8d)]&&await this['salesforceSync'][_0x197a1c(0x83)](this[_0x197a1c(0x8d)],_0x1c4e54);}async[a187_0x48d74b(0x70)](_0x371ffd,_0x51eb33,_0x1044b0){const _0x4ad6ef=a187_0x48d74b;this[_0x4ad6ef(0x7d)][_0x4ad6ef(0x87)](_0x4ad6ef(0x93),_0x371ffd);const _0x1a8d39=this[_0x4ad6ef(0x76)][_0x4ad6ef(0xb3)](_0x55c1fa=>git_commit_utils_1['isPathsEquals'](_0x55c1fa[_0x4ad6ef(0x77)],_0x371ffd)),_0x5ebadf=[],_0xf3f8b3=[],_0x993a3a=[],_0x1eb5e5=new parser_1[(_0x4ad6ef(0xa7))](_0x51eb33,[_0x371ffd],_0x1044b0),_0x50fff4=await _0x1eb5e5[_0x4ad6ef(0xb2)](),_0x31fc03=_0x50fff4['map'](_0x5c1ad0=>{const _0x43327c=_0x4ad6ef,_0x1581d6=_0x1a8d39[_0x43327c(0xaf)](_0x470757=>_0x470757[_0x43327c(0x84)]===_0x5c1ad0[_0x43327c(0x84)]&&_0x470757[_0x43327c(0x91)]===_0x5c1ad0['type']);if(!_0x1581d6){const _0x38c4c2={'crc32':_0x5c1ad0[_0x43327c(0xb6)],'fileName':_0x5c1ad0['filePath'],'id':null,'version':0x1,'name':_0x5c1ad0[_0x43327c(0x84)],'type':_0x5c1ad0[_0x43327c(0x91)]};return this[_0x43327c(0x76)][_0x43327c(0x65)](_0x38c4c2),_0x1a8d39[_0x43327c(0x65)](_0x38c4c2),_0x993a3a[_0x43327c(0x65)](_0x38c4c2),_0xf3f8b3[_0x43327c(0x65)](_0x5c1ad0),null;}_0x993a3a[_0x43327c(0x65)](_0x1581d6);if(_0x5c1ad0['crc']===_0x1581d6['crc32'])return null;return{'component':_0x5c1ad0,'meta':_0x1581d6};})[_0x4ad6ef(0xb3)](_0x8f2379=>!!_0x8f2379);_0x5ebadf['push'](..._0x31fc03);const _0x8a26a8=_0x1a8d39[_0x4ad6ef(0xb3)](_0x1f13f1=>!_0x993a3a[_0x4ad6ef(0xa2)](_0x1f13f1));return this[_0x4ad6ef(0x76)]=this[_0x4ad6ef(0x76)][_0x4ad6ef(0xb3)](_0x33bce7=>!_0x8a26a8[_0x4ad6ef(0xa2)](_0x33bce7)),{'inserted':_0xf3f8b3,'modified':_0x5ebadf,'removed':_0x8a26a8[_0x4ad6ef(0xa1)](({id:_0x3034f6,name:_0x2a7a17,type:_0x3a209b})=>({'id':_0x3034f6,'name':_0x2a7a17,'type':_0x3a209b}))};}async[a187_0x48d74b(0x9a)](){const _0x11e9ab=a187_0x48d74b;this['syncRecord']=this[_0x11e9ab(0x85)][_0x11e9ab(0x7b)]===_0x11e9ab(0x6a)?await this[_0x11e9ab(0x9d)]['getRepositoryRecordByName'](this[_0x11e9ab(0x85)]['repository']):await this['salesforceSync'][_0x11e9ab(0x7f)](this[_0x11e9ab(0x85)][_0x11e9ab(0x7b)]),this['recordTypes']=await this['salesforceGitSync'][_0x11e9ab(0xad)]();}async['fetchComponentsMetadata'](_0x3fa21c){const _0x35b93c=a187_0x48d74b,_0x16f213=[...this[_0x35b93c(0x85)][_0x35b93c(0x88)]];if(this[_0x35b93c(0x85)]['force']||_0x3fa21c){this[_0x35b93c(0x76)]=this[_0x35b93c(0xa3)]?await this[_0x35b93c(0x99)][_0x35b93c(0xaa)](this[_0x35b93c(0xa3)]):await this[_0x35b93c(0x99)][_0x35b93c(0xac)](this['repositoryId']);return;}this[_0x35b93c(0x76)]=[];while(_0x16f213[_0x35b93c(0xab)]){const _0x76d355=_0x16f213[_0x35b93c(0x95)](0x0,this[_0x35b93c(0x98)]),_0x31a8b0=this[_0x35b93c(0xa3)]?await this[_0x35b93c(0x99)][_0x35b93c(0x75)](_0x76d355,this[_0x35b93c(0xa3)]):await this[_0x35b93c(0x99)][_0x35b93c(0x92)](_0x76d355,this[_0x35b93c(0xb1)]);this[_0x35b93c(0x76)][_0x35b93c(0x65)](..._0x31a8b0);}}async[a187_0x48d74b(0x6d)](_0x43b11d){const _0x505aed=a187_0x48d74b;this['branchId']?await this[_0x505aed(0xa6)]['patch'](constants_1['FLOSUM_BRANCH'],this['branchId'],{[constants_1[_0x505aed(0x97)]+_0x505aed(0xa5)]:_0x43b11d}):await this['salesforceRest']['patch'](constants_1[_0x505aed(0x74)],this[_0x505aed(0xb1)],{[constants_1[_0x505aed(0x97)]+_0x505aed(0xa5)]:_0x43b11d});}[a187_0x48d74b(0x96)](_0x34a95e){const _0x5d4f6c=a187_0x48d74b;this[_0x5d4f6c(0x85)]=_0x34a95e;}[a187_0x48d74b(0x6e)](){return this['recordTypes'];}[a187_0x48d74b(0xb8)](){const _0x3f7586=a187_0x48d74b;return this[_0x3f7586(0xb1)];}[a187_0x48d74b(0x9e)](){return this['branchId'];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a187_0x48d74b(0x82)]({'transient':!![]}),__metadata(a187_0x48d74b(0x78),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1[a187_0x48d74b(0x8b)],salesforce_sync_service_1[a187_0x48d74b(0x72)],salesforce_service_1[a187_0x48d74b(0xb9)]])],GitCommitService),exports[a187_0x48d74b(0x7e)]=GitCommitService;