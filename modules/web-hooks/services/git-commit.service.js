const a187_0x559ea1=a187_0x4ffd;(function(_0x3c0213,_0xe0de92){const _0x3316e7=a187_0x4ffd,_0x146c2=_0x3c0213();while(!![]){try{const _0x3dbe23=-parseInt(_0x3316e7(0xac))/0x1*(parseInt(_0x3316e7(0xc8))/0x2)+parseInt(_0x3316e7(0x84))/0x3*(parseInt(_0x3316e7(0xc0))/0x4)+parseInt(_0x3316e7(0x9d))/0x5+-parseInt(_0x3316e7(0xb6))/0x6*(parseInt(_0x3316e7(0xc1))/0x7)+-parseInt(_0x3316e7(0xb8))/0x8+parseInt(_0x3316e7(0xbb))/0x9+-parseInt(_0x3316e7(0xb5))/0xa;if(_0x3dbe23===_0xe0de92)break;else _0x146c2['push'](_0x146c2['shift']());}catch(_0x4fb870){_0x146c2['push'](_0x146c2['shift']());}}}(a187_0x3cda,0x6fd6e));const a187_0x3924a8=(function(){let _0x328a08=!![];return function(_0x3f2c5e,_0x99de67){const _0x219d5b=_0x328a08?function(){const _0x4e781d=a187_0x4ffd;if(_0x99de67){const _0x47711a=_0x99de67[_0x4e781d(0x9a)](_0x3f2c5e,arguments);return _0x99de67=null,_0x47711a;}}:function(){};return _0x328a08=![],_0x219d5b;};}()),a187_0x20d950=a187_0x3924a8(this,function(){const _0x340af5=a187_0x4ffd;return a187_0x20d950['toString']()['search'](_0x340af5(0x9e))['toString']()['constructor'](a187_0x20d950)[_0x340af5(0xba)]('(((.+)+)+)+$');});a187_0x20d950();'use strict';function a187_0x4ffd(_0x56a2d5,_0x5032a5){const _0x55b0ab=a187_0x3cda();return a187_0x4ffd=function(_0x20d950,_0x3924a8){_0x20d950=_0x20d950-0x7e;let _0x3cda66=_0x55b0ab[_0x20d950];return _0x3cda66;},a187_0x4ffd(_0x56a2d5,_0x5032a5);}function a187_0x3cda(){const _0x597c56=['fileName','FLOSUM_GIT_NAMESPACE','checkSyncStatus','componentsMetadata','filter','syncRecord','push','patch','string','name','fileNames','fetchBranchComponents','MDApiParser','Synchronization_Status__c','SalesforceService','fetchRepositoryComponents','apply','function','lastCommit','3510780CSAlCT','(((.+)+)+)+$','../../parsers/mdapi/parser','splice','crc','__metadata','parse','getOwnPropertyDescriptor','repositoryGit','SalesforceRestService','salesforceGitSync','../../salesforce/services/salesforce-git-sync.service','fetchRepositoryComponentsByFilenames','map','salesforceSync','3aVhYeW','getRemoteStateAttachmentId','createCommit','proceedFile','find','getComponentRecordTypes','fetchRepositoryOrBranchData','../../../constants','updateStatus','12872200KUmVHM','24828kMwTNi','branchId','3447856FCxzEF','salesforceRest','search','6322428AZzgoK','object','Service','getRepositoryRecordByName','salesforce','11272fKIsPq','35jQOxiu','master','logger','updateRemoteState','design:paramtypes','repositoryId','log','61676vvvLVX','FLOSUM_BRANCH','gitCommit','__esModule','TASKS_PER_TICK','filePath','../../salesforce/services/salesforce.service','isPathsEquals','catch','../utils/git-commit.utils','then','FLOSUM_REPOSITORY','GitCommitService','fetchBranchComponentsByFilenames','SalesforceSyncService','includes','type','decorate','SalesforceGitSyncService','recordTypes','branch','942mWsURt','../../salesforce/services/salesforce-rest.service','length','getBranchRecordByName','getBranchId','metadata'];a187_0x3cda=function(){return _0x597c56;};return a187_0x3cda();}var __decorate=this&&this['__decorate']||function(_0x3c7b41,_0x336ca1,_0x50023a,_0x3e6292){const _0x4a44f8=a187_0x4ffd;var _0x22c48b=arguments[_0x4a44f8(0x86)],_0x3da24b=_0x22c48b<0x3?_0x336ca1:_0x3e6292===null?_0x3e6292=Object[_0x4a44f8(0xa4)](_0x336ca1,_0x50023a):_0x3e6292,_0x203982;if(typeof Reflect===_0x4a44f8(0xbc)&&typeof Reflect[_0x4a44f8(0x80)]===_0x4a44f8(0x9b))_0x3da24b=Reflect[_0x4a44f8(0x80)](_0x3c7b41,_0x336ca1,_0x50023a,_0x3e6292);else{for(var _0x40024b=_0x3c7b41[_0x4a44f8(0x86)]-0x1;_0x40024b>=0x0;_0x40024b--)if(_0x203982=_0x3c7b41[_0x40024b])_0x3da24b=(_0x22c48b<0x3?_0x203982(_0x3da24b):_0x22c48b>0x3?_0x203982(_0x336ca1,_0x50023a,_0x3da24b):_0x203982(_0x336ca1,_0x50023a))||_0x3da24b;}return _0x22c48b>0x3&&_0x3da24b&&Object['defineProperty'](_0x336ca1,_0x50023a,_0x3da24b),_0x3da24b;},__metadata=this&&this[a187_0x559ea1(0xa2)]||function(_0x40c732,_0x448816){const _0x1feebb=a187_0x559ea1;if(typeof Reflect===_0x1feebb(0xbc)&&typeof Reflect[_0x1feebb(0x89)]===_0x1feebb(0x9b))return Reflect[_0x1feebb(0x89)](_0x40c732,_0x448816);},GitCommitService_1;Object['defineProperty'](exports,a187_0x559ea1(0xcb),{'value':!![]}),exports[a187_0x559ea1(0xd4)]=void 0x0;const constants_1=require(a187_0x559ea1(0xb3)),core_1=require('../../../core'),parser_1=require(a187_0x559ea1(0x9f)),salesforce_git_sync_service_1=require(a187_0x559ea1(0xa8)),salesforce_rest_service_1=require(a187_0x559ea1(0x85)),typedi_1=require('typedi'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a187_0x559ea1(0xce)),git_commit_utils_1=require(a187_0x559ea1(0xd1));let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x3bf2cd,_0x56b5f9,_0x3f333f,_0xdb0c94){const _0x331ef6=a187_0x559ea1;this[_0x331ef6(0xa7)]=_0x3bf2cd,this['salesforceRest']=_0x56b5f9,this[_0x331ef6(0xab)]=_0x3f333f,this[_0x331ef6(0xbf)]=_0xdb0c94,this['TASKS_PER_TICK']=0xc8,this[_0x331ef6(0xc3)]=new core_1['Logger'](GitCommitService_1[_0x331ef6(0x93)]);}get[a187_0x559ea1(0xc6)](){const _0x583e8d=a187_0x559ea1;var _0x6591c;return((_0x6591c=this[_0x583e8d(0x8f)])===null||_0x6591c===void 0x0?void 0x0:_0x6591c['repositoryId'])||'';}get[a187_0x559ea1(0xb7)](){const _0x3426ef=a187_0x559ea1;var _0x37c1f8;return((_0x37c1f8=this[_0x3426ef(0x8f)])===null||_0x37c1f8===void 0x0?void 0x0:_0x37c1f8[_0x3426ef(0xb7)])||'';}async[a187_0x559ea1(0xae)](_0x10f605){const _0x3672=a187_0x559ea1;return this['salesforceGitSync'][_0x3672(0xae)](_0x10f605,this[_0x3672(0xc6)]);}async[a187_0x559ea1(0x8c)](_0x52b7e7){const _0x200efb=a187_0x559ea1;if(this[_0x200efb(0x8f)]){const _0x4e4a26=await this[_0x200efb(0xab)][_0x200efb(0xad)](this[_0x200efb(0x8f)]),_0x44029d=await this['salesforce']['retrieveAttachment'](_0x4e4a26)[_0x200efb(0xd2)](_0x470bbc=>typeof _0x470bbc===_0x200efb(0x92)?JSON[_0x200efb(0xa3)](_0x470bbc):_0x470bbc)[_0x200efb(0xd0)](()=>({}));if(_0x44029d[this[_0x200efb(0xca)][_0x200efb(0xa5)]]){if(_0x44029d[this[_0x200efb(0xca)][_0x200efb(0xa5)]][_0x200efb(0x9c)]===_0x52b7e7)return!![];}return![];}return![];}async[a187_0x559ea1(0xc4)](_0x35a7d0){const _0x6ff7b5=a187_0x559ea1;this[_0x6ff7b5(0x8f)]&&await this[_0x6ff7b5(0xab)][_0x6ff7b5(0xc4)](this[_0x6ff7b5(0x8f)],_0x35a7d0);}async[a187_0x559ea1(0xaf)](_0x42e623,_0x12a8f5,_0xc8067d){const _0x186a5e=a187_0x559ea1;this['logger'][_0x186a5e(0xc7)]('proceeding\x20file\x20%s',_0x42e623);const _0x32fd65=this[_0x186a5e(0x8d)]['filter'](_0x75aa6c=>git_commit_utils_1[_0x186a5e(0xcf)](_0x75aa6c[_0x186a5e(0x8a)],_0x42e623)),_0x2e1c9a=[],_0x318f33=[],_0x4cddee=[],_0x14ce68=new parser_1[(_0x186a5e(0x96))](_0x12a8f5,[_0x42e623],_0xc8067d),_0x32e66f=await _0x14ce68[_0x186a5e(0xa3)](),_0x20f8ff=_0x32e66f[_0x186a5e(0xaa)](_0x58c5ad=>{const _0x5be36e=_0x186a5e,_0x589f9=_0x32fd65[_0x5be36e(0xb0)](_0xcbedf7=>_0xcbedf7[_0x5be36e(0x93)]===_0x58c5ad[_0x5be36e(0x93)]&&_0xcbedf7[_0x5be36e(0x7f)]===_0x58c5ad['type']);if(!_0x589f9){const _0x3997df={'crc32':_0x58c5ad['crc'],'fileName':_0x58c5ad[_0x5be36e(0xcd)],'id':null,'version':0x1,'name':_0x58c5ad[_0x5be36e(0x93)],'type':_0x58c5ad[_0x5be36e(0x7f)]};return this[_0x5be36e(0x8d)][_0x5be36e(0x90)](_0x3997df),_0x32fd65[_0x5be36e(0x90)](_0x3997df),_0x4cddee[_0x5be36e(0x90)](_0x3997df),_0x318f33['push'](_0x58c5ad),null;}_0x4cddee[_0x5be36e(0x90)](_0x589f9);if(_0x58c5ad[_0x5be36e(0xa1)]===_0x589f9['crc32'])return null;return{'component':_0x58c5ad,'meta':_0x589f9};})['filter'](_0x3f70f=>!!_0x3f70f);_0x2e1c9a[_0x186a5e(0x90)](..._0x20f8ff);const _0x342279=_0x32fd65[_0x186a5e(0x8e)](_0x385ceb=>!_0x4cddee[_0x186a5e(0x7e)](_0x385ceb));return this[_0x186a5e(0x8d)]=this[_0x186a5e(0x8d)][_0x186a5e(0x8e)](_0x1e327b=>!_0x342279[_0x186a5e(0x7e)](_0x1e327b)),{'inserted':_0x318f33,'modified':_0x2e1c9a,'removed':_0x342279[_0x186a5e(0xaa)](({id:_0x2b7b5b,name:_0x3d240f,type:_0x2c5eb5})=>({'id':_0x2b7b5b,'name':_0x3d240f,'type':_0x2c5eb5}))};}async[a187_0x559ea1(0xb2)](){const _0xb860fc=a187_0x559ea1;this[_0xb860fc(0x8f)]=this[_0xb860fc(0xca)][_0xb860fc(0x83)]===_0xb860fc(0xc2)?await this[_0xb860fc(0xab)][_0xb860fc(0xbe)](this[_0xb860fc(0xca)]['repository']):await this[_0xb860fc(0xab)][_0xb860fc(0x87)](this[_0xb860fc(0xca)][_0xb860fc(0x83)]),this[_0xb860fc(0x82)]=await this[_0xb860fc(0xa7)][_0xb860fc(0xb1)]();}async['fetchComponentsMetadata'](_0xbec885){const _0x31d322=a187_0x559ea1,_0x17770e=[...this[_0x31d322(0xca)][_0x31d322(0x94)]];if(this[_0x31d322(0xca)]['force']||_0xbec885){this['componentsMetadata']=this[_0x31d322(0xb7)]?await this[_0x31d322(0xa7)][_0x31d322(0x95)](this[_0x31d322(0xb7)]):await this['salesforceGitSync'][_0x31d322(0x99)](this[_0x31d322(0xc6)]);return;}this['componentsMetadata']=[];while(_0x17770e[_0x31d322(0x86)]){const _0x1e3935=_0x17770e[_0x31d322(0xa0)](0x0,this[_0x31d322(0xcc)]),_0x128182=this[_0x31d322(0xb7)]?await this[_0x31d322(0xa7)][_0x31d322(0xd5)](_0x1e3935,this[_0x31d322(0xb7)]):await this[_0x31d322(0xa7)][_0x31d322(0xa9)](_0x1e3935,this[_0x31d322(0xc6)]);this['componentsMetadata'][_0x31d322(0x90)](..._0x128182);}}async[a187_0x559ea1(0xb4)](_0x998cff){const _0x8bc4dd=a187_0x559ea1;this['branchId']?await this[_0x8bc4dd(0xb9)][_0x8bc4dd(0x91)](constants_1[_0x8bc4dd(0xc9)],this['branchId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x8bc4dd(0x97)]:_0x998cff}):await this[_0x8bc4dd(0xb9)][_0x8bc4dd(0x91)](constants_1[_0x8bc4dd(0xd3)],this[_0x8bc4dd(0xc6)],{[constants_1[_0x8bc4dd(0x8b)]+_0x8bc4dd(0x97)]:_0x998cff});}['setCommitDto'](_0x5dd557){const _0x53b88a=a187_0x559ea1;this[_0x53b88a(0xca)]=_0x5dd557;}['getRecordTypes'](){return this['recordTypes'];}['getRepositoryId'](){return this['repositoryId'];}[a187_0x559ea1(0x88)](){return this['branchId'];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a187_0x559ea1(0xbd)]({'transient':!![]}),__metadata(a187_0x559ea1(0xc5),[salesforce_git_sync_service_1[a187_0x559ea1(0x81)],salesforce_rest_service_1[a187_0x559ea1(0xa6)],salesforce_sync_service_1[a187_0x559ea1(0xd6)],salesforce_service_1[a187_0x559ea1(0x98)]])],GitCommitService),exports[a187_0x559ea1(0xd4)]=GitCommitService;