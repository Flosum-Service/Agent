const a187_0x1e47ea=a187_0x5748;(function(_0xbe3577,_0x470723){const _0x31c762=a187_0x5748,_0x1921f3=_0xbe3577();while(!![]){try{const _0x25e503=parseInt(_0x31c762(0x13d))/0x1*(parseInt(_0x31c762(0x125))/0x2)+-parseInt(_0x31c762(0x12a))/0x3*(parseInt(_0x31c762(0xf2))/0x4)+-parseInt(_0x31c762(0x120))/0x5*(-parseInt(_0x31c762(0x140))/0x6)+parseInt(_0x31c762(0x11b))/0x7+parseInt(_0x31c762(0xfd))/0x8*(-parseInt(_0x31c762(0x117))/0x9)+-parseInt(_0x31c762(0x118))/0xa+-parseInt(_0x31c762(0xfe))/0xb;if(_0x25e503===_0x470723)break;else _0x1921f3['push'](_0x1921f3['shift']());}catch(_0x52941a){_0x1921f3['push'](_0x1921f3['shift']());}}}(a187_0x19b6,0x40909));const a187_0x161168=(function(){let _0x44d11c=!![];return function(_0x30ccce,_0x31e12a){const _0x71d4e4=_0x44d11c?function(){if(_0x31e12a){const _0x5092b3=_0x31e12a['apply'](_0x30ccce,arguments);return _0x31e12a=null,_0x5092b3;}}:function(){};return _0x44d11c=![],_0x71d4e4;};}()),a187_0x55da8d=a187_0x161168(this,function(){const _0x25a47b=a187_0x5748;return a187_0x55da8d[_0x25a47b(0x109)]()[_0x25a47b(0x114)]('(((.+)+)+)+$')['toString']()[_0x25a47b(0x112)](a187_0x55da8d)[_0x25a47b(0x114)](_0x25a47b(0xe5));});a187_0x55da8d();'use strict';var __decorate=this&&this['__decorate']||function(_0x351477,_0x403a64,_0x2da819,_0x416261){const _0x1f7086=a187_0x5748;var _0x49aa7f=arguments[_0x1f7086(0x10a)],_0x46c650=_0x49aa7f<0x3?_0x403a64:_0x416261===null?_0x416261=Object['getOwnPropertyDescriptor'](_0x403a64,_0x2da819):_0x416261,_0x44c042;if(typeof Reflect===_0x1f7086(0x10f)&&typeof Reflect[_0x1f7086(0x10d)]==='function')_0x46c650=Reflect[_0x1f7086(0x10d)](_0x351477,_0x403a64,_0x2da819,_0x416261);else{for(var _0xc81c77=_0x351477[_0x1f7086(0x10a)]-0x1;_0xc81c77>=0x0;_0xc81c77--)if(_0x44c042=_0x351477[_0xc81c77])_0x46c650=(_0x49aa7f<0x3?_0x44c042(_0x46c650):_0x49aa7f>0x3?_0x44c042(_0x403a64,_0x2da819,_0x46c650):_0x44c042(_0x403a64,_0x2da819))||_0x46c650;}return _0x49aa7f>0x3&&_0x46c650&&Object[_0x1f7086(0xf1)](_0x403a64,_0x2da819,_0x46c650),_0x46c650;},__metadata=this&&this[a187_0x1e47ea(0x124)]||function(_0x4c3804,_0xce621c){const _0x12d65f=a187_0x1e47ea;if(typeof Reflect===_0x12d65f(0x10f)&&typeof Reflect['metadata']===_0x12d65f(0x134))return Reflect[_0x12d65f(0xff)](_0x4c3804,_0xce621c);},GitCommitService_1;function a187_0x5748(_0x530e8a,_0x586c60){const _0xe97bb6=a187_0x19b6();return a187_0x5748=function(_0x55da8d,_0x161168){_0x55da8d=_0x55da8d-0xe5;let _0x19b65e=_0xe97bb6[_0x55da8d];return _0x19b65e;},a187_0x5748(_0x530e8a,_0x586c60);}function a187_0x19b6(){const _0x37073c=['fetchBranchComponentsByFilenames','object','createCommit','patch','constructor','Logger','search','branch','TASKS_PER_TICK','108oUPioJ','2000710BRKwfz','retrieveAttachment','proceeding\x20file\x20%s','935179wbgiQP','repository','../../salesforce/services/salesforce.service','repositoryId','salesforceRest','2041625IgIjDC','fileNames','parse','SalesforceSyncService','__metadata','2xiFmmn','design:paramtypes','salesforce','getRepositoryId','salesforceSync','883533NvSHMJ','push','fetchRepositoryComponents','getComponentRecordTypes','SalesforceGitSyncService','map','then','logger','getBranchId','SalesforceService','function','componentsMetadata','repositoryGit','name','salesforceGitSync','GitCommitService','branchId','includes','fileName','368758ZazsBd','syncRecord','log','6kCrNAe','(((.+)+)+)+$','filePath','gitCommit','getRemoteStateAttachmentId','../../salesforce/services/salesforce-git-sync.service','getRecordTypes','master','getBranchRecordByName','lastCommit','string','Synchronization_Status__c','setCommitDto','defineProperty','4TAZTDw','crc32','filter','getRepositoryRecordByName','../../parsers/mdapi/parser','fetchRepositoryOrBranchData','splice','isPathsEquals','proceedFile','__esModule','updateRemoteState','74832KIaAcO','433323LjcSHZ','metadata','../utils/git-commit.utils','fetchBranchComponents','fetchRepositoryComponentsByFilenames','FLOSUM_GIT_NAMESPACE','type','Service','fetchComponentsMetadata','../../../constants','../../salesforce/services/salesforce-rest.service','toString','length','SalesforceRestService','typedi','decorate'];a187_0x19b6=function(){return _0x37073c;};return a187_0x19b6();}Object['defineProperty'](exports,a187_0x1e47ea(0xfb),{'value':!![]}),exports[a187_0x1e47ea(0x139)]=void 0x0;const constants_1=require(a187_0x1e47ea(0x107)),core_1=require('../../../core'),parser_1=require(a187_0x1e47ea(0xf6)),salesforce_git_sync_service_1=require(a187_0x1e47ea(0xe9)),salesforce_rest_service_1=require(a187_0x1e47ea(0x108)),typedi_1=require(a187_0x1e47ea(0x10c)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a187_0x1e47ea(0x11d)),git_commit_utils_1=require(a187_0x1e47ea(0x100));let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x5f4c8d,_0x5a0854,_0x48523c,_0x10bfde){const _0x7eabd8=a187_0x1e47ea;this[_0x7eabd8(0x138)]=_0x5f4c8d,this['salesforceRest']=_0x5a0854,this['salesforceSync']=_0x48523c,this[_0x7eabd8(0x127)]=_0x10bfde,this['TASKS_PER_TICK']=0xc8,this[_0x7eabd8(0x131)]=new core_1[(_0x7eabd8(0x113))](GitCommitService_1[_0x7eabd8(0x137)]);}get[a187_0x1e47ea(0x11e)](){const _0x23c585=a187_0x1e47ea;var _0x317fce;return((_0x317fce=this[_0x23c585(0x13e)])===null||_0x317fce===void 0x0?void 0x0:_0x317fce[_0x23c585(0x11e)])||'';}get['branchId'](){const _0xfdee07=a187_0x1e47ea;var _0x51d18e;return((_0x51d18e=this[_0xfdee07(0x13e)])===null||_0x51d18e===void 0x0?void 0x0:_0x51d18e[_0xfdee07(0x13a)])||'';}async['createCommit'](_0x124421){const _0x425b94=a187_0x1e47ea;return this[_0x425b94(0x138)][_0x425b94(0x110)](_0x124421,this[_0x425b94(0x11e)]);}async['checkSyncStatus'](_0x12173c){const _0xfe525d=a187_0x1e47ea;if(this[_0xfe525d(0x13e)]){const _0x25c9fd=await this[_0xfe525d(0x129)][_0xfe525d(0xe8)](this['syncRecord']),_0x22fcbf=await this[_0xfe525d(0x127)][_0xfe525d(0x119)](_0x25c9fd)[_0xfe525d(0x130)](_0x1ef436=>typeof _0x1ef436===_0xfe525d(0xee)?JSON[_0xfe525d(0x122)](_0x1ef436):_0x1ef436)['catch'](()=>({}));if(_0x22fcbf[this['gitCommit'][_0xfe525d(0x136)]]){if(_0x22fcbf[this[_0xfe525d(0xe7)][_0xfe525d(0x136)]][_0xfe525d(0xed)]===_0x12173c)return!![];}return![];}return![];}async[a187_0x1e47ea(0xfc)](_0x550ac7){const _0x5d9659=a187_0x1e47ea;this[_0x5d9659(0x13e)]&&await this['salesforceSync'][_0x5d9659(0xfc)](this['syncRecord'],_0x550ac7);}async[a187_0x1e47ea(0xfa)](_0x5350d8,_0x4bed47,_0x1d621a){const _0x262a3b=a187_0x1e47ea;this[_0x262a3b(0x131)][_0x262a3b(0x13f)](_0x262a3b(0x11a),_0x5350d8);const _0x24f68f=this[_0x262a3b(0x135)][_0x262a3b(0xf4)](_0x346ca8=>git_commit_utils_1[_0x262a3b(0xf9)](_0x346ca8[_0x262a3b(0x13c)],_0x5350d8)),_0x4c6835=[],_0x39d90b=[],_0x5d12cd=[],_0x2a51bb=new parser_1['MDApiParser'](_0x4bed47,[_0x5350d8],_0x1d621a),_0x3a79e3=await _0x2a51bb['parse'](),_0x38d6de=_0x3a79e3['map'](_0x2a1bab=>{const _0x37bebd=_0x262a3b,_0x882d00=_0x24f68f['find'](_0x191146=>_0x191146[_0x37bebd(0x137)]===_0x2a1bab['name']&&_0x191146[_0x37bebd(0x104)]===_0x2a1bab[_0x37bebd(0x104)]);if(!_0x882d00){const _0x4845ba={'crc32':_0x2a1bab['crc'],'fileName':_0x2a1bab[_0x37bebd(0xe6)],'id':null,'version':0x1,'name':_0x2a1bab[_0x37bebd(0x137)],'type':_0x2a1bab[_0x37bebd(0x104)]};return this[_0x37bebd(0x135)][_0x37bebd(0x12b)](_0x4845ba),_0x24f68f[_0x37bebd(0x12b)](_0x4845ba),_0x5d12cd[_0x37bebd(0x12b)](_0x4845ba),_0x39d90b[_0x37bebd(0x12b)](_0x2a1bab),null;}_0x5d12cd['push'](_0x882d00);if(_0x2a1bab['crc']===_0x882d00[_0x37bebd(0xf3)])return null;return{'component':_0x2a1bab,'meta':_0x882d00};})[_0x262a3b(0xf4)](_0x594b54=>!!_0x594b54);_0x4c6835['push'](..._0x38d6de);const _0x502726=_0x24f68f[_0x262a3b(0xf4)](_0xcb51d4=>!_0x5d12cd[_0x262a3b(0x13b)](_0xcb51d4));return this[_0x262a3b(0x135)]=this[_0x262a3b(0x135)][_0x262a3b(0xf4)](_0x207824=>!_0x502726[_0x262a3b(0x13b)](_0x207824)),{'inserted':_0x39d90b,'modified':_0x4c6835,'removed':_0x502726[_0x262a3b(0x12f)](({id:_0xbbc85d,name:_0x294621,type:_0x2ba809})=>({'id':_0xbbc85d,'name':_0x294621,'type':_0x2ba809}))};}async[a187_0x1e47ea(0xf7)](){const _0x305c67=a187_0x1e47ea;this[_0x305c67(0x13e)]=this['gitCommit'][_0x305c67(0x115)]===_0x305c67(0xeb)?await this[_0x305c67(0x129)][_0x305c67(0xf5)](this[_0x305c67(0xe7)][_0x305c67(0x11c)]):await this['salesforceSync'][_0x305c67(0xec)](this[_0x305c67(0xe7)][_0x305c67(0x115)]),this['recordTypes']=await this[_0x305c67(0x138)][_0x305c67(0x12d)]();}async[a187_0x1e47ea(0x106)](_0x43ffe5){const _0x48dc71=a187_0x1e47ea,_0x42ee5b=[...this[_0x48dc71(0xe7)][_0x48dc71(0x121)]];if(this['gitCommit']['force']||_0x43ffe5){this[_0x48dc71(0x135)]=this[_0x48dc71(0x13a)]?await this['salesforceGitSync'][_0x48dc71(0x101)](this[_0x48dc71(0x13a)]):await this[_0x48dc71(0x138)][_0x48dc71(0x12c)](this[_0x48dc71(0x11e)]);return;}this[_0x48dc71(0x135)]=[];while(_0x42ee5b[_0x48dc71(0x10a)]){const _0x4c2063=_0x42ee5b[_0x48dc71(0xf8)](0x0,this[_0x48dc71(0x116)]),_0x530187=this['branchId']?await this['salesforceGitSync'][_0x48dc71(0x10e)](_0x4c2063,this[_0x48dc71(0x13a)]):await this[_0x48dc71(0x138)][_0x48dc71(0x102)](_0x4c2063,this[_0x48dc71(0x11e)]);this[_0x48dc71(0x135)]['push'](..._0x530187);}}async['updateStatus'](_0x31414f){const _0x455ef2=a187_0x1e47ea;this[_0x455ef2(0x13a)]?await this[_0x455ef2(0x11f)][_0x455ef2(0x111)](constants_1['FLOSUM_BRANCH'],this['branchId'],{[constants_1[_0x455ef2(0x103)]+_0x455ef2(0xef)]:_0x31414f}):await this['salesforceRest'][_0x455ef2(0x111)](constants_1['FLOSUM_REPOSITORY'],this[_0x455ef2(0x11e)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x455ef2(0xef)]:_0x31414f});}[a187_0x1e47ea(0xf0)](_0x45e695){const _0x4d4ff2=a187_0x1e47ea;this[_0x4d4ff2(0xe7)]=_0x45e695;}[a187_0x1e47ea(0xea)](){return this['recordTypes'];}[a187_0x1e47ea(0x128)](){return this['repositoryId'];}[a187_0x1e47ea(0x132)](){const _0x628f25=a187_0x1e47ea;return this[_0x628f25(0x13a)];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a187_0x1e47ea(0x105)]({'transient':!![]}),__metadata(a187_0x1e47ea(0x126),[salesforce_git_sync_service_1[a187_0x1e47ea(0x12e)],salesforce_rest_service_1[a187_0x1e47ea(0x10b)],salesforce_sync_service_1[a187_0x1e47ea(0x123)],salesforce_service_1[a187_0x1e47ea(0x133)]])],GitCommitService),exports[a187_0x1e47ea(0x139)]=GitCommitService;