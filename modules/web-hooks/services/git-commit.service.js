const a187_0x286289=a187_0x5c8e;function a187_0x5499(){const _0x28196b=['crc','getBranchRecordByName','branch','design:paramtypes','3iWvdzk','updateRemoteState','getRepositoryRecordByName','push','fetchRepositoryComponentsByFilenames','fetchRepositoryComponents','2543814MTcVKR','name','length','Service','setCommitDto','function','10tkchhC','repositoryId','apply','Synchronization_Status__c','getOwnPropertyDescriptor','gitCommit','SalesforceGitSyncService','catch','../../parsers/mdapi/parser','branchId','filter','1331472hnuQqn','__esModule','force','typedi','search','salesforceSync','481044JeBvYV','TASKS_PER_TICK','fileNames','logger','../../salesforce/services/salesforce.service','isPathsEquals','2bgQbal','fetchRepositoryOrBranchData','constructor','SalesforceSyncService','syncRecord','defineProperty','../../salesforce/services/salesforce-git-sync.service','repositoryGit','master','getRemoteStateAttachmentId','map','recordTypes','FLOSUM_REPOSITORY','proceedFile','fetchBranchComponentsByFilenames','FLOSUM_BRANCH','updateStatus','20124WSzuVa','getRecordTypes','2504400alGEjE','1390081JgLCeY','lastCommit','../../../core','../../salesforce/services/salesforce-rest.service','componentsMetadata','checkSyncStatus','getComponentRecordTypes','object','createCommit','GitCommitService','(((.+)+)+)+$','repository','parse','toString','getRepositoryId','proceeding\x20file\x20%s','FLOSUM_GIT_NAMESPACE','patch','salesforceRest','metadata','type','5yrKAiZ','salesforceGitSync','../../salesforce/services/salesforce-sync.service','fileName','salesforce','509209GLMgAD','decorate'];a187_0x5499=function(){return _0x28196b;};return a187_0x5499();}(function(_0x359942,_0x5004b2){const _0x47f501=a187_0x5c8e,_0x3fe13a=_0x359942();while(!![]){try{const _0x1cf0c8=-parseInt(_0x47f501(0x176))/0x1*(-parseInt(_0x47f501(0x19f))/0x2)+parseInt(_0x47f501(0x17c))/0x3*(-parseInt(_0x47f501(0x193))/0x4)+-parseInt(_0x47f501(0x1c8))/0x5*(parseInt(_0x47f501(0x199))/0x6)+parseInt(_0x47f501(0x182))/0x7+-parseInt(_0x47f501(0x1b2))/0x8+-parseInt(_0x47f501(0x1b0))/0x9+parseInt(_0x47f501(0x188))/0xa*(parseInt(_0x47f501(0x1b3))/0xb);if(_0x1cf0c8===_0x5004b2)break;else _0x3fe13a['push'](_0x3fe13a['shift']());}catch(_0x8399d6){_0x3fe13a['push'](_0x3fe13a['shift']());}}}(a187_0x5499,0x4213e));const a187_0xfcd5bd=(function(){let _0x248468=!![];return function(_0x38aabb,_0x5077c1){const _0x2c83fc=_0x248468?function(){const _0x19cdef=a187_0x5c8e;if(_0x5077c1){const _0x2c22f2=_0x5077c1[_0x19cdef(0x18a)](_0x38aabb,arguments);return _0x5077c1=null,_0x2c22f2;}}:function(){};return _0x248468=![],_0x2c83fc;};}()),a187_0x4c67fe=a187_0xfcd5bd(this,function(){const _0x4e6258=a187_0x5c8e;return a187_0x4c67fe['toString']()['search']('(((.+)+)+)+$')[_0x4e6258(0x1c0)]()[_0x4e6258(0x1a1)](a187_0x4c67fe)[_0x4e6258(0x197)](_0x4e6258(0x1bd));});a187_0x4c67fe();function a187_0x5c8e(_0x5bf094,_0x4c016f){const _0x18f6f4=a187_0x5499();return a187_0x5c8e=function(_0x4c67fe,_0xfcd5bd){_0x4c67fe=_0x4c67fe-0x174;let _0x54996b=_0x18f6f4[_0x4c67fe];return _0x54996b;},a187_0x5c8e(_0x5bf094,_0x4c016f);}'use strict';var __decorate=this&&this['__decorate']||function(_0x23387a,_0x4f2108,_0x2b96a5,_0x40efba){const _0xc3bf06=a187_0x5c8e;var _0x46a32d=arguments[_0xc3bf06(0x184)],_0x329146=_0x46a32d<0x3?_0x4f2108:_0x40efba===null?_0x40efba=Object[_0xc3bf06(0x18c)](_0x4f2108,_0x2b96a5):_0x40efba,_0x57b170;if(typeof Reflect===_0xc3bf06(0x1ba)&&typeof Reflect[_0xc3bf06(0x177)]===_0xc3bf06(0x187))_0x329146=Reflect[_0xc3bf06(0x177)](_0x23387a,_0x4f2108,_0x2b96a5,_0x40efba);else{for(var _0xe3d209=_0x23387a[_0xc3bf06(0x184)]-0x1;_0xe3d209>=0x0;_0xe3d209--)if(_0x57b170=_0x23387a[_0xe3d209])_0x329146=(_0x46a32d<0x3?_0x57b170(_0x329146):_0x46a32d>0x3?_0x57b170(_0x4f2108,_0x2b96a5,_0x329146):_0x57b170(_0x4f2108,_0x2b96a5))||_0x329146;}return _0x46a32d>0x3&&_0x329146&&Object[_0xc3bf06(0x1a4)](_0x4f2108,_0x2b96a5,_0x329146),_0x329146;},__metadata=this&&this['__metadata']||function(_0x2dab04,_0x53fad4){const _0x3510fe=a187_0x5c8e;if(typeof Reflect===_0x3510fe(0x1ba)&&typeof Reflect[_0x3510fe(0x1c6)]===_0x3510fe(0x187))return Reflect[_0x3510fe(0x1c6)](_0x2dab04,_0x53fad4);},GitCommitService_1;Object[a187_0x286289(0x1a4)](exports,a187_0x286289(0x194),{'value':!![]}),exports[a187_0x286289(0x1bc)]=void 0x0;const constants_1=require('../../../constants'),core_1=require(a187_0x286289(0x1b5)),parser_1=require(a187_0x286289(0x190)),salesforce_git_sync_service_1=require(a187_0x286289(0x1a5)),salesforce_rest_service_1=require(a187_0x286289(0x1b6)),typedi_1=require(a187_0x286289(0x196)),salesforce_sync_service_1=require(a187_0x286289(0x1ca)),salesforce_service_1=require(a187_0x286289(0x19d)),git_commit_utils_1=require('../utils/git-commit.utils');let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x3ca34e,_0x3d0946,_0x4bdc65,_0xa84b78){const _0x47553b=a187_0x286289;this['salesforceGitSync']=_0x3ca34e,this[_0x47553b(0x1c5)]=_0x3d0946,this[_0x47553b(0x198)]=_0x4bdc65,this[_0x47553b(0x175)]=_0xa84b78,this[_0x47553b(0x19a)]=0xc8,this[_0x47553b(0x19c)]=new core_1['Logger'](GitCommitService_1[_0x47553b(0x183)]);}get[a187_0x286289(0x189)](){const _0x16a0de=a187_0x286289;var _0x16dce5;return((_0x16dce5=this[_0x16a0de(0x1a3)])===null||_0x16dce5===void 0x0?void 0x0:_0x16dce5[_0x16a0de(0x189)])||'';}get[a187_0x286289(0x191)](){const _0xb0166f=a187_0x286289;var _0x21a3ad;return((_0x21a3ad=this[_0xb0166f(0x1a3)])===null||_0x21a3ad===void 0x0?void 0x0:_0x21a3ad[_0xb0166f(0x191)])||'';}async[a187_0x286289(0x1bb)](_0x39cc6c){const _0x5cea2f=a187_0x286289;return this['salesforceGitSync'][_0x5cea2f(0x1bb)](_0x39cc6c,this[_0x5cea2f(0x189)]);}async[a187_0x286289(0x1b8)](_0x4a4a81){const _0x252891=a187_0x286289;if(this[_0x252891(0x1a3)]){const _0x154ff9=await this[_0x252891(0x198)][_0x252891(0x1a8)](this[_0x252891(0x1a3)]),_0x3ac11d=await this[_0x252891(0x175)]['retrieveAttachment'](_0x154ff9)['then'](_0x4b9df5=>typeof _0x4b9df5==='string'?JSON[_0x252891(0x1bf)](_0x4b9df5):_0x4b9df5)[_0x252891(0x18f)](()=>({}));if(_0x3ac11d[this[_0x252891(0x18d)][_0x252891(0x1a6)]]){if(_0x3ac11d[this[_0x252891(0x18d)][_0x252891(0x1a6)]][_0x252891(0x1b4)]===_0x4a4a81)return!![];}return![];}return![];}async[a187_0x286289(0x17d)](_0x1f883f){const _0x5f0c6b=a187_0x286289;this[_0x5f0c6b(0x1a3)]&&await this[_0x5f0c6b(0x198)][_0x5f0c6b(0x17d)](this[_0x5f0c6b(0x1a3)],_0x1f883f);}async[a187_0x286289(0x1ac)](_0x1e5b9e,_0x15fe00,_0x1e6c79){const _0x53ef41=a187_0x286289;this[_0x53ef41(0x19c)]['log'](_0x53ef41(0x1c2),_0x1e5b9e);const _0x405422=this[_0x53ef41(0x1b7)][_0x53ef41(0x192)](_0x5956ec=>git_commit_utils_1[_0x53ef41(0x19e)](_0x5956ec[_0x53ef41(0x174)],_0x1e5b9e)),_0x3733c3=[],_0x19b69f=[],_0x393397=[],_0x3b255c=new parser_1['MDApiParser'](_0x15fe00,[_0x1e5b9e],_0x1e6c79),_0x1ca73a=await _0x3b255c[_0x53ef41(0x1bf)](),_0x499e30=_0x1ca73a[_0x53ef41(0x1a9)](_0x4833c6=>{const _0x2395b9=_0x53ef41,_0x226191=_0x405422['find'](_0x16a34a=>_0x16a34a[_0x2395b9(0x183)]===_0x4833c6[_0x2395b9(0x183)]&&_0x16a34a[_0x2395b9(0x1c7)]===_0x4833c6[_0x2395b9(0x1c7)]);if(!_0x226191){const _0x1df4b0={'crc32':_0x4833c6[_0x2395b9(0x178)],'fileName':_0x4833c6['filePath'],'id':null,'version':0x1,'name':_0x4833c6[_0x2395b9(0x183)],'type':_0x4833c6[_0x2395b9(0x1c7)]};return this[_0x2395b9(0x1b7)][_0x2395b9(0x17f)](_0x1df4b0),_0x405422['push'](_0x1df4b0),_0x393397[_0x2395b9(0x17f)](_0x1df4b0),_0x19b69f[_0x2395b9(0x17f)](_0x4833c6),null;}_0x393397[_0x2395b9(0x17f)](_0x226191);if(_0x4833c6['crc']===_0x226191['crc32'])return null;return{'component':_0x4833c6,'meta':_0x226191};})['filter'](_0x3b9029=>!!_0x3b9029);_0x3733c3[_0x53ef41(0x17f)](..._0x499e30);const _0x4ec47b=_0x405422['filter'](_0x520f23=>!_0x393397['includes'](_0x520f23));return this[_0x53ef41(0x1b7)]=this[_0x53ef41(0x1b7)][_0x53ef41(0x192)](_0x25dbc1=>!_0x4ec47b['includes'](_0x25dbc1)),{'inserted':_0x19b69f,'modified':_0x3733c3,'removed':_0x4ec47b[_0x53ef41(0x1a9)](({id:_0x5e90f0,name:_0x492efc,type:_0x50057e})=>({'id':_0x5e90f0,'name':_0x492efc,'type':_0x50057e}))};}async[a187_0x286289(0x1a0)](){const _0x58ceb7=a187_0x286289;this['syncRecord']=this[_0x58ceb7(0x18d)][_0x58ceb7(0x17a)]===_0x58ceb7(0x1a7)?await this[_0x58ceb7(0x198)][_0x58ceb7(0x17e)](this['gitCommit'][_0x58ceb7(0x1be)]):await this['salesforceSync'][_0x58ceb7(0x179)](this['gitCommit'][_0x58ceb7(0x17a)]),this[_0x58ceb7(0x1aa)]=await this['salesforceGitSync'][_0x58ceb7(0x1b9)]();}async['fetchComponentsMetadata'](_0x37ecab){const _0x1191f0=a187_0x286289,_0x24e189=[...this[_0x1191f0(0x18d)][_0x1191f0(0x19b)]];if(this[_0x1191f0(0x18d)][_0x1191f0(0x195)]||_0x37ecab){this[_0x1191f0(0x1b7)]=this[_0x1191f0(0x191)]?await this[_0x1191f0(0x1c9)]['fetchBranchComponents'](this[_0x1191f0(0x191)]):await this[_0x1191f0(0x1c9)][_0x1191f0(0x181)](this[_0x1191f0(0x189)]);return;}this[_0x1191f0(0x1b7)]=[];while(_0x24e189[_0x1191f0(0x184)]){const _0xde264d=_0x24e189['splice'](0x0,this['TASKS_PER_TICK']),_0x44eb04=this[_0x1191f0(0x191)]?await this['salesforceGitSync'][_0x1191f0(0x1ad)](_0xde264d,this[_0x1191f0(0x191)]):await this['salesforceGitSync'][_0x1191f0(0x180)](_0xde264d,this['repositoryId']);this[_0x1191f0(0x1b7)][_0x1191f0(0x17f)](..._0x44eb04);}}async[a187_0x286289(0x1af)](_0x508c06){const _0x2c3cef=a187_0x286289;this['branchId']?await this[_0x2c3cef(0x1c5)][_0x2c3cef(0x1c4)](constants_1[_0x2c3cef(0x1ae)],this[_0x2c3cef(0x191)],{[constants_1[_0x2c3cef(0x1c3)]+_0x2c3cef(0x18b)]:_0x508c06}):await this['salesforceRest'][_0x2c3cef(0x1c4)](constants_1[_0x2c3cef(0x1ab)],this[_0x2c3cef(0x189)],{[constants_1[_0x2c3cef(0x1c3)]+_0x2c3cef(0x18b)]:_0x508c06});}[a187_0x286289(0x186)](_0x5b1afc){this['gitCommit']=_0x5b1afc;}[a187_0x286289(0x1b1)](){const _0x4ad839=a187_0x286289;return this[_0x4ad839(0x1aa)];}[a187_0x286289(0x1c1)](){const _0x31a29c=a187_0x286289;return this[_0x31a29c(0x189)];}['getBranchId'](){const _0x3d5ba1=a187_0x286289;return this[_0x3d5ba1(0x191)];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a187_0x286289(0x185)]({'transient':!![]}),__metadata(a187_0x286289(0x17b),[salesforce_git_sync_service_1[a187_0x286289(0x18e)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a187_0x286289(0x1a2)],salesforce_service_1['SalesforceService']])],GitCommitService),exports[a187_0x286289(0x1bc)]=GitCommitService;