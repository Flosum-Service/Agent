const a187_0xf63aff=a187_0x1809;(function(_0x21a6ab,_0x4b76b7){const _0x5635c1=a187_0x1809,_0x504b66=_0x21a6ab();while(!![]){try{const _0x34a1bb=-parseInt(_0x5635c1(0x1e5))/0x1*(-parseInt(_0x5635c1(0x1ed))/0x2)+-parseInt(_0x5635c1(0x1ba))/0x3*(-parseInt(_0x5635c1(0x1b0))/0x4)+parseInt(_0x5635c1(0x1d0))/0x5*(-parseInt(_0x5635c1(0x1c0))/0x6)+parseInt(_0x5635c1(0x1fa))/0x7+-parseInt(_0x5635c1(0x1fd))/0x8+-parseInt(_0x5635c1(0x1f5))/0x9*(parseInt(_0x5635c1(0x1ae))/0xa)+parseInt(_0x5635c1(0x1f2))/0xb*(parseInt(_0x5635c1(0x1d2))/0xc);if(_0x34a1bb===_0x4b76b7)break;else _0x504b66['push'](_0x504b66['shift']());}catch(_0xae7f01){_0x504b66['push'](_0x504b66['shift']());}}}(a187_0xf683,0x3e266));const a187_0x47889b=(function(){let _0x19e955=!![];return function(_0x5d0ee1,_0x5a6222){const _0x11489a=_0x19e955?function(){const _0x3e184b=a187_0x1809;if(_0x5a6222){const _0x8ba15b=_0x5a6222[_0x3e184b(0x1ab)](_0x5d0ee1,arguments);return _0x5a6222=null,_0x8ba15b;}}:function(){};return _0x19e955=![],_0x11489a;};}()),a187_0x2af8fd=a187_0x47889b(this,function(){const _0x22538e=a187_0x1809;return a187_0x2af8fd[_0x22538e(0x1ac)]()[_0x22538e(0x1d6)](_0x22538e(0x1dc))['toString']()['constructor'](a187_0x2af8fd)[_0x22538e(0x1d6)]('(((.+)+)+)+$');});function a187_0xf683(){const _0x5b25a4=['repositoryId','3520112fTZjig','fetchBranchComponents','FLOSUM_BRANCH','Service','SalesforceService','defineProperty','parse','logger','branch','object','apply','toString','fetchBranchComponentsByFilenames','650WOYLLm','proceeding\x20file\x20%s','428qYMARS','FLOSUM_GIT_NAMESPACE','fetchRepositoryComponents','TASKS_PER_TICK','componentsMetadata','fetchComponentsMetadata','repository','../../salesforce/services/salesforce-sync.service','syncRecord','SalesforceRestService','9249VpnkYy','getRepositoryRecordByName','recordTypes','getBranchRecordByName','salesforceGitSync','type','6eUCOat','salesforce','retrieveAttachment','SalesforceSyncService','design:paramtypes','Synchronization_Status__c','fileNames','salesforceRest','branchId','crc','map','__metadata','fetchRepositoryOrBranchData','function','__esModule','metadata','2505555zvMDPY','name','1368lLpWhH','lastCommit','salesforceSync','updateRemoteState','search','fetchRepositoryComponentsByFilenames','patch','../utils/git-commit.utils','FLOSUM_REPOSITORY','catch','(((.+)+)+)+$','find','length','fileName','crc32','string','filePath','isPathsEquals','Logger','3ettNjs','gitCommit','log','includes','../../salesforce/services/salesforce.service','setCommitDto','../../../constants','repositoryGit','290538MLmwPP','updateStatus','../../parsers/mdapi/parser','push','MDApiParser','64416mWAFno','typedi','GitCommitService','54279YCEROW','filter','SalesforceGitSyncService','../../salesforce/services/salesforce-git-sync.service','then','1081038GOmYac','getBranchId'];a187_0xf683=function(){return _0x5b25a4;};return a187_0xf683();}a187_0x2af8fd();'use strict';var __decorate=this&&this['__decorate']||function(_0x2c89ca,_0x119d27,_0x4652c6,_0x4b2598){const _0x2aabdb=a187_0x1809;var _0x1b1443=arguments[_0x2aabdb(0x1de)],_0x41235f=_0x1b1443<0x3?_0x119d27:_0x4b2598===null?_0x4b2598=Object['getOwnPropertyDescriptor'](_0x119d27,_0x4652c6):_0x4b2598,_0x5e14a1;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x2aabdb(0x1cd))_0x41235f=Reflect['decorate'](_0x2c89ca,_0x119d27,_0x4652c6,_0x4b2598);else{for(var _0x39d547=_0x2c89ca[_0x2aabdb(0x1de)]-0x1;_0x39d547>=0x0;_0x39d547--)if(_0x5e14a1=_0x2c89ca[_0x39d547])_0x41235f=(_0x1b1443<0x3?_0x5e14a1(_0x41235f):_0x1b1443>0x3?_0x5e14a1(_0x119d27,_0x4652c6,_0x41235f):_0x5e14a1(_0x119d27,_0x4652c6))||_0x41235f;}return _0x1b1443>0x3&&_0x41235f&&Object[_0x2aabdb(0x1a6)](_0x119d27,_0x4652c6,_0x41235f),_0x41235f;},__metadata=this&&this[a187_0xf63aff(0x1cb)]||function(_0x3fde9f,_0x160120){const _0x98123c=a187_0xf63aff;if(typeof Reflect===_0x98123c(0x1aa)&&typeof Reflect[_0x98123c(0x1cf)]===_0x98123c(0x1cd))return Reflect[_0x98123c(0x1cf)](_0x3fde9f,_0x160120);},GitCommitService_1;Object[a187_0xf63aff(0x1a6)](exports,a187_0xf63aff(0x1ce),{'value':!![]}),exports[a187_0xf63aff(0x1f4)]=void 0x0;const constants_1=require(a187_0xf63aff(0x1eb)),core_1=require('../../../core'),parser_1=require(a187_0xf63aff(0x1ef)),salesforce_git_sync_service_1=require(a187_0xf63aff(0x1f8)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a187_0xf63aff(0x1f3)),salesforce_sync_service_1=require(a187_0xf63aff(0x1b7)),salesforce_service_1=require(a187_0xf63aff(0x1e9)),git_commit_utils_1=require(a187_0xf63aff(0x1d9));function a187_0x1809(_0x3690f5,_0x986cfb){const _0x168d54=a187_0xf683();return a187_0x1809=function(_0x2af8fd,_0x47889b){_0x2af8fd=_0x2af8fd-0x1a5;let _0xf68328=_0x168d54[_0x2af8fd];return _0xf68328;},a187_0x1809(_0x3690f5,_0x986cfb);}let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x2337d7,_0x358c7b,_0x3851a9,_0x33511e){const _0x3044ee=a187_0xf63aff;this['salesforceGitSync']=_0x2337d7,this[_0x3044ee(0x1c7)]=_0x358c7b,this[_0x3044ee(0x1d4)]=_0x3851a9,this['salesforce']=_0x33511e,this[_0x3044ee(0x1b3)]=0xc8,this[_0x3044ee(0x1a8)]=new core_1[(_0x3044ee(0x1e4))](GitCommitService_1['name']);}get['repositoryId'](){const _0x57c925=a187_0xf63aff;var _0x3ba289;return((_0x3ba289=this[_0x57c925(0x1b8)])===null||_0x3ba289===void 0x0?void 0x0:_0x3ba289[_0x57c925(0x1fc)])||'';}get[a187_0xf63aff(0x1c8)](){const _0x11c548=a187_0xf63aff;var _0x29bc65;return((_0x29bc65=this[_0x11c548(0x1b8)])===null||_0x29bc65===void 0x0?void 0x0:_0x29bc65[_0x11c548(0x1c8)])||'';}async['createCommit'](_0x29bdf2){const _0x5c9ff2=a187_0xf63aff;return this[_0x5c9ff2(0x1be)]['createCommit'](_0x29bdf2,this[_0x5c9ff2(0x1fc)]);}async['checkSyncStatus'](_0x57e90e){const _0x551442=a187_0xf63aff;if(this[_0x551442(0x1b8)]){const _0x5cc432=await this[_0x551442(0x1d4)]['getRemoteStateAttachmentId'](this[_0x551442(0x1b8)]),_0x470c81=await this[_0x551442(0x1c1)][_0x551442(0x1c2)](_0x5cc432)[_0x551442(0x1f9)](_0x4a7abc=>typeof _0x4a7abc===_0x551442(0x1e1)?JSON[_0x551442(0x1a7)](_0x4a7abc):_0x4a7abc)[_0x551442(0x1db)](()=>({}));if(_0x470c81[this[_0x551442(0x1e6)][_0x551442(0x1ec)]]){if(_0x470c81[this[_0x551442(0x1e6)][_0x551442(0x1ec)]][_0x551442(0x1d3)]===_0x57e90e)return!![];}return![];}return![];}async[a187_0xf63aff(0x1d5)](_0x4ad46b){const _0x506f43=a187_0xf63aff;this[_0x506f43(0x1b8)]&&await this[_0x506f43(0x1d4)]['updateRemoteState'](this[_0x506f43(0x1b8)],_0x4ad46b);}async['proceedFile'](_0x468e94,_0x38b813,_0x1c91b3){const _0x3ad17d=a187_0xf63aff;this[_0x3ad17d(0x1a8)][_0x3ad17d(0x1e7)](_0x3ad17d(0x1af),_0x468e94);const _0x1d41ee=this['componentsMetadata'][_0x3ad17d(0x1f6)](_0x531b9a=>git_commit_utils_1[_0x3ad17d(0x1e3)](_0x531b9a[_0x3ad17d(0x1df)],_0x468e94)),_0x4b0f3c=[],_0x56c1c7=[],_0x476c6b=[],_0x30bb21=new parser_1[(_0x3ad17d(0x1f1))](_0x38b813,[_0x468e94],_0x1c91b3),_0x1e1c28=await _0x30bb21['parse'](),_0x802149=_0x1e1c28['map'](_0x46d32f=>{const _0x378af2=_0x3ad17d,_0x384d06=_0x1d41ee[_0x378af2(0x1dd)](_0x37edd6=>_0x37edd6[_0x378af2(0x1d1)]===_0x46d32f[_0x378af2(0x1d1)]&&_0x37edd6['type']===_0x46d32f['type']);if(!_0x384d06){const _0x3f8f98={'crc32':_0x46d32f['crc'],'fileName':_0x46d32f[_0x378af2(0x1e2)],'id':null,'version':0x1,'name':_0x46d32f['name'],'type':_0x46d32f[_0x378af2(0x1bf)]};return this['componentsMetadata'][_0x378af2(0x1f0)](_0x3f8f98),_0x1d41ee[_0x378af2(0x1f0)](_0x3f8f98),_0x476c6b['push'](_0x3f8f98),_0x56c1c7[_0x378af2(0x1f0)](_0x46d32f),null;}_0x476c6b[_0x378af2(0x1f0)](_0x384d06);if(_0x46d32f[_0x378af2(0x1c9)]===_0x384d06[_0x378af2(0x1e0)])return null;return{'component':_0x46d32f,'meta':_0x384d06};})[_0x3ad17d(0x1f6)](_0x216873=>!!_0x216873);_0x4b0f3c[_0x3ad17d(0x1f0)](..._0x802149);const _0x134057=_0x1d41ee[_0x3ad17d(0x1f6)](_0x10447e=>!_0x476c6b[_0x3ad17d(0x1e8)](_0x10447e));return this[_0x3ad17d(0x1b4)]=this[_0x3ad17d(0x1b4)][_0x3ad17d(0x1f6)](_0x497ce3=>!_0x134057['includes'](_0x497ce3)),{'inserted':_0x56c1c7,'modified':_0x4b0f3c,'removed':_0x134057[_0x3ad17d(0x1ca)](({id:_0x579fcd,name:_0x237929,type:_0x42a3ea})=>({'id':_0x579fcd,'name':_0x237929,'type':_0x42a3ea}))};}async[a187_0xf63aff(0x1cc)](){const _0x44fbe9=a187_0xf63aff;this[_0x44fbe9(0x1b8)]=this[_0x44fbe9(0x1e6)][_0x44fbe9(0x1a9)]==='master'?await this['salesforceSync'][_0x44fbe9(0x1bb)](this[_0x44fbe9(0x1e6)][_0x44fbe9(0x1b6)]):await this[_0x44fbe9(0x1d4)][_0x44fbe9(0x1bd)](this['gitCommit'][_0x44fbe9(0x1a9)]),this[_0x44fbe9(0x1bc)]=await this[_0x44fbe9(0x1be)]['getComponentRecordTypes']();}async[a187_0xf63aff(0x1b5)](_0x412159){const _0x322435=a187_0xf63aff,_0x31d7f4=[...this['gitCommit'][_0x322435(0x1c6)]];if(this[_0x322435(0x1e6)]['force']||_0x412159){this['componentsMetadata']=this[_0x322435(0x1c8)]?await this[_0x322435(0x1be)][_0x322435(0x1fe)](this[_0x322435(0x1c8)]):await this[_0x322435(0x1be)][_0x322435(0x1b2)](this[_0x322435(0x1fc)]);return;}this[_0x322435(0x1b4)]=[];while(_0x31d7f4[_0x322435(0x1de)]){const _0x42f697=_0x31d7f4['splice'](0x0,this['TASKS_PER_TICK']),_0xbd2a14=this[_0x322435(0x1c8)]?await this['salesforceGitSync'][_0x322435(0x1ad)](_0x42f697,this[_0x322435(0x1c8)]):await this[_0x322435(0x1be)][_0x322435(0x1d7)](_0x42f697,this[_0x322435(0x1fc)]);this[_0x322435(0x1b4)][_0x322435(0x1f0)](..._0xbd2a14);}}async[a187_0xf63aff(0x1ee)](_0x5cca16){const _0x907666=a187_0xf63aff;this[_0x907666(0x1c8)]?await this[_0x907666(0x1c7)][_0x907666(0x1d8)](constants_1[_0x907666(0x1ff)],this['branchId'],{[constants_1[_0x907666(0x1b1)]+_0x907666(0x1c5)]:_0x5cca16}):await this[_0x907666(0x1c7)][_0x907666(0x1d8)](constants_1[_0x907666(0x1da)],this['repositoryId'],{[constants_1[_0x907666(0x1b1)]+'Synchronization_Status__c']:_0x5cca16});}[a187_0xf63aff(0x1ea)](_0x3b05b3){const _0x31baff=a187_0xf63aff;this[_0x31baff(0x1e6)]=_0x3b05b3;}['getRecordTypes'](){return this['recordTypes'];}['getRepositoryId'](){const _0x3b6843=a187_0xf63aff;return this[_0x3b6843(0x1fc)];}[a187_0xf63aff(0x1fb)](){const _0x5d60d6=a187_0xf63aff;return this[_0x5d60d6(0x1c8)];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a187_0xf63aff(0x200)]({'transient':!![]}),__metadata(a187_0xf63aff(0x1c4),[salesforce_git_sync_service_1[a187_0xf63aff(0x1f7)],salesforce_rest_service_1[a187_0xf63aff(0x1b9)],salesforce_sync_service_1[a187_0xf63aff(0x1c3)],salesforce_service_1[a187_0xf63aff(0x1a5)]])],GitCommitService),exports['GitCommitService']=GitCommitService;