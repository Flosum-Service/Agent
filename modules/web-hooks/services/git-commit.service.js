const a187_0x173581=a187_0x5946;function a187_0x5946(_0x18985d,_0x1d54b0){const _0x14b730=a187_0x133e();return a187_0x5946=function(_0x29fcca,_0x1a0967){_0x29fcca=_0x29fcca-0x12d;let _0x133e90=_0x14b730[_0x29fcca];return _0x133e90;},a187_0x5946(_0x18985d,_0x1d54b0);}(function(_0x3e8263,_0x44ff54){const _0x2bf2dd=a187_0x5946,_0x26e99d=_0x3e8263();while(!![]){try{const _0x383fd7=parseInt(_0x2bf2dd(0x182))/0x1*(-parseInt(_0x2bf2dd(0x149))/0x2)+parseInt(_0x2bf2dd(0x161))/0x3*(parseInt(_0x2bf2dd(0x13c))/0x4)+-parseInt(_0x2bf2dd(0x132))/0x5*(-parseInt(_0x2bf2dd(0x175))/0x6)+parseInt(_0x2bf2dd(0x150))/0x7+-parseInt(_0x2bf2dd(0x15f))/0x8*(parseInt(_0x2bf2dd(0x14f))/0x9)+-parseInt(_0x2bf2dd(0x156))/0xa+parseInt(_0x2bf2dd(0x13d))/0xb;if(_0x383fd7===_0x44ff54)break;else _0x26e99d['push'](_0x26e99d['shift']());}catch(_0xf6c2fa){_0x26e99d['push'](_0x26e99d['shift']());}}}(a187_0x133e,0x7b996));const a187_0x1a0967=(function(){let _0x277f69=!![];return function(_0x548ded,_0x2aa3bf){const _0x3d18c9=_0x277f69?function(){if(_0x2aa3bf){const _0x5267ad=_0x2aa3bf['apply'](_0x548ded,arguments);return _0x2aa3bf=null,_0x5267ad;}}:function(){};return _0x277f69=![],_0x3d18c9;};}()),a187_0x29fcca=a187_0x1a0967(this,function(){const _0x22b621=a187_0x5946;return a187_0x29fcca[_0x22b621(0x13f)]()[_0x22b621(0x160)]('(((.+)+)+)+$')[_0x22b621(0x13f)]()['constructor'](a187_0x29fcca)[_0x22b621(0x160)]('(((.+)+)+)+$');});a187_0x29fcca();'use strict';var __decorate=this&&this[a187_0x173581(0x174)]||function(_0x355e0a,_0x1121df,_0x4bdddc,_0x5df0f5){const _0x1e90d3=a187_0x173581;var _0x56dff5=arguments[_0x1e90d3(0x17f)],_0x4a56ac=_0x56dff5<0x3?_0x1121df:_0x5df0f5===null?_0x5df0f5=Object[_0x1e90d3(0x16d)](_0x1121df,_0x4bdddc):_0x5df0f5,_0xb52924;if(typeof Reflect===_0x1e90d3(0x165)&&typeof Reflect[_0x1e90d3(0x159)]===_0x1e90d3(0x17c))_0x4a56ac=Reflect[_0x1e90d3(0x159)](_0x355e0a,_0x1121df,_0x4bdddc,_0x5df0f5);else{for(var _0x20b3b7=_0x355e0a[_0x1e90d3(0x17f)]-0x1;_0x20b3b7>=0x0;_0x20b3b7--)if(_0xb52924=_0x355e0a[_0x20b3b7])_0x4a56ac=(_0x56dff5<0x3?_0xb52924(_0x4a56ac):_0x56dff5>0x3?_0xb52924(_0x1121df,_0x4bdddc,_0x4a56ac):_0xb52924(_0x1121df,_0x4bdddc))||_0x4a56ac;}return _0x56dff5>0x3&&_0x4a56ac&&Object[_0x1e90d3(0x173)](_0x1121df,_0x4bdddc,_0x4a56ac),_0x4a56ac;},__metadata=this&&this[a187_0x173581(0x180)]||function(_0x157888,_0x2cba2b){const _0x3b7a54=a187_0x173581;if(typeof Reflect===_0x3b7a54(0x165)&&typeof Reflect['metadata']===_0x3b7a54(0x17c))return Reflect[_0x3b7a54(0x12e)](_0x157888,_0x2cba2b);},GitCommitService_1;Object[a187_0x173581(0x173)](exports,'__esModule',{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require(a187_0x173581(0x148)),core_1=require('../../../core'),parser_1=require(a187_0x173581(0x184)),salesforce_git_sync_service_1=require(a187_0x173581(0x136)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a187_0x173581(0x133)),salesforce_sync_service_1=require(a187_0x173581(0x145)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_commit_utils_1=require('../utils/git-commit.utils');function a187_0x133e(){const _0x26d00e=['find','fetchRepositoryComponentsByFilenames','defineProperty','__decorate','6JRkWGA','splice','force','filter','FLOSUM_GIT_NAMESPACE','getComponentRecordTypes','string','function','master','lastCommit','length','__metadata','map','6tQykQM','catch','../../parsers/mdapi/parser','fetchRepositoryOrBranchData','setCommitDto','proceedFile','componentsMetadata','salesforceRest','FLOSUM_REPOSITORY','metadata','parse','fetchBranchComponentsByFilenames','salesforceSync','4514845rfOJoK','typedi','branchId','syncRecord','../../salesforce/services/salesforce-git-sync.service','createCommit','type','branch','SalesforceRestService','isPathsEquals','310628nOcfSJ','6087444DOXadX','getRepositoryRecordByName','toString','updateRemoteState','then','repositoryId','retrieveAttachment','SalesforceSyncService','../../salesforce/services/salesforce-sync.service','getRepositoryId','logger','../../../constants','146310dRhYKY','fileNames','Logger','salesforceGitSync','recordTypes','FLOSUM_BRANCH','6877179ydcohJ','6810993VhFiPt','TASKS_PER_TICK','updateStatus','fetchRepositoryComponents','Service','checkSyncStatus','8753630mRQSYG','design:paramtypes','patch','decorate','GitCommitService','fileName','fetchBranchComponents','repositoryGit','fetchComponentsMetadata','8SOUuyi','search','6IGNeUk','push','includes','salesforce','object','crc32','SalesforceGitSyncService','name','getBranchRecordByName','getRemoteStateAttachmentId','SalesforceService','crc','getOwnPropertyDescriptor','getBranchId','gitCommit','MDApiParser'];a187_0x133e=function(){return _0x26d00e;};return a187_0x133e();}let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x1ab844,_0x28fd93,_0x42cdb3,_0x1b519f){const _0x3ae8a4=a187_0x173581;this[_0x3ae8a4(0x14c)]=_0x1ab844,this[_0x3ae8a4(0x189)]=_0x28fd93,this[_0x3ae8a4(0x131)]=_0x42cdb3,this['salesforce']=_0x1b519f,this[_0x3ae8a4(0x151)]=0xc8,this[_0x3ae8a4(0x147)]=new core_1[(_0x3ae8a4(0x14b))](GitCommitService_1[_0x3ae8a4(0x168)]);}get[a187_0x173581(0x142)](){const _0x335b9e=a187_0x173581;var _0x105d44;return((_0x105d44=this[_0x335b9e(0x135)])===null||_0x105d44===void 0x0?void 0x0:_0x105d44[_0x335b9e(0x142)])||'';}get[a187_0x173581(0x134)](){const _0x245e93=a187_0x173581;var _0x3e3979;return((_0x3e3979=this[_0x245e93(0x135)])===null||_0x3e3979===void 0x0?void 0x0:_0x3e3979['branchId'])||'';}async[a187_0x173581(0x137)](_0x259ba4){const _0x17f9f1=a187_0x173581;return this[_0x17f9f1(0x14c)][_0x17f9f1(0x137)](_0x259ba4,this[_0x17f9f1(0x142)]);}async[a187_0x173581(0x155)](_0x6f57c){const _0x57b470=a187_0x173581;if(this['syncRecord']){const _0x3d98f=await this['salesforceSync'][_0x57b470(0x16a)](this[_0x57b470(0x135)]),_0x29038f=await this[_0x57b470(0x164)][_0x57b470(0x143)](_0x3d98f)[_0x57b470(0x141)](_0x3159ec=>typeof _0x3159ec===_0x57b470(0x17b)?JSON[_0x57b470(0x12f)](_0x3159ec):_0x3159ec)[_0x57b470(0x183)](()=>({}));if(_0x29038f[this['gitCommit'][_0x57b470(0x15d)]]){if(_0x29038f[this[_0x57b470(0x16f)][_0x57b470(0x15d)]][_0x57b470(0x17e)]===_0x6f57c)return!![];}return![];}return![];}async[a187_0x173581(0x140)](_0x10796d){const _0x5ecc90=a187_0x173581;this[_0x5ecc90(0x135)]&&await this[_0x5ecc90(0x131)][_0x5ecc90(0x140)](this[_0x5ecc90(0x135)],_0x10796d);}async[a187_0x173581(0x187)](_0x4db662,_0x29ea65,_0x396442){const _0x3c6957=a187_0x173581;this[_0x3c6957(0x147)]['log']('proceeding\x20file\x20%s',_0x4db662);const _0xf246b0=this[_0x3c6957(0x188)][_0x3c6957(0x178)](_0xbba94f=>git_commit_utils_1[_0x3c6957(0x13b)](_0xbba94f[_0x3c6957(0x15b)],_0x4db662)),_0xa3b7a7=[],_0x403b23=[],_0x5e7e4a=[],_0x5bd05c=new parser_1[(_0x3c6957(0x170))](_0x29ea65,[_0x4db662],_0x396442),_0x569d04=await _0x5bd05c[_0x3c6957(0x12f)](),_0x4650e8=_0x569d04['map'](_0x2f8f12=>{const _0x291973=_0x3c6957,_0x3cf23f=_0xf246b0[_0x291973(0x171)](_0x949b7b=>_0x949b7b['name']===_0x2f8f12['name']&&_0x949b7b[_0x291973(0x138)]===_0x2f8f12[_0x291973(0x138)]);if(!_0x3cf23f){const _0x1be94c={'crc32':_0x2f8f12[_0x291973(0x16c)],'fileName':_0x2f8f12['filePath'],'id':null,'version':0x1,'name':_0x2f8f12[_0x291973(0x168)],'type':_0x2f8f12['type']};return this['componentsMetadata'][_0x291973(0x162)](_0x1be94c),_0xf246b0[_0x291973(0x162)](_0x1be94c),_0x5e7e4a['push'](_0x1be94c),_0x403b23[_0x291973(0x162)](_0x2f8f12),null;}_0x5e7e4a[_0x291973(0x162)](_0x3cf23f);if(_0x2f8f12['crc']===_0x3cf23f[_0x291973(0x166)])return null;return{'component':_0x2f8f12,'meta':_0x3cf23f};})['filter'](_0x14d080=>!!_0x14d080);_0xa3b7a7[_0x3c6957(0x162)](..._0x4650e8);const _0x503b20=_0xf246b0[_0x3c6957(0x178)](_0x1dd44b=>!_0x5e7e4a[_0x3c6957(0x163)](_0x1dd44b));return this[_0x3c6957(0x188)]=this[_0x3c6957(0x188)]['filter'](_0x513a5d=>!_0x503b20['includes'](_0x513a5d)),{'inserted':_0x403b23,'modified':_0xa3b7a7,'removed':_0x503b20[_0x3c6957(0x181)](({id:_0x3fae3c,name:_0x270920,type:_0x43cbcc})=>({'id':_0x3fae3c,'name':_0x270920,'type':_0x43cbcc}))};}async[a187_0x173581(0x185)](){const _0x29e475=a187_0x173581;this[_0x29e475(0x135)]=this[_0x29e475(0x16f)][_0x29e475(0x139)]===_0x29e475(0x17d)?await this[_0x29e475(0x131)][_0x29e475(0x13e)](this[_0x29e475(0x16f)]['repository']):await this[_0x29e475(0x131)][_0x29e475(0x169)](this[_0x29e475(0x16f)]['branch']),this['recordTypes']=await this[_0x29e475(0x14c)][_0x29e475(0x17a)]();}async[a187_0x173581(0x15e)](_0x167c4e){const _0x5d8507=a187_0x173581,_0x2370c8=[...this[_0x5d8507(0x16f)][_0x5d8507(0x14a)]];if(this[_0x5d8507(0x16f)][_0x5d8507(0x177)]||_0x167c4e){this['componentsMetadata']=this[_0x5d8507(0x134)]?await this[_0x5d8507(0x14c)][_0x5d8507(0x15c)](this[_0x5d8507(0x134)]):await this[_0x5d8507(0x14c)][_0x5d8507(0x153)](this[_0x5d8507(0x142)]);return;}this[_0x5d8507(0x188)]=[];while(_0x2370c8[_0x5d8507(0x17f)]){const _0xe37bba=_0x2370c8[_0x5d8507(0x176)](0x0,this[_0x5d8507(0x151)]),_0x447d68=this['branchId']?await this[_0x5d8507(0x14c)][_0x5d8507(0x130)](_0xe37bba,this[_0x5d8507(0x134)]):await this[_0x5d8507(0x14c)][_0x5d8507(0x172)](_0xe37bba,this['repositoryId']);this[_0x5d8507(0x188)]['push'](..._0x447d68);}}async[a187_0x173581(0x152)](_0x1d3d98){const _0x17bb7f=a187_0x173581;this[_0x17bb7f(0x134)]?await this[_0x17bb7f(0x189)]['patch'](constants_1[_0x17bb7f(0x14e)],this[_0x17bb7f(0x134)],{[constants_1[_0x17bb7f(0x179)]+'Synchronization_Status__c']:_0x1d3d98}):await this[_0x17bb7f(0x189)][_0x17bb7f(0x158)](constants_1[_0x17bb7f(0x12d)],this[_0x17bb7f(0x142)],{[constants_1[_0x17bb7f(0x179)]+'Synchronization_Status__c']:_0x1d3d98});}[a187_0x173581(0x186)](_0x813dc9){const _0x1d042a=a187_0x173581;this[_0x1d042a(0x16f)]=_0x813dc9;}['getRecordTypes'](){const _0x334288=a187_0x173581;return this[_0x334288(0x14d)];}[a187_0x173581(0x146)](){const _0x1a91ae=a187_0x173581;return this[_0x1a91ae(0x142)];}[a187_0x173581(0x16e)](){const _0x5c26c6=a187_0x173581;return this[_0x5c26c6(0x134)];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a187_0x173581(0x154)]({'transient':!![]}),__metadata(a187_0x173581(0x157),[salesforce_git_sync_service_1[a187_0x173581(0x167)],salesforce_rest_service_1[a187_0x173581(0x13a)],salesforce_sync_service_1[a187_0x173581(0x144)],salesforce_service_1[a187_0x173581(0x16b)]])],GitCommitService),exports[a187_0x173581(0x15a)]=GitCommitService;