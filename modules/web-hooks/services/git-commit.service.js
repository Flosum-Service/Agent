const a187_0x1d9910=a187_0x2c52;(function(_0x1d0e71,_0x3587bc){const _0x30a8cc=a187_0x2c52,_0x1f9bb8=_0x1d0e71();while(!![]){try{const _0x5dcd1e=parseInt(_0x30a8cc(0x147))/0x1+-parseInt(_0x30a8cc(0x128))/0x2+-parseInt(_0x30a8cc(0x158))/0x3+parseInt(_0x30a8cc(0x151))/0x4*(parseInt(_0x30a8cc(0x145))/0x5)+parseInt(_0x30a8cc(0x118))/0x6+parseInt(_0x30a8cc(0x133))/0x7*(parseInt(_0x30a8cc(0x11a))/0x8)+-parseInt(_0x30a8cc(0x123))/0x9*(parseInt(_0x30a8cc(0x169))/0xa);if(_0x5dcd1e===_0x3587bc)break;else _0x1f9bb8['push'](_0x1f9bb8['shift']());}catch(_0x3b32fb){_0x1f9bb8['push'](_0x1f9bb8['shift']());}}}(a187_0x4f17,0xe1178));function a187_0x4f17(){const _0x42b23e=['fetchBranchComponentsByFilenames','MDApiParser','44vQkSHL','../../salesforce/services/salesforce-git-sync.service','FLOSUM_BRANCH','createCommit','repository','../../../constants','fetchBranchComponents','4563312sYigyj','force','gitCommit','filePath','__decorate','salesforce','getRepositoryId','getBranchRecordByName','recordTypes','length','getComponentRecordTypes','find','patch','branch','../utils/git-commit.utils','design:paramtypes','push','67010fymHkn','proceedFile','SalesforceGitSyncService','toString','function','3355908fJeNkS','FLOSUM_NAMESPACE','8tZoRNs','metadata','SalesforceSyncService','salesforceRest','syncRecord','checkSyncStatus','Last_Updated_On__c','salesforceGitSync','branchId','333rOTupu','updateStatus','typedi','includes','__metadata','989380hgipPS','salesforceSync','search','string','master','../../salesforce/services/salesforce-rest.service','repositoryId','filter','fetchRepositoryComponentsByFilenames','updateRemoteState','defineProperty','8464820itBUDd','object','crc','getOwnPropertyDescriptor','map','parse','name','then','getRecordTypes','Service','crc32','fetchRepositoryOrBranchData','now','__esModule','getRepositoryRecordByName','getRemoteStateAttachmentId','../../salesforce/services/salesforce-sync.service','repositoryGit','420895ATvSjy','type','491160lzCMWs','fileName','FLOSUM_GIT_NAMESPACE','FLOSUM_REPOSITORY','componentsMetadata','Synchronization_Status__c','../../salesforce/services/salesforce.service','SalesforceService'];a187_0x4f17=function(){return _0x42b23e;};return a187_0x4f17();}const a187_0x1d5ecd=(function(){let _0x2202a7=!![];return function(_0x90d4bb,_0x3d2383){const _0xf2a93a=_0x2202a7?function(){if(_0x3d2383){const _0x459fda=_0x3d2383['apply'](_0x90d4bb,arguments);return _0x3d2383=null,_0x459fda;}}:function(){};return _0x2202a7=![],_0xf2a93a;};}()),a187_0x9af513=a187_0x1d5ecd(this,function(){const _0xdbe268=a187_0x2c52;return a187_0x9af513[_0xdbe268(0x116)]()[_0xdbe268(0x12a)]('(((.+)+)+)+$')[_0xdbe268(0x116)]()['constructor'](a187_0x9af513)[_0xdbe268(0x12a)]('(((.+)+)+)+$');});function a187_0x2c52(_0x3a5f45,_0x2d3c58){const _0x50af35=a187_0x4f17();return a187_0x2c52=function(_0x9af513,_0x1d5ecd){_0x9af513=_0x9af513-0x115;let _0x4f179f=_0x50af35[_0x9af513];return _0x4f179f;},a187_0x2c52(_0x3a5f45,_0x2d3c58);}a187_0x9af513();'use strict';var __decorate=this&&this[a187_0x1d9910(0x15c)]||function(_0x45930d,_0x1d0182,_0x2d6b24,_0x1e5c47){const _0x34049e=a187_0x1d9910;var _0x5cdc14=arguments[_0x34049e(0x161)],_0x9d698b=_0x5cdc14<0x3?_0x1d0182:_0x1e5c47===null?_0x1e5c47=Object[_0x34049e(0x136)](_0x1d0182,_0x2d6b24):_0x1e5c47,_0x3e3c72;if(typeof Reflect===_0x34049e(0x134)&&typeof Reflect['decorate']==='function')_0x9d698b=Reflect['decorate'](_0x45930d,_0x1d0182,_0x2d6b24,_0x1e5c47);else{for(var _0x3192db=_0x45930d[_0x34049e(0x161)]-0x1;_0x3192db>=0x0;_0x3192db--)if(_0x3e3c72=_0x45930d[_0x3192db])_0x9d698b=(_0x5cdc14<0x3?_0x3e3c72(_0x9d698b):_0x5cdc14>0x3?_0x3e3c72(_0x1d0182,_0x2d6b24,_0x9d698b):_0x3e3c72(_0x1d0182,_0x2d6b24))||_0x9d698b;}return _0x5cdc14>0x3&&_0x9d698b&&Object[_0x34049e(0x132)](_0x1d0182,_0x2d6b24,_0x9d698b),_0x9d698b;},__metadata=this&&this[a187_0x1d9910(0x127)]||function(_0x222fd0,_0x3a28f7){const _0x345bc4=a187_0x1d9910;if(typeof Reflect===_0x345bc4(0x134)&&typeof Reflect[_0x345bc4(0x11b)]===_0x345bc4(0x117))return Reflect[_0x345bc4(0x11b)](_0x222fd0,_0x3a28f7);};Object[a187_0x1d9910(0x132)](exports,a187_0x1d9910(0x140),{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require(a187_0x1d9910(0x156)),parser_1=require('../../parsers/mdapi/parser'),salesforce_git_sync_service_1=require(a187_0x1d9910(0x152)),salesforce_rest_service_1=require(a187_0x1d9910(0x12d)),typedi_1=require(a187_0x1d9910(0x125)),salesforce_sync_service_1=require(a187_0x1d9910(0x143)),salesforce_service_1=require(a187_0x1d9910(0x14d)),git_commit_utils_1=require(a187_0x1d9910(0x166));let GitCommitService=class GitCommitService{constructor(_0x2d408,_0x3f603a,_0x1e248b,_0x30236c){const _0x51d14d=a187_0x1d9910;this[_0x51d14d(0x121)]=_0x2d408,this['salesforceRest']=_0x3f603a,this[_0x51d14d(0x129)]=_0x1e248b,this[_0x51d14d(0x15d)]=_0x30236c,this['TASKS_PER_TICK']=0xc8;}get[a187_0x1d9910(0x12e)](){const _0x17e544=a187_0x1d9910;var _0x42a592;return((_0x42a592=this[_0x17e544(0x11e)])===null||_0x42a592===void 0x0?void 0x0:_0x42a592[_0x17e544(0x12e)])||'';}get[a187_0x1d9910(0x122)](){const _0x1b38da=a187_0x1d9910;var _0x359516;return((_0x359516=this['syncRecord'])===null||_0x359516===void 0x0?void 0x0:_0x359516[_0x1b38da(0x122)])||'';}async[a187_0x1d9910(0x154)](_0x3a0504){const _0x54204c=a187_0x1d9910;return this[_0x54204c(0x121)][_0x54204c(0x154)](_0x3a0504,this['repositoryId']);}async[a187_0x1d9910(0x11f)](_0x2fe157){const _0x4e498d=a187_0x1d9910;if(this['syncRecord']){const _0x38c0a7=await this['salesforceSync'][_0x4e498d(0x142)](this[_0x4e498d(0x11e)]),_0x5688a1=await this[_0x4e498d(0x15d)]['retrieveAttachment'](_0x38c0a7)[_0x4e498d(0x13a)](_0x529fb7=>typeof _0x529fb7===_0x4e498d(0x12b)?JSON[_0x4e498d(0x138)](_0x529fb7):_0x529fb7)['catch'](()=>({}));if(_0x5688a1[this[_0x4e498d(0x15a)][_0x4e498d(0x144)]]){if(_0x5688a1[this[_0x4e498d(0x15a)][_0x4e498d(0x144)]]['lastCommit']===_0x2fe157)return!![];}return![];}return![];}async[a187_0x1d9910(0x131)](_0x1974cc){const _0x1de589=a187_0x1d9910;this[_0x1de589(0x11e)]&&await this[_0x1de589(0x129)][_0x1de589(0x131)](this[_0x1de589(0x11e)],_0x1974cc);}async[a187_0x1d9910(0x16a)](_0x591c54,_0x5e3931,_0x272ea1){const _0x556dff=a187_0x1d9910,_0x3c4c62=this[_0x556dff(0x14b)]['filter'](_0x20b301=>git_commit_utils_1['isPathsEquals'](_0x20b301[_0x556dff(0x148)],_0x591c54)),_0x496c02=[],_0x56911d=[],_0x33d558=[],_0xd591b2=new parser_1[(_0x556dff(0x150))](_0x5e3931,[_0x591c54],_0x272ea1),_0x61f66f=await _0xd591b2[_0x556dff(0x138)](),_0x5b2437=_0x61f66f[_0x556dff(0x137)](_0x5a2415=>{const _0x46962c=_0x556dff,_0x155341=_0x3c4c62[_0x46962c(0x163)](_0x51af95=>_0x51af95[_0x46962c(0x139)]===_0x5a2415[_0x46962c(0x139)]&&_0x51af95[_0x46962c(0x146)]===_0x5a2415[_0x46962c(0x146)]);if(!_0x155341){const _0x30ef89={'crc32':_0x5a2415[_0x46962c(0x135)],'fileName':_0x5a2415[_0x46962c(0x15b)],'id':null,'version':0x1,'name':_0x5a2415['name'],'type':_0x5a2415[_0x46962c(0x146)]};return this[_0x46962c(0x14b)][_0x46962c(0x168)](_0x30ef89),_0x3c4c62[_0x46962c(0x168)](_0x30ef89),_0x33d558[_0x46962c(0x168)](_0x30ef89),_0x56911d['push'](_0x5a2415),null;}_0x33d558[_0x46962c(0x168)](_0x155341);if(_0x5a2415[_0x46962c(0x135)]===_0x155341[_0x46962c(0x13d)])return null;return{'component':_0x5a2415,'meta':_0x155341};})['filter'](_0x996f11=>!!_0x996f11);_0x496c02['push'](..._0x5b2437);const _0x48d007=_0x3c4c62[_0x556dff(0x12f)](_0x31530e=>!_0x33d558[_0x556dff(0x126)](_0x31530e));return this[_0x556dff(0x14b)]=this['componentsMetadata'][_0x556dff(0x12f)](_0x582b68=>!_0x48d007['includes'](_0x582b68)),{'inserted':_0x56911d,'modified':_0x496c02,'removed':_0x48d007[_0x556dff(0x137)](({id:_0x65a79f,name:_0x3e52bf,type:_0x91f240})=>({'id':_0x65a79f,'name':_0x3e52bf,'type':_0x91f240}))};}async[a187_0x1d9910(0x13e)](){const _0x435dff=a187_0x1d9910;this[_0x435dff(0x11e)]=this[_0x435dff(0x15a)][_0x435dff(0x165)]===_0x435dff(0x12c)?await this[_0x435dff(0x129)][_0x435dff(0x141)](this[_0x435dff(0x15a)][_0x435dff(0x155)]):await this['salesforceSync'][_0x435dff(0x15f)](this['gitCommit'][_0x435dff(0x165)]),this[_0x435dff(0x160)]=await this[_0x435dff(0x121)][_0x435dff(0x162)]();}async['fetchComponentsMetadata'](_0x38e14d){const _0x14b3fe=a187_0x1d9910,_0x197679=[...this[_0x14b3fe(0x15a)]['fileNames']];if(this['gitCommit'][_0x14b3fe(0x159)]||_0x38e14d){this['componentsMetadata']=this['branchId']?await this[_0x14b3fe(0x121)][_0x14b3fe(0x157)](this[_0x14b3fe(0x122)]):await this[_0x14b3fe(0x121)]['fetchRepositoryComponents'](this[_0x14b3fe(0x12e)]);return;}this[_0x14b3fe(0x14b)]=[];while(_0x197679[_0x14b3fe(0x161)]){const _0x236813=_0x197679['splice'](0x0,this['TASKS_PER_TICK']),_0x40f4d2=this[_0x14b3fe(0x122)]?await this[_0x14b3fe(0x121)][_0x14b3fe(0x14f)](_0x236813,this['branchId']):await this[_0x14b3fe(0x121)][_0x14b3fe(0x130)](_0x236813,this['repositoryId']);this[_0x14b3fe(0x14b)][_0x14b3fe(0x168)](..._0x40f4d2);}}async[a187_0x1d9910(0x124)](_0x4dc54f){const _0x182b67=a187_0x1d9910;this[_0x182b67(0x122)]?await this['salesforceRest']['patch'](constants_1[_0x182b67(0x153)],this['branchId'],{[constants_1[_0x182b67(0x149)]+_0x182b67(0x14c)]:_0x4dc54f,[constants_1[_0x182b67(0x119)]+_0x182b67(0x120)]:Date[_0x182b67(0x13f)]()}):await this[_0x182b67(0x11d)][_0x182b67(0x164)](constants_1[_0x182b67(0x14a)],this[_0x182b67(0x12e)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x182b67(0x14c)]:_0x4dc54f});}['setCommitDto'](_0x1cdde6){const _0x4c7ed6=a187_0x1d9910;this[_0x4c7ed6(0x15a)]=_0x1cdde6;}[a187_0x1d9910(0x13b)](){const _0x4749a5=a187_0x1d9910;return this[_0x4749a5(0x160)];}[a187_0x1d9910(0x15e)](){const _0x503710=a187_0x1d9910;return this[_0x503710(0x12e)];}['getBranchId'](){return this['branchId'];}};GitCommitService=__decorate([typedi_1[a187_0x1d9910(0x13c)]({'transient':!![]}),__metadata(a187_0x1d9910(0x167),[salesforce_git_sync_service_1[a187_0x1d9910(0x115)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a187_0x1d9910(0x11c)],salesforce_service_1[a187_0x1d9910(0x14e)]])],GitCommitService),exports['GitCommitService']=GitCommitService;