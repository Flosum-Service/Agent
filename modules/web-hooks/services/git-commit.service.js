const a186_0x5bee7f=a186_0x20f2;(function(_0x3936b5,_0x39c3dc){const _0x43f80d=a186_0x20f2,_0x3ca3ca=_0x3936b5();while(!![]){try{const _0x2a0c31=parseInt(_0x43f80d(0x1b6))/0x1*(parseInt(_0x43f80d(0x1e8))/0x2)+parseInt(_0x43f80d(0x1ee))/0x3+-parseInt(_0x43f80d(0x1ef))/0x4+-parseInt(_0x43f80d(0x1b8))/0x5+parseInt(_0x43f80d(0x1e1))/0x6*(-parseInt(_0x43f80d(0x1f0))/0x7)+-parseInt(_0x43f80d(0x1c6))/0x8*(-parseInt(_0x43f80d(0x1e7))/0x9)+parseInt(_0x43f80d(0x1fa))/0xa*(parseInt(_0x43f80d(0x1df))/0xb);if(_0x2a0c31===_0x39c3dc)break;else _0x3ca3ca['push'](_0x3ca3ca['shift']());}catch(_0x5718c2){_0x3ca3ca['push'](_0x3ca3ca['shift']());}}}(a186_0x4023,0x3c8d1));const a186_0x19bdf7=(function(){let _0x2e561b=!![];return function(_0x4d6003,_0x4f8a4a){const _0x4fac64=_0x2e561b?function(){const _0x4ec3c9=a186_0x20f2;if(_0x4f8a4a){const _0x563927=_0x4f8a4a[_0x4ec3c9(0x1fc)](_0x4d6003,arguments);return _0x4f8a4a=null,_0x563927;}}:function(){};return _0x2e561b=![],_0x4fac64;};}()),a186_0x3c2880=a186_0x19bdf7(this,function(){const _0x3918d9=a186_0x20f2;return a186_0x3c2880[_0x3918d9(0x1ca)]()['search'](_0x3918d9(0x1af))['toString']()[_0x3918d9(0x1d5)](a186_0x3c2880)['search'](_0x3918d9(0x1af));});function a186_0x20f2(_0x37d5eb,_0x5474be){const _0x4a7476=a186_0x4023();return a186_0x20f2=function(_0x3c2880,_0x19bdf7){_0x3c2880=_0x3c2880-0x1af;let _0x40234f=_0x4a7476[_0x3c2880];return _0x40234f;},a186_0x20f2(_0x37d5eb,_0x5474be);}a186_0x3c2880();'use strict';var __decorate=this&&this['__decorate']||function(_0x557e7c,_0x5bf1e3,_0x13b387,_0x5ebe28){const _0xefaf25=a186_0x20f2;var _0x534352=arguments['length'],_0x5e5334=_0x534352<0x3?_0x5bf1e3:_0x5ebe28===null?_0x5ebe28=Object[_0xefaf25(0x1ec)](_0x5bf1e3,_0x13b387):_0x5ebe28,_0x4d14f1;if(typeof Reflect===_0xefaf25(0x1c9)&&typeof Reflect['decorate']===_0xefaf25(0x1d8))_0x5e5334=Reflect[_0xefaf25(0x1e6)](_0x557e7c,_0x5bf1e3,_0x13b387,_0x5ebe28);else{for(var _0x2a12f2=_0x557e7c[_0xefaf25(0x1d4)]-0x1;_0x2a12f2>=0x0;_0x2a12f2--)if(_0x4d14f1=_0x557e7c[_0x2a12f2])_0x5e5334=(_0x534352<0x3?_0x4d14f1(_0x5e5334):_0x534352>0x3?_0x4d14f1(_0x5bf1e3,_0x13b387,_0x5e5334):_0x4d14f1(_0x5bf1e3,_0x13b387))||_0x5e5334;}return _0x534352>0x3&&_0x5e5334&&Object['defineProperty'](_0x5bf1e3,_0x13b387,_0x5e5334),_0x5e5334;},__metadata=this&&this[a186_0x5bee7f(0x1cb)]||function(_0x3817ff,_0x1eaff7){const _0x1784ad=a186_0x5bee7f;if(typeof Reflect===_0x1784ad(0x1c9)&&typeof Reflect[_0x1784ad(0x1c8)]===_0x1784ad(0x1d8))return Reflect['metadata'](_0x3817ff,_0x1eaff7);},GitCommitService_1;Object['defineProperty'](exports,a186_0x5bee7f(0x1b1),{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require(a186_0x5bee7f(0x1e2)),core_1=require('../../../core'),parser_1=require(a186_0x5bee7f(0x1fb)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a186_0x5bee7f(0x1fd)),typedi_1=require(a186_0x5bee7f(0x1db)),salesforce_sync_service_1=require(a186_0x5bee7f(0x1f5)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_commit_utils_1=require('../utils/git-commit.utils');function a186_0x4023(){const _0x25d3a3=['map','recordTypes','logger','length','constructor','master','design:paramtypes','function','branchId','fetchRepositoryComponentsByFilenames','typedi','force','branch','FLOSUM_GIT_NAMESPACE','3058buzEXl','catch','12SurDJS','../../../constants','Logger','TASKS_PER_TICK','MDApiParser','decorate','9yXMwQi','2CZTrKv','salesforceRest','push','parse','getOwnPropertyDescriptor','fileNames','157788yimCKB','1803136Omrsgg','1429925vxlcOz','isPathsEquals','type','salesforce','name','../../salesforce/services/salesforce-sync.service','createCommit','salesforceGitSync','getRepositoryId','retrieveAttachment','15520jbLCqI','../../parsers/mdapi/parser','apply','../../salesforce/services/salesforce-rest.service','includes','componentsMetadata','FLOSUM_BRANCH','(((.+)+)+)+$','getBranchRecordByName','__esModule','syncRecord','fetchRepositoryComponents','FLOSUM_REPOSITORY','SalesforceSyncService','202195cKzuQD','SalesforceGitSyncService','248350RqqmEW','getRemoteStateAttachmentId','fileName','fetchBranchComponentsByFilenames','proceeding\x20file\x20%s','repositoryId','crc','GitCommitService','getBranchId','checkSyncStatus','getRecordTypes','filter','lastCommit','updateRemoteState','3766192lvUiBf','gitCommit','metadata','object','toString','__metadata','getComponentRecordTypes','fetchBranchComponents','repositoryGit','salesforceSync','patch'];a186_0x4023=function(){return _0x25d3a3;};return a186_0x4023();}let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x241610,_0x1d9769,_0x5a5096,_0x4b1623){const _0x216af0=a186_0x5bee7f;this[_0x216af0(0x1f7)]=_0x241610,this[_0x216af0(0x1e9)]=_0x1d9769,this[_0x216af0(0x1cf)]=_0x5a5096,this[_0x216af0(0x1f3)]=_0x4b1623,this[_0x216af0(0x1e4)]=0xc8,this[_0x216af0(0x1d3)]=new core_1[(_0x216af0(0x1e3))](GitCommitService_1[_0x216af0(0x1f4)]);}get['repositoryId'](){const _0x5e11b0=a186_0x5bee7f;var _0x2a962f;return((_0x2a962f=this['syncRecord'])===null||_0x2a962f===void 0x0?void 0x0:_0x2a962f[_0x5e11b0(0x1bd)])||'';}get['branchId'](){var _0x457015;return((_0x457015=this['syncRecord'])===null||_0x457015===void 0x0?void 0x0:_0x457015['branchId'])||'';}async[a186_0x5bee7f(0x1f6)](_0x2e1f12){const _0x3ec177=a186_0x5bee7f;return this[_0x3ec177(0x1f7)][_0x3ec177(0x1f6)](_0x2e1f12,this[_0x3ec177(0x1bd)]);}async[a186_0x5bee7f(0x1c1)](_0x2169bf){const _0x312ebf=a186_0x5bee7f;if(this['syncRecord']){const _0x144337=await this[_0x312ebf(0x1cf)][_0x312ebf(0x1b9)](this[_0x312ebf(0x1b2)]),_0x5ec12c=await this[_0x312ebf(0x1f3)][_0x312ebf(0x1f9)](_0x144337)['then'](_0x10db68=>typeof _0x10db68==='string'?JSON['parse'](_0x10db68):_0x10db68)[_0x312ebf(0x1e0)](()=>({}));if(_0x5ec12c[this[_0x312ebf(0x1c7)][_0x312ebf(0x1ce)]]){if(_0x5ec12c[this[_0x312ebf(0x1c7)][_0x312ebf(0x1ce)]][_0x312ebf(0x1c4)]===_0x2169bf)return!![];}return![];}return![];}async[a186_0x5bee7f(0x1c5)](_0x23169c){const _0x293cbd=a186_0x5bee7f;this[_0x293cbd(0x1b2)]&&await this[_0x293cbd(0x1cf)][_0x293cbd(0x1c5)](this[_0x293cbd(0x1b2)],_0x23169c);}async['proceedFile'](_0x1a1f90,_0x5ef36b,_0xc3d5c2){const _0x52ab8e=a186_0x5bee7f;this[_0x52ab8e(0x1d3)]['log'](_0x52ab8e(0x1bc),_0x1a1f90);const _0x3760d0=this[_0x52ab8e(0x1ff)][_0x52ab8e(0x1c3)](_0x57146f=>git_commit_utils_1[_0x52ab8e(0x1f1)](_0x57146f[_0x52ab8e(0x1ba)],_0x1a1f90)),_0x14985f=[],_0x5ec602=[],_0x2ba23e=[],_0x54b0c3=new parser_1[(_0x52ab8e(0x1e5))](_0x5ef36b,[_0x1a1f90],_0xc3d5c2),_0x300fa5=await _0x54b0c3[_0x52ab8e(0x1eb)](),_0x596c9b=_0x300fa5['map'](_0x4c9091=>{const _0x40477e=_0x52ab8e,_0x5bdfb6=_0x3760d0['find'](_0x2290fa=>_0x2290fa[_0x40477e(0x1f4)]===_0x4c9091[_0x40477e(0x1f4)]&&_0x2290fa['type']===_0x4c9091[_0x40477e(0x1f2)]);if(!_0x5bdfb6){const _0x1df91b={'crc32':_0x4c9091[_0x40477e(0x1be)],'fileName':_0x4c9091['filePath'],'id':null,'version':0x1,'name':_0x4c9091[_0x40477e(0x1f4)],'type':_0x4c9091['type']};return this[_0x40477e(0x1ff)]['push'](_0x1df91b),_0x3760d0[_0x40477e(0x1ea)](_0x1df91b),_0x2ba23e[_0x40477e(0x1ea)](_0x1df91b),_0x5ec602['push'](_0x4c9091),null;}_0x2ba23e[_0x40477e(0x1ea)](_0x5bdfb6);if(_0x4c9091[_0x40477e(0x1be)]===_0x5bdfb6['crc32'])return null;return{'component':_0x4c9091,'meta':_0x5bdfb6};})['filter'](_0x2c5bba=>!!_0x2c5bba);_0x14985f[_0x52ab8e(0x1ea)](..._0x596c9b);const _0x5e71b0=_0x3760d0[_0x52ab8e(0x1c3)](_0x432ad9=>!_0x2ba23e[_0x52ab8e(0x1fe)](_0x432ad9));return this['componentsMetadata']=this[_0x52ab8e(0x1ff)]['filter'](_0x30e788=>!_0x5e71b0['includes'](_0x30e788)),{'inserted':_0x5ec602,'modified':_0x14985f,'removed':_0x5e71b0[_0x52ab8e(0x1d1)](({id:_0x2b3de9,name:_0x3d8d40,type:_0x4377e})=>({'id':_0x2b3de9,'name':_0x3d8d40,'type':_0x4377e}))};}async['fetchRepositoryOrBranchData'](){const _0x27571c=a186_0x5bee7f;this[_0x27571c(0x1b2)]=this[_0x27571c(0x1c7)][_0x27571c(0x1dd)]===_0x27571c(0x1d6)?await this[_0x27571c(0x1cf)]['getRepositoryRecordByName'](this['gitCommit']['repository']):await this[_0x27571c(0x1cf)][_0x27571c(0x1b0)](this['gitCommit'][_0x27571c(0x1dd)]),this[_0x27571c(0x1d2)]=await this['salesforceGitSync'][_0x27571c(0x1cc)]();}async['fetchComponentsMetadata'](_0x16602e){const _0x41da74=a186_0x5bee7f,_0x5d7ae2=[...this[_0x41da74(0x1c7)][_0x41da74(0x1ed)]];if(this['gitCommit'][_0x41da74(0x1dc)]||_0x16602e){this[_0x41da74(0x1ff)]=this[_0x41da74(0x1d9)]?await this[_0x41da74(0x1f7)][_0x41da74(0x1cd)](this['branchId']):await this[_0x41da74(0x1f7)][_0x41da74(0x1b3)](this[_0x41da74(0x1bd)]);return;}this[_0x41da74(0x1ff)]=[];while(_0x5d7ae2[_0x41da74(0x1d4)]){const _0x180f8f=_0x5d7ae2['splice'](0x0,this[_0x41da74(0x1e4)]),_0x4c5926=this[_0x41da74(0x1d9)]?await this[_0x41da74(0x1f7)][_0x41da74(0x1bb)](_0x180f8f,this[_0x41da74(0x1d9)]):await this['salesforceGitSync'][_0x41da74(0x1da)](_0x180f8f,this['repositoryId']);this[_0x41da74(0x1ff)][_0x41da74(0x1ea)](..._0x4c5926);}}async['updateStatus'](_0x4566fd){const _0x56191d=a186_0x5bee7f;this[_0x56191d(0x1d9)]?await this['salesforceRest'][_0x56191d(0x1d0)](constants_1[_0x56191d(0x200)],this['branchId'],{[constants_1[_0x56191d(0x1de)]+'Synchronization_Status__c']:_0x4566fd}):await this[_0x56191d(0x1e9)][_0x56191d(0x1d0)](constants_1[_0x56191d(0x1b4)],this[_0x56191d(0x1bd)],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Synchronization_Status__c']:_0x4566fd});}['setCommitDto'](_0x251832){this['gitCommit']=_0x251832;}[a186_0x5bee7f(0x1c2)](){const _0x5653ab=a186_0x5bee7f;return this[_0x5653ab(0x1d2)];}[a186_0x5bee7f(0x1f8)](){const _0x7a77b2=a186_0x5bee7f;return this[_0x7a77b2(0x1bd)];}[a186_0x5bee7f(0x1c0)](){return this['branchId'];}};GitCommitService=GitCommitService_1=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a186_0x5bee7f(0x1d7),[salesforce_git_sync_service_1[a186_0x5bee7f(0x1b7)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a186_0x5bee7f(0x1b5)],salesforce_service_1['SalesforceService']])],GitCommitService),exports[a186_0x5bee7f(0x1bf)]=GitCommitService;