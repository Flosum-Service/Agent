const a187_0x4e7f01=a187_0x3971;(function(_0x5c4622,_0x1483df){const _0x3a7b65=a187_0x3971,_0x5e074d=_0x5c4622();while(!![]){try{const _0x11e218=-parseInt(_0x3a7b65(0x18b))/0x1+-parseInt(_0x3a7b65(0x187))/0x2*(parseInt(_0x3a7b65(0x1af))/0x3)+-parseInt(_0x3a7b65(0x181))/0x4*(parseInt(_0x3a7b65(0x197))/0x5)+-parseInt(_0x3a7b65(0x189))/0x6+-parseInt(_0x3a7b65(0x1a9))/0x7*(parseInt(_0x3a7b65(0x191))/0x8)+-parseInt(_0x3a7b65(0x17f))/0x9*(parseInt(_0x3a7b65(0x194))/0xa)+parseInt(_0x3a7b65(0x18a))/0xb*(parseInt(_0x3a7b65(0x18c))/0xc);if(_0x11e218===_0x1483df)break;else _0x5e074d['push'](_0x5e074d['shift']());}catch(_0x57123a){_0x5e074d['push'](_0x5e074d['shift']());}}}(a187_0x5e60,0x52cb3));const a187_0x3e76f3=(function(){let _0x23daf8=!![];return function(_0x1efe6f,_0xb64aa1){const _0x539821=_0x23daf8?function(){const _0x4c1950=a187_0x3971;if(_0xb64aa1){const _0x144301=_0xb64aa1[_0x4c1950(0x15e)](_0x1efe6f,arguments);return _0xb64aa1=null,_0x144301;}}:function(){};return _0x23daf8=![],_0x539821;};}()),a187_0x3ef6d3=a187_0x3e76f3(this,function(){const _0x16109c=a187_0x3971;return a187_0x3ef6d3['toString']()[_0x16109c(0x173)](_0x16109c(0x193))[_0x16109c(0x172)]()[_0x16109c(0x19c)](a187_0x3ef6d3)[_0x16109c(0x173)]('(((.+)+)+)+$');});function a187_0x3971(_0x1ecd6c,_0xb1e57a){const _0x5b10a6=a187_0x5e60();return a187_0x3971=function(_0x3ef6d3,_0x3e76f3){_0x3ef6d3=_0x3ef6d3-0x15d;let _0x5e6029=_0x5b10a6[_0x3ef6d3];return _0x5e6029;},a187_0x3971(_0x1ecd6c,_0xb1e57a);}a187_0x3ef6d3();'use strict';var __decorate=this&&this[a187_0x4e7f01(0x1a5)]||function(_0x14b119,_0x211fc0,_0x228a55,_0x3e13ae){const _0x12e90e=a187_0x4e7f01;var _0x196fcc=arguments[_0x12e90e(0x169)],_0x3ad69a=_0x196fcc<0x3?_0x211fc0:_0x3e13ae===null?_0x3e13ae=Object[_0x12e90e(0x160)](_0x211fc0,_0x228a55):_0x3e13ae,_0x479ea5;if(typeof Reflect===_0x12e90e(0x1ad)&&typeof Reflect[_0x12e90e(0x198)]===_0x12e90e(0x17d))_0x3ad69a=Reflect[_0x12e90e(0x198)](_0x14b119,_0x211fc0,_0x228a55,_0x3e13ae);else{for(var _0x39bbf0=_0x14b119['length']-0x1;_0x39bbf0>=0x0;_0x39bbf0--)if(_0x479ea5=_0x14b119[_0x39bbf0])_0x3ad69a=(_0x196fcc<0x3?_0x479ea5(_0x3ad69a):_0x196fcc>0x3?_0x479ea5(_0x211fc0,_0x228a55,_0x3ad69a):_0x479ea5(_0x211fc0,_0x228a55))||_0x3ad69a;}return _0x196fcc>0x3&&_0x3ad69a&&Object[_0x12e90e(0x180)](_0x211fc0,_0x228a55,_0x3ad69a),_0x3ad69a;},__metadata=this&&this[a187_0x4e7f01(0x1a1)]||function(_0x58baa2,_0x4ad5dc){const _0x20d482=a187_0x4e7f01;if(typeof Reflect===_0x20d482(0x1ad)&&typeof Reflect[_0x20d482(0x1a2)]===_0x20d482(0x17d))return Reflect['metadata'](_0x58baa2,_0x4ad5dc);},GitCommitService_1;function a187_0x5e60(){const _0xa38c06=['getRepositoryRecordByName','type','length','find','SalesforceGitSyncService','fileName','FLOSUM_GIT_NAMESPACE','fetchBranchComponentsByFilenames','splice','proceedFile','branch','toString','search','recordTypes','salesforceSync','map','SalesforceService','gitCommit','SalesforceSyncService','retrieveAttachment','TASKS_PER_TICK','salesforceRest','function','../../salesforce/services/salesforce-sync.service','123606nvEkpa','defineProperty','2626508nBsIiU','MDApiParser','SalesforceRestService','repositoryId','patch','setCommitDto','1434qYOQrQ','push','3411510XYwTnq','3850GvQUzs','146829lsFjAp','69468CEoqVi','crc32','getBranchRecordByName','../../../constants','filter','4424XYwUcL','salesforceGitSync','(((.+)+)+)+$','150bCrkry','crc','force','5khNDpd','decorate','fetchRepositoryComponentsByFilenames','Service','Logger','constructor','getRemoteStateAttachmentId','branchId','getComponentRecordTypes','parse','__metadata','metadata','componentsMetadata','logger','__decorate','salesforce','Synchronization_Status__c','fetchRepositoryComponents','490OUlgAi','fetchBranchComponents','repositoryGit','filePath','object','name','294yCqoSp','design:paramtypes','catch','lastCommit','updateStatus','GitCommitService','apply','string','getOwnPropertyDescriptor','syncRecord','../../salesforce/services/salesforce-rest.service','updateRemoteState','master','proceeding\x20file\x20%s','includes'];a187_0x5e60=function(){return _0xa38c06;};return a187_0x5e60();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a187_0x4e7f01(0x15d)]=void 0x0;const constants_1=require(a187_0x4e7f01(0x18f)),core_1=require('../../../core'),parser_1=require('../../parsers/mdapi/parser'),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a187_0x4e7f01(0x162)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a187_0x4e7f01(0x17e)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_commit_utils_1=require('../utils/git-commit.utils');let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x22c432,_0x8d3661,_0x5ce95a,_0x122b62){const _0x334867=a187_0x4e7f01;this[_0x334867(0x192)]=_0x22c432,this[_0x334867(0x17c)]=_0x8d3661,this[_0x334867(0x175)]=_0x5ce95a,this[_0x334867(0x1a6)]=_0x122b62,this[_0x334867(0x17b)]=0xc8,this['logger']=new core_1[(_0x334867(0x19b))](GitCommitService_1[_0x334867(0x1ae)]);}get['repositoryId'](){const _0x528afc=a187_0x4e7f01;var _0x25f7c8;return((_0x25f7c8=this[_0x528afc(0x161)])===null||_0x25f7c8===void 0x0?void 0x0:_0x25f7c8[_0x528afc(0x184)])||'';}get['branchId'](){const _0x13cccf=a187_0x4e7f01;var _0x2b9d83;return((_0x2b9d83=this[_0x13cccf(0x161)])===null||_0x2b9d83===void 0x0?void 0x0:_0x2b9d83['branchId'])||'';}async['createCommit'](_0x4ec311){const _0x53c432=a187_0x4e7f01;return this[_0x53c432(0x192)]['createCommit'](_0x4ec311,this[_0x53c432(0x184)]);}async['checkSyncStatus'](_0x30cb83){const _0x3b570e=a187_0x4e7f01;if(this[_0x3b570e(0x161)]){const _0x1ee88a=await this['salesforceSync'][_0x3b570e(0x19d)](this[_0x3b570e(0x161)]),_0x5a9cdc=await this[_0x3b570e(0x1a6)][_0x3b570e(0x17a)](_0x1ee88a)['then'](_0xb25ab2=>typeof _0xb25ab2===_0x3b570e(0x15f)?JSON['parse'](_0xb25ab2):_0xb25ab2)[_0x3b570e(0x1b1)](()=>({}));if(_0x5a9cdc[this[_0x3b570e(0x178)]['repositoryGit']]){if(_0x5a9cdc[this[_0x3b570e(0x178)][_0x3b570e(0x1ab)]][_0x3b570e(0x1b2)]===_0x30cb83)return!![];}return![];}return![];}async[a187_0x4e7f01(0x163)](_0x359a8d){const _0x5c43f1=a187_0x4e7f01;this[_0x5c43f1(0x161)]&&await this[_0x5c43f1(0x175)][_0x5c43f1(0x163)](this[_0x5c43f1(0x161)],_0x359a8d);}async[a187_0x4e7f01(0x170)](_0xe144f,_0x51c12c,_0x14c7bb){const _0x58f162=a187_0x4e7f01;this[_0x58f162(0x1a4)]['log'](_0x58f162(0x165),_0xe144f);const _0x2907b0=this[_0x58f162(0x1a3)]['filter'](_0x11f93a=>git_commit_utils_1['isPathsEquals'](_0x11f93a[_0x58f162(0x16c)],_0xe144f)),_0x2f860d=[],_0x459ae0=[],_0x5e5aeb=[],_0x42823c=new parser_1[(_0x58f162(0x182))](_0x51c12c,[_0xe144f],_0x14c7bb),_0x514b47=await _0x42823c[_0x58f162(0x1a0)](),_0x2dc576=_0x514b47[_0x58f162(0x176)](_0x3b16a3=>{const _0x525e89=_0x58f162,_0x29f3c7=_0x2907b0[_0x525e89(0x16a)](_0x17bdba=>_0x17bdba['name']===_0x3b16a3[_0x525e89(0x1ae)]&&_0x17bdba[_0x525e89(0x168)]===_0x3b16a3['type']);if(!_0x29f3c7){const _0x37c244={'crc32':_0x3b16a3[_0x525e89(0x195)],'fileName':_0x3b16a3[_0x525e89(0x1ac)],'id':null,'version':0x1,'name':_0x3b16a3[_0x525e89(0x1ae)],'type':_0x3b16a3[_0x525e89(0x168)]};return this[_0x525e89(0x1a3)][_0x525e89(0x188)](_0x37c244),_0x2907b0[_0x525e89(0x188)](_0x37c244),_0x5e5aeb['push'](_0x37c244),_0x459ae0['push'](_0x3b16a3),null;}_0x5e5aeb[_0x525e89(0x188)](_0x29f3c7);if(_0x3b16a3[_0x525e89(0x195)]===_0x29f3c7[_0x525e89(0x18d)])return null;return{'component':_0x3b16a3,'meta':_0x29f3c7};})['filter'](_0x1d6024=>!!_0x1d6024);_0x2f860d[_0x58f162(0x188)](..._0x2dc576);const _0x790134=_0x2907b0['filter'](_0x14053a=>!_0x5e5aeb['includes'](_0x14053a));return this[_0x58f162(0x1a3)]=this['componentsMetadata'][_0x58f162(0x190)](_0x450a3e=>!_0x790134[_0x58f162(0x166)](_0x450a3e)),{'inserted':_0x459ae0,'modified':_0x2f860d,'removed':_0x790134['map'](({id:_0x100176,name:_0x4db21f,type:_0x500b1c})=>({'id':_0x100176,'name':_0x4db21f,'type':_0x500b1c}))};}async['fetchRepositoryOrBranchData'](){const _0x1bffdf=a187_0x4e7f01;this[_0x1bffdf(0x161)]=this[_0x1bffdf(0x178)][_0x1bffdf(0x171)]===_0x1bffdf(0x164)?await this['salesforceSync'][_0x1bffdf(0x167)](this[_0x1bffdf(0x178)]['repository']):await this[_0x1bffdf(0x175)][_0x1bffdf(0x18e)](this[_0x1bffdf(0x178)][_0x1bffdf(0x171)]),this[_0x1bffdf(0x174)]=await this[_0x1bffdf(0x192)][_0x1bffdf(0x19f)]();}async['fetchComponentsMetadata'](_0xa77214){const _0x202256=a187_0x4e7f01,_0x42a012=[...this[_0x202256(0x178)]['fileNames']];if(this['gitCommit'][_0x202256(0x196)]||_0xa77214){this[_0x202256(0x1a3)]=this['branchId']?await this[_0x202256(0x192)][_0x202256(0x1aa)](this[_0x202256(0x19e)]):await this[_0x202256(0x192)][_0x202256(0x1a8)](this[_0x202256(0x184)]);return;}this[_0x202256(0x1a3)]=[];while(_0x42a012[_0x202256(0x169)]){const _0x417ee2=_0x42a012[_0x202256(0x16f)](0x0,this[_0x202256(0x17b)]),_0x80e98e=this[_0x202256(0x19e)]?await this[_0x202256(0x192)][_0x202256(0x16e)](_0x417ee2,this[_0x202256(0x19e)]):await this['salesforceGitSync'][_0x202256(0x199)](_0x417ee2,this[_0x202256(0x184)]);this['componentsMetadata']['push'](..._0x80e98e);}}async[a187_0x4e7f01(0x1b3)](_0xa173d5){const _0x31fde7=a187_0x4e7f01;this['branchId']?await this['salesforceRest'][_0x31fde7(0x185)](constants_1['FLOSUM_BRANCH'],this[_0x31fde7(0x19e)],{[constants_1[_0x31fde7(0x16d)]+_0x31fde7(0x1a7)]:_0xa173d5}):await this[_0x31fde7(0x17c)][_0x31fde7(0x185)](constants_1['FLOSUM_REPOSITORY'],this[_0x31fde7(0x184)],{[constants_1[_0x31fde7(0x16d)]+_0x31fde7(0x1a7)]:_0xa173d5});}[a187_0x4e7f01(0x186)](_0x441861){const _0x2fa2f5=a187_0x4e7f01;this[_0x2fa2f5(0x178)]=_0x441861;}['getRecordTypes'](){const _0x2be9e2=a187_0x4e7f01;return this[_0x2be9e2(0x174)];}['getRepositoryId'](){const _0x36a47f=a187_0x4e7f01;return this[_0x36a47f(0x184)];}['getBranchId'](){const _0x54ef83=a187_0x4e7f01;return this[_0x54ef83(0x19e)];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a187_0x4e7f01(0x19a)]({'transient':!![]}),__metadata(a187_0x4e7f01(0x1b0),[salesforce_git_sync_service_1[a187_0x4e7f01(0x16b)],salesforce_rest_service_1[a187_0x4e7f01(0x183)],salesforce_sync_service_1[a187_0x4e7f01(0x179)],salesforce_service_1[a187_0x4e7f01(0x177)]])],GitCommitService),exports[a187_0x4e7f01(0x15d)]=GitCommitService;