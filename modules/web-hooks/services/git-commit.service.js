const a187_0x3ecffe=a187_0x2398;(function(_0x247fd0,_0x6d21bb){const _0x39ad36=a187_0x2398,_0x5981fb=_0x247fd0();while(!![]){try{const _0x36f5fc=-parseInt(_0x39ad36(0x1d3))/0x1+parseInt(_0x39ad36(0x19a))/0x2*(-parseInt(_0x39ad36(0x19b))/0x3)+parseInt(_0x39ad36(0x1c2))/0x4+-parseInt(_0x39ad36(0x1c5))/0x5+-parseInt(_0x39ad36(0x185))/0x6*(-parseInt(_0x39ad36(0x1ce))/0x7)+parseInt(_0x39ad36(0x1bb))/0x8*(parseInt(_0x39ad36(0x186))/0x9)+-parseInt(_0x39ad36(0x19f))/0xa*(-parseInt(_0x39ad36(0x1c8))/0xb);if(_0x36f5fc===_0x6d21bb)break;else _0x5981fb['push'](_0x5981fb['shift']());}catch(_0x53781c){_0x5981fb['push'](_0x5981fb['shift']());}}}(a187_0x3d1f,0xd7f76));const a187_0x4fcbf4=(function(){let _0x3a7d8c=!![];return function(_0x242e5f,_0x55d093){const _0x322ad3=_0x3a7d8c?function(){const _0x5276fd=a187_0x2398;if(_0x55d093){const _0x215f86=_0x55d093[_0x5276fd(0x1a8)](_0x242e5f,arguments);return _0x55d093=null,_0x215f86;}}:function(){};return _0x3a7d8c=![],_0x322ad3;};}()),a187_0x31addc=a187_0x4fcbf4(this,function(){const _0x4a4870=a187_0x2398;return a187_0x31addc[_0x4a4870(0x1a9)]()[_0x4a4870(0x1d4)]('(((.+)+)+)+$')[_0x4a4870(0x1a9)]()['constructor'](a187_0x31addc)[_0x4a4870(0x1d4)]('(((.+)+)+)+$');});function a187_0x2398(_0x4891af,_0x5a9df0){const _0x1ec03b=a187_0x3d1f();return a187_0x2398=function(_0x31addc,_0x4fcbf4){_0x31addc=_0x31addc-0x180;let _0x3d1f50=_0x1ec03b[_0x31addc];return _0x3d1f50;},a187_0x2398(_0x4891af,_0x5a9df0);}a187_0x31addc();'use strict';var __decorate=this&&this[a187_0x3ecffe(0x1a4)]||function(_0x41838d,_0x26e096,_0x1ac9c7,_0x5c3720){const _0x4f5ef6=a187_0x3ecffe;var _0x12d629=arguments['length'],_0x49617f=_0x12d629<0x3?_0x26e096:_0x5c3720===null?_0x5c3720=Object[_0x4f5ef6(0x1a7)](_0x26e096,_0x1ac9c7):_0x5c3720,_0x7299d2;if(typeof Reflect===_0x4f5ef6(0x1d1)&&typeof Reflect[_0x4f5ef6(0x19d)]===_0x4f5ef6(0x19e))_0x49617f=Reflect['decorate'](_0x41838d,_0x26e096,_0x1ac9c7,_0x5c3720);else{for(var _0x269876=_0x41838d['length']-0x1;_0x269876>=0x0;_0x269876--)if(_0x7299d2=_0x41838d[_0x269876])_0x49617f=(_0x12d629<0x3?_0x7299d2(_0x49617f):_0x12d629>0x3?_0x7299d2(_0x26e096,_0x1ac9c7,_0x49617f):_0x7299d2(_0x26e096,_0x1ac9c7))||_0x49617f;}return _0x12d629>0x3&&_0x49617f&&Object[_0x4f5ef6(0x1b0)](_0x26e096,_0x1ac9c7,_0x49617f),_0x49617f;},__metadata=this&&this['__metadata']||function(_0xad19ce,_0x372646){const _0x52d8ed=a187_0x3ecffe;if(typeof Reflect===_0x52d8ed(0x1d1)&&typeof Reflect[_0x52d8ed(0x194)]===_0x52d8ed(0x19e))return Reflect[_0x52d8ed(0x194)](_0xad19ce,_0x372646);};Object[a187_0x3ecffe(0x1b0)](exports,a187_0x3ecffe(0x181),{'value':!![]}),exports[a187_0x3ecffe(0x1cc)]=void 0x0;const constants_1=require(a187_0x3ecffe(0x1a5)),parser_1=require(a187_0x3ecffe(0x18d)),salesforce_git_sync_service_1=require(a187_0x3ecffe(0x199)),salesforce_rest_service_1=require(a187_0x3ecffe(0x1a3)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a187_0x3ecffe(0x18a)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_commit_utils_1=require(a187_0x3ecffe(0x1cb));let GitCommitService=class GitCommitService{constructor(_0x2fa312,_0xd3f62c,_0x2d251d,_0x44af58){const _0x19ad64=a187_0x3ecffe;this[_0x19ad64(0x183)]=_0x2fa312,this[_0x19ad64(0x1d0)]=_0xd3f62c,this[_0x19ad64(0x1ad)]=_0x2d251d,this[_0x19ad64(0x198)]=_0x44af58,this['TASKS_PER_TICK']=0xc8;}get['repositoryId'](){const _0x4d8e6e=a187_0x3ecffe;var _0x539431;return((_0x539431=this[_0x4d8e6e(0x1c7)])===null||_0x539431===void 0x0?void 0x0:_0x539431[_0x4d8e6e(0x192)])||'';}get[a187_0x3ecffe(0x18e)](){const _0x2f647d=a187_0x3ecffe;var _0x319d7c;return((_0x319d7c=this[_0x2f647d(0x1c7)])===null||_0x319d7c===void 0x0?void 0x0:_0x319d7c['branchId'])||'';}async[a187_0x3ecffe(0x1ca)](_0x236a39){const _0x5195d1=a187_0x3ecffe;return this[_0x5195d1(0x183)][_0x5195d1(0x1ca)](_0x236a39,this[_0x5195d1(0x192)]);}async[a187_0x3ecffe(0x1d2)](_0x51558d){const _0x1edc96=a187_0x3ecffe;if(this[_0x1edc96(0x1c7)]){const _0x21f759=await this[_0x1edc96(0x1ad)][_0x1edc96(0x1ba)](this[_0x1edc96(0x1c7)]),_0x5232e5=await this[_0x1edc96(0x198)][_0x1edc96(0x1c0)](_0x21f759)[_0x1edc96(0x1ae)](_0x36c6d7=>typeof _0x36c6d7===_0x1edc96(0x1b1)?JSON['parse'](_0x36c6d7):_0x36c6d7)['catch'](()=>({}));if(_0x5232e5[this[_0x1edc96(0x1a6)][_0x1edc96(0x1b9)]]){if(_0x5232e5[this[_0x1edc96(0x1a6)][_0x1edc96(0x1b9)]][_0x1edc96(0x1be)]===_0x51558d)return!![];}return![];}return![];}async[a187_0x3ecffe(0x189)](_0xd198d6){const _0x3ddf07=a187_0x3ecffe;this[_0x3ddf07(0x1c7)]&&await this[_0x3ddf07(0x1ad)][_0x3ddf07(0x189)](this[_0x3ddf07(0x1c7)],_0xd198d6);}async[a187_0x3ecffe(0x18c)](_0x97ccd2,_0x4b41f5,_0x556fd7){const _0x26770d=a187_0x3ecffe,_0x1dfcae=this['componentsMetadata'][_0x26770d(0x1bc)](_0x53501d=>git_commit_utils_1[_0x26770d(0x1a0)](_0x53501d['fileName'],_0x97ccd2)),_0x5a9f6e=[],_0x579ef7=[],_0x48de33=[],_0xcaa0a0=new parser_1[(_0x26770d(0x1d5))](_0x4b41f5,[_0x97ccd2],_0x556fd7),_0x3f769e=await _0xcaa0a0[_0x26770d(0x197)](),_0x169873=_0x3f769e[_0x26770d(0x1cd)](_0x5ea808=>{const _0x3013c9=_0x26770d,_0x19d484=_0x1dfcae['find'](_0x2143c9=>_0x2143c9[_0x3013c9(0x18f)]===_0x5ea808[_0x3013c9(0x18f)]&&_0x2143c9[_0x3013c9(0x1b5)]===_0x5ea808[_0x3013c9(0x1b5)]);if(!_0x19d484){const _0x236610={'crc32':_0x5ea808['crc'],'fileName':_0x5ea808['filePath'],'id':null,'version':0x1,'name':_0x5ea808[_0x3013c9(0x18f)],'type':_0x5ea808['type']};return this[_0x3013c9(0x1b3)][_0x3013c9(0x180)](_0x236610),_0x1dfcae[_0x3013c9(0x180)](_0x236610),_0x48de33['push'](_0x236610),_0x579ef7[_0x3013c9(0x180)](_0x5ea808),null;}_0x48de33[_0x3013c9(0x180)](_0x19d484);if(_0x5ea808[_0x3013c9(0x1b8)]===_0x19d484[_0x3013c9(0x195)])return null;return{'component':_0x5ea808,'meta':_0x19d484};})[_0x26770d(0x1bc)](_0x414878=>!!_0x414878);_0x5a9f6e['push'](..._0x169873);const _0x3332ac=_0x1dfcae['filter'](_0x3bb26c=>!_0x48de33['includes'](_0x3bb26c));return this[_0x26770d(0x1b3)]=this[_0x26770d(0x1b3)][_0x26770d(0x1bc)](_0x2d894a=>!_0x3332ac[_0x26770d(0x196)](_0x2d894a)),{'inserted':_0x579ef7,'modified':_0x5a9f6e,'removed':_0x3332ac[_0x26770d(0x1cd)](({id:_0xc61d1a,name:_0x19fb14,type:_0x11edc3})=>({'id':_0xc61d1a,'name':_0x19fb14,'type':_0x11edc3}))};}async['fetchRepositoryOrBranchData'](){const _0x14fe30=a187_0x3ecffe;this[_0x14fe30(0x1c7)]=this[_0x14fe30(0x1a6)]['branch']===_0x14fe30(0x188)?await this[_0x14fe30(0x1ad)][_0x14fe30(0x190)](this[_0x14fe30(0x1a6)][_0x14fe30(0x1a2)]):await this[_0x14fe30(0x1ad)]['getBranchRecordByName'](this['gitCommit'][_0x14fe30(0x1bf)]),this['recordTypes']=await this[_0x14fe30(0x183)]['getComponentRecordTypes']();}async[a187_0x3ecffe(0x187)](_0x28ae1e){const _0xb22b6d=a187_0x3ecffe,_0x3af448=[...this['gitCommit'][_0xb22b6d(0x1b4)]];if(this[_0xb22b6d(0x1a6)]['force']||_0x28ae1e){this[_0xb22b6d(0x1b3)]=this['branchId']?await this['salesforceGitSync'][_0xb22b6d(0x193)](this[_0xb22b6d(0x18e)]):await this[_0xb22b6d(0x183)][_0xb22b6d(0x1ab)](this['repositoryId']);return;}this['componentsMetadata']=[];while(_0x3af448[_0xb22b6d(0x191)]){const _0x571913=_0x3af448[_0xb22b6d(0x1cf)](0x0,this['TASKS_PER_TICK']),_0x3a92b4=this[_0xb22b6d(0x18e)]?await this[_0xb22b6d(0x183)][_0xb22b6d(0x18b)](_0x571913,this[_0xb22b6d(0x18e)]):await this['salesforceGitSync']['fetchRepositoryComponentsByFilenames'](_0x571913,this[_0xb22b6d(0x192)]);this[_0xb22b6d(0x1b3)][_0xb22b6d(0x180)](..._0x3a92b4);}}async[a187_0x3ecffe(0x1c9)](_0x5ad598){const _0x58610f=a187_0x3ecffe;this[_0x58610f(0x18e)]?await this[_0x58610f(0x1d0)][_0x58610f(0x1af)](constants_1[_0x58610f(0x19c)],this['branchId'],{[constants_1[_0x58610f(0x1c1)]+'Synchronization_Status__c']:_0x5ad598,[constants_1[_0x58610f(0x1b2)]+_0x58610f(0x1bd)]:Date[_0x58610f(0x1aa)]()}):await this[_0x58610f(0x1d0)]['patch'](constants_1[_0x58610f(0x182)],this[_0x58610f(0x192)],{[constants_1[_0x58610f(0x1c1)]+'Synchronization_Status__c']:_0x5ad598});}['setCommitDto'](_0x547298){const _0x54cddd=a187_0x3ecffe;this[_0x54cddd(0x1a6)]=_0x547298;}[a187_0x3ecffe(0x1c4)](){return this['recordTypes'];}[a187_0x3ecffe(0x1c3)](){return this['repositoryId'];}[a187_0x3ecffe(0x1ac)](){const _0xc82484=a187_0x3ecffe;return this[_0xc82484(0x18e)];}};function a187_0x3d1f(){const _0x5792f5=['1250346HVqHPs','FLOSUM_BRANCH','decorate','function','960RLDpav','isPathsEquals','SalesforceGitSyncService','repository','../../salesforce/services/salesforce-rest.service','__decorate','../../../constants','gitCommit','getOwnPropertyDescriptor','apply','toString','now','fetchRepositoryComponents','getBranchId','salesforceSync','then','patch','defineProperty','string','FLOSUM_NAMESPACE','componentsMetadata','fileNames','type','SalesforceService','SalesforceSyncService','crc','repositoryGit','getRemoteStateAttachmentId','24prGARw','filter','Last_Updated_On__c','lastCommit','branch','retrieveAttachment','FLOSUM_GIT_NAMESPACE','2680592meRjnT','getRepositoryId','getRecordTypes','8711025vHSgHJ','design:paramtypes','syncRecord','207229LNsDvd','updateStatus','createCommit','../utils/git-commit.utils','GitCommitService','map','1673YPRMHu','splice','salesforceRest','object','checkSyncStatus','19816UdbtSk','search','MDApiParser','push','__esModule','FLOSUM_REPOSITORY','salesforceGitSync','Service','33702vlAZKA','227430ekhmLD','fetchComponentsMetadata','master','updateRemoteState','../../salesforce/services/salesforce-sync.service','fetchBranchComponentsByFilenames','proceedFile','../../parsers/mdapi/parser','branchId','name','getRepositoryRecordByName','length','repositoryId','fetchBranchComponents','metadata','crc32','includes','parse','salesforce','../../salesforce/services/salesforce-git-sync.service','6xbhvfB'];a187_0x3d1f=function(){return _0x5792f5;};return a187_0x3d1f();}GitCommitService=__decorate([typedi_1[a187_0x3ecffe(0x184)]({'transient':!![]}),__metadata(a187_0x3ecffe(0x1c6),[salesforce_git_sync_service_1[a187_0x3ecffe(0x1a1)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a187_0x3ecffe(0x1b7)],salesforce_service_1[a187_0x3ecffe(0x1b6)]])],GitCommitService),exports['GitCommitService']=GitCommitService;