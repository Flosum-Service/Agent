const a187_0x25682f=a187_0x25e3;(function(_0x2373f6,_0x153599){const _0x4dca15=a187_0x25e3,_0x225c47=_0x2373f6();while(!![]){try{const _0x14f393=parseInt(_0x4dca15(0x154))/0x1+parseInt(_0x4dca15(0x18c))/0x2*(parseInt(_0x4dca15(0x181))/0x3)+-parseInt(_0x4dca15(0x160))/0x4+-parseInt(_0x4dca15(0x13e))/0x5+parseInt(_0x4dca15(0x14b))/0x6*(parseInt(_0x4dca15(0x138))/0x7)+parseInt(_0x4dca15(0x140))/0x8+-parseInt(_0x4dca15(0x164))/0x9;if(_0x14f393===_0x153599)break;else _0x225c47['push'](_0x225c47['shift']());}catch(_0xa85d7e){_0x225c47['push'](_0x225c47['shift']());}}}(a187_0x242f,0x5ed79));const a187_0x19206=(function(){let _0x1338f5=!![];return function(_0x42d718,_0x66b420){const _0x133fe7=_0x1338f5?function(){const _0x57bfbf=a187_0x25e3;if(_0x66b420){const _0x324b04=_0x66b420[_0x57bfbf(0x155)](_0x42d718,arguments);return _0x66b420=null,_0x324b04;}}:function(){};return _0x1338f5=![],_0x133fe7;};}()),a187_0x5137fb=a187_0x19206(this,function(){const _0x3aeee8=a187_0x25e3;return a187_0x5137fb[_0x3aeee8(0x185)]()[_0x3aeee8(0x14f)]('(((.+)+)+)+$')[_0x3aeee8(0x185)]()[_0x3aeee8(0x17a)](a187_0x5137fb)[_0x3aeee8(0x14f)](_0x3aeee8(0x139));});a187_0x5137fb();'use strict';var __decorate=this&&this['__decorate']||function(_0x37dd63,_0x4259a9,_0x5dd2a5,_0x4c915c){const _0x248261=a187_0x25e3;var _0x1a0f26=arguments[_0x248261(0x18a)],_0x44e5a4=_0x1a0f26<0x3?_0x4259a9:_0x4c915c===null?_0x4c915c=Object[_0x248261(0x16b)](_0x4259a9,_0x5dd2a5):_0x4c915c,_0x2b4141;if(typeof Reflect===_0x248261(0x18b)&&typeof Reflect[_0x248261(0x165)]==='function')_0x44e5a4=Reflect[_0x248261(0x165)](_0x37dd63,_0x4259a9,_0x5dd2a5,_0x4c915c);else{for(var _0x3c65b7=_0x37dd63[_0x248261(0x18a)]-0x1;_0x3c65b7>=0x0;_0x3c65b7--)if(_0x2b4141=_0x37dd63[_0x3c65b7])_0x44e5a4=(_0x1a0f26<0x3?_0x2b4141(_0x44e5a4):_0x1a0f26>0x3?_0x2b4141(_0x4259a9,_0x5dd2a5,_0x44e5a4):_0x2b4141(_0x4259a9,_0x5dd2a5))||_0x44e5a4;}return _0x1a0f26>0x3&&_0x44e5a4&&Object[_0x248261(0x13c)](_0x4259a9,_0x5dd2a5,_0x44e5a4),_0x44e5a4;},__metadata=this&&this[a187_0x25682f(0x166)]||function(_0x41f6eb,_0x1bbe3a){const _0x1689ab=a187_0x25682f;if(typeof Reflect===_0x1689ab(0x18b)&&typeof Reflect['metadata']===_0x1689ab(0x15c))return Reflect[_0x1689ab(0x137)](_0x41f6eb,_0x1bbe3a);},GitCommitService_1;Object[a187_0x25682f(0x13c)](exports,a187_0x25682f(0x18d),{'value':!![]}),exports[a187_0x25682f(0x13a)]=void 0x0;function a187_0x25e3(_0x3248ee,_0x42539d){const _0x378fc8=a187_0x242f();return a187_0x25e3=function(_0x5137fb,_0x19206){_0x5137fb=_0x5137fb-0x135;let _0x242fd2=_0x378fc8[_0x5137fb];return _0x242fd2;},a187_0x25e3(_0x3248ee,_0x42539d);}const constants_1=require(a187_0x25682f(0x189)),core_1=require(a187_0x25682f(0x13d)),parser_1=require(a187_0x25682f(0x17f)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a187_0x25682f(0x178)),typedi_1=require(a187_0x25682f(0x17d)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a187_0x25682f(0x14d)),git_commit_utils_1=require(a187_0x25682f(0x16f));function a187_0x242f(){const _0x82f7df=['../../parsers/mdapi/parser','map','462873NNpBPX','branchId','SalesforceService','force','toString','fileNames','salesforceSync','TASKS_PER_TICK','../../../constants','length','object','8phkwxc','__esModule','Logger','getBranchRecordByName','branch','string','createCommit','metadata','201593PWtOsv','(((.+)+)+)+$','GitCommitService','filePath','defineProperty','../../../core','2212075dVUUuN','recordTypes','5259808qCUYHv','FLOSUM_GIT_NAMESPACE','SalesforceGitSyncService','patch','FLOSUM_REPOSITORY','getBranchId','Service','isPathsEquals','fetchBranchComponents','includes','SalesforceRestService','30tXrlqD','syncRecord','../../salesforce/services/salesforce.service','fileName','search','push','gitCommit','find','filter','501525OTMQFT','apply','salesforce','repository','name','fetchBranchComponentsByFilenames','fetchComponentsMetadata','fetchRepositoryComponentsByFilenames','function','getRepositoryId','Synchronization_Status__c','catch','2479324rHZydL','SalesforceSyncService','logger','fetchRepositoryOrBranchData','4224969iHosjn','decorate','__metadata','repositoryId','parse','crc','splice','getOwnPropertyDescriptor','getRecordTypes','type','then','../utils/git-commit.utils','salesforceRest','componentsMetadata','getRepositoryRecordByName','FLOSUM_BRANCH','setCommitDto','checkSyncStatus','getRemoteStateAttachmentId','repositoryGit','../../salesforce/services/salesforce-rest.service','fetchRepositoryComponents','constructor','salesforceGitSync','master','typedi','updateRemoteState'];a187_0x242f=function(){return _0x82f7df;};return a187_0x242f();}let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x216d07,_0x41fea4,_0x10957f,_0x482fef){const _0xdda2bd=a187_0x25682f;this[_0xdda2bd(0x17b)]=_0x216d07,this[_0xdda2bd(0x170)]=_0x41fea4,this[_0xdda2bd(0x187)]=_0x10957f,this[_0xdda2bd(0x156)]=_0x482fef,this['TASKS_PER_TICK']=0xc8,this[_0xdda2bd(0x162)]=new core_1[(_0xdda2bd(0x18e))](GitCommitService_1[_0xdda2bd(0x158)]);}get[a187_0x25682f(0x167)](){const _0x454806=a187_0x25682f;var _0x14991;return((_0x14991=this['syncRecord'])===null||_0x14991===void 0x0?void 0x0:_0x14991[_0x454806(0x167)])||'';}get['branchId'](){const _0x1af81e=a187_0x25682f;var _0x4a90ef;return((_0x4a90ef=this[_0x1af81e(0x14c)])===null||_0x4a90ef===void 0x0?void 0x0:_0x4a90ef['branchId'])||'';}async[a187_0x25682f(0x136)](_0x140d07){const _0x9eede2=a187_0x25682f;return this[_0x9eede2(0x17b)]['createCommit'](_0x140d07,this[_0x9eede2(0x167)]);}async[a187_0x25682f(0x175)](_0x49282b){const _0x3d9c56=a187_0x25682f;if(this[_0x3d9c56(0x14c)]){const _0x108d30=await this[_0x3d9c56(0x187)][_0x3d9c56(0x176)](this[_0x3d9c56(0x14c)]),_0x4856d4=await this['salesforce']['retrieveAttachment'](_0x108d30)[_0x3d9c56(0x16e)](_0xbec4d=>typeof _0xbec4d===_0x3d9c56(0x135)?JSON[_0x3d9c56(0x168)](_0xbec4d):_0xbec4d)[_0x3d9c56(0x15f)](()=>({}));if(_0x4856d4[this['gitCommit'][_0x3d9c56(0x177)]]){if(_0x4856d4[this['gitCommit']['repositoryGit']]['lastCommit']===_0x49282b)return!![];}return![];}return![];}async[a187_0x25682f(0x17e)](_0x37cfa3){const _0x3c6c9d=a187_0x25682f;this['syncRecord']&&await this[_0x3c6c9d(0x187)][_0x3c6c9d(0x17e)](this['syncRecord'],_0x37cfa3);}async['proceedFile'](_0x53c95e,_0x17b51f,_0x54add9){const _0x5d0fdb=a187_0x25682f,_0x619c24=this[_0x5d0fdb(0x171)][_0x5d0fdb(0x153)](_0x5c41ed=>git_commit_utils_1[_0x5d0fdb(0x147)](_0x5c41ed[_0x5d0fdb(0x14e)],_0x53c95e)),_0x4b1110=[],_0xad120b=[],_0x39f98a=[],_0x3f8d26=new parser_1['MDApiParser'](_0x17b51f,[_0x53c95e],_0x54add9),_0xd7dbaa=await _0x3f8d26['parse'](),_0x4c5b37=_0xd7dbaa[_0x5d0fdb(0x180)](_0x40540b=>{const _0x2bf575=_0x5d0fdb,_0x4099a1=_0x619c24[_0x2bf575(0x152)](_0x38f581=>_0x38f581[_0x2bf575(0x158)]===_0x40540b[_0x2bf575(0x158)]&&_0x38f581[_0x2bf575(0x16d)]===_0x40540b['type']);if(!_0x4099a1){const _0x2b2171={'crc32':_0x40540b[_0x2bf575(0x169)],'fileName':_0x40540b[_0x2bf575(0x13b)],'id':null,'version':0x1,'name':_0x40540b[_0x2bf575(0x158)],'type':_0x40540b[_0x2bf575(0x16d)]};return this['componentsMetadata'][_0x2bf575(0x150)](_0x2b2171),_0x619c24[_0x2bf575(0x150)](_0x2b2171),_0x39f98a[_0x2bf575(0x150)](_0x2b2171),_0xad120b[_0x2bf575(0x150)](_0x40540b),null;}_0x39f98a[_0x2bf575(0x150)](_0x4099a1);if(_0x40540b[_0x2bf575(0x169)]===_0x4099a1['crc32'])return null;return{'component':_0x40540b,'meta':_0x4099a1};})[_0x5d0fdb(0x153)](_0x291991=>!!_0x291991);_0x4b1110[_0x5d0fdb(0x150)](..._0x4c5b37);const _0x5a932d=_0x619c24[_0x5d0fdb(0x153)](_0x4163a8=>!_0x39f98a[_0x5d0fdb(0x149)](_0x4163a8));return this[_0x5d0fdb(0x171)]=this[_0x5d0fdb(0x171)][_0x5d0fdb(0x153)](_0x477d9f=>!_0x5a932d[_0x5d0fdb(0x149)](_0x477d9f)),{'inserted':_0xad120b,'modified':_0x4b1110,'removed':_0x5a932d['map'](({id:_0x5d8502,name:_0x267495,type:_0x5869cd})=>({'id':_0x5d8502,'name':_0x267495,'type':_0x5869cd}))};}async[a187_0x25682f(0x163)](){const _0x451224=a187_0x25682f;this[_0x451224(0x14c)]=this[_0x451224(0x151)][_0x451224(0x190)]===_0x451224(0x17c)?await this[_0x451224(0x187)][_0x451224(0x172)](this[_0x451224(0x151)][_0x451224(0x157)]):await this[_0x451224(0x187)][_0x451224(0x18f)](this[_0x451224(0x151)][_0x451224(0x190)]),this[_0x451224(0x13f)]=await this[_0x451224(0x17b)]['getComponentRecordTypes']();}async[a187_0x25682f(0x15a)](_0x1d57a8){const _0x3d8e4c=a187_0x25682f,_0x2e8660=[...this[_0x3d8e4c(0x151)][_0x3d8e4c(0x186)]];if(this[_0x3d8e4c(0x151)][_0x3d8e4c(0x184)]||_0x1d57a8){this[_0x3d8e4c(0x171)]=this[_0x3d8e4c(0x182)]?await this[_0x3d8e4c(0x17b)][_0x3d8e4c(0x148)](this[_0x3d8e4c(0x182)]):await this['salesforceGitSync'][_0x3d8e4c(0x179)](this['repositoryId']);return;}this['componentsMetadata']=[];while(_0x2e8660[_0x3d8e4c(0x18a)]){const _0x177350=_0x2e8660[_0x3d8e4c(0x16a)](0x0,this[_0x3d8e4c(0x188)]),_0x13e5d7=this[_0x3d8e4c(0x182)]?await this[_0x3d8e4c(0x17b)][_0x3d8e4c(0x159)](_0x177350,this['branchId']):await this[_0x3d8e4c(0x17b)][_0x3d8e4c(0x15b)](_0x177350,this[_0x3d8e4c(0x167)]);this[_0x3d8e4c(0x171)][_0x3d8e4c(0x150)](..._0x13e5d7);}}async['updateStatus'](_0x56a188){const _0x5ee9b9=a187_0x25682f;this['branchId']?await this[_0x5ee9b9(0x170)]['patch'](constants_1[_0x5ee9b9(0x173)],this['branchId'],{[constants_1[_0x5ee9b9(0x141)]+_0x5ee9b9(0x15e)]:_0x56a188}):await this[_0x5ee9b9(0x170)][_0x5ee9b9(0x143)](constants_1[_0x5ee9b9(0x144)],this[_0x5ee9b9(0x167)],{[constants_1[_0x5ee9b9(0x141)]+_0x5ee9b9(0x15e)]:_0x56a188});}[a187_0x25682f(0x174)](_0x27d5ec){const _0x5b9beb=a187_0x25682f;this[_0x5b9beb(0x151)]=_0x27d5ec;}[a187_0x25682f(0x16c)](){return this['recordTypes'];}[a187_0x25682f(0x15d)](){const _0x24e954=a187_0x25682f;return this[_0x24e954(0x167)];}[a187_0x25682f(0x145)](){return this['branchId'];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a187_0x25682f(0x146)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a187_0x25682f(0x142)],salesforce_rest_service_1[a187_0x25682f(0x14a)],salesforce_sync_service_1[a187_0x25682f(0x161)],salesforce_service_1[a187_0x25682f(0x183)]])],GitCommitService),exports['GitCommitService']=GitCommitService;