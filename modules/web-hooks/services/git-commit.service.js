const a186_0x14ffea=a186_0x48e5;(function(_0x3ec0f4,_0x9fcf1){const _0x12a117=a186_0x48e5,_0xcd667=_0x3ec0f4();while(!![]){try{const _0x37f9ae=parseInt(_0x12a117(0xbb))/0x1*(-parseInt(_0x12a117(0xa9))/0x2)+-parseInt(_0x12a117(0xf8))/0x3+-parseInt(_0x12a117(0xad))/0x4+-parseInt(_0x12a117(0xd8))/0x5+-parseInt(_0x12a117(0xec))/0x6+parseInt(_0x12a117(0xba))/0x7+-parseInt(_0x12a117(0xdd))/0x8*(-parseInt(_0x12a117(0xdf))/0x9);if(_0x37f9ae===_0x9fcf1)break;else _0xcd667['push'](_0xcd667['shift']());}catch(_0x51281e){_0xcd667['push'](_0xcd667['shift']());}}}(a186_0x4093,0x56ca4));const a186_0xfa9894=(function(){let _0x46f2d8=!![];return function(_0xe61c2a,_0x34107d){const _0x103b8f=_0x46f2d8?function(){const _0x227d6c=a186_0x48e5;if(_0x34107d){const _0x3577b6=_0x34107d[_0x227d6c(0xc3)](_0xe61c2a,arguments);return _0x34107d=null,_0x3577b6;}}:function(){};return _0x46f2d8=![],_0x103b8f;};}()),a186_0x331beb=a186_0xfa9894(this,function(){const _0x3c6f03=a186_0x48e5;return a186_0x331beb['toString']()[_0x3c6f03(0xe2)](_0x3c6f03(0xb3))[_0x3c6f03(0xdc)]()[_0x3c6f03(0xd7)](a186_0x331beb)[_0x3c6f03(0xe2)](_0x3c6f03(0xb3));});a186_0x331beb();function a186_0x48e5(_0x194bca,_0x435d73){const _0x5a29a3=a186_0x4093();return a186_0x48e5=function(_0x331beb,_0xfa9894){_0x331beb=_0x331beb-0xa4;let _0x40934c=_0x5a29a3[_0x331beb];return _0x40934c;},a186_0x48e5(_0x194bca,_0x435d73);}'use strict';var __decorate=this&&this['__decorate']||function(_0x1d7d9e,_0x520fae,_0x420dd6,_0x42befb){const _0x5cf531=a186_0x48e5;var _0x1d4797=arguments['length'],_0xb61e67=_0x1d4797<0x3?_0x520fae:_0x42befb===null?_0x42befb=Object[_0x5cf531(0xf1)](_0x520fae,_0x420dd6):_0x42befb,_0x273290;if(typeof Reflect===_0x5cf531(0xc2)&&typeof Reflect[_0x5cf531(0xed)]===_0x5cf531(0xa5))_0xb61e67=Reflect['decorate'](_0x1d7d9e,_0x520fae,_0x420dd6,_0x42befb);else{for(var _0xf5647=_0x1d7d9e[_0x5cf531(0xce)]-0x1;_0xf5647>=0x0;_0xf5647--)if(_0x273290=_0x1d7d9e[_0xf5647])_0xb61e67=(_0x1d4797<0x3?_0x273290(_0xb61e67):_0x1d4797>0x3?_0x273290(_0x520fae,_0x420dd6,_0xb61e67):_0x273290(_0x520fae,_0x420dd6))||_0xb61e67;}return _0x1d4797>0x3&&_0xb61e67&&Object['defineProperty'](_0x520fae,_0x420dd6,_0xb61e67),_0xb61e67;},__metadata=this&&this[a186_0x14ffea(0xde)]||function(_0x3aa78a,_0x282d99){const _0x4f1c25=a186_0x14ffea;if(typeof Reflect===_0x4f1c25(0xc2)&&typeof Reflect[_0x4f1c25(0xab)]==='function')return Reflect['metadata'](_0x3aa78a,_0x282d99);},GitCommitService_1;function a186_0x4093(){const _0xe5f354=['fetchRepositoryComponents','filePath','logger','fileNames','map','892380lvYZwd','decorate','typedi','branchId','proceeding\x20file\x20%s','getOwnPropertyDescriptor','salesforceRest','salesforceSync','TASKS_PER_TICK','repositoryGit','patch','getRemoteStateAttachmentId','1858584dktMvg','gitCommit','recordTypes','lastCommit','parse','syncRecord','../../salesforce/services/salesforce-sync.service','salesforce','function','includes','branch','filter','10NuCakb','getComponentRecordTypes','metadata','Synchronization_Status__c','1610460Mhbfqp','type','setCommitDto','getRepositoryId','FLOSUM_REPOSITORY','push','(((.+)+)+)+$','../../../constants','../../salesforce/services/salesforce-rest.service','catch','MDApiParser','componentsMetadata','repositoryId','2770628bIOrud','27994FcTrPB','fetchBranchComponentsByFilenames','getRecordTypes','design:paramtypes','proceedFile','updateStatus','getBranchRecordByName','object','apply','crc','__esModule','fileName','isPathsEquals','log','fetchRepositoryComponentsByFilenames','FLOSUM_GIT_NAMESPACE','Service','salesforceGitSync','string','length','GitCommitService','crc32','createCommit','SalesforceService','fetchComponentsMetadata','../../parsers/mdapi/parser','find','force','constructor','1644155zaUTmy','Logger','fetchBranchComponents','name','toString','592vMQoSu','__metadata','194517iAsJbn','checkSyncStatus','SalesforceGitSyncService','search','fetchRepositoryOrBranchData','updateRemoteState','../../salesforce/services/salesforce.service','FLOSUM_BRANCH'];a186_0x4093=function(){return _0xe5f354;};return a186_0x4093();}Object['defineProperty'](exports,a186_0x14ffea(0xc5),{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require(a186_0x14ffea(0xb4)),core_1=require('../../../core'),parser_1=require(a186_0x14ffea(0xd4)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a186_0x14ffea(0xb5)),typedi_1=require(a186_0x14ffea(0xee)),salesforce_sync_service_1=require(a186_0x14ffea(0xfe)),salesforce_service_1=require(a186_0x14ffea(0xe5)),git_commit_utils_1=require('../utils/git-commit.utils');let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x512792,_0x3772ba,_0x13be11,_0x4a584d){const _0x494ccd=a186_0x14ffea;this[_0x494ccd(0xcc)]=_0x512792,this[_0x494ccd(0xf2)]=_0x3772ba,this[_0x494ccd(0xf3)]=_0x13be11,this[_0x494ccd(0xa4)]=_0x4a584d,this[_0x494ccd(0xf4)]=0xc8,this[_0x494ccd(0xe9)]=new core_1[(_0x494ccd(0xd9))](GitCommitService_1[_0x494ccd(0xdb)]);}get['repositoryId'](){const _0x42e91c=a186_0x14ffea;var _0x5354ed;return((_0x5354ed=this[_0x42e91c(0xfd)])===null||_0x5354ed===void 0x0?void 0x0:_0x5354ed[_0x42e91c(0xb9)])||'';}get[a186_0x14ffea(0xef)](){const _0x24552f=a186_0x14ffea;var _0xdc19df;return((_0xdc19df=this[_0x24552f(0xfd)])===null||_0xdc19df===void 0x0?void 0x0:_0xdc19df[_0x24552f(0xef)])||'';}async[a186_0x14ffea(0xd1)](_0x9ec130){const _0x56f001=a186_0x14ffea;return this['salesforceGitSync']['createCommit'](_0x9ec130,this[_0x56f001(0xb9)]);}async[a186_0x14ffea(0xe0)](_0xf65f64){const _0x2b6263=a186_0x14ffea;if(this[_0x2b6263(0xfd)]){const _0xb726ee=await this[_0x2b6263(0xf3)][_0x2b6263(0xf7)](this[_0x2b6263(0xfd)]),_0x48bdde=await this[_0x2b6263(0xa4)]['retrieveAttachment'](_0xb726ee)['then'](_0x22e117=>typeof _0x22e117===_0x2b6263(0xcd)?JSON[_0x2b6263(0xfc)](_0x22e117):_0x22e117)[_0x2b6263(0xb6)](()=>({}));if(_0x48bdde[this[_0x2b6263(0xf9)][_0x2b6263(0xf5)]]){if(_0x48bdde[this['gitCommit'][_0x2b6263(0xf5)]][_0x2b6263(0xfb)]===_0xf65f64)return!![];}return![];}return![];}async['updateRemoteState'](_0xf8c106){const _0x84e32f=a186_0x14ffea;this['syncRecord']&&await this[_0x84e32f(0xf3)][_0x84e32f(0xe4)](this['syncRecord'],_0xf8c106);}async[a186_0x14ffea(0xbf)](_0x4b89c5,_0x5ee375,_0x23cc17){const _0xced41e=a186_0x14ffea;this[_0xced41e(0xe9)][_0xced41e(0xc8)](_0xced41e(0xf0),_0x4b89c5);const _0x584fc8=this['componentsMetadata'][_0xced41e(0xa8)](_0x45d695=>git_commit_utils_1[_0xced41e(0xc7)](_0x45d695[_0xced41e(0xc6)],_0x4b89c5)),_0x102b0d=[],_0x200d0b=[],_0x5bb807=[],_0x416960=new parser_1[(_0xced41e(0xb7))](_0x5ee375,[_0x4b89c5],_0x23cc17),_0x4ecc4b=await _0x416960[_0xced41e(0xfc)](),_0x4e3314=_0x4ecc4b[_0xced41e(0xeb)](_0x1d6e9a=>{const _0x324427=_0xced41e,_0x589091=_0x584fc8[_0x324427(0xd5)](_0x27f509=>_0x27f509[_0x324427(0xdb)]===_0x1d6e9a[_0x324427(0xdb)]&&_0x27f509[_0x324427(0xae)]===_0x1d6e9a[_0x324427(0xae)]);if(!_0x589091){const _0x56097c={'crc32':_0x1d6e9a[_0x324427(0xc4)],'fileName':_0x1d6e9a[_0x324427(0xe8)],'id':null,'version':0x1,'name':_0x1d6e9a[_0x324427(0xdb)],'type':_0x1d6e9a[_0x324427(0xae)]};return this[_0x324427(0xb8)][_0x324427(0xb2)](_0x56097c),_0x584fc8['push'](_0x56097c),_0x5bb807[_0x324427(0xb2)](_0x56097c),_0x200d0b[_0x324427(0xb2)](_0x1d6e9a),null;}_0x5bb807[_0x324427(0xb2)](_0x589091);if(_0x1d6e9a[_0x324427(0xc4)]===_0x589091[_0x324427(0xd0)])return null;return{'component':_0x1d6e9a,'meta':_0x589091};})[_0xced41e(0xa8)](_0x168dfd=>!!_0x168dfd);_0x102b0d[_0xced41e(0xb2)](..._0x4e3314);const _0x42f0de=_0x584fc8[_0xced41e(0xa8)](_0x3d205c=>!_0x5bb807[_0xced41e(0xa6)](_0x3d205c));return this[_0xced41e(0xb8)]=this[_0xced41e(0xb8)][_0xced41e(0xa8)](_0x1dd8d6=>!_0x42f0de[_0xced41e(0xa6)](_0x1dd8d6)),{'inserted':_0x200d0b,'modified':_0x102b0d,'removed':_0x42f0de[_0xced41e(0xeb)](({id:_0x2cb94a,name:_0x311c5e,type:_0x3a86f5})=>({'id':_0x2cb94a,'name':_0x311c5e,'type':_0x3a86f5}))};}async[a186_0x14ffea(0xe3)](){const _0x206bad=a186_0x14ffea;this[_0x206bad(0xfd)]=this[_0x206bad(0xf9)][_0x206bad(0xa7)]==='master'?await this[_0x206bad(0xf3)]['getRepositoryRecordByName'](this[_0x206bad(0xf9)]['repository']):await this[_0x206bad(0xf3)][_0x206bad(0xc1)](this['gitCommit'][_0x206bad(0xa7)]),this['recordTypes']=await this[_0x206bad(0xcc)][_0x206bad(0xaa)]();}async[a186_0x14ffea(0xd3)](_0x149418){const _0x4ec842=a186_0x14ffea,_0x2db335=[...this['gitCommit'][_0x4ec842(0xea)]];if(this[_0x4ec842(0xf9)][_0x4ec842(0xd6)]||_0x149418){this[_0x4ec842(0xb8)]=this['branchId']?await this[_0x4ec842(0xcc)][_0x4ec842(0xda)](this[_0x4ec842(0xef)]):await this[_0x4ec842(0xcc)][_0x4ec842(0xe7)](this['repositoryId']);return;}this[_0x4ec842(0xb8)]=[];while(_0x2db335[_0x4ec842(0xce)]){const _0x149add=_0x2db335['splice'](0x0,this[_0x4ec842(0xf4)]),_0x5ddb00=this[_0x4ec842(0xef)]?await this['salesforceGitSync'][_0x4ec842(0xbc)](_0x149add,this[_0x4ec842(0xef)]):await this[_0x4ec842(0xcc)][_0x4ec842(0xc9)](_0x149add,this['repositoryId']);this[_0x4ec842(0xb8)][_0x4ec842(0xb2)](..._0x5ddb00);}}async[a186_0x14ffea(0xc0)](_0x10eb44){const _0x240d54=a186_0x14ffea;this['branchId']?await this['salesforceRest'][_0x240d54(0xf6)](constants_1[_0x240d54(0xe6)],this[_0x240d54(0xef)],{[constants_1[_0x240d54(0xca)]+'Synchronization_Status__c']:_0x10eb44}):await this[_0x240d54(0xf2)][_0x240d54(0xf6)](constants_1[_0x240d54(0xb1)],this[_0x240d54(0xb9)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x240d54(0xac)]:_0x10eb44});}[a186_0x14ffea(0xaf)](_0xb3c69c){const _0x5b1ece=a186_0x14ffea;this[_0x5b1ece(0xf9)]=_0xb3c69c;}[a186_0x14ffea(0xbd)](){const _0x24383a=a186_0x14ffea;return this[_0x24383a(0xfa)];}[a186_0x14ffea(0xb0)](){return this['repositoryId'];}['getBranchId'](){const _0x4c30ea=a186_0x14ffea;return this[_0x4c30ea(0xef)];}};GitCommitService=GitCommitService_1=__decorate([typedi_1[a186_0x14ffea(0xcb)]({'transient':!![]}),__metadata(a186_0x14ffea(0xbe),[salesforce_git_sync_service_1[a186_0x14ffea(0xe1)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a186_0x14ffea(0xd2)]])],GitCommitService),exports[a186_0x14ffea(0xcf)]=GitCommitService;