const a187_0x408b37=a187_0xdbe9;(function(_0x35cbc7,_0xd1a6e){const _0x52bb11=a187_0xdbe9,_0x51be5f=_0x35cbc7();while(!![]){try{const _0x5fe323=parseInt(_0x52bb11(0xdd))/0x1+parseInt(_0x52bb11(0xaa))/0x2+parseInt(_0x52bb11(0xef))/0x3+parseInt(_0x52bb11(0xb3))/0x4*(-parseInt(_0x52bb11(0xe9))/0x5)+-parseInt(_0x52bb11(0xbd))/0x6*(parseInt(_0x52bb11(0xca))/0x7)+-parseInt(_0x52bb11(0xf4))/0x8*(parseInt(_0x52bb11(0xc5))/0x9)+parseInt(_0x52bb11(0xd9))/0xa*(parseInt(_0x52bb11(0xd7))/0xb);if(_0x5fe323===_0xd1a6e)break;else _0x51be5f['push'](_0x51be5f['shift']());}catch(_0x381275){_0x51be5f['push'](_0x51be5f['shift']());}}}(a187_0x5e69,0x8633f));const a187_0x42c427=(function(){let _0x1f8cf7=!![];return function(_0x5396d4,_0x1bb74c){const _0x434130=_0x1f8cf7?function(){const _0x16b46e=a187_0xdbe9;if(_0x1bb74c){const _0x12a4b6=_0x1bb74c[_0x16b46e(0xa3)](_0x5396d4,arguments);return _0x1bb74c=null,_0x12a4b6;}}:function(){};return _0x1f8cf7=![],_0x434130;};}()),a187_0x371177=a187_0x42c427(this,function(){const _0x280abd=a187_0xdbe9;return a187_0x371177['toString']()[_0x280abd(0xa4)](_0x280abd(0xa8))[_0x280abd(0xa5)]()['constructor'](a187_0x371177)[_0x280abd(0xa4)](_0x280abd(0xa8));});a187_0x371177();'use strict';var __decorate=this&&this['__decorate']||function(_0x2f01cf,_0x5c1f74,_0x51be54,_0x5307aa){const _0x9087dc=a187_0xdbe9;var _0x291482=arguments['length'],_0x2432d3=_0x291482<0x3?_0x5c1f74:_0x5307aa===null?_0x5307aa=Object[_0x9087dc(0xec)](_0x5c1f74,_0x51be54):_0x5307aa,_0x488feb;if(typeof Reflect===_0x9087dc(0xf6)&&typeof Reflect[_0x9087dc(0xcf)]===_0x9087dc(0xf9))_0x2432d3=Reflect['decorate'](_0x2f01cf,_0x5c1f74,_0x51be54,_0x5307aa);else{for(var _0x36a475=_0x2f01cf[_0x9087dc(0xe3)]-0x1;_0x36a475>=0x0;_0x36a475--)if(_0x488feb=_0x2f01cf[_0x36a475])_0x2432d3=(_0x291482<0x3?_0x488feb(_0x2432d3):_0x291482>0x3?_0x488feb(_0x5c1f74,_0x51be54,_0x2432d3):_0x488feb(_0x5c1f74,_0x51be54))||_0x2432d3;}return _0x291482>0x3&&_0x2432d3&&Object[_0x9087dc(0xe7)](_0x5c1f74,_0x51be54,_0x2432d3),_0x2432d3;},__metadata=this&&this[a187_0x408b37(0xb1)]||function(_0x2eaa81,_0x59f648){const _0x53fa90=a187_0x408b37;if(typeof Reflect==='object'&&typeof Reflect[_0x53fa90(0xc7)]===_0x53fa90(0xf9))return Reflect[_0x53fa90(0xc7)](_0x2eaa81,_0x59f648);},GitCommitService_1;function a187_0xdbe9(_0xde80d2,_0x2f9c90){const _0x145814=a187_0x5e69();return a187_0xdbe9=function(_0x371177,_0x42c427){_0x371177=_0x371177-0xa3;let _0x5e6938=_0x145814[_0x371177];return _0x5e6938;},a187_0xdbe9(_0xde80d2,_0x2f9c90);}Object[a187_0x408b37(0xe7)](exports,a187_0x408b37(0xe2),{'value':!![]}),exports[a187_0x408b37(0xde)]=void 0x0;const constants_1=require(a187_0x408b37(0xe0)),core_1=require(a187_0x408b37(0xb6)),parser_1=require('../../parsers/mdapi/parser'),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a187_0x408b37(0xd5)),typedi_1=require(a187_0x408b37(0xee)),salesforce_sync_service_1=require(a187_0x408b37(0xdc)),salesforce_service_1=require(a187_0x408b37(0xb8)),git_commit_utils_1=require(a187_0x408b37(0xda));let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x2f6c93,_0x3b11bf,_0x3c300e,_0x370c6d){const _0x197f36=a187_0x408b37;this[_0x197f36(0xfa)]=_0x2f6c93,this[_0x197f36(0xa9)]=_0x3b11bf,this['salesforceSync']=_0x3c300e,this['salesforce']=_0x370c6d,this[_0x197f36(0xd4)]=0xc8,this[_0x197f36(0xae)]=new core_1['Logger'](GitCommitService_1['name']);}get[a187_0x408b37(0xc3)](){const _0x7c9aa2=a187_0x408b37;var _0x63add2;return((_0x63add2=this[_0x7c9aa2(0xb7)])===null||_0x63add2===void 0x0?void 0x0:_0x63add2['repositoryId'])||'';}get[a187_0x408b37(0xb9)](){const _0x2c7c9b=a187_0x408b37;var _0x5b41c4;return((_0x5b41c4=this['syncRecord'])===null||_0x5b41c4===void 0x0?void 0x0:_0x5b41c4[_0x2c7c9b(0xb9)])||'';}async[a187_0x408b37(0xf8)](_0x37e51c){const _0x626453=a187_0x408b37;return this[_0x626453(0xfa)][_0x626453(0xf8)](_0x37e51c,this['repositoryId']);}async[a187_0x408b37(0xc1)](_0x2304de){const _0x46512f=a187_0x408b37;if(this[_0x46512f(0xb7)]){const _0x5eb833=await this[_0x46512f(0xf5)][_0x46512f(0xea)](this[_0x46512f(0xb7)]),_0x45f1f0=await this[_0x46512f(0xb5)]['retrieveAttachment'](_0x5eb833)[_0x46512f(0xf0)](_0x1ed8a1=>typeof _0x1ed8a1===_0x46512f(0xe1)?JSON[_0x46512f(0xe6)](_0x1ed8a1):_0x1ed8a1)[_0x46512f(0xcb)](()=>({}));if(_0x45f1f0[this[_0x46512f(0xc6)][_0x46512f(0xb2)]]){if(_0x45f1f0[this[_0x46512f(0xc6)][_0x46512f(0xb2)]][_0x46512f(0xdf)]===_0x2304de)return!![];}return![];}return![];}async[a187_0x408b37(0xba)](_0x149a9f){const _0x58b9cc=a187_0x408b37;this[_0x58b9cc(0xb7)]&&await this[_0x58b9cc(0xf5)]['updateRemoteState'](this['syncRecord'],_0x149a9f);}async['proceedFile'](_0x262133,_0x294ba6,_0x3129ba){const _0x135f75=a187_0x408b37;this[_0x135f75(0xae)]['log'](_0x135f75(0xbb),_0x262133);const _0xbf1650=this['componentsMetadata'][_0x135f75(0xfb)](_0x48c4eb=>git_commit_utils_1['isPathsEquals'](_0x48c4eb[_0x135f75(0xf3)],_0x262133)),_0x16c5b8=[],_0x2b1c70=[],_0x5e7989=[],_0x4b8072=new parser_1[(_0x135f75(0xf7))](_0x294ba6,[_0x262133],_0x3129ba),_0x5f4411=await _0x4b8072[_0x135f75(0xe6)](),_0x48c009=_0x5f4411[_0x135f75(0xc9)](_0x5d45f4=>{const _0x314f42=_0x135f75,_0x2e9175=_0xbf1650['find'](_0x42809c=>_0x42809c[_0x314f42(0xed)]===_0x5d45f4[_0x314f42(0xed)]&&_0x42809c[_0x314f42(0xdb)]===_0x5d45f4[_0x314f42(0xdb)]);if(!_0x2e9175){const _0x48cef0={'crc32':_0x5d45f4[_0x314f42(0xce)],'fileName':_0x5d45f4['filePath'],'id':null,'version':0x1,'name':_0x5d45f4[_0x314f42(0xed)],'type':_0x5d45f4[_0x314f42(0xdb)]};return this[_0x314f42(0xd1)][_0x314f42(0xeb)](_0x48cef0),_0xbf1650[_0x314f42(0xeb)](_0x48cef0),_0x5e7989[_0x314f42(0xeb)](_0x48cef0),_0x2b1c70[_0x314f42(0xeb)](_0x5d45f4),null;}_0x5e7989[_0x314f42(0xeb)](_0x2e9175);if(_0x5d45f4['crc']===_0x2e9175[_0x314f42(0xcc)])return null;return{'component':_0x5d45f4,'meta':_0x2e9175};})['filter'](_0x192012=>!!_0x192012);_0x16c5b8[_0x135f75(0xeb)](..._0x48c009);const _0x22bfc0=_0xbf1650[_0x135f75(0xfb)](_0x404c8a=>!_0x5e7989['includes'](_0x404c8a));return this[_0x135f75(0xd1)]=this[_0x135f75(0xd1)][_0x135f75(0xfb)](_0x3bb0d8=>!_0x22bfc0['includes'](_0x3bb0d8)),{'inserted':_0x2b1c70,'modified':_0x16c5b8,'removed':_0x22bfc0[_0x135f75(0xc9)](({id:_0x4cc5eb,name:_0xf1f8ce,type:_0x539e20})=>({'id':_0x4cc5eb,'name':_0xf1f8ce,'type':_0x539e20}))};}async[a187_0x408b37(0xad)](){const _0x33fca1=a187_0x408b37;this['syncRecord']=this[_0x33fca1(0xc6)][_0x33fca1(0xcd)]===_0x33fca1(0xc4)?await this[_0x33fca1(0xf5)][_0x33fca1(0xc8)](this[_0x33fca1(0xc6)][_0x33fca1(0xd6)]):await this['salesforceSync'][_0x33fca1(0xaf)](this[_0x33fca1(0xc6)]['branch']),this[_0x33fca1(0xd3)]=await this['salesforceGitSync']['getComponentRecordTypes']();}async[a187_0x408b37(0xa6)](_0x37cd58){const _0xedf587=a187_0x408b37,_0x313531=[...this[_0xedf587(0xc6)][_0xedf587(0xe5)]];if(this[_0xedf587(0xc6)][_0xedf587(0xa7)]||_0x37cd58){this['componentsMetadata']=this['branchId']?await this['salesforceGitSync'][_0xedf587(0xf1)](this[_0xedf587(0xb9)]):await this[_0xedf587(0xfa)][_0xedf587(0xc2)](this[_0xedf587(0xc3)]);return;}this[_0xedf587(0xd1)]=[];while(_0x313531[_0xedf587(0xe3)]){const _0x3bc038=_0x313531[_0xedf587(0xbc)](0x0,this[_0xedf587(0xd4)]),_0x47b351=this[_0xedf587(0xb9)]?await this['salesforceGitSync'][_0xedf587(0xd0)](_0x3bc038,this['branchId']):await this[_0xedf587(0xfa)][_0xedf587(0xab)](_0x3bc038,this['repositoryId']);this[_0xedf587(0xd1)][_0xedf587(0xeb)](..._0x47b351);}}async[a187_0x408b37(0xbe)](_0x5de7c6){const _0x577ea4=a187_0x408b37;this[_0x577ea4(0xb9)]?await this['salesforceRest']['patch'](constants_1[_0x577ea4(0xd8)],this['branchId'],{[constants_1[_0x577ea4(0xc0)]+_0x577ea4(0xac)]:_0x5de7c6}):await this[_0x577ea4(0xa9)]['patch'](constants_1[_0x577ea4(0xbf)],this[_0x577ea4(0xc3)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x577ea4(0xac)]:_0x5de7c6});}[a187_0x408b37(0xb0)](_0x59516b){const _0x4b6be3=a187_0x408b37;this[_0x4b6be3(0xc6)]=_0x59516b;}[a187_0x408b37(0xd2)](){const _0x57af59=a187_0x408b37;return this[_0x57af59(0xd3)];}['getRepositoryId'](){const _0x2d7e74=a187_0x408b37;return this[_0x2d7e74(0xc3)];}[a187_0x408b37(0xe4)](){return this['branchId'];}};function a187_0x5e69(){const _0x4596b0=['map','6634299kEDsGs','catch','crc32','branch','crc','decorate','fetchBranchComponentsByFilenames','componentsMetadata','getRecordTypes','recordTypes','TASKS_PER_TICK','../../salesforce/services/salesforce-rest.service','repository','494351qGIvlI','FLOSUM_BRANCH','250PJzdYD','../utils/git-commit.utils','type','../../salesforce/services/salesforce-sync.service','85472uKqGQy','GitCommitService','lastCommit','../../../constants','string','__esModule','length','getBranchId','fileNames','parse','defineProperty','SalesforceRestService','415XiiTJF','getRemoteStateAttachmentId','push','getOwnPropertyDescriptor','name','typedi','3199659nUmhJj','then','fetchBranchComponents','Service','fileName','2488bUmxnY','salesforceSync','object','MDApiParser','createCommit','function','salesforceGitSync','filter','apply','search','toString','fetchComponentsMetadata','force','(((.+)+)+)+$','salesforceRest','1162042BTefRJ','fetchRepositoryComponentsByFilenames','Synchronization_Status__c','fetchRepositoryOrBranchData','logger','getBranchRecordByName','setCommitDto','__metadata','repositoryGit','19112saYXPm','SalesforceGitSyncService','salesforce','../../../core','syncRecord','../../salesforce/services/salesforce.service','branchId','updateRemoteState','proceeding\x20file\x20%s','splice','6NwedTA','updateStatus','FLOSUM_REPOSITORY','FLOSUM_GIT_NAMESPACE','checkSyncStatus','fetchRepositoryComponents','repositoryId','master','27855bWfXCT','gitCommit','metadata','getRepositoryRecordByName'];a187_0x5e69=function(){return _0x4596b0;};return a187_0x5e69();}GitCommitService=GitCommitService_1=__decorate([typedi_1[a187_0x408b37(0xf2)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a187_0x408b37(0xb4)],salesforce_rest_service_1[a187_0x408b37(0xe8)],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1['SalesforceService']])],GitCommitService),exports['GitCommitService']=GitCommitService;