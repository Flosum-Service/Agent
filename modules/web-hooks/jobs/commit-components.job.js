function a180_0x251e(){const _0x2feb86=['function','metadata','clearDir','isSFDXProject','apply','default','\x20components','prepareMdapi','call','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','__esModule','join','object','name','copyProjectTo','DEFAULT_GIT_USER_EMAIL','prototype','sfdxUtils','commitAndPush','force','type','[INFO]\x20Start\x20clonning\x20repository','constructor','search','CommitComponentsDto','sfLogger','126RJmQZm','copyMdapiTo','force-app','design:paramtypes','[INFO]\x20Preparing\x20to\x20delete\x20components','bitbucket','exec','commitData','toString','__createBinding','getOwnPropertyDescriptor','gitUtils','SalesforceLogger2','1572vuYnUT','cleanUp','../../salesforce/services/salesforce-logger-v2.service','../../../constants','fileName','length','__importDefault','deleted','components','removeDir','master','authSettings','../utils/git.utils','defineProperty','://','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','../../shared/utils','log','getCredentialsFor','Service','provider','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','150sMeVSp','[INFO]\x20Deleted\x20','getRemote','../../parsers/data/child-types','push','[INFO]\x20Preparing\x20to\x20write\x20components','send','branch','43488GMYvxW','(((.+)+)+)+$','clone','[INFO]\x20Committing\x20and\x20pushing\x20source\x20to\x20git','run','ms.\x20Committed\x20components\x20-\x20','decorate','[INFO]\x20Wrote\x20','writeFlosumComponents','__metadata','reduce','mdapiUtils','6341MfVQvP','__decorate','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','../utils/mdapi.utils','removeComponents','sort','../utils/sfdx.utils','fileType','componentsToWrite','385408moZChz','splice','gitUrl','3342525GiVckz','get','COMPONENTS_PER_TICK','writed','20531460nURTvK','catch','13573WWYjmw','values','componentsToDelete','../../internal/fs.internal','now','includes','[INFO]\x20Prepare\x20mdapi\x20files','getProtocol','replace','AuthSettingsService','SFDX','events','startTime','CommitComponentsJob','BitbucketApiService','367866degJzp','dir','__importStar'];a180_0x251e=function(){return _0x2feb86;};return a180_0x251e();}const a180_0x16437d=a180_0xebc8;(function(_0x431081,_0x1194e4){const _0x4a22db=a180_0xebc8,_0x4cc845=_0x431081();while(!![]){try{const _0x3d4ea0=-parseInt(_0x4a22db(0x1f5))/0x1*(parseInt(_0x4a22db(0x1e1))/0x2)+parseInt(_0x4a22db(0x216))/0x3+-parseInt(_0x4a22db(0x1fe))/0x4+-parseInt(_0x4a22db(0x201))/0x5+-parseInt(_0x4a22db(0x1cb))/0x6*(parseInt(_0x4a22db(0x207))/0x7)+-parseInt(_0x4a22db(0x1e9))/0x8*(parseInt(_0x4a22db(0x233))/0x9)+parseInt(_0x4a22db(0x205))/0xa;if(_0x3d4ea0===_0x1194e4)break;else _0x4cc845['push'](_0x4cc845['shift']());}catch(_0x8ab69e){_0x4cc845['push'](_0x4cc845['shift']());}}}(a180_0x251e,0x55bee));const a180_0x5a40c1=(function(){let _0x292c8d=!![];return function(_0x30ca59,_0x2373e3){const _0x1bfccc=_0x292c8d?function(){const _0x378437=a180_0xebc8;if(_0x2373e3){const _0x5c6cb3=_0x2373e3[_0x378437(0x21d)](_0x30ca59,arguments);return _0x2373e3=null,_0x5c6cb3;}}:function(){};return _0x292c8d=![],_0x1bfccc;};}()),a180_0xa4f870=a180_0x5a40c1(this,function(){const _0x62cc1b=a180_0xebc8;return a180_0xa4f870[_0x62cc1b(0x1c6)]()['search']('(((.+)+)+)+$')[_0x62cc1b(0x1c6)]()[_0x62cc1b(0x22f)](a180_0xa4f870)[_0x62cc1b(0x230)](_0x62cc1b(0x1ea));});a180_0xa4f870();'use strict';var __createBinding=this&&this[a180_0x16437d(0x1c7)]||(Object['create']?function(_0x156a78,_0x4bd850,_0x16d24d,_0x417adc){const _0x483052=a180_0x16437d;if(_0x417adc===undefined)_0x417adc=_0x16d24d;Object[_0x483052(0x1d8)](_0x156a78,_0x417adc,{'enumerable':!![],'get':function(){return _0x4bd850[_0x16d24d];}});}:function(_0x30f82f,_0x225e18,_0x2d232a,_0xc1178b){if(_0xc1178b===undefined)_0xc1178b=_0x2d232a;_0x30f82f[_0xc1178b]=_0x225e18[_0x2d232a];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x3e6819,_0x1eaaeb){const _0x267272=a180_0x16437d;Object[_0x267272(0x1d8)](_0x3e6819,_0x267272(0x21e),{'enumerable':!![],'value':_0x1eaaeb});}:function(_0x1af5df,_0x575165){const _0x25d77e=a180_0x16437d;_0x1af5df[_0x25d77e(0x21e)]=_0x575165;}),__decorate=this&&this[a180_0x16437d(0x1f6)]||function(_0x54524a,_0x56e5ed,_0x4c394e,_0xa0ed80){const _0x1a4ce0=a180_0x16437d;var _0x39204e=arguments[_0x1a4ce0(0x1d0)],_0x325976=_0x39204e<0x3?_0x56e5ed:_0xa0ed80===null?_0xa0ed80=Object[_0x1a4ce0(0x1c8)](_0x56e5ed,_0x4c394e):_0xa0ed80,_0x1ac1ca;if(typeof Reflect===_0x1a4ce0(0x225)&&typeof Reflect['decorate']==='function')_0x325976=Reflect[_0x1a4ce0(0x1ef)](_0x54524a,_0x56e5ed,_0x4c394e,_0xa0ed80);else{for(var _0x59aa4f=_0x54524a['length']-0x1;_0x59aa4f>=0x0;_0x59aa4f--)if(_0x1ac1ca=_0x54524a[_0x59aa4f])_0x325976=(_0x39204e<0x3?_0x1ac1ca(_0x325976):_0x39204e>0x3?_0x1ac1ca(_0x56e5ed,_0x4c394e,_0x325976):_0x1ac1ca(_0x56e5ed,_0x4c394e))||_0x325976;}return _0x39204e>0x3&&_0x325976&&Object[_0x1a4ce0(0x1d8)](_0x56e5ed,_0x4c394e,_0x325976),_0x325976;},__importStar=this&&this[a180_0x16437d(0x218)]||function(_0x57532d){const _0x633835=a180_0x16437d;if(_0x57532d&&_0x57532d[_0x633835(0x223)])return _0x57532d;var _0x2f2bd2={};if(_0x57532d!=null){for(var _0x419b4a in _0x57532d)if(_0x419b4a!==_0x633835(0x21e)&&Object[_0x633835(0x229)]['hasOwnProperty'][_0x633835(0x221)](_0x57532d,_0x419b4a))__createBinding(_0x2f2bd2,_0x57532d,_0x419b4a);}return __setModuleDefault(_0x2f2bd2,_0x57532d),_0x2f2bd2;},__metadata=this&&this[a180_0x16437d(0x1f2)]||function(_0x442240,_0x218948){const _0x18015f=a180_0x16437d;if(typeof Reflect===_0x18015f(0x225)&&typeof Reflect[_0x18015f(0x21a)]===_0x18015f(0x219))return Reflect['metadata'](_0x442240,_0x218948);},__importDefault=this&&this[a180_0x16437d(0x1d1)]||function(_0x4ad5e3){const _0x177c71=a180_0x16437d;return _0x4ad5e3&&_0x4ad5e3[_0x177c71(0x223)]?_0x4ad5e3:{'default':_0x4ad5e3};};Object[a180_0x16437d(0x1d8)](exports,a180_0x16437d(0x223),{'value':!![]}),exports[a180_0x16437d(0x214)]=void 0x0;function a180_0xebc8(_0x290c79,_0x3f6ea0){const _0x3141c0=a180_0x251e();return a180_0xebc8=function(_0xa4f870,_0x5a40c1){_0xa4f870=_0xa4f870-0x1c2;let _0x251e97=_0x3141c0[_0xa4f870];return _0x251e97;},a180_0xebc8(_0x290c79,_0x3f6ea0);}const auth_settings_service_1=require('../../shared/services/auth-settings.service'),commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a180_0x16437d(0x212))),git_utils_1=require(a180_0x16437d(0x1d7)),mdapi_utils_1=require(a180_0x16437d(0x1f8)),sfdx_utils_1=require(a180_0x16437d(0x1fb)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a180_0x16437d(0x1e4))),utils_1=require(a180_0x16437d(0x1db)),salesforce_logger_v2_service_1=require(a180_0x16437d(0x1cd)),constants_1=require(a180_0x16437d(0x1ce)),bitbucket_api_service_1=require('../../git-api/services/bitbucket-api.service'),sfdx_utils_2=require('../../salesforce/utils/sfdx.utils'),fs_internal_1=require(a180_0x16437d(0x20a)),path_1=require('path');let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(_0x4a1b5e){const _0x312efd=a180_0x16437d;super(),this[_0x312efd(0x1d6)]=_0x4a1b5e,this[_0x312efd(0x203)]=0x3e8,this[_0x312efd(0x1fd)]=0x0,this[_0x312efd(0x209)]=0x0,this[_0x312efd(0x213)]=Date[_0x312efd(0x20b)]();}async[a180_0x16437d(0x1e3)](){const _0x6f6a02=a180_0x16437d,{repo:_0x2abc36}=this['commitData'];let _0x13c389=this[_0x6f6a02(0x1d6)][_0x6f6a02(0x1dd)](this['commitData'][_0x6f6a02(0x1df)]);if(this[_0x6f6a02(0x1c5)]['provider']===_0x6f6a02(0x1c3)){const _0x1a0e49=typedi_1[_0x6f6a02(0x21e)][_0x6f6a02(0x202)](bitbucket_api_service_1[_0x6f6a02(0x215)]);await _0x1a0e49['isLoggedIn'](),_0x13c389+=encodeURIComponent(_0x1a0e49['getAccessToken']());}return _0x2abc36[_0x6f6a02(0x200)][_0x6f6a02(0x20f)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x6f6a02(0x20e)](_0x2abc36['gitUrl'])+_0x6f6a02(0x1d9)+_0x13c389+'@');}['groupComponentsByFileName'](_0x3de85e){const _0x230bee=a180_0x16437d;var _0x5046fd;_0x3de85e[_0x230bee(0x1fa)](_0x43fa7a=>child_types_1['default'][_0x230bee(0x20c)](_0x43fa7a[_0x230bee(0x1fc)])?0x1:-0x1);const _0x408f9c={};for(const _0x41b7b5 of _0x3de85e){_0x408f9c[_0x5046fd=_0x41b7b5['fileName']]||(_0x408f9c[_0x5046fd]=[]),_0x408f9c[_0x41b7b5[_0x230bee(0x1cf)]][_0x230bee(0x1e5)](_0x41b7b5);}return Object[_0x230bee(0x208)](_0x408f9c)[_0x230bee(0x1f3)]((_0x16ec68,_0x3ac12b)=>[..._0x16ec68,..._0x3ac12b],[]);}async['writeComponents'](_0x54f7ec){const _0x5a97aa=a180_0x16437d;_0x54f7ec=this['groupComponentsByFileName'](_0x54f7ec);let _0x5361e7=0x0;while(_0x54f7ec['length']){const _0x339b0b=_0x54f7ec[_0x5a97aa(0x1ff)](0x0,this['COMPONENTS_PER_TICK']);await this['mdapiUtils'][_0x5a97aa(0x1f1)](_0x339b0b,{'skipChildErrors':this[_0x5a97aa(0x1c5)][_0x5a97aa(0x1e8)][_0x5a97aa(0x226)]===_0x5a97aa(0x1d5)}),_0x5361e7+=_0x339b0b[_0x5a97aa(0x1d0)],this[_0x5a97aa(0x232)][_0x5a97aa(0x1dc)](_0x5a97aa(0x1f0)+_0x5361e7+'/'+this[_0x5a97aa(0x1fd)]+'\x20components'),await this['sfLogger']['send']();}}async[a180_0x16437d(0x1f9)](_0xc704d6){const _0x5a668d=a180_0x16437d;_0xc704d6[_0x5a668d(0x1fa)](_0x5b09c0=>child_types_1[_0x5a668d(0x21e)]['includes'](_0x5b09c0[_0x5a668d(0x22d)])?-0x1:0x1);let _0x17d87d=0x0;while(_0xc704d6['length']){const _0x4f3332=_0xc704d6[_0x5a668d(0x1ff)](0x0,this[_0x5a668d(0x203)]);await this['mdapiUtils'][_0x5a668d(0x1f9)](_0x4f3332),_0x17d87d+=_0x4f3332['length'],this[_0x5a668d(0x232)][_0x5a668d(0x1dc)](_0x5a668d(0x1e2)+_0x17d87d+'/'+this[_0x5a668d(0x209)]+_0x5a668d(0x21f)),await this[_0x5a668d(0x232)][_0x5a668d(0x1e7)]();}}async[a180_0x16437d(0x1cc)](){const _0xaec37f=a180_0x16437d;this[_0xaec37f(0x1c9)]&&await this[_0xaec37f(0x1c9)][_0xaec37f(0x1d4)]()[_0xaec37f(0x206)](()=>void 0x0),this['mdapiUtils']&&await this[_0xaec37f(0x1f4)][_0xaec37f(0x1d4)]()[_0xaec37f(0x206)](()=>void 0x0),this[_0xaec37f(0x22a)]&&await this[_0xaec37f(0x22a)]['removeDir']()[_0xaec37f(0x206)](()=>void 0x0);}async['exec'](){const _0x61713e=a180_0x16437d,{repo:_0x54edf3,branch:_0x56a715,components:_0x4f5abf,convertToSFDX:_0x19f566,message:_0x2402ed,user:_0x2fd900}=this[_0x61713e(0x1c5)];this['mdapiUtils']=new mdapi_utils_1['MDApiUtils'](_0x54edf3[_0x61713e(0x226)],_0x56a715['name']),this[_0x61713e(0x1c9)]=new git_utils_1['GitUtils'](await this[_0x61713e(0x1e3)]()),this[_0x61713e(0x22a)]=new sfdx_utils_1['SFDXUtils'](_0x54edf3[_0x61713e(0x226)],_0x56a715[_0x61713e(0x226)]);let _0x2a4c41=_0x19f566;try{this[_0x61713e(0x232)][_0x61713e(0x1dc)](_0x61713e(0x22e)),await this[_0x61713e(0x1c9)][_0x61713e(0x1eb)](_0x56a715[_0x61713e(0x226)],_0x54edf3[_0x61713e(0x226)]);!this[_0x61713e(0x1c5)][_0x61713e(0x22c)]?(this[_0x61713e(0x232)][_0x61713e(0x1dc)](_0x61713e(0x20d)),await this['mdapiUtils'][_0x61713e(0x220)](this[_0x61713e(0x1c9)][_0x61713e(0x217)])):this[_0x61713e(0x232)][_0x61713e(0x1dc)](_0x61713e(0x1e0));_0x4f5abf['writed']&&(this[_0x61713e(0x232)][_0x61713e(0x1dc)](_0x61713e(0x1e6)),this['componentsToWrite']=_0x4f5abf['writed'][_0x61713e(0x1d0)],await this['writeComponents'](_0x4f5abf[_0x61713e(0x204)]),await this[_0x61713e(0x232)][_0x61713e(0x1e7)]());_0x4f5abf['deleted']&&(this['sfLogger'][_0x61713e(0x1dc)](_0x61713e(0x1c2)),this[_0x61713e(0x209)]=_0x4f5abf['deleted'][_0x61713e(0x1d0)],await this[_0x61713e(0x1f9)](_0x4f5abf[_0x61713e(0x1d2)]),await this[_0x61713e(0x232)][_0x61713e(0x1e7)]());await this[_0x61713e(0x232)][_0x61713e(0x1e7)]();await sfdx_utils_2[_0x61713e(0x211)][_0x61713e(0x21c)](this[_0x61713e(0x1c9)][_0x61713e(0x217)])?(_0x2a4c41=!![],await fs_internal_1['FS'][_0x61713e(0x1d4)](path_1[_0x61713e(0x224)](this[_0x61713e(0x1c9)]['dir'],_0x61713e(0x235)))):(_0x2a4c41&&(!await fs_internal_1['FS']['isEmptyDir'](this[_0x61713e(0x1c9)]['dir'])&&(_0x2a4c41=![])),await this[_0x61713e(0x1c9)][_0x61713e(0x21b)]());_0x2a4c41?(this[_0x61713e(0x232)][_0x61713e(0x1dc)]('[INFO]\x20Start\x20converting\x20to\x20SFDX'),await this[_0x61713e(0x22a)]['createProjectFrom'](this[_0x61713e(0x1f4)]['dir']),await this['sfdxUtils'][_0x61713e(0x227)](this[_0x61713e(0x1c9)][_0x61713e(0x217)]),await this['sfdxUtils'][_0x61713e(0x1d4)](),await this[_0x61713e(0x232)][_0x61713e(0x1e7)]()):(this[_0x61713e(0x232)][_0x61713e(0x1dc)](_0x61713e(0x222)),await this[_0x61713e(0x1f4)][_0x61713e(0x234)](this[_0x61713e(0x1c9)]['dir']),await this['sfLogger'][_0x61713e(0x1e7)]());this[_0x61713e(0x232)][_0x61713e(0x1dc)](_0x61713e(0x1ec)),await this['gitUtils'][_0x61713e(0x22b)](_0x2402ed,{'email':constants_1[_0x61713e(0x228)],'name':_0x2fd900['name']},_0x56a715[_0x61713e(0x226)]),await this['gitUtils'][_0x61713e(0x1d4)](),await this['mdapiUtils'][_0x61713e(0x1d4)]();const _0x55b21b=this[_0x61713e(0x1fd)]+this[_0x61713e(0x209)];this[_0x61713e(0x232)][_0x61713e(0x1dc)](_0x61713e(0x1f7)+(Date['now']()-this['startTime'])+_0x61713e(0x1ee)+_0x55b21b),await this[_0x61713e(0x232)][_0x61713e(0x1e7)]();}catch(_0x598cdb){await this[_0x61713e(0x1cc)](),this[_0x61713e(0x232)][_0x61713e(0x1dc)]('[ERROR]\x20'+_0x598cdb),await this['sfLogger']['send']();throw _0x598cdb;}}async[a180_0x16437d(0x1ed)](_0xf10926,_0x34bbb0){const _0x4f308a=a180_0x16437d;var _0x407761,_0x22b69f;this['sfLogger']=new salesforce_logger_v2_service_1[(_0x4f308a(0x1ca))](_0x34bbb0['getLoggerId'](),_0x34bbb0['getPrefix']()+'\x20['+commit_components_dto_1[_0x4f308a(0x231)]['name']+']');const _0x173bfe=!!((_0x407761=_0xf10926[_0x4f308a(0x1d3)])===null||_0x407761===void 0x0?void 0x0:_0x407761[_0x4f308a(0x204)])||!!((_0x22b69f=_0xf10926[_0x4f308a(0x1d3)])===null||_0x22b69f===void 0x0?void 0x0:_0x22b69f[_0x4f308a(0x1d2)]);if(!_0x173bfe){this[_0x4f308a(0x232)]['log'](_0x4f308a(0x1da)),await this[_0x4f308a(0x232)][_0x4f308a(0x1e7)]();return;}this[_0x4f308a(0x1c5)]=_0xf10926,await this[_0x4f308a(0x1c4)]();}};CommitComponentsJob=__decorate([typedi_1[a180_0x16437d(0x1de)]({'transient':!![]}),__metadata(a180_0x16437d(0x236),[auth_settings_service_1[a180_0x16437d(0x210)]])],CommitComponentsJob),exports[a180_0x16437d(0x214)]=CommitComponentsJob;