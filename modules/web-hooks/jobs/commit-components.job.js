function a180_0x336e(){const _0x1aa0ae=['search','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','Service','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','../utils/git.utils','prepareMdapi','__metadata','[INFO]\x20Start\x20converting\x20to\x20SFDX','879GtpqGb','408ZaGFdp','values','createProjectFrom','componentsToDelete','[INFO]\x20Preparing\x20to\x20write\x20components','[INFO]\x20Start\x20clonning\x20repository','13RKFkeI','commitAndPush','__importStar','constructor','function','82964doJYqp','run','93894LacXOm','://','send','copyProjectTo','mdapiUtils','componentsToWrite','11160387qTOhBt','3354306JrKmzr','getPrefix','AuthSettingsService','__setModuleDefault','../../git-api/services/bitbucket-api.service','hasOwnProperty','../dto/commit-components.dto','type','fileName','decorate','sort','get','writed','GitUtils','SFDX','[INFO]\x20Prepare\x20mdapi\x20files','16071OOmVXp','(((.+)+)+)+$','gitUrl','fileType','../utils/sfdx.utils','getOwnPropertyDescriptor','create','gitUtils','724jAdsBH','COMPONENTS_PER_TICK','isLoggedIn','clearDir','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','replace','getAccessToken','sfdxUtils','splice','writeFlosumComponents','components','exec','authSettings','isEmptyDir','default','../../shared/utils','removeComponents','defineProperty','path','[INFO]\x20Preparing\x20to\x20delete\x20components','name','dir','../../../constants','../../salesforce/utils/sfdx.utils','6742710EzIqXT','object','9150PLTodL','catch','writeComponents','SalesforceLogger2','toString','length','deleted','call','startTime','sfLogger','provider','CommitComponentsJob','DEFAULT_GIT_USER_EMAIL','log','../../parsers/data/child-types','getRemote','bitbucket','now','[INFO]\x20Deleted\x20','__esModule','prototype','includes','reduce','getProtocol','metadata','copyMdapiTo','design:paramtypes','groupComponentsByFileName','__decorate','commitData','removeDir','apply','\x20components','[INFO]\x20Committing\x20and\x20pushing\x20source\x20to\x20git','branch'];a180_0x336e=function(){return _0x1aa0ae;};return a180_0x336e();}const a180_0xb69dca=a180_0x884b;(function(_0x3a7025,_0x1bda48){const _0x6c4b96=a180_0x884b,_0x51705d=_0x3a7025();while(!![]){try{const _0x1f3ab5=parseInt(_0x6c4b96(0x15f))/0x1*(parseInt(_0x6c4b96(0x166))/0x2)+parseInt(_0x6c4b96(0x158))/0x3*(parseInt(_0x6c4b96(0x185))/0x4)+parseInt(_0x6c4b96(0x19d))/0x5+-parseInt(_0x6c4b96(0x16d))/0x6+-parseInt(_0x6c4b96(0x164))/0x7*(parseInt(_0x6c4b96(0x159))/0x8)+parseInt(_0x6c4b96(0x16c))/0x9+-parseInt(_0x6c4b96(0x12d))/0xa*(parseInt(_0x6c4b96(0x17d))/0xb);if(_0x1f3ab5===_0x1bda48)break;else _0x51705d['push'](_0x51705d['shift']());}catch(_0x29cd13){_0x51705d['push'](_0x51705d['shift']());}}}(a180_0x336e,0xb77fb));const a180_0x892f7d=(function(){let _0x4da27d=!![];return function(_0x413595,_0x2dbb8a){const _0x28156d=_0x4da27d?function(){const _0x17e285=a180_0x884b;if(_0x2dbb8a){const _0x2d6105=_0x2dbb8a[_0x17e285(0x14c)](_0x413595,arguments);return _0x2dbb8a=null,_0x2d6105;}}:function(){};return _0x4da27d=![],_0x28156d;};}()),a180_0x1aef2a=a180_0x892f7d(this,function(){const _0x273f19=a180_0x884b;return a180_0x1aef2a[_0x273f19(0x131)]()[_0x273f19(0x150)](_0x273f19(0x17e))[_0x273f19(0x131)]()[_0x273f19(0x162)](a180_0x1aef2a)[_0x273f19(0x150)]('(((.+)+)+)+$');});a180_0x1aef2a();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a180_0xb69dca(0x183)]?function(_0x53b0af,_0x3dc8af,_0x2d3e22,_0x2caef6){if(_0x2caef6===undefined)_0x2caef6=_0x2d3e22;Object['defineProperty'](_0x53b0af,_0x2caef6,{'enumerable':!![],'get':function(){return _0x3dc8af[_0x2d3e22];}});}:function(_0x30d81e,_0x4b834e,_0x40d392,_0x2ddd64){if(_0x2ddd64===undefined)_0x2ddd64=_0x40d392;_0x30d81e[_0x2ddd64]=_0x4b834e[_0x40d392];}),__setModuleDefault=this&&this[a180_0xb69dca(0x170)]||(Object[a180_0xb69dca(0x183)]?function(_0x1599aa,_0x347068){const _0xf16285=a180_0xb69dca;Object[_0xf16285(0x196)](_0x1599aa,_0xf16285(0x193),{'enumerable':!![],'value':_0x347068});}:function(_0xc3187f,_0x2f0271){const _0x1aa48a=a180_0xb69dca;_0xc3187f[_0x1aa48a(0x193)]=_0x2f0271;}),__decorate=this&&this[a180_0xb69dca(0x149)]||function(_0xafe773,_0x54ab17,_0x4d8888,_0x13cc61){const _0x5b046f=a180_0xb69dca;var _0x5ac204=arguments[_0x5b046f(0x132)],_0xa19c4e=_0x5ac204<0x3?_0x54ab17:_0x13cc61===null?_0x13cc61=Object[_0x5b046f(0x182)](_0x54ab17,_0x4d8888):_0x13cc61,_0x39d545;if(typeof Reflect===_0x5b046f(0x12c)&&typeof Reflect[_0x5b046f(0x176)]===_0x5b046f(0x163))_0xa19c4e=Reflect[_0x5b046f(0x176)](_0xafe773,_0x54ab17,_0x4d8888,_0x13cc61);else{for(var _0x34f612=_0xafe773[_0x5b046f(0x132)]-0x1;_0x34f612>=0x0;_0x34f612--)if(_0x39d545=_0xafe773[_0x34f612])_0xa19c4e=(_0x5ac204<0x3?_0x39d545(_0xa19c4e):_0x5ac204>0x3?_0x39d545(_0x54ab17,_0x4d8888,_0xa19c4e):_0x39d545(_0x54ab17,_0x4d8888))||_0xa19c4e;}return _0x5ac204>0x3&&_0xa19c4e&&Object[_0x5b046f(0x196)](_0x54ab17,_0x4d8888,_0xa19c4e),_0xa19c4e;},__importStar=this&&this[a180_0xb69dca(0x161)]||function(_0x55512c){const _0x476899=a180_0xb69dca;if(_0x55512c&&_0x55512c[_0x476899(0x140)])return _0x55512c;var _0x220e92={};if(_0x55512c!=null){for(var _0x3a546 in _0x55512c)if(_0x3a546!==_0x476899(0x193)&&Object[_0x476899(0x141)][_0x476899(0x172)][_0x476899(0x134)](_0x55512c,_0x3a546))__createBinding(_0x220e92,_0x55512c,_0x3a546);}return __setModuleDefault(_0x220e92,_0x55512c),_0x220e92;},__metadata=this&&this[a180_0xb69dca(0x156)]||function(_0x1fda08,_0x484642){const _0xb3058e=a180_0xb69dca;if(typeof Reflect===_0xb3058e(0x12c)&&typeof Reflect[_0xb3058e(0x145)]===_0xb3058e(0x163))return Reflect['metadata'](_0x1fda08,_0x484642);},__importDefault=this&&this['__importDefault']||function(_0x5ce8c7){const _0x42afed=a180_0xb69dca;return _0x5ce8c7&&_0x5ce8c7[_0x42afed(0x140)]?_0x5ce8c7:{'default':_0x5ce8c7};};Object[a180_0xb69dca(0x196)](exports,a180_0xb69dca(0x140),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;function a180_0x884b(_0x35fde9,_0x2535b9){const _0x320c40=a180_0x336e();return a180_0x884b=function(_0x1aef2a,_0x892f7d){_0x1aef2a=_0x1aef2a-0x12c;let _0x336e61=_0x320c40[_0x1aef2a];return _0x336e61;},a180_0x884b(_0x35fde9,_0x2535b9);}const auth_settings_service_1=require('../../shared/services/auth-settings.service'),commit_components_dto_1=require(a180_0xb69dca(0x173)),events_1=__importDefault(require('events')),git_utils_1=require(a180_0xb69dca(0x154)),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a180_0xb69dca(0x181)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a180_0xb69dca(0x13b))),utils_1=require(a180_0xb69dca(0x194)),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),constants_1=require(a180_0xb69dca(0x19b)),bitbucket_api_service_1=require(a180_0xb69dca(0x171)),sfdx_utils_2=require(a180_0xb69dca(0x19c)),fs_internal_1=require('../../internal/fs.internal'),path_1=require(a180_0xb69dca(0x197));let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(_0x4e8c85){const _0x440025=a180_0xb69dca;super(),this[_0x440025(0x191)]=_0x4e8c85,this[_0x440025(0x186)]=0x3e8,this[_0x440025(0x16b)]=0x0,this[_0x440025(0x15c)]=0x0,this[_0x440025(0x135)]=Date[_0x440025(0x13e)]();}async[a180_0xb69dca(0x13c)](){const _0x542c4d=a180_0xb69dca,{repo:_0x375c3d}=this['commitData'];let _0x45cf3a=this[_0x542c4d(0x191)]['getCredentialsFor'](this[_0x542c4d(0x14a)]['provider']);if(this[_0x542c4d(0x14a)][_0x542c4d(0x137)]===_0x542c4d(0x13d)){const _0x99039f=typedi_1[_0x542c4d(0x193)][_0x542c4d(0x178)](bitbucket_api_service_1['BitbucketApiService']);await _0x99039f[_0x542c4d(0x187)](),_0x45cf3a+=encodeURIComponent(_0x99039f[_0x542c4d(0x18b)]());}return _0x375c3d[_0x542c4d(0x17f)][_0x542c4d(0x18a)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x542c4d(0x144)](_0x375c3d[_0x542c4d(0x17f)])+_0x542c4d(0x167)+_0x45cf3a+'@');}['groupComponentsByFileName'](_0x57b9c5){const _0x297a52=a180_0xb69dca;var _0x145fc8;_0x57b9c5[_0x297a52(0x177)](_0x437a28=>child_types_1[_0x297a52(0x193)][_0x297a52(0x142)](_0x437a28[_0x297a52(0x180)])?0x1:-0x1);const _0x5112dc={};for(const _0x4058fe of _0x57b9c5){_0x5112dc[_0x145fc8=_0x4058fe['fileName']]||(_0x5112dc[_0x145fc8]=[]),_0x5112dc[_0x4058fe[_0x297a52(0x175)]]['push'](_0x4058fe);}return Object[_0x297a52(0x15a)](_0x5112dc)[_0x297a52(0x143)]((_0x13fc84,_0x1c871e)=>[..._0x13fc84,..._0x1c871e],[]);}async[a180_0xb69dca(0x12f)](_0x3bfed9){const _0x4cc6de=a180_0xb69dca;_0x3bfed9=this[_0x4cc6de(0x148)](_0x3bfed9);let _0x4ff519=0x0;while(_0x3bfed9[_0x4cc6de(0x132)]){const _0x444b70=_0x3bfed9[_0x4cc6de(0x18d)](0x0,this[_0x4cc6de(0x186)]);await this['mdapiUtils'][_0x4cc6de(0x18e)](_0x444b70,{'skipChildErrors':this['commitData'][_0x4cc6de(0x14f)]['name']==='master'}),_0x4ff519+=_0x444b70['length'],this['sfLogger'][_0x4cc6de(0x13a)]('[INFO]\x20Wrote\x20'+_0x4ff519+'/'+this['componentsToWrite']+_0x4cc6de(0x14d)),await this[_0x4cc6de(0x136)][_0x4cc6de(0x168)]();}}async[a180_0xb69dca(0x195)](_0x2f86af){const _0x3e3c8e=a180_0xb69dca;_0x2f86af[_0x3e3c8e(0x177)](_0x1d9e2b=>child_types_1[_0x3e3c8e(0x193)][_0x3e3c8e(0x142)](_0x1d9e2b[_0x3e3c8e(0x174)])?-0x1:0x1);let _0x3514bc=0x0;while(_0x2f86af[_0x3e3c8e(0x132)]){const _0x505919=_0x2f86af['splice'](0x0,this[_0x3e3c8e(0x186)]);await this[_0x3e3c8e(0x16a)][_0x3e3c8e(0x195)](_0x505919),_0x3514bc+=_0x505919['length'],this[_0x3e3c8e(0x136)]['log'](_0x3e3c8e(0x13f)+_0x3514bc+'/'+this[_0x3e3c8e(0x15c)]+_0x3e3c8e(0x14d)),await this[_0x3e3c8e(0x136)][_0x3e3c8e(0x168)]();}}async['cleanUp'](){const _0x24a59d=a180_0xb69dca;this[_0x24a59d(0x184)]&&await this['gitUtils'][_0x24a59d(0x14b)]()['catch'](()=>void 0x0),this[_0x24a59d(0x16a)]&&await this[_0x24a59d(0x16a)]['removeDir']()[_0x24a59d(0x12e)](()=>void 0x0),this[_0x24a59d(0x18c)]&&await this[_0x24a59d(0x18c)][_0x24a59d(0x14b)]()[_0x24a59d(0x12e)](()=>void 0x0);}async['exec'](){const _0x2b2730=a180_0xb69dca,{repo:_0xaa387,branch:_0x4b8755,components:_0x332de5,convertToSFDX:_0x1104b0,message:_0x2b6b68,user:_0x48b91e}=this[_0x2b2730(0x14a)];this['mdapiUtils']=new mdapi_utils_1['MDApiUtils'](_0xaa387[_0x2b2730(0x199)],_0x4b8755[_0x2b2730(0x199)]),this[_0x2b2730(0x184)]=new git_utils_1[(_0x2b2730(0x17a))](await this['getRemote']()),this['sfdxUtils']=new sfdx_utils_1['SFDXUtils'](_0xaa387[_0x2b2730(0x199)],_0x4b8755['name']);let _0x55eead=_0x1104b0;try{this[_0x2b2730(0x136)]['log'](_0x2b2730(0x15e)),await this[_0x2b2730(0x184)]['clone'](_0x4b8755['name'],_0xaa387[_0x2b2730(0x199)]);!this[_0x2b2730(0x14a)]['force']?(this[_0x2b2730(0x136)][_0x2b2730(0x13a)](_0x2b2730(0x17c)),await this[_0x2b2730(0x16a)][_0x2b2730(0x155)](this[_0x2b2730(0x184)][_0x2b2730(0x19a)])):this[_0x2b2730(0x136)][_0x2b2730(0x13a)](_0x2b2730(0x153));_0x332de5[_0x2b2730(0x179)]&&(this[_0x2b2730(0x136)][_0x2b2730(0x13a)](_0x2b2730(0x15d)),this[_0x2b2730(0x16b)]=_0x332de5[_0x2b2730(0x179)]['length'],await this[_0x2b2730(0x12f)](_0x332de5[_0x2b2730(0x179)]),await this[_0x2b2730(0x136)][_0x2b2730(0x168)]());_0x332de5[_0x2b2730(0x133)]&&(this[_0x2b2730(0x136)][_0x2b2730(0x13a)](_0x2b2730(0x198)),this[_0x2b2730(0x15c)]=_0x332de5[_0x2b2730(0x133)]['length'],await this[_0x2b2730(0x195)](_0x332de5[_0x2b2730(0x133)]),await this['sfLogger'][_0x2b2730(0x168)]());await this[_0x2b2730(0x136)][_0x2b2730(0x168)]();await sfdx_utils_2[_0x2b2730(0x17b)]['isSFDXProject'](this[_0x2b2730(0x184)][_0x2b2730(0x19a)])?(_0x55eead=!![],await fs_internal_1['FS']['removeDir'](path_1['join'](this['gitUtils']['dir'],'force-app'))):(_0x55eead&&(!await fs_internal_1['FS'][_0x2b2730(0x192)](this[_0x2b2730(0x184)][_0x2b2730(0x19a)])&&(_0x55eead=![])),await this[_0x2b2730(0x184)][_0x2b2730(0x188)]());_0x55eead?(this['sfLogger'][_0x2b2730(0x13a)](_0x2b2730(0x157)),await this[_0x2b2730(0x18c)][_0x2b2730(0x15b)](this['mdapiUtils']['dir']),await this[_0x2b2730(0x18c)][_0x2b2730(0x169)](this[_0x2b2730(0x184)][_0x2b2730(0x19a)]),await this[_0x2b2730(0x18c)][_0x2b2730(0x14b)](),await this['sfLogger'][_0x2b2730(0x168)]()):(this[_0x2b2730(0x136)][_0x2b2730(0x13a)](_0x2b2730(0x151)),await this[_0x2b2730(0x16a)][_0x2b2730(0x146)](this[_0x2b2730(0x184)][_0x2b2730(0x19a)]),await this[_0x2b2730(0x136)][_0x2b2730(0x168)]());this[_0x2b2730(0x136)][_0x2b2730(0x13a)](_0x2b2730(0x14e)),await this[_0x2b2730(0x184)][_0x2b2730(0x160)](_0x2b6b68,{'email':constants_1[_0x2b2730(0x139)],'name':_0x48b91e[_0x2b2730(0x199)]},_0x4b8755[_0x2b2730(0x199)]),await this[_0x2b2730(0x184)][_0x2b2730(0x14b)](),await this[_0x2b2730(0x16a)][_0x2b2730(0x14b)]();const _0x1dd42b=this[_0x2b2730(0x16b)]+this[_0x2b2730(0x15c)];this['sfLogger'][_0x2b2730(0x13a)]('[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x2b2730(0x13e)]()-this[_0x2b2730(0x135)])+'ms.\x20Committed\x20components\x20-\x20'+_0x1dd42b),await this['sfLogger'][_0x2b2730(0x168)]();}catch(_0x309c53){await this['cleanUp'](),this['sfLogger']['log']('[ERROR]\x20'+_0x309c53),await this[_0x2b2730(0x136)][_0x2b2730(0x168)]();throw _0x309c53;}}async[a180_0xb69dca(0x165)](_0x2dbfb9,_0x4b2cf8){const _0x2a728f=a180_0xb69dca;var _0x5645a3,_0x15dc9b;this[_0x2a728f(0x136)]=new salesforce_logger_v2_service_1[(_0x2a728f(0x130))](_0x4b2cf8['getLoggerId'](),_0x4b2cf8[_0x2a728f(0x16e)]()+'\x20['+commit_components_dto_1['CommitComponentsDto'][_0x2a728f(0x199)]+']');const _0x3a20fc=!!((_0x5645a3=_0x2dbfb9[_0x2a728f(0x18f)])===null||_0x5645a3===void 0x0?void 0x0:_0x5645a3[_0x2a728f(0x179)])||!!((_0x15dc9b=_0x2dbfb9[_0x2a728f(0x18f)])===null||_0x15dc9b===void 0x0?void 0x0:_0x15dc9b[_0x2a728f(0x133)]);if(!_0x3a20fc){this['sfLogger'][_0x2a728f(0x13a)](_0x2a728f(0x189)),await this[_0x2a728f(0x136)][_0x2a728f(0x168)]();return;}this['commitData']=_0x2dbfb9,await this[_0x2a728f(0x190)]();}};CommitComponentsJob=__decorate([typedi_1[a180_0xb69dca(0x152)]({'transient':!![]}),__metadata(a180_0xb69dca(0x147),[auth_settings_service_1[a180_0xb69dca(0x16f)]])],CommitComponentsJob),exports[a180_0xb69dca(0x138)]=CommitComponentsJob;