function a181_0x52d0(_0x283df3,_0x31985f){const _0x28aeff=a181_0x22cc();return a181_0x52d0=function(_0x4081f8,_0x3b857e){_0x4081f8=_0x4081f8-0x161;let _0x22ccb5=_0x28aeff[_0x4081f8];return _0x22ccb5;},a181_0x52d0(_0x283df3,_0x31985f);}const a181_0x29cc5d=a181_0x52d0;(function(_0x29c66e,_0xffa2f0){const _0x150787=a181_0x52d0,_0x276544=_0x29c66e();while(!![]){try{const _0x59f794=-parseInt(_0x150787(0x1b4))/0x1*(-parseInt(_0x150787(0x1c5))/0x2)+-parseInt(_0x150787(0x172))/0x3+parseInt(_0x150787(0x187))/0x4*(parseInt(_0x150787(0x171))/0x5)+parseInt(_0x150787(0x1b1))/0x6+-parseInt(_0x150787(0x19f))/0x7+parseInt(_0x150787(0x17d))/0x8*(-parseInt(_0x150787(0x190))/0x9)+-parseInt(_0x150787(0x19b))/0xa;if(_0x59f794===_0xffa2f0)break;else _0x276544['push'](_0x276544['shift']());}catch(_0x43035c){_0x276544['push'](_0x276544['shift']());}}}(a181_0x22cc,0xe6830));const a181_0x3b857e=(function(){let _0x4e3b86=!![];return function(_0x186d74,_0x5eefa2){const _0x1d9161=_0x4e3b86?function(){const _0x38e02a=a181_0x52d0;if(_0x5eefa2){const _0x2e014a=_0x5eefa2[_0x38e02a(0x1b2)](_0x186d74,arguments);return _0x5eefa2=null,_0x2e014a;}}:function(){};return _0x4e3b86=![],_0x1d9161;};}()),a181_0x4081f8=a181_0x3b857e(this,function(){const _0x532b44=a181_0x52d0;return a181_0x4081f8[_0x532b44(0x1b6)]()[_0x532b44(0x1a7)](_0x532b44(0x1a5))['toString']()['constructor'](a181_0x4081f8)['search']('(((.+)+)+)+$');});a181_0x4081f8();'use strict';var __createBinding=this&&this[a181_0x29cc5d(0x194)]||(Object[a181_0x29cc5d(0x170)]?function(_0x3e0b72,_0x3e29e6,_0x58994c,_0x4c6ff0){if(_0x4c6ff0===undefined)_0x4c6ff0=_0x58994c;Object['defineProperty'](_0x3e0b72,_0x4c6ff0,{'enumerable':!![],'get':function(){return _0x3e29e6[_0x58994c];}});}:function(_0xa7cf31,_0x247531,_0x121fe1,_0x4d2096){if(_0x4d2096===undefined)_0x4d2096=_0x121fe1;_0xa7cf31[_0x4d2096]=_0x247531[_0x121fe1];}),__setModuleDefault=this&&this[a181_0x29cc5d(0x175)]||(Object[a181_0x29cc5d(0x170)]?function(_0x2e59aa,_0x16be93){Object['defineProperty'](_0x2e59aa,'default',{'enumerable':!![],'value':_0x16be93});}:function(_0x44b586,_0x4e54a8){_0x44b586['default']=_0x4e54a8;}),__decorate=this&&this['__decorate']||function(_0x139a99,_0x54257f,_0x19c660,_0x516e28){const _0x5923ee=a181_0x29cc5d;var _0x510908=arguments[_0x5923ee(0x164)],_0x5ebd83=_0x510908<0x3?_0x54257f:_0x516e28===null?_0x516e28=Object[_0x5923ee(0x1bc)](_0x54257f,_0x19c660):_0x516e28,_0x257999;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x5923ee(0x1be))_0x5ebd83=Reflect['decorate'](_0x139a99,_0x54257f,_0x19c660,_0x516e28);else{for(var _0x3dbb7b=_0x139a99[_0x5923ee(0x164)]-0x1;_0x3dbb7b>=0x0;_0x3dbb7b--)if(_0x257999=_0x139a99[_0x3dbb7b])_0x5ebd83=(_0x510908<0x3?_0x257999(_0x5ebd83):_0x510908>0x3?_0x257999(_0x54257f,_0x19c660,_0x5ebd83):_0x257999(_0x54257f,_0x19c660))||_0x5ebd83;}return _0x510908>0x3&&_0x5ebd83&&Object['defineProperty'](_0x54257f,_0x19c660,_0x5ebd83),_0x5ebd83;},__importStar=this&&this[a181_0x29cc5d(0x19a)]||function(_0x1c208c){const _0x2a8ea2=a181_0x29cc5d;if(_0x1c208c&&_0x1c208c['__esModule'])return _0x1c208c;var _0x45560c={};if(_0x1c208c!=null){for(var _0x56dfae in _0x1c208c)if(_0x56dfae!=='default'&&Object['prototype'][_0x2a8ea2(0x197)][_0x2a8ea2(0x1ca)](_0x1c208c,_0x56dfae))__createBinding(_0x45560c,_0x1c208c,_0x56dfae);}return __setModuleDefault(_0x45560c,_0x1c208c),_0x45560c;},__metadata=this&&this[a181_0x29cc5d(0x195)]||function(_0xcb47ec,_0x3d4c3e){const _0x36dd9e=a181_0x29cc5d;if(typeof Reflect===_0x36dd9e(0x1ba)&&typeof Reflect[_0x36dd9e(0x1b3)]==='function')return Reflect[_0x36dd9e(0x1b3)](_0xcb47ec,_0x3d4c3e);},__importDefault=this&&this[a181_0x29cc5d(0x173)]||function(_0x591bb8){const _0x5e1c5a=a181_0x29cc5d;return _0x591bb8&&_0x591bb8[_0x5e1c5a(0x188)]?_0x591bb8:{'default':_0x591bb8};};Object['defineProperty'](exports,a181_0x29cc5d(0x188),{'value':!![]}),exports[a181_0x29cc5d(0x1c8)]=void 0x0;function a181_0x22cc(){const _0xe3e91=['../utils/sfdx.utils','CommitComponentsJob','GitUtils','call','copyProjectTo','force','removeComponents','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','typedi','[INFO]\x20Prepare\x20mdapi\x20files','fileName','sfLogger','SFDXUtils','events','catch','[ERROR]\x20','length','writeComponents','componentsToDelete','isEmptyDir','groupComponentsByFileName','components','[INFO]\x20Deleted\x20','log','getRemote','[INFO]\x20Start\x20clonning\x20repository','../../git-api/services/bitbucket-api.service','authSettings','create','10UIPmah','1455546aGuZOT','__importDefault','send','__setModuleDefault','reduce','COMPONENTS_PER_TICK','../utils/git.utils','branch','\x20components','includes','sfdxUtils','8wqYdXf','get','isLoggedIn','join','[INFO]\x20Preparing\x20to\x20delete\x20components','getProtocol','../../../constants','[INFO]\x20Preparing\x20to\x20write\x20components','cleanUp','path','523244Acehdf','__esModule','dir','writeFlosumComponents','../../shared/services/auth-settings.service','provider','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','commitAndPush','getLoggerId','1286694kDQVKP','fileType','CommitComponentsDto','default','__createBinding','__metadata','gitUtils','hasOwnProperty','name','gitUrl','__importStar','1323420XOHPef','../../internal/fs.internal','componentsToWrite','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','3625629fmRFkM','clone','deleted','BitbucketApiService','SFDX','clearDir','(((.+)+)+)+$','master','search','run','commitData','type','SalesforceLogger2','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','startTime','ms.\x20Committed\x20components\x20-\x20','../../salesforce/utils/sfdx.utils','getPrefix','5895792CpLEjb','apply','metadata','978359DuHIUx','force-app','toString','writed','mdapiUtils','../../shared/utils','object','sort','getOwnPropertyDescriptor','removeDir','function','isSFDXProject','replace','splice','push','../utils/mdapi.utils','[INFO]\x20Committing\x20and\x20pushing\x20source\x20to\x20git','2RqVuCs','getAccessToken'];a181_0x22cc=function(){return _0xe3e91;};return a181_0x22cc();}const auth_settings_service_1=require(a181_0x29cc5d(0x18b)),commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a181_0x29cc5d(0x161))),git_utils_1=require(a181_0x29cc5d(0x178)),mdapi_utils_1=require(a181_0x29cc5d(0x1c3)),sfdx_utils_1=require(a181_0x29cc5d(0x1c7)),typedi_1=__importStar(require(a181_0x29cc5d(0x1cf))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require(a181_0x29cc5d(0x1b9)),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),constants_1=require(a181_0x29cc5d(0x183)),bitbucket_api_service_1=require(a181_0x29cc5d(0x16e)),sfdx_utils_2=require(a181_0x29cc5d(0x1af)),fs_internal_1=require(a181_0x29cc5d(0x19c)),path_1=require(a181_0x29cc5d(0x186));let CommitComponentsJob=class CommitComponentsJob extends events_1[a181_0x29cc5d(0x193)]{constructor(_0x248543){const _0x3fb5fc=a181_0x29cc5d;super(),this[_0x3fb5fc(0x16f)]=_0x248543,this[_0x3fb5fc(0x177)]=0x3e8,this[_0x3fb5fc(0x19d)]=0x0,this[_0x3fb5fc(0x166)]=0x0,this[_0x3fb5fc(0x1ad)]=Date['now']();}async[a181_0x29cc5d(0x16c)](){const _0x916b18=a181_0x29cc5d,{repo:_0x306596}=this['commitData'];let _0x383ede=this['authSettings']['getCredentialsFor'](this['commitData'][_0x916b18(0x18c)]);if(this[_0x916b18(0x1a9)][_0x916b18(0x18c)]==='bitbucket'){const _0x78803e=typedi_1[_0x916b18(0x193)][_0x916b18(0x17e)](bitbucket_api_service_1[_0x916b18(0x1a2)]);await _0x78803e[_0x916b18(0x17f)](),_0x383ede+=encodeURIComponent(_0x78803e[_0x916b18(0x1c6)]());}return _0x306596[_0x916b18(0x199)][_0x916b18(0x1c0)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x916b18(0x182)](_0x306596[_0x916b18(0x199)])+'://'+_0x383ede+'@');}['groupComponentsByFileName'](_0x34afde){const _0x4aedb3=a181_0x29cc5d;var _0x5ddf40;_0x34afde[_0x4aedb3(0x1bb)](_0x395584=>child_types_1[_0x4aedb3(0x193)][_0x4aedb3(0x17b)](_0x395584[_0x4aedb3(0x191)])?0x1:-0x1);const _0x2d3e1b={};for(const _0x41ce14 of _0x34afde){_0x2d3e1b[_0x5ddf40=_0x41ce14[_0x4aedb3(0x1d1)]]||(_0x2d3e1b[_0x5ddf40]=[]),_0x2d3e1b[_0x41ce14[_0x4aedb3(0x1d1)]][_0x4aedb3(0x1c2)](_0x41ce14);}return Object['values'](_0x2d3e1b)[_0x4aedb3(0x176)]((_0x4eb4f5,_0x48c80b)=>[..._0x4eb4f5,..._0x48c80b],[]);}async['writeComponents'](_0x4f69ad){const _0x152cb2=a181_0x29cc5d;_0x4f69ad=this[_0x152cb2(0x168)](_0x4f69ad);let _0x4705c4=0x0;while(_0x4f69ad['length']){const _0x25f282=_0x4f69ad[_0x152cb2(0x1c1)](0x0,this[_0x152cb2(0x177)]);await this[_0x152cb2(0x1b8)][_0x152cb2(0x18a)](_0x25f282,{'skipChildErrors':this['commitData'][_0x152cb2(0x179)]['name']===_0x152cb2(0x1a6)}),_0x4705c4+=_0x25f282['length'],this[_0x152cb2(0x1d2)]['log']('[INFO]\x20Wrote\x20'+_0x4705c4+'/'+this[_0x152cb2(0x19d)]+_0x152cb2(0x17a)),await this['sfLogger'][_0x152cb2(0x174)]();}}async['removeComponents'](_0x34ee59){const _0x4d5fd4=a181_0x29cc5d;_0x34ee59[_0x4d5fd4(0x1bb)](_0x1168b8=>child_types_1[_0x4d5fd4(0x193)][_0x4d5fd4(0x17b)](_0x1168b8[_0x4d5fd4(0x1aa)])?-0x1:0x1);let _0x3061d8=0x0;while(_0x34ee59[_0x4d5fd4(0x164)]){const _0xbe14c5=_0x34ee59[_0x4d5fd4(0x1c1)](0x0,this[_0x4d5fd4(0x177)]);await this[_0x4d5fd4(0x1b8)][_0x4d5fd4(0x1cd)](_0xbe14c5),_0x3061d8+=_0xbe14c5[_0x4d5fd4(0x164)],this[_0x4d5fd4(0x1d2)][_0x4d5fd4(0x16b)](_0x4d5fd4(0x16a)+_0x3061d8+'/'+this[_0x4d5fd4(0x166)]+_0x4d5fd4(0x17a)),await this[_0x4d5fd4(0x1d2)]['send']();}}async[a181_0x29cc5d(0x185)](){const _0x53d959=a181_0x29cc5d;this[_0x53d959(0x196)]&&await this['gitUtils'][_0x53d959(0x1bd)]()['catch'](()=>void 0x0),this['mdapiUtils']&&await this[_0x53d959(0x1b8)][_0x53d959(0x1bd)]()[_0x53d959(0x162)](()=>void 0x0),this[_0x53d959(0x17c)]&&await this[_0x53d959(0x17c)]['removeDir']()[_0x53d959(0x162)](()=>void 0x0);}async['exec'](){const _0x45804c=a181_0x29cc5d,{repo:_0x1cba99,branch:_0x4f59a9,components:_0x3f3af5,convertToSFDX:_0x442cd2,message:_0x230b42,user:_0x4ce4c1}=this['commitData'];this[_0x45804c(0x1b8)]=new mdapi_utils_1['MDApiUtils'](_0x1cba99[_0x45804c(0x198)],_0x4f59a9['name']),this[_0x45804c(0x196)]=new git_utils_1[(_0x45804c(0x1c9))](await this[_0x45804c(0x16c)]()),this[_0x45804c(0x17c)]=new sfdx_utils_1[(_0x45804c(0x1d3))](_0x1cba99[_0x45804c(0x198)],_0x4f59a9[_0x45804c(0x198)]);let _0xf9de3f=_0x442cd2;try{this[_0x45804c(0x1d2)][_0x45804c(0x16b)](_0x45804c(0x16d)),await this[_0x45804c(0x196)][_0x45804c(0x1a0)](_0x4f59a9['name'],_0x1cba99[_0x45804c(0x198)]);!this['commitData'][_0x45804c(0x1cc)]?(this[_0x45804c(0x1d2)]['log'](_0x45804c(0x1d0)),await this[_0x45804c(0x1b8)]['prepareMdapi'](this[_0x45804c(0x196)][_0x45804c(0x189)])):this['sfLogger'][_0x45804c(0x16b)](_0x45804c(0x1ce));_0x3f3af5[_0x45804c(0x1b7)]&&(this['sfLogger'][_0x45804c(0x16b)](_0x45804c(0x184)),this[_0x45804c(0x19d)]=_0x3f3af5[_0x45804c(0x1b7)]['length'],await this[_0x45804c(0x165)](_0x3f3af5[_0x45804c(0x1b7)]),await this['sfLogger'][_0x45804c(0x174)]());_0x3f3af5[_0x45804c(0x1a1)]&&(this['sfLogger'][_0x45804c(0x16b)](_0x45804c(0x181)),this[_0x45804c(0x166)]=_0x3f3af5[_0x45804c(0x1a1)][_0x45804c(0x164)],await this[_0x45804c(0x1cd)](_0x3f3af5['deleted']),await this[_0x45804c(0x1d2)][_0x45804c(0x174)]());await this[_0x45804c(0x1d2)][_0x45804c(0x174)]();await sfdx_utils_2[_0x45804c(0x1a3)][_0x45804c(0x1bf)](this[_0x45804c(0x196)][_0x45804c(0x189)])?(_0xf9de3f=!![],await fs_internal_1['FS'][_0x45804c(0x1bd)](path_1[_0x45804c(0x180)](this[_0x45804c(0x196)][_0x45804c(0x189)],_0x45804c(0x1b5)))):(_0xf9de3f&&(!await fs_internal_1['FS'][_0x45804c(0x167)](this[_0x45804c(0x196)][_0x45804c(0x189)])&&(_0xf9de3f=![])),await this['gitUtils'][_0x45804c(0x1a4)]());_0xf9de3f?(this[_0x45804c(0x1d2)]['log']('[INFO]\x20Start\x20converting\x20to\x20SFDX'),await this['sfdxUtils']['createProjectFrom'](this['mdapiUtils'][_0x45804c(0x189)]),await this[_0x45804c(0x17c)][_0x45804c(0x1cb)](this[_0x45804c(0x196)][_0x45804c(0x189)]),await this[_0x45804c(0x17c)]['removeDir'](),await this[_0x45804c(0x1d2)][_0x45804c(0x174)]()):(this['sfLogger'][_0x45804c(0x16b)](_0x45804c(0x19e)),await this[_0x45804c(0x1b8)]['copyMdapiTo'](this['gitUtils'][_0x45804c(0x189)]),await this[_0x45804c(0x1d2)][_0x45804c(0x174)]());this[_0x45804c(0x1d2)][_0x45804c(0x16b)](_0x45804c(0x1c4)),await this[_0x45804c(0x196)][_0x45804c(0x18e)](_0x230b42,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x4ce4c1['name']},_0x4f59a9[_0x45804c(0x198)]),await this['gitUtils'][_0x45804c(0x1bd)](),await this['mdapiUtils'][_0x45804c(0x1bd)]();const _0x8fca9=this[_0x45804c(0x19d)]+this[_0x45804c(0x166)];this[_0x45804c(0x1d2)][_0x45804c(0x16b)](_0x45804c(0x1ac)+(Date['now']()-this[_0x45804c(0x1ad)])+_0x45804c(0x1ae)+_0x8fca9),await this[_0x45804c(0x1d2)][_0x45804c(0x174)]();}catch(_0x4c924f){await this[_0x45804c(0x185)](),this[_0x45804c(0x1d2)][_0x45804c(0x16b)](_0x45804c(0x163)+_0x4c924f),await this[_0x45804c(0x1d2)][_0x45804c(0x174)]();throw _0x4c924f;}}async[a181_0x29cc5d(0x1a8)](_0x9c180b,_0x188e56){const _0x2e1416=a181_0x29cc5d;var _0x45ca9a,_0x1b8420;this['sfLogger']=new salesforce_logger_v2_service_1[(_0x2e1416(0x1ab))](_0x188e56[_0x2e1416(0x18f)](),_0x188e56[_0x2e1416(0x1b0)]()+'\x20['+commit_components_dto_1[_0x2e1416(0x192)][_0x2e1416(0x198)]+']');const _0x1a7a0b=!!((_0x45ca9a=_0x9c180b[_0x2e1416(0x169)])===null||_0x45ca9a===void 0x0?void 0x0:_0x45ca9a['writed'])||!!((_0x1b8420=_0x9c180b[_0x2e1416(0x169)])===null||_0x1b8420===void 0x0?void 0x0:_0x1b8420[_0x2e1416(0x1a1)]);if(!_0x1a7a0b){this['sfLogger'][_0x2e1416(0x16b)](_0x2e1416(0x18d)),await this[_0x2e1416(0x1d2)][_0x2e1416(0x174)]();return;}this[_0x2e1416(0x1a9)]=_0x9c180b,await this['exec']();}};CommitComponentsJob=__decorate([typedi_1['Service']({'transient':!![]}),__metadata('design:paramtypes',[auth_settings_service_1['AuthSettingsService']])],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;