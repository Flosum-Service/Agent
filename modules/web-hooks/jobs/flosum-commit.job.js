function a182_0xe190(){const _0x54f85c=['SalesforceSyncService','repositoryData','getLoggerId','51982LZdPzx','apply','trim','gitUrl','deleteAttachment','branches','branchName','Service','FlosumCommitJob','commitJob','metadata','88mwrLIT','exec','getOne','branch','error','name','convertToSFDX','[INFO]\x20Start\x20commit\x20job','sfLogger','commitAttachmentId','provider','Error',']\x20[Branch:\x20','3097944RsptIP','toUpperCase','fetchRepositoryData','commitData','updateRemoteState','all','CommitComponentsDto','sha','then','repoService','gitManager','getPrefix','getRepositoryRecord','SalesforceRetrieverService','salesforceSync','design:paramtypes','ERR_UNKNOWN_SYNC_RECORD_ID','repositoryName','1842981jpLfQB','default','GitProviderManager','retrieveAttachment','__esModule','deleteAttachmentId','patchObject','salesforceService','toString','components','CommitComponentsJob','(((.+)+)+)+$','../../salesforce/services/salesforce-sync.service','__decorate','repository','getComponentsToWrite','constructor','../../../core','message','__importDefault','Completed','SalesforceLogger2','send','[FLOSUM\x20->\x20GIT]\x20[','[INFO]\x20Update\x20remote\x20state.','defineProperty','setStatus','run','syncRepositoryId','split','handleCommitJobError','In\x20Progress','185746DCuYLa','catch','logger','[ERROR]\x20','92330enKABC','updateLastCommit','function','2866480yTIorr','ERR_INVALID_SYNC_RECORD_ID','object','log','./commit-components.job','SalesforceService','../../../core/errors/bad-request.error','shortid','884204CoETvL','getBranchRecord','search','length','user','getComponentsToDelete'];a182_0xe190=function(){return _0x54f85c;};return a182_0xe190();}const a182_0x293dcb=a182_0x489c;function a182_0x489c(_0x1d21d3,_0x2768a8){const _0x45071c=a182_0xe190();return a182_0x489c=function(_0x167b88,_0xd22801){_0x167b88=_0x167b88-0xcd;let _0xe1904c=_0x45071c[_0x167b88];return _0xe1904c;},a182_0x489c(_0x1d21d3,_0x2768a8);}(function(_0x418d47,_0x2a8ad4){const _0x3f4720=a182_0x489c,_0x33ae9e=_0x418d47();while(!![]){try{const _0xeda2f6=parseInt(_0x3f4720(0xcd))/0x1+-parseInt(_0x3f4720(0x12b))/0x2+-parseInt(_0x3f4720(0x10b))/0x3+-parseInt(_0x3f4720(0xd8))/0x4+parseInt(_0x3f4720(0xd0))/0x5+parseInt(_0x3f4720(0xf9))/0x6+-parseInt(_0x3f4720(0xe1))/0x7*(-parseInt(_0x3f4720(0xec))/0x8);if(_0xeda2f6===_0x2a8ad4)break;else _0x33ae9e['push'](_0x33ae9e['shift']());}catch(_0x156918){_0x33ae9e['push'](_0x33ae9e['shift']());}}}(a182_0xe190,0x51e19));const a182_0xd22801=(function(){let _0x842368=!![];return function(_0x191262,_0x3e92b3){const _0x153fb3=_0x842368?function(){const _0x5b4120=a182_0x489c;if(_0x3e92b3){const _0x3bfae8=_0x3e92b3[_0x5b4120(0xe2)](_0x191262,arguments);return _0x3e92b3=null,_0x3bfae8;}}:function(){};return _0x842368=![],_0x153fb3;};}()),a182_0x167b88=a182_0xd22801(this,function(){const _0x38bd68=a182_0x489c;return a182_0x167b88[_0x38bd68(0x113)]()['search'](_0x38bd68(0x116))[_0x38bd68(0x113)]()[_0x38bd68(0x11b)](a182_0x167b88)[_0x38bd68(0xda)](_0x38bd68(0x116));});a182_0x167b88();'use strict';var __decorate=this&&this[a182_0x293dcb(0x118)]||function(_0x3da7c3,_0x3d32cf,_0x19c1ad,_0x3ff382){const _0x4f58fa=a182_0x293dcb;var _0x350f55=arguments[_0x4f58fa(0xdb)],_0x29b5e6=_0x350f55<0x3?_0x3d32cf:_0x3ff382===null?_0x3ff382=Object['getOwnPropertyDescriptor'](_0x3d32cf,_0x19c1ad):_0x3ff382,_0x52f33b;if(typeof Reflect===_0x4f58fa(0xd2)&&typeof Reflect['decorate']===_0x4f58fa(0xcf))_0x29b5e6=Reflect['decorate'](_0x3da7c3,_0x3d32cf,_0x19c1ad,_0x3ff382);else{for(var _0x3c5472=_0x3da7c3[_0x4f58fa(0xdb)]-0x1;_0x3c5472>=0x0;_0x3c5472--)if(_0x52f33b=_0x3da7c3[_0x3c5472])_0x29b5e6=(_0x350f55<0x3?_0x52f33b(_0x29b5e6):_0x350f55>0x3?_0x52f33b(_0x3d32cf,_0x19c1ad,_0x29b5e6):_0x52f33b(_0x3d32cf,_0x19c1ad))||_0x29b5e6;}return _0x350f55>0x3&&_0x29b5e6&&Object[_0x4f58fa(0x124)](_0x3d32cf,_0x19c1ad,_0x29b5e6),_0x29b5e6;},__metadata=this&&this['__metadata']||function(_0x4726d1,_0x4b390f){const _0x177979=a182_0x293dcb;if(typeof Reflect==='object'&&typeof Reflect[_0x177979(0xeb)]===_0x177979(0xcf))return Reflect[_0x177979(0xeb)](_0x4726d1,_0x4b390f);},__importDefault=this&&this[a182_0x293dcb(0x11e)]||function(_0x5ad999){return _0x5ad999&&_0x5ad999['__esModule']?_0x5ad999:{'default':_0x5ad999};},FlosumCommitJob_1;Object[a182_0x293dcb(0x124)](exports,a182_0x293dcb(0x10f),{'value':!![]}),exports['FlosumCommitJob']=void 0x0;const core_1=require(a182_0x293dcb(0x11c)),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_provider_manager_1=require('../../shared/git-provider.manager'),typedi_1=require('typedi'),errors_1=require('../../../constants/errors'),bad_request_error_1=require(a182_0x293dcb(0xd6)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a182_0x293dcb(0x117)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a182_0x293dcb(0xd4)),constants_1=require('../../../constants'),shortid_1=__importDefault(require(a182_0x293dcb(0xd7)));let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x43c156,_0x384619,_0x26b147,_0x1084bd){const _0x15b37e=a182_0x293dcb;this[_0x15b37e(0x112)]=_0x43c156,this[_0x15b37e(0xea)]=_0x384619,this[_0x15b37e(0x107)]=_0x26b147,this[_0x15b37e(0x103)]=_0x1084bd,this[_0x15b37e(0x102)]=this[_0x15b37e(0x103)]['getRepoService'](),this[_0x15b37e(0x12d)]=new core_1['Logger'](FlosumCommitJob_1[_0x15b37e(0xf1)]);}async[a182_0x293dcb(0xfb)](){const _0x1f1629=a182_0x293dcb;try{if(this[_0x1f1629(0xfc)]['syncRepositoryId'])this[_0x1f1629(0xdf)]=await this[_0x1f1629(0x107)][_0x1f1629(0x105)](this[_0x1f1629(0xfc)][_0x1f1629(0x127)]);else this['commitData']['syncBranchId']&&(this[_0x1f1629(0xdf)]=await this[_0x1f1629(0x107)][_0x1f1629(0xd9)](this[_0x1f1629(0xfc)]['syncBranchId']));}catch(_0x3cc886){throw new bad_request_error_1['BadRequestError'](errors_1[_0x1f1629(0xd1)]);}}async[a182_0x293dcb(0x11a)](){const _0x55f9bd=a182_0x293dcb;if(!this[_0x55f9bd(0xfc)][_0x55f9bd(0xf5)])return[];await this['salesforceService']['patchObject'](constants_1['FLOSUM_ATTACHMENT'],this[_0x55f9bd(0xfc)][_0x55f9bd(0xf5)],{'Name':shortid_1[_0x55f9bd(0x10c)]()});const _0xc27d8a=await this[_0x55f9bd(0x112)][_0x55f9bd(0x10e)](this[_0x55f9bd(0xfc)]['commitAttachmentId'])[_0x55f9bd(0x101)](_0x23d1a4=>_0x23d1a4[_0x55f9bd(0x128)]('\x20')['map'](_0x25bfa4=>_0x25bfa4[_0x55f9bd(0xe3)]()));await this[_0x55f9bd(0x112)][_0x55f9bd(0xe5)](this[_0x55f9bd(0xfc)][_0x55f9bd(0xf5)]);const _0x411308=new salesforce_retriever_service_1[(_0x55f9bd(0x106))](this['salesforceService']);return await _0x411308[_0x55f9bd(0x126)](_0xc27d8a);}async[a182_0x293dcb(0xdd)](){const _0x4507ce=a182_0x293dcb;if(!this[_0x4507ce(0xfc)][_0x4507ce(0x110)])return[];await this[_0x4507ce(0x112)][_0x4507ce(0x111)](constants_1['FLOSUM_ATTACHMENT'],this[_0x4507ce(0xfc)]['deleteAttachmentId'],{'Name':shortid_1[_0x4507ce(0x10c)]()});const _0x2a852d=await this[_0x4507ce(0x112)][_0x4507ce(0x10e)](this[_0x4507ce(0xfc)][_0x4507ce(0x110)]);return await this['salesforceService'][_0x4507ce(0xe5)](this[_0x4507ce(0xfc)][_0x4507ce(0x110)]),_0x2a852d;}async['getCommitDto'](){const _0x347d37=a182_0x293dcb,_0x5a5195=new commit_components_dto_1[(_0x347d37(0xff))](),[_0x4c2290,_0x5a917c]=await Promise[_0x347d37(0xfe)]([this[_0x347d37(0x11a)](),this['getComponentsToDelete']()]);return _0x5a5195['message']=this[_0x347d37(0xfc)][_0x347d37(0x11d)],_0x5a5195['user']=this[_0x347d37(0xfc)][_0x347d37(0xdc)],_0x5a5195[_0x347d37(0x114)]={'writed':_0x4c2290,'deleted':_0x5a917c},_0x5a5195[_0x347d37(0xf2)]=this['commitData'][_0x347d37(0xf2)],_0x5a5195['repo']=this[_0x347d37(0x119)],_0x5a5195['branch']=this[_0x347d37(0xef)],_0x5a5195[_0x347d37(0xf6)]=this[_0x347d37(0xf6)],_0x5a5195;}async[a182_0x293dcb(0xce)](_0x3e070a=![]){const _0x1c1413=a182_0x293dcb;if(_0x3e070a)await this[_0x1c1413(0x107)][_0x1c1413(0xfd)](this[_0x1c1413(0xdf)],{});else{const _0x406730=await this['repository'][_0x1c1413(0xe6)]['getOne'](this['branch']['name']);this[_0x1c1413(0xf4)][_0x1c1413(0xd3)](_0x1c1413(0x123));const _0x51d0c6={[this[_0x1c1413(0x119)][_0x1c1413(0xe4)]]:{'lastCommit':_0x406730[_0x1c1413(0x100)]}};await this['salesforceSync'][_0x1c1413(0xfd)](this[_0x1c1413(0xdf)],_0x51d0c6);}}async[a182_0x293dcb(0xed)](){const _0x244b63=a182_0x293dcb,_0x2cf9e6=await this['getCommitDto']();await this['salesforceSync'][_0x244b63(0x125)](this['repositoryData'],_0x244b63(0x12a)),await this[_0x244b63(0xea)][_0x244b63(0x126)](_0x2cf9e6,this[_0x244b63(0xf4)]),await this[_0x244b63(0xce)](),await this[_0x244b63(0x107)][_0x244b63(0x125)](this[_0x244b63(0xdf)],_0x244b63(0x11f));}async[a182_0x293dcb(0x129)](_0x5307b3){const _0x424b4f=a182_0x293dcb;try{this['sfLogger'][_0x424b4f(0xd3)](_0x424b4f(0x12e)+_0x5307b3),await this[_0x424b4f(0xf4)]['send'](),await this[_0x424b4f(0xce)](!![]),await this[_0x424b4f(0x107)][_0x424b4f(0x125)](this[_0x424b4f(0xdf)],_0x424b4f(0xf7));}catch(_0x8092fc){this[_0x424b4f(0x12d)][_0x424b4f(0xf0)](_0x8092fc);}}async[a182_0x293dcb(0x126)](_0x27f03c,_0x59b2a8,_0x3efc02){const _0x4a7b1f=a182_0x293dcb;try{this[_0x4a7b1f(0xfc)]=_0x27f03c,this[_0x4a7b1f(0xf6)]=_0x3efc02,await this['fetchRepositoryData'](),this[_0x4a7b1f(0x119)]=await this[_0x4a7b1f(0x102)][_0x4a7b1f(0xee)](this[_0x4a7b1f(0xdf)][_0x4a7b1f(0x10a)]),this['branch']=await this[_0x4a7b1f(0x119)][_0x4a7b1f(0xe6)][_0x4a7b1f(0xee)](this[_0x4a7b1f(0xdf)][_0x4a7b1f(0xe7)]),this[_0x4a7b1f(0xf4)]=new salesforce_logger_v2_service_1[(_0x4a7b1f(0x120))](_0x59b2a8[_0x4a7b1f(0xe0)](),(_0x59b2a8[_0x4a7b1f(0x104)]()||_0x4a7b1f(0x122)+_0x3efc02[_0x4a7b1f(0xfa)]()+']\x20[Repository:\x20'+this['repositoryData']['repositoryName']+_0x4a7b1f(0xf8)+this[_0x4a7b1f(0xdf)][_0x4a7b1f(0xe7)]+']')+'\x20['+FlosumCommitJob_1[_0x4a7b1f(0xf1)]+']');if(!this[_0x4a7b1f(0xdf)])throw new bad_request_error_1['BadRequestError'](errors_1[_0x4a7b1f(0x109)]);await this['sfLogger'][_0x4a7b1f(0xd3)](_0x4a7b1f(0xf3))[_0x4a7b1f(0x121)](),await this['exec']()[_0x4a7b1f(0x12c)](_0x140930=>this[_0x4a7b1f(0x129)](_0x140930));}catch(_0x85dfc5){this[_0x4a7b1f(0xfc)]=undefined,this[_0x4a7b1f(0x12d)]['error'](_0x85dfc5);throw _0x85dfc5;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([typedi_1[a182_0x293dcb(0xe8)]({'transient':!![]}),__metadata(a182_0x293dcb(0x108),[salesforce_service_1[a182_0x293dcb(0xd5)],commit_components_job_1[a182_0x293dcb(0x115)],salesforce_sync_service_1[a182_0x293dcb(0xde)],git_provider_manager_1[a182_0x293dcb(0x10d)]])],FlosumCommitJob),exports[a182_0x293dcb(0xe9)]=FlosumCommitJob;