function a182_0x5a12(_0x527197,_0x104907){const _0x3a19be=a182_0x2a1d();return a182_0x5a12=function(_0xd8524b,_0x4a83e4){_0xd8524b=_0xd8524b-0xd1;let _0x2a1d7f=_0x3a19be[_0xd8524b];return _0x2a1d7f;},a182_0x5a12(_0x527197,_0x104907);}const a182_0x3dd779=a182_0x5a12;(function(_0x101f5d,_0x14b628){const _0x59ccbc=a182_0x5a12,_0x484e58=_0x101f5d();while(!![]){try{const _0x4b981f=-parseInt(_0x59ccbc(0xe1))/0x1*(parseInt(_0x59ccbc(0x121))/0x2)+-parseInt(_0x59ccbc(0x12c))/0x3+-parseInt(_0x59ccbc(0xf4))/0x4+parseInt(_0x59ccbc(0x116))/0x5*(-parseInt(_0x59ccbc(0x106))/0x6)+parseInt(_0x59ccbc(0xe8))/0x7*(-parseInt(_0x59ccbc(0x11e))/0x8)+-parseInt(_0x59ccbc(0x125))/0x9*(parseInt(_0x59ccbc(0xe4))/0xa)+-parseInt(_0x59ccbc(0x105))/0xb*(-parseInt(_0x59ccbc(0xdf))/0xc);if(_0x4b981f===_0x14b628)break;else _0x484e58['push'](_0x484e58['shift']());}catch(_0x179b8a){_0x484e58['push'](_0x484e58['shift']());}}}(a182_0x2a1d,0xaaaa1));const a182_0x4a83e4=(function(){let _0x5b081d=!![];return function(_0xb10ef,_0x3996ca){const _0x5ba0de=_0x5b081d?function(){if(_0x3996ca){const _0x17355f=_0x3996ca['apply'](_0xb10ef,arguments);return _0x3996ca=null,_0x17355f;}}:function(){};return _0x5b081d=![],_0x5ba0de;};}()),a182_0xd8524b=a182_0x4a83e4(this,function(){const _0x205f10=a182_0x5a12;return a182_0xd8524b['toString']()[_0x205f10(0xdb)](_0x205f10(0x10d))['toString']()[_0x205f10(0x132)](a182_0xd8524b)[_0x205f10(0xdb)](_0x205f10(0x10d));});a182_0xd8524b();'use strict';var __decorate=this&&this['__decorate']||function(_0x1e7381,_0x587553,_0x300b10,_0x4639d6){const _0x428879=a182_0x5a12;var _0x478bd2=arguments[_0x428879(0x112)],_0x125102=_0x478bd2<0x3?_0x587553:_0x4639d6===null?_0x4639d6=Object['getOwnPropertyDescriptor'](_0x587553,_0x300b10):_0x4639d6,_0x30cb8a;if(typeof Reflect===_0x428879(0x139)&&typeof Reflect[_0x428879(0xed)]===_0x428879(0xf2))_0x125102=Reflect[_0x428879(0xed)](_0x1e7381,_0x587553,_0x300b10,_0x4639d6);else{for(var _0x5e317b=_0x1e7381[_0x428879(0x112)]-0x1;_0x5e317b>=0x0;_0x5e317b--)if(_0x30cb8a=_0x1e7381[_0x5e317b])_0x125102=(_0x478bd2<0x3?_0x30cb8a(_0x125102):_0x478bd2>0x3?_0x30cb8a(_0x587553,_0x300b10,_0x125102):_0x30cb8a(_0x587553,_0x300b10))||_0x125102;}return _0x478bd2>0x3&&_0x125102&&Object['defineProperty'](_0x587553,_0x300b10,_0x125102),_0x125102;},__metadata=this&&this[a182_0x3dd779(0xe6)]||function(_0x248075,_0x3c4dae){const _0x50046c=a182_0x3dd779;if(typeof Reflect===_0x50046c(0x139)&&typeof Reflect[_0x50046c(0x107)]==='function')return Reflect[_0x50046c(0x107)](_0x248075,_0x3c4dae);},__importDefault=this&&this[a182_0x3dd779(0x124)]||function(_0xd40d3a){const _0x2778a6=a182_0x3dd779;return _0xd40d3a&&_0xd40d3a[_0x2778a6(0xd6)]?_0xd40d3a:{'default':_0xd40d3a};},FlosumCommitJob_1;function a182_0x2a1d(){const _0x8f5a1b=['4494712NEiurK','logger','convertToSFDX','gitManager','getComponentsToWrite','run','Logger','FLOSUM_ATTACHMENT','../../shared/git-provider.manager','FlosumCommitJob','defineProperty','repository','exec','fetchRepositoryData','../../../constants/errors','send','split','15769193hTMkCF','24402aTRqfQ','metadata','getOne','../../salesforce/services/salesforce-logger-v2.service','deleteAttachment','message','branch','(((.+)+)+)+$','default','trim','salesforceService',']\x20[Repository:\x20','length','design:paramtypes','BadRequestError','provider','1710PWqEUY','../../../constants','shortid','handleCommitJobError','syncBranchId','branches','setStatus','getCommitDto','11159672JoHCKj','commitJob','[FLOSUM\x20->\x20GIT]\x20[','96yjrLmC','commitAttachmentId','updateRemoteState','__importDefault','128079KxTRGn','deleteAttachmentId','[ERROR]\x20','user','Error','getRepositoryRecord','repositoryName','2274990NOTwTf','catch','../../../core','CommitComponentsDto','syncRepositoryId','getRepoService','constructor','../../salesforce/services/salesforce.service','then','commitData','getComponentsToDelete','branchName','error','object','./commit-components.job','sfLogger','ERR_UNKNOWN_SYNC_RECORD_ID','updateLastCommit','log','SalesforceLogger2','retrieveAttachment','__esModule','../../salesforce/services/salesforce-sync.service','gitUrl','components','patchObject','search','SalesforceSyncService','sha','ERR_INVALID_SYNC_RECORD_ID','48MQzopb','CommitComponentsJob','3502hMsBUA','name','Service','140bkXASJ','In\x20Progress','__metadata','[INFO]\x20Update\x20remote\x20state.','7kXqAvW','../../../core/errors/bad-request.error','salesforceSync','repo',']\x20[Branch:\x20','decorate','Completed','all','getLoggerId','toUpperCase','function','repositoryData'];a182_0x2a1d=function(){return _0x8f5a1b;};return a182_0x2a1d();}Object[a182_0x3dd779(0xfe)](exports,a182_0x3dd779(0xd6),{'value':!![]}),exports[a182_0x3dd779(0xfd)]=void 0x0;const core_1=require(a182_0x3dd779(0x12e)),salesforce_logger_v2_service_1=require(a182_0x3dd779(0x109)),salesforce_service_1=require(a182_0x3dd779(0x133)),git_provider_manager_1=require(a182_0x3dd779(0xfc)),typedi_1=require('typedi'),errors_1=require(a182_0x3dd779(0x102)),bad_request_error_1=require(a182_0x3dd779(0xe9)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a182_0x3dd779(0xd7)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a182_0x3dd779(0x13a)),constants_1=require(a182_0x3dd779(0x117)),shortid_1=__importDefault(require(a182_0x3dd779(0x118)));let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x1e0af3,_0x44f346,_0x9f5946,_0x188812){const _0x2b4cc6=a182_0x3dd779;this[_0x2b4cc6(0x110)]=_0x1e0af3,this[_0x2b4cc6(0x11f)]=_0x44f346,this[_0x2b4cc6(0xea)]=_0x9f5946,this[_0x2b4cc6(0xf7)]=_0x188812,this['repoService']=this['gitManager'][_0x2b4cc6(0x131)](),this[_0x2b4cc6(0xf5)]=new core_1[(_0x2b4cc6(0xfa))](FlosumCommitJob_1[_0x2b4cc6(0xe2)]);}async[a182_0x3dd779(0x101)](){const _0x35d317=a182_0x3dd779;try{if(this['commitData'][_0x35d317(0x130)])this['repositoryData']=await this[_0x35d317(0xea)][_0x35d317(0x12a)](this[_0x35d317(0x135)][_0x35d317(0x130)]);else this[_0x35d317(0x135)][_0x35d317(0x11a)]&&(this[_0x35d317(0xf3)]=await this[_0x35d317(0xea)]['getBranchRecord'](this['commitData']['syncBranchId']));}catch(_0x2cb0f6){throw new bad_request_error_1['BadRequestError'](errors_1[_0x35d317(0xde)]);}}async[a182_0x3dd779(0xf8)](){const _0x4048e3=a182_0x3dd779;if(!this[_0x4048e3(0x135)][_0x4048e3(0x122)])return[];await this[_0x4048e3(0x110)][_0x4048e3(0xda)](constants_1[_0x4048e3(0xfb)],this[_0x4048e3(0x135)]['commitAttachmentId'],{'Name':shortid_1[_0x4048e3(0x10e)]()});const _0x5dac4c=await this['salesforceService'][_0x4048e3(0xd5)](this['commitData'][_0x4048e3(0x122)])[_0x4048e3(0x134)](_0x5cda05=>_0x5cda05[_0x4048e3(0x104)]('\x20')['map'](_0x4c41ea=>_0x4c41ea[_0x4048e3(0x10f)]()));await this[_0x4048e3(0x110)]['deleteAttachment'](this[_0x4048e3(0x135)][_0x4048e3(0x122)]);const _0x2a61f2=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x4048e3(0x110)]);return await _0x2a61f2[_0x4048e3(0xf9)](_0x5dac4c);}async[a182_0x3dd779(0x136)](){const _0x5b63b7=a182_0x3dd779;if(!this[_0x5b63b7(0x135)][_0x5b63b7(0x126)])return[];await this[_0x5b63b7(0x110)][_0x5b63b7(0xda)](constants_1['FLOSUM_ATTACHMENT'],this[_0x5b63b7(0x135)][_0x5b63b7(0x126)],{'Name':shortid_1[_0x5b63b7(0x10e)]()});const _0xc3c64d=await this[_0x5b63b7(0x110)][_0x5b63b7(0xd5)](this[_0x5b63b7(0x135)][_0x5b63b7(0x126)]);return await this[_0x5b63b7(0x110)][_0x5b63b7(0x10a)](this[_0x5b63b7(0x135)][_0x5b63b7(0x126)]),_0xc3c64d;}async['getCommitDto'](){const _0x357b8f=a182_0x3dd779,_0xbe32dc=new commit_components_dto_1[(_0x357b8f(0x12f))](),[_0x22e226,_0x28e896]=await Promise[_0x357b8f(0xef)]([this[_0x357b8f(0xf8)](),this[_0x357b8f(0x136)]()]);return _0xbe32dc[_0x357b8f(0x10b)]=this[_0x357b8f(0x135)][_0x357b8f(0x10b)],_0xbe32dc[_0x357b8f(0x128)]=this['commitData']['user'],_0xbe32dc[_0x357b8f(0xd9)]={'writed':_0x22e226,'deleted':_0x28e896},_0xbe32dc[_0x357b8f(0xf6)]=this[_0x357b8f(0x135)][_0x357b8f(0xf6)],_0xbe32dc[_0x357b8f(0xeb)]=this[_0x357b8f(0xff)],_0xbe32dc[_0x357b8f(0x10c)]=this[_0x357b8f(0x10c)],_0xbe32dc[_0x357b8f(0x115)]=this[_0x357b8f(0x115)],_0xbe32dc;}async[a182_0x3dd779(0xd2)](_0x49bc80=![]){const _0x3ce580=a182_0x3dd779;if(_0x49bc80)await this[_0x3ce580(0xea)][_0x3ce580(0x123)](this[_0x3ce580(0xf3)],{});else{const _0x307894=await this[_0x3ce580(0xff)][_0x3ce580(0x11b)]['getOne'](this[_0x3ce580(0x10c)][_0x3ce580(0xe2)]);this['sfLogger']['log'](_0x3ce580(0xe7));const _0x5a4cf5={[this['repository'][_0x3ce580(0xd8)]]:{'lastCommit':_0x307894[_0x3ce580(0xdd)]}};await this[_0x3ce580(0xea)]['updateRemoteState'](this[_0x3ce580(0xf3)],_0x5a4cf5);}}async[a182_0x3dd779(0x100)](){const _0xebbb12=a182_0x3dd779,_0x24a749=await this[_0xebbb12(0x11d)]();await this['salesforceSync']['setStatus'](this[_0xebbb12(0xf3)],_0xebbb12(0xe5)),await this['commitJob']['run'](_0x24a749,this[_0xebbb12(0x13b)]),await this[_0xebbb12(0xd2)](),await this['salesforceSync'][_0xebbb12(0x11c)](this['repositoryData'],_0xebbb12(0xee));}async[a182_0x3dd779(0x119)](_0x3e1f4d){const _0x185cc5=a182_0x3dd779;try{this[_0x185cc5(0x13b)][_0x185cc5(0xd3)](_0x185cc5(0x127)+_0x3e1f4d),await this[_0x185cc5(0x13b)][_0x185cc5(0x103)](),await this[_0x185cc5(0xd2)](!![]),await this[_0x185cc5(0xea)][_0x185cc5(0x11c)](this[_0x185cc5(0xf3)],_0x185cc5(0x129));}catch(_0x4c69a3){this[_0x185cc5(0xf5)][_0x185cc5(0x138)](_0x4c69a3);}}async[a182_0x3dd779(0xf9)](_0x54626a,_0xcae44d,_0x2a96f4){const _0x19535a=a182_0x3dd779;try{this['commitData']=_0x54626a,this[_0x19535a(0x115)]=_0x2a96f4,await this[_0x19535a(0x101)](),this[_0x19535a(0xff)]=await this['repoService']['getOne'](this[_0x19535a(0xf3)][_0x19535a(0x12b)]),this[_0x19535a(0x10c)]=await this[_0x19535a(0xff)][_0x19535a(0x11b)][_0x19535a(0x108)](this[_0x19535a(0xf3)][_0x19535a(0x137)]),this[_0x19535a(0x13b)]=new salesforce_logger_v2_service_1[(_0x19535a(0xd4))](_0xcae44d[_0x19535a(0xf0)](),(_0xcae44d['getPrefix']()||_0x19535a(0x120)+_0x2a96f4[_0x19535a(0xf1)]()+_0x19535a(0x111)+this['repositoryData'][_0x19535a(0x12b)]+_0x19535a(0xec)+this[_0x19535a(0xf3)]['branchName']+']')+'\x20['+FlosumCommitJob_1[_0x19535a(0xe2)]+']');if(!this['repositoryData'])throw new bad_request_error_1[(_0x19535a(0x114))](errors_1[_0x19535a(0xd1)]);await this[_0x19535a(0x13b)][_0x19535a(0xd3)]('[INFO]\x20Start\x20commit\x20job')[_0x19535a(0x103)](),await this[_0x19535a(0x100)]()[_0x19535a(0x12d)](_0x2f9683=>this[_0x19535a(0x119)](_0x2f9683));}catch(_0x455dc9){this[_0x19535a(0x135)]=undefined,this[_0x19535a(0xf5)][_0x19535a(0x138)](_0x455dc9);throw _0x455dc9;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([typedi_1[a182_0x3dd779(0xe3)]({'transient':!![]}),__metadata(a182_0x3dd779(0x113),[salesforce_service_1['SalesforceService'],commit_components_job_1[a182_0x3dd779(0xe0)],salesforce_sync_service_1[a182_0x3dd779(0xdc)],git_provider_manager_1['GitProviderManager']])],FlosumCommitJob),exports[a182_0x3dd779(0xfd)]=FlosumCommitJob;