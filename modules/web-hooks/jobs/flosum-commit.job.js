function a182_0x4576(){const _0x294a2a=['exec',']\x20[Repository:\x20','catch','gitManager','Error','[ERROR]\x20','error','map','7006041dzJMDj','setStatus','9XggmGW','salesforceSync','convertToSFDX','branch','apply','branchName','updateRemoteState','getLoggerId','user','sha','114CilBUk','__importDefault','repository','In\x20Progress','8221480HqExpO','getComponentsToDelete','FlosumCommitJob','logger','FLOSUM_ATTACHMENT','../../salesforce/services/salesforce-logger-v2.service','decorate','repositoryData','[INFO]\x20Update\x20remote\x20state.','default','Logger','run','provider','../../salesforce/services/salesforce-sync.service','63ppgqCJ','toString','repositoryName','getOne','315705IwLDuK','999834fsBeGv','Service','getPrefix','getOwnPropertyDescriptor','58948uwpQWf','syncBranchId','repoService','SalesforceRetrieverService','handleCommitJobError','../../salesforce/services/salesforce.service','syncRepositoryId','log','Completed','getComponentsToWrite','../../../constants','commitAttachmentId','search','defineProperty','updateLastCommit','[INFO]\x20Start\x20commit\x20job','SalesforceLogger2','branches','BadRequestError','object','getBranchRecord','../../../core','typedi','GitProviderManager','send','./commit-components.job','deleteAttachmentId','../../shared/git-provider.manager','sfLogger','__decorate','commitData','(((.+)+)+)+$','787716UGKltI','name','toUpperCase','metadata','fetchRepositoryData','commitJob','CommitComponentsJob','salesforceService','__esModule','CommitComponentsDto','repo','../../../constants/errors','message','trim','retrieveAttachment','then',']\x20[Branch:\x20','all','19521820wZNzZM'];a182_0x4576=function(){return _0x294a2a;};return a182_0x4576();}const a182_0x181e4c=a182_0x5e28;(function(_0x4c0b7d,_0x204ab5){const _0x1eeb81=a182_0x5e28,_0x5806cb=_0x4c0b7d();while(!![]){try{const _0x59839e=-parseInt(_0x1eeb81(0x14a))/0x1+parseInt(_0x1eeb81(0x126))/0x2+parseInt(_0x1eeb81(0x121))/0x3*(-parseInt(_0x1eeb81(0x12a))/0x4)+parseInt(_0x1eeb81(0x125))/0x5*(parseInt(_0x1eeb81(0x10f))/0x6)+parseInt(_0x1eeb81(0x165))/0x7+-parseInt(_0x1eeb81(0x113))/0x8*(-parseInt(_0x1eeb81(0x167))/0x9)+-parseInt(_0x1eeb81(0x15c))/0xa;if(_0x59839e===_0x204ab5)break;else _0x5806cb['push'](_0x5806cb['shift']());}catch(_0x123a95){_0x5806cb['push'](_0x5806cb['shift']());}}}(a182_0x4576,0xa5b71));const a182_0x30c7d3=(function(){let _0x4dfa09=!![];return function(_0x282757,_0x2d1551){const _0x24cb09=_0x4dfa09?function(){const _0x406dba=a182_0x5e28;if(_0x2d1551){const _0x1a8936=_0x2d1551[_0x406dba(0x109)](_0x282757,arguments);return _0x2d1551=null,_0x1a8936;}}:function(){};return _0x4dfa09=![],_0x24cb09;};}()),a182_0x5a9f6a=a182_0x30c7d3(this,function(){const _0xc909c8=a182_0x5e28;return a182_0x5a9f6a[_0xc909c8(0x122)]()['search']('(((.+)+)+)+$')[_0xc909c8(0x122)]()['constructor'](a182_0x5a9f6a)[_0xc909c8(0x136)](_0xc909c8(0x149));});a182_0x5a9f6a();'use strict';var __decorate=this&&this[a182_0x181e4c(0x147)]||function(_0x3adb0d,_0x148758,_0x470409,_0xad00c7){const _0x15be65=a182_0x181e4c;var _0x22c2fc=arguments['length'],_0x490f06=_0x22c2fc<0x3?_0x148758:_0xad00c7===null?_0xad00c7=Object[_0x15be65(0x129)](_0x148758,_0x470409):_0xad00c7,_0x2519fa;if(typeof Reflect==='object'&&typeof Reflect[_0x15be65(0x119)]==='function')_0x490f06=Reflect[_0x15be65(0x119)](_0x3adb0d,_0x148758,_0x470409,_0xad00c7);else{for(var _0x1fd6e6=_0x3adb0d['length']-0x1;_0x1fd6e6>=0x0;_0x1fd6e6--)if(_0x2519fa=_0x3adb0d[_0x1fd6e6])_0x490f06=(_0x22c2fc<0x3?_0x2519fa(_0x490f06):_0x22c2fc>0x3?_0x2519fa(_0x148758,_0x470409,_0x490f06):_0x2519fa(_0x148758,_0x470409))||_0x490f06;}return _0x22c2fc>0x3&&_0x490f06&&Object[_0x15be65(0x137)](_0x148758,_0x470409,_0x490f06),_0x490f06;},__metadata=this&&this['__metadata']||function(_0x345a91,_0x28118c){const _0x439609=a182_0x181e4c;if(typeof Reflect===_0x439609(0x13d)&&typeof Reflect[_0x439609(0x14d)]==='function')return Reflect[_0x439609(0x14d)](_0x345a91,_0x28118c);},__importDefault=this&&this[a182_0x181e4c(0x110)]||function(_0x4a2419){const _0x5b32f6=a182_0x181e4c;return _0x4a2419&&_0x4a2419[_0x5b32f6(0x152)]?_0x4a2419:{'default':_0x4a2419};},FlosumCommitJob_1;Object[a182_0x181e4c(0x137)](exports,a182_0x181e4c(0x152),{'value':!![]}),exports['FlosumCommitJob']=void 0x0;function a182_0x5e28(_0x310ff3,_0x121798){const _0x412622=a182_0x4576();return a182_0x5e28=function(_0x5a9f6a,_0x30c7d3){_0x5a9f6a=_0x5a9f6a-0x106;let _0x45763d=_0x412622[_0x5a9f6a];return _0x45763d;},a182_0x5e28(_0x310ff3,_0x121798);}const core_1=require(a182_0x181e4c(0x13f)),salesforce_logger_v2_service_1=require(a182_0x181e4c(0x118)),salesforce_service_1=require(a182_0x181e4c(0x12f)),git_provider_manager_1=require(a182_0x181e4c(0x145)),typedi_1=require(a182_0x181e4c(0x140)),errors_1=require(a182_0x181e4c(0x155)),bad_request_error_1=require('../../../core/errors/bad-request.error'),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a182_0x181e4c(0x120)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a182_0x181e4c(0x143)),constants_1=require(a182_0x181e4c(0x134)),shortid_1=__importDefault(require('shortid'));let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x1f352f,_0x2a6733,_0x1ff2a9,_0x118f2a){const _0x3651e6=a182_0x181e4c;this[_0x3651e6(0x151)]=_0x1f352f,this[_0x3651e6(0x14f)]=_0x2a6733,this[_0x3651e6(0x106)]=_0x1ff2a9,this[_0x3651e6(0x160)]=_0x118f2a,this[_0x3651e6(0x12c)]=this['gitManager']['getRepoService'](),this['logger']=new core_1[(_0x3651e6(0x11d))](FlosumCommitJob_1[_0x3651e6(0x14b)]);}async[a182_0x181e4c(0x14e)](){const _0x5c1be0=a182_0x181e4c;try{if(this['commitData'][_0x5c1be0(0x130)])this[_0x5c1be0(0x11a)]=await this[_0x5c1be0(0x106)]['getRepositoryRecord'](this[_0x5c1be0(0x148)]['syncRepositoryId']);else this[_0x5c1be0(0x148)]['syncBranchId']&&(this[_0x5c1be0(0x11a)]=await this['salesforceSync'][_0x5c1be0(0x13e)](this['commitData'][_0x5c1be0(0x12b)]));}catch(_0x523b57){throw new bad_request_error_1[(_0x5c1be0(0x13c))](errors_1['ERR_INVALID_SYNC_RECORD_ID']);}}async[a182_0x181e4c(0x133)](){const _0x2f76e7=a182_0x181e4c;if(!this['commitData'][_0x2f76e7(0x135)])return[];await this['salesforceService']['patchObject'](constants_1['FLOSUM_ATTACHMENT'],this[_0x2f76e7(0x148)][_0x2f76e7(0x135)],{'Name':shortid_1[_0x2f76e7(0x11c)]()});const _0x1526f1=await this[_0x2f76e7(0x151)][_0x2f76e7(0x158)](this[_0x2f76e7(0x148)][_0x2f76e7(0x135)])[_0x2f76e7(0x159)](_0x53eccd=>_0x53eccd['split']('\x20')[_0x2f76e7(0x164)](_0x59757b=>_0x59757b[_0x2f76e7(0x157)]()));await this[_0x2f76e7(0x151)]['deleteAttachment'](this['commitData'][_0x2f76e7(0x135)]);const _0x4d9b96=new salesforce_retriever_service_1[(_0x2f76e7(0x12d))](this[_0x2f76e7(0x151)]);return await _0x4d9b96[_0x2f76e7(0x11e)](_0x1526f1);}async[a182_0x181e4c(0x114)](){const _0x5a5650=a182_0x181e4c;if(!this[_0x5a5650(0x148)][_0x5a5650(0x144)])return[];await this[_0x5a5650(0x151)]['patchObject'](constants_1[_0x5a5650(0x117)],this[_0x5a5650(0x148)][_0x5a5650(0x144)],{'Name':shortid_1[_0x5a5650(0x11c)]()});const _0x41dca1=await this['salesforceService'][_0x5a5650(0x158)](this[_0x5a5650(0x148)][_0x5a5650(0x144)]);return await this['salesforceService']['deleteAttachment'](this['commitData'][_0x5a5650(0x144)]),_0x41dca1;}async['getCommitDto'](){const _0x362d33=a182_0x181e4c,_0x2253ad=new commit_components_dto_1[(_0x362d33(0x153))](),[_0xf856ea,_0x4fc1af]=await Promise[_0x362d33(0x15b)]([this['getComponentsToWrite'](),this[_0x362d33(0x114)]()]);return _0x2253ad[_0x362d33(0x156)]=this['commitData'][_0x362d33(0x156)],_0x2253ad[_0x362d33(0x10d)]=this[_0x362d33(0x148)][_0x362d33(0x10d)],_0x2253ad['components']={'writed':_0xf856ea,'deleted':_0x4fc1af},_0x2253ad[_0x362d33(0x107)]=this[_0x362d33(0x148)][_0x362d33(0x107)],_0x2253ad[_0x362d33(0x154)]=this['repository'],_0x2253ad['branch']=this[_0x362d33(0x108)],_0x2253ad[_0x362d33(0x11f)]=this[_0x362d33(0x11f)],_0x2253ad;}async[a182_0x181e4c(0x138)](_0x3b03e3=![]){const _0x19fc2b=a182_0x181e4c;if(_0x3b03e3)await this[_0x19fc2b(0x106)][_0x19fc2b(0x10b)](this[_0x19fc2b(0x11a)],{});else{const _0x99ff09=await this['repository'][_0x19fc2b(0x13b)][_0x19fc2b(0x124)](this[_0x19fc2b(0x108)][_0x19fc2b(0x14b)]);this['sfLogger'][_0x19fc2b(0x131)](_0x19fc2b(0x11b));const _0x4f41be={[this['repository']['gitUrl']]:{'lastCommit':_0x99ff09[_0x19fc2b(0x10e)]}};await this[_0x19fc2b(0x106)][_0x19fc2b(0x10b)](this[_0x19fc2b(0x11a)],_0x4f41be);}}async[a182_0x181e4c(0x15d)](){const _0x33539e=a182_0x181e4c,_0x2d2937=await this['getCommitDto']();await this[_0x33539e(0x106)][_0x33539e(0x166)](this[_0x33539e(0x11a)],_0x33539e(0x112)),await this[_0x33539e(0x14f)][_0x33539e(0x11e)](_0x2d2937,this[_0x33539e(0x146)]),await this[_0x33539e(0x138)](),await this['salesforceSync']['setStatus'](this[_0x33539e(0x11a)],_0x33539e(0x132));}async[a182_0x181e4c(0x12e)](_0x1e616c){const _0x3554ce=a182_0x181e4c;try{this[_0x3554ce(0x146)]['log'](_0x3554ce(0x162)+_0x1e616c),await this[_0x3554ce(0x146)]['send'](),await this[_0x3554ce(0x138)](!![]),await this[_0x3554ce(0x106)]['setStatus'](this[_0x3554ce(0x11a)],_0x3554ce(0x161));}catch(_0x1bfb10){this[_0x3554ce(0x116)]['error'](_0x1bfb10);}}async[a182_0x181e4c(0x11e)](_0x35b324,_0x159c04,_0x250d8f){const _0x237cf1=a182_0x181e4c;try{this[_0x237cf1(0x148)]=_0x35b324,this[_0x237cf1(0x11f)]=_0x250d8f,await this['fetchRepositoryData'](),this[_0x237cf1(0x111)]=await this[_0x237cf1(0x12c)][_0x237cf1(0x124)](this[_0x237cf1(0x11a)][_0x237cf1(0x123)]),this['branch']=await this[_0x237cf1(0x111)][_0x237cf1(0x13b)][_0x237cf1(0x124)](this[_0x237cf1(0x11a)]['branchName']),this[_0x237cf1(0x146)]=new salesforce_logger_v2_service_1[(_0x237cf1(0x13a))](_0x159c04[_0x237cf1(0x10c)](),(_0x159c04[_0x237cf1(0x128)]()||'[FLOSUM\x20->\x20GIT]\x20['+_0x250d8f[_0x237cf1(0x14c)]()+_0x237cf1(0x15e)+this['repositoryData'][_0x237cf1(0x123)]+_0x237cf1(0x15a)+this[_0x237cf1(0x11a)][_0x237cf1(0x10a)]+']')+'\x20['+FlosumCommitJob_1[_0x237cf1(0x14b)]+']');if(!this[_0x237cf1(0x11a)])throw new bad_request_error_1[(_0x237cf1(0x13c))](errors_1['ERR_UNKNOWN_SYNC_RECORD_ID']);await this[_0x237cf1(0x146)][_0x237cf1(0x131)](_0x237cf1(0x139))[_0x237cf1(0x142)](),await this[_0x237cf1(0x15d)]()[_0x237cf1(0x15f)](_0x210f0c=>this[_0x237cf1(0x12e)](_0x210f0c));}catch(_0x4a348a){this[_0x237cf1(0x148)]=undefined,this['logger'][_0x237cf1(0x163)](_0x4a348a);throw _0x4a348a;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([typedi_1[a182_0x181e4c(0x127)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_service_1['SalesforceService'],commit_components_job_1[a182_0x181e4c(0x150)],salesforce_sync_service_1['SalesforceSyncService'],git_provider_manager_1[a182_0x181e4c(0x141)]])],FlosumCommitJob),exports[a182_0x181e4c(0x115)]=FlosumCommitJob;