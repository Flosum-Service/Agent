function a182_0x9728(){const _0x1528d3=['repo','../dto/commit-components.dto','347205nNlNPJ','../../salesforce/services/salesforce-logger-v2.service','getOne','length','In\x20Progress','handleCommitJobError','FlosumCommitJob','branches','FLOSUM_ATTACHMENT','getOwnPropertyDescriptor','repositoryName','2161245zEiUgf','CommitComponentsJob','(((.+)+)+)+$','gitManager','updateLastCommit','metadata','Logger','branch','apply','user','383899cMFViA','object','defineProperty','then','[ERROR]\x20','log','4731552fgbeyc','updateRemoteState','all','getPrefix','fetchRepositoryData','ERR_INVALID_SYNC_RECORD_ID','getCommitDto','exec','constructor','Service','components','salesforceService','SalesforceSyncService','../../../constants/errors','salesforceSync','SalesforceLogger2','getBranchRecord','provider','[FLOSUM\x20->\x20GIT]\x20[','../../salesforce/services/salesforce-retriever.service','../../shared/git-provider.manager','__importDefault',']\x20[Repository:\x20','setStatus','patchObject','gitUrl','__decorate','toString','syncBranchId','[INFO]\x20Start\x20commit\x20job','sfLogger','trim','commitJob','CommitComponentsDto',']\x20[Branch:\x20','deleteAttachment','Error','sha','Completed','../../../core/errors/bad-request.error','split','design:paramtypes','../../../constants','SalesforceRetrieverService','map','ERR_UNKNOWN_SYNC_RECORD_ID','error','getComponentsToDelete','getLoggerId','../../salesforce/services/salesforce-sync.service','typedi','4257224fjDQBg','convertToSFDX','syncRepositoryId','catch','message','send','2418316QJvysC','[INFO]\x20Update\x20remote\x20state.','repository','run','deleteAttachmentId','__metadata','repoService','branchName','retrieveAttachment','BadRequestError','10814321txxNfJ','search','name','commitAttachmentId','logger','../../salesforce/services/salesforce.service','getComponentsToWrite','default','__esModule','commitData','repositoryData'];a182_0x9728=function(){return _0x1528d3;};return a182_0x9728();}const a182_0x7dcd57=a182_0x2dac;(function(_0x2250f5,_0xfd8860){const _0x4bdb00=a182_0x2dac,_0x26c16d=_0x2250f5();while(!![]){try{const _0x23b556=parseInt(_0x4bdb00(0x141))/0x1+-parseInt(_0x4bdb00(0x115))/0x2+-parseInt(_0x4bdb00(0x12c))/0x3+-parseInt(_0x4bdb00(0x10f))/0x4+parseInt(_0x4bdb00(0x137))/0x5+parseInt(_0x4bdb00(0x147))/0x6+parseInt(_0x4bdb00(0x11f))/0x7;if(_0x23b556===_0xfd8860)break;else _0x26c16d['push'](_0x26c16d['shift']());}catch(_0x476842){_0x26c16d['push'](_0x26c16d['shift']());}}}(a182_0x9728,0xb9a7c));const a182_0x3adcca=(function(){let _0x3015d3=!![];return function(_0x26135a,_0x1e1dbb){const _0x4a7f83=_0x3015d3?function(){const _0x365950=a182_0x2dac;if(_0x1e1dbb){const _0x5e681e=_0x1e1dbb[_0x365950(0x13f)](_0x26135a,arguments);return _0x1e1dbb=null,_0x5e681e;}}:function(){};return _0x3015d3=![],_0x4a7f83;};}()),a182_0xd64f89=a182_0x3adcca(this,function(){const _0xf0d168=a182_0x2dac;return a182_0xd64f89[_0xf0d168(0x162)]()[_0xf0d168(0x120)]('(((.+)+)+)+$')['toString']()[_0xf0d168(0x14f)](a182_0xd64f89)[_0xf0d168(0x120)](_0xf0d168(0x139));});a182_0xd64f89();'use strict';var __decorate=this&&this[a182_0x7dcd57(0x161)]||function(_0x1fbc06,_0x5230f6,_0xc64d22,_0x174931){const _0x4b5943=a182_0x7dcd57;var _0x78b4ed=arguments[_0x4b5943(0x12f)],_0x306e7a=_0x78b4ed<0x3?_0x5230f6:_0x174931===null?_0x174931=Object[_0x4b5943(0x135)](_0x5230f6,_0xc64d22):_0x174931,_0x24a15a;if(typeof Reflect==='object'&&typeof Reflect['decorate']==='function')_0x306e7a=Reflect['decorate'](_0x1fbc06,_0x5230f6,_0xc64d22,_0x174931);else{for(var _0x224fe3=_0x1fbc06[_0x4b5943(0x12f)]-0x1;_0x224fe3>=0x0;_0x224fe3--)if(_0x24a15a=_0x1fbc06[_0x224fe3])_0x306e7a=(_0x78b4ed<0x3?_0x24a15a(_0x306e7a):_0x78b4ed>0x3?_0x24a15a(_0x5230f6,_0xc64d22,_0x306e7a):_0x24a15a(_0x5230f6,_0xc64d22))||_0x306e7a;}return _0x78b4ed>0x3&&_0x306e7a&&Object[_0x4b5943(0x143)](_0x5230f6,_0xc64d22,_0x306e7a),_0x306e7a;},__metadata=this&&this[a182_0x7dcd57(0x11a)]||function(_0x2842d2,_0xd5fa4f){const _0x125316=a182_0x7dcd57;if(typeof Reflect===_0x125316(0x142)&&typeof Reflect[_0x125316(0x13c)]==='function')return Reflect[_0x125316(0x13c)](_0x2842d2,_0xd5fa4f);},__importDefault=this&&this[a182_0x7dcd57(0x15c)]||function(_0x49af0e){return _0x49af0e&&_0x49af0e['__esModule']?_0x49af0e:{'default':_0x49af0e};},FlosumCommitJob_1;function a182_0x2dac(_0x41ec3,_0xf0ae46){const _0x1afdf6=a182_0x9728();return a182_0x2dac=function(_0xd64f89,_0x3adcca){_0xd64f89=_0xd64f89-0x103;let _0x9728ef=_0x1afdf6[_0xd64f89];return _0x9728ef;},a182_0x2dac(_0x41ec3,_0xf0ae46);}Object[a182_0x7dcd57(0x143)](exports,a182_0x7dcd57(0x127),{'value':!![]}),exports[a182_0x7dcd57(0x132)]=void 0x0;const core_1=require('../../../core'),salesforce_logger_v2_service_1=require(a182_0x7dcd57(0x12d)),salesforce_service_1=require(a182_0x7dcd57(0x124)),git_provider_manager_1=require(a182_0x7dcd57(0x15b)),typedi_1=require(a182_0x7dcd57(0x10e)),errors_1=require(a182_0x7dcd57(0x154)),bad_request_error_1=require(a182_0x7dcd57(0x103)),salesforce_retriever_service_1=require(a182_0x7dcd57(0x15a)),salesforce_sync_service_1=require(a182_0x7dcd57(0x10d)),commit_components_dto_1=require(a182_0x7dcd57(0x12b)),commit_components_job_1=require('./commit-components.job'),constants_1=require(a182_0x7dcd57(0x106)),shortid_1=__importDefault(require('shortid'));let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x39dc2b,_0x2b821e,_0x2e60e5,_0x317d8b){const _0x10f0fe=a182_0x7dcd57;this['salesforceService']=_0x39dc2b,this[_0x10f0fe(0x167)]=_0x2b821e,this[_0x10f0fe(0x155)]=_0x2e60e5,this[_0x10f0fe(0x13a)]=_0x317d8b,this['repoService']=this[_0x10f0fe(0x13a)]['getRepoService'](),this[_0x10f0fe(0x123)]=new core_1[(_0x10f0fe(0x13d))](FlosumCommitJob_1[_0x10f0fe(0x121)]);}async[a182_0x7dcd57(0x14b)](){const _0x38a35c=a182_0x7dcd57;try{if(this[_0x38a35c(0x128)][_0x38a35c(0x111)])this[_0x38a35c(0x129)]=await this['salesforceSync']['getRepositoryRecord'](this['commitData'][_0x38a35c(0x111)]);else this[_0x38a35c(0x128)][_0x38a35c(0x163)]&&(this[_0x38a35c(0x129)]=await this[_0x38a35c(0x155)][_0x38a35c(0x157)](this[_0x38a35c(0x128)]['syncBranchId']));}catch(_0x3e3478){throw new bad_request_error_1['BadRequestError'](errors_1[_0x38a35c(0x14c)]);}}async[a182_0x7dcd57(0x125)](){const _0x1538ec=a182_0x7dcd57;if(!this[_0x1538ec(0x128)][_0x1538ec(0x122)])return[];await this[_0x1538ec(0x152)][_0x1538ec(0x15f)](constants_1[_0x1538ec(0x134)],this[_0x1538ec(0x128)][_0x1538ec(0x122)],{'Name':shortid_1['default']()});const _0x47ed51=await this[_0x1538ec(0x152)][_0x1538ec(0x11d)](this['commitData'][_0x1538ec(0x122)])[_0x1538ec(0x144)](_0x56a34d=>_0x56a34d[_0x1538ec(0x104)]('\x20')[_0x1538ec(0x108)](_0x2aab31=>_0x2aab31[_0x1538ec(0x166)]()));await this[_0x1538ec(0x152)][_0x1538ec(0x16a)](this[_0x1538ec(0x128)][_0x1538ec(0x122)]);const _0x3ad21f=new salesforce_retriever_service_1[(_0x1538ec(0x107))](this[_0x1538ec(0x152)]);return await _0x3ad21f['run'](_0x47ed51);}async[a182_0x7dcd57(0x10b)](){const _0x2f795d=a182_0x7dcd57;if(!this['commitData'][_0x2f795d(0x119)])return[];await this[_0x2f795d(0x152)][_0x2f795d(0x15f)](constants_1[_0x2f795d(0x134)],this[_0x2f795d(0x128)]['deleteAttachmentId'],{'Name':shortid_1[_0x2f795d(0x126)]()});const _0xaee99b=await this[_0x2f795d(0x152)][_0x2f795d(0x11d)](this['commitData']['deleteAttachmentId']);return await this[_0x2f795d(0x152)][_0x2f795d(0x16a)](this[_0x2f795d(0x128)][_0x2f795d(0x119)]),_0xaee99b;}async[a182_0x7dcd57(0x14d)](){const _0x337c5c=a182_0x7dcd57,_0x22ab11=new commit_components_dto_1[(_0x337c5c(0x168))](),[_0xe6d18d,_0x552622]=await Promise[_0x337c5c(0x149)]([this[_0x337c5c(0x125)](),this[_0x337c5c(0x10b)]()]);return _0x22ab11[_0x337c5c(0x113)]=this[_0x337c5c(0x128)]['message'],_0x22ab11[_0x337c5c(0x140)]=this[_0x337c5c(0x128)][_0x337c5c(0x140)],_0x22ab11[_0x337c5c(0x151)]={'writed':_0xe6d18d,'deleted':_0x552622},_0x22ab11[_0x337c5c(0x110)]=this['commitData'][_0x337c5c(0x110)],_0x22ab11[_0x337c5c(0x12a)]=this['repository'],_0x22ab11['branch']=this[_0x337c5c(0x13e)],_0x22ab11[_0x337c5c(0x158)]=this['provider'],_0x22ab11;}async['updateLastCommit'](_0x2bf8fc=![]){const _0x3a6c9b=a182_0x7dcd57;if(_0x2bf8fc)await this['salesforceSync']['updateRemoteState'](this[_0x3a6c9b(0x129)],{});else{const _0x14d0f4=await this[_0x3a6c9b(0x117)][_0x3a6c9b(0x133)][_0x3a6c9b(0x12e)](this[_0x3a6c9b(0x13e)]['name']);this[_0x3a6c9b(0x165)][_0x3a6c9b(0x146)](_0x3a6c9b(0x116));const _0x51ba2d={[this[_0x3a6c9b(0x117)][_0x3a6c9b(0x160)]]:{'lastCommit':_0x14d0f4[_0x3a6c9b(0x16c)]}};await this[_0x3a6c9b(0x155)][_0x3a6c9b(0x148)](this[_0x3a6c9b(0x129)],_0x51ba2d);}}async[a182_0x7dcd57(0x14e)](){const _0x121ecb=a182_0x7dcd57,_0x5764af=await this[_0x121ecb(0x14d)]();await this[_0x121ecb(0x155)][_0x121ecb(0x15e)](this['repositoryData'],_0x121ecb(0x130)),await this[_0x121ecb(0x167)][_0x121ecb(0x118)](_0x5764af,this['sfLogger']),await this[_0x121ecb(0x13b)](),await this['salesforceSync']['setStatus'](this[_0x121ecb(0x129)],_0x121ecb(0x16d));}async[a182_0x7dcd57(0x131)](_0x364725){const _0x54d56f=a182_0x7dcd57;try{this[_0x54d56f(0x165)][_0x54d56f(0x146)](_0x54d56f(0x145)+_0x364725),await this[_0x54d56f(0x165)][_0x54d56f(0x114)](),await this['updateLastCommit'](!![]),await this['salesforceSync'][_0x54d56f(0x15e)](this[_0x54d56f(0x129)],_0x54d56f(0x16b));}catch(_0x1940f7){this[_0x54d56f(0x123)]['error'](_0x1940f7);}}async[a182_0x7dcd57(0x118)](_0x6775b1,_0x729ce3,_0xde1544){const _0x51bd8f=a182_0x7dcd57;try{this[_0x51bd8f(0x128)]=_0x6775b1,this[_0x51bd8f(0x158)]=_0xde1544,await this['fetchRepositoryData'](),this['repository']=await this[_0x51bd8f(0x11b)][_0x51bd8f(0x12e)](this['repositoryData'][_0x51bd8f(0x136)]),this['branch']=await this[_0x51bd8f(0x117)][_0x51bd8f(0x133)][_0x51bd8f(0x12e)](this[_0x51bd8f(0x129)]['branchName']),this['sfLogger']=new salesforce_logger_v2_service_1[(_0x51bd8f(0x156))](_0x729ce3[_0x51bd8f(0x10c)](),(_0x729ce3[_0x51bd8f(0x14a)]()||_0x51bd8f(0x159)+_0xde1544['toUpperCase']()+_0x51bd8f(0x15d)+this['repositoryData']['repositoryName']+_0x51bd8f(0x169)+this[_0x51bd8f(0x129)][_0x51bd8f(0x11c)]+']')+'\x20['+FlosumCommitJob_1['name']+']');if(!this[_0x51bd8f(0x129)])throw new bad_request_error_1[(_0x51bd8f(0x11e))](errors_1[_0x51bd8f(0x109)]);await this[_0x51bd8f(0x165)]['log'](_0x51bd8f(0x164))[_0x51bd8f(0x114)](),await this[_0x51bd8f(0x14e)]()[_0x51bd8f(0x112)](_0xb734c9=>this[_0x51bd8f(0x131)](_0xb734c9));}catch(_0x97f34d){this[_0x51bd8f(0x128)]=undefined,this[_0x51bd8f(0x123)][_0x51bd8f(0x10a)](_0x97f34d);throw _0x97f34d;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([typedi_1[a182_0x7dcd57(0x150)]({'transient':!![]}),__metadata(a182_0x7dcd57(0x105),[salesforce_service_1['SalesforceService'],commit_components_job_1[a182_0x7dcd57(0x138)],salesforce_sync_service_1[a182_0x7dcd57(0x153)],git_provider_manager_1['GitProviderManager']])],FlosumCommitJob),exports[a182_0x7dcd57(0x132)]=FlosumCommitJob;