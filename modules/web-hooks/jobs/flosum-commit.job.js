function a182_0x5984(){const _0xade95e=['logger','getOne','../../../constants/errors','gitManager','Completed','1076886likEGn','branch','fetchRepositoryData','BadRequestError','length','__esModule','branches','getCommitDto','catch','1411135rFCoPB','getComponentsToDelete','apply','655494GhNQUD',']\x20[Repository:\x20','deleteAttachmentId','commitData','toString','toUpperCase','typedi','repository','constructor','6jxrLpe','deleteAttachment','GitProviderManager','In\x20Progress','syncRepositoryId','log','FlosumCommitJob','getBranchRecord','exec','convertToSFDX','Service','updateRemoteState','CommitComponentsDto','commitAttachmentId','770110zNFpOF','8ZUULhO','[INFO]\x20Start\x20commit\x20job','handleCommitJobError','salesforceService','salesforceSync','map','[ERROR]\x20','../../../core','repo','retrieveAttachment','327868EUqUDh','message','setStatus','__metadata','defineProperty','getComponentsToWrite','Logger','./commit-components.job','__decorate','syncBranchId','run','Error','[INFO]\x20Update\x20remote\x20state.','repositoryData','all','then','(((.+)+)+)+$','SalesforceSyncService','branchName','commitJob','sfLogger','../../salesforce/services/salesforce.service','333572XHQEwE','user','repositoryName','metadata','search','design:paramtypes','../dto/commit-components.dto','object','updateLastCommit','getRepoService','getOwnPropertyDescriptor','name','decorate','provider','../../salesforce/services/salesforce-sync.service','ERR_UNKNOWN_SYNC_RECORD_ID','repoService','2879370GTgYLw','function','getLoggerId'];a182_0x5984=function(){return _0xade95e;};return a182_0x5984();}const a182_0x15f3a7=a182_0x2191;(function(_0x12f8a1,_0x3f9f5b){const _0x33f83b=a182_0x2191,_0x34a961=_0x12f8a1();while(!![]){try{const _0x4eed35=parseInt(_0x33f83b(0x218))/0x1+-parseInt(_0x33f83b(0x1f7))/0x2+parseInt(_0x33f83b(0x231))/0x3+-parseInt(_0x33f83b(0x202))/0x4+-parseInt(_0x33f83b(0x23a))/0x5*(-parseInt(_0x33f83b(0x1e9))/0x6)+parseInt(_0x33f83b(0x1e0))/0x7*(parseInt(_0x33f83b(0x1f8))/0x8)+-parseInt(_0x33f83b(0x229))/0x9;if(_0x4eed35===_0x3f9f5b)break;else _0x34a961['push'](_0x34a961['shift']());}catch(_0x36b787){_0x34a961['push'](_0x34a961['shift']());}}}(a182_0x5984,0x44b6b));const a182_0x5850df=(function(){let _0x454174=!![];return function(_0x3ac844,_0x4e433){const _0x4ec7a4=_0x454174?function(){const _0x45f9a1=a182_0x2191;if(_0x4e433){const _0x2af9e9=_0x4e433[_0x45f9a1(0x1df)](_0x3ac844,arguments);return _0x4e433=null,_0x2af9e9;}}:function(){};return _0x454174=![],_0x4ec7a4;};}()),a182_0x1df00d=a182_0x5850df(this,function(){const _0x29bd9f=a182_0x2191;return a182_0x1df00d[_0x29bd9f(0x1e4)]()[_0x29bd9f(0x21c)](_0x29bd9f(0x212))[_0x29bd9f(0x1e4)]()[_0x29bd9f(0x1e8)](a182_0x1df00d)[_0x29bd9f(0x21c)](_0x29bd9f(0x212));});a182_0x1df00d();'use strict';var __decorate=this&&this[a182_0x15f3a7(0x20a)]||function(_0x50efee,_0x224cdd,_0x212fea,_0x2a30cf){const _0x1e736b=a182_0x15f3a7;var _0x4a8ba8=arguments[_0x1e736b(0x235)],_0x24205c=_0x4a8ba8<0x3?_0x224cdd:_0x2a30cf===null?_0x2a30cf=Object[_0x1e736b(0x222)](_0x224cdd,_0x212fea):_0x2a30cf,_0x514419;if(typeof Reflect===_0x1e736b(0x21f)&&typeof Reflect[_0x1e736b(0x224)]===_0x1e736b(0x22a))_0x24205c=Reflect[_0x1e736b(0x224)](_0x50efee,_0x224cdd,_0x212fea,_0x2a30cf);else{for(var _0x39cd21=_0x50efee[_0x1e736b(0x235)]-0x1;_0x39cd21>=0x0;_0x39cd21--)if(_0x514419=_0x50efee[_0x39cd21])_0x24205c=(_0x4a8ba8<0x3?_0x514419(_0x24205c):_0x4a8ba8>0x3?_0x514419(_0x224cdd,_0x212fea,_0x24205c):_0x514419(_0x224cdd,_0x212fea))||_0x24205c;}return _0x4a8ba8>0x3&&_0x24205c&&Object[_0x1e736b(0x206)](_0x224cdd,_0x212fea,_0x24205c),_0x24205c;},__metadata=this&&this[a182_0x15f3a7(0x205)]||function(_0x5624bb,_0x243966){const _0x3b4a17=a182_0x15f3a7;if(typeof Reflect==='object'&&typeof Reflect[_0x3b4a17(0x21b)]==='function')return Reflect[_0x3b4a17(0x21b)](_0x5624bb,_0x243966);},FlosumCommitJob_1;Object['defineProperty'](exports,a182_0x15f3a7(0x236),{'value':!![]}),exports['FlosumCommitJob']=void 0x0;const core_1=require(a182_0x15f3a7(0x1ff)),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),salesforce_service_1=require(a182_0x15f3a7(0x217)),git_provider_manager_1=require('../../shared/git-provider.manager'),typedi_1=require(a182_0x15f3a7(0x1e6)),errors_1=require(a182_0x15f3a7(0x22e)),bad_request_error_1=require('../../../core/errors/bad-request.error'),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a182_0x15f3a7(0x226)),commit_components_dto_1=require(a182_0x15f3a7(0x21e)),commit_components_job_1=require(a182_0x15f3a7(0x209));function a182_0x2191(_0x45c67b,_0x5f1ce6){const _0x49b6e3=a182_0x5984();return a182_0x2191=function(_0x1df00d,_0x5850df){_0x1df00d=_0x1df00d-0x1de;let _0x598406=_0x49b6e3[_0x1df00d];return _0x598406;},a182_0x2191(_0x45c67b,_0x5f1ce6);}let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x582bba,_0x514eb6,_0x57b275,_0x44f82e){const _0x3570a0=a182_0x15f3a7;this[_0x3570a0(0x1fb)]=_0x582bba,this[_0x3570a0(0x215)]=_0x514eb6,this['salesforceSync']=_0x57b275,this[_0x3570a0(0x22f)]=_0x44f82e,this[_0x3570a0(0x228)]=this['gitManager'][_0x3570a0(0x221)](),this[_0x3570a0(0x22c)]=new core_1[(_0x3570a0(0x208))](FlosumCommitJob_1[_0x3570a0(0x223)]);}async[a182_0x15f3a7(0x233)](){const _0x2ac5ef=a182_0x15f3a7;try{if(this['commitData']['syncRepositoryId'])this[_0x2ac5ef(0x20f)]=await this[_0x2ac5ef(0x1fc)]['getRepositoryRecord'](this['commitData'][_0x2ac5ef(0x1ed)]);else this[_0x2ac5ef(0x1e3)][_0x2ac5ef(0x20b)]&&(this[_0x2ac5ef(0x20f)]=await this['salesforceSync'][_0x2ac5ef(0x1f0)](this[_0x2ac5ef(0x1e3)][_0x2ac5ef(0x20b)]));}catch(_0x4dea3f){throw new bad_request_error_1[(_0x2ac5ef(0x234))](errors_1['ERR_INVALID_SYNC_RECORD_ID']);}}async[a182_0x15f3a7(0x207)](){const _0x3acfd3=a182_0x15f3a7;if(!this[_0x3acfd3(0x1e3)][_0x3acfd3(0x1f6)])return[];const _0x554f48=await this[_0x3acfd3(0x1fb)][_0x3acfd3(0x201)](this['commitData'][_0x3acfd3(0x1f6)])[_0x3acfd3(0x211)](_0x321b18=>_0x321b18['split']('\x20')[_0x3acfd3(0x1fd)](_0x239ab8=>_0x239ab8['trim']())),_0x16796c=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x3acfd3(0x1fb)]),_0x24f902=await _0x16796c['run'](_0x554f48);return _0x24f902;}async[a182_0x15f3a7(0x1de)](){const _0x3c33e3=a182_0x15f3a7;if(!this['commitData'][_0x3c33e3(0x1e2)])return[];const _0x7d39af=await this[_0x3c33e3(0x1fb)]['retrieveAttachment'](this['commitData'][_0x3c33e3(0x1e2)]);return _0x7d39af;}async[a182_0x15f3a7(0x238)](){const _0x3be597=a182_0x15f3a7,_0x5fb1a6=new commit_components_dto_1[(_0x3be597(0x1f5))](),[_0x1d4bfc,_0x447f03]=await Promise[_0x3be597(0x210)]([this[_0x3be597(0x207)](),this[_0x3be597(0x1de)]()]);return _0x5fb1a6[_0x3be597(0x203)]=this['commitData'][_0x3be597(0x203)],_0x5fb1a6[_0x3be597(0x219)]=this[_0x3be597(0x1e3)][_0x3be597(0x219)],_0x5fb1a6['components']={'writed':_0x1d4bfc,'deleted':_0x447f03},_0x5fb1a6[_0x3be597(0x1f2)]=this[_0x3be597(0x1e3)][_0x3be597(0x1f2)],_0x5fb1a6[_0x3be597(0x200)]=this[_0x3be597(0x1e7)],_0x5fb1a6[_0x3be597(0x232)]=this[_0x3be597(0x232)],_0x5fb1a6[_0x3be597(0x225)]=this[_0x3be597(0x225)],_0x5fb1a6;}async['updateLastCommit'](_0x302554=![]){const _0x1f1802=a182_0x15f3a7;if(_0x302554)await this[_0x1f1802(0x1fc)][_0x1f1802(0x1f4)](this[_0x1f1802(0x20f)],{});else{const _0x1ab758=await this['repository'][_0x1f1802(0x237)]['getOne'](this[_0x1f1802(0x232)]['name']);this[_0x1f1802(0x216)][_0x1f1802(0x1ee)](_0x1f1802(0x20e));const _0x27b61c={[this[_0x1f1802(0x1e7)]['gitUrl']]:{'lastCommit':_0x1ab758['sha']}};await this[_0x1f1802(0x1fc)][_0x1f1802(0x1f4)](this[_0x1f1802(0x20f)],_0x27b61c);}}async[a182_0x15f3a7(0x1f1)](){const _0x49cede=a182_0x15f3a7,_0x2de6eb=await this[_0x49cede(0x238)]();await this[_0x49cede(0x1fc)][_0x49cede(0x204)](this[_0x49cede(0x20f)],_0x49cede(0x1ec)),await this[_0x49cede(0x215)][_0x49cede(0x20c)](_0x2de6eb,this[_0x49cede(0x216)]),await this[_0x49cede(0x220)](),this[_0x49cede(0x1e3)][_0x49cede(0x1f6)]&&await this[_0x49cede(0x1fb)]['deleteAttachment'](this[_0x49cede(0x1e3)][_0x49cede(0x1f6)]),this['commitData'][_0x49cede(0x1e2)]&&await this['salesforceService'][_0x49cede(0x1ea)](this['commitData'][_0x49cede(0x1e2)]),await this[_0x49cede(0x1fc)][_0x49cede(0x204)](this[_0x49cede(0x20f)],_0x49cede(0x230));}async[a182_0x15f3a7(0x1fa)](_0x3c338c){const _0x371f66=a182_0x15f3a7;try{this['sfLogger'][_0x371f66(0x1ee)](_0x371f66(0x1fe)+_0x3c338c),await this[_0x371f66(0x216)]['send'](),await this['updateLastCommit'](!![]),await this[_0x371f66(0x1fc)][_0x371f66(0x204)](this[_0x371f66(0x20f)],_0x371f66(0x20d));}catch(_0x48a7f8){this[_0x371f66(0x22c)]['error'](_0x48a7f8);}}async['run'](_0x5e4ad8,_0x322141,_0x46da5f){const _0x17d9ff=a182_0x15f3a7;try{this[_0x17d9ff(0x1e3)]=_0x5e4ad8,this[_0x17d9ff(0x225)]=_0x46da5f,await this['fetchRepositoryData'](),this[_0x17d9ff(0x1e7)]=await this[_0x17d9ff(0x228)][_0x17d9ff(0x22d)](this['repositoryData'][_0x17d9ff(0x21a)]),this[_0x17d9ff(0x232)]=await this[_0x17d9ff(0x1e7)][_0x17d9ff(0x237)][_0x17d9ff(0x22d)](this[_0x17d9ff(0x20f)][_0x17d9ff(0x214)]),this[_0x17d9ff(0x216)]=new salesforce_logger_v2_service_1['SalesforceLogger2'](_0x322141[_0x17d9ff(0x22b)](),(_0x322141['getPrefix']()||'[FLOSUM\x20->\x20GIT]\x20['+_0x46da5f[_0x17d9ff(0x1e5)]()+_0x17d9ff(0x1e1)+this[_0x17d9ff(0x20f)][_0x17d9ff(0x21a)]+']\x20[Branch:\x20'+this[_0x17d9ff(0x20f)][_0x17d9ff(0x214)]+']')+'\x20['+FlosumCommitJob_1[_0x17d9ff(0x223)]+']');if(!this[_0x17d9ff(0x20f)])throw new bad_request_error_1[(_0x17d9ff(0x234))](errors_1[_0x17d9ff(0x227)]);await this[_0x17d9ff(0x216)]['log'](_0x17d9ff(0x1f9))['send'](),await this[_0x17d9ff(0x1f1)]()[_0x17d9ff(0x239)](_0x67c698=>this[_0x17d9ff(0x1fa)](_0x67c698));}catch(_0xc17761){this[_0x17d9ff(0x1e3)]=undefined,this[_0x17d9ff(0x22c)]['error'](_0xc17761);throw _0xc17761;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([typedi_1[a182_0x15f3a7(0x1f3)]({'transient':!![]}),__metadata(a182_0x15f3a7(0x21d),[salesforce_service_1['SalesforceService'],commit_components_job_1['CommitComponentsJob'],salesforce_sync_service_1[a182_0x15f3a7(0x213)],git_provider_manager_1[a182_0x15f3a7(0x1eb)]])],FlosumCommitJob),exports[a182_0x15f3a7(0x1ef)]=FlosumCommitJob;