function a183_0x4e54(_0x17af02,_0x5629ab){const _0x28e6ba=a183_0x159e();return a183_0x4e54=function(_0x31a482,_0x2b17f0){_0x31a482=_0x31a482-0x1f0;let _0x159e1a=_0x28e6ba[_0x31a482];return _0x159e1a;},a183_0x4e54(_0x17af02,_0x5629ab);}const a183_0x5f1de0=a183_0x4e54;(function(_0x76416,_0x1f959f){const _0x4a38f1=a183_0x4e54,_0x59702f=_0x76416();while(!![]){try{const _0x254923=parseInt(_0x4a38f1(0x1fe))/0x1+-parseInt(_0x4a38f1(0x245))/0x2+-parseInt(_0x4a38f1(0x269))/0x3*(-parseInt(_0x4a38f1(0x26e))/0x4)+-parseInt(_0x4a38f1(0x24d))/0x5+-parseInt(_0x4a38f1(0x216))/0x6+-parseInt(_0x4a38f1(0x230))/0x7*(-parseInt(_0x4a38f1(0x265))/0x8)+-parseInt(_0x4a38f1(0x1f8))/0x9*(-parseInt(_0x4a38f1(0x261))/0xa);if(_0x254923===_0x1f959f)break;else _0x59702f['push'](_0x59702f['shift']());}catch(_0x29d418){_0x59702f['push'](_0x59702f['shift']());}}}(a183_0x159e,0x47fd8));const a183_0x2b17f0=(function(){let _0x42ece0=!![];return function(_0x4247c5,_0x44741b){const _0x98a71e=_0x42ece0?function(){if(_0x44741b){const _0x5cf397=_0x44741b['apply'](_0x4247c5,arguments);return _0x44741b=null,_0x5cf397;}}:function(){};return _0x42ece0=![],_0x98a71e;};}()),a183_0x31a482=a183_0x2b17f0(this,function(){const _0x3b2b99=a183_0x4e54;return a183_0x31a482['toString']()['search']('(((.+)+)+)+$')[_0x3b2b99(0x237)]()[_0x3b2b99(0x241)](a183_0x31a482)['search'](_0x3b2b99(0x274));});a183_0x31a482();function a183_0x159e(){const _0xc17eba=['../../salesforce/services/salesforce-logger-v2.service','[INFO]\x20Job\x20done.','gitUtils','prototype','4TXnGSI','In\x20Progress','SalesforceError','ApiError','../utils/git-commit.utils','message','(((.+)+)+)+$','[INFO]\x20Clone\x20git\x20repository.','send','lastCommitHash','changes','__setModuleDefault','create','Error',']\x20Start\x20proceeding\x20git\x20commits.\x20','fetch\x20components\x20metadata','SFDX','email','updateStatus','getRepositoryId','map','../services/git-commit.service','isSFDXProject','27juVGnV','readDir','../../../core','://','values','relative','271388hCRXmT','files','../../internal/fs.internal','force','proceedCommits','fetchComponentsMetadata','../utils/mdapi.utils','repository','getCredentialsFor','sync\x20components','dir','getLoggerId','DEFAULT_GIT_USER_EMAIL','../../salesforce/errors/salesforce.error','BitbucketApiService','hasOwnProperty','[INFO]\x20Download\x20components\x20metadata\x20from\x20flosum.','getRemote','getBranchId','start\x20force\x20commit\x20job\x20to\x20sync\x20repository','getPrefix','describeCommit','log','[INFO]\x20Proceeded\x20','1061244mvxuZv','__metadata','get','logger','[INFO]\x20Force\x20commit.\x20Have\x20to\x20parse\x20','[INFO]\x20Fetch\x20salesforce\x20data.','sfLogger','MDApiUtils','function','proceed\x20git\x20commits\x20to\x20flosum','createLogger','shift','SalesforceNotFoundError','../../../core/errors/api.error','removeLogger','bitbucket','[INFO]\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','isLoggedIn','checkSyncStatus','SalesforceCommitsManager','updateRemoteState','metadata','object','setLoggerId','__createBinding','fetchCommits','3451119nyATRf','proceedGitCommit','provider','git\x20commit\x20job\x20done\x20(´･ω･`)','error','run','design:paramtypes','toString','gitCommitData','__esModule','authSettings','commits','../../salesforce/errors/not-found.error','../../../constants','setCommitDto','default','catch','constructor','defineProperty','decorate','length','932480uOBLVQ','removeDir','SalesforceLogger2','[ERROR]\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20flosum\x20-\x20','prepare\x20mdapi\x20to\x20parse','mdapiUtils','prepareMdapi','GitCommitJob','1757590rVnxPC','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','clone\x20repository\x20from\x20%s','call','path','getCurrentHash','branch','gitCommit','fetchRepositoryOrBranchData','flat','name','DEFAULT_GIT_USER_NAME','../../salesforce/utils/sfdx.utils','getAccessToken','GitUtils','replace','Service','getProtocol','../../shared/services/auth-settings.service','clone','674940qlkNEt','cleanUp','[INFO]\x20Branch\x20synchronized.\x20Skip','__decorate','8aBEfob','FlosumCommitError','checkoutTo','getOwnPropertyDescriptor','967851AhaYKp'];a183_0x159e=function(){return _0xc17eba;};return a183_0x159e();}'use strict';var __createBinding=this&&this[a183_0x5f1de0(0x22e)]||(Object[a183_0x5f1de0(0x27a)]?function(_0x929ab2,_0x1487f4,_0x4c2728,_0x2a40ed){if(_0x2a40ed===undefined)_0x2a40ed=_0x4c2728;Object['defineProperty'](_0x929ab2,_0x2a40ed,{'enumerable':!![],'get':function(){return _0x1487f4[_0x4c2728];}});}:function(_0xa9ab81,_0xfab093,_0x35248b,_0x2821d4){if(_0x2821d4===undefined)_0x2821d4=_0x35248b;_0xa9ab81[_0x2821d4]=_0xfab093[_0x35248b];}),__setModuleDefault=this&&this[a183_0x5f1de0(0x279)]||(Object['create']?function(_0x81bba9,_0x24d66c){Object['defineProperty'](_0x81bba9,'default',{'enumerable':!![],'value':_0x24d66c});}:function(_0x32cef9,_0x45952b){const _0x115041=a183_0x5f1de0;_0x32cef9[_0x115041(0x23f)]=_0x45952b;}),__decorate=this&&this[a183_0x5f1de0(0x264)]||function(_0xfee579,_0x1d9194,_0x42e049,_0x481b21){const _0x996916=a183_0x5f1de0;var _0x1ef8c9=arguments[_0x996916(0x244)],_0x2b1ddb=_0x1ef8c9<0x3?_0x1d9194:_0x481b21===null?_0x481b21=Object[_0x996916(0x268)](_0x1d9194,_0x42e049):_0x481b21,_0xa65243;if(typeof Reflect===_0x996916(0x22c)&&typeof Reflect[_0x996916(0x243)]===_0x996916(0x21e))_0x2b1ddb=Reflect[_0x996916(0x243)](_0xfee579,_0x1d9194,_0x42e049,_0x481b21);else{for(var _0x3aa539=_0xfee579['length']-0x1;_0x3aa539>=0x0;_0x3aa539--)if(_0xa65243=_0xfee579[_0x3aa539])_0x2b1ddb=(_0x1ef8c9<0x3?_0xa65243(_0x2b1ddb):_0x1ef8c9>0x3?_0xa65243(_0x1d9194,_0x42e049,_0x2b1ddb):_0xa65243(_0x1d9194,_0x42e049))||_0x2b1ddb;}return _0x1ef8c9>0x3&&_0x2b1ddb&&Object[_0x996916(0x242)](_0x1d9194,_0x42e049,_0x2b1ddb),_0x2b1ddb;},__importStar=this&&this['__importStar']||function(_0x12b8f6){const _0x4b2afb=a183_0x5f1de0;if(_0x12b8f6&&_0x12b8f6[_0x4b2afb(0x239)])return _0x12b8f6;var _0x2de853={};if(_0x12b8f6!=null){for(var _0x32a76f in _0x12b8f6)if(_0x32a76f!==_0x4b2afb(0x23f)&&Object[_0x4b2afb(0x26d)][_0x4b2afb(0x20d)][_0x4b2afb(0x250)](_0x12b8f6,_0x32a76f))__createBinding(_0x2de853,_0x12b8f6,_0x32a76f);}return __setModuleDefault(_0x2de853,_0x12b8f6),_0x2de853;},__metadata=this&&this[a183_0x5f1de0(0x217)]||function(_0x576b0a,_0x1c2460){const _0x5dff10=a183_0x5f1de0;if(typeof Reflect==='object'&&typeof Reflect[_0x5dff10(0x22b)]==='function')return Reflect[_0x5dff10(0x22b)](_0x576b0a,_0x1c2460);},GitCommitJob_1;Object['defineProperty'](exports,a183_0x5f1de0(0x239),{'value':!![]}),exports[a183_0x5f1de0(0x24c)]=void 0x0;const core_1=require(a183_0x5f1de0(0x1fa)),fs_internal_1=require(a183_0x5f1de0(0x200)),salesforce_logger_v2_service_1=require(a183_0x5f1de0(0x26a)),auth_settings_service_1=require(a183_0x5f1de0(0x25f)),utils_1=require('../../shared/utils'),path_1=require(a183_0x5f1de0(0x251)),typedi_1=__importStar(require('typedi')),constants_1=require(a183_0x5f1de0(0x23d)),salesforce_commits_manager_service_1=require('../../salesforce/services/salesforce-commits-manager.service'),git_commit_utils_1=require(a183_0x5f1de0(0x272)),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a183_0x5f1de0(0x204)),api_error_1=require(a183_0x5f1de0(0x223)),salesforce_error_1=require(a183_0x5f1de0(0x20b)),git_commit_service_1=require(a183_0x5f1de0(0x1f6)),flosum_commit_error_1=require('../errors/flosum-commit.error'),not_found_error_1=require(a183_0x5f1de0(0x23c)),bitbucket_api_service_1=require('../../git-api/services/bitbucket-api.service'),sfdx_utils_1=require(a183_0x5f1de0(0x259));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x534eba,_0x143a7f){const _0xba9863=a183_0x5f1de0;this[_0xba9863(0x23a)]=_0x534eba,this['gitCommit']=_0x143a7f,this[_0xba9863(0x219)]=new core_1['Logger'](GitCommitJob_1[_0xba9863(0x257)]);}async['getRemote'](){const _0xd97f39=a183_0x5f1de0,{repositoryGit:_0x1c2ecb}=this[_0xd97f39(0x238)];let _0x1dd010=this[_0xd97f39(0x23a)][_0xd97f39(0x206)](this[_0xd97f39(0x238)][_0xd97f39(0x232)]);if(this[_0xd97f39(0x238)][_0xd97f39(0x232)]===_0xd97f39(0x225)){const _0x2d2d70=typedi_1[_0xd97f39(0x23f)][_0xd97f39(0x218)](bitbucket_api_service_1[_0xd97f39(0x20c)]);await _0x2d2d70[_0xd97f39(0x227)](),_0x1dd010+=encodeURIComponent(_0x2d2d70[_0xd97f39(0x25a)]());}return _0x1c2ecb[_0xd97f39(0x25c)](/http(s)?\:\/\/(.+@)?/,utils_1[_0xd97f39(0x25e)](_0x1c2ecb)+_0xd97f39(0x1fb)+_0x1dd010+'@');}async[a183_0x5f1de0(0x22f)](){const _0x103100=a183_0x5f1de0;if(this[_0x103100(0x238)][_0x103100(0x201)])return;const _0x21776e=[];for(const _0x220a25 of this[_0x103100(0x238)][_0x103100(0x23b)]){const _0x4b866f=await this[_0x103100(0x26c)][_0x103100(0x213)](_0x220a25['id']);_0x220a25['username']=_0x4b866f['author'],_0x220a25['message']=_0x4b866f[_0x103100(0x273)],_0x220a25[_0x103100(0x1ff)]=_0x4b866f[_0x103100(0x278)],_0x220a25[_0x103100(0x1f2)]=_0x4b866f[_0x103100(0x1f2)];if(_0x220a25[_0x103100(0x1f2)]===constants_1[_0x103100(0x20a)])throw new flosum_commit_error_1[(_0x103100(0x266))]();_0x21776e['push'](...Object[_0x103100(0x1fc)](_0x220a25[_0x103100(0x1ff)])[_0x103100(0x256)]());}this[_0x103100(0x238)]['fileNames']=git_commit_utils_1['prepareGitChangedPaths']([...new Set(_0x21776e)]);}async[a183_0x5f1de0(0x202)](_0x5efd4a){const _0x3a0385=a183_0x5f1de0,_0x3ecf14=[...this[_0x3a0385(0x238)][_0x3a0385(0x23b)]],_0x2dfab2=_0x3ecf14['length'],_0x6c6204=[];while(_0x3ecf14[_0x3a0385(0x244)]){const _0x1c4ce3=_0x3ecf14[_0x3a0385(0x221)]();!this['gitCommitData']['force']&&(this[_0x3a0385(0x254)][_0x3a0385(0x1f4)]()?await this[_0x3a0385(0x26c)]['checkoutTo'](_0x1c4ce3['id']):await this['gitUtils'][_0x3a0385(0x267)](this[_0x3a0385(0x277)])),_0x6c6204['push'](await this[_0x3a0385(0x254)][_0x3a0385(0x231)](_0x1c4ce3,this[_0x3a0385(0x24a)][_0x3a0385(0x208)],_0x5efd4a)),await this[_0x3a0385(0x21c)][_0x3a0385(0x214)](_0x3a0385(0x215)+_0x6c6204[_0x3a0385(0x244)]+'/'+_0x2dfab2)['send']();}const _0x1317ec=new salesforce_commits_manager_service_1[(_0x3a0385(0x229))]({'recordTypes':this[_0x3a0385(0x254)]['getRecordTypes'](),'branchId':this[_0x3a0385(0x254)][_0x3a0385(0x210)](),'repositoryId':this[_0x3a0385(0x254)][_0x3a0385(0x1f4)](),'logger':this[_0x3a0385(0x21c)]});await _0x1317ec['proceedCommits'](_0x6c6204);}async[a183_0x5f1de0(0x262)](){const _0x208e5f=a183_0x5f1de0;this[_0x208e5f(0x26c)]&&await this['gitUtils'][_0x208e5f(0x246)]()[_0x208e5f(0x240)](()=>void 0x0),this[_0x208e5f(0x24a)]&&await this['mdapiUtils']['removeDir']()['catch'](()=>void 0x0);}async[a183_0x5f1de0(0x235)](_0x5a46be,_0xffd49a){const _0x4482bd=a183_0x5f1de0;this[_0x4482bd(0x238)]=_0x5a46be,this['gitCommit'][_0x4482bd(0x23e)](this[_0x4482bd(0x238)]),this[_0x4482bd(0x21c)]=new salesforce_logger_v2_service_1[(_0x4482bd(0x247))](_0xffd49a?_0xffd49a[_0x4482bd(0x209)]():undefined,(_0xffd49a&&_0xffd49a[_0x4482bd(0x212)]()||_0x4482bd(0x24e)+_0x5a46be['repository']+']\x20[Branch:\x20'+_0x5a46be[_0x4482bd(0x253)]+']')+'\x20['+GitCommitJob_1[_0x4482bd(0x257)]+']'),this[_0x4482bd(0x26c)]=new git_utils_1[(_0x4482bd(0x25b))](await this[_0x4482bd(0x20f)]()),this[_0x4482bd(0x24a)]=new mdapi_utils_1[(_0x4482bd(0x21d))](this[_0x4482bd(0x238)]['repository'],this['gitCommitData'][_0x4482bd(0x253)]);try{this[_0x4482bd(0x219)]['log']('fetch\x20repository/branch\x20data'),this[_0x4482bd(0x21c)][_0x4482bd(0x214)](_0x4482bd(0x21b)),await this[_0x4482bd(0x254)][_0x4482bd(0x255)](),this[_0x4482bd(0x219)][_0x4482bd(0x214)](_0x4482bd(0x24f),this[_0x4482bd(0x238)]['repositoryGit']),this[_0x4482bd(0x21c)][_0x4482bd(0x214)](_0x4482bd(0x275)),await this[_0x4482bd(0x26c)][_0x4482bd(0x260)](this[_0x4482bd(0x238)][_0x4482bd(0x253)],this['gitCommitData'][_0x4482bd(0x205)]),this['logger']['log']('fetching\x20git\x20commits'),this[_0x4482bd(0x21c)]['log'](_0x4482bd(0x226)),await this[_0x4482bd(0x22f)]();!this['sfLogger'][_0x4482bd(0x209)]()&&this['sfLogger'][_0x4482bd(0x22d)]((await salesforce_logger_v2_service_1[_0x4482bd(0x247)][_0x4482bd(0x220)]())[_0x4482bd(0x209)]());await this['gitCommit'][_0x4482bd(0x1f3)](_0x4482bd(0x26f)),this['logger'][_0x4482bd(0x214)](_0x4482bd(0x249)),await this['mdapiUtils'][_0x4482bd(0x24b)](this['gitUtils'][_0x4482bd(0x208)]);if(_0x5a46be[_0x4482bd(0x201)]){this[_0x4482bd(0x219)][_0x4482bd(0x214)](_0x4482bd(0x211));const _0x16285c=(await fs_internal_1['FS'][_0x4482bd(0x1f9)](this['mdapiUtils']['dir'],!![]))[_0x4482bd(0x1f5)](_0xd98cda=>path_1[_0x4482bd(0x1fd)](this[_0x4482bd(0x24a)]['dir'],_0xd98cda));this['sfLogger'][_0x4482bd(0x214)](_0x4482bd(0x21a)+_0x16285c[_0x4482bd(0x244)]+'\x20before\x20sync.'),this[_0x4482bd(0x238)]['fileNames']=[],this[_0x4482bd(0x238)][_0x4482bd(0x23b)]=[{'files':{'modified':_0x16285c,'added':[],'removed':[]},'id':await this[_0x4482bd(0x26c)][_0x4482bd(0x252)](),'message':_0x4482bd(0x207),'username':constants_1[_0x4482bd(0x258)]}];}this[_0x4482bd(0x277)]=this[_0x4482bd(0x238)][_0x4482bd(0x23b)][this[_0x4482bd(0x238)][_0x4482bd(0x23b)]['length']-0x1]['id'];const _0x1dd2fb=await this[_0x4482bd(0x254)][_0x4482bd(0x228)](this['lastCommitHash']);if(_0x1dd2fb){await this[_0x4482bd(0x21c)][_0x4482bd(0x214)](_0x4482bd(0x263))[_0x4482bd(0x276)](),await this[_0x4482bd(0x254)][_0x4482bd(0x1f3)]('Completed');return;}const _0xa97129=await sfdx_utils_1[_0x4482bd(0x1f1)][_0x4482bd(0x1f7)](this['gitUtils'][_0x4482bd(0x208)]);this[_0x4482bd(0x219)]['log'](_0x4482bd(0x1f0)),await this[_0x4482bd(0x21c)][_0x4482bd(0x214)](_0x4482bd(0x20e)),await this['gitCommit'][_0x4482bd(0x203)](_0xa97129),await this[_0x4482bd(0x254)]['updateRemoteState']({[this[_0x4482bd(0x238)]['repositoryGit']]:{'lastCommit':this['lastCommitHash']}}),this[_0x4482bd(0x219)][_0x4482bd(0x214)](_0x4482bd(0x21f)),this[_0x4482bd(0x21c)][_0x4482bd(0x214)]('[INFO]\x20[SFDX:\x20'+(_0xa97129?'YES':'NO')+_0x4482bd(0x27c)),await this['proceedCommits'](_0xa97129),this[_0x4482bd(0x219)][_0x4482bd(0x214)](_0x4482bd(0x233)),await this[_0x4482bd(0x21c)][_0x4482bd(0x214)](_0x4482bd(0x26b)),await this[_0x4482bd(0x254)]['updateStatus']('Completed');}catch(_0x53dbc9){await this[_0x4482bd(0x262)](),this['logger'][_0x4482bd(0x234)](_0x53dbc9);if(_0x53dbc9 instanceof not_found_error_1[_0x4482bd(0x222)]){await this['sfLogger'][_0x4482bd(0x224)]();return;}if(_0x53dbc9 instanceof flosum_commit_error_1[_0x4482bd(0x266)]){await this[_0x4482bd(0x21c)]['removeLogger']();return;}this['sfLogger'][_0x4482bd(0x214)](_0x4482bd(0x248)+(_0x53dbc9 instanceof api_error_1[_0x4482bd(0x271)]||_0x53dbc9 instanceof salesforce_error_1[_0x4482bd(0x270)]?_0x53dbc9['toString']():_0x53dbc9)),await this[_0x4482bd(0x254)][_0x4482bd(0x22a)]({}),await this[_0x4482bd(0x254)][_0x4482bd(0x1f3)](_0x4482bd(0x27b))[_0x4482bd(0x240)](()=>void 0x0);throw _0x53dbc9;}finally{await this[_0x4482bd(0x262)](),await this[_0x4482bd(0x21c)][_0x4482bd(0x276)]()[_0x4482bd(0x240)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([typedi_1[a183_0x5f1de0(0x25d)]({'transient':!![]}),__metadata(a183_0x5f1de0(0x236),[auth_settings_service_1['AuthSettingsService'],git_commit_service_1['GitCommitService']])],GitCommitJob),exports[a183_0x5f1de0(0x24c)]=GitCommitJob;