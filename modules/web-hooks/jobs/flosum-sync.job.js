const a183_0x1a77ab=a183_0x4acc;(function(_0x424aa0,_0x4f1b46){const _0x19c904=a183_0x4acc,_0x32301c=_0x424aa0();while(!![]){try{const _0x25b2f7=-parseInt(_0x19c904(0x1b0))/0x1+parseInt(_0x19c904(0x19b))/0x2*(parseInt(_0x19c904(0x1ac))/0x3)+parseInt(_0x19c904(0x189))/0x4*(parseInt(_0x19c904(0x178))/0x5)+parseInt(_0x19c904(0x1c2))/0x6+parseInt(_0x19c904(0x16b))/0x7+-parseInt(_0x19c904(0x1a9))/0x8+-parseInt(_0x19c904(0x16c))/0x9*(parseInt(_0x19c904(0x186))/0xa);if(_0x25b2f7===_0x4f1b46)break;else _0x32301c['push'](_0x32301c['shift']());}catch(_0xaa2c3){_0x32301c['push'](_0x32301c['shift']());}}}(a183_0x23ee,0xd51d2));function a183_0x4acc(_0x2e12c2,_0x197d6d){const _0x16765b=a183_0x23ee();return a183_0x4acc=function(_0x1e8d77,_0x3de90b){_0x1e8d77=_0x1e8d77-0x16b;let _0x23ee2a=_0x16765b[_0x1e8d77];return _0x23ee2a;},a183_0x4acc(_0x2e12c2,_0x197d6d);}const a183_0x3de90b=(function(){let _0x47e77d=!![];return function(_0x57ecde,_0x1de33f){const _0x212119=_0x47e77d?function(){const _0x383601=a183_0x4acc;if(_0x1de33f){const _0x5f4389=_0x1de33f[_0x383601(0x194)](_0x57ecde,arguments);return _0x1de33f=null,_0x5f4389;}}:function(){};return _0x47e77d=![],_0x212119;};}()),a183_0x1e8d77=a183_0x3de90b(this,function(){const _0x57d4c7=a183_0x4acc;return a183_0x1e8d77['toString']()['search']('(((.+)+)+)+$')['toString']()[_0x57d4c7(0x195)](a183_0x1e8d77)['search'](_0x57d4c7(0x1b6));});a183_0x1e8d77();'use strict';var __decorate=this&&this['__decorate']||function(_0x11f7f5,_0x471d41,_0x1fb84b,_0x3374dc){const _0x4160fb=a183_0x4acc;var _0x5c3ee7=arguments['length'],_0x17dbdf=_0x5c3ee7<0x3?_0x471d41:_0x3374dc===null?_0x3374dc=Object[_0x4160fb(0x1be)](_0x471d41,_0x1fb84b):_0x3374dc,_0x3fb779;if(typeof Reflect==='object'&&typeof Reflect[_0x4160fb(0x18d)]==='function')_0x17dbdf=Reflect['decorate'](_0x11f7f5,_0x471d41,_0x1fb84b,_0x3374dc);else{for(var _0x500c56=_0x11f7f5[_0x4160fb(0x1b2)]-0x1;_0x500c56>=0x0;_0x500c56--)if(_0x3fb779=_0x11f7f5[_0x500c56])_0x17dbdf=(_0x5c3ee7<0x3?_0x3fb779(_0x17dbdf):_0x5c3ee7>0x3?_0x3fb779(_0x471d41,_0x1fb84b,_0x17dbdf):_0x3fb779(_0x471d41,_0x1fb84b))||_0x17dbdf;}return _0x5c3ee7>0x3&&_0x17dbdf&&Object[_0x4160fb(0x17f)](_0x471d41,_0x1fb84b,_0x17dbdf),_0x17dbdf;},__metadata=this&&this[a183_0x1a77ab(0x19e)]||function(_0x35a54,_0x2a97e3){const _0x514fd2=a183_0x1a77ab;if(typeof Reflect===_0x514fd2(0x1b8)&&typeof Reflect[_0x514fd2(0x19f)]===_0x514fd2(0x190))return Reflect[_0x514fd2(0x19f)](_0x35a54,_0x2a97e3);},FlosumSyncJob_1;function a183_0x23ee(){const _0x5046fe=['Sync\x20repository','apply','constructor','branches','[INFO]\x20Branch\x20synchronized.\x20Skip','In\x20Progress','Logger','branchName','937810HDsTFq','../dto/commit-components.dto','../../salesforce/services/salesforce-logger-v2.service','__metadata','metadata','CommitComponentsJob','repositoryId','getLoggerId','getCommitDto','parse','getRemoteStateAttachmentId','salesforceSync','checkSyncStatus','syncData','10914760NyTeDz','sha','FlosumSyncJob','6jiFepN','__esModule','sfLogger','log','287198gXWYHS','send','length','provider','../../../constants','salesforceService','(((.+)+)+)+$','getPrefix','object','[INFO]\x20Sync\x20job\x20done.','../../salesforce/services/salesforce-retriever.service','CommitComponentsDto','typedi','message','getOwnPropertyDescriptor','Completed','setStatus','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','7626696RVDoTx','repositoryName','SalesforceLogger2','branch',']\x20[Branch:\x20','createBranchIfNotExists','3001803jCfwkF','12085182OSOzUF','updateLastCommit','gitUrl','logger','../../../core','SalesforceService','repository','Service','run','[INFO]\x20Update\x20remote\x20state.','branchId','design:paramtypes','100AoMBnP','retrieveAttachment','convertToSFDX','create','repo','DEFAULT_GIT_USER_EMAIL','updateRemoteState','defineProperty','./commit-components.job','getOne','name','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','lastCommit','../../salesforce/services/salesforce-sync.service','10FJdUkg','catch','SalesforceRetrieverService','245900iFdHEW','string','getComponents','[INFO]\x20Start\x20sync\x20job','decorate','commitJob','getComponentsFromRepository','function','DEFAULT_GIT_USER_NAME','../../salesforce/services/salesforce.service'];a183_0x23ee=function(){return _0x5046fe;};return a183_0x23ee();}Object[a183_0x1a77ab(0x17f)](exports,a183_0x1a77ab(0x1ad),{'value':!![]}),exports[a183_0x1a77ab(0x1ab)]=void 0x0;const core_1=require(a183_0x1a77ab(0x170)),salesforce_logger_v2_service_1=require(a183_0x1a77ab(0x19d)),typedi_1=require(a183_0x1a77ab(0x1bc)),constants_1=require(a183_0x1a77ab(0x1b4)),salesforce_retriever_service_1=require(a183_0x1a77ab(0x1ba)),salesforce_sync_service_1=require(a183_0x1a77ab(0x185)),salesforce_service_1=require(a183_0x1a77ab(0x192)),commit_components_dto_1=require(a183_0x1a77ab(0x19c)),commit_components_job_1=require(a183_0x1a77ab(0x180));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x3f170d,_0x377caf,_0x919815){const _0x37fb9=a183_0x1a77ab;this['salesforceSync']=_0x3f170d,this[_0x37fb9(0x1b5)]=_0x377caf,this['commitJob']=_0x919815,this[_0x37fb9(0x16f)]=new core_1[(_0x37fb9(0x199))](FlosumSyncJob_1[_0x37fb9(0x182)]);}[a183_0x1a77ab(0x1af)](_0x21e5d8){const _0x24be9f=a183_0x1a77ab;return this['sfLogger'][_0x24be9f(0x1af)](_0x24be9f(0x183)+this[_0x24be9f(0x1a8)][_0x24be9f(0x1c3)]+_0x24be9f(0x1c6)+this[_0x24be9f(0x1a8)][_0x24be9f(0x19a)]+']\x20'+_0x21e5d8);}async[a183_0x1a77ab(0x1c7)](){const _0x4dd31d=a183_0x1a77ab;let _0xb09c1=await this[_0x4dd31d(0x172)][_0x4dd31d(0x196)]['getOne'](this['syncData'][_0x4dd31d(0x19a)])['catch'](()=>null);!_0xb09c1&&(_0xb09c1=await this[_0x4dd31d(0x172)]['branches'][_0x4dd31d(0x17b)]({'name':this[_0x4dd31d(0x1a8)]['branchName']})),this[_0x4dd31d(0x1c5)]=_0xb09c1;}async['getComponentIds'](){const _0x3a9f82=a183_0x1a77ab;return this['syncData'][_0x3a9f82(0x1a1)]?this[_0x3a9f82(0x1a6)][_0x3a9f82(0x18f)](this[_0x3a9f82(0x1a8)][_0x3a9f82(0x1a1)]):this[_0x3a9f82(0x1a6)]['getBranchComponents'](this[_0x3a9f82(0x1a8)][_0x3a9f82(0x176)]);}async[a183_0x1a77ab(0x18b)](){const _0x4e4dbf=a183_0x1a77ab,_0x56ccdc=await this['getComponentIds'](),_0x2dbdc5=new salesforce_retriever_service_1[(_0x4e4dbf(0x188))](this[_0x4e4dbf(0x1b5)]),_0x57cedb=await _0x2dbdc5['run'](_0x56ccdc);return _0x57cedb;}async[a183_0x1a77ab(0x1a3)](_0x56494d){const _0x4924f2=a183_0x1a77ab,_0x575cb6=new commit_components_dto_1[(_0x4924f2(0x1bb))]();return _0x575cb6[_0x4924f2(0x1bd)]=_0x4924f2(0x193),_0x575cb6['user']={'name':constants_1[_0x4924f2(0x191)],'email':constants_1[_0x4924f2(0x17d)]},_0x575cb6['components']={'writed':await this['getComponents']()},_0x575cb6[_0x4924f2(0x17a)]=_0x56494d,_0x575cb6[_0x4924f2(0x17c)]=this[_0x4924f2(0x172)],_0x575cb6[_0x4924f2(0x1c5)]=this[_0x4924f2(0x1c5)],_0x575cb6['force']=!![],_0x575cb6[_0x4924f2(0x1b3)]=this[_0x4924f2(0x1b3)],_0x575cb6;}async[a183_0x1a77ab(0x1a7)](){const _0x1925a8=a183_0x1a77ab,_0x4fffe9=await this['salesforceSync'][_0x1925a8(0x1a5)](this[_0x1925a8(0x1a8)]),_0x41c442=await this[_0x1925a8(0x1b5)][_0x1925a8(0x179)](_0x4fffe9)['then'](_0x4b4380=>typeof _0x4b4380===_0x1925a8(0x18a)?JSON[_0x1925a8(0x1a4)](_0x4b4380):_0x4b4380)[_0x1925a8(0x187)](()=>({}));if(_0x41c442[this[_0x1925a8(0x172)][_0x1925a8(0x16e)]]){if(_0x41c442[this[_0x1925a8(0x172)][_0x1925a8(0x16e)]][_0x1925a8(0x184)]===this[_0x1925a8(0x1c5)][_0x1925a8(0x1aa)])return!![];}return![];}async[a183_0x1a77ab(0x16d)](){const _0x4326b8=a183_0x1a77ab,_0x54987d=await this[_0x4326b8(0x172)][_0x4326b8(0x196)][_0x4326b8(0x181)](this['branch'][_0x4326b8(0x182)]);await this['log'](_0x4326b8(0x175));const _0xc1d8b1={[this['repository'][_0x4326b8(0x16e)]]:{'lastCommit':_0x54987d[_0x4326b8(0x1aa)]}};await this[_0x4326b8(0x1a6)][_0x4326b8(0x17e)](this[_0x4326b8(0x1a8)],_0xc1d8b1);}async[a183_0x1a77ab(0x174)]({syncRecord:_0x1322cd,repository:_0x3458e2,logger:_0xa8dd43,convertToSFDX:_0x4ae573,provider:_0x311098}){const _0x42d324=a183_0x1a77ab;this['syncData']=_0x1322cd,this['provider']=_0x311098,this[_0x42d324(0x172)]=_0x3458e2,this[_0x42d324(0x1ae)]=new salesforce_logger_v2_service_1[(_0x42d324(0x1c4))](_0xa8dd43[_0x42d324(0x1a2)](),_0xa8dd43[_0x42d324(0x1b7)]()+_0x42d324(0x1c1)+this[_0x42d324(0x1a8)]['repositoryName']+_0x42d324(0x1c6)+this[_0x42d324(0x1a8)][_0x42d324(0x19a)]+']');try{await this[_0x42d324(0x1a6)][_0x42d324(0x1c0)](this[_0x42d324(0x1a8)],_0x42d324(0x198)),this[_0x42d324(0x1af)](_0x42d324(0x18c)),await this[_0x42d324(0x1c7)]();const _0x541816=await this['checkSyncStatus']();if(_0x541816){await this[_0x42d324(0x1a6)][_0x42d324(0x1c0)](this[_0x42d324(0x1a8)],_0x42d324(0x1bf)),await this[_0x42d324(0x1af)](_0x42d324(0x197))[_0x42d324(0x1b1)]();return;}const _0x3311f7=await this['getCommitDto'](_0x4ae573);await this[_0x42d324(0x18e)][_0x42d324(0x174)](_0x3311f7,this['sfLogger']),await this[_0x42d324(0x1a6)]['setStatus'](this[_0x42d324(0x1a8)],_0x42d324(0x1bf)),await this[_0x42d324(0x16d)](),this['log'](_0x42d324(0x1b9));}catch(_0x16be46){throw _0x16be46;}finally{await this[_0x42d324(0x1ae)][_0x42d324(0x1b1)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x1a77ab(0x173)]({'transient':!![]}),__metadata(a183_0x1a77ab(0x177),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a183_0x1a77ab(0x171)],commit_components_job_1[a183_0x1a77ab(0x1a0)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;