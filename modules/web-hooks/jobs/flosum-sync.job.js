const a182_0x1e2ed8=a182_0x5e32;function a182_0x5e32(_0x16dfc2,_0x557f5c){const _0x12dfb5=a182_0x21bf();return a182_0x5e32=function(_0x1beb26,_0x215afd){_0x1beb26=_0x1beb26-0x1d3;let _0x21bf31=_0x12dfb5[_0x1beb26];return _0x21bf31;},a182_0x5e32(_0x16dfc2,_0x557f5c);}(function(_0x54b23c,_0x407521){const _0x32527d=a182_0x5e32,_0x40425e=_0x54b23c();while(!![]){try{const _0x2f5d47=parseInt(_0x32527d(0x229))/0x1*(-parseInt(_0x32527d(0x216))/0x2)+-parseInt(_0x32527d(0x221))/0x3*(-parseInt(_0x32527d(0x1e5))/0x4)+parseInt(_0x32527d(0x1e6))/0x5+parseInt(_0x32527d(0x1d4))/0x6+-parseInt(_0x32527d(0x1f3))/0x7*(-parseInt(_0x32527d(0x226))/0x8)+-parseInt(_0x32527d(0x202))/0x9*(-parseInt(_0x32527d(0x1f6))/0xa)+-parseInt(_0x32527d(0x22a))/0xb;if(_0x2f5d47===_0x407521)break;else _0x40425e['push'](_0x40425e['shift']());}catch(_0x2d24cb){_0x40425e['push'](_0x40425e['shift']());}}}(a182_0x21bf,0xc286b));const a182_0x215afd=(function(){let _0x5af931=!![];return function(_0x31c099,_0x49696e){const _0x1d48ec=_0x5af931?function(){const _0x34d213=a182_0x5e32;if(_0x49696e){const _0x389a99=_0x49696e[_0x34d213(0x20c)](_0x31c099,arguments);return _0x49696e=null,_0x389a99;}}:function(){};return _0x5af931=![],_0x1d48ec;};}()),a182_0x1beb26=a182_0x215afd(this,function(){const _0x5229f6=a182_0x5e32;return a182_0x1beb26[_0x5229f6(0x1e9)]()[_0x5229f6(0x201)](_0x5229f6(0x1f5))[_0x5229f6(0x1e9)]()[_0x5229f6(0x208)](a182_0x1beb26)[_0x5229f6(0x201)](_0x5229f6(0x1f5));});a182_0x1beb26();function a182_0x21bf(){const _0x2fb60c=['catch','run','function','../dto/commit-components.dto','../../../core',']\x20[Branch:\x20','2nAXVDd','commitJob','log','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','metadata','design:paramtypes','setStatus','repo','user','checkSyncStatus','DEFAULT_GIT_USER_EMAIL','116784oVUQMr','__decorate','object','sfLogger','./commit-components.job','56YtDSxC','repository','convertToSFDX','1493615GeRDqE','14817660aWjxlx','branchName','../../salesforce/services/salesforce-sync.service','1210614MSOcGW','../../../constants','[INFO]\x20Update\x20remote\x20state.','repositoryName','[INFO]\x20Branch\x20synchronized.\x20Skip','getCommitDto','sha','Logger','branches','getBranchComponents','getOne','components','getLoggerId','force','getComponentIds','CommitComponentsJob','[INFO]\x20Start\x20sync\x20job','100anDNUT','2141360TXSRmZ','provider','FlosumSyncJob','toString','branch','create','salesforceSync','parse','decorate','../../salesforce/services/salesforce-logger-v2.service','send','defineProperty','updateLastCommit','1382878NVbvHc','SalesforceLogger2','(((.+)+)+)+$','6513350ngswTS','[INFO]\x20Sync\x20job\x20done.','DEFAULT_GIT_USER_NAME','getComponentsFromRepository','getComponents','In\x20Progress','message','salesforceService','syncData','Sync\x20repository','retrieveAttachment','search','9xuxiHv','SalesforceRetrieverService','string','gitUrl','updateRemoteState','createBranchIfNotExists','constructor','logger','name','repositoryId','apply','CommitComponentsDto','length','Completed'];a182_0x21bf=function(){return _0x2fb60c;};return a182_0x21bf();}'use strict';var __decorate=this&&this[a182_0x1e2ed8(0x222)]||function(_0x36c6d1,_0x963427,_0x485e1f,_0x56d9f1){const _0x22b00b=a182_0x1e2ed8;var _0x53966b=arguments[_0x22b00b(0x20e)],_0x5b61ed=_0x53966b<0x3?_0x963427:_0x56d9f1===null?_0x56d9f1=Object['getOwnPropertyDescriptor'](_0x963427,_0x485e1f):_0x56d9f1,_0x489fa5;if(typeof Reflect===_0x22b00b(0x223)&&typeof Reflect[_0x22b00b(0x1ee)]===_0x22b00b(0x212))_0x5b61ed=Reflect['decorate'](_0x36c6d1,_0x963427,_0x485e1f,_0x56d9f1);else{for(var _0x1dfda5=_0x36c6d1[_0x22b00b(0x20e)]-0x1;_0x1dfda5>=0x0;_0x1dfda5--)if(_0x489fa5=_0x36c6d1[_0x1dfda5])_0x5b61ed=(_0x53966b<0x3?_0x489fa5(_0x5b61ed):_0x53966b>0x3?_0x489fa5(_0x963427,_0x485e1f,_0x5b61ed):_0x489fa5(_0x963427,_0x485e1f))||_0x5b61ed;}return _0x53966b>0x3&&_0x5b61ed&&Object[_0x22b00b(0x1f1)](_0x963427,_0x485e1f,_0x5b61ed),_0x5b61ed;},__metadata=this&&this['__metadata']||function(_0x31d912,_0x2c9e2c){const _0x2d344e=a182_0x1e2ed8;if(typeof Reflect===_0x2d344e(0x223)&&typeof Reflect[_0x2d344e(0x21a)]===_0x2d344e(0x212))return Reflect[_0x2d344e(0x21a)](_0x31d912,_0x2c9e2c);},FlosumSyncJob_1;Object[a182_0x1e2ed8(0x1f1)](exports,'__esModule',{'value':!![]}),exports[a182_0x1e2ed8(0x1e8)]=void 0x0;const core_1=require(a182_0x1e2ed8(0x214)),salesforce_logger_v2_service_1=require(a182_0x1e2ed8(0x1ef)),typedi_1=require('typedi'),constants_1=require(a182_0x1e2ed8(0x1d5)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a182_0x1e2ed8(0x1d3)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a182_0x1e2ed8(0x213)),commit_components_job_1=require(a182_0x1e2ed8(0x225));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x476bcd,_0x2ddc77,_0x222f6e){const _0x14eba5=a182_0x1e2ed8;this[_0x14eba5(0x1ec)]=_0x476bcd,this[_0x14eba5(0x1fd)]=_0x2ddc77,this[_0x14eba5(0x217)]=_0x222f6e,this[_0x14eba5(0x209)]=new core_1[(_0x14eba5(0x1db))](FlosumSyncJob_1[_0x14eba5(0x20a)]);}[a182_0x1e2ed8(0x218)](_0x530864){const _0x2e0bc3=a182_0x1e2ed8;return this['sfLogger'][_0x2e0bc3(0x218)]('[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x2e0bc3(0x1fe)][_0x2e0bc3(0x1d7)]+_0x2e0bc3(0x215)+this[_0x2e0bc3(0x1fe)]['branchName']+']\x20'+_0x530864);}async['createBranchIfNotExists'](){const _0x3fb74e=a182_0x1e2ed8;let _0x3d645a=await this[_0x3fb74e(0x227)]['branches'][_0x3fb74e(0x1de)](this[_0x3fb74e(0x1fe)][_0x3fb74e(0x22b)])['catch'](()=>null);!_0x3d645a&&(_0x3d645a=await this['repository'][_0x3fb74e(0x1dc)][_0x3fb74e(0x1eb)]({'name':this[_0x3fb74e(0x1fe)][_0x3fb74e(0x22b)]})),this[_0x3fb74e(0x1ea)]=_0x3d645a;}async[a182_0x1e2ed8(0x1e2)](){const _0x488cf0=a182_0x1e2ed8;return this[_0x488cf0(0x1fe)][_0x488cf0(0x20b)]?this[_0x488cf0(0x1ec)][_0x488cf0(0x1f9)](this[_0x488cf0(0x1fe)][_0x488cf0(0x20b)]):this[_0x488cf0(0x1ec)][_0x488cf0(0x1dd)](this[_0x488cf0(0x1fe)]['branchId']);}async[a182_0x1e2ed8(0x1fa)](){const _0x1211a9=a182_0x1e2ed8,_0x4a2478=await this[_0x1211a9(0x1e2)](),_0x36e1a2=new salesforce_retriever_service_1[(_0x1211a9(0x203))](this['salesforceService']),_0x364eb5=await _0x36e1a2[_0x1211a9(0x211)](_0x4a2478);return _0x364eb5;}async['getCommitDto'](_0xbab139){const _0x1b6de0=a182_0x1e2ed8,_0x1e2aa5=new commit_components_dto_1[(_0x1b6de0(0x20d))]();return _0x1e2aa5[_0x1b6de0(0x1fc)]=_0x1b6de0(0x1ff),_0x1e2aa5[_0x1b6de0(0x21e)]={'name':constants_1[_0x1b6de0(0x1f8)],'email':constants_1[_0x1b6de0(0x220)]},_0x1e2aa5[_0x1b6de0(0x1df)]={'writed':await this[_0x1b6de0(0x1fa)]()},_0x1e2aa5[_0x1b6de0(0x228)]=_0xbab139,_0x1e2aa5[_0x1b6de0(0x21d)]=this['repository'],_0x1e2aa5[_0x1b6de0(0x1ea)]=this['branch'],_0x1e2aa5[_0x1b6de0(0x1e1)]=!![],_0x1e2aa5[_0x1b6de0(0x1e7)]=this[_0x1b6de0(0x1e7)],_0x1e2aa5;}async[a182_0x1e2ed8(0x21f)](){const _0xd9a9ba=a182_0x1e2ed8,_0x55fef6=await this['salesforceSync']['getRemoteStateAttachmentId'](this[_0xd9a9ba(0x1fe)]),_0x4bcc6e=await this[_0xd9a9ba(0x1fd)][_0xd9a9ba(0x200)](_0x55fef6)['then'](_0x5af07e=>typeof _0x5af07e===_0xd9a9ba(0x204)?JSON[_0xd9a9ba(0x1ed)](_0x5af07e):_0x5af07e)[_0xd9a9ba(0x210)](()=>({}));if(_0x4bcc6e[this[_0xd9a9ba(0x227)]['gitUrl']]){if(_0x4bcc6e[this[_0xd9a9ba(0x227)][_0xd9a9ba(0x205)]]['lastCommit']===this['branch'][_0xd9a9ba(0x1da)])return!![];}return![];}async[a182_0x1e2ed8(0x1f2)](){const _0x2bd14a=a182_0x1e2ed8,_0x15ad46=await this[_0x2bd14a(0x227)][_0x2bd14a(0x1dc)]['getOne'](this[_0x2bd14a(0x1ea)][_0x2bd14a(0x20a)]);await this['log'](_0x2bd14a(0x1d6));const _0x4c12a2={[this[_0x2bd14a(0x227)][_0x2bd14a(0x205)]]:{'lastCommit':_0x15ad46[_0x2bd14a(0x1da)]}};await this[_0x2bd14a(0x1ec)][_0x2bd14a(0x206)](this[_0x2bd14a(0x1fe)],_0x4c12a2);}async[a182_0x1e2ed8(0x211)]({syncRecord:_0x42738a,repository:_0x49acc0,logger:_0x5dc019,convertToSFDX:_0x1d578f,provider:_0x24885c}){const _0x8907f2=a182_0x1e2ed8;this['syncData']=_0x42738a,this[_0x8907f2(0x1e7)]=_0x24885c,this['repository']=_0x49acc0,this[_0x8907f2(0x224)]=new salesforce_logger_v2_service_1[(_0x8907f2(0x1f4))](_0x5dc019[_0x8907f2(0x1e0)](),_0x5dc019['getPrefix']()+_0x8907f2(0x219)+this[_0x8907f2(0x1fe)][_0x8907f2(0x1d7)]+_0x8907f2(0x215)+this[_0x8907f2(0x1fe)][_0x8907f2(0x22b)]+']');try{await this[_0x8907f2(0x1ec)][_0x8907f2(0x21c)](this[_0x8907f2(0x1fe)],_0x8907f2(0x1fb)),this[_0x8907f2(0x218)](_0x8907f2(0x1e4)),await this[_0x8907f2(0x207)]();const _0x2f4edb=await this[_0x8907f2(0x21f)]();if(_0x2f4edb){await this[_0x8907f2(0x1ec)][_0x8907f2(0x21c)](this[_0x8907f2(0x1fe)],_0x8907f2(0x20f)),await this[_0x8907f2(0x218)](_0x8907f2(0x1d8))[_0x8907f2(0x1f0)]();return;}const _0x3d3397=await this[_0x8907f2(0x1d9)](_0x1d578f);await this[_0x8907f2(0x217)][_0x8907f2(0x211)](_0x3d3397,this[_0x8907f2(0x224)]),await this['salesforceSync'][_0x8907f2(0x21c)](this[_0x8907f2(0x1fe)],'Completed'),await this['updateLastCommit'](),this[_0x8907f2(0x218)](_0x8907f2(0x1f7));}catch(_0x5ab5e3){throw _0x5ab5e3;}finally{await this[_0x8907f2(0x224)][_0x8907f2(0x1f0)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a182_0x1e2ed8(0x21b),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1['SalesforceService'],commit_components_job_1[a182_0x1e2ed8(0x1e3)]])],FlosumSyncJob),exports[a182_0x1e2ed8(0x1e8)]=FlosumSyncJob;