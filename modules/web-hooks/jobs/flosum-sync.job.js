const a183_0x481b15=a183_0x2297;(function(_0xe09b96,_0x2e1a4d){const _0xeb0190=a183_0x2297,_0x5941c5=_0xe09b96();while(!![]){try{const _0x4a8f8f=parseInt(_0xeb0190(0x118))/0x1*(-parseInt(_0xeb0190(0xfd))/0x2)+parseInt(_0xeb0190(0x125))/0x3*(-parseInt(_0xeb0190(0xee))/0x4)+parseInt(_0xeb0190(0xf1))/0x5*(-parseInt(_0xeb0190(0x12f))/0x6)+parseInt(_0xeb0190(0xf0))/0x7*(-parseInt(_0xeb0190(0x108))/0x8)+-parseInt(_0xeb0190(0x12b))/0x9*(-parseInt(_0xeb0190(0x11a))/0xa)+-parseInt(_0xeb0190(0xed))/0xb+parseInt(_0xeb0190(0x135))/0xc*(parseInt(_0xeb0190(0xfc))/0xd);if(_0x4a8f8f===_0x2e1a4d)break;else _0x5941c5['push'](_0x5941c5['shift']());}catch(_0x140a5f){_0x5941c5['push'](_0x5941c5['shift']());}}}(a183_0x2bb6,0x762b6));const a183_0x4f8416=(function(){let _0x1a5e06=!![];return function(_0x4aaeeb,_0x405a6c){const _0x237ae9=_0x1a5e06?function(){const _0x16e0a2=a183_0x2297;if(_0x405a6c){const _0x10670a=_0x405a6c[_0x16e0a2(0xfa)](_0x4aaeeb,arguments);return _0x405a6c=null,_0x10670a;}}:function(){};return _0x1a5e06=![],_0x237ae9;};}()),a183_0x4913e9=a183_0x4f8416(this,function(){const _0x44a035=a183_0x2297;return a183_0x4913e9[_0x44a035(0x10b)]()[_0x44a035(0x122)](_0x44a035(0x13f))[_0x44a035(0x10b)]()['constructor'](a183_0x4913e9)[_0x44a035(0x122)]('(((.+)+)+)+$');});a183_0x4913e9();'use strict';function a183_0x2297(_0xee3ce7,_0x16c683){const _0x4e2722=a183_0x2bb6();return a183_0x2297=function(_0x4913e9,_0x4f8416){_0x4913e9=_0x4913e9-0xec;let _0x2bb6fc=_0x4e2722[_0x4913e9];return _0x2bb6fc;},a183_0x2297(_0xee3ce7,_0x16c683);}function a183_0x2bb6(){const _0x114c7a=['CommitComponentsDto','CommitComponentsJob','[INFO]\x20Update\x20remote\x20state.','decorate','63wjSPZg','__decorate','retrieveAttachment','getComponentsFromRepository','36otbwru','SalesforceLogger2','updateLastCommit','branchId','name','run','39896436ccpDYz','__metadata','provider','sha','checkSyncStatus','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','sfLogger','syncData','repositoryId','repository','(((.+)+)+)+$','create','gitUrl','send','Sync\x20repository',']\x20[Branch:\x20','[INFO]\x20Branch\x20synchronized.\x20Skip','4793547nBvnHe','155016BLzTWZ','metadata','7tEYITv','759440TlSrfL','lastCommit','../../salesforce/services/salesforce-retriever.service','SalesforceSyncService','getBranchComponents','commitJob','salesforceService','branch','../../salesforce/services/salesforce-sync.service','apply','../../salesforce/services/salesforce.service','13pvxMPk','66146EsgpJx','branchName','In\x20Progress','FlosumSyncJob','design:paramtypes','defineProperty','log','../../salesforce/services/salesforce-logger-v2.service','then','../../../constants','[INFO]\x20Sync\x20job\x20done.','2602384PJpurw','getComponentIds','repo','toString','SalesforceRetrieverService','salesforceSync','components','catch','convertToSFDX','getComponents','updateRemoteState','logger','length','typedi','branches','getOwnPropertyDescriptor','29EcUbxN','SalesforceService','310190Anmcwf','setStatus','getOne','Logger','object','function','parse','../../../core','search','getPrefix','DEFAULT_GIT_USER_EMAIL','33JLDpKI','getCommitDto'];a183_0x2bb6=function(){return _0x114c7a;};return a183_0x2bb6();}var __decorate=this&&this[a183_0x481b15(0x12c)]||function(_0x218b1f,_0xb0d69c,_0x37695a,_0x50c712){const _0x223d1d=a183_0x481b15;var _0x55dd37=arguments[_0x223d1d(0x114)],_0x30bf1d=_0x55dd37<0x3?_0xb0d69c:_0x50c712===null?_0x50c712=Object[_0x223d1d(0x117)](_0xb0d69c,_0x37695a):_0x50c712,_0x25c180;if(typeof Reflect===_0x223d1d(0x11e)&&typeof Reflect[_0x223d1d(0x12a)]===_0x223d1d(0x11f))_0x30bf1d=Reflect[_0x223d1d(0x12a)](_0x218b1f,_0xb0d69c,_0x37695a,_0x50c712);else{for(var _0x49e9fb=_0x218b1f[_0x223d1d(0x114)]-0x1;_0x49e9fb>=0x0;_0x49e9fb--)if(_0x25c180=_0x218b1f[_0x49e9fb])_0x30bf1d=(_0x55dd37<0x3?_0x25c180(_0x30bf1d):_0x55dd37>0x3?_0x25c180(_0xb0d69c,_0x37695a,_0x30bf1d):_0x25c180(_0xb0d69c,_0x37695a))||_0x30bf1d;}return _0x55dd37>0x3&&_0x30bf1d&&Object[_0x223d1d(0x102)](_0xb0d69c,_0x37695a,_0x30bf1d),_0x30bf1d;},__metadata=this&&this[a183_0x481b15(0x136)]||function(_0xb98415,_0x4751bb){const _0xf16b2a=a183_0x481b15;if(typeof Reflect===_0xf16b2a(0x11e)&&typeof Reflect[_0xf16b2a(0xef)]==='function')return Reflect[_0xf16b2a(0xef)](_0xb98415,_0x4751bb);},FlosumSyncJob_1;Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a183_0x481b15(0x100)]=void 0x0;const core_1=require(a183_0x481b15(0x121)),salesforce_logger_v2_service_1=require(a183_0x481b15(0x104)),typedi_1=require(a183_0x481b15(0x115)),constants_1=require(a183_0x481b15(0x106)),salesforce_retriever_service_1=require(a183_0x481b15(0xf3)),salesforce_sync_service_1=require(a183_0x481b15(0xf9)),salesforce_service_1=require(a183_0x481b15(0xfb)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x16465b,_0x39e7d5,_0x5aaef5){const _0x1b5452=a183_0x481b15;this['salesforceSync']=_0x16465b,this['salesforceService']=_0x39e7d5,this['commitJob']=_0x5aaef5,this[_0x1b5452(0x113)]=new core_1[(_0x1b5452(0x11d))](FlosumSyncJob_1[_0x1b5452(0x133)]);}[a183_0x481b15(0x103)](_0x4d103e){const _0x46426c=a183_0x481b15;return this[_0x46426c(0x13b)]['log']('[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x46426c(0x13c)]['repositoryName']+_0x46426c(0x144)+this[_0x46426c(0x13c)]['branchName']+']\x20'+_0x4d103e);}async['createBranchIfNotExists'](){const _0x52bd6a=a183_0x481b15;let _0x2a44d8=await this[_0x52bd6a(0x13e)][_0x52bd6a(0x116)]['getOne'](this['syncData'][_0x52bd6a(0xfe)])[_0x52bd6a(0x10f)](()=>null);!_0x2a44d8&&(_0x2a44d8=await this[_0x52bd6a(0x13e)]['branches'][_0x52bd6a(0x140)]({'name':this['syncData']['branchName']})),this[_0x52bd6a(0xf8)]=_0x2a44d8;}async['getComponentIds'](){const _0x1ae511=a183_0x481b15;return this['syncData'][_0x1ae511(0x13d)]?this[_0x1ae511(0x10d)][_0x1ae511(0x12e)](this['syncData'][_0x1ae511(0x13d)]):this['salesforceSync'][_0x1ae511(0xf5)](this[_0x1ae511(0x13c)][_0x1ae511(0x132)]);}async[a183_0x481b15(0x111)](){const _0x1c97a5=a183_0x481b15,_0x1cff15=await this[_0x1c97a5(0x109)](),_0x2b994d=new salesforce_retriever_service_1[(_0x1c97a5(0x10c))](this[_0x1c97a5(0xf7)]),_0x426144=await _0x2b994d['run'](_0x1cff15);return _0x426144;}async[a183_0x481b15(0x126)](_0x99976c){const _0x393df8=a183_0x481b15,_0x323ae8=new commit_components_dto_1[(_0x393df8(0x127))]();return _0x323ae8['message']=_0x393df8(0x143),_0x323ae8['user']={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x393df8(0x124)]},_0x323ae8[_0x393df8(0x10e)]={'writed':await this[_0x393df8(0x111)]()},_0x323ae8[_0x393df8(0x110)]=_0x99976c,_0x323ae8[_0x393df8(0x10a)]=this['repository'],_0x323ae8[_0x393df8(0xf8)]=this[_0x393df8(0xf8)],_0x323ae8['force']=!![],_0x323ae8['provider']=this[_0x393df8(0x137)],_0x323ae8;}async[a183_0x481b15(0x139)](){const _0x21df9c=a183_0x481b15,_0x2a8575=await this[_0x21df9c(0x10d)]['getRemoteStateAttachmentId'](this[_0x21df9c(0x13c)]),_0x5b2c55=await this[_0x21df9c(0xf7)][_0x21df9c(0x12d)](_0x2a8575)[_0x21df9c(0x105)](_0x4ebd88=>typeof _0x4ebd88==='string'?JSON[_0x21df9c(0x120)](_0x4ebd88):_0x4ebd88)[_0x21df9c(0x10f)](()=>({}));if(_0x5b2c55[this[_0x21df9c(0x13e)][_0x21df9c(0x141)]]){if(_0x5b2c55[this[_0x21df9c(0x13e)][_0x21df9c(0x141)]][_0x21df9c(0xf2)]===this[_0x21df9c(0xf8)][_0x21df9c(0x138)])return!![];}return![];}async[a183_0x481b15(0x131)](){const _0x462def=a183_0x481b15,_0x4790a2=await this[_0x462def(0x13e)][_0x462def(0x116)][_0x462def(0x11c)](this[_0x462def(0xf8)][_0x462def(0x133)]);await this[_0x462def(0x103)](_0x462def(0x129));const _0xf5e8c9={[this[_0x462def(0x13e)][_0x462def(0x141)]]:{'lastCommit':_0x4790a2['sha']}};await this[_0x462def(0x10d)][_0x462def(0x112)](this['syncData'],_0xf5e8c9);}async[a183_0x481b15(0x134)]({syncRecord:_0x1409f4,repository:_0x3fdb21,logger:_0x31422d,convertToSFDX:_0x2241b0,provider:_0x1301d9}){const _0x5750d3=a183_0x481b15;this[_0x5750d3(0x13c)]=_0x1409f4,this[_0x5750d3(0x137)]=_0x1301d9,this[_0x5750d3(0x13e)]=_0x3fdb21,this[_0x5750d3(0x13b)]=new salesforce_logger_v2_service_1[(_0x5750d3(0x130))](_0x31422d['getLoggerId'](),_0x31422d[_0x5750d3(0x123)]()+_0x5750d3(0x13a)+this[_0x5750d3(0x13c)]['repositoryName']+_0x5750d3(0x144)+this[_0x5750d3(0x13c)][_0x5750d3(0xfe)]+']');try{await this[_0x5750d3(0x10d)]['setStatus'](this[_0x5750d3(0x13c)],_0x5750d3(0xff)),this[_0x5750d3(0x103)]('[INFO]\x20Start\x20sync\x20job'),await this['createBranchIfNotExists']();const _0x2bbdb3=await this['checkSyncStatus']();if(_0x2bbdb3){await this['salesforceSync'][_0x5750d3(0x11b)](this[_0x5750d3(0x13c)],'Completed'),await this[_0x5750d3(0x103)](_0x5750d3(0xec))['send']();return;}const _0xfc5f96=await this[_0x5750d3(0x126)](_0x2241b0);await this[_0x5750d3(0xf6)][_0x5750d3(0x134)](_0xfc5f96,this[_0x5750d3(0x13b)]),await this[_0x5750d3(0x10d)]['setStatus'](this[_0x5750d3(0x13c)],'Completed'),await this[_0x5750d3(0x131)](),this[_0x5750d3(0x103)](_0x5750d3(0x107));}catch(_0x389d32){throw _0x389d32;}finally{await this[_0x5750d3(0x13b)][_0x5750d3(0x142)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a183_0x481b15(0x101),[salesforce_sync_service_1[a183_0x481b15(0xf4)],salesforce_service_1[a183_0x481b15(0x119)],commit_components_job_1[a183_0x481b15(0x128)]])],FlosumSyncJob),exports[a183_0x481b15(0x100)]=FlosumSyncJob;