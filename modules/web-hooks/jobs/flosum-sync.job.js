const a183_0x494786=a183_0x2995;(function(_0x36359f,_0x25e3f3){const _0x1ce84f=a183_0x2995,_0x34c041=_0x36359f();while(!![]){try{const _0x84af05=-parseInt(_0x1ce84f(0x160))/0x1*(-parseInt(_0x1ce84f(0x176))/0x2)+-parseInt(_0x1ce84f(0x15a))/0x3*(parseInt(_0x1ce84f(0x17f))/0x4)+-parseInt(_0x1ce84f(0x163))/0x5+parseInt(_0x1ce84f(0x145))/0x6+-parseInt(_0x1ce84f(0x16d))/0x7+-parseInt(_0x1ce84f(0x15c))/0x8*(parseInt(_0x1ce84f(0x173))/0x9)+parseInt(_0x1ce84f(0x174))/0xa;if(_0x84af05===_0x25e3f3)break;else _0x34c041['push'](_0x34c041['shift']());}catch(_0x4d583c){_0x34c041['push'](_0x34c041['shift']());}}}(a183_0x50fd,0x26988));const a183_0x1259fb=(function(){let _0x3a2787=!![];return function(_0x50c679,_0xdafa){const _0x3574fa=_0x3a2787?function(){const _0x2c46c6=a183_0x2995;if(_0xdafa){const _0xc882fa=_0xdafa[_0x2c46c6(0x192)](_0x50c679,arguments);return _0xdafa=null,_0xc882fa;}}:function(){};return _0x3a2787=![],_0x3574fa;};}()),a183_0x171e33=a183_0x1259fb(this,function(){const _0x3e0bed=a183_0x2995;return a183_0x171e33[_0x3e0bed(0x168)]()['search'](_0x3e0bed(0x175))['toString']()[_0x3e0bed(0x18a)](a183_0x171e33)[_0x3e0bed(0x15f)](_0x3e0bed(0x175));});a183_0x171e33();function a183_0x2995(_0x15b9dc,_0x3625a5){const _0x1d0ab3=a183_0x50fd();return a183_0x2995=function(_0x171e33,_0x1259fb){_0x171e33=_0x171e33-0x13b;let _0x50fdae=_0x1d0ab3[_0x171e33];return _0x50fdae;},a183_0x2995(_0x15b9dc,_0x3625a5);}'use strict';function a183_0x50fd(){const _0x52debf=['sfLogger','parse','search','851WcJIov','SalesforceService','createBranchIfNotExists','606165ZFfSVE','checkSyncStatus','getComponentsFromRepository','force','commitJob','toString','run','getPrefix','then','gitUrl','258405urUvpO','function','name','[INFO]\x20Update\x20remote\x20state.','__metadata','message','147564OLCMjb','5042390VGdaDD','(((.+)+)+)+$','76GYQaIA','Logger','getRemoteStateAttachmentId','object','SalesforceLogger2','Sync\x20repository',']\x20[Branch:\x20','length','setStatus','1556UCcUqv','repository','provider','getComponents','convertToSFDX','[INFO]\x20Branch\x20synchronized.\x20Skip','salesforceService','string','__esModule','send','components','constructor','decorate','[INFO]\x20Start\x20sync\x20job','../../salesforce/services/salesforce-retriever.service','getOwnPropertyDescriptor','log','SalesforceSyncService','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','apply','getCommitDto','../../salesforce/services/salesforce.service','branches','In\x20Progress','repo','create','DEFAULT_GIT_USER_EMAIL','getLoggerId','lastCommit','branchName','../../salesforce/services/salesforce-logger-v2.service','1139238QdcMtK','updateLastCommit','__decorate','salesforceSync','syncData','Service','repositoryId','SalesforceRetrieverService','CommitComponentsDto','user','defineProperty','metadata','getBranchComponents','retrieveAttachment','[INFO]\x20Sync\x20job\x20done.','FlosumSyncJob','getOne','updateRemoteState','branch','repositoryName','Completed','1014hNqCnX','sha','136uaDJyC'];a183_0x50fd=function(){return _0x52debf;};return a183_0x50fd();}var __decorate=this&&this[a183_0x494786(0x147)]||function(_0x53e146,_0x3c4a75,_0x766691,_0x4b742c){const _0x51942f=a183_0x494786;var _0x3890ba=arguments[_0x51942f(0x17d)],_0x4e9313=_0x3890ba<0x3?_0x3c4a75:_0x4b742c===null?_0x4b742c=Object[_0x51942f(0x18e)](_0x3c4a75,_0x766691):_0x4b742c,_0x46ee72;if(typeof Reflect==='object'&&typeof Reflect[_0x51942f(0x18b)]===_0x51942f(0x16e))_0x4e9313=Reflect[_0x51942f(0x18b)](_0x53e146,_0x3c4a75,_0x766691,_0x4b742c);else{for(var _0x47861e=_0x53e146[_0x51942f(0x17d)]-0x1;_0x47861e>=0x0;_0x47861e--)if(_0x46ee72=_0x53e146[_0x47861e])_0x4e9313=(_0x3890ba<0x3?_0x46ee72(_0x4e9313):_0x3890ba>0x3?_0x46ee72(_0x3c4a75,_0x766691,_0x4e9313):_0x46ee72(_0x3c4a75,_0x766691))||_0x4e9313;}return _0x3890ba>0x3&&_0x4e9313&&Object[_0x51942f(0x14f)](_0x3c4a75,_0x766691,_0x4e9313),_0x4e9313;},__metadata=this&&this[a183_0x494786(0x171)]||function(_0x47a177,_0x45f29d){const _0xc704bb=a183_0x494786;if(typeof Reflect===_0xc704bb(0x179)&&typeof Reflect[_0xc704bb(0x150)]===_0xc704bb(0x16e))return Reflect[_0xc704bb(0x150)](_0x47a177,_0x45f29d);},FlosumSyncJob_1;Object[a183_0x494786(0x14f)](exports,a183_0x494786(0x187),{'value':!![]}),exports[a183_0x494786(0x154)]=void 0x0;const core_1=require('../../../core'),salesforce_logger_v2_service_1=require(a183_0x494786(0x144)),typedi_1=require('typedi'),constants_1=require('../../../constants'),salesforce_retriever_service_1=require(a183_0x494786(0x18d)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a183_0x494786(0x13b)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x4b8087,_0x22da9c,_0x4aafd5){const _0x56b925=a183_0x494786;this[_0x56b925(0x148)]=_0x4b8087,this[_0x56b925(0x185)]=_0x22da9c,this[_0x56b925(0x167)]=_0x4aafd5,this['logger']=new core_1[(_0x56b925(0x177))](FlosumSyncJob_1[_0x56b925(0x16f)]);}[a183_0x494786(0x18f)](_0x5aa384){const _0x500f71=a183_0x494786;return this[_0x500f71(0x15d)]['log']('[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x500f71(0x149)][_0x500f71(0x158)]+']\x20[Branch:\x20'+this[_0x500f71(0x149)]['branchName']+']\x20'+_0x5aa384);}async[a183_0x494786(0x162)](){const _0x2c235d=a183_0x494786;let _0xf3ce0a=await this[_0x2c235d(0x180)][_0x2c235d(0x13c)][_0x2c235d(0x155)](this[_0x2c235d(0x149)][_0x2c235d(0x143)])['catch'](()=>null);!_0xf3ce0a&&(_0xf3ce0a=await this['repository'][_0x2c235d(0x13c)][_0x2c235d(0x13f)]({'name':this[_0x2c235d(0x149)][_0x2c235d(0x143)]})),this[_0x2c235d(0x157)]=_0xf3ce0a;}async['getComponentIds'](){const _0x3e9535=a183_0x494786;return this[_0x3e9535(0x149)][_0x3e9535(0x14b)]?this[_0x3e9535(0x148)][_0x3e9535(0x165)](this[_0x3e9535(0x149)][_0x3e9535(0x14b)]):this['salesforceSync'][_0x3e9535(0x151)](this[_0x3e9535(0x149)]['branchId']);}async['getComponents'](){const _0x5bfb23=a183_0x494786,_0x3ccad0=await this['getComponentIds'](),_0x28f675=new salesforce_retriever_service_1[(_0x5bfb23(0x14c))](this[_0x5bfb23(0x185)]),_0x2cebb2=await _0x28f675[_0x5bfb23(0x169)](_0x3ccad0);return _0x2cebb2;}async[a183_0x494786(0x193)](_0x3e4ebf){const _0x1af713=a183_0x494786,_0x56d156=new commit_components_dto_1[(_0x1af713(0x14d))]();return _0x56d156[_0x1af713(0x172)]=_0x1af713(0x17b),_0x56d156[_0x1af713(0x14e)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x1af713(0x140)]},_0x56d156[_0x1af713(0x189)]={'writed':await this[_0x1af713(0x182)]()},_0x56d156[_0x1af713(0x183)]=_0x3e4ebf,_0x56d156[_0x1af713(0x13e)]=this[_0x1af713(0x180)],_0x56d156[_0x1af713(0x157)]=this[_0x1af713(0x157)],_0x56d156[_0x1af713(0x166)]=!![],_0x56d156[_0x1af713(0x181)]=this['provider'],_0x56d156;}async[a183_0x494786(0x164)](){const _0x5f15ba=a183_0x494786,_0x530e7d=await this[_0x5f15ba(0x148)][_0x5f15ba(0x178)](this[_0x5f15ba(0x149)]),_0x2249ad=await this[_0x5f15ba(0x185)][_0x5f15ba(0x152)](_0x530e7d)[_0x5f15ba(0x16b)](_0x5d404f=>typeof _0x5d404f===_0x5f15ba(0x186)?JSON[_0x5f15ba(0x15e)](_0x5d404f):_0x5d404f)['catch'](()=>({}));if(_0x2249ad[this['repository'][_0x5f15ba(0x16c)]]){if(_0x2249ad[this[_0x5f15ba(0x180)]['gitUrl']][_0x5f15ba(0x142)]===this[_0x5f15ba(0x157)][_0x5f15ba(0x15b)])return!![];}return![];}async[a183_0x494786(0x146)](){const _0xe1c13d=a183_0x494786,_0x589494=await this[_0xe1c13d(0x180)][_0xe1c13d(0x13c)][_0xe1c13d(0x155)](this['branch'][_0xe1c13d(0x16f)]);await this['log'](_0xe1c13d(0x170));const _0xf8d5fc={[this[_0xe1c13d(0x180)][_0xe1c13d(0x16c)]]:{'lastCommit':_0x589494[_0xe1c13d(0x15b)]}};await this['salesforceSync'][_0xe1c13d(0x156)](this[_0xe1c13d(0x149)],_0xf8d5fc);}async[a183_0x494786(0x169)]({syncRecord:_0x1fe602,repository:_0xf62823,logger:_0x5aa557,convertToSFDX:_0xd6aa36,provider:_0xe8160e}){const _0x4188d0=a183_0x494786;this['syncData']=_0x1fe602,this[_0x4188d0(0x181)]=_0xe8160e,this[_0x4188d0(0x180)]=_0xf62823,this[_0x4188d0(0x15d)]=new salesforce_logger_v2_service_1[(_0x4188d0(0x17a))](_0x5aa557[_0x4188d0(0x141)](),_0x5aa557[_0x4188d0(0x16a)]()+_0x4188d0(0x191)+this['syncData']['repositoryName']+_0x4188d0(0x17c)+this['syncData'][_0x4188d0(0x143)]+']');try{await this[_0x4188d0(0x148)][_0x4188d0(0x17e)](this[_0x4188d0(0x149)],_0x4188d0(0x13d)),this['log'](_0x4188d0(0x18c)),await this[_0x4188d0(0x162)]();const _0x207d43=await this['checkSyncStatus']();if(_0x207d43){await this[_0x4188d0(0x148)][_0x4188d0(0x17e)](this[_0x4188d0(0x149)],'Completed'),await this['log'](_0x4188d0(0x184))[_0x4188d0(0x188)]();return;}const _0x3f00dd=await this[_0x4188d0(0x193)](_0xd6aa36);await this[_0x4188d0(0x167)][_0x4188d0(0x169)](_0x3f00dd,this[_0x4188d0(0x15d)]),await this['salesforceSync']['setStatus'](this[_0x4188d0(0x149)],_0x4188d0(0x159)),await this[_0x4188d0(0x146)](),this['log'](_0x4188d0(0x153));}catch(_0x5384ea){throw _0x5384ea;}finally{await this[_0x4188d0(0x15d)][_0x4188d0(0x188)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x494786(0x14a)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a183_0x494786(0x190)],salesforce_service_1[a183_0x494786(0x161)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a183_0x494786(0x154)]=FlosumSyncJob;