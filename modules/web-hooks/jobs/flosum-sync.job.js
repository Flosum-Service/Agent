const a183_0x4d211b=a183_0x1e0a;(function(_0x1cd163,_0x5322ce){const _0x571dd3=a183_0x1e0a,_0x4b5ef7=_0x1cd163();while(!![]){try{const _0x162df7=-parseInt(_0x571dd3(0x235))/0x1+parseInt(_0x571dd3(0x200))/0x2*(-parseInt(_0x571dd3(0x22d))/0x3)+parseInt(_0x571dd3(0x222))/0x4+parseInt(_0x571dd3(0x1fb))/0x5*(-parseInt(_0x571dd3(0x214))/0x6)+parseInt(_0x571dd3(0x211))/0x7+-parseInt(_0x571dd3(0x1ea))/0x8+parseInt(_0x571dd3(0x20d))/0x9*(parseInt(_0x571dd3(0x20a))/0xa);if(_0x162df7===_0x5322ce)break;else _0x4b5ef7['push'](_0x4b5ef7['shift']());}catch(_0x5ed7de){_0x4b5ef7['push'](_0x4b5ef7['shift']());}}}(a183_0x2aff,0x49b45));const a183_0x288a55=(function(){let _0x1ded23=!![];return function(_0x105976,_0x4c8132){const _0x38b71e=_0x1ded23?function(){const _0x290331=a183_0x1e0a;if(_0x4c8132){const _0x2912db=_0x4c8132[_0x290331(0x1fe)](_0x105976,arguments);return _0x4c8132=null,_0x2912db;}}:function(){};return _0x1ded23=![],_0x38b71e;};}()),a183_0x34fc63=a183_0x288a55(this,function(){const _0x3dda64=a183_0x1e0a;return a183_0x34fc63[_0x3dda64(0x1fd)]()[_0x3dda64(0x1ed)](_0x3dda64(0x1ec))[_0x3dda64(0x1fd)]()['constructor'](a183_0x34fc63)[_0x3dda64(0x1ed)](_0x3dda64(0x1ec));});a183_0x34fc63();'use strict';var __decorate=this&&this[a183_0x4d211b(0x21f)]||function(_0x1836dc,_0x33f820,_0xc18577,_0x46bea5){const _0x183682=a183_0x4d211b;var _0x35d670=arguments[_0x183682(0x21e)],_0x3417df=_0x35d670<0x3?_0x33f820:_0x46bea5===null?_0x46bea5=Object[_0x183682(0x203)](_0x33f820,_0xc18577):_0x46bea5,_0x11dd7d;if(typeof Reflect===_0x183682(0x207)&&typeof Reflect['decorate']==='function')_0x3417df=Reflect[_0x183682(0x22e)](_0x1836dc,_0x33f820,_0xc18577,_0x46bea5);else{for(var _0x4ba439=_0x1836dc['length']-0x1;_0x4ba439>=0x0;_0x4ba439--)if(_0x11dd7d=_0x1836dc[_0x4ba439])_0x3417df=(_0x35d670<0x3?_0x11dd7d(_0x3417df):_0x35d670>0x3?_0x11dd7d(_0x33f820,_0xc18577,_0x3417df):_0x11dd7d(_0x33f820,_0xc18577))||_0x3417df;}return _0x35d670>0x3&&_0x3417df&&Object[_0x183682(0x20f)](_0x33f820,_0xc18577,_0x3417df),_0x3417df;},__metadata=this&&this[a183_0x4d211b(0x21b)]||function(_0x7bdd1e,_0x5d53df){const _0x466ee9=a183_0x4d211b;if(typeof Reflect==='object'&&typeof Reflect[_0x466ee9(0x1fc)]===_0x466ee9(0x233))return Reflect[_0x466ee9(0x1fc)](_0x7bdd1e,_0x5d53df);},FlosumSyncJob_1;Object[a183_0x4d211b(0x20f)](exports,a183_0x4d211b(0x1ff),{'value':!![]}),exports[a183_0x4d211b(0x218)]=void 0x0;function a183_0x2aff(){const _0x47ff56=['232468LfapSR','DEFAULT_GIT_USER_EMAIL','commitJob','getCommitDto','logger','SalesforceRetrieverService','typedi','../dto/commit-components.dto','provider','SalesforceLogger2','getBranchComponents','19797VyQCSS','decorate','getComponentIds','branchName','updateLastCommit','../../salesforce/services/salesforce-sync.service','function','gitUrl','198031LkEyUg','Sync\x20repository','branches','syncData','salesforceSync','174488ZvhpBK','string','(((.+)+)+)+$','search','Service','DEFAULT_GIT_USER_NAME','log','updateRemoteState','checkSyncStatus','parse','branch','In\x20Progress','getOne','getComponents','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','message','Logger','245oiPPnv','metadata','toString','apply','__esModule','10AYtwhz','send','createBranchIfNotExists','getOwnPropertyDescriptor','repository','../../salesforce/services/salesforce-logger-v2.service','../../../constants','object','then',']\x20[Branch:\x20','1172240klgwwu','../../../core','sha','63sWimSD','user','defineProperty','Completed','1107092taknFP','[INFO]\x20Update\x20remote\x20state.','name','59034uVirid','CommitComponentsDto','salesforceService','branchId','FlosumSyncJob','sfLogger','setStatus','__metadata','../../salesforce/services/salesforce-retriever.service','[INFO]\x20Start\x20sync\x20job','length','__decorate','SalesforceService','run'];a183_0x2aff=function(){return _0x47ff56;};return a183_0x2aff();}const core_1=require(a183_0x4d211b(0x20b)),salesforce_logger_v2_service_1=require(a183_0x4d211b(0x205)),typedi_1=require(a183_0x4d211b(0x228)),constants_1=require(a183_0x4d211b(0x206)),salesforce_retriever_service_1=require(a183_0x4d211b(0x21c)),salesforce_sync_service_1=require(a183_0x4d211b(0x232)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a183_0x4d211b(0x229)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x13d616,_0x311039,_0x353fb3){const _0xb7c62f=a183_0x4d211b;this[_0xb7c62f(0x1e9)]=_0x13d616,this['salesforceService']=_0x311039,this['commitJob']=_0x353fb3,this[_0xb7c62f(0x226)]=new core_1[(_0xb7c62f(0x1fa))](FlosumSyncJob_1[_0xb7c62f(0x213)]);}[a183_0x4d211b(0x1f0)](_0x25a585){const _0x2e19bc=a183_0x4d211b;return this[_0x2e19bc(0x219)][_0x2e19bc(0x1f0)](_0x2e19bc(0x1f8)+this[_0x2e19bc(0x1e8)]['repositoryName']+_0x2e19bc(0x209)+this[_0x2e19bc(0x1e8)]['branchName']+']\x20'+_0x25a585);}async[a183_0x4d211b(0x202)](){const _0x1c6842=a183_0x4d211b;let _0x31cd3c=await this[_0x1c6842(0x204)][_0x1c6842(0x237)][_0x1c6842(0x1f6)](this[_0x1c6842(0x1e8)][_0x1c6842(0x230)])['catch'](()=>null);!_0x31cd3c&&(_0x31cd3c=await this[_0x1c6842(0x204)][_0x1c6842(0x237)]['create']({'name':this[_0x1c6842(0x1e8)][_0x1c6842(0x230)]})),this[_0x1c6842(0x1f4)]=_0x31cd3c;}async[a183_0x4d211b(0x22f)](){const _0x22280c=a183_0x4d211b;return this[_0x22280c(0x1e8)]['repositoryId']?this[_0x22280c(0x1e9)]['getComponentsFromRepository'](this[_0x22280c(0x1e8)]['repositoryId']):this['salesforceSync'][_0x22280c(0x22c)](this[_0x22280c(0x1e8)][_0x22280c(0x217)]);}async[a183_0x4d211b(0x1f7)](){const _0x2d1b08=a183_0x4d211b,_0x281c6d=await this[_0x2d1b08(0x22f)](),_0x13babd=new salesforce_retriever_service_1[(_0x2d1b08(0x227))](this[_0x2d1b08(0x216)]),_0x5205f5=await _0x13babd[_0x2d1b08(0x221)](_0x281c6d);return _0x5205f5;}async['getCommitDto'](_0xabbd09){const _0x2bf5d4=a183_0x4d211b,_0xac8523=new commit_components_dto_1[(_0x2bf5d4(0x215))]();return _0xac8523[_0x2bf5d4(0x1f9)]=_0x2bf5d4(0x236),_0xac8523[_0x2bf5d4(0x20e)]={'name':constants_1[_0x2bf5d4(0x1ef)],'email':constants_1[_0x2bf5d4(0x223)]},_0xac8523['components']={'writed':await this[_0x2bf5d4(0x1f7)]()},_0xac8523['convertToSFDX']=_0xabbd09,_0xac8523['repo']=this[_0x2bf5d4(0x204)],_0xac8523[_0x2bf5d4(0x1f4)]=this[_0x2bf5d4(0x1f4)],_0xac8523['force']=!![],_0xac8523['provider']=this[_0x2bf5d4(0x22a)],_0xac8523;}async[a183_0x4d211b(0x1f2)](){const _0x42879b=a183_0x4d211b,_0x264ceb=await this['salesforceSync']['getRemoteStateAttachmentId'](this[_0x42879b(0x1e8)]),_0x2db262=await this[_0x42879b(0x216)]['retrieveAttachment'](_0x264ceb)[_0x42879b(0x208)](_0x37b313=>typeof _0x37b313===_0x42879b(0x1eb)?JSON[_0x42879b(0x1f3)](_0x37b313):_0x37b313)['catch'](()=>({}));if(_0x2db262[this[_0x42879b(0x204)][_0x42879b(0x234)]]){if(_0x2db262[this[_0x42879b(0x204)][_0x42879b(0x234)]]['lastCommit']===this['branch'][_0x42879b(0x20c)])return!![];}return![];}async[a183_0x4d211b(0x231)](){const _0x4183c0=a183_0x4d211b,_0x288d26=await this[_0x4183c0(0x204)][_0x4183c0(0x237)][_0x4183c0(0x1f6)](this[_0x4183c0(0x1f4)]['name']);await this[_0x4183c0(0x1f0)](_0x4183c0(0x212));const _0x27d997={[this['repository'][_0x4183c0(0x234)]]:{'lastCommit':_0x288d26[_0x4183c0(0x20c)]}};await this[_0x4183c0(0x1e9)][_0x4183c0(0x1f1)](this[_0x4183c0(0x1e8)],_0x27d997);}async['run']({syncRecord:_0xa9a0e1,repository:_0x5b5c0b,logger:_0xe7636f,convertToSFDX:_0x1ee961,provider:_0x41b22b}){const _0x490a21=a183_0x4d211b;this[_0x490a21(0x1e8)]=_0xa9a0e1,this[_0x490a21(0x22a)]=_0x41b22b,this[_0x490a21(0x204)]=_0x5b5c0b,this[_0x490a21(0x219)]=new salesforce_logger_v2_service_1[(_0x490a21(0x22b))](_0xe7636f['getLoggerId'](),_0xe7636f['getPrefix']()+'\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x490a21(0x1e8)]['repositoryName']+']\x20[Branch:\x20'+this['syncData'][_0x490a21(0x230)]+']');try{await this[_0x490a21(0x1e9)][_0x490a21(0x21a)](this[_0x490a21(0x1e8)],_0x490a21(0x1f5)),this[_0x490a21(0x1f0)](_0x490a21(0x21d)),await this[_0x490a21(0x202)]();const _0x7bb394=await this['checkSyncStatus']();if(_0x7bb394){await this['salesforceSync'][_0x490a21(0x21a)](this[_0x490a21(0x1e8)],_0x490a21(0x210)),await this[_0x490a21(0x1f0)]('[INFO]\x20Branch\x20synchronized.\x20Skip')['send']();return;}const _0x538b46=await this[_0x490a21(0x225)](_0x1ee961);await this[_0x490a21(0x224)][_0x490a21(0x221)](_0x538b46,this['sfLogger']),await this[_0x490a21(0x1e9)]['setStatus'](this[_0x490a21(0x1e8)],_0x490a21(0x210)),await this[_0x490a21(0x231)](),this[_0x490a21(0x1f0)]('[INFO]\x20Sync\x20job\x20done.');}catch(_0x2aec84){throw _0x2aec84;}finally{await this[_0x490a21(0x219)][_0x490a21(0x201)]();}}};function a183_0x1e0a(_0x161aa7,_0x314916){const _0x3ca7c5=a183_0x2aff();return a183_0x1e0a=function(_0x34fc63,_0x288a55){_0x34fc63=_0x34fc63-0x1e8;let _0x2affc8=_0x3ca7c5[_0x34fc63];return _0x2affc8;},a183_0x1e0a(_0x161aa7,_0x314916);}FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x4d211b(0x1ee)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a183_0x4d211b(0x220)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a183_0x4d211b(0x218)]=FlosumSyncJob;