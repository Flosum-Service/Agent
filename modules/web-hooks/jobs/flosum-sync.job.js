const a182_0x2ad8b8=a182_0xac4a;(function(_0x2de675,_0x4e12cb){const _0x442e34=a182_0xac4a,_0x2e7199=_0x2de675();while(!![]){try{const _0x4f0eec=-parseInt(_0x442e34(0x1ac))/0x1+parseInt(_0x442e34(0x18d))/0x2+-parseInt(_0x442e34(0x17a))/0x3*(parseInt(_0x442e34(0x18a))/0x4)+parseInt(_0x442e34(0x1b9))/0x5+parseInt(_0x442e34(0x18b))/0x6+-parseInt(_0x442e34(0x179))/0x7+parseInt(_0x442e34(0x19c))/0x8*(parseInt(_0x442e34(0x16d))/0x9);if(_0x4f0eec===_0x4e12cb)break;else _0x2e7199['push'](_0x2e7199['shift']());}catch(_0x406ab7){_0x2e7199['push'](_0x2e7199['shift']());}}}(a182_0x4a9f,0x385b6));const a182_0x55b192=(function(){let _0x13317c=!![];return function(_0x14cf23,_0x411c03){const _0x3c2ab5=_0x13317c?function(){const _0x36f000=a182_0xac4a;if(_0x411c03){const _0x55edb4=_0x411c03[_0x36f000(0x193)](_0x14cf23,arguments);return _0x411c03=null,_0x55edb4;}}:function(){};return _0x13317c=![],_0x3c2ab5;};}()),a182_0x20356d=a182_0x55b192(this,function(){const _0x55bc85=a182_0xac4a;return a182_0x20356d[_0x55bc85(0x1a5)]()[_0x55bc85(0x1ad)](_0x55bc85(0x182))[_0x55bc85(0x1a5)]()[_0x55bc85(0x19a)](a182_0x20356d)[_0x55bc85(0x1ad)](_0x55bc85(0x182));});a182_0x20356d();function a182_0xac4a(_0x1ad4fe,_0x2751a9){const _0x126cbe=a182_0x4a9f();return a182_0xac4a=function(_0x20356d,_0x55b192){_0x20356d=_0x20356d-0x168;let _0x4a9f45=_0x126cbe[_0x20356d];return _0x4a9f45;},a182_0xac4a(_0x1ad4fe,_0x2751a9);}'use strict';var __decorate=this&&this[a182_0x2ad8b8(0x1bb)]||function(_0x2b53ff,_0x40ccfe,_0xd376dc,_0x1b45d9){const _0xe2ad5a=a182_0x2ad8b8;var _0x3b3823=arguments[_0xe2ad5a(0x190)],_0x42e25e=_0x3b3823<0x3?_0x40ccfe:_0x1b45d9===null?_0x1b45d9=Object['getOwnPropertyDescriptor'](_0x40ccfe,_0xd376dc):_0x1b45d9,_0x4845a2;if(typeof Reflect===_0xe2ad5a(0x180)&&typeof Reflect[_0xe2ad5a(0x1a1)]===_0xe2ad5a(0x1b3))_0x42e25e=Reflect[_0xe2ad5a(0x1a1)](_0x2b53ff,_0x40ccfe,_0xd376dc,_0x1b45d9);else{for(var _0x45ddb2=_0x2b53ff[_0xe2ad5a(0x190)]-0x1;_0x45ddb2>=0x0;_0x45ddb2--)if(_0x4845a2=_0x2b53ff[_0x45ddb2])_0x42e25e=(_0x3b3823<0x3?_0x4845a2(_0x42e25e):_0x3b3823>0x3?_0x4845a2(_0x40ccfe,_0xd376dc,_0x42e25e):_0x4845a2(_0x40ccfe,_0xd376dc))||_0x42e25e;}return _0x3b3823>0x3&&_0x42e25e&&Object[_0xe2ad5a(0x1b8)](_0x40ccfe,_0xd376dc,_0x42e25e),_0x42e25e;},__metadata=this&&this[a182_0x2ad8b8(0x168)]||function(_0x43bcff,_0xb9a883){const _0x1a2778=a182_0x2ad8b8;if(typeof Reflect==='object'&&typeof Reflect[_0x1a2778(0x175)]===_0x1a2778(0x1b3))return Reflect[_0x1a2778(0x175)](_0x43bcff,_0xb9a883);},FlosumSyncJob_1;function a182_0x4a9f(){const _0x1d73a3=['[INFO]\x20Update\x20remote\x20state.','salesforceService','updateRemoteState','getRemoteStateAttachmentId','getOne','metadata','CommitComponentsDto',']\x20[Branch:\x20','getComponentsFromRepository','1669311YmELBz','84573ewYysU','[INFO]\x20Sync\x20job\x20done.','sha','branches','repositoryName','repository','object','Completed','(((.+)+)+)+$','repo','Logger','setStatus','design:paramtypes','./commit-components.job','DEFAULT_GIT_USER_EMAIL','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','4lRCngU','2552838GUoDWd','message','542012upxfrc','[INFO]\x20Start\x20sync\x20job','send','length','components','[INFO]\x20Branch\x20synchronized.\x20Skip','apply','../../salesforce/services/salesforce-retriever.service','DEFAULT_GIT_USER_NAME','salesforceSync','../../../constants','../../../core','Sync\x20repository','constructor','getComponentIds','1093264ViCqeP','sfLogger','lastCommit','Service','string','decorate','SalesforceSyncService','branch','updateLastCommit','toString','log','logger','branchName','user','syncData','createBranchIfNotExists','374179yowLqX','search','run','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','../../salesforce/services/salesforce.service','force','getComponents','function','../../salesforce/services/salesforce-sync.service','name','catch','retrieveAttachment','defineProperty','192720VcVYVQ','then','__decorate','../dto/commit-components.dto','In\x20Progress','parse','getBranchComponents','gitUrl','FlosumSyncJob','__metadata','convertToSFDX','provider','repositoryId','getCommitDto','9MrymIR','checkSyncStatus','SalesforceRetrieverService'];a182_0x4a9f=function(){return _0x1d73a3;};return a182_0x4a9f();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a182_0x2ad8b8(0x1c1)]=void 0x0;const core_1=require(a182_0x2ad8b8(0x198)),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),typedi_1=require('typedi'),constants_1=require(a182_0x2ad8b8(0x197)),salesforce_retriever_service_1=require(a182_0x2ad8b8(0x194)),salesforce_sync_service_1=require(a182_0x2ad8b8(0x1b4)),salesforce_service_1=require(a182_0x2ad8b8(0x1b0)),commit_components_dto_1=require(a182_0x2ad8b8(0x1bc)),commit_components_job_1=require(a182_0x2ad8b8(0x187));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x174743,_0x136170,_0x531968){const _0x1dcacc=a182_0x2ad8b8;this[_0x1dcacc(0x196)]=_0x174743,this[_0x1dcacc(0x171)]=_0x136170,this['commitJob']=_0x531968,this[_0x1dcacc(0x1a7)]=new core_1[(_0x1dcacc(0x184))](FlosumSyncJob_1[_0x1dcacc(0x1b5)]);}['log'](_0x55c663){const _0x469d91=a182_0x2ad8b8;return this[_0x469d91(0x19d)][_0x469d91(0x1a6)](_0x469d91(0x1af)+this['syncData'][_0x469d91(0x17e)]+_0x469d91(0x177)+this[_0x469d91(0x1aa)][_0x469d91(0x1a8)]+']\x20'+_0x55c663);}async[a182_0x2ad8b8(0x1ab)](){const _0x2a8696=a182_0x2ad8b8;let _0x41e8c4=await this['repository'][_0x2a8696(0x17d)][_0x2a8696(0x174)](this[_0x2a8696(0x1aa)][_0x2a8696(0x1a8)])[_0x2a8696(0x1b6)](()=>null);!_0x41e8c4&&(_0x41e8c4=await this[_0x2a8696(0x17f)]['branches']['create']({'name':this[_0x2a8696(0x1aa)][_0x2a8696(0x1a8)]})),this[_0x2a8696(0x1a3)]=_0x41e8c4;}async[a182_0x2ad8b8(0x19b)](){const _0x459d42=a182_0x2ad8b8;return this[_0x459d42(0x1aa)][_0x459d42(0x16b)]?this['salesforceSync'][_0x459d42(0x178)](this[_0x459d42(0x1aa)]['repositoryId']):this[_0x459d42(0x196)][_0x459d42(0x1bf)](this[_0x459d42(0x1aa)]['branchId']);}async[a182_0x2ad8b8(0x1b2)](){const _0x1ff851=a182_0x2ad8b8,_0x4a98c8=await this['getComponentIds'](),_0x55e8e4=new salesforce_retriever_service_1[(_0x1ff851(0x16f))](this[_0x1ff851(0x171)]),_0x15239f=await _0x55e8e4[_0x1ff851(0x1ae)](_0x4a98c8);return _0x15239f;}async[a182_0x2ad8b8(0x16c)](_0x14d87f){const _0x45202b=a182_0x2ad8b8,_0x222bea=new commit_components_dto_1[(_0x45202b(0x176))]();return _0x222bea[_0x45202b(0x18c)]=_0x45202b(0x199),_0x222bea[_0x45202b(0x1a9)]={'name':constants_1[_0x45202b(0x195)],'email':constants_1[_0x45202b(0x188)]},_0x222bea[_0x45202b(0x191)]={'writed':await this[_0x45202b(0x1b2)]()},_0x222bea[_0x45202b(0x169)]=_0x14d87f,_0x222bea[_0x45202b(0x183)]=this['repository'],_0x222bea['branch']=this[_0x45202b(0x1a3)],_0x222bea[_0x45202b(0x1b1)]=!![],_0x222bea['provider']=this[_0x45202b(0x16a)],_0x222bea;}async[a182_0x2ad8b8(0x16e)](){const _0x3577c0=a182_0x2ad8b8,_0x26a021=await this['salesforceSync'][_0x3577c0(0x173)](this['syncData']),_0x255dda=await this['salesforceService'][_0x3577c0(0x1b7)](_0x26a021)[_0x3577c0(0x1ba)](_0x5443df=>typeof _0x5443df===_0x3577c0(0x1a0)?JSON[_0x3577c0(0x1be)](_0x5443df):_0x5443df)['catch'](()=>({}));if(_0x255dda[this[_0x3577c0(0x17f)][_0x3577c0(0x1c0)]]){if(_0x255dda[this[_0x3577c0(0x17f)][_0x3577c0(0x1c0)]][_0x3577c0(0x19e)]===this[_0x3577c0(0x1a3)][_0x3577c0(0x17c)])return!![];}return![];}async['updateLastCommit'](){const _0x257bc5=a182_0x2ad8b8,_0x4cbbbc=await this[_0x257bc5(0x17f)]['branches'][_0x257bc5(0x174)](this[_0x257bc5(0x1a3)][_0x257bc5(0x1b5)]);await this[_0x257bc5(0x1a6)](_0x257bc5(0x170));const _0x11a7d1={[this[_0x257bc5(0x17f)][_0x257bc5(0x1c0)]]:{'lastCommit':_0x4cbbbc[_0x257bc5(0x17c)]}};await this[_0x257bc5(0x196)][_0x257bc5(0x172)](this['syncData'],_0x11a7d1);}async[a182_0x2ad8b8(0x1ae)]({syncRecord:_0xc1617b,repository:_0x561d98,logger:_0x3ba8ca,convertToSFDX:_0x54935b,provider:_0x2c11c8}){const _0x2b3df7=a182_0x2ad8b8;this[_0x2b3df7(0x1aa)]=_0xc1617b,this[_0x2b3df7(0x16a)]=_0x2c11c8,this[_0x2b3df7(0x17f)]=_0x561d98,this['sfLogger']=new salesforce_logger_v2_service_1['SalesforceLogger2'](_0x3ba8ca['getLoggerId'](),_0x3ba8ca['getPrefix']()+_0x2b3df7(0x189)+this['syncData'][_0x2b3df7(0x17e)]+_0x2b3df7(0x177)+this[_0x2b3df7(0x1aa)][_0x2b3df7(0x1a8)]+']');try{await this[_0x2b3df7(0x196)][_0x2b3df7(0x185)](this[_0x2b3df7(0x1aa)],_0x2b3df7(0x1bd)),this[_0x2b3df7(0x1a6)](_0x2b3df7(0x18e)),await this[_0x2b3df7(0x1ab)]();const _0x2b12f2=await this['checkSyncStatus']();if(_0x2b12f2){await this[_0x2b3df7(0x196)][_0x2b3df7(0x185)](this[_0x2b3df7(0x1aa)],_0x2b3df7(0x181)),await this['log'](_0x2b3df7(0x192))['send']();return;}const _0x4c126f=await this[_0x2b3df7(0x16c)](_0x54935b);await this['commitJob'][_0x2b3df7(0x1ae)](_0x4c126f,this['sfLogger']),await this[_0x2b3df7(0x196)][_0x2b3df7(0x185)](this[_0x2b3df7(0x1aa)],_0x2b3df7(0x181)),await this[_0x2b3df7(0x1a4)](),this[_0x2b3df7(0x1a6)](_0x2b3df7(0x17b));}catch(_0x3c208b){throw _0x3c208b;}finally{await this[_0x2b3df7(0x19d)][_0x2b3df7(0x18f)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a182_0x2ad8b8(0x19f)]({'transient':!![]}),__metadata(a182_0x2ad8b8(0x186),[salesforce_sync_service_1[a182_0x2ad8b8(0x1a2)],salesforce_service_1['SalesforceService'],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a182_0x2ad8b8(0x1c1)]=FlosumSyncJob;