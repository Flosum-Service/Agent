const a183_0x2ba677=a183_0x8b63;(function(_0x2b8fdd,_0x347d6a){const _0xe66ad4=a183_0x8b63,_0x425096=_0x2b8fdd();while(!![]){try{const _0x5ecdcf=parseInt(_0xe66ad4(0x182))/0x1+-parseInt(_0xe66ad4(0x167))/0x2+parseInt(_0xe66ad4(0x162))/0x3*(-parseInt(_0xe66ad4(0x195))/0x4)+parseInt(_0xe66ad4(0x164))/0x5*(-parseInt(_0xe66ad4(0x161))/0x6)+parseInt(_0xe66ad4(0x18d))/0x7+parseInt(_0xe66ad4(0x18f))/0x8*(parseInt(_0xe66ad4(0x170))/0x9)+parseInt(_0xe66ad4(0x159))/0xa;if(_0x5ecdcf===_0x347d6a)break;else _0x425096['push'](_0x425096['shift']());}catch(_0x375926){_0x425096['push'](_0x425096['shift']());}}}(a183_0xa9c4,0x719b6));function a183_0xa9c4(){const _0x351337=['then','../../../constants','4074jbYhvz','103965LxtSOQ','../../../core','4435VBhQmI','run','__metadata','1430562BacTQM','Completed','syncData','branches','sfLogger','./commit-components.job','commitJob','create','search','866709piXDFu','defineProperty','gitUrl','repositoryName','updateLastCommit','../dto/commit-components.dto','[INFO]\x20Update\x20remote\x20state.','salesforceService','branchId','repository','[INFO]\x20Start\x20sync\x20job','Logger','getComponentIds','decorate','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','getComponentsFromRepository','send','getCommitDto','698043vrImYH','../../salesforce/services/salesforce-logger-v2.service','branchName','function','branch','provider',']\x20[Branch:\x20','setStatus','retrieveAttachment','Service','salesforceSync','785918dhiKhw','getPrefix','24dtiQzX','getOne','(((.+)+)+)+$','string','log','repo','72QkYvRM','metadata','SalesforceService','message','getOwnPropertyDescriptor','length','lastCommit','[INFO]\x20Branch\x20synchronized.\x20Skip','Sync\x20repository','repositoryId','sha','CommitComponentsJob','name','__decorate','updateRemoteState','getRemoteStateAttachmentId','object','createBranchIfNotExists','logger','13074580HGRzqB','catch','force','user','../../salesforce/services/salesforce-sync.service','getComponents'];a183_0xa9c4=function(){return _0x351337;};return a183_0xa9c4();}const a183_0x39b8ac=(function(){let _0x47bc18=!![];return function(_0x101fc1,_0xd2e1d2){const _0x1e3901=_0x47bc18?function(){if(_0xd2e1d2){const _0x21feea=_0xd2e1d2['apply'](_0x101fc1,arguments);return _0xd2e1d2=null,_0x21feea;}}:function(){};return _0x47bc18=![],_0x1e3901;};}()),a183_0x59274f=a183_0x39b8ac(this,function(){const _0x4bd70b=a183_0x8b63;return a183_0x59274f['toString']()[_0x4bd70b(0x16f)](_0x4bd70b(0x191))['toString']()['constructor'](a183_0x59274f)[_0x4bd70b(0x16f)](_0x4bd70b(0x191));});a183_0x59274f();'use strict';var __decorate=this&&this[a183_0x2ba677(0x153)]||function(_0x5efc33,_0x1e7ed9,_0x317035,_0x583283){const _0x556577=a183_0x2ba677;var _0x18f726=arguments['length'],_0x3030c6=_0x18f726<0x3?_0x1e7ed9:_0x583283===null?_0x583283=Object[_0x556577(0x199)](_0x1e7ed9,_0x317035):_0x583283,_0x4ceef1;if(typeof Reflect===_0x556577(0x156)&&typeof Reflect['decorate']===_0x556577(0x185))_0x3030c6=Reflect[_0x556577(0x17d)](_0x5efc33,_0x1e7ed9,_0x317035,_0x583283);else{for(var _0x4e9319=_0x5efc33[_0x556577(0x19a)]-0x1;_0x4e9319>=0x0;_0x4e9319--)if(_0x4ceef1=_0x5efc33[_0x4e9319])_0x3030c6=(_0x18f726<0x3?_0x4ceef1(_0x3030c6):_0x18f726>0x3?_0x4ceef1(_0x1e7ed9,_0x317035,_0x3030c6):_0x4ceef1(_0x1e7ed9,_0x317035))||_0x3030c6;}return _0x18f726>0x3&&_0x3030c6&&Object[_0x556577(0x171)](_0x1e7ed9,_0x317035,_0x3030c6),_0x3030c6;},__metadata=this&&this[a183_0x2ba677(0x166)]||function(_0x294591,_0x29f6fc){const _0x3664e6=a183_0x2ba677;if(typeof Reflect===_0x3664e6(0x156)&&typeof Reflect['metadata']===_0x3664e6(0x185))return Reflect[_0x3664e6(0x196)](_0x294591,_0x29f6fc);},FlosumSyncJob_1;function a183_0x8b63(_0x2680f0,_0x27e982){const _0x4419c8=a183_0xa9c4();return a183_0x8b63=function(_0x59274f,_0x39b8ac){_0x59274f=_0x59274f-0x153;let _0xa9c4f3=_0x4419c8[_0x59274f];return _0xa9c4f3;},a183_0x8b63(_0x2680f0,_0x27e982);}Object[a183_0x2ba677(0x171)](exports,'__esModule',{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const core_1=require(a183_0x2ba677(0x163)),salesforce_logger_v2_service_1=require(a183_0x2ba677(0x183)),typedi_1=require('typedi'),constants_1=require(a183_0x2ba677(0x160)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a183_0x2ba677(0x15d)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a183_0x2ba677(0x175)),commit_components_job_1=require(a183_0x2ba677(0x16c));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x4b412e,_0x3f7329,_0x5cb5eb){const _0x12613e=a183_0x2ba677;this[_0x12613e(0x18c)]=_0x4b412e,this['salesforceService']=_0x3f7329,this[_0x12613e(0x16d)]=_0x5cb5eb,this[_0x12613e(0x158)]=new core_1[(_0x12613e(0x17b))](FlosumSyncJob_1[_0x12613e(0x1a1)]);}[a183_0x2ba677(0x193)](_0x3d3c90){const _0x53b54f=a183_0x2ba677;return this[_0x53b54f(0x16b)]['log'](_0x53b54f(0x17e)+this['syncData'][_0x53b54f(0x173)]+_0x53b54f(0x188)+this[_0x53b54f(0x169)][_0x53b54f(0x184)]+']\x20'+_0x3d3c90);}async[a183_0x2ba677(0x157)](){const _0x43740e=a183_0x2ba677;let _0x445aa0=await this['repository'][_0x43740e(0x16a)][_0x43740e(0x190)](this['syncData'][_0x43740e(0x184)])['catch'](()=>null);!_0x445aa0&&(_0x445aa0=await this[_0x43740e(0x179)]['branches'][_0x43740e(0x16e)]({'name':this['syncData']['branchName']})),this['branch']=_0x445aa0;}async[a183_0x2ba677(0x17c)](){const _0x4b78ec=a183_0x2ba677;return this[_0x4b78ec(0x169)][_0x4b78ec(0x19e)]?this[_0x4b78ec(0x18c)][_0x4b78ec(0x17f)](this['syncData']['repositoryId']):this[_0x4b78ec(0x18c)]['getBranchComponents'](this[_0x4b78ec(0x169)][_0x4b78ec(0x178)]);}async[a183_0x2ba677(0x15e)](){const _0xe7cc6b=a183_0x2ba677,_0x1e004c=await this[_0xe7cc6b(0x17c)](),_0x2ce385=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0xe7cc6b(0x177)]),_0x22c486=await _0x2ce385[_0xe7cc6b(0x165)](_0x1e004c);return _0x22c486;}async['getCommitDto'](_0x281b81){const _0x4760b7=a183_0x2ba677,_0x356aad=new commit_components_dto_1['CommitComponentsDto']();return _0x356aad[_0x4760b7(0x198)]=_0x4760b7(0x19d),_0x356aad[_0x4760b7(0x15c)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x356aad['components']={'writed':await this['getComponents']()},_0x356aad['convertToSFDX']=_0x281b81,_0x356aad[_0x4760b7(0x194)]=this[_0x4760b7(0x179)],_0x356aad['branch']=this[_0x4760b7(0x186)],_0x356aad[_0x4760b7(0x15b)]=!![],_0x356aad[_0x4760b7(0x187)]=this[_0x4760b7(0x187)],_0x356aad;}async['checkSyncStatus'](){const _0x47d945=a183_0x2ba677,_0x445330=await this[_0x47d945(0x18c)][_0x47d945(0x155)](this['syncData']),_0x108bb7=await this['salesforceService'][_0x47d945(0x18a)](_0x445330)[_0x47d945(0x15f)](_0x15e2f3=>typeof _0x15e2f3===_0x47d945(0x192)?JSON['parse'](_0x15e2f3):_0x15e2f3)[_0x47d945(0x15a)](()=>({}));if(_0x108bb7[this['repository'][_0x47d945(0x172)]]){if(_0x108bb7[this[_0x47d945(0x179)][_0x47d945(0x172)]][_0x47d945(0x19b)]===this[_0x47d945(0x186)][_0x47d945(0x19f)])return!![];}return![];}async[a183_0x2ba677(0x174)](){const _0xe47002=a183_0x2ba677,_0x1d1bd2=await this[_0xe47002(0x179)][_0xe47002(0x16a)][_0xe47002(0x190)](this['branch']['name']);await this[_0xe47002(0x193)](_0xe47002(0x176));const _0x46254a={[this[_0xe47002(0x179)]['gitUrl']]:{'lastCommit':_0x1d1bd2[_0xe47002(0x19f)]}};await this[_0xe47002(0x18c)][_0xe47002(0x154)](this['syncData'],_0x46254a);}async[a183_0x2ba677(0x165)]({syncRecord:_0x423c6a,repository:_0x4096e2,logger:_0x179ce1,convertToSFDX:_0x14636e,provider:_0x3fc280}){const _0x5b2e42=a183_0x2ba677;this[_0x5b2e42(0x169)]=_0x423c6a,this[_0x5b2e42(0x187)]=_0x3fc280,this['repository']=_0x4096e2,this[_0x5b2e42(0x16b)]=new salesforce_logger_v2_service_1['SalesforceLogger2'](_0x179ce1['getLoggerId'](),_0x179ce1[_0x5b2e42(0x18e)]()+'\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x5b2e42(0x169)][_0x5b2e42(0x173)]+']\x20[Branch:\x20'+this[_0x5b2e42(0x169)][_0x5b2e42(0x184)]+']');try{await this[_0x5b2e42(0x18c)][_0x5b2e42(0x189)](this[_0x5b2e42(0x169)],'In\x20Progress'),this['log'](_0x5b2e42(0x17a)),await this[_0x5b2e42(0x157)]();const _0xbb756d=await this['checkSyncStatus']();if(_0xbb756d){await this['salesforceSync'][_0x5b2e42(0x189)](this[_0x5b2e42(0x169)],_0x5b2e42(0x168)),await this[_0x5b2e42(0x193)](_0x5b2e42(0x19c))[_0x5b2e42(0x180)]();return;}const _0x32c4ba=await this[_0x5b2e42(0x181)](_0x14636e);await this[_0x5b2e42(0x16d)]['run'](_0x32c4ba,this[_0x5b2e42(0x16b)]),await this[_0x5b2e42(0x18c)][_0x5b2e42(0x189)](this[_0x5b2e42(0x169)],_0x5b2e42(0x168)),await this[_0x5b2e42(0x174)](),this[_0x5b2e42(0x193)]('[INFO]\x20Sync\x20job\x20done.');}catch(_0x37c87a){throw _0x37c87a;}finally{await this[_0x5b2e42(0x16b)][_0x5b2e42(0x180)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x2ba677(0x18b)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a183_0x2ba677(0x197)],commit_components_job_1[a183_0x2ba677(0x1a0)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;