const a183_0x358aab=a183_0x5bdb;(function(_0x54cfe8,_0x4233e6){const _0x4ccd7c=a183_0x5bdb,_0x449fc2=_0x54cfe8();while(!![]){try{const _0x477127=-parseInt(_0x4ccd7c(0x1cd))/0x1*(parseInt(_0x4ccd7c(0x1ef))/0x2)+-parseInt(_0x4ccd7c(0x1fb))/0x3*(parseInt(_0x4ccd7c(0x20b))/0x4)+-parseInt(_0x4ccd7c(0x1d8))/0x5+parseInt(_0x4ccd7c(0x216))/0x6+-parseInt(_0x4ccd7c(0x1fd))/0x7+parseInt(_0x4ccd7c(0x1ce))/0x8*(-parseInt(_0x4ccd7c(0x1f8))/0x9)+parseInt(_0x4ccd7c(0x1d3))/0xa;if(_0x477127===_0x4233e6)break;else _0x449fc2['push'](_0x449fc2['shift']());}catch(_0x369969){_0x449fc2['push'](_0x449fc2['shift']());}}}(a183_0x296d,0xa44a2));const a183_0x139b0f=(function(){let _0x260729=!![];return function(_0x287627,_0x3d3b02){const _0x37e62e=_0x260729?function(){if(_0x3d3b02){const _0x4cb02b=_0x3d3b02['apply'](_0x287627,arguments);return _0x3d3b02=null,_0x4cb02b;}}:function(){};return _0x260729=![],_0x37e62e;};}()),a183_0xe80926=a183_0x139b0f(this,function(){const _0x4823e6=a183_0x5bdb;return a183_0xe80926[_0x4823e6(0x1eb)]()[_0x4823e6(0x1d1)](_0x4823e6(0x20a))[_0x4823e6(0x1eb)]()['constructor'](a183_0xe80926)['search'](_0x4823e6(0x20a));});a183_0xe80926();'use strict';function a183_0x296d(){const _0x55dd2d=['log','name','3292032OUFjGf','getComponents','getOne','../../salesforce/services/salesforce-logger-v2.service','branch','typedi','setStatus','provider','9Updufv','190904hRAqtN','SalesforceRetrieverService','sha','search','syncData','48336020vtOQIp','sfLogger','getOwnPropertyDescriptor','createBranchIfNotExists','repositoryName','4759180YtLpIE','message','Service','Completed','gitUrl','FlosumSyncJob','send','salesforceSync','length','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','function','../../../core','run','metadata','commitJob','getComponentsFromRepository','convertToSFDX','branchId','repository','toString','CommitComponentsDto','../../../constants','defineProperty','145346ZDfGft',']\x20[Branch:\x20','Sync\x20repository','catch','branches','Logger','__decorate','__metadata','[INFO]\x20Update\x20remote\x20state.','450SIOUCC','getRemoteStateAttachmentId','getComponentIds','3ZStrPL','salesforceService','8760101dPjrXj','object','parse','SalesforceSyncService','getBranchComponents','string','checkSyncStatus','branchName','design:paramtypes','DEFAULT_GIT_USER_NAME','[INFO]\x20Start\x20sync\x20job','getCommitDto','../../salesforce/services/salesforce-sync.service','(((.+)+)+)+$','2635432GEClrn','updateRemoteState','decorate','updateLastCommit','./commit-components.job','../dto/commit-components.dto','force','repositoryId','user'];a183_0x296d=function(){return _0x55dd2d;};return a183_0x296d();}var __decorate=this&&this[a183_0x358aab(0x1f5)]||function(_0x52216c,_0x2c82ac,_0x36c3f8,_0x385935){const _0x1b0f05=a183_0x358aab;var _0x44dac2=arguments[_0x1b0f05(0x1e0)],_0x990108=_0x44dac2<0x3?_0x2c82ac:_0x385935===null?_0x385935=Object[_0x1b0f05(0x1d5)](_0x2c82ac,_0x36c3f8):_0x385935,_0x661167;if(typeof Reflect===_0x1b0f05(0x1fe)&&typeof Reflect[_0x1b0f05(0x20d)]===_0x1b0f05(0x1e2))_0x990108=Reflect[_0x1b0f05(0x20d)](_0x52216c,_0x2c82ac,_0x36c3f8,_0x385935);else{for(var _0x22e902=_0x52216c['length']-0x1;_0x22e902>=0x0;_0x22e902--)if(_0x661167=_0x52216c[_0x22e902])_0x990108=(_0x44dac2<0x3?_0x661167(_0x990108):_0x44dac2>0x3?_0x661167(_0x2c82ac,_0x36c3f8,_0x990108):_0x661167(_0x2c82ac,_0x36c3f8))||_0x990108;}return _0x44dac2>0x3&&_0x990108&&Object[_0x1b0f05(0x1ee)](_0x2c82ac,_0x36c3f8,_0x990108),_0x990108;},__metadata=this&&this[a183_0x358aab(0x1f6)]||function(_0x367ad2,_0x31d553){const _0x16d793=a183_0x358aab;if(typeof Reflect===_0x16d793(0x1fe)&&typeof Reflect[_0x16d793(0x1e5)]===_0x16d793(0x1e2))return Reflect[_0x16d793(0x1e5)](_0x367ad2,_0x31d553);},FlosumSyncJob_1;function a183_0x5bdb(_0x29420b,_0x2808f8){const _0x13f6ad=a183_0x296d();return a183_0x5bdb=function(_0xe80926,_0x139b0f){_0xe80926=_0xe80926-0x1c8;let _0x296d9c=_0x13f6ad[_0xe80926];return _0x296d9c;},a183_0x5bdb(_0x29420b,_0x2808f8);}Object[a183_0x358aab(0x1ee)](exports,'__esModule',{'value':!![]}),exports[a183_0x358aab(0x1dd)]=void 0x0;const core_1=require(a183_0x358aab(0x1e3)),salesforce_logger_v2_service_1=require(a183_0x358aab(0x1c8)),typedi_1=require(a183_0x358aab(0x1ca)),constants_1=require(a183_0x358aab(0x1ed)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a183_0x358aab(0x209)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a183_0x358aab(0x210)),commit_components_job_1=require(a183_0x358aab(0x20f));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x15e7cb,_0x54b59b,_0x5cb412){const _0x23203d=a183_0x358aab;this[_0x23203d(0x1df)]=_0x15e7cb,this[_0x23203d(0x1fc)]=_0x54b59b,this[_0x23203d(0x1e6)]=_0x5cb412,this['logger']=new core_1[(_0x23203d(0x1f4))](FlosumSyncJob_1[_0x23203d(0x215)]);}['log'](_0x255082){const _0x387e57=a183_0x358aab;return this[_0x387e57(0x1d4)]['log'](_0x387e57(0x1e1)+this[_0x387e57(0x1d2)]['repositoryName']+_0x387e57(0x1f0)+this[_0x387e57(0x1d2)][_0x387e57(0x204)]+']\x20'+_0x255082);}async[a183_0x358aab(0x1d6)](){const _0x20a09c=a183_0x358aab;let _0x1936fa=await this['repository'][_0x20a09c(0x1f3)]['getOne'](this['syncData'][_0x20a09c(0x204)])[_0x20a09c(0x1f2)](()=>null);!_0x1936fa&&(_0x1936fa=await this['repository'][_0x20a09c(0x1f3)]['create']({'name':this['syncData'][_0x20a09c(0x204)]})),this[_0x20a09c(0x1c9)]=_0x1936fa;}async[a183_0x358aab(0x1fa)](){const _0x27bd22=a183_0x358aab;return this[_0x27bd22(0x1d2)][_0x27bd22(0x212)]?this['salesforceSync'][_0x27bd22(0x1e7)](this[_0x27bd22(0x1d2)][_0x27bd22(0x212)]):this[_0x27bd22(0x1df)][_0x27bd22(0x201)](this[_0x27bd22(0x1d2)][_0x27bd22(0x1e9)]);}async[a183_0x358aab(0x217)](){const _0x4ce7dd=a183_0x358aab,_0x502f9c=await this[_0x4ce7dd(0x1fa)](),_0x3f4052=new salesforce_retriever_service_1[(_0x4ce7dd(0x1cf))](this[_0x4ce7dd(0x1fc)]),_0x25c194=await _0x3f4052['run'](_0x502f9c);return _0x25c194;}async[a183_0x358aab(0x208)](_0x4d3020){const _0x249851=a183_0x358aab,_0x3eee7a=new commit_components_dto_1[(_0x249851(0x1ec))]();return _0x3eee7a[_0x249851(0x1d9)]=_0x249851(0x1f1),_0x3eee7a[_0x249851(0x213)]={'name':constants_1[_0x249851(0x206)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x3eee7a['components']={'writed':await this['getComponents']()},_0x3eee7a[_0x249851(0x1e8)]=_0x4d3020,_0x3eee7a['repo']=this['repository'],_0x3eee7a[_0x249851(0x1c9)]=this[_0x249851(0x1c9)],_0x3eee7a[_0x249851(0x211)]=!![],_0x3eee7a[_0x249851(0x1cc)]=this[_0x249851(0x1cc)],_0x3eee7a;}async[a183_0x358aab(0x203)](){const _0x7c84b9=a183_0x358aab,_0x1c6577=await this[_0x7c84b9(0x1df)][_0x7c84b9(0x1f9)](this[_0x7c84b9(0x1d2)]),_0x5a61ca=await this['salesforceService']['retrieveAttachment'](_0x1c6577)['then'](_0x14cb02=>typeof _0x14cb02===_0x7c84b9(0x202)?JSON[_0x7c84b9(0x1ff)](_0x14cb02):_0x14cb02)[_0x7c84b9(0x1f2)](()=>({}));if(_0x5a61ca[this['repository'][_0x7c84b9(0x1dc)]]){if(_0x5a61ca[this[_0x7c84b9(0x1ea)]['gitUrl']]['lastCommit']===this['branch'][_0x7c84b9(0x1d0)])return!![];}return![];}async[a183_0x358aab(0x20e)](){const _0x4a05e3=a183_0x358aab,_0x50fccb=await this[_0x4a05e3(0x1ea)][_0x4a05e3(0x1f3)][_0x4a05e3(0x218)](this[_0x4a05e3(0x1c9)][_0x4a05e3(0x215)]);await this['log'](_0x4a05e3(0x1f7));const _0x4b7388={[this['repository'][_0x4a05e3(0x1dc)]]:{'lastCommit':_0x50fccb[_0x4a05e3(0x1d0)]}};await this[_0x4a05e3(0x1df)][_0x4a05e3(0x20c)](this[_0x4a05e3(0x1d2)],_0x4b7388);}async[a183_0x358aab(0x1e4)]({syncRecord:_0x3d3a55,repository:_0x583a56,logger:_0x2df264,convertToSFDX:_0x105227,provider:_0x13e2d7}){const _0x1d5c18=a183_0x358aab;this['syncData']=_0x3d3a55,this[_0x1d5c18(0x1cc)]=_0x13e2d7,this[_0x1d5c18(0x1ea)]=_0x583a56,this[_0x1d5c18(0x1d4)]=new salesforce_logger_v2_service_1['SalesforceLogger2'](_0x2df264['getLoggerId'](),_0x2df264['getPrefix']()+'\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x1d5c18(0x1d2)][_0x1d5c18(0x1d7)]+_0x1d5c18(0x1f0)+this['syncData'][_0x1d5c18(0x204)]+']');try{await this[_0x1d5c18(0x1df)][_0x1d5c18(0x1cb)](this[_0x1d5c18(0x1d2)],'In\x20Progress'),this[_0x1d5c18(0x214)](_0x1d5c18(0x207)),await this[_0x1d5c18(0x1d6)]();const _0x34bc6b=await this['checkSyncStatus']();if(_0x34bc6b){await this[_0x1d5c18(0x1df)][_0x1d5c18(0x1cb)](this['syncData'],'Completed'),await this[_0x1d5c18(0x214)]('[INFO]\x20Branch\x20synchronized.\x20Skip')[_0x1d5c18(0x1de)]();return;}const _0x3d79b0=await this[_0x1d5c18(0x208)](_0x105227);await this[_0x1d5c18(0x1e6)]['run'](_0x3d79b0,this['sfLogger']),await this[_0x1d5c18(0x1df)][_0x1d5c18(0x1cb)](this['syncData'],_0x1d5c18(0x1db)),await this[_0x1d5c18(0x20e)](),this[_0x1d5c18(0x214)]('[INFO]\x20Sync\x20job\x20done.');}catch(_0x56634a){throw _0x56634a;}finally{await this[_0x1d5c18(0x1d4)]['send']();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x358aab(0x1da)]({'transient':!![]}),__metadata(a183_0x358aab(0x205),[salesforce_sync_service_1[a183_0x358aab(0x200)],salesforce_service_1['SalesforceService'],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a183_0x358aab(0x1dd)]=FlosumSyncJob;