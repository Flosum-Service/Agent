const a183_0x1043a9=a183_0x4750;(function(_0x2d02d6,_0x2e7235){const _0x87de21=a183_0x4750,_0x24bad8=_0x2d02d6();while(!![]){try{const _0x138069=-parseInt(_0x87de21(0x9a))/0x1+parseInt(_0x87de21(0xa8))/0x2+-parseInt(_0x87de21(0xb6))/0x3*(-parseInt(_0x87de21(0xa4))/0x4)+-parseInt(_0x87de21(0x81))/0x5+-parseInt(_0x87de21(0xb0))/0x6*(-parseInt(_0x87de21(0xb5))/0x7)+-parseInt(_0x87de21(0x88))/0x8+-parseInt(_0x87de21(0xac))/0x9;if(_0x138069===_0x2e7235)break;else _0x24bad8['push'](_0x24bad8['shift']());}catch(_0x26d094){_0x24bad8['push'](_0x24bad8['shift']());}}}(a183_0x1453,0xe3e51));function a183_0x1453(){const _0x56db82=['getCommitDto','CommitComponentsDto','lastCommit','branches','FlosumSyncJob','__metadata','search','decorate','repository','[INFO]\x20Start\x20sync\x20job','convertToSFDX','getRemoteStateAttachmentId','SalesforceSyncService','provider','gitUrl','repo','apply','salesforceSync','getBranchComponents','createBranchIfNotExists','name','3553420nAoccj','typedi','Completed','syncData','updateRemoteState','repositoryName','force','3975424vhfaeE','branchId','toString','Service','constructor','[INFO]\x20Update\x20remote\x20state.','__decorate','In\x20Progress','message','../dto/commit-components.dto','design:paramtypes','object','../../salesforce/services/salesforce-logger-v2.service','commitJob','run','DEFAULT_GIT_USER_NAME','defineProperty','setStatus','969878JDvzbV','SalesforceService','(((.+)+)+)+$','getPrefix','DEFAULT_GIT_USER_EMAIL','getComponents','send','salesforceService','getOwnPropertyDescriptor','metadata','1186468EGmKfh','branch','getComponentsFromRepository','log','1414894qVMmaz','../../salesforce/services/salesforce.service','getComponentIds','updateLastCommit','6438348ZnhBhl','sha','components','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','12102UtgTOf','catch','string','getLoggerId','CommitComponentsJob','5677TNHctf','15UByVJN','repositoryId','length','parse','sfLogger','[INFO]\x20Sync\x20job\x20done.','getOne',']\x20[Branch:\x20','checkSyncStatus','branchName','../../salesforce/services/salesforce-sync.service'];a183_0x1453=function(){return _0x56db82;};return a183_0x1453();}const a183_0x118c9e=(function(){let _0x1b0871=!![];return function(_0x10b66d,_0xd6b46c){const _0x138c1d=_0x1b0871?function(){const _0x14c90b=a183_0x4750;if(_0xd6b46c){const _0x5979bb=_0xd6b46c[_0x14c90b(0xd1)](_0x10b66d,arguments);return _0xd6b46c=null,_0x5979bb;}}:function(){};return _0x1b0871=![],_0x138c1d;};}()),a183_0xad0ebd=a183_0x118c9e(this,function(){const _0x41a1f5=a183_0x4750;return a183_0xad0ebd[_0x41a1f5(0x8a)]()[_0x41a1f5(0xc7)](_0x41a1f5(0x9c))[_0x41a1f5(0x8a)]()[_0x41a1f5(0x8c)](a183_0xad0ebd)['search'](_0x41a1f5(0x9c));});a183_0xad0ebd();'use strict';var __decorate=this&&this[a183_0x1043a9(0x8e)]||function(_0x3abb2c,_0x3ff0cf,_0x3a087b,_0x33d69e){const _0x592b4a=a183_0x1043a9;var _0xfdaccc=arguments[_0x592b4a(0xb8)],_0x3694cb=_0xfdaccc<0x3?_0x3ff0cf:_0x33d69e===null?_0x33d69e=Object[_0x592b4a(0xa2)](_0x3ff0cf,_0x3a087b):_0x33d69e,_0x27be6a;if(typeof Reflect===_0x592b4a(0x93)&&typeof Reflect[_0x592b4a(0xc8)]==='function')_0x3694cb=Reflect[_0x592b4a(0xc8)](_0x3abb2c,_0x3ff0cf,_0x3a087b,_0x33d69e);else{for(var _0x58f804=_0x3abb2c[_0x592b4a(0xb8)]-0x1;_0x58f804>=0x0;_0x58f804--)if(_0x27be6a=_0x3abb2c[_0x58f804])_0x3694cb=(_0xfdaccc<0x3?_0x27be6a(_0x3694cb):_0xfdaccc>0x3?_0x27be6a(_0x3ff0cf,_0x3a087b,_0x3694cb):_0x27be6a(_0x3ff0cf,_0x3a087b))||_0x3694cb;}return _0xfdaccc>0x3&&_0x3694cb&&Object['defineProperty'](_0x3ff0cf,_0x3a087b,_0x3694cb),_0x3694cb;},__metadata=this&&this[a183_0x1043a9(0xc6)]||function(_0x23a45b,_0x1db6cd){const _0x52433e=a183_0x1043a9;if(typeof Reflect===_0x52433e(0x93)&&typeof Reflect[_0x52433e(0xa3)]==='function')return Reflect[_0x52433e(0xa3)](_0x23a45b,_0x1db6cd);},FlosumSyncJob_1;Object[a183_0x1043a9(0x98)](exports,'__esModule',{'value':!![]}),exports[a183_0x1043a9(0xc5)]=void 0x0;const core_1=require('../../../core'),salesforce_logger_v2_service_1=require(a183_0x1043a9(0x94)),typedi_1=require(a183_0x1043a9(0x82)),constants_1=require('../../../constants'),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a183_0x1043a9(0xc0)),salesforce_service_1=require(a183_0x1043a9(0xa9)),commit_components_dto_1=require(a183_0x1043a9(0x91)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x22ed08,_0xe3ff8c,_0x17c113){const _0x19199b=a183_0x1043a9;this['salesforceSync']=_0x22ed08,this['salesforceService']=_0xe3ff8c,this['commitJob']=_0x17c113,this['logger']=new core_1['Logger'](FlosumSyncJob_1[_0x19199b(0x80)]);}['log'](_0x1a90e8){const _0x4b74b8=a183_0x1043a9;return this[_0x4b74b8(0xba)][_0x4b74b8(0xa7)](_0x4b74b8(0xaf)+this[_0x4b74b8(0x84)][_0x4b74b8(0x86)]+_0x4b74b8(0xbd)+this[_0x4b74b8(0x84)][_0x4b74b8(0xbf)]+']\x20'+_0x1a90e8);}async[a183_0x1043a9(0x7f)](){const _0x53a72a=a183_0x1043a9;let _0x3d6e49=await this[_0x53a72a(0xc9)][_0x53a72a(0xc4)]['getOne'](this['syncData'][_0x53a72a(0xbf)])[_0x53a72a(0xb1)](()=>null);!_0x3d6e49&&(_0x3d6e49=await this[_0x53a72a(0xc9)][_0x53a72a(0xc4)]['create']({'name':this['syncData'][_0x53a72a(0xbf)]})),this[_0x53a72a(0xa5)]=_0x3d6e49;}async[a183_0x1043a9(0xaa)](){const _0x4f396a=a183_0x1043a9;return this[_0x4f396a(0x84)][_0x4f396a(0xb7)]?this[_0x4f396a(0xd2)][_0x4f396a(0xa6)](this['syncData'][_0x4f396a(0xb7)]):this[_0x4f396a(0xd2)][_0x4f396a(0xd3)](this[_0x4f396a(0x84)][_0x4f396a(0x89)]);}async[a183_0x1043a9(0x9f)](){const _0xb33709=a183_0x1043a9,_0x236ead=await this['getComponentIds'](),_0x5272b4=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0xb33709(0xa1)]),_0x12d289=await _0x5272b4[_0xb33709(0x96)](_0x236ead);return _0x12d289;}async[a183_0x1043a9(0xc1)](_0x49ef66){const _0x17ccd6=a183_0x1043a9,_0x2232fe=new commit_components_dto_1[(_0x17ccd6(0xc2))]();return _0x2232fe[_0x17ccd6(0x90)]='Sync\x20repository',_0x2232fe['user']={'name':constants_1[_0x17ccd6(0x97)],'email':constants_1[_0x17ccd6(0x9e)]},_0x2232fe[_0x17ccd6(0xae)]={'writed':await this[_0x17ccd6(0x9f)]()},_0x2232fe[_0x17ccd6(0xcb)]=_0x49ef66,_0x2232fe[_0x17ccd6(0xd0)]=this[_0x17ccd6(0xc9)],_0x2232fe['branch']=this['branch'],_0x2232fe[_0x17ccd6(0x87)]=!![],_0x2232fe[_0x17ccd6(0xce)]=this[_0x17ccd6(0xce)],_0x2232fe;}async[a183_0x1043a9(0xbe)](){const _0x3e3e12=a183_0x1043a9,_0x1fce49=await this[_0x3e3e12(0xd2)][_0x3e3e12(0xcc)](this[_0x3e3e12(0x84)]),_0x57e37b=await this[_0x3e3e12(0xa1)]['retrieveAttachment'](_0x1fce49)['then'](_0x5df19c=>typeof _0x5df19c===_0x3e3e12(0xb2)?JSON[_0x3e3e12(0xb9)](_0x5df19c):_0x5df19c)[_0x3e3e12(0xb1)](()=>({}));if(_0x57e37b[this[_0x3e3e12(0xc9)][_0x3e3e12(0xcf)]]){if(_0x57e37b[this['repository']['gitUrl']][_0x3e3e12(0xc3)]===this['branch'][_0x3e3e12(0xad)])return!![];}return![];}async[a183_0x1043a9(0xab)](){const _0x3205fa=a183_0x1043a9,_0x19e1d8=await this['repository'][_0x3205fa(0xc4)][_0x3205fa(0xbc)](this['branch']['name']);await this[_0x3205fa(0xa7)](_0x3205fa(0x8d));const _0x44dfaa={[this[_0x3205fa(0xc9)][_0x3205fa(0xcf)]]:{'lastCommit':_0x19e1d8['sha']}};await this['salesforceSync'][_0x3205fa(0x85)](this[_0x3205fa(0x84)],_0x44dfaa);}async[a183_0x1043a9(0x96)]({syncRecord:_0x31cc56,repository:_0x305e6a,logger:_0x4781bb,convertToSFDX:_0x160ca0,provider:_0x375231}){const _0x40a541=a183_0x1043a9;this[_0x40a541(0x84)]=_0x31cc56,this[_0x40a541(0xce)]=_0x375231,this[_0x40a541(0xc9)]=_0x305e6a,this['sfLogger']=new salesforce_logger_v2_service_1['SalesforceLogger2'](_0x4781bb[_0x40a541(0xb3)](),_0x4781bb[_0x40a541(0x9d)]()+'\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x40a541(0x84)][_0x40a541(0x86)]+']\x20[Branch:\x20'+this['syncData']['branchName']+']');try{await this[_0x40a541(0xd2)][_0x40a541(0x99)](this[_0x40a541(0x84)],_0x40a541(0x8f)),this[_0x40a541(0xa7)](_0x40a541(0xca)),await this[_0x40a541(0x7f)]();const _0x12f3bf=await this['checkSyncStatus']();if(_0x12f3bf){await this[_0x40a541(0xd2)][_0x40a541(0x99)](this[_0x40a541(0x84)],_0x40a541(0x83)),await this[_0x40a541(0xa7)]('[INFO]\x20Branch\x20synchronized.\x20Skip')[_0x40a541(0xa0)]();return;}const _0x4dc549=await this[_0x40a541(0xc1)](_0x160ca0);await this[_0x40a541(0x95)][_0x40a541(0x96)](_0x4dc549,this[_0x40a541(0xba)]),await this[_0x40a541(0xd2)][_0x40a541(0x99)](this[_0x40a541(0x84)],_0x40a541(0x83)),await this[_0x40a541(0xab)](),this[_0x40a541(0xa7)](_0x40a541(0xbb));}catch(_0x1193db){throw _0x1193db;}finally{await this[_0x40a541(0xba)][_0x40a541(0xa0)]();}}};function a183_0x4750(_0x1e0b86,_0x3b6f01){const _0x3f00a9=a183_0x1453();return a183_0x4750=function(_0xad0ebd,_0x118c9e){_0xad0ebd=_0xad0ebd-0x7f;let _0x145386=_0x3f00a9[_0xad0ebd];return _0x145386;},a183_0x4750(_0x1e0b86,_0x3b6f01);}FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x1043a9(0x8b)]({'transient':!![]}),__metadata(a183_0x1043a9(0x92),[salesforce_sync_service_1[a183_0x1043a9(0xcd)],salesforce_service_1[a183_0x1043a9(0x9b)],commit_components_job_1[a183_0x1043a9(0xb4)]])],FlosumSyncJob),exports[a183_0x1043a9(0xc5)]=FlosumSyncJob;