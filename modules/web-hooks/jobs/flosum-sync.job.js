const a183_0x18101c=a183_0x587a;function a183_0x587a(_0x3e59a4,_0x8eff2f){const _0x1c8de9=a183_0x1847();return a183_0x587a=function(_0x1f224c,_0xab3a6c){_0x1f224c=_0x1f224c-0x19f;let _0x1847b8=_0x1c8de9[_0x1f224c];return _0x1847b8;},a183_0x587a(_0x3e59a4,_0x8eff2f);}(function(_0xecd412,_0x7929ef){const _0x18f85b=a183_0x587a,_0x3e244b=_0xecd412();while(!![]){try{const _0x1f0891=-parseInt(_0x18f85b(0x1c9))/0x1+-parseInt(_0x18f85b(0x1c5))/0x2*(parseInt(_0x18f85b(0x1cb))/0x3)+parseInt(_0x18f85b(0x1dc))/0x4*(-parseInt(_0x18f85b(0x1c4))/0x5)+-parseInt(_0x18f85b(0x1aa))/0x6+-parseInt(_0x18f85b(0x1d3))/0x7*(-parseInt(_0x18f85b(0x1d4))/0x8)+parseInt(_0x18f85b(0x1b0))/0x9+parseInt(_0x18f85b(0x1d7))/0xa;if(_0x1f0891===_0x7929ef)break;else _0x3e244b['push'](_0x3e244b['shift']());}catch(_0x1f1c88){_0x3e244b['push'](_0x3e244b['shift']());}}}(a183_0x1847,0xf1f47));const a183_0xab3a6c=(function(){let _0x18804d=!![];return function(_0x333ffe,_0x1f5d26){const _0x1af188=_0x18804d?function(){if(_0x1f5d26){const _0x5ebe14=_0x1f5d26['apply'](_0x333ffe,arguments);return _0x1f5d26=null,_0x5ebe14;}}:function(){};return _0x18804d=![],_0x1af188;};}()),a183_0x1f224c=a183_0xab3a6c(this,function(){const _0x172259=a183_0x587a;return a183_0x1f224c[_0x172259(0x1e9)]()['search'](_0x172259(0x1a6))[_0x172259(0x1e9)]()['constructor'](a183_0x1f224c)['search'](_0x172259(0x1a6));});function a183_0x1847(){const _0x752997=['7687260GxkjGB','create','updateRemoteState','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','branchId','../../../constants','createBranchIfNotExists','log','../../salesforce/services/salesforce-retriever.service','getBranchComponents','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','branch','[INFO]\x20Start\x20sync\x20job','__metadata','branches','string','decorate','syncData','In\x20Progress','defineProperty','5250rwkBfI','1144106syPLpI','FlosumSyncJob','SalesforceLogger2','repositoryName','285313KIcCGT','Service','9tYyCzP','length','sfLogger','repository','getComponents','Logger','Sync\x20repository','run','473221qtFIKD','88Ekzhsq','function','salesforceSync','34248650JUczmD','design:paramtypes','name','repositoryId','gitUrl','6156cEaLGV','getLoggerId','provider','salesforceService','typedi','SalesforceRetrieverService','SalesforceService','commitJob','updateLastCommit','branchName','[INFO]\x20Update\x20remote\x20state.','setStatus','[INFO]\x20Branch\x20synchronized.\x20Skip','toString','convertToSFDX','then','checkSyncStatus','getOne','message','sha','repo','getRemoteStateAttachmentId','object','getOwnPropertyDescriptor','../dto/commit-components.dto','getCommitDto','./commit-components.job','CommitComponentsDto','getComponentIds','DEFAULT_GIT_USER_EMAIL','(((.+)+)+)+$','Completed','parse','__decorate','2485014qMDbut','lastCommit','components','user','DEFAULT_GIT_USER_NAME','catch'];a183_0x1847=function(){return _0x752997;};return a183_0x1847();}a183_0x1f224c();'use strict';var __decorate=this&&this[a183_0x18101c(0x1a9)]||function(_0x426cc6,_0x28a03d,_0x447375,_0x1cd434){const _0x4c481e=a183_0x18101c;var _0x246658=arguments['length'],_0x483520=_0x246658<0x3?_0x28a03d:_0x1cd434===null?_0x1cd434=Object[_0x4c481e(0x19f)](_0x28a03d,_0x447375):_0x1cd434,_0x1dac76;if(typeof Reflect==='object'&&typeof Reflect[_0x4c481e(0x1c0)]===_0x4c481e(0x1d5))_0x483520=Reflect['decorate'](_0x426cc6,_0x28a03d,_0x447375,_0x1cd434);else{for(var _0x175223=_0x426cc6[_0x4c481e(0x1cc)]-0x1;_0x175223>=0x0;_0x175223--)if(_0x1dac76=_0x426cc6[_0x175223])_0x483520=(_0x246658<0x3?_0x1dac76(_0x483520):_0x246658>0x3?_0x1dac76(_0x28a03d,_0x447375,_0x483520):_0x1dac76(_0x28a03d,_0x447375))||_0x483520;}return _0x246658>0x3&&_0x483520&&Object[_0x4c481e(0x1c3)](_0x28a03d,_0x447375,_0x483520),_0x483520;},__metadata=this&&this[a183_0x18101c(0x1bd)]||function(_0x22f5cc,_0xd98ee){const _0x41b21c=a183_0x18101c;if(typeof Reflect===_0x41b21c(0x1f2)&&typeof Reflect['metadata']===_0x41b21c(0x1d5))return Reflect['metadata'](_0x22f5cc,_0xd98ee);},FlosumSyncJob_1;Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a183_0x18101c(0x1c6)]=void 0x0;const core_1=require('../../../core'),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),typedi_1=require(a183_0x18101c(0x1e0)),constants_1=require(a183_0x18101c(0x1b5)),salesforce_retriever_service_1=require(a183_0x18101c(0x1b8)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a183_0x18101c(0x1a0)),commit_components_job_1=require(a183_0x18101c(0x1a2));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x230188,_0x5a68a7,_0x55c54a){const _0x5c17a5=a183_0x18101c;this[_0x5c17a5(0x1d6)]=_0x230188,this['salesforceService']=_0x5a68a7,this[_0x5c17a5(0x1e3)]=_0x55c54a,this['logger']=new core_1[(_0x5c17a5(0x1d0))](FlosumSyncJob_1[_0x5c17a5(0x1d9)]);}[a183_0x18101c(0x1b7)](_0x902187){const _0x22f8a0=a183_0x18101c;return this[_0x22f8a0(0x1cd)][_0x22f8a0(0x1b7)](_0x22f8a0(0x1ba)+this[_0x22f8a0(0x1c1)]['repositoryName']+']\x20[Branch:\x20'+this[_0x22f8a0(0x1c1)][_0x22f8a0(0x1e5)]+']\x20'+_0x902187);}async[a183_0x18101c(0x1b6)](){const _0x5ca090=a183_0x18101c;let _0x1d27f9=await this[_0x5ca090(0x1ce)][_0x5ca090(0x1be)][_0x5ca090(0x1ed)](this[_0x5ca090(0x1c1)]['branchName'])[_0x5ca090(0x1af)](()=>null);!_0x1d27f9&&(_0x1d27f9=await this[_0x5ca090(0x1ce)][_0x5ca090(0x1be)][_0x5ca090(0x1b1)]({'name':this[_0x5ca090(0x1c1)][_0x5ca090(0x1e5)]})),this[_0x5ca090(0x1bb)]=_0x1d27f9;}async[a183_0x18101c(0x1a4)](){const _0x20811b=a183_0x18101c;return this[_0x20811b(0x1c1)][_0x20811b(0x1da)]?this[_0x20811b(0x1d6)]['getComponentsFromRepository'](this[_0x20811b(0x1c1)][_0x20811b(0x1da)]):this[_0x20811b(0x1d6)][_0x20811b(0x1b9)](this[_0x20811b(0x1c1)][_0x20811b(0x1b4)]);}async[a183_0x18101c(0x1cf)](){const _0x4d6d80=a183_0x18101c,_0x58203f=await this['getComponentIds'](),_0x17cf93=new salesforce_retriever_service_1[(_0x4d6d80(0x1e1))](this[_0x4d6d80(0x1df)]),_0x7dea2c=await _0x17cf93[_0x4d6d80(0x1d2)](_0x58203f);return _0x7dea2c;}async[a183_0x18101c(0x1a1)](_0x59a4fe){const _0xce8777=a183_0x18101c,_0x56798a=new commit_components_dto_1[(_0xce8777(0x1a3))]();return _0x56798a[_0xce8777(0x1ee)]=_0xce8777(0x1d1),_0x56798a[_0xce8777(0x1ad)]={'name':constants_1[_0xce8777(0x1ae)],'email':constants_1[_0xce8777(0x1a5)]},_0x56798a[_0xce8777(0x1ac)]={'writed':await this['getComponents']()},_0x56798a[_0xce8777(0x1ea)]=_0x59a4fe,_0x56798a[_0xce8777(0x1f0)]=this[_0xce8777(0x1ce)],_0x56798a['branch']=this[_0xce8777(0x1bb)],_0x56798a['force']=!![],_0x56798a[_0xce8777(0x1de)]=this[_0xce8777(0x1de)],_0x56798a;}async[a183_0x18101c(0x1ec)](){const _0x9d39cf=a183_0x18101c,_0x9b464=await this[_0x9d39cf(0x1d6)][_0x9d39cf(0x1f1)](this[_0x9d39cf(0x1c1)]),_0x24b879=await this[_0x9d39cf(0x1df)]['retrieveAttachment'](_0x9b464)[_0x9d39cf(0x1eb)](_0x50f21b=>typeof _0x50f21b===_0x9d39cf(0x1bf)?JSON[_0x9d39cf(0x1a8)](_0x50f21b):_0x50f21b)['catch'](()=>({}));if(_0x24b879[this[_0x9d39cf(0x1ce)]['gitUrl']]){if(_0x24b879[this[_0x9d39cf(0x1ce)][_0x9d39cf(0x1db)]][_0x9d39cf(0x1ab)]===this[_0x9d39cf(0x1bb)][_0x9d39cf(0x1ef)])return!![];}return![];}async[a183_0x18101c(0x1e4)](){const _0x181b61=a183_0x18101c,_0x472cb8=await this[_0x181b61(0x1ce)][_0x181b61(0x1be)]['getOne'](this[_0x181b61(0x1bb)]['name']);await this[_0x181b61(0x1b7)](_0x181b61(0x1e6));const _0xad15b5={[this[_0x181b61(0x1ce)]['gitUrl']]:{'lastCommit':_0x472cb8['sha']}};await this['salesforceSync'][_0x181b61(0x1b2)](this['syncData'],_0xad15b5);}async['run']({syncRecord:_0x496a97,repository:_0x353d75,logger:_0x2cb9e6,convertToSFDX:_0x562e3c,provider:_0x2e10c2}){const _0x549a77=a183_0x18101c;this['syncData']=_0x496a97,this[_0x549a77(0x1de)]=_0x2e10c2,this[_0x549a77(0x1ce)]=_0x353d75,this[_0x549a77(0x1cd)]=new salesforce_logger_v2_service_1[(_0x549a77(0x1c7))](_0x2cb9e6[_0x549a77(0x1dd)](),_0x2cb9e6['getPrefix']()+_0x549a77(0x1b3)+this[_0x549a77(0x1c1)][_0x549a77(0x1c8)]+']\x20[Branch:\x20'+this[_0x549a77(0x1c1)][_0x549a77(0x1e5)]+']');try{await this['salesforceSync'][_0x549a77(0x1e7)](this[_0x549a77(0x1c1)],_0x549a77(0x1c2)),this[_0x549a77(0x1b7)](_0x549a77(0x1bc)),await this[_0x549a77(0x1b6)]();const _0x13b6aa=await this['checkSyncStatus']();if(_0x13b6aa){await this['salesforceSync'][_0x549a77(0x1e7)](this[_0x549a77(0x1c1)],_0x549a77(0x1a7)),await this['log'](_0x549a77(0x1e8))['send']();return;}const _0x5c255d=await this[_0x549a77(0x1a1)](_0x562e3c);await this[_0x549a77(0x1e3)][_0x549a77(0x1d2)](_0x5c255d,this[_0x549a77(0x1cd)]),await this[_0x549a77(0x1d6)]['setStatus'](this[_0x549a77(0x1c1)],_0x549a77(0x1a7)),await this[_0x549a77(0x1e4)](),this[_0x549a77(0x1b7)]('[INFO]\x20Sync\x20job\x20done.');}catch(_0x4c9238){throw _0x4c9238;}finally{await this[_0x549a77(0x1cd)]['send']();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x18101c(0x1ca)]({'transient':!![]}),__metadata(a183_0x18101c(0x1d8),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a183_0x18101c(0x1e2)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a183_0x18101c(0x1c6)]=FlosumSyncJob;