const a183_0x32a438=a183_0x1fd8;(function(_0x3af153,_0x43d6c3){const _0x2d3e76=a183_0x1fd8,_0x1e608d=_0x3af153();while(!![]){try{const _0x46ed9e=-parseInt(_0x2d3e76(0x22e))/0x1+-parseInt(_0x2d3e76(0x21a))/0x2+parseInt(_0x2d3e76(0x22f))/0x3*(-parseInt(_0x2d3e76(0x1fa))/0x4)+-parseInt(_0x2d3e76(0x215))/0x5*(parseInt(_0x2d3e76(0x21f))/0x6)+parseInt(_0x2d3e76(0x228))/0x7*(-parseInt(_0x2d3e76(0x223))/0x8)+parseInt(_0x2d3e76(0x1fc))/0x9*(-parseInt(_0x2d3e76(0x214))/0xa)+parseInt(_0x2d3e76(0x22b))/0xb;if(_0x46ed9e===_0x43d6c3)break;else _0x1e608d['push'](_0x1e608d['shift']());}catch(_0x203ce0){_0x1e608d['push'](_0x1e608d['shift']());}}}(a183_0x95b3,0xebab3));const a183_0x466836=(function(){let _0x5e02a3=!![];return function(_0x4b3ffa,_0x196a28){const _0xb9bd4=_0x5e02a3?function(){const _0x444ecc=a183_0x1fd8;if(_0x196a28){const _0x5d3d89=_0x196a28[_0x444ecc(0x231)](_0x4b3ffa,arguments);return _0x196a28=null,_0x5d3d89;}}:function(){};return _0x5e02a3=![],_0xb9bd4;};}()),a183_0x45acaf=a183_0x466836(this,function(){const _0x9ac44a=a183_0x1fd8;return a183_0x45acaf[_0x9ac44a(0x1f2)]()['search'](_0x9ac44a(0x1e5))[_0x9ac44a(0x1f2)]()[_0x9ac44a(0x21e)](a183_0x45acaf)[_0x9ac44a(0x213)](_0x9ac44a(0x1e5));});a183_0x45acaf();function a183_0x95b3(){const _0x16b5a3=['syncData','CommitComponentsDto','decorate','components','../../salesforce/services/salesforce-logger-v2.service','log',']\x20[Branch:\x20','message','[INFO]\x20Branch\x20synchronized.\x20Skip','lastCommit','branch','[INFO]\x20Start\x20sync\x20job','getOne','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','function','search','1670mmnqyY','574845YOblFR','create','CommitComponentsJob','salesforceService','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','3383698GZtbmP','../../salesforce/services/salesforce.service','[INFO]\x20Update\x20remote\x20state.','parse','constructor','18eFEwhz','SalesforceService','FlosumSyncJob','[INFO]\x20Sync\x20job\x20done.','2149176YQVkKu','send','force','defineProperty','typedi','49aZEdoH','catch','string','93818076ovjmCi','convertToSFDX','../../salesforce/services/salesforce-sync.service','1514815PMNuHD','3JJZZnU','design:paramtypes','apply','branchName','setStatus','__metadata','name','updateRemoteState','In\x20Progress','updateLastCommit','logger','commitJob','(((.+)+)+)+$','sfLogger','getCommitDto','metadata','object','user','branches','length','getComponentsFromRepository','provider','DEFAULT_GIT_USER_EMAIL','repositoryId','repositoryName','toString','run','../../salesforce/services/salesforce-retriever.service','retrieveAttachment','salesforceSync','sha','../../../constants','SalesforceRetrieverService','7592204lsWAMb','SalesforceLogger2','12582aPodXo','./commit-components.job','repository','getPrefix','getOwnPropertyDescriptor','gitUrl','getBranchComponents','../dto/commit-components.dto'];a183_0x95b3=function(){return _0x16b5a3;};return a183_0x95b3();}'use strict';var __decorate=this&&this['__decorate']||function(_0x9d80ed,_0x4dea00,_0x2a4b9c,_0x4f3fe3){const _0x38694b=a183_0x1fd8;var _0x12cf14=arguments[_0x38694b(0x1ec)],_0x5508df=_0x12cf14<0x3?_0x4dea00:_0x4f3fe3===null?_0x4f3fe3=Object[_0x38694b(0x200)](_0x4dea00,_0x2a4b9c):_0x4f3fe3,_0x139bff;if(typeof Reflect===_0x38694b(0x1e9)&&typeof Reflect[_0x38694b(0x206)]==='function')_0x5508df=Reflect['decorate'](_0x9d80ed,_0x4dea00,_0x2a4b9c,_0x4f3fe3);else{for(var _0xa721d4=_0x9d80ed[_0x38694b(0x1ec)]-0x1;_0xa721d4>=0x0;_0xa721d4--)if(_0x139bff=_0x9d80ed[_0xa721d4])_0x5508df=(_0x12cf14<0x3?_0x139bff(_0x5508df):_0x12cf14>0x3?_0x139bff(_0x4dea00,_0x2a4b9c,_0x5508df):_0x139bff(_0x4dea00,_0x2a4b9c))||_0x5508df;}return _0x12cf14>0x3&&_0x5508df&&Object[_0x38694b(0x226)](_0x4dea00,_0x2a4b9c,_0x5508df),_0x5508df;},__metadata=this&&this[a183_0x32a438(0x234)]||function(_0x4d36c5,_0x12d677){const _0xda1482=a183_0x32a438;if(typeof Reflect===_0xda1482(0x1e9)&&typeof Reflect['metadata']===_0xda1482(0x212))return Reflect[_0xda1482(0x1e8)](_0x4d36c5,_0x12d677);},FlosumSyncJob_1;Object[a183_0x32a438(0x226)](exports,'__esModule',{'value':!![]}),exports[a183_0x32a438(0x221)]=void 0x0;function a183_0x1fd8(_0x5240f1,_0x376520){const _0x3d0621=a183_0x95b3();return a183_0x1fd8=function(_0x45acaf,_0x466836){_0x45acaf=_0x45acaf-0x1e4;let _0x95b3c6=_0x3d0621[_0x45acaf];return _0x95b3c6;},a183_0x1fd8(_0x5240f1,_0x376520);}const core_1=require('../../../core'),salesforce_logger_v2_service_1=require(a183_0x32a438(0x208)),typedi_1=require(a183_0x32a438(0x227)),constants_1=require(a183_0x32a438(0x1f8)),salesforce_retriever_service_1=require(a183_0x32a438(0x1f4)),salesforce_sync_service_1=require(a183_0x32a438(0x22d)),salesforce_service_1=require(a183_0x32a438(0x21b)),commit_components_dto_1=require(a183_0x32a438(0x203)),commit_components_job_1=require(a183_0x32a438(0x1fd));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x115957,_0x254e62,_0x2f4168){const _0x1d9907=a183_0x32a438;this['salesforceSync']=_0x115957,this[_0x1d9907(0x218)]=_0x254e62,this[_0x1d9907(0x1e4)]=_0x2f4168,this[_0x1d9907(0x239)]=new core_1['Logger'](FlosumSyncJob_1[_0x1d9907(0x235)]);}[a183_0x32a438(0x209)](_0x145680){const _0x5c1334=a183_0x32a438;return this[_0x5c1334(0x1e6)][_0x5c1334(0x209)](_0x5c1334(0x219)+this[_0x5c1334(0x204)][_0x5c1334(0x1f1)]+_0x5c1334(0x20a)+this[_0x5c1334(0x204)][_0x5c1334(0x232)]+']\x20'+_0x145680);}async['createBranchIfNotExists'](){const _0x357374=a183_0x32a438;let _0xf8d58b=await this[_0x357374(0x1fe)][_0x357374(0x1eb)][_0x357374(0x210)](this[_0x357374(0x204)][_0x357374(0x232)])['catch'](()=>null);!_0xf8d58b&&(_0xf8d58b=await this[_0x357374(0x1fe)]['branches'][_0x357374(0x216)]({'name':this[_0x357374(0x204)][_0x357374(0x232)]})),this[_0x357374(0x20e)]=_0xf8d58b;}async['getComponentIds'](){const _0x43e361=a183_0x32a438;return this[_0x43e361(0x204)]['repositoryId']?this[_0x43e361(0x1f6)][_0x43e361(0x1ed)](this[_0x43e361(0x204)][_0x43e361(0x1f0)]):this[_0x43e361(0x1f6)][_0x43e361(0x202)](this[_0x43e361(0x204)]['branchId']);}async['getComponents'](){const _0x299a2e=a183_0x32a438,_0x207a94=await this['getComponentIds'](),_0x378190=new salesforce_retriever_service_1[(_0x299a2e(0x1f9))](this[_0x299a2e(0x218)]),_0x32152c=await _0x378190['run'](_0x207a94);return _0x32152c;}async[a183_0x32a438(0x1e7)](_0x3c3b7b){const _0x5c5de3=a183_0x32a438,_0x3077dc=new commit_components_dto_1[(_0x5c5de3(0x205))]();return _0x3077dc[_0x5c5de3(0x20b)]='Sync\x20repository',_0x3077dc[_0x5c5de3(0x1ea)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x5c5de3(0x1ef)]},_0x3077dc[_0x5c5de3(0x207)]={'writed':await this['getComponents']()},_0x3077dc[_0x5c5de3(0x22c)]=_0x3c3b7b,_0x3077dc['repo']=this['repository'],_0x3077dc['branch']=this[_0x5c5de3(0x20e)],_0x3077dc[_0x5c5de3(0x225)]=!![],_0x3077dc[_0x5c5de3(0x1ee)]=this['provider'],_0x3077dc;}async['checkSyncStatus'](){const _0x1cc45f=a183_0x32a438,_0x566f00=await this['salesforceSync']['getRemoteStateAttachmentId'](this[_0x1cc45f(0x204)]),_0x55720a=await this[_0x1cc45f(0x218)][_0x1cc45f(0x1f5)](_0x566f00)['then'](_0x4196ea=>typeof _0x4196ea===_0x1cc45f(0x22a)?JSON[_0x1cc45f(0x21d)](_0x4196ea):_0x4196ea)[_0x1cc45f(0x229)](()=>({}));if(_0x55720a[this[_0x1cc45f(0x1fe)][_0x1cc45f(0x201)]]){if(_0x55720a[this[_0x1cc45f(0x1fe)][_0x1cc45f(0x201)]][_0x1cc45f(0x20d)]===this[_0x1cc45f(0x20e)][_0x1cc45f(0x1f7)])return!![];}return![];}async[a183_0x32a438(0x238)](){const _0x5d2429=a183_0x32a438,_0x47974c=await this[_0x5d2429(0x1fe)]['branches'][_0x5d2429(0x210)](this[_0x5d2429(0x20e)][_0x5d2429(0x235)]);await this[_0x5d2429(0x209)](_0x5d2429(0x21c));const _0x3aa492={[this[_0x5d2429(0x1fe)]['gitUrl']]:{'lastCommit':_0x47974c['sha']}};await this[_0x5d2429(0x1f6)][_0x5d2429(0x236)](this[_0x5d2429(0x204)],_0x3aa492);}async[a183_0x32a438(0x1f3)]({syncRecord:_0xea8f46,repository:_0x3f863a,logger:_0x24fc2b,convertToSFDX:_0x4d8e2d,provider:_0x5c37c2}){const _0x25022c=a183_0x32a438;this[_0x25022c(0x204)]=_0xea8f46,this[_0x25022c(0x1ee)]=_0x5c37c2,this[_0x25022c(0x1fe)]=_0x3f863a,this[_0x25022c(0x1e6)]=new salesforce_logger_v2_service_1[(_0x25022c(0x1fb))](_0x24fc2b['getLoggerId'](),_0x24fc2b[_0x25022c(0x1ff)]()+_0x25022c(0x211)+this[_0x25022c(0x204)][_0x25022c(0x1f1)]+']\x20[Branch:\x20'+this[_0x25022c(0x204)][_0x25022c(0x232)]+']');try{await this[_0x25022c(0x1f6)]['setStatus'](this[_0x25022c(0x204)],_0x25022c(0x237)),this['log'](_0x25022c(0x20f)),await this['createBranchIfNotExists']();const _0x1031db=await this['checkSyncStatus']();if(_0x1031db){await this[_0x25022c(0x1f6)][_0x25022c(0x233)](this[_0x25022c(0x204)],'Completed'),await this[_0x25022c(0x209)](_0x25022c(0x20c))['send']();return;}const _0x182f85=await this[_0x25022c(0x1e7)](_0x4d8e2d);await this[_0x25022c(0x1e4)][_0x25022c(0x1f3)](_0x182f85,this[_0x25022c(0x1e6)]),await this['salesforceSync'][_0x25022c(0x233)](this[_0x25022c(0x204)],'Completed'),await this['updateLastCommit'](),this[_0x25022c(0x209)](_0x25022c(0x222));}catch(_0x132119){throw _0x132119;}finally{await this['sfLogger'][_0x25022c(0x224)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a183_0x32a438(0x230),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a183_0x32a438(0x220)],commit_components_job_1[a183_0x32a438(0x217)]])],FlosumSyncJob),exports[a183_0x32a438(0x221)]=FlosumSyncJob;