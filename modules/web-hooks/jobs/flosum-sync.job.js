const a182_0x411eb9=a182_0x2b69;(function(_0x2e47b2,_0x185e70){const _0x485d2f=a182_0x2b69,_0x5be712=_0x2e47b2();while(!![]){try{const _0x28bd03=-parseInt(_0x485d2f(0x13d))/0x1+parseInt(_0x485d2f(0x143))/0x2*(-parseInt(_0x485d2f(0x157))/0x3)+parseInt(_0x485d2f(0x15d))/0x4+-parseInt(_0x485d2f(0x161))/0x5+-parseInt(_0x485d2f(0x17c))/0x6+-parseInt(_0x485d2f(0x15e))/0x7*(parseInt(_0x485d2f(0x179))/0x8)+parseInt(_0x485d2f(0x159))/0x9*(parseInt(_0x485d2f(0x163))/0xa);if(_0x28bd03===_0x185e70)break;else _0x5be712['push'](_0x5be712['shift']());}catch(_0x1e685c){_0x5be712['push'](_0x5be712['shift']());}}}(a182_0x2a5c,0x787e1));function a182_0x2b69(_0x2e6c09,_0x43706e){const _0x13bac0=a182_0x2a5c();return a182_0x2b69=function(_0x2b9254,_0x3aae89){_0x2b9254=_0x2b9254-0x131;let _0x2a5cee=_0x13bac0[_0x2b9254];return _0x2a5cee;},a182_0x2b69(_0x2e6c09,_0x43706e);}const a182_0x3aae89=(function(){let _0x459d65=!![];return function(_0x4a93a4,_0x3d5efc){const _0x222d26=_0x459d65?function(){if(_0x3d5efc){const _0x354203=_0x3d5efc['apply'](_0x4a93a4,arguments);return _0x3d5efc=null,_0x354203;}}:function(){};return _0x459d65=![],_0x222d26;};}()),a182_0x2b9254=a182_0x3aae89(this,function(){const _0x5da89f=a182_0x2b69;return a182_0x2b9254[_0x5da89f(0x167)]()['search'](_0x5da89f(0x180))[_0x5da89f(0x167)]()['constructor'](a182_0x2b9254)[_0x5da89f(0x15f)](_0x5da89f(0x180));});function a182_0x2a5c(){const _0x3376cb=['SalesforceRetrieverService','SalesforceLogger2','updateLastCommit','function','syncData','length','getCommitDto','SalesforceSyncService','repositoryName','checkSyncStatus','Service','branchName','getRemoteStateAttachmentId','DEFAULT_GIT_USER_NAME','branchId','retrieveAttachment','lastCommit','243CHKdfK','CommitComponentsDto','72agVdKX','getBranchComponents','commitJob','CommitComponentsJob','3503944dudVfk','49FMdxHQ','search','create','167805AhyIEX','DEFAULT_GIT_USER_EMAIL','1898140AZIFan','__metadata','name','salesforceSync','toString','Sync\x20repository','user','[INFO]\x20Start\x20sync\x20job','object','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','then','force','../../salesforce/services/salesforce.service','repository','../../../core','message',']\x20[Branch:\x20','__esModule','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','convertToSFDX','createBranchIfNotExists','sfLogger','633544cBKYAY','[INFO]\x20Sync\x20job\x20done.','../../../constants','3829860xnGLRi','provider','branch','getLoggerId','(((.+)+)+)+$','design:paramtypes','branches','decorate','getComponentIds','setStatus','updateRemoteState','../dto/commit-components.dto','parse','repositoryId','sha','log','[INFO]\x20Update\x20remote\x20state.','../../salesforce/services/salesforce-logger-v2.service','FlosumSyncJob','salesforceService','string','run','components','defineProperty','metadata','../../salesforce/services/salesforce-retriever.service','__decorate','catch','gitUrl','331218iFYYVm','Completed','send','getComponents','typedi','In\x20Progress','8482xtBpfG','[INFO]\x20Branch\x20synchronized.\x20Skip','Logger'];a182_0x2a5c=function(){return _0x3376cb;};return a182_0x2a5c();}a182_0x2b9254();'use strict';var __decorate=this&&this[a182_0x411eb9(0x13a)]||function(_0x55828d,_0x46829b,_0x34a196,_0x55fb68){const _0x20994a=a182_0x411eb9;var _0x38080d=arguments[_0x20994a(0x14b)],_0x5549c0=_0x38080d<0x3?_0x46829b:_0x55fb68===null?_0x55fb68=Object['getOwnPropertyDescriptor'](_0x46829b,_0x34a196):_0x55fb68,_0x558be5;if(typeof Reflect===_0x20994a(0x16b)&&typeof Reflect[_0x20994a(0x183)]===_0x20994a(0x149))_0x5549c0=Reflect[_0x20994a(0x183)](_0x55828d,_0x46829b,_0x34a196,_0x55fb68);else{for(var _0x273d82=_0x55828d[_0x20994a(0x14b)]-0x1;_0x273d82>=0x0;_0x273d82--)if(_0x558be5=_0x55828d[_0x273d82])_0x5549c0=(_0x38080d<0x3?_0x558be5(_0x5549c0):_0x38080d>0x3?_0x558be5(_0x46829b,_0x34a196,_0x5549c0):_0x558be5(_0x46829b,_0x34a196))||_0x5549c0;}return _0x38080d>0x3&&_0x5549c0&&Object[_0x20994a(0x137)](_0x46829b,_0x34a196,_0x5549c0),_0x5549c0;},__metadata=this&&this[a182_0x411eb9(0x164)]||function(_0x5d8fbe,_0x4f727d){const _0x16003b=a182_0x411eb9;if(typeof Reflect==='object'&&typeof Reflect[_0x16003b(0x138)]===_0x16003b(0x149))return Reflect[_0x16003b(0x138)](_0x5d8fbe,_0x4f727d);},FlosumSyncJob_1;Object[a182_0x411eb9(0x137)](exports,a182_0x411eb9(0x174),{'value':!![]}),exports[a182_0x411eb9(0x132)]=void 0x0;const core_1=require(a182_0x411eb9(0x171)),salesforce_logger_v2_service_1=require(a182_0x411eb9(0x131)),typedi_1=require(a182_0x411eb9(0x141)),constants_1=require(a182_0x411eb9(0x17b)),salesforce_retriever_service_1=require(a182_0x411eb9(0x139)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a182_0x411eb9(0x16f)),commit_components_dto_1=require(a182_0x411eb9(0x187)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x55af7d,_0x5c6548,_0x273100){const _0x13cb9d=a182_0x411eb9;this['salesforceSync']=_0x55af7d,this[_0x13cb9d(0x133)]=_0x5c6548,this['commitJob']=_0x273100,this['logger']=new core_1[(_0x13cb9d(0x145))](FlosumSyncJob_1[_0x13cb9d(0x165)]);}['log'](_0x471b58){const _0xaaf368=a182_0x411eb9;return this[_0xaaf368(0x178)][_0xaaf368(0x18b)](_0xaaf368(0x175)+this[_0xaaf368(0x14a)]['repositoryName']+_0xaaf368(0x173)+this['syncData']['branchName']+']\x20'+_0x471b58);}async[a182_0x411eb9(0x177)](){const _0x4f5205=a182_0x411eb9;let _0x24a134=await this['repository']['branches']['getOne'](this['syncData'][_0x4f5205(0x151)])['catch'](()=>null);!_0x24a134&&(_0x24a134=await this[_0x4f5205(0x170)][_0x4f5205(0x182)][_0x4f5205(0x160)]({'name':this[_0x4f5205(0x14a)][_0x4f5205(0x151)]})),this[_0x4f5205(0x17e)]=_0x24a134;}async[a182_0x411eb9(0x184)](){const _0x3480bc=a182_0x411eb9;return this[_0x3480bc(0x14a)]['repositoryId']?this[_0x3480bc(0x166)]['getComponentsFromRepository'](this[_0x3480bc(0x14a)][_0x3480bc(0x189)]):this[_0x3480bc(0x166)][_0x3480bc(0x15a)](this['syncData'][_0x3480bc(0x154)]);}async[a182_0x411eb9(0x140)](){const _0x27cf42=a182_0x411eb9,_0x329016=await this['getComponentIds'](),_0x19cc38=new salesforce_retriever_service_1[(_0x27cf42(0x146))](this[_0x27cf42(0x133)]),_0x5e8ec1=await _0x19cc38[_0x27cf42(0x135)](_0x329016);return _0x5e8ec1;}async[a182_0x411eb9(0x14c)](_0xcaa158){const _0x208250=a182_0x411eb9,_0x2f9023=new commit_components_dto_1[(_0x208250(0x158))]();return _0x2f9023[_0x208250(0x172)]=_0x208250(0x168),_0x2f9023[_0x208250(0x169)]={'name':constants_1[_0x208250(0x153)],'email':constants_1[_0x208250(0x162)]},_0x2f9023[_0x208250(0x136)]={'writed':await this[_0x208250(0x140)]()},_0x2f9023[_0x208250(0x176)]=_0xcaa158,_0x2f9023['repo']=this[_0x208250(0x170)],_0x2f9023['branch']=this[_0x208250(0x17e)],_0x2f9023[_0x208250(0x16e)]=!![],_0x2f9023[_0x208250(0x17d)]=this[_0x208250(0x17d)],_0x2f9023;}async[a182_0x411eb9(0x14f)](){const _0x4f2a14=a182_0x411eb9,_0x24f397=await this[_0x4f2a14(0x166)][_0x4f2a14(0x152)](this[_0x4f2a14(0x14a)]),_0x370a5d=await this[_0x4f2a14(0x133)][_0x4f2a14(0x155)](_0x24f397)[_0x4f2a14(0x16d)](_0x1e219d=>typeof _0x1e219d===_0x4f2a14(0x134)?JSON[_0x4f2a14(0x188)](_0x1e219d):_0x1e219d)[_0x4f2a14(0x13b)](()=>({}));if(_0x370a5d[this[_0x4f2a14(0x170)][_0x4f2a14(0x13c)]]){if(_0x370a5d[this[_0x4f2a14(0x170)]['gitUrl']][_0x4f2a14(0x156)]===this['branch'][_0x4f2a14(0x18a)])return!![];}return![];}async[a182_0x411eb9(0x148)](){const _0x5388bd=a182_0x411eb9,_0x17e0a9=await this[_0x5388bd(0x170)]['branches']['getOne'](this[_0x5388bd(0x17e)][_0x5388bd(0x165)]);await this[_0x5388bd(0x18b)](_0x5388bd(0x18c));const _0x9f6b4={[this[_0x5388bd(0x170)][_0x5388bd(0x13c)]]:{'lastCommit':_0x17e0a9['sha']}};await this[_0x5388bd(0x166)][_0x5388bd(0x186)](this[_0x5388bd(0x14a)],_0x9f6b4);}async[a182_0x411eb9(0x135)]({syncRecord:_0x1adde3,repository:_0x28928d,logger:_0x227193,convertToSFDX:_0x9aa9fe,provider:_0x2f44eb}){const _0x4a2b1d=a182_0x411eb9;this[_0x4a2b1d(0x14a)]=_0x1adde3,this[_0x4a2b1d(0x17d)]=_0x2f44eb,this[_0x4a2b1d(0x170)]=_0x28928d,this[_0x4a2b1d(0x178)]=new salesforce_logger_v2_service_1[(_0x4a2b1d(0x147))](_0x227193[_0x4a2b1d(0x17f)](),_0x227193['getPrefix']()+_0x4a2b1d(0x16c)+this[_0x4a2b1d(0x14a)][_0x4a2b1d(0x14e)]+']\x20[Branch:\x20'+this[_0x4a2b1d(0x14a)][_0x4a2b1d(0x151)]+']');try{await this['salesforceSync'][_0x4a2b1d(0x185)](this[_0x4a2b1d(0x14a)],_0x4a2b1d(0x142)),this[_0x4a2b1d(0x18b)](_0x4a2b1d(0x16a)),await this[_0x4a2b1d(0x177)]();const _0x215659=await this[_0x4a2b1d(0x14f)]();if(_0x215659){await this[_0x4a2b1d(0x166)][_0x4a2b1d(0x185)](this['syncData'],_0x4a2b1d(0x13e)),await this[_0x4a2b1d(0x18b)](_0x4a2b1d(0x144))[_0x4a2b1d(0x13f)]();return;}const _0x4bb345=await this[_0x4a2b1d(0x14c)](_0x9aa9fe);await this[_0x4a2b1d(0x15b)][_0x4a2b1d(0x135)](_0x4bb345,this['sfLogger']),await this['salesforceSync'][_0x4a2b1d(0x185)](this[_0x4a2b1d(0x14a)],'Completed'),await this[_0x4a2b1d(0x148)](),this[_0x4a2b1d(0x18b)](_0x4a2b1d(0x17a));}catch(_0x8a7e18){throw _0x8a7e18;}finally{await this[_0x4a2b1d(0x178)]['send']();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a182_0x411eb9(0x150)]({'transient':!![]}),__metadata(a182_0x411eb9(0x181),[salesforce_sync_service_1[a182_0x411eb9(0x14d)],salesforce_service_1['SalesforceService'],commit_components_job_1[a182_0x411eb9(0x15c)]])],FlosumSyncJob),exports[a182_0x411eb9(0x132)]=FlosumSyncJob;