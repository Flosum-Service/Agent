const a183_0x47b82c=a183_0x472c;(function(_0x1f0e89,_0x369a41){const _0x353a65=a183_0x472c,_0x2a1d89=_0x1f0e89();while(!![]){try{const _0x3ae3e9=-parseInt(_0x353a65(0x1dd))/0x1+-parseInt(_0x353a65(0x1f2))/0x2*(parseInt(_0x353a65(0x221))/0x3)+parseInt(_0x353a65(0x204))/0x4+-parseInt(_0x353a65(0x227))/0x5+parseInt(_0x353a65(0x1f6))/0x6*(-parseInt(_0x353a65(0x1fc))/0x7)+parseInt(_0x353a65(0x22d))/0x8+-parseInt(_0x353a65(0x1e1))/0x9*(-parseInt(_0x353a65(0x1e4))/0xa);if(_0x3ae3e9===_0x369a41)break;else _0x2a1d89['push'](_0x2a1d89['shift']());}catch(_0x28925a){_0x2a1d89['push'](_0x2a1d89['shift']());}}}(a183_0x1591,0xafd08));const a183_0x2d4173=(function(){let _0x5bb066=!![];return function(_0x178116,_0x4ccd82){const _0x16fec1=_0x5bb066?function(){if(_0x4ccd82){const _0x1f891e=_0x4ccd82['apply'](_0x178116,arguments);return _0x4ccd82=null,_0x1f891e;}}:function(){};return _0x5bb066=![],_0x16fec1;};}()),a183_0x23b2a3=a183_0x2d4173(this,function(){const _0x29fd5b=a183_0x472c;return a183_0x23b2a3['toString']()[_0x29fd5b(0x207)](_0x29fd5b(0x22b))[_0x29fd5b(0x225)]()[_0x29fd5b(0x20e)](a183_0x23b2a3)[_0x29fd5b(0x207)]('(((.+)+)+)+$');});a183_0x23b2a3();'use strict';var __decorate=this&&this[a183_0x47b82c(0x209)]||function(_0x8192ce,_0x59440e,_0x4b3b0e,_0x25a769){const _0x4c01fa=a183_0x47b82c;var _0x428207=arguments['length'],_0x44f159=_0x428207<0x3?_0x59440e:_0x25a769===null?_0x25a769=Object[_0x4c01fa(0x1e6)](_0x59440e,_0x4b3b0e):_0x25a769,_0x568321;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x4c01fa(0x1df))_0x44f159=Reflect[_0x4c01fa(0x201)](_0x8192ce,_0x59440e,_0x4b3b0e,_0x25a769);else{for(var _0x3beb10=_0x8192ce[_0x4c01fa(0x1e8)]-0x1;_0x3beb10>=0x0;_0x3beb10--)if(_0x568321=_0x8192ce[_0x3beb10])_0x44f159=(_0x428207<0x3?_0x568321(_0x44f159):_0x428207>0x3?_0x568321(_0x59440e,_0x4b3b0e,_0x44f159):_0x568321(_0x59440e,_0x4b3b0e))||_0x44f159;}return _0x428207>0x3&&_0x44f159&&Object[_0x4c01fa(0x21b)](_0x59440e,_0x4b3b0e,_0x44f159),_0x44f159;},__metadata=this&&this[a183_0x47b82c(0x203)]||function(_0x375309,_0x552f3c){const _0x2ab9c8=a183_0x47b82c;if(typeof Reflect===_0x2ab9c8(0x223)&&typeof Reflect[_0x2ab9c8(0x219)]===_0x2ab9c8(0x1df))return Reflect[_0x2ab9c8(0x219)](_0x375309,_0x552f3c);},FlosumSyncJob_1;Object[a183_0x47b82c(0x21b)](exports,'__esModule',{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const core_1=require(a183_0x47b82c(0x1e9)),salesforce_logger_v2_service_1=require(a183_0x47b82c(0x1e0)),typedi_1=require('typedi'),constants_1=require('../../../constants'),salesforce_retriever_service_1=require(a183_0x47b82c(0x1ec)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a183_0x47b82c(0x220)),commit_components_dto_1=require(a183_0x47b82c(0x1fb)),commit_components_job_1=require(a183_0x47b82c(0x1ef));function a183_0x472c(_0x523754,_0x2da3a6){const _0x996254=a183_0x1591();return a183_0x472c=function(_0x23b2a3,_0x2d4173){_0x23b2a3=_0x23b2a3-0x1dc;let _0x1591f9=_0x996254[_0x23b2a3];return _0x1591f9;},a183_0x472c(_0x523754,_0x2da3a6);}let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x3f304f,_0x2c3658,_0x2a26ad){const _0x3cef96=a183_0x47b82c;this[_0x3cef96(0x208)]=_0x3f304f,this[_0x3cef96(0x214)]=_0x2c3658,this[_0x3cef96(0x1ee)]=_0x2a26ad,this[_0x3cef96(0x206)]=new core_1[(_0x3cef96(0x20a))](FlosumSyncJob_1[_0x3cef96(0x22a)]);}[a183_0x47b82c(0x1f7)](_0x554ff0){const _0x59f59f=a183_0x47b82c;return this[_0x59f59f(0x1f1)]['log'](_0x59f59f(0x1e3)+this[_0x59f59f(0x1ff)][_0x59f59f(0x1de)]+']\x20[Branch:\x20'+this[_0x59f59f(0x1ff)][_0x59f59f(0x217)]+']\x20'+_0x554ff0);}async['createBranchIfNotExists'](){const _0x30483f=a183_0x47b82c;let _0x47bff2=await this[_0x30483f(0x1fa)][_0x30483f(0x1ea)][_0x30483f(0x211)](this[_0x30483f(0x1ff)][_0x30483f(0x217)])[_0x30483f(0x1dc)](()=>null);!_0x47bff2&&(_0x47bff2=await this['repository']['branches'][_0x30483f(0x1e5)]({'name':this[_0x30483f(0x1ff)][_0x30483f(0x217)]})),this['branch']=_0x47bff2;}async[a183_0x47b82c(0x205)](){const _0x4ae37e=a183_0x47b82c;return this[_0x4ae37e(0x1ff)][_0x4ae37e(0x20c)]?this[_0x4ae37e(0x208)][_0x4ae37e(0x22f)](this[_0x4ae37e(0x1ff)][_0x4ae37e(0x20c)]):this['salesforceSync'][_0x4ae37e(0x213)](this[_0x4ae37e(0x1ff)]['branchId']);}async[a183_0x47b82c(0x1e2)](){const _0x471067=a183_0x47b82c,_0xb0adc6=await this['getComponentIds'](),_0x5a9c5a=new salesforce_retriever_service_1[(_0x471067(0x21c))](this[_0x471067(0x214)]),_0x4edf09=await _0x5a9c5a[_0x471067(0x1f0)](_0xb0adc6);return _0x4edf09;}async[a183_0x47b82c(0x20f)](_0x48aa53){const _0xa4d0e2=a183_0x47b82c,_0x13f02a=new commit_components_dto_1[(_0xa4d0e2(0x202))]();return _0x13f02a[_0xa4d0e2(0x216)]=_0xa4d0e2(0x215),_0x13f02a[_0xa4d0e2(0x21f)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0xa4d0e2(0x231)]},_0x13f02a[_0xa4d0e2(0x229)]={'writed':await this[_0xa4d0e2(0x1e2)]()},_0x13f02a['convertToSFDX']=_0x48aa53,_0x13f02a[_0xa4d0e2(0x212)]=this[_0xa4d0e2(0x1fa)],_0x13f02a[_0xa4d0e2(0x1f4)]=this[_0xa4d0e2(0x1f4)],_0x13f02a['force']=!![],_0x13f02a[_0xa4d0e2(0x1e7)]=this[_0xa4d0e2(0x1e7)],_0x13f02a;}async[a183_0x47b82c(0x224)](){const _0x31021a=a183_0x47b82c,_0x87a666=await this[_0x31021a(0x208)][_0x31021a(0x21d)](this[_0x31021a(0x1ff)]),_0x27170b=await this['salesforceService'][_0x31021a(0x1f5)](_0x87a666)['then'](_0x23c074=>typeof _0x23c074===_0x31021a(0x1fe)?JSON['parse'](_0x23c074):_0x23c074)[_0x31021a(0x1dc)](()=>({}));if(_0x27170b[this['repository'][_0x31021a(0x232)]]){if(_0x27170b[this[_0x31021a(0x1fa)]['gitUrl']]['lastCommit']===this[_0x31021a(0x1f4)][_0x31021a(0x22e)])return!![];}return![];}async['updateLastCommit'](){const _0x32dd4e=a183_0x47b82c,_0x5aec79=await this[_0x32dd4e(0x1fa)][_0x32dd4e(0x1ea)][_0x32dd4e(0x211)](this[_0x32dd4e(0x1f4)][_0x32dd4e(0x22a)]);await this[_0x32dd4e(0x1f7)](_0x32dd4e(0x1eb));const _0xb4cb6b={[this['repository'][_0x32dd4e(0x232)]]:{'lastCommit':_0x5aec79[_0x32dd4e(0x22e)]}};await this[_0x32dd4e(0x208)][_0x32dd4e(0x1fd)](this[_0x32dd4e(0x1ff)],_0xb4cb6b);}async['run']({syncRecord:_0x317e13,repository:_0x18e646,logger:_0x46fb52,convertToSFDX:_0x37b42b,provider:_0x5b9425}){const _0xe2397e=a183_0x47b82c;this[_0xe2397e(0x1ff)]=_0x317e13,this[_0xe2397e(0x1e7)]=_0x5b9425,this[_0xe2397e(0x1fa)]=_0x18e646,this[_0xe2397e(0x1f1)]=new salesforce_logger_v2_service_1[(_0xe2397e(0x22c))](_0x46fb52[_0xe2397e(0x1f9)](),_0x46fb52[_0xe2397e(0x1f3)]()+'\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0xe2397e(0x1ff)]['repositoryName']+_0xe2397e(0x20b)+this[_0xe2397e(0x1ff)][_0xe2397e(0x217)]+']');try{await this[_0xe2397e(0x208)]['setStatus'](this[_0xe2397e(0x1ff)],_0xe2397e(0x226)),this[_0xe2397e(0x1f7)](_0xe2397e(0x222)),await this[_0xe2397e(0x200)]();const _0x5ae13b=await this[_0xe2397e(0x224)]();if(_0x5ae13b){await this[_0xe2397e(0x208)][_0xe2397e(0x21a)](this[_0xe2397e(0x1ff)],_0xe2397e(0x210)),await this['log']('[INFO]\x20Branch\x20synchronized.\x20Skip')[_0xe2397e(0x20d)]();return;}const _0x946e1a=await this[_0xe2397e(0x20f)](_0x37b42b);await this[_0xe2397e(0x1ee)]['run'](_0x946e1a,this[_0xe2397e(0x1f1)]),await this[_0xe2397e(0x208)]['setStatus'](this[_0xe2397e(0x1ff)],_0xe2397e(0x210)),await this['updateLastCommit'](),this['log'](_0xe2397e(0x1f8));}catch(_0x274ee0){throw _0x274ee0;}finally{await this['sfLogger']['send']();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x47b82c(0x21e)]({'transient':!![]}),__metadata(a183_0x47b82c(0x1ed),[salesforce_sync_service_1[a183_0x47b82c(0x230)],salesforce_service_1['SalesforceService'],commit_components_job_1[a183_0x47b82c(0x228)]])],FlosumSyncJob),exports[a183_0x47b82c(0x218)]=FlosumSyncJob;function a183_0x1591(){const _0x541cb0=['102712hZfQTo','getPrefix','branch','retrieveAttachment','6NEcEoW','log','[INFO]\x20Sync\x20job\x20done.','getLoggerId','repository','../dto/commit-components.dto','455091JmmxDk','updateRemoteState','string','syncData','createBranchIfNotExists','decorate','CommitComponentsDto','__metadata','2731712PthevJ','getComponentIds','logger','search','salesforceSync','__decorate','Logger',']\x20[Branch:\x20','repositoryId','send','constructor','getCommitDto','Completed','getOne','repo','getBranchComponents','salesforceService','Sync\x20repository','message','branchName','FlosumSyncJob','metadata','setStatus','defineProperty','SalesforceRetrieverService','getRemoteStateAttachmentId','Service','user','../../salesforce/services/salesforce.service','81osxWzt','[INFO]\x20Start\x20sync\x20job','object','checkSyncStatus','toString','In\x20Progress','6783915pOVogU','CommitComponentsJob','components','name','(((.+)+)+)+$','SalesforceLogger2','9190928xIzweq','sha','getComponentsFromRepository','SalesforceSyncService','DEFAULT_GIT_USER_EMAIL','gitUrl','catch','216442PthlTx','repositoryName','function','../../salesforce/services/salesforce-logger-v2.service','5679OpvkxN','getComponents','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','30320NSSxSv','create','getOwnPropertyDescriptor','provider','length','../../../core','branches','[INFO]\x20Update\x20remote\x20state.','../../salesforce/services/salesforce-retriever.service','design:paramtypes','commitJob','./commit-components.job','run','sfLogger'];a183_0x1591=function(){return _0x541cb0;};return a183_0x1591();}