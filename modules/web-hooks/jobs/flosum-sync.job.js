const a183_0x107816=a183_0x2513;(function(_0x34ef3e,_0x4a44cf){const _0x49d551=a183_0x2513,_0x36e6b3=_0x34ef3e();while(!![]){try{const _0x2e5846=parseInt(_0x49d551(0x216))/0x1+parseInt(_0x49d551(0x22b))/0x2+parseInt(_0x49d551(0x1fd))/0x3+parseInt(_0x49d551(0x1e9))/0x4*(parseInt(_0x49d551(0x21b))/0x5)+parseInt(_0x49d551(0x209))/0x6+parseInt(_0x49d551(0x1ff))/0x7*(parseInt(_0x49d551(0x217))/0x8)+-parseInt(_0x49d551(0x20a))/0x9*(parseInt(_0x49d551(0x1fc))/0xa);if(_0x2e5846===_0x4a44cf)break;else _0x36e6b3['push'](_0x36e6b3['shift']());}catch(_0x22c441){_0x36e6b3['push'](_0x36e6b3['shift']());}}}(a183_0x3a5a,0x1ba96));function a183_0x3a5a(){const _0x1665b2=['string','Service','then','branch','defineProperty','Logger','object','branchId','138350eqBjRY','848sKtxIG','sfLogger','getComponentsFromRepository','apply','10rgMwCC','salesforceSync','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','function','CommitComponentsDto','getCommitDto','createBranchIfNotExists','length','getComponents','__metadata','create','SalesforceSyncService','convertToSFDX','Sync\x20repository','setStatus','SalesforceRetrieverService','121518utKJHQ','syncData','decorate','retrieveAttachment','parse','sha','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','../../salesforce/services/salesforce-retriever.service','[INFO]\x20Start\x20sync\x20job','log','branches','../../salesforce/services/salesforce-logger-v2.service','getOne','../../../core','force','run','metadata','updateLastCommit','(((.+)+)+)+$','components','__decorate','239968FGleWS','constructor','send','typedi','user','DEFAULT_GIT_USER_EMAIL','../../../constants','Completed','repositoryName','checkSyncStatus','SalesforceService','salesforceService','FlosumSyncJob','getBranchComponents','provider','getPrefix','../../salesforce/services/salesforce.service','name','toString','26880KEpZNc','22353MPzsjE','repository','1883vfQNnd','__esModule','commitJob','branchName','getComponentIds','gitUrl','CommitComponentsJob','getLoggerId','[INFO]\x20Branch\x20synchronized.\x20Skip','In\x20Progress','1339608YOodnk','1557BPjXIk','DEFAULT_GIT_USER_NAME','message','../../salesforce/services/salesforce-sync.service'];a183_0x3a5a=function(){return _0x1665b2;};return a183_0x3a5a();}const a183_0x1706ba=(function(){let _0x7d075d=!![];return function(_0x14b29e,_0xed63fb){const _0x3548fc=_0x7d075d?function(){const _0x2ed61f=a183_0x2513;if(_0xed63fb){const _0x5d568e=_0xed63fb[_0x2ed61f(0x21a)](_0x14b29e,arguments);return _0xed63fb=null,_0x5d568e;}}:function(){};return _0x7d075d=![],_0x3548fc;};}()),a183_0x391f4c=a183_0x1706ba(this,function(){const _0x528d96=a183_0x2513;return a183_0x391f4c[_0x528d96(0x1fb)]()['search'](_0x528d96(0x1e6))[_0x528d96(0x1fb)]()[_0x528d96(0x1ea)](a183_0x391f4c)['search']('(((.+)+)+)+$');});function a183_0x2513(_0x5b0d32,_0x37bf1b){const _0x20f2aa=a183_0x3a5a();return a183_0x2513=function(_0x391f4c,_0x1706ba){_0x391f4c=_0x391f4c-0x1e2;let _0x3a5a39=_0x20f2aa[_0x391f4c];return _0x3a5a39;},a183_0x2513(_0x5b0d32,_0x37bf1b);}a183_0x391f4c();'use strict';var __decorate=this&&this[a183_0x107816(0x1e8)]||function(_0x57421e,_0x2c8f42,_0x4c388d,_0x1173cc){const _0x49a60b=a183_0x107816;var _0x1ceedb=arguments[_0x49a60b(0x222)],_0x16b5b8=_0x1ceedb<0x3?_0x2c8f42:_0x1173cc===null?_0x1173cc=Object['getOwnPropertyDescriptor'](_0x2c8f42,_0x4c388d):_0x1173cc,_0x343788;if(typeof Reflect===_0x49a60b(0x214)&&typeof Reflect[_0x49a60b(0x22d)]===_0x49a60b(0x21e))_0x16b5b8=Reflect[_0x49a60b(0x22d)](_0x57421e,_0x2c8f42,_0x4c388d,_0x1173cc);else{for(var _0x25a5e1=_0x57421e[_0x49a60b(0x222)]-0x1;_0x25a5e1>=0x0;_0x25a5e1--)if(_0x343788=_0x57421e[_0x25a5e1])_0x16b5b8=(_0x1ceedb<0x3?_0x343788(_0x16b5b8):_0x1ceedb>0x3?_0x343788(_0x2c8f42,_0x4c388d,_0x16b5b8):_0x343788(_0x2c8f42,_0x4c388d))||_0x16b5b8;}return _0x1ceedb>0x3&&_0x16b5b8&&Object[_0x49a60b(0x212)](_0x2c8f42,_0x4c388d,_0x16b5b8),_0x16b5b8;},__metadata=this&&this[a183_0x107816(0x224)]||function(_0x5bd875,_0x3d5741){const _0x296f20=a183_0x107816;if(typeof Reflect===_0x296f20(0x214)&&typeof Reflect[_0x296f20(0x1e4)]===_0x296f20(0x21e))return Reflect['metadata'](_0x5bd875,_0x3d5741);},FlosumSyncJob_1;Object[a183_0x107816(0x212)](exports,a183_0x107816(0x200),{'value':!![]}),exports[a183_0x107816(0x1f5)]=void 0x0;const core_1=require(a183_0x107816(0x238)),salesforce_logger_v2_service_1=require(a183_0x107816(0x236)),typedi_1=require(a183_0x107816(0x1ec)),constants_1=require(a183_0x107816(0x1ef)),salesforce_retriever_service_1=require(a183_0x107816(0x232)),salesforce_sync_service_1=require(a183_0x107816(0x20d)),salesforce_service_1=require(a183_0x107816(0x1f9)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x5d0f45,_0x413b81,_0x2961cd){const _0x58abbc=a183_0x107816;this[_0x58abbc(0x21c)]=_0x5d0f45,this[_0x58abbc(0x1f4)]=_0x413b81,this[_0x58abbc(0x201)]=_0x2961cd,this['logger']=new core_1[(_0x58abbc(0x213))](FlosumSyncJob_1['name']);}['log'](_0x4ed9a9){const _0x134de8=a183_0x107816;return this['sfLogger'][_0x134de8(0x234)](_0x134de8(0x231)+this['syncData'][_0x134de8(0x1f1)]+']\x20[Branch:\x20'+this[_0x134de8(0x22c)][_0x134de8(0x202)]+']\x20'+_0x4ed9a9);}async[a183_0x107816(0x221)](){const _0x210209=a183_0x107816;let _0xde3be1=await this[_0x210209(0x1fe)]['branches'][_0x210209(0x237)](this['syncData']['branchName'])['catch'](()=>null);!_0xde3be1&&(_0xde3be1=await this['repository'][_0x210209(0x235)][_0x210209(0x225)]({'name':this[_0x210209(0x22c)]['branchName']})),this['branch']=_0xde3be1;}async[a183_0x107816(0x203)](){const _0x5192bb=a183_0x107816;return this[_0x5192bb(0x22c)]['repositoryId']?this['salesforceSync'][_0x5192bb(0x219)](this[_0x5192bb(0x22c)]['repositoryId']):this['salesforceSync'][_0x5192bb(0x1f6)](this[_0x5192bb(0x22c)][_0x5192bb(0x215)]);}async[a183_0x107816(0x223)](){const _0x13f832=a183_0x107816,_0x230291=await this[_0x13f832(0x203)](),_0x46b23b=new salesforce_retriever_service_1[(_0x13f832(0x22a))](this[_0x13f832(0x1f4)]),_0x5b829e=await _0x46b23b[_0x13f832(0x1e3)](_0x230291);return _0x5b829e;}async[a183_0x107816(0x220)](_0x4a283b){const _0x1b0a21=a183_0x107816,_0x47cba1=new commit_components_dto_1[(_0x1b0a21(0x21f))]();return _0x47cba1[_0x1b0a21(0x20c)]=_0x1b0a21(0x228),_0x47cba1[_0x1b0a21(0x1ed)]={'name':constants_1[_0x1b0a21(0x20b)],'email':constants_1[_0x1b0a21(0x1ee)]},_0x47cba1[_0x1b0a21(0x1e7)]={'writed':await this[_0x1b0a21(0x223)]()},_0x47cba1[_0x1b0a21(0x227)]=_0x4a283b,_0x47cba1['repo']=this['repository'],_0x47cba1[_0x1b0a21(0x211)]=this[_0x1b0a21(0x211)],_0x47cba1[_0x1b0a21(0x1e2)]=!![],_0x47cba1[_0x1b0a21(0x1f7)]=this[_0x1b0a21(0x1f7)],_0x47cba1;}async[a183_0x107816(0x1f2)](){const _0x362297=a183_0x107816,_0x6a120e=await this[_0x362297(0x21c)]['getRemoteStateAttachmentId'](this['syncData']),_0x5a85a2=await this[_0x362297(0x1f4)][_0x362297(0x22e)](_0x6a120e)[_0x362297(0x210)](_0x9624a=>typeof _0x9624a===_0x362297(0x20e)?JSON[_0x362297(0x22f)](_0x9624a):_0x9624a)['catch'](()=>({}));if(_0x5a85a2[this[_0x362297(0x1fe)][_0x362297(0x204)]]){if(_0x5a85a2[this[_0x362297(0x1fe)][_0x362297(0x204)]]['lastCommit']===this[_0x362297(0x211)]['sha'])return!![];}return![];}async[a183_0x107816(0x1e5)](){const _0x46f4ac=a183_0x107816,_0x1c586a=await this['repository'][_0x46f4ac(0x235)][_0x46f4ac(0x237)](this[_0x46f4ac(0x211)][_0x46f4ac(0x1fa)]);await this['log']('[INFO]\x20Update\x20remote\x20state.');const _0x53362b={[this[_0x46f4ac(0x1fe)]['gitUrl']]:{'lastCommit':_0x1c586a[_0x46f4ac(0x230)]}};await this[_0x46f4ac(0x21c)]['updateRemoteState'](this[_0x46f4ac(0x22c)],_0x53362b);}async[a183_0x107816(0x1e3)]({syncRecord:_0x13df28,repository:_0x2ffc58,logger:_0x1270d7,convertToSFDX:_0x23aedb,provider:_0xff937a}){const _0x28cfcf=a183_0x107816;this[_0x28cfcf(0x22c)]=_0x13df28,this[_0x28cfcf(0x1f7)]=_0xff937a,this['repository']=_0x2ffc58,this[_0x28cfcf(0x218)]=new salesforce_logger_v2_service_1['SalesforceLogger2'](_0x1270d7[_0x28cfcf(0x206)](),_0x1270d7[_0x28cfcf(0x1f8)]()+_0x28cfcf(0x21d)+this[_0x28cfcf(0x22c)][_0x28cfcf(0x1f1)]+']\x20[Branch:\x20'+this[_0x28cfcf(0x22c)][_0x28cfcf(0x202)]+']');try{await this['salesforceSync'][_0x28cfcf(0x229)](this[_0x28cfcf(0x22c)],_0x28cfcf(0x208)),this[_0x28cfcf(0x234)](_0x28cfcf(0x233)),await this['createBranchIfNotExists']();const _0x26b7b4=await this[_0x28cfcf(0x1f2)]();if(_0x26b7b4){await this[_0x28cfcf(0x21c)]['setStatus'](this[_0x28cfcf(0x22c)],'Completed'),await this[_0x28cfcf(0x234)](_0x28cfcf(0x207))[_0x28cfcf(0x1eb)]();return;}const _0x5c721a=await this[_0x28cfcf(0x220)](_0x23aedb);await this[_0x28cfcf(0x201)]['run'](_0x5c721a,this[_0x28cfcf(0x218)]),await this[_0x28cfcf(0x21c)]['setStatus'](this['syncData'],_0x28cfcf(0x1f0)),await this[_0x28cfcf(0x1e5)](),this['log']('[INFO]\x20Sync\x20job\x20done.');}catch(_0x1a1d3c){throw _0x1a1d3c;}finally{await this['sfLogger']['send']();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x107816(0x20f)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a183_0x107816(0x226)],salesforce_service_1[a183_0x107816(0x1f3)],commit_components_job_1[a183_0x107816(0x205)]])],FlosumSyncJob),exports[a183_0x107816(0x1f5)]=FlosumSyncJob;