const a183_0x36d46d=a183_0x3d97;(function(_0x463f99,_0x4f0051){const _0x4bb3b5=a183_0x3d97,_0x182b2c=_0x463f99();while(!![]){try{const _0x5e1fa2=parseInt(_0x4bb3b5(0x1ec))/0x1*(-parseInt(_0x4bb3b5(0x21f))/0x2)+-parseInt(_0x4bb3b5(0x20d))/0x3*(parseInt(_0x4bb3b5(0x214))/0x4)+parseInt(_0x4bb3b5(0x1e3))/0x5+parseInt(_0x4bb3b5(0x206))/0x6*(parseInt(_0x4bb3b5(0x21d))/0x7)+parseInt(_0x4bb3b5(0x235))/0x8+-parseInt(_0x4bb3b5(0x1e2))/0x9*(parseInt(_0x4bb3b5(0x1e6))/0xa)+parseInt(_0x4bb3b5(0x223))/0xb;if(_0x5e1fa2===_0x4f0051)break;else _0x182b2c['push'](_0x182b2c['shift']());}catch(_0x457033){_0x182b2c['push'](_0x182b2c['shift']());}}}(a183_0x2440,0x38c52));const a183_0x5d8898=(function(){let _0x21aa5d=!![];return function(_0x169543,_0xad32d){const _0xfff4e3=_0x21aa5d?function(){const _0x4a28d0=a183_0x3d97;if(_0xad32d){const _0x4ffeb7=_0xad32d[_0x4a28d0(0x233)](_0x169543,arguments);return _0xad32d=null,_0x4ffeb7;}}:function(){};return _0x21aa5d=![],_0xfff4e3;};}()),a183_0x3bcc32=a183_0x5d8898(this,function(){const _0x14b3ae=a183_0x3d97;return a183_0x3bcc32[_0x14b3ae(0x1ed)]()[_0x14b3ae(0x1ea)]('(((.+)+)+)+$')[_0x14b3ae(0x1ed)]()[_0x14b3ae(0x238)](a183_0x3bcc32)[_0x14b3ae(0x1ea)](_0x14b3ae(0x207));});a183_0x3bcc32();'use strict';function a183_0x3d97(_0x33315a,_0x20a8ea){const _0x4c20e0=a183_0x2440();return a183_0x3d97=function(_0x3bcc32,_0x5d8898){_0x3bcc32=_0x3bcc32-0x1e1;let _0x244070=_0x4c20e0[_0x3bcc32];return _0x244070;},a183_0x3d97(_0x33315a,_0x20a8ea);}var __decorate=this&&this['__decorate']||function(_0x4de04a,_0x5f4dad,_0x5a0455,_0x223b61){const _0x86b529=a183_0x3d97;var _0x3a98ff=arguments['length'],_0x57c1b6=_0x3a98ff<0x3?_0x5f4dad:_0x223b61===null?_0x223b61=Object[_0x86b529(0x1e8)](_0x5f4dad,_0x5a0455):_0x223b61,_0x3b768a;if(typeof Reflect===_0x86b529(0x230)&&typeof Reflect[_0x86b529(0x20f)]===_0x86b529(0x21a))_0x57c1b6=Reflect[_0x86b529(0x20f)](_0x4de04a,_0x5f4dad,_0x5a0455,_0x223b61);else{for(var _0x25dc37=_0x4de04a['length']-0x1;_0x25dc37>=0x0;_0x25dc37--)if(_0x3b768a=_0x4de04a[_0x25dc37])_0x57c1b6=(_0x3a98ff<0x3?_0x3b768a(_0x57c1b6):_0x3a98ff>0x3?_0x3b768a(_0x5f4dad,_0x5a0455,_0x57c1b6):_0x3b768a(_0x5f4dad,_0x5a0455))||_0x57c1b6;}return _0x3a98ff>0x3&&_0x57c1b6&&Object['defineProperty'](_0x5f4dad,_0x5a0455,_0x57c1b6),_0x57c1b6;},__metadata=this&&this['__metadata']||function(_0x4a47e8,_0x59a641){const _0x4ee279=a183_0x3d97;if(typeof Reflect===_0x4ee279(0x230)&&typeof Reflect['metadata']===_0x4ee279(0x21a))return Reflect['metadata'](_0x4a47e8,_0x59a641);},FlosumSyncJob_1;Object[a183_0x36d46d(0x213)](exports,a183_0x36d46d(0x209),{'value':!![]}),exports[a183_0x36d46d(0x216)]=void 0x0;function a183_0x2440(){const _0x784aec=['DEFAULT_GIT_USER_NAME','134650zjloCK','Completed','getOwnPropertyDescriptor','CommitComponentsDto','search','[INFO]\x20Sync\x20job\x20done.','2637uwiJJR','toString','[INFO]\x20Start\x20sync\x20job','convertToSFDX','provider','repositoryId','lastCommit','SalesforceService','../../../constants','Service','Logger','message','getComponentsFromRepository','branch','checkSyncStatus','typedi',']\x20[Branch:\x20','logger','sha','../../salesforce/services/salesforce-retriever.service','create','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','send','force','../../salesforce/services/salesforce-sync.service','repositoryName','300nGFhyk','(((.+)+)+)+$','getLoggerId','__esModule','syncData','createBranchIfNotExists','repository','36WjeXqD','salesforceSync','decorate','updateLastCommit','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','../../../core','defineProperty','43760uSZLpm','design:paramtypes','FlosumSyncJob','../../salesforce/services/salesforce-logger-v2.service','parse','[INFO]\x20Branch\x20synchronized.\x20Skip','function','run','getComponentIds','6881SkeGlK','Sync\x20repository','58rYbWRR','commitJob','getComponents','SalesforceRetrieverService','871717cOptis','getOne','setStatus','../../salesforce/services/salesforce.service','gitUrl','then','name','SalesforceLogger2','branchId','../dto/commit-components.dto','./commit-components.job','DEFAULT_GIT_USER_EMAIL','repo','object','branchName','log','apply','branches','1665360NLNyyQ','getRemoteStateAttachmentId','salesforceService','constructor','retrieveAttachment','63zVGeKA','989855NUoOGT','sfLogger'];a183_0x2440=function(){return _0x784aec;};return a183_0x2440();}const core_1=require(a183_0x36d46d(0x212)),salesforce_logger_v2_service_1=require(a183_0x36d46d(0x217)),typedi_1=require(a183_0x36d46d(0x1fb)),constants_1=require(a183_0x36d46d(0x1f4)),salesforce_retriever_service_1=require(a183_0x36d46d(0x1ff)),salesforce_sync_service_1=require(a183_0x36d46d(0x204)),salesforce_service_1=require(a183_0x36d46d(0x226)),commit_components_dto_1=require(a183_0x36d46d(0x22c)),commit_components_job_1=require(a183_0x36d46d(0x22d));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x57090e,_0x3b848b,_0x5b09ea){const _0x39d1eb=a183_0x36d46d;this[_0x39d1eb(0x20e)]=_0x57090e,this[_0x39d1eb(0x237)]=_0x3b848b,this[_0x39d1eb(0x220)]=_0x5b09ea,this[_0x39d1eb(0x1fd)]=new core_1[(_0x39d1eb(0x1f6))](FlosumSyncJob_1['name']);}[a183_0x36d46d(0x232)](_0x2af794){const _0x3d0fb9=a183_0x36d46d;return this[_0x3d0fb9(0x1e4)][_0x3d0fb9(0x232)](_0x3d0fb9(0x211)+this[_0x3d0fb9(0x20a)]['repositoryName']+_0x3d0fb9(0x1fc)+this['syncData'][_0x3d0fb9(0x231)]+']\x20'+_0x2af794);}async['createBranchIfNotExists'](){const _0x344608=a183_0x36d46d;let _0x5e47b3=await this['repository'][_0x344608(0x234)]['getOne'](this[_0x344608(0x20a)][_0x344608(0x231)])['catch'](()=>null);!_0x5e47b3&&(_0x5e47b3=await this[_0x344608(0x20c)][_0x344608(0x234)][_0x344608(0x200)]({'name':this[_0x344608(0x20a)]['branchName']})),this['branch']=_0x5e47b3;}async[a183_0x36d46d(0x21c)](){const _0x59a019=a183_0x36d46d;return this['syncData'][_0x59a019(0x1f1)]?this['salesforceSync'][_0x59a019(0x1f8)](this['syncData']['repositoryId']):this[_0x59a019(0x20e)]['getBranchComponents'](this[_0x59a019(0x20a)][_0x59a019(0x22b)]);}async[a183_0x36d46d(0x221)](){const _0x503809=a183_0x36d46d,_0x4ee2b7=await this[_0x503809(0x21c)](),_0x526de9=new salesforce_retriever_service_1[(_0x503809(0x222))](this['salesforceService']),_0x30a525=await _0x526de9['run'](_0x4ee2b7);return _0x30a525;}async['getCommitDto'](_0x474ed4){const _0x1aaadf=a183_0x36d46d,_0x59ccc9=new commit_components_dto_1[(_0x1aaadf(0x1e9))]();return _0x59ccc9[_0x1aaadf(0x1f7)]=_0x1aaadf(0x21e),_0x59ccc9['user']={'name':constants_1[_0x1aaadf(0x1e5)],'email':constants_1[_0x1aaadf(0x22e)]},_0x59ccc9['components']={'writed':await this[_0x1aaadf(0x221)]()},_0x59ccc9[_0x1aaadf(0x1ef)]=_0x474ed4,_0x59ccc9[_0x1aaadf(0x22f)]=this[_0x1aaadf(0x20c)],_0x59ccc9['branch']=this[_0x1aaadf(0x1f9)],_0x59ccc9[_0x1aaadf(0x203)]=!![],_0x59ccc9['provider']=this['provider'],_0x59ccc9;}async[a183_0x36d46d(0x1fa)](){const _0x5a9d62=a183_0x36d46d,_0x1a671d=await this[_0x5a9d62(0x20e)][_0x5a9d62(0x236)](this[_0x5a9d62(0x20a)]),_0x5deee1=await this[_0x5a9d62(0x237)][_0x5a9d62(0x1e1)](_0x1a671d)[_0x5a9d62(0x228)](_0x58849f=>typeof _0x58849f==='string'?JSON[_0x5a9d62(0x218)](_0x58849f):_0x58849f)['catch'](()=>({}));if(_0x5deee1[this['repository']['gitUrl']]){if(_0x5deee1[this[_0x5a9d62(0x20c)][_0x5a9d62(0x227)]][_0x5a9d62(0x1f2)]===this[_0x5a9d62(0x1f9)]['sha'])return!![];}return![];}async['updateLastCommit'](){const _0x54b227=a183_0x36d46d,_0x59b513=await this[_0x54b227(0x20c)][_0x54b227(0x234)][_0x54b227(0x224)](this[_0x54b227(0x1f9)][_0x54b227(0x229)]);await this[_0x54b227(0x232)]('[INFO]\x20Update\x20remote\x20state.');const _0x3cd30c={[this['repository'][_0x54b227(0x227)]]:{'lastCommit':_0x59b513[_0x54b227(0x1fe)]}};await this[_0x54b227(0x20e)]['updateRemoteState'](this[_0x54b227(0x20a)],_0x3cd30c);}async[a183_0x36d46d(0x21b)]({syncRecord:_0x23bea4,repository:_0x591598,logger:_0x478a46,convertToSFDX:_0x235230,provider:_0x467177}){const _0x2c2cc6=a183_0x36d46d;this['syncData']=_0x23bea4,this[_0x2c2cc6(0x1f0)]=_0x467177,this[_0x2c2cc6(0x20c)]=_0x591598,this[_0x2c2cc6(0x1e4)]=new salesforce_logger_v2_service_1[(_0x2c2cc6(0x22a))](_0x478a46[_0x2c2cc6(0x208)](),_0x478a46['getPrefix']()+_0x2c2cc6(0x201)+this[_0x2c2cc6(0x20a)][_0x2c2cc6(0x205)]+_0x2c2cc6(0x1fc)+this[_0x2c2cc6(0x20a)][_0x2c2cc6(0x231)]+']');try{await this[_0x2c2cc6(0x20e)][_0x2c2cc6(0x225)](this[_0x2c2cc6(0x20a)],'In\x20Progress'),this[_0x2c2cc6(0x232)](_0x2c2cc6(0x1ee)),await this[_0x2c2cc6(0x20b)]();const _0x3fc42b=await this[_0x2c2cc6(0x1fa)]();if(_0x3fc42b){await this[_0x2c2cc6(0x20e)][_0x2c2cc6(0x225)](this['syncData'],_0x2c2cc6(0x1e7)),await this['log'](_0x2c2cc6(0x219))[_0x2c2cc6(0x202)]();return;}const _0x12ac72=await this['getCommitDto'](_0x235230);await this['commitJob']['run'](_0x12ac72,this[_0x2c2cc6(0x1e4)]),await this[_0x2c2cc6(0x20e)][_0x2c2cc6(0x225)](this[_0x2c2cc6(0x20a)],_0x2c2cc6(0x1e7)),await this[_0x2c2cc6(0x210)](),this[_0x2c2cc6(0x232)](_0x2c2cc6(0x1eb));}catch(_0x4dd2b5){throw _0x4dd2b5;}finally{await this['sfLogger'][_0x2c2cc6(0x202)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x36d46d(0x1f5)]({'transient':!![]}),__metadata(a183_0x36d46d(0x215),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a183_0x36d46d(0x1f3)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;