const a183_0x524c4e=a183_0x1698;(function(_0xab7d63,_0x2ccc1a){const _0xea1224=a183_0x1698,_0x314373=_0xab7d63();while(!![]){try{const _0x6b626c=-parseInt(_0xea1224(0x11c))/0x1+-parseInt(_0xea1224(0x132))/0x2+parseInt(_0xea1224(0xfa))/0x3*(parseInt(_0xea1224(0x140))/0x4)+-parseInt(_0xea1224(0x105))/0x5+parseInt(_0xea1224(0x10c))/0x6+-parseInt(_0xea1224(0x115))/0x7+parseInt(_0xea1224(0x136))/0x8;if(_0x6b626c===_0x2ccc1a)break;else _0x314373['push'](_0x314373['shift']());}catch(_0x47af80){_0x314373['push'](_0x314373['shift']());}}}(a183_0xf225,0xd9b56));const a183_0x539d04=(function(){let _0x43014b=!![];return function(_0x3b646d,_0x4ccf6c){const _0x5fcfb9=_0x43014b?function(){const _0x1513d2=a183_0x1698;if(_0x4ccf6c){const _0x59b9d5=_0x4ccf6c[_0x1513d2(0x119)](_0x3b646d,arguments);return _0x4ccf6c=null,_0x59b9d5;}}:function(){};return _0x43014b=![],_0x5fcfb9;};}()),a183_0x3f290a=a183_0x539d04(this,function(){const _0x7aad4f=a183_0x1698;return a183_0x3f290a[_0x7aad4f(0x12f)]()['search'](_0x7aad4f(0xf6))['toString']()[_0x7aad4f(0x138)](a183_0x3f290a)[_0x7aad4f(0x102)](_0x7aad4f(0xf6));});a183_0x3f290a();'use strict';var __decorate=this&&this[a183_0x524c4e(0x11d)]||function(_0x820d92,_0x470d8a,_0x45aed7,_0xa2f84f){const _0x519cef=a183_0x524c4e;var _0x41ac60=arguments[_0x519cef(0x11a)],_0x163f7e=_0x41ac60<0x3?_0x470d8a:_0xa2f84f===null?_0xa2f84f=Object['getOwnPropertyDescriptor'](_0x470d8a,_0x45aed7):_0xa2f84f,_0x1ed6c2;if(typeof Reflect==='object'&&typeof Reflect[_0x519cef(0x107)]===_0x519cef(0x134))_0x163f7e=Reflect[_0x519cef(0x107)](_0x820d92,_0x470d8a,_0x45aed7,_0xa2f84f);else{for(var _0x151505=_0x820d92[_0x519cef(0x11a)]-0x1;_0x151505>=0x0;_0x151505--)if(_0x1ed6c2=_0x820d92[_0x151505])_0x163f7e=(_0x41ac60<0x3?_0x1ed6c2(_0x163f7e):_0x41ac60>0x3?_0x1ed6c2(_0x470d8a,_0x45aed7,_0x163f7e):_0x1ed6c2(_0x470d8a,_0x45aed7))||_0x163f7e;}return _0x41ac60>0x3&&_0x163f7e&&Object[_0x519cef(0x112)](_0x470d8a,_0x45aed7,_0x163f7e),_0x163f7e;},__metadata=this&&this[a183_0x524c4e(0x10a)]||function(_0xea5d55,_0x5f0054){const _0x420adb=a183_0x524c4e;if(typeof Reflect===_0x420adb(0x135)&&typeof Reflect[_0x420adb(0x104)]===_0x420adb(0x134))return Reflect[_0x420adb(0x104)](_0xea5d55,_0x5f0054);},FlosumSyncJob_1;Object['defineProperty'](exports,a183_0x524c4e(0x113),{'value':!![]}),exports[a183_0x524c4e(0x13b)]=void 0x0;function a183_0x1698(_0xe00f09,_0x2388d4){const _0x56f623=a183_0xf225();return a183_0x1698=function(_0x3f290a,_0x539d04){_0x3f290a=_0x3f290a-0xe8;let _0xf225c0=_0x56f623[_0x3f290a];return _0xf225c0;},a183_0x1698(_0xe00f09,_0x2388d4);}function a183_0xf225(){const _0x338e40=['checkSyncStatus','apply','length','getCommitDto','375360EwQlNG','__decorate','[INFO]\x20Sync\x20job\x20done.','../dto/commit-components.dto','syncData','lastCommit',']\x20[Branch:\x20','branchId','salesforceSync','In\x20Progress','gitUrl','provider','branchName','string','create','./commit-components.job','getComponentIds','logger','retrieveAttachment','toString','SalesforceRetrieverService','CommitComponentsDto','3361150CUqYou','SalesforceService','function','object','39616648Usecrh','user','constructor','SalesforceLogger2','DEFAULT_GIT_USER_NAME','FlosumSyncJob','getRemoteStateAttachmentId','convertToSFDX','updateLastCommit','name','3516oIVrSo','Logger','[INFO]\x20Start\x20sync\x20job','commitJob','branches','salesforceService','getBranchComponents','repositoryId','updateRemoteState','getPrefix','../../salesforce/services/salesforce-sync.service','log','typedi','repo','message','(((.+)+)+)+$','[INFO]\x20Branch\x20synchronized.\x20Skip','repositoryName','Service','171iprDHp','sha','[INFO]\x20Update\x20remote\x20state.','catch','parse','components','getOne','SalesforceSyncService','search','getComponents','metadata','8681620VelzuY','../../salesforce/services/salesforce-retriever.service','decorate','branch','createBranchIfNotExists','__metadata','run','6984090xTBoST','repository','setStatus','send','Sync\x20repository','CommitComponentsJob','defineProperty','__esModule','sfLogger','10375442GzoprJ','Completed','../../../core'];a183_0xf225=function(){return _0x338e40;};return a183_0xf225();}const core_1=require(a183_0x524c4e(0x117)),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),typedi_1=require(a183_0x524c4e(0xf3)),constants_1=require('../../../constants'),salesforce_retriever_service_1=require(a183_0x524c4e(0x106)),salesforce_sync_service_1=require(a183_0x524c4e(0xf1)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a183_0x524c4e(0x11f)),commit_components_job_1=require(a183_0x524c4e(0x12b));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x35a787,_0x3aa9e4,_0x115354){const _0x5a600e=a183_0x524c4e;this[_0x5a600e(0x124)]=_0x35a787,this[_0x5a600e(0xec)]=_0x3aa9e4,this[_0x5a600e(0xea)]=_0x115354,this[_0x5a600e(0x12d)]=new core_1[(_0x5a600e(0xe8))](FlosumSyncJob_1[_0x5a600e(0x13f)]);}[a183_0x524c4e(0xf2)](_0xf00e1b){const _0x1ece5c=a183_0x524c4e;return this['sfLogger'][_0x1ece5c(0xf2)]('[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x1ece5c(0x120)]['repositoryName']+_0x1ece5c(0x122)+this['syncData']['branchName']+']\x20'+_0xf00e1b);}async[a183_0x524c4e(0x109)](){const _0x4c8ec3=a183_0x524c4e;let _0x5088e1=await this[_0x4c8ec3(0x10d)]['branches'][_0x4c8ec3(0x100)](this[_0x4c8ec3(0x120)][_0x4c8ec3(0x128)])[_0x4c8ec3(0xfd)](()=>null);!_0x5088e1&&(_0x5088e1=await this['repository']['branches'][_0x4c8ec3(0x12a)]({'name':this[_0x4c8ec3(0x120)][_0x4c8ec3(0x128)]})),this['branch']=_0x5088e1;}async[a183_0x524c4e(0x12c)](){const _0x4e41fc=a183_0x524c4e;return this[_0x4e41fc(0x120)][_0x4e41fc(0xee)]?this[_0x4e41fc(0x124)]['getComponentsFromRepository'](this['syncData'][_0x4e41fc(0xee)]):this[_0x4e41fc(0x124)][_0x4e41fc(0xed)](this[_0x4e41fc(0x120)][_0x4e41fc(0x123)]);}async[a183_0x524c4e(0x103)](){const _0x10569d=a183_0x524c4e,_0x3cf815=await this[_0x10569d(0x12c)](),_0xafc987=new salesforce_retriever_service_1[(_0x10569d(0x130))](this['salesforceService']),_0x4abced=await _0xafc987[_0x10569d(0x10b)](_0x3cf815);return _0x4abced;}async[a183_0x524c4e(0x11b)](_0x4aa873){const _0x11d7a6=a183_0x524c4e,_0x3c0a27=new commit_components_dto_1[(_0x11d7a6(0x131))]();return _0x3c0a27[_0x11d7a6(0xf5)]=_0x11d7a6(0x110),_0x3c0a27[_0x11d7a6(0x137)]={'name':constants_1[_0x11d7a6(0x13a)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x3c0a27[_0x11d7a6(0xff)]={'writed':await this[_0x11d7a6(0x103)]()},_0x3c0a27[_0x11d7a6(0x13d)]=_0x4aa873,_0x3c0a27[_0x11d7a6(0xf4)]=this['repository'],_0x3c0a27['branch']=this[_0x11d7a6(0x108)],_0x3c0a27['force']=!![],_0x3c0a27[_0x11d7a6(0x127)]=this[_0x11d7a6(0x127)],_0x3c0a27;}async['checkSyncStatus'](){const _0x144ad3=a183_0x524c4e,_0x36a024=await this[_0x144ad3(0x124)][_0x144ad3(0x13c)](this[_0x144ad3(0x120)]),_0xd9e98e=await this['salesforceService'][_0x144ad3(0x12e)](_0x36a024)['then'](_0x394ef0=>typeof _0x394ef0===_0x144ad3(0x129)?JSON[_0x144ad3(0xfe)](_0x394ef0):_0x394ef0)['catch'](()=>({}));if(_0xd9e98e[this[_0x144ad3(0x10d)]['gitUrl']]){if(_0xd9e98e[this[_0x144ad3(0x10d)][_0x144ad3(0x126)]][_0x144ad3(0x121)]===this[_0x144ad3(0x108)][_0x144ad3(0xfb)])return!![];}return![];}async[a183_0x524c4e(0x13e)](){const _0x4c54e6=a183_0x524c4e,_0x58bea6=await this[_0x4c54e6(0x10d)][_0x4c54e6(0xeb)][_0x4c54e6(0x100)](this[_0x4c54e6(0x108)]['name']);await this[_0x4c54e6(0xf2)](_0x4c54e6(0xfc));const _0x163554={[this[_0x4c54e6(0x10d)][_0x4c54e6(0x126)]]:{'lastCommit':_0x58bea6[_0x4c54e6(0xfb)]}};await this[_0x4c54e6(0x124)][_0x4c54e6(0xef)](this[_0x4c54e6(0x120)],_0x163554);}async[a183_0x524c4e(0x10b)]({syncRecord:_0x4fc1a5,repository:_0x12bba3,logger:_0x1e753d,convertToSFDX:_0x544a33,provider:_0x27f2c3}){const _0x4c8fa6=a183_0x524c4e;this[_0x4c8fa6(0x120)]=_0x4fc1a5,this[_0x4c8fa6(0x127)]=_0x27f2c3,this[_0x4c8fa6(0x10d)]=_0x12bba3,this[_0x4c8fa6(0x114)]=new salesforce_logger_v2_service_1[(_0x4c8fa6(0x139))](_0x1e753d['getLoggerId'](),_0x1e753d[_0x4c8fa6(0xf0)]()+'\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x4c8fa6(0x120)][_0x4c8fa6(0xf8)]+_0x4c8fa6(0x122)+this[_0x4c8fa6(0x120)][_0x4c8fa6(0x128)]+']');try{await this[_0x4c8fa6(0x124)][_0x4c8fa6(0x10e)](this[_0x4c8fa6(0x120)],_0x4c8fa6(0x125)),this[_0x4c8fa6(0xf2)](_0x4c8fa6(0xe9)),await this[_0x4c8fa6(0x109)]();const _0x585520=await this[_0x4c8fa6(0x118)]();if(_0x585520){await this[_0x4c8fa6(0x124)][_0x4c8fa6(0x10e)](this[_0x4c8fa6(0x120)],_0x4c8fa6(0x116)),await this[_0x4c8fa6(0xf2)](_0x4c8fa6(0xf7))[_0x4c8fa6(0x10f)]();return;}const _0x391035=await this[_0x4c8fa6(0x11b)](_0x544a33);await this[_0x4c8fa6(0xea)][_0x4c8fa6(0x10b)](_0x391035,this[_0x4c8fa6(0x114)]),await this[_0x4c8fa6(0x124)][_0x4c8fa6(0x10e)](this[_0x4c8fa6(0x120)],_0x4c8fa6(0x116)),await this[_0x4c8fa6(0x13e)](),this[_0x4c8fa6(0xf2)](_0x4c8fa6(0x11e));}catch(_0x3eef34){throw _0x3eef34;}finally{await this[_0x4c8fa6(0x114)][_0x4c8fa6(0x10f)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x524c4e(0xf9)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a183_0x524c4e(0x101)],salesforce_service_1[a183_0x524c4e(0x133)],commit_components_job_1[a183_0x524c4e(0x111)]])],FlosumSyncJob),exports[a183_0x524c4e(0x13b)]=FlosumSyncJob;