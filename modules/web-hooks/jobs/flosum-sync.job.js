const a183_0x171879=a183_0x12e7;function a183_0x12e7(_0x45f957,_0x4a7ccf){const _0x485820=a183_0x39b9();return a183_0x12e7=function(_0x212a9f,_0x2bc218){_0x212a9f=_0x212a9f-0x17c;let _0x39b94b=_0x485820[_0x212a9f];return _0x39b94b;},a183_0x12e7(_0x45f957,_0x4a7ccf);}(function(_0x3c5c88,_0x371ee6){const _0x11939b=a183_0x12e7,_0x1ede2f=_0x3c5c88();while(!![]){try{const _0x4fb3f5=-parseInt(_0x11939b(0x1a8))/0x1+parseInt(_0x11939b(0x18f))/0x2*(-parseInt(_0x11939b(0x1bd))/0x3)+parseInt(_0x11939b(0x1b0))/0x4+parseInt(_0x11939b(0x1a5))/0x5*(-parseInt(_0x11939b(0x1c3))/0x6)+-parseInt(_0x11939b(0x18c))/0x7+parseInt(_0x11939b(0x19d))/0x8*(parseInt(_0x11939b(0x1b2))/0x9)+parseInt(_0x11939b(0x190))/0xa;if(_0x4fb3f5===_0x371ee6)break;else _0x1ede2f['push'](_0x1ede2f['shift']());}catch(_0xaf81c3){_0x1ede2f['push'](_0x1ede2f['shift']());}}}(a183_0x39b9,0x75d1e));const a183_0x2bc218=(function(){let _0x8c4f18=!![];return function(_0x56a793,_0x128657){const _0x55d733=_0x8c4f18?function(){if(_0x128657){const _0x2bd222=_0x128657['apply'](_0x56a793,arguments);return _0x128657=null,_0x2bd222;}}:function(){};return _0x8c4f18=![],_0x55d733;};}()),a183_0x212a9f=a183_0x2bc218(this,function(){const _0x57a89e=a183_0x12e7;return a183_0x212a9f['toString']()[_0x57a89e(0x186)]('(((.+)+)+)+$')['toString']()[_0x57a89e(0x194)](a183_0x212a9f)[_0x57a89e(0x186)](_0x57a89e(0x1c0));});a183_0x212a9f();'use strict';var __decorate=this&&this[a183_0x171879(0x1a2)]||function(_0x473a2e,_0x1cef03,_0x4a2b35,_0x13d656){const _0x936cd=a183_0x171879;var _0x44b475=arguments[_0x936cd(0x1bf)],_0x1343e1=_0x44b475<0x3?_0x1cef03:_0x13d656===null?_0x13d656=Object['getOwnPropertyDescriptor'](_0x1cef03,_0x4a2b35):_0x13d656,_0x2ab948;if(typeof Reflect===_0x936cd(0x1cf)&&typeof Reflect[_0x936cd(0x1b7)]===_0x936cd(0x1a6))_0x1343e1=Reflect[_0x936cd(0x1b7)](_0x473a2e,_0x1cef03,_0x4a2b35,_0x13d656);else{for(var _0x433bfa=_0x473a2e['length']-0x1;_0x433bfa>=0x0;_0x433bfa--)if(_0x2ab948=_0x473a2e[_0x433bfa])_0x1343e1=(_0x44b475<0x3?_0x2ab948(_0x1343e1):_0x44b475>0x3?_0x2ab948(_0x1cef03,_0x4a2b35,_0x1343e1):_0x2ab948(_0x1cef03,_0x4a2b35))||_0x1343e1;}return _0x44b475>0x3&&_0x1343e1&&Object[_0x936cd(0x1ca)](_0x1cef03,_0x4a2b35,_0x1343e1),_0x1343e1;},__metadata=this&&this[a183_0x171879(0x1d0)]||function(_0x52fe1d,_0x36d053){const _0x56f83f=a183_0x171879;if(typeof Reflect===_0x56f83f(0x1cf)&&typeof Reflect[_0x56f83f(0x1b4)]===_0x56f83f(0x1a6))return Reflect['metadata'](_0x52fe1d,_0x36d053);},FlosumSyncJob_1;Object[a183_0x171879(0x1ca)](exports,a183_0x171879(0x1ab),{'value':!![]}),exports[a183_0x171879(0x19f)]=void 0x0;const core_1=require(a183_0x171879(0x1a9)),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),typedi_1=require(a183_0x171879(0x193)),constants_1=require(a183_0x171879(0x182)),salesforce_retriever_service_1=require(a183_0x171879(0x188)),salesforce_sync_service_1=require(a183_0x171879(0x1cd)),salesforce_service_1=require(a183_0x171879(0x1c4)),commit_components_dto_1=require(a183_0x171879(0x183)),commit_components_job_1=require(a183_0x171879(0x1c5));function a183_0x39b9(){const _0x1104b7=['salesforceSync','length','(((.+)+)+)+$','Completed','convertToSFDX','6090MawXzx','../../salesforce/services/salesforce.service','./commit-components.job','getRemoteStateAttachmentId','getComponentsFromRepository','getComponentIds','[INFO]\x20Sync\x20job\x20done.','defineProperty','lastCommit','parse','../../salesforce/services/salesforce-sync.service','repository','object','__metadata','getPrefix','branches','string','sfLogger','catch','[INFO]\x20Start\x20sync\x20job','branchId','DEFAULT_GIT_USER_NAME','salesforceService','../../../constants','../dto/commit-components.dto','setStatus','repositoryName','search','createBranchIfNotExists','../../salesforce/services/salesforce-retriever.service','send','branch','sha','3336158nxJfXm','syncData','provider','284rsjyKn','9068430OKKzqW','getOne','user','typedi','constructor','getBranchComponents','create','log','DEFAULT_GIT_USER_EMAIL','updateRemoteState','Logger','In\x20Progress','message','8coFgot','Service','FlosumSyncJob','components','gitUrl','__decorate','SalesforceLogger2','updateLastCommit','3955ZhZfkb','function','commitJob','723521FFBPEU','../../../core','logger','__esModule','SalesforceSyncService','name','getLoggerId',']\x20[Branch:\x20','3764860TToVOS','[INFO]\x20Update\x20remote\x20state.','5815566rRsiqX','getComponents','metadata','branchName','getCommitDto','decorate','run','repositoryId','checkSyncStatus','[INFO]\x20Branch\x20synchronized.\x20Skip','CommitComponentsJob','183GGwdpi'];a183_0x39b9=function(){return _0x1104b7;};return a183_0x39b9();}let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x5efc60,_0x49778c,_0x1d9b99){const _0x35a10=a183_0x171879;this[_0x35a10(0x1be)]=_0x5efc60,this[_0x35a10(0x181)]=_0x49778c,this[_0x35a10(0x1a7)]=_0x1d9b99,this[_0x35a10(0x1aa)]=new core_1[(_0x35a10(0x19a))](FlosumSyncJob_1[_0x35a10(0x1ad)]);}[a183_0x171879(0x197)](_0x49142c){const _0x336d17=a183_0x171879;return this[_0x336d17(0x17c)]['log']('[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this['syncData']['repositoryName']+']\x20[Branch:\x20'+this['syncData'][_0x336d17(0x1b5)]+']\x20'+_0x49142c);}async[a183_0x171879(0x187)](){const _0x5103f4=a183_0x171879;let _0x561c83=await this[_0x5103f4(0x1ce)][_0x5103f4(0x1d2)][_0x5103f4(0x191)](this[_0x5103f4(0x18d)][_0x5103f4(0x1b5)])[_0x5103f4(0x17d)](()=>null);!_0x561c83&&(_0x561c83=await this[_0x5103f4(0x1ce)][_0x5103f4(0x1d2)][_0x5103f4(0x196)]({'name':this[_0x5103f4(0x18d)][_0x5103f4(0x1b5)]})),this[_0x5103f4(0x18a)]=_0x561c83;}async[a183_0x171879(0x1c8)](){const _0x2ef93f=a183_0x171879;return this['syncData']['repositoryId']?this[_0x2ef93f(0x1be)][_0x2ef93f(0x1c7)](this['syncData'][_0x2ef93f(0x1b9)]):this['salesforceSync'][_0x2ef93f(0x195)](this[_0x2ef93f(0x18d)][_0x2ef93f(0x17f)]);}async[a183_0x171879(0x1b3)](){const _0x58cb2e=a183_0x171879,_0x3d36b0=await this[_0x58cb2e(0x1c8)](),_0x372d9d=new salesforce_retriever_service_1['SalesforceRetrieverService'](this['salesforceService']),_0x287a16=await _0x372d9d[_0x58cb2e(0x1b8)](_0x3d36b0);return _0x287a16;}async['getCommitDto'](_0x3387c4){const _0x160ec8=a183_0x171879,_0x3349ab=new commit_components_dto_1['CommitComponentsDto']();return _0x3349ab[_0x160ec8(0x19c)]='Sync\x20repository',_0x3349ab[_0x160ec8(0x192)]={'name':constants_1[_0x160ec8(0x180)],'email':constants_1[_0x160ec8(0x198)]},_0x3349ab[_0x160ec8(0x1a0)]={'writed':await this[_0x160ec8(0x1b3)]()},_0x3349ab[_0x160ec8(0x1c2)]=_0x3387c4,_0x3349ab['repo']=this['repository'],_0x3349ab[_0x160ec8(0x18a)]=this[_0x160ec8(0x18a)],_0x3349ab['force']=!![],_0x3349ab[_0x160ec8(0x18e)]=this[_0x160ec8(0x18e)],_0x3349ab;}async[a183_0x171879(0x1ba)](){const _0x29dd59=a183_0x171879,_0x28fae6=await this['salesforceSync'][_0x29dd59(0x1c6)](this[_0x29dd59(0x18d)]),_0xea75b7=await this['salesforceService']['retrieveAttachment'](_0x28fae6)['then'](_0x2c8ac0=>typeof _0x2c8ac0===_0x29dd59(0x1d3)?JSON[_0x29dd59(0x1cc)](_0x2c8ac0):_0x2c8ac0)[_0x29dd59(0x17d)](()=>({}));if(_0xea75b7[this[_0x29dd59(0x1ce)][_0x29dd59(0x1a1)]]){if(_0xea75b7[this['repository'][_0x29dd59(0x1a1)]][_0x29dd59(0x1cb)]===this[_0x29dd59(0x18a)][_0x29dd59(0x18b)])return!![];}return![];}async[a183_0x171879(0x1a4)](){const _0x2d64cc=a183_0x171879,_0x386865=await this['repository'][_0x2d64cc(0x1d2)][_0x2d64cc(0x191)](this[_0x2d64cc(0x18a)]['name']);await this[_0x2d64cc(0x197)](_0x2d64cc(0x1b1));const _0x55edc9={[this['repository']['gitUrl']]:{'lastCommit':_0x386865[_0x2d64cc(0x18b)]}};await this['salesforceSync'][_0x2d64cc(0x199)](this[_0x2d64cc(0x18d)],_0x55edc9);}async[a183_0x171879(0x1b8)]({syncRecord:_0x1fabf7,repository:_0x175098,logger:_0x5692c8,convertToSFDX:_0x342a1d,provider:_0x2a16d0}){const _0x2602d2=a183_0x171879;this[_0x2602d2(0x18d)]=_0x1fabf7,this['provider']=_0x2a16d0,this[_0x2602d2(0x1ce)]=_0x175098,this[_0x2602d2(0x17c)]=new salesforce_logger_v2_service_1[(_0x2602d2(0x1a3))](_0x5692c8[_0x2602d2(0x1ae)](),_0x5692c8[_0x2602d2(0x1d1)]()+'\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x2602d2(0x18d)][_0x2602d2(0x185)]+_0x2602d2(0x1af)+this[_0x2602d2(0x18d)]['branchName']+']');try{await this[_0x2602d2(0x1be)][_0x2602d2(0x184)](this[_0x2602d2(0x18d)],_0x2602d2(0x19b)),this['log'](_0x2602d2(0x17e)),await this[_0x2602d2(0x187)]();const _0x43dcb3=await this[_0x2602d2(0x1ba)]();if(_0x43dcb3){await this[_0x2602d2(0x1be)][_0x2602d2(0x184)](this[_0x2602d2(0x18d)],_0x2602d2(0x1c1)),await this['log'](_0x2602d2(0x1bb))[_0x2602d2(0x189)]();return;}const _0x2baa5a=await this[_0x2602d2(0x1b6)](_0x342a1d);await this[_0x2602d2(0x1a7)][_0x2602d2(0x1b8)](_0x2baa5a,this[_0x2602d2(0x17c)]),await this[_0x2602d2(0x1be)][_0x2602d2(0x184)](this[_0x2602d2(0x18d)],_0x2602d2(0x1c1)),await this[_0x2602d2(0x1a4)](),this[_0x2602d2(0x197)](_0x2602d2(0x1c9));}catch(_0x140370){throw _0x140370;}finally{await this[_0x2602d2(0x17c)][_0x2602d2(0x189)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x171879(0x19e)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a183_0x171879(0x1ac)],salesforce_service_1['SalesforceService'],commit_components_job_1[a183_0x171879(0x1bc)]])],FlosumSyncJob),exports[a183_0x171879(0x19f)]=FlosumSyncJob;