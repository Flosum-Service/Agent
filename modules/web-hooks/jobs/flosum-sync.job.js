const a182_0x3b2d5c=a182_0x5630;(function(_0x499d3e,_0x4332df){const _0x2d9479=a182_0x5630,_0x385c93=_0x499d3e();while(!![]){try{const _0x50b131=parseInt(_0x2d9479(0x104))/0x1+-parseInt(_0x2d9479(0x106))/0x2*(parseInt(_0x2d9479(0x145))/0x3)+-parseInt(_0x2d9479(0x14a))/0x4*(-parseInt(_0x2d9479(0x10b))/0x5)+-parseInt(_0x2d9479(0x10c))/0x6+parseInt(_0x2d9479(0x11b))/0x7*(parseInt(_0x2d9479(0x135))/0x8)+parseInt(_0x2d9479(0x103))/0x9*(-parseInt(_0x2d9479(0x120))/0xa)+parseInt(_0x2d9479(0x142))/0xb*(-parseInt(_0x2d9479(0x131))/0xc);if(_0x50b131===_0x4332df)break;else _0x385c93['push'](_0x385c93['shift']());}catch(_0x49b1a5){_0x385c93['push'](_0x385c93['shift']());}}}(a182_0x5349,0x6c060));const a182_0x303f1e=(function(){let _0x357039=!![];return function(_0x345343,_0x280f6d){const _0x1125be=_0x357039?function(){if(_0x280f6d){const _0x4c829e=_0x280f6d['apply'](_0x345343,arguments);return _0x280f6d=null,_0x4c829e;}}:function(){};return _0x357039=![],_0x1125be;};}()),a182_0x393003=a182_0x303f1e(this,function(){const _0x45de7b=a182_0x5630;return a182_0x393003[_0x45de7b(0xfc)]()[_0x45de7b(0x121)](_0x45de7b(0x130))['toString']()['constructor'](a182_0x393003)['search'](_0x45de7b(0x130));});function a182_0x5349(){const _0x405fb3=['[INFO]\x20Sync\x20job\x20done.','3853175biyyRF','3549396nEENdX','branchName','FlosumSyncJob','getComponentIds','Sync\x20repository','CommitComponentsDto','SalesforceLogger2','Logger','__metadata','branch','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','getBranchComponents','updateRemoteState','In\x20Progress','syncData','2317cTxgtD','../../../core','defineProperty',']\x20[Branch:\x20','createBranchIfNotExists','532010JmGZSI','search','log','commitJob','Service','typedi','function','getOne','user','force','send','decorate','repo','getComponents','name','sfLogger','(((.+)+)+)+$','12kjfLYz','[INFO]\x20Update\x20remote\x20state.','salesforceSync','setStatus','2752hZGksc','length','parse','components','../../salesforce/services/salesforce.service','retrieveAttachment','string','updateLastCommit','./commit-components.job','checkSyncStatus','sha','object','SalesforceSyncService','1934713pGOPHB','lastCommit','gitUrl','2445NqDATq','then','create','repository','SalesforceService','4JWisho','provider','design:paramtypes','__decorate','branches','getOwnPropertyDescriptor','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','toString','salesforceService','getCommitDto','message','repositoryName','repositoryId','run','63iPfNtx','813551UuBDlZ','[INFO]\x20Start\x20sync\x20job','284vVQPMz','../../salesforce/services/salesforce-sync.service','DEFAULT_GIT_USER_EMAIL','SalesforceRetrieverService'];a182_0x5349=function(){return _0x405fb3;};return a182_0x5349();}a182_0x393003();'use strict';var __decorate=this&&this[a182_0x3b2d5c(0x14d)]||function(_0xe68e81,_0x5b5ed0,_0x2c1cf3,_0x26e827){const _0x245608=a182_0x3b2d5c;var _0x57f66d=arguments[_0x245608(0x136)],_0x2e228a=_0x57f66d<0x3?_0x5b5ed0:_0x26e827===null?_0x26e827=Object[_0x245608(0x14f)](_0x5b5ed0,_0x2c1cf3):_0x26e827,_0x410570;if(typeof Reflect===_0x245608(0x140)&&typeof Reflect[_0x245608(0x12b)]===_0x245608(0x126))_0x2e228a=Reflect['decorate'](_0xe68e81,_0x5b5ed0,_0x2c1cf3,_0x26e827);else{for(var _0x3fb487=_0xe68e81[_0x245608(0x136)]-0x1;_0x3fb487>=0x0;_0x3fb487--)if(_0x410570=_0xe68e81[_0x3fb487])_0x2e228a=(_0x57f66d<0x3?_0x410570(_0x2e228a):_0x57f66d>0x3?_0x410570(_0x5b5ed0,_0x2c1cf3,_0x2e228a):_0x410570(_0x5b5ed0,_0x2c1cf3))||_0x2e228a;}return _0x57f66d>0x3&&_0x2e228a&&Object[_0x245608(0x11d)](_0x5b5ed0,_0x2c1cf3,_0x2e228a),_0x2e228a;},__metadata=this&&this[a182_0x3b2d5c(0x114)]||function(_0x557f24,_0x5d1bb1){const _0x3f3762=a182_0x3b2d5c;if(typeof Reflect===_0x3f3762(0x140)&&typeof Reflect['metadata']===_0x3f3762(0x126))return Reflect['metadata'](_0x557f24,_0x5d1bb1);},FlosumSyncJob_1;function a182_0x5630(_0x5822d5,_0x1bdc95){const _0x352f32=a182_0x5349();return a182_0x5630=function(_0x393003,_0x303f1e){_0x393003=_0x393003-0xfb;let _0x534965=_0x352f32[_0x393003];return _0x534965;},a182_0x5630(_0x5822d5,_0x1bdc95);}Object[a182_0x3b2d5c(0x11d)](exports,'__esModule',{'value':!![]}),exports[a182_0x3b2d5c(0x10e)]=void 0x0;const core_1=require(a182_0x3b2d5c(0x11c)),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),typedi_1=require(a182_0x3b2d5c(0x125)),constants_1=require('../../../constants'),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a182_0x3b2d5c(0x107)),salesforce_service_1=require(a182_0x3b2d5c(0x139)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a182_0x3b2d5c(0x13d));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x2b52f3,_0x510625,_0x2c208b){const _0x2867e8=a182_0x3b2d5c;this[_0x2867e8(0x133)]=_0x2b52f3,this[_0x2867e8(0xfd)]=_0x510625,this[_0x2867e8(0x123)]=_0x2c208b,this['logger']=new core_1[(_0x2867e8(0x113))](FlosumSyncJob_1[_0x2867e8(0x12e)]);}[a182_0x3b2d5c(0x122)](_0x38080f){const _0x4b4445=a182_0x3b2d5c;return this['sfLogger'][_0x4b4445(0x122)](_0x4b4445(0xfb)+this[_0x4b4445(0x11a)][_0x4b4445(0x100)]+_0x4b4445(0x11e)+this[_0x4b4445(0x11a)][_0x4b4445(0x10d)]+']\x20'+_0x38080f);}async[a182_0x3b2d5c(0x11f)](){const _0x445f8d=a182_0x3b2d5c;let _0x17e494=await this['repository'][_0x445f8d(0x14e)][_0x445f8d(0x127)](this[_0x445f8d(0x11a)][_0x445f8d(0x10d)])['catch'](()=>null);!_0x17e494&&(_0x17e494=await this[_0x445f8d(0x148)][_0x445f8d(0x14e)][_0x445f8d(0x147)]({'name':this[_0x445f8d(0x11a)]['branchName']})),this['branch']=_0x17e494;}async[a182_0x3b2d5c(0x10f)](){const _0x2baf01=a182_0x3b2d5c;return this[_0x2baf01(0x11a)]['repositoryId']?this[_0x2baf01(0x133)]['getComponentsFromRepository'](this[_0x2baf01(0x11a)][_0x2baf01(0x101)]):this[_0x2baf01(0x133)][_0x2baf01(0x117)](this[_0x2baf01(0x11a)]['branchId']);}async[a182_0x3b2d5c(0x12d)](){const _0x3d8f72=a182_0x3b2d5c,_0x537977=await this[_0x3d8f72(0x10f)](),_0x2a4402=new salesforce_retriever_service_1[(_0x3d8f72(0x109))](this[_0x3d8f72(0xfd)]),_0x19dd21=await _0x2a4402['run'](_0x537977);return _0x19dd21;}async[a182_0x3b2d5c(0xfe)](_0x8085de){const _0x2b532e=a182_0x3b2d5c,_0xf7e93=new commit_components_dto_1[(_0x2b532e(0x111))]();return _0xf7e93[_0x2b532e(0xff)]=_0x2b532e(0x110),_0xf7e93[_0x2b532e(0x128)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x2b532e(0x108)]},_0xf7e93[_0x2b532e(0x138)]={'writed':await this[_0x2b532e(0x12d)]()},_0xf7e93['convertToSFDX']=_0x8085de,_0xf7e93[_0x2b532e(0x12c)]=this[_0x2b532e(0x148)],_0xf7e93[_0x2b532e(0x115)]=this[_0x2b532e(0x115)],_0xf7e93[_0x2b532e(0x129)]=!![],_0xf7e93[_0x2b532e(0x14b)]=this[_0x2b532e(0x14b)],_0xf7e93;}async['checkSyncStatus'](){const _0x5b3b90=a182_0x3b2d5c,_0x413d29=await this[_0x5b3b90(0x133)]['getRemoteStateAttachmentId'](this[_0x5b3b90(0x11a)]),_0x243d00=await this[_0x5b3b90(0xfd)][_0x5b3b90(0x13a)](_0x413d29)[_0x5b3b90(0x146)](_0x52ca78=>typeof _0x52ca78===_0x5b3b90(0x13b)?JSON[_0x5b3b90(0x137)](_0x52ca78):_0x52ca78)['catch'](()=>({}));if(_0x243d00[this[_0x5b3b90(0x148)][_0x5b3b90(0x144)]]){if(_0x243d00[this[_0x5b3b90(0x148)][_0x5b3b90(0x144)]][_0x5b3b90(0x143)]===this[_0x5b3b90(0x115)][_0x5b3b90(0x13f)])return!![];}return![];}async[a182_0x3b2d5c(0x13c)](){const _0x433a77=a182_0x3b2d5c,_0x153c61=await this[_0x433a77(0x148)][_0x433a77(0x14e)][_0x433a77(0x127)](this[_0x433a77(0x115)][_0x433a77(0x12e)]);await this['log'](_0x433a77(0x132));const _0x5d840a={[this[_0x433a77(0x148)][_0x433a77(0x144)]]:{'lastCommit':_0x153c61['sha']}};await this[_0x433a77(0x133)][_0x433a77(0x118)](this[_0x433a77(0x11a)],_0x5d840a);}async[a182_0x3b2d5c(0x102)]({syncRecord:_0x4464ac,repository:_0x24bc25,logger:_0xd3f6c5,convertToSFDX:_0x3498a1,provider:_0x49ec38}){const _0x2b392a=a182_0x3b2d5c;this[_0x2b392a(0x11a)]=_0x4464ac,this[_0x2b392a(0x14b)]=_0x49ec38,this['repository']=_0x24bc25,this[_0x2b392a(0x12f)]=new salesforce_logger_v2_service_1[(_0x2b392a(0x112))](_0xd3f6c5['getLoggerId'](),_0xd3f6c5['getPrefix']()+_0x2b392a(0x116)+this['syncData'][_0x2b392a(0x100)]+']\x20[Branch:\x20'+this[_0x2b392a(0x11a)]['branchName']+']');try{await this[_0x2b392a(0x133)][_0x2b392a(0x134)](this[_0x2b392a(0x11a)],_0x2b392a(0x119)),this[_0x2b392a(0x122)](_0x2b392a(0x105)),await this['createBranchIfNotExists']();const _0x5edee3=await this[_0x2b392a(0x13e)]();if(_0x5edee3){await this[_0x2b392a(0x133)]['setStatus'](this[_0x2b392a(0x11a)],'Completed'),await this[_0x2b392a(0x122)]('[INFO]\x20Branch\x20synchronized.\x20Skip')[_0x2b392a(0x12a)]();return;}const _0x3fe657=await this[_0x2b392a(0xfe)](_0x3498a1);await this['commitJob'][_0x2b392a(0x102)](_0x3fe657,this[_0x2b392a(0x12f)]),await this['salesforceSync'][_0x2b392a(0x134)](this['syncData'],'Completed'),await this[_0x2b392a(0x13c)](),this[_0x2b392a(0x122)](_0x2b392a(0x10a));}catch(_0x49ef80){throw _0x49ef80;}finally{await this[_0x2b392a(0x12f)][_0x2b392a(0x12a)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a182_0x3b2d5c(0x124)]({'transient':!![]}),__metadata(a182_0x3b2d5c(0x14c),[salesforce_sync_service_1[a182_0x3b2d5c(0x141)],salesforce_service_1[a182_0x3b2d5c(0x149)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a182_0x3b2d5c(0x10e)]=FlosumSyncJob;