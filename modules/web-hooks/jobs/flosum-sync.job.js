const a183_0x328b38=a183_0x42b6;(function(_0x2400e8,_0x406ff6){const _0x56ec8b=a183_0x42b6,_0x491dd7=_0x2400e8();while(!![]){try{const _0x496c61=-parseInt(_0x56ec8b(0xfe))/0x1*(-parseInt(_0x56ec8b(0xf4))/0x2)+parseInt(_0x56ec8b(0xe1))/0x3+-parseInt(_0x56ec8b(0xd7))/0x4+-parseInt(_0x56ec8b(0x10d))/0x5+-parseInt(_0x56ec8b(0xee))/0x6*(-parseInt(_0x56ec8b(0x113))/0x7)+-parseInt(_0x56ec8b(0x111))/0x8+-parseInt(_0x56ec8b(0x124))/0x9;if(_0x496c61===_0x406ff6)break;else _0x491dd7['push'](_0x491dd7['shift']());}catch(_0x43e2ad){_0x491dd7['push'](_0x491dd7['shift']());}}}(a183_0xa5f6,0xb4cf4));const a183_0x24ba13=(function(){let _0x240ca7=!![];return function(_0x5808a6,_0x40fc6b){const _0x557542=_0x240ca7?function(){const _0x2edfdf=a183_0x42b6;if(_0x40fc6b){const _0x4642b4=_0x40fc6b[_0x2edfdf(0x109)](_0x5808a6,arguments);return _0x40fc6b=null,_0x4642b4;}}:function(){};return _0x240ca7=![],_0x557542;};}()),a183_0x3d5013=a183_0x24ba13(this,function(){const _0x590f40=a183_0x42b6;return a183_0x3d5013[_0x590f40(0xff)]()['search'](_0x590f40(0x130))['toString']()[_0x590f40(0x10c)](a183_0x3d5013)[_0x590f40(0x110)]('(((.+)+)+)+$');});a183_0x3d5013();'use strict';var __decorate=this&&this[a183_0x328b38(0xd8)]||function(_0x5a79b8,_0x5ef508,_0x56d511,_0x4610af){const _0x5ec7cd=a183_0x328b38;var _0x293ab6=arguments[_0x5ec7cd(0xe0)],_0x1923f4=_0x293ab6<0x3?_0x5ef508:_0x4610af===null?_0x4610af=Object[_0x5ec7cd(0x107)](_0x5ef508,_0x56d511):_0x4610af,_0x55416f;if(typeof Reflect===_0x5ec7cd(0x121)&&typeof Reflect['decorate']===_0x5ec7cd(0x12e))_0x1923f4=Reflect[_0x5ec7cd(0x122)](_0x5a79b8,_0x5ef508,_0x56d511,_0x4610af);else{for(var _0x1d9ac6=_0x5a79b8[_0x5ec7cd(0xe0)]-0x1;_0x1d9ac6>=0x0;_0x1d9ac6--)if(_0x55416f=_0x5a79b8[_0x1d9ac6])_0x1923f4=(_0x293ab6<0x3?_0x55416f(_0x1923f4):_0x293ab6>0x3?_0x55416f(_0x5ef508,_0x56d511,_0x1923f4):_0x55416f(_0x5ef508,_0x56d511))||_0x1923f4;}return _0x293ab6>0x3&&_0x1923f4&&Object['defineProperty'](_0x5ef508,_0x56d511,_0x1923f4),_0x1923f4;},__metadata=this&&this[a183_0x328b38(0xf9)]||function(_0x33c567,_0x243bab){const _0x3de2a7=a183_0x328b38;if(typeof Reflect===_0x3de2a7(0x121)&&typeof Reflect[_0x3de2a7(0xd9)]===_0x3de2a7(0x12e))return Reflect[_0x3de2a7(0xd9)](_0x33c567,_0x243bab);},FlosumSyncJob_1;Object[a183_0x328b38(0x11c)](exports,a183_0x328b38(0xea),{'value':!![]}),exports[a183_0x328b38(0x101)]=void 0x0;const core_1=require(a183_0x328b38(0x117)),salesforce_logger_v2_service_1=require(a183_0x328b38(0x129)),typedi_1=require('typedi'),constants_1=require(a183_0x328b38(0xf6)),salesforce_retriever_service_1=require(a183_0x328b38(0x114)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a183_0x328b38(0x131)),commit_components_dto_1=require(a183_0x328b38(0x108)),commit_components_job_1=require(a183_0x328b38(0x116));function a183_0x42b6(_0x22a773,_0xb53f4c){const _0x1d6bc6=a183_0xa5f6();return a183_0x42b6=function(_0x3d5013,_0x24ba13){_0x3d5013=_0x3d5013-0xd6;let _0xa5f69e=_0x1d6bc6[_0x3d5013];return _0xa5f69e;},a183_0x42b6(_0x22a773,_0xb53f4c);}let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x244a99,_0x5cd720,_0x69da4c){const _0x134176=a183_0x328b38;this['salesforceSync']=_0x244a99,this[_0x134176(0x11e)]=_0x5cd720,this[_0x134176(0x10b)]=_0x69da4c,this[_0x134176(0xeb)]=new core_1['Logger'](FlosumSyncJob_1[_0x134176(0x12a)]);}[a183_0x328b38(0xdb)](_0x2a20fd){const _0x14aa42=a183_0x328b38;return this[_0x14aa42(0x106)][_0x14aa42(0xdb)](_0x14aa42(0xdd)+this[_0x14aa42(0xec)][_0x14aa42(0x127)]+_0x14aa42(0xe7)+this[_0x14aa42(0xec)][_0x14aa42(0xf7)]+']\x20'+_0x2a20fd);}async[a183_0x328b38(0xed)](){const _0x1dee73=a183_0x328b38;let _0x24dc82=await this[_0x1dee73(0xd6)]['branches']['getOne'](this[_0x1dee73(0xec)][_0x1dee73(0xf7)])[_0x1dee73(0xe5)](()=>null);!_0x24dc82&&(_0x24dc82=await this['repository'][_0x1dee73(0xe3)][_0x1dee73(0xf8)]({'name':this[_0x1dee73(0xec)][_0x1dee73(0xf7)]})),this[_0x1dee73(0x128)]=_0x24dc82;}async[a183_0x328b38(0xde)](){const _0x5eba35=a183_0x328b38;return this['syncData'][_0x5eba35(0xfb)]?this[_0x5eba35(0x118)][_0x5eba35(0xda)](this['syncData'][_0x5eba35(0xfb)]):this[_0x5eba35(0x118)][_0x5eba35(0x10a)](this[_0x5eba35(0xec)][_0x5eba35(0x120)]);}async[a183_0x328b38(0x11b)](){const _0x5b0bc6=a183_0x328b38,_0x3ccb79=await this['getComponentIds'](),_0x135269=new salesforce_retriever_service_1[(_0x5b0bc6(0x11d))](this[_0x5b0bc6(0x11e)]),_0x4b7e30=await _0x135269[_0x5b0bc6(0xf5)](_0x3ccb79);return _0x4b7e30;}async['getCommitDto'](_0x234fa0){const _0x4922c3=a183_0x328b38,_0x467818=new commit_components_dto_1[(_0x4922c3(0x126))]();return _0x467818[_0x4922c3(0xe8)]='Sync\x20repository',_0x467818[_0x4922c3(0x119)]={'name':constants_1[_0x4922c3(0x12f)],'email':constants_1[_0x4922c3(0x11a)]},_0x467818[_0x4922c3(0xdc)]={'writed':await this[_0x4922c3(0x11b)]()},_0x467818[_0x4922c3(0xf3)]=_0x234fa0,_0x467818[_0x4922c3(0xdf)]=this[_0x4922c3(0xd6)],_0x467818[_0x4922c3(0x128)]=this[_0x4922c3(0x128)],_0x467818[_0x4922c3(0xf1)]=!![],_0x467818['provider']=this[_0x4922c3(0x12d)],_0x467818;}async[a183_0x328b38(0xe9)](){const _0x25e2fb=a183_0x328b38,_0x1b266f=await this[_0x25e2fb(0x118)][_0x25e2fb(0x112)](this[_0x25e2fb(0xec)]),_0x501973=await this[_0x25e2fb(0x11e)][_0x25e2fb(0x10e)](_0x1b266f)[_0x25e2fb(0x12b)](_0x44405c=>typeof _0x44405c===_0x25e2fb(0x11f)?JSON['parse'](_0x44405c):_0x44405c)[_0x25e2fb(0xe5)](()=>({}));if(_0x501973[this[_0x25e2fb(0xd6)][_0x25e2fb(0xe2)]]){if(_0x501973[this['repository'][_0x25e2fb(0xe2)]][_0x25e2fb(0xf0)]===this['branch'][_0x25e2fb(0x102)])return!![];}return![];}async['updateLastCommit'](){const _0x1e4293=a183_0x328b38,_0x569560=await this[_0x1e4293(0xd6)][_0x1e4293(0xe3)][_0x1e4293(0x104)](this['branch']['name']);await this['log']('[INFO]\x20Update\x20remote\x20state.');const _0x2d97f7={[this['repository']['gitUrl']]:{'lastCommit':_0x569560[_0x1e4293(0x102)]}};await this[_0x1e4293(0x118)][_0x1e4293(0xe4)](this['syncData'],_0x2d97f7);}async[a183_0x328b38(0xf5)]({syncRecord:_0x90c3ce,repository:_0x167acd,logger:_0x1f0e78,convertToSFDX:_0x299346,provider:_0x2f15b5}){const _0x1b4b82=a183_0x328b38;this[_0x1b4b82(0xec)]=_0x90c3ce,this[_0x1b4b82(0x12d)]=_0x2f15b5,this[_0x1b4b82(0xd6)]=_0x167acd,this['sfLogger']=new salesforce_logger_v2_service_1[(_0x1b4b82(0x105))](_0x1f0e78[_0x1b4b82(0xfa)](),_0x1f0e78[_0x1b4b82(0xf2)]()+'\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x1b4b82(0xec)][_0x1b4b82(0x127)]+_0x1b4b82(0xe7)+this[_0x1b4b82(0xec)][_0x1b4b82(0xf7)]+']');try{await this[_0x1b4b82(0x118)]['setStatus'](this[_0x1b4b82(0xec)],_0x1b4b82(0xe6)),this[_0x1b4b82(0xdb)](_0x1b4b82(0x100)),await this[_0x1b4b82(0xed)]();const _0x3bb12b=await this[_0x1b4b82(0xe9)]();if(_0x3bb12b){await this[_0x1b4b82(0x118)]['setStatus'](this[_0x1b4b82(0xec)],_0x1b4b82(0x12c)),await this[_0x1b4b82(0xdb)](_0x1b4b82(0xef))[_0x1b4b82(0x115)]();return;}const _0x41a97d=await this[_0x1b4b82(0x125)](_0x299346);await this[_0x1b4b82(0x10b)][_0x1b4b82(0xf5)](_0x41a97d,this['sfLogger']),await this[_0x1b4b82(0x118)][_0x1b4b82(0xfd)](this[_0x1b4b82(0xec)],_0x1b4b82(0x12c)),await this['updateLastCommit'](),this[_0x1b4b82(0xdb)](_0x1b4b82(0x103));}catch(_0x349255){throw _0x349255;}finally{await this[_0x1b4b82(0x106)]['send']();}}};function a183_0xa5f6(){const _0x172731=['123561LXbCjT','getCommitDto','CommitComponentsDto','repositoryName','branch','../../salesforce/services/salesforce-logger-v2.service','name','then','Completed','provider','function','DEFAULT_GIT_USER_NAME','(((.+)+)+)+$','../../salesforce/services/salesforce.service','repository','691948AlFPUw','__decorate','metadata','getComponentsFromRepository','log','components','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','getComponentIds','repo','length','3883308KScdsm','gitUrl','branches','updateRemoteState','catch','In\x20Progress',']\x20[Branch:\x20','message','checkSyncStatus','__esModule','logger','syncData','createBranchIfNotExists','6698418lsxTfz','[INFO]\x20Branch\x20synchronized.\x20Skip','lastCommit','force','getPrefix','convertToSFDX','37006zPTEsp','run','../../../constants','branchName','create','__metadata','getLoggerId','repositoryId','SalesforceService','setStatus','35BLXifu','toString','[INFO]\x20Start\x20sync\x20job','FlosumSyncJob','sha','[INFO]\x20Sync\x20job\x20done.','getOne','SalesforceLogger2','sfLogger','getOwnPropertyDescriptor','../dto/commit-components.dto','apply','getBranchComponents','commitJob','constructor','6515955WRxWno','retrieveAttachment','CommitComponentsJob','search','6623528tSQKQa','getRemoteStateAttachmentId','7dVzksF','../../salesforce/services/salesforce-retriever.service','send','./commit-components.job','../../../core','salesforceSync','user','DEFAULT_GIT_USER_EMAIL','getComponents','defineProperty','SalesforceRetrieverService','salesforceService','string','branchId','object','decorate','Service'];a183_0xa5f6=function(){return _0x172731;};return a183_0xa5f6();}FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a183_0x328b38(0x123)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a183_0x328b38(0xfc)],commit_components_job_1[a183_0x328b38(0x10f)]])],FlosumSyncJob),exports[a183_0x328b38(0x101)]=FlosumSyncJob;