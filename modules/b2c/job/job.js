function a66_0x8c03(_0x21337f,_0x2ac56c){const _0x575609=a66_0x3a17();return a66_0x8c03=function(_0xee7166,_0x2b2b74){_0xee7166=_0xee7166-0x16e;let _0x3a17f6=_0x575609[_0xee7166];return _0x3a17f6;},a66_0x8c03(_0x21337f,_0x2ac56c);}const a66_0x372171=a66_0x8c03;(function(_0x475760,_0x17fc9b){const _0x2cfc6=a66_0x8c03,_0x497f21=_0x475760();while(!![]){try{const _0x274d25=-parseInt(_0x2cfc6(0x1ab))/0x1*(-parseInt(_0x2cfc6(0x190))/0x2)+parseInt(_0x2cfc6(0x183))/0x3*(-parseInt(_0x2cfc6(0x19b))/0x4)+-parseInt(_0x2cfc6(0x174))/0x5*(parseInt(_0x2cfc6(0x170))/0x6)+parseInt(_0x2cfc6(0x1aa))/0x7*(-parseInt(_0x2cfc6(0x18f))/0x8)+parseInt(_0x2cfc6(0x1a7))/0x9+parseInt(_0x2cfc6(0x1b1))/0xa*(parseInt(_0x2cfc6(0x197))/0xb)+parseInt(_0x2cfc6(0x17b))/0xc;if(_0x274d25===_0x17fc9b)break;else _0x497f21['push'](_0x497f21['shift']());}catch(_0x2f3555){_0x497f21['push'](_0x497f21['shift']());}}}(a66_0x3a17,0xf0208));function a66_0x3a17(){const _0x15260e=['Job','setError','@flosum/utils','@flosum/salesforce','argv','branchId','B2C\x20job\x20has\x20been\x20started.','setInProgress','getFlosumNamespace','./classes/deploy-cartridges','AxiosInstanceUtils','1321434BZSKrx','error','path','4249eJxOsg','75jMBhPL','getAuthDetails','./classes/retrieve-cartridges','runScript','======\x20Deploy\x20cartridges\x20','exit','609290fCnPTg','execute','isCompileCartridges','defineProperty','__esModule','logger','../constants','./classes/logger','isExistsPath','(((.+)+)+)+$','default','slice','retrieveCartridges','6mcKrXv','log','toLowerCase','__importDefault','2168555vfWkXN','jobPath','B2C\x20job\x20has\x20been\x20failed.','FLOSUM_SCRIPT_PATH','======\x20Run\x20script\x20','jobId','../../shared/managers/auth.manager','21559020tKnAvr','apiVersion','true','B2C\x20job\x20has\x20been\x20completed.','credentials','setCompleted','../../../core','search','48YEtjwX','variables','getAxiosInstance','codeVersion','getManifestParameters','deployCartridges','axiosInstance','Logger','../../shared/managers/state-manger','apply','toString','activateCodeVersion','23544SEwnAx','48428HftHOW','env','======\x20Retrieve\x20cartridges\x20','then','FsUtils','padEnd','isActivateCodeVersion','33OueuHr','minimist','IGNORE_FLOSUM_NAMESPACE','constructor','184644mmGGMv'];a66_0x3a17=function(){return _0x15260e;};return a66_0x3a17();}const a66_0x2b2b74=(function(){let _0x32d920=!![];return function(_0x559b70,_0x2212de){const _0x1d1d02=_0x32d920?function(){const _0x4f519e=a66_0x8c03;if(_0x2212de){const _0xd64499=_0x2212de[_0x4f519e(0x18c)](_0x559b70,arguments);return _0x2212de=null,_0xd64499;}}:function(){};return _0x32d920=![],_0x1d1d02;};}()),a66_0xee7166=a66_0x2b2b74(this,function(){const _0x41036f=a66_0x8c03;return a66_0xee7166[_0x41036f(0x18d)]()['search'](_0x41036f(0x1ba))[_0x41036f(0x18d)]()[_0x41036f(0x19a)](a66_0xee7166)[_0x41036f(0x182)](_0x41036f(0x1ba));});a66_0xee7166();'use strict';var __importDefault=this&&this[a66_0x372171(0x173)]||function(_0x152cbd){const _0x3ed1c4=a66_0x372171;return _0x152cbd&&_0x152cbd[_0x3ed1c4(0x1b5)]?_0x152cbd:{'default':_0x152cbd};};Object[a66_0x372171(0x1b4)](exports,'__esModule',{'value':!![]}),exports[a66_0x372171(0x19c)]=void 0x0;const core_1=require(a66_0x372171(0x181)),salesforce_1=require(a66_0x372171(0x19f)),auth_manager_1=require(a66_0x372171(0x17a)),constants_1=require(a66_0x372171(0x1b7)),utils_1=require(a66_0x372171(0x19e)),minimist_1=__importDefault(require(a66_0x372171(0x198))),path_1=__importDefault(require(a66_0x372171(0x1a9))),state_manger_1=__importDefault(require(a66_0x372171(0x18b))),logger_1=__importDefault(require(a66_0x372171(0x1b8))),retrieve_cartridges_1=__importDefault(require(a66_0x372171(0x1ad))),deploy_cartridges_1=__importDefault(require(a66_0x372171(0x1a5))),run_script_1=__importDefault(require('./classes/run-script')),manifest_manager_1=__importDefault(require('./classes/manifest-manager')),salesforce_auth_1=__importDefault(require('./classes/salesforce-auth'));class Job{constructor(){const _0x814807=a66_0x372171,{jobId:_0x41d4bb,jobStorePath:_0x4fccf2}=(0x0,minimist_1[_0x814807(0x1bb)])(process[_0x814807(0x1a0)][_0x814807(0x16e)](0x2));this[_0x814807(0x175)]=_0x4fccf2,this[_0x814807(0x179)]=_0x41d4bb;}async[a66_0x372171(0x1b2)](){const _0x4bfbb8=a66_0x372171,_0x51f354=new core_1[(_0x4bfbb8(0x18a))](this[_0x4bfbb8(0x179)]);this[_0x4bfbb8(0x1b6)]=new logger_1[(_0x4bfbb8(0x1bb))](this[_0x4bfbb8(0x179)],_0x51f354);const _0x5567a5=await new state_manger_1[(_0x4bfbb8(0x1bb))](this[_0x4bfbb8(0x175)])['init'](),_0x4b4930=path_1['default']['join'](this[_0x4bfbb8(0x175)],'cartridges',constants_1[_0x4bfbb8(0x177)]);await this['logger'][_0x4bfbb8(0x171)](_0x4bfbb8(0x1a2));try{await _0x5567a5[_0x4bfbb8(0x1a3)](),this[_0x4bfbb8(0x189)]=await this[_0x4bfbb8(0x185)](),this['namespace']=this[_0x4bfbb8(0x1a4)](),await this['getManifestParameters'](),await this[_0x4bfbb8(0x16f)](),await utils_1[_0x4bfbb8(0x194)][_0x4bfbb8(0x1b9)](_0x4b4930)?await this[_0x4bfbb8(0x1ae)]():(await this[_0x4bfbb8(0x188)](),this['isActivateCodeVersion']&&await this[_0x4bfbb8(0x18e)]()),await _0x5567a5[_0x4bfbb8(0x180)](),await this[_0x4bfbb8(0x1b6)][_0x4bfbb8(0x171)](_0x4bfbb8(0x17e));}catch(_0xeedc81){await _0x5567a5[_0x4bfbb8(0x19d)](_0xeedc81),await this['logger'][_0x4bfbb8(0x1a8)](_0xeedc81['message']),await this['logger'][_0x4bfbb8(0x1a8)](_0x4bfbb8(0x176));}}async[a66_0x372171(0x187)](){const _0x38c8ec=a66_0x372171,{credentials:_0x45be91,apiVersion:_0xe4f84b,branchId:_0x165b68,codeVersion:_0x273231,isCompileCartridges:_0x22b194,isActivateCodeVersion:_0x120266,variables:_0x411b07}=await new manifest_manager_1['default'](this[_0x38c8ec(0x175)])['init']();this['credentials']=_0x45be91,this[_0x38c8ec(0x17c)]=_0xe4f84b,this[_0x38c8ec(0x1a1)]=_0x165b68,this[_0x38c8ec(0x186)]=_0x273231,this[_0x38c8ec(0x1b3)]=_0x22b194,this[_0x38c8ec(0x196)]=_0x120266,this[_0x38c8ec(0x184)]=_0x411b07;}async[a66_0x372171(0x185)](){const _0x42e5f1=a66_0x372171,_0x342464=await salesforce_auth_1[_0x42e5f1(0x1bb)][_0x42e5f1(0x1ac)]();return salesforce_1[_0x42e5f1(0x1a6)]['create'](new auth_manager_1['AuthManager'](_0x342464),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async['retrieveCartridges'](){const _0x1e357f=a66_0x372171;await this[_0x1e357f(0x1b6)][_0x1e357f(0x171)](_0x1e357f(0x192)[_0x1e357f(0x195)](0x32,'=')),await new retrieve_cartridges_1[(_0x1e357f(0x1bb))](this[_0x1e357f(0x175)],this['axiosInstance'],this[_0x1e357f(0x17c)],this['namespace'],this[_0x1e357f(0x1a1)],this[_0x1e357f(0x184)],this['logger'])[_0x1e357f(0x1b2)]();}async[a66_0x372171(0x1ae)](){const _0x4ac59e=a66_0x372171;await this[_0x4ac59e(0x1b6)][_0x4ac59e(0x171)](_0x4ac59e(0x178)[_0x4ac59e(0x195)](0x32,'=')),await new run_script_1[(_0x4ac59e(0x1bb))](this[_0x4ac59e(0x175)],this['credentials'],this[_0x4ac59e(0x186)],this[_0x4ac59e(0x1b3)],this[_0x4ac59e(0x196)],this['logger'])['execute']();}async[a66_0x372171(0x188)](){const _0x3f9298=a66_0x372171;await this[_0x3f9298(0x1b6)]['log'](_0x3f9298(0x1af)[_0x3f9298(0x195)](0x32,'=')),await new deploy_cartridges_1[(_0x3f9298(0x1bb))](this[_0x3f9298(0x175)],this[_0x3f9298(0x17f)],this['codeVersion'],this[_0x3f9298(0x1b6)])[_0x3f9298(0x1b2)]();}async['activateCodeVersion'](){const _0x312385=a66_0x372171;await this[_0x312385(0x1b6)][_0x312385(0x171)]('======\x20Deploy\x20cartridges\x20'[_0x312385(0x195)](0x32,'=')),await new deploy_cartridges_1[(_0x312385(0x1bb))](this[_0x312385(0x175)],this[_0x312385(0x17f)],this[_0x312385(0x186)],this[_0x312385(0x1b6)])[_0x312385(0x18e)]();}['getFlosumNamespace'](){const _0xfc988a=a66_0x372171;var _0x5213c3,_0x454fc1;return((_0x454fc1=(_0x5213c3=process[_0xfc988a(0x191)])===null||_0x5213c3===void 0x0?void 0x0:_0x5213c3[_0xfc988a(0x199)])===null||_0x454fc1===void 0x0?void 0x0:_0x454fc1[_0xfc988a(0x172)]())===_0xfc988a(0x17d)?'':constants_1['FLOSUM_NAMESPACE'];}}exports[a66_0x372171(0x19c)]=Job,new Job()[a66_0x372171(0x1b2)]()[a66_0x372171(0x193)](()=>process['exit'](0x0))['catch'](()=>process[a66_0x372171(0x1b0)](0x1));