const a68_0x4acfb3=a68_0x4e64;(function(_0x31ec06,_0x56ea6e){const _0x2693e9=a68_0x4e64,_0x563742=_0x31ec06();while(!![]){try{const _0x241d5f=parseInt(_0x2693e9(0x11e))/0x1*(-parseInt(_0x2693e9(0x13c))/0x2)+parseInt(_0x2693e9(0x130))/0x3+-parseInt(_0x2693e9(0x164))/0x4+-parseInt(_0x2693e9(0x11d))/0x5*(parseInt(_0x2693e9(0x140))/0x6)+parseInt(_0x2693e9(0x141))/0x7+parseInt(_0x2693e9(0x146))/0x8*(-parseInt(_0x2693e9(0x123))/0x9)+parseInt(_0x2693e9(0x169))/0xa;if(_0x241d5f===_0x56ea6e)break;else _0x563742['push'](_0x563742['shift']());}catch(_0x3e5091){_0x563742['push'](_0x563742['shift']());}}}(a68_0x2147,0x54fdd));function a68_0x4e64(_0x1370a1,_0x36ff6d){const _0x4ff460=a68_0x2147();return a68_0x4e64=function(_0x4086f3,_0x43e12d){_0x4086f3=_0x4086f3-0x11d;let _0x214753=_0x4ff460[_0x4086f3];return _0x214753;},a68_0x4e64(_0x1370a1,_0x36ff6d);}const a68_0x43e12d=(function(){let _0x49d8c2=!![];return function(_0x1e05b7,_0x355331){const _0x506e94=_0x49d8c2?function(){const _0x27536c=a68_0x4e64;if(_0x355331){const _0x13e44c=_0x355331[_0x27536c(0x131)](_0x1e05b7,arguments);return _0x355331=null,_0x13e44c;}}:function(){};return _0x49d8c2=![],_0x506e94;};}()),a68_0x4086f3=a68_0x43e12d(this,function(){const _0x5c27b0=a68_0x4e64;return a68_0x4086f3[_0x5c27b0(0x13e)]()[_0x5c27b0(0x14a)](_0x5c27b0(0x15d))['toString']()[_0x5c27b0(0x142)](a68_0x4086f3)[_0x5c27b0(0x14a)](_0x5c27b0(0x15d));});a68_0x4086f3();'use strict';var __importDefault=this&&this[a68_0x4acfb3(0x148)]||function(_0x837c78){const _0x4bcaa1=a68_0x4acfb3;return _0x837c78&&_0x837c78[_0x4bcaa1(0x12e)]?_0x837c78:{'default':_0x837c78};};Object[a68_0x4acfb3(0x15e)](exports,a68_0x4acfb3(0x12e),{'value':!![]}),exports[a68_0x4acfb3(0x160)]=void 0x0;const core_1=require(a68_0x4acfb3(0x125)),salesforce_1=require('@flosum/salesforce'),auth_manager_1=require(a68_0x4acfb3(0x167)),constants_1=require(a68_0x4acfb3(0x12d)),utils_1=require('@flosum/utils'),minimist_1=__importDefault(require(a68_0x4acfb3(0x15a))),path_1=__importDefault(require(a68_0x4acfb3(0x161))),state_manger_1=__importDefault(require(a68_0x4acfb3(0x12a))),logger_1=__importDefault(require('./classes/logger')),retrieve_cartridges_1=__importDefault(require(a68_0x4acfb3(0x147))),deploy_cartridges_1=__importDefault(require(a68_0x4acfb3(0x143))),run_script_1=__importDefault(require(a68_0x4acfb3(0x133))),manifest_manager_1=__importDefault(require(a68_0x4acfb3(0x151))),salesforce_auth_1=__importDefault(require(a68_0x4acfb3(0x139)));class Job{constructor(){const _0x43dfdb=a68_0x4acfb3,{jobId:_0x373648,jobStorePath:_0x5a0c86}=(0x0,minimist_1[_0x43dfdb(0x13a)])(process['argv'][_0x43dfdb(0x16b)](0x2));this[_0x43dfdb(0x138)]=_0x5a0c86,this['jobId']=_0x373648;}async[a68_0x4acfb3(0x14d)](){const _0x4b616e=a68_0x4acfb3;this['systemLogger']=new core_1[(_0x4b616e(0x127))](this[_0x4b616e(0x155)]),this['logger']=new logger_1[(_0x4b616e(0x13a))](this['jobId'],this['systemLogger']);const _0xf4ddc2=await new state_manger_1[(_0x4b616e(0x13a))](this['jobPath'])['init'](),_0x3deb25=path_1[_0x4b616e(0x13a)][_0x4b616e(0x16d)](this[_0x4b616e(0x138)],_0x4b616e(0x16c),constants_1[_0x4b616e(0x156)]);await this[_0x4b616e(0x14e)][_0x4b616e(0x163)](_0x4b616e(0x132));try{await _0xf4ddc2[_0x4b616e(0x166)](),this[_0x4b616e(0x13f)]=await this[_0x4b616e(0x14f)](),this['namespace']=this['getFlosumNamespace'](),await this[_0x4b616e(0x120)](),await this[_0x4b616e(0x137)](),await utils_1['FsUtils'][_0x4b616e(0x13d)](_0x3deb25)?await this[_0x4b616e(0x128)]():await this[_0x4b616e(0x15b)](),await _0xf4ddc2[_0x4b616e(0x152)](),await this[_0x4b616e(0x14e)]['log'](_0x4b616e(0x158));}catch(_0x1b8ee7){await _0xf4ddc2[_0x4b616e(0x165)](_0x1b8ee7),await this[_0x4b616e(0x14e)]['error'](_0x1b8ee7[_0x4b616e(0x144)]),await this[_0x4b616e(0x14e)][_0x4b616e(0x12f)](_0x4b616e(0x14c));}}async[a68_0x4acfb3(0x120)](){const _0x27e3f9=a68_0x4acfb3,{credentials:_0x1ac0f5,apiVersion:_0x4f1adb,branchId:_0x170804,codeVersion:_0x3a461f,isCompileCartridges:_0x37a1e2,isActivateCodeVersion:_0x6ef078,variables:_0x3aa30f}=await new manifest_manager_1[(_0x27e3f9(0x13a))](this[_0x27e3f9(0x138)])[_0x27e3f9(0x157)]();this[_0x27e3f9(0x162)]=_0x1ac0f5,this[_0x27e3f9(0x124)]=_0x4f1adb,this[_0x27e3f9(0x14b)]=_0x170804,this[_0x27e3f9(0x15c)]=_0x3a461f,this['isCompileCartridges']=_0x37a1e2,this[_0x27e3f9(0x12b)]=_0x6ef078,this[_0x27e3f9(0x16a)]=_0x3aa30f;}async['getAxiosInstance'](){const _0x255a04=a68_0x4acfb3,_0x4a6f2d=await salesforce_auth_1[_0x255a04(0x13a)][_0x255a04(0x149)]();return salesforce_1[_0x255a04(0x159)]['create'](new auth_manager_1[(_0x255a04(0x134))](_0x4a6f2d),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a68_0x4acfb3(0x137)](){const _0x4de31e=a68_0x4acfb3;await this['logger'][_0x4de31e(0x163)](_0x4de31e(0x129)[_0x4de31e(0x145)](0x32,'=')),await new retrieve_cartridges_1['default'](this['jobPath'],this['axiosInstance'],this[_0x4de31e(0x124)],this[_0x4de31e(0x11f)],this[_0x4de31e(0x14b)],this[_0x4de31e(0x16a)],this[_0x4de31e(0x14e)])[_0x4de31e(0x14d)]();}async[a68_0x4acfb3(0x128)](){const _0x2e5007=a68_0x4acfb3;await this[_0x2e5007(0x14e)][_0x2e5007(0x163)](_0x2e5007(0x136)[_0x2e5007(0x145)](0x32,'=')),await new run_script_1[(_0x2e5007(0x13a))](this['jobPath'],this[_0x2e5007(0x162)],this[_0x2e5007(0x15c)],this[_0x2e5007(0x122)],this[_0x2e5007(0x12b)],this[_0x2e5007(0x13b)],this[_0x2e5007(0x14e)])['execute']();}async[a68_0x4acfb3(0x15b)](){const _0x155629=a68_0x4acfb3;await this[_0x155629(0x14e)][_0x155629(0x163)](_0x155629(0x135)[_0x155629(0x145)](0x32,'=')),await new deploy_cartridges_1[(_0x155629(0x13a))](this[_0x155629(0x138)],this[_0x155629(0x162)],this[_0x155629(0x15c)],this['isActivateCodeVersion'],this[_0x155629(0x14e)])['execute']();}[a68_0x4acfb3(0x12c)](){const _0x1965c9=a68_0x4acfb3;var _0x469725,_0x325c51;return((_0x325c51=(_0x469725=process[_0x1965c9(0x150)])===null||_0x469725===void 0x0?void 0x0:_0x469725[_0x1965c9(0x126)])===null||_0x325c51===void 0x0?void 0x0:_0x325c51[_0x1965c9(0x15f)]())===_0x1965c9(0x154)?'':constants_1[_0x1965c9(0x168)];}}exports[a68_0x4acfb3(0x160)]=Job,new Job()['execute']()['then'](()=>process['exit'](0x0))[a68_0x4acfb3(0x121)](()=>process[a68_0x4acfb3(0x153)](0x1));function a68_0x2147(){const _0x4f551d=['1215762SPxUUw','isExistsPath','toString','axiosInstance','6558DUBTSN','1940967GdSbsV','constructor','./classes/deploy-cartridges','message','padEnd','1078504OtCMrA','./classes/retrieve-cartridges','__importDefault','getAuthDetails','search','branchId','Job\x20has\x20been\x20failed.','execute','logger','getAxiosInstance','env','./classes/manifest-manager','setCompleted','exit','true','jobId','FLOSUM_SCRIPT_PATH','init','Job\x20has\x20been\x20completed.','AxiosInstanceUtils','minimist','deployCartridges','codeVersion','(((.+)+)+)+$','defineProperty','toLowerCase','Job','path','credentials','log','294172FddnXv','setError','setInProgress','../../shared/managers/auth.manager','FLOSUM_NAMESPACE','8631210YxdlVk','variables','slice','cartridges','join','835VfZLtk','1vilJiC','namespace','getManifestParameters','catch','isCompileCartridges','18bmMqav','apiVersion','../../../core','IGNORE_FLOSUM_NAMESPACE','Logger','runScript','======\x20Retrieve\x20cartridges\x20','../../shared/managers/state-manger','isActivateCodeVersion','getFlosumNamespace','../constants','__esModule','error','1023912ceapgr','apply','Job\x20has\x20been\x20started.','./classes/run-script','AuthManager','======\x20Deploy\x20cartridges\x20','======\x20Run\x20script\x20','retrieveCartridges','jobPath','./classes/salesforce-auth','default','systemLogger'];a68_0x2147=function(){return _0x4f551d;};return a68_0x2147();}