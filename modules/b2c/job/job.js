const a68_0x25be90=a68_0x2c51;function a68_0x4cee(){const _0x559784=['./classes/salesforce-auth','create','Job\x20has\x20been\x20failed.','axiosInstance','5uOgDzL','2620732ZIAFvf','Logger','858083opuStT','AxiosInstanceUtils','@flosum/salesforce','../constants','98azLUkx','getManifestParameters','logger','toLowerCase','log','FsUtils','namespace','749yraorF','argv','35917827QlhDEX','__importDefault','../../shared/managers/state-manger','FLOSUM_SCRIPT_PATH','setError','@flosum/utils','apiVersion','toString','isActivateCodeVersion','padEnd','isCompileCartridges','4084866nnNfUi','init','setInProgress','======\x20Deploy\x20cartridges\x20','deployCartridges','jobId','setCompleted','cartridges','../../shared/managers/auth.manager','IGNORE_FLOSUM_NAMESPACE','runScript','error','__esModule','exit','./classes/run-script','Job\x20has\x20been\x20started.','variables','jobPath','./classes/deploy-cartridges','(((.+)+)+)+$','minimist','Job\x20has\x20been\x20completed.','FLOSUM_NAMESPACE','retrieveCartridges','./classes/logger','constructor','defineProperty','32052OognuG','======\x20Retrieve\x20cartridges\x20','AuthManager','path','45mkhRZY','default','19624GkdtCR','execute','slice','1481090gTzsSX','credentials','Job','../../../core','getAuthDetails','getFlosumNamespace','search','codeVersion','message'];a68_0x4cee=function(){return _0x559784;};return a68_0x4cee();}(function(_0x5bc986,_0x596a81){const _0x5592dd=a68_0x2c51,_0x3240dc=_0x5bc986();while(!![]){try{const _0x453a49=parseInt(_0x5592dd(0x1b3))/0x1+-parseInt(_0x5592dd(0x1b7))/0x2*(-parseInt(_0x5592dd(0x19a))/0x3)+parseInt(_0x5592dd(0x1b1))/0x4+-parseInt(_0x5592dd(0x1b0))/0x5*(-parseInt(_0x5592dd(0x17f))/0x6)+-parseInt(_0x5592dd(0x172))/0x7*(-parseInt(_0x5592dd(0x1a0))/0x8)+-parseInt(_0x5592dd(0x19e))/0x9*(-parseInt(_0x5592dd(0x1a3))/0xa)+-parseInt(_0x5592dd(0x174))/0xb;if(_0x453a49===_0x596a81)break;else _0x3240dc['push'](_0x3240dc['shift']());}catch(_0x2e58b3){_0x3240dc['push'](_0x3240dc['shift']());}}}(a68_0x4cee,0x6f2b8));const a68_0x72f5e2=(function(){let _0x5baaea=!![];return function(_0x53eb2c,_0x1b9cf0){const _0x501b2e=_0x5baaea?function(){if(_0x1b9cf0){const _0x5272d4=_0x1b9cf0['apply'](_0x53eb2c,arguments);return _0x1b9cf0=null,_0x5272d4;}}:function(){};return _0x5baaea=![],_0x501b2e;};}()),a68_0x4f33b2=a68_0x72f5e2(this,function(){const _0xd427fc=a68_0x2c51;return a68_0x4f33b2[_0xd427fc(0x17b)]()['search'](_0xd427fc(0x192))['toString']()[_0xd427fc(0x198)](a68_0x4f33b2)[_0xd427fc(0x1a9)]('(((.+)+)+)+$');});a68_0x4f33b2();'use strict';var __importDefault=this&&this[a68_0x25be90(0x175)]||function(_0x4f64b3){const _0x2f350e=a68_0x25be90;return _0x4f64b3&&_0x4f64b3[_0x2f350e(0x18b)]?_0x4f64b3:{'default':_0x4f64b3};};Object[a68_0x25be90(0x199)](exports,a68_0x25be90(0x18b),{'value':!![]}),exports[a68_0x25be90(0x1a5)]=void 0x0;const core_1=require(a68_0x25be90(0x1a6)),salesforce_1=require(a68_0x25be90(0x1b5)),auth_manager_1=require(a68_0x25be90(0x187)),constants_1=require(a68_0x25be90(0x1b6)),utils_1=require(a68_0x25be90(0x179)),minimist_1=__importDefault(require(a68_0x25be90(0x193))),path_1=__importDefault(require(a68_0x25be90(0x19d))),state_manger_1=__importDefault(require(a68_0x25be90(0x176))),logger_1=__importDefault(require(a68_0x25be90(0x197))),retrieve_cartridges_1=__importDefault(require('./classes/retrieve-cartridges')),deploy_cartridges_1=__importDefault(require(a68_0x25be90(0x191))),run_script_1=__importDefault(require(a68_0x25be90(0x18d))),manifest_manager_1=__importDefault(require('./classes/manifest-manager')),salesforce_auth_1=__importDefault(require(a68_0x25be90(0x1ac)));function a68_0x2c51(_0x516fd1,_0x131b2e){const _0x6413f2=a68_0x4cee();return a68_0x2c51=function(_0x4f33b2,_0x72f5e2){_0x4f33b2=_0x4f33b2-0x16c;let _0x4cee9b=_0x6413f2[_0x4f33b2];return _0x4cee9b;},a68_0x2c51(_0x516fd1,_0x131b2e);}class Job{constructor(){const _0x23ce17=a68_0x25be90,{jobId:_0x39b2e1,jobStorePath:_0xa1941e}=(0x0,minimist_1[_0x23ce17(0x19f)])(process[_0x23ce17(0x173)][_0x23ce17(0x1a2)](0x2));this[_0x23ce17(0x190)]=_0xa1941e,this[_0x23ce17(0x184)]=_0x39b2e1;}async['execute'](){const _0x50d17a=a68_0x25be90,_0x44da1a=new core_1[(_0x50d17a(0x1b2))](this[_0x50d17a(0x184)]);this[_0x50d17a(0x16d)]=new logger_1['default'](this[_0x50d17a(0x184)],_0x44da1a);const _0x262c7c=await new state_manger_1['default'](this[_0x50d17a(0x190)])[_0x50d17a(0x180)](),_0x23122e=path_1[_0x50d17a(0x19f)]['join'](this[_0x50d17a(0x190)],_0x50d17a(0x186),constants_1[_0x50d17a(0x177)]);await this[_0x50d17a(0x16d)]['log'](_0x50d17a(0x18e));try{await _0x262c7c[_0x50d17a(0x181)](),this[_0x50d17a(0x1af)]=await this['getAxiosInstance'](),this['namespace']=this[_0x50d17a(0x1a8)](),await this[_0x50d17a(0x16c)](),await this[_0x50d17a(0x196)](),await utils_1[_0x50d17a(0x170)]['isExistsPath'](_0x23122e)?await this['runScript']():await this[_0x50d17a(0x183)](),await _0x262c7c[_0x50d17a(0x185)](),await this[_0x50d17a(0x16d)][_0x50d17a(0x16f)](_0x50d17a(0x194));}catch(_0x1266e8){await _0x262c7c[_0x50d17a(0x178)](_0x1266e8),await this['logger']['error'](_0x1266e8[_0x50d17a(0x1ab)]),await this[_0x50d17a(0x16d)][_0x50d17a(0x18a)](_0x50d17a(0x1ae));}}async['getManifestParameters'](){const _0xeb08f4=a68_0x25be90,{credentials:_0x27b2a8,apiVersion:_0x4779d6,branchId:_0x375a02,codeVersion:_0x48b242,isCompileCartridges:_0x2fad5d,isActivateCodeVersion:_0x3f120e,variables:_0x211715}=await new manifest_manager_1['default'](this['jobPath'])['init']();this[_0xeb08f4(0x1a4)]=_0x27b2a8,this[_0xeb08f4(0x17a)]=_0x4779d6,this['branchId']=_0x375a02,this['codeVersion']=_0x48b242,this[_0xeb08f4(0x17e)]=_0x2fad5d,this[_0xeb08f4(0x17c)]=_0x3f120e,this[_0xeb08f4(0x18f)]=_0x211715;}async['getAxiosInstance'](){const _0x5b6921=a68_0x25be90,_0x497889=await salesforce_auth_1['default'][_0x5b6921(0x1a7)]();return salesforce_1[_0x5b6921(0x1b4)][_0x5b6921(0x1ad)](new auth_manager_1[(_0x5b6921(0x19c))](_0x497889),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a68_0x25be90(0x196)](){const _0xca9683=a68_0x25be90;await this[_0xca9683(0x16d)][_0xca9683(0x16f)](_0xca9683(0x19b)['padEnd'](0x32,'=')),await new retrieve_cartridges_1[(_0xca9683(0x19f))](this['jobPath'],this[_0xca9683(0x1af)],this[_0xca9683(0x17a)],this[_0xca9683(0x171)],this['branchId'],this[_0xca9683(0x18f)],this['logger'])['execute']();}async[a68_0x25be90(0x189)](){const _0x45f70a=a68_0x25be90;await this[_0x45f70a(0x16d)][_0x45f70a(0x16f)]('======\x20Run\x20script\x20'[_0x45f70a(0x17d)](0x32,'=')),await new run_script_1[(_0x45f70a(0x19f))](this['jobPath'],this['credentials'],this['codeVersion'],this['isCompileCartridges'],this['isActivateCodeVersion'],this['logger'])[_0x45f70a(0x1a1)]();}async[a68_0x25be90(0x183)](){const _0x359c30=a68_0x25be90;await this[_0x359c30(0x16d)][_0x359c30(0x16f)](_0x359c30(0x182)[_0x359c30(0x17d)](0x32,'=')),await new deploy_cartridges_1['default'](this[_0x359c30(0x190)],this[_0x359c30(0x1a4)],this[_0x359c30(0x1aa)],this[_0x359c30(0x17c)],this['logger'])['execute']();}[a68_0x25be90(0x1a8)](){const _0x32aff5=a68_0x25be90;var _0xd57252,_0x5e3e20;return((_0x5e3e20=(_0xd57252=process['env'])===null||_0xd57252===void 0x0?void 0x0:_0xd57252[_0x32aff5(0x188)])===null||_0x5e3e20===void 0x0?void 0x0:_0x5e3e20[_0x32aff5(0x16e)]())==='true'?'':constants_1[_0x32aff5(0x195)];}}exports[a68_0x25be90(0x1a5)]=Job,new Job()['execute']()['then'](()=>process['exit'](0x0))['catch'](()=>process[a68_0x25be90(0x18c)](0x1));