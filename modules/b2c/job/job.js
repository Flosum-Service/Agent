const a68_0x2a3cf7=a68_0x49f4;(function(_0x69482a,_0x16cfbd){const _0x5779d1=a68_0x49f4,_0x305463=_0x69482a();while(!![]){try{const _0x2adb87=-parseInt(_0x5779d1(0xac))/0x1*(parseInt(_0x5779d1(0xa5))/0x2)+parseInt(_0x5779d1(0xc5))/0x3+parseInt(_0x5779d1(0x9d))/0x4+parseInt(_0x5779d1(0xc3))/0x5+-parseInt(_0x5779d1(0xcc))/0x6+parseInt(_0x5779d1(0xb0))/0x7*(-parseInt(_0x5779d1(0xe1))/0x8)+-parseInt(_0x5779d1(0xaa))/0x9;if(_0x2adb87===_0x16cfbd)break;else _0x305463['push'](_0x305463['shift']());}catch(_0x3fbdfb){_0x305463['push'](_0x305463['shift']());}}}(a68_0x2652,0x584a3));const a68_0x108bd3=(function(){let _0x2540ec=!![];return function(_0x4aced9,_0x5a9d7d){const _0xc15021=_0x2540ec?function(){const _0x5d8518=a68_0x49f4;if(_0x5a9d7d){const _0x461e43=_0x5a9d7d[_0x5d8518(0xad)](_0x4aced9,arguments);return _0x5a9d7d=null,_0x461e43;}}:function(){};return _0x2540ec=![],_0xc15021;};}()),a68_0x12309c=a68_0x108bd3(this,function(){const _0x4655ac=a68_0x49f4;return a68_0x12309c[_0x4655ac(0xe0)]()[_0x4655ac(0xb3)](_0x4655ac(0xd5))[_0x4655ac(0xe0)]()[_0x4655ac(0xc6)](a68_0x12309c)[_0x4655ac(0xb3)](_0x4655ac(0xd5));});a68_0x12309c();'use strict';var __importDefault=this&&this[a68_0x2a3cf7(0xa2)]||function(_0x7a1b75){return _0x7a1b75&&_0x7a1b75['__esModule']?_0x7a1b75:{'default':_0x7a1b75};};Object[a68_0x2a3cf7(0xa8)](exports,a68_0x2a3cf7(0xae),{'value':!![]}),exports['Job']=void 0x0;const core_1=require(a68_0x2a3cf7(0xd2)),salesforce_1=require(a68_0x2a3cf7(0xcd)),auth_manager_1=require(a68_0x2a3cf7(0xda)),constants_1=require(a68_0x2a3cf7(0xb4)),utils_1=require('@flosum/utils'),minimist_1=__importDefault(require(a68_0x2a3cf7(0xaf))),path_1=__importDefault(require(a68_0x2a3cf7(0xb2))),state_manger_1=__importDefault(require(a68_0x2a3cf7(0xbb))),logger_1=__importDefault(require('./classes/logger')),retrieve_cartridges_1=__importDefault(require('./classes/retrieve-cartridges')),deploy_cartridges_1=__importDefault(require('./classes/deploy-cartridges')),run_script_1=__importDefault(require(a68_0x2a3cf7(0xce))),manifest_manager_1=__importDefault(require(a68_0x2a3cf7(0xba))),salesforce_auth_1=__importDefault(require('./classes/salesforce-auth'));function a68_0x49f4(_0x15b563,_0x48f812){const _0x27c3c4=a68_0x2652();return a68_0x49f4=function(_0x12309c,_0x108bd3){_0x12309c=_0x12309c-0x9d;let _0x265204=_0x27c3c4[_0x12309c];return _0x265204;},a68_0x49f4(_0x15b563,_0x48f812);}class Job{constructor(){const _0x35c43f=a68_0x2a3cf7,{jobId:_0x5ca1ca,jobStorePath:_0x2f9135}=(0x0,minimist_1[_0x35c43f(0xcb)])(process[_0x35c43f(0xd0)][_0x35c43f(0xa7)](0x2));this['jobPath']=_0x2f9135,this[_0x35c43f(0xc8)]=_0x5ca1ca;}async[a68_0x2a3cf7(0xa9)](){const _0x16e23e=a68_0x2a3cf7;this[_0x16e23e(0xd7)]=new core_1[(_0x16e23e(0xa3))](this[_0x16e23e(0xc8)]),this[_0x16e23e(0xdf)]=new logger_1[(_0x16e23e(0xcb))](this[_0x16e23e(0xc8)],this['systemLogger']);const _0x2bae86=await new state_manger_1[(_0x16e23e(0xcb))](this['jobPath'])[_0x16e23e(0xa1)](),_0x485a02=path_1[_0x16e23e(0xcb)][_0x16e23e(0xdc)](this[_0x16e23e(0xca)],_0x16e23e(0xbc),constants_1['FLOSUM_SCRIPT_PATH']);await this[_0x16e23e(0xdf)][_0x16e23e(0xdd)](_0x16e23e(0xbf));try{await _0x2bae86[_0x16e23e(0xab)](),this['axiosInstance']=await this[_0x16e23e(0xcf)](),this[_0x16e23e(0xb7)]=this[_0x16e23e(0xd6)](),await this['getManifestParameters'](),await this[_0x16e23e(0xb6)](),await utils_1[_0x16e23e(0x9f)][_0x16e23e(0xb1)](_0x485a02)?await this[_0x16e23e(0xc0)]():await this[_0x16e23e(0xb8)](),await _0x2bae86[_0x16e23e(0xd4)](),await this[_0x16e23e(0xdf)][_0x16e23e(0xdd)](_0x16e23e(0xbd));}catch(_0x2272c5){await _0x2bae86[_0x16e23e(0xe4)](_0x2272c5),await this['logger']['error'](_0x2272c5[_0x16e23e(0xd3)]),await this[_0x16e23e(0xdf)][_0x16e23e(0xc1)](_0x16e23e(0xb5));}}async[a68_0x2a3cf7(0xc4)](){const _0x44627a=a68_0x2a3cf7,{credentials:_0x4664ad,apiVersion:_0x2dff1b,branchId:_0x3c93db,codeVersion:_0x4c8350,isCompileCartridges:_0x4153fe,isActivateCodeVersion:_0x32dcf9,variables:_0x1772f7}=await new manifest_manager_1['default'](this['jobPath'])[_0x44627a(0xa1)]();this[_0x44627a(0xc9)]=_0x4664ad,this[_0x44627a(0xa0)]=_0x2dff1b,this[_0x44627a(0xbe)]=_0x3c93db,this['codeVersion']=_0x4c8350,this[_0x44627a(0xc2)]=_0x4153fe,this['isActivateCodeVersion']=_0x32dcf9,this[_0x44627a(0x9e)]=_0x1772f7;}async['getAxiosInstance'](){const _0x562201=a68_0x2a3cf7,_0x1ab54f=await salesforce_auth_1['default'][_0x562201(0xd1)]();return salesforce_1[_0x562201(0xdb)]['create'](new auth_manager_1[(_0x562201(0xe2))](_0x1ab54f),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async['retrieveCartridges'](){const _0x39c456=a68_0x2a3cf7;await this[_0x39c456(0xdf)]['log'](_0x39c456(0xb9)[_0x39c456(0xe3)](0x32,'=')),await new retrieve_cartridges_1['default'](this[_0x39c456(0xca)],this[_0x39c456(0xa6)],this[_0x39c456(0xa0)],this[_0x39c456(0xb7)],this['branchId'],this['variables'],this[_0x39c456(0xdf)])[_0x39c456(0xa9)]();}async[a68_0x2a3cf7(0xc0)](){const _0x41260f=a68_0x2a3cf7;await this[_0x41260f(0xdf)][_0x41260f(0xdd)]('======\x20Run\x20script\x20'[_0x41260f(0xe3)](0x32,'=')),await new run_script_1['default'](this[_0x41260f(0xca)],this[_0x41260f(0xc9)],this[_0x41260f(0xde)],this[_0x41260f(0xc2)],this[_0x41260f(0xd9)],this[_0x41260f(0xd7)],this['logger'])[_0x41260f(0xa9)]();}async[a68_0x2a3cf7(0xb8)](){const _0xbe92e1=a68_0x2a3cf7;await this[_0xbe92e1(0xdf)][_0xbe92e1(0xdd)](_0xbe92e1(0xd8)[_0xbe92e1(0xe3)](0x32,'=')),await new deploy_cartridges_1[(_0xbe92e1(0xcb))](this[_0xbe92e1(0xca)],this[_0xbe92e1(0xc9)],this[_0xbe92e1(0xde)],this[_0xbe92e1(0xd9)],this[_0xbe92e1(0xdf)])[_0xbe92e1(0xa9)]();}['getFlosumNamespace'](){const _0x13ea76=a68_0x2a3cf7;var _0x16ea69,_0x1ae64a;return((_0x1ae64a=(_0x16ea69=process[_0x13ea76(0xa4)])===null||_0x16ea69===void 0x0?void 0x0:_0x16ea69['IGNORE_FLOSUM_NAMESPACE'])===null||_0x1ae64a===void 0x0?void 0x0:_0x1ae64a['toLowerCase']())==='true'?'':constants_1['FLOSUM_NAMESPACE'];}}exports['Job']=Job,new Job()[a68_0x2a3cf7(0xa9)]()['then'](()=>process[a68_0x2a3cf7(0xc7)](0x0))['catch'](()=>process['exit'](0x1));function a68_0x2652(){const _0x9e20d7=['jobId','credentials','jobPath','default','527016VrxTAj','@flosum/salesforce','./classes/run-script','getAxiosInstance','argv','getAuthDetails','../../../core','message','setCompleted','(((.+)+)+)+$','getFlosumNamespace','systemLogger','======\x20Deploy\x20cartridges\x20','isActivateCodeVersion','../../shared/managers/auth.manager','AxiosInstanceUtils','join','log','codeVersion','logger','toString','131080JYeFuz','AuthManager','padEnd','setError','359308WGLwas','variables','FsUtils','apiVersion','init','__importDefault','Logger','env','3642jmePXD','axiosInstance','slice','defineProperty','execute','4567923ALkobP','setInProgress','11gTcZhX','apply','__esModule','minimist','56WxQQBx','isExistsPath','path','search','../constants','Job\x20has\x20been\x20failed.','retrieveCartridges','namespace','deployCartridges','======\x20Retrieve\x20cartridges\x20','./classes/manifest-manager','../../shared/managers/state-manger','cartridges','Job\x20has\x20been\x20completed.','branchId','Job\x20has\x20been\x20started.','runScript','error','isCompileCartridges','1714720cHuMjp','getManifestParameters','2026074xwxYvg','constructor','exit'];a68_0x2652=function(){return _0x9e20d7;};return a68_0x2652();}