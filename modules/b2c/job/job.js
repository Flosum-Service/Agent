const a68_0x4308fe=a68_0x52d9;(function(_0x38a6e6,_0x39b53e){const _0x4f7ca8=a68_0x52d9,_0x44d0a4=_0x38a6e6();while(!![]){try{const _0x585a58=-parseInt(_0x4f7ca8(0x8b))/0x1*(parseInt(_0x4f7ca8(0x7b))/0x2)+-parseInt(_0x4f7ca8(0xa9))/0x3+parseInt(_0x4f7ca8(0xa5))/0x4+parseInt(_0x4f7ca8(0x83))/0x5*(-parseInt(_0x4f7ca8(0xb4))/0x6)+parseInt(_0x4f7ca8(0xae))/0x7*(-parseInt(_0x4f7ca8(0x7d))/0x8)+-parseInt(_0x4f7ca8(0xbb))/0x9+parseInt(_0x4f7ca8(0xac))/0xa;if(_0x585a58===_0x39b53e)break;else _0x44d0a4['push'](_0x44d0a4['shift']());}catch(_0x43a699){_0x44d0a4['push'](_0x44d0a4['shift']());}}}(a68_0x4f94,0x7a641));const a68_0x2766ba=(function(){let _0x20589f=!![];return function(_0x1c1c63,_0xa1a37b){const _0x10b25e=_0x20589f?function(){const _0x3fdf44=a68_0x52d9;if(_0xa1a37b){const _0x289d0c=_0xa1a37b[_0x3fdf44(0x80)](_0x1c1c63,arguments);return _0xa1a37b=null,_0x289d0c;}}:function(){};return _0x20589f=![],_0x10b25e;};}()),a68_0xe742f0=a68_0x2766ba(this,function(){const _0x14330e=a68_0x52d9;return a68_0xe742f0[_0x14330e(0x88)]()[_0x14330e(0xa6)](_0x14330e(0xba))[_0x14330e(0x88)]()[_0x14330e(0x98)](a68_0xe742f0)[_0x14330e(0xa6)]('(((.+)+)+)+$');});function a68_0x4f94(){const _0x573aa6=['Job\x20has\x20been\x20failed.','../../shared/managers/auth.manager','./classes/run-script','retrieveCartridges','log','create','true','getManifestParameters','setInProgress','100jbuXci','defineProperty','4800360kgWpvT','catch','AuthManager','apply','isCompileCartridges','AxiosInstanceUtils','12515XiuePc','FLOSUM_SCRIPT_PATH','getAxiosInstance','exit','runScript','toString','logger','apiVersion','8nUpRzw','deployCartridges','slice','getAuthDetails','credentials','======\x20Retrieve\x20cartridges\x20','argv','@flosum/salesforce','jobPath','namespace','error','codeVersion','execute','constructor','jobId','setError','Logger','./classes/salesforce-auth','path','======\x20Deploy\x20cartridges\x20','branchId','init','Job','../constants','padEnd','../../../core','2415180SYTkDh','search','minimist','../../shared/managers/state-manger','2870103iSCmgr','./classes/deploy-cartridges','default','26772260ecklZC','Job\x20has\x20been\x20started.','7QMmKKO','isActivateCodeVersion','setCompleted','isExistsPath','systemLogger','getFlosumNamespace','2088dDbiXB','variables','toLowerCase','__esModule','axiosInstance','__importDefault','(((.+)+)+)+$','3163662WFHsOR'];a68_0x4f94=function(){return _0x573aa6;};return a68_0x4f94();}a68_0xe742f0();'use strict';var __importDefault=this&&this[a68_0x4308fe(0xb9)]||function(_0x3c776b){const _0x5118ae=a68_0x4308fe;return _0x3c776b&&_0x3c776b[_0x5118ae(0xb7)]?_0x3c776b:{'default':_0x3c776b};};Object[a68_0x4308fe(0x7c)](exports,'__esModule',{'value':!![]}),exports['Job']=void 0x0;const core_1=require(a68_0x4308fe(0xa4)),salesforce_1=require(a68_0x4308fe(0x92)),auth_manager_1=require(a68_0x4308fe(0x73)),constants_1=require(a68_0x4308fe(0xa2)),utils_1=require('@flosum/utils'),minimist_1=__importDefault(require(a68_0x4308fe(0xa7))),path_1=__importDefault(require(a68_0x4308fe(0x9d))),state_manger_1=__importDefault(require(a68_0x4308fe(0xa8))),logger_1=__importDefault(require('./classes/logger')),retrieve_cartridges_1=__importDefault(require('./classes/retrieve-cartridges')),deploy_cartridges_1=__importDefault(require(a68_0x4308fe(0xaa))),run_script_1=__importDefault(require(a68_0x4308fe(0x74))),manifest_manager_1=__importDefault(require('./classes/manifest-manager')),salesforce_auth_1=__importDefault(require(a68_0x4308fe(0x9c)));function a68_0x52d9(_0x2586d2,_0x1be237){const _0x285208=a68_0x4f94();return a68_0x52d9=function(_0xe742f0,_0x2766ba){_0xe742f0=_0xe742f0-0x73;let _0x4f94af=_0x285208[_0xe742f0];return _0x4f94af;},a68_0x52d9(_0x2586d2,_0x1be237);}class Job{constructor(){const _0x495c69=a68_0x4308fe,{jobId:_0x167f6c,jobStorePath:_0xaccaa2}=(0x0,minimist_1[_0x495c69(0xab)])(process[_0x495c69(0x91)][_0x495c69(0x8d)](0x2));this['jobPath']=_0xaccaa2,this['jobId']=_0x167f6c;}async['execute'](){const _0x4cd9dd=a68_0x4308fe;this[_0x4cd9dd(0xb2)]=new core_1[(_0x4cd9dd(0x9b))](this[_0x4cd9dd(0x99)]),this[_0x4cd9dd(0x89)]=new logger_1[(_0x4cd9dd(0xab))](this[_0x4cd9dd(0x99)],this[_0x4cd9dd(0xb2)]);const _0x4c76f6=await new state_manger_1[(_0x4cd9dd(0xab))](this[_0x4cd9dd(0x93)])[_0x4cd9dd(0xa0)](),_0x5ee222=path_1[_0x4cd9dd(0xab)]['join'](this[_0x4cd9dd(0x93)],'cartridges',constants_1[_0x4cd9dd(0x84)]);await this['logger'][_0x4cd9dd(0x76)](_0x4cd9dd(0xad));try{await _0x4c76f6[_0x4cd9dd(0x7a)](),this[_0x4cd9dd(0xb8)]=await this[_0x4cd9dd(0x85)](),this[_0x4cd9dd(0x94)]=this[_0x4cd9dd(0xb3)](),await this[_0x4cd9dd(0x79)](),await this['retrieveCartridges'](),await utils_1['FsUtils'][_0x4cd9dd(0xb1)](_0x5ee222)?await this[_0x4cd9dd(0x87)]():await this[_0x4cd9dd(0x8c)](),await _0x4c76f6[_0x4cd9dd(0xb0)](),await this['logger'][_0x4cd9dd(0x76)]('Job\x20has\x20been\x20completed.');}catch(_0x5e7fdb){await _0x4c76f6[_0x4cd9dd(0x9a)](_0x5e7fdb),await this['logger'][_0x4cd9dd(0x95)](_0x5e7fdb['message']),await this['logger']['error'](_0x4cd9dd(0xbc));}}async[a68_0x4308fe(0x79)](){const _0x45bf71=a68_0x4308fe,{credentials:_0x1ac62a,apiVersion:_0xbc65d0,branchId:_0x2186cb,codeVersion:_0x1f4880,isCompileCartridges:_0x406caa,isActivateCodeVersion:_0xef138f,variables:_0x2d2447}=await new manifest_manager_1[(_0x45bf71(0xab))](this['jobPath'])['init']();this[_0x45bf71(0x8f)]=_0x1ac62a,this[_0x45bf71(0x8a)]=_0xbc65d0,this[_0x45bf71(0x9f)]=_0x2186cb,this[_0x45bf71(0x96)]=_0x1f4880,this[_0x45bf71(0x81)]=_0x406caa,this[_0x45bf71(0xaf)]=_0xef138f,this[_0x45bf71(0xb5)]=_0x2d2447;}async['getAxiosInstance'](){const _0x3f51da=a68_0x4308fe,_0x295d99=await salesforce_auth_1[_0x3f51da(0xab)][_0x3f51da(0x8e)]();return salesforce_1[_0x3f51da(0x82)][_0x3f51da(0x77)](new auth_manager_1[(_0x3f51da(0x7f))](_0x295d99),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a68_0x4308fe(0x75)](){const _0x48fabb=a68_0x4308fe;await this[_0x48fabb(0x89)][_0x48fabb(0x76)](_0x48fabb(0x90)[_0x48fabb(0xa3)](0x32,'=')),await new retrieve_cartridges_1[(_0x48fabb(0xab))](this[_0x48fabb(0x93)],this[_0x48fabb(0xb8)],this['apiVersion'],this['namespace'],this[_0x48fabb(0x9f)],this[_0x48fabb(0xb5)],this[_0x48fabb(0x89)])['execute']();}async['runScript'](){const _0x4bc6dc=a68_0x4308fe;await this[_0x4bc6dc(0x89)][_0x4bc6dc(0x76)]('======\x20Run\x20script\x20'[_0x4bc6dc(0xa3)](0x32,'=')),await new run_script_1[(_0x4bc6dc(0xab))](this[_0x4bc6dc(0x93)],this[_0x4bc6dc(0x8f)],this[_0x4bc6dc(0x96)],this[_0x4bc6dc(0x81)],this[_0x4bc6dc(0xaf)],this[_0x4bc6dc(0xb2)],this['logger'])[_0x4bc6dc(0x97)]();}async[a68_0x4308fe(0x8c)](){const _0x4dbcd2=a68_0x4308fe;await this[_0x4dbcd2(0x89)][_0x4dbcd2(0x76)](_0x4dbcd2(0x9e)[_0x4dbcd2(0xa3)](0x32,'=')),await new deploy_cartridges_1[(_0x4dbcd2(0xab))](this[_0x4dbcd2(0x93)],this[_0x4dbcd2(0x8f)],this[_0x4dbcd2(0x96)],this[_0x4dbcd2(0xaf)],this[_0x4dbcd2(0x89)])[_0x4dbcd2(0x97)]();}[a68_0x4308fe(0xb3)](){const _0x1f27b5=a68_0x4308fe;var _0x2523dd,_0x11bc45;return((_0x11bc45=(_0x2523dd=process['env'])===null||_0x2523dd===void 0x0?void 0x0:_0x2523dd['IGNORE_FLOSUM_NAMESPACE'])===null||_0x11bc45===void 0x0?void 0x0:_0x11bc45[_0x1f27b5(0xb6)]())===_0x1f27b5(0x78)?'':constants_1['FLOSUM_NAMESPACE'];}}exports[a68_0x4308fe(0xa1)]=Job,new Job()['execute']()['then'](()=>process[a68_0x4308fe(0x86)](0x0))[a68_0x4308fe(0x7e)](()=>process[a68_0x4308fe(0x86)](0x1));