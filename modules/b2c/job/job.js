const a69_0x433e8d=a69_0x1476;(function(_0x4a1a2c,_0x5bb4f9){const _0x90419d=a69_0x1476,_0x22a85d=_0x4a1a2c();while(!![]){try{const _0x46e776=-parseInt(_0x90419d(0x1db))/0x1+parseInt(_0x90419d(0x201))/0x2+-parseInt(_0x90419d(0x1cd))/0x3+parseInt(_0x90419d(0x1c7))/0x4*(parseInt(_0x90419d(0x1d5))/0x5)+-parseInt(_0x90419d(0x1fa))/0x6+parseInt(_0x90419d(0x1d8))/0x7+parseInt(_0x90419d(0x1c6))/0x8;if(_0x46e776===_0x5bb4f9)break;else _0x22a85d['push'](_0x22a85d['shift']());}catch(_0xb7d245){_0x22a85d['push'](_0x22a85d['shift']());}}}(a69_0x4adf,0x27dc8));const a69_0x433244=(function(){let _0x6b3b3b=!![];return function(_0x1ecf44,_0x4ef5b1){const _0x46780c=_0x6b3b3b?function(){const _0x10cd19=a69_0x1476;if(_0x4ef5b1){const _0x5750a1=_0x4ef5b1[_0x10cd19(0x20a)](_0x1ecf44,arguments);return _0x4ef5b1=null,_0x5750a1;}}:function(){};return _0x6b3b3b=![],_0x46780c;};}()),a69_0x75f941=a69_0x433244(this,function(){const _0xccc82=a69_0x1476;return a69_0x75f941[_0xccc82(0x1cc)]()[_0xccc82(0x1cf)]('(((.+)+)+)+$')[_0xccc82(0x1cc)]()['constructor'](a69_0x75f941)[_0xccc82(0x1cf)]('(((.+)+)+)+$');});function a69_0x4adf(){const _0x6fbb2a=['cartridges','9538ypxUmd','getAuthDetails','join','credentials','axiosInstance','namespace','variables','======\x20Retrieve\x20Cartridge\x20Files\x20','true','then','Job','isExistsPath','isCompileCartridges','======\x20Deploy\x20Cartridge\x20Files\x20','path','FLOSUM_SCRIPT_PATH','IGNORE_FLOSUM_NAMESPACE','systemLogger','retrieveCartridges','__esModule','../../../core','@flosum/salesforce','env','default','getManifestParameters','./classes/run-lint','minimist','exit','codeVersion','error','isActivateCodeVersion','1725372ZmTurH','init','./classes/run-script','deployCartridges','FsUtils','======\x20Run\x20Lint\x20','padEnd','313992tGIenn','catch','setInProgress','jobPath','FLOSUM_NAMESPACE','======\x20Run\x20Script\x20','logger','AuthManager','execute','apply','log','runScript','create','./classes/retrieve-cartridges','message','setCompleted','../../shared/managers/auth.manager','argv','477200VZuAjK','4gyMfJH','runLint','isLintValidate','./classes/manifest-manager','setError','toString','686106TmwfSr','jobId','search','./classes/deploy-cartridges','toLowerCase','apiVersion','getAxiosInstance','getFlosumNamespace','1177325yXDTVA','Logger','Job\x20has\x20been\x20started.','1658741ErKUOx','branchId'];a69_0x4adf=function(){return _0x6fbb2a;};return a69_0x4adf();}a69_0x75f941();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x529c1b){const _0x14cd60=a69_0x1476;return _0x529c1b&&_0x529c1b[_0x14cd60(0x1ee)]?_0x529c1b:{'default':_0x529c1b};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['Job']=void 0x0;const core_1=require(a69_0x433e8d(0x1ef)),salesforce_1=require(a69_0x433e8d(0x1f0)),auth_manager_1=require(a69_0x433e8d(0x211)),constants_1=require('../constants'),utils_1=require('@flosum/utils'),minimist_1=__importDefault(require(a69_0x433e8d(0x1f5))),path_1=__importDefault(require(a69_0x433e8d(0x1e9))),state_manger_1=__importDefault(require('../../shared/managers/state-manger')),logger_1=__importDefault(require('./classes/logger')),retrieve_cartridges_1=__importDefault(require(a69_0x433e8d(0x20e))),deploy_cartridges_1=__importDefault(require(a69_0x433e8d(0x1d0))),run_script_1=__importDefault(require(a69_0x433e8d(0x1fc))),run_lint_1=__importDefault(require(a69_0x433e8d(0x1f4))),manifest_manager_1=__importDefault(require(a69_0x433e8d(0x1ca))),salesforce_auth_1=__importDefault(require('./classes/salesforce-auth'));class Job{constructor(){const _0x36435f=a69_0x433e8d,{jobId:_0x25ec11,jobStorePath:_0x447661}=(0x0,minimist_1[_0x36435f(0x1f2)])(process[_0x36435f(0x212)]['slice'](0x2));this[_0x36435f(0x204)]=_0x447661,this[_0x36435f(0x1ce)]=_0x25ec11;}async[a69_0x433e8d(0x209)](){const _0xeb44e=a69_0x433e8d;this['systemLogger']=new core_1[(_0xeb44e(0x1d6))](this[_0xeb44e(0x1ce)]),this[_0xeb44e(0x207)]=new logger_1[(_0xeb44e(0x1f2))](this[_0xeb44e(0x1ce)],this['systemLogger']);const _0x29d406=await new state_manger_1[(_0xeb44e(0x1f2))](this[_0xeb44e(0x204)])[_0xeb44e(0x1fb)](),_0x5e77ba=path_1[_0xeb44e(0x1f2)][_0xeb44e(0x1dd)](this[_0xeb44e(0x204)],_0xeb44e(0x1da),constants_1[_0xeb44e(0x1ea)]);await this[_0xeb44e(0x207)]['log'](_0xeb44e(0x1d7));try{await _0x29d406[_0xeb44e(0x203)](),this[_0xeb44e(0x1df)]=await this[_0xeb44e(0x1d3)](),this[_0xeb44e(0x1e0)]=this[_0xeb44e(0x1d4)](),await this[_0xeb44e(0x1f3)](),await this[_0xeb44e(0x1ed)](),!this[_0xeb44e(0x1c9)]?await utils_1[_0xeb44e(0x1fe)][_0xeb44e(0x1e6)](_0x5e77ba)?await this['runScript']():await this['deployCartridges']():await this['runLint'](),await _0x29d406[_0xeb44e(0x210)](),await this[_0xeb44e(0x207)][_0xeb44e(0x20b)]('Job\x20has\x20been\x20completed.');}catch(_0x23722a){await _0x29d406[_0xeb44e(0x1cb)](_0x23722a),await this[_0xeb44e(0x207)][_0xeb44e(0x1f8)](_0x23722a[_0xeb44e(0x20f)]),await this[_0xeb44e(0x207)]['error']('Job\x20has\x20been\x20failed.');}}async[a69_0x433e8d(0x1f3)](){const _0x49a58f=a69_0x433e8d,{credentials:_0x57dd36,apiVersion:_0x3b83c6,branchId:_0x94094d,metadataLogId:_0x576dd8,codeVersion:_0x2c1527,isUseCertificate:_0x13fa64,isLintValidate:_0x5e4cb4,isCompileCartridges:_0x55a84e,isActivateCodeVersion:_0x1526bd,variables:_0x2a143e}=await new manifest_manager_1[(_0x49a58f(0x1f2))](this[_0x49a58f(0x204)])[_0x49a58f(0x1fb)]();this[_0x49a58f(0x1de)]=_0x57dd36,this[_0x49a58f(0x1d2)]=_0x3b83c6,this[_0x49a58f(0x1d9)]=_0x94094d,this['metadataLogId']=_0x576dd8,this[_0x49a58f(0x1f7)]=_0x2c1527,this['isUseCertificate']=_0x13fa64,this['isLintValidate']=_0x5e4cb4,this[_0x49a58f(0x1e7)]=_0x55a84e,this[_0x49a58f(0x1f9)]=_0x1526bd,this[_0x49a58f(0x1e1)]=_0x2a143e;}async['getAxiosInstance'](){const _0x5b1569=a69_0x433e8d,_0x526b71=await salesforce_auth_1['default'][_0x5b1569(0x1dc)]();return salesforce_1['AxiosInstanceUtils'][_0x5b1569(0x20d)](new auth_manager_1[(_0x5b1569(0x208))](_0x526b71),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a69_0x433e8d(0x1ed)](){const _0x5b0398=a69_0x433e8d;await this[_0x5b0398(0x207)][_0x5b0398(0x20b)](_0x5b0398(0x1e2)[_0x5b0398(0x200)](0x32,'=')),await new retrieve_cartridges_1[(_0x5b0398(0x1f2))](this[_0x5b0398(0x204)],this[_0x5b0398(0x1df)],this['apiVersion'],this[_0x5b0398(0x1e0)],this['branchId'],this['metadataLogId'],this[_0x5b0398(0x207)],this[_0x5b0398(0x1ec)],this[_0x5b0398(0x1e1)])[_0x5b0398(0x209)]();}async[a69_0x433e8d(0x20c)](){const _0x30d703=a69_0x433e8d;await this[_0x30d703(0x207)]['log'](_0x30d703(0x206)[_0x30d703(0x200)](0x32,'=')),await new run_script_1[(_0x30d703(0x1f2))](this[_0x30d703(0x204)],this[_0x30d703(0x1de)],this[_0x30d703(0x1f7)],this['isUseCertificate'],this[_0x30d703(0x1e7)],this[_0x30d703(0x1f9)],this[_0x30d703(0x1ec)],this['logger'])[_0x30d703(0x209)]();}async[a69_0x433e8d(0x1c8)](){const _0x126c9f=a69_0x433e8d;await this['logger'][_0x126c9f(0x20b)](_0x126c9f(0x1ff)[_0x126c9f(0x200)](0x32,'=')),await new run_lint_1[(_0x126c9f(0x1f2))](this['jobPath'],this['systemLogger'],this[_0x126c9f(0x207)])[_0x126c9f(0x209)]();}async[a69_0x433e8d(0x1fd)](){const _0x54b4c9=a69_0x433e8d;await this['logger'][_0x54b4c9(0x20b)](_0x54b4c9(0x1e8)[_0x54b4c9(0x200)](0x32,'=')),await new deploy_cartridges_1['default'](this['jobPath'],this[_0x54b4c9(0x1de)],this[_0x54b4c9(0x1f7)],this[_0x54b4c9(0x1f9)],this[_0x54b4c9(0x207)])[_0x54b4c9(0x209)]();}['getFlosumNamespace'](){const _0x3dbb3c=a69_0x433e8d;var _0x3c6fac,_0x3e2964;return((_0x3e2964=(_0x3c6fac=process[_0x3dbb3c(0x1f1)])===null||_0x3c6fac===void 0x0?void 0x0:_0x3c6fac[_0x3dbb3c(0x1eb)])===null||_0x3e2964===void 0x0?void 0x0:_0x3e2964[_0x3dbb3c(0x1d1)]())===_0x3dbb3c(0x1e3)?'':constants_1[_0x3dbb3c(0x205)];}}function a69_0x1476(_0x2e82e7,_0x74b5b5){const _0x5b901a=a69_0x4adf();return a69_0x1476=function(_0x75f941,_0x433244){_0x75f941=_0x75f941-0x1c6;let _0x4adff1=_0x5b901a[_0x75f941];return _0x4adff1;},a69_0x1476(_0x2e82e7,_0x74b5b5);}exports[a69_0x433e8d(0x1e5)]=Job,new Job()[a69_0x433e8d(0x209)]()[a69_0x433e8d(0x1e4)](()=>process['exit'](0x0))[a69_0x433e8d(0x202)](()=>process[a69_0x433e8d(0x1f6)](0x1));