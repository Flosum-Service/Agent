const a68_0x38fac8=a68_0x5074;(function(_0x3cbc58,_0x3e7922){const _0x266d4e=a68_0x5074,_0xe5bfdf=_0x3cbc58();while(!![]){try{const _0x48ddce=-parseInt(_0x266d4e(0x87))/0x1+-parseInt(_0x266d4e(0x81))/0x2+-parseInt(_0x266d4e(0x7c))/0x3+parseInt(_0x266d4e(0x9c))/0x4+-parseInt(_0x266d4e(0xa6))/0x5+parseInt(_0x266d4e(0x8c))/0x6+parseInt(_0x266d4e(0x95))/0x7*(parseInt(_0x266d4e(0x91))/0x8);if(_0x48ddce===_0x3e7922)break;else _0xe5bfdf['push'](_0xe5bfdf['shift']());}catch(_0x280566){_0xe5bfdf['push'](_0xe5bfdf['shift']());}}}(a68_0x328a,0x657b7));const a68_0x141b8f=(function(){let _0x1d302a=!![];return function(_0x3a0523,_0x2e3be9){const _0x5ba89f=_0x1d302a?function(){const _0x584dcc=a68_0x5074;if(_0x2e3be9){const _0x40a29c=_0x2e3be9[_0x584dcc(0x94)](_0x3a0523,arguments);return _0x2e3be9=null,_0x40a29c;}}:function(){};return _0x1d302a=![],_0x5ba89f;};}()),a68_0x2ca6d7=a68_0x141b8f(this,function(){const _0x2bdb49=a68_0x5074;return a68_0x2ca6d7[_0x2bdb49(0x78)]()[_0x2bdb49(0xad)](_0x2bdb49(0x9b))[_0x2bdb49(0x78)]()['constructor'](a68_0x2ca6d7)[_0x2bdb49(0xad)](_0x2bdb49(0x9b));});a68_0x2ca6d7();'use strict';var __importDefault=this&&this[a68_0x38fac8(0xae)]||function(_0x303e8e){const _0x1e83a0=a68_0x38fac8;return _0x303e8e&&_0x303e8e[_0x1e83a0(0xa4)]?_0x303e8e:{'default':_0x303e8e};};function a68_0x328a(){const _0x8b6669=['init','jobPath','log','cartridges','Logger','default','@flosum/utils','getManifestParameters','getFlosumNamespace','FLOSUM_SCRIPT_PATH','path','join','../../../core','codeVersion','../../shared/managers/state-manger','getAxiosInstance','toString','defineProperty','argv','./classes/logger','1821069gXiTyQ','branchId','../../shared/managers/auth.manager','FLOSUM_NAMESPACE','retrieveCartridges','483810NGgpWk','then','minimist','isActivateCodeVersion','apiVersion','getAuthDetails','335725WKXurw','deployCartridges','./classes/salesforce-auth','namespace','./classes/retrieve-cartridges','2570712ZjrQnd','error','======\x20Retrieve\x20cartridges\x20','../constants','======\x20Run\x20script\x20','5468128hjsUyy','setCompleted','slice','apply','14iMDOPm','create','@flosum/salesforce','AxiosInstanceUtils','setError','exit','(((.+)+)+)+$','1993892zoyrGX','padEnd','logger','./classes/run-script','jobId','Job\x20has\x20been\x20completed.','Job\x20has\x20been\x20started.','variables','__esModule','./classes/deploy-cartridges','3468165qEWKVb','FsUtils','execute','isExistsPath','axiosInstance','isCompileCartridges','Job','search','__importDefault'];a68_0x328a=function(){return _0x8b6669;};return a68_0x328a();}Object[a68_0x38fac8(0x79)](exports,'__esModule',{'value':!![]}),exports[a68_0x38fac8(0xac)]=void 0x0;const core_1=require(a68_0x38fac8(0x74)),salesforce_1=require(a68_0x38fac8(0x97)),auth_manager_1=require(a68_0x38fac8(0x7e)),constants_1=require(a68_0x38fac8(0x8f)),utils_1=require(a68_0x38fac8(0xb5)),minimist_1=__importDefault(require(a68_0x38fac8(0x83))),path_1=__importDefault(require(a68_0x38fac8(0x72))),state_manger_1=__importDefault(require(a68_0x38fac8(0x76))),logger_1=__importDefault(require(a68_0x38fac8(0x7b))),retrieve_cartridges_1=__importDefault(require(a68_0x38fac8(0x8b))),deploy_cartridges_1=__importDefault(require(a68_0x38fac8(0xa5))),run_script_1=__importDefault(require(a68_0x38fac8(0x9f))),manifest_manager_1=__importDefault(require('./classes/manifest-manager')),salesforce_auth_1=__importDefault(require(a68_0x38fac8(0x89)));class Job{constructor(){const _0x597963=a68_0x38fac8,{jobId:_0x2b2767,jobStorePath:_0x4bb007}=(0x0,minimist_1[_0x597963(0xb4)])(process[_0x597963(0x7a)][_0x597963(0x93)](0x2));this[_0x597963(0xb0)]=_0x4bb007,this['jobId']=_0x2b2767;}async['execute'](){const _0x16aada=a68_0x38fac8;this['systemLogger']=new core_1[(_0x16aada(0xb3))](this[_0x16aada(0xa0)]),this['logger']=new logger_1[(_0x16aada(0xb4))](this['jobId'],this['systemLogger']);const _0xa9ebbd=await new state_manger_1[(_0x16aada(0xb4))](this[_0x16aada(0xb0)])[_0x16aada(0xaf)](),_0x293506=path_1[_0x16aada(0xb4)][_0x16aada(0x73)](this['jobPath'],_0x16aada(0xb2),constants_1[_0x16aada(0x71)]);await this['logger'][_0x16aada(0xb1)](_0x16aada(0xa2));try{await _0xa9ebbd['setInProgress'](),this[_0x16aada(0xaa)]=await this[_0x16aada(0x77)](),this[_0x16aada(0x8a)]=this[_0x16aada(0x70)](),await this[_0x16aada(0xb6)](),await this[_0x16aada(0x80)](),await utils_1[_0x16aada(0xa7)][_0x16aada(0xa9)](_0x293506)?await this['runScript']():await this['deployCartridges'](),await _0xa9ebbd[_0x16aada(0x92)](),await this[_0x16aada(0x9e)][_0x16aada(0xb1)](_0x16aada(0xa1));}catch(_0x588de7){await _0xa9ebbd[_0x16aada(0x99)](_0x588de7),await this['logger'][_0x16aada(0x8d)](_0x588de7['message']),await this['logger'][_0x16aada(0x8d)]('Job\x20has\x20been\x20failed.');}}async[a68_0x38fac8(0xb6)](){const _0x585aa9=a68_0x38fac8,{credentials:_0xdb4e9f,apiVersion:_0x96bb49,branchId:_0x180158,codeVersion:_0x124756,isCompileCartridges:_0x454597,isActivateCodeVersion:_0x2d08e2,variables:_0x2f1d83}=await new manifest_manager_1[(_0x585aa9(0xb4))](this[_0x585aa9(0xb0)])[_0x585aa9(0xaf)]();this['credentials']=_0xdb4e9f,this[_0x585aa9(0x85)]=_0x96bb49,this[_0x585aa9(0x7d)]=_0x180158,this[_0x585aa9(0x75)]=_0x124756,this[_0x585aa9(0xab)]=_0x454597,this[_0x585aa9(0x84)]=_0x2d08e2,this[_0x585aa9(0xa3)]=_0x2f1d83;}async[a68_0x38fac8(0x77)](){const _0x4da9c6=a68_0x38fac8,_0x500983=await salesforce_auth_1[_0x4da9c6(0xb4)][_0x4da9c6(0x86)]();return salesforce_1[_0x4da9c6(0x98)][_0x4da9c6(0x96)](new auth_manager_1['AuthManager'](_0x500983),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a68_0x38fac8(0x80)](){const _0x335349=a68_0x38fac8;await this[_0x335349(0x9e)][_0x335349(0xb1)](_0x335349(0x8e)['padEnd'](0x32,'=')),await new retrieve_cartridges_1[(_0x335349(0xb4))](this[_0x335349(0xb0)],this['axiosInstance'],this['apiVersion'],this[_0x335349(0x8a)],this[_0x335349(0x7d)],this[_0x335349(0xa3)],this[_0x335349(0x9e)])[_0x335349(0xa8)]();}async['runScript'](){const _0x312045=a68_0x38fac8;await this[_0x312045(0x9e)]['log'](_0x312045(0x90)['padEnd'](0x32,'=')),await new run_script_1[(_0x312045(0xb4))](this[_0x312045(0xb0)],this['credentials'],this[_0x312045(0x75)],this['isCompileCartridges'],this[_0x312045(0x84)],this['systemLogger'],this[_0x312045(0x9e)])[_0x312045(0xa8)]();}async[a68_0x38fac8(0x88)](){const _0x5c1e20=a68_0x38fac8;await this[_0x5c1e20(0x9e)][_0x5c1e20(0xb1)]('======\x20Deploy\x20cartridges\x20'[_0x5c1e20(0x9d)](0x32,'=')),await new deploy_cartridges_1[(_0x5c1e20(0xb4))](this[_0x5c1e20(0xb0)],this['credentials'],this[_0x5c1e20(0x75)],this[_0x5c1e20(0x84)],this[_0x5c1e20(0x9e)])[_0x5c1e20(0xa8)]();}['getFlosumNamespace'](){const _0x43d948=a68_0x38fac8;var _0x32eb6d,_0x33c337;return((_0x33c337=(_0x32eb6d=process['env'])===null||_0x32eb6d===void 0x0?void 0x0:_0x32eb6d['IGNORE_FLOSUM_NAMESPACE'])===null||_0x33c337===void 0x0?void 0x0:_0x33c337['toLowerCase']())==='true'?'':constants_1[_0x43d948(0x7f)];}}function a68_0x5074(_0x3f244b,_0x413ac4){const _0x6774e4=a68_0x328a();return a68_0x5074=function(_0x2ca6d7,_0x141b8f){_0x2ca6d7=_0x2ca6d7-0x70;let _0x328ad4=_0x6774e4[_0x2ca6d7];return _0x328ad4;},a68_0x5074(_0x3f244b,_0x413ac4);}exports[a68_0x38fac8(0xac)]=Job,new Job()[a68_0x38fac8(0xa8)]()[a68_0x38fac8(0x82)](()=>process[a68_0x38fac8(0x9a)](0x0))['catch'](()=>process[a68_0x38fac8(0x9a)](0x1));