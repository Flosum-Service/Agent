function a68_0x47a8(){const _0x1d7e23=['9539880HXplWk','axiosInstance','B2C\x20job\x20has\x20been\x20completed.','default','../constants','env','log','variables','jobId','231XtcEvd','__importDefault','(((.+)+)+)+$','codeVersion','path','setCompleted','getAuthDetails','search','defineProperty','join','Job','constructor','branchId','./classes/salesforce-auth','padEnd','======\x20Run\x20script\x20','activateCodeVersion','IGNORE_FLOSUM_NAMESPACE','setInProgress','cartridges','apiVersion','isExistsPath','../../shared/managers/auth.manager','true','catch','======\x20Retrieve\x20cartridges\x20','1720401DxFLIE','credentials','getManifestParameters','namespace','setError','isCompileCartridges','AxiosInstanceUtils','FLOSUM_NAMESPACE','logger','isActivateCodeVersion','244288MHDUHp','retrieveCartridges','execute','jobPath','./classes/manifest-manager','@flosum/salesforce','message','1054270uBvXYR','deployCartridges','2335424ArjqjT','./classes/deploy-cartridges','init','create','5199025fYDBrq','======\x20Deploy\x20cartridges\x20','error','getFlosumNamespace','786976klsZsu','apply','FsUtils','getAxiosInstance','toString','runScript','exit','B2C\x20job\x20has\x20been\x20started.','../../shared/managers/state-manger'];a68_0x47a8=function(){return _0x1d7e23;};return a68_0x47a8();}const a68_0x24fc53=a68_0x37a9;(function(_0x306cbb,_0x15131f){const _0x1ad9ee=a68_0x37a9,_0x4a6981=_0x306cbb();while(!![]){try{const _0x27975b=-parseInt(_0x1ad9ee(0x200))/0x1+parseInt(_0x1ad9ee(0x207))/0x2+parseInt(_0x1ad9ee(0x1f6))/0x3+parseInt(_0x1ad9ee(0x209))/0x4+parseInt(_0x1ad9ee(0x20d))/0x5+parseInt(_0x1ad9ee(0x21a))/0x6+-parseInt(_0x1ad9ee(0x223))/0x7*(parseInt(_0x1ad9ee(0x211))/0x8);if(_0x27975b===_0x15131f)break;else _0x4a6981['push'](_0x4a6981['shift']());}catch(_0x25ba8e){_0x4a6981['push'](_0x4a6981['shift']());}}}(a68_0x47a8,0xc917f));function a68_0x37a9(_0x68deee,_0x23995e){const _0x34d1c7=a68_0x47a8();return a68_0x37a9=function(_0x2f44c3,_0x361645){_0x2f44c3=_0x2f44c3-0x1dd;let _0x47a87b=_0x34d1c7[_0x2f44c3];return _0x47a87b;},a68_0x37a9(_0x68deee,_0x23995e);}const a68_0x361645=(function(){let _0x4a2048=!![];return function(_0x4db13e,_0xfa7d10){const _0x6a955d=_0x4a2048?function(){const _0x38a0bc=a68_0x37a9;if(_0xfa7d10){const _0x4f78b5=_0xfa7d10[_0x38a0bc(0x212)](_0x4db13e,arguments);return _0xfa7d10=null,_0x4f78b5;}}:function(){};return _0x4a2048=![],_0x6a955d;};}()),a68_0x2f44c3=a68_0x361645(this,function(){const _0x3eb083=a68_0x37a9;return a68_0x2f44c3[_0x3eb083(0x215)]()[_0x3eb083(0x1e3)]('(((.+)+)+)+$')[_0x3eb083(0x215)]()[_0x3eb083(0x1e7)](a68_0x2f44c3)[_0x3eb083(0x1e3)](_0x3eb083(0x1de));});a68_0x2f44c3();'use strict';var __importDefault=this&&this[a68_0x24fc53(0x1dd)]||function(_0x53dfd9){return _0x53dfd9&&_0x53dfd9['__esModule']?_0x53dfd9:{'default':_0x53dfd9};};Object[a68_0x24fc53(0x1e4)](exports,'__esModule',{'value':!![]}),exports['Job']=void 0x0;const core_1=require('../../../core'),salesforce_1=require(a68_0x24fc53(0x205)),auth_manager_1=require(a68_0x24fc53(0x1f2)),constants_1=require(a68_0x24fc53(0x21e)),utils_1=require('@flosum/utils'),minimist_1=__importDefault(require('minimist')),path_1=__importDefault(require(a68_0x24fc53(0x1e0))),state_manger_1=__importDefault(require(a68_0x24fc53(0x219))),logger_1=__importDefault(require('./classes/logger')),retrieve_cartridges_1=__importDefault(require('./classes/retrieve-cartridges')),deploy_cartridges_1=__importDefault(require(a68_0x24fc53(0x20a))),run_script_1=__importDefault(require('./classes/run-script')),manifest_manager_1=__importDefault(require(a68_0x24fc53(0x204))),salesforce_auth_1=__importDefault(require(a68_0x24fc53(0x1e9)));class Job{constructor(){const _0x11f343=a68_0x24fc53,{jobId:_0x2b0df5,jobStorePath:_0x3ddece}=(0x0,minimist_1[_0x11f343(0x21d)])(process['argv']['slice'](0x2));this[_0x11f343(0x203)]=_0x3ddece,this['jobId']=_0x2b0df5;}async[a68_0x24fc53(0x202)](){const _0x4b1e72=a68_0x24fc53,_0x294d0e=new core_1['Logger'](this[_0x4b1e72(0x222)]);this['logger']=new logger_1[(_0x4b1e72(0x21d))](this[_0x4b1e72(0x222)],_0x294d0e);const _0x12358a=await new state_manger_1[(_0x4b1e72(0x21d))](this[_0x4b1e72(0x203)])[_0x4b1e72(0x20b)](),_0x5e74d4=path_1['default'][_0x4b1e72(0x1e5)](this['jobPath'],_0x4b1e72(0x1ef),constants_1['FLOSUM_SCRIPT_PATH']);await this[_0x4b1e72(0x1fe)][_0x4b1e72(0x220)](_0x4b1e72(0x218));try{await _0x12358a[_0x4b1e72(0x1ee)](),this[_0x4b1e72(0x21b)]=await this['getAxiosInstance'](),this[_0x4b1e72(0x1f9)]=this[_0x4b1e72(0x210)](),await this[_0x4b1e72(0x1f8)](),await this[_0x4b1e72(0x201)](),await utils_1[_0x4b1e72(0x213)][_0x4b1e72(0x1f1)](_0x5e74d4)?await this[_0x4b1e72(0x216)]():(await this[_0x4b1e72(0x208)](),this[_0x4b1e72(0x1ff)]&&await this[_0x4b1e72(0x1ec)]()),await _0x12358a[_0x4b1e72(0x1e1)](),await this[_0x4b1e72(0x1fe)][_0x4b1e72(0x220)](_0x4b1e72(0x21c));}catch(_0x310871){await _0x12358a[_0x4b1e72(0x1fa)](_0x310871),await this[_0x4b1e72(0x1fe)][_0x4b1e72(0x20f)](_0x310871[_0x4b1e72(0x206)]),await this['logger']['error']('B2C\x20job\x20has\x20been\x20failed.');}}async[a68_0x24fc53(0x1f8)](){const _0x444829=a68_0x24fc53,{credentials:_0x2ded8f,apiVersion:_0x239cb7,branchId:_0x594048,codeVersion:_0x4b8993,isCompileCartridges:_0x3aebb5,isActivateCodeVersion:_0x516fad,variables:_0x5eccac}=await new manifest_manager_1[(_0x444829(0x21d))](this[_0x444829(0x203)])[_0x444829(0x20b)]();this[_0x444829(0x1f7)]=_0x2ded8f,this[_0x444829(0x1f0)]=_0x239cb7,this[_0x444829(0x1e8)]=_0x594048,this[_0x444829(0x1df)]=_0x4b8993,this[_0x444829(0x1fb)]=_0x3aebb5,this[_0x444829(0x1ff)]=_0x516fad,this[_0x444829(0x221)]=_0x5eccac;}async[a68_0x24fc53(0x214)](){const _0x4a7015=a68_0x24fc53,_0x4bd5fd=await salesforce_auth_1['default'][_0x4a7015(0x1e2)]();return salesforce_1[_0x4a7015(0x1fc)][_0x4a7015(0x20c)](new auth_manager_1['AuthManager'](_0x4bd5fd),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a68_0x24fc53(0x201)](){const _0x104615=a68_0x24fc53;await this[_0x104615(0x1fe)][_0x104615(0x220)](_0x104615(0x1f5)['padEnd'](0x32,'=')),await new retrieve_cartridges_1[(_0x104615(0x21d))](this[_0x104615(0x203)],this[_0x104615(0x21b)],this[_0x104615(0x1f0)],this[_0x104615(0x1f9)],this['branchId'],this[_0x104615(0x221)],this['logger'])[_0x104615(0x202)]();}async[a68_0x24fc53(0x216)](){const _0x2962fe=a68_0x24fc53;await this[_0x2962fe(0x1fe)][_0x2962fe(0x220)](_0x2962fe(0x1eb)[_0x2962fe(0x1ea)](0x32,'=')),await new run_script_1[(_0x2962fe(0x21d))](this[_0x2962fe(0x203)],this[_0x2962fe(0x1f7)],this['codeVersion'],this[_0x2962fe(0x1fb)],this[_0x2962fe(0x1ff)],this[_0x2962fe(0x1fe)])[_0x2962fe(0x202)]();}async['deployCartridges'](){const _0x2abb10=a68_0x24fc53;await this[_0x2abb10(0x1fe)][_0x2abb10(0x220)](_0x2abb10(0x20e)[_0x2abb10(0x1ea)](0x32,'=')),await new deploy_cartridges_1[(_0x2abb10(0x21d))](this[_0x2abb10(0x203)],this[_0x2abb10(0x1f7)],this[_0x2abb10(0x1df)],this['logger'])[_0x2abb10(0x202)]();}async[a68_0x24fc53(0x1ec)](){const _0x5cb43b=a68_0x24fc53;await this[_0x5cb43b(0x1fe)][_0x5cb43b(0x220)](_0x5cb43b(0x20e)[_0x5cb43b(0x1ea)](0x32,'=')),await new deploy_cartridges_1[(_0x5cb43b(0x21d))](this[_0x5cb43b(0x203)],this['credentials'],this['codeVersion'],this[_0x5cb43b(0x1fe)])[_0x5cb43b(0x1ec)]();}[a68_0x24fc53(0x210)](){const _0x58ec55=a68_0x24fc53;var _0x1bfd9a,_0x3a3ce4;return((_0x3a3ce4=(_0x1bfd9a=process[_0x58ec55(0x21f)])===null||_0x1bfd9a===void 0x0?void 0x0:_0x1bfd9a[_0x58ec55(0x1ed)])===null||_0x3a3ce4===void 0x0?void 0x0:_0x3a3ce4['toLowerCase']())===_0x58ec55(0x1f3)?'':constants_1[_0x58ec55(0x1fd)];}}exports[a68_0x24fc53(0x1e6)]=Job,new Job()[a68_0x24fc53(0x202)]()['then'](()=>process[a68_0x24fc53(0x217)](0x0))[a68_0x24fc53(0x1f4)](()=>process['exit'](0x1));