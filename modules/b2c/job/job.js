const a68_0x5674c6=a68_0x219a;(function(_0x31750c,_0x3d9817){const _0x43fb7d=a68_0x219a,_0x372a73=_0x31750c();while(!![]){try{const _0x1998fc=-parseInt(_0x43fb7d(0x1a3))/0x1*(parseInt(_0x43fb7d(0x186))/0x2)+-parseInt(_0x43fb7d(0x1b5))/0x3*(parseInt(_0x43fb7d(0x19b))/0x4)+-parseInt(_0x43fb7d(0x17e))/0x5*(-parseInt(_0x43fb7d(0x197))/0x6)+-parseInt(_0x43fb7d(0x1b6))/0x7+parseInt(_0x43fb7d(0x1b4))/0x8+parseInt(_0x43fb7d(0x1ae))/0x9+-parseInt(_0x43fb7d(0x1aa))/0xa;if(_0x1998fc===_0x3d9817)break;else _0x372a73['push'](_0x372a73['shift']());}catch(_0x4fd2c1){_0x372a73['push'](_0x372a73['shift']());}}}(a68_0x5ba8,0x47100));const a68_0x4ccced=(function(){let _0x1aa2e0=!![];return function(_0x157300,_0x34e4e6){const _0x1c9138=_0x1aa2e0?function(){const _0xf84489=a68_0x219a;if(_0x34e4e6){const _0x17930f=_0x34e4e6[_0xf84489(0x1a4)](_0x157300,arguments);return _0x34e4e6=null,_0x17930f;}}:function(){};return _0x1aa2e0=![],_0x1c9138;};}()),a68_0x4b0b32=a68_0x4ccced(this,function(){const _0x135bae=a68_0x219a;return a68_0x4b0b32[_0x135bae(0x1bd)]()[_0x135bae(0x18b)]('(((.+)+)+)+$')[_0x135bae(0x1bd)]()[_0x135bae(0x1b0)](a68_0x4b0b32)[_0x135bae(0x18b)](_0x135bae(0x1a7));});a68_0x4b0b32();'use strict';function a68_0x219a(_0xb959e5,_0x2f4f56){const _0x13ef9e=a68_0x5ba8();return a68_0x219a=function(_0x4b0b32,_0x4ccced){_0x4b0b32=_0x4b0b32-0x177;let _0x5ba831=_0x13ef9e[_0x4b0b32];return _0x5ba831;},a68_0x219a(_0xb959e5,_0x2f4f56);}var __importDefault=this&&this[a68_0x5674c6(0x17d)]||function(_0x95fd7e){const _0x6df59f=a68_0x5674c6;return _0x95fd7e&&_0x95fd7e[_0x6df59f(0x19a)]?_0x95fd7e:{'default':_0x95fd7e};};Object[a68_0x5674c6(0x19d)](exports,a68_0x5674c6(0x19a),{'value':!![]}),exports[a68_0x5674c6(0x19f)]=void 0x0;const core_1=require(a68_0x5674c6(0x1a1)),salesforce_1=require(a68_0x5674c6(0x177)),auth_manager_1=require(a68_0x5674c6(0x196)),constants_1=require(a68_0x5674c6(0x182)),utils_1=require(a68_0x5674c6(0x1a8)),minimist_1=__importDefault(require('minimist')),path_1=__importDefault(require(a68_0x5674c6(0x1a0))),state_manger_1=__importDefault(require(a68_0x5674c6(0x1ba))),logger_1=__importDefault(require('./classes/logger')),retrieve_cartridges_1=__importDefault(require('./classes/retrieve-cartridges')),deploy_cartridges_1=__importDefault(require(a68_0x5674c6(0x190))),run_script_1=__importDefault(require(a68_0x5674c6(0x1bf))),manifest_manager_1=__importDefault(require('./classes/manifest-manager')),salesforce_auth_1=__importDefault(require(a68_0x5674c6(0x192)));function a68_0x5ba8(){const _0x1a724e=['cartridges','./classes/run-script','FLOSUM_NAMESPACE','@flosum/salesforce','padEnd','jobId','default','axiosInstance','getManifestParameters','__importDefault','1370510tUdkrI','true','isExistsPath','======\x20Retrieve\x20cartridges\x20','../constants','getFlosumNamespace','execute','AxiosInstanceUtils','2vrhRda','deployCartridges','join','jobPath','toLowerCase','search','isActivateCodeVersion','FLOSUM_SCRIPT_PATH','======\x20Run\x20script\x20','argv','./classes/deploy-cartridges','namespace','./classes/salesforce-auth','apiVersion','credentials','logger','../../shared/managers/auth.manager','12KnFHpF','setError','message','__esModule','948FnyAhs','isCompileCartridges','defineProperty','AuthManager','Job','path','../../../core','create','290676Ecdqaj','apply','exit','branchId','(((.+)+)+)+$','@flosum/utils','Logger','4366740olfQSw','init','then','runScript','4746969PvlVnj','systemLogger','constructor','getAuthDetails','retrieveCartridges','setCompleted','1402624btyyYm','783AGfTqx','1194858rtFPbN','codeVersion','error','log','../../shared/managers/state-manger','setInProgress','Job\x20has\x20been\x20completed.','toString'];a68_0x5ba8=function(){return _0x1a724e;};return a68_0x5ba8();}class Job{constructor(){const _0x41578d=a68_0x5674c6,{jobId:_0xcc63e1,jobStorePath:_0x2ff20f}=(0x0,minimist_1['default'])(process[_0x41578d(0x18f)]['slice'](0x2));this['jobPath']=_0x2ff20f,this[_0x41578d(0x179)]=_0xcc63e1;}async[a68_0x5674c6(0x184)](){const _0x4653f2=a68_0x5674c6;this['systemLogger']=new core_1[(_0x4653f2(0x1a9))](this['jobId']),this['logger']=new logger_1['default'](this[_0x4653f2(0x179)],this[_0x4653f2(0x1af)]);const _0x321de3=await new state_manger_1[(_0x4653f2(0x17a))](this['jobPath'])[_0x4653f2(0x1ab)](),_0x1a0658=path_1[_0x4653f2(0x17a)][_0x4653f2(0x188)](this[_0x4653f2(0x189)],_0x4653f2(0x1be),constants_1[_0x4653f2(0x18d)]);await this[_0x4653f2(0x195)]['log']('Job\x20has\x20been\x20started.');try{await _0x321de3[_0x4653f2(0x1bb)](),this[_0x4653f2(0x17b)]=await this['getAxiosInstance'](),this[_0x4653f2(0x191)]=this[_0x4653f2(0x183)](),await this['getManifestParameters'](),await this[_0x4653f2(0x1b2)](),await utils_1['FsUtils'][_0x4653f2(0x180)](_0x1a0658)?await this[_0x4653f2(0x1ad)]():await this['deployCartridges'](),await _0x321de3[_0x4653f2(0x1b3)](),await this['logger']['log'](_0x4653f2(0x1bc));}catch(_0x50f3a4){await _0x321de3[_0x4653f2(0x198)](_0x50f3a4),await this[_0x4653f2(0x195)][_0x4653f2(0x1b8)](_0x50f3a4[_0x4653f2(0x199)]),await this[_0x4653f2(0x195)][_0x4653f2(0x1b8)]('Job\x20has\x20been\x20failed.');}}async[a68_0x5674c6(0x17c)](){const _0x3af563=a68_0x5674c6,{credentials:_0x59a064,apiVersion:_0x2d034e,branchId:_0x5664e7,codeVersion:_0x4c936f,isCompileCartridges:_0x43ca86,isActivateCodeVersion:_0x572c78,variables:_0x21d73e}=await new manifest_manager_1[(_0x3af563(0x17a))](this[_0x3af563(0x189)])[_0x3af563(0x1ab)]();this[_0x3af563(0x194)]=_0x59a064,this[_0x3af563(0x193)]=_0x2d034e,this[_0x3af563(0x1a6)]=_0x5664e7,this[_0x3af563(0x1b7)]=_0x4c936f,this[_0x3af563(0x19c)]=_0x43ca86,this['isActivateCodeVersion']=_0x572c78,this['variables']=_0x21d73e;}async['getAxiosInstance'](){const _0xe1ec04=a68_0x5674c6,_0xb94b6f=await salesforce_auth_1['default'][_0xe1ec04(0x1b1)]();return salesforce_1[_0xe1ec04(0x185)][_0xe1ec04(0x1a2)](new auth_manager_1[(_0xe1ec04(0x19e))](_0xb94b6f),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a68_0x5674c6(0x1b2)](){const _0x5a7d9e=a68_0x5674c6;await this[_0x5a7d9e(0x195)][_0x5a7d9e(0x1b9)](_0x5a7d9e(0x181)[_0x5a7d9e(0x178)](0x32,'=')),await new retrieve_cartridges_1[(_0x5a7d9e(0x17a))](this['jobPath'],this[_0x5a7d9e(0x17b)],this[_0x5a7d9e(0x193)],this['namespace'],this[_0x5a7d9e(0x1a6)],this['variables'],this[_0x5a7d9e(0x195)])['execute']();}async[a68_0x5674c6(0x1ad)](){const _0x4c36a1=a68_0x5674c6;await this[_0x4c36a1(0x195)][_0x4c36a1(0x1b9)](_0x4c36a1(0x18e)[_0x4c36a1(0x178)](0x32,'=')),await new run_script_1[(_0x4c36a1(0x17a))](this[_0x4c36a1(0x189)],this[_0x4c36a1(0x194)],this[_0x4c36a1(0x1b7)],this['isCompileCartridges'],this['isActivateCodeVersion'],this[_0x4c36a1(0x1af)],this[_0x4c36a1(0x195)])[_0x4c36a1(0x184)]();}async[a68_0x5674c6(0x187)](){const _0x2b221c=a68_0x5674c6;await this[_0x2b221c(0x195)]['log']('======\x20Deploy\x20cartridges\x20'[_0x2b221c(0x178)](0x32,'=')),await new deploy_cartridges_1[(_0x2b221c(0x17a))](this[_0x2b221c(0x189)],this[_0x2b221c(0x194)],this['codeVersion'],this[_0x2b221c(0x18c)],this[_0x2b221c(0x195)])[_0x2b221c(0x184)]();}[a68_0x5674c6(0x183)](){const _0x43c0cd=a68_0x5674c6;var _0x3732ec,_0x2e818b;return((_0x2e818b=(_0x3732ec=process['env'])===null||_0x3732ec===void 0x0?void 0x0:_0x3732ec['IGNORE_FLOSUM_NAMESPACE'])===null||_0x2e818b===void 0x0?void 0x0:_0x2e818b[_0x43c0cd(0x18a)]())===_0x43c0cd(0x17f)?'':constants_1[_0x43c0cd(0x1c0)];}}exports[a68_0x5674c6(0x19f)]=Job,new Job()[a68_0x5674c6(0x184)]()[a68_0x5674c6(0x1ac)](()=>process[a68_0x5674c6(0x1a5)](0x0))['catch'](()=>process[a68_0x5674c6(0x1a5)](0x1));