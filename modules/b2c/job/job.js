function a68_0x3a6b(){const _0x3abfe9=['FsUtils','483380ZGUGzu','../../shared/managers/state-manger','../../../core','8875881QfFgrp','axiosInstance','toString','getFlosumNamespace','B2C\x20job\x20has\x20been\x20started.','10UtzkAq','3383304vqQoNn','execute','isCompileCartridges','Logger','getAxiosInstance','create','true','878652rAUSnA','error','jobId','catch','search','getManifestParameters','__importDefault','runScript','@flosum/utils','codeVersion','./classes/deploy-cartridges','Job','../constants','B2C\x20job\x20has\x20been\x20completed.','1OScUtA','slice','credentials','toLowerCase','minimist','exit','1752458KwbUgN','setCompleted','init','retrieveCartridges','__esModule','deployCartridges','apiVersion','logger','padEnd','defineProperty','isExistsPath','jobPath','======\x20Deploy\x20cartridges\x20','437870tczXag','(((.+)+)+)+$','activateCodeVersion','argv','variables','./classes/manifest-manager','env','1625833ezKoLT','IGNORE_FLOSUM_NAMESPACE','branchId','21LTcekE','isActivateCodeVersion','log','getAuthDetails','then','setInProgress','../../shared/managers/auth.manager','B2C\x20job\x20has\x20been\x20failed.','14ejilHP','path','namespace','FLOSUM_SCRIPT_PATH','default','join'];a68_0x3a6b=function(){return _0x3abfe9;};return a68_0x3a6b();}const a68_0x1a9fc0=a68_0x4418;(function(_0x549e41,_0x45fda9){const _0x1c35ad=a68_0x4418,_0x680c0b=_0x549e41();while(!![]){try{const _0xa08b1d=parseInt(_0x1c35ad(0x152))/0x1*(-parseInt(_0x1c35ad(0x158))/0x2)+parseInt(_0x1c35ad(0x16f))/0x3*(parseInt(_0x1c35ad(0x17e))/0x4)+-parseInt(_0x1c35ad(0x186))/0x5*(-parseInt(_0x1c35ad(0x144))/0x6)+parseInt(_0x1c35ad(0x177))/0x7*(-parseInt(_0x1c35ad(0x187))/0x8)+parseInt(_0x1c35ad(0x181))/0x9+-parseInt(_0x1c35ad(0x165))/0xa+parseInt(_0x1c35ad(0x16c))/0xb;if(_0xa08b1d===_0x45fda9)break;else _0x680c0b['push'](_0x680c0b['shift']());}catch(_0x147e55){_0x680c0b['push'](_0x680c0b['shift']());}}}(a68_0x3a6b,0x7bc59));const a68_0x5dea57=(function(){let _0x5b8652=!![];return function(_0x26ac5f,_0x55b214){const _0x54cd03=_0x5b8652?function(){if(_0x55b214){const _0x16ff2d=_0x55b214['apply'](_0x26ac5f,arguments);return _0x55b214=null,_0x16ff2d;}}:function(){};return _0x5b8652=![],_0x54cd03;};}()),a68_0x5115fa=a68_0x5dea57(this,function(){const _0x5dcb79=a68_0x4418;return a68_0x5115fa[_0x5dcb79(0x183)]()[_0x5dcb79(0x148)](_0x5dcb79(0x166))['toString']()['constructor'](a68_0x5115fa)['search'](_0x5dcb79(0x166));});a68_0x5115fa();'use strict';function a68_0x4418(_0x34c9bb,_0x15a14d){const _0x43f649=a68_0x3a6b();return a68_0x4418=function(_0x5115fa,_0x5dea57){_0x5115fa=_0x5115fa-0x144;let _0x3a6b25=_0x43f649[_0x5115fa];return _0x3a6b25;},a68_0x4418(_0x34c9bb,_0x15a14d);}var __importDefault=this&&this[a68_0x1a9fc0(0x14a)]||function(_0x924d60){return _0x924d60&&_0x924d60['__esModule']?_0x924d60:{'default':_0x924d60};};Object[a68_0x1a9fc0(0x161)](exports,a68_0x1a9fc0(0x15c),{'value':!![]}),exports[a68_0x1a9fc0(0x14f)]=void 0x0;const core_1=require(a68_0x1a9fc0(0x180)),salesforce_1=require('@flosum/salesforce'),auth_manager_1=require(a68_0x1a9fc0(0x175)),constants_1=require(a68_0x1a9fc0(0x150)),utils_1=require(a68_0x1a9fc0(0x14c)),minimist_1=__importDefault(require(a68_0x1a9fc0(0x156))),path_1=__importDefault(require(a68_0x1a9fc0(0x178))),state_manger_1=__importDefault(require(a68_0x1a9fc0(0x17f))),logger_1=__importDefault(require('./classes/logger')),retrieve_cartridges_1=__importDefault(require('./classes/retrieve-cartridges')),deploy_cartridges_1=__importDefault(require(a68_0x1a9fc0(0x14e))),run_script_1=__importDefault(require('./classes/run-script')),manifest_manager_1=__importDefault(require(a68_0x1a9fc0(0x16a))),salesforce_auth_1=__importDefault(require('./classes/salesforce-auth'));class Job{constructor(){const _0x5dfb03=a68_0x1a9fc0,{jobId:_0x246c4a,jobStorePath:_0xe86a88}=(0x0,minimist_1[_0x5dfb03(0x17b)])(process[_0x5dfb03(0x168)][_0x5dfb03(0x153)](0x2));this[_0x5dfb03(0x163)]=_0xe86a88,this[_0x5dfb03(0x146)]=_0x246c4a;}async['execute'](){const _0x50f7b1=a68_0x1a9fc0,_0x4e055e=new core_1[(_0x50f7b1(0x18a))](this[_0x50f7b1(0x146)]);this[_0x50f7b1(0x15f)]=new logger_1[(_0x50f7b1(0x17b))](this[_0x50f7b1(0x146)],_0x4e055e);const _0x3653be=await new state_manger_1[(_0x50f7b1(0x17b))](this[_0x50f7b1(0x163)])[_0x50f7b1(0x15a)](),_0x53cfad=path_1[_0x50f7b1(0x17b)][_0x50f7b1(0x17c)](this['jobPath'],'cartridges',constants_1[_0x50f7b1(0x17a)]);await this[_0x50f7b1(0x15f)][_0x50f7b1(0x171)](_0x50f7b1(0x185));try{await _0x3653be[_0x50f7b1(0x174)](),this[_0x50f7b1(0x182)]=await this['getAxiosInstance'](),this[_0x50f7b1(0x179)]=this['getFlosumNamespace'](),await this[_0x50f7b1(0x149)](),await this[_0x50f7b1(0x15b)](),await utils_1[_0x50f7b1(0x17d)][_0x50f7b1(0x162)](_0x53cfad)?await this['runScript']():(await this[_0x50f7b1(0x15d)](),this['isActivateCodeVersion']&&await this['activateCodeVersion']()),await _0x3653be[_0x50f7b1(0x159)](),await this[_0x50f7b1(0x15f)][_0x50f7b1(0x171)](_0x50f7b1(0x151));}catch(_0x356d0a){await _0x3653be['setError'](_0x356d0a),await this[_0x50f7b1(0x15f)][_0x50f7b1(0x145)](_0x356d0a['message']),await this['logger'][_0x50f7b1(0x145)](_0x50f7b1(0x176));}}async[a68_0x1a9fc0(0x149)](){const _0x2c6b29=a68_0x1a9fc0,{credentials:_0x2c7d71,apiVersion:_0x2e49b6,branchId:_0x1ad46b,codeVersion:_0x321d8f,isCompileCartridges:_0x6e27a,isActivateCodeVersion:_0x53efa8,variables:_0x103944}=await new manifest_manager_1[(_0x2c6b29(0x17b))](this[_0x2c6b29(0x163)])[_0x2c6b29(0x15a)]();this['credentials']=_0x2c7d71,this[_0x2c6b29(0x15e)]=_0x2e49b6,this[_0x2c6b29(0x16e)]=_0x1ad46b,this[_0x2c6b29(0x14d)]=_0x321d8f,this['isCompileCartridges']=_0x6e27a,this[_0x2c6b29(0x170)]=_0x53efa8,this[_0x2c6b29(0x169)]=_0x103944;}async[a68_0x1a9fc0(0x18b)](){const _0x5b97d7=a68_0x1a9fc0,_0x5ca77f=await salesforce_auth_1[_0x5b97d7(0x17b)][_0x5b97d7(0x172)]();return salesforce_1['AxiosInstanceUtils'][_0x5b97d7(0x18c)](new auth_manager_1['AuthManager'](_0x5ca77f),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a68_0x1a9fc0(0x15b)](){const _0x594159=a68_0x1a9fc0;await this[_0x594159(0x15f)]['log']('======\x20Retrieve\x20cartridges\x20'[_0x594159(0x160)](0x32,'=')),await new retrieve_cartridges_1[(_0x594159(0x17b))](this['jobPath'],this[_0x594159(0x182)],this[_0x594159(0x15e)],this[_0x594159(0x179)],this[_0x594159(0x16e)],this['variables'],this['logger'])[_0x594159(0x188)]();}async[a68_0x1a9fc0(0x14b)](){const _0x1d282=a68_0x1a9fc0;await this[_0x1d282(0x15f)][_0x1d282(0x171)]('======\x20Run\x20script\x20'[_0x1d282(0x160)](0x32,'=')),await new run_script_1[(_0x1d282(0x17b))](this['jobPath'],this[_0x1d282(0x154)],this[_0x1d282(0x14d)],this[_0x1d282(0x189)],this[_0x1d282(0x170)],this['logger'])[_0x1d282(0x188)]();}async[a68_0x1a9fc0(0x15d)](){const _0x564979=a68_0x1a9fc0;await this[_0x564979(0x15f)][_0x564979(0x171)]('======\x20Deploy\x20cartridges\x20'['padEnd'](0x32,'=')),await new deploy_cartridges_1[(_0x564979(0x17b))](this[_0x564979(0x163)],this['credentials'],this['codeVersion'],this[_0x564979(0x15f)])[_0x564979(0x188)]();}async[a68_0x1a9fc0(0x167)](){const _0x2e46f9=a68_0x1a9fc0;await this['logger']['log'](_0x2e46f9(0x164)[_0x2e46f9(0x160)](0x32,'=')),await new deploy_cartridges_1[(_0x2e46f9(0x17b))](this['jobPath'],this[_0x2e46f9(0x154)],this[_0x2e46f9(0x14d)],this['logger'])[_0x2e46f9(0x167)]();}[a68_0x1a9fc0(0x184)](){const _0x4f1be3=a68_0x1a9fc0;var _0x32695c,_0x682282;return((_0x682282=(_0x32695c=process[_0x4f1be3(0x16b)])===null||_0x32695c===void 0x0?void 0x0:_0x32695c[_0x4f1be3(0x16d)])===null||_0x682282===void 0x0?void 0x0:_0x682282[_0x4f1be3(0x155)]())===_0x4f1be3(0x18d)?'':constants_1['FLOSUM_NAMESPACE'];}}exports[a68_0x1a9fc0(0x14f)]=Job,new Job()[a68_0x1a9fc0(0x188)]()[a68_0x1a9fc0(0x173)](()=>process['exit'](0x0))[a68_0x1a9fc0(0x147)](()=>process[a68_0x1a9fc0(0x157)](0x1));