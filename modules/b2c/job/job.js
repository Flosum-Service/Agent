const a69_0x3e0628=a69_0x1d96;(function(_0x102907,_0x55884e){const _0x51fdb0=a69_0x1d96,_0x90e1a2=_0x102907();while(!![]){try{const _0x5beb2c=-parseInt(_0x51fdb0(0x1c2))/0x1+parseInt(_0x51fdb0(0x1b8))/0x2*(-parseInt(_0x51fdb0(0x1da))/0x3)+-parseInt(_0x51fdb0(0x1a1))/0x4+parseInt(_0x51fdb0(0x1d7))/0x5*(parseInt(_0x51fdb0(0x1b7))/0x6)+-parseInt(_0x51fdb0(0x1d9))/0x7*(parseInt(_0x51fdb0(0x1e2))/0x8)+-parseInt(_0x51fdb0(0x1b1))/0x9+parseInt(_0x51fdb0(0x1c4))/0xa;if(_0x5beb2c===_0x55884e)break;else _0x90e1a2['push'](_0x90e1a2['shift']());}catch(_0x509429){_0x90e1a2['push'](_0x90e1a2['shift']());}}}(a69_0x9d9c,0x219e2));const a69_0x3d912b=(function(){let _0x4a264f=!![];return function(_0x185224,_0x26ae0b){const _0x4c65ba=_0x4a264f?function(){const _0x298ad0=a69_0x1d96;if(_0x26ae0b){const _0x332a78=_0x26ae0b[_0x298ad0(0x1ba)](_0x185224,arguments);return _0x26ae0b=null,_0x332a78;}}:function(){};return _0x4a264f=![],_0x4c65ba;};}()),a69_0x300a6f=a69_0x3d912b(this,function(){const _0x49c44e=a69_0x1d96;return a69_0x300a6f[_0x49c44e(0x1b9)]()[_0x49c44e(0x1bd)](_0x49c44e(0x1a7))[_0x49c44e(0x1b9)]()['constructor'](a69_0x300a6f)[_0x49c44e(0x1bd)](_0x49c44e(0x1a7));});a69_0x300a6f();'use strict';function a69_0x9d9c(){const _0x49d7b5=['IGNORE_FLOSUM_NAMESPACE','Job\x20has\x20been\x20started.','variables','../constants','40400rSvPqD','true','7516880BSlwzW','logger','cartridges','branchId','======\x20Run\x20Script\x20','Logger','jobPath','runScript','Job\x20has\x20been\x20failed.','message','./classes/logger','../../../core','AuthManager','getFlosumNamespace','exit','isLintValidate','isActivateCodeVersion','@flosum/utils','======\x20Deploy\x20Cartridge\x20Files\x20','155025wQzeAH','init','79163llgpQT','3ccntLG','systemLogger','path','credentials','getAuthDetails','retrieveCartridges','jobId','apiVersion','112brOzjQ','padEnd','create','setError','getAxiosInstance','axiosInstance','getManifestParameters','default','env','AxiosInstanceUtils','defineProperty','slice','890824TWnQkY','minimist','deployCartridges','metadataLogId','./classes/run-lint','log','(((.+)+)+)+$','execute','./classes/salesforce-auth','runLint','isExistsPath','namespace','./classes/run-script','error','isUseCertificate','FsUtils','1971783vPduNG','catch','codeVersion','isCompileCartridges','Job','======\x20Retrieve\x20Cartridge\x20Files\x20','12oJGuDO','70962hGRATM','toString','apply','__esModule','Job\x20has\x20been\x20completed.','search'];a69_0x9d9c=function(){return _0x49d7b5;};return a69_0x9d9c();}var __importDefault=this&&this['__importDefault']||function(_0x12785c){const _0x5c3dac=a69_0x1d96;return _0x12785c&&_0x12785c[_0x5c3dac(0x1bb)]?_0x12785c:{'default':_0x12785c};};Object[a69_0x3e0628(0x19f)](exports,a69_0x3e0628(0x1bb),{'value':!![]}),exports['Job']=void 0x0;const core_1=require(a69_0x3e0628(0x1cf)),salesforce_1=require('@flosum/salesforce'),auth_manager_1=require('../../shared/managers/auth.manager'),constants_1=require(a69_0x3e0628(0x1c1)),utils_1=require(a69_0x3e0628(0x1d5)),minimist_1=__importDefault(require(a69_0x3e0628(0x1a2))),path_1=__importDefault(require(a69_0x3e0628(0x1dc))),state_manger_1=__importDefault(require('../../shared/managers/state-manger')),logger_1=__importDefault(require(a69_0x3e0628(0x1ce))),retrieve_cartridges_1=__importDefault(require('./classes/retrieve-cartridges')),deploy_cartridges_1=__importDefault(require('./classes/deploy-cartridges')),run_script_1=__importDefault(require(a69_0x3e0628(0x1ad))),run_lint_1=__importDefault(require(a69_0x3e0628(0x1a5))),manifest_manager_1=__importDefault(require('./classes/manifest-manager')),salesforce_auth_1=__importDefault(require(a69_0x3e0628(0x1a9)));function a69_0x1d96(_0x4413ce,_0xaa11f5){const _0x3d9c3f=a69_0x9d9c();return a69_0x1d96=function(_0x300a6f,_0x3d912b){_0x300a6f=_0x300a6f-0x198;let _0x9d9cf3=_0x3d9c3f[_0x300a6f];return _0x9d9cf3;},a69_0x1d96(_0x4413ce,_0xaa11f5);}class Job{constructor(){const _0x2e839a=a69_0x3e0628,{jobId:_0x24d7f0,jobStorePath:_0x4c4976}=(0x0,minimist_1[_0x2e839a(0x19c)])(process['argv'][_0x2e839a(0x1a0)](0x2));this[_0x2e839a(0x1ca)]=_0x4c4976,this['jobId']=_0x24d7f0;}async[a69_0x3e0628(0x1a8)](){const _0x35210b=a69_0x3e0628;this[_0x35210b(0x1db)]=new core_1[(_0x35210b(0x1c9))](this[_0x35210b(0x1e0)]),this[_0x35210b(0x1c5)]=new logger_1['default'](this[_0x35210b(0x1e0)],this['systemLogger']);const _0x6604a3=await new state_manger_1[(_0x35210b(0x19c))](this[_0x35210b(0x1ca)])[_0x35210b(0x1d8)](),_0x862672=path_1[_0x35210b(0x19c)]['join'](this[_0x35210b(0x1ca)],_0x35210b(0x1c6),constants_1['FLOSUM_SCRIPT_PATH']);await this[_0x35210b(0x1c5)]['log'](_0x35210b(0x1bf));try{await _0x6604a3['setInProgress'](),this['axiosInstance']=await this['getAxiosInstance'](),this[_0x35210b(0x1ac)]=this[_0x35210b(0x1d1)](),await this[_0x35210b(0x19b)](),await this[_0x35210b(0x1df)](),!this[_0x35210b(0x1d3)]?await utils_1[_0x35210b(0x1b0)][_0x35210b(0x1ab)](_0x862672)?await this[_0x35210b(0x1cb)]():await this[_0x35210b(0x1a3)]():await this[_0x35210b(0x1aa)](),await _0x6604a3['setCompleted'](),await this['logger'][_0x35210b(0x1a6)](_0x35210b(0x1bc));}catch(_0x1afaed){await _0x6604a3[_0x35210b(0x198)](_0x1afaed),await this[_0x35210b(0x1c5)]['error'](_0x1afaed[_0x35210b(0x1cd)]),await this[_0x35210b(0x1c5)][_0x35210b(0x1ae)](_0x35210b(0x1cc));}}async[a69_0x3e0628(0x19b)](){const _0xfcaa06=a69_0x3e0628,{credentials:_0x40e9ea,apiVersion:_0x2e1eb6,branchId:_0x425384,metadataLogId:_0x1e9f39,codeVersion:_0x36d57c,isUseCertificate:_0x5b8a26,isLintValidate:_0x2ccbb5,isCompileCartridges:_0x9e752,isActivateCodeVersion:_0x595124,variables:_0x47e348}=await new manifest_manager_1[(_0xfcaa06(0x19c))](this[_0xfcaa06(0x1ca)])['init']();this[_0xfcaa06(0x1dd)]=_0x40e9ea,this['apiVersion']=_0x2e1eb6,this['branchId']=_0x425384,this[_0xfcaa06(0x1a4)]=_0x1e9f39,this[_0xfcaa06(0x1b3)]=_0x36d57c,this['isUseCertificate']=_0x5b8a26,this[_0xfcaa06(0x1d3)]=_0x2ccbb5,this[_0xfcaa06(0x1b4)]=_0x9e752,this[_0xfcaa06(0x1d4)]=_0x595124,this[_0xfcaa06(0x1c0)]=_0x47e348;}async[a69_0x3e0628(0x199)](){const _0x12f3ce=a69_0x3e0628,_0x3915fb=await salesforce_auth_1[_0x12f3ce(0x19c)][_0x12f3ce(0x1de)]();return salesforce_1[_0x12f3ce(0x19e)][_0x12f3ce(0x1e4)](new auth_manager_1[(_0x12f3ce(0x1d0))](_0x3915fb),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity});}async[a69_0x3e0628(0x1df)](){const _0x1b6be1=a69_0x3e0628;await this['logger'][_0x1b6be1(0x1a6)](_0x1b6be1(0x1b6)[_0x1b6be1(0x1e3)](0x32,'=')),await new retrieve_cartridges_1[(_0x1b6be1(0x19c))](this[_0x1b6be1(0x1ca)],this[_0x1b6be1(0x19a)],this[_0x1b6be1(0x1e1)],this[_0x1b6be1(0x1ac)],this[_0x1b6be1(0x1c7)],this[_0x1b6be1(0x1a4)],this[_0x1b6be1(0x1c5)],this[_0x1b6be1(0x1db)],this[_0x1b6be1(0x1c0)])[_0x1b6be1(0x1a8)]();}async[a69_0x3e0628(0x1cb)](){const _0x3e5477=a69_0x3e0628;await this[_0x3e5477(0x1c5)]['log'](_0x3e5477(0x1c8)['padEnd'](0x32,'=')),await new run_script_1[(_0x3e5477(0x19c))](this[_0x3e5477(0x1ca)],this['credentials'],this[_0x3e5477(0x1b3)],this[_0x3e5477(0x1af)],this[_0x3e5477(0x1b4)],this[_0x3e5477(0x1d4)],this[_0x3e5477(0x1db)],this[_0x3e5477(0x1c5)])[_0x3e5477(0x1a8)]();}async['runLint'](){const _0x5aae55=a69_0x3e0628;await this[_0x5aae55(0x1c5)][_0x5aae55(0x1a6)]('======\x20Run\x20Lint\x20'[_0x5aae55(0x1e3)](0x32,'=')),await new run_lint_1['default'](this['jobPath'],this['systemLogger'],this[_0x5aae55(0x1c5)])['execute']();}async[a69_0x3e0628(0x1a3)](){const _0x541de0=a69_0x3e0628;await this[_0x541de0(0x1c5)]['log'](_0x541de0(0x1d6)[_0x541de0(0x1e3)](0x32,'=')),await new deploy_cartridges_1[(_0x541de0(0x19c))](this[_0x541de0(0x1ca)],this['credentials'],this['codeVersion'],this[_0x541de0(0x1d4)],this['logger'])[_0x541de0(0x1a8)]();}[a69_0x3e0628(0x1d1)](){const _0xe04d59=a69_0x3e0628;var _0x3cd05c,_0x21be86;return((_0x21be86=(_0x3cd05c=process[_0xe04d59(0x19d)])===null||_0x3cd05c===void 0x0?void 0x0:_0x3cd05c[_0xe04d59(0x1be)])===null||_0x21be86===void 0x0?void 0x0:_0x21be86['toLowerCase']())===_0xe04d59(0x1c3)?'':constants_1['FLOSUM_NAMESPACE'];}}exports[a69_0x3e0628(0x1b5)]=Job,new Job()[a69_0x3e0628(0x1a8)]()['then'](()=>process[a69_0x3e0628(0x1d2)](0x0))[a69_0x3e0628(0x1b2)](()=>process[a69_0x3e0628(0x1d2)](0x1));