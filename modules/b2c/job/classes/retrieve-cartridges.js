function a62_0x4b30(){const _0x3a3407=['logger','(((.+)+)+)+$','pdf','defineProperty','@flosum/salesforce','woff','getEntries','namespace','substring','woff2','apiVersion','includes','utf8','jobPath','__esModule','zip','apply','Component_Type__c\x20=\x20:type','execute','Bulk1RetrieveData','rar','length','BulkXmlStreamParser','jpeg','name','replace','pipe','search','BodyLength','5328885RplMpb','Name','QueryBuilder','ttf','then','log','ico','isFlosumVariables','APPLICATION_XML','Attachment','andWhere','select','Bulk1JobOperation','getIsDone','constructor','svg','adm-zip','Component_History__c','Component__c\x20IN\x20(','applyFlosumVariables','from','where','png','updateFile','toString','Query','build','variables','extractAllToAsync','Body','166735gfQTNx','getComponentHistoryIds','\x20file(s).','10AMQbvQ','BulkV1QueryContentType','isLastVersion__c\x20=\x20:isLastVersion','Branch__c\x20=\x20:branchId','5277636HlGsro','indexOf','jpg','164062CtiCeV','axiosInstance','Retrieved\x20','21943128wtcdLT','forEach','6645198McvJLR','lastIndexOf','eot','4053104qxuVzs','CompositeRetrieveData','./utils','gzip','retriveAttachments'];a62_0x4b30=function(){return _0x3a3407;};return a62_0x4b30();}const a62_0x4e7b92=a62_0x457b;(function(_0x1bc23f,_0x47ce88){const _0x5f4121=a62_0x457b,_0x7d7d2c=_0x1bc23f();while(!![]){try{const _0x117143=-parseInt(_0x5f4121(0xbd))/0x1*(-parseInt(_0x5f4121(0xb6))/0x2)+-parseInt(_0x5f4121(0xe7))/0x3+parseInt(_0x5f4121(0xc5))/0x4+-parseInt(_0x5f4121(0xb3))/0x5+-parseInt(_0x5f4121(0xc2))/0x6+-parseInt(_0x5f4121(0xba))/0x7+parseInt(_0x5f4121(0xc0))/0x8;if(_0x117143===_0x47ce88)break;else _0x7d7d2c['push'](_0x7d7d2c['shift']());}catch(_0x3e3502){_0x7d7d2c['push'](_0x7d7d2c['shift']());}}}(a62_0x4b30,0xdd08a));const a62_0x39e012=(function(){let _0x36a0e9=!![];return function(_0xc59909,_0xb3b889){const _0x3c4d4d=_0x36a0e9?function(){const _0x5e723e=a62_0x457b;if(_0xb3b889){const _0x3b9321=_0xb3b889[_0x5e723e(0xda)](_0xc59909,arguments);return _0xb3b889=null,_0x3b9321;}}:function(){};return _0x36a0e9=![],_0x3c4d4d;};}()),a62_0x59dcb7=a62_0x39e012(this,function(){const _0x324dcc=a62_0x457b;return a62_0x59dcb7['toString']()[_0x324dcc(0xe5)](_0x324dcc(0xcb))[_0x324dcc(0xad)]()[_0x324dcc(0xa3)](a62_0x59dcb7)[_0x324dcc(0xe5)](_0x324dcc(0xcb));});a62_0x59dcb7();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4124aa){const _0x7e58fe=a62_0x457b;return _0x4124aa&&_0x4124aa[_0x7e58fe(0xd8)]?_0x4124aa:{'default':_0x4124aa};};Object[a62_0x4e7b92(0xcd)](exports,a62_0x4e7b92(0xd8),{'value':!![]});function a62_0x457b(_0x565aef,_0x5aaff6){const _0x293354=a62_0x4b30();return a62_0x457b=function(_0x59dcb7,_0x39e012){_0x59dcb7=_0x59dcb7-0xa3;let _0x4b3074=_0x293354[_0x59dcb7];return _0x4b3074;},a62_0x457b(_0x565aef,_0x5aaff6);}const salesforce_1=require('@flosum/salesforce'),salesforce_2=require(a62_0x4e7b92(0xce)),utils_1=require(a62_0x4e7b92(0xc7)),adm_zip_1=__importDefault(require(a62_0x4e7b92(0xa5))),B2C_CARTRIDGE_TYPE='CartridgeFile',BINARY_FIELDS=[a62_0x4e7b92(0xb2)],EXCLUDED_TYPES=[a62_0x4e7b92(0xbc),a62_0x4e7b92(0xa4),a62_0x4e7b92(0xc4),'otf',a62_0x4e7b92(0xe1),a62_0x4e7b92(0xab),a62_0x4e7b92(0xcf),a62_0x4e7b92(0xd3),a62_0x4e7b92(0xea),a62_0x4e7b92(0xed),a62_0x4e7b92(0xd9),a62_0x4e7b92(0xde),a62_0x4e7b92(0xc8),a62_0x4e7b92(0xcc)];class RetrieveCartridges{constructor(_0x5ef0a8,_0x3145e2,_0x2ac73f,_0x4bbd44,_0x59db45,_0x288ad4,_0x4f6fb3){const _0x584950=a62_0x4e7b92;this[_0x584950(0xd7)]=_0x5ef0a8,this['axiosInstance']=_0x3145e2,this[_0x584950(0xd4)]=_0x2ac73f,this[_0x584950(0xd1)]=_0x4bbd44,this['branchId']=_0x59db45,this[_0x584950(0xb0)]=_0x288ad4,this[_0x584950(0xca)]=_0x4f6fb3,this[_0x584950(0xee)]=![],this[_0x584950(0xee)]=Object['keys'](this['variables'])[_0x584950(0xdf)]>0x0;}async[a62_0x4e7b92(0xc9)](_0x41c35c){const _0x2f67f2=a62_0x4e7b92,_0xb5f34a=new salesforce_2[(_0x2f67f2(0xe9))]()[_0x2f67f2(0xf2)](_0x2f67f2(0xb2),_0x2f67f2(0xe8),_0x2f67f2(0xe6))['from'](_0x2f67f2(0xf0))[_0x2f67f2(0xaa)]('ParentId\x20IN\x20(:componentHistoryIds)',{'componentHistoryIds':_0x41c35c}),_0x8487dd=new salesforce_1[(_0x2f67f2(0xdd))]({'instance':this[_0x2f67f2(0xbe)],'api':this[_0x2f67f2(0xd4)],'pollInterval':0x1388,'queryBuilder':_0xb5f34a,'objectName':_0x2f67f2(0xf0),'contentType':salesforce_1[_0x2f67f2(0xb7)][_0x2f67f2(0xef)],'jobOperation':salesforce_1[_0x2f67f2(0xf3)][_0x2f67f2(0xae)]});let _0x494bd3=0x0;do{const _0x540bf9=await _0x8487dd[_0x2f67f2(0xdc)]();if(!_0x540bf9)break;const _0x5145db=new salesforce_2[(_0x2f67f2(0xe0))]({'binaryFields':BINARY_FIELDS});for await(const _0x17c5a5 of _0x540bf9[_0x2f67f2(0xe4)](_0x5145db)){_0x494bd3++;const _0x3f29e9=new adm_zip_1['default'](_0x17c5a5[_0x2f67f2(0xb2)]);this['isFlosumVariables']&&await this['applyFlosumVariables'](_0x3f29e9),await(0x0,utils_1[_0x2f67f2(0xb1)])(_0x3f29e9,this['jobPath']);}}while(!_0x8487dd[_0x2f67f2(0xf4)]());return _0x494bd3;}async[a62_0x4e7b92(0xa8)](_0x36a093){const _0x2afa02=a62_0x4e7b92,_0x201fc0=_0x36a093[_0x2afa02(0xd0)]();_0x201fc0[_0x2afa02(0xc1)](_0x369d50=>{const _0x24f264=_0x2afa02,_0x1343fb=_0x369d50[_0x24f264(0xe2)],_0x110342=_0x1343fb[_0x24f264(0xd2)](_0x1343fb[_0x24f264(0xc3)]('.')+0x1);if(!EXCLUDED_TYPES[_0x24f264(0xd5)](_0x110342)){let _0x5259f3=_0x369d50['getData']()[_0x24f264(0xad)](_0x24f264(0xd6)),_0x4677c8=![];for(const _0x213a73 in this[_0x24f264(0xb0)]){const _0x11ae6d='%%'+_0x213a73+'%%';if(_0x5259f3[_0x24f264(0xbb)](_0x11ae6d)!==-0x1){const _0x5ccef1=new RegExp(_0x11ae6d,'ig');_0x5259f3=_0x5259f3[_0x24f264(0xe3)](_0x5ccef1,this[_0x24f264(0xb0)][_0x213a73]),_0x4677c8=!![];}}_0x4677c8&&_0x36a093[_0x24f264(0xac)](_0x369d50,Buffer[_0x24f264(0xa9)](_0x5259f3,_0x24f264(0xd6)));}});}async[a62_0x4e7b92(0xb4)](){const _0x5a04cf=a62_0x4e7b92,_0x133b19=[],_0x220e8b=new salesforce_2[(_0x5a04cf(0xe9))]()[_0x5a04cf(0xf2)]('Id')[_0x5a04cf(0xa9)](this['namespace']+'Component__c')['where'](this[_0x5a04cf(0xd1)]+_0x5a04cf(0xb9),{'branchId':this['branchId']})[_0x5a04cf(0xf1)](this['namespace']+_0x5a04cf(0xdb),{'type':B2C_CARTRIDGE_TYPE})[_0x5a04cf(0xaf)](),_0x22289d=new salesforce_2[(_0x5a04cf(0xe9))]()['select']('Id')[_0x5a04cf(0xa9)](this[_0x5a04cf(0xd1)]+_0x5a04cf(0xa6))[_0x5a04cf(0xaa)](this['namespace']+_0x5a04cf(0xa7)+_0x220e8b+')')[_0x5a04cf(0xf1)](this[_0x5a04cf(0xd1)]+_0x5a04cf(0xb8),{'isLastVersion':!![]}),_0x587328=new salesforce_2[(_0x5a04cf(0xc6))]({'api':this[_0x5a04cf(0xd4)],'queryBuilder':_0x22289d,'instance':this['axiosInstance'],'isTooling':![]});do{const _0x8c89f7=await _0x587328[_0x5a04cf(0xdc)]()[_0x5a04cf(0xeb)](({records:_0x5bdbfd})=>_0x5bdbfd['map'](_0x30cb92=>_0x30cb92['Id']));_0x8c89f7[_0x5a04cf(0xdf)]&&_0x133b19['push'](_0x8c89f7);}while(!_0x587328[_0x5a04cf(0xf4)]());return _0x133b19;}async[a62_0x4e7b92(0xdc)](){const _0x5a61d1=a62_0x4e7b92,_0x4f93d5=await this[_0x5a61d1(0xb4)]();let _0x2be795=0x0;for(const _0x8323f0 of _0x4f93d5){_0x2be795+=await this[_0x5a61d1(0xc9)](_0x8323f0);}await this['logger'][_0x5a61d1(0xec)](_0x5a61d1(0xbf)+_0x2be795+_0x5a61d1(0xb5));}}exports['default']=RetrieveCartridges;