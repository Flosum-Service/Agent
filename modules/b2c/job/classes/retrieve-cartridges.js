const a60_0x526355=a60_0x2327;(function(_0x341fc9,_0xe976c6){const _0x49c93d=a60_0x2327,_0x56f731=_0x341fc9();while(!![]){try{const _0x1fabca=parseInt(_0x49c93d(0xe6))/0x1*(-parseInt(_0x49c93d(0xf5))/0x2)+parseInt(_0x49c93d(0xc0))/0x3+-parseInt(_0x49c93d(0xef))/0x4*(-parseInt(_0x49c93d(0xe8))/0x5)+parseInt(_0x49c93d(0xf6))/0x6+-parseInt(_0x49c93d(0xb7))/0x7*(parseInt(_0x49c93d(0xb2))/0x8)+-parseInt(_0x49c93d(0xed))/0x9+-parseInt(_0x49c93d(0xb4))/0xa*(-parseInt(_0x49c93d(0xf3))/0xb);if(_0x1fabca===_0xe976c6)break;else _0x56f731['push'](_0x56f731['shift']());}catch(_0x2c1727){_0x56f731['push'](_0x56f731['shift']());}}}(a60_0x165b,0xd7e24));const a60_0x1463b4=(function(){let _0x1b2d74=!![];return function(_0x37fd48,_0x38c287){const _0x308b05=_0x1b2d74?function(){if(_0x38c287){const _0x5ce7f4=_0x38c287['apply'](_0x37fd48,arguments);return _0x38c287=null,_0x5ce7f4;}}:function(){};return _0x1b2d74=![],_0x308b05;};}()),a60_0x2edb00=a60_0x1463b4(this,function(){const _0x10db6f=a60_0x2327;return a60_0x2edb00[_0x10db6f(0xb0)]()[_0x10db6f(0xf7)](_0x10db6f(0xd7))['toString']()[_0x10db6f(0xcd)](a60_0x2edb00)[_0x10db6f(0xf7)]('(((.+)+)+)+$');});function a60_0x2327(_0x1c5e91,_0xf21f62){const _0x1ce897=a60_0x165b();return a60_0x2327=function(_0x2edb00,_0x1463b4){_0x2edb00=_0x2edb00-0xa8;let _0x165bcf=_0x1ce897[_0x2edb00];return _0x165bcf;},a60_0x2327(_0x1c5e91,_0xf21f62);}a60_0x2edb00();'use strict';var __importDefault=this&&this[a60_0x526355(0xa9)]||function(_0x222daa){const _0x166354=a60_0x526355;return _0x222daa&&_0x222daa[_0x166354(0xc9)]?_0x222daa:{'default':_0x222daa};};Object['defineProperty'](exports,a60_0x526355(0xc9),{'value':!![]});const salesforce_1=require(a60_0x526355(0xbf)),salesforce_2=require(a60_0x526355(0xbf)),utils_1=require(a60_0x526355(0xc2)),adm_zip_1=__importDefault(require(a60_0x526355(0xd5))),B2C_CARTRIDGE_TYPE=a60_0x526355(0xe7),BINARY_FIELDS=[a60_0x526355(0xc7)],EXCLUDED_TYPES=[a60_0x526355(0xe4),a60_0x526355(0xc3),a60_0x526355(0xe5),a60_0x526355(0xc6),a60_0x526355(0xcf),a60_0x526355(0xda),a60_0x526355(0xec),a60_0x526355(0xde),a60_0x526355(0xe0),a60_0x526355(0xb6),a60_0x526355(0xee),a60_0x526355(0xba),a60_0x526355(0xdc),a60_0x526355(0xe1)];class RetrieveCartridges{constructor(_0xb2bc8a,_0x44a82c,_0x48b1a7,_0x486426,_0x52176a,_0x2a008d,_0x34e0e8){const _0x20e252=a60_0x526355;this[_0x20e252(0xdb)]=_0xb2bc8a,this[_0x20e252(0xd8)]=_0x44a82c,this[_0x20e252(0xe2)]=_0x48b1a7,this[_0x20e252(0xd3)]=_0x486426,this['branchId']=_0x52176a,this[_0x20e252(0xb8)]=_0x2a008d,this['logger']=_0x34e0e8,this[_0x20e252(0xf1)]=![],this[_0x20e252(0xf1)]=Object[_0x20e252(0xa8)](this['variables'])[_0x20e252(0xd1)]>0x0;}async[a60_0x526355(0xbc)](_0x57e891){const _0xc701d0=a60_0x526355,_0x46d1d0=new salesforce_2[(_0xc701d0(0xcc))]()[_0xc701d0(0xc8)]('Body',_0xc701d0(0xaa),_0xc701d0(0xab))['from']('Attachment')['where'](_0xc701d0(0xf4),{'componentHistoryIds':_0x57e891}),_0x4a9d6d=new salesforce_1[(_0xc701d0(0xaf))]({'instance':this['axiosInstance'],'api':this['apiVersion'],'pollInterval':0x1388,'queryBuilder':_0x46d1d0,'objectName':'Attachment','contentType':salesforce_1[_0xc701d0(0xb5)]['APPLICATION_XML'],'jobOperation':salesforce_1[_0xc701d0(0xae)][_0xc701d0(0xd4)]});let _0x43d41b=0x0;do{const _0x5e3d7f=await _0x4a9d6d[_0xc701d0(0xcb)]();if(!_0x5e3d7f)break;const _0x3944de=new salesforce_2['BulkXmlStreamParser']({'binaryFields':BINARY_FIELDS});for await(const _0xbd9f88 of _0x5e3d7f[_0xc701d0(0xc1)](_0x3944de)){_0x43d41b++;const _0x4cc641=new adm_zip_1[(_0xc701d0(0xf0))](_0xbd9f88['Body']);this[_0xc701d0(0xf1)]&&await this[_0xc701d0(0xca)](_0x4cc641),await(0x0,utils_1[_0xc701d0(0xb1)])(_0x4cc641,this['jobPath']);}}while(!_0x4a9d6d[_0xc701d0(0xb3)]());return _0x43d41b;}async[a60_0x526355(0xca)](_0x795311){const _0x521524=_0x795311['getEntries']();_0x521524['forEach'](_0x2515d6=>{const _0x4c8700=a60_0x2327,_0x3734ed=_0x2515d6[_0x4c8700(0xeb)],_0x46e748=_0x3734ed[_0x4c8700(0xc4)](_0x3734ed[_0x4c8700(0xac)]('.')+0x1);if(!EXCLUDED_TYPES[_0x4c8700(0xd6)](_0x46e748)){let _0x146cd7=_0x2515d6[_0x4c8700(0xdd)]()['toString'](_0x4c8700(0xea)),_0x1751f2=![];for(const _0x43aa9c in this[_0x4c8700(0xb8)]){const _0x3b5159='%%'+_0x43aa9c+'%%';if(_0x146cd7['indexOf'](_0x3b5159)!==-0x1){const _0x163834=new RegExp(_0x3b5159,'ig');_0x146cd7=_0x146cd7['replace'](_0x163834,this[_0x4c8700(0xb8)][_0x43aa9c]),_0x1751f2=!![];}}_0x1751f2&&_0x795311[_0x4c8700(0xd0)](_0x2515d6,Buffer[_0x4c8700(0xdf)](_0x146cd7,_0x4c8700(0xea)));}});}async['getComponentHistoryIds'](){const _0x4b7817=a60_0x526355,_0x1b1582=[],_0x1f0d13=new salesforce_2[(_0x4b7817(0xcc))]()[_0x4b7817(0xc8)]('Id')[_0x4b7817(0xdf)](this[_0x4b7817(0xd3)]+'Component__c')[_0x4b7817(0xad)](this[_0x4b7817(0xd3)]+_0x4b7817(0xe9),{'branchId':this[_0x4b7817(0xe3)]})[_0x4b7817(0xbe)](this[_0x4b7817(0xd3)]+_0x4b7817(0xb9),{'type':B2C_CARTRIDGE_TYPE})['build'](),_0x12c66c=new salesforce_2[(_0x4b7817(0xcc))]()[_0x4b7817(0xc8)]('Id')['from'](this[_0x4b7817(0xd3)]+_0x4b7817(0xbb))[_0x4b7817(0xad)](this['namespace']+_0x4b7817(0xf2)+_0x1f0d13+')')[_0x4b7817(0xbe)](this['namespace']+'isLastVersion__c\x20=\x20:isLastVersion',{'isLastVersion':!![]}),_0x15f9d0=new salesforce_2[(_0x4b7817(0xce))]({'api':this[_0x4b7817(0xe2)],'queryBuilder':_0x12c66c,'instance':this[_0x4b7817(0xd8)],'isTooling':![]});do{const _0xfd9147=await _0x15f9d0[_0x4b7817(0xcb)]()['then'](({records:_0xa71c80})=>_0xa71c80[_0x4b7817(0xbd)](_0x2a2caa=>_0x2a2caa['Id']));_0xfd9147[_0x4b7817(0xd1)]&&_0x1b1582[_0x4b7817(0xc5)](_0xfd9147);}while(!_0x15f9d0[_0x4b7817(0xb3)]());return _0x1b1582;}async[a60_0x526355(0xcb)](){const _0x26b44b=a60_0x526355,_0x31e177=await this['getComponentHistoryIds']();let _0x5d1deb=0x0;for(const _0x24ad07 of _0x31e177){_0x5d1deb+=await this[_0x26b44b(0xbc)](_0x24ad07);}await this['logger'][_0x26b44b(0xd9)](_0x26b44b(0xd2)+_0x5d1deb+'\x20file(s).');}}function a60_0x165b(){const _0x10b734=['2040756wjbnUF','search','keys','__importDefault','Name','BodyLength','lastIndexOf','where','Bulk1JobOperation','Bulk1RetrieveData','toString','extractAllToAsync','3736NIZlUK','getIsDone','150FdDiQL','BulkV1QueryContentType','ico','12838PBjszb','variables','Component_Type__c\x20=\x20:type','rar','Component_History__c','retriveAttachments','map','andWhere','@flosum/salesforce','3448518SdFJmg','pipe','./utils','svg','substring','push','otf','Body','select','__esModule','applyFlosumVariables','execute','QueryBuilder','constructor','CompositeRetrieveData','jpeg','updateFile','length','Retrieved\x20','namespace','Query','adm-zip','includes','(((.+)+)+)+$','axiosInstance','log','png','jobPath','gzip','getData','woff2','from','ttf','pdf','apiVersion','branchId','jpg','eot','37537ppFohb','CartridgeFile','2689730TgfrCS','Branch__c\x20=\x20:branchId','utf8','name','woff','1708065JejUZG','zip','4gBMHDv','default','isFlosumVariables','Component__c\x20IN\x20(','66462DEFRYC','ParentId\x20IN\x20(:componentHistoryIds)','10NhrurM'];a60_0x165b=function(){return _0x10b734;};return a60_0x165b();}exports[a60_0x526355(0xf0)]=RetrieveCartridges;