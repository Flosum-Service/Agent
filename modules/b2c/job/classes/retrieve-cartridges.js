const a60_0x8980a=a60_0x3399;(function(_0x1e7cbb,_0x606e9d){const _0x51a56e=a60_0x3399,_0x5628ff=_0x1e7cbb();while(!![]){try{const _0x179191=-parseInt(_0x51a56e(0x144))/0x1+-parseInt(_0x51a56e(0x141))/0x2*(parseInt(_0x51a56e(0x155))/0x3)+parseInt(_0x51a56e(0x15e))/0x4+-parseInt(_0x51a56e(0x13a))/0x5*(-parseInt(_0x51a56e(0x14b))/0x6)+-parseInt(_0x51a56e(0x136))/0x7+-parseInt(_0x51a56e(0x17c))/0x8+-parseInt(_0x51a56e(0x17b))/0x9*(-parseInt(_0x51a56e(0x173))/0xa);if(_0x179191===_0x606e9d)break;else _0x5628ff['push'](_0x5628ff['shift']());}catch(_0x93a369){_0x5628ff['push'](_0x5628ff['shift']());}}}(a60_0x3a80,0x84098));function a60_0x3399(_0x97d8bc,_0x4c7274){const _0x89d404=a60_0x3a80();return a60_0x3399=function(_0x7af426,_0xadc364){_0x7af426=_0x7af426-0x130;let _0x3a8008=_0x89d404[_0x7af426];return _0x3a8008;},a60_0x3399(_0x97d8bc,_0x4c7274);}const a60_0xadc364=(function(){let _0x2b3326=!![];return function(_0xba58d0,_0x572eae){const _0x4520fd=_0x2b3326?function(){const _0x1dea27=a60_0x3399;if(_0x572eae){const _0x2c3ad8=_0x572eae[_0x1dea27(0x159)](_0xba58d0,arguments);return _0x572eae=null,_0x2c3ad8;}}:function(){};return _0x2b3326=![],_0x4520fd;};}()),a60_0x7af426=a60_0xadc364(this,function(){const _0xe0419e=a60_0x3399;return a60_0x7af426[_0xe0419e(0x156)]()['search']('(((.+)+)+)+$')[_0xe0419e(0x156)]()[_0xe0419e(0x149)](a60_0x7af426)[_0xe0419e(0x179)](_0xe0419e(0x13e));});a60_0x7af426();'use strict';var __importDefault=this&&this[a60_0x8980a(0x165)]||function(_0x236eae){const _0x560df5=a60_0x8980a;return _0x236eae&&_0x236eae[_0x560df5(0x16e)]?_0x236eae:{'default':_0x236eae};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const salesforce_1=require(a60_0x8980a(0x163)),salesforce_2=require(a60_0x8980a(0x163)),utils_1=require('./utils'),adm_zip_1=__importDefault(require(a60_0x8980a(0x150))),B2C_CARTRIDGE_TYPE='CartridgeFile',BINARY_FIELDS=['Body'],EXCLUDED_TYPES=['jpg',a60_0x8980a(0x13c),'eot',a60_0x8980a(0x13b),a60_0x8980a(0x177),a60_0x8980a(0x15d),'woff','woff2',a60_0x8980a(0x170),a60_0x8980a(0x157),a60_0x8980a(0x15f),'rar',a60_0x8980a(0x148),a60_0x8980a(0x14c)];class RetrieveCartridges{constructor(_0x4a4faf,_0x4b3ac6,_0x1c017a,_0x43e619,_0x26ad0e,_0x5cd91f,_0xdaa4af){const _0x55e0c9=a60_0x8980a;this[_0x55e0c9(0x15c)]=_0x4a4faf,this[_0x55e0c9(0x180)]=_0x4b3ac6,this[_0x55e0c9(0x17f)]=_0x1c017a,this[_0x55e0c9(0x169)]=_0x43e619,this[_0x55e0c9(0x16f)]=_0x26ad0e,this[_0x55e0c9(0x14d)]=_0x5cd91f,this[_0x55e0c9(0x164)]=_0xdaa4af,this[_0x55e0c9(0x15a)]=![],this['isFlosumVariables']=Object['keys'](this[_0x55e0c9(0x14d)])[_0x55e0c9(0x134)]>0x0;}async[a60_0x8980a(0x160)](_0x56600a){const _0x1793bd=a60_0x8980a,_0x47f2ca=new salesforce_2[(_0x1793bd(0x16c))]()[_0x1793bd(0x130)](_0x1793bd(0x16a),_0x1793bd(0x131),_0x1793bd(0x152))[_0x1793bd(0x17e)](_0x1793bd(0x174))['where'](_0x1793bd(0x135),{'componentHistoryIds':_0x56600a}),_0x351bcc=new salesforce_1[(_0x1793bd(0x14f))]({'instance':this['axiosInstance'],'api':this[_0x1793bd(0x17f)],'pollInterval':0x1388,'queryBuilder':_0x47f2ca,'objectName':'Attachment','contentType':salesforce_1['BulkV1QueryContentType'][_0x1793bd(0x167)],'jobOperation':salesforce_1[_0x1793bd(0x146)][_0x1793bd(0x153)]});let _0x5f734f=0x0;do{const _0x17653e=await _0x351bcc[_0x1793bd(0x16d)]();if(!_0x17653e)break;const _0xc15058=new salesforce_2[(_0x1793bd(0x162))]({'binaryFields':BINARY_FIELDS});for await(const _0x28342a of _0x17653e[_0x1793bd(0x166)](_0xc15058)){_0x5f734f++;const _0x2fdc5a=new adm_zip_1['default'](_0x28342a[_0x1793bd(0x16a)]);this['isFlosumVariables']&&await this[_0x1793bd(0x132)](_0x2fdc5a),await(0x0,utils_1[_0x1793bd(0x14a)])(_0x2fdc5a,this[_0x1793bd(0x15c)]);}}while(!_0x351bcc[_0x1793bd(0x13f)]());return _0x5f734f;}async['applyFlosumVariables'](_0x613ed0){const _0x40eedc=a60_0x8980a,_0x40982b=_0x613ed0[_0x40eedc(0x171)]();_0x40982b[_0x40eedc(0x172)](_0x64d284=>{const _0x30a0de=_0x40eedc,_0x2c76f9=_0x64d284[_0x30a0de(0x137)],_0x310c57=_0x2c76f9[_0x30a0de(0x178)](_0x2c76f9[_0x30a0de(0x14e)]('.')+0x1);if(!EXCLUDED_TYPES[_0x30a0de(0x139)](_0x310c57)){let _0x482b4f=_0x64d284[_0x30a0de(0x145)]()[_0x30a0de(0x156)](_0x30a0de(0x16b)),_0x195036=![];for(const _0x11c9a3 in this[_0x30a0de(0x14d)]){const _0x496f99='%%'+_0x11c9a3+'%%';if(_0x482b4f[_0x30a0de(0x13d)](_0x496f99)!==-0x1){const _0x53f2d1=new RegExp(_0x496f99,'ig');_0x482b4f=_0x482b4f[_0x30a0de(0x151)](_0x53f2d1,this[_0x30a0de(0x14d)][_0x11c9a3]),_0x195036=!![];}}_0x195036&&_0x613ed0[_0x30a0de(0x175)](_0x64d284,Buffer[_0x30a0de(0x17e)](_0x482b4f,'utf8'));}});}async[a60_0x8980a(0x161)](){const _0x1dec7b=a60_0x8980a,_0x2a5068=[],_0x418230=new salesforce_2[(_0x1dec7b(0x16c))]()[_0x1dec7b(0x130)]('Id')[_0x1dec7b(0x17e)](this[_0x1dec7b(0x169)]+_0x1dec7b(0x15b))[_0x1dec7b(0x142)](this[_0x1dec7b(0x169)]+'Branch__c\x20=\x20:branchId',{'branchId':this[_0x1dec7b(0x16f)]})[_0x1dec7b(0x168)](this[_0x1dec7b(0x169)]+_0x1dec7b(0x17d),{'type':B2C_CARTRIDGE_TYPE})[_0x1dec7b(0x147)](),_0x43b33a=new salesforce_2[(_0x1dec7b(0x16c))]()[_0x1dec7b(0x130)]('Id')[_0x1dec7b(0x17e)](this['namespace']+_0x1dec7b(0x133))[_0x1dec7b(0x142)](this['namespace']+_0x1dec7b(0x138)+_0x418230+')')[_0x1dec7b(0x168)](this['namespace']+'isLastVersion__c\x20=\x20:isLastVersion',{'isLastVersion':!![]}),_0x5df03d=new salesforce_2[(_0x1dec7b(0x158))]({'api':this['apiVersion'],'queryBuilder':_0x43b33a,'instance':this[_0x1dec7b(0x180)],'isTooling':![]});do{const _0x14e904=await _0x5df03d[_0x1dec7b(0x16d)]()[_0x1dec7b(0x17a)](({records:_0x2fb72e})=>_0x2fb72e['map'](_0x309506=>_0x309506['Id']));_0x14e904['length']&&_0x2a5068[_0x1dec7b(0x143)](_0x14e904);}while(!_0x5df03d['getIsDone']());return _0x2a5068;}async[a60_0x8980a(0x16d)](){const _0x2ee12d=a60_0x8980a,_0xdb1079=await this[_0x2ee12d(0x161)]();let _0x3ee1ac=0x0;for(const _0x1f535c of _0xdb1079){_0x3ee1ac+=await this[_0x2ee12d(0x160)](_0x1f535c);}await this[_0x2ee12d(0x164)][_0x2ee12d(0x176)]('Retrieved\x20'+_0x3ee1ac+_0x2ee12d(0x140));}}exports[a60_0x8980a(0x154)]=RetrieveCartridges;function a60_0x3a80(){const _0x4cd001=['\x20file(s).','46196TvKuzJ','where','push','84911wzrDuy','getData','Bulk1JobOperation','build','gzip','constructor','extractAllToAsync','318462JrjodP','pdf','variables','lastIndexOf','Bulk1RetrieveData','adm-zip','replace','BodyLength','Query','default','69TEbMZv','toString','ico','CompositeRetrieveData','apply','isFlosumVariables','Component__c','jobPath','png','1270960sJgqcB','zip','retriveAttachments','getComponentHistoryIds','BulkXmlStreamParser','@flosum/salesforce','logger','__importDefault','pipe','APPLICATION_XML','andWhere','namespace','Body','utf8','QueryBuilder','execute','__esModule','branchId','ttf','getEntries','forEach','39770QoKzui','Attachment','updateFile','log','jpeg','substring','search','then','4077ASITUB','8572472SZBgal','Component_Type__c\x20=\x20:type','from','apiVersion','axiosInstance','select','Name','applyFlosumVariables','Component_History__c','length','ParentId\x20IN\x20(:componentHistoryIds)','5551574lRApeC','name','Component__c\x20IN\x20(','includes','85VOxLiO','otf','svg','indexOf','(((.+)+)+)+$','getIsDone'];a60_0x3a80=function(){return _0x4cd001;};return a60_0x3a80();}