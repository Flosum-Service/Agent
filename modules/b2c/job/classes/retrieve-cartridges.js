const a62_0x58baf3=a62_0x59e5;(function(_0x3b484e,_0x14769e){const _0x2cc281=a62_0x59e5,_0xe39740=_0x3b484e();while(!![]){try{const _0x3461f1=parseInt(_0x2cc281(0x17f))/0x1*(parseInt(_0x2cc281(0x1af))/0x2)+parseInt(_0x2cc281(0x1a6))/0x3+parseInt(_0x2cc281(0x1c1))/0x4*(-parseInt(_0x2cc281(0x1c0))/0x5)+-parseInt(_0x2cc281(0x1bf))/0x6+parseInt(_0x2cc281(0x1b8))/0x7+-parseInt(_0x2cc281(0x191))/0x8+parseInt(_0x2cc281(0x186))/0x9;if(_0x3461f1===_0x14769e)break;else _0xe39740['push'](_0xe39740['shift']());}catch(_0x3df564){_0xe39740['push'](_0xe39740['shift']());}}}(a62_0x9d4a,0x7b065));const a62_0x2cbda3=(function(){let _0x6d3cc3=!![];return function(_0x3e6084,_0x35885e){const _0x93d5e6=_0x6d3cc3?function(){const _0x2b2000=a62_0x59e5;if(_0x35885e){const _0x5ac664=_0x35885e[_0x2b2000(0x17c)](_0x3e6084,arguments);return _0x35885e=null,_0x5ac664;}}:function(){};return _0x6d3cc3=![],_0x93d5e6;};}()),a62_0x43300f=a62_0x2cbda3(this,function(){const _0x56ea28=a62_0x59e5;return a62_0x43300f['toString']()['search'](_0x56ea28(0x1aa))['toString']()[_0x56ea28(0x193)](a62_0x43300f)[_0x56ea28(0x1a8)]('(((.+)+)+)+$');});a62_0x43300f();function a62_0x59e5(_0x32d353,_0x528f17){const _0x46a8df=a62_0x9d4a();return a62_0x59e5=function(_0x43300f,_0x2cbda3){_0x43300f=_0x43300f-0x178;let _0x9d4add=_0x46a8df[_0x43300f];return _0x9d4add;},a62_0x59e5(_0x32d353,_0x528f17);}'use strict';var __importDefault=this&&this[a62_0x58baf3(0x1b0)]||function(_0x622e49){const _0xeca34c=a62_0x58baf3;return _0x622e49&&_0x622e49[_0xeca34c(0x197)]?_0x622e49:{'default':_0x622e49};};Object['defineProperty'](exports,a62_0x58baf3(0x197),{'value':!![]});const salesforce_1=require(a62_0x58baf3(0x1ac)),salesforce_2=require('@flosum/salesforce'),utils_1=require(a62_0x58baf3(0x192)),adm_zip_1=__importDefault(require(a62_0x58baf3(0x19b))),B2C_CARTRIDGE_TYPE=a62_0x58baf3(0x18d),BINARY_FIELDS=[a62_0x58baf3(0x1b2)],EXCLUDED_TYPES=[a62_0x58baf3(0x19a),'svg','eot',a62_0x58baf3(0x17d),a62_0x58baf3(0x196),a62_0x58baf3(0x1a0),a62_0x58baf3(0x181),'woff2',a62_0x58baf3(0x1ae),a62_0x58baf3(0x198),a62_0x58baf3(0x187),a62_0x58baf3(0x19c),'gzip','pdf'];class RetrieveCartridges{constructor(_0x55bf15,_0x40515b,_0xa97e30,_0x1a35ee,_0x402e15,_0x257ce4,_0x42fa88){const _0x551a0b=a62_0x58baf3;this[_0x551a0b(0x18c)]=_0x55bf15,this[_0x551a0b(0x1c5)]=_0x40515b,this['apiVersion']=_0xa97e30,this['namespace']=_0x1a35ee,this[_0x551a0b(0x185)]=_0x402e15,this[_0x551a0b(0x190)]=_0x257ce4,this[_0x551a0b(0x19d)]=_0x42fa88,this['isFlosumVariables']=![],this['isFlosumVariables']=Object[_0x551a0b(0x184)](this[_0x551a0b(0x190)])[_0x551a0b(0x17b)]>0x0;}async[a62_0x58baf3(0x1bd)](_0x2493ea){const _0x515bf7=a62_0x58baf3,_0x1e264c=new salesforce_2[(_0x515bf7(0x18f))]()[_0x515bf7(0x1b5)](_0x515bf7(0x1b2),_0x515bf7(0x1c4),_0x515bf7(0x1c2))[_0x515bf7(0x1a2)](_0x515bf7(0x182))[_0x515bf7(0x18b)](_0x515bf7(0x1bc),{'componentHistoryIds':_0x2493ea}),_0x39c4df=new salesforce_1[(_0x515bf7(0x1b6))]({'instance':this['axiosInstance'],'api':this[_0x515bf7(0x1a9)],'pollInterval':0x1388,'queryBuilder':_0x1e264c,'objectName':_0x515bf7(0x182),'contentType':salesforce_1['BulkV1QueryContentType'][_0x515bf7(0x180)],'jobOperation':salesforce_1['Bulk1JobOperation'][_0x515bf7(0x18a)]});let _0x110de2=0x0;do{const _0x15d3c9=await _0x39c4df[_0x515bf7(0x1b3)]();if(!_0x15d3c9)break;const _0x10c9c9=new salesforce_2[(_0x515bf7(0x1a1))]({'binaryFields':BINARY_FIELDS});for await(const _0x4f448d of _0x15d3c9[_0x515bf7(0x1b4)](_0x10c9c9)){_0x110de2++;const _0x4b1d41=new adm_zip_1[(_0x515bf7(0x179))](_0x4f448d['Body']);this[_0x515bf7(0x1bb)]&&await this['applyFlosumVariables'](_0x4b1d41),await(0x0,utils_1[_0x515bf7(0x1be)])(_0x4b1d41,this['jobPath']);}}while(!_0x39c4df[_0x515bf7(0x188)]());return _0x110de2;}async[a62_0x58baf3(0x1b1)](_0x540d4a){const _0xe6ba64=a62_0x58baf3,_0x2c07c3=_0x540d4a[_0xe6ba64(0x1ab)]();_0x2c07c3[_0xe6ba64(0x1a7)](_0x1ec3c5=>{const _0x9109d5=_0xe6ba64,_0x11e84a=_0x1ec3c5[_0x9109d5(0x1b7)],_0x38bad2=_0x11e84a['substring'](_0x11e84a[_0x9109d5(0x1ad)]('.')+0x1);if(!EXCLUDED_TYPES['includes'](_0x38bad2)){let _0x98c0f0=_0x1ec3c5[_0x9109d5(0x195)]()['toString'](_0x9109d5(0x1a5)),_0x26bbd6=![];for(const _0x5e1d8a in this[_0x9109d5(0x190)]){const _0x23d678='%%'+_0x5e1d8a+'%%';if(_0x98c0f0[_0x9109d5(0x19e)](_0x23d678)!==-0x1){const _0x22931a=new RegExp(_0x23d678,'ig');_0x98c0f0=_0x98c0f0['replace'](_0x22931a,this[_0x9109d5(0x190)][_0x5e1d8a]),_0x26bbd6=!![];}}_0x26bbd6&&_0x540d4a[_0x9109d5(0x1a4)](_0x1ec3c5,Buffer[_0x9109d5(0x1a2)](_0x98c0f0,_0x9109d5(0x1a5)));}});}async[a62_0x58baf3(0x199)](){const _0x3b68fa=a62_0x58baf3,_0x6177ea=[],_0x2ddef3=new salesforce_2[(_0x3b68fa(0x18f))]()[_0x3b68fa(0x1b5)]('Id')[_0x3b68fa(0x1a2)](this['namespace']+_0x3b68fa(0x189))[_0x3b68fa(0x18b)](this[_0x3b68fa(0x1a3)]+_0x3b68fa(0x1ba),{'branchId':this[_0x3b68fa(0x185)]})[_0x3b68fa(0x17e)](this[_0x3b68fa(0x1a3)]+_0x3b68fa(0x178),{'type':B2C_CARTRIDGE_TYPE})[_0x3b68fa(0x183)](),_0x389c2c=new salesforce_2['QueryBuilder']()[_0x3b68fa(0x1b5)]('Id')[_0x3b68fa(0x1a2)](this['namespace']+_0x3b68fa(0x194))[_0x3b68fa(0x18b)](this[_0x3b68fa(0x1a3)]+_0x3b68fa(0x1b9)+_0x2ddef3+')')[_0x3b68fa(0x17e)](this[_0x3b68fa(0x1a3)]+_0x3b68fa(0x18e),{'isLastVersion':!![]}),_0x5c8dd8=new salesforce_2[(_0x3b68fa(0x17a))]({'api':this[_0x3b68fa(0x1a9)],'queryBuilder':_0x389c2c,'instance':this[_0x3b68fa(0x1c5)],'isTooling':![]});do{const _0x46f4ad=await _0x5c8dd8['execute']()[_0x3b68fa(0x19f)](({records:_0x499295})=>_0x499295['map'](_0x57bbb5=>_0x57bbb5['Id']));_0x46f4ad[_0x3b68fa(0x17b)]&&_0x6177ea[_0x3b68fa(0x1c3)](_0x46f4ad);}while(!_0x5c8dd8[_0x3b68fa(0x188)]());return _0x6177ea;}async[a62_0x58baf3(0x1b3)](){const _0x4ad059=a62_0x58baf3,_0x1a3f15=await this[_0x4ad059(0x199)]();let _0x3d56fd=0x0;for(const _0x697c02 of _0x1a3f15){_0x3d56fd+=await this[_0x4ad059(0x1bd)](_0x697c02);}await this[_0x4ad059(0x19d)]['log']('Retrieved\x20'+_0x3d56fd+'\x20file(s).');}}exports[a62_0x58baf3(0x179)]=RetrieveCartridges;function a62_0x9d4a(){const _0x5979cf=['1755SvNQjF','APPLICATION_XML','woff','Attachment','build','keys','branchId','9376893kUANsv','zip','getIsDone','Component__c','Query','where','jobPath','CartridgeFile','isLastVersion__c\x20=\x20:isLastVersion','QueryBuilder','variables','8002960APljix','./utils','constructor','Component_History__c','getData','jpeg','__esModule','ico','getComponentHistoryIds','jpg','adm-zip','rar','logger','indexOf','then','png','BulkXmlStreamParser','from','namespace','updateFile','utf8','2262513AZzcDf','forEach','search','apiVersion','(((.+)+)+)+$','getEntries','@flosum/salesforce','lastIndexOf','ttf','702bXyjki','__importDefault','applyFlosumVariables','Body','execute','pipe','select','Bulk1RetrieveData','name','5570152SSctNM','Component__c\x20IN\x20(','Branch__c\x20=\x20:branchId','isFlosumVariables','ParentId\x20IN\x20(:componentHistoryIds)','retriveAttachments','extractAllToAsync','5624250uuRFly','365yJhcZn','41980KWMmmm','BodyLength','push','Name','axiosInstance','Component_Type__c\x20=\x20:type','default','CompositeRetrieveData','length','apply','otf','andWhere'];a62_0x9d4a=function(){return _0x5979cf;};return a62_0x9d4a();}