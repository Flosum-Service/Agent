function a62_0x100f(_0x30372f,_0x5a0c66){const _0x5da2d=a62_0xa905();return a62_0x100f=function(_0x2d23b5,_0x22d48f){_0x2d23b5=_0x2d23b5-0x159;let _0xa9059a=_0x5da2d[_0x2d23b5];return _0xa9059a;},a62_0x100f(_0x30372f,_0x5a0c66);}const a62_0x561c41=a62_0x100f;(function(_0x2f67af,_0x7fdc7b){const _0x203842=a62_0x100f,_0x3c34f1=_0x2f67af();while(!![]){try{const _0x252d9f=parseInt(_0x203842(0x16a))/0x1*(parseInt(_0x203842(0x168))/0x2)+-parseInt(_0x203842(0x198))/0x3+-parseInt(_0x203842(0x175))/0x4+parseInt(_0x203842(0x17e))/0x5*(parseInt(_0x203842(0x18d))/0x6)+parseInt(_0x203842(0x19d))/0x7*(parseInt(_0x203842(0x160))/0x8)+parseInt(_0x203842(0x1a0))/0x9+-parseInt(_0x203842(0x190))/0xa;if(_0x252d9f===_0x7fdc7b)break;else _0x3c34f1['push'](_0x3c34f1['shift']());}catch(_0x67d154){_0x3c34f1['push'](_0x3c34f1['shift']());}}}(a62_0xa905,0x89718));const a62_0x22d48f=(function(){let _0x3322bc=!![];return function(_0x1060f0,_0x31439d){const _0xfd7993=_0x3322bc?function(){const _0x189f56=a62_0x100f;if(_0x31439d){const _0x1ffaed=_0x31439d[_0x189f56(0x19e)](_0x1060f0,arguments);return _0x31439d=null,_0x1ffaed;}}:function(){};return _0x3322bc=![],_0xfd7993;};}()),a62_0x2d23b5=a62_0x22d48f(this,function(){const _0x157034=a62_0x100f;return a62_0x2d23b5[_0x157034(0x164)]()['search'](_0x157034(0x179))[_0x157034(0x164)]()['constructor'](a62_0x2d23b5)['search'](_0x157034(0x179));});a62_0x2d23b5();function a62_0xa905(){const _0x7c45ad=['Bulk1JobOperation','adm-zip','2292280kidlGs','CompositeRetrieveData','name','andWhere','select','substring','apiVersion','includes','2643912wNykqz','getComponentHistoryIds','BulkXmlStreamParser','woff2','lastIndexOf','213549BMGNJE','apply','logger','7644843vKlhWE','__esModule','Component__c','map','length','QueryBuilder','push','svg','eot','Branch__c\x20=\x20:branchId','./utils','woff','getData','CartridgeFile','gzip','isFlosumVariables','32ggwdhN','Component_History__c','forEach','log','toString','BodyLength','Name','defineProperty','5354OGBpBE','Body','239uYxVzr','getIsDone','from','branchId','Component_Type__c\x20=\x20:type','Query','namespace','variables','default','applyFlosumVariables','__importDefault','945416YEequj','pipe','indexOf','keys','(((.+)+)+)+$','pdf','Bulk1RetrieveData','axiosInstance','rar','835YxeVhC','where','ttf','jpeg','execute','Retrieved\x20','Attachment','replace','isLastVersion__c\x20=\x20:isLastVersion','APPLICATION_XML','updateFile','utf8','jobPath','otf','@flosum/salesforce','10728cqldjh'];a62_0xa905=function(){return _0x7c45ad;};return a62_0xa905();}'use strict';var __importDefault=this&&this[a62_0x561c41(0x174)]||function(_0x135870){const _0x5ec834=a62_0x561c41;return _0x135870&&_0x135870[_0x5ec834(0x1a1)]?_0x135870:{'default':_0x135870};};Object[a62_0x561c41(0x167)](exports,'__esModule',{'value':!![]});const salesforce_1=require('@flosum/salesforce'),salesforce_2=require(a62_0x561c41(0x18c)),utils_1=require(a62_0x561c41(0x15a)),adm_zip_1=__importDefault(require(a62_0x561c41(0x18f))),B2C_CARTRIDGE_TYPE=a62_0x561c41(0x15d),BINARY_FIELDS=[a62_0x561c41(0x169)],EXCLUDED_TYPES=['jpg',a62_0x561c41(0x1a7),a62_0x561c41(0x1a8),a62_0x561c41(0x18b),a62_0x561c41(0x181),'png',a62_0x561c41(0x15b),a62_0x561c41(0x19b),a62_0x561c41(0x180),'ico','zip',a62_0x561c41(0x17d),a62_0x561c41(0x15e),a62_0x561c41(0x17a)];class RetrieveCartridges{constructor(_0x4dc3bc,_0x5e0876,_0x4c0c4b,_0x29d123,_0x757819,_0x507767,_0x4e4fab){const _0x41d13e=a62_0x561c41;this[_0x41d13e(0x18a)]=_0x4dc3bc,this[_0x41d13e(0x17c)]=_0x5e0876,this[_0x41d13e(0x196)]=_0x4c0c4b,this[_0x41d13e(0x170)]=_0x29d123,this[_0x41d13e(0x16d)]=_0x757819,this[_0x41d13e(0x171)]=_0x507767,this[_0x41d13e(0x19f)]=_0x4e4fab,this[_0x41d13e(0x15f)]=![],this[_0x41d13e(0x15f)]=Object[_0x41d13e(0x178)](this[_0x41d13e(0x171)])[_0x41d13e(0x1a4)]>0x0;}async['retriveAttachments'](_0x2ba9fe){const _0xf38d2a=a62_0x561c41,_0x15aa87=new salesforce_2[(_0xf38d2a(0x1a5))]()[_0xf38d2a(0x194)](_0xf38d2a(0x169),_0xf38d2a(0x166),_0xf38d2a(0x165))[_0xf38d2a(0x16c)](_0xf38d2a(0x184))['where']('ParentId\x20IN\x20(:componentHistoryIds)',{'componentHistoryIds':_0x2ba9fe}),_0x5c1113=new salesforce_1[(_0xf38d2a(0x17b))]({'instance':this[_0xf38d2a(0x17c)],'api':this[_0xf38d2a(0x196)],'pollInterval':0x1388,'queryBuilder':_0x15aa87,'objectName':_0xf38d2a(0x184),'contentType':salesforce_1['BulkV1QueryContentType'][_0xf38d2a(0x187)],'jobOperation':salesforce_1[_0xf38d2a(0x18e)][_0xf38d2a(0x16f)]});let _0x173096=0x0;do{const _0xb776f5=await _0x5c1113[_0xf38d2a(0x182)]();if(!_0xb776f5)break;const _0x355695=new salesforce_2[(_0xf38d2a(0x19a))]({'binaryFields':BINARY_FIELDS});for await(const _0x1e46cd of _0xb776f5[_0xf38d2a(0x176)](_0x355695)){_0x173096++;const _0x51a49d=new adm_zip_1[(_0xf38d2a(0x172))](_0x1e46cd[_0xf38d2a(0x169)]);this[_0xf38d2a(0x15f)]&&await this[_0xf38d2a(0x173)](_0x51a49d),await(0x0,utils_1['extractAllToAsync'])(_0x51a49d,this[_0xf38d2a(0x18a)]);}}while(!_0x5c1113[_0xf38d2a(0x16b)]());return _0x173096;}async[a62_0x561c41(0x173)](_0x12d8d5){const _0x1fd41f=a62_0x561c41,_0x3fe779=_0x12d8d5['getEntries']();_0x3fe779[_0x1fd41f(0x162)](_0x596041=>{const _0xa8903a=_0x1fd41f,_0x20d541=_0x596041[_0xa8903a(0x192)],_0x4c7ec8=_0x20d541[_0xa8903a(0x195)](_0x20d541[_0xa8903a(0x19c)]('.')+0x1);if(!EXCLUDED_TYPES[_0xa8903a(0x197)](_0x4c7ec8)){let _0x3a528b=_0x596041[_0xa8903a(0x15c)]()[_0xa8903a(0x164)](_0xa8903a(0x189)),_0x292f18=![];for(const _0x2173c9 in this[_0xa8903a(0x171)]){const _0x1c9856='%%'+_0x2173c9+'%%';if(_0x3a528b[_0xa8903a(0x177)](_0x1c9856)!==-0x1){const _0x3456b1=new RegExp(_0x1c9856,'ig');_0x3a528b=_0x3a528b[_0xa8903a(0x185)](_0x3456b1,this[_0xa8903a(0x171)][_0x2173c9]),_0x292f18=!![];}}_0x292f18&&_0x12d8d5[_0xa8903a(0x188)](_0x596041,Buffer[_0xa8903a(0x16c)](_0x3a528b,'utf8'));}});}async['getComponentHistoryIds'](){const _0x556528=a62_0x561c41,_0x590c10=[],_0x433eba=new salesforce_2['QueryBuilder']()[_0x556528(0x194)]('Id')[_0x556528(0x16c)](this[_0x556528(0x170)]+_0x556528(0x1a2))[_0x556528(0x17f)](this[_0x556528(0x170)]+_0x556528(0x159),{'branchId':this[_0x556528(0x16d)]})[_0x556528(0x193)](this['namespace']+_0x556528(0x16e),{'type':B2C_CARTRIDGE_TYPE})['build'](),_0xabda56=new salesforce_2[(_0x556528(0x1a5))]()['select']('Id')['from'](this[_0x556528(0x170)]+_0x556528(0x161))[_0x556528(0x17f)](this[_0x556528(0x170)]+'Component__c\x20IN\x20('+_0x433eba+')')[_0x556528(0x193)](this[_0x556528(0x170)]+_0x556528(0x186),{'isLastVersion':!![]}),_0x43c911=new salesforce_2[(_0x556528(0x191))]({'api':this[_0x556528(0x196)],'queryBuilder':_0xabda56,'instance':this['axiosInstance'],'isTooling':![]});do{const _0x27cf9b=await _0x43c911['execute']()['then'](({records:_0x28d627})=>_0x28d627[_0x556528(0x1a3)](_0x3ce332=>_0x3ce332['Id']));_0x27cf9b['length']&&_0x590c10[_0x556528(0x1a6)](_0x27cf9b);}while(!_0x43c911[_0x556528(0x16b)]());return _0x590c10;}async[a62_0x561c41(0x182)](){const _0x3554ed=a62_0x561c41,_0x534238=await this[_0x3554ed(0x199)]();let _0x1c768c=0x0;for(const _0x4f30c2 of _0x534238){_0x1c768c+=await this['retriveAttachments'](_0x4f30c2);}await this[_0x3554ed(0x19f)][_0x3554ed(0x163)](_0x3554ed(0x183)+_0x1c768c+'\x20file(s).');}}exports[a62_0x561c41(0x172)]=RetrieveCartridges;