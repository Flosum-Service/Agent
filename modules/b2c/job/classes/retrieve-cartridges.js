const a62_0xcd4ce9=a62_0x1e02;(function(_0x34b7cb,_0x13751f){const _0x3d3db8=a62_0x1e02,_0x76f10=_0x34b7cb();while(!![]){try{const _0x508459=-parseInt(_0x3d3db8(0x138))/0x1*(-parseInt(_0x3d3db8(0x15e))/0x2)+-parseInt(_0x3d3db8(0x133))/0x3*(-parseInt(_0x3d3db8(0x115))/0x4)+parseInt(_0x3d3db8(0x132))/0x5+parseInt(_0x3d3db8(0x12f))/0x6*(parseInt(_0x3d3db8(0x14e))/0x7)+parseInt(_0x3d3db8(0x14f))/0x8*(parseInt(_0x3d3db8(0x127))/0x9)+-parseInt(_0x3d3db8(0x15a))/0xa+parseInt(_0x3d3db8(0x112))/0xb*(-parseInt(_0x3d3db8(0x165))/0xc);if(_0x508459===_0x13751f)break;else _0x76f10['push'](_0x76f10['shift']());}catch(_0x327403){_0x76f10['push'](_0x76f10['shift']());}}}(a62_0x5ac8,0xb79ad));const a62_0x2972c3=(function(){let _0x424f23=!![];return function(_0xe9a10a,_0x467cc5){const _0x4df008=_0x424f23?function(){const _0x278ea3=a62_0x1e02;if(_0x467cc5){const _0x34273b=_0x467cc5[_0x278ea3(0x12c)](_0xe9a10a,arguments);return _0x467cc5=null,_0x34273b;}}:function(){};return _0x424f23=![],_0x4df008;};}()),a62_0x3f3c50=a62_0x2972c3(this,function(){const _0x53c216=a62_0x1e02;return a62_0x3f3c50[_0x53c216(0x139)]()['search'](_0x53c216(0x11c))['toString']()[_0x53c216(0x155)](a62_0x3f3c50)[_0x53c216(0x143)]('(((.+)+)+)+$');});a62_0x3f3c50();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x6ed837){const _0x24d4c0=a62_0x1e02;return _0x6ed837&&_0x6ed837[_0x24d4c0(0x123)]?_0x6ed837:{'default':_0x6ed837};};Object[a62_0xcd4ce9(0x14a)](exports,a62_0xcd4ce9(0x123),{'value':!![]});const salesforce_1=require(a62_0xcd4ce9(0x118)),salesforce_2=require('@flosum/salesforce'),utils_1=require(a62_0xcd4ce9(0x11f)),fs_internal_1=require('../../../git/internal/fs.internal'),path_1=require(a62_0xcd4ce9(0x16f)),promises_1=require(a62_0xcd4ce9(0x149)),constants_1=require(a62_0xcd4ce9(0x13c)),adm_zip_1=__importDefault(require(a62_0xcd4ce9(0x13f))),path_2=__importDefault(require(a62_0xcd4ce9(0x142))),utils_2=require(a62_0xcd4ce9(0x140)),chunkSize=0x1f4,B2C_CARTRIDGE_TYPE='CartridgeFile',BINARY_FIELDS=[a62_0xcd4ce9(0x152)],EXCLUDED_TYPES=[a62_0xcd4ce9(0x10e),'svg',a62_0xcd4ce9(0x147),a62_0xcd4ce9(0x168),'jpeg',a62_0xcd4ce9(0x11e),a62_0xcd4ce9(0x14b),a62_0xcd4ce9(0x124),'ttf',a62_0xcd4ce9(0x114),'zip',a62_0xcd4ce9(0x13d),'gzip',a62_0xcd4ce9(0x10b)];function a62_0x1e02(_0x4e9c0d,_0x3f02ea){const _0x261a17=a62_0x5ac8();return a62_0x1e02=function(_0x3f3c50,_0x2972c3){_0x3f3c50=_0x3f3c50-0x108;let _0x5ac879=_0x261a17[_0x3f3c50];return _0x5ac879;},a62_0x1e02(_0x4e9c0d,_0x3f02ea);}class RetrieveCartridges{constructor(_0x518a41,_0x4a8dd4,_0x1b7572,_0x177ed1,_0x11863d,_0x1e6d8c,_0x55b223,_0x1a09ba,_0x1b20fe){const _0x20d718=a62_0xcd4ce9;this[_0x20d718(0x136)]=_0x518a41,this[_0x20d718(0x158)]=_0x4a8dd4,this[_0x20d718(0x159)]=_0x1b7572,this[_0x20d718(0x120)]=_0x177ed1,this['branchId']=_0x11863d,this[_0x20d718(0x164)]=_0x1e6d8c,this['logger']=_0x55b223,this[_0x20d718(0x146)]=_0x1a09ba,this['variables']=_0x1b20fe,this['isFlosumVariables']=![],_0x1b20fe&&(this[_0x20d718(0x170)]=Object[_0x20d718(0x10f)](_0x1b20fe)[_0x20d718(0x15c)]>0x0);}async[a62_0xcd4ce9(0x167)](_0x153b46,_0x5c9a49){const _0x460af8=a62_0xcd4ce9,_0x23e284=new salesforce_2[(_0x460af8(0x154))]()[_0x460af8(0x16c)](_0x460af8(0x152),_0x460af8(0x161),'BodyLength')[_0x460af8(0x122)](_0x460af8(0x169))[_0x460af8(0x12a)](_0x460af8(0x157),{'parentIdIds':_0x153b46});_0x5c9a49&&_0x23e284['andWhere'](_0x460af8(0x12d),{'names':_0x5c9a49});!await fs_internal_1['FS'][_0x460af8(0x119)](path_1[_0x460af8(0x13e)])&&await(0x0,promises_1[_0x460af8(0x14c)])(path_1[_0x460af8(0x13e)],{'recursive':!![]});const _0x274a98=new salesforce_1[(_0x460af8(0x160))]({'instance':this[_0x460af8(0x158)],'api':this[_0x460af8(0x159)],'pollInterval':0x1388,'queryBuilder':_0x23e284,'objectName':_0x460af8(0x169),'contentType':salesforce_1['BulkV1QueryContentType']['APPLICATION_XML'],'jobOperation':salesforce_1[_0x460af8(0x130)][_0x460af8(0x15d)],'tmpPath':path_1[_0x460af8(0x13e)]}),_0x491146=[];do{const _0x4302e1=await _0x274a98[_0x460af8(0x16a)]();if(!_0x4302e1)break;const _0x39c843=new salesforce_2['BulkXmlStreamParser']({'binaryFields':BINARY_FIELDS});for await(const _0x456676 of _0x4302e1[_0x460af8(0x141)](_0x39c843)){_0x491146['push'](_0x456676[_0x460af8(0x152)]);}}while(!_0x274a98[_0x460af8(0x126)]());return _0x491146;}async[a62_0xcd4ce9(0x16d)](_0x5df1a2){const _0x5f2898=a62_0xcd4ce9,_0x29962b=_0x5df1a2[_0x5f2898(0x10d)]();_0x29962b[_0x5f2898(0x156)](_0x53b759=>{const _0xd62368=_0x5f2898,_0x16163b=_0x53b759[_0xd62368(0x135)],_0x3da13c=_0x16163b[_0xd62368(0x14d)](_0x16163b[_0xd62368(0x134)]('.')+0x1);if(!EXCLUDED_TYPES[_0xd62368(0x117)](_0x3da13c)){let _0x476123=_0x53b759[_0xd62368(0x13a)]()[_0xd62368(0x139)](_0xd62368(0x129)),_0x8939fe=![];for(const _0x46d465 in this[_0xd62368(0x113)]){const _0x1b059d='%%'+_0x46d465+'%%';if(_0x476123[_0xd62368(0x110)](_0x1b059d)!==-0x1){const _0x539435=new RegExp(_0x1b059d,'ig');_0x476123=_0x476123[_0xd62368(0x108)](_0x539435,this[_0xd62368(0x113)][_0x46d465]),_0x8939fe=!![];}}_0x8939fe&&_0x5df1a2['updateFile'](_0x53b759,Buffer[_0xd62368(0x122)](_0x476123,_0xd62368(0x129)));}});}async[a62_0xcd4ce9(0x144)](_0x30699f){const _0x5827d6=a62_0xcd4ce9,_0x1e3df9=[];for(const _0x1039c7 of utils_2[_0x5827d6(0x137)][_0x5827d6(0x10a)](_0x30699f,chunkSize)){const _0x4b9e91=new salesforce_2[(_0x5827d6(0x154))]()['select']('Id')[_0x5827d6(0x122)](this[_0x5827d6(0x120)]+_0x5827d6(0x148))[_0x5827d6(0x12a)](this[_0x5827d6(0x120)]+_0x5827d6(0x145),{'branchId':this[_0x5827d6(0x10c)]})['andWhere'](this[_0x5827d6(0x120)]+_0x5827d6(0x11a),{'type':B2C_CARTRIDGE_TYPE})[_0x5827d6(0x128)](_0x5827d6(0x163),{'componentIds':_0x1039c7})['build'](),_0x524da4=new salesforce_2['QueryBuilder']()['select']('Id')[_0x5827d6(0x122)](this[_0x5827d6(0x120)]+_0x5827d6(0x11d))[_0x5827d6(0x12a)](this['namespace']+_0x5827d6(0x150)+_0x4b9e91+')')[_0x5827d6(0x128)](this[_0x5827d6(0x120)]+_0x5827d6(0x15b),{'isLastVersion':!![]}),_0x18649b=new salesforce_2[(_0x5827d6(0x111))]({'api':this[_0x5827d6(0x159)],'queryBuilder':_0x524da4,'instance':this[_0x5827d6(0x158)],'isTooling':![]});do{const _0xb5457b=await _0x18649b[_0x5827d6(0x16a)]()[_0x5827d6(0x109)](({records:_0x231552})=>_0x231552['map'](_0x5248bb=>_0x5248bb['Id']));_0xb5457b['length']&&_0x1e3df9[_0x5827d6(0x151)](_0xb5457b);}while(!_0x18649b[_0x5827d6(0x126)]());}return _0x1e3df9;}async[a62_0xcd4ce9(0x15f)](){const _0x16d98a=a62_0xcd4ce9,_0x475cc3=path_2['default']['join'](this[_0x16d98a(0x136)],constants_1[_0x16d98a(0x12e)]);await(0x0,promises_1[_0x16d98a(0x14c)])(_0x475cc3);const [_0x2d3d49]=await this[_0x16d98a(0x167)]([this[_0x16d98a(0x164)]],[constants_1[_0x16d98a(0x16e)]]);if(!_0x2d3d49)throw new Error(_0x16d98a(0x121)+constants_1[_0x16d98a(0x16e)]+_0x16d98a(0x131));return await(0x0,promises_1[_0x16d98a(0x12b)])(path_2[_0x16d98a(0x13b)]['join'](_0x475cc3,constants_1[_0x16d98a(0x16e)]),_0x2d3d49),JSON[_0x16d98a(0x125)](_0x2d3d49[_0x16d98a(0x139)]());}async[a62_0xcd4ce9(0x16a)](){const _0x42c419=a62_0xcd4ce9;await this[_0x42c419(0x162)][_0x42c419(0x16b)](_0x42c419(0x11b));const _0x45141e=await this[_0x42c419(0x15f)](),_0x3fff7f=await this[_0x42c419(0x144)](_0x45141e);let _0xdfeed5=0x0;for(const _0x39e48f of utils_2[_0x42c419(0x137)]['splitOnChunks'](_0x3fff7f,chunkSize)){for(const _0xa41c64 of await this[_0x42c419(0x167)](_0x39e48f)){const _0x188784=new adm_zip_1[(_0x42c419(0x13b))](_0xa41c64);this[_0x42c419(0x170)]&&await this[_0x42c419(0x16d)](_0x188784),await(0x0,utils_1[_0x42c419(0x116)])(_0x188784,this[_0x42c419(0x136)]),_0xdfeed5++;}}await this[_0x42c419(0x162)]['log'](_0x42c419(0x166)+_0xdfeed5+_0x42c419(0x153));}}exports[a62_0xcd4ce9(0x13b)]=RetrieveCartridges;function a62_0x5ac8(){const _0x53529f=['defineProperty','woff','mkdir','substring','42WdHxhj','209752IWunBm','Component__c\x20IN\x20(','push','Body','\x20file(s).','QueryBuilder','constructor','forEach','ParentId\x20IN\x20(:parentIdIds)','axiosInstance','apiVersion','5934700RWuCcg','isLastVersion__c\x20=\x20:isLastVersion','length','Query','110598XvWgWf','getSelectedComponentIds','Bulk1RetrieveData','Name','logger','Id\x20IN\x20(:componentIds)','metadataLogId','12pzAbsl','Retrieved\x20','retrieveAttachments','otf','Attachment','execute','log','select','applyFlosumVariables','FLOSUM_LIST_COMPONENTS_ATTACHMENT_NAME','../../../../configs/path','isFlosumVariables','replace','then','splitOnChunks','pdf','branchId','getEntries','jpg','keys','indexOf','CompositeRetrieveData','33371162DMHAGS','variables','ico','312380kLUdtR','extractAllToAsync','includes','@flosum/salesforce','exists','Component_Type__c\x20=\x20:type','Get\x20list\x20of\x20components.','(((.+)+)+)+$','Component_History__c','png','./utils','namespace','File\x20\x22','from','__esModule','woff2','parse','getIsDone','261xMQdwl','andWhere','utf8','where','writeFile','apply','Name\x20IN\x20(:names)','DEFAULT_CARTRIDGES_FOLDER','736014zaJLZY','Bulk1JobOperation','\x22\x20not\x20found.','1742030AybnWU','57XUBllr','lastIndexOf','name','jobPath','ArrayUtils','19mpizWq','toString','getData','default','../../constants','rar','tmpPath','adm-zip','@flosum/utils','pipe','path','search','getComponentHistoryIds','Branch__c\x20=\x20:branchId','systemLogger','eot','Component__c','fs/promises'];a62_0x5ac8=function(){return _0x53529f;};return a62_0x5ac8();}