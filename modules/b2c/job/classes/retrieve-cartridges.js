const a62_0x33c910=a62_0x5635;(function(_0x5924b0,_0x590f3f){const _0x1de4ec=a62_0x5635,_0x578d69=_0x5924b0();while(!![]){try{const _0x40fc36=-parseInt(_0x1de4ec(0xdb))/0x1*(-parseInt(_0x1de4ec(0x106))/0x2)+-parseInt(_0x1de4ec(0xf4))/0x3*(-parseInt(_0x1de4ec(0xe7))/0x4)+parseInt(_0x1de4ec(0xcd))/0x5+-parseInt(_0x1de4ec(0xce))/0x6+parseInt(_0x1de4ec(0x109))/0x7+parseInt(_0x1de4ec(0xea))/0x8+-parseInt(_0x1de4ec(0xd4))/0x9*(parseInt(_0x1de4ec(0xfe))/0xa);if(_0x40fc36===_0x590f3f)break;else _0x578d69['push'](_0x578d69['shift']());}catch(_0x455af3){_0x578d69['push'](_0x578d69['shift']());}}}(a62_0x3c46,0x94729));const a62_0x5f59f3=(function(){let _0x15a711=!![];return function(_0x56d73f,_0x333a64){const _0x143b73=_0x15a711?function(){const _0x4e6ad1=a62_0x5635;if(_0x333a64){const _0x5e3393=_0x333a64[_0x4e6ad1(0x101)](_0x56d73f,arguments);return _0x333a64=null,_0x5e3393;}}:function(){};return _0x15a711=![],_0x143b73;};}()),a62_0x239a1f=a62_0x5f59f3(this,function(){const _0x1ac81c=a62_0x5635;return a62_0x239a1f['toString']()[_0x1ac81c(0x10a)](_0x1ac81c(0xe3))['toString']()[_0x1ac81c(0xe0)](a62_0x239a1f)[_0x1ac81c(0x10a)](_0x1ac81c(0xe3));});a62_0x239a1f();'use strict';var __importDefault=this&&this[a62_0x33c910(0xcb)]||function(_0x3bf6e7){return _0x3bf6e7&&_0x3bf6e7['__esModule']?_0x3bf6e7:{'default':_0x3bf6e7};};Object[a62_0x33c910(0xca)](exports,a62_0x33c910(0x10d),{'value':!![]});const salesforce_1=require(a62_0x33c910(0xc5)),salesforce_2=require(a62_0x33c910(0xc5)),utils_1=require(a62_0x33c910(0xc8)),adm_zip_1=__importDefault(require('adm-zip')),B2C_CARTRIDGE_TYPE=a62_0x33c910(0xf8),BINARY_FIELDS=[a62_0x33c910(0xf3)],EXCLUDED_TYPES=[a62_0x33c910(0xde),a62_0x33c910(0x112),'eot',a62_0x33c910(0xf2),a62_0x33c910(0xe5),a62_0x33c910(0xd8),a62_0x33c910(0xc4),'woff2',a62_0x33c910(0x110),a62_0x33c910(0xec),a62_0x33c910(0xe1),a62_0x33c910(0x10b),'gzip','pdf'];function a62_0x5635(_0x2aff9c,_0xdd27e6){const _0x50888c=a62_0x3c46();return a62_0x5635=function(_0x239a1f,_0x5f59f3){_0x239a1f=_0x239a1f-0xc4;let _0x3c462b=_0x50888c[_0x239a1f];return _0x3c462b;},a62_0x5635(_0x2aff9c,_0xdd27e6);}class RetrieveCartridges{constructor(_0x5365e3,_0x29b9ca,_0x426774,_0x5f2616,_0x35bbac,_0x2984e3,_0x24f985){const _0x442b09=a62_0x33c910;this['jobPath']=_0x5365e3,this[_0x442b09(0xc7)]=_0x29b9ca,this[_0x442b09(0xe9)]=_0x426774,this[_0x442b09(0xeb)]=_0x5f2616,this[_0x442b09(0xdd)]=_0x35bbac,this[_0x442b09(0x113)]=_0x2984e3,this[_0x442b09(0xd5)]=_0x24f985,this[_0x442b09(0xc9)]=![],this['isFlosumVariables']=Object['keys'](this[_0x442b09(0x113)])[_0x442b09(0xd7)]>0x0;}async[a62_0x33c910(0xed)](_0xc39df4){const _0xc9e9ea=a62_0x33c910,_0x1dc707=new salesforce_2[(_0xc9e9ea(0xdc))]()[_0xc9e9ea(0xd6)]('Body',_0xc9e9ea(0xfd),'BodyLength')[_0xc9e9ea(0x10e)](_0xc9e9ea(0xf9))['where']('ParentId\x20IN\x20(:componentHistoryIds)',{'componentHistoryIds':_0xc39df4}),_0x6383e=new salesforce_1['Bulk1RetrieveData']({'instance':this[_0xc9e9ea(0xc7)],'api':this[_0xc9e9ea(0xe9)],'pollInterval':0x1388,'queryBuilder':_0x1dc707,'objectName':'Attachment','contentType':salesforce_1[_0xc9e9ea(0xfc)][_0xc9e9ea(0xdf)],'jobOperation':salesforce_1[_0xc9e9ea(0xfb)][_0xc9e9ea(0x108)]});let _0xe89628=0x0;do{const _0x21a88f=await _0x6383e[_0xc9e9ea(0x111)]();if(!_0x21a88f)break;const _0x3bbead=new salesforce_2[(_0xc9e9ea(0x100))]({'binaryFields':BINARY_FIELDS});for await(const _0x588606 of _0x21a88f[_0xc9e9ea(0xcf)](_0x3bbead)){_0xe89628++;const _0x540202=new adm_zip_1[(_0xc9e9ea(0x10f))](_0x588606[_0xc9e9ea(0xf3)]);this[_0xc9e9ea(0xc9)]&&await this[_0xc9e9ea(0xd0)](_0x540202),await(0x0,utils_1[_0xc9e9ea(0x103)])(_0x540202,this['jobPath']);}}while(!_0x6383e[_0xc9e9ea(0x10c)]());return _0xe89628;}async[a62_0x33c910(0xd0)](_0xa68f22){const _0x2fbc57=a62_0x33c910,_0x2a2841=_0xa68f22[_0x2fbc57(0xe6)]();_0x2a2841[_0x2fbc57(0x104)](_0x410d6b=>{const _0x131b26=_0x2fbc57,_0x2ebf3b=_0x410d6b[_0x131b26(0xcc)],_0x412ec1=_0x2ebf3b['substring'](_0x2ebf3b[_0x131b26(0xf0)]('.')+0x1);if(!EXCLUDED_TYPES[_0x131b26(0xd3)](_0x412ec1)){let _0x3b1788=_0x410d6b['getData']()[_0x131b26(0xf1)](_0x131b26(0xe2)),_0x2747f8=![];for(const _0x36ef14 in this[_0x131b26(0x113)]){const _0x26339f='%%'+_0x36ef14+'%%';if(_0x3b1788[_0x131b26(0xf6)](_0x26339f)!==-0x1){const _0x4df365=new RegExp(_0x26339f,'ig');_0x3b1788=_0x3b1788[_0x131b26(0xf5)](_0x4df365,this['variables'][_0x36ef14]),_0x2747f8=!![];}}_0x2747f8&&_0xa68f22['updateFile'](_0x410d6b,Buffer['from'](_0x3b1788,_0x131b26(0xe2)));}});}async[a62_0x33c910(0xd1)](){const _0x5ed8f2=a62_0x33c910,_0xa0ccea=[],_0x1ee4bc=new salesforce_2[(_0x5ed8f2(0xdc))]()[_0x5ed8f2(0xd6)]('Id')[_0x5ed8f2(0x10e)](this[_0x5ed8f2(0xeb)]+_0x5ed8f2(0x105))['where'](this['namespace']+_0x5ed8f2(0xfa),{'branchId':this[_0x5ed8f2(0xdd)]})['andWhere'](this['namespace']+_0x5ed8f2(0xef),{'type':B2C_CARTRIDGE_TYPE})['build'](),_0x14e5ce=new salesforce_2[(_0x5ed8f2(0xdc))]()[_0x5ed8f2(0xd6)]('Id')[_0x5ed8f2(0x10e)](this[_0x5ed8f2(0xeb)]+_0x5ed8f2(0x102))[_0x5ed8f2(0xd9)](this['namespace']+_0x5ed8f2(0xe4)+_0x1ee4bc+')')[_0x5ed8f2(0xff)](this[_0x5ed8f2(0xeb)]+_0x5ed8f2(0xc6),{'isLastVersion':!![]}),_0x53cae5=new salesforce_2[(_0x5ed8f2(0xee))]({'api':this[_0x5ed8f2(0xe9)],'queryBuilder':_0x14e5ce,'instance':this[_0x5ed8f2(0xc7)],'isTooling':![]});do{const _0x2c91a3=await _0x53cae5[_0x5ed8f2(0x111)]()[_0x5ed8f2(0x107)](({records:_0x436640})=>_0x436640['map'](_0x6a7267=>_0x6a7267['Id']));_0x2c91a3[_0x5ed8f2(0xd7)]&&_0xa0ccea[_0x5ed8f2(0xd2)](_0x2c91a3);}while(!_0x53cae5[_0x5ed8f2(0x10c)]());return _0xa0ccea;}async[a62_0x33c910(0x111)](){const _0x92b1b2=a62_0x33c910,_0x2ad542=await this['getComponentHistoryIds']();let _0x309e83=0x0;for(const _0x13d7d9 of _0x2ad542){_0x309e83+=await this[_0x92b1b2(0xed)](_0x13d7d9);}await this['logger'][_0x92b1b2(0xf7)](_0x92b1b2(0xda)+_0x309e83+_0x92b1b2(0xe8));}}exports[a62_0x33c910(0x10f)]=RetrieveCartridges;function a62_0x3c46(){const _0x22938a=['Name','10xomqHY','andWhere','BulkXmlStreamParser','apply','Component_History__c','extractAllToAsync','forEach','Component__c','16vugYiv','then','Query','3646125KpDJUq','search','rar','getIsDone','__esModule','from','default','ttf','execute','svg','variables','woff','@flosum/salesforce','isLastVersion__c\x20=\x20:isLastVersion','axiosInstance','./utils','isFlosumVariables','defineProperty','__importDefault','name','285105yOIzpf','1582044iHEyem','pipe','applyFlosumVariables','getComponentHistoryIds','push','includes','18267057LfzIre','logger','select','length','png','where','Retrieved\x20','51016LhZdtU','QueryBuilder','branchId','jpg','APPLICATION_XML','constructor','zip','utf8','(((.+)+)+)+$','Component__c\x20IN\x20(','jpeg','getEntries','4ytGOMN','\x20file(s).','apiVersion','7147968yDjlnN','namespace','ico','retriveAttachments','CompositeRetrieveData','Component_Type__c\x20=\x20:type','lastIndexOf','toString','otf','Body','3065604KHHISe','replace','indexOf','log','CartridgeFile','Attachment','Branch__c\x20=\x20:branchId','Bulk1JobOperation','BulkV1QueryContentType'];a62_0x3c46=function(){return _0x22938a;};return a62_0x3c46();}