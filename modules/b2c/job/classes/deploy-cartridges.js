const a59_0x37ed39=a59_0x273b;(function(_0x314789,_0x213e3d){const _0x4cacbd=a59_0x273b,_0xa698dc=_0x314789();while(!![]){try{const _0x40773d=-parseInt(_0x4cacbd(0x91))/0x1+parseInt(_0x4cacbd(0xb1))/0x2*(-parseInt(_0x4cacbd(0x98))/0x3)+-parseInt(_0x4cacbd(0xaf))/0x4+parseInt(_0x4cacbd(0xa7))/0x5*(parseInt(_0x4cacbd(0x97))/0x6)+-parseInt(_0x4cacbd(0xa1))/0x7+-parseInt(_0x4cacbd(0x8b))/0x8*(parseInt(_0x4cacbd(0xae))/0x9)+-parseInt(_0x4cacbd(0x9b))/0xa*(-parseInt(_0x4cacbd(0x9f))/0xb);if(_0x40773d===_0x213e3d)break;else _0xa698dc['push'](_0xa698dc['shift']());}catch(_0x4b3098){_0xa698dc['push'](_0xa698dc['shift']());}}}(a59_0x9467,0xf0694));const a59_0x54fc49=(function(){let _0x4d46da=!![];return function(_0x45c1e9,_0x3c5f7a){const _0x3ce343=_0x4d46da?function(){const _0x578cc8=a59_0x273b;if(_0x3c5f7a){const _0x820da8=_0x3c5f7a[_0x578cc8(0xb4)](_0x45c1e9,arguments);return _0x3c5f7a=null,_0x820da8;}}:function(){};return _0x4d46da=![],_0x3ce343;};}()),a59_0x4d13fc=a59_0x54fc49(this,function(){const _0x318317=a59_0x273b;return a59_0x4d13fc[_0x318317(0x8f)]()['search'](_0x318317(0xb3))['toString']()[_0x318317(0xb2)](a59_0x4d13fc)[_0x318317(0x93)](_0x318317(0xb3));});a59_0x4d13fc();'use strict';function a59_0x9467(){const _0x55f0b6=['been\x20recived.','accessToken','cartridges','toString','Compressing\x20cartridges\x20=>\x20\x27','1634150BGQiQQ','getAccessToken','search','log','Access\x20token\x20has\x20','activateCodeVersion','12RAGTBW','3XlabMG','\x27\x20=>\x20\x27','createZipFile','2956270oKFOvR','auth','isActivateCodeVersion','__esModule','143csuimY','clientId','1732913fFLbQA','addLocalFolderAsync','adm-zip','activate','clientSecret','code','3105185VnOrjK','deployCartridges','codeVersion','instanceUrl','======\x20Activate\x20\x20','deploy','credentials','18rxkZhO','3508988biFTjL','jobPath','278398YnxmUC','constructor','(((.+)+)+)+$','apply','logger','__importDefault','writeZip','execute','default','defineProperty','.zip','join','sfcc-ci','4809384mecHxI'];a59_0x9467=function(){return _0x55f0b6;};return a59_0x9467();}var __importDefault=this&&this[a59_0x37ed39(0xb6)]||function(_0x513638){return _0x513638&&_0x513638['__esModule']?_0x513638:{'default':_0x513638};};Object[a59_0x37ed39(0xba)](exports,a59_0x37ed39(0x9e),{'value':!![]});const utils_1=require('./utils'),path_1=__importDefault(require('path')),adm_zip_1=__importDefault(require(a59_0x37ed39(0xa3))),SFCC=require(a59_0x37ed39(0xbd));function a59_0x273b(_0x5f16a3,_0x4dba6a){const _0x394101=a59_0x9467();return a59_0x273b=function(_0x4d13fc,_0x54fc49){_0x4d13fc=_0x4d13fc-0x8b;let _0x94670a=_0x394101[_0x4d13fc];return _0x94670a;},a59_0x273b(_0x5f16a3,_0x4dba6a);}class DeployCartridges{constructor(_0x146c14,_0x27dcef,_0x568663,_0x1ae5a2,_0x25eecd){const _0x6d4273=a59_0x37ed39;this['jobPath']=_0x146c14,this[_0x6d4273(0xad)]=_0x27dcef,this[_0x6d4273(0xa9)]=_0x568663,this[_0x6d4273(0x9d)]=_0x1ae5a2,this['logger']=_0x25eecd;const {instanceUrl:_0x5d96e2,clientId:_0x36b972,clientSecret:_0x59bba3}=this['credentials'];this[_0x6d4273(0xaa)]=_0x5d96e2,this[_0x6d4273(0xa0)]=_0x36b972,this[_0x6d4273(0xa5)]=_0x59bba3;}async[a59_0x37ed39(0xa8)](){const _0x349492=a59_0x37ed39,_0x54a404=this[_0x349492(0xa9)]+_0x349492(0xbb),_0xe775b4=await this[_0x349492(0x9a)](_0x54a404);await this[_0x349492(0xb5)]['log']('Deploying\x20\x27'+_0x54a404+_0x349492(0x99)+this[_0x349492(0xaa)]+'/cartridges/'+this['codeVersion']+'\x27.'),await this[_0x349492(0xac)](_0xe775b4);}async[a59_0x37ed39(0x9a)](_0x57b83b){const _0x261ab0=a59_0x37ed39,_0x3dd145=path_1['default'][_0x261ab0(0xbc)](this[_0x261ab0(0xb0)],_0x261ab0(0x8e)),_0x2c03c1=path_1['default'][_0x261ab0(0xbc)](_0x3dd145,_0x57b83b);await this[_0x261ab0(0xb5)][_0x261ab0(0x94)](_0x261ab0(0x90)+_0x57b83b+'\x27.');const _0x53ba8f=new adm_zip_1[(_0x261ab0(0xb9))]();return await(0x0,utils_1[_0x261ab0(0xa2)])(_0x53ba8f,_0x3dd145,''+this['codeVersion']),await(0x0,utils_1[_0x261ab0(0xb7)])(_0x53ba8f,_0x2c03c1),_0x2c03c1;}async['getAccessToken'](){return new Promise((_0x182968,_0x460a62)=>{const _0xd9aea6=a59_0x273b;SFCC[_0xd9aea6(0x9c)]['auth'](this[_0xd9aea6(0xa0)],this[_0xd9aea6(0xa5)],(_0x368056,_0x5d7e62)=>{_0x5d7e62&&_0x182968(_0x5d7e62),_0x368056&&_0x460a62(_0x368056);});});}async[a59_0x37ed39(0xac)](_0x379681){return new Promise((_0x2d9e07,_0x44aa67)=>{const _0x54ebcd=a59_0x273b;SFCC[_0x54ebcd(0xa6)][_0x54ebcd(0xac)](this[_0x54ebcd(0xaa)],_0x379681,this[_0x54ebcd(0x8d)],{},_0x46c219=>{_0x46c219?_0x44aa67(_0x46c219):_0x2d9e07();});});}async[a59_0x37ed39(0xa4)](){return new Promise((_0x1d010a,_0xc42e19)=>{const _0x3bd9b3=a59_0x273b;SFCC[_0x3bd9b3(0xa6)][_0x3bd9b3(0xa4)](this[_0x3bd9b3(0xaa)],this['codeVersion'],this['accessToken'],_0x2c871d=>{_0x2c871d?_0xc42e19(_0x2c871d):_0x1d010a();});});}async[a59_0x37ed39(0xb8)](){const _0x1c0afa=a59_0x37ed39;this[_0x1c0afa(0x8d)]=await this[_0x1c0afa(0x92)](),await this[_0x1c0afa(0xb5)][_0x1c0afa(0x94)](_0x1c0afa(0x95)+(!this[_0x1c0afa(0x8d)]?'not\x20':'')+_0x1c0afa(0x8c)),await this[_0x1c0afa(0xa8)](),this[_0x1c0afa(0x9d)]&&await this[_0x1c0afa(0x96)]();}async[a59_0x37ed39(0x96)](){const _0x12ab0e=a59_0x37ed39;await this[_0x12ab0e(0xb5)][_0x12ab0e(0x94)](_0x12ab0e(0xab)['padEnd'](0x32,'=')),await this['logger']['log']('Activating\x20\x27'+this['codeVersion']+'\x27\x20code\x20version.'),await this[_0x12ab0e(0xa4)]();}}exports[a59_0x37ed39(0xb9)]=DeployCartridges;