const a58_0x2d82cd=a58_0x816d;(function(_0x2bfeb9,_0x47ca56){const _0x4a8b71=a58_0x816d,_0x37dfe9=_0x2bfeb9();while(!![]){try{const _0xea5622=parseInt(_0x4a8b71(0x90))/0x1*(parseInt(_0x4a8b71(0x93))/0x2)+-parseInt(_0x4a8b71(0x8f))/0x3*(-parseInt(_0x4a8b71(0x7b))/0x4)+-parseInt(_0x4a8b71(0x72))/0x5*(parseInt(_0x4a8b71(0x6c))/0x6)+-parseInt(_0x4a8b71(0x78))/0x7+parseInt(_0x4a8b71(0x77))/0x8*(-parseInt(_0x4a8b71(0x6d))/0x9)+-parseInt(_0x4a8b71(0x91))/0xa*(-parseInt(_0x4a8b71(0x9c))/0xb)+-parseInt(_0x4a8b71(0x83))/0xc*(-parseInt(_0x4a8b71(0x95))/0xd);if(_0xea5622===_0x47ca56)break;else _0x37dfe9['push'](_0x37dfe9['shift']());}catch(_0x6f648d){_0x37dfe9['push'](_0x37dfe9['shift']());}}}(a58_0x1b53,0x54d42));const a58_0x3ca4a9=(function(){let _0x4d9658=!![];return function(_0x129877,_0x154e08){const _0x32f6fd=_0x4d9658?function(){const _0x3e0043=a58_0x816d;if(_0x154e08){const _0x31fc20=_0x154e08[_0x3e0043(0x73)](_0x129877,arguments);return _0x154e08=null,_0x31fc20;}}:function(){};return _0x4d9658=![],_0x32f6fd;};}()),a58_0xd8634=a58_0x3ca4a9(this,function(){const _0x49612e=a58_0x816d;return a58_0xd8634[_0x49612e(0x6e)]()[_0x49612e(0x74)](_0x49612e(0x8a))[_0x49612e(0x6e)]()[_0x49612e(0x8c)](a58_0xd8634)[_0x49612e(0x74)](_0x49612e(0x8a));});a58_0xd8634();function a58_0x816d(_0x7ddf77,_0x439070){const _0x32cda0=a58_0x1b53();return a58_0x816d=function(_0xd8634,_0x3ca4a9){_0xd8634=_0xd8634-0x6c;let _0x1b5343=_0x32cda0[_0xd8634];return _0x1b5343;},a58_0x816d(_0x7ddf77,_0x439070);}'use strict';var __importDefault=this&&this[a58_0x2d82cd(0x8b)]||function(_0x1f39a7){const _0x5d742a=a58_0x2d82cd;return _0x1f39a7&&_0x1f39a7[_0x5d742a(0x7c)]?_0x1f39a7:{'default':_0x1f39a7};};Object['defineProperty'](exports,'__esModule',{'value':!![]});function a58_0x1b53(){const _0x1fcb68=['getAccessToken','2373756zHXyrI','path','./utils','\x27\x20=>\x20\x27','Compressing\x20\x27','30gNmYxi','2998206ghiPRQ','toString','sfcc','join','credentials','641065efOjJz','apply','search','cartridges','sfcc-ci','16rOrrPy','1644384VfjUbw','length','then','137876dDUXTP','__esModule','activate','Deploying\x20\x27','generateAsync','deploy','../../constants','createCodeVersion','36vScfuN','\x27\x20code\x20version.','name','jobPath','token','logger','log','(((.+)+)+)+$','__importDefault','constructor','default','auth','39dCqKIO','1BUSZfK','20CfiwYe','activateCodeVersion','1348802eMkOqH','Receiving\x20access\x20token.','1454323XBSQtp','.zip','SFRA_FOLDER_NAME','code','codeVersion','Activating\x20\x27'];a58_0x1b53=function(){return _0x1fcb68;};return a58_0x1b53();}const fs_1=require('fs'),constants_1=require(a58_0x2d82cd(0x81)),utils_1=require(a58_0x2d82cd(0x9e)),path_1=__importDefault(require(a58_0x2d82cd(0x9d)));class DeployCartridges{constructor(_0x15e111,_0x2bdf37,_0x502541,_0x15f39e,_0x58501f,_0x112412){const _0x3b3e63=a58_0x2d82cd;this[_0x3b3e63(0x86)]=_0x15e111,this[_0x3b3e63(0x71)]=_0x2bdf37,this[_0x3b3e63(0x75)]=_0x502541,this['createCodeVersion']=_0x15f39e,this['activateCodeVersionId']=_0x58501f,this[_0x3b3e63(0x88)]=_0x112412;}async['execute'](){const _0x4fb66d=a58_0x2d82cd;var _0x22ba9c;if(!((_0x22ba9c=this['cartridges'])===null||_0x22ba9c===void 0x0?void 0x0:_0x22ba9c[_0x4fb66d(0x79)]))throw new Error('Cartridges\x20not\x20found.');const {instanceUrl:_0x54d384,clientId:_0x13db5a,clientSecret:_0x10d8a7}=this[_0x4fb66d(0x71)];for(const _0x560dfe of this[_0x4fb66d(0x75)]){const _0x2a87e0=path_1[_0x4fb66d(0x8d)]['join'](constants_1[_0x4fb66d(0x97)],'cartridges',_0x560dfe[_0x4fb66d(0x99)]),_0x491b4e=path_1['default'][_0x4fb66d(0x70)](this[_0x4fb66d(0x86)],_0x2a87e0),_0x1c3c7e=_0x560dfe['name']+_0x4fb66d(0x96),_0x31e230=path_1[_0x4fb66d(0x8d)][_0x4fb66d(0x70)](_0x491b4e,_0x1c3c7e);await this[_0x4fb66d(0x88)][_0x4fb66d(0x89)](_0x4fb66d(0xa0)+_0x560dfe[_0x4fb66d(0x85)]+_0x4fb66d(0x9f)+_0x2a87e0+'/'+_0x1c3c7e+'\x27.');const _0x30ddce=path_1['default'][_0x4fb66d(0x70)](_0x491b4e,_0x560dfe['name']),_0x397564=this[_0x4fb66d(0x82)]||_0x560dfe[_0x4fb66d(0x99)],_0x554b6f=(0x0,utils_1['getZipFromDir'])(_0x30ddce,_0x397564);await _0x554b6f[_0x4fb66d(0x7f)]({'type':'nodebuffer'})[_0x4fb66d(0x7a)](async _0x3e886d=>{const _0x4ba313=_0x4fb66d;(0x0,fs_1['writeFileSync'])(_0x31e230,_0x3e886d),await this[_0x4ba313(0x88)][_0x4ba313(0x89)](_0x4ba313(0x94)),await this['getAccessToken'](_0x13db5a,_0x10d8a7)[_0x4ba313(0x7a)](async _0x55e28c=>{const _0x24bcd2=_0x4ba313;DeployCartridges[_0x24bcd2(0x87)]=_0x55e28c,await this['logger']['log']('Access\x20token\x20has\x20been\x20recived.'),await this[_0x24bcd2(0x88)][_0x24bcd2(0x89)](_0x24bcd2(0x7e)+_0x1c3c7e+_0x24bcd2(0x9f)+_0x54d384+'/cartridges/'+_0x397564+'\x27.'),await this[_0x24bcd2(0x80)](_0x31e230),this['activateCodeVersionId']&&(await this['logger'][_0x24bcd2(0x89)](_0x24bcd2(0x9a)+this['activateCodeVersionId']+_0x24bcd2(0x84)),await this['activateCodeVersion'](this['activateCodeVersionId']));});});}}async[a58_0x2d82cd(0x9b)](_0x2f2cfa,_0x57ffb3){return new Promise((_0x23a6a5,_0x1fc818)=>{const _0x338a07=a58_0x816d;DeployCartridges[_0x338a07(0x6f)][_0x338a07(0x8e)]['auth'](_0x2f2cfa,_0x57ffb3,(_0x435235,_0x19140e)=>{_0x19140e&&_0x23a6a5(_0x19140e),_0x435235&&_0x1fc818(_0x435235);});});}async['deploy'](_0x4499ad){const _0x17f4c0=a58_0x2d82cd,{instanceUrl:_0x281af9}=this[_0x17f4c0(0x71)];return new Promise((_0x8acb85,_0x454138)=>{const _0x17b643=_0x17f4c0;DeployCartridges[_0x17b643(0x6f)][_0x17b643(0x98)][_0x17b643(0x80)](_0x281af9,_0x4499ad,DeployCartridges[_0x17b643(0x87)],{},_0x480ca0=>{_0x480ca0?_0x454138(_0x480ca0):_0x8acb85('');});});}async[a58_0x2d82cd(0x92)](_0x474383){const {instanceUrl:_0x536dd8}=this['credentials'];return new Promise((_0x553fc6,_0xcba2ee)=>{const _0x12f98e=a58_0x816d;DeployCartridges['sfcc'][_0x12f98e(0x98)][_0x12f98e(0x7d)](_0x536dd8,_0x474383,DeployCartridges[_0x12f98e(0x87)],_0x4cd584=>{_0x4cd584?_0xcba2ee(_0x4cd584):_0x553fc6('');});});}}exports[a58_0x2d82cd(0x8d)]=DeployCartridges,DeployCartridges[a58_0x2d82cd(0x6f)]=require(a58_0x2d82cd(0x76));