const a59_0x4d546f=a59_0x3b28;(function(_0x1c2d2d,_0x5626c3){const _0x3da4c3=a59_0x3b28,_0x4395f0=_0x1c2d2d();while(!![]){try{const _0x58670e=parseInt(_0x3da4c3(0x189))/0x1+-parseInt(_0x3da4c3(0x178))/0x2*(-parseInt(_0x3da4c3(0x190))/0x3)+-parseInt(_0x3da4c3(0x195))/0x4*(parseInt(_0x3da4c3(0x187))/0x5)+parseInt(_0x3da4c3(0x172))/0x6+parseInt(_0x3da4c3(0x16c))/0x7*(parseInt(_0x3da4c3(0x184))/0x8)+parseInt(_0x3da4c3(0x196))/0x9*(-parseInt(_0x3da4c3(0x19a))/0xa)+parseInt(_0x3da4c3(0x191))/0xb*(-parseInt(_0x3da4c3(0x194))/0xc);if(_0x58670e===_0x5626c3)break;else _0x4395f0['push'](_0x4395f0['shift']());}catch(_0x55873e){_0x4395f0['push'](_0x4395f0['shift']());}}}(a59_0x2bfa,0xb4df8));const a59_0x249ddb=(function(){let _0x1d6ecb=!![];return function(_0x1b2716,_0x20456e){const _0x326b28=_0x1d6ecb?function(){const _0x53b09a=a59_0x3b28;if(_0x20456e){const _0x50e9f4=_0x20456e[_0x53b09a(0x181)](_0x1b2716,arguments);return _0x20456e=null,_0x50e9f4;}}:function(){};return _0x1d6ecb=![],_0x326b28;};}()),a59_0x3334da=a59_0x249ddb(this,function(){const _0x2c1c60=a59_0x3b28;return a59_0x3334da[_0x2c1c60(0x16d)]()[_0x2c1c60(0x170)](_0x2c1c60(0x16f))[_0x2c1c60(0x16d)]()[_0x2c1c60(0x19e)](a59_0x3334da)[_0x2c1c60(0x170)](_0x2c1c60(0x16f));});a59_0x3334da();'use strict';var __importDefault=this&&this[a59_0x4d546f(0x17a)]||function(_0x40e151){return _0x40e151&&_0x40e151['__esModule']?_0x40e151:{'default':_0x40e151};};Object[a59_0x4d546f(0x16b)](exports,a59_0x4d546f(0x1a0),{'value':!![]});const utils_1=require('./utils'),path_1=__importDefault(require(a59_0x4d546f(0x17b))),adm_zip_1=__importDefault(require(a59_0x4d546f(0x1a2))),SFCC=require(a59_0x4d546f(0x19d));function a59_0x3b28(_0x1ae658,_0x518ecf){const _0x5c13c9=a59_0x2bfa();return a59_0x3b28=function(_0x3334da,_0x249ddb){_0x3334da=_0x3334da-0x16b;let _0x2bfa11=_0x5c13c9[_0x3334da];return _0x2bfa11;},a59_0x3b28(_0x1ae658,_0x518ecf);}function a59_0x2bfa(){const _0x14ebd1=['join','4bGPexB','clientSecret','__importDefault','path','instanceUrl','activateCodeVersion','default','been\x20recived.','writeZip','apply','accessToken','Compressing\x20cartridges\x20=>\x20\x27','80816HmjBMW','jobPath','Deploying\x20\x27','350ywzbqQ','not\x20','975278ORiGhP','log','codeVersion','addLocalFolderAsync','deploy','\x27\x20=>\x20\x27','isActivateCodeVersion','1702491clsqKO','5885UtNHeS','credentials','activate','38340arSZJm','33052YUDAhz','99TNdAvz','auth','deployCartridges','clientId','1204590tzrsHg','execute','Activating\x20\x27','sfcc-ci','constructor','padEnd','__esModule','createZipFile','adm-zip','defineProperty','812xNjaSa','toString','/cartridges/','(((.+)+)+)+$','search','logger','6429216NKxydY','\x27\x20code\x20version.','======\x20Activate\x20\x20','Access\x20token\x20has\x20','code'];a59_0x2bfa=function(){return _0x14ebd1;};return a59_0x2bfa();}class DeployCartridges{constructor(_0x3b7fb6,_0x29f461,_0x2eeb19,_0x5484c5,_0x3f95f9){const _0x44296d=a59_0x4d546f;this['jobPath']=_0x3b7fb6,this[_0x44296d(0x192)]=_0x29f461,this[_0x44296d(0x18b)]=_0x2eeb19,this[_0x44296d(0x18f)]=_0x5484c5,this['logger']=_0x3f95f9;const {instanceUrl:_0x5ee5e6,clientId:_0x443f24,clientSecret:_0x8e6092}=this[_0x44296d(0x192)];this[_0x44296d(0x17c)]=_0x5ee5e6,this['clientId']=_0x443f24,this[_0x44296d(0x179)]=_0x8e6092;}async[a59_0x4d546f(0x198)](){const _0x4fa419=a59_0x4d546f,_0x588436=this[_0x4fa419(0x18b)]+'.zip',_0x5165f5=await this[_0x4fa419(0x1a1)](_0x588436);await this[_0x4fa419(0x171)][_0x4fa419(0x18a)](_0x4fa419(0x186)+_0x588436+_0x4fa419(0x18e)+this['instanceUrl']+_0x4fa419(0x16e)+this[_0x4fa419(0x18b)]+'\x27.'),await this['deploy'](_0x5165f5);}async[a59_0x4d546f(0x1a1)](_0x45e468){const _0x4b949e=a59_0x4d546f,_0x195706=path_1[_0x4b949e(0x17e)]['join'](this[_0x4b949e(0x185)],'cartridges'),_0x4fc490=path_1[_0x4b949e(0x17e)][_0x4b949e(0x177)](_0x195706,_0x45e468);await this[_0x4b949e(0x171)][_0x4b949e(0x18a)](_0x4b949e(0x183)+_0x45e468+'\x27.');const _0x399208=new adm_zip_1[(_0x4b949e(0x17e))]();return await(0x0,utils_1[_0x4b949e(0x18c)])(_0x399208,_0x195706,''+this['codeVersion']),await(0x0,utils_1[_0x4b949e(0x180)])(_0x399208,_0x4fc490),_0x4fc490;}async['getAccessToken'](){return new Promise((_0x3a699e,_0x5c2b66)=>{const _0x4dd1c7=a59_0x3b28;SFCC[_0x4dd1c7(0x197)][_0x4dd1c7(0x197)](this[_0x4dd1c7(0x199)],this['clientSecret'],(_0x41d6da,_0x40ca28)=>{_0x40ca28&&_0x3a699e(_0x40ca28),_0x41d6da&&_0x5c2b66(_0x41d6da);});});}async[a59_0x4d546f(0x18d)](_0x350fc3){return new Promise((_0x126aa4,_0x29e627)=>{const _0x3f191c=a59_0x3b28;SFCC['code'][_0x3f191c(0x18d)](this[_0x3f191c(0x17c)],_0x350fc3,this['accessToken'],{},_0x4ed7c5=>{_0x4ed7c5?_0x29e627(_0x4ed7c5):_0x126aa4();});});}async[a59_0x4d546f(0x193)](){return new Promise((_0x34aa1d,_0x31dedb)=>{const _0x3a9ce4=a59_0x3b28;SFCC[_0x3a9ce4(0x176)][_0x3a9ce4(0x193)](this['instanceUrl'],this[_0x3a9ce4(0x18b)],this['accessToken'],_0x25fad8=>{_0x25fad8?_0x31dedb(_0x25fad8):_0x34aa1d();});});}async[a59_0x4d546f(0x19b)](){const _0x328224=a59_0x4d546f;this[_0x328224(0x182)]=await this['getAccessToken'](),await this['logger']['log'](_0x328224(0x175)+(!this[_0x328224(0x182)]?_0x328224(0x188):'')+_0x328224(0x17f)),await this[_0x328224(0x198)](),this[_0x328224(0x18f)]&&await this[_0x328224(0x17d)]();}async[a59_0x4d546f(0x17d)](){const _0x272a3d=a59_0x4d546f;await this[_0x272a3d(0x171)]['log'](_0x272a3d(0x174)[_0x272a3d(0x19f)](0x32,'=')),await this['logger'][_0x272a3d(0x18a)](_0x272a3d(0x19c)+this['codeVersion']+_0x272a3d(0x173)),await this['activate']();}}exports[a59_0x4d546f(0x17e)]=DeployCartridges;