const a59_0x362cb9=a59_0x4693;function a59_0x4b7c(){const _0x313bec=['activate','addLocalFolderAsync','(((.+)+)+)+$','clientId','logger','10oTnvpf','activateCodeVersion','join','been\x20recived.','padEnd','writeZip','338233DHlwDD','defineProperty','942305rgXwma','\x27\x20=>\x20\x27','log','======\x20Activate\x20\x20','__esModule','toString','.zip','6524775qZOwoA','deployCartridges','28069749LZWFGe','getAccessToken','5258488lxgzQq','/cartridges/','jobPath','isActivateCodeVersion','path','credentials','Deploying\x20\x27','codeVersion','search','cartridges','clientSecret','12RzZKQI','default','instanceUrl','3tYkRLN','accessToken','code','5603804yRDvXz','auth','apply','deploy','\x27\x20code\x20version.','adm-zip','1491750oVFjdq','Access\x20token\x20has\x20','sfcc-ci'];a59_0x4b7c=function(){return _0x313bec;};return a59_0x4b7c();}(function(_0x402dc2,_0xbb5e3){const _0x1fba51=a59_0x4693,_0x1b4df3=_0x402dc2();while(!![]){try{const _0x2d5dcf=-parseInt(_0x1fba51(0x12d))/0x1+-parseInt(_0x1fba51(0x14f))/0x2+-parseInt(_0x1fba51(0x146))/0x3*(parseInt(_0x1fba51(0x149))/0x4)+parseInt(_0x1fba51(0x134))/0x5+parseInt(_0x1fba51(0x143))/0x6*(parseInt(_0x1fba51(0x12b))/0x7)+-parseInt(_0x1fba51(0x138))/0x8+parseInt(_0x1fba51(0x136))/0x9*(parseInt(_0x1fba51(0x157))/0xa);if(_0x2d5dcf===_0xbb5e3)break;else _0x1b4df3['push'](_0x1b4df3['shift']());}catch(_0x134100){_0x1b4df3['push'](_0x1b4df3['shift']());}}}(a59_0x4b7c,0xbcf7c));const a59_0x50a956=(function(){let _0x433ec2=!![];return function(_0x17036a,_0x189329){const _0x31350f=_0x433ec2?function(){const _0xca6ef3=a59_0x4693;if(_0x189329){const _0x268d28=_0x189329[_0xca6ef3(0x14b)](_0x17036a,arguments);return _0x189329=null,_0x268d28;}}:function(){};return _0x433ec2=![],_0x31350f;};}()),a59_0x502e2b=a59_0x50a956(this,function(){const _0x591777=a59_0x4693;return a59_0x502e2b[_0x591777(0x132)]()[_0x591777(0x140)]('(((.+)+)+)+$')[_0x591777(0x132)]()['constructor'](a59_0x502e2b)[_0x591777(0x140)](_0x591777(0x154));});a59_0x502e2b();function a59_0x4693(_0xb129d6,_0x4ff63d){const _0x400e7f=a59_0x4b7c();return a59_0x4693=function(_0x502e2b,_0x50a956){_0x502e2b=_0x502e2b-0x12b;let _0x4b7cf2=_0x400e7f[_0x502e2b];return _0x4b7cf2;},a59_0x4693(_0xb129d6,_0x4ff63d);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3bda67){const _0x4800cd=a59_0x4693;return _0x3bda67&&_0x3bda67[_0x4800cd(0x131)]?_0x3bda67:{'default':_0x3bda67};};Object[a59_0x362cb9(0x12c)](exports,a59_0x362cb9(0x131),{'value':!![]});const utils_1=require('./utils'),path_1=__importDefault(require(a59_0x362cb9(0x13c))),adm_zip_1=__importDefault(require(a59_0x362cb9(0x14e))),SFCC=require(a59_0x362cb9(0x151));class DeployCartridges{constructor(_0x59329d,_0xba7351,_0x39cf63,_0x4dc905,_0x458864){const _0x485b15=a59_0x362cb9;this[_0x485b15(0x13a)]=_0x59329d,this[_0x485b15(0x13d)]=_0xba7351,this[_0x485b15(0x13f)]=_0x39cf63,this[_0x485b15(0x13b)]=_0x4dc905,this['logger']=_0x458864;const {instanceUrl:_0xfb0259,clientId:_0x37110e,clientSecret:_0x2cda8e}=this[_0x485b15(0x13d)];this[_0x485b15(0x145)]=_0xfb0259,this[_0x485b15(0x155)]=_0x37110e,this['clientSecret']=_0x2cda8e;}async[a59_0x362cb9(0x135)](){const _0x5889ac=a59_0x362cb9,_0xa5f977=this['codeVersion']+_0x5889ac(0x133),_0x50cc29=await this['createZipFile'](_0xa5f977);await this[_0x5889ac(0x156)][_0x5889ac(0x12f)](_0x5889ac(0x13e)+_0xa5f977+_0x5889ac(0x12e)+this[_0x5889ac(0x145)]+_0x5889ac(0x139)+this['codeVersion']+'\x27.'),await this[_0x5889ac(0x14c)](_0x50cc29);}async['createZipFile'](_0x14ccfd){const _0x50f90a=a59_0x362cb9,_0x54c301=path_1['default'][_0x50f90a(0x159)](this[_0x50f90a(0x13a)],_0x50f90a(0x141)),_0x34d304=path_1[_0x50f90a(0x144)][_0x50f90a(0x159)](_0x54c301,_0x14ccfd);await this[_0x50f90a(0x156)][_0x50f90a(0x12f)]('Compressing\x20cartridges\x20=>\x20\x27'+_0x14ccfd+'\x27.');const _0x4582a6=new adm_zip_1[(_0x50f90a(0x144))]();return await(0x0,utils_1[_0x50f90a(0x153)])(_0x4582a6,_0x54c301,''+this[_0x50f90a(0x13f)]),await(0x0,utils_1[_0x50f90a(0x15c)])(_0x4582a6,_0x34d304),_0x34d304;}async[a59_0x362cb9(0x137)](){return new Promise((_0x3b3013,_0x1968e7)=>{const _0x4c670c=a59_0x4693;SFCC['auth'][_0x4c670c(0x14a)](this[_0x4c670c(0x155)],this[_0x4c670c(0x142)],(_0x309b4a,_0x2d455c)=>{_0x2d455c&&_0x3b3013(_0x2d455c),_0x309b4a&&_0x1968e7(_0x309b4a);});});}async['deploy'](_0x2a589f){return new Promise((_0x5d34c3,_0x3d161d)=>{const _0x156723=a59_0x4693;SFCC['code']['deploy'](this[_0x156723(0x145)],_0x2a589f,this[_0x156723(0x147)],{},_0x4554fb=>{_0x4554fb?_0x3d161d(_0x4554fb):_0x5d34c3();});});}async[a59_0x362cb9(0x152)](){return new Promise((_0x420007,_0x26e2b7)=>{const _0x4278a8=a59_0x4693;SFCC[_0x4278a8(0x148)][_0x4278a8(0x152)](this[_0x4278a8(0x145)],this[_0x4278a8(0x13f)],this[_0x4278a8(0x147)],_0x313118=>{_0x313118?_0x26e2b7(_0x313118):_0x420007();});});}async['execute'](){const _0x1d9732=a59_0x362cb9;this[_0x1d9732(0x147)]=await this['getAccessToken'](),await this[_0x1d9732(0x156)][_0x1d9732(0x12f)](_0x1d9732(0x150)+(!this['accessToken']?'not\x20':'')+_0x1d9732(0x15a)),await this['deployCartridges'](),this[_0x1d9732(0x13b)]&&await this[_0x1d9732(0x158)]();}async[a59_0x362cb9(0x158)](){const _0x3ccf67=a59_0x362cb9;await this['logger'][_0x3ccf67(0x12f)](_0x3ccf67(0x130)[_0x3ccf67(0x15b)](0x32,'=')),await this[_0x3ccf67(0x156)][_0x3ccf67(0x12f)]('Activating\x20\x27'+this[_0x3ccf67(0x13f)]+_0x3ccf67(0x14d)),await this[_0x3ccf67(0x152)]();}}exports['default']=DeployCartridges;