const a59_0x5c80af=a59_0x59eb;function a59_0x59eb(_0x3b21a9,_0x384751){const _0x5c2100=a59_0xdc44();return a59_0x59eb=function(_0xa238fa,_0x34fca9){_0xa238fa=_0xa238fa-0xfc;let _0xdc444c=_0x5c2100[_0xa238fa];return _0xdc444c;},a59_0x59eb(_0x3b21a9,_0x384751);}(function(_0x99e482,_0x17174c){const _0x287f92=a59_0x59eb,_0x5e2715=_0x99e482();while(!![]){try{const _0x2698c8=-parseInt(_0x287f92(0x105))/0x1+parseInt(_0x287f92(0x100))/0x2*(-parseInt(_0x287f92(0x124))/0x3)+parseInt(_0x287f92(0x130))/0x4+-parseInt(_0x287f92(0x10d))/0x5*(-parseInt(_0x287f92(0x115))/0x6)+-parseInt(_0x287f92(0x10a))/0x7+-parseInt(_0x287f92(0x12f))/0x8*(parseInt(_0x287f92(0x125))/0x9)+parseInt(_0x287f92(0xff))/0xa*(parseInt(_0x287f92(0x122))/0xb);if(_0x2698c8===_0x17174c)break;else _0x5e2715['push'](_0x5e2715['shift']());}catch(_0x817338){_0x5e2715['push'](_0x5e2715['shift']());}}}(a59_0xdc44,0xe754d));const a59_0x34fca9=(function(){let _0x5eae3c=!![];return function(_0x3c0ab2,_0x44b9ed){const _0x43ead6=_0x5eae3c?function(){const _0x2987b4=a59_0x59eb;if(_0x44b9ed){const _0x2374d9=_0x44b9ed[_0x2987b4(0x103)](_0x3c0ab2,arguments);return _0x44b9ed=null,_0x2374d9;}}:function(){};return _0x5eae3c=![],_0x43ead6;};}()),a59_0xa238fa=a59_0x34fca9(this,function(){const _0x3e5972=a59_0x59eb;return a59_0xa238fa[_0x3e5972(0xfe)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a59_0xa238fa)[_0x3e5972(0x109)](_0x3e5972(0x12a));});a59_0xa238fa();'use strict';var __importDefault=this&&this[a59_0x5c80af(0x11b)]||function(_0x12b000){return _0x12b000&&_0x12b000['__esModule']?_0x12b000:{'default':_0x12b000};};Object[a59_0x5c80af(0x118)](exports,a59_0x5c80af(0x11c),{'value':!![]});const utils_1=require('./utils'),path_1=__importDefault(require(a59_0x5c80af(0x11e))),adm_zip_1=__importDefault(require(a59_0x5c80af(0x126))),SFCC=require(a59_0x5c80af(0x11a));class DeployCartridges{constructor(_0x443cdf,_0x567dc8,_0x2fadc0,_0x3c29bf,_0x5029cf){const _0x5da701=a59_0x5c80af;this[_0x5da701(0x119)]=_0x443cdf,this[_0x5da701(0x12b)]=_0x567dc8,this['codeVersion']=_0x2fadc0,this[_0x5da701(0xfc)]=_0x3c29bf,this[_0x5da701(0x12c)]=_0x5029cf;const {instanceUrl:_0x2d8c04,clientId:_0x33f7d5,clientSecret:_0x5a21d6}=this[_0x5da701(0x12b)];this[_0x5da701(0x112)]=_0x2d8c04,this[_0x5da701(0x10c)]=_0x33f7d5,this[_0x5da701(0x110)]=_0x5a21d6;}async[a59_0x5c80af(0x114)](){const _0x2e4b63=a59_0x5c80af,_0x24fa91=this[_0x2e4b63(0x129)]+_0x2e4b63(0x107),_0x23986e=await this[_0x2e4b63(0x116)](_0x24fa91);await this[_0x2e4b63(0x12c)][_0x2e4b63(0x102)](_0x2e4b63(0x120)+_0x24fa91+'\x27\x20=>\x20\x27'+this[_0x2e4b63(0x112)]+_0x2e4b63(0x10f)+this['codeVersion']+'\x27.'),await this[_0x2e4b63(0x121)](_0x23986e);}async[a59_0x5c80af(0x116)](_0x5ded91){const _0x2723c5=a59_0x5c80af,_0x58bbeb=path_1['default'][_0x2723c5(0x11d)](this[_0x2723c5(0x119)],_0x2723c5(0x127)),_0x26c3f1=path_1[_0x2723c5(0x10e)][_0x2723c5(0x11d)](_0x58bbeb,_0x5ded91);await this['logger']['log'](_0x2723c5(0x101)+_0x5ded91+'\x27.');const _0x39860e=new adm_zip_1['default']();return await(0x0,utils_1[_0x2723c5(0x123)])(_0x39860e,_0x58bbeb,''+this['codeVersion']),await(0x0,utils_1[_0x2723c5(0x106)])(_0x39860e,_0x26c3f1),_0x26c3f1;}async['getAccessToken'](){return new Promise((_0x2d5e9d,_0x55ecf6)=>{const _0x6b3328=a59_0x59eb;SFCC[_0x6b3328(0x117)][_0x6b3328(0x117)](this[_0x6b3328(0x10c)],this[_0x6b3328(0x110)],(_0x94741d,_0x32cbcf)=>{_0x32cbcf&&_0x2d5e9d(_0x32cbcf),_0x94741d&&_0x55ecf6(_0x94741d);});});}async[a59_0x5c80af(0x121)](_0x286b47){return new Promise((_0x3f6b7c,_0x19f311)=>{const _0x4d89c1=a59_0x59eb;SFCC[_0x4d89c1(0x128)][_0x4d89c1(0x121)](this['instanceUrl'],_0x286b47,this[_0x4d89c1(0x108)],{},_0x548f39=>{_0x548f39?_0x19f311(_0x548f39):_0x3f6b7c();});});}async[a59_0x5c80af(0x131)](){return new Promise((_0x5d479a,_0x4c74c0)=>{const _0x163337=a59_0x59eb;SFCC[_0x163337(0x128)]['activate'](this[_0x163337(0x112)],this[_0x163337(0x129)],this[_0x163337(0x108)],_0x489609=>{_0x489609?_0x4c74c0(_0x489609):_0x5d479a();});});}async[a59_0x5c80af(0xfd)](){const _0x1498ea=a59_0x5c80af;this['accessToken']=await this[_0x1498ea(0x104)](),await this[_0x1498ea(0x12c)][_0x1498ea(0x102)](_0x1498ea(0x111)+(!this[_0x1498ea(0x108)]?'not\x20':'')+_0x1498ea(0x113)),await this['deployCartridges'](),this[_0x1498ea(0xfc)]&&await this['activateCodeVersion']();}async[a59_0x5c80af(0x12e)](){const _0x56510f=a59_0x5c80af;await this['logger'][_0x56510f(0x102)](_0x56510f(0x11f)['padEnd'](0x32,'=')),await this[_0x56510f(0x12c)][_0x56510f(0x102)](_0x56510f(0x12d)+this[_0x56510f(0x129)]+_0x56510f(0x10b)),await this['activate']();}}function a59_0xdc44(){const _0xc3b054=['addLocalFolderAsync','45246tbubJK','99BlaJsw','adm-zip','cartridges','code','codeVersion','(((.+)+)+)+$','credentials','logger','Activating\x20\x27','activateCodeVersion','6416GVbXZo','4612244obANaa','activate','isActivateCodeVersion','execute','toString','4420xOXxnW','96OdWHhG','Compressing\x20cartridges\x20=>\x20\x27','log','apply','getAccessToken','162404Bfaxxi','writeZip','.zip','accessToken','search','9342858aRLJmf','\x27\x20code\x20version.','clientId','593270uzMiOY','default','/cartridges/','clientSecret','Access\x20token\x20has\x20','instanceUrl','been\x20recived.','deployCartridges','66ViyJmq','createZipFile','auth','defineProperty','jobPath','sfcc-ci','__importDefault','__esModule','join','path','======\x20Activate\x20\x20','Deploying\x20\x27','deploy','17897dIJJMd'];a59_0xdc44=function(){return _0xc3b054;};return a59_0xdc44();}exports[a59_0x5c80af(0x10e)]=DeployCartridges;