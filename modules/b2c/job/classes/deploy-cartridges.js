const a59_0x4d62ed=a59_0x3e41;(function(_0x65fa7a,_0x2a187a){const _0x542c94=a59_0x3e41,_0x977ed=_0x65fa7a();while(!![]){try{const _0x13994d=parseInt(_0x542c94(0x11b))/0x1*(-parseInt(_0x542c94(0x128))/0x2)+parseInt(_0x542c94(0x146))/0x3*(parseInt(_0x542c94(0x134))/0x4)+-parseInt(_0x542c94(0x13d))/0x5+parseInt(_0x542c94(0x11c))/0x6*(parseInt(_0x542c94(0x130))/0x7)+-parseInt(_0x542c94(0x12c))/0x8*(-parseInt(_0x542c94(0x142))/0x9)+-parseInt(_0x542c94(0x13c))/0xa*(-parseInt(_0x542c94(0x124))/0xb)+-parseInt(_0x542c94(0x125))/0xc;if(_0x13994d===_0x2a187a)break;else _0x977ed['push'](_0x977ed['shift']());}catch(_0x278d3d){_0x977ed['push'](_0x977ed['shift']());}}}(a59_0x4eb0,0x64368));const a59_0x274728=(function(){let _0x2f77ab=!![];return function(_0x428c53,_0x1678e8){const _0x5793f2=_0x2f77ab?function(){const _0x18dfc3=a59_0x3e41;if(_0x1678e8){const _0x6a7e25=_0x1678e8[_0x18dfc3(0x135)](_0x428c53,arguments);return _0x1678e8=null,_0x6a7e25;}}:function(){};return _0x2f77ab=![],_0x5793f2;};}()),a59_0x2c8812=a59_0x274728(this,function(){const _0x294364=a59_0x3e41;return a59_0x2c8812[_0x294364(0x127)]()[_0x294364(0x132)](_0x294364(0x117))[_0x294364(0x127)]()['constructor'](a59_0x2c8812)['search'](_0x294364(0x117));});function a59_0x3e41(_0x8a9a23,_0xe3324f){const _0x1d7a50=a59_0x4eb0();return a59_0x3e41=function(_0x2c8812,_0x274728){_0x2c8812=_0x2c8812-0x113;let _0x4eb0ba=_0x1d7a50[_0x2c8812];return _0x4eb0ba;},a59_0x3e41(_0x8a9a23,_0xe3324f);}a59_0x2c8812();'use strict';var __importDefault=this&&this[a59_0x4d62ed(0x11f)]||function(_0x43a225){const _0x3b6861=a59_0x4d62ed;return _0x43a225&&_0x43a225[_0x3b6861(0x133)]?_0x43a225:{'default':_0x43a225};};Object[a59_0x4d62ed(0x141)](exports,a59_0x4d62ed(0x133),{'value':!![]});function a59_0x4eb0(){const _0x6d758e=['createZipFile','deploy','not\x20','been\x20recived.','isActivateCodeVersion','3779330QVshWg','2411420CTjapa','/cartridges/','jobPath','Deploying\x20\x27','defineProperty','2196tXgTkp','Activating\x20\x27','writeZip','adm-zip','13353MbDBzh','\x27\x20code\x20version.','getAccessToken','default','clientSecret','(((.+)+)+)+$','.zip','log','code','4158albYTj','4926UUvnIp','padEnd','execute','__importDefault','Access\x20token\x20has\x20','======\x20Activate\x20\x20','activate','activateCodeVersion','11jsuxQa','3905256ApvaEb','path','toString','388DwSvNm','codeVersion','logger','instanceUrl','23016QvLQMY','deployCartridges','clientId','\x27\x20=>\x20\x27','3199KmqQkx','accessToken','search','__esModule','512ZvUWJj','apply','sfcc-ci'];a59_0x4eb0=function(){return _0x6d758e;};return a59_0x4eb0();}const utils_1=require('./utils'),path_1=__importDefault(require(a59_0x4d62ed(0x126))),adm_zip_1=__importDefault(require(a59_0x4d62ed(0x145))),SFCC=require(a59_0x4d62ed(0x136));class DeployCartridges{constructor(_0x169eb9,_0x4c2771,_0x3e0c5f,_0x8ea8f2,_0x2c2d47){const _0x178623=a59_0x4d62ed;this['jobPath']=_0x169eb9,this['credentials']=_0x4c2771,this[_0x178623(0x129)]=_0x3e0c5f,this[_0x178623(0x13b)]=_0x8ea8f2,this[_0x178623(0x12a)]=_0x2c2d47;const {instanceUrl:_0x585ccd,clientId:_0xa123cb,clientSecret:_0x25c7b6}=this['credentials'];this[_0x178623(0x12b)]=_0x585ccd,this[_0x178623(0x12e)]=_0xa123cb,this[_0x178623(0x116)]=_0x25c7b6;}async[a59_0x4d62ed(0x12d)](){const _0x2b36a3=a59_0x4d62ed,_0x1021ef=this[_0x2b36a3(0x129)]+_0x2b36a3(0x118),_0x455ef9=await this[_0x2b36a3(0x137)](_0x1021ef);await this['logger']['log'](_0x2b36a3(0x140)+_0x1021ef+_0x2b36a3(0x12f)+this[_0x2b36a3(0x12b)]+_0x2b36a3(0x13e)+this[_0x2b36a3(0x129)]+'\x27.'),await this['deploy'](_0x455ef9);}async[a59_0x4d62ed(0x137)](_0x4b1d32){const _0x405828=a59_0x4d62ed,_0x111081=path_1[_0x405828(0x115)]['join'](this[_0x405828(0x13f)],'cartridges'),_0x1839f8=path_1[_0x405828(0x115)]['join'](_0x111081,_0x4b1d32);await this[_0x405828(0x12a)][_0x405828(0x119)]('Compressing\x20cartridges\x20=>\x20\x27'+_0x4b1d32+'\x27.');const _0x5d6dc0=new adm_zip_1['default']();return await(0x0,utils_1['addLocalFolderAsync'])(_0x5d6dc0,_0x111081,''+this[_0x405828(0x129)]),await(0x0,utils_1[_0x405828(0x144)])(_0x5d6dc0,_0x1839f8),_0x1839f8;}async[a59_0x4d62ed(0x114)](){return new Promise((_0x5484ef,_0x344a3c)=>{const _0x2d97c1=a59_0x3e41;SFCC['auth']['auth'](this['clientId'],this[_0x2d97c1(0x116)],(_0x3985c6,_0x4a0c77)=>{_0x4a0c77&&_0x5484ef(_0x4a0c77),_0x3985c6&&_0x344a3c(_0x3985c6);});});}async[a59_0x4d62ed(0x138)](_0x1a7de9){return new Promise((_0x1bf8df,_0x1c4e34)=>{const _0x39a0c3=a59_0x3e41;SFCC[_0x39a0c3(0x11a)][_0x39a0c3(0x138)](this[_0x39a0c3(0x12b)],_0x1a7de9,this[_0x39a0c3(0x131)],{},_0x54c2df=>{_0x54c2df?_0x1c4e34(_0x54c2df):_0x1bf8df();});});}async['activate'](){return new Promise((_0x5d65ff,_0x464dfe)=>{const _0x2a0593=a59_0x3e41;SFCC['code']['activate'](this[_0x2a0593(0x12b)],this['codeVersion'],this['accessToken'],_0x1230bf=>{_0x1230bf?_0x464dfe(_0x1230bf):_0x5d65ff();});});}async[a59_0x4d62ed(0x11e)](){const _0x81442a=a59_0x4d62ed;this[_0x81442a(0x131)]=await this[_0x81442a(0x114)](),await this[_0x81442a(0x12a)][_0x81442a(0x119)](_0x81442a(0x120)+(!this[_0x81442a(0x131)]?_0x81442a(0x139):'')+_0x81442a(0x13a)),await this[_0x81442a(0x12d)](),this['isActivateCodeVersion']&&await this[_0x81442a(0x123)]();}async[a59_0x4d62ed(0x123)](){const _0xd844b0=a59_0x4d62ed;await this[_0xd844b0(0x12a)][_0xd844b0(0x119)](_0xd844b0(0x121)[_0xd844b0(0x11d)](0x32,'=')),await this['logger'][_0xd844b0(0x119)](_0xd844b0(0x143)+this[_0xd844b0(0x129)]+_0xd844b0(0x113)),await this[_0xd844b0(0x122)]();}}exports['default']=DeployCartridges;