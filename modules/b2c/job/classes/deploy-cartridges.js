const a59_0x490568=a59_0x5c89;(function(_0xff2a5c,_0x3a4486){const _0x167692=a59_0x5c89,_0x3b5eb7=_0xff2a5c();while(!![]){try{const _0xa3fa1e=parseInt(_0x167692(0x8f))/0x1+parseInt(_0x167692(0x89))/0x2+-parseInt(_0x167692(0xa9))/0x3*(parseInt(_0x167692(0x95))/0x4)+-parseInt(_0x167692(0xa2))/0x5+parseInt(_0x167692(0x94))/0x6*(-parseInt(_0x167692(0x92))/0x7)+parseInt(_0x167692(0x87))/0x8+parseInt(_0x167692(0x8e))/0x9*(parseInt(_0x167692(0x91))/0xa);if(_0xa3fa1e===_0x3a4486)break;else _0x3b5eb7['push'](_0x3b5eb7['shift']());}catch(_0x270ccc){_0x3b5eb7['push'](_0x3b5eb7['shift']());}}}(a59_0x5320,0x2d4f7));const a59_0x219656=(function(){let _0x2f56f1=!![];return function(_0x29455c,_0x324dd1){const _0x1a84c2=_0x2f56f1?function(){const _0x11e475=a59_0x5c89;if(_0x324dd1){const _0x2af1ce=_0x324dd1[_0x11e475(0x9c)](_0x29455c,arguments);return _0x324dd1=null,_0x2af1ce;}}:function(){};return _0x2f56f1=![],_0x1a84c2;};}()),a59_0x4c2276=a59_0x219656(this,function(){const _0x17d4bb=a59_0x5c89;return a59_0x4c2276[_0x17d4bb(0x90)]()[_0x17d4bb(0x9b)](_0x17d4bb(0x9d))[_0x17d4bb(0x90)]()[_0x17d4bb(0xa8)](a59_0x4c2276)[_0x17d4bb(0x9b)]('(((.+)+)+)+$');});a59_0x4c2276();'use strict';function a59_0x5320(){const _0x47333c=['6ShyWPb','createZipFile','./utils','credentials','addLocalFolderAsync','accessToken','join','activate','Receiving\x20access\x20token.','codeVersion','code','deployCartridges','logger','__esModule','30408KPQNVd','defineProperty','177230hWzMnS','not\x20','log','/cartridges/','__importDefault','90fIkclC','77366OVAuWC','toString','510790VoLFMx','297563dJsNgp','writeZip','30VKeSAq','464124lcuaWU','default','clientSecret','sfcc-ci','clientId','cartridges','search','apply','(((.+)+)+)+$','path','auth','getAccessToken','jobPath','251870IjnkWn','execute','Access\x20token\x20has\x20','Activating\x20\x27','instanceUrl','deploy','constructor'];a59_0x5320=function(){return _0x47333c;};return a59_0x5320();}var __importDefault=this&&this[a59_0x490568(0x8d)]||function(_0x360dbe){const _0x2978fd=a59_0x490568;return _0x360dbe&&_0x360dbe[_0x2978fd(0x86)]?_0x360dbe:{'default':_0x360dbe};};Object[a59_0x490568(0x88)](exports,a59_0x490568(0x86),{'value':!![]});const utils_1=require(a59_0x490568(0x7b)),path_1=__importDefault(require(a59_0x490568(0x9e))),adm_zip_1=__importDefault(require('adm-zip')),SFCC=require(a59_0x490568(0x98));function a59_0x5c89(_0x1ccd0a,_0x5a185f){const _0x490912=a59_0x5320();return a59_0x5c89=function(_0x4c2276,_0x219656){_0x4c2276=_0x4c2276-0x7a;let _0x53205c=_0x490912[_0x4c2276];return _0x53205c;},a59_0x5c89(_0x1ccd0a,_0x5a185f);}class DeployCartridges{constructor(_0x4b358d,_0x19e747,_0x54abd7,_0x17ef12){const _0x60a3a6=a59_0x490568;this[_0x60a3a6(0xa1)]=_0x4b358d,this[_0x60a3a6(0x7c)]=_0x19e747,this[_0x60a3a6(0x82)]=_0x54abd7,this[_0x60a3a6(0x85)]=_0x17ef12;const {instanceUrl:_0x171723,clientId:_0x570ae3,clientSecret:_0x39c1e4}=this['credentials'];this['instanceUrl']=_0x171723,this[_0x60a3a6(0x99)]=_0x570ae3,this[_0x60a3a6(0x97)]=_0x39c1e4;}async[a59_0x490568(0x84)](){const _0x9f3044=a59_0x490568,_0x1c2964=this[_0x9f3044(0x82)]+'.zip',_0x4e8e2f=await this['createZipFile'](_0x1c2964);await this[_0x9f3044(0x85)][_0x9f3044(0x8b)]('Deploying\x20\x27'+_0x1c2964+'\x27\x20=>\x20\x27'+this[_0x9f3044(0xa6)]+_0x9f3044(0x8c)+this['codeVersion']+'\x27.'),await this[_0x9f3044(0xa7)](_0x4e8e2f);}async[a59_0x490568(0x7a)](_0x35c428){const _0x1d900b=a59_0x490568,_0x5ea372=path_1[_0x1d900b(0x96)][_0x1d900b(0x7f)](this[_0x1d900b(0xa1)],_0x1d900b(0x9a)),_0x1c7dad=path_1[_0x1d900b(0x96)][_0x1d900b(0x7f)](_0x5ea372,_0x35c428);await this[_0x1d900b(0x85)][_0x1d900b(0x8b)]('Compressing\x20cartridges\x20=>\x20\x27'+_0x35c428+'\x27.');const _0xca9be1=new adm_zip_1[(_0x1d900b(0x96))]();return await(0x0,utils_1[_0x1d900b(0x7d)])(_0xca9be1,_0x5ea372,''+this[_0x1d900b(0x82)]),await(0x0,utils_1[_0x1d900b(0x93)])(_0xca9be1,_0x1c7dad),_0x1c7dad;}async[a59_0x490568(0xa0)](){return new Promise((_0x293b1c,_0x2fb932)=>{const _0x210a3f=a59_0x5c89;SFCC[_0x210a3f(0x9f)][_0x210a3f(0x9f)](this[_0x210a3f(0x99)],this[_0x210a3f(0x97)],(_0x11c0ca,_0x15b803)=>{_0x15b803&&_0x293b1c(_0x15b803),_0x11c0ca&&_0x2fb932(_0x11c0ca);});});}async[a59_0x490568(0xa7)](_0x593e47){return new Promise((_0x2d1ea8,_0x191887)=>{const _0x16354a=a59_0x5c89;SFCC[_0x16354a(0x83)][_0x16354a(0xa7)](this[_0x16354a(0xa6)],_0x593e47,this[_0x16354a(0x7e)],{},_0x134fdd=>{_0x134fdd?_0x191887(_0x134fdd):_0x2d1ea8();});});}async[a59_0x490568(0x80)](){return new Promise((_0x387898,_0x4e5411)=>{const _0x1d0d20=a59_0x5c89;SFCC[_0x1d0d20(0x83)][_0x1d0d20(0x80)](this[_0x1d0d20(0xa6)],this[_0x1d0d20(0x82)],this[_0x1d0d20(0x7e)],_0x5b28f6=>{_0x5b28f6?_0x4e5411(_0x5b28f6):_0x387898();});});}async[a59_0x490568(0xa3)](){const _0x3d84ea=a59_0x490568;await this[_0x3d84ea(0x85)][_0x3d84ea(0x8b)](_0x3d84ea(0x81)),this['accessToken']=await this[_0x3d84ea(0xa0)](),await this['logger'][_0x3d84ea(0x8b)](_0x3d84ea(0xa4)+(!this[_0x3d84ea(0x7e)]?_0x3d84ea(0x8a):'')+'been\x20recived.'),await this[_0x3d84ea(0x84)]();}async['activateCodeVersion'](){const _0x47294d=a59_0x490568;await this[_0x47294d(0x85)]['log'](_0x47294d(0xa5)+this[_0x47294d(0x82)]+'\x27\x20code\x20version.'),await this['activate']();}}exports['default']=DeployCartridges;