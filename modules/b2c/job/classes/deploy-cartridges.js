const a59_0x4e8149=a59_0x46fc;(function(_0x3a46f3,_0x53b825){const _0x57f457=a59_0x46fc,_0x2c6f1e=_0x3a46f3();while(!![]){try{const _0x3bc44e=parseInt(_0x57f457(0x1ed))/0x1+parseInt(_0x57f457(0x1dc))/0x2*(-parseInt(_0x57f457(0x1eb))/0x3)+-parseInt(_0x57f457(0x1d8))/0x4*(-parseInt(_0x57f457(0x1de))/0x5)+parseInt(_0x57f457(0x1ef))/0x6+parseInt(_0x57f457(0x1e5))/0x7+-parseInt(_0x57f457(0x1fa))/0x8+parseInt(_0x57f457(0x1ee))/0x9*(-parseInt(_0x57f457(0x1da))/0xa);if(_0x3bc44e===_0x53b825)break;else _0x2c6f1e['push'](_0x2c6f1e['shift']());}catch(_0x1c38ea){_0x2c6f1e['push'](_0x2c6f1e['shift']());}}}(a59_0x4076,0xeb12c));const a59_0xee2891=(function(){let _0x319508=!![];return function(_0x42cd22,_0xdb9163){const _0x348e97=_0x319508?function(){const _0x557a3c=a59_0x46fc;if(_0xdb9163){const _0x1ddedb=_0xdb9163[_0x557a3c(0x1dd)](_0x42cd22,arguments);return _0xdb9163=null,_0x1ddedb;}}:function(){};return _0x319508=![],_0x348e97;};}()),a59_0x211514=a59_0xee2891(this,function(){const _0x5df5ff=a59_0x46fc;return a59_0x211514[_0x5df5ff(0x1e7)]()[_0x5df5ff(0x1d4)](_0x5df5ff(0x1f6))['toString']()[_0x5df5ff(0x1ec)](a59_0x211514)[_0x5df5ff(0x1d4)](_0x5df5ff(0x1f6));});a59_0x211514();'use strict';var __importDefault=this&&this[a59_0x4e8149(0x1ea)]||function(_0x1c2a58){return _0x1c2a58&&_0x1c2a58['__esModule']?_0x1c2a58:{'default':_0x1c2a58};};Object[a59_0x4e8149(0x1d7)](exports,'__esModule',{'value':!![]});function a59_0x46fc(_0x2fc180,_0x54991d){const _0x3da4ea=a59_0x4076();return a59_0x46fc=function(_0x211514,_0xee2891){_0x211514=_0x211514-0x1d0;let _0x407603=_0x3da4ea[_0x211514];return _0x407603;},a59_0x46fc(_0x2fc180,_0x54991d);}const utils_1=require('./utils'),path_1=__importDefault(require('path')),adm_zip_1=__importDefault(require(a59_0x4e8149(0x201))),SFCC=require('sfcc-ci');function a59_0x4076(){const _0x418076=['clientSecret','auth','adm-zip','jobPath','log','padEnd','codeVersion','search','\x27\x20code\x20version.','deployCartridges','defineProperty','2338276XdqQfI','execute','38688190JAeAKg','Access\x20token\x20has\x20','224476exSsrQ','apply','15NqIDYq','been\x20recived.','deploy','join','isActivateCodeVersion','logger','Compressing\x20cartridges\x20=>\x20\x27','7219737SKlcIc','/cartridges/','toString','createZipFile','clientId','__importDefault','3YjJezx','constructor','1852854OICGrG','9igmvPm','9802152WtMowb','default','credentials','code','addLocalFolderAsync','activateCodeVersion','Activating\x20\x27','(((.+)+)+)+$','getAccessToken','not\x20','accessToken','10621816jSILlg','instanceUrl','Deploying\x20\x27','activate','======\x20Activate\x20\x20'];a59_0x4076=function(){return _0x418076;};return a59_0x4076();}class DeployCartridges{constructor(_0x37c6dc,_0x444f5a,_0x37d2fc,_0x1d30d4,_0x3423af){const _0x535b42=a59_0x4e8149;this['jobPath']=_0x37c6dc,this[_0x535b42(0x1f1)]=_0x444f5a,this[_0x535b42(0x1d3)]=_0x37d2fc,this[_0x535b42(0x1e2)]=_0x1d30d4,this[_0x535b42(0x1e3)]=_0x3423af;const {instanceUrl:_0x1b3fd9,clientId:_0x2f3eb7,clientSecret:_0x51d59c}=this[_0x535b42(0x1f1)];this[_0x535b42(0x1fb)]=_0x1b3fd9,this[_0x535b42(0x1e9)]=_0x2f3eb7,this[_0x535b42(0x1ff)]=_0x51d59c;}async[a59_0x4e8149(0x1d6)](){const _0x23b768=a59_0x4e8149,_0x5ba36f=this[_0x23b768(0x1d3)]+'.zip',_0x2945fd=await this['createZipFile'](_0x5ba36f);await this[_0x23b768(0x1e3)][_0x23b768(0x1d1)](_0x23b768(0x1fc)+_0x5ba36f+'\x27\x20=>\x20\x27'+this['instanceUrl']+_0x23b768(0x1e6)+this['codeVersion']+'\x27.'),await this[_0x23b768(0x1e0)](_0x2945fd);}async[a59_0x4e8149(0x1e8)](_0x250126){const _0x23405e=a59_0x4e8149,_0x38c67b=path_1[_0x23405e(0x1f0)][_0x23405e(0x1e1)](this[_0x23405e(0x1d0)],'cartridges'),_0x1f6343=path_1[_0x23405e(0x1f0)][_0x23405e(0x1e1)](_0x38c67b,_0x250126);await this['logger'][_0x23405e(0x1d1)](_0x23405e(0x1e4)+_0x250126+'\x27.');const _0x35f9dc=new adm_zip_1[(_0x23405e(0x1f0))]();return await(0x0,utils_1[_0x23405e(0x1f3)])(_0x35f9dc,_0x38c67b,''+this[_0x23405e(0x1d3)]),await(0x0,utils_1['writeZip'])(_0x35f9dc,_0x1f6343),_0x1f6343;}async[a59_0x4e8149(0x1f7)](){return new Promise((_0x24ffbd,_0x85b56c)=>{const _0x39b195=a59_0x46fc;SFCC[_0x39b195(0x200)][_0x39b195(0x200)](this['clientId'],this[_0x39b195(0x1ff)],(_0x40d3cc,_0x1096f1)=>{_0x1096f1&&_0x24ffbd(_0x1096f1),_0x40d3cc&&_0x85b56c(_0x40d3cc);});});}async[a59_0x4e8149(0x1e0)](_0x3936a9){return new Promise((_0x15d065,_0x20d990)=>{const _0x528664=a59_0x46fc;SFCC[_0x528664(0x1f2)][_0x528664(0x1e0)](this[_0x528664(0x1fb)],_0x3936a9,this['accessToken'],{},_0x798845=>{_0x798845?_0x20d990(_0x798845):_0x15d065();});});}async[a59_0x4e8149(0x1fd)](){return new Promise((_0xd2e70e,_0x233f51)=>{const _0x1d4ab5=a59_0x46fc;SFCC[_0x1d4ab5(0x1f2)][_0x1d4ab5(0x1fd)](this[_0x1d4ab5(0x1fb)],this[_0x1d4ab5(0x1d3)],this[_0x1d4ab5(0x1f9)],_0x236a80=>{_0x236a80?_0x233f51(_0x236a80):_0xd2e70e();});});}async[a59_0x4e8149(0x1d9)](){const _0x510a80=a59_0x4e8149;this[_0x510a80(0x1f9)]=await this[_0x510a80(0x1f7)](),await this[_0x510a80(0x1e3)][_0x510a80(0x1d1)](_0x510a80(0x1db)+(!this[_0x510a80(0x1f9)]?_0x510a80(0x1f8):'')+_0x510a80(0x1df)),await this[_0x510a80(0x1d6)](),this[_0x510a80(0x1e2)]&&await this[_0x510a80(0x1f4)]();}async[a59_0x4e8149(0x1f4)](){const _0x5d6cc1=a59_0x4e8149;await this[_0x5d6cc1(0x1e3)]['log'](_0x5d6cc1(0x1fe)[_0x5d6cc1(0x1d2)](0x32,'=')),await this[_0x5d6cc1(0x1e3)][_0x5d6cc1(0x1d1)](_0x5d6cc1(0x1f5)+this['codeVersion']+_0x5d6cc1(0x1d5)),await this['activate']();}}exports[a59_0x4e8149(0x1f0)]=DeployCartridges;