const a57_0x4d4e7a=a57_0x19b2;(function(_0x45816e,_0x31d890){const _0x441074=a57_0x19b2,_0x10b84b=_0x45816e();while(!![]){try{const _0x30657d=-parseInt(_0x441074(0x103))/0x1*(-parseInt(_0x441074(0xfb))/0x2)+-parseInt(_0x441074(0x10d))/0x3+parseInt(_0x441074(0x120))/0x4*(-parseInt(_0x441074(0xf9))/0x5)+-parseInt(_0x441074(0xfa))/0x6+-parseInt(_0x441074(0xfd))/0x7+-parseInt(_0x441074(0x10c))/0x8*(parseInt(_0x441074(0x119))/0x9)+parseInt(_0x441074(0x116))/0xa;if(_0x30657d===_0x31d890)break;else _0x10b84b['push'](_0x10b84b['shift']());}catch(_0x517568){_0x10b84b['push'](_0x10b84b['shift']());}}}(a57_0x4c47,0x2ecbc));const a57_0x43b75c=(function(){let _0x171884=!![];return function(_0x198106,_0x2e9f19){const _0x50dec3=_0x171884?function(){if(_0x2e9f19){const _0x480cbc=_0x2e9f19['apply'](_0x198106,arguments);return _0x2e9f19=null,_0x480cbc;}}:function(){};return _0x171884=![],_0x50dec3;};}()),a57_0x353b6d=a57_0x43b75c(this,function(){const _0x266bd7=a57_0x19b2;return a57_0x353b6d[_0x266bd7(0x11d)]()['search'](_0x266bd7(0x108))[_0x266bd7(0x11d)]()[_0x266bd7(0x11e)](a57_0x353b6d)['search'](_0x266bd7(0x108));});a57_0x353b6d();function a57_0x19b2(_0x506b4b,_0x11a784){const _0x50fe55=a57_0x4c47();return a57_0x19b2=function(_0x353b6d,_0x43b75c){_0x353b6d=_0x353b6d-0xf5;let _0x4c477b=_0x50fe55[_0x353b6d];return _0x4c477b;},a57_0x19b2(_0x506b4b,_0x11a784);}function a57_0x4c47(){const _0x327454=['clientSecret','createZipFile','225ovZnjT','default','activate','clientId','toString','constructor','Access\x20token\x20has\x20','4RwryKL','activateCodeVersion','getAccessToken','accessToken','defineProperty','logger','cartridges','\x27\x20=>\x20\x27','1598340GfEJvK','1935732LatXQm','64wSbHPG','__importDefault','939820KqDQiM','Compressing\x20cartridges\x20=>\x20\x27','auth','deploy','adm-zip','instanceUrl','2044QtRavn','Deploying\x20\x27','log','deployCartridges','__esModule','(((.+)+)+)+$','/cartridges/','addLocalFolderAsync','codeVersion','82696IqeUsg','574083cqLyHp','jobPath','join','not\x20','credentials','\x27\x20code\x20version.','code','been\x20recived.','Activating\x20\x27','13526040dNPmhw'];a57_0x4c47=function(){return _0x327454;};return a57_0x4c47();}'use strict';var __importDefault=this&&this[a57_0x4d4e7a(0xfc)]||function(_0x27cce6){return _0x27cce6&&_0x27cce6['__esModule']?_0x27cce6:{'default':_0x27cce6};};Object[a57_0x4d4e7a(0xf5)](exports,a57_0x4d4e7a(0x107),{'value':!![]});const utils_1=require('./utils'),path_1=__importDefault(require('path')),adm_zip_1=__importDefault(require(a57_0x4d4e7a(0x101))),SFCC=require('sfcc-ci');class DeployCartridges{constructor(_0x35cc35,_0x342663,_0xec1de1,_0x3ceed5){const _0x1ce4fa=a57_0x4d4e7a;this[_0x1ce4fa(0x10e)]=_0x35cc35,this[_0x1ce4fa(0x111)]=_0x342663,this[_0x1ce4fa(0x10b)]=_0xec1de1,this['logger']=_0x3ceed5;const {instanceUrl:_0x31677a,clientId:_0x297350,clientSecret:_0x283e0f}=this[_0x1ce4fa(0x111)];this[_0x1ce4fa(0x102)]=_0x31677a,this[_0x1ce4fa(0x11c)]=_0x297350,this[_0x1ce4fa(0x117)]=_0x283e0f;}async['deployCartridges'](){const _0x5dc872=a57_0x4d4e7a,_0x1685c3=this[_0x5dc872(0x10b)]+'.zip',_0x1fc2b4=await this[_0x5dc872(0x118)](_0x1685c3);await this[_0x5dc872(0xf6)]['log'](_0x5dc872(0x104)+_0x1685c3+_0x5dc872(0xf8)+this[_0x5dc872(0x102)]+_0x5dc872(0x109)+this[_0x5dc872(0x10b)]+'\x27.'),await this[_0x5dc872(0x100)](_0x1fc2b4);}async[a57_0x4d4e7a(0x118)](_0x372ab8){const _0xcd655c=a57_0x4d4e7a,_0x2c2494=path_1[_0xcd655c(0x11a)]['join'](this[_0xcd655c(0x10e)],_0xcd655c(0xf7)),_0x3baea3=path_1['default'][_0xcd655c(0x10f)](_0x2c2494,_0x372ab8);await this['logger'][_0xcd655c(0x105)](_0xcd655c(0xfe)+_0x372ab8+'\x27.');const _0x4108b4=new adm_zip_1[(_0xcd655c(0x11a))]();return await(0x0,utils_1[_0xcd655c(0x10a)])(_0x4108b4,_0x2c2494,''+this['codeVersion']),await(0x0,utils_1['writeZip'])(_0x4108b4,_0x3baea3),_0x3baea3;}async[a57_0x4d4e7a(0x122)](){return new Promise((_0x5eb45e,_0x2dd409)=>{const _0x26447c=a57_0x19b2;SFCC[_0x26447c(0xff)][_0x26447c(0xff)](this[_0x26447c(0x11c)],this[_0x26447c(0x117)],(_0x4e27f6,_0x2a3998)=>{_0x2a3998&&_0x5eb45e(_0x2a3998),_0x4e27f6&&_0x2dd409(_0x4e27f6);});});}async[a57_0x4d4e7a(0x100)](_0x3ca8e2){return new Promise((_0x3cac3f,_0x4441ae)=>{const _0x38e109=a57_0x19b2;SFCC[_0x38e109(0x113)][_0x38e109(0x100)](this[_0x38e109(0x102)],_0x3ca8e2,this[_0x38e109(0x123)],{},_0x1e195c=>{_0x1e195c?_0x4441ae(_0x1e195c):_0x3cac3f();});});}async[a57_0x4d4e7a(0x11b)](){return new Promise((_0x11fb3a,_0x4604ea)=>{const _0x214716=a57_0x19b2;SFCC['code']['activate'](this[_0x214716(0x102)],this[_0x214716(0x10b)],this['accessToken'],_0x36983c=>{_0x36983c?_0x4604ea(_0x36983c):_0x11fb3a();});});}async['execute'](){const _0xc86184=a57_0x4d4e7a;await this[_0xc86184(0xf6)][_0xc86184(0x105)]('Receiving\x20access\x20token.'),this[_0xc86184(0x123)]=await this[_0xc86184(0x122)](),await this[_0xc86184(0xf6)][_0xc86184(0x105)](_0xc86184(0x11f)+(!this['accessToken']?_0xc86184(0x110):'')+_0xc86184(0x114)),await this[_0xc86184(0x106)]();}async[a57_0x4d4e7a(0x121)](){const _0x4d9731=a57_0x4d4e7a;await this[_0x4d9731(0xf6)][_0x4d9731(0x105)](_0x4d9731(0x115)+this['codeVersion']+_0x4d9731(0x112)),await this[_0x4d9731(0x11b)]();}}exports[a57_0x4d4e7a(0x11a)]=DeployCartridges;