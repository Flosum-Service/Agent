const a68_0x37e8e9=a68_0x2a7e;(function(_0x19497b,_0xccbcf5){const _0x5421d4=a68_0x2a7e,_0x47d4ac=_0x19497b();while(!![]){try{const _0x2f3ea0=parseInt(_0x5421d4(0x7f))/0x1+-parseInt(_0x5421d4(0x8e))/0x2*(parseInt(_0x5421d4(0x8a))/0x3)+parseInt(_0x5421d4(0x86))/0x4*(parseInt(_0x5421d4(0x8d))/0x5)+-parseInt(_0x5421d4(0x6e))/0x6+-parseInt(_0x5421d4(0x9a))/0x7*(parseInt(_0x5421d4(0x84))/0x8)+-parseInt(_0x5421d4(0x98))/0x9+parseInt(_0x5421d4(0x71))/0xa;if(_0x2f3ea0===_0xccbcf5)break;else _0x47d4ac['push'](_0x47d4ac['shift']());}catch(_0x499ee3){_0x47d4ac['push'](_0x47d4ac['shift']());}}}(a68_0x3d89,0x6dc23));const a68_0x27122e=(function(){let _0x1b9d62=!![];return function(_0x316496,_0x5df3db){const _0x4eb8b8=_0x1b9d62?function(){const _0x4b98af=a68_0x2a7e;if(_0x5df3db){const _0x3d04e1=_0x5df3db[_0x4b98af(0x8b)](_0x316496,arguments);return _0x5df3db=null,_0x3d04e1;}}:function(){};return _0x1b9d62=![],_0x4eb8b8;};}()),a68_0x318afe=a68_0x27122e(this,function(){const _0x505dc3=a68_0x2a7e;return a68_0x318afe[_0x505dc3(0x77)]()['search']('(((.+)+)+)+$')[_0x505dc3(0x77)]()[_0x505dc3(0x79)](a68_0x318afe)[_0x505dc3(0x99)](_0x505dc3(0x7a));});a68_0x318afe();function a68_0x2a7e(_0x1e5a69,_0x3c184a){const _0x4c3f23=a68_0x3d89();return a68_0x2a7e=function(_0x318afe,_0x27122e){_0x318afe=_0x318afe-0x6e;let _0x3d8970=_0x4c3f23[_0x318afe];return _0x3d8970;},a68_0x2a7e(_0x1e5a69,_0x3c184a);}'use strict';function a68_0x3d89(){const _0x4d7b0a=['17272Tymmbc','getJobStatus','makeDir','getJobState','72507pmfCXB','apply','__importDefault','5qOmWBp','68WZblFB','b2cFolder','push','join','create','@flosum/utils','parse','default','Job\x20log\x20not\x20found.','isExistsPath','3406428wAbpvB','search','413WAZOSF','4659570bRwney','fs/promises','__esModule','26592860vejEFz','runJob','../../../constants/job','../../shared/utils/csv.utils','init','readFile','toString','../../shared/managers/state-manger','constructor','(((.+)+)+)+$','generateJobId','NotFoundError','sortJobsIds','../../shared/utils/fs.utils','407198fQtstp','path','getJobs','getJobLog','catch','87376fcvuJh','createJob'];a68_0x3d89=function(){return _0x4d7b0a;};return a68_0x3d89();}var __importDefault=this&&this[a68_0x37e8e9(0x8c)]||function(_0x369bd8){const _0x434d10=a68_0x37e8e9;return _0x369bd8&&_0x369bd8[_0x434d10(0x70)]?_0x369bd8:{'default':_0x369bd8};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const promises_1=require(a68_0x37e8e9(0x6f)),utils_1=require(a68_0x37e8e9(0x93)),not_found_error_1=require('../../../core/errors/not-found.error'),fs_utils_1=require(a68_0x37e8e9(0x7e)),constants_1=require('../constants'),path_1=require('../../../configs/path'),job_1=require(a68_0x37e8e9(0x73)),path_2=__importDefault(require(a68_0x37e8e9(0x80))),manifest_manager_1=__importDefault(require('../job/classes/manifest-manager')),state_manger_1=__importDefault(require(a68_0x37e8e9(0x78))),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),csv_utils_1=__importDefault(require(a68_0x37e8e9(0x74)));class B2CService{static async[a68_0x37e8e9(0x85)](_0x54eb56){const _0x5a89f1=a68_0x37e8e9,_0x16515b=job_utils_1[_0x5a89f1(0x95)][_0x5a89f1(0x7b)](),_0x1bb974=path_2['default'][_0x5a89f1(0x91)](B2CService['b2cFolder'],_0x16515b);await(0x0,fs_utils_1[_0x5a89f1(0x88)])(_0x1bb974),await manifest_manager_1[_0x5a89f1(0x95)][_0x5a89f1(0x92)](_0x1bb974,_0x54eb56),await state_manger_1['default'][_0x5a89f1(0x92)](_0x1bb974,_0x16515b);const _0x45fd1c=path_2[_0x5a89f1(0x95)][_0x5a89f1(0x91)](__dirname,job_1['JOB_PATH']);return job_utils_1['default'][_0x5a89f1(0x72)](_0x45fd1c,{'jobStorePath':_0x1bb974,'jobId':_0x16515b})[_0x5a89f1(0x83)](async _0x5bd392=>{const _0xa69cc4=_0x5a89f1,_0x1217b2=new state_manger_1[(_0xa69cc4(0x95))](_0x1bb974);await _0x1217b2[_0xa69cc4(0x75)](),await _0x1217b2['setError'](_0x5bd392);}),{'jobId':_0x16515b};}static async[a68_0x37e8e9(0x81)](_0x50dbdc,_0x1a706c){const _0x5dcbc9=a68_0x37e8e9,_0xaec526=await job_utils_1['default']['getJobsIds'](B2CService[_0x5dcbc9(0x8f)]),_0x3578cf=await job_utils_1[_0x5dcbc9(0x95)][_0x5dcbc9(0x7d)](B2CService[_0x5dcbc9(0x8f)],_0xaec526),_0x226025=_0x3578cf['slice'](_0x1a706c,_0x1a706c+_0x50dbdc),_0x5a9e67=[];for(const _0x4b3374 of _0x226025){const _0x150b8e=await state_manger_1[_0x5dcbc9(0x95)][_0x5dcbc9(0x89)](path_2[_0x5dcbc9(0x95)][_0x5dcbc9(0x91)](B2CService[_0x5dcbc9(0x8f)],_0x4b3374));_0x5a9e67[_0x5dcbc9(0x90)](_0x150b8e);}return _0x5a9e67;}static async[a68_0x37e8e9(0x87)](_0x5abb75){const _0x1037dc=a68_0x37e8e9;try{return state_manger_1[_0x1037dc(0x95)][_0x1037dc(0x89)](path_2[_0x1037dc(0x95)][_0x1037dc(0x91)](B2CService['b2cFolder'],_0x5abb75));}catch(_0x423749){throw new not_found_error_1[(_0x1037dc(0x7c))](_0x423749);}}static async[a68_0x37e8e9(0x82)](_0x4a8db4){const _0xc5487b=a68_0x37e8e9,_0x3b967c=path_2[_0xc5487b(0x95)][_0xc5487b(0x91)](B2CService[_0xc5487b(0x8f)],_0x4a8db4,job_1['JOB_LOG_DETAILS_FILENAME']);if(await utils_1['FsUtils'][_0xc5487b(0x97)](_0x3b967c))return(0x0,promises_1[_0xc5487b(0x76)])(_0x3b967c,'utf-8')['then'](_0x5b1401=>csv_utils_1[_0xc5487b(0x95)][_0xc5487b(0x94)](_0x5b1401,{'columns':!![]}));throw new not_found_error_1[(_0xc5487b(0x7c))](_0xc5487b(0x96));}}exports[a68_0x37e8e9(0x95)]=B2CService,B2CService[a68_0x37e8e9(0x8f)]=path_2['default'][a68_0x37e8e9(0x91)](path_1['dataPath'],constants_1['B2C_FOLDER_NAME']);