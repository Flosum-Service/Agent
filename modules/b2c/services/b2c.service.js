const a69_0x576907=a69_0x2ccf;(function(_0x1ad080,_0x55d973){const _0x3d9c1c=a69_0x2ccf,_0x45618f=_0x1ad080();while(!![]){try{const _0x36a10a=parseInt(_0x3d9c1c(0x196))/0x1+-parseInt(_0x3d9c1c(0x1ac))/0x2+parseInt(_0x3d9c1c(0x1c4))/0x3+-parseInt(_0x3d9c1c(0x1a2))/0x4*(-parseInt(_0x3d9c1c(0x1a0))/0x5)+parseInt(_0x3d9c1c(0x199))/0x6*(parseInt(_0x3d9c1c(0x1c8))/0x7)+-parseInt(_0x3d9c1c(0x1a9))/0x8*(parseInt(_0x3d9c1c(0x1c5))/0x9)+-parseInt(_0x3d9c1c(0x1a7))/0xa;if(_0x36a10a===_0x55d973)break;else _0x45618f['push'](_0x45618f['shift']());}catch(_0x335dbf){_0x45618f['push'](_0x45618f['shift']());}}}(a69_0x1c30,0x767a1));const a69_0x42b0a3=(function(){let _0xb6d5b0=!![];return function(_0x5e387e,_0x2537bd){const _0x35d23b=_0xb6d5b0?function(){const _0x358443=a69_0x2ccf;if(_0x2537bd){const _0x1fd636=_0x2537bd[_0x358443(0x1c1)](_0x5e387e,arguments);return _0x2537bd=null,_0x1fd636;}}:function(){};return _0xb6d5b0=![],_0x35d23b;};}()),a69_0x19037a=a69_0x42b0a3(this,function(){const _0x250713=a69_0x2ccf;return a69_0x19037a[_0x250713(0x1ad)]()[_0x250713(0x1bb)]('(((.+)+)+)+$')['toString']()[_0x250713(0x1ae)](a69_0x19037a)['search']('(((.+)+)+)+$');});a69_0x19037a();function a69_0x1c30(){const _0xd0e741=['getJobs','3032743MESjPE','210095ryALYi','init','isExistsPath','6CFxSJI','../../../configs/path','../constants','B2C_FOLDER_NAME','setError','../../shared/utils/job.utils','getJobStatus','65tcYpBl','join','77180QjljKe','parse','dataPath','JOB_PATH','../job/classes/manifest-manager','1708610OsaHQm','__esModule','8FOMPnN','utf-8','@flosum/utils','388406UrhwiR','toString','constructor','getJobsIds','default','fs/promises','getJobState','b2cFolder','../../shared/managers/state-manger','Job\x20log\x20not\x20found.','../../shared/utils/csv.utils','../../shared/utils/fs.utils','slice','defineProperty','getJobLog','search','makeDir','JOB_LOG_DETAILS_FILENAME','path','catch','../../../core/errors/not-found.error','apply','create','generateJobId','992415TJRvlu','3371751vFsQRV','../../../constants/job'];a69_0x1c30=function(){return _0xd0e741;};return a69_0x1c30();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x17f907){const _0x564e75=a69_0x2ccf;return _0x17f907&&_0x17f907[_0x564e75(0x1a8)]?_0x17f907:{'default':_0x17f907};};function a69_0x2ccf(_0x10347e,_0x1c5fd2){const _0x489098=a69_0x1c30();return a69_0x2ccf=function(_0x19037a,_0x42b0a3){_0x19037a=_0x19037a-0x196;let _0x1c304d=_0x489098[_0x19037a];return _0x1c304d;},a69_0x2ccf(_0x10347e,_0x1c5fd2);}Object[a69_0x576907(0x1b9)](exports,a69_0x576907(0x1a8),{'value':!![]});const promises_1=require(a69_0x576907(0x1b1)),utils_1=require(a69_0x576907(0x1ab)),not_found_error_1=require(a69_0x576907(0x1c0)),fs_utils_1=require(a69_0x576907(0x1b7)),constants_1=require(a69_0x576907(0x19b)),path_1=require(a69_0x576907(0x19a)),job_1=require(a69_0x576907(0x1c6)),path_2=__importDefault(require(a69_0x576907(0x1be))),manifest_manager_1=__importDefault(require(a69_0x576907(0x1a6))),state_manger_1=__importDefault(require(a69_0x576907(0x1b4))),job_utils_1=__importDefault(require(a69_0x576907(0x19e))),csv_utils_1=__importDefault(require(a69_0x576907(0x1b6)));class B2CService{static async['createJob'](_0x171a20){const _0x3c3ea8=a69_0x576907,_0x3fd72d=job_utils_1[_0x3c3ea8(0x1b0)][_0x3c3ea8(0x1c3)](),_0x1f968e=path_2['default'][_0x3c3ea8(0x1a1)](B2CService[_0x3c3ea8(0x1b3)],_0x3fd72d);await(0x0,fs_utils_1[_0x3c3ea8(0x1bc)])(_0x1f968e),await manifest_manager_1['default'][_0x3c3ea8(0x1c2)](_0x1f968e,_0x171a20),await state_manger_1[_0x3c3ea8(0x1b0)][_0x3c3ea8(0x1c2)](_0x1f968e,_0x3fd72d);const _0xa4eb06=path_2[_0x3c3ea8(0x1b0)][_0x3c3ea8(0x1a1)](__dirname,job_1[_0x3c3ea8(0x1a5)]);return job_utils_1[_0x3c3ea8(0x1b0)]['runJob'](_0xa4eb06,{'jobStorePath':_0x1f968e,'jobId':_0x3fd72d})[_0x3c3ea8(0x1bf)](async _0x31d0e4=>{const _0x3464f6=_0x3c3ea8,_0x27d652=new state_manger_1[(_0x3464f6(0x1b0))](_0x1f968e);await _0x27d652[_0x3464f6(0x197)](),await _0x27d652[_0x3464f6(0x19d)](_0x31d0e4);}),{'jobId':_0x3fd72d};}static async[a69_0x576907(0x1c7)](_0x160c35,_0x30876e){const _0x26f5a8=a69_0x576907,_0x3fdcb4=await job_utils_1[_0x26f5a8(0x1b0)][_0x26f5a8(0x1af)](B2CService[_0x26f5a8(0x1b3)]),_0x1d7a68=await job_utils_1[_0x26f5a8(0x1b0)]['sortJobsIds'](B2CService[_0x26f5a8(0x1b3)],_0x3fdcb4),_0xe2567f=_0x1d7a68[_0x26f5a8(0x1b8)](_0x30876e,_0x30876e+_0x160c35),_0x4c439a=[];for(const _0x5e5d65 of _0xe2567f){const _0x42f6d2=await state_manger_1['default']['getJobState'](path_2['default'][_0x26f5a8(0x1a1)](B2CService[_0x26f5a8(0x1b3)],_0x5e5d65));_0x4c439a['push'](_0x42f6d2);}return _0x4c439a;}static async[a69_0x576907(0x19f)](_0x55cdab){const _0x3e861f=a69_0x576907;try{return state_manger_1[_0x3e861f(0x1b0)][_0x3e861f(0x1b2)](path_2[_0x3e861f(0x1b0)]['join'](B2CService[_0x3e861f(0x1b3)],_0x55cdab));}catch(_0x586fbd){throw new not_found_error_1['NotFoundError'](_0x586fbd);}}static async[a69_0x576907(0x1ba)](_0x596773){const _0x4c6b8c=a69_0x576907,_0x1f3a8a=path_2[_0x4c6b8c(0x1b0)][_0x4c6b8c(0x1a1)](B2CService['b2cFolder'],_0x596773,job_1[_0x4c6b8c(0x1bd)]);if(await utils_1['FsUtils'][_0x4c6b8c(0x198)](_0x1f3a8a))return(0x0,promises_1['readFile'])(_0x1f3a8a,_0x4c6b8c(0x1aa))['then'](_0x2586ae=>csv_utils_1['default'][_0x4c6b8c(0x1a3)](_0x2586ae,{'columns':!![]}));throw new not_found_error_1['NotFoundError'](_0x4c6b8c(0x1b5));}}exports['default']=B2CService,B2CService[a69_0x576907(0x1b3)]=path_2[a69_0x576907(0x1b0)][a69_0x576907(0x1a1)](path_1[a69_0x576907(0x1a4)],constants_1[a69_0x576907(0x19c)]);