function a69_0xd302(_0x34f17f,_0x5875e0){const _0x384cfe=a69_0x3ca6();return a69_0xd302=function(_0xc44250,_0x24a9a2){_0xc44250=_0xc44250-0xdb;let _0x3ca6d9=_0x384cfe[_0xc44250];return _0x3ca6d9;},a69_0xd302(_0x34f17f,_0x5875e0);}const a69_0xaf36dc=a69_0xd302;(function(_0x537370,_0x1f9443){const _0x5db8b3=a69_0xd302,_0x339da6=_0x537370();while(!![]){try{const _0x46527d=parseInt(_0x5db8b3(0xec))/0x1+-parseInt(_0x5db8b3(0xe6))/0x2*(parseInt(_0x5db8b3(0xe9))/0x3)+parseInt(_0x5db8b3(0xfd))/0x4*(parseInt(_0x5db8b3(0xdc))/0x5)+parseInt(_0x5db8b3(0x109))/0x6*(parseInt(_0x5db8b3(0xed))/0x7)+parseInt(_0x5db8b3(0xdf))/0x8+parseInt(_0x5db8b3(0xfe))/0x9*(-parseInt(_0x5db8b3(0xf3))/0xa)+-parseInt(_0x5db8b3(0xea))/0xb;if(_0x46527d===_0x1f9443)break;else _0x339da6['push'](_0x339da6['shift']());}catch(_0x3cff64){_0x339da6['push'](_0x339da6['shift']());}}}(a69_0x3ca6,0xc3b4b));const a69_0x24a9a2=(function(){let _0x47460e=!![];return function(_0x29f202,_0x371daa){const _0x52b91e=_0x47460e?function(){if(_0x371daa){const _0x269d9d=_0x371daa['apply'](_0x29f202,arguments);return _0x371daa=null,_0x269d9d;}}:function(){};return _0x47460e=![],_0x52b91e;};}()),a69_0xc44250=a69_0x24a9a2(this,function(){const _0x545d1a=a69_0xd302;return a69_0xc44250[_0x545d1a(0xee)]()[_0x545d1a(0xf6)]('(((.+)+)+)+$')[_0x545d1a(0xee)]()[_0x545d1a(0x104)](a69_0xc44250)[_0x545d1a(0xf6)](_0x545d1a(0xff));});a69_0xc44250();'use strict';function a69_0x3ca6(){const _0x5dad1c=['getJobsIds','search','../constants','@flosum/utils','JOB_LOG_DETAILS_FILENAME','create','path','fs/promises','115264klYDnN','333DBOnQL','(((.+)+)+)+$','setError','../../shared/utils/job.utils','cartridges','generateJobId','constructor','finally','createJob','getJobLog','../job/classes/manifest-manager','42xalNYz','dataPath','catch','../../shared/managers/state-manger','../../../core/errors/not-found.error','sortJobsIds','init','../../shared/utils/fs.utils','155ifdaGu','FsUtils','utf-8','8675072YLLIBh','getJobState','B2C_FOLDER_NAME','__esModule','defineProperty','push','../../../configs/path','574uFLyaL','getJobStatus','runJob','393WvENRL','31460407bIZMyE','b2cFolder','1289426HobYdu','1123262MfcTEI','toString','default','join','NotFoundError','../../shared/utils/csv.utils','186790mvOYIH','then'];a69_0x3ca6=function(){return _0x5dad1c;};return a69_0x3ca6();}var __importDefault=this&&this['__importDefault']||function(_0x415f20){const _0x43652e=a69_0xd302;return _0x415f20&&_0x415f20[_0x43652e(0xe2)]?_0x415f20:{'default':_0x415f20};};Object[a69_0xaf36dc(0xe3)](exports,'__esModule',{'value':!![]});const promises_1=require(a69_0xaf36dc(0xfc)),utils_1=require(a69_0xaf36dc(0xf8)),not_found_error_1=require(a69_0xaf36dc(0x10d)),fs_utils_1=require(a69_0xaf36dc(0xdb)),constants_1=require(a69_0xaf36dc(0xf7)),path_1=require(a69_0xaf36dc(0xe5)),job_1=require('../../../constants/job'),path_2=__importDefault(require(a69_0xaf36dc(0xfb))),manifest_manager_1=__importDefault(require(a69_0xaf36dc(0x108))),state_manger_1=__importDefault(require(a69_0xaf36dc(0x10c))),job_utils_1=__importDefault(require(a69_0xaf36dc(0x101))),csv_utils_1=__importDefault(require(a69_0xaf36dc(0xf2)));class B2CService{static async[a69_0xaf36dc(0x106)](_0x3e424f){const _0x61cd5=a69_0xaf36dc,_0x2a5535=job_utils_1[_0x61cd5(0xef)][_0x61cd5(0x103)](),_0x44db02=path_2[_0x61cd5(0xef)]['join'](B2CService[_0x61cd5(0xeb)],_0x2a5535);await(0x0,fs_utils_1['makeDir'])(_0x44db02),await manifest_manager_1[_0x61cd5(0xef)][_0x61cd5(0xfa)](_0x44db02,_0x3e424f),await state_manger_1[_0x61cd5(0xef)]['create'](_0x44db02,_0x2a5535);const _0x5880d9=path_2['default'][_0x61cd5(0xf0)](__dirname,job_1['JOB_PATH']);return job_utils_1['default'][_0x61cd5(0xe8)](_0x5880d9,{'jobStorePath':_0x44db02,'jobId':_0x2a5535})[_0x61cd5(0x10b)](async _0xd582b1=>{const _0x22a0d1=_0x61cd5,_0x362e89=new state_manger_1[(_0x22a0d1(0xef))](_0x44db02);await _0x362e89[_0x22a0d1(0x10f)](),await _0x362e89[_0x22a0d1(0x100)](_0xd582b1);})[_0x61cd5(0x105)](async()=>{const _0x263bf2=_0x61cd5,_0x4e5ff0=path_2[_0x263bf2(0xef)][_0x263bf2(0xf0)](_0x44db02,_0x263bf2(0x102));await(0x0,promises_1['rm'])(_0x4e5ff0,{'recursive':!![],'force':!![]});}),{'jobId':_0x2a5535};}static async['getJobs'](_0x472a56,_0x4f8694){const _0xd75df7=a69_0xaf36dc,_0x4d65e3=await job_utils_1['default'][_0xd75df7(0xf5)](B2CService['b2cFolder']),_0x1ccc12=await job_utils_1[_0xd75df7(0xef)][_0xd75df7(0x10e)](B2CService[_0xd75df7(0xeb)],_0x4d65e3),_0x261e22=_0x1ccc12['slice'](_0x4f8694,_0x4f8694+_0x472a56),_0x3f7080=[];for(const _0x64c107 of _0x261e22){const _0xc150a7=await state_manger_1[_0xd75df7(0xef)][_0xd75df7(0xe0)](path_2[_0xd75df7(0xef)][_0xd75df7(0xf0)](B2CService[_0xd75df7(0xeb)],_0x64c107));_0x3f7080[_0xd75df7(0xe4)](_0xc150a7);}return _0x3f7080;}static async[a69_0xaf36dc(0xe7)](_0x2f36f1){const _0x14a0b3=a69_0xaf36dc;try{return state_manger_1[_0x14a0b3(0xef)][_0x14a0b3(0xe0)](path_2['default'][_0x14a0b3(0xf0)](B2CService[_0x14a0b3(0xeb)],_0x2f36f1));}catch(_0x2d8b0c){throw new not_found_error_1['NotFoundError'](_0x2d8b0c);}}static async[a69_0xaf36dc(0x107)](_0x46193f){const _0x23f48f=a69_0xaf36dc,_0x73aaa2=path_2[_0x23f48f(0xef)]['join'](B2CService[_0x23f48f(0xeb)],_0x46193f,job_1[_0x23f48f(0xf9)]);if(await utils_1[_0x23f48f(0xdd)]['isExistsPath'](_0x73aaa2))return(0x0,promises_1['readFile'])(_0x73aaa2,_0x23f48f(0xde))[_0x23f48f(0xf4)](_0x1b2993=>csv_utils_1['default']['parse'](_0x1b2993,{'columns':!![]}));throw new not_found_error_1[(_0x23f48f(0xf1))]('Job\x20log\x20not\x20found.');}}exports[a69_0xaf36dc(0xef)]=B2CService,B2CService['b2cFolder']=path_2[a69_0xaf36dc(0xef)][a69_0xaf36dc(0xf0)](path_1[a69_0xaf36dc(0x10a)],constants_1[a69_0xaf36dc(0xe1)]);