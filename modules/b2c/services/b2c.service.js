const a67_0x275792=a67_0x57be;(function(_0xc97c5c,_0x4268d3){const _0x14a8b1=a67_0x57be,_0x329299=_0xc97c5c();while(!![]){try{const _0x49d861=-parseInt(_0x14a8b1(0x10c))/0x1+-parseInt(_0x14a8b1(0xf9))/0x2*(parseInt(_0x14a8b1(0xf0))/0x3)+-parseInt(_0x14a8b1(0x101))/0x4*(parseInt(_0x14a8b1(0x110))/0x5)+-parseInt(_0x14a8b1(0x10e))/0x6+parseInt(_0x14a8b1(0x107))/0x7*(parseInt(_0x14a8b1(0xf3))/0x8)+parseInt(_0x14a8b1(0xfc))/0x9*(-parseInt(_0x14a8b1(0xff))/0xa)+parseInt(_0x14a8b1(0xf4))/0xb*(parseInt(_0x14a8b1(0xfe))/0xc);if(_0x49d861===_0x4268d3)break;else _0x329299['push'](_0x329299['shift']());}catch(_0x44a268){_0x329299['push'](_0x329299['shift']());}}}(a67_0x32a5,0xae8df));const a67_0x41c9a6=(function(){let _0x2c9103=!![];return function(_0x3ca561,_0x2bb44e){const _0x28416a=_0x2c9103?function(){const _0x5b558f=a67_0x57be;if(_0x2bb44e){const _0x5d953b=_0x2bb44e[_0x5b558f(0xef)](_0x3ca561,arguments);return _0x2bb44e=null,_0x5d953b;}}:function(){};return _0x2c9103=![],_0x28416a;};}()),a67_0x5318ff=a67_0x41c9a6(this,function(){const _0x5c69d7=a67_0x57be;return a67_0x5318ff['toString']()[_0x5c69d7(0x113)](_0x5c69d7(0xea))['toString']()['constructor'](a67_0x5318ff)[_0x5c69d7(0x113)](_0x5c69d7(0xea));});a67_0x5318ff();'use strict';function a67_0x32a5(){const _0x11b64f=['(((.+)+)+)+$','catch','getJobs','../../shared/utils/job.utils','NotFoundError','apply','15vFeHSP','../../shared/managers/state-manger','../../shared/utils/fs.utils','1075528VDVbsI','165363Ordkqx','defineProperty','getJobsIds','default','../../shared/utils/csv.utils','38794WTSfRD','getJobLog','createJob','16101JsGjAO','create','2964eKaNdK','6010eUjUNm','readFile','817900nzklTi','getJobStatus','fs/promises','FsUtils','JOB_PATH','b2cFolder','21ZYtoPm','../../../core/errors/not-found.error','getJobState','__esModule','init','1400967dOEjry','../job/classes/manifest-manager','1289598sObeVa','join','15rNgUVS','Job\x20log\x20not\x20found.','dataPath','search','../constants','parse','JOB_LOG_DETAILS_FILENAME','utf-8','@flosum/utils','setError','runJob','generateJobId'];a67_0x32a5=function(){return _0x11b64f;};return a67_0x32a5();}var __importDefault=this&&this['__importDefault']||function(_0x42df51){const _0x3fb920=a67_0x57be;return _0x42df51&&_0x42df51[_0x3fb920(0x10a)]?_0x42df51:{'default':_0x42df51};};Object[a67_0x275792(0xf5)](exports,a67_0x275792(0x10a),{'value':!![]});const promises_1=require(a67_0x275792(0x103)),utils_1=require(a67_0x275792(0xe6)),not_found_error_1=require(a67_0x275792(0x108)),fs_utils_1=require(a67_0x275792(0xf2)),constants_1=require(a67_0x275792(0xe2)),path_1=require('../../../configs/path'),job_1=require('../../../constants/job'),path_2=__importDefault(require('path')),manifest_manager_1=__importDefault(require(a67_0x275792(0x10d))),state_manger_1=__importDefault(require(a67_0x275792(0xf1))),job_utils_1=__importDefault(require(a67_0x275792(0xed))),csv_utils_1=__importDefault(require(a67_0x275792(0xf8)));class B2CService{static async[a67_0x275792(0xfb)](_0x2f56b1){const _0x54a651=a67_0x275792,_0x5b644a=job_utils_1[_0x54a651(0xf7)][_0x54a651(0xe9)](),_0x2d9649=path_2['default'][_0x54a651(0x10f)](B2CService[_0x54a651(0x106)],_0x5b644a);await(0x0,fs_utils_1['makeDir'])(_0x2d9649),await manifest_manager_1[_0x54a651(0xf7)]['create'](_0x2d9649,_0x2f56b1),await state_manger_1['default'][_0x54a651(0xfd)](_0x2d9649,_0x5b644a);const _0x3a70e6=path_2[_0x54a651(0xf7)][_0x54a651(0x10f)](__dirname,job_1[_0x54a651(0x105)]);return job_utils_1[_0x54a651(0xf7)][_0x54a651(0xe8)](_0x3a70e6,{'jobStorePath':_0x2d9649,'jobId':_0x5b644a})[_0x54a651(0xeb)](async _0x29b89d=>{const _0x3b09aa=_0x54a651,_0x790f11=new state_manger_1[(_0x3b09aa(0xf7))](_0x2d9649);await _0x790f11[_0x3b09aa(0x10b)](),await _0x790f11[_0x3b09aa(0xe7)](_0x29b89d);}),{'jobId':_0x5b644a};}static async[a67_0x275792(0xec)](_0x38c18f,_0x26e860){const _0x186e8e=a67_0x275792,_0x522efd=await job_utils_1[_0x186e8e(0xf7)][_0x186e8e(0xf6)](B2CService[_0x186e8e(0x106)]),_0x181ba9=await job_utils_1[_0x186e8e(0xf7)]['sortJobsIds'](B2CService[_0x186e8e(0x106)],_0x522efd),_0x129e91=_0x181ba9['slice'](_0x26e860,_0x26e860+_0x38c18f),_0x2780f7=[];for(const _0x4dc943 of _0x129e91){const _0x25311e=await state_manger_1[_0x186e8e(0xf7)][_0x186e8e(0x109)](path_2[_0x186e8e(0xf7)][_0x186e8e(0x10f)](B2CService[_0x186e8e(0x106)],_0x4dc943));_0x2780f7['push'](_0x25311e);}return _0x2780f7;}static async[a67_0x275792(0x102)](_0x3ec85a){const _0x5f0fa6=a67_0x275792;try{return state_manger_1[_0x5f0fa6(0xf7)]['getJobState'](path_2[_0x5f0fa6(0xf7)][_0x5f0fa6(0x10f)](B2CService[_0x5f0fa6(0x106)],_0x3ec85a));}catch(_0x216ce8){throw new not_found_error_1[(_0x5f0fa6(0xee))](_0x216ce8);}}static async[a67_0x275792(0xfa)](_0x16e0e1){const _0xcea3d8=a67_0x275792,_0x494dc1=path_2[_0xcea3d8(0xf7)][_0xcea3d8(0x10f)](B2CService[_0xcea3d8(0x106)],_0x16e0e1,job_1[_0xcea3d8(0xe4)]);if(await utils_1[_0xcea3d8(0x104)]['isExistsPath'](_0x494dc1))return(0x0,promises_1[_0xcea3d8(0x100)])(_0x494dc1,_0xcea3d8(0xe5))['then'](_0x106481=>csv_utils_1[_0xcea3d8(0xf7)][_0xcea3d8(0xe3)](_0x106481,{'columns':!![]}));throw new not_found_error_1[(_0xcea3d8(0xee))](_0xcea3d8(0x111));}}function a67_0x57be(_0x5ebf4d,_0x16178f){const _0x12f37a=a67_0x32a5();return a67_0x57be=function(_0x5318ff,_0x41c9a6){_0x5318ff=_0x5318ff-0xe2;let _0x32a50c=_0x12f37a[_0x5318ff];return _0x32a50c;},a67_0x57be(_0x5ebf4d,_0x16178f);}exports[a67_0x275792(0xf7)]=B2CService,B2CService[a67_0x275792(0x106)]=path_2[a67_0x275792(0xf7)]['join'](path_1[a67_0x275792(0x112)],constants_1['B2C_FOLDER_NAME']);