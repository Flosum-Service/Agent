const a69_0x44a243=a69_0x5147;(function(_0x4da48f,_0x544b65){const _0xfc9713=a69_0x5147,_0x427bf3=_0x4da48f();while(!![]){try{const _0x11d447=parseInt(_0xfc9713(0x16c))/0x1*(parseInt(_0xfc9713(0x162))/0x2)+parseInt(_0xfc9713(0x168))/0x3+parseInt(_0xfc9713(0x15c))/0x4+-parseInt(_0xfc9713(0x15a))/0x5*(parseInt(_0xfc9713(0x153))/0x6)+parseInt(_0xfc9713(0x14c))/0x7+-parseInt(_0xfc9713(0x160))/0x8*(parseInt(_0xfc9713(0x166))/0x9)+parseInt(_0xfc9713(0x145))/0xa;if(_0x11d447===_0x544b65)break;else _0x427bf3['push'](_0x427bf3['shift']());}catch(_0x4d84ee){_0x427bf3['push'](_0x427bf3['shift']());}}}(a69_0x459c,0xdf1ce));const a69_0x1168c4=(function(){let _0x86cf75=!![];return function(_0x27e698,_0x5e9256){const _0x534650=_0x86cf75?function(){const _0x182c2d=a69_0x5147;if(_0x5e9256){const _0xa9fc45=_0x5e9256[_0x182c2d(0x14d)](_0x27e698,arguments);return _0x5e9256=null,_0xa9fc45;}}:function(){};return _0x86cf75=![],_0x534650;};}()),a69_0x3fb129=a69_0x1168c4(this,function(){const _0x2a4ac6=a69_0x5147;return a69_0x3fb129[_0x2a4ac6(0x15b)]()[_0x2a4ac6(0x170)](_0x2a4ac6(0x144))[_0x2a4ac6(0x15b)]()[_0x2a4ac6(0x164)](a69_0x3fb129)['search']('(((.+)+)+)+$');});a69_0x3fb129();'use strict';var __importDefault=this&&this[a69_0x44a243(0x152)]||function(_0x39c898){const _0x5edad3=a69_0x44a243;return _0x39c898&&_0x39c898[_0x5edad3(0x14b)]?_0x39c898:{'default':_0x39c898};};Object[a69_0x44a243(0x158)](exports,a69_0x44a243(0x14b),{'value':!![]});const promises_1=require(a69_0x44a243(0x155)),utils_1=require('@flosum/utils'),not_found_error_1=require(a69_0x44a243(0x141)),fs_utils_1=require('../../shared/utils/fs.utils'),constants_1=require(a69_0x44a243(0x14e)),path_1=require(a69_0x44a243(0x14a)),job_1=require(a69_0x44a243(0x15f)),path_2=__importDefault(require(a69_0x44a243(0x16e))),manifest_manager_1=__importDefault(require(a69_0x44a243(0x165))),state_manger_1=__importDefault(require('../../shared/managers/state-manger')),job_utils_1=__importDefault(require(a69_0x44a243(0x161))),csv_utils_1=__importDefault(require('../../shared/utils/csv.utils'));class B2CService{static async[a69_0x44a243(0x147)](_0x189285){const _0x3e83b3=a69_0x44a243,_0x2b3a9b=job_utils_1[_0x3e83b3(0x16f)][_0x3e83b3(0x159)](),_0x2ff0ed=path_2['default']['join'](B2CService['b2cFolder'],_0x2b3a9b);await(0x0,fs_utils_1['makeDir'])(_0x2ff0ed),await manifest_manager_1[_0x3e83b3(0x16f)]['create'](_0x2ff0ed,_0x189285),await state_manger_1['default']['create'](_0x2ff0ed,_0x2b3a9b);const _0x546641=path_2[_0x3e83b3(0x16f)][_0x3e83b3(0x14f)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x3e83b3(0x16f)]['runJob'](_0x546641,{'jobStorePath':_0x2ff0ed,'jobId':_0x2b3a9b})['catch'](async _0x5d03a0=>{const _0x3eb425=_0x3e83b3,_0x2a17f1=new state_manger_1[(_0x3eb425(0x16f))](_0x2ff0ed);await _0x2a17f1['init'](),await _0x2a17f1[_0x3eb425(0x16b)](_0x5d03a0);})[_0x3e83b3(0x16d)](async()=>{const _0x223f5d=_0x3e83b3,_0x32111b=path_2['default']['join'](_0x2ff0ed,_0x223f5d(0x16a));await(0x0,promises_1['rm'])(_0x32111b,{'recursive':!![],'force':!![]});}),{'jobId':_0x2b3a9b};}static async[a69_0x44a243(0x157)](_0x377f01,_0x4e4c4c){const _0x49b1f3=a69_0x44a243,_0x2f9d73=await job_utils_1[_0x49b1f3(0x16f)]['getJobsIds'](B2CService['b2cFolder']),_0x14a847=await job_utils_1['default'][_0x49b1f3(0x148)](B2CService[_0x49b1f3(0x146)],_0x2f9d73),_0x45379c=_0x14a847[_0x49b1f3(0x154)](_0x4e4c4c,_0x4e4c4c+_0x377f01),_0x2dfede=[];for(const _0x5a33c0 of _0x45379c){const _0x36feae=await state_manger_1[_0x49b1f3(0x16f)][_0x49b1f3(0x15e)](path_2['default'][_0x49b1f3(0x14f)](B2CService[_0x49b1f3(0x146)],_0x5a33c0));_0x2dfede[_0x49b1f3(0x151)](_0x36feae);}return _0x2dfede;}static async[a69_0x44a243(0x140)](_0x43a891){const _0x58fd03=a69_0x44a243;try{return state_manger_1['default'][_0x58fd03(0x15e)](path_2[_0x58fd03(0x16f)][_0x58fd03(0x14f)](B2CService[_0x58fd03(0x146)],_0x43a891));}catch(_0x2606aa){throw new not_found_error_1[(_0x58fd03(0x143))](_0x2606aa);}}static async[a69_0x44a243(0x169)](_0x2ee932){const _0x63da77=a69_0x44a243,_0x436cf7=path_2[_0x63da77(0x16f)][_0x63da77(0x14f)](B2CService[_0x63da77(0x146)],_0x2ee932,job_1[_0x63da77(0x142)]);if(await utils_1['FsUtils']['isExistsPath'](_0x436cf7))return(0x0,promises_1[_0x63da77(0x149)])(_0x436cf7,_0x63da77(0x156))[_0x63da77(0x167)](_0x122aa1=>csv_utils_1[_0x63da77(0x16f)]['parse'](_0x122aa1,{'columns':!![]}));throw new not_found_error_1[(_0x63da77(0x143))](_0x63da77(0x15d));}}function a69_0x5147(_0x2ae01e,_0x1bc2a9){const _0x22abd3=a69_0x459c();return a69_0x5147=function(_0x3fb129,_0x1168c4){_0x3fb129=_0x3fb129-0x140;let _0x459c43=_0x22abd3[_0x3fb129];return _0x459c43;},a69_0x5147(_0x2ae01e,_0x1bc2a9);}function a69_0x459c(){const _0x5f3b1e=['798jQKrOT','slice','fs/promises','utf-8','getJobs','defineProperty','generateJobId','33805kJXHBU','toString','2011508iWfwcC','Job\x20log\x20not\x20found.','getJobState','../../../constants/job','12145912EVeoKJ','../../shared/utils/job.utils','3060124dqcody','B2C_FOLDER_NAME','constructor','../job/classes/manifest-manager','9tlapbX','then','93744AUQFEw','getJobLog','cartridges','setError','1KrHcXD','finally','path','default','search','getJobStatus','../../../core/errors/not-found.error','JOB_LOG_DETAILS_FILENAME','NotFoundError','(((.+)+)+)+$','4916300hElFwr','b2cFolder','createJob','sortJobsIds','readFile','../../../configs/path','__esModule','5428535fjEewJ','apply','../constants','join','dataPath','push','__importDefault'];a69_0x459c=function(){return _0x5f3b1e;};return a69_0x459c();}exports[a69_0x44a243(0x16f)]=B2CService,B2CService[a69_0x44a243(0x146)]=path_2['default'][a69_0x44a243(0x14f)](path_1[a69_0x44a243(0x150)],constants_1[a69_0x44a243(0x163)]);