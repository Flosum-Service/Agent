function a69_0x104f(){const _0xe77b00=['isExistsPath','838263RhgbKi','catch','../../../configs/path','@flosum/utils','slice','generateJobId','6682260qKYksU','__esModule','../constants','getJobsIds','parse','toString','857664prNsyG','664YeOXTs','B2C_FOLDER_NAME','__importDefault','getJobState','cartridges','path','constructor','join','110490rrjalW','defineProperty','apply','../../shared/utils/csv.utils','dataPath','../../../constants/job','setError','../../shared/utils/fs.utils','../job/classes/manifest-manager','2976880DGwuTJ','getJobs','737UWyqDy','../../shared/utils/job.utils','default','124317pTYsJU','push','finally','NotFoundError','(((.+)+)+)+$','runJob','FsUtils','1205734NFOQLX','3XwhMbr','create','createJob','getJobLog','../../../core/errors/not-found.error','search','Job\x20log\x20not\x20found.','42GdhjpL','JOB_PATH','b2cFolder'];a69_0x104f=function(){return _0xe77b00;};return a69_0x104f();}function a69_0x2678(_0x2f266b,_0x35de3a){const _0x556aa7=a69_0x104f();return a69_0x2678=function(_0x49ec07,_0x12fc65){_0x49ec07=_0x49ec07-0x1ee;let _0x104f22=_0x556aa7[_0x49ec07];return _0x104f22;},a69_0x2678(_0x2f266b,_0x35de3a);}const a69_0x3902bd=a69_0x2678;(function(_0x112331,_0x4dc142){const _0x5cfc3b=a69_0x2678,_0x486730=_0x112331();while(!![]){try{const _0x131c0c=-parseInt(_0x5cfc3b(0x1f5))/0x1+parseInt(_0x5cfc3b(0x21f))/0x2+parseInt(_0x5cfc3b(0x220))/0x3*(parseInt(_0x5cfc3b(0x213))/0x4)+parseInt(_0x5cfc3b(0x1fb))/0x5+-parseInt(_0x5cfc3b(0x201))/0x6*(-parseInt(_0x5cfc3b(0x1f1))/0x7)+parseInt(_0x5cfc3b(0x202))/0x8*(-parseInt(_0x5cfc3b(0x218))/0x9)+-parseInt(_0x5cfc3b(0x20a))/0xa*(parseInt(_0x5cfc3b(0x215))/0xb);if(_0x131c0c===_0x4dc142)break;else _0x486730['push'](_0x486730['shift']());}catch(_0x501daa){_0x486730['push'](_0x486730['shift']());}}}(a69_0x104f,0xc7432));const a69_0x12fc65=(function(){let _0x5676ac=!![];return function(_0x44cc0c,_0x546e76){const _0x2c5847=_0x5676ac?function(){const _0x3e921b=a69_0x2678;if(_0x546e76){const _0x5cea7f=_0x546e76[_0x3e921b(0x20c)](_0x44cc0c,arguments);return _0x546e76=null,_0x5cea7f;}}:function(){};return _0x5676ac=![],_0x2c5847;};}()),a69_0x49ec07=a69_0x12fc65(this,function(){const _0x229bad=a69_0x2678;return a69_0x49ec07[_0x229bad(0x200)]()[_0x229bad(0x1ef)](_0x229bad(0x21c))[_0x229bad(0x200)]()[_0x229bad(0x208)](a69_0x49ec07)['search'](_0x229bad(0x21c));});a69_0x49ec07();'use strict';var __importDefault=this&&this[a69_0x3902bd(0x204)]||function(_0xea70d9){const _0x369722=a69_0x3902bd;return _0xea70d9&&_0xea70d9[_0x369722(0x1fc)]?_0xea70d9:{'default':_0xea70d9};};Object[a69_0x3902bd(0x20b)](exports,a69_0x3902bd(0x1fc),{'value':!![]});const promises_1=require('fs/promises'),utils_1=require(a69_0x3902bd(0x1f8)),not_found_error_1=require(a69_0x3902bd(0x1ee)),fs_utils_1=require(a69_0x3902bd(0x211)),constants_1=require(a69_0x3902bd(0x1fd)),path_1=require(a69_0x3902bd(0x1f7)),job_1=require(a69_0x3902bd(0x20f)),path_2=__importDefault(require(a69_0x3902bd(0x207))),manifest_manager_1=__importDefault(require(a69_0x3902bd(0x212))),state_manger_1=__importDefault(require('../../shared/managers/state-manger')),job_utils_1=__importDefault(require(a69_0x3902bd(0x216))),csv_utils_1=__importDefault(require(a69_0x3902bd(0x20d)));class B2CService{static async[a69_0x3902bd(0x222)](_0xfc523c){const _0x434cc2=a69_0x3902bd,_0x3da087=job_utils_1[_0x434cc2(0x217)][_0x434cc2(0x1fa)](),_0x9e3a77=path_2[_0x434cc2(0x217)][_0x434cc2(0x209)](B2CService[_0x434cc2(0x1f3)],_0x3da087);await(0x0,fs_utils_1['makeDir'])(_0x9e3a77),await manifest_manager_1[_0x434cc2(0x217)][_0x434cc2(0x221)](_0x9e3a77,_0xfc523c),await state_manger_1[_0x434cc2(0x217)]['create'](_0x9e3a77,_0x3da087);const _0x1214bc=path_2[_0x434cc2(0x217)]['join'](__dirname,job_1[_0x434cc2(0x1f2)]);return job_utils_1['default'][_0x434cc2(0x21d)](_0x1214bc,{'jobStorePath':_0x9e3a77,'jobId':_0x3da087})[_0x434cc2(0x1f6)](async _0x291358=>{const _0x4cc024=_0x434cc2,_0x15d8bd=new state_manger_1[(_0x4cc024(0x217))](_0x9e3a77);await _0x15d8bd['init'](),await _0x15d8bd[_0x4cc024(0x210)](_0x291358);})[_0x434cc2(0x21a)](async()=>{const _0x541649=_0x434cc2,_0x1bb7f2=path_2['default'][_0x541649(0x209)](_0x9e3a77,_0x541649(0x206));await(0x0,promises_1['rm'])(_0x1bb7f2,{'recursive':!![],'force':!![]});}),{'jobId':_0x3da087};}static async[a69_0x3902bd(0x214)](_0x495b09,_0x32d89c){const _0xb0aec3=a69_0x3902bd,_0x450874=await job_utils_1[_0xb0aec3(0x217)][_0xb0aec3(0x1fe)](B2CService[_0xb0aec3(0x1f3)]),_0xc93b88=await job_utils_1[_0xb0aec3(0x217)]['sortJobsIds'](B2CService[_0xb0aec3(0x1f3)],_0x450874),_0x253f39=_0xc93b88[_0xb0aec3(0x1f9)](_0x32d89c,_0x32d89c+_0x495b09),_0x1d04ca=[];for(const _0x252a44 of _0x253f39){const _0x33745d=await state_manger_1[_0xb0aec3(0x217)][_0xb0aec3(0x205)](path_2[_0xb0aec3(0x217)]['join'](B2CService[_0xb0aec3(0x1f3)],_0x252a44));_0x1d04ca[_0xb0aec3(0x219)](_0x33745d);}return _0x1d04ca;}static async['getJobStatus'](_0x12a13b){const _0x4d3035=a69_0x3902bd;try{return state_manger_1[_0x4d3035(0x217)][_0x4d3035(0x205)](path_2['default'][_0x4d3035(0x209)](B2CService[_0x4d3035(0x1f3)],_0x12a13b));}catch(_0x101611){throw new not_found_error_1[(_0x4d3035(0x21b))](_0x101611);}}static async[a69_0x3902bd(0x223)](_0x4cca4d){const _0x322f13=a69_0x3902bd,_0x4c7eb7=path_2[_0x322f13(0x217)][_0x322f13(0x209)](B2CService[_0x322f13(0x1f3)],_0x4cca4d,job_1['JOB_LOG_DETAILS_FILENAME']);if(await utils_1[_0x322f13(0x21e)][_0x322f13(0x1f4)](_0x4c7eb7))return(0x0,promises_1['readFile'])(_0x4c7eb7,'utf-8')['then'](_0x27ce96=>csv_utils_1[_0x322f13(0x217)][_0x322f13(0x1ff)](_0x27ce96,{'columns':!![]}));throw new not_found_error_1[(_0x322f13(0x21b))](_0x322f13(0x1f0));}}exports['default']=B2CService,B2CService[a69_0x3902bd(0x1f3)]=path_2[a69_0x3902bd(0x217)]['join'](path_1[a69_0x3902bd(0x20e)],constants_1[a69_0x3902bd(0x203)]);