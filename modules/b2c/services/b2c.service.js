function a69_0x27b9(){const _0x474c8a=['b2cFolder','2mEVfnX','NotFoundError','(((.+)+)+)+$','create','1107aBnnuh','isExistsPath','__esModule','JOB_LOG_DETAILS_FILENAME','runJob','default','Job\x20log\x20not\x20found.','2166576QzcLqq','../../shared/utils/fs.utils','../job/classes/manifest-manager','createJob','../../../constants/job','../../shared/utils/job.utils','catch','JOB_PATH','40701thJSTg','makeDir','../../shared/managers/state-manger','getJobState','138141mPAcNT','join','parse','B2C_FOLDER_NAME','441350PKfYTB','31848PXUOpa','173350vFDvPL','12mlSGHD','getJobs','defineProperty','generateJobId','setError','apply','fs/promises','search','dataPath','constructor','42nNyXES','380nMEvAT','init','sortJobsIds','../../shared/utils/csv.utils','83446fBdzyM','getJobsIds','slice','then','cartridges','../../../core/errors/not-found.error','readFile','toString','13LwcKqC'];a69_0x27b9=function(){return _0x474c8a;};return a69_0x27b9();}const a69_0x13ce17=a69_0x24f5;(function(_0x58464c,_0x1c20f8){const _0x37711c=a69_0x24f5,_0x4f74fc=_0x58464c();while(!![]){try{const _0x51ef6a=parseInt(_0x37711c(0xe9))/0x1*(parseInt(_0x37711c(0x109))/0x2)+-parseInt(_0x37711c(0xe5))/0x3*(-parseInt(_0x37711c(0xf0))/0x4)+-parseInt(_0x37711c(0xef))/0x5*(parseInt(_0x37711c(0xfa))/0x6)+parseInt(_0x37711c(0xed))/0x7+-parseInt(_0x37711c(0xee))/0x8*(-parseInt(_0x37711c(0x10d))/0x9)+parseInt(_0x37711c(0xfb))/0xa*(-parseInt(_0x37711c(0xff))/0xb)+parseInt(_0x37711c(0x114))/0xc*(parseInt(_0x37711c(0x107))/0xd);if(_0x51ef6a===_0x1c20f8)break;else _0x4f74fc['push'](_0x4f74fc['shift']());}catch(_0x3dc18e){_0x4f74fc['push'](_0x4f74fc['shift']());}}}(a69_0x27b9,0x5d0d9));const a69_0x17099a=(function(){let _0x4bab48=!![];return function(_0xf7b7c4,_0x58962e){const _0x16cb77=_0x4bab48?function(){const _0x4bac95=a69_0x24f5;if(_0x58962e){const _0x529b04=_0x58962e[_0x4bac95(0xf5)](_0xf7b7c4,arguments);return _0x58962e=null,_0x529b04;}}:function(){};return _0x4bab48=![],_0x16cb77;};}()),a69_0x10fb48=a69_0x17099a(this,function(){const _0x3ea7ca=a69_0x24f5;return a69_0x10fb48['toString']()[_0x3ea7ca(0xf7)](_0x3ea7ca(0x10b))[_0x3ea7ca(0x106)]()[_0x3ea7ca(0xf9)](a69_0x10fb48)[_0x3ea7ca(0xf7)](_0x3ea7ca(0x10b));});a69_0x10fb48();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x56093a){const _0x1e6bff=a69_0x24f5;return _0x56093a&&_0x56093a[_0x1e6bff(0x10f)]?_0x56093a:{'default':_0x56093a};};function a69_0x24f5(_0x306b41,_0x23563a){const _0x159118=a69_0x27b9();return a69_0x24f5=function(_0x10fb48,_0x17099a){_0x10fb48=_0x10fb48-0xdf;let _0x27b991=_0x159118[_0x10fb48];return _0x27b991;},a69_0x24f5(_0x306b41,_0x23563a);}Object[a69_0x13ce17(0xf2)](exports,'__esModule',{'value':!![]});const promises_1=require(a69_0x13ce17(0xf6)),utils_1=require('@flosum/utils'),not_found_error_1=require(a69_0x13ce17(0x104)),fs_utils_1=require(a69_0x13ce17(0x115)),constants_1=require('../constants'),path_1=require('../../../configs/path'),job_1=require(a69_0x13ce17(0xe1)),path_2=__importDefault(require('path')),manifest_manager_1=__importDefault(require(a69_0x13ce17(0xdf))),state_manger_1=__importDefault(require(a69_0x13ce17(0xe7))),job_utils_1=__importDefault(require(a69_0x13ce17(0xe2))),csv_utils_1=__importDefault(require(a69_0x13ce17(0xfe)));class B2CService{static async[a69_0x13ce17(0xe0)](_0x2319f4){const _0x22750e=a69_0x13ce17,_0x2c32e8=job_utils_1[_0x22750e(0x112)][_0x22750e(0xf3)](),_0xc10959=path_2[_0x22750e(0x112)][_0x22750e(0xea)](B2CService['b2cFolder'],_0x2c32e8);await(0x0,fs_utils_1[_0x22750e(0xe6)])(_0xc10959),await manifest_manager_1[_0x22750e(0x112)][_0x22750e(0x10c)](_0xc10959,_0x2319f4),await state_manger_1[_0x22750e(0x112)][_0x22750e(0x10c)](_0xc10959,_0x2c32e8);const _0xae9559=path_2[_0x22750e(0x112)][_0x22750e(0xea)](__dirname,job_1[_0x22750e(0xe4)]);return job_utils_1[_0x22750e(0x112)][_0x22750e(0x111)](_0xae9559,{'jobStorePath':_0xc10959,'jobId':_0x2c32e8})[_0x22750e(0xe3)](async _0x2a1929=>{const _0x39814c=_0x22750e,_0x50c7ea=new state_manger_1[(_0x39814c(0x112))](_0xc10959);await _0x50c7ea[_0x39814c(0xfc)](),await _0x50c7ea[_0x39814c(0xf4)](_0x2a1929);})['finally'](async()=>{const _0x540d95=_0x22750e,_0x520cb8=path_2[_0x540d95(0x112)][_0x540d95(0xea)](_0xc10959,_0x540d95(0x103));await(0x0,promises_1['rm'])(_0x520cb8,{'recursive':!![],'force':!![]});}),{'jobId':_0x2c32e8};}static async[a69_0x13ce17(0xf1)](_0x11799b,_0x579a06){const _0x32d783=a69_0x13ce17,_0x175f13=await job_utils_1['default'][_0x32d783(0x100)](B2CService[_0x32d783(0x108)]),_0x42ab6e=await job_utils_1[_0x32d783(0x112)][_0x32d783(0xfd)](B2CService[_0x32d783(0x108)],_0x175f13),_0x253d53=_0x42ab6e[_0x32d783(0x101)](_0x579a06,_0x579a06+_0x11799b),_0x155306=[];for(const _0x4ca5a3 of _0x253d53){const _0x15c896=await state_manger_1['default'][_0x32d783(0xe8)](path_2[_0x32d783(0x112)]['join'](B2CService[_0x32d783(0x108)],_0x4ca5a3));_0x155306['push'](_0x15c896);}return _0x155306;}static async['getJobStatus'](_0x4760fe){const _0xd3424=a69_0x13ce17;try{return state_manger_1[_0xd3424(0x112)][_0xd3424(0xe8)](path_2['default']['join'](B2CService[_0xd3424(0x108)],_0x4760fe));}catch(_0x792fc7){throw new not_found_error_1[(_0xd3424(0x10a))](_0x792fc7);}}static async['getJobLog'](_0x327a02){const _0x4131c7=a69_0x13ce17,_0x52e9b6=path_2[_0x4131c7(0x112)][_0x4131c7(0xea)](B2CService[_0x4131c7(0x108)],_0x327a02,job_1[_0x4131c7(0x110)]);if(await utils_1['FsUtils'][_0x4131c7(0x10e)](_0x52e9b6))return(0x0,promises_1[_0x4131c7(0x105)])(_0x52e9b6,'utf-8')[_0x4131c7(0x102)](_0x3ce587=>csv_utils_1[_0x4131c7(0x112)][_0x4131c7(0xeb)](_0x3ce587,{'columns':!![]}));throw new not_found_error_1[(_0x4131c7(0x10a))](_0x4131c7(0x113));}}exports[a69_0x13ce17(0x112)]=B2CService,B2CService[a69_0x13ce17(0x108)]=path_2[a69_0x13ce17(0x112)][a69_0x13ce17(0xea)](path_1[a69_0x13ce17(0xf8)],constants_1[a69_0x13ce17(0xec)]);