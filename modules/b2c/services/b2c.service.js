const a69_0x44af6f=a69_0x86be;(function(_0x116a3d,_0x2be03f){const _0x354b47=a69_0x86be,_0x2d023f=_0x116a3d();while(!![]){try{const _0x18b292=-parseInt(_0x354b47(0x19a))/0x1+parseInt(_0x354b47(0x1a9))/0x2+-parseInt(_0x354b47(0x1b7))/0x3+parseInt(_0x354b47(0x1af))/0x4*(-parseInt(_0x354b47(0x1c7))/0x5)+-parseInt(_0x354b47(0x1c1))/0x6*(-parseInt(_0x354b47(0x1bd))/0x7)+-parseInt(_0x354b47(0x1b0))/0x8+-parseInt(_0x354b47(0x198))/0x9*(-parseInt(_0x354b47(0x1bb))/0xa);if(_0x18b292===_0x2be03f)break;else _0x2d023f['push'](_0x2d023f['shift']());}catch(_0x10d919){_0x2d023f['push'](_0x2d023f['shift']());}}}(a69_0x25a2,0x37849));function a69_0x25a2(){const _0x27200b=['../job/classes/manifest-manager','191834AyUoJD','Job\x20log\x20not\x20found.','b2cFolder','../../shared/managers/state-manger','runJob','constructor','636HHgIiK','2517744rPYwmp','init','JOB_LOG_DETAILS_FILENAME','../../shared/utils/job.utils','finally','generateJobId','apply','244107aDlxqc','getJobState','getJobStatus','../../../core/errors/not-found.error','30FhmNSG','getJobLog','7xAWmOj','getJobs','B2C_FOLDER_NAME','@flosum/utils','823314cGPJPA','../../../constants/job','create','path','__importDefault','../../shared/utils/fs.utils','7605wPuWMx','FsUtils','fs/promises','JOB_PATH','default','toString','2840814OubvPT','makeDir','314747XNDMMJ','(((.+)+)+)+$','../../../configs/path','NotFoundError','setError','search','sortJobsIds','slice','__esModule','cartridges','then','join','dataPath','../../shared/utils/csv.utils'];a69_0x25a2=function(){return _0x27200b;};return a69_0x25a2();}const a69_0x23b998=(function(){let _0x19936e=!![];return function(_0x24a249,_0x67c19e){const _0x56c45d=_0x19936e?function(){const _0xccbcfb=a69_0x86be;if(_0x67c19e){const _0x471e00=_0x67c19e[_0xccbcfb(0x1b6)](_0x24a249,arguments);return _0x67c19e=null,_0x471e00;}}:function(){};return _0x19936e=![],_0x56c45d;};}()),a69_0x4b84b5=a69_0x23b998(this,function(){const _0x542b42=a69_0x86be;return a69_0x4b84b5[_0x542b42(0x197)]()[_0x542b42(0x19f)](_0x542b42(0x19b))[_0x542b42(0x197)]()[_0x542b42(0x1ae)](a69_0x4b84b5)[_0x542b42(0x19f)](_0x542b42(0x19b));});a69_0x4b84b5();'use strict';var __importDefault=this&&this[a69_0x44af6f(0x1c5)]||function(_0x39b752){const _0x37ad7a=a69_0x44af6f;return _0x39b752&&_0x39b752[_0x37ad7a(0x1a2)]?_0x39b752:{'default':_0x39b752};};Object['defineProperty'](exports,a69_0x44af6f(0x1a2),{'value':!![]});const promises_1=require(a69_0x44af6f(0x194)),utils_1=require(a69_0x44af6f(0x1c0)),not_found_error_1=require(a69_0x44af6f(0x1ba)),fs_utils_1=require(a69_0x44af6f(0x1c6)),constants_1=require('../constants'),path_1=require(a69_0x44af6f(0x19c)),job_1=require(a69_0x44af6f(0x1c2)),path_2=__importDefault(require(a69_0x44af6f(0x1c4))),manifest_manager_1=__importDefault(require(a69_0x44af6f(0x1a8))),state_manger_1=__importDefault(require(a69_0x44af6f(0x1ac))),job_utils_1=__importDefault(require(a69_0x44af6f(0x1b3))),csv_utils_1=__importDefault(require(a69_0x44af6f(0x1a7)));class B2CService{static async['createJob'](_0xcd22cc){const _0xd0a46e=a69_0x44af6f,_0x9acb4d=job_utils_1['default'][_0xd0a46e(0x1b5)](),_0x538c0b=path_2['default'][_0xd0a46e(0x1a5)](B2CService[_0xd0a46e(0x1ab)],_0x9acb4d);await(0x0,fs_utils_1[_0xd0a46e(0x199)])(_0x538c0b),await manifest_manager_1[_0xd0a46e(0x196)][_0xd0a46e(0x1c3)](_0x538c0b,_0xcd22cc),await state_manger_1[_0xd0a46e(0x196)][_0xd0a46e(0x1c3)](_0x538c0b,_0x9acb4d);const _0xc8a7bc=path_2[_0xd0a46e(0x196)]['join'](__dirname,job_1[_0xd0a46e(0x195)]);return job_utils_1[_0xd0a46e(0x196)][_0xd0a46e(0x1ad)](_0xc8a7bc,{'jobStorePath':_0x538c0b,'jobId':_0x9acb4d})['catch'](async _0x1ee7b3=>{const _0x17ee7c=_0xd0a46e,_0x318690=new state_manger_1[(_0x17ee7c(0x196))](_0x538c0b);await _0x318690[_0x17ee7c(0x1b1)](),await _0x318690[_0x17ee7c(0x19e)](_0x1ee7b3);})[_0xd0a46e(0x1b4)](async()=>{const _0x24b5b1=_0xd0a46e,_0x409949=path_2[_0x24b5b1(0x196)][_0x24b5b1(0x1a5)](_0x538c0b,_0x24b5b1(0x1a3));await(0x0,promises_1['rm'])(_0x409949,{'recursive':!![],'force':!![]});}),{'jobId':_0x9acb4d};}static async[a69_0x44af6f(0x1be)](_0x54a626,_0x14ccb0){const _0x5c8ee2=a69_0x44af6f,_0x29fc5a=await job_utils_1['default']['getJobsIds'](B2CService[_0x5c8ee2(0x1ab)]),_0x185ecb=await job_utils_1['default'][_0x5c8ee2(0x1a0)](B2CService[_0x5c8ee2(0x1ab)],_0x29fc5a),_0x449620=_0x185ecb[_0x5c8ee2(0x1a1)](_0x14ccb0,_0x14ccb0+_0x54a626),_0x2e3e81=[];for(const _0x4ce9b0 of _0x449620){const _0x876cca=await state_manger_1[_0x5c8ee2(0x196)][_0x5c8ee2(0x1b8)](path_2[_0x5c8ee2(0x196)]['join'](B2CService[_0x5c8ee2(0x1ab)],_0x4ce9b0));_0x2e3e81['push'](_0x876cca);}return _0x2e3e81;}static async[a69_0x44af6f(0x1b9)](_0x10bdf2){const _0x35ebe3=a69_0x44af6f;try{return state_manger_1[_0x35ebe3(0x196)][_0x35ebe3(0x1b8)](path_2[_0x35ebe3(0x196)][_0x35ebe3(0x1a5)](B2CService['b2cFolder'],_0x10bdf2));}catch(_0xfc0640){throw new not_found_error_1['NotFoundError'](_0xfc0640);}}static async[a69_0x44af6f(0x1bc)](_0x16358d){const _0x11467c=a69_0x44af6f,_0x24beb2=path_2[_0x11467c(0x196)][_0x11467c(0x1a5)](B2CService[_0x11467c(0x1ab)],_0x16358d,job_1[_0x11467c(0x1b2)]);if(await utils_1[_0x11467c(0x193)]['isExistsPath'](_0x24beb2))return(0x0,promises_1['readFile'])(_0x24beb2,'utf-8')[_0x11467c(0x1a4)](_0x54bb80=>csv_utils_1[_0x11467c(0x196)]['parse'](_0x54bb80,{'columns':!![]}));throw new not_found_error_1[(_0x11467c(0x19d))](_0x11467c(0x1aa));}}function a69_0x86be(_0x25a423,_0x44e83e){const _0x3f4e47=a69_0x25a2();return a69_0x86be=function(_0x4b84b5,_0x23b998){_0x4b84b5=_0x4b84b5-0x193;let _0x25a21e=_0x3f4e47[_0x4b84b5];return _0x25a21e;},a69_0x86be(_0x25a423,_0x44e83e);}exports[a69_0x44af6f(0x196)]=B2CService,B2CService[a69_0x44af6f(0x1ab)]=path_2[a69_0x44af6f(0x196)][a69_0x44af6f(0x1a5)](path_1[a69_0x44af6f(0x1a6)],constants_1[a69_0x44af6f(0x1bf)]);