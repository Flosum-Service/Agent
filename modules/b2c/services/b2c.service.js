const a67_0x440fbe=a67_0xc313;(function(_0x4d31fe,_0x2f1519){const _0x13808d=a67_0xc313,_0x530178=_0x4d31fe();while(!![]){try{const _0x2f1aa1=parseInt(_0x13808d(0x185))/0x1*(-parseInt(_0x13808d(0x164))/0x2)+parseInt(_0x13808d(0x160))/0x3*(parseInt(_0x13808d(0x176))/0x4)+-parseInt(_0x13808d(0x17f))/0x5+-parseInt(_0x13808d(0x173))/0x6+-parseInt(_0x13808d(0x16c))/0x7+parseInt(_0x13808d(0x161))/0x8+-parseInt(_0x13808d(0x16e))/0x9*(-parseInt(_0x13808d(0x183))/0xa);if(_0x2f1aa1===_0x2f1519)break;else _0x530178['push'](_0x530178['shift']());}catch(_0x3093b4){_0x530178['push'](_0x530178['shift']());}}}(a67_0x25ab,0xcc11d));const a67_0x3102b=(function(){let _0x554b39=!![];return function(_0x34447e,_0x376819){const _0x42fea4=_0x554b39?function(){const _0x46c6a8=a67_0xc313;if(_0x376819){const _0x9b4566=_0x376819[_0x46c6a8(0x188)](_0x34447e,arguments);return _0x376819=null,_0x9b4566;}}:function(){};return _0x554b39=![],_0x42fea4;};}()),a67_0x6f1b08=a67_0x3102b(this,function(){const _0x1ee2be=a67_0xc313;return a67_0x6f1b08[_0x1ee2be(0x16b)]()[_0x1ee2be(0x174)](_0x1ee2be(0x170))[_0x1ee2be(0x16b)]()['constructor'](a67_0x6f1b08)[_0x1ee2be(0x174)](_0x1ee2be(0x170));});function a67_0x25ab(){const _0x54a2c1=['getJobsIds','341990OBePpa','getJobLog','1631937LSwxPv','dataPath','setError','apply','readFile','slice','JOB_LOG_DETAILS_FILENAME','../../shared/utils/job.utils','init','runJob','../../shared/utils/csv.utils','then','4484577ytqLUa','5439992iRuXNJ','@flosum/utils','../constants','2TtkdSI','path','default','../../shared/utils/fs.utils','NotFoundError','join','getJobs','toString','1885072cOVYxS','create','504zzVXMc','__esModule','(((.+)+)+)+$','../job/classes/manifest-manager','getJobStatus','816672MIfAGx','search','../../../core/errors/not-found.error','4YqDrTb','catch','../../../constants/job','__importDefault','B2C_FOLDER_NAME','parse','makeDir','sortJobsIds','getJobState','6083940fCmbHJ','push','b2cFolder'];a67_0x25ab=function(){return _0x54a2c1;};return a67_0x25ab();}a67_0x6f1b08();'use strict';function a67_0xc313(_0x31300d,_0x97a731){const _0x3597af=a67_0x25ab();return a67_0xc313=function(_0x6f1b08,_0x3102b){_0x6f1b08=_0x6f1b08-0x15e;let _0x25ab78=_0x3597af[_0x6f1b08];return _0x25ab78;},a67_0xc313(_0x31300d,_0x97a731);}var __importDefault=this&&this[a67_0x440fbe(0x179)]||function(_0x5177a8){const _0x4446ce=a67_0x440fbe;return _0x5177a8&&_0x5177a8[_0x4446ce(0x16f)]?_0x5177a8:{'default':_0x5177a8};};Object['defineProperty'](exports,a67_0x440fbe(0x16f),{'value':!![]});const promises_1=require('fs/promises'),utils_1=require(a67_0x440fbe(0x162)),not_found_error_1=require(a67_0x440fbe(0x175)),fs_utils_1=require(a67_0x440fbe(0x167)),constants_1=require(a67_0x440fbe(0x163)),path_1=require('../../../configs/path'),job_1=require(a67_0x440fbe(0x178)),path_2=__importDefault(require(a67_0x440fbe(0x165))),manifest_manager_1=__importDefault(require(a67_0x440fbe(0x171))),state_manger_1=__importDefault(require('../../shared/managers/state-manger')),job_utils_1=__importDefault(require(a67_0x440fbe(0x18c))),csv_utils_1=__importDefault(require(a67_0x440fbe(0x15e)));class B2CService{static async['createJob'](_0x415c26){const _0x194ec1=a67_0x440fbe,_0x382f8a=job_utils_1[_0x194ec1(0x166)]['generateJobId'](),_0x4e00c3=path_2['default'][_0x194ec1(0x169)](B2CService[_0x194ec1(0x181)],_0x382f8a);await(0x0,fs_utils_1[_0x194ec1(0x17c)])(_0x4e00c3),await manifest_manager_1[_0x194ec1(0x166)][_0x194ec1(0x16d)](_0x4e00c3,_0x415c26),await state_manger_1[_0x194ec1(0x166)][_0x194ec1(0x16d)](_0x4e00c3,_0x382f8a);const _0x13d3af=path_2[_0x194ec1(0x166)][_0x194ec1(0x169)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x194ec1(0x166)][_0x194ec1(0x18e)](_0x13d3af,{'jobStorePath':_0x4e00c3,'jobId':_0x382f8a})[_0x194ec1(0x177)](async _0x2cda06=>{const _0x11581f=_0x194ec1,_0x2e9435=new state_manger_1[(_0x11581f(0x166))](_0x4e00c3);await _0x2e9435[_0x11581f(0x18d)](),await _0x2e9435[_0x11581f(0x187)](_0x2cda06);}),{'jobId':_0x382f8a};}static async[a67_0x440fbe(0x16a)](_0x2fa154,_0x71d084){const _0x5b66f9=a67_0x440fbe,_0xfb86d4=await job_utils_1[_0x5b66f9(0x166)][_0x5b66f9(0x182)](B2CService[_0x5b66f9(0x181)]),_0x200864=await job_utils_1[_0x5b66f9(0x166)][_0x5b66f9(0x17d)](B2CService[_0x5b66f9(0x181)],_0xfb86d4),_0x5e5d68=_0x200864[_0x5b66f9(0x18a)](_0x71d084,_0x71d084+_0x2fa154),_0x34547a=[];for(const _0x93f333 of _0x5e5d68){const _0x25fb9d=await state_manger_1[_0x5b66f9(0x166)][_0x5b66f9(0x17e)](path_2[_0x5b66f9(0x166)]['join'](B2CService[_0x5b66f9(0x181)],_0x93f333));_0x34547a[_0x5b66f9(0x180)](_0x25fb9d);}return _0x34547a;}static async[a67_0x440fbe(0x172)](_0x364781){const _0x4b726e=a67_0x440fbe;try{return state_manger_1[_0x4b726e(0x166)][_0x4b726e(0x17e)](path_2[_0x4b726e(0x166)]['join'](B2CService[_0x4b726e(0x181)],_0x364781));}catch(_0x66d764){throw new not_found_error_1['NotFoundError'](_0x66d764);}}static async[a67_0x440fbe(0x184)](_0x9aafe9){const _0x28cc41=a67_0x440fbe,_0x40827a=path_2['default'][_0x28cc41(0x169)](B2CService[_0x28cc41(0x181)],_0x9aafe9,job_1[_0x28cc41(0x18b)]);if(await utils_1['FsUtils']['isExistsPath'](_0x40827a))return(0x0,promises_1[_0x28cc41(0x189)])(_0x40827a,'utf-8')[_0x28cc41(0x15f)](_0xd22c2e=>csv_utils_1['default'][_0x28cc41(0x17b)](_0xd22c2e,{'columns':!![]}));throw new not_found_error_1[(_0x28cc41(0x168))]('Job\x20log\x20not\x20found.');}}exports['default']=B2CService,B2CService[a67_0x440fbe(0x181)]=path_2[a67_0x440fbe(0x166)][a67_0x440fbe(0x169)](path_1[a67_0x440fbe(0x186)],constants_1[a67_0x440fbe(0x17a)]);