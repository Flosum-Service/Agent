const a69_0x1372d5=a69_0x4a36;(function(_0x45e039,_0x5cf156){const _0x5c6d41=a69_0x4a36,_0x15dd9a=_0x45e039();while(!![]){try{const _0x2a0b48=-parseInt(_0x5c6d41(0x163))/0x1*(-parseInt(_0x5c6d41(0x172))/0x2)+parseInt(_0x5c6d41(0x149))/0x3+parseInt(_0x5c6d41(0x165))/0x4+parseInt(_0x5c6d41(0x14e))/0x5+parseInt(_0x5c6d41(0x17d))/0x6*(-parseInt(_0x5c6d41(0x156))/0x7)+parseInt(_0x5c6d41(0x15d))/0x8*(parseInt(_0x5c6d41(0x15b))/0x9)+-parseInt(_0x5c6d41(0x14f))/0xa*(parseInt(_0x5c6d41(0x151))/0xb);if(_0x2a0b48===_0x5cf156)break;else _0x15dd9a['push'](_0x15dd9a['shift']());}catch(_0x2bdd42){_0x15dd9a['push'](_0x15dd9a['shift']());}}}(a69_0x534a,0x5d37b));const a69_0x574c04=(function(){let _0x51641d=!![];return function(_0x39e3e8,_0x44c203){const _0x492f64=_0x51641d?function(){const _0x498297=a69_0x4a36;if(_0x44c203){const _0x40234d=_0x44c203[_0x498297(0x17e)](_0x39e3e8,arguments);return _0x44c203=null,_0x40234d;}}:function(){};return _0x51641d=![],_0x492f64;};}()),a69_0x305d94=a69_0x574c04(this,function(){const _0x3fe00c=a69_0x4a36;return a69_0x305d94[_0x3fe00c(0x180)]()[_0x3fe00c(0x158)](_0x3fe00c(0x160))[_0x3fe00c(0x180)]()[_0x3fe00c(0x174)](a69_0x305d94)[_0x3fe00c(0x158)](_0x3fe00c(0x160));});function a69_0x534a(){const _0x4403fc=['../../shared/utils/job.utils','FsUtils','10134TatNQE','create','2216pUVXaC','NotFoundError','../../../configs/path','(((.+)+)+)+$','isExistsPath','path','43417VFqhda','catch','2151820IbJRjz','init','utf-8','../../shared/utils/csv.utils','getJobState','__esModule','readFile','getJobs','setError','__importDefault','slice','createJob','getJobStatus','8kiMlWh','../../shared/utils/fs.utils','constructor','../../../core/errors/not-found.error','getJobLog','../../../constants/job','makeDir','../../shared/managers/state-manger','then','runJob','Job\x20log\x20not\x20found.','204XvHNEK','apply','join','toString','1381893DmBsik','default','JOB_PATH','sortJobsIds','@flosum/utils','3578935EbaRSa','1668490hrpMCy','push','110hqTOLh','../job/classes/manifest-manager','dataPath','b2cFolder','JOB_LOG_DETAILS_FILENAME','30807dwsfRt','defineProperty','search'];a69_0x534a=function(){return _0x4403fc;};return a69_0x534a();}function a69_0x4a36(_0x2bbc83,_0x2371aa){const _0xa50eb6=a69_0x534a();return a69_0x4a36=function(_0x305d94,_0x574c04){_0x305d94=_0x305d94-0x149;let _0x534ac7=_0xa50eb6[_0x305d94];return _0x534ac7;},a69_0x4a36(_0x2bbc83,_0x2371aa);}a69_0x305d94();'use strict';var __importDefault=this&&this[a69_0x1372d5(0x16e)]||function(_0x1ae83a){return _0x1ae83a&&_0x1ae83a['__esModule']?_0x1ae83a:{'default':_0x1ae83a};};Object[a69_0x1372d5(0x157)](exports,a69_0x1372d5(0x16a),{'value':!![]});const promises_1=require('fs/promises'),utils_1=require(a69_0x1372d5(0x14d)),not_found_error_1=require(a69_0x1372d5(0x175)),fs_utils_1=require(a69_0x1372d5(0x173)),constants_1=require('../constants'),path_1=require(a69_0x1372d5(0x15f)),job_1=require(a69_0x1372d5(0x177)),path_2=__importDefault(require(a69_0x1372d5(0x162))),manifest_manager_1=__importDefault(require(a69_0x1372d5(0x152))),state_manger_1=__importDefault(require(a69_0x1372d5(0x179))),job_utils_1=__importDefault(require(a69_0x1372d5(0x159))),csv_utils_1=__importDefault(require(a69_0x1372d5(0x168)));class B2CService{static async[a69_0x1372d5(0x170)](_0x35003a){const _0x2a1e35=a69_0x1372d5,_0x200a24=job_utils_1['default']['generateJobId'](),_0x5ce0a4=path_2[_0x2a1e35(0x14a)][_0x2a1e35(0x17f)](B2CService[_0x2a1e35(0x154)],_0x200a24);await(0x0,fs_utils_1[_0x2a1e35(0x178)])(_0x5ce0a4),await manifest_manager_1[_0x2a1e35(0x14a)][_0x2a1e35(0x15c)](_0x5ce0a4,_0x35003a),await state_manger_1[_0x2a1e35(0x14a)]['create'](_0x5ce0a4,_0x200a24);const _0x51ec74=path_2[_0x2a1e35(0x14a)]['join'](__dirname,job_1[_0x2a1e35(0x14b)]);return job_utils_1[_0x2a1e35(0x14a)][_0x2a1e35(0x17b)](_0x51ec74,{'jobStorePath':_0x5ce0a4,'jobId':_0x200a24})[_0x2a1e35(0x164)](async _0x3fad83=>{const _0x28b083=_0x2a1e35,_0x4cc5f8=new state_manger_1[(_0x28b083(0x14a))](_0x5ce0a4);await _0x4cc5f8[_0x28b083(0x166)](),await _0x4cc5f8[_0x28b083(0x16d)](_0x3fad83);}),{'jobId':_0x200a24};}static async[a69_0x1372d5(0x16c)](_0x237482,_0x53c687){const _0x1fc22b=a69_0x1372d5,_0x17883a=await job_utils_1['default']['getJobsIds'](B2CService[_0x1fc22b(0x154)]),_0x5a7d1f=await job_utils_1[_0x1fc22b(0x14a)][_0x1fc22b(0x14c)](B2CService[_0x1fc22b(0x154)],_0x17883a),_0x5c1f98=_0x5a7d1f[_0x1fc22b(0x16f)](_0x53c687,_0x53c687+_0x237482),_0x587499=[];for(const _0x28c984 of _0x5c1f98){const _0x5ca9c4=await state_manger_1[_0x1fc22b(0x14a)][_0x1fc22b(0x169)](path_2[_0x1fc22b(0x14a)]['join'](B2CService[_0x1fc22b(0x154)],_0x28c984));_0x587499[_0x1fc22b(0x150)](_0x5ca9c4);}return _0x587499;}static async[a69_0x1372d5(0x171)](_0x239461){const _0x197795=a69_0x1372d5;try{return state_manger_1[_0x197795(0x14a)][_0x197795(0x169)](path_2['default'][_0x197795(0x17f)](B2CService[_0x197795(0x154)],_0x239461));}catch(_0x520e74){throw new not_found_error_1[(_0x197795(0x15e))](_0x520e74);}}static async[a69_0x1372d5(0x176)](_0x562006){const _0x357b01=a69_0x1372d5,_0x1ef0bf=path_2[_0x357b01(0x14a)][_0x357b01(0x17f)](B2CService[_0x357b01(0x154)],_0x562006,job_1[_0x357b01(0x155)]);if(await utils_1[_0x357b01(0x15a)][_0x357b01(0x161)](_0x1ef0bf))return(0x0,promises_1[_0x357b01(0x16b)])(_0x1ef0bf,_0x357b01(0x167))[_0x357b01(0x17a)](_0x82b56c=>csv_utils_1[_0x357b01(0x14a)]['parse'](_0x82b56c,{'columns':!![]}));throw new not_found_error_1[(_0x357b01(0x15e))](_0x357b01(0x17c));}}exports[a69_0x1372d5(0x14a)]=B2CService,B2CService[a69_0x1372d5(0x154)]=path_2[a69_0x1372d5(0x14a)][a69_0x1372d5(0x17f)](path_1[a69_0x1372d5(0x153)],constants_1['B2C_FOLDER_NAME']);