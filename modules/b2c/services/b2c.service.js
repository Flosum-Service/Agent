const a67_0xc3fb94=a67_0x54b9;(function(_0x5929fa,_0x4f4efb){const _0x1c2a98=a67_0x54b9,_0x4401bb=_0x5929fa();while(!![]){try{const _0x495de8=parseInt(_0x1c2a98(0x1b8))/0x1*(-parseInt(_0x1c2a98(0x1b9))/0x2)+parseInt(_0x1c2a98(0x196))/0x3+parseInt(_0x1c2a98(0x1aa))/0x4+-parseInt(_0x1c2a98(0x1c2))/0x5*(parseInt(_0x1c2a98(0x1b0))/0x6)+parseInt(_0x1c2a98(0x198))/0x7+parseInt(_0x1c2a98(0x1ad))/0x8+-parseInt(_0x1c2a98(0x1a0))/0x9*(parseInt(_0x1c2a98(0x1c0))/0xa);if(_0x495de8===_0x4f4efb)break;else _0x4401bb['push'](_0x4401bb['shift']());}catch(_0x593da9){_0x4401bb['push'](_0x4401bb['shift']());}}}(a67_0x9b99,0x93f67));const a67_0x177d27=(function(){let _0x34e614=!![];return function(_0x8dfcc6,_0x2f61ce){const _0x3ec237=_0x34e614?function(){const _0x5d611d=a67_0x54b9;if(_0x2f61ce){const _0x2cf0f2=_0x2f61ce[_0x5d611d(0x1c6)](_0x8dfcc6,arguments);return _0x2f61ce=null,_0x2cf0f2;}}:function(){};return _0x34e614=![],_0x3ec237;};}()),a67_0x128af8=a67_0x177d27(this,function(){const _0x431a9e=a67_0x54b9;return a67_0x128af8[_0x431a9e(0x1b2)]()['search'](_0x431a9e(0x19f))[_0x431a9e(0x1b2)]()[_0x431a9e(0x19a)](a67_0x128af8)[_0x431a9e(0x1a8)](_0x431a9e(0x19f));});a67_0x128af8();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4e9ccc){const _0x22e793=a67_0x54b9;return _0x4e9ccc&&_0x4e9ccc[_0x22e793(0x1a7)]?_0x4e9ccc:{'default':_0x4e9ccc};};function a67_0x54b9(_0x33cdf8,_0x58dbf2){const _0x5a7f54=a67_0x9b99();return a67_0x54b9=function(_0x128af8,_0x177d27){_0x128af8=_0x128af8-0x195;let _0x9b9948=_0x5a7f54[_0x128af8];return _0x9b9948;},a67_0x54b9(_0x33cdf8,_0x58dbf2);}Object['defineProperty'](exports,a67_0xc3fb94(0x1a7),{'value':!![]});const promises_1=require(a67_0xc3fb94(0x1bc)),utils_1=require(a67_0xc3fb94(0x1a2)),not_found_error_1=require(a67_0xc3fb94(0x1af)),fs_utils_1=require('../../shared/utils/fs.utils'),constants_1=require('../constants'),path_1=require(a67_0xc3fb94(0x197)),job_1=require('../../../constants/job'),path_2=__importDefault(require('path')),manifest_manager_1=__importDefault(require(a67_0xc3fb94(0x1a5))),state_manger_1=__importDefault(require(a67_0xc3fb94(0x1bd))),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),csv_utils_1=__importDefault(require('../../shared/utils/csv.utils'));function a67_0x9b99(){const _0x5e5723=['generateJobId','getJobsIds','35845YIWYiF','20stvVcu','join','getJobState','fs/promises','../../shared/managers/state-manger','dataPath','setError','10mVGkxv','Job\x20log\x20not\x20found.','5577785QkDVQF','FsUtils','create','isExistsPath','apply','getJobs','2332728JFEOZP','../../../configs/path','8422736fNPiYj','then','constructor','parse','getJobLog','init','readFile','(((.+)+)+)+$','7808481rzSalV','JOB_LOG_DETAILS_FILENAME','@flosum/utils','b2cFolder','NotFoundError','../job/classes/manifest-manager','default','__esModule','search','catch','2369464SyrBvw','sortJobsIds','JOB_PATH','2995848MsiPHD','utf-8','../../../core/errors/not-found.error','6kwbold','B2C_FOLDER_NAME','toString','createJob','runJob','slice'];a67_0x9b99=function(){return _0x5e5723;};return a67_0x9b99();}class B2CService{static async[a67_0xc3fb94(0x1b3)](_0x5408e2){const _0x36f505=a67_0xc3fb94,_0x635dce=job_utils_1[_0x36f505(0x1a6)][_0x36f505(0x1b6)](),_0x4b1c3e=path_2['default'][_0x36f505(0x1ba)](B2CService[_0x36f505(0x1a3)],_0x635dce);await(0x0,fs_utils_1['makeDir'])(_0x4b1c3e),await manifest_manager_1[_0x36f505(0x1a6)][_0x36f505(0x1c4)](_0x4b1c3e,_0x5408e2),await state_manger_1['default']['create'](_0x4b1c3e,_0x635dce);const _0x358df8=path_2[_0x36f505(0x1a6)]['join'](__dirname,job_1[_0x36f505(0x1ac)]);return job_utils_1[_0x36f505(0x1a6)][_0x36f505(0x1b4)](_0x358df8,{'jobStorePath':_0x4b1c3e,'jobId':_0x635dce})[_0x36f505(0x1a9)](async _0x1e2ce5=>{const _0x380173=_0x36f505,_0x2d0588=new state_manger_1[(_0x380173(0x1a6))](_0x4b1c3e);await _0x2d0588[_0x380173(0x19d)](),await _0x2d0588[_0x380173(0x1bf)](_0x1e2ce5);}),{'jobId':_0x635dce};}static async[a67_0xc3fb94(0x195)](_0xa3f429,_0x4857df){const _0x52416b=a67_0xc3fb94,_0x37e1f5=await job_utils_1[_0x52416b(0x1a6)][_0x52416b(0x1b7)](B2CService[_0x52416b(0x1a3)]),_0x538853=await job_utils_1[_0x52416b(0x1a6)][_0x52416b(0x1ab)](B2CService[_0x52416b(0x1a3)],_0x37e1f5),_0x192435=_0x538853[_0x52416b(0x1b5)](_0x4857df,_0x4857df+_0xa3f429),_0x48d2cd=[];for(const _0x33de7d of _0x192435){const _0x5bb00f=await state_manger_1['default'][_0x52416b(0x1bb)](path_2['default'][_0x52416b(0x1ba)](B2CService[_0x52416b(0x1a3)],_0x33de7d));_0x48d2cd['push'](_0x5bb00f);}return _0x48d2cd;}static async['getJobStatus'](_0x2bbbb8){const _0x36ae1e=a67_0xc3fb94;try{return state_manger_1['default'][_0x36ae1e(0x1bb)](path_2[_0x36ae1e(0x1a6)][_0x36ae1e(0x1ba)](B2CService['b2cFolder'],_0x2bbbb8));}catch(_0x2d9204){throw new not_found_error_1[(_0x36ae1e(0x1a4))](_0x2d9204);}}static async[a67_0xc3fb94(0x19c)](_0x8422f1){const _0x468f64=a67_0xc3fb94,_0x500eef=path_2['default'][_0x468f64(0x1ba)](B2CService[_0x468f64(0x1a3)],_0x8422f1,job_1[_0x468f64(0x1a1)]);if(await utils_1[_0x468f64(0x1c3)][_0x468f64(0x1c5)](_0x500eef))return(0x0,promises_1[_0x468f64(0x19e)])(_0x500eef,_0x468f64(0x1ae))[_0x468f64(0x199)](_0x3fbb74=>csv_utils_1[_0x468f64(0x1a6)][_0x468f64(0x19b)](_0x3fbb74,{'columns':!![]}));throw new not_found_error_1[(_0x468f64(0x1a4))](_0x468f64(0x1c1));}}exports['default']=B2CService,B2CService[a67_0xc3fb94(0x1a3)]=path_2[a67_0xc3fb94(0x1a6)][a67_0xc3fb94(0x1ba)](path_1[a67_0xc3fb94(0x1be)],constants_1[a67_0xc3fb94(0x1b1)]);