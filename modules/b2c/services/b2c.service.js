const a70_0x2b8f16=a70_0x2d39;function a70_0x2d39(_0x2b8622,_0x5948ab){const _0x523b4d=a70_0x1e2b();return a70_0x2d39=function(_0x36a7fb,_0x268654){_0x36a7fb=_0x36a7fb-0xfe;let _0x1e2b69=_0x523b4d[_0x36a7fb];return _0x1e2b69;},a70_0x2d39(_0x2b8622,_0x5948ab);}(function(_0x512249,_0x571f64){const _0x5e3741=a70_0x2d39,_0x4e8348=_0x512249();while(!![]){try{const _0x59c622=-parseInt(_0x5e3741(0x11f))/0x1*(-parseInt(_0x5e3741(0x121))/0x2)+parseInt(_0x5e3741(0x134))/0x3*(-parseInt(_0x5e3741(0x120))/0x4)+parseInt(_0x5e3741(0x103))/0x5*(-parseInt(_0x5e3741(0x12b))/0x6)+parseInt(_0x5e3741(0x124))/0x7*(-parseInt(_0x5e3741(0x125))/0x8)+-parseInt(_0x5e3741(0x123))/0x9+-parseInt(_0x5e3741(0x104))/0xa+-parseInt(_0x5e3741(0x110))/0xb*(-parseInt(_0x5e3741(0x113))/0xc);if(_0x59c622===_0x571f64)break;else _0x4e8348['push'](_0x4e8348['shift']());}catch(_0x5524dd){_0x4e8348['push'](_0x4e8348['shift']());}}}(a70_0x1e2b,0xed738));const a70_0x268654=(function(){let _0x4c8658=!![];return function(_0x146734,_0x3ac351){const _0x49bfce=_0x4c8658?function(){if(_0x3ac351){const _0x35858d=_0x3ac351['apply'](_0x146734,arguments);return _0x3ac351=null,_0x35858d;}}:function(){};return _0x4c8658=![],_0x49bfce;};}()),a70_0x36a7fb=a70_0x268654(this,function(){const _0x31cdd4=a70_0x2d39;return a70_0x36a7fb[_0x31cdd4(0x12f)]()[_0x31cdd4(0x119)](_0x31cdd4(0x12a))[_0x31cdd4(0x12f)]()[_0x31cdd4(0x10e)](a70_0x36a7fb)[_0x31cdd4(0x119)](_0x31cdd4(0x12a));});a70_0x36a7fb();'use strict';var __importDefault=this&&this[a70_0x2b8f16(0x109)]||function(_0x40bc0c){const _0x4dd6b1=a70_0x2b8f16;return _0x40bc0c&&_0x40bc0c[_0x4dd6b1(0x11b)]?_0x40bc0c:{'default':_0x40bc0c};};Object['defineProperty'](exports,a70_0x2b8f16(0x11b),{'value':!![]});const promises_1=require(a70_0x2b8f16(0x10c)),utils_1=require(a70_0x2b8f16(0x11e)),not_found_error_1=require(a70_0x2b8f16(0x11c)),fs_utils_1=require(a70_0x2b8f16(0x100)),constants_1=require('../constants'),path_1=require(a70_0x2b8f16(0x10a)),job_1=require(a70_0x2b8f16(0x117)),path_2=__importDefault(require(a70_0x2b8f16(0x114))),manifest_manager_1=__importDefault(require('../job/classes/manifest-manager')),state_manger_1=__importDefault(require(a70_0x2b8f16(0x130))),job_utils_1=__importDefault(require(a70_0x2b8f16(0x11a))),csv_utils_1=__importDefault(require(a70_0x2b8f16(0xff)));class B2CService{static async[a70_0x2b8f16(0x101)](_0x5dbe88){const _0xca145c=a70_0x2b8f16,_0x3ae95c=job_utils_1['default']['generateJobId'](),_0x43454a=path_2['default'][_0xca145c(0x131)](B2CService[_0xca145c(0x127)],_0x3ae95c);await(0x0,fs_utils_1[_0xca145c(0x12e)])(_0x43454a),await manifest_manager_1[_0xca145c(0x132)][_0xca145c(0x115)](_0x43454a,_0x5dbe88),await state_manger_1[_0xca145c(0x132)][_0xca145c(0x115)](_0x43454a,_0x3ae95c);const _0x56387=path_2[_0xca145c(0x132)]['join'](__dirname,job_1[_0xca145c(0x128)]);return job_utils_1[_0xca145c(0x132)][_0xca145c(0x106)](_0x56387,{'jobStorePath':_0x43454a,'jobId':_0x3ae95c})[_0xca145c(0x111)](async _0x5278cb=>{const _0x222f07=_0xca145c,_0x1014fc=new state_manger_1[(_0x222f07(0x132))](_0x43454a);await _0x1014fc[_0x222f07(0x112)](),await _0x1014fc[_0x222f07(0x126)](_0x5278cb);}),{'jobId':_0x3ae95c};}static async[a70_0x2b8f16(0x11d)](_0x9db4da,_0x41e519){const _0x5d4057=a70_0x2b8f16,_0x2f9991=await job_utils_1['default'][_0x5d4057(0x108)](B2CService['b2cFolder']),_0x2c3e8f=await job_utils_1[_0x5d4057(0x132)]['sortJobsIds'](B2CService[_0x5d4057(0x127)],_0x2f9991),_0x2edfe2=_0x2c3e8f[_0x5d4057(0x12c)](_0x41e519,_0x41e519+_0x9db4da),_0x54abde=[];for(const _0x199537 of _0x2edfe2){const _0x43b1da=await state_manger_1[_0x5d4057(0x132)][_0x5d4057(0x129)](path_2['default']['join'](B2CService[_0x5d4057(0x127)],_0x199537));_0x54abde[_0x5d4057(0x135)](_0x43b1da);}return _0x54abde;}static async[a70_0x2b8f16(0x10d)](_0x2b2d92){const _0x4903bd=a70_0x2b8f16;try{return state_manger_1['default']['getJobState'](path_2[_0x4903bd(0x132)][_0x4903bd(0x131)](B2CService[_0x4903bd(0x127)],_0x2b2d92));}catch(_0x149aa9){throw new not_found_error_1[(_0x4903bd(0x133))](_0x149aa9);}}static async[a70_0x2b8f16(0x122)](_0x534fc8){const _0x1d23f9=a70_0x2b8f16,_0x1c04e7=path_2[_0x1d23f9(0x132)][_0x1d23f9(0x131)](B2CService[_0x1d23f9(0x127)],_0x534fc8,job_1[_0x1d23f9(0x116)]);if(await utils_1[_0x1d23f9(0x10f)][_0x1d23f9(0x105)](_0x1c04e7))return(0x0,promises_1[_0x1d23f9(0x12d)])(_0x1c04e7,{'encoding':_0x1d23f9(0xfe)})[_0x1d23f9(0x10b)](_0x5dcc76=>csv_utils_1[_0x1d23f9(0x132)]['parse'](_0x5dcc76,{'columns':!![]}));throw new not_found_error_1['NotFoundError'](_0x1d23f9(0x118));}}function a70_0x1e2b(){const _0x2fb6b7=['755BuhNEb','10835450NefOrb','isExistsPath','runJob','B2C_FOLDER_NAME','getJobsIds','__importDefault','../../../configs/path','then','fs/promises','getJobStatus','constructor','FsUtils','62922739UKuQlk','catch','init','12oOKOyo','path','create','JOB_LOG_DETAILS_FILENAME','../../../constants/job','Job\x20log\x20not\x20found.','search','../../shared/utils/job.utils','__esModule','../../../core/errors/not-found.error','getJobs','@flosum/utils','1927397skwJhI','2004TPHNyD','2TWRrIw','getJobLog','17252208LohYtn','7NumPvw','13598392JEgysf','setError','b2cFolder','JOB_PATH','getJobState','(((.+)+)+)+$','14586FZsfIP','slice','readFile','makeDir','toString','../../shared/managers/state-manger','join','default','NotFoundError','9627WoYNaa','push','utf-8','../../shared/utils/csv.utils','../../shared/utils/fs.utils','createJob','dataPath'];a70_0x1e2b=function(){return _0x2fb6b7;};return a70_0x1e2b();}exports[a70_0x2b8f16(0x132)]=B2CService,B2CService[a70_0x2b8f16(0x127)]=path_2[a70_0x2b8f16(0x132)]['join'](path_1[a70_0x2b8f16(0x102)],constants_1[a70_0x2b8f16(0x107)]);