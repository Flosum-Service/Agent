const a69_0x10f7a5=a69_0x1cc8;(function(_0x25cbed,_0x1842a1){const _0x5e657b=a69_0x1cc8,_0x4edd65=_0x25cbed();while(!![]){try{const _0x5d06b1=parseInt(_0x5e657b(0x10f))/0x1+-parseInt(_0x5e657b(0x11f))/0x2+parseInt(_0x5e657b(0x11b))/0x3*(parseInt(_0x5e657b(0x12c))/0x4)+-parseInt(_0x5e657b(0x10d))/0x5*(parseInt(_0x5e657b(0x105))/0x6)+-parseInt(_0x5e657b(0x10b))/0x7*(-parseInt(_0x5e657b(0x124))/0x8)+-parseInt(_0x5e657b(0x111))/0x9*(-parseInt(_0x5e657b(0x12a))/0xa)+-parseInt(_0x5e657b(0x109))/0xb*(parseInt(_0x5e657b(0x119))/0xc);if(_0x5d06b1===_0x1842a1)break;else _0x4edd65['push'](_0x4edd65['shift']());}catch(_0x509f8a){_0x4edd65['push'](_0x4edd65['shift']());}}}(a69_0x552c,0xc0671));const a69_0x1d6d57=(function(){let _0x1e71f3=!![];return function(_0xc6960e,_0x2793af){const _0x4d1280=_0x1e71f3?function(){const _0x5647cc=a69_0x1cc8;if(_0x2793af){const _0x155e96=_0x2793af[_0x5647cc(0x122)](_0xc6960e,arguments);return _0x2793af=null,_0x155e96;}}:function(){};return _0x1e71f3=![],_0x4d1280;};}()),a69_0x2c197f=a69_0x1d6d57(this,function(){const _0x1ead4c=a69_0x1cc8;return a69_0x2c197f[_0x1ead4c(0x102)]()[_0x1ead4c(0x107)](_0x1ead4c(0x123))[_0x1ead4c(0x102)]()['constructor'](a69_0x2c197f)['search'](_0x1ead4c(0x123));});a69_0x2c197f();'use strict';function a69_0x552c(){const _0x5d8d5b=['FsUtils','77cbHhXB','getJobsIds','8015XjdWow','@flosum/utils','4390915LUuRuJ','makeDir','1063032pQyXqX','../../../core/errors/not-found.error','5992524cmyeTk','getJobState','dataPath','createJob','finally','setError','../job/classes/manifest-manager','NotFoundError','4394748AfvKcL','runJob','3piLaIz','__importDefault','catch','../../shared/managers/state-manger','1255462RMVDdu','getJobStatus','default','apply','(((.+)+)+)+$','10456PsveqT','../../shared/utils/fs.utils','defineProperty','../constants','cartridges','create','20mkdjGZ','parse','3865516uSWLYN','push','readFile','../../shared/utils/csv.utils','join','Job\x20log\x20not\x20found.','generateJobId','utf-8','init','fs/promises','toString','JOB_LOG_DETAILS_FILENAME','sortJobsIds','6wmiJci','b2cFolder','search'];a69_0x552c=function(){return _0x5d8d5b;};return a69_0x552c();}var __importDefault=this&&this[a69_0x10f7a5(0x11c)]||function(_0x87c153){return _0x87c153&&_0x87c153['__esModule']?_0x87c153:{'default':_0x87c153};};Object[a69_0x10f7a5(0x126)](exports,'__esModule',{'value':!![]});const promises_1=require(a69_0x10f7a5(0x135)),utils_1=require(a69_0x10f7a5(0x10c)),not_found_error_1=require(a69_0x10f7a5(0x110)),fs_utils_1=require(a69_0x10f7a5(0x125)),constants_1=require(a69_0x10f7a5(0x127)),path_1=require('../../../configs/path'),job_1=require('../../../constants/job'),path_2=__importDefault(require('path')),manifest_manager_1=__importDefault(require(a69_0x10f7a5(0x117))),state_manger_1=__importDefault(require(a69_0x10f7a5(0x11e))),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),csv_utils_1=__importDefault(require(a69_0x10f7a5(0x12f)));function a69_0x1cc8(_0x5d8247,_0x2bb516){const _0x586200=a69_0x552c();return a69_0x1cc8=function(_0x2c197f,_0x1d6d57){_0x2c197f=_0x2c197f-0x102;let _0x552c02=_0x586200[_0x2c197f];return _0x552c02;},a69_0x1cc8(_0x5d8247,_0x2bb516);}class B2CService{static async[a69_0x10f7a5(0x114)](_0x31aaf0){const _0x557284=a69_0x10f7a5,_0x2fc17e=job_utils_1[_0x557284(0x121)][_0x557284(0x132)](),_0x3a5f33=path_2[_0x557284(0x121)][_0x557284(0x130)](B2CService[_0x557284(0x106)],_0x2fc17e);await(0x0,fs_utils_1[_0x557284(0x10e)])(_0x3a5f33),await manifest_manager_1[_0x557284(0x121)][_0x557284(0x129)](_0x3a5f33,_0x31aaf0),await state_manger_1[_0x557284(0x121)][_0x557284(0x129)](_0x3a5f33,_0x2fc17e);const _0x5c129f=path_2['default'][_0x557284(0x130)](__dirname,job_1['JOB_PATH']);return job_utils_1[_0x557284(0x121)][_0x557284(0x11a)](_0x5c129f,{'jobStorePath':_0x3a5f33,'jobId':_0x2fc17e})[_0x557284(0x11d)](async _0x276491=>{const _0x2a3c38=_0x557284,_0x21ec39=new state_manger_1[(_0x2a3c38(0x121))](_0x3a5f33);await _0x21ec39[_0x2a3c38(0x134)](),await _0x21ec39[_0x2a3c38(0x116)](_0x276491);})[_0x557284(0x115)](async()=>{const _0x3ff8eb=_0x557284,_0x9c45bb=path_2['default'][_0x3ff8eb(0x130)](_0x3a5f33,_0x3ff8eb(0x128));await(0x0,promises_1['rm'])(_0x9c45bb,{'recursive':!![],'force':!![]});}),{'jobId':_0x2fc17e};}static async['getJobs'](_0x2d40b5,_0x1d87fe){const _0xdddf1e=a69_0x10f7a5,_0x45c18b=await job_utils_1[_0xdddf1e(0x121)][_0xdddf1e(0x10a)](B2CService[_0xdddf1e(0x106)]),_0x39f743=await job_utils_1['default'][_0xdddf1e(0x104)](B2CService['b2cFolder'],_0x45c18b),_0x3a89db=_0x39f743['slice'](_0x1d87fe,_0x1d87fe+_0x2d40b5),_0x5b7d4d=[];for(const _0x1763c8 of _0x3a89db){const _0x2e6e96=await state_manger_1[_0xdddf1e(0x121)][_0xdddf1e(0x112)](path_2[_0xdddf1e(0x121)][_0xdddf1e(0x130)](B2CService[_0xdddf1e(0x106)],_0x1763c8));_0x5b7d4d[_0xdddf1e(0x12d)](_0x2e6e96);}return _0x5b7d4d;}static async[a69_0x10f7a5(0x120)](_0x33fa2f){const _0x4dc817=a69_0x10f7a5;try{return state_manger_1[_0x4dc817(0x121)][_0x4dc817(0x112)](path_2[_0x4dc817(0x121)][_0x4dc817(0x130)](B2CService['b2cFolder'],_0x33fa2f));}catch(_0x1c3c3a){throw new not_found_error_1[(_0x4dc817(0x118))](_0x1c3c3a);}}static async['getJobLog'](_0x137272){const _0x506cb7=a69_0x10f7a5,_0x34e209=path_2['default'][_0x506cb7(0x130)](B2CService['b2cFolder'],_0x137272,job_1[_0x506cb7(0x103)]);if(await utils_1[_0x506cb7(0x108)]['isExistsPath'](_0x34e209))return(0x0,promises_1[_0x506cb7(0x12e)])(_0x34e209,_0x506cb7(0x133))['then'](_0x2aef48=>csv_utils_1[_0x506cb7(0x121)][_0x506cb7(0x12b)](_0x2aef48,{'columns':!![]}));throw new not_found_error_1[(_0x506cb7(0x118))](_0x506cb7(0x131));}}exports[a69_0x10f7a5(0x121)]=B2CService,B2CService[a69_0x10f7a5(0x106)]=path_2[a69_0x10f7a5(0x121)][a69_0x10f7a5(0x130)](path_1[a69_0x10f7a5(0x113)],constants_1['B2C_FOLDER_NAME']);