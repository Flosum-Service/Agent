const a70_0x5b98df=a70_0x131c;(function(_0x5e0430,_0x28cde9){const _0xc4c2fa=a70_0x131c,_0x28fbe7=_0x5e0430();while(!![]){try{const _0x4546cc=-parseInt(_0xc4c2fa(0x13b))/0x1*(parseInt(_0xc4c2fa(0x14f))/0x2)+-parseInt(_0xc4c2fa(0x163))/0x3+-parseInt(_0xc4c2fa(0x13a))/0x4+parseInt(_0xc4c2fa(0x166))/0x5*(parseInt(_0xc4c2fa(0x144))/0x6)+parseInt(_0xc4c2fa(0x15f))/0x7*(parseInt(_0xc4c2fa(0x146))/0x8)+-parseInt(_0xc4c2fa(0x14c))/0x9*(parseInt(_0xc4c2fa(0x15a))/0xa)+-parseInt(_0xc4c2fa(0x14b))/0xb*(-parseInt(_0xc4c2fa(0x145))/0xc);if(_0x4546cc===_0x28cde9)break;else _0x28fbe7['push'](_0x28fbe7['shift']());}catch(_0x327d5f){_0x28fbe7['push'](_0x28fbe7['shift']());}}}(a70_0x211e,0x4ab05));const a70_0x4475c7=(function(){let _0x1759e4=!![];return function(_0x1540d5,_0xef45f4){const _0x2a2211=_0x1759e4?function(){if(_0xef45f4){const _0x27b0ab=_0xef45f4['apply'](_0x1540d5,arguments);return _0xef45f4=null,_0x27b0ab;}}:function(){};return _0x1759e4=![],_0x2a2211;};}()),a70_0x284029=a70_0x4475c7(this,function(){const _0x224fdf=a70_0x131c;return a70_0x284029[_0x224fdf(0x152)]()[_0x224fdf(0x139)](_0x224fdf(0x140))[_0x224fdf(0x152)]()[_0x224fdf(0x15b)](a70_0x284029)[_0x224fdf(0x139)](_0x224fdf(0x140));});a70_0x284029();'use strict';var __importDefault=this&&this[a70_0x5b98df(0x15e)]||function(_0x56b52a){return _0x56b52a&&_0x56b52a['__esModule']?_0x56b52a:{'default':_0x56b52a};};Object[a70_0x5b98df(0x13d)](exports,'__esModule',{'value':!![]});const promises_1=require(a70_0x5b98df(0x149)),utils_1=require(a70_0x5b98df(0x157)),not_found_error_1=require('../../../core/errors/not-found.error'),fs_utils_1=require('../../shared/utils/fs.utils'),constants_1=require(a70_0x5b98df(0x13f)),path_1=require('../../../configs/path'),job_1=require('../../../constants/job'),path_2=__importDefault(require(a70_0x5b98df(0x164))),manifest_manager_1=__importDefault(require(a70_0x5b98df(0x15d))),state_manger_1=__importDefault(require(a70_0x5b98df(0x15c))),job_utils_1=__importDefault(require(a70_0x5b98df(0x141))),csv_utils_1=__importDefault(require('../../shared/utils/csv.utils'));class B2CService{static async[a70_0x5b98df(0x148)](_0x38d4ff){const _0x136433=a70_0x5b98df,_0x2a6926=job_utils_1[_0x136433(0x14e)]['generateJobId'](),_0x26d3a1=path_2[_0x136433(0x14e)][_0x136433(0x153)](B2CService[_0x136433(0x150)],_0x2a6926);await(0x0,fs_utils_1[_0x136433(0x155)])(_0x26d3a1),await manifest_manager_1['default'][_0x136433(0x158)](_0x26d3a1,_0x38d4ff),await state_manger_1['default']['create'](_0x26d3a1,_0x2a6926);const _0x44a11f=path_2[_0x136433(0x14e)][_0x136433(0x153)](__dirname,job_1[_0x136433(0x159)]);return job_utils_1['default'][_0x136433(0x162)](_0x44a11f,{'jobStorePath':_0x26d3a1,'jobId':_0x2a6926})[_0x136433(0x142)](async _0x4404db=>{const _0x3c4eb8=_0x136433,_0x21a2f2=new state_manger_1[(_0x3c4eb8(0x14e))](_0x26d3a1);await _0x21a2f2[_0x3c4eb8(0x138)](),await _0x21a2f2['setError'](_0x4404db);}),{'jobId':_0x2a6926};}static async['getJobs'](_0x4cc322,_0x184c94){const _0x338e77=a70_0x5b98df,_0x2178ae=await job_utils_1[_0x338e77(0x14e)]['getJobsIds'](B2CService[_0x338e77(0x150)]),_0x2ca4a7=await job_utils_1['default'][_0x338e77(0x151)](B2CService[_0x338e77(0x150)],_0x2178ae),_0x276d69=_0x2ca4a7[_0x338e77(0x156)](_0x184c94,_0x184c94+_0x4cc322),_0x7af137=[];for(const _0x185619 of _0x276d69){const _0x1e1ffc=await state_manger_1['default'][_0x338e77(0x165)](path_2[_0x338e77(0x14e)][_0x338e77(0x153)](B2CService[_0x338e77(0x150)],_0x185619));_0x7af137['push'](_0x1e1ffc);}return _0x7af137;}static async[a70_0x5b98df(0x14d)](_0xe598ca){const _0x493b44=a70_0x5b98df;try{return state_manger_1[_0x493b44(0x14e)][_0x493b44(0x165)](path_2[_0x493b44(0x14e)]['join'](B2CService[_0x493b44(0x150)],_0xe598ca));}catch(_0x443ca2){throw new not_found_error_1[(_0x493b44(0x161))](_0x443ca2);}}static async[a70_0x5b98df(0x147)](_0xc5c0eb){const _0x5e8f8c=a70_0x5b98df,_0x5e130b=path_2[_0x5e8f8c(0x14e)]['join'](B2CService[_0x5e8f8c(0x150)],_0xc5c0eb,job_1['JOB_LOG_DETAILS_FILENAME']);if(await utils_1[_0x5e8f8c(0x13e)]['isExistsPath'](_0x5e130b))return(0x0,promises_1[_0x5e8f8c(0x14a)])(_0x5e130b,{'encoding':_0x5e8f8c(0x160)})[_0x5e8f8c(0x143)](_0x498855=>csv_utils_1[_0x5e8f8c(0x14e)][_0x5e8f8c(0x167)](_0x498855,{'columns':!![]}));throw new not_found_error_1['NotFoundError'](_0x5e8f8c(0x154));}}function a70_0x131c(_0x5e0092,_0x226e9d){const _0x59950c=a70_0x211e();return a70_0x131c=function(_0x284029,_0x4475c7){_0x284029=_0x284029-0x138;let _0x211e34=_0x59950c[_0x284029];return _0x211e34;},a70_0x131c(_0x5e0092,_0x226e9d);}function a70_0x211e(){const _0x1b1f93=['slice','@flosum/utils','create','JOB_PATH','2423110iqawzC','constructor','../../shared/managers/state-manger','../job/classes/manifest-manager','__importDefault','28WxqWxE','utf-8','NotFoundError','runJob','1651536JExmKh','path','getJobState','85PRCcwG','parse','init','search','1445032cDoeki','25738quJnHu','dataPath','defineProperty','FsUtils','../constants','(((.+)+)+)+$','../../shared/utils/job.utils','catch','then','27276iuUBQb','9974148ITBqDy','6968kyScpp','getJobLog','createJob','fs/promises','readFile','22ymDGcC','9KPFCxs','getJobStatus','default','22AyoacB','b2cFolder','sortJobsIds','toString','join','Job\x20log\x20not\x20found.','makeDir'];a70_0x211e=function(){return _0x1b1f93;};return a70_0x211e();}exports[a70_0x5b98df(0x14e)]=B2CService,B2CService[a70_0x5b98df(0x150)]=path_2[a70_0x5b98df(0x14e)]['join'](path_1[a70_0x5b98df(0x13c)],constants_1['B2C_FOLDER_NAME']);