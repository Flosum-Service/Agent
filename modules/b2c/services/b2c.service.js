const a69_0x731dc3=a69_0x1b24;(function(_0x4c603a,_0x9a5adb){const _0x5c84b8=a69_0x1b24,_0x318408=_0x4c603a();while(!![]){try{const _0x59730b=-parseInt(_0x5c84b8(0x1fb))/0x1*(-parseInt(_0x5c84b8(0x204))/0x2)+-parseInt(_0x5c84b8(0x212))/0x3*(-parseInt(_0x5c84b8(0x20d))/0x4)+parseInt(_0x5c84b8(0x1e2))/0x5+-parseInt(_0x5c84b8(0x1fe))/0x6*(parseInt(_0x5c84b8(0x209))/0x7)+parseInt(_0x5c84b8(0x214))/0x8+-parseInt(_0x5c84b8(0x203))/0x9*(-parseInt(_0x5c84b8(0x20a))/0xa)+-parseInt(_0x5c84b8(0x1f4))/0xb;if(_0x59730b===_0x9a5adb)break;else _0x318408['push'](_0x318408['shift']());}catch(_0x1e48ef){_0x318408['push'](_0x318408['shift']());}}}(a69_0x3b49,0x8864f));const a69_0x33524f=(function(){let _0x186749=!![];return function(_0x3152e6,_0x2ab720){const _0x5928f5=_0x186749?function(){const _0x5885ec=a69_0x1b24;if(_0x2ab720){const _0xdde6c4=_0x2ab720[_0x5885ec(0x206)](_0x3152e6,arguments);return _0x2ab720=null,_0xdde6c4;}}:function(){};return _0x186749=![],_0x5928f5;};}()),a69_0x9f605=a69_0x33524f(this,function(){const _0x4e429c=a69_0x1b24;return a69_0x9f605['toString']()[_0x4e429c(0x1f5)](_0x4e429c(0x210))[_0x4e429c(0x1ed)]()['constructor'](a69_0x9f605)['search']('(((.+)+)+)+$');});a69_0x9f605();function a69_0x3b49(){const _0x59bd56=['push','../../../core/errors/not-found.error','NotFoundError','default','generateJobId','b2cFolder','13205830qZlnHK','search','../job/classes/manifest-manager','getJobLog','then','createJob','makeDir','34CHKGGV','path','getJobsIds','5963016aOmZTE','Job\x20log\x20not\x20found.','setError','cartridges','FsUtils','2693826OGGAOZ','25834BIqxRX','slice','apply','runJob','getJobs','7TVvAJK','20sRwBDs','parse','catch','27844HLpTfb','fs/promises','../../shared/managers/state-manger','(((.+)+)+)+$','getJobState','192DSmXQV','defineProperty','6637848pYRiuS','join','../constants','create','sortJobsIds','utf-8','2199980VLjEdB','__importDefault','init','getJobStatus','finally','../../shared/utils/csv.utils','B2C_FOLDER_NAME','__esModule','../../shared/utils/job.utils','../../shared/utils/fs.utils','@flosum/utils','toString'];a69_0x3b49=function(){return _0x59bd56;};return a69_0x3b49();}'use strict';var __importDefault=this&&this[a69_0x731dc3(0x1e3)]||function(_0x3fefb6){const _0x162ff2=a69_0x731dc3;return _0x3fefb6&&_0x3fefb6[_0x162ff2(0x1e9)]?_0x3fefb6:{'default':_0x3fefb6};};Object[a69_0x731dc3(0x213)](exports,'__esModule',{'value':!![]});function a69_0x1b24(_0x223a08,_0x42e1fc){const _0x502ff9=a69_0x3b49();return a69_0x1b24=function(_0x9f605,_0x33524f){_0x9f605=_0x9f605-0x1e2;let _0x3b4924=_0x502ff9[_0x9f605];return _0x3b4924;},a69_0x1b24(_0x223a08,_0x42e1fc);}const promises_1=require(a69_0x731dc3(0x20e)),utils_1=require(a69_0x731dc3(0x1ec)),not_found_error_1=require(a69_0x731dc3(0x1ef)),fs_utils_1=require(a69_0x731dc3(0x1eb)),constants_1=require(a69_0x731dc3(0x216)),path_1=require('../../../configs/path'),job_1=require('../../../constants/job'),path_2=__importDefault(require(a69_0x731dc3(0x1fc))),manifest_manager_1=__importDefault(require(a69_0x731dc3(0x1f6))),state_manger_1=__importDefault(require(a69_0x731dc3(0x20f))),job_utils_1=__importDefault(require(a69_0x731dc3(0x1ea))),csv_utils_1=__importDefault(require(a69_0x731dc3(0x1e7)));class B2CService{static async[a69_0x731dc3(0x1f9)](_0x42752d){const _0x394be3=a69_0x731dc3,_0x2cba7c=job_utils_1['default'][_0x394be3(0x1f2)](),_0x309786=path_2[_0x394be3(0x1f1)][_0x394be3(0x215)](B2CService[_0x394be3(0x1f3)],_0x2cba7c);await(0x0,fs_utils_1[_0x394be3(0x1fa)])(_0x309786),await manifest_manager_1[_0x394be3(0x1f1)][_0x394be3(0x217)](_0x309786,_0x42752d),await state_manger_1[_0x394be3(0x1f1)][_0x394be3(0x217)](_0x309786,_0x2cba7c);const _0x13d53d=path_2[_0x394be3(0x1f1)][_0x394be3(0x215)](__dirname,job_1['JOB_PATH']);return job_utils_1['default'][_0x394be3(0x207)](_0x13d53d,{'jobStorePath':_0x309786,'jobId':_0x2cba7c})[_0x394be3(0x20c)](async _0x477f99=>{const _0x3960a7=_0x394be3,_0x328e83=new state_manger_1[(_0x3960a7(0x1f1))](_0x309786);await _0x328e83[_0x3960a7(0x1e4)](),await _0x328e83[_0x3960a7(0x200)](_0x477f99);})[_0x394be3(0x1e6)](async()=>{const _0x2d57a9=_0x394be3,_0x44dba2=path_2['default'][_0x2d57a9(0x215)](_0x309786,_0x2d57a9(0x201));await(0x0,promises_1['rm'])(_0x44dba2,{'recursive':!![],'force':!![]});}),{'jobId':_0x2cba7c};}static async[a69_0x731dc3(0x208)](_0x3db73d,_0x36d338){const _0x2208b5=a69_0x731dc3,_0x1ca63a=await job_utils_1['default'][_0x2208b5(0x1fd)](B2CService['b2cFolder']),_0x119332=await job_utils_1[_0x2208b5(0x1f1)][_0x2208b5(0x218)](B2CService['b2cFolder'],_0x1ca63a),_0xe69f22=_0x119332[_0x2208b5(0x205)](_0x36d338,_0x36d338+_0x3db73d),_0x3bf8a3=[];for(const _0x19b3e2 of _0xe69f22){const _0x390265=await state_manger_1['default']['getJobState'](path_2['default'][_0x2208b5(0x215)](B2CService['b2cFolder'],_0x19b3e2));_0x3bf8a3[_0x2208b5(0x1ee)](_0x390265);}return _0x3bf8a3;}static async[a69_0x731dc3(0x1e5)](_0x293a4e){const _0x5f300a=a69_0x731dc3;try{return state_manger_1['default'][_0x5f300a(0x211)](path_2[_0x5f300a(0x1f1)][_0x5f300a(0x215)](B2CService[_0x5f300a(0x1f3)],_0x293a4e));}catch(_0x50b246){throw new not_found_error_1[(_0x5f300a(0x1f0))](_0x50b246);}}static async[a69_0x731dc3(0x1f7)](_0x1a89e0){const _0x1462f8=a69_0x731dc3,_0x2b931f=path_2[_0x1462f8(0x1f1)][_0x1462f8(0x215)](B2CService[_0x1462f8(0x1f3)],_0x1a89e0,job_1['JOB_LOG_DETAILS_FILENAME']);if(await utils_1[_0x1462f8(0x202)]['isExistsPath'](_0x2b931f))return(0x0,promises_1['readFile'])(_0x2b931f,_0x1462f8(0x219))[_0x1462f8(0x1f8)](_0x2de22f=>csv_utils_1['default'][_0x1462f8(0x20b)](_0x2de22f,{'columns':!![]}));throw new not_found_error_1[(_0x1462f8(0x1f0))](_0x1462f8(0x1ff));}}exports[a69_0x731dc3(0x1f1)]=B2CService,B2CService[a69_0x731dc3(0x1f3)]=path_2[a69_0x731dc3(0x1f1)][a69_0x731dc3(0x215)](path_1['dataPath'],constants_1[a69_0x731dc3(0x1e8)]);