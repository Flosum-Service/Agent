const a70_0x16c1c6=a70_0x3430;(function(_0x348bc1,_0xa6faf6){const _0x1dce3e=a70_0x3430,_0x2a46d2=_0x348bc1();while(!![]){try{const _0x55437d=-parseInt(_0x1dce3e(0x121))/0x1+parseInt(_0x1dce3e(0x12b))/0x2+parseInt(_0x1dce3e(0x122))/0x3+-parseInt(_0x1dce3e(0x135))/0x4+parseInt(_0x1dce3e(0x10e))/0x5*(parseInt(_0x1dce3e(0x129))/0x6)+-parseInt(_0x1dce3e(0x12f))/0x7+-parseInt(_0x1dce3e(0x125))/0x8*(-parseInt(_0x1dce3e(0x119))/0x9);if(_0x55437d===_0xa6faf6)break;else _0x2a46d2['push'](_0x2a46d2['shift']());}catch(_0x1b3c0d){_0x2a46d2['push'](_0x2a46d2['shift']());}}}(a70_0x4810,0x932a7));function a70_0x3430(_0x5b05f0,_0x29900c){const _0x1ad951=a70_0x4810();return a70_0x3430=function(_0x137f39,_0x5d7e7f){_0x137f39=_0x137f39-0x10c;let _0x48100f=_0x1ad951[_0x137f39];return _0x48100f;},a70_0x3430(_0x5b05f0,_0x29900c);}const a70_0x5d7e7f=(function(){let _0x238085=!![];return function(_0x4e2858,_0x11f599){const _0x33f533=_0x238085?function(){if(_0x11f599){const _0x2e3ded=_0x11f599['apply'](_0x4e2858,arguments);return _0x11f599=null,_0x2e3ded;}}:function(){};return _0x238085=![],_0x33f533;};}()),a70_0x137f39=a70_0x5d7e7f(this,function(){const _0x1f8595=a70_0x3430;return a70_0x137f39['toString']()[_0x1f8595(0x10f)]('(((.+)+)+)+$')['toString']()[_0x1f8595(0x117)](a70_0x137f39)[_0x1f8595(0x10f)](_0x1f8595(0x139));});a70_0x137f39();'use strict';var __importDefault=this&&this[a70_0x16c1c6(0x123)]||function(_0x3d1963){const _0x44ce28=a70_0x16c1c6;return _0x3d1963&&_0x3d1963[_0x44ce28(0x128)]?_0x3d1963:{'default':_0x3d1963};};Object[a70_0x16c1c6(0x126)](exports,a70_0x16c1c6(0x128),{'value':!![]});function a70_0x4810(){const _0x160b79=['../../shared/utils/fs.utils','then','../../shared/managers/state-manger','799996Lawyjx','3221721erxkVk','__importDefault','getJobLog','24dDPmdb','defineProperty','../../shared/utils/job.utils','__esModule','6WPSPcL','NotFoundError','2320472PWcZfC','cartridges','JOB_LOG_DETAILS_FILENAME','default','120407eCXUhc','runJob','../constants','create','makeDir','@flosum/utils','4442956DUwumD','getJobsIds','Job\x20log\x20not\x20found.','../../../constants/job','(((.+)+)+)+$','setError','finally','getJobStatus','b2cFolder','join','531815poTYaK','search','utf-8','fs/promises','../job/classes/manifest-manager','createJob','generateJobId','dataPath','getJobState','constructor','B2C_FOLDER_NAME','570663BvRzPh','getJobs','catch','parse','JOB_PATH'];a70_0x4810=function(){return _0x160b79;};return a70_0x4810();}const promises_1=require(a70_0x16c1c6(0x111)),utils_1=require(a70_0x16c1c6(0x134)),not_found_error_1=require('../../../core/errors/not-found.error'),fs_utils_1=require(a70_0x16c1c6(0x11e)),constants_1=require(a70_0x16c1c6(0x131)),path_1=require('../../../configs/path'),job_1=require(a70_0x16c1c6(0x138)),path_2=__importDefault(require('path')),manifest_manager_1=__importDefault(require(a70_0x16c1c6(0x112))),state_manger_1=__importDefault(require(a70_0x16c1c6(0x120))),job_utils_1=__importDefault(require(a70_0x16c1c6(0x127))),csv_utils_1=__importDefault(require('../../shared/utils/csv.utils'));class B2CService{static async[a70_0x16c1c6(0x113)](_0x3de5b4){const _0x1dca63=a70_0x16c1c6,_0x4e9710=job_utils_1[_0x1dca63(0x12e)][_0x1dca63(0x114)](),_0xcc04ca=path_2[_0x1dca63(0x12e)][_0x1dca63(0x10d)](B2CService[_0x1dca63(0x10c)],_0x4e9710);await(0x0,fs_utils_1[_0x1dca63(0x133)])(_0xcc04ca),await manifest_manager_1[_0x1dca63(0x12e)][_0x1dca63(0x132)](_0xcc04ca,_0x3de5b4),await state_manger_1[_0x1dca63(0x12e)][_0x1dca63(0x132)](_0xcc04ca,_0x4e9710);const _0x334077=path_2['default'][_0x1dca63(0x10d)](__dirname,job_1[_0x1dca63(0x11d)]);return job_utils_1[_0x1dca63(0x12e)][_0x1dca63(0x130)](_0x334077,{'jobStorePath':_0xcc04ca,'jobId':_0x4e9710})[_0x1dca63(0x11b)](async _0x55c46a=>{const _0x3c9f6f=_0x1dca63,_0x42ccaa=new state_manger_1[(_0x3c9f6f(0x12e))](_0xcc04ca);await _0x42ccaa['init'](),await _0x42ccaa[_0x3c9f6f(0x13a)](_0x55c46a);})[_0x1dca63(0x13b)](async()=>{const _0x572eda=_0x1dca63,_0x5f0914=path_2[_0x572eda(0x12e)][_0x572eda(0x10d)](_0xcc04ca,_0x572eda(0x12c));await(0x0,promises_1['rm'])(_0x5f0914,{'recursive':!![],'force':!![]});}),{'jobId':_0x4e9710};}static async[a70_0x16c1c6(0x11a)](_0x563d90,_0x27f09){const _0xdc6e89=a70_0x16c1c6,_0x420086=await job_utils_1['default'][_0xdc6e89(0x136)](B2CService[_0xdc6e89(0x10c)]),_0x4dbecf=await job_utils_1['default']['sortJobsIds'](B2CService[_0xdc6e89(0x10c)],_0x420086),_0x962f85=_0x4dbecf['slice'](_0x27f09,_0x27f09+_0x563d90),_0x37fa8d=[];for(const _0x10033f of _0x962f85){const _0xbd6095=await state_manger_1[_0xdc6e89(0x12e)][_0xdc6e89(0x116)](path_2[_0xdc6e89(0x12e)][_0xdc6e89(0x10d)](B2CService[_0xdc6e89(0x10c)],_0x10033f));_0x37fa8d['push'](_0xbd6095);}return _0x37fa8d;}static async[a70_0x16c1c6(0x13c)](_0x58282a){const _0x30b828=a70_0x16c1c6;try{return state_manger_1[_0x30b828(0x12e)][_0x30b828(0x116)](path_2[_0x30b828(0x12e)]['join'](B2CService[_0x30b828(0x10c)],_0x58282a));}catch(_0x469a12){throw new not_found_error_1[(_0x30b828(0x12a))](_0x469a12);}}static async[a70_0x16c1c6(0x124)](_0x390764){const _0x590608=a70_0x16c1c6,_0x47c0c5=path_2['default']['join'](B2CService[_0x590608(0x10c)],_0x390764,job_1[_0x590608(0x12d)]);if(await utils_1['FsUtils']['isExistsPath'](_0x47c0c5))return(0x0,promises_1['readFile'])(_0x47c0c5,{'encoding':_0x590608(0x110)})[_0x590608(0x11f)](_0x2e809b=>csv_utils_1[_0x590608(0x12e)][_0x590608(0x11c)](_0x2e809b,{'columns':!![]}));throw new not_found_error_1[(_0x590608(0x12a))](_0x590608(0x137));}}exports[a70_0x16c1c6(0x12e)]=B2CService,B2CService[a70_0x16c1c6(0x10c)]=path_2[a70_0x16c1c6(0x12e)][a70_0x16c1c6(0x10d)](path_1[a70_0x16c1c6(0x115)],constants_1[a70_0x16c1c6(0x118)]);