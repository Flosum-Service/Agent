const a103_0x215327=a103_0x9fdb;(function(_0x1df588,_0x389427){const _0x33b8dd=a103_0x9fdb,_0x5005a2=_0x1df588();while(!![]){try{const _0x44d94c=-parseInt(_0x33b8dd(0x1f9))/0x1*(parseInt(_0x33b8dd(0x208))/0x2)+-parseInt(_0x33b8dd(0x1e9))/0x3+parseInt(_0x33b8dd(0x216))/0x4+parseInt(_0x33b8dd(0x1f1))/0x5+-parseInt(_0x33b8dd(0x205))/0x6*(-parseInt(_0x33b8dd(0x219))/0x7)+-parseInt(_0x33b8dd(0x212))/0x8*(parseInt(_0x33b8dd(0x1f5))/0x9)+parseInt(_0x33b8dd(0x206))/0xa*(-parseInt(_0x33b8dd(0x214))/0xb);if(_0x44d94c===_0x389427)break;else _0x5005a2['push'](_0x5005a2['shift']());}catch(_0x51acb5){_0x5005a2['push'](_0x5005a2['shift']());}}}(a103_0x489c,0xe40eb));function a103_0x489c(){const _0x2b024f=['BadRequestError','design:returntype','5248155mvVmvP','defineProperty','requestEnded','../shared/services/app-settings.service','ProxyController','../shared/utils','search','(((.+)+)+)+$','4365070KEHzWh','substring','Error\x20occurred\x20while\x20loading\x20PROXY_AUTHORITY.\x20Make\x20sure\x20that\x20file\x20is\x20in\x20root\x20folder\x20and\x20PROXY_AUTHORITY_PASSPHRASE\x20env\x20is\x20filled\x20in!','handler','3079971PiqjVs','context','Agent','__importDefault','448812Dwiaaj','__metadata','../../constants','X-Destination','pfxCertificate','length','default','AppSettingsService','next','toString','No\x20authority\x20passphrase!','getOwnPropertyDescriptor','10386hQsjjY','230lbiFEx','proxyAuthorityPassphrase','4WtukMv','store','joinURL','All','constructor','Controller','design:type','__param','response','function','8kUHPTM','decorate','32989BYwslY','metadata','5574028LIOzni','get','object','6979xiyBme','ERR_NO_DESTINATION','prototype','indexOf','Prefix','design:paramtypes','AUTHORITY_FILE_PATH','../../constants/errors','param','request','agent','../../core','pfxPassphrase','readFileSync'];a103_0x489c=function(){return _0x2b024f;};return a103_0x489c();}function a103_0x9fdb(_0x838ea,_0x3c8801){const _0x130faf=a103_0x489c();return a103_0x9fdb=function(_0x5b3f39,_0x1b6fa9){_0x5b3f39=_0x5b3f39-0x1e4;let _0x489c15=_0x130faf[_0x5b3f39];return _0x489c15;},a103_0x9fdb(_0x838ea,_0x3c8801);}const a103_0x1b6fa9=(function(){let _0x4e3c11=!![];return function(_0x248d25,_0x738f58){const _0x46a4a2=_0x4e3c11?function(){if(_0x738f58){const _0x26c506=_0x738f58['apply'](_0x248d25,arguments);return _0x738f58=null,_0x26c506;}}:function(){};return _0x4e3c11=![],_0x46a4a2;};}()),a103_0x5b3f39=a103_0x1b6fa9(this,function(){const _0x1e3db7=a103_0x9fdb;return a103_0x5b3f39[_0x1e3db7(0x202)]()[_0x1e3db7(0x1ef)](_0x1e3db7(0x1f0))[_0x1e3db7(0x202)]()[_0x1e3db7(0x20c)](a103_0x5b3f39)[_0x1e3db7(0x1ef)]('(((.+)+)+)+$');});a103_0x5b3f39();'use strict';var __decorate=this&&this['__decorate']||function(_0x4c946f,_0x4f31c9,_0x2a1946,_0x2a776a){const _0x5cb914=a103_0x9fdb;var _0x3ab931=arguments['length'],_0x58cdac=_0x3ab931<0x3?_0x4f31c9:_0x2a776a===null?_0x2a776a=Object[_0x5cb914(0x204)](_0x4f31c9,_0x2a1946):_0x2a776a,_0x350e0f;if(typeof Reflect===_0x5cb914(0x218)&&typeof Reflect[_0x5cb914(0x213)]===_0x5cb914(0x211))_0x58cdac=Reflect[_0x5cb914(0x213)](_0x4c946f,_0x4f31c9,_0x2a1946,_0x2a776a);else{for(var _0x3b815a=_0x4c946f['length']-0x1;_0x3b815a>=0x0;_0x3b815a--)if(_0x350e0f=_0x4c946f[_0x3b815a])_0x58cdac=(_0x3ab931<0x3?_0x350e0f(_0x58cdac):_0x3ab931>0x3?_0x350e0f(_0x4f31c9,_0x2a1946,_0x58cdac):_0x350e0f(_0x4f31c9,_0x2a1946))||_0x58cdac;}return _0x3ab931>0x3&&_0x58cdac&&Object[_0x5cb914(0x1ea)](_0x4f31c9,_0x2a1946,_0x58cdac),_0x58cdac;},__metadata=this&&this[a103_0x215327(0x1fa)]||function(_0x325f13,_0x398c12){const _0x52e50=a103_0x215327;if(typeof Reflect===_0x52e50(0x218)&&typeof Reflect[_0x52e50(0x215)]===_0x52e50(0x211))return Reflect['metadata'](_0x325f13,_0x398c12);},__param=this&&this[a103_0x215327(0x20f)]||function(_0x18f991,_0x481b7e){return function(_0x53e27a,_0x3871c1){_0x481b7e(_0x53e27a,_0x3871c1,_0x18f991);};},__importDefault=this&&this[a103_0x215327(0x1f8)]||function(_0x4973b6){return _0x4973b6&&_0x4973b6['__esModule']?_0x4973b6:{'default':_0x4973b6};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a103_0x215327(0x1ed)]=void 0x0;const errors_1=require(a103_0x215327(0x220)),core_1=require(a103_0x215327(0x1e4)),bad_request_error_1=require('../../core/errors/bad-request.error'),utils_1=require(a103_0x215327(0x1ee)),express_http_proxy_1=__importDefault(require('express-http-proxy')),fs_1=require('fs'),constants_1=require(a103_0x215327(0x1fb)),app_settings_service_1=require(a103_0x215327(0x1ec)),https_1=__importDefault(require('https'));let ProxyController=class ProxyController{constructor(_0x21adf2){const _0x5b4c59=a103_0x215327;this['appSettings']=_0x21adf2;if(_0x21adf2['store']['enableProxyAuthority'])try{this['pfxCertificate']=fs_1[_0x5b4c59(0x1e6)](constants_1[_0x5b4c59(0x21f)]),this['pfxPassphrase']=_0x21adf2[_0x5b4c59(0x209)][_0x5b4c59(0x207)];if(!this[_0x5b4c59(0x1e5)])throw Error(_0x5b4c59(0x203));}catch(_0x4bb985){throw new Error(_0x5b4c59(0x1f3));}}['handler'](_0x98273d,_0x52b4e5,_0x38caba){const _0x3db4ff=a103_0x215327,{originalUrl:_0x27ac45,baseUrl:_0xa6f93b}=_0x98273d,_0x3f9570=_0x98273d[_0x3db4ff(0x217)](_0x3db4ff(0x1fc));if(!_0x3f9570)throw new bad_request_error_1[(_0x3db4ff(0x1e7))](errors_1[_0x3db4ff(0x21a)]);const _0x150b98={'proxyReqPathResolver':()=>utils_1[_0x3db4ff(0x20a)](_0x3f9570,_0x27ac45[_0x3db4ff(0x1f2)](_0x27ac45[_0x3db4ff(0x21c)](_0xa6f93b)+_0xa6f93b[_0x3db4ff(0x1fe)])),'proxyReqOptDecorator':_0xf66d80=>{const _0x42c6ad=_0x3db4ff;return this[_0x42c6ad(0x1fd)]&&(_0xf66d80[_0x42c6ad(0x223)]=new https_1[(_0x42c6ad(0x1ff))][(_0x42c6ad(0x1f7))]({'pfx':this[_0x42c6ad(0x1fd)],'passphrase':this[_0x42c6ad(0x1e5)]})),_0xf66d80;}};_0x98273d[_0x3db4ff(0x1f6)][_0x3db4ff(0x1eb)]=!![],express_http_proxy_1['default'](_0x3f9570,_0x150b98)(_0x98273d,_0x52b4e5,_0x38caba);}};__decorate([core_1[a103_0x215327(0x20b)]('*'),__param(0x0,core_1[a103_0x215327(0x221)][a103_0x215327(0x222)]()),__param(0x1,core_1[a103_0x215327(0x221)][a103_0x215327(0x210)]()),__param(0x2,core_1['param'][a103_0x215327(0x201)]()),__metadata(a103_0x215327(0x20e),Function),__metadata(a103_0x215327(0x21e),[Object,Object,Function]),__metadata(a103_0x215327(0x1e8),void 0x0)],ProxyController[a103_0x215327(0x21b)],a103_0x215327(0x1f4),null),ProxyController=__decorate([core_1[a103_0x215327(0x20d)](),core_1['Version']('v1'),core_1[a103_0x215327(0x21d)]('proxy'),__metadata(a103_0x215327(0x21e),[app_settings_service_1[a103_0x215327(0x200)]])],ProxyController),exports['ProxyController']=ProxyController;