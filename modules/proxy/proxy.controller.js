const a103_0x16bb67=a103_0x4367;function a103_0x41f2(){const _0x393e0b=['__metadata','ProxyController','5013900RgqQbT','metadata','../../constants/errors','design:type','AppSettingsService','store','object','https','__esModule','param','__param','request','../shared/services/app-settings.service','12GlPWbu','constructor','pfxCertificate','Prefix','default','substring','decorate','readFileSync','search','221968LBCBcn','(((.+)+)+)+$','defineProperty','../../core/errors/bad-request.error','next','../../core','express-http-proxy','function','ERR_NO_DESTINATION','All','appSettings','Agent','proxyAuthorityPassphrase','__decorate','1923070BokUaA','2714970xPMNqo','3154276xmGfiS','Controller','get','BadRequestError','3aNpzsV','105iTALKz','AUTHORITY_FILE_PATH','response','__importDefault','handler','2783416oIHxDY','getOwnPropertyDescriptor','length','design:returntype','pfxPassphrase','indexOf','Version','../../constants','toString','apply','proxy','design:paramtypes','939952HbSHfo','requestEnded','enableProxyAuthority','../shared/utils','77qCAGVk'];a103_0x41f2=function(){return _0x393e0b;};return a103_0x41f2();}(function(_0x43d7cf,_0x3f598b){const _0x3200c9=a103_0x4367,_0x4401e7=_0x43d7cf();while(!![]){try{const _0x505fe9=parseInt(_0x3200c9(0x1de))/0x1+-parseInt(_0x3200c9(0x1d2))/0x2+parseInt(_0x3200c9(0x1cc))/0x3*(parseInt(_0x3200c9(0x1c8))/0x4)+-parseInt(_0x3200c9(0x1c7))/0x5*(parseInt(_0x3200c9(0x1f2))/0x6)+-parseInt(_0x3200c9(0x1cd))/0x7*(parseInt(_0x3200c9(0x1fb))/0x8)+parseInt(_0x3200c9(0x1e5))/0x9+parseInt(_0x3200c9(0x1c6))/0xa*(parseInt(_0x3200c9(0x1e2))/0xb);if(_0x505fe9===_0x3f598b)break;else _0x4401e7['push'](_0x4401e7['shift']());}catch(_0x2bb55a){_0x4401e7['push'](_0x4401e7['shift']());}}}(a103_0x41f2,0xb425c));const a103_0x21a436=(function(){let _0xff7a8b=!![];return function(_0x20078b,_0x5e2234){const _0xe242db=_0xff7a8b?function(){const _0x11dd3f=a103_0x4367;if(_0x5e2234){const _0x1c3260=_0x5e2234[_0x11dd3f(0x1db)](_0x20078b,arguments);return _0x5e2234=null,_0x1c3260;}}:function(){};return _0xff7a8b=![],_0xe242db;};}()),a103_0x1ec542=a103_0x21a436(this,function(){const _0x5a9082=a103_0x4367;return a103_0x1ec542['toString']()[_0x5a9082(0x1fa)](_0x5a9082(0x1fc))[_0x5a9082(0x1da)]()[_0x5a9082(0x1f3)](a103_0x1ec542)[_0x5a9082(0x1fa)](_0x5a9082(0x1fc));});a103_0x1ec542();'use strict';var __decorate=this&&this[a103_0x16bb67(0x1c5)]||function(_0x2024db,_0x1273bb,_0x523fd4,_0x35b0ca){const _0xd7369e=a103_0x16bb67;var _0x5a41cc=arguments[_0xd7369e(0x1d4)],_0x4445cf=_0x5a41cc<0x3?_0x1273bb:_0x35b0ca===null?_0x35b0ca=Object[_0xd7369e(0x1d3)](_0x1273bb,_0x523fd4):_0x35b0ca,_0x14d741;if(typeof Reflect===_0xd7369e(0x1eb)&&typeof Reflect[_0xd7369e(0x1f8)]===_0xd7369e(0x1bf))_0x4445cf=Reflect['decorate'](_0x2024db,_0x1273bb,_0x523fd4,_0x35b0ca);else{for(var _0x327bcd=_0x2024db[_0xd7369e(0x1d4)]-0x1;_0x327bcd>=0x0;_0x327bcd--)if(_0x14d741=_0x2024db[_0x327bcd])_0x4445cf=(_0x5a41cc<0x3?_0x14d741(_0x4445cf):_0x5a41cc>0x3?_0x14d741(_0x1273bb,_0x523fd4,_0x4445cf):_0x14d741(_0x1273bb,_0x523fd4))||_0x4445cf;}return _0x5a41cc>0x3&&_0x4445cf&&Object[_0xd7369e(0x1fd)](_0x1273bb,_0x523fd4,_0x4445cf),_0x4445cf;},__metadata=this&&this[a103_0x16bb67(0x1e3)]||function(_0x49c711,_0x8e5c31){const _0x5256e5=a103_0x16bb67;if(typeof Reflect==='object'&&typeof Reflect[_0x5256e5(0x1e6)]===_0x5256e5(0x1bf))return Reflect[_0x5256e5(0x1e6)](_0x49c711,_0x8e5c31);},__param=this&&this[a103_0x16bb67(0x1ef)]||function(_0x4ceaf5,_0x174d49){return function(_0x15cfbd,_0x32a580){_0x174d49(_0x15cfbd,_0x32a580,_0x4ceaf5);};},__importDefault=this&&this[a103_0x16bb67(0x1d0)]||function(_0x32f92f){const _0x2c777f=a103_0x16bb67;return _0x32f92f&&_0x32f92f[_0x2c777f(0x1ed)]?_0x32f92f:{'default':_0x32f92f};};function a103_0x4367(_0x186a85,_0x45a782){const _0x29af1b=a103_0x41f2();return a103_0x4367=function(_0x1ec542,_0x21a436){_0x1ec542=_0x1ec542-0x1bb;let _0x41f2c9=_0x29af1b[_0x1ec542];return _0x41f2c9;},a103_0x4367(_0x186a85,_0x45a782);}Object[a103_0x16bb67(0x1fd)](exports,a103_0x16bb67(0x1ed),{'value':!![]}),exports[a103_0x16bb67(0x1e4)]=void 0x0;const errors_1=require(a103_0x16bb67(0x1e7)),core_1=require(a103_0x16bb67(0x1bd)),bad_request_error_1=require(a103_0x16bb67(0x1bb)),utils_1=require(a103_0x16bb67(0x1e1)),express_http_proxy_1=__importDefault(require(a103_0x16bb67(0x1be))),fs_1=require('fs'),constants_1=require(a103_0x16bb67(0x1d9)),app_settings_service_1=require(a103_0x16bb67(0x1f1)),https_1=__importDefault(require(a103_0x16bb67(0x1ec)));let ProxyController=class ProxyController{constructor(_0x2ce6e1){const _0x580392=a103_0x16bb67;this[_0x580392(0x1c2)]=_0x2ce6e1;if(_0x2ce6e1[_0x580392(0x1ea)][_0x580392(0x1e0)])try{this[_0x580392(0x1f4)]=fs_1[_0x580392(0x1f9)](constants_1[_0x580392(0x1ce)]),this[_0x580392(0x1d6)]=_0x2ce6e1[_0x580392(0x1ea)][_0x580392(0x1c4)];if(!this[_0x580392(0x1d6)])throw Error('No\x20authority\x20passphrase!');}catch(_0x27ebc7){throw new Error('Error\x20occurred\x20while\x20loading\x20PROXY_AUTHORITY.\x20Make\x20sure\x20that\x20file\x20is\x20in\x20root\x20folder\x20and\x20PROXY_AUTHORITY_PASSPHRASE\x20env\x20is\x20filled\x20in!');}}[a103_0x16bb67(0x1d1)](_0x1501c8,_0x37c25a,_0x477350){const _0x320ee7=a103_0x16bb67,{originalUrl:_0x32beea,baseUrl:_0x4d57d4}=_0x1501c8,_0x468919=_0x1501c8[_0x320ee7(0x1ca)]('X-Destination');if(!_0x468919)throw new bad_request_error_1[(_0x320ee7(0x1cb))](errors_1[_0x320ee7(0x1c0)]);const _0x139189={'proxyReqPathResolver':()=>utils_1['joinURL'](_0x468919,_0x32beea[_0x320ee7(0x1f7)](_0x32beea[_0x320ee7(0x1d7)](_0x4d57d4)+_0x4d57d4[_0x320ee7(0x1d4)])),'proxyReqOptDecorator':_0x491b6b=>{const _0x467ee1=_0x320ee7;return this[_0x467ee1(0x1f4)]&&(_0x491b6b['agent']=new https_1['default'][(_0x467ee1(0x1c3))]({'pfx':this[_0x467ee1(0x1f4)],'passphrase':this[_0x467ee1(0x1d6)]})),_0x491b6b;}};_0x1501c8['context'][_0x320ee7(0x1df)]=!![],express_http_proxy_1[_0x320ee7(0x1f6)](_0x468919,_0x139189)(_0x1501c8,_0x37c25a,_0x477350);}};__decorate([core_1[a103_0x16bb67(0x1c1)]('*'),__param(0x0,core_1[a103_0x16bb67(0x1ee)][a103_0x16bb67(0x1f0)]()),__param(0x1,core_1['param'][a103_0x16bb67(0x1cf)]()),__param(0x2,core_1['param'][a103_0x16bb67(0x1bc)]()),__metadata(a103_0x16bb67(0x1e8),Function),__metadata(a103_0x16bb67(0x1dd),[Object,Object,Function]),__metadata(a103_0x16bb67(0x1d5),void 0x0)],ProxyController['prototype'],'handler',null),ProxyController=__decorate([core_1[a103_0x16bb67(0x1c9)](),core_1[a103_0x16bb67(0x1d8)]('v1'),core_1[a103_0x16bb67(0x1f5)](a103_0x16bb67(0x1dc)),__metadata('design:paramtypes',[app_settings_service_1[a103_0x16bb67(0x1e9)]])],ProxyController),exports[a103_0x16bb67(0x1e4)]=ProxyController;