const a103_0x2e1154=a103_0x37bb;(function(_0x410663,_0x42932a){const _0x35edda=a103_0x37bb,_0x1de25d=_0x410663();while(!![]){try{const _0x812087=parseInt(_0x35edda(0x19e))/0x1*(-parseInt(_0x35edda(0x1bd))/0x2)+-parseInt(_0x35edda(0x1be))/0x3*(parseInt(_0x35edda(0x1af))/0x4)+-parseInt(_0x35edda(0x1a9))/0x5*(parseInt(_0x35edda(0x1b5))/0x6)+parseInt(_0x35edda(0x1ca))/0x7+-parseInt(_0x35edda(0x1cd))/0x8+-parseInt(_0x35edda(0x1b9))/0x9*(-parseInt(_0x35edda(0x1bf))/0xa)+parseInt(_0x35edda(0x1d7))/0xb*(parseInt(_0x35edda(0x1a5))/0xc);if(_0x812087===_0x42932a)break;else _0x1de25d['push'](_0x1de25d['shift']());}catch(_0x3d1623){_0x1de25d['push'](_0x1de25d['shift']());}}}(a103_0x3db8,0xe369a));const a103_0x3a7eef=(function(){let _0x781433=!![];return function(_0x51eb2a,_0xda2c9e){const _0x4d71ba=_0x781433?function(){const _0x59b61a=a103_0x37bb;if(_0xda2c9e){const _0x550b8b=_0xda2c9e[_0x59b61a(0x1c2)](_0x51eb2a,arguments);return _0xda2c9e=null,_0x550b8b;}}:function(){};return _0x781433=![],_0x4d71ba;};}()),a103_0x519abf=a103_0x3a7eef(this,function(){const _0x1ff63=a103_0x37bb;return a103_0x519abf[_0x1ff63(0x1aa)]()['search']('(((.+)+)+)+$')[_0x1ff63(0x1aa)]()[_0x1ff63(0x1cf)](a103_0x519abf)[_0x1ff63(0x1db)](_0x1ff63(0x1c5));});a103_0x519abf();'use strict';var __decorate=this&&this[a103_0x2e1154(0x1d8)]||function(_0xc25dfb,_0x598715,_0x545354,_0x14133d){const _0x548517=a103_0x2e1154;var _0x547482=arguments[_0x548517(0x1a3)],_0x5e6b96=_0x547482<0x3?_0x598715:_0x14133d===null?_0x14133d=Object[_0x548517(0x1b7)](_0x598715,_0x545354):_0x14133d,_0x12882d;if(typeof Reflect===_0x548517(0x1cc)&&typeof Reflect[_0x548517(0x1d6)]==='function')_0x5e6b96=Reflect[_0x548517(0x1d6)](_0xc25dfb,_0x598715,_0x545354,_0x14133d);else{for(var _0x469095=_0xc25dfb[_0x548517(0x1a3)]-0x1;_0x469095>=0x0;_0x469095--)if(_0x12882d=_0xc25dfb[_0x469095])_0x5e6b96=(_0x547482<0x3?_0x12882d(_0x5e6b96):_0x547482>0x3?_0x12882d(_0x598715,_0x545354,_0x5e6b96):_0x12882d(_0x598715,_0x545354))||_0x5e6b96;}return _0x547482>0x3&&_0x5e6b96&&Object[_0x548517(0x1cb)](_0x598715,_0x545354,_0x5e6b96),_0x5e6b96;},__metadata=this&&this[a103_0x2e1154(0x1c8)]||function(_0x45b20f,_0x11ad68){const _0x3e11a2=a103_0x2e1154;if(typeof Reflect===_0x3e11a2(0x1cc)&&typeof Reflect[_0x3e11a2(0x1ab)]===_0x3e11a2(0x1c3))return Reflect[_0x3e11a2(0x1ab)](_0x45b20f,_0x11ad68);},__param=this&&this[a103_0x2e1154(0x1c6)]||function(_0x1429aa,_0x2bad9c){return function(_0x146eaf,_0x230402){_0x2bad9c(_0x146eaf,_0x230402,_0x1429aa);};},__importDefault=this&&this['__importDefault']||function(_0x34b5cf){return _0x34b5cf&&_0x34b5cf['__esModule']?_0x34b5cf:{'default':_0x34b5cf};};Object[a103_0x2e1154(0x1cb)](exports,a103_0x2e1154(0x1da),{'value':!![]}),exports[a103_0x2e1154(0x199)]=void 0x0;function a103_0x37bb(_0x44277c,_0x1d0eef){const _0x541c31=a103_0x3db8();return a103_0x37bb=function(_0x519abf,_0x3a7eef){_0x519abf=_0x519abf-0x199;let _0x3db887=_0x541c31[_0x519abf];return _0x3db887;},a103_0x37bb(_0x44277c,_0x1d0eef);}const errors_1=require(a103_0x2e1154(0x19f)),core_1=require('../../core'),bad_request_error_1=require(a103_0x2e1154(0x1d3)),utils_1=require(a103_0x2e1154(0x1a1)),express_http_proxy_1=__importDefault(require('express-http-proxy')),fs_1=require('fs'),constants_1=require('../../constants'),app_settings_service_1=require(a103_0x2e1154(0x1ae)),https_1=__importDefault(require(a103_0x2e1154(0x1b8)));let ProxyController=class ProxyController{constructor(_0x5cb5cb){const _0x3a228a=a103_0x2e1154;this['appSettings']=_0x5cb5cb;if(_0x5cb5cb[_0x3a228a(0x1b1)][_0x3a228a(0x1bc)])try{this[_0x3a228a(0x1d1)]=fs_1[_0x3a228a(0x1b3)](constants_1[_0x3a228a(0x1b6)]),this['pfxPassphrase']=_0x5cb5cb[_0x3a228a(0x1b1)][_0x3a228a(0x1ba)];if(!this[_0x3a228a(0x19d)])throw Error(_0x3a228a(0x1d9));}catch(_0x2af6e4){throw new Error(_0x3a228a(0x1d2));}}['handler'](_0x3fe6f6,_0x4025e9,_0x4776be){const _0x1f9b7a=a103_0x2e1154,{originalUrl:_0x4f267c,baseUrl:_0x199e2d}=_0x3fe6f6,_0x52f5d5=_0x3fe6f6[_0x1f9b7a(0x1c4)](_0x1f9b7a(0x1a2));if(!_0x52f5d5)throw new bad_request_error_1[(_0x1f9b7a(0x1b0))](errors_1[_0x1f9b7a(0x1c0)]);const _0x285984={'proxyReqPathResolver':()=>utils_1[_0x1f9b7a(0x1b2)](_0x52f5d5,_0x4f267c[_0x1f9b7a(0x1ac)](_0x4f267c[_0x1f9b7a(0x1a4)](_0x199e2d)+_0x199e2d[_0x1f9b7a(0x1a3)])),'proxyReqOptDecorator':_0x268c13=>{const _0x46c34e=_0x1f9b7a;return this[_0x46c34e(0x1d1)]&&(_0x268c13[_0x46c34e(0x1d4)]=new https_1[(_0x46c34e(0x1b4))][(_0x46c34e(0x1a6))]({'pfx':this[_0x46c34e(0x1d1)],'passphrase':this[_0x46c34e(0x19d)]})),_0x268c13;}};_0x3fe6f6[_0x1f9b7a(0x1ad)][_0x1f9b7a(0x1d0)]=!![],express_http_proxy_1['default'](_0x52f5d5,_0x285984)(_0x3fe6f6,_0x4025e9,_0x4776be);}};__decorate([core_1['All']('*'),__param(0x0,core_1[a103_0x2e1154(0x1bb)][a103_0x2e1154(0x1a8)]()),__param(0x1,core_1[a103_0x2e1154(0x1bb)][a103_0x2e1154(0x1c7)]()),__param(0x2,core_1[a103_0x2e1154(0x1bb)][a103_0x2e1154(0x1c1)]()),__metadata(a103_0x2e1154(0x1ce),Function),__metadata('design:paramtypes',[Object,Object,Function]),__metadata(a103_0x2e1154(0x1d5),void 0x0)],ProxyController['prototype'],a103_0x2e1154(0x1c9),null),ProxyController=__decorate([core_1[a103_0x2e1154(0x1a0)](),core_1['Version']('v1'),core_1[a103_0x2e1154(0x19c)](a103_0x2e1154(0x19a)),__metadata(a103_0x2e1154(0x1a7),[app_settings_service_1[a103_0x2e1154(0x19b)]])],ProxyController),exports[a103_0x2e1154(0x199)]=ProxyController;function a103_0x3db8(){const _0x43a141=['request','4564895rTyams','toString','metadata','substring','context','../shared/services/app-settings.service','260EAYhIj','BadRequestError','store','joinURL','readFileSync','default','12ODOaEI','AUTHORITY_FILE_PATH','getOwnPropertyDescriptor','https','18JBOXLW','proxyAuthorityPassphrase','param','enableProxyAuthority','4RhQOlX','69573yJaEEJ','884850nnmLZU','ERR_NO_DESTINATION','next','apply','function','get','(((.+)+)+)+$','__param','response','__metadata','handler','708582sJNBVt','defineProperty','object','11830880AkkrXn','design:type','constructor','requestEnded','pfxCertificate','Error\x20occurred\x20while\x20loading\x20PROXY_AUTHORITY.\x20Make\x20sure\x20that\x20file\x20is\x20in\x20root\x20folder\x20and\x20PROXY_AUTHORITY_PASSPHRASE\x20env\x20is\x20filled\x20in!','../../core/errors/bad-request.error','agent','design:returntype','decorate','319SXKFOk','__decorate','No\x20authority\x20passphrase!','__esModule','search','ProxyController','proxy','AppSettingsService','Prefix','pfxPassphrase','138835JzHpdl','../../constants/errors','Controller','../shared/utils','X-Destination','length','indexOf','2376492chnJFE','Agent','design:paramtypes'];a103_0x3db8=function(){return _0x43a141;};return a103_0x3db8();}