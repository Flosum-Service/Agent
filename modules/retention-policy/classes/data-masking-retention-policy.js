const a280_0x5449ea=a280_0x17d3;(function(_0x9ce4ad,_0xe123e4){const _0x1bc16c=a280_0x17d3,_0x5c04fe=_0x9ce4ad();while(!![]){try{const _0x552399=-parseInt(_0x1bc16c(0xf7))/0x1*(-parseInt(_0x1bc16c(0xe5))/0x2)+-parseInt(_0x1bc16c(0xde))/0x3+parseInt(_0x1bc16c(0xfc))/0x4*(parseInt(_0x1bc16c(0xfe))/0x5)+-parseInt(_0x1bc16c(0xd9))/0x6+-parseInt(_0x1bc16c(0xec))/0x7+parseInt(_0x1bc16c(0x100))/0x8*(-parseInt(_0x1bc16c(0x102))/0x9)+-parseInt(_0x1bc16c(0xe9))/0xa*(-parseInt(_0x1bc16c(0xdf))/0xb);if(_0x552399===_0xe123e4)break;else _0x5c04fe['push'](_0x5c04fe['shift']());}catch(_0x5dcb84){_0x5c04fe['push'](_0x5c04fe['shift']());}}}(a280_0x2481,0x4b675));const a280_0x193eb5=(function(){let _0x2d2229=!![];return function(_0x4013e5,_0x5d9a9a){const _0x2fa7a4=_0x2d2229?function(){const _0x39979a=a280_0x17d3;if(_0x5d9a9a){const _0x1e35db=_0x5d9a9a[_0x39979a(0xee)](_0x4013e5,arguments);return _0x5d9a9a=null,_0x1e35db;}}:function(){};return _0x2d2229=![],_0x2fa7a4;};}()),a280_0x5ab462=a280_0x193eb5(this,function(){const _0x404419=a280_0x17d3;return a280_0x5ab462['toString']()['search'](_0x404419(0xf3))['toString']()[_0x404419(0xfb)](a280_0x5ab462)['search'](_0x404419(0xf3));});function a280_0x2481(){const _0x350885=['getJobsIds','9ZtBKBf','maskingFolderPath','953442TaGTxG','error','readFile','parse','MaskingService','1419999KYTTEQ','869HMFpFZ','join','EXPIRED_RANGE_DATE','../../../core','push','utf-8','123864DrnKtv','getJobCompletedDate','fs/promises','name','160310cgmIbe','../../../constants/job','getTime','1526007cQwAop','path','apply','execute','Logger','FsUtils','default','(((.+)+)+)+$','__importDefault','filterExpiredJobs','../../data-masking/services/masking.service','1ZHCyuN','__esModule','DataMaskingRetentionPolicy','deleteJob','constructor','216472NxLDoo','isExistsPath','5tyvbOZ','logger','1787240vmqEMX'];a280_0x2481=function(){return _0x350885;};return a280_0x2481();}a280_0x5ab462();'use strict';var __importDefault=this&&this[a280_0x5449ea(0xf4)]||function(_0xaca7b6){const _0x370a49=a280_0x5449ea;return _0xaca7b6&&_0xaca7b6[_0x370a49(0xf8)]?_0xaca7b6:{'default':_0xaca7b6};};Object['defineProperty'](exports,a280_0x5449ea(0xf8),{'value':!![]}),exports[a280_0x5449ea(0xf9)]=void 0x0;const promises_1=require(a280_0x5449ea(0xe7)),core_1=require(a280_0x5449ea(0xe2)),utils_1=require('@flosum/utils'),job_1=require(a280_0x5449ea(0xea)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),masking_service_1=require(a280_0x5449ea(0xf6)),path_1=__importDefault(require(a280_0x5449ea(0xed)));class DataMaskingRetentionPolicy{constructor(){const _0x45c7f7=a280_0x5449ea;this[_0x45c7f7(0xe1)]=0x9a7ec800,this[_0x45c7f7(0xff)]=new core_1[(_0x45c7f7(0xf0))](DataMaskingRetentionPolicy[_0x45c7f7(0xe8)]);}async[a280_0x5449ea(0xef)](){const _0x2719c0=a280_0x5449ea;try{const _0x30c4a7=await job_utils_1[_0x2719c0(0xf2)][_0x2719c0(0x101)](masking_service_1[_0x2719c0(0xdd)]['maskingFolderPath']),_0x231599=await this[_0x2719c0(0xf5)](_0x30c4a7);for(const _0x2ab3d8 of _0x231599){await this[_0x2719c0(0xfa)](_0x2ab3d8);}}catch(_0x15f0b2){this[_0x2719c0(0xff)][_0x2719c0(0xda)](_0x15f0b2);}}async[a280_0x5449ea(0xf5)](_0x56495d){const _0x34585f=a280_0x5449ea,_0xf780b1=[];for(const _0x480fe4 of _0x56495d){const _0x4aa9b6=await this[_0x34585f(0xe6)](_0x480fe4),_0x1ce05d=_0x4aa9b6&&this['isExpiredDate'](_0x4aa9b6);_0x1ce05d&&_0xf780b1[_0x34585f(0xe3)](_0x480fe4);}return _0xf780b1;}async[a280_0x5449ea(0xe6)](_0x53e4b0){const _0x168abe=a280_0x5449ea;var _0x4f99de;const _0x306d47=path_1[_0x168abe(0xf2)][_0x168abe(0xe0)](masking_service_1[_0x168abe(0xdd)][_0x168abe(0x103)],_0x53e4b0,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x168abe(0xf1)][_0x168abe(0xfd)](_0x306d47))return null;const _0x1852e9=await(0x0,promises_1[_0x168abe(0xdb)])(_0x306d47,{'encoding':_0x168abe(0xe4)});return(_0x4f99de=JSON[_0x168abe(0xdc)](_0x1852e9)['completedDate'])!==null&&_0x4f99de!==void 0x0?_0x4f99de:null;}['isExpiredDate'](_0x5e4fad){const _0x3bceb3=a280_0x5449ea;return new Date()[_0x3bceb3(0xeb)]()-_0x5e4fad>this[_0x3bceb3(0xe1)];}[a280_0x5449ea(0xfa)](_0x1c650b){const _0x4fac79=a280_0x5449ea,_0x1eac0b=path_1['default'][_0x4fac79(0xe0)](masking_service_1[_0x4fac79(0xdd)][_0x4fac79(0x103)],_0x1c650b);return(0x0,promises_1['rm'])(_0x1eac0b,{'recursive':!![],'force':!![]});}}function a280_0x17d3(_0x265153,_0x13f7d0){const _0x84bc08=a280_0x2481();return a280_0x17d3=function(_0x5ab462,_0x193eb5){_0x5ab462=_0x5ab462-0xd9;let _0x248152=_0x84bc08[_0x5ab462];return _0x248152;},a280_0x17d3(_0x265153,_0x13f7d0);}exports[a280_0x5449ea(0xf9)]=DataMaskingRetentionPolicy;