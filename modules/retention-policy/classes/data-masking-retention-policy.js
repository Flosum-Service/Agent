const a306_0x530289=a306_0x436d;(function(_0x4bbc5a,_0x124390){const _0x31ad34=a306_0x436d,_0x24050d=_0x4bbc5a();while(!![]){try{const _0x5a7b94=parseInt(_0x31ad34(0x1c4))/0x1*(parseInt(_0x31ad34(0x1ca))/0x2)+-parseInt(_0x31ad34(0x1cf))/0x3+-parseInt(_0x31ad34(0x1c0))/0x4+parseInt(_0x31ad34(0x1c2))/0x5+-parseInt(_0x31ad34(0x1b1))/0x6+-parseInt(_0x31ad34(0x1d1))/0x7+parseInt(_0x31ad34(0x1d6))/0x8;if(_0x5a7b94===_0x124390)break;else _0x24050d['push'](_0x24050d['shift']());}catch(_0x1b44d6){_0x24050d['push'](_0x24050d['shift']());}}}(a306_0x3090,0xb9e97));const a306_0x5a01b3=(function(){let _0x28d242=!![];return function(_0x478837,_0x3607bf){const _0x208132=_0x28d242?function(){const _0x477161=a306_0x436d;if(_0x3607bf){const _0xcf6249=_0x3607bf[_0x477161(0x1c6)](_0x478837,arguments);return _0x3607bf=null,_0xcf6249;}}:function(){};return _0x28d242=![],_0x208132;};}()),a306_0x3e0837=a306_0x5a01b3(this,function(){const _0xc0bc33=a306_0x436d;return a306_0x3e0837[_0xc0bc33(0x1cb)]()[_0xc0bc33(0x1d2)](_0xc0bc33(0x1b4))[_0xc0bc33(0x1cb)]()['constructor'](a306_0x3e0837)[_0xc0bc33(0x1d2)](_0xc0bc33(0x1b4));});a306_0x3e0837();'use strict';var __importDefault=this&&this[a306_0x530289(0x1cd)]||function(_0x574662){const _0x56dd34=a306_0x530289;return _0x574662&&_0x574662[_0x56dd34(0x1b2)]?_0x574662:{'default':_0x574662};};Object[a306_0x530289(0x1bc)](exports,'__esModule',{'value':!![]}),exports['DataMaskingRetentionPolicy']=void 0x0;const promises_1=require(a306_0x530289(0x1c3)),core_1=require(a306_0x530289(0x1bf)),utils_1=require(a306_0x530289(0x1c7)),job_1=require(a306_0x530289(0x1be)),job_utils_1=__importDefault(require(a306_0x530289(0x1ce))),masking_service_1=require('../../data-masking/services/masking.service'),path_1=__importDefault(require(a306_0x530289(0x1b8)));class DataMaskingRetentionPolicy{constructor(){const _0xbc57ed=a306_0x530289;this[_0xbc57ed(0x1d7)]=0x9a7ec800,this[_0xbc57ed(0x1b9)]=new core_1[(_0xbc57ed(0x1d9))](DataMaskingRetentionPolicy[_0xbc57ed(0x1c9)]);}async[a306_0x530289(0x1b6)](){const _0x5a704d=a306_0x530289;try{const _0x5ac376=await job_utils_1[_0x5a704d(0x1b5)]['getJobsIds'](masking_service_1[_0x5a704d(0x1b3)]['maskingFolderPath']),_0x2fd63b=await this[_0x5a704d(0x1db)](_0x5ac376);for(const _0xec788a of _0x2fd63b){await this['deleteJob'](_0xec788a);}}catch(_0x50802e){this['logger'][_0x5a704d(0x1d4)](_0x50802e);}}async[a306_0x530289(0x1db)](_0x1641b0){const _0xd3d676=a306_0x530289,_0x3376a4=[];for(const _0x3a08a0 of _0x1641b0){const _0x265f54=await this[_0xd3d676(0x1c8)](_0x3a08a0),_0x3a13d4=_0x265f54&&this[_0xd3d676(0x1c5)](_0x265f54);_0x3a13d4&&_0x3376a4[_0xd3d676(0x1d0)](_0x3a08a0);}return _0x3376a4;}async[a306_0x530289(0x1c8)](_0x24d99d){const _0x66699a=a306_0x530289;var _0x21d8aa;const _0x51d0e6=path_1[_0x66699a(0x1b5)][_0x66699a(0x1d8)](masking_service_1[_0x66699a(0x1b3)][_0x66699a(0x1cc)],_0x24d99d,job_1[_0x66699a(0x1bd)]);if(!await utils_1[_0x66699a(0x1da)]['isExistsPath'](_0x51d0e6))return null;const _0xbd0891=await(0x0,promises_1[_0x66699a(0x1b7)])(_0x51d0e6,{'encoding':_0x66699a(0x1bb)});return(_0x21d8aa=JSON[_0x66699a(0x1d3)](_0xbd0891)[_0x66699a(0x1d5)])!==null&&_0x21d8aa!==void 0x0?_0x21d8aa:null;}[a306_0x530289(0x1c5)](_0x4a9f5f){const _0xf050cf=a306_0x530289;return new Date()['getTime']()-_0x4a9f5f>this[_0xf050cf(0x1d7)];}[a306_0x530289(0x1c1)](_0x26494b){const _0x588398=a306_0x530289,_0x23c886=path_1[_0x588398(0x1b5)][_0x588398(0x1d8)](masking_service_1['MaskingService'][_0x588398(0x1cc)],_0x26494b);return(0x0,promises_1['rm'])(_0x23c886,{'recursive':!![],'force':!![]});}}function a306_0x436d(_0x240bc3,_0x5b0338){const _0x272c43=a306_0x3090();return a306_0x436d=function(_0x3e0837,_0x5a01b3){_0x3e0837=_0x3e0837-0x1b1;let _0x309043=_0x272c43[_0x3e0837];return _0x309043;},a306_0x436d(_0x240bc3,_0x5b0338);}function a306_0x3090(){const _0x57c02b=['isExpiredDate','apply','@flosum/utils','getJobCompletedDate','name','950QqjUkC','toString','maskingFolderPath','__importDefault','../../shared/utils/job.utils','2810475wGyEmb','push','572509oqBozN','search','parse','error','completedDate','9226760ygjIqW','EXPIRED_RANGE_DATE','join','Logger','FsUtils','filterExpiredJobs','2769264MMjNnB','__esModule','MaskingService','(((.+)+)+)+$','default','execute','readFile','path','logger','DataMaskingRetentionPolicy','utf-8','defineProperty','JOB_LOG_STATE_FILENAME','../../../constants/job','../../../core','2649368SSAlMC','deleteJob','4794115PpIzta','fs/promises','1667eYzpap'];a306_0x3090=function(){return _0x57c02b;};return a306_0x3090();}exports[a306_0x530289(0x1ba)]=DataMaskingRetentionPolicy;