const a306_0x17e712=a306_0x2a5d;(function(_0x26f433,_0x4aeb7d){const _0x2756aa=a306_0x2a5d,_0x5bdf57=_0x26f433();while(!![]){try{const _0xb4fd1=parseInt(_0x2756aa(0x1e1))/0x1*(parseInt(_0x2756aa(0x1e6))/0x2)+-parseInt(_0x2756aa(0x1ed))/0x3*(parseInt(_0x2756aa(0x1d7))/0x4)+-parseInt(_0x2756aa(0x1e7))/0x5*(parseInt(_0x2756aa(0x1ca))/0x6)+parseInt(_0x2756aa(0x1dd))/0x7*(-parseInt(_0x2756aa(0x1eb))/0x8)+parseInt(_0x2756aa(0x1ee))/0x9+parseInt(_0x2756aa(0x1d2))/0xa*(-parseInt(_0x2756aa(0x1d1))/0xb)+parseInt(_0x2756aa(0x1dc))/0xc*(parseInt(_0x2756aa(0x1e5))/0xd);if(_0xb4fd1===_0x4aeb7d)break;else _0x5bdf57['push'](_0x5bdf57['shift']());}catch(_0x28d797){_0x5bdf57['push'](_0x5bdf57['shift']());}}}(a306_0x2497,0xef2a3));const a306_0x38443f=(function(){let _0x53c72e=!![];return function(_0x465650,_0x30e302){const _0x4a0941=_0x53c72e?function(){if(_0x30e302){const _0x255ae0=_0x30e302['apply'](_0x465650,arguments);return _0x30e302=null,_0x255ae0;}}:function(){};return _0x53c72e=![],_0x4a0941;};}()),a306_0x1ab9c1=a306_0x38443f(this,function(){const _0x313fe5=a306_0x2a5d;return a306_0x1ab9c1[_0x313fe5(0x1e2)]()[_0x313fe5(0x1c5)](_0x313fe5(0x1e3))['toString']()['constructor'](a306_0x1ab9c1)[_0x313fe5(0x1c5)]('(((.+)+)+)+$');});a306_0x1ab9c1();'use strict';function a306_0x2a5d(_0x246a58,_0x21f2a2){const _0x44aa33=a306_0x2497();return a306_0x2a5d=function(_0x1ab9c1,_0x38443f){_0x1ab9c1=_0x1ab9c1-0x1c4;let _0x24972d=_0x44aa33[_0x1ab9c1];return _0x24972d;},a306_0x2a5d(_0x246a58,_0x21f2a2);}var __importDefault=this&&this[a306_0x17e712(0x1db)]||function(_0x433691){const _0xe8be98=a306_0x17e712;return _0x433691&&_0x433691[_0xe8be98(0x1d4)]?_0x433691:{'default':_0x433691};};Object[a306_0x17e712(0x1c6)](exports,'__esModule',{'value':!![]}),exports[a306_0x17e712(0x1d8)]=void 0x0;const promises_1=require(a306_0x17e712(0x1cb)),core_1=require('../../../core'),utils_1=require('@flosum/utils'),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a306_0x17e712(0x1c4))),masking_service_1=require(a306_0x17e712(0x1e9)),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0x366722=a306_0x17e712;this[_0x366722(0x1c9)]=0x9a7ec800,this[_0x366722(0x1de)]=new core_1['Logger'](DataMaskingRetentionPolicy[_0x366722(0x1d9)]);}async[a306_0x17e712(0x1e4)](){const _0x168af7=a306_0x17e712;try{const _0x4dc9b6=await job_utils_1[_0x168af7(0x1d6)][_0x168af7(0x1da)](masking_service_1[_0x168af7(0x1e8)]['maskingFolderPath']),_0x2de23e=await this[_0x168af7(0x1d5)](_0x4dc9b6);for(const _0x3b7cdd of _0x2de23e){await this[_0x168af7(0x1d0)](_0x3b7cdd);}}catch(_0x22e35f){this['logger'][_0x168af7(0x1c8)](_0x22e35f);}}async[a306_0x17e712(0x1d5)](_0x58f3b4){const _0x30c130=a306_0x17e712,_0x20a14b=[];for(const _0x16d036 of _0x58f3b4){const _0x3bca88=await this[_0x30c130(0x1e0)](_0x16d036),_0x5efd2c=_0x3bca88&&this[_0x30c130(0x1df)](_0x3bca88);_0x5efd2c&&_0x20a14b[_0x30c130(0x1cc)](_0x16d036);}return _0x20a14b;}async['getJobCompletedDate'](_0x4ffe42){const _0x4baa95=a306_0x17e712;var _0x2d8e67;const _0x12cd92=path_1[_0x4baa95(0x1d6)][_0x4baa95(0x1ea)](masking_service_1['MaskingService'][_0x4baa95(0x1ef)],_0x4ffe42,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x4baa95(0x1cf)][_0x4baa95(0x1ec)](_0x12cd92))return null;const _0x339010=await(0x0,promises_1[_0x4baa95(0x1c7)])(_0x12cd92,{'encoding':'utf-8'});return(_0x2d8e67=JSON[_0x4baa95(0x1ce)](_0x339010)[_0x4baa95(0x1d3)])!==null&&_0x2d8e67!==void 0x0?_0x2d8e67:null;}[a306_0x17e712(0x1df)](_0x382c86){const _0x14f426=a306_0x17e712;return new Date()[_0x14f426(0x1cd)]()-_0x382c86>this[_0x14f426(0x1c9)];}[a306_0x17e712(0x1d0)](_0x3a8534){const _0x2ff096=a306_0x17e712,_0x8e6a7b=path_1[_0x2ff096(0x1d6)][_0x2ff096(0x1ea)](masking_service_1[_0x2ff096(0x1e8)][_0x2ff096(0x1ef)],_0x3a8534);return(0x0,promises_1['rm'])(_0x8e6a7b,{'recursive':!![],'force':!![]});}}function a306_0x2497(){const _0x2b97f3=['4043403HJcxjz','maskingFolderPath','../../shared/utils/job.utils','search','defineProperty','readFile','error','EXPIRED_RANGE_DATE','426oHviaM','fs/promises','push','getTime','parse','FsUtils','deleteJob','86713BSawUw','1990ARJofj','completedDate','__esModule','filterExpiredJobs','default','31436BUUfTx','DataMaskingRetentionPolicy','name','getJobsIds','__importDefault','17508OmGphq','7sePkwu','logger','isExpiredDate','getJobCompletedDate','1127774ddnjix','toString','(((.+)+)+)+$','execute','40807iQscsh','2JwwKEo','57275XlKExT','MaskingService','../../data-masking/services/masking.service','join','10918904DGzgaS','isExistsPath','546ndYZvk'];a306_0x2497=function(){return _0x2b97f3;};return a306_0x2497();}exports[a306_0x17e712(0x1d8)]=DataMaskingRetentionPolicy;