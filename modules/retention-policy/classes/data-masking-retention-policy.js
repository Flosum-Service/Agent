const a258_0x24e581=a258_0xffb7;(function(_0x4355d2,_0x2ef5ea){const _0x5ac057=a258_0xffb7,_0x3e469d=_0x4355d2();while(!![]){try{const _0x310081=parseInt(_0x5ac057(0x1ca))/0x1*(parseInt(_0x5ac057(0x1b4))/0x2)+parseInt(_0x5ac057(0x1c7))/0x3*(-parseInt(_0x5ac057(0x1cc))/0x4)+parseInt(_0x5ac057(0x1d1))/0x5*(-parseInt(_0x5ac057(0x1d5))/0x6)+parseInt(_0x5ac057(0x1bb))/0x7+-parseInt(_0x5ac057(0x1cd))/0x8+parseInt(_0x5ac057(0x1b5))/0x9+parseInt(_0x5ac057(0x1ae))/0xa*(parseInt(_0x5ac057(0x1d3))/0xb);if(_0x310081===_0x2ef5ea)break;else _0x3e469d['push'](_0x3e469d['shift']());}catch(_0x3a19b5){_0x3e469d['push'](_0x3e469d['shift']());}}}(a258_0x2371,0x32840));function a258_0x2371(){const _0x9a9ea9=['deleteJob','7764uiCIhQ','../../shared/utils/job.utils','../../data-masking/services/masking.service','89935JZariH','filterExpiredJobs','436BmfuNR','1018480isLfCf','maskingFolderPath','../../../constants/job','DataMaskingRetentionPolicy','10LyYKOQ','completedDate','122287zgWQmx','logger','1053690JiHIJe','__importDefault','readFile','../../../core','push','MaskingService','650mlYrIh','getJobCompletedDate','search','constructor','getTime','toString','2hlvuYD','1309077ikBIHA','__esModule','defineProperty','EXPIRED_RANGE_DATE','execute','join','66857pTcOiN','default','getJobsIds','utf-8','path','Logger','@flosum/utils','isExistsPath','FsUtils','parse','error'];a258_0x2371=function(){return _0x9a9ea9;};return a258_0x2371();}const a258_0x44c6a0=(function(){let _0x525f00=!![];return function(_0x5322f9,_0x3fb964){const _0xdbc85a=_0x525f00?function(){if(_0x3fb964){const _0x2e7d53=_0x3fb964['apply'](_0x5322f9,arguments);return _0x3fb964=null,_0x2e7d53;}}:function(){};return _0x525f00=![],_0xdbc85a;};}()),a258_0x30ed0d=a258_0x44c6a0(this,function(){const _0x14deb8=a258_0xffb7;return a258_0x30ed0d[_0x14deb8(0x1b3)]()[_0x14deb8(0x1b0)]('(((.+)+)+)+$')[_0x14deb8(0x1b3)]()[_0x14deb8(0x1b1)](a258_0x30ed0d)[_0x14deb8(0x1b0)]('(((.+)+)+)+$');});a258_0x30ed0d();'use strict';function a258_0xffb7(_0x4824b1,_0x2e31c6){const _0x51c0a9=a258_0x2371();return a258_0xffb7=function(_0x30ed0d,_0x44c6a0){_0x30ed0d=_0x30ed0d-0x1aa;let _0x23710b=_0x51c0a9[_0x30ed0d];return _0x23710b;},a258_0xffb7(_0x4824b1,_0x2e31c6);}var __importDefault=this&&this[a258_0x24e581(0x1d6)]||function(_0x27b88d){const _0x37defb=a258_0x24e581;return _0x27b88d&&_0x27b88d[_0x37defb(0x1b6)]?_0x27b88d:{'default':_0x27b88d};};Object[a258_0x24e581(0x1b7)](exports,a258_0x24e581(0x1b6),{'value':!![]}),exports[a258_0x24e581(0x1d0)]=void 0x0;const promises_1=require('fs/promises'),core_1=require(a258_0x24e581(0x1ab)),utils_1=require(a258_0x24e581(0x1c1)),job_1=require(a258_0x24e581(0x1cf)),job_utils_1=__importDefault(require(a258_0x24e581(0x1c8))),masking_service_1=require(a258_0x24e581(0x1c9)),path_1=__importDefault(require(a258_0x24e581(0x1bf)));class DataMaskingRetentionPolicy{constructor(){const _0x207287=a258_0x24e581;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0x207287(0x1d4)]=new core_1[(_0x207287(0x1c0))](DataMaskingRetentionPolicy['name']);}async[a258_0x24e581(0x1b9)](){const _0x29e167=a258_0x24e581;try{const _0x5f1cbb=await job_utils_1[_0x29e167(0x1bc)][_0x29e167(0x1bd)](masking_service_1[_0x29e167(0x1ad)][_0x29e167(0x1ce)]),_0x3aa590=await this['filterExpiredJobs'](_0x5f1cbb);for(const _0x38a5a1 of _0x3aa590){await this[_0x29e167(0x1c6)](_0x38a5a1);}}catch(_0x4d24db){this[_0x29e167(0x1d4)][_0x29e167(0x1c5)](_0x4d24db);}}async[a258_0x24e581(0x1cb)](_0x347b2e){const _0x1967e3=a258_0x24e581,_0x339aff=[];for(const _0x37791d of _0x347b2e){const _0x27debb=await this[_0x1967e3(0x1af)](_0x37791d),_0x295f4b=_0x27debb&&this['isExpiredDate'](_0x27debb);_0x295f4b&&_0x339aff[_0x1967e3(0x1ac)](_0x37791d);}return _0x339aff;}async['getJobCompletedDate'](_0x41d99d){const _0x3ca913=a258_0x24e581;var _0x236c18;const _0x277b77=path_1[_0x3ca913(0x1bc)][_0x3ca913(0x1ba)](masking_service_1[_0x3ca913(0x1ad)]['maskingFolderPath'],_0x41d99d,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x3ca913(0x1c3)][_0x3ca913(0x1c2)](_0x277b77))return null;const _0x4b2ff7=await(0x0,promises_1[_0x3ca913(0x1aa)])(_0x277b77,{'encoding':_0x3ca913(0x1be)});return(_0x236c18=JSON[_0x3ca913(0x1c4)](_0x4b2ff7)[_0x3ca913(0x1d2)])!==null&&_0x236c18!==void 0x0?_0x236c18:null;}['isExpiredDate'](_0x22bdb7){const _0x3d11ed=a258_0x24e581;return new Date()[_0x3d11ed(0x1b2)]()-_0x22bdb7>this[_0x3d11ed(0x1b8)];}[a258_0x24e581(0x1c6)](_0x5c806a){const _0x1ba064=a258_0x24e581,_0x21b22e=path_1[_0x1ba064(0x1bc)]['join'](masking_service_1[_0x1ba064(0x1ad)][_0x1ba064(0x1ce)],_0x5c806a);return(0x0,promises_1['rm'])(_0x21b22e,{'recursive':!![],'force':!![]});}}exports[a258_0x24e581(0x1d0)]=DataMaskingRetentionPolicy;