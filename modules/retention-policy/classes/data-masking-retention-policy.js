const a259_0x4b1ff9=a259_0x3812;(function(_0x43f735,_0x2fad1b){const _0x34bc08=a259_0x3812,_0x1b483b=_0x43f735();while(!![]){try{const _0x269d7f=-parseInt(_0x34bc08(0x1d4))/0x1*(-parseInt(_0x34bc08(0x1c7))/0x2)+parseInt(_0x34bc08(0x1cb))/0x3*(-parseInt(_0x34bc08(0x1ca))/0x4)+-parseInt(_0x34bc08(0x1d3))/0x5+parseInt(_0x34bc08(0x1df))/0x6+-parseInt(_0x34bc08(0x1ce))/0x7*(-parseInt(_0x34bc08(0x1e1))/0x8)+-parseInt(_0x34bc08(0x1e8))/0x9*(parseInt(_0x34bc08(0x1ed))/0xa)+-parseInt(_0x34bc08(0x1eb))/0xb*(parseInt(_0x34bc08(0x1da))/0xc);if(_0x269d7f===_0x2fad1b)break;else _0x1b483b['push'](_0x1b483b['shift']());}catch(_0x57bf48){_0x1b483b['push'](_0x1b483b['shift']());}}}(a259_0x3584,0xd068b));const a259_0x2903c4=(function(){let _0x9bdfe5=!![];return function(_0x1c00c5,_0x31296f){const _0x8184b2=_0x9bdfe5?function(){const _0x153c9b=a259_0x3812;if(_0x31296f){const _0x224c2d=_0x31296f[_0x153c9b(0x1f0)](_0x1c00c5,arguments);return _0x31296f=null,_0x224c2d;}}:function(){};return _0x9bdfe5=![],_0x8184b2;};}()),a259_0x306e51=a259_0x2903c4(this,function(){const _0x30e721=a259_0x3812;return a259_0x306e51[_0x30e721(0x1dc)]()['search'](_0x30e721(0x1e5))['toString']()[_0x30e721(0x1e6)](a259_0x306e51)['search'](_0x30e721(0x1e5));});a259_0x306e51();'use strict';var __importDefault=this&&this[a259_0x4b1ff9(0x1c9)]||function(_0xd34969){const _0x17ed19=a259_0x4b1ff9;return _0xd34969&&_0xd34969[_0x17ed19(0x1e7)]?_0xd34969:{'default':_0xd34969};};function a259_0x3584(){const _0x3ded40=['EXPIRED_RANGE_DATE','maskingFolderPath','4bZFvrj','defineProperty','__importDefault','4TbqTcJ','1918428doBkop','../../data-masking/services/masking.service','DataMaskingRetentionPolicy','60354ePOijf','logger','fs/promises','MaskingService','getJobsIds','2965365rRPTHE','152818sPsYxB','Logger','getTime','join','execute','utf-8','1828536rBDeMa','default','toString','readFile','isExpiredDate','10207626zlFtzs','../../shared/utils/job.utils','592SElQxR','parse','getJobCompletedDate','deleteJob','(((.+)+)+)+$','constructor','__esModule','1219095OjvyvI','path','@flosum/utils','11ZYuvUe','JOB_LOG_STATE_FILENAME','30DMQsHD','push','../../../core','apply','error','filterExpiredJobs'];a259_0x3584=function(){return _0x3ded40;};return a259_0x3584();}Object[a259_0x4b1ff9(0x1c8)](exports,'__esModule',{'value':!![]}),exports[a259_0x4b1ff9(0x1cd)]=void 0x0;const promises_1=require(a259_0x4b1ff9(0x1d0)),core_1=require(a259_0x4b1ff9(0x1ef)),utils_1=require(a259_0x4b1ff9(0x1ea)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a259_0x4b1ff9(0x1e0))),masking_service_1=require(a259_0x4b1ff9(0x1cc)),path_1=__importDefault(require(a259_0x4b1ff9(0x1e9)));class DataMaskingRetentionPolicy{constructor(){const _0x1347c0=a259_0x4b1ff9;this[_0x1347c0(0x1c5)]=0x9a7ec800,this[_0x1347c0(0x1cf)]=new core_1[(_0x1347c0(0x1d5))](DataMaskingRetentionPolicy['name']);}async[a259_0x4b1ff9(0x1d8)](){const _0x1390c0=a259_0x4b1ff9;try{const _0x9d3056=await job_utils_1['default'][_0x1390c0(0x1d2)](masking_service_1[_0x1390c0(0x1d1)][_0x1390c0(0x1c6)]),_0x1ebf88=await this[_0x1390c0(0x1f2)](_0x9d3056);for(const _0x2ba72c of _0x1ebf88){await this[_0x1390c0(0x1e4)](_0x2ba72c);}}catch(_0x177969){this['logger'][_0x1390c0(0x1f1)](_0x177969);}}async[a259_0x4b1ff9(0x1f2)](_0x3f9529){const _0x1a6264=a259_0x4b1ff9,_0x288667=[];for(const _0x8ab2b4 of _0x3f9529){const _0x287e6d=await this[_0x1a6264(0x1e3)](_0x8ab2b4),_0x46efca=_0x287e6d&&this[_0x1a6264(0x1de)](_0x287e6d);_0x46efca&&_0x288667[_0x1a6264(0x1ee)](_0x8ab2b4);}return _0x288667;}async[a259_0x4b1ff9(0x1e3)](_0x3ee0d9){const _0x7d762=a259_0x4b1ff9;var _0x42d530;const _0x1737cd=path_1['default'][_0x7d762(0x1d7)](masking_service_1[_0x7d762(0x1d1)][_0x7d762(0x1c6)],_0x3ee0d9,job_1[_0x7d762(0x1ec)]);if(!await utils_1['FsUtils']['isExistsPath'](_0x1737cd))return null;const _0x176a6a=await(0x0,promises_1[_0x7d762(0x1dd)])(_0x1737cd,{'encoding':_0x7d762(0x1d9)});return(_0x42d530=JSON[_0x7d762(0x1e2)](_0x176a6a)['completedDate'])!==null&&_0x42d530!==void 0x0?_0x42d530:null;}[a259_0x4b1ff9(0x1de)](_0x39b0c9){const _0x4caf28=a259_0x4b1ff9;return new Date()[_0x4caf28(0x1d6)]()-_0x39b0c9>this['EXPIRED_RANGE_DATE'];}[a259_0x4b1ff9(0x1e4)](_0x359254){const _0x57d0d2=a259_0x4b1ff9,_0x56de83=path_1[_0x57d0d2(0x1db)][_0x57d0d2(0x1d7)](masking_service_1[_0x57d0d2(0x1d1)][_0x57d0d2(0x1c6)],_0x359254);return(0x0,promises_1['rm'])(_0x56de83,{'recursive':!![],'force':!![]});}}function a259_0x3812(_0x1118b4,_0x7b9cfb){const _0x2b9c23=a259_0x3584();return a259_0x3812=function(_0x306e51,_0x2903c4){_0x306e51=_0x306e51-0x1c5;let _0x358424=_0x2b9c23[_0x306e51];return _0x358424;},a259_0x3812(_0x1118b4,_0x7b9cfb);}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;