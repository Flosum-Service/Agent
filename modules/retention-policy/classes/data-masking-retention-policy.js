const a279_0x565903=a279_0x1beb;(function(_0x484c51,_0x2cf588){const _0xda87d3=a279_0x1beb,_0x2eb3f4=_0x484c51();while(!![]){try{const _0x21328d=parseInt(_0xda87d3(0x1c7))/0x1+parseInt(_0xda87d3(0x1ea))/0x2+parseInt(_0xda87d3(0x1d1))/0x3+parseInt(_0xda87d3(0x1e4))/0x4*(-parseInt(_0xda87d3(0x1c8))/0x5)+parseInt(_0xda87d3(0x1ed))/0x6+parseInt(_0xda87d3(0x1ca))/0x7+-parseInt(_0xda87d3(0x1d5))/0x8;if(_0x21328d===_0x2cf588)break;else _0x2eb3f4['push'](_0x2eb3f4['shift']());}catch(_0x17eace){_0x2eb3f4['push'](_0x2eb3f4['shift']());}}}(a279_0x5bde,0xa7772));const a279_0x26a9f3=(function(){let _0x2148be=!![];return function(_0x2eea44,_0x4e1482){const _0x28c07e=_0x2148be?function(){const _0x1001b4=a279_0x1beb;if(_0x4e1482){const _0x49424d=_0x4e1482[_0x1001b4(0x1ee)](_0x2eea44,arguments);return _0x4e1482=null,_0x49424d;}}:function(){};return _0x2148be=![],_0x28c07e;};}()),a279_0x3aee4b=a279_0x26a9f3(this,function(){const _0x35be84=a279_0x1beb;return a279_0x3aee4b[_0x35be84(0x1dd)]()[_0x35be84(0x1d9)](_0x35be84(0x1e1))[_0x35be84(0x1dd)]()['constructor'](a279_0x3aee4b)[_0x35be84(0x1d9)](_0x35be84(0x1e1));});a279_0x3aee4b();'use strict';var __importDefault=this&&this[a279_0x565903(0x1ce)]||function(_0x592462){const _0x125846=a279_0x565903;return _0x592462&&_0x592462[_0x125846(0x1c9)]?_0x592462:{'default':_0x592462};};Object['defineProperty'](exports,a279_0x565903(0x1c9),{'value':!![]}),exports[a279_0x565903(0x1e2)]=void 0x0;const promises_1=require(a279_0x565903(0x1e8)),core_1=require(a279_0x565903(0x1d0)),utils_1=require(a279_0x565903(0x1d7)),job_1=require(a279_0x565903(0x1d6)),job_utils_1=__importDefault(require(a279_0x565903(0x1d8))),masking_service_1=require('../../data-masking/services/masking.service'),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0x583fdd=a279_0x565903;this[_0x583fdd(0x1e9)]=0x9a7ec800,this[_0x583fdd(0x1cd)]=new core_1[(_0x583fdd(0x1eb))](DataMaskingRetentionPolicy[_0x583fdd(0x1d3)]);}async[a279_0x565903(0x1d4)](){const _0x4231c0=a279_0x565903;try{const _0x1afbb9=await job_utils_1['default'][_0x4231c0(0x1da)](masking_service_1[_0x4231c0(0x1df)]['maskingFolderPath']),_0x88db7b=await this[_0x4231c0(0x1c6)](_0x1afbb9);for(const _0x2d9aeb of _0x88db7b){await this[_0x4231c0(0x1e5)](_0x2d9aeb);}}catch(_0x1979aa){this[_0x4231c0(0x1cd)][_0x4231c0(0x1d2)](_0x1979aa);}}async[a279_0x565903(0x1c6)](_0x317495){const _0x5784cb=a279_0x565903,_0x2b2a7a=[];for(const _0x4e6bb3 of _0x317495){const _0x17fea9=await this['getJobCompletedDate'](_0x4e6bb3),_0x3f14d5=_0x17fea9&&this['isExpiredDate'](_0x17fea9);_0x3f14d5&&_0x2b2a7a[_0x5784cb(0x1cc)](_0x4e6bb3);}return _0x2b2a7a;}async[a279_0x565903(0x1cf)](_0x24ed89){const _0x54a402=a279_0x565903;var _0x5b95fe;const _0x57a937=path_1[_0x54a402(0x1cb)][_0x54a402(0x1de)](masking_service_1[_0x54a402(0x1df)][_0x54a402(0x1db)],_0x24ed89,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x54a402(0x1ec)]['isExistsPath'](_0x57a937))return null;const _0xcda0fb=await(0x0,promises_1[_0x54a402(0x1e0)])(_0x57a937,{'encoding':_0x54a402(0x1e7)});return(_0x5b95fe=JSON[_0x54a402(0x1dc)](_0xcda0fb)[_0x54a402(0x1e3)])!==null&&_0x5b95fe!==void 0x0?_0x5b95fe:null;}['isExpiredDate'](_0x422e36){const _0x5d3bac=a279_0x565903;return new Date()[_0x5d3bac(0x1e6)]()-_0x422e36>this['EXPIRED_RANGE_DATE'];}[a279_0x565903(0x1e5)](_0x3fe070){const _0x3ace4e=a279_0x565903,_0x159bc5=path_1['default'][_0x3ace4e(0x1de)](masking_service_1[_0x3ace4e(0x1df)]['maskingFolderPath'],_0x3fe070);return(0x0,promises_1['rm'])(_0x159bc5,{'recursive':!![],'force':!![]});}}exports[a279_0x565903(0x1e2)]=DataMaskingRetentionPolicy;function a279_0x1beb(_0x221f7d,_0x5dea5c){const _0x2d2884=a279_0x5bde();return a279_0x1beb=function(_0x3aee4b,_0x26a9f3){_0x3aee4b=_0x3aee4b-0x1c6;let _0x5bdeeb=_0x2d2884[_0x3aee4b];return _0x5bdeeb;},a279_0x1beb(_0x221f7d,_0x5dea5c);}function a279_0x5bde(){const _0x5570f8=['deleteJob','getTime','utf-8','fs/promises','EXPIRED_RANGE_DATE','1184804SGFVer','Logger','FsUtils','7599066HORjHT','apply','filterExpiredJobs','551020RAajac','1285VfbnBj','__esModule','4899398kdEMcB','default','push','logger','__importDefault','getJobCompletedDate','../../../core','1340352UItlWS','error','name','execute','18222352airddN','../../../constants/job','@flosum/utils','../../shared/utils/job.utils','search','getJobsIds','maskingFolderPath','parse','toString','join','MaskingService','readFile','(((.+)+)+)+$','DataMaskingRetentionPolicy','completedDate','9228IAyfLS'];a279_0x5bde=function(){return _0x5570f8;};return a279_0x5bde();}