const a296_0x2a25a8=a296_0x2652;function a296_0x2652(_0x29cf9d,_0x5c6bca){const _0x5a2545=a296_0x3f5c();return a296_0x2652=function(_0x11baad,_0x540cb8){_0x11baad=_0x11baad-0x199;let _0x3f5c7=_0x5a2545[_0x11baad];return _0x3f5c7;},a296_0x2652(_0x29cf9d,_0x5c6bca);}(function(_0x25abbd,_0x41f6ad){const _0x3cb75a=a296_0x2652,_0x57c984=_0x25abbd();while(!![]){try{const _0x44222c=-parseInt(_0x3cb75a(0x199))/0x1+parseInt(_0x3cb75a(0x1c2))/0x2+-parseInt(_0x3cb75a(0x19c))/0x3*(parseInt(_0x3cb75a(0x1b8))/0x4)+-parseInt(_0x3cb75a(0x19d))/0x5*(parseInt(_0x3cb75a(0x1c0))/0x6)+parseInt(_0x3cb75a(0x1b0))/0x7*(-parseInt(_0x3cb75a(0x1ba))/0x8)+parseInt(_0x3cb75a(0x1ae))/0x9*(-parseInt(_0x3cb75a(0x1be))/0xa)+parseInt(_0x3cb75a(0x1a6))/0xb;if(_0x44222c===_0x41f6ad)break;else _0x57c984['push'](_0x57c984['shift']());}catch(_0x2dd857){_0x57c984['push'](_0x57c984['shift']());}}}(a296_0x3f5c,0x8cf75));const a296_0x540cb8=(function(){let _0x23ab06=!![];return function(_0x3dcecd,_0x17d0e2){const _0xb05cf5=_0x23ab06?function(){const _0x2446bc=a296_0x2652;if(_0x17d0e2){const _0x12d967=_0x17d0e2[_0x2446bc(0x1a0)](_0x3dcecd,arguments);return _0x17d0e2=null,_0x12d967;}}:function(){};return _0x23ab06=![],_0xb05cf5;};}()),a296_0x11baad=a296_0x540cb8(this,function(){const _0x2c7a81=a296_0x2652;return a296_0x11baad['toString']()[_0x2c7a81(0x1bc)]('(((.+)+)+)+$')[_0x2c7a81(0x1c6)]()[_0x2c7a81(0x19f)](a296_0x11baad)[_0x2c7a81(0x1bc)]('(((.+)+)+)+$');});a296_0x11baad();'use strict';var __importDefault=this&&this[a296_0x2a25a8(0x1b1)]||function(_0x4e3e2e){const _0x46865e=a296_0x2a25a8;return _0x4e3e2e&&_0x4e3e2e[_0x46865e(0x1b7)]?_0x4e3e2e:{'default':_0x4e3e2e};};Object[a296_0x2a25a8(0x1a4)](exports,a296_0x2a25a8(0x1b7),{'value':!![]}),exports[a296_0x2a25a8(0x1b9)]=void 0x0;const promises_1=require(a296_0x2a25a8(0x1a1)),core_1=require(a296_0x2a25a8(0x1c4)),utils_1=require(a296_0x2a25a8(0x1af)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),masking_service_1=require(a296_0x2a25a8(0x1c5)),path_1=__importDefault(require(a296_0x2a25a8(0x1bd)));class DataMaskingRetentionPolicy{constructor(){const _0x2247b3=a296_0x2a25a8;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0x2247b3(0x1b6)]=new core_1[(_0x2247b3(0x1a8))](DataMaskingRetentionPolicy[_0x2247b3(0x1aa)]);}async[a296_0x2a25a8(0x1b5)](){const _0x255be3=a296_0x2a25a8;try{const _0x3541c7=await job_utils_1[_0x255be3(0x1ac)][_0x255be3(0x1bb)](masking_service_1[_0x255be3(0x1a7)][_0x255be3(0x1b2)]),_0x45b2db=await this['filterExpiredJobs'](_0x3541c7);for(const _0x4ab75f of _0x45b2db){await this[_0x255be3(0x1c3)](_0x4ab75f);}}catch(_0x337835){this['logger'][_0x255be3(0x1c8)](_0x337835);}}async[a296_0x2a25a8(0x19e)](_0x375583){const _0x1decc2=a296_0x2a25a8,_0x51ac1b=[];for(const _0x145ef5 of _0x375583){const _0x50ee14=await this[_0x1decc2(0x1c7)](_0x145ef5),_0x18ae86=_0x50ee14&&this[_0x1decc2(0x1ab)](_0x50ee14);_0x18ae86&&_0x51ac1b[_0x1decc2(0x1a2)](_0x145ef5);}return _0x51ac1b;}async[a296_0x2a25a8(0x1c7)](_0x5b713f){const _0x388593=a296_0x2a25a8;var _0x47fe29;const _0x187ea8=path_1[_0x388593(0x1ac)]['join'](masking_service_1['MaskingService'][_0x388593(0x1b2)],_0x5b713f,job_1[_0x388593(0x1a9)]);if(!await utils_1[_0x388593(0x1bf)][_0x388593(0x1b4)](_0x187ea8))return null;const _0xe4f091=await(0x0,promises_1[_0x388593(0x1b3)])(_0x187ea8,{'encoding':_0x388593(0x1a3)});return(_0x47fe29=JSON[_0x388593(0x19b)](_0xe4f091)[_0x388593(0x1ad)])!==null&&_0x47fe29!==void 0x0?_0x47fe29:null;}[a296_0x2a25a8(0x1ab)](_0x296a00){const _0x421840=a296_0x2a25a8;return new Date()[_0x421840(0x1c1)]()-_0x296a00>this[_0x421840(0x19a)];}[a296_0x2a25a8(0x1c3)](_0x2e494f){const _0x3a8461=a296_0x2a25a8,_0x137fa2=path_1[_0x3a8461(0x1ac)][_0x3a8461(0x1a5)](masking_service_1['MaskingService'][_0x3a8461(0x1b2)],_0x2e494f);return(0x0,promises_1['rm'])(_0x137fa2,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;function a296_0x3f5c(){const _0x158d56=['fs/promises','push','utf-8','defineProperty','join','40600846XaLKqi','MaskingService','Logger','JOB_LOG_STATE_FILENAME','name','isExpiredDate','default','completedDate','9pHrsWA','@flosum/utils','84mKJxWQ','__importDefault','maskingFolderPath','readFile','isExistsPath','execute','logger','__esModule','1584zpQOzE','DataMaskingRetentionPolicy','189928xdNSrj','getJobsIds','search','path','6027430XSXiNv','FsUtils','4486962zogIzq','getTime','650650aoPjeX','deleteJob','../../../core','../../data-masking/services/masking.service','toString','getJobCompletedDate','error','830084nEFrgi','EXPIRED_RANGE_DATE','parse','7374zLHVsM','5vjLGTV','filterExpiredJobs','constructor','apply'];a296_0x3f5c=function(){return _0x158d56;};return a296_0x3f5c();}