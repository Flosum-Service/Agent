const a264_0xdc41f7=a264_0x143c;(function(_0x2a0f9c,_0x306b90){const _0x20cde5=a264_0x143c,_0x5c3f2f=_0x2a0f9c();while(!![]){try{const _0xee0fe8=-parseInt(_0x20cde5(0xba))/0x1+parseInt(_0x20cde5(0xcc))/0x2*(-parseInt(_0x20cde5(0xc2))/0x3)+parseInt(_0x20cde5(0xac))/0x4*(-parseInt(_0x20cde5(0xcf))/0x5)+parseInt(_0x20cde5(0xcd))/0x6+-parseInt(_0x20cde5(0xc3))/0x7*(parseInt(_0x20cde5(0xbb))/0x8)+-parseInt(_0x20cde5(0xc0))/0x9+parseInt(_0x20cde5(0xb3))/0xa;if(_0xee0fe8===_0x306b90)break;else _0x5c3f2f['push'](_0x5c3f2f['shift']());}catch(_0x175c5c){_0x5c3f2f['push'](_0x5c3f2f['shift']());}}}(a264_0x2d14,0x9dc94));const a264_0x31cfa4=(function(){let _0x52fa50=!![];return function(_0x407af0,_0x46df09){const _0x1f2553=_0x52fa50?function(){const _0x2dcb83=a264_0x143c;if(_0x46df09){const _0x1d1398=_0x46df09[_0x2dcb83(0xcb)](_0x407af0,arguments);return _0x46df09=null,_0x1d1398;}}:function(){};return _0x52fa50=![],_0x1f2553;};}()),a264_0x1fdfe6=a264_0x31cfa4(this,function(){const _0x25d4dd=a264_0x143c;return a264_0x1fdfe6['toString']()[_0x25d4dd(0xad)](_0x25d4dd(0xd1))[_0x25d4dd(0xae)]()[_0x25d4dd(0xc7)](a264_0x1fdfe6)[_0x25d4dd(0xad)]('(((.+)+)+)+$');});a264_0x1fdfe6();'use strict';var __importDefault=this&&this[a264_0xdc41f7(0xca)]||function(_0x4c8844){return _0x4c8844&&_0x4c8844['__esModule']?_0x4c8844:{'default':_0x4c8844};};Object[a264_0xdc41f7(0xd2)](exports,'__esModule',{'value':!![]}),exports[a264_0xdc41f7(0xb0)]=void 0x0;const promises_1=require(a264_0xdc41f7(0xbf)),core_1=require('../../../core'),utils_1=require(a264_0xdc41f7(0xc1)),job_1=require(a264_0xdc41f7(0xb9)),job_utils_1=__importDefault(require(a264_0xdc41f7(0xce))),masking_service_1=require(a264_0xdc41f7(0xb7)),path_1=__importDefault(require(a264_0xdc41f7(0xd0)));function a264_0x143c(_0x1b2da7,_0xc4aa72){const _0xcfac54=a264_0x2d14();return a264_0x143c=function(_0x1fdfe6,_0x31cfa4){_0x1fdfe6=_0x1fdfe6-0xa6;let _0x2d14ec=_0xcfac54[_0x1fdfe6];return _0x2d14ec;},a264_0x143c(_0x1b2da7,_0xc4aa72);}class DataMaskingRetentionPolicy{constructor(){const _0x46c119=a264_0xdc41f7;this[_0x46c119(0xc4)]=0x9a7ec800,this[_0x46c119(0xaf)]=new core_1['Logger'](DataMaskingRetentionPolicy[_0x46c119(0xbc)]);}async[a264_0xdc41f7(0xb6)](){const _0x578b47=a264_0xdc41f7;try{const _0x14eb3f=await job_utils_1[_0x578b47(0xb4)][_0x578b47(0xa9)](masking_service_1[_0x578b47(0xc6)][_0x578b47(0xa8)]),_0x54858f=await this['filterExpiredJobs'](_0x14eb3f);for(const _0x5b9519 of _0x54858f){await this[_0x578b47(0xbe)](_0x5b9519);}}catch(_0x31a74e){this[_0x578b47(0xaf)][_0x578b47(0xa7)](_0x31a74e);}}async['filterExpiredJobs'](_0x24e205){const _0xbb6507=a264_0xdc41f7,_0x55537b=[];for(const _0x25616e of _0x24e205){const _0x2df16b=await this[_0xbb6507(0xb5)](_0x25616e),_0x4fb9f2=_0x2df16b&&this[_0xbb6507(0xb1)](_0x2df16b);_0x4fb9f2&&_0x55537b[_0xbb6507(0xc9)](_0x25616e);}return _0x55537b;}async['getJobCompletedDate'](_0x50be3e){const _0x30781c=a264_0xdc41f7;var _0x3f9e14;const _0x256edb=path_1[_0x30781c(0xb4)]['join'](masking_service_1[_0x30781c(0xc6)][_0x30781c(0xa8)],_0x50be3e,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x30781c(0xb2)][_0x30781c(0xaa)](_0x256edb))return null;const _0x12c281=await(0x0,promises_1[_0x30781c(0xc5)])(_0x256edb,{'encoding':_0x30781c(0xb8)});return(_0x3f9e14=JSON[_0x30781c(0xa6)](_0x12c281)[_0x30781c(0xab)])!==null&&_0x3f9e14!==void 0x0?_0x3f9e14:null;}[a264_0xdc41f7(0xb1)](_0x26ee0c){const _0x2533ac=a264_0xdc41f7;return new Date()[_0x2533ac(0xbd)]()-_0x26ee0c>this['EXPIRED_RANGE_DATE'];}[a264_0xdc41f7(0xbe)](_0x4cf071){const _0x14c9da=a264_0xdc41f7,_0x445aa4=path_1['default'][_0x14c9da(0xc8)](masking_service_1[_0x14c9da(0xc6)]['maskingFolderPath'],_0x4cf071);return(0x0,promises_1['rm'])(_0x445aa4,{'recursive':!![],'force':!![]});}}function a264_0x2d14(){const _0x3e65b5=['name','getTime','deleteJob','fs/promises','164160guvAZj','@flosum/utils','8337eUvizl','7exOPWy','EXPIRED_RANGE_DATE','readFile','MaskingService','constructor','join','push','__importDefault','apply','890elwGdF','218052UodQYF','../../shared/utils/job.utils','1385OtxxYH','path','(((.+)+)+)+$','defineProperty','parse','error','maskingFolderPath','getJobsIds','isExistsPath','completedDate','5588GVRhoM','search','toString','logger','DataMaskingRetentionPolicy','isExpiredDate','FsUtils','39475070PyURYu','default','getJobCompletedDate','execute','../../data-masking/services/masking.service','utf-8','../../../constants/job','445486UUprZV','10001656uNylwI'];a264_0x2d14=function(){return _0x3e65b5;};return a264_0x2d14();}exports[a264_0xdc41f7(0xb0)]=DataMaskingRetentionPolicy;