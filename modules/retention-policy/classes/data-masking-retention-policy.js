const a307_0x9c29d=a307_0x14c2;(function(_0x575bb7,_0x300fa8){const _0x41b73f=a307_0x14c2,_0x159a79=_0x575bb7();while(!![]){try{const _0x599a99=-parseInt(_0x41b73f(0x14c))/0x1+parseInt(_0x41b73f(0x146))/0x2+-parseInt(_0x41b73f(0x140))/0x3+parseInt(_0x41b73f(0x147))/0x4+parseInt(_0x41b73f(0x161))/0x5+parseInt(_0x41b73f(0x155))/0x6+-parseInt(_0x41b73f(0x144))/0x7*(parseInt(_0x41b73f(0x153))/0x8);if(_0x599a99===_0x300fa8)break;else _0x159a79['push'](_0x159a79['shift']());}catch(_0x5dbd9e){_0x159a79['push'](_0x159a79['shift']());}}}(a307_0x4de1,0xb8435));const a307_0x43b69d=(function(){let _0x1e0818=!![];return function(_0x5df3dc,_0x342a8f){const _0x5ef053=_0x1e0818?function(){if(_0x342a8f){const _0x2d1aa8=_0x342a8f['apply'](_0x5df3dc,arguments);return _0x342a8f=null,_0x2d1aa8;}}:function(){};return _0x1e0818=![],_0x5ef053;};}()),a307_0x469301=a307_0x43b69d(this,function(){const _0x49473a=a307_0x14c2;return a307_0x469301['toString']()['search']('(((.+)+)+)+$')[_0x49473a(0x15e)]()[_0x49473a(0x141)](a307_0x469301)[_0x49473a(0x157)]('(((.+)+)+)+$');});a307_0x469301();function a307_0x14c2(_0x21a7ac,_0x20e74f){const _0x48641c=a307_0x4de1();return a307_0x14c2=function(_0x469301,_0x43b69d){_0x469301=_0x469301-0x138;let _0x4de1b0=_0x48641c[_0x469301];return _0x4de1b0;},a307_0x14c2(_0x21a7ac,_0x20e74f);}'use strict';var __importDefault=this&&this[a307_0x9c29d(0x15f)]||function(_0x3ea765){const _0x2458de=a307_0x9c29d;return _0x3ea765&&_0x3ea765[_0x2458de(0x138)]?_0x3ea765:{'default':_0x3ea765};};Object[a307_0x9c29d(0x13a)](exports,'__esModule',{'value':!![]}),exports[a307_0x9c29d(0x13d)]=void 0x0;const promises_1=require(a307_0x9c29d(0x152)),core_1=require(a307_0x9c29d(0x14e)),utils_1=require(a307_0x9c29d(0x14f)),job_1=require(a307_0x9c29d(0x13e)),job_utils_1=__importDefault(require(a307_0x9c29d(0x151))),masking_service_1=require(a307_0x9c29d(0x14d)),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0x327501=a307_0x9c29d;this[_0x327501(0x13c)]=0x9a7ec800,this['logger']=new core_1[(_0x327501(0x145))](DataMaskingRetentionPolicy[_0x327501(0x159)]);}async['execute'](){const _0x2c5333=a307_0x9c29d;try{const _0x346dd9=await job_utils_1[_0x2c5333(0x142)][_0x2c5333(0x154)](masking_service_1['MaskingService']['maskingFolderPath']),_0x3c1570=await this[_0x2c5333(0x149)](_0x346dd9);for(const _0xff25b5 of _0x3c1570){await this[_0x2c5333(0x13f)](_0xff25b5);}}catch(_0xfafcfe){this['logger'][_0x2c5333(0x139)](_0xfafcfe);}}async[a307_0x9c29d(0x149)](_0x2fb2bd){const _0x4fe3ca=a307_0x9c29d,_0x5e430c=[];for(const _0x48eea5 of _0x2fb2bd){const _0x51fa5c=await this[_0x4fe3ca(0x15b)](_0x48eea5),_0x5b6af6=_0x51fa5c&&this['isExpiredDate'](_0x51fa5c);_0x5b6af6&&_0x5e430c[_0x4fe3ca(0x160)](_0x48eea5);}return _0x5e430c;}async[a307_0x9c29d(0x15b)](_0x13bb1f){const _0x18cd84=a307_0x9c29d;var _0x56e39d;const _0x1e9ab2=path_1['default'][_0x18cd84(0x156)](masking_service_1[_0x18cd84(0x148)]['maskingFolderPath'],_0x13bb1f,job_1[_0x18cd84(0x13b)]);if(!await utils_1[_0x18cd84(0x15a)][_0x18cd84(0x143)](_0x1e9ab2))return null;const _0x248b09=await(0x0,promises_1[_0x18cd84(0x14a)])(_0x1e9ab2,{'encoding':_0x18cd84(0x14b)});return(_0x56e39d=JSON[_0x18cd84(0x15d)](_0x248b09)[_0x18cd84(0x158)])!==null&&_0x56e39d!==void 0x0?_0x56e39d:null;}[a307_0x9c29d(0x15c)](_0x3e401f){return new Date()['getTime']()-_0x3e401f>this['EXPIRED_RANGE_DATE'];}[a307_0x9c29d(0x13f)](_0xe847d6){const _0x5c3137=a307_0x9c29d,_0x22bf6b=path_1[_0x5c3137(0x142)][_0x5c3137(0x156)](masking_service_1[_0x5c3137(0x148)][_0x5c3137(0x150)],_0xe847d6);return(0x0,promises_1['rm'])(_0x22bf6b,{'recursive':!![],'force':!![]});}}exports[a307_0x9c29d(0x13d)]=DataMaskingRetentionPolicy;function a307_0x4de1(){const _0x43ec6c=['../../data-masking/services/masking.service','../../../core','@flosum/utils','maskingFolderPath','../../shared/utils/job.utils','fs/promises','541096OKIadk','getJobsIds','4767204KmUECR','join','search','completedDate','name','FsUtils','getJobCompletedDate','isExpiredDate','parse','toString','__importDefault','push','979375BFfwwf','__esModule','error','defineProperty','JOB_LOG_STATE_FILENAME','EXPIRED_RANGE_DATE','DataMaskingRetentionPolicy','../../../constants/job','deleteJob','1854765tDknCz','constructor','default','isExistsPath','7pztLqv','Logger','1055792vOSUSp','3623232SRjlJM','MaskingService','filterExpiredJobs','readFile','utf-8','983480gAjfQM'];a307_0x4de1=function(){return _0x43ec6c;};return a307_0x4de1();}