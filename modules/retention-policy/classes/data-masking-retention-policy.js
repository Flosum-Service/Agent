const a264_0x26cbba=a264_0x4ef3;(function(_0x2f168a,_0x338ae2){const _0x204f2c=a264_0x4ef3,_0x17c89d=_0x2f168a();while(!![]){try{const _0x227693=-parseInt(_0x204f2c(0x1a6))/0x1+parseInt(_0x204f2c(0x1ae))/0x2+-parseInt(_0x204f2c(0x1b0))/0x3+parseInt(_0x204f2c(0x1bc))/0x4*(parseInt(_0x204f2c(0x1b5))/0x5)+parseInt(_0x204f2c(0x1c9))/0x6+-parseInt(_0x204f2c(0x1c2))/0x7*(parseInt(_0x204f2c(0x1cb))/0x8)+-parseInt(_0x204f2c(0x1c1))/0x9*(parseInt(_0x204f2c(0x1ce))/0xa);if(_0x227693===_0x338ae2)break;else _0x17c89d['push'](_0x17c89d['shift']());}catch(_0x313004){_0x17c89d['push'](_0x17c89d['shift']());}}}(a264_0x434d,0x783e0));const a264_0x13f33a=(function(){let _0x1b1b0b=!![];return function(_0x231ccc,_0x3d6781){const _0x1adc7d=_0x1b1b0b?function(){if(_0x3d6781){const _0x4ccf5e=_0x3d6781['apply'](_0x231ccc,arguments);return _0x3d6781=null,_0x4ccf5e;}}:function(){};return _0x1b1b0b=![],_0x1adc7d;};}()),a264_0x12f33d=a264_0x13f33a(this,function(){const _0x13fc6c=a264_0x4ef3;return a264_0x12f33d['toString']()[_0x13fc6c(0x1d0)](_0x13fc6c(0x1c7))[_0x13fc6c(0x1ab)]()[_0x13fc6c(0x1cc)](a264_0x12f33d)[_0x13fc6c(0x1d0)](_0x13fc6c(0x1c7));});function a264_0x434d(){const _0x51b507=['(((.+)+)+)+$','deleteJob','2912958eVoVYj','__esModule','3896hviLjH','constructor','defineProperty','70LmLxhd','utf-8','search','543537imRIFP','push','maskingFolderPath','../../../core','../../../constants/job','toString','execute','logger','1490334WQvbqc','getJobCompletedDate','1988580KATuue','filterExpiredJobs','name','Logger','completedDate','66835BcwNZu','join','../../shared/utils/job.utils','getJobsIds','fs/promises','isExistsPath','MaskingService','180FbPQev','getTime','EXPIRED_RANGE_DATE','DataMaskingRetentionPolicy','isExpiredDate','153810gtANrP','196ZxeHAn','default','JOB_LOG_STATE_FILENAME','parse','path'];a264_0x434d=function(){return _0x51b507;};return a264_0x434d();}a264_0x12f33d();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x333061){return _0x333061&&_0x333061['__esModule']?_0x333061:{'default':_0x333061};};function a264_0x4ef3(_0x58c91b,_0x54f0e8){const _0x263511=a264_0x434d();return a264_0x4ef3=function(_0x12f33d,_0x13f33a){_0x12f33d=_0x12f33d-0x1a6;let _0x434d91=_0x263511[_0x12f33d];return _0x434d91;},a264_0x4ef3(_0x58c91b,_0x54f0e8);}Object[a264_0x26cbba(0x1cd)](exports,a264_0x26cbba(0x1ca),{'value':!![]}),exports[a264_0x26cbba(0x1bf)]=void 0x0;const promises_1=require(a264_0x26cbba(0x1b9)),core_1=require(a264_0x26cbba(0x1a9)),utils_1=require('@flosum/utils'),job_1=require(a264_0x26cbba(0x1aa)),job_utils_1=__importDefault(require(a264_0x26cbba(0x1b7))),masking_service_1=require('../../data-masking/services/masking.service'),path_1=__importDefault(require(a264_0x26cbba(0x1c6)));class DataMaskingRetentionPolicy{constructor(){const _0x394a99=a264_0x26cbba;this[_0x394a99(0x1be)]=0x9a7ec800,this[_0x394a99(0x1ad)]=new core_1[(_0x394a99(0x1b3))](DataMaskingRetentionPolicy[_0x394a99(0x1b2)]);}async[a264_0x26cbba(0x1ac)](){const _0x3c732a=a264_0x26cbba;try{const _0x3cf61b=await job_utils_1[_0x3c732a(0x1c3)][_0x3c732a(0x1b8)](masking_service_1['MaskingService'][_0x3c732a(0x1a8)]),_0x497327=await this[_0x3c732a(0x1b1)](_0x3cf61b);for(const _0x53c05a of _0x497327){await this[_0x3c732a(0x1c8)](_0x53c05a);}}catch(_0x1cde58){this[_0x3c732a(0x1ad)]['error'](_0x1cde58);}}async[a264_0x26cbba(0x1b1)](_0x1c4982){const _0x55663f=a264_0x26cbba,_0xb04911=[];for(const _0x177e2b of _0x1c4982){const _0x2c8b3f=await this[_0x55663f(0x1af)](_0x177e2b),_0x58c769=_0x2c8b3f&&this[_0x55663f(0x1c0)](_0x2c8b3f);_0x58c769&&_0xb04911[_0x55663f(0x1a7)](_0x177e2b);}return _0xb04911;}async[a264_0x26cbba(0x1af)](_0x29175c){const _0x58e64e=a264_0x26cbba;var _0x1b3238;const _0x53f9ec=path_1['default'][_0x58e64e(0x1b6)](masking_service_1[_0x58e64e(0x1bb)]['maskingFolderPath'],_0x29175c,job_1[_0x58e64e(0x1c4)]);if(!await utils_1['FsUtils'][_0x58e64e(0x1ba)](_0x53f9ec))return null;const _0xa741c0=await(0x0,promises_1['readFile'])(_0x53f9ec,{'encoding':_0x58e64e(0x1cf)});return(_0x1b3238=JSON[_0x58e64e(0x1c5)](_0xa741c0)[_0x58e64e(0x1b4)])!==null&&_0x1b3238!==void 0x0?_0x1b3238:null;}[a264_0x26cbba(0x1c0)](_0xd69e71){const _0x341f97=a264_0x26cbba;return new Date()[_0x341f97(0x1bd)]()-_0xd69e71>this[_0x341f97(0x1be)];}[a264_0x26cbba(0x1c8)](_0x152110){const _0x2712c9=a264_0x26cbba,_0x65246f=path_1['default'][_0x2712c9(0x1b6)](masking_service_1[_0x2712c9(0x1bb)]['maskingFolderPath'],_0x152110);return(0x0,promises_1['rm'])(_0x65246f,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;