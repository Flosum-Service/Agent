const a264_0x203ead=a264_0x22a9;(function(_0x13c400,_0x2c6237){const _0x19f369=a264_0x22a9,_0x28e025=_0x13c400();while(!![]){try{const _0x43a454=-parseInt(_0x19f369(0x1f3))/0x1*(parseInt(_0x19f369(0x1e9))/0x2)+parseInt(_0x19f369(0x1fd))/0x3+parseInt(_0x19f369(0x1fc))/0x4+-parseInt(_0x19f369(0x1df))/0x5+parseInt(_0x19f369(0x1f6))/0x6*(-parseInt(_0x19f369(0x1d6))/0x7)+-parseInt(_0x19f369(0x1db))/0x8+parseInt(_0x19f369(0x1ee))/0x9;if(_0x43a454===_0x2c6237)break;else _0x28e025['push'](_0x28e025['shift']());}catch(_0x168fc3){_0x28e025['push'](_0x28e025['shift']());}}}(a264_0x3a49,0x4ec95));const a264_0x44123a=(function(){let _0x5e9efd=!![];return function(_0x462aa4,_0x44114a){const _0xb37aab=_0x5e9efd?function(){const _0x4dbdaa=a264_0x22a9;if(_0x44114a){const _0x18f983=_0x44114a[_0x4dbdaa(0x200)](_0x462aa4,arguments);return _0x44114a=null,_0x18f983;}}:function(){};return _0x5e9efd=![],_0xb37aab;};}()),a264_0x2e82dd=a264_0x44123a(this,function(){const _0x4b383f=a264_0x22a9;return a264_0x2e82dd[_0x4b383f(0x1e4)]()[_0x4b383f(0x1d7)](_0x4b383f(0x202))[_0x4b383f(0x1e4)]()['constructor'](a264_0x2e82dd)[_0x4b383f(0x1d7)]('(((.+)+)+)+$');});a264_0x2e82dd();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3fdee5){const _0x3d715d=a264_0x22a9;return _0x3fdee5&&_0x3fdee5[_0x3d715d(0x1e0)]?_0x3fdee5:{'default':_0x3fdee5};};Object[a264_0x203ead(0x1f5)](exports,a264_0x203ead(0x1e0),{'value':!![]}),exports[a264_0x203ead(0x1ef)]=void 0x0;const promises_1=require('fs/promises'),core_1=require(a264_0x203ead(0x1ff)),utils_1=require(a264_0x203ead(0x1fb)),job_1=require(a264_0x203ead(0x1e1)),job_utils_1=__importDefault(require(a264_0x203ead(0x1f0))),masking_service_1=require(a264_0x203ead(0x1da)),path_1=__importDefault(require(a264_0x203ead(0x1fe)));function a264_0x22a9(_0x11e1fb,_0x637a26){const _0x4bd201=a264_0x3a49();return a264_0x22a9=function(_0x2e82dd,_0x44123a){_0x2e82dd=_0x2e82dd-0x1d6;let _0x3a49e2=_0x4bd201[_0x2e82dd];return _0x3a49e2;},a264_0x22a9(_0x11e1fb,_0x637a26);}function a264_0x3a49(){const _0x33041c=['JOB_LOG_STATE_FILENAME','1271485OtGobD','__esModule','../../../constants/job','logger','isExistsPath','toString','getJobCompletedDate','MaskingService','execute','join','178WAxYdn','filterExpiredJobs','deleteJob','name','getJobsIds','8194473nHZxrY','DataMaskingRetentionPolicy','../../shared/utils/job.utils','EXPIRED_RANGE_DATE','Logger','6143mtKISL','getTime','defineProperty','9354eXpviR','maskingFolderPath','isExpiredDate','readFile','default','@flosum/utils','1900000zfDKlZ','1903011ZaQUEx','path','../../../core','apply','FsUtils','(((.+)+)+)+$','completedDate','2597LPCcEl','search','error','parse','../../data-masking/services/masking.service','2541696LMiFJl','push','utf-8'];a264_0x3a49=function(){return _0x33041c;};return a264_0x3a49();}class DataMaskingRetentionPolicy{constructor(){const _0x53a63d=a264_0x203ead;this[_0x53a63d(0x1f1)]=0x9a7ec800,this[_0x53a63d(0x1e2)]=new core_1[(_0x53a63d(0x1f2))](DataMaskingRetentionPolicy[_0x53a63d(0x1ec)]);}async[a264_0x203ead(0x1e7)](){const _0x331cd6=a264_0x203ead;try{const _0xea9b13=await job_utils_1['default'][_0x331cd6(0x1ed)](masking_service_1[_0x331cd6(0x1e6)][_0x331cd6(0x1f7)]),_0x275c9a=await this['filterExpiredJobs'](_0xea9b13);for(const _0x1d53dc of _0x275c9a){await this[_0x331cd6(0x1eb)](_0x1d53dc);}}catch(_0x18f693){this[_0x331cd6(0x1e2)][_0x331cd6(0x1d8)](_0x18f693);}}async[a264_0x203ead(0x1ea)](_0x3fa955){const _0x1ff403=a264_0x203ead,_0x217925=[];for(const _0x5a931f of _0x3fa955){const _0x54b4c0=await this[_0x1ff403(0x1e5)](_0x5a931f),_0x2ec400=_0x54b4c0&&this[_0x1ff403(0x1f8)](_0x54b4c0);_0x2ec400&&_0x217925[_0x1ff403(0x1dc)](_0x5a931f);}return _0x217925;}async['getJobCompletedDate'](_0x592f24){const _0xa5525d=a264_0x203ead;var _0x288172;const _0x264165=path_1[_0xa5525d(0x1fa)]['join'](masking_service_1[_0xa5525d(0x1e6)]['maskingFolderPath'],_0x592f24,job_1[_0xa5525d(0x1de)]);if(!await utils_1[_0xa5525d(0x201)][_0xa5525d(0x1e3)](_0x264165))return null;const _0x4378e8=await(0x0,promises_1[_0xa5525d(0x1f9)])(_0x264165,{'encoding':_0xa5525d(0x1dd)});return(_0x288172=JSON[_0xa5525d(0x1d9)](_0x4378e8)[_0xa5525d(0x203)])!==null&&_0x288172!==void 0x0?_0x288172:null;}[a264_0x203ead(0x1f8)](_0x4a6ed0){const _0x503929=a264_0x203ead;return new Date()[_0x503929(0x1f4)]()-_0x4a6ed0>this[_0x503929(0x1f1)];}[a264_0x203ead(0x1eb)](_0x3b5068){const _0x31f916=a264_0x203ead,_0x1e29e1=path_1[_0x31f916(0x1fa)][_0x31f916(0x1e8)](masking_service_1[_0x31f916(0x1e6)][_0x31f916(0x1f7)],_0x3b5068);return(0x0,promises_1['rm'])(_0x1e29e1,{'recursive':!![],'force':!![]});}}exports[a264_0x203ead(0x1ef)]=DataMaskingRetentionPolicy;