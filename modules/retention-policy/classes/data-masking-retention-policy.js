const a258_0x5b3ec3=a258_0x55a9;(function(_0x380944,_0x1d4071){const _0x23c610=a258_0x55a9,_0x4e74d9=_0x380944();while(!![]){try{const _0x4e8c1f=parseInt(_0x23c610(0x97))/0x1*(-parseInt(_0x23c610(0xa5))/0x2)+parseInt(_0x23c610(0xaf))/0x3+parseInt(_0x23c610(0xbf))/0x4*(parseInt(_0x23c610(0xc3))/0x5)+parseInt(_0x23c610(0xb2))/0x6+-parseInt(_0x23c610(0xa7))/0x7+-parseInt(_0x23c610(0xa1))/0x8*(parseInt(_0x23c610(0xc1))/0x9)+-parseInt(_0x23c610(0xbe))/0xa*(-parseInt(_0x23c610(0x98))/0xb);if(_0x4e8c1f===_0x1d4071)break;else _0x4e74d9['push'](_0x4e74d9['shift']());}catch(_0x495bcc){_0x4e74d9['push'](_0x4e74d9['shift']());}}}(a258_0x56c3,0x68da0));const a258_0xf204a2=(function(){let _0x42c869=!![];return function(_0x53c48c,_0x54f496){const _0x15b7dc=_0x42c869?function(){const _0x20b7fd=a258_0x55a9;if(_0x54f496){const _0x548b78=_0x54f496[_0x20b7fd(0xb9)](_0x53c48c,arguments);return _0x54f496=null,_0x548b78;}}:function(){};return _0x42c869=![],_0x15b7dc;};}()),a258_0x242061=a258_0xf204a2(this,function(){const _0x44a787=a258_0x55a9;return a258_0x242061[_0x44a787(0x9d)]()[_0x44a787(0x99)](_0x44a787(0xad))['toString']()[_0x44a787(0xb3)](a258_0x242061)[_0x44a787(0x99)]('(((.+)+)+)+$');});a258_0x242061();'use strict';var __importDefault=this&&this[a258_0x5b3ec3(0x9f)]||function(_0x29bcba){const _0x458b07=a258_0x5b3ec3;return _0x29bcba&&_0x29bcba[_0x458b07(0xa9)]?_0x29bcba:{'default':_0x29bcba};};Object[a258_0x5b3ec3(0xa0)](exports,a258_0x5b3ec3(0xa9),{'value':!![]}),exports[a258_0x5b3ec3(0xaa)]=void 0x0;function a258_0x56c3(){const _0x5a9442=['../../../constants/job','EXPIRED_RANGE_DATE','Logger','join','error','apply','name','filterExpiredJobs','utf-8','execute','50UpQRUG','4WfGtKp','getJobCompletedDate','426843goTHWD','path','3269710aczofo','isExpiredDate','669677DUfPXL','1152503HPOEVW','search','parse','getJobsIds','../../data-masking/services/masking.service','toString','maskingFolderPath','__importDefault','defineProperty','72VQKFnF','../../shared/utils/job.utils','MaskingService','FsUtils','2kVBWDc','logger','4510555EdNXkm','readFile','__esModule','DataMaskingRetentionPolicy','isExistsPath','default','(((.+)+)+)+$','deleteJob','1746249aDvaFX','getTime','push','2462802FBfKuh','constructor'];a258_0x56c3=function(){return _0x5a9442;};return a258_0x56c3();}const promises_1=require('fs/promises'),core_1=require('../../../core'),utils_1=require('@flosum/utils'),job_1=require(a258_0x5b3ec3(0xb4)),job_utils_1=__importDefault(require(a258_0x5b3ec3(0xa2))),masking_service_1=require(a258_0x5b3ec3(0x9c)),path_1=__importDefault(require(a258_0x5b3ec3(0xc2)));function a258_0x55a9(_0x2fad33,_0x17fd53){const _0x29c04a=a258_0x56c3();return a258_0x55a9=function(_0x242061,_0xf204a2){_0x242061=_0x242061-0x97;let _0x56c379=_0x29c04a[_0x242061];return _0x56c379;},a258_0x55a9(_0x2fad33,_0x17fd53);}class DataMaskingRetentionPolicy{constructor(){const _0x5bf1f1=a258_0x5b3ec3;this[_0x5bf1f1(0xb5)]=0x9a7ec800,this[_0x5bf1f1(0xa6)]=new core_1[(_0x5bf1f1(0xb6))](DataMaskingRetentionPolicy[_0x5bf1f1(0xba)]);}async[a258_0x5b3ec3(0xbd)](){const _0x5ec134=a258_0x5b3ec3;try{const _0xf3130f=await job_utils_1[_0x5ec134(0xac)][_0x5ec134(0x9b)](masking_service_1[_0x5ec134(0xa3)][_0x5ec134(0x9e)]),_0x30939a=await this[_0x5ec134(0xbb)](_0xf3130f);for(const _0x159ed8 of _0x30939a){await this[_0x5ec134(0xae)](_0x159ed8);}}catch(_0x51db71){this['logger'][_0x5ec134(0xb8)](_0x51db71);}}async[a258_0x5b3ec3(0xbb)](_0x1f2bc7){const _0x533ff1=a258_0x5b3ec3,_0x33977d=[];for(const _0xc95914 of _0x1f2bc7){const _0x57e6a6=await this[_0x533ff1(0xc0)](_0xc95914),_0x3f1606=_0x57e6a6&&this[_0x533ff1(0xc4)](_0x57e6a6);_0x3f1606&&_0x33977d[_0x533ff1(0xb1)](_0xc95914);}return _0x33977d;}async[a258_0x5b3ec3(0xc0)](_0x46af90){const _0x4c4e07=a258_0x5b3ec3;var _0x28492b;const _0xe58c4a=path_1['default'][_0x4c4e07(0xb7)](masking_service_1['MaskingService']['maskingFolderPath'],_0x46af90,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x4c4e07(0xa4)][_0x4c4e07(0xab)](_0xe58c4a))return null;const _0x51d25a=await(0x0,promises_1[_0x4c4e07(0xa8)])(_0xe58c4a,{'encoding':_0x4c4e07(0xbc)});return(_0x28492b=JSON[_0x4c4e07(0x9a)](_0x51d25a)['completedDate'])!==null&&_0x28492b!==void 0x0?_0x28492b:null;}['isExpiredDate'](_0xd6bc11){const _0x9e117f=a258_0x5b3ec3;return new Date()[_0x9e117f(0xb0)]()-_0xd6bc11>this[_0x9e117f(0xb5)];}[a258_0x5b3ec3(0xae)](_0x55d6dc){const _0x687772=a258_0x5b3ec3,_0x300ec7=path_1[_0x687772(0xac)][_0x687772(0xb7)](masking_service_1[_0x687772(0xa3)]['maskingFolderPath'],_0x55d6dc);return(0x0,promises_1['rm'])(_0x300ec7,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;