const a306_0x3278f3=a306_0xebe6;(function(_0x7ab3ef,_0x4c5f89){const _0x43dd1b=a306_0xebe6,_0x262b5d=_0x7ab3ef();while(!![]){try{const _0x495110=parseInt(_0x43dd1b(0x1ec))/0x1+parseInt(_0x43dd1b(0x1f1))/0x2*(-parseInt(_0x43dd1b(0x1e1))/0x3)+parseInt(_0x43dd1b(0x1e5))/0x4*(-parseInt(_0x43dd1b(0x1ea))/0x5)+-parseInt(_0x43dd1b(0x1e7))/0x6+parseInt(_0x43dd1b(0x1fe))/0x7+parseInt(_0x43dd1b(0x1f0))/0x8*(parseInt(_0x43dd1b(0x200))/0x9)+parseInt(_0x43dd1b(0x1ee))/0xa*(-parseInt(_0x43dd1b(0x1f5))/0xb);if(_0x495110===_0x4c5f89)break;else _0x262b5d['push'](_0x262b5d['shift']());}catch(_0x317c6c){_0x262b5d['push'](_0x262b5d['shift']());}}}(a306_0x5b25,0x7939a));const a306_0xe013f9=(function(){let _0x2b0bb2=!![];return function(_0x2e2bee,_0x2a9934){const _0x154d5b=_0x2b0bb2?function(){const _0x1da610=a306_0xebe6;if(_0x2a9934){const _0x377339=_0x2a9934[_0x1da610(0x207)](_0x2e2bee,arguments);return _0x2a9934=null,_0x377339;}}:function(){};return _0x2b0bb2=![],_0x154d5b;};}()),a306_0x58870d=a306_0xe013f9(this,function(){const _0x92f16a=a306_0xebe6;return a306_0x58870d['toString']()['search'](_0x92f16a(0x209))['toString']()[_0x92f16a(0x1f7)](a306_0x58870d)[_0x92f16a(0x202)]('(((.+)+)+)+$');});a306_0x58870d();'use strict';function a306_0xebe6(_0x116ed5,_0x8a8ce8){const _0x13ca89=a306_0x5b25();return a306_0xebe6=function(_0x58870d,_0xe013f9){_0x58870d=_0x58870d-0x1e1;let _0x5b2561=_0x13ca89[_0x58870d];return _0x5b2561;},a306_0xebe6(_0x116ed5,_0x8a8ce8);}var __importDefault=this&&this[a306_0x3278f3(0x1fb)]||function(_0x6cdcb4){const _0x35d0d5=a306_0x3278f3;return _0x6cdcb4&&_0x6cdcb4[_0x35d0d5(0x201)]?_0x6cdcb4:{'default':_0x6cdcb4};};function a306_0x5b25(){const _0x248f1c=['getJobCompletedDate','join','../../data-masking/services/masking.service','428QpLSGv','fs/promises','144054xgxNhD','Logger','filterExpiredJobs','20200cdNIPZ','isExpiredDate','692160UKWwNn','path','851870vIJIMq','error','8zQeGDZ','1062188qZHDhZ','utf-8','parse','EXPIRED_RANGE_DATE','99rmobxI','MaskingService','constructor','DataMaskingRetentionPolicy','@flosum/utils','execute','__importDefault','deleteJob','../../../constants/job','5846267fFhdDf','push','6509367SCHRBL','__esModule','search','default','readFile','FsUtils','defineProperty','apply','maskingFolderPath','(((.+)+)+)+$','logger','3iXdNei'];a306_0x5b25=function(){return _0x248f1c;};return a306_0x5b25();}Object[a306_0x3278f3(0x206)](exports,a306_0x3278f3(0x201),{'value':!![]}),exports['DataMaskingRetentionPolicy']=void 0x0;const promises_1=require(a306_0x3278f3(0x1e6)),core_1=require('../../../core'),utils_1=require(a306_0x3278f3(0x1f9)),job_1=require(a306_0x3278f3(0x1fd)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),masking_service_1=require(a306_0x3278f3(0x1e4)),path_1=__importDefault(require(a306_0x3278f3(0x1ed)));class DataMaskingRetentionPolicy{constructor(){const _0x18f131=a306_0x3278f3;this[_0x18f131(0x1f4)]=0x9a7ec800,this[_0x18f131(0x20a)]=new core_1[(_0x18f131(0x1e8))](DataMaskingRetentionPolicy['name']);}async[a306_0x3278f3(0x1fa)](){const _0x247311=a306_0x3278f3;try{const _0x5a5ff4=await job_utils_1[_0x247311(0x203)]['getJobsIds'](masking_service_1[_0x247311(0x1f6)][_0x247311(0x208)]),_0x28a984=await this[_0x247311(0x1e9)](_0x5a5ff4);for(const _0x22a075 of _0x28a984){await this['deleteJob'](_0x22a075);}}catch(_0x242139){this['logger'][_0x247311(0x1ef)](_0x242139);}}async[a306_0x3278f3(0x1e9)](_0x4779b6){const _0x3aecc2=a306_0x3278f3,_0x39cfdf=[];for(const _0x28dd97 of _0x4779b6){const _0x4304a0=await this[_0x3aecc2(0x1e2)](_0x28dd97),_0xbf038b=_0x4304a0&&this[_0x3aecc2(0x1eb)](_0x4304a0);_0xbf038b&&_0x39cfdf[_0x3aecc2(0x1ff)](_0x28dd97);}return _0x39cfdf;}async[a306_0x3278f3(0x1e2)](_0x1d4542){const _0xaa260d=a306_0x3278f3;var _0x3d24fc;const _0x236607=path_1['default'][_0xaa260d(0x1e3)](masking_service_1[_0xaa260d(0x1f6)][_0xaa260d(0x208)],_0x1d4542,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0xaa260d(0x205)]['isExistsPath'](_0x236607))return null;const _0x5df949=await(0x0,promises_1[_0xaa260d(0x204)])(_0x236607,{'encoding':_0xaa260d(0x1f2)});return(_0x3d24fc=JSON[_0xaa260d(0x1f3)](_0x5df949)['completedDate'])!==null&&_0x3d24fc!==void 0x0?_0x3d24fc:null;}[a306_0x3278f3(0x1eb)](_0x4d7016){const _0x54d68f=a306_0x3278f3;return new Date()['getTime']()-_0x4d7016>this[_0x54d68f(0x1f4)];}[a306_0x3278f3(0x1fc)](_0x1915ea){const _0x148257=a306_0x3278f3,_0x4b6e62=path_1[_0x148257(0x203)]['join'](masking_service_1[_0x148257(0x1f6)][_0x148257(0x208)],_0x1915ea);return(0x0,promises_1['rm'])(_0x4b6e62,{'recursive':!![],'force':!![]});}}exports[a306_0x3278f3(0x1f8)]=DataMaskingRetentionPolicy;