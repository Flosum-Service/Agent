const a306_0x376d77=a306_0x3102;function a306_0x3102(_0x3c04d4,_0x59cd61){const _0x2b8cf3=a306_0x3c7a();return a306_0x3102=function(_0x237743,_0x2ab55f){_0x237743=_0x237743-0x1ca;let _0x3c7a55=_0x2b8cf3[_0x237743];return _0x3c7a55;},a306_0x3102(_0x3c04d4,_0x59cd61);}(function(_0x282852,_0x2c5b9e){const _0x1c03cc=a306_0x3102,_0x24ee1d=_0x282852();while(!![]){try{const _0x5c1878=-parseInt(_0x1c03cc(0x1cd))/0x1+-parseInt(_0x1c03cc(0x1ed))/0x2*(parseInt(_0x1c03cc(0x1ee))/0x3)+-parseInt(_0x1c03cc(0x1e9))/0x4+-parseInt(_0x1c03cc(0x1f0))/0x5*(parseInt(_0x1c03cc(0x1e7))/0x6)+parseInt(_0x1c03cc(0x1ca))/0x7*(parseInt(_0x1c03cc(0x1db))/0x8)+-parseInt(_0x1c03cc(0x1d0))/0x9*(parseInt(_0x1c03cc(0x1ea))/0xa)+parseInt(_0x1c03cc(0x1cc))/0xb;if(_0x5c1878===_0x2c5b9e)break;else _0x24ee1d['push'](_0x24ee1d['shift']());}catch(_0x2f4ff1){_0x24ee1d['push'](_0x24ee1d['shift']());}}}(a306_0x3c7a,0x5bf7b));const a306_0x2ab55f=(function(){let _0x4f64af=!![];return function(_0x143c96,_0x3038a4){const _0x1bdae0=_0x4f64af?function(){if(_0x3038a4){const _0x4c2ed8=_0x3038a4['apply'](_0x143c96,arguments);return _0x3038a4=null,_0x4c2ed8;}}:function(){};return _0x4f64af=![],_0x1bdae0;};}()),a306_0x237743=a306_0x2ab55f(this,function(){const _0x6c86f7=a306_0x3102;return a306_0x237743['toString']()['search'](_0x6c86f7(0x1d6))['toString']()[_0x6c86f7(0x1f1)](a306_0x237743)['search'](_0x6c86f7(0x1d6));});a306_0x237743();'use strict';var __importDefault=this&&this[a306_0x376d77(0x1d1)]||function(_0x27e8f8){const _0x5de123=a306_0x376d77;return _0x27e8f8&&_0x27e8f8[_0x5de123(0x1d4)]?_0x27e8f8:{'default':_0x27e8f8};};Object['defineProperty'](exports,a306_0x376d77(0x1d4),{'value':!![]}),exports[a306_0x376d77(0x1df)]=void 0x0;const promises_1=require(a306_0x376d77(0x1e8)),core_1=require(a306_0x376d77(0x1dc)),utils_1=require(a306_0x376d77(0x1d2)),job_1=require(a306_0x376d77(0x1ec)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),masking_service_1=require(a306_0x376d77(0x1e6)),path_1=__importDefault(require(a306_0x376d77(0x1de)));class DataMaskingRetentionPolicy{constructor(){const _0x20922c=a306_0x376d77;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this['logger']=new core_1[(_0x20922c(0x1e3))](DataMaskingRetentionPolicy[_0x20922c(0x1d8)]);}async['execute'](){const _0x352db1=a306_0x376d77;try{const _0x3063d7=await job_utils_1[_0x352db1(0x1cf)][_0x352db1(0x1f3)](masking_service_1['MaskingService'][_0x352db1(0x1ef)]),_0x172fff=await this[_0x352db1(0x1f2)](_0x3063d7);for(const _0x124ea3 of _0x172fff){await this[_0x352db1(0x1d7)](_0x124ea3);}}catch(_0x166f9f){this[_0x352db1(0x1d9)]['error'](_0x166f9f);}}async[a306_0x376d77(0x1f2)](_0x572b22){const _0x139672=a306_0x376d77,_0xece2bd=[];for(const _0x3a8267 of _0x572b22){const _0x58e02a=await this[_0x139672(0x1da)](_0x3a8267),_0x3ebbd2=_0x58e02a&&this[_0x139672(0x1e5)](_0x58e02a);_0x3ebbd2&&_0xece2bd[_0x139672(0x1e1)](_0x3a8267);}return _0xece2bd;}async[a306_0x376d77(0x1da)](_0x546597){const _0x3f4edc=a306_0x376d77;var _0x350094;const _0xc27359=path_1['default'][_0x3f4edc(0x1eb)](masking_service_1[_0x3f4edc(0x1d3)]['maskingFolderPath'],_0x546597,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x3f4edc(0x1e0)][_0x3f4edc(0x1e2)](_0xc27359))return null;const _0x40eccb=await(0x0,promises_1['readFile'])(_0xc27359,{'encoding':_0x3f4edc(0x1d5)});return(_0x350094=JSON[_0x3f4edc(0x1e4)](_0x40eccb)[_0x3f4edc(0x1dd)])!==null&&_0x350094!==void 0x0?_0x350094:null;}['isExpiredDate'](_0x558ab8){const _0x4c0e42=a306_0x376d77;return new Date()[_0x4c0e42(0x1ce)]()-_0x558ab8>this[_0x4c0e42(0x1cb)];}['deleteJob'](_0x450b53){const _0x5a3715=a306_0x376d77,_0x3f1c03=path_1['default']['join'](masking_service_1[_0x5a3715(0x1d3)][_0x5a3715(0x1ef)],_0x450b53);return(0x0,promises_1['rm'])(_0x3f1c03,{'recursive':!![],'force':!![]});}}exports[a306_0x376d77(0x1df)]=DataMaskingRetentionPolicy;function a306_0x3c7a(){const _0x3c97e2=['deleteJob','name','logger','getJobCompletedDate','2120ycdAGw','../../../core','completedDate','path','DataMaskingRetentionPolicy','FsUtils','push','isExistsPath','Logger','parse','isExpiredDate','../../data-masking/services/masking.service','2202noEqIv','fs/promises','1581968REXNKz','54430DmxCtE','join','../../../constants/job','2aZrJhC','1703697bUEsia','maskingFolderPath','5860CIdYRi','constructor','filterExpiredJobs','getJobsIds','4613ISXMzq','EXPIRED_RANGE_DATE','24881912qMEyyc','579325gyqlqp','getTime','default','144ohKCib','__importDefault','@flosum/utils','MaskingService','__esModule','utf-8','(((.+)+)+)+$'];a306_0x3c7a=function(){return _0x3c97e2;};return a306_0x3c7a();}