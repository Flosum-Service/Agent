const a259_0x6bce0=a259_0x3ed5;(function(_0x18ed9c,_0x4f9190){const _0x424d98=a259_0x3ed5,_0x508757=_0x18ed9c();while(!![]){try{const _0x4c1445=-parseInt(_0x424d98(0xd5))/0x1*(-parseInt(_0x424d98(0xb5))/0x2)+-parseInt(_0x424d98(0xb4))/0x3*(parseInt(_0x424d98(0xcf))/0x4)+-parseInt(_0x424d98(0xbb))/0x5*(parseInt(_0x424d98(0xbd))/0x6)+parseInt(_0x424d98(0xd6))/0x7+parseInt(_0x424d98(0xc5))/0x8+-parseInt(_0x424d98(0xae))/0x9*(parseInt(_0x424d98(0xd4))/0xa)+parseInt(_0x424d98(0xb7))/0xb*(parseInt(_0x424d98(0xc1))/0xc);if(_0x4c1445===_0x4f9190)break;else _0x508757['push'](_0x508757['shift']());}catch(_0x1932b7){_0x508757['push'](_0x508757['shift']());}}}(a259_0x266c,0xbab58));const a259_0x26de1b=(function(){let _0x25a001=!![];return function(_0x108b39,_0x32ed23){const _0x3a2c00=_0x25a001?function(){const _0x994664=a259_0x3ed5;if(_0x32ed23){const _0x2d3491=_0x32ed23[_0x994664(0xd0)](_0x108b39,arguments);return _0x32ed23=null,_0x2d3491;}}:function(){};return _0x25a001=![],_0x3a2c00;};}()),a259_0x4e283f=a259_0x26de1b(this,function(){const _0x118cac=a259_0x3ed5;return a259_0x4e283f[_0x118cac(0xce)]()['search'](_0x118cac(0xc7))[_0x118cac(0xce)]()[_0x118cac(0xb3)](a259_0x4e283f)[_0x118cac(0xcc)](_0x118cac(0xc7));});a259_0x4e283f();'use strict';var __importDefault=this&&this[a259_0x6bce0(0xc2)]||function(_0x1767ce){return _0x1767ce&&_0x1767ce['__esModule']?_0x1767ce:{'default':_0x1767ce};};Object['defineProperty'](exports,a259_0x6bce0(0xaf),{'value':!![]}),exports['DataMaskingRetentionPolicy']=void 0x0;const promises_1=require('fs/promises'),core_1=require(a259_0x6bce0(0xcb)),utils_1=require(a259_0x6bce0(0xd9)),job_1=require(a259_0x6bce0(0xc9)),job_utils_1=__importDefault(require(a259_0x6bce0(0xba))),masking_service_1=require(a259_0x6bce0(0xc8)),path_1=__importDefault(require(a259_0x6bce0(0xd1)));class DataMaskingRetentionPolicy{constructor(){const _0x116e35=a259_0x6bce0;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0x116e35(0xc4)]=new core_1[(_0x116e35(0xc0))](DataMaskingRetentionPolicy[_0x116e35(0xd2)]);}async[a259_0x6bce0(0xb9)](){const _0xdaf371=a259_0x6bce0;try{const _0x263a94=await job_utils_1[_0xdaf371(0xca)][_0xdaf371(0xbf)](masking_service_1[_0xdaf371(0xd8)][_0xdaf371(0xbe)]),_0x5e0276=await this[_0xdaf371(0xcd)](_0x263a94);for(const _0x709ece of _0x5e0276){await this[_0xdaf371(0xbc)](_0x709ece);}}catch(_0x3f30d5){this[_0xdaf371(0xc4)][_0xdaf371(0xda)](_0x3f30d5);}}async['filterExpiredJobs'](_0x19fc2c){const _0x98777=a259_0x6bce0,_0x2b69f0=[];for(const _0x46e396 of _0x19fc2c){const _0x153606=await this[_0x98777(0xc6)](_0x46e396),_0x3d9318=_0x153606&&this[_0x98777(0xb6)](_0x153606);_0x3d9318&&_0x2b69f0[_0x98777(0xdb)](_0x46e396);}return _0x2b69f0;}async[a259_0x6bce0(0xc6)](_0x336e6){const _0x3a3208=a259_0x6bce0;var _0x1665a1;const _0x1a13b1=path_1[_0x3a3208(0xca)][_0x3a3208(0xd3)](masking_service_1[_0x3a3208(0xd8)][_0x3a3208(0xbe)],_0x336e6,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x3a3208(0xb8)][_0x3a3208(0xc3)](_0x1a13b1))return null;const _0x30916c=await(0x0,promises_1['readFile'])(_0x1a13b1,{'encoding':'utf-8'});return(_0x1665a1=JSON['parse'](_0x30916c)[_0x3a3208(0xd7)])!==null&&_0x1665a1!==void 0x0?_0x1665a1:null;}[a259_0x6bce0(0xb6)](_0x51703e){const _0x3142ee=a259_0x6bce0;return new Date()[_0x3142ee(0xb2)]()-_0x51703e>this[_0x3142ee(0xb0)];}['deleteJob'](_0x400cc0){const _0xa85a15=a259_0x6bce0,_0x5e23d=path_1['default'][_0xa85a15(0xd3)](masking_service_1[_0xa85a15(0xd8)][_0xa85a15(0xbe)],_0x400cc0);return(0x0,promises_1['rm'])(_0x5e23d,{'recursive':!![],'force':!![]});}}function a259_0x3ed5(_0x184121,_0x5bf88b){const _0xca2972=a259_0x266c();return a259_0x3ed5=function(_0x4e283f,_0x26de1b){_0x4e283f=_0x4e283f-0xae;let _0x266cde=_0xca2972[_0x4e283f];return _0x266cde;},a259_0x3ed5(_0x184121,_0x5bf88b);}exports[a259_0x6bce0(0xb1)]=DataMaskingRetentionPolicy;function a259_0x266c(){const _0x3aecee=['isExpiredDate','1925mqbDUr','FsUtils','execute','../../shared/utils/job.utils','108980bXgQyo','deleteJob','192kpWXFx','maskingFolderPath','getJobsIds','Logger','45060aBfgML','__importDefault','isExistsPath','logger','9551136sVuWQh','getJobCompletedDate','(((.+)+)+)+$','../../data-masking/services/masking.service','../../../constants/job','default','../../../core','search','filterExpiredJobs','toString','4oWRgnX','apply','path','name','join','1622490DGWuJv','1JojgNn','7808108RYYyZd','completedDate','MaskingService','@flosum/utils','error','push','81ToNvhn','__esModule','EXPIRED_RANGE_DATE','DataMaskingRetentionPolicy','getTime','constructor','984483ZZvrZl','568346YwGsqi'];a259_0x266c=function(){return _0x3aecee;};return a259_0x266c();}