const a259_0x14dc72=a259_0x24e4;(function(_0x4d48d4,_0x24a235){const _0x6b28da=a259_0x24e4,_0x252965=_0x4d48d4();while(!![]){try{const _0x1ec316=parseInt(_0x6b28da(0xb9))/0x1+-parseInt(_0x6b28da(0xb0))/0x2*(-parseInt(_0x6b28da(0xb3))/0x3)+-parseInt(_0x6b28da(0xbe))/0x4*(-parseInt(_0x6b28da(0xad))/0x5)+-parseInt(_0x6b28da(0xc2))/0x6*(-parseInt(_0x6b28da(0xaa))/0x7)+parseInt(_0x6b28da(0xab))/0x8+parseInt(_0x6b28da(0xa2))/0x9*(-parseInt(_0x6b28da(0xbb))/0xa)+-parseInt(_0x6b28da(0xa6))/0xb;if(_0x1ec316===_0x24a235)break;else _0x252965['push'](_0x252965['shift']());}catch(_0x27fe68){_0x252965['push'](_0x252965['shift']());}}}(a259_0x2b2c,0xb5a98));const a259_0x26964e=(function(){let _0x15e23a=!![];return function(_0xf89445,_0x5f25bb){const _0x405f0a=_0x15e23a?function(){const _0xed00c3=a259_0x24e4;if(_0x5f25bb){const _0x22b54a=_0x5f25bb[_0xed00c3(0xac)](_0xf89445,arguments);return _0x5f25bb=null,_0x22b54a;}}:function(){};return _0x15e23a=![],_0x405f0a;};}()),a259_0x290edc=a259_0x26964e(this,function(){const _0x296dca=a259_0x24e4;return a259_0x290edc[_0x296dca(0xbd)]()[_0x296dca(0xb6)]('(((.+)+)+)+$')['toString']()['constructor'](a259_0x290edc)[_0x296dca(0xb6)](_0x296dca(0xb7));});a259_0x290edc();function a259_0x2b2c(){const _0x84a666=['../../data-masking/services/masking.service','1696602baVIJn','filterExpiredJobs','completedDate','deleteJob','utf-8','getTime','execute','MaskingService','join','parse','logger','defineProperty','35010NhfUZc','isExistsPath','../../../constants/job','fs/promises','21597268jiAwAR','readFile','../../shared/utils/job.utils','maskingFolderPath','7XuwBPg','7025784UQzNZS','apply','830LbjeUG','Logger','../../../core','442pKbZAy','@flosum/utils','getJobCompletedDate','19983lfcjQM','EXPIRED_RANGE_DATE','isExpiredDate','search','(((.+)+)+)+$','default','163735TKCGZf','DataMaskingRetentionPolicy','3300dVlbTR','JOB_LOG_STATE_FILENAME','toString','28780lGbhnF','__esModule','path'];a259_0x2b2c=function(){return _0x84a666;};return a259_0x2b2c();}'use strict';function a259_0x24e4(_0x59c426,_0x3d2743){const _0xb9b3da=a259_0x2b2c();return a259_0x24e4=function(_0x290edc,_0x26964e){_0x290edc=_0x290edc-0x9f;let _0x2b2cc7=_0xb9b3da[_0x290edc];return _0x2b2cc7;},a259_0x24e4(_0x59c426,_0x3d2743);}var __importDefault=this&&this['__importDefault']||function(_0x289f3e){const _0x85075d=a259_0x24e4;return _0x289f3e&&_0x289f3e[_0x85075d(0xbf)]?_0x289f3e:{'default':_0x289f3e};};Object[a259_0x14dc72(0xa1)](exports,a259_0x14dc72(0xbf),{'value':!![]}),exports[a259_0x14dc72(0xba)]=void 0x0;const promises_1=require(a259_0x14dc72(0xa5)),core_1=require(a259_0x14dc72(0xaf)),utils_1=require(a259_0x14dc72(0xb1)),job_1=require(a259_0x14dc72(0xa4)),job_utils_1=__importDefault(require(a259_0x14dc72(0xa8))),masking_service_1=require(a259_0x14dc72(0xc1)),path_1=__importDefault(require(a259_0x14dc72(0xc0)));class DataMaskingRetentionPolicy{constructor(){const _0x540106=a259_0x14dc72;this[_0x540106(0xb4)]=0x9a7ec800,this[_0x540106(0xa0)]=new core_1[(_0x540106(0xae))](DataMaskingRetentionPolicy['name']);}async[a259_0x14dc72(0xc8)](){const _0x1ad48c=a259_0x14dc72;try{const _0x5f1606=await job_utils_1[_0x1ad48c(0xb8)]['getJobsIds'](masking_service_1['MaskingService']['maskingFolderPath']),_0x378825=await this[_0x1ad48c(0xc3)](_0x5f1606);for(const _0x421279 of _0x378825){await this[_0x1ad48c(0xc5)](_0x421279);}}catch(_0x26fa6e){this[_0x1ad48c(0xa0)]['error'](_0x26fa6e);}}async['filterExpiredJobs'](_0x5bb6cb){const _0xfdf117=a259_0x14dc72,_0xbc61fb=[];for(const _0x20001c of _0x5bb6cb){const _0x16a91d=await this[_0xfdf117(0xb2)](_0x20001c),_0x209993=_0x16a91d&&this[_0xfdf117(0xb5)](_0x16a91d);_0x209993&&_0xbc61fb['push'](_0x20001c);}return _0xbc61fb;}async[a259_0x14dc72(0xb2)](_0x157fcd){const _0x25d93f=a259_0x14dc72;var _0x2ef1c2;const _0x53b2d9=path_1[_0x25d93f(0xb8)][_0x25d93f(0xca)](masking_service_1[_0x25d93f(0xc9)][_0x25d93f(0xa9)],_0x157fcd,job_1[_0x25d93f(0xbc)]);if(!await utils_1['FsUtils'][_0x25d93f(0xa3)](_0x53b2d9))return null;const _0x38e859=await(0x0,promises_1[_0x25d93f(0xa7)])(_0x53b2d9,{'encoding':_0x25d93f(0xc6)});return(_0x2ef1c2=JSON[_0x25d93f(0x9f)](_0x38e859)[_0x25d93f(0xc4)])!==null&&_0x2ef1c2!==void 0x0?_0x2ef1c2:null;}[a259_0x14dc72(0xb5)](_0x401629){const _0xb88336=a259_0x14dc72;return new Date()[_0xb88336(0xc7)]()-_0x401629>this[_0xb88336(0xb4)];}[a259_0x14dc72(0xc5)](_0x145255){const _0x11cd09=a259_0x14dc72,_0x1aed74=path_1[_0x11cd09(0xb8)][_0x11cd09(0xca)](masking_service_1[_0x11cd09(0xc9)][_0x11cd09(0xa9)],_0x145255);return(0x0,promises_1['rm'])(_0x1aed74,{'recursive':!![],'force':!![]});}}exports[a259_0x14dc72(0xba)]=DataMaskingRetentionPolicy;