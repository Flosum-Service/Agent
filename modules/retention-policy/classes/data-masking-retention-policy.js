const a259_0x3b08b4=a259_0x20fc;(function(_0x1810e3,_0x6e6c4c){const _0x21c1bf=a259_0x20fc,_0x3dd619=_0x1810e3();while(!![]){try{const _0x16d7b1=parseInt(_0x21c1bf(0x11a))/0x1*(-parseInt(_0x21c1bf(0x10b))/0x2)+-parseInt(_0x21c1bf(0x110))/0x3*(-parseInt(_0x21c1bf(0x10d))/0x4)+-parseInt(_0x21c1bf(0x121))/0x5*(-parseInt(_0x21c1bf(0x128))/0x6)+-parseInt(_0x21c1bf(0x107))/0x7+-parseInt(_0x21c1bf(0x12a))/0x8+-parseInt(_0x21c1bf(0x119))/0x9*(parseInt(_0x21c1bf(0x10a))/0xa)+parseInt(_0x21c1bf(0x10e))/0xb;if(_0x16d7b1===_0x6e6c4c)break;else _0x3dd619['push'](_0x3dd619['shift']());}catch(_0x46a885){_0x3dd619['push'](_0x3dd619['shift']());}}}(a259_0x14e0,0x9a588));const a259_0x551e4d=(function(){let _0x586c6f=!![];return function(_0x3d282e,_0x321f2c){const _0x5b85ab=_0x586c6f?function(){const _0x1a06bb=a259_0x20fc;if(_0x321f2c){const _0x1b9b5c=_0x321f2c[_0x1a06bb(0x11d)](_0x3d282e,arguments);return _0x321f2c=null,_0x1b9b5c;}}:function(){};return _0x586c6f=![],_0x5b85ab;};}()),a259_0xe054d1=a259_0x551e4d(this,function(){const _0x1f9dd2=a259_0x20fc;return a259_0xe054d1[_0x1f9dd2(0x12f)]()['search']('(((.+)+)+)+$')[_0x1f9dd2(0x12f)]()[_0x1f9dd2(0x122)](a259_0xe054d1)[_0x1f9dd2(0x12e)](_0x1f9dd2(0x104));});a259_0xe054d1();'use strict';var __importDefault=this&&this[a259_0x3b08b4(0x130)]||function(_0x29c3b8){return _0x29c3b8&&_0x29c3b8['__esModule']?_0x29c3b8:{'default':_0x29c3b8};};Object[a259_0x3b08b4(0x12c)](exports,a259_0x3b08b4(0x11f),{'value':!![]}),exports[a259_0x3b08b4(0x118)]=void 0x0;function a259_0x14e0(){const _0x48023d=['20884677pLgRuC','join','132HrOjvX','FsUtils','error','maskingFolderPath','EXPIRED_RANGE_DATE','Logger','JOB_LOG_STATE_FILENAME','utf-8','DataMaskingRetentionPolicy','2490867cZTPYs','1ZJmVgW','default','../../../core','apply','logger','__esModule','isExpiredDate','468320zpVBQb','constructor','name','../../data-masking/services/masking.service','isExistsPath','MaskingService','push','24YXUhHk','filterExpiredJobs','585128puoqvn','../../../constants/job','defineProperty','getJobCompletedDate','search','toString','__importDefault','(((.+)+)+)+$','@flosum/utils','../../shared/utils/job.utils','1172087JosYAW','readFile','deleteJob','40uOqkuP','1201010fGZxdH','execute','27916voPIkL'];a259_0x14e0=function(){return _0x48023d;};return a259_0x14e0();}function a259_0x20fc(_0x126d17,_0x4a8a15){const _0x5dbea5=a259_0x14e0();return a259_0x20fc=function(_0xe054d1,_0x551e4d){_0xe054d1=_0xe054d1-0x104;let _0x14e062=_0x5dbea5[_0xe054d1];return _0x14e062;},a259_0x20fc(_0x126d17,_0x4a8a15);}const promises_1=require('fs/promises'),core_1=require(a259_0x3b08b4(0x11c)),utils_1=require(a259_0x3b08b4(0x105)),job_1=require(a259_0x3b08b4(0x12b)),job_utils_1=__importDefault(require(a259_0x3b08b4(0x106))),masking_service_1=require(a259_0x3b08b4(0x124)),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0xda41c3=a259_0x3b08b4;this[_0xda41c3(0x114)]=0x9a7ec800,this[_0xda41c3(0x11e)]=new core_1[(_0xda41c3(0x115))](DataMaskingRetentionPolicy[_0xda41c3(0x123)]);}async[a259_0x3b08b4(0x10c)](){const _0x20cc2b=a259_0x3b08b4;try{const _0x49f611=await job_utils_1[_0x20cc2b(0x11b)]['getJobsIds'](masking_service_1[_0x20cc2b(0x126)][_0x20cc2b(0x113)]),_0x2eb2a0=await this[_0x20cc2b(0x129)](_0x49f611);for(const _0x4585ce of _0x2eb2a0){await this[_0x20cc2b(0x109)](_0x4585ce);}}catch(_0x1d2d8a){this[_0x20cc2b(0x11e)][_0x20cc2b(0x112)](_0x1d2d8a);}}async['filterExpiredJobs'](_0x2ad41e){const _0x4c361b=a259_0x3b08b4,_0x5b9255=[];for(const _0x298334 of _0x2ad41e){const _0x1d1b13=await this['getJobCompletedDate'](_0x298334),_0x4e667e=_0x1d1b13&&this[_0x4c361b(0x120)](_0x1d1b13);_0x4e667e&&_0x5b9255[_0x4c361b(0x127)](_0x298334);}return _0x5b9255;}async[a259_0x3b08b4(0x12d)](_0x452131){const _0x18eb9e=a259_0x3b08b4;var _0x53f0d7;const _0x1fc59e=path_1[_0x18eb9e(0x11b)][_0x18eb9e(0x10f)](masking_service_1['MaskingService'][_0x18eb9e(0x113)],_0x452131,job_1[_0x18eb9e(0x116)]);if(!await utils_1[_0x18eb9e(0x111)][_0x18eb9e(0x125)](_0x1fc59e))return null;const _0x14cd37=await(0x0,promises_1[_0x18eb9e(0x108)])(_0x1fc59e,{'encoding':_0x18eb9e(0x117)});return(_0x53f0d7=JSON['parse'](_0x14cd37)['completedDate'])!==null&&_0x53f0d7!==void 0x0?_0x53f0d7:null;}['isExpiredDate'](_0x4eb4e6){const _0x4f2744=a259_0x3b08b4;return new Date()['getTime']()-_0x4eb4e6>this[_0x4f2744(0x114)];}[a259_0x3b08b4(0x109)](_0x431731){const _0x4e767d=a259_0x3b08b4,_0x2d971c=path_1[_0x4e767d(0x11b)][_0x4e767d(0x10f)](masking_service_1['MaskingService'][_0x4e767d(0x113)],_0x431731);return(0x0,promises_1['rm'])(_0x2d971c,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;