const a307_0xda2a9=a307_0xcdf3;(function(_0x231ae9,_0x2afa2b){const _0x4f295d=a307_0xcdf3,_0x41052a=_0x231ae9();while(!![]){try{const _0x198456=-parseInt(_0x4f295d(0x1a2))/0x1*(parseInt(_0x4f295d(0x191))/0x2)+-parseInt(_0x4f295d(0x1b4))/0x3*(-parseInt(_0x4f295d(0x1a4))/0x4)+parseInt(_0x4f295d(0x19c))/0x5+parseInt(_0x4f295d(0x1a0))/0x6+parseInt(_0x4f295d(0x1a5))/0x7+parseInt(_0x4f295d(0x1bb))/0x8*(parseInt(_0x4f295d(0x1a6))/0x9)+parseInt(_0x4f295d(0x1b6))/0xa*(-parseInt(_0x4f295d(0x197))/0xb);if(_0x198456===_0x2afa2b)break;else _0x41052a['push'](_0x41052a['shift']());}catch(_0xc3eac6){_0x41052a['push'](_0x41052a['shift']());}}}(a307_0x2ff8,0x75c3d));const a307_0x4a8667=(function(){let _0x5f0878=!![];return function(_0x4f2380,_0x48fd14){const _0x285b70=_0x5f0878?function(){const _0x1ab99d=a307_0xcdf3;if(_0x48fd14){const _0x3ef1f7=_0x48fd14[_0x1ab99d(0x1a3)](_0x4f2380,arguments);return _0x48fd14=null,_0x3ef1f7;}}:function(){};return _0x5f0878=![],_0x285b70;};}()),a307_0x21e952=a307_0x4a8667(this,function(){const _0x383804=a307_0xcdf3;return a307_0x21e952['toString']()[_0x383804(0x1b8)](_0x383804(0x196))[_0x383804(0x193)]()['constructor'](a307_0x21e952)[_0x383804(0x1b8)]('(((.+)+)+)+$');});function a307_0x2ff8(){const _0x230fbf=['deleteJob','default','../../../core','1999215McugCn','getJobsIds','push','defineProperty','1976454hmJooA','execute','1xVRbHz','apply','44paSPaL','4126934ioqORA','9YTBEzU','FsUtils','name','@flosum/utils','logger','path','filterExpiredJobs','../../shared/utils/job.utils','isExpiredDate','JOB_LOG_STATE_FILENAME','join','EXPIRED_RANGE_DATE','fs/promises','readFile','43593Xnwhbw','completedDate','5077850brKPSc','__importDefault','search','getJobCompletedDate','DataMaskingRetentionPolicy','1307768DgMfkK','maskingFolderPath','1303952vRExWv','__esModule','toString','isExistsPath','getTime','(((.+)+)+)+$','11KjPXQX','error'];a307_0x2ff8=function(){return _0x230fbf;};return a307_0x2ff8();}a307_0x21e952();'use strict';function a307_0xcdf3(_0x83dcc6,_0x80f342){const _0x29dd30=a307_0x2ff8();return a307_0xcdf3=function(_0x21e952,_0x4a8667){_0x21e952=_0x21e952-0x191;let _0x2ff86=_0x29dd30[_0x21e952];return _0x2ff86;},a307_0xcdf3(_0x83dcc6,_0x80f342);}var __importDefault=this&&this[a307_0xda2a9(0x1b7)]||function(_0x152eed){const _0x27bcd0=a307_0xda2a9;return _0x152eed&&_0x152eed[_0x27bcd0(0x192)]?_0x152eed:{'default':_0x152eed};};Object[a307_0xda2a9(0x19f)](exports,a307_0xda2a9(0x192),{'value':!![]}),exports[a307_0xda2a9(0x1ba)]=void 0x0;const promises_1=require(a307_0xda2a9(0x1b2)),core_1=require(a307_0xda2a9(0x19b)),utils_1=require(a307_0xda2a9(0x1a9)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a307_0xda2a9(0x1ad))),masking_service_1=require('../../data-masking/services/masking.service'),path_1=__importDefault(require(a307_0xda2a9(0x1ab)));class DataMaskingRetentionPolicy{constructor(){const _0x21236b=a307_0xda2a9;this[_0x21236b(0x1b1)]=0x9a7ec800,this[_0x21236b(0x1aa)]=new core_1['Logger'](DataMaskingRetentionPolicy[_0x21236b(0x1a8)]);}async[a307_0xda2a9(0x1a1)](){const _0x2269e9=a307_0xda2a9;try{const _0x29ecb7=await job_utils_1[_0x2269e9(0x19a)][_0x2269e9(0x19d)](masking_service_1['MaskingService']['maskingFolderPath']),_0x30de48=await this[_0x2269e9(0x1ac)](_0x29ecb7);for(const _0x1d4a5d of _0x30de48){await this[_0x2269e9(0x199)](_0x1d4a5d);}}catch(_0x8478d3){this['logger'][_0x2269e9(0x198)](_0x8478d3);}}async[a307_0xda2a9(0x1ac)](_0x4cf095){const _0x210ff2=a307_0xda2a9,_0x1d9663=[];for(const _0xb57865 of _0x4cf095){const _0x1a2d29=await this[_0x210ff2(0x1b9)](_0xb57865),_0x55ca52=_0x1a2d29&&this[_0x210ff2(0x1ae)](_0x1a2d29);_0x55ca52&&_0x1d9663[_0x210ff2(0x19e)](_0xb57865);}return _0x1d9663;}async[a307_0xda2a9(0x1b9)](_0x471ea6){const _0x4edee1=a307_0xda2a9;var _0x2b94fd;const _0xf60809=path_1[_0x4edee1(0x19a)][_0x4edee1(0x1b0)](masking_service_1['MaskingService'][_0x4edee1(0x1bc)],_0x471ea6,job_1[_0x4edee1(0x1af)]);if(!await utils_1[_0x4edee1(0x1a7)][_0x4edee1(0x194)](_0xf60809))return null;const _0x371916=await(0x0,promises_1[_0x4edee1(0x1b3)])(_0xf60809,{'encoding':'utf-8'});return(_0x2b94fd=JSON['parse'](_0x371916)[_0x4edee1(0x1b5)])!==null&&_0x2b94fd!==void 0x0?_0x2b94fd:null;}[a307_0xda2a9(0x1ae)](_0x22ee14){const _0xa3b511=a307_0xda2a9;return new Date()[_0xa3b511(0x195)]()-_0x22ee14>this[_0xa3b511(0x1b1)];}[a307_0xda2a9(0x199)](_0x59d039){const _0x4bcef1=a307_0xda2a9,_0x3221d3=path_1[_0x4bcef1(0x19a)][_0x4bcef1(0x1b0)](masking_service_1['MaskingService'][_0x4bcef1(0x1bc)],_0x59d039);return(0x0,promises_1['rm'])(_0x3221d3,{'recursive':!![],'force':!![]});}}exports[a307_0xda2a9(0x1ba)]=DataMaskingRetentionPolicy;