function a307_0x2316(_0x33c5ce,_0x3d015b){const _0x3df937=a307_0x516c();return a307_0x2316=function(_0x1fa50b,_0x223e72){_0x1fa50b=_0x1fa50b-0xad;let _0x516c9b=_0x3df937[_0x1fa50b];return _0x516c9b;},a307_0x2316(_0x33c5ce,_0x3d015b);}const a307_0x4e2380=a307_0x2316;(function(_0x1d94fd,_0x461154){const _0x412618=a307_0x2316,_0x1ba184=_0x1d94fd();while(!![]){try{const _0x473973=parseInt(_0x412618(0xd5))/0x1+-parseInt(_0x412618(0xbc))/0x2*(parseInt(_0x412618(0xbd))/0x3)+-parseInt(_0x412618(0xd3))/0x4*(parseInt(_0x412618(0xd6))/0x5)+-parseInt(_0x412618(0xba))/0x6*(-parseInt(_0x412618(0xcf))/0x7)+parseInt(_0x412618(0xd9))/0x8+parseInt(_0x412618(0xb0))/0x9+parseInt(_0x412618(0xc5))/0xa;if(_0x473973===_0x461154)break;else _0x1ba184['push'](_0x1ba184['shift']());}catch(_0x36c911){_0x1ba184['push'](_0x1ba184['shift']());}}}(a307_0x516c,0x6682d));const a307_0x223e72=(function(){let _0x567b42=!![];return function(_0x48bd7a,_0x14c98e){const _0x272ffa=_0x567b42?function(){const _0x43fe0b=a307_0x2316;if(_0x14c98e){const _0x239ab5=_0x14c98e[_0x43fe0b(0xc8)](_0x48bd7a,arguments);return _0x14c98e=null,_0x239ab5;}}:function(){};return _0x567b42=![],_0x272ffa;};}()),a307_0x1fa50b=a307_0x223e72(this,function(){const _0x354720=a307_0x2316;return a307_0x1fa50b[_0x354720(0xce)]()[_0x354720(0xd7)](_0x354720(0xb1))[_0x354720(0xce)]()[_0x354720(0xd8)](a307_0x1fa50b)[_0x354720(0xd7)](_0x354720(0xb1));});a307_0x1fa50b();'use strict';function a307_0x516c(){const _0x4d0ed6=['push','../../shared/utils/job.utils','name','../../../constants/job','readFile','execute','456NBrWCE','JOB_LOG_STATE_FILENAME','133786aKzYjV','21WGqmRU','isExistsPath','deleteJob','logger','isExpiredDate','getTime','FsUtils','DataMaskingRetentionPolicy','4176860KLuwyr','../../../core','join','apply','__esModule','defineProperty','filterExpiredJobs','fs/promises','parse','toString','10927MEDDBR','EXPIRED_RANGE_DATE','path','error','1244aASBTy','MaskingService','20883TzfEAD','9265TfICXh','search','constructor','2151216NgHlAc','maskingFolderPath','default','utf-8','Logger','5744808LsaNba','(((.+)+)+)+$','getJobCompletedDate','__importDefault'];a307_0x516c=function(){return _0x4d0ed6;};return a307_0x516c();}var __importDefault=this&&this[a307_0x4e2380(0xb3)]||function(_0x47ada9){const _0x25ebbc=a307_0x4e2380;return _0x47ada9&&_0x47ada9[_0x25ebbc(0xc9)]?_0x47ada9:{'default':_0x47ada9};};Object[a307_0x4e2380(0xca)](exports,'__esModule',{'value':!![]}),exports['DataMaskingRetentionPolicy']=void 0x0;const promises_1=require(a307_0x4e2380(0xcc)),core_1=require(a307_0x4e2380(0xc6)),utils_1=require('@flosum/utils'),job_1=require(a307_0x4e2380(0xb7)),job_utils_1=__importDefault(require(a307_0x4e2380(0xb5))),masking_service_1=require('../../data-masking/services/masking.service'),path_1=__importDefault(require(a307_0x4e2380(0xd1)));class DataMaskingRetentionPolicy{constructor(){const _0x3b8523=a307_0x4e2380;this[_0x3b8523(0xd0)]=0x9a7ec800,this[_0x3b8523(0xc0)]=new core_1[(_0x3b8523(0xaf))](DataMaskingRetentionPolicy[_0x3b8523(0xb6)]);}async[a307_0x4e2380(0xb9)](){const _0x50d475=a307_0x4e2380;try{const _0x5d9f17=await job_utils_1[_0x50d475(0xad)]['getJobsIds'](masking_service_1[_0x50d475(0xd4)][_0x50d475(0xda)]),_0x2d9ce4=await this['filterExpiredJobs'](_0x5d9f17);for(const _0x27e1f6 of _0x2d9ce4){await this[_0x50d475(0xbf)](_0x27e1f6);}}catch(_0xbddd81){this[_0x50d475(0xc0)][_0x50d475(0xd2)](_0xbddd81);}}async[a307_0x4e2380(0xcb)](_0x527743){const _0x34ee20=a307_0x4e2380,_0x43d039=[];for(const _0x2c1b7a of _0x527743){const _0x180fe6=await this[_0x34ee20(0xb2)](_0x2c1b7a),_0x4bc3bb=_0x180fe6&&this[_0x34ee20(0xc1)](_0x180fe6);_0x4bc3bb&&_0x43d039[_0x34ee20(0xb4)](_0x2c1b7a);}return _0x43d039;}async[a307_0x4e2380(0xb2)](_0x157589){const _0x5ea8e1=a307_0x4e2380;var _0x1ba518;const _0x1a3edc=path_1[_0x5ea8e1(0xad)]['join'](masking_service_1[_0x5ea8e1(0xd4)][_0x5ea8e1(0xda)],_0x157589,job_1[_0x5ea8e1(0xbb)]);if(!await utils_1[_0x5ea8e1(0xc3)][_0x5ea8e1(0xbe)](_0x1a3edc))return null;const _0x26ef1a=await(0x0,promises_1[_0x5ea8e1(0xb8)])(_0x1a3edc,{'encoding':_0x5ea8e1(0xae)});return(_0x1ba518=JSON[_0x5ea8e1(0xcd)](_0x26ef1a)['completedDate'])!==null&&_0x1ba518!==void 0x0?_0x1ba518:null;}[a307_0x4e2380(0xc1)](_0x1e1115){const _0x39d077=a307_0x4e2380;return new Date()[_0x39d077(0xc2)]()-_0x1e1115>this[_0x39d077(0xd0)];}[a307_0x4e2380(0xbf)](_0x45aaa7){const _0x11e9fd=a307_0x4e2380,_0x436202=path_1['default'][_0x11e9fd(0xc7)](masking_service_1[_0x11e9fd(0xd4)][_0x11e9fd(0xda)],_0x45aaa7);return(0x0,promises_1['rm'])(_0x436202,{'recursive':!![],'force':!![]});}}exports[a307_0x4e2380(0xc4)]=DataMaskingRetentionPolicy;