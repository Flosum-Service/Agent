const a306_0x549408=a306_0x2edb;(function(_0x20a860,_0x504b9d){const _0x56081d=a306_0x2edb,_0x4aae4c=_0x20a860();while(!![]){try{const _0x2124d4=parseInt(_0x56081d(0x180))/0x1+-parseInt(_0x56081d(0x174))/0x2+-parseInt(_0x56081d(0x16c))/0x3*(-parseInt(_0x56081d(0x175))/0x4)+-parseInt(_0x56081d(0x189))/0x5+-parseInt(_0x56081d(0x187))/0x6*(-parseInt(_0x56081d(0x17e))/0x7)+parseInt(_0x56081d(0x184))/0x8+parseInt(_0x56081d(0x17c))/0x9*(-parseInt(_0x56081d(0x196))/0xa);if(_0x2124d4===_0x504b9d)break;else _0x4aae4c['push'](_0x4aae4c['shift']());}catch(_0x3271d4){_0x4aae4c['push'](_0x4aae4c['shift']());}}}(a306_0x3e11,0xa589d));const a306_0x21e800=(function(){let _0x5f53c8=!![];return function(_0x4def49,_0x54dd56){const _0x30e892=_0x5f53c8?function(){const _0x30b807=a306_0x2edb;if(_0x54dd56){const _0x1ae892=_0x54dd56[_0x30b807(0x18c)](_0x4def49,arguments);return _0x54dd56=null,_0x1ae892;}}:function(){};return _0x5f53c8=![],_0x30e892;};}()),a306_0x570b2b=a306_0x21e800(this,function(){const _0x439634=a306_0x2edb;return a306_0x570b2b[_0x439634(0x183)]()[_0x439634(0x197)](_0x439634(0x16f))[_0x439634(0x183)]()[_0x439634(0x16e)](a306_0x570b2b)[_0x439634(0x197)](_0x439634(0x16f));});function a306_0x2edb(_0x448f82,_0x1b2702){const _0x800c4a=a306_0x3e11();return a306_0x2edb=function(_0x570b2b,_0x21e800){_0x570b2b=_0x570b2b-0x16c;let _0x3e118e=_0x800c4a[_0x570b2b];return _0x3e118e;},a306_0x2edb(_0x448f82,_0x1b2702);}a306_0x570b2b();'use strict';var __importDefault=this&&this[a306_0x549408(0x178)]||function(_0x1d5ebc){const _0x30d7bd=a306_0x549408;return _0x1d5ebc&&_0x1d5ebc[_0x30d7bd(0x17d)]?_0x1d5ebc:{'default':_0x1d5ebc};};Object[a306_0x549408(0x190)](exports,a306_0x549408(0x17d),{'value':!![]}),exports['DataMaskingRetentionPolicy']=void 0x0;const promises_1=require(a306_0x549408(0x18a)),core_1=require(a306_0x549408(0x177)),utils_1=require('@flosum/utils'),job_1=require(a306_0x549408(0x18e)),job_utils_1=__importDefault(require(a306_0x549408(0x191))),masking_service_1=require(a306_0x549408(0x186)),path_1=__importDefault(require(a306_0x549408(0x185)));class DataMaskingRetentionPolicy{constructor(){const _0x47eba9=a306_0x549408;this[_0x47eba9(0x17f)]=0x9a7ec800,this[_0x47eba9(0x16d)]=new core_1[(_0x47eba9(0x182))](DataMaskingRetentionPolicy['name']);}async[a306_0x549408(0x18d)](){const _0x127f12=a306_0x549408;try{const _0x5cc843=await job_utils_1[_0x127f12(0x198)][_0x127f12(0x18b)](masking_service_1['MaskingService']['maskingFolderPath']),_0x3374c9=await this[_0x127f12(0x188)](_0x5cc843);for(const _0x426b0f of _0x3374c9){await this[_0x127f12(0x195)](_0x426b0f);}}catch(_0x49bfff){this[_0x127f12(0x16d)][_0x127f12(0x193)](_0x49bfff);}}async[a306_0x549408(0x188)](_0x30fcda){const _0xe69252=a306_0x549408,_0x3de22f=[];for(const _0xddcb8 of _0x30fcda){const _0x3c6347=await this[_0xe69252(0x199)](_0xddcb8),_0x475ea4=_0x3c6347&&this[_0xe69252(0x192)](_0x3c6347);_0x475ea4&&_0x3de22f[_0xe69252(0x17b)](_0xddcb8);}return _0x3de22f;}async['getJobCompletedDate'](_0x10a099){const _0x42f4da=a306_0x549408;var _0x2236ce;const _0x1501a4=path_1[_0x42f4da(0x198)][_0x42f4da(0x172)](masking_service_1[_0x42f4da(0x171)][_0x42f4da(0x194)],_0x10a099,job_1[_0x42f4da(0x176)]);if(!await utils_1['FsUtils'][_0x42f4da(0x18f)](_0x1501a4))return null;const _0x4e2a65=await(0x0,promises_1[_0x42f4da(0x173)])(_0x1501a4,{'encoding':_0x42f4da(0x181)});return(_0x2236ce=JSON[_0x42f4da(0x17a)](_0x4e2a65)[_0x42f4da(0x170)])!==null&&_0x2236ce!==void 0x0?_0x2236ce:null;}['isExpiredDate'](_0xea3542){const _0x29a262=a306_0x549408;return new Date()['getTime']()-_0xea3542>this[_0x29a262(0x17f)];}['deleteJob'](_0x4e6771){const _0x151a2b=a306_0x549408,_0x3ef2fb=path_1[_0x151a2b(0x198)]['join'](masking_service_1[_0x151a2b(0x171)][_0x151a2b(0x194)],_0x4e6771);return(0x0,promises_1['rm'])(_0x3ef2fb,{'recursive':!![],'force':!![]});}}function a306_0x3e11(){const _0x32da57=['../../shared/utils/job.utils','isExpiredDate','error','maskingFolderPath','deleteJob','50KWDJka','search','default','getJobCompletedDate','712482XFYWob','logger','constructor','(((.+)+)+)+$','completedDate','MaskingService','join','readFile','994724NPUChf','16hxbrJt','JOB_LOG_STATE_FILENAME','../../../core','__importDefault','DataMaskingRetentionPolicy','parse','push','1429686ojSriw','__esModule','84UmKMgD','EXPIRED_RANGE_DATE','822814usSEhX','utf-8','Logger','toString','6955464JHhjqX','path','../../data-masking/services/masking.service','65844SWpXjX','filterExpiredJobs','4021170evIwwc','fs/promises','getJobsIds','apply','execute','../../../constants/job','isExistsPath','defineProperty'];a306_0x3e11=function(){return _0x32da57;};return a306_0x3e11();}exports[a306_0x549408(0x179)]=DataMaskingRetentionPolicy;