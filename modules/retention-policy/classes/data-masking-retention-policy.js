const a264_0x4799ce=a264_0x1682;(function(_0x46c51a,_0x28c9be){const _0xf25bb0=a264_0x1682,_0x96c24=_0x46c51a();while(!![]){try{const _0x10f324=-parseInt(_0xf25bb0(0x1e4))/0x1+parseInt(_0xf25bb0(0x1f3))/0x2*(-parseInt(_0xf25bb0(0x1ea))/0x3)+-parseInt(_0xf25bb0(0x1eb))/0x4*(parseInt(_0xf25bb0(0x1ec))/0x5)+-parseInt(_0xf25bb0(0x1f0))/0x6+-parseInt(_0xf25bb0(0x1f5))/0x7+parseInt(_0xf25bb0(0x201))/0x8+parseInt(_0xf25bb0(0x1f4))/0x9*(parseInt(_0xf25bb0(0x1f1))/0xa);if(_0x10f324===_0x28c9be)break;else _0x96c24['push'](_0x96c24['shift']());}catch(_0x592df5){_0x96c24['push'](_0x96c24['shift']());}}}(a264_0x8f34,0x7dc9e));const a264_0x3c0f81=(function(){let _0xd9b339=!![];return function(_0xe840db,_0x5ea1c9){const _0x50d8ab=_0xd9b339?function(){const _0x17cb97=a264_0x1682;if(_0x5ea1c9){const _0xa67487=_0x5ea1c9[_0x17cb97(0x1fd)](_0xe840db,arguments);return _0x5ea1c9=null,_0xa67487;}}:function(){};return _0xd9b339=![],_0x50d8ab;};}()),a264_0x557aa3=a264_0x3c0f81(this,function(){const _0x5c341f=a264_0x1682;return a264_0x557aa3['toString']()[_0x5c341f(0x1e9)]('(((.+)+)+)+$')[_0x5c341f(0x1ee)]()['constructor'](a264_0x557aa3)['search']('(((.+)+)+)+$');});a264_0x557aa3();'use strict';var __importDefault=this&&this[a264_0x4799ce(0x1f6)]||function(_0x3d3fd3){const _0x252c09=a264_0x4799ce;return _0x3d3fd3&&_0x3d3fd3[_0x252c09(0x207)]?_0x3d3fd3:{'default':_0x3d3fd3};};Object[a264_0x4799ce(0x1fa)](exports,a264_0x4799ce(0x207),{'value':!![]}),exports[a264_0x4799ce(0x208)]=void 0x0;const promises_1=require('fs/promises'),core_1=require('../../../core'),utils_1=require(a264_0x4799ce(0x1f9)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),masking_service_1=require('../../data-masking/services/masking.service'),path_1=__importDefault(require(a264_0x4799ce(0x1e7)));function a264_0x1682(_0xcd755d,_0x35ffc9){const _0x1a2939=a264_0x8f34();return a264_0x1682=function(_0x557aa3,_0x3c0f81){_0x557aa3=_0x557aa3-0x1df;let _0x8f349e=_0x1a2939[_0x557aa3];return _0x8f349e;},a264_0x1682(_0xcd755d,_0x35ffc9);}function a264_0x8f34(){const _0x1713ee=['apply','error','join','name','5038392tIMXtk','logger','maskingFolderPath','completedDate','getJobCompletedDate','isExistsPath','__esModule','DataMaskingRetentionPolicy','parse','default','getTime','Logger','deleteJob','7401HfOmfo','filterExpiredJobs','utf-8','path','MaskingService','search','38607GUgTZa','2877256zXahve','5CCcmzl','execute','toString','readFile','3027858LmpmzR','10HLbVLG','isExpiredDate','106QSnERh','21336444ZejtHM','4003090QaHeNz','__importDefault','FsUtils','EXPIRED_RANGE_DATE','@flosum/utils','defineProperty','push','getJobsIds'];a264_0x8f34=function(){return _0x1713ee;};return a264_0x8f34();}class DataMaskingRetentionPolicy{constructor(){const _0x381d33=a264_0x4799ce;this[_0x381d33(0x1f8)]=0x9a7ec800,this[_0x381d33(0x202)]=new core_1[(_0x381d33(0x1e2))](DataMaskingRetentionPolicy[_0x381d33(0x200)]);}async[a264_0x4799ce(0x1ed)](){const _0x5441a1=a264_0x4799ce;try{const _0xa758d2=await job_utils_1[_0x5441a1(0x1e0)][_0x5441a1(0x1fc)](masking_service_1[_0x5441a1(0x1e8)][_0x5441a1(0x203)]),_0x5834f9=await this[_0x5441a1(0x1e5)](_0xa758d2);for(const _0x2c84cb of _0x5834f9){await this[_0x5441a1(0x1e3)](_0x2c84cb);}}catch(_0x5cd51d){this['logger'][_0x5441a1(0x1fe)](_0x5cd51d);}}async[a264_0x4799ce(0x1e5)](_0xff0261){const _0x75fbd9=a264_0x4799ce,_0x3a89e0=[];for(const _0x216903 of _0xff0261){const _0x12f91b=await this[_0x75fbd9(0x205)](_0x216903),_0x553752=_0x12f91b&&this[_0x75fbd9(0x1f2)](_0x12f91b);_0x553752&&_0x3a89e0[_0x75fbd9(0x1fb)](_0x216903);}return _0x3a89e0;}async[a264_0x4799ce(0x205)](_0x4e09d2){const _0x570d39=a264_0x4799ce;var _0x1b81eb;const _0x66a43d=path_1[_0x570d39(0x1e0)][_0x570d39(0x1ff)](masking_service_1[_0x570d39(0x1e8)][_0x570d39(0x203)],_0x4e09d2,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x570d39(0x1f7)][_0x570d39(0x206)](_0x66a43d))return null;const _0xd4d210=await(0x0,promises_1[_0x570d39(0x1ef)])(_0x66a43d,{'encoding':_0x570d39(0x1e6)});return(_0x1b81eb=JSON[_0x570d39(0x1df)](_0xd4d210)[_0x570d39(0x204)])!==null&&_0x1b81eb!==void 0x0?_0x1b81eb:null;}[a264_0x4799ce(0x1f2)](_0x1c74a6){const _0x59b862=a264_0x4799ce;return new Date()[_0x59b862(0x1e1)]()-_0x1c74a6>this['EXPIRED_RANGE_DATE'];}[a264_0x4799ce(0x1e3)](_0x52de4c){const _0x2a8c7f=a264_0x4799ce,_0x8bad7=path_1[_0x2a8c7f(0x1e0)][_0x2a8c7f(0x1ff)](masking_service_1['MaskingService']['maskingFolderPath'],_0x52de4c);return(0x0,promises_1['rm'])(_0x8bad7,{'recursive':!![],'force':!![]});}}exports[a264_0x4799ce(0x208)]=DataMaskingRetentionPolicy;