const a264_0x2c306c=a264_0x37fb;(function(_0x3e1613,_0x1744a3){const _0xadbede=a264_0x37fb,_0x410075=_0x3e1613();while(!![]){try{const _0x12eaad=-parseInt(_0xadbede(0xe3))/0x1*(-parseInt(_0xadbede(0xdd))/0x2)+-parseInt(_0xadbede(0xe9))/0x3+-parseInt(_0xadbede(0xe6))/0x4*(parseInt(_0xadbede(0xf9))/0x5)+parseInt(_0xadbede(0xfc))/0x6*(-parseInt(_0xadbede(0xff))/0x7)+parseInt(_0xadbede(0xdf))/0x8+-parseInt(_0xadbede(0xf0))/0x9+parseInt(_0xadbede(0xee))/0xa*(parseInt(_0xadbede(0xea))/0xb);if(_0x12eaad===_0x1744a3)break;else _0x410075['push'](_0x410075['shift']());}catch(_0x4976e1){_0x410075['push'](_0x410075['shift']());}}}(a264_0x132d,0x584fc));function a264_0x132d(){const _0xc5df55=['name','filterExpiredJobs','execute','push','EXPIRED_RANGE_DATE','deleteJob','1146982UFSpIe','../../data-masking/services/masking.service','2450120dApckh','FsUtils','(((.+)+)+)+$','getJobCompletedDate','1AgRYnV','defineProperty','fs/promises','16lZWFNO','path','../../../core','1724244dElqBq','45463unjgLx','__esModule','MaskingService','join','3270utzCrc','../../shared/utils/job.utils','951957bUSfrL','isExpiredDate','getJobsIds','search','isExistsPath','getTime','toString','logger','apply','633110ZORtND','error','DataMaskingRetentionPolicy','2047542zebYTa','@flosum/utils','default','14gZjTFm','parse','utf-8','__importDefault','maskingFolderPath','completedDate'];a264_0x132d=function(){return _0xc5df55;};return a264_0x132d();}function a264_0x37fb(_0x340303,_0x4b3b73){const _0x51ccc6=a264_0x132d();return a264_0x37fb=function(_0x4302e9,_0x29d1ee){_0x4302e9=_0x4302e9-0xdb;let _0x132d48=_0x51ccc6[_0x4302e9];return _0x132d48;},a264_0x37fb(_0x340303,_0x4b3b73);}const a264_0x29d1ee=(function(){let _0x3a69af=!![];return function(_0x105dbe,_0x32fbea){const _0x65f16a=_0x3a69af?function(){const _0x2b2026=a264_0x37fb;if(_0x32fbea){const _0x38fa44=_0x32fbea[_0x2b2026(0xf8)](_0x105dbe,arguments);return _0x32fbea=null,_0x38fa44;}}:function(){};return _0x3a69af=![],_0x65f16a;};}()),a264_0x4302e9=a264_0x29d1ee(this,function(){const _0x287174=a264_0x37fb;return a264_0x4302e9[_0x287174(0xf6)]()[_0x287174(0xf3)](_0x287174(0xe1))[_0x287174(0xf6)]()['constructor'](a264_0x4302e9)[_0x287174(0xf3)](_0x287174(0xe1));});a264_0x4302e9();'use strict';var __importDefault=this&&this[a264_0x2c306c(0x102)]||function(_0x3bd186){const _0x588b22=a264_0x2c306c;return _0x3bd186&&_0x3bd186[_0x588b22(0xeb)]?_0x3bd186:{'default':_0x3bd186};};Object[a264_0x2c306c(0xe4)](exports,'__esModule',{'value':!![]}),exports[a264_0x2c306c(0xfb)]=void 0x0;const promises_1=require(a264_0x2c306c(0xe5)),core_1=require(a264_0x2c306c(0xe8)),utils_1=require(a264_0x2c306c(0xfd)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a264_0x2c306c(0xef))),masking_service_1=require(a264_0x2c306c(0xde)),path_1=__importDefault(require(a264_0x2c306c(0xe7)));class DataMaskingRetentionPolicy{constructor(){const _0x28c6f6=a264_0x2c306c;this[_0x28c6f6(0xdb)]=0x9a7ec800,this[_0x28c6f6(0xf7)]=new core_1['Logger'](DataMaskingRetentionPolicy[_0x28c6f6(0x105)]);}async[a264_0x2c306c(0x107)](){const _0x535177=a264_0x2c306c;try{const _0x30d809=await job_utils_1[_0x535177(0xfe)][_0x535177(0xf2)](masking_service_1[_0x535177(0xec)][_0x535177(0x103)]),_0x2d53b3=await this[_0x535177(0x106)](_0x30d809);for(const _0x387dd9 of _0x2d53b3){await this[_0x535177(0xdc)](_0x387dd9);}}catch(_0x29d49d){this['logger'][_0x535177(0xfa)](_0x29d49d);}}async[a264_0x2c306c(0x106)](_0x1e5768){const _0x8d6cfa=a264_0x2c306c,_0x2d410a=[];for(const _0x349681 of _0x1e5768){const _0x36492f=await this[_0x8d6cfa(0xe2)](_0x349681),_0x1027e9=_0x36492f&&this[_0x8d6cfa(0xf1)](_0x36492f);_0x1027e9&&_0x2d410a[_0x8d6cfa(0x108)](_0x349681);}return _0x2d410a;}async[a264_0x2c306c(0xe2)](_0x2db749){const _0x24ab0f=a264_0x2c306c;var _0xf4f0fd;const _0x288edb=path_1[_0x24ab0f(0xfe)][_0x24ab0f(0xed)](masking_service_1['MaskingService'][_0x24ab0f(0x103)],_0x2db749,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x24ab0f(0xe0)][_0x24ab0f(0xf4)](_0x288edb))return null;const _0x594d94=await(0x0,promises_1['readFile'])(_0x288edb,{'encoding':_0x24ab0f(0x101)});return(_0xf4f0fd=JSON[_0x24ab0f(0x100)](_0x594d94)[_0x24ab0f(0x104)])!==null&&_0xf4f0fd!==void 0x0?_0xf4f0fd:null;}[a264_0x2c306c(0xf1)](_0x28e196){const _0x5d0438=a264_0x2c306c;return new Date()[_0x5d0438(0xf5)]()-_0x28e196>this['EXPIRED_RANGE_DATE'];}[a264_0x2c306c(0xdc)](_0x3b6ef7){const _0x61b7b0=a264_0x2c306c,_0x1d63c7=path_1[_0x61b7b0(0xfe)][_0x61b7b0(0xed)](masking_service_1[_0x61b7b0(0xec)][_0x61b7b0(0x103)],_0x3b6ef7);return(0x0,promises_1['rm'])(_0x1d63c7,{'recursive':!![],'force':!![]});}}exports[a264_0x2c306c(0xfb)]=DataMaskingRetentionPolicy;