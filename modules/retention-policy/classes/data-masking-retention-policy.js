const a258_0x32adb3=a258_0x34ab;(function(_0x526350,_0x5c6d7c){const _0x22276a=a258_0x34ab,_0x50e333=_0x526350();while(!![]){try{const _0xa702a2=parseInt(_0x22276a(0x12a))/0x1*(-parseInt(_0x22276a(0x116))/0x2)+-parseInt(_0x22276a(0x11b))/0x3+-parseInt(_0x22276a(0x12f))/0x4*(parseInt(_0x22276a(0x112))/0x5)+parseInt(_0x22276a(0x110))/0x6+-parseInt(_0x22276a(0x118))/0x7+-parseInt(_0x22276a(0x10b))/0x8*(-parseInt(_0x22276a(0x114))/0x9)+-parseInt(_0x22276a(0x123))/0xa*(-parseInt(_0x22276a(0x12c))/0xb);if(_0xa702a2===_0x5c6d7c)break;else _0x50e333['push'](_0x50e333['shift']());}catch(_0x1ff77b){_0x50e333['push'](_0x50e333['shift']());}}}(a258_0x50a5,0x5651b));function a258_0x50a5(){const _0x37caac=['../../shared/utils/job.utils','filterExpiredJobs','completedDate','10GIgCtB','deleteJob','toString','../../data-masking/services/masking.service','apply','FsUtils','readFile','1WIcpYR','__esModule','8649641KevwpE','Logger','search','14636mIIzVM','constructor','join','default','logger','4691768xKlZoE','DataMaskingRetentionPolicy','isExistsPath','isExpiredDate','name','361422MoUmXQ','MaskingService','35nvlAcH','error','9gmwGxe','EXPIRED_RANGE_DATE','197878egGLxx','(((.+)+)+)+$','2039947zzsoFj','maskingFolderPath','../../../core','1990509RlcVMk','getJobCompletedDate','__importDefault','path','push'];a258_0x50a5=function(){return _0x37caac;};return a258_0x50a5();}const a258_0x5c5b87=(function(){let _0x113402=!![];return function(_0x839526,_0x58daac){const _0x2b7f9d=_0x113402?function(){const _0x14cab9=a258_0x34ab;if(_0x58daac){const _0x3fd9c2=_0x58daac[_0x14cab9(0x127)](_0x839526,arguments);return _0x58daac=null,_0x3fd9c2;}}:function(){};return _0x113402=![],_0x2b7f9d;};}()),a258_0x165e69=a258_0x5c5b87(this,function(){const _0x257de7=a258_0x34ab;return a258_0x165e69['toString']()['search'](_0x257de7(0x117))[_0x257de7(0x125)]()[_0x257de7(0x130)](a258_0x165e69)[_0x257de7(0x12e)](_0x257de7(0x117));});a258_0x165e69();function a258_0x34ab(_0x35e5bb,_0x501a76){const _0x17ac84=a258_0x50a5();return a258_0x34ab=function(_0x165e69,_0x5c5b87){_0x165e69=_0x165e69-0x10b;let _0x50a5dd=_0x17ac84[_0x165e69];return _0x50a5dd;},a258_0x34ab(_0x35e5bb,_0x501a76);}'use strict';var __importDefault=this&&this[a258_0x32adb3(0x11d)]||function(_0x7b79b5){return _0x7b79b5&&_0x7b79b5['__esModule']?_0x7b79b5:{'default':_0x7b79b5};};Object['defineProperty'](exports,a258_0x32adb3(0x12b),{'value':!![]}),exports[a258_0x32adb3(0x10c)]=void 0x0;const promises_1=require('fs/promises'),core_1=require(a258_0x32adb3(0x11a)),utils_1=require('@flosum/utils'),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a258_0x32adb3(0x120))),masking_service_1=require(a258_0x32adb3(0x126)),path_1=__importDefault(require(a258_0x32adb3(0x11e)));class DataMaskingRetentionPolicy{constructor(){const _0x2354ce=a258_0x32adb3;this[_0x2354ce(0x115)]=0x9a7ec800,this['logger']=new core_1[(_0x2354ce(0x12d))](DataMaskingRetentionPolicy[_0x2354ce(0x10f)]);}async['execute'](){const _0x20226c=a258_0x32adb3;try{const _0x421f5a=await job_utils_1[_0x20226c(0x132)]['getJobsIds'](masking_service_1['MaskingService'][_0x20226c(0x119)]),_0x1811bf=await this[_0x20226c(0x121)](_0x421f5a);for(const _0x21fb63 of _0x1811bf){await this[_0x20226c(0x124)](_0x21fb63);}}catch(_0x1040d6){this[_0x20226c(0x133)][_0x20226c(0x113)](_0x1040d6);}}async[a258_0x32adb3(0x121)](_0x1df7df){const _0x1911b4=a258_0x32adb3,_0x52a382=[];for(const _0x95ba1a of _0x1df7df){const _0x383905=await this[_0x1911b4(0x11c)](_0x95ba1a),_0x46c4ba=_0x383905&&this[_0x1911b4(0x10e)](_0x383905);_0x46c4ba&&_0x52a382[_0x1911b4(0x11f)](_0x95ba1a);}return _0x52a382;}async[a258_0x32adb3(0x11c)](_0x2be886){const _0x3b6da0=a258_0x32adb3;var _0x3a8f6d;const _0x26f111=path_1[_0x3b6da0(0x132)][_0x3b6da0(0x131)](masking_service_1[_0x3b6da0(0x111)][_0x3b6da0(0x119)],_0x2be886,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x3b6da0(0x128)][_0x3b6da0(0x10d)](_0x26f111))return null;const _0x5929ac=await(0x0,promises_1[_0x3b6da0(0x129)])(_0x26f111,{'encoding':'utf-8'});return(_0x3a8f6d=JSON['parse'](_0x5929ac)[_0x3b6da0(0x122)])!==null&&_0x3a8f6d!==void 0x0?_0x3a8f6d:null;}['isExpiredDate'](_0x2dcd24){const _0x41518c=a258_0x32adb3;return new Date()['getTime']()-_0x2dcd24>this[_0x41518c(0x115)];}[a258_0x32adb3(0x124)](_0x2b4dab){const _0x19d2e1=a258_0x32adb3,_0x1bb0a5=path_1['default'][_0x19d2e1(0x131)](masking_service_1[_0x19d2e1(0x111)][_0x19d2e1(0x119)],_0x2b4dab);return(0x0,promises_1['rm'])(_0x1bb0a5,{'recursive':!![],'force':!![]});}}exports[a258_0x32adb3(0x10c)]=DataMaskingRetentionPolicy;