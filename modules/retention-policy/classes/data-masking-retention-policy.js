const a296_0x39efbc=a296_0x55c0;(function(_0x3ae0ae,_0x37f88e){const _0xca148c=a296_0x55c0,_0x22c16f=_0x3ae0ae();while(!![]){try{const _0x3fa231=-parseInt(_0xca148c(0x1d9))/0x1+parseInt(_0xca148c(0x1e5))/0x2+-parseInt(_0xca148c(0x1e6))/0x3+-parseInt(_0xca148c(0x1ed))/0x4+-parseInt(_0xca148c(0x1f8))/0x5*(-parseInt(_0xca148c(0x1fe))/0x6)+-parseInt(_0xca148c(0x1db))/0x7+-parseInt(_0xca148c(0x1f5))/0x8*(-parseInt(_0xca148c(0x1eb))/0x9);if(_0x3fa231===_0x37f88e)break;else _0x22c16f['push'](_0x22c16f['shift']());}catch(_0x6c8782){_0x22c16f['push'](_0x22c16f['shift']());}}}(a296_0x2273,0x203d4));const a296_0x4a2197=(function(){let _0x366039=!![];return function(_0x3f46e0,_0x269eb2){const _0x9738b2=_0x366039?function(){const _0x1483b2=a296_0x55c0;if(_0x269eb2){const _0x852a90=_0x269eb2[_0x1483b2(0x1f0)](_0x3f46e0,arguments);return _0x269eb2=null,_0x852a90;}}:function(){};return _0x366039=![],_0x9738b2;};}()),a296_0x3c785e=a296_0x4a2197(this,function(){const _0x475ca1=a296_0x55c0;return a296_0x3c785e['toString']()[_0x475ca1(0x1d4)]('(((.+)+)+)+$')[_0x475ca1(0x1e4)]()[_0x475ca1(0x1e3)](a296_0x3c785e)['search'](_0x475ca1(0x1e9));});function a296_0x2273(){const _0x3acbfd=['execute','JOB_LOG_STATE_FILENAME','maskingFolderPath','constructor','toString','293254RCIyti','201792jCEikm','getJobCompletedDate','MaskingService','(((.+)+)+)+$','FsUtils','41913MZHYWS','__esModule','328252ArMeMH','getTime','error','apply','../../../core','default','join','name','248dzfymg','__importDefault','@flosum/utils','201375PWxaNV','utf-8','isExpiredDate','completedDate','Logger','logger','6QWKFTq','readFile','search','../../data-masking/services/masking.service','filterExpiredJobs','push','deleteJob','5676JXKvGV','DataMaskingRetentionPolicy','309498bBljjz','../../shared/utils/job.utils','fs/promises','EXPIRED_RANGE_DATE','defineProperty'];a296_0x2273=function(){return _0x3acbfd;};return a296_0x2273();}a296_0x3c785e();'use strict';function a296_0x55c0(_0x3f01b7,_0xbc5e70){const _0x3d92ad=a296_0x2273();return a296_0x55c0=function(_0x3c785e,_0x4a2197){_0x3c785e=_0x3c785e-0x1d4;let _0x227386=_0x3d92ad[_0x3c785e];return _0x227386;},a296_0x55c0(_0x3f01b7,_0xbc5e70);}var __importDefault=this&&this[a296_0x39efbc(0x1f6)]||function(_0x1b7456){const _0x5e78f3=a296_0x39efbc;return _0x1b7456&&_0x1b7456[_0x5e78f3(0x1ec)]?_0x1b7456:{'default':_0x1b7456};};Object[a296_0x39efbc(0x1df)](exports,'__esModule',{'value':!![]}),exports[a296_0x39efbc(0x1da)]=void 0x0;const promises_1=require(a296_0x39efbc(0x1dd)),core_1=require(a296_0x39efbc(0x1f1)),utils_1=require(a296_0x39efbc(0x1f7)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a296_0x39efbc(0x1dc))),masking_service_1=require(a296_0x39efbc(0x1d5)),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0x119044=a296_0x39efbc;this[_0x119044(0x1de)]=0x9a7ec800,this[_0x119044(0x1fd)]=new core_1[(_0x119044(0x1fc))](DataMaskingRetentionPolicy[_0x119044(0x1f4)]);}async[a296_0x39efbc(0x1e0)](){const _0x5080a7=a296_0x39efbc;try{const _0x5b9f13=await job_utils_1[_0x5080a7(0x1f2)]['getJobsIds'](masking_service_1[_0x5080a7(0x1e8)]['maskingFolderPath']),_0x6dce00=await this[_0x5080a7(0x1d6)](_0x5b9f13);for(const _0x24c01d of _0x6dce00){await this[_0x5080a7(0x1d8)](_0x24c01d);}}catch(_0x310760){this['logger'][_0x5080a7(0x1ef)](_0x310760);}}async[a296_0x39efbc(0x1d6)](_0x1529f4){const _0x5b235e=a296_0x39efbc,_0x4968e5=[];for(const _0x296ca9 of _0x1529f4){const _0x121edf=await this[_0x5b235e(0x1e7)](_0x296ca9),_0x37c9eb=_0x121edf&&this['isExpiredDate'](_0x121edf);_0x37c9eb&&_0x4968e5[_0x5b235e(0x1d7)](_0x296ca9);}return _0x4968e5;}async['getJobCompletedDate'](_0x56a193){const _0x4a6f85=a296_0x39efbc;var _0xe72c0;const _0x26cc82=path_1[_0x4a6f85(0x1f2)][_0x4a6f85(0x1f3)](masking_service_1[_0x4a6f85(0x1e8)][_0x4a6f85(0x1e2)],_0x56a193,job_1[_0x4a6f85(0x1e1)]);if(!await utils_1[_0x4a6f85(0x1ea)]['isExistsPath'](_0x26cc82))return null;const _0x2f3774=await(0x0,promises_1[_0x4a6f85(0x1ff)])(_0x26cc82,{'encoding':_0x4a6f85(0x1f9)});return(_0xe72c0=JSON['parse'](_0x2f3774)[_0x4a6f85(0x1fb)])!==null&&_0xe72c0!==void 0x0?_0xe72c0:null;}[a296_0x39efbc(0x1fa)](_0x4a89ff){const _0x2274ec=a296_0x39efbc;return new Date()[_0x2274ec(0x1ee)]()-_0x4a89ff>this[_0x2274ec(0x1de)];}['deleteJob'](_0x46afc2){const _0x4ea4f9=a296_0x39efbc,_0x13bb17=path_1[_0x4ea4f9(0x1f2)]['join'](masking_service_1[_0x4ea4f9(0x1e8)][_0x4ea4f9(0x1e2)],_0x46afc2);return(0x0,promises_1['rm'])(_0x13bb17,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;