const a258_0x543def=a258_0xf361;(function(_0x359efd,_0x478132){const _0x213fd0=a258_0xf361,_0x1ba9b6=_0x359efd();while(!![]){try{const _0xc1fdee=parseInt(_0x213fd0(0x204))/0x1+-parseInt(_0x213fd0(0x1e6))/0x2*(parseInt(_0x213fd0(0x1e1))/0x3)+-parseInt(_0x213fd0(0x1e9))/0x4*(parseInt(_0x213fd0(0x1df))/0x5)+-parseInt(_0x213fd0(0x1f9))/0x6+parseInt(_0x213fd0(0x206))/0x7+parseInt(_0x213fd0(0x1ea))/0x8+parseInt(_0x213fd0(0x1fe))/0x9;if(_0xc1fdee===_0x478132)break;else _0x1ba9b6['push'](_0x1ba9b6['shift']());}catch(_0x251390){_0x1ba9b6['push'](_0x1ba9b6['shift']());}}}(a258_0x2afe,0x22b23));const a258_0x387c9d=(function(){let _0x5af84b=!![];return function(_0x161fda,_0x3851bb){const _0x2d1926=_0x5af84b?function(){const _0x40fa28=a258_0xf361;if(_0x3851bb){const _0x1bed80=_0x3851bb[_0x40fa28(0x1e7)](_0x161fda,arguments);return _0x3851bb=null,_0x1bed80;}}:function(){};return _0x5af84b=![],_0x2d1926;};}()),a258_0x142792=a258_0x387c9d(this,function(){const _0x522115=a258_0xf361;return a258_0x142792[_0x522115(0x1ff)]()[_0x522115(0x1f1)](_0x522115(0x1ef))[_0x522115(0x1ff)]()[_0x522115(0x1ee)](a258_0x142792)['search'](_0x522115(0x1ef));});a258_0x142792();function a258_0x2afe(){const _0x3b9a13=['join','utf-8','EXPIRED_RANGE_DATE','947742ODRkOu','getJobsIds','defineProperty','filterExpiredJobs','getTime','244332ZmoaWU','toString','maskingFolderPath','readFile','getJobCompletedDate','__esModule','10236zMnuSC','name','1490286gPdkXV','FsUtils','@flosum/utils','../../../constants/job','isExpiredDate','5UmGldi','execute','24513qFGDGZ','MaskingService','deleteJob','fs/promises','push','30jVbvXY','apply','completedDate','405448iilwbm','2189736eQYJWy','logger','Logger','../../shared/utils/job.utils','constructor','(((.+)+)+)+$','default','search','../../data-masking/services/masking.service','../../../core','DataMaskingRetentionPolicy','parse'];a258_0x2afe=function(){return _0x3b9a13;};return a258_0x2afe();}function a258_0xf361(_0x4c9f74,_0x152b6e){const _0x5d23e2=a258_0x2afe();return a258_0xf361=function(_0x142792,_0x387c9d){_0x142792=_0x142792-0x1dc;let _0x2afec3=_0x5d23e2[_0x142792];return _0x2afec3;},a258_0xf361(_0x4c9f74,_0x152b6e);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4cb05e){const _0xfe694b=a258_0xf361;return _0x4cb05e&&_0x4cb05e[_0xfe694b(0x203)]?_0x4cb05e:{'default':_0x4cb05e};};Object[a258_0x543def(0x1fb)](exports,'__esModule',{'value':!![]}),exports['DataMaskingRetentionPolicy']=void 0x0;const promises_1=require(a258_0x543def(0x1e4)),core_1=require(a258_0x543def(0x1f3)),utils_1=require(a258_0x543def(0x1dc)),job_1=require(a258_0x543def(0x1dd)),job_utils_1=__importDefault(require(a258_0x543def(0x1ed))),masking_service_1=require(a258_0x543def(0x1f2)),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0x546114=a258_0x543def;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0x546114(0x1eb)]=new core_1[(_0x546114(0x1ec))](DataMaskingRetentionPolicy[_0x546114(0x205)]);}async[a258_0x543def(0x1e0)](){const _0x12424e=a258_0x543def;try{const _0x11b854=await job_utils_1[_0x12424e(0x1f0)][_0x12424e(0x1fa)](masking_service_1[_0x12424e(0x1e2)][_0x12424e(0x200)]),_0x3740d0=await this[_0x12424e(0x1fc)](_0x11b854);for(const _0x29b780 of _0x3740d0){await this[_0x12424e(0x1e3)](_0x29b780);}}catch(_0x3369bd){this[_0x12424e(0x1eb)]['error'](_0x3369bd);}}async['filterExpiredJobs'](_0xf0baf3){const _0xf46920=a258_0x543def,_0x183824=[];for(const _0x502334 of _0xf0baf3){const _0x59edc8=await this['getJobCompletedDate'](_0x502334),_0x19c6ce=_0x59edc8&&this['isExpiredDate'](_0x59edc8);_0x19c6ce&&_0x183824[_0xf46920(0x1e5)](_0x502334);}return _0x183824;}async[a258_0x543def(0x202)](_0x1909cc){const _0x165512=a258_0x543def;var _0x183974;const _0x289199=path_1[_0x165512(0x1f0)][_0x165512(0x1f6)](masking_service_1[_0x165512(0x1e2)]['maskingFolderPath'],_0x1909cc,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x165512(0x207)]['isExistsPath'](_0x289199))return null;const _0x54dc57=await(0x0,promises_1[_0x165512(0x201)])(_0x289199,{'encoding':_0x165512(0x1f7)});return(_0x183974=JSON[_0x165512(0x1f5)](_0x54dc57)[_0x165512(0x1e8)])!==null&&_0x183974!==void 0x0?_0x183974:null;}[a258_0x543def(0x1de)](_0x5cfab7){const _0x18465f=a258_0x543def;return new Date()[_0x18465f(0x1fd)]()-_0x5cfab7>this[_0x18465f(0x1f8)];}[a258_0x543def(0x1e3)](_0xc08df5){const _0x441f47=a258_0x543def,_0x4f5135=path_1['default']['join'](masking_service_1[_0x441f47(0x1e2)][_0x441f47(0x200)],_0xc08df5);return(0x0,promises_1['rm'])(_0x4f5135,{'recursive':!![],'force':!![]});}}exports[a258_0x543def(0x1f4)]=DataMaskingRetentionPolicy;