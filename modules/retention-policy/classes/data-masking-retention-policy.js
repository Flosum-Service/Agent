const a264_0x76ab2e=a264_0x5c45;(function(_0x467605,_0x57f74f){const _0x45000b=a264_0x5c45,_0x216e9f=_0x467605();while(!![]){try{const _0x12dd00=parseInt(_0x45000b(0x19e))/0x1*(-parseInt(_0x45000b(0x1af))/0x2)+parseInt(_0x45000b(0x1a1))/0x3*(-parseInt(_0x45000b(0x18f))/0x4)+parseInt(_0x45000b(0x1ae))/0x5*(parseInt(_0x45000b(0x1aa))/0x6)+parseInt(_0x45000b(0x191))/0x7*(-parseInt(_0x45000b(0x193))/0x8)+parseInt(_0x45000b(0x1b3))/0x9*(-parseInt(_0x45000b(0x196))/0xa)+-parseInt(_0x45000b(0x19f))/0xb+parseInt(_0x45000b(0x1a6))/0xc*(parseInt(_0x45000b(0x18a))/0xd);if(_0x12dd00===_0x57f74f)break;else _0x216e9f['push'](_0x216e9f['shift']());}catch(_0x1f622d){_0x216e9f['push'](_0x216e9f['shift']());}}}(a264_0x14c5,0x9a766));const a264_0x268b17=(function(){let _0x541bd6=!![];return function(_0x2ad735,_0x2ab400){const _0x470015=_0x541bd6?function(){const _0x143918=a264_0x5c45;if(_0x2ab400){const _0x371c90=_0x2ab400[_0x143918(0x18e)](_0x2ad735,arguments);return _0x2ab400=null,_0x371c90;}}:function(){};return _0x541bd6=![],_0x470015;};}()),a264_0x58888d=a264_0x268b17(this,function(){const _0x47d09f=a264_0x5c45;return a264_0x58888d['toString']()['search'](_0x47d09f(0x189))[_0x47d09f(0x1a0)]()[_0x47d09f(0x1a4)](a264_0x58888d)['search'](_0x47d09f(0x189));});a264_0x58888d();'use strict';var __importDefault=this&&this[a264_0x76ab2e(0x18c)]||function(_0x11e874){const _0x15c50d=a264_0x76ab2e;return _0x11e874&&_0x11e874[_0x15c50d(0x19a)]?_0x11e874:{'default':_0x11e874};};function a264_0x14c5(){const _0x1115ad=['(((.+)+)+)+$','3389191CezSQk','MaskingService','__importDefault','deleteJob','apply','12HVkjlT','@flosum/utils','7fXaVve','default','2834576XZwWPg','defineProperty','logger','11687430rQGRcn','getTime','readFile','EXPIRED_RANGE_DATE','__esModule','maskingFolderPath','FsUtils','isExpiredDate','599064cdZNFQ','3703425rkYNrB','toString','152835YGNiwr','join','utf-8','constructor','../../../constants/job','132ZLSjgw','DataMaskingRetentionPolicy','getJobsIds','JOB_LOG_STATE_FILENAME','60WttNDd','push','completedDate','execute','188270IpcuoD','2OpHUhJ','../../data-masking/services/masking.service','../../shared/utils/job.utils','getJobCompletedDate','9bzKUDb','filterExpiredJobs','parse'];a264_0x14c5=function(){return _0x1115ad;};return a264_0x14c5();}Object[a264_0x76ab2e(0x194)](exports,a264_0x76ab2e(0x19a),{'value':!![]}),exports[a264_0x76ab2e(0x1a7)]=void 0x0;function a264_0x5c45(_0x2d6cf9,_0x27fe65){const _0x51c5ab=a264_0x14c5();return a264_0x5c45=function(_0x58888d,_0x268b17){_0x58888d=_0x58888d-0x188;let _0x14c59f=_0x51c5ab[_0x58888d];return _0x14c59f;},a264_0x5c45(_0x2d6cf9,_0x27fe65);}const promises_1=require('fs/promises'),core_1=require('../../../core'),utils_1=require(a264_0x76ab2e(0x190)),job_1=require(a264_0x76ab2e(0x1a5)),job_utils_1=__importDefault(require(a264_0x76ab2e(0x1b1))),masking_service_1=require(a264_0x76ab2e(0x1b0)),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0xf955aa=a264_0x76ab2e;this[_0xf955aa(0x199)]=0x9a7ec800,this[_0xf955aa(0x195)]=new core_1['Logger'](DataMaskingRetentionPolicy['name']);}async[a264_0x76ab2e(0x1ad)](){const _0x3dd874=a264_0x76ab2e;try{const _0x16ebe6=await job_utils_1[_0x3dd874(0x192)][_0x3dd874(0x1a8)](masking_service_1['MaskingService']['maskingFolderPath']),_0x39c85f=await this[_0x3dd874(0x1b4)](_0x16ebe6);for(const _0x1f1abf of _0x39c85f){await this[_0x3dd874(0x18d)](_0x1f1abf);}}catch(_0x17e78c){this[_0x3dd874(0x195)]['error'](_0x17e78c);}}async[a264_0x76ab2e(0x1b4)](_0x6ff048){const _0xc36064=a264_0x76ab2e,_0x244564=[];for(const _0x379ab7 of _0x6ff048){const _0x3c7764=await this[_0xc36064(0x1b2)](_0x379ab7),_0x345838=_0x3c7764&&this[_0xc36064(0x19d)](_0x3c7764);_0x345838&&_0x244564[_0xc36064(0x1ab)](_0x379ab7);}return _0x244564;}async[a264_0x76ab2e(0x1b2)](_0x4ea924){const _0x1527ff=a264_0x76ab2e;var _0x57396b;const _0x1e99a1=path_1['default']['join'](masking_service_1['MaskingService'][_0x1527ff(0x19b)],_0x4ea924,job_1[_0x1527ff(0x1a9)]);if(!await utils_1[_0x1527ff(0x19c)]['isExistsPath'](_0x1e99a1))return null;const _0x4be791=await(0x0,promises_1[_0x1527ff(0x198)])(_0x1e99a1,{'encoding':_0x1527ff(0x1a3)});return(_0x57396b=JSON[_0x1527ff(0x188)](_0x4be791)[_0x1527ff(0x1ac)])!==null&&_0x57396b!==void 0x0?_0x57396b:null;}['isExpiredDate'](_0x4df064){const _0x15a801=a264_0x76ab2e;return new Date()[_0x15a801(0x197)]()-_0x4df064>this['EXPIRED_RANGE_DATE'];}[a264_0x76ab2e(0x18d)](_0x1fa218){const _0x9751b5=a264_0x76ab2e,_0x3cbfbd=path_1[_0x9751b5(0x192)][_0x9751b5(0x1a2)](masking_service_1[_0x9751b5(0x18b)][_0x9751b5(0x19b)],_0x1fa218);return(0x0,promises_1['rm'])(_0x3cbfbd,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;