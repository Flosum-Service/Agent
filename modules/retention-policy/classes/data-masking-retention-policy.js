function a264_0x5516(_0x5b7c93,_0xefc869){const _0x54eab7=a264_0x2d79();return a264_0x5516=function(_0x258480,_0x53da4a){_0x258480=_0x258480-0x1b3;let _0x2d79fd=_0x54eab7[_0x258480];return _0x2d79fd;},a264_0x5516(_0x5b7c93,_0xefc869);}const a264_0x4fa783=a264_0x5516;(function(_0x2716ce,_0x1d60fa){const _0x454f52=a264_0x5516,_0x55eeff=_0x2716ce();while(!![]){try{const _0x214894=parseInt(_0x454f52(0x1b8))/0x1*(-parseInt(_0x454f52(0x1b7))/0x2)+parseInt(_0x454f52(0x1b9))/0x3+-parseInt(_0x454f52(0x1cf))/0x4+parseInt(_0x454f52(0x1c2))/0x5*(parseInt(_0x454f52(0x1ce))/0x6)+parseInt(_0x454f52(0x1b5))/0x7+parseInt(_0x454f52(0x1b6))/0x8+-parseInt(_0x454f52(0x1bb))/0x9*(-parseInt(_0x454f52(0x1c3))/0xa);if(_0x214894===_0x1d60fa)break;else _0x55eeff['push'](_0x55eeff['shift']());}catch(_0x362693){_0x55eeff['push'](_0x55eeff['shift']());}}}(a264_0x2d79,0x85ad4));const a264_0x53da4a=(function(){let _0x5dfdf0=!![];return function(_0x3261eb,_0xa3ac92){const _0x9a4c9f=_0x5dfdf0?function(){const _0x237a43=a264_0x5516;if(_0xa3ac92){const _0x10df93=_0xa3ac92[_0x237a43(0x1c0)](_0x3261eb,arguments);return _0xa3ac92=null,_0x10df93;}}:function(){};return _0x5dfdf0=![],_0x9a4c9f;};}()),a264_0x258480=a264_0x53da4a(this,function(){const _0xe3b973=a264_0x5516;return a264_0x258480['toString']()['search'](_0xe3b973(0x1c6))[_0xe3b973(0x1d8)]()[_0xe3b973(0x1c4)](a264_0x258480)[_0xe3b973(0x1da)]('(((.+)+)+)+$');});a264_0x258480();'use strict';var __importDefault=this&&this[a264_0x4fa783(0x1d0)]||function(_0x11651f){const _0x491055=a264_0x4fa783;return _0x11651f&&_0x11651f[_0x491055(0x1c1)]?_0x11651f:{'default':_0x11651f};};Object[a264_0x4fa783(0x1be)](exports,a264_0x4fa783(0x1c1),{'value':!![]}),exports['DataMaskingRetentionPolicy']=void 0x0;const promises_1=require('fs/promises'),core_1=require('../../../core'),utils_1=require(a264_0x4fa783(0x1b3)),job_1=require(a264_0x4fa783(0x1bd)),job_utils_1=__importDefault(require(a264_0x4fa783(0x1c8))),masking_service_1=require(a264_0x4fa783(0x1d6)),path_1=__importDefault(require('path'));function a264_0x2d79(){const _0xd54cab=['36cVLcav','FsUtils','../../../constants/job','defineProperty','maskingFolderPath','apply','__esModule','169855BmQRAf','441710wQxUtT','constructor','filterExpiredJobs','(((.+)+)+)+$','utf-8','../../shared/utils/job.utils','getJobCompletedDate','error','join','readFile','Logger','102VQTuUH','2484388kKdQTL','__importDefault','isExpiredDate','default','deleteJob','getTime','execute','../../data-masking/services/masking.service','getJobsIds','toString','JOB_LOG_STATE_FILENAME','search','@flosum/utils','logger','6212220fkihAS','1660800KtzQDM','2iLPXzx','1079933tysbgk','1197957xLyIJr','MaskingService'];a264_0x2d79=function(){return _0xd54cab;};return a264_0x2d79();}class DataMaskingRetentionPolicy{constructor(){const _0x5e881c=a264_0x4fa783;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0x5e881c(0x1b4)]=new core_1[(_0x5e881c(0x1cd))](DataMaskingRetentionPolicy['name']);}async[a264_0x4fa783(0x1d5)](){const _0x3d60b1=a264_0x4fa783;try{const _0x19e997=await job_utils_1['default'][_0x3d60b1(0x1d7)](masking_service_1[_0x3d60b1(0x1ba)][_0x3d60b1(0x1bf)]),_0x35926a=await this[_0x3d60b1(0x1c5)](_0x19e997);for(const _0x268d81 of _0x35926a){await this[_0x3d60b1(0x1d3)](_0x268d81);}}catch(_0x319f25){this[_0x3d60b1(0x1b4)][_0x3d60b1(0x1ca)](_0x319f25);}}async[a264_0x4fa783(0x1c5)](_0x5c9a95){const _0x4758c0=a264_0x4fa783,_0x2bf2f2=[];for(const _0x525455 of _0x5c9a95){const _0xeeb923=await this[_0x4758c0(0x1c9)](_0x525455),_0x4665c2=_0xeeb923&&this[_0x4758c0(0x1d1)](_0xeeb923);_0x4665c2&&_0x2bf2f2['push'](_0x525455);}return _0x2bf2f2;}async[a264_0x4fa783(0x1c9)](_0x54f4d6){const _0x13746e=a264_0x4fa783;var _0x5bbfcf;const _0x3b6247=path_1[_0x13746e(0x1d2)][_0x13746e(0x1cb)](masking_service_1[_0x13746e(0x1ba)][_0x13746e(0x1bf)],_0x54f4d6,job_1[_0x13746e(0x1d9)]);if(!await utils_1[_0x13746e(0x1bc)]['isExistsPath'](_0x3b6247))return null;const _0x33c1ce=await(0x0,promises_1[_0x13746e(0x1cc)])(_0x3b6247,{'encoding':_0x13746e(0x1c7)});return(_0x5bbfcf=JSON['parse'](_0x33c1ce)['completedDate'])!==null&&_0x5bbfcf!==void 0x0?_0x5bbfcf:null;}[a264_0x4fa783(0x1d1)](_0x3b1292){const _0x2b4b8f=a264_0x4fa783;return new Date()[_0x2b4b8f(0x1d4)]()-_0x3b1292>this['EXPIRED_RANGE_DATE'];}[a264_0x4fa783(0x1d3)](_0x51ba7b){const _0x45b1d5=a264_0x4fa783,_0x49c386=path_1[_0x45b1d5(0x1d2)][_0x45b1d5(0x1cb)](masking_service_1[_0x45b1d5(0x1ba)][_0x45b1d5(0x1bf)],_0x51ba7b);return(0x0,promises_1['rm'])(_0x49c386,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;