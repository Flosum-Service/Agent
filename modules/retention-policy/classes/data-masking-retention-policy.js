function a280_0x5c13(_0x585c9b,_0x2e27d6){const _0x1ec097=a280_0x14bb();return a280_0x5c13=function(_0x324d2a,_0x24fe4f){_0x324d2a=_0x324d2a-0x96;let _0x14bb3d=_0x1ec097[_0x324d2a];return _0x14bb3d;},a280_0x5c13(_0x585c9b,_0x2e27d6);}const a280_0x5a849a=a280_0x5c13;(function(_0x5accdd,_0x34c32d){const _0x279faf=a280_0x5c13,_0x378356=_0x5accdd();while(!![]){try{const _0x8d246e=parseInt(_0x279faf(0xa9))/0x1+-parseInt(_0x279faf(0xbd))/0x2*(-parseInt(_0x279faf(0x98))/0x3)+-parseInt(_0x279faf(0xb7))/0x4*(-parseInt(_0x279faf(0xb6))/0x5)+-parseInt(_0x279faf(0xb9))/0x6*(-parseInt(_0x279faf(0xba))/0x7)+parseInt(_0x279faf(0xaf))/0x8+parseInt(_0x279faf(0xaa))/0x9*(-parseInt(_0x279faf(0xa6))/0xa)+-parseInt(_0x279faf(0x9f))/0xb;if(_0x8d246e===_0x34c32d)break;else _0x378356['push'](_0x378356['shift']());}catch(_0x5dafb6){_0x378356['push'](_0x378356['shift']());}}}(a280_0x14bb,0x623e3));const a280_0x24fe4f=(function(){let _0xef35dc=!![];return function(_0x3123af,_0x526ed6){const _0x65e5d2=_0xef35dc?function(){const _0x543849=a280_0x5c13;if(_0x526ed6){const _0x141469=_0x526ed6[_0x543849(0x9c)](_0x3123af,arguments);return _0x526ed6=null,_0x141469;}}:function(){};return _0xef35dc=![],_0x65e5d2;};}()),a280_0x324d2a=a280_0x24fe4f(this,function(){const _0xc47be0=a280_0x5c13;return a280_0x324d2a[_0xc47be0(0x9d)]()['search'](_0xc47be0(0xa8))[_0xc47be0(0x9d)]()[_0xc47be0(0xa7)](a280_0x324d2a)[_0xc47be0(0x9a)](_0xc47be0(0xa8));});a280_0x324d2a();'use strict';function a280_0x14bb(){const _0x264244=['default','fs/promises','logger','isExpiredDate','6370WEALuw','constructor','(((.+)+)+)+$','551016zDgMWU','4068TdCeqe','getJobCompletedDate','path','MaskingService','error','3965472DPgxjU','__esModule','defineProperty','EXPIRED_RANGE_DATE','JOB_LOG_STATE_FILENAME','completedDate','DataMaskingRetentionPolicy','1192580fiEBgW','8heFSeu','maskingFolderPath','330384PGTUwj','49JSlnOp','join','Logger','182456pxnEPa','../../data-masking/services/masking.service','readFile','24SHzXxK','../../../constants/job','search','@flosum/utils','apply','toString','utf-8','21435447dbaSgq','parse','deleteJob'];a280_0x14bb=function(){return _0x264244;};return a280_0x14bb();}var __importDefault=this&&this['__importDefault']||function(_0x403c56){return _0x403c56&&_0x403c56['__esModule']?_0x403c56:{'default':_0x403c56};};Object[a280_0x5a849a(0xb1)](exports,a280_0x5a849a(0xb0),{'value':!![]}),exports[a280_0x5a849a(0xb5)]=void 0x0;const promises_1=require(a280_0x5a849a(0xa3)),core_1=require('../../../core'),utils_1=require(a280_0x5a849a(0x9b)),job_1=require(a280_0x5a849a(0x99)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),masking_service_1=require(a280_0x5a849a(0x96)),path_1=__importDefault(require(a280_0x5a849a(0xac)));class DataMaskingRetentionPolicy{constructor(){const _0x341377=a280_0x5a849a;this[_0x341377(0xb2)]=0x9a7ec800,this[_0x341377(0xa4)]=new core_1[(_0x341377(0xbc))](DataMaskingRetentionPolicy['name']);}async['execute'](){const _0x496604=a280_0x5a849a;try{const _0x3056b3=await job_utils_1[_0x496604(0xa2)]['getJobsIds'](masking_service_1[_0x496604(0xad)][_0x496604(0xb8)]),_0x249e02=await this['filterExpiredJobs'](_0x3056b3);for(const _0x5640b7 of _0x249e02){await this[_0x496604(0xa1)](_0x5640b7);}}catch(_0x1411ca){this[_0x496604(0xa4)][_0x496604(0xae)](_0x1411ca);}}async['filterExpiredJobs'](_0x4c7eea){const _0x43a0e3=a280_0x5a849a,_0x5cbe8a=[];for(const _0x4a2e48 of _0x4c7eea){const _0x509a6e=await this[_0x43a0e3(0xab)](_0x4a2e48),_0x3baf0a=_0x509a6e&&this[_0x43a0e3(0xa5)](_0x509a6e);_0x3baf0a&&_0x5cbe8a['push'](_0x4a2e48);}return _0x5cbe8a;}async[a280_0x5a849a(0xab)](_0x3c75dd){const _0x36536a=a280_0x5a849a;var _0x4fe4a8;const _0x16c2a5=path_1[_0x36536a(0xa2)]['join'](masking_service_1[_0x36536a(0xad)][_0x36536a(0xb8)],_0x3c75dd,job_1[_0x36536a(0xb3)]);if(!await utils_1['FsUtils']['isExistsPath'](_0x16c2a5))return null;const _0x10f2c2=await(0x0,promises_1[_0x36536a(0x97)])(_0x16c2a5,{'encoding':_0x36536a(0x9e)});return(_0x4fe4a8=JSON[_0x36536a(0xa0)](_0x10f2c2)[_0x36536a(0xb4)])!==null&&_0x4fe4a8!==void 0x0?_0x4fe4a8:null;}[a280_0x5a849a(0xa5)](_0x19a94c){const _0x17c487=a280_0x5a849a;return new Date()['getTime']()-_0x19a94c>this[_0x17c487(0xb2)];}[a280_0x5a849a(0xa1)](_0x422163){const _0x40c6fe=a280_0x5a849a,_0x31e992=path_1[_0x40c6fe(0xa2)][_0x40c6fe(0xbb)](masking_service_1[_0x40c6fe(0xad)][_0x40c6fe(0xb8)],_0x422163);return(0x0,promises_1['rm'])(_0x31e992,{'recursive':!![],'force':!![]});}}exports[a280_0x5a849a(0xb5)]=DataMaskingRetentionPolicy;