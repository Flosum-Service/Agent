const a306_0x5739d8=a306_0x2c61;function a306_0x5ae0(){const _0x3c39a4=['358468TlUgBz','5809984tIHqOV','MaskingService','search','deleteJob','getJobCompletedDate','5vFowHB','Logger','join','209UTswKx','__esModule','981100grimhC','__importDefault','3xDgaXo','defineProperty','getJobsIds','@flosum/utils','path','623623DTDujj','fs/promises','parse','../../../core','completedDate','../../../constants/job','587990XBXaXB','../../shared/utils/job.utils','maskingFolderPath','isExistsPath','DataMaskingRetentionPolicy','5718528leGmpz','JOB_LOG_STATE_FILENAME','constructor','apply','utf-8','FsUtils','../../data-masking/services/masking.service','default','push','isExpiredDate','name','filterExpiredJobs','EXPIRED_RANGE_DATE','logger','342712mzRSUu','18gmhjil'];a306_0x5ae0=function(){return _0x3c39a4;};return a306_0x5ae0();}(function(_0x5e2989,_0x4d6468){const _0x172d42=a306_0x2c61,_0x1aa3d9=_0x5e2989();while(!![]){try{const _0xb0093a=parseInt(_0x172d42(0xaa))/0x1+parseInt(_0x172d42(0x8a))/0x2*(-parseInt(_0x172d42(0x8c))/0x3)+-parseInt(_0x172d42(0xac))/0x4*(-parseInt(_0x172d42(0x85))/0x5)+-parseInt(_0x172d42(0xab))/0x6*(-parseInt(_0x172d42(0x91))/0x7)+parseInt(_0x172d42(0xad))/0x8+parseInt(_0x172d42(0x9c))/0x9+-parseInt(_0x172d42(0x97))/0xa*(parseInt(_0x172d42(0x88))/0xb);if(_0xb0093a===_0x4d6468)break;else _0x1aa3d9['push'](_0x1aa3d9['shift']());}catch(_0x4cec45){_0x1aa3d9['push'](_0x1aa3d9['shift']());}}}(a306_0x5ae0,0x6eb81));const a306_0x1f09f8=(function(){let _0x5530e3=!![];return function(_0x58810f,_0x5dad46){const _0x231624=_0x5530e3?function(){const _0x296c4b=a306_0x2c61;if(_0x5dad46){const _0x277df1=_0x5dad46[_0x296c4b(0x9f)](_0x58810f,arguments);return _0x5dad46=null,_0x277df1;}}:function(){};return _0x5530e3=![],_0x231624;};}()),a306_0x5d9bd0=a306_0x1f09f8(this,function(){const _0x532087=a306_0x2c61;return a306_0x5d9bd0['toString']()[_0x532087(0x82)]('(((.+)+)+)+$')['toString']()[_0x532087(0x9e)](a306_0x5d9bd0)[_0x532087(0x82)]('(((.+)+)+)+$');});a306_0x5d9bd0();'use strict';var __importDefault=this&&this[a306_0x5739d8(0x8b)]||function(_0xafe739){const _0x4b7477=a306_0x5739d8;return _0xafe739&&_0xafe739[_0x4b7477(0x89)]?_0xafe739:{'default':_0xafe739};};function a306_0x2c61(_0x37fe60,_0x239287){const _0x4de532=a306_0x5ae0();return a306_0x2c61=function(_0x5d9bd0,_0x1f09f8){_0x5d9bd0=_0x5d9bd0-0x82;let _0x5ae059=_0x4de532[_0x5d9bd0];return _0x5ae059;},a306_0x2c61(_0x37fe60,_0x239287);}Object[a306_0x5739d8(0x8d)](exports,a306_0x5739d8(0x89),{'value':!![]}),exports[a306_0x5739d8(0x9b)]=void 0x0;const promises_1=require(a306_0x5739d8(0x92)),core_1=require(a306_0x5739d8(0x94)),utils_1=require(a306_0x5739d8(0x8f)),job_1=require(a306_0x5739d8(0x96)),job_utils_1=__importDefault(require(a306_0x5739d8(0x98))),masking_service_1=require(a306_0x5739d8(0xa2)),path_1=__importDefault(require(a306_0x5739d8(0x90)));class DataMaskingRetentionPolicy{constructor(){const _0xc8c255=a306_0x5739d8;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0xc8c255(0xa9)]=new core_1[(_0xc8c255(0x86))](DataMaskingRetentionPolicy[_0xc8c255(0xa6)]);}async['execute'](){const _0x5f15a0=a306_0x5739d8;try{const _0x1bd69f=await job_utils_1['default'][_0x5f15a0(0x8e)](masking_service_1[_0x5f15a0(0xae)][_0x5f15a0(0x99)]),_0x6ffb0c=await this[_0x5f15a0(0xa7)](_0x1bd69f);for(const _0x204ffc of _0x6ffb0c){await this[_0x5f15a0(0x83)](_0x204ffc);}}catch(_0x37d83f){this[_0x5f15a0(0xa9)]['error'](_0x37d83f);}}async[a306_0x5739d8(0xa7)](_0x12f14b){const _0x587317=a306_0x5739d8,_0x1ff126=[];for(const _0x138167 of _0x12f14b){const _0x27e091=await this[_0x587317(0x84)](_0x138167),_0x81e49=_0x27e091&&this[_0x587317(0xa5)](_0x27e091);_0x81e49&&_0x1ff126[_0x587317(0xa4)](_0x138167);}return _0x1ff126;}async['getJobCompletedDate'](_0xee1a9b){const _0x384112=a306_0x5739d8;var _0x5cf164;const _0x421693=path_1[_0x384112(0xa3)][_0x384112(0x87)](masking_service_1[_0x384112(0xae)]['maskingFolderPath'],_0xee1a9b,job_1[_0x384112(0x9d)]);if(!await utils_1[_0x384112(0xa1)][_0x384112(0x9a)](_0x421693))return null;const _0x3579cc=await(0x0,promises_1['readFile'])(_0x421693,{'encoding':_0x384112(0xa0)});return(_0x5cf164=JSON[_0x384112(0x93)](_0x3579cc)[_0x384112(0x95)])!==null&&_0x5cf164!==void 0x0?_0x5cf164:null;}['isExpiredDate'](_0x472327){const _0x403161=a306_0x5739d8;return new Date()['getTime']()-_0x472327>this[_0x403161(0xa8)];}[a306_0x5739d8(0x83)](_0x4271ae){const _0x10f156=a306_0x5739d8,_0x410bce=path_1[_0x10f156(0xa3)][_0x10f156(0x87)](masking_service_1[_0x10f156(0xae)][_0x10f156(0x99)],_0x4271ae);return(0x0,promises_1['rm'])(_0x410bce,{'recursive':!![],'force':!![]});}}exports[a306_0x5739d8(0x9b)]=DataMaskingRetentionPolicy;