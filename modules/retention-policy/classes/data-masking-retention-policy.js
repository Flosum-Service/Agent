const a264_0x12444c=a264_0xbdc4;(function(_0x50c65e,_0x5338bb){const _0x11e6f9=a264_0xbdc4,_0x5c20ac=_0x50c65e();while(!![]){try{const _0x5b6a1c=-parseInt(_0x11e6f9(0x1d8))/0x1+-parseInt(_0x11e6f9(0x1c9))/0x2*(parseInt(_0x11e6f9(0x1ef))/0x3)+-parseInt(_0x11e6f9(0x1d7))/0x4*(-parseInt(_0x11e6f9(0x1c7))/0x5)+-parseInt(_0x11e6f9(0x1e5))/0x6+parseInt(_0x11e6f9(0x1d3))/0x7*(-parseInt(_0x11e6f9(0x1e2))/0x8)+-parseInt(_0x11e6f9(0x1cf))/0x9+parseInt(_0x11e6f9(0x1ed))/0xa;if(_0x5b6a1c===_0x5338bb)break;else _0x5c20ac['push'](_0x5c20ac['shift']());}catch(_0x40504){_0x5c20ac['push'](_0x5c20ac['shift']());}}}(a264_0x436c,0xab583));function a264_0xbdc4(_0x4203b0,_0x8eedf6){const _0x2469c0=a264_0x436c();return a264_0xbdc4=function(_0x3a9379,_0x5baccb){_0x3a9379=_0x3a9379-0x1c7;let _0x436cf5=_0x2469c0[_0x3a9379];return _0x436cf5;},a264_0xbdc4(_0x4203b0,_0x8eedf6);}const a264_0x5baccb=(function(){let _0x1c789f=!![];return function(_0x4be3db,_0x61ac75){const _0x10a556=_0x1c789f?function(){const _0x4e9c60=a264_0xbdc4;if(_0x61ac75){const _0x282005=_0x61ac75[_0x4e9c60(0x1ee)](_0x4be3db,arguments);return _0x61ac75=null,_0x282005;}}:function(){};return _0x1c789f=![],_0x10a556;};}()),a264_0x3a9379=a264_0x5baccb(this,function(){const _0x1c5cd6=a264_0xbdc4;return a264_0x3a9379['toString']()[_0x1c5cd6(0x1da)](_0x1c5cd6(0x1e7))[_0x1c5cd6(0x1cc)]()[_0x1c5cd6(0x1ca)](a264_0x3a9379)[_0x1c5cd6(0x1da)](_0x1c5cd6(0x1e7));});a264_0x3a9379();'use strict';var __importDefault=this&&this[a264_0x12444c(0x1ea)]||function(_0x4412e5){const _0x5068e7=a264_0x12444c;return _0x4412e5&&_0x4412e5[_0x5068e7(0x1f1)]?_0x4412e5:{'default':_0x4412e5};};function a264_0x436c(){const _0x133b83=['__esModule','readFile','5958545mvXADP','defineProperty','4OuXtqv','constructor','getJobsIds','toString','join','execute','8368128JgbZfb','parse','../../../core','path','28OojhmE','isExpiredDate','push','maskingFolderPath','4oFKdvn','1177781JSCtKJ','DataMaskingRetentionPolicy','search','default','filterExpiredJobs','isExistsPath','../../../constants/job','fs/promises','name','Logger','1236824kwLTEn','EXPIRED_RANGE_DATE','getJobCompletedDate','3591594yyhpir','completedDate','(((.+)+)+)+$','logger','@flosum/utils','__importDefault','../../shared/utils/job.utils','deleteJob','35201320vFvtDi','apply','1028145ptcskF','error'];a264_0x436c=function(){return _0x133b83;};return a264_0x436c();}Object[a264_0x12444c(0x1c8)](exports,a264_0x12444c(0x1f1),{'value':!![]}),exports[a264_0x12444c(0x1d9)]=void 0x0;const promises_1=require(a264_0x12444c(0x1df)),core_1=require(a264_0x12444c(0x1d1)),utils_1=require(a264_0x12444c(0x1e9)),job_1=require(a264_0x12444c(0x1de)),job_utils_1=__importDefault(require(a264_0x12444c(0x1eb))),masking_service_1=require('../../data-masking/services/masking.service'),path_1=__importDefault(require(a264_0x12444c(0x1d2)));class DataMaskingRetentionPolicy{constructor(){const _0x173e86=a264_0x12444c;this[_0x173e86(0x1e3)]=0x9a7ec800,this[_0x173e86(0x1e8)]=new core_1[(_0x173e86(0x1e1))](DataMaskingRetentionPolicy[_0x173e86(0x1e0)]);}async[a264_0x12444c(0x1ce)](){const _0x51159c=a264_0x12444c;try{const _0xfdc73d=await job_utils_1['default'][_0x51159c(0x1cb)](masking_service_1['MaskingService']['maskingFolderPath']),_0x4cca9c=await this[_0x51159c(0x1dc)](_0xfdc73d);for(const _0x4a8fb8 of _0x4cca9c){await this[_0x51159c(0x1ec)](_0x4a8fb8);}}catch(_0x1d5b66){this[_0x51159c(0x1e8)][_0x51159c(0x1f0)](_0x1d5b66);}}async[a264_0x12444c(0x1dc)](_0x3ba482){const _0x5a169f=a264_0x12444c,_0x12419a=[];for(const _0x22ba9e of _0x3ba482){const _0x273fec=await this[_0x5a169f(0x1e4)](_0x22ba9e),_0x54d9db=_0x273fec&&this[_0x5a169f(0x1d4)](_0x273fec);_0x54d9db&&_0x12419a[_0x5a169f(0x1d5)](_0x22ba9e);}return _0x12419a;}async[a264_0x12444c(0x1e4)](_0x502c9b){const _0x28ea1a=a264_0x12444c;var _0x4066c9;const _0x407384=path_1[_0x28ea1a(0x1db)][_0x28ea1a(0x1cd)](masking_service_1['MaskingService']['maskingFolderPath'],_0x502c9b,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1['FsUtils'][_0x28ea1a(0x1dd)](_0x407384))return null;const _0x52d691=await(0x0,promises_1[_0x28ea1a(0x1f2)])(_0x407384,{'encoding':'utf-8'});return(_0x4066c9=JSON[_0x28ea1a(0x1d0)](_0x52d691)[_0x28ea1a(0x1e6)])!==null&&_0x4066c9!==void 0x0?_0x4066c9:null;}[a264_0x12444c(0x1d4)](_0x17f4c8){const _0x30dfae=a264_0x12444c;return new Date()['getTime']()-_0x17f4c8>this[_0x30dfae(0x1e3)];}[a264_0x12444c(0x1ec)](_0x5f3856){const _0x3bf36e=a264_0x12444c,_0x59a711=path_1[_0x3bf36e(0x1db)][_0x3bf36e(0x1cd)](masking_service_1['MaskingService'][_0x3bf36e(0x1d6)],_0x5f3856);return(0x0,promises_1['rm'])(_0x59a711,{'recursive':!![],'force':!![]});}}exports[a264_0x12444c(0x1d9)]=DataMaskingRetentionPolicy;