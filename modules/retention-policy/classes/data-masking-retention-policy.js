const a307_0x21f210=a307_0x12ff;(function(_0x1d7d8a,_0x3a00cd){const _0x3d43fe=a307_0x12ff,_0x45d47c=_0x1d7d8a();while(!![]){try{const _0x3917ca=-parseInt(_0x3d43fe(0x184))/0x1*(-parseInt(_0x3d43fe(0x16c))/0x2)+parseInt(_0x3d43fe(0x172))/0x3+-parseInt(_0x3d43fe(0x178))/0x4+-parseInt(_0x3d43fe(0x174))/0x5+-parseInt(_0x3d43fe(0x16e))/0x6+-parseInt(_0x3d43fe(0x17a))/0x7*(parseInt(_0x3d43fe(0x169))/0x8)+parseInt(_0x3d43fe(0x164))/0x9;if(_0x3917ca===_0x3a00cd)break;else _0x45d47c['push'](_0x45d47c['shift']());}catch(_0x51f4de){_0x45d47c['push'](_0x45d47c['shift']());}}}(a307_0x20f8,0xa4d9b));const a307_0x41adc5=(function(){let _0x438206=!![];return function(_0x2d54a7,_0x4dd92b){const _0x1f65e0=_0x438206?function(){const _0x42b989=a307_0x12ff;if(_0x4dd92b){const _0x4b41a7=_0x4dd92b[_0x42b989(0x173)](_0x2d54a7,arguments);return _0x4dd92b=null,_0x4b41a7;}}:function(){};return _0x438206=![],_0x1f65e0;};}()),a307_0x20e438=a307_0x41adc5(this,function(){const _0x5d9269=a307_0x12ff;return a307_0x20e438[_0x5d9269(0x162)]()['search']('(((.+)+)+)+$')[_0x5d9269(0x162)]()[_0x5d9269(0x16a)](a307_0x20e438)['search'](_0x5d9269(0x15f));});a307_0x20e438();'use strict';function a307_0x20f8(){const _0x534e4b=['MaskingService','26148879ZOLANU','execute','EXPIRED_RANGE_DATE','../../shared/utils/job.utils','push','19080mOCDRx','constructor','getJobCompletedDate','1106hdekAw','logger','6719520hgmIiD','Logger','deleteJob','utf-8','616668PkkEzG','apply','697355gWZrTO','isExistsPath','__esModule','readFile','4933400rYkuNa','getTime','469OSsges','../../../constants/job','default','DataMaskingRetentionPolicy','../../data-masking/services/masking.service','filterExpiredJobs','isExpiredDate','getJobsIds','completedDate','FsUtils','392HWGjrf','maskingFolderPath','parse','path','join','(((.+)+)+)+$','@flosum/utils','defineProperty','toString'];a307_0x20f8=function(){return _0x534e4b;};return a307_0x20f8();}function a307_0x12ff(_0x347bae,_0x2b6495){const _0x49fe22=a307_0x20f8();return a307_0x12ff=function(_0x20e438,_0x41adc5){_0x20e438=_0x20e438-0x15c;let _0x20f818=_0x49fe22[_0x20e438];return _0x20f818;},a307_0x12ff(_0x347bae,_0x2b6495);}var __importDefault=this&&this['__importDefault']||function(_0x430478){const _0x4c9f12=a307_0x12ff;return _0x430478&&_0x430478[_0x4c9f12(0x176)]?_0x430478:{'default':_0x430478};};Object[a307_0x21f210(0x161)](exports,'__esModule',{'value':!![]}),exports['DataMaskingRetentionPolicy']=void 0x0;const promises_1=require('fs/promises'),core_1=require('../../../core'),utils_1=require(a307_0x21f210(0x160)),job_1=require(a307_0x21f210(0x17b)),job_utils_1=__importDefault(require(a307_0x21f210(0x167))),masking_service_1=require(a307_0x21f210(0x17e)),path_1=__importDefault(require(a307_0x21f210(0x15d)));class DataMaskingRetentionPolicy{constructor(){const _0x5907a4=a307_0x21f210;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0x5907a4(0x16d)]=new core_1[(_0x5907a4(0x16f))](DataMaskingRetentionPolicy['name']);}async[a307_0x21f210(0x165)](){const _0x29fa0a=a307_0x21f210;try{const _0x1ea401=await job_utils_1[_0x29fa0a(0x17c)][_0x29fa0a(0x181)](masking_service_1[_0x29fa0a(0x163)]['maskingFolderPath']),_0x526682=await this['filterExpiredJobs'](_0x1ea401);for(const _0x198afa of _0x526682){await this[_0x29fa0a(0x170)](_0x198afa);}}catch(_0xeef1c8){this[_0x29fa0a(0x16d)]['error'](_0xeef1c8);}}async[a307_0x21f210(0x17f)](_0x32f376){const _0x46928f=a307_0x21f210,_0x241be6=[];for(const _0x3408f0 of _0x32f376){const _0x52f205=await this[_0x46928f(0x16b)](_0x3408f0),_0x2bc964=_0x52f205&&this[_0x46928f(0x180)](_0x52f205);_0x2bc964&&_0x241be6[_0x46928f(0x168)](_0x3408f0);}return _0x241be6;}async[a307_0x21f210(0x16b)](_0x2fad5a){const _0x25c224=a307_0x21f210;var _0x4c3e33;const _0x16aab8=path_1[_0x25c224(0x17c)]['join'](masking_service_1[_0x25c224(0x163)]['maskingFolderPath'],_0x2fad5a,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x25c224(0x183)][_0x25c224(0x175)](_0x16aab8))return null;const _0xd37790=await(0x0,promises_1[_0x25c224(0x177)])(_0x16aab8,{'encoding':_0x25c224(0x171)});return(_0x4c3e33=JSON[_0x25c224(0x15c)](_0xd37790)[_0x25c224(0x182)])!==null&&_0x4c3e33!==void 0x0?_0x4c3e33:null;}['isExpiredDate'](_0x1132a5){const _0x1b2657=a307_0x21f210;return new Date()[_0x1b2657(0x179)]()-_0x1132a5>this[_0x1b2657(0x166)];}['deleteJob'](_0x4bedb8){const _0x35c508=a307_0x21f210,_0x3a2e82=path_1[_0x35c508(0x17c)][_0x35c508(0x15e)](masking_service_1['MaskingService'][_0x35c508(0x185)],_0x4bedb8);return(0x0,promises_1['rm'])(_0x3a2e82,{'recursive':!![],'force':!![]});}}exports[a307_0x21f210(0x17d)]=DataMaskingRetentionPolicy;