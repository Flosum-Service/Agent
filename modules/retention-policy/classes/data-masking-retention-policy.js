const a280_0x44b5ea=a280_0x278c;(function(_0x373395,_0x415e6e){const _0x262a50=a280_0x278c,_0x322b27=_0x373395();while(!![]){try{const _0x449df3=parseInt(_0x262a50(0xad))/0x1*(-parseInt(_0x262a50(0x9e))/0x2)+parseInt(_0x262a50(0xb3))/0x3*(parseInt(_0x262a50(0xa7))/0x4)+parseInt(_0x262a50(0xae))/0x5*(parseInt(_0x262a50(0xb6))/0x6)+-parseInt(_0x262a50(0xbc))/0x7*(-parseInt(_0x262a50(0xbe))/0x8)+parseInt(_0x262a50(0xb2))/0x9+parseInt(_0x262a50(0x9d))/0xa+-parseInt(_0x262a50(0xa0))/0xb*(parseInt(_0x262a50(0xa6))/0xc);if(_0x449df3===_0x415e6e)break;else _0x322b27['push'](_0x322b27['shift']());}catch(_0x11e2fd){_0x322b27['push'](_0x322b27['shift']());}}}(a280_0x3f57,0xb4a41));const a280_0x41fe37=(function(){let _0x491701=!![];return function(_0x538ea6,_0x1edafb){const _0x3c3186=_0x491701?function(){const _0x517b56=a280_0x278c;if(_0x1edafb){const _0x11fd3d=_0x1edafb[_0x517b56(0x9b)](_0x538ea6,arguments);return _0x1edafb=null,_0x11fd3d;}}:function(){};return _0x491701=![],_0x3c3186;};}()),a280_0x44410e=a280_0x41fe37(this,function(){const _0x43f4e0=a280_0x278c;return a280_0x44410e[_0x43f4e0(0x9c)]()['search'](_0x43f4e0(0xbb))[_0x43f4e0(0x9c)]()['constructor'](a280_0x44410e)[_0x43f4e0(0xb9)](_0x43f4e0(0xbb));});function a280_0x3f57(){const _0x5aca34=['error','174Usgnad','JOB_LOG_STATE_FILENAME','utf-8','search','deleteJob','(((.+)+)+)+$','22596OLDUed','completedDate','856glBrbr','../../data-masking/services/masking.service','../../../core','name','getJobCompletedDate','join','fs/promises','path','apply','toString','10524470vNNawB','2LBxoKb','__importDefault','34228997ejGTyo','execute','MaskingService','default','filterExpiredJobs','push','12jvmkQc','1318660iUcrBP','maskingFolderPath','isExpiredDate','logger','isExistsPath','getTime','515211oZgDcg','246355zynaqE','Logger','parse','__esModule','1993329cKCyWh','12SPrlHw','DataMaskingRetentionPolicy'];a280_0x3f57=function(){return _0x5aca34;};return a280_0x3f57();}a280_0x44410e();function a280_0x278c(_0x381d0f,_0x419427){const _0x3eae5a=a280_0x3f57();return a280_0x278c=function(_0x44410e,_0x41fe37){_0x44410e=_0x44410e-0x97;let _0x3f5791=_0x3eae5a[_0x44410e];return _0x3f5791;},a280_0x278c(_0x381d0f,_0x419427);}'use strict';var __importDefault=this&&this[a280_0x44b5ea(0x9f)]||function(_0x5e7b7c){return _0x5e7b7c&&_0x5e7b7c['__esModule']?_0x5e7b7c:{'default':_0x5e7b7c};};Object['defineProperty'](exports,a280_0x44b5ea(0xb1),{'value':!![]}),exports[a280_0x44b5ea(0xb4)]=void 0x0;const promises_1=require(a280_0x44b5ea(0x99)),core_1=require(a280_0x44b5ea(0xc0)),utils_1=require('@flosum/utils'),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),masking_service_1=require(a280_0x44b5ea(0xbf)),path_1=__importDefault(require(a280_0x44b5ea(0x9a)));class DataMaskingRetentionPolicy{constructor(){const _0x5ec7cc=a280_0x44b5ea;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this['logger']=new core_1[(_0x5ec7cc(0xaf))](DataMaskingRetentionPolicy[_0x5ec7cc(0xc1)]);}async[a280_0x44b5ea(0xa1)](){const _0x2818fd=a280_0x44b5ea;try{const _0x3481bf=await job_utils_1[_0x2818fd(0xa3)]['getJobsIds'](masking_service_1[_0x2818fd(0xa2)][_0x2818fd(0xa8)]),_0x541b68=await this[_0x2818fd(0xa4)](_0x3481bf);for(const _0x1633d7 of _0x541b68){await this[_0x2818fd(0xba)](_0x1633d7);}}catch(_0x1b075b){this[_0x2818fd(0xaa)][_0x2818fd(0xb5)](_0x1b075b);}}async[a280_0x44b5ea(0xa4)](_0xeea352){const _0x48a596=a280_0x44b5ea,_0x27c065=[];for(const _0x395411 of _0xeea352){const _0x4a0ed4=await this[_0x48a596(0x97)](_0x395411),_0x47ee4e=_0x4a0ed4&&this[_0x48a596(0xa9)](_0x4a0ed4);_0x47ee4e&&_0x27c065[_0x48a596(0xa5)](_0x395411);}return _0x27c065;}async[a280_0x44b5ea(0x97)](_0xf52dcd){const _0x22f6a2=a280_0x44b5ea;var _0x5d321d;const _0x5bdd8c=path_1[_0x22f6a2(0xa3)][_0x22f6a2(0x98)](masking_service_1[_0x22f6a2(0xa2)][_0x22f6a2(0xa8)],_0xf52dcd,job_1[_0x22f6a2(0xb7)]);if(!await utils_1['FsUtils'][_0x22f6a2(0xab)](_0x5bdd8c))return null;const _0x62fcd0=await(0x0,promises_1['readFile'])(_0x5bdd8c,{'encoding':_0x22f6a2(0xb8)});return(_0x5d321d=JSON[_0x22f6a2(0xb0)](_0x62fcd0)[_0x22f6a2(0xbd)])!==null&&_0x5d321d!==void 0x0?_0x5d321d:null;}[a280_0x44b5ea(0xa9)](_0x434c49){const _0x5bc20c=a280_0x44b5ea;return new Date()[_0x5bc20c(0xac)]()-_0x434c49>this['EXPIRED_RANGE_DATE'];}[a280_0x44b5ea(0xba)](_0x4249b6){const _0x12f3bc=a280_0x44b5ea,_0x1fe9dc=path_1[_0x12f3bc(0xa3)][_0x12f3bc(0x98)](masking_service_1[_0x12f3bc(0xa2)][_0x12f3bc(0xa8)],_0x4249b6);return(0x0,promises_1['rm'])(_0x1fe9dc,{'recursive':!![],'force':!![]});}}exports[a280_0x44b5ea(0xb4)]=DataMaskingRetentionPolicy;