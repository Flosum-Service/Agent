const a264_0x412785=a264_0x4c9d;(function(_0x27e727,_0x4d501a){const _0x1c97db=a264_0x4c9d,_0xbf369d=_0x27e727();while(!![]){try{const _0x1a12e3=-parseInt(_0x1c97db(0x165))/0x1+parseInt(_0x1c97db(0x148))/0x2+parseInt(_0x1c97db(0x154))/0x3+parseInt(_0x1c97db(0x16a))/0x4+-parseInt(_0x1c97db(0x158))/0x5+-parseInt(_0x1c97db(0x16b))/0x6+parseInt(_0x1c97db(0x157))/0x7*(parseInt(_0x1c97db(0x14b))/0x8);if(_0x1a12e3===_0x4d501a)break;else _0xbf369d['push'](_0xbf369d['shift']());}catch(_0x4ab373){_0xbf369d['push'](_0xbf369d['shift']());}}}(a264_0x3f34,0x7452b));const a264_0x5174de=(function(){let _0x4cc651=!![];return function(_0x2fd3a8,_0x19103d){const _0x36df68=_0x4cc651?function(){if(_0x19103d){const _0x1c32bc=_0x19103d['apply'](_0x2fd3a8,arguments);return _0x19103d=null,_0x1c32bc;}}:function(){};return _0x4cc651=![],_0x36df68;};}()),a264_0x6ee576=a264_0x5174de(this,function(){const _0x515d75=a264_0x4c9d;return a264_0x6ee576[_0x515d75(0x168)]()[_0x515d75(0x171)]('(((.+)+)+)+$')[_0x515d75(0x168)]()[_0x515d75(0x15d)](a264_0x6ee576)[_0x515d75(0x171)](_0x515d75(0x166));});a264_0x6ee576();'use strict';function a264_0x4c9d(_0x1860ce,_0x429994){const _0xf98181=a264_0x3f34();return a264_0x4c9d=function(_0x6ee576,_0x5174de){_0x6ee576=_0x6ee576-0x146;let _0x3f345e=_0xf98181[_0x6ee576];return _0x3f345e;},a264_0x4c9d(_0x1860ce,_0x429994);}var __importDefault=this&&this[a264_0x412785(0x167)]||function(_0x40fda0){const _0x4600d1=a264_0x412785;return _0x40fda0&&_0x40fda0[_0x4600d1(0x15a)]?_0x40fda0:{'default':_0x40fda0};};function a264_0x3f34(){const _0x37eb72=['completedDate','FsUtils','constructor','utf-8','getJobsIds','fs/promises','path','error','MaskingService','maskingFolderPath','923275BzeOjy','(((.+)+)+)+$','__importDefault','toString','isExpiredDate','2586360vdsGcK','117864cNlRkr','../../data-masking/services/masking.service','join','../../../constants/job','filterExpiredJobs','push','search','parse','default','1741282stvXPC','EXPIRED_RANGE_DATE','getJobCompletedDate','1745888asIWNV','execute','deleteJob','@flosum/utils','../../../core','isExistsPath','../../shared/utils/job.utils','JOB_LOG_STATE_FILENAME','getTime','524691xZfXzG','defineProperty','readFile','14lXymMH','3546110JwVONm','DataMaskingRetentionPolicy','__esModule'];a264_0x3f34=function(){return _0x37eb72;};return a264_0x3f34();}Object[a264_0x412785(0x155)](exports,a264_0x412785(0x15a),{'value':!![]}),exports[a264_0x412785(0x159)]=void 0x0;const promises_1=require(a264_0x412785(0x160)),core_1=require(a264_0x412785(0x14f)),utils_1=require(a264_0x412785(0x14e)),job_1=require(a264_0x412785(0x16e)),job_utils_1=__importDefault(require(a264_0x412785(0x151))),masking_service_1=require(a264_0x412785(0x16c)),path_1=__importDefault(require(a264_0x412785(0x161)));class DataMaskingRetentionPolicy{constructor(){const _0x12e386=a264_0x412785;this[_0x12e386(0x149)]=0x9a7ec800,this['logger']=new core_1['Logger'](DataMaskingRetentionPolicy['name']);}async[a264_0x412785(0x14c)](){const _0x4dec35=a264_0x412785;try{const _0x4528a8=await job_utils_1[_0x4dec35(0x147)][_0x4dec35(0x15f)](masking_service_1[_0x4dec35(0x163)][_0x4dec35(0x164)]),_0x304e38=await this[_0x4dec35(0x16f)](_0x4528a8);for(const _0x258833 of _0x304e38){await this[_0x4dec35(0x14d)](_0x258833);}}catch(_0x1589a6){this['logger'][_0x4dec35(0x162)](_0x1589a6);}}async['filterExpiredJobs'](_0x56f169){const _0x5e695b=a264_0x412785,_0x16b83a=[];for(const _0xe50fcf of _0x56f169){const _0x2c6780=await this[_0x5e695b(0x14a)](_0xe50fcf),_0x11b542=_0x2c6780&&this[_0x5e695b(0x169)](_0x2c6780);_0x11b542&&_0x16b83a[_0x5e695b(0x170)](_0xe50fcf);}return _0x16b83a;}async[a264_0x412785(0x14a)](_0x208a9b){const _0x366134=a264_0x412785;var _0x4d9590;const _0x562e24=path_1['default'][_0x366134(0x16d)](masking_service_1[_0x366134(0x163)][_0x366134(0x164)],_0x208a9b,job_1[_0x366134(0x152)]);if(!await utils_1[_0x366134(0x15c)][_0x366134(0x150)](_0x562e24))return null;const _0x579d5e=await(0x0,promises_1[_0x366134(0x156)])(_0x562e24,{'encoding':_0x366134(0x15e)});return(_0x4d9590=JSON[_0x366134(0x146)](_0x579d5e)[_0x366134(0x15b)])!==null&&_0x4d9590!==void 0x0?_0x4d9590:null;}[a264_0x412785(0x169)](_0x1a62c7){const _0x5dbf55=a264_0x412785;return new Date()[_0x5dbf55(0x153)]()-_0x1a62c7>this[_0x5dbf55(0x149)];}[a264_0x412785(0x14d)](_0x39a52c){const _0x342eda=a264_0x412785,_0x25e186=path_1[_0x342eda(0x147)]['join'](masking_service_1[_0x342eda(0x163)]['maskingFolderPath'],_0x39a52c);return(0x0,promises_1['rm'])(_0x25e186,{'recursive':!![],'force':!![]});}}exports[a264_0x412785(0x159)]=DataMaskingRetentionPolicy;