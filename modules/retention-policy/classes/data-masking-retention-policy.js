const a264_0x100cdf=a264_0x3392;(function(_0x2e14a4,_0x262192){const _0x23b88f=a264_0x3392,_0x276b96=_0x2e14a4();while(!![]){try{const _0x2baa73=-parseInt(_0x23b88f(0x181))/0x1+parseInt(_0x23b88f(0x18d))/0x2+-parseInt(_0x23b88f(0x195))/0x3*(parseInt(_0x23b88f(0x180))/0x4)+parseInt(_0x23b88f(0x18e))/0x5*(parseInt(_0x23b88f(0x197))/0x6)+parseInt(_0x23b88f(0x18c))/0x7+parseInt(_0x23b88f(0x17f))/0x8+-parseInt(_0x23b88f(0x185))/0x9*(parseInt(_0x23b88f(0x186))/0xa);if(_0x2baa73===_0x262192)break;else _0x276b96['push'](_0x276b96['shift']());}catch(_0x28eedc){_0x276b96['push'](_0x276b96['shift']());}}}(a264_0x225d,0x45a12));const a264_0x375f63=(function(){let _0xc73984=!![];return function(_0x4e3c18,_0x25baae){const _0x272f6e=_0xc73984?function(){const _0x14f919=a264_0x3392;if(_0x25baae){const _0x13f6ed=_0x25baae[_0x14f919(0x193)](_0x4e3c18,arguments);return _0x25baae=null,_0x13f6ed;}}:function(){};return _0xc73984=![],_0x272f6e;};}()),a264_0x28d62d=a264_0x375f63(this,function(){const _0x4130f0=a264_0x3392;return a264_0x28d62d[_0x4130f0(0x1a9)]()[_0x4130f0(0x19a)](_0x4130f0(0x189))[_0x4130f0(0x1a9)]()['constructor'](a264_0x28d62d)[_0x4130f0(0x19a)](_0x4130f0(0x189));});a264_0x28d62d();'use strict';var __importDefault=this&&this[a264_0x100cdf(0x183)]||function(_0x14f099){return _0x14f099&&_0x14f099['__esModule']?_0x14f099:{'default':_0x14f099};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a264_0x100cdf(0x19b)]=void 0x0;const promises_1=require(a264_0x100cdf(0x192)),core_1=require(a264_0x100cdf(0x18a)),utils_1=require(a264_0x100cdf(0x18b)),job_1=require(a264_0x100cdf(0x1a6)),job_utils_1=__importDefault(require(a264_0x100cdf(0x1a3))),masking_service_1=require(a264_0x100cdf(0x191)),path_1=__importDefault(require(a264_0x100cdf(0x198)));function a264_0x225d(){const _0x46eaaf=['deleteJob','error','../../data-masking/services/masking.service','fs/promises','apply','parse','2190jVcDsT','isExpiredDate','12RplMTD','path','filterExpiredJobs','search','DataMaskingRetentionPolicy','getJobsIds','JOB_LOG_STATE_FILENAME','getJobCompletedDate','getTime','maskingFolderPath','logger','FsUtils','../../shared/utils/job.utils','default','join','../../../constants/job','EXPIRED_RANGE_DATE','readFile','toString','2955344jaXmcn','2580NJYQQt','429338WfKDUP','isExistsPath','__importDefault','Logger','77445ohhwXZ','110RQexlZ','MaskingService','name','(((.+)+)+)+$','../../../core','@flosum/utils','3264275IJettT','830852PNMZHc','72190iLjGbg'];a264_0x225d=function(){return _0x46eaaf;};return a264_0x225d();}function a264_0x3392(_0xfd6022,_0x14f8d0){const _0x202b8a=a264_0x225d();return a264_0x3392=function(_0x28d62d,_0x375f63){_0x28d62d=_0x28d62d-0x17f;let _0x225db5=_0x202b8a[_0x28d62d];return _0x225db5;},a264_0x3392(_0xfd6022,_0x14f8d0);}class DataMaskingRetentionPolicy{constructor(){const _0x5e738a=a264_0x100cdf;this[_0x5e738a(0x1a7)]=0x9a7ec800,this[_0x5e738a(0x1a1)]=new core_1[(_0x5e738a(0x184))](DataMaskingRetentionPolicy[_0x5e738a(0x188)]);}async['execute'](){const _0x4c106b=a264_0x100cdf;try{const _0x99ec94=await job_utils_1['default'][_0x4c106b(0x19c)](masking_service_1[_0x4c106b(0x187)][_0x4c106b(0x1a0)]),_0x5acee7=await this[_0x4c106b(0x199)](_0x99ec94);for(const _0x96f435 of _0x5acee7){await this[_0x4c106b(0x18f)](_0x96f435);}}catch(_0x2cc2cc){this[_0x4c106b(0x1a1)][_0x4c106b(0x190)](_0x2cc2cc);}}async[a264_0x100cdf(0x199)](_0x8db68b){const _0x5f56f5=a264_0x100cdf,_0x507a18=[];for(const _0x4d46bb of _0x8db68b){const _0x37b77e=await this['getJobCompletedDate'](_0x4d46bb),_0x5290c8=_0x37b77e&&this[_0x5f56f5(0x196)](_0x37b77e);_0x5290c8&&_0x507a18['push'](_0x4d46bb);}return _0x507a18;}async[a264_0x100cdf(0x19e)](_0x26c2ed){const _0x29b4e7=a264_0x100cdf;var _0x151dd7;const _0x4a8e2c=path_1[_0x29b4e7(0x1a4)][_0x29b4e7(0x1a5)](masking_service_1[_0x29b4e7(0x187)][_0x29b4e7(0x1a0)],_0x26c2ed,job_1[_0x29b4e7(0x19d)]);if(!await utils_1[_0x29b4e7(0x1a2)][_0x29b4e7(0x182)](_0x4a8e2c))return null;const _0x5a381f=await(0x0,promises_1[_0x29b4e7(0x1a8)])(_0x4a8e2c,{'encoding':'utf-8'});return(_0x151dd7=JSON[_0x29b4e7(0x194)](_0x5a381f)['completedDate'])!==null&&_0x151dd7!==void 0x0?_0x151dd7:null;}['isExpiredDate'](_0x1cf1ef){const _0x5c9e4a=a264_0x100cdf;return new Date()[_0x5c9e4a(0x19f)]()-_0x1cf1ef>this['EXPIRED_RANGE_DATE'];}['deleteJob'](_0x1b1ae6){const _0x16d249=a264_0x100cdf,_0x756a28=path_1['default'][_0x16d249(0x1a5)](masking_service_1['MaskingService'][_0x16d249(0x1a0)],_0x1b1ae6);return(0x0,promises_1['rm'])(_0x756a28,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;