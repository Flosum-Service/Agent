const a264_0x1c0434=a264_0x4a06;(function(_0x365e9c,_0xb0d94a){const _0x5a7a8c=a264_0x4a06,_0x192057=_0x365e9c();while(!![]){try{const _0x1f8670=-parseInt(_0x5a7a8c(0x1e3))/0x1+parseInt(_0x5a7a8c(0x1ce))/0x2+parseInt(_0x5a7a8c(0x1cb))/0x3+-parseInt(_0x5a7a8c(0x1c8))/0x4+parseInt(_0x5a7a8c(0x1e6))/0x5+-parseInt(_0x5a7a8c(0x1d8))/0x6+parseInt(_0x5a7a8c(0x1e8))/0x7*(parseInt(_0x5a7a8c(0x1c3))/0x8);if(_0x1f8670===_0xb0d94a)break;else _0x192057['push'](_0x192057['shift']());}catch(_0x58c240){_0x192057['push'](_0x192057['shift']());}}}(a264_0x2613,0xbeaac));const a264_0x2ac17f=(function(){let _0x1965b1=!![];return function(_0x19ae65,_0x1a34cd){const _0x366d8e=_0x1965b1?function(){const _0xc9520e=a264_0x4a06;if(_0x1a34cd){const _0x24e82=_0x1a34cd[_0xc9520e(0x1d7)](_0x19ae65,arguments);return _0x1a34cd=null,_0x24e82;}}:function(){};return _0x1965b1=![],_0x366d8e;};}()),a264_0x1b07ed=a264_0x2ac17f(this,function(){const _0x15f7de=a264_0x4a06;return a264_0x1b07ed['toString']()[_0x15f7de(0x1e0)](_0x15f7de(0x1cf))['toString']()['constructor'](a264_0x1b07ed)[_0x15f7de(0x1e0)](_0x15f7de(0x1cf));});a264_0x1b07ed();function a264_0x4a06(_0x303a63,_0x193e2a){const _0x1761b7=a264_0x2613();return a264_0x4a06=function(_0x1b07ed,_0x2ac17f){_0x1b07ed=_0x1b07ed-0x1c0;let _0x26137b=_0x1761b7[_0x1b07ed];return _0x26137b;},a264_0x4a06(_0x303a63,_0x193e2a);}'use strict';var __importDefault=this&&this[a264_0x1c0434(0x1e2)]||function(_0x7f8687){const _0x55f4b1=a264_0x1c0434;return _0x7f8687&&_0x7f8687[_0x55f4b1(0x1c4)]?_0x7f8687:{'default':_0x7f8687};};Object[a264_0x1c0434(0x1e1)](exports,a264_0x1c0434(0x1c4),{'value':!![]}),exports[a264_0x1c0434(0x1d2)]=void 0x0;const promises_1=require('fs/promises'),core_1=require(a264_0x1c0434(0x1e4)),utils_1=require(a264_0x1c0434(0x1da)),job_1=require(a264_0x1c0434(0x1dd)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),masking_service_1=require(a264_0x1c0434(0x1d4)),path_1=__importDefault(require(a264_0x1c0434(0x1ca)));class DataMaskingRetentionPolicy{constructor(){const _0x7888d3=a264_0x1c0434;this[_0x7888d3(0x1c1)]=0x9a7ec800,this[_0x7888d3(0x1c0)]=new core_1['Logger'](DataMaskingRetentionPolicy[_0x7888d3(0x1d9)]);}async[a264_0x1c0434(0x1c2)](){const _0x4c1abe=a264_0x1c0434;try{const _0x4b051b=await job_utils_1['default']['getJobsIds'](masking_service_1[_0x4c1abe(0x1d1)][_0x4c1abe(0x1c7)]),_0x440f2c=await this['filterExpiredJobs'](_0x4b051b);for(const _0x3dc01b of _0x440f2c){await this['deleteJob'](_0x3dc01b);}}catch(_0xae5bc){this[_0x4c1abe(0x1c0)][_0x4c1abe(0x1db)](_0xae5bc);}}async[a264_0x1c0434(0x1de)](_0x1dfb9d){const _0x44e0e1=a264_0x1c0434,_0x29114a=[];for(const _0x59a2f2 of _0x1dfb9d){const _0x2f6f84=await this[_0x44e0e1(0x1e5)](_0x59a2f2),_0x306118=_0x2f6f84&&this[_0x44e0e1(0x1d0)](_0x2f6f84);_0x306118&&_0x29114a[_0x44e0e1(0x1c9)](_0x59a2f2);}return _0x29114a;}async['getJobCompletedDate'](_0x304c7d){const _0xd21238=a264_0x1c0434;var _0x1f3d11;const _0x337d64=path_1[_0xd21238(0x1cd)][_0xd21238(0x1c5)](masking_service_1[_0xd21238(0x1d1)][_0xd21238(0x1c7)],_0x304c7d,job_1[_0xd21238(0x1cc)]);if(!await utils_1[_0xd21238(0x1d5)][_0xd21238(0x1d3)](_0x337d64))return null;const _0x3689e4=await(0x0,promises_1[_0xd21238(0x1c6)])(_0x337d64,{'encoding':_0xd21238(0x1dc)});return(_0x1f3d11=JSON[_0xd21238(0x1df)](_0x3689e4)[_0xd21238(0x1d6)])!==null&&_0x1f3d11!==void 0x0?_0x1f3d11:null;}[a264_0x1c0434(0x1d0)](_0x2942a4){const _0x267245=a264_0x1c0434;return new Date()[_0x267245(0x1e7)]()-_0x2942a4>this[_0x267245(0x1c1)];}['deleteJob'](_0x233558){const _0x36939e=a264_0x1c0434,_0x16edc1=path_1[_0x36939e(0x1cd)][_0x36939e(0x1c5)](masking_service_1[_0x36939e(0x1d1)][_0x36939e(0x1c7)],_0x233558);return(0x0,promises_1['rm'])(_0x16edc1,{'recursive':!![],'force':!![]});}}exports[a264_0x1c0434(0x1d2)]=DataMaskingRetentionPolicy;function a264_0x2613(){const _0x233976=['logger','EXPIRED_RANGE_DATE','execute','16pAbiXq','__esModule','join','readFile','maskingFolderPath','1806136RlHISP','push','path','423366nXlkcl','JOB_LOG_STATE_FILENAME','default','2896988ofYWfT','(((.+)+)+)+$','isExpiredDate','MaskingService','DataMaskingRetentionPolicy','isExistsPath','../../data-masking/services/masking.service','FsUtils','completedDate','apply','9027282SIzprL','name','@flosum/utils','error','utf-8','../../../constants/job','filterExpiredJobs','parse','search','defineProperty','__importDefault','43941QXkvtz','../../../core','getJobCompletedDate','4118980xsQXpq','getTime','1286537phMtkD'];a264_0x2613=function(){return _0x233976;};return a264_0x2613();}