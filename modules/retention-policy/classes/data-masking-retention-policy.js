const a264_0x4f76ac=a264_0x165a;(function(_0x1b7d78,_0x2b56e2){const _0x1a6994=a264_0x165a,_0x1205ef=_0x1b7d78();while(!![]){try{const _0x3bb0bb=-parseInt(_0x1a6994(0xd4))/0x1*(parseInt(_0x1a6994(0xc6))/0x2)+-parseInt(_0x1a6994(0xcc))/0x3*(parseInt(_0x1a6994(0xc9))/0x4)+-parseInt(_0x1a6994(0xb7))/0x5+parseInt(_0x1a6994(0xc4))/0x6+-parseInt(_0x1a6994(0xbd))/0x7+parseInt(_0x1a6994(0xc8))/0x8+parseInt(_0x1a6994(0xca))/0x9;if(_0x3bb0bb===_0x2b56e2)break;else _0x1205ef['push'](_0x1205ef['shift']());}catch(_0x57b9de){_0x1205ef['push'](_0x1205ef['shift']());}}}(a264_0xe78f,0x833a9));const a264_0x4649a9=(function(){let _0x4cf42d=!![];return function(_0xafd921,_0x14ea94){const _0x4a4823=_0x4cf42d?function(){const _0x4466ef=a264_0x165a;if(_0x14ea94){const _0x3f9c4e=_0x14ea94[_0x4466ef(0xc3)](_0xafd921,arguments);return _0x14ea94=null,_0x3f9c4e;}}:function(){};return _0x4cf42d=![],_0x4a4823;};}()),a264_0x13f085=a264_0x4649a9(this,function(){const _0x34cd02=a264_0x165a;return a264_0x13f085[_0x34cd02(0xda)]()['search'](_0x34cd02(0xb8))['toString']()[_0x34cd02(0xbe)](a264_0x13f085)[_0x34cd02(0xb5)]('(((.+)+)+)+$');});a264_0x13f085();function a264_0x165a(_0x45caec,_0x21eb32){const _0x38604a=a264_0xe78f();return a264_0x165a=function(_0x13f085,_0x4649a9){_0x13f085=_0x13f085-0xb5;let _0xe78f23=_0x38604a[_0x13f085];return _0xe78f23;},a264_0x165a(_0x45caec,_0x21eb32);}'use strict';var __importDefault=this&&this[a264_0x4f76ac(0xcf)]||function(_0x57f809){return _0x57f809&&_0x57f809['__esModule']?_0x57f809:{'default':_0x57f809};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a264_0x4f76ac(0xbf)]=void 0x0;function a264_0xe78f(){const _0x24afa2=['utf-8','parse','default','../../data-masking/services/masking.service','515424HARFHU','constructor','DataMaskingRetentionPolicy','@flosum/utils','getJobCompletedDate','join','apply','2838510apOtSX','maskingFolderPath','111382dFksta','getTime','5012472bUUtaF','3892GprzDy','9399177yrMQMX','completedDate','1389HndsSW','EXPIRED_RANGE_DATE','FsUtils','__importDefault','name','filterExpiredJobs','logger','getJobsIds','1CocEpX','deleteJob','path','readFile','Logger','execute','toString','MaskingService','isExpiredDate','isExistsPath','search','push','5133310fMNgeU','(((.+)+)+)+$'];a264_0xe78f=function(){return _0x24afa2;};return a264_0xe78f();}const promises_1=require('fs/promises'),core_1=require('../../../core'),utils_1=require(a264_0x4f76ac(0xc0)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),masking_service_1=require(a264_0x4f76ac(0xbc)),path_1=__importDefault(require(a264_0x4f76ac(0xd6)));class DataMaskingRetentionPolicy{constructor(){const _0x2df37a=a264_0x4f76ac;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0x2df37a(0xd2)]=new core_1[(_0x2df37a(0xd8))](DataMaskingRetentionPolicy[_0x2df37a(0xd0)]);}async[a264_0x4f76ac(0xd9)](){const _0x4542c3=a264_0x4f76ac;try{const _0x10c313=await job_utils_1['default'][_0x4542c3(0xd3)](masking_service_1[_0x4542c3(0xdb)][_0x4542c3(0xc5)]),_0x58f880=await this[_0x4542c3(0xd1)](_0x10c313);for(const _0x4dd859 of _0x58f880){await this[_0x4542c3(0xd5)](_0x4dd859);}}catch(_0x4d00c5){this[_0x4542c3(0xd2)]['error'](_0x4d00c5);}}async[a264_0x4f76ac(0xd1)](_0x3b36f7){const _0x540ec1=a264_0x4f76ac,_0x48be76=[];for(const _0x5ccc54 of _0x3b36f7){const _0x3c6f2f=await this[_0x540ec1(0xc1)](_0x5ccc54),_0x1f324c=_0x3c6f2f&&this[_0x540ec1(0xdc)](_0x3c6f2f);_0x1f324c&&_0x48be76[_0x540ec1(0xb6)](_0x5ccc54);}return _0x48be76;}async[a264_0x4f76ac(0xc1)](_0x313d95){const _0x22b480=a264_0x4f76ac;var _0x28af5f;const _0x54ad79=path_1[_0x22b480(0xbb)]['join'](masking_service_1[_0x22b480(0xdb)][_0x22b480(0xc5)],_0x313d95,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x22b480(0xce)][_0x22b480(0xdd)](_0x54ad79))return null;const _0x595b35=await(0x0,promises_1[_0x22b480(0xd7)])(_0x54ad79,{'encoding':_0x22b480(0xb9)});return(_0x28af5f=JSON[_0x22b480(0xba)](_0x595b35)[_0x22b480(0xcb)])!==null&&_0x28af5f!==void 0x0?_0x28af5f:null;}[a264_0x4f76ac(0xdc)](_0x123ed5){const _0x5d255a=a264_0x4f76ac;return new Date()[_0x5d255a(0xc7)]()-_0x123ed5>this[_0x5d255a(0xcd)];}[a264_0x4f76ac(0xd5)](_0x19dc91){const _0x217d79=a264_0x4f76ac,_0x48da28=path_1[_0x217d79(0xbb)][_0x217d79(0xc2)](masking_service_1['MaskingService'][_0x217d79(0xc5)],_0x19dc91);return(0x0,promises_1['rm'])(_0x48da28,{'recursive':!![],'force':!![]});}}exports[a264_0x4f76ac(0xbf)]=DataMaskingRetentionPolicy;