const a264_0x30fb54=a264_0x3c75;(function(_0x3e7543,_0x2542c3){const _0x5487e3=a264_0x3c75,_0x16d397=_0x3e7543();while(!![]){try{const _0x170227=parseInt(_0x5487e3(0x105))/0x1+-parseInt(_0x5487e3(0x108))/0x2+-parseInt(_0x5487e3(0x109))/0x3+parseInt(_0x5487e3(0x121))/0x4*(parseInt(_0x5487e3(0x10f))/0x5)+parseInt(_0x5487e3(0x115))/0x6+-parseInt(_0x5487e3(0x119))/0x7*(parseInt(_0x5487e3(0xff))/0x8)+parseInt(_0x5487e3(0x112))/0x9;if(_0x170227===_0x2542c3)break;else _0x16d397['push'](_0x16d397['shift']());}catch(_0x5148ab){_0x16d397['push'](_0x16d397['shift']());}}}(a264_0x59ed,0xe7708));const a264_0x2bf232=(function(){let _0xa77325=!![];return function(_0x49eb06,_0x136327){const _0x4b0694=_0xa77325?function(){const _0x19afc9=a264_0x3c75;if(_0x136327){const _0x7745b9=_0x136327[_0x19afc9(0x111)](_0x49eb06,arguments);return _0x136327=null,_0x7745b9;}}:function(){};return _0xa77325=![],_0x4b0694;};}()),a264_0x56f6db=a264_0x2bf232(this,function(){const _0x41a577=a264_0x3c75;return a264_0x56f6db[_0x41a577(0x118)]()[_0x41a577(0x107)](_0x41a577(0x110))['toString']()[_0x41a577(0x127)](a264_0x56f6db)[_0x41a577(0x107)](_0x41a577(0x110));});a264_0x56f6db();'use strict';var __importDefault=this&&this[a264_0x30fb54(0x124)]||function(_0x4afc28){return _0x4afc28&&_0x4afc28['__esModule']?_0x4afc28:{'default':_0x4afc28};};Object[a264_0x30fb54(0x10b)](exports,'__esModule',{'value':!![]}),exports['DataMaskingRetentionPolicy']=void 0x0;const promises_1=require(a264_0x30fb54(0x100)),core_1=require(a264_0x30fb54(0x122)),utils_1=require(a264_0x30fb54(0x116)),job_1=require(a264_0x30fb54(0x104)),job_utils_1=__importDefault(require(a264_0x30fb54(0x11a))),masking_service_1=require(a264_0x30fb54(0x114)),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0x857d0=a264_0x30fb54;this[_0x857d0(0x10d)]=0x9a7ec800,this[_0x857d0(0x11d)]=new core_1[(_0x857d0(0x125))](DataMaskingRetentionPolicy[_0x857d0(0x120)]);}async[a264_0x30fb54(0x123)](){const _0x4c163c=a264_0x30fb54;try{const _0x1c1a16=await job_utils_1[_0x4c163c(0x11f)][_0x4c163c(0x103)](masking_service_1[_0x4c163c(0x129)][_0x4c163c(0x102)]),_0x56fc2d=await this[_0x4c163c(0x10e)](_0x1c1a16);for(const _0x14d55b of _0x56fc2d){await this['deleteJob'](_0x14d55b);}}catch(_0x5b72e7){this[_0x4c163c(0x11d)][_0x4c163c(0x126)](_0x5b72e7);}}async[a264_0x30fb54(0x10e)](_0x193a7c){const _0x53a8c7=a264_0x30fb54,_0x962d7e=[];for(const _0x18563b of _0x193a7c){const _0x26ca48=await this['getJobCompletedDate'](_0x18563b),_0x1ff4d3=_0x26ca48&&this[_0x53a8c7(0x11c)](_0x26ca48);_0x1ff4d3&&_0x962d7e['push'](_0x18563b);}return _0x962d7e;}async[a264_0x30fb54(0x10a)](_0x4eab27){const _0xcfd38a=a264_0x30fb54;var _0x115c8c;const _0xfc1490=path_1[_0xcfd38a(0x11f)][_0xcfd38a(0x101)](masking_service_1[_0xcfd38a(0x129)][_0xcfd38a(0x102)],_0x4eab27,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0xcfd38a(0x113)][_0xcfd38a(0x11b)](_0xfc1490))return null;const _0x286a53=await(0x0,promises_1['readFile'])(_0xfc1490,{'encoding':'utf-8'});return(_0x115c8c=JSON[_0xcfd38a(0x10c)](_0x286a53)[_0xcfd38a(0x11e)])!==null&&_0x115c8c!==void 0x0?_0x115c8c:null;}[a264_0x30fb54(0x11c)](_0x4008dc){const _0x43b206=a264_0x30fb54;return new Date()[_0x43b206(0x117)]()-_0x4008dc>this['EXPIRED_RANGE_DATE'];}[a264_0x30fb54(0x106)](_0x472b7e){const _0x39cb2f=a264_0x30fb54,_0x5848ba=path_1[_0x39cb2f(0x11f)]['join'](masking_service_1[_0x39cb2f(0x129)][_0x39cb2f(0x102)],_0x472b7e);return(0x0,promises_1['rm'])(_0x5848ba,{'recursive':!![],'force':!![]});}}function a264_0x3c75(_0x3bca43,_0x5c9023){const _0x4f7f1e=a264_0x59ed();return a264_0x3c75=function(_0x56f6db,_0x2bf232){_0x56f6db=_0x56f6db-0xff;let _0x59edf0=_0x4f7f1e[_0x56f6db];return _0x59edf0;},a264_0x3c75(_0x3bca43,_0x5c9023);}exports[a264_0x30fb54(0x128)]=DataMaskingRetentionPolicy;function a264_0x59ed(){const _0x334f58=['FsUtils','../../data-masking/services/masking.service','8486238ZrCISZ','@flosum/utils','getTime','toString','11743018ySFrzn','../../shared/utils/job.utils','isExistsPath','isExpiredDate','logger','completedDate','default','name','9552btCLRX','../../../core','execute','__importDefault','Logger','error','constructor','DataMaskingRetentionPolicy','MaskingService','8TXWgJA','fs/promises','join','maskingFolderPath','getJobsIds','../../../constants/job','1504553Hbmmgu','deleteJob','search','2176296CpaBiA','2668584wJoeCO','getJobCompletedDate','defineProperty','parse','EXPIRED_RANGE_DATE','filterExpiredJobs','2910cqVdpd','(((.+)+)+)+$','apply','2650356PrXxVN'];a264_0x59ed=function(){return _0x334f58;};return a264_0x59ed();}