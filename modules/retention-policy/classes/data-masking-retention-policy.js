function a264_0x45a7(_0x51c126,_0x5aad89){const _0x5ee0ea=a264_0x1b5f();return a264_0x45a7=function(_0x24bcfb,_0x1d0e5b){_0x24bcfb=_0x24bcfb-0x19e;let _0x1b5fae=_0x5ee0ea[_0x24bcfb];return _0x1b5fae;},a264_0x45a7(_0x51c126,_0x5aad89);}const a264_0x46b21b=a264_0x45a7;function a264_0x1b5f(){const _0x1efa2e=['utf-8','push','../../data-masking/services/masking.service','readFile','1778928xPwnPX','4597105qJPcHS','2FtvwMK','filterExpiredJobs','(((.+)+)+)+$','5567292VsADPG','DataMaskingRetentionPolicy','FsUtils','constructor','42BhBuCa','846120koIVfr','@flosum/utils','deleteJob','getTime','987045JfqZsX','join','name','toString','218877uWrrqM','error','apply','../../../core','completedDate','MaskingService','10DTOIhi','logger','../../shared/utils/job.utils','JOB_LOG_STATE_FILENAME','default','__esModule','isExpiredDate','17068311JtRucO','getJobsIds','maskingFolderPath','parse','Logger','__importDefault','search','execute','getJobCompletedDate','defineProperty'];a264_0x1b5f=function(){return _0x1efa2e;};return a264_0x1b5f();}(function(_0x5bac15,_0x5ad769){const _0x315157=a264_0x45a7,_0x4b4a3e=_0x5bac15();while(!![]){try{const _0x3b4d19=parseInt(_0x315157(0x1af))/0x1*(-parseInt(_0x315157(0x19f))/0x2)+-parseInt(_0x315157(0x1ab))/0x3+parseInt(_0x315157(0x1ca))/0x4+parseInt(_0x315157(0x19e))/0x5+parseInt(_0x315157(0x1a2))/0x6+-parseInt(_0x315157(0x1a6))/0x7*(-parseInt(_0x315157(0x1a7))/0x8)+-parseInt(_0x315157(0x1bc))/0x9*(parseInt(_0x315157(0x1b5))/0xa);if(_0x3b4d19===_0x5ad769)break;else _0x4b4a3e['push'](_0x4b4a3e['shift']());}catch(_0x24c79e){_0x4b4a3e['push'](_0x4b4a3e['shift']());}}}(a264_0x1b5f,0x75bce));const a264_0x1d0e5b=(function(){let _0x528a30=!![];return function(_0x3d6000,_0xd2c394){const _0x48f1cb=_0x528a30?function(){const _0x13da15=a264_0x45a7;if(_0xd2c394){const _0x492964=_0xd2c394[_0x13da15(0x1b1)](_0x3d6000,arguments);return _0xd2c394=null,_0x492964;}}:function(){};return _0x528a30=![],_0x48f1cb;};}()),a264_0x24bcfb=a264_0x1d0e5b(this,function(){const _0x3a07d3=a264_0x45a7;return a264_0x24bcfb['toString']()[_0x3a07d3(0x1c2)](_0x3a07d3(0x1a1))[_0x3a07d3(0x1ae)]()[_0x3a07d3(0x1a5)](a264_0x24bcfb)['search'](_0x3a07d3(0x1a1));});a264_0x24bcfb();'use strict';var __importDefault=this&&this[a264_0x46b21b(0x1c1)]||function(_0x34fa58){const _0xca8b23=a264_0x46b21b;return _0x34fa58&&_0x34fa58[_0xca8b23(0x1ba)]?_0x34fa58:{'default':_0x34fa58};};Object[a264_0x46b21b(0x1c5)](exports,a264_0x46b21b(0x1ba),{'value':!![]}),exports[a264_0x46b21b(0x1a3)]=void 0x0;const promises_1=require('fs/promises'),core_1=require(a264_0x46b21b(0x1b2)),utils_1=require(a264_0x46b21b(0x1a8)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a264_0x46b21b(0x1b7))),masking_service_1=require(a264_0x46b21b(0x1c8)),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0x16e356=a264_0x46b21b;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0x16e356(0x1b6)]=new core_1[(_0x16e356(0x1c0))](DataMaskingRetentionPolicy[_0x16e356(0x1ad)]);}async[a264_0x46b21b(0x1c3)](){const _0x48dfef=a264_0x46b21b;try{const _0x1d46fc=await job_utils_1[_0x48dfef(0x1b9)][_0x48dfef(0x1bd)](masking_service_1[_0x48dfef(0x1b4)]['maskingFolderPath']),_0x4fcbc4=await this['filterExpiredJobs'](_0x1d46fc);for(const _0x4eaf78 of _0x4fcbc4){await this[_0x48dfef(0x1a9)](_0x4eaf78);}}catch(_0x465547){this['logger'][_0x48dfef(0x1b0)](_0x465547);}}async[a264_0x46b21b(0x1a0)](_0x23c087){const _0x40df41=a264_0x46b21b,_0x4f285c=[];for(const _0x3d40d8 of _0x23c087){const _0xc57e77=await this[_0x40df41(0x1c4)](_0x3d40d8),_0x35997e=_0xc57e77&&this[_0x40df41(0x1bb)](_0xc57e77);_0x35997e&&_0x4f285c[_0x40df41(0x1c7)](_0x3d40d8);}return _0x4f285c;}async[a264_0x46b21b(0x1c4)](_0x375332){const _0x18ce2c=a264_0x46b21b;var _0xac3a6b;const _0x202268=path_1['default'][_0x18ce2c(0x1ac)](masking_service_1['MaskingService'][_0x18ce2c(0x1be)],_0x375332,job_1[_0x18ce2c(0x1b8)]);if(!await utils_1[_0x18ce2c(0x1a4)]['isExistsPath'](_0x202268))return null;const _0x1e507d=await(0x0,promises_1[_0x18ce2c(0x1c9)])(_0x202268,{'encoding':_0x18ce2c(0x1c6)});return(_0xac3a6b=JSON[_0x18ce2c(0x1bf)](_0x1e507d)[_0x18ce2c(0x1b3)])!==null&&_0xac3a6b!==void 0x0?_0xac3a6b:null;}[a264_0x46b21b(0x1bb)](_0x26a678){const _0x235416=a264_0x46b21b;return new Date()[_0x235416(0x1aa)]()-_0x26a678>this['EXPIRED_RANGE_DATE'];}[a264_0x46b21b(0x1a9)](_0x323e24){const _0x39b01d=a264_0x46b21b,_0x37852b=path_1[_0x39b01d(0x1b9)][_0x39b01d(0x1ac)](masking_service_1['MaskingService']['maskingFolderPath'],_0x323e24);return(0x0,promises_1['rm'])(_0x37852b,{'recursive':!![],'force':!![]});}}exports[a264_0x46b21b(0x1a3)]=DataMaskingRetentionPolicy;