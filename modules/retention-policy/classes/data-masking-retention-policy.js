function a264_0x5c3e(_0x11ec14,_0x271106){const _0x4ee75e=a264_0x4cbc();return a264_0x5c3e=function(_0x20b02c,_0x2f3a28){_0x20b02c=_0x20b02c-0x183;let _0x4cbc08=_0x4ee75e[_0x20b02c];return _0x4cbc08;},a264_0x5c3e(_0x11ec14,_0x271106);}const a264_0x59240e=a264_0x5c3e;(function(_0x44cdeb,_0x15f397){const _0x3f7dbb=a264_0x5c3e,_0x48cdd3=_0x44cdeb();while(!![]){try{const _0x310b31=parseInt(_0x3f7dbb(0x18c))/0x1*(parseInt(_0x3f7dbb(0x1a2))/0x2)+parseInt(_0x3f7dbb(0x1a5))/0x3+-parseInt(_0x3f7dbb(0x189))/0x4+-parseInt(_0x3f7dbb(0x199))/0x5*(parseInt(_0x3f7dbb(0x194))/0x6)+-parseInt(_0x3f7dbb(0x1a7))/0x7+-parseInt(_0x3f7dbb(0x1a8))/0x8*(-parseInt(_0x3f7dbb(0x195))/0x9)+-parseInt(_0x3f7dbb(0x184))/0xa*(parseInt(_0x3f7dbb(0x1a3))/0xb);if(_0x310b31===_0x15f397)break;else _0x48cdd3['push'](_0x48cdd3['shift']());}catch(_0x531649){_0x48cdd3['push'](_0x48cdd3['shift']());}}}(a264_0x4cbc,0xa9b1d));const a264_0x2f3a28=(function(){let _0x1eb6c2=!![];return function(_0x3a8d55,_0x26289e){const _0x3fcf19=_0x1eb6c2?function(){if(_0x26289e){const _0x388d02=_0x26289e['apply'](_0x3a8d55,arguments);return _0x26289e=null,_0x388d02;}}:function(){};return _0x1eb6c2=![],_0x3fcf19;};}()),a264_0x20b02c=a264_0x2f3a28(this,function(){const _0x2daee5=a264_0x5c3e;return a264_0x20b02c['toString']()[_0x2daee5(0x190)](_0x2daee5(0x1a0))['toString']()[_0x2daee5(0x183)](a264_0x20b02c)[_0x2daee5(0x190)](_0x2daee5(0x1a0));});a264_0x20b02c();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3bed30){const _0x46c6ea=a264_0x5c3e;return _0x3bed30&&_0x3bed30[_0x46c6ea(0x18f)]?_0x3bed30:{'default':_0x3bed30};};Object[a264_0x59240e(0x18b)](exports,a264_0x59240e(0x18f),{'value':!![]}),exports[a264_0x59240e(0x187)]=void 0x0;const promises_1=require('fs/promises'),core_1=require(a264_0x59240e(0x19f)),utils_1=require(a264_0x59240e(0x18d)),job_1=require('../../../constants/job'),job_utils_1=__importDefault(require(a264_0x59240e(0x192))),masking_service_1=require('../../data-masking/services/masking.service'),path_1=__importDefault(require(a264_0x59240e(0x186)));function a264_0x4cbc(){const _0x9c663a=['error','5RPLqum','completedDate','isExpiredDate','name','deleteJob','getTime','../../../core','(((.+)+)+)+$','filterExpiredJobs','6iaTpUz','11MfzuMi','join','2859531uQgyeN','EXPIRED_RANGE_DATE','4884243xlSZyy','24lwUmUd','getJobCompletedDate','MaskingService','parse','constructor','10366870LgSOgX','FsUtils','path','DataMaskingRetentionPolicy','utf-8','2570092hqPaHh','isExistsPath','defineProperty','307871nEmpbs','@flosum/utils','default','__esModule','search','maskingFolderPath','../../shared/utils/job.utils','push','325968oVvSBO','3748698OPjVlN','readFile','getJobsIds'];a264_0x4cbc=function(){return _0x9c663a;};return a264_0x4cbc();}class DataMaskingRetentionPolicy{constructor(){const _0x29d388=a264_0x59240e;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this['logger']=new core_1['Logger'](DataMaskingRetentionPolicy[_0x29d388(0x19c)]);}async['execute'](){const _0x18639b=a264_0x59240e;try{const _0x542e75=await job_utils_1[_0x18639b(0x18e)][_0x18639b(0x197)](masking_service_1[_0x18639b(0x1aa)][_0x18639b(0x191)]),_0x26e688=await this[_0x18639b(0x1a1)](_0x542e75);for(const _0x53d82c of _0x26e688){await this[_0x18639b(0x19d)](_0x53d82c);}}catch(_0x3b7a84){this['logger'][_0x18639b(0x198)](_0x3b7a84);}}async[a264_0x59240e(0x1a1)](_0x4dbc4b){const _0x2b678c=a264_0x59240e,_0x5e7c1f=[];for(const _0x38f834 of _0x4dbc4b){const _0x22b04c=await this[_0x2b678c(0x1a9)](_0x38f834),_0x34b05a=_0x22b04c&&this['isExpiredDate'](_0x22b04c);_0x34b05a&&_0x5e7c1f[_0x2b678c(0x193)](_0x38f834);}return _0x5e7c1f;}async[a264_0x59240e(0x1a9)](_0x326d62){const _0x3649ae=a264_0x59240e;var _0x2a1e55;const _0x18f713=path_1['default']['join'](masking_service_1['MaskingService']['maskingFolderPath'],_0x326d62,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x3649ae(0x185)][_0x3649ae(0x18a)](_0x18f713))return null;const _0xad7989=await(0x0,promises_1[_0x3649ae(0x196)])(_0x18f713,{'encoding':_0x3649ae(0x188)});return(_0x2a1e55=JSON[_0x3649ae(0x1ab)](_0xad7989)[_0x3649ae(0x19a)])!==null&&_0x2a1e55!==void 0x0?_0x2a1e55:null;}[a264_0x59240e(0x19b)](_0x4044db){const _0x4f7721=a264_0x59240e;return new Date()[_0x4f7721(0x19e)]()-_0x4044db>this[_0x4f7721(0x1a6)];}[a264_0x59240e(0x19d)](_0xeb1f79){const _0x3e23e5=a264_0x59240e,_0x3fb3d0=path_1[_0x3e23e5(0x18e)][_0x3e23e5(0x1a4)](masking_service_1['MaskingService'][_0x3e23e5(0x191)],_0xeb1f79);return(0x0,promises_1['rm'])(_0x3fb3d0,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;