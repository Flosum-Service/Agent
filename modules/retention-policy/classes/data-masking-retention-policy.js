const a308_0x430734=a308_0x3831;(function(_0x3aa3ef,_0x56f5e0){const _0x11314a=a308_0x3831,_0x439564=_0x3aa3ef();while(!![]){try{const _0x1138c7=parseInt(_0x11314a(0x202))/0x1+-parseInt(_0x11314a(0x1e2))/0x2*(-parseInt(_0x11314a(0x1f3))/0x3)+-parseInt(_0x11314a(0x1fb))/0x4*(parseInt(_0x11314a(0x1ef))/0x5)+parseInt(_0x11314a(0x20f))/0x6*(-parseInt(_0x11314a(0x1fc))/0x7)+parseInt(_0x11314a(0x1ed))/0x8*(-parseInt(_0x11314a(0x1eb))/0x9)+-parseInt(_0x11314a(0x20c))/0xa*(parseInt(_0x11314a(0x1ea))/0xb)+parseInt(_0x11314a(0x1f1))/0xc*(parseInt(_0x11314a(0x1f7))/0xd);if(_0x1138c7===_0x56f5e0)break;else _0x439564['push'](_0x439564['shift']());}catch(_0x2f8651){_0x439564['push'](_0x439564['shift']());}}}(a308_0x42cd,0x8ad9c));function a308_0x3831(_0xe2dd1d,_0x1ae5b5){const _0xa3c279=a308_0x42cd();return a308_0x3831=function(_0x33a22d,_0x2171dc){_0x33a22d=_0x33a22d-0x1e2;let _0x42cd4a=_0xa3c279[_0x33a22d];return _0x42cd4a;},a308_0x3831(_0xe2dd1d,_0x1ae5b5);}const a308_0x2171dc=(function(){let _0xeba259=!![];return function(_0x1e008c,_0x11a8be){const _0x214f2c=_0xeba259?function(){const _0x41889a=a308_0x3831;if(_0x11a8be){const _0x3bf80a=_0x11a8be[_0x41889a(0x1fe)](_0x1e008c,arguments);return _0x11a8be=null,_0x3bf80a;}}:function(){};return _0xeba259=![],_0x214f2c;};}()),a308_0x33a22d=a308_0x2171dc(this,function(){const _0x310cc4=a308_0x3831;return a308_0x33a22d['toString']()['search'](_0x310cc4(0x200))[_0x310cc4(0x1ee)]()['constructor'](a308_0x33a22d)[_0x310cc4(0x1f6)](_0x310cc4(0x200));});a308_0x33a22d();'use strict';var __importDefault=this&&this[a308_0x430734(0x1e4)]||function(_0x50e48f){const _0x4367c4=a308_0x430734;return _0x50e48f&&_0x50e48f[_0x4367c4(0x1e6)]?_0x50e48f:{'default':_0x50e48f};};Object[a308_0x430734(0x205)](exports,a308_0x430734(0x1e6),{'value':!![]}),exports[a308_0x430734(0x1f2)]=void 0x0;const promises_1=require('fs/promises'),core_1=require(a308_0x430734(0x20e)),utils_1=require(a308_0x430734(0x209)),job_1=require(a308_0x430734(0x20b)),job_utils_1=__importDefault(require(a308_0x430734(0x1e8))),masking_service_1=require(a308_0x430734(0x1e3)),path_1=__importDefault(require(a308_0x430734(0x1e5)));class DataMaskingRetentionPolicy{constructor(){const _0x4f8780=a308_0x430734;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0x4f8780(0x20d)]=new core_1[(_0x4f8780(0x1e9))](DataMaskingRetentionPolicy[_0x4f8780(0x207)]);}async[a308_0x430734(0x1fa)](){const _0x3d99c4=a308_0x430734;try{const _0x619d3d=await job_utils_1[_0x3d99c4(0x210)][_0x3d99c4(0x208)](masking_service_1[_0x3d99c4(0x1ff)]['maskingFolderPath']),_0x4514c7=await this['filterExpiredJobs'](_0x619d3d);for(const _0x3c2549 of _0x4514c7){await this[_0x3d99c4(0x1f8)](_0x3c2549);}}catch(_0x527f0a){this[_0x3d99c4(0x20d)]['error'](_0x527f0a);}}async[a308_0x430734(0x206)](_0x24f4ed){const _0x591399=a308_0x430734,_0x146d6b=[];for(const _0x4bafbd of _0x24f4ed){const _0x5707fd=await this[_0x591399(0x203)](_0x4bafbd),_0xadf07b=_0x5707fd&&this[_0x591399(0x1fd)](_0x5707fd);_0xadf07b&&_0x146d6b['push'](_0x4bafbd);}return _0x146d6b;}async['getJobCompletedDate'](_0x13b74c){const _0x5be106=a308_0x430734;var _0x4b9219;const _0x76eba8=path_1[_0x5be106(0x210)][_0x5be106(0x20a)](masking_service_1[_0x5be106(0x1ff)][_0x5be106(0x1f5)],_0x13b74c,job_1[_0x5be106(0x1f0)]);if(!await utils_1[_0x5be106(0x1ec)][_0x5be106(0x1f4)](_0x76eba8))return null;const _0x4d1b7d=await(0x0,promises_1[_0x5be106(0x201)])(_0x76eba8,{'encoding':_0x5be106(0x204)});return(_0x4b9219=JSON[_0x5be106(0x1e7)](_0x4d1b7d)['completedDate'])!==null&&_0x4b9219!==void 0x0?_0x4b9219:null;}[a308_0x430734(0x1fd)](_0x54f134){const _0x1d64db=a308_0x430734;return new Date()['getTime']()-_0x54f134>this[_0x1d64db(0x1f9)];}[a308_0x430734(0x1f8)](_0x4520ae){const _0x2b35c9=a308_0x430734,_0x494137=path_1[_0x2b35c9(0x210)][_0x2b35c9(0x20a)](masking_service_1['MaskingService'][_0x2b35c9(0x1f5)],_0x4520ae);return(0x0,promises_1['rm'])(_0x494137,{'recursive':!![],'force':!![]});}}function a308_0x42cd(){const _0x400e5a=['2033634opBnNx','default','256GZVmNh','../../data-masking/services/masking.service','__importDefault','path','__esModule','parse','../../shared/utils/job.utils','Logger','11583638GBigpf','582822xStfKP','FsUtils','104HnFtWP','toString','15Ucwyps','JOB_LOG_STATE_FILENAME','1155516hlSrkP','DataMaskingRetentionPolicy','3684rlHbgi','isExistsPath','maskingFolderPath','search','312YHizPH','deleteJob','EXPIRED_RANGE_DATE','execute','499712qicTXn','7ZOlhwf','isExpiredDate','apply','MaskingService','(((.+)+)+)+$','readFile','709151lyqbhX','getJobCompletedDate','utf-8','defineProperty','filterExpiredJobs','name','getJobsIds','@flosum/utils','join','../../../constants/job','10zCxWpO','logger','../../../core'];a308_0x42cd=function(){return _0x400e5a;};return a308_0x42cd();}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;