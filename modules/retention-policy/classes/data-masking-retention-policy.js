const a308_0x24fc46=a308_0x8014;(function(_0x5310e0,_0x3a9e5b){const _0x128957=a308_0x8014,_0x3df636=_0x5310e0();while(!![]){try{const _0x5c518d=-parseInt(_0x128957(0x9b))/0x1+parseInt(_0x128957(0xaa))/0x2+-parseInt(_0x128957(0xa6))/0x3*(parseInt(_0x128957(0x96))/0x4)+parseInt(_0x128957(0xb7))/0x5+parseInt(_0x128957(0x95))/0x6+-parseInt(_0x128957(0xa7))/0x7+parseInt(_0x128957(0xba))/0x8*(-parseInt(_0x128957(0xbb))/0x9);if(_0x5c518d===_0x3a9e5b)break;else _0x3df636['push'](_0x3df636['shift']());}catch(_0x283284){_0x3df636['push'](_0x3df636['shift']());}}}(a308_0x5882,0xc82d6));const a308_0x1511ab=(function(){let _0x1083ad=!![];return function(_0x4eae9d,_0x466662){const _0x1c03ce=_0x1083ad?function(){const _0x48a3af=a308_0x8014;if(_0x466662){const _0x5394fd=_0x466662[_0x48a3af(0xbc)](_0x4eae9d,arguments);return _0x466662=null,_0x5394fd;}}:function(){};return _0x1083ad=![],_0x1c03ce;};}()),a308_0x25aa43=a308_0x1511ab(this,function(){const _0x4513ad=a308_0x8014;return a308_0x25aa43['toString']()['search'](_0x4513ad(0x9d))[_0x4513ad(0xab)]()[_0x4513ad(0xb8)](a308_0x25aa43)[_0x4513ad(0xb2)]('(((.+)+)+)+$');});function a308_0x5882(){const _0x58c3f8=['796VXbDAO','getTime','path','isExistsPath','EXPIRED_RANGE_DATE','1048322fOsPnn','__importDefault','(((.+)+)+)+$','name','../../../core','@flosum/utils','default','maskingFolderPath','../../../constants/job','push','__esModule','5361iyytLe','6122151FuhpzH','join','logger','3135476uvgPJJ','toString','fs/promises','error','MaskingService','utf-8','deleteJob','readFile','search','getJobCompletedDate','filterExpiredJobs','completedDate','FsUtils','7649305AIZxHT','constructor','parse','336uATHzb','30438iGLjxw','apply','../../shared/utils/job.utils','../../data-masking/services/masking.service','getJobsIds','Logger','isExpiredDate','857394hVuqPZ'];a308_0x5882=function(){return _0x58c3f8;};return a308_0x5882();}function a308_0x8014(_0x5916af,_0x54cbda){const _0x303930=a308_0x5882();return a308_0x8014=function(_0x25aa43,_0x1511ab){_0x25aa43=_0x25aa43-0x94;let _0x58829c=_0x303930[_0x25aa43];return _0x58829c;},a308_0x8014(_0x5916af,_0x54cbda);}a308_0x25aa43();'use strict';var __importDefault=this&&this[a308_0x24fc46(0x9c)]||function(_0x50f687){return _0x50f687&&_0x50f687['__esModule']?_0x50f687:{'default':_0x50f687};};Object['defineProperty'](exports,a308_0x24fc46(0xa5),{'value':!![]}),exports['DataMaskingRetentionPolicy']=void 0x0;const promises_1=require(a308_0x24fc46(0xac)),core_1=require(a308_0x24fc46(0x9f)),utils_1=require(a308_0x24fc46(0xa0)),job_1=require(a308_0x24fc46(0xa3)),job_utils_1=__importDefault(require(a308_0x24fc46(0xbd))),masking_service_1=require(a308_0x24fc46(0xbe)),path_1=__importDefault(require(a308_0x24fc46(0x98)));class DataMaskingRetentionPolicy{constructor(){const _0x3655c5=a308_0x24fc46;this[_0x3655c5(0x9a)]=0x9a7ec800,this[_0x3655c5(0xa9)]=new core_1[(_0x3655c5(0xc0))](DataMaskingRetentionPolicy[_0x3655c5(0x9e)]);}async['execute'](){const _0x507017=a308_0x24fc46;try{const _0x23a2c8=await job_utils_1[_0x507017(0xa1)][_0x507017(0xbf)](masking_service_1[_0x507017(0xae)][_0x507017(0xa2)]),_0x5aaf9e=await this[_0x507017(0xb4)](_0x23a2c8);for(const _0x149d13 of _0x5aaf9e){await this[_0x507017(0xb0)](_0x149d13);}}catch(_0x222662){this[_0x507017(0xa9)][_0x507017(0xad)](_0x222662);}}async['filterExpiredJobs'](_0x4cd7a4){const _0x1a70c6=a308_0x24fc46,_0x1c2b91=[];for(const _0x4c10d9 of _0x4cd7a4){const _0x5e3796=await this[_0x1a70c6(0xb3)](_0x4c10d9),_0x489e53=_0x5e3796&&this[_0x1a70c6(0x94)](_0x5e3796);_0x489e53&&_0x1c2b91[_0x1a70c6(0xa4)](_0x4c10d9);}return _0x1c2b91;}async[a308_0x24fc46(0xb3)](_0x507a40){const _0x2a9eef=a308_0x24fc46;var _0x175368;const _0x25d482=path_1[_0x2a9eef(0xa1)][_0x2a9eef(0xa8)](masking_service_1[_0x2a9eef(0xae)][_0x2a9eef(0xa2)],_0x507a40,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x2a9eef(0xb6)][_0x2a9eef(0x99)](_0x25d482))return null;const _0x937404=await(0x0,promises_1[_0x2a9eef(0xb1)])(_0x25d482,{'encoding':_0x2a9eef(0xaf)});return(_0x175368=JSON[_0x2a9eef(0xb9)](_0x937404)[_0x2a9eef(0xb5)])!==null&&_0x175368!==void 0x0?_0x175368:null;}[a308_0x24fc46(0x94)](_0x30cd4b){const _0x41658c=a308_0x24fc46;return new Date()[_0x41658c(0x97)]()-_0x30cd4b>this[_0x41658c(0x9a)];}[a308_0x24fc46(0xb0)](_0x2fe38a){const _0x8a240d=a308_0x24fc46,_0x152a8e=path_1[_0x8a240d(0xa1)][_0x8a240d(0xa8)](masking_service_1['MaskingService'][_0x8a240d(0xa2)],_0x2fe38a);return(0x0,promises_1['rm'])(_0x152a8e,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;