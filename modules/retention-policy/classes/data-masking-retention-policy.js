const a306_0x1bcf84=a306_0x5382;(function(_0x53e0d0,_0x21795d){const _0x11ba68=a306_0x5382,_0x40d481=_0x53e0d0();while(!![]){try{const _0x37ca12=-parseInt(_0x11ba68(0x1fd))/0x1+parseInt(_0x11ba68(0x1fe))/0x2*(parseInt(_0x11ba68(0x209))/0x3)+-parseInt(_0x11ba68(0x1f6))/0x4+parseInt(_0x11ba68(0x1ed))/0x5*(parseInt(_0x11ba68(0x20c))/0x6)+-parseInt(_0x11ba68(0x20f))/0x7*(-parseInt(_0x11ba68(0x215))/0x8)+parseInt(_0x11ba68(0x1ee))/0x9*(parseInt(_0x11ba68(0x204))/0xa)+-parseInt(_0x11ba68(0x1f1))/0xb*(parseInt(_0x11ba68(0x1f5))/0xc);if(_0x37ca12===_0x21795d)break;else _0x40d481['push'](_0x40d481['shift']());}catch(_0x14cf12){_0x40d481['push'](_0x40d481['shift']());}}}(a306_0x4ef3,0x7af77));const a306_0x2d3ceb=(function(){let _0x4b3f58=!![];return function(_0x3cbe1b,_0x4713b7){const _0x5659f7=_0x4b3f58?function(){const _0x2fd01f=a306_0x5382;if(_0x4713b7){const _0x3013e6=_0x4713b7[_0x2fd01f(0x200)](_0x3cbe1b,arguments);return _0x4713b7=null,_0x3013e6;}}:function(){};return _0x4b3f58=![],_0x5659f7;};}()),a306_0x4476e3=a306_0x2d3ceb(this,function(){const _0x2dabe8=a306_0x5382;return a306_0x4476e3[_0x2dabe8(0x1f0)]()[_0x2dabe8(0x20d)]('(((.+)+)+)+$')['toString']()['constructor'](a306_0x4476e3)[_0x2dabe8(0x20d)](_0x2dabe8(0x1f2));});a306_0x4476e3();'use strict';var __importDefault=this&&this[a306_0x1bcf84(0x211)]||function(_0x1f1833){const _0xea91ee=a306_0x1bcf84;return _0x1f1833&&_0x1f1833[_0xea91ee(0x1f8)]?_0x1f1833:{'default':_0x1f1833};};Object['defineProperty'](exports,a306_0x1bcf84(0x1f8),{'value':!![]}),exports[a306_0x1bcf84(0x201)]=void 0x0;function a306_0x5382(_0x425fad,_0x1371bb){const _0xab9f82=a306_0x4ef3();return a306_0x5382=function(_0x4476e3,_0x2d3ceb){_0x4476e3=_0x4476e3-0x1e9;let _0x4ef387=_0xab9f82[_0x4476e3];return _0x4ef387;},a306_0x5382(_0x425fad,_0x1371bb);}const promises_1=require(a306_0x1bcf84(0x1fc)),core_1=require(a306_0x1bcf84(0x1fa)),utils_1=require(a306_0x1bcf84(0x203)),job_1=require(a306_0x1bcf84(0x213)),job_utils_1=__importDefault(require('../../shared/utils/job.utils')),masking_service_1=require(a306_0x1bcf84(0x1ea)),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0x1dfeb9=a306_0x1bcf84;this[_0x1dfeb9(0x1fb)]=0x9a7ec800,this[_0x1dfeb9(0x1eb)]=new core_1[(_0x1dfeb9(0x205))](DataMaskingRetentionPolicy[_0x1dfeb9(0x1f7)]);}async[a306_0x1bcf84(0x216)](){const _0x1f8788=a306_0x1bcf84;try{const _0x3325bb=await job_utils_1[_0x1f8788(0x207)][_0x1f8788(0x1ef)](masking_service_1['MaskingService'][_0x1f8788(0x210)]),_0x4b4acd=await this['filterExpiredJobs'](_0x3325bb);for(const _0x532654 of _0x4b4acd){await this[_0x1f8788(0x1ec)](_0x532654);}}catch(_0xf82dc5){this[_0x1f8788(0x1eb)][_0x1f8788(0x208)](_0xf82dc5);}}async['filterExpiredJobs'](_0x1cfed2){const _0x27340d=a306_0x1bcf84,_0xcb6742=[];for(const _0x2f4bd5 of _0x1cfed2){const _0x6ab4a0=await this[_0x27340d(0x1f4)](_0x2f4bd5),_0x9af374=_0x6ab4a0&&this[_0x27340d(0x1f3)](_0x6ab4a0);_0x9af374&&_0xcb6742[_0x27340d(0x20e)](_0x2f4bd5);}return _0xcb6742;}async['getJobCompletedDate'](_0x45ef39){const _0x15285a=a306_0x1bcf84;var _0x53a3f7;const _0x5c3e0b=path_1['default'][_0x15285a(0x1e9)](masking_service_1[_0x15285a(0x206)][_0x15285a(0x210)],_0x45ef39,job_1[_0x15285a(0x20a)]);if(!await utils_1['FsUtils'][_0x15285a(0x212)](_0x5c3e0b))return null;const _0x26499e=await(0x0,promises_1[_0x15285a(0x20b)])(_0x5c3e0b,{'encoding':_0x15285a(0x214)});return(_0x53a3f7=JSON[_0x15285a(0x1ff)](_0x26499e)[_0x15285a(0x1f9)])!==null&&_0x53a3f7!==void 0x0?_0x53a3f7:null;}[a306_0x1bcf84(0x1f3)](_0x38f38a){const _0x5b8b92=a306_0x1bcf84;return new Date()[_0x5b8b92(0x202)]()-_0x38f38a>this[_0x5b8b92(0x1fb)];}['deleteJob'](_0x355ecb){const _0x569242=a306_0x1bcf84,_0x41f48f=path_1[_0x569242(0x207)]['join'](masking_service_1[_0x569242(0x206)][_0x569242(0x210)],_0x355ecb);return(0x0,promises_1['rm'])(_0x41f48f,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;function a306_0x4ef3(){const _0x5629be=['parse','apply','DataMaskingRetentionPolicy','getTime','@flosum/utils','360FUhMBs','Logger','MaskingService','default','error','50913yqWeQg','JOB_LOG_STATE_FILENAME','readFile','333354HRedHL','search','push','72583rBVUxe','maskingFolderPath','__importDefault','isExistsPath','../../../constants/job','utf-8','208QzvjEm','execute','join','../../data-masking/services/masking.service','logger','deleteJob','80uUMPdG','78930aKsXru','getJobsIds','toString','2784573wpuYEx','(((.+)+)+)+$','isExpiredDate','getJobCompletedDate','36VWQvAL','1667056ulMleV','name','__esModule','completedDate','../../../core','EXPIRED_RANGE_DATE','fs/promises','235640DuVIQa','52PchEVx'];a306_0x4ef3=function(){return _0x5629be;};return a306_0x4ef3();}