const a296_0x5d9833=a296_0x1018;(function(_0x51e449,_0x453037){const _0x29b3e3=a296_0x1018,_0x113b47=_0x51e449();while(!![]){try{const _0x1e7793=-parseInt(_0x29b3e3(0x1a4))/0x1+-parseInt(_0x29b3e3(0x1a2))/0x2*(parseInt(_0x29b3e3(0x19a))/0x3)+-parseInt(_0x29b3e3(0x190))/0x4+parseInt(_0x29b3e3(0x18f))/0x5+-parseInt(_0x29b3e3(0x196))/0x6*(parseInt(_0x29b3e3(0x1af))/0x7)+-parseInt(_0x29b3e3(0x194))/0x8*(-parseInt(_0x29b3e3(0x198))/0x9)+parseInt(_0x29b3e3(0x18e))/0xa;if(_0x1e7793===_0x453037)break;else _0x113b47['push'](_0x113b47['shift']());}catch(_0x59cc1d){_0x113b47['push'](_0x113b47['shift']());}}}(a296_0xa1fb,0x19abb));const a296_0x5ad99a=(function(){let _0x4012fb=!![];return function(_0x37c0b8,_0x1dd8e4){const _0x29c198=_0x4012fb?function(){if(_0x1dd8e4){const _0x5da525=_0x1dd8e4['apply'](_0x37c0b8,arguments);return _0x1dd8e4=null,_0x5da525;}}:function(){};return _0x4012fb=![],_0x29c198;};}()),a296_0x546764=a296_0x5ad99a(this,function(){const _0x50fd59=a296_0x1018;return a296_0x546764[_0x50fd59(0x192)]()['search'](_0x50fd59(0x19f))['toString']()['constructor'](a296_0x546764)[_0x50fd59(0x18a)](_0x50fd59(0x19f));});a296_0x546764();function a296_0x1018(_0x3db1f6,_0x47088e){const _0x49c015=a296_0xa1fb();return a296_0x1018=function(_0x546764,_0x5ad99a){_0x546764=_0x546764-0x189;let _0xa1fb24=_0x49c015[_0x546764];return _0xa1fb24;},a296_0x1018(_0x3db1f6,_0x47088e);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x40e480){const _0x3604ca=a296_0x1018;return _0x40e480&&_0x40e480[_0x3604ca(0x189)]?_0x40e480:{'default':_0x40e480};};function a296_0xa1fb(){const _0x38f4b0=['162742HfWlPA','completedDate','80774YjFjNo','../../shared/utils/job.utils','getJobCompletedDate','parse','../../../constants/job','../../data-masking/services/masking.service','FsUtils','utf-8','default','Logger','path','3885ArnfuA','getTime','deleteJob','../../../core','name','maskingFolderPath','getJobsIds','__esModule','search','defineProperty','filterExpiredJobs','fs/promises','3699970lyDmRk','531855WtyANt','306600gbFZbJ','isExpiredDate','toString','logger','312fNlHKp','EXPIRED_RANGE_DATE','1626hvXmYm','MaskingService','4149HMizsy','execute','3mcCMIu','DataMaskingRetentionPolicy','@flosum/utils','readFile','push','(((.+)+)+)+$','error','join'];a296_0xa1fb=function(){return _0x38f4b0;};return a296_0xa1fb();}Object[a296_0x5d9833(0x18b)](exports,a296_0x5d9833(0x189),{'value':!![]}),exports[a296_0x5d9833(0x19b)]=void 0x0;const promises_1=require(a296_0x5d9833(0x18d)),core_1=require(a296_0x5d9833(0x1b2)),utils_1=require(a296_0x5d9833(0x19c)),job_1=require(a296_0x5d9833(0x1a8)),job_utils_1=__importDefault(require(a296_0x5d9833(0x1a5))),masking_service_1=require(a296_0x5d9833(0x1a9)),path_1=__importDefault(require(a296_0x5d9833(0x1ae)));class DataMaskingRetentionPolicy{constructor(){const _0x5d1355=a296_0x5d9833;this['EXPIRED_RANGE_DATE']=0x9a7ec800,this[_0x5d1355(0x193)]=new core_1[(_0x5d1355(0x1ad))](DataMaskingRetentionPolicy[_0x5d1355(0x1b3)]);}async[a296_0x5d9833(0x199)](){const _0x387c58=a296_0x5d9833;try{const _0x4f11b1=await job_utils_1[_0x387c58(0x1ac)][_0x387c58(0x1b5)](masking_service_1[_0x387c58(0x197)]['maskingFolderPath']),_0x24e314=await this['filterExpiredJobs'](_0x4f11b1);for(const _0x1a4f85 of _0x24e314){await this['deleteJob'](_0x1a4f85);}}catch(_0x9428de){this['logger'][_0x387c58(0x1a0)](_0x9428de);}}async[a296_0x5d9833(0x18c)](_0x46d56c){const _0x2c1c26=a296_0x5d9833,_0x24d90c=[];for(const _0x959073 of _0x46d56c){const _0x1856df=await this[_0x2c1c26(0x1a6)](_0x959073),_0x4ed4f0=_0x1856df&&this[_0x2c1c26(0x191)](_0x1856df);_0x4ed4f0&&_0x24d90c[_0x2c1c26(0x19e)](_0x959073);}return _0x24d90c;}async['getJobCompletedDate'](_0x14ff17){const _0x300740=a296_0x5d9833;var _0x1ee1ab;const _0xc8e3af=path_1[_0x300740(0x1ac)][_0x300740(0x1a1)](masking_service_1['MaskingService'][_0x300740(0x1b4)],_0x14ff17,job_1['JOB_LOG_STATE_FILENAME']);if(!await utils_1[_0x300740(0x1aa)]['isExistsPath'](_0xc8e3af))return null;const _0x3e502d=await(0x0,promises_1[_0x300740(0x19d)])(_0xc8e3af,{'encoding':_0x300740(0x1ab)});return(_0x1ee1ab=JSON[_0x300740(0x1a7)](_0x3e502d)[_0x300740(0x1a3)])!==null&&_0x1ee1ab!==void 0x0?_0x1ee1ab:null;}[a296_0x5d9833(0x191)](_0x4b7f10){const _0x4cca9b=a296_0x5d9833;return new Date()[_0x4cca9b(0x1b0)]()-_0x4b7f10>this[_0x4cca9b(0x195)];}[a296_0x5d9833(0x1b1)](_0x5dcb0e){const _0x3e6524=a296_0x5d9833,_0x369862=path_1[_0x3e6524(0x1ac)][_0x3e6524(0x1a1)](masking_service_1['MaskingService'][_0x3e6524(0x1b4)],_0x5dcb0e);return(0x0,promises_1['rm'])(_0x369862,{'recursive':!![],'force':!![]});}}exports['DataMaskingRetentionPolicy']=DataMaskingRetentionPolicy;