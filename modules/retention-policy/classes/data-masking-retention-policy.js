const a259_0x279d54=a259_0x5099;function a259_0x5099(_0x47e6ba,_0x2496f6){const _0x274a5a=a259_0x1bc2();return a259_0x5099=function(_0x138294,_0x9373d9){_0x138294=_0x138294-0x72;let _0x1bc297=_0x274a5a[_0x138294];return _0x1bc297;},a259_0x5099(_0x47e6ba,_0x2496f6);}function a259_0x1bc2(){const _0x493cb1=['3414RYuXEx','16JOUHRx','106059ehWUor','deleteJob','EXPIRED_RANGE_DATE','join','push','parse','getJobsIds','26889nRIPQS','search','274401siHWRV','name','default','toString','../../data-masking/services/masking.service','filterExpiredJobs','DataMaskingRetentionPolicy','getJobCompletedDate','FsUtils','error','20XBLSiu','apply','constructor','MaskingService','maskingFolderPath','isExpiredDate','logger','16aQoHSt','getTime','path','execute','__esModule','8666HSqyVA','readFile','2465881gQeMTE','JOB_LOG_STATE_FILENAME','../../shared/utils/job.utils','(((.+)+)+)+$','defineProperty','fs/promises','__importDefault','../../../constants/job','132412dWvpKe','985vqPnSp'];a259_0x1bc2=function(){return _0x493cb1;};return a259_0x1bc2();}(function(_0x4d32b8,_0x243e56){const _0x2dc51b=a259_0x5099,_0x2a9c7d=_0x4d32b8();while(!![]){try{const _0x2c28d0=-parseInt(_0x2dc51b(0x95))/0x1+-parseInt(_0x2dc51b(0x87))/0x2+parseInt(_0x2dc51b(0x9c))/0x3*(-parseInt(_0x2dc51b(0x82))/0x4)+-parseInt(_0x2dc51b(0x92))/0x5*(parseInt(_0x2dc51b(0x93))/0x6)+-parseInt(_0x2dc51b(0x91))/0x7*(parseInt(_0x2dc51b(0x94))/0x8)+-parseInt(_0x2dc51b(0x9e))/0x9+parseInt(_0x2dc51b(0x7b))/0xa*(parseInt(_0x2dc51b(0x89))/0xb);if(_0x2c28d0===_0x243e56)break;else _0x2a9c7d['push'](_0x2a9c7d['shift']());}catch(_0x22f0ec){_0x2a9c7d['push'](_0x2a9c7d['shift']());}}}(a259_0x1bc2,0x1db54));const a259_0x9373d9=(function(){let _0x3f8c6c=!![];return function(_0x31d346,_0x579bd6){const _0x5aec52=_0x3f8c6c?function(){const _0x116b49=a259_0x5099;if(_0x579bd6){const _0x43caf1=_0x579bd6[_0x116b49(0x7c)](_0x31d346,arguments);return _0x579bd6=null,_0x43caf1;}}:function(){};return _0x3f8c6c=![],_0x5aec52;};}()),a259_0x138294=a259_0x9373d9(this,function(){const _0x15bdb3=a259_0x5099;return a259_0x138294['toString']()[_0x15bdb3(0x9d)](_0x15bdb3(0x8c))[_0x15bdb3(0x74)]()[_0x15bdb3(0x7d)](a259_0x138294)[_0x15bdb3(0x9d)](_0x15bdb3(0x8c));});a259_0x138294();'use strict';var __importDefault=this&&this[a259_0x279d54(0x8f)]||function(_0x469251){const _0x5ac736=a259_0x279d54;return _0x469251&&_0x469251[_0x5ac736(0x86)]?_0x469251:{'default':_0x469251};};Object[a259_0x279d54(0x8d)](exports,a259_0x279d54(0x86),{'value':!![]}),exports[a259_0x279d54(0x77)]=void 0x0;const promises_1=require(a259_0x279d54(0x8e)),core_1=require('../../../core'),utils_1=require('@flosum/utils'),job_1=require(a259_0x279d54(0x90)),job_utils_1=__importDefault(require(a259_0x279d54(0x8b))),masking_service_1=require(a259_0x279d54(0x75)),path_1=__importDefault(require(a259_0x279d54(0x84)));class DataMaskingRetentionPolicy{constructor(){const _0x581ac6=a259_0x279d54;this[_0x581ac6(0x97)]=0x9a7ec800,this[_0x581ac6(0x81)]=new core_1['Logger'](DataMaskingRetentionPolicy[_0x581ac6(0x72)]);}async[a259_0x279d54(0x85)](){const _0x1ff6e9=a259_0x279d54;try{const _0x2a1ea6=await job_utils_1[_0x1ff6e9(0x73)][_0x1ff6e9(0x9b)](masking_service_1[_0x1ff6e9(0x7e)][_0x1ff6e9(0x7f)]),_0x5bd13e=await this['filterExpiredJobs'](_0x2a1ea6);for(const _0x1a9c12 of _0x5bd13e){await this[_0x1ff6e9(0x96)](_0x1a9c12);}}catch(_0x592d45){this[_0x1ff6e9(0x81)][_0x1ff6e9(0x7a)](_0x592d45);}}async[a259_0x279d54(0x76)](_0x5d34d8){const _0x46e922=a259_0x279d54,_0x139977=[];for(const _0x1003dd of _0x5d34d8){const _0x461eae=await this[_0x46e922(0x78)](_0x1003dd),_0x10c649=_0x461eae&&this[_0x46e922(0x80)](_0x461eae);_0x10c649&&_0x139977[_0x46e922(0x99)](_0x1003dd);}return _0x139977;}async['getJobCompletedDate'](_0x5df1b6){const _0x139883=a259_0x279d54;var _0x5d10d8;const _0x526da7=path_1[_0x139883(0x73)][_0x139883(0x98)](masking_service_1[_0x139883(0x7e)][_0x139883(0x7f)],_0x5df1b6,job_1[_0x139883(0x8a)]);if(!await utils_1[_0x139883(0x79)]['isExistsPath'](_0x526da7))return null;const _0x30c114=await(0x0,promises_1[_0x139883(0x88)])(_0x526da7,{'encoding':'utf-8'});return(_0x5d10d8=JSON[_0x139883(0x9a)](_0x30c114)['completedDate'])!==null&&_0x5d10d8!==void 0x0?_0x5d10d8:null;}[a259_0x279d54(0x80)](_0x2adb48){const _0x2f0bcc=a259_0x279d54;return new Date()[_0x2f0bcc(0x83)]()-_0x2adb48>this[_0x2f0bcc(0x97)];}[a259_0x279d54(0x96)](_0x1b6d36){const _0x50d98d=a259_0x279d54,_0x30c1b0=path_1[_0x50d98d(0x73)][_0x50d98d(0x98)](masking_service_1[_0x50d98d(0x7e)]['maskingFolderPath'],_0x1b6d36);return(0x0,promises_1['rm'])(_0x30c1b0,{'recursive':!![],'force':!![]});}}exports[a259_0x279d54(0x77)]=DataMaskingRetentionPolicy;