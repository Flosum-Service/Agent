const a259_0x5a8a1f=a259_0xf446;(function(_0x1ec098,_0x5ca064){const _0x5143e8=a259_0xf446,_0xa782a4=_0x1ec098();while(!![]){try{const _0x365eef=-parseInt(_0x5143e8(0x1f4))/0x1*(-parseInt(_0x5143e8(0x212))/0x2)+-parseInt(_0x5143e8(0x20a))/0x3+parseInt(_0x5143e8(0x1f2))/0x4*(-parseInt(_0x5143e8(0x1f8))/0x5)+parseInt(_0x5143e8(0x1fb))/0x6*(-parseInt(_0x5143e8(0x20b))/0x7)+parseInt(_0x5143e8(0x1fe))/0x8*(-parseInt(_0x5143e8(0x1fc))/0x9)+parseInt(_0x5143e8(0x1f5))/0xa+parseInt(_0x5143e8(0x216))/0xb;if(_0x365eef===_0x5ca064)break;else _0xa782a4['push'](_0xa782a4['shift']());}catch(_0x455fe8){_0xa782a4['push'](_0xa782a4['shift']());}}}(a259_0x43df,0x590e1));const a259_0xb5c04e=(function(){let _0x56f7f2=!![];return function(_0xc618e6,_0x3bb9b9){const _0x3d8ea4=_0x56f7f2?function(){if(_0x3bb9b9){const _0x4d42ca=_0x3bb9b9['apply'](_0xc618e6,arguments);return _0x3bb9b9=null,_0x4d42ca;}}:function(){};return _0x56f7f2=![],_0x3d8ea4;};}()),a259_0x26a426=a259_0xb5c04e(this,function(){const _0x5275c1=a259_0xf446;return a259_0x26a426[_0x5275c1(0x1ff)]()[_0x5275c1(0x20d)](_0x5275c1(0x206))[_0x5275c1(0x1ff)]()[_0x5275c1(0x215)](a259_0x26a426)[_0x5275c1(0x20d)](_0x5275c1(0x206));});function a259_0xf446(_0x36dd5a,_0xd2a057){const _0x5b01c9=a259_0x43df();return a259_0xf446=function(_0x26a426,_0xb5c04e){_0x26a426=_0x26a426-0x1ed;let _0x43df28=_0x5b01c9[_0x26a426];return _0x43df28;},a259_0xf446(_0x36dd5a,_0xd2a057);}a259_0x26a426();function a259_0x43df(){const _0x9654bb=['isExpiredDate','__importDefault','execute','966KfWZoa','EXPIRED_RANGE_DATE','readFile','constructor','7909781WcHLYI','filterExpiredJobs','fs/promises','defineProperty','MaskingService','JOB_LOG_STATE_FILENAME','../../../constants/job','2240428uGDKci','FsUtils','1323TPMRHw','1728050woFhxA','../../shared/utils/job.utils','default','5VFFmGJ','maskingFolderPath','logger','26988tmIASB','2065671atxQQO','DataMaskingRetentionPolicy','16Emumnu','toString','@flosum/utils','../../data-masking/services/masking.service','__esModule','completedDate','join','isExistsPath','(((.+)+)+)+$','deleteJob','push','getTime','198021XeDOps','126XKTLjP','getJobCompletedDate','search','../../../core'];a259_0x43df=function(){return _0x9654bb;};return a259_0x43df();}'use strict';var __importDefault=this&&this[a259_0x5a8a1f(0x210)]||function(_0x387f2c){const _0x3c1733=a259_0x5a8a1f;return _0x387f2c&&_0x387f2c[_0x3c1733(0x202)]?_0x387f2c:{'default':_0x387f2c};};Object[a259_0x5a8a1f(0x1ee)](exports,'__esModule',{'value':!![]}),exports[a259_0x5a8a1f(0x1fd)]=void 0x0;const promises_1=require(a259_0x5a8a1f(0x1ed)),core_1=require(a259_0x5a8a1f(0x20e)),utils_1=require(a259_0x5a8a1f(0x200)),job_1=require(a259_0x5a8a1f(0x1f1)),job_utils_1=__importDefault(require(a259_0x5a8a1f(0x1f6))),masking_service_1=require(a259_0x5a8a1f(0x201)),path_1=__importDefault(require('path'));class DataMaskingRetentionPolicy{constructor(){const _0x410a22=a259_0x5a8a1f;this[_0x410a22(0x213)]=0x9a7ec800,this['logger']=new core_1['Logger'](DataMaskingRetentionPolicy['name']);}async[a259_0x5a8a1f(0x211)](){const _0x270b73=a259_0x5a8a1f;try{const _0x5a6a6f=await job_utils_1[_0x270b73(0x1f7)]['getJobsIds'](masking_service_1[_0x270b73(0x1ef)][_0x270b73(0x1f9)]),_0x244a86=await this[_0x270b73(0x217)](_0x5a6a6f);for(const _0xe84590 of _0x244a86){await this[_0x270b73(0x207)](_0xe84590);}}catch(_0x1b150f){this[_0x270b73(0x1fa)]['error'](_0x1b150f);}}async['filterExpiredJobs'](_0x2c3fa4){const _0x12fa50=a259_0x5a8a1f,_0x1beac0=[];for(const _0x5ce0c4 of _0x2c3fa4){const _0xa385e9=await this[_0x12fa50(0x20c)](_0x5ce0c4),_0xf459b4=_0xa385e9&&this[_0x12fa50(0x20f)](_0xa385e9);_0xf459b4&&_0x1beac0[_0x12fa50(0x208)](_0x5ce0c4);}return _0x1beac0;}async[a259_0x5a8a1f(0x20c)](_0x330e8c){const _0x38ff1c=a259_0x5a8a1f;var _0x1865e8;const _0x58cc07=path_1[_0x38ff1c(0x1f7)][_0x38ff1c(0x204)](masking_service_1[_0x38ff1c(0x1ef)][_0x38ff1c(0x1f9)],_0x330e8c,job_1[_0x38ff1c(0x1f0)]);if(!await utils_1[_0x38ff1c(0x1f3)][_0x38ff1c(0x205)](_0x58cc07))return null;const _0x3ce78b=await(0x0,promises_1[_0x38ff1c(0x214)])(_0x58cc07,{'encoding':'utf-8'});return(_0x1865e8=JSON['parse'](_0x3ce78b)[_0x38ff1c(0x203)])!==null&&_0x1865e8!==void 0x0?_0x1865e8:null;}[a259_0x5a8a1f(0x20f)](_0x302cd){const _0x25d525=a259_0x5a8a1f;return new Date()[_0x25d525(0x209)]()-_0x302cd>this[_0x25d525(0x213)];}[a259_0x5a8a1f(0x207)](_0x1ebf33){const _0x1f4c4a=a259_0x5a8a1f,_0x51e0fb=path_1[_0x1f4c4a(0x1f7)]['join'](masking_service_1[_0x1f4c4a(0x1ef)][_0x1f4c4a(0x1f9)],_0x1ebf33);return(0x0,promises_1['rm'])(_0x51e0fb,{'recursive':!![],'force':!![]});}}exports[a259_0x5a8a1f(0x1fd)]=DataMaskingRetentionPolicy;