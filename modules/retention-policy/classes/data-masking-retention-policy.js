const a258_0x38cf31=a258_0x3d96;(function(_0x25bd1a,_0x5da922){const _0x33b173=a258_0x3d96,_0x5aafb6=_0x25bd1a();while(!![]){try{const _0x4547e5=-parseInt(_0x33b173(0x8c))/0x1*(parseInt(_0x33b173(0x8d))/0x2)+parseInt(_0x33b173(0x8a))/0x3*(parseInt(_0x33b173(0x95))/0x4)+-parseInt(_0x33b173(0x7c))/0x5*(parseInt(_0x33b173(0x6c))/0x6)+parseInt(_0x33b173(0x6f))/0x7+parseInt(_0x33b173(0x7a))/0x8*(parseInt(_0x33b173(0x8b))/0x9)+-parseInt(_0x33b173(0x68))/0xa*(parseInt(_0x33b173(0x74))/0xb)+-parseInt(_0x33b173(0x7f))/0xc*(-parseInt(_0x33b173(0x78))/0xd);if(_0x4547e5===_0x5da922)break;else _0x5aafb6['push'](_0x5aafb6['shift']());}catch(_0x5b5ca0){_0x5aafb6['push'](_0x5aafb6['shift']());}}}(a258_0x1c62,0x8f8b5));const a258_0x144173=(function(){let _0x30d3ea=!![];return function(_0x5b10be,_0x747815){const _0x392081=_0x30d3ea?function(){const _0x2c3636=a258_0x3d96;if(_0x747815){const _0xed2be6=_0x747815[_0x2c3636(0x79)](_0x5b10be,arguments);return _0x747815=null,_0xed2be6;}}:function(){};return _0x30d3ea=![],_0x392081;};}()),a258_0x2e039f=a258_0x144173(this,function(){const _0x14cb56=a258_0x3d96;return a258_0x2e039f[_0x14cb56(0x92)]()[_0x14cb56(0x96)](_0x14cb56(0x7b))[_0x14cb56(0x92)]()['constructor'](a258_0x2e039f)['search'](_0x14cb56(0x7b));});function a258_0x1c62(){const _0x48ade0=['getJobsIds','deleteJob','4150629uhVBLk','getTime','@flosum/utils','__importDefault','defineProperty','11UWCcPV','readFile','completedDate','utf-8','13sPJVPS','apply','1208XmCYOt','(((.+)+)+)+$','3805KBcYdk','__esModule','../../shared/utils/job.utils','5162100UlCQYf','JOB_LOG_STATE_FILENAME','DataMaskingRetentionPolicy','fs/promises','path','logger','filterExpiredJobs','Logger','default','join','MaskingService','38163YASTHt','48339FlFzRQ','77258hLeJXL','18ISTeBd','isExpiredDate','isExistsPath','EXPIRED_RANGE_DATE','getJobCompletedDate','toString','../../../core','../../data-masking/services/masking.service','4lfpIpw','search','parse','620860gsTcDw','FsUtils','maskingFolderPath','../../../constants/job','3954iHLLbW'];a258_0x1c62=function(){return _0x48ade0;};return a258_0x1c62();}a258_0x2e039f();'use strict';var __importDefault=this&&this[a258_0x38cf31(0x72)]||function(_0x374421){const _0x1571d8=a258_0x38cf31;return _0x374421&&_0x374421[_0x1571d8(0x7d)]?_0x374421:{'default':_0x374421};};function a258_0x3d96(_0x3d0c50,_0xf01e70){const _0xb8aaf2=a258_0x1c62();return a258_0x3d96=function(_0x2e039f,_0x144173){_0x2e039f=_0x2e039f-0x68;let _0x1c623b=_0xb8aaf2[_0x2e039f];return _0x1c623b;},a258_0x3d96(_0x3d0c50,_0xf01e70);}Object[a258_0x38cf31(0x73)](exports,a258_0x38cf31(0x7d),{'value':!![]}),exports[a258_0x38cf31(0x81)]=void 0x0;const promises_1=require(a258_0x38cf31(0x82)),core_1=require(a258_0x38cf31(0x93)),utils_1=require(a258_0x38cf31(0x71)),job_1=require(a258_0x38cf31(0x6b)),job_utils_1=__importDefault(require(a258_0x38cf31(0x7e))),masking_service_1=require(a258_0x38cf31(0x94)),path_1=__importDefault(require(a258_0x38cf31(0x83)));class DataMaskingRetentionPolicy{constructor(){const _0x1d76ca=a258_0x38cf31;this[_0x1d76ca(0x90)]=0x9a7ec800,this[_0x1d76ca(0x84)]=new core_1[(_0x1d76ca(0x86))](DataMaskingRetentionPolicy['name']);}async['execute'](){const _0xd5a143=a258_0x38cf31;try{const _0x32a332=await job_utils_1[_0xd5a143(0x87)][_0xd5a143(0x6d)](masking_service_1[_0xd5a143(0x89)][_0xd5a143(0x6a)]),_0x2caf87=await this[_0xd5a143(0x85)](_0x32a332);for(const _0x449c39 of _0x2caf87){await this[_0xd5a143(0x6e)](_0x449c39);}}catch(_0x445916){this[_0xd5a143(0x84)]['error'](_0x445916);}}async['filterExpiredJobs'](_0x4932f5){const _0x46b2ae=a258_0x38cf31,_0x4e9606=[];for(const _0x1c75cd of _0x4932f5){const _0x12eb27=await this[_0x46b2ae(0x91)](_0x1c75cd),_0x4bbf74=_0x12eb27&&this[_0x46b2ae(0x8e)](_0x12eb27);_0x4bbf74&&_0x4e9606['push'](_0x1c75cd);}return _0x4e9606;}async[a258_0x38cf31(0x91)](_0xb5023e){const _0x484259=a258_0x38cf31;var _0x4fb986;const _0x4199ac=path_1[_0x484259(0x87)][_0x484259(0x88)](masking_service_1['MaskingService'][_0x484259(0x6a)],_0xb5023e,job_1[_0x484259(0x80)]);if(!await utils_1[_0x484259(0x69)][_0x484259(0x8f)](_0x4199ac))return null;const _0x1ec4d6=await(0x0,promises_1[_0x484259(0x75)])(_0x4199ac,{'encoding':_0x484259(0x77)});return(_0x4fb986=JSON[_0x484259(0x97)](_0x1ec4d6)[_0x484259(0x76)])!==null&&_0x4fb986!==void 0x0?_0x4fb986:null;}['isExpiredDate'](_0x41f3d5){const _0x1f3356=a258_0x38cf31;return new Date()[_0x1f3356(0x70)]()-_0x41f3d5>this[_0x1f3356(0x90)];}[a258_0x38cf31(0x6e)](_0x411367){const _0xaa5ab7=a258_0x38cf31,_0x212734=path_1[_0xaa5ab7(0x87)][_0xaa5ab7(0x88)](masking_service_1[_0xaa5ab7(0x89)][_0xaa5ab7(0x6a)],_0x411367);return(0x0,promises_1['rm'])(_0x212734,{'recursive':!![],'force':!![]});}}exports[a258_0x38cf31(0x81)]=DataMaskingRetentionPolicy;