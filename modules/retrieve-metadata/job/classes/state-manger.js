const a268_0x5ad2f0=a268_0x20f5;function a268_0x20f5(_0x192f13,_0x12b2aa){const _0x30d000=a268_0x5f2b();return a268_0x20f5=function(_0x152585,_0x45d918){_0x152585=_0x152585-0x6d;let _0x5f2b74=_0x30d000[_0x152585];return _0x5f2b74;},a268_0x20f5(_0x192f13,_0x12b2aa);}(function(_0x421415,_0x53e244){const _0x2eeee9=a268_0x20f5,_0x3ef711=_0x421415();while(!![]){try{const _0x32ee3c=-parseInt(_0x2eeee9(0x70))/0x1*(-parseInt(_0x2eeee9(0x9b))/0x2)+-parseInt(_0x2eeee9(0x73))/0x3+parseInt(_0x2eeee9(0x94))/0x4+parseInt(_0x2eeee9(0x77))/0x5*(-parseInt(_0x2eeee9(0x71))/0x6)+parseInt(_0x2eeee9(0x81))/0x7+-parseInt(_0x2eeee9(0x8f))/0x8+-parseInt(_0x2eeee9(0x92))/0x9*(parseInt(_0x2eeee9(0x74))/0xa);if(_0x32ee3c===_0x53e244)break;else _0x3ef711['push'](_0x3ef711['shift']());}catch(_0x561c1d){_0x3ef711['push'](_0x3ef711['shift']());}}}(a268_0x5f2b,0x3a893));const a268_0x45d918=(function(){let _0x29583f=!![];return function(_0x264a1e,_0x20324f){const _0x4395c9=_0x29583f?function(){if(_0x20324f){const _0x5c1685=_0x20324f['apply'](_0x264a1e,arguments);return _0x20324f=null,_0x5c1685;}}:function(){};return _0x29583f=![],_0x4395c9;};}()),a268_0x152585=a268_0x45d918(this,function(){const _0x159257=a268_0x20f5;return a268_0x152585['toString']()[_0x159257(0x6d)](_0x159257(0x80))[_0x159257(0x87)]()['constructor'](a268_0x152585)[_0x159257(0x6d)](_0x159257(0x80));});a268_0x152585();function a268_0x5f2b(){const _0x417372=['Job\x20not\x20found.','getTime','jobState','writeFile','isExistsPath','(((.+)+)+)+$','2361744jiDxyi','fs/promises','__importDefault','error','getJobStatePath','readFile','toString','then','join','setError','getJobState','create','JobStatus','stringify','3484704UQEhYt','parse','FAILED','188442AdvHBR','setCompleted','1832444srNvTl','statePath','__esModule','update','../../../../constants/job','defineProperty','@flosum/utils','833174FErMjB','JOB_LOG_STATE_FILENAME','addWarning','completedDate','search','status','path','1kwqBCt','37542FuQxdE','default','1340922McAOmb','10OXvYiu','QUEUED','init','55LEbprk','../enums/logger.enums','utf-8','push'];a268_0x5f2b=function(){return _0x417372;};return a268_0x5f2b();}'use strict';var __importDefault=this&&this[a268_0x5ad2f0(0x83)]||function(_0x43a1ca){const _0x357e55=a268_0x5ad2f0;return _0x43a1ca&&_0x43a1ca[_0x357e55(0x96)]?_0x43a1ca:{'default':_0x43a1ca};};Object[a268_0x5ad2f0(0x99)](exports,'__esModule',{'value':!![]});const logger_enums_1=require(a268_0x5ad2f0(0x78)),path_1=__importDefault(require(a268_0x5ad2f0(0x6f))),promises_1=require(a268_0x5ad2f0(0x82)),utils_1=require(a268_0x5ad2f0(0x9a)),job_1=require(a268_0x5ad2f0(0x98));class StateManager{constructor(_0x31da41){const _0x381930=a268_0x5ad2f0;this[_0x381930(0x95)]=StateManager[_0x381930(0x85)](_0x31da41);}static[a268_0x5ad2f0(0x85)](_0x4cb446){const _0x27ecf1=a268_0x5ad2f0;return path_1[_0x27ecf1(0x72)][_0x27ecf1(0x89)](_0x4cb446,job_1[_0x27ecf1(0x9c)]);}static async[a268_0x5ad2f0(0x8c)](_0xde0682,_0x1145ee){const _0x25c84c=a268_0x5ad2f0,_0x148cfa=StateManager[_0x25c84c(0x85)](_0xde0682),_0x3b5cf9={'id':_0x1145ee,'status':logger_enums_1[_0x25c84c(0x8d)][_0x25c84c(0x75)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x25c84c(0x7e)])(_0x148cfa,JSON[_0x25c84c(0x8e)](_0x3b5cf9));}static async[a268_0x5ad2f0(0x8b)](_0x3e8eae){const _0x2bb1b6=a268_0x5ad2f0,_0x332a6e=StateManager['getJobStatePath'](_0x3e8eae);if(await utils_1['FsUtils'][_0x2bb1b6(0x7f)](_0x332a6e))return(0x0,promises_1[_0x2bb1b6(0x86)])(_0x332a6e,_0x2bb1b6(0x79))[_0x2bb1b6(0x88)](JSON[_0x2bb1b6(0x90)]);throw new Error(_0x2bb1b6(0x7b));}async[a268_0x5ad2f0(0x97)](){const _0x12f42d=a268_0x5ad2f0;await(0x0,promises_1['writeFile'])(this['statePath'],JSON['stringify'](this[_0x12f42d(0x7d)]));}async[a268_0x5ad2f0(0x76)](){const _0x5586cd=a268_0x5ad2f0;return this[_0x5586cd(0x7d)]=await(0x0,promises_1[_0x5586cd(0x86)])(this[_0x5586cd(0x95)],_0x5586cd(0x79))[_0x5586cd(0x88)](JSON[_0x5586cd(0x90)]),this;}async['setInProgress'](){const _0x35e84f=a268_0x5ad2f0;this[_0x35e84f(0x7d)]['status']=logger_enums_1[_0x35e84f(0x8d)]['IN_PROGRESS'],this[_0x35e84f(0x7d)]['createdDate']=new Date()[_0x35e84f(0x7c)](),await this[_0x35e84f(0x97)]();}async[a268_0x5ad2f0(0x93)](){const _0x19ae54=a268_0x5ad2f0;this[_0x19ae54(0x7d)][_0x19ae54(0x6e)]=logger_enums_1[_0x19ae54(0x8d)]['COMPLETED'],this[_0x19ae54(0x7d)]['completedDate']=new Date()[_0x19ae54(0x7c)](),await this['update']();}async[a268_0x5ad2f0(0x8a)]({message:_0x870de7}){const _0x40d7f8=a268_0x5ad2f0;this[_0x40d7f8(0x7d)][_0x40d7f8(0x6e)]=logger_enums_1['JobStatus'][_0x40d7f8(0x91)],this[_0x40d7f8(0x7d)][_0x40d7f8(0x9e)]=new Date()[_0x40d7f8(0x7c)](),this['jobState'][_0x40d7f8(0x84)]=_0x870de7,await this[_0x40d7f8(0x97)]();}[a268_0x5ad2f0(0x9d)](_0x18d807){const _0x4381e8=a268_0x5ad2f0;return this[_0x4381e8(0x7d)]['warnings'][_0x4381e8(0x7a)](_0x18d807),this['update']();}}exports[a268_0x5ad2f0(0x72)]=StateManager;