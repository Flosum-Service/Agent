const a267_0x1a001e=a267_0x1d46;(function(_0x2cfcf7,_0x4aed53){const _0x3e064a=a267_0x1d46,_0x39de04=_0x2cfcf7();while(!![]){try{const _0x55ab27=-parseInt(_0x3e064a(0x188))/0x1*(-parseInt(_0x3e064a(0x181))/0x2)+-parseInt(_0x3e064a(0x182))/0x3+parseInt(_0x3e064a(0x186))/0x4*(parseInt(_0x3e064a(0x154))/0x5)+-parseInt(_0x3e064a(0x16b))/0x6*(parseInt(_0x3e064a(0x171))/0x7)+parseInt(_0x3e064a(0x178))/0x8+-parseInt(_0x3e064a(0x173))/0x9*(-parseInt(_0x3e064a(0x183))/0xa)+parseInt(_0x3e064a(0x164))/0xb;if(_0x55ab27===_0x4aed53)break;else _0x39de04['push'](_0x39de04['shift']());}catch(_0x14c9fd){_0x39de04['push'](_0x39de04['shift']());}}}(a267_0x425a,0x51db3));const a267_0x3d7c5a=(function(){let _0x4e4e46=!![];return function(_0x3a204d,_0x3e1a46){const _0x299931=_0x4e4e46?function(){const _0x372808=a267_0x1d46;if(_0x3e1a46){const _0x45a010=_0x3e1a46[_0x372808(0x176)](_0x3a204d,arguments);return _0x3e1a46=null,_0x45a010;}}:function(){};return _0x4e4e46=![],_0x299931;};}()),a267_0x5a22f4=a267_0x3d7c5a(this,function(){const _0x59744e=a267_0x1d46;return a267_0x5a22f4[_0x59744e(0x175)]()['search'](_0x59744e(0x184))[_0x59744e(0x175)]()['constructor'](a267_0x5a22f4)[_0x59744e(0x174)]('(((.+)+)+)+$');});a267_0x5a22f4();function a267_0x425a(){const _0x41cafc=['completedDate','6ikNVnS','writeFile','../enums/logger.enums','stringify','COMPLETED','getTime','1182713UEdbWh','join','9EfyMMm','search','toString','apply','../../../../constants/job','1523296YkTADm','Job\x20not\x20found.','warnings','createdDate','fs/promises','init','getJobStatePath','readFile','setInProgress','2jkGaKx','1520661COunxE','1328510StEjZz','(((.+)+)+)+$','default','28MvXESu','getJobState','5919LmZxBO','jobState','path','status','10205QFiEyX','__importDefault','@flosum/utils','FAILED','IN_PROGRESS','create','QUEUED','__esModule','JobStatus','utf-8','defineProperty','isExistsPath','JOB_LOG_STATE_FILENAME','parse','FsUtils','then','7344260HMWPeu','setCompleted','error','statePath','push','update'];a267_0x425a=function(){return _0x41cafc;};return a267_0x425a();}function a267_0x1d46(_0x1c45b0,_0x16fd54){const _0x10dae0=a267_0x425a();return a267_0x1d46=function(_0x5a22f4,_0x3d7c5a){_0x5a22f4=_0x5a22f4-0x154;let _0x425a1c=_0x10dae0[_0x5a22f4];return _0x425a1c;},a267_0x1d46(_0x1c45b0,_0x16fd54);}'use strict';var __importDefault=this&&this[a267_0x1a001e(0x155)]||function(_0x2c770b){const _0x1c5a16=a267_0x1a001e;return _0x2c770b&&_0x2c770b[_0x1c5a16(0x15b)]?_0x2c770b:{'default':_0x2c770b};};Object[a267_0x1a001e(0x15e)](exports,a267_0x1a001e(0x15b),{'value':!![]});const logger_enums_1=require(a267_0x1a001e(0x16d)),path_1=__importDefault(require(a267_0x1a001e(0x18a))),promises_1=require(a267_0x1a001e(0x17c)),utils_1=require(a267_0x1a001e(0x156)),job_1=require(a267_0x1a001e(0x177));class StateManager{constructor(_0x15fbcc){const _0x3b69a5=a267_0x1a001e;this[_0x3b69a5(0x167)]=StateManager[_0x3b69a5(0x17e)](_0x15fbcc);}static[a267_0x1a001e(0x17e)](_0x29f4a3){const _0x579cba=a267_0x1a001e;return path_1[_0x579cba(0x185)][_0x579cba(0x172)](_0x29f4a3,job_1[_0x579cba(0x160)]);}static async[a267_0x1a001e(0x159)](_0x4a4c2c,_0x210170){const _0x304b7b=a267_0x1a001e,_0x39dae4=StateManager[_0x304b7b(0x17e)](_0x4a4c2c),_0x5b779a={'id':_0x210170,'status':logger_enums_1['JobStatus'][_0x304b7b(0x15a)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x304b7b(0x16c)])(_0x39dae4,JSON['stringify'](_0x5b779a));}static async[a267_0x1a001e(0x187)](_0x1591e1){const _0x408344=a267_0x1a001e,_0xf1f197=StateManager[_0x408344(0x17e)](_0x1591e1);if(await utils_1[_0x408344(0x162)][_0x408344(0x15f)](_0xf1f197))return(0x0,promises_1[_0x408344(0x17f)])(_0xf1f197,_0x408344(0x15d))[_0x408344(0x163)](JSON[_0x408344(0x161)]);throw new Error(_0x408344(0x179));}async[a267_0x1a001e(0x169)](){const _0x383b5f=a267_0x1a001e;await(0x0,promises_1[_0x383b5f(0x16c)])(this[_0x383b5f(0x167)],JSON[_0x383b5f(0x16e)](this[_0x383b5f(0x189)]));}async[a267_0x1a001e(0x17d)](){const _0x10b214=a267_0x1a001e;return this[_0x10b214(0x189)]=await(0x0,promises_1['readFile'])(this[_0x10b214(0x167)],_0x10b214(0x15d))[_0x10b214(0x163)](JSON['parse']),this;}async[a267_0x1a001e(0x180)](){const _0x34ed01=a267_0x1a001e;this['jobState'][_0x34ed01(0x18b)]=logger_enums_1['JobStatus'][_0x34ed01(0x158)],this[_0x34ed01(0x189)][_0x34ed01(0x17b)]=new Date()['getTime'](),await this[_0x34ed01(0x169)]();}async[a267_0x1a001e(0x165)](){const _0x121faa=a267_0x1a001e;this[_0x121faa(0x189)][_0x121faa(0x18b)]=logger_enums_1['JobStatus'][_0x121faa(0x16f)],this['jobState'][_0x121faa(0x16a)]=new Date()[_0x121faa(0x170)](),await this[_0x121faa(0x169)]();}async['setError']({message:_0x4d9d8b}){const _0x54c4f1=a267_0x1a001e;this[_0x54c4f1(0x189)][_0x54c4f1(0x18b)]=logger_enums_1[_0x54c4f1(0x15c)][_0x54c4f1(0x157)],this['jobState'][_0x54c4f1(0x16a)]=new Date()['getTime'](),this[_0x54c4f1(0x189)][_0x54c4f1(0x166)]=_0x4d9d8b,await this[_0x54c4f1(0x169)]();}['addWarning'](_0x3c05fb){const _0x55eb6e=a267_0x1a001e;return this['jobState'][_0x55eb6e(0x17a)][_0x55eb6e(0x168)](_0x3c05fb),this[_0x55eb6e(0x169)]();}}exports[a267_0x1a001e(0x185)]=StateManager;