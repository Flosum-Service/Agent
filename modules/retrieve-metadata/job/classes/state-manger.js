const a267_0x4c9ff9=a267_0x3c75;function a267_0x3c75(_0x2072f1,_0x53a1c8){const _0x57e0c7=a267_0x38bf();return a267_0x3c75=function(_0xec4911,_0x55ebd3){_0xec4911=_0xec4911-0x187;let _0x38bf28=_0x57e0c7[_0xec4911];return _0x38bf28;},a267_0x3c75(_0x2072f1,_0x53a1c8);}(function(_0x311b19,_0x2cef50){const _0x65848b=a267_0x3c75,_0x29eda0=_0x311b19();while(!![]){try{const _0x21c7e5=-parseInt(_0x65848b(0x1a9))/0x1+parseInt(_0x65848b(0x19b))/0x2*(-parseInt(_0x65848b(0x1a0))/0x3)+-parseInt(_0x65848b(0x1b9))/0x4+-parseInt(_0x65848b(0x190))/0x5+parseInt(_0x65848b(0x1b2))/0x6*(parseInt(_0x65848b(0x189))/0x7)+parseInt(_0x65848b(0x1af))/0x8*(-parseInt(_0x65848b(0x18a))/0x9)+-parseInt(_0x65848b(0x1b1))/0xa*(-parseInt(_0x65848b(0x191))/0xb);if(_0x21c7e5===_0x2cef50)break;else _0x29eda0['push'](_0x29eda0['shift']());}catch(_0x82692c){_0x29eda0['push'](_0x29eda0['shift']());}}}(a267_0x38bf,0x41b48));const a267_0x55ebd3=(function(){let _0x509a29=!![];return function(_0x1a9302,_0x1f4889){const _0x63747e=_0x509a29?function(){const _0x56c93=a267_0x3c75;if(_0x1f4889){const _0x30e24f=_0x1f4889[_0x56c93(0x1b7)](_0x1a9302,arguments);return _0x1f4889=null,_0x30e24f;}}:function(){};return _0x509a29=![],_0x63747e;};}()),a267_0xec4911=a267_0x55ebd3(this,function(){const _0x24c61d=a267_0x3c75;return a267_0xec4911[_0x24c61d(0x18b)]()[_0x24c61d(0x193)](_0x24c61d(0x1a1))[_0x24c61d(0x18b)]()['constructor'](a267_0xec4911)['search'](_0x24c61d(0x1a1));});a267_0xec4911();'use strict';var __importDefault=this&&this[a267_0x4c9ff9(0x1ba)]||function(_0x19afc3){return _0x19afc3&&_0x19afc3['__esModule']?_0x19afc3:{'default':_0x19afc3};};Object[a267_0x4c9ff9(0x1a7)](exports,a267_0x4c9ff9(0x1a2),{'value':!![]});function a267_0x38bf(){const _0x32ff91=['apply','statePath','1296908UwElFk','__importDefault','FsUtils','path','3339BMBCPH','45NbcUZi','toString','default','push','setError','getJobState','2610075bRTOrr','649zydqTX','getJobStatePath','search','setCompleted','readFile','warnings','IN_PROGRESS','COMPLETED','addWarning','FAILED','125940KIhVVz','Job\x20not\x20found.','update','join','JOB_LOG_STATE_FILENAME','9zfbMDs','(((.+)+)+)+$','__esModule','fs/promises','getTime','parse','JobStatus','defineProperty','utf-8','350657XFJCiR','error','jobState','status','../enums/logger.enums','completedDate','561096pEVURc','init','253510caxpou','6414bnuVIH','@flosum/utils','isExistsPath','QUEUED','stringify'];a267_0x38bf=function(){return _0x32ff91;};return a267_0x38bf();}const logger_enums_1=require(a267_0x4c9ff9(0x1ad)),path_1=__importDefault(require(a267_0x4c9ff9(0x188))),promises_1=require(a267_0x4c9ff9(0x1a3)),utils_1=require(a267_0x4c9ff9(0x1b3)),job_1=require('../../../../constants/job');class StateManager{constructor(_0x4fc5b1){const _0x3402bc=a267_0x4c9ff9;this[_0x3402bc(0x1b8)]=StateManager[_0x3402bc(0x192)](_0x4fc5b1);}static[a267_0x4c9ff9(0x192)](_0x10e277){const _0x62e2e9=a267_0x4c9ff9;return path_1[_0x62e2e9(0x18c)][_0x62e2e9(0x19e)](_0x10e277,job_1[_0x62e2e9(0x19f)]);}static async['create'](_0x5b146f,_0xcccaf3){const _0x1a1b09=a267_0x4c9ff9,_0x3d7efa=StateManager[_0x1a1b09(0x192)](_0x5b146f),_0x349a83={'id':_0xcccaf3,'status':logger_enums_1[_0x1a1b09(0x1a6)][_0x1a1b09(0x1b5)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x3d7efa,JSON[_0x1a1b09(0x1b6)](_0x349a83));}static async[a267_0x4c9ff9(0x18f)](_0x4b48a2){const _0x45a098=a267_0x4c9ff9,_0x49b718=StateManager[_0x45a098(0x192)](_0x4b48a2);if(await utils_1[_0x45a098(0x187)][_0x45a098(0x1b4)](_0x49b718))return(0x0,promises_1['readFile'])(_0x49b718,_0x45a098(0x1a8))['then'](JSON[_0x45a098(0x1a5)]);throw new Error(_0x45a098(0x19c));}async[a267_0x4c9ff9(0x19d)](){const _0x2cb334=a267_0x4c9ff9;await(0x0,promises_1['writeFile'])(this['statePath'],JSON[_0x2cb334(0x1b6)](this['jobState']));}async[a267_0x4c9ff9(0x1b0)](){const _0x24e7e8=a267_0x4c9ff9;return this[_0x24e7e8(0x1ab)]=await(0x0,promises_1[_0x24e7e8(0x195)])(this[_0x24e7e8(0x1b8)],'utf-8')['then'](JSON[_0x24e7e8(0x1a5)]),this;}async['setInProgress'](){const _0x4fd6dc=a267_0x4c9ff9;this[_0x4fd6dc(0x1ab)][_0x4fd6dc(0x1ac)]=logger_enums_1[_0x4fd6dc(0x1a6)][_0x4fd6dc(0x197)],this[_0x4fd6dc(0x1ab)]['createdDate']=new Date()['getTime'](),await this[_0x4fd6dc(0x19d)]();}async[a267_0x4c9ff9(0x194)](){const _0x581bd1=a267_0x4c9ff9;this['jobState']['status']=logger_enums_1[_0x581bd1(0x1a6)][_0x581bd1(0x198)],this['jobState'][_0x581bd1(0x1ae)]=new Date()[_0x581bd1(0x1a4)](),await this[_0x581bd1(0x19d)]();}async[a267_0x4c9ff9(0x18e)]({message:_0xd82d7c}){const _0x2667fe=a267_0x4c9ff9;this[_0x2667fe(0x1ab)][_0x2667fe(0x1ac)]=logger_enums_1[_0x2667fe(0x1a6)][_0x2667fe(0x19a)],this[_0x2667fe(0x1ab)][_0x2667fe(0x1ae)]=new Date()[_0x2667fe(0x1a4)](),this[_0x2667fe(0x1ab)][_0x2667fe(0x1aa)]=_0xd82d7c,await this[_0x2667fe(0x19d)]();}[a267_0x4c9ff9(0x199)](_0x288be6){const _0x3b0301=a267_0x4c9ff9;return this[_0x3b0301(0x1ab)][_0x3b0301(0x196)][_0x3b0301(0x18d)](_0x288be6),this[_0x3b0301(0x19d)]();}}exports[a267_0x4c9ff9(0x18c)]=StateManager;