const a268_0x1cef10=a268_0x1239;(function(_0x39858b,_0x7061ad){const _0x56a889=a268_0x1239,_0x55e754=_0x39858b();while(!![]){try{const _0x42a208=-parseInt(_0x56a889(0x160))/0x1+parseInt(_0x56a889(0x16e))/0x2+-parseInt(_0x56a889(0x169))/0x3*(parseInt(_0x56a889(0x17b))/0x4)+parseInt(_0x56a889(0x151))/0x5*(parseInt(_0x56a889(0x161))/0x6)+parseInt(_0x56a889(0x14e))/0x7*(parseInt(_0x56a889(0x156))/0x8)+-parseInt(_0x56a889(0x176))/0x9+parseInt(_0x56a889(0x179))/0xa;if(_0x42a208===_0x7061ad)break;else _0x55e754['push'](_0x55e754['shift']());}catch(_0xf975db){_0x55e754['push'](_0x55e754['shift']());}}}(a268_0x2f98,0x2be41));const a268_0x53bb49=(function(){let _0x2da59a=!![];return function(_0xe0056c,_0x375d97){const _0x2d4fa1=_0x2da59a?function(){if(_0x375d97){const _0x53da15=_0x375d97['apply'](_0xe0056c,arguments);return _0x375d97=null,_0x53da15;}}:function(){};return _0x2da59a=![],_0x2d4fa1;};}()),a268_0x19e7d2=a268_0x53bb49(this,function(){const _0x3ff561=a268_0x1239;return a268_0x19e7d2[_0x3ff561(0x14d)]()[_0x3ff561(0x150)](_0x3ff561(0x166))[_0x3ff561(0x14d)]()['constructor'](a268_0x19e7d2)[_0x3ff561(0x150)](_0x3ff561(0x166));});a268_0x19e7d2();'use strict';var __importDefault=this&&this[a268_0x1cef10(0x163)]||function(_0x37941c){const _0x3d41fa=a268_0x1cef10;return _0x37941c&&_0x37941c[_0x3d41fa(0x15d)]?_0x37941c:{'default':_0x37941c};};Object['defineProperty'](exports,a268_0x1cef10(0x15d),{'value':!![]});const logger_enums_1=require(a268_0x1cef10(0x16a)),path_1=__importDefault(require(a268_0x1cef10(0x153))),promises_1=require(a268_0x1cef10(0x16f)),utils_1=require(a268_0x1cef10(0x155)),job_1=require(a268_0x1cef10(0x15a));function a268_0x1239(_0x4b2adf,_0x3769a3){const _0x32a921=a268_0x2f98();return a268_0x1239=function(_0x19e7d2,_0x53bb49){_0x19e7d2=_0x19e7d2-0x14b;let _0x2f984e=_0x32a921[_0x19e7d2];return _0x2f984e;},a268_0x1239(_0x4b2adf,_0x3769a3);}function a268_0x2f98(){const _0x32f4f4=['../../../../constants/job','getJobStatePath','stringify','__esModule','update','JOB_LOG_STATE_FILENAME','51724lqdesO','32070rmYiUj','JobStatus','__importDefault','FsUtils','warnings','(((.+)+)+)+$','writeFile','jobState','41826UydXaA','../enums/logger.enums','statePath','addWarning','readFile','355082TjVckQ','fs/promises','getJobState','getTime','FAILED','default','QUEUED','parse','2366352eHvTPc','join','completedDate','3583890wmabHE','error','56azNnSo','Job\x20not\x20found.','createdDate','IN_PROGRESS','then','toString','10997GEpWld','status','search','60ZFrHPn','setCompleted','path','setError','@flosum/utils','456ZuQowi','utf-8','setInProgress','COMPLETED'];a268_0x2f98=function(){return _0x32f4f4;};return a268_0x2f98();}class StateManager{constructor(_0x2f6c92){const _0x3eb3cf=a268_0x1cef10;this[_0x3eb3cf(0x16b)]=StateManager[_0x3eb3cf(0x15b)](_0x2f6c92);}static[a268_0x1cef10(0x15b)](_0x2e0686){const _0x3df35c=a268_0x1cef10;return path_1[_0x3df35c(0x173)][_0x3df35c(0x177)](_0x2e0686,job_1[_0x3df35c(0x15f)]);}static async['create'](_0x243009,_0x556d82){const _0x5e40ee=a268_0x1cef10,_0x5eac3d=StateManager['getJobStatePath'](_0x243009),_0x3a9b50={'id':_0x556d82,'status':logger_enums_1[_0x5e40ee(0x162)][_0x5e40ee(0x174)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x5e40ee(0x167)])(_0x5eac3d,JSON[_0x5e40ee(0x15c)](_0x3a9b50));}static async[a268_0x1cef10(0x170)](_0x315348){const _0x431d2e=a268_0x1cef10,_0x36bc14=StateManager[_0x431d2e(0x15b)](_0x315348);if(await utils_1[_0x431d2e(0x164)]['isExistsPath'](_0x36bc14))return(0x0,promises_1[_0x431d2e(0x16d)])(_0x36bc14,_0x431d2e(0x157))['then'](JSON[_0x431d2e(0x175)]);throw new Error(_0x431d2e(0x17c));}async['update'](){const _0x563f60=a268_0x1cef10;await(0x0,promises_1[_0x563f60(0x167)])(this[_0x563f60(0x16b)],JSON[_0x563f60(0x15c)](this['jobState']));}async['init'](){const _0x4a1e4e=a268_0x1cef10;return this[_0x4a1e4e(0x168)]=await(0x0,promises_1['readFile'])(this[_0x4a1e4e(0x16b)],_0x4a1e4e(0x157))[_0x4a1e4e(0x14c)](JSON[_0x4a1e4e(0x175)]),this;}async[a268_0x1cef10(0x158)](){const _0x4f6473=a268_0x1cef10;this[_0x4f6473(0x168)][_0x4f6473(0x14f)]=logger_enums_1['JobStatus'][_0x4f6473(0x14b)],this[_0x4f6473(0x168)][_0x4f6473(0x17d)]=new Date()[_0x4f6473(0x171)](),await this[_0x4f6473(0x15e)]();}async[a268_0x1cef10(0x152)](){const _0x9b27a5=a268_0x1cef10;this[_0x9b27a5(0x168)]['status']=logger_enums_1['JobStatus'][_0x9b27a5(0x159)],this[_0x9b27a5(0x168)][_0x9b27a5(0x178)]=new Date()[_0x9b27a5(0x171)](),await this[_0x9b27a5(0x15e)]();}async[a268_0x1cef10(0x154)]({message:_0x360a19}){const _0x4ba1eb=a268_0x1cef10;this['jobState']['status']=logger_enums_1[_0x4ba1eb(0x162)][_0x4ba1eb(0x172)],this[_0x4ba1eb(0x168)]['completedDate']=new Date()[_0x4ba1eb(0x171)](),this['jobState'][_0x4ba1eb(0x17a)]=_0x360a19,await this['update']();}[a268_0x1cef10(0x16c)](_0x5986ea){const _0x2c6f87=a268_0x1cef10;return this['jobState'][_0x2c6f87(0x165)]['push'](_0x5986ea),this['update']();}}exports['default']=StateManager;