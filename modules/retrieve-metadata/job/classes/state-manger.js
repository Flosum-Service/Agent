const a267_0x1d5890=a267_0x3572;(function(_0x360d0c,_0x575279){const _0x30c4bb=a267_0x3572,_0x1d3254=_0x360d0c();while(!![]){try{const _0x404de2=parseInt(_0x30c4bb(0xb5))/0x1+parseInt(_0x30c4bb(0xc6))/0x2*(parseInt(_0x30c4bb(0xbb))/0x3)+-parseInt(_0x30c4bb(0xc3))/0x4*(parseInt(_0x30c4bb(0xb1))/0x5)+-parseInt(_0x30c4bb(0xc2))/0x6+parseInt(_0x30c4bb(0xb7))/0x7*(parseInt(_0x30c4bb(0xae))/0x8)+-parseInt(_0x30c4bb(0xc8))/0x9*(parseInt(_0x30c4bb(0xb8))/0xa)+parseInt(_0x30c4bb(0xcb))/0xb*(parseInt(_0x30c4bb(0xca))/0xc);if(_0x404de2===_0x575279)break;else _0x1d3254['push'](_0x1d3254['shift']());}catch(_0x3ffd87){_0x1d3254['push'](_0x1d3254['shift']());}}}(a267_0x5584,0x4210b));const a267_0x29b214=(function(){let _0x7b146c=!![];return function(_0x2d8c54,_0x7b4a63){const _0x2cd40f=_0x7b146c?function(){if(_0x7b4a63){const _0x44a0fd=_0x7b4a63['apply'](_0x2d8c54,arguments);return _0x7b4a63=null,_0x44a0fd;}}:function(){};return _0x7b146c=![],_0x2cd40f;};}()),a267_0x1f441c=a267_0x29b214(this,function(){const _0x22aec3=a267_0x3572;return a267_0x1f441c[_0x22aec3(0xc5)]()[_0x22aec3(0xbd)](_0x22aec3(0xa9))[_0x22aec3(0xc5)]()[_0x22aec3(0xa1)](a267_0x1f441c)[_0x22aec3(0xbd)](_0x22aec3(0xa9));});function a267_0x5584(){const _0x237494=['../enums/logger.enums','1015FSPfsd','8230HseWCj','warnings','path','41679iApVva','join','search','Job\x20not\x20found.','setInProgress','default','completedDate','136854JMxcxW','4IvjKzK','COMPLETED','toString','34sywkPO','getTime','5220kjBrfu','update','12264ozxkye','2222zvSbcb','jobState','status','push','utf-8','constructor','statePath','__importDefault','writeFile','@flosum/utils','readFile','IN_PROGRESS','then','(((.+)+)+)+$','getJobStatePath','fs/promises','isExistsPath','parse','15920gbrmCQ','__esModule','error','1601095hFxMIx','init','JobStatus','JOB_LOG_STATE_FILENAME','359796tJfAqw'];a267_0x5584=function(){return _0x237494;};return a267_0x5584();}a267_0x1f441c();'use strict';var __importDefault=this&&this[a267_0x1d5890(0xa3)]||function(_0x40b2a2){const _0x2b7938=a267_0x1d5890;return _0x40b2a2&&_0x40b2a2[_0x2b7938(0xaf)]?_0x40b2a2:{'default':_0x40b2a2};};function a267_0x3572(_0x2d73e1,_0x3a72ae){const _0xbc3df7=a267_0x5584();return a267_0x3572=function(_0x1f441c,_0x29b214){_0x1f441c=_0x1f441c-0xa1;let _0x5584e1=_0xbc3df7[_0x1f441c];return _0x5584e1;},a267_0x3572(_0x2d73e1,_0x3a72ae);}Object['defineProperty'](exports,a267_0x1d5890(0xaf),{'value':!![]});const logger_enums_1=require(a267_0x1d5890(0xb6)),path_1=__importDefault(require(a267_0x1d5890(0xba))),promises_1=require(a267_0x1d5890(0xab)),utils_1=require(a267_0x1d5890(0xa5)),job_1=require('../../../../constants/job');class StateManager{constructor(_0x566830){const _0x2d44af=a267_0x1d5890;this['statePath']=StateManager[_0x2d44af(0xaa)](_0x566830);}static['getJobStatePath'](_0x1873a4){const _0xf2eb0d=a267_0x1d5890;return path_1[_0xf2eb0d(0xc0)][_0xf2eb0d(0xbc)](_0x1873a4,job_1[_0xf2eb0d(0xb4)]);}static async['create'](_0x3b40f2,_0x590619){const _0x567340=a267_0x1d5890,_0xa44ffe=StateManager[_0x567340(0xaa)](_0x3b40f2),_0x18f164={'id':_0x590619,'status':logger_enums_1[_0x567340(0xb3)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x567340(0xa4)])(_0xa44ffe,JSON['stringify'](_0x18f164));}static async['getJobState'](_0x134e8c){const _0x4c6b67=a267_0x1d5890,_0x260c45=StateManager[_0x4c6b67(0xaa)](_0x134e8c);if(await utils_1['FsUtils'][_0x4c6b67(0xac)](_0x260c45))return(0x0,promises_1[_0x4c6b67(0xa6)])(_0x260c45,_0x4c6b67(0xcf))[_0x4c6b67(0xa8)](JSON[_0x4c6b67(0xad)]);throw new Error(_0x4c6b67(0xbe));}async[a267_0x1d5890(0xc9)](){const _0x165931=a267_0x1d5890;await(0x0,promises_1['writeFile'])(this[_0x165931(0xa2)],JSON['stringify'](this[_0x165931(0xcc)]));}async[a267_0x1d5890(0xb2)](){const _0x3503f0=a267_0x1d5890;return this[_0x3503f0(0xcc)]=await(0x0,promises_1[_0x3503f0(0xa6)])(this[_0x3503f0(0xa2)],_0x3503f0(0xcf))[_0x3503f0(0xa8)](JSON['parse']),this;}async[a267_0x1d5890(0xbf)](){const _0x13ae2d=a267_0x1d5890;this[_0x13ae2d(0xcc)][_0x13ae2d(0xcd)]=logger_enums_1[_0x13ae2d(0xb3)][_0x13ae2d(0xa7)],this[_0x13ae2d(0xcc)]['createdDate']=new Date()[_0x13ae2d(0xc7)](),await this[_0x13ae2d(0xc9)]();}async['setCompleted'](){const _0xee8280=a267_0x1d5890;this[_0xee8280(0xcc)][_0xee8280(0xcd)]=logger_enums_1['JobStatus'][_0xee8280(0xc4)],this[_0xee8280(0xcc)][_0xee8280(0xc1)]=new Date()[_0xee8280(0xc7)](),await this[_0xee8280(0xc9)]();}async['setError']({message:_0x29b0b0}){const _0x4e9c24=a267_0x1d5890;this[_0x4e9c24(0xcc)]['status']=logger_enums_1[_0x4e9c24(0xb3)]['FAILED'],this[_0x4e9c24(0xcc)][_0x4e9c24(0xc1)]=new Date()[_0x4e9c24(0xc7)](),this[_0x4e9c24(0xcc)][_0x4e9c24(0xb0)]=_0x29b0b0,await this[_0x4e9c24(0xc9)]();}['addWarning'](_0x5df569){const _0x3133d4=a267_0x1d5890;return this[_0x3133d4(0xcc)][_0x3133d4(0xb9)][_0x3133d4(0xce)](_0x5df569),this[_0x3133d4(0xc9)]();}}exports[a267_0x1d5890(0xc0)]=StateManager;