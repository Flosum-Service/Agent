const a268_0x4cc8a8=a268_0x3a5c;(function(_0x34770a,_0x38ba97){const _0xaa565d=a268_0x3a5c,_0x16b806=_0x34770a();while(!![]){try{const _0x632a31=-parseInt(_0xaa565d(0x129))/0x1+-parseInt(_0xaa565d(0x12d))/0x2+-parseInt(_0xaa565d(0x13a))/0x3+parseInt(_0xaa565d(0x11e))/0x4+parseInt(_0xaa565d(0x11c))/0x5*(-parseInt(_0xaa565d(0x13f))/0x6)+-parseInt(_0xaa565d(0x138))/0x7+parseInt(_0xaa565d(0x116))/0x8;if(_0x632a31===_0x38ba97)break;else _0x16b806['push'](_0x16b806['shift']());}catch(_0x5020ee){_0x16b806['push'](_0x16b806['shift']());}}}(a268_0x1546,0x9ba9c));const a268_0x2ef44c=(function(){let _0x10edc3=!![];return function(_0x3cdf57,_0x1d82a2){const _0x5e12c2=_0x10edc3?function(){const _0x63536e=a268_0x3a5c;if(_0x1d82a2){const _0x5e6106=_0x1d82a2[_0x63536e(0x12f)](_0x3cdf57,arguments);return _0x1d82a2=null,_0x5e6106;}}:function(){};return _0x10edc3=![],_0x5e12c2;};}()),a268_0x527b0c=a268_0x2ef44c(this,function(){const _0x282848=a268_0x3a5c;return a268_0x527b0c[_0x282848(0x11a)]()[_0x282848(0x121)]('(((.+)+)+)+$')[_0x282848(0x11a)]()['constructor'](a268_0x527b0c)[_0x282848(0x121)](_0x282848(0x11b));});a268_0x527b0c();'use strict';var __importDefault=this&&this[a268_0x4cc8a8(0x11d)]||function(_0x17892e){const _0x2188e9=a268_0x4cc8a8;return _0x17892e&&_0x17892e[_0x2188e9(0x137)]?_0x17892e:{'default':_0x17892e};};Object[a268_0x4cc8a8(0x119)](exports,a268_0x4cc8a8(0x137),{'value':!![]});const logger_enums_1=require('../enums/logger.enums'),path_1=__importDefault(require(a268_0x4cc8a8(0x118))),promises_1=require(a268_0x4cc8a8(0x13c)),utils_1=require(a268_0x4cc8a8(0x136)),job_1=require(a268_0x4cc8a8(0x135));function a268_0x1546(){const _0x464697=['parse','utf-8','default','jobState','333821jSJyBq','stringify','Job\x20not\x20found.','setError','1667660sdwGPj','FAILED','apply','getTime','isExistsPath','completedDate','writeFile','setInProgress','../../../../constants/job','@flosum/utils','__esModule','6135591UJjDHh','join','2443407vEnlGi','update','fs/promises','status','getJobStatePath','44286YDcLcg','JOB_LOG_STATE_FILENAME','29196704xakRpi','statePath','path','defineProperty','toString','(((.+)+)+)+$','730IQxmSS','__importDefault','3697068WWsXom','IN_PROGRESS','getJobState','search','JobStatus','readFile','COMPLETED'];a268_0x1546=function(){return _0x464697;};return a268_0x1546();}function a268_0x3a5c(_0x58520f,_0x291736){const _0x46f4e0=a268_0x1546();return a268_0x3a5c=function(_0x527b0c,_0x2ef44c){_0x527b0c=_0x527b0c-0x115;let _0x15464d=_0x46f4e0[_0x527b0c];return _0x15464d;},a268_0x3a5c(_0x58520f,_0x291736);}class StateManager{constructor(_0x5da084){const _0x21adf4=a268_0x4cc8a8;this[_0x21adf4(0x117)]=StateManager[_0x21adf4(0x13e)](_0x5da084);}static[a268_0x4cc8a8(0x13e)](_0x473fbf){const _0x3fe40c=a268_0x4cc8a8;return path_1[_0x3fe40c(0x127)][_0x3fe40c(0x139)](_0x473fbf,job_1[_0x3fe40c(0x115)]);}static async['create'](_0x56720d,_0x5dd0a3){const _0x406206=a268_0x4cc8a8,_0x127254=StateManager[_0x406206(0x13e)](_0x56720d),_0x2e7db8={'id':_0x5dd0a3,'status':logger_enums_1[_0x406206(0x122)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x127254,JSON[_0x406206(0x12a)](_0x2e7db8));}static async[a268_0x4cc8a8(0x120)](_0x4c7e8e){const _0x1141db=a268_0x4cc8a8,_0x4f0a28=StateManager[_0x1141db(0x13e)](_0x4c7e8e);if(await utils_1['FsUtils'][_0x1141db(0x131)](_0x4f0a28))return(0x0,promises_1[_0x1141db(0x123)])(_0x4f0a28,_0x1141db(0x126))['then'](JSON[_0x1141db(0x125)]);throw new Error(_0x1141db(0x12b));}async[a268_0x4cc8a8(0x13b)](){const _0x44dfea=a268_0x4cc8a8;await(0x0,promises_1[_0x44dfea(0x133)])(this[_0x44dfea(0x117)],JSON[_0x44dfea(0x12a)](this[_0x44dfea(0x128)]));}async['init'](){const _0x135861=a268_0x4cc8a8;return this['jobState']=await(0x0,promises_1[_0x135861(0x123)])(this[_0x135861(0x117)],'utf-8')['then'](JSON[_0x135861(0x125)]),this;}async[a268_0x4cc8a8(0x134)](){const _0x47a580=a268_0x4cc8a8;this[_0x47a580(0x128)]['status']=logger_enums_1[_0x47a580(0x122)][_0x47a580(0x11f)],this[_0x47a580(0x128)]['createdDate']=new Date()[_0x47a580(0x130)](),await this['update']();}async['setCompleted'](){const _0x39a4ef=a268_0x4cc8a8;this[_0x39a4ef(0x128)][_0x39a4ef(0x13d)]=logger_enums_1[_0x39a4ef(0x122)][_0x39a4ef(0x124)],this[_0x39a4ef(0x128)][_0x39a4ef(0x132)]=new Date()['getTime'](),await this[_0x39a4ef(0x13b)]();}async[a268_0x4cc8a8(0x12c)]({message:_0x3e7569}){const _0xc99078=a268_0x4cc8a8;this['jobState']['status']=logger_enums_1['JobStatus'][_0xc99078(0x12e)],this[_0xc99078(0x128)][_0xc99078(0x132)]=new Date()[_0xc99078(0x130)](),this[_0xc99078(0x128)]['error']=_0x3e7569,await this[_0xc99078(0x13b)]();}['addWarning'](_0x4c1790){const _0x3a2594=a268_0x4cc8a8;return this[_0x3a2594(0x128)]['warnings']['push'](_0x4c1790),this[_0x3a2594(0x13b)]();}}exports[a268_0x4cc8a8(0x127)]=StateManager;