const a267_0x2d5ac7=a267_0x2df4;(function(_0x2219f4,_0x328c66){const _0x5b215c=a267_0x2df4,_0x21b036=_0x2219f4();while(!![]){try{const _0x1b15e7=parseInt(_0x5b215c(0x218))/0x1+-parseInt(_0x5b215c(0x20f))/0x2+parseInt(_0x5b215c(0x20e))/0x3+parseInt(_0x5b215c(0x203))/0x4*(parseInt(_0x5b215c(0x212))/0x5)+parseInt(_0x5b215c(0x213))/0x6+parseInt(_0x5b215c(0x21e))/0x7*(-parseInt(_0x5b215c(0x202))/0x8)+-parseInt(_0x5b215c(0x21f))/0x9;if(_0x1b15e7===_0x328c66)break;else _0x21b036['push'](_0x21b036['shift']());}catch(_0x1ee5c6){_0x21b036['push'](_0x21b036['shift']());}}}(a267_0xbd31,0x40e1d));const a267_0x44f9b4=(function(){let _0x3a4fc0=!![];return function(_0x28a29e,_0x189aa0){const _0xd3a2bb=_0x3a4fc0?function(){const _0xa0d251=a267_0x2df4;if(_0x189aa0){const _0x1e2f40=_0x189aa0[_0xa0d251(0x1fa)](_0x28a29e,arguments);return _0x189aa0=null,_0x1e2f40;}}:function(){};return _0x3a4fc0=![],_0xd3a2bb;};}()),a267_0x2ccaef=a267_0x44f9b4(this,function(){const _0x444df4=a267_0x2df4;return a267_0x2ccaef[_0x444df4(0x217)]()['search']('(((.+)+)+)+$')[_0x444df4(0x217)]()[_0x444df4(0x219)](a267_0x2ccaef)[_0x444df4(0x222)](_0x444df4(0x214));});function a267_0xbd31(){const _0x4d0e75=['QUEUED','../enums/logger.enums','isExistsPath','default','IN_PROGRESS','update','apply','error','status','fs/promises','setInProgress','push','then','parse','1874648WZrOvJ','472LZqogB','getJobStatePath','__importDefault','JobStatus','writeFile','JOB_LOG_STATE_FILENAME','Job\x20not\x20found.','@flosum/utils','getJobState','createdDate','statePath','1477905ksTeTU','653030oRhTXD','stringify','create','11060mCHieI','1490148MEJKuG','(((.+)+)+)+$','addWarning','setError','toString','192145gNDYzS','constructor','getTime','FsUtils','join','readFile','7GnaPqG','3307959FrVMKv','completedDate','setCompleted','search','jobState','utf-8','__esModule'];a267_0xbd31=function(){return _0x4d0e75;};return a267_0xbd31();}a267_0x2ccaef();'use strict';var __importDefault=this&&this[a267_0x2d5ac7(0x205)]||function(_0x278f1e){const _0x36fa11=a267_0x2d5ac7;return _0x278f1e&&_0x278f1e[_0x36fa11(0x1f3)]?_0x278f1e:{'default':_0x278f1e};};Object['defineProperty'](exports,a267_0x2d5ac7(0x1f3),{'value':!![]});const logger_enums_1=require(a267_0x2d5ac7(0x1f5)),path_1=__importDefault(require('path')),promises_1=require(a267_0x2d5ac7(0x1fd)),utils_1=require(a267_0x2d5ac7(0x20a)),job_1=require('../../../../constants/job');class StateManager{constructor(_0x2d1893){const _0x395e07=a267_0x2d5ac7;this[_0x395e07(0x20d)]=StateManager[_0x395e07(0x204)](_0x2d1893);}static[a267_0x2d5ac7(0x204)](_0x2505f7){const _0x4e3a70=a267_0x2d5ac7;return path_1[_0x4e3a70(0x1f7)][_0x4e3a70(0x21c)](_0x2505f7,job_1[_0x4e3a70(0x208)]);}static async[a267_0x2d5ac7(0x211)](_0x6aa9a,_0xd3dc37){const _0x5793f0=a267_0x2d5ac7,_0x5db610=StateManager[_0x5793f0(0x204)](_0x6aa9a),_0x572426={'id':_0xd3dc37,'status':logger_enums_1['JobStatus'][_0x5793f0(0x1f4)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x5793f0(0x207)])(_0x5db610,JSON['stringify'](_0x572426));}static async[a267_0x2d5ac7(0x20b)](_0x1b4e63){const _0x15ac90=a267_0x2d5ac7,_0x3f84a8=StateManager['getJobStatePath'](_0x1b4e63);if(await utils_1[_0x15ac90(0x21b)][_0x15ac90(0x1f6)](_0x3f84a8))return(0x0,promises_1['readFile'])(_0x3f84a8,_0x15ac90(0x1f2))[_0x15ac90(0x200)](JSON[_0x15ac90(0x201)]);throw new Error(_0x15ac90(0x209));}async[a267_0x2d5ac7(0x1f9)](){const _0x39e665=a267_0x2d5ac7;await(0x0,promises_1[_0x39e665(0x207)])(this['statePath'],JSON[_0x39e665(0x210)](this[_0x39e665(0x1f1)]));}async['init'](){const _0x11d467=a267_0x2d5ac7;return this['jobState']=await(0x0,promises_1[_0x11d467(0x21d)])(this[_0x11d467(0x20d)],_0x11d467(0x1f2))[_0x11d467(0x200)](JSON[_0x11d467(0x201)]),this;}async[a267_0x2d5ac7(0x1fe)](){const _0x309d3a=a267_0x2d5ac7;this['jobState'][_0x309d3a(0x1fc)]=logger_enums_1[_0x309d3a(0x206)][_0x309d3a(0x1f8)],this['jobState'][_0x309d3a(0x20c)]=new Date()['getTime'](),await this[_0x309d3a(0x1f9)]();}async[a267_0x2d5ac7(0x221)](){const _0x5d075a=a267_0x2d5ac7;this[_0x5d075a(0x1f1)][_0x5d075a(0x1fc)]=logger_enums_1['JobStatus']['COMPLETED'],this[_0x5d075a(0x1f1)]['completedDate']=new Date()[_0x5d075a(0x21a)](),await this['update']();}async[a267_0x2d5ac7(0x216)]({message:_0x2d37b2}){const _0x36e383=a267_0x2d5ac7;this[_0x36e383(0x1f1)][_0x36e383(0x1fc)]=logger_enums_1[_0x36e383(0x206)]['FAILED'],this[_0x36e383(0x1f1)][_0x36e383(0x220)]=new Date()[_0x36e383(0x21a)](),this['jobState'][_0x36e383(0x1fb)]=_0x2d37b2,await this[_0x36e383(0x1f9)]();}[a267_0x2d5ac7(0x215)](_0x31eae9){const _0x175d5f=a267_0x2d5ac7;return this[_0x175d5f(0x1f1)]['warnings'][_0x175d5f(0x1ff)](_0x31eae9),this[_0x175d5f(0x1f9)]();}}function a267_0x2df4(_0x4f5927,_0x2f9bd8){const _0x2d9ba0=a267_0xbd31();return a267_0x2df4=function(_0x2ccaef,_0x44f9b4){_0x2ccaef=_0x2ccaef-0x1f1;let _0xbd31a6=_0x2d9ba0[_0x2ccaef];return _0xbd31a6;},a267_0x2df4(_0x4f5927,_0x2f9bd8);}exports[a267_0x2d5ac7(0x1f7)]=StateManager;