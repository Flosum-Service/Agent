const a267_0x4dd014=a267_0x5b82;(function(_0x57f61b,_0x20b066){const _0x4c06b6=a267_0x5b82,_0x57689b=_0x57f61b();while(!![]){try{const _0x311a5b=parseInt(_0x4c06b6(0xc3))/0x1*(parseInt(_0x4c06b6(0xbc))/0x2)+-parseInt(_0x4c06b6(0xae))/0x3*(-parseInt(_0x4c06b6(0xc8))/0x4)+-parseInt(_0x4c06b6(0xb8))/0x5*(-parseInt(_0x4c06b6(0xa3))/0x6)+parseInt(_0x4c06b6(0xa1))/0x7+parseInt(_0x4c06b6(0xbe))/0x8+-parseInt(_0x4c06b6(0xb4))/0x9+-parseInt(_0x4c06b6(0x9e))/0xa;if(_0x311a5b===_0x20b066)break;else _0x57689b['push'](_0x57689b['shift']());}catch(_0x3254ff){_0x57689b['push'](_0x57689b['shift']());}}}(a267_0x44ac,0x71452));function a267_0x44ac(){const _0x52d890=['getJobState','completedDate','fs/promises','stringify','isExistsPath','6194925qFkSLS','error','__esModule','jobState','5icAxvR','apply','constructor','FAILED','5612KteZOr','utf-8','1052480gLxapT','@flosum/utils','setError','FsUtils','statePath','27jBYPyC','../../../../constants/job','parse','create','IN_PROGRESS','309964tAXwDM','../enums/logger.enums','getTime','5835710QzhJoP','getJobStatePath','toString','3828503WdxOQG','writeFile','4029810osMflW','JobStatus','default','defineProperty','status','update','setCompleted','(((.+)+)+)+$','path','search','readFile','12zeoYNA'];a267_0x44ac=function(){return _0x52d890;};return a267_0x44ac();}const a267_0xe83506=(function(){let _0x116932=!![];return function(_0x2049b2,_0x12d0c1){const _0x12b01a=_0x116932?function(){const _0x466cac=a267_0x5b82;if(_0x12d0c1){const _0x38c9ac=_0x12d0c1[_0x466cac(0xb9)](_0x2049b2,arguments);return _0x12d0c1=null,_0x38c9ac;}}:function(){};return _0x116932=![],_0x12b01a;};}()),a267_0x44e535=a267_0xe83506(this,function(){const _0x38fb9b=a267_0x5b82;return a267_0x44e535[_0x38fb9b(0xa0)]()['search'](_0x38fb9b(0xaa))['toString']()[_0x38fb9b(0xba)](a267_0x44e535)[_0x38fb9b(0xac)](_0x38fb9b(0xaa));});a267_0x44e535();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x52a8ca){const _0x2e63ec=a267_0x5b82;return _0x52a8ca&&_0x52a8ca[_0x2e63ec(0xb6)]?_0x52a8ca:{'default':_0x52a8ca};};Object[a267_0x4dd014(0xa6)](exports,'__esModule',{'value':!![]});const logger_enums_1=require(a267_0x4dd014(0x9c)),path_1=__importDefault(require(a267_0x4dd014(0xab))),promises_1=require(a267_0x4dd014(0xb1)),utils_1=require(a267_0x4dd014(0xbf)),job_1=require(a267_0x4dd014(0xc4));function a267_0x5b82(_0x349975,_0x557a34){const _0x227801=a267_0x44ac();return a267_0x5b82=function(_0x44e535,_0xe83506){_0x44e535=_0x44e535-0x9c;let _0x44acef=_0x227801[_0x44e535];return _0x44acef;},a267_0x5b82(_0x349975,_0x557a34);}class StateManager{constructor(_0x142329){const _0x28d085=a267_0x4dd014;this[_0x28d085(0xc2)]=StateManager[_0x28d085(0x9f)](_0x142329);}static[a267_0x4dd014(0x9f)](_0x388e21){const _0x49a202=a267_0x4dd014;return path_1[_0x49a202(0xa5)]['join'](_0x388e21,job_1['JOB_LOG_STATE_FILENAME']);}static async[a267_0x4dd014(0xc6)](_0x9dae26,_0x42e7b7){const _0xb16cd1=a267_0x4dd014,_0x2e391d=StateManager[_0xb16cd1(0x9f)](_0x9dae26),_0x14ab2f={'id':_0x42e7b7,'status':logger_enums_1['JobStatus']['QUEUED'],'createdDate':null,'completedDate':null,'error':null};await(0x0,promises_1[_0xb16cd1(0xa2)])(_0x2e391d,JSON[_0xb16cd1(0xb2)](_0x14ab2f));}static async[a267_0x4dd014(0xaf)](_0x276356){const _0x5dd057=a267_0x4dd014,_0x3c0af3=StateManager[_0x5dd057(0x9f)](_0x276356);if(await utils_1[_0x5dd057(0xc1)][_0x5dd057(0xb3)](_0x3c0af3))return(0x0,promises_1[_0x5dd057(0xad)])(_0x3c0af3,_0x5dd057(0xbd))['then'](JSON[_0x5dd057(0xc5)]);throw new Error('Job\x20not\x20found.');}async[a267_0x4dd014(0xa8)](){const _0x387fcc=a267_0x4dd014;await(0x0,promises_1[_0x387fcc(0xa2)])(this['statePath'],JSON[_0x387fcc(0xb2)](this[_0x387fcc(0xb7)]));}async['init'](){const _0x71d866=a267_0x4dd014;return this[_0x71d866(0xb7)]=await(0x0,promises_1[_0x71d866(0xad)])(this[_0x71d866(0xc2)],'utf-8')['then'](JSON[_0x71d866(0xc5)]),this;}async['setInProgress'](){const _0x52e83e=a267_0x4dd014;this[_0x52e83e(0xb7)][_0x52e83e(0xa7)]=logger_enums_1['JobStatus'][_0x52e83e(0xc7)],this[_0x52e83e(0xb7)]['createdDate']=new Date()[_0x52e83e(0x9d)](),await this[_0x52e83e(0xa8)]();}async[a267_0x4dd014(0xa9)](){const _0x30a596=a267_0x4dd014;this[_0x30a596(0xb7)][_0x30a596(0xa7)]=logger_enums_1[_0x30a596(0xa4)]['COMPLETED'],this[_0x30a596(0xb7)][_0x30a596(0xb0)]=new Date()[_0x30a596(0x9d)](),await this[_0x30a596(0xa8)]();}async[a267_0x4dd014(0xc0)]({message:_0xf9f0fb}){const _0x40aa05=a267_0x4dd014;this[_0x40aa05(0xb7)][_0x40aa05(0xa7)]=logger_enums_1[_0x40aa05(0xa4)][_0x40aa05(0xbb)],this[_0x40aa05(0xb7)][_0x40aa05(0xb0)]=new Date()[_0x40aa05(0x9d)](),this['jobState'][_0x40aa05(0xb5)]=_0xf9f0fb,await this[_0x40aa05(0xa8)]();}}exports[a267_0x4dd014(0xa5)]=StateManager;