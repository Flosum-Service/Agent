const a268_0xd29f18=a268_0xf826;(function(_0x34a6ed,_0x19e01e){const _0x511375=a268_0xf826,_0x4cbdaa=_0x34a6ed();while(!![]){try{const _0x36d528=-parseInt(_0x511375(0x1fd))/0x1+parseInt(_0x511375(0x1fa))/0x2*(-parseInt(_0x511375(0x1f6))/0x3)+-parseInt(_0x511375(0x1ef))/0x4*(parseInt(_0x511375(0x207))/0x5)+-parseInt(_0x511375(0x1eb))/0x6*(-parseInt(_0x511375(0x211))/0x7)+parseInt(_0x511375(0x1ee))/0x8+parseInt(_0x511375(0x1f3))/0x9+parseInt(_0x511375(0x20e))/0xa;if(_0x36d528===_0x19e01e)break;else _0x4cbdaa['push'](_0x4cbdaa['shift']());}catch(_0x2b551c){_0x4cbdaa['push'](_0x4cbdaa['shift']());}}}(a268_0x63d3,0xcc735));const a268_0x1de3ba=(function(){let _0x1a4b2a=!![];return function(_0x5c464f,_0x1993d5){const _0x3d1ca1=_0x1a4b2a?function(){if(_0x1993d5){const _0x12328a=_0x1993d5['apply'](_0x5c464f,arguments);return _0x1993d5=null,_0x12328a;}}:function(){};return _0x1a4b2a=![],_0x3d1ca1;};}()),a268_0xf177e6=a268_0x1de3ba(this,function(){const _0x298236=a268_0xf826;return a268_0xf177e6[_0x298236(0x1ec)]()['search']('(((.+)+)+)+$')[_0x298236(0x1ec)]()['constructor'](a268_0xf177e6)[_0x298236(0x20c)](_0x298236(0x200));});a268_0xf177e6();function a268_0xf826(_0x3c23ae,_0x592e05){const _0x29b029=a268_0x63d3();return a268_0xf826=function(_0xf177e6,_0x1de3ba){_0xf177e6=_0xf177e6-0x1eb;let _0x63d33=_0x29b029[_0xf177e6];return _0x63d33;},a268_0xf826(_0x3c23ae,_0x592e05);}'use strict';var __importDefault=this&&this[a268_0xd29f18(0x1f9)]||function(_0x56ebf7){const _0x340cd5=a268_0xd29f18;return _0x56ebf7&&_0x56ebf7[_0x340cd5(0x215)]?_0x56ebf7:{'default':_0x56ebf7};};Object[a268_0xd29f18(0x1f7)](exports,a268_0xd29f18(0x215),{'value':!![]});const logger_enums_1=require(a268_0xd29f18(0x212)),path_1=__importDefault(require(a268_0xd29f18(0x204))),promises_1=require('fs/promises'),utils_1=require(a268_0xd29f18(0x202)),job_1=require('../../../../constants/job');function a268_0x63d3(){const _0x2a762d=['3642oGqbXd','toString','getJobStatePath','8297024wIQNxS','4mfFcka','parse','join','setInProgress','12478806pgpQCw','push','then','3046713DCPzUV','defineProperty','QUEUED','__importDefault','2saLASz','JOB_LOG_STATE_FILENAME','getTime','610787QAXoFC','setError','JobStatus','(((.+)+)+)+$','writeFile','@flosum/utils','status','path','default','FAILED','7269930zgzvLx','createdDate','update','addWarning','COMPLETED','search','stringify','10358260SURqEl','jobState','readFile','5285yBaWyt','../enums/logger.enums','statePath','isExistsPath','__esModule','warnings','getJobState'];a268_0x63d3=function(){return _0x2a762d;};return a268_0x63d3();}class StateManager{constructor(_0x23106a){const _0x191a6c=a268_0xd29f18;this[_0x191a6c(0x213)]=StateManager[_0x191a6c(0x1ed)](_0x23106a);}static['getJobStatePath'](_0x240e24){const _0xa63ee7=a268_0xd29f18;return path_1[_0xa63ee7(0x205)][_0xa63ee7(0x1f1)](_0x240e24,job_1[_0xa63ee7(0x1fb)]);}static async['create'](_0x551359,_0x66ea8a){const _0x32a2d8=a268_0xd29f18,_0x9784b8=StateManager[_0x32a2d8(0x1ed)](_0x551359),_0xae4674={'id':_0x66ea8a,'status':logger_enums_1[_0x32a2d8(0x1ff)][_0x32a2d8(0x1f8)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x32a2d8(0x201)])(_0x9784b8,JSON[_0x32a2d8(0x20d)](_0xae4674));}static async[a268_0xd29f18(0x217)](_0x570393){const _0x32fe5=a268_0xd29f18,_0xe8bd36=StateManager[_0x32fe5(0x1ed)](_0x570393);if(await utils_1['FsUtils'][_0x32fe5(0x214)](_0xe8bd36))return(0x0,promises_1[_0x32fe5(0x210)])(_0xe8bd36,'utf-8')[_0x32fe5(0x1f5)](JSON['parse']);throw new Error('Job\x20not\x20found.');}async[a268_0xd29f18(0x209)](){const _0x483f0f=a268_0xd29f18;await(0x0,promises_1[_0x483f0f(0x201)])(this[_0x483f0f(0x213)],JSON[_0x483f0f(0x20d)](this['jobState']));}async['init'](){const _0x15f899=a268_0xd29f18;return this[_0x15f899(0x20f)]=await(0x0,promises_1[_0x15f899(0x210)])(this[_0x15f899(0x213)],'utf-8')['then'](JSON[_0x15f899(0x1f0)]),this;}async[a268_0xd29f18(0x1f2)](){const _0x54c381=a268_0xd29f18;this[_0x54c381(0x20f)][_0x54c381(0x203)]=logger_enums_1[_0x54c381(0x1ff)]['IN_PROGRESS'],this['jobState'][_0x54c381(0x208)]=new Date()[_0x54c381(0x1fc)](),await this['update']();}async['setCompleted'](){const _0x4f8792=a268_0xd29f18;this[_0x4f8792(0x20f)][_0x4f8792(0x203)]=logger_enums_1[_0x4f8792(0x1ff)][_0x4f8792(0x20b)],this[_0x4f8792(0x20f)]['completedDate']=new Date()[_0x4f8792(0x1fc)](),await this[_0x4f8792(0x209)]();}async[a268_0xd29f18(0x1fe)]({message:_0x297cb6}){const _0x1e42c5=a268_0xd29f18;this[_0x1e42c5(0x20f)]['status']=logger_enums_1[_0x1e42c5(0x1ff)][_0x1e42c5(0x206)],this[_0x1e42c5(0x20f)]['completedDate']=new Date()[_0x1e42c5(0x1fc)](),this[_0x1e42c5(0x20f)]['error']=_0x297cb6,await this['update']();}[a268_0xd29f18(0x20a)](_0x37ce06){const _0x2b639e=a268_0xd29f18;return this[_0x2b639e(0x20f)][_0x2b639e(0x216)][_0x2b639e(0x1f4)](_0x37ce06),this[_0x2b639e(0x209)]();}}exports[a268_0xd29f18(0x205)]=StateManager;