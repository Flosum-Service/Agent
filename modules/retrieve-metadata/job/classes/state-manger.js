const a267_0x185ee5=a267_0x3c85;(function(_0x12a862,_0x5103e7){const _0x25136c=a267_0x3c85,_0x3738e9=_0x12a862();while(!![]){try{const _0x29fd35=-parseInt(_0x25136c(0xf6))/0x1+parseInt(_0x25136c(0xf8))/0x2+-parseInt(_0x25136c(0xd9))/0x3*(parseInt(_0x25136c(0xdd))/0x4)+parseInt(_0x25136c(0xea))/0x5*(-parseInt(_0x25136c(0xe1))/0x6)+parseInt(_0x25136c(0xe5))/0x7+-parseInt(_0x25136c(0xef))/0x8+-parseInt(_0x25136c(0xf7))/0x9*(-parseInt(_0x25136c(0x105))/0xa);if(_0x29fd35===_0x5103e7)break;else _0x3738e9['push'](_0x3738e9['shift']());}catch(_0x57260e){_0x3738e9['push'](_0x3738e9['shift']());}}}(a267_0x2057,0xcfd2a));const a267_0x5b83bb=(function(){let _0x2b04eb=!![];return function(_0x287647,_0xa8b39a){const _0x14dc86=_0x2b04eb?function(){const _0x2304b9=a267_0x3c85;if(_0xa8b39a){const _0xe43ce2=_0xa8b39a[_0x2304b9(0xdf)](_0x287647,arguments);return _0xa8b39a=null,_0xe43ce2;}}:function(){};return _0x2b04eb=![],_0x14dc86;};}()),a267_0x4d8b24=a267_0x5b83bb(this,function(){const _0x1da588=a267_0x3c85;return a267_0x4d8b24[_0x1da588(0xee)]()[_0x1da588(0xfb)](_0x1da588(0xfe))['toString']()[_0x1da588(0x104)](a267_0x4d8b24)[_0x1da588(0xfb)](_0x1da588(0xfe));});a267_0x4d8b24();'use strict';var __importDefault=this&&this[a267_0x185ee5(0x106)]||function(_0x29127e){const _0x3f026b=a267_0x185ee5;return _0x29127e&&_0x29127e[_0x3f026b(0xdc)]?_0x29127e:{'default':_0x29127e};};function a267_0x3c85(_0xc92c7,_0x37583e){const _0x317b16=a267_0x2057();return a267_0x3c85=function(_0x4d8b24,_0x5b83bb){_0x4d8b24=_0x4d8b24-0xd9;let _0x20574f=_0x317b16[_0x4d8b24];return _0x20574f;},a267_0x3c85(_0xc92c7,_0x37583e);}Object['defineProperty'](exports,a267_0x185ee5(0xdc),{'value':!![]});function a267_0x2057(){const _0x4d3ca3=['772kKFrxC','utf-8','apply','writeFile','351030fLwYaI','COMPLETED','completedDate','FAILED','10076640pYQhbg','create','../../../../constants/job','path','JobStatus','40hEeRfw','jobState','Job\x20not\x20found.','stringify','toString','8214584ZszwCP','isExistsPath','getJobStatePath','JOB_LOG_STATE_FILENAME','status','QUEUED','FsUtils','820238axdCMr','5697TwcqGo','406728tksxZj','@flosum/utils','setCompleted','search','default','getTime','(((.+)+)+)+$','createdDate','getJobState','parse','error','fs/promises','constructor','40050KtaLaJ','__importDefault','update','15726yZwXun','statePath','../enums/logger.enums','__esModule'];a267_0x2057=function(){return _0x4d3ca3;};return a267_0x2057();}const logger_enums_1=require(a267_0x185ee5(0xdb)),path_1=__importDefault(require(a267_0x185ee5(0xe8))),promises_1=require(a267_0x185ee5(0x103)),utils_1=require(a267_0x185ee5(0xf9)),job_1=require(a267_0x185ee5(0xe7));class StateManager{constructor(_0x20df69){const _0x486fff=a267_0x185ee5;this['statePath']=StateManager[_0x486fff(0xf1)](_0x20df69);}static[a267_0x185ee5(0xf1)](_0xa8f579){const _0x30f1ef=a267_0x185ee5;return path_1[_0x30f1ef(0xfc)]['join'](_0xa8f579,job_1[_0x30f1ef(0xf2)]);}static async[a267_0x185ee5(0xe6)](_0x350148,_0x338406){const _0x1e015c=a267_0x185ee5,_0xcdcd8d=StateManager['getJobStatePath'](_0x350148),_0x2cbcda={'id':_0x338406,'status':logger_enums_1[_0x1e015c(0xe9)][_0x1e015c(0xf4)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x1e015c(0xe0)])(_0xcdcd8d,JSON[_0x1e015c(0xed)](_0x2cbcda));}static async[a267_0x185ee5(0x100)](_0x3bb109){const _0x527a15=a267_0x185ee5,_0x2b237c=StateManager[_0x527a15(0xf1)](_0x3bb109);if(await utils_1[_0x527a15(0xf5)][_0x527a15(0xf0)](_0x2b237c))return(0x0,promises_1['readFile'])(_0x2b237c,_0x527a15(0xde))['then'](JSON[_0x527a15(0x101)]);throw new Error(_0x527a15(0xec));}async['update'](){const _0x10643c=a267_0x185ee5;await(0x0,promises_1[_0x10643c(0xe0)])(this[_0x10643c(0xda)],JSON[_0x10643c(0xed)](this[_0x10643c(0xeb)]));}async['init'](){const _0x3606c6=a267_0x185ee5;return this[_0x3606c6(0xeb)]=await(0x0,promises_1['readFile'])(this[_0x3606c6(0xda)],'utf-8')['then'](JSON[_0x3606c6(0x101)]),this;}async['setInProgress'](){const _0xc54d01=a267_0x185ee5;this[_0xc54d01(0xeb)]['status']=logger_enums_1[_0xc54d01(0xe9)]['IN_PROGRESS'],this[_0xc54d01(0xeb)][_0xc54d01(0xff)]=new Date()[_0xc54d01(0xfd)](),await this[_0xc54d01(0x107)]();}async[a267_0x185ee5(0xfa)](){const _0x5f3443=a267_0x185ee5;this[_0x5f3443(0xeb)][_0x5f3443(0xf3)]=logger_enums_1[_0x5f3443(0xe9)][_0x5f3443(0xe2)],this[_0x5f3443(0xeb)][_0x5f3443(0xe3)]=new Date()[_0x5f3443(0xfd)](),await this['update']();}async['setError']({message:_0x25589f}){const _0x58437b=a267_0x185ee5;this['jobState'][_0x58437b(0xf3)]=logger_enums_1[_0x58437b(0xe9)][_0x58437b(0xe4)],this[_0x58437b(0xeb)][_0x58437b(0xe3)]=new Date()[_0x58437b(0xfd)](),this[_0x58437b(0xeb)][_0x58437b(0x102)]=_0x25589f,await this[_0x58437b(0x107)]();}['addWarning'](_0x306759){const _0x2475b3=a267_0x185ee5;return this[_0x2475b3(0xeb)]['warnings']['push'](_0x306759),this[_0x2475b3(0x107)]();}}exports[a267_0x185ee5(0xfc)]=StateManager;