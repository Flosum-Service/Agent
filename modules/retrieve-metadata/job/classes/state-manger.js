function a268_0x2a0e(){const _0xc62790=['516502HRBvFy','update','11150ipFcOa','create','join','getJobState','completedDate','warnings','890290JNYAkR','getJobStatePath','apply','status','JOB_LOG_STATE_FILENAME','../enums/logger.enums','(((.+)+)+)+$','7887HitKYO','then','7282026lczECj','850mvGxxB','push','JobStatus','8Ijtzhw','writeFile','946770qVSTNS','default','error','QUEUED','statePath','fs/promises','stringify','COMPLETED','__importDefault','setInProgress','constructor','1660PlVTcA','35kUsxVx','Job\x20not\x20found.','2042700WNXjTG','readFile','search','../../../../constants/job','toString','setError','addWarning','utf-8','getTime','path','init','parse','FsUtils','@flosum/utils','jobState','IN_PROGRESS','createdDate'];a268_0x2a0e=function(){return _0xc62790;};return a268_0x2a0e();}const a268_0x5843c0=a268_0x392c;(function(_0x4ce348,_0x221391){const _0x38bf2e=a268_0x392c,_0x44f5b3=_0x4ce348();while(!![]){try{const _0x240bdc=parseInt(_0x38bf2e(0xdc))/0x1+-parseInt(_0x38bf2e(0xd4))/0x2+parseInt(_0x38bf2e(0xf9))/0x3+parseInt(_0x38bf2e(0xf6))/0x4*(parseInt(_0x38bf2e(0xe6))/0x5)+parseInt(_0x38bf2e(0xeb))/0x6*(parseInt(_0x38bf2e(0xf7))/0x7)+-parseInt(_0x38bf2e(0xe9))/0x8*(parseInt(_0x38bf2e(0xe5))/0x9)+-parseInt(_0x38bf2e(0xd6))/0xa*(parseInt(_0x38bf2e(0xe3))/0xb);if(_0x240bdc===_0x221391)break;else _0x44f5b3['push'](_0x44f5b3['shift']());}catch(_0x422a3b){_0x44f5b3['push'](_0x44f5b3['shift']());}}}(a268_0x2a0e,0x89ab7));const a268_0xfb7fe0=(function(){let _0x281116=!![];return function(_0x399221,_0x3508e6){const _0x4274e1=_0x281116?function(){const _0x4c42af=a268_0x392c;if(_0x3508e6){const _0x734561=_0x3508e6[_0x4c42af(0xde)](_0x399221,arguments);return _0x3508e6=null,_0x734561;}}:function(){};return _0x281116=![],_0x4274e1;};}()),a268_0x21516b=a268_0xfb7fe0(this,function(){const _0x591e6c=a268_0x392c;return a268_0x21516b[_0x591e6c(0xc7)]()[_0x591e6c(0xfb)](_0x591e6c(0xe2))[_0x591e6c(0xc7)]()[_0x591e6c(0xf5)](a268_0x21516b)[_0x591e6c(0xfb)](_0x591e6c(0xe2));});a268_0x21516b();'use strict';var __importDefault=this&&this[a268_0x5843c0(0xf3)]||function(_0x3368f8){return _0x3368f8&&_0x3368f8['__esModule']?_0x3368f8:{'default':_0x3368f8};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const logger_enums_1=require(a268_0x5843c0(0xe1)),path_1=__importDefault(require(a268_0x5843c0(0xcc))),promises_1=require(a268_0x5843c0(0xf0)),utils_1=require(a268_0x5843c0(0xd0)),job_1=require(a268_0x5843c0(0xc6));class StateManager{constructor(_0x4cdccf){const _0x2eb9c0=a268_0x5843c0;this[_0x2eb9c0(0xef)]=StateManager['getJobStatePath'](_0x4cdccf);}static['getJobStatePath'](_0x2a5ef2){const _0x3a1b53=a268_0x5843c0;return path_1[_0x3a1b53(0xec)][_0x3a1b53(0xd8)](_0x2a5ef2,job_1[_0x3a1b53(0xe0)]);}static async[a268_0x5843c0(0xd7)](_0x4aedca,_0x1f217e){const _0x3925c1=a268_0x5843c0,_0x11d9b1=StateManager[_0x3925c1(0xdd)](_0x4aedca),_0x571e38={'id':_0x1f217e,'status':logger_enums_1[_0x3925c1(0xe8)][_0x3925c1(0xee)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x3925c1(0xea)])(_0x11d9b1,JSON['stringify'](_0x571e38));}static async[a268_0x5843c0(0xd9)](_0x4a6f2a){const _0x5976b=a268_0x5843c0,_0x589e17=StateManager[_0x5976b(0xdd)](_0x4a6f2a);if(await utils_1[_0x5976b(0xcf)]['isExistsPath'](_0x589e17))return(0x0,promises_1[_0x5976b(0xfa)])(_0x589e17,_0x5976b(0xca))[_0x5976b(0xe4)](JSON[_0x5976b(0xce)]);throw new Error(_0x5976b(0xf8));}async['update'](){const _0x272720=a268_0x5843c0;await(0x0,promises_1[_0x272720(0xea)])(this[_0x272720(0xef)],JSON[_0x272720(0xf1)](this[_0x272720(0xd1)]));}async[a268_0x5843c0(0xcd)](){const _0x92c3fd=a268_0x5843c0;return this[_0x92c3fd(0xd1)]=await(0x0,promises_1[_0x92c3fd(0xfa)])(this[_0x92c3fd(0xef)],_0x92c3fd(0xca))[_0x92c3fd(0xe4)](JSON[_0x92c3fd(0xce)]),this;}async[a268_0x5843c0(0xf4)](){const _0x554a70=a268_0x5843c0;this[_0x554a70(0xd1)][_0x554a70(0xdf)]=logger_enums_1[_0x554a70(0xe8)][_0x554a70(0xd2)],this[_0x554a70(0xd1)][_0x554a70(0xd3)]=new Date()[_0x554a70(0xcb)](),await this['update']();}async['setCompleted'](){const _0x132178=a268_0x5843c0;this['jobState']['status']=logger_enums_1[_0x132178(0xe8)][_0x132178(0xf2)],this[_0x132178(0xd1)]['completedDate']=new Date()['getTime'](),await this[_0x132178(0xd5)]();}async[a268_0x5843c0(0xc8)]({message:_0x4763d8}){const _0x17d50e=a268_0x5843c0;this[_0x17d50e(0xd1)][_0x17d50e(0xdf)]=logger_enums_1[_0x17d50e(0xe8)]['FAILED'],this[_0x17d50e(0xd1)][_0x17d50e(0xda)]=new Date()[_0x17d50e(0xcb)](),this['jobState'][_0x17d50e(0xed)]=_0x4763d8,await this[_0x17d50e(0xd5)]();}[a268_0x5843c0(0xc9)](_0x3da558){const _0x4c2e75=a268_0x5843c0;return this[_0x4c2e75(0xd1)][_0x4c2e75(0xdb)][_0x4c2e75(0xe7)](_0x3da558),this[_0x4c2e75(0xd5)]();}}function a268_0x392c(_0x1d807c,_0x25b47f){const _0x3332a4=a268_0x2a0e();return a268_0x392c=function(_0x21516b,_0xfb7fe0){_0x21516b=_0x21516b-0xc6;let _0x2a0ef5=_0x3332a4[_0x21516b];return _0x2a0ef5;},a268_0x392c(_0x1d807c,_0x25b47f);}exports['default']=StateManager;