function a266_0x4d97(){const _0x5b8c78=['jszip','execute','../../../shared/utils/fs.utils','jobStorePath','1385645psGpSX','1303416rwPfqL','4MiXhfz','1861926anAvzj','writeChunk','items','apply','../../constants','Item\x20\x27','writeFile','stateManager','length','2983197zWfSzq','search','metadataFolder','__esModule','\x27\x20exceed\x20limit\x20\x27','(((.+)+)+)+$','defineProperty','RETRIEVE_RESULTS_IDS_FILENAME','108574KlMwey','shortid','1350AbZEXU','25515FGNWTB','logger','RETRIEVE_RESULT_FOLDER_NAME','8zRcSga','init','stringify','__importDefault','join','addWarning','base64','1LTvZvC','push','toString','.json','create','../../../shared/managers/auth.manager','retrieveResultsPath','default','@flosum/salesforce','./retrieve-factory','730722SgxMYF','generateAsync'];a266_0x4d97=function(){return _0x5b8c78;};return a266_0x4d97();}function a266_0x4076(_0x2077e0,_0x596a2a){const _0x314de0=a266_0x4d97();return a266_0x4076=function(_0x1a824f,_0x54ccb8){_0x1a824f=_0x1a824f-0x11f;let _0x4d9711=_0x314de0[_0x1a824f];return _0x4d9711;},a266_0x4076(_0x2077e0,_0x596a2a);}const a266_0xd04504=a266_0x4076;(function(_0x3f93d4,_0x4c9cc7){const _0x1d61d3=a266_0x4076,_0x21f16f=_0x3f93d4();while(!![]){try{const _0x24266c=parseInt(_0x1d61d3(0x121))/0x1*(parseInt(_0x1d61d3(0x145))/0x2)+-parseInt(_0x1d61d3(0x12b))/0x3*(parseInt(_0x1d61d3(0x133))/0x4)+-parseInt(_0x1d61d3(0x131))/0x5+-parseInt(_0x1d61d3(0x132))/0x6+-parseInt(_0x1d61d3(0x13d))/0x7*(-parseInt(_0x1d61d3(0x14b))/0x8)+parseInt(_0x1d61d3(0x148))/0x9*(parseInt(_0x1d61d3(0x147))/0xa)+parseInt(_0x1d61d3(0x134))/0xb;if(_0x24266c===_0x4c9cc7)break;else _0x21f16f['push'](_0x21f16f['shift']());}catch(_0xd657d5){_0x21f16f['push'](_0x21f16f['shift']());}}}(a266_0x4d97,0x47e6e));const a266_0x54ccb8=(function(){let _0x1d9d26=!![];return function(_0x169893,_0x523e03){const _0x3b3bfc=_0x1d9d26?function(){const _0x5a1314=a266_0x4076;if(_0x523e03){const _0x3e652e=_0x523e03[_0x5a1314(0x137)](_0x169893,arguments);return _0x523e03=null,_0x3e652e;}}:function(){};return _0x1d9d26=![],_0x3b3bfc;};}()),a266_0x1a824f=a266_0x54ccb8(this,function(){const _0x301d90=a266_0x4076;return a266_0x1a824f['toString']()['search']('(((.+)+)+)+$')[_0x301d90(0x123)]()['constructor'](a266_0x1a824f)[_0x301d90(0x13e)](_0x301d90(0x142));});a266_0x1a824f();'use strict';var __importDefault=this&&this[a266_0xd04504(0x14e)]||function(_0x567d27){const _0x51853a=a266_0xd04504;return _0x567d27&&_0x567d27[_0x51853a(0x140)]?_0x567d27:{'default':_0x567d27};};Object[a266_0xd04504(0x143)](exports,a266_0xd04504(0x140),{'value':!![]});const salesforce_1=require(a266_0xd04504(0x129)),manifest_manger_1=__importDefault(require('./manifest-manger')),path_1=__importDefault(require('path')),promises_1=require('fs/promises'),fs_utils_1=require(a266_0xd04504(0x12f)),object_sizeof_1=__importDefault(require('object-sizeof')),retrieve_factory_1=__importDefault(require(a266_0xd04504(0x12a))),auth_manager_1=require(a266_0xd04504(0x126)),constants_1=require(a266_0xd04504(0x138)),shortid_1=__importDefault(require(a266_0xd04504(0x146))),jszip_1=__importDefault(require(a266_0xd04504(0x12d)));class RetrieveMetadata{constructor(_0x4360e7,_0x14f163,_0x57fc43){const _0x264ae7=a266_0xd04504;this[_0x264ae7(0x130)]=_0x4360e7,this[_0x264ae7(0x149)]=_0x14f163,this[_0x264ae7(0x13b)]=_0x57fc43,this[_0x264ae7(0x13f)]=path_1[_0x264ae7(0x128)][_0x264ae7(0x14f)](this[_0x264ae7(0x130)],constants_1[_0x264ae7(0x14a)]),this[_0x264ae7(0x127)]=path_1[_0x264ae7(0x128)][_0x264ae7(0x14f)](this[_0x264ae7(0x130)],constants_1[_0x264ae7(0x144)]);}async[a266_0xd04504(0x135)](_0x1580a1){const _0x42ccd1=a266_0xd04504,_0x3acc1b=(0x0,shortid_1[_0x42ccd1(0x128)])();return await(0x0,promises_1[_0x42ccd1(0x13a)])(path_1[_0x42ccd1(0x128)][_0x42ccd1(0x14f)](this[_0x42ccd1(0x13f)],_0x3acc1b+_0x42ccd1(0x124)),JSON[_0x42ccd1(0x14d)](_0x1580a1)),_0x3acc1b;}async[a266_0xd04504(0x12e)](){const _0x5842e3=a266_0xd04504,{credentials:_0x515a06,declarativeFilter:_0x19b7ed,maxChunkSize:_0x40d964,maxChunkItems:_0x258464,apiVersion:_0x6c82fd}=await new manifest_manger_1[(_0x5842e3(0x128))](this['jobStorePath'])[_0x5842e3(0x14c)](),_0x2c4d95=await salesforce_1['AxiosInstanceUtils'][_0x5842e3(0x125)](new auth_manager_1['AuthManager'](_0x515a06),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),_0x49d2a1=await retrieve_factory_1[_0x5842e3(0x128)][_0x5842e3(0x125)](_0x2c4d95,this['logger'],_0x19b7ed,_0x6c82fd)[_0x5842e3(0x12e)]();await(0x0,fs_utils_1['makeDir'])(this[_0x5842e3(0x13f)]);let _0x2ec077=[];const _0x5d2b8d=[];let _0x316bf5=0x0;for(const _0x3bf5fb in _0x49d2a1[_0x5842e3(0x136)]){for(const {listMetadataItem:_0x13aa11,files:_0x21196c}of _0x49d2a1[_0x5842e3(0x136)][_0x3bf5fb]['components']){const _0x587b06=new jszip_1[(_0x5842e3(0x128))]();for(const _0x5816f5 in _0x21196c){await _0x587b06['file'](_0x5816f5,_0x21196c[_0x5816f5]);}const _0x1830fc=await _0x587b06[_0x5842e3(0x12c)]({'type':_0x5842e3(0x120),'compression':'DEFLATE','compressionOptions':{'level':0x9}}),_0x456cc0={..._0x13aa11,'zip':_0x1830fc},_0x361db0=(0x0,object_sizeof_1[_0x5842e3(0x128)])(_0x456cc0);if(_0x361db0>_0x40d964){await this[_0x5842e3(0x13b)][_0x5842e3(0x11f)](_0x5842e3(0x139)+_0x13aa11['fileName']+'\x27\x20size\x20\x27'+_0x361db0+_0x5842e3(0x141)+_0x40d964+'\x27');continue;}if(_0x316bf5+_0x361db0>_0x40d964||_0x2ec077[_0x5842e3(0x13c)]>=_0x258464){const _0x4bbf3=await this[_0x5842e3(0x135)](_0x2ec077);_0x5d2b8d[_0x5842e3(0x122)](_0x4bbf3),_0x316bf5=0x0,_0x2ec077=[];}_0x2ec077['push'](_0x456cc0),_0x316bf5+=_0x361db0;}}if(_0x2ec077[_0x5842e3(0x13c)]){const _0x399128=await this[_0x5842e3(0x135)](_0x2ec077);_0x5d2b8d[_0x5842e3(0x122)](_0x399128);}await(0x0,promises_1[_0x5842e3(0x13a)])(this[_0x5842e3(0x127)],JSON['stringify'](_0x5d2b8d));}}exports[a266_0xd04504(0x128)]=RetrieveMetadata;