const a267_0x37233c=a267_0xefa6;function a267_0xefa6(_0xabae5b,_0x39b280){const _0x5e71b2=a267_0x1078();return a267_0xefa6=function(_0x551a41,_0x26c56a){_0x551a41=_0x551a41-0x91;let _0x1078e6=_0x5e71b2[_0x551a41];return _0x1078e6;},a267_0xefa6(_0xabae5b,_0x39b280);}(function(_0x182875,_0x6c1b7){const _0x495deb=a267_0xefa6,_0x1a3775=_0x182875();while(!![]){try{const _0xb357e3=parseInt(_0x495deb(0xc2))/0x1*(-parseInt(_0x495deb(0xa9))/0x2)+-parseInt(_0x495deb(0xbb))/0x3+parseInt(_0x495deb(0xb2))/0x4*(parseInt(_0x495deb(0xc7))/0x5)+-parseInt(_0x495deb(0xa4))/0x6+parseInt(_0x495deb(0xa1))/0x7+-parseInt(_0x495deb(0xb5))/0x8+parseInt(_0x495deb(0xb3))/0x9*(parseInt(_0x495deb(0xc1))/0xa);if(_0xb357e3===_0x6c1b7)break;else _0x1a3775['push'](_0x1a3775['shift']());}catch(_0xd49c18){_0x1a3775['push'](_0x1a3775['shift']());}}}(a267_0x1078,0x5f5df));const a267_0x26c56a=(function(){let _0x29b7ee=!![];return function(_0x5dbffa,_0x4efe31){const _0x2632d=_0x29b7ee?function(){const _0x1a205f=a267_0xefa6;if(_0x4efe31){const _0x257618=_0x4efe31[_0x1a205f(0xc5)](_0x5dbffa,arguments);return _0x4efe31=null,_0x257618;}}:function(){};return _0x29b7ee=![],_0x2632d;};}()),a267_0x551a41=a267_0x26c56a(this,function(){const _0x4ccc0d=a267_0xefa6;return a267_0x551a41[_0x4ccc0d(0x9b)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a267_0x551a41)[_0x4ccc0d(0xbf)](_0x4ccc0d(0xaa));});a267_0x551a41();'use strict';var __importDefault=this&&this[a267_0x37233c(0xba)]||function(_0x603648){const _0x523fc8=a267_0x37233c;return _0x603648&&_0x603648[_0x523fc8(0x96)]?_0x603648:{'default':_0x603648};};Object[a267_0x37233c(0xb1)](exports,a267_0x37233c(0x96),{'value':!![]});const salesforce_1=require(a267_0x37233c(0xc3)),manifest_manger_1=__importDefault(require(a267_0x37233c(0xb0))),path_1=__importDefault(require(a267_0x37233c(0xc4))),promises_1=require('fs/promises'),fs_utils_1=require(a267_0x37233c(0x9c)),object_sizeof_1=__importDefault(require(a267_0x37233c(0x9e))),retrieve_factory_1=__importDefault(require(a267_0x37233c(0x99))),auth_manager_1=require(a267_0x37233c(0x9f)),constants_1=require(a267_0x37233c(0xa3)),shortid_1=__importDefault(require(a267_0x37233c(0xbc))),jszip_1=__importDefault(require(a267_0x37233c(0xb8)));class RetrieveMetadata{constructor(_0xf340e3,_0x23b3b5,_0x340d82){const _0x313a4c=a267_0x37233c;this[_0x313a4c(0xa0)]=_0xf340e3,this[_0x313a4c(0xa6)]=_0x23b3b5,this[_0x313a4c(0xa7)]=_0x340d82,this[_0x313a4c(0x94)]=path_1[_0x313a4c(0x97)]['join'](this['jobStorePath'],constants_1[_0x313a4c(0xaf)]),this[_0x313a4c(0x95)]=path_1['default'][_0x313a4c(0xae)](this[_0x313a4c(0xa0)],constants_1[_0x313a4c(0x92)]);}async['writeChunk'](_0x17c68e){const _0x4370b8=a267_0x37233c,_0x117c09=(0x0,shortid_1[_0x4370b8(0x97)])();return await(0x0,promises_1[_0x4370b8(0xb7)])(path_1[_0x4370b8(0x97)][_0x4370b8(0xae)](this[_0x4370b8(0x94)],_0x117c09+_0x4370b8(0xb6)),JSON[_0x4370b8(0x9a)](_0x17c68e)),_0x117c09;}async[a267_0x37233c(0xbd)](){const _0x393e2e=a267_0x37233c,{credentials:_0x13acce,declarativeFilter:_0x1bfd6b,metadataTypes:_0x10c863,maxChunkSize:_0x321390,maxChunkItems:_0x29b9eb,apiVersion:_0x1ea038}=await new manifest_manger_1[(_0x393e2e(0x97))](this[_0x393e2e(0xa0)])[_0x393e2e(0x91)](),_0x2f5bef=await salesforce_1[_0x393e2e(0xa2)][_0x393e2e(0xac)](new auth_manager_1[(_0x393e2e(0xc6))](_0x13acce),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),_0x264f83=await retrieve_factory_1['default'][_0x393e2e(0xac)](_0x2f5bef,this[_0x393e2e(0xa6)],_0x1bfd6b,_0x10c863,_0x1ea038)[_0x393e2e(0xbd)]();await(0x0,fs_utils_1['makeDir'])(this[_0x393e2e(0x94)]);let _0x5b3f8f=[];const _0x2cce7c=[];let _0x52713f=0x0;for(const _0x3722dd in _0x264f83[_0x393e2e(0xa8)]){for(const {listMetadataItem:_0x24ffb6,files:_0x34cab2}of _0x264f83[_0x393e2e(0xa8)][_0x3722dd][_0x393e2e(0xc0)]){const _0x297ac8=new jszip_1[(_0x393e2e(0x97))]();for(const _0xb740b8 in _0x34cab2){await _0x297ac8['file'](_0xb740b8,_0x34cab2[_0xb740b8]);}const _0x48aa2b=await _0x297ac8[_0x393e2e(0xc8)]({'type':'base64','compression':_0x393e2e(0x9d),'compressionOptions':{'level':0x9}}),_0x4485e6={..._0x24ffb6,'zip':_0x48aa2b},_0x5a270f=(0x0,object_sizeof_1[_0x393e2e(0x97)])(_0x4485e6);if(_0x5a270f>_0x321390){await this['stateManager'][_0x393e2e(0x98)](_0x393e2e(0xa5)+_0x24ffb6[_0x393e2e(0xad)]+_0x393e2e(0xbe)+_0x5a270f+_0x393e2e(0xb4)+_0x321390+'\x27');continue;}if(_0x52713f+_0x5a270f>_0x321390||_0x5b3f8f[_0x393e2e(0xab)]>=_0x29b9eb){const _0x48c0f5=await this[_0x393e2e(0xb9)](_0x5b3f8f);_0x2cce7c[_0x393e2e(0x93)](_0x48c0f5),_0x52713f=0x0,_0x5b3f8f=[];}_0x5b3f8f['push'](_0x4485e6),_0x52713f+=_0x5a270f;}}if(_0x5b3f8f[_0x393e2e(0xab)]){const _0x3cb226=await this[_0x393e2e(0xb9)](_0x5b3f8f);_0x2cce7c['push'](_0x3cb226);}await(0x0,promises_1[_0x393e2e(0xb7)])(this['retrieveResultsPath'],JSON[_0x393e2e(0x9a)](_0x2cce7c));}}exports[a267_0x37233c(0x97)]=RetrieveMetadata;function a267_0x1078(){const _0x3c25ec=['./manifest-manger','defineProperty','185208mqtUOV','2485494AsRTJX','\x27\x20exceed\x20limit\x20\x27','4723648XanRzl','.json','writeFile','jszip','writeChunk','__importDefault','75657tLybTw','shortid','execute','\x27\x20size\x20\x27','search','components','40hmmhSd','553402AttDBz','@flosum/salesforce','path','apply','AuthManager','45GvxpqF','generateAsync','init','RETRIEVE_RESULTS_IDS_FILENAME','push','metadataFolder','retrieveResultsPath','__esModule','default','addWarning','./retrieve-factory','stringify','toString','../../../shared/utils/fs.utils','DEFLATE','object-sizeof','../../../shared/managers/auth.manager','jobStorePath','5459454rHRKgu','AxiosInstanceUtils','../../constants','4449624ZTZMOm','Item\x20\x27','logger','stateManager','items','2KeHgQx','(((.+)+)+)+$','length','create','fileName','join','RETRIEVE_RESULT_FOLDER_NAME'];a267_0x1078=function(){return _0x3c25ec;};return a267_0x1078();}