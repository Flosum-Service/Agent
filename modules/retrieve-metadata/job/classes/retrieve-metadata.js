function a272_0x3069(_0x11a131,_0x251f7e){const _0x126a43=a272_0xd920();return a272_0x3069=function(_0xce2c73,_0x454047){_0xce2c73=_0xce2c73-0x185;let _0xd9203c=_0x126a43[_0xce2c73];return _0xd9203c;},a272_0x3069(_0x11a131,_0x251f7e);}const a272_0x18c804=a272_0x3069;(function(_0x2355fd,_0x275638){const _0x400f24=a272_0x3069,_0x4cb8f6=_0x2355fd();while(!![]){try{const _0x4032cf=parseInt(_0x400f24(0x1a4))/0x1*(parseInt(_0x400f24(0x186))/0x2)+parseInt(_0x400f24(0x19c))/0x3+parseInt(_0x400f24(0x19d))/0x4+-parseInt(_0x400f24(0x18b))/0x5*(-parseInt(_0x400f24(0x1a2))/0x6)+parseInt(_0x400f24(0x1af))/0x7+parseInt(_0x400f24(0x1a8))/0x8+-parseInt(_0x400f24(0x18d))/0x9;if(_0x4032cf===_0x275638)break;else _0x4cb8f6['push'](_0x4cb8f6['shift']());}catch(_0x46ff63){_0x4cb8f6['push'](_0x4cb8f6['shift']());}}}(a272_0xd920,0x24806));const a272_0x454047=(function(){let _0xcb72ff=!![];return function(_0x37508a,_0x13fb50){const _0x4f124d=_0xcb72ff?function(){if(_0x13fb50){const _0x576bad=_0x13fb50['apply'](_0x37508a,arguments);return _0x13fb50=null,_0x576bad;}}:function(){};return _0xcb72ff=![],_0x4f124d;};}()),a272_0xce2c73=a272_0x454047(this,function(){const _0x94ec0b=a272_0x3069;return a272_0xce2c73[_0x94ec0b(0x196)]()[_0x94ec0b(0x19f)](_0x94ec0b(0x1ac))[_0x94ec0b(0x196)]()[_0x94ec0b(0x1b5)](a272_0xce2c73)['search'](_0x94ec0b(0x1ac));});a272_0xce2c73();'use strict';var __importDefault=this&&this[a272_0x18c804(0x1aa)]||function(_0x4312de){const _0x60b3ec=a272_0x18c804;return _0x4312de&&_0x4312de[_0x60b3ec(0x1b8)]?_0x4312de:{'default':_0x4312de};};Object[a272_0x18c804(0x1b0)](exports,a272_0x18c804(0x1b8),{'value':!![]});const salesforce_1=require(a272_0x18c804(0x1a0)),manifest_manger_1=__importDefault(require(a272_0x18c804(0x187))),path_1=__importDefault(require(a272_0x18c804(0x197))),promises_1=require('fs/promises'),fs_utils_1=require('../../../shared/utils/fs.utils'),object_sizeof_1=__importDefault(require(a272_0x18c804(0x1b7))),retrieve_factory_1=__importDefault(require(a272_0x18c804(0x1a3))),auth_manager_1=require('../../../shared/managers/auth.manager'),constants_1=require(a272_0x18c804(0x1b2)),shortid_1=__importDefault(require(a272_0x18c804(0x18e))),jszip_1=__importDefault(require(a272_0x18c804(0x193)));class RetrieveMetadata{constructor(_0x209e9d,_0x4bd422,_0x23b6f7){const _0x704898=a272_0x18c804;this['jobStorePath']=_0x209e9d,this[_0x704898(0x190)]=_0x4bd422,this[_0x704898(0x1a7)]=_0x23b6f7,this[_0x704898(0x1b9)]=path_1[_0x704898(0x18c)][_0x704898(0x19b)](this[_0x704898(0x1a6)],constants_1[_0x704898(0x192)]),this[_0x704898(0x18f)]=path_1['default'][_0x704898(0x19b)](this[_0x704898(0x1a6)],constants_1[_0x704898(0x1b1)]);}async[a272_0x18c804(0x18a)](_0x29f6c3){const _0x228e26=a272_0x18c804,_0x472888=(0x0,shortid_1[_0x228e26(0x18c)])();return await(0x0,promises_1[_0x228e26(0x1ad)])(path_1['default'][_0x228e26(0x19b)](this[_0x228e26(0x1b9)],_0x472888+_0x228e26(0x19a)),JSON[_0x228e26(0x1a1)](_0x29f6c3)),_0x472888;}async[a272_0x18c804(0x1a9)](){const _0x526840=a272_0x18c804,{credentials:_0x35aaf3,declarativeFilter:_0xfcafd8,metadataTypes:_0x99c608,maxChunkSize:_0x1736e8,maxChunkItems:_0x146c21,apiVersion:_0x4924a7}=await new manifest_manger_1[(_0x526840(0x18c))](this[_0x526840(0x1a6)])[_0x526840(0x185)](),_0x48b368=await salesforce_1[_0x526840(0x1b3)][_0x526840(0x191)](new auth_manager_1[(_0x526840(0x1a5))](_0x35aaf3),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),_0x43fb74=await retrieve_factory_1[_0x526840(0x18c)][_0x526840(0x191)](_0x48b368,this[_0x526840(0x190)],_0xfcafd8,_0x99c608,_0x4924a7)['execute']();await(0x0,fs_utils_1['makeDir'])(this[_0x526840(0x1b9)]);let _0x23b5d9=[];const _0x224ef1=[];let _0x3dce4d=0x0;for(const _0x41adf6 in _0x43fb74[_0x526840(0x199)]){for(const {listMetadataItem:_0x43cd99,files:_0x44d214}of _0x43fb74[_0x526840(0x199)][_0x41adf6][_0x526840(0x194)]){const _0x512477=new jszip_1[(_0x526840(0x18c))]();for(const _0x5cee04 in _0x44d214){await _0x512477[_0x526840(0x188)](_0x5cee04,_0x44d214[_0x5cee04]);}const _0x592368=await _0x512477['generateAsync']({'type':_0x526840(0x1b4),'compression':_0x526840(0x198),'compressionOptions':{'level':0x9}}),_0x198413={..._0x43cd99,'zip':_0x592368},_0x267570=(0x0,object_sizeof_1['default'])(_0x198413);if(_0x267570>_0x1736e8){await this[_0x526840(0x1a7)][_0x526840(0x19e)](_0x526840(0x1ae)+_0x43cd99[_0x526840(0x1b6)]+_0x526840(0x189)+_0x267570+'\x27\x20exceed\x20limit\x20\x27'+_0x1736e8+'\x27');continue;}if(_0x3dce4d+_0x267570>_0x1736e8||_0x23b5d9[_0x526840(0x195)]>=_0x146c21){const _0x10d2b5=await this[_0x526840(0x18a)](_0x23b5d9);_0x224ef1[_0x526840(0x1ab)](_0x10d2b5),_0x3dce4d=0x0,_0x23b5d9=[];}_0x23b5d9['push'](_0x198413),_0x3dce4d+=_0x267570;}}if(_0x23b5d9[_0x526840(0x195)]){const _0x726031=await this[_0x526840(0x18a)](_0x23b5d9);_0x224ef1[_0x526840(0x1ab)](_0x726031);}await(0x0,promises_1[_0x526840(0x1ad)])(this['retrieveResultsPath'],JSON[_0x526840(0x1a1)](_0x224ef1));}}exports[a272_0x18c804(0x18c)]=RetrieveMetadata;function a272_0xd920(){const _0x4e2dd1=['writeChunk','5ehowTP','default','8073396bEjQuV','shortid','retrieveResultsPath','logger','create','RETRIEVE_RESULT_FOLDER_NAME','jszip','components','length','toString','path','DEFLATE','items','.json','join','821946hRMObB','675040ATIpHB','addWarning','search','@flosum/salesforce','stringify','876114DQujEm','./retrieve-factory','44767ALVHin','AuthManager','jobStorePath','stateManager','1293704kZwARZ','execute','__importDefault','push','(((.+)+)+)+$','writeFile','Item\x20\x27','819084wXnkQw','defineProperty','RETRIEVE_RESULTS_IDS_FILENAME','../../constants','AxiosInstanceUtils','base64','constructor','fileName','object-sizeof','__esModule','metadataFolder','init','8oqWpQv','./manifest-manger','file','\x27\x20size\x20\x27'];a272_0xd920=function(){return _0x4e2dd1;};return a272_0xd920();}