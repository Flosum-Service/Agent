const a266_0x326109=a266_0x5a94;(function(_0x327153,_0x593169){const _0x4043d3=a266_0x5a94,_0x4678be=_0x327153();while(!![]){try{const _0x63b693=-parseInt(_0x4043d3(0x160))/0x1+parseInt(_0x4043d3(0x176))/0x2*(-parseInt(_0x4043d3(0x17b))/0x3)+-parseInt(_0x4043d3(0x17c))/0x4*(parseInt(_0x4043d3(0x14e))/0x5)+parseInt(_0x4043d3(0x171))/0x6*(parseInt(_0x4043d3(0x17a))/0x7)+-parseInt(_0x4043d3(0x14b))/0x8*(-parseInt(_0x4043d3(0x172))/0x9)+parseInt(_0x4043d3(0x150))/0xa+parseInt(_0x4043d3(0x173))/0xb*(parseInt(_0x4043d3(0x15c))/0xc);if(_0x63b693===_0x593169)break;else _0x4678be['push'](_0x4678be['shift']());}catch(_0x1dfa09){_0x4678be['push'](_0x4678be['shift']());}}}(a266_0x23fa,0xe728e));const a266_0x37c60d=(function(){let _0x3cf45d=!![];return function(_0x3861a0,_0x57253a){const _0xa69fae=_0x3cf45d?function(){const _0x11879c=a266_0x5a94;if(_0x57253a){const _0x237edd=_0x57253a[_0x11879c(0x164)](_0x3861a0,arguments);return _0x57253a=null,_0x237edd;}}:function(){};return _0x3cf45d=![],_0xa69fae;};}()),a266_0x2c8438=a266_0x37c60d(this,function(){const _0x4b2d4e=a266_0x5a94;return a266_0x2c8438[_0x4b2d4e(0x15d)]()[_0x4b2d4e(0x153)](_0x4b2d4e(0x167))[_0x4b2d4e(0x15d)]()[_0x4b2d4e(0x14c)](a266_0x2c8438)['search'](_0x4b2d4e(0x167));});a266_0x2c8438();'use strict';var __importDefault=this&&this[a266_0x326109(0x156)]||function(_0x18778f){return _0x18778f&&_0x18778f['__esModule']?_0x18778f:{'default':_0x18778f};};Object[a266_0x326109(0x158)](exports,a266_0x326109(0x165),{'value':!![]});const salesforce_1=require(a266_0x326109(0x17d)),manifest_manger_1=__importDefault(require(a266_0x326109(0x179))),path_1=__importDefault(require(a266_0x326109(0x174))),promises_1=require(a266_0x326109(0x157)),fs_utils_1=require(a266_0x326109(0x151)),object_sizeof_1=__importDefault(require(a266_0x326109(0x14a))),retrieve_factory_1=__importDefault(require(a266_0x326109(0x16e))),auth_manager_1=require(a266_0x326109(0x178)),constants_1=require(a266_0x326109(0x170)),shortid_1=__importDefault(require('shortid')),jszip_1=__importDefault(require(a266_0x326109(0x168)));function a266_0x5a94(_0x5a1efa,_0x481cf4){const _0x45aea8=a266_0x23fa();return a266_0x5a94=function(_0x2c8438,_0x37c60d){_0x2c8438=_0x2c8438-0x14a;let _0x23facc=_0x45aea8[_0x2c8438];return _0x23facc;},a266_0x5a94(_0x5a1efa,_0x481cf4);}class RetrieveMetadata{constructor(_0x12ab6d,_0x110fcd,_0x2ea88a){const _0x2654ea=a266_0x326109;this[_0x2654ea(0x14f)]=_0x12ab6d,this[_0x2654ea(0x15a)]=_0x110fcd,this['stateManager']=_0x2ea88a,this[_0x2654ea(0x169)]=path_1[_0x2654ea(0x16c)]['join'](this['jobStorePath'],constants_1['RETRIEVE_RESULT_FOLDER_NAME']),this[_0x2654ea(0x17e)]=path_1[_0x2654ea(0x16c)][_0x2654ea(0x14d)](this[_0x2654ea(0x14f)],constants_1[_0x2654ea(0x16b)]);}async[a266_0x326109(0x159)](_0x2c7694){const _0x3ac76b=a266_0x326109,_0x28ba67=(0x0,shortid_1[_0x3ac76b(0x16c)])();return await(0x0,promises_1[_0x3ac76b(0x15b)])(path_1[_0x3ac76b(0x16c)]['join'](this[_0x3ac76b(0x169)],_0x28ba67+_0x3ac76b(0x177)),JSON['stringify'](_0x2c7694)),_0x28ba67;}async[a266_0x326109(0x154)](){const _0x4bd345=a266_0x326109,{credentials:_0x182aaf,declarativeFilter:_0x5ab3ed,maxChunkSize:_0x2756b8,maxChunkItems:_0x5dbf7c}=await new manifest_manger_1['default'](this[_0x4bd345(0x14f)])[_0x4bd345(0x16d)](),_0x5c40f2=await salesforce_1[_0x4bd345(0x161)]['create'](new auth_manager_1[(_0x4bd345(0x15e))](_0x182aaf),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),_0x2d5fb1=await retrieve_factory_1[_0x4bd345(0x16c)]['create'](_0x5c40f2,this['logger'],_0x5ab3ed)[_0x4bd345(0x154)]();await(0x0,fs_utils_1[_0x4bd345(0x162)])(this[_0x4bd345(0x169)]);let _0xc9a83d=[];const _0x5ce7b8=[];let _0x2ba79c=0x0;for(const _0x1027f0 in _0x2d5fb1[_0x4bd345(0x175)]){for(const {listMetadataItem:_0x4d1dfe,files:_0x3d9625}of _0x2d5fb1['items'][_0x1027f0]['components']){const _0x311c22=new jszip_1[(_0x4bd345(0x16c))]();for(const _0x4784f6 in _0x3d9625){await _0x311c22['file'](_0x4784f6,_0x3d9625[_0x4784f6]);}const _0x43af32=await _0x311c22[_0x4bd345(0x15f)]({'type':_0x4bd345(0x163),'compression':_0x4bd345(0x155),'compressionOptions':{'level':0x9}}),_0x134fff={..._0x4d1dfe,'zip':_0x43af32},_0x2eeb3a=(0x0,object_sizeof_1[_0x4bd345(0x16c)])(_0x134fff);if(_0x2eeb3a>_0x2756b8){await this[_0x4bd345(0x16a)]['addWarning'](_0x4bd345(0x166)+_0x4d1dfe[_0x4bd345(0x17f)]+'\x27\x20size\x20\x27'+_0x2eeb3a+'\x27\x20exceed\x20limit\x20\x27'+_0x2756b8+'\x27');continue;}if(_0x2ba79c+_0x2eeb3a>_0x2756b8||_0xc9a83d[_0x4bd345(0x16f)]>=_0x5dbf7c){const _0x1c6059=await this[_0x4bd345(0x159)](_0xc9a83d);_0x5ce7b8[_0x4bd345(0x152)](_0x1c6059),_0x2ba79c=0x0,_0xc9a83d=[];}_0xc9a83d[_0x4bd345(0x152)](_0x134fff),_0x2ba79c+=_0x2eeb3a;}}if(_0xc9a83d['length']){const _0x546150=await this[_0x4bd345(0x159)](_0xc9a83d);_0x5ce7b8[_0x4bd345(0x152)](_0x546150);}await(0x0,promises_1[_0x4bd345(0x15b)])(this[_0x4bd345(0x17e)],JSON['stringify'](_0x5ce7b8));}}function a266_0x23fa(){const _0x374f1d=['default','init','./retrieve-factory','length','../../constants','34446ssjNBg','1058787TfqRKY','1872563EEmVSA','path','items','58312PWchMb','.json','../../../shared/managers/auth.manager','./manifest-manger','980UUuSvA','120BmzMyS','8TNiwLw','@flosum/salesforce','retrieveResultsPath','fileName','object-sizeof','48gJprzN','constructor','join','1331125pZeyas','jobStorePath','10053570RdzlgR','../../../shared/utils/fs.utils','push','search','execute','DEFLATE','__importDefault','fs/promises','defineProperty','writeChunk','logger','writeFile','48KbakTo','toString','AuthManager','generateAsync','550367zJoGBU','AxiosInstanceUtils','makeDir','base64','apply','__esModule','Item\x20\x27','(((.+)+)+)+$','jszip','metadataFolder','stateManager','RETRIEVE_RESULTS_IDS_FILENAME'];a266_0x23fa=function(){return _0x374f1d;};return a266_0x23fa();}exports[a266_0x326109(0x16c)]=RetrieveMetadata;