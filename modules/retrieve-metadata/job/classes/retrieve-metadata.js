function a304_0x124c(){const _0x41aa89=['158860RHnRbi','stringify','RETRIEVE_RESULT_FOLDER_NAME','RETRIEVE_RESULTS_IDS_FILENAME','makeDir','toString','AxiosInstanceUtils','414153sPYGJs','writeChunk','243363pGpWmP','.json','default','retrieveResultsPath','6cRHErR','AuthManager','../../../shared/managers/auth.manager','DEFLATE','273614tArKET','length','components','path','push','items','logger','\x27\x20exceed\x20limit\x20\x27','__esModule','4785460szYpeX','fs/promises','apply','generateAsync','create','2586sqWvCS','__importDefault','metadataFolder','\x27\x20size\x20\x27','search','@flosum/salesforce','8zMYwTd','base64','object-sizeof','constructor','../../../shared/utils/fs.utils','writeFile','addWarning','Item\x20\x27','join','defineProperty','execute','../../constants','4066258QkTUPB','fileName','file','5070mdwqUq','./manifest-manger','init','jobStorePath','stateManager'];a304_0x124c=function(){return _0x41aa89;};return a304_0x124c();}const a304_0x4fb735=a304_0x31cc;(function(_0x343323,_0x21c804){const _0x526911=a304_0x31cc,_0x5416a0=_0x343323();while(!![]){try{const _0xd78e4c=parseInt(_0x526911(0xb1))/0x1+-parseInt(_0x526911(0xb9))/0x2*(parseInt(_0x526911(0xb5))/0x3)+-parseInt(_0x526911(0xa8))/0x4+-parseInt(_0x526911(0xa3))/0x5*(-parseInt(_0x526911(0xc7))/0x6)+-parseInt(_0x526911(0xa0))/0x7*(parseInt(_0x526911(0xcd))/0x8)+parseInt(_0x526911(0xaf))/0x9+parseInt(_0x526911(0xc2))/0xa;if(_0xd78e4c===_0x21c804)break;else _0x5416a0['push'](_0x5416a0['shift']());}catch(_0x38dc15){_0x5416a0['push'](_0x5416a0['shift']());}}}(a304_0x124c,0x4bdd1));const a304_0x499043=(function(){let _0x310d1a=!![];return function(_0x43e02e,_0x262e26){const _0x3ed4c9=_0x310d1a?function(){const _0x34f764=a304_0x31cc;if(_0x262e26){const _0x164726=_0x262e26[_0x34f764(0xc4)](_0x43e02e,arguments);return _0x262e26=null,_0x164726;}}:function(){};return _0x310d1a=![],_0x3ed4c9;};}()),a304_0x1aa38f=a304_0x499043(this,function(){const _0x26ef7c=a304_0x31cc;return a304_0x1aa38f['toString']()[_0x26ef7c(0xcb)]('(((.+)+)+)+$')[_0x26ef7c(0xad)]()[_0x26ef7c(0xd0)](a304_0x1aa38f)['search']('(((.+)+)+)+$');});a304_0x1aa38f();'use strict';var __importDefault=this&&this[a304_0x4fb735(0xc8)]||function(_0x13c5e7){const _0x4444bc=a304_0x4fb735;return _0x13c5e7&&_0x13c5e7[_0x4444bc(0xc1)]?_0x13c5e7:{'default':_0x13c5e7};};function a304_0x31cc(_0x17ad71,_0x118a18){const _0x10582b=a304_0x124c();return a304_0x31cc=function(_0x1aa38f,_0x499043){_0x1aa38f=_0x1aa38f-0xa0;let _0x124c5a=_0x10582b[_0x1aa38f];return _0x124c5a;},a304_0x31cc(_0x17ad71,_0x118a18);}Object[a304_0x4fb735(0xd6)](exports,a304_0x4fb735(0xc1),{'value':!![]});const salesforce_1=require(a304_0x4fb735(0xcc)),manifest_manger_1=__importDefault(require(a304_0x4fb735(0xa4))),path_1=__importDefault(require(a304_0x4fb735(0xbc))),promises_1=require(a304_0x4fb735(0xc3)),fs_utils_1=require(a304_0x4fb735(0xd1)),object_sizeof_1=__importDefault(require(a304_0x4fb735(0xcf))),retrieve_factory_1=__importDefault(require('./retrieve-factory')),auth_manager_1=require(a304_0x4fb735(0xb7)),constants_1=require(a304_0x4fb735(0xd8)),shortid_1=__importDefault(require('shortid')),jszip_1=__importDefault(require('jszip'));class RetrieveMetadata{constructor(_0x2ab902,_0x323299,_0x42ad41){const _0x46b3b5=a304_0x4fb735;this['jobStorePath']=_0x2ab902,this[_0x46b3b5(0xbf)]=_0x323299,this[_0x46b3b5(0xa7)]=_0x42ad41,this[_0x46b3b5(0xc9)]=path_1['default'][_0x46b3b5(0xd5)](this[_0x46b3b5(0xa6)],constants_1[_0x46b3b5(0xaa)]),this[_0x46b3b5(0xb4)]=path_1['default'][_0x46b3b5(0xd5)](this[_0x46b3b5(0xa6)],constants_1[_0x46b3b5(0xab)]);}async[a304_0x4fb735(0xb0)](_0x42b245){const _0x2e0483=a304_0x4fb735,_0x3f1063=(0x0,shortid_1[_0x2e0483(0xb3)])();return await(0x0,promises_1['writeFile'])(path_1['default'][_0x2e0483(0xd5)](this[_0x2e0483(0xc9)],_0x3f1063+_0x2e0483(0xb2)),JSON[_0x2e0483(0xa9)](_0x42b245)),_0x3f1063;}async[a304_0x4fb735(0xd7)](){const _0x598ffd=a304_0x4fb735,{credentials:_0x460cde,declarativeFilter:_0x23f39e,metadataTypes:_0x19b976,maxChunkSize:_0x4c7b87,maxChunkItems:_0x6c58d7,apiVersion:_0x1bc33d}=await new manifest_manger_1[(_0x598ffd(0xb3))](this[_0x598ffd(0xa6)])[_0x598ffd(0xa5)](),_0x4a5f92=await salesforce_1[_0x598ffd(0xae)][_0x598ffd(0xc6)](new auth_manager_1[(_0x598ffd(0xb6))](_0x460cde),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),_0x5a0341=await retrieve_factory_1[_0x598ffd(0xb3)]['create'](_0x4a5f92,this[_0x598ffd(0xbf)],_0x23f39e,_0x19b976,_0x1bc33d)['execute']();await(0x0,fs_utils_1[_0x598ffd(0xac)])(this['metadataFolder']);let _0x2bb2da=[];const _0x4fd942=[];let _0x50473a=0x0;for(const _0x76a7e in _0x5a0341[_0x598ffd(0xbe)]){for(const {listMetadataItem:_0x4600d9,files:_0x46aeea}of _0x5a0341[_0x598ffd(0xbe)][_0x76a7e][_0x598ffd(0xbb)]){const _0x562682=new jszip_1['default']();for(const _0x554fc9 in _0x46aeea){await _0x562682[_0x598ffd(0xa2)](_0x554fc9,_0x46aeea[_0x554fc9]);}const _0x45edae=await _0x562682[_0x598ffd(0xc5)]({'type':_0x598ffd(0xce),'compression':_0x598ffd(0xb8),'compressionOptions':{'level':0x9}}),_0x58939c={..._0x4600d9,'zip':_0x45edae},_0x15604b=(0x0,object_sizeof_1[_0x598ffd(0xb3)])(_0x58939c);if(_0x15604b>_0x4c7b87){await this[_0x598ffd(0xa7)][_0x598ffd(0xd3)](_0x598ffd(0xd4)+_0x4600d9[_0x598ffd(0xa1)]+_0x598ffd(0xca)+_0x15604b+_0x598ffd(0xc0)+_0x4c7b87+'\x27');continue;}if(_0x50473a+_0x15604b>_0x4c7b87||_0x2bb2da[_0x598ffd(0xba)]>=_0x6c58d7){const _0x4f522b=await this[_0x598ffd(0xb0)](_0x2bb2da);_0x4fd942[_0x598ffd(0xbd)](_0x4f522b),_0x50473a=0x0,_0x2bb2da=[];}_0x2bb2da[_0x598ffd(0xbd)](_0x58939c),_0x50473a+=_0x15604b;}}if(_0x2bb2da[_0x598ffd(0xba)]){const _0x31e1bb=await this[_0x598ffd(0xb0)](_0x2bb2da);_0x4fd942[_0x598ffd(0xbd)](_0x31e1bb);}await(0x0,promises_1[_0x598ffd(0xd2)])(this['retrieveResultsPath'],JSON[_0x598ffd(0xa9)](_0x4fd942));}}exports[a304_0x4fb735(0xb3)]=RetrieveMetadata;