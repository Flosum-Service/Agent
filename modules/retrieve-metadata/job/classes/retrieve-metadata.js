function a315_0x2922(){const _0x12e986=['1133460bkgjBz','./retrieve-factory','10409368MzIANk','shortid','length','@flosum/salesforce','10tOtUQc','defineProperty','writeFile','9sufYEi','object-sizeof','20902WTfxvi','\x27\x20size\x20\x27','fileName','search','apply','./manifest-manger','jobStorePath','__importDefault','fs/promises','push','6953499ELlNyu','join','../../../shared/utils/fs.utils','writeChunk','components','__esModule','../../constants','5joKmPd','\x27\x20exceed\x20limit\x20\x27','generateAsync','path','.json','RETRIEVE_RESULT_FOLDER_NAME','logger','stateManager','execute','2994ZFCUMZ','toString','../../../shared/managers/auth.manager','file','AxiosInstanceUtils','makeDir','1473964DgfgTD','27749535pDIuIF','create','base64','metadataFolder','702109gaatcH','(((.+)+)+)+$','jszip','AuthManager','default','stringify'];a315_0x2922=function(){return _0x12e986;};return a315_0x2922();}const a315_0x260172=a315_0x419d;(function(_0x252229,_0x516b34){const _0x32e920=a315_0x419d,_0x258857=_0x252229();while(!![]){try{const _0xf0a0cc=-parseInt(_0x32e920(0x116))/0x1+parseInt(_0x32e920(0x11c))/0x2*(parseInt(_0x32e920(0x125))/0x3)+parseInt(_0x32e920(0x111))/0x4*(parseInt(_0x32e920(0x138))/0x5)+-parseInt(_0x32e920(0x10b))/0x6*(-parseInt(_0x32e920(0x127))/0x7)+parseInt(_0x32e920(0x11e))/0x8+-parseInt(_0x32e920(0x131))/0x9+-parseInt(_0x32e920(0x122))/0xa*(parseInt(_0x32e920(0x112))/0xb);if(_0xf0a0cc===_0x516b34)break;else _0x258857['push'](_0x258857['shift']());}catch(_0x1eead5){_0x258857['push'](_0x258857['shift']());}}}(a315_0x2922,0xd28fd));const a315_0x5bcd99=(function(){let _0x4d27d9=!![];return function(_0x1e3f62,_0x20360a){const _0x28b3f2=_0x4d27d9?function(){const _0x1cdd0f=a315_0x419d;if(_0x20360a){const _0x490ee0=_0x20360a[_0x1cdd0f(0x12b)](_0x1e3f62,arguments);return _0x20360a=null,_0x490ee0;}}:function(){};return _0x4d27d9=![],_0x28b3f2;};}()),a315_0x3206dc=a315_0x5bcd99(this,function(){const _0x53df9=a315_0x419d;return a315_0x3206dc[_0x53df9(0x10c)]()['search'](_0x53df9(0x117))[_0x53df9(0x10c)]()['constructor'](a315_0x3206dc)[_0x53df9(0x12a)](_0x53df9(0x117));});a315_0x3206dc();function a315_0x419d(_0x3e521b,_0x19f600){const _0x2e15f5=a315_0x2922();return a315_0x419d=function(_0x3206dc,_0x5bcd99){_0x3206dc=_0x3206dc-0x106;let _0x292208=_0x2e15f5[_0x3206dc];return _0x292208;},a315_0x419d(_0x3e521b,_0x19f600);}'use strict';var __importDefault=this&&this[a315_0x260172(0x12e)]||function(_0x164d82){return _0x164d82&&_0x164d82['__esModule']?_0x164d82:{'default':_0x164d82};};Object[a315_0x260172(0x123)](exports,a315_0x260172(0x136),{'value':!![]});const salesforce_1=require(a315_0x260172(0x121)),manifest_manger_1=__importDefault(require(a315_0x260172(0x12c))),path_1=__importDefault(require(a315_0x260172(0x13b))),promises_1=require(a315_0x260172(0x12f)),fs_utils_1=require(a315_0x260172(0x133)),object_sizeof_1=__importDefault(require(a315_0x260172(0x126))),retrieve_factory_1=__importDefault(require(a315_0x260172(0x11d))),auth_manager_1=require(a315_0x260172(0x10d)),constants_1=require(a315_0x260172(0x137)),shortid_1=__importDefault(require(a315_0x260172(0x11f))),jszip_1=__importDefault(require(a315_0x260172(0x118)));class RetrieveMetadata{constructor(_0x31832a,_0x4a8262,_0x4c3d99){const _0x3399b3=a315_0x260172;this[_0x3399b3(0x12d)]=_0x31832a,this[_0x3399b3(0x108)]=_0x4a8262,this[_0x3399b3(0x109)]=_0x4c3d99,this[_0x3399b3(0x115)]=path_1[_0x3399b3(0x11a)][_0x3399b3(0x132)](this['jobStorePath'],constants_1[_0x3399b3(0x107)]),this['retrieveResultsPath']=path_1['default']['join'](this[_0x3399b3(0x12d)],constants_1['RETRIEVE_RESULTS_IDS_FILENAME']);}async[a315_0x260172(0x134)](_0x3d615a){const _0x1924ee=a315_0x260172,_0x239701=(0x0,shortid_1['default'])();return await(0x0,promises_1[_0x1924ee(0x124)])(path_1['default'][_0x1924ee(0x132)](this[_0x1924ee(0x115)],_0x239701+_0x1924ee(0x106)),JSON['stringify'](_0x3d615a)),_0x239701;}async[a315_0x260172(0x10a)](){const _0x863930=a315_0x260172,{credentials:_0x4b4ab8,declarativeFilter:_0x3230ee,metadataTypes:_0x5b4b09,maxChunkSize:_0x159c4d,maxChunkItems:_0xd7cea9,apiVersion:_0x2cd3cf}=await new manifest_manger_1[(_0x863930(0x11a))](this['jobStorePath'])['init'](),_0x33d622=await salesforce_1[_0x863930(0x10f)][_0x863930(0x113)](new auth_manager_1[(_0x863930(0x119))](_0x4b4ab8),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),_0x1c8472=await retrieve_factory_1[_0x863930(0x11a)][_0x863930(0x113)](_0x33d622,this[_0x863930(0x108)],_0x3230ee,_0x5b4b09,_0x2cd3cf)[_0x863930(0x10a)]();await(0x0,fs_utils_1[_0x863930(0x110)])(this[_0x863930(0x115)]);let _0x3c17ba=[];const _0x1ca50d=[];let _0x3cff68=0x0;for(const _0x73c256 in _0x1c8472['items']){for(const {listMetadataItem:_0x45a3da,files:_0x3c14b9}of _0x1c8472['items'][_0x73c256][_0x863930(0x135)]){const _0x3b2d52=new jszip_1[(_0x863930(0x11a))]();for(const _0x1ed622 in _0x3c14b9){await _0x3b2d52[_0x863930(0x10e)](_0x1ed622,_0x3c14b9[_0x1ed622]);}const _0x2d1265=await _0x3b2d52[_0x863930(0x13a)]({'type':_0x863930(0x114),'compression':'DEFLATE','compressionOptions':{'level':0x9}}),_0x35b75c={..._0x45a3da,'zip':_0x2d1265},_0x259a34=(0x0,object_sizeof_1[_0x863930(0x11a)])(_0x35b75c);if(_0x259a34>_0x159c4d){await this['stateManager']['addWarning']('Item\x20\x27'+_0x45a3da[_0x863930(0x129)]+_0x863930(0x128)+_0x259a34+_0x863930(0x139)+_0x159c4d+'\x27');continue;}if(_0x3cff68+_0x259a34>_0x159c4d||_0x3c17ba[_0x863930(0x120)]>=_0xd7cea9){const _0x5c8bee=await this['writeChunk'](_0x3c17ba);_0x1ca50d['push'](_0x5c8bee),_0x3cff68=0x0,_0x3c17ba=[];}_0x3c17ba[_0x863930(0x130)](_0x35b75c),_0x3cff68+=_0x259a34;}}if(_0x3c17ba[_0x863930(0x120)]){const _0x391d4a=await this[_0x863930(0x134)](_0x3c17ba);_0x1ca50d[_0x863930(0x130)](_0x391d4a);}await(0x0,promises_1[_0x863930(0x124)])(this['retrieveResultsPath'],JSON[_0x863930(0x11b)](_0x1ca50d));}}exports[a315_0x260172(0x11a)]=RetrieveMetadata;