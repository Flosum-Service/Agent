function a304_0x7e4d(){const _0x413f24=['9EjMVOR','file','stringify','base64','351210xSvcQl','makeDir','5013830ONaFBP','4928720RWElCD','metadataFolder','toString','constructor','__esModule','411174RsPaBJ','../../constants','join','components','./manifest-manger','writeFile','apply','items','generateAsync','fileName','retrieveResultsPath','writeChunk','RETRIEVE_RESULTS_IDS_FILENAME','default','\x27\x20size\x20\x27','jszip','AuthManager','fs/promises','object-sizeof','3105576juXiXy','../../../shared/managers/auth.manager','./retrieve-factory','addWarning','logger','7ZJoXTF','execute','117620krBoKW','init','search','jobStorePath','1vsOkfy','DEFLATE','path','stateManager','create','1567419Pboiif','RETRIEVE_RESULT_FOLDER_NAME','__importDefault','(((.+)+)+)+$','\x27\x20exceed\x20limit\x20\x27'];a304_0x7e4d=function(){return _0x413f24;};return a304_0x7e4d();}const a304_0x495ea0=a304_0x1514;(function(_0x1ce6be,_0x476a6d){const _0x1c72ef=a304_0x1514,_0x3a9b8a=_0x1ce6be();while(!![]){try{const _0x196816=-parseInt(_0x1c72ef(0x1ce))/0x1*(-parseInt(_0x1c72ef(0x1e4))/0x2)+-parseInt(_0x1c72ef(0x1d3))/0x3+-parseInt(_0x1c72ef(0x1fe))/0x4+parseInt(_0x1c72ef(0x1dc))/0x5+-parseInt(_0x1c72ef(0x1f7))/0x6*(-parseInt(_0x1c72ef(0x1fc))/0x7)+parseInt(_0x1c72ef(0x1df))/0x8+parseInt(_0x1c72ef(0x1d8))/0x9*(-parseInt(_0x1c72ef(0x1de))/0xa);if(_0x196816===_0x476a6d)break;else _0x3a9b8a['push'](_0x3a9b8a['shift']());}catch(_0x2abbd3){_0x3a9b8a['push'](_0x3a9b8a['shift']());}}}(a304_0x7e4d,0x56f9e));const a304_0x26eaad=(function(){let _0x58d427=!![];return function(_0x2793c8,_0x5e3b97){const _0x1397ae=_0x58d427?function(){const _0x4e8886=a304_0x1514;if(_0x5e3b97){const _0x291682=_0x5e3b97[_0x4e8886(0x1ea)](_0x2793c8,arguments);return _0x5e3b97=null,_0x291682;}}:function(){};return _0x58d427=![],_0x1397ae;};}()),a304_0x1054e6=a304_0x26eaad(this,function(){const _0x359257=a304_0x1514;return a304_0x1054e6[_0x359257(0x1e1)]()[_0x359257(0x1cc)]('(((.+)+)+)+$')[_0x359257(0x1e1)]()[_0x359257(0x1e2)](a304_0x1054e6)['search'](_0x359257(0x1d6));});a304_0x1054e6();'use strict';var __importDefault=this&&this[a304_0x495ea0(0x1d5)]||function(_0x1d53b5){const _0x230057=a304_0x495ea0;return _0x1d53b5&&_0x1d53b5[_0x230057(0x1e3)]?_0x1d53b5:{'default':_0x1d53b5};};Object['defineProperty'](exports,a304_0x495ea0(0x1e3),{'value':!![]});const salesforce_1=require('@flosum/salesforce'),manifest_manger_1=__importDefault(require(a304_0x495ea0(0x1e8))),path_1=__importDefault(require(a304_0x495ea0(0x1d0))),promises_1=require(a304_0x495ea0(0x1f5)),fs_utils_1=require('../../../shared/utils/fs.utils'),object_sizeof_1=__importDefault(require(a304_0x495ea0(0x1f6))),retrieve_factory_1=__importDefault(require(a304_0x495ea0(0x1f9))),auth_manager_1=require(a304_0x495ea0(0x1f8)),constants_1=require(a304_0x495ea0(0x1e5)),shortid_1=__importDefault(require('shortid')),jszip_1=__importDefault(require(a304_0x495ea0(0x1f3)));function a304_0x1514(_0x22cfd2,_0x1022c4){const _0x2be565=a304_0x7e4d();return a304_0x1514=function(_0x1054e6,_0x26eaad){_0x1054e6=_0x1054e6-0x1cb;let _0x7e4d46=_0x2be565[_0x1054e6];return _0x7e4d46;},a304_0x1514(_0x22cfd2,_0x1022c4);}class RetrieveMetadata{constructor(_0x3cc426,_0x2e6737,_0x4d7f67){const _0x4927ea=a304_0x495ea0;this['jobStorePath']=_0x3cc426,this[_0x4927ea(0x1fb)]=_0x2e6737,this[_0x4927ea(0x1d1)]=_0x4d7f67,this[_0x4927ea(0x1e0)]=path_1[_0x4927ea(0x1f1)]['join'](this[_0x4927ea(0x1cd)],constants_1[_0x4927ea(0x1d4)]),this[_0x4927ea(0x1ee)]=path_1[_0x4927ea(0x1f1)]['join'](this[_0x4927ea(0x1cd)],constants_1[_0x4927ea(0x1f0)]);}async[a304_0x495ea0(0x1ef)](_0x4359a3){const _0x5d02cf=a304_0x495ea0,_0x2f6988=(0x0,shortid_1[_0x5d02cf(0x1f1)])();return await(0x0,promises_1[_0x5d02cf(0x1e9)])(path_1[_0x5d02cf(0x1f1)][_0x5d02cf(0x1e6)](this[_0x5d02cf(0x1e0)],_0x2f6988+'.json'),JSON['stringify'](_0x4359a3)),_0x2f6988;}async[a304_0x495ea0(0x1fd)](){const _0x24380a=a304_0x495ea0,{credentials:_0x40e751,declarativeFilter:_0xc86c10,metadataTypes:_0x11f9dc,maxChunkSize:_0x15c348,maxChunkItems:_0x198957,apiVersion:_0xa4acaf}=await new manifest_manger_1[(_0x24380a(0x1f1))](this[_0x24380a(0x1cd)])[_0x24380a(0x1cb)](),_0x37d9d1=await salesforce_1['AxiosInstanceUtils'][_0x24380a(0x1d2)](new auth_manager_1[(_0x24380a(0x1f4))](_0x40e751),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),_0x5711b3=await retrieve_factory_1[_0x24380a(0x1f1)][_0x24380a(0x1d2)](_0x37d9d1,this[_0x24380a(0x1fb)],_0xc86c10,_0x11f9dc,_0xa4acaf)[_0x24380a(0x1fd)]();await(0x0,fs_utils_1[_0x24380a(0x1dd)])(this[_0x24380a(0x1e0)]);let _0x442d86=[];const _0xc6d67e=[];let _0x195b51=0x0;for(const _0x20822a in _0x5711b3[_0x24380a(0x1eb)]){for(const {listMetadataItem:_0x21bceb,files:_0x189a9a}of _0x5711b3['items'][_0x20822a][_0x24380a(0x1e7)]){const _0x3eb127=new jszip_1['default']();for(const _0x1cfd56 in _0x189a9a){await _0x3eb127[_0x24380a(0x1d9)](_0x1cfd56,_0x189a9a[_0x1cfd56]);}const _0x4f4c2f=await _0x3eb127[_0x24380a(0x1ec)]({'type':_0x24380a(0x1db),'compression':_0x24380a(0x1cf),'compressionOptions':{'level':0x9}}),_0x2f3e30={..._0x21bceb,'zip':_0x4f4c2f},_0x4f76f6=(0x0,object_sizeof_1[_0x24380a(0x1f1)])(_0x2f3e30);if(_0x4f76f6>_0x15c348){await this[_0x24380a(0x1d1)][_0x24380a(0x1fa)]('Item\x20\x27'+_0x21bceb[_0x24380a(0x1ed)]+_0x24380a(0x1f2)+_0x4f76f6+_0x24380a(0x1d7)+_0x15c348+'\x27');continue;}if(_0x195b51+_0x4f76f6>_0x15c348||_0x442d86['length']>=_0x198957){const _0x358d92=await this[_0x24380a(0x1ef)](_0x442d86);_0xc6d67e['push'](_0x358d92),_0x195b51=0x0,_0x442d86=[];}_0x442d86['push'](_0x2f3e30),_0x195b51+=_0x4f76f6;}}if(_0x442d86['length']){const _0x17d6f6=await this[_0x24380a(0x1ef)](_0x442d86);_0xc6d67e['push'](_0x17d6f6);}await(0x0,promises_1[_0x24380a(0x1e9)])(this[_0x24380a(0x1ee)],JSON[_0x24380a(0x1da)](_0xc6d67e));}}exports[a304_0x495ea0(0x1f1)]=RetrieveMetadata;