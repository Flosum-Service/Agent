const a315_0x174d99=a315_0x3324;(function(_0xc475f9,_0x3e106f){const _0xf5a669=a315_0x3324,_0xc30b39=_0xc475f9();while(!![]){try{const _0x451b50=-parseInt(_0xf5a669(0x12f))/0x1+parseInt(_0xf5a669(0x14a))/0x2*(-parseInt(_0xf5a669(0x11b))/0x3)+-parseInt(_0xf5a669(0x122))/0x4*(parseInt(_0xf5a669(0x11f))/0x5)+parseInt(_0xf5a669(0x12a))/0x6*(-parseInt(_0xf5a669(0x11a))/0x7)+parseInt(_0xf5a669(0x131))/0x8*(-parseInt(_0xf5a669(0x11e))/0x9)+-parseInt(_0xf5a669(0x135))/0xa+parseInt(_0xf5a669(0x13e))/0xb;if(_0x451b50===_0x3e106f)break;else _0xc30b39['push'](_0xc30b39['shift']());}catch(_0x3cc0e4){_0xc30b39['push'](_0xc30b39['shift']());}}}(a315_0x2284,0x8100b));const a315_0x17cda3=(function(){let _0x27eae6=!![];return function(_0x1f5279,_0x5be209){const _0x4c9469=_0x27eae6?function(){const _0x26d737=a315_0x3324;if(_0x5be209){const _0x43e2ae=_0x5be209[_0x26d737(0x11d)](_0x1f5279,arguments);return _0x5be209=null,_0x43e2ae;}}:function(){};return _0x27eae6=![],_0x4c9469;};}()),a315_0x3d6c71=a315_0x17cda3(this,function(){const _0x4b8971=a315_0x3324;return a315_0x3d6c71['toString']()[_0x4b8971(0x14b)](_0x4b8971(0x128))['toString']()['constructor'](a315_0x3d6c71)['search'](_0x4b8971(0x128));});a315_0x3d6c71();function a315_0x3324(_0x5e1794,_0x5a9f02){const _0x5942ac=a315_0x2284();return a315_0x3324=function(_0x3d6c71,_0x17cda3){_0x3d6c71=_0x3d6c71-0x118;let _0x228462=_0x5942ac[_0x3d6c71];return _0x228462;},a315_0x3324(_0x5e1794,_0x5a9f02);}'use strict';var __importDefault=this&&this[a315_0x174d99(0x137)]||function(_0x12b5fc){const _0x14ab69=a315_0x174d99;return _0x12b5fc&&_0x12b5fc[_0x14ab69(0x143)]?_0x12b5fc:{'default':_0x12b5fc};};Object['defineProperty'](exports,a315_0x174d99(0x143),{'value':!![]});function a315_0x2284(){const _0x36f8dc=['writeFile','../../constants','45863290qvQVzL','default','jszip','./retrieve-factory','writeChunk','__esModule','AuthManager','base64','DEFLATE','addWarning','@flosum/salesforce','push','2AHpqKh','search','create','join','items','stateManager','\x27\x20size\x20\x27','19033zuWgpC','2309967IfVFoW','retrieveResultsPath','apply','63vpvHIS','59905baHhKn','generateAsync','logger','152jtplKQ','RETRIEVE_RESULTS_IDS_FILENAME','../../../shared/utils/fs.utils','RETRIEVE_RESULT_FOLDER_NAME','object-sizeof','fs/promises','(((.+)+)+)+$','jobStorePath','1728fibBvR','metadataFolder','components','AxiosInstanceUtils','init','625951JicEEi','\x27\x20exceed\x20limit\x20\x27','712168OmXqgq','execute','../../../shared/managers/auth.manager','shortid','3835580yTLGqM','length','__importDefault','file','.json','Item\x20\x27','./manifest-manger'];a315_0x2284=function(){return _0x36f8dc;};return a315_0x2284();}const salesforce_1=require(a315_0x174d99(0x148)),manifest_manger_1=__importDefault(require(a315_0x174d99(0x13b))),path_1=__importDefault(require('path')),promises_1=require(a315_0x174d99(0x127)),fs_utils_1=require(a315_0x174d99(0x124)),object_sizeof_1=__importDefault(require(a315_0x174d99(0x126))),retrieve_factory_1=__importDefault(require(a315_0x174d99(0x141))),auth_manager_1=require(a315_0x174d99(0x133)),constants_1=require(a315_0x174d99(0x13d)),shortid_1=__importDefault(require(a315_0x174d99(0x134))),jszip_1=__importDefault(require(a315_0x174d99(0x140)));class RetrieveMetadata{constructor(_0x1d9423,_0xe6df61,_0x1e13ea){const _0x2de461=a315_0x174d99;this[_0x2de461(0x129)]=_0x1d9423,this['logger']=_0xe6df61,this['stateManager']=_0x1e13ea,this[_0x2de461(0x12b)]=path_1['default']['join'](this[_0x2de461(0x129)],constants_1[_0x2de461(0x125)]),this[_0x2de461(0x11c)]=path_1['default'][_0x2de461(0x14d)](this[_0x2de461(0x129)],constants_1[_0x2de461(0x123)]);}async[a315_0x174d99(0x142)](_0x3e00f7){const _0x4bb0e9=a315_0x174d99,_0x2e98a7=(0x0,shortid_1[_0x4bb0e9(0x13f)])();return await(0x0,promises_1[_0x4bb0e9(0x13c)])(path_1[_0x4bb0e9(0x13f)]['join'](this[_0x4bb0e9(0x12b)],_0x2e98a7+_0x4bb0e9(0x139)),JSON['stringify'](_0x3e00f7)),_0x2e98a7;}async[a315_0x174d99(0x132)](){const _0x1ad299=a315_0x174d99,{credentials:_0xc6ff7e,declarativeFilter:_0x2d0b11,metadataTypes:_0x4c6e1a,maxChunkSize:_0x568fb4,maxChunkItems:_0x412010,apiVersion:_0x4be476}=await new manifest_manger_1[(_0x1ad299(0x13f))](this[_0x1ad299(0x129)])[_0x1ad299(0x12e)](),_0x42e123=await salesforce_1[_0x1ad299(0x12d)][_0x1ad299(0x14c)](new auth_manager_1[(_0x1ad299(0x144))](_0xc6ff7e),[],{'maxContentLength':Infinity,'maxBodyLength':Infinity}),_0x22419f=await retrieve_factory_1[_0x1ad299(0x13f)]['create'](_0x42e123,this[_0x1ad299(0x121)],_0x2d0b11,_0x4c6e1a,_0x4be476)['execute']();await(0x0,fs_utils_1['makeDir'])(this[_0x1ad299(0x12b)]);let _0x48a012=[];const _0x5c2e4=[];let _0xb321ad=0x0;for(const _0x17ccc4 in _0x22419f[_0x1ad299(0x14e)]){for(const {listMetadataItem:_0x4ef7cc,files:_0x2c22ee}of _0x22419f[_0x1ad299(0x14e)][_0x17ccc4][_0x1ad299(0x12c)]){const _0x503315=new jszip_1[(_0x1ad299(0x13f))]();for(const _0x42cd31 in _0x2c22ee){await _0x503315[_0x1ad299(0x138)](_0x42cd31,_0x2c22ee[_0x42cd31]);}const _0x45a03f=await _0x503315[_0x1ad299(0x120)]({'type':_0x1ad299(0x145),'compression':_0x1ad299(0x146),'compressionOptions':{'level':0x9}}),_0x44ca53={..._0x4ef7cc,'zip':_0x45a03f},_0x19d184=(0x0,object_sizeof_1[_0x1ad299(0x13f)])(_0x44ca53);if(_0x19d184>_0x568fb4){await this[_0x1ad299(0x118)][_0x1ad299(0x147)](_0x1ad299(0x13a)+_0x4ef7cc['fileName']+_0x1ad299(0x119)+_0x19d184+_0x1ad299(0x130)+_0x568fb4+'\x27');continue;}if(_0xb321ad+_0x19d184>_0x568fb4||_0x48a012[_0x1ad299(0x136)]>=_0x412010){const _0x56eabc=await this[_0x1ad299(0x142)](_0x48a012);_0x5c2e4[_0x1ad299(0x149)](_0x56eabc),_0xb321ad=0x0,_0x48a012=[];}_0x48a012['push'](_0x44ca53),_0xb321ad+=_0x19d184;}}if(_0x48a012[_0x1ad299(0x136)]){const _0x462765=await this[_0x1ad299(0x142)](_0x48a012);_0x5c2e4[_0x1ad299(0x149)](_0x462765);}await(0x0,promises_1[_0x1ad299(0x13c)])(this[_0x1ad299(0x11c)],JSON['stringify'](_0x5c2e4));}}exports[a315_0x174d99(0x13f)]=RetrieveMetadata;