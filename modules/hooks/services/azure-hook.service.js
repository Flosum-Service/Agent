const a77_0x5b98ac=a77_0x39db;function a77_0x226f(){const _0x12700a=['GitHookService','getAll','getOne','__importDefault','126xIHSwC','123877KTLKsH','request','AzureApiService','/_apis/hooks/subscriptions/','115198CzZwpa','delete','update','BadRequestError','organization','__esModule','312aXmwxG','213032OsLLbb','60oSYRwm','NotFoundError','default','search','post','../../../core/errors/not-found.error','fromAzure','fromGithub','435603gcqbxt','12VLiElO','1905210BMPrIy','AzureHookService','projectId','16028ijuvNy','1265143VfKSqp','map','20TYoHSv','constructor','HookDto','authService','toString','getProjectId','(((.+)+)+)+$','createRequest','2cuEpLj','value','create','get','patch','publisherInputs','./git-hook.service','../../git-api/services/azure-api.service','/_apis/hooks/subscriptions'];a77_0x226f=function(){return _0x12700a;};return a77_0x226f();}(function(_0x3298b8,_0x503cdc){const _0x599f55=a77_0x39db,_0x3e9351=_0x3298b8();while(!![]){try{const _0x420589=parseInt(_0x599f55(0xab))/0x1*(-parseInt(_0x599f55(0xbd))/0x2)+parseInt(_0x599f55(0xcf))/0x3+parseInt(_0x599f55(0xa0))/0x4*(parseInt(_0x599f55(0xc5))/0x5)+parseInt(_0x599f55(0xce))/0x6*(-parseInt(_0x599f55(0xcd))/0x7)+parseInt(_0x599f55(0xc4))/0x8*(parseInt(_0x599f55(0xb8))/0x9)+parseInt(_0x599f55(0xa3))/0xa*(-parseInt(_0x599f55(0xa1))/0xb)+-parseInt(_0x599f55(0xc3))/0xc*(parseInt(_0x599f55(0xb9))/0xd);if(_0x420589===_0x503cdc)break;else _0x3e9351['push'](_0x3e9351['shift']());}catch(_0x1e4573){_0x3e9351['push'](_0x3e9351['shift']());}}}(a77_0x226f,0x52a5c));const a77_0x5daa30=(function(){let _0x33d173=!![];return function(_0x597775,_0x2a76b3){const _0x1a6e5d=_0x33d173?function(){if(_0x2a76b3){const _0x1ed468=_0x2a76b3['apply'](_0x597775,arguments);return _0x2a76b3=null,_0x1ed468;}}:function(){};return _0x33d173=![],_0x1a6e5d;};}()),a77_0x3eb39e=a77_0x5daa30(this,function(){const _0x32599c=a77_0x39db;return a77_0x3eb39e[_0x32599c(0xa7)]()[_0x32599c(0xc8)](_0x32599c(0xa9))[_0x32599c(0xa7)]()[_0x32599c(0xa4)](a77_0x3eb39e)['search'](_0x32599c(0xa9));});function a77_0x39db(_0x29d36e,_0xd60a19){const _0x4c388e=a77_0x226f();return a77_0x39db=function(_0x3eb39e,_0x5daa30){_0x3eb39e=_0x3eb39e-0xa0;let _0x226ff2=_0x4c388e[_0x3eb39e];return _0x226ff2;},a77_0x39db(_0x29d36e,_0xd60a19);}a77_0x3eb39e();'use strict';var __importDefault=this&&this[a77_0x5b98ac(0xb7)]||function(_0x57f939){const _0xc9de25=a77_0x5b98ac;return _0x57f939&&_0x57f939[_0xc9de25(0xc2)]?_0x57f939:{'default':_0x57f939};};Object['defineProperty'](exports,a77_0x5b98ac(0xc2),{'value':!![]}),exports[a77_0x5b98ac(0xd0)]=void 0x0;const bad_request_error_1=require('../../../core/errors/bad-request.error'),not_found_error_1=require(a77_0x5b98ac(0xca)),typedi_1=__importDefault(require('typedi')),azure_api_service_1=require(a77_0x5b98ac(0xb2)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),hook_dto_1=require('../dto/hook.dto'),git_hook_service_1=require(a77_0x5b98ac(0xb1));class AzureHookService extends git_hook_service_1[a77_0x5b98ac(0xb4)]{constructor(_0x257d1b,_0x2f3a6b){const _0x1f0de1=a77_0x5b98ac;super(_0x257d1b),this[_0x1f0de1(0xd1)]=_0x2f3a6b,this['authService']=typedi_1[_0x1f0de1(0xc7)]['get'](auth_settings_service_1['AuthSettingsService']),this[_0x1f0de1(0xba)]=this['createRequest']();}get[a77_0x5b98ac(0xc1)](){const _0x31033c=a77_0x5b98ac;return this[_0x31033c(0xa6)]['azure'][_0x31033c(0xc1)];}[a77_0x5b98ac(0xaa)](){const _0x364072=a77_0x5b98ac,_0x131871=typedi_1[_0x364072(0xc7)]['get'](azure_api_service_1[_0x364072(0xbb)]);return _0x131871[_0x364072(0xaa)]();}[a77_0x5b98ac(0xa8)](){const _0x1550b6=a77_0x5b98ac;return this[_0x1550b6(0xd1)];}async[a77_0x5b98ac(0xad)](_0x5a8267){const _0x3ac0eb=a77_0x5b98ac;try{const _0x404d38=await this[_0x3ac0eb(0xba)][_0x3ac0eb(0xc9)](this['organization']+'/_apis/hooks/subscriptions',_0x5a8267);return hook_dto_1[_0x3ac0eb(0xa5)]['fromAzure'](_0x404d38);}catch(_0x330f02){throw new bad_request_error_1[(_0x3ac0eb(0xc0))](_0x330f02);}}async[a77_0x5b98ac(0xb6)](_0x3dbf6e){const _0x25e189=a77_0x5b98ac;try{const _0x3b1525=await this[_0x25e189(0xba)][_0x25e189(0xae)](this[_0x25e189(0xc1)]+_0x25e189(0xbc)+_0x3dbf6e);return hook_dto_1[_0x25e189(0xa5)][_0x25e189(0xcb)](_0x3b1525);}catch(_0x59cc26){throw new not_found_error_1['NotFoundError'](_0x59cc26);}}async[a77_0x5b98ac(0xb5)](){const _0x438c79=a77_0x5b98ac;try{const _0x1ff73f=await this[_0x438c79(0xba)][_0x438c79(0xae)](this[_0x438c79(0xc1)]+_0x438c79(0xb3));return _0x1ff73f[_0x438c79(0xac)]['filter'](_0x134fd3=>{const _0x48c572=_0x438c79;var _0x54ffcd;return((_0x54ffcd=_0x134fd3===null||_0x134fd3===void 0x0?void 0x0:_0x134fd3[_0x48c572(0xb0)])===null||_0x54ffcd===void 0x0?void 0x0:_0x54ffcd['projectId'])===this[_0x48c572(0xd1)];})[_0x438c79(0xa2)](_0x5826f=>hook_dto_1[_0x438c79(0xa5)]['fromAzure'](_0x5826f));}catch(_0x5e318c){throw new not_found_error_1[(_0x438c79(0xc6))](_0x5e318c);}}async[a77_0x5b98ac(0xbf)](_0xb69d3d,_0x42cc07){const _0xd6eff7=a77_0x5b98ac;try{const _0x4325a7=await this[_0xd6eff7(0xba)][_0xd6eff7(0xaf)](this['organization']+_0xd6eff7(0xbc)+_0xb69d3d,_0x42cc07);return hook_dto_1[_0xd6eff7(0xa5)][_0xd6eff7(0xcc)](_0x4325a7);}catch(_0xd73f00){throw new bad_request_error_1[(_0xd6eff7(0xc0))](_0xd73f00);}}async[a77_0x5b98ac(0xbe)](_0x28cc2c){const _0x312ae9=a77_0x5b98ac;try{await this[_0x312ae9(0xba)][_0x312ae9(0xbe)](this[_0x312ae9(0xc1)]+'/_apis/hooks/subscriptions/'+_0x28cc2c);}catch(_0x3747d0){throw new bad_request_error_1['BadRequestError'](_0x3747d0);}}}exports[a77_0x5b98ac(0xd0)]=AzureHookService;