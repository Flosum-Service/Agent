const a85_0x377ddd=a85_0x2614;(function(_0xac3e7,_0x55b601){const _0x2dc252=a85_0x2614,_0x2dea91=_0xac3e7();while(!![]){try{const _0x13fb53=parseInt(_0x2dc252(0x18e))/0x1*(-parseInt(_0x2dc252(0x1a3))/0x2)+parseInt(_0x2dc252(0x1b3))/0x3+parseInt(_0x2dc252(0x1ae))/0x4+parseInt(_0x2dc252(0x1cd))/0x5+-parseInt(_0x2dc252(0x196))/0x6+parseInt(_0x2dc252(0x1b0))/0x7*(parseInt(_0x2dc252(0x1d5))/0x8)+parseInt(_0x2dc252(0x1d4))/0x9*(parseInt(_0x2dc252(0x19e))/0xa);if(_0x13fb53===_0x55b601)break;else _0x2dea91['push'](_0x2dea91['shift']());}catch(_0x127bea){_0x2dea91['push'](_0x2dea91['shift']());}}}(a85_0x3b80,0x72870));const a85_0x5e5ba0=(function(){let _0x1230da=!![];return function(_0x51716b,_0x68b454){const _0xfbf5a6=_0x1230da?function(){const _0x48e1d8=a85_0x2614;if(_0x68b454){const _0x39a6ed=_0x68b454[_0x48e1d8(0x193)](_0x51716b,arguments);return _0x68b454=null,_0x39a6ed;}}:function(){};return _0x1230da=![],_0xfbf5a6;};}()),a85_0x3df24a=a85_0x5e5ba0(this,function(){const _0x463fca=a85_0x2614;return a85_0x3df24a[_0x463fca(0x194)]()[_0x463fca(0x18a)]('(((.+)+)+)+$')[_0x463fca(0x194)]()[_0x463fca(0x1c9)](a85_0x3df24a)['search'](_0x463fca(0x1bb));});a85_0x3df24a();'use strict';var __importDefault=this&&this[a85_0x377ddd(0x18b)]||function(_0x5e0645){return _0x5e0645&&_0x5e0645['__esModule']?_0x5e0645:{'default':_0x5e0645};};Object[a85_0x377ddd(0x1b6)](exports,'__esModule',{'value':!![]}),exports[a85_0x377ddd(0x18f)]=void 0x0;const constants_1=require(a85_0x377ddd(0x1ab)),core_1=require('../../core'),path_1=__importDefault(require(a85_0x377ddd(0x1a0))),typedi_1=__importDefault(require('typedi')),branch_dto_1=require(a85_0x377ddd(0x1d2)),auth_settings_service_1=require(a85_0x377ddd(0x1c5)),utils_1=require(a85_0x377ddd(0x1a1)),fs_internal_1=require('./fs.internal'),internal_utils_1=require(a85_0x377ddd(0x1a7)),shell_internal_1=require(a85_0x377ddd(0x1a6));class Git{constructor(_0x5ecd76){const _0x3cf4bc=a85_0x377ddd;this[_0x3cf4bc(0x1ad)]=_0x5ecd76;}get[a85_0x377ddd(0x19c)](){const _0xff30bb=a85_0x377ddd;return this[_0xff30bb(0x1ad)];}async[a85_0x377ddd(0x184)](_0x196313,_0x227314){const _0x311f83=a85_0x377ddd;Git[_0x311f83(0x1c1)]['log'](_0x311f83(0x1c8),_0x196313,_0x227314),await shell_internal_1[_0x311f83(0x1b8)][_0x311f83(0x1ac)]('cd\x20'+this[_0x311f83(0x1ad)]+_0x311f83(0x182)+_0x196313+'\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'+_0x227314+'\x22');}async[a85_0x377ddd(0x1c2)](..._0x16bb9d){const _0x27eb53=a85_0x377ddd;await shell_internal_1['Shell'][_0x27eb53(0x1ac)](_0x27eb53(0x1b9)+this[_0x27eb53(0x1ad)]+_0x27eb53(0x1ca)+_0x16bb9d[_0x27eb53(0x1b2)]('\x20'));}async[a85_0x377ddd(0x1bf)](){const _0x172737=a85_0x377ddd;return shell_internal_1[_0x172737(0x1b8)][_0x172737(0x1ac)](_0x172737(0x1b9)+this[_0x172737(0x1ad)]+_0x172737(0x1d1));}async[a85_0x377ddd(0x1c4)](_0x2da22a){const _0x347ce2=a85_0x377ddd;Git[_0x347ce2(0x1c1)][_0x347ce2(0x18d)](_0x347ce2(0x1c6),_0x2da22a),await shell_internal_1['Shell'][_0x347ce2(0x1ac)](_0x347ce2(0x1b9)+this[_0x347ce2(0x1ad)]+_0x347ce2(0x187)+_0x2da22a+'\x22');}async[a85_0x377ddd(0x1cf)](_0xa9ed51){const _0x370b73=a85_0x377ddd;Git[_0x370b73(0x1c1)][_0x370b73(0x18d)](_0x370b73(0x1a8),_0xa9ed51),await shell_internal_1[_0x370b73(0x1b8)][_0x370b73(0x1ac)](_0x370b73(0x1b9)+this[_0x370b73(0x1ad)]+'\x20&&\x20git\x20push\x20origin\x20'+_0xa9ed51+_0x370b73(0x1be));}async[a85_0x377ddd(0x186)](_0x2736ce){const _0x1c0b69=a85_0x377ddd;Git[_0x1c0b69(0x1c1)][_0x1c0b69(0x18d)](_0x1c0b69(0x192),_0x2736ce),await shell_internal_1['Shell']['exec'](_0x1c0b69(0x1b9)+this[_0x1c0b69(0x1ad)]+_0x1c0b69(0x1bd)+_0x2736ce);}async[a85_0x377ddd(0x1a2)](){const _0x4eb92a=a85_0x377ddd,_0x3d4f46=await shell_internal_1['Shell']['exec']('cd\x20'+this[_0x4eb92a(0x1ad)]+_0x4eb92a(0x1a9));return _0x3d4f46[_0x4eb92a(0x1c3)]('\x0a','');}async[a85_0x377ddd(0x198)](_0x10a595){const _0x50a864=a85_0x377ddd;Git[_0x50a864(0x1c1)]['log'](_0x50a864(0x1a5),_0x10a595);const _0x8a2530=await shell_internal_1[_0x50a864(0x1b8)][_0x50a864(0x1ac)](_0x50a864(0x1b9)+this['_repoPath']+_0x50a864(0x1aa)+_0x10a595);return{'author':internal_utils_1['extractAuthorFromCommitDescribe'](_0x8a2530),'email':internal_utils_1['extractEmailFromCommitDescribe'](_0x8a2530),'message':internal_utils_1['extractMessageFromCommitDescribe'](_0x8a2530),'changes':internal_utils_1[_0x50a864(0x19b)](_0x8a2530)};}static async[a85_0x377ddd(0x181)](_0xfeb99d,_0x14b16f,_0x2f0344){const _0x555843=a85_0x377ddd,_0x1ce7be=path_1[_0x555843(0x190)][_0x555843(0x1b2)](this['DEFAULT_CLONE_PATH'],_0x14b16f),_0x26ba84=new Git(_0x1ce7be);return Git['logger'][_0x555843(0x18d)](_0x555843(0x1b5),_0x2f0344,_0xfeb99d,_0x1ce7be),await fs_internal_1['FS']['removeDir'](_0x1ce7be),await shell_internal_1[_0x555843(0x1b8)][_0x555843(0x1ac)](_0x555843(0x1cb)+_0x2f0344+_0x555843(0x1b4)+_0xfeb99d+'\x20'+_0x1ce7be),_0x26ba84;}static async[a85_0x377ddd(0x19a)](_0xfdc87){const _0x4b34a5=a85_0x377ddd,_0x43579a=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,{gitCredentials:_0x4cc9ce}=typedi_1['default'][_0x4b34a5(0x197)](auth_settings_service_1[_0x4b34a5(0x1c7)]),_0x31d182=_0xfdc87[_0x4b34a5(0x191)][_0x4b34a5(0x1c3)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x4b34a5(0x1d0)](_0xfdc87['gitUrl'])+_0x4b34a5(0x195)+_0x4cc9ce+'@'),_0x209ec8=await shell_internal_1[_0x4b34a5(0x1b8)][_0x4b34a5(0x1ac)]('git\x20ls-remote\x20'+_0x31d182),_0x16bc9e=_0x209ec8[_0x4b34a5(0x1c0)]('\x0a')['filter'](_0x1a3668=>_0x43579a[_0x4b34a5(0x1a4)](_0x1a3668))[_0x4b34a5(0x19d)](_0x31658a=>{const _0x56d3c1=_0x4b34a5,[,_0x31d59c,_0x209a99]=_0x31658a['match'](_0x43579a),_0x228411=new branch_dto_1[(_0x56d3c1(0x1bc))]();return _0x228411[_0x56d3c1(0x1ce)]=_0x31d59c,_0x228411[_0x56d3c1(0x1b7)]=_0x209a99['replace'](_0x56d3c1(0x1cc),''),_0x228411;});return _0x16bc9e;}static async[a85_0x377ddd(0x199)](_0x3daaf7,_0x57c3c2,_0x3d26e5='init\x20repository'){const _0x5a4914=a85_0x377ddd,{gitCredentials:_0xc7900}=typedi_1[_0x5a4914(0x190)][_0x5a4914(0x197)](auth_settings_service_1[_0x5a4914(0x1c7)]),_0x55f64c=_0x3daaf7[_0x5a4914(0x191)][_0x5a4914(0x1c3)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x5a4914(0x1d0)](_0x3daaf7[_0x5a4914(0x191)])+_0x5a4914(0x195)+_0xc7900+'@'),_0x51ad59=path_1[_0x5a4914(0x190)][_0x5a4914(0x1b2)](this['DEFAULT_CLONE_PATH'],_0x3daaf7[_0x5a4914(0x1b7)]);Git[_0x5a4914(0x1c1)]['log']('create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s',_0x3daaf7[_0x5a4914(0x1b7)],_0x57c3c2,_0x51ad59,_0x55f64c),await fs_internal_1['FS'][_0x5a4914(0x1af)](_0x51ad59),await fs_internal_1['FS']['makeDir'](_0x51ad59);const _0x370625=new Git(_0x51ad59);await shell_internal_1[_0x5a4914(0x1b8)][_0x5a4914(0x1ac)](_0x5a4914(0x1b9)+_0x370625[_0x5a4914(0x19c)]+_0x5a4914(0x188)),await shell_internal_1[_0x5a4914(0x1b8)][_0x5a4914(0x1ac)]('cd\x20'+_0x370625[_0x5a4914(0x19c)]+_0x5a4914(0x189)+_0x55f64c),await _0x370625[_0x5a4914(0x184)](constants_1['DEFAULT_GIT_USER_NAME'],constants_1['DEFAULT_GIT_USER_EMAIL']),await shell_internal_1[_0x5a4914(0x1b8)]['exec']('cd\x20'+_0x370625[_0x5a4914(0x19c)]+'\x20&&\x20git\x20checkout\x20--orphan\x20'+_0x57c3c2),await shell_internal_1[_0x5a4914(0x1b8)][_0x5a4914(0x1ac)](_0x5a4914(0x1b9)+_0x370625[_0x5a4914(0x19c)]+_0x5a4914(0x187)+_0x3d26e5+_0x5a4914(0x19f)),await _0x370625[_0x5a4914(0x1cf)](_0x57c3c2),Git['logger'][_0x5a4914(0x18d)](_0x5a4914(0x183)),await fs_internal_1['FS'][_0x5a4914(0x1af)](_0x370625[_0x5a4914(0x19c)]);}}exports[a85_0x377ddd(0x18f)]=Git,Git[a85_0x377ddd(0x185)]=path_1[a85_0x377ddd(0x190)][a85_0x377ddd(0x1b2)](process[a85_0x377ddd(0x1d3)](),a85_0x377ddd(0x18c),a85_0x377ddd(0x1ba)),Git[a85_0x377ddd(0x1c1)]=new core_1[(a85_0x377ddd(0x1b1))](Git[a85_0x377ddd(0x1b7)]);function a85_0x2614(_0x5a142e,_0x3fcbfe){const _0x3e022c=a85_0x3b80();return a85_0x2614=function(_0x3df24a,_0x5e5ba0){_0x3df24a=_0x3df24a-0x181;let _0x3b80c0=_0x3e022c[_0x3df24a];return _0x3b80c0;},a85_0x2614(_0x5a142e,_0x3fcbfe);}function a85_0x3b80(){const _0x2f4e73=['BranchDto','\x20&&\x20git\x20checkout\x20','\x20--quiet','status','split','logger','add','replace','commit','../shared/services/auth-settings.service','commit\x20message\x20\x22%s\x22','AuthSettingsService','set\x20credentials\x20%s\x20(%s)','constructor','\x20&&\x20git\x20add\x20','git\x20clone\x20-b\x20','refs/heads/','2107565Crnvaz','sha','push','getProtocol','\x20&&\x20git\x20status','../branches/dto/branch.dto','cwd','45AkoveE','32vZlXik','clone','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','setCredentials','DEFAULT_CLONE_PATH','checkout','\x20&&\x20git\x20commit\x20-m\x20\x22','\x20&&\x20git\x20init','\x20&&\x20git\x20remote\x20add\x20origin\x20','search','__importDefault','.temp','log','41823VDljTE','Git','default','gitUrl','checkout\x20to\x20%s','apply','toString','://','2199504jgJpev','get','describeCommit','createEmptyBranch','getRepositoryBranches','extractChangesFromCommitDescribe','baseDir','map','414470ZxAslZ','\x22\x20--allow-empty','path','../shared/utils','getCurrentHash','22NnNlUe','test','describe\x20commit\x20%s','./shell.internal','./internal.utils','push\x20changes\x20to\x20%s','\x20&&\x20git\x20rev-parse\x20HEAD','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','../../constants','exec','_repoPath','333576slAfbr','removeDir','7203EoSNwi','Logger','join','1738449LdbOAk','\x20--single-branch\x20','clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s','defineProperty','name','Shell','cd\x20','git','(((.+)+)+)+$'];a85_0x3b80=function(){return _0x2f4e73;};return a85_0x3b80();}