const a85_0x1ad2e8=a85_0x64eb;function a85_0x64eb(_0x3f5c0d,_0x1559fb){const _0x20dc4b=a85_0x1217();return a85_0x64eb=function(_0x27c8e6,_0x3ad214){_0x27c8e6=_0x27c8e6-0x150;let _0x12170a=_0x20dc4b[_0x27c8e6];return _0x12170a;},a85_0x64eb(_0x3f5c0d,_0x1559fb);}(function(_0x3f71c2,_0x2ef595){const _0x2ce517=a85_0x64eb,_0x4914e8=_0x3f71c2();while(!![]){try{const _0x820342=-parseInt(_0x2ce517(0x163))/0x1+parseInt(_0x2ce517(0x199))/0x2+parseInt(_0x2ce517(0x154))/0x3+-parseInt(_0x2ce517(0x18f))/0x4*(-parseInt(_0x2ce517(0x169))/0x5)+-parseInt(_0x2ce517(0x195))/0x6*(parseInt(_0x2ce517(0x168))/0x7)+-parseInt(_0x2ce517(0x190))/0x8+parseInt(_0x2ce517(0x19b))/0x9;if(_0x820342===_0x2ef595)break;else _0x4914e8['push'](_0x4914e8['shift']());}catch(_0xd0d93){_0x4914e8['push'](_0x4914e8['shift']());}}}(a85_0x1217,0x563b7));const a85_0x3ad214=(function(){let _0x224e95=!![];return function(_0x3b87c6,_0x3ccfff){const _0x1f8548=_0x224e95?function(){const _0x3c9b09=a85_0x64eb;if(_0x3ccfff){const _0x5a5163=_0x3ccfff[_0x3c9b09(0x181)](_0x3b87c6,arguments);return _0x3ccfff=null,_0x5a5163;}}:function(){};return _0x224e95=![],_0x1f8548;};}()),a85_0x27c8e6=a85_0x3ad214(this,function(){const _0x1d1ea0=a85_0x64eb;return a85_0x27c8e6[_0x1d1ea0(0x160)]()[_0x1d1ea0(0x185)](_0x1d1ea0(0x192))[_0x1d1ea0(0x160)]()[_0x1d1ea0(0x187)](a85_0x27c8e6)[_0x1d1ea0(0x185)](_0x1d1ea0(0x192));});function a85_0x1217(){const _0x3e4807=['_repoPath','getProtocol','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','../../core','path','replace','exec','checkout','join','\x20&&\x20git\x20checkout\x20--orphan\x20','log','baseDir','\x22\x20--allow-empty','../branches/dto/branch.dto','add','AuthSettingsService','Shell','apply','get','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','git\x20ls-remote\x20','search','\x20--single-branch\x20','constructor','Logger','\x20&&\x20git\x20init','://','logger','cd\x20','clone','refs/heads/','4FVszsF','4451168VZtKxT','status','(((.+)+)+)+$','./fs.internal','gitUrl','8868lWCqBm','getCurrentHash','match','typedi','1242362TrOgoK','BranchDto','5731821VQBKZJ','__importDefault','default','\x20--quiet','map','commit','1556310JXiXsX','DEFAULT_GIT_USER_NAME','name','DEFAULT_GIT_USER_EMAIL','setCredentials','describeCommit','../../constants','removeDir','split','\x20&&\x20git\x20push\x20origin\x20','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','\x20&&\x20git\x20rev-parse\x20HEAD','toString','push\x20changes\x20to\x20%s','createEmptyBranch','680251ffRtPZ','init\x20repository','\x20&&\x20git\x20add\x20','extractMessageFromCommitDescribe','../shared/services/auth-settings.service','1477qjmSgl','624460JJRtbK','extractAuthorFromCommitDescribe','push','\x20&&\x20git\x20checkout\x20','checkout\x20to\x20%s','test','DEFAULT_CLONE_PATH'];a85_0x1217=function(){return _0x3e4807;};return a85_0x1217();}a85_0x27c8e6();'use strict';var __importDefault=this&&this[a85_0x1ad2e8(0x19c)]||function(_0x3ec9be){return _0x3ec9be&&_0x3ec9be['__esModule']?_0x3ec9be:{'default':_0x3ec9be};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['Git']=void 0x0;const constants_1=require(a85_0x1ad2e8(0x15a)),core_1=require(a85_0x1ad2e8(0x173)),path_1=__importDefault(require(a85_0x1ad2e8(0x174))),typedi_1=__importDefault(require(a85_0x1ad2e8(0x198))),branch_dto_1=require(a85_0x1ad2e8(0x17d)),auth_settings_service_1=require(a85_0x1ad2e8(0x167)),utils_1=require('../shared/utils'),fs_internal_1=require(a85_0x1ad2e8(0x193)),internal_utils_1=require('./internal.utils'),shell_internal_1=require('./shell.internal');class Git{constructor(_0x232e32){const _0x279067=a85_0x1ad2e8;this[_0x279067(0x170)]=_0x232e32;}get[a85_0x1ad2e8(0x17b)](){const _0x191c63=a85_0x1ad2e8;return this[_0x191c63(0x170)];}async[a85_0x1ad2e8(0x158)](_0x1b7a5b,_0x13599e){const _0x4a5586=a85_0x1ad2e8;Git['logger']['log']('set\x20credentials\x20%s\x20(%s)',_0x1b7a5b,_0x13599e),await shell_internal_1['Shell'][_0x4a5586(0x176)](_0x4a5586(0x18c)+this[_0x4a5586(0x170)]+'\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22'+_0x1b7a5b+_0x4a5586(0x15e)+_0x13599e+'\x22');}async[a85_0x1ad2e8(0x17e)](..._0x2870fc){const _0x5e25c4=a85_0x1ad2e8;await shell_internal_1['Shell'][_0x5e25c4(0x176)]('cd\x20'+this[_0x5e25c4(0x170)]+_0x5e25c4(0x165)+_0x2870fc[_0x5e25c4(0x178)]('\x20'));}async[a85_0x1ad2e8(0x191)](){const _0x47ce23=a85_0x1ad2e8;return shell_internal_1[_0x47ce23(0x180)][_0x47ce23(0x176)](_0x47ce23(0x18c)+this[_0x47ce23(0x170)]+'\x20&&\x20git\x20status');}async[a85_0x1ad2e8(0x153)](_0xed3dac){const _0x5677b5=a85_0x1ad2e8;Git['logger'][_0x5677b5(0x17a)]('commit\x20message\x20\x22%s\x22',_0xed3dac),await shell_internal_1[_0x5677b5(0x180)][_0x5677b5(0x176)](_0x5677b5(0x18c)+this[_0x5677b5(0x170)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0xed3dac+'\x22');}async['push'](_0x45d832){const _0x217e37=a85_0x1ad2e8;Git[_0x217e37(0x18b)][_0x217e37(0x17a)](_0x217e37(0x161),_0x45d832),await shell_internal_1['Shell'][_0x217e37(0x176)](_0x217e37(0x18c)+this[_0x217e37(0x170)]+_0x217e37(0x15d)+_0x45d832+_0x217e37(0x151));}async[a85_0x1ad2e8(0x177)](_0x169a26){const _0x13084e=a85_0x1ad2e8;Git[_0x13084e(0x18b)]['log'](_0x13084e(0x16d),_0x169a26),await shell_internal_1['Shell'][_0x13084e(0x176)](_0x13084e(0x18c)+this[_0x13084e(0x170)]+_0x13084e(0x16c)+_0x169a26);}async[a85_0x1ad2e8(0x196)](){const _0x577d2f=a85_0x1ad2e8,_0x18e78e=await shell_internal_1['Shell'][_0x577d2f(0x176)]('cd\x20'+this[_0x577d2f(0x170)]+_0x577d2f(0x15f));return _0x18e78e['replace']('\x0a','');}async[a85_0x1ad2e8(0x159)](_0x257ee2){const _0x4e7094=a85_0x1ad2e8;Git['logger'][_0x4e7094(0x17a)]('describe\x20commit\x20%s',_0x257ee2);const _0x3a614c=await shell_internal_1['Shell'][_0x4e7094(0x176)](_0x4e7094(0x18c)+this['_repoPath']+_0x4e7094(0x172)+_0x257ee2);return{'author':internal_utils_1[_0x4e7094(0x16a)](_0x3a614c),'email':internal_utils_1['extractEmailFromCommitDescribe'](_0x3a614c),'message':internal_utils_1[_0x4e7094(0x166)](_0x3a614c),'changes':internal_utils_1['extractChangesFromCommitDescribe'](_0x3a614c)};}static async[a85_0x1ad2e8(0x18d)](_0x1b22e3,_0x3b7755,_0x336dc4){const _0x43437d=a85_0x1ad2e8,_0x2dac2e=path_1[_0x43437d(0x150)][_0x43437d(0x178)](this['DEFAULT_CLONE_PATH'],_0x3b7755),_0x8e2539=new Git(_0x2dac2e);return Git[_0x43437d(0x18b)][_0x43437d(0x17a)]('clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s',_0x336dc4,_0x1b22e3,_0x2dac2e),await fs_internal_1['FS'][_0x43437d(0x15b)](_0x2dac2e),await shell_internal_1[_0x43437d(0x180)][_0x43437d(0x176)]('git\x20clone\x20-b\x20'+_0x336dc4+_0x43437d(0x186)+_0x1b22e3+'\x20'+_0x2dac2e),_0x8e2539;}static async['getRepositoryBranches'](_0x219b20){const _0xab7be6=a85_0x1ad2e8,_0x1757c3=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,{gitCredentials:_0x27e15d}=typedi_1['default'][_0xab7be6(0x182)](auth_settings_service_1['AuthSettingsService']),_0x58d435=_0x219b20[_0xab7be6(0x194)][_0xab7be6(0x175)](/http(s)?\:\/\/(.+@)?/,utils_1[_0xab7be6(0x171)](_0x219b20[_0xab7be6(0x194)])+'://'+_0x27e15d+'@'),_0x380cb8=await shell_internal_1[_0xab7be6(0x180)][_0xab7be6(0x176)](_0xab7be6(0x184)+_0x58d435),_0xdb5bc0=_0x380cb8[_0xab7be6(0x15c)]('\x0a')['filter'](_0x47fcad=>_0x1757c3[_0xab7be6(0x16e)](_0x47fcad))[_0xab7be6(0x152)](_0x211a05=>{const _0xa4f291=_0xab7be6,[,_0x3df7dc,_0x21c09c]=_0x211a05[_0xa4f291(0x197)](_0x1757c3),_0x1c88a0=new branch_dto_1[(_0xa4f291(0x19a))]();return _0x1c88a0['sha']=_0x3df7dc,_0x1c88a0[_0xa4f291(0x156)]=_0x21c09c[_0xa4f291(0x175)](_0xa4f291(0x18e),''),_0x1c88a0;});return _0xdb5bc0;}static async[a85_0x1ad2e8(0x162)](_0x38695d,_0x38651f,_0x58e866=a85_0x1ad2e8(0x164)){const _0x4444c9=a85_0x1ad2e8,{gitCredentials:_0x1e0ac3}=typedi_1[_0x4444c9(0x150)][_0x4444c9(0x182)](auth_settings_service_1[_0x4444c9(0x17f)]),_0x37d28a=_0x38695d[_0x4444c9(0x194)][_0x4444c9(0x175)](/http(s)?\:\/\/(.+@)?/,utils_1['getProtocol'](_0x38695d[_0x4444c9(0x194)])+_0x4444c9(0x18a)+_0x1e0ac3+'@'),_0x47ddd8=path_1[_0x4444c9(0x150)][_0x4444c9(0x178)](this[_0x4444c9(0x16f)],_0x38695d['name']);Git[_0x4444c9(0x18b)][_0x4444c9(0x17a)]('create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s',_0x38695d['name'],_0x38651f,_0x47ddd8,_0x37d28a),await fs_internal_1['FS'][_0x4444c9(0x15b)](_0x47ddd8),await fs_internal_1['FS']['makeDir'](_0x47ddd8);const _0x5e257a=new Git(_0x47ddd8);await shell_internal_1[_0x4444c9(0x180)]['exec'](_0x4444c9(0x18c)+_0x5e257a[_0x4444c9(0x17b)]+_0x4444c9(0x189)),await shell_internal_1[_0x4444c9(0x180)][_0x4444c9(0x176)](_0x4444c9(0x18c)+_0x5e257a[_0x4444c9(0x17b)]+'\x20&&\x20git\x20remote\x20add\x20origin\x20'+_0x37d28a),await _0x5e257a[_0x4444c9(0x158)](constants_1[_0x4444c9(0x155)],constants_1[_0x4444c9(0x157)]),await shell_internal_1[_0x4444c9(0x180)][_0x4444c9(0x176)]('cd\x20'+_0x5e257a['baseDir']+_0x4444c9(0x179)+_0x38651f),await shell_internal_1['Shell'][_0x4444c9(0x176)](_0x4444c9(0x18c)+_0x5e257a[_0x4444c9(0x17b)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x58e866+_0x4444c9(0x17c)),await _0x5e257a[_0x4444c9(0x16b)](_0x38651f),Git[_0x4444c9(0x18b)][_0x4444c9(0x17a)](_0x4444c9(0x183)),await fs_internal_1['FS'][_0x4444c9(0x15b)](_0x5e257a['baseDir']);}}exports['Git']=Git,Git['DEFAULT_CLONE_PATH']=path_1['default'][a85_0x1ad2e8(0x178)](process['cwd'](),'.temp','git'),Git[a85_0x1ad2e8(0x18b)]=new core_1[(a85_0x1ad2e8(0x188))](Git[a85_0x1ad2e8(0x156)]);