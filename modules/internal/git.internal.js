const a85_0x2f61b0=a85_0x3b54;function a85_0x576a(){const _0x57f7f0=['split','cwd','sha','../../constants','filter','../shared/utils','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','status','refs/heads/','\x20&&\x20git\x20status','baseDir','commit\x20message\x20\x22%s\x22','11380xgzPhm','constructor','replace','extractChangesFromCommitDescribe','extractEmailFromCommitDescribe','get','typedi','187835EETirx','852968LWGmGo','\x20&&\x20git\x20init','search','gitUrl','://','3990063meYRMB','test','\x20--quiet','\x20&&\x20git\x20checkout\x20','getRepositoryBranches','getRemoteHash','_repoPath','push','makeDir','push\x20changes\x20to\x20%s','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','61203nHlybN','git','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s','logger','removeDir','git\x20clone\x20-b\x20','2786340IlVFXV','./internal.utils','log','cd\x20','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','checkout','\x20&&\x20git\x20rev-parse\x20HEAD','1350416eiBsmZ','Logger','AuthSettingsService','then','3897BALVpZ','apply','createEmptyBranch','path','toString','\x22\x20--allow-empty','DEFAULT_GIT_USER_NAME','__importDefault','add','18ieHtVH','Shell','setCredentials','__esModule','DEFAULT_CLONE_PATH','git\x20ls-remote\x20','\x20--single-branch\x20','describeCommit','extractAuthorFromCommitDescribe','\x20&&\x20git\x20add\x20','\x20&&\x20git\x20checkout\x20--orphan\x20','../branches/dto/branch.dto','name','clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s','extractMessageFromCommitDescribe','clone','../shared/services/auth-settings.service','5uKwvSB','BranchDto','(((.+)+)+)+$','getProtocol','exec','./fs.internal','join','\x20--refs','default','defineProperty'];a85_0x576a=function(){return _0x57f7f0;};return a85_0x576a();}(function(_0x39a35a,_0x558667){const _0x190f04=a85_0x3b54,_0x351d6c=_0x39a35a();while(!![]){try{const _0x9e42b8=parseInt(_0x190f04(0x16d))/0x1+parseInt(_0x190f04(0x198))/0x2*(parseInt(_0x190f04(0x17e))/0x3)+-parseInt(_0x190f04(0x16e))/0x4*(-parseInt(_0x190f04(0x1a9))/0x5)+-parseInt(_0x190f04(0x184))/0x6+parseInt(_0x190f04(0x173))/0x7+parseInt(_0x190f04(0x18b))/0x8+parseInt(_0x190f04(0x18f))/0x9*(-parseInt(_0x190f04(0x166))/0xa);if(_0x9e42b8===_0x558667)break;else _0x351d6c['push'](_0x351d6c['shift']());}catch(_0xc0ab50){_0x351d6c['push'](_0x351d6c['shift']());}}}(a85_0x576a,0x59711));const a85_0x2452aa=(function(){let _0x1d9f9f=!![];return function(_0xf11ab4,_0x572c82){const _0x1e6efb=_0x1d9f9f?function(){const _0x401745=a85_0x3b54;if(_0x572c82){const _0x594df7=_0x572c82[_0x401745(0x190)](_0xf11ab4,arguments);return _0x572c82=null,_0x594df7;}}:function(){};return _0x1d9f9f=![],_0x1e6efb;};}()),a85_0x427b97=a85_0x2452aa(this,function(){const _0x5a966a=a85_0x3b54;return a85_0x427b97[_0x5a966a(0x193)]()[_0x5a966a(0x170)]('(((.+)+)+)+$')[_0x5a966a(0x193)]()[_0x5a966a(0x167)](a85_0x427b97)[_0x5a966a(0x170)](_0x5a966a(0x152));});a85_0x427b97();'use strict';var __importDefault=this&&this[a85_0x2f61b0(0x196)]||function(_0x372633){const _0x5ace8b=a85_0x2f61b0;return _0x372633&&_0x372633[_0x5ace8b(0x19b)]?_0x372633:{'default':_0x372633};};Object[a85_0x2f61b0(0x159)](exports,a85_0x2f61b0(0x19b),{'value':!![]}),exports['Git']=void 0x0;const constants_1=require(a85_0x2f61b0(0x15d)),core_1=require('../../core'),path_1=__importDefault(require(a85_0x2f61b0(0x192))),typedi_1=__importDefault(require(a85_0x2f61b0(0x16c))),branch_dto_1=require(a85_0x2f61b0(0x1a3)),auth_settings_service_1=require(a85_0x2f61b0(0x1a8)),utils_1=require(a85_0x2f61b0(0x15f)),fs_internal_1=require(a85_0x2f61b0(0x155)),internal_utils_1=require(a85_0x2f61b0(0x185)),shell_internal_1=require('./shell.internal');class Git{constructor(_0x5b45a8){const _0x4d57a3=a85_0x2f61b0;this[_0x4d57a3(0x179)]=_0x5b45a8;}get['baseDir'](){return this['_repoPath'];}async['setCredentials'](_0x3564cb,_0x367a1b){const _0xd8b94c=a85_0x2f61b0;Git[_0xd8b94c(0x181)]['log']('set\x20credentials\x20%s\x20(%s)',_0x3564cb,_0x367a1b),await shell_internal_1[_0xd8b94c(0x199)][_0xd8b94c(0x154)]('cd\x20'+this[_0xd8b94c(0x179)]+_0xd8b94c(0x17d)+_0x3564cb+_0xd8b94c(0x160)+_0x367a1b+'\x22');}async[a85_0x2f61b0(0x197)](..._0x115218){const _0x8668ae=a85_0x2f61b0;await shell_internal_1['Shell'][_0x8668ae(0x154)]('cd\x20'+this['_repoPath']+_0x8668ae(0x1a1)+_0x115218[_0x8668ae(0x156)]('\x20'));}async[a85_0x2f61b0(0x161)](){const _0xf32112=a85_0x2f61b0;return shell_internal_1[_0xf32112(0x199)][_0xf32112(0x154)]('cd\x20'+this[_0xf32112(0x179)]+_0xf32112(0x163));}async['commit'](_0x1a97b6){const _0x340017=a85_0x2f61b0;Git['logger']['log'](_0x340017(0x165),_0x1a97b6),await shell_internal_1[_0x340017(0x199)][_0x340017(0x154)]('cd\x20'+this[_0x340017(0x179)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x1a97b6+'\x22');}async[a85_0x2f61b0(0x17a)](_0xb2c57d){const _0x1836ea=a85_0x2f61b0;Git[_0x1836ea(0x181)][_0x1836ea(0x186)](_0x1836ea(0x17c),_0xb2c57d),await shell_internal_1['Shell'][_0x1836ea(0x154)]('cd\x20'+this[_0x1836ea(0x179)]+'\x20&&\x20git\x20push\x20origin\x20'+_0xb2c57d+_0x1836ea(0x175));}async[a85_0x2f61b0(0x189)](_0x57e74f){const _0x31698a=a85_0x2f61b0;Git[_0x31698a(0x181)]['log']('checkout\x20to\x20%s',_0x57e74f),await shell_internal_1[_0x31698a(0x199)][_0x31698a(0x154)](_0x31698a(0x187)+this['_repoPath']+_0x31698a(0x176)+_0x57e74f);}async['getCurrentHash'](){const _0x54d703=a85_0x2f61b0,_0xee1f56=await shell_internal_1[_0x54d703(0x199)]['exec'](_0x54d703(0x187)+this[_0x54d703(0x179)]+_0x54d703(0x18a));return _0xee1f56[_0x54d703(0x168)]('\x0a','');}async[a85_0x2f61b0(0x19f)](_0xef03b){const _0xfac1e9=a85_0x2f61b0;Git[_0xfac1e9(0x181)][_0xfac1e9(0x186)]('describe\x20commit\x20%s',_0xef03b);const _0x302f66=await shell_internal_1[_0xfac1e9(0x199)][_0xfac1e9(0x154)](_0xfac1e9(0x187)+this['_repoPath']+'\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20'+_0xef03b);return{'author':internal_utils_1[_0xfac1e9(0x1a0)](_0x302f66),'email':internal_utils_1[_0xfac1e9(0x16a)](_0x302f66),'message':internal_utils_1[_0xfac1e9(0x1a6)](_0x302f66),'changes':internal_utils_1[_0xfac1e9(0x169)](_0x302f66)};}static async[a85_0x2f61b0(0x178)](_0x30fc91,_0x4119bf){const _0x36696e=a85_0x2f61b0,[_0x575383]=await shell_internal_1[_0x36696e(0x199)][_0x36696e(0x154)](_0x36696e(0x19d)+_0x30fc91+'\x20'+_0x4119bf+_0x36696e(0x157))[_0x36696e(0x18e)](_0x881dc7=>_0x881dc7[_0x36696e(0x168)](/\s/g,'\x20')[_0x36696e(0x15a)]('\x20'));return _0x575383;}static async[a85_0x2f61b0(0x1a7)](_0xe10443,_0x1324e0,_0x70531b){const _0xa672a1=a85_0x2f61b0,_0x39d0aa=path_1[_0xa672a1(0x158)][_0xa672a1(0x156)](this[_0xa672a1(0x19c)],_0x1324e0),_0x5559ef=new Git(_0x39d0aa);return Git[_0xa672a1(0x181)][_0xa672a1(0x186)](_0xa672a1(0x1a5),_0x70531b,_0xe10443,_0x39d0aa),await fs_internal_1['FS'][_0xa672a1(0x182)](_0x39d0aa),await shell_internal_1[_0xa672a1(0x199)][_0xa672a1(0x154)](_0xa672a1(0x183)+_0x70531b+_0xa672a1(0x19e)+_0xe10443+'\x20'+_0x39d0aa),_0x5559ef;}static async[a85_0x2f61b0(0x177)](_0x21c655){const _0x32b53f=a85_0x2f61b0,_0x4c3852=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,{gitCredentials:_0x224549}=typedi_1[_0x32b53f(0x158)][_0x32b53f(0x16b)](auth_settings_service_1[_0x32b53f(0x18d)]),_0x3cc40b=_0x21c655['gitUrl']['replace'](/http(s)?\:\/\/(.+@)?/,utils_1[_0x32b53f(0x153)](_0x21c655['gitUrl'])+_0x32b53f(0x172)+_0x224549+'@'),_0x2889b6=await shell_internal_1[_0x32b53f(0x199)][_0x32b53f(0x154)](_0x32b53f(0x19d)+_0x3cc40b),_0x542b00=_0x2889b6[_0x32b53f(0x15a)]('\x0a')[_0x32b53f(0x15e)](_0x491f56=>_0x4c3852[_0x32b53f(0x174)](_0x491f56))['map'](_0x188757=>{const _0x56f940=_0x32b53f,[,_0x22ab2e,_0x2efe3a]=_0x188757['match'](_0x4c3852),_0x4a0ff0=new branch_dto_1[(_0x56f940(0x1aa))]();return _0x4a0ff0[_0x56f940(0x15c)]=_0x22ab2e,_0x4a0ff0['name']=_0x2efe3a[_0x56f940(0x168)](_0x56f940(0x162),''),_0x4a0ff0;});return _0x542b00;}static async[a85_0x2f61b0(0x191)](_0x351e39,_0x420a5e,_0x1c2c27='init\x20repository'){const _0x43f9cb=a85_0x2f61b0,{gitCredentials:_0x4a37b3}=typedi_1[_0x43f9cb(0x158)][_0x43f9cb(0x16b)](auth_settings_service_1[_0x43f9cb(0x18d)]),_0x2a096e=_0x351e39[_0x43f9cb(0x171)]['replace'](/http(s)?\:\/\/(.+@)?/,utils_1[_0x43f9cb(0x153)](_0x351e39['gitUrl'])+_0x43f9cb(0x172)+_0x4a37b3+'@'),_0x372330=path_1[_0x43f9cb(0x158)][_0x43f9cb(0x156)](this[_0x43f9cb(0x19c)],_0x351e39[_0x43f9cb(0x1a4)]);Git['logger'][_0x43f9cb(0x186)](_0x43f9cb(0x180),_0x351e39[_0x43f9cb(0x1a4)],_0x420a5e,_0x372330,_0x2a096e),await fs_internal_1['FS'][_0x43f9cb(0x182)](_0x372330),await fs_internal_1['FS'][_0x43f9cb(0x17b)](_0x372330);const _0x492cbc=new Git(_0x372330);await shell_internal_1[_0x43f9cb(0x199)][_0x43f9cb(0x154)]('cd\x20'+_0x492cbc[_0x43f9cb(0x164)]+_0x43f9cb(0x16f)),await shell_internal_1[_0x43f9cb(0x199)][_0x43f9cb(0x154)](_0x43f9cb(0x187)+_0x492cbc[_0x43f9cb(0x164)]+'\x20&&\x20git\x20remote\x20add\x20origin\x20'+_0x2a096e),await _0x492cbc[_0x43f9cb(0x19a)](constants_1[_0x43f9cb(0x195)],constants_1['DEFAULT_GIT_USER_EMAIL']),await shell_internal_1['Shell']['exec'](_0x43f9cb(0x187)+_0x492cbc['baseDir']+_0x43f9cb(0x1a2)+_0x420a5e),await shell_internal_1[_0x43f9cb(0x199)]['exec'](_0x43f9cb(0x187)+_0x492cbc[_0x43f9cb(0x164)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x1c2c27+_0x43f9cb(0x194)),await _0x492cbc[_0x43f9cb(0x17a)](_0x420a5e),Git['logger'][_0x43f9cb(0x186)](_0x43f9cb(0x188)),await fs_internal_1['FS'][_0x43f9cb(0x182)](_0x492cbc['baseDir']);}}function a85_0x3b54(_0x1c2c15,_0xa82c50){const _0x105873=a85_0x576a();return a85_0x3b54=function(_0x427b97,_0x2452aa){_0x427b97=_0x427b97-0x152;let _0x576a2d=_0x105873[_0x427b97];return _0x576a2d;},a85_0x3b54(_0x1c2c15,_0xa82c50);}exports['Git']=Git,Git['DEFAULT_CLONE_PATH']=path_1['default'][a85_0x2f61b0(0x156)](process[a85_0x2f61b0(0x15b)](),'.temp',a85_0x2f61b0(0x17f)),Git[a85_0x2f61b0(0x181)]=new core_1[(a85_0x2f61b0(0x18c))](Git[a85_0x2f61b0(0x1a4)]);