const a85_0xd854de=a85_0x37bf;(function(_0x4e082d,_0x423724){const _0x4d1679=a85_0x37bf,_0x6b2a51=_0x4e082d();while(!![]){try{const _0x4ba8ef=-parseInt(_0x4d1679(0x139))/0x1+parseInt(_0x4d1679(0x150))/0x2*(parseInt(_0x4d1679(0x164))/0x3)+-parseInt(_0x4d1679(0x162))/0x4*(parseInt(_0x4d1679(0x161))/0x5)+parseInt(_0x4d1679(0x156))/0x6+-parseInt(_0x4d1679(0x16d))/0x7*(parseInt(_0x4d1679(0x145))/0x8)+parseInt(_0x4d1679(0x128))/0x9*(-parseInt(_0x4d1679(0x15c))/0xa)+-parseInt(_0x4d1679(0x158))/0xb*(-parseInt(_0x4d1679(0x177))/0xc);if(_0x4ba8ef===_0x423724)break;else _0x6b2a51['push'](_0x6b2a51['shift']());}catch(_0x60d436){_0x6b2a51['push'](_0x6b2a51['shift']());}}}(a85_0x495f,0x54e47));function a85_0x495f(){const _0x164393=['filter','extractChangesFromCommitDescribe','5651540zGmybF','log','get','__esModule','set\x20credentials\x20%s\x20(%s)','1212180LdUYxD','4PzXYtt','\x20--quiet','81735AMqqNu','\x20--single-branch\x20','../shared/services/auth-settings.service','(((.+)+)+)+$','commit','defineProperty','git\x20clone\x20-b\x20','push\x20changes\x20to\x20%s','Git','98XKwdEf','cd\x20','./internal.utils','typedi','_repoPath','extractAuthorFromCommitDescribe','AuthSettingsService','git','clone','commit\x20message\x20\x22%s\x22','12agQTmU','toString','\x20&&\x20git\x20rev-parse\x20HEAD','setCredentials','getRepositoryBranches','sha','checkout\x20to\x20%s','default','9GnRBuG','\x20&&\x20git\x20status','getProtocol','\x20&&\x20git\x20add\x20','test','\x20&&\x20git\x20checkout\x20','match','git\x20ls-remote\x20','removeDir','init\x20repository','path','map','refs/heads/','Logger','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','split','gitUrl','4900gTbwCO','replace','\x20&&\x20git\x20checkout\x20--orphan\x20','push','\x20&&\x20git\x20push\x20origin\x20','\x20&&\x20git\x20commit\x20-m\x20\x22','clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s','join','describe\x20commit\x20%s','\x20&&\x20git\x20init','getCurrentHash','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','378224oRNGtF','Shell','exec','name','://','search','logger','createEmptyBranch','\x22\x20--allow-empty','constructor','DEFAULT_GIT_USER_NAME','46DrMxcR','baseDir','apply','DEFAULT_GIT_USER_EMAIL','./fs.internal','../../core','240282EMlQAG','.temp','12709609adJBAj','cwd'];a85_0x495f=function(){return _0x164393;};return a85_0x495f();}const a85_0x5bfe77=(function(){let _0x23c2b0=!![];return function(_0x4f1fb4,_0x33428d){const _0x2af1c6=_0x23c2b0?function(){const _0x5a9829=a85_0x37bf;if(_0x33428d){const _0x122aaf=_0x33428d[_0x5a9829(0x152)](_0x4f1fb4,arguments);return _0x33428d=null,_0x122aaf;}}:function(){};return _0x23c2b0=![],_0x2af1c6;};}()),a85_0x34d74b=a85_0x5bfe77(this,function(){const _0x39dd99=a85_0x37bf;return a85_0x34d74b['toString']()[_0x39dd99(0x14a)](_0x39dd99(0x167))[_0x39dd99(0x178)]()[_0x39dd99(0x14e)](a85_0x34d74b)[_0x39dd99(0x14a)](_0x39dd99(0x167));});function a85_0x37bf(_0x560ace,_0x537216){const _0x4cdf6d=a85_0x495f();return a85_0x37bf=function(_0x34d74b,_0x5bfe77){_0x34d74b=_0x34d74b-0x128;let _0x495fac=_0x4cdf6d[_0x34d74b];return _0x495fac;},a85_0x37bf(_0x560ace,_0x537216);}a85_0x34d74b();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5a6d72){return _0x5a6d72&&_0x5a6d72['__esModule']?_0x5a6d72:{'default':_0x5a6d72};};Object[a85_0xd854de(0x169)](exports,a85_0xd854de(0x15f),{'value':!![]}),exports['Git']=void 0x0;const constants_1=require('../../constants'),core_1=require(a85_0xd854de(0x155)),path_1=__importDefault(require(a85_0xd854de(0x132))),typedi_1=__importDefault(require(a85_0xd854de(0x170))),branch_dto_1=require('../branches/dto/branch.dto'),auth_settings_service_1=require(a85_0xd854de(0x166)),utils_1=require('../shared/utils'),fs_internal_1=require(a85_0xd854de(0x154)),internal_utils_1=require(a85_0xd854de(0x16f)),shell_internal_1=require('./shell.internal');class Git{constructor(_0x193fb0){const _0x4d05ee=a85_0xd854de;this[_0x4d05ee(0x171)]=_0x193fb0;}get['baseDir'](){const _0x53ac2d=a85_0xd854de;return this[_0x53ac2d(0x171)];}async[a85_0xd854de(0x17a)](_0x58a07f,_0x370452){const _0x1e6146=a85_0xd854de;Git['logger'][_0x1e6146(0x15d)](_0x1e6146(0x160),_0x58a07f,_0x370452),await shell_internal_1[_0x1e6146(0x146)][_0x1e6146(0x147)]('cd\x20'+this[_0x1e6146(0x171)]+_0x1e6146(0x144)+_0x58a07f+'\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'+_0x370452+'\x22');}async['add'](..._0x2186ef){const _0x2ec4a5=a85_0xd854de;await shell_internal_1[_0x2ec4a5(0x146)][_0x2ec4a5(0x147)](_0x2ec4a5(0x16e)+this[_0x2ec4a5(0x171)]+_0x2ec4a5(0x12b)+_0x2186ef[_0x2ec4a5(0x140)]('\x20'));}async['status'](){const _0x1af53c=a85_0xd854de;return shell_internal_1[_0x1af53c(0x146)][_0x1af53c(0x147)](_0x1af53c(0x16e)+this['_repoPath']+_0x1af53c(0x129));}async[a85_0xd854de(0x168)](_0x343705){const _0x54bff0=a85_0xd854de;Git['logger']['log'](_0x54bff0(0x176),_0x343705),await shell_internal_1[_0x54bff0(0x146)][_0x54bff0(0x147)](_0x54bff0(0x16e)+this['_repoPath']+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x343705+'\x22');}async[a85_0xd854de(0x13c)](_0x1d8fa8){const _0x2bd2a6=a85_0xd854de;Git[_0x2bd2a6(0x14b)][_0x2bd2a6(0x15d)](_0x2bd2a6(0x16b),_0x1d8fa8),await shell_internal_1[_0x2bd2a6(0x146)][_0x2bd2a6(0x147)](_0x2bd2a6(0x16e)+this['_repoPath']+_0x2bd2a6(0x13d)+_0x1d8fa8+_0x2bd2a6(0x163));}async['checkout'](_0x50b091){const _0x54d8f9=a85_0xd854de;Git[_0x54d8f9(0x14b)][_0x54d8f9(0x15d)](_0x54d8f9(0x17d),_0x50b091),await shell_internal_1['Shell'][_0x54d8f9(0x147)](_0x54d8f9(0x16e)+this[_0x54d8f9(0x171)]+_0x54d8f9(0x12d)+_0x50b091);}async[a85_0xd854de(0x143)](){const _0x50a911=a85_0xd854de,_0x522f85=await shell_internal_1['Shell'][_0x50a911(0x147)](_0x50a911(0x16e)+this[_0x50a911(0x171)]+_0x50a911(0x179));return _0x522f85['replace']('\x0a','');}async['describeCommit'](_0x53c01b){const _0xf133b3=a85_0xd854de;Git[_0xf133b3(0x14b)]['log'](_0xf133b3(0x141),_0x53c01b);const _0x217ef1=await shell_internal_1[_0xf133b3(0x146)][_0xf133b3(0x147)](_0xf133b3(0x16e)+this[_0xf133b3(0x171)]+_0xf133b3(0x136)+_0x53c01b);return{'author':internal_utils_1[_0xf133b3(0x172)](_0x217ef1),'email':internal_utils_1['extractEmailFromCommitDescribe'](_0x217ef1),'message':internal_utils_1['extractMessageFromCommitDescribe'](_0x217ef1),'changes':internal_utils_1[_0xf133b3(0x15b)](_0x217ef1)};}static async[a85_0xd854de(0x175)](_0x538e1b,_0x2b0c6e,_0x36b674){const _0x1e2400=a85_0xd854de,_0x26b555=path_1[_0x1e2400(0x17e)][_0x1e2400(0x140)](this['DEFAULT_CLONE_PATH'],_0x2b0c6e),_0x55cff8=new Git(_0x26b555);return Git[_0x1e2400(0x14b)][_0x1e2400(0x15d)](_0x1e2400(0x13f),_0x36b674,_0x538e1b,_0x26b555),await fs_internal_1['FS'][_0x1e2400(0x130)](_0x26b555),await shell_internal_1['Shell']['exec'](_0x1e2400(0x16a)+_0x36b674+_0x1e2400(0x165)+_0x538e1b+'\x20'+_0x26b555),_0x55cff8;}static async[a85_0xd854de(0x17b)](_0x411e68){const _0x4593b7=a85_0xd854de,_0x2619d7=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,{gitCredentials:_0x11c4c3}=typedi_1['default']['get'](auth_settings_service_1['AuthSettingsService']),_0x4f4296=_0x411e68['gitUrl']['replace'](/http(s)?\:\/\/(.+@)?/,utils_1['getProtocol'](_0x411e68[_0x4593b7(0x138)])+'://'+_0x11c4c3+'@'),_0x4b00ec=await shell_internal_1[_0x4593b7(0x146)][_0x4593b7(0x147)](_0x4593b7(0x12f)+_0x4f4296),_0x5e0fde=_0x4b00ec[_0x4593b7(0x137)]('\x0a')[_0x4593b7(0x15a)](_0x21d763=>_0x2619d7[_0x4593b7(0x12c)](_0x21d763))[_0x4593b7(0x133)](_0x303d05=>{const _0xd4e0f3=_0x4593b7,[,_0x34add0,_0x59db56]=_0x303d05[_0xd4e0f3(0x12e)](_0x2619d7),_0xeabdaf=new branch_dto_1['BranchDto']();return _0xeabdaf[_0xd4e0f3(0x17c)]=_0x34add0,_0xeabdaf[_0xd4e0f3(0x148)]=_0x59db56['replace'](_0xd4e0f3(0x134),''),_0xeabdaf;});return _0x5e0fde;}static async[a85_0xd854de(0x14c)](_0x360577,_0x3c52bd,_0xb1d942=a85_0xd854de(0x131)){const _0x39bae2=a85_0xd854de,{gitCredentials:_0x419cb3}=typedi_1['default'][_0x39bae2(0x15e)](auth_settings_service_1[_0x39bae2(0x173)]),_0xeab1ab=_0x360577['gitUrl'][_0x39bae2(0x13a)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x39bae2(0x12a)](_0x360577[_0x39bae2(0x138)])+_0x39bae2(0x149)+_0x419cb3+'@'),_0x49999d=path_1[_0x39bae2(0x17e)][_0x39bae2(0x140)](this['DEFAULT_CLONE_PATH'],_0x360577[_0x39bae2(0x148)]);Git[_0x39bae2(0x14b)][_0x39bae2(0x15d)]('create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s',_0x360577['name'],_0x3c52bd,_0x49999d,_0xeab1ab),await fs_internal_1['FS'][_0x39bae2(0x130)](_0x49999d),await fs_internal_1['FS']['makeDir'](_0x49999d);const _0x2183c5=new Git(_0x49999d);await shell_internal_1[_0x39bae2(0x146)]['exec'](_0x39bae2(0x16e)+_0x2183c5[_0x39bae2(0x151)]+_0x39bae2(0x142)),await shell_internal_1[_0x39bae2(0x146)][_0x39bae2(0x147)](_0x39bae2(0x16e)+_0x2183c5[_0x39bae2(0x151)]+'\x20&&\x20git\x20remote\x20add\x20origin\x20'+_0xeab1ab),await _0x2183c5[_0x39bae2(0x17a)](constants_1[_0x39bae2(0x14f)],constants_1[_0x39bae2(0x153)]),await shell_internal_1[_0x39bae2(0x146)]['exec'](_0x39bae2(0x16e)+_0x2183c5[_0x39bae2(0x151)]+_0x39bae2(0x13b)+_0x3c52bd),await shell_internal_1[_0x39bae2(0x146)]['exec'](_0x39bae2(0x16e)+_0x2183c5[_0x39bae2(0x151)]+_0x39bae2(0x13e)+_0xb1d942+_0x39bae2(0x14d)),await _0x2183c5[_0x39bae2(0x13c)](_0x3c52bd),Git[_0x39bae2(0x14b)]['log']('clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch'),await fs_internal_1['FS'][_0x39bae2(0x130)](_0x2183c5[_0x39bae2(0x151)]);}}exports[a85_0xd854de(0x16c)]=Git,Git['DEFAULT_CLONE_PATH']=path_1[a85_0xd854de(0x17e)]['join'](process[a85_0xd854de(0x159)](),a85_0xd854de(0x157),a85_0xd854de(0x174)),Git[a85_0xd854de(0x14b)]=new core_1[(a85_0xd854de(0x135))](Git['name']);