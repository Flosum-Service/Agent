const a130_0x2f1545=a130_0x2151;(function(_0x52e480,_0x1ed271){const _0x1a70de=a130_0x2151,_0x5c253c=_0x52e480();while(!![]){try{const _0x2ed1a6=-parseInt(_0x1a70de(0x178))/0x1*(parseInt(_0x1a70de(0x155))/0x2)+-parseInt(_0x1a70de(0x15a))/0x3+-parseInt(_0x1a70de(0x16d))/0x4+-parseInt(_0x1a70de(0x18d))/0x5+parseInt(_0x1a70de(0x164))/0x6+parseInt(_0x1a70de(0x157))/0x7*(-parseInt(_0x1a70de(0x15f))/0x8)+parseInt(_0x1a70de(0x15c))/0x9;if(_0x2ed1a6===_0x1ed271)break;else _0x5c253c['push'](_0x5c253c['shift']());}catch(_0x4a23d6){_0x5c253c['push'](_0x5c253c['shift']());}}}(a130_0x30a4,0x6c064));function a130_0x30a4(){const _0x27aa67=['substr','post','Branch\x20\x22','2348565cxypvW','extractFieldsFromRecord','\x22\x20not\x20found\x20in\x20flosum.','GET_BRANCH_COMPONENTS_QUERY','SalesforceGitSyncService','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','typedi','splice','function','query','replace','extractComponentMetadataFromRecord','join','%repositoryId%','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','map','Version__c','getBranchIdByName','fetchBranchComponentsByFilenames','fetchCommitManifestsByComponentIds','%fileNames%','Name','20448MLEPSQ','restService','4428193CSaoGv','length','toString','2208399dcERfA','../../../constants','29122218wWWOBA','Component_Type__c','__decorate','8cuacIy','Component_Name__c','SalesforceRestService','constructor','Repository\x20\x22','2783016kOqlJO','%name%','design:paramtypes','Completed','search','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','defineProperty','Repository__c','decorate','3343828cQTlYW','FLOSUM_COMMIT','GET_REPOSITORY_BY_NAME_QUERY','FLOSUM_NAMESPACE','%branchId%','NotFoundError','fetchBranchComponents','(((.+)+)+)+$','./salesforce-rest.service','MAX_QUERY_ARRAY_ITEMS','%componentIds%','57gueOIi','../queries','fetchRepositoryComponentsByFilenames','object','SalesforceQueryService','CRC32__c','metadata','File_Name__c','Status__c','getOwnPropertyDescriptor','Is_From_Agent__c','GET_COMPONENT_RECORD_TYPES_QUERY','fetchRepositoryComponents','createCommit','../utils/flosum-naming.utils','./salesforce-query.service','push','queryService'];a130_0x30a4=function(){return _0x27aa67;};return a130_0x30a4();}const a130_0x35dfe4=(function(){let _0x514731=!![];return function(_0x5c81c4,_0x4b9374){const _0x5c6089=_0x514731?function(){if(_0x4b9374){const _0x542bf8=_0x4b9374['apply'](_0x5c81c4,arguments);return _0x4b9374=null,_0x542bf8;}}:function(){};return _0x514731=![],_0x5c6089;};}()),a130_0x1f5293=a130_0x35dfe4(this,function(){const _0x2e1b09=a130_0x2151;return a130_0x1f5293[_0x2e1b09(0x159)]()[_0x2e1b09(0x168)]('(((.+)+)+)+$')[_0x2e1b09(0x159)]()[_0x2e1b09(0x162)](a130_0x1f5293)[_0x2e1b09(0x168)](_0x2e1b09(0x174));});a130_0x1f5293();'use strict';var __decorate=this&&this[a130_0x2f1545(0x15e)]||function(_0x38fbff,_0x511802,_0x1f1b4e,_0x345017){const _0xcbe3aa=a130_0x2f1545;var _0x4d5a36=arguments['length'],_0x45ab7c=_0x4d5a36<0x3?_0x511802:_0x345017===null?_0x345017=Object[_0xcbe3aa(0x181)](_0x511802,_0x1f1b4e):_0x345017,_0x5876be;if(typeof Reflect===_0xcbe3aa(0x17b)&&typeof Reflect[_0xcbe3aa(0x16c)]===_0xcbe3aa(0x147))_0x45ab7c=Reflect[_0xcbe3aa(0x16c)](_0x38fbff,_0x511802,_0x1f1b4e,_0x345017);else{for(var _0xbe8a89=_0x38fbff[_0xcbe3aa(0x158)]-0x1;_0xbe8a89>=0x0;_0xbe8a89--)if(_0x5876be=_0x38fbff[_0xbe8a89])_0x45ab7c=(_0x4d5a36<0x3?_0x5876be(_0x45ab7c):_0x4d5a36>0x3?_0x5876be(_0x511802,_0x1f1b4e,_0x45ab7c):_0x5876be(_0x511802,_0x1f1b4e))||_0x45ab7c;}return _0x4d5a36>0x3&&_0x45ab7c&&Object[_0xcbe3aa(0x16a)](_0x511802,_0x1f1b4e,_0x45ab7c),_0x45ab7c;},__metadata=this&&this['__metadata']||function(_0x1d3f52,_0x28f068){const _0xd9c16c=a130_0x2f1545;if(typeof Reflect===_0xd9c16c(0x17b)&&typeof Reflect[_0xd9c16c(0x17e)]===_0xd9c16c(0x147))return Reflect[_0xd9c16c(0x17e)](_0x1d3f52,_0x28f068);};Object[a130_0x2f1545(0x16a)](exports,'__esModule',{'value':!![]}),exports[a130_0x2f1545(0x143)]=void 0x0;const not_found_error_1=require('../../../core/errors/not-found.error'),typedi_1=require(a130_0x2f1545(0x145)),constants_1=require(a130_0x2f1545(0x15b)),queries_1=require(a130_0x2f1545(0x179)),flosum_naming_utils_1=require(a130_0x2f1545(0x186)),salesforce_query_service_1=require(a130_0x2f1545(0x187)),salesforce_rest_service_1=require(a130_0x2f1545(0x175));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x5167ab,_0x202c70){const _0x3ce8c4=a130_0x2f1545;this['queryService']=_0x5167ab,this[_0x3ce8c4(0x156)]=_0x202c70,this[_0x3ce8c4(0x176)]=0xc8;}[a130_0x2f1545(0x14a)](_0xf4511d){const _0x50b841=a130_0x2f1545,_0x2e8b8e=flosum_naming_utils_1[_0x50b841(0x18e)](_0xf4511d,[_0x50b841(0x160),_0x50b841(0x15d),'CRC32__c',_0x50b841(0x17f),_0x50b841(0x14f),'Id']);return{'id':_0x2e8b8e['Id'],'name':_0x2e8b8e['Component_Name__c'],'type':_0x2e8b8e[_0x50b841(0x15d)],'fileName':_0x2e8b8e[_0x50b841(0x17f)],'crc32':_0x2e8b8e[_0x50b841(0x17d)],'version':+_0x2e8b8e[_0x50b841(0x14f)]};}async['getRepositoryIdByName'](_0x1fa11a){const _0x1356f3=a130_0x2f1545,[_0x19e5ee]=await this['queryService'][_0x1356f3(0x148)](queries_1[_0x1356f3(0x16f)][_0x1356f3(0x149)](_0x1356f3(0x165),_0x1fa11a));if(!_0x19e5ee)throw new not_found_error_1['NotFoundError'](_0x1356f3(0x163)+_0x1fa11a+_0x1356f3(0x18f));return _0x19e5ee['Id'];}async[a130_0x2f1545(0x150)](_0x593f5c){const _0x6c1441=a130_0x2f1545,[_0x5c37c6]=await this[_0x6c1441(0x189)][_0x6c1441(0x148)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x6c1441(0x149)](_0x6c1441(0x165),_0x593f5c));if(!_0x5c37c6)throw new not_found_error_1[(_0x6c1441(0x172))](_0x6c1441(0x18c)+_0x593f5c+'\x22\x20not\x20found\x20in\x20flosum.');return _0x5c37c6['Id'];}async['getComponentRecordTypes'](){const _0x2caa4f=a130_0x2f1545,_0x41f2c7=await this[_0x2caa4f(0x189)][_0x2caa4f(0x148)](queries_1[_0x2caa4f(0x183)]);return _0x41f2c7[_0x2caa4f(0x14e)](_0xf5a5b6=>flosum_naming_utils_1[_0x2caa4f(0x18e)](_0xf5a5b6,['Id','Name']))[_0x2caa4f(0x14e)](_0x1d5821=>({'id':_0x1d5821['Id'],'name':_0x1d5821[_0x2caa4f(0x154)]}));}async[a130_0x2f1545(0x17a)](_0x119913,_0x3df474){const _0xb7ee7d=a130_0x2f1545,_0x28ca24=[];while(_0x119913[_0xb7ee7d(0x158)]){const _0xaf5a56=queries_1[_0xb7ee7d(0x169)]['replace'](_0xb7ee7d(0x153),_0x119913['splice'](0x0,this[_0xb7ee7d(0x176)])[_0xb7ee7d(0x14e)](_0xfad8fa=>'\x27'+_0xfad8fa+'\x27')['join'](','))[_0xb7ee7d(0x149)]('%repositoryId%',_0x3df474),_0x5072fc=await this[_0xb7ee7d(0x189)]['query'](_0xaf5a56);_0x28ca24[_0xb7ee7d(0x188)](..._0x5072fc);}return _0x28ca24[_0xb7ee7d(0x14e)](_0xb9df3f=>this[_0xb7ee7d(0x14a)](_0xb9df3f));}async[a130_0x2f1545(0x151)](_0xc3fd2a,_0x2f78cf){const _0x339af9=a130_0x2f1545,_0x177560=[];while(_0xc3fd2a['length']){const _0x1a2745=queries_1[_0x339af9(0x144)][_0x339af9(0x149)](_0x339af9(0x153),_0xc3fd2a[_0x339af9(0x146)](0x0,this[_0x339af9(0x176)])[_0x339af9(0x14e)](_0x43073c=>'\x27'+_0x43073c+'\x27')[_0x339af9(0x14b)](','))[_0x339af9(0x149)](_0x339af9(0x171),_0x2f78cf),_0x523fa8=await this[_0x339af9(0x189)][_0x339af9(0x148)](_0x1a2745);_0x177560[_0x339af9(0x188)](..._0x523fa8);}return _0x177560[_0x339af9(0x14e)](_0x30a114=>this[_0x339af9(0x14a)](_0x30a114));}async[a130_0x2f1545(0x184)](_0x525d70){const _0x48051f=a130_0x2f1545,_0x56184f=[],_0x55259c=queries_1['GET_REPOSITORY_COMPONENTS_QUERY']['replace'](_0x48051f(0x14c),_0x525d70),_0x2341d3=await this[_0x48051f(0x189)][_0x48051f(0x148)](_0x55259c);return _0x56184f['push'](..._0x2341d3),_0x56184f[_0x48051f(0x14e)](_0x2b66bf=>this[_0x48051f(0x14a)](_0x2b66bf));}async[a130_0x2f1545(0x173)](_0x10704a){const _0x406115=a130_0x2f1545,_0xd83d3f=[],_0x540c82=queries_1[_0x406115(0x190)][_0x406115(0x149)](_0x406115(0x171),_0x10704a),_0x5971ad=await this['queryService'][_0x406115(0x148)](_0x540c82);return _0xd83d3f['push'](..._0x5971ad),_0xd83d3f[_0x406115(0x14e)](_0x3b50ae=>this[_0x406115(0x14a)](_0x3b50ae));}async[a130_0x2f1545(0x152)](_0xca099d){const _0x5e6c93=a130_0x2f1545,_0xe22e58=[..._0xca099d],_0x2e6005=[];while(_0xe22e58[_0x5e6c93(0x158)]){const _0x1af548=queries_1[_0x5e6c93(0x14d)][_0x5e6c93(0x149)](_0x5e6c93(0x177),_0xe22e58[_0x5e6c93(0x146)](0x0,this[_0x5e6c93(0x176)])[_0x5e6c93(0x14e)](_0x57cc27=>'\x27'+_0x57cc27+'\x27')['join'](',')),_0x42f936=await this[_0x5e6c93(0x189)]['query'](_0x1af548);_0x2e6005[_0x5e6c93(0x188)](..._0x42f936[_0x5e6c93(0x14e)](_0x8cb2ab=>_0x8cb2ab['Id']));}return _0x2e6005;}async[a130_0x2f1545(0x185)](_0x16c9cb,_0x415cde){const _0x16f25e=a130_0x2f1545;return this[_0x16f25e(0x156)][_0x16f25e(0x18b)](constants_1[_0x16f25e(0x16e)],{[constants_1['FLOSUM_NAMESPACE']+_0x16f25e(0x16b)]:_0x415cde,[constants_1[_0x16f25e(0x170)]+'Commit_Name__c']:_0x16c9cb[_0x16f25e(0x18a)](0x0,0xff),[constants_1[_0x16f25e(0x170)]+_0x16f25e(0x180)]:_0x16f25e(0x167),[constants_1['FLOSUM_GIT_NAMESPACE']+_0x16f25e(0x182)]:!![]});}};function a130_0x2151(_0x371ef0,_0xc547a8){const _0x20976e=a130_0x30a4();return a130_0x2151=function(_0x1f5293,_0x35dfe4){_0x1f5293=_0x1f5293-0x143;let _0x30a48f=_0x20976e[_0x1f5293];return _0x30a48f;},a130_0x2151(_0x371ef0,_0xc547a8);}SalesforceGitSyncService=__decorate([typedi_1['Service'](),__metadata(a130_0x2f1545(0x166),[salesforce_query_service_1[a130_0x2f1545(0x17c)],salesforce_rest_service_1[a130_0x2f1545(0x161)]])],SalesforceGitSyncService),exports[a130_0x2f1545(0x143)]=SalesforceGitSyncService;