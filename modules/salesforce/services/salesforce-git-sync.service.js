const a130_0x5e3b0e=a130_0x5dcb;(function(_0x54aaae,_0x4f125f){const _0x59ae18=a130_0x5dcb,_0x15e5ac=_0x54aaae();while(!![]){try{const _0x4ed312=-parseInt(_0x59ae18(0x19c))/0x1*(-parseInt(_0x59ae18(0x1ba))/0x2)+parseInt(_0x59ae18(0x1c2))/0x3*(parseInt(_0x59ae18(0x1af))/0x4)+parseInt(_0x59ae18(0x194))/0x5*(parseInt(_0x59ae18(0x19e))/0x6)+-parseInt(_0x59ae18(0x1b5))/0x7+-parseInt(_0x59ae18(0x192))/0x8+-parseInt(_0x59ae18(0x19a))/0x9*(-parseInt(_0x59ae18(0x18d))/0xa)+parseInt(_0x59ae18(0x176))/0xb*(-parseInt(_0x59ae18(0x1a7))/0xc);if(_0x4ed312===_0x4f125f)break;else _0x15e5ac['push'](_0x15e5ac['shift']());}catch(_0x518c8c){_0x15e5ac['push'](_0x15e5ac['shift']());}}}(a130_0x27cc,0x1d9da));const a130_0x33d761=(function(){let _0x314d7c=!![];return function(_0x1654a4,_0x6b323){const _0xb1e9fc=_0x314d7c?function(){const _0x1eceac=a130_0x5dcb;if(_0x6b323){const _0x36f25c=_0x6b323[_0x1eceac(0x180)](_0x1654a4,arguments);return _0x6b323=null,_0x36f25c;}}:function(){};return _0x314d7c=![],_0xb1e9fc;};}()),a130_0xcc41c=a130_0x33d761(this,function(){const _0x367361=a130_0x5dcb;return a130_0xcc41c[_0x367361(0x199)]()[_0x367361(0x1b3)](_0x367361(0x1bc))[_0x367361(0x199)]()[_0x367361(0x1a9)](a130_0xcc41c)[_0x367361(0x1b3)]('(((.+)+)+)+$');});function a130_0x27cc(){const _0x17e866=['getBranchIdByName','Completed','../utils/flosum-naming.utils','4TTmtpf','../../../constants','createCommit','getComponentRecordTypes','search','Repository__c','205464idiazc','join','substr','../../../core/errors/not-found.error','replace','2kqhDsm','Branch\x20\x22','(((.+)+)+)+$','getRepositoryIdByName','post','object','\x22\x20not\x20found\x20in\x20flosum.','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','21633iofpYK','FLOSUM_GIT_NAMESPACE','%repositoryId%','splice','GET_COMPONENT_RECORD_TYPES_QUERY','Component_Type__c','FLOSUM_NAMESPACE','fetchCommitManifestsByComponentIds','1567478vmDMpg','%fileNames%','SalesforceQueryService','Commit_Name__c','metadata','./salesforce-rest.service','%componentIds%','GET_REPOSITORY_COMPONENTS_QUERY','restService','Name','apply','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','map','MAX_QUERY_ARRAY_ITEMS','File_Name__c','Status__c','GET_BRANCH_COMPONENTS_QUERY','push','SalesforceGitSyncService','NotFoundError','fetchRepositoryComponentsByFilenames','function','CRC32__c','30XNpnii','extractComponentMetadataFromRecord','defineProperty','SalesforceRestService','%branchId%','1550704aubIzI','extractFieldsFromRecord','35KkLBWB','GET_BRANCH_BY_NAME_QUERY','__esModule','Component_Name__c','queryService','toString','215226fXNffm','GET_REPOSITORY_BY_NAME_QUERY','206021nTTZdm','__decorate','173160ATplvr','Repository\x20\x22','decorate','Service','query','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','Version__c','Is_From_Agent__c','./salesforce-query.service','12cndbmg','fetchBranchComponents','constructor','%name%','length'];a130_0x27cc=function(){return _0x17e866;};return a130_0x27cc();}a130_0xcc41c();'use strict';var __decorate=this&&this[a130_0x5e3b0e(0x19d)]||function(_0x282e17,_0x54d520,_0x9a2f4,_0x562993){const _0xa8e2d2=a130_0x5e3b0e;var _0x153350=arguments[_0xa8e2d2(0x1ab)],_0x267717=_0x153350<0x3?_0x54d520:_0x562993===null?_0x562993=Object['getOwnPropertyDescriptor'](_0x54d520,_0x9a2f4):_0x562993,_0x2a2ca0;if(typeof Reflect===_0xa8e2d2(0x1bf)&&typeof Reflect[_0xa8e2d2(0x1a0)]===_0xa8e2d2(0x18b))_0x267717=Reflect['decorate'](_0x282e17,_0x54d520,_0x9a2f4,_0x562993);else{for(var _0x502cb3=_0x282e17[_0xa8e2d2(0x1ab)]-0x1;_0x502cb3>=0x0;_0x502cb3--)if(_0x2a2ca0=_0x282e17[_0x502cb3])_0x267717=(_0x153350<0x3?_0x2a2ca0(_0x267717):_0x153350>0x3?_0x2a2ca0(_0x54d520,_0x9a2f4,_0x267717):_0x2a2ca0(_0x54d520,_0x9a2f4))||_0x267717;}return _0x153350>0x3&&_0x267717&&Object[_0xa8e2d2(0x18f)](_0x54d520,_0x9a2f4,_0x267717),_0x267717;},__metadata=this&&this['__metadata']||function(_0xf9ee15,_0x14306a){const _0x1ea964=a130_0x5e3b0e;if(typeof Reflect===_0x1ea964(0x1bf)&&typeof Reflect[_0x1ea964(0x17a)]==='function')return Reflect[_0x1ea964(0x17a)](_0xf9ee15,_0x14306a);};Object[a130_0x5e3b0e(0x18f)](exports,a130_0x5e3b0e(0x196),{'value':!![]}),exports[a130_0x5e3b0e(0x188)]=void 0x0;const not_found_error_1=require(a130_0x5e3b0e(0x1b8)),typedi_1=require('typedi'),constants_1=require(a130_0x5e3b0e(0x1b0)),queries_1=require('../queries'),flosum_naming_utils_1=require(a130_0x5e3b0e(0x1ae)),salesforce_query_service_1=require(a130_0x5e3b0e(0x1a6)),salesforce_rest_service_1=require(a130_0x5e3b0e(0x17b));function a130_0x5dcb(_0x500ef8,_0xa1118b){const _0x1fc8f6=a130_0x27cc();return a130_0x5dcb=function(_0xcc41c,_0x33d761){_0xcc41c=_0xcc41c-0x176;let _0x27cc4d=_0x1fc8f6[_0xcc41c];return _0x27cc4d;},a130_0x5dcb(_0x500ef8,_0xa1118b);}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x4af5c3,_0x51ded4){const _0x2a58b1=a130_0x5e3b0e;this[_0x2a58b1(0x198)]=_0x4af5c3,this[_0x2a58b1(0x17e)]=_0x51ded4,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a130_0x5e3b0e(0x18e)](_0x465ea6){const _0x5cb18d=a130_0x5e3b0e,_0x5ed84f=flosum_naming_utils_1[_0x5cb18d(0x193)](_0x465ea6,[_0x5cb18d(0x197),_0x5cb18d(0x1c7),'CRC32__c',_0x5cb18d(0x184),_0x5cb18d(0x1a4),'Id']);return{'id':_0x5ed84f['Id'],'name':_0x5ed84f[_0x5cb18d(0x197)],'type':_0x5ed84f[_0x5cb18d(0x1c7)],'fileName':_0x5ed84f[_0x5cb18d(0x184)],'crc32':_0x5ed84f[_0x5cb18d(0x18c)],'version':+_0x5ed84f[_0x5cb18d(0x1a4)]};}async[a130_0x5e3b0e(0x1bd)](_0x5be47f){const _0x428170=a130_0x5e3b0e,[_0x4c2f38]=await this[_0x428170(0x198)][_0x428170(0x1a2)](queries_1[_0x428170(0x19b)][_0x428170(0x1b9)](_0x428170(0x1aa),_0x5be47f));if(!_0x4c2f38)throw new not_found_error_1[(_0x428170(0x189))](_0x428170(0x19f)+_0x5be47f+_0x428170(0x1c0));return _0x4c2f38['Id'];}async[a130_0x5e3b0e(0x1ac)](_0x2407d6){const _0x1fdf99=a130_0x5e3b0e,[_0x436672]=await this[_0x1fdf99(0x198)][_0x1fdf99(0x1a2)](queries_1[_0x1fdf99(0x195)][_0x1fdf99(0x1b9)](_0x1fdf99(0x1aa),_0x2407d6));if(!_0x436672)throw new not_found_error_1[(_0x1fdf99(0x189))](_0x1fdf99(0x1bb)+_0x2407d6+_0x1fdf99(0x1c0));return _0x436672['Id'];}async[a130_0x5e3b0e(0x1b2)](){const _0x3e805f=a130_0x5e3b0e,_0x5e440a=await this[_0x3e805f(0x198)][_0x3e805f(0x1a2)](queries_1[_0x3e805f(0x1c6)]);return _0x5e440a[_0x3e805f(0x182)](_0x4e9a1d=>flosum_naming_utils_1[_0x3e805f(0x193)](_0x4e9a1d,['Id',_0x3e805f(0x17f)]))[_0x3e805f(0x182)](_0x1057e3=>({'id':_0x1057e3['Id'],'name':_0x1057e3['Name']}));}async[a130_0x5e3b0e(0x18a)](_0x2e05d8,_0x574ea3){const _0xfd2ced=a130_0x5e3b0e,_0x51dcda=[];while(_0x2e05d8[_0xfd2ced(0x1ab)]){const _0x3195e5=queries_1[_0xfd2ced(0x1a3)]['replace'](_0xfd2ced(0x177),_0x2e05d8[_0xfd2ced(0x1c5)](0x0,this[_0xfd2ced(0x183)])['map'](_0x5201a8=>'\x27'+_0x5201a8+'\x27')['join'](','))['replace'](_0xfd2ced(0x1c4),_0x574ea3),_0x5b3520=await this['queryService'][_0xfd2ced(0x1a2)](_0x3195e5);_0x51dcda[_0xfd2ced(0x187)](..._0x5b3520);}return _0x51dcda[_0xfd2ced(0x182)](_0x334b29=>this[_0xfd2ced(0x18e)](_0x334b29));}async['fetchBranchComponentsByFilenames'](_0x3da46f,_0x5e3ba3){const _0x21ec45=a130_0x5e3b0e,_0x2e6745=[];while(_0x3da46f[_0x21ec45(0x1ab)]){const _0x1e9cb5=queries_1[_0x21ec45(0x1c1)][_0x21ec45(0x1b9)](_0x21ec45(0x177),_0x3da46f['splice'](0x0,this[_0x21ec45(0x183)])['map'](_0x14cb4a=>'\x27'+_0x14cb4a+'\x27')[_0x21ec45(0x1b6)](','))[_0x21ec45(0x1b9)](_0x21ec45(0x191),_0x5e3ba3),_0x304bed=await this['queryService'][_0x21ec45(0x1a2)](_0x1e9cb5);_0x2e6745[_0x21ec45(0x187)](..._0x304bed);}return _0x2e6745[_0x21ec45(0x182)](_0x45244c=>this['extractComponentMetadataFromRecord'](_0x45244c));}async['fetchRepositoryComponents'](_0x4ba22e){const _0x33b8bf=a130_0x5e3b0e,_0x4928bf=[],_0x5d683d=queries_1[_0x33b8bf(0x17d)][_0x33b8bf(0x1b9)](_0x33b8bf(0x1c4),_0x4ba22e),_0x182ba1=await this[_0x33b8bf(0x198)]['query'](_0x5d683d);return _0x4928bf[_0x33b8bf(0x187)](..._0x182ba1),_0x4928bf[_0x33b8bf(0x182)](_0x1d5094=>this['extractComponentMetadataFromRecord'](_0x1d5094));}async[a130_0x5e3b0e(0x1a8)](_0x9450e5){const _0x5d0dbb=a130_0x5e3b0e,_0x10d4ec=[],_0x474ed3=queries_1[_0x5d0dbb(0x186)]['replace'](_0x5d0dbb(0x191),_0x9450e5),_0x3d9fbe=await this[_0x5d0dbb(0x198)][_0x5d0dbb(0x1a2)](_0x474ed3);return _0x10d4ec[_0x5d0dbb(0x187)](..._0x3d9fbe),_0x10d4ec['map'](_0x98c42a=>this[_0x5d0dbb(0x18e)](_0x98c42a));}async[a130_0x5e3b0e(0x1c9)](_0x16635b){const _0x2352ca=a130_0x5e3b0e,_0x4df60a=[..._0x16635b],_0x56760c=[];while(_0x4df60a[_0x2352ca(0x1ab)]){const _0x1d5a94=queries_1[_0x2352ca(0x181)][_0x2352ca(0x1b9)](_0x2352ca(0x17c),_0x4df60a[_0x2352ca(0x1c5)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x2352ca(0x182)](_0x5358da=>'\x27'+_0x5358da+'\x27')[_0x2352ca(0x1b6)](',')),_0x48ba9b=await this[_0x2352ca(0x198)][_0x2352ca(0x1a2)](_0x1d5a94);_0x56760c[_0x2352ca(0x187)](..._0x48ba9b[_0x2352ca(0x182)](_0x43dbd1=>_0x43dbd1['Id']));}return _0x56760c;}async[a130_0x5e3b0e(0x1b1)](_0x16c8ec,_0x427452){const _0x2cb6cd=a130_0x5e3b0e;return this['restService'][_0x2cb6cd(0x1be)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x2cb6cd(0x1c8)]+_0x2cb6cd(0x1b4)]:_0x427452,[constants_1[_0x2cb6cd(0x1c8)]+_0x2cb6cd(0x179)]:_0x16c8ec[_0x2cb6cd(0x1b7)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x2cb6cd(0x185)]:_0x2cb6cd(0x1ad),[constants_1[_0x2cb6cd(0x1c3)]+_0x2cb6cd(0x1a5)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a130_0x5e3b0e(0x1a1)](),__metadata('design:paramtypes',[salesforce_query_service_1[a130_0x5e3b0e(0x178)],salesforce_rest_service_1[a130_0x5e3b0e(0x190)]])],SalesforceGitSyncService),exports[a130_0x5e3b0e(0x188)]=SalesforceGitSyncService;