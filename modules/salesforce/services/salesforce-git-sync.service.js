const a130_0xb6312b=a130_0x2dfd;(function(_0x25e848,_0x327e60){const _0x4b8c3f=a130_0x2dfd,_0x2e876e=_0x25e848();while(!![]){try{const _0x3dba41=-parseInt(_0x4b8c3f(0x123))/0x1+-parseInt(_0x4b8c3f(0x137))/0x2+-parseInt(_0x4b8c3f(0x12c))/0x3*(-parseInt(_0x4b8c3f(0x115))/0x4)+-parseInt(_0x4b8c3f(0x11c))/0x5*(parseInt(_0x4b8c3f(0x146))/0x6)+-parseInt(_0x4b8c3f(0x10f))/0x7+parseInt(_0x4b8c3f(0x14b))/0x8*(-parseInt(_0x4b8c3f(0x108))/0x9)+-parseInt(_0x4b8c3f(0x13c))/0xa*(-parseInt(_0x4b8c3f(0x110))/0xb);if(_0x3dba41===_0x327e60)break;else _0x2e876e['push'](_0x2e876e['shift']());}catch(_0x4f50fe){_0x2e876e['push'](_0x2e876e['shift']());}}}(a130_0x42a8,0xbe991));function a130_0x42a8(){const _0x35abe7=['typedi','extractComponentMetadataFromRecord','post','decorate','SalesforceRestService','./salesforce-query.service','61456LWLzqB','fetchBranchComponents','map','%branchId%','NotFoundError','FLOSUM_GIT_NAMESPACE','metadata','object','SalesforceGitSyncService','18TKaMWX','../utils/flosum-naming.utils','Repository\x20\x22','getComponentRecordTypes','getOwnPropertyDescriptor','SalesforceQueryService','Repository__c','Is_From_Agent__c','GET_COMPONENT_RECORD_TYPES_QUERY','(((.+)+)+)+$','CRC32__c','726480WcEUGV','join','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','../queries','GET_REPOSITORY_COMPONENTS_QUERY','660UvqCqL','MAX_QUERY_ARRAY_ITEMS','FLOSUM_COMMIT','restService','defineProperty','FLOSUM_NAMESPACE','Service','apply','Name','fetchRepositoryComponentsByFilenames','6VekFsd','replace','./salesforce-rest.service','queryService','Branch\x20\x22','23928MZcxkx','GET_REPOSITORY_BY_NAME_QUERY','fetchRepositoryComponents','push','Component_Name__c','createCommit','%repositoryId%','length','%fileNames%','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','\x22\x20not\x20found\x20in\x20flosum.','query','getBranchIdByName','405JzbIWU','substr','getRepositoryIdByName','Completed','search','File_Name__c','design:paramtypes','2802289MXkkbM','416658MeEIoy','../../../constants','toString','splice','%name%','37304hACuWo','extractFieldsFromRecord','constructor','Commit_Name__c','Component_Type__c','Version__c','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','4077985IpEQVV'];a130_0x42a8=function(){return _0x35abe7;};return a130_0x42a8();}const a130_0x5e4831=(function(){let _0x5da90c=!![];return function(_0x317d3a,_0x108ced){const _0x37219b=_0x5da90c?function(){const _0x5be4e6=a130_0x2dfd;if(_0x108ced){const _0x342a5f=_0x108ced[_0x5be4e6(0x143)](_0x317d3a,arguments);return _0x108ced=null,_0x342a5f;}}:function(){};return _0x5da90c=![],_0x37219b;};}()),a130_0x2bb51e=a130_0x5e4831(this,function(){const _0x2e3729=a130_0x2dfd;return a130_0x2bb51e[_0x2e3729(0x112)]()[_0x2e3729(0x10c)](_0x2e3729(0x135))[_0x2e3729(0x112)]()[_0x2e3729(0x117)](a130_0x2bb51e)['search']('(((.+)+)+)+$');});a130_0x2bb51e();'use strict';var __decorate=this&&this['__decorate']||function(_0x51f02a,_0x161bed,_0x52af34,_0x4affc5){const _0x20c427=a130_0x2dfd;var _0x142edf=arguments[_0x20c427(0x102)],_0x20be48=_0x142edf<0x3?_0x161bed:_0x4affc5===null?_0x4affc5=Object[_0x20c427(0x130)](_0x161bed,_0x52af34):_0x4affc5,_0x10f7cf;if(typeof Reflect==='object'&&typeof Reflect[_0x20c427(0x120)]==='function')_0x20be48=Reflect[_0x20c427(0x120)](_0x51f02a,_0x161bed,_0x52af34,_0x4affc5);else{for(var _0x2ee4b0=_0x51f02a[_0x20c427(0x102)]-0x1;_0x2ee4b0>=0x0;_0x2ee4b0--)if(_0x10f7cf=_0x51f02a[_0x2ee4b0])_0x20be48=(_0x142edf<0x3?_0x10f7cf(_0x20be48):_0x142edf>0x3?_0x10f7cf(_0x161bed,_0x52af34,_0x20be48):_0x10f7cf(_0x161bed,_0x52af34))||_0x20be48;}return _0x142edf>0x3&&_0x20be48&&Object[_0x20c427(0x140)](_0x161bed,_0x52af34,_0x20be48),_0x20be48;},__metadata=this&&this['__metadata']||function(_0x4d4601,_0x1bb0b0){const _0x5b5ad3=a130_0x2dfd;if(typeof Reflect===_0x5b5ad3(0x12a)&&typeof Reflect[_0x5b5ad3(0x129)]==='function')return Reflect[_0x5b5ad3(0x129)](_0x4d4601,_0x1bb0b0);};Object[a130_0xb6312b(0x140)](exports,'__esModule',{'value':!![]}),exports[a130_0xb6312b(0x12b)]=void 0x0;const not_found_error_1=require('../../../core/errors/not-found.error'),typedi_1=require(a130_0xb6312b(0x11d)),constants_1=require(a130_0xb6312b(0x111)),queries_1=require(a130_0xb6312b(0x13a)),flosum_naming_utils_1=require(a130_0xb6312b(0x12d)),salesforce_query_service_1=require(a130_0xb6312b(0x122)),salesforce_rest_service_1=require(a130_0xb6312b(0x148));function a130_0x2dfd(_0x4791b4,_0x4d4581){const _0x483bb8=a130_0x42a8();return a130_0x2dfd=function(_0x2bb51e,_0x5e4831){_0x2bb51e=_0x2bb51e-0x101;let _0x42a877=_0x483bb8[_0x2bb51e];return _0x42a877;},a130_0x2dfd(_0x4791b4,_0x4d4581);}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x30a51f,_0x3c6558){const _0x524027=a130_0xb6312b;this['queryService']=_0x30a51f,this[_0x524027(0x13f)]=_0x3c6558,this[_0x524027(0x13d)]=0xc8;}['extractComponentMetadataFromRecord'](_0x7c0ed6){const _0xe0e784=a130_0xb6312b,_0x2d3c63=flosum_naming_utils_1['extractFieldsFromRecord'](_0x7c0ed6,['Component_Name__c',_0xe0e784(0x119),'CRC32__c',_0xe0e784(0x10d),_0xe0e784(0x11a),'Id']);return{'id':_0x2d3c63['Id'],'name':_0x2d3c63[_0xe0e784(0x14f)],'type':_0x2d3c63[_0xe0e784(0x119)],'fileName':_0x2d3c63[_0xe0e784(0x10d)],'crc32':_0x2d3c63[_0xe0e784(0x136)],'version':+_0x2d3c63['Version__c']};}async[a130_0xb6312b(0x10a)](_0x22d80d){const _0x216d3a=a130_0xb6312b,[_0x262906]=await this[_0x216d3a(0x149)][_0x216d3a(0x106)](queries_1[_0x216d3a(0x14c)][_0x216d3a(0x147)](_0x216d3a(0x114),_0x22d80d));if(!_0x262906)throw new not_found_error_1[(_0x216d3a(0x127))](_0x216d3a(0x12e)+_0x22d80d+_0x216d3a(0x105));return _0x262906['Id'];}async[a130_0xb6312b(0x107)](_0x50d300){const _0x593b92=a130_0xb6312b,[_0x4537cd]=await this[_0x593b92(0x149)][_0x593b92(0x106)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x593b92(0x147)](_0x593b92(0x114),_0x50d300));if(!_0x4537cd)throw new not_found_error_1[(_0x593b92(0x127))](_0x593b92(0x14a)+_0x50d300+_0x593b92(0x105));return _0x4537cd['Id'];}async[a130_0xb6312b(0x12f)](){const _0x141d60=a130_0xb6312b,_0x316081=await this[_0x141d60(0x149)]['query'](queries_1[_0x141d60(0x134)]);return _0x316081[_0x141d60(0x125)](_0x495d2c=>flosum_naming_utils_1[_0x141d60(0x116)](_0x495d2c,['Id',_0x141d60(0x144)]))[_0x141d60(0x125)](_0x52ba57=>({'id':_0x52ba57['Id'],'name':_0x52ba57['Name']}));}async[a130_0xb6312b(0x145)](_0x4b2e57,_0x17afcc){const _0x4e5dbd=a130_0xb6312b,_0x5113a8=[];while(_0x4b2e57[_0x4e5dbd(0x102)]){const _0x15a70d=queries_1[_0x4e5dbd(0x11b)][_0x4e5dbd(0x147)](_0x4e5dbd(0x103),_0x4b2e57[_0x4e5dbd(0x113)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x4e5dbd(0x125)](_0x1553d6=>'\x27'+_0x1553d6+'\x27')[_0x4e5dbd(0x138)](','))[_0x4e5dbd(0x147)]('%repositoryId%',_0x17afcc),_0x19c84b=await this[_0x4e5dbd(0x149)][_0x4e5dbd(0x106)](_0x15a70d);_0x5113a8[_0x4e5dbd(0x14e)](..._0x19c84b);}return _0x5113a8[_0x4e5dbd(0x125)](_0x26f480=>this[_0x4e5dbd(0x11e)](_0x26f480));}async['fetchBranchComponentsByFilenames'](_0x573e96,_0xdf7b25){const _0x38ae47=a130_0xb6312b,_0x3cf003=[];while(_0x573e96[_0x38ae47(0x102)]){const _0x5dfa97=queries_1[_0x38ae47(0x139)][_0x38ae47(0x147)](_0x38ae47(0x103),_0x573e96[_0x38ae47(0x113)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x38ae47(0x125)](_0x3df787=>'\x27'+_0x3df787+'\x27')[_0x38ae47(0x138)](','))[_0x38ae47(0x147)](_0x38ae47(0x126),_0xdf7b25),_0x5265ae=await this['queryService']['query'](_0x5dfa97);_0x3cf003[_0x38ae47(0x14e)](..._0x5265ae);}return _0x3cf003[_0x38ae47(0x125)](_0x32b09e=>this[_0x38ae47(0x11e)](_0x32b09e));}async[a130_0xb6312b(0x14d)](_0xc4fdb9){const _0x1220d8=a130_0xb6312b,_0x10868f=queries_1[_0x1220d8(0x13b)]['replace'](_0x1220d8(0x101),_0xc4fdb9),_0x3e4c9a=await this[_0x1220d8(0x149)]['query'](_0x10868f);return _0x3e4c9a[_0x1220d8(0x125)](_0x2c40db=>this[_0x1220d8(0x11e)](_0x2c40db));}async[a130_0xb6312b(0x124)](_0x251f2a){const _0x2f48ca=a130_0xb6312b,_0x7d130e=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x2f48ca(0x147)](_0x2f48ca(0x126),_0x251f2a),_0x1a8266=await this[_0x2f48ca(0x149)][_0x2f48ca(0x106)](_0x7d130e);return _0x1a8266[_0x2f48ca(0x125)](_0x210785=>this[_0x2f48ca(0x11e)](_0x210785));}async['fetchCommitManifestsByComponentIds'](_0x537727){const _0x227396=a130_0xb6312b,_0x1bdb62=[..._0x537727],_0x4dc9b7=[];while(_0x1bdb62[_0x227396(0x102)]){const _0x287307=queries_1[_0x227396(0x104)][_0x227396(0x147)]('%componentIds%',_0x1bdb62[_0x227396(0x113)](0x0,this[_0x227396(0x13d)])[_0x227396(0x125)](_0x50fefd=>'\x27'+_0x50fefd+'\x27')['join'](',')),_0x3a0aff=await this[_0x227396(0x149)][_0x227396(0x106)](_0x287307);_0x4dc9b7['push'](..._0x3a0aff[_0x227396(0x125)](_0x2063e1=>_0x2063e1['Id']));}return _0x4dc9b7;}async[a130_0xb6312b(0x150)](_0x5a9e68,_0x1066f8){const _0x40c175=a130_0xb6312b;return this[_0x40c175(0x13f)][_0x40c175(0x11f)](constants_1[_0x40c175(0x13e)],{[constants_1['FLOSUM_NAMESPACE']+_0x40c175(0x132)]:_0x1066f8,[constants_1[_0x40c175(0x141)]+_0x40c175(0x118)]:_0x5a9e68[_0x40c175(0x109)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0x40c175(0x10b),[constants_1[_0x40c175(0x128)]+_0x40c175(0x133)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a130_0xb6312b(0x142)](),__metadata(a130_0xb6312b(0x10e),[salesforce_query_service_1[a130_0xb6312b(0x131)],salesforce_rest_service_1[a130_0xb6312b(0x121)]])],SalesforceGitSyncService),exports[a130_0xb6312b(0x12b)]=SalesforceGitSyncService;