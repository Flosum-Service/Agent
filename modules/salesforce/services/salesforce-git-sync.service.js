function a130_0x5113(_0x19eb37,_0x286d6e){const _0x1e78f4=a130_0x1426();return a130_0x5113=function(_0x72aae2,_0x1fd0cd){_0x72aae2=_0x72aae2-0x15d;let _0x142643=_0x1e78f4[_0x72aae2];return _0x142643;},a130_0x5113(_0x19eb37,_0x286d6e);}const a130_0x16f7db=a130_0x5113;(function(_0x58113f,_0x13c092){const _0x3d1fe8=a130_0x5113,_0x5e9cea=_0x58113f();while(!![]){try{const _0x41a88c=-parseInt(_0x3d1fe8(0x194))/0x1+parseInt(_0x3d1fe8(0x168))/0x2+-parseInt(_0x3d1fe8(0x162))/0x3+-parseInt(_0x3d1fe8(0x184))/0x4*(-parseInt(_0x3d1fe8(0x18c))/0x5)+parseInt(_0x3d1fe8(0x18d))/0x6*(-parseInt(_0x3d1fe8(0x18a))/0x7)+parseInt(_0x3d1fe8(0x17d))/0x8+-parseInt(_0x3d1fe8(0x187))/0x9*(-parseInt(_0x3d1fe8(0x195))/0xa);if(_0x41a88c===_0x13c092)break;else _0x5e9cea['push'](_0x5e9cea['shift']());}catch(_0x4ffff8){_0x5e9cea['push'](_0x5e9cea['shift']());}}}(a130_0x1426,0x23ca5));const a130_0x1fd0cd=(function(){let _0x1acbcd=!![];return function(_0xd6d2d9,_0x4c9cc7){const _0x4be7f8=_0x1acbcd?function(){const _0x513121=a130_0x5113;if(_0x4c9cc7){const _0x23befb=_0x4c9cc7[_0x513121(0x198)](_0xd6d2d9,arguments);return _0x4c9cc7=null,_0x23befb;}}:function(){};return _0x1acbcd=![],_0x4be7f8;};}()),a130_0x72aae2=a130_0x1fd0cd(this,function(){const _0x56aaf7=a130_0x5113;return a130_0x72aae2[_0x56aaf7(0x17c)]()[_0x56aaf7(0x16c)](_0x56aaf7(0x16b))['toString']()[_0x56aaf7(0x15d)](a130_0x72aae2)[_0x56aaf7(0x16c)](_0x56aaf7(0x16b));});a130_0x72aae2();'use strict';var __decorate=this&&this[a130_0x16f7db(0x18b)]||function(_0x177b6e,_0x38357c,_0x2c6dea,_0x3aaa9b){const _0x2a048c=a130_0x16f7db;var _0x400259=arguments[_0x2a048c(0x18f)],_0x1f9e90=_0x400259<0x3?_0x38357c:_0x3aaa9b===null?_0x3aaa9b=Object['getOwnPropertyDescriptor'](_0x38357c,_0x2c6dea):_0x3aaa9b,_0x539680;if(typeof Reflect===_0x2a048c(0x186)&&typeof Reflect[_0x2a048c(0x163)]===_0x2a048c(0x177))_0x1f9e90=Reflect[_0x2a048c(0x163)](_0x177b6e,_0x38357c,_0x2c6dea,_0x3aaa9b);else{for(var _0x30a010=_0x177b6e[_0x2a048c(0x18f)]-0x1;_0x30a010>=0x0;_0x30a010--)if(_0x539680=_0x177b6e[_0x30a010])_0x1f9e90=(_0x400259<0x3?_0x539680(_0x1f9e90):_0x400259>0x3?_0x539680(_0x38357c,_0x2c6dea,_0x1f9e90):_0x539680(_0x38357c,_0x2c6dea))||_0x1f9e90;}return _0x400259>0x3&&_0x1f9e90&&Object[_0x2a048c(0x17e)](_0x38357c,_0x2c6dea,_0x1f9e90),_0x1f9e90;},__metadata=this&&this[a130_0x16f7db(0x1a0)]||function(_0x2f1e4a,_0x5541e7){const _0xe5df49=a130_0x16f7db;if(typeof Reflect===_0xe5df49(0x186)&&typeof Reflect[_0xe5df49(0x165)]===_0xe5df49(0x177))return Reflect[_0xe5df49(0x165)](_0x2f1e4a,_0x5541e7);};Object['defineProperty'](exports,a130_0x16f7db(0x17b),{'value':!![]}),exports[a130_0x16f7db(0x17f)]=void 0x0;const not_found_error_1=require(a130_0x16f7db(0x170)),typedi_1=require('typedi'),constants_1=require(a130_0x16f7db(0x193)),queries_1=require(a130_0x16f7db(0x1a1)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a130_0x16f7db(0x178)),salesforce_rest_service_1=require(a130_0x16f7db(0x199));function a130_0x1426(){const _0x13f987=['restService','splice','Version__c','GET_REPOSITORY_COMPONENTS_QUERY','832788dBMfTZ','decorate','GET_COMPONENT_RECORD_TYPES_QUERY','metadata','%componentIds%','getComponentRecordTypes','62704zlAIuq','extractFieldsFromRecord','Commit_Name__c','(((.+)+)+)+$','search','createCommit','File_Name__c','fetchRepositoryComponents','../../../core/errors/not-found.error','extractComponentMetadataFromRecord','fetchRepositoryComponentsByFilenames','map','MAX_QUERY_ARRAY_ITEMS','getBranchIdByName','FLOSUM_GIT_NAMESPACE','function','./salesforce-query.service','query','replace','__esModule','toString','924496EuOTdt','defineProperty','SalesforceGitSyncService','GET_REPOSITORY_BY_NAME_QUERY','queryService','FLOSUM_NAMESPACE','GET_BRANCH_COMPONENTS_QUERY','372GjjSRX','Name','object','1726614RsqeRS','%fileNames%','fetchBranchComponentsByFilenames','21BVudvK','__decorate','11645gkwioK','109770pskaZA','design:paramtypes','length','CRC32__c','SalesforceQueryService','Branch\x20\x22','../../../constants','268125UCUoPQ','20bQdVKn','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','post','apply','./salesforce-rest.service','%repositoryId%','Component_Name__c','%branchId%','push','join','NotFoundError','__metadata','../queries','Completed','constructor'];a130_0x1426=function(){return _0x13f987;};return a130_0x1426();}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x4b90b7,_0x4261b2){const _0x591410=a130_0x16f7db;this['queryService']=_0x4b90b7,this[_0x591410(0x15e)]=_0x4261b2,this[_0x591410(0x174)]=0xc8;}[a130_0x16f7db(0x171)](_0x4c7851){const _0x18975b=a130_0x16f7db,_0xcea3bb=flosum_naming_utils_1[_0x18975b(0x169)](_0x4c7851,[_0x18975b(0x19b),'Component_Type__c','CRC32__c',_0x18975b(0x16e),_0x18975b(0x160),'Id']);return{'id':_0xcea3bb['Id'],'name':_0xcea3bb[_0x18975b(0x19b)],'type':_0xcea3bb['Component_Type__c'],'fileName':_0xcea3bb[_0x18975b(0x16e)],'crc32':_0xcea3bb[_0x18975b(0x190)],'version':+_0xcea3bb[_0x18975b(0x160)]};}async['getRepositoryIdByName'](_0x540cdf){const _0x499d59=a130_0x16f7db,[_0x6c90b2]=await this['queryService'][_0x499d59(0x179)](queries_1[_0x499d59(0x180)][_0x499d59(0x17a)]('%name%',_0x540cdf));if(!_0x6c90b2)throw new not_found_error_1[(_0x499d59(0x19f))]('Repository\x20\x22'+_0x540cdf+'\x22\x20not\x20found\x20in\x20flosum.');return _0x6c90b2['Id'];}async[a130_0x16f7db(0x175)](_0x31e432){const _0x1ff716=a130_0x16f7db,[_0x6fce6f]=await this['queryService'][_0x1ff716(0x179)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x1ff716(0x17a)]('%name%',_0x31e432));if(!_0x6fce6f)throw new not_found_error_1[(_0x1ff716(0x19f))](_0x1ff716(0x192)+_0x31e432+'\x22\x20not\x20found\x20in\x20flosum.');return _0x6fce6f['Id'];}async[a130_0x16f7db(0x167)](){const _0xa9c5ca=a130_0x16f7db,_0x29d6d0=await this[_0xa9c5ca(0x181)][_0xa9c5ca(0x179)](queries_1[_0xa9c5ca(0x164)]);return _0x29d6d0[_0xa9c5ca(0x173)](_0x239349=>flosum_naming_utils_1['extractFieldsFromRecord'](_0x239349,['Id','Name']))[_0xa9c5ca(0x173)](_0x2020d1=>({'id':_0x2020d1['Id'],'name':_0x2020d1[_0xa9c5ca(0x185)]}));}async[a130_0x16f7db(0x172)](_0x3d6c10,_0x1eed37){const _0x2e37bf=a130_0x16f7db,_0x402efb=[];while(_0x3d6c10[_0x2e37bf(0x18f)]){const _0x3188da=queries_1[_0x2e37bf(0x196)][_0x2e37bf(0x17a)](_0x2e37bf(0x188),_0x3d6c10['splice'](0x0,this[_0x2e37bf(0x174)])['map'](_0x3b116e=>'\x27'+_0x3b116e+'\x27')[_0x2e37bf(0x19e)](','))[_0x2e37bf(0x17a)](_0x2e37bf(0x19a),_0x1eed37),_0x5732ea=await this['queryService'][_0x2e37bf(0x179)](_0x3188da);_0x402efb[_0x2e37bf(0x19d)](..._0x5732ea);}return _0x402efb[_0x2e37bf(0x173)](_0x292dca=>this['extractComponentMetadataFromRecord'](_0x292dca));}async[a130_0x16f7db(0x189)](_0x316dff,_0x448220){const _0x157e71=a130_0x16f7db,_0x39aefa=[];while(_0x316dff[_0x157e71(0x18f)]){const _0x293a1e=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x157e71(0x17a)](_0x157e71(0x188),_0x316dff[_0x157e71(0x15f)](0x0,this[_0x157e71(0x174)])[_0x157e71(0x173)](_0x4d002f=>'\x27'+_0x4d002f+'\x27')[_0x157e71(0x19e)](','))[_0x157e71(0x17a)](_0x157e71(0x19c),_0x448220),_0x4d8f3c=await this[_0x157e71(0x181)]['query'](_0x293a1e);_0x39aefa['push'](..._0x4d8f3c);}return _0x39aefa[_0x157e71(0x173)](_0x2070ab=>this[_0x157e71(0x171)](_0x2070ab));}async[a130_0x16f7db(0x16f)](_0x32b1df){const _0xcabb06=a130_0x16f7db,_0x4db8f1=[],_0x2dcdf8=queries_1[_0xcabb06(0x161)][_0xcabb06(0x17a)](_0xcabb06(0x19a),_0x32b1df),_0x486454=await this['queryService'][_0xcabb06(0x179)](_0x2dcdf8);return _0x4db8f1[_0xcabb06(0x19d)](..._0x486454),_0x4db8f1[_0xcabb06(0x173)](_0x52a960=>this[_0xcabb06(0x171)](_0x52a960));}async['fetchBranchComponents'](_0xe6be68){const _0x3b4190=a130_0x16f7db,_0x2c88f6=[],_0x2ade62=queries_1[_0x3b4190(0x183)]['replace'](_0x3b4190(0x19c),_0xe6be68),_0x495678=await this[_0x3b4190(0x181)][_0x3b4190(0x179)](_0x2ade62);return _0x2c88f6[_0x3b4190(0x19d)](..._0x495678),_0x2c88f6[_0x3b4190(0x173)](_0x5a2b12=>this[_0x3b4190(0x171)](_0x5a2b12));}async['fetchCommitManifestsByComponentIds'](_0x310ddd){const _0x42146b=a130_0x16f7db,_0x29c1eb=[..._0x310ddd],_0x529023=[];while(_0x29c1eb[_0x42146b(0x18f)]){const _0x29cd6e=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x42146b(0x17a)](_0x42146b(0x166),_0x29c1eb[_0x42146b(0x15f)](0x0,this[_0x42146b(0x174)])['map'](_0x439fc9=>'\x27'+_0x439fc9+'\x27')[_0x42146b(0x19e)](',')),_0x4d32cb=await this[_0x42146b(0x181)][_0x42146b(0x179)](_0x29cd6e);_0x529023['push'](..._0x4d32cb[_0x42146b(0x173)](_0xc13d20=>_0xc13d20['Id']));}return _0x529023;}async[a130_0x16f7db(0x16d)](_0x407061,_0x569fcc){const _0x4c67ef=a130_0x16f7db;return this[_0x4c67ef(0x15e)][_0x4c67ef(0x197)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x4c67ef(0x182)]+'Repository__c']:_0x569fcc,[constants_1[_0x4c67ef(0x182)]+_0x4c67ef(0x16a)]:_0x407061['substr'](0x0,0xff),[constants_1[_0x4c67ef(0x182)]+'Status__c']:_0x4c67ef(0x1a2),[constants_1[_0x4c67ef(0x176)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([typedi_1['Service'](),__metadata(a130_0x16f7db(0x18e),[salesforce_query_service_1[a130_0x16f7db(0x191)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a130_0x16f7db(0x17f)]=SalesforceGitSyncService;