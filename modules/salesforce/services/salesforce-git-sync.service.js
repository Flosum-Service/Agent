const a130_0x2cb178=a130_0x4dd0;(function(_0x1b3404,_0x522354){const _0x55b2a2=a130_0x4dd0,_0x25d3a7=_0x1b3404();while(!![]){try{const _0x58a4c6=-parseInt(_0x55b2a2(0x207))/0x1+-parseInt(_0x55b2a2(0x214))/0x2*(-parseInt(_0x55b2a2(0x1ef))/0x3)+parseInt(_0x55b2a2(0x1e6))/0x4+parseInt(_0x55b2a2(0x21f))/0x5+-parseInt(_0x55b2a2(0x21a))/0x6*(parseInt(_0x55b2a2(0x211))/0x7)+-parseInt(_0x55b2a2(0x1fd))/0x8+parseInt(_0x55b2a2(0x200))/0x9;if(_0x58a4c6===_0x522354)break;else _0x25d3a7['push'](_0x25d3a7['shift']());}catch(_0x3a332a){_0x25d3a7['push'](_0x25d3a7['shift']());}}}(a130_0x7dc9,0x501c5));function a130_0x4dd0(_0x22c487,_0x4e0d82){const _0x164a5f=a130_0x7dc9();return a130_0x4dd0=function(_0x431eb9,_0x376043){_0x431eb9=_0x431eb9-0x1d9;let _0x7dc9e0=_0x164a5f[_0x431eb9];return _0x7dc9e0;},a130_0x4dd0(_0x22c487,_0x4e0d82);}function a130_0x7dc9(){const _0x507b01=['MAX_QUERY_ARRAY_ITEMS','fetchBranchComponentsByFilenames','Repository__c','GET_COMPONENT_RECORD_TYPES_QUERY','getOwnPropertyDescriptor','decorate','%fileNames%','Branch\x20\x22','%repositoryId%','4184520cawmaA','CRC32__c','SalesforceQueryService','2689875BgnZBh','substr','splice','Commit_Name__c','%componentIds%','%branchId%','metadata','461412xdASiP','Is_From_Agent__c','FLOSUM_COMMIT','typedi','fetchRepositoryComponentsByFilenames','object','SalesforceRestService','GET_BRANCH_BY_NAME_QUERY','../queries','Component_Type__c','1748572fjGUio','../../../core/errors/not-found.error','Completed','634008XWCQBj','__metadata','./salesforce-rest.service','%name%','Name','File_Name__c','6tZMwlS','GET_BRANCH_COMPONENTS_QUERY','GET_REPOSITORY_COMPONENTS_QUERY','FLOSUM_NAMESPACE','./salesforce-query.service','1535725zglcIW','Version__c','query','post','Component_Name__c','push','../utils/flosum-naming.utils','queryService','function','__esModule','extractComponentMetadataFromRecord','toString','search','restService','defineProperty','2557528msbpaQ','Status__c','(((.+)+)+)+$','map','length','replace','\x22\x20not\x20found\x20in\x20flosum.','createCommit','join','3TpZOgs','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','fetchCommitManifestsByComponentIds','SalesforceGitSyncService','getRepositoryIdByName'];a130_0x7dc9=function(){return _0x507b01;};return a130_0x7dc9();}const a130_0x376043=(function(){let _0x3467e7=!![];return function(_0xdf2324,_0x252b6b){const _0x3a5b16=_0x3467e7?function(){if(_0x252b6b){const _0x3caf70=_0x252b6b['apply'](_0xdf2324,arguments);return _0x252b6b=null,_0x3caf70;}}:function(){};return _0x3467e7=![],_0x3a5b16;};}()),a130_0x431eb9=a130_0x376043(this,function(){const _0x228d41=a130_0x4dd0;return a130_0x431eb9[_0x228d41(0x1e2)]()[_0x228d41(0x1e3)](_0x228d41(0x1e8))[_0x228d41(0x1e2)]()['constructor'](a130_0x431eb9)[_0x228d41(0x1e3)](_0x228d41(0x1e8));});a130_0x431eb9();'use strict';var __decorate=this&&this['__decorate']||function(_0x508e08,_0x4565cb,_0x6dd376,_0x5d7d14){const _0x4085ea=a130_0x4dd0;var _0x2bf168=arguments[_0x4085ea(0x1ea)],_0x49153e=_0x2bf168<0x3?_0x4565cb:_0x5d7d14===null?_0x5d7d14=Object[_0x4085ea(0x1f8)](_0x4565cb,_0x6dd376):_0x5d7d14,_0x4f373d;if(typeof Reflect==='object'&&typeof Reflect[_0x4085ea(0x1f9)]===_0x4085ea(0x1df))_0x49153e=Reflect[_0x4085ea(0x1f9)](_0x508e08,_0x4565cb,_0x6dd376,_0x5d7d14);else{for(var _0xd12d15=_0x508e08[_0x4085ea(0x1ea)]-0x1;_0xd12d15>=0x0;_0xd12d15--)if(_0x4f373d=_0x508e08[_0xd12d15])_0x49153e=(_0x2bf168<0x3?_0x4f373d(_0x49153e):_0x2bf168>0x3?_0x4f373d(_0x4565cb,_0x6dd376,_0x49153e):_0x4f373d(_0x4565cb,_0x6dd376))||_0x49153e;}return _0x2bf168>0x3&&_0x49153e&&Object[_0x4085ea(0x1e5)](_0x4565cb,_0x6dd376,_0x49153e),_0x49153e;},__metadata=this&&this[a130_0x2cb178(0x215)]||function(_0x3c3071,_0xf2eb62){const _0x18e195=a130_0x2cb178;if(typeof Reflect===_0x18e195(0x20c)&&typeof Reflect[_0x18e195(0x206)]==='function')return Reflect['metadata'](_0x3c3071,_0xf2eb62);};Object[a130_0x2cb178(0x1e5)](exports,a130_0x2cb178(0x1e0),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a130_0x2cb178(0x212)),typedi_1=require(a130_0x2cb178(0x20a)),constants_1=require('../../../constants'),queries_1=require(a130_0x2cb178(0x20f)),flosum_naming_utils_1=require(a130_0x2cb178(0x1dd)),salesforce_query_service_1=require(a130_0x2cb178(0x21e)),salesforce_rest_service_1=require(a130_0x2cb178(0x216));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x4ac90e,_0x3cbeb9){const _0x3f1575=a130_0x2cb178;this['queryService']=_0x4ac90e,this[_0x3f1575(0x1e4)]=_0x3cbeb9,this[_0x3f1575(0x1f4)]=0xc8;}['extractComponentMetadataFromRecord'](_0x23eebd){const _0x5b5f8f=a130_0x2cb178,_0x1c7823=flosum_naming_utils_1['extractFieldsFromRecord'](_0x23eebd,['Component_Name__c',_0x5b5f8f(0x210),'CRC32__c',_0x5b5f8f(0x219),_0x5b5f8f(0x220),'Id']);return{'id':_0x1c7823['Id'],'name':_0x1c7823[_0x5b5f8f(0x1db)],'type':_0x1c7823['Component_Type__c'],'fileName':_0x1c7823[_0x5b5f8f(0x219)],'crc32':_0x1c7823[_0x5b5f8f(0x1fe)],'version':+_0x1c7823['Version__c']};}async[a130_0x2cb178(0x1f3)](_0xc66002){const _0x364688=a130_0x2cb178,[_0x478c0a]=await this[_0x364688(0x1de)][_0x364688(0x1d9)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x364688(0x1eb)](_0x364688(0x217),_0xc66002));if(!_0x478c0a)throw new not_found_error_1['NotFoundError']('Repository\x20\x22'+_0xc66002+'\x22\x20not\x20found\x20in\x20flosum.');return _0x478c0a['Id'];}async['getBranchIdByName'](_0x3f1188){const _0x37a96a=a130_0x2cb178,[_0x1bb7c0]=await this[_0x37a96a(0x1de)][_0x37a96a(0x1d9)](queries_1[_0x37a96a(0x20e)][_0x37a96a(0x1eb)](_0x37a96a(0x217),_0x3f1188));if(!_0x1bb7c0)throw new not_found_error_1['NotFoundError'](_0x37a96a(0x1fb)+_0x3f1188+_0x37a96a(0x1ec));return _0x1bb7c0['Id'];}async['getComponentRecordTypes'](){const _0x125f7b=a130_0x2cb178,_0x19461f=await this[_0x125f7b(0x1de)][_0x125f7b(0x1d9)](queries_1[_0x125f7b(0x1f7)]);return _0x19461f['map'](_0x41d9e9=>flosum_naming_utils_1['extractFieldsFromRecord'](_0x41d9e9,['Id',_0x125f7b(0x218)]))[_0x125f7b(0x1e9)](_0x10b26f=>({'id':_0x10b26f['Id'],'name':_0x10b26f[_0x125f7b(0x218)]}));}async[a130_0x2cb178(0x20b)](_0x3d6094,_0x2ed169){const _0x2b28bc=a130_0x2cb178,_0x174088=[];while(_0x3d6094[_0x2b28bc(0x1ea)]){const _0x3b4562=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x2b28bc(0x1eb)](_0x2b28bc(0x1fa),_0x3d6094[_0x2b28bc(0x202)](0x0,this[_0x2b28bc(0x1f4)])['map'](_0x45e030=>'\x27'+_0x45e030+'\x27')[_0x2b28bc(0x1ee)](','))[_0x2b28bc(0x1eb)](_0x2b28bc(0x1fc),_0x2ed169),_0x262361=await this[_0x2b28bc(0x1de)][_0x2b28bc(0x1d9)](_0x3b4562);_0x174088[_0x2b28bc(0x1dc)](..._0x262361);}return _0x174088['map'](_0x32a128=>this[_0x2b28bc(0x1e1)](_0x32a128));}async[a130_0x2cb178(0x1f5)](_0x905299,_0x1a88bd){const _0x349b16=a130_0x2cb178,_0x1e9a6c=[];while(_0x905299['length']){const _0x4f098b=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x349b16(0x1eb)](_0x349b16(0x1fa),_0x905299[_0x349b16(0x202)](0x0,this[_0x349b16(0x1f4)])['map'](_0x864d6b=>'\x27'+_0x864d6b+'\x27')['join'](','))[_0x349b16(0x1eb)](_0x349b16(0x205),_0x1a88bd),_0x29795b=await this[_0x349b16(0x1de)][_0x349b16(0x1d9)](_0x4f098b);_0x1e9a6c['push'](..._0x29795b);}return _0x1e9a6c['map'](_0x448469=>this['extractComponentMetadataFromRecord'](_0x448469));}async['fetchRepositoryComponents'](_0x19cc37){const _0x627df1=a130_0x2cb178,_0x488c48=[],_0x2cb7a2=queries_1[_0x627df1(0x21c)]['replace'](_0x627df1(0x1fc),_0x19cc37),_0x2ea71d=await this[_0x627df1(0x1de)][_0x627df1(0x1d9)](_0x2cb7a2);return _0x488c48[_0x627df1(0x1dc)](..._0x2ea71d),_0x488c48[_0x627df1(0x1e9)](_0x1449a8=>this[_0x627df1(0x1e1)](_0x1449a8));}async['fetchBranchComponents'](_0x35b4a6){const _0x6bc8c7=a130_0x2cb178,_0x51b382=[],_0x49677c=queries_1[_0x6bc8c7(0x21b)][_0x6bc8c7(0x1eb)]('%branchId%',_0x35b4a6),_0x3b9f1d=await this[_0x6bc8c7(0x1de)][_0x6bc8c7(0x1d9)](_0x49677c);return _0x51b382[_0x6bc8c7(0x1dc)](..._0x3b9f1d),_0x51b382[_0x6bc8c7(0x1e9)](_0x6def32=>this[_0x6bc8c7(0x1e1)](_0x6def32));}async[a130_0x2cb178(0x1f1)](_0x463b46){const _0x29adcf=a130_0x2cb178,_0x15643e=[..._0x463b46],_0x4d8d3c=[];while(_0x15643e['length']){const _0x38742b=queries_1[_0x29adcf(0x1f0)][_0x29adcf(0x1eb)](_0x29adcf(0x204),_0x15643e[_0x29adcf(0x202)](0x0,this[_0x29adcf(0x1f4)])[_0x29adcf(0x1e9)](_0x4969a3=>'\x27'+_0x4969a3+'\x27')[_0x29adcf(0x1ee)](',')),_0x23d159=await this[_0x29adcf(0x1de)]['query'](_0x38742b);_0x4d8d3c[_0x29adcf(0x1dc)](..._0x23d159[_0x29adcf(0x1e9)](_0x55ca6b=>_0x55ca6b['Id']));}return _0x4d8d3c;}async[a130_0x2cb178(0x1ed)](_0x340de4,_0x16ab8e){const _0x6cce0b=a130_0x2cb178;return this[_0x6cce0b(0x1e4)][_0x6cce0b(0x1da)](constants_1[_0x6cce0b(0x209)],{[constants_1[_0x6cce0b(0x21d)]+_0x6cce0b(0x1f6)]:_0x16ab8e,[constants_1[_0x6cce0b(0x21d)]+_0x6cce0b(0x203)]:_0x340de4[_0x6cce0b(0x201)](0x0,0xff),[constants_1[_0x6cce0b(0x21d)]+_0x6cce0b(0x1e7)]:_0x6cce0b(0x213),[constants_1['FLOSUM_GIT_NAMESPACE']+_0x6cce0b(0x208)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1['Service'](),__metadata('design:paramtypes',[salesforce_query_service_1[a130_0x2cb178(0x1ff)],salesforce_rest_service_1[a130_0x2cb178(0x20d)]])],SalesforceGitSyncService),exports[a130_0x2cb178(0x1f2)]=SalesforceGitSyncService;