const a129_0x576824=a129_0x54c3;(function(_0x39a706,_0x1eab8b){const _0xe3669=a129_0x54c3,_0x180060=_0x39a706();while(!![]){try{const _0x1f9a7b=-parseInt(_0xe3669(0x18b))/0x1+-parseInt(_0xe3669(0x16e))/0x2+parseInt(_0xe3669(0x199))/0x3+parseInt(_0xe3669(0x19c))/0x4+parseInt(_0xe3669(0x186))/0x5+parseInt(_0xe3669(0x173))/0x6*(-parseInt(_0xe3669(0x16a))/0x7)+parseInt(_0xe3669(0x1a5))/0x8;if(_0x1f9a7b===_0x1eab8b)break;else _0x180060['push'](_0x180060['shift']());}catch(_0x26284e){_0x180060['push'](_0x180060['shift']());}}}(a129_0x3d6d,0xc51e8));const a129_0x77899=(function(){let _0x178512=!![];return function(_0x5cab9a,_0x6df12f){const _0x1487e7=_0x178512?function(){const _0x2bb410=a129_0x54c3;if(_0x6df12f){const _0x521b1f=_0x6df12f[_0x2bb410(0x16f)](_0x5cab9a,arguments);return _0x6df12f=null,_0x521b1f;}}:function(){};return _0x178512=![],_0x1487e7;};}()),a129_0x4bbf5c=a129_0x77899(this,function(){const _0x4adbee=a129_0x54c3;return a129_0x4bbf5c[_0x4adbee(0x167)]()['search'](_0x4adbee(0x16c))[_0x4adbee(0x167)]()['constructor'](a129_0x4bbf5c)[_0x4adbee(0x190)](_0x4adbee(0x16c));});function a129_0x3d6d(){const _0x1cc9df=['42PZzcGH','MAX_QUERY_ARRAY_ITEMS','fetchCommitManifestsByComponentIds','./salesforce-query.service','%fileNames%','substr','post','getOwnPropertyDescriptor','\x22\x20not\x20found\x20in\x20flosum.','fetchRepositoryComponentsByFilenames','Completed','__decorate','GET_REPOSITORY_COMPONENTS_QUERY','map','Is_From_Agent__c','CRC32__c','getComponentRecordTypes','push','queryService','6386620FyTCso','GET_COMPONENT_RECORD_TYPES_QUERY','FLOSUM_COMMIT','fetchBranchComponents','Component_Type__c','556653DfSDVX','restService','function','%name%','FLOSUM_GIT_NAMESPACE','search','extractFieldsFromRecord','decorate','./salesforce-rest.service','splice','length','%repositoryId%','Commit_Name__c','Version__c','4532799sObzgG','NotFoundError','Service','76356YdhGPC','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','query','GET_BRANCH_BY_NAME_QUERY','../../../constants','../queries','Branch\x20\x22','createCommit','GET_BRANCH_COMPONENTS_QUERY','1710136xLbFpN','getRepositoryIdByName','File_Name__c','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','replace','Component_Name__c','object','Repository__c','GET_REPOSITORY_BY_NAME_QUERY','defineProperty','SalesforceQueryService','join','getBranchIdByName','toString','fetchBranchComponentsByFilenames','%branchId%','1576883eXQDeZ','FLOSUM_NAMESPACE','(((.+)+)+)+$','metadata','160354bTaQDy','apply','extractComponentMetadataFromRecord','SalesforceGitSyncService','Name'];a129_0x3d6d=function(){return _0x1cc9df;};return a129_0x3d6d();}a129_0x4bbf5c();'use strict';function a129_0x54c3(_0x62e21a,_0x16338f){const _0x11bba7=a129_0x3d6d();return a129_0x54c3=function(_0x4bbf5c,_0x77899){_0x4bbf5c=_0x4bbf5c-0x15f;let _0x3d6dcc=_0x11bba7[_0x4bbf5c];return _0x3d6dcc;},a129_0x54c3(_0x62e21a,_0x16338f);}var __decorate=this&&this[a129_0x576824(0x17e)]||function(_0x1ea8f3,_0x3a0a59,_0x5632d7,_0x55a272){const _0x5ac39b=a129_0x576824;var _0x1573ee=arguments[_0x5ac39b(0x195)],_0x49af42=_0x1573ee<0x3?_0x3a0a59:_0x55a272===null?_0x55a272=Object[_0x5ac39b(0x17a)](_0x3a0a59,_0x5632d7):_0x55a272,_0x4061ea;if(typeof Reflect===_0x5ac39b(0x160)&&typeof Reflect[_0x5ac39b(0x192)]==='function')_0x49af42=Reflect[_0x5ac39b(0x192)](_0x1ea8f3,_0x3a0a59,_0x5632d7,_0x55a272);else{for(var _0x56ba2d=_0x1ea8f3[_0x5ac39b(0x195)]-0x1;_0x56ba2d>=0x0;_0x56ba2d--)if(_0x4061ea=_0x1ea8f3[_0x56ba2d])_0x49af42=(_0x1573ee<0x3?_0x4061ea(_0x49af42):_0x1573ee>0x3?_0x4061ea(_0x3a0a59,_0x5632d7,_0x49af42):_0x4061ea(_0x3a0a59,_0x5632d7))||_0x49af42;}return _0x1573ee>0x3&&_0x49af42&&Object[_0x5ac39b(0x163)](_0x3a0a59,_0x5632d7,_0x49af42),_0x49af42;},__metadata=this&&this['__metadata']||function(_0x6d72f,_0x52ef03){const _0x11a3e6=a129_0x576824;if(typeof Reflect==='object'&&typeof Reflect[_0x11a3e6(0x16d)]===_0x11a3e6(0x18d))return Reflect[_0x11a3e6(0x16d)](_0x6d72f,_0x52ef03);};Object[a129_0x576824(0x163)](exports,'__esModule',{'value':!![]}),exports[a129_0x576824(0x171)]=void 0x0;const not_found_error_1=require('../../../core/errors/not-found.error'),typedi_1=require('typedi'),constants_1=require(a129_0x576824(0x1a0)),queries_1=require(a129_0x576824(0x1a1)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a129_0x576824(0x176)),salesforce_rest_service_1=require(a129_0x576824(0x193));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0xed3df1,_0x4e1519){const _0x38e8e5=a129_0x576824;this[_0x38e8e5(0x185)]=_0xed3df1,this[_0x38e8e5(0x18c)]=_0x4e1519,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}['extractComponentMetadataFromRecord'](_0x179d8f){const _0x24409f=a129_0x576824,_0x28c8ca=flosum_naming_utils_1['extractFieldsFromRecord'](_0x179d8f,[_0x24409f(0x15f),_0x24409f(0x18a),'CRC32__c',_0x24409f(0x1a7),_0x24409f(0x198),'Id']);return{'id':_0x28c8ca['Id'],'name':_0x28c8ca[_0x24409f(0x15f)],'type':_0x28c8ca['Component_Type__c'],'fileName':_0x28c8ca[_0x24409f(0x1a7)],'crc32':_0x28c8ca[_0x24409f(0x182)],'version':+_0x28c8ca['Version__c']};}async[a129_0x576824(0x1a6)](_0x27acc2){const _0x418441=a129_0x576824,[_0x439893]=await this[_0x418441(0x185)][_0x418441(0x19e)](queries_1[_0x418441(0x162)][_0x418441(0x1a9)](_0x418441(0x18e),_0x27acc2));if(!_0x439893)throw new not_found_error_1[(_0x418441(0x19a))]('Repository\x20\x22'+_0x27acc2+_0x418441(0x17b));return _0x439893['Id'];}async[a129_0x576824(0x166)](_0x483a23){const _0x4a172e=a129_0x576824,[_0x13c57a]=await this[_0x4a172e(0x185)][_0x4a172e(0x19e)](queries_1[_0x4a172e(0x19f)][_0x4a172e(0x1a9)](_0x4a172e(0x18e),_0x483a23));if(!_0x13c57a)throw new not_found_error_1['NotFoundError'](_0x4a172e(0x1a2)+_0x483a23+'\x22\x20not\x20found\x20in\x20flosum.');return _0x13c57a['Id'];}async[a129_0x576824(0x183)](){const _0x4d7d95=a129_0x576824,_0x2bcb2a=await this['queryService']['query'](queries_1[_0x4d7d95(0x187)]);return _0x2bcb2a['map'](_0x19c7c9=>flosum_naming_utils_1[_0x4d7d95(0x191)](_0x19c7c9,['Id','Name']))['map'](_0x1dc4d4=>({'id':_0x1dc4d4['Id'],'name':_0x1dc4d4[_0x4d7d95(0x172)]}));}async[a129_0x576824(0x17c)](_0x4c4ce7,_0xf2afe6){const _0x4b4f4d=a129_0x576824,_0x14b9b0=[];while(_0x4c4ce7[_0x4b4f4d(0x195)]){const _0x5c3274=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY']['replace']('%fileNames%',_0x4c4ce7[_0x4b4f4d(0x194)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x596884=>'\x27'+_0x596884+'\x27')[_0x4b4f4d(0x165)](','))[_0x4b4f4d(0x1a9)](_0x4b4f4d(0x196),_0xf2afe6),_0x5d8571=await this[_0x4b4f4d(0x185)][_0x4b4f4d(0x19e)](_0x5c3274);_0x14b9b0['push'](..._0x5d8571);}return _0x14b9b0[_0x4b4f4d(0x180)](_0x58541c=>this['extractComponentMetadataFromRecord'](_0x58541c));}async[a129_0x576824(0x168)](_0x5b1d15,_0x51426e){const _0x11baa0=a129_0x576824,_0x16e4bc=[];while(_0x5b1d15[_0x11baa0(0x195)]){const _0x1a74f5=queries_1[_0x11baa0(0x19d)][_0x11baa0(0x1a9)](_0x11baa0(0x177),_0x5b1d15[_0x11baa0(0x194)](0x0,this[_0x11baa0(0x174)])[_0x11baa0(0x180)](_0x27d23f=>'\x27'+_0x27d23f+'\x27')[_0x11baa0(0x165)](','))['replace'](_0x11baa0(0x169),_0x51426e),_0x7512fe=await this[_0x11baa0(0x185)][_0x11baa0(0x19e)](_0x1a74f5);_0x16e4bc[_0x11baa0(0x184)](..._0x7512fe);}return _0x16e4bc[_0x11baa0(0x180)](_0x4d3231=>this[_0x11baa0(0x170)](_0x4d3231));}async['fetchRepositoryComponents'](_0x3397dd){const _0x14d6a8=a129_0x576824,_0x5e86d6=[],_0x50933e=queries_1[_0x14d6a8(0x17f)][_0x14d6a8(0x1a9)]('%repositoryId%',_0x3397dd),_0x284bf9=await this[_0x14d6a8(0x185)][_0x14d6a8(0x19e)](_0x50933e);return _0x5e86d6[_0x14d6a8(0x184)](..._0x284bf9),_0x5e86d6['map'](_0x483776=>this['extractComponentMetadataFromRecord'](_0x483776));}async[a129_0x576824(0x189)](_0x32711a){const _0x3969b9=a129_0x576824,_0x44eaa6=[],_0x329b87=queries_1[_0x3969b9(0x1a4)][_0x3969b9(0x1a9)](_0x3969b9(0x169),_0x32711a),_0x31413f=await this['queryService'][_0x3969b9(0x19e)](_0x329b87);return _0x44eaa6[_0x3969b9(0x184)](..._0x31413f),_0x44eaa6[_0x3969b9(0x180)](_0x1c5760=>this[_0x3969b9(0x170)](_0x1c5760));}async[a129_0x576824(0x175)](_0x4e6d53){const _0x16acc2=a129_0x576824,_0x288d29=[..._0x4e6d53],_0x59df90=[];while(_0x288d29[_0x16acc2(0x195)]){const _0x2b47bf=queries_1[_0x16acc2(0x1a8)][_0x16acc2(0x1a9)]('%componentIds%',_0x288d29[_0x16acc2(0x194)](0x0,this[_0x16acc2(0x174)])['map'](_0x2f2e6d=>'\x27'+_0x2f2e6d+'\x27')[_0x16acc2(0x165)](',')),_0x45ff2=await this[_0x16acc2(0x185)][_0x16acc2(0x19e)](_0x2b47bf);_0x59df90[_0x16acc2(0x184)](..._0x45ff2['map'](_0x5d95be=>_0x5d95be['Id']));}return _0x59df90;}async[a129_0x576824(0x1a3)](_0xf60823,_0x3dd61b){const _0x170429=a129_0x576824;return this['restService'][_0x170429(0x179)](constants_1[_0x170429(0x188)],{[constants_1['FLOSUM_NAMESPACE']+_0x170429(0x161)]:_0x3dd61b,[constants_1[_0x170429(0x16b)]+_0x170429(0x197)]:_0xf60823[_0x170429(0x178)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0x170429(0x17d),[constants_1[_0x170429(0x18f)]+_0x170429(0x181)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a129_0x576824(0x19b)](),__metadata('design:paramtypes',[salesforce_query_service_1[a129_0x576824(0x164)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a129_0x576824(0x171)]=SalesforceGitSyncService;