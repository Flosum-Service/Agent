const a129_0x4b47b7=a129_0x358e;(function(_0x38cb5d,_0x4ec0cf){const _0x235b72=a129_0x358e,_0xf00674=_0x38cb5d();while(!![]){try{const _0x320e5f=parseInt(_0x235b72(0xce))/0x1*(parseInt(_0x235b72(0x10e))/0x2)+-parseInt(_0x235b72(0xf1))/0x3+-parseInt(_0x235b72(0xf3))/0x4+-parseInt(_0x235b72(0xe1))/0x5+parseInt(_0x235b72(0x108))/0x6+-parseInt(_0x235b72(0xee))/0x7+parseInt(_0x235b72(0xd5))/0x8;if(_0x320e5f===_0x4ec0cf)break;else _0xf00674['push'](_0xf00674['shift']());}catch(_0xddc801){_0xf00674['push'](_0xf00674['shift']());}}}(a129_0x2547,0x1dbc4));const a129_0x933e07=(function(){let _0x3df912=!![];return function(_0x164d5c,_0x50b204){const _0x573fff=_0x3df912?function(){const _0x953df0=a129_0x358e;if(_0x50b204){const _0x50997b=_0x50b204[_0x953df0(0xd1)](_0x164d5c,arguments);return _0x50b204=null,_0x50997b;}}:function(){};return _0x3df912=![],_0x573fff;};}()),a129_0x1d978a=a129_0x933e07(this,function(){const _0x50202a=a129_0x358e;return a129_0x1d978a['toString']()['search'](_0x50202a(0xfe))['toString']()['constructor'](a129_0x1d978a)[_0x50202a(0x10f)](_0x50202a(0xfe));});a129_0x1d978a();'use strict';function a129_0x2547(){const _0x3e3945=['%componentIds%','defineProperty','../../../constants','Component_Type__c','26882pPfIuR','search','../../../core/errors/not-found.error','%fileNames%','length','queryService','Version__c','push','17ZIbeNk','fetchRepositoryComponents','FLOSUM_COMMIT','apply','./salesforce-query.service','fetchBranchComponentsByFilenames','join','1534456ewdWKP','FLOSUM_NAMESPACE','GET_REPOSITORY_COMPONENTS_QUERY','%branchId%','extractFieldsFromRecord','getBranchIdByName','\x22\x20not\x20found\x20in\x20flosum.','splice','metadata','getComponentRecordTypes','restService','map','185305Pnpqaf','object','query','fetchBranchComponents','createCommit','MAX_QUERY_ARRAY_ITEMS','CRC32__c','extractComponentMetadataFromRecord','%repositoryId%','SalesforceRestService','Service','post','function','89187BkRlXu','../queries','NotFoundError','231432sChATP','Component_Name__c','971028GruFOk','FLOSUM_GIT_NAMESPACE','__esModule','substr','__decorate','%name%','typedi','GET_COMPONENT_RECORD_TYPES_QUERY','./salesforce-rest.service','File_Name__c','GET_REPOSITORY_BY_NAME_QUERY','(((.+)+)+)+$','Repository__c','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','getRepositoryIdByName','SalesforceGitSyncService','GET_BRANCH_COMPONENTS_QUERY','GET_BRANCH_BY_NAME_QUERY','Name','replace','../utils/flosum-naming.utils','427170eVPitJ','Is_From_Agent__c'];a129_0x2547=function(){return _0x3e3945;};return a129_0x2547();}var __decorate=this&&this[a129_0x4b47b7(0xf7)]||function(_0x3b62e5,_0x48fe5d,_0x45c2ec,_0x1d0e71){const _0x206729=a129_0x4b47b7;var _0x100710=arguments[_0x206729(0x112)],_0x2d713c=_0x100710<0x3?_0x48fe5d:_0x1d0e71===null?_0x1d0e71=Object['getOwnPropertyDescriptor'](_0x48fe5d,_0x45c2ec):_0x1d0e71,_0x598abc;if(typeof Reflect===_0x206729(0xe2)&&typeof Reflect['decorate']===_0x206729(0xed))_0x2d713c=Reflect['decorate'](_0x3b62e5,_0x48fe5d,_0x45c2ec,_0x1d0e71);else{for(var _0x50c0ce=_0x3b62e5[_0x206729(0x112)]-0x1;_0x50c0ce>=0x0;_0x50c0ce--)if(_0x598abc=_0x3b62e5[_0x50c0ce])_0x2d713c=(_0x100710<0x3?_0x598abc(_0x2d713c):_0x100710>0x3?_0x598abc(_0x48fe5d,_0x45c2ec,_0x2d713c):_0x598abc(_0x48fe5d,_0x45c2ec))||_0x2d713c;}return _0x100710>0x3&&_0x2d713c&&Object['defineProperty'](_0x48fe5d,_0x45c2ec,_0x2d713c),_0x2d713c;},__metadata=this&&this['__metadata']||function(_0x5049d2,_0x2724ff){const _0x367cc5=a129_0x4b47b7;if(typeof Reflect==='object'&&typeof Reflect[_0x367cc5(0xdd)]===_0x367cc5(0xed))return Reflect[_0x367cc5(0xdd)](_0x5049d2,_0x2724ff);};function a129_0x358e(_0x4bf743,_0x101178){const _0x3d31fc=a129_0x2547();return a129_0x358e=function(_0x1d978a,_0x933e07){_0x1d978a=_0x1d978a-0xcc;let _0x25471e=_0x3d31fc[_0x1d978a];return _0x25471e;},a129_0x358e(_0x4bf743,_0x101178);}Object[a129_0x4b47b7(0x10b)](exports,a129_0x4b47b7(0xf5),{'value':!![]}),exports[a129_0x4b47b7(0x102)]=void 0x0;const not_found_error_1=require(a129_0x4b47b7(0x110)),typedi_1=require(a129_0x4b47b7(0xf9)),constants_1=require(a129_0x4b47b7(0x10c)),queries_1=require(a129_0x4b47b7(0xef)),flosum_naming_utils_1=require(a129_0x4b47b7(0x107)),salesforce_query_service_1=require(a129_0x4b47b7(0xd2)),salesforce_rest_service_1=require(a129_0x4b47b7(0xfb));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x582c46,_0x5b4fa2){this['queryService']=_0x582c46,this['restService']=_0x5b4fa2,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a129_0x4b47b7(0xe8)](_0xbd1528){const _0x2f4a46=a129_0x4b47b7,_0x31fb1e=flosum_naming_utils_1[_0x2f4a46(0xd9)](_0xbd1528,[_0x2f4a46(0xf2),_0x2f4a46(0x10d),_0x2f4a46(0xe7),_0x2f4a46(0xfc),_0x2f4a46(0xcc),'Id']);return{'id':_0x31fb1e['Id'],'name':_0x31fb1e[_0x2f4a46(0xf2)],'type':_0x31fb1e[_0x2f4a46(0x10d)],'fileName':_0x31fb1e[_0x2f4a46(0xfc)],'crc32':_0x31fb1e[_0x2f4a46(0xe7)],'version':+_0x31fb1e[_0x2f4a46(0xcc)]};}async[a129_0x4b47b7(0x101)](_0x53ce4a){const _0x1da10a=a129_0x4b47b7,[_0x2f8f03]=await this['queryService'][_0x1da10a(0xe3)](queries_1[_0x1da10a(0xfd)][_0x1da10a(0x106)](_0x1da10a(0xf8),_0x53ce4a));if(!_0x2f8f03)throw new not_found_error_1[(_0x1da10a(0xf0))]('Repository\x20\x22'+_0x53ce4a+_0x1da10a(0xdb));return _0x2f8f03['Id'];}async[a129_0x4b47b7(0xda)](_0x23b3e2){const _0x167311=a129_0x4b47b7,[_0x536d26]=await this[_0x167311(0x113)][_0x167311(0xe3)](queries_1[_0x167311(0x104)][_0x167311(0x106)](_0x167311(0xf8),_0x23b3e2));if(!_0x536d26)throw new not_found_error_1[(_0x167311(0xf0))]('Branch\x20\x22'+_0x23b3e2+'\x22\x20not\x20found\x20in\x20flosum.');return _0x536d26['Id'];}async[a129_0x4b47b7(0xde)](){const _0x5a024d=a129_0x4b47b7,_0x115cab=await this[_0x5a024d(0x113)][_0x5a024d(0xe3)](queries_1[_0x5a024d(0xfa)]);return _0x115cab['map'](_0x419f11=>flosum_naming_utils_1['extractFieldsFromRecord'](_0x419f11,['Id',_0x5a024d(0x105)]))[_0x5a024d(0xe0)](_0x46117e=>({'id':_0x46117e['Id'],'name':_0x46117e[_0x5a024d(0x105)]}));}async['fetchRepositoryComponentsByFilenames'](_0x5dd4c4,_0x5d3cb8){const _0x18ed02=a129_0x4b47b7,_0xf5d335=[];while(_0x5dd4c4[_0x18ed02(0x112)]){const _0x33f3d9=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x18ed02(0x106)]('%fileNames%',_0x5dd4c4[_0x18ed02(0xdc)](0x0,this[_0x18ed02(0xe6)])['map'](_0x373ad2=>'\x27'+_0x373ad2+'\x27')[_0x18ed02(0xd4)](','))[_0x18ed02(0x106)](_0x18ed02(0xe9),_0x5d3cb8),_0x16ae21=await this[_0x18ed02(0x113)][_0x18ed02(0xe3)](_0x33f3d9);_0xf5d335[_0x18ed02(0xcd)](..._0x16ae21);}return _0xf5d335[_0x18ed02(0xe0)](_0x3e8475=>this[_0x18ed02(0xe8)](_0x3e8475));}async[a129_0x4b47b7(0xd3)](_0xf7b9c7,_0x4a4d24){const _0x29ca2f=a129_0x4b47b7,_0x147a07=[];while(_0xf7b9c7['length']){const _0xd497fb=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x29ca2f(0x106)](_0x29ca2f(0x111),_0xf7b9c7['splice'](0x0,this[_0x29ca2f(0xe6)])[_0x29ca2f(0xe0)](_0x23d1d0=>'\x27'+_0x23d1d0+'\x27')[_0x29ca2f(0xd4)](','))['replace'](_0x29ca2f(0xd8),_0x4a4d24),_0x4fd1f8=await this[_0x29ca2f(0x113)]['query'](_0xd497fb);_0x147a07[_0x29ca2f(0xcd)](..._0x4fd1f8);}return _0x147a07['map'](_0x5d0338=>this[_0x29ca2f(0xe8)](_0x5d0338));}async[a129_0x4b47b7(0xcf)](_0x4c1349){const _0x376f58=a129_0x4b47b7,_0x49e8f8=[],_0x390568=queries_1[_0x376f58(0xd7)]['replace'](_0x376f58(0xe9),_0x4c1349),_0x5ace34=await this[_0x376f58(0x113)][_0x376f58(0xe3)](_0x390568);return _0x49e8f8[_0x376f58(0xcd)](..._0x5ace34),_0x49e8f8[_0x376f58(0xe0)](_0x4a4669=>this[_0x376f58(0xe8)](_0x4a4669));}async[a129_0x4b47b7(0xe4)](_0x2a5b72){const _0x47d8fc=a129_0x4b47b7,_0x2efe7d=[],_0x29f3fe=queries_1[_0x47d8fc(0x103)][_0x47d8fc(0x106)](_0x47d8fc(0xd8),_0x2a5b72),_0xea14be=await this[_0x47d8fc(0x113)]['query'](_0x29f3fe);return _0x2efe7d[_0x47d8fc(0xcd)](..._0xea14be),_0x2efe7d[_0x47d8fc(0xe0)](_0xd092f6=>this[_0x47d8fc(0xe8)](_0xd092f6));}async['fetchCommitManifestsByComponentIds'](_0xf13c68){const _0x1945ac=a129_0x4b47b7,_0x4d8009=[..._0xf13c68],_0x1f62f8=[];while(_0x4d8009[_0x1945ac(0x112)]){const _0xda7f4e=queries_1[_0x1945ac(0x100)]['replace'](_0x1945ac(0x10a),_0x4d8009['splice'](0x0,this[_0x1945ac(0xe6)])['map'](_0x39d0f3=>'\x27'+_0x39d0f3+'\x27')['join'](',')),_0x282e90=await this[_0x1945ac(0x113)][_0x1945ac(0xe3)](_0xda7f4e);_0x1f62f8['push'](..._0x282e90[_0x1945ac(0xe0)](_0x169a5a=>_0x169a5a['Id']));}return _0x1f62f8;}async[a129_0x4b47b7(0xe5)](_0x48fbbb,_0x835944){const _0x2aa2d2=a129_0x4b47b7;return this[_0x2aa2d2(0xdf)][_0x2aa2d2(0xec)](constants_1[_0x2aa2d2(0xd0)],{[constants_1[_0x2aa2d2(0xd6)]+_0x2aa2d2(0xff)]:_0x835944,[constants_1[_0x2aa2d2(0xd6)]+'Commit_Name__c']:_0x48fbbb[_0x2aa2d2(0xf6)](0x0,0xff),[constants_1[_0x2aa2d2(0xd6)]+'Status__c']:'Completed',[constants_1[_0x2aa2d2(0xf4)]+_0x2aa2d2(0x109)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a129_0x4b47b7(0xeb)](),__metadata('design:paramtypes',[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a129_0x4b47b7(0xea)]])],SalesforceGitSyncService),exports[a129_0x4b47b7(0x102)]=SalesforceGitSyncService;