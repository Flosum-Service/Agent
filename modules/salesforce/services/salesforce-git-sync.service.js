const a130_0x16e2d2=a130_0x3e44;function a130_0x3e44(_0x108fed,_0x2f6664){const _0x2418bf=a130_0x59e3();return a130_0x3e44=function(_0x735061,_0x8ab279){_0x735061=_0x735061-0x173;let _0x59e380=_0x2418bf[_0x735061];return _0x59e380;},a130_0x3e44(_0x108fed,_0x2f6664);}function a130_0x59e3(){const _0x5190d0=['join','getRepositoryIdByName','FLOSUM_NAMESPACE','1349063bnKxQn','search','./salesforce-rest.service','9cGjTzS','File_Name__c','SalesforceRestService','post','539330xWxqCL','Version__c','map','createCommit','defineProperty','./salesforce-query.service','metadata','__metadata','261SNgDIc','splice','apply','428885hsZObC','constructor','Commit_Name__c','%branchId%','substr','getBranchIdByName','design:paramtypes','getOwnPropertyDescriptor','decorate','replace','queryService','extractFieldsFromRecord','Repository__c','__decorate','MAX_QUERY_ARRAY_ITEMS','SalesforceGitSyncService','extractComponentMetadataFromRecord','47732pGTIze','GET_REPOSITORY_COMPONENTS_QUERY','2295176PjCuRz','609042xrenhv','object','toString','../queries','Component_Type__c','Name','GET_REPOSITORY_BY_NAME_QUERY','18YZnvPk','../utils/flosum-naming.utils','length','(((.+)+)+)+$','query','SalesforceQueryService','%name%','Service','restService','%fileNames%','CRC32__c','1183698vMPEjx','push','__esModule','NotFoundError','fetchRepositoryComponents','Component_Name__c','GET_BRANCH_COMPONENTS_QUERY','fetchRepositoryComponentsByFilenames','%repositoryId%','Branch\x20\x22','function'];a130_0x59e3=function(){return _0x5190d0;};return a130_0x59e3();}(function(_0x2a496f,_0x4ad4c6){const _0x27f490=a130_0x3e44,_0x3abe6a=_0x2a496f();while(!![]){try{const _0x27659a=-parseInt(_0x27f490(0x190))/0x1+parseInt(_0x27f490(0x182))/0x2+parseInt(_0x27f490(0x19f))/0x3*(parseInt(_0x27f490(0x1b3))/0x4)+-parseInt(_0x27f490(0x1a2))/0x5+-parseInt(_0x27f490(0x177))/0x6*(-parseInt(_0x27f490(0x1b6))/0x7)+-parseInt(_0x27f490(0x1b5))/0x8*(-parseInt(_0x27f490(0x193))/0x9)+parseInt(_0x27f490(0x197))/0xa;if(_0x27659a===_0x4ad4c6)break;else _0x3abe6a['push'](_0x3abe6a['shift']());}catch(_0x10aae0){_0x3abe6a['push'](_0x3abe6a['shift']());}}}(a130_0x59e3,0xc2964));const a130_0x8ab279=(function(){let _0x18c631=!![];return function(_0x43231c,_0x4fff0b){const _0x5a4282=_0x18c631?function(){const _0x45e286=a130_0x3e44;if(_0x4fff0b){const _0x1026cf=_0x4fff0b[_0x45e286(0x1a1)](_0x43231c,arguments);return _0x4fff0b=null,_0x1026cf;}}:function(){};return _0x18c631=![],_0x5a4282;};}()),a130_0x735061=a130_0x8ab279(this,function(){const _0x371aab=a130_0x3e44;return a130_0x735061['toString']()['search'](_0x371aab(0x17a))[_0x371aab(0x1b8)]()[_0x371aab(0x1a3)](a130_0x735061)[_0x371aab(0x191)]('(((.+)+)+)+$');});a130_0x735061();'use strict';var __decorate=this&&this[a130_0x16e2d2(0x1af)]||function(_0x3a0daf,_0x22b90f,_0x25c045,_0x33cd1a){const _0x1e1434=a130_0x16e2d2;var _0x3c77d4=arguments['length'],_0x2f27ad=_0x3c77d4<0x3?_0x22b90f:_0x33cd1a===null?_0x33cd1a=Object[_0x1e1434(0x1a9)](_0x22b90f,_0x25c045):_0x33cd1a,_0x1687a3;if(typeof Reflect===_0x1e1434(0x1b7)&&typeof Reflect[_0x1e1434(0x1aa)]===_0x1e1434(0x18c))_0x2f27ad=Reflect['decorate'](_0x3a0daf,_0x22b90f,_0x25c045,_0x33cd1a);else{for(var _0x6a45e0=_0x3a0daf[_0x1e1434(0x179)]-0x1;_0x6a45e0>=0x0;_0x6a45e0--)if(_0x1687a3=_0x3a0daf[_0x6a45e0])_0x2f27ad=(_0x3c77d4<0x3?_0x1687a3(_0x2f27ad):_0x3c77d4>0x3?_0x1687a3(_0x22b90f,_0x25c045,_0x2f27ad):_0x1687a3(_0x22b90f,_0x25c045))||_0x2f27ad;}return _0x3c77d4>0x3&&_0x2f27ad&&Object['defineProperty'](_0x22b90f,_0x25c045,_0x2f27ad),_0x2f27ad;},__metadata=this&&this[a130_0x16e2d2(0x19e)]||function(_0x56fca2,_0x298423){const _0x440372=a130_0x16e2d2;if(typeof Reflect===_0x440372(0x1b7)&&typeof Reflect[_0x440372(0x19d)]===_0x440372(0x18c))return Reflect[_0x440372(0x19d)](_0x56fca2,_0x298423);};Object[a130_0x16e2d2(0x19b)](exports,a130_0x16e2d2(0x184),{'value':!![]}),exports[a130_0x16e2d2(0x1b1)]=void 0x0;const not_found_error_1=require('../../../core/errors/not-found.error'),typedi_1=require('typedi'),constants_1=require('../../../constants'),queries_1=require(a130_0x16e2d2(0x173)),flosum_naming_utils_1=require(a130_0x16e2d2(0x178)),salesforce_query_service_1=require(a130_0x16e2d2(0x19c)),salesforce_rest_service_1=require(a130_0x16e2d2(0x192));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x5e1ad6,_0xee7dd9){const _0x138a5e=a130_0x16e2d2;this[_0x138a5e(0x1ac)]=_0x5e1ad6,this[_0x138a5e(0x17f)]=_0xee7dd9,this[_0x138a5e(0x1b0)]=0xc8;}[a130_0x16e2d2(0x1b2)](_0x5e254e){const _0x3bccb8=a130_0x16e2d2,_0x505f42=flosum_naming_utils_1[_0x3bccb8(0x1ad)](_0x5e254e,[_0x3bccb8(0x187),_0x3bccb8(0x174),_0x3bccb8(0x181),'File_Name__c',_0x3bccb8(0x198),'Id']);return{'id':_0x505f42['Id'],'name':_0x505f42[_0x3bccb8(0x187)],'type':_0x505f42[_0x3bccb8(0x174)],'fileName':_0x505f42[_0x3bccb8(0x194)],'crc32':_0x505f42[_0x3bccb8(0x181)],'version':+_0x505f42[_0x3bccb8(0x198)]};}async[a130_0x16e2d2(0x18e)](_0x51b7cd){const _0x5823f3=a130_0x16e2d2,[_0x10bc67]=await this['queryService'][_0x5823f3(0x17b)](queries_1[_0x5823f3(0x176)][_0x5823f3(0x1ab)](_0x5823f3(0x17d),_0x51b7cd));if(!_0x10bc67)throw new not_found_error_1[(_0x5823f3(0x185))]('Repository\x20\x22'+_0x51b7cd+'\x22\x20not\x20found\x20in\x20flosum.');return _0x10bc67['Id'];}async[a130_0x16e2d2(0x1a7)](_0x3c13f2){const _0x37448d=a130_0x16e2d2,[_0x4b6276]=await this[_0x37448d(0x1ac)][_0x37448d(0x17b)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x37448d(0x1ab)](_0x37448d(0x17d),_0x3c13f2));if(!_0x4b6276)throw new not_found_error_1['NotFoundError'](_0x37448d(0x18b)+_0x3c13f2+'\x22\x20not\x20found\x20in\x20flosum.');return _0x4b6276['Id'];}async['getComponentRecordTypes'](){const _0x3bc762=a130_0x16e2d2,_0x56fd21=await this['queryService'][_0x3bc762(0x17b)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x56fd21[_0x3bc762(0x199)](_0x279698=>flosum_naming_utils_1['extractFieldsFromRecord'](_0x279698,['Id',_0x3bc762(0x175)]))[_0x3bc762(0x199)](_0x4f5102=>({'id':_0x4f5102['Id'],'name':_0x4f5102[_0x3bc762(0x175)]}));}async[a130_0x16e2d2(0x189)](_0x2fac81,_0x177fca){const _0x6eae4d=a130_0x16e2d2,_0xd75c4=[];while(_0x2fac81[_0x6eae4d(0x179)]){const _0x2cd168=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x6eae4d(0x1ab)](_0x6eae4d(0x180),_0x2fac81[_0x6eae4d(0x1a0)](0x0,this[_0x6eae4d(0x1b0)])[_0x6eae4d(0x199)](_0x500b4b=>'\x27'+_0x500b4b+'\x27')[_0x6eae4d(0x18d)](','))[_0x6eae4d(0x1ab)]('%repositoryId%',_0x177fca),_0x4ef0ff=await this[_0x6eae4d(0x1ac)][_0x6eae4d(0x17b)](_0x2cd168);_0xd75c4[_0x6eae4d(0x183)](..._0x4ef0ff);}return _0xd75c4[_0x6eae4d(0x199)](_0x1835cd=>this[_0x6eae4d(0x1b2)](_0x1835cd));}async['fetchBranchComponentsByFilenames'](_0x13bbe8,_0x5c6f63){const _0x45d360=a130_0x16e2d2,_0x3f72d4=[];while(_0x13bbe8[_0x45d360(0x179)]){const _0x86a18a=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x45d360(0x1ab)](_0x45d360(0x180),_0x13bbe8[_0x45d360(0x1a0)](0x0,this[_0x45d360(0x1b0)])[_0x45d360(0x199)](_0x15d5fc=>'\x27'+_0x15d5fc+'\x27')[_0x45d360(0x18d)](','))[_0x45d360(0x1ab)](_0x45d360(0x1a5),_0x5c6f63),_0x938391=await this['queryService']['query'](_0x86a18a);_0x3f72d4[_0x45d360(0x183)](..._0x938391);}return _0x3f72d4[_0x45d360(0x199)](_0x253918=>this[_0x45d360(0x1b2)](_0x253918));}async[a130_0x16e2d2(0x186)](_0x296a23){const _0x3ae8f3=a130_0x16e2d2,_0x43d4b0=queries_1[_0x3ae8f3(0x1b4)][_0x3ae8f3(0x1ab)](_0x3ae8f3(0x18a),_0x296a23),_0x4ee269=await this[_0x3ae8f3(0x1ac)][_0x3ae8f3(0x17b)](_0x43d4b0);return _0x4ee269[_0x3ae8f3(0x199)](_0x29502a=>this[_0x3ae8f3(0x1b2)](_0x29502a));}async['fetchBranchComponents'](_0x4283cf){const _0x5c4e50=a130_0x16e2d2,_0x467bd0=queries_1[_0x5c4e50(0x188)][_0x5c4e50(0x1ab)](_0x5c4e50(0x1a5),_0x4283cf),_0x45b4cd=await this[_0x5c4e50(0x1ac)][_0x5c4e50(0x17b)](_0x467bd0);return _0x45b4cd['map'](_0x1b4aff=>this[_0x5c4e50(0x1b2)](_0x1b4aff));}async['fetchCommitManifestsByComponentIds'](_0x42746e){const _0x335b3e=a130_0x16e2d2,_0x4b0e7b=[..._0x42746e],_0x1e670a=[];while(_0x4b0e7b[_0x335b3e(0x179)]){const _0xd83838=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS']['replace']('%componentIds%',_0x4b0e7b[_0x335b3e(0x1a0)](0x0,this[_0x335b3e(0x1b0)])[_0x335b3e(0x199)](_0x237148=>'\x27'+_0x237148+'\x27')[_0x335b3e(0x18d)](',')),_0x15a651=await this[_0x335b3e(0x1ac)][_0x335b3e(0x17b)](_0xd83838);_0x1e670a[_0x335b3e(0x183)](..._0x15a651['map'](_0x5edc80=>_0x5edc80['Id']));}return _0x1e670a;}async[a130_0x16e2d2(0x19a)](_0x3019b3,_0x213be5){const _0x14e1a2=a130_0x16e2d2;return this[_0x14e1a2(0x17f)][_0x14e1a2(0x196)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x14e1a2(0x18f)]+_0x14e1a2(0x1ae)]:_0x213be5,[constants_1[_0x14e1a2(0x18f)]+_0x14e1a2(0x1a4)]:_0x3019b3[_0x14e1a2(0x1a6)](0x0,0xff),[constants_1[_0x14e1a2(0x18f)]+'Status__c']:'Completed',[constants_1['FLOSUM_GIT_NAMESPACE']+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a130_0x16e2d2(0x17e)](),__metadata(a130_0x16e2d2(0x1a8),[salesforce_query_service_1[a130_0x16e2d2(0x17c)],salesforce_rest_service_1[a130_0x16e2d2(0x195)]])],SalesforceGitSyncService),exports[a130_0x16e2d2(0x1b1)]=SalesforceGitSyncService;