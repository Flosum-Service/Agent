const a130_0xa4bad=a130_0x1a94;(function(_0x5db8d8,_0x506ea7){const _0xca1672=a130_0x1a94,_0x4356e0=_0x5db8d8();while(!![]){try{const _0x383e59=parseInt(_0xca1672(0x1ec))/0x1*(parseInt(_0xca1672(0x1ce))/0x2)+parseInt(_0xca1672(0x1ea))/0x3*(parseInt(_0xca1672(0x1d3))/0x4)+parseInt(_0xca1672(0x20e))/0x5*(-parseInt(_0xca1672(0x209))/0x6)+-parseInt(_0xca1672(0x212))/0x7+parseInt(_0xca1672(0x200))/0x8*(-parseInt(_0xca1672(0x1dd))/0x9)+-parseInt(_0xca1672(0x1fd))/0xa+-parseInt(_0xca1672(0x20f))/0xb*(-parseInt(_0xca1672(0x1d2))/0xc);if(_0x383e59===_0x506ea7)break;else _0x4356e0['push'](_0x4356e0['shift']());}catch(_0x374823){_0x4356e0['push'](_0x4356e0['shift']());}}}(a130_0x30e6,0x21f63));const a130_0x275f99=(function(){let _0x51dd03=!![];return function(_0x45eccc,_0x6bc9f8){const _0x21e1a8=_0x51dd03?function(){const _0x4ca270=a130_0x1a94;if(_0x6bc9f8){const _0x31ec91=_0x6bc9f8[_0x4ca270(0x20c)](_0x45eccc,arguments);return _0x6bc9f8=null,_0x31ec91;}}:function(){};return _0x51dd03=![],_0x21e1a8;};}()),a130_0x41600a=a130_0x275f99(this,function(){const _0x3f0bb6=a130_0x1a94;return a130_0x41600a['toString']()[_0x3f0bb6(0x1d1)](_0x3f0bb6(0x1f9))[_0x3f0bb6(0x1f0)]()['constructor'](a130_0x41600a)[_0x3f0bb6(0x1d1)](_0x3f0bb6(0x1f9));});a130_0x41600a();'use strict';var __decorate=this&&this[a130_0xa4bad(0x1e9)]||function(_0x1a5e0a,_0x28bd40,_0x1cdc1d,_0x40d260){const _0x3f410b=a130_0xa4bad;var _0x3d22a0=arguments[_0x3f410b(0x1d4)],_0x4773f3=_0x3d22a0<0x3?_0x28bd40:_0x40d260===null?_0x40d260=Object[_0x3f410b(0x1d0)](_0x28bd40,_0x1cdc1d):_0x40d260,_0x517470;if(typeof Reflect==='object'&&typeof Reflect[_0x3f410b(0x1cb)]===_0x3f410b(0x1d7))_0x4773f3=Reflect[_0x3f410b(0x1cb)](_0x1a5e0a,_0x28bd40,_0x1cdc1d,_0x40d260);else{for(var _0x43398b=_0x1a5e0a['length']-0x1;_0x43398b>=0x0;_0x43398b--)if(_0x517470=_0x1a5e0a[_0x43398b])_0x4773f3=(_0x3d22a0<0x3?_0x517470(_0x4773f3):_0x3d22a0>0x3?_0x517470(_0x28bd40,_0x1cdc1d,_0x4773f3):_0x517470(_0x28bd40,_0x1cdc1d))||_0x4773f3;}return _0x3d22a0>0x3&&_0x4773f3&&Object['defineProperty'](_0x28bd40,_0x1cdc1d,_0x4773f3),_0x4773f3;},__metadata=this&&this[a130_0xa4bad(0x1e3)]||function(_0x4f0f0f,_0x2fa1ce){const _0x5d7e4a=a130_0xa4bad;if(typeof Reflect===_0x5d7e4a(0x1ef)&&typeof Reflect[_0x5d7e4a(0x1da)]===_0x5d7e4a(0x1d7))return Reflect[_0x5d7e4a(0x1da)](_0x4f0f0f,_0x2fa1ce);};function a130_0x1a94(_0x476f28,_0x574402){const _0x4937bf=a130_0x30e6();return a130_0x1a94=function(_0x41600a,_0x275f99){_0x41600a=_0x41600a-0x1cb;let _0x30e623=_0x4937bf[_0x41600a];return _0x30e623;},a130_0x1a94(_0x476f28,_0x574402);}Object[a130_0xa4bad(0x1f3)](exports,a130_0xa4bad(0x20b),{'value':!![]}),exports[a130_0xa4bad(0x1f5)]=void 0x0;const not_found_error_1=require(a130_0xa4bad(0x1fa)),typedi_1=require(a130_0xa4bad(0x206)),constants_1=require('../../../constants'),queries_1=require('../queries'),flosum_naming_utils_1=require(a130_0xa4bad(0x1cf)),salesforce_query_service_1=require(a130_0xa4bad(0x215)),salesforce_rest_service_1=require(a130_0xa4bad(0x1d6));function a130_0x30e6(){const _0xc86bd8=['replace','Branch\x20\x22','1885860gGFMes','Service','Commit_Name__c','10312zKVamB','fetchCommitManifestsByComponentIds','extractFieldsFromRecord','SalesforceRestService','query','restService','typedi','%componentIds%','Name','342KkAgpz','map','__esModule','apply','getComponentRecordTypes','4835aZbCsd','461791KrqXHs','\x22\x20not\x20found\x20in\x20flosum.','push','1801870xivKpU','FLOSUM_GIT_NAMESPACE','Is_From_Agent__c','./salesforce-query.service','decorate','queryService','join','2xgpfiE','../utils/flosum-naming.utils','getOwnPropertyDescriptor','search','96qdNxYT','824188ygEguC','length','Completed','./salesforce-rest.service','function','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','Component_Name__c','metadata','%fileNames%','File_Name__c','171lWTXpE','extractComponentMetadataFromRecord','%branchId%','substr','GET_REPOSITORY_COMPONENTS_QUERY','%name%','__metadata','GET_COMPONENT_RECORD_TYPES_QUERY','splice','fetchRepositoryComponentsByFilenames','Version__c','Component_Type__c','__decorate','3mdxtaN','GET_BRANCH_BY_NAME_QUERY','122818DWduTM','GET_REPOSITORY_BY_NAME_QUERY','MAX_QUERY_ARRAY_ITEMS','object','toString','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','GET_BRANCH_COMPONENTS_QUERY','defineProperty','CRC32__c','SalesforceGitSyncService','createCommit','FLOSUM_NAMESPACE','NotFoundError','(((.+)+)+)+$','../../../core/errors/not-found.error'];a130_0x30e6=function(){return _0xc86bd8;};return a130_0x30e6();}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x431d93,_0x28b681){const _0x3513c5=a130_0xa4bad;this[_0x3513c5(0x1cc)]=_0x431d93,this[_0x3513c5(0x205)]=_0x28b681,this[_0x3513c5(0x1ee)]=0xc8;}[a130_0xa4bad(0x1de)](_0x2a36a6){const _0x21d5d5=a130_0xa4bad,_0x57b7ff=flosum_naming_utils_1['extractFieldsFromRecord'](_0x2a36a6,[_0x21d5d5(0x1d9),_0x21d5d5(0x1e8),_0x21d5d5(0x1f4),_0x21d5d5(0x1dc),_0x21d5d5(0x1e7),'Id']);return{'id':_0x57b7ff['Id'],'name':_0x57b7ff[_0x21d5d5(0x1d9)],'type':_0x57b7ff[_0x21d5d5(0x1e8)],'fileName':_0x57b7ff[_0x21d5d5(0x1dc)],'crc32':_0x57b7ff[_0x21d5d5(0x1f4)],'version':+_0x57b7ff['Version__c']};}async['getRepositoryIdByName'](_0x3d78a5){const _0x44ed07=a130_0xa4bad,[_0x45dc59]=await this[_0x44ed07(0x1cc)][_0x44ed07(0x204)](queries_1[_0x44ed07(0x1ed)]['replace'](_0x44ed07(0x1e2),_0x3d78a5));if(!_0x45dc59)throw new not_found_error_1[(_0x44ed07(0x1f8))]('Repository\x20\x22'+_0x3d78a5+_0x44ed07(0x210));return _0x45dc59['Id'];}async['getBranchIdByName'](_0x3fea49){const _0x5118c6=a130_0xa4bad,[_0x3c4ea9]=await this[_0x5118c6(0x1cc)][_0x5118c6(0x204)](queries_1[_0x5118c6(0x1eb)][_0x5118c6(0x1fb)](_0x5118c6(0x1e2),_0x3fea49));if(!_0x3c4ea9)throw new not_found_error_1[(_0x5118c6(0x1f8))](_0x5118c6(0x1fc)+_0x3fea49+_0x5118c6(0x210));return _0x3c4ea9['Id'];}async[a130_0xa4bad(0x20d)](){const _0x417f24=a130_0xa4bad,_0x4d25bb=await this[_0x417f24(0x1cc)][_0x417f24(0x204)](queries_1[_0x417f24(0x1e4)]);return _0x4d25bb[_0x417f24(0x20a)](_0x326c5e=>flosum_naming_utils_1[_0x417f24(0x202)](_0x326c5e,['Id',_0x417f24(0x208)]))['map'](_0xbce4b4=>({'id':_0xbce4b4['Id'],'name':_0xbce4b4[_0x417f24(0x208)]}));}async[a130_0xa4bad(0x1e6)](_0x2209a3,_0x526198){const _0x1ccda6=a130_0xa4bad,_0x42e59d=[];while(_0x2209a3[_0x1ccda6(0x1d4)]){const _0x4e0f66=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x1ccda6(0x1fb)](_0x1ccda6(0x1db),_0x2209a3[_0x1ccda6(0x1e5)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x1ccda6(0x20a)](_0x2c1377=>'\x27'+_0x2c1377+'\x27')[_0x1ccda6(0x1cd)](','))['replace']('%repositoryId%',_0x526198),_0x5471f2=await this[_0x1ccda6(0x1cc)][_0x1ccda6(0x204)](_0x4e0f66);_0x42e59d[_0x1ccda6(0x211)](..._0x5471f2);}return _0x42e59d[_0x1ccda6(0x20a)](_0x23e75f=>this[_0x1ccda6(0x1de)](_0x23e75f));}async['fetchBranchComponentsByFilenames'](_0x4f1132,_0x5d83b3){const _0x42deca=a130_0xa4bad,_0x909a3a=[];while(_0x4f1132[_0x42deca(0x1d4)]){const _0xe81e18=queries_1[_0x42deca(0x1f1)]['replace'](_0x42deca(0x1db),_0x4f1132[_0x42deca(0x1e5)](0x0,this[_0x42deca(0x1ee)])[_0x42deca(0x20a)](_0x57e1be=>'\x27'+_0x57e1be+'\x27')[_0x42deca(0x1cd)](','))[_0x42deca(0x1fb)](_0x42deca(0x1df),_0x5d83b3),_0x111023=await this[_0x42deca(0x1cc)]['query'](_0xe81e18);_0x909a3a[_0x42deca(0x211)](..._0x111023);}return _0x909a3a[_0x42deca(0x20a)](_0x1ea621=>this[_0x42deca(0x1de)](_0x1ea621));}async['fetchRepositoryComponents'](_0x5184d4){const _0x52cd8c=a130_0xa4bad,_0x59fb70=[],_0x39a364=queries_1[_0x52cd8c(0x1e1)]['replace']('%repositoryId%',_0x5184d4),_0x115d7e=await this[_0x52cd8c(0x1cc)][_0x52cd8c(0x204)](_0x39a364);return _0x59fb70[_0x52cd8c(0x211)](..._0x115d7e),_0x59fb70[_0x52cd8c(0x20a)](_0x5800b4=>this['extractComponentMetadataFromRecord'](_0x5800b4));}async['fetchBranchComponents'](_0x20ff5d){const _0x3323f9=a130_0xa4bad,_0xb1eb06=[],_0x151b4d=queries_1[_0x3323f9(0x1f2)][_0x3323f9(0x1fb)]('%branchId%',_0x20ff5d),_0x484f68=await this[_0x3323f9(0x1cc)][_0x3323f9(0x204)](_0x151b4d);return _0xb1eb06[_0x3323f9(0x211)](..._0x484f68),_0xb1eb06[_0x3323f9(0x20a)](_0x1e983e=>this['extractComponentMetadataFromRecord'](_0x1e983e));}async[a130_0xa4bad(0x201)](_0x470d80){const _0x28033=a130_0xa4bad,_0x146274=[..._0x470d80],_0x2ead7b=[];while(_0x146274[_0x28033(0x1d4)]){const _0x49cf57=queries_1[_0x28033(0x1d8)][_0x28033(0x1fb)](_0x28033(0x207),_0x146274['splice'](0x0,this[_0x28033(0x1ee)])[_0x28033(0x20a)](_0x2c002f=>'\x27'+_0x2c002f+'\x27')[_0x28033(0x1cd)](',')),_0x25fe3f=await this[_0x28033(0x1cc)]['query'](_0x49cf57);_0x2ead7b[_0x28033(0x211)](..._0x25fe3f[_0x28033(0x20a)](_0x482494=>_0x482494['Id']));}return _0x2ead7b;}async[a130_0xa4bad(0x1f6)](_0x204581,_0x225e8a){const _0x193a4b=a130_0xa4bad;return this[_0x193a4b(0x205)]['post'](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x193a4b(0x1f7)]+'Repository__c']:_0x225e8a,[constants_1[_0x193a4b(0x1f7)]+_0x193a4b(0x1ff)]:_0x204581[_0x193a4b(0x1e0)](0x0,0xff),[constants_1[_0x193a4b(0x1f7)]+'Status__c']:_0x193a4b(0x1d5),[constants_1[_0x193a4b(0x213)]+_0x193a4b(0x214)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a130_0xa4bad(0x1fe)](),__metadata('design:paramtypes',[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a130_0xa4bad(0x203)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;