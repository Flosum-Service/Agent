const a129_0x5dc47a=a129_0x5df8;(function(_0x70b406,_0x1d0951){const _0x54cd3e=a129_0x5df8,_0x4a01c0=_0x70b406();while(!![]){try{const _0x37d2b8=-parseInt(_0x54cd3e(0x177))/0x1+-parseInt(_0x54cd3e(0x18d))/0x2*(-parseInt(_0x54cd3e(0x164))/0x3)+parseInt(_0x54cd3e(0x173))/0x4*(parseInt(_0x54cd3e(0x1ab))/0x5)+-parseInt(_0x54cd3e(0x198))/0x6*(-parseInt(_0x54cd3e(0x1aa))/0x7)+-parseInt(_0x54cd3e(0x178))/0x8+-parseInt(_0x54cd3e(0x185))/0x9+parseInt(_0x54cd3e(0x174))/0xa;if(_0x37d2b8===_0x1d0951)break;else _0x4a01c0['push'](_0x4a01c0['shift']());}catch(_0x5b68fb){_0x4a01c0['push'](_0x4a01c0['shift']());}}}(a129_0x35e6,0xd23c0));const a129_0x290a69=(function(){let _0x375a41=!![];return function(_0x38bb33,_0x20f230){const _0x2fe382=_0x375a41?function(){const _0x373aa3=a129_0x5df8;if(_0x20f230){const _0x44bbce=_0x20f230[_0x373aa3(0x181)](_0x38bb33,arguments);return _0x20f230=null,_0x44bbce;}}:function(){};return _0x375a41=![],_0x2fe382;};}()),a129_0x2aeaeb=a129_0x290a69(this,function(){const _0x1f67a3=a129_0x5df8;return a129_0x2aeaeb[_0x1f67a3(0x194)]()[_0x1f67a3(0x17b)]('(((.+)+)+)+$')['toString']()[_0x1f67a3(0x16a)](a129_0x2aeaeb)[_0x1f67a3(0x17b)](_0x1f67a3(0x1a6));});function a129_0x5df8(_0xa65a11,_0x5df195){const _0x325005=a129_0x35e6();return a129_0x5df8=function(_0x2aeaeb,_0x290a69){_0x2aeaeb=_0x2aeaeb-0x160;let _0x35e69f=_0x325005[_0x2aeaeb];return _0x35e69f;},a129_0x5df8(_0xa65a11,_0x5df195);}a129_0x2aeaeb();'use strict';var __decorate=this&&this[a129_0x5dc47a(0x193)]||function(_0x4287ae,_0x28380d,_0x13ad8e,_0x32ef1c){const _0x4e8cec=a129_0x5dc47a;var _0x3c5667=arguments[_0x4e8cec(0x16b)],_0x1212e0=_0x3c5667<0x3?_0x28380d:_0x32ef1c===null?_0x32ef1c=Object[_0x4e8cec(0x165)](_0x28380d,_0x13ad8e):_0x32ef1c,_0xe6aa8a;if(typeof Reflect===_0x4e8cec(0x1a0)&&typeof Reflect[_0x4e8cec(0x19b)]==='function')_0x1212e0=Reflect[_0x4e8cec(0x19b)](_0x4287ae,_0x28380d,_0x13ad8e,_0x32ef1c);else{for(var _0x520a26=_0x4287ae[_0x4e8cec(0x16b)]-0x1;_0x520a26>=0x0;_0x520a26--)if(_0xe6aa8a=_0x4287ae[_0x520a26])_0x1212e0=(_0x3c5667<0x3?_0xe6aa8a(_0x1212e0):_0x3c5667>0x3?_0xe6aa8a(_0x28380d,_0x13ad8e,_0x1212e0):_0xe6aa8a(_0x28380d,_0x13ad8e))||_0x1212e0;}return _0x3c5667>0x3&&_0x1212e0&&Object[_0x4e8cec(0x180)](_0x28380d,_0x13ad8e,_0x1212e0),_0x1212e0;},__metadata=this&&this[a129_0x5dc47a(0x182)]||function(_0x418476,_0x5f167e){const _0x53d48b=a129_0x5dc47a;if(typeof Reflect===_0x53d48b(0x1a0)&&typeof Reflect[_0x53d48b(0x19d)]===_0x53d48b(0x19f))return Reflect[_0x53d48b(0x19d)](_0x418476,_0x5f167e);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a129_0x5dc47a(0x16f)]=void 0x0;const not_found_error_1=require('../../../core/errors/not-found.error'),typedi_1=require(a129_0x5dc47a(0x169)),constants_1=require(a129_0x5dc47a(0x188)),queries_1=require(a129_0x5dc47a(0x1a2)),flosum_naming_utils_1=require(a129_0x5dc47a(0x1a7)),salesforce_query_service_1=require(a129_0x5dc47a(0x17d)),salesforce_rest_service_1=require(a129_0x5dc47a(0x197));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x12a165,_0x170fff){const _0x49fc2b=a129_0x5dc47a;this['queryService']=_0x12a165,this[_0x49fc2b(0x161)]=_0x170fff,this[_0x49fc2b(0x19e)]=0xc8;}[a129_0x5dc47a(0x192)](_0x15e840){const _0x414e6a=a129_0x5dc47a,_0x38c616=flosum_naming_utils_1[_0x414e6a(0x1a8)](_0x15e840,[_0x414e6a(0x18b),_0x414e6a(0x190),_0x414e6a(0x1a4),'File_Name__c',_0x414e6a(0x186),'Id']);return{'id':_0x38c616['Id'],'name':_0x38c616[_0x414e6a(0x18b)],'type':_0x38c616['Component_Type__c'],'fileName':_0x38c616[_0x414e6a(0x179)],'crc32':_0x38c616[_0x414e6a(0x1a4)],'version':+_0x38c616[_0x414e6a(0x186)]};}async[a129_0x5dc47a(0x160)](_0x437936){const _0x30f872=a129_0x5dc47a,[_0x3c0513]=await this[_0x30f872(0x19c)]['query'](queries_1[_0x30f872(0x16d)]['replace'](_0x30f872(0x18c),_0x437936));if(!_0x3c0513)throw new not_found_error_1[(_0x30f872(0x1a3))](_0x30f872(0x16c)+_0x437936+_0x30f872(0x195));return _0x3c0513['Id'];}async['getBranchIdByName'](_0x5949f6){const _0x3a6fbb=a129_0x5dc47a,[_0x63cd10]=await this[_0x3a6fbb(0x19c)][_0x3a6fbb(0x166)](queries_1[_0x3a6fbb(0x1a9)]['replace'](_0x3a6fbb(0x18c),_0x5949f6));if(!_0x63cd10)throw new not_found_error_1[(_0x3a6fbb(0x1a3))](_0x3a6fbb(0x187)+_0x5949f6+_0x3a6fbb(0x195));return _0x63cd10['Id'];}async[a129_0x5dc47a(0x168)](){const _0x28cac5=a129_0x5dc47a,_0x454d27=await this[_0x28cac5(0x19c)][_0x28cac5(0x166)](queries_1[_0x28cac5(0x176)]);return _0x454d27[_0x28cac5(0x1a5)](_0x1a716c=>flosum_naming_utils_1['extractFieldsFromRecord'](_0x1a716c,['Id',_0x28cac5(0x163)]))[_0x28cac5(0x1a5)](_0x5dc2e2=>({'id':_0x5dc2e2['Id'],'name':_0x5dc2e2['Name']}));}async[a129_0x5dc47a(0x19a)](_0x380db1,_0x388a9c){const _0x34ec07=a129_0x5dc47a,_0x44ebe0=[];while(_0x380db1[_0x34ec07(0x16b)]){const _0xb4f251=queries_1[_0x34ec07(0x196)]['replace'](_0x34ec07(0x17c),_0x380db1[_0x34ec07(0x199)](0x0,this[_0x34ec07(0x19e)])[_0x34ec07(0x1a5)](_0x3ffa38=>'\x27'+_0x3ffa38+'\x27')[_0x34ec07(0x17e)](','))['replace'](_0x34ec07(0x175),_0x388a9c),_0x38bd13=await this[_0x34ec07(0x19c)][_0x34ec07(0x166)](_0xb4f251);_0x44ebe0[_0x34ec07(0x1a1)](..._0x38bd13);}return _0x44ebe0['map'](_0x35728e=>this[_0x34ec07(0x192)](_0x35728e));}async[a129_0x5dc47a(0x170)](_0x50f1a8,_0x3c47ae){const _0x168eb1=a129_0x5dc47a,_0x1ec1af=[];while(_0x50f1a8[_0x168eb1(0x16b)]){const _0x1708c0=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY']['replace']('%fileNames%',_0x50f1a8['splice'](0x0,this[_0x168eb1(0x19e)])[_0x168eb1(0x1a5)](_0x11eaae=>'\x27'+_0x11eaae+'\x27')[_0x168eb1(0x17e)](','))[_0x168eb1(0x167)](_0x168eb1(0x18f),_0x3c47ae),_0x1cb8e2=await this[_0x168eb1(0x19c)][_0x168eb1(0x166)](_0x1708c0);_0x1ec1af[_0x168eb1(0x1a1)](..._0x1cb8e2);}return _0x1ec1af[_0x168eb1(0x1a5)](_0x292ff4=>this[_0x168eb1(0x192)](_0x292ff4));}async['fetchRepositoryComponents'](_0x384a8f){const _0x4b6106=a129_0x5dc47a,_0x35312f=[],_0x4fbd04=queries_1[_0x4b6106(0x18a)][_0x4b6106(0x167)](_0x4b6106(0x175),_0x384a8f),_0x3fdbe8=await this[_0x4b6106(0x19c)][_0x4b6106(0x166)](_0x4fbd04);return _0x35312f[_0x4b6106(0x1a1)](..._0x3fdbe8),_0x35312f[_0x4b6106(0x1a5)](_0x246228=>this[_0x4b6106(0x192)](_0x246228));}async['fetchBranchComponents'](_0x2c28aa){const _0x5ec8a7=a129_0x5dc47a,_0x532de6=[],_0x269022=queries_1[_0x5ec8a7(0x17a)][_0x5ec8a7(0x167)](_0x5ec8a7(0x18f),_0x2c28aa),_0x4677d8=await this[_0x5ec8a7(0x19c)]['query'](_0x269022);return _0x532de6[_0x5ec8a7(0x1a1)](..._0x4677d8),_0x532de6[_0x5ec8a7(0x1a5)](_0x18ea90=>this[_0x5ec8a7(0x192)](_0x18ea90));}async['fetchCommitManifestsByComponentIds'](_0x211009){const _0x227794=a129_0x5dc47a,_0x5e6d35=[..._0x211009],_0x337fb3=[];while(_0x5e6d35[_0x227794(0x16b)]){const _0x9f8e6d=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS']['replace'](_0x227794(0x189),_0x5e6d35[_0x227794(0x199)](0x0,this[_0x227794(0x19e)])[_0x227794(0x1a5)](_0xd14cff=>'\x27'+_0xd14cff+'\x27')[_0x227794(0x17e)](',')),_0x37fb0e=await this[_0x227794(0x19c)][_0x227794(0x166)](_0x9f8e6d);_0x337fb3[_0x227794(0x1a1)](..._0x37fb0e[_0x227794(0x1a5)](_0x1fcccc=>_0x1fcccc['Id']));}return _0x337fb3;}async[a129_0x5dc47a(0x162)](_0x3bd4e7,_0x319112){const _0x1e8276=a129_0x5dc47a;return this[_0x1e8276(0x161)]['post'](constants_1[_0x1e8276(0x171)],{[constants_1[_0x1e8276(0x172)]+'Repository__c']:_0x319112,[constants_1[_0x1e8276(0x172)]+'Commit_Name__c']:_0x3bd4e7[_0x1e8276(0x191)](0x0,0xff),[constants_1[_0x1e8276(0x172)]+'Status__c']:'Completed',[constants_1[_0x1e8276(0x183)]+_0x1e8276(0x16e)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a129_0x5dc47a(0x17f)](),__metadata('design:paramtypes',[salesforce_query_service_1[a129_0x5dc47a(0x184)],salesforce_rest_service_1[a129_0x5dc47a(0x18e)]])],SalesforceGitSyncService),exports[a129_0x5dc47a(0x16f)]=SalesforceGitSyncService;function a129_0x35e6(){const _0x28919c=['__decorate','toString','\x22\x20not\x20found\x20in\x20flosum.','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','./salesforce-rest.service','5750076aQIgta','splice','fetchRepositoryComponentsByFilenames','decorate','queryService','metadata','MAX_QUERY_ARRAY_ITEMS','function','object','push','../queries','NotFoundError','CRC32__c','map','(((.+)+)+)+$','../utils/flosum-naming.utils','extractFieldsFromRecord','GET_BRANCH_BY_NAME_QUERY','7wjhaxh','1935jJyvJs','getRepositoryIdByName','restService','createCommit','Name','426183jimDqx','getOwnPropertyDescriptor','query','replace','getComponentRecordTypes','typedi','constructor','length','Repository\x20\x22','GET_REPOSITORY_BY_NAME_QUERY','Is_From_Agent__c','SalesforceGitSyncService','fetchBranchComponentsByFilenames','FLOSUM_COMMIT','FLOSUM_NAMESPACE','4636zQPjCy','15813830fgwMes','%repositoryId%','GET_COMPONENT_RECORD_TYPES_QUERY','1497621qchcbE','11782128JMNqVk','File_Name__c','GET_BRANCH_COMPONENTS_QUERY','search','%fileNames%','./salesforce-query.service','join','Service','defineProperty','apply','__metadata','FLOSUM_GIT_NAMESPACE','SalesforceQueryService','7753383JhnWoU','Version__c','Branch\x20\x22','../../../constants','%componentIds%','GET_REPOSITORY_COMPONENTS_QUERY','Component_Name__c','%name%','24vDZVDA','SalesforceRestService','%branchId%','Component_Type__c','substr','extractComponentMetadataFromRecord'];a129_0x35e6=function(){return _0x28919c;};return a129_0x35e6();}