const a129_0x333442=a129_0x5730;(function(_0x5e93e8,_0x5c52c9){const _0x253385=a129_0x5730,_0x4db920=_0x5e93e8();while(!![]){try{const _0x1b7620=-parseInt(_0x253385(0x17a))/0x1*(-parseInt(_0x253385(0x1a9))/0x2)+parseInt(_0x253385(0x174))/0x3*(-parseInt(_0x253385(0x196))/0x4)+parseInt(_0x253385(0x1ab))/0x5*(-parseInt(_0x253385(0x164))/0x6)+parseInt(_0x253385(0x188))/0x7*(parseInt(_0x253385(0x185))/0x8)+parseInt(_0x253385(0x16a))/0x9*(parseInt(_0x253385(0x183))/0xa)+parseInt(_0x253385(0x1a3))/0xb+parseInt(_0x253385(0x19a))/0xc*(-parseInt(_0x253385(0x184))/0xd);if(_0x1b7620===_0x5c52c9)break;else _0x4db920['push'](_0x4db920['shift']());}catch(_0x4091db){_0x4db920['push'](_0x4db920['shift']());}}}(a129_0x515f,0xaeaa0));const a129_0x47ee92=(function(){let _0x5ad8e8=!![];return function(_0x2fdde5,_0x4741d9){const _0x31e274=_0x5ad8e8?function(){const _0x56e744=a129_0x5730;if(_0x4741d9){const _0x451703=_0x4741d9[_0x56e744(0x194)](_0x2fdde5,arguments);return _0x4741d9=null,_0x451703;}}:function(){};return _0x5ad8e8=![],_0x31e274;};}()),a129_0x5d01d1=a129_0x47ee92(this,function(){const _0x187cf1=a129_0x5730;return a129_0x5d01d1[_0x187cf1(0x18c)]()[_0x187cf1(0x1aa)](_0x187cf1(0x198))['toString']()[_0x187cf1(0x18f)](a129_0x5d01d1)[_0x187cf1(0x1aa)](_0x187cf1(0x198));});a129_0x5d01d1();'use strict';function a129_0x5730(_0x5f5c3f,_0x2fa998){const _0x1a027e=a129_0x515f();return a129_0x5730=function(_0x5d01d1,_0x47ee92){_0x5d01d1=_0x5d01d1-0x159;let _0x515f5f=_0x1a027e[_0x5d01d1];return _0x515f5f;},a129_0x5730(_0x5f5c3f,_0x2fa998);}function a129_0x515f(){const _0x1fba85=['length','__metadata','../../../constants','87273aSHowy','function','__decorate','SalesforceQueryService','Commit_Name__c','Service','design:paramtypes','NotFoundError','Status__c','10ojQXrS','52949BLmnWV','8QWDmoC','query','%branchId%','8612324yiVWrd','../../../core/errors/not-found.error','FLOSUM_COMMIT','extractFieldsFromRecord','toString','File_Name__c','splice','constructor','post','./salesforce-query.service','GET_COMPONENT_RECORD_TYPES_QUERY','map','apply','Component_Name__c','3048292mzDBsi','Repository__c','(((.+)+)+)+$','typedi','1464IgcYPt','fetchRepositoryComponentsByFilenames','\x22\x20not\x20found\x20in\x20flosum.','GET_REPOSITORY_BY_NAME_QUERY','join','GET_BRANCH_COMPONENTS_QUERY','substr','fetchBranchComponents','object','1282886uGIocd','Repository\x20\x22','Is_From_Agent__c','fetchRepositoryComponents','SalesforceRestService','%name%','2QldPLu','search','365ONqdog','fetchBranchComponentsByFilenames','Name','extractComponentMetadataFromRecord','%fileNames%','CRC32__c','Branch\x20\x22','FLOSUM_NAMESPACE','defineProperty','getComponentRecordTypes','FLOSUM_GIT_NAMESPACE','getBranchIdByName','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','Version__c','27582EFIfgc','fetchCommitManifestsByComponentIds','queryService','decorate','GET_BRANCH_BY_NAME_QUERY','replace','7881777wVatBe','%repositoryId%','restService','push','GET_REPOSITORY_COMPONENTS_QUERY','../queries','createCommit','../utils/flosum-naming.utils','MAX_QUERY_ARRAY_ITEMS','getRepositoryIdByName','3EuGmot','%componentIds%','Component_Type__c'];a129_0x515f=function(){return _0x1fba85;};return a129_0x515f();}var __decorate=this&&this[a129_0x333442(0x17c)]||function(_0xe22c27,_0x1aa0e9,_0x71d136,_0x200f0c){const _0x16fb25=a129_0x333442;var _0xd15dc=arguments[_0x16fb25(0x177)],_0x15d26d=_0xd15dc<0x3?_0x1aa0e9:_0x200f0c===null?_0x200f0c=Object['getOwnPropertyDescriptor'](_0x1aa0e9,_0x71d136):_0x200f0c,_0x53713f;if(typeof Reflect===_0x16fb25(0x1a2)&&typeof Reflect[_0x16fb25(0x167)]===_0x16fb25(0x17b))_0x15d26d=Reflect[_0x16fb25(0x167)](_0xe22c27,_0x1aa0e9,_0x71d136,_0x200f0c);else{for(var _0x24bb26=_0xe22c27[_0x16fb25(0x177)]-0x1;_0x24bb26>=0x0;_0x24bb26--)if(_0x53713f=_0xe22c27[_0x24bb26])_0x15d26d=(_0xd15dc<0x3?_0x53713f(_0x15d26d):_0xd15dc>0x3?_0x53713f(_0x1aa0e9,_0x71d136,_0x15d26d):_0x53713f(_0x1aa0e9,_0x71d136))||_0x15d26d;}return _0xd15dc>0x3&&_0x15d26d&&Object[_0x16fb25(0x15e)](_0x1aa0e9,_0x71d136,_0x15d26d),_0x15d26d;},__metadata=this&&this[a129_0x333442(0x178)]||function(_0x5c8803,_0x42058f){const _0x5384f8=a129_0x333442;if(typeof Reflect===_0x5384f8(0x1a2)&&typeof Reflect['metadata']===_0x5384f8(0x17b))return Reflect['metadata'](_0x5c8803,_0x42058f);};Object[a129_0x333442(0x15e)](exports,'__esModule',{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a129_0x333442(0x189)),typedi_1=require(a129_0x333442(0x199)),constants_1=require(a129_0x333442(0x179)),queries_1=require(a129_0x333442(0x16f)),flosum_naming_utils_1=require(a129_0x333442(0x171)),salesforce_query_service_1=require(a129_0x333442(0x191)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x47497d,_0x11d33e){const _0x3e8dc1=a129_0x333442;this[_0x3e8dc1(0x166)]=_0x47497d,this['restService']=_0x11d33e,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a129_0x333442(0x159)](_0x2647f2){const _0x51bb35=a129_0x333442,_0x229d97=flosum_naming_utils_1['extractFieldsFromRecord'](_0x2647f2,[_0x51bb35(0x195),_0x51bb35(0x176),_0x51bb35(0x15b),_0x51bb35(0x18d),'Version__c','Id']);return{'id':_0x229d97['Id'],'name':_0x229d97['Component_Name__c'],'type':_0x229d97[_0x51bb35(0x176)],'fileName':_0x229d97['File_Name__c'],'crc32':_0x229d97[_0x51bb35(0x15b)],'version':+_0x229d97[_0x51bb35(0x163)]};}async[a129_0x333442(0x173)](_0x4ab94b){const _0xe7af4=a129_0x333442,[_0x105e39]=await this['queryService']['query'](queries_1[_0xe7af4(0x19d)][_0xe7af4(0x169)](_0xe7af4(0x1a8),_0x4ab94b));if(!_0x105e39)throw new not_found_error_1['NotFoundError'](_0xe7af4(0x1a4)+_0x4ab94b+_0xe7af4(0x19c));return _0x105e39['Id'];}async[a129_0x333442(0x161)](_0x3044be){const _0x3f606c=a129_0x333442,[_0x2734e6]=await this[_0x3f606c(0x166)][_0x3f606c(0x186)](queries_1[_0x3f606c(0x168)][_0x3f606c(0x169)](_0x3f606c(0x1a8),_0x3044be));if(!_0x2734e6)throw new not_found_error_1[(_0x3f606c(0x181))](_0x3f606c(0x15c)+_0x3044be+_0x3f606c(0x19c));return _0x2734e6['Id'];}async[a129_0x333442(0x15f)](){const _0x4d81a2=a129_0x333442,_0x4dfa45=await this[_0x4d81a2(0x166)]['query'](queries_1[_0x4d81a2(0x192)]);return _0x4dfa45[_0x4d81a2(0x193)](_0xf666aa=>flosum_naming_utils_1[_0x4d81a2(0x18b)](_0xf666aa,['Id',_0x4d81a2(0x1ad)]))[_0x4d81a2(0x193)](_0x2dc3fb=>({'id':_0x2dc3fb['Id'],'name':_0x2dc3fb[_0x4d81a2(0x1ad)]}));}async[a129_0x333442(0x19b)](_0x164a0c,_0x5ea5b0){const _0x26ccf2=a129_0x333442,_0x3a10a7=[];while(_0x164a0c[_0x26ccf2(0x177)]){const _0x4bcc64=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x26ccf2(0x169)](_0x26ccf2(0x15a),_0x164a0c[_0x26ccf2(0x18e)](0x0,this[_0x26ccf2(0x172)])[_0x26ccf2(0x193)](_0x50d1cc=>'\x27'+_0x50d1cc+'\x27')[_0x26ccf2(0x19e)](','))[_0x26ccf2(0x169)](_0x26ccf2(0x16b),_0x5ea5b0),_0x379661=await this[_0x26ccf2(0x166)][_0x26ccf2(0x186)](_0x4bcc64);_0x3a10a7[_0x26ccf2(0x16d)](..._0x379661);}return _0x3a10a7[_0x26ccf2(0x193)](_0x404a42=>this[_0x26ccf2(0x159)](_0x404a42));}async[a129_0x333442(0x1ac)](_0x2bafe6,_0xd049c){const _0x11cff8=a129_0x333442,_0x1d2f13=[];while(_0x2bafe6[_0x11cff8(0x177)]){const _0x14ba5e=queries_1[_0x11cff8(0x162)][_0x11cff8(0x169)](_0x11cff8(0x15a),_0x2bafe6['splice'](0x0,this[_0x11cff8(0x172)])[_0x11cff8(0x193)](_0x40428d=>'\x27'+_0x40428d+'\x27')[_0x11cff8(0x19e)](','))[_0x11cff8(0x169)](_0x11cff8(0x187),_0xd049c),_0x3cf478=await this[_0x11cff8(0x166)][_0x11cff8(0x186)](_0x14ba5e);_0x1d2f13[_0x11cff8(0x16d)](..._0x3cf478);}return _0x1d2f13['map'](_0x34b0f5=>this['extractComponentMetadataFromRecord'](_0x34b0f5));}async[a129_0x333442(0x1a6)](_0x175e33){const _0x550770=a129_0x333442,_0x4648e3=[],_0x52bc42=queries_1[_0x550770(0x16e)][_0x550770(0x169)]('%repositoryId%',_0x175e33),_0x5b93c4=await this['queryService']['query'](_0x52bc42);return _0x4648e3[_0x550770(0x16d)](..._0x5b93c4),_0x4648e3[_0x550770(0x193)](_0x44ced0=>this[_0x550770(0x159)](_0x44ced0));}async[a129_0x333442(0x1a1)](_0x5ddf14){const _0x5d7eb8=a129_0x333442,_0x4d466e=[],_0x4024d8=queries_1[_0x5d7eb8(0x19f)][_0x5d7eb8(0x169)]('%branchId%',_0x5ddf14),_0x53d9e6=await this[_0x5d7eb8(0x166)][_0x5d7eb8(0x186)](_0x4024d8);return _0x4d466e[_0x5d7eb8(0x16d)](..._0x53d9e6),_0x4d466e[_0x5d7eb8(0x193)](_0x29892b=>this[_0x5d7eb8(0x159)](_0x29892b));}async[a129_0x333442(0x165)](_0x19d53a){const _0xedb16c=a129_0x333442,_0x14d01c=[..._0x19d53a],_0x23ada3=[];while(_0x14d01c[_0xedb16c(0x177)]){const _0x4648e9=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS']['replace'](_0xedb16c(0x175),_0x14d01c[_0xedb16c(0x18e)](0x0,this[_0xedb16c(0x172)])[_0xedb16c(0x193)](_0x4571b3=>'\x27'+_0x4571b3+'\x27')[_0xedb16c(0x19e)](',')),_0x3f3ea8=await this[_0xedb16c(0x166)][_0xedb16c(0x186)](_0x4648e9);_0x23ada3[_0xedb16c(0x16d)](..._0x3f3ea8[_0xedb16c(0x193)](_0x3ab6fe=>_0x3ab6fe['Id']));}return _0x23ada3;}async[a129_0x333442(0x170)](_0x4643b5,_0x5dcdde){const _0x2f87a6=a129_0x333442;return this[_0x2f87a6(0x16c)][_0x2f87a6(0x190)](constants_1[_0x2f87a6(0x18a)],{[constants_1[_0x2f87a6(0x15d)]+_0x2f87a6(0x197)]:_0x5dcdde,[constants_1['FLOSUM_NAMESPACE']+_0x2f87a6(0x17e)]:_0x4643b5[_0x2f87a6(0x1a0)](0x0,0xff),[constants_1[_0x2f87a6(0x15d)]+_0x2f87a6(0x182)]:'Completed',[constants_1[_0x2f87a6(0x160)]+_0x2f87a6(0x1a5)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a129_0x333442(0x17f)](),__metadata(a129_0x333442(0x180),[salesforce_query_service_1[a129_0x333442(0x17d)],salesforce_rest_service_1[a129_0x333442(0x1a7)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;