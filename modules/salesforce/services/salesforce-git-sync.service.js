const a130_0x24a5c7=a130_0x334c;(function(_0x344fd5,_0x4d7da5){const _0x2563b9=a130_0x334c,_0x54ab18=_0x344fd5();while(!![]){try{const _0x1567c3=-parseInt(_0x2563b9(0x149))/0x1+parseInt(_0x2563b9(0x122))/0x2+-parseInt(_0x2563b9(0x162))/0x3*(parseInt(_0x2563b9(0x12f))/0x4)+parseInt(_0x2563b9(0x13d))/0x5*(parseInt(_0x2563b9(0x11b))/0x6)+parseInt(_0x2563b9(0x159))/0x7+parseInt(_0x2563b9(0x130))/0x8+-parseInt(_0x2563b9(0x14d))/0x9*(parseInt(_0x2563b9(0x14e))/0xa);if(_0x1567c3===_0x4d7da5)break;else _0x54ab18['push'](_0x54ab18['shift']());}catch(_0x2ff74e){_0x54ab18['push'](_0x54ab18['shift']());}}}(a130_0x38bd,0x5fd1c));const a130_0x47ffd1=(function(){let _0x4c88db=!![];return function(_0x4f5a83,_0x44beca){const _0x5472eb=_0x4c88db?function(){const _0x4ea724=a130_0x334c;if(_0x44beca){const _0x413bb6=_0x44beca[_0x4ea724(0x163)](_0x4f5a83,arguments);return _0x44beca=null,_0x413bb6;}}:function(){};return _0x4c88db=![],_0x5472eb;};}()),a130_0x4aaef1=a130_0x47ffd1(this,function(){const _0x50958d=a130_0x334c;return a130_0x4aaef1[_0x50958d(0x161)]()['search'](_0x50958d(0x136))[_0x50958d(0x161)]()[_0x50958d(0x164)](a130_0x4aaef1)[_0x50958d(0x118)](_0x50958d(0x136));});a130_0x4aaef1();'use strict';var __decorate=this&&this[a130_0x24a5c7(0x12e)]||function(_0x316fff,_0x49a0c3,_0x325170,_0x50f86e){const _0x520740=a130_0x24a5c7;var _0x3c55e5=arguments['length'],_0x1ae99f=_0x3c55e5<0x3?_0x49a0c3:_0x50f86e===null?_0x50f86e=Object[_0x520740(0x150)](_0x49a0c3,_0x325170):_0x50f86e,_0xed890f;if(typeof Reflect===_0x520740(0x14a)&&typeof Reflect[_0x520740(0x12c)]===_0x520740(0x145))_0x1ae99f=Reflect['decorate'](_0x316fff,_0x49a0c3,_0x325170,_0x50f86e);else{for(var _0x2c6124=_0x316fff[_0x520740(0x13c)]-0x1;_0x2c6124>=0x0;_0x2c6124--)if(_0xed890f=_0x316fff[_0x2c6124])_0x1ae99f=(_0x3c55e5<0x3?_0xed890f(_0x1ae99f):_0x3c55e5>0x3?_0xed890f(_0x49a0c3,_0x325170,_0x1ae99f):_0xed890f(_0x49a0c3,_0x325170))||_0x1ae99f;}return _0x3c55e5>0x3&&_0x1ae99f&&Object['defineProperty'](_0x49a0c3,_0x325170,_0x1ae99f),_0x1ae99f;},__metadata=this&&this[a130_0x24a5c7(0x137)]||function(_0x3cf7b0,_0x14feef){const _0x80f938=a130_0x24a5c7;if(typeof Reflect===_0x80f938(0x14a)&&typeof Reflect[_0x80f938(0x11c)]===_0x80f938(0x145))return Reflect[_0x80f938(0x11c)](_0x3cf7b0,_0x14feef);};function a130_0x334c(_0x262b5a,_0x29f774){const _0x1ca431=a130_0x38bd();return a130_0x334c=function(_0x4aaef1,_0x47ffd1){_0x4aaef1=_0x4aaef1-0x117;let _0x38bd5f=_0x1ca431[_0x4aaef1];return _0x38bd5f;},a130_0x334c(_0x262b5a,_0x29f774);}Object[a130_0x24a5c7(0x14c)](exports,a130_0x24a5c7(0x15e),{'value':!![]}),exports[a130_0x24a5c7(0x157)]=void 0x0;const not_found_error_1=require(a130_0x24a5c7(0x156)),typedi_1=require('typedi'),constants_1=require(a130_0x24a5c7(0x127)),queries_1=require(a130_0x24a5c7(0x125)),flosum_naming_utils_1=require(a130_0x24a5c7(0x155)),salesforce_query_service_1=require(a130_0x24a5c7(0x123)),salesforce_rest_service_1=require(a130_0x24a5c7(0x15a));function a130_0x38bd(){const _0x169836=['map','fetchBranchComponents','fetchBranchComponentsByFilenames','1176030qUooQR','./salesforce-query.service','extractComponentMetadataFromRecord','../queries','fetchRepositoryComponents','../../../constants','%repositoryId%','%branchId%','FLOSUM_COMMIT','GET_BRANCH_BY_NAME_QUERY','decorate','Branch\x20\x22','__decorate','16528Ujnjbv','3822968oOUFSl','%fileNames%','join','Name','GET_BRANCH_COMPONENTS_QUERY','MAX_QUERY_ARRAY_ITEMS','(((.+)+)+)+$','__metadata','fetchRepositoryComponentsByFilenames','post','Version__c','Repository\x20\x22','length','2130nbhtoG','GET_REPOSITORY_BY_NAME_QUERY','GET_REPOSITORY_COMPONENTS_QUERY','SalesforceRestService','queryService','CRC32__c','Repository__c','query','function','Status__c','Component_Type__c','splice','400552VViyBT','object','\x22\x20not\x20found\x20in\x20flosum.','defineProperty','248814rHYTiX','290oWuXOn','NotFoundError','getOwnPropertyDescriptor','SalesforceQueryService','push','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','../utils/flosum-naming.utils','../../../core/errors/not-found.error','SalesforceGitSyncService','design:paramtypes','2540146cfLCsR','./salesforce-rest.service','%name%','extractFieldsFromRecord','FLOSUM_GIT_NAMESPACE','__esModule','File_Name__c','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','toString','426JQMkHV','apply','constructor','restService','createCommit','FLOSUM_NAMESPACE','Service','GET_COMPONENT_RECORD_TYPES_QUERY','search','getBranchIdByName','replace','10602tDFTyq','metadata','Completed','Component_Name__c'];a130_0x38bd=function(){return _0x169836;};return a130_0x38bd();}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0xd937b6,_0x129550){const _0x3ac8c3=a130_0x24a5c7;this[_0x3ac8c3(0x141)]=_0xd937b6,this[_0x3ac8c3(0x165)]=_0x129550,this[_0x3ac8c3(0x135)]=0xc8;}[a130_0x24a5c7(0x124)](_0x1026a5){const _0x1c47da=a130_0x24a5c7,_0x60c8e0=flosum_naming_utils_1[_0x1c47da(0x15c)](_0x1026a5,[_0x1c47da(0x11e),'Component_Type__c',_0x1c47da(0x142),_0x1c47da(0x15f),_0x1c47da(0x13a),'Id']);return{'id':_0x60c8e0['Id'],'name':_0x60c8e0[_0x1c47da(0x11e)],'type':_0x60c8e0[_0x1c47da(0x147)],'fileName':_0x60c8e0['File_Name__c'],'crc32':_0x60c8e0[_0x1c47da(0x142)],'version':+_0x60c8e0['Version__c']};}async['getRepositoryIdByName'](_0x1c69a8){const _0x419286=a130_0x24a5c7,[_0x19c192]=await this[_0x419286(0x141)]['query'](queries_1[_0x419286(0x13e)][_0x419286(0x11a)]('%name%',_0x1c69a8));if(!_0x19c192)throw new not_found_error_1['NotFoundError'](_0x419286(0x13b)+_0x1c69a8+_0x419286(0x14b));return _0x19c192['Id'];}async[a130_0x24a5c7(0x119)](_0x39284b){const _0x39c422=a130_0x24a5c7,[_0x3df2b5]=await this[_0x39c422(0x141)][_0x39c422(0x144)](queries_1[_0x39c422(0x12b)][_0x39c422(0x11a)](_0x39c422(0x15b),_0x39284b));if(!_0x3df2b5)throw new not_found_error_1[(_0x39c422(0x14f))](_0x39c422(0x12d)+_0x39284b+_0x39c422(0x14b));return _0x3df2b5['Id'];}async['getComponentRecordTypes'](){const _0x993a2b=a130_0x24a5c7,_0x4ba683=await this['queryService']['query'](queries_1[_0x993a2b(0x117)]);return _0x4ba683[_0x993a2b(0x11f)](_0x2765b8=>flosum_naming_utils_1[_0x993a2b(0x15c)](_0x2765b8,['Id',_0x993a2b(0x133)]))[_0x993a2b(0x11f)](_0x171f2d=>({'id':_0x171f2d['Id'],'name':_0x171f2d[_0x993a2b(0x133)]}));}async[a130_0x24a5c7(0x138)](_0x32b82d,_0x3f4965){const _0x3e09a9=a130_0x24a5c7,_0x3f6baf=[];while(_0x32b82d[_0x3e09a9(0x13c)]){const _0x50f440=queries_1[_0x3e09a9(0x153)][_0x3e09a9(0x11a)](_0x3e09a9(0x131),_0x32b82d['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x3e09a9(0x11f)](_0x1a99f4=>'\x27'+_0x1a99f4+'\x27')[_0x3e09a9(0x132)](','))[_0x3e09a9(0x11a)]('%repositoryId%',_0x3f4965),_0x519cf3=await this[_0x3e09a9(0x141)][_0x3e09a9(0x144)](_0x50f440);_0x3f6baf[_0x3e09a9(0x152)](..._0x519cf3);}return _0x3f6baf[_0x3e09a9(0x11f)](_0x229c3f=>this[_0x3e09a9(0x124)](_0x229c3f));}async[a130_0x24a5c7(0x121)](_0x14d772,_0x276a45){const _0x5dc84e=a130_0x24a5c7,_0x45f508=[];while(_0x14d772[_0x5dc84e(0x13c)]){const _0x1e39f6=queries_1[_0x5dc84e(0x154)][_0x5dc84e(0x11a)](_0x5dc84e(0x131),_0x14d772[_0x5dc84e(0x148)](0x0,this[_0x5dc84e(0x135)])['map'](_0x5c87ff=>'\x27'+_0x5c87ff+'\x27')[_0x5dc84e(0x132)](','))[_0x5dc84e(0x11a)](_0x5dc84e(0x129),_0x276a45),_0x5ab114=await this['queryService'][_0x5dc84e(0x144)](_0x1e39f6);_0x45f508[_0x5dc84e(0x152)](..._0x5ab114);}return _0x45f508[_0x5dc84e(0x11f)](_0x1fe6ba=>this[_0x5dc84e(0x124)](_0x1fe6ba));}async[a130_0x24a5c7(0x126)](_0x3fdabd){const _0x7c45bc=a130_0x24a5c7,_0x94175a=[],_0x5c1f56=queries_1[_0x7c45bc(0x13f)][_0x7c45bc(0x11a)](_0x7c45bc(0x128),_0x3fdabd),_0x287854=await this[_0x7c45bc(0x141)][_0x7c45bc(0x144)](_0x5c1f56);return _0x94175a[_0x7c45bc(0x152)](..._0x287854),_0x94175a['map'](_0x2f5204=>this[_0x7c45bc(0x124)](_0x2f5204));}async[a130_0x24a5c7(0x120)](_0x1a88b7){const _0x5ec90c=a130_0x24a5c7,_0x40aa72=[],_0x26eca2=queries_1[_0x5ec90c(0x134)][_0x5ec90c(0x11a)](_0x5ec90c(0x129),_0x1a88b7),_0x113fbd=await this[_0x5ec90c(0x141)]['query'](_0x26eca2);return _0x40aa72[_0x5ec90c(0x152)](..._0x113fbd),_0x40aa72['map'](_0x4b9a76=>this['extractComponentMetadataFromRecord'](_0x4b9a76));}async['fetchCommitManifestsByComponentIds'](_0x3dfed4){const _0x4f5f79=a130_0x24a5c7,_0x317acb=[..._0x3dfed4],_0x3fc7c0=[];while(_0x317acb['length']){const _0xb0e98c=queries_1[_0x4f5f79(0x160)]['replace']('%componentIds%',_0x317acb[_0x4f5f79(0x148)](0x0,this[_0x4f5f79(0x135)])['map'](_0x3e6722=>'\x27'+_0x3e6722+'\x27')[_0x4f5f79(0x132)](',')),_0x41d335=await this[_0x4f5f79(0x141)][_0x4f5f79(0x144)](_0xb0e98c);_0x3fc7c0[_0x4f5f79(0x152)](..._0x41d335['map'](_0x4f18b2=>_0x4f18b2['Id']));}return _0x3fc7c0;}async[a130_0x24a5c7(0x166)](_0xa51866,_0x1b8ad2){const _0x582696=a130_0x24a5c7;return this[_0x582696(0x165)][_0x582696(0x139)](constants_1[_0x582696(0x12a)],{[constants_1[_0x582696(0x167)]+_0x582696(0x143)]:_0x1b8ad2,[constants_1[_0x582696(0x167)]+'Commit_Name__c']:_0xa51866['substr'](0x0,0xff),[constants_1[_0x582696(0x167)]+_0x582696(0x146)]:_0x582696(0x11d),[constants_1[_0x582696(0x15d)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a130_0x24a5c7(0x168)](),__metadata(a130_0x24a5c7(0x158),[salesforce_query_service_1[a130_0x24a5c7(0x151)],salesforce_rest_service_1[a130_0x24a5c7(0x140)]])],SalesforceGitSyncService),exports[a130_0x24a5c7(0x157)]=SalesforceGitSyncService;