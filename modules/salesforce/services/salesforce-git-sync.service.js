const a130_0xdbf64f=a130_0x168c;(function(_0x1b060d,_0xe5111f){const _0x358c5f=a130_0x168c,_0x6cc520=_0x1b060d();while(!![]){try{const _0x136755=parseInt(_0x358c5f(0x125))/0x1+parseInt(_0x358c5f(0x122))/0x2*(parseInt(_0x358c5f(0x129))/0x3)+-parseInt(_0x358c5f(0xe0))/0x4+parseInt(_0x358c5f(0xe6))/0x5+-parseInt(_0x358c5f(0xfc))/0x6+parseInt(_0x358c5f(0x10f))/0x7*(parseInt(_0x358c5f(0xf1))/0x8)+-parseInt(_0x358c5f(0x10b))/0x9;if(_0x136755===_0xe5111f)break;else _0x6cc520['push'](_0x6cc520['shift']());}catch(_0x390c36){_0x6cc520['push'](_0x6cc520['shift']());}}}(a130_0x2cab,0x70fa9));const a130_0x5d8af8=(function(){let _0x4d9927=!![];return function(_0x35fd2b,_0x24bfca){const _0x3115fe=_0x4d9927?function(){const _0x2cef9a=a130_0x168c;if(_0x24bfca){const _0x1888e8=_0x24bfca[_0x2cef9a(0xf7)](_0x35fd2b,arguments);return _0x24bfca=null,_0x1888e8;}}:function(){};return _0x4d9927=![],_0x3115fe;};}()),a130_0xa01501=a130_0x5d8af8(this,function(){const _0x5596ae=a130_0x168c;return a130_0xa01501[_0x5596ae(0x126)]()[_0x5596ae(0x100)](_0x5596ae(0x115))[_0x5596ae(0x126)]()[_0x5596ae(0x109)](a130_0xa01501)['search'](_0x5596ae(0x115));});a130_0xa01501();'use strict';var __decorate=this&&this[a130_0xdbf64f(0x121)]||function(_0x1eab59,_0x346df1,_0xf7471d,_0x320a6f){const _0x4eb763=a130_0xdbf64f;var _0x1a18cb=arguments[_0x4eb763(0x110)],_0x28b8e8=_0x1a18cb<0x3?_0x346df1:_0x320a6f===null?_0x320a6f=Object[_0x4eb763(0x104)](_0x346df1,_0xf7471d):_0x320a6f,_0x2b8272;if(typeof Reflect===_0x4eb763(0x103)&&typeof Reflect[_0x4eb763(0xeb)]==='function')_0x28b8e8=Reflect[_0x4eb763(0xeb)](_0x1eab59,_0x346df1,_0xf7471d,_0x320a6f);else{for(var _0x12e4e5=_0x1eab59[_0x4eb763(0x110)]-0x1;_0x12e4e5>=0x0;_0x12e4e5--)if(_0x2b8272=_0x1eab59[_0x12e4e5])_0x28b8e8=(_0x1a18cb<0x3?_0x2b8272(_0x28b8e8):_0x1a18cb>0x3?_0x2b8272(_0x346df1,_0xf7471d,_0x28b8e8):_0x2b8272(_0x346df1,_0xf7471d))||_0x28b8e8;}return _0x1a18cb>0x3&&_0x28b8e8&&Object[_0x4eb763(0x101)](_0x346df1,_0xf7471d,_0x28b8e8),_0x28b8e8;},__metadata=this&&this['__metadata']||function(_0x3050e3,_0x8fab6b){const _0x3ade94=a130_0xdbf64f;if(typeof Reflect===_0x3ade94(0x103)&&typeof Reflect['metadata']===_0x3ade94(0xf2))return Reflect[_0x3ade94(0xf9)](_0x3050e3,_0x8fab6b);};function a130_0x2cab(){const _0x1ba856=['fetchRepositoryComponentsByFilenames','MAX_QUERY_ARRAY_ITEMS','post','306257pKMOUX','length','NotFoundError','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','push','%name%','(((.+)+)+)+$','SalesforceGitSyncService','%repositoryId%','Component_Type__c','fetchRepositoryComponents','GET_REPOSITORY_COMPONENTS_QUERY','../utils/flosum-naming.utils','FLOSUM_GIT_NAMESPACE','GET_REPOSITORY_BY_NAME_QUERY','GET_COMPONENT_RECORD_TYPES_QUERY','fetchBranchComponentsByFilenames','extractFieldsFromRecord','__decorate','208XVDBtI','\x22\x20not\x20found\x20in\x20flosum.','Completed','81725LZslGw','toString','GET_BRANCH_COMPONENTS_QUERY','extractComponentMetadataFromRecord','15468UaxAMs','Commit_Name__c','restService','FLOSUM_COMMIT','445808Qgcmzj','queryService','%branchId%','SalesforceQueryService','GET_BRANCH_BY_NAME_QUERY','./salesforce-query.service','967015RBDnbA','query','getRepositoryIdByName','SalesforceRestService','Name','decorate','FLOSUM_NAMESPACE','Repository\x20\x22','map','fetchCommitManifestsByComponentIds','splice','40DBtzox','function','createCommit','../../../core/errors/not-found.error','replace','getComponentRecordTypes','apply','./salesforce-rest.service','metadata','Repository__c','Version__c','1247382cWwVmm','Component_Name__c','getBranchIdByName','%fileNames%','search','defineProperty','CRC32__c','object','getOwnPropertyDescriptor','join','Is_From_Agent__c','%componentIds%','Branch\x20\x22','constructor','../../../constants','2231973UycPyJ'];a130_0x2cab=function(){return _0x1ba856;};return a130_0x2cab();}Object[a130_0xdbf64f(0x101)](exports,'__esModule',{'value':!![]}),exports[a130_0xdbf64f(0x116)]=void 0x0;const not_found_error_1=require(a130_0xdbf64f(0xf4)),typedi_1=require('typedi'),constants_1=require(a130_0xdbf64f(0x10a)),queries_1=require('../queries'),flosum_naming_utils_1=require(a130_0xdbf64f(0x11b)),salesforce_query_service_1=require(a130_0xdbf64f(0xe5)),salesforce_rest_service_1=require(a130_0xdbf64f(0xf8));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x20c6fb,_0x558f7d){const _0x547642=a130_0xdbf64f;this[_0x547642(0xe1)]=_0x20c6fb,this[_0x547642(0x12b)]=_0x558f7d,this[_0x547642(0x10d)]=0xc8;}['extractComponentMetadataFromRecord'](_0x57f36b){const _0x16f0fb=a130_0xdbf64f,_0x5ed78e=flosum_naming_utils_1[_0x16f0fb(0x120)](_0x57f36b,[_0x16f0fb(0xfd),_0x16f0fb(0x118),_0x16f0fb(0x102),'File_Name__c',_0x16f0fb(0xfb),'Id']);return{'id':_0x5ed78e['Id'],'name':_0x5ed78e[_0x16f0fb(0xfd)],'type':_0x5ed78e['Component_Type__c'],'fileName':_0x5ed78e['File_Name__c'],'crc32':_0x5ed78e['CRC32__c'],'version':+_0x5ed78e['Version__c']};}async[a130_0xdbf64f(0xe8)](_0x3d3df5){const _0x225629=a130_0xdbf64f,[_0x1f96ea]=await this[_0x225629(0xe1)]['query'](queries_1[_0x225629(0x11d)][_0x225629(0xf5)](_0x225629(0x114),_0x3d3df5));if(!_0x1f96ea)throw new not_found_error_1[(_0x225629(0x111))](_0x225629(0xed)+_0x3d3df5+_0x225629(0x123));return _0x1f96ea['Id'];}async[a130_0xdbf64f(0xfe)](_0x3a8ca3){const _0x5c0411=a130_0xdbf64f,[_0x6f9007]=await this['queryService'][_0x5c0411(0xe7)](queries_1[_0x5c0411(0xe4)][_0x5c0411(0xf5)](_0x5c0411(0x114),_0x3a8ca3));if(!_0x6f9007)throw new not_found_error_1['NotFoundError'](_0x5c0411(0x108)+_0x3a8ca3+_0x5c0411(0x123));return _0x6f9007['Id'];}async[a130_0xdbf64f(0xf6)](){const _0x3ecf5d=a130_0xdbf64f,_0x4af8c3=await this['queryService']['query'](queries_1[_0x3ecf5d(0x11e)]);return _0x4af8c3[_0x3ecf5d(0xee)](_0x50e360=>flosum_naming_utils_1[_0x3ecf5d(0x120)](_0x50e360,['Id',_0x3ecf5d(0xea)]))[_0x3ecf5d(0xee)](_0x37c219=>({'id':_0x37c219['Id'],'name':_0x37c219['Name']}));}async[a130_0xdbf64f(0x10c)](_0x40e481,_0x1ec2cf){const _0x30303c=a130_0xdbf64f,_0x2d506d=[];while(_0x40e481['length']){const _0x39296f=queries_1[_0x30303c(0x112)][_0x30303c(0xf5)](_0x30303c(0xff),_0x40e481[_0x30303c(0xf0)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x30303c(0xee)](_0x3bacdc=>'\x27'+_0x3bacdc+'\x27')[_0x30303c(0x105)](','))['replace'](_0x30303c(0x117),_0x1ec2cf),_0x576926=await this[_0x30303c(0xe1)]['query'](_0x39296f);_0x2d506d[_0x30303c(0x113)](..._0x576926);}return _0x2d506d[_0x30303c(0xee)](_0x1c31df=>this[_0x30303c(0x128)](_0x1c31df));}async[a130_0xdbf64f(0x11f)](_0x424bab,_0x2e54b8){const _0x1c4ff0=a130_0xdbf64f,_0xe561f8=[];while(_0x424bab['length']){const _0x2a59c8=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY']['replace'](_0x1c4ff0(0xff),_0x424bab[_0x1c4ff0(0xf0)](0x0,this[_0x1c4ff0(0x10d)])['map'](_0x4f614e=>'\x27'+_0x4f614e+'\x27')[_0x1c4ff0(0x105)](','))[_0x1c4ff0(0xf5)](_0x1c4ff0(0xe2),_0x2e54b8),_0x6174a9=await this[_0x1c4ff0(0xe1)][_0x1c4ff0(0xe7)](_0x2a59c8);_0xe561f8['push'](..._0x6174a9);}return _0xe561f8[_0x1c4ff0(0xee)](_0x257829=>this['extractComponentMetadataFromRecord'](_0x257829));}async[a130_0xdbf64f(0x119)](_0x26dc36){const _0x44d871=a130_0xdbf64f,_0x196db6=queries_1[_0x44d871(0x11a)][_0x44d871(0xf5)](_0x44d871(0x117),_0x26dc36),_0x38e5a8=await this['queryService'][_0x44d871(0xe7)](_0x196db6);return _0x38e5a8['map'](_0x3f92ce=>this[_0x44d871(0x128)](_0x3f92ce));}async['fetchBranchComponents'](_0x54f209){const _0x6622a1=a130_0xdbf64f,_0x4f6727=queries_1[_0x6622a1(0x127)][_0x6622a1(0xf5)](_0x6622a1(0xe2),_0x54f209),_0x48397d=await this[_0x6622a1(0xe1)]['query'](_0x4f6727);return _0x48397d[_0x6622a1(0xee)](_0x47aa38=>this[_0x6622a1(0x128)](_0x47aa38));}async[a130_0xdbf64f(0xef)](_0x350855){const _0x3b4624=a130_0xdbf64f,_0x51870a=[..._0x350855],_0x16f9e9=[];while(_0x51870a['length']){const _0x10c500=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x3b4624(0xf5)](_0x3b4624(0x107),_0x51870a[_0x3b4624(0xf0)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x3b4624(0xee)](_0x22cbb8=>'\x27'+_0x22cbb8+'\x27')[_0x3b4624(0x105)](',')),_0x28c095=await this['queryService']['query'](_0x10c500);_0x16f9e9[_0x3b4624(0x113)](..._0x28c095['map'](_0x39a3e5=>_0x39a3e5['Id']));}return _0x16f9e9;}async[a130_0xdbf64f(0xf3)](_0x100623,_0x49d33f){const _0x36e62a=a130_0xdbf64f;return this['restService'][_0x36e62a(0x10e)](constants_1[_0x36e62a(0x12c)],{[constants_1['FLOSUM_NAMESPACE']+_0x36e62a(0xfa)]:_0x49d33f,[constants_1[_0x36e62a(0xec)]+_0x36e62a(0x12a)]:_0x100623['substr'](0x0,0xff),[constants_1[_0x36e62a(0xec)]+'Status__c']:_0x36e62a(0x124),[constants_1[_0x36e62a(0x11c)]+_0x36e62a(0x106)]:!![]});}};function a130_0x168c(_0x4c5dfe,_0x30149f){const _0x238c14=a130_0x2cab();return a130_0x168c=function(_0xa01501,_0x5d8af8){_0xa01501=_0xa01501-0xe0;let _0x2cab0d=_0x238c14[_0xa01501];return _0x2cab0d;},a130_0x168c(_0x4c5dfe,_0x30149f);}SalesforceGitSyncService=__decorate([typedi_1['Service'](),__metadata('design:paramtypes',[salesforce_query_service_1[a130_0xdbf64f(0xe3)],salesforce_rest_service_1[a130_0xdbf64f(0xe9)]])],SalesforceGitSyncService),exports[a130_0xdbf64f(0x116)]=SalesforceGitSyncService;