const a130_0x42f006=a130_0x4050;(function(_0x5b89e8,_0x6df078){const _0x107286=a130_0x4050,_0x3f81e0=_0x5b89e8();while(!![]){try{const _0x78ad84=-parseInt(_0x107286(0x16c))/0x1+parseInt(_0x107286(0x19d))/0x2*(parseInt(_0x107286(0x177))/0x3)+-parseInt(_0x107286(0x16d))/0x4+parseInt(_0x107286(0x190))/0x5*(-parseInt(_0x107286(0x1b4))/0x6)+parseInt(_0x107286(0x1a8))/0x7*(parseInt(_0x107286(0x169))/0x8)+-parseInt(_0x107286(0x183))/0x9+parseInt(_0x107286(0x16a))/0xa;if(_0x78ad84===_0x6df078)break;else _0x3f81e0['push'](_0x3f81e0['shift']());}catch(_0x324b39){_0x3f81e0['push'](_0x3f81e0['shift']());}}}(a130_0x57d7,0x24624));const a130_0x55382a=(function(){let _0x417656=!![];return function(_0x4207ff,_0x5a53a9){const _0x67adf4=_0x417656?function(){if(_0x5a53a9){const _0x3138ef=_0x5a53a9['apply'](_0x4207ff,arguments);return _0x5a53a9=null,_0x3138ef;}}:function(){};return _0x417656=![],_0x67adf4;};}()),a130_0x4d91ef=a130_0x55382a(this,function(){const _0x211396=a130_0x4050;return a130_0x4d91ef[_0x211396(0x173)]()[_0x211396(0x171)](_0x211396(0x1a2))[_0x211396(0x173)]()[_0x211396(0x16b)](a130_0x4d91ef)[_0x211396(0x171)](_0x211396(0x1a2));});a130_0x4d91ef();'use strict';var __decorate=this&&this[a130_0x42f006(0x1a9)]||function(_0x4a8d1f,_0x59fed6,_0xdfa4d8,_0x231df4){const _0x17ac2d=a130_0x42f006;var _0x32b8a6=arguments[_0x17ac2d(0x194)],_0x8ca604=_0x32b8a6<0x3?_0x59fed6:_0x231df4===null?_0x231df4=Object[_0x17ac2d(0x16e)](_0x59fed6,_0xdfa4d8):_0x231df4,_0x30fc25;if(typeof Reflect===_0x17ac2d(0x18c)&&typeof Reflect[_0x17ac2d(0x1a4)]===_0x17ac2d(0x1a1))_0x8ca604=Reflect['decorate'](_0x4a8d1f,_0x59fed6,_0xdfa4d8,_0x231df4);else{for(var _0x344396=_0x4a8d1f[_0x17ac2d(0x194)]-0x1;_0x344396>=0x0;_0x344396--)if(_0x30fc25=_0x4a8d1f[_0x344396])_0x8ca604=(_0x32b8a6<0x3?_0x30fc25(_0x8ca604):_0x32b8a6>0x3?_0x30fc25(_0x59fed6,_0xdfa4d8,_0x8ca604):_0x30fc25(_0x59fed6,_0xdfa4d8))||_0x8ca604;}return _0x32b8a6>0x3&&_0x8ca604&&Object[_0x17ac2d(0x188)](_0x59fed6,_0xdfa4d8,_0x8ca604),_0x8ca604;},__metadata=this&&this[a130_0x42f006(0x187)]||function(_0x582474,_0x42e58c){const _0x553a1c=a130_0x42f006;if(typeof Reflect==='object'&&typeof Reflect[_0x553a1c(0x18a)]===_0x553a1c(0x1a1))return Reflect[_0x553a1c(0x18a)](_0x582474,_0x42e58c);};Object[a130_0x42f006(0x188)](exports,a130_0x42f006(0x178),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;function a130_0x4050(_0x164c8b,_0x1023ac){const _0x378d8a=a130_0x57d7();return a130_0x4050=function(_0x4d91ef,_0x55382a){_0x4d91ef=_0x4d91ef-0x169;let _0x57d761=_0x378d8a[_0x4d91ef];return _0x57d761;},a130_0x4050(_0x164c8b,_0x1023ac);}const not_found_error_1=require(a130_0x42f006(0x16f)),typedi_1=require(a130_0x42f006(0x19e)),constants_1=require(a130_0x42f006(0x174)),queries_1=require(a130_0x42f006(0x1b1)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a130_0x42f006(0x1ad)),salesforce_rest_service_1=require(a130_0x42f006(0x18d));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x9a13f7,_0x64c09d){const _0x3f6e7b=a130_0x42f006;this[_0x3f6e7b(0x1b0)]=_0x9a13f7,this[_0x3f6e7b(0x1b6)]=_0x64c09d,this[_0x3f6e7b(0x17d)]=0xc8;}['extractComponentMetadataFromRecord'](_0x2b05cc){const _0x43ad91=a130_0x42f006,_0x90fcfb=flosum_naming_utils_1[_0x43ad91(0x17f)](_0x2b05cc,[_0x43ad91(0x1a3),_0x43ad91(0x1ab),_0x43ad91(0x179),_0x43ad91(0x191),_0x43ad91(0x192),'Id']);return{'id':_0x90fcfb['Id'],'name':_0x90fcfb[_0x43ad91(0x1a3)],'type':_0x90fcfb[_0x43ad91(0x1ab)],'fileName':_0x90fcfb[_0x43ad91(0x191)],'crc32':_0x90fcfb[_0x43ad91(0x179)],'version':+_0x90fcfb[_0x43ad91(0x192)]};}async[a130_0x42f006(0x1ae)](_0x1f805c){const _0x312160=a130_0x42f006,[_0x3fa136]=await this[_0x312160(0x1b0)]['query'](queries_1[_0x312160(0x19b)][_0x312160(0x193)](_0x312160(0x18e),_0x1f805c));if(!_0x3fa136)throw new not_found_error_1[(_0x312160(0x184))](_0x312160(0x198)+_0x1f805c+_0x312160(0x1b5));return _0x3fa136['Id'];}async['getBranchIdByName'](_0x30c856){const _0x2c504c=a130_0x42f006,[_0x53c2de]=await this[_0x2c504c(0x1b0)]['query'](queries_1[_0x2c504c(0x1a0)][_0x2c504c(0x193)]('%name%',_0x30c856));if(!_0x53c2de)throw new not_found_error_1[(_0x2c504c(0x184))](_0x2c504c(0x17a)+_0x30c856+'\x22\x20not\x20found\x20in\x20flosum.');return _0x53c2de['Id'];}async[a130_0x42f006(0x196)](){const _0xa2ef18=a130_0x42f006,_0xe81ed8=await this['queryService'][_0xa2ef18(0x182)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0xe81ed8[_0xa2ef18(0x1af)](_0x3546a4=>flosum_naming_utils_1[_0xa2ef18(0x17f)](_0x3546a4,['Id','Name']))[_0xa2ef18(0x1af)](_0x41e153=>({'id':_0x41e153['Id'],'name':_0x41e153[_0xa2ef18(0x17b)]}));}async[a130_0x42f006(0x185)](_0xcc798e,_0x3f10d3){const _0x3d36ed=a130_0x42f006,_0x1e9805=[];while(_0xcc798e[_0x3d36ed(0x194)]){const _0xfb72cc=queries_1[_0x3d36ed(0x1b7)][_0x3d36ed(0x193)](_0x3d36ed(0x18f),_0xcc798e[_0x3d36ed(0x19f)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x3975f7=>'\x27'+_0x3975f7+'\x27')[_0x3d36ed(0x180)](','))[_0x3d36ed(0x193)]('%repositoryId%',_0x3f10d3),_0xa708cb=await this['queryService'][_0x3d36ed(0x182)](_0xfb72cc);_0x1e9805[_0x3d36ed(0x186)](..._0xa708cb);}return _0x1e9805[_0x3d36ed(0x1af)](_0x2188e6=>this['extractComponentMetadataFromRecord'](_0x2188e6));}async[a130_0x42f006(0x18b)](_0x2eca19,_0x2918ae){const _0x2984e5=a130_0x42f006,_0x17c35c=[];while(_0x2eca19[_0x2984e5(0x194)]){const _0x364dff=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x2984e5(0x193)](_0x2984e5(0x18f),_0x2eca19[_0x2984e5(0x19f)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x2984e5(0x1af)](_0x5a36a3=>'\x27'+_0x5a36a3+'\x27')[_0x2984e5(0x180)](','))['replace'](_0x2984e5(0x197),_0x2918ae),_0x49bb98=await this[_0x2984e5(0x1b0)][_0x2984e5(0x182)](_0x364dff);_0x17c35c['push'](..._0x49bb98);}return _0x17c35c[_0x2984e5(0x1af)](_0x2a4f09=>this[_0x2984e5(0x195)](_0x2a4f09));}async['fetchRepositoryComponents'](_0x54d5d7){const _0x250598=a130_0x42f006,_0x416665=[],_0x4790a8=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x250598(0x193)](_0x250598(0x1b3),_0x54d5d7),_0x395785=await this[_0x250598(0x1b0)][_0x250598(0x182)](_0x4790a8);return _0x416665[_0x250598(0x186)](..._0x395785),_0x416665['map'](_0x574b60=>this[_0x250598(0x195)](_0x574b60));}async[a130_0x42f006(0x1a7)](_0x5690b8){const _0x1022d4=a130_0x42f006,_0x227415=[],_0x1a2e69=queries_1[_0x1022d4(0x175)][_0x1022d4(0x193)]('%branchId%',_0x5690b8),_0x130bb7=await this[_0x1022d4(0x1b0)][_0x1022d4(0x182)](_0x1a2e69);return _0x227415['push'](..._0x130bb7),_0x227415[_0x1022d4(0x1af)](_0x7a6247=>this[_0x1022d4(0x195)](_0x7a6247));}async[a130_0x42f006(0x1a6)](_0x142070){const _0x3d8ebe=a130_0x42f006,_0x23aef6=[..._0x142070],_0xb7b8a=[];while(_0x23aef6['length']){const _0x5dfa99=queries_1[_0x3d8ebe(0x181)]['replace'](_0x3d8ebe(0x176),_0x23aef6['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x3d8ebe(0x1af)](_0x236fe6=>'\x27'+_0x236fe6+'\x27')[_0x3d8ebe(0x180)](',')),_0x31abd7=await this[_0x3d8ebe(0x1b0)][_0x3d8ebe(0x182)](_0x5dfa99);_0xb7b8a[_0x3d8ebe(0x186)](..._0x31abd7['map'](_0x3cff90=>_0x3cff90['Id']));}return _0xb7b8a;}async['createCommit'](_0x42cd0d,_0x30191c){const _0xca5739=a130_0x42f006;return this[_0xca5739(0x1b6)][_0xca5739(0x170)](constants_1[_0xca5739(0x189)],{[constants_1[_0xca5739(0x1a5)]+_0xca5739(0x19a)]:_0x30191c,[constants_1[_0xca5739(0x1a5)]+_0xca5739(0x19c)]:_0x42cd0d[_0xca5739(0x17e)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0xca5739(0x1b2),[constants_1[_0xca5739(0x172)]+_0xca5739(0x1ac)]:!![]});}};function a130_0x57d7(){const _0xbf118a=['Commit_Name__c','2ghEVdl','typedi','splice','GET_BRANCH_BY_NAME_QUERY','function','(((.+)+)+)+$','Component_Name__c','decorate','FLOSUM_NAMESPACE','fetchCommitManifestsByComponentIds','fetchBranchComponents','11816OJTqfU','__decorate','design:paramtypes','Component_Type__c','Is_From_Agent__c','./salesforce-query.service','getRepositoryIdByName','map','queryService','../queries','Completed','%repositoryId%','6EXWIWB','\x22\x20not\x20found\x20in\x20flosum.','restService','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','1328wEJzdp','1904980MtyNCM','constructor','152248DqaTsr','125680RuGDwC','getOwnPropertyDescriptor','../../../core/errors/not-found.error','post','search','FLOSUM_GIT_NAMESPACE','toString','../../../constants','GET_BRANCH_COMPONENTS_QUERY','%componentIds%','359385JVZLkw','__esModule','CRC32__c','Branch\x20\x22','Name','SalesforceRestService','MAX_QUERY_ARRAY_ITEMS','substr','extractFieldsFromRecord','join','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','query','1071972wmQPhD','NotFoundError','fetchRepositoryComponentsByFilenames','push','__metadata','defineProperty','FLOSUM_COMMIT','metadata','fetchBranchComponentsByFilenames','object','./salesforce-rest.service','%name%','%fileNames%','693485cRarJA','File_Name__c','Version__c','replace','length','extractComponentMetadataFromRecord','getComponentRecordTypes','%branchId%','Repository\x20\x22','Service','Repository__c','GET_REPOSITORY_BY_NAME_QUERY'];a130_0x57d7=function(){return _0xbf118a;};return a130_0x57d7();}SalesforceGitSyncService=__decorate([typedi_1[a130_0x42f006(0x199)](),__metadata(a130_0x42f006(0x1aa),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a130_0x42f006(0x17c)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;