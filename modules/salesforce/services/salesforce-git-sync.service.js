const a130_0x3c13dc=a130_0x3856;(function(_0xfbc232,_0x42a94b){const _0x3f1a49=a130_0x3856,_0x4163f3=_0xfbc232();while(!![]){try{const _0x541559=-parseInt(_0x3f1a49(0x205))/0x1*(parseInt(_0x3f1a49(0x229))/0x2)+-parseInt(_0x3f1a49(0x213))/0x3*(-parseInt(_0x3f1a49(0x220))/0x4)+-parseInt(_0x3f1a49(0x212))/0x5*(parseInt(_0x3f1a49(0x22b))/0x6)+-parseInt(_0x3f1a49(0x21f))/0x7*(-parseInt(_0x3f1a49(0x22a))/0x8)+-parseInt(_0x3f1a49(0x214))/0x9*(parseInt(_0x3f1a49(0x232))/0xa)+parseInt(_0x3f1a49(0x216))/0xb+parseInt(_0x3f1a49(0x215))/0xc;if(_0x541559===_0x42a94b)break;else _0x4163f3['push'](_0x4163f3['shift']());}catch(_0x3ccfff){_0x4163f3['push'](_0x4163f3['shift']());}}}(a130_0x2ca3,0xea1f7));const a130_0x12508d=(function(){let _0x120bc9=!![];return function(_0x14fdc8,_0x5808aa){const _0x369b5b=_0x120bc9?function(){if(_0x5808aa){const _0x2b4545=_0x5808aa['apply'](_0x14fdc8,arguments);return _0x5808aa=null,_0x2b4545;}}:function(){};return _0x120bc9=![],_0x369b5b;};}()),a130_0x3a5ae1=a130_0x12508d(this,function(){const _0x350511=a130_0x3856;return a130_0x3a5ae1[_0x350511(0x1fb)]()['search']('(((.+)+)+)+$')[_0x350511(0x1fb)]()[_0x350511(0x237)](a130_0x3a5ae1)['search']('(((.+)+)+)+$');});a130_0x3a5ae1();'use strict';function a130_0x3856(_0x3d3bfc,_0x23c764){const _0x33dd8a=a130_0x2ca3();return a130_0x3856=function(_0x3a5ae1,_0x12508d){_0x3a5ae1=_0x3a5ae1-0x1f1;let _0x2ca381=_0x33dd8a[_0x3a5ae1];return _0x2ca381;},a130_0x3856(_0x3d3bfc,_0x23c764);}var __decorate=this&&this[a130_0x3c13dc(0x240)]||function(_0x5c6d31,_0xdd1f63,_0x192420,_0x5187fb){const _0x408f6a=a130_0x3c13dc;var _0x39e708=arguments[_0x408f6a(0x21c)],_0x388a78=_0x39e708<0x3?_0xdd1f63:_0x5187fb===null?_0x5187fb=Object['getOwnPropertyDescriptor'](_0xdd1f63,_0x192420):_0x5187fb,_0x4861ff;if(typeof Reflect===_0x408f6a(0x20c)&&typeof Reflect[_0x408f6a(0x203)]==='function')_0x388a78=Reflect[_0x408f6a(0x203)](_0x5c6d31,_0xdd1f63,_0x192420,_0x5187fb);else{for(var _0x2f82c1=_0x5c6d31[_0x408f6a(0x21c)]-0x1;_0x2f82c1>=0x0;_0x2f82c1--)if(_0x4861ff=_0x5c6d31[_0x2f82c1])_0x388a78=(_0x39e708<0x3?_0x4861ff(_0x388a78):_0x39e708>0x3?_0x4861ff(_0xdd1f63,_0x192420,_0x388a78):_0x4861ff(_0xdd1f63,_0x192420))||_0x388a78;}return _0x39e708>0x3&&_0x388a78&&Object['defineProperty'](_0xdd1f63,_0x192420,_0x388a78),_0x388a78;},__metadata=this&&this['__metadata']||function(_0x4b20c3,_0x56271c){const _0x5de69c=a130_0x3c13dc;if(typeof Reflect==='object'&&typeof Reflect[_0x5de69c(0x22d)]===_0x5de69c(0x202))return Reflect[_0x5de69c(0x22d)](_0x4b20c3,_0x56271c);};function a130_0x2ca3(){const _0x19ed13=['defineProperty','push','%componentIds%','10CfGnNT','GET_REPOSITORY_BY_NAME_QUERY','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','substr','GET_BRANCH_COMPONENTS_QUERY','constructor','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','restService','Component_Name__c','Repository\x20\x22','typedi','splice','getRepositoryIdByName','../utils/flosum-naming.utils','__decorate','GET_COMPONENT_RECORD_TYPES_QUERY','Repository__c','Commit_Name__c','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','GET_BRANCH_BY_NAME_QUERY','FLOSUM_GIT_NAMESPACE','MAX_QUERY_ARRAY_ITEMS','%repositoryId%','query','File_Name__c','toString','FLOSUM_COMMIT','join','Service','%branchId%','./salesforce-rest.service','%fileNames%','function','decorate','../../../core/errors/not-found.error','46zrNydQ','CRC32__c','fetchBranchComponentsByFilenames','GET_REPOSITORY_COMPONENTS_QUERY','SalesforceGitSyncService','FLOSUM_NAMESPACE','queryService','object','NotFoundError','map','post','SalesforceQueryService','getComponentRecordTypes','1025npoBoR','56577BhQmto','17229150iXdZrO','30848796PtlTHO','3515039bYraci','Version__c','fetchBranchComponents','extractComponentMetadataFromRecord','replace','Branch\x20\x22','length','extractFieldsFromRecord','Status__c','394282BHrjNn','148Ggxprc','%name%','./salesforce-query.service','Is_From_Agent__c','SalesforceRestService','../../../constants','createCommit','fetchCommitManifestsByComponentIds','Name','74978MrmnVA','248qcfLAg','21552uHYboB','Component_Type__c','metadata','../queries'];a130_0x2ca3=function(){return _0x19ed13;};return a130_0x2ca3();}Object[a130_0x3c13dc(0x22f)](exports,'__esModule',{'value':!![]}),exports[a130_0x3c13dc(0x209)]=void 0x0;const not_found_error_1=require(a130_0x3c13dc(0x204)),typedi_1=require(a130_0x3c13dc(0x23c)),constants_1=require(a130_0x3c13dc(0x225)),queries_1=require(a130_0x3c13dc(0x22e)),flosum_naming_utils_1=require(a130_0x3c13dc(0x23f)),salesforce_query_service_1=require(a130_0x3c13dc(0x222)),salesforce_rest_service_1=require(a130_0x3c13dc(0x200));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x278475,_0x209a78){this['queryService']=_0x278475,this['restService']=_0x209a78,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a130_0x3c13dc(0x219)](_0x5537bb){const _0x1204d6=a130_0x3c13dc,_0x12ce16=flosum_naming_utils_1['extractFieldsFromRecord'](_0x5537bb,[_0x1204d6(0x23a),_0x1204d6(0x22c),'CRC32__c',_0x1204d6(0x1fa),_0x1204d6(0x217),'Id']);return{'id':_0x12ce16['Id'],'name':_0x12ce16[_0x1204d6(0x23a)],'type':_0x12ce16['Component_Type__c'],'fileName':_0x12ce16['File_Name__c'],'crc32':_0x12ce16[_0x1204d6(0x206)],'version':+_0x12ce16['Version__c']};}async[a130_0x3c13dc(0x23e)](_0x4359ef){const _0x41b4b8=a130_0x3c13dc,[_0xd21a27]=await this[_0x41b4b8(0x20b)][_0x41b4b8(0x1f9)](queries_1[_0x41b4b8(0x233)][_0x41b4b8(0x21a)](_0x41b4b8(0x221),_0x4359ef));if(!_0xd21a27)throw new not_found_error_1[(_0x41b4b8(0x20d))](_0x41b4b8(0x23b)+_0x4359ef+'\x22\x20not\x20found\x20in\x20flosum.');return _0xd21a27['Id'];}async['getBranchIdByName'](_0x239b1e){const _0x50c310=a130_0x3c13dc,[_0x3229cc]=await this[_0x50c310(0x20b)][_0x50c310(0x1f9)](queries_1[_0x50c310(0x1f5)][_0x50c310(0x21a)](_0x50c310(0x221),_0x239b1e));if(!_0x3229cc)throw new not_found_error_1[(_0x50c310(0x20d))](_0x50c310(0x21b)+_0x239b1e+'\x22\x20not\x20found\x20in\x20flosum.');return _0x3229cc['Id'];}async[a130_0x3c13dc(0x211)](){const _0x15be17=a130_0x3c13dc,_0x1dcc28=await this[_0x15be17(0x20b)][_0x15be17(0x1f9)](queries_1[_0x15be17(0x1f1)]);return _0x1dcc28[_0x15be17(0x20e)](_0x3bfc23=>flosum_naming_utils_1[_0x15be17(0x21d)](_0x3bfc23,['Id',_0x15be17(0x228)]))[_0x15be17(0x20e)](_0x46a96a=>({'id':_0x46a96a['Id'],'name':_0x46a96a['Name']}));}async['fetchRepositoryComponentsByFilenames'](_0x101570,_0x36acf8){const _0x459cf7=a130_0x3c13dc,_0x3d77b8=[];while(_0x101570[_0x459cf7(0x21c)]){const _0x54328c=queries_1[_0x459cf7(0x238)][_0x459cf7(0x21a)](_0x459cf7(0x201),_0x101570['splice'](0x0,this[_0x459cf7(0x1f7)])[_0x459cf7(0x20e)](_0x563930=>'\x27'+_0x563930+'\x27')[_0x459cf7(0x1fd)](','))['replace'](_0x459cf7(0x1f8),_0x36acf8),_0x500210=await this[_0x459cf7(0x20b)][_0x459cf7(0x1f9)](_0x54328c);_0x3d77b8['push'](..._0x500210);}return _0x3d77b8[_0x459cf7(0x20e)](_0x7a3d7e=>this[_0x459cf7(0x219)](_0x7a3d7e));}async[a130_0x3c13dc(0x207)](_0x136885,_0xb121a0){const _0x24311f=a130_0x3c13dc,_0x130a65=[];while(_0x136885[_0x24311f(0x21c)]){const _0x25a439=queries_1[_0x24311f(0x1f4)]['replace'](_0x24311f(0x201),_0x136885[_0x24311f(0x23d)](0x0,this[_0x24311f(0x1f7)])[_0x24311f(0x20e)](_0x5053e4=>'\x27'+_0x5053e4+'\x27')[_0x24311f(0x1fd)](','))[_0x24311f(0x21a)](_0x24311f(0x1ff),_0xb121a0),_0x33c5d8=await this[_0x24311f(0x20b)]['query'](_0x25a439);_0x130a65[_0x24311f(0x230)](..._0x33c5d8);}return _0x130a65[_0x24311f(0x20e)](_0x14ea5c=>this['extractComponentMetadataFromRecord'](_0x14ea5c));}async['fetchRepositoryComponents'](_0x21ccc4){const _0x5d5ca1=a130_0x3c13dc,_0x1bc87a=queries_1[_0x5d5ca1(0x208)]['replace'](_0x5d5ca1(0x1f8),_0x21ccc4),_0x13726f=await this['queryService'][_0x5d5ca1(0x1f9)](_0x1bc87a);return _0x13726f[_0x5d5ca1(0x20e)](_0x37be70=>this[_0x5d5ca1(0x219)](_0x37be70));}async[a130_0x3c13dc(0x218)](_0x1ad413){const _0x18db6d=a130_0x3c13dc,_0x5621d3=queries_1[_0x18db6d(0x236)][_0x18db6d(0x21a)](_0x18db6d(0x1ff),_0x1ad413),_0x58a021=await this[_0x18db6d(0x20b)][_0x18db6d(0x1f9)](_0x5621d3);return _0x58a021[_0x18db6d(0x20e)](_0x2f31eb=>this['extractComponentMetadataFromRecord'](_0x2f31eb));}async[a130_0x3c13dc(0x227)](_0x4c85c1){const _0x27de47=a130_0x3c13dc,_0x3a2364=[..._0x4c85c1],_0x35edc7=[];while(_0x3a2364['length']){const _0x498305=queries_1[_0x27de47(0x234)][_0x27de47(0x21a)](_0x27de47(0x231),_0x3a2364['splice'](0x0,this[_0x27de47(0x1f7)])[_0x27de47(0x20e)](_0x5e8a94=>'\x27'+_0x5e8a94+'\x27')[_0x27de47(0x1fd)](',')),_0x3e04f0=await this[_0x27de47(0x20b)][_0x27de47(0x1f9)](_0x498305);_0x35edc7[_0x27de47(0x230)](..._0x3e04f0[_0x27de47(0x20e)](_0x27c6ac=>_0x27c6ac['Id']));}return _0x35edc7;}async[a130_0x3c13dc(0x226)](_0x4c0d28,_0xc8af4){const _0x47093e=a130_0x3c13dc;return this[_0x47093e(0x239)][_0x47093e(0x20f)](constants_1[_0x47093e(0x1fc)],{[constants_1['FLOSUM_NAMESPACE']+_0x47093e(0x1f2)]:_0xc8af4,[constants_1[_0x47093e(0x20a)]+_0x47093e(0x1f3)]:_0x4c0d28[_0x47093e(0x235)](0x0,0xff),[constants_1[_0x47093e(0x20a)]+_0x47093e(0x21e)]:'Completed',[constants_1[_0x47093e(0x1f6)]+_0x47093e(0x223)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a130_0x3c13dc(0x1fe)](),__metadata('design:paramtypes',[salesforce_query_service_1[a130_0x3c13dc(0x210)],salesforce_rest_service_1[a130_0x3c13dc(0x224)]])],SalesforceGitSyncService),exports[a130_0x3c13dc(0x209)]=SalesforceGitSyncService;