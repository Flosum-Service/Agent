const a129_0x3cb6b1=a129_0x44f0;(function(_0x53dbca,_0x33ff74){const _0x557ae6=a129_0x44f0,_0x2674cd=_0x53dbca();while(!![]){try{const _0xf612ad=-parseInt(_0x557ae6(0x1e6))/0x1+-parseInt(_0x557ae6(0x1ef))/0x2+-parseInt(_0x557ae6(0x1e0))/0x3+parseInt(_0x557ae6(0x204))/0x4+-parseInt(_0x557ae6(0x20f))/0x5*(-parseInt(_0x557ae6(0x200))/0x6)+-parseInt(_0x557ae6(0x223))/0x7+parseInt(_0x557ae6(0x205))/0x8;if(_0xf612ad===_0x33ff74)break;else _0x2674cd['push'](_0x2674cd['shift']());}catch(_0x491f3c){_0x2674cd['push'](_0x2674cd['shift']());}}}(a129_0x1e4e,0xc4174));const a129_0x4d3698=(function(){let _0x504cb7=!![];return function(_0x34d68f,_0x463677){const _0x1e99be=_0x504cb7?function(){const _0x2dccdb=a129_0x44f0;if(_0x463677){const _0x3cd096=_0x463677[_0x2dccdb(0x1ed)](_0x34d68f,arguments);return _0x463677=null,_0x3cd096;}}:function(){};return _0x504cb7=![],_0x1e99be;};}()),a129_0x5b1c8f=a129_0x4d3698(this,function(){const _0x43552b=a129_0x44f0;return a129_0x5b1c8f[_0x43552b(0x1ff)]()[_0x43552b(0x1f4)](_0x43552b(0x1e8))['toString']()[_0x43552b(0x203)](a129_0x5b1c8f)[_0x43552b(0x1f4)]('(((.+)+)+)+$');});a129_0x5b1c8f();'use strict';var __decorate=this&&this[a129_0x3cb6b1(0x210)]||function(_0x3b0577,_0x23b32e,_0x11d07d,_0x1ccd67){const _0x953d55=a129_0x3cb6b1;var _0x2c944f=arguments['length'],_0x3e63c0=_0x2c944f<0x3?_0x23b32e:_0x1ccd67===null?_0x1ccd67=Object['getOwnPropertyDescriptor'](_0x23b32e,_0x11d07d):_0x1ccd67,_0x14a615;if(typeof Reflect===_0x953d55(0x21a)&&typeof Reflect[_0x953d55(0x1fe)]==='function')_0x3e63c0=Reflect[_0x953d55(0x1fe)](_0x3b0577,_0x23b32e,_0x11d07d,_0x1ccd67);else{for(var _0x2b9f5b=_0x3b0577[_0x953d55(0x1eb)]-0x1;_0x2b9f5b>=0x0;_0x2b9f5b--)if(_0x14a615=_0x3b0577[_0x2b9f5b])_0x3e63c0=(_0x2c944f<0x3?_0x14a615(_0x3e63c0):_0x2c944f>0x3?_0x14a615(_0x23b32e,_0x11d07d,_0x3e63c0):_0x14a615(_0x23b32e,_0x11d07d))||_0x3e63c0;}return _0x2c944f>0x3&&_0x3e63c0&&Object[_0x953d55(0x219)](_0x23b32e,_0x11d07d,_0x3e63c0),_0x3e63c0;},__metadata=this&&this[a129_0x3cb6b1(0x216)]||function(_0xe5c1c,_0x520af1){const _0x463d24=a129_0x3cb6b1;if(typeof Reflect===_0x463d24(0x21a)&&typeof Reflect['metadata']===_0x463d24(0x1fc))return Reflect[_0x463d24(0x1ec)](_0xe5c1c,_0x520af1);};Object[a129_0x3cb6b1(0x219)](exports,a129_0x3cb6b1(0x20d),{'value':!![]}),exports[a129_0x3cb6b1(0x21c)]=void 0x0;function a129_0x1e4e(){const _0xe92fcd=['splice','11024342wQSeOc','../../../constants','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','getBranchIdByName','GET_REPOSITORY_COMPONENTS_QUERY','%componentIds%','Component_Type__c','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','fetchRepositoryComponentsByFilenames','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','3274035awwFsa','%name%','%fileNames%','../utils/flosum-naming.utils','MAX_QUERY_ARRAY_ITEMS','createCommit','755727guYWpo','Service','(((.+)+)+)+$','extractFieldsFromRecord','Is_From_Agent__c','length','metadata','apply','GET_REPOSITORY_BY_NAME_QUERY','2479250SLpHbY','GET_BRANCH_COMPONENTS_QUERY','post','%repositoryId%','Branch\x20\x22','search','Component_Name__c','getComponentRecordTypes','Repository\x20\x22','query','%branchId%','extractComponentMetadataFromRecord','queryService','function','fetchBranchComponents','decorate','toString','18EzVuuU','\x22\x20not\x20found\x20in\x20flosum.','typedi','constructor','4409212jaycdf','22563880whXRng','File_Name__c','restService','fetchRepositoryComponents','./salesforce-rest.service','../queries','map','Name','__esModule','push','2570005SFqDFS','__decorate','FLOSUM_COMMIT','replace','FLOSUM_NAMESPACE','SalesforceQueryService','GET_COMPONENT_RECORD_TYPES_QUERY','__metadata','fetchBranchComponentsByFilenames','./salesforce-query.service','defineProperty','object','substr','SalesforceGitSyncService','join','Commit_Name__c','CRC32__c','Completed','Version__c'];a129_0x1e4e=function(){return _0xe92fcd;};return a129_0x1e4e();}function a129_0x44f0(_0x494fcf,_0x5a5fe0){const _0x1e5418=a129_0x1e4e();return a129_0x44f0=function(_0x5b1c8f,_0x4d3698){_0x5b1c8f=_0x5b1c8f-0x1d7;let _0x1e4e79=_0x1e5418[_0x5b1c8f];return _0x1e4e79;},a129_0x44f0(_0x494fcf,_0x5a5fe0);}const not_found_error_1=require('../../../core/errors/not-found.error'),typedi_1=require(a129_0x3cb6b1(0x202)),constants_1=require(a129_0x3cb6b1(0x1d7)),queries_1=require(a129_0x3cb6b1(0x20a)),flosum_naming_utils_1=require(a129_0x3cb6b1(0x1e3)),salesforce_query_service_1=require(a129_0x3cb6b1(0x218)),salesforce_rest_service_1=require(a129_0x3cb6b1(0x209));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x57eb12,_0x128bd8){const _0x4f1919=a129_0x3cb6b1;this[_0x4f1919(0x1fb)]=_0x57eb12,this[_0x4f1919(0x207)]=_0x128bd8,this[_0x4f1919(0x1e4)]=0xc8;}[a129_0x3cb6b1(0x1fa)](_0x4e4eee){const _0x20da61=a129_0x3cb6b1,_0x9c933c=flosum_naming_utils_1[_0x20da61(0x1e9)](_0x4e4eee,[_0x20da61(0x1f5),'Component_Type__c',_0x20da61(0x21f),'File_Name__c',_0x20da61(0x221),'Id']);return{'id':_0x9c933c['Id'],'name':_0x9c933c[_0x20da61(0x1f5)],'type':_0x9c933c[_0x20da61(0x1dc)],'fileName':_0x9c933c[_0x20da61(0x206)],'crc32':_0x9c933c[_0x20da61(0x21f)],'version':+_0x9c933c[_0x20da61(0x221)]};}async['getRepositoryIdByName'](_0x54ed65){const _0x91c027=a129_0x3cb6b1,[_0xd9b902]=await this[_0x91c027(0x1fb)][_0x91c027(0x1f8)](queries_1[_0x91c027(0x1ee)]['replace']('%name%',_0x54ed65));if(!_0xd9b902)throw new not_found_error_1['NotFoundError'](_0x91c027(0x1f7)+_0x54ed65+_0x91c027(0x201));return _0xd9b902['Id'];}async[a129_0x3cb6b1(0x1d9)](_0x9709f5){const _0xcc5dd9=a129_0x3cb6b1,[_0x28d450]=await this['queryService'][_0xcc5dd9(0x1f8)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0xcc5dd9(0x212)](_0xcc5dd9(0x1e1),_0x9709f5));if(!_0x28d450)throw new not_found_error_1['NotFoundError'](_0xcc5dd9(0x1f3)+_0x9709f5+_0xcc5dd9(0x201));return _0x28d450['Id'];}async[a129_0x3cb6b1(0x1f6)](){const _0x18c013=a129_0x3cb6b1,_0x22f129=await this[_0x18c013(0x1fb)][_0x18c013(0x1f8)](queries_1[_0x18c013(0x215)]);return _0x22f129[_0x18c013(0x20b)](_0x233c09=>flosum_naming_utils_1[_0x18c013(0x1e9)](_0x233c09,['Id',_0x18c013(0x20c)]))[_0x18c013(0x20b)](_0x46518f=>({'id':_0x46518f['Id'],'name':_0x46518f[_0x18c013(0x20c)]}));}async[a129_0x3cb6b1(0x1de)](_0x329aaa,_0x186467){const _0x555e5b=a129_0x3cb6b1,_0x356a5b=[];while(_0x329aaa[_0x555e5b(0x1eb)]){const _0xef916a=queries_1[_0x555e5b(0x1df)][_0x555e5b(0x212)](_0x555e5b(0x1e2),_0x329aaa[_0x555e5b(0x222)](0x0,this[_0x555e5b(0x1e4)])[_0x555e5b(0x20b)](_0x3f722e=>'\x27'+_0x3f722e+'\x27')['join'](','))[_0x555e5b(0x212)](_0x555e5b(0x1f2),_0x186467),_0x623938=await this[_0x555e5b(0x1fb)][_0x555e5b(0x1f8)](_0xef916a);_0x356a5b['push'](..._0x623938);}return _0x356a5b[_0x555e5b(0x20b)](_0x2ee21f=>this['extractComponentMetadataFromRecord'](_0x2ee21f));}async[a129_0x3cb6b1(0x217)](_0x1dbd4a,_0x49ad85){const _0x12b4a4=a129_0x3cb6b1,_0x2f688=[];while(_0x1dbd4a['length']){const _0x1223cb=queries_1[_0x12b4a4(0x1dd)][_0x12b4a4(0x212)](_0x12b4a4(0x1e2),_0x1dbd4a[_0x12b4a4(0x222)](0x0,this[_0x12b4a4(0x1e4)])[_0x12b4a4(0x20b)](_0x4d896e=>'\x27'+_0x4d896e+'\x27')[_0x12b4a4(0x21d)](','))[_0x12b4a4(0x212)](_0x12b4a4(0x1f9),_0x49ad85),_0x20a6eb=await this[_0x12b4a4(0x1fb)][_0x12b4a4(0x1f8)](_0x1223cb);_0x2f688[_0x12b4a4(0x20e)](..._0x20a6eb);}return _0x2f688[_0x12b4a4(0x20b)](_0x1f177b=>this[_0x12b4a4(0x1fa)](_0x1f177b));}async[a129_0x3cb6b1(0x208)](_0x44f35f){const _0x5794de=a129_0x3cb6b1,_0x4382d1=[],_0x334798=queries_1[_0x5794de(0x1da)]['replace'](_0x5794de(0x1f2),_0x44f35f),_0x3a997b=await this['queryService'][_0x5794de(0x1f8)](_0x334798);return _0x4382d1['push'](..._0x3a997b),_0x4382d1[_0x5794de(0x20b)](_0x3f3ba2=>this[_0x5794de(0x1fa)](_0x3f3ba2));}async[a129_0x3cb6b1(0x1fd)](_0x130b44){const _0x2d798b=a129_0x3cb6b1,_0x21b73b=[],_0x65639c=queries_1[_0x2d798b(0x1f0)][_0x2d798b(0x212)](_0x2d798b(0x1f9),_0x130b44),_0x4553e4=await this[_0x2d798b(0x1fb)][_0x2d798b(0x1f8)](_0x65639c);return _0x21b73b[_0x2d798b(0x20e)](..._0x4553e4),_0x21b73b['map'](_0x5dd9d1=>this['extractComponentMetadataFromRecord'](_0x5dd9d1));}async['fetchCommitManifestsByComponentIds'](_0x52a128){const _0x5c6813=a129_0x3cb6b1,_0x3d3044=[..._0x52a128],_0x29de80=[];while(_0x3d3044[_0x5c6813(0x1eb)]){const _0x2d15c8=queries_1[_0x5c6813(0x1d8)][_0x5c6813(0x212)](_0x5c6813(0x1db),_0x3d3044['splice'](0x0,this[_0x5c6813(0x1e4)])[_0x5c6813(0x20b)](_0x4285d6=>'\x27'+_0x4285d6+'\x27')['join'](',')),_0x4c77aa=await this[_0x5c6813(0x1fb)]['query'](_0x2d15c8);_0x29de80[_0x5c6813(0x20e)](..._0x4c77aa[_0x5c6813(0x20b)](_0x7aac4a=>_0x7aac4a['Id']));}return _0x29de80;}async[a129_0x3cb6b1(0x1e5)](_0x3cfdd9,_0x154108){const _0x28d04e=a129_0x3cb6b1;return this['restService'][_0x28d04e(0x1f1)](constants_1[_0x28d04e(0x211)],{[constants_1[_0x28d04e(0x213)]+'Repository__c']:_0x154108,[constants_1['FLOSUM_NAMESPACE']+_0x28d04e(0x21e)]:_0x3cfdd9[_0x28d04e(0x21b)](0x0,0xff),[constants_1[_0x28d04e(0x213)]+'Status__c']:_0x28d04e(0x220),[constants_1['FLOSUM_GIT_NAMESPACE']+_0x28d04e(0x1ea)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a129_0x3cb6b1(0x1e7)](),__metadata('design:paramtypes',[salesforce_query_service_1[a129_0x3cb6b1(0x214)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;