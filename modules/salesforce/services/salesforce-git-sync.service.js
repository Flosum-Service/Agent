const a130_0x362464=a130_0x30bb;(function(_0x147558,_0x378146){const _0xfe0f89=a130_0x30bb,_0x50ead9=_0x147558();while(!![]){try{const _0x4ca596=parseInt(_0xfe0f89(0x1f4))/0x1+parseInt(_0xfe0f89(0x215))/0x2*(parseInt(_0xfe0f89(0x200))/0x3)+-parseInt(_0xfe0f89(0x1f8))/0x4+-parseInt(_0xfe0f89(0x223))/0x5+parseInt(_0xfe0f89(0x22a))/0x6*(-parseInt(_0xfe0f89(0x217))/0x7)+-parseInt(_0xfe0f89(0x222))/0x8+parseInt(_0xfe0f89(0x1fc))/0x9;if(_0x4ca596===_0x378146)break;else _0x50ead9['push'](_0x50ead9['shift']());}catch(_0x1956b8){_0x50ead9['push'](_0x50ead9['shift']());}}}(a130_0x5834,0xc6a2f));function a130_0x30bb(_0x7dadc0,_0x2be558){const _0xcfe7b9=a130_0x5834();return a130_0x30bb=function(_0x5a5230,_0x5ab58d){_0x5a5230=_0x5a5230-0x1f1;let _0x5834ed=_0xcfe7b9[_0x5a5230];return _0x5834ed;},a130_0x30bb(_0x7dadc0,_0x2be558);}function a130_0x5834(){const _0x2d66c0=['SalesforceQueryService','__metadata','Repository__c','object','CRC32__c','Completed','Branch\x20\x22','2919962TZCDfW','restService','79009cSwwdn','FLOSUM_GIT_NAMESPACE','toString','extractFieldsFromRecord','Commit_Name__c','query','fetchBranchComponents','%repositoryId%','queryService','map','../../../core/errors/not-found.error','11016136xtqUkq','7284610DzjCSD','function','NotFoundError','Status__c','constructor','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','defineProperty','414psrlJU','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','\x22\x20not\x20found\x20in\x20flosum.','fetchRepositoryComponents','GET_BRANCH_COMPONENTS_QUERY','getRepositoryIdByName','createCommit','SalesforceRestService','Component_Type__c','%componentIds%','MAX_QUERY_ARRAY_ITEMS','fetchBranchComponentsByFilenames','SalesforceGitSyncService','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','push','getBranchIdByName','search','FLOSUM_NAMESPACE','design:paramtypes','getOwnPropertyDescriptor','Service','splice','999450sMRvkI','../utils/flosum-naming.utils','length','metadata','466088vsDSmJ','%name%','Name','Is_From_Agent__c','18751032jjYzlR','substr','./salesforce-rest.service','replace','3lubxrb','typedi','%branchId%','(((.+)+)+)+$','FLOSUM_COMMIT','File_Name__c','decorate','%fileNames%','../../../constants','Repository\x20\x22','extractComponentMetadataFromRecord','GET_REPOSITORY_BY_NAME_QUERY','__decorate','join'];a130_0x5834=function(){return _0x2d66c0;};return a130_0x5834();}const a130_0x5ab58d=(function(){let _0xf88a42=!![];return function(_0x4ddc03,_0x121d49){const _0x4a2b2e=_0xf88a42?function(){if(_0x121d49){const _0x16d20f=_0x121d49['apply'](_0x4ddc03,arguments);return _0x121d49=null,_0x16d20f;}}:function(){};return _0xf88a42=![],_0x4a2b2e;};}()),a130_0x5a5230=a130_0x5ab58d(this,function(){const _0x223733=a130_0x30bb;return a130_0x5a5230[_0x223733(0x219)]()['search'](_0x223733(0x203))['toString']()[_0x223733(0x227)](a130_0x5a5230)[_0x223733(0x23a)](_0x223733(0x203));});a130_0x5a5230();'use strict';var __decorate=this&&this[a130_0x362464(0x20c)]||function(_0x13cd04,_0x260ff1,_0x5b8402,_0x3a67ea){const _0x2df5cf=a130_0x362464;var _0x5a88a9=arguments[_0x2df5cf(0x1f6)],_0x410fcc=_0x5a88a9<0x3?_0x260ff1:_0x3a67ea===null?_0x3a67ea=Object[_0x2df5cf(0x1f1)](_0x260ff1,_0x5b8402):_0x3a67ea,_0x156404;if(typeof Reflect==='object'&&typeof Reflect[_0x2df5cf(0x206)]===_0x2df5cf(0x224))_0x410fcc=Reflect[_0x2df5cf(0x206)](_0x13cd04,_0x260ff1,_0x5b8402,_0x3a67ea);else{for(var _0x56ebbe=_0x13cd04[_0x2df5cf(0x1f6)]-0x1;_0x56ebbe>=0x0;_0x56ebbe--)if(_0x156404=_0x13cd04[_0x56ebbe])_0x410fcc=(_0x5a88a9<0x3?_0x156404(_0x410fcc):_0x5a88a9>0x3?_0x156404(_0x260ff1,_0x5b8402,_0x410fcc):_0x156404(_0x260ff1,_0x5b8402))||_0x410fcc;}return _0x5a88a9>0x3&&_0x410fcc&&Object[_0x2df5cf(0x229)](_0x260ff1,_0x5b8402,_0x410fcc),_0x410fcc;},__metadata=this&&this[a130_0x362464(0x20f)]||function(_0x3c29f9,_0x44073f){const _0x44243e=a130_0x362464;if(typeof Reflect===_0x44243e(0x211)&&typeof Reflect[_0x44243e(0x1f7)]==='function')return Reflect[_0x44243e(0x1f7)](_0x3c29f9,_0x44073f);};Object[a130_0x362464(0x229)](exports,'__esModule',{'value':!![]}),exports[a130_0x362464(0x236)]=void 0x0;const not_found_error_1=require(a130_0x362464(0x221)),typedi_1=require(a130_0x362464(0x201)),constants_1=require(a130_0x362464(0x208)),queries_1=require('../queries'),flosum_naming_utils_1=require(a130_0x362464(0x1f5)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a130_0x362464(0x1fe));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x225db4,_0x2792e6){const _0x572f1e=a130_0x362464;this[_0x572f1e(0x21f)]=_0x225db4,this[_0x572f1e(0x216)]=_0x2792e6,this[_0x572f1e(0x234)]=0xc8;}['extractComponentMetadataFromRecord'](_0xe90f24){const _0x4eec60=a130_0x362464,_0xc529d1=flosum_naming_utils_1['extractFieldsFromRecord'](_0xe90f24,['Component_Name__c',_0x4eec60(0x232),'CRC32__c',_0x4eec60(0x205),'Version__c','Id']);return{'id':_0xc529d1['Id'],'name':_0xc529d1['Component_Name__c'],'type':_0xc529d1[_0x4eec60(0x232)],'fileName':_0xc529d1[_0x4eec60(0x205)],'crc32':_0xc529d1[_0x4eec60(0x212)],'version':+_0xc529d1['Version__c']};}async[a130_0x362464(0x22f)](_0x2cdd09){const _0x80a844=a130_0x362464,[_0x3e2743]=await this['queryService'][_0x80a844(0x21c)](queries_1[_0x80a844(0x20b)][_0x80a844(0x1ff)](_0x80a844(0x1f9),_0x2cdd09));if(!_0x3e2743)throw new not_found_error_1[(_0x80a844(0x225))](_0x80a844(0x209)+_0x2cdd09+_0x80a844(0x22c));return _0x3e2743['Id'];}async[a130_0x362464(0x239)](_0x2e978d){const _0x452692=a130_0x362464,[_0x4ffa28]=await this[_0x452692(0x21f)][_0x452692(0x21c)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x452692(0x1ff)]('%name%',_0x2e978d));if(!_0x4ffa28)throw new not_found_error_1['NotFoundError'](_0x452692(0x214)+_0x2e978d+_0x452692(0x22c));return _0x4ffa28['Id'];}async['getComponentRecordTypes'](){const _0x15cc58=a130_0x362464,_0x4ac4f0=await this[_0x15cc58(0x21f)][_0x15cc58(0x21c)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x4ac4f0[_0x15cc58(0x220)](_0x8269f3=>flosum_naming_utils_1[_0x15cc58(0x21a)](_0x8269f3,['Id',_0x15cc58(0x1fa)]))['map'](_0x4ee098=>({'id':_0x4ee098['Id'],'name':_0x4ee098[_0x15cc58(0x1fa)]}));}async['fetchRepositoryComponentsByFilenames'](_0x90fcab,_0x3e104e){const _0x499eee=a130_0x362464,_0x2c74c3=[];while(_0x90fcab['length']){const _0x1d090d=queries_1[_0x499eee(0x22b)][_0x499eee(0x1ff)](_0x499eee(0x207),_0x90fcab[_0x499eee(0x1f3)](0x0,this[_0x499eee(0x234)])[_0x499eee(0x220)](_0x24bf6c=>'\x27'+_0x24bf6c+'\x27')[_0x499eee(0x20d)](','))[_0x499eee(0x1ff)](_0x499eee(0x21e),_0x3e104e),_0x87b50e=await this[_0x499eee(0x21f)][_0x499eee(0x21c)](_0x1d090d);_0x2c74c3[_0x499eee(0x238)](..._0x87b50e);}return _0x2c74c3[_0x499eee(0x220)](_0x2e50cf=>this[_0x499eee(0x20a)](_0x2e50cf));}async[a130_0x362464(0x235)](_0x3f56d6,_0x557f68){const _0x15fa80=a130_0x362464,_0x17845c=[];while(_0x3f56d6[_0x15fa80(0x1f6)]){const _0x2e1605=queries_1[_0x15fa80(0x228)][_0x15fa80(0x1ff)]('%fileNames%',_0x3f56d6['splice'](0x0,this[_0x15fa80(0x234)])[_0x15fa80(0x220)](_0x1d8d8d=>'\x27'+_0x1d8d8d+'\x27')[_0x15fa80(0x20d)](','))['replace'](_0x15fa80(0x202),_0x557f68),_0x2d2a2f=await this[_0x15fa80(0x21f)][_0x15fa80(0x21c)](_0x2e1605);_0x17845c[_0x15fa80(0x238)](..._0x2d2a2f);}return _0x17845c[_0x15fa80(0x220)](_0xa498ae=>this['extractComponentMetadataFromRecord'](_0xa498ae));}async[a130_0x362464(0x22d)](_0x7e1ab8){const _0x14ac9d=a130_0x362464,_0x3fc878=[],_0x2cbe05=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x14ac9d(0x1ff)](_0x14ac9d(0x21e),_0x7e1ab8),_0x3c7eab=await this[_0x14ac9d(0x21f)][_0x14ac9d(0x21c)](_0x2cbe05);return _0x3fc878['push'](..._0x3c7eab),_0x3fc878[_0x14ac9d(0x220)](_0x492d9f=>this['extractComponentMetadataFromRecord'](_0x492d9f));}async[a130_0x362464(0x21d)](_0x2d1357){const _0xf7ab1a=a130_0x362464,_0x1bd14d=[],_0x4bb180=queries_1[_0xf7ab1a(0x22e)][_0xf7ab1a(0x1ff)](_0xf7ab1a(0x202),_0x2d1357),_0x4109c3=await this['queryService'][_0xf7ab1a(0x21c)](_0x4bb180);return _0x1bd14d[_0xf7ab1a(0x238)](..._0x4109c3),_0x1bd14d[_0xf7ab1a(0x220)](_0x48d85c=>this['extractComponentMetadataFromRecord'](_0x48d85c));}async['fetchCommitManifestsByComponentIds'](_0x5608b6){const _0x2becc4=a130_0x362464,_0x52887b=[..._0x5608b6],_0x52317c=[];while(_0x52887b['length']){const _0x2600ea=queries_1[_0x2becc4(0x237)][_0x2becc4(0x1ff)](_0x2becc4(0x233),_0x52887b['splice'](0x0,this[_0x2becc4(0x234)])['map'](_0x2cd44c=>'\x27'+_0x2cd44c+'\x27')[_0x2becc4(0x20d)](',')),_0x424e3d=await this[_0x2becc4(0x21f)][_0x2becc4(0x21c)](_0x2600ea);_0x52317c[_0x2becc4(0x238)](..._0x424e3d[_0x2becc4(0x220)](_0x49dde5=>_0x49dde5['Id']));}return _0x52317c;}async[a130_0x362464(0x230)](_0x38d2b9,_0x46be71){const _0x359dc2=a130_0x362464;return this[_0x359dc2(0x216)]['post'](constants_1[_0x359dc2(0x204)],{[constants_1['FLOSUM_NAMESPACE']+_0x359dc2(0x210)]:_0x46be71,[constants_1[_0x359dc2(0x23b)]+_0x359dc2(0x21b)]:_0x38d2b9[_0x359dc2(0x1fd)](0x0,0xff),[constants_1[_0x359dc2(0x23b)]+_0x359dc2(0x226)]:_0x359dc2(0x213),[constants_1[_0x359dc2(0x218)]+_0x359dc2(0x1fb)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a130_0x362464(0x1f2)](),__metadata(a130_0x362464(0x23c),[salesforce_query_service_1[a130_0x362464(0x20e)],salesforce_rest_service_1[a130_0x362464(0x231)]])],SalesforceGitSyncService),exports[a130_0x362464(0x236)]=SalesforceGitSyncService;