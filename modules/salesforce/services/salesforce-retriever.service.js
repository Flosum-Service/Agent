function a134_0x1088(){const _0x5150d=['fileType','retrieveComponents','FlosumComponentHistoryDto','splice','default','manually\x20retrieving\x20components\x20from\x20salesforce','../../../core','./salesforce-query.service','defineProperty','2705199sflpsC','SalesforceRetrieverService','salesforceService','556565mAUwwi','toString','map','retrieveLastComponents','filename','GET_COMPONENT_HISTORIES_BY_IDS','retrieveComponentIdsFromHistoryIds','components','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','query','104853zkbmgI','__esModule','22552VhvTfJ','get','log','COMPONENTS_PER_QUERY','%ids%','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','COMPONENTS_PER_REQUEST','constructor','12644970FgWnor','(((.+)+)+)+$','name','logger','../queries','retrieveAttachment','../dto/flosum-component-history.dto','fileName','length','info','fromSalesforce','SalesforceQueryService','typedi','135fWvpOw','253740GwhEpS','push','replace','20NBXMgR','search','run','find','193128NeefOP','join','manually\x20retrieved\x20%d/%d\x20components','then','6StbwhN','Name','apply','ids'];a134_0x1088=function(){return _0x5150d;};return a134_0x1088();}const a134_0x4afc13=a134_0x19d7;(function(_0x1c61c0,_0x1abe7c){const _0x136760=a134_0x19d7,_0x1ed24d=_0x1c61c0();while(!![]){try{const _0x23afda=-parseInt(_0x136760(0x1b1))/0x1+-parseInt(_0x136760(0x1b8))/0x2+-parseInt(_0x136760(0x1d6))/0x3*(parseInt(_0x136760(0x1b4))/0x4)+-parseInt(_0x136760(0x1cc))/0x5*(parseInt(_0x136760(0x1bc))/0x6)+-parseInt(_0x136760(0x1c9))/0x7+parseInt(_0x136760(0x19b))/0x8*(-parseInt(_0x136760(0x1b0))/0x9)+parseInt(_0x136760(0x1a3))/0xa;if(_0x23afda===_0x1abe7c)break;else _0x1ed24d['push'](_0x1ed24d['shift']());}catch(_0x409ce3){_0x1ed24d['push'](_0x1ed24d['shift']());}}}(a134_0x1088,0x30ad7));const a134_0x57a7c7=(function(){let _0x2587d7=!![];return function(_0x481853,_0x3d64bb){const _0xb2742b=_0x2587d7?function(){const _0x421098=a134_0x19d7;if(_0x3d64bb){const _0x30db5a=_0x3d64bb[_0x421098(0x1be)](_0x481853,arguments);return _0x3d64bb=null,_0x30db5a;}}:function(){};return _0x2587d7=![],_0xb2742b;};}()),a134_0x132080=a134_0x57a7c7(this,function(){const _0x32bbe7=a134_0x19d7;return a134_0x132080[_0x32bbe7(0x1cd)]()[_0x32bbe7(0x1b5)](_0x32bbe7(0x1a4))['toString']()[_0x32bbe7(0x1a2)](a134_0x132080)[_0x32bbe7(0x1b5)](_0x32bbe7(0x1a4));});function a134_0x19d7(_0x157e48,_0x533d40){const _0xfaa849=a134_0x1088();return a134_0x19d7=function(_0x132080,_0x57a7c7){_0x132080=_0x132080-0x19b;let _0x1088f5=_0xfaa849[_0x132080];return _0x1088f5;},a134_0x19d7(_0x157e48,_0x533d40);}a134_0x132080();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x320549){const _0x503da2=a134_0x19d7;return _0x320549&&_0x320549[_0x503da2(0x1d7)]?_0x320549:{'default':_0x320549};};Object[a134_0x4afc13(0x1c8)](exports,a134_0x4afc13(0x1d7),{'value':!![]}),exports[a134_0x4afc13(0x1ca)]=void 0x0;const core_1=require(a134_0x4afc13(0x1c6)),typedi_1=__importDefault(require(a134_0x4afc13(0x1af))),salesforce_query_service_1=require(a134_0x4afc13(0x1c7)),queries_1=require(a134_0x4afc13(0x1a7)),flosum_component_history_dto_1=require(a134_0x4afc13(0x1a9));class SalesforceRetrieverService{constructor(_0x4ef7df){const _0x2bed13=a134_0x4afc13;this[_0x2bed13(0x1cb)]=_0x4ef7df,this['logger']=new core_1['Logger'](SalesforceRetrieverService[_0x2bed13(0x1a5)]),this[_0x2bed13(0x1a1)]=0xbb8,this[_0x2bed13(0x19e)]=0x1f4;}async[a134_0x4afc13(0x1d2)](_0x3aa529){const _0x16aeee=a134_0x4afc13;this['logger']['info'](_0x16aeee(0x1d4),_0x3aa529[_0x16aeee(0x1ab)]);const _0x365022=typedi_1[_0x16aeee(0x1c4)][_0x16aeee(0x19c)](salesforce_query_service_1[_0x16aeee(0x1ae)]),_0x1760fd=_0x3aa529[_0x16aeee(0x1ce)](_0x1b0243=>'\x27'+_0x1b0243+'\x27'),_0x125308=[];while(_0x1760fd[_0x16aeee(0x1ab)]){const _0x1f4f5f=_0x1760fd[_0x16aeee(0x1c3)](0x0,this['COMPONENTS_PER_QUERY']),_0x6f5bac=_0x365022[_0x16aeee(0x1d5)](queries_1['GET_ATTACHMENT_BY_PARENT_IDS_QUERY'][_0x16aeee(0x1b3)]('%parent_ids%',_0x1f4f5f[_0x16aeee(0x1b9)]())),_0x9c9f8e=_0x365022[_0x16aeee(0x1d5)](queries_1[_0x16aeee(0x1d1)]['replace'](_0x16aeee(0x19f),_0x1f4f5f[_0x16aeee(0x1b9)]()))[_0x16aeee(0x1bb)](_0x3d4018=>_0x3d4018[_0x16aeee(0x1ce)](_0x2c63a7=>flosum_component_history_dto_1[_0x16aeee(0x1c2)][_0x16aeee(0x1ad)](_0x2c63a7))),[_0x1c4e05,_0x8b820e]=await Promise['all']([_0x6f5bac,_0x9c9f8e]);for(const _0x33828d of _0x8b820e){const _0x3bc0cf=_0x1c4e05[_0x16aeee(0x1b7)](_0x3d70e6=>_0x3d70e6['ParentId']===_0x33828d['id']);_0x3bc0cf&&_0x125308[_0x16aeee(0x1b2)]({'fileType':_0x3bc0cf[_0x16aeee(0x1bd)],'fileName':_0x33828d[_0x16aeee(0x1d0)],'attachmentId':_0x3bc0cf['Id']});}}return _0x125308;}async[a134_0x4afc13(0x1cf)](_0x1be3ef){const _0x93088e=a134_0x4afc13,_0x7b83e4=await this[_0x93088e(0x1d2)](_0x1be3ef);this[_0x93088e(0x1a6)]['info'](_0x93088e(0x1c5));const _0x2bbb2c=[];for(const _0x382761 of _0x7b83e4){const _0x3054ba=await this[_0x93088e(0x1cb)][_0x93088e(0x1a8)](_0x382761['attachmentId'],!![]);_0x2bbb2c[_0x93088e(0x1b2)]({'body':_0x3054ba[_0x93088e(0x1cd)]('base64'),'fileName':_0x382761[_0x93088e(0x1aa)],'fileType':_0x382761[_0x93088e(0x1c0)]}),this['logger'][_0x93088e(0x1ac)](_0x93088e(0x1ba),_0x2bbb2c['length'],_0x1be3ef['length']);}return _0x2bbb2c;}async[a134_0x4afc13(0x1b6)](_0x48bc06){const _0x1bfa12=a134_0x4afc13,_0x5193a0=[..._0x48bc06],_0x19afd0=[],_0x1f06a6=[];while(_0x5193a0[_0x1bfa12(0x1ab)]){const _0x3161ea=_0x5193a0[_0x1bfa12(0x1c3)](0x0,this[_0x1bfa12(0x1a1)]),_0x1f9f39=await this[_0x1bfa12(0x1cb)][_0x1bfa12(0x1c1)](_0x3161ea);_0x3161ea[_0x1bfa12(0x1ab)]!==_0x1f9f39[_0x1bfa12(0x1bf)][_0x1bfa12(0x1ab)]?(_0x5193a0['push'](..._0x1f9f39[_0x1bfa12(0x1bf)]),_0x19afd0[_0x1bfa12(0x1b2)](..._0x1f9f39[_0x1bfa12(0x1d3)])):_0x1f06a6[_0x1bfa12(0x1b2)](..._0x3161ea),this['logger'][_0x1bfa12(0x19d)](_0x1bfa12(0x1a0),_0x48bc06['length']-_0x5193a0[_0x1bfa12(0x1ab)],_0x48bc06['length']);}if(_0x1f06a6[_0x1bfa12(0x1ab)]){const _0x3ae5b6=await this['retrieveLastComponents'](_0x1f06a6);_0x19afd0[_0x1bfa12(0x1b2)](..._0x3ae5b6);}return _0x19afd0;}}exports[a134_0x4afc13(0x1ca)]=SalesforceRetrieverService;