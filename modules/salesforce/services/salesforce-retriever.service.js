function a135_0x1eec(){const _0x5cbd21=['info','31422182zBLIVd','ids','all','default','get','retrieveAttachment','logger','apply','../dto/flosum-component-history.dto','%ids%','../../../core','manually\x20retrieved\x20%d/%d\x20components','salesforceService','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','find','defineProperty','6456FxnLTn','replace','%parent_ids%','Name','__importDefault','retrieveLastComponents','constructor','2114GDNggz','search','COMPONENTS_PER_REQUEST','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','retrieveComponentIdsFromHistoryIds','run','./salesforce-query.service','base64','typedi','COMPONENTS_PER_QUERY','486004yEOUDI','map','GET_COMPONENT_HISTORIES_BY_IDS','353jDdQmL','name','Logger','ParentId','fileType','query','3681798dysDQV','push','852blWBcj','SalesforceQueryService','filename','SalesforceRetrieverService','104310UbFTNO','join','attachmentId','log','20PdFCLZ','splice','length','(((.+)+)+)+$','__esModule','../queries','FlosumComponentHistoryDto','510cVAinZ','toString','2059158VYqjBi'];a135_0x1eec=function(){return _0x5cbd21;};return a135_0x1eec();}const a135_0x33affc=a135_0x478a;(function(_0x348749,_0x33ae1f){const _0x203fb2=a135_0x478a,_0x2fde25=_0x348749();while(!![]){try{const _0x23ce34=-parseInt(_0x203fb2(0x16d))/0x1*(-parseInt(_0x203fb2(0x175))/0x2)+-parseInt(_0x203fb2(0x146))/0x3+parseInt(_0x203fb2(0x16a))/0x4*(-parseInt(_0x203fb2(0x17d))/0x5)+-parseInt(_0x203fb2(0x173))/0x6+parseInt(_0x203fb2(0x15f))/0x7*(-parseInt(_0x203fb2(0x158))/0x8)+parseInt(_0x203fb2(0x179))/0x9*(-parseInt(_0x203fb2(0x184))/0xa)+parseInt(_0x203fb2(0x148))/0xb;if(_0x23ce34===_0x33ae1f)break;else _0x2fde25['push'](_0x2fde25['shift']());}catch(_0xee9ade){_0x2fde25['push'](_0x2fde25['shift']());}}}(a135_0x1eec,0x5e441));const a135_0x5efb4c=(function(){let _0x1d38ed=!![];return function(_0xbca3b6,_0x49c2e4){const _0x2bc36c=_0x1d38ed?function(){const _0x2de290=a135_0x478a;if(_0x49c2e4){const _0x34b05a=_0x49c2e4[_0x2de290(0x14f)](_0xbca3b6,arguments);return _0x49c2e4=null,_0x34b05a;}}:function(){};return _0x1d38ed=![],_0x2bc36c;};}()),a135_0x2aeade=a135_0x5efb4c(this,function(){const _0x47b0f3=a135_0x478a;return a135_0x2aeade['toString']()[_0x47b0f3(0x160)](_0x47b0f3(0x180))[_0x47b0f3(0x185)]()[_0x47b0f3(0x15e)](a135_0x2aeade)['search']('(((.+)+)+)+$');});a135_0x2aeade();function a135_0x478a(_0xb9333c,_0x4713cf){const _0x1969ec=a135_0x1eec();return a135_0x478a=function(_0x2aeade,_0x5efb4c){_0x2aeade=_0x2aeade-0x146;let _0x1eece9=_0x1969ec[_0x2aeade];return _0x1eece9;},a135_0x478a(_0xb9333c,_0x4713cf);}'use strict';var __importDefault=this&&this[a135_0x33affc(0x15c)]||function(_0x3fb388){const _0x157d30=a135_0x33affc;return _0x3fb388&&_0x3fb388[_0x157d30(0x181)]?_0x3fb388:{'default':_0x3fb388};};Object[a135_0x33affc(0x157)](exports,'__esModule',{'value':!![]}),exports[a135_0x33affc(0x178)]=void 0x0;const core_1=require(a135_0x33affc(0x152)),typedi_1=__importDefault(require(a135_0x33affc(0x168))),salesforce_query_service_1=require(a135_0x33affc(0x166)),queries_1=require(a135_0x33affc(0x182)),flosum_component_history_dto_1=require(a135_0x33affc(0x150));class SalesforceRetrieverService{constructor(_0x1ac921){const _0x30e292=a135_0x33affc;this['salesforceService']=_0x1ac921,this[_0x30e292(0x14e)]=new core_1[(_0x30e292(0x16f))](SalesforceRetrieverService[_0x30e292(0x16e)]),this[_0x30e292(0x161)]=0xbb8,this[_0x30e292(0x169)]=0x1f4;}async[a135_0x33affc(0x164)](_0x52172b){const _0x55673d=a135_0x33affc;this[_0x55673d(0x14e)][_0x55673d(0x147)](_0x55673d(0x163),_0x52172b[_0x55673d(0x17f)]);const _0x2d8d9c=typedi_1[_0x55673d(0x14b)][_0x55673d(0x14c)](salesforce_query_service_1[_0x55673d(0x176)]),_0x49dacc=_0x52172b[_0x55673d(0x16b)](_0x224ff7=>'\x27'+_0x224ff7+'\x27'),_0x18c442=[];while(_0x49dacc[_0x55673d(0x17f)]){const _0x2d3c3e=_0x49dacc[_0x55673d(0x17e)](0x0,this['COMPONENTS_PER_QUERY']),_0x5a63b3=_0x2d8d9c[_0x55673d(0x172)](queries_1[_0x55673d(0x155)]['replace'](_0x55673d(0x15a),_0x2d3c3e['join']())),_0x46c6f3=_0x2d8d9c[_0x55673d(0x172)](queries_1[_0x55673d(0x16c)][_0x55673d(0x159)](_0x55673d(0x151),_0x2d3c3e[_0x55673d(0x17a)]()))['then'](_0x17df00=>_0x17df00['map'](_0xa2c9ad=>flosum_component_history_dto_1[_0x55673d(0x183)]['fromSalesforce'](_0xa2c9ad))),[_0x32b351,_0x3aaefa]=await Promise[_0x55673d(0x14a)]([_0x5a63b3,_0x46c6f3]);for(const _0x48ee42 of _0x3aaefa){const _0xa09ab0=_0x32b351[_0x55673d(0x156)](_0x447817=>_0x447817[_0x55673d(0x170)]===_0x48ee42['id']);_0xa09ab0&&_0x18c442[_0x55673d(0x174)]({'fileType':_0xa09ab0[_0x55673d(0x15b)],'fileName':_0x48ee42[_0x55673d(0x177)],'attachmentId':_0xa09ab0['Id']});}}return _0x18c442;}async['retrieveLastComponents'](_0x3bea81){const _0x32d4c4=a135_0x33affc,_0x3f8f51=await this[_0x32d4c4(0x164)](_0x3bea81);this[_0x32d4c4(0x14e)][_0x32d4c4(0x147)]('manually\x20retrieving\x20components\x20from\x20salesforce');const _0x249288=[];for(const _0x38d9b7 of _0x3f8f51){const _0x120843=await this[_0x32d4c4(0x154)][_0x32d4c4(0x14d)](_0x38d9b7[_0x32d4c4(0x17b)],!![]);_0x249288[_0x32d4c4(0x174)]({'body':_0x120843[_0x32d4c4(0x185)](_0x32d4c4(0x167)),'fileName':_0x38d9b7['fileName'],'fileType':_0x38d9b7[_0x32d4c4(0x171)]}),this[_0x32d4c4(0x14e)][_0x32d4c4(0x147)](_0x32d4c4(0x153),_0x249288[_0x32d4c4(0x17f)],_0x3bea81[_0x32d4c4(0x17f)]);}return _0x249288;}async[a135_0x33affc(0x165)](_0x41c4c3){const _0x3f5753=a135_0x33affc,_0x50b564=[..._0x41c4c3],_0x302d93=[],_0x2536e3=[];while(_0x50b564[_0x3f5753(0x17f)]){const _0x47c5e8=_0x50b564[_0x3f5753(0x17e)](0x0,this['COMPONENTS_PER_REQUEST']),_0x3a7086=await this[_0x3f5753(0x154)]['retrieveComponents'](_0x47c5e8);_0x47c5e8['length']!==_0x3a7086[_0x3f5753(0x149)][_0x3f5753(0x17f)]?(_0x50b564[_0x3f5753(0x174)](..._0x3a7086['ids']),_0x302d93[_0x3f5753(0x174)](..._0x3a7086['components'])):_0x2536e3[_0x3f5753(0x174)](..._0x47c5e8),this[_0x3f5753(0x14e)][_0x3f5753(0x17c)](_0x3f5753(0x162),_0x41c4c3['length']-_0x50b564[_0x3f5753(0x17f)],_0x41c4c3[_0x3f5753(0x17f)]);}if(_0x2536e3[_0x3f5753(0x17f)]){const _0x38289c=await this[_0x3f5753(0x15d)](_0x2536e3);_0x302d93['push'](..._0x38289c);}return _0x302d93;}}exports[a135_0x33affc(0x178)]=SalesforceRetrieverService;