const a135_0x1d56a4=a135_0x4394;(function(_0x52a2cc,_0x1e5dea){const _0x55c672=a135_0x4394,_0x28a943=_0x52a2cc();while(!![]){try{const _0x892889=parseInt(_0x55c672(0x126))/0x1*(parseInt(_0x55c672(0x10f))/0x2)+parseInt(_0x55c672(0x136))/0x3+parseInt(_0x55c672(0x115))/0x4+-parseInt(_0x55c672(0x133))/0x5*(parseInt(_0x55c672(0x123))/0x6)+parseInt(_0x55c672(0x11f))/0x7*(-parseInt(_0x55c672(0x102))/0x8)+parseInt(_0x55c672(0x13d))/0x9*(-parseInt(_0x55c672(0x106))/0xa)+-parseInt(_0x55c672(0x12e))/0xb*(-parseInt(_0x55c672(0x10b))/0xc);if(_0x892889===_0x1e5dea)break;else _0x28a943['push'](_0x28a943['shift']());}catch(_0x285374){_0x28a943['push'](_0x28a943['shift']());}}}(a135_0x2478,0x209c6));const a135_0x1cab83=(function(){let _0x16d934=!![];return function(_0x26e92a,_0x3876a3){const _0x551471=_0x16d934?function(){const _0x8cd9e8=a135_0x4394;if(_0x3876a3){const _0x3b4e4c=_0x3876a3[_0x8cd9e8(0x13b)](_0x26e92a,arguments);return _0x3876a3=null,_0x3b4e4c;}}:function(){};return _0x16d934=![],_0x551471;};}()),a135_0x4e43d2=a135_0x1cab83(this,function(){const _0x2bd481=a135_0x4394;return a135_0x4e43d2[_0x2bd481(0x125)]()[_0x2bd481(0x139)]('(((.+)+)+)+$')['toString']()[_0x2bd481(0x119)](a135_0x4e43d2)['search']('(((.+)+)+)+$');});function a135_0x2478(){const _0x5afde1=['push','retrieveComponentIdsFromHistoryIds','fromSalesforce','query','247156GbAWYo','default','../../../core','base64','constructor','Logger','name','../dto/flosum-component-history.dto','fileName','__esModule','7Zzidij','GET_COMPONENT_HISTORIES_BY_IDS','run','fileType','4854Divzqm','splice','toString','141XJLJtc','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','replace','retrieveComponents','info','retrieveLastComponents','%ids%','manually\x20retrieving\x20components\x20from\x20salesforce','15807hXuhvP','all','./salesforce-query.service','COMPONENTS_PER_REQUEST','SalesforceRetrieverService','915tIIdGT','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','ids','662262gtOqfB','manually\x20retrieved\x20%d/%d\x20components','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','search','log','apply','retrieveAttachment','1066356KhWoMW','attachmentId','map','length','Name','64696rKLLEB','join','__importDefault','components','10JaBzhL','salesforceService','get','ParentId','COMPONENTS_PER_QUERY','948Rmnepo','logger','SalesforceQueryService','filename','172IuTaSH','typedi'];a135_0x2478=function(){return _0x5afde1;};return a135_0x2478();}a135_0x4e43d2();'use strict';var __importDefault=this&&this[a135_0x1d56a4(0x104)]||function(_0xeae5d2){const _0x25579b=a135_0x1d56a4;return _0xeae5d2&&_0xeae5d2[_0x25579b(0x11e)]?_0xeae5d2:{'default':_0xeae5d2};};Object['defineProperty'](exports,a135_0x1d56a4(0x11e),{'value':!![]}),exports[a135_0x1d56a4(0x132)]=void 0x0;function a135_0x4394(_0x5daaad,_0x29827d){const _0x1415f4=a135_0x2478();return a135_0x4394=function(_0x4e43d2,_0x1cab83){_0x4e43d2=_0x4e43d2-0x101;let _0x24782f=_0x1415f4[_0x4e43d2];return _0x24782f;},a135_0x4394(_0x5daaad,_0x29827d);}const core_1=require(a135_0x1d56a4(0x117)),typedi_1=__importDefault(require(a135_0x1d56a4(0x110))),salesforce_query_service_1=require(a135_0x1d56a4(0x130)),queries_1=require('../queries'),flosum_component_history_dto_1=require(a135_0x1d56a4(0x11c));class SalesforceRetrieverService{constructor(_0x4852b9){const _0x1b3cee=a135_0x1d56a4;this[_0x1b3cee(0x107)]=_0x4852b9,this[_0x1b3cee(0x10c)]=new core_1[(_0x1b3cee(0x11a))](SalesforceRetrieverService[_0x1b3cee(0x11b)]),this[_0x1b3cee(0x131)]=0xbb8,this[_0x1b3cee(0x10a)]=0x1f4;}async[a135_0x1d56a4(0x112)](_0x5e4349){const _0x92f3d5=a135_0x1d56a4;this[_0x92f3d5(0x10c)][_0x92f3d5(0x12a)](_0x92f3d5(0x127),_0x5e4349['length']);const _0x49ccbe=typedi_1[_0x92f3d5(0x116)][_0x92f3d5(0x108)](salesforce_query_service_1[_0x92f3d5(0x10d)]),_0x4374d1=_0x5e4349['map'](_0x19dc02=>'\x27'+_0x19dc02+'\x27'),_0x4cbcc0=[];while(_0x4374d1[_0x92f3d5(0x140)]){const _0x23b4ef=_0x4374d1[_0x92f3d5(0x124)](0x0,this[_0x92f3d5(0x10a)]),_0x312261=_0x49ccbe[_0x92f3d5(0x114)](queries_1[_0x92f3d5(0x134)][_0x92f3d5(0x128)]('%parent_ids%',_0x23b4ef[_0x92f3d5(0x103)]())),_0x40d115=_0x49ccbe['query'](queries_1[_0x92f3d5(0x120)]['replace'](_0x92f3d5(0x12c),_0x23b4ef[_0x92f3d5(0x103)]()))['then'](_0x113f07=>_0x113f07[_0x92f3d5(0x13f)](_0x3e68f9=>flosum_component_history_dto_1['FlosumComponentHistoryDto'][_0x92f3d5(0x113)](_0x3e68f9))),[_0x2635af,_0xf2a982]=await Promise[_0x92f3d5(0x12f)]([_0x312261,_0x40d115]);for(const _0x2b8b51 of _0xf2a982){const _0x272bd9=_0x2635af['find'](_0xa45ff0=>_0xa45ff0[_0x92f3d5(0x109)]===_0x2b8b51['id']);_0x272bd9&&_0x4cbcc0[_0x92f3d5(0x111)]({'fileType':_0x272bd9[_0x92f3d5(0x101)],'fileName':_0x2b8b51[_0x92f3d5(0x10e)],'attachmentId':_0x272bd9['Id']});}}return _0x4cbcc0;}async[a135_0x1d56a4(0x12b)](_0x2921cb){const _0x494c12=a135_0x1d56a4,_0x220629=await this[_0x494c12(0x112)](_0x2921cb);this[_0x494c12(0x10c)][_0x494c12(0x12a)](_0x494c12(0x12d));const _0x6ca678=[];for(const _0x2f5390 of _0x220629){const _0x9609cd=await this['salesforceService'][_0x494c12(0x13c)](_0x2f5390[_0x494c12(0x13e)],!![]);_0x6ca678[_0x494c12(0x111)]({'body':_0x9609cd[_0x494c12(0x125)](_0x494c12(0x118)),'fileName':_0x2f5390[_0x494c12(0x11d)],'fileType':_0x2f5390[_0x494c12(0x122)]}),this['logger'][_0x494c12(0x12a)](_0x494c12(0x137),_0x6ca678[_0x494c12(0x140)],_0x2921cb[_0x494c12(0x140)]);}return _0x6ca678;}async[a135_0x1d56a4(0x121)](_0x4a2404){const _0x2690da=a135_0x1d56a4,_0x3a6960=[..._0x4a2404],_0x2799c0=[],_0x511924=[];while(_0x3a6960[_0x2690da(0x140)]){const _0x7e98ab=_0x3a6960[_0x2690da(0x124)](0x0,this[_0x2690da(0x131)]),_0xb6c4a7=await this[_0x2690da(0x107)][_0x2690da(0x129)](_0x7e98ab);_0x7e98ab[_0x2690da(0x140)]!==_0xb6c4a7[_0x2690da(0x135)][_0x2690da(0x140)]?(_0x3a6960[_0x2690da(0x111)](..._0xb6c4a7['ids']),_0x2799c0[_0x2690da(0x111)](..._0xb6c4a7[_0x2690da(0x105)])):_0x511924[_0x2690da(0x111)](..._0x7e98ab),this[_0x2690da(0x10c)][_0x2690da(0x13a)](_0x2690da(0x138),_0x4a2404[_0x2690da(0x140)]-_0x3a6960[_0x2690da(0x140)],_0x4a2404[_0x2690da(0x140)]);}if(_0x511924[_0x2690da(0x140)]){const _0x3fc70d=await this['retrieveLastComponents'](_0x511924);_0x2799c0[_0x2690da(0x111)](..._0x3fc70d);}return _0x2799c0;}}exports['SalesforceRetrieverService']=SalesforceRetrieverService;