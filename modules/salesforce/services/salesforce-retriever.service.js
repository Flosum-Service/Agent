const a135_0x434086=a135_0x100b;function a135_0x100b(_0x34d801,_0x455271){const _0x455bfd=a135_0xd89d();return a135_0x100b=function(_0x2b70a3,_0x40c22c){_0x2b70a3=_0x2b70a3-0x114;let _0xd89d2d=_0x455bfd[_0x2b70a3];return _0xd89d2d;},a135_0x100b(_0x34d801,_0x455271);}(function(_0x45933b,_0x1b1849){const _0x1f59c9=a135_0x100b,_0x4ee6f5=_0x45933b();while(!![]){try{const _0x45c842=-parseInt(_0x1f59c9(0x13f))/0x1+-parseInt(_0x1f59c9(0x125))/0x2*(-parseInt(_0x1f59c9(0x14a))/0x3)+-parseInt(_0x1f59c9(0x11f))/0x4+parseInt(_0x1f59c9(0x130))/0x5+parseInt(_0x1f59c9(0x14b))/0x6+-parseInt(_0x1f59c9(0x147))/0x7+parseInt(_0x1f59c9(0x127))/0x8;if(_0x45c842===_0x1b1849)break;else _0x4ee6f5['push'](_0x4ee6f5['shift']());}catch(_0x34b63d){_0x4ee6f5['push'](_0x4ee6f5['shift']());}}}(a135_0xd89d,0x59cfb));function a135_0xd89d(){const _0x420265=['__esModule','info','3578421bCALJa','logger','name','3909yGENjY','1595178JZwMJS','search','%parent_ids%','constructor','length','manually\x20retrieving\x20components\x20from\x20salesforce','filename','Name','retrieveLastComponents','defineProperty','__importDefault','salesforceService','GET_COMPONENT_HISTORIES_BY_IDS','FlosumComponentHistoryDto','714884wJyCYx','retrieveComponents','components','splice','./salesforce-query.service','ParentId','788eOJXfX','COMPONENTS_PER_REQUEST','1995224LoVwyt','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','push','typedi','ids','fromSalesforce','retrieveComponentIdsFromHistoryIds','../queries','Logger','1857060MCoJhS','../dto/flosum-component-history.dto','toString','SalesforceQueryService','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','attachmentId','../../../core','all','join','replace','run','retrieveAttachment','query','get','apply','342269kkOjAh','%ids%','then','COMPONENTS_PER_QUERY','SalesforceRetrieverService','log'];a135_0xd89d=function(){return _0x420265;};return a135_0xd89d();}const a135_0x40c22c=(function(){let _0xfb9d6d=!![];return function(_0x1a1f7b,_0x1b4d19){const _0x34e0c7=_0xfb9d6d?function(){const _0xae71c1=a135_0x100b;if(_0x1b4d19){const _0x378dc2=_0x1b4d19[_0xae71c1(0x13e)](_0x1a1f7b,arguments);return _0x1b4d19=null,_0x378dc2;}}:function(){};return _0xfb9d6d=![],_0x34e0c7;};}()),a135_0x2b70a3=a135_0x40c22c(this,function(){const _0x7ccf83=a135_0x100b;return a135_0x2b70a3[_0x7ccf83(0x132)]()[_0x7ccf83(0x14c)]('(((.+)+)+)+$')[_0x7ccf83(0x132)]()[_0x7ccf83(0x114)](a135_0x2b70a3)[_0x7ccf83(0x14c)]('(((.+)+)+)+$');});a135_0x2b70a3();'use strict';var __importDefault=this&&this[a135_0x434086(0x11b)]||function(_0x3a6dc1){const _0x278473=a135_0x434086;return _0x3a6dc1&&_0x3a6dc1[_0x278473(0x145)]?_0x3a6dc1:{'default':_0x3a6dc1};};Object[a135_0x434086(0x11a)](exports,a135_0x434086(0x145),{'value':!![]}),exports[a135_0x434086(0x143)]=void 0x0;const core_1=require(a135_0x434086(0x136)),typedi_1=__importDefault(require(a135_0x434086(0x12a))),salesforce_query_service_1=require(a135_0x434086(0x123)),queries_1=require(a135_0x434086(0x12e)),flosum_component_history_dto_1=require(a135_0x434086(0x131));class SalesforceRetrieverService{constructor(_0x4e07cb){const _0x120ba5=a135_0x434086;this[_0x120ba5(0x11c)]=_0x4e07cb,this[_0x120ba5(0x148)]=new core_1[(_0x120ba5(0x12f))](SalesforceRetrieverService[_0x120ba5(0x149)]),this[_0x120ba5(0x126)]=0xbb8,this[_0x120ba5(0x142)]=0x1f4;}async[a135_0x434086(0x12d)](_0x1e9f62){const _0x3d5dc6=a135_0x434086;this[_0x3d5dc6(0x148)]['info'](_0x3d5dc6(0x128),_0x1e9f62['length']);const _0x56364a=typedi_1['default'][_0x3d5dc6(0x13d)](salesforce_query_service_1[_0x3d5dc6(0x133)]),_0x4050ab=_0x1e9f62['map'](_0x559783=>'\x27'+_0x559783+'\x27'),_0x54dbf3=[];while(_0x4050ab[_0x3d5dc6(0x115)]){const _0x5bee4d=_0x4050ab['splice'](0x0,this['COMPONENTS_PER_QUERY']),_0x3855bf=_0x56364a[_0x3d5dc6(0x13c)](queries_1[_0x3d5dc6(0x134)][_0x3d5dc6(0x139)](_0x3d5dc6(0x14d),_0x5bee4d[_0x3d5dc6(0x138)]())),_0x91198a=_0x56364a[_0x3d5dc6(0x13c)](queries_1[_0x3d5dc6(0x11d)][_0x3d5dc6(0x139)](_0x3d5dc6(0x140),_0x5bee4d[_0x3d5dc6(0x138)]()))[_0x3d5dc6(0x141)](_0xfdba72=>_0xfdba72['map'](_0x3675f8=>flosum_component_history_dto_1[_0x3d5dc6(0x11e)][_0x3d5dc6(0x12c)](_0x3675f8))),[_0x3a5621,_0x3ea5d8]=await Promise[_0x3d5dc6(0x137)]([_0x3855bf,_0x91198a]);for(const _0x2f4ba3 of _0x3ea5d8){const _0x2a167b=_0x3a5621['find'](_0x432999=>_0x432999[_0x3d5dc6(0x124)]===_0x2f4ba3['id']);_0x2a167b&&_0x54dbf3[_0x3d5dc6(0x129)]({'fileType':_0x2a167b[_0x3d5dc6(0x118)],'fileName':_0x2f4ba3[_0x3d5dc6(0x117)],'attachmentId':_0x2a167b['Id']});}}return _0x54dbf3;}async[a135_0x434086(0x119)](_0x5dd1ce){const _0x3f4ff9=a135_0x434086,_0x530857=await this[_0x3f4ff9(0x12d)](_0x5dd1ce);this[_0x3f4ff9(0x148)][_0x3f4ff9(0x146)](_0x3f4ff9(0x116));const _0x50314d=[];for(const _0x34ffbf of _0x530857){const _0x324f3c=await this['salesforceService'][_0x3f4ff9(0x13b)](_0x34ffbf[_0x3f4ff9(0x135)],!![]);_0x50314d[_0x3f4ff9(0x129)]({'body':_0x324f3c[_0x3f4ff9(0x132)]('base64'),'fileName':_0x34ffbf['fileName'],'fileType':_0x34ffbf['fileType']}),this[_0x3f4ff9(0x148)]['info']('manually\x20retrieved\x20%d/%d\x20components',_0x50314d[_0x3f4ff9(0x115)],_0x5dd1ce['length']);}return _0x50314d;}async[a135_0x434086(0x13a)](_0x58889c){const _0x1ec6e9=a135_0x434086,_0x3c6c6a=[..._0x58889c],_0x1c79ee=[],_0x29179c=[];while(_0x3c6c6a['length']){const _0x30a0e9=_0x3c6c6a[_0x1ec6e9(0x122)](0x0,this[_0x1ec6e9(0x126)]),_0x1e7931=await this['salesforceService'][_0x1ec6e9(0x120)](_0x30a0e9);_0x30a0e9[_0x1ec6e9(0x115)]!==_0x1e7931[_0x1ec6e9(0x12b)]['length']?(_0x3c6c6a[_0x1ec6e9(0x129)](..._0x1e7931[_0x1ec6e9(0x12b)]),_0x1c79ee['push'](..._0x1e7931[_0x1ec6e9(0x121)])):_0x29179c['push'](..._0x30a0e9),this[_0x1ec6e9(0x148)][_0x1ec6e9(0x144)]('retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest',_0x58889c[_0x1ec6e9(0x115)]-_0x3c6c6a['length'],_0x58889c[_0x1ec6e9(0x115)]);}if(_0x29179c[_0x1ec6e9(0x115)]){const _0x49588f=await this[_0x1ec6e9(0x119)](_0x29179c);_0x1c79ee[_0x1ec6e9(0x129)](..._0x49588f);}return _0x1c79ee;}}exports[a135_0x434086(0x143)]=SalesforceRetrieverService;