function a134_0xb96b(_0x484d57,_0x5131e7){const _0x139177=a134_0x286b();return a134_0xb96b=function(_0x1ff369,_0x49c214){_0x1ff369=_0x1ff369-0x163;let _0x286ba2=_0x139177[_0x1ff369];return _0x286ba2;},a134_0xb96b(_0x484d57,_0x5131e7);}const a134_0x46256a=a134_0xb96b;(function(_0x105398,_0x7063de){const _0x5f4804=a134_0xb96b,_0xfcda30=_0x105398();while(!![]){try{const _0x32f5a9=-parseInt(_0x5f4804(0x17c))/0x1*(parseInt(_0x5f4804(0x186))/0x2)+parseInt(_0x5f4804(0x191))/0x3*(-parseInt(_0x5f4804(0x192))/0x4)+-parseInt(_0x5f4804(0x17e))/0x5*(parseInt(_0x5f4804(0x193))/0x6)+parseInt(_0x5f4804(0x18b))/0x7*(-parseInt(_0x5f4804(0x18c))/0x8)+-parseInt(_0x5f4804(0x17a))/0x9+-parseInt(_0x5f4804(0x169))/0xa+parseInt(_0x5f4804(0x184))/0xb*(parseInt(_0x5f4804(0x187))/0xc);if(_0x32f5a9===_0x7063de)break;else _0xfcda30['push'](_0xfcda30['shift']());}catch(_0x4106dc){_0xfcda30['push'](_0xfcda30['shift']());}}}(a134_0x286b,0x5e17d));const a134_0x49c214=(function(){let _0x714284=!![];return function(_0x21de79,_0x166692){const _0xea58d0=_0x714284?function(){const _0x24a380=a134_0xb96b;if(_0x166692){const _0x1f5767=_0x166692[_0x24a380(0x177)](_0x21de79,arguments);return _0x166692=null,_0x1f5767;}}:function(){};return _0x714284=![],_0xea58d0;};}()),a134_0x1ff369=a134_0x49c214(this,function(){const _0x14742f=a134_0xb96b;return a134_0x1ff369['toString']()[_0x14742f(0x176)](_0x14742f(0x166))['toString']()[_0x14742f(0x195)](a134_0x1ff369)[_0x14742f(0x176)](_0x14742f(0x166));});a134_0x1ff369();'use strict';var __importDefault=this&&this[a134_0x46256a(0x199)]||function(_0x237c3b){return _0x237c3b&&_0x237c3b['__esModule']?_0x237c3b:{'default':_0x237c3b};};Object['defineProperty'](exports,a134_0x46256a(0x165),{'value':!![]}),exports[a134_0x46256a(0x16e)]=void 0x0;const core_1=require(a134_0x46256a(0x180)),typedi_1=__importDefault(require(a134_0x46256a(0x168))),salesforce_query_service_1=require(a134_0x46256a(0x181)),queries_1=require(a134_0x46256a(0x17d)),flosum_component_history_dto_1=require(a134_0x46256a(0x196));class SalesforceRetrieverService{constructor(_0x408140){const _0x60f69e=a134_0x46256a;this[_0x60f69e(0x19c)]=_0x408140,this[_0x60f69e(0x164)]=new core_1[(_0x60f69e(0x18d))](SalesforceRetrieverService[_0x60f69e(0x18a)]),this[_0x60f69e(0x179)]=0xbb8,this[_0x60f69e(0x182)]=0x1f4;}async[a134_0x46256a(0x185)](_0x1d324d){const _0x3d3dd0=a134_0x46256a;this[_0x3d3dd0(0x164)][_0x3d3dd0(0x178)](_0x3d3dd0(0x173),_0x1d324d[_0x3d3dd0(0x167)]);const _0x376fae=typedi_1['default'][_0x3d3dd0(0x172)](salesforce_query_service_1['SalesforceQueryService']),_0x1fca29=_0x1d324d['map'](_0x5d24b7=>'\x27'+_0x5d24b7+'\x27'),_0x386aae=[];while(_0x1fca29[_0x3d3dd0(0x167)]){const _0x1af2cc=_0x1fca29['splice'](0x0,this[_0x3d3dd0(0x182)]),_0x1a4481=_0x376fae['query'](queries_1['GET_ATTACHMENT_BY_PARENT_IDS_QUERY'][_0x3d3dd0(0x16a)](_0x3d3dd0(0x194),_0x1af2cc[_0x3d3dd0(0x188)]())),_0x1535b3=_0x376fae[_0x3d3dd0(0x16d)](queries_1['GET_COMPONENT_HISTORIES_BY_IDS']['replace'](_0x3d3dd0(0x197),_0x1af2cc[_0x3d3dd0(0x188)]()))[_0x3d3dd0(0x183)](_0x302ebd=>_0x302ebd['map'](_0xf09f5f=>flosum_component_history_dto_1[_0x3d3dd0(0x175)][_0x3d3dd0(0x1a0)](_0xf09f5f))),[_0x2d1dd1,_0x59a33c]=await Promise['all']([_0x1a4481,_0x1535b3]);for(const _0x36314e of _0x59a33c){const _0x2ec0db=_0x2d1dd1[_0x3d3dd0(0x189)](_0x4a960b=>_0x4a960b[_0x3d3dd0(0x17f)]===_0x36314e['id']);_0x2ec0db&&_0x386aae[_0x3d3dd0(0x170)]({'fileType':_0x2ec0db[_0x3d3dd0(0x198)],'fileName':_0x36314e[_0x3d3dd0(0x16f)],'attachmentId':_0x2ec0db['Id']});}}return _0x386aae;}async['retrieveLastComponents'](_0x46fa7e){const _0x15f3a9=a134_0x46256a,_0x547dc5=await this[_0x15f3a9(0x185)](_0x46fa7e);this[_0x15f3a9(0x164)][_0x15f3a9(0x178)]('manually\x20retrieving\x20components\x20from\x20salesforce');const _0x20a56e=[];for(const _0x32895f of _0x547dc5){const _0x1d3f55=await this[_0x15f3a9(0x19c)][_0x15f3a9(0x19b)](_0x32895f[_0x15f3a9(0x163)],!![]);_0x20a56e['push']({'body':_0x1d3f55[_0x15f3a9(0x190)](_0x15f3a9(0x19d)),'fileName':_0x32895f[_0x15f3a9(0x171)],'fileType':_0x32895f[_0x15f3a9(0x18e)]}),this[_0x15f3a9(0x164)][_0x15f3a9(0x178)](_0x15f3a9(0x1a1),_0x20a56e[_0x15f3a9(0x167)],_0x46fa7e[_0x15f3a9(0x167)]);}return _0x20a56e;}async[a134_0x46256a(0x19f)](_0x209271){const _0x15b89e=a134_0x46256a,_0x5794bf=[..._0x209271],_0x5eec6a=[],_0x154031=[];while(_0x5794bf[_0x15b89e(0x167)]){const _0x5eb8f9=_0x5794bf[_0x15b89e(0x17b)](0x0,this[_0x15b89e(0x179)]),_0x1e15b4=await this['salesforceService'][_0x15b89e(0x19a)](_0x5eb8f9);_0x5eb8f9[_0x15b89e(0x167)]!==_0x1e15b4[_0x15b89e(0x16b)][_0x15b89e(0x167)]?(_0x5794bf[_0x15b89e(0x170)](..._0x1e15b4['ids']),_0x5eec6a[_0x15b89e(0x170)](..._0x1e15b4[_0x15b89e(0x16c)])):_0x154031[_0x15b89e(0x170)](..._0x5eb8f9),this[_0x15b89e(0x164)][_0x15b89e(0x174)](_0x15b89e(0x19e),_0x209271[_0x15b89e(0x167)]-_0x5794bf[_0x15b89e(0x167)],_0x209271['length']);}if(_0x154031[_0x15b89e(0x167)]){const _0x53a8b4=await this[_0x15b89e(0x18f)](_0x154031);_0x5eec6a[_0x15b89e(0x170)](..._0x53a8b4);}return _0x5eec6a;}}exports[a134_0x46256a(0x16e)]=SalesforceRetrieverService;function a134_0x286b(){const _0x5f4df4=['COMPONENTS_PER_QUERY','then','13966953COsHcj','retrieveComponentIdsFromHistoryIds','7876YKLJvb','24dETyQz','join','find','name','3658312SZrRGC','8zHDqjV','Logger','fileType','retrieveLastComponents','toString','952488WQCHMd','8CNqwfp','1007982PiCabL','%parent_ids%','constructor','../dto/flosum-component-history.dto','%ids%','Name','__importDefault','retrieveComponents','retrieveAttachment','salesforceService','base64','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','run','fromSalesforce','manually\x20retrieved\x20%d/%d\x20components','attachmentId','logger','__esModule','(((.+)+)+)+$','length','typedi','95750LfpmfM','replace','ids','components','query','SalesforceRetrieverService','filename','push','fileName','get','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','log','FlosumComponentHistoryDto','search','apply','info','COMPONENTS_PER_REQUEST','3353427kUFoZN','splice','28IRdHKN','../queries','15RJAURE','ParentId','../../../core','./salesforce-query.service'];a134_0x286b=function(){return _0x5f4df4;};return a134_0x286b();}