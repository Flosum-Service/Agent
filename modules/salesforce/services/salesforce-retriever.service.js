const a135_0x176e63=a135_0x2544;(function(_0x133937,_0x1643c2){const _0x3343a3=a135_0x2544,_0x442c07=_0x133937();while(!![]){try{const _0x275082=-parseInt(_0x3343a3(0x153))/0x1+-parseInt(_0x3343a3(0x155))/0x2*(-parseInt(_0x3343a3(0x145))/0x3)+parseInt(_0x3343a3(0x132))/0x4+parseInt(_0x3343a3(0x122))/0x5*(parseInt(_0x3343a3(0x11c))/0x6)+parseInt(_0x3343a3(0x126))/0x7*(-parseInt(_0x3343a3(0x135))/0x8)+-parseInt(_0x3343a3(0x120))/0x9+parseInt(_0x3343a3(0x130))/0xa*(parseInt(_0x3343a3(0x138))/0xb);if(_0x275082===_0x1643c2)break;else _0x442c07['push'](_0x442c07['shift']());}catch(_0x491458){_0x442c07['push'](_0x442c07['shift']());}}}(a135_0x5b55,0x93782));const a135_0x5d42cb=(function(){let _0x303ef4=!![];return function(_0x1da4bd,_0x235a25){const _0x2c6d22=_0x303ef4?function(){const _0x5d0d90=a135_0x2544;if(_0x235a25){const _0x5abf23=_0x235a25[_0x5d0d90(0x13d)](_0x1da4bd,arguments);return _0x235a25=null,_0x5abf23;}}:function(){};return _0x303ef4=![],_0x2c6d22;};}()),a135_0x36ea5f=a135_0x5d42cb(this,function(){const _0x56bdde=a135_0x2544;return a135_0x36ea5f[_0x56bdde(0x133)]()['search'](_0x56bdde(0x14f))['toString']()[_0x56bdde(0x152)](a135_0x36ea5f)['search'](_0x56bdde(0x14f));});a135_0x36ea5f();'use strict';var __importDefault=this&&this[a135_0x176e63(0x129)]||function(_0x46be9a){return _0x46be9a&&_0x46be9a['__esModule']?_0x46be9a:{'default':_0x46be9a};};function a135_0x2544(_0x543595,_0x66f716){const _0x27857b=a135_0x5b55();return a135_0x2544=function(_0x36ea5f,_0x5d42cb){_0x36ea5f=_0x36ea5f-0x11c;let _0x5b550c=_0x27857b[_0x36ea5f];return _0x5b550c;},a135_0x2544(_0x543595,_0x66f716);}Object[a135_0x176e63(0x128)](exports,'__esModule',{'value':!![]}),exports[a135_0x176e63(0x12c)]=void 0x0;const core_1=require(a135_0x176e63(0x147)),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require(a135_0x176e63(0x127)),queries_1=require(a135_0x176e63(0x125)),flosum_component_history_dto_1=require('../dto/flosum-component-history.dto');class SalesforceRetrieverService{constructor(_0x57c6a2){const _0x124758=a135_0x176e63;this[_0x124758(0x14e)]=_0x57c6a2,this[_0x124758(0x156)]=new core_1[(_0x124758(0x14c))](SalesforceRetrieverService[_0x124758(0x142)]),this[_0x124758(0x143)]=0xbb8,this[_0x124758(0x12e)]=0x1f4;}async[a135_0x176e63(0x141)](_0x5bdda8){const _0x419314=a135_0x176e63;this[_0x419314(0x156)][_0x419314(0x148)]('manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)',_0x5bdda8[_0x419314(0x136)]);const _0x1f9489=typedi_1[_0x419314(0x11d)]['get'](salesforce_query_service_1[_0x419314(0x131)]),_0x4cfe4a=_0x5bdda8[_0x419314(0x13f)](_0x58b4bc=>'\x27'+_0x58b4bc+'\x27'),_0x5d5e7d=[];while(_0x4cfe4a[_0x419314(0x136)]){const _0x25537b=_0x4cfe4a[_0x419314(0x124)](0x0,this[_0x419314(0x12e)]),_0xeea2c6=_0x1f9489['query'](queries_1['GET_ATTACHMENT_BY_PARENT_IDS_QUERY'][_0x419314(0x151)](_0x419314(0x150),_0x25537b[_0x419314(0x11e)]())),_0x5e898b=_0x1f9489[_0x419314(0x144)](queries_1[_0x419314(0x13b)]['replace'](_0x419314(0x149),_0x25537b[_0x419314(0x11e)]()))['then'](_0x135e24=>_0x135e24[_0x419314(0x13f)](_0xd67dca=>flosum_component_history_dto_1[_0x419314(0x13e)][_0x419314(0x134)](_0xd67dca))),[_0x175926,_0x5f07e6]=await Promise[_0x419314(0x14d)]([_0xeea2c6,_0x5e898b]);for(const _0x30117a of _0x5f07e6){const _0x5b602b=_0x175926['find'](_0x298129=>_0x298129[_0x419314(0x12a)]===_0x30117a['id']);_0x5b602b&&_0x5d5e7d[_0x419314(0x137)]({'fileType':_0x5b602b[_0x419314(0x157)],'fileName':_0x30117a[_0x419314(0x123)],'attachmentId':_0x5b602b['Id']});}}return _0x5d5e7d;}async[a135_0x176e63(0x146)](_0x5ebf0b){const _0x4bfb8e=a135_0x176e63,_0x20dd2c=await this[_0x4bfb8e(0x141)](_0x5ebf0b);this[_0x4bfb8e(0x156)][_0x4bfb8e(0x148)](_0x4bfb8e(0x14b));const _0x2fedd9=[];for(const _0x4df1b3 of _0x20dd2c){const _0x554b5d=await this[_0x4bfb8e(0x14e)][_0x4bfb8e(0x13c)](_0x4df1b3[_0x4bfb8e(0x12b)],!![]);_0x2fedd9[_0x4bfb8e(0x137)]({'body':_0x554b5d[_0x4bfb8e(0x133)](_0x4bfb8e(0x14a)),'fileName':_0x4df1b3[_0x4bfb8e(0x11f)],'fileType':_0x4df1b3[_0x4bfb8e(0x12d)]}),this[_0x4bfb8e(0x156)][_0x4bfb8e(0x148)](_0x4bfb8e(0x139),_0x2fedd9[_0x4bfb8e(0x136)],_0x5ebf0b[_0x4bfb8e(0x136)]);}return _0x2fedd9;}async['run'](_0x38d538){const _0x1bf52f=a135_0x176e63,_0x4d12fb=[..._0x38d538],_0x5a63d2=[],_0x5299f8=[];while(_0x4d12fb[_0x1bf52f(0x136)]){const _0x5f5b7f=_0x4d12fb[_0x1bf52f(0x124)](0x0,this['COMPONENTS_PER_REQUEST']),_0xf94897=await this[_0x1bf52f(0x14e)][_0x1bf52f(0x12f)](_0x5f5b7f);_0x5f5b7f[_0x1bf52f(0x136)]!==_0xf94897[_0x1bf52f(0x154)][_0x1bf52f(0x136)]?(_0x4d12fb[_0x1bf52f(0x137)](..._0xf94897[_0x1bf52f(0x154)]),_0x5a63d2[_0x1bf52f(0x137)](..._0xf94897[_0x1bf52f(0x121)])):_0x5299f8['push'](..._0x5f5b7f),this[_0x1bf52f(0x156)][_0x1bf52f(0x140)](_0x1bf52f(0x13a),_0x38d538[_0x1bf52f(0x136)]-_0x4d12fb[_0x1bf52f(0x136)],_0x38d538[_0x1bf52f(0x136)]);}if(_0x5299f8['length']){const _0x4de0a8=await this[_0x1bf52f(0x146)](_0x5299f8);_0x5a63d2['push'](..._0x4de0a8);}return _0x5a63d2;}}exports[a135_0x176e63(0x12c)]=SalesforceRetrieverService;function a135_0x5b55(){const _0x4f79c2=['5735910zCgqji','SalesforceQueryService','377820gcFiLs','toString','fromSalesforce','8puwLPN','length','push','11xxuzYp','manually\x20retrieved\x20%d/%d\x20components','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','GET_COMPONENT_HISTORIES_BY_IDS','retrieveAttachment','apply','FlosumComponentHistoryDto','map','log','retrieveComponentIdsFromHistoryIds','name','COMPONENTS_PER_REQUEST','query','5142QJgPHw','retrieveLastComponents','../../../core','info','%ids%','base64','manually\x20retrieving\x20components\x20from\x20salesforce','Logger','all','salesforceService','(((.+)+)+)+$','%parent_ids%','replace','constructor','725967uyZIAg','ids','1194znAkMQ','logger','Name','618cfFbWi','default','join','fileName','7582401mJdhZD','components','28075ctcLMM','filename','splice','../queries','680113oEVCfD','./salesforce-query.service','defineProperty','__importDefault','ParentId','attachmentId','SalesforceRetrieverService','fileType','COMPONENTS_PER_QUERY','retrieveComponents'];a135_0x5b55=function(){return _0x4f79c2;};return a135_0x5b55();}