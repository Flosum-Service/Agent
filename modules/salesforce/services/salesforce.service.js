const a136_0x3df229=a136_0x36d5;(function(_0x39c4c2,_0x4f371e){const _0x2014d1=a136_0x36d5,_0x2b973b=_0x39c4c2();while(!![]){try{const _0x198904=-parseInt(_0x2014d1(0x1a9))/0x1*(parseInt(_0x2014d1(0x1ac))/0x2)+parseInt(_0x2014d1(0x17b))/0x3+-parseInt(_0x2014d1(0x1a3))/0x4+parseInt(_0x2014d1(0x18a))/0x5*(parseInt(_0x2014d1(0x186))/0x6)+parseInt(_0x2014d1(0x197))/0x7+-parseInt(_0x2014d1(0x187))/0x8+-parseInt(_0x2014d1(0x17f))/0x9*(-parseInt(_0x2014d1(0x17e))/0xa);if(_0x198904===_0x4f371e)break;else _0x2b973b['push'](_0x2b973b['shift']());}catch(_0x1fbb49){_0x2b973b['push'](_0x2b973b['shift']());}}}(a136_0x1dce,0x9566c));const a136_0x34435a=(function(){let _0x4799e7=!![];return function(_0x5d1a08,_0x2f69d5){const _0x461bf0=_0x4799e7?function(){const _0x571991=a136_0x36d5;if(_0x2f69d5){const _0x5a9b8d=_0x2f69d5[_0x571991(0x181)](_0x5d1a08,arguments);return _0x2f69d5=null,_0x5a9b8d;}}:function(){};return _0x4799e7=![],_0x461bf0;};}()),a136_0x386838=a136_0x34435a(this,function(){const _0x47a96e=a136_0x36d5;return a136_0x386838[_0x47a96e(0x18f)]()[_0x47a96e(0x191)](_0x47a96e(0x19a))[_0x47a96e(0x18f)]()[_0x47a96e(0x17a)](a136_0x386838)[_0x47a96e(0x191)](_0x47a96e(0x19a));});a136_0x386838();function a136_0x1dce(){const _0x120e94=['SalesforceService','/logger','SALESFORCE_API_VERSION','getLogger','InternalServerError','deleteAttachment','function','services/apexrest','createObject','loggerId','arraybuffer','metadata','decorate','__metadata','constructor','804255xzaZlN','../utils/create-request.util','patch','10HnDxhL','313857JftIqW','sendLog','apply','retrieveComponents','namespace','log','error','23412BdxDQN','2476664ztKElv','../../../core','../../../constants','1075usIHWu','../errors/salesforce.error','then','services/data/','getOwnPropertyDescriptor','toString','text','search','SalesforceAuthService','SalesforceLogger','/sobjects/Attachment/','object','SalesforceError','8079365ZudjuD','__decorate','[message]\x20%s','(((.+)+)+)+$','forEach','__esModule','logger','Service','delete\x20attachment\x20%s\x20from\x20salesforce','/body','request','retrieveAttachment','4095808fIhTnc','Logger','patchObject','length','/sobjects/','./salesforce-logger.service','2szKtMe','internalLogger','post','350600kanZaT','name'];a136_0x1dce=function(){return _0x120e94;};return a136_0x1dce();}'use strict';var __decorate=this&&this[a136_0x3df229(0x198)]||function(_0x9c7c46,_0x2e5837,_0x1b5bb4,_0x3d7c1f){const _0x565cfc=a136_0x3df229;var _0x32049b=arguments[_0x565cfc(0x1a6)],_0x22d0f6=_0x32049b<0x3?_0x2e5837:_0x3d7c1f===null?_0x3d7c1f=Object[_0x565cfc(0x18e)](_0x2e5837,_0x1b5bb4):_0x3d7c1f,_0x377836;if(typeof Reflect===_0x565cfc(0x195)&&typeof Reflect[_0x565cfc(0x178)]===_0x565cfc(0x1b4))_0x22d0f6=Reflect['decorate'](_0x9c7c46,_0x2e5837,_0x1b5bb4,_0x3d7c1f);else{for(var _0x2431a7=_0x9c7c46['length']-0x1;_0x2431a7>=0x0;_0x2431a7--)if(_0x377836=_0x9c7c46[_0x2431a7])_0x22d0f6=(_0x32049b<0x3?_0x377836(_0x22d0f6):_0x32049b>0x3?_0x377836(_0x2e5837,_0x1b5bb4,_0x22d0f6):_0x377836(_0x2e5837,_0x1b5bb4))||_0x22d0f6;}return _0x32049b>0x3&&_0x22d0f6&&Object['defineProperty'](_0x2e5837,_0x1b5bb4,_0x22d0f6),_0x22d0f6;},__metadata=this&&this[a136_0x3df229(0x179)]||function(_0x3ffde4,_0x10e52e){const _0x2afe4a=a136_0x3df229;if(typeof Reflect===_0x2afe4a(0x195)&&typeof Reflect[_0x2afe4a(0x177)]===_0x2afe4a(0x1b4))return Reflect['metadata'](_0x3ffde4,_0x10e52e);},SalesforceService_1;Object['defineProperty'](exports,a136_0x3df229(0x19c),{'value':!![]}),exports['SalesforceService']=void 0x0;const typedi_1=require('typedi'),core_1=require(a136_0x3df229(0x188)),internal_server_error_1=require('../../../core/errors/internal-server.error'),salesforce_auth_service_1=require('./salesforce-auth.service'),constants_1=require(a136_0x3df229(0x189)),create_request_util_1=require(a136_0x3df229(0x17c)),salesforce_logger_service_1=require(a136_0x3df229(0x1a8)),salesforce_error_1=require(a136_0x3df229(0x18b));function a136_0x36d5(_0x481976,_0x595009){const _0x4d7861=a136_0x1dce();return a136_0x36d5=function(_0x386838,_0x34435a){_0x386838=_0x386838-0x175;let _0x1dce9d=_0x4d7861[_0x386838];return _0x1dce9d;},a136_0x36d5(_0x481976,_0x595009);}let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0xf43c25){const _0x2c4229=a136_0x3df229;this['logger']=new core_1[(_0x2c4229(0x1a4))](SalesforceService_1[_0x2c4229(0x1ad)]),this[_0x2c4229(0x1a1)]=create_request_util_1['createSalesforceRequest'](_0xf43c25),this[_0x2c4229(0x183)]=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':'/flosum_git';}['setLoggerId'](_0x5b21b0){const _0x3932ee=a136_0x3df229;this[_0x3932ee(0x175)]=_0x5b21b0,this['internalLogger']=new salesforce_logger_service_1[(_0x3932ee(0x193))](this);}[a136_0x3df229(0x1b1)](){const _0x415168=a136_0x3df229;return this[_0x415168(0x1aa)];}async[a136_0x3df229(0x182)](_0x4d9ffc){const _0x4869c6=a136_0x3df229;try{this[_0x4869c6(0x19d)]['log']('retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x4d9ffc[_0x4869c6(0x1a6)]);const _0x4db3cd=await this[_0x4869c6(0x1a1)][_0x4869c6(0x1ab)](_0x4869c6(0x1b5)+this[_0x4869c6(0x183)]+'/attachments',{'componentIds':_0x4d9ffc,'loggerId':this[_0x4869c6(0x175)]})[_0x4869c6(0x18c)](({data:_0x53db02})=>_0x53db02);return _0x4db3cd;}catch(_0x274fd1){this['logger']['error'](_0x274fd1);throw new salesforce_error_1[(_0x4869c6(0x196))](_0x274fd1);}}async[a136_0x3df229(0x1b3)](_0x272cba){const _0x56bf7b=a136_0x3df229;try{this[_0x56bf7b(0x19d)][_0x56bf7b(0x184)](_0x56bf7b(0x19f),_0x272cba),await this[_0x56bf7b(0x1a1)]['delete'](_0x56bf7b(0x18d)+constants_1['SALESFORCE_API_VERSION']+_0x56bf7b(0x194)+_0x272cba);}catch(_0x340285){this[_0x56bf7b(0x19d)][_0x56bf7b(0x185)](_0x340285);throw new salesforce_error_1[(_0x56bf7b(0x196))](_0x340285);}}async[a136_0x3df229(0x1a2)](_0x2a0e65,_0x551307=![]){const _0x45b87e=a136_0x3df229;try{this[_0x45b87e(0x19d)][_0x45b87e(0x184)]('retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x2a0e65);const _0x7ec32b=await this[_0x45b87e(0x1a1)]['get']('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x45b87e(0x194)+_0x2a0e65+_0x45b87e(0x1a0),{'responseType':_0x551307?_0x45b87e(0x176):_0x45b87e(0x190)})[_0x45b87e(0x18c)](({data:_0x13a7b0})=>_0x13a7b0);return _0x7ec32b;}catch(_0x115fb9){this[_0x45b87e(0x19d)][_0x45b87e(0x185)](_0x115fb9);throw new salesforce_error_1['SalesforceError'](_0x115fb9);}}async[a136_0x3df229(0x180)](_0x5a38c8){const _0x563471=a136_0x3df229;try{_0x5a38c8[_0x563471(0x19b)](_0x351973=>this[_0x563471(0x19d)][_0x563471(0x184)](_0x563471(0x199),_0x351973)),await this[_0x563471(0x1a1)][_0x563471(0x1ab)](_0x563471(0x1b5)+this[_0x563471(0x183)]+_0x563471(0x1af),{'messages':_0x5a38c8,'loggerId':this[_0x563471(0x175)]});}catch(_0x2e629a){this['logger'][_0x563471(0x185)](_0x2e629a);throw new internal_server_error_1[(_0x563471(0x1b2))](_0x2e629a);}}async[a136_0x3df229(0x1b6)](_0x3b5496,_0x357cf){const _0x7a1530=a136_0x3df229;try{const {data:_0x45a9ab}=await this[_0x7a1530(0x1a1)][_0x7a1530(0x1ab)](_0x7a1530(0x18d)+constants_1[_0x7a1530(0x1b0)]+_0x7a1530(0x1a7)+_0x3b5496+'/',_0x357cf);return _0x45a9ab['id'];}catch(_0x4c80c0){throw new salesforce_error_1[(_0x7a1530(0x196))](_0x4c80c0);}}async[a136_0x3df229(0x1a5)](_0x333629,_0x185573,_0x5370b9){const _0xad7d2c=a136_0x3df229;try{await this[_0xad7d2c(0x1a1)][_0xad7d2c(0x17d)](_0xad7d2c(0x18d)+constants_1[_0xad7d2c(0x1b0)]+_0xad7d2c(0x1a7)+_0x333629+'/'+_0x185573,_0x5370b9);}catch(_0x134e69){throw new salesforce_error_1[(_0xad7d2c(0x196))](_0x134e69);}}};SalesforceService=SalesforceService_1=__decorate([typedi_1[a136_0x3df229(0x19e)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_auth_service_1[a136_0x3df229(0x192)]])],SalesforceService),exports[a136_0x3df229(0x1ae)]=SalesforceService;