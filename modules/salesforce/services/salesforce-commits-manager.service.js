const a127_0x64d695=a127_0x2a50;(function(_0x41eb3e,_0x548f22){const _0x37151e=a127_0x2a50,_0x2523d4=_0x41eb3e();while(!![]){try{const _0x1776d4=-parseInt(_0x37151e(0x16e))/0x1+-parseInt(_0x37151e(0x159))/0x2*(-parseInt(_0x37151e(0x14f))/0x3)+parseInt(_0x37151e(0x142))/0x4*(-parseInt(_0x37151e(0x132))/0x5)+-parseInt(_0x37151e(0x139))/0x6*(parseInt(_0x37151e(0x152))/0x7)+parseInt(_0x37151e(0x168))/0x8*(-parseInt(_0x37151e(0x16c))/0x9)+-parseInt(_0x37151e(0x138))/0xa*(parseInt(_0x37151e(0x143))/0xb)+parseInt(_0x37151e(0x173))/0xc*(parseInt(_0x37151e(0x15b))/0xd);if(_0x1776d4===_0x548f22)break;else _0x2523d4['push'](_0x2523d4['shift']());}catch(_0x32317b){_0x2523d4['push'](_0x2523d4['shift']());}}}(a127_0x532b,0x3a414));function a127_0x532b(){const _0x254b8d=['graph','SalesforceGitSyncService','(((.+)+)+)+$','find','composite','defineProperty','reference','map','__esModule','default','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','238552DYgctG','./salesforce-components-manager.service','insert','proceedCommits','9HYkQXE','modified','424572hpjjxg','../../shared/utils','constructor','typedi','manifests','5052AXRHOv','gitSync','apply','delete','options','name','length','logger','proceedRequests','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','componentsToDelete','proceedCommitsToRepository','get','../../../constants','50885vXVHDf','removed','SalesforceError','reduce','SalesforceComponentsManager','__importDefault','14890OBdXXb','2240838WmbhZT','recordTypes','branchId','inserted','extractComponentIdsFromGraphsResponse','push','search','floor','COMPONENTS_PER_CHUNK','172GumFmi','2233AXWYcw','toString','toJSON','splice','../../../core','commitId','sfLogger','proceededComponentsMeta','proceedCommitsToBranch','chunkArray','log','SalesforceCommitsManager','1121073XVJViC','send','stringify','7EZTTub','componentsToUpdate','./salesforce-composite.service','repositoryId','\x20requests\x20to\x20composite\x20api.','getProceededComponentsMeta','author','2clpAYz','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','44239UgDoHi','[INFO]\x20Sending\x20'];a127_0x532b=function(){return _0x254b8d;};return a127_0x532b();}const a127_0x573d24=(function(){let _0x2b0009=!![];return function(_0x5c5b78,_0x4e0c43){const _0x200c2c=_0x2b0009?function(){const _0x3875d5=a127_0x2a50;if(_0x4e0c43){const _0x3afc87=_0x4e0c43[_0x3875d5(0x175)](_0x5c5b78,arguments);return _0x4e0c43=null,_0x3afc87;}}:function(){};return _0x2b0009=![],_0x200c2c;};}()),a127_0x469bed=a127_0x573d24(this,function(){const _0x435257=a127_0x2a50;return a127_0x469bed['toString']()[_0x435257(0x13f)](_0x435257(0x15f))[_0x435257(0x144)]()[_0x435257(0x170)](a127_0x469bed)[_0x435257(0x13f)]('(((.+)+)+)+$');});a127_0x469bed();'use strict';function a127_0x2a50(_0x29a904,_0x455c3f){const _0x118fa6=a127_0x532b();return a127_0x2a50=function(_0x469bed,_0x573d24){_0x469bed=_0x469bed-0x132;let _0x532b24=_0x118fa6[_0x469bed];return _0x532b24;},a127_0x2a50(_0x29a904,_0x455c3f);}var __importDefault=this&&this[a127_0x64d695(0x137)]||function(_0x4e4325){const _0x1b4b9c=a127_0x64d695;return _0x4e4325&&_0x4e4325[_0x1b4b9c(0x165)]?_0x4e4325:{'default':_0x4e4325};};Object[a127_0x64d695(0x162)](exports,'__esModule',{'value':!![]}),exports[a127_0x64d695(0x14e)]=void 0x0;const core_1=require(a127_0x64d695(0x147)),typedi_1=__importDefault(require(a127_0x64d695(0x171))),constants_1=require(a127_0x64d695(0x180)),utils_1=require(a127_0x64d695(0x16f)),salesforce_error_1=require('../errors/salesforce.error'),composite_utils_1=require('../utils/composite.utils'),salesforce_components_manager_service_1=require(a127_0x64d695(0x169)),salesforce_composite_service_1=require(a127_0x64d695(0x154)),salesforce_git_sync_service_1=require('./salesforce-git-sync.service');class SalesforceCommitsManager{constructor(_0x136e17){const _0x17397e=a127_0x64d695;this[_0x17397e(0x177)]=_0x136e17,this['COMPONENTS_PER_CHUNK']=0x3,this[_0x17397e(0x17a)]=new core_1['Logger'](SalesforceCommitsManager[_0x17397e(0x178)]),this[_0x17397e(0x149)]=this[_0x17397e(0x177)]['logger'],this[_0x17397e(0x161)]=typedi_1[_0x17397e(0x166)][_0x17397e(0x17f)](salesforce_composite_service_1['SalesforceCompositeService']),this[_0x17397e(0x174)]=typedi_1[_0x17397e(0x166)]['get'](salesforce_git_sync_service_1[_0x17397e(0x15e)]),this['proceededComponentsMeta']=[];}async[a127_0x64d695(0x17b)](_0x317256,_0x418f82=![]){const _0x285ca5=a127_0x64d695,_0x4c13e8=(this[_0x285ca5(0x141)]+ +_0x418f82)*0x3,_0x41839c=utils_1[_0x285ca5(0x14c)](_0x317256,_0x4c13e8);try{while(_0x41839c[_0x285ca5(0x179)]){const _0x36ffac=_0x41839c[_0x285ca5(0x146)](0x0,Math[_0x285ca5(0x140)](constants_1[_0x285ca5(0x15a)]/_0x4c13e8));await this[_0x285ca5(0x149)][_0x285ca5(0x14d)](_0x285ca5(0x15c)+_0x36ffac[_0x285ca5(0x179)]*_0x4c13e8+_0x285ca5(0x156))[_0x285ca5(0x150)]();const _0x4a0544=_0x36ffac[_0x285ca5(0x164)]((_0x42dba4,_0x3b4d02)=>({'graphId':_0x285ca5(0x15d)+_0x3b4d02,'compositeRequest':_0x42dba4})),_0x1868f1=await this['composite']['executeGraphs'](_0x4a0544);if(_0x418f82){const _0xf5ec2e=composite_utils_1[_0x285ca5(0x13d)](_0x1868f1);for(const {id:_0x25a32b,ref:_0x569f9b}of _0xf5ec2e){const _0x2218e2=this[_0x285ca5(0x14a)][_0x285ca5(0x160)](_0x5be06b=>_0x5be06b[_0x285ca5(0x163)]===_0x569f9b);_0x2218e2&&(_0x2218e2['componentId']=_0x25a32b);}}}}catch(_0x36df1b){this[_0x285ca5(0x17a)]['error'](_0x36df1b instanceof salesforce_error_1[_0x285ca5(0x134)]?JSON[_0x285ca5(0x151)](_0x36df1b[_0x285ca5(0x145)](),null,0x2):_0x36df1b),this[_0x285ca5(0x149)]['log'](_0x36df1b instanceof salesforce_error_1['SalesforceError']?JSON[_0x285ca5(0x151)](_0x36df1b[_0x285ca5(0x145)](),null,0x2):_0x36df1b[_0x285ca5(0x144)]());throw _0x36df1b;}}async[a127_0x64d695(0x17e)](_0x572a68){const _0x298708=a127_0x64d695;for(const _0x302e43 of _0x572a68){if(!_0x302e43[_0x298708(0x13c)]['length']&&!_0x302e43[_0x298708(0x16d)][_0x298708(0x179)]&&!_0x302e43[_0x298708(0x133)][_0x298708(0x179)])continue;const _0x13b1ce=[],_0x2394e8=[],_0x203d2b=new salesforce_components_manager_service_1[(_0x298708(0x136))](this['options']['repositoryId'],this[_0x298708(0x177)][_0x298708(0x13b)],_0x302e43['author'],this['options'][_0x298708(0x13a)],this[_0x298708(0x14a)]);_0x13b1ce[_0x298708(0x13e)](...await _0x203d2b[_0x298708(0x16a)](_0x302e43[_0x298708(0x13c)],this['options']['commitId'])),_0x13b1ce[_0x298708(0x13e)](...await _0x203d2b['update'](_0x302e43[_0x298708(0x16d)],this[_0x298708(0x177)][_0x298708(0x148)])),_0x2394e8[_0x298708(0x13e)](await _0x203d2b[_0x298708(0x176)](_0x302e43['removed'],!![])),this[_0x298708(0x14a)]=_0x203d2b[_0x298708(0x157)](),await this['proceedRequests'](_0x13b1ce,!![]);for(const _0x1aa72 of _0x2394e8){_0x1aa72[_0x298708(0x172)]['length']&&await this[_0x298708(0x17b)](_0x1aa72['manifests'],!![]),_0x1aa72[_0x298708(0x153)][_0x298708(0x179)]&&await this[_0x298708(0x17b)](_0x1aa72[_0x298708(0x153)],!![]),_0x1aa72[_0x298708(0x17d)]['length']&&await this[_0x298708(0x17b)](_0x1aa72['componentsToDelete'],!![]);}this[_0x298708(0x17a)]['log'](_0x298708(0x167),_0x13b1ce[_0x298708(0x179)]);}}async[a127_0x64d695(0x14b)](_0x5092f0){const _0x34e8c8=a127_0x64d695,_0x39219=[],_0x5c64d2=[];for(const _0x1ad681 of _0x5092f0){if(!_0x1ad681['inserted'][_0x34e8c8(0x179)]&&!_0x1ad681[_0x34e8c8(0x16d)][_0x34e8c8(0x179)]&&!_0x1ad681[_0x34e8c8(0x133)][_0x34e8c8(0x179)])continue;const _0x3944d3=new salesforce_components_manager_service_1[(_0x34e8c8(0x136))](this[_0x34e8c8(0x177)][_0x34e8c8(0x155)],this['options'][_0x34e8c8(0x13b)],_0x1ad681[_0x34e8c8(0x158)],this['options']['recordTypes'],[]);_0x39219[_0x34e8c8(0x13e)](...await _0x3944d3[_0x34e8c8(0x16a)](_0x1ad681[_0x34e8c8(0x13c)])),_0x39219['push'](...await _0x3944d3['update'](_0x1ad681[_0x34e8c8(0x16d)])),_0x5c64d2[_0x34e8c8(0x13e)](await _0x3944d3[_0x34e8c8(0x176)](_0x1ad681[_0x34e8c8(0x133)]));}this[_0x34e8c8(0x17a)][_0x34e8c8(0x14d)](_0x34e8c8(0x17c),_0x39219['length']),await this['proceedRequests'](_0x39219);const _0x7735c1=_0x5c64d2[_0x34e8c8(0x135)]((_0x2dc3d1,_0x5521aa)=>({'manifests':[..._0x2dc3d1['manifests'],..._0x5521aa[_0x34e8c8(0x172)]],'componentsToDelete':[..._0x2dc3d1[_0x34e8c8(0x17d)],..._0x5521aa[_0x34e8c8(0x17d)]],'componentsToUpdate':[..._0x2dc3d1[_0x34e8c8(0x153)],..._0x5521aa[_0x34e8c8(0x153)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x7735c1[_0x34e8c8(0x172)][_0x34e8c8(0x179)]&&await this[_0x34e8c8(0x17b)](_0x7735c1['manifests'],!![]),_0x7735c1[_0x34e8c8(0x153)][_0x34e8c8(0x179)]&&await this[_0x34e8c8(0x17b)](_0x7735c1[_0x34e8c8(0x153)],!![]),_0x7735c1[_0x34e8c8(0x17d)][_0x34e8c8(0x179)]&&await this[_0x34e8c8(0x17b)](_0x7735c1['componentsToDelete'],!![]);}async[a127_0x64d695(0x16b)](_0x553c62){const _0x1767be=a127_0x64d695;this[_0x1767be(0x177)][_0x1767be(0x13b)]?await this[_0x1767be(0x14b)](_0x553c62):await this['proceedCommitsToRepository'](_0x553c62);}}exports[a127_0x64d695(0x14e)]=SalesforceCommitsManager;