const a127_0x480ef0=a127_0x2202;(function(_0x2bccc1,_0x3bf305){const _0x9ea9c0=a127_0x2202,_0x45da20=_0x2bccc1();while(!![]){try{const _0x66c642=parseInt(_0x9ea9c0(0x1de))/0x1+-parseInt(_0x9ea9c0(0x1e6))/0x2*(-parseInt(_0x9ea9c0(0x1ba))/0x3)+parseInt(_0x9ea9c0(0x1aa))/0x4+-parseInt(_0x9ea9c0(0x1cd))/0x5*(-parseInt(_0x9ea9c0(0x1eb))/0x6)+parseInt(_0x9ea9c0(0x1bb))/0x7*(parseInt(_0x9ea9c0(0x1ad))/0x8)+-parseInt(_0x9ea9c0(0x1ee))/0x9+-parseInt(_0x9ea9c0(0x1df))/0xa;if(_0x66c642===_0x3bf305)break;else _0x45da20['push'](_0x45da20['shift']());}catch(_0x48e469){_0x45da20['push'](_0x45da20['shift']());}}}(a127_0x13fd,0xb3a16));function a127_0x2202(_0x1722ea,_0x2d1a81){const _0x4e4ede=a127_0x13fd();return a127_0x2202=function(_0x388546,_0x501523){_0x388546=_0x388546-0x1a9;let _0x13fd7d=_0x4e4ede[_0x388546];return _0x13fd7d;},a127_0x2202(_0x1722ea,_0x2d1a81);}const a127_0x501523=(function(){let _0x47841c=!![];return function(_0x5cbab8,_0x2fc51f){const _0x33bf41=_0x47841c?function(){if(_0x2fc51f){const _0x2d88ef=_0x2fc51f['apply'](_0x5cbab8,arguments);return _0x2fc51f=null,_0x2d88ef;}}:function(){};return _0x47841c=![],_0x33bf41;};}()),a127_0x388546=a127_0x501523(this,function(){const _0xca35b=a127_0x2202;return a127_0x388546[_0xca35b(0x1e2)]()[_0xca35b(0x1d7)](_0xca35b(0x1c6))[_0xca35b(0x1e2)]()[_0xca35b(0x1e9)](a127_0x388546)['search'](_0xca35b(0x1c6));});a127_0x388546();function a127_0x13fd(){const _0x439869=['getProceededComponentsMeta','\x20requests\x20to\x20composite\x20api.','log','proceededComponentsMeta','manifests','get','find','splice','search','branchId','default','componentsToUpdate','graph','reference','[INFO]\x20Sending\x20','521530WwXJZs','25762040kFRwit','Logger','error','toString','../../shared/utils','proceedRequests','repositoryId','60626ywEeNR','../utils/composite.utils','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','constructor','inserted','4489746HjPoKd','SalesforceCompositeService','COMPONENTS_PER_CHUNK','5415498SZUKoY','__esModule','./salesforce-components-manager.service','9904faejJe','../errors/salesforce.error','name','1054552cqwMeY','../../../core','./salesforce-composite.service','options','proceedCommitsToRepository','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','removed','push','length','extractComponentIdsFromGraphsResponse','proceedCommitsToBranch','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','./salesforce-git-sync.service','144EHqbTJ','63ZSsowt','logger','modified','delete','composite','recordTypes','componentsToDelete','SalesforceGitSyncService','floor','../../../constants','map','(((.+)+)+)+$','stringify','SalesforceComponentsManager','update','componentId','insert','toJSON','5WHpkhv','SalesforceError'];a127_0x13fd=function(){return _0x439869;};return a127_0x13fd();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x370ff0){const _0x59c8d0=a127_0x2202;return _0x370ff0&&_0x370ff0[_0x59c8d0(0x1ef)]?_0x370ff0:{'default':_0x370ff0};};Object['defineProperty'](exports,a127_0x480ef0(0x1ef),{'value':!![]}),exports['SalesforceCommitsManager']=void 0x0;const core_1=require(a127_0x480ef0(0x1ae)),typedi_1=__importDefault(require('typedi')),constants_1=require(a127_0x480ef0(0x1c4)),utils_1=require(a127_0x480ef0(0x1e3)),salesforce_error_1=require(a127_0x480ef0(0x1ab)),composite_utils_1=require(a127_0x480ef0(0x1e7)),salesforce_components_manager_service_1=require(a127_0x480ef0(0x1a9)),salesforce_composite_service_1=require(a127_0x480ef0(0x1af)),salesforce_git_sync_service_1=require(a127_0x480ef0(0x1b9));class SalesforceCommitsManager{constructor(_0x50954d){const _0x2254d7=a127_0x480ef0;this[_0x2254d7(0x1b0)]=_0x50954d,this[_0x2254d7(0x1ed)]=0x3,this[_0x2254d7(0x1bc)]=new core_1[(_0x2254d7(0x1e0))](SalesforceCommitsManager[_0x2254d7(0x1ac)]),this['sfLogger']=this['options'][_0x2254d7(0x1bc)],this[_0x2254d7(0x1bf)]=typedi_1[_0x2254d7(0x1d9)][_0x2254d7(0x1d4)](salesforce_composite_service_1[_0x2254d7(0x1ec)]),this['gitSync']=typedi_1[_0x2254d7(0x1d9)][_0x2254d7(0x1d4)](salesforce_git_sync_service_1[_0x2254d7(0x1c2)]),this[_0x2254d7(0x1d2)]=[];}async[a127_0x480ef0(0x1e4)](_0x2f596b,_0x3b413b=![]){const _0x337cd3=a127_0x480ef0,_0x38c87e=(this['COMPONENTS_PER_CHUNK']+ +_0x3b413b)*0x3,_0x43b5cd=utils_1['chunkArray'](_0x2f596b,_0x38c87e);try{while(_0x43b5cd[_0x337cd3(0x1b5)]){const _0x433183=_0x43b5cd[_0x337cd3(0x1d6)](0x0,Math[_0x337cd3(0x1c3)](constants_1[_0x337cd3(0x1b2)]/_0x38c87e));await this['sfLogger'][_0x337cd3(0x1d1)](_0x337cd3(0x1dd)+_0x433183['length']*_0x38c87e+_0x337cd3(0x1d0))['send']();const _0x2fd845=_0x433183[_0x337cd3(0x1c5)]((_0x6fa609,_0x4a792b)=>({'graphId':_0x337cd3(0x1db)+_0x4a792b,'compositeRequest':_0x6fa609})),_0x3a78af=await this[_0x337cd3(0x1bf)]['executeGraphs'](_0x2fd845);if(_0x3b413b){const _0x34a650=composite_utils_1[_0x337cd3(0x1b6)](_0x3a78af);for(const {id:_0x284f8a,ref:_0x470d94}of _0x34a650){const _0xfecf29=this[_0x337cd3(0x1d2)][_0x337cd3(0x1d5)](_0x5d66ac=>_0x5d66ac[_0x337cd3(0x1dc)]===_0x470d94);_0xfecf29&&(_0xfecf29[_0x337cd3(0x1ca)]=_0x284f8a);}}}}catch(_0x53738c){this['logger'][_0x337cd3(0x1e1)](_0x53738c instanceof salesforce_error_1[_0x337cd3(0x1ce)]?JSON[_0x337cd3(0x1c7)](_0x53738c[_0x337cd3(0x1cc)](),null,0x2):_0x53738c),this['sfLogger'][_0x337cd3(0x1d1)](_0x53738c instanceof salesforce_error_1['SalesforceError']?JSON['stringify'](_0x53738c['toJSON'](),null,0x2):_0x53738c[_0x337cd3(0x1e2)]());throw _0x53738c;}}async[a127_0x480ef0(0x1b1)](_0x73e74f){const _0x371d8c=a127_0x480ef0;for(const _0x1a8c00 of _0x73e74f){if(!_0x1a8c00[_0x371d8c(0x1ea)]['length']&&!_0x1a8c00[_0x371d8c(0x1bd)][_0x371d8c(0x1b5)]&&!_0x1a8c00[_0x371d8c(0x1b3)][_0x371d8c(0x1b5)])continue;const _0x53133f=[],_0xb8d244=[],_0x1a4d23=new salesforce_components_manager_service_1[(_0x371d8c(0x1c8))](this['options'][_0x371d8c(0x1e5)],this[_0x371d8c(0x1b0)][_0x371d8c(0x1d8)],_0x1a8c00['author'],this[_0x371d8c(0x1b0)][_0x371d8c(0x1c0)],this[_0x371d8c(0x1d2)]);_0x53133f['push'](...await _0x1a4d23[_0x371d8c(0x1cb)](_0x1a8c00[_0x371d8c(0x1ea)],this[_0x371d8c(0x1b0)]['commitId'])),_0x53133f[_0x371d8c(0x1b4)](...await _0x1a4d23[_0x371d8c(0x1c9)](_0x1a8c00['modified'],this[_0x371d8c(0x1b0)]['commitId'])),_0xb8d244[_0x371d8c(0x1b4)](await _0x1a4d23[_0x371d8c(0x1be)](_0x1a8c00[_0x371d8c(0x1b3)],!![])),this[_0x371d8c(0x1d2)]=_0x1a4d23[_0x371d8c(0x1cf)](),await this[_0x371d8c(0x1e4)](_0x53133f,!![]);for(const _0x4e601e of _0xb8d244){_0x4e601e[_0x371d8c(0x1d3)][_0x371d8c(0x1b5)]&&await this[_0x371d8c(0x1e4)](_0x4e601e[_0x371d8c(0x1d3)],!![]),_0x4e601e[_0x371d8c(0x1da)][_0x371d8c(0x1b5)]&&await this[_0x371d8c(0x1e4)](_0x4e601e['componentsToUpdate'],!![]),_0x4e601e[_0x371d8c(0x1c1)][_0x371d8c(0x1b5)]&&await this[_0x371d8c(0x1e4)](_0x4e601e['componentsToDelete'],!![]);}this[_0x371d8c(0x1bc)]['log'](_0x371d8c(0x1b8),_0x53133f[_0x371d8c(0x1b5)]);}}async[a127_0x480ef0(0x1b7)](_0x3822a5){const _0x153b67=a127_0x480ef0,_0x43fdc0=[],_0x30d693=[];for(const _0x33d5e5 of _0x3822a5){if(!_0x33d5e5[_0x153b67(0x1ea)]['length']&&!_0x33d5e5[_0x153b67(0x1bd)]['length']&&!_0x33d5e5['removed'][_0x153b67(0x1b5)])continue;const _0x5291b5=new salesforce_components_manager_service_1[(_0x153b67(0x1c8))](this['options'][_0x153b67(0x1e5)],this[_0x153b67(0x1b0)][_0x153b67(0x1d8)],_0x33d5e5['author'],this['options']['recordTypes'],[]);_0x43fdc0[_0x153b67(0x1b4)](...await _0x5291b5['insert'](_0x33d5e5[_0x153b67(0x1ea)])),_0x43fdc0[_0x153b67(0x1b4)](...await _0x5291b5['update'](_0x33d5e5[_0x153b67(0x1bd)])),_0x30d693[_0x153b67(0x1b4)](await _0x5291b5[_0x153b67(0x1be)](_0x33d5e5[_0x153b67(0x1b3)]));}this[_0x153b67(0x1bc)][_0x153b67(0x1d1)](_0x153b67(0x1e8),_0x43fdc0['length']),await this[_0x153b67(0x1e4)](_0x43fdc0);const _0x5b0ce1=_0x30d693['reduce']((_0x12c34c,_0x449f17)=>({'manifests':[..._0x12c34c[_0x153b67(0x1d3)],..._0x449f17['manifests']],'componentsToDelete':[..._0x12c34c['componentsToDelete'],..._0x449f17[_0x153b67(0x1c1)]],'componentsToUpdate':[..._0x12c34c[_0x153b67(0x1da)],..._0x449f17['componentsToUpdate']]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x5b0ce1['manifests'][_0x153b67(0x1b5)]&&await this[_0x153b67(0x1e4)](_0x5b0ce1['manifests'],!![]),_0x5b0ce1[_0x153b67(0x1da)]['length']&&await this[_0x153b67(0x1e4)](_0x5b0ce1[_0x153b67(0x1da)],!![]),_0x5b0ce1[_0x153b67(0x1c1)][_0x153b67(0x1b5)]&&await this['proceedRequests'](_0x5b0ce1['componentsToDelete'],!![]);}async['proceedCommits'](_0x175729){const _0x3cf47c=a127_0x480ef0;this['options']['branchId']?await this[_0x3cf47c(0x1b7)](_0x175729):await this[_0x3cf47c(0x1b1)](_0x175729);}}exports['SalesforceCommitsManager']=SalesforceCommitsManager;