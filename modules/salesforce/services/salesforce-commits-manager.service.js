function a127_0x46b8(_0x3cadd9,_0x358046){const _0x51d82d=a127_0xebb9();return a127_0x46b8=function(_0x24f965,_0x1c1224){_0x24f965=_0x24f965-0x1cf;let _0xebb98=_0x51d82d[_0x24f965];return _0xebb98;},a127_0x46b8(_0x3cadd9,_0x358046);}const a127_0x48f2ff=a127_0x46b8;function a127_0xebb9(){const _0x1619ea=['967176sBtqTi','floor','99vmAUMX','SalesforceCommitsManager','getProceededComponentsMeta','../../shared/utils','7782JSukmg','removed','splice','proceedRequests','proceededComponentsMeta','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','SalesforceError','Logger','2911842RxWnYO','composite','./salesforce-composite.service','sfLogger','log','recordTypes','4640ECysdr','reduce','chunkArray','[INFO]\x20Sending\x20','componentsToUpdate','insert','reference','3180522pUEokY','manifests','\x20requests\x20to\x20composite\x20api.','constructor','extractComponentIdsFromGraphsResponse','length','delete','1697662ZUrYVF','(((.+)+)+)+$','push','get','SalesforceComponentsManager','../errors/salesforce.error','update','proceedCommitsToRepository','branchId','6096860uRqwMe','logger','../../../constants','COMPONENTS_PER_CHUNK','SalesforceGitSyncService','../../../core','stringify','options','toJSON','./salesforce-git-sync.service','modified','__esModule','map','toString','componentsToDelete','4508372bEktTR','name','defineProperty','repositoryId','__importDefault'];a127_0xebb9=function(){return _0x1619ea;};return a127_0xebb9();}(function(_0x1046c6,_0x516767){const _0x1498cf=a127_0x46b8,_0x23cae9=_0x1046c6();while(!![]){try{const _0xf17f05=-parseInt(_0x1498cf(0x1cf))/0x1+parseInt(_0x1498cf(0x207))/0x2+parseInt(_0x1498cf(0x1fa))/0x3+parseInt(_0x1498cf(0x1e7))/0x4+-parseInt(_0x1498cf(0x200))/0x5*(-parseInt(_0x1498cf(0x1f2))/0x6)+-parseInt(_0x1498cf(0x1d8))/0x7+parseInt(_0x1498cf(0x1ec))/0x8*(-parseInt(_0x1498cf(0x1ee))/0x9);if(_0xf17f05===_0x516767)break;else _0x23cae9['push'](_0x23cae9['shift']());}catch(_0x8d340e){_0x23cae9['push'](_0x23cae9['shift']());}}}(a127_0xebb9,0xf2733));const a127_0x1c1224=(function(){let _0x4e978e=!![];return function(_0x189cf3,_0x4c821d){const _0xda6821=_0x4e978e?function(){if(_0x4c821d){const _0x358708=_0x4c821d['apply'](_0x189cf3,arguments);return _0x4c821d=null,_0x358708;}}:function(){};return _0x4e978e=![],_0xda6821;};}()),a127_0x24f965=a127_0x1c1224(this,function(){const _0x2a1932=a127_0x46b8;return a127_0x24f965[_0x2a1932(0x1e5)]()['search']('(((.+)+)+)+$')[_0x2a1932(0x1e5)]()[_0x2a1932(0x20a)](a127_0x24f965)['search'](_0x2a1932(0x1d0));});a127_0x24f965();'use strict';var __importDefault=this&&this[a127_0x48f2ff(0x1eb)]||function(_0x15219a){const _0xce2419=a127_0x48f2ff;return _0x15219a&&_0x15219a[_0xce2419(0x1e3)]?_0x15219a:{'default':_0x15219a};};Object[a127_0x48f2ff(0x1e9)](exports,a127_0x48f2ff(0x1e3),{'value':!![]}),exports[a127_0x48f2ff(0x1ef)]=void 0x0;const core_1=require(a127_0x48f2ff(0x1dd)),typedi_1=__importDefault(require('typedi')),constants_1=require(a127_0x48f2ff(0x1da)),utils_1=require(a127_0x48f2ff(0x1f1)),salesforce_error_1=require(a127_0x48f2ff(0x1d4)),composite_utils_1=require('../utils/composite.utils'),salesforce_components_manager_service_1=require('./salesforce-components-manager.service'),salesforce_composite_service_1=require(a127_0x48f2ff(0x1fc)),salesforce_git_sync_service_1=require(a127_0x48f2ff(0x1e1));class SalesforceCommitsManager{constructor(_0x3dbda1){const _0x53c12e=a127_0x48f2ff;this[_0x53c12e(0x1df)]=_0x3dbda1,this[_0x53c12e(0x1db)]=0x3,this[_0x53c12e(0x1d9)]=new core_1[(_0x53c12e(0x1f9))](SalesforceCommitsManager[_0x53c12e(0x1e8)]),this[_0x53c12e(0x1fd)]=this['options'][_0x53c12e(0x1d9)],this[_0x53c12e(0x1fb)]=typedi_1['default'][_0x53c12e(0x1d2)](salesforce_composite_service_1['SalesforceCompositeService']),this['gitSync']=typedi_1['default'][_0x53c12e(0x1d2)](salesforce_git_sync_service_1[_0x53c12e(0x1dc)]),this[_0x53c12e(0x1f6)]=[];}async[a127_0x48f2ff(0x1f5)](_0x498799,_0x3afffb=![]){const _0x3bf0a0=a127_0x48f2ff,_0x407a08=(this['COMPONENTS_PER_CHUNK']+ +_0x3afffb)*0x3,_0x2b594c=utils_1[_0x3bf0a0(0x202)](_0x498799,_0x407a08);try{while(_0x2b594c[_0x3bf0a0(0x20c)]){const _0x3266d3=_0x2b594c[_0x3bf0a0(0x1f4)](0x0,Math[_0x3bf0a0(0x1ed)](constants_1[_0x3bf0a0(0x1f7)]/_0x407a08));await this[_0x3bf0a0(0x1fd)][_0x3bf0a0(0x1fe)](_0x3bf0a0(0x203)+_0x3266d3[_0x3bf0a0(0x20c)]*_0x407a08+_0x3bf0a0(0x209))['send']();const _0x25c739=_0x3266d3[_0x3bf0a0(0x1e4)]((_0x18566f,_0x9ce9b1)=>({'graphId':'graph'+_0x9ce9b1,'compositeRequest':_0x18566f})),_0xf3f4a0=await this[_0x3bf0a0(0x1fb)]['executeGraphs'](_0x25c739);if(_0x3afffb){const _0x1cb54e=composite_utils_1[_0x3bf0a0(0x20b)](_0xf3f4a0);for(const {id:_0x2cbddb,ref:_0x224341}of _0x1cb54e){const _0x2152a9=this[_0x3bf0a0(0x1f6)]['find'](_0xd47908=>_0xd47908[_0x3bf0a0(0x206)]===_0x224341);_0x2152a9&&(_0x2152a9['componentId']=_0x2cbddb);}}}}catch(_0x35caef){this[_0x3bf0a0(0x1d9)]['error'](_0x35caef instanceof salesforce_error_1[_0x3bf0a0(0x1f8)]?JSON[_0x3bf0a0(0x1de)](_0x35caef[_0x3bf0a0(0x1e0)](),null,0x2):_0x35caef),this[_0x3bf0a0(0x1fd)][_0x3bf0a0(0x1fe)](_0x35caef instanceof salesforce_error_1['SalesforceError']?JSON[_0x3bf0a0(0x1de)](_0x35caef[_0x3bf0a0(0x1e0)](),null,0x2):_0x35caef[_0x3bf0a0(0x1e5)]());throw _0x35caef;}}async[a127_0x48f2ff(0x1d6)](_0x397aa9){const _0x2b5408=a127_0x48f2ff;for(const _0x2dfc41 of _0x397aa9){if(!_0x2dfc41['inserted'][_0x2b5408(0x20c)]&&!_0x2dfc41[_0x2b5408(0x1e2)][_0x2b5408(0x20c)]&&!_0x2dfc41[_0x2b5408(0x1f3)][_0x2b5408(0x20c)])continue;const _0x5020f8=[],_0x23f17c=[],_0x258367=new salesforce_components_manager_service_1['SalesforceComponentsManager'](this['options'][_0x2b5408(0x1ea)],this[_0x2b5408(0x1df)][_0x2b5408(0x1d7)],_0x2dfc41['author'],this['options'][_0x2b5408(0x1ff)],this[_0x2b5408(0x1f6)]);_0x5020f8[_0x2b5408(0x1d1)](...await _0x258367[_0x2b5408(0x205)](_0x2dfc41['inserted'],this[_0x2b5408(0x1df)]['commitId'])),_0x5020f8[_0x2b5408(0x1d1)](...await _0x258367[_0x2b5408(0x1d5)](_0x2dfc41[_0x2b5408(0x1e2)],this[_0x2b5408(0x1df)]['commitId'])),_0x23f17c['push'](await _0x258367[_0x2b5408(0x20d)](_0x2dfc41[_0x2b5408(0x1f3)],!![])),this['proceededComponentsMeta']=_0x258367[_0x2b5408(0x1f0)](),await this[_0x2b5408(0x1f5)](_0x5020f8,!![]);for(const _0x31ed55 of _0x23f17c){_0x31ed55[_0x2b5408(0x208)][_0x2b5408(0x20c)]&&await this['proceedRequests'](_0x31ed55['manifests'],!![]),_0x31ed55['componentsToUpdate'][_0x2b5408(0x20c)]&&await this['proceedRequests'](_0x31ed55[_0x2b5408(0x204)],!![]),_0x31ed55['componentsToDelete'][_0x2b5408(0x20c)]&&await this['proceedRequests'](_0x31ed55[_0x2b5408(0x1e6)],!![]);}this[_0x2b5408(0x1d9)][_0x2b5408(0x1fe)]('have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)',_0x5020f8[_0x2b5408(0x20c)]);}}async['proceedCommitsToBranch'](_0x1cefc8){const _0x17d5fb=a127_0x48f2ff,_0x4404c3=[],_0x24cbbf=[];for(const _0x30cec1 of _0x1cefc8){if(!_0x30cec1['inserted'][_0x17d5fb(0x20c)]&&!_0x30cec1[_0x17d5fb(0x1e2)]['length']&&!_0x30cec1[_0x17d5fb(0x1f3)][_0x17d5fb(0x20c)])continue;const _0x12b934=new salesforce_components_manager_service_1[(_0x17d5fb(0x1d3))](this[_0x17d5fb(0x1df)][_0x17d5fb(0x1ea)],this[_0x17d5fb(0x1df)][_0x17d5fb(0x1d7)],_0x30cec1['author'],this['options'][_0x17d5fb(0x1ff)],[]);_0x4404c3[_0x17d5fb(0x1d1)](...await _0x12b934['insert'](_0x30cec1['inserted'])),_0x4404c3[_0x17d5fb(0x1d1)](...await _0x12b934[_0x17d5fb(0x1d5)](_0x30cec1['modified'])),_0x24cbbf[_0x17d5fb(0x1d1)](await _0x12b934[_0x17d5fb(0x20d)](_0x30cec1[_0x17d5fb(0x1f3)]));}this['logger']['log']('have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)',_0x4404c3[_0x17d5fb(0x20c)]),await this[_0x17d5fb(0x1f5)](_0x4404c3);const _0x5b14af=_0x24cbbf[_0x17d5fb(0x201)]((_0x1ba794,_0x541a4b)=>({'manifests':[..._0x1ba794[_0x17d5fb(0x208)],..._0x541a4b[_0x17d5fb(0x208)]],'componentsToDelete':[..._0x1ba794[_0x17d5fb(0x1e6)],..._0x541a4b['componentsToDelete']],'componentsToUpdate':[..._0x1ba794[_0x17d5fb(0x204)],..._0x541a4b['componentsToUpdate']]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x5b14af[_0x17d5fb(0x208)][_0x17d5fb(0x20c)]&&await this[_0x17d5fb(0x1f5)](_0x5b14af[_0x17d5fb(0x208)],!![]),_0x5b14af[_0x17d5fb(0x204)][_0x17d5fb(0x20c)]&&await this[_0x17d5fb(0x1f5)](_0x5b14af[_0x17d5fb(0x204)],!![]),_0x5b14af['componentsToDelete'][_0x17d5fb(0x20c)]&&await this[_0x17d5fb(0x1f5)](_0x5b14af[_0x17d5fb(0x1e6)],!![]);}async['proceedCommits'](_0x5da57b){const _0x47830c=a127_0x48f2ff;this['options'][_0x47830c(0x1d7)]?await this['proceedCommitsToBranch'](_0x5da57b):await this[_0x47830c(0x1d6)](_0x5da57b);}}exports[a127_0x48f2ff(0x1ef)]=SalesforceCommitsManager;