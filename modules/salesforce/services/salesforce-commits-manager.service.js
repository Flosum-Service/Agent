const a127_0x37ed9b=a127_0x3c15;(function(_0x11a6aa,_0x215d39){const _0x4ee730=a127_0x3c15,_0x5c765f=_0x11a6aa();while(!![]){try{const _0x4ee31e=-parseInt(_0x4ee730(0x1b3))/0x1*(-parseInt(_0x4ee730(0x1eb))/0x2)+parseInt(_0x4ee730(0x1f1))/0x3*(-parseInt(_0x4ee730(0x1ea))/0x4)+-parseInt(_0x4ee730(0x1de))/0x5+parseInt(_0x4ee730(0x1c7))/0x6*(parseInt(_0x4ee730(0x1b6))/0x7)+-parseInt(_0x4ee730(0x1db))/0x8+-parseInt(_0x4ee730(0x1ba))/0x9*(parseInt(_0x4ee730(0x1bd))/0xa)+parseInt(_0x4ee730(0x1b5))/0xb;if(_0x4ee31e===_0x215d39)break;else _0x5c765f['push'](_0x5c765f['shift']());}catch(_0x51fe62){_0x5c765f['push'](_0x5c765f['shift']());}}}(a127_0x4ff5,0xc2a32));const a127_0x12f717=(function(){let _0x15b00c=!![];return function(_0x580e64,_0x54a7e2){const _0x3922d9=_0x15b00c?function(){const _0x3011b1=a127_0x3c15;if(_0x54a7e2){const _0x48dac8=_0x54a7e2[_0x3011b1(0x1bf)](_0x580e64,arguments);return _0x54a7e2=null,_0x48dac8;}}:function(){};return _0x15b00c=![],_0x3922d9;};}()),a127_0xf48d25=a127_0x12f717(this,function(){const _0x2543a1=a127_0x3c15;return a127_0xf48d25[_0x2543a1(0x1c9)]()[_0x2543a1(0x1c4)]('(((.+)+)+)+$')[_0x2543a1(0x1c9)]()[_0x2543a1(0x1f9)](a127_0xf48d25)[_0x2543a1(0x1c4)](_0x2543a1(0x1cf));});a127_0xf48d25();function a127_0x4ff5(){const _0x41d3af=['constructor','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','find','../../../core','chunkArray','update','278ozgOEr','COMPONENTS_PER_CHUNK','45850816CkSpUx','889IRogcT','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','send','commitId','414keAQAn','proceedCommitsToRepository','typedi','305590zkwoYW','insert','apply','log','proceededComponentsMeta','composite','extractComponentIdsFromGraphsResponse','search','logger','\x20requests\x20to\x20composite\x20api.','59154ThJyOL','SalesforceGitSyncService','toString','proceedRequests','Logger','default','length','proceedCommitsToBranch','(((.+)+)+)+$','componentsToDelete','reference','../errors/salesforce.error','removed','get','delete','toJSON','SalesforceComponentsManager','repositoryId','./salesforce-git-sync.service','sfLogger','9185888TZUMeX','[INFO]\x20Sending\x20','modified','3876530LDqJXK','gitSync','name','recordTypes','SalesforceCommitsManager','componentsToUpdate','branchId','reduce','manifests','SalesforceCompositeService','push','componentId','272396syOLeC','980VEXIJT','map','author','inserted','__esModule','__importDefault','63TNxOLh','stringify','proceedCommits','error','splice','options','../utils/composite.utils','./salesforce-components-manager.service'];a127_0x4ff5=function(){return _0x41d3af;};return a127_0x4ff5();}'use strict';var __importDefault=this&&this[a127_0x37ed9b(0x1f0)]||function(_0x1b918c){const _0x171797=a127_0x37ed9b;return _0x1b918c&&_0x1b918c[_0x171797(0x1ef)]?_0x1b918c:{'default':_0x1b918c};};Object['defineProperty'](exports,a127_0x37ed9b(0x1ef),{'value':!![]}),exports[a127_0x37ed9b(0x1e2)]=void 0x0;const core_1=require(a127_0x37ed9b(0x1fc)),typedi_1=__importDefault(require(a127_0x37ed9b(0x1bc))),constants_1=require('../../../constants'),utils_1=require('../../shared/utils'),salesforce_error_1=require(a127_0x37ed9b(0x1d2)),composite_utils_1=require(a127_0x37ed9b(0x1f7)),salesforce_components_manager_service_1=require(a127_0x37ed9b(0x1f8)),salesforce_composite_service_1=require('./salesforce-composite.service'),salesforce_git_sync_service_1=require(a127_0x37ed9b(0x1d9));class SalesforceCommitsManager{constructor(_0x28efe0){const _0x42d8bf=a127_0x37ed9b;this[_0x42d8bf(0x1f6)]=_0x28efe0,this[_0x42d8bf(0x1b4)]=0x3,this['logger']=new core_1[(_0x42d8bf(0x1cb))](SalesforceCommitsManager[_0x42d8bf(0x1e0)]),this[_0x42d8bf(0x1da)]=this[_0x42d8bf(0x1f6)][_0x42d8bf(0x1c5)],this['composite']=typedi_1[_0x42d8bf(0x1cc)][_0x42d8bf(0x1d4)](salesforce_composite_service_1[_0x42d8bf(0x1e7)]),this[_0x42d8bf(0x1df)]=typedi_1[_0x42d8bf(0x1cc)][_0x42d8bf(0x1d4)](salesforce_git_sync_service_1[_0x42d8bf(0x1c8)]),this[_0x42d8bf(0x1c1)]=[];}async[a127_0x37ed9b(0x1ca)](_0x411ad7,_0x5d52a9=![]){const _0x20ad4e=a127_0x37ed9b,_0x486d8f=(this[_0x20ad4e(0x1b4)]+ +_0x5d52a9)*0x3,_0x4e4658=utils_1[_0x20ad4e(0x1fd)](_0x411ad7,_0x486d8f);try{while(_0x4e4658[_0x20ad4e(0x1cd)]){const _0x26e17c=_0x4e4658[_0x20ad4e(0x1f5)](0x0,Math['floor'](constants_1[_0x20ad4e(0x1b7)]/_0x486d8f));await this['sfLogger']['log'](_0x20ad4e(0x1dc)+_0x26e17c[_0x20ad4e(0x1cd)]*_0x486d8f+_0x20ad4e(0x1c6))[_0x20ad4e(0x1b8)]();const _0x54e1ef=_0x26e17c[_0x20ad4e(0x1ec)]((_0x10b521,_0x41850a)=>({'graphId':'graph'+_0x41850a,'compositeRequest':_0x10b521})),_0x15ec68=await this[_0x20ad4e(0x1c2)]['executeGraphs'](_0x54e1ef);if(_0x5d52a9){const _0x11af91=composite_utils_1[_0x20ad4e(0x1c3)](_0x15ec68);for(const {id:_0x686e65,ref:_0x18a39d}of _0x11af91){const _0x35ce28=this[_0x20ad4e(0x1c1)][_0x20ad4e(0x1fb)](_0x3323d7=>_0x3323d7[_0x20ad4e(0x1d1)]===_0x18a39d);_0x35ce28&&(_0x35ce28[_0x20ad4e(0x1e9)]=_0x686e65);}}}}catch(_0x166139){this['logger'][_0x20ad4e(0x1f4)](_0x166139 instanceof salesforce_error_1['SalesforceError']?JSON[_0x20ad4e(0x1f2)](_0x166139['toJSON'](),null,0x2):_0x166139),this[_0x20ad4e(0x1da)][_0x20ad4e(0x1c0)](_0x166139 instanceof salesforce_error_1['SalesforceError']?JSON[_0x20ad4e(0x1f2)](_0x166139[_0x20ad4e(0x1d6)](),null,0x2):_0x166139[_0x20ad4e(0x1c9)]());throw _0x166139;}}async[a127_0x37ed9b(0x1bb)](_0x126f4d){const _0x346961=a127_0x37ed9b;for(const _0x4a36a1 of _0x126f4d){if(!_0x4a36a1['inserted'][_0x346961(0x1cd)]&&!_0x4a36a1[_0x346961(0x1dd)]['length']&&!_0x4a36a1[_0x346961(0x1d3)][_0x346961(0x1cd)])continue;const _0x1b0119=[],_0x50d485=[],_0x26b6a1=new salesforce_components_manager_service_1[(_0x346961(0x1d7))](this[_0x346961(0x1f6)]['repositoryId'],this[_0x346961(0x1f6)]['branchId'],_0x4a36a1[_0x346961(0x1ed)],this[_0x346961(0x1f6)][_0x346961(0x1e1)],this[_0x346961(0x1c1)]);_0x1b0119[_0x346961(0x1e8)](...await _0x26b6a1[_0x346961(0x1be)](_0x4a36a1['inserted'],this[_0x346961(0x1f6)][_0x346961(0x1b9)])),_0x1b0119[_0x346961(0x1e8)](...await _0x26b6a1[_0x346961(0x1fe)](_0x4a36a1[_0x346961(0x1dd)],this[_0x346961(0x1f6)][_0x346961(0x1b9)])),_0x50d485[_0x346961(0x1e8)](await _0x26b6a1[_0x346961(0x1d5)](_0x4a36a1[_0x346961(0x1d3)],!![])),this[_0x346961(0x1c1)]=_0x26b6a1['getProceededComponentsMeta'](),await this[_0x346961(0x1ca)](_0x1b0119,!![]);for(const _0x3381e6 of _0x50d485){_0x3381e6[_0x346961(0x1e6)][_0x346961(0x1cd)]&&await this['proceedRequests'](_0x3381e6[_0x346961(0x1e6)],!![]),_0x3381e6[_0x346961(0x1e3)][_0x346961(0x1cd)]&&await this[_0x346961(0x1ca)](_0x3381e6[_0x346961(0x1e3)],!![]),_0x3381e6[_0x346961(0x1d0)]['length']&&await this['proceedRequests'](_0x3381e6[_0x346961(0x1d0)],!![]);}this[_0x346961(0x1c5)][_0x346961(0x1c0)]('have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)',_0x1b0119[_0x346961(0x1cd)]);}}async[a127_0x37ed9b(0x1ce)](_0x5dcb3d){const _0x150f30=a127_0x37ed9b,_0x556bdc=[],_0x145c39=[];for(const _0x3619fe of _0x5dcb3d){if(!_0x3619fe[_0x150f30(0x1ee)][_0x150f30(0x1cd)]&&!_0x3619fe['modified'][_0x150f30(0x1cd)]&&!_0x3619fe[_0x150f30(0x1d3)][_0x150f30(0x1cd)])continue;const _0x2c1e75=new salesforce_components_manager_service_1[(_0x150f30(0x1d7))](this[_0x150f30(0x1f6)][_0x150f30(0x1d8)],this[_0x150f30(0x1f6)]['branchId'],_0x3619fe[_0x150f30(0x1ed)],this[_0x150f30(0x1f6)]['recordTypes'],[]);_0x556bdc['push'](...await _0x2c1e75[_0x150f30(0x1be)](_0x3619fe['inserted'])),_0x556bdc[_0x150f30(0x1e8)](...await _0x2c1e75[_0x150f30(0x1fe)](_0x3619fe[_0x150f30(0x1dd)])),_0x145c39[_0x150f30(0x1e8)](await _0x2c1e75[_0x150f30(0x1d5)](_0x3619fe['removed']));}this[_0x150f30(0x1c5)]['log'](_0x150f30(0x1fa),_0x556bdc['length']),await this[_0x150f30(0x1ca)](_0x556bdc);const _0x3c71a1=_0x145c39[_0x150f30(0x1e5)]((_0x1649d2,_0x740aef)=>({'manifests':[..._0x1649d2[_0x150f30(0x1e6)],..._0x740aef[_0x150f30(0x1e6)]],'componentsToDelete':[..._0x1649d2[_0x150f30(0x1d0)],..._0x740aef[_0x150f30(0x1d0)]],'componentsToUpdate':[..._0x1649d2[_0x150f30(0x1e3)],..._0x740aef['componentsToUpdate']]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x3c71a1[_0x150f30(0x1e6)][_0x150f30(0x1cd)]&&await this['proceedRequests'](_0x3c71a1['manifests'],!![]),_0x3c71a1[_0x150f30(0x1e3)][_0x150f30(0x1cd)]&&await this[_0x150f30(0x1ca)](_0x3c71a1[_0x150f30(0x1e3)],!![]),_0x3c71a1['componentsToDelete'][_0x150f30(0x1cd)]&&await this[_0x150f30(0x1ca)](_0x3c71a1[_0x150f30(0x1d0)],!![]);}async[a127_0x37ed9b(0x1f3)](_0x523e74){const _0x5abb49=a127_0x37ed9b;this['options'][_0x5abb49(0x1e4)]?await this[_0x5abb49(0x1ce)](_0x523e74):await this[_0x5abb49(0x1bb)](_0x523e74);}}function a127_0x3c15(_0x5305cf,_0x3b5297){const _0x4022e4=a127_0x4ff5();return a127_0x3c15=function(_0xf48d25,_0x12f717){_0xf48d25=_0xf48d25-0x1b3;let _0x4ff517=_0x4022e4[_0xf48d25];return _0x4ff517;},a127_0x3c15(_0x5305cf,_0x3b5297);}exports[a127_0x37ed9b(0x1e2)]=SalesforceCommitsManager;