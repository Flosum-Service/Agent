function a127_0xb557(){const _0xfaa98=['30084GirXEG','push','SalesforceGitSyncService','send','defineProperty','name','modified','SalesforceError','apply','(((.+)+)+)+$','componentsToDelete','reduce','toString','9paZgmM','repositoryId','inserted','floor','./salesforce-composite.service','gitSync','88378pqyCgY','chunkArray','stringify','./salesforce-components-manager.service','options','logger','update','1535807jOzcrJ','34331AnPIZv','toJSON','300711zhioOk','recordTypes','componentsToUpdate','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','1053472KbLzCW','../errors/salesforce.error','\x20requests\x20to\x20composite\x20api.','branchId','301KewYAE','__esModule','proceedRequests','reference','composite','../../../constants','find','author','sfLogger','getProceededComponentsMeta','get','[INFO]\x20Sending\x20','typedi','./salesforce-git-sync.service','12JSATIv','5lSEkPS','default','proceedCommits','__importDefault','removed','executeGraphs','SalesforceCommitsManager','COMPONENTS_PER_CHUNK','delete','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','4JBxKxt','constructor','Logger','commitId','690LoxRzK','manifests','extractComponentIdsFromGraphsResponse','log','proceedCommitsToRepository','search','proceedCommitsToBranch','SalesforceCompositeService','length','SalesforceComponentsManager','proceededComponentsMeta','../../shared/utils','646484LOLqpc'];a127_0xb557=function(){return _0xfaa98;};return a127_0xb557();}const a127_0x238ab5=a127_0x3598;(function(_0x303507,_0x51aa65){const _0x2cbc2f=a127_0x3598,_0x138382=_0x303507();while(!![]){try{const _0x54cf9d=-parseInt(_0x2cbc2f(0x84))/0x1+parseInt(_0x2cbc2f(0xaf))/0x2*(-parseInt(_0x2cbc2f(0x8e))/0x3)+-parseInt(_0x2cbc2f(0xbf))/0x4*(-parseInt(_0x2cbc2f(0xa5))/0x5)+-parseInt(_0x2cbc2f(0xc0))/0x6*(-parseInt(_0x2cbc2f(0x96))/0x7)+parseInt(_0x2cbc2f(0x92))/0x8*(parseInt(_0x2cbc2f(0x7e))/0x9)+parseInt(_0x2cbc2f(0xb3))/0xa*(-parseInt(_0x2cbc2f(0x8c))/0xb)+-parseInt(_0x2cbc2f(0xa4))/0xc*(-parseInt(_0x2cbc2f(0x8b))/0xd);if(_0x54cf9d===_0x51aa65)break;else _0x138382['push'](_0x138382['shift']());}catch(_0x85dd0b){_0x138382['push'](_0x138382['shift']());}}}(a127_0xb557,0x1dfdd));const a127_0x34d11d=(function(){let _0x64523d=!![];return function(_0x4d64e0,_0x4cf9f6){const _0x326fd0=_0x64523d?function(){const _0x5ccc0c=a127_0x3598;if(_0x4cf9f6){const _0x30b6fb=_0x4cf9f6[_0x5ccc0c(0x79)](_0x4d64e0,arguments);return _0x4cf9f6=null,_0x30b6fb;}}:function(){};return _0x64523d=![],_0x326fd0;};}()),a127_0x1fe33d=a127_0x34d11d(this,function(){const _0x53aae7=a127_0x3598;return a127_0x1fe33d[_0x53aae7(0x7d)]()[_0x53aae7(0xb8)](_0x53aae7(0x7a))['toString']()[_0x53aae7(0xb0)](a127_0x1fe33d)[_0x53aae7(0xb8)](_0x53aae7(0x7a));});a127_0x1fe33d();'use strict';var __importDefault=this&&this[a127_0x238ab5(0xa8)]||function(_0x540030){const _0x4e5cc2=a127_0x238ab5;return _0x540030&&_0x540030[_0x4e5cc2(0x97)]?_0x540030:{'default':_0x540030};};Object[a127_0x238ab5(0x75)](exports,a127_0x238ab5(0x97),{'value':!![]}),exports[a127_0x238ab5(0xab)]=void 0x0;function a127_0x3598(_0x6d59e5,_0x989216){const _0x4dc458=a127_0xb557();return a127_0x3598=function(_0x1fe33d,_0x34d11d){_0x1fe33d=_0x1fe33d-0x74;let _0xb557c9=_0x4dc458[_0x1fe33d];return _0xb557c9;},a127_0x3598(_0x6d59e5,_0x989216);}const core_1=require('../../../core'),typedi_1=__importDefault(require(a127_0x238ab5(0xa2))),constants_1=require(a127_0x238ab5(0x9b)),utils_1=require(a127_0x238ab5(0xbe)),salesforce_error_1=require(a127_0x238ab5(0x93)),composite_utils_1=require('../utils/composite.utils'),salesforce_components_manager_service_1=require(a127_0x238ab5(0x87)),salesforce_composite_service_1=require(a127_0x238ab5(0x82)),salesforce_git_sync_service_1=require(a127_0x238ab5(0xa3));class SalesforceCommitsManager{constructor(_0x38652d){const _0x8fbc00=a127_0x238ab5;this[_0x8fbc00(0x88)]=_0x38652d,this[_0x8fbc00(0xac)]=0x3,this[_0x8fbc00(0x89)]=new core_1[(_0x8fbc00(0xb1))](SalesforceCommitsManager[_0x8fbc00(0x76)]),this[_0x8fbc00(0x9e)]=this[_0x8fbc00(0x88)][_0x8fbc00(0x89)],this['composite']=typedi_1[_0x8fbc00(0xa6)]['get'](salesforce_composite_service_1[_0x8fbc00(0xba)]),this[_0x8fbc00(0x83)]=typedi_1[_0x8fbc00(0xa6)][_0x8fbc00(0xa0)](salesforce_git_sync_service_1[_0x8fbc00(0xc2)]),this[_0x8fbc00(0xbd)]=[];}async[a127_0x238ab5(0x98)](_0x4e9476,_0x5a7fe5=![]){const _0xcef9d8=a127_0x238ab5,_0x4839be=(this[_0xcef9d8(0xac)]+ +_0x5a7fe5)*0x3,_0x1d6904=utils_1[_0xcef9d8(0x85)](_0x4e9476,_0x4839be);try{while(_0x1d6904[_0xcef9d8(0xbb)]){const _0x3f0355=_0x1d6904['splice'](0x0,Math[_0xcef9d8(0x81)](constants_1['SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST']/_0x4839be));await this[_0xcef9d8(0x9e)][_0xcef9d8(0xb6)](_0xcef9d8(0xa1)+_0x3f0355['length']*_0x4839be+_0xcef9d8(0x94))[_0xcef9d8(0x74)]();const _0x22f83f=_0x3f0355['map']((_0x1f3f69,_0x763338)=>({'graphId':'graph'+_0x763338,'compositeRequest':_0x1f3f69})),_0x410980=await this[_0xcef9d8(0x9a)][_0xcef9d8(0xaa)](_0x22f83f);if(_0x5a7fe5){const _0x5b4197=composite_utils_1[_0xcef9d8(0xb5)](_0x410980);for(const {id:_0x3af500,ref:_0xcaead0}of _0x5b4197){const _0x6bc9f7=this[_0xcef9d8(0xbd)][_0xcef9d8(0x9c)](_0x1bace2=>_0x1bace2[_0xcef9d8(0x99)]===_0xcaead0);_0x6bc9f7&&(_0x6bc9f7['componentId']=_0x3af500);}}}}catch(_0x5ddc6b){this[_0xcef9d8(0x89)]['error'](_0x5ddc6b instanceof salesforce_error_1[_0xcef9d8(0x78)]?JSON[_0xcef9d8(0x86)](_0x5ddc6b[_0xcef9d8(0x8d)](),null,0x2):_0x5ddc6b),this[_0xcef9d8(0x9e)][_0xcef9d8(0xb6)](_0x5ddc6b instanceof salesforce_error_1['SalesforceError']?JSON['stringify'](_0x5ddc6b['toJSON'](),null,0x2):_0x5ddc6b['toString']());throw _0x5ddc6b;}}async[a127_0x238ab5(0xb7)](_0x4ae6b5){const _0x17fff2=a127_0x238ab5;for(const _0x2ab358 of _0x4ae6b5){if(!_0x2ab358[_0x17fff2(0x80)]['length']&&!_0x2ab358[_0x17fff2(0x77)][_0x17fff2(0xbb)]&&!_0x2ab358[_0x17fff2(0xa9)][_0x17fff2(0xbb)])continue;const _0x412192=[],_0x17eae6=[],_0x2f04f3=new salesforce_components_manager_service_1[(_0x17fff2(0xbc))](this[_0x17fff2(0x88)][_0x17fff2(0x7f)],this[_0x17fff2(0x88)][_0x17fff2(0x95)],_0x2ab358[_0x17fff2(0x9d)],this[_0x17fff2(0x88)][_0x17fff2(0x8f)],this[_0x17fff2(0xbd)]);_0x412192[_0x17fff2(0xc1)](...await _0x2f04f3['insert'](_0x2ab358[_0x17fff2(0x80)],this[_0x17fff2(0x88)][_0x17fff2(0xb2)])),_0x412192[_0x17fff2(0xc1)](...await _0x2f04f3[_0x17fff2(0x8a)](_0x2ab358[_0x17fff2(0x77)],this['options'][_0x17fff2(0xb2)])),_0x17eae6[_0x17fff2(0xc1)](await _0x2f04f3[_0x17fff2(0xad)](_0x2ab358[_0x17fff2(0xa9)],!![])),this['proceededComponentsMeta']=_0x2f04f3[_0x17fff2(0x9f)](),await this['proceedRequests'](_0x412192,!![]);for(const _0x476a37 of _0x17eae6){_0x476a37[_0x17fff2(0xb4)]['length']&&await this[_0x17fff2(0x98)](_0x476a37['manifests'],!![]),_0x476a37[_0x17fff2(0x90)][_0x17fff2(0xbb)]&&await this[_0x17fff2(0x98)](_0x476a37['componentsToUpdate'],!![]),_0x476a37['componentsToDelete']['length']&&await this[_0x17fff2(0x98)](_0x476a37[_0x17fff2(0x7b)],!![]);}this[_0x17fff2(0x89)]['log'](_0x17fff2(0xae),_0x412192[_0x17fff2(0xbb)]);}}async[a127_0x238ab5(0xb9)](_0x125c0b){const _0x5148fd=a127_0x238ab5,_0x1c328b=[],_0x520406=[];for(const _0x4efff5 of _0x125c0b){if(!_0x4efff5['inserted'][_0x5148fd(0xbb)]&&!_0x4efff5['modified']['length']&&!_0x4efff5['removed'][_0x5148fd(0xbb)])continue;const _0x33a925=new salesforce_components_manager_service_1[(_0x5148fd(0xbc))](this[_0x5148fd(0x88)][_0x5148fd(0x7f)],this['options'][_0x5148fd(0x95)],_0x4efff5[_0x5148fd(0x9d)],this[_0x5148fd(0x88)][_0x5148fd(0x8f)],[]);_0x1c328b[_0x5148fd(0xc1)](...await _0x33a925['insert'](_0x4efff5['inserted'])),_0x1c328b['push'](...await _0x33a925[_0x5148fd(0x8a)](_0x4efff5[_0x5148fd(0x77)])),_0x520406[_0x5148fd(0xc1)](await _0x33a925[_0x5148fd(0xad)](_0x4efff5[_0x5148fd(0xa9)]));}this[_0x5148fd(0x89)][_0x5148fd(0xb6)](_0x5148fd(0x91),_0x1c328b[_0x5148fd(0xbb)]),await this['proceedRequests'](_0x1c328b);const _0x2638a4=_0x520406[_0x5148fd(0x7c)]((_0x47e2b3,_0x3a27c4)=>({'manifests':[..._0x47e2b3['manifests'],..._0x3a27c4[_0x5148fd(0xb4)]],'componentsToDelete':[..._0x47e2b3[_0x5148fd(0x7b)],..._0x3a27c4[_0x5148fd(0x7b)]],'componentsToUpdate':[..._0x47e2b3[_0x5148fd(0x90)],..._0x3a27c4[_0x5148fd(0x90)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x2638a4[_0x5148fd(0xb4)]['length']&&await this['proceedRequests'](_0x2638a4[_0x5148fd(0xb4)],!![]),_0x2638a4[_0x5148fd(0x90)][_0x5148fd(0xbb)]&&await this[_0x5148fd(0x98)](_0x2638a4[_0x5148fd(0x90)],!![]),_0x2638a4[_0x5148fd(0x7b)][_0x5148fd(0xbb)]&&await this['proceedRequests'](_0x2638a4[_0x5148fd(0x7b)],!![]);}async[a127_0x238ab5(0xa7)](_0x58b7c6){const _0xe75e4=a127_0x238ab5;this['options'][_0xe75e4(0x95)]?await this[_0xe75e4(0xb9)](_0x58b7c6):await this['proceedCommitsToRepository'](_0x58b7c6);}}exports[a127_0x238ab5(0xab)]=SalesforceCommitsManager;