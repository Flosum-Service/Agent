const a127_0x5ae5c6=a127_0x5053;(function(_0x192f6e,_0x267697){const _0x1318a4=a127_0x5053,_0x232ce9=_0x192f6e();while(!![]){try{const _0x270f71=parseInt(_0x1318a4(0x8b))/0x1+-parseInt(_0x1318a4(0xd3))/0x2*(-parseInt(_0x1318a4(0xad))/0x3)+parseInt(_0x1318a4(0x97))/0x4+-parseInt(_0x1318a4(0xa7))/0x5*(-parseInt(_0x1318a4(0xc3))/0x6)+parseInt(_0x1318a4(0xac))/0x7+parseInt(_0x1318a4(0xab))/0x8+-parseInt(_0x1318a4(0xc4))/0x9*(parseInt(_0x1318a4(0x8d))/0xa);if(_0x270f71===_0x267697)break;else _0x232ce9['push'](_0x232ce9['shift']());}catch(_0x50f791){_0x232ce9['push'](_0x232ce9['shift']());}}}(a127_0x1b05,0x8bd5a));const a127_0x22c3a3=(function(){let _0xfbc873=!![];return function(_0x151cb5,_0x20043d){const _0x565021=_0xfbc873?function(){if(_0x20043d){const _0x2f56e3=_0x20043d['apply'](_0x151cb5,arguments);return _0x20043d=null,_0x2f56e3;}}:function(){};return _0xfbc873=![],_0x565021;};}()),a127_0x4fbd07=a127_0x22c3a3(this,function(){const _0x37d398=a127_0x5053;return a127_0x4fbd07[_0x37d398(0xc7)]()['search'](_0x37d398(0xcb))[_0x37d398(0xc7)]()[_0x37d398(0xa9)](a127_0x4fbd07)[_0x37d398(0xb5)](_0x37d398(0xcb));});a127_0x4fbd07();function a127_0x5053(_0x1e9cc0,_0x2d8f86){const _0x43e9e6=a127_0x1b05();return a127_0x5053=function(_0x4fbd07,_0x22c3a3){_0x4fbd07=_0x4fbd07-0x89;let _0x1b0593=_0x43e9e6[_0x4fbd07];return _0x1b0593;},a127_0x5053(_0x1e9cc0,_0x2d8f86);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x418a63){const _0xe459f7=a127_0x5053;return _0x418a63&&_0x418a63[_0xe459f7(0xc6)]?_0x418a63:{'default':_0x418a63};};Object[a127_0x5ae5c6(0xa2)](exports,a127_0x5ae5c6(0xc6),{'value':!![]}),exports[a127_0x5ae5c6(0xb3)]=void 0x0;const core_1=require(a127_0x5ae5c6(0xaf)),typedi_1=__importDefault(require(a127_0x5ae5c6(0x95))),constants_1=require(a127_0x5ae5c6(0x9a)),utils_1=require('../../shared/utils'),salesforce_error_1=require(a127_0x5ae5c6(0xa6)),composite_utils_1=require(a127_0x5ae5c6(0xb9)),salesforce_components_manager_service_1=require(a127_0x5ae5c6(0x9c)),salesforce_composite_service_1=require('./salesforce-composite.service'),salesforce_git_sync_service_1=require(a127_0x5ae5c6(0xa3));function a127_0x1b05(){const _0x2de91c=['chunkArray','get','error','../utils/composite.utils','Logger','commitId','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','author','delete','map','sfLogger','floor','componentsToDelete','4621098KqfQaD','26259813fEFPra','find','__esModule','toString','proceedCommitsToRepository','executeGraphs','proceedRequests','(((.+)+)+)+$','push','SalesforceGitSyncService','name','SalesforceComponentsManager','manifests','stringify','send','1512XjOncl','options','componentsToUpdate','inserted','119432cNIBWp','SalesforceError','10LIMFmK','componentId','[INFO]\x20Sending\x20','length','log','logger','update','removed','typedi','getProceededComponentsMeta','3602732LMxfqc','proceedCommitsToBranch','insert','../../../constants','proceedCommits','./salesforce-components-manager.service','repositoryId','reference','composite','branchId','extractComponentIdsFromGraphsResponse','defineProperty','./salesforce-git-sync.service','gitSync','\x20requests\x20to\x20composite\x20api.','../errors/salesforce.error','5FObRKz','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','constructor','default','5484712OJmnQB','6440924BNxOnk','375dmlcgi','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','../../../core','reduce','recordTypes','splice','SalesforceCommitsManager','proceededComponentsMeta','search'];a127_0x1b05=function(){return _0x2de91c;};return a127_0x1b05();}class SalesforceCommitsManager{constructor(_0x58a628){const _0x2208b0=a127_0x5ae5c6;this[_0x2208b0(0xd4)]=_0x58a628,this['COMPONENTS_PER_CHUNK']=0x3,this['logger']=new core_1[(_0x2208b0(0xba))](SalesforceCommitsManager[_0x2208b0(0xce)]),this['sfLogger']=this[_0x2208b0(0xd4)][_0x2208b0(0x92)],this[_0x2208b0(0x9f)]=typedi_1['default'][_0x2208b0(0xb7)](salesforce_composite_service_1['SalesforceCompositeService']),this[_0x2208b0(0xa4)]=typedi_1[_0x2208b0(0xaa)][_0x2208b0(0xb7)](salesforce_git_sync_service_1[_0x2208b0(0xcd)]),this[_0x2208b0(0xb4)]=[];}async['proceedRequests'](_0x36785c,_0x4b15c8=![]){const _0x950a20=a127_0x5ae5c6,_0xd3b7a9=(this['COMPONENTS_PER_CHUNK']+ +_0x4b15c8)*0x3,_0x3965ba=utils_1[_0x950a20(0xb6)](_0x36785c,_0xd3b7a9);try{while(_0x3965ba['length']){const _0x1c98d8=_0x3965ba[_0x950a20(0xb2)](0x0,Math[_0x950a20(0xc1)](constants_1[_0x950a20(0xbc)]/_0xd3b7a9));await this[_0x950a20(0xc0)][_0x950a20(0x91)](_0x950a20(0x8f)+_0x1c98d8[_0x950a20(0x90)]*_0xd3b7a9+_0x950a20(0xa5))[_0x950a20(0xd2)]();const _0x2a5ec3=_0x1c98d8[_0x950a20(0xbf)]((_0x2f2bfd,_0x5f0283)=>({'graphId':'graph'+_0x5f0283,'compositeRequest':_0x2f2bfd})),_0xc692e9=await this['composite'][_0x950a20(0xc9)](_0x2a5ec3);if(_0x4b15c8){const _0x482a4e=composite_utils_1[_0x950a20(0xa1)](_0xc692e9);for(const {id:_0x277769,ref:_0x5ca926}of _0x482a4e){const _0x1c8b0d=this['proceededComponentsMeta'][_0x950a20(0xc5)](_0x16c4f1=>_0x16c4f1[_0x950a20(0x9e)]===_0x5ca926);_0x1c8b0d&&(_0x1c8b0d[_0x950a20(0x8e)]=_0x277769);}}}}catch(_0x21761b){this[_0x950a20(0x92)][_0x950a20(0xb8)](_0x21761b instanceof salesforce_error_1[_0x950a20(0x8c)]?JSON[_0x950a20(0xd1)](_0x21761b['toJSON'](),null,0x2):_0x21761b),this[_0x950a20(0xc0)][_0x950a20(0x91)](_0x21761b instanceof salesforce_error_1[_0x950a20(0x8c)]?JSON[_0x950a20(0xd1)](_0x21761b['toJSON'](),null,0x2):_0x21761b[_0x950a20(0xc7)]());throw _0x21761b;}}async[a127_0x5ae5c6(0xc8)](_0x1a63fd){const _0x3c9372=a127_0x5ae5c6;for(const _0x288aa4 of _0x1a63fd){if(!_0x288aa4[_0x3c9372(0x8a)]['length']&&!_0x288aa4['modified']['length']&&!_0x288aa4[_0x3c9372(0x94)][_0x3c9372(0x90)])continue;const _0x2e9b97=[],_0x4872ca=[],_0x2eb914=new salesforce_components_manager_service_1[(_0x3c9372(0xcf))](this[_0x3c9372(0xd4)][_0x3c9372(0x9d)],this[_0x3c9372(0xd4)][_0x3c9372(0xa0)],_0x288aa4[_0x3c9372(0xbd)],this[_0x3c9372(0xd4)][_0x3c9372(0xb1)],this[_0x3c9372(0xb4)]);_0x2e9b97[_0x3c9372(0xcc)](...await _0x2eb914[_0x3c9372(0x99)](_0x288aa4[_0x3c9372(0x8a)],this[_0x3c9372(0xd4)][_0x3c9372(0xbb)])),_0x2e9b97[_0x3c9372(0xcc)](...await _0x2eb914['update'](_0x288aa4['modified'],this[_0x3c9372(0xd4)][_0x3c9372(0xbb)])),_0x4872ca[_0x3c9372(0xcc)](await _0x2eb914[_0x3c9372(0xbe)](_0x288aa4[_0x3c9372(0x94)],!![])),this[_0x3c9372(0xb4)]=_0x2eb914[_0x3c9372(0x96)](),await this[_0x3c9372(0xca)](_0x2e9b97,!![]);for(const _0x2dfa11 of _0x4872ca){_0x2dfa11[_0x3c9372(0xd0)][_0x3c9372(0x90)]&&await this[_0x3c9372(0xca)](_0x2dfa11[_0x3c9372(0xd0)],!![]),_0x2dfa11['componentsToUpdate'][_0x3c9372(0x90)]&&await this['proceedRequests'](_0x2dfa11['componentsToUpdate'],!![]),_0x2dfa11[_0x3c9372(0xc2)]['length']&&await this[_0x3c9372(0xca)](_0x2dfa11['componentsToDelete'],!![]);}this[_0x3c9372(0x92)][_0x3c9372(0x91)](_0x3c9372(0xae),_0x2e9b97[_0x3c9372(0x90)]);}}async[a127_0x5ae5c6(0x98)](_0x32e343){const _0x4f400e=a127_0x5ae5c6,_0xaa4f7f=[],_0x5e56b8=[];for(const _0x11d40e of _0x32e343){if(!_0x11d40e[_0x4f400e(0x8a)][_0x4f400e(0x90)]&&!_0x11d40e['modified']['length']&&!_0x11d40e[_0x4f400e(0x94)][_0x4f400e(0x90)])continue;const _0xa4c0f2=new salesforce_components_manager_service_1[(_0x4f400e(0xcf))](this[_0x4f400e(0xd4)][_0x4f400e(0x9d)],this[_0x4f400e(0xd4)][_0x4f400e(0xa0)],_0x11d40e[_0x4f400e(0xbd)],this[_0x4f400e(0xd4)]['recordTypes'],[]);_0xaa4f7f[_0x4f400e(0xcc)](...await _0xa4c0f2[_0x4f400e(0x99)](_0x11d40e[_0x4f400e(0x8a)])),_0xaa4f7f['push'](...await _0xa4c0f2[_0x4f400e(0x93)](_0x11d40e['modified'])),_0x5e56b8['push'](await _0xa4c0f2[_0x4f400e(0xbe)](_0x11d40e[_0x4f400e(0x94)]));}this['logger'][_0x4f400e(0x91)](_0x4f400e(0xa8),_0xaa4f7f[_0x4f400e(0x90)]),await this[_0x4f400e(0xca)](_0xaa4f7f);const _0x5a7e45=_0x5e56b8[_0x4f400e(0xb0)]((_0x23c8c2,_0x3d701a)=>({'manifests':[..._0x23c8c2[_0x4f400e(0xd0)],..._0x3d701a['manifests']],'componentsToDelete':[..._0x23c8c2[_0x4f400e(0xc2)],..._0x3d701a[_0x4f400e(0xc2)]],'componentsToUpdate':[..._0x23c8c2[_0x4f400e(0x89)],..._0x3d701a['componentsToUpdate']]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x5a7e45['manifests'][_0x4f400e(0x90)]&&await this[_0x4f400e(0xca)](_0x5a7e45[_0x4f400e(0xd0)],!![]),_0x5a7e45[_0x4f400e(0x89)][_0x4f400e(0x90)]&&await this[_0x4f400e(0xca)](_0x5a7e45['componentsToUpdate'],!![]),_0x5a7e45[_0x4f400e(0xc2)][_0x4f400e(0x90)]&&await this[_0x4f400e(0xca)](_0x5a7e45[_0x4f400e(0xc2)],!![]);}async[a127_0x5ae5c6(0x9b)](_0x39ef56){const _0x12be72=a127_0x5ae5c6;this[_0x12be72(0xd4)]['branchId']?await this[_0x12be72(0x98)](_0x39ef56):await this[_0x12be72(0xc8)](_0x39ef56);}}exports[a127_0x5ae5c6(0xb3)]=SalesforceCommitsManager;