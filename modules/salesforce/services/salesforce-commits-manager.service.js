function a127_0x4ea1(_0x1f8d14,_0x3d3bff){const _0x425ed9=a127_0x2c8b();return a127_0x4ea1=function(_0x52aa73,_0x26219f){_0x52aa73=_0x52aa73-0x128;let _0x2c8bc8=_0x425ed9[_0x52aa73];return _0x2c8bc8;},a127_0x4ea1(_0x1f8d14,_0x3d3bff);}const a127_0x174f44=a127_0x4ea1;(function(_0x17f0f8,_0x4df253){const _0x390357=a127_0x4ea1,_0x545e39=_0x17f0f8();while(!![]){try{const _0x1c68fd=-parseInt(_0x390357(0x162))/0x1*(parseInt(_0x390357(0x152))/0x2)+-parseInt(_0x390357(0x16a))/0x3+parseInt(_0x390357(0x166))/0x4+parseInt(_0x390357(0x164))/0x5+parseInt(_0x390357(0x136))/0x6*(-parseInt(_0x390357(0x142))/0x7)+-parseInt(_0x390357(0x146))/0x8*(parseInt(_0x390357(0x14e))/0x9)+parseInt(_0x390357(0x12c))/0xa*(parseInt(_0x390357(0x15f))/0xb);if(_0x1c68fd===_0x4df253)break;else _0x545e39['push'](_0x545e39['shift']());}catch(_0x17511c){_0x545e39['push'](_0x545e39['shift']());}}}(a127_0x2c8b,0xae776));const a127_0x26219f=(function(){let _0x1dec01=!![];return function(_0x3412de,_0x2a1794){const _0x502f7f=_0x1dec01?function(){const _0x2158d0=a127_0x4ea1;if(_0x2a1794){const _0x4f686b=_0x2a1794[_0x2158d0(0x150)](_0x3412de,arguments);return _0x2a1794=null,_0x4f686b;}}:function(){};return _0x1dec01=![],_0x502f7f;};}()),a127_0x52aa73=a127_0x26219f(this,function(){const _0x5b1661=a127_0x4ea1;return a127_0x52aa73[_0x5b1661(0x160)]()[_0x5b1661(0x163)](_0x5b1661(0x137))[_0x5b1661(0x160)]()['constructor'](a127_0x52aa73)[_0x5b1661(0x163)](_0x5b1661(0x137));});function a127_0x2c8b(){const _0x15cf1d=['repositoryId','../../../core','componentsToUpdate','recordTypes','options','proceedCommitsToRepository','SalesforceError','./salesforce-git-sync.service','Logger','proceedCommitsToBranch','1217783GPRTfM','map','send','default','40696seocek','componentId','floor','SalesforceCommitsManager','componentsToDelete','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','extractComponentIdsFromGraphsResponse','SalesforceComponentsManager','1854SRsOoS','./salesforce-composite.service','apply','stringify','34fkVcxP','gitSync','proceedRequests','commitId','logger','composite','typedi','graph','SalesforceCompositeService','../errors/salesforce.error','COMPONENTS_PER_CHUNK','modified','get','33MzszaB','toString','push','20109toaGyW','search','333405pvhwTp','../../shared/utils','5229328vFEnnx','__esModule','length','reference','37974xhYTwM','getProceededComponentsMeta','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','manifests','__importDefault','error','update','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','delete','chunkArray','proceededComponentsMeta','insert','./salesforce-components-manager.service','defineProperty','4216470cwIVMA','toJSON','sfLogger','name','inserted','reduce','author','log','branchId','removed','18uggfSC','(((.+)+)+)+$'];a127_0x2c8b=function(){return _0x15cf1d;};return a127_0x2c8b();}a127_0x52aa73();'use strict';var __importDefault=this&&this[a127_0x174f44(0x16e)]||function(_0x10b2d4){const _0x7ecfef=a127_0x174f44;return _0x10b2d4&&_0x10b2d4[_0x7ecfef(0x167)]?_0x10b2d4:{'default':_0x10b2d4};};Object[a127_0x174f44(0x12b)](exports,'__esModule',{'value':!![]}),exports['SalesforceCommitsManager']=void 0x0;const core_1=require(a127_0x174f44(0x139)),typedi_1=__importDefault(require(a127_0x174f44(0x158))),constants_1=require('../../../constants'),utils_1=require(a127_0x174f44(0x165)),salesforce_error_1=require(a127_0x174f44(0x15b)),composite_utils_1=require('../utils/composite.utils'),salesforce_components_manager_service_1=require(a127_0x174f44(0x12a)),salesforce_composite_service_1=require(a127_0x174f44(0x14f)),salesforce_git_sync_service_1=require(a127_0x174f44(0x13f));class SalesforceCommitsManager{constructor(_0x11c405){const _0x4496bd=a127_0x174f44;this[_0x4496bd(0x13c)]=_0x11c405,this[_0x4496bd(0x15c)]=0x3,this['logger']=new core_1[(_0x4496bd(0x140))](SalesforceCommitsManager[_0x4496bd(0x12f)]),this[_0x4496bd(0x12e)]=this[_0x4496bd(0x13c)][_0x4496bd(0x156)],this['composite']=typedi_1[_0x4496bd(0x145)][_0x4496bd(0x15e)](salesforce_composite_service_1[_0x4496bd(0x15a)]),this[_0x4496bd(0x153)]=typedi_1['default'][_0x4496bd(0x15e)](salesforce_git_sync_service_1['SalesforceGitSyncService']),this[_0x4496bd(0x128)]=[];}async[a127_0x174f44(0x154)](_0x94f568,_0x1e51ca=![]){const _0x22e098=a127_0x174f44,_0x51185c=(this['COMPONENTS_PER_CHUNK']+ +_0x1e51ca)*0x3,_0x31711d=utils_1[_0x22e098(0x173)](_0x94f568,_0x51185c);try{while(_0x31711d['length']){const _0x3ac1f0=_0x31711d['splice'](0x0,Math[_0x22e098(0x148)](constants_1[_0x22e098(0x14b)]/_0x51185c));await this[_0x22e098(0x12e)]['log']('[INFO]\x20Sending\x20'+_0x3ac1f0[_0x22e098(0x168)]*_0x51185c+'\x20requests\x20to\x20composite\x20api.')[_0x22e098(0x144)]();const _0x25a5bb=_0x3ac1f0[_0x22e098(0x143)]((_0x39d989,_0x51242e)=>({'graphId':_0x22e098(0x159)+_0x51242e,'compositeRequest':_0x39d989})),_0x1da8a6=await this[_0x22e098(0x157)]['executeGraphs'](_0x25a5bb);if(_0x1e51ca){const _0x4f0bd4=composite_utils_1[_0x22e098(0x14c)](_0x1da8a6);for(const {id:_0xd4e5a6,ref:_0x54ac3d}of _0x4f0bd4){const _0x21ac7b=this[_0x22e098(0x128)]['find'](_0x5ce2a6=>_0x5ce2a6[_0x22e098(0x169)]===_0x54ac3d);_0x21ac7b&&(_0x21ac7b[_0x22e098(0x147)]=_0xd4e5a6);}}}}catch(_0xd33316){this[_0x22e098(0x156)][_0x22e098(0x16f)](_0xd33316 instanceof salesforce_error_1[_0x22e098(0x13e)]?JSON[_0x22e098(0x151)](_0xd33316[_0x22e098(0x12d)](),null,0x2):_0xd33316),this[_0x22e098(0x12e)][_0x22e098(0x133)](_0xd33316 instanceof salesforce_error_1[_0x22e098(0x13e)]?JSON[_0x22e098(0x151)](_0xd33316[_0x22e098(0x12d)](),null,0x2):_0xd33316[_0x22e098(0x160)]());throw _0xd33316;}}async[a127_0x174f44(0x13d)](_0x4f033f){const _0x3f5cd6=a127_0x174f44;for(const _0x2c70be of _0x4f033f){if(!_0x2c70be[_0x3f5cd6(0x130)][_0x3f5cd6(0x168)]&&!_0x2c70be['modified'][_0x3f5cd6(0x168)]&&!_0x2c70be[_0x3f5cd6(0x135)][_0x3f5cd6(0x168)])continue;const _0x3711b2=[],_0x527f61=[],_0x559b6d=new salesforce_components_manager_service_1[(_0x3f5cd6(0x14d))](this[_0x3f5cd6(0x13c)][_0x3f5cd6(0x138)],this[_0x3f5cd6(0x13c)][_0x3f5cd6(0x134)],_0x2c70be[_0x3f5cd6(0x132)],this[_0x3f5cd6(0x13c)][_0x3f5cd6(0x13b)],this[_0x3f5cd6(0x128)]);_0x3711b2[_0x3f5cd6(0x161)](...await _0x559b6d[_0x3f5cd6(0x129)](_0x2c70be[_0x3f5cd6(0x130)],this[_0x3f5cd6(0x13c)][_0x3f5cd6(0x155)])),_0x3711b2[_0x3f5cd6(0x161)](...await _0x559b6d[_0x3f5cd6(0x170)](_0x2c70be[_0x3f5cd6(0x15d)],this[_0x3f5cd6(0x13c)][_0x3f5cd6(0x155)])),_0x527f61[_0x3f5cd6(0x161)](await _0x559b6d[_0x3f5cd6(0x172)](_0x2c70be[_0x3f5cd6(0x135)],!![])),this[_0x3f5cd6(0x128)]=_0x559b6d[_0x3f5cd6(0x16b)](),await this[_0x3f5cd6(0x154)](_0x3711b2,!![]);for(const _0x4a61e1 of _0x527f61){_0x4a61e1[_0x3f5cd6(0x16d)]['length']&&await this[_0x3f5cd6(0x154)](_0x4a61e1[_0x3f5cd6(0x16d)],!![]),_0x4a61e1[_0x3f5cd6(0x13a)]['length']&&await this[_0x3f5cd6(0x154)](_0x4a61e1['componentsToUpdate'],!![]),_0x4a61e1['componentsToDelete'][_0x3f5cd6(0x168)]&&await this[_0x3f5cd6(0x154)](_0x4a61e1[_0x3f5cd6(0x14a)],!![]);}this[_0x3f5cd6(0x156)][_0x3f5cd6(0x133)](_0x3f5cd6(0x16c),_0x3711b2[_0x3f5cd6(0x168)]);}}async[a127_0x174f44(0x141)](_0x2e86f4){const _0x706a1f=a127_0x174f44,_0x46bcca=[],_0x3573e2=[];for(const _0x4b15de of _0x2e86f4){if(!_0x4b15de[_0x706a1f(0x130)][_0x706a1f(0x168)]&&!_0x4b15de[_0x706a1f(0x15d)][_0x706a1f(0x168)]&&!_0x4b15de[_0x706a1f(0x135)][_0x706a1f(0x168)])continue;const _0x424ff0=new salesforce_components_manager_service_1[(_0x706a1f(0x14d))](this[_0x706a1f(0x13c)][_0x706a1f(0x138)],this['options'][_0x706a1f(0x134)],_0x4b15de[_0x706a1f(0x132)],this[_0x706a1f(0x13c)][_0x706a1f(0x13b)],[]);_0x46bcca['push'](...await _0x424ff0['insert'](_0x4b15de['inserted'])),_0x46bcca[_0x706a1f(0x161)](...await _0x424ff0[_0x706a1f(0x170)](_0x4b15de['modified'])),_0x3573e2[_0x706a1f(0x161)](await _0x424ff0[_0x706a1f(0x172)](_0x4b15de[_0x706a1f(0x135)]));}this[_0x706a1f(0x156)]['log'](_0x706a1f(0x171),_0x46bcca[_0x706a1f(0x168)]),await this[_0x706a1f(0x154)](_0x46bcca);const _0x2e1c7e=_0x3573e2[_0x706a1f(0x131)]((_0x228145,_0x378d81)=>({'manifests':[..._0x228145['manifests'],..._0x378d81[_0x706a1f(0x16d)]],'componentsToDelete':[..._0x228145[_0x706a1f(0x14a)],..._0x378d81[_0x706a1f(0x14a)]],'componentsToUpdate':[..._0x228145[_0x706a1f(0x13a)],..._0x378d81[_0x706a1f(0x13a)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x2e1c7e[_0x706a1f(0x16d)]['length']&&await this['proceedRequests'](_0x2e1c7e[_0x706a1f(0x16d)],!![]),_0x2e1c7e[_0x706a1f(0x13a)][_0x706a1f(0x168)]&&await this[_0x706a1f(0x154)](_0x2e1c7e[_0x706a1f(0x13a)],!![]),_0x2e1c7e['componentsToDelete'][_0x706a1f(0x168)]&&await this[_0x706a1f(0x154)](_0x2e1c7e[_0x706a1f(0x14a)],!![]);}async['proceedCommits'](_0x598ed4){const _0xbe307e=a127_0x174f44;this[_0xbe307e(0x13c)][_0xbe307e(0x134)]?await this[_0xbe307e(0x141)](_0x598ed4):await this[_0xbe307e(0x13d)](_0x598ed4);}}exports[a127_0x174f44(0x149)]=SalesforceCommitsManager;