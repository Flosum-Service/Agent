const a127_0x1b6702=a127_0x2348;(function(_0x11a7a1,_0xfe78a9){const _0x4792be=a127_0x2348,_0x4e6830=_0x11a7a1();while(!![]){try{const _0x3344a8=-parseInt(_0x4792be(0x18f))/0x1+-parseInt(_0x4792be(0x1b9))/0x2*(parseInt(_0x4792be(0x1a2))/0x3)+-parseInt(_0x4792be(0x1a6))/0x4+-parseInt(_0x4792be(0x1aa))/0x5*(-parseInt(_0x4792be(0x1c4))/0x6)+-parseInt(_0x4792be(0x192))/0x7*(-parseInt(_0x4792be(0x1bb))/0x8)+-parseInt(_0x4792be(0x1cd))/0x9*(parseInt(_0x4792be(0x1d2))/0xa)+-parseInt(_0x4792be(0x1c2))/0xb*(-parseInt(_0x4792be(0x1ca))/0xc);if(_0x3344a8===_0xfe78a9)break;else _0x4e6830['push'](_0x4e6830['shift']());}catch(_0x49faf3){_0x4e6830['push'](_0x4e6830['shift']());}}}(a127_0x18e4,0xdd7b5));const a127_0x13b082=(function(){let _0x476526=!![];return function(_0x1a00c2,_0x1594f9){const _0x13f10e=_0x476526?function(){if(_0x1594f9){const _0xb0261d=_0x1594f9['apply'](_0x1a00c2,arguments);return _0x1594f9=null,_0xb0261d;}}:function(){};return _0x476526=![],_0x13f10e;};}()),a127_0x4ffc44=a127_0x13b082(this,function(){const _0x237396=a127_0x2348;return a127_0x4ffc44['toString']()[_0x237396(0x1ac)](_0x237396(0x1d1))['toString']()[_0x237396(0x19a)](a127_0x4ffc44)[_0x237396(0x1ac)](_0x237396(0x1d1));});a127_0x4ffc44();'use strict';function a127_0x2348(_0x5d5013,_0x17a46b){const _0x8ef77c=a127_0x18e4();return a127_0x2348=function(_0x4ffc44,_0x13b082){_0x4ffc44=_0x4ffc44-0x18c;let _0x18e4d0=_0x8ef77c[_0x4ffc44];return _0x18e4d0;},a127_0x2348(_0x5d5013,_0x17a46b);}var __importDefault=this&&this[a127_0x1b6702(0x1c5)]||function(_0x23e9cf){const _0x1fd834=a127_0x1b6702;return _0x23e9cf&&_0x23e9cf[_0x1fd834(0x1cf)]?_0x23e9cf:{'default':_0x23e9cf};};Object[a127_0x1b6702(0x1ba)](exports,a127_0x1b6702(0x1cf),{'value':!![]}),exports[a127_0x1b6702(0x1b2)]=void 0x0;const core_1=require(a127_0x1b6702(0x1a7)),typedi_1=__importDefault(require('typedi')),constants_1=require(a127_0x1b6702(0x1d0)),utils_1=require('../../shared/utils'),salesforce_error_1=require(a127_0x1b6702(0x1ab)),composite_utils_1=require(a127_0x1b6702(0x19b)),salesforce_components_manager_service_1=require(a127_0x1b6702(0x190)),salesforce_composite_service_1=require(a127_0x1b6702(0x1b5)),salesforce_git_sync_service_1=require('./salesforce-git-sync.service');class SalesforceCommitsManager{constructor(_0x1c5cdc){const _0x915eb3=a127_0x1b6702;this[_0x915eb3(0x1c3)]=_0x1c5cdc,this[_0x915eb3(0x1a1)]=0x3,this[_0x915eb3(0x193)]=new core_1[(_0x915eb3(0x1cc))](SalesforceCommitsManager[_0x915eb3(0x198)]),this[_0x915eb3(0x1d4)]=this['options'][_0x915eb3(0x193)],this['composite']=typedi_1[_0x915eb3(0x1b0)]['get'](salesforce_composite_service_1['SalesforceCompositeService']),this['gitSync']=typedi_1['default'][_0x915eb3(0x199)](salesforce_git_sync_service_1[_0x915eb3(0x1b8)]),this[_0x915eb3(0x1d7)]=[];}async[a127_0x1b6702(0x1d3)](_0x4b46df,_0x2abb32=![]){const _0x24392c=a127_0x1b6702,_0x887686=(this['COMPONENTS_PER_CHUNK']+ +_0x2abb32)*0x3,_0x2597d4=utils_1[_0x24392c(0x1c9)](_0x4b46df,_0x887686);try{while(_0x2597d4[_0x24392c(0x19c)]){const _0x491fd4=_0x2597d4[_0x24392c(0x194)](0x0,Math['floor'](constants_1[_0x24392c(0x1c6)]/_0x887686));await this[_0x24392c(0x1d4)]['log'](_0x24392c(0x1ce)+_0x491fd4['length']*_0x887686+'\x20requests\x20to\x20composite\x20api.')[_0x24392c(0x1d5)]();const _0x39814a=_0x491fd4[_0x24392c(0x1bd)]((_0x538bf4,_0x25118d)=>({'graphId':_0x24392c(0x195)+_0x25118d,'compositeRequest':_0x538bf4})),_0x24cb5a=await this[_0x24392c(0x1cb)][_0x24392c(0x19d)](_0x39814a);if(_0x2abb32){const _0x578792=composite_utils_1[_0x24392c(0x18e)](_0x24cb5a);for(const {id:_0x1ce0d2,ref:_0x15faa4}of _0x578792){const _0x422fc2=this['proceededComponentsMeta'][_0x24392c(0x1c1)](_0x1f6cc6=>_0x1f6cc6['reference']===_0x15faa4);_0x422fc2&&(_0x422fc2[_0x24392c(0x1b1)]=_0x1ce0d2);}}}}catch(_0xf4273e){this[_0x24392c(0x193)][_0x24392c(0x191)](_0xf4273e instanceof salesforce_error_1[_0x24392c(0x1a4)]?JSON[_0x24392c(0x1a5)](_0xf4273e[_0x24392c(0x1c7)](),null,0x2):_0xf4273e),this[_0x24392c(0x1d4)][_0x24392c(0x19f)](_0xf4273e instanceof salesforce_error_1['SalesforceError']?JSON['stringify'](_0xf4273e[_0x24392c(0x1c7)](),null,0x2):_0xf4273e[_0x24392c(0x1b7)]());throw _0xf4273e;}}async[a127_0x1b6702(0x1ae)](_0x3871cd){const _0x32edd0=a127_0x1b6702;for(const _0x46dfd5 of _0x3871cd){if(!_0x46dfd5[_0x32edd0(0x1a3)][_0x32edd0(0x19c)]&&!_0x46dfd5[_0x32edd0(0x1c0)][_0x32edd0(0x19c)]&&!_0x46dfd5[_0x32edd0(0x1b4)][_0x32edd0(0x19c)])continue;const _0x58f779=[],_0x47de76=[],_0x35dfe4=new salesforce_components_manager_service_1[(_0x32edd0(0x1a0))](this[_0x32edd0(0x1c3)][_0x32edd0(0x197)],this[_0x32edd0(0x1c3)][_0x32edd0(0x18c)],_0x46dfd5['author'],this[_0x32edd0(0x1c3)][_0x32edd0(0x1c8)],this[_0x32edd0(0x1d7)]);_0x58f779[_0x32edd0(0x1ad)](...await _0x35dfe4[_0x32edd0(0x1d6)](_0x46dfd5[_0x32edd0(0x1a3)],this['options'][_0x32edd0(0x1a8)])),_0x58f779['push'](...await _0x35dfe4[_0x32edd0(0x1bf)](_0x46dfd5[_0x32edd0(0x1c0)],this[_0x32edd0(0x1c3)][_0x32edd0(0x1a8)])),_0x47de76[_0x32edd0(0x1ad)](await _0x35dfe4[_0x32edd0(0x1be)](_0x46dfd5['removed'],!![])),this[_0x32edd0(0x1d7)]=_0x35dfe4['getProceededComponentsMeta'](),await this[_0x32edd0(0x1d3)](_0x58f779,!![]);for(const _0x1051ee of _0x47de76){_0x1051ee['manifests'][_0x32edd0(0x19c)]&&await this[_0x32edd0(0x1d3)](_0x1051ee['manifests'],!![]),_0x1051ee['componentsToUpdate'][_0x32edd0(0x19c)]&&await this[_0x32edd0(0x1d3)](_0x1051ee[_0x32edd0(0x1af)],!![]),_0x1051ee[_0x32edd0(0x1b6)][_0x32edd0(0x19c)]&&await this[_0x32edd0(0x1d3)](_0x1051ee[_0x32edd0(0x1b6)],!![]);}this[_0x32edd0(0x193)][_0x32edd0(0x19f)](_0x32edd0(0x19e),_0x58f779[_0x32edd0(0x19c)]);}}async[a127_0x1b6702(0x18d)](_0x525ef9){const _0x5053bf=a127_0x1b6702,_0x1d2596=[],_0x19c9ec=[];for(const _0x1e497f of _0x525ef9){if(!_0x1e497f['inserted']['length']&&!_0x1e497f['modified'][_0x5053bf(0x19c)]&&!_0x1e497f[_0x5053bf(0x1b4)]['length'])continue;const _0x1b7d3e=new salesforce_components_manager_service_1[(_0x5053bf(0x1a0))](this[_0x5053bf(0x1c3)]['repositoryId'],this['options'][_0x5053bf(0x18c)],_0x1e497f['author'],this['options'][_0x5053bf(0x1c8)],[]);_0x1d2596[_0x5053bf(0x1ad)](...await _0x1b7d3e[_0x5053bf(0x1d6)](_0x1e497f[_0x5053bf(0x1a3)])),_0x1d2596[_0x5053bf(0x1ad)](...await _0x1b7d3e['update'](_0x1e497f[_0x5053bf(0x1c0)])),_0x19c9ec[_0x5053bf(0x1ad)](await _0x1b7d3e[_0x5053bf(0x1be)](_0x1e497f[_0x5053bf(0x1b4)]));}this[_0x5053bf(0x193)][_0x5053bf(0x19f)](_0x5053bf(0x1b3),_0x1d2596[_0x5053bf(0x19c)]),await this[_0x5053bf(0x1d3)](_0x1d2596);const _0x7dff74=_0x19c9ec[_0x5053bf(0x1bc)]((_0x37487a,_0x4b9e71)=>({'manifests':[..._0x37487a['manifests'],..._0x4b9e71[_0x5053bf(0x196)]],'componentsToDelete':[..._0x37487a[_0x5053bf(0x1b6)],..._0x4b9e71['componentsToDelete']],'componentsToUpdate':[..._0x37487a[_0x5053bf(0x1af)],..._0x4b9e71[_0x5053bf(0x1af)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x7dff74[_0x5053bf(0x196)]['length']&&await this[_0x5053bf(0x1d3)](_0x7dff74['manifests'],!![]),_0x7dff74[_0x5053bf(0x1af)][_0x5053bf(0x19c)]&&await this[_0x5053bf(0x1d3)](_0x7dff74[_0x5053bf(0x1af)],!![]),_0x7dff74[_0x5053bf(0x1b6)]['length']&&await this[_0x5053bf(0x1d3)](_0x7dff74[_0x5053bf(0x1b6)],!![]);}async[a127_0x1b6702(0x1a9)](_0x509e8d){const _0x21b5df=a127_0x1b6702;this[_0x21b5df(0x1c3)][_0x21b5df(0x18c)]?await this[_0x21b5df(0x18d)](_0x509e8d):await this[_0x21b5df(0x1ae)](_0x509e8d);}}exports['SalesforceCommitsManager']=SalesforceCommitsManager;function a127_0x18e4(){const _0x4ffb16=['stringify','2430216ODLtJP','../../../core','commitId','proceedCommits','35ardgvK','../errors/salesforce.error','search','push','proceedCommitsToRepository','componentsToUpdate','default','componentId','SalesforceCommitsManager','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','removed','./salesforce-composite.service','componentsToDelete','toString','SalesforceGitSyncService','2sgBrfs','defineProperty','11578664CTDhLa','reduce','map','delete','update','modified','find','11GBimNy','options','1532214POyxov','__importDefault','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','toJSON','recordTypes','chunkArray','21266988QIgbdI','composite','Logger','14614191QezGqh','[INFO]\x20Sending\x20','__esModule','../../../constants','(((.+)+)+)+$','10cNHBjO','proceedRequests','sfLogger','send','insert','proceededComponentsMeta','branchId','proceedCommitsToBranch','extractComponentIdsFromGraphsResponse','274796jxbSwx','./salesforce-components-manager.service','error','7vKsnPB','logger','splice','graph','manifests','repositoryId','name','get','constructor','../utils/composite.utils','length','executeGraphs','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','log','SalesforceComponentsManager','COMPONENTS_PER_CHUNK','4781481kilAdg','inserted','SalesforceError'];a127_0x18e4=function(){return _0x4ffb16;};return a127_0x18e4();}