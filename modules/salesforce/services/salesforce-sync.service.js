const a136_0x3d7dad=a136_0x28b6;(function(_0x19cfb4,_0x23a43e){const _0x133dda=a136_0x28b6,_0x5872b9=_0x19cfb4();while(!![]){try{const _0x2bc638=-parseInt(_0x133dda(0x191))/0x1*(-parseInt(_0x133dda(0x1aa))/0x2)+-parseInt(_0x133dda(0x19f))/0x3+-parseInt(_0x133dda(0x189))/0x4+-parseInt(_0x133dda(0x1a7))/0x5+parseInt(_0x133dda(0x197))/0x6*(-parseInt(_0x133dda(0x1a1))/0x7)+parseInt(_0x133dda(0x1c3))/0x8+-parseInt(_0x133dda(0x1a3))/0x9*(-parseInt(_0x133dda(0x177))/0xa);if(_0x2bc638===_0x23a43e)break;else _0x5872b9['push'](_0x5872b9['shift']());}catch(_0x89030f){_0x5872b9['push'](_0x5872b9['shift']());}}}(a136_0x27f8,0xb0924));const a136_0x193ef5=(function(){let _0x495403=!![];return function(_0x513430,_0x9065d){const _0x165054=_0x495403?function(){if(_0x9065d){const _0x38f52b=_0x9065d['apply'](_0x513430,arguments);return _0x9065d=null,_0x38f52b;}}:function(){};return _0x495403=![],_0x165054;};}()),a136_0xc901f7=a136_0x193ef5(this,function(){const _0x3edab2=a136_0x28b6;return a136_0xc901f7[_0x3edab2(0x1b7)]()[_0x3edab2(0x1bb)](_0x3edab2(0x18b))[_0x3edab2(0x1b7)]()[_0x3edab2(0x17e)](a136_0xc901f7)[_0x3edab2(0x1bb)](_0x3edab2(0x18b));});a136_0xc901f7();'use strict';var __decorate=this&&this['__decorate']||function(_0x168638,_0xee2add,_0xd4d627,_0x5c2f97){const _0x4b907e=a136_0x28b6;var _0x2646b8=arguments[_0x4b907e(0x183)],_0x15ab3e=_0x2646b8<0x3?_0xee2add:_0x5c2f97===null?_0x5c2f97=Object[_0x4b907e(0x1c0)](_0xee2add,_0xd4d627):_0x5c2f97,_0xd86d93;if(typeof Reflect===_0x4b907e(0x1b5)&&typeof Reflect['decorate']===_0x4b907e(0x1af))_0x15ab3e=Reflect[_0x4b907e(0x1c2)](_0x168638,_0xee2add,_0xd4d627,_0x5c2f97);else{for(var _0x285efe=_0x168638[_0x4b907e(0x183)]-0x1;_0x285efe>=0x0;_0x285efe--)if(_0xd86d93=_0x168638[_0x285efe])_0x15ab3e=(_0x2646b8<0x3?_0xd86d93(_0x15ab3e):_0x2646b8>0x3?_0xd86d93(_0xee2add,_0xd4d627,_0x15ab3e):_0xd86d93(_0xee2add,_0xd4d627))||_0x15ab3e;}return _0x2646b8>0x3&&_0x15ab3e&&Object[_0x4b907e(0x1c7)](_0xee2add,_0xd4d627,_0x15ab3e),_0x15ab3e;},__metadata=this&&this[a136_0x3d7dad(0x196)]||function(_0x400cda,_0x17a5fe){const _0x1075d4=a136_0x3d7dad;if(typeof Reflect===_0x1075d4(0x1b5)&&typeof Reflect[_0x1075d4(0x1ab)]==='function')return Reflect[_0x1075d4(0x1ab)](_0x400cda,_0x17a5fe);};function a136_0x28b6(_0x2e55ff,_0x5ae738){const _0x5d3ced=a136_0x27f8();return a136_0x28b6=function(_0xc901f7,_0x193ef5){_0xc901f7=_0xc901f7-0x176;let _0x27f88a=_0x5d3ced[_0xc901f7];return _0x27f88a;},a136_0x28b6(_0x2e55ff,_0x5ae738);}Object[a136_0x3d7dad(0x1c7)](exports,a136_0x3d7dad(0x1b9),{'value':!![]}),exports[a136_0x3d7dad(0x19d)]=void 0x0;const typedi_1=require(a136_0x3d7dad(0x1c1)),constants_1=require('../../../constants'),errors_1=require(a136_0x3d7dad(0x1c6)),utils_1=require('../../shared/utils'),flosum_repository_sync_dto_1=require(a136_0x3d7dad(0x18a)),not_found_error_1=require(a136_0x3d7dad(0x1b4)),queries_1=require(a136_0x3d7dad(0x1c8)),salesforce_query_service_1=require(a136_0x3d7dad(0x17b)),salesforce_service_1=require(a136_0x3d7dad(0x194));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x5b8b04,_0x19919f){const _0xfa9484=a136_0x3d7dad;this[_0xfa9484(0x193)]=_0x5b8b04,this[_0xfa9484(0x1b3)]=_0x19919f;}async['getComponents'](_0x4feeb1){const _0x461643=a136_0x3d7dad;var _0x33da89;const _0x2f7bf2=await this['salesforceQuery'][_0x461643(0x195)](_0x4feeb1),_0x197c14=[];for(const _0x5c266b of _0x2f7bf2){const _0x31643a=(_0x33da89=_0x5c266b[constants_1[_0x461643(0x188)]+'Components__r'])===null||_0x33da89===void 0x0?void 0x0:_0x33da89[_0x461643(0x18d)];_0x31643a&&_0x31643a['length']&&_0x197c14[_0x461643(0x1cc)](_0x31643a[0x0]['Id']);}return _0x197c14;}async[a136_0x3d7dad(0x1ca)](){const _0x4f84c9=a136_0x3d7dad,_0x2f2a98=await this[_0x4f84c9(0x193)][_0x4f84c9(0x195)](queries_1[_0x4f84c9(0x1be)]);return _0x2f2a98[_0x4f84c9(0x1b1)](_0xd77eca=>flosum_repository_sync_dto_1[_0x4f84c9(0x1a9)][_0x4f84c9(0x1c9)](_0xd77eca));}async[a136_0x3d7dad(0x17f)](){const _0x168365=a136_0x3d7dad,_0x193dd4=await this['salesforceQuery']['query'](queries_1[_0x168365(0x19e)]);return _0x193dd4[_0x168365(0x1b1)](_0x2072f6=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x168365(0x181)](_0x2072f6));}async[a136_0x3d7dad(0x1bf)](_0x4dc4e4){const _0x5dd7e0=a136_0x3d7dad,_0x4896fe=await this[_0x5dd7e0(0x193)]['query'](queries_1['GET_REPOSITORY_QUERY'][_0x5dd7e0(0x17d)](_0x5dd7e0(0x1bc),_0x4dc4e4));if(_0x4896fe['length']===0x0)throw new not_found_error_1[(_0x5dd7e0(0x187))](_0x5dd7e0(0x1a6)+_0x4dc4e4+_0x5dd7e0(0x1c4));return flosum_repository_sync_dto_1[_0x5dd7e0(0x1a9)]['fromRepositoryRecord'](_0x4896fe[0x0]);}async[a136_0x3d7dad(0x184)](_0x521151){const _0x403c3f=a136_0x3d7dad,_0x2c489a=await this[_0x403c3f(0x193)][_0x403c3f(0x195)](queries_1['GET_BRANCH_QUERY'][_0x403c3f(0x17d)]('%id%',_0x521151));if(_0x2c489a[_0x403c3f(0x183)]===0x0)throw new not_found_error_1[(_0x403c3f(0x187))](_0x403c3f(0x185)+_0x521151+'\x20not\x20found\x20on\x20salesforce');return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x403c3f(0x181)](_0x2c489a[0x0]);}async[a136_0x3d7dad(0x1a5)](_0x1ca77f){const _0x2465d1=a136_0x3d7dad,_0x524ff7=await this[_0x2465d1(0x193)][_0x2465d1(0x195)](queries_1['GET_BRANCH_BY_NAME_QUERY']['replace'](_0x2465d1(0x192),_0x1ca77f));if(_0x524ff7[_0x2465d1(0x183)]===0x0)throw new not_found_error_1['SalesforceNotFoundError'](_0x2465d1(0x176)+_0x1ca77f+'\x20not\x20found\x20on\x20salesforce');return flosum_repository_sync_dto_1[_0x2465d1(0x1a9)]['fromBranchRecord'](_0x524ff7[0x0]);}async['getRepositoryRecordByName'](_0xa7a285){const _0x3625ac=a136_0x3d7dad,_0x2b138c=await this[_0x3625ac(0x193)][_0x3625ac(0x195)](queries_1['GET_REPOSITORY_BY_NAME_QUERY']['replace'](_0x3625ac(0x192),_0xa7a285));if(_0x2b138c[_0x3625ac(0x183)]===0x0)throw new not_found_error_1[(_0x3625ac(0x187))]('Repository\x20'+_0xa7a285+_0x3625ac(0x1c4));return flosum_repository_sync_dto_1[_0x3625ac(0x1a9)][_0x3625ac(0x1c9)](_0x2b138c[0x0]);}async[a136_0x3d7dad(0x17c)](_0x4e809b){const _0x3f7df8=a136_0x3d7dad,_0x5c56e7=_0x3f7df8(0x1ad)+queries_1[_0x3f7df8(0x180)]+'\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27'+_0x4e809b+'\x27';return this['getComponents'](_0x5c56e7);}async[a136_0x3d7dad(0x1ac)](_0x53b53a){const _0x43c9d1=a136_0x3d7dad,_0x26140f=_0x43c9d1(0x186)+queries_1['GET_COMPONENTS_QUERY']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27'+_0x53b53a+'\x27';return this[_0x43c9d1(0x19c)](_0x26140f);}async[a136_0x3d7dad(0x18f)](_0x1b405a){const _0x40a236=a136_0x3d7dad;var _0x50dd11;const _0x234283=queries_1[_0x40a236(0x18c)][_0x40a236(0x17d)]('%parentId%',_0x1b405a[_0x40a236(0x179)])[_0x40a236(0x17d)](_0x40a236(0x192),_0x1b405a[_0x40a236(0x1cb)]?constants_1[_0x40a236(0x182)]:constants_1[_0x40a236(0x1a0)]),_0x5415be=await this[_0x40a236(0x193)][_0x40a236(0x195)](_0x234283),_0x4a86ea=(_0x50dd11=_0x5415be[0x0])===null||_0x50dd11===void 0x0?void 0x0:_0x50dd11['Id'];if(!_0x4a86ea)throw new Error(errors_1[_0x40a236(0x1b6)]);return _0x4a86ea;}async[a136_0x3d7dad(0x1c5)](_0x5bc61a){const _0x3ef0bd=a136_0x3d7dad;let _0x486a1e=await this[_0x3ef0bd(0x18f)](_0x5bc61a)[_0x3ef0bd(0x1a2)](()=>null);return!_0x486a1e&&(_0x486a1e=await this[_0x3ef0bd(0x1b3)][_0x3ef0bd(0x1bd)](_0x3ef0bd(0x198),{'Body':utils_1[_0x3ef0bd(0x1a4)]('{}'),'ParentId':_0x5bc61a[_0x3ef0bd(0x179)],'ContentType':_0x3ef0bd(0x1b8),'Name':_0x5bc61a['repositoryId']?constants_1[_0x3ef0bd(0x182)]:constants_1[_0x3ef0bd(0x1a0)]})),_0x486a1e;}async[a136_0x3d7dad(0x1a8)](_0x3572a7,_0x35cb8a){const _0x39027f=a136_0x3d7dad,_0x46e9fd=await this[_0x39027f(0x1c5)](_0x3572a7);await this[_0x39027f(0x1b3)][_0x39027f(0x19b)](_0x39027f(0x198),_0x46e9fd,{'Body':utils_1[_0x39027f(0x1a4)](JSON[_0x39027f(0x18e)](_0x35cb8a))});}async[a136_0x3d7dad(0x17a)](_0x4a5e19,_0x2aec71){const _0x4c6efc=a136_0x3d7dad;await this[_0x4c6efc(0x1b3)][_0x4c6efc(0x19b)](_0x4a5e19[_0x4c6efc(0x1ae)],_0x4a5e19[_0x4c6efc(0x179)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x4c6efc(0x19a)]:_0x2aec71});}async[a136_0x3d7dad(0x190)](_0x4a5af2){const _0x2c1d5e=a136_0x3d7dad;await this[_0x2c1d5e(0x1b3)][_0x2c1d5e(0x19b)](constants_1['FLOSUM_GIT_NAMESPACE']+_0x2c1d5e(0x1b0),_0x4a5af2,{[constants_1[_0x2c1d5e(0x178)]+_0x2c1d5e(0x1ba)]:![]});}};SalesforceSyncService=__decorate([typedi_1[a136_0x3d7dad(0x1b2)](),__metadata(a136_0x3d7dad(0x199),[salesforce_query_service_1['SalesforceQueryService'],salesforce_service_1['SalesforceService']])],SalesforceSyncService),exports[a136_0x3d7dad(0x19d)]=SalesforceSyncService;function a136_0x27f8(){const _0xaa72cd=['disableSync','3khXuvf','%name%','salesforceQuery','./salesforce.service','query','__metadata','7494DeUIQz','Attachment','design:paramtypes','Synchronization_Status__c','patchObject','getComponents','SalesforceSyncService','GET_WAITING_BRANCHES_QUERY','3953646oApzjE','SYNC_ATTACHMENT_FOR_BRANCH_NAME','3423blsBkh','catch','24042123BQAIZi','encodeBase64','getBranchRecordByName','Repository\x20with\x20Id\x20','4855710ymdPFv','updateRemoteState','FlosumRepositorySyncDto','889006dmwTmx','metadata','getBranchComponents','\x0a\x20\x20\x20\x20\x20\x20','objectType','function','Git_Settings__c','map','Service','salesforceService','../errors/not-found.error','object','ERR_INVALID_ATTACHMENT_ID','toString','text/plain','__esModule','Sync_In_Progress__c','search','%id%','createObject','GET_WAITING_REPOSITORIES_QUERY','getRepositoryRecord','getOwnPropertyDescriptor','typedi','decorate','2968424QeVhgj','\x20not\x20found\x20on\x20salesforce','getRemoteStateAttachmentId','../../../constants/errors','defineProperty','../queries','fromRepositoryRecord','getRepositoryRecords','repositoryId','push','Branch\x20','10tBzdFt','FLOSUM_GIT_NAMESPACE','objectId','setStatus','./salesforce-query.service','getComponentsFromRepository','replace','constructor','getBranchRecords','GET_COMPONENTS_QUERY','fromBranchRecord','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','length','getBranchRecord','Branch\x20with\x20Id\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','SalesforceNotFoundError','FLOSUM_NAMESPACE','3011552ZdNoRz','../dto/flosum-repository-sync.dto','(((.+)+)+)+$','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','records','stringify','getAttachmentId'];a136_0x27f8=function(){return _0xaa72cd;};return a136_0x27f8();}