function a135_0x16b8(_0x1e2d8e,_0x234eec){const _0x4d9ad8=a135_0x3ac1();return a135_0x16b8=function(_0x5dc51a,_0x113066){_0x5dc51a=_0x5dc51a-0xda;let _0x3ac172=_0x4d9ad8[_0x5dc51a];return _0x3ac172;},a135_0x16b8(_0x1e2d8e,_0x234eec);}const a135_0x6a4691=a135_0x16b8;(function(_0x32b0a5,_0x3d8fc0){const _0x279938=a135_0x16b8,_0x31aea4=_0x32b0a5();while(!![]){try{const _0x154da5=-parseInt(_0x279938(0x104))/0x1*(parseInt(_0x279938(0xdf))/0x2)+-parseInt(_0x279938(0x12f))/0x3*(-parseInt(_0x279938(0x100))/0x4)+parseInt(_0x279938(0x131))/0x5+parseInt(_0x279938(0xff))/0x6*(-parseInt(_0x279938(0x11a))/0x7)+parseInt(_0x279938(0x105))/0x8*(parseInt(_0x279938(0xf3))/0x9)+parseInt(_0x279938(0xed))/0xa*(-parseInt(_0x279938(0x10f))/0xb)+parseInt(_0x279938(0xf9))/0xc;if(_0x154da5===_0x3d8fc0)break;else _0x31aea4['push'](_0x31aea4['shift']());}catch(_0x4959ae){_0x31aea4['push'](_0x31aea4['shift']());}}}(a135_0x3ac1,0xce559));const a135_0x113066=(function(){let _0x35bc98=!![];return function(_0x1731be,_0x46abb9){const _0xade15d=_0x35bc98?function(){const _0x4a0874=a135_0x16b8;if(_0x46abb9){const _0x5d5ddb=_0x46abb9[_0x4a0874(0x122)](_0x1731be,arguments);return _0x46abb9=null,_0x5d5ddb;}}:function(){};return _0x35bc98=![],_0xade15d;};}()),a135_0x5dc51a=a135_0x113066(this,function(){const _0xfcc1f2=a135_0x16b8;return a135_0x5dc51a[_0xfcc1f2(0x102)]()[_0xfcc1f2(0x116)]('(((.+)+)+)+$')[_0xfcc1f2(0x102)]()[_0xfcc1f2(0xfe)](a135_0x5dc51a)[_0xfcc1f2(0x116)]('(((.+)+)+)+$');});a135_0x5dc51a();'use strict';var __decorate=this&&this[a135_0x6a4691(0xef)]||function(_0x161c27,_0x14effd,_0xd73f62,_0x317c4f){const _0x58d155=a135_0x6a4691;var _0x571282=arguments['length'],_0xd1d645=_0x571282<0x3?_0x14effd:_0x317c4f===null?_0x317c4f=Object[_0x58d155(0xec)](_0x14effd,_0xd73f62):_0x317c4f,_0x936737;if(typeof Reflect==='object'&&typeof Reflect[_0x58d155(0xf1)]===_0x58d155(0x109))_0xd1d645=Reflect[_0x58d155(0xf1)](_0x161c27,_0x14effd,_0xd73f62,_0x317c4f);else{for(var _0x502264=_0x161c27[_0x58d155(0x10b)]-0x1;_0x502264>=0x0;_0x502264--)if(_0x936737=_0x161c27[_0x502264])_0xd1d645=(_0x571282<0x3?_0x936737(_0xd1d645):_0x571282>0x3?_0x936737(_0x14effd,_0xd73f62,_0xd1d645):_0x936737(_0x14effd,_0xd73f62))||_0xd1d645;}return _0x571282>0x3&&_0xd1d645&&Object[_0x58d155(0x11f)](_0x14effd,_0xd73f62,_0xd1d645),_0xd1d645;},__metadata=this&&this['__metadata']||function(_0x355e3d,_0x5c4617){const _0x272305=a135_0x6a4691;if(typeof Reflect===_0x272305(0xfd)&&typeof Reflect[_0x272305(0x132)]==='function')return Reflect[_0x272305(0x132)](_0x355e3d,_0x5c4617);};function a135_0x3ac1(){const _0x30ba3f=['GET_BRANCH_BY_NAME_QUERY','SalesforceSyncService','getBranchRecordByName','stringify','2249076HyKLSO','../dto/flosum-repository-sync.dto','2390335fnvnPj','metadata','FLOSUM_GIT_NAMESPACE','Branch\x20','../queries','GET_WAITING_REPOSITORIES_QUERY','objectId','127228WGXDtF','fromRepositoryRecord','repositoryId','updateRemoteState','getComponentsFromRepository','Git_Settings__c','FlosumRepositorySyncDto','../../../constants','getRepositoryRecords','getBranchComponents','SalesforceNotFoundError','Service','fromBranchRecord','getOwnPropertyDescriptor','14384840zhWCMM','Repository\x20','__decorate','getRepositoryRecord','decorate','replace','36ylUfOw','SYNC_ATTACHMENT_FOR_BRANCH_NAME','../../shared/utils','SalesforceService','GET_REPOSITORY_QUERY','%name%','19714152pydDAd','../../../constants/errors','push','Sync_In_Progress__c','object','constructor','1752306hrdkwc','8qMqxul','query','toString','Branch\x20with\x20Id\x20','14qvkQlA','1444264GpExuj','GET_REPOSITORY_BY_NAME_QUERY','encodeBase64','SalesforceQueryService','function','\x20not\x20found\x20on\x20salesforce','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','text/plain','setStatus','11FItTOY','\x0a\x20\x20\x20\x20\x20\x20','getRemoteStateAttachmentId','catch','Synchronization_Status__c','typedi','map','search','getBranchRecord','getBranchRecords','./salesforce-query.service','28aRcoSB','../errors/not-found.error','%parentId%','Attachment','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','defineProperty','Components__r','patchObject','apply','salesforceService','objectType','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','salesforceQuery','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','GET_BRANCH_QUERY','getComponents','GET_COMPONENTS_QUERY'];a135_0x3ac1=function(){return _0x30ba3f;};return a135_0x3ac1();}Object[a135_0x6a4691(0x11f)](exports,'__esModule',{'value':!![]}),exports[a135_0x6a4691(0x12c)]=void 0x0;const typedi_1=require(a135_0x6a4691(0x114)),constants_1=require(a135_0x6a4691(0xe6)),errors_1=require(a135_0x6a4691(0xfa)),utils_1=require(a135_0x6a4691(0xf5)),flosum_repository_sync_dto_1=require(a135_0x6a4691(0x130)),not_found_error_1=require(a135_0x6a4691(0x11b)),queries_1=require(a135_0x6a4691(0xdc)),salesforce_query_service_1=require(a135_0x6a4691(0x119)),salesforce_service_1=require('./salesforce.service');let SalesforceSyncService=class SalesforceSyncService{constructor(_0x21d8d7,_0xfc5066){const _0x2f7787=a135_0x6a4691;this['salesforceQuery']=_0x21d8d7,this[_0x2f7787(0x123)]=_0xfc5066;}async['getComponents'](_0x3a1c12){const _0x4e9e12=a135_0x6a4691;var _0x201477;const _0x546e62=await this[_0x4e9e12(0x126)]['query'](_0x3a1c12),_0x5af7a8=[];for(const _0x5e403f of _0x546e62){const _0x511d3b=(_0x201477=_0x5e403f[constants_1['FLOSUM_NAMESPACE']+_0x4e9e12(0x120)])===null||_0x201477===void 0x0?void 0x0:_0x201477['records'];_0x511d3b&&_0x511d3b['length']&&_0x5af7a8[_0x4e9e12(0xfb)](_0x511d3b[0x0]['Id']);}return _0x5af7a8;}async[a135_0x6a4691(0xe7)](){const _0x451d22=a135_0x6a4691,_0x267a8b=await this['salesforceQuery'][_0x451d22(0x101)](queries_1[_0x451d22(0xdd)]);return _0x267a8b[_0x451d22(0x115)](_0x4467c7=>flosum_repository_sync_dto_1[_0x451d22(0xe5)][_0x451d22(0xe0)](_0x4467c7));}async[a135_0x6a4691(0x118)](){const _0x3fbaf2=a135_0x6a4691,_0x44acfd=await this[_0x3fbaf2(0x126)]['query'](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x44acfd[_0x3fbaf2(0x115)](_0x53705b=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x3fbaf2(0xeb)](_0x53705b));}async[a135_0x6a4691(0xf0)](_0xd1c3b5){const _0x3a6e32=a135_0x6a4691,_0x442628=await this['salesforceQuery']['query'](queries_1[_0x3a6e32(0xf7)][_0x3a6e32(0xf2)]('%id%',_0xd1c3b5));if(_0x442628['length']===0x0)throw new not_found_error_1[(_0x3a6e32(0xe9))]('Repository\x20with\x20Id\x20'+_0xd1c3b5+_0x3a6e32(0x10a));return flosum_repository_sync_dto_1[_0x3a6e32(0xe5)][_0x3a6e32(0xe0)](_0x442628[0x0]);}async[a135_0x6a4691(0x117)](_0x25901a){const _0x337384=a135_0x6a4691,_0x52694a=await this[_0x337384(0x126)][_0x337384(0x101)](queries_1[_0x337384(0x128)]['replace']('%id%',_0x25901a));if(_0x52694a['length']===0x0)throw new not_found_error_1[(_0x337384(0xe9))](_0x337384(0x103)+_0x25901a+_0x337384(0x10a));return flosum_repository_sync_dto_1[_0x337384(0xe5)][_0x337384(0xeb)](_0x52694a[0x0]);}async[a135_0x6a4691(0x12d)](_0x3cd02b){const _0x384e7a=a135_0x6a4691,_0x3ee238=await this[_0x384e7a(0x126)][_0x384e7a(0x101)](queries_1[_0x384e7a(0x12b)][_0x384e7a(0xf2)](_0x384e7a(0xf8),_0x3cd02b));if(_0x3ee238[_0x384e7a(0x10b)]===0x0)throw new not_found_error_1[(_0x384e7a(0xe9))](_0x384e7a(0xdb)+_0x3cd02b+_0x384e7a(0x10a));return flosum_repository_sync_dto_1[_0x384e7a(0xe5)][_0x384e7a(0xeb)](_0x3ee238[0x0]);}async['getRepositoryRecordByName'](_0x51a9fb){const _0x5d6401=a135_0x6a4691,_0x114234=await this['salesforceQuery']['query'](queries_1[_0x5d6401(0x106)][_0x5d6401(0xf2)]('%name%',_0x51a9fb));if(_0x114234['length']===0x0)throw new not_found_error_1[(_0x5d6401(0xe9))](_0x5d6401(0xee)+_0x51a9fb+_0x5d6401(0x10a));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x5d6401(0xe0)](_0x114234[0x0]);}async[a135_0x6a4691(0xe3)](_0x149b18){const _0xc7a987=a135_0x6a4691,_0x2d2cc4=_0xc7a987(0x110)+queries_1[_0xc7a987(0x12a)]+'\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27'+_0x149b18+'\x27';return this[_0xc7a987(0x129)](_0x2d2cc4);}async[a135_0x6a4691(0xe8)](_0x2bf3d9){const _0x4c8cc9=a135_0x6a4691,_0x19bf1e=_0x4c8cc9(0x10c)+queries_1[_0x4c8cc9(0x12a)]+_0x4c8cc9(0x11e)+_0x2bf3d9+'\x27';return this[_0x4c8cc9(0x129)](_0x19bf1e);}async['getAttachmentId'](_0x2b50b7){const _0x735557=a135_0x6a4691;var _0x2da03e;const _0x4a9d6=queries_1[_0x735557(0x125)][_0x735557(0xf2)](_0x735557(0x11c),_0x2b50b7[_0x735557(0xde)])[_0x735557(0xf2)](_0x735557(0xf8),_0x2b50b7['repositoryId']?constants_1[_0x735557(0x127)]:constants_1[_0x735557(0xf4)]),_0x20b000=await this[_0x735557(0x126)][_0x735557(0x101)](_0x4a9d6),_0x10ee46=(_0x2da03e=_0x20b000[0x0])===null||_0x2da03e===void 0x0?void 0x0:_0x2da03e['Id'];if(!_0x10ee46)throw new Error(errors_1['ERR_INVALID_ATTACHMENT_ID']);return _0x10ee46;}async[a135_0x6a4691(0x111)](_0x55ce04){const _0x46f6d9=a135_0x6a4691;let _0x4c25b7=await this['getAttachmentId'](_0x55ce04)[_0x46f6d9(0x112)](()=>null);return!_0x4c25b7&&(_0x4c25b7=await this[_0x46f6d9(0x123)]['createObject']('Attachment',{'Body':utils_1[_0x46f6d9(0x107)]('{}'),'ParentId':_0x55ce04[_0x46f6d9(0xde)],'ContentType':_0x46f6d9(0x10d),'Name':_0x55ce04[_0x46f6d9(0xe1)]?constants_1[_0x46f6d9(0x127)]:constants_1[_0x46f6d9(0xf4)]})),_0x4c25b7;}async[a135_0x6a4691(0xe2)](_0x1ac56b,_0x2faf02){const _0x513bca=a135_0x6a4691,_0x1e37cc=await this['getRemoteStateAttachmentId'](_0x1ac56b);await this[_0x513bca(0x123)]['patchObject'](_0x513bca(0x11d),_0x1e37cc,{'Body':utils_1['encodeBase64'](JSON[_0x513bca(0x12e)](_0x2faf02))});}async[a135_0x6a4691(0x10e)](_0x3ccd01,_0x2d9b62){const _0x396b49=a135_0x6a4691;await this[_0x396b49(0x123)][_0x396b49(0x121)](_0x3ccd01[_0x396b49(0x124)],_0x3ccd01['objectId'],{[constants_1[_0x396b49(0xda)]+_0x396b49(0x113)]:_0x2d9b62});}async['disableSync'](_0x3ca571){const _0x1ba7af=a135_0x6a4691;await this[_0x1ba7af(0x123)][_0x1ba7af(0x121)](constants_1[_0x1ba7af(0xda)]+_0x1ba7af(0xe4),_0x3ca571,{[constants_1[_0x1ba7af(0xda)]+_0x1ba7af(0xfc)]:![]});}};SalesforceSyncService=__decorate([typedi_1[a135_0x6a4691(0xea)](),__metadata('design:paramtypes',[salesforce_query_service_1[a135_0x6a4691(0x108)],salesforce_service_1[a135_0x6a4691(0xf6)]])],SalesforceSyncService),exports[a135_0x6a4691(0x12c)]=SalesforceSyncService;