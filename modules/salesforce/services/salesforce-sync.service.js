function a136_0x114f(_0x32aa75,_0x15b676){const _0x2a2c60=a136_0xdab9();return a136_0x114f=function(_0x43723f,_0x334409){_0x43723f=_0x43723f-0xb5;let _0xdab9a6=_0x2a2c60[_0x43723f];return _0xdab9a6;},a136_0x114f(_0x32aa75,_0x15b676);}function a136_0xdab9(){const _0x37e911=['GET_WAITING_REPOSITORIES_QUERY','SalesforceQueryService','decorate','typedi','encodeBase64','FLOSUM_GIT_NAMESPACE','../queries','Synchronization_Status__c','../../shared/utils','Repository\x20','SalesforceNotFoundError','search','%name%','../dto/flosum-repository-sync.dto','defineProperty','1816NWZgON','Repository\x20with\x20Id\x20','(((.+)+)+)+$','getComponents','map','%id%','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','664978CJiCQz','toString','query','getAttachmentId','../../../constants','design:paramtypes','salesforceQuery','\x20not\x20found\x20on\x20salesforce','6655lDKzpn','getRemoteStateAttachmentId','setStatus','objectId','patchObject','getRepositoryRecords','getBranchRecords','FlosumRepositorySyncDto','3108owxdaQ','FLOSUM_NAMESPACE','445523femzvL','Attachment','updateRemoteState','object','SYNC_ATTACHMENT_FOR_BRANCH_NAME','18mnzRVD','length','%parentId%','8GwEbps','getRepositoryRecord','repositoryId','6831Uqxftj','replace','Branch\x20','GET_BRANCH_QUERY','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','GET_REPOSITORY_QUERY','SalesforceService','__metadata','GET_COMPONENTS_QUERY','getComponentsFromRepository','fromBranchRecord','fromRepositoryRecord','getBranchComponents','Git_Settings__c','2501430JJhjVk','getBranchRecordByName','Branch\x20with\x20Id\x20','constructor','GET_WAITING_BRANCHES_QUERY','createObject','getOwnPropertyDescriptor','push','1125207QTurYr','SalesforceSyncService','./salesforce-query.service','../../../constants/errors','disableSync','1758036BWJmlQ','metadata','__decorate','6epJJWc','../errors/not-found.error','salesforceService'];a136_0xdab9=function(){return _0x37e911;};return a136_0xdab9();}const a136_0x10d934=a136_0x114f;(function(_0x3796e9,_0x466e15){const _0x5ce01e=a136_0x114f,_0x258d47=_0x3796e9();while(!![]){try{const _0x3e6d4f=parseInt(_0x5ce01e(0xe0))/0x1+-parseInt(_0x5ce01e(0xce))/0x2*(-parseInt(_0x5ce01e(0xb5))/0x3)+parseInt(_0x5ce01e(0xc7))/0x4*(parseInt(_0x5ce01e(0xd6))/0x5)+-parseInt(_0x5ce01e(0xe5))/0x6*(parseInt(_0x5ce01e(0x106))/0x7)+parseInt(_0x5ce01e(0xe8))/0x8*(-parseInt(_0x5ce01e(0x101))/0x9)+-parseInt(_0x5ce01e(0xf9))/0xa+parseInt(_0x5ce01e(0xeb))/0xb*(-parseInt(_0x5ce01e(0xde))/0xc);if(_0x3e6d4f===_0x466e15)break;else _0x258d47['push'](_0x258d47['shift']());}catch(_0x524faa){_0x258d47['push'](_0x258d47['shift']());}}}(a136_0xdab9,0x67d6e));const a136_0x334409=(function(){let _0x559911=!![];return function(_0x3047ff,_0x2f9cf2){const _0x598d24=_0x559911?function(){if(_0x2f9cf2){const _0x3048f9=_0x2f9cf2['apply'](_0x3047ff,arguments);return _0x2f9cf2=null,_0x3048f9;}}:function(){};return _0x559911=![],_0x598d24;};}()),a136_0x43723f=a136_0x334409(this,function(){const _0x44ff52=a136_0x114f;return a136_0x43723f[_0x44ff52(0xcf)]()['search']('(((.+)+)+)+$')[_0x44ff52(0xcf)]()[_0x44ff52(0xfc)](a136_0x43723f)[_0x44ff52(0xc3)](_0x44ff52(0xc9));});a136_0x43723f();'use strict';var __decorate=this&&this[a136_0x10d934(0x108)]||function(_0x1a78b1,_0x19d1d5,_0x1739f0,_0x254f5a){const _0xf0aa3e=a136_0x10d934;var _0x4f7227=arguments[_0xf0aa3e(0xe6)],_0x73d558=_0x4f7227<0x3?_0x19d1d5:_0x254f5a===null?_0x254f5a=Object[_0xf0aa3e(0xff)](_0x19d1d5,_0x1739f0):_0x254f5a,_0x6f6d0f;if(typeof Reflect===_0xf0aa3e(0xe3)&&typeof Reflect['decorate']==='function')_0x73d558=Reflect[_0xf0aa3e(0xba)](_0x1a78b1,_0x19d1d5,_0x1739f0,_0x254f5a);else{for(var _0x4ccb41=_0x1a78b1[_0xf0aa3e(0xe6)]-0x1;_0x4ccb41>=0x0;_0x4ccb41--)if(_0x6f6d0f=_0x1a78b1[_0x4ccb41])_0x73d558=(_0x4f7227<0x3?_0x6f6d0f(_0x73d558):_0x4f7227>0x3?_0x6f6d0f(_0x19d1d5,_0x1739f0,_0x73d558):_0x6f6d0f(_0x19d1d5,_0x1739f0))||_0x73d558;}return _0x4f7227>0x3&&_0x73d558&&Object[_0xf0aa3e(0xc6)](_0x19d1d5,_0x1739f0,_0x73d558),_0x73d558;},__metadata=this&&this[a136_0x10d934(0xf2)]||function(_0x1f5fab,_0x346c75){const _0x526bea=a136_0x10d934;if(typeof Reflect===_0x526bea(0xe3)&&typeof Reflect['metadata']==='function')return Reflect[_0x526bea(0x107)](_0x1f5fab,_0x346c75);};Object[a136_0x10d934(0xc6)](exports,'__esModule',{'value':!![]}),exports[a136_0x10d934(0x102)]=void 0x0;const typedi_1=require(a136_0x10d934(0xbb)),constants_1=require(a136_0x10d934(0xd2)),errors_1=require(a136_0x10d934(0x104)),utils_1=require(a136_0x10d934(0xc0)),flosum_repository_sync_dto_1=require(a136_0x10d934(0xc5)),not_found_error_1=require(a136_0x10d934(0xb6)),queries_1=require(a136_0x10d934(0xbe)),salesforce_query_service_1=require(a136_0x10d934(0x103)),salesforce_service_1=require('./salesforce.service');let SalesforceSyncService=class SalesforceSyncService{constructor(_0x3c5063,_0x301fd6){const _0x3b86f0=a136_0x10d934;this[_0x3b86f0(0xd4)]=_0x3c5063,this['salesforceService']=_0x301fd6;}async[a136_0x10d934(0xca)](_0x59a61d){const _0x41b0a6=a136_0x10d934;var _0x497e75;const _0x2d1f64=await this[_0x41b0a6(0xd4)][_0x41b0a6(0xd0)](_0x59a61d),_0x5ab3f4=[];for(const _0x409915 of _0x2d1f64){const _0x59b3e9=(_0x497e75=_0x409915[constants_1[_0x41b0a6(0xdf)]+'Components__r'])===null||_0x497e75===void 0x0?void 0x0:_0x497e75['records'];_0x59b3e9&&_0x59b3e9[_0x41b0a6(0xe6)]&&_0x5ab3f4[_0x41b0a6(0x100)](_0x59b3e9[0x0]['Id']);}return _0x5ab3f4;}async[a136_0x10d934(0xdb)](){const _0x45722a=a136_0x10d934,_0x134ba1=await this[_0x45722a(0xd4)]['query'](queries_1[_0x45722a(0xb8)]);return _0x134ba1[_0x45722a(0xcb)](_0x1f698a=>flosum_repository_sync_dto_1[_0x45722a(0xdd)]['fromRepositoryRecord'](_0x1f698a));}async[a136_0x10d934(0xdc)](){const _0x38506b=a136_0x10d934,_0x20f6b4=await this[_0x38506b(0xd4)][_0x38506b(0xd0)](queries_1[_0x38506b(0xfd)]);return _0x20f6b4[_0x38506b(0xcb)](_0x3c19a1=>flosum_repository_sync_dto_1[_0x38506b(0xdd)][_0x38506b(0xf5)](_0x3c19a1));}async[a136_0x10d934(0xe9)](_0x19b648){const _0x46ce4b=a136_0x10d934,_0x5973b2=await this[_0x46ce4b(0xd4)][_0x46ce4b(0xd0)](queries_1[_0x46ce4b(0xf0)][_0x46ce4b(0xec)](_0x46ce4b(0xcc),_0x19b648));if(_0x5973b2[_0x46ce4b(0xe6)]===0x0)throw new not_found_error_1[(_0x46ce4b(0xc2))](_0x46ce4b(0xc8)+_0x19b648+'\x20not\x20found\x20on\x20salesforce');return flosum_repository_sync_dto_1[_0x46ce4b(0xdd)][_0x46ce4b(0xf6)](_0x5973b2[0x0]);}async['getBranchRecord'](_0x17af6b){const _0x24f945=a136_0x10d934,_0xc6a145=await this[_0x24f945(0xd4)][_0x24f945(0xd0)](queries_1[_0x24f945(0xee)][_0x24f945(0xec)](_0x24f945(0xcc),_0x17af6b));if(_0xc6a145[_0x24f945(0xe6)]===0x0)throw new not_found_error_1[(_0x24f945(0xc2))](_0x24f945(0xfb)+_0x17af6b+'\x20not\x20found\x20on\x20salesforce');return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x24f945(0xf5)](_0xc6a145[0x0]);}async[a136_0x10d934(0xfa)](_0x69654c){const _0x416b6d=a136_0x10d934,_0x482732=await this['salesforceQuery']['query'](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x416b6d(0xec)](_0x416b6d(0xc4),_0x69654c));if(_0x482732[_0x416b6d(0xe6)]===0x0)throw new not_found_error_1[(_0x416b6d(0xc2))](_0x416b6d(0xed)+_0x69654c+_0x416b6d(0xd5));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x416b6d(0xf5)](_0x482732[0x0]);}async['getRepositoryRecordByName'](_0x5ed970){const _0x40f34f=a136_0x10d934,_0x2c9b43=await this['salesforceQuery'][_0x40f34f(0xd0)](queries_1['GET_REPOSITORY_BY_NAME_QUERY']['replace'](_0x40f34f(0xc4),_0x5ed970));if(_0x2c9b43[_0x40f34f(0xe6)]===0x0)throw new not_found_error_1[(_0x40f34f(0xc2))](_0x40f34f(0xc1)+_0x5ed970+_0x40f34f(0xd5));return flosum_repository_sync_dto_1[_0x40f34f(0xdd)]['fromRepositoryRecord'](_0x2c9b43[0x0]);}async[a136_0x10d934(0xf4)](_0x168660){const _0x2a3032=a136_0x10d934,_0x451f0c='\x0a\x20\x20\x20\x20\x20\x20'+queries_1[_0x2a3032(0xf3)]+'\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27'+_0x168660+'\x27';return this['getComponents'](_0x451f0c);}async[a136_0x10d934(0xf7)](_0xd5f2b3){const _0x58f317=a136_0x10d934,_0x482249=_0x58f317(0xef)+queries_1['GET_COMPONENTS_QUERY']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27'+_0xd5f2b3+'\x27';return this[_0x58f317(0xca)](_0x482249);}async[a136_0x10d934(0xd1)](_0x32b962){const _0xf6215d=a136_0x10d934;var _0x3187f2;const _0x50d6bf=queries_1['GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY'][_0xf6215d(0xec)](_0xf6215d(0xe7),_0x32b962[_0xf6215d(0xd9)])[_0xf6215d(0xec)](_0xf6215d(0xc4),_0x32b962[_0xf6215d(0xea)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0xf6215d(0xe4)]),_0x4310db=await this[_0xf6215d(0xd4)]['query'](_0x50d6bf),_0x59d2a7=(_0x3187f2=_0x4310db[0x0])===null||_0x3187f2===void 0x0?void 0x0:_0x3187f2['Id'];if(!_0x59d2a7)throw new Error(errors_1['ERR_INVALID_ATTACHMENT_ID']);return _0x59d2a7;}async[a136_0x10d934(0xd7)](_0x91974d){const _0x15b4de=a136_0x10d934;let _0x355d3b=await this[_0x15b4de(0xd1)](_0x91974d)['catch'](()=>null);return!_0x355d3b&&(_0x355d3b=await this[_0x15b4de(0xb7)][_0x15b4de(0xfe)](_0x15b4de(0xe1),{'Body':utils_1[_0x15b4de(0xbc)]('{}'),'ParentId':_0x91974d[_0x15b4de(0xd9)],'ContentType':'text/plain','Name':_0x91974d[_0x15b4de(0xea)]?constants_1[_0x15b4de(0xcd)]:constants_1[_0x15b4de(0xe4)]})),_0x355d3b;}async[a136_0x10d934(0xe2)](_0x139761,_0x49dfbc){const _0x51b377=a136_0x10d934,_0x58952d=await this[_0x51b377(0xd7)](_0x139761);await this[_0x51b377(0xb7)][_0x51b377(0xda)](_0x51b377(0xe1),_0x58952d,{'Body':utils_1['encodeBase64'](JSON['stringify'](_0x49dfbc))});}async[a136_0x10d934(0xd8)](_0x2191fb,_0x473b13){const _0x354679=a136_0x10d934;await this[_0x354679(0xb7)][_0x354679(0xda)](_0x2191fb['objectType'],_0x2191fb['objectId'],{[constants_1[_0x354679(0xbd)]+_0x354679(0xbf)]:_0x473b13});}async[a136_0x10d934(0x105)](_0x3b06be){const _0xf65e04=a136_0x10d934;await this['salesforceService'][_0xf65e04(0xda)](constants_1['FLOSUM_GIT_NAMESPACE']+_0xf65e04(0xf8),_0x3b06be,{[constants_1[_0xf65e04(0xbd)]+'Sync_In_Progress__c']:![]});}};SalesforceSyncService=__decorate([typedi_1['Service'](),__metadata(a136_0x10d934(0xd3),[salesforce_query_service_1[a136_0x10d934(0xb9)],salesforce_service_1[a136_0x10d934(0xf1)]])],SalesforceSyncService),exports[a136_0x10d934(0x102)]=SalesforceSyncService;