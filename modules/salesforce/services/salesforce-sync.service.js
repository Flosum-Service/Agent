function a136_0x8744(){const _0x26cef7=['GET_REPOSITORY_BY_NAME_QUERY','%id%','getBranchRecords','metadata','33648wHhUzL','4BIUptS','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','typedi','length','__decorate','2501240vntCvR','salesforceService','GET_WAITING_REPOSITORIES_QUERY','../../../constants/errors','createObject','../dto/flosum-repository-sync.dto','getBranchComponents','../errors/not-found.error','4ltDgaT','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','decorate','function','__metadata','GET_WAITING_BRANCHES_QUERY','objectType','SalesforceSyncService','encodeBase64','repositoryId','Attachment','patchObject','getComponentsFromRepository','objectId','GET_BRANCH_BY_NAME_QUERY','SalesforceNotFoundError','35510adnOwJ','disableSync','488916YmptRl','Branch\x20with\x20Id\x20','../queries','4732208nTGlhd','GET_COMPONENTS_QUERY','SalesforceQueryService','%name%','ERR_INVALID_ATTACHMENT_ID','text/plain','\x20not\x20found\x20on\x20salesforce','salesforceQuery','stringify','getComponents','GET_REPOSITORY_QUERY','10181325sfuzzl','getRepositoryRecords','toString','\x0a\x20\x20\x20\x20\x20\x20','40RCEWPx','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','records','catch','updateRemoteState','390neYzmu','search','getAttachmentId','defineProperty','SalesforceService','(((.+)+)+)+$','%parentId%','push','Git_Settings__c','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','object','Synchronization_Status__c','getRemoteStateAttachmentId','Repository\x20','FLOSUM_GIT_NAMESPACE','__esModule','./salesforce.service','fromRepositoryRecord','FlosumRepositorySyncDto','../../shared/utils','getBranchRecord','replace','160506yFOBfr','constructor','getRepositoryRecordByName','SYNC_ATTACHMENT_FOR_BRANCH_NAME','getBranchRecordByName','query'];a136_0x8744=function(){return _0x26cef7;};return a136_0x8744();}const a136_0x44ff4f=a136_0x408a;(function(_0x52b031,_0x1bcf69){const _0x10b5b6=a136_0x408a,_0x128bf8=_0x52b031();while(!![]){try{const _0x1a8c23=parseInt(_0x10b5b6(0x9a))/0x1*(-parseInt(_0x10b5b6(0x99))/0x2)+parseInt(_0x10b5b6(0x8f))/0x3*(-parseInt(_0x10b5b6(0xa7))/0x4)+-parseInt(_0x10b5b6(0xb7))/0x5*(-parseInt(_0x10b5b6(0x79))/0x6)+parseInt(_0x10b5b6(0x9f))/0x7+-parseInt(_0x10b5b6(0xbc))/0x8+parseInt(_0x10b5b6(0xb9))/0x9*(-parseInt(_0x10b5b6(0xcb))/0xa)+parseInt(_0x10b5b6(0xc7))/0xb;if(_0x1a8c23===_0x1bcf69)break;else _0x128bf8['push'](_0x128bf8['shift']());}catch(_0x36a817){_0x128bf8['push'](_0x128bf8['shift']());}}}(a136_0x8744,0xc6f39));const a136_0x98575a=(function(){let _0x52bd15=!![];return function(_0xfa9142,_0x4eab0e){const _0x3688df=_0x52bd15?function(){if(_0x4eab0e){const _0x4e28ce=_0x4eab0e['apply'](_0xfa9142,arguments);return _0x4eab0e=null,_0x4e28ce;}}:function(){};return _0x52bd15=![],_0x3688df;};}()),a136_0x4680d5=a136_0x98575a(this,function(){const _0x371072=a136_0x408a;return a136_0x4680d5['toString']()[_0x371072(0x7a)](_0x371072(0x7e))[_0x371072(0xc9)]()[_0x371072(0x90)](a136_0x4680d5)[_0x371072(0x7a)](_0x371072(0x7e));});a136_0x4680d5();'use strict';var __decorate=this&&this[a136_0x44ff4f(0x9e)]||function(_0x38a87e,_0x3f96c4,_0x8a22af,_0x28583e){const _0x273563=a136_0x44ff4f;var _0x53adb4=arguments['length'],_0x2047b3=_0x53adb4<0x3?_0x3f96c4:_0x28583e===null?_0x28583e=Object['getOwnPropertyDescriptor'](_0x3f96c4,_0x8a22af):_0x28583e,_0x4eb7b4;if(typeof Reflect===_0x273563(0x83)&&typeof Reflect[_0x273563(0xa9)]===_0x273563(0xaa))_0x2047b3=Reflect[_0x273563(0xa9)](_0x38a87e,_0x3f96c4,_0x8a22af,_0x28583e);else{for(var _0x2b8f74=_0x38a87e[_0x273563(0x9d)]-0x1;_0x2b8f74>=0x0;_0x2b8f74--)if(_0x4eb7b4=_0x38a87e[_0x2b8f74])_0x2047b3=(_0x53adb4<0x3?_0x4eb7b4(_0x2047b3):_0x53adb4>0x3?_0x4eb7b4(_0x3f96c4,_0x8a22af,_0x2047b3):_0x4eb7b4(_0x3f96c4,_0x8a22af))||_0x2047b3;}return _0x53adb4>0x3&&_0x2047b3&&Object[_0x273563(0x7c)](_0x3f96c4,_0x8a22af,_0x2047b3),_0x2047b3;},__metadata=this&&this[a136_0x44ff4f(0xab)]||function(_0x3c444a,_0x5d972b){const _0x2b9799=a136_0x44ff4f;if(typeof Reflect===_0x2b9799(0x83)&&typeof Reflect['metadata']==='function')return Reflect[_0x2b9799(0x98)](_0x3c444a,_0x5d972b);};Object[a136_0x44ff4f(0x7c)](exports,a136_0x44ff4f(0x88),{'value':!![]}),exports[a136_0x44ff4f(0xae)]=void 0x0;const typedi_1=require(a136_0x44ff4f(0x9c)),constants_1=require('../../../constants'),errors_1=require(a136_0x44ff4f(0xa2)),utils_1=require(a136_0x44ff4f(0x8c)),flosum_repository_sync_dto_1=require(a136_0x44ff4f(0xa4)),not_found_error_1=require(a136_0x44ff4f(0xa6)),queries_1=require(a136_0x44ff4f(0xbb)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_service_1=require(a136_0x44ff4f(0x89));function a136_0x408a(_0x48bf7e,_0x13d7a7){const _0x5ab55a=a136_0x8744();return a136_0x408a=function(_0x4680d5,_0x98575a){_0x4680d5=_0x4680d5-0x77;let _0x8744de=_0x5ab55a[_0x4680d5];return _0x8744de;},a136_0x408a(_0x48bf7e,_0x13d7a7);}let SalesforceSyncService=class SalesforceSyncService{constructor(_0x59e175,_0x227e93){const _0x382365=a136_0x44ff4f;this[_0x382365(0xc3)]=_0x59e175,this[_0x382365(0xa0)]=_0x227e93;}async[a136_0x44ff4f(0xc5)](_0x47d0e1){const _0x4e8743=a136_0x44ff4f;var _0x591def;const _0x420794=await this['salesforceQuery'][_0x4e8743(0x94)](_0x47d0e1),_0x556aeb=[];for(const _0x52c0e9 of _0x420794){const _0xee5f5e=(_0x591def=_0x52c0e9[constants_1['FLOSUM_NAMESPACE']+'Components__r'])===null||_0x591def===void 0x0?void 0x0:_0x591def[_0x4e8743(0xcd)];_0xee5f5e&&_0xee5f5e['length']&&_0x556aeb[_0x4e8743(0x80)](_0xee5f5e[0x0]['Id']);}return _0x556aeb;}async[a136_0x44ff4f(0xc8)](){const _0x4d2630=a136_0x44ff4f,_0x249fbb=await this[_0x4d2630(0xc3)][_0x4d2630(0x94)](queries_1[_0x4d2630(0xa1)]);return _0x249fbb['map'](_0x3b7add=>flosum_repository_sync_dto_1[_0x4d2630(0x8b)][_0x4d2630(0x8a)](_0x3b7add));}async[a136_0x44ff4f(0x97)](){const _0x4f1892=a136_0x44ff4f,_0x4b9bb6=await this[_0x4f1892(0xc3)]['query'](queries_1[_0x4f1892(0xac)]);return _0x4b9bb6['map'](_0x4617e3=>flosum_repository_sync_dto_1[_0x4f1892(0x8b)]['fromBranchRecord'](_0x4617e3));}async['getRepositoryRecord'](_0x200d06){const _0x28327a=a136_0x44ff4f,_0x506285=await this[_0x28327a(0xc3)][_0x28327a(0x94)](queries_1[_0x28327a(0xc6)][_0x28327a(0x8e)](_0x28327a(0x96),_0x200d06));if(_0x506285['length']===0x0)throw new not_found_error_1[(_0x28327a(0xb6))]('Repository\x20with\x20Id\x20'+_0x200d06+_0x28327a(0xc2));return flosum_repository_sync_dto_1[_0x28327a(0x8b)]['fromRepositoryRecord'](_0x506285[0x0]);}async[a136_0x44ff4f(0x8d)](_0x2c99e7){const _0x402c71=a136_0x44ff4f,_0x5638c5=await this[_0x402c71(0xc3)][_0x402c71(0x94)](queries_1['GET_BRANCH_QUERY'][_0x402c71(0x8e)](_0x402c71(0x96),_0x2c99e7));if(_0x5638c5[_0x402c71(0x9d)]===0x0)throw new not_found_error_1['SalesforceNotFoundError'](_0x402c71(0xba)+_0x2c99e7+_0x402c71(0xc2));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromBranchRecord'](_0x5638c5[0x0]);}async[a136_0x44ff4f(0x93)](_0x56b3dd){const _0xa593dd=a136_0x44ff4f,_0x34d825=await this[_0xa593dd(0xc3)][_0xa593dd(0x94)](queries_1[_0xa593dd(0xb5)]['replace'](_0xa593dd(0xbf),_0x56b3dd));if(_0x34d825[_0xa593dd(0x9d)]===0x0)throw new not_found_error_1[(_0xa593dd(0xb6))]('Branch\x20'+_0x56b3dd+_0xa593dd(0xc2));return flosum_repository_sync_dto_1[_0xa593dd(0x8b)]['fromBranchRecord'](_0x34d825[0x0]);}async[a136_0x44ff4f(0x91)](_0x331381){const _0x2d2790=a136_0x44ff4f,_0x1700f0=await this[_0x2d2790(0xc3)][_0x2d2790(0x94)](queries_1[_0x2d2790(0x95)]['replace']('%name%',_0x331381));if(_0x1700f0[_0x2d2790(0x9d)]===0x0)throw new not_found_error_1[(_0x2d2790(0xb6))](_0x2d2790(0x86)+_0x331381+_0x2d2790(0xc2));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromRepositoryRecord'](_0x1700f0[0x0]);}async[a136_0x44ff4f(0xb3)](_0x3cc0d3){const _0x112695=a136_0x44ff4f,_0x9d9403=_0x112695(0xca)+queries_1[_0x112695(0xbd)]+_0x112695(0x9b)+_0x3cc0d3+'\x27';return this[_0x112695(0xc5)](_0x9d9403);}async[a136_0x44ff4f(0xa5)](_0x4a23cb){const _0x4ba0b2=a136_0x44ff4f,_0x34958b=_0x4ba0b2(0x82)+queries_1[_0x4ba0b2(0xbd)]+_0x4ba0b2(0xa8)+_0x4a23cb+'\x27';return this[_0x4ba0b2(0xc5)](_0x34958b);}async[a136_0x44ff4f(0x7b)](_0x134597){const _0x572521=a136_0x44ff4f;var _0x157222;const _0x468206=queries_1['GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY']['replace'](_0x572521(0x7f),_0x134597['objectId'])[_0x572521(0x8e)](_0x572521(0xbf),_0x134597[_0x572521(0xb0)]?constants_1[_0x572521(0xcc)]:constants_1[_0x572521(0x92)]),_0x5b42f9=await this[_0x572521(0xc3)][_0x572521(0x94)](_0x468206),_0x2c9291=(_0x157222=_0x5b42f9[0x0])===null||_0x157222===void 0x0?void 0x0:_0x157222['Id'];if(!_0x2c9291)throw new Error(errors_1[_0x572521(0xc0)]);return _0x2c9291;}async[a136_0x44ff4f(0x85)](_0x20f372){const _0x302693=a136_0x44ff4f;let _0x5ce008=await this[_0x302693(0x7b)](_0x20f372)[_0x302693(0x77)](()=>null);return!_0x5ce008&&(_0x5ce008=await this['salesforceService'][_0x302693(0xa3)](_0x302693(0xb1),{'Body':utils_1['encodeBase64']('{}'),'ParentId':_0x20f372['objectId'],'ContentType':_0x302693(0xc1),'Name':_0x20f372[_0x302693(0xb0)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0x302693(0x92)]})),_0x5ce008;}async[a136_0x44ff4f(0x78)](_0x32fdcb,_0x1f681f){const _0x2ebc8e=a136_0x44ff4f,_0x235a5f=await this[_0x2ebc8e(0x85)](_0x32fdcb);await this['salesforceService'][_0x2ebc8e(0xb2)](_0x2ebc8e(0xb1),_0x235a5f,{'Body':utils_1[_0x2ebc8e(0xaf)](JSON[_0x2ebc8e(0xc4)](_0x1f681f))});}async['setStatus'](_0x1be24c,_0x26791c){const _0x34c1c2=a136_0x44ff4f;await this['salesforceService'][_0x34c1c2(0xb2)](_0x1be24c[_0x34c1c2(0xad)],_0x1be24c[_0x34c1c2(0xb4)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x34c1c2(0x84)]:_0x26791c});}async[a136_0x44ff4f(0xb8)](_0x19c890){const _0x4dc537=a136_0x44ff4f;await this[_0x4dc537(0xa0)][_0x4dc537(0xb2)](constants_1[_0x4dc537(0x87)]+_0x4dc537(0x81),_0x19c890,{[constants_1[_0x4dc537(0x87)]+'Sync_In_Progress__c']:![]});}};SalesforceSyncService=__decorate([typedi_1['Service'](),__metadata('design:paramtypes',[salesforce_query_service_1[a136_0x44ff4f(0xbe)],salesforce_service_1[a136_0x44ff4f(0x7d)]])],SalesforceSyncService),exports['SalesforceSyncService']=SalesforceSyncService;