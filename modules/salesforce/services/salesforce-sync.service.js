function a136_0x4494(_0x2f0536,_0x5df0e5){const _0x47a636=a136_0xab3f();return a136_0x4494=function(_0x47dfe0,_0x465a74){_0x47dfe0=_0x47dfe0-0xa8;let _0xab3f05=_0x47a636[_0x47dfe0];return _0xab3f05;},a136_0x4494(_0x2f0536,_0x5df0e5);}const a136_0x21ec05=a136_0x4494;(function(_0xd42812,_0xb2cadb){const _0x13d64f=a136_0x4494,_0x3cf18e=_0xd42812();while(!![]){try{const _0x47ea7e=parseInt(_0x13d64f(0xe4))/0x1*(parseInt(_0x13d64f(0xb9))/0x2)+parseInt(_0x13d64f(0xb4))/0x3*(parseInt(_0x13d64f(0xc8))/0x4)+-parseInt(_0x13d64f(0xdd))/0x5+-parseInt(_0x13d64f(0xb2))/0x6*(parseInt(_0x13d64f(0xf1))/0x7)+-parseInt(_0x13d64f(0xc0))/0x8*(parseInt(_0x13d64f(0xd8))/0x9)+-parseInt(_0x13d64f(0xff))/0xa+-parseInt(_0x13d64f(0xf3))/0xb*(-parseInt(_0x13d64f(0x105))/0xc);if(_0x47ea7e===_0xb2cadb)break;else _0x3cf18e['push'](_0x3cf18e['shift']());}catch(_0x46de26){_0x3cf18e['push'](_0x3cf18e['shift']());}}}(a136_0xab3f,0x3b80c));const a136_0x465a74=(function(){let _0x41104e=!![];return function(_0x2a43a0,_0x52d2af){const _0x8dc656=_0x41104e?function(){const _0x380d6e=a136_0x4494;if(_0x52d2af){const _0x39f34f=_0x52d2af[_0x380d6e(0xe1)](_0x2a43a0,arguments);return _0x52d2af=null,_0x39f34f;}}:function(){};return _0x41104e=![],_0x8dc656;};}()),a136_0x47dfe0=a136_0x465a74(this,function(){const _0x49a835=a136_0x4494;return a136_0x47dfe0[_0x49a835(0x107)]()[_0x49a835(0xec)](_0x49a835(0xaf))[_0x49a835(0x107)]()[_0x49a835(0xd0)](a136_0x47dfe0)[_0x49a835(0xec)](_0x49a835(0xaf));});a136_0x47dfe0();'use strict';function a136_0xab3f(){const _0x3f470f=['text/plain','./salesforce-query.service','updateRemoteState','\x20not\x20found\x20on\x20salesforce','length','369TJIpJi','ERR_INVALID_ATTACHMENT_ID','GET_REPOSITORY_BY_NAME_QUERY','Repository\x20','SalesforceQueryService','1338485VDcJiJ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','salesforceQuery','repositoryId','apply','__decorate','catch','8CdPJbE','GET_COMPONENTS_QUERY','disableSync','Service','GET_WAITING_BRANCHES_QUERY','getBranchRecords','replace','Attachment','search','object','../errors/not-found.error','__metadata','../queries','21iEXGEY','getRepositoryRecord','12423961CorCEC','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','\x0a\x20\x20\x20\x20\x20\x20','Repository\x20with\x20Id\x20','../../../constants','%name%','objectId','getRepositoryRecords','defineProperty','fromBranchRecord','push','3369510dimlYd','FlosumRepositorySyncDto','getComponentsFromRepository','GET_REPOSITORY_QUERY','encodeBase64','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','12gfgWHo','fromRepositoryRecord','toString','./salesforce.service','FLOSUM_GIT_NAMESPACE','map','getAttachmentId','GET_WAITING_REPOSITORIES_QUERY','%parentId%','patchObject','(((.+)+)+)+$','createObject','GET_BRANCH_BY_NAME_QUERY','784626SrxrRi','getRepositoryRecordByName','855381gRRyjV','getOwnPropertyDescriptor','decorate','../../../constants/errors','SalesforceService','41284DLMjpN','Sync_In_Progress__c','SYNC_ATTACHMENT_FOR_BRANCH_NAME','setStatus','Git_Settings__c','getRemoteStateAttachmentId','SalesforceNotFoundError','66152oTwSih','metadata','records','getComponents','salesforceService','Synchronization_Status__c','query','getBranchRecord','4ARpZhn','getBranchRecordByName','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','SalesforceSyncService','getBranchComponents','Components__r','Branch\x20with\x20Id\x20','Branch\x20','constructor','__esModule','typedi'];a136_0xab3f=function(){return _0x3f470f;};return a136_0xab3f();}var __decorate=this&&this[a136_0x21ec05(0xe2)]||function(_0x17edb1,_0x539d95,_0x3f6754,_0x4ca133){const _0x30fb3b=a136_0x21ec05;var _0xa87ef9=arguments['length'],_0x3e90a4=_0xa87ef9<0x3?_0x539d95:_0x4ca133===null?_0x4ca133=Object[_0x30fb3b(0xb5)](_0x539d95,_0x3f6754):_0x4ca133,_0x2782c3;if(typeof Reflect===_0x30fb3b(0xed)&&typeof Reflect[_0x30fb3b(0xb6)]==='function')_0x3e90a4=Reflect[_0x30fb3b(0xb6)](_0x17edb1,_0x539d95,_0x3f6754,_0x4ca133);else{for(var _0x3d011a=_0x17edb1[_0x30fb3b(0xd7)]-0x1;_0x3d011a>=0x0;_0x3d011a--)if(_0x2782c3=_0x17edb1[_0x3d011a])_0x3e90a4=(_0xa87ef9<0x3?_0x2782c3(_0x3e90a4):_0xa87ef9>0x3?_0x2782c3(_0x539d95,_0x3f6754,_0x3e90a4):_0x2782c3(_0x539d95,_0x3f6754))||_0x3e90a4;}return _0xa87ef9>0x3&&_0x3e90a4&&Object[_0x30fb3b(0xfc)](_0x539d95,_0x3f6754,_0x3e90a4),_0x3e90a4;},__metadata=this&&this[a136_0x21ec05(0xef)]||function(_0x3c5aef,_0x15ecef){const _0x53e903=a136_0x21ec05;if(typeof Reflect===_0x53e903(0xed)&&typeof Reflect[_0x53e903(0xc1)]==='function')return Reflect[_0x53e903(0xc1)](_0x3c5aef,_0x15ecef);};Object['defineProperty'](exports,a136_0x21ec05(0xd1),{'value':!![]}),exports[a136_0x21ec05(0xcb)]=void 0x0;const typedi_1=require(a136_0x21ec05(0xd2)),constants_1=require(a136_0x21ec05(0xf8)),errors_1=require(a136_0x21ec05(0xb7)),utils_1=require('../../shared/utils'),flosum_repository_sync_dto_1=require('../dto/flosum-repository-sync.dto'),not_found_error_1=require(a136_0x21ec05(0xee)),queries_1=require(a136_0x21ec05(0xf0)),salesforce_query_service_1=require(a136_0x21ec05(0xd4)),salesforce_service_1=require(a136_0x21ec05(0xa8));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x33feb9,_0x2b47f1){const _0x4cca55=a136_0x21ec05;this[_0x4cca55(0xdf)]=_0x33feb9,this[_0x4cca55(0xc4)]=_0x2b47f1;}async['getComponents'](_0x165c5a){const _0x294552=a136_0x21ec05;var _0x429ee9;const _0x58a430=await this[_0x294552(0xdf)][_0x294552(0xc6)](_0x165c5a),_0x3b154d=[];for(const _0xb2ee4e of _0x58a430){const _0x2aff14=(_0x429ee9=_0xb2ee4e[constants_1['FLOSUM_NAMESPACE']+_0x294552(0xcd)])===null||_0x429ee9===void 0x0?void 0x0:_0x429ee9[_0x294552(0xc2)];_0x2aff14&&_0x2aff14[_0x294552(0xd7)]&&_0x3b154d[_0x294552(0xfe)](_0x2aff14[0x0]['Id']);}return _0x3b154d;}async[a136_0x21ec05(0xfb)](){const _0x183bc5=a136_0x21ec05,_0x226a3f=await this[_0x183bc5(0xdf)][_0x183bc5(0xc6)](queries_1[_0x183bc5(0xac)]);return _0x226a3f[_0x183bc5(0xaa)](_0x14fbb4=>flosum_repository_sync_dto_1[_0x183bc5(0x100)][_0x183bc5(0x106)](_0x14fbb4));}async[a136_0x21ec05(0xe9)](){const _0x2551c2=a136_0x21ec05,_0x5b06fb=await this['salesforceQuery']['query'](queries_1[_0x2551c2(0xe8)]);return _0x5b06fb[_0x2551c2(0xaa)](_0x17c18d=>flosum_repository_sync_dto_1[_0x2551c2(0x100)][_0x2551c2(0xfd)](_0x17c18d));}async[a136_0x21ec05(0xf2)](_0xe0aea5){const _0x371803=a136_0x21ec05,_0x180cee=await this[_0x371803(0xdf)]['query'](queries_1[_0x371803(0x102)][_0x371803(0xea)]('%id%',_0xe0aea5));if(_0x180cee[_0x371803(0xd7)]===0x0)throw new not_found_error_1[(_0x371803(0xbf))](_0x371803(0xf7)+_0xe0aea5+_0x371803(0xd6));return flosum_repository_sync_dto_1[_0x371803(0x100)][_0x371803(0x106)](_0x180cee[0x0]);}async[a136_0x21ec05(0xc7)](_0x27df81){const _0x50bfae=a136_0x21ec05,_0x5375c6=await this['salesforceQuery'][_0x50bfae(0xc6)](queries_1['GET_BRANCH_QUERY'][_0x50bfae(0xea)]('%id%',_0x27df81));if(_0x5375c6[_0x50bfae(0xd7)]===0x0)throw new not_found_error_1[(_0x50bfae(0xbf))](_0x50bfae(0xce)+_0x27df81+_0x50bfae(0xd6));return flosum_repository_sync_dto_1[_0x50bfae(0x100)][_0x50bfae(0xfd)](_0x5375c6[0x0]);}async[a136_0x21ec05(0xc9)](_0x9eefd){const _0x1edb4e=a136_0x21ec05,_0x1f66d6=await this[_0x1edb4e(0xdf)][_0x1edb4e(0xc6)](queries_1[_0x1edb4e(0xb1)][_0x1edb4e(0xea)](_0x1edb4e(0xf9),_0x9eefd));if(_0x1f66d6[_0x1edb4e(0xd7)]===0x0)throw new not_found_error_1[(_0x1edb4e(0xbf))](_0x1edb4e(0xcf)+_0x9eefd+_0x1edb4e(0xd6));return flosum_repository_sync_dto_1[_0x1edb4e(0x100)][_0x1edb4e(0xfd)](_0x1f66d6[0x0]);}async[a136_0x21ec05(0xb3)](_0xb5ab5f){const _0xd27e7f=a136_0x21ec05,_0x57f246=await this['salesforceQuery']['query'](queries_1[_0xd27e7f(0xda)]['replace'](_0xd27e7f(0xf9),_0xb5ab5f));if(_0x57f246[_0xd27e7f(0xd7)]===0x0)throw new not_found_error_1[(_0xd27e7f(0xbf))](_0xd27e7f(0xdb)+_0xb5ab5f+'\x20not\x20found\x20on\x20salesforce');return flosum_repository_sync_dto_1[_0xd27e7f(0x100)]['fromRepositoryRecord'](_0x57f246[0x0]);}async[a136_0x21ec05(0x101)](_0x41d931){const _0xa2e3bd=a136_0x21ec05,_0x29745a=_0xa2e3bd(0xf6)+queries_1[_0xa2e3bd(0xe5)]+_0xa2e3bd(0x104)+_0x41d931+'\x27';return this['getComponents'](_0x29745a);}async[a136_0x21ec05(0xcc)](_0x11d95e){const _0x3e4e47=a136_0x21ec05,_0x3ae7b4=_0x3e4e47(0xde)+queries_1[_0x3e4e47(0xe5)]+_0x3e4e47(0xf4)+_0x11d95e+'\x27';return this[_0x3e4e47(0xc3)](_0x3ae7b4);}async[a136_0x21ec05(0xab)](_0x2d48ea){const _0x4717cf=a136_0x21ec05;var _0x3a7d41;const _0x1d4fdf=queries_1[_0x4717cf(0xf5)][_0x4717cf(0xea)](_0x4717cf(0xad),_0x2d48ea[_0x4717cf(0xfa)])[_0x4717cf(0xea)](_0x4717cf(0xf9),_0x2d48ea[_0x4717cf(0xe0)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0x4717cf(0xbb)]),_0x77a4c6=await this[_0x4717cf(0xdf)][_0x4717cf(0xc6)](_0x1d4fdf),_0x23873b=(_0x3a7d41=_0x77a4c6[0x0])===null||_0x3a7d41===void 0x0?void 0x0:_0x3a7d41['Id'];if(!_0x23873b)throw new Error(errors_1[_0x4717cf(0xd9)]);return _0x23873b;}async[a136_0x21ec05(0xbe)](_0x345f3c){const _0x433148=a136_0x21ec05;let _0x326245=await this[_0x433148(0xab)](_0x345f3c)[_0x433148(0xe3)](()=>null);return!_0x326245&&(_0x326245=await this[_0x433148(0xc4)][_0x433148(0xb0)](_0x433148(0xeb),{'Body':utils_1[_0x433148(0x103)]('{}'),'ParentId':_0x345f3c[_0x433148(0xfa)],'ContentType':_0x433148(0xd3),'Name':_0x345f3c[_0x433148(0xe0)]?constants_1[_0x433148(0xca)]:constants_1[_0x433148(0xbb)]})),_0x326245;}async[a136_0x21ec05(0xd5)](_0x173433,_0x4de5bd){const _0x13e7f2=a136_0x21ec05,_0x46068a=await this[_0x13e7f2(0xbe)](_0x173433);await this[_0x13e7f2(0xc4)]['patchObject'](_0x13e7f2(0xeb),_0x46068a,{'Body':utils_1['encodeBase64'](JSON['stringify'](_0x4de5bd))});}async[a136_0x21ec05(0xbc)](_0x3c01d3,_0x324035){const _0x1e067b=a136_0x21ec05;await this['salesforceService'][_0x1e067b(0xae)](_0x3c01d3['objectType'],_0x3c01d3[_0x1e067b(0xfa)],{[constants_1[_0x1e067b(0xa9)]+_0x1e067b(0xc5)]:_0x324035});}async[a136_0x21ec05(0xe6)](_0x5ef05f){const _0x15d0d8=a136_0x21ec05;await this[_0x15d0d8(0xc4)][_0x15d0d8(0xae)](constants_1[_0x15d0d8(0xa9)]+_0x15d0d8(0xbd),_0x5ef05f,{[constants_1[_0x15d0d8(0xa9)]+_0x15d0d8(0xba)]:![]});}};SalesforceSyncService=__decorate([typedi_1[a136_0x21ec05(0xe7)](),__metadata('design:paramtypes',[salesforce_query_service_1[a136_0x21ec05(0xdc)],salesforce_service_1[a136_0x21ec05(0xb8)]])],SalesforceSyncService),exports[a136_0x21ec05(0xcb)]=SalesforceSyncService;