function a128_0x4f16(_0x24a07d,_0x4445e3){const _0x4171d1=a128_0x29a9();return a128_0x4f16=function(_0x54c78a,_0x4a5d66){_0x54c78a=_0x54c78a-0xb1;let _0x29a98d=_0x4171d1[_0x54c78a];return _0x29a98d;},a128_0x4f16(_0x24a07d,_0x4445e3);}const a128_0x5c0912=a128_0x4f16;(function(_0x47ed72,_0x1a64a6){const _0x4d7b72=a128_0x4f16,_0x3134ca=_0x47ed72();while(!![]){try{const _0x164641=-parseInt(_0x4d7b72(0x110))/0x1+-parseInt(_0x4d7b72(0xb4))/0x2*(parseInt(_0x4d7b72(0xd4))/0x3)+parseInt(_0x4d7b72(0xd9))/0x4+parseInt(_0x4d7b72(0x10f))/0x5*(parseInt(_0x4d7b72(0xc5))/0x6)+-parseInt(_0x4d7b72(0xfa))/0x7*(parseInt(_0x4d7b72(0xff))/0x8)+-parseInt(_0x4d7b72(0xbf))/0x9*(-parseInt(_0x4d7b72(0xc8))/0xa)+-parseInt(_0x4d7b72(0xbb))/0xb*(parseInt(_0x4d7b72(0x113))/0xc);if(_0x164641===_0x1a64a6)break;else _0x3134ca['push'](_0x3134ca['shift']());}catch(_0x3c0c25){_0x3134ca['push'](_0x3134ca['shift']());}}}(a128_0x29a9,0x76ec0));const a128_0x4a5d66=(function(){let _0x4a8743=!![];return function(_0x4eba64,_0x5a2648){const _0x230875=_0x4a8743?function(){const _0x42582c=a128_0x4f16;if(_0x5a2648){const _0x36c2c9=_0x5a2648[_0x42582c(0xbd)](_0x4eba64,arguments);return _0x5a2648=null,_0x36c2c9;}}:function(){};return _0x4a8743=![],_0x230875;};}()),a128_0x54c78a=a128_0x4a5d66(this,function(){const _0x571dd6=a128_0x4f16;return a128_0x54c78a[_0x571dd6(0x117)]()[_0x571dd6(0xd7)](_0x571dd6(0xd8))[_0x571dd6(0x117)]()['constructor'](a128_0x54c78a)['search']('(((.+)+)+)+$');});a128_0x54c78a();'use strict';var __importDefault=this&&this[a128_0x5c0912(0xe2)]||function(_0x3f3e03){return _0x3f3e03&&_0x3f3e03['__esModule']?_0x3f3e03:{'default':_0x3f3e03};};function a128_0x29a9(){const _0x46e73e=['./salesforce-git-sync.service','407592ooJgeO','Changed_On__c','username','prepareComponentHistoryRecord','recordTypes','crc','4568196Nbhlgf','proceedComponentMeta','Repository','60dVreWs',']\x20-\x20meta\x20not\x20found','manifests','Repository__c','SalesforceError','application/zip','Could\x20not\x20proceed\x20component\x20','Component_Type__c','filePath','.id}','../../parsers/utils/zip','ParentId','3zhnqME','base64','proceededComponentsMeta','search','(((.+)+)+)+$','901476yBoIkL','../../../constants','Component_Name__c','componentsToDelete','reference','repositoryId','createDeleteRequest','createPostRequest','RecordTypeId','__importDefault','createZip','ContentType','Version__c','Body','File_Name__c','find','fetchCommitManifestsByComponentIds','Description','Last_Updated_By__c','default','Branch','FLOSUM_COMPONENT','branchId','componentId','../../../core','map','FLOSUM_NAMESPACE','push','Component_History__c','__esModule','Committed_On__c','insert','delete','937209Whnnxx','Is_From_Agent__c','createPatchRequest','request','prepareCommitManifest','8Ravtiz','logger','componentsToUpdate','Source__c','Zip','../errors/salesforce.error','DEFLATE','Logger','FLOSUM_ATTACHMENT','SalesforceComponentsManager','gitSync','Commit__c','generateAsync','prepareComponentRecord','typedi','prepareComponentAttachmentRecord','5cKhjNA','57479nhvZIA','type','body','7104JFTgKF','componentType','FLOSUM_COMMIT_MANIFEST','defineProperty','toString','files','CRC32__c','toISOString','Last_Modified_Date__c','update','extractFieldsFromRecord','533650sEbomv','FLOSUM_COMPONENT_HISTORY','../utils/flosum-naming.utils','name','componentName','file','getProceededComponentsMeta','5819mowCvJ','Component__c','apply'];a128_0x29a9=function(){return _0x46e73e;};return a128_0x29a9();}Object[a128_0x5c0912(0x116)](exports,a128_0x5c0912(0xf6),{'value':!![]}),exports[a128_0x5c0912(0x108)]=void 0x0;const constants_1=require(a128_0x5c0912(0xda)),core_1=require(a128_0x5c0912(0xf1)),zip_1=require(a128_0x5c0912(0xd2)),typedi_1=__importDefault(require(a128_0x5c0912(0x10d))),salesforce_error_1=require(a128_0x5c0912(0x104)),composite_utils_1=require('../utils/composite.utils'),flosum_naming_utils_1=require(a128_0x5c0912(0xb6)),salesforce_git_sync_service_1=require(a128_0x5c0912(0xbe));class SalesforceComponentsManager{constructor(_0x204e9f,_0x2844a8,_0x89ad43,_0x3c138c,_0x565bee){const _0x30a820=a128_0x5c0912;this[_0x30a820(0xde)]=_0x204e9f,this['branchId']=_0x2844a8,this[_0x30a820(0xc1)]=_0x89ad43,this[_0x30a820(0xc3)]=_0x3c138c,this[_0x30a820(0xd6)]=_0x565bee,this[_0x30a820(0x100)]=new core_1[(_0x30a820(0x106))](SalesforceComponentsManager[_0x30a820(0xb7)]),this[_0x30a820(0x109)]=typedi_1[_0x30a820(0xec)]['get'](salesforce_git_sync_service_1['SalesforceGitSyncService']);}[a128_0x5c0912(0xc6)](_0x425008,_0x8c24c4){const _0x5e27af=a128_0x5c0912,_0x2bfddb=flosum_naming_utils_1[_0x5e27af(0xb3)](_0x425008,[_0x5e27af(0xcf),_0x5e27af(0xdb),_0x5e27af(0xe5)]);this['proceededComponentsMeta'][_0x5e27af(0xf4)]({'componentId':'','reference':_0x8c24c4,'version':_0x2bfddb[_0x5e27af(0xe5)],'componentName':_0x2bfddb['Component_Name__c'],'componentType':_0x2bfddb[_0x5e27af(0xcf)]});}[a128_0x5c0912(0xfe)](_0x309249,_0x2bcf04){const _0x422888=a128_0x5c0912,{request:_0x4ee227}=composite_utils_1['createPostRequest'](constants_1[_0x422888(0x115)],{[constants_1[_0x422888(0xf3)]+_0x422888(0x10a)]:_0x309249,[constants_1['FLOSUM_NAMESPACE']+_0x422888(0xf5)]:_0x2bcf04});return _0x4ee227;}async[a128_0x5c0912(0x10e)](_0x2cd985,_0x59bcd2){const _0x33da0f=a128_0x5c0912,_0x52ab9c={},_0x325c24=zip_1[_0x33da0f(0x103)][_0x33da0f(0xe3)]();for(const _0x43dd69 of Object['keys'](_0x2cd985[_0x33da0f(0x118)])){_0x325c24[_0x33da0f(0xb9)](_0x43dd69,_0x2cd985[_0x33da0f(0x118)][_0x43dd69],{'createFolders':!![]});}return _0x52ab9c[_0x33da0f(0xe4)]=_0x33da0f(0xcd),_0x52ab9c['Name']=_0x2cd985[_0x33da0f(0x111)],_0x52ab9c[_0x33da0f(0xea)]=_0x2cd985[_0x33da0f(0x111)],_0x52ab9c[_0x33da0f(0xd3)]=_0x59bcd2,_0x52ab9c[_0x33da0f(0xe6)]=await _0x325c24[_0x33da0f(0x10b)]({'type':_0x33da0f(0xd5),'compression':_0x33da0f(0x105),'compressionOptions':{'level':0x6}}),_0x52ab9c;}['prepareComponentHistoryRecord'](_0x5bce09,_0x4ed77c,_0x30fb2d){const _0x53e8d1=a128_0x5c0912,_0x168832=new Date()[_0x53e8d1(0x11a)](),_0x5d4fd7={};return _0x5d4fd7[constants_1[_0x53e8d1(0xf3)]+_0x53e8d1(0xbc)]=_0x4ed77c,_0x5d4fd7[constants_1['FLOSUM_NAMESPACE']+_0x53e8d1(0x119)]=_0x5bce09[_0x53e8d1(0xc4)],_0x5d4fd7[constants_1[_0x53e8d1(0xf3)]+_0x53e8d1(0xc0)]=_0x168832,_0x5d4fd7[constants_1[_0x53e8d1(0xf3)]+'Changed_By__c']=this['username'],_0x5d4fd7[constants_1[_0x53e8d1(0xf3)]+_0x53e8d1(0xe5)]=_0x30fb2d?_0x30fb2d+0x1:0x1,_0x5d4fd7[constants_1['FLOSUM_GIT_NAMESPACE']+_0x53e8d1(0xfb)]=!![],_0x5d4fd7;}[a128_0x5c0912(0x10c)](_0x323336,_0x339467){const _0x3def2b=a128_0x5c0912;var _0x379f3c,_0x3028af;const _0x1bdc7a=new Date()[_0x3def2b(0x11a)](),_0x21489f={};return!_0x339467?(this[_0x3def2b(0xef)]?(_0x21489f[constants_1[_0x3def2b(0xf3)]+'Branch__c']=this[_0x3def2b(0xef)],_0x21489f[constants_1[_0x3def2b(0xf3)]+'Source__c']=_0x3def2b(0xed),_0x21489f[_0x3def2b(0xe1)]=(_0x379f3c=this[_0x3def2b(0xc3)][_0x3def2b(0xe8)](_0x47eb43=>_0x47eb43[_0x3def2b(0xb7)]===_0x3def2b(0xed)))===null||_0x379f3c===void 0x0?void 0x0:_0x379f3c['id']):(_0x21489f[constants_1['FLOSUM_NAMESPACE']+_0x3def2b(0xcb)]=this[_0x3def2b(0xde)],_0x21489f[constants_1[_0x3def2b(0xf3)]+_0x3def2b(0x102)]=_0x3def2b(0xc7),_0x21489f[_0x3def2b(0xe1)]=(_0x3028af=this[_0x3def2b(0xc3)][_0x3def2b(0xe8)](_0x24e549=>_0x24e549[_0x3def2b(0xb7)]==='Repository'))===null||_0x3028af===void 0x0?void 0x0:_0x3028af['id']),_0x21489f[constants_1['FLOSUM_NAMESPACE']+_0x3def2b(0xe5)]=0x1):_0x21489f[constants_1[_0x3def2b(0xf3)]+_0x3def2b(0xe5)]=_0x339467['version']+0x1,_0x21489f[constants_1[_0x3def2b(0xf3)]+_0x3def2b(0xcf)]=_0x323336['type'],_0x21489f[constants_1[_0x3def2b(0xf3)]+'Component_Name__c']=_0x323336[_0x3def2b(0xb7)],_0x21489f[constants_1['FLOSUM_NAMESPACE']+_0x3def2b(0xe7)]=_0x323336[_0x3def2b(0xd0)],_0x21489f[constants_1[_0x3def2b(0xf3)]+_0x3def2b(0xeb)]=this['username'],_0x21489f[constants_1[_0x3def2b(0xf3)]+'Last_Modified_By__c']=this[_0x3def2b(0xc1)],_0x21489f[constants_1[_0x3def2b(0xf3)]+_0x3def2b(0xb1)]=_0x1bdc7a,_0x21489f[constants_1[_0x3def2b(0xf3)]+_0x3def2b(0xf7)]=_0x1bdc7a,_0x21489f[constants_1[_0x3def2b(0xf3)]+'CRC32__c']=_0x323336[_0x3def2b(0xc4)],_0x21489f;}[a128_0x5c0912(0xba)](){const _0x34e4e3=a128_0x5c0912;return this[_0x34e4e3(0xd6)];}async[a128_0x5c0912(0xf8)](_0x30767d,_0x2d66ec){const _0x35a7a2=a128_0x5c0912,_0xcbd2a8=[];for(const _0x5e3f4f of _0x30767d){const _0x3382d3=composite_utils_1['createPostRequest'](constants_1[_0x35a7a2(0xee)],this[_0x35a7a2(0x10c)](_0x5e3f4f)),_0x3ee0af=composite_utils_1[_0x35a7a2(0xe0)](constants_1[_0x35a7a2(0xb5)],this[_0x35a7a2(0xc2)](_0x5e3f4f,'@{'+_0x3382d3[_0x35a7a2(0xdd)]+_0x35a7a2(0xd1))),_0x36f9a9=composite_utils_1[_0x35a7a2(0xe0)](constants_1[_0x35a7a2(0x107)],await this[_0x35a7a2(0x10e)](_0x5e3f4f,'@{'+_0x3ee0af[_0x35a7a2(0xdd)]+_0x35a7a2(0xd1)));this[_0x35a7a2(0xc6)](_0x3382d3['request'][_0x35a7a2(0x112)],_0x3382d3[_0x35a7a2(0xdd)]),_0xcbd2a8[_0x35a7a2(0xf4)](_0x3382d3[_0x35a7a2(0xfd)],_0x3ee0af[_0x35a7a2(0xfd)],_0x36f9a9[_0x35a7a2(0xfd)]),_0x2d66ec&&_0xcbd2a8[_0x35a7a2(0xf4)](this[_0x35a7a2(0xfe)](_0x2d66ec,'@{'+_0x3ee0af[_0x35a7a2(0xdd)]+_0x35a7a2(0xd1)));}return _0xcbd2a8;}async[a128_0x5c0912(0xb2)](_0x2ae6d4,_0x389c25=''){const _0x135d9d=a128_0x5c0912,_0x55de4e=[];for(const {component:_0x80869e,meta:_0x2a915e}of _0x2ae6d4){if(!_0x2a915e['id']){const _0xbf5c2=this[_0x135d9d(0xd6)][_0x135d9d(0xe8)](_0x1f3aa5=>_0x1f3aa5['componentName']===_0x80869e[_0x135d9d(0xb7)]&&_0x1f3aa5[_0x135d9d(0x114)]===_0x80869e[_0x135d9d(0x111)]);if(!_0xbf5c2)throw new salesforce_error_1[(_0x135d9d(0xcc))](new Error(_0x135d9d(0xce)+_0x80869e[_0x135d9d(0xb7)]+'\x20['+_0x80869e[_0x135d9d(0x111)]+_0x135d9d(0xc9)));_0x2a915e['id']=_0xbf5c2[_0x135d9d(0xf0)];}const _0x117b1d=composite_utils_1[_0x135d9d(0xfc)](constants_1['FLOSUM_COMPONENT'],_0x2a915e['id'],this['prepareComponentRecord'](_0x80869e,_0x2a915e)),_0xd76277=composite_utils_1[_0x135d9d(0xe0)](constants_1[_0x135d9d(0xb5)],this[_0x135d9d(0xc2)](_0x80869e,_0x2a915e['id'],_0x2a915e['version'])),_0x11cf91=composite_utils_1['createPostRequest'](constants_1[_0x135d9d(0x107)],await this[_0x135d9d(0x10e)](_0x80869e,'@{'+_0xd76277[_0x135d9d(0xdd)]+_0x135d9d(0xd1)));this[_0x135d9d(0xc6)](_0x117b1d['request']['body'],_0x117b1d['reference']),_0x55de4e[_0x135d9d(0xf4)](_0x117b1d[_0x135d9d(0xfd)],_0xd76277[_0x135d9d(0xfd)],_0x11cf91[_0x135d9d(0xfd)]),_0x389c25&&_0x55de4e['push'](this[_0x135d9d(0xfe)](_0x389c25,'@{'+_0xd76277[_0x135d9d(0xdd)]+_0x135d9d(0xd1)));}return _0x55de4e;}async[a128_0x5c0912(0xf9)](_0x52b68d,_0x525313=![]){const _0x289f69=a128_0x5c0912,_0x2d6604={'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]},_0x1b5dd5=[];for(const _0x437e54 of _0x52b68d){if(_0x437e54['id'])_0x1b5dd5[_0x289f69(0xf4)](_0x437e54['id']);else{const _0x206e12=this[_0x289f69(0xd6)][_0x289f69(0xe8)](_0x16d442=>_0x16d442[_0x289f69(0xb8)]===_0x437e54[_0x289f69(0xb7)]&&_0x16d442[_0x289f69(0x114)]===_0x437e54['type']);if(!_0x206e12||!_0x206e12['componentId'])continue;_0x1b5dd5['push'](_0x206e12[_0x289f69(0xf0)]);}}if(_0x525313){const _0x284047=await this[_0x289f69(0x109)][_0x289f69(0xe9)](_0x1b5dd5);_0x2d6604[_0x289f69(0xca)]=_0x284047['map'](_0x3f0081=>composite_utils_1['createDeleteRequest'](constants_1[_0x289f69(0x115)],_0x3f0081)[_0x289f69(0xfd)]);}return _0x2d6604[_0x289f69(0x101)]=_0x1b5dd5[_0x289f69(0xf2)](_0x2b884f=>composite_utils_1[_0x289f69(0xfc)](constants_1['FLOSUM_COMPONENT'],_0x2b884f,{[constants_1['FLOSUM_GIT_NAMESPACE']+'Deletion_By_Agent__c']:!![]})[_0x289f69(0xfd)]),_0x2d6604[_0x289f69(0xdc)]=_0x1b5dd5[_0x289f69(0xf2)](_0x415ca0=>composite_utils_1[_0x289f69(0xdf)](constants_1['FLOSUM_COMPONENT'],_0x415ca0)[_0x289f69(0xfd)]),_0x2d6604;}}exports[a128_0x5c0912(0x108)]=SalesforceComponentsManager;