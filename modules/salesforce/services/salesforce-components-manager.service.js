function a127_0x25d3(){const _0x4978e8=['version','filePath','../utils/flosum-naming.utils','push','../errors/salesforce.error','createZip','insert','defineProperty','865165kcZpyi','getProceededComponentsMeta','DEFLATE','createPostRequest','Changed_On__c','Commit__c','componentName','constructor','typedi','../../parsers/utils/zip','type','1177iBRvRm','Version__c','Zip','Logger','toISOString','prepareCommitManifest','FLOSUM_COMPONENT_HISTORY','createPatchRequest','FLOSUM_GIT_NAMESPACE','reference','Description','(((.+)+)+)+$','6HcNvdk','repositoryId','Could\x20not\x20proceed\x20component\x20','4065DcGnsH','Is_From_Agent__c','Component_Type__c','__importDefault','Committed_On__c','prepareComponentHistoryRecord','recordTypes','logger','find','FLOSUM_ATTACHMENT','File_Name__c','Repository__c','Component_Name__c','../utils/composite.utils','crc','1220dRaEVy','username','request','file','Component__c','prepareComponentAttachmentRecord','gitSync','123505CxEqeO','CRC32__c','proceedComponentMeta','SalesforceError','__esModule','files','SalesforceGitSyncService','SalesforceComponentsManager','128920CnifTG','Changed_By__c','FLOSUM_COMMIT_MANIFEST','generateAsync','toString','map','componentType','update','search','FLOSUM_NAMESPACE','107757TOdrts',']\x20-\x20meta\x20not\x20found','./salesforce-git-sync.service','../../../constants','branchId','extractFieldsFromRecord','apply','../../../core','proceededComponentsMeta','.id}','componentId','RecordTypeId','Branch','Body','Source__c','default','3765321kUifjQ','849472uoSKsg','prepareComponentRecord','name','get','344tiGPxa','application/zip','fetchCommitManifestsByComponentIds','Name','FLOSUM_COMPONENT','keys'];a127_0x25d3=function(){return _0x4978e8;};return a127_0x25d3();}const a127_0x43e4ba=a127_0xf41c;function a127_0xf41c(_0x17c6c8,_0x3331ea){const _0x35d965=a127_0x25d3();return a127_0xf41c=function(_0x8b39d2,_0x548790){_0x8b39d2=_0x8b39d2-0x116;let _0x25d32d=_0x35d965[_0x8b39d2];return _0x25d32d;},a127_0xf41c(_0x17c6c8,_0x3331ea);}(function(_0x110661,_0x18bb10){const _0x232964=a127_0xf41c,_0x4e2748=_0x110661();while(!![]){try{const _0x19f8f4=parseInt(_0x232964(0x14b))/0x1+parseInt(_0x232964(0x16e))/0x2+-parseInt(_0x232964(0x135))/0x3*(parseInt(_0x232964(0x144))/0x4)+parseInt(_0x232964(0x11b))/0x5*(-parseInt(_0x232964(0x132))/0x6)+-parseInt(_0x232964(0x16d))/0x7+-parseInt(_0x232964(0x172))/0x8*(parseInt(_0x232964(0x15d))/0x9)+parseInt(_0x232964(0x153))/0xa*(parseInt(_0x232964(0x126))/0xb);if(_0x19f8f4===_0x18bb10)break;else _0x4e2748['push'](_0x4e2748['shift']());}catch(_0x286ae9){_0x4e2748['push'](_0x4e2748['shift']());}}}(a127_0x25d3,0x4677b));const a127_0x548790=(function(){let _0x46f923=!![];return function(_0x52a00c,_0x35a6ec){const _0x237cec=_0x46f923?function(){const _0x3a87fc=a127_0xf41c;if(_0x35a6ec){const _0x3c50c2=_0x35a6ec[_0x3a87fc(0x163)](_0x52a00c,arguments);return _0x35a6ec=null,_0x3c50c2;}}:function(){};return _0x46f923=![],_0x237cec;};}()),a127_0x8b39d2=a127_0x548790(this,function(){const _0x56c501=a127_0xf41c;return a127_0x8b39d2[_0x56c501(0x157)]()['search'](_0x56c501(0x131))['toString']()[_0x56c501(0x122)](a127_0x8b39d2)[_0x56c501(0x15b)](_0x56c501(0x131));});a127_0x8b39d2();'use strict';var __importDefault=this&&this[a127_0x43e4ba(0x138)]||function(_0x18c838){const _0x541bbd=a127_0x43e4ba;return _0x18c838&&_0x18c838[_0x541bbd(0x14f)]?_0x18c838:{'default':_0x18c838};};Object[a127_0x43e4ba(0x11a)](exports,a127_0x43e4ba(0x14f),{'value':!![]}),exports['SalesforceComponentsManager']=void 0x0;const constants_1=require(a127_0x43e4ba(0x160)),core_1=require(a127_0x43e4ba(0x164)),zip_1=require(a127_0x43e4ba(0x124)),typedi_1=__importDefault(require(a127_0x43e4ba(0x123))),salesforce_error_1=require(a127_0x43e4ba(0x117)),composite_utils_1=require(a127_0x43e4ba(0x142)),flosum_naming_utils_1=require(a127_0x43e4ba(0x17a)),salesforce_git_sync_service_1=require(a127_0x43e4ba(0x15f));class SalesforceComponentsManager{constructor(_0x5555c0,_0x122f10,_0x3e1361,_0x1f5262,_0x572fbb){const _0xc0632d=a127_0x43e4ba;this['repositoryId']=_0x5555c0,this[_0xc0632d(0x161)]=_0x122f10,this[_0xc0632d(0x145)]=_0x3e1361,this[_0xc0632d(0x13b)]=_0x1f5262,this[_0xc0632d(0x165)]=_0x572fbb,this[_0xc0632d(0x13c)]=new core_1[(_0xc0632d(0x129))](SalesforceComponentsManager[_0xc0632d(0x170)]),this[_0xc0632d(0x14a)]=typedi_1[_0xc0632d(0x16c)][_0xc0632d(0x171)](salesforce_git_sync_service_1[_0xc0632d(0x151)]);}[a127_0x43e4ba(0x14d)](_0x267f89,_0x445397){const _0x549f0c=a127_0x43e4ba,_0x20b7a2=flosum_naming_utils_1[_0x549f0c(0x162)](_0x267f89,['Component_Type__c','Component_Name__c',_0x549f0c(0x127)]);this[_0x549f0c(0x165)][_0x549f0c(0x116)]({'componentId':'','reference':_0x445397,'version':_0x20b7a2[_0x549f0c(0x127)],'componentName':_0x20b7a2[_0x549f0c(0x141)],'componentType':_0x20b7a2[_0x549f0c(0x137)]});}['prepareCommitManifest'](_0x21f595,_0x490823){const _0x4afc75=a127_0x43e4ba,{request:_0x239d4f}=composite_utils_1[_0x4afc75(0x11e)](constants_1[_0x4afc75(0x155)],{[constants_1[_0x4afc75(0x15c)]+_0x4afc75(0x120)]:_0x21f595,[constants_1['FLOSUM_NAMESPACE']+'Component_History__c']:_0x490823});return _0x239d4f;}async[a127_0x43e4ba(0x149)](_0x2238e6,_0x1d1bd4){const _0x2bba3a=a127_0x43e4ba,_0x33c085={},_0x2848a4=zip_1[_0x2bba3a(0x128)][_0x2bba3a(0x118)]();for(const _0x61ed4b of Object[_0x2bba3a(0x177)](_0x2238e6['files'])){_0x2848a4[_0x2bba3a(0x147)](_0x61ed4b,_0x2238e6[_0x2bba3a(0x150)][_0x61ed4b],{'createFolders':!![]});}return _0x33c085['ContentType']=_0x2bba3a(0x173),_0x33c085[_0x2bba3a(0x175)]=_0x2238e6['type'],_0x33c085[_0x2bba3a(0x130)]=_0x2238e6[_0x2bba3a(0x125)],_0x33c085['ParentId']=_0x1d1bd4,_0x33c085[_0x2bba3a(0x16a)]=await _0x2848a4[_0x2bba3a(0x156)]({'type':'base64','compression':_0x2bba3a(0x11d),'compressionOptions':{'level':0x6}}),_0x33c085;}[a127_0x43e4ba(0x13a)](_0xc06e0b,_0x4fb3cb,_0x4276d7){const _0x388e98=a127_0x43e4ba,_0x4954d8=new Date()[_0x388e98(0x12a)](),_0x3ca187={};return _0x3ca187[constants_1['FLOSUM_NAMESPACE']+_0x388e98(0x148)]=_0x4fb3cb,_0x3ca187[constants_1['FLOSUM_NAMESPACE']+'CRC32__c']=_0xc06e0b[_0x388e98(0x143)],_0x3ca187[constants_1[_0x388e98(0x15c)]+_0x388e98(0x11f)]=_0x4954d8,_0x3ca187[constants_1['FLOSUM_NAMESPACE']+_0x388e98(0x154)]=this[_0x388e98(0x145)],_0x3ca187[constants_1[_0x388e98(0x15c)]+_0x388e98(0x127)]=_0x4276d7?_0x4276d7+0x1:0x1,_0x3ca187[constants_1[_0x388e98(0x12e)]+_0x388e98(0x136)]=!![],_0x3ca187;}[a127_0x43e4ba(0x16f)](_0x160708,_0x293ee3){const _0x3768d8=a127_0x43e4ba;var _0x1d37e1,_0x25a930;const _0x184de4=new Date()['toISOString'](),_0x28567a={};return!_0x293ee3?(this['branchId']?(_0x28567a[constants_1[_0x3768d8(0x15c)]+'Branch__c']=this['branchId'],_0x28567a[constants_1['FLOSUM_NAMESPACE']+_0x3768d8(0x16b)]=_0x3768d8(0x169),_0x28567a[_0x3768d8(0x168)]=(_0x1d37e1=this[_0x3768d8(0x13b)][_0x3768d8(0x13d)](_0x3a8b11=>_0x3a8b11['name']===_0x3768d8(0x169)))===null||_0x1d37e1===void 0x0?void 0x0:_0x1d37e1['id']):(_0x28567a[constants_1[_0x3768d8(0x15c)]+_0x3768d8(0x140)]=this[_0x3768d8(0x133)],_0x28567a[constants_1[_0x3768d8(0x15c)]+_0x3768d8(0x16b)]='Repository',_0x28567a[_0x3768d8(0x168)]=(_0x25a930=this['recordTypes'][_0x3768d8(0x13d)](_0x3eaa7d=>_0x3eaa7d[_0x3768d8(0x170)]==='Repository'))===null||_0x25a930===void 0x0?void 0x0:_0x25a930['id']),_0x28567a[constants_1['FLOSUM_NAMESPACE']+_0x3768d8(0x127)]=0x1):_0x28567a[constants_1[_0x3768d8(0x15c)]+_0x3768d8(0x127)]=_0x293ee3[_0x3768d8(0x178)]+0x1,_0x28567a[constants_1[_0x3768d8(0x15c)]+'Component_Type__c']=_0x160708[_0x3768d8(0x125)],_0x28567a[constants_1[_0x3768d8(0x15c)]+_0x3768d8(0x141)]=_0x160708[_0x3768d8(0x170)],_0x28567a[constants_1[_0x3768d8(0x15c)]+_0x3768d8(0x13f)]=_0x160708[_0x3768d8(0x179)],_0x28567a[constants_1[_0x3768d8(0x15c)]+'Last_Updated_By__c']=this[_0x3768d8(0x145)],_0x28567a[constants_1[_0x3768d8(0x15c)]+'Last_Modified_By__c']=this[_0x3768d8(0x145)],_0x28567a[constants_1[_0x3768d8(0x15c)]+'Last_Modified_Date__c']=_0x184de4,_0x28567a[constants_1[_0x3768d8(0x15c)]+_0x3768d8(0x139)]=_0x184de4,_0x28567a[constants_1[_0x3768d8(0x15c)]+_0x3768d8(0x14c)]=_0x160708['crc'],_0x28567a;}[a127_0x43e4ba(0x11c)](){const _0x2094cf=a127_0x43e4ba;return this[_0x2094cf(0x165)];}async[a127_0x43e4ba(0x119)](_0x2a68b2,_0x2f5d63=''){const _0x301a8c=a127_0x43e4ba,_0x599eaa=[];for(const _0x10c6bf of _0x2a68b2){const _0x5ef70b=composite_utils_1[_0x301a8c(0x11e)](constants_1[_0x301a8c(0x176)],this[_0x301a8c(0x16f)](_0x10c6bf)),_0x4428de=composite_utils_1['createPostRequest'](constants_1[_0x301a8c(0x12c)],this['prepareComponentHistoryRecord'](_0x10c6bf,'@{'+_0x5ef70b[_0x301a8c(0x12f)]+_0x301a8c(0x166))),_0x5bb8a3=composite_utils_1[_0x301a8c(0x11e)](constants_1[_0x301a8c(0x13e)],await this[_0x301a8c(0x149)](_0x10c6bf,'@{'+_0x4428de[_0x301a8c(0x12f)]+'.id}'));this[_0x301a8c(0x14d)](_0x5ef70b[_0x301a8c(0x146)]['body'],_0x5ef70b[_0x301a8c(0x12f)]),_0x599eaa[_0x301a8c(0x116)](_0x5ef70b[_0x301a8c(0x146)],_0x4428de[_0x301a8c(0x146)],_0x5bb8a3['request']),_0x2f5d63&&_0x599eaa[_0x301a8c(0x116)](this[_0x301a8c(0x12b)](_0x2f5d63,'@{'+_0x4428de[_0x301a8c(0x12f)]+_0x301a8c(0x166)));}return _0x599eaa;}async[a127_0x43e4ba(0x15a)](_0x40862e,_0x5a3006=''){const _0x2a7529=a127_0x43e4ba,_0x120078=[];for(const {component:_0x56e15a,meta:_0x1def77}of _0x40862e){if(!_0x1def77['id']){const _0x2652d2=this['proceededComponentsMeta']['find'](_0x52f843=>_0x52f843[_0x2a7529(0x121)]===_0x56e15a[_0x2a7529(0x170)]&&_0x52f843['componentType']===_0x56e15a[_0x2a7529(0x125)]);if(!_0x2652d2)throw new salesforce_error_1[(_0x2a7529(0x14e))](new Error(_0x2a7529(0x134)+_0x56e15a[_0x2a7529(0x170)]+'\x20['+_0x56e15a[_0x2a7529(0x125)]+_0x2a7529(0x15e)));_0x1def77['id']=_0x2652d2[_0x2a7529(0x167)];}const _0x2fb30e=composite_utils_1[_0x2a7529(0x12d)](constants_1[_0x2a7529(0x176)],_0x1def77['id'],this[_0x2a7529(0x16f)](_0x56e15a,_0x1def77)),_0x278a56=composite_utils_1[_0x2a7529(0x11e)](constants_1['FLOSUM_COMPONENT_HISTORY'],this[_0x2a7529(0x13a)](_0x56e15a,_0x1def77['id'],_0x1def77[_0x2a7529(0x178)])),_0x5a8d2e=composite_utils_1[_0x2a7529(0x11e)](constants_1[_0x2a7529(0x13e)],await this['prepareComponentAttachmentRecord'](_0x56e15a,'@{'+_0x278a56[_0x2a7529(0x12f)]+'.id}'));this[_0x2a7529(0x14d)](_0x2fb30e[_0x2a7529(0x146)]['body'],_0x2fb30e[_0x2a7529(0x12f)]),_0x120078[_0x2a7529(0x116)](_0x2fb30e[_0x2a7529(0x146)],_0x278a56['request'],_0x5a8d2e[_0x2a7529(0x146)]),_0x5a3006&&_0x120078['push'](this['prepareCommitManifest'](_0x5a3006,'@{'+_0x278a56[_0x2a7529(0x12f)]+_0x2a7529(0x166)));}return _0x120078;}async['delete'](_0x51824b,_0x46112f=![]){const _0x4d1458=a127_0x43e4ba,_0x52c996={'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]},_0x11515e=[];for(const _0x9d70bb of _0x51824b){if(_0x9d70bb[_0x4d1458(0x167)])_0x11515e['push'](_0x9d70bb[_0x4d1458(0x167)]);else{const _0x1c1b8f=this[_0x4d1458(0x165)][_0x4d1458(0x13d)](_0x171956=>_0x171956[_0x4d1458(0x121)]===_0x9d70bb['componentName']&&_0x171956[_0x4d1458(0x159)]===_0x9d70bb[_0x4d1458(0x159)]);if(!_0x1c1b8f||!_0x1c1b8f[_0x4d1458(0x167)])continue;_0x11515e['push'](_0x1c1b8f[_0x4d1458(0x167)]);}}if(_0x46112f){const _0x14778d=await this[_0x4d1458(0x14a)][_0x4d1458(0x174)](_0x11515e);_0x52c996['manifests']=_0x14778d[_0x4d1458(0x158)](_0x56821c=>composite_utils_1['createDeleteRequest'](constants_1[_0x4d1458(0x155)],_0x56821c)['request']);}return _0x52c996['componentsToUpdate']=_0x11515e['map'](_0x29bc5f=>composite_utils_1[_0x4d1458(0x12d)](constants_1['FLOSUM_COMPONENT'],_0x29bc5f,{[constants_1[_0x4d1458(0x12e)]+'Deletion_By_Agent__c']:!![]})['request']),_0x52c996['componentsToDelete']=_0x11515e[_0x4d1458(0x158)](_0x220101=>composite_utils_1['createDeleteRequest'](constants_1['FLOSUM_COMPONENT'],_0x220101)['request']),_0x52c996;}}exports[a127_0x43e4ba(0x152)]=SalesforceComponentsManager;