const a287_0x2b132=a287_0x3b10;(function(_0x4ebc27,_0xb6731b){const _0x4ebb38=a287_0x3b10,_0x34f708=_0x4ebc27();while(!![]){try{const _0x1149ba=-parseInt(_0x4ebb38(0x18a))/0x1+-parseInt(_0x4ebb38(0x17c))/0x2+-parseInt(_0x4ebb38(0x195))/0x3+-parseInt(_0x4ebb38(0x17a))/0x4+parseInt(_0x4ebb38(0x181))/0x5*(parseInt(_0x4ebb38(0x174))/0x6)+parseInt(_0x4ebb38(0x183))/0x7+parseInt(_0x4ebb38(0x173))/0x8;if(_0x1149ba===_0xb6731b)break;else _0x34f708['push'](_0x34f708['shift']());}catch(_0x2a7d){_0x34f708['push'](_0x34f708['shift']());}}}(a287_0x2103,0x2605d));function a287_0x2103(){const _0x1855fe=['constructor','ParentId','195302jaTAfY','chunkArray','__esModule','\x27,\x27','/retrieveAttachments/','/body','BodyLength','fetchAttachmentsDetailsById','(((.+)+)+)+$','/sobjects/Attachment/','fetchAttachmentBody','401475pgnpau','fetchAttachments','\x20IN\x20(','push','base64','3375704djLyEG','510OIvudN','arraybuffer','post','/services/apexrest','retrieveAttachments','SALESFORCE_API_VERSION','705160pwLpVI','get','334204loqvDn','namespace','fetchAttachmentsDetailsByParentId','join','records','14380XuLCQx','toString','1132859SGAHpG','./index','../../functions/utils/salesforce-request','length','Body'];a287_0x2103=function(){return _0x1855fe;};return a287_0x2103();}const a287_0x563282=(function(){let _0x5f0d99=!![];return function(_0xa069f5,_0x546f62){const _0x560ff7=_0x5f0d99?function(){if(_0x546f62){const _0x34ad16=_0x546f62['apply'](_0xa069f5,arguments);return _0x546f62=null,_0x34ad16;}}:function(){};return _0x5f0d99=![],_0x560ff7;};}()),a287_0x4c0a72=a287_0x563282(this,function(){const _0x2a2d10=a287_0x3b10;return a287_0x4c0a72[_0x2a2d10(0x182)]()['search'](_0x2a2d10(0x192))[_0x2a2d10(0x182)]()[_0x2a2d10(0x188)](a287_0x4c0a72)['search']('(((.+)+)+)+$');});a287_0x4c0a72();'use strict';Object['defineProperty'](exports,a287_0x2b132(0x18c),{'value':!![]}),exports[a287_0x2b132(0x196)]=exports[a287_0x2b132(0x194)]=exports[a287_0x2b132(0x17e)]=exports[a287_0x2b132(0x191)]=exports['retrieveAttachments']=void 0x0;const index_1=require(a287_0x2b132(0x184)),constants_1=require('../../../constants'),salesforce_request_1=require(a287_0x2b132(0x185)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a287_0x2b132(0x187)],FIELD_PARENT_ID=a287_0x2b132(0x189),FIELD_ID='Id';async function retrieveAttachments(_0x307292,_0x137f43){const _0x33435e=a287_0x2b132;let _0x332878=0x0,_0x59d119=0x0,_0x4b5f05=[];const _0x49d8bb=[];for(const _0xb6a71a of _0x307292){if(_0xb6a71a['BodyLength']>REST_ATTACHMENT_MAX_SIZE){const _0x5eb09a=await fetchAttachmentBody(_0x137f43,_0xb6a71a['Id']);_0x49d8bb[_0x33435e(0x198)]({'id':_0xb6a71a['Id'],'values':{'Body':_0x5eb09a[_0x33435e(0x182)](_0x33435e(0x172))}});continue;}if(_0xb6a71a[_0x33435e(0x190)]+_0x332878>REST_ATTACHMENT_MAX_SIZE||_0x59d119+0x1>=REST_ATTACHMENT_COUNT){const _0x495a82=await fetchAttachments(_0x137f43,BINARY_FIELDS,_0x4b5f05);_0x49d8bb[_0x33435e(0x198)](..._0x495a82),_0x4b5f05=[],_0x332878=0x0,_0x59d119=0x0;}_0x4b5f05[_0x33435e(0x198)](_0xb6a71a['Id']),_0x332878+=_0xb6a71a['BodyLength'],_0x59d119++;}if(_0x4b5f05[_0x33435e(0x186)]){const _0x144636=await fetchAttachments(_0x137f43,BINARY_FIELDS,_0x4b5f05);_0x49d8bb[_0x33435e(0x198)](..._0x144636);}return _0x49d8bb;}exports[a287_0x2b132(0x178)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0x17dbd3,_0x29fb35){return fetchAttachmentsDetails(_0x17dbd3,FIELD_ID,_0x29fb35);}exports['fetchAttachmentsDetailsById']=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x4e06f7,_0x5248ce){return fetchAttachmentsDetails(_0x4e06f7,FIELD_PARENT_ID,_0x5248ce);}exports['fetchAttachmentsDetailsByParentId']=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x15cc05,_0x425602,_0x3bface){const _0x2c3563=a287_0x2b132,_0x317bc5=[],_0x2736ed=(0x0,index_1[_0x2c3563(0x18b)])(_0x3bface,CHUNK_QUERY_SIZE);for(const _0xe7999a of _0x2736ed){const _0x3e7cc6='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20'+_0x425602+_0x2c3563(0x197)+('\x27'+_0xe7999a[_0x2c3563(0x17f)](_0x2c3563(0x18d))+'\x27')+')',{data:_0x175244}=await _0x15cc05['get']('/services/data/'+constants_1['SALESFORCE_API_VERSION']+'/query/',{'params':{'q':_0x3e7cc6}});_0x317bc5['push'](..._0x175244[_0x2c3563(0x180)]);}return _0x317bc5;}async function fetchAttachmentBody(_0x53b94f,_0x11b42d){const _0x5010ae=a287_0x2b132,{data:_0x2b0bfd}=await _0x53b94f[_0x5010ae(0x17b)]('/services/data/'+constants_1[_0x5010ae(0x179)]+_0x5010ae(0x193)+_0x11b42d+_0x5010ae(0x18f),{'responseType':_0x5010ae(0x175)});return _0x2b0bfd;}function a287_0x3b10(_0x7bf18c,_0x39b433){const _0x2ba11d=a287_0x2103();return a287_0x3b10=function(_0x4c0a72,_0x563282){_0x4c0a72=_0x4c0a72-0x172;let _0x21036c=_0x2ba11d[_0x4c0a72];return _0x21036c;},a287_0x3b10(_0x7bf18c,_0x39b433);}exports[a287_0x2b132(0x194)]=fetchAttachmentBody;async function fetchAttachments(_0x25defd,_0x12d383,_0x2f8ad7){const _0x4f2608=a287_0x2b132,{data:_0x31d940}=await _0x25defd[_0x4f2608(0x176)](_0x4f2608(0x177)+salesforce_request_1[_0x4f2608(0x17d)]+_0x4f2608(0x18e),{'objectName':'Attachment','binaryFields':_0x12d383,'recordIds':_0x2f8ad7});return _0x31d940;}exports[a287_0x2b132(0x196)]=fetchAttachments;