const a287_0x1c52a6=a287_0xa8cb;(function(_0x1e1ede,_0x1f652e){const _0x5d8294=a287_0xa8cb,_0x4ae7c9=_0x1e1ede();while(!![]){try{const _0x51bdf4=-parseInt(_0x5d8294(0xe6))/0x1+parseInt(_0x5d8294(0xc7))/0x2+-parseInt(_0x5d8294(0xea))/0x3+parseInt(_0x5d8294(0xdf))/0x4+parseInt(_0x5d8294(0xdc))/0x5+-parseInt(_0x5d8294(0xd3))/0x6*(parseInt(_0x5d8294(0xcd))/0x7)+parseInt(_0x5d8294(0xe2))/0x8;if(_0x51bdf4===_0x1f652e)break;else _0x4ae7c9['push'](_0x4ae7c9['shift']());}catch(_0x5a02ab){_0x4ae7c9['push'](_0x4ae7c9['shift']());}}}(a287_0x5387,0xd2020));const a287_0x416c0c=(function(){let _0x53d276=!![];return function(_0x33a374,_0x51aedc){const _0x2a0421=_0x53d276?function(){const _0x89a61f=a287_0xa8cb;if(_0x51aedc){const _0x1df966=_0x51aedc[_0x89a61f(0xe1)](_0x33a374,arguments);return _0x51aedc=null,_0x1df966;}}:function(){};return _0x53d276=![],_0x2a0421;};}()),a287_0x3d40e4=a287_0x416c0c(this,function(){const _0x549f2a=a287_0xa8cb;return a287_0x3d40e4['toString']()[_0x549f2a(0xe9)](_0x549f2a(0xec))[_0x549f2a(0xd2)]()[_0x549f2a(0xcc)](a287_0x3d40e4)[_0x549f2a(0xe9)](_0x549f2a(0xec));});a287_0x3d40e4();'use strict';Object[a287_0x1c52a6(0xde)](exports,a287_0x1c52a6(0xd4),{'value':!![]}),exports[a287_0x1c52a6(0xc5)]=exports[a287_0x1c52a6(0xe5)]=exports[a287_0x1c52a6(0xe4)]=exports['fetchAttachmentsDetailsById']=exports[a287_0x1c52a6(0xd5)]=void 0x0;const index_1=require('./index'),constants_1=require(a287_0x1c52a6(0xd9)),salesforce_request_1=require(a287_0x1c52a6(0xd1)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a287_0x1c52a6(0xda)],FIELD_PARENT_ID=a287_0x1c52a6(0xe7),FIELD_ID='Id';async function retrieveAttachments(_0x166dd6,_0xb0d0c2){const _0x3a4ba1=a287_0x1c52a6;let _0x2f027a=0x0,_0x2aa286=0x0,_0x14bcbe=[];const _0x485fc2=[];for(const _0x261f36 of _0x166dd6){if(_0x261f36[_0x3a4ba1(0xcf)]>REST_ATTACHMENT_MAX_SIZE){const _0x5e8605=await fetchAttachmentBody(_0xb0d0c2,_0x261f36['Id']);_0x485fc2[_0x3a4ba1(0xd6)]({'id':_0x261f36['Id'],'values':{'Body':_0x5e8605[_0x3a4ba1(0xd2)](_0x3a4ba1(0xce))}});continue;}if(_0x261f36[_0x3a4ba1(0xcf)]+_0x2f027a>REST_ATTACHMENT_MAX_SIZE||_0x2aa286+0x1>=REST_ATTACHMENT_COUNT){const _0x269ada=await fetchAttachments(_0xb0d0c2,BINARY_FIELDS,_0x14bcbe);_0x485fc2[_0x3a4ba1(0xd6)](..._0x269ada),_0x14bcbe=[],_0x2f027a=0x0,_0x2aa286=0x0;}_0x14bcbe[_0x3a4ba1(0xd6)](_0x261f36['Id']),_0x2f027a+=_0x261f36['BodyLength'],_0x2aa286++;}if(_0x14bcbe[_0x3a4ba1(0xeb)]){const _0x1b9578=await fetchAttachments(_0xb0d0c2,BINARY_FIELDS,_0x14bcbe);_0x485fc2[_0x3a4ba1(0xd6)](..._0x1b9578);}return _0x485fc2;}exports[a287_0x1c52a6(0xd5)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0x6540f,_0x166237){return fetchAttachmentsDetails(_0x6540f,FIELD_ID,_0x166237);}function a287_0xa8cb(_0x284982,_0x5e4be9){const _0x5df98e=a287_0x5387();return a287_0xa8cb=function(_0x3d40e4,_0x416c0c){_0x3d40e4=_0x3d40e4-0xc4;let _0x538709=_0x5df98e[_0x3d40e4];return _0x538709;},a287_0xa8cb(_0x284982,_0x5e4be9);}exports['fetchAttachmentsDetailsById']=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x2bc5d7,_0x59811b){return fetchAttachmentsDetails(_0x2bc5d7,FIELD_PARENT_ID,_0x59811b);}exports['fetchAttachmentsDetailsByParentId']=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x34e29b,_0x4818bc,_0x28c771){const _0x24f82c=a287_0x1c52a6,_0x4ac081=[],_0xf59b8=(0x0,index_1[_0x24f82c(0xcb)])(_0x28c771,CHUNK_QUERY_SIZE);for(const _0x2416ac of _0xf59b8){const _0x8d19df=_0x24f82c(0xe8)+_0x4818bc+_0x24f82c(0xee)+('\x27'+_0x2416ac[_0x24f82c(0xc6)](_0x24f82c(0xd0))+'\x27')+')',{data:_0x20b35a}=await _0x34e29b[_0x24f82c(0xdd)](_0x24f82c(0xd8)+constants_1[_0x24f82c(0xef)]+_0x24f82c(0xe3),{'params':{'q':_0x8d19df}});_0x4ac081[_0x24f82c(0xd6)](..._0x20b35a[_0x24f82c(0xc4)]);}return _0x4ac081;}async function fetchAttachmentBody(_0x4d0712,_0x121499){const _0x1f7e07=a287_0x1c52a6,{data:_0x3899df}=await _0x4d0712[_0x1f7e07(0xdd)]('/services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x1f7e07(0xc8)+_0x121499+_0x1f7e07(0xdb),{'responseType':_0x1f7e07(0xd7)});return _0x3899df;}exports[a287_0x1c52a6(0xe5)]=fetchAttachmentBody;async function fetchAttachments(_0x2ab8db,_0x40644b,_0x10f5df){const _0x29f2a4=a287_0x1c52a6,{data:_0x2552ec}=await _0x2ab8db[_0x29f2a4(0xf0)](_0x29f2a4(0xed)+salesforce_request_1[_0x29f2a4(0xe0)]+_0x29f2a4(0xca),{'objectName':_0x29f2a4(0xc9),'binaryFields':_0x40644b,'recordIds':_0x10f5df});return _0x2552ec;}function a287_0x5387(){const _0x5f1ca1=['retrieveAttachments','push','arraybuffer','/services/data/','../../../constants','Body','/body','426795DrFQiv','get','defineProperty','5786328uaXhcO','namespace','apply','11075752QBYQPP','/query/','fetchAttachmentsDetailsByParentId','fetchAttachmentBody','596314qcEHnB','ParentId','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','search','2463936uFPsUe','length','(((.+)+)+)+$','/services/apexrest','\x20IN\x20(','SALESFORCE_API_VERSION','post','records','fetchAttachments','join','345926SfvFQp','/sobjects/Attachment/','Attachment','/retrieveAttachments/','chunkArray','constructor','246995zGwKyN','base64','BodyLength','\x27,\x27','../../functions/utils/salesforce-request','toString','138PFFXem','__esModule'];a287_0x5387=function(){return _0x5f1ca1;};return a287_0x5387();}exports[a287_0x1c52a6(0xc5)]=fetchAttachments;