const a229_0x44c3c8=a229_0x1fa4;(function(_0x5ad9de,_0x1508ef){const _0x270887=a229_0x1fa4,_0x551784=_0x5ad9de();while(!![]){try{const _0x169bbf=-parseInt(_0x270887(0x193))/0x1+-parseInt(_0x270887(0x177))/0x2+-parseInt(_0x270887(0x18f))/0x3*(-parseInt(_0x270887(0x185))/0x4)+-parseInt(_0x270887(0x184))/0x5*(parseInt(_0x270887(0x199))/0x6)+-parseInt(_0x270887(0x180))/0x7*(-parseInt(_0x270887(0x19b))/0x8)+-parseInt(_0x270887(0x17b))/0x9+parseInt(_0x270887(0x19c))/0xa;if(_0x169bbf===_0x1508ef)break;else _0x551784['push'](_0x551784['shift']());}catch(_0x1d5935){_0x551784['push'](_0x551784['shift']());}}}(a229_0x1ca0,0x27d8b));const a229_0x16bf3d=(function(){let _0x38e85c=!![];return function(_0x54b4b6,_0x41adbb){const _0x54efc1=_0x38e85c?function(){const _0xd28b45=a229_0x1fa4;if(_0x41adbb){const _0x3dd65b=_0x41adbb[_0xd28b45(0x196)](_0x54b4b6,arguments);return _0x41adbb=null,_0x3dd65b;}}:function(){};return _0x38e85c=![],_0x54efc1;};}()),a229_0x507d71=a229_0x16bf3d(this,function(){const _0x2a30f6=a229_0x1fa4;return a229_0x507d71['toString']()[_0x2a30f6(0x195)](_0x2a30f6(0x188))[_0x2a30f6(0x194)]()[_0x2a30f6(0x192)](a229_0x507d71)['search']('(((.+)+)+)+$');});a229_0x507d71();function a229_0x1ca0(){const _0x30624a=['SALESFORCE_API_VERSION','40NyFuLu','268oHKtIy','post','fetchAttachmentsDetailsByParentId','(((.+)+)+)+$','/retrieveAttachments/','fetchAttachments','chunkArray','push','\x27,\x27','/services/data/','10545ylAGoj','ParentId','../../../constants','constructor','122491JsDoqb','toString','search','apply','join','__esModule','229902WKwrtY','Body','4168kUTfMu','5381030XiKTUd','retrieveAttachments','records','defineProperty','/services/apexrest','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','650196TuXGuH','/query/','/sobjects/Attachment/','Attachment','905589AQfRCX','fetchAttachmentBody','./index','length','base64','3283nUEBTk','get','BodyLength'];a229_0x1ca0=function(){return _0x30624a;};return a229_0x1ca0();}'use strict';Object[a229_0x44c3c8(0x174)](exports,a229_0x44c3c8(0x198),{'value':!![]}),exports[a229_0x44c3c8(0x18a)]=exports[a229_0x44c3c8(0x17c)]=exports[a229_0x44c3c8(0x187)]=exports['fetchAttachmentsDetailsById']=exports[a229_0x44c3c8(0x172)]=void 0x0;const index_1=require(a229_0x44c3c8(0x17d)),constants_1=require(a229_0x44c3c8(0x191)),salesforce_request_1=require('../../functions/utils/salesforce-request'),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a229_0x44c3c8(0x19a)],FIELD_PARENT_ID=a229_0x44c3c8(0x190),FIELD_ID='Id';async function retrieveAttachments(_0x3dbe9c,_0x645400){const _0x441d6f=a229_0x44c3c8;let _0x379325=0x0,_0x42a543=0x0,_0x31e8ba=[];const _0x1ec427=[];for(const _0x4b0d19 of _0x3dbe9c){if(_0x4b0d19['BodyLength']>REST_ATTACHMENT_MAX_SIZE){const _0x38bfa6=await fetchAttachmentBody(_0x645400,_0x4b0d19['Id']);_0x1ec427[_0x441d6f(0x18c)]({'id':_0x4b0d19['Id'],'values':{'Body':_0x38bfa6[_0x441d6f(0x194)](_0x441d6f(0x17f))}});continue;}if(_0x4b0d19[_0x441d6f(0x182)]+_0x379325>REST_ATTACHMENT_MAX_SIZE||_0x42a543+0x1>=REST_ATTACHMENT_COUNT){const _0x5cc9fd=await fetchAttachments(_0x645400,BINARY_FIELDS,_0x31e8ba);_0x1ec427[_0x441d6f(0x18c)](..._0x5cc9fd),_0x31e8ba=[],_0x379325=0x0,_0x42a543=0x0;}_0x31e8ba['push'](_0x4b0d19['Id']),_0x379325+=_0x4b0d19[_0x441d6f(0x182)],_0x42a543++;}if(_0x31e8ba[_0x441d6f(0x17e)]){const _0x17a496=await fetchAttachments(_0x645400,BINARY_FIELDS,_0x31e8ba);_0x1ec427[_0x441d6f(0x18c)](..._0x17a496);}return _0x1ec427;}exports['retrieveAttachments']=retrieveAttachments;function fetchAttachmentsDetailsById(_0x2f028a,_0x41ccf6){return fetchAttachmentsDetails(_0x2f028a,FIELD_ID,_0x41ccf6);}exports['fetchAttachmentsDetailsById']=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x36c12e,_0x393587){return fetchAttachmentsDetails(_0x36c12e,FIELD_PARENT_ID,_0x393587);}exports[a229_0x44c3c8(0x187)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x10db95,_0x43b303,_0x5227bf){const _0x146bf9=a229_0x44c3c8,_0x2b09c4=[],_0x11dd02=(0x0,index_1[_0x146bf9(0x18b)])(_0x5227bf,CHUNK_QUERY_SIZE);for(const _0x15ece7 of _0x11dd02){const _0x487683=_0x146bf9(0x176)+_0x43b303+'\x20IN\x20('+('\x27'+_0x15ece7[_0x146bf9(0x197)](_0x146bf9(0x18d))+'\x27')+')',{data:_0x39139e}=await _0x10db95[_0x146bf9(0x181)](_0x146bf9(0x18e)+constants_1[_0x146bf9(0x183)]+_0x146bf9(0x178),{'params':{'q':_0x487683}});_0x2b09c4[_0x146bf9(0x18c)](..._0x39139e[_0x146bf9(0x173)]);}return _0x2b09c4;}async function fetchAttachmentBody(_0xa6944f,_0x27bcf0){const _0x5551ee=a229_0x44c3c8,{data:_0x415e2a}=await _0xa6944f['get']('/services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x5551ee(0x179)+_0x27bcf0+'/body',{'responseType':'arraybuffer'});return _0x415e2a;}exports['fetchAttachmentBody']=fetchAttachmentBody;async function fetchAttachments(_0x374caf,_0x5637fd,_0x675fb4){const _0x30ce2a=a229_0x44c3c8,{data:_0x2bd2c8}=await _0x374caf[_0x30ce2a(0x186)](_0x30ce2a(0x175)+salesforce_request_1['namespace']+_0x30ce2a(0x189),{'objectName':_0x30ce2a(0x17a),'binaryFields':_0x5637fd,'recordIds':_0x675fb4});return _0x2bd2c8;}function a229_0x1fa4(_0x4201ec,_0x7b4d1a){const _0x6570dd=a229_0x1ca0();return a229_0x1fa4=function(_0x507d71,_0x16bf3d){_0x507d71=_0x507d71-0x172;let _0x1ca053=_0x6570dd[_0x507d71];return _0x1ca053;},a229_0x1fa4(_0x4201ec,_0x7b4d1a);}exports[a229_0x44c3c8(0x18a)]=fetchAttachments;