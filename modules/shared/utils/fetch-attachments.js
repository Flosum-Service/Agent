const a279_0x4d0afa=a279_0x3dae;(function(_0x461aa4,_0x41093a){const _0x5f4954=a279_0x3dae,_0x110fa6=_0x461aa4();while(!![]){try{const _0x39cb2e=parseInt(_0x5f4954(0xb2))/0x1*(parseInt(_0x5f4954(0x95))/0x2)+-parseInt(_0x5f4954(0x91))/0x3*(-parseInt(_0x5f4954(0xaa))/0x4)+parseInt(_0x5f4954(0xa3))/0x5+parseInt(_0x5f4954(0xb4))/0x6*(-parseInt(_0x5f4954(0x8f))/0x7)+parseInt(_0x5f4954(0xaf))/0x8*(-parseInt(_0x5f4954(0xb7))/0x9)+parseInt(_0x5f4954(0xa1))/0xa*(-parseInt(_0x5f4954(0x9e))/0xb)+-parseInt(_0x5f4954(0x97))/0xc*(parseInt(_0x5f4954(0x98))/0xd);if(_0x39cb2e===_0x41093a)break;else _0x110fa6['push'](_0x110fa6['shift']());}catch(_0xb90768){_0x110fa6['push'](_0x110fa6['shift']());}}}(a279_0x9f2b,0xa18bc));const a279_0x35894b=(function(){let _0x582fa3=!![];return function(_0x2cdd67,_0x187495){const _0x232f72=_0x582fa3?function(){const _0x359279=a279_0x3dae;if(_0x187495){const _0x32b060=_0x187495[_0x359279(0xac)](_0x2cdd67,arguments);return _0x187495=null,_0x32b060;}}:function(){};return _0x582fa3=![],_0x232f72;};}()),a279_0x23ea68=a279_0x35894b(this,function(){const _0x35a908=a279_0x3dae;return a279_0x23ea68['toString']()[_0x35a908(0xb6)]('(((.+)+)+)+$')[_0x35a908(0x9d)]()[_0x35a908(0x9a)](a279_0x23ea68)[_0x35a908(0xb6)](_0x35a908(0xa5));});a279_0x23ea68();'use strict';Object[a279_0x4d0afa(0xa8)](exports,a279_0x4d0afa(0x92),{'value':!![]}),exports[a279_0x4d0afa(0xa2)]=exports[a279_0x4d0afa(0xa6)]=exports['fetchAttachmentsDetailsByParentId']=exports[a279_0x4d0afa(0xa9)]=exports['retrieveAttachments']=void 0x0;const index_1=require(a279_0x4d0afa(0x9f)),constants_1=require('../../../constants'),salesforce_request_1=require('../../functions/utils/salesforce-request'),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=['Body'],FIELD_PARENT_ID=a279_0x4d0afa(0xb0),FIELD_ID='Id';async function retrieveAttachments(_0x1618e7,_0x2b1356){const _0x59fe4b=a279_0x4d0afa;let _0xc03e6c=0x0,_0x1ec6bb=0x0,_0x28a838=[];const _0x32e5f3=[];for(const _0x6dee10 of _0x1618e7){if(_0x6dee10[_0x59fe4b(0x94)]>REST_ATTACHMENT_MAX_SIZE){const _0x984bfa=await fetchAttachmentBody(_0x2b1356,_0x6dee10['Id']);_0x32e5f3[_0x59fe4b(0xad)]({'id':_0x6dee10['Id'],'values':{'Body':_0x984bfa['toString'](_0x59fe4b(0x99))}});continue;}if(_0x6dee10[_0x59fe4b(0x94)]+_0xc03e6c>REST_ATTACHMENT_MAX_SIZE||_0x1ec6bb+0x1>=REST_ATTACHMENT_COUNT){const _0x4db121=await fetchAttachments(_0x2b1356,BINARY_FIELDS,_0x28a838);_0x32e5f3[_0x59fe4b(0xad)](..._0x4db121),_0x28a838=[],_0xc03e6c=0x0,_0x1ec6bb=0x0;}_0x28a838[_0x59fe4b(0xad)](_0x6dee10['Id']),_0xc03e6c+=_0x6dee10[_0x59fe4b(0x94)],_0x1ec6bb++;}if(_0x28a838[_0x59fe4b(0xb1)]){const _0x3cd38c=await fetchAttachments(_0x2b1356,BINARY_FIELDS,_0x28a838);_0x32e5f3['push'](..._0x3cd38c);}return _0x32e5f3;}function a279_0x9f2b(){const _0x18ae20=['join','search','9JigjEL','14wneKKM','Attachment','1772439zaKoyW','__esModule','/services/apexrest','BodyLength','55526MGowkX','\x27,\x27','84cCxbtM','68562fGiRpH','base64','constructor','retrieveAttachments','/services/data/','toString','11099OWksSF','./index','fetchAttachmentsDetailsByParentId','2510hxtGWm','fetchAttachments','1193315YcLgnB','get','(((.+)+)+)+$','fetchAttachmentBody','/sobjects/Attachment/','defineProperty','fetchAttachmentsDetailsById','8tMOFnl','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','apply','push','SALESFORCE_API_VERSION','4283224lKlwfh','ParentId','length','27kxqEjv','/body','2047854sJeEDU'];a279_0x9f2b=function(){return _0x18ae20;};return a279_0x9f2b();}exports[a279_0x4d0afa(0x9b)]=retrieveAttachments;function a279_0x3dae(_0x4e4502,_0xc74d9c){const _0x1600a4=a279_0x9f2b();return a279_0x3dae=function(_0x23ea68,_0x35894b){_0x23ea68=_0x23ea68-0x8f;let _0x9f2bcb=_0x1600a4[_0x23ea68];return _0x9f2bcb;},a279_0x3dae(_0x4e4502,_0xc74d9c);}function fetchAttachmentsDetailsById(_0xed942d,_0x3ea51d){return fetchAttachmentsDetails(_0xed942d,FIELD_ID,_0x3ea51d);}exports['fetchAttachmentsDetailsById']=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x3c3bf3,_0x16f0a9){return fetchAttachmentsDetails(_0x3c3bf3,FIELD_PARENT_ID,_0x16f0a9);}exports[a279_0x4d0afa(0xa0)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x398e5a,_0xd27461,_0x4e2924){const _0x3c10ff=a279_0x4d0afa,_0x16fb23=[],_0x422829=(0x0,index_1['chunkArray'])(_0x4e2924,CHUNK_QUERY_SIZE);for(const _0x376d4e of _0x422829){const _0x1a58ae=_0x3c10ff(0xab)+_0xd27461+'\x20IN\x20('+('\x27'+_0x376d4e[_0x3c10ff(0xb5)](_0x3c10ff(0x96))+'\x27')+')',{data:_0x3d2d2e}=await _0x398e5a[_0x3c10ff(0xa4)](_0x3c10ff(0x9c)+constants_1[_0x3c10ff(0xae)]+'/query/',{'params':{'q':_0x1a58ae}});_0x16fb23[_0x3c10ff(0xad)](..._0x3d2d2e['records']);}return _0x16fb23;}async function fetchAttachmentBody(_0x35ac08,_0x1bc7bb){const _0x1875ce=a279_0x4d0afa,{data:_0x2821d2}=await _0x35ac08[_0x1875ce(0xa4)](_0x1875ce(0x9c)+constants_1[_0x1875ce(0xae)]+_0x1875ce(0xa7)+_0x1bc7bb+_0x1875ce(0xb3),{'responseType':'arraybuffer'});return _0x2821d2;}exports['fetchAttachmentBody']=fetchAttachmentBody;async function fetchAttachments(_0x5d4c2e,_0x17b658,_0x56aa4a){const _0x36eb23=a279_0x4d0afa,{data:_0x34b8cf}=await _0x5d4c2e['post'](_0x36eb23(0x93)+salesforce_request_1['namespace']+'/retrieveAttachments/',{'objectName':_0x36eb23(0x90),'binaryFields':_0x17b658,'recordIds':_0x56aa4a});return _0x34b8cf;}exports['fetchAttachments']=fetchAttachments;