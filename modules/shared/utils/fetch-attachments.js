const a227_0x144c15=a227_0x46a1;function a227_0x5312(){const _0x3bed62=['./index','search','1084abzjhN','/retrieveAttachments/','base64','Body','11709WrUvku','fetchAttachmentBody','210Dfouxz','/body','arraybuffer','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','217632JDNkLW','70KhaHfm','(((.+)+)+)+$','defineProperty','../../../constants','9890ugYQIi','retrieveAttachments','fetchAttachmentsDetailsById','/query/','528zArZNx','fetchAttachments','\x20IN\x20(','457626oHjwwo','2693ckXvkA','/sobjects/Attachment/','94240GOpdvx','apply','length','\x27,\x27','SALESFORCE_API_VERSION','BodyLength','26565786PqZReN','get','18136cbcEKi','/services/data/','push','60sNBHps','namespace','post','toString'];a227_0x5312=function(){return _0x3bed62;};return a227_0x5312();}function a227_0x46a1(_0x904f59,_0x2ced0c){const _0x138d13=a227_0x5312();return a227_0x46a1=function(_0x448667,_0x3c1e62){_0x448667=_0x448667-0x1ab;let _0x531268=_0x138d13[_0x448667];return _0x531268;},a227_0x46a1(_0x904f59,_0x2ced0c);}(function(_0x3c9292,_0x4a9ea1){const _0x325829=a227_0x46a1,_0x42283e=_0x3c9292();while(!![]){try{const _0x31b890=parseInt(_0x325829(0x1d1))/0x1*(parseInt(_0x325829(0x1ba))/0x2)+-parseInt(_0x325829(0x1b4))/0x3*(-parseInt(_0x325829(0x1d3))/0x4)+parseInt(_0x325829(0x1c5))/0x5*(-parseInt(_0x325829(0x1d0))/0x6)+-parseInt(_0x325829(0x1c0))/0x7*(-parseInt(_0x325829(0x1b1))/0x8)+-parseInt(_0x325829(0x1be))/0x9*(parseInt(_0x325829(0x1c9))/0xa)+parseInt(_0x325829(0x1cd))/0xb*(-parseInt(_0x325829(0x1c4))/0xc)+parseInt(_0x325829(0x1af))/0xd;if(_0x31b890===_0x4a9ea1)break;else _0x42283e['push'](_0x42283e['shift']());}catch(_0x181af1){_0x42283e['push'](_0x42283e['shift']());}}}(a227_0x5312,0xc78af));const a227_0x3c1e62=(function(){let _0x29f4c3=!![];return function(_0x1fcc2b,_0x1985cc){const _0x504f73=_0x29f4c3?function(){const _0x59bbd1=a227_0x46a1;if(_0x1985cc){const _0x425874=_0x1985cc[_0x59bbd1(0x1d4)](_0x1fcc2b,arguments);return _0x1985cc=null,_0x425874;}}:function(){};return _0x29f4c3=![],_0x504f73;};}()),a227_0x448667=a227_0x3c1e62(this,function(){const _0x2f2803=a227_0x46a1;return a227_0x448667[_0x2f2803(0x1b7)]()[_0x2f2803(0x1b9)](_0x2f2803(0x1c6))['toString']()['constructor'](a227_0x448667)[_0x2f2803(0x1b9)](_0x2f2803(0x1c6));});a227_0x448667();'use strict';Object[a227_0x144c15(0x1c7)](exports,'__esModule',{'value':!![]}),exports[a227_0x144c15(0x1ce)]=exports['fetchAttachmentBody']=exports['fetchAttachmentsDetailsByParentId']=exports[a227_0x144c15(0x1cb)]=exports[a227_0x144c15(0x1ca)]=void 0x0;const index_1=require(a227_0x144c15(0x1b8)),constants_1=require(a227_0x144c15(0x1c8)),salesforce_request_1=require('../../functions/utils/salesforce-request'),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a227_0x144c15(0x1bd)],FIELD_PARENT_ID='ParentId',FIELD_ID='Id';async function retrieveAttachments(_0x3e9482,_0x42582d){const _0x23312d=a227_0x144c15;let _0x1795a1=0x0,_0x44c2e5=0x0,_0x26eccf=[];const _0x21ebfb=[];for(const _0x3be7bc of _0x3e9482){if(_0x3be7bc[_0x23312d(0x1ae)]>REST_ATTACHMENT_MAX_SIZE){const _0xb79eee=await fetchAttachmentBody(_0x42582d,_0x3be7bc['Id']);_0x21ebfb[_0x23312d(0x1b3)]({'id':_0x3be7bc['Id'],'values':{'Body':_0xb79eee[_0x23312d(0x1b7)](_0x23312d(0x1bc))}});continue;}if(_0x3be7bc['BodyLength']+_0x1795a1>REST_ATTACHMENT_MAX_SIZE||_0x44c2e5+0x1>=REST_ATTACHMENT_COUNT){const _0x11392d=await fetchAttachments(_0x42582d,BINARY_FIELDS,_0x26eccf);_0x21ebfb[_0x23312d(0x1b3)](..._0x11392d),_0x26eccf=[],_0x1795a1=0x0,_0x44c2e5=0x0;}_0x26eccf[_0x23312d(0x1b3)](_0x3be7bc['Id']),_0x1795a1+=_0x3be7bc[_0x23312d(0x1ae)],_0x44c2e5++;}if(_0x26eccf[_0x23312d(0x1ab)]){const _0x34c15a=await fetchAttachments(_0x42582d,BINARY_FIELDS,_0x26eccf);_0x21ebfb[_0x23312d(0x1b3)](..._0x34c15a);}return _0x21ebfb;}exports[a227_0x144c15(0x1ca)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0x108dfe,_0x212ce8){return fetchAttachmentsDetails(_0x108dfe,FIELD_ID,_0x212ce8);}exports['fetchAttachmentsDetailsById']=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x23eaba,_0x2b4ae4){return fetchAttachmentsDetails(_0x23eaba,FIELD_PARENT_ID,_0x2b4ae4);}exports['fetchAttachmentsDetailsByParentId']=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x134f7,_0x31460f,_0x477e03){const _0x5becc5=a227_0x144c15,_0x38e315=[],_0x3e5f15=(0x0,index_1['chunkArray'])(_0x477e03,CHUNK_QUERY_SIZE);for(const _0x2c6b02 of _0x3e5f15){const _0x4e7859=_0x5becc5(0x1c3)+_0x31460f+_0x5becc5(0x1cf)+('\x27'+_0x2c6b02['join'](_0x5becc5(0x1ac))+'\x27')+')',{data:_0x129378}=await _0x134f7[_0x5becc5(0x1b0)](_0x5becc5(0x1b2)+constants_1[_0x5becc5(0x1ad)]+_0x5becc5(0x1cc),{'params':{'q':_0x4e7859}});_0x38e315['push'](..._0x129378['records']);}return _0x38e315;}async function fetchAttachmentBody(_0x80f0d2,_0x55a01b){const _0x33f89b=a227_0x144c15,{data:_0x497372}=await _0x80f0d2[_0x33f89b(0x1b0)](_0x33f89b(0x1b2)+constants_1['SALESFORCE_API_VERSION']+_0x33f89b(0x1d2)+_0x55a01b+_0x33f89b(0x1c1),{'responseType':_0x33f89b(0x1c2)});return _0x497372;}exports[a227_0x144c15(0x1bf)]=fetchAttachmentBody;async function fetchAttachments(_0x38d1ea,_0x398a7a,_0x567caf){const _0x260ccd=a227_0x144c15,{data:_0x51fa63}=await _0x38d1ea[_0x260ccd(0x1b6)]('/services/apexrest'+salesforce_request_1[_0x260ccd(0x1b5)]+_0x260ccd(0x1bb),{'objectName':'Attachment','binaryFields':_0x398a7a,'recordIds':_0x567caf});return _0x51fa63;}exports[a227_0x144c15(0x1ce)]=fetchAttachments;