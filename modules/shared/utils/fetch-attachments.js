const a330_0x4ba7be=a330_0x4c3b;(function(_0x392f16,_0x2bd6ec){const _0x188340=a330_0x4c3b,_0x32be30=_0x392f16();while(!![]){try{const _0x4f4dc1=-parseInt(_0x188340(0x210))/0x1+parseInt(_0x188340(0x1f7))/0x2+parseInt(_0x188340(0x204))/0x3*(parseInt(_0x188340(0x1ff))/0x4)+parseInt(_0x188340(0x202))/0x5+-parseInt(_0x188340(0x1f3))/0x6*(-parseInt(_0x188340(0x214))/0x7)+-parseInt(_0x188340(0x1f9))/0x8*(parseInt(_0x188340(0x1fb))/0x9)+-parseInt(_0x188340(0x20b))/0xa;if(_0x4f4dc1===_0x2bd6ec)break;else _0x32be30['push'](_0x32be30['shift']());}catch(_0x5cd7c7){_0x32be30['push'](_0x32be30['shift']());}}}(a330_0x3f78,0x242d4));const a330_0x2a1a6f=(function(){let _0x994eb3=!![];return function(_0xaa0057,_0x5a4a8a){const _0x40b5ef=_0x994eb3?function(){const _0x21c9b5=a330_0x4c3b;if(_0x5a4a8a){const _0x2a75ee=_0x5a4a8a[_0x21c9b5(0x1fa)](_0xaa0057,arguments);return _0x5a4a8a=null,_0x2a75ee;}}:function(){};return _0x994eb3=![],_0x40b5ef;};}()),a330_0xe42fd=a330_0x2a1a6f(this,function(){const _0x2cd7c9=a330_0x4c3b;return a330_0xe42fd[_0x2cd7c9(0x1fd)]()['search'](_0x2cd7c9(0x1f5))[_0x2cd7c9(0x1fd)]()[_0x2cd7c9(0x1f8)](a330_0xe42fd)[_0x2cd7c9(0x1f6)]('(((.+)+)+)+$');});a330_0xe42fd();function a330_0x4c3b(_0x3a539f,_0x324280){const _0x28b6bf=a330_0x3f78();return a330_0x4c3b=function(_0xe42fd,_0x2a1a6f){_0xe42fd=_0xe42fd-0x1ef;let _0x3f7831=_0x28b6bf[_0xe42fd];return _0x3f7831;},a330_0x4c3b(_0x3a539f,_0x324280);}'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a330_0x4ba7be(0x206)]=exports['fetchAttachmentBody']=exports['fetchAttachmentsDetailsByParentId']=exports[a330_0x4ba7be(0x209)]=exports[a330_0x4ba7be(0x212)]=void 0x0;const index_1=require(a330_0x4ba7be(0x208)),constants_1=require(a330_0x4ba7be(0x211)),salesforce_request_1=require('../../functions/utils/salesforce-request'),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a330_0x4ba7be(0x213)],FIELD_PARENT_ID=a330_0x4ba7be(0x205),FIELD_ID='Id';async function retrieveAttachments(_0x53380c,_0x1db23e){const _0x14d43b=a330_0x4ba7be;let _0x3636c2=0x0,_0x20377d=0x0,_0x422208=[];const _0x183248=[];for(const _0x5c7db4 of _0x53380c){if(_0x5c7db4[_0x14d43b(0x1f2)]>REST_ATTACHMENT_MAX_SIZE){const _0x1299dc=await fetchAttachmentBody(_0x1db23e,_0x5c7db4['Id']);_0x183248['push']({'id':_0x5c7db4['Id'],'values':{'Body':_0x1299dc[_0x14d43b(0x1fd)](_0x14d43b(0x1fc))}});continue;}if(_0x5c7db4[_0x14d43b(0x1f2)]+_0x3636c2>REST_ATTACHMENT_MAX_SIZE||_0x20377d+0x1>=REST_ATTACHMENT_COUNT){const _0x11a13c=await fetchAttachments(_0x1db23e,BINARY_FIELDS,_0x422208);_0x183248[_0x14d43b(0x1fe)](..._0x11a13c),_0x422208=[],_0x3636c2=0x0,_0x20377d=0x0;}_0x422208[_0x14d43b(0x1fe)](_0x5c7db4['Id']),_0x3636c2+=_0x5c7db4[_0x14d43b(0x1f2)],_0x20377d++;}if(_0x422208[_0x14d43b(0x20e)]){const _0x441f5e=await fetchAttachments(_0x1db23e,BINARY_FIELDS,_0x422208);_0x183248['push'](..._0x441f5e);}return _0x183248;}exports[a330_0x4ba7be(0x212)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0x19c75b,_0x158136){return fetchAttachmentsDetails(_0x19c75b,FIELD_ID,_0x158136);}exports[a330_0x4ba7be(0x209)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x1997ce,_0x201635){return fetchAttachmentsDetails(_0x1997ce,FIELD_PARENT_ID,_0x201635);}exports[a330_0x4ba7be(0x20c)]=fetchAttachmentsDetailsByParentId;function a330_0x3f78(){const _0x40b87c=['BodyLength','766380OpFuEn','Attachment','(((.+)+)+)+$','search','592152FbJGyM','constructor','248464OGLTMn','apply','18PWpVCa','base64','toString','push','72asBeed','/query/','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','19500SiTWEd','arraybuffer','2982wPIYqP','ParentId','fetchAttachments','namespace','./index','fetchAttachmentsDetailsById','records','2293690hYxTUt','fetchAttachmentsDetailsByParentId','chunkArray','length','/sobjects/Attachment/','5933IPmIqP','../../../constants','retrieveAttachments','Body','7PIywnG','get','/body','\x27,\x27','/services/data/'];a330_0x3f78=function(){return _0x40b87c;};return a330_0x3f78();}async function fetchAttachmentsDetails(_0x5d53c6,_0x3b6215,_0x58d6de){const _0x381599=a330_0x4ba7be,_0x5705b5=[],_0x4532ef=(0x0,index_1[_0x381599(0x20d)])(_0x58d6de,CHUNK_QUERY_SIZE);for(const _0x17f5aa of _0x4532ef){const _0x127712=_0x381599(0x201)+_0x3b6215+'\x20IN\x20('+('\x27'+_0x17f5aa['join'](_0x381599(0x1f0))+'\x27')+')',{data:_0x17f16d}=await _0x5d53c6[_0x381599(0x215)](_0x381599(0x1f1)+constants_1['SALESFORCE_API_VERSION']+_0x381599(0x200),{'params':{'q':_0x127712}});_0x5705b5['push'](..._0x17f16d[_0x381599(0x20a)]);}return _0x5705b5;}async function fetchAttachmentBody(_0x55c4bc,_0x30e59e){const _0x46ead3=a330_0x4ba7be,{data:_0x4051d5}=await _0x55c4bc['get'](_0x46ead3(0x1f1)+constants_1['SALESFORCE_API_VERSION']+_0x46ead3(0x20f)+_0x30e59e+_0x46ead3(0x1ef),{'responseType':_0x46ead3(0x203)});return _0x4051d5;}exports['fetchAttachmentBody']=fetchAttachmentBody;async function fetchAttachments(_0x473c08,_0x39f362,_0x1d9282){const _0x3f1426=a330_0x4ba7be,{data:_0x44f4a1}=await _0x473c08['post']('/services/apexrest'+salesforce_request_1[_0x3f1426(0x207)]+'/retrieveAttachments/',{'objectName':_0x3f1426(0x1f4),'binaryFields':_0x39f362,'recordIds':_0x1d9282});return _0x44f4a1;}exports[a330_0x4ba7be(0x206)]=fetchAttachments;