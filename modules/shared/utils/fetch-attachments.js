const a287_0x5754bf=a287_0x430f;(function(_0x5eece9,_0x3b5e46){const _0x51c3bb=a287_0x430f,_0x2c2cb7=_0x5eece9();while(!![]){try{const _0x34ff4=-parseInt(_0x51c3bb(0x16e))/0x1*(-parseInt(_0x51c3bb(0x183))/0x2)+-parseInt(_0x51c3bb(0x174))/0x3+parseInt(_0x51c3bb(0x185))/0x4*(parseInt(_0x51c3bb(0x164))/0x5)+-parseInt(_0x51c3bb(0x167))/0x6*(parseInt(_0x51c3bb(0x17f))/0x7)+-parseInt(_0x51c3bb(0x175))/0x8+-parseInt(_0x51c3bb(0x187))/0x9*(-parseInt(_0x51c3bb(0x16b))/0xa)+-parseInt(_0x51c3bb(0x17e))/0xb;if(_0x34ff4===_0x3b5e46)break;else _0x2c2cb7['push'](_0x2c2cb7['shift']());}catch(_0x2cfa2b){_0x2c2cb7['push'](_0x2c2cb7['shift']());}}}(a287_0x1d9d,0x84285));const a287_0x396082=(function(){let _0x584d5c=!![];return function(_0x38439d,_0x37d6aa){const _0x1b6e3f=_0x584d5c?function(){const _0x2b7605=a287_0x430f;if(_0x37d6aa){const _0x30c05e=_0x37d6aa[_0x2b7605(0x168)](_0x38439d,arguments);return _0x37d6aa=null,_0x30c05e;}}:function(){};return _0x584d5c=![],_0x1b6e3f;};}()),a287_0x518cc7=a287_0x396082(this,function(){const _0x2babe0=a287_0x430f;return a287_0x518cc7[_0x2babe0(0x17c)]()[_0x2babe0(0x16a)](_0x2babe0(0x166))[_0x2babe0(0x17c)]()[_0x2babe0(0x188)](a287_0x518cc7)[_0x2babe0(0x16a)](_0x2babe0(0x166));});a287_0x518cc7();'use strict';Object[a287_0x5754bf(0x171)](exports,a287_0x5754bf(0x17b),{'value':!![]}),exports['fetchAttachments']=exports[a287_0x5754bf(0x18d)]=exports[a287_0x5754bf(0x173)]=exports[a287_0x5754bf(0x182)]=exports[a287_0x5754bf(0x178)]=void 0x0;const index_1=require(a287_0x5754bf(0x180)),constants_1=require(a287_0x5754bf(0x179)),salesforce_request_1=require('../../functions/utils/salesforce-request'),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a287_0x5754bf(0x16d)],FIELD_PARENT_ID='ParentId',FIELD_ID='Id';function a287_0x1d9d(){const _0x9623f2=['\x20IN\x20(','fetchAttachments','length','records','fetchAttachmentBody','/query/','5uLpoLA','\x27,\x27','(((.+)+)+)+$','1342002CraAUf','apply','Attachment','search','30ETDuDQ','SALESFORCE_API_VERSION','Body','1tKSfvt','/sobjects/Attachment/','join','defineProperty','arraybuffer','fetchAttachmentsDetailsByParentId','176979ZEiMeV','4213512QtWdDd','/services/data/','/services/apexrest','retrieveAttachments','../../../constants','/body','__esModule','toString','chunkArray','15437147IQPOAQ','7TGztWM','./index','base64','fetchAttachmentsDetailsById','2048746PGsTdH','push','3733172pBMXbU','BodyLength','2389131geBZdX','constructor'];a287_0x1d9d=function(){return _0x9623f2;};return a287_0x1d9d();}async function retrieveAttachments(_0x35e915,_0xb44769){const _0x3711b0=a287_0x5754bf;let _0x57417e=0x0,_0x3c1c34=0x0,_0x248340=[];const _0x5a1f35=[];for(const _0x1cf6a5 of _0x35e915){if(_0x1cf6a5[_0x3711b0(0x186)]>REST_ATTACHMENT_MAX_SIZE){const _0xcd1a0=await fetchAttachmentBody(_0xb44769,_0x1cf6a5['Id']);_0x5a1f35['push']({'id':_0x1cf6a5['Id'],'values':{'Body':_0xcd1a0[_0x3711b0(0x17c)](_0x3711b0(0x181))}});continue;}if(_0x1cf6a5[_0x3711b0(0x186)]+_0x57417e>REST_ATTACHMENT_MAX_SIZE||_0x3c1c34+0x1>=REST_ATTACHMENT_COUNT){const _0x2a0b32=await fetchAttachments(_0xb44769,BINARY_FIELDS,_0x248340);_0x5a1f35[_0x3711b0(0x184)](..._0x2a0b32),_0x248340=[],_0x57417e=0x0,_0x3c1c34=0x0;}_0x248340[_0x3711b0(0x184)](_0x1cf6a5['Id']),_0x57417e+=_0x1cf6a5[_0x3711b0(0x186)],_0x3c1c34++;}if(_0x248340[_0x3711b0(0x18b)]){const _0xd7b69d=await fetchAttachments(_0xb44769,BINARY_FIELDS,_0x248340);_0x5a1f35['push'](..._0xd7b69d);}return _0x5a1f35;}exports['retrieveAttachments']=retrieveAttachments;function fetchAttachmentsDetailsById(_0x4f6162,_0x26c7da){return fetchAttachmentsDetails(_0x4f6162,FIELD_ID,_0x26c7da);}exports[a287_0x5754bf(0x182)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x593866,_0x35bc61){return fetchAttachmentsDetails(_0x593866,FIELD_PARENT_ID,_0x35bc61);}exports[a287_0x5754bf(0x173)]=fetchAttachmentsDetailsByParentId;function a287_0x430f(_0xc1d62e,_0x4abe45){const _0x498f33=a287_0x1d9d();return a287_0x430f=function(_0x518cc7,_0x396082){_0x518cc7=_0x518cc7-0x164;let _0x1d9d19=_0x498f33[_0x518cc7];return _0x1d9d19;},a287_0x430f(_0xc1d62e,_0x4abe45);}async function fetchAttachmentsDetails(_0x42877f,_0x352a61,_0x3d4679){const _0x2702dc=a287_0x5754bf,_0x3d7185=[],_0x14e5a1=(0x0,index_1[_0x2702dc(0x17d)])(_0x3d4679,CHUNK_QUERY_SIZE);for(const _0x52ba96 of _0x14e5a1){const _0x37c0c5='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20'+_0x352a61+_0x2702dc(0x189)+('\x27'+_0x52ba96[_0x2702dc(0x170)](_0x2702dc(0x165))+'\x27')+')',{data:_0x43f0fe}=await _0x42877f['get'](_0x2702dc(0x176)+constants_1[_0x2702dc(0x16c)]+_0x2702dc(0x18e),{'params':{'q':_0x37c0c5}});_0x3d7185[_0x2702dc(0x184)](..._0x43f0fe[_0x2702dc(0x18c)]);}return _0x3d7185;}async function fetchAttachmentBody(_0x212cef,_0x5faa2){const _0x1f71b1=a287_0x5754bf,{data:_0x426639}=await _0x212cef['get'](_0x1f71b1(0x176)+constants_1[_0x1f71b1(0x16c)]+_0x1f71b1(0x16f)+_0x5faa2+_0x1f71b1(0x17a),{'responseType':_0x1f71b1(0x172)});return _0x426639;}exports['fetchAttachmentBody']=fetchAttachmentBody;async function fetchAttachments(_0x5196a1,_0x2ea0ed,_0x2d959c){const _0x4d84c4=a287_0x5754bf,{data:_0x4317be}=await _0x5196a1['post'](_0x4d84c4(0x177)+salesforce_request_1['namespace']+'/retrieveAttachments/',{'objectName':_0x4d84c4(0x169),'binaryFields':_0x2ea0ed,'recordIds':_0x2d959c});return _0x4317be;}exports[a287_0x5754bf(0x18a)]=fetchAttachments;