const a287_0x1c1f3f=a287_0x1efc;(function(_0x37dec0,_0x4914c5){const _0x3c6a20=a287_0x1efc,_0x39b691=_0x37dec0();while(!![]){try{const _0x3a4003=-parseInt(_0x3c6a20(0x143))/0x1+parseInt(_0x3c6a20(0x14f))/0x2*(-parseInt(_0x3c6a20(0x136))/0x3)+-parseInt(_0x3c6a20(0x156))/0x4+-parseInt(_0x3c6a20(0x13f))/0x5+-parseInt(_0x3c6a20(0x154))/0x6+-parseInt(_0x3c6a20(0x15a))/0x7*(parseInt(_0x3c6a20(0x135))/0x8)+parseInt(_0x3c6a20(0x13c))/0x9;if(_0x3a4003===_0x4914c5)break;else _0x39b691['push'](_0x39b691['shift']());}catch(_0x4a1358){_0x39b691['push'](_0x39b691['shift']());}}}(a287_0x31c5,0xf12bd));const a287_0x1c365a=(function(){let _0x446036=!![];return function(_0x4a8c63,_0x601490){const _0x207b77=_0x446036?function(){if(_0x601490){const _0x8241bf=_0x601490['apply'](_0x4a8c63,arguments);return _0x601490=null,_0x8241bf;}}:function(){};return _0x446036=![],_0x207b77;};}()),a287_0x462c2c=a287_0x1c365a(this,function(){const _0x19e5ce=a287_0x1efc;return a287_0x462c2c[_0x19e5ce(0x145)]()[_0x19e5ce(0x132)]('(((.+)+)+)+$')[_0x19e5ce(0x145)]()[_0x19e5ce(0x139)](a287_0x462c2c)[_0x19e5ce(0x132)](_0x19e5ce(0x13e));});a287_0x462c2c();'use strict';Object[a287_0x1c1f3f(0x15b)](exports,a287_0x1c1f3f(0x152),{'value':!![]}),exports[a287_0x1c1f3f(0x146)]=exports['fetchAttachmentBody']=exports['fetchAttachmentsDetailsByParentId']=exports[a287_0x1c1f3f(0x13d)]=exports[a287_0x1c1f3f(0x15c)]=void 0x0;function a287_0x31c5(){const _0x3c2e4f=['BodyLength','371rhwLLW','defineProperty','retrieveAttachments','/retrieveAttachments/','search','../../../constants','Attachment','112744SrvkiA','3bUPfOB','/services/apexrest','push','constructor','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','\x20IN\x20(','62454816jqIeIk','fetchAttachmentsDetailsById','(((.+)+)+)+$','9637795bmmiuY','\x27,\x27','records','fetchAttachmentBody','409042vnjDcw','fetchAttachmentsDetailsByParentId','toString','fetchAttachments','get','./index','ParentId','/sobjects/Attachment/','/services/data/','length','SALESFORCE_API_VERSION','chunkArray','2006788MQDvBk','join','/query/','__esModule','../../functions/utils/salesforce-request','1530414QwmcKO','post','6438376uKdImS','/body','namespace'];a287_0x31c5=function(){return _0x3c2e4f;};return a287_0x31c5();}const index_1=require(a287_0x1c1f3f(0x148)),constants_1=require(a287_0x1c1f3f(0x133)),salesforce_request_1=require(a287_0x1c1f3f(0x153)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=['Body'],FIELD_PARENT_ID=a287_0x1c1f3f(0x149),FIELD_ID='Id';async function retrieveAttachments(_0x2a644a,_0x565563){const _0x28a9d2=a287_0x1c1f3f;let _0x5b3cb1=0x0,_0x1b2772=0x0,_0x2b40d0=[];const _0x4ab2d2=[];for(const _0x4a5040 of _0x2a644a){if(_0x4a5040[_0x28a9d2(0x159)]>REST_ATTACHMENT_MAX_SIZE){const _0x31e258=await fetchAttachmentBody(_0x565563,_0x4a5040['Id']);_0x4ab2d2[_0x28a9d2(0x138)]({'id':_0x4a5040['Id'],'values':{'Body':_0x31e258[_0x28a9d2(0x145)]('base64')}});continue;}if(_0x4a5040[_0x28a9d2(0x159)]+_0x5b3cb1>REST_ATTACHMENT_MAX_SIZE||_0x1b2772+0x1>=REST_ATTACHMENT_COUNT){const _0x36e69c=await fetchAttachments(_0x565563,BINARY_FIELDS,_0x2b40d0);_0x4ab2d2['push'](..._0x36e69c),_0x2b40d0=[],_0x5b3cb1=0x0,_0x1b2772=0x0;}_0x2b40d0['push'](_0x4a5040['Id']),_0x5b3cb1+=_0x4a5040[_0x28a9d2(0x159)],_0x1b2772++;}if(_0x2b40d0[_0x28a9d2(0x14c)]){const _0x33712c=await fetchAttachments(_0x565563,BINARY_FIELDS,_0x2b40d0);_0x4ab2d2[_0x28a9d2(0x138)](..._0x33712c);}return _0x4ab2d2;}function a287_0x1efc(_0x3891b3,_0x540c29){const _0x37c430=a287_0x31c5();return a287_0x1efc=function(_0x462c2c,_0x1c365a){_0x462c2c=_0x462c2c-0x131;let _0x31c5c1=_0x37c430[_0x462c2c];return _0x31c5c1;},a287_0x1efc(_0x3891b3,_0x540c29);}exports['retrieveAttachments']=retrieveAttachments;function fetchAttachmentsDetailsById(_0x550b8b,_0x1fe852){return fetchAttachmentsDetails(_0x550b8b,FIELD_ID,_0x1fe852);}exports['fetchAttachmentsDetailsById']=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x104b58,_0x4615e1){return fetchAttachmentsDetails(_0x104b58,FIELD_PARENT_ID,_0x4615e1);}exports[a287_0x1c1f3f(0x144)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x2d970f,_0x8c1167,_0x2f18da){const _0x6e7bb0=a287_0x1c1f3f,_0x1403d7=[],_0x977867=(0x0,index_1[_0x6e7bb0(0x14e)])(_0x2f18da,CHUNK_QUERY_SIZE);for(const _0x484024 of _0x977867){const _0x13cd24=_0x6e7bb0(0x13a)+_0x8c1167+_0x6e7bb0(0x13b)+('\x27'+_0x484024[_0x6e7bb0(0x150)](_0x6e7bb0(0x140))+'\x27')+')',{data:_0x5407c6}=await _0x2d970f[_0x6e7bb0(0x147)](_0x6e7bb0(0x14b)+constants_1['SALESFORCE_API_VERSION']+_0x6e7bb0(0x151),{'params':{'q':_0x13cd24}});_0x1403d7[_0x6e7bb0(0x138)](..._0x5407c6[_0x6e7bb0(0x141)]);}return _0x1403d7;}async function fetchAttachmentBody(_0x2cc412,_0x5c4aa1){const _0x1f7ec9=a287_0x1c1f3f,{data:_0x45f4ff}=await _0x2cc412[_0x1f7ec9(0x147)]('/services/data/'+constants_1[_0x1f7ec9(0x14d)]+_0x1f7ec9(0x14a)+_0x5c4aa1+_0x1f7ec9(0x157),{'responseType':'arraybuffer'});return _0x45f4ff;}exports[a287_0x1c1f3f(0x142)]=fetchAttachmentBody;async function fetchAttachments(_0x2cadbf,_0x3f41a1,_0x280251){const _0x1c3502=a287_0x1c1f3f,{data:_0x10b8ff}=await _0x2cadbf[_0x1c3502(0x155)](_0x1c3502(0x137)+salesforce_request_1[_0x1c3502(0x158)]+_0x1c3502(0x131),{'objectName':_0x1c3502(0x134),'binaryFields':_0x3f41a1,'recordIds':_0x280251});return _0x10b8ff;}exports['fetchAttachments']=fetchAttachments;