const a332_0x367796=a332_0x559e;(function(_0x39537d,_0x316f89){const _0x4a9922=a332_0x559e,_0x4bc892=_0x39537d();while(!![]){try{const _0x268b05=-parseInt(_0x4a9922(0x1c7))/0x1+-parseInt(_0x4a9922(0x1c4))/0x2+parseInt(_0x4a9922(0x1aa))/0x3*(parseInt(_0x4a9922(0x1b1))/0x4)+-parseInt(_0x4a9922(0x1ac))/0x5*(parseInt(_0x4a9922(0x1af))/0x6)+-parseInt(_0x4a9922(0x1b5))/0x7*(-parseInt(_0x4a9922(0x1bb))/0x8)+-parseInt(_0x4a9922(0x1ce))/0x9*(-parseInt(_0x4a9922(0x1c3))/0xa)+-parseInt(_0x4a9922(0x1d1))/0xb*(-parseInt(_0x4a9922(0x1c8))/0xc);if(_0x268b05===_0x316f89)break;else _0x4bc892['push'](_0x4bc892['shift']());}catch(_0x20977a){_0x4bc892['push'](_0x4bc892['shift']());}}}(a332_0x8dab,0x2bbfb));function a332_0x8dab(){const _0x5342f1=['\x27,\x27','104730SpFJKU','chunkArray','/services/apexrest','66pWNyGh','./index','4XYMFZN','__esModule','push','fetchAttachmentsDetailsById','49CHruxh','records','get','Attachment','search','ParentId','333936KQYpKa','\x20IN\x20(','length','retrieveAttachments','post','/query/','defineProperty','/body','608060fSBnrF','426732ZgsVbJ','join','BodyLength','235213aDejib','207036AtrCXk','fetchAttachments','toString','/services/data/','(((.+)+)+)+$','Body','9npDwDB','fetchAttachmentBody','SALESFORCE_API_VERSION','99AObBrA','../../functions/utils/salesforce-request','fetchAttachmentsDetailsByParentId','constructor','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','arraybuffer','1049709nPsaMH'];a332_0x8dab=function(){return _0x5342f1;};return a332_0x8dab();}const a332_0x480534=(function(){let _0x19ff32=!![];return function(_0x33e6d7,_0x2dc188){const _0x44fc25=_0x19ff32?function(){if(_0x2dc188){const _0x588040=_0x2dc188['apply'](_0x33e6d7,arguments);return _0x2dc188=null,_0x588040;}}:function(){};return _0x19ff32=![],_0x44fc25;};}()),a332_0x4ab073=a332_0x480534(this,function(){const _0x9308f5=a332_0x559e;return a332_0x4ab073[_0x9308f5(0x1ca)]()[_0x9308f5(0x1b9)](_0x9308f5(0x1cc))[_0x9308f5(0x1ca)]()[_0x9308f5(0x1a7)](a332_0x4ab073)[_0x9308f5(0x1b9)]('(((.+)+)+)+$');});a332_0x4ab073();'use strict';Object[a332_0x367796(0x1c1)](exports,a332_0x367796(0x1b2),{'value':!![]}),exports[a332_0x367796(0x1c9)]=exports[a332_0x367796(0x1cf)]=exports[a332_0x367796(0x1d3)]=exports[a332_0x367796(0x1b4)]=exports[a332_0x367796(0x1be)]=void 0x0;const index_1=require(a332_0x367796(0x1b0)),constants_1=require('../../../constants'),salesforce_request_1=require(a332_0x367796(0x1d2)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a332_0x367796(0x1cd)],FIELD_PARENT_ID=a332_0x367796(0x1ba),FIELD_ID='Id';async function retrieveAttachments(_0x491171,_0x331d23){const _0x234da7=a332_0x367796;let _0x1820f2=0x0,_0x5308d4=0x0,_0x1778d6=[];const _0x282a07=[];for(const _0x4e422d of _0x491171){if(_0x4e422d[_0x234da7(0x1c6)]>REST_ATTACHMENT_MAX_SIZE){const _0x5b3984=await fetchAttachmentBody(_0x331d23,_0x4e422d['Id']);_0x282a07[_0x234da7(0x1b3)]({'id':_0x4e422d['Id'],'values':{'Body':_0x5b3984[_0x234da7(0x1ca)]('base64')}});continue;}if(_0x4e422d['BodyLength']+_0x1820f2>REST_ATTACHMENT_MAX_SIZE||_0x5308d4+0x1>=REST_ATTACHMENT_COUNT){const _0x52c507=await fetchAttachments(_0x331d23,BINARY_FIELDS,_0x1778d6);_0x282a07['push'](..._0x52c507),_0x1778d6=[],_0x1820f2=0x0,_0x5308d4=0x0;}_0x1778d6[_0x234da7(0x1b3)](_0x4e422d['Id']),_0x1820f2+=_0x4e422d['BodyLength'],_0x5308d4++;}if(_0x1778d6[_0x234da7(0x1bd)]){const _0x3b8a32=await fetchAttachments(_0x331d23,BINARY_FIELDS,_0x1778d6);_0x282a07[_0x234da7(0x1b3)](..._0x3b8a32);}return _0x282a07;}exports[a332_0x367796(0x1be)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0x34586e,_0x24a25b){return fetchAttachmentsDetails(_0x34586e,FIELD_ID,_0x24a25b);}exports[a332_0x367796(0x1b4)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x49817c,_0x367980){return fetchAttachmentsDetails(_0x49817c,FIELD_PARENT_ID,_0x367980);}exports[a332_0x367796(0x1d3)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0xc85b8d,_0x4a0fe9,_0x141242){const _0x489a84=a332_0x367796,_0xcfac6f=[],_0x81eb7a=(0x0,index_1[_0x489a84(0x1ad)])(_0x141242,CHUNK_QUERY_SIZE);for(const _0x4b16ec of _0x81eb7a){const _0xc143a6=_0x489a84(0x1a8)+_0x4a0fe9+_0x489a84(0x1bc)+('\x27'+_0x4b16ec[_0x489a84(0x1c5)](_0x489a84(0x1ab))+'\x27')+')',{data:_0x1bec79}=await _0xc85b8d[_0x489a84(0x1b7)](_0x489a84(0x1cb)+constants_1[_0x489a84(0x1d0)]+_0x489a84(0x1c0),{'params':{'q':_0xc143a6}});_0xcfac6f[_0x489a84(0x1b3)](..._0x1bec79[_0x489a84(0x1b6)]);}return _0xcfac6f;}async function fetchAttachmentBody(_0x114db6,_0x129134){const _0x93b5ec=a332_0x367796,{data:_0x2d18ed}=await _0x114db6[_0x93b5ec(0x1b7)]('/services/data/'+constants_1[_0x93b5ec(0x1d0)]+'/sobjects/Attachment/'+_0x129134+_0x93b5ec(0x1c2),{'responseType':_0x93b5ec(0x1a9)});return _0x2d18ed;}exports[a332_0x367796(0x1cf)]=fetchAttachmentBody;function a332_0x559e(_0x456a00,_0x3a8e7d){const _0x7b4395=a332_0x8dab();return a332_0x559e=function(_0x4ab073,_0x480534){_0x4ab073=_0x4ab073-0x1a7;let _0x8dabf1=_0x7b4395[_0x4ab073];return _0x8dabf1;},a332_0x559e(_0x456a00,_0x3a8e7d);}async function fetchAttachments(_0x3dec70,_0x4d3925,_0x4771ee){const _0xfdf71b=a332_0x367796,{data:_0x4d6b8f}=await _0x3dec70[_0xfdf71b(0x1bf)](_0xfdf71b(0x1ae)+salesforce_request_1['namespace']+'/retrieveAttachments/',{'objectName':_0xfdf71b(0x1b8),'binaryFields':_0x4d3925,'recordIds':_0x4771ee});return _0x4d6b8f;}exports['fetchAttachments']=fetchAttachments;