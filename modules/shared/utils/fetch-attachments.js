const a331_0x4f08e9=a331_0x1138;function a331_0x912d(){const _0x3f1714=['post','../../functions/utils/salesforce-request','\x27,\x27','search','fetchAttachments','111KDpMVg','SALESFORCE_API_VERSION','/services/data/','4uPKKXA','1283863nnXSQb','fetchAttachmentsDetailsByParentId','records','/services/apexrest','push','retrieveAttachments','20GonqqA','fetchAttachmentBody','__esModule','constructor','base64','defineProperty','19868fCRRCJ','toString','/query/','Body','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','arraybuffer','4013251gDqxwD','BodyLength','/sobjects/Attachment/','Attachment','apply','length','694210lQASWg','fetchAttachmentsDetailsById','./index','\x20IN\x20(','9126oKCCrc','99329oSmchF','/retrieveAttachments/','get','namespace','1384fmndYV','96300FyJmsz','(((.+)+)+)+$'];a331_0x912d=function(){return _0x3f1714;};return a331_0x912d();}(function(_0xbbe877,_0x2624e1){const _0x1b6fb3=a331_0x1138,_0x11ec37=_0xbbe877();while(!![]){try{const _0x58d046=parseInt(_0x1b6fb3(0x13c))/0x1*(-parseInt(_0x1b6fb3(0x14b))/0x2)+parseInt(_0x1b6fb3(0x148))/0x3*(-parseInt(_0x1b6fb3(0x12b))/0x4)+parseInt(_0x1b6fb3(0x137))/0x5+-parseInt(_0x1b6fb3(0x141))/0x6+-parseInt(_0x1b6fb3(0x14c))/0x7+-parseInt(_0x1b6fb3(0x140))/0x8*(parseInt(_0x1b6fb3(0x13b))/0x9)+-parseInt(_0x1b6fb3(0x152))/0xa*(-parseInt(_0x1b6fb3(0x131))/0xb);if(_0x58d046===_0x2624e1)break;else _0x11ec37['push'](_0x11ec37['shift']());}catch(_0x2c172f){_0x11ec37['push'](_0x11ec37['shift']());}}}(a331_0x912d,0x1b266));const a331_0xac884f=(function(){let _0x588530=!![];return function(_0x52b3ce,_0x385571){const _0x4e02b7=_0x588530?function(){const _0x254cf0=a331_0x1138;if(_0x385571){const _0x5f3f9e=_0x385571[_0x254cf0(0x135)](_0x52b3ce,arguments);return _0x385571=null,_0x5f3f9e;}}:function(){};return _0x588530=![],_0x4e02b7;};}()),a331_0x88d056=a331_0xac884f(this,function(){const _0x8c1e1f=a331_0x1138;return a331_0x88d056['toString']()['search'](_0x8c1e1f(0x142))[_0x8c1e1f(0x12c)]()[_0x8c1e1f(0x155)](a331_0x88d056)[_0x8c1e1f(0x146)](_0x8c1e1f(0x142));});a331_0x88d056();'use strict';Object[a331_0x4f08e9(0x12a)](exports,a331_0x4f08e9(0x154),{'value':!![]}),exports[a331_0x4f08e9(0x147)]=exports[a331_0x4f08e9(0x153)]=exports[a331_0x4f08e9(0x14d)]=exports[a331_0x4f08e9(0x138)]=exports[a331_0x4f08e9(0x151)]=void 0x0;const index_1=require(a331_0x4f08e9(0x139)),constants_1=require('../../../constants'),salesforce_request_1=require(a331_0x4f08e9(0x144)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a331_0x4f08e9(0x12e)],FIELD_PARENT_ID='ParentId',FIELD_ID='Id';async function retrieveAttachments(_0x13e281,_0x29d937){const _0x5331ce=a331_0x4f08e9;let _0x310897=0x0,_0x1b55fb=0x0,_0x2a4cfe=[];const _0x1a8a7b=[];for(const _0x44c9d4 of _0x13e281){if(_0x44c9d4[_0x5331ce(0x132)]>REST_ATTACHMENT_MAX_SIZE){const _0x4bdc2c=await fetchAttachmentBody(_0x29d937,_0x44c9d4['Id']);_0x1a8a7b['push']({'id':_0x44c9d4['Id'],'values':{'Body':_0x4bdc2c['toString'](_0x5331ce(0x156))}});continue;}if(_0x44c9d4[_0x5331ce(0x132)]+_0x310897>REST_ATTACHMENT_MAX_SIZE||_0x1b55fb+0x1>=REST_ATTACHMENT_COUNT){const _0x31318e=await fetchAttachments(_0x29d937,BINARY_FIELDS,_0x2a4cfe);_0x1a8a7b['push'](..._0x31318e),_0x2a4cfe=[],_0x310897=0x0,_0x1b55fb=0x0;}_0x2a4cfe[_0x5331ce(0x150)](_0x44c9d4['Id']),_0x310897+=_0x44c9d4[_0x5331ce(0x132)],_0x1b55fb++;}if(_0x2a4cfe[_0x5331ce(0x136)]){const _0x570bad=await fetchAttachments(_0x29d937,BINARY_FIELDS,_0x2a4cfe);_0x1a8a7b[_0x5331ce(0x150)](..._0x570bad);}return _0x1a8a7b;}exports[a331_0x4f08e9(0x151)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0x3cee84,_0xbbd07){return fetchAttachmentsDetails(_0x3cee84,FIELD_ID,_0xbbd07);}exports[a331_0x4f08e9(0x138)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x12624e,_0x19eef1){return fetchAttachmentsDetails(_0x12624e,FIELD_PARENT_ID,_0x19eef1);}function a331_0x1138(_0x3b9e75,_0x72046e){const _0x223bbb=a331_0x912d();return a331_0x1138=function(_0x88d056,_0xac884f){_0x88d056=_0x88d056-0x12a;let _0x912d23=_0x223bbb[_0x88d056];return _0x912d23;},a331_0x1138(_0x3b9e75,_0x72046e);}exports['fetchAttachmentsDetailsByParentId']=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x2ce9e5,_0x5b8d65,_0x538e4b){const _0x1d6a4b=a331_0x4f08e9,_0x3b46bc=[],_0x3e9e27=(0x0,index_1['chunkArray'])(_0x538e4b,CHUNK_QUERY_SIZE);for(const _0x109b15 of _0x3e9e27){const _0x3a2d49=_0x1d6a4b(0x12f)+_0x5b8d65+_0x1d6a4b(0x13a)+('\x27'+_0x109b15['join'](_0x1d6a4b(0x145))+'\x27')+')',{data:_0x621eee}=await _0x2ce9e5[_0x1d6a4b(0x13e)](_0x1d6a4b(0x14a)+constants_1[_0x1d6a4b(0x149)]+_0x1d6a4b(0x12d),{'params':{'q':_0x3a2d49}});_0x3b46bc[_0x1d6a4b(0x150)](..._0x621eee[_0x1d6a4b(0x14e)]);}return _0x3b46bc;}async function fetchAttachmentBody(_0x3900b2,_0x5cf8f3){const _0x24ecd6=a331_0x4f08e9,{data:_0x322502}=await _0x3900b2[_0x24ecd6(0x13e)](_0x24ecd6(0x14a)+constants_1[_0x24ecd6(0x149)]+_0x24ecd6(0x133)+_0x5cf8f3+'/body',{'responseType':_0x24ecd6(0x130)});return _0x322502;}exports[a331_0x4f08e9(0x153)]=fetchAttachmentBody;async function fetchAttachments(_0x31c3ef,_0x33ea8e,_0x315eb3){const _0xafbc84=a331_0x4f08e9,{data:_0x291246}=await _0x31c3ef[_0xafbc84(0x143)](_0xafbc84(0x14f)+salesforce_request_1[_0xafbc84(0x13f)]+_0xafbc84(0x13d),{'objectName':_0xafbc84(0x134),'binaryFields':_0x33ea8e,'recordIds':_0x315eb3});return _0x291246;}exports[a331_0x4f08e9(0x147)]=fetchAttachments;