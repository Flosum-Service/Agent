const a330_0x1f420a=a330_0x2561;(function(_0x226ac8,_0x4d8af3){const _0x16b22e=a330_0x2561,_0x2ea66f=_0x226ac8();while(!![]){try{const _0x43e4db=-parseInt(_0x16b22e(0x86))/0x1*(-parseInt(_0x16b22e(0x6f))/0x2)+parseInt(_0x16b22e(0x76))/0x3+parseInt(_0x16b22e(0x80))/0x4+parseInt(_0x16b22e(0x6e))/0x5*(-parseInt(_0x16b22e(0x7a))/0x6)+parseInt(_0x16b22e(0x8b))/0x7+-parseInt(_0x16b22e(0x90))/0x8+-parseInt(_0x16b22e(0x8e))/0x9*(parseInt(_0x16b22e(0x6b))/0xa);if(_0x43e4db===_0x4d8af3)break;else _0x2ea66f['push'](_0x2ea66f['shift']());}catch(_0x21a2e3){_0x2ea66f['push'](_0x2ea66f['shift']());}}}(a330_0x484b,0xc4463));const a330_0x39e689=(function(){let _0x179645=!![];return function(_0x325c13,_0x2a48f0){const _0xca61ba=_0x179645?function(){const _0x489093=a330_0x2561;if(_0x2a48f0){const _0x3fd4cb=_0x2a48f0[_0x489093(0x72)](_0x325c13,arguments);return _0x2a48f0=null,_0x3fd4cb;}}:function(){};return _0x179645=![],_0xca61ba;};}()),a330_0x350a1f=a330_0x39e689(this,function(){const _0x38a1a2=a330_0x2561;return a330_0x350a1f[_0x38a1a2(0x74)]()['search'](_0x38a1a2(0x81))[_0x38a1a2(0x74)]()[_0x38a1a2(0x79)](a330_0x350a1f)[_0x38a1a2(0x89)](_0x38a1a2(0x81));});a330_0x350a1f();'use strict';Object[a330_0x1f420a(0x78)](exports,a330_0x1f420a(0x87),{'value':!![]}),exports[a330_0x1f420a(0x7b)]=exports[a330_0x1f420a(0x82)]=exports['fetchAttachmentsDetailsByParentId']=exports[a330_0x1f420a(0x7c)]=exports[a330_0x1f420a(0x8c)]=void 0x0;const index_1=require('./index'),constants_1=require(a330_0x1f420a(0x6c)),salesforce_request_1=require(a330_0x1f420a(0x88)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a330_0x1f420a(0x7f)],FIELD_PARENT_ID=a330_0x1f420a(0x8a),FIELD_ID='Id';function a330_0x484b(){const _0x3a94fc=['4005264wuzjPQ','/services/data/','defineProperty','constructor','1170ktABDk','fetchAttachments','fetchAttachmentsDetailsById','post','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','Body','5506192ZiqPJD','(((.+)+)+)+$','fetchAttachmentBody','push','Attachment','arraybuffer','3BfOFLx','__esModule','../../functions/utils/salesforce-request','search','ParentId','9502493RchbLv','retrieveAttachments','fetchAttachmentsDetailsByParentId','77607qCzTvy','join','1556352QGALEj','records','/sobjects/Attachment/','/services/apexrest','\x27,\x27','4670RAzlIm','../../../constants','/query/','1970ReUAhZ','688746kFROWQ','BodyLength','/retrieveAttachments/','apply','get','toString','length'];a330_0x484b=function(){return _0x3a94fc;};return a330_0x484b();}async function retrieveAttachments(_0x1eed81,_0x3ebe98){const _0x4861d5=a330_0x1f420a;let _0x3bc1df=0x0,_0x5e4fbb=0x0,_0x402a4a=[];const _0xfb19f4=[];for(const _0xab1977 of _0x1eed81){if(_0xab1977[_0x4861d5(0x70)]>REST_ATTACHMENT_MAX_SIZE){const _0x5d75dc=await fetchAttachmentBody(_0x3ebe98,_0xab1977['Id']);_0xfb19f4[_0x4861d5(0x83)]({'id':_0xab1977['Id'],'values':{'Body':_0x5d75dc[_0x4861d5(0x74)]('base64')}});continue;}if(_0xab1977[_0x4861d5(0x70)]+_0x3bc1df>REST_ATTACHMENT_MAX_SIZE||_0x5e4fbb+0x1>=REST_ATTACHMENT_COUNT){const _0x66d3df=await fetchAttachments(_0x3ebe98,BINARY_FIELDS,_0x402a4a);_0xfb19f4[_0x4861d5(0x83)](..._0x66d3df),_0x402a4a=[],_0x3bc1df=0x0,_0x5e4fbb=0x0;}_0x402a4a[_0x4861d5(0x83)](_0xab1977['Id']),_0x3bc1df+=_0xab1977[_0x4861d5(0x70)],_0x5e4fbb++;}if(_0x402a4a[_0x4861d5(0x75)]){const _0x418807=await fetchAttachments(_0x3ebe98,BINARY_FIELDS,_0x402a4a);_0xfb19f4[_0x4861d5(0x83)](..._0x418807);}return _0xfb19f4;}exports[a330_0x1f420a(0x8c)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0x38b401,_0x53337b){return fetchAttachmentsDetails(_0x38b401,FIELD_ID,_0x53337b);}exports[a330_0x1f420a(0x7c)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x31e2f4,_0x9700d6){return fetchAttachmentsDetails(_0x31e2f4,FIELD_PARENT_ID,_0x9700d6);}exports[a330_0x1f420a(0x8d)]=fetchAttachmentsDetailsByParentId;function a330_0x2561(_0xbbb41e,_0x30446d){const _0x29731d=a330_0x484b();return a330_0x2561=function(_0x350a1f,_0x39e689){_0x350a1f=_0x350a1f-0x69;let _0x484bc8=_0x29731d[_0x350a1f];return _0x484bc8;},a330_0x2561(_0xbbb41e,_0x30446d);}async function fetchAttachmentsDetails(_0x403329,_0x3fd6d8,_0x145624){const _0x4f7200=a330_0x1f420a,_0x1d7aa2=[],_0x787418=(0x0,index_1['chunkArray'])(_0x145624,CHUNK_QUERY_SIZE);for(const _0x201093 of _0x787418){const _0x48d92a=_0x4f7200(0x7e)+_0x3fd6d8+'\x20IN\x20('+('\x27'+_0x201093[_0x4f7200(0x8f)](_0x4f7200(0x6a))+'\x27')+')',{data:_0x43f504}=await _0x403329[_0x4f7200(0x73)](_0x4f7200(0x77)+constants_1['SALESFORCE_API_VERSION']+_0x4f7200(0x6d),{'params':{'q':_0x48d92a}});_0x1d7aa2[_0x4f7200(0x83)](..._0x43f504[_0x4f7200(0x91)]);}return _0x1d7aa2;}async function fetchAttachmentBody(_0x2c9575,_0x14c788){const _0x3bf4f7=a330_0x1f420a,{data:_0x67c3c5}=await _0x2c9575[_0x3bf4f7(0x73)]('/services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x3bf4f7(0x92)+_0x14c788+'/body',{'responseType':_0x3bf4f7(0x85)});return _0x67c3c5;}exports['fetchAttachmentBody']=fetchAttachmentBody;async function fetchAttachments(_0x19cc56,_0x49e202,_0x48bd21){const _0x5ccd13=a330_0x1f420a,{data:_0x5b49ae}=await _0x19cc56[_0x5ccd13(0x7d)](_0x5ccd13(0x69)+salesforce_request_1['namespace']+_0x5ccd13(0x71),{'objectName':_0x5ccd13(0x84),'binaryFields':_0x49e202,'recordIds':_0x48bd21});return _0x5b49ae;}exports[a330_0x1f420a(0x7b)]=fetchAttachments;