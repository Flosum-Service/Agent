const a331_0x3a988b=a331_0x469b;(function(_0x2bcb35,_0x4a4e29){const _0x1e5593=a331_0x469b,_0x32b303=_0x2bcb35();while(!![]){try{const _0x329d34=parseInt(_0x1e5593(0xad))/0x1*(parseInt(_0x1e5593(0xbd))/0x2)+parseInt(_0x1e5593(0xb6))/0x3+parseInt(_0x1e5593(0xa8))/0x4+-parseInt(_0x1e5593(0x97))/0x5+-parseInt(_0x1e5593(0xa7))/0x6*(-parseInt(_0x1e5593(0xb7))/0x7)+-parseInt(_0x1e5593(0x99))/0x8+-parseInt(_0x1e5593(0x9c))/0x9;if(_0x329d34===_0x4a4e29)break;else _0x32b303['push'](_0x32b303['shift']());}catch(_0x2565ea){_0x32b303['push'](_0x32b303['shift']());}}}(a331_0x4408,0xe8bf8));const a331_0x6cd578=(function(){let _0x5ac3d2=!![];return function(_0x463d43,_0x56fa53){const _0x4ea2e9=_0x5ac3d2?function(){const _0x6014cb=a331_0x469b;if(_0x56fa53){const _0x54d4f2=_0x56fa53[_0x6014cb(0xa6)](_0x463d43,arguments);return _0x56fa53=null,_0x54d4f2;}}:function(){};return _0x5ac3d2=![],_0x4ea2e9;};}()),a331_0x2eaed3=a331_0x6cd578(this,function(){const _0x3b184c=a331_0x469b;return a331_0x2eaed3[_0x3b184c(0xb8)]()[_0x3b184c(0xb2)]('(((.+)+)+)+$')['toString']()[_0x3b184c(0xb1)](a331_0x2eaed3)[_0x3b184c(0xb2)]('(((.+)+)+)+$');});a331_0x2eaed3();'use strict';function a331_0x4408(){const _0x473e2f=['/body','2pIHmOR','../../../constants','/retrieveAttachments/','975945WEzIqo','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','11857120fmsMDC','BodyLength','retrieveAttachments','18217476RYQVkJ','/services/data/','chunkArray','join','./index','SALESFORCE_API_VERSION','push','fetchAttachmentsDetailsByParentId','post','\x27,\x27','apply','6gyEETr','3170828VIaewy','fetchAttachmentsDetailsById','records','base64','defineProperty','1608573FyyLRP','__esModule','\x20IN\x20(','../../functions/utils/salesforce-request','constructor','search','Body','ParentId','Attachment','1360014yYLnPN','12601477iJMMVM','toString','/sobjects/Attachment/','/query/','fetchAttachmentBody'];a331_0x4408=function(){return _0x473e2f;};return a331_0x4408();}Object[a331_0x3a988b(0xac)](exports,a331_0x3a988b(0xae),{'value':!![]}),exports['fetchAttachments']=exports[a331_0x3a988b(0xbb)]=exports[a331_0x3a988b(0xa3)]=exports[a331_0x3a988b(0xa9)]=exports['retrieveAttachments']=void 0x0;const index_1=require(a331_0x3a988b(0xa0)),constants_1=require(a331_0x3a988b(0xbe)),salesforce_request_1=require(a331_0x3a988b(0xb0)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a331_0x3a988b(0xb3)],FIELD_PARENT_ID=a331_0x3a988b(0xb4),FIELD_ID='Id';async function retrieveAttachments(_0x493089,_0x32dbdc){const _0x5b643f=a331_0x3a988b;let _0x300c93=0x0,_0x266ea4=0x0,_0x1a6f31=[];const _0x5cc718=[];for(const _0x2a4a91 of _0x493089){if(_0x2a4a91[_0x5b643f(0x9a)]>REST_ATTACHMENT_MAX_SIZE){const _0x47341c=await fetchAttachmentBody(_0x32dbdc,_0x2a4a91['Id']);_0x5cc718['push']({'id':_0x2a4a91['Id'],'values':{'Body':_0x47341c[_0x5b643f(0xb8)](_0x5b643f(0xab))}});continue;}if(_0x2a4a91['BodyLength']+_0x300c93>REST_ATTACHMENT_MAX_SIZE||_0x266ea4+0x1>=REST_ATTACHMENT_COUNT){const _0x888c67=await fetchAttachments(_0x32dbdc,BINARY_FIELDS,_0x1a6f31);_0x5cc718['push'](..._0x888c67),_0x1a6f31=[],_0x300c93=0x0,_0x266ea4=0x0;}_0x1a6f31['push'](_0x2a4a91['Id']),_0x300c93+=_0x2a4a91[_0x5b643f(0x9a)],_0x266ea4++;}if(_0x1a6f31['length']){const _0x415d86=await fetchAttachments(_0x32dbdc,BINARY_FIELDS,_0x1a6f31);_0x5cc718[_0x5b643f(0xa2)](..._0x415d86);}return _0x5cc718;}exports[a331_0x3a988b(0x9b)]=retrieveAttachments;function a331_0x469b(_0x5838b5,_0xa8224a){const _0x494614=a331_0x4408();return a331_0x469b=function(_0x2eaed3,_0x6cd578){_0x2eaed3=_0x2eaed3-0x97;let _0x44088c=_0x494614[_0x2eaed3];return _0x44088c;},a331_0x469b(_0x5838b5,_0xa8224a);}function fetchAttachmentsDetailsById(_0x365dcc,_0x2e7e67){return fetchAttachmentsDetails(_0x365dcc,FIELD_ID,_0x2e7e67);}exports[a331_0x3a988b(0xa9)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x3b994b,_0x388385){return fetchAttachmentsDetails(_0x3b994b,FIELD_PARENT_ID,_0x388385);}exports[a331_0x3a988b(0xa3)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x4a3e8d,_0x5d0042,_0x5cd37c){const _0x503059=a331_0x3a988b,_0x4b3310=[],_0x245cac=(0x0,index_1[_0x503059(0x9e)])(_0x5cd37c,CHUNK_QUERY_SIZE);for(const _0x24c417 of _0x245cac){const _0x15c158=_0x503059(0x98)+_0x5d0042+_0x503059(0xaf)+('\x27'+_0x24c417[_0x503059(0x9f)](_0x503059(0xa5))+'\x27')+')',{data:_0x5bba1d}=await _0x4a3e8d['get'](_0x503059(0x9d)+constants_1[_0x503059(0xa1)]+_0x503059(0xba),{'params':{'q':_0x15c158}});_0x4b3310['push'](..._0x5bba1d[_0x503059(0xaa)]);}return _0x4b3310;}async function fetchAttachmentBody(_0x4b2ae3,_0x203ce1){const _0xc83709=a331_0x3a988b,{data:_0x56580c}=await _0x4b2ae3['get']('/services/data/'+constants_1[_0xc83709(0xa1)]+_0xc83709(0xb9)+_0x203ce1+_0xc83709(0xbc),{'responseType':'arraybuffer'});return _0x56580c;}exports[a331_0x3a988b(0xbb)]=fetchAttachmentBody;async function fetchAttachments(_0x28386a,_0x2eb73f,_0x18de63){const _0x3e331c=a331_0x3a988b,{data:_0x1ca437}=await _0x28386a[_0x3e331c(0xa4)]('/services/apexrest'+salesforce_request_1['namespace']+_0x3e331c(0xbf),{'objectName':_0x3e331c(0xb5),'binaryFields':_0x2eb73f,'recordIds':_0x18de63});return _0x1ca437;}exports['fetchAttachments']=fetchAttachments;