const a287_0x36fd80=a287_0x1112;(function(_0x5434c4,_0x5c2478){const _0x59c754=a287_0x1112,_0xd1aeff=_0x5434c4();while(!![]){try{const _0x58cb97=-parseInt(_0x59c754(0x1b4))/0x1*(-parseInt(_0x59c754(0x1a9))/0x2)+parseInt(_0x59c754(0x1c0))/0x3+-parseInt(_0x59c754(0x1ca))/0x4*(-parseInt(_0x59c754(0x1cd))/0x5)+-parseInt(_0x59c754(0x1b9))/0x6*(parseInt(_0x59c754(0x1a7))/0x7)+-parseInt(_0x59c754(0x1b2))/0x8+parseInt(_0x59c754(0x1a8))/0x9+-parseInt(_0x59c754(0x1bc))/0xa;if(_0x58cb97===_0x5c2478)break;else _0xd1aeff['push'](_0xd1aeff['shift']());}catch(_0x13cd07){_0xd1aeff['push'](_0xd1aeff['shift']());}}}(a287_0x11f9,0xbaeb9));function a287_0x11f9(){const _0x266e6b=['__esModule','SALESFORCE_API_VERSION','Body','toString','chunkArray','/query/','BodyLength','14324exIaqz','fetchAttachmentBody','records','1975QAimoq','defineProperty','/services/data/','/sobjects/Attachment/','Attachment','./index','(((.+)+)+)+$','21pczRtg','7990974BlQmJQ','2828wXZIyT','\x27,\x27','apply','/body','join','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','post','\x20IN\x20(','search','5052632hlxqSj','length','755xBqrjL','retrieveAttachments','arraybuffer','namespace','ParentId','462324naoaWt','/services/apexrest','../../functions/utils/salesforce-request','22737360TnjXyI','fetchAttachmentsDetailsByParentId','get','fetchAttachments','1596453YqIXXG','fetchAttachmentsDetailsById','push'];a287_0x11f9=function(){return _0x266e6b;};return a287_0x11f9();}const a287_0xf31043=(function(){let _0x5ba6dd=!![];return function(_0x4991c0,_0x5efa3c){const _0x4a79ca=_0x5ba6dd?function(){const _0x4518b2=a287_0x1112;if(_0x5efa3c){const _0x110c92=_0x5efa3c[_0x4518b2(0x1ab)](_0x4991c0,arguments);return _0x5efa3c=null,_0x110c92;}}:function(){};return _0x5ba6dd=![],_0x4a79ca;};}()),a287_0x62d4ab=a287_0xf31043(this,function(){const _0x36ee50=a287_0x1112;return a287_0x62d4ab[_0x36ee50(0x1c6)]()[_0x36ee50(0x1b1)](_0x36ee50(0x1a6))[_0x36ee50(0x1c6)]()['constructor'](a287_0x62d4ab)[_0x36ee50(0x1b1)](_0x36ee50(0x1a6));});a287_0x62d4ab();'use strict';Object[a287_0x36fd80(0x1ce)](exports,a287_0x36fd80(0x1c3),{'value':!![]}),exports[a287_0x36fd80(0x1bf)]=exports[a287_0x36fd80(0x1cb)]=exports[a287_0x36fd80(0x1bd)]=exports['fetchAttachmentsDetailsById']=exports['retrieveAttachments']=void 0x0;const index_1=require(a287_0x36fd80(0x1d2)),constants_1=require('../../../constants'),salesforce_request_1=require(a287_0x36fd80(0x1bb)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a287_0x36fd80(0x1c5)],FIELD_PARENT_ID=a287_0x36fd80(0x1b8),FIELD_ID='Id';async function retrieveAttachments(_0x50eb72,_0xdce0){const _0x4598bd=a287_0x36fd80;let _0x556ce6=0x0,_0x3718e2=0x0,_0x348721=[];const _0x440b92=[];for(const _0x3b8457 of _0x50eb72){if(_0x3b8457[_0x4598bd(0x1c9)]>REST_ATTACHMENT_MAX_SIZE){const _0x25f77c=await fetchAttachmentBody(_0xdce0,_0x3b8457['Id']);_0x440b92['push']({'id':_0x3b8457['Id'],'values':{'Body':_0x25f77c['toString']('base64')}});continue;}if(_0x3b8457['BodyLength']+_0x556ce6>REST_ATTACHMENT_MAX_SIZE||_0x3718e2+0x1>=REST_ATTACHMENT_COUNT){const _0x40a76e=await fetchAttachments(_0xdce0,BINARY_FIELDS,_0x348721);_0x440b92[_0x4598bd(0x1c2)](..._0x40a76e),_0x348721=[],_0x556ce6=0x0,_0x3718e2=0x0;}_0x348721['push'](_0x3b8457['Id']),_0x556ce6+=_0x3b8457['BodyLength'],_0x3718e2++;}if(_0x348721[_0x4598bd(0x1b3)]){const _0x4d43f5=await fetchAttachments(_0xdce0,BINARY_FIELDS,_0x348721);_0x440b92[_0x4598bd(0x1c2)](..._0x4d43f5);}return _0x440b92;}exports[a287_0x36fd80(0x1b5)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0xc32fd,_0x1c1c3b){return fetchAttachmentsDetails(_0xc32fd,FIELD_ID,_0x1c1c3b);}exports[a287_0x36fd80(0x1c1)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x2d5d83,_0x566d48){return fetchAttachmentsDetails(_0x2d5d83,FIELD_PARENT_ID,_0x566d48);}exports[a287_0x36fd80(0x1bd)]=fetchAttachmentsDetailsByParentId;function a287_0x1112(_0x23eebe,_0x12c714){const _0x25fcfa=a287_0x11f9();return a287_0x1112=function(_0x62d4ab,_0xf31043){_0x62d4ab=_0x62d4ab-0x1a6;let _0x11f9b3=_0x25fcfa[_0x62d4ab];return _0x11f9b3;},a287_0x1112(_0x23eebe,_0x12c714);}async function fetchAttachmentsDetails(_0x281398,_0x1db856,_0x45f942){const _0x23cc8f=a287_0x36fd80,_0x72315c=[],_0x46cbc1=(0x0,index_1[_0x23cc8f(0x1c7)])(_0x45f942,CHUNK_QUERY_SIZE);for(const _0x3130f1 of _0x46cbc1){const _0x15a75c=_0x23cc8f(0x1ae)+_0x1db856+_0x23cc8f(0x1b0)+('\x27'+_0x3130f1[_0x23cc8f(0x1ad)](_0x23cc8f(0x1aa))+'\x27')+')',{data:_0x2e9a45}=await _0x281398[_0x23cc8f(0x1be)](_0x23cc8f(0x1cf)+constants_1['SALESFORCE_API_VERSION']+_0x23cc8f(0x1c8),{'params':{'q':_0x15a75c}});_0x72315c['push'](..._0x2e9a45[_0x23cc8f(0x1cc)]);}return _0x72315c;}async function fetchAttachmentBody(_0x557b36,_0x4440e8){const _0x2ca5f8=a287_0x36fd80,{data:_0x4a7bba}=await _0x557b36[_0x2ca5f8(0x1be)](_0x2ca5f8(0x1cf)+constants_1[_0x2ca5f8(0x1c4)]+_0x2ca5f8(0x1d0)+_0x4440e8+_0x2ca5f8(0x1ac),{'responseType':_0x2ca5f8(0x1b6)});return _0x4a7bba;}exports['fetchAttachmentBody']=fetchAttachmentBody;async function fetchAttachments(_0x2fbc03,_0xab96f,_0x2329fd){const _0x3a5509=a287_0x36fd80,{data:_0x522259}=await _0x2fbc03[_0x3a5509(0x1af)](_0x3a5509(0x1ba)+salesforce_request_1[_0x3a5509(0x1b7)]+'/retrieveAttachments/',{'objectName':_0x3a5509(0x1d1),'binaryFields':_0xab96f,'recordIds':_0x2329fd});return _0x522259;}exports['fetchAttachments']=fetchAttachments;