const a287_0x42694f=a287_0x20d6;(function(_0x3fc3cc,_0x3b1516){const _0x238bc3=a287_0x20d6,_0x18bc2f=_0x3fc3cc();while(!![]){try{const _0xf8b631=-parseInt(_0x238bc3(0x190))/0x1*(parseInt(_0x238bc3(0x196))/0x2)+parseInt(_0x238bc3(0x1a6))/0x3+parseInt(_0x238bc3(0x1ac))/0x4+-parseInt(_0x238bc3(0x1b5))/0x5+-parseInt(_0x238bc3(0x1a8))/0x6+parseInt(_0x238bc3(0x1b8))/0x7+-parseInt(_0x238bc3(0x1a5))/0x8*(-parseInt(_0x238bc3(0x1a0))/0x9);if(_0xf8b631===_0x3b1516)break;else _0x18bc2f['push'](_0x18bc2f['shift']());}catch(_0x34305b){_0x18bc2f['push'](_0x18bc2f['shift']());}}}(a287_0x343d,0x8059c));const a287_0x4f2990=(function(){let _0x41d33f=!![];return function(_0x50490c,_0x325c62){const _0x21ca47=_0x41d33f?function(){if(_0x325c62){const _0x1bbb13=_0x325c62['apply'](_0x50490c,arguments);return _0x325c62=null,_0x1bbb13;}}:function(){};return _0x41d33f=![],_0x21ca47;};}()),a287_0x449ca7=a287_0x4f2990(this,function(){const _0x5a7e18=a287_0x20d6;return a287_0x449ca7['toString']()[_0x5a7e18(0x195)]('(((.+)+)+)+$')[_0x5a7e18(0x1b0)]()[_0x5a7e18(0x1ab)](a287_0x449ca7)['search'](_0x5a7e18(0x191));});a287_0x449ca7();'use strict';Object[a287_0x42694f(0x1a7)](exports,a287_0x42694f(0x1b6),{'value':!![]}),exports['fetchAttachments']=exports['fetchAttachmentBody']=exports['fetchAttachmentsDetailsByParentId']=exports[a287_0x42694f(0x19c)]=exports[a287_0x42694f(0x1af)]=void 0x0;const index_1=require(a287_0x42694f(0x1b3)),constants_1=require('../../../constants'),salesforce_request_1=require('../../functions/utils/salesforce-request'),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a287_0x42694f(0x1b7)],FIELD_PARENT_ID=a287_0x42694f(0x1ae),FIELD_ID='Id';function a287_0x20d6(_0x19c7c7,_0x2859e8){const _0xb2c327=a287_0x343d();return a287_0x20d6=function(_0x449ca7,_0x4f2990){_0x449ca7=_0x449ca7-0x18f;let _0x343da8=_0xb2c327[_0x449ca7];return _0x343da8;},a287_0x20d6(_0x19c7c7,_0x2859e8);}async function retrieveAttachments(_0x91ba98,_0xa57d7e){const _0x5c93fc=a287_0x42694f;let _0x465fb9=0x0,_0x3853ae=0x0,_0x1d5995=[];const _0x4a82ac=[];for(const _0x4b3bee of _0x91ba98){if(_0x4b3bee[_0x5c93fc(0x1ad)]>REST_ATTACHMENT_MAX_SIZE){const _0x2a7017=await fetchAttachmentBody(_0xa57d7e,_0x4b3bee['Id']);_0x4a82ac[_0x5c93fc(0x19f)]({'id':_0x4b3bee['Id'],'values':{'Body':_0x2a7017[_0x5c93fc(0x1b0)](_0x5c93fc(0x192))}});continue;}if(_0x4b3bee[_0x5c93fc(0x1ad)]+_0x465fb9>REST_ATTACHMENT_MAX_SIZE||_0x3853ae+0x1>=REST_ATTACHMENT_COUNT){const _0x3f9d50=await fetchAttachments(_0xa57d7e,BINARY_FIELDS,_0x1d5995);_0x4a82ac[_0x5c93fc(0x19f)](..._0x3f9d50),_0x1d5995=[],_0x465fb9=0x0,_0x3853ae=0x0;}_0x1d5995[_0x5c93fc(0x19f)](_0x4b3bee['Id']),_0x465fb9+=_0x4b3bee['BodyLength'],_0x3853ae++;}if(_0x1d5995['length']){const _0x6001fb=await fetchAttachments(_0xa57d7e,BINARY_FIELDS,_0x1d5995);_0x4a82ac[_0x5c93fc(0x19f)](..._0x6001fb);}return _0x4a82ac;}exports[a287_0x42694f(0x1af)]=retrieveAttachments;function a287_0x343d(){const _0x438921=['fetchAttachmentsDetailsById','Attachment','\x20IN\x20(','push','18BchoRb','/services/apexrest','fetchAttachmentsDetailsByParentId','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','/retrieveAttachments/','6073592NqWSyC','2514072dqENJO','defineProperty','2864148MLKSyt','fetchAttachments','/body','constructor','920768GhfqHb','BodyLength','ParentId','retrieveAttachments','toString','/services/data/','get','./index','SALESFORCE_API_VERSION','4741170kbxYHI','__esModule','Body','2534350AsAKAB','join','997348cOWRWf','(((.+)+)+)+$','base64','\x27,\x27','post','search','2dnqWjA','arraybuffer','records','namespace','/sobjects/Attachment/','chunkArray'];a287_0x343d=function(){return _0x438921;};return a287_0x343d();}function fetchAttachmentsDetailsById(_0x2bb852,_0x243147){return fetchAttachmentsDetails(_0x2bb852,FIELD_ID,_0x243147);}exports['fetchAttachmentsDetailsById']=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x18bf9e,_0x40666d){return fetchAttachmentsDetails(_0x18bf9e,FIELD_PARENT_ID,_0x40666d);}exports[a287_0x42694f(0x1a2)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x1deab5,_0x35d677,_0x36d678){const _0x48f6b1=a287_0x42694f,_0x51080f=[],_0x1431a8=(0x0,index_1[_0x48f6b1(0x19b)])(_0x36d678,CHUNK_QUERY_SIZE);for(const _0x3e4646 of _0x1431a8){const _0x11bfee=_0x48f6b1(0x1a3)+_0x35d677+_0x48f6b1(0x19e)+('\x27'+_0x3e4646[_0x48f6b1(0x18f)](_0x48f6b1(0x193))+'\x27')+')',{data:_0xbb20ea}=await _0x1deab5['get'](_0x48f6b1(0x1b1)+constants_1[_0x48f6b1(0x1b4)]+'/query/',{'params':{'q':_0x11bfee}});_0x51080f['push'](..._0xbb20ea[_0x48f6b1(0x198)]);}return _0x51080f;}async function fetchAttachmentBody(_0x42ae1c,_0x2f788f){const _0x4da79c=a287_0x42694f,{data:_0x578ef2}=await _0x42ae1c[_0x4da79c(0x1b2)](_0x4da79c(0x1b1)+constants_1[_0x4da79c(0x1b4)]+_0x4da79c(0x19a)+_0x2f788f+_0x4da79c(0x1aa),{'responseType':_0x4da79c(0x197)});return _0x578ef2;}exports['fetchAttachmentBody']=fetchAttachmentBody;async function fetchAttachments(_0x64b60f,_0xf9b6b,_0x15bb08){const _0x449c27=a287_0x42694f,{data:_0x1efdee}=await _0x64b60f[_0x449c27(0x194)](_0x449c27(0x1a1)+salesforce_request_1[_0x449c27(0x199)]+_0x449c27(0x1a4),{'objectName':_0x449c27(0x19d),'binaryFields':_0xf9b6b,'recordIds':_0x15bb08});return _0x1efdee;}exports[a287_0x42694f(0x1a9)]=fetchAttachments;