const a280_0x28dc0f=a280_0xea16;function a280_0x564b(){const _0x3ad924=['apply','2tSAuVk','BodyLength','namespace','./index','(((.+)+)+)+$','__esModule','2666664NfETSi','/services/data/','/query/','fetchAttachments','join','fetchAttachmentsDetailsById','fetchAttachmentsDetailsByParentId','182775GOdpAs','1704600QKVxlg','172637rUSwAe','get','records','/retrieveAttachments/','475735XhiPDG','Body','search','fetchAttachmentBody','4HcJtbr','\x20IN\x20(','/sobjects/Attachment/','../../functions/utils/salesforce-request','SALESFORCE_API_VERSION','toString','base64','chunkArray','push','Attachment','/services/apexrest','retrieveAttachments','ParentId','2954889hCgWwz','3488072LnmJUw'];a280_0x564b=function(){return _0x3ad924;};return a280_0x564b();}(function(_0x1066dd,_0xb50462){const _0x332a6c=a280_0xea16,_0x22fbcc=_0x1066dd();while(!![]){try{const _0x253cb8=parseInt(_0x332a6c(0x112))/0x1*(parseInt(_0x332a6c(0x103))/0x2)+-parseInt(_0x332a6c(0x110))/0x3+-parseInt(_0x332a6c(0x11a))/0x4*(parseInt(_0x332a6c(0x116))/0x5)+parseInt(_0x332a6c(0x109))/0x6+-parseInt(_0x332a6c(0x100))/0x7+parseInt(_0x332a6c(0x101))/0x8+-parseInt(_0x332a6c(0x111))/0x9;if(_0x253cb8===_0xb50462)break;else _0x22fbcc['push'](_0x22fbcc['shift']());}catch(_0x411fc2){_0x22fbcc['push'](_0x22fbcc['shift']());}}}(a280_0x564b,0x45b33));const a280_0x106118=(function(){let _0x4a3e97=!![];return function(_0x418f0e,_0x38d6bb){const _0x439ef8=_0x4a3e97?function(){const _0x149061=a280_0xea16;if(_0x38d6bb){const _0x3c590c=_0x38d6bb[_0x149061(0x102)](_0x418f0e,arguments);return _0x38d6bb=null,_0x3c590c;}}:function(){};return _0x4a3e97=![],_0x439ef8;};}()),a280_0x1cf0d0=a280_0x106118(this,function(){const _0x39c327=a280_0xea16;return a280_0x1cf0d0['toString']()['search']('(((.+)+)+)+$')[_0x39c327(0xf8)]()['constructor'](a280_0x1cf0d0)[_0x39c327(0x118)](_0x39c327(0x107));});a280_0x1cf0d0();'use strict';Object['defineProperty'](exports,a280_0x28dc0f(0x108),{'value':!![]}),exports[a280_0x28dc0f(0x10c)]=exports[a280_0x28dc0f(0x119)]=exports[a280_0x28dc0f(0x10f)]=exports['fetchAttachmentsDetailsById']=exports[a280_0x28dc0f(0xfe)]=void 0x0;const index_1=require(a280_0x28dc0f(0x106)),constants_1=require('../../../constants'),salesforce_request_1=require(a280_0x28dc0f(0xf6)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a280_0x28dc0f(0x117)],FIELD_PARENT_ID=a280_0x28dc0f(0xff),FIELD_ID='Id';async function retrieveAttachments(_0x435685,_0x18d792){const _0xcdce3c=a280_0x28dc0f;let _0x28f05b=0x0,_0x266b17=0x0,_0x446140=[];const _0x3972bf=[];for(const _0x172d6e of _0x435685){if(_0x172d6e[_0xcdce3c(0x104)]>REST_ATTACHMENT_MAX_SIZE){const _0x35b7fd=await fetchAttachmentBody(_0x18d792,_0x172d6e['Id']);_0x3972bf[_0xcdce3c(0xfb)]({'id':_0x172d6e['Id'],'values':{'Body':_0x35b7fd[_0xcdce3c(0xf8)](_0xcdce3c(0xf9))}});continue;}if(_0x172d6e[_0xcdce3c(0x104)]+_0x28f05b>REST_ATTACHMENT_MAX_SIZE||_0x266b17+0x1>=REST_ATTACHMENT_COUNT){const _0x1cb63b=await fetchAttachments(_0x18d792,BINARY_FIELDS,_0x446140);_0x3972bf['push'](..._0x1cb63b),_0x446140=[],_0x28f05b=0x0,_0x266b17=0x0;}_0x446140['push'](_0x172d6e['Id']),_0x28f05b+=_0x172d6e[_0xcdce3c(0x104)],_0x266b17++;}if(_0x446140['length']){const _0x29fea9=await fetchAttachments(_0x18d792,BINARY_FIELDS,_0x446140);_0x3972bf['push'](..._0x29fea9);}return _0x3972bf;}exports['retrieveAttachments']=retrieveAttachments;function fetchAttachmentsDetailsById(_0x24eb0c,_0x25676b){return fetchAttachmentsDetails(_0x24eb0c,FIELD_ID,_0x25676b);}exports[a280_0x28dc0f(0x10e)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x3165f1,_0x124657){return fetchAttachmentsDetails(_0x3165f1,FIELD_PARENT_ID,_0x124657);}function a280_0xea16(_0x17ac46,_0x40d235){const _0x59b58e=a280_0x564b();return a280_0xea16=function(_0x1cf0d0,_0x106118){_0x1cf0d0=_0x1cf0d0-0xf6;let _0x564b52=_0x59b58e[_0x1cf0d0];return _0x564b52;},a280_0xea16(_0x17ac46,_0x40d235);}exports[a280_0x28dc0f(0x10f)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x2359b0,_0x445ce9,_0x57e282){const _0x4ac86c=a280_0x28dc0f,_0x5c6a09=[],_0x33217d=(0x0,index_1[_0x4ac86c(0xfa)])(_0x57e282,CHUNK_QUERY_SIZE);for(const _0x3f3cd2 of _0x33217d){const _0x330982='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20'+_0x445ce9+_0x4ac86c(0x11b)+('\x27'+_0x3f3cd2[_0x4ac86c(0x10d)]('\x27,\x27')+'\x27')+')',{data:_0x38dc13}=await _0x2359b0['get'](_0x4ac86c(0x10a)+constants_1[_0x4ac86c(0xf7)]+_0x4ac86c(0x10b),{'params':{'q':_0x330982}});_0x5c6a09[_0x4ac86c(0xfb)](..._0x38dc13[_0x4ac86c(0x114)]);}return _0x5c6a09;}async function fetchAttachmentBody(_0x28c0cd,_0x384963){const _0x1f9ec0=a280_0x28dc0f,{data:_0x362388}=await _0x28c0cd[_0x1f9ec0(0x113)](_0x1f9ec0(0x10a)+constants_1['SALESFORCE_API_VERSION']+_0x1f9ec0(0x11c)+_0x384963+'/body',{'responseType':'arraybuffer'});return _0x362388;}exports['fetchAttachmentBody']=fetchAttachmentBody;async function fetchAttachments(_0x5d54bc,_0x296c06,_0x3c22c1){const _0x322d54=a280_0x28dc0f,{data:_0x1bda37}=await _0x5d54bc['post'](_0x322d54(0xfd)+salesforce_request_1[_0x322d54(0x105)]+_0x322d54(0x115),{'objectName':_0x322d54(0xfc),'binaryFields':_0x296c06,'recordIds':_0x3c22c1});return _0x1bda37;}exports[a280_0x28dc0f(0x10c)]=fetchAttachments;