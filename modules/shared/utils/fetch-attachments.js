const a280_0x28af45=a280_0x18e9;function a280_0x3800(){const _0x4b390b=['ParentId','records','fetchAttachmentsDetailsById','/query/','namespace','push','retrieveAttachments','BodyLength','794682aCbnev','\x27,\x27','4310946rXgVCX','length','5058102XSqjzk','chunkArray','Attachment','fetchAttachmentBody','/sobjects/Attachment/','8zgiPEM','../../functions/utils/salesforce-request','3345qkOLbK','/services/apexrest','fetchAttachmentsDetailsByParentId','search','SALESFORCE_API_VERSION','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','base64','69498xAdvOt','4024anenVv','5BznXYm','get','__esModule','defineProperty','Body','8366715BtDSIL','10CxAtih','/retrieveAttachments/','join','toString','apply','../../../constants','fetchAttachments','27684503bUuJzL','/body','arraybuffer'];a280_0x3800=function(){return _0x4b390b;};return a280_0x3800();}(function(_0x34d6f3,_0x421196){const _0x14c84d=a280_0x18e9,_0x4a33ca=_0x34d6f3();while(!![]){try{const _0x36b7ed=-parseInt(_0x14c84d(0x8b))/0x1+-parseInt(_0x14c84d(0x79))/0x2+parseInt(_0x14c84d(0x84))/0x3*(-parseInt(_0x14c84d(0x8c))/0x4)+parseInt(_0x14c84d(0x8d))/0x5*(-parseInt(_0x14c84d(0x7d))/0x6)+parseInt(_0x14c84d(0x92))/0x7*(parseInt(_0x14c84d(0x82))/0x8)+-parseInt(_0x14c84d(0x7b))/0x9+parseInt(_0x14c84d(0x93))/0xa*(parseInt(_0x14c84d(0x9a))/0xb);if(_0x36b7ed===_0x421196)break;else _0x4a33ca['push'](_0x4a33ca['shift']());}catch(_0xec1b70){_0x4a33ca['push'](_0x4a33ca['shift']());}}}(a280_0x3800,0xc3ac6));const a280_0x3a86a6=(function(){let _0x3d0d3c=!![];return function(_0x5c99ba,_0x601aff){const _0x2263a6=_0x3d0d3c?function(){const _0xa511ec=a280_0x18e9;if(_0x601aff){const _0x60f9bf=_0x601aff[_0xa511ec(0x97)](_0x5c99ba,arguments);return _0x601aff=null,_0x60f9bf;}}:function(){};return _0x3d0d3c=![],_0x2263a6;};}()),a280_0x38be90=a280_0x3a86a6(this,function(){const _0x2fdcaa=a280_0x18e9;return a280_0x38be90[_0x2fdcaa(0x96)]()[_0x2fdcaa(0x87)]('(((.+)+)+)+$')['toString']()['constructor'](a280_0x38be90)[_0x2fdcaa(0x87)]('(((.+)+)+)+$');});function a280_0x18e9(_0x3b1cc8,_0x15e739){const _0x370b36=a280_0x3800();return a280_0x18e9=function(_0x38be90,_0x3a86a6){_0x38be90=_0x38be90-0x75;let _0x3800ed=_0x370b36[_0x38be90];return _0x3800ed;},a280_0x18e9(_0x3b1cc8,_0x15e739);}a280_0x38be90();'use strict';Object[a280_0x28af45(0x90)](exports,a280_0x28af45(0x8f),{'value':!![]}),exports[a280_0x28af45(0x99)]=exports[a280_0x28af45(0x80)]=exports['fetchAttachmentsDetailsByParentId']=exports[a280_0x28af45(0x9f)]=exports[a280_0x28af45(0x77)]=void 0x0;const index_1=require('./index'),constants_1=require(a280_0x28af45(0x98)),salesforce_request_1=require(a280_0x28af45(0x83)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a280_0x28af45(0x91)],FIELD_PARENT_ID=a280_0x28af45(0x9d),FIELD_ID='Id';async function retrieveAttachments(_0x1beb4c,_0xf0d712){const _0x480605=a280_0x28af45;let _0x4e5375=0x0,_0x566c3e=0x0,_0x495156=[];const _0x4a6f25=[];for(const _0x1decac of _0x1beb4c){if(_0x1decac[_0x480605(0x78)]>REST_ATTACHMENT_MAX_SIZE){const _0x16f233=await fetchAttachmentBody(_0xf0d712,_0x1decac['Id']);_0x4a6f25[_0x480605(0x76)]({'id':_0x1decac['Id'],'values':{'Body':_0x16f233['toString'](_0x480605(0x8a))}});continue;}if(_0x1decac['BodyLength']+_0x4e5375>REST_ATTACHMENT_MAX_SIZE||_0x566c3e+0x1>=REST_ATTACHMENT_COUNT){const _0x3740bd=await fetchAttachments(_0xf0d712,BINARY_FIELDS,_0x495156);_0x4a6f25[_0x480605(0x76)](..._0x3740bd),_0x495156=[],_0x4e5375=0x0,_0x566c3e=0x0;}_0x495156[_0x480605(0x76)](_0x1decac['Id']),_0x4e5375+=_0x1decac[_0x480605(0x78)],_0x566c3e++;}if(_0x495156[_0x480605(0x7c)]){const _0x44e80a=await fetchAttachments(_0xf0d712,BINARY_FIELDS,_0x495156);_0x4a6f25['push'](..._0x44e80a);}return _0x4a6f25;}exports['retrieveAttachments']=retrieveAttachments;function fetchAttachmentsDetailsById(_0x3c24d3,_0x54d096){return fetchAttachmentsDetails(_0x3c24d3,FIELD_ID,_0x54d096);}exports['fetchAttachmentsDetailsById']=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x38e754,_0x2d8878){return fetchAttachmentsDetails(_0x38e754,FIELD_PARENT_ID,_0x2d8878);}exports[a280_0x28af45(0x86)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x2b66f5,_0x52e902,_0x57957b){const _0x49a8ca=a280_0x28af45,_0xe94281=[],_0x218577=(0x0,index_1[_0x49a8ca(0x7e)])(_0x57957b,CHUNK_QUERY_SIZE);for(const _0x313add of _0x218577){const _0x4ff591=_0x49a8ca(0x89)+_0x52e902+'\x20IN\x20('+('\x27'+_0x313add[_0x49a8ca(0x95)](_0x49a8ca(0x7a))+'\x27')+')',{data:_0x19013c}=await _0x2b66f5['get']('/services/data/'+constants_1[_0x49a8ca(0x88)]+_0x49a8ca(0xa0),{'params':{'q':_0x4ff591}});_0xe94281[_0x49a8ca(0x76)](..._0x19013c[_0x49a8ca(0x9e)]);}return _0xe94281;}async function fetchAttachmentBody(_0x46cc01,_0xa41755){const _0x1eaf94=a280_0x28af45,{data:_0x1fd16f}=await _0x46cc01[_0x1eaf94(0x8e)]('/services/data/'+constants_1[_0x1eaf94(0x88)]+_0x1eaf94(0x81)+_0xa41755+_0x1eaf94(0x9b),{'responseType':_0x1eaf94(0x9c)});return _0x1fd16f;}exports[a280_0x28af45(0x80)]=fetchAttachmentBody;async function fetchAttachments(_0x36aee0,_0x4ecbdd,_0xea6f6e){const _0x11619a=a280_0x28af45,{data:_0x5caf34}=await _0x36aee0['post'](_0x11619a(0x85)+salesforce_request_1[_0x11619a(0x75)]+_0x11619a(0x94),{'objectName':_0x11619a(0x7f),'binaryFields':_0x4ecbdd,'recordIds':_0xea6f6e});return _0x5caf34;}exports[a280_0x28af45(0x99)]=fetchAttachments;