const a279_0x1bb296=a279_0x3f46;(function(_0x3bca81,_0x464d9f){const _0x1d8d6f=a279_0x3f46,_0x221b87=_0x3bca81();while(!![]){try{const _0x54119d=-parseInt(_0x1d8d6f(0x134))/0x1+parseInt(_0x1d8d6f(0x142))/0x2+-parseInt(_0x1d8d6f(0x15a))/0x3*(parseInt(_0x1d8d6f(0x145))/0x4)+-parseInt(_0x1d8d6f(0x14c))/0x5+-parseInt(_0x1d8d6f(0x137))/0x6+parseInt(_0x1d8d6f(0x156))/0x7+parseInt(_0x1d8d6f(0x139))/0x8;if(_0x54119d===_0x464d9f)break;else _0x221b87['push'](_0x221b87['shift']());}catch(_0x57afd7){_0x221b87['push'](_0x221b87['shift']());}}}(a279_0x52b9,0x5fd0c));const a279_0x1bc81b=(function(){let _0x1f5a40=!![];return function(_0xf2ec87,_0xbda4cb){const _0x157b3d=_0x1f5a40?function(){const _0x27b7fa=a279_0x3f46;if(_0xbda4cb){const _0x46f043=_0xbda4cb[_0x27b7fa(0x14d)](_0xf2ec87,arguments);return _0xbda4cb=null,_0x46f043;}}:function(){};return _0x1f5a40=![],_0x157b3d;};}()),a279_0x4debbe=a279_0x1bc81b(this,function(){const _0x55e9c2=a279_0x3f46;return a279_0x4debbe[_0x55e9c2(0x135)]()[_0x55e9c2(0x14f)](_0x55e9c2(0x148))['toString']()[_0x55e9c2(0x13b)](a279_0x4debbe)[_0x55e9c2(0x14f)](_0x55e9c2(0x148));});a279_0x4debbe();function a279_0x3f46(_0x3835a9,_0x69608f){const _0x49666e=a279_0x52b9();return a279_0x3f46=function(_0x4debbe,_0x1bc81b){_0x4debbe=_0x4debbe-0x132;let _0x52b930=_0x49666e[_0x4debbe];return _0x52b930;},a279_0x3f46(_0x3835a9,_0x69608f);}'use strict';Object['defineProperty'](exports,a279_0x1bb296(0x15c),{'value':!![]}),exports[a279_0x1bb296(0x157)]=exports[a279_0x1bb296(0x13c)]=exports['fetchAttachmentsDetailsByParentId']=exports[a279_0x1bb296(0x155)]=exports['retrieveAttachments']=void 0x0;function a279_0x52b9(){const _0x236b6b=['chunkArray','(((.+)+)+)+$','SALESFORCE_API_VERSION','records','\x27,\x27','2151210zeXNss','apply','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','search','BodyLength','Attachment','fetchAttachmentsDetailsByParentId','retrieveAttachments','/services/data/','fetchAttachmentsDetailsById','2274419sMruVu','fetchAttachments','join','push','759QbqYcb','ParentId','__esModule','./index','../../functions/utils/salesforce-request','469158wjehEi','toString','/body','2481996NtJOCP','namespace','11626568hNFYOG','get','constructor','fetchAttachmentBody','../../../constants','/sobjects/Attachment/','/retrieveAttachments/','base64','post','625214BrQVqE','arraybuffer','/services/apexrest','6092drnxFK','/query/'];a279_0x52b9=function(){return _0x236b6b;};return a279_0x52b9();}const index_1=require(a279_0x1bb296(0x132)),constants_1=require(a279_0x1bb296(0x13d)),salesforce_request_1=require(a279_0x1bb296(0x133)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=['Body'],FIELD_PARENT_ID=a279_0x1bb296(0x15b),FIELD_ID='Id';async function retrieveAttachments(_0x3155c4,_0xf9555d){const _0x4f218=a279_0x1bb296;let _0x3c57e5=0x0,_0x4a0b09=0x0,_0x4d2769=[];const _0x38ecfd=[];for(const _0x143372 of _0x3155c4){if(_0x143372['BodyLength']>REST_ATTACHMENT_MAX_SIZE){const _0x32d64f=await fetchAttachmentBody(_0xf9555d,_0x143372['Id']);_0x38ecfd[_0x4f218(0x159)]({'id':_0x143372['Id'],'values':{'Body':_0x32d64f[_0x4f218(0x135)](_0x4f218(0x140))}});continue;}if(_0x143372['BodyLength']+_0x3c57e5>REST_ATTACHMENT_MAX_SIZE||_0x4a0b09+0x1>=REST_ATTACHMENT_COUNT){const _0x228e94=await fetchAttachments(_0xf9555d,BINARY_FIELDS,_0x4d2769);_0x38ecfd[_0x4f218(0x159)](..._0x228e94),_0x4d2769=[],_0x3c57e5=0x0,_0x4a0b09=0x0;}_0x4d2769[_0x4f218(0x159)](_0x143372['Id']),_0x3c57e5+=_0x143372[_0x4f218(0x150)],_0x4a0b09++;}if(_0x4d2769['length']){const _0x3fad35=await fetchAttachments(_0xf9555d,BINARY_FIELDS,_0x4d2769);_0x38ecfd[_0x4f218(0x159)](..._0x3fad35);}return _0x38ecfd;}exports[a279_0x1bb296(0x153)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0xe2f73c,_0x35ab2d){return fetchAttachmentsDetails(_0xe2f73c,FIELD_ID,_0x35ab2d);}exports[a279_0x1bb296(0x155)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x553ff0,_0x1b55ea){return fetchAttachmentsDetails(_0x553ff0,FIELD_PARENT_ID,_0x1b55ea);}exports[a279_0x1bb296(0x152)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x2033e9,_0x518868,_0x23dc49){const _0x319f0b=a279_0x1bb296,_0x5a5ce0=[],_0x2cc6fa=(0x0,index_1[_0x319f0b(0x147)])(_0x23dc49,CHUNK_QUERY_SIZE);for(const _0x944c80 of _0x2cc6fa){const _0x404e1b=_0x319f0b(0x14e)+_0x518868+'\x20IN\x20('+('\x27'+_0x944c80[_0x319f0b(0x158)](_0x319f0b(0x14b))+'\x27')+')',{data:_0x14bc45}=await _0x2033e9['get'](_0x319f0b(0x154)+constants_1[_0x319f0b(0x149)]+_0x319f0b(0x146),{'params':{'q':_0x404e1b}});_0x5a5ce0[_0x319f0b(0x159)](..._0x14bc45[_0x319f0b(0x14a)]);}return _0x5a5ce0;}async function fetchAttachmentBody(_0x3e849f,_0x4e1837){const _0x582962=a279_0x1bb296,{data:_0x3d44d3}=await _0x3e849f[_0x582962(0x13a)](_0x582962(0x154)+constants_1['SALESFORCE_API_VERSION']+_0x582962(0x13e)+_0x4e1837+_0x582962(0x136),{'responseType':_0x582962(0x143)});return _0x3d44d3;}exports['fetchAttachmentBody']=fetchAttachmentBody;async function fetchAttachments(_0x14d538,_0x2f4a33,_0x3a0421){const _0x40180b=a279_0x1bb296,{data:_0x3cdad8}=await _0x14d538[_0x40180b(0x141)](_0x40180b(0x144)+salesforce_request_1[_0x40180b(0x138)]+_0x40180b(0x13f),{'objectName':_0x40180b(0x151),'binaryFields':_0x2f4a33,'recordIds':_0x3a0421});return _0x3cdad8;}exports[a279_0x1bb296(0x157)]=fetchAttachments;