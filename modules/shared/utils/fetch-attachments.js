const a319_0x399bbc=a319_0x1fab;(function(_0x1eb898,_0x42b4f3){const _0x18e227=a319_0x1fab,_0x4b0160=_0x1eb898();while(!![]){try{const _0x46ba06=parseInt(_0x18e227(0x8b))/0x1*(parseInt(_0x18e227(0x8c))/0x2)+parseInt(_0x18e227(0x9c))/0x3*(-parseInt(_0x18e227(0x8f))/0x4)+parseInt(_0x18e227(0x84))/0x5*(parseInt(_0x18e227(0x9e))/0x6)+parseInt(_0x18e227(0xa7))/0x7+-parseInt(_0x18e227(0x94))/0x8*(-parseInt(_0x18e227(0x87))/0x9)+-parseInt(_0x18e227(0x9d))/0xa+-parseInt(_0x18e227(0x92))/0xb*(-parseInt(_0x18e227(0x88))/0xc);if(_0x46ba06===_0x42b4f3)break;else _0x4b0160['push'](_0x4b0160['shift']());}catch(_0x3b5904){_0x4b0160['push'](_0x4b0160['shift']());}}}(a319_0x515d,0xf3fa6));const a319_0x368cc6=(function(){let _0x46b077=!![];return function(_0x5e916a,_0x1401e5){const _0x40a15=_0x46b077?function(){const _0x25d248=a319_0x1fab;if(_0x1401e5){const _0x384466=_0x1401e5[_0x25d248(0x95)](_0x5e916a,arguments);return _0x1401e5=null,_0x384466;}}:function(){};return _0x46b077=![],_0x40a15;};}()),a319_0x291624=a319_0x368cc6(this,function(){const _0x692b73=a319_0x1fab;return a319_0x291624[_0x692b73(0xab)]()['search'](_0x692b73(0x91))['toString']()['constructor'](a319_0x291624)['search'](_0x692b73(0x91));});a319_0x291624();'use strict';Object['defineProperty'](exports,a319_0x399bbc(0xa6),{'value':!![]}),exports[a319_0x399bbc(0x89)]=exports[a319_0x399bbc(0xa3)]=exports['fetchAttachmentsDetailsByParentId']=exports[a319_0x399bbc(0x8d)]=exports['retrieveAttachments']=void 0x0;function a319_0x1fab(_0x4486b7,_0x2f19a5){const _0x5c7c2a=a319_0x515d();return a319_0x1fab=function(_0x291624,_0x368cc6){_0x291624=_0x291624-0x83;let _0x515dcc=_0x5c7c2a[_0x291624];return _0x515dcc;},a319_0x1fab(_0x4486b7,_0x2f19a5);}const index_1=require(a319_0x399bbc(0x85)),constants_1=require('../../../constants'),salesforce_request_1=require(a319_0x399bbc(0xa8)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a319_0x399bbc(0x97)],FIELD_PARENT_ID=a319_0x399bbc(0xa5),FIELD_ID='Id';async function retrieveAttachments(_0x337b54,_0x205c92){const _0x1bac4d=a319_0x399bbc;let _0x515562=0x0,_0x30ffe8=0x0,_0x5569c7=[];const _0x56138c=[];for(const _0x133f07 of _0x337b54){if(_0x133f07[_0x1bac4d(0x98)]>REST_ATTACHMENT_MAX_SIZE){const _0x172f77=await fetchAttachmentBody(_0x205c92,_0x133f07['Id']);_0x56138c[_0x1bac4d(0x90)]({'id':_0x133f07['Id'],'values':{'Body':_0x172f77[_0x1bac4d(0xab)](_0x1bac4d(0xa2))}});continue;}if(_0x133f07[_0x1bac4d(0x98)]+_0x515562>REST_ATTACHMENT_MAX_SIZE||_0x30ffe8+0x1>=REST_ATTACHMENT_COUNT){const _0x5cdba8=await fetchAttachments(_0x205c92,BINARY_FIELDS,_0x5569c7);_0x56138c['push'](..._0x5cdba8),_0x5569c7=[],_0x515562=0x0,_0x30ffe8=0x0;}_0x5569c7[_0x1bac4d(0x90)](_0x133f07['Id']),_0x515562+=_0x133f07[_0x1bac4d(0x98)],_0x30ffe8++;}if(_0x5569c7[_0x1bac4d(0x86)]){const _0x3cfad4=await fetchAttachments(_0x205c92,BINARY_FIELDS,_0x5569c7);_0x56138c[_0x1bac4d(0x90)](..._0x3cfad4);}return _0x56138c;}exports['retrieveAttachments']=retrieveAttachments;function fetchAttachmentsDetailsById(_0x42cf5a,_0x5d9295){return fetchAttachmentsDetails(_0x42cf5a,FIELD_ID,_0x5d9295);}exports[a319_0x399bbc(0x8d)]=fetchAttachmentsDetailsById;function a319_0x515d(){const _0x11e5ab=['push','(((.+)+)+)+$','98131ONsuxt','SALESFORCE_API_VERSION','24qmXzMf','apply','namespace','Body','BodyLength','chunkArray','\x20IN\x20(','\x27,\x27','10770brFskW','19125260NxMZmW','441858FmwveM','join','arraybuffer','records','base64','fetchAttachmentBody','/sobjects/Attachment/','ParentId','__esModule','553399YToOZb','../../functions/utils/salesforce-request','get','post','toString','fetchAttachmentsDetailsByParentId','/retrieveAttachments/','50GBRUZs','./index','length','178533wofnBG','4596jroIye','fetchAttachments','/services/data/','52529fJNJUl','2NQHiVy','fetchAttachmentsDetailsById','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','1596gwZSPb'];a319_0x515d=function(){return _0x11e5ab;};return a319_0x515d();}function fetchAttachmentsDetailsByParentId(_0x5f4a34,_0x1a04a9){return fetchAttachmentsDetails(_0x5f4a34,FIELD_PARENT_ID,_0x1a04a9);}exports[a319_0x399bbc(0xac)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x1751df,_0x10b95b,_0x42f4fc){const _0x1d97ee=a319_0x399bbc,_0x1b514b=[],_0x446732=(0x0,index_1[_0x1d97ee(0x99)])(_0x42f4fc,CHUNK_QUERY_SIZE);for(const _0x4cb5da of _0x446732){const _0x387628=_0x1d97ee(0x8e)+_0x10b95b+_0x1d97ee(0x9a)+('\x27'+_0x4cb5da[_0x1d97ee(0x9f)](_0x1d97ee(0x9b))+'\x27')+')',{data:_0x3e999d}=await _0x1751df[_0x1d97ee(0xa9)](_0x1d97ee(0x8a)+constants_1[_0x1d97ee(0x93)]+'/query/',{'params':{'q':_0x387628}});_0x1b514b[_0x1d97ee(0x90)](..._0x3e999d[_0x1d97ee(0xa1)]);}return _0x1b514b;}async function fetchAttachmentBody(_0x4db9fa,_0x1c6a36){const _0x17c871=a319_0x399bbc,{data:_0x1c5a69}=await _0x4db9fa['get'](_0x17c871(0x8a)+constants_1[_0x17c871(0x93)]+_0x17c871(0xa4)+_0x1c6a36+'/body',{'responseType':_0x17c871(0xa0)});return _0x1c5a69;}exports[a319_0x399bbc(0xa3)]=fetchAttachmentBody;async function fetchAttachments(_0xe7c1a1,_0x32112d,_0x392a2a){const _0x1e631f=a319_0x399bbc,{data:_0x2718d9}=await _0xe7c1a1[_0x1e631f(0xaa)]('/services/apexrest'+salesforce_request_1[_0x1e631f(0x96)]+_0x1e631f(0x83),{'objectName':'Attachment','binaryFields':_0x32112d,'recordIds':_0x392a2a});return _0x2718d9;}exports['fetchAttachments']=fetchAttachments;