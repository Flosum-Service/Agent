const a287_0x45eaa5=a287_0x33b5;(function(_0xb7e2e0,_0x4f5ad4){const _0xa45f83=a287_0x33b5,_0x2b5834=_0xb7e2e0();while(!![]){try{const _0x8b860=parseInt(_0xa45f83(0xd8))/0x1+-parseInt(_0xa45f83(0xc5))/0x2+parseInt(_0xa45f83(0xc9))/0x3*(parseInt(_0xa45f83(0xc6))/0x4)+parseInt(_0xa45f83(0xdd))/0x5*(-parseInt(_0xa45f83(0xc2))/0x6)+parseInt(_0xa45f83(0xd6))/0x7*(-parseInt(_0xa45f83(0xda))/0x8)+parseInt(_0xa45f83(0xcf))/0x9*(-parseInt(_0xa45f83(0xcb))/0xa)+-parseInt(_0xa45f83(0xe4))/0xb*(-parseInt(_0xa45f83(0xce))/0xc);if(_0x8b860===_0x4f5ad4)break;else _0x2b5834['push'](_0x2b5834['shift']());}catch(_0x502370){_0x2b5834['push'](_0x2b5834['shift']());}}}(a287_0x38fa,0xb3428));const a287_0x4f6395=(function(){let _0x1bf7b7=!![];return function(_0x6569c4,_0x5181ff){const _0x438b65=_0x1bf7b7?function(){if(_0x5181ff){const _0x62fc62=_0x5181ff['apply'](_0x6569c4,arguments);return _0x5181ff=null,_0x62fc62;}}:function(){};return _0x1bf7b7=![],_0x438b65;};}()),a287_0x24bfe6=a287_0x4f6395(this,function(){const _0x3411ee=a287_0x33b5;return a287_0x24bfe6['toString']()[_0x3411ee(0xcc)](_0x3411ee(0xd1))[_0x3411ee(0xe5)]()[_0x3411ee(0xcd)](a287_0x24bfe6)[_0x3411ee(0xcc)]('(((.+)+)+)+$');});a287_0x24bfe6();'use strict';Object[a287_0x45eaa5(0xe1)](exports,a287_0x45eaa5(0xdc),{'value':!![]}),exports[a287_0x45eaa5(0xd7)]=exports['fetchAttachmentBody']=exports[a287_0x45eaa5(0xe3)]=exports[a287_0x45eaa5(0xbf)]=exports[a287_0x45eaa5(0xca)]=void 0x0;function a287_0x33b5(_0x57705c,_0x12f076){const _0x8b4c89=a287_0x38fa();return a287_0x33b5=function(_0x24bfe6,_0x4f6395){_0x24bfe6=_0x24bfe6-0xbe;let _0x38fad2=_0x8b4c89[_0x24bfe6];return _0x38fad2;},a287_0x33b5(_0x57705c,_0x12f076);}const index_1=require(a287_0x45eaa5(0xd0)),constants_1=require(a287_0x45eaa5(0xdb)),salesforce_request_1=require('../../functions/utils/salesforce-request'),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a287_0x45eaa5(0xc1)],FIELD_PARENT_ID='ParentId',FIELD_ID='Id';async function retrieveAttachments(_0x30e7c8,_0x3ca966){const _0x402f3a=a287_0x45eaa5;let _0x33d88c=0x0,_0x48c9a7=0x0,_0x4fd865=[];const _0x4eaed1=[];for(const _0x7bee7c of _0x30e7c8){if(_0x7bee7c[_0x402f3a(0xc8)]>REST_ATTACHMENT_MAX_SIZE){const _0x5d8959=await fetchAttachmentBody(_0x3ca966,_0x7bee7c['Id']);_0x4eaed1[_0x402f3a(0xc0)]({'id':_0x7bee7c['Id'],'values':{'Body':_0x5d8959[_0x402f3a(0xe5)]('base64')}});continue;}if(_0x7bee7c[_0x402f3a(0xc8)]+_0x33d88c>REST_ATTACHMENT_MAX_SIZE||_0x48c9a7+0x1>=REST_ATTACHMENT_COUNT){const _0x56a009=await fetchAttachments(_0x3ca966,BINARY_FIELDS,_0x4fd865);_0x4eaed1[_0x402f3a(0xc0)](..._0x56a009),_0x4fd865=[],_0x33d88c=0x0,_0x48c9a7=0x0;}_0x4fd865[_0x402f3a(0xc0)](_0x7bee7c['Id']),_0x33d88c+=_0x7bee7c[_0x402f3a(0xc8)],_0x48c9a7++;}if(_0x4fd865[_0x402f3a(0xd3)]){const _0x4d0f9d=await fetchAttachments(_0x3ca966,BINARY_FIELDS,_0x4fd865);_0x4eaed1[_0x402f3a(0xc0)](..._0x4d0f9d);}return _0x4eaed1;}exports[a287_0x45eaa5(0xca)]=retrieveAttachments;function a287_0x38fa(){const _0x452cd4=['\x20IN\x20(','24NubIGe','../../../constants','__esModule','1435aAGTeK','SALESFORCE_API_VERSION','/body','/retrieveAttachments/','defineProperty','Attachment','fetchAttachmentsDetailsByParentId','6714169ibSPNq','toString','/services/data/','join','arraybuffer','fetchAttachmentsDetailsById','push','Body','5706BzAobv','chunkArray','records','832136FzALQJ','315732ksJsqI','get','BodyLength','9OZmBez','retrieveAttachments','543430RuKyQS','search','constructor','12BZSrYE','117CINyDZ','./index','(((.+)+)+)+$','\x27,\x27','length','/sobjects/Attachment/','fetchAttachmentBody','397236HPBMiQ','fetchAttachments','1452778bLZUGs'];a287_0x38fa=function(){return _0x452cd4;};return a287_0x38fa();}function fetchAttachmentsDetailsById(_0x14bcc5,_0x258d8a){return fetchAttachmentsDetails(_0x14bcc5,FIELD_ID,_0x258d8a);}exports[a287_0x45eaa5(0xbf)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x174583,_0x4dc74e){return fetchAttachmentsDetails(_0x174583,FIELD_PARENT_ID,_0x4dc74e);}exports[a287_0x45eaa5(0xe3)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x236a94,_0x291095,_0x120082){const _0x267f05=a287_0x45eaa5,_0x2ae3e0=[],_0x538436=(0x0,index_1[_0x267f05(0xc3)])(_0x120082,CHUNK_QUERY_SIZE);for(const _0x4757b5 of _0x538436){const _0x54facc='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20'+_0x291095+_0x267f05(0xd9)+('\x27'+_0x4757b5[_0x267f05(0xe7)](_0x267f05(0xd2))+'\x27')+')',{data:_0x10d351}=await _0x236a94[_0x267f05(0xc7)](_0x267f05(0xe6)+constants_1['SALESFORCE_API_VERSION']+'/query/',{'params':{'q':_0x54facc}});_0x2ae3e0[_0x267f05(0xc0)](..._0x10d351[_0x267f05(0xc4)]);}return _0x2ae3e0;}async function fetchAttachmentBody(_0x2bfa2d,_0x58eab8){const _0x4ee814=a287_0x45eaa5,{data:_0x302347}=await _0x2bfa2d['get'](_0x4ee814(0xe6)+constants_1[_0x4ee814(0xde)]+_0x4ee814(0xd4)+_0x58eab8+_0x4ee814(0xdf),{'responseType':_0x4ee814(0xbe)});return _0x302347;}exports[a287_0x45eaa5(0xd5)]=fetchAttachmentBody;async function fetchAttachments(_0xae5873,_0x40d30e,_0x310df6){const _0x12ddd2=a287_0x45eaa5,{data:_0x59305b}=await _0xae5873['post']('/services/apexrest'+salesforce_request_1['namespace']+_0x12ddd2(0xe0),{'objectName':_0x12ddd2(0xe2),'binaryFields':_0x40d30e,'recordIds':_0x310df6});return _0x59305b;}exports[a287_0x45eaa5(0xd7)]=fetchAttachments;