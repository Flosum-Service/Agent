const a287_0x3b439f=a287_0x188b;(function(_0x12a899,_0x540605){const _0xdf429=a287_0x188b,_0x32bfbb=_0x12a899();while(!![]){try{const _0x5717f9=parseInt(_0xdf429(0x15b))/0x1*(parseInt(_0xdf429(0x154))/0x2)+-parseInt(_0xdf429(0x169))/0x3+-parseInt(_0xdf429(0x155))/0x4+parseInt(_0xdf429(0x146))/0x5+-parseInt(_0xdf429(0x162))/0x6*(-parseInt(_0xdf429(0x15a))/0x7)+-parseInt(_0xdf429(0x152))/0x8+parseInt(_0xdf429(0x149))/0x9*(-parseInt(_0xdf429(0x167))/0xa);if(_0x5717f9===_0x540605)break;else _0x32bfbb['push'](_0x32bfbb['shift']());}catch(_0x20f4d9){_0x32bfbb['push'](_0x32bfbb['shift']());}}}(a287_0x338c,0x5a98d));const a287_0x24109c=(function(){let _0x2a7e50=!![];return function(_0x87f54d,_0x324255){const _0x5c4eb9=_0x2a7e50?function(){const _0x3d6ab2=a287_0x188b;if(_0x324255){const _0x2c3ab6=_0x324255[_0x3d6ab2(0x14d)](_0x87f54d,arguments);return _0x324255=null,_0x2c3ab6;}}:function(){};return _0x2a7e50=![],_0x5c4eb9;};}()),a287_0x927abe=a287_0x24109c(this,function(){const _0x360cbf=a287_0x188b;return a287_0x927abe['toString']()[_0x360cbf(0x15f)](_0x360cbf(0x14e))['toString']()[_0x360cbf(0x15d)](a287_0x927abe)['search']('(((.+)+)+)+$');});a287_0x927abe();'use strict';Object[a287_0x3b439f(0x14a)](exports,a287_0x3b439f(0x156),{'value':!![]}),exports[a287_0x3b439f(0x16c)]=exports[a287_0x3b439f(0x15c)]=exports[a287_0x3b439f(0x161)]=exports['fetchAttachmentsDetailsById']=exports[a287_0x3b439f(0x153)]=void 0x0;const index_1=require(a287_0x3b439f(0x159)),constants_1=require(a287_0x3b439f(0x16e)),salesforce_request_1=require('../../functions/utils/salesforce-request'),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a287_0x3b439f(0x147)],FIELD_PARENT_ID='ParentId',FIELD_ID='Id';async function retrieveAttachments(_0xda85a9,_0x217225){const _0x5bf1ba=a287_0x3b439f;let _0x566bf3=0x0,_0x1dc5e2=0x0,_0xd261b8=[];const _0x4c514b=[];for(const _0x5a9d15 of _0xda85a9){if(_0x5a9d15[_0x5bf1ba(0x163)]>REST_ATTACHMENT_MAX_SIZE){const _0x1f91e5=await fetchAttachmentBody(_0x217225,_0x5a9d15['Id']);_0x4c514b[_0x5bf1ba(0x166)]({'id':_0x5a9d15['Id'],'values':{'Body':_0x1f91e5[_0x5bf1ba(0x14b)](_0x5bf1ba(0x157))}});continue;}if(_0x5a9d15['BodyLength']+_0x566bf3>REST_ATTACHMENT_MAX_SIZE||_0x1dc5e2+0x1>=REST_ATTACHMENT_COUNT){const _0x1f96cd=await fetchAttachments(_0x217225,BINARY_FIELDS,_0xd261b8);_0x4c514b[_0x5bf1ba(0x166)](..._0x1f96cd),_0xd261b8=[],_0x566bf3=0x0,_0x1dc5e2=0x0;}_0xd261b8[_0x5bf1ba(0x166)](_0x5a9d15['Id']),_0x566bf3+=_0x5a9d15[_0x5bf1ba(0x163)],_0x1dc5e2++;}if(_0xd261b8[_0x5bf1ba(0x148)]){const _0x7cb0a8=await fetchAttachments(_0x217225,BINARY_FIELDS,_0xd261b8);_0x4c514b[_0x5bf1ba(0x166)](..._0x7cb0a8);}return _0x4c514b;}function a287_0x188b(_0xdc4e1e,_0x37454c){const _0x5f3e46=a287_0x338c();return a287_0x188b=function(_0x927abe,_0x24109c){_0x927abe=_0x927abe-0x146;let _0x338c59=_0x5f3e46[_0x927abe];return _0x338c59;},a287_0x188b(_0xdc4e1e,_0x37454c);}exports[a287_0x3b439f(0x153)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0xf3c564,_0x6abc8b){return fetchAttachmentsDetails(_0xf3c564,FIELD_ID,_0x6abc8b);}exports[a287_0x3b439f(0x165)]=fetchAttachmentsDetailsById;function a287_0x338c(){const _0x40c2ec=['1280698EubbKG','1837728OSgbWy','__esModule','base64','/sobjects/Attachment/','./index','14IZBnHn','1yvJKHQ','fetchAttachmentBody','constructor','SALESFORCE_API_VERSION','search','namespace','fetchAttachmentsDetailsByParentId','1329252opjSpd','BodyLength','post','fetchAttachmentsDetailsById','push','2130aMCkCp','/services/apexrest','300906HGbVFx','get','chunkArray','fetchAttachments','/services/data/','../../../constants','429570iLoBHz','Body','length','4842IwujOj','defineProperty','toString','/body','apply','(((.+)+)+)+$','records','\x27,\x27','/retrieveAttachments/','991472vzfjlz','retrieveAttachments'];a287_0x338c=function(){return _0x40c2ec;};return a287_0x338c();}function fetchAttachmentsDetailsByParentId(_0x14d970,_0x1bc9ba){return fetchAttachmentsDetails(_0x14d970,FIELD_PARENT_ID,_0x1bc9ba);}exports[a287_0x3b439f(0x161)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x381ef1,_0x5b746d,_0x10f28c){const _0xdf3203=a287_0x3b439f,_0x553494=[],_0x40c21e=(0x0,index_1[_0xdf3203(0x16b)])(_0x10f28c,CHUNK_QUERY_SIZE);for(const _0x13f7dc of _0x40c21e){const _0x5e58cc='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20'+_0x5b746d+'\x20IN\x20('+('\x27'+_0x13f7dc['join'](_0xdf3203(0x150))+'\x27')+')',{data:_0x46e55b}=await _0x381ef1[_0xdf3203(0x16a)](_0xdf3203(0x16d)+constants_1[_0xdf3203(0x15e)]+'/query/',{'params':{'q':_0x5e58cc}});_0x553494[_0xdf3203(0x166)](..._0x46e55b[_0xdf3203(0x14f)]);}return _0x553494;}async function fetchAttachmentBody(_0x1a0fc1,_0x2f7b08){const _0x5e88ca=a287_0x3b439f,{data:_0x4da53f}=await _0x1a0fc1[_0x5e88ca(0x16a)](_0x5e88ca(0x16d)+constants_1['SALESFORCE_API_VERSION']+_0x5e88ca(0x158)+_0x2f7b08+_0x5e88ca(0x14c),{'responseType':'arraybuffer'});return _0x4da53f;}exports[a287_0x3b439f(0x15c)]=fetchAttachmentBody;async function fetchAttachments(_0xde63,_0x1236fd,_0x1b5cf7){const _0x143458=a287_0x3b439f,{data:_0x29f71b}=await _0xde63[_0x143458(0x164)](_0x143458(0x168)+salesforce_request_1[_0x143458(0x160)]+_0x143458(0x151),{'objectName':'Attachment','binaryFields':_0x1236fd,'recordIds':_0x1b5cf7});return _0x29f71b;}exports[a287_0x3b439f(0x16c)]=fetchAttachments;