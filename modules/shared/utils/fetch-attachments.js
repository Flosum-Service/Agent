const a287_0x5717ad=a287_0x43a0;(function(_0x50bcfd,_0xce8e48){const _0x69bc42=a287_0x43a0,_0x1bd86c=_0x50bcfd();while(!![]){try{const _0x24f1f9=-parseInt(_0x69bc42(0x156))/0x1+parseInt(_0x69bc42(0x13c))/0x2*(parseInt(_0x69bc42(0x13f))/0x3)+-parseInt(_0x69bc42(0x161))/0x4+parseInt(_0x69bc42(0x148))/0x5*(-parseInt(_0x69bc42(0x14e))/0x6)+-parseInt(_0x69bc42(0x14d))/0x7+-parseInt(_0x69bc42(0x155))/0x8*(parseInt(_0x69bc42(0x160))/0x9)+parseInt(_0x69bc42(0x146))/0xa*(parseInt(_0x69bc42(0x14c))/0xb);if(_0x24f1f9===_0xce8e48)break;else _0x1bd86c['push'](_0x1bd86c['shift']());}catch(_0x2812b1){_0x1bd86c['push'](_0x1bd86c['shift']());}}}(a287_0x4870,0x2f8cc));const a287_0x353709=(function(){let _0x36c085=!![];return function(_0xc3f1dc,_0x5d0ca6){const _0x4d1715=_0x36c085?function(){const _0x59f5ba=a287_0x43a0;if(_0x5d0ca6){const _0x4245a1=_0x5d0ca6[_0x59f5ba(0x13e)](_0xc3f1dc,arguments);return _0x5d0ca6=null,_0x4245a1;}}:function(){};return _0x36c085=![],_0x4d1715;};}()),a287_0x26cf62=a287_0x353709(this,function(){const _0x552409=a287_0x43a0;return a287_0x26cf62['toString']()[_0x552409(0x166)](_0x552409(0x165))['toString']()[_0x552409(0x153)](a287_0x26cf62)['search'](_0x552409(0x165));});function a287_0x4870(){const _0x25671d=['chunkArray','base64','/sobjects/Attachment/','2204433fZNLsO','1736119UxFjuQ','546198tWsgGE','../../functions/utils/salesforce-request','fetchAttachments','get','\x27,\x27','constructor','fetchAttachmentsDetailsById','8336qUSNoZ','205119xkXmqV','Attachment','/retrieveAttachments/','ParentId','SALESFORCE_API_VERSION','join','records','fetchAttachmentsDetailsByParentId','fetchAttachmentBody','/body','1710HWfWcx','1278384DjSvhN','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','defineProperty','push','(((.+)+)+)+$','search','13346LSvZgk','/services/data/','apply','57YwjVok','Body','length','retrieveAttachments','./index','toString','BodyLength','70ygZdTh','/query/','20eAvAcB'];a287_0x4870=function(){return _0x25671d;};return a287_0x4870();}a287_0x26cf62();'use strict';function a287_0x43a0(_0x282aed,_0x3bc2ff){const _0x480dd1=a287_0x4870();return a287_0x43a0=function(_0x26cf62,_0x353709){_0x26cf62=_0x26cf62-0x13c;let _0x4870bb=_0x480dd1[_0x26cf62];return _0x4870bb;},a287_0x43a0(_0x282aed,_0x3bc2ff);}Object[a287_0x5717ad(0x163)](exports,'__esModule',{'value':!![]}),exports[a287_0x5717ad(0x150)]=exports['fetchAttachmentBody']=exports[a287_0x5717ad(0x15d)]=exports[a287_0x5717ad(0x154)]=exports[a287_0x5717ad(0x142)]=void 0x0;const index_1=require(a287_0x5717ad(0x143)),constants_1=require('../../../constants'),salesforce_request_1=require(a287_0x5717ad(0x14f)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a287_0x5717ad(0x140)],FIELD_PARENT_ID=a287_0x5717ad(0x159),FIELD_ID='Id';async function retrieveAttachments(_0x66f02a,_0x4bc797){const _0x1554eb=a287_0x5717ad;let _0x1f9901=0x0,_0x2cecb1=0x0,_0x493ab9=[];const _0x4e48b1=[];for(const _0x1e2e76 of _0x66f02a){if(_0x1e2e76[_0x1554eb(0x145)]>REST_ATTACHMENT_MAX_SIZE){const _0x3240cf=await fetchAttachmentBody(_0x4bc797,_0x1e2e76['Id']);_0x4e48b1[_0x1554eb(0x164)]({'id':_0x1e2e76['Id'],'values':{'Body':_0x3240cf[_0x1554eb(0x144)](_0x1554eb(0x14a))}});continue;}if(_0x1e2e76[_0x1554eb(0x145)]+_0x1f9901>REST_ATTACHMENT_MAX_SIZE||_0x2cecb1+0x1>=REST_ATTACHMENT_COUNT){const _0x2e9502=await fetchAttachments(_0x4bc797,BINARY_FIELDS,_0x493ab9);_0x4e48b1[_0x1554eb(0x164)](..._0x2e9502),_0x493ab9=[],_0x1f9901=0x0,_0x2cecb1=0x0;}_0x493ab9[_0x1554eb(0x164)](_0x1e2e76['Id']),_0x1f9901+=_0x1e2e76[_0x1554eb(0x145)],_0x2cecb1++;}if(_0x493ab9[_0x1554eb(0x141)]){const _0x487076=await fetchAttachments(_0x4bc797,BINARY_FIELDS,_0x493ab9);_0x4e48b1['push'](..._0x487076);}return _0x4e48b1;}exports[a287_0x5717ad(0x142)]=retrieveAttachments;function fetchAttachmentsDetailsById(_0x493abf,_0x7d99e4){return fetchAttachmentsDetails(_0x493abf,FIELD_ID,_0x7d99e4);}exports[a287_0x5717ad(0x154)]=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x24df80,_0x13100e){return fetchAttachmentsDetails(_0x24df80,FIELD_PARENT_ID,_0x13100e);}exports[a287_0x5717ad(0x15d)]=fetchAttachmentsDetailsByParentId;async function fetchAttachmentsDetails(_0x814d59,_0x1bcd82,_0x45bb60){const _0x1f9e2c=a287_0x5717ad,_0xa338e5=[],_0x218f9b=(0x0,index_1[_0x1f9e2c(0x149)])(_0x45bb60,CHUNK_QUERY_SIZE);for(const _0x121b09 of _0x218f9b){const _0x4cc090=_0x1f9e2c(0x162)+_0x1bcd82+'\x20IN\x20('+('\x27'+_0x121b09[_0x1f9e2c(0x15b)](_0x1f9e2c(0x152))+'\x27')+')',{data:_0x28bc01}=await _0x814d59[_0x1f9e2c(0x151)]('/services/data/'+constants_1[_0x1f9e2c(0x15a)]+_0x1f9e2c(0x147),{'params':{'q':_0x4cc090}});_0xa338e5[_0x1f9e2c(0x164)](..._0x28bc01[_0x1f9e2c(0x15c)]);}return _0xa338e5;}async function fetchAttachmentBody(_0x2faa65,_0x4da242){const _0x38cbb4=a287_0x5717ad,{data:_0x5e192f}=await _0x2faa65[_0x38cbb4(0x151)](_0x38cbb4(0x13d)+constants_1[_0x38cbb4(0x15a)]+_0x38cbb4(0x14b)+_0x4da242+_0x38cbb4(0x15f),{'responseType':'arraybuffer'});return _0x5e192f;}exports[a287_0x5717ad(0x15e)]=fetchAttachmentBody;async function fetchAttachments(_0x214e98,_0x4a5a1b,_0x176900){const _0x46e50d=a287_0x5717ad,{data:_0x473a12}=await _0x214e98['post']('/services/apexrest'+salesforce_request_1['namespace']+_0x46e50d(0x158),{'objectName':_0x46e50d(0x157),'binaryFields':_0x4a5a1b,'recordIds':_0x176900});return _0x473a12;}exports['fetchAttachments']=fetchAttachments;