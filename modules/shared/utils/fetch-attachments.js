const a287_0x59e0ab=a287_0x243a;(function(_0x3a11a9,_0x4a3442){const _0x26a6ca=a287_0x243a,_0x2264f7=_0x3a11a9();while(!![]){try{const _0x2ef694=parseInt(_0x26a6ca(0x1b3))/0x1+-parseInt(_0x26a6ca(0x1cd))/0x2+parseInt(_0x26a6ca(0x1d7))/0x3*(-parseInt(_0x26a6ca(0x1d3))/0x4)+parseInt(_0x26a6ca(0x1b9))/0x5+-parseInt(_0x26a6ca(0x1d4))/0x6*(parseInt(_0x26a6ca(0x1b4))/0x7)+parseInt(_0x26a6ca(0x1bd))/0x8*(parseInt(_0x26a6ca(0x1d6))/0x9)+-parseInt(_0x26a6ca(0x1be))/0xa*(-parseInt(_0x26a6ca(0x1ca))/0xb);if(_0x2ef694===_0x4a3442)break;else _0x2264f7['push'](_0x2264f7['shift']());}catch(_0x36e73a){_0x2264f7['push'](_0x2264f7['shift']());}}}(a287_0x3c11,0x82193));const a287_0x145237=(function(){let _0x5cc1ee=!![];return function(_0x3d630c,_0x2e3d77){const _0xec7da=_0x5cc1ee?function(){const _0x3b5292=a287_0x243a;if(_0x2e3d77){const _0x34ebae=_0x2e3d77[_0x3b5292(0x1d5)](_0x3d630c,arguments);return _0x2e3d77=null,_0x34ebae;}}:function(){};return _0x5cc1ee=![],_0xec7da;};}()),a287_0x2ab589=a287_0x145237(this,function(){const _0xc26d77=a287_0x243a;return a287_0x2ab589[_0xc26d77(0x1bb)]()[_0xc26d77(0x1b7)](_0xc26d77(0x1b1))[_0xc26d77(0x1bb)]()['constructor'](a287_0x2ab589)['search'](_0xc26d77(0x1b1));});a287_0x2ab589();'use strict';Object[a287_0x59e0ab(0x1bc)](exports,a287_0x59e0ab(0x1bf),{'value':!![]}),exports['fetchAttachments']=exports[a287_0x59e0ab(0x1ce)]=exports[a287_0x59e0ab(0x1d1)]=exports[a287_0x59e0ab(0x1b2)]=exports[a287_0x59e0ab(0x1c9)]=void 0x0;const index_1=require('./index'),constants_1=require('../../../constants'),salesforce_request_1=require(a287_0x59e0ab(0x1c4)),CHUNK_QUERY_SIZE=0x1f4,REST_ATTACHMENT_MAX_SIZE=0x200000,REST_ATTACHMENT_COUNT=0x64,BINARY_FIELDS=[a287_0x59e0ab(0x1b5)],FIELD_PARENT_ID=a287_0x59e0ab(0x1ba),FIELD_ID='Id';async function retrieveAttachments(_0x434bc2,_0x17417a){const _0x46193f=a287_0x59e0ab;let _0x3a7a0a=0x0,_0x338858=0x0,_0x3e087e=[];const _0x54a5b7=[];for(const _0x42a908 of _0x434bc2){if(_0x42a908['BodyLength']>REST_ATTACHMENT_MAX_SIZE){const _0xf99721=await fetchAttachmentBody(_0x17417a,_0x42a908['Id']);_0x54a5b7[_0x46193f(0x1c2)]({'id':_0x42a908['Id'],'values':{'Body':_0xf99721[_0x46193f(0x1bb)](_0x46193f(0x1c8))}});continue;}if(_0x42a908[_0x46193f(0x1b8)]+_0x3a7a0a>REST_ATTACHMENT_MAX_SIZE||_0x338858+0x1>=REST_ATTACHMENT_COUNT){const _0x261048=await fetchAttachments(_0x17417a,BINARY_FIELDS,_0x3e087e);_0x54a5b7[_0x46193f(0x1c2)](..._0x261048),_0x3e087e=[],_0x3a7a0a=0x0,_0x338858=0x0;}_0x3e087e[_0x46193f(0x1c2)](_0x42a908['Id']),_0x3a7a0a+=_0x42a908[_0x46193f(0x1b8)],_0x338858++;}if(_0x3e087e[_0x46193f(0x1b6)]){const _0x18d2fd=await fetchAttachments(_0x17417a,BINARY_FIELDS,_0x3e087e);_0x54a5b7[_0x46193f(0x1c2)](..._0x18d2fd);}return _0x54a5b7;}exports['retrieveAttachments']=retrieveAttachments;function fetchAttachmentsDetailsById(_0x30ce71,_0x47a8ad){return fetchAttachmentsDetails(_0x30ce71,FIELD_ID,_0x47a8ad);}exports['fetchAttachmentsDetailsById']=fetchAttachmentsDetailsById;function fetchAttachmentsDetailsByParentId(_0x44bf61,_0x5437cc){return fetchAttachmentsDetails(_0x44bf61,FIELD_PARENT_ID,_0x5437cc);}exports[a287_0x59e0ab(0x1d1)]=fetchAttachmentsDetailsByParentId;function a287_0x243a(_0x1ce34f,_0x2e38ed){const _0x5d4d43=a287_0x3c11();return a287_0x243a=function(_0x2ab589,_0x145237){_0x2ab589=_0x2ab589-0x1b1;let _0x3c1149=_0x5d4d43[_0x2ab589];return _0x3c1149;},a287_0x243a(_0x1ce34f,_0x2e38ed);}async function fetchAttachmentsDetails(_0x5c0e47,_0x164283,_0x2b92a3){const _0x360b08=a287_0x59e0ab,_0x106080=[],_0x2e1e5d=(0x0,index_1['chunkArray'])(_0x2b92a3,CHUNK_QUERY_SIZE);for(const _0x33e584 of _0x2e1e5d){const _0x4e802c=_0x360b08(0x1cb)+_0x164283+_0x360b08(0x1c0)+('\x27'+_0x33e584[_0x360b08(0x1c3)]('\x27,\x27')+'\x27')+')',{data:_0x128ba1}=await _0x5c0e47[_0x360b08(0x1c1)]('/services/data/'+constants_1[_0x360b08(0x1d2)]+_0x360b08(0x1d0),{'params':{'q':_0x4e802c}});_0x106080['push'](..._0x128ba1[_0x360b08(0x1d8)]);}return _0x106080;}async function fetchAttachmentBody(_0x19fd69,_0x96084f){const _0xfbdf52=a287_0x59e0ab,{data:_0x23a592}=await _0x19fd69[_0xfbdf52(0x1c1)](_0xfbdf52(0x1cf)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment/'+_0x96084f+_0xfbdf52(0x1cc),{'responseType':'arraybuffer'});return _0x23a592;}exports['fetchAttachmentBody']=fetchAttachmentBody;function a287_0x3c11(){const _0x515478=['apply','719811cthSex','14538ksvOWG','records','(((.+)+)+)+$','fetchAttachmentsDetailsById','872661asYOro','6713819ruhnMO','Body','length','search','BodyLength','1017115AxlWtt','ParentId','toString','defineProperty','88dhJAkY','8019850tddDTG','__esModule','\x20IN\x20(','get','push','join','../../functions/utils/salesforce-request','/retrieveAttachments/','/services/apexrest','post','base64','retrieveAttachments','11PMPyDu','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20Id,\x20Name,\x20BodyLength,\x20ParentId\x0a\x20\x20\x20\x20\x20\x20FROM\x20Attachment\x0a\x20\x20\x20\x20\x20\x20WHERE\x20','/body','1698164UrjRJb','fetchAttachmentBody','/services/data/','/query/','fetchAttachmentsDetailsByParentId','SALESFORCE_API_VERSION','344dQQCTg','6BNhOam'];a287_0x3c11=function(){return _0x515478;};return a287_0x3c11();}async function fetchAttachments(_0x3428f7,_0x36c37e,_0x42c1e8){const _0x3f9a98=a287_0x59e0ab,{data:_0x3a73aa}=await _0x3428f7[_0x3f9a98(0x1c7)](_0x3f9a98(0x1c6)+salesforce_request_1['namespace']+_0x3f9a98(0x1c5),{'objectName':'Attachment','binaryFields':_0x36c37e,'recordIds':_0x42c1e8});return _0x3a73aa;}exports['fetchAttachments']=fetchAttachments;