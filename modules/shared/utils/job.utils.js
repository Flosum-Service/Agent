const a333_0x5f3888=a333_0x4cbf;(function(_0x5c290e,_0x5dc14f){const _0x3ee9fc=a333_0x4cbf,_0x5c98e3=_0x5c290e();while(!![]){try{const _0x2235a7=parseInt(_0x3ee9fc(0x176))/0x1*(parseInt(_0x3ee9fc(0x168))/0x2)+parseInt(_0x3ee9fc(0x17b))/0x3*(-parseInt(_0x3ee9fc(0x18e))/0x4)+parseInt(_0x3ee9fc(0x175))/0x5*(-parseInt(_0x3ee9fc(0x179))/0x6)+-parseInt(_0x3ee9fc(0x17e))/0x7+-parseInt(_0x3ee9fc(0x191))/0x8+-parseInt(_0x3ee9fc(0x171))/0x9+parseInt(_0x3ee9fc(0x17d))/0xa;if(_0x2235a7===_0x5dc14f)break;else _0x5c98e3['push'](_0x5c98e3['shift']());}catch(_0x3d7b13){_0x5c98e3['push'](_0x5c98e3['shift']());}}}(a333_0xe578,0x2d163));const a333_0x2abe88=(function(){let _0x1317c5=!![];return function(_0x181a49,_0x51d9e0){const _0x45169e=_0x1317c5?function(){const _0x3aac00=a333_0x4cbf;if(_0x51d9e0){const _0x3f467c=_0x51d9e0[_0x3aac00(0x18f)](_0x181a49,arguments);return _0x51d9e0=null,_0x3f467c;}}:function(){};return _0x1317c5=![],_0x45169e;};}()),a333_0x3ac2a3=a333_0x2abe88(this,function(){const _0x4f2609=a333_0x4cbf;return a333_0x3ac2a3[_0x4f2609(0x170)]()[_0x4f2609(0x16c)]('(((.+)+)+)+$')[_0x4f2609(0x170)]()[_0x4f2609(0x17f)](a333_0x3ac2a3)[_0x4f2609(0x16c)](_0x4f2609(0x166));});a333_0x3ac2a3();'use strict';var __importDefault=this&&this[a333_0x5f3888(0x16d)]||function(_0x373904){const _0xed4bcd=a333_0x5f3888;return _0x373904&&_0x373904[_0xed4bcd(0x16f)]?_0x373904:{'default':_0x373904};};function a333_0xe578(){const _0x455ffd=['702306lgyjXI','defineProperty','3GtEegd','push','10512810GsYLQG','536872GIxKxV','constructor','default','path','objectToArgsList','stat','fs/promises','map','../../../constants/job','from','name','../../../core','join','Job\x20has\x20been\x20closed\x20with\x20status\x20code:\x20','sort','FsUtils','1016564mXIZWY','apply','isDirectory','2816248SENoyw','birthtime','set','(((.+)+)+)+$','filter','226558gLiDlk','Logger','generateJobId','isExistsPath','search','__importDefault','log','__esModule','toString','1619694JPnhqP','sortJobsIds','shortid','close','5BwzLDI','1mUTTIP','get','runJob'];a333_0xe578=function(){return _0x455ffd;};return a333_0xe578();}function a333_0x4cbf(_0x2e2fa1,_0x595d4d){const _0x4b9487=a333_0xe578();return a333_0x4cbf=function(_0x3ac2a3,_0x2abe88){_0x3ac2a3=_0x3ac2a3-0x166;let _0xe5789f=_0x4b9487[_0x3ac2a3];return _0xe5789f;},a333_0x4cbf(_0x2e2fa1,_0x595d4d);}Object[a333_0x5f3888(0x17a)](exports,a333_0x5f3888(0x16f),{'value':!![]});const path_1=__importDefault(require(a333_0x5f3888(0x181))),spawn_utils_1=require('./spawn.utils'),core_1=require(a333_0x5f3888(0x189)),shortid_1=__importDefault(require(a333_0x5f3888(0x173))),utils_1=require('@flosum/utils'),promises_1=require(a333_0x5f3888(0x184)),job_1=require(a333_0x5f3888(0x186));class JobUtils{static[a333_0x5f3888(0x16a)](){const _0x26b2d2=a333_0x5f3888;return(0x0,shortid_1[_0x26b2d2(0x180)])();}static[a333_0x5f3888(0x178)](_0x28033b,_0x4d3f67){return new Promise((_0x48fad4,_0x3141e6)=>{const _0x1a2685=a333_0x4cbf,{jobStorePath:_0x3399f5,jobId:_0x33146d}=_0x4d3f67,_0x37c970=(0x0,spawn_utils_1['executeInterpreter'])(_0x28033b,...(0x0,spawn_utils_1[_0x1a2685(0x182)])({'jobStorePath':_0x3399f5,'jobId':_0x33146d})),_0x4f775b=new core_1[(_0x1a2685(0x169))](_0x33146d);_0x37c970['once'](_0x1a2685(0x174),_0xfd2a86=>{const _0x2800ab=_0x1a2685,_0x455a48=_0x2800ab(0x18b)+_0xfd2a86;_0x4f775b[_0x2800ab(0x16e)](_0x455a48),_0xfd2a86===0x0?_0x48fad4(_0x455a48):_0x3141e6(new Error(_0x455a48));});});}static async['getJobsIds'](_0xe5e11){const _0x38c00a=a333_0x5f3888;if(!await utils_1[_0x38c00a(0x18d)][_0x38c00a(0x16b)](_0xe5e11))return[];const _0x39dc46=await(0x0,promises_1['readdir'])(_0xe5e11,{'withFileTypes':!![]}),_0x2f214e=_0x39dc46[_0x38c00a(0x167)](_0xe19e0b=>_0xe19e0b[_0x38c00a(0x190)]())[_0x38c00a(0x185)](_0x2f92a4=>_0x2f92a4[_0x38c00a(0x188)]),_0x38a33f=[];for(const _0x3b227d of _0x2f214e){const _0x19872a=path_1['default'][_0x38c00a(0x18a)](_0xe5e11,_0x3b227d,job_1['JOB_LOG_STATE_FILENAME']);await utils_1['FsUtils'][_0x38c00a(0x16b)](_0x19872a)&&_0x38a33f[_0x38c00a(0x17c)](_0x3b227d);}return _0x38a33f;}static async[a333_0x5f3888(0x172)](_0x20af2d,_0x48762f){const _0x2204ae=a333_0x5f3888,_0x3a2823=new Map();for(const _0x1f7910 of _0x48762f){const _0x1b3f65=await(0x0,promises_1[_0x2204ae(0x183)])(path_1[_0x2204ae(0x180)][_0x2204ae(0x18a)](_0x20af2d,_0x1f7910));_0x3a2823[_0x2204ae(0x193)](_0x1b3f65,_0x1f7910);}return Array[_0x2204ae(0x187)](_0x3a2823['keys']())[_0x2204ae(0x18c)]((_0xebabc9,_0x3a6015)=>_0x3a6015['birthtime']-_0xebabc9[_0x2204ae(0x192)])[_0x2204ae(0x185)](_0x10fdb5=>_0x3a2823[_0x2204ae(0x177)](_0x10fdb5));}}exports[a333_0x5f3888(0x180)]=JobUtils;