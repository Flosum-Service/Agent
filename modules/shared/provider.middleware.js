const a158_0x10cc90=a158_0x298a;function a158_0x50ea(){const _0x2bd7be=['toString','288200SYFPGS','__decorate','180510iHcNyA','Middleware','./git-provider.manager','search','handle','getApi','../../core/errors/internal-server.error','4265luCRAj','__esModule','decorate','AppSettingsService','859920UchSLJ','11iiuzZK','object','9729192rXgoia','538265pxKvqz','(((.+)+)+)+$','design:paramtypes','metadata','defineProperty','length','getOwnPropertyDescriptor','161dbwTcZ','ProviderMiddleware','824OWpWGT','../../core/errors/unauthorized.error','./services/app-settings.service','function','InternalServerError','../../core','__metadata','2JLaoCl','x-git-provider','162WTMgTe','717834hgLVfi','before','headers','__importDefault'];a158_0x50ea=function(){return _0x2bd7be;};return a158_0x50ea();}(function(_0x1d4a7e,_0x3eab64){const _0x591387=a158_0x298a,_0x187299=_0x1d4a7e();while(!![]){try{const _0x412bf1=-parseInt(_0x591387(0x175))/0x1*(parseInt(_0x591387(0x15c))/0x2)+parseInt(_0x591387(0x15f))/0x3+parseInt(_0x591387(0x17e))/0x4*(-parseInt(_0x591387(0x16d))/0x5)+parseInt(_0x591387(0x166))/0x6*(parseInt(_0x591387(0x17c))/0x7)+-parseInt(_0x591387(0x171))/0x8+-parseInt(_0x591387(0x15e))/0x9*(parseInt(_0x591387(0x164))/0xa)+parseInt(_0x591387(0x172))/0xb*(parseInt(_0x591387(0x174))/0xc);if(_0x412bf1===_0x3eab64)break;else _0x187299['push'](_0x187299['shift']());}catch(_0x3c6368){_0x187299['push'](_0x187299['shift']());}}}(a158_0x50ea,0x62166));const a158_0x99a9b8=(function(){let _0x156ea9=!![];return function(_0xd64f3,_0x1706e6){const _0x13b941=_0x156ea9?function(){if(_0x1706e6){const _0x430323=_0x1706e6['apply'](_0xd64f3,arguments);return _0x1706e6=null,_0x430323;}}:function(){};return _0x156ea9=![],_0x13b941;};}()),a158_0x4516ca=a158_0x99a9b8(this,function(){const _0x51ab92=a158_0x298a;return a158_0x4516ca[_0x51ab92(0x163)]()[_0x51ab92(0x169)]('(((.+)+)+)+$')[_0x51ab92(0x163)]()['constructor'](a158_0x4516ca)[_0x51ab92(0x169)](_0x51ab92(0x176));});function a158_0x298a(_0x1e9271,_0x58d2db){const _0x5231e1=a158_0x50ea();return a158_0x298a=function(_0x4516ca,_0x99a9b8){_0x4516ca=_0x4516ca-0x159;let _0x50ea88=_0x5231e1[_0x4516ca];return _0x50ea88;},a158_0x298a(_0x1e9271,_0x58d2db);}a158_0x4516ca();'use strict';var __decorate=this&&this[a158_0x10cc90(0x165)]||function(_0x157c65,_0x50842a,_0x52ca44,_0x26692c){const _0x35f760=a158_0x10cc90;var _0x125fa8=arguments['length'],_0x21d223=_0x125fa8<0x3?_0x50842a:_0x26692c===null?_0x26692c=Object[_0x35f760(0x17b)](_0x50842a,_0x52ca44):_0x26692c,_0x941112;if(typeof Reflect===_0x35f760(0x173)&&typeof Reflect[_0x35f760(0x16f)]===_0x35f760(0x181))_0x21d223=Reflect[_0x35f760(0x16f)](_0x157c65,_0x50842a,_0x52ca44,_0x26692c);else{for(var _0x4df42a=_0x157c65[_0x35f760(0x17a)]-0x1;_0x4df42a>=0x0;_0x4df42a--)if(_0x941112=_0x157c65[_0x4df42a])_0x21d223=(_0x125fa8<0x3?_0x941112(_0x21d223):_0x125fa8>0x3?_0x941112(_0x50842a,_0x52ca44,_0x21d223):_0x941112(_0x50842a,_0x52ca44))||_0x21d223;}return _0x125fa8>0x3&&_0x21d223&&Object[_0x35f760(0x179)](_0x50842a,_0x52ca44,_0x21d223),_0x21d223;},__metadata=this&&this[a158_0x10cc90(0x15b)]||function(_0x1f3a6f,_0xe1cd36){const _0x5c9f02=a158_0x10cc90;if(typeof Reflect===_0x5c9f02(0x173)&&typeof Reflect[_0x5c9f02(0x178)]===_0x5c9f02(0x181))return Reflect['metadata'](_0x1f3a6f,_0xe1cd36);},__importDefault=this&&this[a158_0x10cc90(0x162)]||function(_0x1d6f4f){const _0x82f217=a158_0x10cc90;return _0x1d6f4f&&_0x1d6f4f[_0x82f217(0x16e)]?_0x1d6f4f:{'default':_0x1d6f4f};};Object[a158_0x10cc90(0x179)](exports,a158_0x10cc90(0x16e),{'value':!![]}),exports[a158_0x10cc90(0x17d)]=void 0x0;const core_1=require(a158_0x10cc90(0x15a)),unauthorized_error_1=require(a158_0x10cc90(0x17f)),typedi_1=__importDefault(require('typedi')),internal_server_error_1=require(a158_0x10cc90(0x16c)),git_provider_manager_1=require(a158_0x10cc90(0x168)),app_settings_service_1=require(a158_0x10cc90(0x180));let ProviderMiddleware=class ProviderMiddleware{constructor(_0x31c0f5){this['appSettings']=_0x31c0f5;}async[a158_0x10cc90(0x16a)](_0x17f14a,_0x160e00){const _0x4cbfe4=a158_0x10cc90;if(_0x17f14a[_0x4cbfe4(0x161)][_0x4cbfe4(0x15d)]){this['appSettings']['update']({'provider':_0x17f14a[_0x4cbfe4(0x161)]['x-git-provider']['toString']()});const _0x3775ee=typedi_1['default']['get'](git_provider_manager_1['GitProviderManager'])[_0x4cbfe4(0x16b)](_0x17f14a['headers'][_0x4cbfe4(0x15d)]['toString']());try{await _0x3775ee['isLoggedIn']();}catch(_0x358eb9){if(_0x358eb9 instanceof internal_server_error_1[_0x4cbfe4(0x159)])throw _0x358eb9;throw new unauthorized_error_1['UnauthorizedError'](_0x358eb9);}}}};ProviderMiddleware=__decorate([core_1[a158_0x10cc90(0x167)](a158_0x10cc90(0x160)),__metadata(a158_0x10cc90(0x177),[app_settings_service_1[a158_0x10cc90(0x170)]])],ProviderMiddleware),exports[a158_0x10cc90(0x17d)]=ProviderMiddleware;