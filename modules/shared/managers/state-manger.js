const a283_0x32cbae=a283_0x5a01;function a283_0x5a01(_0x399dd9,_0x315eff){const _0xa17361=a283_0x3727();return a283_0x5a01=function(_0x9a972e,_0x4a0f80){_0x9a972e=_0x9a972e-0x124;let _0x372755=_0xa17361[_0x9a972e];return _0x372755;},a283_0x5a01(_0x399dd9,_0x315eff);}(function(_0x361bbe,_0xa475b8){const _0x4c2dbc=a283_0x5a01,_0x5b2feb=_0x361bbe();while(!![]){try{const _0x43c8fe=parseInt(_0x4c2dbc(0x127))/0x1*(parseInt(_0x4c2dbc(0x12c))/0x2)+-parseInt(_0x4c2dbc(0x147))/0x3*(parseInt(_0x4c2dbc(0x133))/0x4)+-parseInt(_0x4c2dbc(0x12a))/0x5*(-parseInt(_0x4c2dbc(0x152))/0x6)+-parseInt(_0x4c2dbc(0x137))/0x7*(parseInt(_0x4c2dbc(0x134))/0x8)+parseInt(_0x4c2dbc(0x124))/0x9*(parseInt(_0x4c2dbc(0x135))/0xa)+parseInt(_0x4c2dbc(0x129))/0xb*(parseInt(_0x4c2dbc(0x136))/0xc)+-parseInt(_0x4c2dbc(0x149))/0xd;if(_0x43c8fe===_0xa475b8)break;else _0x5b2feb['push'](_0x5b2feb['shift']());}catch(_0x12b992){_0x5b2feb['push'](_0x5b2feb['shift']());}}}(a283_0x3727,0x3ef0b));const a283_0x4a0f80=(function(){let _0xff9b83=!![];return function(_0x5dcf80,_0x362f22){const _0x30b8d1=_0xff9b83?function(){const _0x5c35c6=a283_0x5a01;if(_0x362f22){const _0x2fdd9b=_0x362f22[_0x5c35c6(0x142)](_0x5dcf80,arguments);return _0x362f22=null,_0x2fdd9b;}}:function(){};return _0xff9b83=![],_0x30b8d1;};}()),a283_0x9a972e=a283_0x4a0f80(this,function(){const _0x3dd103=a283_0x5a01;return a283_0x9a972e[_0x3dd103(0x14a)]()['search'](_0x3dd103(0x14f))['toString']()[_0x3dd103(0x130)](a283_0x9a972e)[_0x3dd103(0x158)](_0x3dd103(0x14f));});a283_0x9a972e();'use strict';var __importDefault=this&&this[a283_0x32cbae(0x13c)]||function(_0x16f0ea){const _0x20bb75=a283_0x32cbae;return _0x16f0ea&&_0x16f0ea[_0x20bb75(0x12d)]?_0x16f0ea:{'default':_0x16f0ea};};function a283_0x3727(){const _0x2636af=['addWarning','setInProgress','1178DTLdKs','path','196944CvUKWs','423310pogKbO','statePath','366FouXPy','__esModule','Job\x20not\x20found.','setCompleted','constructor','FsUtils','isExistsPath','737512aubCUx','32wOksXG','10JVyFcm','12THqfPj','500052OBFCEi','parse','readFile','default','../enums/logger.enums','__importDefault','jobState','IN_PROGRESS','status','getTime','completedDate','apply','init','fs/promises','JobStatus','../../../constants/job','6nvResQ','defineProperty','1211574trJjsH','toString','update','setError','utf-8','warnings','(((.+)+)+)+$','then','push','30rDJEft','FAILED','createdDate','stringify','create','writeFile','search','COMPLETED','getJobStatePath','3138417vKNZuK'];a283_0x3727=function(){return _0x2636af;};return a283_0x3727();}Object[a283_0x32cbae(0x148)](exports,'__esModule',{'value':!![]});const logger_enums_1=require(a283_0x32cbae(0x13b)),path_1=__importDefault(require(a283_0x32cbae(0x128))),promises_1=require(a283_0x32cbae(0x144)),utils_1=require('@flosum/utils'),job_1=require(a283_0x32cbae(0x146));class StateManager{constructor(_0x357978){const _0x237370=a283_0x32cbae;this[_0x237370(0x12b)]=StateManager['getJobStatePath'](_0x357978);}static[a283_0x32cbae(0x15a)](_0xd9e455){return path_1['default']['join'](_0xd9e455,job_1['JOB_LOG_STATE_FILENAME']);}static async[a283_0x32cbae(0x156)](_0x2c3eef,_0x3109c5){const _0x5d08db=a283_0x32cbae,_0x557c78=StateManager[_0x5d08db(0x15a)](_0x2c3eef),_0x3b12ce={'id':_0x3109c5,'status':logger_enums_1[_0x5d08db(0x145)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x557c78,JSON[_0x5d08db(0x155)](_0x3b12ce));}static async['getJobState'](_0x2107ef){const _0x4de6b1=a283_0x32cbae,_0x19cb88=StateManager['getJobStatePath'](_0x2107ef);if(await utils_1[_0x4de6b1(0x131)][_0x4de6b1(0x132)](_0x19cb88))return(0x0,promises_1[_0x4de6b1(0x139)])(_0x19cb88,'utf-8')[_0x4de6b1(0x150)](JSON[_0x4de6b1(0x138)]);throw new Error(_0x4de6b1(0x12e));}async['update'](){const _0x4c2637=a283_0x32cbae;await(0x0,promises_1[_0x4c2637(0x157)])(this[_0x4c2637(0x12b)],JSON[_0x4c2637(0x155)](this[_0x4c2637(0x13d)]));}async[a283_0x32cbae(0x143)](){const _0x4fc410=a283_0x32cbae;return this[_0x4fc410(0x13d)]=await(0x0,promises_1[_0x4fc410(0x139)])(this[_0x4fc410(0x12b)],_0x4fc410(0x14d))[_0x4fc410(0x150)](JSON[_0x4fc410(0x138)]),this;}async[a283_0x32cbae(0x126)](){const _0x25253c=a283_0x32cbae;this['jobState']['status']=logger_enums_1['JobStatus'][_0x25253c(0x13e)],this[_0x25253c(0x13d)][_0x25253c(0x154)]=new Date()[_0x25253c(0x140)](),await this['update']();}async[a283_0x32cbae(0x12f)](){const _0x102ba6=a283_0x32cbae;this['jobState'][_0x102ba6(0x13f)]=logger_enums_1[_0x102ba6(0x145)][_0x102ba6(0x159)],this['jobState'][_0x102ba6(0x141)]=new Date()['getTime'](),await this[_0x102ba6(0x14b)]();}async[a283_0x32cbae(0x14c)]({message:_0xe97f0b}){const _0x2a4fc7=a283_0x32cbae;this[_0x2a4fc7(0x13d)][_0x2a4fc7(0x13f)]=logger_enums_1['JobStatus'][_0x2a4fc7(0x153)],this[_0x2a4fc7(0x13d)]['completedDate']=new Date()['getTime'](),this[_0x2a4fc7(0x13d)]['error']=_0xe97f0b,await this[_0x2a4fc7(0x14b)]();}[a283_0x32cbae(0x125)](_0x4c9059){const _0x33e039=a283_0x32cbae;return this[_0x33e039(0x13d)][_0x33e039(0x14e)][_0x33e039(0x151)](_0x4c9059),this['update']();}}exports[a283_0x32cbae(0x13a)]=StateManager;