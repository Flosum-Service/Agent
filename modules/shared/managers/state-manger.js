const a327_0x3c8308=a327_0x311f;(function(_0x32f8b1,_0x29ab15){const _0x579d70=a327_0x311f,_0x47da1c=_0x32f8b1();while(!![]){try{const _0x39704d=parseInt(_0x579d70(0x105))/0x1+parseInt(_0x579d70(0xd4))/0x2+-parseInt(_0x579d70(0xeb))/0x3+parseInt(_0x579d70(0xfc))/0x4*(-parseInt(_0x579d70(0xd7))/0x5)+parseInt(_0x579d70(0xe4))/0x6+parseInt(_0x579d70(0xd6))/0x7*(parseInt(_0x579d70(0xfd))/0x8)+-parseInt(_0x579d70(0x106))/0x9;if(_0x39704d===_0x29ab15)break;else _0x47da1c['push'](_0x47da1c['shift']());}catch(_0x2a2741){_0x47da1c['push'](_0x47da1c['shift']());}}}(a327_0x1b11,0x692cc));const a327_0x459f06=(function(){let _0x1380ac=!![];return function(_0x1a9e47,_0x2b0bc3){const _0x224974=_0x1380ac?function(){const _0x3f6177=a327_0x311f;if(_0x2b0bc3){const _0x92067=_0x2b0bc3[_0x3f6177(0xe9)](_0x1a9e47,arguments);return _0x2b0bc3=null,_0x92067;}}:function(){};return _0x1380ac=![],_0x224974;};}()),a327_0x336197=a327_0x459f06(this,function(){const _0x12cac6=a327_0x311f;return a327_0x336197[_0x12cac6(0xdb)]()['search'](_0x12cac6(0xf6))[_0x12cac6(0xdb)]()['constructor'](a327_0x336197)[_0x12cac6(0x103)](_0x12cac6(0xf6));});a327_0x336197();'use strict';var __importDefault=this&&this[a327_0x3c8308(0xe8)]||function(_0x571486){const _0x1a69bb=a327_0x3c8308;return _0x571486&&_0x571486[_0x1a69bb(0xf5)]?_0x571486:{'default':_0x571486};};function a327_0x311f(_0x33cd62,_0x57604a){const _0x2e69de=a327_0x1b11();return a327_0x311f=function(_0x336197,_0x459f06){_0x336197=_0x336197-0xd3;let _0x1b1147=_0x2e69de[_0x336197];return _0x1b1147;},a327_0x311f(_0x33cd62,_0x57604a);}Object['defineProperty'](exports,a327_0x3c8308(0xf5),{'value':!![]});const logger_enums_1=require(a327_0x3c8308(0xde)),path_1=__importDefault(require(a327_0x3c8308(0x101))),promises_1=require(a327_0x3c8308(0xe7)),utils_1=require(a327_0x3c8308(0xf9)),job_1=require(a327_0x3c8308(0xf2));function a327_0x1b11(){const _0x459a52=['default','__esModule','(((.+)+)+)+$','isExistsPath','utf-8','@flosum/utils','getTime','then','3380woHnGO','851896QhzIfR','FsUtils','completedDate','status','path','parse','search','createdDate','244972TjRZiN','1415340hCiBeW','IN_PROGRESS','462432RhKDTD','QUEUED','7wVUaJr','1985pvfNtf','getJobStatePath','readFile','JobStatus','toString','Job\x20not\x20found.','writeFile','../enums/logger.enums','setInProgress','join','update','COMPLETED','create','2364000TnORxB','setError','addWarning','fs/promises','__importDefault','apply','jobState','159462UyVGnf','setCompleted','init','statePath','stringify','push','FAILED','../../../constants/job','getJobState'];a327_0x1b11=function(){return _0x459a52;};return a327_0x1b11();}class StateManager{constructor(_0x5b6d36){const _0x4cf3bb=a327_0x3c8308;this[_0x4cf3bb(0xee)]=StateManager[_0x4cf3bb(0xd8)](_0x5b6d36);}static[a327_0x3c8308(0xd8)](_0x155106){const _0x37fe3c=a327_0x3c8308;return path_1[_0x37fe3c(0xf4)][_0x37fe3c(0xe0)](_0x155106,job_1['JOB_LOG_STATE_FILENAME']);}static async[a327_0x3c8308(0xe3)](_0x4878a6,_0x4ca089){const _0x2faf72=a327_0x3c8308,_0x3b600d=StateManager['getJobStatePath'](_0x4878a6),_0x48295a={'id':_0x4ca089,'status':logger_enums_1[_0x2faf72(0xda)][_0x2faf72(0xd5)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x2faf72(0xdd)])(_0x3b600d,JSON[_0x2faf72(0xef)](_0x48295a));}static async[a327_0x3c8308(0xf3)](_0x2ef64f){const _0x4c9dfc=a327_0x3c8308,_0x27d7b1=StateManager[_0x4c9dfc(0xd8)](_0x2ef64f);if(await utils_1[_0x4c9dfc(0xfe)][_0x4c9dfc(0xf7)](_0x27d7b1))return(0x0,promises_1['readFile'])(_0x27d7b1,_0x4c9dfc(0xf8))['then'](JSON[_0x4c9dfc(0x102)]);throw new Error(_0x4c9dfc(0xdc));}async[a327_0x3c8308(0xe1)](){const _0x24d66d=a327_0x3c8308;await(0x0,promises_1[_0x24d66d(0xdd)])(this[_0x24d66d(0xee)],JSON[_0x24d66d(0xef)](this[_0x24d66d(0xea)]));}async[a327_0x3c8308(0xed)](){const _0x48a1a2=a327_0x3c8308;return this[_0x48a1a2(0xea)]=await(0x0,promises_1[_0x48a1a2(0xd9)])(this[_0x48a1a2(0xee)],_0x48a1a2(0xf8))[_0x48a1a2(0xfb)](JSON[_0x48a1a2(0x102)]),this;}async[a327_0x3c8308(0xdf)](){const _0x5d308f=a327_0x3c8308;this[_0x5d308f(0xea)]['status']=logger_enums_1['JobStatus'][_0x5d308f(0xd3)],this['jobState'][_0x5d308f(0x104)]=new Date()[_0x5d308f(0xfa)](),await this[_0x5d308f(0xe1)]();}async[a327_0x3c8308(0xec)](){const _0x441a26=a327_0x3c8308;this[_0x441a26(0xea)][_0x441a26(0x100)]=logger_enums_1[_0x441a26(0xda)][_0x441a26(0xe2)],this['jobState'][_0x441a26(0xff)]=new Date()[_0x441a26(0xfa)](),await this['update']();}async[a327_0x3c8308(0xe5)]({message:_0x52c1f6}){const _0xf0f912=a327_0x3c8308;this['jobState'][_0xf0f912(0x100)]=logger_enums_1[_0xf0f912(0xda)][_0xf0f912(0xf1)],this['jobState']['completedDate']=new Date()[_0xf0f912(0xfa)](),this[_0xf0f912(0xea)]['error']=_0x52c1f6,await this['update']();}[a327_0x3c8308(0xe6)](_0x1f8932){const _0xe6d87e=a327_0x3c8308;return this[_0xe6d87e(0xea)]['warnings'][_0xe6d87e(0xf0)](_0x1f8932),this['update']();}}exports[a327_0x3c8308(0xf4)]=StateManager;