const a283_0x2a11d3=a283_0xe49d;(function(_0x859d43,_0x133cbb){const _0x4fc699=a283_0xe49d,_0x21c0d0=_0x859d43();while(!![]){try{const _0x4318d0=-parseInt(_0x4fc699(0x81))/0x1*(parseInt(_0x4fc699(0x7c))/0x2)+parseInt(_0x4fc699(0x7e))/0x3*(parseInt(_0x4fc699(0x84))/0x4)+parseInt(_0x4fc699(0x9f))/0x5*(-parseInt(_0x4fc699(0x87))/0x6)+-parseInt(_0x4fc699(0x92))/0x7*(parseInt(_0x4fc699(0x73))/0x8)+-parseInt(_0x4fc699(0x76))/0x9+parseInt(_0x4fc699(0x72))/0xa*(parseInt(_0x4fc699(0x8a))/0xb)+parseInt(_0x4fc699(0x9d))/0xc*(parseInt(_0x4fc699(0x9c))/0xd);if(_0x4318d0===_0x133cbb)break;else _0x21c0d0['push'](_0x21c0d0['shift']());}catch(_0x5b24e4){_0x21c0d0['push'](_0x21c0d0['shift']());}}}(a283_0x1e4c,0x8f918));const a283_0xab79de=(function(){let _0x2032c1=!![];return function(_0x5480a7,_0x3ce0e8){const _0x22d19e=_0x2032c1?function(){const _0x462ca6=a283_0xe49d;if(_0x3ce0e8){const _0x4dfd8a=_0x3ce0e8[_0x462ca6(0x9a)](_0x5480a7,arguments);return _0x3ce0e8=null,_0x4dfd8a;}}:function(){};return _0x2032c1=![],_0x22d19e;};}()),a283_0x5dce6b=a283_0xab79de(this,function(){const _0x300daf=a283_0xe49d;return a283_0x5dce6b[_0x300daf(0x70)]()[_0x300daf(0x8e)](_0x300daf(0x80))[_0x300daf(0x70)]()[_0x300daf(0x98)](a283_0x5dce6b)[_0x300daf(0x8e)](_0x300daf(0x80));});a283_0x5dce6b();function a283_0x1e4c(){const _0x3ff0df=['stringify','getJobStatePath','__esModule','constructor','@flosum/utils','apply','then','21541LhLvhq','1224wPhPFU','createdDate','145oRfsYR','JOB_LOG_STATE_FILENAME','writeFile','isExistsPath','toString','JobStatus','52200nLvYsA','584rjTqNC','FsUtils','completedDate','3531159xTBcLQ','init','jobState','setInProgress','update','readFile','8zBDSQD','getTime','369ctlNUW','default','(((.+)+)+)+$','5808jqrTBZ','join','../../../constants/job','35988PFAcDk','setError','statePath','107634XnLdGt','status','Job\x20not\x20found.','550dymUND','error','IN_PROGRESS','warnings','search','__importDefault','utf-8','fs/promises','1225hPPTjS','parse','path'];a283_0x1e4c=function(){return _0x3ff0df;};return a283_0x1e4c();}'use strict';function a283_0xe49d(_0xb01033,_0x43409e){const _0x578317=a283_0x1e4c();return a283_0xe49d=function(_0x5dce6b,_0xab79de){_0x5dce6b=_0x5dce6b-0x6f;let _0x1e4cce=_0x578317[_0x5dce6b];return _0x1e4cce;},a283_0xe49d(_0xb01033,_0x43409e);}var __importDefault=this&&this[a283_0x2a11d3(0x8f)]||function(_0xd8cff5){const _0x538a67=a283_0x2a11d3;return _0xd8cff5&&_0xd8cff5[_0x538a67(0x97)]?_0xd8cff5:{'default':_0xd8cff5};};Object['defineProperty'](exports,a283_0x2a11d3(0x97),{'value':!![]});const logger_enums_1=require('../enums/logger.enums'),path_1=__importDefault(require(a283_0x2a11d3(0x94))),promises_1=require(a283_0x2a11d3(0x91)),utils_1=require(a283_0x2a11d3(0x99)),job_1=require(a283_0x2a11d3(0x83));class StateManager{constructor(_0x3c0708){const _0x12836b=a283_0x2a11d3;this[_0x12836b(0x86)]=StateManager[_0x12836b(0x96)](_0x3c0708);}static['getJobStatePath'](_0xfa5136){const _0x8b50fc=a283_0x2a11d3;return path_1[_0x8b50fc(0x7f)][_0x8b50fc(0x82)](_0xfa5136,job_1[_0x8b50fc(0xa0)]);}static async['create'](_0x6abf59,_0x560e23){const _0x5f42a9=a283_0x2a11d3,_0x2568ee=StateManager[_0x5f42a9(0x96)](_0x6abf59),_0x54ff2f={'id':_0x560e23,'status':logger_enums_1['JobStatus']['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x5f42a9(0xa1)])(_0x2568ee,JSON['stringify'](_0x54ff2f));}static async['getJobState'](_0xdfc950){const _0x5d39d9=a283_0x2a11d3,_0x1b5168=StateManager[_0x5d39d9(0x96)](_0xdfc950);if(await utils_1[_0x5d39d9(0x74)][_0x5d39d9(0x6f)](_0x1b5168))return(0x0,promises_1['readFile'])(_0x1b5168,_0x5d39d9(0x90))[_0x5d39d9(0x9b)](JSON[_0x5d39d9(0x93)]);throw new Error(_0x5d39d9(0x89));}async[a283_0x2a11d3(0x7a)](){const _0x1c5738=a283_0x2a11d3;await(0x0,promises_1[_0x1c5738(0xa1)])(this['statePath'],JSON[_0x1c5738(0x95)](this[_0x1c5738(0x78)]));}async[a283_0x2a11d3(0x77)](){const _0x6581a0=a283_0x2a11d3;return this[_0x6581a0(0x78)]=await(0x0,promises_1[_0x6581a0(0x7b)])(this[_0x6581a0(0x86)],_0x6581a0(0x90))[_0x6581a0(0x9b)](JSON[_0x6581a0(0x93)]),this;}async[a283_0x2a11d3(0x79)](){const _0x55d1f1=a283_0x2a11d3;this['jobState'][_0x55d1f1(0x88)]=logger_enums_1['JobStatus'][_0x55d1f1(0x8c)],this[_0x55d1f1(0x78)][_0x55d1f1(0x9e)]=new Date()[_0x55d1f1(0x7d)](),await this['update']();}async['setCompleted'](){const _0x369df4=a283_0x2a11d3;this[_0x369df4(0x78)][_0x369df4(0x88)]=logger_enums_1[_0x369df4(0x71)]['COMPLETED'],this[_0x369df4(0x78)][_0x369df4(0x75)]=new Date()[_0x369df4(0x7d)](),await this[_0x369df4(0x7a)]();}async[a283_0x2a11d3(0x85)]({message:_0x47a73d}){const _0x4e656f=a283_0x2a11d3;this['jobState']['status']=logger_enums_1[_0x4e656f(0x71)]['FAILED'],this[_0x4e656f(0x78)][_0x4e656f(0x75)]=new Date()[_0x4e656f(0x7d)](),this[_0x4e656f(0x78)][_0x4e656f(0x8b)]=_0x47a73d,await this['update']();}['addWarning'](_0x5c79bf){const _0xd93e78=a283_0x2a11d3;return this[_0xd93e78(0x78)][_0xd93e78(0x8d)]['push'](_0x5c79bf),this[_0xd93e78(0x7a)]();}}exports[a283_0x2a11d3(0x7f)]=StateManager;