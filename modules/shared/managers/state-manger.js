const a327_0x240942=a327_0x5f27;(function(_0x3fabd3,_0x18b228){const _0x14a900=a327_0x5f27,_0x5a077b=_0x3fabd3();while(!![]){try{const _0x3a8160=parseInt(_0x14a900(0x12d))/0x1*(parseInt(_0x14a900(0x137))/0x2)+parseInt(_0x14a900(0x12b))/0x3+parseInt(_0x14a900(0x13c))/0x4*(-parseInt(_0x14a900(0x126))/0x5)+-parseInt(_0x14a900(0x132))/0x6+-parseInt(_0x14a900(0x142))/0x7*(parseInt(_0x14a900(0x127))/0x8)+-parseInt(_0x14a900(0x141))/0x9+-parseInt(_0x14a900(0x14a))/0xa*(-parseInt(_0x14a900(0x11f))/0xb);if(_0x3a8160===_0x18b228)break;else _0x5a077b['push'](_0x5a077b['shift']());}catch(_0x2b04ae){_0x5a077b['push'](_0x5a077b['shift']());}}}(a327_0x2b47,0x54b89));const a327_0x182a01=(function(){let _0x3e70b2=!![];return function(_0x1095cd,_0x1864b1){const _0x1867a9=_0x3e70b2?function(){const _0x308531=a327_0x5f27;if(_0x1864b1){const _0x5ea8d3=_0x1864b1[_0x308531(0x145)](_0x1095cd,arguments);return _0x1864b1=null,_0x5ea8d3;}}:function(){};return _0x3e70b2=![],_0x1867a9;};}()),a327_0x2bbf07=a327_0x182a01(this,function(){const _0x54dc92=a327_0x5f27;return a327_0x2bbf07[_0x54dc92(0x11d)]()[_0x54dc92(0x120)](_0x54dc92(0x146))[_0x54dc92(0x11d)]()[_0x54dc92(0x135)](a327_0x2bbf07)[_0x54dc92(0x120)](_0x54dc92(0x146));});a327_0x2bbf07();function a327_0x5f27(_0x77729b,_0x2b5d4a){const _0x3179f9=a327_0x2b47();return a327_0x5f27=function(_0x2bbf07,_0x182a01){_0x2bbf07=_0x2bbf07-0x11b;let _0x2b4762=_0x3179f9[_0x2bbf07];return _0x2b4762;},a327_0x5f27(_0x77729b,_0x2b5d4a);}'use strict';function a327_0x2b47(){const _0x24ad27=['JobStatus','getJobState','constructor','default','40cLyaVi','IN_PROGRESS','warnings','writeFile','getJobStatePath','163048tSFFji','readFile','init','../../../constants/job','Job\x20not\x20found.','5699700vztdOr','479073djhzWB','__esModule','JOB_LOG_STATE_FILENAME','apply','(((.+)+)+)+$','update','statePath','utf-8','15963930QclHtk','parse','FAILED','getTime','completedDate','toString','defineProperty','11BUQRYK','search','path','../enums/logger.enums','join','QUEUED','error','30TJWuoS','8SsXOlT','status','fs/promises','FsUtils','406665goglSc','stringify','10276sRXGRk','__importDefault','createdDate','then','jobState','3864840AOjvEa'];a327_0x2b47=function(){return _0x24ad27;};return a327_0x2b47();}var __importDefault=this&&this[a327_0x240942(0x12e)]||function(_0x15dd00){const _0x43dfce=a327_0x240942;return _0x15dd00&&_0x15dd00[_0x43dfce(0x143)]?_0x15dd00:{'default':_0x15dd00};};Object[a327_0x240942(0x11e)](exports,a327_0x240942(0x143),{'value':!![]});const logger_enums_1=require(a327_0x240942(0x122)),path_1=__importDefault(require(a327_0x240942(0x121))),promises_1=require(a327_0x240942(0x129)),utils_1=require('@flosum/utils'),job_1=require(a327_0x240942(0x13f));class StateManager{constructor(_0x15be3c){const _0x3a9945=a327_0x240942;this[_0x3a9945(0x148)]=StateManager[_0x3a9945(0x13b)](_0x15be3c);}static['getJobStatePath'](_0x39b3fe){const _0x59dd00=a327_0x240942;return path_1[_0x59dd00(0x136)][_0x59dd00(0x123)](_0x39b3fe,job_1[_0x59dd00(0x144)]);}static async['create'](_0x138d0d,_0x21af64){const _0x416d9c=a327_0x240942,_0x48ff96=StateManager[_0x416d9c(0x13b)](_0x138d0d),_0x91f2d8={'id':_0x21af64,'status':logger_enums_1[_0x416d9c(0x133)][_0x416d9c(0x124)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x48ff96,JSON[_0x416d9c(0x12c)](_0x91f2d8));}static async[a327_0x240942(0x134)](_0x4d26ca){const _0x577c34=a327_0x240942,_0x286a33=StateManager[_0x577c34(0x13b)](_0x4d26ca);if(await utils_1[_0x577c34(0x12a)]['isExistsPath'](_0x286a33))return(0x0,promises_1[_0x577c34(0x13d)])(_0x286a33,'utf-8')[_0x577c34(0x130)](JSON[_0x577c34(0x14b)]);throw new Error(_0x577c34(0x140));}async[a327_0x240942(0x147)](){const _0x2ceed7=a327_0x240942;await(0x0,promises_1[_0x2ceed7(0x13a)])(this['statePath'],JSON[_0x2ceed7(0x12c)](this[_0x2ceed7(0x131)]));}async[a327_0x240942(0x13e)](){const _0x31acd3=a327_0x240942;return this[_0x31acd3(0x131)]=await(0x0,promises_1['readFile'])(this['statePath'],_0x31acd3(0x149))['then'](JSON[_0x31acd3(0x14b)]),this;}async['setInProgress'](){const _0x416395=a327_0x240942;this[_0x416395(0x131)][_0x416395(0x128)]=logger_enums_1[_0x416395(0x133)][_0x416395(0x138)],this[_0x416395(0x131)][_0x416395(0x12f)]=new Date()[_0x416395(0x11b)](),await this[_0x416395(0x147)]();}async['setCompleted'](){const _0x14f0f4=a327_0x240942;this['jobState'][_0x14f0f4(0x128)]=logger_enums_1[_0x14f0f4(0x133)]['COMPLETED'],this[_0x14f0f4(0x131)][_0x14f0f4(0x11c)]=new Date()[_0x14f0f4(0x11b)](),await this[_0x14f0f4(0x147)]();}async['setError']({message:_0x270f80}){const _0x6c26ee=a327_0x240942;this[_0x6c26ee(0x131)][_0x6c26ee(0x128)]=logger_enums_1['JobStatus'][_0x6c26ee(0x14c)],this[_0x6c26ee(0x131)]['completedDate']=new Date()[_0x6c26ee(0x11b)](),this['jobState'][_0x6c26ee(0x125)]=_0x270f80,await this[_0x6c26ee(0x147)]();}['addWarning'](_0x285377){const _0x34f861=a327_0x240942;return this[_0x34f861(0x131)][_0x34f861(0x139)]['push'](_0x285377),this[_0x34f861(0x147)]();}}exports[a327_0x240942(0x136)]=StateManager;