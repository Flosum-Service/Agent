const a315_0x90a50b=a315_0x589b;(function(_0x3ac771,_0x4b1cbd){const _0x378a60=a315_0x589b,_0x5db186=_0x3ac771();while(!![]){try{const _0x3dd925=-parseInt(_0x378a60(0xab))/0x1+-parseInt(_0x378a60(0xa0))/0x2*(-parseInt(_0x378a60(0x90))/0x3)+-parseInt(_0x378a60(0x9a))/0x4+parseInt(_0x378a60(0x81))/0x5*(-parseInt(_0x378a60(0xaa))/0x6)+-parseInt(_0x378a60(0x92))/0x7+-parseInt(_0x378a60(0x7e))/0x8+-parseInt(_0x378a60(0x83))/0x9*(-parseInt(_0x378a60(0x95))/0xa);if(_0x3dd925===_0x4b1cbd)break;else _0x5db186['push'](_0x5db186['shift']());}catch(_0x564be1){_0x5db186['push'](_0x5db186['shift']());}}}(a315_0x5ba2,0x23254));function a315_0x589b(_0x17f0ca,_0x3cbaf2){const _0x107697=a315_0x5ba2();return a315_0x589b=function(_0x4abdc,_0x1f1d3e){_0x4abdc=_0x4abdc-0x7b;let _0x5ba24f=_0x107697[_0x4abdc];return _0x5ba24f;},a315_0x589b(_0x17f0ca,_0x3cbaf2);}const a315_0x1f1d3e=(function(){let _0xedfaf9=!![];return function(_0x34b4b5,_0x59a5e3){const _0x43ec9d=_0xedfaf9?function(){if(_0x59a5e3){const _0x309fcf=_0x59a5e3['apply'](_0x34b4b5,arguments);return _0x59a5e3=null,_0x309fcf;}}:function(){};return _0xedfaf9=![],_0x43ec9d;};}()),a315_0x4abdc=a315_0x1f1d3e(this,function(){const _0x4518d3=a315_0x589b;return a315_0x4abdc[_0x4518d3(0x85)]()[_0x4518d3(0x93)]('(((.+)+)+)+$')[_0x4518d3(0x85)]()[_0x4518d3(0x8a)](a315_0x4abdc)[_0x4518d3(0x93)](_0x4518d3(0x8e));});a315_0x4abdc();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x672fb0){const _0x242f5d=a315_0x589b;return _0x672fb0&&_0x672fb0[_0x242f5d(0x9f)]?_0x672fb0:{'default':_0x672fb0};};Object[a315_0x90a50b(0x8d)](exports,a315_0x90a50b(0x9f),{'value':!![]});const logger_enums_1=require('../enums/logger.enums'),path_1=__importDefault(require(a315_0x90a50b(0x9d))),promises_1=require(a315_0x90a50b(0xa1)),utils_1=require(a315_0x90a50b(0x97)),job_1=require(a315_0x90a50b(0xa4));class StateManager{constructor(_0x465dd6){const _0x19727e=a315_0x90a50b;this[_0x19727e(0x98)]=StateManager[_0x19727e(0x88)](_0x465dd6);}static[a315_0x90a50b(0x88)](_0x2457a2){const _0x20bb44=a315_0x90a50b;return path_1[_0x20bb44(0x94)][_0x20bb44(0xa9)](_0x2457a2,job_1['JOB_LOG_STATE_FILENAME']);}static async[a315_0x90a50b(0x8f)](_0x30e135,_0x26074b){const _0x40ce05=a315_0x90a50b,_0x51ce0c=StateManager[_0x40ce05(0x88)](_0x30e135),_0x61e967={'id':_0x26074b,'status':logger_enums_1['JobStatus']['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x40ce05(0x8c)])(_0x51ce0c,JSON[_0x40ce05(0xa5)](_0x61e967));}static async['getJobState'](_0x1ccc7b){const _0x2456d7=a315_0x90a50b,_0xa7c484=StateManager[_0x2456d7(0x88)](_0x1ccc7b);if(await utils_1[_0x2456d7(0xa3)]['isExistsPath'](_0xa7c484))return(0x0,promises_1['readFile'])(_0xa7c484,_0x2456d7(0x7b))[_0x2456d7(0x7c)](JSON[_0x2456d7(0xa7)]);throw new Error(_0x2456d7(0x87));}async['update'](){const _0x4457f3=a315_0x90a50b;await(0x0,promises_1[_0x4457f3(0x8c)])(this[_0x4457f3(0x98)],JSON[_0x4457f3(0xa5)](this[_0x4457f3(0x7f)]));}async[a315_0x90a50b(0x80)](){const _0x6e8c9d=a315_0x90a50b;return this['jobState']=await(0x0,promises_1[_0x6e8c9d(0xa8)])(this[_0x6e8c9d(0x98)],_0x6e8c9d(0x7b))[_0x6e8c9d(0x7c)](JSON['parse']),this;}async[a315_0x90a50b(0x9c)](){const _0x3ce6bb=a315_0x90a50b;this[_0x3ce6bb(0x7f)][_0x3ce6bb(0x86)]=logger_enums_1[_0x3ce6bb(0x84)][_0x3ce6bb(0xa6)],this[_0x3ce6bb(0x7f)]['createdDate']=new Date()['getTime'](),await this[_0x3ce6bb(0x9e)]();}async[a315_0x90a50b(0x7d)](){const _0x3fb09b=a315_0x90a50b;this['jobState'][_0x3fb09b(0x86)]=logger_enums_1[_0x3fb09b(0x84)][_0x3fb09b(0x99)],this[_0x3fb09b(0x7f)]['completedDate']=new Date()['getTime'](),await this[_0x3fb09b(0x9e)]();}async[a315_0x90a50b(0x82)]({message:_0x483759}){const _0x52a7eb=a315_0x90a50b;this['jobState']['status']=logger_enums_1[_0x52a7eb(0x84)][_0x52a7eb(0x8b)],this[_0x52a7eb(0x7f)][_0x52a7eb(0x9b)]=new Date()['getTime'](),this[_0x52a7eb(0x7f)][_0x52a7eb(0xa2)]=_0x483759,await this[_0x52a7eb(0x9e)]();}[a315_0x90a50b(0x89)](_0x280fe4){const _0x20a9bb=a315_0x90a50b;return this['jobState'][_0x20a9bb(0x91)][_0x20a9bb(0x96)](_0x280fe4),this[_0x20a9bb(0x9e)]();}}function a315_0x5ba2(){const _0x46bcda=['1967400Sjibii','jobState','init','35lPaEqP','setError','279OjZmsS','JobStatus','toString','status','Job\x20not\x20found.','getJobStatePath','addWarning','constructor','FAILED','writeFile','defineProperty','(((.+)+)+)+$','create','36WNUDeO','warnings','1433075auqmmQ','search','default','255420nzjWoI','push','@flosum/utils','statePath','COMPLETED','189052xIyLju','completedDate','setInProgress','path','update','__esModule','33122cvZKNY','fs/promises','error','FsUtils','../../../constants/job','stringify','IN_PROGRESS','parse','readFile','join','143796simxGw','180903NOGWeJ','utf-8','then','setCompleted'];a315_0x5ba2=function(){return _0x46bcda;};return a315_0x5ba2();}exports[a315_0x90a50b(0x94)]=StateManager;