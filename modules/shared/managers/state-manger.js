function a328_0x2258(){const _0x51d56d=['isExistsPath','(((.+)+)+)+$','init','10845352vvqhpi','fs/promises','getJobState','__esModule','__importDefault','3001650xOTPdC','search','stringify','FAILED','path','1439857VwbjZv','error','../enums/logger.enums','push','readFile','join','FsUtils','../../../constants/job','Job\x20not\x20found.','createdDate','parse','581427PFsBKc','JOB_LOG_STATE_FILENAME','getTime','@flosum/utils','setCompleted','status','3239984bUGdUk','update','1726590AEAExL','completedDate','utf-8','toString','COMPLETED','then','getJobStatePath','JobStatus','4966854WsDDIJ','statePath','4tLEMbk','jobState','QUEUED','warnings','writeFile','setError','default','addWarning'];a328_0x2258=function(){return _0x51d56d;};return a328_0x2258();}const a328_0x44d8f1=a328_0xdad2;(function(_0x185c3a,_0x3549b2){const _0x13857d=a328_0xdad2,_0x3de99e=_0x185c3a();while(!![]){try{const _0x3386aa=parseInt(_0x13857d(0xa3))/0x1+parseInt(_0x13857d(0xd0))/0x2+parseInt(_0x13857d(0xae))/0x3+-parseInt(_0x13857d(0xc0))/0x4*(parseInt(_0x13857d(0xb6))/0x5)+-parseInt(_0x13857d(0xbe))/0x6+-parseInt(_0x13857d(0xcb))/0x7+parseInt(_0x13857d(0xb4))/0x8;if(_0x3386aa===_0x3549b2)break;else _0x3de99e['push'](_0x3de99e['shift']());}catch(_0x5ea6f8){_0x3de99e['push'](_0x3de99e['shift']());}}}(a328_0x2258,0xc7782));const a328_0x2a4670=(function(){let _0x331e7c=!![];return function(_0x1eeb7a,_0x3249a2){const _0x9addf9=_0x331e7c?function(){if(_0x3249a2){const _0x1410ff=_0x3249a2['apply'](_0x1eeb7a,arguments);return _0x3249a2=null,_0x1410ff;}}:function(){};return _0x331e7c=![],_0x9addf9;};}()),a328_0x316f0e=a328_0x2a4670(this,function(){const _0x43f548=a328_0xdad2;return a328_0x316f0e[_0x43f548(0xb9)]()[_0x43f548(0xd1)]('(((.+)+)+)+$')['toString']()['constructor'](a328_0x316f0e)[_0x43f548(0xd1)](_0x43f548(0xc9));});a328_0x316f0e();'use strict';var __importDefault=this&&this[a328_0x44d8f1(0xcf)]||function(_0x169d63){const _0x5a3499=a328_0x44d8f1;return _0x169d63&&_0x169d63[_0x5a3499(0xce)]?_0x169d63:{'default':_0x169d63};};function a328_0xdad2(_0x20d5b2,_0x21fe48){const _0x56e84b=a328_0x2258();return a328_0xdad2=function(_0x316f0e,_0x2a4670){_0x316f0e=_0x316f0e-0xa3;let _0x225890=_0x56e84b[_0x316f0e];return _0x225890;},a328_0xdad2(_0x20d5b2,_0x21fe48);}Object['defineProperty'](exports,a328_0x44d8f1(0xce),{'value':!![]});const logger_enums_1=require(a328_0x44d8f1(0xa5)),path_1=__importDefault(require(a328_0x44d8f1(0xd4))),promises_1=require(a328_0x44d8f1(0xcc)),utils_1=require(a328_0x44d8f1(0xb1)),job_1=require(a328_0x44d8f1(0xaa));class StateManager{constructor(_0x3f2a0f){const _0x28641e=a328_0x44d8f1;this[_0x28641e(0xbf)]=StateManager[_0x28641e(0xbc)](_0x3f2a0f);}static[a328_0x44d8f1(0xbc)](_0x2be404){const _0x507219=a328_0x44d8f1;return path_1[_0x507219(0xc6)][_0x507219(0xa8)](_0x2be404,job_1[_0x507219(0xaf)]);}static async['create'](_0x58c334,_0x199191){const _0x107b8e=a328_0x44d8f1,_0x132063=StateManager[_0x107b8e(0xbc)](_0x58c334),_0x29c72b={'id':_0x199191,'status':logger_enums_1[_0x107b8e(0xbd)][_0x107b8e(0xc2)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x107b8e(0xc4)])(_0x132063,JSON[_0x107b8e(0xd2)](_0x29c72b));}static async[a328_0x44d8f1(0xcd)](_0x4dd2b7){const _0x261cfc=a328_0x44d8f1,_0x5b1091=StateManager[_0x261cfc(0xbc)](_0x4dd2b7);if(await utils_1[_0x261cfc(0xa9)][_0x261cfc(0xc8)](_0x5b1091))return(0x0,promises_1['readFile'])(_0x5b1091,_0x261cfc(0xb8))[_0x261cfc(0xbb)](JSON[_0x261cfc(0xad)]);throw new Error(_0x261cfc(0xab));}async['update'](){const _0x12491d=a328_0x44d8f1;await(0x0,promises_1['writeFile'])(this[_0x12491d(0xbf)],JSON[_0x12491d(0xd2)](this[_0x12491d(0xc1)]));}async[a328_0x44d8f1(0xca)](){const _0x543585=a328_0x44d8f1;return this[_0x543585(0xc1)]=await(0x0,promises_1[_0x543585(0xa7)])(this[_0x543585(0xbf)],_0x543585(0xb8))['then'](JSON[_0x543585(0xad)]),this;}async['setInProgress'](){const _0x44827d=a328_0x44d8f1;this['jobState'][_0x44827d(0xb3)]=logger_enums_1[_0x44827d(0xbd)]['IN_PROGRESS'],this[_0x44827d(0xc1)][_0x44827d(0xac)]=new Date()[_0x44827d(0xb0)](),await this['update']();}async[a328_0x44d8f1(0xb2)](){const _0x3b9bfe=a328_0x44d8f1;this['jobState'][_0x3b9bfe(0xb3)]=logger_enums_1[_0x3b9bfe(0xbd)][_0x3b9bfe(0xba)],this[_0x3b9bfe(0xc1)][_0x3b9bfe(0xb7)]=new Date()[_0x3b9bfe(0xb0)](),await this[_0x3b9bfe(0xb5)]();}async[a328_0x44d8f1(0xc5)]({message:_0x487361}){const _0x71c782=a328_0x44d8f1;this[_0x71c782(0xc1)][_0x71c782(0xb3)]=logger_enums_1[_0x71c782(0xbd)][_0x71c782(0xd3)],this[_0x71c782(0xc1)][_0x71c782(0xb7)]=new Date()['getTime'](),this[_0x71c782(0xc1)][_0x71c782(0xa4)]=_0x487361,await this[_0x71c782(0xb5)]();}[a328_0x44d8f1(0xc7)](_0x23915c){const _0x315876=a328_0x44d8f1;return this[_0x315876(0xc1)][_0x315876(0xc3)][_0x315876(0xa6)](_0x23915c),this[_0x315876(0xb5)]();}}exports[a328_0x44d8f1(0xc6)]=StateManager;