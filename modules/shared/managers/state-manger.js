const a327_0x4526e4=a327_0x6ff4;(function(_0x3a2040,_0x5e1615){const _0xdafa67=a327_0x6ff4,_0x1ade53=_0x3a2040();while(!![]){try{const _0x23d153=parseInt(_0xdafa67(0xd7))/0x1+parseInt(_0xdafa67(0xf7))/0x2*(-parseInt(_0xdafa67(0xe4))/0x3)+parseInt(_0xdafa67(0xf6))/0x4+-parseInt(_0xdafa67(0xef))/0x5*(parseInt(_0xdafa67(0xc7))/0x6)+-parseInt(_0xdafa67(0xeb))/0x7*(parseInt(_0xdafa67(0xf3))/0x8)+-parseInt(_0xdafa67(0xd6))/0x9+-parseInt(_0xdafa67(0xf9))/0xa*(-parseInt(_0xdafa67(0xe7))/0xb);if(_0x23d153===_0x5e1615)break;else _0x1ade53['push'](_0x1ade53['shift']());}catch(_0x5b07f4){_0x1ade53['push'](_0x1ade53['shift']());}}}(a327_0x3be6,0xc7be8));const a327_0x32b032=(function(){let _0x218220=!![];return function(_0x4f3a81,_0x3dfa41){const _0x294ca0=_0x218220?function(){const _0x54a898=a327_0x6ff4;if(_0x3dfa41){const _0x5e3c6f=_0x3dfa41[_0x54a898(0xec)](_0x4f3a81,arguments);return _0x3dfa41=null,_0x5e3c6f;}}:function(){};return _0x218220=![],_0x294ca0;};}()),a327_0x37fa9e=a327_0x32b032(this,function(){const _0x52c572=a327_0x6ff4;return a327_0x37fa9e[_0x52c572(0xc9)]()[_0x52c572(0xee)](_0x52c572(0xf2))[_0x52c572(0xc9)]()[_0x52c572(0xc8)](a327_0x37fa9e)[_0x52c572(0xee)](_0x52c572(0xf2));});a327_0x37fa9e();'use strict';var __importDefault=this&&this[a327_0x4526e4(0xd3)]||function(_0x3d5524){const _0x13f200=a327_0x4526e4;return _0x3d5524&&_0x3d5524[_0x13f200(0xe8)]?_0x3d5524:{'default':_0x3d5524};};Object['defineProperty'](exports,a327_0x4526e4(0xe8),{'value':!![]});const logger_enums_1=require('../enums/logger.enums'),path_1=__importDefault(require(a327_0x4526e4(0xe2))),promises_1=require(a327_0x4526e4(0xdd)),utils_1=require('@flosum/utils'),job_1=require(a327_0x4526e4(0xe0));function a327_0x6ff4(_0x5df0be,_0x2f0e89){const _0x369991=a327_0x3be6();return a327_0x6ff4=function(_0x37fa9e,_0x32b032){_0x37fa9e=_0x37fa9e-0xc6;let _0x3be684=_0x369991[_0x37fa9e];return _0x3be684;},a327_0x6ff4(_0x5df0be,_0x2f0e89);}class StateManager{constructor(_0x22cfa0){const _0x393985=a327_0x4526e4;this[_0x393985(0xdc)]=StateManager[_0x393985(0xf5)](_0x22cfa0);}static[a327_0x4526e4(0xf5)](_0x236941){const _0x2afa8a=a327_0x4526e4;return path_1['default']['join'](_0x236941,job_1[_0x2afa8a(0xe6)]);}static async[a327_0x4526e4(0xdf)](_0x3381bd,_0x273885){const _0x40ab7e=a327_0x4526e4,_0xef0338=StateManager['getJobStatePath'](_0x3381bd),_0x4aa697={'id':_0x273885,'status':logger_enums_1[_0x40ab7e(0xe1)][_0x40ab7e(0xd0)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x40ab7e(0xcd)])(_0xef0338,JSON[_0x40ab7e(0xf4)](_0x4aa697));}static async[a327_0x4526e4(0xcf)](_0x1a80cc){const _0x374280=a327_0x4526e4,_0x114cda=StateManager[_0x374280(0xf5)](_0x1a80cc);if(await utils_1['FsUtils'][_0x374280(0xf1)](_0x114cda))return(0x0,promises_1[_0x374280(0xd5)])(_0x114cda,_0x374280(0xd4))[_0x374280(0xed)](JSON[_0x374280(0xe5)]);throw new Error(_0x374280(0xca));}async[a327_0x4526e4(0xc6)](){const _0x4d2b55=a327_0x4526e4;await(0x0,promises_1['writeFile'])(this[_0x4d2b55(0xdc)],JSON[_0x4d2b55(0xf4)](this[_0x4d2b55(0xf8)]));}async[a327_0x4526e4(0xda)](){const _0xd81971=a327_0x4526e4;return this[_0xd81971(0xf8)]=await(0x0,promises_1[_0xd81971(0xd5)])(this['statePath'],'utf-8')[_0xd81971(0xed)](JSON[_0xd81971(0xe5)]),this;}async[a327_0x4526e4(0xde)](){const _0x4de25e=a327_0x4526e4;this[_0x4de25e(0xf8)][_0x4de25e(0xd9)]=logger_enums_1[_0x4de25e(0xe1)][_0x4de25e(0xcb)],this['jobState'][_0x4de25e(0xd2)]=new Date()['getTime'](),await this[_0x4de25e(0xc6)]();}async['setCompleted'](){const _0x5da8a9=a327_0x4526e4;this['jobState']['status']=logger_enums_1[_0x5da8a9(0xe1)][_0x5da8a9(0xce)],this['jobState'][_0x5da8a9(0xd8)]=new Date()[_0x5da8a9(0xdb)](),await this[_0x5da8a9(0xc6)]();}async[a327_0x4526e4(0xd1)]({message:_0x179bf9}){const _0x1b50dd=a327_0x4526e4;this[_0x1b50dd(0xf8)][_0x1b50dd(0xd9)]=logger_enums_1[_0x1b50dd(0xe1)][_0x1b50dd(0xea)],this[_0x1b50dd(0xf8)][_0x1b50dd(0xd8)]=new Date()[_0x1b50dd(0xdb)](),this[_0x1b50dd(0xf8)]['error']=_0x179bf9,await this[_0x1b50dd(0xc6)]();}[a327_0x4526e4(0xe9)](_0x54cd1f){const _0x27d4c2=a327_0x4526e4;return this['jobState'][_0x27d4c2(0xe3)][_0x27d4c2(0xf0)](_0x54cd1f),this[_0x27d4c2(0xc6)]();}}exports[a327_0x4526e4(0xcc)]=StateManager;function a327_0x3be6(){const _0x4f3da3=['5201946lLdtEY','1223403ESmkak','completedDate','status','init','getTime','statePath','fs/promises','setInProgress','create','../../../constants/job','JobStatus','path','warnings','3WYBwvC','parse','JOB_LOG_STATE_FILENAME','9933715Ofvizl','__esModule','addWarning','FAILED','313264OmaqTG','apply','then','search','4625STAlzC','push','isExistsPath','(((.+)+)+)+$','200tlYbiW','stringify','getJobStatePath','1907616mXtJND','1286062GcVkTH','jobState','30oHcoyq','update','8118zcAQkE','constructor','toString','Job\x20not\x20found.','IN_PROGRESS','default','writeFile','COMPLETED','getJobState','QUEUED','setError','createdDate','__importDefault','utf-8','readFile'];a327_0x3be6=function(){return _0x4f3da3;};return a327_0x3be6();}