const a326_0x1eb671=a326_0x48c7;(function(_0xeb1a00,_0x4f48e6){const _0xa60ac1=a326_0x48c7,_0x665230=_0xeb1a00();while(!![]){try{const _0x28fc9b=-parseInt(_0xa60ac1(0x128))/0x1+parseInt(_0xa60ac1(0x104))/0x2+parseInt(_0xa60ac1(0x129))/0x3*(parseInt(_0xa60ac1(0x113))/0x4)+parseInt(_0xa60ac1(0x122))/0x5*(parseInt(_0xa60ac1(0x11d))/0x6)+parseInt(_0xa60ac1(0x124))/0x7*(parseInt(_0xa60ac1(0x10d))/0x8)+-parseInt(_0xa60ac1(0x100))/0x9*(-parseInt(_0xa60ac1(0x121))/0xa)+parseInt(_0xa60ac1(0x118))/0xb*(-parseInt(_0xa60ac1(0x125))/0xc);if(_0x28fc9b===_0x4f48e6)break;else _0x665230['push'](_0x665230['shift']());}catch(_0x57b77b){_0x665230['push'](_0x665230['shift']());}}}(a326_0x425e,0x4b61e));const a326_0x1e57b5=(function(){let _0xbe14d4=!![];return function(_0x3c831d,_0x159ba5){const _0x1f85b5=_0xbe14d4?function(){const _0x1e71be=a326_0x48c7;if(_0x159ba5){const _0x565d1f=_0x159ba5[_0x1e71be(0x123)](_0x3c831d,arguments);return _0x159ba5=null,_0x565d1f;}}:function(){};return _0xbe14d4=![],_0x1f85b5;};}()),a326_0x3b363f=a326_0x1e57b5(this,function(){const _0x33d325=a326_0x48c7;return a326_0x3b363f['toString']()[_0x33d325(0x120)]('(((.+)+)+)+$')[_0x33d325(0x11f)]()['constructor'](a326_0x3b363f)[_0x33d325(0x120)]('(((.+)+)+)+$');});function a326_0x425e(){const _0x3b2908=['__esModule','toString','search','1404350KgJpab','5QcYFss','apply','742mxqmWK','2408508HIRaQG','../enums/logger.enums','COMPLETED','569824CUkfca','22329otSLNH','setInProgress','writeFile','readFile','error','setCompleted','then','push','fs/promises','9HODwqg','FAILED','status','@flosum/utils','120584uZyQoc','completedDate','isExistsPath','utf-8','jobState','getJobStatePath','createdDate','getTime','default','12952tngveg','parse','JobStatus','__importDefault','JOB_LOG_STATE_FILENAME','stringify','216bFuVrN','statePath','IN_PROGRESS','getJobState','../../../constants/job','11fiQDbG','addWarning','warnings','update','FsUtils','1830216rWTmce'];a326_0x425e=function(){return _0x3b2908;};return a326_0x425e();}a326_0x3b363f();function a326_0x48c7(_0x430b9a,_0x493584){const _0x58a6f9=a326_0x425e();return a326_0x48c7=function(_0x3b363f,_0x1e57b5){_0x3b363f=_0x3b363f-0x100;let _0x425ea3=_0x58a6f9[_0x3b363f];return _0x425ea3;},a326_0x48c7(_0x430b9a,_0x493584);}'use strict';var __importDefault=this&&this[a326_0x1eb671(0x110)]||function(_0x47b62f){const _0x2da788=a326_0x1eb671;return _0x47b62f&&_0x47b62f[_0x2da788(0x11e)]?_0x47b62f:{'default':_0x47b62f};};Object['defineProperty'](exports,a326_0x1eb671(0x11e),{'value':!![]});const logger_enums_1=require(a326_0x1eb671(0x126)),path_1=__importDefault(require('path')),promises_1=require(a326_0x1eb671(0x131)),utils_1=require(a326_0x1eb671(0x103)),job_1=require(a326_0x1eb671(0x117));class StateManager{constructor(_0x4a8e1f){const _0x4f9ee4=a326_0x1eb671;this[_0x4f9ee4(0x114)]=StateManager['getJobStatePath'](_0x4a8e1f);}static['getJobStatePath'](_0x516acc){const _0x5f1e9c=a326_0x1eb671;return path_1[_0x5f1e9c(0x10c)]['join'](_0x516acc,job_1[_0x5f1e9c(0x111)]);}static async['create'](_0x766c5c,_0x4b3a54){const _0x25863d=a326_0x1eb671,_0x4b0a8f=StateManager[_0x25863d(0x109)](_0x766c5c),_0x472121={'id':_0x4b3a54,'status':logger_enums_1[_0x25863d(0x10f)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x25863d(0x12b)])(_0x4b0a8f,JSON[_0x25863d(0x112)](_0x472121));}static async[a326_0x1eb671(0x116)](_0x5259f9){const _0xc05060=a326_0x1eb671,_0x439405=StateManager[_0xc05060(0x109)](_0x5259f9);if(await utils_1[_0xc05060(0x11c)][_0xc05060(0x106)](_0x439405))return(0x0,promises_1[_0xc05060(0x12c)])(_0x439405,_0xc05060(0x107))[_0xc05060(0x12f)](JSON[_0xc05060(0x10e)]);throw new Error('Job\x20not\x20found.');}async[a326_0x1eb671(0x11b)](){const _0x5b551b=a326_0x1eb671;await(0x0,promises_1[_0x5b551b(0x12b)])(this[_0x5b551b(0x114)],JSON['stringify'](this[_0x5b551b(0x108)]));}async['init'](){const _0x417216=a326_0x1eb671;return this[_0x417216(0x108)]=await(0x0,promises_1[_0x417216(0x12c)])(this[_0x417216(0x114)],_0x417216(0x107))['then'](JSON[_0x417216(0x10e)]),this;}async[a326_0x1eb671(0x12a)](){const _0x1386c1=a326_0x1eb671;this[_0x1386c1(0x108)][_0x1386c1(0x102)]=logger_enums_1[_0x1386c1(0x10f)][_0x1386c1(0x115)],this[_0x1386c1(0x108)][_0x1386c1(0x10a)]=new Date()['getTime'](),await this[_0x1386c1(0x11b)]();}async[a326_0x1eb671(0x12e)](){const _0x13de27=a326_0x1eb671;this[_0x13de27(0x108)][_0x13de27(0x102)]=logger_enums_1[_0x13de27(0x10f)][_0x13de27(0x127)],this['jobState'][_0x13de27(0x105)]=new Date()[_0x13de27(0x10b)](),await this[_0x13de27(0x11b)]();}async['setError']({message:_0x16f802}){const _0x927645=a326_0x1eb671;this[_0x927645(0x108)][_0x927645(0x102)]=logger_enums_1[_0x927645(0x10f)][_0x927645(0x101)],this['jobState'][_0x927645(0x105)]=new Date()[_0x927645(0x10b)](),this[_0x927645(0x108)][_0x927645(0x12d)]=_0x16f802,await this[_0x927645(0x11b)]();}[a326_0x1eb671(0x119)](_0x4eb21f){const _0x33e330=a326_0x1eb671;return this[_0x33e330(0x108)][_0x33e330(0x11a)][_0x33e330(0x130)](_0x4eb21f),this[_0x33e330(0x11b)]();}}exports[a326_0x1eb671(0x10c)]=StateManager;