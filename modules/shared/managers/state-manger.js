const a327_0x125ed8=a327_0x31d0;function a327_0x1802(){const _0x248272=['1045065KTBpGa','push','Job\x20not\x20found.','create','path','apply','225oIiXfY','FAILED','59024sMUyeF','996942asbyHy','282224aAdEYq','utf-8','15504aTFMhl','QUEUED','statePath','getTime','warnings','58MWGiDp','getJobState','createdDate','readFile','JobStatus','../enums/logger.enums','search','JOB_LOG_STATE_FILENAME','writeFile','error','setInProgress','isExistsPath','IN_PROGRESS','COMPLETED','status','202468atrACK','update','constructor','2027921TMcRpv','__esModule','fs/promises','default','toString','parse','(((.+)+)+)+$','completedDate','getJobStatePath','init','../../../constants/job','setError','jobState','__importDefault'];a327_0x1802=function(){return _0x248272;};return a327_0x1802();}function a327_0x31d0(_0x3d3425,_0xad1e8f){const _0x3e5d43=a327_0x1802();return a327_0x31d0=function(_0x83f9b7,_0x4efa24){_0x83f9b7=_0x83f9b7-0x160;let _0x180293=_0x3e5d43[_0x83f9b7];return _0x180293;},a327_0x31d0(_0x3d3425,_0xad1e8f);}(function(_0x5609f0,_0x1ae1f3){const _0x12a09e=a327_0x31d0,_0x13019=_0x5609f0();while(!![]){try{const _0x4e5494=parseInt(_0x12a09e(0x168))/0x1+-parseInt(_0x12a09e(0x18a))/0x2*(-parseInt(_0x12a09e(0x185))/0x3)+parseInt(_0x12a09e(0x183))/0x4+-parseInt(_0x12a09e(0x179))/0x5+-parseInt(_0x12a09e(0x182))/0x6+parseInt(_0x12a09e(0x16b))/0x7+-parseInt(_0x12a09e(0x181))/0x8*(parseInt(_0x12a09e(0x17f))/0x9);if(_0x4e5494===_0x1ae1f3)break;else _0x13019['push'](_0x13019['shift']());}catch(_0x45ccfc){_0x13019['push'](_0x13019['shift']());}}}(a327_0x1802,0x25593));const a327_0x4efa24=(function(){let _0x2ba741=!![];return function(_0xe3d9a4,_0x34bc47){const _0x1bc21a=_0x2ba741?function(){const _0x126b4c=a327_0x31d0;if(_0x34bc47){const _0x36b1c0=_0x34bc47[_0x126b4c(0x17e)](_0xe3d9a4,arguments);return _0x34bc47=null,_0x36b1c0;}}:function(){};return _0x2ba741=![],_0x1bc21a;};}()),a327_0x83f9b7=a327_0x4efa24(this,function(){const _0x3145e7=a327_0x31d0;return a327_0x83f9b7[_0x3145e7(0x16f)]()[_0x3145e7(0x190)](_0x3145e7(0x171))[_0x3145e7(0x16f)]()[_0x3145e7(0x16a)](a327_0x83f9b7)[_0x3145e7(0x190)]('(((.+)+)+)+$');});a327_0x83f9b7();'use strict';var __importDefault=this&&this[a327_0x125ed8(0x178)]||function(_0x133644){const _0x2e2b75=a327_0x125ed8;return _0x133644&&_0x133644[_0x2e2b75(0x16c)]?_0x133644:{'default':_0x133644};};Object['defineProperty'](exports,a327_0x125ed8(0x16c),{'value':!![]});const logger_enums_1=require(a327_0x125ed8(0x18f)),path_1=__importDefault(require(a327_0x125ed8(0x17d))),promises_1=require(a327_0x125ed8(0x16d)),utils_1=require('@flosum/utils'),job_1=require(a327_0x125ed8(0x175));class StateManager{constructor(_0x4251f0){const _0x12acfe=a327_0x125ed8;this[_0x12acfe(0x187)]=StateManager[_0x12acfe(0x173)](_0x4251f0);}static[a327_0x125ed8(0x173)](_0x45f985){const _0x1592e0=a327_0x125ed8;return path_1[_0x1592e0(0x16e)]['join'](_0x45f985,job_1[_0x1592e0(0x160)]);}static async[a327_0x125ed8(0x17c)](_0x3acb90,_0x33f70c){const _0x3730ce=a327_0x125ed8,_0x397b8a=StateManager[_0x3730ce(0x173)](_0x3acb90),_0x3a90cb={'id':_0x33f70c,'status':logger_enums_1[_0x3730ce(0x18e)][_0x3730ce(0x186)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x3730ce(0x161)])(_0x397b8a,JSON['stringify'](_0x3a90cb));}static async[a327_0x125ed8(0x18b)](_0x135837){const _0xa045c2=a327_0x125ed8,_0x27bf1c=StateManager[_0xa045c2(0x173)](_0x135837);if(await utils_1['FsUtils'][_0xa045c2(0x164)](_0x27bf1c))return(0x0,promises_1[_0xa045c2(0x18d)])(_0x27bf1c,_0xa045c2(0x184))['then'](JSON[_0xa045c2(0x170)]);throw new Error(_0xa045c2(0x17b));}async['update'](){const _0x4d9e17=a327_0x125ed8;await(0x0,promises_1[_0x4d9e17(0x161)])(this[_0x4d9e17(0x187)],JSON['stringify'](this[_0x4d9e17(0x177)]));}async[a327_0x125ed8(0x174)](){const _0x500d72=a327_0x125ed8;return this[_0x500d72(0x177)]=await(0x0,promises_1[_0x500d72(0x18d)])(this[_0x500d72(0x187)],_0x500d72(0x184))['then'](JSON[_0x500d72(0x170)]),this;}async[a327_0x125ed8(0x163)](){const _0x3e4a46=a327_0x125ed8;this[_0x3e4a46(0x177)]['status']=logger_enums_1[_0x3e4a46(0x18e)][_0x3e4a46(0x165)],this[_0x3e4a46(0x177)][_0x3e4a46(0x18c)]=new Date()[_0x3e4a46(0x188)](),await this[_0x3e4a46(0x169)]();}async['setCompleted'](){const _0xac0db5=a327_0x125ed8;this['jobState'][_0xac0db5(0x167)]=logger_enums_1[_0xac0db5(0x18e)][_0xac0db5(0x166)],this[_0xac0db5(0x177)][_0xac0db5(0x172)]=new Date()[_0xac0db5(0x188)](),await this[_0xac0db5(0x169)]();}async[a327_0x125ed8(0x176)]({message:_0x4579c0}){const _0x4a33cb=a327_0x125ed8;this[_0x4a33cb(0x177)][_0x4a33cb(0x167)]=logger_enums_1['JobStatus'][_0x4a33cb(0x180)],this[_0x4a33cb(0x177)][_0x4a33cb(0x172)]=new Date()[_0x4a33cb(0x188)](),this['jobState'][_0x4a33cb(0x162)]=_0x4579c0,await this[_0x4a33cb(0x169)]();}['addWarning'](_0x2aa9e9){const _0x4f0c8f=a327_0x125ed8;return this[_0x4f0c8f(0x177)][_0x4f0c8f(0x189)][_0x4f0c8f(0x17a)](_0x2aa9e9),this[_0x4f0c8f(0x169)]();}}exports['default']=StateManager;