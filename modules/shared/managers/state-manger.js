function a283_0x2d53(_0x579aa9,_0x2d1aac){const _0x3071ab=a283_0x1e80();return a283_0x2d53=function(_0x7c01c1,_0x32a27e){_0x7c01c1=_0x7c01c1-0x106;let _0x1e8037=_0x3071ab[_0x7c01c1];return _0x1e8037;},a283_0x2d53(_0x579aa9,_0x2d1aac);}const a283_0x389ea5=a283_0x2d53;function a283_0x1e80(){const _0xeae105=['245GIfSQq','setCompleted','151292QmERCl','create','1303482TouCnP','fs/promises','__esModule','215768hRtpeo','FsUtils','parse','join','writeFile','getJobState','JobStatus','getTime','(((.+)+)+)+$','4433960xyZNpJ','isExistsPath','default','jobState','error','statePath','../enums/logger.enums','132yCgvIy','24556IiLIwS','then','IN_PROGRESS','push','Job\x20not\x20found.','path','defineProperty','setInProgress','setError','apply','JOB_LOG_STATE_FILENAME','completedDate','constructor','FAILED','utf-8','status','readFile','COMPLETED','1623612LFDxqn','21313080RgoBNa','toString','createdDate','update','search','init','stringify','getJobStatePath','addWarning'];a283_0x1e80=function(){return _0xeae105;};return a283_0x1e80();}(function(_0xdbfcba,_0x2a9c56){const _0x5a9078=a283_0x2d53,_0x473c65=_0xdbfcba();while(!![]){try{const _0x9d3915=parseInt(_0x5a9078(0x138))/0x1+-parseInt(_0x5a9078(0x106))/0x2+-parseInt(_0x5a9078(0x12c))/0x3+-parseInt(_0x5a9078(0x11a))/0x4*(-parseInt(_0x5a9078(0x136))/0x5)+parseInt(_0x5a9078(0x119))/0x6*(-parseInt(_0x5a9078(0x109))/0x7)+-parseInt(_0x5a9078(0x112))/0x8+parseInt(_0x5a9078(0x12d))/0x9;if(_0x9d3915===_0x2a9c56)break;else _0x473c65['push'](_0x473c65['shift']());}catch(_0x53ea56){_0x473c65['push'](_0x473c65['shift']());}}}(a283_0x1e80,0x60699));const a283_0x32a27e=(function(){let _0x7df2b0=!![];return function(_0x17f26c,_0xa55ace){const _0x4dec0b=_0x7df2b0?function(){const _0x4bba33=a283_0x2d53;if(_0xa55ace){const _0x2f8eca=_0xa55ace[_0x4bba33(0x123)](_0x17f26c,arguments);return _0xa55ace=null,_0x2f8eca;}}:function(){};return _0x7df2b0=![],_0x4dec0b;};}()),a283_0x7c01c1=a283_0x32a27e(this,function(){const _0x420133=a283_0x2d53;return a283_0x7c01c1[_0x420133(0x12e)]()[_0x420133(0x131)](_0x420133(0x111))[_0x420133(0x12e)]()[_0x420133(0x126)](a283_0x7c01c1)[_0x420133(0x131)](_0x420133(0x111));});a283_0x7c01c1();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3c4688){return _0x3c4688&&_0x3c4688['__esModule']?_0x3c4688:{'default':_0x3c4688};};Object[a283_0x389ea5(0x120)](exports,a283_0x389ea5(0x108),{'value':!![]});const logger_enums_1=require(a283_0x389ea5(0x118)),path_1=__importDefault(require(a283_0x389ea5(0x11f))),promises_1=require(a283_0x389ea5(0x107)),utils_1=require('@flosum/utils'),job_1=require('../../../constants/job');class StateManager{constructor(_0x169f70){this['statePath']=StateManager['getJobStatePath'](_0x169f70);}static[a283_0x389ea5(0x134)](_0x13bccb){const _0x196668=a283_0x389ea5;return path_1[_0x196668(0x114)][_0x196668(0x10c)](_0x13bccb,job_1[_0x196668(0x124)]);}static async[a283_0x389ea5(0x139)](_0x3a30f8,_0x1d72e4){const _0x18675c=a283_0x389ea5,_0x2c842a=StateManager[_0x18675c(0x134)](_0x3a30f8),_0x209123={'id':_0x1d72e4,'status':logger_enums_1[_0x18675c(0x10f)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x18675c(0x10d)])(_0x2c842a,JSON[_0x18675c(0x133)](_0x209123));}static async[a283_0x389ea5(0x10e)](_0x2eae5c){const _0x1982de=a283_0x389ea5,_0x24c3f2=StateManager['getJobStatePath'](_0x2eae5c);if(await utils_1[_0x1982de(0x10a)][_0x1982de(0x113)](_0x24c3f2))return(0x0,promises_1['readFile'])(_0x24c3f2,_0x1982de(0x128))['then'](JSON['parse']);throw new Error(_0x1982de(0x11e));}async[a283_0x389ea5(0x130)](){const _0x3b7462=a283_0x389ea5;await(0x0,promises_1['writeFile'])(this['statePath'],JSON[_0x3b7462(0x133)](this[_0x3b7462(0x115)]));}async[a283_0x389ea5(0x132)](){const _0x2f1fea=a283_0x389ea5;return this[_0x2f1fea(0x115)]=await(0x0,promises_1[_0x2f1fea(0x12a)])(this[_0x2f1fea(0x117)],'utf-8')[_0x2f1fea(0x11b)](JSON[_0x2f1fea(0x10b)]),this;}async[a283_0x389ea5(0x121)](){const _0x52f204=a283_0x389ea5;this['jobState'][_0x52f204(0x129)]=logger_enums_1[_0x52f204(0x10f)][_0x52f204(0x11c)],this[_0x52f204(0x115)][_0x52f204(0x12f)]=new Date()[_0x52f204(0x110)](),await this[_0x52f204(0x130)]();}async[a283_0x389ea5(0x137)](){const _0x30a59a=a283_0x389ea5;this[_0x30a59a(0x115)][_0x30a59a(0x129)]=logger_enums_1['JobStatus'][_0x30a59a(0x12b)],this['jobState']['completedDate']=new Date()[_0x30a59a(0x110)](),await this['update']();}async[a283_0x389ea5(0x122)]({message:_0xf86e2c}){const _0x1394fe=a283_0x389ea5;this['jobState']['status']=logger_enums_1[_0x1394fe(0x10f)][_0x1394fe(0x127)],this[_0x1394fe(0x115)][_0x1394fe(0x125)]=new Date()['getTime'](),this[_0x1394fe(0x115)][_0x1394fe(0x116)]=_0xf86e2c,await this[_0x1394fe(0x130)]();}[a283_0x389ea5(0x135)](_0x122d0b){const _0x3ad122=a283_0x389ea5;return this[_0x3ad122(0x115)]['warnings'][_0x3ad122(0x11d)](_0x122d0b),this[_0x3ad122(0x130)]();}}exports['default']=StateManager;