const a278_0x24e5fc=a278_0x2154;(function(_0x93923e,_0x469756){const _0x4a1a21=a278_0x2154,_0x206327=_0x93923e();while(!![]){try{const _0x2f853c=-parseInt(_0x4a1a21(0xd9))/0x1*(parseInt(_0x4a1a21(0xec))/0x2)+-parseInt(_0x4a1a21(0xd1))/0x3+-parseInt(_0x4a1a21(0xf0))/0x4*(parseInt(_0x4a1a21(0xe4))/0x5)+parseInt(_0x4a1a21(0xe3))/0x6*(parseInt(_0x4a1a21(0xd5))/0x7)+-parseInt(_0x4a1a21(0xdb))/0x8+parseInt(_0x4a1a21(0xf1))/0x9*(-parseInt(_0x4a1a21(0xe2))/0xa)+-parseInt(_0x4a1a21(0xef))/0xb*(-parseInt(_0x4a1a21(0xd8))/0xc);if(_0x2f853c===_0x469756)break;else _0x206327['push'](_0x206327['shift']());}catch(_0x4d1a5f){_0x206327['push'](_0x206327['shift']());}}}(a278_0x29df,0x66687));const a278_0x3e9f14=(function(){let _0x3a6034=!![];return function(_0x582ff1,_0x3239ea){const _0x5a560b=_0x3a6034?function(){const _0xde4cf=a278_0x2154;if(_0x3239ea){const _0x3289ea=_0x3239ea[_0xde4cf(0xdf)](_0x582ff1,arguments);return _0x3239ea=null,_0x3289ea;}}:function(){};return _0x3a6034=![],_0x5a560b;};}()),a278_0x19ce5a=a278_0x3e9f14(this,function(){const _0x582a53=a278_0x2154;return a278_0x19ce5a['toString']()[_0x582a53(0xd6)](_0x582a53(0xe9))[_0x582a53(0xd0)]()['constructor'](a278_0x19ce5a)[_0x582a53(0xd6)](_0x582a53(0xe9));});a278_0x19ce5a();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2b5441){const _0x48d0d6=a278_0x2154;return _0x2b5441&&_0x2b5441[_0x48d0d6(0xd2)]?_0x2b5441:{'default':_0x2b5441};};function a278_0x2154(_0xf204f7,_0xb180b7){const _0x3c74d5=a278_0x29df();return a278_0x2154=function(_0x19ce5a,_0x3e9f14){_0x19ce5a=_0x19ce5a-0xc5;let _0x29dfde=_0x3c74d5[_0x19ce5a];return _0x29dfde;},a278_0x2154(_0xf204f7,_0xb180b7);}function a278_0x29df(){const _0xb10793=['utf-8','364804pGUmxc','8emQUOQ','503703EHoaXM','FAILED','IN_PROGRESS','path','then','JobStatus','fs/promises','stringify','createdDate','status','../enums/logger.enums','setError','writeFile','completedDate','@flosum/utils','parse','Job\x20not\x20found.','warnings','update','toString','446298FMszdh','__esModule','QUEUED','addWarning','63399EySvRd','search','init','600WBtWJH','57772UnKuzw','push','1460168gfBHIh','isExistsPath','COMPLETED','getJobState','apply','default','statePath','10oThPZw','6Zjmblq','851480hMfCCC','FsUtils','getJobStatePath','JOB_LOG_STATE_FILENAME','jobState','(((.+)+)+)+$','join','readFile','18oeJKDa','getTime'];a278_0x29df=function(){return _0xb10793;};return a278_0x29df();}Object['defineProperty'](exports,a278_0x24e5fc(0xd2),{'value':!![]});const logger_enums_1=require(a278_0x24e5fc(0xc7)),path_1=__importDefault(require(a278_0x24e5fc(0xf4))),promises_1=require(a278_0x24e5fc(0xf7)),utils_1=require(a278_0x24e5fc(0xcb)),job_1=require('../../../constants/job');class StateManager{constructor(_0x1b2ee7){const _0xb5f170=a278_0x24e5fc;this[_0xb5f170(0xe1)]=StateManager[_0xb5f170(0xe6)](_0x1b2ee7);}static['getJobStatePath'](_0x182879){const _0x3e21b1=a278_0x24e5fc;return path_1[_0x3e21b1(0xe0)][_0x3e21b1(0xea)](_0x182879,job_1[_0x3e21b1(0xe7)]);}static async['create'](_0x1ef9b3,_0x12f80e){const _0x3475aa=a278_0x24e5fc,_0x49a768=StateManager[_0x3475aa(0xe6)](_0x1ef9b3),_0x334c57={'id':_0x12f80e,'status':logger_enums_1[_0x3475aa(0xf6)][_0x3475aa(0xd3)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x3475aa(0xc9)])(_0x49a768,JSON[_0x3475aa(0xf8)](_0x334c57));}static async[a278_0x24e5fc(0xde)](_0x277e5c){const _0x265742=a278_0x24e5fc,_0x4e8536=StateManager['getJobStatePath'](_0x277e5c);if(await utils_1[_0x265742(0xe5)][_0x265742(0xdc)](_0x4e8536))return(0x0,promises_1[_0x265742(0xeb)])(_0x4e8536,_0x265742(0xee))[_0x265742(0xf5)](JSON[_0x265742(0xcc)]);throw new Error(_0x265742(0xcd));}async[a278_0x24e5fc(0xcf)](){const _0x58910e=a278_0x24e5fc;await(0x0,promises_1[_0x58910e(0xc9)])(this[_0x58910e(0xe1)],JSON[_0x58910e(0xf8)](this[_0x58910e(0xe8)]));}async[a278_0x24e5fc(0xd7)](){const _0x39bf3e=a278_0x24e5fc;return this['jobState']=await(0x0,promises_1['readFile'])(this['statePath'],_0x39bf3e(0xee))['then'](JSON[_0x39bf3e(0xcc)]),this;}async['setInProgress'](){const _0x2019b6=a278_0x24e5fc;this['jobState'][_0x2019b6(0xc6)]=logger_enums_1['JobStatus'][_0x2019b6(0xf3)],this[_0x2019b6(0xe8)][_0x2019b6(0xc5)]=new Date()[_0x2019b6(0xed)](),await this[_0x2019b6(0xcf)]();}async['setCompleted'](){const _0x7bb656=a278_0x24e5fc;this[_0x7bb656(0xe8)][_0x7bb656(0xc6)]=logger_enums_1[_0x7bb656(0xf6)][_0x7bb656(0xdd)],this['jobState'][_0x7bb656(0xca)]=new Date()['getTime'](),await this[_0x7bb656(0xcf)]();}async[a278_0x24e5fc(0xc8)]({message:_0x2a816d}){const _0x40b7c7=a278_0x24e5fc;this[_0x40b7c7(0xe8)][_0x40b7c7(0xc6)]=logger_enums_1[_0x40b7c7(0xf6)][_0x40b7c7(0xf2)],this[_0x40b7c7(0xe8)][_0x40b7c7(0xca)]=new Date()[_0x40b7c7(0xed)](),this[_0x40b7c7(0xe8)]['error']=_0x2a816d,await this[_0x40b7c7(0xcf)]();}[a278_0x24e5fc(0xd4)](_0xf3dc87){const _0x1ef241=a278_0x24e5fc;return this[_0x1ef241(0xe8)][_0x1ef241(0xce)][_0x1ef241(0xda)](_0xf3dc87),this[_0x1ef241(0xcf)]();}}exports['default']=StateManager;