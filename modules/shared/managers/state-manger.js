const a283_0x31d8ea=a283_0x1683;(function(_0x460a99,_0x520b7d){const _0x2e3ce0=a283_0x1683,_0xec7791=_0x460a99();while(!![]){try{const _0x58b3d0=parseInt(_0x2e3ce0(0x156))/0x1*(parseInt(_0x2e3ce0(0x15e))/0x2)+parseInt(_0x2e3ce0(0x154))/0x3+-parseInt(_0x2e3ce0(0x158))/0x4*(-parseInt(_0x2e3ce0(0x164))/0x5)+-parseInt(_0x2e3ce0(0x14b))/0x6+parseInt(_0x2e3ce0(0x162))/0x7*(parseInt(_0x2e3ce0(0x173))/0x8)+-parseInt(_0x2e3ce0(0x174))/0x9*(-parseInt(_0x2e3ce0(0x179))/0xa)+-parseInt(_0x2e3ce0(0x15f))/0xb;if(_0x58b3d0===_0x520b7d)break;else _0xec7791['push'](_0xec7791['shift']());}catch(_0x596a53){_0xec7791['push'](_0xec7791['shift']());}}}(a283_0x2281,0x86a47));const a283_0x16cbdf=(function(){let _0x1ce2fa=!![];return function(_0x2579ee,_0x22e0b7){const _0x45b6ad=_0x1ce2fa?function(){const _0x320f83=a283_0x1683;if(_0x22e0b7){const _0x3f0037=_0x22e0b7[_0x320f83(0x14d)](_0x2579ee,arguments);return _0x22e0b7=null,_0x3f0037;}}:function(){};return _0x1ce2fa=![],_0x45b6ad;};}()),a283_0x16b8e2=a283_0x16cbdf(this,function(){const _0x3008c9=a283_0x1683;return a283_0x16b8e2['toString']()[_0x3008c9(0x170)](_0x3008c9(0x176))[_0x3008c9(0x167)]()[_0x3008c9(0x172)](a283_0x16b8e2)[_0x3008c9(0x170)]('(((.+)+)+)+$');});a283_0x16b8e2();'use strict';var __importDefault=this&&this[a283_0x31d8ea(0x15a)]||function(_0x11f071){const _0x81fe13=a283_0x31d8ea;return _0x11f071&&_0x11f071[_0x81fe13(0x15d)]?_0x11f071:{'default':_0x11f071};};Object['defineProperty'](exports,a283_0x31d8ea(0x15d),{'value':!![]});const logger_enums_1=require(a283_0x31d8ea(0x148)),path_1=__importDefault(require(a283_0x31d8ea(0x168))),promises_1=require(a283_0x31d8ea(0x17e)),utils_1=require(a283_0x31d8ea(0x14c)),job_1=require(a283_0x31d8ea(0x16f));class StateManager{constructor(_0x290472){this['statePath']=StateManager['getJobStatePath'](_0x290472);}static[a283_0x31d8ea(0x14e)](_0x3f8e44){const _0x161c95=a283_0x31d8ea;return path_1[_0x161c95(0x155)][_0x161c95(0x14f)](_0x3f8e44,job_1[_0x161c95(0x17a)]);}static async[a283_0x31d8ea(0x165)](_0x3f005e,_0x258a21){const _0x3c3f26=a283_0x31d8ea,_0x5f5869=StateManager[_0x3c3f26(0x14e)](_0x3f005e),_0x593d39={'id':_0x258a21,'status':logger_enums_1[_0x3c3f26(0x153)][_0x3c3f26(0x16e)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x3c3f26(0x16b)])(_0x5f5869,JSON['stringify'](_0x593d39));}static async[a283_0x31d8ea(0x151)](_0x3ed42a){const _0x47513e=a283_0x31d8ea,_0x313014=StateManager[_0x47513e(0x14e)](_0x3ed42a);if(await utils_1[_0x47513e(0x178)][_0x47513e(0x17d)](_0x313014))return(0x0,promises_1[_0x47513e(0x152)])(_0x313014,_0x47513e(0x15c))[_0x47513e(0x166)](JSON[_0x47513e(0x14a)]);throw new Error(_0x47513e(0x157));}async['update'](){const _0x465bfb=a283_0x31d8ea;await(0x0,promises_1['writeFile'])(this[_0x465bfb(0x17c)],JSON[_0x465bfb(0x171)](this['jobState']));}async[a283_0x31d8ea(0x150)](){const _0x58de11=a283_0x31d8ea;return this[_0x58de11(0x175)]=await(0x0,promises_1[_0x58de11(0x152)])(this['statePath'],_0x58de11(0x15c))[_0x58de11(0x166)](JSON['parse']),this;}async[a283_0x31d8ea(0x169)](){const _0x5e0cb9=a283_0x31d8ea;this[_0x5e0cb9(0x175)][_0x5e0cb9(0x161)]=logger_enums_1[_0x5e0cb9(0x153)]['IN_PROGRESS'],this['jobState'][_0x5e0cb9(0x177)]=new Date()[_0x5e0cb9(0x163)](),await this[_0x5e0cb9(0x160)]();}async[a283_0x31d8ea(0x16a)](){const _0x1e34be=a283_0x31d8ea;this[_0x1e34be(0x175)]['status']=logger_enums_1[_0x1e34be(0x153)][_0x1e34be(0x16c)],this['jobState'][_0x1e34be(0x16d)]=new Date()[_0x1e34be(0x163)](),await this[_0x1e34be(0x160)]();}async[a283_0x31d8ea(0x149)]({message:_0x29a17e}){const _0x5c5efa=a283_0x31d8ea;this[_0x5c5efa(0x175)][_0x5c5efa(0x161)]=logger_enums_1[_0x5c5efa(0x153)][_0x5c5efa(0x159)],this[_0x5c5efa(0x175)]['completedDate']=new Date()['getTime'](),this['jobState']['error']=_0x29a17e,await this[_0x5c5efa(0x160)]();}['addWarning'](_0x43147d){const _0x5db78e=a283_0x31d8ea;return this[_0x5db78e(0x175)][_0x5db78e(0x15b)][_0x5db78e(0x17b)](_0x43147d),this[_0x5db78e(0x160)]();}}function a283_0x2281(){const _0x289981=['1836360UJwWOR','18emwjuq','jobState','(((.+)+)+)+$','createdDate','FsUtils','2996800MlXCcN','JOB_LOG_STATE_FILENAME','push','statePath','isExistsPath','fs/promises','../enums/logger.enums','setError','parse','2440488AmyXrw','@flosum/utils','apply','getJobStatePath','join','init','getJobState','readFile','JobStatus','3255618ZdKtSL','default','950HmhZVq','Job\x20not\x20found.','44nFcUGy','FAILED','__importDefault','warnings','utf-8','__esModule','866kqigro','20326009aHuasD','update','status','7hpWZgO','getTime','218455eCHeKo','create','then','toString','path','setInProgress','setCompleted','writeFile','COMPLETED','completedDate','QUEUED','../../../constants/job','search','stringify','constructor'];a283_0x2281=function(){return _0x289981;};return a283_0x2281();}function a283_0x1683(_0x32733c,_0xa56f9b){const _0x2bbad7=a283_0x2281();return a283_0x1683=function(_0x16b8e2,_0x16cbdf){_0x16b8e2=_0x16b8e2-0x148;let _0x2281bb=_0x2bbad7[_0x16b8e2];return _0x2281bb;},a283_0x1683(_0x32733c,_0xa56f9b);}exports[a283_0x31d8ea(0x155)]=StateManager;