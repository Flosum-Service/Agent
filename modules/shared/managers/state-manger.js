const a328_0xf7ae84=a328_0xd103;function a328_0x1e1c(){const _0x29ae96=['fs/promises','create','completedDate','toString','813FxVlhV','Job\x20not\x20found.','8182386NfgpZf','push','JobStatus','(((.+)+)+)+$','createdDate','19156IZQGtV','COMPLETED','2368304RxVSEl','init','FsUtils','../enums/logger.enums','search','default','@flosum/utils','77uiqAKy','10EBDiIW','path','then','254598pMXIYX','getTime','parse','update','isExistsPath','join','getJobState','addWarning','utf-8','defineProperty','jobState','2931841rLfJQS','IN_PROGRESS','readFile','apply','stringify','status','FAILED','statePath','error','11528vPKLSP','1774295ZcijOS','156pHNakz','getJobStatePath','290eYVFbQ','__importDefault','warnings'];a328_0x1e1c=function(){return _0x29ae96;};return a328_0x1e1c();}(function(_0x34d6ca,_0x5f414c){const _0x10b5c2=a328_0xd103,_0x11f0e3=_0x34d6ca();while(!![]){try{const _0x16b8e3=parseInt(_0x10b5c2(0x1bf))/0x1*(parseInt(_0x10b5c2(0x190))/0x2)+-parseInt(_0x10b5c2(0x197))/0x3*(-parseInt(_0x10b5c2(0x19e))/0x4)+parseInt(_0x10b5c2(0x1c0))/0x5+-parseInt(_0x10b5c2(0x1ab))/0x6*(-parseInt(_0x10b5c2(0x1a7))/0x7)+-parseInt(_0x10b5c2(0x1a0))/0x8+parseInt(_0x10b5c2(0x199))/0x9*(parseInt(_0x10b5c2(0x1a8))/0xa)+parseInt(_0x10b5c2(0x1b6))/0xb*(-parseInt(_0x10b5c2(0x1c1))/0xc);if(_0x16b8e3===_0x5f414c)break;else _0x11f0e3['push'](_0x11f0e3['shift']());}catch(_0x283963){_0x11f0e3['push'](_0x11f0e3['shift']());}}}(a328_0x1e1c,0xe54ce));const a328_0x68bb27=(function(){let _0x1bb712=!![];return function(_0x454395,_0x4efbef){const _0x33db46=_0x1bb712?function(){const _0x21b858=a328_0xd103;if(_0x4efbef){const _0x1042fc=_0x4efbef[_0x21b858(0x1b9)](_0x454395,arguments);return _0x4efbef=null,_0x1042fc;}}:function(){};return _0x1bb712=![],_0x33db46;};}()),a328_0x292f73=a328_0x68bb27(this,function(){const _0x14992c=a328_0xd103;return a328_0x292f73[_0x14992c(0x196)]()[_0x14992c(0x1a4)](_0x14992c(0x19c))['toString']()['constructor'](a328_0x292f73)[_0x14992c(0x1a4)](_0x14992c(0x19c));});a328_0x292f73();'use strict';var __importDefault=this&&this[a328_0xf7ae84(0x191)]||function(_0x518c7a){return _0x518c7a&&_0x518c7a['__esModule']?_0x518c7a:{'default':_0x518c7a};};Object[a328_0xf7ae84(0x1b4)](exports,'__esModule',{'value':!![]});const logger_enums_1=require(a328_0xf7ae84(0x1a3)),path_1=__importDefault(require(a328_0xf7ae84(0x1a9))),promises_1=require(a328_0xf7ae84(0x193)),utils_1=require(a328_0xf7ae84(0x1a6)),job_1=require('../../../constants/job');function a328_0xd103(_0xa58634,_0x6206f4){const _0x43483e=a328_0x1e1c();return a328_0xd103=function(_0x292f73,_0x68bb27){_0x292f73=_0x292f73-0x18f;let _0x1e1c9b=_0x43483e[_0x292f73];return _0x1e1c9b;},a328_0xd103(_0xa58634,_0x6206f4);}class StateManager{constructor(_0x170162){const _0xd079c=a328_0xf7ae84;this[_0xd079c(0x1bd)]=StateManager[_0xd079c(0x18f)](_0x170162);}static['getJobStatePath'](_0x1bc52d){const _0x57aac3=a328_0xf7ae84;return path_1[_0x57aac3(0x1a5)][_0x57aac3(0x1b0)](_0x1bc52d,job_1['JOB_LOG_STATE_FILENAME']);}static async[a328_0xf7ae84(0x194)](_0x2ba4a4,_0x16b0aa){const _0x7162c=a328_0xf7ae84,_0x43212a=StateManager[_0x7162c(0x18f)](_0x2ba4a4),_0x4a3a96={'id':_0x16b0aa,'status':logger_enums_1[_0x7162c(0x19b)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x43212a,JSON[_0x7162c(0x1ba)](_0x4a3a96));}static async[a328_0xf7ae84(0x1b1)](_0x5542ac){const _0x2c0c8e=a328_0xf7ae84,_0x2398f5=StateManager[_0x2c0c8e(0x18f)](_0x5542ac);if(await utils_1[_0x2c0c8e(0x1a2)][_0x2c0c8e(0x1af)](_0x2398f5))return(0x0,promises_1[_0x2c0c8e(0x1b8)])(_0x2398f5,_0x2c0c8e(0x1b3))[_0x2c0c8e(0x1aa)](JSON[_0x2c0c8e(0x1ad)]);throw new Error(_0x2c0c8e(0x198));}async[a328_0xf7ae84(0x1ae)](){const _0x23d9c6=a328_0xf7ae84;await(0x0,promises_1['writeFile'])(this[_0x23d9c6(0x1bd)],JSON[_0x23d9c6(0x1ba)](this[_0x23d9c6(0x1b5)]));}async[a328_0xf7ae84(0x1a1)](){const _0x2162d2=a328_0xf7ae84;return this[_0x2162d2(0x1b5)]=await(0x0,promises_1[_0x2162d2(0x1b8)])(this['statePath'],'utf-8')[_0x2162d2(0x1aa)](JSON[_0x2162d2(0x1ad)]),this;}async['setInProgress'](){const _0x1d7e64=a328_0xf7ae84;this[_0x1d7e64(0x1b5)][_0x1d7e64(0x1bb)]=logger_enums_1[_0x1d7e64(0x19b)][_0x1d7e64(0x1b7)],this[_0x1d7e64(0x1b5)][_0x1d7e64(0x19d)]=new Date()[_0x1d7e64(0x1ac)](),await this[_0x1d7e64(0x1ae)]();}async['setCompleted'](){const _0x377e30=a328_0xf7ae84;this['jobState']['status']=logger_enums_1[_0x377e30(0x19b)][_0x377e30(0x19f)],this[_0x377e30(0x1b5)][_0x377e30(0x195)]=new Date()[_0x377e30(0x1ac)](),await this['update']();}async['setError']({message:_0x2ea58e}){const _0x287a2b=a328_0xf7ae84;this[_0x287a2b(0x1b5)][_0x287a2b(0x1bb)]=logger_enums_1[_0x287a2b(0x19b)][_0x287a2b(0x1bc)],this[_0x287a2b(0x1b5)]['completedDate']=new Date()['getTime'](),this[_0x287a2b(0x1b5)][_0x287a2b(0x1be)]=_0x2ea58e,await this[_0x287a2b(0x1ae)]();}[a328_0xf7ae84(0x1b2)](_0x3014dc){const _0x60e172=a328_0xf7ae84;return this[_0x60e172(0x1b5)][_0x60e172(0x192)][_0x60e172(0x19a)](_0x3014dc),this['update']();}}exports[a328_0xf7ae84(0x1a5)]=StateManager;