const a315_0x2ba745=a315_0x40b2;(function(_0x4e71a5,_0x84f580){const _0x3a2410=a315_0x40b2,_0x42b12b=_0x4e71a5();while(!![]){try{const _0x380b5d=parseInt(_0x3a2410(0x17a))/0x1+parseInt(_0x3a2410(0x17c))/0x2*(parseInt(_0x3a2410(0x14f))/0x3)+parseInt(_0x3a2410(0x179))/0x4*(parseInt(_0x3a2410(0x166))/0x5)+-parseInt(_0x3a2410(0x150))/0x6+-parseInt(_0x3a2410(0x16a))/0x7+parseInt(_0x3a2410(0x16e))/0x8+-parseInt(_0x3a2410(0x157))/0x9;if(_0x380b5d===_0x84f580)break;else _0x42b12b['push'](_0x42b12b['shift']());}catch(_0x205e39){_0x42b12b['push'](_0x42b12b['shift']());}}}(a315_0x161b,0x29a2f));const a315_0x52af5c=(function(){let _0x283fcc=!![];return function(_0x207ac1,_0x17ecd1){const _0x37f5d5=_0x283fcc?function(){const _0x5848f4=a315_0x40b2;if(_0x17ecd1){const _0x42ea90=_0x17ecd1[_0x5848f4(0x171)](_0x207ac1,arguments);return _0x17ecd1=null,_0x42ea90;}}:function(){};return _0x283fcc=![],_0x37f5d5;};}()),a315_0x3e69ea=a315_0x52af5c(this,function(){const _0x52c99a=a315_0x40b2;return a315_0x3e69ea[_0x52c99a(0x152)]()[_0x52c99a(0x174)](_0x52c99a(0x17f))[_0x52c99a(0x152)]()[_0x52c99a(0x170)](a315_0x3e69ea)[_0x52c99a(0x174)](_0x52c99a(0x17f));});a315_0x3e69ea();'use strict';var __importDefault=this&&this[a315_0x2ba745(0x158)]||function(_0x336940){return _0x336940&&_0x336940['__esModule']?_0x336940:{'default':_0x336940};};function a315_0x40b2(_0x4a3c0e,_0x1d7485){const _0x15dc99=a315_0x161b();return a315_0x40b2=function(_0x3e69ea,_0x52af5c){_0x3e69ea=_0x3e69ea-0x14e;let _0x161be6=_0x15dc99[_0x3e69ea];return _0x161be6;},a315_0x40b2(_0x4a3c0e,_0x1d7485);}Object[a315_0x2ba745(0x154)](exports,a315_0x2ba745(0x161),{'value':!![]});const logger_enums_1=require('../enums/logger.enums'),path_1=__importDefault(require(a315_0x2ba745(0x156))),promises_1=require(a315_0x2ba745(0x14e)),utils_1=require(a315_0x2ba745(0x168)),job_1=require(a315_0x2ba745(0x15e));class StateManager{constructor(_0x3f6063){const _0x5301e3=a315_0x2ba745;this[_0x5301e3(0x17d)]=StateManager[_0x5301e3(0x175)](_0x3f6063);}static[a315_0x2ba745(0x175)](_0x43c0e0){const _0x25e9b5=a315_0x2ba745;return path_1['default']['join'](_0x43c0e0,job_1[_0x25e9b5(0x15f)]);}static async[a315_0x2ba745(0x177)](_0x183b56,_0x109122){const _0x58fed9=a315_0x2ba745,_0x4e8e9d=StateManager[_0x58fed9(0x175)](_0x183b56),_0x35b60c={'id':_0x109122,'status':logger_enums_1[_0x58fed9(0x15b)][_0x58fed9(0x176)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x4e8e9d,JSON['stringify'](_0x35b60c));}static async[a315_0x2ba745(0x167)](_0x48c685){const _0x384308=a315_0x2ba745,_0x24a88=StateManager[_0x384308(0x175)](_0x48c685);if(await utils_1[_0x384308(0x16c)][_0x384308(0x163)](_0x24a88))return(0x0,promises_1[_0x384308(0x162)])(_0x24a88,_0x384308(0x164))['then'](JSON[_0x384308(0x151)]);throw new Error(_0x384308(0x15a));}async[a315_0x2ba745(0x155)](){const _0x39daeb=a315_0x2ba745;await(0x0,promises_1[_0x39daeb(0x16f)])(this[_0x39daeb(0x17d)],JSON[_0x39daeb(0x16b)](this[_0x39daeb(0x173)]));}async[a315_0x2ba745(0x17e)](){const _0x55a928=a315_0x2ba745;return this['jobState']=await(0x0,promises_1[_0x55a928(0x162)])(this[_0x55a928(0x17d)],'utf-8')[_0x55a928(0x15c)](JSON[_0x55a928(0x151)]),this;}async[a315_0x2ba745(0x159)](){const _0xebc96d=a315_0x2ba745;this['jobState'][_0xebc96d(0x153)]=logger_enums_1[_0xebc96d(0x15b)]['IN_PROGRESS'],this[_0xebc96d(0x173)][_0xebc96d(0x16d)]=new Date()[_0xebc96d(0x17b)](),await this[_0xebc96d(0x155)]();}async['setCompleted'](){const _0x5a6046=a315_0x2ba745;this[_0x5a6046(0x173)]['status']=logger_enums_1[_0x5a6046(0x15b)][_0x5a6046(0x15d)],this[_0x5a6046(0x173)][_0x5a6046(0x178)]=new Date()[_0x5a6046(0x17b)](),await this[_0x5a6046(0x155)]();}async[a315_0x2ba745(0x160)]({message:_0xb65fd9}){const _0x12ae43=a315_0x2ba745;this[_0x12ae43(0x173)][_0x12ae43(0x153)]=logger_enums_1['JobStatus'][_0x12ae43(0x169)],this[_0x12ae43(0x173)]['completedDate']=new Date()[_0x12ae43(0x17b)](),this[_0x12ae43(0x173)][_0x12ae43(0x165)]=_0xb65fd9,await this['update']();}['addWarning'](_0x2a38d1){const _0x29cab9=a315_0x2ba745;return this[_0x29cab9(0x173)][_0x29cab9(0x172)]['push'](_0x2a38d1),this[_0x29cab9(0x155)]();}}exports['default']=StateManager;function a315_0x161b(){const _0x42ce54=['JOB_LOG_STATE_FILENAME','setError','__esModule','readFile','isExistsPath','utf-8','error','196705RqnUPm','getJobState','@flosum/utils','FAILED','2285815NOAeLn','stringify','FsUtils','createdDate','2469960vnujGB','writeFile','constructor','apply','warnings','jobState','search','getJobStatePath','QUEUED','create','completedDate','4fYwRUl','113967Vrullc','getTime','539726AQDMjQ','statePath','init','(((.+)+)+)+$','fs/promises','3BdGSed','904128xLkuCo','parse','toString','status','defineProperty','update','path','757260SiBkTg','__importDefault','setInProgress','Job\x20not\x20found.','JobStatus','then','COMPLETED','../../../constants/job'];a315_0x161b=function(){return _0x42ce54;};return a315_0x161b();}