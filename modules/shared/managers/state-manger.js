const a315_0x236857=a315_0x2ada;function a315_0x5c84(){const _0x245916=['warnings','@flosum/utils','setInProgress','init','__importDefault','../enums/logger.enums','77uVRusd','FAILED','2NPdFLU','then','fs/promises','create','getJobStatePath','5520440OgotLJ','1645866AHjBna','createdDate','getJobState','status','search','(((.+)+)+)+$','join','update','completedDate','getTime','jobState','Job\x20not\x20found.','FsUtils','stringify','25122qwKWtU','setError','push','QUEUED','apply','constructor','default','parse','addWarning','2462223LciCrs','../../../constants/job','2247825yieIHi','setCompleted','isExistsPath','JobStatus','JOB_LOG_STATE_FILENAME','path','3436332sQpKVA','statePath','defineProperty','COMPLETED','readFile','toString','67806gjgANV','__esModule'];a315_0x5c84=function(){return _0x245916;};return a315_0x5c84();}(function(_0x1cc8bd,_0x16fccb){const _0x329d75=a315_0x2ada,_0xd0694e=_0x1cc8bd();while(!![]){try{const _0x5f1218=-parseInt(_0x329d75(0x215))/0x1+parseInt(_0x329d75(0x21f))/0x2*(-parseInt(_0x329d75(0x207))/0x3)+parseInt(_0x329d75(0x20f))/0x4+-parseInt(_0x329d75(0x209))/0x5+parseInt(_0x329d75(0x1fe))/0x6*(parseInt(_0x329d75(0x21d))/0x7)+parseInt(_0x329d75(0x224))/0x8+parseInt(_0x329d75(0x1f0))/0x9;if(_0x5f1218===_0x16fccb)break;else _0xd0694e['push'](_0xd0694e['shift']());}catch(_0x5df41c){_0xd0694e['push'](_0xd0694e['shift']());}}}(a315_0x5c84,0x6b695));const a315_0x32f7cd=(function(){let _0x587a11=!![];return function(_0x2eb50f,_0x4a621e){const _0x599871=_0x587a11?function(){const _0x2730fb=a315_0x2ada;if(_0x4a621e){const _0x20e5c7=_0x4a621e[_0x2730fb(0x202)](_0x2eb50f,arguments);return _0x4a621e=null,_0x20e5c7;}}:function(){};return _0x587a11=![],_0x599871;};}()),a315_0x2c122e=a315_0x32f7cd(this,function(){const _0x5e3115=a315_0x2ada;return a315_0x2c122e['toString']()[_0x5e3115(0x1f4)](_0x5e3115(0x1f5))[_0x5e3115(0x214)]()[_0x5e3115(0x203)](a315_0x2c122e)[_0x5e3115(0x1f4)](_0x5e3115(0x1f5));});a315_0x2c122e();'use strict';var __importDefault=this&&this[a315_0x236857(0x21b)]||function(_0x16a051){const _0xb977b1=a315_0x236857;return _0x16a051&&_0x16a051[_0xb977b1(0x216)]?_0x16a051:{'default':_0x16a051};};Object[a315_0x236857(0x211)](exports,a315_0x236857(0x216),{'value':!![]});const logger_enums_1=require(a315_0x236857(0x21c)),path_1=__importDefault(require(a315_0x236857(0x20e))),promises_1=require(a315_0x236857(0x221)),utils_1=require(a315_0x236857(0x218)),job_1=require(a315_0x236857(0x208));class StateManager{constructor(_0x4add8e){const _0x281adb=a315_0x236857;this[_0x281adb(0x210)]=StateManager[_0x281adb(0x223)](_0x4add8e);}static['getJobStatePath'](_0x5e980a){const _0x1c938f=a315_0x236857;return path_1['default'][_0x1c938f(0x1f6)](_0x5e980a,job_1[_0x1c938f(0x20d)]);}static async[a315_0x236857(0x222)](_0x474171,_0x53b85e){const _0x57bf5f=a315_0x236857,_0x522c2a=StateManager[_0x57bf5f(0x223)](_0x474171),_0x242b7c={'id':_0x53b85e,'status':logger_enums_1[_0x57bf5f(0x20c)][_0x57bf5f(0x201)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x522c2a,JSON[_0x57bf5f(0x1fd)](_0x242b7c));}static async[a315_0x236857(0x1f2)](_0xc43042){const _0x59bf22=a315_0x236857,_0x12a6c1=StateManager['getJobStatePath'](_0xc43042);if(await utils_1[_0x59bf22(0x1fc)][_0x59bf22(0x20b)](_0x12a6c1))return(0x0,promises_1['readFile'])(_0x12a6c1,'utf-8')['then'](JSON[_0x59bf22(0x205)]);throw new Error(_0x59bf22(0x1fb));}async['update'](){const _0x20bd8b=a315_0x236857;await(0x0,promises_1['writeFile'])(this['statePath'],JSON[_0x20bd8b(0x1fd)](this['jobState']));}async[a315_0x236857(0x21a)](){const _0x4c8899=a315_0x236857;return this['jobState']=await(0x0,promises_1[_0x4c8899(0x213)])(this[_0x4c8899(0x210)],'utf-8')[_0x4c8899(0x220)](JSON['parse']),this;}async[a315_0x236857(0x219)](){const _0x500bb7=a315_0x236857;this[_0x500bb7(0x1fa)][_0x500bb7(0x1f3)]=logger_enums_1[_0x500bb7(0x20c)]['IN_PROGRESS'],this['jobState'][_0x500bb7(0x1f1)]=new Date()[_0x500bb7(0x1f9)](),await this[_0x500bb7(0x1f7)]();}async[a315_0x236857(0x20a)](){const _0x3c7167=a315_0x236857;this['jobState']['status']=logger_enums_1[_0x3c7167(0x20c)][_0x3c7167(0x212)],this['jobState'][_0x3c7167(0x1f8)]=new Date()[_0x3c7167(0x1f9)](),await this[_0x3c7167(0x1f7)]();}async[a315_0x236857(0x1ff)]({message:_0x4e1e34}){const _0x4eec54=a315_0x236857;this[_0x4eec54(0x1fa)][_0x4eec54(0x1f3)]=logger_enums_1['JobStatus'][_0x4eec54(0x21e)],this[_0x4eec54(0x1fa)][_0x4eec54(0x1f8)]=new Date()[_0x4eec54(0x1f9)](),this[_0x4eec54(0x1fa)]['error']=_0x4e1e34,await this[_0x4eec54(0x1f7)]();}[a315_0x236857(0x206)](_0x3cfca1){const _0x3c314a=a315_0x236857;return this[_0x3c314a(0x1fa)][_0x3c314a(0x217)][_0x3c314a(0x200)](_0x3cfca1),this['update']();}}function a315_0x2ada(_0x139e4a,_0x544519){const _0x1e64f2=a315_0x5c84();return a315_0x2ada=function(_0x2c122e,_0x32f7cd){_0x2c122e=_0x2c122e-0x1f0;let _0x5c8457=_0x1e64f2[_0x2c122e];return _0x5c8457;},a315_0x2ada(_0x139e4a,_0x544519);}exports[a315_0x236857(0x204)]=StateManager;