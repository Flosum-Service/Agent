const a283_0x15fb37=a283_0x1db6;(function(_0x552aa2,_0x541664){const _0x41a8ca=a283_0x1db6,_0x3b4ecc=_0x552aa2();while(!![]){try{const _0x2e0f05=-parseInt(_0x41a8ca(0x1b0))/0x1+-parseInt(_0x41a8ca(0x19e))/0x2+parseInt(_0x41a8ca(0x1a8))/0x3*(parseInt(_0x41a8ca(0x1b1))/0x4)+parseInt(_0x41a8ca(0x1b8))/0x5+-parseInt(_0x41a8ca(0x1bd))/0x6*(parseInt(_0x41a8ca(0x1b9))/0x7)+parseInt(_0x41a8ca(0x199))/0x8+parseInt(_0x41a8ca(0x19a))/0x9;if(_0x2e0f05===_0x541664)break;else _0x3b4ecc['push'](_0x3b4ecc['shift']());}catch(_0x11264d){_0x3b4ecc['push'](_0x3b4ecc['shift']());}}}(a283_0x3088,0xccca7));const a283_0x3123a1=(function(){let _0x57384d=!![];return function(_0x1469b5,_0x451d6a){const _0x15d458=_0x57384d?function(){if(_0x451d6a){const _0x2992d6=_0x451d6a['apply'](_0x1469b5,arguments);return _0x451d6a=null,_0x2992d6;}}:function(){};return _0x57384d=![],_0x15d458;};}()),a283_0x5075f8=a283_0x3123a1(this,function(){const _0x5c2f84=a283_0x1db6;return a283_0x5075f8[_0x5c2f84(0x1a3)]()[_0x5c2f84(0x1a5)](_0x5c2f84(0x197))['toString']()['constructor'](a283_0x5075f8)[_0x5c2f84(0x1a5)](_0x5c2f84(0x197));});a283_0x5075f8();'use strict';var __importDefault=this&&this[a283_0x15fb37(0x1b7)]||function(_0x43e6db){const _0x227e9b=a283_0x15fb37;return _0x43e6db&&_0x43e6db[_0x227e9b(0x1ba)]?_0x43e6db:{'default':_0x43e6db};};function a283_0x1db6(_0x490ef8,_0x2d27b6){const _0x2c3e37=a283_0x3088();return a283_0x1db6=function(_0x5075f8,_0x3123a1){_0x5075f8=_0x5075f8-0x193;let _0x308862=_0x2c3e37[_0x5075f8];return _0x308862;},a283_0x1db6(_0x490ef8,_0x2d27b6);}Object['defineProperty'](exports,a283_0x15fb37(0x1ba),{'value':!![]});function a283_0x3088(){const _0x4d6383=['addWarning','2520082vFoSmh','IN_PROGRESS','update','statePath','../../../constants/job','toString','completedDate','search','writeFile','JOB_LOG_STATE_FILENAME','21bmJszd','jobState','readFile','stringify','getTime','utf-8','isExistsPath','getJobStatePath','175289RkXbjb','405508DbfSgX','push','getJobState','default','setCompleted','QUEUED','__importDefault','72440ZmhqOr','42plbevA','__esModule','warnings','create','209994PaGquX','parse','setError','status','Job\x20not\x20found.','@flosum/utils','FAILED','createdDate','fs/promises','path','(((.+)+)+)+$','init','13128608RLuIhF','1070496HBfBlX','JobStatus','FsUtils'];a283_0x3088=function(){return _0x4d6383;};return a283_0x3088();}const logger_enums_1=require('../enums/logger.enums'),path_1=__importDefault(require(a283_0x15fb37(0x196))),promises_1=require(a283_0x15fb37(0x195)),utils_1=require(a283_0x15fb37(0x1c2)),job_1=require(a283_0x15fb37(0x1a2));class StateManager{constructor(_0x61fde2){const _0x38eecc=a283_0x15fb37;this[_0x38eecc(0x1a1)]=StateManager[_0x38eecc(0x1af)](_0x61fde2);}static[a283_0x15fb37(0x1af)](_0x319a13){const _0x136aa6=a283_0x15fb37;return path_1['default']['join'](_0x319a13,job_1[_0x136aa6(0x1a7)]);}static async[a283_0x15fb37(0x1bc)](_0x31865e,_0x363c87){const _0x3efa33=a283_0x15fb37,_0x48d849=StateManager[_0x3efa33(0x1af)](_0x31865e),_0xdb2599={'id':_0x363c87,'status':logger_enums_1['JobStatus'][_0x3efa33(0x1b6)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x3efa33(0x1a6)])(_0x48d849,JSON['stringify'](_0xdb2599));}static async[a283_0x15fb37(0x1b3)](_0x9f8d70){const _0x354679=a283_0x15fb37,_0x228d8f=StateManager[_0x354679(0x1af)](_0x9f8d70);if(await utils_1[_0x354679(0x19c)][_0x354679(0x1ae)](_0x228d8f))return(0x0,promises_1[_0x354679(0x1aa)])(_0x228d8f,'utf-8')['then'](JSON[_0x354679(0x1be)]);throw new Error(_0x354679(0x1c1));}async['update'](){const _0x315af4=a283_0x15fb37;await(0x0,promises_1[_0x315af4(0x1a6)])(this['statePath'],JSON[_0x315af4(0x1ab)](this[_0x315af4(0x1a9)]));}async[a283_0x15fb37(0x198)](){const _0x3161a9=a283_0x15fb37;return this[_0x3161a9(0x1a9)]=await(0x0,promises_1[_0x3161a9(0x1aa)])(this[_0x3161a9(0x1a1)],_0x3161a9(0x1ad))['then'](JSON[_0x3161a9(0x1be)]),this;}async['setInProgress'](){const _0x2b62e3=a283_0x15fb37;this[_0x2b62e3(0x1a9)]['status']=logger_enums_1['JobStatus'][_0x2b62e3(0x19f)],this[_0x2b62e3(0x1a9)][_0x2b62e3(0x194)]=new Date()['getTime'](),await this['update']();}async[a283_0x15fb37(0x1b5)](){const _0x2d4a02=a283_0x15fb37;this['jobState'][_0x2d4a02(0x1c0)]=logger_enums_1[_0x2d4a02(0x19b)]['COMPLETED'],this[_0x2d4a02(0x1a9)][_0x2d4a02(0x1a4)]=new Date()[_0x2d4a02(0x1ac)](),await this[_0x2d4a02(0x1a0)]();}async[a283_0x15fb37(0x1bf)]({message:_0x255876}){const _0x5e5df4=a283_0x15fb37;this[_0x5e5df4(0x1a9)][_0x5e5df4(0x1c0)]=logger_enums_1['JobStatus'][_0x5e5df4(0x193)],this[_0x5e5df4(0x1a9)]['completedDate']=new Date()[_0x5e5df4(0x1ac)](),this[_0x5e5df4(0x1a9)]['error']=_0x255876,await this[_0x5e5df4(0x1a0)]();}[a283_0x15fb37(0x19d)](_0x9699a0){const _0x5e8afa=a283_0x15fb37;return this[_0x5e8afa(0x1a9)][_0x5e8afa(0x1bb)][_0x5e8afa(0x1b2)](_0x9699a0),this[_0x5e8afa(0x1a0)]();}}exports[a283_0x15fb37(0x1b4)]=StateManager;