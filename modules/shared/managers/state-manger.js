const a326_0x3a467b=a326_0x1391;(function(_0x581d0d,_0x5e6b42){const _0x342821=a326_0x1391,_0x23cf58=_0x581d0d();while(!![]){try{const _0xce0d45=-parseInt(_0x342821(0xa5))/0x1*(parseInt(_0x342821(0xa0))/0x2)+-parseInt(_0x342821(0x95))/0x3*(parseInt(_0x342821(0xa7))/0x4)+-parseInt(_0x342821(0x8e))/0x5*(parseInt(_0x342821(0x88))/0x6)+-parseInt(_0x342821(0x80))/0x7*(parseInt(_0x342821(0x82))/0x8)+-parseInt(_0x342821(0x97))/0x9*(parseInt(_0x342821(0x7f))/0xa)+-parseInt(_0x342821(0x94))/0xb+parseInt(_0x342821(0x7b))/0xc*(parseInt(_0x342821(0xa8))/0xd);if(_0xce0d45===_0x5e6b42)break;else _0x23cf58['push'](_0x23cf58['shift']());}catch(_0xbda35f){_0x23cf58['push'](_0x23cf58['shift']());}}}(a326_0x258e,0x89c0f));function a326_0x1391(_0x1c6dbd,_0x429112){const _0x338850=a326_0x258e();return a326_0x1391=function(_0x4dbca9,_0x128ce4){_0x4dbca9=_0x4dbca9-0x7a;let _0x258eb8=_0x338850[_0x4dbca9];return _0x258eb8;},a326_0x1391(_0x1c6dbd,_0x429112);}const a326_0x128ce4=(function(){let _0x400a74=!![];return function(_0x5f3e3f,_0x170e34){const _0x53c400=_0x400a74?function(){const _0x554f20=a326_0x1391;if(_0x170e34){const _0x27e141=_0x170e34[_0x554f20(0x8b)](_0x5f3e3f,arguments);return _0x170e34=null,_0x27e141;}}:function(){};return _0x400a74=![],_0x53c400;};}()),a326_0x4dbca9=a326_0x128ce4(this,function(){const _0x21d135=a326_0x1391;return a326_0x4dbca9['toString']()[_0x21d135(0x9b)](_0x21d135(0xa6))[_0x21d135(0xad)]()[_0x21d135(0x8f)](a326_0x4dbca9)[_0x21d135(0x9b)](_0x21d135(0xa6));});a326_0x4dbca9();'use strict';function a326_0x258e(){const _0x2a5e16=['__esModule','search','push','join','jobState','then','1139132cRIAxA','parse','path','createdDate','error','1KLztYc','(((.+)+)+)+$','8tvKiEy','715nPZyid','completedDate','utf-8','../../../constants/job','getJobState','toString','stringify','Job\x20not\x20found.','FsUtils','getJobStatePath','1000380wRUmNq','JobStatus','warnings','update','11036470rIvGoX','7PrWeZj','writeFile','6826136NLWQkX','create','setInProgress','init','addWarning','isExistsPath','753276arSzmI','default','__importDefault','apply','FAILED','readFile','25fqzrRR','constructor','getTime','status','IN_PROGRESS','../enums/logger.enums','2414632UReGOh','970671njfVMy','setError','9XkhndC','statePath','JOB_LOG_STATE_FILENAME'];a326_0x258e=function(){return _0x2a5e16;};return a326_0x258e();}var __importDefault=this&&this[a326_0x3a467b(0x8a)]||function(_0x16fb47){return _0x16fb47&&_0x16fb47['__esModule']?_0x16fb47:{'default':_0x16fb47};};Object['defineProperty'](exports,a326_0x3a467b(0x9a),{'value':!![]});const logger_enums_1=require(a326_0x3a467b(0x93)),path_1=__importDefault(require(a326_0x3a467b(0xa2))),promises_1=require('fs/promises'),utils_1=require('@flosum/utils'),job_1=require(a326_0x3a467b(0xab));class StateManager{constructor(_0x223b4b){const _0x2aef23=a326_0x3a467b;this['statePath']=StateManager[_0x2aef23(0x7a)](_0x223b4b);}static[a326_0x3a467b(0x7a)](_0x2c9308){const _0x3ffec9=a326_0x3a467b;return path_1['default'][_0x3ffec9(0x9d)](_0x2c9308,job_1[_0x3ffec9(0x99)]);}static async[a326_0x3a467b(0x83)](_0x1f4006,_0x373c82){const _0x2122d1=a326_0x3a467b,_0x2d6e7a=StateManager[_0x2122d1(0x7a)](_0x1f4006),_0x36edae={'id':_0x373c82,'status':logger_enums_1[_0x2122d1(0x7c)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x2122d1(0x81)])(_0x2d6e7a,JSON[_0x2122d1(0xae)](_0x36edae));}static async[a326_0x3a467b(0xac)](_0x2a6820){const _0x1d06b1=a326_0x3a467b,_0xbd6744=StateManager[_0x1d06b1(0x7a)](_0x2a6820);if(await utils_1[_0x1d06b1(0xb0)][_0x1d06b1(0x87)](_0xbd6744))return(0x0,promises_1[_0x1d06b1(0x8d)])(_0xbd6744,'utf-8')[_0x1d06b1(0x9f)](JSON[_0x1d06b1(0xa1)]);throw new Error(_0x1d06b1(0xaf));}async[a326_0x3a467b(0x7e)](){const _0x358f7d=a326_0x3a467b;await(0x0,promises_1[_0x358f7d(0x81)])(this[_0x358f7d(0x98)],JSON['stringify'](this[_0x358f7d(0x9e)]));}async[a326_0x3a467b(0x85)](){const _0x29f7d5=a326_0x3a467b;return this[_0x29f7d5(0x9e)]=await(0x0,promises_1['readFile'])(this[_0x29f7d5(0x98)],_0x29f7d5(0xaa))[_0x29f7d5(0x9f)](JSON[_0x29f7d5(0xa1)]),this;}async[a326_0x3a467b(0x84)](){const _0x50f53b=a326_0x3a467b;this[_0x50f53b(0x9e)][_0x50f53b(0x91)]=logger_enums_1[_0x50f53b(0x7c)][_0x50f53b(0x92)],this[_0x50f53b(0x9e)][_0x50f53b(0xa3)]=new Date()[_0x50f53b(0x90)](),await this[_0x50f53b(0x7e)]();}async['setCompleted'](){const _0x43b2b5=a326_0x3a467b;this[_0x43b2b5(0x9e)][_0x43b2b5(0x91)]=logger_enums_1[_0x43b2b5(0x7c)]['COMPLETED'],this[_0x43b2b5(0x9e)][_0x43b2b5(0xa9)]=new Date()[_0x43b2b5(0x90)](),await this[_0x43b2b5(0x7e)]();}async[a326_0x3a467b(0x96)]({message:_0x51a76f}){const _0x4b34e5=a326_0x3a467b;this[_0x4b34e5(0x9e)][_0x4b34e5(0x91)]=logger_enums_1[_0x4b34e5(0x7c)][_0x4b34e5(0x8c)],this['jobState'][_0x4b34e5(0xa9)]=new Date()[_0x4b34e5(0x90)](),this[_0x4b34e5(0x9e)][_0x4b34e5(0xa4)]=_0x51a76f,await this[_0x4b34e5(0x7e)]();}[a326_0x3a467b(0x86)](_0x462486){const _0x553c41=a326_0x3a467b;return this[_0x553c41(0x9e)][_0x553c41(0x7d)][_0x553c41(0x9c)](_0x462486),this[_0x553c41(0x7e)]();}}exports[a326_0x3a467b(0x89)]=StateManager;