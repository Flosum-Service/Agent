const a283_0x235664=a283_0x51fe;(function(_0x312603,_0xaf6078){const _0x1e9423=a283_0x51fe,_0xae3550=_0x312603();while(!![]){try{const _0x1503f2=-parseInt(_0x1e9423(0xe4))/0x1*(-parseInt(_0x1e9423(0xed))/0x2)+-parseInt(_0x1e9423(0xea))/0x3+-parseInt(_0x1e9423(0xd8))/0x4+-parseInt(_0x1e9423(0xf9))/0x5*(parseInt(_0x1e9423(0x100))/0x6)+parseInt(_0x1e9423(0xf1))/0x7*(-parseInt(_0x1e9423(0xfe))/0x8)+parseInt(_0x1e9423(0xee))/0x9*(parseInt(_0x1e9423(0xf3))/0xa)+-parseInt(_0x1e9423(0xd5))/0xb;if(_0x1503f2===_0xaf6078)break;else _0xae3550['push'](_0xae3550['shift']());}catch(_0x381b10){_0xae3550['push'](_0xae3550['shift']());}}}(a283_0x1c84,0x742e8));function a283_0x1c84(){const _0x2c13ba=['Job\x20not\x20found.','1217775nzVHAF','parse','error','150988xLzzTS','678141tqVLhd','getJobState','isExistsPath','1320123bQLnQA','@flosum/utils','110wFRUKR','FsUtils','getTime','defineProperty','FAILED','../enums/logger.enums','10PLBOle','utf-8','then','COMPLETED','createdDate','16TePPBE','create','851874tUVrQt','JobStatus','getJobStatePath','writeFile','stringify','405515OFciVz','init','IN_PROGRESS','317868jzfuMq','path','jobState','toString','completedDate','statePath','__importDefault','__esModule','JOB_LOG_STATE_FILENAME','constructor','status','warnings','11cQItmP','setError','update','(((.+)+)+)+$','readFile'];a283_0x1c84=function(){return _0x2c13ba;};return a283_0x1c84();}const a283_0xe22334=(function(){let _0x19c0f9=!![];return function(_0x47c80a,_0x466af7){const _0x450d79=_0x19c0f9?function(){if(_0x466af7){const _0x211a3b=_0x466af7['apply'](_0x47c80a,arguments);return _0x466af7=null,_0x211a3b;}}:function(){};return _0x19c0f9=![],_0x450d79;};}()),a283_0x1506c3=a283_0xe22334(this,function(){const _0x3379d1=a283_0x51fe;return a283_0x1506c3[_0x3379d1(0xdb)]()['search'](_0x3379d1(0xe7))[_0x3379d1(0xdb)]()[_0x3379d1(0xe1)](a283_0x1506c3)['search'](_0x3379d1(0xe7));});a283_0x1506c3();'use strict';var __importDefault=this&&this[a283_0x235664(0xde)]||function(_0x5e84ac){const _0x8f359b=a283_0x235664;return _0x5e84ac&&_0x5e84ac[_0x8f359b(0xdf)]?_0x5e84ac:{'default':_0x5e84ac};};function a283_0x51fe(_0x5ee49f,_0x3a87e0){const _0x696004=a283_0x1c84();return a283_0x51fe=function(_0x1506c3,_0xe22334){_0x1506c3=_0x1506c3-0xd4;let _0x1c84af=_0x696004[_0x1506c3];return _0x1c84af;},a283_0x51fe(_0x5ee49f,_0x3a87e0);}Object[a283_0x235664(0xf6)](exports,a283_0x235664(0xdf),{'value':!![]});const logger_enums_1=require(a283_0x235664(0xf8)),path_1=__importDefault(require(a283_0x235664(0xd9))),promises_1=require('fs/promises'),utils_1=require(a283_0x235664(0xf2)),job_1=require('../../../constants/job');class StateManager{constructor(_0x437c43){const _0x44ee24=a283_0x235664;this[_0x44ee24(0xdd)]=StateManager[_0x44ee24(0x102)](_0x437c43);}static[a283_0x235664(0x102)](_0x4f153c){const _0x49a47c=a283_0x235664;return path_1['default']['join'](_0x4f153c,job_1[_0x49a47c(0xe0)]);}static async[a283_0x235664(0xff)](_0x4438b9,_0x15f42d){const _0x113391=a283_0x235664,_0x4fe75b=StateManager['getJobStatePath'](_0x4438b9),_0x23c272={'id':_0x15f42d,'status':logger_enums_1[_0x113391(0x101)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x113391(0x103)])(_0x4fe75b,JSON[_0x113391(0xd4)](_0x23c272));}static async[a283_0x235664(0xef)](_0x2ed381){const _0x319c9a=a283_0x235664,_0x4b6e8e=StateManager[_0x319c9a(0x102)](_0x2ed381);if(await utils_1[_0x319c9a(0xf4)][_0x319c9a(0xf0)](_0x4b6e8e))return(0x0,promises_1[_0x319c9a(0xe8)])(_0x4b6e8e,_0x319c9a(0xfa))['then'](JSON[_0x319c9a(0xeb)]);throw new Error(_0x319c9a(0xe9));}async[a283_0x235664(0xe6)](){const _0x4485d2=a283_0x235664;await(0x0,promises_1[_0x4485d2(0x103)])(this[_0x4485d2(0xdd)],JSON['stringify'](this[_0x4485d2(0xda)]));}async[a283_0x235664(0xd6)](){const _0x349ea4=a283_0x235664;return this[_0x349ea4(0xda)]=await(0x0,promises_1[_0x349ea4(0xe8)])(this[_0x349ea4(0xdd)],_0x349ea4(0xfa))[_0x349ea4(0xfb)](JSON['parse']),this;}async['setInProgress'](){const _0x31fc9b=a283_0x235664;this[_0x31fc9b(0xda)][_0x31fc9b(0xe2)]=logger_enums_1[_0x31fc9b(0x101)][_0x31fc9b(0xd7)],this['jobState'][_0x31fc9b(0xfd)]=new Date()['getTime'](),await this[_0x31fc9b(0xe6)]();}async['setCompleted'](){const _0x1124ca=a283_0x235664;this['jobState'][_0x1124ca(0xe2)]=logger_enums_1[_0x1124ca(0x101)][_0x1124ca(0xfc)],this[_0x1124ca(0xda)]['completedDate']=new Date()[_0x1124ca(0xf5)](),await this[_0x1124ca(0xe6)]();}async[a283_0x235664(0xe5)]({message:_0x55298c}){const _0x410b5d=a283_0x235664;this[_0x410b5d(0xda)][_0x410b5d(0xe2)]=logger_enums_1[_0x410b5d(0x101)][_0x410b5d(0xf7)],this[_0x410b5d(0xda)][_0x410b5d(0xdc)]=new Date()[_0x410b5d(0xf5)](),this[_0x410b5d(0xda)][_0x410b5d(0xec)]=_0x55298c,await this[_0x410b5d(0xe6)]();}['addWarning'](_0x324a97){const _0x44cf85=a283_0x235664;return this[_0x44cf85(0xda)][_0x44cf85(0xe3)]['push'](_0x324a97),this[_0x44cf85(0xe6)]();}}exports['default']=StateManager;