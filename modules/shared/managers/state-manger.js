const a299_0x58efdb=a299_0x1c74;(function(_0x2fd0d6,_0x3ae602){const _0x1b59f8=a299_0x1c74,_0x8d7537=_0x2fd0d6();while(!![]){try{const _0x1f1529=parseInt(_0x1b59f8(0x17e))/0x1*(parseInt(_0x1b59f8(0x184))/0x2)+parseInt(_0x1b59f8(0x188))/0x3*(parseInt(_0x1b59f8(0x185))/0x4)+parseInt(_0x1b59f8(0x16d))/0x5+-parseInt(_0x1b59f8(0x178))/0x6*(parseInt(_0x1b59f8(0x196))/0x7)+parseInt(_0x1b59f8(0x18e))/0x8*(-parseInt(_0x1b59f8(0x187))/0x9)+-parseInt(_0x1b59f8(0x181))/0xa*(parseInt(_0x1b59f8(0x197))/0xb)+parseInt(_0x1b59f8(0x17a))/0xc*(-parseInt(_0x1b59f8(0x18c))/0xd);if(_0x1f1529===_0x3ae602)break;else _0x8d7537['push'](_0x8d7537['shift']());}catch(_0x53706){_0x8d7537['push'](_0x8d7537['shift']());}}}(a299_0x130d,0xbecbe));const a299_0x17e47b=(function(){let _0x2affd8=!![];return function(_0x3ab2e3,_0x3ed727){const _0x167458=_0x2affd8?function(){const _0x5d96c0=a299_0x1c74;if(_0x3ed727){const _0x59770a=_0x3ed727[_0x5d96c0(0x168)](_0x3ab2e3,arguments);return _0x3ed727=null,_0x59770a;}}:function(){};return _0x2affd8=![],_0x167458;};}()),a299_0x3465bd=a299_0x17e47b(this,function(){const _0x81a6d=a299_0x1c74;return a299_0x3465bd[_0x81a6d(0x193)]()[_0x81a6d(0x183)](_0x81a6d(0x198))[_0x81a6d(0x193)]()[_0x81a6d(0x173)](a299_0x3465bd)[_0x81a6d(0x183)](_0x81a6d(0x198));});a299_0x3465bd();'use strict';var __importDefault=this&&this[a299_0x58efdb(0x16c)]||function(_0x5acfee){const _0xf61270=a299_0x58efdb;return _0x5acfee&&_0x5acfee[_0xf61270(0x194)]?_0x5acfee:{'default':_0x5acfee};};Object[a299_0x58efdb(0x16f)](exports,a299_0x58efdb(0x194),{'value':!![]});const logger_enums_1=require(a299_0x58efdb(0x175)),path_1=__importDefault(require(a299_0x58efdb(0x186))),promises_1=require(a299_0x58efdb(0x19a)),utils_1=require(a299_0x58efdb(0x171)),job_1=require('../../../constants/job');class StateManager{constructor(_0x1d08a3){this['statePath']=StateManager['getJobStatePath'](_0x1d08a3);}static[a299_0x58efdb(0x16b)](_0x261b75){const _0x3188d7=a299_0x58efdb;return path_1[_0x3188d7(0x177)][_0x3188d7(0x191)](_0x261b75,job_1['JOB_LOG_STATE_FILENAME']);}static async['create'](_0x312ba3,_0x5ee3b5){const _0x5a0204=a299_0x58efdb,_0x3fe286=StateManager[_0x5a0204(0x16b)](_0x312ba3),_0x51ed53={'id':_0x5ee3b5,'status':logger_enums_1[_0x5a0204(0x16a)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x5a0204(0x19b)])(_0x3fe286,JSON[_0x5a0204(0x18d)](_0x51ed53));}static async[a299_0x58efdb(0x180)](_0xb18ac4){const _0x3920d1=a299_0x58efdb,_0xf88bea=StateManager[_0x3920d1(0x16b)](_0xb18ac4);if(await utils_1[_0x3920d1(0x174)][_0x3920d1(0x18a)](_0xf88bea))return(0x0,promises_1[_0x3920d1(0x195)])(_0xf88bea,_0x3920d1(0x17b))['then'](JSON[_0x3920d1(0x192)]);throw new Error(_0x3920d1(0x17d));}async[a299_0x58efdb(0x182)](){const _0x4283aa=a299_0x58efdb;await(0x0,promises_1['writeFile'])(this[_0x4283aa(0x169)],JSON[_0x4283aa(0x18d)](this[_0x4283aa(0x179)]));}async[a299_0x58efdb(0x172)](){const _0x442198=a299_0x58efdb;return this[_0x442198(0x179)]=await(0x0,promises_1[_0x442198(0x195)])(this[_0x442198(0x169)],_0x442198(0x17b))['then'](JSON['parse']),this;}async['setInProgress'](){const _0x531379=a299_0x58efdb;this['jobState']['status']=logger_enums_1[_0x531379(0x16a)][_0x531379(0x18f)],this[_0x531379(0x179)][_0x531379(0x176)]=new Date()[_0x531379(0x190)](),await this['update']();}async['setCompleted'](){const _0x3fc9fa=a299_0x58efdb;this[_0x3fc9fa(0x179)][_0x3fc9fa(0x16e)]=logger_enums_1[_0x3fc9fa(0x16a)][_0x3fc9fa(0x189)],this[_0x3fc9fa(0x179)][_0x3fc9fa(0x199)]=new Date()[_0x3fc9fa(0x190)](),await this[_0x3fc9fa(0x182)]();}async[a299_0x58efdb(0x167)]({message:_0x55f3a3}){const _0x265bdf=a299_0x58efdb;this[_0x265bdf(0x179)][_0x265bdf(0x16e)]=logger_enums_1[_0x265bdf(0x16a)]['FAILED'],this[_0x265bdf(0x179)][_0x265bdf(0x199)]=new Date()['getTime'](),this['jobState'][_0x265bdf(0x17c)]=_0x55f3a3,await this['update']();}[a299_0x58efdb(0x17f)](_0x1a316b){const _0x38f476=a299_0x58efdb;return this[_0x38f476(0x179)][_0x38f476(0x170)][_0x38f476(0x18b)](_0x1a316b),this['update']();}}function a299_0x130d(){const _0x5450a3=['__importDefault','6335280OJeWOa','status','defineProperty','warnings','@flosum/utils','init','constructor','FsUtils','../enums/logger.enums','createdDate','default','198lzQwfg','jobState','102216zNxyKn','utf-8','error','Job\x20not\x20found.','6227VerjXC','addWarning','getJobState','30qdoFqm','update','search','496AVcbgj','260KXCott','path','9iWINNs','70989ScVCkC','COMPLETED','isExistsPath','push','208XdisPf','stringify','5464840ZLKdhx','IN_PROGRESS','getTime','join','parse','toString','__esModule','readFile','268359GnFMWA','5439247tnGlFc','(((.+)+)+)+$','completedDate','fs/promises','writeFile','setError','apply','statePath','JobStatus','getJobStatePath'];a299_0x130d=function(){return _0x5450a3;};return a299_0x130d();}function a299_0x1c74(_0x576f6d,_0x3d8d94){const _0x2f3738=a299_0x130d();return a299_0x1c74=function(_0x3465bd,_0x17e47b){_0x3465bd=_0x3465bd-0x167;let _0x130d5e=_0x2f3738[_0x3465bd];return _0x130d5e;},a299_0x1c74(_0x576f6d,_0x3d8d94);}exports[a299_0x58efdb(0x177)]=StateManager;