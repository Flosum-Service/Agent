const a326_0x36bc0a=a326_0x1047;(function(_0x29422a,_0x5753d6){const _0x47f625=a326_0x1047,_0x53b2ab=_0x29422a();while(!![]){try{const _0x1ba9ea=-parseInt(_0x47f625(0x204))/0x1+parseInt(_0x47f625(0x1fd))/0x2*(parseInt(_0x47f625(0x1f4))/0x3)+parseInt(_0x47f625(0x21a))/0x4+-parseInt(_0x47f625(0x216))/0x5+parseInt(_0x47f625(0x1fb))/0x6*(-parseInt(_0x47f625(0x1ef))/0x7)+parseInt(_0x47f625(0x209))/0x8+-parseInt(_0x47f625(0x219))/0x9*(-parseInt(_0x47f625(0x218))/0xa);if(_0x1ba9ea===_0x5753d6)break;else _0x53b2ab['push'](_0x53b2ab['shift']());}catch(_0x31876a){_0x53b2ab['push'](_0x53b2ab['shift']());}}}(a326_0x27f4,0x9ddc8));const a326_0x1a728a=(function(){let _0x3f9dc4=!![];return function(_0x392b82,_0x189a57){const _0x4faf82=_0x3f9dc4?function(){const _0x558faf=a326_0x1047;if(_0x189a57){const _0xaa102f=_0x189a57[_0x558faf(0x207)](_0x392b82,arguments);return _0x189a57=null,_0xaa102f;}}:function(){};return _0x3f9dc4=![],_0x4faf82;};}()),a326_0x568654=a326_0x1a728a(this,function(){const _0x37cd48=a326_0x1047;return a326_0x568654[_0x37cd48(0x1f7)]()['search'](_0x37cd48(0x1f5))[_0x37cd48(0x1f7)]()[_0x37cd48(0x201)](a326_0x568654)[_0x37cd48(0x20f)](_0x37cd48(0x1f5));});a326_0x568654();function a326_0x1047(_0x5bb7e1,_0x293e4e){const _0x524780=a326_0x27f4();return a326_0x1047=function(_0x568654,_0x1a728a){_0x568654=_0x568654-0x1ed;let _0x27f427=_0x524780[_0x568654];return _0x27f427;},a326_0x1047(_0x5bb7e1,_0x293e4e);}'use strict';var __importDefault=this&&this[a326_0x36bc0a(0x221)]||function(_0xff229d){return _0xff229d&&_0xff229d['__esModule']?_0xff229d:{'default':_0xff229d};};Object[a326_0x36bc0a(0x206)](exports,a326_0x36bc0a(0x1fc),{'value':!![]});function a326_0x27f4(){const _0x56ab9a=['setError','875ClRoeo','@flosum/utils','isExistsPath','FsUtils','FAILED','3HtBCxJ','(((.+)+)+)+$','IN_PROGRESS','toString','readFile','fs/promises','QUEUED','57066TwzyiO','__esModule','212618BNmsuA','then','COMPLETED','push','constructor','createdDate','statePath','730923XjWJrz','jobState','defineProperty','apply','status','749280fiigkd','../../../constants/job','writeFile','init','../enums/logger.enums','JobStatus','search','utf-8','path','getJobStatePath','setInProgress','warnings','JOB_LOG_STATE_FILENAME','3919510zjJyCR','addWarning','21490810vxwbiP','9WAAwND','4005000tpwsNG','update','join','getTime','default','setCompleted','stringify','__importDefault','parse'];a326_0x27f4=function(){return _0x56ab9a;};return a326_0x27f4();}const logger_enums_1=require(a326_0x36bc0a(0x20d)),path_1=__importDefault(require(a326_0x36bc0a(0x211))),promises_1=require(a326_0x36bc0a(0x1f9)),utils_1=require(a326_0x36bc0a(0x1f0)),job_1=require(a326_0x36bc0a(0x20a));class StateManager{constructor(_0x20541c){const _0x27c0ac=a326_0x36bc0a;this['statePath']=StateManager[_0x27c0ac(0x212)](_0x20541c);}static[a326_0x36bc0a(0x212)](_0x9ae014){const _0x21353c=a326_0x36bc0a;return path_1[_0x21353c(0x21e)][_0x21353c(0x21c)](_0x9ae014,job_1[_0x21353c(0x215)]);}static async['create'](_0x454c3a,_0x3c6df0){const _0x3c3a5a=a326_0x36bc0a,_0x1f32c1=StateManager[_0x3c3a5a(0x212)](_0x454c3a),_0x4677f4={'id':_0x3c6df0,'status':logger_enums_1[_0x3c3a5a(0x20e)][_0x3c3a5a(0x1fa)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x3c3a5a(0x20b)])(_0x1f32c1,JSON[_0x3c3a5a(0x220)](_0x4677f4));}static async['getJobState'](_0x54e23f){const _0x38001a=a326_0x36bc0a,_0x18c121=StateManager[_0x38001a(0x212)](_0x54e23f);if(await utils_1[_0x38001a(0x1f2)][_0x38001a(0x1f1)](_0x18c121))return(0x0,promises_1[_0x38001a(0x1f8)])(_0x18c121,'utf-8')[_0x38001a(0x1fe)](JSON['parse']);throw new Error('Job\x20not\x20found.');}async[a326_0x36bc0a(0x21b)](){const _0x16237b=a326_0x36bc0a;await(0x0,promises_1['writeFile'])(this[_0x16237b(0x203)],JSON[_0x16237b(0x220)](this[_0x16237b(0x205)]));}async[a326_0x36bc0a(0x20c)](){const _0x23cf77=a326_0x36bc0a;return this[_0x23cf77(0x205)]=await(0x0,promises_1[_0x23cf77(0x1f8)])(this[_0x23cf77(0x203)],_0x23cf77(0x210))[_0x23cf77(0x1fe)](JSON[_0x23cf77(0x1ed)]),this;}async[a326_0x36bc0a(0x213)](){const _0x2d27aa=a326_0x36bc0a;this[_0x2d27aa(0x205)][_0x2d27aa(0x208)]=logger_enums_1[_0x2d27aa(0x20e)][_0x2d27aa(0x1f6)],this[_0x2d27aa(0x205)][_0x2d27aa(0x202)]=new Date()[_0x2d27aa(0x21d)](),await this[_0x2d27aa(0x21b)]();}async[a326_0x36bc0a(0x21f)](){const _0x2ed65b=a326_0x36bc0a;this[_0x2ed65b(0x205)][_0x2ed65b(0x208)]=logger_enums_1['JobStatus'][_0x2ed65b(0x1ff)],this[_0x2ed65b(0x205)]['completedDate']=new Date()[_0x2ed65b(0x21d)](),await this[_0x2ed65b(0x21b)]();}async[a326_0x36bc0a(0x1ee)]({message:_0x2517f0}){const _0x5de049=a326_0x36bc0a;this[_0x5de049(0x205)][_0x5de049(0x208)]=logger_enums_1[_0x5de049(0x20e)][_0x5de049(0x1f3)],this['jobState']['completedDate']=new Date()['getTime'](),this['jobState']['error']=_0x2517f0,await this[_0x5de049(0x21b)]();}[a326_0x36bc0a(0x217)](_0x4239c2){const _0x23d72a=a326_0x36bc0a;return this[_0x23d72a(0x205)][_0x23d72a(0x214)][_0x23d72a(0x200)](_0x4239c2),this[_0x23d72a(0x21b)]();}}exports[a326_0x36bc0a(0x21e)]=StateManager;