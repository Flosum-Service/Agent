const a283_0x319d6b=a283_0x536e;(function(_0x3b4e2b,_0xc18040){const _0x1f5a28=a283_0x536e,_0x56a8f8=_0x3b4e2b();while(!![]){try{const _0x4daf6c=parseInt(_0x1f5a28(0x9e))/0x1*(parseInt(_0x1f5a28(0x8f))/0x2)+parseInt(_0x1f5a28(0x83))/0x3+parseInt(_0x1f5a28(0x90))/0x4*(-parseInt(_0x1f5a28(0x7d))/0x5)+parseInt(_0x1f5a28(0x89))/0x6+-parseInt(_0x1f5a28(0x92))/0x7*(-parseInt(_0x1f5a28(0x7a))/0x8)+parseInt(_0x1f5a28(0x8d))/0x9+parseInt(_0x1f5a28(0x6d))/0xa*(-parseInt(_0x1f5a28(0x94))/0xb);if(_0x4daf6c===_0xc18040)break;else _0x56a8f8['push'](_0x56a8f8['shift']());}catch(_0x42633b){_0x56a8f8['push'](_0x56a8f8['shift']());}}}(a283_0x29de,0x7163f));const a283_0x4cf50d=(function(){let _0x2d236f=!![];return function(_0x2176a8,_0x1413d0){const _0x57344f=_0x2d236f?function(){const _0x10c3af=a283_0x536e;if(_0x1413d0){const _0x32ca05=_0x1413d0[_0x10c3af(0x84)](_0x2176a8,arguments);return _0x1413d0=null,_0x32ca05;}}:function(){};return _0x2d236f=![],_0x57344f;};}()),a283_0x2e3cf3=a283_0x4cf50d(this,function(){const _0xaeb82c=a283_0x536e;return a283_0x2e3cf3[_0xaeb82c(0x79)]()[_0xaeb82c(0x72)]('(((.+)+)+)+$')[_0xaeb82c(0x79)]()[_0xaeb82c(0x91)](a283_0x2e3cf3)[_0xaeb82c(0x72)]('(((.+)+)+)+$');});function a283_0x536e(_0x55b2e6,_0x3d463e){const _0x8d3bc2=a283_0x29de();return a283_0x536e=function(_0x2e3cf3,_0x4cf50d){_0x2e3cf3=_0x2e3cf3-0x6c;let _0x29deff=_0x8d3bc2[_0x2e3cf3];return _0x29deff;},a283_0x536e(_0x55b2e6,_0x3d463e);}a283_0x2e3cf3();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4c7e20){return _0x4c7e20&&_0x4c7e20['__esModule']?_0x4c7e20:{'default':_0x4c7e20};};Object[a283_0x319d6b(0x7c)](exports,'__esModule',{'value':!![]});const logger_enums_1=require(a283_0x319d6b(0x77)),path_1=__importDefault(require(a283_0x319d6b(0x9d))),promises_1=require(a283_0x319d6b(0x7b)),utils_1=require('@flosum/utils'),job_1=require(a283_0x319d6b(0x97));class StateManager{constructor(_0x26b284){const _0x56f490=a283_0x319d6b;this[_0x56f490(0x9c)]=StateManager[_0x56f490(0xa0)](_0x26b284);}static[a283_0x319d6b(0xa0)](_0x50159c){const _0x299a21=a283_0x319d6b;return path_1['default'][_0x299a21(0x76)](_0x50159c,job_1[_0x299a21(0x96)]);}static async[a283_0x319d6b(0x93)](_0x54aac3,_0x4d45fa){const _0x3d0a36=a283_0x319d6b,_0x119bdb=StateManager[_0x3d0a36(0xa0)](_0x54aac3),_0x2dbbc4={'id':_0x4d45fa,'status':logger_enums_1[_0x3d0a36(0x7f)][_0x3d0a36(0x98)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x119bdb,JSON[_0x3d0a36(0x85)](_0x2dbbc4));}static async[a283_0x319d6b(0x74)](_0x2b5778){const _0x2c7def=a283_0x319d6b,_0x443bd2=StateManager['getJobStatePath'](_0x2b5778);if(await utils_1[_0x2c7def(0x6e)][_0x2c7def(0x9a)](_0x443bd2))return(0x0,promises_1[_0x2c7def(0x73)])(_0x443bd2,_0x2c7def(0x82))[_0x2c7def(0x78)](JSON[_0x2c7def(0x99)]);throw new Error(_0x2c7def(0x70));}async['update'](){const _0xfc12a5=a283_0x319d6b;await(0x0,promises_1['writeFile'])(this[_0xfc12a5(0x9c)],JSON[_0xfc12a5(0x85)](this[_0xfc12a5(0x87)]));}async[a283_0x319d6b(0x95)](){const _0x31b549=a283_0x319d6b;return this[_0x31b549(0x87)]=await(0x0,promises_1[_0x31b549(0x73)])(this['statePath'],'utf-8')[_0x31b549(0x78)](JSON[_0x31b549(0x99)]),this;}async[a283_0x319d6b(0x9b)](){const _0xe5b645=a283_0x319d6b;this[_0xe5b645(0x87)][_0xe5b645(0x86)]=logger_enums_1[_0xe5b645(0x7f)][_0xe5b645(0x8c)],this[_0xe5b645(0x87)][_0xe5b645(0x8b)]=new Date()[_0xe5b645(0x8a)](),await this[_0xe5b645(0x8e)]();}async[a283_0x319d6b(0x75)](){const _0x289c8c=a283_0x319d6b;this['jobState']['status']=logger_enums_1[_0x289c8c(0x7f)][_0x289c8c(0x6c)],this['jobState']['completedDate']=new Date()[_0x289c8c(0x8a)](),await this[_0x289c8c(0x8e)]();}async[a283_0x319d6b(0x6f)]({message:_0x40dc14}){const _0x4c27a6=a283_0x319d6b;this[_0x4c27a6(0x87)][_0x4c27a6(0x86)]=logger_enums_1[_0x4c27a6(0x7f)]['FAILED'],this['jobState'][_0x4c27a6(0x7e)]=new Date()['getTime'](),this[_0x4c27a6(0x87)][_0x4c27a6(0x80)]=_0x40dc14,await this[_0x4c27a6(0x8e)]();}[a283_0x319d6b(0x71)](_0x7bfa22){const _0x51bde9=a283_0x319d6b;return this['jobState'][_0x51bde9(0x9f)][_0x51bde9(0x81)](_0x7bfa22),this[_0x51bde9(0x8e)]();}}function a283_0x29de(){const _0x1123c4=['create','11IOmIvm','init','JOB_LOG_STATE_FILENAME','../../../constants/job','QUEUED','parse','isExistsPath','setInProgress','statePath','path','8mWeQMm','warnings','getJobStatePath','COMPLETED','15052450BUMnqq','FsUtils','setError','Job\x20not\x20found.','addWarning','search','readFile','getJobState','setCompleted','join','../enums/logger.enums','then','toString','8UwTWFk','fs/promises','defineProperty','19255fMmBHX','completedDate','JobStatus','error','push','utf-8','1615884mgkSaH','apply','stringify','status','jobState','default','3509478ZJVXuP','getTime','createdDate','IN_PROGRESS','4737501utjHKr','update','76806nBjiIS','568eAjPYO','constructor','3915660teEuXy'];a283_0x29de=function(){return _0x1123c4;};return a283_0x29de();}exports[a283_0x319d6b(0x88)]=StateManager;