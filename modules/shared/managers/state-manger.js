const a298_0x5b2ec6=a298_0x44da;(function(_0x547304,_0x23b93b){const _0x31c29b=a298_0x44da,_0x4207fe=_0x547304();while(!![]){try{const _0x24f647=-parseInt(_0x31c29b(0xc8))/0x1*(-parseInt(_0x31c29b(0xea))/0x2)+-parseInt(_0x31c29b(0xba))/0x3+parseInt(_0x31c29b(0xbb))/0x4*(parseInt(_0x31c29b(0xce))/0x5)+-parseInt(_0x31c29b(0xd2))/0x6*(parseInt(_0x31c29b(0xda))/0x7)+parseInt(_0x31c29b(0xd7))/0x8+-parseInt(_0x31c29b(0xc4))/0x9+-parseInt(_0x31c29b(0xe6))/0xa*(-parseInt(_0x31c29b(0xc6))/0xb);if(_0x24f647===_0x23b93b)break;else _0x4207fe['push'](_0x4207fe['shift']());}catch(_0xf0b815){_0x4207fe['push'](_0x4207fe['shift']());}}}(a298_0x2525,0xc419f));const a298_0x32692b=(function(){let _0x58bb84=!![];return function(_0x167b7b,_0x33688a){const _0x2895e4=_0x58bb84?function(){if(_0x33688a){const _0x2134f5=_0x33688a['apply'](_0x167b7b,arguments);return _0x33688a=null,_0x2134f5;}}:function(){};return _0x58bb84=![],_0x2895e4;};}()),a298_0x4e2393=a298_0x32692b(this,function(){const _0x21b31e=a298_0x44da;return a298_0x4e2393['toString']()['search'](_0x21b31e(0xcc))[_0x21b31e(0xcb)]()[_0x21b31e(0xd4)](a298_0x4e2393)['search'](_0x21b31e(0xcc));});a298_0x4e2393();function a298_0x44da(_0x46b438,_0x12bd8a){const _0x5a7cf2=a298_0x2525();return a298_0x44da=function(_0x4e2393,_0x32692b){_0x4e2393=_0x4e2393-0xb7;let _0x2525da=_0x5a7cf2[_0x4e2393];return _0x2525da;},a298_0x44da(_0x46b438,_0x12bd8a);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5437b1){const _0x3cb30a=a298_0x44da;return _0x5437b1&&_0x5437b1[_0x3cb30a(0xd3)]?_0x5437b1:{'default':_0x5437b1};};Object[a298_0x5b2ec6(0xc2)](exports,'__esModule',{'value':!![]});const logger_enums_1=require(a298_0x5b2ec6(0xc5)),path_1=__importDefault(require(a298_0x5b2ec6(0xc9))),promises_1=require(a298_0x5b2ec6(0xbd)),utils_1=require(a298_0x5b2ec6(0xd6)),job_1=require(a298_0x5b2ec6(0xc3));class StateManager{constructor(_0x314209){const _0x2d97c8=a298_0x5b2ec6;this[_0x2d97c8(0xc7)]=StateManager[_0x2d97c8(0xbc)](_0x314209);}static[a298_0x5b2ec6(0xbc)](_0x3ad924){const _0xf5b9f8=a298_0x5b2ec6;return path_1[_0xf5b9f8(0xd1)][_0xf5b9f8(0xe9)](_0x3ad924,job_1[_0xf5b9f8(0xb9)]);}static async['create'](_0x4bcac0,_0x3a01e4){const _0x54c35e=a298_0x5b2ec6,_0x1d043d=StateManager[_0x54c35e(0xbc)](_0x4bcac0),_0x538950={'id':_0x3a01e4,'status':logger_enums_1[_0x54c35e(0xe3)][_0x54c35e(0xe2)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x1d043d,JSON[_0x54c35e(0xb8)](_0x538950));}static async[a298_0x5b2ec6(0xe1)](_0x5035ff){const _0x46e815=a298_0x5b2ec6,_0x4f922c=StateManager[_0x46e815(0xbc)](_0x5035ff);if(await utils_1[_0x46e815(0xd9)][_0x46e815(0xe4)](_0x4f922c))return(0x0,promises_1['readFile'])(_0x4f922c,_0x46e815(0xe0))[_0x46e815(0xde)](JSON[_0x46e815(0xc0)]);throw new Error('Job\x20not\x20found.');}async[a298_0x5b2ec6(0xdc)](){const _0x54e2a9=a298_0x5b2ec6;await(0x0,promises_1[_0x54e2a9(0xd8)])(this[_0x54e2a9(0xc7)],JSON[_0x54e2a9(0xb8)](this['jobState']));}async[a298_0x5b2ec6(0xcf)](){const _0x3a4368=a298_0x5b2ec6;return this[_0x3a4368(0xb7)]=await(0x0,promises_1[_0x3a4368(0xd0)])(this[_0x3a4368(0xc7)],_0x3a4368(0xe0))[_0x3a4368(0xde)](JSON['parse']),this;}async[a298_0x5b2ec6(0xbe)](){const _0x3adbcc=a298_0x5b2ec6;this['jobState'][_0x3adbcc(0xd5)]=logger_enums_1[_0x3adbcc(0xe3)][_0x3adbcc(0xe8)],this[_0x3adbcc(0xb7)][_0x3adbcc(0xe5)]=new Date()[_0x3adbcc(0xe7)](),await this[_0x3adbcc(0xdc)]();}async[a298_0x5b2ec6(0xbf)](){const _0x2056aa=a298_0x5b2ec6;this[_0x2056aa(0xb7)]['status']=logger_enums_1[_0x2056aa(0xe3)][_0x2056aa(0xdd)],this[_0x2056aa(0xb7)][_0x2056aa(0xdb)]=new Date()['getTime'](),await this[_0x2056aa(0xdc)]();}async['setError']({message:_0xe7864a}){const _0x1cd7a5=a298_0x5b2ec6;this[_0x1cd7a5(0xb7)][_0x1cd7a5(0xd5)]=logger_enums_1[_0x1cd7a5(0xe3)][_0x1cd7a5(0xca)],this[_0x1cd7a5(0xb7)]['completedDate']=new Date()[_0x1cd7a5(0xe7)](),this[_0x1cd7a5(0xb7)]['error']=_0xe7864a,await this[_0x1cd7a5(0xdc)]();}[a298_0x5b2ec6(0xcd)](_0x533e78){const _0x24349d=a298_0x5b2ec6;return this[_0x24349d(0xb7)][_0x24349d(0xdf)][_0x24349d(0xc1)](_0x533e78),this['update']();}}exports['default']=StateManager;function a298_0x2525(){const _0x3094cc=['jobState','stringify','JOB_LOG_STATE_FILENAME','1350222jHhHHe','276udZNCP','getJobStatePath','fs/promises','setInProgress','setCompleted','parse','push','defineProperty','../../../constants/job','5157342VtyOVr','../enums/logger.enums','3641yOsrDO','statePath','24049akXEvy','path','FAILED','toString','(((.+)+)+)+$','addWarning','2215acIDnp','init','readFile','default','6MkBWsX','__esModule','constructor','status','@flosum/utils','1794200EQBVuO','writeFile','FsUtils','1385223YhkNsb','completedDate','update','COMPLETED','then','warnings','utf-8','getJobState','QUEUED','JobStatus','isExistsPath','createdDate','48370yKOTmU','getTime','IN_PROGRESS','join','14tJckJk'];a298_0x2525=function(){return _0x3094cc;};return a298_0x2525();}