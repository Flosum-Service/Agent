const a326_0x44d521=a326_0x2e69;(function(_0x1675db,_0x18d872){const _0x3b2d38=a326_0x2e69,_0x43e643=_0x1675db();while(!![]){try{const _0x1cc166=-parseInt(_0x3b2d38(0x188))/0x1+parseInt(_0x3b2d38(0x190))/0x2+parseInt(_0x3b2d38(0x19f))/0x3*(parseInt(_0x3b2d38(0x176))/0x4)+parseInt(_0x3b2d38(0x181))/0x5+parseInt(_0x3b2d38(0x194))/0x6+-parseInt(_0x3b2d38(0x174))/0x7+parseInt(_0x3b2d38(0x195))/0x8;if(_0x1cc166===_0x18d872)break;else _0x43e643['push'](_0x43e643['shift']());}catch(_0x50279a){_0x43e643['push'](_0x43e643['shift']());}}}(a326_0x2f8b,0x687d8));function a326_0x2e69(_0x2bd1aa,_0x3185f2){const _0x5a40e1=a326_0x2f8b();return a326_0x2e69=function(_0x1fd092,_0x4ea270){_0x1fd092=_0x1fd092-0x172;let _0x2f8b4b=_0x5a40e1[_0x1fd092];return _0x2f8b4b;},a326_0x2e69(_0x2bd1aa,_0x3185f2);}const a326_0x4ea270=(function(){let _0x57a963=!![];return function(_0x388991,_0x437450){const _0x4d074a=_0x57a963?function(){const _0x1dd2d8=a326_0x2e69;if(_0x437450){const _0x41bf2f=_0x437450[_0x1dd2d8(0x18d)](_0x388991,arguments);return _0x437450=null,_0x41bf2f;}}:function(){};return _0x57a963=![],_0x4d074a;};}()),a326_0x1fd092=a326_0x4ea270(this,function(){const _0x36607e=a326_0x2e69;return a326_0x1fd092[_0x36607e(0x17b)]()[_0x36607e(0x180)](_0x36607e(0x178))[_0x36607e(0x17b)]()[_0x36607e(0x182)](a326_0x1fd092)['search'](_0x36607e(0x178));});function a326_0x2f8b(){const _0x2a58f3=['setCompleted','FsUtils','JobStatus','status','3JGOwyP','@flosum/utils','COMPLETED','update','default','../enums/logger.enums','jobState','join','4776674gTqPAW','getJobStatePath','465332HrjKUu','completedDate','(((.+)+)+)+$','parse','writeFile','toString','QUEUED','Job\x20not\x20found.','fs/promises','addWarning','search','2015960LFOWlJ','constructor','then','stringify','defineProperty','error','__esModule','700453EJQdaK','utf-8','getTime','readFile','setError','apply','__importDefault','getJobState','569668kDedZi','statePath','createdDate','setInProgress','3011958IrZtzT','4035800byvnFS','FAILED','JOB_LOG_STATE_FILENAME','../../../constants/job','IN_PROGRESS','warnings'];a326_0x2f8b=function(){return _0x2a58f3;};return a326_0x2f8b();}a326_0x1fd092();'use strict';var __importDefault=this&&this[a326_0x44d521(0x18e)]||function(_0x35ddd1){const _0x2ef9ef=a326_0x44d521;return _0x35ddd1&&_0x35ddd1[_0x2ef9ef(0x187)]?_0x35ddd1:{'default':_0x35ddd1};};Object[a326_0x44d521(0x185)](exports,a326_0x44d521(0x187),{'value':!![]});const logger_enums_1=require(a326_0x44d521(0x1a4)),path_1=__importDefault(require('path')),promises_1=require(a326_0x44d521(0x17e)),utils_1=require(a326_0x44d521(0x1a0)),job_1=require(a326_0x44d521(0x198));class StateManager{constructor(_0x76c8f5){const _0x27aa1d=a326_0x44d521;this[_0x27aa1d(0x191)]=StateManager[_0x27aa1d(0x175)](_0x76c8f5);}static[a326_0x44d521(0x175)](_0x5c317e){const _0x540b63=a326_0x44d521;return path_1[_0x540b63(0x1a3)][_0x540b63(0x173)](_0x5c317e,job_1[_0x540b63(0x197)]);}static async['create'](_0x37cf16,_0x1914e0){const _0x31b3ca=a326_0x44d521,_0x3ac971=StateManager[_0x31b3ca(0x175)](_0x37cf16),_0xc7bba7={'id':_0x1914e0,'status':logger_enums_1['JobStatus'][_0x31b3ca(0x17c)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x31b3ca(0x17a)])(_0x3ac971,JSON['stringify'](_0xc7bba7));}static async[a326_0x44d521(0x18f)](_0x36e9c1){const _0x27626d=a326_0x44d521,_0x431ae0=StateManager[_0x27626d(0x175)](_0x36e9c1);if(await utils_1[_0x27626d(0x19c)]['isExistsPath'](_0x431ae0))return(0x0,promises_1[_0x27626d(0x18b)])(_0x431ae0,_0x27626d(0x189))[_0x27626d(0x183)](JSON[_0x27626d(0x179)]);throw new Error(_0x27626d(0x17d));}async[a326_0x44d521(0x1a2)](){const _0x4b5d9a=a326_0x44d521;await(0x0,promises_1[_0x4b5d9a(0x17a)])(this[_0x4b5d9a(0x191)],JSON[_0x4b5d9a(0x184)](this['jobState']));}async['init'](){const _0x4f29e8=a326_0x44d521;return this['jobState']=await(0x0,promises_1[_0x4f29e8(0x18b)])(this[_0x4f29e8(0x191)],_0x4f29e8(0x189))[_0x4f29e8(0x183)](JSON[_0x4f29e8(0x179)]),this;}async[a326_0x44d521(0x193)](){const _0x1610d6=a326_0x44d521;this['jobState'][_0x1610d6(0x19e)]=logger_enums_1['JobStatus'][_0x1610d6(0x199)],this['jobState'][_0x1610d6(0x192)]=new Date()[_0x1610d6(0x18a)](),await this[_0x1610d6(0x1a2)]();}async[a326_0x44d521(0x19b)](){const _0x635246=a326_0x44d521;this['jobState'][_0x635246(0x19e)]=logger_enums_1[_0x635246(0x19d)][_0x635246(0x1a1)],this[_0x635246(0x172)][_0x635246(0x177)]=new Date()['getTime'](),await this[_0x635246(0x1a2)]();}async[a326_0x44d521(0x18c)]({message:_0x5e24b2}){const _0x4bf98e=a326_0x44d521;this['jobState'][_0x4bf98e(0x19e)]=logger_enums_1[_0x4bf98e(0x19d)][_0x4bf98e(0x196)],this[_0x4bf98e(0x172)]['completedDate']=new Date()[_0x4bf98e(0x18a)](),this[_0x4bf98e(0x172)][_0x4bf98e(0x186)]=_0x5e24b2,await this[_0x4bf98e(0x1a2)]();}[a326_0x44d521(0x17f)](_0x1e9388){const _0x297845=a326_0x44d521;return this[_0x297845(0x172)][_0x297845(0x19a)]['push'](_0x1e9388),this[_0x297845(0x1a2)]();}}exports['default']=StateManager;