const a283_0x328543=a283_0x8d9a;(function(_0x53a071,_0x181943){const _0x49636c=a283_0x8d9a,_0x27f3f8=_0x53a071();while(!![]){try{const _0x273fc0=parseInt(_0x49636c(0x146))/0x1+parseInt(_0x49636c(0x12b))/0x2*(parseInt(_0x49636c(0x12d))/0x3)+parseInt(_0x49636c(0x136))/0x4*(-parseInt(_0x49636c(0x12a))/0x5)+-parseInt(_0x49636c(0x11e))/0x6*(parseInt(_0x49636c(0x13c))/0x7)+-parseInt(_0x49636c(0x14b))/0x8*(-parseInt(_0x49636c(0x140))/0x9)+-parseInt(_0x49636c(0x13a))/0xa*(parseInt(_0x49636c(0x145))/0xb)+parseInt(_0x49636c(0x149))/0xc;if(_0x273fc0===_0x181943)break;else _0x27f3f8['push'](_0x27f3f8['shift']());}catch(_0x74db2a){_0x27f3f8['push'](_0x27f3f8['shift']());}}}(a283_0x3c77,0xdff44));const a283_0x235457=(function(){let _0x4fc8a4=!![];return function(_0x183891,_0x5ea823){const _0x4acbdc=_0x4fc8a4?function(){const _0x2bfcbb=a283_0x8d9a;if(_0x5ea823){const _0x3213f3=_0x5ea823[_0x2bfcbb(0x134)](_0x183891,arguments);return _0x5ea823=null,_0x3213f3;}}:function(){};return _0x4fc8a4=![],_0x4acbdc;};}()),a283_0x19afdc=a283_0x235457(this,function(){const _0x1f9a0f=a283_0x8d9a;return a283_0x19afdc[_0x1f9a0f(0x13b)]()[_0x1f9a0f(0x12e)](_0x1f9a0f(0x14e))[_0x1f9a0f(0x13b)]()[_0x1f9a0f(0x13d)](a283_0x19afdc)[_0x1f9a0f(0x12e)]('(((.+)+)+)+$');});a283_0x19afdc();function a283_0x8d9a(_0x119f91,_0x2cecf8){const _0x5bf0ad=a283_0x3c77();return a283_0x8d9a=function(_0x19afdc,_0x235457){_0x19afdc=_0x19afdc-0x11e;let _0x3c7748=_0x5bf0ad[_0x19afdc];return _0x3c7748;},a283_0x8d9a(_0x119f91,_0x2cecf8);}function a283_0x3c77(){const _0x1ed5c0=['getJobStatePath','7704505qCLGjx','37222rdVpAl','Job\x20not\x20found.','30SyyeJo','search','JobStatus','update','JOB_LOG_STATE_FILENAME','then','getJobState','apply','utf-8','4deiYWp','jobState','warnings','statePath','10QnOAJC','toString','658DTxPVd','constructor','push','stringify','7116993JkZCJX','completedDate','parse','readFile','error','5810926IdGlHN','746244ImuRtv','default','QUEUED','25106340bqqaQp','addWarning','16PDeRhH','status','defineProperty','(((.+)+)+)+$','103380QqcAfY','path','writeFile','setCompleted','fs/promises','isExistsPath','__esModule','getTime','join','../../../constants/job','../enums/logger.enums'];a283_0x3c77=function(){return _0x1ed5c0;};return a283_0x3c77();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x11e892){const _0x29537c=a283_0x8d9a;return _0x11e892&&_0x11e892[_0x29537c(0x124)]?_0x11e892:{'default':_0x11e892};};Object[a283_0x328543(0x14d)](exports,a283_0x328543(0x124),{'value':!![]});const logger_enums_1=require(a283_0x328543(0x128)),path_1=__importDefault(require(a283_0x328543(0x11f))),promises_1=require(a283_0x328543(0x122)),utils_1=require('@flosum/utils'),job_1=require(a283_0x328543(0x127));class StateManager{constructor(_0x44e342){const _0x29da47=a283_0x328543;this[_0x29da47(0x139)]=StateManager[_0x29da47(0x129)](_0x44e342);}static[a283_0x328543(0x129)](_0x604771){const _0x4b45a4=a283_0x328543;return path_1['default'][_0x4b45a4(0x126)](_0x604771,job_1[_0x4b45a4(0x131)]);}static async['create'](_0x43e41a,_0x1bb484){const _0x3d852e=a283_0x328543,_0x12b72f=StateManager[_0x3d852e(0x129)](_0x43e41a),_0x2a25b6={'id':_0x1bb484,'status':logger_enums_1[_0x3d852e(0x12f)][_0x3d852e(0x148)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x3d852e(0x120)])(_0x12b72f,JSON[_0x3d852e(0x13f)](_0x2a25b6));}static async[a283_0x328543(0x133)](_0x4c8e2b){const _0x1891be=a283_0x328543,_0x729f8e=StateManager[_0x1891be(0x129)](_0x4c8e2b);if(await utils_1['FsUtils'][_0x1891be(0x123)](_0x729f8e))return(0x0,promises_1[_0x1891be(0x143)])(_0x729f8e,_0x1891be(0x135))[_0x1891be(0x132)](JSON[_0x1891be(0x142)]);throw new Error(_0x1891be(0x12c));}async[a283_0x328543(0x130)](){const _0x3394be=a283_0x328543;await(0x0,promises_1[_0x3394be(0x120)])(this['statePath'],JSON['stringify'](this[_0x3394be(0x137)]));}async['init'](){const _0x4d7292=a283_0x328543;return this['jobState']=await(0x0,promises_1[_0x4d7292(0x143)])(this[_0x4d7292(0x139)],_0x4d7292(0x135))[_0x4d7292(0x132)](JSON[_0x4d7292(0x142)]),this;}async['setInProgress'](){const _0x28d81f=a283_0x328543;this[_0x28d81f(0x137)][_0x28d81f(0x14c)]=logger_enums_1['JobStatus']['IN_PROGRESS'],this[_0x28d81f(0x137)]['createdDate']=new Date()[_0x28d81f(0x125)](),await this[_0x28d81f(0x130)]();}async[a283_0x328543(0x121)](){const _0x239b21=a283_0x328543;this[_0x239b21(0x137)]['status']=logger_enums_1[_0x239b21(0x12f)]['COMPLETED'],this['jobState'][_0x239b21(0x141)]=new Date()[_0x239b21(0x125)](),await this['update']();}async['setError']({message:_0x2346fc}){const _0x3985d8=a283_0x328543;this['jobState'][_0x3985d8(0x14c)]=logger_enums_1['JobStatus']['FAILED'],this['jobState'][_0x3985d8(0x141)]=new Date()['getTime'](),this[_0x3985d8(0x137)][_0x3985d8(0x144)]=_0x2346fc,await this[_0x3985d8(0x130)]();}[a283_0x328543(0x14a)](_0x4cee62){const _0x402f16=a283_0x328543;return this['jobState'][_0x402f16(0x138)][_0x402f16(0x13e)](_0x4cee62),this[_0x402f16(0x130)]();}}exports[a283_0x328543(0x147)]=StateManager;