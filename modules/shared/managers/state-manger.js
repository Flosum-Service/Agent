const a283_0x178dca=a283_0xf016;(function(_0x115360,_0x447153){const _0x55da4f=a283_0xf016,_0x2a117f=_0x115360();while(!![]){try{const _0x1497fa=-parseInt(_0x55da4f(0xd1))/0x1+-parseInt(_0x55da4f(0xd2))/0x2*(parseInt(_0x55da4f(0xb6))/0x3)+parseInt(_0x55da4f(0xb3))/0x4+parseInt(_0x55da4f(0xb2))/0x5+parseInt(_0x55da4f(0xcd))/0x6+-parseInt(_0x55da4f(0xde))/0x7*(parseInt(_0x55da4f(0xcb))/0x8)+parseInt(_0x55da4f(0xbb))/0x9;if(_0x1497fa===_0x447153)break;else _0x2a117f['push'](_0x2a117f['shift']());}catch(_0x52018e){_0x2a117f['push'](_0x2a117f['shift']());}}}(a283_0x2f67,0x3cde1));const a283_0x403a33=(function(){let _0x3ea9cb=!![];return function(_0x294cae,_0x2e36a4){const _0xad030e=_0x3ea9cb?function(){const _0xf010fa=a283_0xf016;if(_0x2e36a4){const _0x3a0d36=_0x2e36a4[_0xf010fa(0xb5)](_0x294cae,arguments);return _0x2e36a4=null,_0x3a0d36;}}:function(){};return _0x3ea9cb=![],_0xad030e;};}()),a283_0x129710=a283_0x403a33(this,function(){const _0x278638=a283_0xf016;return a283_0x129710['toString']()[_0x278638(0xb0)](_0x278638(0xbd))[_0x278638(0xc9)]()[_0x278638(0xc8)](a283_0x129710)[_0x278638(0xb0)](_0x278638(0xbd));});a283_0x129710();'use strict';var __importDefault=this&&this[a283_0x178dca(0xd0)]||function(_0x2ca1c2){return _0x2ca1c2&&_0x2ca1c2['__esModule']?_0x2ca1c2:{'default':_0x2ca1c2};};Object[a283_0x178dca(0xc2)](exports,a283_0x178dca(0xcf),{'value':!![]});const logger_enums_1=require(a283_0x178dca(0xbc)),path_1=__importDefault(require(a283_0x178dca(0xd3))),promises_1=require('fs/promises'),utils_1=require(a283_0x178dca(0xdb)),job_1=require(a283_0x178dca(0xda));class StateManager{constructor(_0x582097){const _0x5220a7=a283_0x178dca;this[_0x5220a7(0xb9)]=StateManager[_0x5220a7(0xd9)](_0x582097);}static['getJobStatePath'](_0x27437b){const _0x5455d2=a283_0x178dca;return path_1[_0x5455d2(0xc7)][_0x5455d2(0xca)](_0x27437b,job_1[_0x5455d2(0xb4)]);}static async['create'](_0x3521e4,_0x106f8d){const _0x5e8102=a283_0x178dca,_0x2c9acd=StateManager['getJobStatePath'](_0x3521e4),_0x41abe6={'id':_0x106f8d,'status':logger_enums_1[_0x5e8102(0xc1)][_0x5e8102(0xd5)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x5e8102(0xd8)])(_0x2c9acd,JSON[_0x5e8102(0xc0)](_0x41abe6));}static async['getJobState'](_0x4fa0c8){const _0x7e978c=a283_0x178dca,_0x3eb5bb=StateManager['getJobStatePath'](_0x4fa0c8);if(await utils_1[_0x7e978c(0xba)][_0x7e978c(0xdc)](_0x3eb5bb))return(0x0,promises_1['readFile'])(_0x3eb5bb,_0x7e978c(0xd4))[_0x7e978c(0xc5)](JSON['parse']);throw new Error(_0x7e978c(0xce));}async[a283_0x178dca(0xbe)](){const _0x28d759=a283_0x178dca;await(0x0,promises_1[_0x28d759(0xd8)])(this[_0x28d759(0xb9)],JSON[_0x28d759(0xc0)](this['jobState']));}async[a283_0x178dca(0xcc)](){const _0x571b87=a283_0x178dca;return this['jobState']=await(0x0,promises_1['readFile'])(this['statePath'],'utf-8')[_0x571b87(0xc5)](JSON['parse']),this;}async[a283_0x178dca(0xdd)](){const _0x473def=a283_0x178dca;this[_0x473def(0xb7)]['status']=logger_enums_1[_0x473def(0xc1)][_0x473def(0xdf)],this[_0x473def(0xb7)][_0x473def(0xb8)]=new Date()[_0x473def(0xd7)](),await this[_0x473def(0xbe)]();}async[a283_0x178dca(0xbf)](){const _0x1f2417=a283_0x178dca;this[_0x1f2417(0xb7)][_0x1f2417(0xb1)]=logger_enums_1['JobStatus']['COMPLETED'],this[_0x1f2417(0xb7)]['completedDate']=new Date()[_0x1f2417(0xd7)](),await this['update']();}async['setError']({message:_0x10f646}){const _0x2fddce=a283_0x178dca;this[_0x2fddce(0xb7)][_0x2fddce(0xb1)]=logger_enums_1['JobStatus'][_0x2fddce(0xc3)],this['jobState'][_0x2fddce(0xd6)]=new Date()[_0x2fddce(0xd7)](),this[_0x2fddce(0xb7)][_0x2fddce(0xc4)]=_0x10f646,await this[_0x2fddce(0xbe)]();}['addWarning'](_0x5f4401){const _0x4c2435=a283_0x178dca;return this[_0x4c2435(0xb7)][_0x4c2435(0xc6)]['push'](_0x5f4401),this[_0x4c2435(0xbe)]();}}function a283_0xf016(_0x3c9d62,_0x315c32){const _0x51618c=a283_0x2f67();return a283_0xf016=function(_0x129710,_0x403a33){_0x129710=_0x129710-0xb0;let _0x2f67a6=_0x51618c[_0x129710];return _0x2f67a6;},a283_0xf016(_0x3c9d62,_0x315c32);}exports[a283_0x178dca(0xc7)]=StateManager;function a283_0x2f67(){const _0x44b0e4=['JobStatus','defineProperty','FAILED','error','then','warnings','default','constructor','toString','join','8OZJypA','init','2136600kMREyv','Job\x20not\x20found.','__esModule','__importDefault','264216AFVdDo','30jqWwGG','path','utf-8','QUEUED','completedDate','getTime','writeFile','getJobStatePath','../../../constants/job','@flosum/utils','isExistsPath','setInProgress','638834xsoDHm','IN_PROGRESS','search','status','995500XKGaLb','1805776mnTrKH','JOB_LOG_STATE_FILENAME','apply','87873EgjfHK','jobState','createdDate','statePath','FsUtils','337608dAGnFu','../enums/logger.enums','(((.+)+)+)+$','update','setCompleted','stringify'];a283_0x2f67=function(){return _0x44b0e4;};return a283_0x2f67();}