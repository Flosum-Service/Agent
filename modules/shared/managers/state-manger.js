function a283_0x2d2f(){const _0x3cc52d=['JOB_LOG_STATE_FILENAME','__esModule','1698704KnUZXr','__importDefault','createdDate','readFile','search','../enums/logger.enums','771074CwhkGa','error','Job\x20not\x20found.','337170DBNCPA','jobState','FsUtils','apply','utf-8','statePath','JobStatus','@flosum/utils','COMPLETED','writeFile','warnings','push','FAILED','parse','status','getTime','332455qpCcTh','default','then','stringify','fs/promises','25921WtpNnp','update','defineProperty','3NsEcju','45HdZTce','2997108lcfkfg','216OlrnFq','371694KIwTUH','isExistsPath','create','completedDate','setCompleted','path','getJobStatePath','addWarning'];a283_0x2d2f=function(){return _0x3cc52d;};return a283_0x2d2f();}const a283_0x4270df=a283_0x3e2b;(function(_0x3f52ab,_0x58f760){const _0x1ee00d=a283_0x3e2b,_0x2232d3=_0x3f52ab();while(!![]){try{const _0x15039e=-parseInt(_0x1ee00d(0x150))/0x1+parseInt(_0x1ee00d(0x13d))/0x2*(-parseInt(_0x1ee00d(0x158))/0x3)+parseInt(_0x1ee00d(0x166))/0x4+-parseInt(_0x1ee00d(0x159))/0x5*(-parseInt(_0x1ee00d(0x15c))/0x6)+-parseInt(_0x1ee00d(0x155))/0x7*(parseInt(_0x1ee00d(0x15b))/0x8)+parseInt(_0x1ee00d(0x15a))/0x9+parseInt(_0x1ee00d(0x140))/0xa;if(_0x15039e===_0x58f760)break;else _0x2232d3['push'](_0x2232d3['shift']());}catch(_0x4c215f){_0x2232d3['push'](_0x2232d3['shift']());}}}(a283_0x2d2f,0x81a1d));function a283_0x3e2b(_0xebd9b8,_0x3f6c93){const _0x2e03a8=a283_0x2d2f();return a283_0x3e2b=function(_0x400ee8,_0x3bf4be){_0x400ee8=_0x400ee8-0x13d;let _0x2d2f27=_0x2e03a8[_0x400ee8];return _0x2d2f27;},a283_0x3e2b(_0xebd9b8,_0x3f6c93);}const a283_0x3bf4be=(function(){let _0x1f334e=!![];return function(_0x4f95d2,_0x2291aa){const _0x18d093=_0x1f334e?function(){const _0x134d85=a283_0x3e2b;if(_0x2291aa){const _0x560f6a=_0x2291aa[_0x134d85(0x143)](_0x4f95d2,arguments);return _0x2291aa=null,_0x560f6a;}}:function(){};return _0x1f334e=![],_0x18d093;};}()),a283_0x400ee8=a283_0x3bf4be(this,function(){const _0x2b6d5b=a283_0x3e2b;return a283_0x400ee8['toString']()[_0x2b6d5b(0x16a)]('(((.+)+)+)+$')['toString']()['constructor'](a283_0x400ee8)[_0x2b6d5b(0x16a)]('(((.+)+)+)+$');});a283_0x400ee8();'use strict';var __importDefault=this&&this[a283_0x4270df(0x167)]||function(_0x98ed20){const _0x54bb55=a283_0x4270df;return _0x98ed20&&_0x98ed20[_0x54bb55(0x165)]?_0x98ed20:{'default':_0x98ed20};};Object[a283_0x4270df(0x157)](exports,a283_0x4270df(0x165),{'value':!![]});const logger_enums_1=require(a283_0x4270df(0x16b)),path_1=__importDefault(require(a283_0x4270df(0x161))),promises_1=require(a283_0x4270df(0x154)),utils_1=require(a283_0x4270df(0x147)),job_1=require('../../../constants/job');class StateManager{constructor(_0x4cf1de){const _0x5da7e6=a283_0x4270df;this[_0x5da7e6(0x145)]=StateManager['getJobStatePath'](_0x4cf1de);}static[a283_0x4270df(0x162)](_0x211973){const _0x19bbde=a283_0x4270df;return path_1[_0x19bbde(0x151)]['join'](_0x211973,job_1[_0x19bbde(0x164)]);}static async[a283_0x4270df(0x15e)](_0x53aa38,_0x303565){const _0x50f46f=a283_0x4270df,_0x2e0c3c=StateManager[_0x50f46f(0x162)](_0x53aa38),_0x93f2f1={'id':_0x303565,'status':logger_enums_1['JobStatus']['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x50f46f(0x149)])(_0x2e0c3c,JSON[_0x50f46f(0x153)](_0x93f2f1));}static async['getJobState'](_0x2f12b8){const _0x261186=a283_0x4270df,_0x4390f9=StateManager[_0x261186(0x162)](_0x2f12b8);if(await utils_1[_0x261186(0x142)][_0x261186(0x15d)](_0x4390f9))return(0x0,promises_1[_0x261186(0x169)])(_0x4390f9,_0x261186(0x144))[_0x261186(0x152)](JSON[_0x261186(0x14d)]);throw new Error(_0x261186(0x13f));}async['update'](){const _0x54e16b=a283_0x4270df;await(0x0,promises_1[_0x54e16b(0x149)])(this[_0x54e16b(0x145)],JSON[_0x54e16b(0x153)](this[_0x54e16b(0x141)]));}async['init'](){const _0x5a07b8=a283_0x4270df;return this['jobState']=await(0x0,promises_1[_0x5a07b8(0x169)])(this[_0x5a07b8(0x145)],_0x5a07b8(0x144))[_0x5a07b8(0x152)](JSON[_0x5a07b8(0x14d)]),this;}async['setInProgress'](){const _0x58d344=a283_0x4270df;this[_0x58d344(0x141)]['status']=logger_enums_1[_0x58d344(0x146)]['IN_PROGRESS'],this['jobState'][_0x58d344(0x168)]=new Date()[_0x58d344(0x14f)](),await this['update']();}async[a283_0x4270df(0x160)](){const _0x517928=a283_0x4270df;this['jobState']['status']=logger_enums_1[_0x517928(0x146)][_0x517928(0x148)],this[_0x517928(0x141)][_0x517928(0x15f)]=new Date()['getTime'](),await this['update']();}async['setError']({message:_0x56812a}){const _0x34ce12=a283_0x4270df;this['jobState'][_0x34ce12(0x14e)]=logger_enums_1[_0x34ce12(0x146)][_0x34ce12(0x14c)],this[_0x34ce12(0x141)][_0x34ce12(0x15f)]=new Date()[_0x34ce12(0x14f)](),this[_0x34ce12(0x141)][_0x34ce12(0x13e)]=_0x56812a,await this['update']();}[a283_0x4270df(0x163)](_0x1b1114){const _0x416578=a283_0x4270df;return this[_0x416578(0x141)][_0x416578(0x14a)][_0x416578(0x14b)](_0x1b1114),this[_0x416578(0x156)]();}}exports[a283_0x4270df(0x151)]=StateManager;