const a283_0x5e6890=a283_0x7607;(function(_0x1891f1,_0x135f06){const _0x55807e=a283_0x7607,_0x5dc800=_0x1891f1();while(!![]){try{const _0x12f94b=-parseInt(_0x55807e(0x101))/0x1+parseInt(_0x55807e(0xf5))/0x2+parseInt(_0x55807e(0xf4))/0x3*(parseInt(_0x55807e(0xf7))/0x4)+-parseInt(_0x55807e(0xe5))/0x5+-parseInt(_0x55807e(0xee))/0x6+parseInt(_0x55807e(0xea))/0x7*(-parseInt(_0x55807e(0xe8))/0x8)+-parseInt(_0x55807e(0xf8))/0x9*(-parseInt(_0x55807e(0x100))/0xa);if(_0x12f94b===_0x135f06)break;else _0x5dc800['push'](_0x5dc800['shift']());}catch(_0x1e9ec0){_0x5dc800['push'](_0x5dc800['shift']());}}}(a283_0x1d93,0x78eb6));const a283_0x4f85e5=(function(){let _0x3e6c36=!![];return function(_0x5f0783,_0x1efb36){const _0x39078a=_0x3e6c36?function(){const _0x422b76=a283_0x7607;if(_0x1efb36){const _0x5246f6=_0x1efb36[_0x422b76(0xf3)](_0x5f0783,arguments);return _0x1efb36=null,_0x5246f6;}}:function(){};return _0x3e6c36=![],_0x39078a;};}()),a283_0x39bc7e=a283_0x4f85e5(this,function(){const _0x3b9de4=a283_0x7607;return a283_0x39bc7e[_0x3b9de4(0xdf)]()['search'](_0x3b9de4(0xd7))[_0x3b9de4(0xdf)]()[_0x3b9de4(0xdb)](a283_0x39bc7e)[_0x3b9de4(0xef)](_0x3b9de4(0xd7));});function a283_0x7607(_0x2b2be4,_0x5de243){const _0x52ea47=a283_0x1d93();return a283_0x7607=function(_0x39bc7e,_0x4f85e5){_0x39bc7e=_0x39bc7e-0xd6;let _0x1d9354=_0x52ea47[_0x39bc7e];return _0x1d9354;},a283_0x7607(_0x2b2be4,_0x5de243);}a283_0x39bc7e();'use strict';var __importDefault=this&&this[a283_0x5e6890(0x108)]||function(_0x270301){const _0x4b9016=a283_0x5e6890;return _0x270301&&_0x270301[_0x4b9016(0xfe)]?_0x270301:{'default':_0x270301};};function a283_0x1d93(){const _0x299f84=['status','__esModule','stringify','110PEVcpM','567426ooNExd','jobState','then','init','push','IN_PROGRESS','isExistsPath','__importDefault','JobStatus','(((.+)+)+)+$','error','getTime','getJobStatePath','constructor','readFile','addWarning','FsUtils','toString','setInProgress','update','writeFile','Job\x20not\x20found.','statePath','686425rLEBLh','completedDate','@flosum/utils','8IydPNq','defineProperty','5439063BaDSaN','FAILED','default','utf-8','6162MgKyHS','search','warnings','path','COMPLETED','apply','187692uSeeoV','305954qtYMRE','create','20pGRmdN','1237284ijKgLY','join','parse','setError','createdDate'];a283_0x1d93=function(){return _0x299f84;};return a283_0x1d93();}Object[a283_0x5e6890(0xe9)](exports,a283_0x5e6890(0xfe),{'value':!![]});const logger_enums_1=require('../enums/logger.enums'),path_1=__importDefault(require(a283_0x5e6890(0xf1))),promises_1=require('fs/promises'),utils_1=require(a283_0x5e6890(0xe7)),job_1=require('../../../constants/job');class StateManager{constructor(_0x33fe42){const _0xd865f5=a283_0x5e6890;this['statePath']=StateManager[_0xd865f5(0xda)](_0x33fe42);}static[a283_0x5e6890(0xda)](_0x324fb7){const _0x4e388e=a283_0x5e6890;return path_1[_0x4e388e(0xec)][_0x4e388e(0xf9)](_0x324fb7,job_1['JOB_LOG_STATE_FILENAME']);}static async[a283_0x5e6890(0xf6)](_0xe8cb88,_0x1db9b1){const _0x9004ec=a283_0x5e6890,_0x4a92b6=StateManager[_0x9004ec(0xda)](_0xe8cb88),_0x1a2b5d={'id':_0x1db9b1,'status':logger_enums_1[_0x9004ec(0xd6)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x9004ec(0xe2)])(_0x4a92b6,JSON[_0x9004ec(0xff)](_0x1a2b5d));}static async['getJobState'](_0x4764c5){const _0x1ce66b=a283_0x5e6890,_0x2728bb=StateManager[_0x1ce66b(0xda)](_0x4764c5);if(await utils_1[_0x1ce66b(0xde)][_0x1ce66b(0x107)](_0x2728bb))return(0x0,promises_1[_0x1ce66b(0xdc)])(_0x2728bb,_0x1ce66b(0xed))[_0x1ce66b(0x103)](JSON['parse']);throw new Error(_0x1ce66b(0xe3));}async[a283_0x5e6890(0xe1)](){const _0xea1e0d=a283_0x5e6890;await(0x0,promises_1[_0xea1e0d(0xe2)])(this[_0xea1e0d(0xe4)],JSON[_0xea1e0d(0xff)](this['jobState']));}async[a283_0x5e6890(0x104)](){const _0x47fda1=a283_0x5e6890;return this[_0x47fda1(0x102)]=await(0x0,promises_1[_0x47fda1(0xdc)])(this[_0x47fda1(0xe4)],'utf-8')['then'](JSON[_0x47fda1(0xfa)]),this;}async[a283_0x5e6890(0xe0)](){const _0x4bc6fe=a283_0x5e6890;this['jobState'][_0x4bc6fe(0xfd)]=logger_enums_1['JobStatus'][_0x4bc6fe(0x106)],this[_0x4bc6fe(0x102)][_0x4bc6fe(0xfc)]=new Date()['getTime'](),await this[_0x4bc6fe(0xe1)]();}async['setCompleted'](){const _0x5595da=a283_0x5e6890;this[_0x5595da(0x102)][_0x5595da(0xfd)]=logger_enums_1[_0x5595da(0xd6)][_0x5595da(0xf2)],this[_0x5595da(0x102)][_0x5595da(0xe6)]=new Date()[_0x5595da(0xd9)](),await this[_0x5595da(0xe1)]();}async[a283_0x5e6890(0xfb)]({message:_0x4210c3}){const _0x55543f=a283_0x5e6890;this[_0x55543f(0x102)][_0x55543f(0xfd)]=logger_enums_1[_0x55543f(0xd6)][_0x55543f(0xeb)],this[_0x55543f(0x102)]['completedDate']=new Date()[_0x55543f(0xd9)](),this[_0x55543f(0x102)][_0x55543f(0xd8)]=_0x4210c3,await this[_0x55543f(0xe1)]();}[a283_0x5e6890(0xdd)](_0x41fb18){const _0x5407c0=a283_0x5e6890;return this['jobState'][_0x5407c0(0xf0)][_0x5407c0(0x105)](_0x41fb18),this[_0x5407c0(0xe1)]();}}exports[a283_0x5e6890(0xec)]=StateManager;