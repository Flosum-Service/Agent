const a283_0x5d4727=a283_0xc209;(function(_0x41b0e9,_0x3a2761){const _0x27c239=a283_0xc209,_0x497abf=_0x41b0e9();while(!![]){try{const _0x1691e4=-parseInt(_0x27c239(0x15c))/0x1+parseInt(_0x27c239(0x179))/0x2+-parseInt(_0x27c239(0x166))/0x3+parseInt(_0x27c239(0x170))/0x4*(parseInt(_0x27c239(0x15e))/0x5)+-parseInt(_0x27c239(0x157))/0x6+-parseInt(_0x27c239(0x15a))/0x7*(parseInt(_0x27c239(0x17e))/0x8)+parseInt(_0x27c239(0x178))/0x9;if(_0x1691e4===_0x3a2761)break;else _0x497abf['push'](_0x497abf['shift']());}catch(_0x5c77e2){_0x497abf['push'](_0x497abf['shift']());}}}(a283_0x5c4e,0x7be0c));function a283_0x5c4e(){const _0x233521=['getTime','stringify','@flosum/utils','update','init','search','utf-8','warnings','path','2896nNCwUU','fs/promises','readFile','jobState','constructor','JobStatus','create','FAILED','21313440dypZrL','589502wBmiOg','completedDate','join','parse','statePath','5864984xlLgfr','COMPLETED','isExistsPath','(((.+)+)+)+$','getJobStatePath','../../../constants/job','then','toString','341538GegUOf','default','Job\x20not\x20found.','7UittBV','IN_PROGRESS','952992SmGJpI','QUEUED','3280wFFLAi','__importDefault','writeFile','setError','createdDate','__esModule','status','../enums/logger.enums','2662239yJogaQ'];a283_0x5c4e=function(){return _0x233521;};return a283_0x5c4e();}function a283_0xc209(_0x4eae73,_0x3ee92d){const _0xe71aea=a283_0x5c4e();return a283_0xc209=function(_0x2f9454,_0x1afccf){_0x2f9454=_0x2f9454-0x151;let _0x5c4e71=_0xe71aea[_0x2f9454];return _0x5c4e71;},a283_0xc209(_0x4eae73,_0x3ee92d);}const a283_0x1afccf=(function(){let _0x3a48b7=!![];return function(_0x3df8f0,_0x15e1f8){const _0x3d0474=_0x3a48b7?function(){if(_0x15e1f8){const _0x59168c=_0x15e1f8['apply'](_0x3df8f0,arguments);return _0x15e1f8=null,_0x59168c;}}:function(){};return _0x3a48b7=![],_0x3d0474;};}()),a283_0x2f9454=a283_0x1afccf(this,function(){const _0x4af52e=a283_0xc209;return a283_0x2f9454[_0x4af52e(0x156)]()[_0x4af52e(0x16c)](_0x4af52e(0x152))[_0x4af52e(0x156)]()[_0x4af52e(0x174)](a283_0x2f9454)[_0x4af52e(0x16c)](_0x4af52e(0x152));});a283_0x2f9454();'use strict';var __importDefault=this&&this[a283_0x5d4727(0x15f)]||function(_0x1e9d86){const _0x28a7c6=a283_0x5d4727;return _0x1e9d86&&_0x1e9d86[_0x28a7c6(0x163)]?_0x1e9d86:{'default':_0x1e9d86};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const logger_enums_1=require(a283_0x5d4727(0x165)),path_1=__importDefault(require(a283_0x5d4727(0x16f))),promises_1=require(a283_0x5d4727(0x171)),utils_1=require(a283_0x5d4727(0x169)),job_1=require(a283_0x5d4727(0x154));class StateManager{constructor(_0x1b709b){const _0x3f2cdb=a283_0x5d4727;this[_0x3f2cdb(0x17d)]=StateManager['getJobStatePath'](_0x1b709b);}static[a283_0x5d4727(0x153)](_0x23ed8c){const _0x4e5abe=a283_0x5d4727;return path_1[_0x4e5abe(0x158)][_0x4e5abe(0x17b)](_0x23ed8c,job_1['JOB_LOG_STATE_FILENAME']);}static async[a283_0x5d4727(0x176)](_0x53069e,_0x39d8fe){const _0x4ad173=a283_0x5d4727,_0xf8ba57=StateManager['getJobStatePath'](_0x53069e),_0x65c712={'id':_0x39d8fe,'status':logger_enums_1[_0x4ad173(0x175)][_0x4ad173(0x15d)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x4ad173(0x160)])(_0xf8ba57,JSON[_0x4ad173(0x168)](_0x65c712));}static async['getJobState'](_0x421381){const _0x4ba7c5=a283_0x5d4727,_0x4f37ac=StateManager[_0x4ba7c5(0x153)](_0x421381);if(await utils_1['FsUtils'][_0x4ba7c5(0x151)](_0x4f37ac))return(0x0,promises_1[_0x4ba7c5(0x172)])(_0x4f37ac,_0x4ba7c5(0x16d))[_0x4ba7c5(0x155)](JSON[_0x4ba7c5(0x17c)]);throw new Error(_0x4ba7c5(0x159));}async[a283_0x5d4727(0x16a)](){const _0x50b46b=a283_0x5d4727;await(0x0,promises_1['writeFile'])(this['statePath'],JSON[_0x50b46b(0x168)](this['jobState']));}async[a283_0x5d4727(0x16b)](){const _0x5c96b6=a283_0x5d4727;return this[_0x5c96b6(0x173)]=await(0x0,promises_1[_0x5c96b6(0x172)])(this[_0x5c96b6(0x17d)],'utf-8')[_0x5c96b6(0x155)](JSON[_0x5c96b6(0x17c)]),this;}async['setInProgress'](){const _0x54faca=a283_0x5d4727;this['jobState'][_0x54faca(0x164)]=logger_enums_1[_0x54faca(0x175)][_0x54faca(0x15b)],this[_0x54faca(0x173)][_0x54faca(0x162)]=new Date()[_0x54faca(0x167)](),await this[_0x54faca(0x16a)]();}async['setCompleted'](){const _0x4a1c63=a283_0x5d4727;this[_0x4a1c63(0x173)][_0x4a1c63(0x164)]=logger_enums_1[_0x4a1c63(0x175)][_0x4a1c63(0x17f)],this['jobState'][_0x4a1c63(0x17a)]=new Date()[_0x4a1c63(0x167)](),await this[_0x4a1c63(0x16a)]();}async[a283_0x5d4727(0x161)]({message:_0x45464f}){const _0x3a0bb7=a283_0x5d4727;this[_0x3a0bb7(0x173)][_0x3a0bb7(0x164)]=logger_enums_1[_0x3a0bb7(0x175)][_0x3a0bb7(0x177)],this[_0x3a0bb7(0x173)]['completedDate']=new Date()[_0x3a0bb7(0x167)](),this[_0x3a0bb7(0x173)]['error']=_0x45464f,await this[_0x3a0bb7(0x16a)]();}['addWarning'](_0x4af815){const _0x247204=a283_0x5d4727;return this[_0x247204(0x173)][_0x247204(0x16e)]['push'](_0x4af815),this['update']();}}exports[a283_0x5d4727(0x158)]=StateManager;