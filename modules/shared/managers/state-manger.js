const a283_0x4ec736=a283_0x4cbd;(function(_0x23f9e7,_0x158cba){const _0x458f0f=a283_0x4cbd,_0x494f51=_0x23f9e7();while(!![]){try{const _0x1ab486=-parseInt(_0x458f0f(0x112))/0x1*(parseInt(_0x458f0f(0x124))/0x2)+-parseInt(_0x458f0f(0x100))/0x3+-parseInt(_0x458f0f(0x11f))/0x4*(-parseInt(_0x458f0f(0x125))/0x5)+parseInt(_0x458f0f(0x101))/0x6*(parseInt(_0x458f0f(0x111))/0x7)+-parseInt(_0x458f0f(0x11a))/0x8+-parseInt(_0x458f0f(0x107))/0x9*(-parseInt(_0x458f0f(0x128))/0xa)+parseInt(_0x458f0f(0x115))/0xb*(-parseInt(_0x458f0f(0x12d))/0xc);if(_0x1ab486===_0x158cba)break;else _0x494f51['push'](_0x494f51['shift']());}catch(_0x21b08b){_0x494f51['push'](_0x494f51['shift']());}}}(a283_0x1048,0xb270f));const a283_0x53a13c=(function(){let _0x3a7b7d=!![];return function(_0x52a2d8,_0x2aacb6){const _0x3fbe1b=_0x3a7b7d?function(){const _0xa096e3=a283_0x4cbd;if(_0x2aacb6){const _0x527430=_0x2aacb6[_0xa096e3(0x102)](_0x52a2d8,arguments);return _0x2aacb6=null,_0x527430;}}:function(){};return _0x3a7b7d=![],_0x3fbe1b;};}()),a283_0x20a6f9=a283_0x53a13c(this,function(){const _0x3cd2c7=a283_0x4cbd;return a283_0x20a6f9[_0x3cd2c7(0x109)]()[_0x3cd2c7(0x118)](_0x3cd2c7(0x116))[_0x3cd2c7(0x109)]()['constructor'](a283_0x20a6f9)['search'](_0x3cd2c7(0x116));});a283_0x20a6f9();'use strict';var __importDefault=this&&this[a283_0x4ec736(0x10c)]||function(_0x28e27c){const _0xe867d5=a283_0x4ec736;return _0x28e27c&&_0x28e27c[_0xe867d5(0x106)]?_0x28e27c:{'default':_0x28e27c};};Object[a283_0x4ec736(0x12a)](exports,a283_0x4ec736(0x106),{'value':!![]});function a283_0x1048(){const _0x5a7457=['toString','getJobStatePath','FsUtils','__importDefault','update','isExistsPath','jobState','path','3633gHrckM','1bWPjrk','QUEUED','fs/promises','16181AJgYKu','(((.+)+)+)+$','createdDate','search','statePath','4937432YBgCEI','join','default','getTime','completedDate','644sfdynt','create','setCompleted','FAILED','init','654254ZOwOBK','40965sIeiiR','readFile','../enums/logger.enums','10FgonNN','then','defineProperty','COMPLETED','status','9804UEQHaK','error','writeFile','getJobState','parse','820881AnADmF','12378urtvpG','apply','JOB_LOG_STATE_FILENAME','utf-8','addWarning','__esModule','6847785DhNkDu','stringify'];a283_0x1048=function(){return _0x5a7457;};return a283_0x1048();}function a283_0x4cbd(_0x157133,_0x58509e){const _0x29a7a6=a283_0x1048();return a283_0x4cbd=function(_0x20a6f9,_0x53a13c){_0x20a6f9=_0x20a6f9-0xfe;let _0x1048e8=_0x29a7a6[_0x20a6f9];return _0x1048e8;},a283_0x4cbd(_0x157133,_0x58509e);}const logger_enums_1=require(a283_0x4ec736(0x127)),path_1=__importDefault(require(a283_0x4ec736(0x110))),promises_1=require(a283_0x4ec736(0x114)),utils_1=require('@flosum/utils'),job_1=require('../../../constants/job');class StateManager{constructor(_0x114027){this['statePath']=StateManager['getJobStatePath'](_0x114027);}static[a283_0x4ec736(0x10a)](_0xbbeace){const _0x10feeb=a283_0x4ec736;return path_1[_0x10feeb(0x11c)][_0x10feeb(0x11b)](_0xbbeace,job_1[_0x10feeb(0x103)]);}static async[a283_0x4ec736(0x120)](_0xc4c095,_0x9a00e){const _0x370384=a283_0x4ec736,_0x110f17=StateManager[_0x370384(0x10a)](_0xc4c095),_0x548ec6={'id':_0x9a00e,'status':logger_enums_1['JobStatus'][_0x370384(0x113)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x370384(0x12f)])(_0x110f17,JSON[_0x370384(0x108)](_0x548ec6));}static async[a283_0x4ec736(0xfe)](_0x30b874){const _0x3129a=a283_0x4ec736,_0x13f239=StateManager[_0x3129a(0x10a)](_0x30b874);if(await utils_1[_0x3129a(0x10b)][_0x3129a(0x10e)](_0x13f239))return(0x0,promises_1[_0x3129a(0x126)])(_0x13f239,_0x3129a(0x104))[_0x3129a(0x129)](JSON[_0x3129a(0xff)]);throw new Error('Job\x20not\x20found.');}async[a283_0x4ec736(0x10d)](){const _0x214237=a283_0x4ec736;await(0x0,promises_1['writeFile'])(this[_0x214237(0x119)],JSON[_0x214237(0x108)](this[_0x214237(0x10f)]));}async[a283_0x4ec736(0x123)](){const _0x1f0dbb=a283_0x4ec736;return this[_0x1f0dbb(0x10f)]=await(0x0,promises_1['readFile'])(this[_0x1f0dbb(0x119)],'utf-8')[_0x1f0dbb(0x129)](JSON[_0x1f0dbb(0xff)]),this;}async['setInProgress'](){const _0x5245b9=a283_0x4ec736;this[_0x5245b9(0x10f)][_0x5245b9(0x12c)]=logger_enums_1['JobStatus']['IN_PROGRESS'],this[_0x5245b9(0x10f)][_0x5245b9(0x117)]=new Date()[_0x5245b9(0x11d)](),await this[_0x5245b9(0x10d)]();}async[a283_0x4ec736(0x121)](){const _0x2680e9=a283_0x4ec736;this[_0x2680e9(0x10f)][_0x2680e9(0x12c)]=logger_enums_1['JobStatus'][_0x2680e9(0x12b)],this['jobState'][_0x2680e9(0x11e)]=new Date()[_0x2680e9(0x11d)](),await this['update']();}async['setError']({message:_0x27a382}){const _0x32fa40=a283_0x4ec736;this[_0x32fa40(0x10f)]['status']=logger_enums_1['JobStatus'][_0x32fa40(0x122)],this[_0x32fa40(0x10f)][_0x32fa40(0x11e)]=new Date()['getTime'](),this[_0x32fa40(0x10f)][_0x32fa40(0x12e)]=_0x27a382,await this[_0x32fa40(0x10d)]();}[a283_0x4ec736(0x105)](_0x4c6fc8){const _0x497a20=a283_0x4ec736;return this[_0x497a20(0x10f)]['warnings']['push'](_0x4c6fc8),this[_0x497a20(0x10d)]();}}exports[a283_0x4ec736(0x11c)]=StateManager;