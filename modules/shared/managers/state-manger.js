function a299_0x1d03(_0x181ec4,_0x5aaceb){const _0x23bf2d=a299_0x4c47();return a299_0x1d03=function(_0x3aa0fc,_0xff2add){_0x3aa0fc=_0x3aa0fc-0xc4;let _0x4c47fe=_0x23bf2d[_0x3aa0fc];return _0x4c47fe;},a299_0x1d03(_0x181ec4,_0x5aaceb);}const a299_0xd1ac69=a299_0x1d03;(function(_0x3f7b57,_0x46adc4){const _0x5b7c86=a299_0x1d03,_0x29f42a=_0x3f7b57();while(!![]){try{const _0x4ac1d7=-parseInt(_0x5b7c86(0xd9))/0x1*(-parseInt(_0x5b7c86(0xcb))/0x2)+-parseInt(_0x5b7c86(0xe4))/0x3+-parseInt(_0x5b7c86(0xd5))/0x4+-parseInt(_0x5b7c86(0xed))/0x5+-parseInt(_0x5b7c86(0xe6))/0x6*(-parseInt(_0x5b7c86(0xcc))/0x7)+parseInt(_0x5b7c86(0xe1))/0x8+parseInt(_0x5b7c86(0xc6))/0x9*(parseInt(_0x5b7c86(0xc9))/0xa);if(_0x4ac1d7===_0x46adc4)break;else _0x29f42a['push'](_0x29f42a['shift']());}catch(_0x514903){_0x29f42a['push'](_0x29f42a['shift']());}}}(a299_0x4c47,0x63fc1));const a299_0xff2add=(function(){let _0x22f844=!![];return function(_0x46a9ac,_0x428b7f){const _0x4d2143=_0x22f844?function(){const _0x2e4ffd=a299_0x1d03;if(_0x428b7f){const _0x2224a2=_0x428b7f[_0x2e4ffd(0xd7)](_0x46a9ac,arguments);return _0x428b7f=null,_0x2224a2;}}:function(){};return _0x22f844=![],_0x4d2143;};}()),a299_0x3aa0fc=a299_0xff2add(this,function(){const _0x488075=a299_0x1d03;return a299_0x3aa0fc[_0x488075(0xf1)]()[_0x488075(0xe7)](_0x488075(0xcd))['toString']()[_0x488075(0xce)](a299_0x3aa0fc)[_0x488075(0xe7)](_0x488075(0xcd));});a299_0x3aa0fc();'use strict';var __importDefault=this&&this[a299_0xd1ac69(0xd2)]||function(_0xa472cb){const _0x39a8c9=a299_0xd1ac69;return _0xa472cb&&_0xa472cb[_0x39a8c9(0xcf)]?_0xa472cb:{'default':_0xa472cb};};Object[a299_0xd1ac69(0xd0)](exports,a299_0xd1ac69(0xcf),{'value':!![]});const logger_enums_1=require('../enums/logger.enums'),path_1=__importDefault(require(a299_0xd1ac69(0xdc))),promises_1=require('fs/promises'),utils_1=require('@flosum/utils'),job_1=require(a299_0xd1ac69(0xe2));class StateManager{constructor(_0xf581ab){const _0x2cc15b=a299_0xd1ac69;this[_0x2cc15b(0xdf)]=StateManager[_0x2cc15b(0xd1)](_0xf581ab);}static[a299_0xd1ac69(0xd1)](_0x5d82e6){const _0x9e2f54=a299_0xd1ac69;return path_1[_0x9e2f54(0xeb)][_0x9e2f54(0xe5)](_0x5d82e6,job_1['JOB_LOG_STATE_FILENAME']);}static async['create'](_0xb4763,_0x13e511){const _0x53c7ce=a299_0xd1ac69,_0x184840=StateManager[_0x53c7ce(0xd1)](_0xb4763),_0x47c4ec={'id':_0x13e511,'status':logger_enums_1[_0x53c7ce(0xe3)][_0x53c7ce(0xc5)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x184840,JSON[_0x53c7ce(0xe9)](_0x47c4ec));}static async['getJobState'](_0x3fda30){const _0xd19db2=a299_0xd1ac69,_0x5a2759=StateManager[_0xd19db2(0xd1)](_0x3fda30);if(await utils_1[_0xd19db2(0xde)]['isExistsPath'](_0x5a2759))return(0x0,promises_1[_0xd19db2(0xef)])(_0x5a2759,_0xd19db2(0xd6))[_0xd19db2(0xc4)](JSON[_0xd19db2(0xdb)]);throw new Error('Job\x20not\x20found.');}async['update'](){const _0x5f4c6e=a299_0xd1ac69;await(0x0,promises_1['writeFile'])(this[_0x5f4c6e(0xdf)],JSON[_0x5f4c6e(0xe9)](this['jobState']));}async['init'](){const _0x5996d4=a299_0xd1ac69;return this[_0x5996d4(0xf0)]=await(0x0,promises_1[_0x5996d4(0xef)])(this[_0x5996d4(0xdf)],'utf-8')[_0x5996d4(0xc4)](JSON['parse']),this;}async['setInProgress'](){const _0x1c2144=a299_0xd1ac69;this[_0x1c2144(0xf0)]['status']=logger_enums_1[_0x1c2144(0xe3)][_0x1c2144(0xec)],this[_0x1c2144(0xf0)][_0x1c2144(0xd4)]=new Date()[_0x1c2144(0xda)](),await this['update']();}async[a299_0xd1ac69(0xdd)](){const _0x494f27=a299_0xd1ac69;this[_0x494f27(0xf0)]['status']=logger_enums_1['JobStatus'][_0x494f27(0xc8)],this['jobState'][_0x494f27(0xd3)]=new Date()[_0x494f27(0xda)](),await this[_0x494f27(0xd8)]();}async['setError']({message:_0x38a714}){const _0xe11d2f=a299_0xd1ac69;this[_0xe11d2f(0xf0)][_0xe11d2f(0xc7)]=logger_enums_1[_0xe11d2f(0xe3)][_0xe11d2f(0xee)],this[_0xe11d2f(0xf0)]['completedDate']=new Date()[_0xe11d2f(0xda)](),this[_0xe11d2f(0xf0)][_0xe11d2f(0xca)]=_0x38a714,await this[_0xe11d2f(0xd8)]();}[a299_0xd1ac69(0xea)](_0x523f6d){const _0x3fdb8e=a299_0xd1ac69;return this['jobState'][_0x3fdb8e(0xe8)][_0x3fdb8e(0xe0)](_0x523f6d),this[_0x3fdb8e(0xd8)]();}}function a299_0x4c47(){const _0x2c9dc4=['error','3226HpIoJH','182YGIPJn','(((.+)+)+)+$','constructor','__esModule','defineProperty','getJobStatePath','__importDefault','completedDate','createdDate','2372384sIrsFL','utf-8','apply','update','353MuGmNw','getTime','parse','path','setCompleted','FsUtils','statePath','push','16048skfcsl','../../../constants/job','JobStatus','197928bmYNxy','join','74532MscLul','search','warnings','stringify','addWarning','default','IN_PROGRESS','2319870bPjShE','FAILED','readFile','jobState','toString','then','QUEUED','72mIVPNP','status','COMPLETED','797770ZjyKeV'];a299_0x4c47=function(){return _0x2c9dc4;};return a299_0x4c47();}exports[a299_0xd1ac69(0xeb)]=StateManager;