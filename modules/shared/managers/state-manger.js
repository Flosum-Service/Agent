const a327_0x55099a=a327_0x3c12;(function(_0x1e1265,_0x10916){const _0x5b8844=a327_0x3c12,_0x19971f=_0x1e1265();while(!![]){try{const _0x445c95=-parseInt(_0x5b8844(0x177))/0x1+-parseInt(_0x5b8844(0x15f))/0x2*(-parseInt(_0x5b8844(0x179))/0x3)+-parseInt(_0x5b8844(0x172))/0x4*(parseInt(_0x5b8844(0x162))/0x5)+-parseInt(_0x5b8844(0x165))/0x6*(parseInt(_0x5b8844(0x173))/0x7)+-parseInt(_0x5b8844(0x15c))/0x8+parseInt(_0x5b8844(0x16f))/0x9*(parseInt(_0x5b8844(0x168))/0xa)+parseInt(_0x5b8844(0x16e))/0xb;if(_0x445c95===_0x10916)break;else _0x19971f['push'](_0x19971f['shift']());}catch(_0x2ffce3){_0x19971f['push'](_0x19971f['shift']());}}}(a327_0x1eb6,0x34634));const a327_0x35064f=(function(){let _0x3161ab=!![];return function(_0xf7c590,_0x5bb9d4){const _0x2e3858=_0x3161ab?function(){const _0x506731=a327_0x3c12;if(_0x5bb9d4){const _0x76bccb=_0x5bb9d4[_0x506731(0x160)](_0xf7c590,arguments);return _0x5bb9d4=null,_0x76bccb;}}:function(){};return _0x3161ab=![],_0x2e3858;};}()),a327_0x17c4e4=a327_0x35064f(this,function(){const _0x492c9a=a327_0x3c12;return a327_0x17c4e4[_0x492c9a(0x174)]()['search'](_0x492c9a(0x156))[_0x492c9a(0x174)]()[_0x492c9a(0x16b)](a327_0x17c4e4)[_0x492c9a(0x17a)](_0x492c9a(0x156));});a327_0x17c4e4();'use strict';function a327_0x1eb6(){const _0x56c8b2=['search','Job\x20not\x20found.','IN_PROGRESS','status','defineProperty','path','JOB_LOG_STATE_FILENAME','FsUtils','fs/promises','then','error','statePath','stringify','getTime','getJobStatePath','(((.+)+)+)+$','writeFile','utf-8','readFile','JobStatus','setCompleted','3055120robbbn','isExistsPath','setError','185882zTiJwM','apply','@flosum/utils','130rBRnoZ','completedDate','../../../constants/job','18DpwOLl','jobState','default','37320xmHCRZ','createdDate','update','constructor','join','addWarning','9412832tbqbsU','351QVGQta','__importDefault','__esModule','2048WquLlb','659890QdYGJs','toString','create','setInProgress','201609bZHdsH','COMPLETED','3dXerEF'];a327_0x1eb6=function(){return _0x56c8b2;};return a327_0x1eb6();}function a327_0x3c12(_0xa7c5f9,_0x130c84){const _0x258676=a327_0x1eb6();return a327_0x3c12=function(_0x17c4e4,_0x35064f){_0x17c4e4=_0x17c4e4-0x151;let _0x1eb6ab=_0x258676[_0x17c4e4];return _0x1eb6ab;},a327_0x3c12(_0xa7c5f9,_0x130c84);}var __importDefault=this&&this[a327_0x55099a(0x170)]||function(_0x5527d6){const _0x5b0595=a327_0x55099a;return _0x5527d6&&_0x5527d6[_0x5b0595(0x171)]?_0x5527d6:{'default':_0x5527d6};};Object[a327_0x55099a(0x17e)](exports,a327_0x55099a(0x171),{'value':!![]});const logger_enums_1=require('../enums/logger.enums'),path_1=__importDefault(require(a327_0x55099a(0x17f))),promises_1=require(a327_0x55099a(0x182)),utils_1=require(a327_0x55099a(0x161)),job_1=require(a327_0x55099a(0x164));class StateManager{constructor(_0x17cd0d){const _0x1c5a75=a327_0x55099a;this[_0x1c5a75(0x152)]=StateManager[_0x1c5a75(0x155)](_0x17cd0d);}static[a327_0x55099a(0x155)](_0x1dd7fe){const _0x595d29=a327_0x55099a;return path_1[_0x595d29(0x167)][_0x595d29(0x16c)](_0x1dd7fe,job_1[_0x595d29(0x180)]);}static async[a327_0x55099a(0x175)](_0x4a1bf8,_0x4e6356){const _0x4baf87=a327_0x55099a,_0x360ada=StateManager[_0x4baf87(0x155)](_0x4a1bf8),_0x2fc77e={'id':_0x4e6356,'status':logger_enums_1[_0x4baf87(0x15a)]['QUEUED'],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x360ada,JSON[_0x4baf87(0x153)](_0x2fc77e));}static async['getJobState'](_0x2bcdbd){const _0x276ce4=a327_0x55099a,_0x52dbbe=StateManager[_0x276ce4(0x155)](_0x2bcdbd);if(await utils_1[_0x276ce4(0x181)][_0x276ce4(0x15d)](_0x52dbbe))return(0x0,promises_1[_0x276ce4(0x159)])(_0x52dbbe,_0x276ce4(0x158))['then'](JSON['parse']);throw new Error(_0x276ce4(0x17b));}async['update'](){const _0x196b40=a327_0x55099a;await(0x0,promises_1[_0x196b40(0x157)])(this[_0x196b40(0x152)],JSON[_0x196b40(0x153)](this[_0x196b40(0x166)]));}async['init'](){const _0x5574f1=a327_0x55099a;return this[_0x5574f1(0x166)]=await(0x0,promises_1[_0x5574f1(0x159)])(this[_0x5574f1(0x152)],_0x5574f1(0x158))[_0x5574f1(0x183)](JSON['parse']),this;}async[a327_0x55099a(0x176)](){const _0x1ac51b=a327_0x55099a;this[_0x1ac51b(0x166)]['status']=logger_enums_1[_0x1ac51b(0x15a)][_0x1ac51b(0x17c)],this[_0x1ac51b(0x166)][_0x1ac51b(0x169)]=new Date()[_0x1ac51b(0x154)](),await this[_0x1ac51b(0x16a)]();}async[a327_0x55099a(0x15b)](){const _0x4ca5aa=a327_0x55099a;this[_0x4ca5aa(0x166)]['status']=logger_enums_1[_0x4ca5aa(0x15a)][_0x4ca5aa(0x178)],this[_0x4ca5aa(0x166)][_0x4ca5aa(0x163)]=new Date()[_0x4ca5aa(0x154)](),await this['update']();}async[a327_0x55099a(0x15e)]({message:_0x17e329}){const _0x40b1d5=a327_0x55099a;this[_0x40b1d5(0x166)][_0x40b1d5(0x17d)]=logger_enums_1['JobStatus']['FAILED'],this[_0x40b1d5(0x166)][_0x40b1d5(0x163)]=new Date()['getTime'](),this[_0x40b1d5(0x166)][_0x40b1d5(0x151)]=_0x17e329,await this[_0x40b1d5(0x16a)]();}[a327_0x55099a(0x16d)](_0x38b12b){const _0x37383f=a327_0x55099a;return this['jobState']['warnings']['push'](_0x38b12b),this[_0x37383f(0x16a)]();}}exports[a327_0x55099a(0x167)]=StateManager;