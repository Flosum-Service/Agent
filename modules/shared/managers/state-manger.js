const a283_0x2b6c1f=a283_0x4cfb;(function(_0x5dacf0,_0x36bdc7){const _0x3a244a=a283_0x4cfb,_0x4c983e=_0x5dacf0();while(!![]){try{const _0x87b7f7=parseInt(_0x3a244a(0x1cb))/0x1*(parseInt(_0x3a244a(0x1c4))/0x2)+-parseInt(_0x3a244a(0x1bc))/0x3*(parseInt(_0x3a244a(0x1be))/0x4)+-parseInt(_0x3a244a(0x1d0))/0x5+parseInt(_0x3a244a(0x1c5))/0x6*(parseInt(_0x3a244a(0x1a5))/0x7)+parseInt(_0x3a244a(0x1af))/0x8+parseInt(_0x3a244a(0x1ca))/0x9*(parseInt(_0x3a244a(0x1c1))/0xa)+-parseInt(_0x3a244a(0x1c9))/0xb;if(_0x87b7f7===_0x36bdc7)break;else _0x4c983e['push'](_0x4c983e['shift']());}catch(_0xab6b97){_0x4c983e['push'](_0x4c983e['shift']());}}}(a283_0x4a40,0x34024));function a283_0x4cfb(_0x5ef41b,_0x50a5c3){const _0x3d688e=a283_0x4a40();return a283_0x4cfb=function(_0x3c8b55,_0x14225){_0x3c8b55=_0x3c8b55-0x1a2;let _0x4a404b=_0x3d688e[_0x3c8b55];return _0x4a404b;},a283_0x4cfb(_0x5ef41b,_0x50a5c3);}const a283_0x14225=(function(){let _0x22108a=!![];return function(_0x365828,_0x25d71b){const _0x390186=_0x22108a?function(){const _0x23cb25=a283_0x4cfb;if(_0x25d71b){const _0x1cbe0a=_0x25d71b[_0x23cb25(0x1d2)](_0x365828,arguments);return _0x25d71b=null,_0x1cbe0a;}}:function(){};return _0x22108a=![],_0x390186;};}()),a283_0x3c8b55=a283_0x14225(this,function(){const _0x8d35a5=a283_0x4cfb;return a283_0x3c8b55[_0x8d35a5(0x1b7)]()[_0x8d35a5(0x1b5)](_0x8d35a5(0x1d6))[_0x8d35a5(0x1b7)]()[_0x8d35a5(0x1c0)](a283_0x3c8b55)[_0x8d35a5(0x1b5)](_0x8d35a5(0x1d6));});a283_0x3c8b55();'use strict';function a283_0x4a40(){const _0x3ab646=['19033jrUSiU','utf-8','statePath','writeFile','jobState','JobStatus','getJobStatePath','FsUtils','COMPLETED','FAILED','3187720OYpxlj','getTime','setCompleted','../../../constants/job','createdDate','init','search','parse','toString','__importDefault','fs/promises','push','QUEUED','1105953mvgOZN','then','4ZjzahI','path','constructor','35050HpwJOM','Job\x20not\x20found.','status','253970rfELtr','330ePIlcq','getJobState','__esModule','default','4237519WsyUdD','711PntGAT','2eqbEyY','setError','warnings','update','join','559835XpTbuQ','../enums/logger.enums','apply','stringify','completedDate','IN_PROGRESS','(((.+)+)+)+$','error','JOB_LOG_STATE_FILENAME','isExistsPath','setInProgress'];a283_0x4a40=function(){return _0x3ab646;};return a283_0x4a40();}var __importDefault=this&&this[a283_0x2b6c1f(0x1b8)]||function(_0x5e1a5e){const _0x173a84=a283_0x2b6c1f;return _0x5e1a5e&&_0x5e1a5e[_0x173a84(0x1c7)]?_0x5e1a5e:{'default':_0x5e1a5e};};Object['defineProperty'](exports,a283_0x2b6c1f(0x1c7),{'value':!![]});const logger_enums_1=require(a283_0x2b6c1f(0x1d1)),path_1=__importDefault(require(a283_0x2b6c1f(0x1bf))),promises_1=require(a283_0x2b6c1f(0x1b9)),utils_1=require('@flosum/utils'),job_1=require(a283_0x2b6c1f(0x1b2));class StateManager{constructor(_0x58fc92){this['statePath']=StateManager['getJobStatePath'](_0x58fc92);}static[a283_0x2b6c1f(0x1ab)](_0x5321ec){const _0x778929=a283_0x2b6c1f;return path_1[_0x778929(0x1c8)][_0x778929(0x1cf)](_0x5321ec,job_1[_0x778929(0x1a2)]);}static async['create'](_0x1d2abb,_0x4d5598){const _0x4dae29=a283_0x2b6c1f,_0x938e1f=StateManager[_0x4dae29(0x1ab)](_0x1d2abb),_0x2a0ef5={'id':_0x4d5598,'status':logger_enums_1[_0x4dae29(0x1aa)][_0x4dae29(0x1bb)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x4dae29(0x1a8)])(_0x938e1f,JSON[_0x4dae29(0x1d3)](_0x2a0ef5));}static async[a283_0x2b6c1f(0x1c6)](_0x5d5dc6){const _0x7db68b=a283_0x2b6c1f,_0x102408=StateManager[_0x7db68b(0x1ab)](_0x5d5dc6);if(await utils_1[_0x7db68b(0x1ac)][_0x7db68b(0x1a3)](_0x102408))return(0x0,promises_1['readFile'])(_0x102408,_0x7db68b(0x1a6))[_0x7db68b(0x1bd)](JSON[_0x7db68b(0x1b6)]);throw new Error(_0x7db68b(0x1c2));}async[a283_0x2b6c1f(0x1ce)](){const _0x444a89=a283_0x2b6c1f;await(0x0,promises_1[_0x444a89(0x1a8)])(this[_0x444a89(0x1a7)],JSON['stringify'](this[_0x444a89(0x1a9)]));}async[a283_0x2b6c1f(0x1b4)](){const _0x54d37c=a283_0x2b6c1f;return this[_0x54d37c(0x1a9)]=await(0x0,promises_1['readFile'])(this['statePath'],_0x54d37c(0x1a6))[_0x54d37c(0x1bd)](JSON[_0x54d37c(0x1b6)]),this;}async[a283_0x2b6c1f(0x1a4)](){const _0x598375=a283_0x2b6c1f;this[_0x598375(0x1a9)][_0x598375(0x1c3)]=logger_enums_1['JobStatus'][_0x598375(0x1d5)],this[_0x598375(0x1a9)][_0x598375(0x1b3)]=new Date()['getTime'](),await this[_0x598375(0x1ce)]();}async[a283_0x2b6c1f(0x1b1)](){const _0x417958=a283_0x2b6c1f;this['jobState'][_0x417958(0x1c3)]=logger_enums_1['JobStatus'][_0x417958(0x1ad)],this[_0x417958(0x1a9)][_0x417958(0x1d4)]=new Date()[_0x417958(0x1b0)](),await this[_0x417958(0x1ce)]();}async[a283_0x2b6c1f(0x1cc)]({message:_0x18fc86}){const _0x28b733=a283_0x2b6c1f;this[_0x28b733(0x1a9)][_0x28b733(0x1c3)]=logger_enums_1['JobStatus'][_0x28b733(0x1ae)],this[_0x28b733(0x1a9)][_0x28b733(0x1d4)]=new Date()[_0x28b733(0x1b0)](),this[_0x28b733(0x1a9)][_0x28b733(0x1d7)]=_0x18fc86,await this[_0x28b733(0x1ce)]();}['addWarning'](_0x4dd573){const _0x5919df=a283_0x2b6c1f;return this[_0x5919df(0x1a9)][_0x5919df(0x1cd)][_0x5919df(0x1ba)](_0x4dd573),this[_0x5919df(0x1ce)]();}}exports['default']=StateManager;