const a298_0xbfed4a=a298_0x47df;(function(_0x3720a2,_0x2108a7){const _0x55b212=a298_0x47df,_0x4c9dcb=_0x3720a2();while(!![]){try{const _0x36d10e=-parseInt(_0x55b212(0x1b0))/0x1+parseInt(_0x55b212(0x1c6))/0x2+-parseInt(_0x55b212(0x1a9))/0x3+-parseInt(_0x55b212(0x1d5))/0x4+-parseInt(_0x55b212(0x1c8))/0x5*(-parseInt(_0x55b212(0x1a4))/0x6)+parseInt(_0x55b212(0x1c3))/0x7*(-parseInt(_0x55b212(0x1ac))/0x8)+parseInt(_0x55b212(0x1d4))/0x9;if(_0x36d10e===_0x2108a7)break;else _0x4c9dcb['push'](_0x4c9dcb['shift']());}catch(_0x2f1c4c){_0x4c9dcb['push'](_0x4c9dcb['shift']());}}}(a298_0x10f1,0xccbc1));const a298_0x3981e6=(function(){let _0x6a3931=!![];return function(_0x1904ae,_0x31e75c){const _0x12b6e7=_0x6a3931?function(){const _0xa93a66=a298_0x47df;if(_0x31e75c){const _0x4a89cd=_0x31e75c[_0xa93a66(0x1cc)](_0x1904ae,arguments);return _0x31e75c=null,_0x4a89cd;}}:function(){};return _0x6a3931=![],_0x12b6e7;};}()),a298_0x479724=a298_0x3981e6(this,function(){const _0x2471be=a298_0x47df;return a298_0x479724[_0x2471be(0x1d1)]()[_0x2471be(0x1b8)](_0x2471be(0x1b4))[_0x2471be(0x1d1)]()[_0x2471be(0x1c7)](a298_0x479724)[_0x2471be(0x1b8)](_0x2471be(0x1b4));});function a298_0x10f1(){const _0x5ecfd5=['error','stringify','search','getTime','Job\x20not\x20found.','FsUtils','addWarning','path','getJobStatePath','createdDate','FAILED','parse','setError','11318825TUKShC','../../../constants/job','writeFile','1104154NgbNXR','constructor','445hrblOj','status','IN_PROGRESS','JobStatus','apply','completedDate','statePath','join','defineProperty','toString','then','isExistsPath','28577133DvJjJb','1313924xNAvBu','13626pUJYgg','setInProgress','setCompleted','push','jobState','2057109uvSoKr','getJobState','__importDefault','8vftyod','utf-8','update','fs/promises','459681CCubbq','__esModule','readFile','default','(((.+)+)+)+$','QUEUED'];a298_0x10f1=function(){return _0x5ecfd5;};return a298_0x10f1();}a298_0x479724();'use strict';function a298_0x47df(_0x353b8b,_0x590440){const _0x4d90dc=a298_0x10f1();return a298_0x47df=function(_0x479724,_0x3981e6){_0x479724=_0x479724-0x1a4;let _0x10f15a=_0x4d90dc[_0x479724];return _0x10f15a;},a298_0x47df(_0x353b8b,_0x590440);}var __importDefault=this&&this[a298_0xbfed4a(0x1ab)]||function(_0x329628){const _0x357e47=a298_0xbfed4a;return _0x329628&&_0x329628[_0x357e47(0x1b1)]?_0x329628:{'default':_0x329628};};Object[a298_0xbfed4a(0x1d0)](exports,a298_0xbfed4a(0x1b1),{'value':!![]});const logger_enums_1=require('../enums/logger.enums'),path_1=__importDefault(require(a298_0xbfed4a(0x1bd))),promises_1=require(a298_0xbfed4a(0x1af)),utils_1=require('@flosum/utils'),job_1=require(a298_0xbfed4a(0x1c4));class StateManager{constructor(_0x4a5b80){const _0x22174d=a298_0xbfed4a;this[_0x22174d(0x1ce)]=StateManager[_0x22174d(0x1be)](_0x4a5b80);}static['getJobStatePath'](_0x5f5d5c){const _0x8a2d8=a298_0xbfed4a;return path_1[_0x8a2d8(0x1b3)][_0x8a2d8(0x1cf)](_0x5f5d5c,job_1['JOB_LOG_STATE_FILENAME']);}static async['create'](_0x575109,_0x50fc73){const _0x3fd4aa=a298_0xbfed4a,_0x275e79=StateManager[_0x3fd4aa(0x1be)](_0x575109),_0x54c047={'id':_0x50fc73,'status':logger_enums_1['JobStatus'][_0x3fd4aa(0x1b5)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1[_0x3fd4aa(0x1c5)])(_0x275e79,JSON['stringify'](_0x54c047));}static async[a298_0xbfed4a(0x1aa)](_0x21a522){const _0x33c713=a298_0xbfed4a,_0x3c66be=StateManager[_0x33c713(0x1be)](_0x21a522);if(await utils_1[_0x33c713(0x1bb)][_0x33c713(0x1d3)](_0x3c66be))return(0x0,promises_1[_0x33c713(0x1b2)])(_0x3c66be,_0x33c713(0x1ad))[_0x33c713(0x1d2)](JSON['parse']);throw new Error(_0x33c713(0x1ba));}async[a298_0xbfed4a(0x1ae)](){const _0x5d4713=a298_0xbfed4a;await(0x0,promises_1[_0x5d4713(0x1c5)])(this[_0x5d4713(0x1ce)],JSON[_0x5d4713(0x1b7)](this[_0x5d4713(0x1a8)]));}async['init'](){const _0x2d9234=a298_0xbfed4a;return this[_0x2d9234(0x1a8)]=await(0x0,promises_1[_0x2d9234(0x1b2)])(this[_0x2d9234(0x1ce)],_0x2d9234(0x1ad))[_0x2d9234(0x1d2)](JSON[_0x2d9234(0x1c1)]),this;}async[a298_0xbfed4a(0x1a5)](){const _0x28b1a8=a298_0xbfed4a;this[_0x28b1a8(0x1a8)][_0x28b1a8(0x1c9)]=logger_enums_1['JobStatus'][_0x28b1a8(0x1ca)],this['jobState'][_0x28b1a8(0x1bf)]=new Date()[_0x28b1a8(0x1b9)](),await this['update']();}async[a298_0xbfed4a(0x1a6)](){const _0x5e526a=a298_0xbfed4a;this[_0x5e526a(0x1a8)][_0x5e526a(0x1c9)]=logger_enums_1[_0x5e526a(0x1cb)]['COMPLETED'],this[_0x5e526a(0x1a8)][_0x5e526a(0x1cd)]=new Date()[_0x5e526a(0x1b9)](),await this[_0x5e526a(0x1ae)]();}async[a298_0xbfed4a(0x1c2)]({message:_0x1fbb67}){const _0x103385=a298_0xbfed4a;this[_0x103385(0x1a8)][_0x103385(0x1c9)]=logger_enums_1[_0x103385(0x1cb)][_0x103385(0x1c0)],this['jobState']['completedDate']=new Date()[_0x103385(0x1b9)](),this[_0x103385(0x1a8)][_0x103385(0x1b6)]=_0x1fbb67,await this[_0x103385(0x1ae)]();}[a298_0xbfed4a(0x1bc)](_0x787a8){const _0x56f000=a298_0xbfed4a;return this['jobState']['warnings'][_0x56f000(0x1a7)](_0x787a8),this[_0x56f000(0x1ae)]();}}exports[a298_0xbfed4a(0x1b3)]=StateManager;