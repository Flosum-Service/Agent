const a326_0x52cb69=a326_0x3aa2;(function(_0x38edf8,_0x4036cb){const _0x1c612b=a326_0x3aa2,_0x54fc58=_0x38edf8();while(!![]){try{const _0x408dc0=parseInt(_0x1c612b(0x99))/0x1*(-parseInt(_0x1c612b(0x97))/0x2)+parseInt(_0x1c612b(0x94))/0x3*(parseInt(_0x1c612b(0x98))/0x4)+-parseInt(_0x1c612b(0xa7))/0x5+-parseInt(_0x1c612b(0xa5))/0x6+parseInt(_0x1c612b(0xa8))/0x7+-parseInt(_0x1c612b(0xc2))/0x8+parseInt(_0x1c612b(0x9a))/0x9;if(_0x408dc0===_0x4036cb)break;else _0x54fc58['push'](_0x54fc58['shift']());}catch(_0x2b78b1){_0x54fc58['push'](_0x54fc58['shift']());}}}(a326_0x1155,0x1c5ea));const a326_0x109679=(function(){let _0x3e3058=!![];return function(_0x2c0c1b,_0x44a3b4){const _0x3ac4bf=_0x3e3058?function(){const _0x2bce09=a326_0x3aa2;if(_0x44a3b4){const _0x4c38ae=_0x44a3b4[_0x2bce09(0xa4)](_0x2c0c1b,arguments);return _0x44a3b4=null,_0x4c38ae;}}:function(){};return _0x3e3058=![],_0x3ac4bf;};}()),a326_0x22bdd2=a326_0x109679(this,function(){const _0x256fca=a326_0x3aa2;return a326_0x22bdd2[_0x256fca(0x9b)]()[_0x256fca(0x9c)](_0x256fca(0x9d))[_0x256fca(0x9b)]()[_0x256fca(0xa0)](a326_0x22bdd2)['search'](_0x256fca(0x9d));});a326_0x22bdd2();'use strict';var __importDefault=this&&this[a326_0x52cb69(0xc5)]||function(_0x375d4f){const _0x5e70ce=a326_0x52cb69;return _0x375d4f&&_0x375d4f[_0x5e70ce(0xa3)]?_0x375d4f:{'default':_0x375d4f};};function a326_0x1155(){const _0x2eb644=['utf-8','__esModule','apply','1378314COGkPy','setInProgress','483790yJAPOk','1487500DAoOGo','then','FsUtils','getTime','IN_PROGRESS','parse','../../../constants/job','warnings','QUEUED','defineProperty','default','getJobStatePath','jobState','JobStatus','error','../enums/logger.enums','JOB_LOG_STATE_FILENAME','fs/promises','FAILED','path','COMPLETED','stringify','init','statePath','readFile','@flosum/utils','556488YSGvso','writeFile','Job\x20not\x20found.','__importDefault','9BavxpS','push','update','71014eJhQmu','59860MjIIab','1FJihEa','2613168HlXhqH','toString','search','(((.+)+)+)+$','create','completedDate','constructor','status'];a326_0x1155=function(){return _0x2eb644;};return a326_0x1155();}Object[a326_0x52cb69(0xb1)](exports,a326_0x52cb69(0xa3),{'value':!![]});function a326_0x3aa2(_0x478329,_0x1b97bd){const _0x24bb8f=a326_0x1155();return a326_0x3aa2=function(_0x22bdd2,_0x109679){_0x22bdd2=_0x22bdd2-0x94;let _0x115531=_0x24bb8f[_0x22bdd2];return _0x115531;},a326_0x3aa2(_0x478329,_0x1b97bd);}const logger_enums_1=require(a326_0x52cb69(0xb7)),path_1=__importDefault(require(a326_0x52cb69(0xbb))),promises_1=require(a326_0x52cb69(0xb9)),utils_1=require(a326_0x52cb69(0xc1)),job_1=require(a326_0x52cb69(0xae));class StateManager{constructor(_0x284f7f){this['statePath']=StateManager['getJobStatePath'](_0x284f7f);}static['getJobStatePath'](_0x195e4c){const _0x554a65=a326_0x52cb69;return path_1[_0x554a65(0xb2)]['join'](_0x195e4c,job_1[_0x554a65(0xb8)]);}static async[a326_0x52cb69(0x9e)](_0x11b366,_0x42781f){const _0x402bcf=a326_0x52cb69,_0x2d6464=StateManager[_0x402bcf(0xb3)](_0x11b366),_0x540a3f={'id':_0x42781f,'status':logger_enums_1[_0x402bcf(0xb5)][_0x402bcf(0xb0)],'createdDate':null,'completedDate':null,'error':null,'warnings':[]};await(0x0,promises_1['writeFile'])(_0x2d6464,JSON[_0x402bcf(0xbd)](_0x540a3f));}static async['getJobState'](_0x575d93){const _0x4c95a4=a326_0x52cb69,_0x5163a8=StateManager[_0x4c95a4(0xb3)](_0x575d93);if(await utils_1[_0x4c95a4(0xaa)]['isExistsPath'](_0x5163a8))return(0x0,promises_1[_0x4c95a4(0xc0)])(_0x5163a8,_0x4c95a4(0xa2))[_0x4c95a4(0xa9)](JSON[_0x4c95a4(0xad)]);throw new Error(_0x4c95a4(0xc4));}async[a326_0x52cb69(0x96)](){const _0x526a46=a326_0x52cb69;await(0x0,promises_1[_0x526a46(0xc3)])(this[_0x526a46(0xbf)],JSON[_0x526a46(0xbd)](this[_0x526a46(0xb4)]));}async[a326_0x52cb69(0xbe)](){const _0x577ff0=a326_0x52cb69;return this[_0x577ff0(0xb4)]=await(0x0,promises_1[_0x577ff0(0xc0)])(this[_0x577ff0(0xbf)],_0x577ff0(0xa2))[_0x577ff0(0xa9)](JSON[_0x577ff0(0xad)]),this;}async[a326_0x52cb69(0xa6)](){const _0x2d46f7=a326_0x52cb69;this[_0x2d46f7(0xb4)][_0x2d46f7(0xa1)]=logger_enums_1[_0x2d46f7(0xb5)][_0x2d46f7(0xac)],this[_0x2d46f7(0xb4)]['createdDate']=new Date()[_0x2d46f7(0xab)](),await this[_0x2d46f7(0x96)]();}async['setCompleted'](){const _0x502756=a326_0x52cb69;this['jobState']['status']=logger_enums_1[_0x502756(0xb5)][_0x502756(0xbc)],this[_0x502756(0xb4)]['completedDate']=new Date()[_0x502756(0xab)](),await this[_0x502756(0x96)]();}async['setError']({message:_0x10e36c}){const _0x1a6477=a326_0x52cb69;this[_0x1a6477(0xb4)]['status']=logger_enums_1['JobStatus'][_0x1a6477(0xba)],this[_0x1a6477(0xb4)][_0x1a6477(0x9f)]=new Date()[_0x1a6477(0xab)](),this[_0x1a6477(0xb4)][_0x1a6477(0xb6)]=_0x10e36c,await this[_0x1a6477(0x96)]();}['addWarning'](_0x3423ab){const _0x1458b6=a326_0x52cb69;return this[_0x1458b6(0xb4)][_0x1458b6(0xaf)][_0x1458b6(0x95)](_0x3423ab),this['update']();}}exports['default']=StateManager;