const a246_0x35a5e2=a246_0x29b6;function a246_0x4a93(){const _0x8fee47=['MAX_WRITES_PER_TICK','isDir','112UCHLpO','7177665wcivXf','Remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','log','includes','Have\x20to\x20update\x20%d\x20files','./base.remover','apply','ExperienceBundle','Remove\x20component\x20directory\x20%s\x20[%s]','801465ekGRkY','428LBrOgl','META_EXTENSION','components','removeFile','fileName','toString','../internal/fs.internal','convertToString','readFile','parentComponents','../parsers/data/child-types','(((.+)+)+)+$','path','Unknown\x20child\x20type\x20','removeChild','Remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','3639unsaMS','MDApiRemover','META_EXPERIENCE_BUNDLE','split','4483PVFiOG','name','length','type','pop','site-meta.xml','../parsers/utils/xml-v2','__importDefault','default','../parsers/data/child-types-map','-meta.xml','keys','XmlV2','Remove\x20child\x20component\x20%s\x20[%s]','1386RAPyJI','removeDir','join','exists','254noYmgq','catch','splice','logger','16185iXgDtt','Remove\x20parent\x20component\x20%s\x20[%s]','__esModule','1043271CghAiB','removeAt','36hfoxgD','sourceDir','9817790MHVGAb'];a246_0x4a93=function(){return _0x8fee47;};return a246_0x4a93();}(function(_0x408b88,_0x49cd81){const _0xd566e=a246_0x29b6,_0x3c6e46=_0x408b88();while(!![]){try{const _0x1b4db0=-parseInt(_0xd566e(0xd1))/0x1*(parseInt(_0xd566e(0xa4))/0x2)+-parseInt(_0xd566e(0xcd))/0x3*(-parseInt(_0xd566e(0xbd))/0x4)+parseInt(_0xd566e(0xa8))/0x5*(parseInt(_0xd566e(0xdf))/0x6)+-parseInt(_0xd566e(0xbc))/0x7+-parseInt(_0xd566e(0xb2))/0x8*(-parseInt(_0xd566e(0xab))/0x9)+parseInt(_0xd566e(0xaf))/0xa+-parseInt(_0xd566e(0xb3))/0xb*(parseInt(_0xd566e(0xad))/0xc);if(_0x1b4db0===_0x49cd81)break;else _0x3c6e46['push'](_0x3c6e46['shift']());}catch(_0x330bc6){_0x3c6e46['push'](_0x3c6e46['shift']());}}}(a246_0x4a93,0xcd462));const a246_0x116f83=(function(){let _0x31e23f=!![];return function(_0x17569c,_0x345642){const _0xc993e8=_0x31e23f?function(){const _0x5b26c2=a246_0x29b6;if(_0x345642){const _0x182b31=_0x345642[_0x5b26c2(0xb9)](_0x17569c,arguments);return _0x345642=null,_0x182b31;}}:function(){};return _0x31e23f=![],_0xc993e8;};}()),a246_0x307abb=a246_0x116f83(this,function(){const _0x1a1dbb=a246_0x29b6;return a246_0x307abb[_0x1a1dbb(0xc2)]()['search'](_0x1a1dbb(0xc8))[_0x1a1dbb(0xc2)]()['constructor'](a246_0x307abb)['search'](_0x1a1dbb(0xc8));});function a246_0x29b6(_0x38dc99,_0x449a88){const _0x599fb7=a246_0x4a93();return a246_0x29b6=function(_0x307abb,_0x116f83){_0x307abb=_0x307abb-0xa4;let _0x4a933c=_0x599fb7[_0x307abb];return _0x4a933c;},a246_0x29b6(_0x38dc99,_0x449a88);}a246_0x307abb();'use strict';var __importDefault=this&&this[a246_0x35a5e2(0xd8)]||function(_0x138c36){return _0x138c36&&_0x138c36['__esModule']?_0x138c36:{'default':_0x138c36};};Object['defineProperty'](exports,a246_0x35a5e2(0xaa),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a246_0x35a5e2(0xc3)),xml_v2_1=require(a246_0x35a5e2(0xd7)),child_types_1=__importDefault(require(a246_0x35a5e2(0xc7))),child_types_map_1=__importDefault(require(a246_0x35a5e2(0xda))),path_1=__importDefault(require(a246_0x35a5e2(0xc9))),base_remover_1=require(a246_0x35a5e2(0xb8));class MDApiRemover extends base_remover_1['BaseRemover']{constructor({components:_0x1c64bc,sourceDir:_0x46abbc}){const _0xf54bf3=a246_0x35a5e2;super({'sourceDir':_0x46abbc,'components':_0x1c64bc},MDApiRemover[_0xf54bf3(0xd2)]),this['META_EXTENSION']=_0xf54bf3(0xdb),this[_0xf54bf3(0xcf)]=_0xf54bf3(0xd6),this['MAX_WRITES_PER_TICK']=0x64,this[_0xf54bf3(0xc6)]={};}async['removeParent'](_0x381e86){const _0x32ac01=a246_0x35a5e2,_0x9d5c51=path_1[_0x32ac01(0xd9)][_0x32ac01(0xe1)](this[_0x32ac01(0xae)],_0x381e86[_0x32ac01(0xc9)]),_0x53c5f4=path_1['default'][_0x32ac01(0xe1)](this['sourceDir'],''+_0x381e86[_0x32ac01(0xc9)]+this[_0x32ac01(0xbe)]);this[_0x32ac01(0xc6)][_0x381e86[_0x32ac01(0xc9)]]&&delete this[_0x32ac01(0xc6)][_0x381e86[_0x32ac01(0xc9)]];const _0x663ada=await fs_internal_1['FS'][_0x32ac01(0xb1)](_0x9d5c51)[_0x32ac01(0xa5)](()=>![]);if(_0x663ada){this['logger']['log'](_0x32ac01(0xbb),_0x9d5c51,_0x381e86[_0x32ac01(0xd4)]),await fs_internal_1['FS'][_0x32ac01(0xe0)](_0x9d5c51);_0x381e86[_0x32ac01(0xd4)]===_0x32ac01(0xba)?await fs_internal_1['FS'][_0x32ac01(0xc0)](''+_0x9d5c51+this[_0x32ac01(0xcf)])[_0x32ac01(0xa5)](()=>void 0x0):(this[_0x32ac01(0xa7)]['log'](_0x32ac01(0xb4),_0x9d5c51,_0x381e86[_0x32ac01(0xd4)]),await fs_internal_1['FS'][_0x32ac01(0xc0)](''+_0x9d5c51+this[_0x32ac01(0xbe)])[_0x32ac01(0xa5)](()=>void 0x0));return;}this['logger'][_0x32ac01(0xb5)]('Remove\x20component\x20\x20%s\x20[%s]',_0x9d5c51,_0x381e86[_0x32ac01(0xd4)]),await Promise['all']([fs_internal_1['FS'][_0x32ac01(0xc0)](_0x9d5c51),fs_internal_1['FS'][_0x32ac01(0xc0)](_0x53c5f4)]);}async[a246_0x35a5e2(0xcb)](_0x1c1cf6){const _0x4d251a=a246_0x35a5e2,{fileName:_0x57e275,type:_0x1bba05,path:_0x3b003d}=_0x1c1cf6,_0x154127=child_types_map_1[_0x4d251a(0xd9)][_0x1bba05];if(!_0x154127)throw new Error(_0x4d251a(0xca)+_0x1bba05);if(!this[_0x4d251a(0xc6)][_0x3b003d]){const _0x5d43f2=path_1['default'][_0x4d251a(0xe1)](this[_0x4d251a(0xae)],_0x3b003d),_0x232f7f=await fs_internal_1['FS']['exists'](_0x5d43f2);if(!_0x232f7f)return;const _0x2d4d4c=await fs_internal_1['FS'][_0x4d251a(0xc5)](_0x5d43f2);this[_0x4d251a(0xc6)][_0x3b003d]=await xml_v2_1[_0x4d251a(0xdd)]['parse'](_0x2d4d4c);}const _0x50858b=this[_0x4d251a(0xc6)][_0x3b003d],_0x6b638b=_0x57e275[_0x4d251a(0xd0)]('.')[_0x4d251a(0xd5)]();xml_v2_1[_0x4d251a(0xdd)][_0x4d251a(0xac)](_0x50858b,_0x154127,_0x6b638b||_0x57e275),xml_v2_1[_0x4d251a(0xdd)]['isEmptyXml'](_0x50858b)?(this[_0x4d251a(0xa7)][_0x4d251a(0xb5)](_0x4d251a(0xcc),_0x1c1cf6[_0x4d251a(0xc9)],_0x1c1cf6[_0x4d251a(0xc1)]),await this['removeParent'](_0x1c1cf6),delete this['parentComponents'][_0x3b003d]):this[_0x4d251a(0xc6)][_0x3b003d]=_0x50858b;}async['execute'](){const _0x4cc695=a246_0x35a5e2;!await fs_internal_1['FS'][_0x4cc695(0xe2)](this['sourceDir'])&&await fs_internal_1['FS']['makeDir'](this[_0x4cc695(0xae)]);for(const _0x486e4c of this[_0x4cc695(0xbf)]){!child_types_1[_0x4cc695(0xd9)][_0x4cc695(0xb6)](_0x486e4c[_0x4cc695(0xd4)])?(this[_0x4cc695(0xa7)][_0x4cc695(0xb5)](_0x4cc695(0xa9),_0x486e4c[_0x4cc695(0xc1)],_0x486e4c[_0x4cc695(0xd4)]),await this['removeParent'](_0x486e4c)):(this['logger'][_0x4cc695(0xb5)](_0x4cc695(0xde),_0x486e4c[_0x4cc695(0xc1)],_0x486e4c[_0x4cc695(0xd4)]),await this['removeChild'](_0x486e4c));}const _0x4b0fcf=Object[_0x4cc695(0xdc)](this[_0x4cc695(0xc6)]);this['logger']['log'](_0x4cc695(0xb7),this[_0x4cc695(0xbf)]['length']);while(_0x4b0fcf[_0x4cc695(0xd3)]){const _0x4a08a3=_0x4b0fcf[_0x4cc695(0xa6)](0x0,this[_0x4cc695(0xb0)]);for(const _0xe393dd of _0x4a08a3){await fs_internal_1['FS']['writeFile'](path_1['default'][_0x4cc695(0xe1)](this[_0x4cc695(0xae)],_0xe393dd),xml_v2_1[_0x4cc695(0xdd)][_0x4cc695(0xc4)](this[_0x4cc695(0xc6)][_0xe393dd]));}}this[_0x4cc695(0xc6)]={};}}exports[a246_0x35a5e2(0xce)]=MDApiRemover;