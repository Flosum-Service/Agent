const a257_0x22ae2a=a257_0x14e4;(function(_0xb11877,_0x13baea){const _0x306b46=a257_0x14e4,_0x52b254=_0xb11877();while(!![]){try{const _0x3f8031=-parseInt(_0x306b46(0x1c2))/0x1+parseInt(_0x306b46(0x1f7))/0x2*(-parseInt(_0x306b46(0x1d3))/0x3)+-parseInt(_0x306b46(0x1ee))/0x4*(parseInt(_0x306b46(0x1f2))/0x5)+-parseInt(_0x306b46(0x1d9))/0x6*(-parseInt(_0x306b46(0x1dd))/0x7)+-parseInt(_0x306b46(0x1e1))/0x8*(-parseInt(_0x306b46(0x1cf))/0x9)+-parseInt(_0x306b46(0x1e7))/0xa*(-parseInt(_0x306b46(0x1da))/0xb)+-parseInt(_0x306b46(0x1c0))/0xc*(-parseInt(_0x306b46(0x1d4))/0xd);if(_0x3f8031===_0x13baea)break;else _0x52b254['push'](_0x52b254['shift']());}catch(_0x6527ae){_0x52b254['push'](_0x52b254['shift']());}}}(a257_0x4f62,0xdc3a4));function a257_0x14e4(_0x7c55f5,_0x10290d){const _0x571414=a257_0x4f62();return a257_0x14e4=function(_0xd34997,_0x3855a4){_0xd34997=_0xd34997-0x1bb;let _0x4f6243=_0x571414[_0xd34997];return _0x4f6243;},a257_0x14e4(_0x7c55f5,_0x10290d);}const a257_0x3855a4=(function(){let _0x33f9b0=!![];return function(_0x29e6e2,_0x2062fe){const _0x17a304=_0x33f9b0?function(){if(_0x2062fe){const _0x389140=_0x2062fe['apply'](_0x29e6e2,arguments);return _0x2062fe=null,_0x389140;}}:function(){};return _0x33f9b0=![],_0x17a304;};}()),a257_0xd34997=a257_0x3855a4(this,function(){const _0x12ea68=a257_0x14e4;return a257_0xd34997[_0x12ea68(0x1e6)]()[_0x12ea68(0x1d0)](_0x12ea68(0x1c8))[_0x12ea68(0x1e6)]()[_0x12ea68(0x1d1)](a257_0xd34997)[_0x12ea68(0x1d0)]('(((.+)+)+)+$');});a257_0xd34997();'use strict';var __importDefault=this&&this[a257_0x22ae2a(0x1c5)]||function(_0x6c2e9b){return _0x6c2e9b&&_0x6c2e9b['__esModule']?_0x6c2e9b:{'default':_0x6c2e9b};};Object[a257_0x22ae2a(0x1f0)](exports,'__esModule',{'value':!![]}),exports[a257_0x22ae2a(0x1cb)]=void 0x0;const fs_internal_1=require(a257_0x22ae2a(0x1d6)),xml_v2_1=require('../parsers/utils/xml-v2'),child_types_1=__importDefault(require(a257_0x22ae2a(0x1c3))),child_types_map_1=__importDefault(require(a257_0x22ae2a(0x1bf))),path_1=__importDefault(require(a257_0x22ae2a(0x1f8))),base_remover_1=require('./base.remover');function a257_0x4f62(){const _0x4d26a4=['MDApiRemover','type','Remove\x20child\x20component\x20%s\x20[%s]','fileName','171Mdgahz','search','constructor','readFile','9sfgJAA','5755919PTsfDk','parentComponents','../internal/fs.internal','Remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','join','690BvBlev','77vkMRHz','XmlV2','name','36967Pyydxx','sourceDir','removeDir','splice','92208yIUCiX','isDir','keys','Remove\x20component\x20directory\x20%s\x20[%s]','MAX_WRITES_PER_TICK','toString','1238860yeKVCJ','exists','parse','META_EXPERIENCE_BUNDLE','META_EXTENSION','components','default','2155708fpmjvx','execute','defineProperty','writeFile','5aublxZ','site-meta.xml','removeParent','BaseRemover','Remove\x20parent\x20component\x20%s\x20[%s]','926102PZUwUS','path','isEmptyXml','removeAt','Have\x20to\x20update\x20%d\x20files','pop','removeFile','Remove\x20component\x20\x20%s\x20[%s]','log','../parsers/data/child-types-map','48XaJlPi','convertToString','634431gkmzst','../parsers/data/child-types','catch','__importDefault','ExperienceBundle','removeChild','(((.+)+)+)+$','logger','length'];a257_0x4f62=function(){return _0x4d26a4;};return a257_0x4f62();}class MDApiRemover extends base_remover_1[a257_0x22ae2a(0x1f5)]{constructor({components:_0xe6ff00,sourceDir:_0x4ea4ea}){const _0x15cd57=a257_0x22ae2a;super({'sourceDir':_0x4ea4ea,'components':_0xe6ff00},MDApiRemover[_0x15cd57(0x1dc)]),this[_0x15cd57(0x1eb)]='-meta.xml',this[_0x15cd57(0x1ea)]=_0x15cd57(0x1f3),this['MAX_WRITES_PER_TICK']=0x64,this[_0x15cd57(0x1d5)]={};}async[a257_0x22ae2a(0x1f4)](_0x1fcb35){const _0x4ca438=a257_0x22ae2a,_0xe2e28f=path_1[_0x4ca438(0x1ed)]['join'](this[_0x4ca438(0x1de)],_0x1fcb35[_0x4ca438(0x1f8)]),_0x1f2900=path_1[_0x4ca438(0x1ed)][_0x4ca438(0x1d8)](this[_0x4ca438(0x1de)],''+_0x1fcb35[_0x4ca438(0x1f8)]+this[_0x4ca438(0x1eb)]);this[_0x4ca438(0x1d5)][_0x1fcb35[_0x4ca438(0x1f8)]]&&delete this[_0x4ca438(0x1d5)][_0x1fcb35[_0x4ca438(0x1f8)]];const _0x915622=await fs_internal_1['FS'][_0x4ca438(0x1e2)](_0xe2e28f)['catch'](()=>![]);if(_0x915622){this[_0x4ca438(0x1c9)][_0x4ca438(0x1be)](_0x4ca438(0x1e4),_0xe2e28f,_0x1fcb35[_0x4ca438(0x1cc)]),await fs_internal_1['FS'][_0x4ca438(0x1df)](_0xe2e28f);_0x1fcb35[_0x4ca438(0x1cc)]===_0x4ca438(0x1c6)?await fs_internal_1['FS'][_0x4ca438(0x1bc)](''+_0xe2e28f+this[_0x4ca438(0x1ea)])['catch'](()=>void 0x0):(this[_0x4ca438(0x1c9)]['log'](_0x4ca438(0x1d7),_0xe2e28f,_0x1fcb35['type']),await fs_internal_1['FS'][_0x4ca438(0x1bc)](''+_0xe2e28f+this['META_EXTENSION'])[_0x4ca438(0x1c4)](()=>void 0x0));return;}this['logger'][_0x4ca438(0x1be)](_0x4ca438(0x1bd),_0xe2e28f,_0x1fcb35[_0x4ca438(0x1cc)]),await Promise['all']([fs_internal_1['FS'][_0x4ca438(0x1bc)](_0xe2e28f),fs_internal_1['FS']['removeFile'](_0x1f2900)]);}async[a257_0x22ae2a(0x1c7)](_0x43a1ef){const _0x5c805d=a257_0x22ae2a,{fileName:_0x5cb218,type:_0x2640ab,path:_0x59ebf6}=_0x43a1ef,_0x351262=child_types_map_1[_0x5c805d(0x1ed)][_0x2640ab];if(!_0x351262)throw new Error('Unknown\x20child\x20type\x20'+_0x2640ab);if(!this[_0x5c805d(0x1d5)][_0x59ebf6]){const _0x3633bc=path_1[_0x5c805d(0x1ed)][_0x5c805d(0x1d8)](this[_0x5c805d(0x1de)],_0x59ebf6),_0x3d3cb2=await fs_internal_1['FS'][_0x5c805d(0x1e8)](_0x3633bc);if(!_0x3d3cb2)return;const _0x206533=await fs_internal_1['FS'][_0x5c805d(0x1d2)](_0x3633bc);this[_0x5c805d(0x1d5)][_0x59ebf6]=await xml_v2_1['XmlV2'][_0x5c805d(0x1e9)](_0x206533);}const _0xe12489=this['parentComponents'][_0x59ebf6],_0x1eca29=_0x5cb218['split']('.')[_0x5c805d(0x1bb)]();xml_v2_1['XmlV2'][_0x5c805d(0x1fa)](_0xe12489,_0x351262,_0x1eca29||_0x5cb218),xml_v2_1[_0x5c805d(0x1db)][_0x5c805d(0x1f9)](_0xe12489)?(this['logger'][_0x5c805d(0x1be)]('Remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x43a1ef['path'],_0x43a1ef[_0x5c805d(0x1ce)]),await this[_0x5c805d(0x1f4)](_0x43a1ef),delete this[_0x5c805d(0x1d5)][_0x59ebf6]):this[_0x5c805d(0x1d5)][_0x59ebf6]=_0xe12489;}async[a257_0x22ae2a(0x1ef)](){const _0x266042=a257_0x22ae2a;!await fs_internal_1['FS']['exists'](this['sourceDir'])&&await fs_internal_1['FS']['makeDir'](this[_0x266042(0x1de)]);for(const _0x19e5b0 of this[_0x266042(0x1ec)]){!child_types_1[_0x266042(0x1ed)]['includes'](_0x19e5b0[_0x266042(0x1cc)])?(this[_0x266042(0x1c9)][_0x266042(0x1be)](_0x266042(0x1f6),_0x19e5b0[_0x266042(0x1ce)],_0x19e5b0[_0x266042(0x1cc)]),await this['removeParent'](_0x19e5b0)):(this[_0x266042(0x1c9)][_0x266042(0x1be)](_0x266042(0x1cd),_0x19e5b0[_0x266042(0x1ce)],_0x19e5b0[_0x266042(0x1cc)]),await this[_0x266042(0x1c7)](_0x19e5b0));}const _0x1f404d=Object[_0x266042(0x1e3)](this[_0x266042(0x1d5)]);this[_0x266042(0x1c9)][_0x266042(0x1be)](_0x266042(0x1fb),this['components'][_0x266042(0x1ca)]);while(_0x1f404d['length']){const _0x4a3fef=_0x1f404d[_0x266042(0x1e0)](0x0,this[_0x266042(0x1e5)]);for(const _0x2bb03f of _0x4a3fef){await fs_internal_1['FS'][_0x266042(0x1f1)](path_1[_0x266042(0x1ed)][_0x266042(0x1d8)](this[_0x266042(0x1de)],_0x2bb03f),xml_v2_1[_0x266042(0x1db)][_0x266042(0x1c1)](this['parentComponents'][_0x2bb03f]));}}this[_0x266042(0x1d5)]={};}}exports[a257_0x22ae2a(0x1cb)]=MDApiRemover;