const a246_0x530d47=a246_0x4948;function a246_0x1658(){const _0x404ec5=['logger','constructor','12500ngFguq','Remove\x20child\x20component\x20%s\x20[%s]','14hLucdt','exists','parentComponents','Have\x20to\x20update\x20%d\x20files','convertToString','MDApiRemover','join','toString','removeDir','META_EXPERIENCE_BUNDLE','length','catch','log','sourceDir','1226632yObucO','includes','__importDefault','pop','readFile','345kUlaeG','fileName','XmlV2','default','apply','1058300zXWFRq','1vVxsjR','BaseRemover','-meta.xml','MAX_WRITES_PER_TICK','319UMWqgw','Remove\x20parent\x20component\x20%s\x20[%s]','../parsers/data/child-types','removeFile','12201462VpemTY','removeParent','makeDir','path','name','Remove\x20component\x20directory\x20%s\x20[%s]','search','Remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','(((.+)+)+)+$','__esModule','2956936XRJieE','isEmptyXml','4112270KhIots','ExperienceBundle','META_EXTENSION','type','8288844sJbBVq'];a246_0x1658=function(){return _0x404ec5;};return a246_0x1658();}(function(_0x509a43,_0x3246ea){const _0x5c287a=a246_0x4948,_0x16cc65=_0x509a43();while(!![]){try{const _0x5a8ff8=-parseInt(_0x5c287a(0xc8))/0x1*(-parseInt(_0x5c287a(0xbd))/0x2)+-parseInt(_0x5c287a(0xc2))/0x3*(-parseInt(_0x5c287a(0xe3))/0x4)+parseInt(_0x5c287a(0xdc))/0x5+parseInt(_0x5c287a(0xe0))/0x6+-parseInt(_0x5c287a(0xe5))/0x7*(parseInt(_0x5c287a(0xda))/0x8)+parseInt(_0x5c287a(0xd0))/0x9+-parseInt(_0x5c287a(0xc7))/0xa*(parseInt(_0x5c287a(0xcc))/0xb);if(_0x5a8ff8===_0x3246ea)break;else _0x16cc65['push'](_0x16cc65['shift']());}catch(_0x10f53b){_0x16cc65['push'](_0x16cc65['shift']());}}}(a246_0x1658,0xb0c41));const a246_0x4feb16=(function(){let _0x15e007=!![];return function(_0x43e7fe,_0x47ca0b){const _0x3ae55c=_0x15e007?function(){const _0x148b78=a246_0x4948;if(_0x47ca0b){const _0x3b706a=_0x47ca0b[_0x148b78(0xc6)](_0x43e7fe,arguments);return _0x47ca0b=null,_0x3b706a;}}:function(){};return _0x15e007=![],_0x3ae55c;};}()),a246_0x511f0f=a246_0x4feb16(this,function(){const _0x5def2b=a246_0x4948;return a246_0x511f0f[_0x5def2b(0xec)]()[_0x5def2b(0xd6)](_0x5def2b(0xd8))['toString']()[_0x5def2b(0xe2)](a246_0x511f0f)[_0x5def2b(0xd6)](_0x5def2b(0xd8));});a246_0x511f0f();'use strict';var __importDefault=this&&this[a246_0x530d47(0xbf)]||function(_0x233a7a){return _0x233a7a&&_0x233a7a['__esModule']?_0x233a7a:{'default':_0x233a7a};};function a246_0x4948(_0x18e93d,_0x572f63){const _0x390c39=a246_0x1658();return a246_0x4948=function(_0x511f0f,_0x4feb16){_0x511f0f=_0x511f0f-0xbd;let _0x16581b=_0x390c39[_0x511f0f];return _0x16581b;},a246_0x4948(_0x18e93d,_0x572f63);}Object['defineProperty'](exports,a246_0x530d47(0xd9),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require('../internal/fs.internal'),xml_v2_1=require('../parsers/utils/xml-v2'),child_types_1=__importDefault(require(a246_0x530d47(0xce))),child_types_map_1=__importDefault(require('../parsers/data/child-types-map')),path_1=__importDefault(require(a246_0x530d47(0xd3))),base_remover_1=require('./base.remover');class MDApiRemover extends base_remover_1[a246_0x530d47(0xc9)]{constructor({components:_0x2a0f2f,sourceDir:_0x70a395}){const _0x4b159f=a246_0x530d47;super({'sourceDir':_0x70a395,'components':_0x2a0f2f},MDApiRemover[_0x4b159f(0xd4)]),this[_0x4b159f(0xde)]=_0x4b159f(0xca),this[_0x4b159f(0xee)]='site-meta.xml',this[_0x4b159f(0xcb)]=0x64,this[_0x4b159f(0xe7)]={};}async[a246_0x530d47(0xd1)](_0xa098b){const _0x2afb6b=a246_0x530d47,_0x1dd9e8=path_1[_0x2afb6b(0xc5)]['join'](this[_0x2afb6b(0xf2)],_0xa098b[_0x2afb6b(0xd3)]),_0x4c1a59=path_1[_0x2afb6b(0xc5)][_0x2afb6b(0xeb)](this[_0x2afb6b(0xf2)],''+_0xa098b[_0x2afb6b(0xd3)]+this[_0x2afb6b(0xde)]);this['parentComponents'][_0xa098b[_0x2afb6b(0xd3)]]&&delete this[_0x2afb6b(0xe7)][_0xa098b[_0x2afb6b(0xd3)]];const _0x355879=await fs_internal_1['FS']['isDir'](_0x1dd9e8)[_0x2afb6b(0xf0)](()=>![]);if(_0x355879){this['logger'][_0x2afb6b(0xf1)](_0x2afb6b(0xd5),_0x1dd9e8,_0xa098b[_0x2afb6b(0xdf)]),await fs_internal_1['FS'][_0x2afb6b(0xed)](_0x1dd9e8);_0xa098b[_0x2afb6b(0xdf)]===_0x2afb6b(0xdd)?await fs_internal_1['FS'][_0x2afb6b(0xcf)](''+_0x1dd9e8+this[_0x2afb6b(0xee)])['catch'](()=>void 0x0):(this[_0x2afb6b(0xe1)][_0x2afb6b(0xf1)]('Remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x1dd9e8,_0xa098b[_0x2afb6b(0xdf)]),await fs_internal_1['FS'][_0x2afb6b(0xcf)](''+_0x1dd9e8+this[_0x2afb6b(0xde)])[_0x2afb6b(0xf0)](()=>void 0x0));return;}this[_0x2afb6b(0xe1)][_0x2afb6b(0xf1)]('Remove\x20component\x20\x20%s\x20[%s]',_0x1dd9e8,_0xa098b[_0x2afb6b(0xdf)]),await Promise['all']([fs_internal_1['FS']['removeFile'](_0x1dd9e8),fs_internal_1['FS'][_0x2afb6b(0xcf)](_0x4c1a59)]);}async['removeChild'](_0x2f49eb){const _0x1e5af6=a246_0x530d47,{fileName:_0x28e90a,type:_0x3ea57b,path:_0x4f3a28}=_0x2f49eb,_0x132de2=child_types_map_1['default'][_0x3ea57b];if(!_0x132de2)throw new Error('Unknown\x20child\x20type\x20'+_0x3ea57b);if(!this[_0x1e5af6(0xe7)][_0x4f3a28]){const _0x3921ee=path_1[_0x1e5af6(0xc5)][_0x1e5af6(0xeb)](this[_0x1e5af6(0xf2)],_0x4f3a28),_0x758e47=await fs_internal_1['FS']['exists'](_0x3921ee);if(!_0x758e47)return;const _0x1c9ab3=await fs_internal_1['FS'][_0x1e5af6(0xc1)](_0x3921ee);this['parentComponents'][_0x4f3a28]=await xml_v2_1['XmlV2']['parse'](_0x1c9ab3);}const _0x39badc=this[_0x1e5af6(0xe7)][_0x4f3a28],_0x3a7868=_0x28e90a['split']('.')[_0x1e5af6(0xc0)]();xml_v2_1[_0x1e5af6(0xc4)]['removeAt'](_0x39badc,_0x132de2,_0x3a7868||_0x28e90a),xml_v2_1[_0x1e5af6(0xc4)][_0x1e5af6(0xdb)](_0x39badc)?(this[_0x1e5af6(0xe1)][_0x1e5af6(0xf1)](_0x1e5af6(0xd7),_0x2f49eb[_0x1e5af6(0xd3)],_0x2f49eb['fileName']),await this['removeParent'](_0x2f49eb),delete this[_0x1e5af6(0xe7)][_0x4f3a28]):this[_0x1e5af6(0xe7)][_0x4f3a28]=_0x39badc;}async['execute'](){const _0x10a320=a246_0x530d47;!await fs_internal_1['FS'][_0x10a320(0xe6)](this[_0x10a320(0xf2)])&&await fs_internal_1['FS'][_0x10a320(0xd2)](this['sourceDir']);for(const _0x1d6b1b of this['components']){!child_types_1[_0x10a320(0xc5)][_0x10a320(0xbe)](_0x1d6b1b[_0x10a320(0xdf)])?(this[_0x10a320(0xe1)]['log'](_0x10a320(0xcd),_0x1d6b1b['fileName'],_0x1d6b1b[_0x10a320(0xdf)]),await this[_0x10a320(0xd1)](_0x1d6b1b)):(this[_0x10a320(0xe1)][_0x10a320(0xf1)](_0x10a320(0xe4),_0x1d6b1b[_0x10a320(0xc3)],_0x1d6b1b[_0x10a320(0xdf)]),await this['removeChild'](_0x1d6b1b));}const _0x57c2f3=Object['keys'](this[_0x10a320(0xe7)]);this[_0x10a320(0xe1)][_0x10a320(0xf1)](_0x10a320(0xe8),this['components'][_0x10a320(0xef)]);while(_0x57c2f3[_0x10a320(0xef)]){const _0x162fec=_0x57c2f3['splice'](0x0,this[_0x10a320(0xcb)]);for(const _0x3e0311 of _0x162fec){await fs_internal_1['FS']['writeFile'](path_1[_0x10a320(0xc5)][_0x10a320(0xeb)](this[_0x10a320(0xf2)],_0x3e0311),xml_v2_1[_0x10a320(0xc4)][_0x10a320(0xe9)](this['parentComponents'][_0x3e0311]));}}this[_0x10a320(0xe7)]={};}}exports[a246_0x530d47(0xea)]=MDApiRemover;