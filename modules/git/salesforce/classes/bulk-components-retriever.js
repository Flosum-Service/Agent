const a257_0xa3fe07=a257_0x5546;function a257_0x4b54(){const _0x27fe19=['1239831DYIdbP','constructor','request','Logger','Component__r','Name','API','CompositeRetrieveData','retrieve','ParentId','312583OwDLmQ','name','12pGOsrd','retrieveAttachments','__esModule','Component__r.','Parent\x20record\x20(%s)\x20for\x20file\x20(%s)\x20was\x20not\x20found.','(((.+)+)+)+$','defineProperty','BulkXmlStreamParser','execute','QueryBuilder','Body','Component_Name__c','2396892oicQiJ','2iMmTBB','../../../../constants','length','get','Query','4SqQKmO','fileType','body','search','Bulk1RetrieveData','components','1697390HhdSHG','select','APPLICATION_XML','1619240aklTBd','@flosum/salesforce','error','logger','Component_History__c','4704455hzUDlU','Version__c','getIsDone','SalesforceConstants','ids','Attachment','from','209nvWhDH','FLOSUM_NAMESPACE','3160240DCMLiZ','retrieveComponents','BulkV1QueryContentType','where','../../../../core','ParentId\x20IN\x20(:ids)','splice','set','BulkComponentsRetriever','values'];a257_0x4b54=function(){return _0x27fe19;};return a257_0x4b54();}(function(_0x1ed0fa,_0x21a909){const _0x23d598=a257_0x5546,_0x249337=_0x1ed0fa();while(!![]){try{const _0x7d4b6c=parseInt(_0x23d598(0x189))/0x1*(-parseInt(_0x23d598(0x198))/0x2)+parseInt(_0x23d598(0x197))/0x3*(-parseInt(_0x23d598(0x19d))/0x4)+parseInt(_0x23d598(0x1a6))/0x5*(-parseInt(_0x23d598(0x18b))/0x6)+-parseInt(_0x23d598(0x1ab))/0x7+-parseInt(_0x23d598(0x1b4))/0x8+parseInt(_0x23d598(0x1be))/0x9+-parseInt(_0x23d598(0x1a3))/0xa*(-parseInt(_0x23d598(0x1b2))/0xb);if(_0x7d4b6c===_0x21a909)break;else _0x249337['push'](_0x249337['shift']());}catch(_0x5003ce){_0x249337['push'](_0x249337['shift']());}}}(a257_0x4b54,0x82f8e));const a257_0x5b04d6=(function(){let _0x33b9f0=!![];return function(_0x46d02b,_0x5c0614){const _0x97cfcc=_0x33b9f0?function(){if(_0x5c0614){const _0x1105ad=_0x5c0614['apply'](_0x46d02b,arguments);return _0x5c0614=null,_0x1105ad;}}:function(){};return _0x33b9f0=![],_0x97cfcc;};}()),a257_0x5356bb=a257_0x5b04d6(this,function(){const _0x2bbd38=a257_0x5546;return a257_0x5356bb['toString']()['search']('(((.+)+)+)+$')['toString']()[_0x2bbd38(0x180)](a257_0x5356bb)[_0x2bbd38(0x1a0)](_0x2bbd38(0x190));});a257_0x5356bb();'use strict';Object[a257_0xa3fe07(0x191)](exports,a257_0xa3fe07(0x18d),{'value':!![]}),exports[a257_0xa3fe07(0x1bc)]=void 0x0;function a257_0x5546(_0x260e58,_0x465008){const _0x46f1c3=a257_0x4b54();return a257_0x5546=function(_0x5356bb,_0x5b04d6){_0x5356bb=_0x5356bb-0x180;let _0x4b5402=_0x46f1c3[_0x5356bb];return _0x4b5402;},a257_0x5546(_0x260e58,_0x465008);}const salesforce_1=require(a257_0xa3fe07(0x1a7)),core_1=require(a257_0xa3fe07(0x1b8)),constants_1=require(a257_0xa3fe07(0x199)),BINARY_FIELDS=['Body'],MAX_IDS_CHUNK_LENGTH=0xfa0;class BulkComponentsRetriever{constructor({request:_0x4778cc,ids:_0x1b2ddb}){const _0x4802a8=a257_0xa3fe07;this[_0x4802a8(0x1a2)]=new Map(),this['request']=_0x4778cc,this[_0x4802a8(0x1af)]=_0x1b2ddb,this[_0x4802a8(0x1a9)]=new core_1[(_0x4802a8(0x182))](BulkComponentsRetriever[_0x4802a8(0x18a)]);}async[a257_0xa3fe07(0x1b5)](_0x36a8b1){const _0x3728e5=a257_0xa3fe07,_0x5c5866=new salesforce_1[(_0x3728e5(0x194))]()[_0x3728e5(0x1a4)]('Id',constants_1['FLOSUM_NAMESPACE']+_0x3728e5(0x18e)+constants_1['FLOSUM_NAMESPACE']+_0x3728e5(0x196),constants_1['FLOSUM_NAMESPACE']+_0x3728e5(0x1ac))[_0x3728e5(0x1b1)](constants_1[_0x3728e5(0x1b3)]+_0x3728e5(0x1aa))[_0x3728e5(0x1b7)]('Id\x20IN\x20(:ids)',{'ids':_0x36a8b1}),_0x67fc40=new salesforce_1[(_0x3728e5(0x186))]({'api':salesforce_1['SalesforceConstants'][_0x3728e5(0x185)],'queryBuilder':_0x5c5866,'instance':this[_0x3728e5(0x181)],'isTooling':![]});do{const {records:_0x694060}=await _0x67fc40['execute']();for(const _0xe0f762 of _0x694060){this[_0x3728e5(0x1a2)][_0x3728e5(0x1bb)](_0xe0f762['Id'],{'fileName':_0xe0f762[constants_1[_0x3728e5(0x1b3)]+_0x3728e5(0x183)][constants_1[_0x3728e5(0x1b3)]+_0x3728e5(0x196)],'fileType':'','body':'','version':_0xe0f762[constants_1[_0x3728e5(0x1b3)]+_0x3728e5(0x1ac)]});}}while(!_0x67fc40['getIsDone']());}async[a257_0xa3fe07(0x18c)](_0x201e74){const _0x1af948=a257_0xa3fe07,_0x3a9832=new salesforce_1[(_0x1af948(0x194))]()[_0x1af948(0x1a4)](_0x1af948(0x195),_0x1af948(0x184),_0x1af948(0x188))['from']('Attachment')[_0x1af948(0x1b7)](_0x1af948(0x1b9),{'ids':_0x201e74}),_0x1d926a=new salesforce_1[(_0x1af948(0x1a1))]({'instance':this[_0x1af948(0x181)],'api':salesforce_1[_0x1af948(0x1ae)][_0x1af948(0x185)],'pollInterval':0x1388,'queryBuilder':_0x3a9832,'objectName':_0x1af948(0x1b0),'contentType':salesforce_1[_0x1af948(0x1b6)][_0x1af948(0x1a5)],'jobOperation':salesforce_1['Bulk1JobOperation'][_0x1af948(0x19c)]});do{const _0x509756=await _0x1d926a[_0x1af948(0x193)]();if(!_0x509756)break;const _0x1f0c75=new salesforce_1[(_0x1af948(0x192))]({'binaryFields':BINARY_FIELDS});for await(const {Name:_0x38c6d4,ParentId:_0x431db2,Body:_0x1abfac}of _0x509756['pipe'](_0x1f0c75)){const _0x5aec3c=this[_0x1af948(0x1a2)][_0x1af948(0x19b)](_0x431db2);if(!_0x5aec3c){this[_0x1af948(0x1a9)][_0x1af948(0x1a8)](_0x1af948(0x18f),_0x431db2,_0x38c6d4);continue;}_0x5aec3c[_0x1af948(0x19f)]=_0x1abfac,_0x5aec3c[_0x1af948(0x19e)]=_0x38c6d4;}}while(!_0x1d926a[_0x1af948(0x1ad)]());}async[a257_0xa3fe07(0x187)](){const _0x1026b9=a257_0xa3fe07;do{const _0x296eb3=this[_0x1026b9(0x1af)][_0x1026b9(0x1ba)](0x0,MAX_IDS_CHUNK_LENGTH);await this[_0x1026b9(0x1b5)](_0x296eb3),await this[_0x1026b9(0x18c)](_0x296eb3);}while(this[_0x1026b9(0x1af)][_0x1026b9(0x19a)]);return[...this[_0x1026b9(0x1a2)][_0x1026b9(0x1bd)]()];}}exports[a257_0xa3fe07(0x1bc)]=BulkComponentsRetriever;