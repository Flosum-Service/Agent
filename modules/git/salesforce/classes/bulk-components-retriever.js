const a258_0x21a24b=a258_0x447c;(function(_0x2cf644,_0x23cc93){const _0x2653e4=a258_0x447c,_0x30ff13=_0x2cf644();while(!![]){try{const _0x209c1f=parseInt(_0x2653e4(0x19a))/0x1+-parseInt(_0x2653e4(0x1a8))/0x2+-parseInt(_0x2653e4(0x18c))/0x3+-parseInt(_0x2653e4(0x19b))/0x4+parseInt(_0x2653e4(0x1a9))/0x5*(parseInt(_0x2653e4(0x197))/0x6)+-parseInt(_0x2653e4(0x19e))/0x7*(-parseInt(_0x2653e4(0x1b0))/0x8)+parseInt(_0x2653e4(0x1b8))/0x9;if(_0x209c1f===_0x23cc93)break;else _0x30ff13['push'](_0x30ff13['shift']());}catch(_0x4a4cc4){_0x30ff13['push'](_0x30ff13['shift']());}}}(a258_0x5ac0,0x456ba));function a258_0x5ac0(){const _0x40458b=['Component_Name__c','102AAIcHm','logger','(((.+)+)+)+$','326653RZugHZ','1538464FYCkVy','../../../../constants','execute','1310519IDdmED','select','Body','apply','ParentId\x20IN\x20(:ids)','ParentId','components','BulkComponentsRetriever','length','Version__c','435174fBCVpB','51880HtEnNy','get','Id\x20IN\x20(:ids)','toString','splice','retrieveComponents','Attachment','16TYIfEp','retrieveAttachments','request','fileType','retrieve','Component__r','search','API','1356750LBoxxj','constructor','Name','CompositeRetrieveData','FLOSUM_NAMESPACE','Parent\x20record\x20(%s)\x20for\x20file\x20(%s)\x20was\x20not\x20found.','Bulk1JobOperation','set','../../../../core','Bulk1RetrieveData','@flosum/salesforce','BulkV1QueryContentType','values','425040DmMYXm','__esModule','ids','Query','BulkXmlStreamParser','body','QueryBuilder','SalesforceConstants','defineProperty','pipe'];a258_0x5ac0=function(){return _0x40458b;};return a258_0x5ac0();}const a258_0xb5a14=(function(){let _0x36fc92=!![];return function(_0x184d6d,_0x430169){const _0x5b2d2d=_0x36fc92?function(){const _0x5ee3dd=a258_0x447c;if(_0x430169){const _0x11c681=_0x430169[_0x5ee3dd(0x1a1)](_0x184d6d,arguments);return _0x430169=null,_0x11c681;}}:function(){};return _0x36fc92=![],_0x5b2d2d;};}()),a258_0x6fd8aa=a258_0xb5a14(this,function(){const _0x19ce35=a258_0x447c;return a258_0x6fd8aa[_0x19ce35(0x1ac)]()[_0x19ce35(0x1b6)](_0x19ce35(0x199))[_0x19ce35(0x1ac)]()[_0x19ce35(0x1b9)](a258_0x6fd8aa)[_0x19ce35(0x1b6)](_0x19ce35(0x199));});a258_0x6fd8aa();'use strict';Object[a258_0x21a24b(0x194)](exports,a258_0x21a24b(0x18d),{'value':!![]}),exports[a258_0x21a24b(0x1a5)]=void 0x0;function a258_0x447c(_0x112e6f,_0x490ed7){const _0x5ec0e5=a258_0x5ac0();return a258_0x447c=function(_0x6fd8aa,_0xb5a14){_0x6fd8aa=_0x6fd8aa-0x184;let _0x5ac093=_0x5ec0e5[_0x6fd8aa];return _0x5ac093;},a258_0x447c(_0x112e6f,_0x490ed7);}const salesforce_1=require(a258_0x21a24b(0x189)),core_1=require(a258_0x21a24b(0x187)),constants_1=require(a258_0x21a24b(0x19c)),BINARY_FIELDS=['Body'],MAX_IDS_CHUNK_LENGTH=0xfa0;class BulkComponentsRetriever{constructor({request:_0x3e29ef,ids:_0x36e92f}){const _0xf78149=a258_0x21a24b;this['components']=new Map(),this[_0xf78149(0x1b2)]=_0x3e29ef,this[_0xf78149(0x18e)]=_0x36e92f,this['logger']=new core_1['Logger'](BulkComponentsRetriever['name']);}async[a258_0x21a24b(0x1ae)](_0x117e66){const _0x17a231=a258_0x21a24b,_0x4b2980=new salesforce_1[(_0x17a231(0x192))]()[_0x17a231(0x19f)]('Id',constants_1[_0x17a231(0x1bc)]+'Component__r.'+constants_1[_0x17a231(0x1bc)]+'Component_Name__c',constants_1['FLOSUM_NAMESPACE']+'Version__c')['from'](constants_1['FLOSUM_NAMESPACE']+'Component_History__c')['where'](_0x17a231(0x1ab),{'ids':_0x117e66}),_0x4a5c10=new salesforce_1[(_0x17a231(0x1bb))]({'api':salesforce_1[_0x17a231(0x193)][_0x17a231(0x1b7)],'queryBuilder':_0x4b2980,'instance':this[_0x17a231(0x1b2)],'isTooling':![]});do{const {records:_0x27c5e1}=await _0x4a5c10['execute']();for(const _0x2674e0 of _0x27c5e1){this['components'][_0x17a231(0x186)](_0x2674e0['Id'],{'fileName':_0x2674e0[constants_1[_0x17a231(0x1bc)]+_0x17a231(0x1b5)][constants_1[_0x17a231(0x1bc)]+_0x17a231(0x196)],'fileType':'','body':'','version':_0x2674e0[constants_1[_0x17a231(0x1bc)]+_0x17a231(0x1a7)]});}}while(!_0x4a5c10['getIsDone']());}async[a258_0x21a24b(0x1b1)](_0x232275){const _0x167720=a258_0x21a24b,_0x2d09e2=new salesforce_1[(_0x167720(0x192))]()['select'](_0x167720(0x1a0),_0x167720(0x1ba),_0x167720(0x1a3))['from'](_0x167720(0x1af))['where'](_0x167720(0x1a2),{'ids':_0x232275}),_0x32f2b8=new salesforce_1[(_0x167720(0x188))]({'instance':this[_0x167720(0x1b2)],'api':salesforce_1[_0x167720(0x193)][_0x167720(0x1b7)],'pollInterval':0x1388,'queryBuilder':_0x2d09e2,'objectName':_0x167720(0x1af),'contentType':salesforce_1[_0x167720(0x18a)]['APPLICATION_XML'],'jobOperation':salesforce_1[_0x167720(0x185)][_0x167720(0x18f)]});do{const _0x531f8f=await _0x32f2b8[_0x167720(0x19d)]();if(!_0x531f8f)break;const _0x5b06b0=new salesforce_1[(_0x167720(0x190))]({'binaryFields':BINARY_FIELDS});for await(const {Name:_0x5c6eb1,ParentId:_0x35d535,Body:_0xd152fb}of _0x531f8f[_0x167720(0x195)](_0x5b06b0)){const _0x18d36d=this['components'][_0x167720(0x1aa)](_0x35d535);if(!_0x18d36d){this[_0x167720(0x198)]['error'](_0x167720(0x184),_0x35d535,_0x5c6eb1);continue;}_0x18d36d[_0x167720(0x191)]=_0xd152fb,_0x18d36d[_0x167720(0x1b3)]=_0x5c6eb1;}}while(!_0x32f2b8['getIsDone']());}async[a258_0x21a24b(0x1b4)](){const _0x4877a7=a258_0x21a24b;do{const _0x3ea505=this[_0x4877a7(0x18e)][_0x4877a7(0x1ad)](0x0,MAX_IDS_CHUNK_LENGTH);await this['retrieveComponents'](_0x3ea505),await this[_0x4877a7(0x1b1)](_0x3ea505);}while(this[_0x4877a7(0x18e)][_0x4877a7(0x1a6)]);return[...this[_0x4877a7(0x1a4)][_0x4877a7(0x18b)]()];}}exports[a258_0x21a24b(0x1a5)]=BulkComponentsRetriever;