const a257_0x1bc86=a257_0x43b9;(function(_0x509cad,_0xabcf43){const _0x8c6d60=a257_0x43b9,_0x42d787=_0x509cad();while(!![]){try{const _0x47f949=parseInt(_0x8c6d60(0xac))/0x1*(-parseInt(_0x8c6d60(0xb9))/0x2)+-parseInt(_0x8c6d60(0x90))/0x3*(parseInt(_0x8c6d60(0x89))/0x4)+-parseInt(_0x8c6d60(0xab))/0x5+parseInt(_0x8c6d60(0xa6))/0x6+parseInt(_0x8c6d60(0x97))/0x7*(parseInt(_0x8c6d60(0x99))/0x8)+parseInt(_0x8c6d60(0xbb))/0x9+parseInt(_0x8c6d60(0xb2))/0xa;if(_0x47f949===_0xabcf43)break;else _0x42d787['push'](_0x42d787['shift']());}catch(_0x11985c){_0x42d787['push'](_0x42d787['shift']());}}}(a257_0x1dea,0x7bfdb));const a257_0x532cbb=(function(){let _0x255f98=!![];return function(_0x2279b7,_0x52a082){const _0x39dc7e=_0x255f98?function(){const _0x38c8f9=a257_0x43b9;if(_0x52a082){const _0x39c031=_0x52a082[_0x38c8f9(0x8a)](_0x2279b7,arguments);return _0x52a082=null,_0x39c031;}}:function(){};return _0x255f98=![],_0x39dc7e;};}()),a257_0x5665c8=a257_0x532cbb(this,function(){const _0x11a1e8=a257_0x43b9;return a257_0x5665c8['toString']()[_0x11a1e8(0xa5)](_0x11a1e8(0x92))[_0x11a1e8(0xba)]()[_0x11a1e8(0x8d)](a257_0x5665c8)[_0x11a1e8(0xa5)](_0x11a1e8(0x92));});function a257_0x1dea(){const _0x4326de=['defineProperty','24TYZRho','logger','(((.+)+)+)+$','splice','BulkXmlStreamParser','Query','body','27223JatQKi','API','216UBUXZY','CompositeRetrieveData','../../../../constants','Logger','__esModule','Bulk1JobOperation','fileType','name','APPLICATION_XML','execute','select','request','search','1052586kuysSG','from','retrieveComponents','ids','SalesforceConstants','792775qpzCZg','109999dtQVlr','../../../../core','where','ParentId','Attachment','retrieveAttachments','10611650AjHeCC','Component__r','components','FLOSUM_NAMESPACE','Version__c','BulkComponentsRetriever','Body','8eFZOYB','toString','6075315ILSAKG','Component_History__c','Component__r.','getIsDone','QueryBuilder','455108HQxAja','apply','BulkV1QueryContentType','Bulk1RetrieveData','constructor','pipe'];a257_0x1dea=function(){return _0x4326de;};return a257_0x1dea();}a257_0x5665c8();'use strict';Object[a257_0x1bc86(0x8f)](exports,a257_0x1bc86(0x9d),{'value':!![]}),exports[a257_0x1bc86(0xb7)]=void 0x0;const salesforce_1=require('@flosum/salesforce'),core_1=require(a257_0x1bc86(0xad)),constants_1=require(a257_0x1bc86(0x9b)),BINARY_FIELDS=[a257_0x1bc86(0xb8)],MAX_IDS_CHUNK_LENGTH=0xfa0;class BulkComponentsRetriever{constructor({request:_0x1949a2,ids:_0x513392}){const _0x790a38=a257_0x1bc86;this[_0x790a38(0xb4)]=new Map(),this['request']=_0x1949a2,this[_0x790a38(0xa9)]=_0x513392,this[_0x790a38(0x91)]=new core_1[(_0x790a38(0x9c))](BulkComponentsRetriever[_0x790a38(0xa0)]);}async[a257_0x1bc86(0xa8)](_0x5e8e76){const _0x5add11=a257_0x1bc86,_0x2b8bad=new salesforce_1[(_0x5add11(0xbf))]()[_0x5add11(0xa3)]('Id',constants_1[_0x5add11(0xb5)]+_0x5add11(0xbd)+constants_1['FLOSUM_NAMESPACE']+'Component_Name__c',constants_1[_0x5add11(0xb5)]+_0x5add11(0xb6))[_0x5add11(0xa7)](constants_1[_0x5add11(0xb5)]+_0x5add11(0xbc))[_0x5add11(0xae)]('Id\x20IN\x20(:ids)',{'ids':_0x5e8e76}),_0x33dc64=new salesforce_1[(_0x5add11(0x9a))]({'api':salesforce_1[_0x5add11(0xaa)][_0x5add11(0x98)],'queryBuilder':_0x2b8bad,'instance':this[_0x5add11(0xa4)],'isTooling':![]});do{const {records:_0x121841}=await _0x33dc64['execute']();for(const _0x46a655 of _0x121841){this[_0x5add11(0xb4)]['set'](_0x46a655['Id'],{'fileName':_0x46a655[constants_1[_0x5add11(0xb5)]+_0x5add11(0xb3)][constants_1[_0x5add11(0xb5)]+'Component_Name__c'],'fileType':'','body':'','version':_0x46a655[constants_1[_0x5add11(0xb5)]+'Version__c']});}}while(!_0x33dc64[_0x5add11(0xbe)]());}async[a257_0x1bc86(0xb1)](_0x49f93d){const _0x15653e=a257_0x1bc86,_0x50a7aa=new salesforce_1['QueryBuilder']()[_0x15653e(0xa3)](_0x15653e(0xb8),'Name',_0x15653e(0xaf))[_0x15653e(0xa7)](_0x15653e(0xb0))[_0x15653e(0xae)]('ParentId\x20IN\x20(:ids)',{'ids':_0x49f93d}),_0x329a1a=new salesforce_1[(_0x15653e(0x8c))]({'instance':this[_0x15653e(0xa4)],'api':salesforce_1['SalesforceConstants'][_0x15653e(0x98)],'pollInterval':0x1388,'queryBuilder':_0x50a7aa,'objectName':_0x15653e(0xb0),'contentType':salesforce_1[_0x15653e(0x8b)][_0x15653e(0xa1)],'jobOperation':salesforce_1[_0x15653e(0x9e)][_0x15653e(0x95)]});do{const _0x3b4210=await _0x329a1a[_0x15653e(0xa2)]();if(!_0x3b4210)break;const _0x57ba73=new salesforce_1[(_0x15653e(0x94))]({'binaryFields':BINARY_FIELDS});for await(const {Name:_0x38a5d9,ParentId:_0x5dcf8d,Body:_0x29325a}of _0x3b4210[_0x15653e(0x8e)](_0x57ba73)){const _0x3413fd=this['components']['get'](_0x5dcf8d);if(!_0x3413fd){this[_0x15653e(0x91)]['error']('Parent\x20record\x20(%s)\x20for\x20file\x20(%s)\x20was\x20not\x20found.',_0x5dcf8d,_0x38a5d9);continue;}_0x3413fd[_0x15653e(0x96)]=_0x29325a,_0x3413fd[_0x15653e(0x9f)]=_0x38a5d9;}}while(!_0x329a1a[_0x15653e(0xbe)]());}async['retrieve'](){const _0x148db5=a257_0x1bc86;do{const _0x5d18e4=this['ids'][_0x148db5(0x93)](0x0,MAX_IDS_CHUNK_LENGTH);await this[_0x148db5(0xa8)](_0x5d18e4),await this[_0x148db5(0xb1)](_0x5d18e4);}while(this['ids']['length']);return[...this[_0x148db5(0xb4)]['values']()];}}function a257_0x43b9(_0xd88ec,_0xc90ae4){const _0x1e9047=a257_0x1dea();return a257_0x43b9=function(_0x5665c8,_0x532cbb){_0x5665c8=_0x5665c8-0x89;let _0x1dea87=_0x1e9047[_0x5665c8];return _0x1dea87;},a257_0x43b9(_0xd88ec,_0xc90ae4);}exports[a257_0x1bc86(0xb7)]=BulkComponentsRetriever;