const a258_0x25afb2=a258_0x54b2;(function(_0x543c41,_0xcf9f95){const _0x1c5c0d=a258_0x54b2,_0x391d2a=_0x543c41();while(!![]){try{const _0x3c1bac=parseInt(_0x1c5c0d(0x214))/0x1+parseInt(_0x1c5c0d(0x1f4))/0x2+parseInt(_0x1c5c0d(0x225))/0x3+parseInt(_0x1c5c0d(0x226))/0x4*(parseInt(_0x1c5c0d(0x1ff))/0x5)+-parseInt(_0x1c5c0d(0x221))/0x6*(parseInt(_0x1c5c0d(0x220))/0x7)+parseInt(_0x1c5c0d(0x22a))/0x8*(parseInt(_0x1c5c0d(0x21c))/0x9)+-parseInt(_0x1c5c0d(0x202))/0xa;if(_0x3c1bac===_0xcf9f95)break;else _0x391d2a['push'](_0x391d2a['shift']());}catch(_0x38d104){_0x391d2a['push'](_0x391d2a['shift']());}}}(a258_0x37ef,0xf0480));const a258_0x4efa1a=(function(){let _0x41bdfc=!![];return function(_0x4e4501,_0x13b15b){const _0x476f39=_0x41bdfc?function(){if(_0x13b15b){const _0x57422f=_0x13b15b['apply'](_0x4e4501,arguments);return _0x13b15b=null,_0x57422f;}}:function(){};return _0x41bdfc=![],_0x476f39;};}()),a258_0x13b8f1=a258_0x4efa1a(this,function(){const _0x103a49=a258_0x54b2;return a258_0x13b8f1[_0x103a49(0x1f8)]()[_0x103a49(0x204)](_0x103a49(0x218))[_0x103a49(0x1f8)]()['constructor'](a258_0x13b8f1)[_0x103a49(0x204)](_0x103a49(0x218));});a258_0x13b8f1();'use strict';Object[a258_0x25afb2(0x228)](exports,a258_0x25afb2(0x223),{'value':!![]}),exports['BulkComponentsRetriever']=void 0x0;const salesforce_1=require(a258_0x25afb2(0x211)),core_1=require(a258_0x25afb2(0x229)),constants_1=require(a258_0x25afb2(0x227)),BINARY_FIELDS=[a258_0x25afb2(0x1fe)],MAX_IDS_CHUNK_LENGTH=0xfa0;function a258_0x37ef(){const _0x4092db=['select','APPLICATION_XML','Attachment','toString','from','Name','Version__c','API','BulkV1QueryContentType','Body','25195jiSGFF','ids','Component_History__c','56913070osWxzj','BulkXmlStreamParser','search','pipe','request','values','execute','where','Parent\x20record\x20(%s)\x20for\x20file\x20(%s)\x20was\x20not\x20found.','logger','CompositeRetrieveData','QueryBuilder','retrieveComponents','body','FLOSUM_NAMESPACE','@flosum/salesforce','set','Id\x20IN\x20(:ids)','1554592PPzDoZ','BulkComponentsRetriever','Component__r.','splice','(((.+)+)+)+$','error','Bulk1RetrieveData','Component_Name__c','16236108fidKLw','components','get','getIsDone','70XaPzwE','390174EsRlSg','Bulk1JobOperation','__esModule','length','5334702dlYhHB','748WrfoWa','../../../../constants','defineProperty','../../../../core','8WjJDOI','ParentId','retrieveAttachments','SalesforceConstants','2493316OYHjCN'];a258_0x37ef=function(){return _0x4092db;};return a258_0x37ef();}class BulkComponentsRetriever{constructor({request:_0x21ed1f,ids:_0x4a986f}){const _0x5f18aa=a258_0x25afb2;this['components']=new Map(),this[_0x5f18aa(0x206)]=_0x21ed1f,this['ids']=_0x4a986f,this['logger']=new core_1['Logger'](BulkComponentsRetriever['name']);}async[a258_0x25afb2(0x20e)](_0x1c5531){const _0x27a9b2=a258_0x25afb2,_0x506196=new salesforce_1[(_0x27a9b2(0x20d))]()[_0x27a9b2(0x1f5)]('Id',constants_1[_0x27a9b2(0x210)]+_0x27a9b2(0x216)+constants_1[_0x27a9b2(0x210)]+_0x27a9b2(0x21b),constants_1[_0x27a9b2(0x210)]+_0x27a9b2(0x1fb))[_0x27a9b2(0x1f9)](constants_1[_0x27a9b2(0x210)]+_0x27a9b2(0x201))['where'](_0x27a9b2(0x213),{'ids':_0x1c5531}),_0x3c3b37=new salesforce_1[(_0x27a9b2(0x20c))]({'api':salesforce_1['SalesforceConstants'][_0x27a9b2(0x1fc)],'queryBuilder':_0x506196,'instance':this[_0x27a9b2(0x206)],'isTooling':![]});do{const {records:_0x4c62f9}=await _0x3c3b37['execute']();for(const _0x5d8fde of _0x4c62f9){this[_0x27a9b2(0x21d)][_0x27a9b2(0x212)](_0x5d8fde['Id'],{'fileName':_0x5d8fde[constants_1[_0x27a9b2(0x210)]+'Component__r'][constants_1[_0x27a9b2(0x210)]+_0x27a9b2(0x21b)],'fileType':'','body':'','version':_0x5d8fde[constants_1['FLOSUM_NAMESPACE']+'Version__c']});}}while(!_0x3c3b37['getIsDone']());}async[a258_0x25afb2(0x22c)](_0x23f7de){const _0x43e556=a258_0x25afb2,_0x238fcb=new salesforce_1['QueryBuilder']()['select'](_0x43e556(0x1fe),_0x43e556(0x1fa),_0x43e556(0x22b))[_0x43e556(0x1f9)](_0x43e556(0x1f7))[_0x43e556(0x209)]('ParentId\x20IN\x20(:ids)',{'ids':_0x23f7de}),_0x4d7903=new salesforce_1[(_0x43e556(0x21a))]({'instance':this[_0x43e556(0x206)],'api':salesforce_1[_0x43e556(0x1f3)][_0x43e556(0x1fc)],'pollInterval':0x1388,'queryBuilder':_0x238fcb,'objectName':'Attachment','contentType':salesforce_1[_0x43e556(0x1fd)][_0x43e556(0x1f6)],'jobOperation':salesforce_1[_0x43e556(0x222)]['Query']});do{const _0x9e544a=await _0x4d7903[_0x43e556(0x208)]();if(!_0x9e544a)break;const _0x37aee8=new salesforce_1[(_0x43e556(0x203))]({'binaryFields':BINARY_FIELDS});for await(const {Name:_0x38c281,ParentId:_0x10e651,Body:_0x4c0a1c}of _0x9e544a[_0x43e556(0x205)](_0x37aee8)){const _0x7c00=this[_0x43e556(0x21d)][_0x43e556(0x21e)](_0x10e651);if(!_0x7c00){this[_0x43e556(0x20b)][_0x43e556(0x219)](_0x43e556(0x20a),_0x10e651,_0x38c281);continue;}_0x7c00[_0x43e556(0x20f)]=_0x4c0a1c,_0x7c00['fileType']=_0x38c281;}}while(!_0x4d7903[_0x43e556(0x21f)]());}async['retrieve'](){const _0x3f941b=a258_0x25afb2;do{const _0x348d3f=this[_0x3f941b(0x200)][_0x3f941b(0x217)](0x0,MAX_IDS_CHUNK_LENGTH);await this[_0x3f941b(0x20e)](_0x348d3f),await this['retrieveAttachments'](_0x348d3f);}while(this[_0x3f941b(0x200)][_0x3f941b(0x224)]);return[...this[_0x3f941b(0x21d)][_0x3f941b(0x207)]()];}}function a258_0x54b2(_0x5957c8,_0x2fa8fb){const _0x5a461f=a258_0x37ef();return a258_0x54b2=function(_0x13b8f1,_0x4efa1a){_0x13b8f1=_0x13b8f1-0x1f3;let _0x37efc2=_0x5a461f[_0x13b8f1];return _0x37efc2;},a258_0x54b2(_0x5957c8,_0x2fa8fb);}exports[a258_0x25afb2(0x215)]=BulkComponentsRetriever;