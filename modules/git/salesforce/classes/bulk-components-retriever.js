const a257_0x54c9e9=a257_0xca37;function a257_0x1cd9(){const _0x2b3194=['toString','API','../../../../constants','Component__r.','fileType','Component_History__c','3497010gCLugU','Parent\x20record\x20(%s)\x20for\x20file\x20(%s)\x20was\x20not\x20found.','18NWZdsz','length','7501293RtXNku','2911115hqRHot','constructor','splice','Component__r','select','ParentId\x20IN\x20(:ids)','APPLICATION_XML','Logger','499641oaFrfW','name','error','Version__c','getIsDone','components','CompositeRetrieveData','from','BulkComponentsRetriever','defineProperty','execute','Query','BulkV1QueryContentType','20bchRRZ','ParentId','ids','Component_Name__c','apply','161tQkTGq','../../../../core','Name','values','Attachment','1136WEZhOS','Bulk1JobOperation','@flosum/salesforce','search','(((.+)+)+)+$','retrieve','Body','request','set','Bulk1RetrieveData','2574mkmZaQ','16963780tEFtVc','SalesforceConstants','FLOSUM_NAMESPACE','Id\x20IN\x20(:ids)','retrieveComponents','QueryBuilder','66367IkQaac'];a257_0x1cd9=function(){return _0x2b3194;};return a257_0x1cd9();}(function(_0x1c528f,_0x441244){const _0x52cc56=a257_0xca37,_0x22e1be=_0x1c528f();while(!![]){try{const _0x10896e=parseInt(_0x52cc56(0xf3))/0x1*(parseInt(_0x52cc56(0x102))/0x2)+parseInt(_0x52cc56(0xe1))/0x3*(-parseInt(_0x52cc56(0xee))/0x4)+parseInt(_0x52cc56(0x115))/0x5*(parseInt(_0x52cc56(0x112))/0x6)+parseInt(_0x52cc56(0x109))/0x7*(-parseInt(_0x52cc56(0xf8))/0x8)+-parseInt(_0x52cc56(0x114))/0x9+parseInt(_0x52cc56(0x103))/0xa+parseInt(_0x52cc56(0x110))/0xb;if(_0x10896e===_0x441244)break;else _0x22e1be['push'](_0x22e1be['shift']());}catch(_0x571039){_0x22e1be['push'](_0x22e1be['shift']());}}}(a257_0x1cd9,0xe9502));const a257_0x815543=(function(){let _0x296f6b=!![];return function(_0x59e035,_0x193f52){const _0x442cab=_0x296f6b?function(){const _0x45c638=a257_0xca37;if(_0x193f52){const _0x54f023=_0x193f52[_0x45c638(0xf2)](_0x59e035,arguments);return _0x193f52=null,_0x54f023;}}:function(){};return _0x296f6b=![],_0x442cab;};}()),a257_0x4632c7=a257_0x815543(this,function(){const _0x2a30eb=a257_0xca37;return a257_0x4632c7[_0x2a30eb(0x10a)]()['search'](_0x2a30eb(0xfc))[_0x2a30eb(0x10a)]()[_0x2a30eb(0xda)](a257_0x4632c7)[_0x2a30eb(0xfb)](_0x2a30eb(0xfc));});a257_0x4632c7();'use strict';Object[a257_0x54c9e9(0xea)](exports,'__esModule',{'value':!![]}),exports[a257_0x54c9e9(0xe9)]=void 0x0;function a257_0xca37(_0x36b486,_0x32256a){const _0xe7a3b0=a257_0x1cd9();return a257_0xca37=function(_0x4632c7,_0x815543){_0x4632c7=_0x4632c7-0xda;let _0x1cd99b=_0xe7a3b0[_0x4632c7];return _0x1cd99b;},a257_0xca37(_0x36b486,_0x32256a);}const salesforce_1=require(a257_0x54c9e9(0xfa)),core_1=require(a257_0x54c9e9(0xf4)),constants_1=require(a257_0x54c9e9(0x10c)),BINARY_FIELDS=[a257_0x54c9e9(0xfe)],MAX_IDS_CHUNK_LENGTH=0xfa0;class BulkComponentsRetriever{constructor({request:_0x2a6b87,ids:_0x570e4e}){const _0x274230=a257_0x54c9e9;this[_0x274230(0xe6)]=new Map(),this[_0x274230(0xff)]=_0x2a6b87,this[_0x274230(0xf0)]=_0x570e4e,this['logger']=new core_1[(_0x274230(0xe0))](BulkComponentsRetriever[_0x274230(0xe2)]);}async[a257_0x54c9e9(0x107)](_0xcc99a0){const _0x3beb31=a257_0x54c9e9,_0x4b4864=new salesforce_1[(_0x3beb31(0x108))]()[_0x3beb31(0xdd)]('Id',constants_1[_0x3beb31(0x105)]+_0x3beb31(0x10d)+constants_1[_0x3beb31(0x105)]+'Component_Name__c',constants_1[_0x3beb31(0x105)]+'Version__c')['from'](constants_1['FLOSUM_NAMESPACE']+_0x3beb31(0x10f))['where'](_0x3beb31(0x106),{'ids':_0xcc99a0}),_0xc6d8cf=new salesforce_1[(_0x3beb31(0xe7))]({'api':salesforce_1[_0x3beb31(0x104)][_0x3beb31(0x10b)],'queryBuilder':_0x4b4864,'instance':this[_0x3beb31(0xff)],'isTooling':![]});do{const {records:_0xe1c72}=await _0xc6d8cf[_0x3beb31(0xeb)]();for(const _0x513c34 of _0xe1c72){this[_0x3beb31(0xe6)][_0x3beb31(0x100)](_0x513c34['Id'],{'fileName':_0x513c34[constants_1[_0x3beb31(0x105)]+_0x3beb31(0xdc)][constants_1[_0x3beb31(0x105)]+_0x3beb31(0xf1)],'fileType':'','body':'','version':_0x513c34[constants_1['FLOSUM_NAMESPACE']+_0x3beb31(0xe4)]});}}while(!_0xc6d8cf[_0x3beb31(0xe5)]());}async['retrieveAttachments'](_0x33d799){const _0x44c235=a257_0x54c9e9,_0x547d01=new salesforce_1[(_0x44c235(0x108))]()[_0x44c235(0xdd)]('Body',_0x44c235(0xf5),_0x44c235(0xef))[_0x44c235(0xe8)](_0x44c235(0xf7))['where'](_0x44c235(0xde),{'ids':_0x33d799}),_0x1d2532=new salesforce_1[(_0x44c235(0x101))]({'instance':this[_0x44c235(0xff)],'api':salesforce_1['SalesforceConstants'][_0x44c235(0x10b)],'pollInterval':0x1388,'queryBuilder':_0x547d01,'objectName':_0x44c235(0xf7),'contentType':salesforce_1[_0x44c235(0xed)][_0x44c235(0xdf)],'jobOperation':salesforce_1[_0x44c235(0xf9)][_0x44c235(0xec)]});do{const _0x43974=await _0x1d2532[_0x44c235(0xeb)]();if(!_0x43974)break;const _0x351603=new salesforce_1['BulkXmlStreamParser']({'binaryFields':BINARY_FIELDS});for await(const {Name:_0xb4d415,ParentId:_0x343d23,Body:_0x5b78f6}of _0x43974['pipe'](_0x351603)){const _0x54e8d3=this['components']['get'](_0x343d23);if(!_0x54e8d3){this['logger'][_0x44c235(0xe3)](_0x44c235(0x111),_0x343d23,_0xb4d415);continue;}_0x54e8d3['body']=_0x5b78f6,_0x54e8d3[_0x44c235(0x10e)]=_0xb4d415;}}while(!_0x1d2532[_0x44c235(0xe5)]());}async[a257_0x54c9e9(0xfd)](){const _0x296b2a=a257_0x54c9e9;do{const _0x37334f=this[_0x296b2a(0xf0)][_0x296b2a(0xdb)](0x0,MAX_IDS_CHUNK_LENGTH);await this['retrieveComponents'](_0x37334f),await this['retrieveAttachments'](_0x37334f);}while(this[_0x296b2a(0xf0)][_0x296b2a(0x113)]);return[...this[_0x296b2a(0xe6)][_0x296b2a(0xf6)]()];}}exports[a257_0x54c9e9(0xe9)]=BulkComponentsRetriever;