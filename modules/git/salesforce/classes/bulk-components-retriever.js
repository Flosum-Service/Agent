const a247_0x5cdf04=a247_0x37f5;function a247_0x37f5(_0x4a29f6,_0x5dcafc){const _0xdc9bf=a247_0x3e2d();return a247_0x37f5=function(_0x16157a,_0x180139){_0x16157a=_0x16157a-0xb6;let _0x3e2d56=_0xdc9bf[_0x16157a];return _0x3e2d56;},a247_0x37f5(_0x4a29f6,_0x5dcafc);}(function(_0x24f5fd,_0x52ac2c){const _0x198264=a247_0x37f5,_0x174ab8=_0x24f5fd();while(!![]){try{const _0x19c819=-parseInt(_0x198264(0xc2))/0x1*(parseInt(_0x198264(0xdc))/0x2)+-parseInt(_0x198264(0xd7))/0x3+-parseInt(_0x198264(0xd5))/0x4+-parseInt(_0x198264(0xde))/0x5*(parseInt(_0x198264(0xc5))/0x6)+-parseInt(_0x198264(0xd3))/0x7+-parseInt(_0x198264(0xc8))/0x8+parseInt(_0x198264(0xc3))/0x9*(parseInt(_0x198264(0xbd))/0xa);if(_0x19c819===_0x52ac2c)break;else _0x174ab8['push'](_0x174ab8['shift']());}catch(_0x3faf45){_0x174ab8['push'](_0x174ab8['shift']());}}}(a247_0x3e2d,0x6ac3e));function a247_0x3e2d(){const _0x2e093f=['retrieveComponents','apply','SalesforceConstants','ParentId','@flosum/salesforce','Version__c','request','length','APPLICATION_XML','BulkComponentsRetriever','Logger','toString','fileType','QueryBuilder','Bulk1JobOperation','from','499080cvCIzp','logger','Body','get','getIsDone','175hZloQs','495ArBUtq','retrieve','48tzJDNg','../../../../constants','(((.+)+)+)+$','347728HVUoRi','ParentId\x20IN\x20(:ids)','FLOSUM_NAMESPACE','components','execute','splice','select','Attachment','API','pipe','Bulk1RetrieveData','5556145moojzO','Component__r.','3095812odPTxJ','ids','1389615tuFOkP','retrieveAttachments','Name','search','name','226oUxGOt','Component_Name__c','133435RPxEjE','../../../../core','Query','BulkXmlStreamParser','where'];a247_0x3e2d=function(){return _0x2e093f;};return a247_0x3e2d();}const a247_0x180139=(function(){let _0x3cc78a=!![];return function(_0x4f9ac4,_0xed960e){const _0x1d566b=_0x3cc78a?function(){const _0x3e1cb8=a247_0x37f5;if(_0xed960e){const _0x4d66dc=_0xed960e[_0x3e1cb8(0xe4)](_0x4f9ac4,arguments);return _0xed960e=null,_0x4d66dc;}}:function(){};return _0x3cc78a=![],_0x1d566b;};}()),a247_0x16157a=a247_0x180139(this,function(){const _0x4be1e9=a247_0x37f5;return a247_0x16157a[_0x4be1e9(0xb8)]()['search'](_0x4be1e9(0xc7))['toString']()['constructor'](a247_0x16157a)[_0x4be1e9(0xda)](_0x4be1e9(0xc7));});a247_0x16157a();'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a247_0x5cdf04(0xb6)]=void 0x0;const salesforce_1=require(a247_0x5cdf04(0xe7)),core_1=require(a247_0x5cdf04(0xdf)),constants_1=require(a247_0x5cdf04(0xc6)),BINARY_FIELDS=[a247_0x5cdf04(0xbf)],MAX_IDS_CHUNK_LENGTH=0xfa0;class BulkComponentsRetriever{constructor({request:_0x10b9af,ids:_0x501313}){const _0x1eaa12=a247_0x5cdf04;this[_0x1eaa12(0xcb)]=new Map(),this['request']=_0x10b9af,this[_0x1eaa12(0xd6)]=_0x501313,this[_0x1eaa12(0xbe)]=new core_1[(_0x1eaa12(0xb7))](BulkComponentsRetriever[_0x1eaa12(0xdb)]);}async[a247_0x5cdf04(0xe3)](_0x5f0336){const _0x3a3623=a247_0x5cdf04,_0x2f5f96=new salesforce_1[(_0x3a3623(0xba))]()[_0x3a3623(0xce)]('Id',constants_1[_0x3a3623(0xca)]+_0x3a3623(0xd4)+constants_1[_0x3a3623(0xca)]+_0x3a3623(0xdd),constants_1[_0x3a3623(0xca)]+_0x3a3623(0xe8))[_0x3a3623(0xbc)](constants_1[_0x3a3623(0xca)]+'Component_History__c')[_0x3a3623(0xe2)]('Id\x20IN\x20(:ids)',{'ids':_0x5f0336}),_0x3a84f0=new salesforce_1['CompositeRetrieveData']({'api':salesforce_1[_0x3a3623(0xe5)][_0x3a3623(0xd0)],'queryBuilder':_0x2f5f96,'instance':this['request'],'isTooling':![]});do{const {records:_0x471eff}=await _0x3a84f0[_0x3a3623(0xcc)]();for(const _0x287861 of _0x471eff){this[_0x3a3623(0xcb)]['set'](_0x287861['Id'],{'fileName':_0x287861[constants_1[_0x3a3623(0xca)]+'Component__r'][constants_1[_0x3a3623(0xca)]+_0x3a3623(0xdd)],'fileType':'','body':'','version':_0x287861[constants_1['FLOSUM_NAMESPACE']+_0x3a3623(0xe8)]});}}while(!_0x3a84f0['getIsDone']());}async[a247_0x5cdf04(0xd8)](_0xa283ff){const _0xc5fb07=a247_0x5cdf04,_0x15563e=new salesforce_1[(_0xc5fb07(0xba))]()[_0xc5fb07(0xce)](_0xc5fb07(0xbf),_0xc5fb07(0xd9),_0xc5fb07(0xe6))[_0xc5fb07(0xbc)](_0xc5fb07(0xcf))['where'](_0xc5fb07(0xc9),{'ids':_0xa283ff}),_0x5a75d6=new salesforce_1[(_0xc5fb07(0xd2))]({'instance':this[_0xc5fb07(0xe9)],'api':salesforce_1['SalesforceConstants']['API'],'pollInterval':0x1388,'queryBuilder':_0x15563e,'objectName':_0xc5fb07(0xcf),'contentType':salesforce_1['BulkV1QueryContentType'][_0xc5fb07(0xeb)],'jobOperation':salesforce_1[_0xc5fb07(0xbb)][_0xc5fb07(0xe0)]});do{const _0x4cc7bb=await _0x5a75d6[_0xc5fb07(0xcc)]();if(!_0x4cc7bb)break;const _0x246e7=new salesforce_1[(_0xc5fb07(0xe1))]({'binaryFields':BINARY_FIELDS});for await(const {Name:_0x4382e8,ParentId:_0x351093,Body:_0x265d9b}of _0x4cc7bb[_0xc5fb07(0xd1)](_0x246e7)){const _0x211579=this[_0xc5fb07(0xcb)][_0xc5fb07(0xc0)](_0x351093);if(!_0x211579){this[_0xc5fb07(0xbe)]['error']('Parent\x20record\x20(%s)\x20for\x20file\x20(%s)\x20was\x20not\x20found.',_0x351093,_0x4382e8);continue;}_0x211579['body']=_0x265d9b,_0x211579[_0xc5fb07(0xb9)]=_0x4382e8;}}while(!_0x5a75d6[_0xc5fb07(0xc1)]());}async[a247_0x5cdf04(0xc4)](){const _0x56402e=a247_0x5cdf04;do{const _0x10827c=this[_0x56402e(0xd6)][_0x56402e(0xcd)](0x0,MAX_IDS_CHUNK_LENGTH);await this['retrieveComponents'](_0x10827c),await this[_0x56402e(0xd8)](_0x10827c);}while(this[_0x56402e(0xd6)][_0x56402e(0xea)]);return[...this[_0x56402e(0xcb)]['values']()];}}exports[a247_0x5cdf04(0xb6)]=BulkComponentsRetriever;