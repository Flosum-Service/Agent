const a257_0x5cc1b9=a257_0x1084;(function(_0x443052,_0x47c00b){const _0x55783e=a257_0x1084,_0x5dc175=_0x443052();while(!![]){try{const _0xa93358=parseInt(_0x55783e(0xc7))/0x1*(parseInt(_0x55783e(0xd1))/0x2)+-parseInt(_0x55783e(0xc9))/0x3*(parseInt(_0x55783e(0xdc))/0x4)+parseInt(_0x55783e(0xcd))/0x5*(-parseInt(_0x55783e(0xea))/0x6)+-parseInt(_0x55783e(0xe4))/0x7+parseInt(_0x55783e(0xcb))/0x8+parseInt(_0x55783e(0xdf))/0x9*(-parseInt(_0x55783e(0xe7))/0xa)+parseInt(_0x55783e(0xd7))/0xb*(parseInt(_0x55783e(0xfa))/0xc);if(_0xa93358===_0x47c00b)break;else _0x5dc175['push'](_0x5dc175['shift']());}catch(_0x5d6d34){_0x5dc175['push'](_0x5dc175['shift']());}}}(a257_0x1089,0x99c0c));const a257_0x1793f4=(function(){let _0x92c188=!![];return function(_0x4dd665,_0x55cb2e){const _0x4f7c92=_0x92c188?function(){const _0x7f1cff=a257_0x1084;if(_0x55cb2e){const _0x332640=_0x55cb2e[_0x7f1cff(0xe1)](_0x4dd665,arguments);return _0x55cb2e=null,_0x332640;}}:function(){};return _0x92c188=![],_0x4f7c92;};}()),a257_0x27d8f9=a257_0x1793f4(this,function(){const _0x30e427=a257_0x1084;return a257_0x27d8f9['toString']()['search']('(((.+)+)+)+$')[_0x30e427(0xf2)]()[_0x30e427(0xce)](a257_0x27d8f9)[_0x30e427(0xec)](_0x30e427(0xe8));});a257_0x27d8f9();'use strict';function a257_0x1089(){const _0xeac332=['4582521lDfGEJ','error','apply','Version__c','Component_History__c','3752581cdHlhH','Attachment','CompositeRetrieveData','10ouUkvw','(((.+)+)+)+$','execute','214212XAaQaJ','fileType','search','Component_Name__c','FLOSUM_NAMESPACE','SalesforceConstants','@flosum/salesforce','request','toString','Bulk1RetrieveData','Id\x20IN\x20(:ids)','ids','Body','retrieve','values','retrieveAttachments','8988LRjnFT','Bulk1JobOperation','ParentId\x20IN\x20(:ids)','Name','body','set','where','1XaNGnQ','QueryBuilder','3DLQpoL','BulkComponentsRetriever','859768lDhPML','defineProperty','85dckOmV','constructor','getIsDone','pipe','2450708mwPXdT','Query','name','retrieveComponents','components','logger','23254ZmNUbB','API','BulkXmlStreamParser','select','from','2537012hxJDKA','get','Component__r.'];a257_0x1089=function(){return _0xeac332;};return a257_0x1089();}Object[a257_0x5cc1b9(0xcc)](exports,'__esModule',{'value':!![]}),exports[a257_0x5cc1b9(0xca)]=void 0x0;const salesforce_1=require(a257_0x5cc1b9(0xf0)),core_1=require('../../../../core'),constants_1=require('../../../../constants'),BINARY_FIELDS=['Body'],MAX_IDS_CHUNK_LENGTH=0xfa0;function a257_0x1084(_0x1bea3a,_0x43294d){const _0x2263c9=a257_0x1089();return a257_0x1084=function(_0x27d8f9,_0x1793f4){_0x27d8f9=_0x27d8f9-0xc4;let _0x108972=_0x2263c9[_0x27d8f9];return _0x108972;},a257_0x1084(_0x1bea3a,_0x43294d);}class BulkComponentsRetriever{constructor({request:_0x338be2,ids:_0x13df6f}){const _0x5a563f=a257_0x5cc1b9;this[_0x5a563f(0xd5)]=new Map(),this[_0x5a563f(0xf1)]=_0x338be2,this[_0x5a563f(0xf5)]=_0x13df6f,this['logger']=new core_1['Logger'](BulkComponentsRetriever[_0x5a563f(0xd3)]);}async[a257_0x5cc1b9(0xd4)](_0x2339de){const _0x33f8a4=a257_0x5cc1b9,_0x52c19a=new salesforce_1[(_0x33f8a4(0xc8))]()['select']('Id',constants_1['FLOSUM_NAMESPACE']+_0x33f8a4(0xde)+constants_1['FLOSUM_NAMESPACE']+_0x33f8a4(0xed),constants_1[_0x33f8a4(0xee)]+_0x33f8a4(0xe2))[_0x33f8a4(0xdb)](constants_1['FLOSUM_NAMESPACE']+_0x33f8a4(0xe3))[_0x33f8a4(0xc6)](_0x33f8a4(0xf4),{'ids':_0x2339de}),_0x141a45=new salesforce_1[(_0x33f8a4(0xe6))]({'api':salesforce_1[_0x33f8a4(0xef)][_0x33f8a4(0xd8)],'queryBuilder':_0x52c19a,'instance':this[_0x33f8a4(0xf1)],'isTooling':![]});do{const {records:_0x3e68df}=await _0x141a45[_0x33f8a4(0xe9)]();for(const _0x31f713 of _0x3e68df){this[_0x33f8a4(0xd5)][_0x33f8a4(0xc5)](_0x31f713['Id'],{'fileName':_0x31f713[constants_1[_0x33f8a4(0xee)]+'Component__r'][constants_1[_0x33f8a4(0xee)]+_0x33f8a4(0xed)],'fileType':'','body':'','version':_0x31f713[constants_1[_0x33f8a4(0xee)]+_0x33f8a4(0xe2)]});}}while(!_0x141a45[_0x33f8a4(0xcf)]());}async[a257_0x5cc1b9(0xf9)](_0x143424){const _0x5943e7=a257_0x5cc1b9,_0x333bfc=new salesforce_1[(_0x5943e7(0xc8))]()[_0x5943e7(0xda)](_0x5943e7(0xf6),_0x5943e7(0xfd),'ParentId')[_0x5943e7(0xdb)](_0x5943e7(0xe5))[_0x5943e7(0xc6)](_0x5943e7(0xfc),{'ids':_0x143424}),_0x34f962=new salesforce_1[(_0x5943e7(0xf3))]({'instance':this[_0x5943e7(0xf1)],'api':salesforce_1[_0x5943e7(0xef)][_0x5943e7(0xd8)],'pollInterval':0x1388,'queryBuilder':_0x333bfc,'objectName':_0x5943e7(0xe5),'contentType':salesforce_1['BulkV1QueryContentType']['APPLICATION_XML'],'jobOperation':salesforce_1[_0x5943e7(0xfb)][_0x5943e7(0xd2)]});do{const _0x1fa516=await _0x34f962[_0x5943e7(0xe9)]();if(!_0x1fa516)break;const _0x21490a=new salesforce_1[(_0x5943e7(0xd9))]({'binaryFields':BINARY_FIELDS});for await(const {Name:_0x161917,ParentId:_0x3b8b3b,Body:_0x45d20e}of _0x1fa516[_0x5943e7(0xd0)](_0x21490a)){const _0x562a87=this[_0x5943e7(0xd5)][_0x5943e7(0xdd)](_0x3b8b3b);if(!_0x562a87){this[_0x5943e7(0xd6)][_0x5943e7(0xe0)]('Parent\x20record\x20(%s)\x20for\x20file\x20(%s)\x20was\x20not\x20found.',_0x3b8b3b,_0x161917);continue;}_0x562a87[_0x5943e7(0xc4)]=_0x45d20e,_0x562a87[_0x5943e7(0xeb)]=_0x161917;}}while(!_0x34f962[_0x5943e7(0xcf)]());}async[a257_0x5cc1b9(0xf7)](){const _0x9d6c87=a257_0x5cc1b9;do{const _0x1f7f3a=this[_0x9d6c87(0xf5)]['splice'](0x0,MAX_IDS_CHUNK_LENGTH);await this[_0x9d6c87(0xd4)](_0x1f7f3a),await this[_0x9d6c87(0xf9)](_0x1f7f3a);}while(this['ids']['length']);return[...this[_0x9d6c87(0xd5)][_0x9d6c87(0xf8)]()];}}exports[a257_0x5cc1b9(0xca)]=BulkComponentsRetriever;