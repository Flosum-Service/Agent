const a257_0x4dca11=a257_0x431a;function a257_0x431a(_0x17cbdb,_0x3f6367){const _0x2f1c6d=a257_0x3a95();return a257_0x431a=function(_0x14e620,_0x47c437){_0x14e620=_0x14e620-0x10c;let _0x3a958a=_0x2f1c6d[_0x14e620];return _0x3a958a;},a257_0x431a(_0x17cbdb,_0x3f6367);}(function(_0x28e36e,_0x1fd645){const _0x24c22f=a257_0x431a,_0x339156=_0x28e36e();while(!![]){try{const _0xe7f455=parseInt(_0x24c22f(0x12e))/0x1*(parseInt(_0x24c22f(0x144))/0x2)+-parseInt(_0x24c22f(0x133))/0x3*(-parseInt(_0x24c22f(0x124))/0x4)+parseInt(_0x24c22f(0x11e))/0x5*(-parseInt(_0x24c22f(0x113))/0x6)+parseInt(_0x24c22f(0x110))/0x7+parseInt(_0x24c22f(0x118))/0x8*(-parseInt(_0x24c22f(0x119))/0x9)+parseInt(_0x24c22f(0x13d))/0xa*(-parseInt(_0x24c22f(0x129))/0xb)+parseInt(_0x24c22f(0x120))/0xc;if(_0xe7f455===_0x1fd645)break;else _0x339156['push'](_0x339156['shift']());}catch(_0x1fd032){_0x339156['push'](_0x339156['shift']());}}}(a257_0x3a95,0xa7056));const a257_0x47c437=(function(){let _0x55a06a=!![];return function(_0x1e3827,_0x9d4bc8){const _0x2671a2=_0x55a06a?function(){const _0x5e982d=a257_0x431a;if(_0x9d4bc8){const _0x24df62=_0x9d4bc8[_0x5e982d(0x142)](_0x1e3827,arguments);return _0x9d4bc8=null,_0x24df62;}}:function(){};return _0x55a06a=![],_0x2671a2;};}()),a257_0x14e620=a257_0x47c437(this,function(){const _0x16cbd3=a257_0x431a;return a257_0x14e620[_0x16cbd3(0x11c)]()['search'](_0x16cbd3(0x11b))[_0x16cbd3(0x11c)]()[_0x16cbd3(0x134)](a257_0x14e620)[_0x16cbd3(0x139)]('(((.+)+)+)+$');});a257_0x14e620();'use strict';Object[a257_0x4dca11(0x125)](exports,a257_0x4dca11(0x12c),{'value':!![]}),exports[a257_0x4dca11(0x121)]=void 0x0;function a257_0x3a95(){const _0x4ad526=['getIsDone','4kZmrCb','defineProperty','ids','QueryBuilder','body','2024SGMena','FLOSUM_NAMESPACE','Body','__esModule','Component__r.','447703JjeLfu','../../../../constants','set','components','name','2254260idlhJJ','constructor','retrieve','Id\x20IN\x20(:ids)','Version__c','Bulk1RetrieveData','search','from','retrieveComponents','ParentId\x20IN\x20(:ids)','26330PMdryH','logger','Parent\x20record\x20(%s)\x20for\x20file\x20(%s)\x20was\x20not\x20found.','SalesforceConstants','splice','apply','select','2myeqMx','CompositeRetrieveData','retrieveAttachments','values','Attachment','2539733smeGMq','Component_Name__c','@flosum/salesforce','11202kfduaJ','Name','error','request','where','968mfbEvQ','82359TLiAvz','Component__r','(((.+)+)+)+$','toString','ParentId','2725DHbUtH','Query','20777208vqDnjQ','BulkComponentsRetriever','length'];a257_0x3a95=function(){return _0x4ad526;};return a257_0x3a95();}const salesforce_1=require(a257_0x4dca11(0x112)),core_1=require('../../../../core'),constants_1=require(a257_0x4dca11(0x12f)),BINARY_FIELDS=['Body'],MAX_IDS_CHUNK_LENGTH=0xfa0;class BulkComponentsRetriever{constructor({request:_0x7f0dc0,ids:_0x13fc09}){const _0xa06662=a257_0x4dca11;this['components']=new Map(),this['request']=_0x7f0dc0,this[_0xa06662(0x126)]=_0x13fc09,this[_0xa06662(0x13e)]=new core_1['Logger'](BulkComponentsRetriever[_0xa06662(0x132)]);}async[a257_0x4dca11(0x13b)](_0x511515){const _0x1d24b5=a257_0x4dca11,_0x50dd25=new salesforce_1[(_0x1d24b5(0x127))]()[_0x1d24b5(0x143)]('Id',constants_1['FLOSUM_NAMESPACE']+_0x1d24b5(0x12d)+constants_1[_0x1d24b5(0x12a)]+_0x1d24b5(0x111),constants_1[_0x1d24b5(0x12a)]+_0x1d24b5(0x137))[_0x1d24b5(0x13a)](constants_1['FLOSUM_NAMESPACE']+'Component_History__c')[_0x1d24b5(0x117)](_0x1d24b5(0x136),{'ids':_0x511515}),_0x550be2=new salesforce_1[(_0x1d24b5(0x10c))]({'api':salesforce_1[_0x1d24b5(0x140)]['API'],'queryBuilder':_0x50dd25,'instance':this[_0x1d24b5(0x116)],'isTooling':![]});do{const {records:_0x50e6e6}=await _0x550be2['execute']();for(const _0x68dbbc of _0x50e6e6){this[_0x1d24b5(0x131)][_0x1d24b5(0x130)](_0x68dbbc['Id'],{'fileName':_0x68dbbc[constants_1[_0x1d24b5(0x12a)]+_0x1d24b5(0x11a)][constants_1[_0x1d24b5(0x12a)]+_0x1d24b5(0x111)],'fileType':'','body':'','version':_0x68dbbc[constants_1['FLOSUM_NAMESPACE']+_0x1d24b5(0x137)]});}}while(!_0x550be2['getIsDone']());}async['retrieveAttachments'](_0x1cd948){const _0x5e8f02=a257_0x4dca11,_0x55b9f1=new salesforce_1['QueryBuilder']()[_0x5e8f02(0x143)](_0x5e8f02(0x12b),_0x5e8f02(0x114),_0x5e8f02(0x11d))[_0x5e8f02(0x13a)](_0x5e8f02(0x10f))['where'](_0x5e8f02(0x13c),{'ids':_0x1cd948}),_0x389614=new salesforce_1[(_0x5e8f02(0x138))]({'instance':this[_0x5e8f02(0x116)],'api':salesforce_1['SalesforceConstants']['API'],'pollInterval':0x1388,'queryBuilder':_0x55b9f1,'objectName':_0x5e8f02(0x10f),'contentType':salesforce_1['BulkV1QueryContentType']['APPLICATION_XML'],'jobOperation':salesforce_1['Bulk1JobOperation'][_0x5e8f02(0x11f)]});do{const _0x5bb3d5=await _0x389614['execute']();if(!_0x5bb3d5)break;const _0x3e868f=new salesforce_1['BulkXmlStreamParser']({'binaryFields':BINARY_FIELDS});for await(const {Name:_0x2a5883,ParentId:_0x198724,Body:_0x3cfe63}of _0x5bb3d5['pipe'](_0x3e868f)){const _0x2876f=this[_0x5e8f02(0x131)]['get'](_0x198724);if(!_0x2876f){this[_0x5e8f02(0x13e)][_0x5e8f02(0x115)](_0x5e8f02(0x13f),_0x198724,_0x2a5883);continue;}_0x2876f[_0x5e8f02(0x128)]=_0x3cfe63,_0x2876f['fileType']=_0x2a5883;}}while(!_0x389614[_0x5e8f02(0x123)]());}async[a257_0x4dca11(0x135)](){const _0x55d00d=a257_0x4dca11;do{const _0x31357a=this['ids'][_0x55d00d(0x141)](0x0,MAX_IDS_CHUNK_LENGTH);await this[_0x55d00d(0x13b)](_0x31357a),await this[_0x55d00d(0x10d)](_0x31357a);}while(this[_0x55d00d(0x126)][_0x55d00d(0x122)]);return[...this['components'][_0x55d00d(0x10e)]()];}}exports['BulkComponentsRetriever']=BulkComponentsRetriever;