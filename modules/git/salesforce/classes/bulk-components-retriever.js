function a258_0x3f10(){const _0x31d94e=['from','name','5650NZFXBl','logger','24136TAAExe','292332SKWUde','request','ParentId','77508iDQFhu','24764lcLyFo','error','toString','616mGxZny','get','BulkComponentsRetriever','3396kyvCeo','11qmvwpq','(((.+)+)+)+$','components','retrieve','fileType','pipe','search','CompositeRetrieveData','Component__r.','Query','Bulk1JobOperation','BulkV1QueryContentType','11EgzzVW','18LqADdl','__esModule','ParentId\x20IN\x20(:ids)','execute','ids','Attachment','Bulk1RetrieveData','getIsDone','select','Body','Version__c','retrieveAttachments','retrieveComponents','2095vEwWnv','Component_Name__c','Component__r','Logger','../../../../core','QueryBuilder','5831400eyevAV','APPLICATION_XML','Component_History__c','../../../../constants','API','body','splice','BulkXmlStreamParser','SalesforceConstants','apply','FLOSUM_NAMESPACE','defineProperty'];a258_0x3f10=function(){return _0x31d94e;};return a258_0x3f10();}const a258_0x2127a5=a258_0x3bbd;(function(_0x45005f,_0x269c53){const _0x55ce4d=a258_0x3bbd,_0x47574b=_0x45005f();while(!![]){try{const _0x5b0fc6=parseInt(_0x55ce4d(0x193))/0x1*(parseInt(_0x55ce4d(0x18c))/0x2)+parseInt(_0x55ce4d(0x188))/0x3+-parseInt(_0x55ce4d(0x18b))/0x4+-parseInt(_0x55ce4d(0x171))/0x5*(parseInt(_0x55ce4d(0x192))/0x6)+parseInt(_0x55ce4d(0x187))/0x7*(-parseInt(_0x55ce4d(0x18f))/0x8)+-parseInt(_0x55ce4d(0x164))/0x9*(parseInt(_0x55ce4d(0x185))/0xa)+parseInt(_0x55ce4d(0x163))/0xb*(parseInt(_0x55ce4d(0x177))/0xc);if(_0x5b0fc6===_0x269c53)break;else _0x47574b['push'](_0x47574b['shift']());}catch(_0x3f0ec9){_0x47574b['push'](_0x47574b['shift']());}}}(a258_0x3f10,0x2ff57));const a258_0x2dd2b7=(function(){let _0x270914=!![];return function(_0x593e71,_0x2dbaa3){const _0x3efc4d=_0x270914?function(){const _0x42f4c1=a258_0x3bbd;if(_0x2dbaa3){const _0x2af2e3=_0x2dbaa3[_0x42f4c1(0x180)](_0x593e71,arguments);return _0x2dbaa3=null,_0x2af2e3;}}:function(){};return _0x270914=![],_0x3efc4d;};}()),a258_0x55ae10=a258_0x2dd2b7(this,function(){const _0x223d3c=a258_0x3bbd;return a258_0x55ae10[_0x223d3c(0x18e)]()['search'](_0x223d3c(0x194))['toString']()['constructor'](a258_0x55ae10)[_0x223d3c(0x15d)](_0x223d3c(0x194));});a258_0x55ae10();'use strict';Object[a258_0x2127a5(0x182)](exports,a258_0x2127a5(0x165),{'value':!![]}),exports[a258_0x2127a5(0x191)]=void 0x0;const salesforce_1=require('@flosum/salesforce'),core_1=require(a258_0x2127a5(0x175)),constants_1=require(a258_0x2127a5(0x17a)),BINARY_FIELDS=[a258_0x2127a5(0x16d)],MAX_IDS_CHUNK_LENGTH=0xfa0;class BulkComponentsRetriever{constructor({request:_0x40417e,ids:_0x4a26c1}){const _0x5741b2=a258_0x2127a5;this['components']=new Map(),this[_0x5741b2(0x189)]=_0x40417e,this['ids']=_0x4a26c1,this['logger']=new core_1[(_0x5741b2(0x174))](BulkComponentsRetriever[_0x5741b2(0x184)]);}async[a258_0x2127a5(0x170)](_0xbc1d05){const _0xb50483=a258_0x2127a5,_0x5980aa=new salesforce_1[(_0xb50483(0x176))]()[_0xb50483(0x16c)]('Id',constants_1['FLOSUM_NAMESPACE']+_0xb50483(0x15f)+constants_1[_0xb50483(0x181)]+_0xb50483(0x172),constants_1[_0xb50483(0x181)]+_0xb50483(0x16e))[_0xb50483(0x183)](constants_1[_0xb50483(0x181)]+_0xb50483(0x179))['where']('Id\x20IN\x20(:ids)',{'ids':_0xbc1d05}),_0x256c1c=new salesforce_1[(_0xb50483(0x15e))]({'api':salesforce_1[_0xb50483(0x17f)][_0xb50483(0x17b)],'queryBuilder':_0x5980aa,'instance':this['request'],'isTooling':![]});do{const {records:_0x386bbb}=await _0x256c1c[_0xb50483(0x167)]();for(const _0x5eeb2b of _0x386bbb){this[_0xb50483(0x195)]['set'](_0x5eeb2b['Id'],{'fileName':_0x5eeb2b[constants_1[_0xb50483(0x181)]+_0xb50483(0x173)][constants_1[_0xb50483(0x181)]+_0xb50483(0x172)],'fileType':'','body':'','version':_0x5eeb2b[constants_1['FLOSUM_NAMESPACE']+'Version__c']});}}while(!_0x256c1c[_0xb50483(0x16b)]());}async['retrieveAttachments'](_0x47057d){const _0x18b165=a258_0x2127a5,_0x341cc9=new salesforce_1['QueryBuilder']()[_0x18b165(0x16c)]('Body','Name',_0x18b165(0x18a))[_0x18b165(0x183)](_0x18b165(0x169))['where'](_0x18b165(0x166),{'ids':_0x47057d}),_0x4907cd=new salesforce_1[(_0x18b165(0x16a))]({'instance':this[_0x18b165(0x189)],'api':salesforce_1[_0x18b165(0x17f)][_0x18b165(0x17b)],'pollInterval':0x1388,'queryBuilder':_0x341cc9,'objectName':'Attachment','contentType':salesforce_1[_0x18b165(0x162)][_0x18b165(0x178)],'jobOperation':salesforce_1[_0x18b165(0x161)][_0x18b165(0x160)]});do{const _0x2a9588=await _0x4907cd[_0x18b165(0x167)]();if(!_0x2a9588)break;const _0x6e1da6=new salesforce_1[(_0x18b165(0x17e))]({'binaryFields':BINARY_FIELDS});for await(const {Name:_0x598637,ParentId:_0xfca75e,Body:_0x2e6f03}of _0x2a9588[_0x18b165(0x15c)](_0x6e1da6)){const _0x4c9421=this[_0x18b165(0x195)][_0x18b165(0x190)](_0xfca75e);if(!_0x4c9421){this[_0x18b165(0x186)][_0x18b165(0x18d)]('Parent\x20record\x20(%s)\x20for\x20file\x20(%s)\x20was\x20not\x20found.',_0xfca75e,_0x598637);continue;}_0x4c9421[_0x18b165(0x17c)]=_0x2e6f03,_0x4c9421[_0x18b165(0x15b)]=_0x598637;}}while(!_0x4907cd['getIsDone']());}async[a258_0x2127a5(0x196)](){const _0x32406e=a258_0x2127a5;do{const _0x184acf=this[_0x32406e(0x168)][_0x32406e(0x17d)](0x0,MAX_IDS_CHUNK_LENGTH);await this['retrieveComponents'](_0x184acf),await this[_0x32406e(0x16f)](_0x184acf);}while(this[_0x32406e(0x168)]['length']);return[...this[_0x32406e(0x195)]['values']()];}}function a258_0x3bbd(_0xd30e31,_0x337c80){const _0x94b844=a258_0x3f10();return a258_0x3bbd=function(_0x55ae10,_0x2dd2b7){_0x55ae10=_0x55ae10-0x15b;let _0x3f1026=_0x94b844[_0x55ae10];return _0x3f1026;},a258_0x3bbd(_0xd30e31,_0x337c80);}exports['BulkComponentsRetriever']=BulkComponentsRetriever;