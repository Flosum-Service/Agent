const a193_0x26c0fd=a193_0x1ae4;function a193_0x1ae4(_0x5b9776,_0x2c725d){const _0x1ea2bb=a193_0x4528();return a193_0x1ae4=function(_0xfb02d6,_0x729cd3){_0xfb02d6=_0xfb02d6-0x7e;let _0x452831=_0x1ea2bb[_0xfb02d6];return _0x452831;},a193_0x1ae4(_0x5b9776,_0x2c725d);}(function(_0x45a844,_0x14e284){const _0x3566b3=a193_0x1ae4,_0x14926c=_0x45a844();while(!![]){try{const _0xed7bee=parseInt(_0x3566b3(0xc3))/0x1+parseInt(_0x3566b3(0x94))/0x2+-parseInt(_0x3566b3(0x9f))/0x3*(parseInt(_0x3566b3(0x99))/0x4)+parseInt(_0x3566b3(0xb4))/0x5*(-parseInt(_0x3566b3(0x81))/0x6)+-parseInt(_0x3566b3(0xc2))/0x7*(parseInt(_0x3566b3(0x90))/0x8)+-parseInt(_0x3566b3(0xa6))/0x9*(-parseInt(_0x3566b3(0x8a))/0xa)+-parseInt(_0x3566b3(0x9c))/0xb*(-parseInt(_0x3566b3(0xc4))/0xc);if(_0xed7bee===_0x14e284)break;else _0x14926c['push'](_0x14926c['shift']());}catch(_0x5d14f9){_0x14926c['push'](_0x14926c['shift']());}}}(a193_0x4528,0x8d5bf));const a193_0x729cd3=(function(){let _0x3b8797=!![];return function(_0x536ccd,_0x2003a6){const _0x1981fd=_0x3b8797?function(){if(_0x2003a6){const _0x1ff09f=_0x2003a6['apply'](_0x536ccd,arguments);return _0x2003a6=null,_0x1ff09f;}}:function(){};return _0x3b8797=![],_0x1981fd;};}()),a193_0xfb02d6=a193_0x729cd3(this,function(){const _0x2418a8=a193_0x1ae4;return a193_0xfb02d6['toString']()[_0x2418a8(0xb7)](_0x2418a8(0x83))[_0x2418a8(0xa7)]()['constructor'](a193_0xfb02d6)[_0x2418a8(0xb7)](_0x2418a8(0x83));});a193_0xfb02d6();'use strict';function a193_0x4528(){const _0x2823d6=['2454282vsjeWb','toString','logger','options','Logger','getProceededComponentsMeta','removed','../../../../core','extractComponentIdsFromGraphsResponse','proceededComponentsMeta','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','\x20requests\x20to\x20composite\x20api.','author','default','10745PMHEtm','insert','toJSON','search','composite','proceedCommitsToRepository','typedi','recordTypes','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','reference','componentsToDelete','./salesforce-components-manager.service','modified','executeGraphs','14INXSWI','359375gnvBiz','84UbGnGK','map','branchId','floor','componentId','408OaTYKk','repositoryId','(((.+)+)+)+$','name','../errors/salesforce.error','commitId','Sending\x20','length','manifests','10tFUqgd','../utils/composite.utils','../../../../constants','find','COMPONENTS_PER_CHUNK','stringify','544096dEUsxL','SalesforceComponentsManager','proceedCommits','SalesforceError','1004426qmVNIn','reduce','log','update','componentsToUpdate','40RnHbts','__esModule','__importDefault','1102981EWwkcl','sfLogger','chunkArray','292506YxVZqS','push','SalesforceCommitsManager','inserted','delete','../../../shared/utils','proceedRequests'];a193_0x4528=function(){return _0x2823d6;};return a193_0x4528();}var __importDefault=this&&this[a193_0x26c0fd(0x9b)]||function(_0x54feaa){const _0x1b5a5e=a193_0x26c0fd;return _0x54feaa&&_0x54feaa[_0x1b5a5e(0x9a)]?_0x54feaa:{'default':_0x54feaa};};Object['defineProperty'](exports,a193_0x26c0fd(0x9a),{'value':!![]}),exports[a193_0x26c0fd(0xa1)]=void 0x0;const core_1=require(a193_0x26c0fd(0xad)),typedi_1=__importDefault(require(a193_0x26c0fd(0xba))),constants_1=require(a193_0x26c0fd(0x8c)),utils_1=require(a193_0x26c0fd(0xa4)),salesforce_error_1=require(a193_0x26c0fd(0x85)),composite_utils_1=require(a193_0x26c0fd(0x8b)),salesforce_components_manager_service_1=require(a193_0x26c0fd(0xbf)),salesforce_composite_service_1=require('./salesforce-composite.service');class SalesforceCommitsManager{constructor(_0x42a0f0){const _0x8be294=a193_0x26c0fd;this[_0x8be294(0xa9)]=_0x42a0f0,this[_0x8be294(0x8e)]=0x3,this['logger']=new core_1[(_0x8be294(0xaa))](SalesforceCommitsManager[_0x8be294(0x84)]),this[_0x8be294(0x9d)]=this[_0x8be294(0xa9)][_0x8be294(0xa8)],this['composite']=typedi_1[_0x8be294(0xb3)]['get'](salesforce_composite_service_1['SalesforceCompositeService']),this[_0x8be294(0xaf)]=[];}async[a193_0x26c0fd(0xa5)](_0xe8851b,_0x1bf555=![]){const _0x4e1317=a193_0x26c0fd,_0x53d827=(this[_0x4e1317(0x8e)]+ +_0x1bf555)*0x3,_0x4bcf47=(0x0,utils_1[_0x4e1317(0x9e)])(_0xe8851b,_0x53d827);try{while(_0x4bcf47[_0x4e1317(0x88)]){const _0x32fe7b=_0x4bcf47['splice'](0x0,Math[_0x4e1317(0x7f)](constants_1[_0x4e1317(0xbc)]/_0x53d827));await this[_0x4e1317(0xa8)][_0x4e1317(0x96)](_0x4e1317(0x87)+_0x32fe7b['length']*_0x53d827+_0x4e1317(0xb1));const _0xfdf12c=_0x32fe7b[_0x4e1317(0xc5)]((_0x2b9cc9,_0x12dc63)=>({'graphId':'graph'+_0x12dc63,'compositeRequest':_0x2b9cc9})),_0x3fc666=await this[_0x4e1317(0xb8)][_0x4e1317(0xc1)](_0xfdf12c);if(_0x1bf555){const _0x5c2f4e=(0x0,composite_utils_1[_0x4e1317(0xae)])(_0x3fc666);for(const {id:_0x3a11a8,ref:_0x3ec549}of _0x5c2f4e){const _0xc85695=this[_0x4e1317(0xaf)][_0x4e1317(0x8d)](_0x5d6b02=>_0x5d6b02[_0x4e1317(0xbd)]===_0x3ec549);_0xc85695&&(_0xc85695[_0x4e1317(0x80)]=_0x3a11a8);}}}}catch(_0x4b7195){this[_0x4e1317(0xa8)]['error'](_0x4b7195 instanceof salesforce_error_1[_0x4e1317(0x93)]?JSON[_0x4e1317(0x8f)](_0x4b7195[_0x4e1317(0xb6)](),null,0x2):_0x4b7195),this['sfLogger']['log'](_0x4b7195 instanceof salesforce_error_1[_0x4e1317(0x93)]?JSON[_0x4e1317(0x8f)](_0x4b7195[_0x4e1317(0xb6)](),null,0x2):_0x4b7195[_0x4e1317(0xa7)]());throw _0x4b7195;}}async[a193_0x26c0fd(0xb9)](_0x41214a){const _0xd78a0e=a193_0x26c0fd;for(const _0x25c59f of _0x41214a){if(!_0x25c59f[_0xd78a0e(0xa2)]['length']&&!_0x25c59f[_0xd78a0e(0xc0)][_0xd78a0e(0x88)]&&!_0x25c59f[_0xd78a0e(0xac)][_0xd78a0e(0x88)])continue;const _0x150f7b=[],_0x2aed0c=[],_0x1f6ff2=new salesforce_components_manager_service_1[(_0xd78a0e(0x91))](this[_0xd78a0e(0xa9)][_0xd78a0e(0x82)],this[_0xd78a0e(0xa9)][_0xd78a0e(0x7e)],_0x25c59f[_0xd78a0e(0xb2)],this[_0xd78a0e(0xa9)][_0xd78a0e(0xbb)],this[_0xd78a0e(0xaf)]);_0x150f7b['push'](...await _0x1f6ff2[_0xd78a0e(0xb5)](_0x25c59f['inserted'],this['options'][_0xd78a0e(0x86)])),_0x150f7b[_0xd78a0e(0xa0)](...await _0x1f6ff2[_0xd78a0e(0x97)](_0x25c59f[_0xd78a0e(0xc0)],this['options'][_0xd78a0e(0x86)])),_0x2aed0c[_0xd78a0e(0xa0)](await _0x1f6ff2['delete'](_0x25c59f[_0xd78a0e(0xac)],!![])),this['proceededComponentsMeta']=_0x1f6ff2[_0xd78a0e(0xab)](),await this[_0xd78a0e(0xa5)](_0x150f7b,!![]);for(const _0x26ca18 of _0x2aed0c){_0x26ca18[_0xd78a0e(0x89)][_0xd78a0e(0x88)]&&await this[_0xd78a0e(0xa5)](_0x26ca18[_0xd78a0e(0x89)],!![]),_0x26ca18[_0xd78a0e(0x98)]['length']&&await this['proceedRequests'](_0x26ca18[_0xd78a0e(0x98)],!![]),_0x26ca18['componentsToDelete']['length']&&await this[_0xd78a0e(0xa5)](_0x26ca18[_0xd78a0e(0xbe)],!![]);}this[_0xd78a0e(0xa8)][_0xd78a0e(0x96)]('have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)',_0x150f7b[_0xd78a0e(0x88)]);}}async['proceedCommitsToBranch'](_0x12558f){const _0x34cd69=a193_0x26c0fd,_0x489883=[],_0x18fbad=[];for(const _0xef584 of _0x12558f){if(!_0xef584[_0x34cd69(0xa2)][_0x34cd69(0x88)]&&!_0xef584['modified'][_0x34cd69(0x88)]&&!_0xef584['removed'][_0x34cd69(0x88)])continue;const _0xc264f4=new salesforce_components_manager_service_1[(_0x34cd69(0x91))](this[_0x34cd69(0xa9)][_0x34cd69(0x82)],this[_0x34cd69(0xa9)][_0x34cd69(0x7e)],_0xef584[_0x34cd69(0xb2)],this[_0x34cd69(0xa9)][_0x34cd69(0xbb)],[]);_0x489883[_0x34cd69(0xa0)](...await _0xc264f4['insert'](_0xef584['inserted'])),_0x489883[_0x34cd69(0xa0)](...await _0xc264f4[_0x34cd69(0x97)](_0xef584['modified'])),_0x18fbad['push'](await _0xc264f4[_0x34cd69(0xa3)](_0xef584[_0x34cd69(0xac)]));}this[_0x34cd69(0xa8)][_0x34cd69(0x96)](_0x34cd69(0xb0),_0x489883[_0x34cd69(0x88)]),await this[_0x34cd69(0xa5)](_0x489883);const _0x242c6c=_0x18fbad[_0x34cd69(0x95)]((_0x2a6034,_0x1c0c44)=>({'manifests':[..._0x2a6034[_0x34cd69(0x89)],..._0x1c0c44[_0x34cd69(0x89)]],'componentsToDelete':[..._0x2a6034[_0x34cd69(0xbe)],..._0x1c0c44[_0x34cd69(0xbe)]],'componentsToUpdate':[..._0x2a6034['componentsToUpdate'],..._0x1c0c44[_0x34cd69(0x98)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x242c6c[_0x34cd69(0x89)][_0x34cd69(0x88)]&&await this[_0x34cd69(0xa5)](_0x242c6c['manifests'],!![]),_0x242c6c[_0x34cd69(0x98)]['length']&&await this[_0x34cd69(0xa5)](_0x242c6c[_0x34cd69(0x98)],!![]),_0x242c6c['componentsToDelete']['length']&&await this[_0x34cd69(0xa5)](_0x242c6c[_0x34cd69(0xbe)],!![]);}async[a193_0x26c0fd(0x92)](_0x134c33){const _0x3ea7ef=a193_0x26c0fd;this['options'][_0x3ea7ef(0x7e)]?await this['proceedCommitsToBranch'](_0x134c33):await this[_0x3ea7ef(0xb9)](_0x134c33);}}exports[a193_0x26c0fd(0xa1)]=SalesforceCommitsManager;