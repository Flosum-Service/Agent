const a194_0x17c250=a194_0x42d1;(function(_0x4b8593,_0x12cbe2){const _0x410e13=a194_0x42d1,_0x3edfc3=_0x4b8593();while(!![]){try{const _0x56f32b=-parseInt(_0x410e13(0x15c))/0x1*(parseInt(_0x410e13(0x15d))/0x2)+-parseInt(_0x410e13(0x189))/0x3*(parseInt(_0x410e13(0x182))/0x4)+-parseInt(_0x410e13(0x167))/0x5*(-parseInt(_0x410e13(0x192))/0x6)+parseInt(_0x410e13(0x171))/0x7+-parseInt(_0x410e13(0x15f))/0x8*(-parseInt(_0x410e13(0x16d))/0x9)+-parseInt(_0x410e13(0x157))/0xa*(-parseInt(_0x410e13(0x162))/0xb)+parseInt(_0x410e13(0x175))/0xc*(-parseInt(_0x410e13(0x176))/0xd);if(_0x56f32b===_0x12cbe2)break;else _0x3edfc3['push'](_0x3edfc3['shift']());}catch(_0x24cc53){_0x3edfc3['push'](_0x3edfc3['shift']());}}}(a194_0x172c,0xa71f2));function a194_0x172c(){const _0x1f35e4=['error','proceededComponentsMeta','24NcMsBT','10991630vqhUYV','logger','splice','default','modified','recordTypes','repositoryId','../../../shared/utils','inserted','\x20requests\x20to\x20composite\x20api.','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','toString','5804YZcItZ','constructor','COMPONENTS_PER_CHUNK','delete','removed','composite','__importDefault','1227BFkMiJ','componentsToDelete','proceedCommitsToRepository','commitId','graph','stringify','proceedRequests','manifests','proceedCommitsToBranch','144TFtCgv','sfLogger','get','search','__esModule','branchId','push','toJSON','author','proceedCommits','typedi','executeGraphs','map','./salesforce-components-manager.service','componentsToUpdate','10iEmzYm','Logger','../errors/salesforce.error','SalesforceCommitsManager','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','10ijpuFN','16556LXZLwX','name','10648wQfhzR','apply','(((.+)+)+)+$','6189711LXJELG','options','SalesforceError','floor','extractComponentIdsFromGraphsResponse','267230GhJGXM','insert','length','../../../../constants','find','update','4248errLwW','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','componentId','log','4047064VQrDOL','SalesforceComponentsManager'];a194_0x172c=function(){return _0x1f35e4;};return a194_0x172c();}const a194_0x3d0221=(function(){let _0x39432a=!![];return function(_0x37d6ff,_0x4cbb28){const _0x21aaef=_0x39432a?function(){const _0x3b62c9=a194_0x42d1;if(_0x4cbb28){const _0x5e483f=_0x4cbb28[_0x3b62c9(0x160)](_0x37d6ff,arguments);return _0x4cbb28=null,_0x5e483f;}}:function(){};return _0x39432a=![],_0x21aaef;};}()),a194_0x2d3f5f=a194_0x3d0221(this,function(){const _0x5cfabf=a194_0x42d1;return a194_0x2d3f5f[_0x5cfabf(0x181)]()['search'](_0x5cfabf(0x161))[_0x5cfabf(0x181)]()[_0x5cfabf(0x183)](a194_0x2d3f5f)[_0x5cfabf(0x195)]('(((.+)+)+)+$');});a194_0x2d3f5f();'use strict';var __importDefault=this&&this[a194_0x17c250(0x188)]||function(_0x29a1af){const _0x2f4b3a=a194_0x17c250;return _0x29a1af&&_0x29a1af[_0x2f4b3a(0x196)]?_0x29a1af:{'default':_0x29a1af};};Object['defineProperty'](exports,a194_0x17c250(0x196),{'value':!![]}),exports['SalesforceCommitsManager']=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require(a194_0x17c250(0x152))),constants_1=require(a194_0x17c250(0x16a)),utils_1=require(a194_0x17c250(0x17d)),salesforce_error_1=require(a194_0x17c250(0x159)),composite_utils_1=require('../utils/composite.utils'),salesforce_components_manager_service_1=require(a194_0x17c250(0x155)),salesforce_composite_service_1=require('./salesforce-composite.service');class SalesforceCommitsManager{constructor(_0x5061f1){const _0x37da50=a194_0x17c250;this[_0x37da50(0x163)]=_0x5061f1,this[_0x37da50(0x184)]=0x3,this[_0x37da50(0x177)]=new core_1[(_0x37da50(0x158))](SalesforceCommitsManager[_0x37da50(0x15e)]),this[_0x37da50(0x193)]=this[_0x37da50(0x163)][_0x37da50(0x177)],this[_0x37da50(0x187)]=typedi_1[_0x37da50(0x179)][_0x37da50(0x194)](salesforce_composite_service_1['SalesforceCompositeService']),this[_0x37da50(0x174)]=[];}async[a194_0x17c250(0x18f)](_0x516522,_0x5d2c57=![]){const _0x4ec955=a194_0x17c250,_0x29a3c0=(this[_0x4ec955(0x184)]+ +_0x5d2c57)*0x3,_0x549692=(0x0,utils_1['chunkArray'])(_0x516522,_0x29a3c0);try{while(_0x549692[_0x4ec955(0x169)]){const _0x2aa6bc=_0x549692[_0x4ec955(0x178)](0x0,Math[_0x4ec955(0x165)](constants_1[_0x4ec955(0x15b)]/_0x29a3c0));await this['logger'][_0x4ec955(0x170)]('Sending\x20'+_0x2aa6bc[_0x4ec955(0x169)]*_0x29a3c0+_0x4ec955(0x17f));const _0x486792=_0x2aa6bc[_0x4ec955(0x154)]((_0x30ae52,_0x38eb4d)=>({'graphId':_0x4ec955(0x18d)+_0x38eb4d,'compositeRequest':_0x30ae52})),_0x10bc48=await this[_0x4ec955(0x187)][_0x4ec955(0x153)](_0x486792);if(_0x5d2c57){const _0xb8e947=(0x0,composite_utils_1[_0x4ec955(0x166)])(_0x10bc48);for(const {id:_0x1de9c0,ref:_0x7bbf1b}of _0xb8e947){const _0x4c1a6b=this[_0x4ec955(0x174)][_0x4ec955(0x16b)](_0x3bf592=>_0x3bf592['reference']===_0x7bbf1b);_0x4c1a6b&&(_0x4c1a6b[_0x4ec955(0x16f)]=_0x1de9c0);}}}}catch(_0x10adbd){this[_0x4ec955(0x177)][_0x4ec955(0x173)](_0x10adbd instanceof salesforce_error_1[_0x4ec955(0x164)]?JSON[_0x4ec955(0x18e)](_0x10adbd['toJSON'](),null,0x2):_0x10adbd),this[_0x4ec955(0x193)][_0x4ec955(0x170)](_0x10adbd instanceof salesforce_error_1[_0x4ec955(0x164)]?JSON[_0x4ec955(0x18e)](_0x10adbd[_0x4ec955(0x14f)](),null,0x2):_0x10adbd[_0x4ec955(0x181)]());throw _0x10adbd;}}async[a194_0x17c250(0x18b)](_0x121415){const _0x1169b7=a194_0x17c250;for(const _0xb291ba of _0x121415){if(!_0xb291ba[_0x1169b7(0x17e)][_0x1169b7(0x169)]&&!_0xb291ba[_0x1169b7(0x17a)]['length']&&!_0xb291ba[_0x1169b7(0x186)][_0x1169b7(0x169)])continue;const _0x59e90e=[],_0x38ebba=[],_0x2d96e5=new salesforce_components_manager_service_1[(_0x1169b7(0x172))](this['options'][_0x1169b7(0x17c)],this[_0x1169b7(0x163)][_0x1169b7(0x14d)],_0xb291ba[_0x1169b7(0x150)],this['options']['recordTypes'],this[_0x1169b7(0x174)]);_0x59e90e[_0x1169b7(0x14e)](...await _0x2d96e5[_0x1169b7(0x168)](_0xb291ba['inserted'],this['options'][_0x1169b7(0x18c)])),_0x59e90e[_0x1169b7(0x14e)](...await _0x2d96e5[_0x1169b7(0x16c)](_0xb291ba[_0x1169b7(0x17a)],this[_0x1169b7(0x163)]['commitId'])),_0x38ebba[_0x1169b7(0x14e)](await _0x2d96e5[_0x1169b7(0x185)](_0xb291ba['removed'],!![])),this[_0x1169b7(0x174)]=_0x2d96e5['getProceededComponentsMeta'](),await this['proceedRequests'](_0x59e90e,!![]);for(const _0x35101d of _0x38ebba){_0x35101d[_0x1169b7(0x190)]['length']&&await this[_0x1169b7(0x18f)](_0x35101d[_0x1169b7(0x190)],!![]),_0x35101d['componentsToUpdate'][_0x1169b7(0x169)]&&await this[_0x1169b7(0x18f)](_0x35101d['componentsToUpdate'],!![]),_0x35101d['componentsToDelete']['length']&&await this[_0x1169b7(0x18f)](_0x35101d['componentsToDelete'],!![]);}this[_0x1169b7(0x177)][_0x1169b7(0x170)](_0x1169b7(0x16e),_0x59e90e[_0x1169b7(0x169)]);}}async[a194_0x17c250(0x191)](_0x596b94){const _0x5f3491=a194_0x17c250,_0x3b475b=[],_0x3e15b8=[];for(const _0x583405 of _0x596b94){if(!_0x583405[_0x5f3491(0x17e)][_0x5f3491(0x169)]&&!_0x583405[_0x5f3491(0x17a)]['length']&&!_0x583405[_0x5f3491(0x186)][_0x5f3491(0x169)])continue;const _0x183db7=new salesforce_components_manager_service_1['SalesforceComponentsManager'](this[_0x5f3491(0x163)][_0x5f3491(0x17c)],this[_0x5f3491(0x163)][_0x5f3491(0x14d)],_0x583405[_0x5f3491(0x150)],this[_0x5f3491(0x163)][_0x5f3491(0x17b)],[]);_0x3b475b[_0x5f3491(0x14e)](...await _0x183db7[_0x5f3491(0x168)](_0x583405[_0x5f3491(0x17e)])),_0x3b475b['push'](...await _0x183db7[_0x5f3491(0x16c)](_0x583405[_0x5f3491(0x17a)])),_0x3e15b8[_0x5f3491(0x14e)](await _0x183db7[_0x5f3491(0x185)](_0x583405[_0x5f3491(0x186)]));}this[_0x5f3491(0x177)][_0x5f3491(0x170)](_0x5f3491(0x180),_0x3b475b['length']),await this[_0x5f3491(0x18f)](_0x3b475b);const _0x17f243=_0x3e15b8['reduce']((_0x2cbb70,_0x1d1d81)=>({'manifests':[..._0x2cbb70[_0x5f3491(0x190)],..._0x1d1d81[_0x5f3491(0x190)]],'componentsToDelete':[..._0x2cbb70[_0x5f3491(0x18a)],..._0x1d1d81[_0x5f3491(0x18a)]],'componentsToUpdate':[..._0x2cbb70['componentsToUpdate'],..._0x1d1d81[_0x5f3491(0x156)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x17f243[_0x5f3491(0x190)]['length']&&await this[_0x5f3491(0x18f)](_0x17f243[_0x5f3491(0x190)],!![]),_0x17f243[_0x5f3491(0x156)][_0x5f3491(0x169)]&&await this[_0x5f3491(0x18f)](_0x17f243[_0x5f3491(0x156)],!![]),_0x17f243[_0x5f3491(0x18a)][_0x5f3491(0x169)]&&await this[_0x5f3491(0x18f)](_0x17f243[_0x5f3491(0x18a)],!![]);}async[a194_0x17c250(0x151)](_0x131c25){const _0x415d66=a194_0x17c250;this['options'][_0x415d66(0x14d)]?await this[_0x415d66(0x191)](_0x131c25):await this['proceedCommitsToRepository'](_0x131c25);}}function a194_0x42d1(_0x2d78dd,_0x243e50){const _0x57b39e=a194_0x172c();return a194_0x42d1=function(_0x2d3f5f,_0x3d0221){_0x2d3f5f=_0x2d3f5f-0x14d;let _0x172c92=_0x57b39e[_0x2d3f5f];return _0x172c92;},a194_0x42d1(_0x2d78dd,_0x243e50);}exports[a194_0x17c250(0x15a)]=SalesforceCommitsManager;