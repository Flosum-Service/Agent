const a194_0x2b1e69=a194_0x23a5;(function(_0x3c9f0e,_0xc47727){const _0x800de7=a194_0x23a5,_0x3972aa=_0x3c9f0e();while(!![]){try{const _0x1524f5=parseInt(_0x800de7(0x12f))/0x1*(parseInt(_0x800de7(0x13b))/0x2)+parseInt(_0x800de7(0x130))/0x3*(parseInt(_0x800de7(0x12a))/0x4)+-parseInt(_0x800de7(0x123))/0x5*(-parseInt(_0x800de7(0x10d))/0x6)+-parseInt(_0x800de7(0x106))/0x7+-parseInt(_0x800de7(0x125))/0x8*(parseInt(_0x800de7(0x149))/0x9)+-parseInt(_0x800de7(0x120))/0xa+parseInt(_0x800de7(0x145))/0xb*(parseInt(_0x800de7(0x141))/0xc);if(_0x1524f5===_0xc47727)break;else _0x3972aa['push'](_0x3972aa['shift']());}catch(_0x5c2435){_0x3972aa['push'](_0x3972aa['shift']());}}}(a194_0x3890,0x2a48b));const a194_0x33b540=(function(){let _0xf1ec10=!![];return function(_0x2431ca,_0x3171cd){const _0x2594c2=_0xf1ec10?function(){const _0x2a3d48=a194_0x23a5;if(_0x3171cd){const _0x2009bf=_0x3171cd[_0x2a3d48(0x134)](_0x2431ca,arguments);return _0x3171cd=null,_0x2009bf;}}:function(){};return _0xf1ec10=![],_0x2594c2;};}()),a194_0xaa5ff5=a194_0x33b540(this,function(){const _0x337c24=a194_0x23a5;return a194_0xaa5ff5[_0x337c24(0x139)]()[_0x337c24(0x103)](_0x337c24(0x10c))['toString']()[_0x337c24(0x11b)](a194_0xaa5ff5)[_0x337c24(0x103)]('(((.+)+)+)+$');});function a194_0x3890(){const _0x14928f=['proceedCommitsToBranch','760655BsSDEl','recordTypes','name','modified','componentsToDelete','typedi','(((.+)+)+)+$','44166koSgQC','graph','proceedCommits','../utils/composite.utils','__esModule','commitId','extractComponentIdsFromGraphsResponse','chunkArray','SalesforceCompositeService','inserted','componentId','find','toJSON','proceededComponentsMeta','constructor','repositoryId','sfLogger','./salesforce-components-manager.service','composite','1042830fyUkoR','Logger','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','140UWWPUm','log','8gHratE','../../../../constants','proceedCommitsToRepository','defineProperty','../../../../core','4RYqWvy','proceedRequests','reduce','options','removed','2545suMtgC','304632XlebCo','delete','componentsToUpdate','push','apply','insert','floor','SalesforceComponentsManager','splice','toString','get','62xvBmsi','SalesforceCommitsManager','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','executeGraphs','error','update','12KCAaIj','default','logger','length','900713PozNak','author','stringify','manifests','740583nzprzw','COMPONENTS_PER_CHUNK','SalesforceError','./salesforce-composite.service','getProceededComponentsMeta','search','branchId'];a194_0x3890=function(){return _0x14928f;};return a194_0x3890();}a194_0xaa5ff5();'use strict';function a194_0x23a5(_0x204ee2,_0x31ce4b){const _0x59e6c9=a194_0x3890();return a194_0x23a5=function(_0xaa5ff5,_0x33b540){_0xaa5ff5=_0xaa5ff5-0x101;let _0x389001=_0x59e6c9[_0xaa5ff5];return _0x389001;},a194_0x23a5(_0x204ee2,_0x31ce4b);}var __importDefault=this&&this['__importDefault']||function(_0x3cfa95){const _0x5a78c9=a194_0x23a5;return _0x3cfa95&&_0x3cfa95[_0x5a78c9(0x111)]?_0x3cfa95:{'default':_0x3cfa95};};Object[a194_0x2b1e69(0x128)](exports,'__esModule',{'value':!![]}),exports[a194_0x2b1e69(0x13c)]=void 0x0;const core_1=require(a194_0x2b1e69(0x129)),typedi_1=__importDefault(require(a194_0x2b1e69(0x10b))),constants_1=require(a194_0x2b1e69(0x126)),utils_1=require('../../../shared/utils'),salesforce_error_1=require('../errors/salesforce.error'),composite_utils_1=require(a194_0x2b1e69(0x110)),salesforce_components_manager_service_1=require(a194_0x2b1e69(0x11e)),salesforce_composite_service_1=require(a194_0x2b1e69(0x101));class SalesforceCommitsManager{constructor(_0x4535d2){const _0x315b8d=a194_0x2b1e69;this[_0x315b8d(0x12d)]=_0x4535d2,this['COMPONENTS_PER_CHUNK']=0x3,this['logger']=new core_1[(_0x315b8d(0x121))](SalesforceCommitsManager[_0x315b8d(0x108)]),this[_0x315b8d(0x11d)]=this[_0x315b8d(0x12d)][_0x315b8d(0x143)],this[_0x315b8d(0x11f)]=typedi_1[_0x315b8d(0x142)][_0x315b8d(0x13a)](salesforce_composite_service_1[_0x315b8d(0x115)]),this[_0x315b8d(0x11a)]=[];}async[a194_0x2b1e69(0x12b)](_0x59252d,_0x1234d1=![]){const _0x104821=a194_0x2b1e69,_0x1a1815=(this[_0x104821(0x14a)]+ +_0x1234d1)*0x3,_0x48d296=(0x0,utils_1[_0x104821(0x114)])(_0x59252d,_0x1a1815);try{while(_0x48d296[_0x104821(0x144)]){const _0x20b101=_0x48d296[_0x104821(0x138)](0x0,Math[_0x104821(0x136)](constants_1['SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST']/_0x1a1815));await this[_0x104821(0x143)][_0x104821(0x124)]('Sending\x20'+_0x20b101[_0x104821(0x144)]*_0x1a1815+'\x20requests\x20to\x20composite\x20api.');const _0x458b10=_0x20b101['map']((_0x1d4c17,_0x4a3052)=>({'graphId':_0x104821(0x10e)+_0x4a3052,'compositeRequest':_0x1d4c17})),_0x433e6a=await this[_0x104821(0x11f)][_0x104821(0x13e)](_0x458b10);if(_0x1234d1){const _0x15de06=(0x0,composite_utils_1[_0x104821(0x113)])(_0x433e6a);for(const {id:_0x4a5483,ref:_0xb58b18}of _0x15de06){const _0xe4b438=this[_0x104821(0x11a)][_0x104821(0x118)](_0x16d147=>_0x16d147['reference']===_0xb58b18);_0xe4b438&&(_0xe4b438[_0x104821(0x117)]=_0x4a5483);}}}}catch(_0x4074a3){this[_0x104821(0x143)][_0x104821(0x13f)](_0x4074a3 instanceof salesforce_error_1['SalesforceError']?JSON[_0x104821(0x147)](_0x4074a3[_0x104821(0x119)](),null,0x2):_0x4074a3),this[_0x104821(0x11d)][_0x104821(0x124)](_0x4074a3 instanceof salesforce_error_1[_0x104821(0x14b)]?JSON['stringify'](_0x4074a3[_0x104821(0x119)](),null,0x2):_0x4074a3['toString']());throw _0x4074a3;}}async[a194_0x2b1e69(0x127)](_0x5f1abb){const _0x2deee5=a194_0x2b1e69;for(const _0x2794e5 of _0x5f1abb){if(!_0x2794e5[_0x2deee5(0x116)]['length']&&!_0x2794e5[_0x2deee5(0x109)][_0x2deee5(0x144)]&&!_0x2794e5[_0x2deee5(0x12e)][_0x2deee5(0x144)])continue;const _0x312bf1=[],_0x31fe61=[],_0x4022c6=new salesforce_components_manager_service_1[(_0x2deee5(0x137))](this['options'][_0x2deee5(0x11c)],this['options'][_0x2deee5(0x104)],_0x2794e5[_0x2deee5(0x146)],this[_0x2deee5(0x12d)][_0x2deee5(0x107)],this[_0x2deee5(0x11a)]);_0x312bf1[_0x2deee5(0x133)](...await _0x4022c6[_0x2deee5(0x135)](_0x2794e5['inserted'],this[_0x2deee5(0x12d)][_0x2deee5(0x112)])),_0x312bf1[_0x2deee5(0x133)](...await _0x4022c6['update'](_0x2794e5[_0x2deee5(0x109)],this[_0x2deee5(0x12d)][_0x2deee5(0x112)])),_0x31fe61[_0x2deee5(0x133)](await _0x4022c6[_0x2deee5(0x131)](_0x2794e5[_0x2deee5(0x12e)],!![])),this[_0x2deee5(0x11a)]=_0x4022c6[_0x2deee5(0x102)](),await this[_0x2deee5(0x12b)](_0x312bf1,!![]);for(const _0xb2f4e2 of _0x31fe61){_0xb2f4e2[_0x2deee5(0x148)][_0x2deee5(0x144)]&&await this['proceedRequests'](_0xb2f4e2['manifests'],!![]),_0xb2f4e2[_0x2deee5(0x132)][_0x2deee5(0x144)]&&await this[_0x2deee5(0x12b)](_0xb2f4e2[_0x2deee5(0x132)],!![]),_0xb2f4e2[_0x2deee5(0x10a)][_0x2deee5(0x144)]&&await this[_0x2deee5(0x12b)](_0xb2f4e2[_0x2deee5(0x10a)],!![]);}this[_0x2deee5(0x143)]['log'](_0x2deee5(0x13d),_0x312bf1[_0x2deee5(0x144)]);}}async[a194_0x2b1e69(0x105)](_0x2a6534){const _0x412eab=a194_0x2b1e69,_0x1170b6=[],_0xeee704=[];for(const _0x1184ab of _0x2a6534){if(!_0x1184ab['inserted'][_0x412eab(0x144)]&&!_0x1184ab[_0x412eab(0x109)][_0x412eab(0x144)]&&!_0x1184ab[_0x412eab(0x12e)]['length'])continue;const _0x3b8181=new salesforce_components_manager_service_1[(_0x412eab(0x137))](this[_0x412eab(0x12d)][_0x412eab(0x11c)],this[_0x412eab(0x12d)][_0x412eab(0x104)],_0x1184ab[_0x412eab(0x146)],this['options'][_0x412eab(0x107)],[]);_0x1170b6['push'](...await _0x3b8181[_0x412eab(0x135)](_0x1184ab['inserted'])),_0x1170b6[_0x412eab(0x133)](...await _0x3b8181[_0x412eab(0x140)](_0x1184ab['modified'])),_0xeee704[_0x412eab(0x133)](await _0x3b8181['delete'](_0x1184ab[_0x412eab(0x12e)]));}this[_0x412eab(0x143)]['log'](_0x412eab(0x122),_0x1170b6['length']),await this['proceedRequests'](_0x1170b6);const _0x18b06d=_0xeee704[_0x412eab(0x12c)]((_0x50d557,_0x25ae74)=>({'manifests':[..._0x50d557[_0x412eab(0x148)],..._0x25ae74[_0x412eab(0x148)]],'componentsToDelete':[..._0x50d557[_0x412eab(0x10a)],..._0x25ae74[_0x412eab(0x10a)]],'componentsToUpdate':[..._0x50d557[_0x412eab(0x132)],..._0x25ae74[_0x412eab(0x132)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x18b06d[_0x412eab(0x148)][_0x412eab(0x144)]&&await this[_0x412eab(0x12b)](_0x18b06d['manifests'],!![]),_0x18b06d['componentsToUpdate'][_0x412eab(0x144)]&&await this[_0x412eab(0x12b)](_0x18b06d[_0x412eab(0x132)],!![]),_0x18b06d[_0x412eab(0x10a)]['length']&&await this[_0x412eab(0x12b)](_0x18b06d[_0x412eab(0x10a)],!![]);}async[a194_0x2b1e69(0x10f)](_0x4916eb){const _0x5f5007=a194_0x2b1e69;this['options'][_0x5f5007(0x104)]?await this[_0x5f5007(0x105)](_0x4916eb):await this[_0x5f5007(0x127)](_0x4916eb);}}exports['SalesforceCommitsManager']=SalesforceCommitsManager;