const a176_0x44f73a=a176_0x30a9;(function(_0x383880,_0x59a934){const _0x1839f9=a176_0x30a9,_0x2add52=_0x383880();while(!![]){try{const _0x3d8947=-parseInt(_0x1839f9(0x183))/0x1+-parseInt(_0x1839f9(0x18c))/0x2+-parseInt(_0x1839f9(0x194))/0x3*(-parseInt(_0x1839f9(0x1b7))/0x4)+-parseInt(_0x1839f9(0x1a5))/0x5+parseInt(_0x1839f9(0x196))/0x6+parseInt(_0x1839f9(0x197))/0x7*(-parseInt(_0x1839f9(0x1af))/0x8)+parseInt(_0x1839f9(0x1a7))/0x9;if(_0x3d8947===_0x59a934)break;else _0x2add52['push'](_0x2add52['shift']());}catch(_0x66945){_0x2add52['push'](_0x2add52['shift']());}}}(a176_0x9c2a,0x8b72e));const a176_0x4a7fcf=(function(){let _0x5bb411=!![];return function(_0x220ecb,_0x38954c){const _0x1f95d5=_0x5bb411?function(){const _0x973f52=a176_0x30a9;if(_0x38954c){const _0x2fff1e=_0x38954c[_0x973f52(0x1bf)](_0x220ecb,arguments);return _0x38954c=null,_0x2fff1e;}}:function(){};return _0x5bb411=![],_0x1f95d5;};}()),a176_0x3a979f=a176_0x4a7fcf(this,function(){const _0x528eff=a176_0x30a9;return a176_0x3a979f['toString']()[_0x528eff(0x18b)](_0x528eff(0x1bd))[_0x528eff(0x19e)]()['constructor'](a176_0x3a979f)[_0x528eff(0x18b)](_0x528eff(0x1bd));});a176_0x3a979f();function a176_0x30a9(_0x12ce7c,_0x1c52a2){const _0x225b2e=a176_0x9c2a();return a176_0x30a9=function(_0x3a979f,_0x4a7fcf){_0x3a979f=_0x3a979f-0x17c;let _0x9c2a0=_0x225b2e[_0x3a979f];return _0x9c2a0;},a176_0x30a9(_0x12ce7c,_0x1c52a2);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4dc7f6){const _0x4a37eb=a176_0x30a9;return _0x4dc7f6&&_0x4dc7f6[_0x4a37eb(0x188)]?_0x4dc7f6:{'default':_0x4dc7f6};};Object[a176_0x44f73a(0x1c0)](exports,a176_0x44f73a(0x188),{'value':!![]}),exports[a176_0x44f73a(0x193)]=void 0x0;const core_1=require(a176_0x44f73a(0x18f)),typedi_1=__importDefault(require(a176_0x44f73a(0x1a8))),constants_1=require(a176_0x44f73a(0x18d)),utils_1=require(a176_0x44f73a(0x1be)),salesforce_error_1=require(a176_0x44f73a(0x1b0)),composite_utils_1=require(a176_0x44f73a(0x1c3)),salesforce_components_manager_service_1=require(a176_0x44f73a(0x1a0)),salesforce_composite_service_1=require(a176_0x44f73a(0x195)),salesforce_git_sync_service_1=require(a176_0x44f73a(0x182));class SalesforceCommitsManager{constructor(_0x55c6a2){const _0x2eace2=a176_0x44f73a;this[_0x2eace2(0x1aa)]=_0x55c6a2,this[_0x2eace2(0x1a6)]=0x3,this['logger']=new core_1[(_0x2eace2(0x1b4))](SalesforceCommitsManager[_0x2eace2(0x18e)]),this['sfLogger']=this['options']['logger'],this['composite']=typedi_1[_0x2eace2(0x17f)]['get'](salesforce_composite_service_1[_0x2eace2(0x1ab)]),this[_0x2eace2(0x187)]=typedi_1[_0x2eace2(0x17f)][_0x2eace2(0x1a9)](salesforce_git_sync_service_1[_0x2eace2(0x180)]),this[_0x2eace2(0x19c)]=[];}async[a176_0x44f73a(0x17d)](_0x429070,_0x1e5680=![]){const _0x46adaf=a176_0x44f73a,_0x213ef2=(this['COMPONENTS_PER_CHUNK']+ +_0x1e5680)*0x3,_0x5bf677=utils_1[_0x46adaf(0x198)](_0x429070,_0x213ef2);try{while(_0x5bf677[_0x46adaf(0x1bc)]){const _0x420360=_0x5bf677['splice'](0x0,Math[_0x46adaf(0x1a4)](constants_1['SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST']/_0x213ef2));await this[_0x46adaf(0x19a)]['log']('Sending\x20'+_0x420360[_0x46adaf(0x1bc)]*_0x213ef2+_0x46adaf(0x1ae))['send']();const _0x1f497d=_0x420360['map']((_0x3325d7,_0x54c574)=>({'graphId':_0x46adaf(0x1b6)+_0x54c574,'compositeRequest':_0x3325d7})),_0xfa1b00=await this[_0x46adaf(0x190)][_0x46adaf(0x19d)](_0x1f497d);if(_0x1e5680){const _0x9dc7a4=composite_utils_1[_0x46adaf(0x19b)](_0xfa1b00);for(const {id:_0x457349,ref:_0x1757a2}of _0x9dc7a4){const _0x184198=this[_0x46adaf(0x19c)][_0x46adaf(0x1ba)](_0x5dc262=>_0x5dc262[_0x46adaf(0x192)]===_0x1757a2);_0x184198&&(_0x184198[_0x46adaf(0x1a2)]=_0x457349);}}}}catch(_0x3d672a){this[_0x46adaf(0x189)]['error'](_0x3d672a instanceof salesforce_error_1[_0x46adaf(0x1bb)]?JSON[_0x46adaf(0x181)](_0x3d672a['toJSON'](),null,0x2):_0x3d672a),this['sfLogger'][_0x46adaf(0x1ad)](_0x3d672a instanceof salesforce_error_1[_0x46adaf(0x1bb)]?JSON['stringify'](_0x3d672a[_0x46adaf(0x1c4)](),null,0x2):_0x3d672a['toString']());throw _0x3d672a;}}async[a176_0x44f73a(0x184)](_0x3eeec8){const _0x1a18f6=a176_0x44f73a;for(const _0x2b49a3 of _0x3eeec8){if(!_0x2b49a3[_0x1a18f6(0x1c1)][_0x1a18f6(0x1bc)]&&!_0x2b49a3[_0x1a18f6(0x1b2)][_0x1a18f6(0x1bc)]&&!_0x2b49a3['removed']['length'])continue;const _0x508cdd=[],_0x5df098=[],_0x343d09=new salesforce_components_manager_service_1[(_0x1a18f6(0x185))](this[_0x1a18f6(0x1aa)]['repositoryId'],this['options'][_0x1a18f6(0x17e)],_0x2b49a3['author'],this[_0x1a18f6(0x1aa)]['recordTypes'],this[_0x1a18f6(0x19c)]);_0x508cdd[_0x1a18f6(0x19f)](...await _0x343d09[_0x1a18f6(0x1b9)](_0x2b49a3[_0x1a18f6(0x1c1)],this[_0x1a18f6(0x1aa)][_0x1a18f6(0x17c)])),_0x508cdd['push'](...await _0x343d09['update'](_0x2b49a3[_0x1a18f6(0x1b2)],this[_0x1a18f6(0x1aa)][_0x1a18f6(0x17c)])),_0x5df098[_0x1a18f6(0x19f)](await _0x343d09[_0x1a18f6(0x1a1)](_0x2b49a3[_0x1a18f6(0x1c2)],!![])),this['proceededComponentsMeta']=_0x343d09[_0x1a18f6(0x1b3)](),await this['proceedRequests'](_0x508cdd,!![]);for(const _0x26ba3d of _0x5df098){_0x26ba3d[_0x1a18f6(0x191)][_0x1a18f6(0x1bc)]&&await this[_0x1a18f6(0x17d)](_0x26ba3d[_0x1a18f6(0x191)],!![]),_0x26ba3d[_0x1a18f6(0x1a3)][_0x1a18f6(0x1bc)]&&await this[_0x1a18f6(0x17d)](_0x26ba3d[_0x1a18f6(0x1a3)],!![]),_0x26ba3d['componentsToDelete'][_0x1a18f6(0x1bc)]&&await this[_0x1a18f6(0x17d)](_0x26ba3d[_0x1a18f6(0x1b5)],!![]);}this[_0x1a18f6(0x189)]['log'](_0x1a18f6(0x18a),_0x508cdd[_0x1a18f6(0x1bc)]);}}async[a176_0x44f73a(0x199)](_0x4d3359){const _0x4f0541=a176_0x44f73a,_0x31b5da=[],_0x50c04e=[];for(const _0x5f3f87 of _0x4d3359){if(!_0x5f3f87['inserted']['length']&&!_0x5f3f87[_0x4f0541(0x1b2)][_0x4f0541(0x1bc)]&&!_0x5f3f87[_0x4f0541(0x1c2)][_0x4f0541(0x1bc)])continue;const _0x21dbd6=new salesforce_components_manager_service_1['SalesforceComponentsManager'](this[_0x4f0541(0x1aa)][_0x4f0541(0x186)],this[_0x4f0541(0x1aa)][_0x4f0541(0x17e)],_0x5f3f87['author'],this[_0x4f0541(0x1aa)][_0x4f0541(0x1b1)],[]);_0x31b5da[_0x4f0541(0x19f)](...await _0x21dbd6[_0x4f0541(0x1b9)](_0x5f3f87['inserted'])),_0x31b5da[_0x4f0541(0x19f)](...await _0x21dbd6[_0x4f0541(0x1ac)](_0x5f3f87[_0x4f0541(0x1b2)])),_0x50c04e['push'](await _0x21dbd6[_0x4f0541(0x1a1)](_0x5f3f87[_0x4f0541(0x1c2)]));}this[_0x4f0541(0x189)][_0x4f0541(0x1ad)]('have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)',_0x31b5da[_0x4f0541(0x1bc)]),await this['proceedRequests'](_0x31b5da);const _0x50c6a8=_0x50c04e[_0x4f0541(0x1b8)]((_0x486081,_0x44d527)=>({'manifests':[..._0x486081[_0x4f0541(0x191)],..._0x44d527[_0x4f0541(0x191)]],'componentsToDelete':[..._0x486081['componentsToDelete'],..._0x44d527[_0x4f0541(0x1b5)]],'componentsToUpdate':[..._0x486081['componentsToUpdate'],..._0x44d527[_0x4f0541(0x1a3)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x50c6a8[_0x4f0541(0x191)]['length']&&await this[_0x4f0541(0x17d)](_0x50c6a8['manifests'],!![]),_0x50c6a8[_0x4f0541(0x1a3)][_0x4f0541(0x1bc)]&&await this[_0x4f0541(0x17d)](_0x50c6a8[_0x4f0541(0x1a3)],!![]),_0x50c6a8[_0x4f0541(0x1b5)]['length']&&await this[_0x4f0541(0x17d)](_0x50c6a8[_0x4f0541(0x1b5)],!![]);}async['proceedCommits'](_0x5dfa3c){const _0x19f198=a176_0x44f73a;this['options'][_0x19f198(0x17e)]?await this[_0x19f198(0x199)](_0x5dfa3c):await this['proceedCommitsToRepository'](_0x5dfa3c);}}function a176_0x9c2a(){const _0x5d6a05=['branchId','default','SalesforceGitSyncService','stringify','./salesforce-git-sync.service','792214zdrFeA','proceedCommitsToRepository','SalesforceComponentsManager','repositoryId','gitSync','__esModule','logger','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','search','418752WWrgAY','../../../../constants','name','../../../../core','composite','manifests','reference','SalesforceCommitsManager','27KmHcjF','./salesforce-composite.service','3833784rDkdMO','960211KhEURI','chunkArray','proceedCommitsToBranch','sfLogger','extractComponentIdsFromGraphsResponse','proceededComponentsMeta','executeGraphs','toString','push','./salesforce-components-manager.service','delete','componentId','componentsToUpdate','floor','2921405bQfhmL','COMPONENTS_PER_CHUNK','6287823JeIvfE','typedi','get','options','SalesforceCompositeService','update','log','\x20requests\x20to\x20composite\x20api.','16yIzCwc','../errors/salesforce.error','recordTypes','modified','getProceededComponentsMeta','Logger','componentsToDelete','graph','486128ajwrYx','reduce','insert','find','SalesforceError','length','(((.+)+)+)+$','../../../shared/utils','apply','defineProperty','inserted','removed','../utils/composite.utils','toJSON','commitId','proceedRequests'];a176_0x9c2a=function(){return _0x5d6a05;};return a176_0x9c2a();}exports[a176_0x44f73a(0x193)]=SalesforceCommitsManager;