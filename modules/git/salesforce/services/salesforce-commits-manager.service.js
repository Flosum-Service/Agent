function a233_0x4180(_0x48e1e6,_0x438afd){const _0x41ce8a=a233_0x34ea();return a233_0x4180=function(_0x60e38b,_0x35c8d9){_0x60e38b=_0x60e38b-0x166;let _0x34eaf8=_0x41ce8a[_0x60e38b];return _0x34eaf8;},a233_0x4180(_0x48e1e6,_0x438afd);}const a233_0x4cbea8=a233_0x4180;(function(_0x50e7fd,_0x23925b){const _0x1e187b=a233_0x4180,_0x3c5373=_0x50e7fd();while(!![]){try{const _0x548d98=parseInt(_0x1e187b(0x166))/0x1*(parseInt(_0x1e187b(0x188))/0x2)+-parseInt(_0x1e187b(0x168))/0x3+parseInt(_0x1e187b(0x177))/0x4*(parseInt(_0x1e187b(0x16d))/0x5)+-parseInt(_0x1e187b(0x16b))/0x6*(-parseInt(_0x1e187b(0x17f))/0x7)+-parseInt(_0x1e187b(0x173))/0x8+-parseInt(_0x1e187b(0x18d))/0x9+parseInt(_0x1e187b(0x16e))/0xa*(parseInt(_0x1e187b(0x19f))/0xb);if(_0x548d98===_0x23925b)break;else _0x3c5373['push'](_0x3c5373['shift']());}catch(_0x5ad789){_0x3c5373['push'](_0x3c5373['shift']());}}}(a233_0x34ea,0x4bee2));const a233_0x35c8d9=(function(){let _0x5ef309=!![];return function(_0x69ff38,_0x22160e){const _0x217a13=_0x5ef309?function(){const _0x491956=a233_0x4180;if(_0x22160e){const _0x3aae9e=_0x22160e[_0x491956(0x16f)](_0x69ff38,arguments);return _0x22160e=null,_0x3aae9e;}}:function(){};return _0x5ef309=![],_0x217a13;};}()),a233_0x60e38b=a233_0x35c8d9(this,function(){const _0x5a29c3=a233_0x4180;return a233_0x60e38b[_0x5a29c3(0x1a1)]()['search']('(((.+)+)+)+$')['toString']()[_0x5a29c3(0x16a)](a233_0x60e38b)['search'](_0x5a29c3(0x17c));});a233_0x60e38b();'use strict';var __importDefault=this&&this[a233_0x4cbea8(0x19a)]||function(_0x1cfc95){return _0x1cfc95&&_0x1cfc95['__esModule']?_0x1cfc95:{'default':_0x1cfc95};};Object['defineProperty'](exports,a233_0x4cbea8(0x1ad),{'value':!![]}),exports[a233_0x4cbea8(0x197)]=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require(a233_0x4cbea8(0x1aa))),constants_1=require(a233_0x4cbea8(0x1a4)),utils_1=require(a233_0x4cbea8(0x1a5)),salesforce_error_1=require(a233_0x4cbea8(0x183)),composite_utils_1=require('../utils/composite.utils'),salesforce_components_manager_service_1=require(a233_0x4cbea8(0x178)),salesforce_composite_service_1=require(a233_0x4cbea8(0x18b));class SalesforceCommitsManager{constructor(_0x344f8c){const _0x5f45c6=a233_0x4cbea8;this[_0x5f45c6(0x169)]=_0x344f8c,this[_0x5f45c6(0x17b)]=0x3,this['logger']=new core_1[(_0x5f45c6(0x1a3))](SalesforceCommitsManager[_0x5f45c6(0x195)]),this[_0x5f45c6(0x17e)]=this[_0x5f45c6(0x169)]['logger'],this[_0x5f45c6(0x184)]=typedi_1['default'][_0x5f45c6(0x1a2)](salesforce_composite_service_1['SalesforceCompositeService']),this[_0x5f45c6(0x1ab)]=[];}async[a233_0x4cbea8(0x19e)](_0x116bdb,_0x17e79e=![]){const _0x597d03=a233_0x4cbea8,_0x3a60c5=async _0x28099e=>{const _0x1847d8=a233_0x4180;await this[_0x1847d8(0x170)]['log'](_0x1847d8(0x18e)+_0x28099e[_0x1847d8(0x1af)]((_0x492fb4,_0x210195)=>_0x492fb4+_0x210195[_0x1847d8(0x19c)],0x0)+'\x20requests\x20to\x20composite\x20api.');const _0x361064=_0x28099e['map']((_0x3f9c67,_0x5afc73)=>({'graphId':'graph'+_0x5afc73,'compositeRequest':_0x3f9c67})),_0x18b64e=await this[_0x1847d8(0x184)][_0x1847d8(0x19d)](_0x361064);if(_0x17e79e){const _0x436aad=(0x0,composite_utils_1[_0x1847d8(0x171)])(_0x18b64e);for(const {id:_0x155713,ref:_0x3e73d8}of _0x436aad){const _0x447976=this[_0x1847d8(0x1ab)][_0x1847d8(0x1ac)](_0x401360=>_0x401360[_0x1847d8(0x16c)]===_0x3e73d8);_0x447976&&(_0x447976['componentId']=_0x155713);}}},_0x1f74c9=0x1e8480;let _0x50a1bd=0x0,_0xa4b565=[];for(const _0x391da8 of _0x116bdb){const _0x2a238d=_0x391da8[_0x597d03(0x1af)]((_0x24b511,_0x375685)=>{const _0x3784fb=_0x597d03,_0xa217b5=JSON[_0x3784fb(0x193)](_0x375685)[_0x3784fb(0x19c)]*0x2;return _0x24b511+_0xa217b5;},0x0);if(_0x2a238d>constants_1[_0x597d03(0x186)])throw new salesforce_error_1[(_0x597d03(0x196))](_0x597d03(0x1a8)+constants_1['SALESFORCE_MAX_REQUEST_SIZE_BYTES']+_0x597d03(0x176)+_0x2a238d);_0x50a1bd+_0x2a238d>constants_1['SALESFORCE_MAX_REQUEST_SIZE_BYTES']-_0x1f74c9&&(await _0x3a60c5(_0xa4b565),_0xa4b565=[],_0x50a1bd=0x0),_0x50a1bd+=_0x2a238d,_0xa4b565['push'](_0x391da8);}_0xa4b565['length']&&await _0x3a60c5(_0xa4b565);}async[a233_0x4cbea8(0x190)](_0xb0d30e,_0x490b3f=![]){const _0x25aa2f=a233_0x4cbea8,_0xcb28d2=(this['COMPONENTS_PER_CHUNK']+ +_0x490b3f)*0x3,_0x4d4bf8=(0x0,utils_1['chunkArray'])(_0xb0d30e,_0xcb28d2);try{while(_0x4d4bf8['length']){const _0x5aecc0=_0x4d4bf8[_0x25aa2f(0x1a0)](0x0,Math[_0x25aa2f(0x1a9)](constants_1[_0x25aa2f(0x167)]/_0xcb28d2));await this[_0x25aa2f(0x19e)](_0x5aecc0,_0x490b3f);}}catch(_0x406553){this[_0x25aa2f(0x170)][_0x25aa2f(0x198)](_0x406553 instanceof salesforce_error_1[_0x25aa2f(0x196)]?JSON[_0x25aa2f(0x193)](_0x406553[_0x25aa2f(0x1ae)](),null,0x2):_0x406553),this[_0x25aa2f(0x17e)]['log'](_0x406553 instanceof salesforce_error_1[_0x25aa2f(0x196)]?JSON[_0x25aa2f(0x193)](_0x406553[_0x25aa2f(0x1ae)](),null,0x2):_0x406553['toString']());throw _0x406553;}}async['proceedCommitsToRepository'](_0x32584e){const _0x554743=a233_0x4cbea8;for(const _0x3bc8b4 of _0x32584e){if(!_0x3bc8b4[_0x554743(0x179)][_0x554743(0x19c)]&&!_0x3bc8b4[_0x554743(0x182)][_0x554743(0x19c)]&&!_0x3bc8b4['removed'][_0x554743(0x19c)])continue;const _0x3ef464=[],_0x105868=[],_0xd07a33=new salesforce_components_manager_service_1[(_0x554743(0x192))](this[_0x554743(0x169)][_0x554743(0x181)],this[_0x554743(0x169)]['branchId'],_0x3bc8b4[_0x554743(0x174)],this[_0x554743(0x169)]['recordTypes'],this[_0x554743(0x1ab)]);_0x3ef464[_0x554743(0x1a7)](...await _0xd07a33[_0x554743(0x180)](_0x3bc8b4[_0x554743(0x179)],this[_0x554743(0x169)][_0x554743(0x187)])),_0x3ef464[_0x554743(0x1a7)](...await _0xd07a33['update'](_0x3bc8b4['modified'],this[_0x554743(0x169)][_0x554743(0x187)])),_0x105868[_0x554743(0x1a7)](await _0xd07a33['delete'](_0x3bc8b4[_0x554743(0x199)],!![])),this[_0x554743(0x1ab)]=_0xd07a33[_0x554743(0x17a)](),await this['proceedRequests'](_0x3ef464,!![]);for(const _0x47c666 of _0x105868){_0x47c666[_0x554743(0x175)][_0x554743(0x19c)]&&await this[_0x554743(0x190)](_0x47c666[_0x554743(0x175)],!![]),_0x47c666['componentsToUpdate'][_0x554743(0x19c)]&&await this[_0x554743(0x190)](_0x47c666[_0x554743(0x189)],!![]),_0x47c666[_0x554743(0x18a)][_0x554743(0x19c)]&&await this[_0x554743(0x190)](_0x47c666[_0x554743(0x18a)],!![]);}this['logger'][_0x554743(0x18f)](_0x554743(0x18c),_0x3ef464[_0x554743(0x19c)]);}}async[a233_0x4cbea8(0x1a6)](_0x1ef8ac){const _0x2b35f4=a233_0x4cbea8,_0x655a21=[],_0xddd0a7=[];for(const _0xb86c of _0x1ef8ac){if(!_0xb86c[_0x2b35f4(0x179)][_0x2b35f4(0x19c)]&&!_0xb86c[_0x2b35f4(0x182)][_0x2b35f4(0x19c)]&&!_0xb86c[_0x2b35f4(0x199)][_0x2b35f4(0x19c)])continue;const _0x8cb051=new salesforce_components_manager_service_1[(_0x2b35f4(0x192))](this['options']['repositoryId'],this[_0x2b35f4(0x169)][_0x2b35f4(0x172)],_0xb86c[_0x2b35f4(0x174)],this['options'][_0x2b35f4(0x17d)],[]);_0x655a21['push'](...await _0x8cb051['insert'](_0xb86c[_0x2b35f4(0x179)])),_0x655a21[_0x2b35f4(0x1a7)](...await _0x8cb051[_0x2b35f4(0x194)](_0xb86c[_0x2b35f4(0x182)])),_0xddd0a7['push'](await _0x8cb051[_0x2b35f4(0x19b)](_0xb86c[_0x2b35f4(0x199)]));}this['logger'][_0x2b35f4(0x18f)](_0x2b35f4(0x185),_0x655a21[_0x2b35f4(0x19c)]),await this[_0x2b35f4(0x190)](_0x655a21);const _0x57e9d8=_0xddd0a7['reduce']((_0x406a53,_0x37c5d5)=>({'manifests':[..._0x406a53['manifests'],..._0x37c5d5[_0x2b35f4(0x175)]],'componentsToDelete':[..._0x406a53['componentsToDelete'],..._0x37c5d5[_0x2b35f4(0x18a)]],'componentsToUpdate':[..._0x406a53[_0x2b35f4(0x189)],..._0x37c5d5[_0x2b35f4(0x189)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x57e9d8[_0x2b35f4(0x175)][_0x2b35f4(0x19c)]&&await this['proceedRequests'](_0x57e9d8[_0x2b35f4(0x175)],!![]),_0x57e9d8[_0x2b35f4(0x189)][_0x2b35f4(0x19c)]&&await this[_0x2b35f4(0x190)](_0x57e9d8[_0x2b35f4(0x189)],!![]),_0x57e9d8['componentsToDelete'][_0x2b35f4(0x19c)]&&await this[_0x2b35f4(0x190)](_0x57e9d8[_0x2b35f4(0x18a)],!![]);}async[a233_0x4cbea8(0x191)](_0x55a133){const _0x32723c=a233_0x4cbea8;this[_0x32723c(0x169)]['branchId']?await this['proceedCommitsToBranch'](_0x55a133):await this['proceedCommitsToRepository'](_0x55a133);}}function a233_0x34ea(){const _0x4d7be2=['proceedCommitsToBranch','push','Cannot\x20upload\x20components\x20due\x20to\x20size\x20-\x20MAX_SIZE\x20=\x20','floor','typedi','proceededComponentsMeta','find','__esModule','toJSON','reduce','654OmryOJ','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','1158099prqJNG','options','constructor','45366YHFBha','reference','2064055pCaLDN','1390TMNBxM','apply','logger','extractComponentIdsFromGraphsResponse','branchId','2577200IoTMhv','author','manifests','\x20COMPONENTS_SIZE\x20=\x20','4gKJHpN','./salesforce-components-manager.service','inserted','getProceededComponentsMeta','COMPONENTS_PER_CHUNK','(((.+)+)+)+$','recordTypes','sfLogger','413fZDxeN','insert','repositoryId','modified','../errors/salesforce.error','composite','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','SALESFORCE_MAX_REQUEST_SIZE_BYTES','commitId','274Gnqbaq','componentsToUpdate','componentsToDelete','./salesforce-composite.service','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','4754394arRaPH','Sending\x20','log','proceedRequests','proceedCommits','SalesforceComponentsManager','stringify','update','name','SalesforceError','SalesforceCommitsManager','error','removed','__importDefault','delete','length','executeGraphs','proceedChunksToUpload','47399zcInvj','splice','toString','get','Logger','../../../../constants','../../../shared/utils'];a233_0x34ea=function(){return _0x4d7be2;};return a233_0x34ea();}exports[a233_0x4cbea8(0x197)]=SalesforceCommitsManager;