const a233_0x38366f=a233_0x4098;(function(_0x5bf715,_0x9dc68a){const _0x166d9f=a233_0x4098,_0x1f8cc4=_0x5bf715();while(!![]){try{const _0x7dfd29=parseInt(_0x166d9f(0xac))/0x1*(parseInt(_0x166d9f(0x9e))/0x2)+parseInt(_0x166d9f(0x99))/0x3+-parseInt(_0x166d9f(0x8c))/0x4+-parseInt(_0x166d9f(0xba))/0x5*(-parseInt(_0x166d9f(0xad))/0x6)+parseInt(_0x166d9f(0xb5))/0x7+parseInt(_0x166d9f(0x8e))/0x8+-parseInt(_0x166d9f(0xce))/0x9*(parseInt(_0x166d9f(0xbf))/0xa);if(_0x7dfd29===_0x9dc68a)break;else _0x1f8cc4['push'](_0x1f8cc4['shift']());}catch(_0x29fbeb){_0x1f8cc4['push'](_0x1f8cc4['shift']());}}}(a233_0x327d,0x7342b));const a233_0x41806c=(function(){let _0x140227=!![];return function(_0x1b51c6,_0x87738e){const _0x3f55b2=_0x140227?function(){const _0x2cdb54=a233_0x4098;if(_0x87738e){const _0x263bdb=_0x87738e[_0x2cdb54(0xc7)](_0x1b51c6,arguments);return _0x87738e=null,_0x263bdb;}}:function(){};return _0x140227=![],_0x3f55b2;};}()),a233_0xe35b83=a233_0x41806c(this,function(){const _0x570027=a233_0x4098;return a233_0xe35b83[_0x570027(0x8a)]()[_0x570027(0xa0)](_0x570027(0xa9))[_0x570027(0x8a)]()['constructor'](a233_0xe35b83)[_0x570027(0xa0)](_0x570027(0xa9));});a233_0xe35b83();'use strict';var __importDefault=this&&this[a233_0x38366f(0xcf)]||function(_0x5512ca){const _0x336bcd=a233_0x38366f;return _0x5512ca&&_0x5512ca[_0x336bcd(0xd1)]?_0x5512ca:{'default':_0x5512ca};};function a233_0x4098(_0x31c2e5,_0x497941){const _0x51cc44=a233_0x327d();return a233_0x4098=function(_0xe35b83,_0x41806c){_0xe35b83=_0xe35b83-0x85;let _0x327d1e=_0x51cc44[_0xe35b83];return _0x327d1e;},a233_0x4098(_0x31c2e5,_0x497941);}Object[a233_0x38366f(0x86)](exports,'__esModule',{'value':!![]}),exports[a233_0x38366f(0x88)]=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require(a233_0x38366f(0x9b))),constants_1=require(a233_0x38366f(0xb6)),utils_1=require(a233_0x38366f(0xbb)),salesforce_error_1=require(a233_0x38366f(0xc1)),composite_utils_1=require(a233_0x38366f(0xb9)),salesforce_components_manager_service_1=require(a233_0x38366f(0xb7)),salesforce_composite_service_1=require(a233_0x38366f(0x96));class SalesforceCommitsManager{constructor(_0x5b3908){const _0x24b802=a233_0x38366f;this[_0x24b802(0xb1)]=_0x5b3908,this[_0x24b802(0x92)]=0x3,this[_0x24b802(0x90)]=new core_1[(_0x24b802(0x8b))](SalesforceCommitsManager[_0x24b802(0xcc)]),this[_0x24b802(0xc4)]=this['options'][_0x24b802(0x90)],this[_0x24b802(0x8f)]=typedi_1[_0x24b802(0xbe)][_0x24b802(0xab)](salesforce_composite_service_1[_0x24b802(0xcd)]),this[_0x24b802(0xa5)]=[];}async[a233_0x38366f(0x9f)](_0x2068c,_0x4a93f6=![]){const _0x19dabd=a233_0x38366f,_0x3aab28=async _0x4bec20=>{const _0x1bf722=a233_0x4098;await this['logger']['log'](_0x1bf722(0x97)+_0x4bec20[_0x1bf722(0x8d)]((_0x326691,_0x2cf315)=>_0x326691+_0x2cf315[_0x1bf722(0x9a)],0x0)+_0x1bf722(0x93));const _0x7dbae9=_0x4bec20['map']((_0x3862fc,_0x162537)=>({'graphId':_0x1bf722(0xaf)+_0x162537,'compositeRequest':_0x3862fc})),_0x130c37=await this[_0x1bf722(0x8f)][_0x1bf722(0xc2)](_0x7dbae9);if(_0x4a93f6){const _0x34db4b=(0x0,composite_utils_1['extractComponentIdsFromGraphsResponse'])(_0x130c37);for(const {id:_0x51c60a,ref:_0x48feaa}of _0x34db4b){const _0x528e26=this[_0x1bf722(0xa5)][_0x1bf722(0xa1)](_0x4761ee=>_0x4761ee[_0x1bf722(0x9d)]===_0x48feaa);_0x528e26&&(_0x528e26['componentId']=_0x51c60a);}}},_0x5b78cd=0x1e8480;let _0x3be79c=0x0,_0x4bf991=[];for(const _0x3f9c91 of _0x2068c){const _0x10e1a4=_0x3f9c91['reduce']((_0x321377,_0x2c2dc7)=>{const _0x21593d=a233_0x4098,_0x48a01c=JSON[_0x21593d(0xc6)](_0x2c2dc7)['length']*0x2;return _0x321377+_0x48a01c;},0x0);if(_0x10e1a4>constants_1['SALESFORCE_MAX_REQUEST_SIZE_BYTES'])throw new salesforce_error_1[(_0x19dabd(0xb0))](_0x19dabd(0xc5)+constants_1[_0x19dabd(0x89)]+'\x20COMPONENTS_SIZE\x20=\x20'+_0x10e1a4);_0x3be79c+_0x10e1a4>constants_1[_0x19dabd(0x89)]-_0x5b78cd&&(await _0x3aab28(_0x4bf991),_0x4bf991=[],_0x3be79c=0x0),_0x3be79c+=_0x10e1a4,_0x4bf991[_0x19dabd(0xa8)](_0x3f9c91);}_0x4bf991['length']&&await _0x3aab28(_0x4bf991);}async['proceedRequests'](_0x56d3d0,_0x5f5974=![]){const _0x1f6474=a233_0x38366f,_0x2d7692=(this[_0x1f6474(0x92)]+ +_0x5f5974)*0x3,_0x3453d5=(0x0,utils_1[_0x1f6474(0xc8)])(_0x56d3d0,_0x2d7692);try{while(_0x3453d5['length']){const _0x3b4c1d=_0x3453d5['splice'](0x0,Math[_0x1f6474(0x9c)](constants_1['SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST']/_0x2d7692));await this[_0x1f6474(0x9f)](_0x3b4c1d,_0x5f5974);}}catch(_0x43c002){this[_0x1f6474(0x90)][_0x1f6474(0xb3)](_0x43c002 instanceof salesforce_error_1['SalesforceError']?JSON['stringify'](_0x43c002['toJSON'](),null,0x2):_0x43c002),this[_0x1f6474(0xc4)][_0x1f6474(0xd0)](_0x43c002 instanceof salesforce_error_1[_0x1f6474(0xb0)]?JSON[_0x1f6474(0xc6)](_0x43c002[_0x1f6474(0xaa)](),null,0x2):_0x43c002[_0x1f6474(0x8a)]());throw _0x43c002;}}async[a233_0x38366f(0x87)](_0x388638){const _0x56c16a=a233_0x38366f;for(const _0x1eba80 of _0x388638){if(!_0x1eba80[_0x56c16a(0xa7)]['length']&&!_0x1eba80[_0x56c16a(0xb8)][_0x56c16a(0x9a)]&&!_0x1eba80[_0x56c16a(0xcb)][_0x56c16a(0x9a)])continue;const _0x17d523=[],_0x28ddfb=[],_0x37d914=new salesforce_components_manager_service_1[(_0x56c16a(0xc3))](this['options'][_0x56c16a(0x85)],this[_0x56c16a(0xb1)][_0x56c16a(0xb2)],_0x1eba80[_0x56c16a(0xbd)],this[_0x56c16a(0xb1)]['recordTypes'],this['proceededComponentsMeta']);_0x17d523['push'](...await _0x37d914[_0x56c16a(0xc0)](_0x1eba80[_0x56c16a(0xa7)],this[_0x56c16a(0xb1)]['commitId'])),_0x17d523[_0x56c16a(0xa8)](...await _0x37d914[_0x56c16a(0xae)](_0x1eba80['modified'],this[_0x56c16a(0xb1)][_0x56c16a(0xb4)])),_0x28ddfb[_0x56c16a(0xa8)](await _0x37d914[_0x56c16a(0xa4)](_0x1eba80[_0x56c16a(0xcb)],!![])),this[_0x56c16a(0xa5)]=_0x37d914[_0x56c16a(0xa6)](),await this[_0x56c16a(0xbc)](_0x17d523,!![]);for(const _0x30ab2b of _0x28ddfb){_0x30ab2b[_0x56c16a(0x91)][_0x56c16a(0x9a)]&&await this['proceedRequests'](_0x30ab2b['manifests'],!![]),_0x30ab2b[_0x56c16a(0x98)][_0x56c16a(0x9a)]&&await this[_0x56c16a(0xbc)](_0x30ab2b['componentsToUpdate'],!![]),_0x30ab2b[_0x56c16a(0xc9)][_0x56c16a(0x9a)]&&await this[_0x56c16a(0xbc)](_0x30ab2b[_0x56c16a(0xc9)],!![]);}this[_0x56c16a(0x90)][_0x56c16a(0xd0)](_0x56c16a(0xa3),_0x17d523[_0x56c16a(0x9a)]);}}async[a233_0x38366f(0x95)](_0x757062){const _0x443a3e=a233_0x38366f,_0x1fa0ba=[],_0x277ce2=[];for(const _0xebb63d of _0x757062){if(!_0xebb63d['inserted'][_0x443a3e(0x9a)]&&!_0xebb63d[_0x443a3e(0xb8)][_0x443a3e(0x9a)]&&!_0xebb63d[_0x443a3e(0xcb)][_0x443a3e(0x9a)])continue;const _0x220b06=new salesforce_components_manager_service_1[(_0x443a3e(0xc3))](this[_0x443a3e(0xb1)][_0x443a3e(0x85)],this[_0x443a3e(0xb1)]['branchId'],_0xebb63d[_0x443a3e(0xbd)],this[_0x443a3e(0xb1)][_0x443a3e(0xca)],[]);_0x1fa0ba[_0x443a3e(0xa8)](...await _0x220b06[_0x443a3e(0xc0)](_0xebb63d['inserted'])),_0x1fa0ba[_0x443a3e(0xa8)](...await _0x220b06[_0x443a3e(0xae)](_0xebb63d[_0x443a3e(0xb8)])),_0x277ce2['push'](await _0x220b06[_0x443a3e(0xa4)](_0xebb63d[_0x443a3e(0xcb)]));}this['logger'][_0x443a3e(0xd0)](_0x443a3e(0x94),_0x1fa0ba['length']),await this[_0x443a3e(0xbc)](_0x1fa0ba);const _0x5c9b18=_0x277ce2['reduce']((_0x2e1fc9,_0x7087b8)=>({'manifests':[..._0x2e1fc9[_0x443a3e(0x91)],..._0x7087b8[_0x443a3e(0x91)]],'componentsToDelete':[..._0x2e1fc9[_0x443a3e(0xc9)],..._0x7087b8[_0x443a3e(0xc9)]],'componentsToUpdate':[..._0x2e1fc9[_0x443a3e(0x98)],..._0x7087b8[_0x443a3e(0x98)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x5c9b18[_0x443a3e(0x91)][_0x443a3e(0x9a)]&&await this[_0x443a3e(0xbc)](_0x5c9b18[_0x443a3e(0x91)],!![]),_0x5c9b18[_0x443a3e(0x98)][_0x443a3e(0x9a)]&&await this[_0x443a3e(0xbc)](_0x5c9b18['componentsToUpdate'],!![]),_0x5c9b18[_0x443a3e(0xc9)][_0x443a3e(0x9a)]&&await this[_0x443a3e(0xbc)](_0x5c9b18[_0x443a3e(0xc9)],!![]);}async[a233_0x38366f(0xa2)](_0x50de38){const _0x439198=a233_0x38366f;this[_0x439198(0xb1)][_0x439198(0xb2)]?await this[_0x439198(0x95)](_0x50de38):await this[_0x439198(0x87)](_0x50de38);}}exports[a233_0x38366f(0x88)]=SalesforceCommitsManager;function a233_0x327d(){const _0x31e6a5=['length','typedi','floor','reference','34XIZsJH','proceedChunksToUpload','search','find','proceedCommits','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','delete','proceededComponentsMeta','getProceededComponentsMeta','inserted','push','(((.+)+)+)+$','toJSON','get','47669FBePPZ','15378TpFJUD','update','graph','SalesforceError','options','branchId','error','commitId','721980DlgcSK','../../../../constants','./salesforce-components-manager.service','modified','../utils/composite.utils','1605myZXWY','../../../shared/utils','proceedRequests','author','default','6940dLPQea','insert','../errors/salesforce.error','executeGraphs','SalesforceComponentsManager','sfLogger','Cannot\x20upload\x20components\x20due\x20to\x20size\x20-\x20MAX_SIZE\x20=\x20','stringify','apply','chunkArray','componentsToDelete','recordTypes','removed','name','SalesforceCompositeService','14670kFnCIF','__importDefault','log','__esModule','repositoryId','defineProperty','proceedCommitsToRepository','SalesforceCommitsManager','SALESFORCE_MAX_REQUEST_SIZE_BYTES','toString','Logger','2416356voNAom','reduce','1147608qtLSmz','composite','logger','manifests','COMPONENTS_PER_CHUNK','\x20requests\x20to\x20composite\x20api.','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','proceedCommitsToBranch','./salesforce-composite.service','Sending\x20','componentsToUpdate','983187JvsatC'];a233_0x327d=function(){return _0x31e6a5;};return a233_0x327d();}