function a260_0x19a0(_0x5f2e2e,_0xa54e52){const _0x8ea307=a260_0x4c32();return a260_0x19a0=function(_0x48d1f5,_0x4485ce){_0x48d1f5=_0x48d1f5-0x18d;let _0x4c32e0=_0x8ea307[_0x48d1f5];return _0x4c32e0;},a260_0x19a0(_0x5f2e2e,_0xa54e52);}const a260_0x1007bc=a260_0x19a0;(function(_0x5c4478,_0x56767d){const _0x2cf9a0=a260_0x19a0,_0x14b6d4=_0x5c4478();while(!![]){try{const _0x38781e=parseInt(_0x2cf9a0(0x1bf))/0x1*(-parseInt(_0x2cf9a0(0x19b))/0x2)+parseInt(_0x2cf9a0(0x1bd))/0x3+parseInt(_0x2cf9a0(0x1aa))/0x4*(parseInt(_0x2cf9a0(0x1d0))/0x5)+-parseInt(_0x2cf9a0(0x1ce))/0x6*(-parseInt(_0x2cf9a0(0x1b1))/0x7)+-parseInt(_0x2cf9a0(0x1b4))/0x8+-parseInt(_0x2cf9a0(0x1b9))/0x9+-parseInt(_0x2cf9a0(0x1c0))/0xa*(-parseInt(_0x2cf9a0(0x1b0))/0xb);if(_0x38781e===_0x56767d)break;else _0x14b6d4['push'](_0x14b6d4['shift']());}catch(_0x2b6f95){_0x14b6d4['push'](_0x14b6d4['shift']());}}}(a260_0x4c32,0x70d4a));const a260_0x4485ce=(function(){let _0x298798=!![];return function(_0x298ab8,_0x3abf06){const _0x3ff919=_0x298798?function(){const _0x1c599c=a260_0x19a0;if(_0x3abf06){const _0x6888d4=_0x3abf06[_0x1c599c(0x1a5)](_0x298ab8,arguments);return _0x3abf06=null,_0x6888d4;}}:function(){};return _0x298798=![],_0x3ff919;};}()),a260_0x48d1f5=a260_0x4485ce(this,function(){const _0x16be9e=a260_0x19a0;return a260_0x48d1f5[_0x16be9e(0x197)]()[_0x16be9e(0x1d1)](_0x16be9e(0x1ba))[_0x16be9e(0x197)]()[_0x16be9e(0x1c6)](a260_0x48d1f5)[_0x16be9e(0x1d1)](_0x16be9e(0x1ba));});a260_0x48d1f5();'use strict';function a260_0x4c32(){const _0x42a833=['insert','proceedChunksToUpload','6836616fVnQfP','(((.+)+)+)+$','../../../shared/utils','Sending\x20','61605HckhGM','Have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','142601bLgCBt','3469310FNVgIr','proceedCommitsToBranch','get','manifests','inserted','modified','constructor','branchId','repositoryId','defineProperty','delete','removed','composite','reduce','12tcwNDZ','proceedRequests','573980wYHlHs','search','SalesforceCommitsManager','sfLogger','./salesforce-composite.service','proceedCommits','../../../../core','executeGraphs','componentsToUpdate','push','extractComponentIdsFromGraphsResponse','name','SalesforceCompositeService','proceededComponentsMeta','commitId','default','COMPONENTS_PER_CHUNK','length','stringify','recordTypes','toString','SALESFORCE_MAX_REQUEST_SIZE_BYTES','splice','author','4qRmbMn','componentsToDelete','map','proceedCommitsToRepository','getProceededComponentsMeta','SalesforceError','\x20requests\x20to\x20composite\x20api.','./salesforce-components-manager.service','logger','toJSON','apply','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','__esModule','update','log','12ZwfscR','componentId','typedi','options','../utils/composite.utils','../errors/salesforce.error','33eYRYSu','636188YsKrKf','SalesforceComponentsManager','../../../../constants','644032JaaUoH','reference','error'];a260_0x4c32=function(){return _0x42a833;};return a260_0x4c32();}var __importDefault=this&&this['__importDefault']||function(_0xfdeded){const _0x4287aa=a260_0x19a0;return _0xfdeded&&_0xfdeded[_0x4287aa(0x1a7)]?_0xfdeded:{'default':_0xfdeded};};Object[a260_0x1007bc(0x1c9)](exports,a260_0x1007bc(0x1a7),{'value':!![]}),exports[a260_0x1007bc(0x1d2)]=void 0x0;const core_1=require(a260_0x1007bc(0x1d6)),typedi_1=__importDefault(require(a260_0x1007bc(0x1ac))),constants_1=require(a260_0x1007bc(0x1b3)),utils_1=require(a260_0x1007bc(0x1bb)),salesforce_error_1=require(a260_0x1007bc(0x1af)),composite_utils_1=require(a260_0x1007bc(0x1ae)),salesforce_components_manager_service_1=require(a260_0x1007bc(0x1a2)),salesforce_composite_service_1=require(a260_0x1007bc(0x1d4));class SalesforceCommitsManager{constructor(_0x42e2c5){const _0x4735d9=a260_0x1007bc;this[_0x4735d9(0x1ad)]=_0x42e2c5,this[_0x4735d9(0x193)]=0x3,this['logger']=new core_1['Logger'](SalesforceCommitsManager[_0x4735d9(0x18e)]),this[_0x4735d9(0x1d3)]=this['options'][_0x4735d9(0x1a3)],this['composite']=typedi_1[_0x4735d9(0x192)][_0x4735d9(0x1c2)](salesforce_composite_service_1[_0x4735d9(0x18f)]),this[_0x4735d9(0x190)]=[];}async[a260_0x1007bc(0x1b8)](_0x54477f,_0x20e9be=![]){const _0x1e5e54=a260_0x1007bc,_0x3129f9=async _0x36e6b6=>{const _0x4f5780=a260_0x19a0;await this[_0x4f5780(0x1a3)][_0x4f5780(0x1a9)](_0x4f5780(0x1bc)+_0x36e6b6[_0x4f5780(0x1cd)]((_0x37bcf6,_0x22b6f0)=>_0x37bcf6+_0x22b6f0['length'],0x0)+_0x4f5780(0x1a1));const _0x432b37=_0x36e6b6[_0x4f5780(0x19d)]((_0x17e833,_0x4d5965)=>({'graphId':'graph'+_0x4d5965,'compositeRequest':_0x17e833})),_0x3ee2e8=await this[_0x4f5780(0x1cc)][_0x4f5780(0x1d7)](_0x432b37);if(_0x20e9be){const _0x11a11a=(0x0,composite_utils_1[_0x4f5780(0x18d)])(_0x3ee2e8);for(const {id:_0x2e4c59,ref:_0x536f14}of _0x11a11a){const _0x34d3fb=this['proceededComponentsMeta']['find'](_0x55ddd9=>_0x55ddd9[_0x4f5780(0x1b5)]===_0x536f14);_0x34d3fb&&(_0x34d3fb[_0x4f5780(0x1ab)]=_0x2e4c59);}}},_0x1bc1f8=0x1e8480;let _0x46b852=0x0,_0x73723f=[];for(const _0xaba681 of _0x54477f){const _0x2bc831=_0xaba681[_0x1e5e54(0x1cd)]((_0x480149,_0x1e3bf6)=>{const _0x4a8900=_0x1e5e54,_0x1de5a7=JSON['stringify'](_0x1e3bf6)[_0x4a8900(0x194)]*0x2;return _0x480149+_0x1de5a7;},0x0);if(_0x2bc831>constants_1[_0x1e5e54(0x198)])throw new salesforce_error_1[(_0x1e5e54(0x1a0))]('Cannot\x20upload\x20components\x20due\x20to\x20size\x20-\x20MAX_SIZE\x20=\x20'+constants_1[_0x1e5e54(0x198)]+'\x20COMPONENTS_SIZE\x20=\x20'+_0x2bc831);_0x46b852+_0x2bc831>constants_1[_0x1e5e54(0x198)]-_0x1bc1f8&&(await _0x3129f9(_0x73723f),_0x73723f=[],_0x46b852=0x0),_0x46b852+=_0x2bc831,_0x73723f[_0x1e5e54(0x1d9)](_0xaba681);}_0x73723f[_0x1e5e54(0x194)]&&await _0x3129f9(_0x73723f);}async[a260_0x1007bc(0x1cf)](_0x2d491d,_0x1f8787=![]){const _0x47bc4c=a260_0x1007bc,_0x3c77ba=(this['COMPONENTS_PER_CHUNK']+ +_0x1f8787)*0x3,_0x1c2951=(0x0,utils_1['chunkArray'])(_0x2d491d,_0x3c77ba);try{while(_0x1c2951[_0x47bc4c(0x194)]){const _0xa0c8fe=_0x1c2951[_0x47bc4c(0x199)](0x0,Math['floor'](constants_1[_0x47bc4c(0x1a6)]/_0x3c77ba));await this['proceedChunksToUpload'](_0xa0c8fe,_0x1f8787);}}catch(_0x3c6ba7){this[_0x47bc4c(0x1a3)][_0x47bc4c(0x1b6)](_0x3c6ba7 instanceof salesforce_error_1[_0x47bc4c(0x1a0)]?JSON[_0x47bc4c(0x195)](_0x3c6ba7[_0x47bc4c(0x1a4)](),null,0x2):_0x3c6ba7),this[_0x47bc4c(0x1d3)]['log'](_0x3c6ba7 instanceof salesforce_error_1['SalesforceError']?JSON[_0x47bc4c(0x195)](_0x3c6ba7['toJSON'](),null,0x2):_0x3c6ba7[_0x47bc4c(0x197)]());throw _0x3c6ba7;}}async[a260_0x1007bc(0x19e)](_0x371f9c){const _0x5f1fbb=a260_0x1007bc;for(const _0x481e6e of _0x371f9c){if(!_0x481e6e[_0x5f1fbb(0x1c4)][_0x5f1fbb(0x194)]&&!_0x481e6e[_0x5f1fbb(0x1c5)]['length']&&!_0x481e6e['removed'][_0x5f1fbb(0x194)])continue;const _0x54b2bd=[],_0x37b680=[],_0x437271=new salesforce_components_manager_service_1[(_0x5f1fbb(0x1b2))](this[_0x5f1fbb(0x1ad)][_0x5f1fbb(0x1c8)],this['options'][_0x5f1fbb(0x1c7)],_0x481e6e[_0x5f1fbb(0x19a)],this['options']['recordTypes'],this[_0x5f1fbb(0x190)]);_0x54b2bd['push'](...await _0x437271[_0x5f1fbb(0x1b7)](_0x481e6e['inserted'],this['options'][_0x5f1fbb(0x191)])),_0x54b2bd[_0x5f1fbb(0x1d9)](...await _0x437271[_0x5f1fbb(0x1a8)](_0x481e6e[_0x5f1fbb(0x1c5)],this[_0x5f1fbb(0x1ad)]['commitId'])),_0x37b680[_0x5f1fbb(0x1d9)](await _0x437271['delete'](_0x481e6e['removed'],!![])),this[_0x5f1fbb(0x190)]=_0x437271[_0x5f1fbb(0x19f)](),await this[_0x5f1fbb(0x1cf)](_0x54b2bd,!![]);for(const _0xc8d452 of _0x37b680){_0xc8d452[_0x5f1fbb(0x1c3)][_0x5f1fbb(0x194)]&&await this[_0x5f1fbb(0x1cf)](_0xc8d452[_0x5f1fbb(0x1c3)],!![]),_0xc8d452['componentsToUpdate'][_0x5f1fbb(0x194)]&&await this['proceedRequests'](_0xc8d452['componentsToUpdate'],!![]),_0xc8d452['componentsToDelete']['length']&&await this[_0x5f1fbb(0x1cf)](_0xc8d452['componentsToDelete'],!![]);}this[_0x5f1fbb(0x1a3)][_0x5f1fbb(0x1a9)](_0x5f1fbb(0x1be),_0x54b2bd[_0x5f1fbb(0x194)]);}}async[a260_0x1007bc(0x1c1)](_0x188a12){const _0x10bc41=a260_0x1007bc,_0x46e5a9=[],_0x287c2e=[];for(const _0x3b35c8 of _0x188a12){if(!_0x3b35c8[_0x10bc41(0x1c4)][_0x10bc41(0x194)]&&!_0x3b35c8[_0x10bc41(0x1c5)]['length']&&!_0x3b35c8[_0x10bc41(0x1cb)][_0x10bc41(0x194)])continue;const _0x510203=new salesforce_components_manager_service_1[(_0x10bc41(0x1b2))](this['options'][_0x10bc41(0x1c8)],this[_0x10bc41(0x1ad)][_0x10bc41(0x1c7)],_0x3b35c8[_0x10bc41(0x19a)],this['options'][_0x10bc41(0x196)],[]);_0x46e5a9['push'](...await _0x510203[_0x10bc41(0x1b7)](_0x3b35c8[_0x10bc41(0x1c4)])),_0x46e5a9[_0x10bc41(0x1d9)](...await _0x510203[_0x10bc41(0x1a8)](_0x3b35c8[_0x10bc41(0x1c5)])),_0x287c2e[_0x10bc41(0x1d9)](await _0x510203[_0x10bc41(0x1ca)](_0x3b35c8[_0x10bc41(0x1cb)]));}this['logger'][_0x10bc41(0x1a9)]('Have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)',_0x46e5a9['length']),await this[_0x10bc41(0x1cf)](_0x46e5a9);const _0x10b166=_0x287c2e[_0x10bc41(0x1cd)]((_0x38e5a6,_0x36c8c0)=>({'manifests':[..._0x38e5a6[_0x10bc41(0x1c3)],..._0x36c8c0[_0x10bc41(0x1c3)]],'componentsToDelete':[..._0x38e5a6[_0x10bc41(0x19c)],..._0x36c8c0[_0x10bc41(0x19c)]],'componentsToUpdate':[..._0x38e5a6[_0x10bc41(0x1d8)],..._0x36c8c0['componentsToUpdate']]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x10b166[_0x10bc41(0x1c3)][_0x10bc41(0x194)]&&await this[_0x10bc41(0x1cf)](_0x10b166[_0x10bc41(0x1c3)],!![]),_0x10b166['componentsToUpdate'][_0x10bc41(0x194)]&&await this[_0x10bc41(0x1cf)](_0x10b166['componentsToUpdate'],!![]),_0x10b166['componentsToDelete'][_0x10bc41(0x194)]&&await this['proceedRequests'](_0x10b166[_0x10bc41(0x19c)],!![]);}async[a260_0x1007bc(0x1d5)](_0x2c4163){const _0x15f664=a260_0x1007bc;this[_0x15f664(0x1ad)][_0x15f664(0x1c7)]?await this[_0x15f664(0x1c1)](_0x2c4163):await this[_0x15f664(0x19e)](_0x2c4163);}}exports['SalesforceCommitsManager']=SalesforceCommitsManager;