const a181_0x167e50=a181_0x48c8;(function(_0x426f78,_0x36849c){const _0x4a0324=a181_0x48c8,_0x53d16b=_0x426f78();while(!![]){try{const _0x249c21=-parseInt(_0x4a0324(0x1c4))/0x1*(parseInt(_0x4a0324(0x1b3))/0x2)+-parseInt(_0x4a0324(0x1be))/0x3+parseInt(_0x4a0324(0x19e))/0x4+-parseInt(_0x4a0324(0x18c))/0x5+parseInt(_0x4a0324(0x1a6))/0x6+parseInt(_0x4a0324(0x190))/0x7+-parseInt(_0x4a0324(0x19d))/0x8*(-parseInt(_0x4a0324(0x199))/0x9);if(_0x249c21===_0x36849c)break;else _0x53d16b['push'](_0x53d16b['shift']());}catch(_0x55c8f4){_0x53d16b['push'](_0x53d16b['shift']());}}}(a181_0x2928,0xd7c20));const a181_0xbcc63d=(function(){let _0x176884=!![];return function(_0xf1035e,_0x5326f3){const _0x4f6400=_0x176884?function(){const _0x507c11=a181_0x48c8;if(_0x5326f3){const _0xc0dc18=_0x5326f3[_0x507c11(0x1c7)](_0xf1035e,arguments);return _0x5326f3=null,_0xc0dc18;}}:function(){};return _0x176884=![],_0x4f6400;};}()),a181_0x201545=a181_0xbcc63d(this,function(){const _0x501c68=a181_0x48c8;return a181_0x201545['toString']()[_0x501c68(0x196)]('(((.+)+)+)+$')[_0x501c68(0x1a4)]()[_0x501c68(0x1b7)](a181_0x201545)['search'](_0x501c68(0x184));});a181_0x201545();'use strict';var __importDefault=this&&this[a181_0x167e50(0x1c3)]||function(_0x5c0605){return _0x5c0605&&_0x5c0605['__esModule']?_0x5c0605:{'default':_0x5c0605};};Object[a181_0x167e50(0x1bd)](exports,a181_0x167e50(0x193),{'value':!![]}),exports[a181_0x167e50(0x1bf)]=void 0x0;function a181_0x48c8(_0x112ed0,_0x505d92){const _0xe290b2=a181_0x2928();return a181_0x48c8=function(_0x201545,_0xbcc63d){_0x201545=_0x201545-0x181;let _0x292838=_0xe290b2[_0x201545];return _0x292838;},a181_0x48c8(_0x112ed0,_0x505d92);}const core_1=require(a181_0x167e50(0x1a8)),typedi_1=__importDefault(require(a181_0x167e50(0x1c0))),constants_1=require(a181_0x167e50(0x1c5)),utils_1=require(a181_0x167e50(0x19f)),salesforce_error_1=require(a181_0x167e50(0x1a5)),composite_utils_1=require('../utils/composite.utils'),salesforce_components_manager_service_1=require(a181_0x167e50(0x1af)),salesforce_composite_service_1=require(a181_0x167e50(0x18e));class SalesforceCommitsManager{constructor(_0x200862){const _0x124f6a=a181_0x167e50;this[_0x124f6a(0x186)]=_0x200862,this[_0x124f6a(0x1a3)]=0x3,this[_0x124f6a(0x18d)]=new core_1[(_0x124f6a(0x19a))](SalesforceCommitsManager[_0x124f6a(0x1ae)]),this['sfLogger']=this[_0x124f6a(0x186)][_0x124f6a(0x18d)],this[_0x124f6a(0x1cb)]=typedi_1[_0x124f6a(0x1b0)][_0x124f6a(0x1b5)](salesforce_composite_service_1[_0x124f6a(0x1c9)]),this['proceededComponentsMeta']=[];}async[a181_0x167e50(0x181)](_0x590958,_0x82dc9a=![]){const _0x311edc=a181_0x167e50,_0x205d5e=(this['COMPONENTS_PER_CHUNK']+ +_0x82dc9a)*0x3,_0xee7b12=utils_1[_0x311edc(0x1b4)](_0x590958,_0x205d5e);try{while(_0xee7b12[_0x311edc(0x1a0)]){const _0x24a2cc=_0xee7b12[_0x311edc(0x185)](0x0,Math[_0x311edc(0x18f)](constants_1[_0x311edc(0x1c6)]/_0x205d5e));await this[_0x311edc(0x18d)][_0x311edc(0x1c2)](_0x311edc(0x1aa)+_0x24a2cc[_0x311edc(0x1a0)]*_0x205d5e+_0x311edc(0x1ab));const _0x270844=_0x24a2cc['map']((_0x344c91,_0x588d9c)=>({'graphId':_0x311edc(0x1a9)+_0x588d9c,'compositeRequest':_0x344c91})),_0x2a12a7=await this[_0x311edc(0x1cb)][_0x311edc(0x1b9)](_0x270844);if(_0x82dc9a){const _0x48a5ee=composite_utils_1[_0x311edc(0x1b2)](_0x2a12a7);for(const {id:_0x493127,ref:_0x1e6981}of _0x48a5ee){const _0x28ed40=this['proceededComponentsMeta'][_0x311edc(0x195)](_0x14bae5=>_0x14bae5[_0x311edc(0x189)]===_0x1e6981);_0x28ed40&&(_0x28ed40[_0x311edc(0x187)]=_0x493127);}}}}catch(_0x59b6f7){this[_0x311edc(0x18d)][_0x311edc(0x191)](_0x59b6f7 instanceof salesforce_error_1['SalesforceError']?JSON[_0x311edc(0x188)](_0x59b6f7[_0x311edc(0x1ad)](),null,0x2):_0x59b6f7),this[_0x311edc(0x1a7)]['log'](_0x59b6f7 instanceof salesforce_error_1['SalesforceError']?JSON['stringify'](_0x59b6f7['toJSON'](),null,0x2):_0x59b6f7[_0x311edc(0x1a4)]());throw _0x59b6f7;}}async[a181_0x167e50(0x194)](_0x37e969){const _0x20c0c9=a181_0x167e50;for(const _0x490dba of _0x37e969){if(!_0x490dba[_0x20c0c9(0x1bb)][_0x20c0c9(0x1a0)]&&!_0x490dba[_0x20c0c9(0x18a)][_0x20c0c9(0x1a0)]&&!_0x490dba[_0x20c0c9(0x1b1)][_0x20c0c9(0x1a0)])continue;const _0x304cd1=[],_0x43443b=[],_0x4e9790=new salesforce_components_manager_service_1[(_0x20c0c9(0x1ac))](this[_0x20c0c9(0x186)][_0x20c0c9(0x182)],this[_0x20c0c9(0x186)][_0x20c0c9(0x198)],_0x490dba['author'],this[_0x20c0c9(0x186)][_0x20c0c9(0x1a1)],this[_0x20c0c9(0x197)]);_0x304cd1['push'](...await _0x4e9790[_0x20c0c9(0x1ba)](_0x490dba[_0x20c0c9(0x1bb)],this[_0x20c0c9(0x186)][_0x20c0c9(0x1bc)])),_0x304cd1['push'](...await _0x4e9790['update'](_0x490dba[_0x20c0c9(0x18a)],this[_0x20c0c9(0x186)]['commitId'])),_0x43443b[_0x20c0c9(0x1b6)](await _0x4e9790['delete'](_0x490dba[_0x20c0c9(0x1b1)],!![])),this[_0x20c0c9(0x197)]=_0x4e9790[_0x20c0c9(0x1c8)](),await this[_0x20c0c9(0x181)](_0x304cd1,!![]);for(const _0x5ee0fc of _0x43443b){_0x5ee0fc[_0x20c0c9(0x1c1)][_0x20c0c9(0x1a0)]&&await this['proceedRequests'](_0x5ee0fc[_0x20c0c9(0x1c1)],!![]),_0x5ee0fc[_0x20c0c9(0x192)]['length']&&await this[_0x20c0c9(0x181)](_0x5ee0fc[_0x20c0c9(0x192)],!![]),_0x5ee0fc[_0x20c0c9(0x19b)][_0x20c0c9(0x1a0)]&&await this[_0x20c0c9(0x181)](_0x5ee0fc[_0x20c0c9(0x19b)],!![]);}this[_0x20c0c9(0x18d)]['log'](_0x20c0c9(0x19c),_0x304cd1['length']);}}async[a181_0x167e50(0x18b)](_0x5efd70){const _0x584cd4=a181_0x167e50,_0x13a146=[],_0x5b010e=[];for(const _0x1f30c1 of _0x5efd70){if(!_0x1f30c1['inserted'][_0x584cd4(0x1a0)]&&!_0x1f30c1[_0x584cd4(0x18a)][_0x584cd4(0x1a0)]&&!_0x1f30c1['removed'][_0x584cd4(0x1a0)])continue;const _0x1612b0=new salesforce_components_manager_service_1[(_0x584cd4(0x1ac))](this[_0x584cd4(0x186)][_0x584cd4(0x182)],this[_0x584cd4(0x186)][_0x584cd4(0x198)],_0x1f30c1[_0x584cd4(0x183)],this[_0x584cd4(0x186)]['recordTypes'],[]);_0x13a146[_0x584cd4(0x1b6)](...await _0x1612b0[_0x584cd4(0x1ba)](_0x1f30c1[_0x584cd4(0x1bb)])),_0x13a146[_0x584cd4(0x1b6)](...await _0x1612b0[_0x584cd4(0x1ca)](_0x1f30c1['modified'])),_0x5b010e[_0x584cd4(0x1b6)](await _0x1612b0[_0x584cd4(0x1b8)](_0x1f30c1[_0x584cd4(0x1b1)]));}this[_0x584cd4(0x18d)][_0x584cd4(0x1c2)]('have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)',_0x13a146['length']),await this[_0x584cd4(0x181)](_0x13a146);const _0xe4b166=_0x5b010e[_0x584cd4(0x1a2)]((_0x1eed8d,_0x5566d8)=>({'manifests':[..._0x1eed8d[_0x584cd4(0x1c1)],..._0x5566d8['manifests']],'componentsToDelete':[..._0x1eed8d[_0x584cd4(0x19b)],..._0x5566d8[_0x584cd4(0x19b)]],'componentsToUpdate':[..._0x1eed8d[_0x584cd4(0x192)],..._0x5566d8[_0x584cd4(0x192)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0xe4b166['manifests'][_0x584cd4(0x1a0)]&&await this[_0x584cd4(0x181)](_0xe4b166[_0x584cd4(0x1c1)],!![]),_0xe4b166[_0x584cd4(0x192)]['length']&&await this['proceedRequests'](_0xe4b166[_0x584cd4(0x192)],!![]),_0xe4b166[_0x584cd4(0x19b)][_0x584cd4(0x1a0)]&&await this[_0x584cd4(0x181)](_0xe4b166[_0x584cd4(0x19b)],!![]);}async['proceedCommits'](_0x8f1ce6){const _0x3d8f4a=a181_0x167e50;this[_0x3d8f4a(0x186)][_0x3d8f4a(0x198)]?await this['proceedCommitsToBranch'](_0x8f1ce6):await this[_0x3d8f4a(0x194)](_0x8f1ce6);}}exports['SalesforceCommitsManager']=SalesforceCommitsManager;function a181_0x2928(){const _0x4e4002=['proceedRequests','repositoryId','author','(((.+)+)+)+$','splice','options','componentId','stringify','reference','modified','proceedCommitsToBranch','950225LYhFIk','logger','./salesforce-composite.service','floor','4858721BiIhml','error','componentsToUpdate','__esModule','proceedCommitsToRepository','find','search','proceededComponentsMeta','branchId','7465113BdgoSE','Logger','componentsToDelete','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','24cUmwtx','494812RojAzb','../../../shared/utils','length','recordTypes','reduce','COMPONENTS_PER_CHUNK','toString','../errors/salesforce.error','3394764pHQOpr','sfLogger','../../../../core','graph','Sending\x20','\x20requests\x20to\x20composite\x20api.','SalesforceComponentsManager','toJSON','name','./salesforce-components-manager.service','default','removed','extractComponentIdsFromGraphsResponse','2706vafEot','chunkArray','get','push','constructor','delete','executeGraphs','insert','inserted','commitId','defineProperty','3880938rdLsnS','SalesforceCommitsManager','typedi','manifests','log','__importDefault','1112LZYJzV','../../../../constants','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','apply','getProceededComponentsMeta','SalesforceCompositeService','update','composite'];a181_0x2928=function(){return _0x4e4002;};return a181_0x2928();}