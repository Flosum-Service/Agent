function a233_0x50cb(_0x364faa,_0xb3fd2a){const _0x3b546c=a233_0x1fa1();return a233_0x50cb=function(_0x142903,_0x2cd229){_0x142903=_0x142903-0xaa;let _0x1fa154=_0x3b546c[_0x142903];return _0x1fa154;},a233_0x50cb(_0x364faa,_0xb3fd2a);}const a233_0x1118ee=a233_0x50cb;(function(_0x2afd19,_0xdcea9a){const _0x42cec9=a233_0x50cb,_0x3d5697=_0x2afd19();while(!![]){try{const _0x55572c=-parseInt(_0x42cec9(0xd8))/0x1+-parseInt(_0x42cec9(0xe4))/0x2+-parseInt(_0x42cec9(0xef))/0x3+parseInt(_0x42cec9(0xba))/0x4*(parseInt(_0x42cec9(0xd7))/0x5)+parseInt(_0x42cec9(0xca))/0x6*(parseInt(_0x42cec9(0xc2))/0x7)+-parseInt(_0x42cec9(0xac))/0x8*(parseInt(_0x42cec9(0xc5))/0x9)+parseInt(_0x42cec9(0xaa))/0xa*(parseInt(_0x42cec9(0xf1))/0xb);if(_0x55572c===_0xdcea9a)break;else _0x3d5697['push'](_0x3d5697['shift']());}catch(_0x408748){_0x3d5697['push'](_0x3d5697['shift']());}}}(a233_0x1fa1,0x86e29));const a233_0x2cd229=(function(){let _0x363968=!![];return function(_0x3aa4a6,_0x1b11a4){const _0x4658dd=_0x363968?function(){const _0x59e150=a233_0x50cb;if(_0x1b11a4){const _0x3dfab4=_0x1b11a4[_0x59e150(0xb2)](_0x3aa4a6,arguments);return _0x1b11a4=null,_0x3dfab4;}}:function(){};return _0x363968=![],_0x4658dd;};}()),a233_0x142903=a233_0x2cd229(this,function(){const _0x2d348b=a233_0x50cb;return a233_0x142903[_0x2d348b(0xcb)]()[_0x2d348b(0xdd)](_0x2d348b(0xd0))[_0x2d348b(0xcb)]()[_0x2d348b(0xf0)](a233_0x142903)['search'](_0x2d348b(0xd0));});a233_0x142903();'use strict';var __importDefault=this&&this[a233_0x1118ee(0xc6)]||function(_0x1e74c6){const _0x28d79e=a233_0x1118ee;return _0x1e74c6&&_0x1e74c6[_0x28d79e(0xbf)]?_0x1e74c6:{'default':_0x1e74c6};};Object['defineProperty'](exports,a233_0x1118ee(0xbf),{'value':!![]}),exports['SalesforceCommitsManager']=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require(a233_0x1118ee(0xdf))),constants_1=require('../../../../constants'),utils_1=require('../../../shared/utils'),salesforce_error_1=require(a233_0x1118ee(0xd9)),composite_utils_1=require(a233_0x1118ee(0xd1)),salesforce_components_manager_service_1=require(a233_0x1118ee(0xdc)),salesforce_composite_service_1=require(a233_0x1118ee(0xdb));class SalesforceCommitsManager{constructor(_0x26b704){const _0xcbf643=a233_0x1118ee;this['options']=_0x26b704,this[_0xcbf643(0xe0)]=0x3,this['logger']=new core_1['Logger'](SalesforceCommitsManager[_0xcbf643(0xb5)]),this[_0xcbf643(0xcf)]=this[_0xcbf643(0xab)]['logger'],this['composite']=typedi_1['default']['get'](salesforce_composite_service_1[_0xcbf643(0xb6)]),this['proceededComponentsMeta']=[];}async[a233_0x1118ee(0xe5)](_0x478a1d,_0xfc3b2c=![]){const _0x192d9c=a233_0x1118ee,_0x224c86=async _0x29bd9f=>{const _0x406c7e=a233_0x50cb;await this['logger']['log'](_0x406c7e(0xb8)+_0x29bd9f[_0x406c7e(0xed)]((_0x1b5f49,_0x35097b)=>_0x1b5f49+_0x35097b[_0x406c7e(0xe3)],0x0)+'\x20requests\x20to\x20composite\x20api.');const _0x22fde5=_0x29bd9f[_0x406c7e(0xb0)]((_0x3a708d,_0x5461fd)=>({'graphId':_0x406c7e(0xec)+_0x5461fd,'compositeRequest':_0x3a708d})),_0x44e25e=await this[_0x406c7e(0xb1)]['executeGraphs'](_0x22fde5);if(_0xfc3b2c){const _0x47e55e=(0x0,composite_utils_1[_0x406c7e(0xce)])(_0x44e25e);for(const {id:_0x470faf,ref:_0x60ce04}of _0x47e55e){const _0x267a2f=this['proceededComponentsMeta']['find'](_0xf56379=>_0xf56379[_0x406c7e(0xbc)]===_0x60ce04);_0x267a2f&&(_0x267a2f[_0x406c7e(0xe9)]=_0x470faf);}}},_0x3d1bc8=0x1e8480;let _0x406280=0x0,_0x27d160=[];for(const _0x275812 of _0x478a1d){const _0x5a7124=_0x275812['reduce']((_0x10c121,_0x13c6f5)=>{const _0x2bc59e=JSON['stringify'](_0x13c6f5)['length']*0x2;return _0x10c121+_0x2bc59e;},0x0);if(_0x5a7124>constants_1[_0x192d9c(0xe2)])throw new salesforce_error_1[(_0x192d9c(0xd6))](_0x192d9c(0xc8)+constants_1[_0x192d9c(0xe2)]+'\x20COMPONENTS_SIZE\x20=\x20'+_0x5a7124);_0x406280+_0x5a7124>constants_1[_0x192d9c(0xe2)]-_0x3d1bc8&&(await _0x224c86(_0x27d160),_0x27d160=[],_0x406280=0x0),_0x406280+=_0x5a7124,_0x27d160[_0x192d9c(0xe8)](_0x275812);}_0x27d160['length']&&await _0x224c86(_0x27d160);}async['proceedRequests'](_0x3ac2f0,_0x5e480a=![]){const _0x360d0e=a233_0x1118ee,_0x25b516=(this['COMPONENTS_PER_CHUNK']+ +_0x5e480a)*0x3,_0x4fc2cd=(0x0,utils_1['chunkArray'])(_0x3ac2f0,_0x25b516);try{while(_0x4fc2cd['length']){const _0x5891fe=_0x4fc2cd[_0x360d0e(0xaf)](0x0,Math[_0x360d0e(0xb7)](constants_1[_0x360d0e(0xf2)]/_0x25b516));await this[_0x360d0e(0xe5)](_0x5891fe,_0x5e480a);}}catch(_0x38a7ee){this['logger'][_0x360d0e(0xd5)](_0x38a7ee instanceof salesforce_error_1[_0x360d0e(0xd6)]?JSON[_0x360d0e(0xd2)](_0x38a7ee[_0x360d0e(0xbe)](),null,0x2):_0x38a7ee),this[_0x360d0e(0xcf)][_0x360d0e(0xea)](_0x38a7ee instanceof salesforce_error_1['SalesforceError']?JSON['stringify'](_0x38a7ee[_0x360d0e(0xbe)](),null,0x2):_0x38a7ee[_0x360d0e(0xcb)]());throw _0x38a7ee;}}async['proceedCommitsToRepository'](_0x172643){const _0x1ee1a8=a233_0x1118ee;for(const _0x2bc0e6 of _0x172643){if(!_0x2bc0e6[_0x1ee1a8(0xe6)][_0x1ee1a8(0xe3)]&&!_0x2bc0e6['modified'][_0x1ee1a8(0xe3)]&&!_0x2bc0e6[_0x1ee1a8(0xad)][_0x1ee1a8(0xe3)])continue;const _0x4be919=[],_0x1ece3f=[],_0x2b18fb=new salesforce_components_manager_service_1[(_0x1ee1a8(0xe1))](this[_0x1ee1a8(0xab)]['repositoryId'],this['options'][_0x1ee1a8(0xc9)],_0x2bc0e6[_0x1ee1a8(0xae)],this[_0x1ee1a8(0xab)][_0x1ee1a8(0xbd)],this['proceededComponentsMeta']);_0x4be919[_0x1ee1a8(0xe8)](...await _0x2b18fb[_0x1ee1a8(0xe7)](_0x2bc0e6['inserted'],this['options'][_0x1ee1a8(0xc7)])),_0x4be919[_0x1ee1a8(0xe8)](...await _0x2b18fb[_0x1ee1a8(0xc1)](_0x2bc0e6['modified'],this['options']['commitId'])),_0x1ece3f['push'](await _0x2b18fb['delete'](_0x2bc0e6['removed'],!![])),this[_0x1ee1a8(0xd4)]=_0x2b18fb[_0x1ee1a8(0xc3)](),await this[_0x1ee1a8(0xde)](_0x4be919,!![]);for(const _0x3b94a2 of _0x1ece3f){_0x3b94a2[_0x1ee1a8(0xbb)][_0x1ee1a8(0xe3)]&&await this[_0x1ee1a8(0xde)](_0x3b94a2['manifests'],!![]),_0x3b94a2['componentsToUpdate'][_0x1ee1a8(0xe3)]&&await this['proceedRequests'](_0x3b94a2[_0x1ee1a8(0xc4)],!![]),_0x3b94a2['componentsToDelete'][_0x1ee1a8(0xe3)]&&await this[_0x1ee1a8(0xde)](_0x3b94a2[_0x1ee1a8(0xda)],!![]);}this[_0x1ee1a8(0xeb)][_0x1ee1a8(0xea)](_0x1ee1a8(0xc0),_0x4be919['length']);}}async[a233_0x1118ee(0xee)](_0x59a286){const _0x182829=a233_0x1118ee,_0x4b8744=[],_0x59b057=[];for(const _0x4f1ef2 of _0x59a286){if(!_0x4f1ef2['inserted'][_0x182829(0xe3)]&&!_0x4f1ef2[_0x182829(0xcd)][_0x182829(0xe3)]&&!_0x4f1ef2[_0x182829(0xad)]['length'])continue;const _0x26fa5b=new salesforce_components_manager_service_1['SalesforceComponentsManager'](this[_0x182829(0xab)][_0x182829(0xb4)],this['options'][_0x182829(0xc9)],_0x4f1ef2[_0x182829(0xae)],this[_0x182829(0xab)][_0x182829(0xbd)],[]);_0x4b8744[_0x182829(0xe8)](...await _0x26fa5b[_0x182829(0xe7)](_0x4f1ef2[_0x182829(0xe6)])),_0x4b8744[_0x182829(0xe8)](...await _0x26fa5b[_0x182829(0xc1)](_0x4f1ef2[_0x182829(0xcd)])),_0x59b057[_0x182829(0xe8)](await _0x26fa5b[_0x182829(0xd3)](_0x4f1ef2[_0x182829(0xad)]));}this['logger'][_0x182829(0xea)](_0x182829(0xb3),_0x4b8744[_0x182829(0xe3)]),await this[_0x182829(0xde)](_0x4b8744);const _0x264cf6=_0x59b057[_0x182829(0xed)]((_0x19d5f7,_0x2e3d7e)=>({'manifests':[..._0x19d5f7[_0x182829(0xbb)],..._0x2e3d7e['manifests']],'componentsToDelete':[..._0x19d5f7[_0x182829(0xda)],..._0x2e3d7e['componentsToDelete']],'componentsToUpdate':[..._0x19d5f7[_0x182829(0xc4)],..._0x2e3d7e['componentsToUpdate']]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x264cf6['manifests'][_0x182829(0xe3)]&&await this[_0x182829(0xde)](_0x264cf6['manifests'],!![]),_0x264cf6['componentsToUpdate'][_0x182829(0xe3)]&&await this['proceedRequests'](_0x264cf6['componentsToUpdate'],!![]),_0x264cf6[_0x182829(0xda)][_0x182829(0xe3)]&&await this['proceedRequests'](_0x264cf6['componentsToDelete'],!![]);}async[a233_0x1118ee(0xb9)](_0x1a6845){const _0x328f2b=a233_0x1118ee;this[_0x328f2b(0xab)][_0x328f2b(0xc9)]?await this['proceedCommitsToBranch'](_0x1a6845):await this[_0x328f2b(0xcc)](_0x1a6845);}}function a233_0x1fa1(){const _0x577b4b=['1220464uPNQSi','getProceededComponentsMeta','componentsToUpdate','9qhYDWE','__importDefault','commitId','Cannot\x20upload\x20components\x20due\x20to\x20size\x20-\x20MAX_SIZE\x20=\x20','branchId','24guikbE','toString','proceedCommitsToRepository','modified','extractComponentIdsFromGraphsResponse','sfLogger','(((.+)+)+)+$','../utils/composite.utils','stringify','delete','proceededComponentsMeta','error','SalesforceError','12315snUwaO','774392EbQgZw','../errors/salesforce.error','componentsToDelete','./salesforce-composite.service','./salesforce-components-manager.service','search','proceedRequests','typedi','COMPONENTS_PER_CHUNK','SalesforceComponentsManager','SALESFORCE_MAX_REQUEST_SIZE_BYTES','length','2089224zMfcgW','proceedChunksToUpload','inserted','insert','push','componentId','log','logger','graph','reduce','proceedCommitsToBranch','2465826Iaksfq','constructor','88oEmWFa','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','3309260lFFBjK','options','5309480KqSDZx','removed','author','splice','map','composite','apply','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','repositoryId','name','SalesforceCompositeService','floor','Sending\x20','proceedCommits','832vAdHWg','manifests','reference','recordTypes','toJSON','__esModule','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','update'];a233_0x1fa1=function(){return _0x577b4b;};return a233_0x1fa1();}exports['SalesforceCommitsManager']=SalesforceCommitsManager;