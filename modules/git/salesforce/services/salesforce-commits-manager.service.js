function a227_0x141a(){const _0x354a10=['composite','graph','proceedCommits','log','./salesforce-components-manager.service','executeGraphs','SalesforceCompositeService','../../../shared/utils','options','modified','SalesforceCommitsManager','2495410jgCQWd','inserted','constructor','branchId','COMPONENTS_PER_CHUNK','proceedCommitsToBranch','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','update','proceededComponentsMeta','toString','find','Logger','10132624AdvZDM','2671540OeBNqo','SalesforceError','getProceededComponentsMeta','../utils/composite.utils','13247311VfTJVL','SalesforceComponentsManager','recordTypes','proceedCommitsToRepository','stringify','componentsToDelete','error','3DvEJAg','repositoryId','componentsToUpdate','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','15166dkSHJS','./salesforce-composite.service','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','Cannot\x20upload\x20components\x20due\x20to\x20size\x20-\x20MAX_SIZE\x20=\x20','__esModule','defineProperty','search','reference','__importDefault','151YoTccV','delete','1814561isYwXm','manifests','sfLogger','push','map','extractComponentIdsFromGraphsResponse','6535NstjuT','typedi','insert','componentId','1146EAIkuz','default','45muvORb','commitId','removed','SALESFORCE_MAX_REQUEST_SIZE_BYTES','logger','proceedRequests','length','\x20COMPONENTS_SIZE\x20=\x20','author','reduce','toJSON','proceedChunksToUpload'];a227_0x141a=function(){return _0x354a10;};return a227_0x141a();}const a227_0x5428ec=a227_0xa339;(function(_0x1547ad,_0x5c1459){const _0x4e0875=a227_0xa339,_0x2732b8=_0x1547ad();while(!![]){try{const _0x2d62db=parseInt(_0x4e0875(0x1a6))/0x1*(parseInt(_0x4e0875(0x19d))/0x2)+parseInt(_0x4e0875(0x199))/0x3*(parseInt(_0x4e0875(0x18e))/0x4)+parseInt(_0x4e0875(0x1ae))/0x5*(-parseInt(_0x4e0875(0x1b2))/0x6)+parseInt(_0x4e0875(0x1a8))/0x7+parseInt(_0x4e0875(0x18d))/0x8+-parseInt(_0x4e0875(0x1b4))/0x9*(parseInt(_0x4e0875(0x1cb))/0xa)+-parseInt(_0x4e0875(0x192))/0xb;if(_0x2d62db===_0x5c1459)break;else _0x2732b8['push'](_0x2732b8['shift']());}catch(_0x5a946c){_0x2732b8['push'](_0x2732b8['shift']());}}}(a227_0x141a,0x9b894));const a227_0x94c800=(function(){let _0xd91aad=!![];return function(_0x38eab2,_0x3a0358){const _0x2206a7=_0xd91aad?function(){if(_0x3a0358){const _0x12ad50=_0x3a0358['apply'](_0x38eab2,arguments);return _0x3a0358=null,_0x12ad50;}}:function(){};return _0xd91aad=![],_0x2206a7;};}()),a227_0x38e518=a227_0x94c800(this,function(){const _0x26d364=a227_0xa339;return a227_0x38e518[_0x26d364(0x18a)]()[_0x26d364(0x1a3)]('(((.+)+)+)+$')[_0x26d364(0x18a)]()[_0x26d364(0x1cd)](a227_0x38e518)['search']('(((.+)+)+)+$');});function a227_0xa339(_0x96198c,_0x2661f7){const _0x10c432=a227_0x141a();return a227_0xa339=function(_0x38e518,_0x94c800){_0x38e518=_0x38e518-0x189;let _0x141a36=_0x10c432[_0x38e518];return _0x141a36;},a227_0xa339(_0x96198c,_0x2661f7);}a227_0x38e518();'use strict';var __importDefault=this&&this[a227_0x5428ec(0x1a5)]||function(_0x4761d0){const _0x1b9c59=a227_0x5428ec;return _0x4761d0&&_0x4761d0[_0x1b9c59(0x1a1)]?_0x4761d0:{'default':_0x4761d0};};Object[a227_0x5428ec(0x1a2)](exports,a227_0x5428ec(0x1a1),{'value':!![]}),exports[a227_0x5428ec(0x1ca)]=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require(a227_0x5428ec(0x1af))),constants_1=require('../../../../constants'),utils_1=require(a227_0x5428ec(0x1c7)),salesforce_error_1=require('../errors/salesforce.error'),composite_utils_1=require(a227_0x5428ec(0x191)),salesforce_components_manager_service_1=require(a227_0x5428ec(0x1c4)),salesforce_composite_service_1=require(a227_0x5428ec(0x19e));class SalesforceCommitsManager{constructor(_0x276a0a){const _0x5cc096=a227_0x5428ec;this['options']=_0x276a0a,this['COMPONENTS_PER_CHUNK']=0x3,this[_0x5cc096(0x1b8)]=new core_1[(_0x5cc096(0x18c))](SalesforceCommitsManager['name']),this[_0x5cc096(0x1aa)]=this[_0x5cc096(0x1c8)][_0x5cc096(0x1b8)],this[_0x5cc096(0x1c0)]=typedi_1[_0x5cc096(0x1b3)]['get'](salesforce_composite_service_1[_0x5cc096(0x1c6)]),this[_0x5cc096(0x189)]=[];}async[a227_0x5428ec(0x1bf)](_0x49532b,_0x4b9b21=![]){const _0x3d4747=a227_0x5428ec,_0x4284e0=async _0x232971=>{const _0x4b26f8=a227_0xa339;await this[_0x4b26f8(0x1b8)][_0x4b26f8(0x1c3)]('Sending\x20'+_0x232971[_0x4b26f8(0x1bd)]((_0x103c1d,_0xeadfea)=>_0x103c1d+_0xeadfea[_0x4b26f8(0x1ba)],0x0)+'\x20requests\x20to\x20composite\x20api.');const _0x11c567=_0x232971[_0x4b26f8(0x1ac)]((_0x354b70,_0xb4e936)=>({'graphId':_0x4b26f8(0x1c1)+_0xb4e936,'compositeRequest':_0x354b70})),_0x15f49d=await this['composite'][_0x4b26f8(0x1c5)](_0x11c567);if(_0x4b9b21){const _0x55a671=(0x0,composite_utils_1[_0x4b26f8(0x1ad)])(_0x15f49d);for(const {id:_0x1cbcba,ref:_0x39b37c}of _0x55a671){const _0x351e59=this[_0x4b26f8(0x189)][_0x4b26f8(0x18b)](_0x5c29b9=>_0x5c29b9[_0x4b26f8(0x1a4)]===_0x39b37c);_0x351e59&&(_0x351e59[_0x4b26f8(0x1b1)]=_0x1cbcba);}}},_0x176143=0x1e8480;let _0x2a5490=0x0,_0x386b42=[];for(const _0x2de764 of _0x49532b){const _0x424b0f=_0x2de764[_0x3d4747(0x1bd)]((_0x308b56,_0x2783d3)=>{const _0x33f082=_0x3d4747,_0x4c9c25=JSON[_0x33f082(0x196)](_0x2783d3)[_0x33f082(0x1ba)]*0x2;return _0x308b56+_0x4c9c25;},0x0);if(_0x424b0f>constants_1['SALESFORCE_MAX_REQUEST_SIZE_BYTES'])throw new salesforce_error_1[(_0x3d4747(0x18f))](_0x3d4747(0x1a0)+constants_1[_0x3d4747(0x1b7)]+_0x3d4747(0x1bb)+_0x424b0f);_0x2a5490+_0x424b0f>constants_1[_0x3d4747(0x1b7)]-_0x176143&&(await _0x4284e0(_0x386b42),_0x386b42=[],_0x2a5490=0x0),_0x2a5490+=_0x424b0f,_0x386b42[_0x3d4747(0x1ab)](_0x2de764);}_0x386b42[_0x3d4747(0x1ba)]&&await _0x4284e0(_0x386b42);}async[a227_0x5428ec(0x1b9)](_0x2d7266,_0x23260b=![]){const _0x4c6911=a227_0x5428ec,_0x37a96=(this[_0x4c6911(0x1cf)]+ +_0x23260b)*0x3,_0x43b37b=(0x0,utils_1['chunkArray'])(_0x2d7266,_0x37a96);try{while(_0x43b37b[_0x4c6911(0x1ba)]){const _0x4e0cd0=_0x43b37b['splice'](0x0,Math['floor'](constants_1[_0x4c6911(0x1d1)]/_0x37a96));await this['proceedChunksToUpload'](_0x4e0cd0,_0x23260b);}}catch(_0x3f39d4){this[_0x4c6911(0x1b8)][_0x4c6911(0x198)](_0x3f39d4 instanceof salesforce_error_1[_0x4c6911(0x18f)]?JSON[_0x4c6911(0x196)](_0x3f39d4['toJSON'](),null,0x2):_0x3f39d4),this[_0x4c6911(0x1aa)][_0x4c6911(0x1c3)](_0x3f39d4 instanceof salesforce_error_1[_0x4c6911(0x18f)]?JSON[_0x4c6911(0x196)](_0x3f39d4[_0x4c6911(0x1be)](),null,0x2):_0x3f39d4[_0x4c6911(0x18a)]());throw _0x3f39d4;}}async[a227_0x5428ec(0x195)](_0x1b3394){const _0x4c934a=a227_0x5428ec;for(const _0x446304 of _0x1b3394){if(!_0x446304['inserted'][_0x4c934a(0x1ba)]&&!_0x446304[_0x4c934a(0x1c9)]['length']&&!_0x446304['removed']['length'])continue;const _0x4d2ca9=[],_0x5da703=[],_0x3c8bb4=new salesforce_components_manager_service_1[(_0x4c934a(0x193))](this[_0x4c934a(0x1c8)][_0x4c934a(0x19a)],this[_0x4c934a(0x1c8)][_0x4c934a(0x1ce)],_0x446304['author'],this[_0x4c934a(0x1c8)][_0x4c934a(0x194)],this[_0x4c934a(0x189)]);_0x4d2ca9[_0x4c934a(0x1ab)](...await _0x3c8bb4[_0x4c934a(0x1b0)](_0x446304[_0x4c934a(0x1cc)],this[_0x4c934a(0x1c8)][_0x4c934a(0x1b5)])),_0x4d2ca9[_0x4c934a(0x1ab)](...await _0x3c8bb4[_0x4c934a(0x1d2)](_0x446304[_0x4c934a(0x1c9)],this[_0x4c934a(0x1c8)][_0x4c934a(0x1b5)])),_0x5da703[_0x4c934a(0x1ab)](await _0x3c8bb4[_0x4c934a(0x1a7)](_0x446304[_0x4c934a(0x1b6)],!![])),this[_0x4c934a(0x189)]=_0x3c8bb4[_0x4c934a(0x190)](),await this[_0x4c934a(0x1b9)](_0x4d2ca9,!![]);for(const _0x1369cb of _0x5da703){_0x1369cb[_0x4c934a(0x1a9)][_0x4c934a(0x1ba)]&&await this[_0x4c934a(0x1b9)](_0x1369cb[_0x4c934a(0x1a9)],!![]),_0x1369cb[_0x4c934a(0x19b)][_0x4c934a(0x1ba)]&&await this['proceedRequests'](_0x1369cb[_0x4c934a(0x19b)],!![]),_0x1369cb[_0x4c934a(0x197)][_0x4c934a(0x1ba)]&&await this[_0x4c934a(0x1b9)](_0x1369cb['componentsToDelete'],!![]);}this[_0x4c934a(0x1b8)][_0x4c934a(0x1c3)](_0x4c934a(0x19f),_0x4d2ca9['length']);}}async[a227_0x5428ec(0x1d0)](_0x4d4bbb){const _0x435fda=a227_0x5428ec,_0x4858e7=[],_0x12f23e=[];for(const _0x53c5d5 of _0x4d4bbb){if(!_0x53c5d5[_0x435fda(0x1cc)][_0x435fda(0x1ba)]&&!_0x53c5d5[_0x435fda(0x1c9)]['length']&&!_0x53c5d5[_0x435fda(0x1b6)][_0x435fda(0x1ba)])continue;const _0x1e0297=new salesforce_components_manager_service_1[(_0x435fda(0x193))](this['options'][_0x435fda(0x19a)],this[_0x435fda(0x1c8)][_0x435fda(0x1ce)],_0x53c5d5[_0x435fda(0x1bc)],this[_0x435fda(0x1c8)][_0x435fda(0x194)],[]);_0x4858e7['push'](...await _0x1e0297[_0x435fda(0x1b0)](_0x53c5d5[_0x435fda(0x1cc)])),_0x4858e7[_0x435fda(0x1ab)](...await _0x1e0297[_0x435fda(0x1d2)](_0x53c5d5['modified'])),_0x12f23e[_0x435fda(0x1ab)](await _0x1e0297[_0x435fda(0x1a7)](_0x53c5d5[_0x435fda(0x1b6)]));}this['logger'][_0x435fda(0x1c3)](_0x435fda(0x19c),_0x4858e7['length']),await this[_0x435fda(0x1b9)](_0x4858e7);const _0x5c2faf=_0x12f23e[_0x435fda(0x1bd)]((_0x503d1d,_0x276e3f)=>({'manifests':[..._0x503d1d[_0x435fda(0x1a9)],..._0x276e3f[_0x435fda(0x1a9)]],'componentsToDelete':[..._0x503d1d[_0x435fda(0x197)],..._0x276e3f[_0x435fda(0x197)]],'componentsToUpdate':[..._0x503d1d[_0x435fda(0x19b)],..._0x276e3f[_0x435fda(0x19b)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x5c2faf[_0x435fda(0x1a9)][_0x435fda(0x1ba)]&&await this[_0x435fda(0x1b9)](_0x5c2faf[_0x435fda(0x1a9)],!![]),_0x5c2faf[_0x435fda(0x19b)][_0x435fda(0x1ba)]&&await this[_0x435fda(0x1b9)](_0x5c2faf[_0x435fda(0x19b)],!![]),_0x5c2faf['componentsToDelete']['length']&&await this[_0x435fda(0x1b9)](_0x5c2faf[_0x435fda(0x197)],!![]);}async[a227_0x5428ec(0x1c2)](_0x3171b9){const _0x43c0fc=a227_0x5428ec;this[_0x43c0fc(0x1c8)][_0x43c0fc(0x1ce)]?await this[_0x43c0fc(0x1d0)](_0x3171b9):await this[_0x43c0fc(0x195)](_0x3171b9);}}exports[a227_0x5428ec(0x1ca)]=SalesforceCommitsManager;