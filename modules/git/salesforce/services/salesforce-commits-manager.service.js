function a233_0x4baf(_0xb8458f,_0x1f996f){const _0x1fd43b=a233_0x27a1();return a233_0x4baf=function(_0x4d5324,_0x4c1082){_0x4d5324=_0x4d5324-0x177;let _0x27a171=_0x1fd43b[_0x4d5324];return _0x27a171;},a233_0x4baf(_0xb8458f,_0x1f996f);}function a233_0x27a1(){const _0x63058e=['floor','proceedChunksToUpload','2158440PQstvi','../../../shared/utils','map','get','1302090mwRnQZ','toJSON','./salesforce-composite.service','367738aUoLmc','proceededComponentsMeta','COMPONENTS_PER_CHUNK','toString','\x20requests\x20to\x20composite\x20api.','9EIjQKq','__esModule','SalesforceCompositeService','removed','SalesforceCommitsManager','7UCrkOn','search','extractComponentIdsFromGraphsResponse','insert','SalesforceError','SALESFORCE_MAX_REQUEST_SIZE_BYTES','(((.+)+)+)+$','componentsToDelete','push','getProceededComponentsMeta','defineProperty','13xjlDLM','proceedCommitsToRepository','15302928AdbrCB','reduce','proceedCommitsToBranch','138sPsXxD','proceedRequests','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','default','inserted','Sending\x20','proceedCommits','length','../errors/salesforce.error','manifests','SalesforceComponentsManager','update','239244rZCNXs','componentId','414280ktgZsE','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','delete','error','Cannot\x20upload\x20components\x20due\x20to\x20size\x20-\x20MAX_SIZE\x20=\x20','recordTypes','log','2652iwavgV','composite','commitId','componentsToUpdate','stringify','constructor','name','options','typedi','graph','branchId','logger','modified','5FPQjEo','sfLogger','22zhMgQv','repositoryId'];a233_0x27a1=function(){return _0x63058e;};return a233_0x27a1();}const a233_0x5e3595=a233_0x4baf;(function(_0x8b29f4,_0x41e580){const _0x2854c9=a233_0x4baf,_0x5e302f=_0x8b29f4();while(!![]){try{const _0x472438=-parseInt(_0x2854c9(0x1aa))/0x1+parseInt(_0x2854c9(0x190))/0x2*(-parseInt(_0x2854c9(0x17b))/0x3)+parseInt(_0x2854c9(0x187))/0x4*(-parseInt(_0x2854c9(0x19d))/0x5)+-parseInt(_0x2854c9(0x1a3))/0x6*(parseInt(_0x2854c9(0x1b4))/0x7)+parseInt(_0x2854c9(0x189))/0x8*(parseInt(_0x2854c9(0x1af))/0x9)+parseInt(_0x2854c9(0x1a7))/0xa*(-parseInt(_0x2854c9(0x19f))/0xb)+-parseInt(_0x2854c9(0x178))/0xc*(-parseInt(_0x2854c9(0x1bf))/0xd);if(_0x472438===_0x41e580)break;else _0x5e302f['push'](_0x5e302f['shift']());}catch(_0x1082b2){_0x5e302f['push'](_0x5e302f['shift']());}}}(a233_0x27a1,0x354d6));const a233_0x4c1082=(function(){let _0x4ea8c8=!![];return function(_0x2c9ebb,_0x961659){const _0x214b1f=_0x4ea8c8?function(){if(_0x961659){const _0x3cb806=_0x961659['apply'](_0x2c9ebb,arguments);return _0x961659=null,_0x3cb806;}}:function(){};return _0x4ea8c8=![],_0x214b1f;};}()),a233_0x4d5324=a233_0x4c1082(this,function(){const _0x25bdcb=a233_0x4baf;return a233_0x4d5324[_0x25bdcb(0x1ad)]()[_0x25bdcb(0x1b5)](_0x25bdcb(0x1ba))['toString']()[_0x25bdcb(0x195)](a233_0x4d5324)[_0x25bdcb(0x1b5)](_0x25bdcb(0x1ba));});a233_0x4d5324();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2efb6d){return _0x2efb6d&&_0x2efb6d['__esModule']?_0x2efb6d:{'default':_0x2efb6d};};Object[a233_0x5e3595(0x1be)](exports,a233_0x5e3595(0x1b0),{'value':!![]}),exports[a233_0x5e3595(0x1b3)]=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require(a233_0x5e3595(0x198))),constants_1=require('../../../../constants'),utils_1=require(a233_0x5e3595(0x1a4)),salesforce_error_1=require(a233_0x5e3595(0x183)),composite_utils_1=require('../utils/composite.utils'),salesforce_components_manager_service_1=require('./salesforce-components-manager.service'),salesforce_composite_service_1=require(a233_0x5e3595(0x1a9));class SalesforceCommitsManager{constructor(_0x39459b){const _0x1d547f=a233_0x5e3595;this['options']=_0x39459b,this[_0x1d547f(0x1ac)]=0x3,this['logger']=new core_1['Logger'](SalesforceCommitsManager[_0x1d547f(0x196)]),this[_0x1d547f(0x19e)]=this[_0x1d547f(0x197)][_0x1d547f(0x19b)],this[_0x1d547f(0x191)]=typedi_1[_0x1d547f(0x17e)][_0x1d547f(0x1a6)](salesforce_composite_service_1[_0x1d547f(0x1b1)]),this[_0x1d547f(0x1ab)]=[];}async['proceedChunksToUpload'](_0x59a81d,_0x530377=![]){const _0x2ba270=a233_0x5e3595,_0x51a32a=async _0x341deb=>{const _0x2f6c65=a233_0x4baf;await this[_0x2f6c65(0x19b)][_0x2f6c65(0x18f)](_0x2f6c65(0x180)+_0x341deb['reduce']((_0x43d5df,_0x4a03cf)=>_0x43d5df+_0x4a03cf['length'],0x0)+_0x2f6c65(0x1ae));const _0x5181c8=_0x341deb[_0x2f6c65(0x1a5)]((_0x1482b,_0x386837)=>({'graphId':_0x2f6c65(0x199)+_0x386837,'compositeRequest':_0x1482b})),_0x2193f9=await this['composite']['executeGraphs'](_0x5181c8);if(_0x530377){const _0x5d7d94=(0x0,composite_utils_1[_0x2f6c65(0x1b6)])(_0x2193f9);for(const {id:_0x2cbd7c,ref:_0x1405ae}of _0x5d7d94){const _0x1d9c18=this['proceededComponentsMeta']['find'](_0xbe05ce=>_0xbe05ce['reference']===_0x1405ae);_0x1d9c18&&(_0x1d9c18[_0x2f6c65(0x188)]=_0x2cbd7c);}}},_0x5d47b7=0x1e8480;let _0x260942=0x0,_0x1272da=[];for(const _0x340f8d of _0x59a81d){const _0x1489e5=_0x340f8d[_0x2ba270(0x179)]((_0x39b88b,_0x47b5fe)=>{const _0x2d274d=_0x2ba270,_0x12a54d=JSON[_0x2d274d(0x194)](_0x47b5fe)[_0x2d274d(0x182)]*0x2;return _0x39b88b+_0x12a54d;},0x0);if(_0x1489e5>constants_1['SALESFORCE_MAX_REQUEST_SIZE_BYTES'])throw new salesforce_error_1['SalesforceError'](_0x2ba270(0x18d)+constants_1[_0x2ba270(0x1b9)]+'\x20COMPONENTS_SIZE\x20=\x20'+_0x1489e5);_0x260942+_0x1489e5>constants_1[_0x2ba270(0x1b9)]-_0x5d47b7&&(await _0x51a32a(_0x1272da),_0x1272da=[],_0x260942=0x0),_0x260942+=_0x1489e5,_0x1272da['push'](_0x340f8d);}_0x1272da[_0x2ba270(0x182)]&&await _0x51a32a(_0x1272da);}async['proceedRequests'](_0x452571,_0x2eacfa=![]){const _0x3477d5=a233_0x5e3595,_0x296cae=(this['COMPONENTS_PER_CHUNK']+ +_0x2eacfa)*0x3,_0x94081b=(0x0,utils_1['chunkArray'])(_0x452571,_0x296cae);try{while(_0x94081b[_0x3477d5(0x182)]){const _0x2a452f=_0x94081b['splice'](0x0,Math[_0x3477d5(0x1a1)](constants_1['SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST']/_0x296cae));await this[_0x3477d5(0x1a2)](_0x2a452f,_0x2eacfa);}}catch(_0x191d51){this[_0x3477d5(0x19b)][_0x3477d5(0x18c)](_0x191d51 instanceof salesforce_error_1[_0x3477d5(0x1b8)]?JSON[_0x3477d5(0x194)](_0x191d51[_0x3477d5(0x1a8)](),null,0x2):_0x191d51),this[_0x3477d5(0x19e)][_0x3477d5(0x18f)](_0x191d51 instanceof salesforce_error_1['SalesforceError']?JSON['stringify'](_0x191d51['toJSON'](),null,0x2):_0x191d51['toString']());throw _0x191d51;}}async['proceedCommitsToRepository'](_0x43b6b9){const _0x1719dd=a233_0x5e3595;for(const _0x318de5 of _0x43b6b9){if(!_0x318de5[_0x1719dd(0x17f)]['length']&&!_0x318de5[_0x1719dd(0x19c)][_0x1719dd(0x182)]&&!_0x318de5[_0x1719dd(0x1b2)][_0x1719dd(0x182)])continue;const _0x4052d6=[],_0x320cb5=[],_0x5459e9=new salesforce_components_manager_service_1[(_0x1719dd(0x185))](this[_0x1719dd(0x197)][_0x1719dd(0x1a0)],this[_0x1719dd(0x197)][_0x1719dd(0x19a)],_0x318de5['author'],this[_0x1719dd(0x197)][_0x1719dd(0x18e)],this[_0x1719dd(0x1ab)]);_0x4052d6['push'](...await _0x5459e9[_0x1719dd(0x1b7)](_0x318de5[_0x1719dd(0x17f)],this[_0x1719dd(0x197)][_0x1719dd(0x192)])),_0x4052d6[_0x1719dd(0x1bc)](...await _0x5459e9[_0x1719dd(0x186)](_0x318de5['modified'],this['options'][_0x1719dd(0x192)])),_0x320cb5['push'](await _0x5459e9['delete'](_0x318de5['removed'],!![])),this[_0x1719dd(0x1ab)]=_0x5459e9[_0x1719dd(0x1bd)](),await this[_0x1719dd(0x17c)](_0x4052d6,!![]);for(const _0x1026d5 of _0x320cb5){_0x1026d5[_0x1719dd(0x184)][_0x1719dd(0x182)]&&await this[_0x1719dd(0x17c)](_0x1026d5['manifests'],!![]),_0x1026d5[_0x1719dd(0x193)][_0x1719dd(0x182)]&&await this['proceedRequests'](_0x1026d5[_0x1719dd(0x193)],!![]),_0x1026d5['componentsToDelete'][_0x1719dd(0x182)]&&await this[_0x1719dd(0x17c)](_0x1026d5['componentsToDelete'],!![]);}this[_0x1719dd(0x19b)][_0x1719dd(0x18f)](_0x1719dd(0x17d),_0x4052d6[_0x1719dd(0x182)]);}}async[a233_0x5e3595(0x17a)](_0x484f6f){const _0x41b089=a233_0x5e3595,_0x15c816=[],_0x4b3966=[];for(const _0x439e0e of _0x484f6f){if(!_0x439e0e[_0x41b089(0x17f)]['length']&&!_0x439e0e[_0x41b089(0x19c)]['length']&&!_0x439e0e[_0x41b089(0x1b2)][_0x41b089(0x182)])continue;const _0x231f4a=new salesforce_components_manager_service_1[(_0x41b089(0x185))](this[_0x41b089(0x197)][_0x41b089(0x1a0)],this[_0x41b089(0x197)]['branchId'],_0x439e0e['author'],this[_0x41b089(0x197)][_0x41b089(0x18e)],[]);_0x15c816[_0x41b089(0x1bc)](...await _0x231f4a[_0x41b089(0x1b7)](_0x439e0e[_0x41b089(0x17f)])),_0x15c816['push'](...await _0x231f4a[_0x41b089(0x186)](_0x439e0e['modified'])),_0x4b3966[_0x41b089(0x1bc)](await _0x231f4a[_0x41b089(0x18b)](_0x439e0e['removed']));}this[_0x41b089(0x19b)]['log'](_0x41b089(0x18a),_0x15c816[_0x41b089(0x182)]),await this['proceedRequests'](_0x15c816);const _0xa3a18c=_0x4b3966[_0x41b089(0x179)]((_0xf0cba1,_0xf84b5a)=>({'manifests':[..._0xf0cba1[_0x41b089(0x184)],..._0xf84b5a['manifests']],'componentsToDelete':[..._0xf0cba1['componentsToDelete'],..._0xf84b5a[_0x41b089(0x1bb)]],'componentsToUpdate':[..._0xf0cba1['componentsToUpdate'],..._0xf84b5a['componentsToUpdate']]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0xa3a18c[_0x41b089(0x184)]['length']&&await this[_0x41b089(0x17c)](_0xa3a18c[_0x41b089(0x184)],!![]),_0xa3a18c['componentsToUpdate']['length']&&await this[_0x41b089(0x17c)](_0xa3a18c[_0x41b089(0x193)],!![]),_0xa3a18c[_0x41b089(0x1bb)][_0x41b089(0x182)]&&await this[_0x41b089(0x17c)](_0xa3a18c[_0x41b089(0x1bb)],!![]);}async[a233_0x5e3595(0x181)](_0x13005e){const _0x55ffa0=a233_0x5e3595;this['options']['branchId']?await this[_0x55ffa0(0x17a)](_0x13005e):await this[_0x55ffa0(0x177)](_0x13005e);}}exports[a233_0x5e3595(0x1b3)]=SalesforceCommitsManager;