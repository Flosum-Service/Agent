function a228_0x33d0(){const _0x2daaa6=['proceedRequests','find','search','manifests','\x20COMPONENTS_SIZE\x20=\x20','insert','toString','780IqGiMW','name','__importDefault','../../../../constants','componentsToUpdate','modified','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','proceedChunksToUpload','SALESFORCE_MAX_REQUEST_SIZE_BYTES','./salesforce-components-manager.service','SalesforceError','SalesforceCompositeService','1067747eGtDFD','2uATASC','Sending\x20','options','../../../shared/utils','length','map','apply','proceedCommitsToRepository','35AcMIbA','removed','chunkArray','error','proceedCommits','graph','8498392tajaBc','12232KpfcAs','12080NLwCCG','commitId','repositoryId','push','stringify','(((.+)+)+)+$','inserted','componentId','proceedCommitsToBranch','\x20requests\x20to\x20composite\x20api.','764334OBemxl','SalesforceComponentsManager','proceededComponentsMeta','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','1160509ONpzxD','update','Logger','Cannot\x20upload\x20components\x20due\x20to\x20size\x20-\x20MAX_SIZE\x20=\x20','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','floor','author','composite','componentsToDelete','./salesforce-composite.service','branchId','__esModule','log','../errors/salesforce.error','get','logger','recordTypes','COMPONENTS_PER_CHUNK','reduce','4816476ypLLpT','getProceededComponentsMeta','sfLogger','default','delete','splice','SalesforceCommitsManager','16270yaZmVC','../utils/composite.utils','constructor'];a228_0x33d0=function(){return _0x2daaa6;};return a228_0x33d0();}const a228_0x40bce6=a228_0x1fb2;(function(_0x15cb14,_0x5cecaf){const _0x2011bc=a228_0x1fb2,_0x388f89=_0x15cb14();while(!![]){try{const _0x4579f5=-parseInt(_0x2011bc(0x1f0))/0x1*(parseInt(_0x2011bc(0x1f1))/0x2)+-parseInt(_0x2011bc(0x1e4))/0x3*(-parseInt(_0x2011bc(0x201))/0x4)+-parseInt(_0x2011bc(0x1f9))/0x5*(-parseInt(_0x2011bc(0x20b))/0x6)+parseInt(_0x2011bc(0x20f))/0x7+parseInt(_0x2011bc(0x1ff))/0x8+parseInt(_0x2011bc(0x222))/0x9+parseInt(_0x2011bc(0x229))/0xa*(-parseInt(_0x2011bc(0x200))/0xb);if(_0x4579f5===_0x5cecaf)break;else _0x388f89['push'](_0x388f89['shift']());}catch(_0x56a960){_0x388f89['push'](_0x388f89['shift']());}}}(a228_0x33d0,0x89802));function a228_0x1fb2(_0x2041c4,_0x1dfdf5){const _0x2deb8f=a228_0x33d0();return a228_0x1fb2=function(_0x418b32,_0x44705e){_0x418b32=_0x418b32-0x1e0;let _0x33d09a=_0x2deb8f[_0x418b32];return _0x33d09a;},a228_0x1fb2(_0x2041c4,_0x1dfdf5);}const a228_0x44705e=(function(){let _0xdc185=!![];return function(_0x1e0700,_0x519a91){const _0x3ad03e=_0xdc185?function(){const _0x347409=a228_0x1fb2;if(_0x519a91){const _0x5409f6=_0x519a91[_0x347409(0x1f7)](_0x1e0700,arguments);return _0x519a91=null,_0x5409f6;}}:function(){};return _0xdc185=![],_0x3ad03e;};}()),a228_0x418b32=a228_0x44705e(this,function(){const _0x4aac48=a228_0x1fb2;return a228_0x418b32[_0x4aac48(0x1e3)]()[_0x4aac48(0x22e)](_0x4aac48(0x206))[_0x4aac48(0x1e3)]()[_0x4aac48(0x22b)](a228_0x418b32)[_0x4aac48(0x22e)](_0x4aac48(0x206));});a228_0x418b32();'use strict';var __importDefault=this&&this[a228_0x40bce6(0x1e6)]||function(_0x424dfd){const _0x3fcb51=a228_0x40bce6;return _0x424dfd&&_0x424dfd[_0x3fcb51(0x21a)]?_0x424dfd:{'default':_0x424dfd};};Object['defineProperty'](exports,a228_0x40bce6(0x21a),{'value':!![]}),exports[a228_0x40bce6(0x228)]=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require('typedi')),constants_1=require(a228_0x40bce6(0x1e7)),utils_1=require(a228_0x40bce6(0x1f4)),salesforce_error_1=require(a228_0x40bce6(0x21c)),composite_utils_1=require(a228_0x40bce6(0x22a)),salesforce_components_manager_service_1=require(a228_0x40bce6(0x1ed)),salesforce_composite_service_1=require(a228_0x40bce6(0x218));class SalesforceCommitsManager{constructor(_0x3f7935){const _0x2cb762=a228_0x40bce6;this[_0x2cb762(0x1f3)]=_0x3f7935,this[_0x2cb762(0x220)]=0x3,this[_0x2cb762(0x21e)]=new core_1[(_0x2cb762(0x211))](SalesforceCommitsManager[_0x2cb762(0x1e5)]),this[_0x2cb762(0x224)]=this['options']['logger'],this[_0x2cb762(0x216)]=typedi_1[_0x2cb762(0x225)][_0x2cb762(0x21d)](salesforce_composite_service_1[_0x2cb762(0x1ef)]),this[_0x2cb762(0x20d)]=[];}async[a228_0x40bce6(0x1eb)](_0x47b584,_0x34e524=![]){const _0x161879=a228_0x40bce6,_0x398276=async _0x488f14=>{const _0x3801c3=a228_0x1fb2;await this[_0x3801c3(0x21e)][_0x3801c3(0x21b)](_0x3801c3(0x1f2)+_0x488f14['reduce']((_0x47a58e,_0x125b8d)=>_0x47a58e+_0x125b8d[_0x3801c3(0x1f5)],0x0)+_0x3801c3(0x20a));const _0x2c1c52=_0x488f14[_0x3801c3(0x1f6)]((_0x278e03,_0x9bdf04)=>({'graphId':_0x3801c3(0x1fe)+_0x9bdf04,'compositeRequest':_0x278e03})),_0x536b41=await this[_0x3801c3(0x216)]['executeGraphs'](_0x2c1c52);if(_0x34e524){const _0x1a2915=(0x0,composite_utils_1['extractComponentIdsFromGraphsResponse'])(_0x536b41);for(const {id:_0x4d97c5,ref:_0xdf8a54}of _0x1a2915){const _0x21d507=this[_0x3801c3(0x20d)][_0x3801c3(0x22d)](_0x4746ae=>_0x4746ae['reference']===_0xdf8a54);_0x21d507&&(_0x21d507[_0x3801c3(0x208)]=_0x4d97c5);}}},_0x40a215=0x1e8480;let _0x3f96e1=0x0,_0x5bcbb8=[];for(const _0x3141c5 of _0x47b584){const _0x33abdb=_0x3141c5['reduce']((_0x289893,_0x3fb016)=>{const _0x477244=a228_0x1fb2,_0x161868=JSON['stringify'](_0x3fb016)[_0x477244(0x1f5)]*0x2;return _0x289893+_0x161868;},0x0);if(_0x33abdb>constants_1[_0x161879(0x1ec)])throw new salesforce_error_1[(_0x161879(0x1ee))](_0x161879(0x212)+constants_1[_0x161879(0x1ec)]+_0x161879(0x1e1)+_0x33abdb);_0x3f96e1+_0x33abdb>constants_1[_0x161879(0x1ec)]-_0x40a215&&(await _0x398276(_0x5bcbb8),_0x5bcbb8=[],_0x3f96e1=0x0),_0x3f96e1+=_0x33abdb,_0x5bcbb8[_0x161879(0x204)](_0x3141c5);}_0x5bcbb8[_0x161879(0x1f5)]&&await _0x398276(_0x5bcbb8);}async[a228_0x40bce6(0x22c)](_0x16b6d5,_0xc878ba=![]){const _0x4e4a7e=a228_0x40bce6,_0x3757a7=(this[_0x4e4a7e(0x220)]+ +_0xc878ba)*0x3,_0x4888d8=(0x0,utils_1[_0x4e4a7e(0x1fb)])(_0x16b6d5,_0x3757a7);try{while(_0x4888d8[_0x4e4a7e(0x1f5)]){const _0xf110d4=_0x4888d8[_0x4e4a7e(0x227)](0x0,Math[_0x4e4a7e(0x214)](constants_1[_0x4e4a7e(0x20e)]/_0x3757a7));await this[_0x4e4a7e(0x1eb)](_0xf110d4,_0xc878ba);}}catch(_0x19b67d){this[_0x4e4a7e(0x21e)][_0x4e4a7e(0x1fc)](_0x19b67d instanceof salesforce_error_1[_0x4e4a7e(0x1ee)]?JSON[_0x4e4a7e(0x205)](_0x19b67d['toJSON'](),null,0x2):_0x19b67d),this[_0x4e4a7e(0x224)]['log'](_0x19b67d instanceof salesforce_error_1['SalesforceError']?JSON[_0x4e4a7e(0x205)](_0x19b67d['toJSON'](),null,0x2):_0x19b67d[_0x4e4a7e(0x1e3)]());throw _0x19b67d;}}async['proceedCommitsToRepository'](_0x463ff3){const _0x5db6c5=a228_0x40bce6;for(const _0x28d72e of _0x463ff3){if(!_0x28d72e[_0x5db6c5(0x207)][_0x5db6c5(0x1f5)]&&!_0x28d72e[_0x5db6c5(0x1e9)][_0x5db6c5(0x1f5)]&&!_0x28d72e[_0x5db6c5(0x1fa)][_0x5db6c5(0x1f5)])continue;const _0x483ac2=[],_0x23c238=[],_0x250d8d=new salesforce_components_manager_service_1[(_0x5db6c5(0x20c))](this[_0x5db6c5(0x1f3)][_0x5db6c5(0x203)],this[_0x5db6c5(0x1f3)][_0x5db6c5(0x219)],_0x28d72e[_0x5db6c5(0x215)],this[_0x5db6c5(0x1f3)][_0x5db6c5(0x21f)],this[_0x5db6c5(0x20d)]);_0x483ac2[_0x5db6c5(0x204)](...await _0x250d8d[_0x5db6c5(0x1e2)](_0x28d72e[_0x5db6c5(0x207)],this['options']['commitId'])),_0x483ac2[_0x5db6c5(0x204)](...await _0x250d8d[_0x5db6c5(0x210)](_0x28d72e[_0x5db6c5(0x1e9)],this['options'][_0x5db6c5(0x202)])),_0x23c238['push'](await _0x250d8d[_0x5db6c5(0x226)](_0x28d72e['removed'],!![])),this['proceededComponentsMeta']=_0x250d8d[_0x5db6c5(0x223)](),await this[_0x5db6c5(0x22c)](_0x483ac2,!![]);for(const _0x266f0d of _0x23c238){_0x266f0d[_0x5db6c5(0x1e0)]['length']&&await this['proceedRequests'](_0x266f0d[_0x5db6c5(0x1e0)],!![]),_0x266f0d[_0x5db6c5(0x1e8)][_0x5db6c5(0x1f5)]&&await this[_0x5db6c5(0x22c)](_0x266f0d[_0x5db6c5(0x1e8)],!![]),_0x266f0d[_0x5db6c5(0x217)][_0x5db6c5(0x1f5)]&&await this[_0x5db6c5(0x22c)](_0x266f0d[_0x5db6c5(0x217)],!![]);}this['logger'][_0x5db6c5(0x21b)](_0x5db6c5(0x213),_0x483ac2[_0x5db6c5(0x1f5)]);}}async[a228_0x40bce6(0x209)](_0x25d104){const _0x3de322=a228_0x40bce6,_0x13281e=[],_0x8a5daf=[];for(const _0x1eadc3 of _0x25d104){if(!_0x1eadc3['inserted'][_0x3de322(0x1f5)]&&!_0x1eadc3['modified'][_0x3de322(0x1f5)]&&!_0x1eadc3['removed'][_0x3de322(0x1f5)])continue;const _0x81ca8=new salesforce_components_manager_service_1[(_0x3de322(0x20c))](this[_0x3de322(0x1f3)][_0x3de322(0x203)],this[_0x3de322(0x1f3)][_0x3de322(0x219)],_0x1eadc3[_0x3de322(0x215)],this[_0x3de322(0x1f3)][_0x3de322(0x21f)],[]);_0x13281e['push'](...await _0x81ca8['insert'](_0x1eadc3['inserted'])),_0x13281e[_0x3de322(0x204)](...await _0x81ca8[_0x3de322(0x210)](_0x1eadc3['modified'])),_0x8a5daf['push'](await _0x81ca8[_0x3de322(0x226)](_0x1eadc3[_0x3de322(0x1fa)]));}this['logger']['log'](_0x3de322(0x1ea),_0x13281e[_0x3de322(0x1f5)]),await this[_0x3de322(0x22c)](_0x13281e);const _0x132124=_0x8a5daf[_0x3de322(0x221)]((_0x215775,_0x51657d)=>({'manifests':[..._0x215775[_0x3de322(0x1e0)],..._0x51657d[_0x3de322(0x1e0)]],'componentsToDelete':[..._0x215775[_0x3de322(0x217)],..._0x51657d[_0x3de322(0x217)]],'componentsToUpdate':[..._0x215775[_0x3de322(0x1e8)],..._0x51657d['componentsToUpdate']]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x132124['manifests']['length']&&await this[_0x3de322(0x22c)](_0x132124[_0x3de322(0x1e0)],!![]),_0x132124[_0x3de322(0x1e8)][_0x3de322(0x1f5)]&&await this['proceedRequests'](_0x132124['componentsToUpdate'],!![]),_0x132124['componentsToDelete'][_0x3de322(0x1f5)]&&await this[_0x3de322(0x22c)](_0x132124[_0x3de322(0x217)],!![]);}async[a228_0x40bce6(0x1fd)](_0x425057){const _0x387690=a228_0x40bce6;this[_0x387690(0x1f3)][_0x387690(0x219)]?await this[_0x387690(0x209)](_0x425057):await this[_0x387690(0x1f8)](_0x425057);}}exports[a228_0x40bce6(0x228)]=SalesforceCommitsManager;