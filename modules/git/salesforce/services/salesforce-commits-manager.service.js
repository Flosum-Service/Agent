const a194_0x333215=a194_0x51e9;(function(_0x3fa8e6,_0x4fdfcc){const _0x465ae7=a194_0x51e9,_0x4f440f=_0x3fa8e6();while(!![]){try{const _0x597ce0=-parseInt(_0x465ae7(0x17d))/0x1*(parseInt(_0x465ae7(0x1b3))/0x2)+parseInt(_0x465ae7(0x199))/0x3+-parseInt(_0x465ae7(0x181))/0x4+parseInt(_0x465ae7(0x177))/0x5+-parseInt(_0x465ae7(0x187))/0x6*(-parseInt(_0x465ae7(0x1b8))/0x7)+parseInt(_0x465ae7(0x1a4))/0x8*(-parseInt(_0x465ae7(0x1b0))/0x9)+-parseInt(_0x465ae7(0x18e))/0xa*(-parseInt(_0x465ae7(0x188))/0xb);if(_0x597ce0===_0x4fdfcc)break;else _0x4f440f['push'](_0x4f440f['shift']());}catch(_0x5e476a){_0x4f440f['push'](_0x4f440f['shift']());}}}(a194_0x3c9c,0x7d37f));function a194_0x3c9c(){const _0x14f2da=['search','SalesforceComponentsManager','toString','floor','name','proceedCommitsToBranch','9DQQeGo','../utils/composite.utils','componentId','233158FVUeWQ','../../../shared/utils','length','branchId','executeGraphs','2761892LBGxKF','Logger','stringify','apply','modified','insert','proceedRequests','sfLogger','error','logger','./salesforce-composite.service','2701265MOCTVD','SalesforceCommitsManager','../errors/salesforce.error','SalesforceCompositeService','\x20requests\x20to\x20composite\x20api.','delete','4CjhTmz','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','./salesforce-components-manager.service','push','948048UbQImR','componentsToUpdate','splice','../../../../core','toJSON','manifests','12IJOWPU','11hGDKkp','composite','update','graph','proceededComponentsMeta','author','404870ztwpnp','SalesforceError','reference','__esModule','getProceededComponentsMeta','inserted','extractComponentIdsFromGraphsResponse','Sending\x20','typedi','recordTypes','map','814110yijOiz','removed','componentsToDelete','(((.+)+)+)+$','repositoryId','defineProperty','COMPONENTS_PER_CHUNK','chunkArray','default','constructor','../../../../constants','3399992PwVPro','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','options','log','proceedCommits'];a194_0x3c9c=function(){return _0x14f2da;};return a194_0x3c9c();}const a194_0x202779=(function(){let _0x145614=!![];return function(_0x9c7702,_0x57574b){const _0x5d6fb1=_0x145614?function(){const _0x2b7fed=a194_0x51e9;if(_0x57574b){const _0x1bae59=_0x57574b[_0x2b7fed(0x1bb)](_0x9c7702,arguments);return _0x57574b=null,_0x1bae59;}}:function(){};return _0x145614=![],_0x5d6fb1;};}()),a194_0x2c7d5d=a194_0x202779(this,function(){const _0x118391=a194_0x51e9;return a194_0x2c7d5d[_0x118391(0x1ac)]()[_0x118391(0x1aa)](_0x118391(0x19c))[_0x118391(0x1ac)]()[_0x118391(0x1a2)](a194_0x2c7d5d)[_0x118391(0x1aa)](_0x118391(0x19c));});a194_0x2c7d5d();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1a5e8c){const _0x19b84b=a194_0x51e9;return _0x1a5e8c&&_0x1a5e8c[_0x19b84b(0x191)]?_0x1a5e8c:{'default':_0x1a5e8c};};function a194_0x51e9(_0xdde846,_0x38885d){const _0x522955=a194_0x3c9c();return a194_0x51e9=function(_0x2c7d5d,_0x202779){_0x2c7d5d=_0x2c7d5d-0x173;let _0x3c9caa=_0x522955[_0x2c7d5d];return _0x3c9caa;},a194_0x51e9(_0xdde846,_0x38885d);}Object[a194_0x333215(0x19e)](exports,a194_0x333215(0x191),{'value':!![]}),exports[a194_0x333215(0x178)]=void 0x0;const core_1=require(a194_0x333215(0x184)),typedi_1=__importDefault(require(a194_0x333215(0x196))),constants_1=require(a194_0x333215(0x1a3)),utils_1=require(a194_0x333215(0x1b4)),salesforce_error_1=require(a194_0x333215(0x179)),composite_utils_1=require(a194_0x333215(0x1b1)),salesforce_components_manager_service_1=require(a194_0x333215(0x17f)),salesforce_composite_service_1=require(a194_0x333215(0x176));class SalesforceCommitsManager{constructor(_0x5dec22){const _0x17e3d9=a194_0x333215;this[_0x17e3d9(0x1a7)]=_0x5dec22,this['COMPONENTS_PER_CHUNK']=0x3,this[_0x17e3d9(0x175)]=new core_1[(_0x17e3d9(0x1b9))](SalesforceCommitsManager[_0x17e3d9(0x1ae)]),this[_0x17e3d9(0x173)]=this[_0x17e3d9(0x1a7)][_0x17e3d9(0x175)],this[_0x17e3d9(0x189)]=typedi_1[_0x17e3d9(0x1a1)]['get'](salesforce_composite_service_1[_0x17e3d9(0x17a)]),this['proceededComponentsMeta']=[];}async['proceedRequests'](_0x1cf3d1,_0xa08b42=![]){const _0x178b52=a194_0x333215,_0xe34ce0=(this[_0x178b52(0x19f)]+ +_0xa08b42)*0x3,_0x297b5b=(0x0,utils_1[_0x178b52(0x1a0)])(_0x1cf3d1,_0xe34ce0);try{while(_0x297b5b['length']){const _0x38e6a5=_0x297b5b[_0x178b52(0x183)](0x0,Math[_0x178b52(0x1ad)](constants_1[_0x178b52(0x1a5)]/_0xe34ce0));await this[_0x178b52(0x175)][_0x178b52(0x1a8)](_0x178b52(0x195)+_0x38e6a5[_0x178b52(0x1b5)]*_0xe34ce0+_0x178b52(0x17b));const _0xe1adca=_0x38e6a5[_0x178b52(0x198)]((_0x20d7b7,_0x2f9ae2)=>({'graphId':_0x178b52(0x18b)+_0x2f9ae2,'compositeRequest':_0x20d7b7})),_0xd3af08=await this[_0x178b52(0x189)][_0x178b52(0x1b7)](_0xe1adca);if(_0xa08b42){const _0x32416c=(0x0,composite_utils_1[_0x178b52(0x194)])(_0xd3af08);for(const {id:_0x2ec6e3,ref:_0x4cd4b5}of _0x32416c){const _0x3db652=this[_0x178b52(0x18c)]['find'](_0x28cf2d=>_0x28cf2d[_0x178b52(0x190)]===_0x4cd4b5);_0x3db652&&(_0x3db652[_0x178b52(0x1b2)]=_0x2ec6e3);}}}}catch(_0x22bb76){this[_0x178b52(0x175)][_0x178b52(0x174)](_0x22bb76 instanceof salesforce_error_1['SalesforceError']?JSON[_0x178b52(0x1ba)](_0x22bb76[_0x178b52(0x185)](),null,0x2):_0x22bb76),this[_0x178b52(0x173)][_0x178b52(0x1a8)](_0x22bb76 instanceof salesforce_error_1[_0x178b52(0x18f)]?JSON[_0x178b52(0x1ba)](_0x22bb76[_0x178b52(0x185)](),null,0x2):_0x22bb76['toString']());throw _0x22bb76;}}async['proceedCommitsToRepository'](_0x23634b){const _0x3a85ec=a194_0x333215;for(const _0x5a63a9 of _0x23634b){if(!_0x5a63a9['inserted'][_0x3a85ec(0x1b5)]&&!_0x5a63a9[_0x3a85ec(0x1bc)][_0x3a85ec(0x1b5)]&&!_0x5a63a9[_0x3a85ec(0x19a)][_0x3a85ec(0x1b5)])continue;const _0x3bc1d6=[],_0x224923=[],_0x5c111a=new salesforce_components_manager_service_1['SalesforceComponentsManager'](this[_0x3a85ec(0x1a7)][_0x3a85ec(0x19d)],this[_0x3a85ec(0x1a7)][_0x3a85ec(0x1b6)],_0x5a63a9[_0x3a85ec(0x18d)],this['options'][_0x3a85ec(0x197)],this[_0x3a85ec(0x18c)]);_0x3bc1d6[_0x3a85ec(0x180)](...await _0x5c111a[_0x3a85ec(0x1bd)](_0x5a63a9[_0x3a85ec(0x193)],this[_0x3a85ec(0x1a7)]['commitId'])),_0x3bc1d6['push'](...await _0x5c111a[_0x3a85ec(0x18a)](_0x5a63a9[_0x3a85ec(0x1bc)],this['options']['commitId'])),_0x224923['push'](await _0x5c111a['delete'](_0x5a63a9['removed'],!![])),this['proceededComponentsMeta']=_0x5c111a[_0x3a85ec(0x192)](),await this['proceedRequests'](_0x3bc1d6,!![]);for(const _0x5aac1c of _0x224923){_0x5aac1c[_0x3a85ec(0x186)][_0x3a85ec(0x1b5)]&&await this[_0x3a85ec(0x1be)](_0x5aac1c['manifests'],!![]),_0x5aac1c[_0x3a85ec(0x182)][_0x3a85ec(0x1b5)]&&await this[_0x3a85ec(0x1be)](_0x5aac1c[_0x3a85ec(0x182)],!![]),_0x5aac1c[_0x3a85ec(0x19b)]['length']&&await this[_0x3a85ec(0x1be)](_0x5aac1c[_0x3a85ec(0x19b)],!![]);}this[_0x3a85ec(0x175)][_0x3a85ec(0x1a8)](_0x3a85ec(0x17e),_0x3bc1d6[_0x3a85ec(0x1b5)]);}}async[a194_0x333215(0x1af)](_0x237997){const _0x26bc66=a194_0x333215,_0x120d0d=[],_0x2fe831=[];for(const _0x58a573 of _0x237997){if(!_0x58a573[_0x26bc66(0x193)][_0x26bc66(0x1b5)]&&!_0x58a573['modified']['length']&&!_0x58a573['removed'][_0x26bc66(0x1b5)])continue;const _0x731535=new salesforce_components_manager_service_1[(_0x26bc66(0x1ab))](this[_0x26bc66(0x1a7)][_0x26bc66(0x19d)],this['options'][_0x26bc66(0x1b6)],_0x58a573[_0x26bc66(0x18d)],this[_0x26bc66(0x1a7)][_0x26bc66(0x197)],[]);_0x120d0d[_0x26bc66(0x180)](...await _0x731535['insert'](_0x58a573['inserted'])),_0x120d0d[_0x26bc66(0x180)](...await _0x731535[_0x26bc66(0x18a)](_0x58a573[_0x26bc66(0x1bc)])),_0x2fe831[_0x26bc66(0x180)](await _0x731535[_0x26bc66(0x17c)](_0x58a573['removed']));}this[_0x26bc66(0x175)]['log'](_0x26bc66(0x1a6),_0x120d0d[_0x26bc66(0x1b5)]),await this[_0x26bc66(0x1be)](_0x120d0d);const _0xa5b939=_0x2fe831['reduce']((_0x17cc34,_0x2527c4)=>({'manifests':[..._0x17cc34['manifests'],..._0x2527c4['manifests']],'componentsToDelete':[..._0x17cc34[_0x26bc66(0x19b)],..._0x2527c4[_0x26bc66(0x19b)]],'componentsToUpdate':[..._0x17cc34[_0x26bc66(0x182)],..._0x2527c4[_0x26bc66(0x182)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0xa5b939['manifests']['length']&&await this['proceedRequests'](_0xa5b939[_0x26bc66(0x186)],!![]),_0xa5b939[_0x26bc66(0x182)]['length']&&await this[_0x26bc66(0x1be)](_0xa5b939['componentsToUpdate'],!![]),_0xa5b939[_0x26bc66(0x19b)][_0x26bc66(0x1b5)]&&await this[_0x26bc66(0x1be)](_0xa5b939[_0x26bc66(0x19b)],!![]);}async[a194_0x333215(0x1a9)](_0x1be51d){const _0x29d264=a194_0x333215;this[_0x29d264(0x1a7)][_0x29d264(0x1b6)]?await this[_0x29d264(0x1af)](_0x1be51d):await this['proceedCommitsToRepository'](_0x1be51d);}}exports['SalesforceCommitsManager']=SalesforceCommitsManager;