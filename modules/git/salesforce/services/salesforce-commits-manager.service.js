function a233_0x3bd1(_0x1e8dc4,_0x1a0bb8){const _0x4cd018=a233_0x2e81();return a233_0x3bd1=function(_0x53bbe9,_0x2e53b6){_0x53bbe9=_0x53bbe9-0x1eb;let _0x2e815a=_0x4cd018[_0x53bbe9];return _0x2e815a;},a233_0x3bd1(_0x1e8dc4,_0x1a0bb8);}const a233_0x6127c3=a233_0x3bd1;(function(_0x4cb0ad,_0x4b718b){const _0x7ef9b6=a233_0x3bd1,_0x564e44=_0x4cb0ad();while(!![]){try{const _0x7e0c07=-parseInt(_0x7ef9b6(0x231))/0x1*(-parseInt(_0x7ef9b6(0x21c))/0x2)+parseInt(_0x7ef9b6(0x1ee))/0x3*(-parseInt(_0x7ef9b6(0x21f))/0x4)+parseInt(_0x7ef9b6(0x1f8))/0x5*(parseInt(_0x7ef9b6(0x213))/0x6)+parseInt(_0x7ef9b6(0x1ed))/0x7+-parseInt(_0x7ef9b6(0x221))/0x8+-parseInt(_0x7ef9b6(0x21d))/0x9+parseInt(_0x7ef9b6(0x22c))/0xa;if(_0x7e0c07===_0x4b718b)break;else _0x564e44['push'](_0x564e44['shift']());}catch(_0x3a49b1){_0x564e44['push'](_0x564e44['shift']());}}}(a233_0x2e81,0xa71b6));const a233_0x2e53b6=(function(){let _0x381a3e=!![];return function(_0x45142b,_0x52028f){const _0x4e83ec=_0x381a3e?function(){const _0x1f642a=a233_0x3bd1;if(_0x52028f){const _0x1ac26d=_0x52028f[_0x1f642a(0x233)](_0x45142b,arguments);return _0x52028f=null,_0x1ac26d;}}:function(){};return _0x381a3e=![],_0x4e83ec;};}()),a233_0x53bbe9=a233_0x2e53b6(this,function(){const _0x182ce6=a233_0x3bd1;return a233_0x53bbe9[_0x182ce6(0x1ec)]()[_0x182ce6(0x22f)](_0x182ce6(0x202))[_0x182ce6(0x1ec)]()[_0x182ce6(0x220)](a233_0x53bbe9)[_0x182ce6(0x22f)](_0x182ce6(0x202));});a233_0x53bbe9();'use strict';function a233_0x2e81(){const _0x1f1c0b=['proceedChunksToUpload','4010705BFRYhP','inserted','__importDefault','../../../../core','log','Sending\x20','find','branchId','__esModule','map','(((.+)+)+)+$','../../../../constants','update','length','removed','Logger','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)','default','./salesforce-composite.service','have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)','componentsToUpdate','floor','graph','recordTypes','logger','reference','commitId','6mOsOLU','SalesforceError','insert','\x20requests\x20to\x20composite\x20api.','toJSON','executeGraphs','get','splice','author','2052662KsmwsX','5352273MpoCuv','name','12972xefvNY','constructor','8347320yzlBra','extractComponentIdsFromGraphsResponse','COMPONENTS_PER_CHUNK','delete','componentId','proceedCommitsToBranch','proceededComponentsMeta','error','reduce','proceedCommitsToRepository','Cannot\x20upload\x20components\x20due\x20to\x20size\x20-\x20MAX_SIZE\x20=\x20','18100370zuSCZV','manifests','../errors/salesforce.error','search','SALESFORCE_MAX_REQUEST_SIZE_BYTES','1aEIkLw','./salesforce-components-manager.service','apply','options','SalesforceCommitsManager','typedi','proceedCommits','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','stringify','SalesforceCompositeService','toString','118622qiETql','1233MntEcs','proceedRequests','repositoryId','getProceededComponentsMeta','componentsToDelete','composite','modified','sfLogger','push'];a233_0x2e81=function(){return _0x1f1c0b;};return a233_0x2e81();}var __importDefault=this&&this[a233_0x6127c3(0x1fa)]||function(_0x3cda86){const _0x1c663f=a233_0x6127c3;return _0x3cda86&&_0x3cda86[_0x1c663f(0x200)]?_0x3cda86:{'default':_0x3cda86};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a233_0x6127c3(0x235)]=void 0x0;const core_1=require(a233_0x6127c3(0x1fb)),typedi_1=__importDefault(require(a233_0x6127c3(0x236))),constants_1=require(a233_0x6127c3(0x203)),utils_1=require('../../../shared/utils'),salesforce_error_1=require(a233_0x6127c3(0x22e)),composite_utils_1=require('../utils/composite.utils'),salesforce_components_manager_service_1=require(a233_0x6127c3(0x232)),salesforce_composite_service_1=require(a233_0x6127c3(0x20a));class SalesforceCommitsManager{constructor(_0x739044){const _0x2af3ee=a233_0x6127c3;this['options']=_0x739044,this[_0x2af3ee(0x223)]=0x3,this[_0x2af3ee(0x210)]=new core_1[(_0x2af3ee(0x207))](SalesforceCommitsManager[_0x2af3ee(0x21e)]),this[_0x2af3ee(0x1f5)]=this[_0x2af3ee(0x234)]['logger'],this[_0x2af3ee(0x1f3)]=typedi_1[_0x2af3ee(0x209)][_0x2af3ee(0x219)](salesforce_composite_service_1[_0x2af3ee(0x1eb)]),this['proceededComponentsMeta']=[];}async[a233_0x6127c3(0x1f7)](_0x347e0a,_0x4fcc9b=![]){const _0x32d29e=a233_0x6127c3,_0x21b966=async _0x4aa458=>{const _0x22e02c=a233_0x3bd1;await this['logger'][_0x22e02c(0x1fc)](_0x22e02c(0x1fd)+_0x4aa458[_0x22e02c(0x229)]((_0x2814ce,_0x47a3e5)=>_0x2814ce+_0x47a3e5[_0x22e02c(0x205)],0x0)+_0x22e02c(0x216));const _0x5b0e81=_0x4aa458[_0x22e02c(0x201)]((_0x5d6d8e,_0x53bfc3)=>({'graphId':_0x22e02c(0x20e)+_0x53bfc3,'compositeRequest':_0x5d6d8e})),_0x57d3e8=await this[_0x22e02c(0x1f3)][_0x22e02c(0x218)](_0x5b0e81);if(_0x4fcc9b){const _0x404f58=(0x0,composite_utils_1[_0x22e02c(0x222)])(_0x57d3e8);for(const {id:_0xd3962b,ref:_0x329368}of _0x404f58){const _0x5bf69d=this['proceededComponentsMeta'][_0x22e02c(0x1fe)](_0x535be2=>_0x535be2[_0x22e02c(0x211)]===_0x329368);_0x5bf69d&&(_0x5bf69d[_0x22e02c(0x225)]=_0xd3962b);}}},_0x3a4adc=0x1e8480;let _0x316eb9=0x0,_0x19b51d=[];for(const _0x2ba745 of _0x347e0a){const _0x3c8268=_0x2ba745['reduce']((_0x70c991,_0x227f0b)=>{const _0x4d9ff9=a233_0x3bd1,_0x3ddeb8=JSON[_0x4d9ff9(0x239)](_0x227f0b)[_0x4d9ff9(0x205)]*0x2;return _0x70c991+_0x3ddeb8;},0x0);if(_0x3c8268>constants_1['SALESFORCE_MAX_REQUEST_SIZE_BYTES'])throw new salesforce_error_1[(_0x32d29e(0x214))](_0x32d29e(0x22b)+constants_1[_0x32d29e(0x230)]+'\x20COMPONENTS_SIZE\x20=\x20'+_0x3c8268);_0x316eb9+_0x3c8268>constants_1[_0x32d29e(0x230)]-_0x3a4adc&&(await _0x21b966(_0x19b51d),_0x19b51d=[],_0x316eb9=0x0),_0x316eb9+=_0x3c8268,_0x19b51d[_0x32d29e(0x1f6)](_0x2ba745);}_0x19b51d[_0x32d29e(0x205)]&&await _0x21b966(_0x19b51d);}async[a233_0x6127c3(0x1ef)](_0x5ea90d,_0x3c9c69=![]){const _0x189fa2=a233_0x6127c3,_0x175fe8=(this[_0x189fa2(0x223)]+ +_0x3c9c69)*0x3,_0xf58d06=(0x0,utils_1['chunkArray'])(_0x5ea90d,_0x175fe8);try{while(_0xf58d06[_0x189fa2(0x205)]){const _0xfc7579=_0xf58d06[_0x189fa2(0x21a)](0x0,Math[_0x189fa2(0x20d)](constants_1[_0x189fa2(0x238)]/_0x175fe8));await this[_0x189fa2(0x1f7)](_0xfc7579,_0x3c9c69);}}catch(_0x5913b9){this[_0x189fa2(0x210)][_0x189fa2(0x228)](_0x5913b9 instanceof salesforce_error_1[_0x189fa2(0x214)]?JSON['stringify'](_0x5913b9[_0x189fa2(0x217)](),null,0x2):_0x5913b9),this[_0x189fa2(0x1f5)][_0x189fa2(0x1fc)](_0x5913b9 instanceof salesforce_error_1[_0x189fa2(0x214)]?JSON[_0x189fa2(0x239)](_0x5913b9[_0x189fa2(0x217)](),null,0x2):_0x5913b9['toString']());throw _0x5913b9;}}async[a233_0x6127c3(0x22a)](_0x53ef61){const _0x5cae40=a233_0x6127c3;for(const _0x27e16f of _0x53ef61){if(!_0x27e16f[_0x5cae40(0x1f9)][_0x5cae40(0x205)]&&!_0x27e16f[_0x5cae40(0x1f4)]['length']&&!_0x27e16f[_0x5cae40(0x206)]['length'])continue;const _0x4c4429=[],_0x18afcd=[],_0x5f5841=new salesforce_components_manager_service_1['SalesforceComponentsManager'](this[_0x5cae40(0x234)]['repositoryId'],this[_0x5cae40(0x234)][_0x5cae40(0x1ff)],_0x27e16f[_0x5cae40(0x21b)],this[_0x5cae40(0x234)][_0x5cae40(0x20f)],this[_0x5cae40(0x227)]);_0x4c4429[_0x5cae40(0x1f6)](...await _0x5f5841[_0x5cae40(0x215)](_0x27e16f['inserted'],this[_0x5cae40(0x234)][_0x5cae40(0x212)])),_0x4c4429[_0x5cae40(0x1f6)](...await _0x5f5841[_0x5cae40(0x204)](_0x27e16f[_0x5cae40(0x1f4)],this['options']['commitId'])),_0x18afcd[_0x5cae40(0x1f6)](await _0x5f5841[_0x5cae40(0x224)](_0x27e16f[_0x5cae40(0x206)],!![])),this['proceededComponentsMeta']=_0x5f5841[_0x5cae40(0x1f1)](),await this[_0x5cae40(0x1ef)](_0x4c4429,!![]);for(const _0x1759c3 of _0x18afcd){_0x1759c3['manifests'][_0x5cae40(0x205)]&&await this[_0x5cae40(0x1ef)](_0x1759c3['manifests'],!![]),_0x1759c3[_0x5cae40(0x20c)]['length']&&await this[_0x5cae40(0x1ef)](_0x1759c3[_0x5cae40(0x20c)],!![]),_0x1759c3[_0x5cae40(0x1f2)][_0x5cae40(0x205)]&&await this[_0x5cae40(0x1ef)](_0x1759c3[_0x5cae40(0x1f2)],!![]);}this[_0x5cae40(0x210)][_0x5cae40(0x1fc)](_0x5cae40(0x208),_0x4c4429[_0x5cae40(0x205)]);}}async[a233_0x6127c3(0x226)](_0xcca54f){const _0x4b0090=a233_0x6127c3,_0x753cfa=[],_0x227b7c=[];for(const _0x23242b of _0xcca54f){if(!_0x23242b[_0x4b0090(0x1f9)]['length']&&!_0x23242b['modified'][_0x4b0090(0x205)]&&!_0x23242b['removed']['length'])continue;const _0x55c15a=new salesforce_components_manager_service_1['SalesforceComponentsManager'](this['options'][_0x4b0090(0x1f0)],this[_0x4b0090(0x234)][_0x4b0090(0x1ff)],_0x23242b[_0x4b0090(0x21b)],this['options'][_0x4b0090(0x20f)],[]);_0x753cfa[_0x4b0090(0x1f6)](...await _0x55c15a['insert'](_0x23242b[_0x4b0090(0x1f9)])),_0x753cfa['push'](...await _0x55c15a[_0x4b0090(0x204)](_0x23242b[_0x4b0090(0x1f4)])),_0x227b7c[_0x4b0090(0x1f6)](await _0x55c15a['delete'](_0x23242b['removed']));}this[_0x4b0090(0x210)][_0x4b0090(0x1fc)](_0x4b0090(0x20b),_0x753cfa[_0x4b0090(0x205)]),await this[_0x4b0090(0x1ef)](_0x753cfa);const _0x488e20=_0x227b7c['reduce']((_0x4a3ebe,_0x39ef89)=>({'manifests':[..._0x4a3ebe['manifests'],..._0x39ef89[_0x4b0090(0x22d)]],'componentsToDelete':[..._0x4a3ebe[_0x4b0090(0x1f2)],..._0x39ef89['componentsToDelete']],'componentsToUpdate':[..._0x4a3ebe[_0x4b0090(0x20c)],..._0x39ef89[_0x4b0090(0x20c)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x488e20['manifests'][_0x4b0090(0x205)]&&await this[_0x4b0090(0x1ef)](_0x488e20[_0x4b0090(0x22d)],!![]),_0x488e20['componentsToUpdate'][_0x4b0090(0x205)]&&await this['proceedRequests'](_0x488e20[_0x4b0090(0x20c)],!![]),_0x488e20[_0x4b0090(0x1f2)][_0x4b0090(0x205)]&&await this[_0x4b0090(0x1ef)](_0x488e20[_0x4b0090(0x1f2)],!![]);}async[a233_0x6127c3(0x237)](_0x472dac){const _0x34e8dc=a233_0x6127c3;this[_0x34e8dc(0x234)][_0x34e8dc(0x1ff)]?await this[_0x34e8dc(0x226)](_0x472dac):await this[_0x34e8dc(0x22a)](_0x472dac);}}exports[a233_0x6127c3(0x235)]=SalesforceCommitsManager;