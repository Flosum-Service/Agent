function a232_0x1fd4(){const _0xa879ee=['Error','waitAuth','log','joinURL','__importStar','search','error','updateAccessToken','default','../enums/auth-state.enum','services/data/','apply','requestConfig','getOwnPropertyDescriptor','refresh_token','InvalidRefreshTokenError','function','Logger','tokenType','configurable','3059790ZOZlFb','setAuthDetails','1790656YXqnTG','16859312UlJDhI','accessToken','access\x20token\x20updated\x20for\x20%s','Updating','forceUpdateToken','object','typedi','writable','post','decorate','design:paramtypes','172LbyHEx','__setModuleDefault','logger','AuthState','instanceUrl','SalesforceAuthService','axios','create\x20authorized\x20request\x20failed:\x20authorization\x20error','check\x20auth:\x20current\x20state\x20-\x20%s','__esModule','../errors/unauthorized-salesforce.error','Idle','create\x20authorized\x20request\x20failed:\x20authorization\x20is\x20not\x20done','../../../shared/utils','prototype','hasOwnProperty','../../../../constants/errors','getAuthData','UnauthorizedSalesforceError','instance_url','data','get','salesforce','__metadata','/services/oauth2/token','ERR_INVALID_SALESFORCE_TOKEN','metadata','sleep','6331367JhndvR','901504OzSaQc','defineProperty','length','create','orgId','force\x20update\x20token','AUTH_WAIT_TIME','then','access_token','../../../../constants','58659imMsEy','update\x20access\x20token\x20failed:\x20%s','1866170MwaKHO','response','call','(((.+)+)+)+$','__decorate','message','update\x20access\x20token','Active','../../../../core','authState','Tokens'];a232_0x1fd4=function(){return _0xa879ee;};return a232_0x1fd4();}const a232_0x78510d=a232_0x2a85;function a232_0x2a85(_0x5e28eb,_0x2a3692){const _0x5c9a4a=a232_0x1fd4();return a232_0x2a85=function(_0xa406e9,_0x490df5){_0xa406e9=_0xa406e9-0x74;let _0x1fd4c5=_0x5c9a4a[_0xa406e9];return _0x1fd4c5;},a232_0x2a85(_0x5e28eb,_0x2a3692);}(function(_0x203ecc,_0x13ad2a){const _0x36b845=a232_0x2a85,_0x94c225=_0x203ecc();while(!![]){try{const _0x36ada1=-parseInt(_0x36b845(0xbe))/0x1+-parseInt(_0x36b845(0x95))/0x2+parseInt(_0x36b845(0xc8))/0x3*(-parseInt(_0x36b845(0xa1))/0x4)+-parseInt(_0x36b845(0x74))/0x5+parseInt(_0x36b845(0x93))/0x6+parseInt(_0x36b845(0xbd))/0x7+parseInt(_0x36b845(0x96))/0x8;if(_0x36ada1===_0x13ad2a)break;else _0x94c225['push'](_0x94c225['shift']());}catch(_0x2a9e64){_0x94c225['push'](_0x94c225['shift']());}}}(a232_0x1fd4,0x7cc27));const a232_0x490df5=(function(){let _0x3670a1=!![];return function(_0x1312ee,_0x5df023){const _0xcfb2b4=_0x3670a1?function(){const _0x4fd2b4=a232_0x2a85;if(_0x5df023){const _0x29fc31=_0x5df023[_0x4fd2b4(0x8a)](_0x1312ee,arguments);return _0x5df023=null,_0x29fc31;}}:function(){};return _0x3670a1=![],_0xcfb2b4;};}()),a232_0xa406e9=a232_0x490df5(this,function(){const _0x3d0a63=a232_0x2a85;return a232_0xa406e9['toString']()['search'](_0x3d0a63(0x77))['toString']()['constructor'](a232_0xa406e9)[_0x3d0a63(0x84)]('(((.+)+)+)+$');});a232_0xa406e9();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a232_0x78510d(0xc1)]?function(_0x2f0da2,_0x13190c,_0x35e12e,_0x15d029){const _0x37cf64=a232_0x78510d;if(_0x15d029===undefined)_0x15d029=_0x35e12e;var _0x1ed856=Object[_0x37cf64(0x8c)](_0x13190c,_0x35e12e);(!_0x1ed856||('get'in _0x1ed856?!_0x13190c['__esModule']:_0x1ed856[_0x37cf64(0x9d)]||_0x1ed856[_0x37cf64(0x92)]))&&(_0x1ed856={'enumerable':!![],'get':function(){return _0x13190c[_0x35e12e];}}),Object[_0x37cf64(0xbf)](_0x2f0da2,_0x15d029,_0x1ed856);}:function(_0x3d4fec,_0x1f5a2e,_0x1041c6,_0x211862){if(_0x211862===undefined)_0x211862=_0x1041c6;_0x3d4fec[_0x211862]=_0x1f5a2e[_0x1041c6];}),__setModuleDefault=this&&this[a232_0x78510d(0xa2)]||(Object[a232_0x78510d(0xc1)]?function(_0x1be1e6,_0x1a03a6){const _0x127682=a232_0x78510d;Object[_0x127682(0xbf)](_0x1be1e6,_0x127682(0x87),{'enumerable':!![],'value':_0x1a03a6});}:function(_0x17e4c9,_0x21a71a){_0x17e4c9['default']=_0x21a71a;}),__decorate=this&&this[a232_0x78510d(0x78)]||function(_0x129a30,_0xc46d9b,_0x4fad91,_0x55b536){const _0x1ee507=a232_0x78510d;var _0x1f563d=arguments[_0x1ee507(0xc0)],_0x5dd71b=_0x1f563d<0x3?_0xc46d9b:_0x55b536===null?_0x55b536=Object['getOwnPropertyDescriptor'](_0xc46d9b,_0x4fad91):_0x55b536,_0x522d6b;if(typeof Reflect===_0x1ee507(0x9b)&&typeof Reflect['decorate']===_0x1ee507(0x8f))_0x5dd71b=Reflect[_0x1ee507(0x9f)](_0x129a30,_0xc46d9b,_0x4fad91,_0x55b536);else{for(var _0x542a66=_0x129a30[_0x1ee507(0xc0)]-0x1;_0x542a66>=0x0;_0x542a66--)if(_0x522d6b=_0x129a30[_0x542a66])_0x5dd71b=(_0x1f563d<0x3?_0x522d6b(_0x5dd71b):_0x1f563d>0x3?_0x522d6b(_0xc46d9b,_0x4fad91,_0x5dd71b):_0x522d6b(_0xc46d9b,_0x4fad91))||_0x5dd71b;}return _0x1f563d>0x3&&_0x5dd71b&&Object[_0x1ee507(0xbf)](_0xc46d9b,_0x4fad91,_0x5dd71b),_0x5dd71b;},__importStar=this&&this[a232_0x78510d(0x83)]||function(_0x1cc22c){const _0x5c63fe=a232_0x78510d;if(_0x1cc22c&&_0x1cc22c[_0x5c63fe(0xaa)])return _0x1cc22c;var _0x51326c={};if(_0x1cc22c!=null){for(var _0x12339c in _0x1cc22c)if(_0x12339c!==_0x5c63fe(0x87)&&Object[_0x5c63fe(0xaf)][_0x5c63fe(0xb0)][_0x5c63fe(0x76)](_0x1cc22c,_0x12339c))__createBinding(_0x51326c,_0x1cc22c,_0x12339c);}return __setModuleDefault(_0x51326c,_0x1cc22c),_0x51326c;},__metadata=this&&this[a232_0x78510d(0xb8)]||function(_0x20fed3,_0x5c0075){const _0x9cb5f4=a232_0x78510d;if(typeof Reflect===_0x9cb5f4(0x9b)&&typeof Reflect[_0x9cb5f4(0xbb)]===_0x9cb5f4(0x8f))return Reflect[_0x9cb5f4(0xbb)](_0x20fed3,_0x5c0075);},__importDefault=this&&this['__importDefault']||function(_0x29be3a){const _0x39b6bd=a232_0x78510d;return _0x29be3a&&_0x29be3a[_0x39b6bd(0xaa)]?_0x29be3a:{'default':_0x29be3a};},SalesforceAuthService_1;Object[a232_0x78510d(0xbf)](exports,'__esModule',{'value':!![]}),exports[a232_0x78510d(0xa6)]=void 0x0;const typedi_1=__importStar(require(a232_0x78510d(0x9c))),errors_1=require(a232_0x78510d(0xb1)),core_1=require(a232_0x78510d(0x7c)),axios_1=__importDefault(require(a232_0x78510d(0xa7))),utils_1=require(a232_0x78510d(0xae)),invalid_refresh_token_error_1=require('../errors/invalid-refresh-token.error'),auth_state_enum_1=require(a232_0x78510d(0x88)),unauthorized_salesforce_error_1=require(a232_0x78510d(0xab)),constants_1=require(a232_0x78510d(0xc7)),providers_tokens_1=require('../../providers/providers.tokens');let SalesforceAuthService=SalesforceAuthService_1=class SalesforceAuthService{constructor(){const _0x2c31a1=a232_0x78510d;this[_0x2c31a1(0xc4)]=0x1388,this[_0x2c31a1(0x7d)]=auth_state_enum_1['AuthState'][_0x2c31a1(0xac)],this[_0x2c31a1(0xa3)]=new core_1[(_0x2c31a1(0x90))](SalesforceAuthService_1['name']),this[_0x2c31a1(0x94)]();}async[a232_0x78510d(0x94)](){const _0x5005d6=a232_0x78510d;this[_0x5005d6(0xa3)][_0x5005d6(0x81)](_0x5005d6(0xa9),auth_state_enum_1['AuthState'][this[_0x5005d6(0x7d)]]);try{if(this[_0x5005d6(0x7d)]===auth_state_enum_1['AuthState'][_0x5005d6(0x7f)])return;if(this[_0x5005d6(0x7d)]===auth_state_enum_1[_0x5005d6(0xa4)][_0x5005d6(0xac)])await this[_0x5005d6(0x86)]();else{const _0x4e1eeb=await this[_0x5005d6(0x8b)](),_0x307078=await axios_1[_0x5005d6(0x87)][_0x5005d6(0xb6)](_0x5005d6(0x89)+constants_1['SALESFORCE_API_VERSION'],_0x4e1eeb)[_0x5005d6(0xc5)](()=>!![])['catch'](()=>![]);!_0x307078&&await this[_0x5005d6(0x86)]();}}catch(_0x38f088){}}async[a232_0x78510d(0x86)](){const _0x1682d2=a232_0x78510d;var _0x1df74b,_0x4df143,_0x3c5ea1;this[_0x1682d2(0xa3)][_0x1682d2(0x81)](_0x1682d2(0x7a));try{this[_0x1682d2(0x7d)]=auth_state_enum_1[_0x1682d2(0xa4)][_0x1682d2(0x99)];const {refreshToken:_0x3a03c5,clientId:_0x5a96b0,clientSecret:_0x3502b4,loginUrl:_0x317e40}=typedi_1[_0x1682d2(0x87)]['get'](providers_tokens_1[_0x1682d2(0x7e)][_0x1682d2(0xb7)]),{data:_0x5e6227}=await axios_1[_0x1682d2(0x87)][_0x1682d2(0x9e)]((0x0,utils_1[_0x1682d2(0x82)])(_0x317e40,_0x1682d2(0xb9)),null,{'params':{'grant_type':_0x1682d2(0x8d),'refresh_token':_0x3a03c5,'client_id':_0x5a96b0,'client_secret':_0x3502b4}});this['instanceUrl']=_0x5e6227[_0x1682d2(0xb4)],this[_0x1682d2(0x97)]=_0x5e6227[_0x1682d2(0xc6)],this[_0x1682d2(0x91)]=_0x5e6227['token_type'],this[_0x1682d2(0x7d)]=auth_state_enum_1[_0x1682d2(0xa4)][_0x1682d2(0x7b)],this[_0x1682d2(0xa3)]['log'](_0x1682d2(0x98),this[_0x1682d2(0xa5)]);}catch(_0x4a633e){const _0x49f80c=((_0x4df143=(_0x1df74b=_0x4a633e===null||_0x4a633e===void 0x0?void 0x0:_0x4a633e['response'])===null||_0x1df74b===void 0x0?void 0x0:_0x1df74b[_0x1682d2(0xb5)])===null||_0x4df143===void 0x0?void 0x0:_0x4df143[_0x1682d2(0x85)])||((_0x3c5ea1=_0x4a633e===null||_0x4a633e===void 0x0?void 0x0:_0x4a633e[_0x1682d2(0x75)])===null||_0x3c5ea1===void 0x0?void 0x0:_0x3c5ea1[_0x1682d2(0xb5)])||_0x4a633e[_0x1682d2(0x79)];this[_0x1682d2(0xa3)][_0x1682d2(0x85)](_0x1682d2(0xc9),_0x49f80c),this[_0x1682d2(0x7d)]=auth_state_enum_1[_0x1682d2(0xa4)]['Error'];throw new invalid_refresh_token_error_1[(_0x1682d2(0x8e))](errors_1[_0x1682d2(0xba)]);}}async[a232_0x78510d(0x9a)](){const _0x1ad79d=a232_0x78510d;this[_0x1ad79d(0xa3)][_0x1ad79d(0x81)](_0x1ad79d(0xc3));if(this[_0x1ad79d(0x7d)]===auth_state_enum_1[_0x1ad79d(0xa4)][_0x1ad79d(0x99)]||this[_0x1ad79d(0x7d)]===auth_state_enum_1['AuthState']['Idle'])return await(0x0,utils_1[_0x1ad79d(0xbc)])(this[_0x1ad79d(0xc4)]),this[_0x1ad79d(0x9a)]();if(this[_0x1ad79d(0x7d)]===auth_state_enum_1['AuthState']['Error'])throw new invalid_refresh_token_error_1[(_0x1ad79d(0x8e))](errors_1['ERR_INVALID_SALESFORCE_TOKEN']);await this[_0x1ad79d(0x86)]();}async[a232_0x78510d(0x80)](){const _0x30433b=a232_0x78510d;if(this[_0x30433b(0x7d)]===auth_state_enum_1[_0x30433b(0xa4)][_0x30433b(0x7f)]){this['logger'][_0x30433b(0x81)](_0x30433b(0xa8));throw new unauthorized_salesforce_error_1[(_0x30433b(0xb3))]();}if(this['authState']!==auth_state_enum_1[_0x30433b(0xa4)]['Active'])return this[_0x30433b(0xa3)]['log'](_0x30433b(0xad)),await(0x0,utils_1[_0x30433b(0xbc)])(this[_0x30433b(0xc4)]),this[_0x30433b(0x80)]();}[a232_0x78510d(0xb2)](){const _0x1c95b2=a232_0x78510d;return{'orgId':this[_0x1c95b2(0xc2)],'accessToken':this['accessToken'],'instanceUrl':this['instanceUrl']};}async[a232_0x78510d(0x8b)](){const _0x3ee6e1=a232_0x78510d;return await this[_0x3ee6e1(0x80)](),{'baseURL':this[_0x3ee6e1(0xa5)],'headers':{'accept':'application/json','authorization':this[_0x3ee6e1(0x91)]+'\x20'+this[_0x3ee6e1(0x97)]}};}};SalesforceAuthService=SalesforceAuthService_1=__decorate([(0x0,typedi_1['Service'])(),__metadata(a232_0x78510d(0xa0),[])],SalesforceAuthService),exports[a232_0x78510d(0xa6)]=SalesforceAuthService;