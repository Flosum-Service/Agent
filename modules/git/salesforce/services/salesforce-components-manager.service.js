const a273_0x48cbfe=a273_0x163c;(function(_0x5f3bfa,_0x3832c7){const _0x3cd216=a273_0x163c,_0x5d9425=_0x5f3bfa();while(!![]){try{const _0x8069e7=-parseInt(_0x3cd216(0x223))/0x1+parseInt(_0x3cd216(0x221))/0x2*(-parseInt(_0x3cd216(0x201))/0x3)+parseInt(_0x3cd216(0x22a))/0x4+-parseInt(_0x3cd216(0x220))/0x5+parseInt(_0x3cd216(0x1e4))/0x6*(parseInt(_0x3cd216(0x1ec))/0x7)+-parseInt(_0x3cd216(0x217))/0x8+parseInt(_0x3cd216(0x1df))/0x9;if(_0x8069e7===_0x3832c7)break;else _0x5d9425['push'](_0x5d9425['shift']());}catch(_0x3612dd){_0x5d9425['push'](_0x5d9425['shift']());}}}(a273_0x1ff2,0x3676f));const a273_0x2738b9=(function(){let _0x31b1b9=!![];return function(_0x4cf4fd,_0x4aa2e5){const _0x39e9f2=_0x31b1b9?function(){const _0x401cfd=a273_0x163c;if(_0x4aa2e5){const _0x2c7a15=_0x4aa2e5[_0x401cfd(0x1d3)](_0x4cf4fd,arguments);return _0x4aa2e5=null,_0x2c7a15;}}:function(){};return _0x31b1b9=![],_0x39e9f2;};}()),a273_0x539c60=a273_0x2738b9(this,function(){const _0x39c9b5=a273_0x163c;return a273_0x539c60[_0x39c9b5(0x1c4)]()[_0x39c9b5(0x21d)](_0x39c9b5(0x1d1))['toString']()[_0x39c9b5(0x200)](a273_0x539c60)[_0x39c9b5(0x21d)](_0x39c9b5(0x1d1));});a273_0x539c60();function a273_0x163c(_0x5e9934,_0x40b30f){const _0x4d028e=a273_0x1ff2();return a273_0x163c=function(_0x539c60,_0x2738b9){_0x539c60=_0x539c60-0x1c3;let _0x1ff2b1=_0x4d028e[_0x539c60];return _0x1ff2b1;},a273_0x163c(_0x5e9934,_0x40b30f);}'use strict';var __importDefault=this&&this[a273_0x48cbfe(0x212)]||function(_0x3f790c){const _0x2d5e1d=a273_0x48cbfe;return _0x3f790c&&_0x3f790c[_0x2d5e1d(0x208)]?_0x3f790c:{'default':_0x3f790c};};Object[a273_0x48cbfe(0x207)](exports,a273_0x48cbfe(0x208),{'value':!![]}),exports[a273_0x48cbfe(0x224)]=void 0x0;const constants_1=require(a273_0x48cbfe(0x227)),core_1=require(a273_0x48cbfe(0x204)),zip_1=require(a273_0x48cbfe(0x1e5)),typedi_1=__importDefault(require('typedi')),salesforce_error_1=require(a273_0x48cbfe(0x215)),composite_utils_1=require(a273_0x48cbfe(0x1de)),flosum_naming_utils_1=require(a273_0x48cbfe(0x1fb)),salesforce_git_sync_service_1=require(a273_0x48cbfe(0x1d7));class SalesforceComponentsManager{constructor(_0x45a10d,_0x40e037,_0x504ce6,_0xcdf934,_0x4320bd){const _0x5e7539=a273_0x48cbfe;this['repositoryId']=_0x45a10d,this[_0x5e7539(0x1d2)]=_0x40e037,this['username']=_0x504ce6,this[_0x5e7539(0x21e)]=_0xcdf934,this[_0x5e7539(0x1c9)]=_0x4320bd,this[_0x5e7539(0x1f3)]=new core_1['Logger'](SalesforceComponentsManager[_0x5e7539(0x1cb)]),this['gitSync']=typedi_1[_0x5e7539(0x1dc)]['get'](salesforce_git_sync_service_1[_0x5e7539(0x219)]);}[a273_0x48cbfe(0x1f4)](_0x47adec,_0x217247){const _0x56e0be=a273_0x48cbfe,_0x1de8c1=(0x0,flosum_naming_utils_1[_0x56e0be(0x1e8)])(_0x47adec,[_0x56e0be(0x1d0),_0x56e0be(0x1e6),_0x56e0be(0x1d4)]);this['proceededComponentsMeta']['push']({'componentId':'','reference':_0x217247,'version':_0x1de8c1[_0x56e0be(0x1d4)],'componentName':_0x1de8c1[_0x56e0be(0x1e6)],'componentType':_0x1de8c1[_0x56e0be(0x1d0)]});}[a273_0x48cbfe(0x1e2)](_0x680f6d,_0xbd9a83){const _0x5612db=a273_0x48cbfe,{request:_0x3e13f3}=(0x0,composite_utils_1[_0x5612db(0x1c6)])(constants_1['FLOSUM_COMMIT_MANIFEST'],{[constants_1[_0x5612db(0x1da)]+_0x5612db(0x209)]:_0x680f6d,[constants_1['FLOSUM_NAMESPACE']+_0x5612db(0x20c)]:_0xbd9a83});return _0x3e13f3;}async[a273_0x48cbfe(0x202)](_0xc03ede,_0x2781f1){const _0x3783b8=a273_0x48cbfe,_0x103082={},_0x22717f=zip_1['Zip'][_0x3783b8(0x1f2)]();for(const _0x37bd4e of Object[_0x3783b8(0x22c)](_0xc03ede['files'])){_0x22717f[_0x3783b8(0x225)](_0x37bd4e,_0xc03ede[_0x3783b8(0x1f8)][_0x37bd4e],{'createFolders':!![]});}return _0x103082['ContentType']=_0x3783b8(0x1db),_0x103082[_0x3783b8(0x218)]=_0xc03ede[_0x3783b8(0x21c)],_0x103082[_0x3783b8(0x1ef)]=_0xc03ede[_0x3783b8(0x21c)],_0x103082[_0x3783b8(0x1e0)]=_0x2781f1,_0x103082[_0x3783b8(0x1d5)]=await _0x22717f[_0x3783b8(0x1ea)]({'type':'base64','compression':_0x3783b8(0x1d8),'compressionOptions':{'level':0x6}}),_0x103082;}[a273_0x48cbfe(0x1e1)](_0x267da5,_0x1db83b,_0x5128d4){const _0x551b55=a273_0x48cbfe,_0x31ecd0=new Date()[_0x551b55(0x1ee)](),_0x579fb3={};return _0x579fb3[constants_1['FLOSUM_NAMESPACE']+_0x551b55(0x226)]=_0x1db83b,_0x579fb3[constants_1[_0x551b55(0x1da)]+_0x551b55(0x1e7)]=_0x267da5[_0x551b55(0x1e3)],_0x579fb3[constants_1[_0x551b55(0x1da)]+_0x551b55(0x203)]=_0x31ecd0,_0x579fb3[constants_1[_0x551b55(0x1da)]+_0x551b55(0x222)]=this[_0x551b55(0x1cd)],_0x579fb3[constants_1['FLOSUM_NAMESPACE']+_0x551b55(0x1d4)]=_0x5128d4?_0x5128d4+0x1:0x1,_0x579fb3[constants_1[_0x551b55(0x1fe)]+_0x551b55(0x1ff)]=!![],_0x579fb3;}['prepareComponentRecord'](_0x44833b,_0x4bdda3){const _0x56ae93=a273_0x48cbfe;var _0x2cc732,_0x1644f4;const _0x238b6b=new Date()[_0x56ae93(0x1ee)](),_0x2171e1={};return!_0x4bdda3?(this['branchId']?(_0x2171e1[constants_1[_0x56ae93(0x1da)]+_0x56ae93(0x213)]=this[_0x56ae93(0x1d2)],_0x2171e1[constants_1[_0x56ae93(0x1da)]+_0x56ae93(0x1eb)]=_0x56ae93(0x216),_0x2171e1[_0x56ae93(0x211)]=(_0x2cc732=this['recordTypes']['find'](_0x4a6c2e=>_0x4a6c2e['name']===_0x56ae93(0x216)))===null||_0x2cc732===void 0x0?void 0x0:_0x2cc732['id']):(_0x2171e1[constants_1[_0x56ae93(0x1da)]+'Repository__c']=this[_0x56ae93(0x20b)],_0x2171e1[constants_1[_0x56ae93(0x1da)]+'Source__c']=_0x56ae93(0x205),_0x2171e1[_0x56ae93(0x211)]=(_0x1644f4=this[_0x56ae93(0x21e)]['find'](_0x491399=>_0x491399[_0x56ae93(0x1cb)]===_0x56ae93(0x205)))===null||_0x1644f4===void 0x0?void 0x0:_0x1644f4['id']),_0x2171e1[constants_1[_0x56ae93(0x1da)]+_0x56ae93(0x1d4)]=0x1):_0x2171e1[constants_1['FLOSUM_NAMESPACE']+'Version__c']=_0x4bdda3[_0x56ae93(0x21b)]+0x1,_0x2171e1[constants_1[_0x56ae93(0x1da)]+'Component_Type__c']=_0x44833b['type'],_0x2171e1[constants_1[_0x56ae93(0x1da)]+_0x56ae93(0x1e6)]=_0x44833b[_0x56ae93(0x1cb)],_0x2171e1[constants_1[_0x56ae93(0x1da)]+_0x56ae93(0x1cc)]=_0x44833b[_0x56ae93(0x206)],_0x2171e1[constants_1[_0x56ae93(0x1da)]+_0x56ae93(0x1c5)]=this[_0x56ae93(0x1cd)],_0x2171e1[constants_1[_0x56ae93(0x1da)]+_0x56ae93(0x1ed)]=this[_0x56ae93(0x1cd)],_0x2171e1[constants_1[_0x56ae93(0x1da)]+_0x56ae93(0x1fa)]=_0x238b6b,_0x2171e1[constants_1[_0x56ae93(0x1da)]+'Committed_On__c']=_0x238b6b,_0x2171e1[constants_1['FLOSUM_NAMESPACE']+_0x56ae93(0x1e7)]=_0x44833b[_0x56ae93(0x1e3)],_0x2171e1[constants_1[_0x56ae93(0x1da)]+_0x56ae93(0x1fd)]=_0x44833b['vlocityComponentName'],_0x2171e1[constants_1[_0x56ae93(0x1da)]+_0x56ae93(0x20e)]=_0x44833b[_0x56ae93(0x1dd)],_0x2171e1[constants_1['FLOSUM_NAMESPACE']+_0x56ae93(0x1c8)]=_0x44833b['marketingCloudKey'],_0x2171e1;}[a273_0x48cbfe(0x1f7)](){const _0x2f3a02=a273_0x48cbfe;return this[_0x2f3a02(0x1c9)];}async[a273_0x48cbfe(0x1fc)](_0x89b45f,_0x45bad6){const _0x48520e=a273_0x48cbfe,_0x22479b=[];for(const _0x991bd5 of _0x89b45f){const _0x3706d3=(0x0,composite_utils_1[_0x48520e(0x1c6)])(constants_1[_0x48520e(0x20f)],this['prepareComponentRecord'](_0x991bd5)),_0xedf039=(0x0,composite_utils_1[_0x48520e(0x1c6)])(constants_1[_0x48520e(0x20a)],this[_0x48520e(0x1e1)](_0x991bd5,'@{'+_0x3706d3[_0x48520e(0x1cf)]+_0x48520e(0x21a))),_0x507f9f=(0x0,composite_utils_1[_0x48520e(0x1c6)])(constants_1['FLOSUM_ATTACHMENT'],await this[_0x48520e(0x202)](_0x991bd5,'@{'+_0xedf039[_0x48520e(0x1cf)]+_0x48520e(0x21a)));this['proceedComponentMeta'](_0x3706d3[_0x48520e(0x1f5)][_0x48520e(0x21f)],_0x3706d3[_0x48520e(0x1cf)]),_0x22479b[_0x48520e(0x1f9)](_0x3706d3[_0x48520e(0x1f5)],_0xedf039['request'],_0x507f9f[_0x48520e(0x1f5)]),_0x45bad6&&_0x22479b[_0x48520e(0x1f9)](this['prepareCommitManifest'](_0x45bad6,'@{'+_0xedf039[_0x48520e(0x1cf)]+'.id}'));}return _0x22479b;}async[a273_0x48cbfe(0x210)](_0x182dc6,_0x276832=''){const _0x14cfaa=a273_0x48cbfe,_0x2f6408=[];for(const {component:_0x2ad99f,meta:_0x15b4c6}of _0x182dc6){if(!_0x15b4c6['id']){const _0x4a4cbd=this[_0x14cfaa(0x1c9)][_0x14cfaa(0x1f0)](_0x59bc95=>_0x59bc95[_0x14cfaa(0x1ca)]===_0x2ad99f[_0x14cfaa(0x1cb)]&&_0x59bc95[_0x14cfaa(0x1ce)]===_0x2ad99f[_0x14cfaa(0x21c)]);if(!_0x4a4cbd)throw new salesforce_error_1[(_0x14cfaa(0x1d9))](new Error(_0x14cfaa(0x1c7)+_0x2ad99f[_0x14cfaa(0x1cb)]+'\x20['+_0x2ad99f[_0x14cfaa(0x21c)]+_0x14cfaa(0x22b)));_0x15b4c6['id']=_0x4a4cbd['componentId'];}const _0x11c074=(0x0,composite_utils_1['createPatchRequest'])(constants_1[_0x14cfaa(0x20f)],_0x15b4c6['id'],this[_0x14cfaa(0x20d)](_0x2ad99f,_0x15b4c6)),_0x2aae8e=(0x0,composite_utils_1['createPostRequest'])(constants_1[_0x14cfaa(0x20a)],this[_0x14cfaa(0x1e1)](_0x2ad99f,_0x15b4c6['id'],_0x15b4c6[_0x14cfaa(0x21b)])),_0x6c626c=(0x0,composite_utils_1[_0x14cfaa(0x1c6)])(constants_1['FLOSUM_ATTACHMENT'],await this['prepareComponentAttachmentRecord'](_0x2ad99f,'@{'+_0x2aae8e[_0x14cfaa(0x1cf)]+_0x14cfaa(0x21a)));this[_0x14cfaa(0x1f4)](_0x11c074[_0x14cfaa(0x1f5)]['body'],_0x11c074[_0x14cfaa(0x1cf)]),_0x2f6408[_0x14cfaa(0x1f9)](_0x11c074[_0x14cfaa(0x1f5)],_0x2aae8e['request'],_0x6c626c['request']),_0x276832&&_0x2f6408['push'](this[_0x14cfaa(0x1e2)](_0x276832,'@{'+_0x2aae8e[_0x14cfaa(0x1cf)]+_0x14cfaa(0x21a)));}return _0x2f6408;}async['delete'](_0x59082d,_0x2ce7f4=![]){const _0x307d32=a273_0x48cbfe,_0x2c91a4={'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]},_0x54946e=[];for(const _0x55a2d4 of _0x59082d){if(_0x55a2d4['id'])_0x54946e[_0x307d32(0x1f9)](_0x55a2d4['id']);else{const _0x3da9f5=this[_0x307d32(0x1c9)][_0x307d32(0x1f0)](_0xc141ab=>_0xc141ab[_0x307d32(0x1ca)]===_0x55a2d4[_0x307d32(0x1cb)]&&_0xc141ab['componentType']===_0x55a2d4['type']);if(!_0x3da9f5||!_0x3da9f5[_0x307d32(0x1d6)])continue;_0x54946e[_0x307d32(0x1f9)](_0x3da9f5[_0x307d32(0x1d6)]);}}if(_0x2ce7f4){const _0x548115=await this['gitSync'][_0x307d32(0x228)](_0x54946e);_0x2c91a4['manifests']=_0x548115[_0x307d32(0x229)](_0x4fef85=>(0x0,composite_utils_1[_0x307d32(0x1f6)])(constants_1[_0x307d32(0x1c3)],_0x4fef85)[_0x307d32(0x1f5)]);}return _0x2c91a4[_0x307d32(0x1f1)]=_0x54946e[_0x307d32(0x229)](_0x3af861=>(0x0,composite_utils_1['createPatchRequest'])(constants_1['FLOSUM_COMPONENT'],_0x3af861,{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x307d32(0x1e9)]:!![]})[_0x307d32(0x1f5)]),_0x2c91a4[_0x307d32(0x214)]=_0x54946e[_0x307d32(0x229)](_0x54cbf8=>(0x0,composite_utils_1[_0x307d32(0x1f6)])(constants_1[_0x307d32(0x20f)],_0x54cbf8)[_0x307d32(0x1f5)]),_0x2c91a4;}}exports[a273_0x48cbfe(0x224)]=SalesforceComponentsManager;function a273_0x1ff2(){const _0x466229=['createPostRequest','Could\x20not\x20proceed\x20component\x20','MC_Key__c','proceededComponentsMeta','componentName','name','File_Name__c','username','componentType','reference','Component_Type__c','(((.+)+)+)+$','branchId','apply','Version__c','Body','componentId','./salesforce-git-sync.service','DEFLATE','SalesforceError','FLOSUM_NAMESPACE','application/zip','default','isVlocityComponent','../utils/composite.utils','7266366EzNJTR','ParentId','prepareComponentHistoryRecord','prepareCommitManifest','crc','35886rgPOxU','../../parsers/utils/zip','Component_Name__c','CRC32__c','extractFieldsFromRecord','Deletion_By_Agent__c','generateAsync','Source__c','259KwvNuT','Last_Modified_By__c','toISOString','Description','find','componentsToUpdate','createZip','logger','proceedComponentMeta','request','createDeleteRequest','getProceededComponentsMeta','files','push','Last_Modified_Date__c','../utils/flosum-naming.utils','insert','Vlocity_Component_Name__c','FLOSUM_GIT_NAMESPACE','Is_From_Agent__c','constructor','391893qYmOrO','prepareComponentAttachmentRecord','Changed_On__c','../../../../core','Repository','filePath','defineProperty','__esModule','Commit__c','FLOSUM_COMPONENT_HISTORY','repositoryId','Component_History__c','prepareComponentRecord','Vlocity_Component__c','FLOSUM_COMPONENT','update','RecordTypeId','__importDefault','Branch__c','componentsToDelete','../errors/salesforce.error','Branch','2558016xubKfI','Name','SalesforceGitSyncService','.id}','version','type','search','recordTypes','body','314360qLsHue','6LBZzdt','Changed_By__c','147929SehYfB','SalesforceComponentsManager','file','Component__c','../../../../constants','fetchCommitManifestsByComponentIds','map','467448WOUIrH',']\x20-\x20meta\x20not\x20found','keys','FLOSUM_COMMIT_MANIFEST','toString','Last_Updated_By__c'];a273_0x1ff2=function(){return _0x466229;};return a273_0x1ff2();}