const a234_0x49eebb=a234_0x5c5e;function a234_0x3426(){const _0xf8e368=['insert','componentName','./salesforce-git-sync.service','createPatchRequest','FLOSUM_GIT_NAMESPACE','4FLCnrt','../utils/composite.utils','FLOSUM_NAMESPACE','extractFieldsFromRecord','Component_Name__c','(((.+)+)+)+$','typedi','Could\x20not\x20proceed\x20component\x20','file','Repository__c','Repository','FLOSUM_COMPONENT_HISTORY','SalesforceComponentsManager','475ZwAwrI','3711191IZKOKE','Component_Type__c','Description','15360jFvCqG','manifests','.id}','componentsToDelete','File_Name__c','files','__importDefault','proceedComponentMeta','toISOString','Branch','default','prepareCommitManifest','branchId','Changed_On__c','componentType','map','CRC32__c','../../parsers/utils/zip','SalesforceError','username','componentId','319895KCDvWV','generateAsync','defineProperty','filePath','ContentType','createPostRequest','update','logger','../../../../core','Last_Updated_By__c','push','name','Last_Modified_By__c','ParentId','application/zip','Vlocity_Component_Name__c','Deletion_By_Agent__c','Name','Is_From_Agent__c','proceededComponentsMeta','isVlocityComponent','gitSync','../errors/salesforce.error','vlocityComponentName','Last_Modified_Date__c','95669FIxHVe','Logger','FLOSUM_COMMIT_MANIFEST','get','2leuSUQ','recordTypes','Version__c','RecordTypeId','FLOSUM_COMPONENT','crc',']\x20-\x20meta\x20not\x20found','Branch__c','Body','SalesforceGitSyncService','constructor','base64','../../../../constants','176JlgHYa','componentsToUpdate','Component_History__c','toString','request','Commit__c','prepareComponentHistoryRecord','3620010rSFAsm','search','type','Source__c','FLOSUM_ATTACHMENT','Changed_By__c','repositoryId','prepareComponentAttachmentRecord','version','reference','delete','913854mQLDtJ','Committed_On__c','find','body','__esModule','4485690ChedUo','prepareComponentRecord','createZip'];a234_0x3426=function(){return _0xf8e368;};return a234_0x3426();}(function(_0x229bbb,_0x4337a7){const _0x2500a0=a234_0x5c5e,_0x433a8a=_0x229bbb();while(!![]){try{const _0x4a90bf=-parseInt(_0x2500a0(0x11b))/0x1*(-parseInt(_0x2500a0(0xc9))/0x2)+parseInt(_0x2500a0(0xe8))/0x3*(-parseInt(_0x2500a0(0xf5))/0x4)+parseInt(_0x2500a0(0x102))/0x5*(-parseInt(_0x2500a0(0x106))/0x6)+parseInt(_0x2500a0(0xc5))/0x7*(parseInt(_0x2500a0(0xd6))/0x8)+-parseInt(_0x2500a0(0xed))/0x9+parseInt(_0x2500a0(0xdd))/0xa+parseInt(_0x2500a0(0x103))/0xb;if(_0x4a90bf===_0x4337a7)break;else _0x433a8a['push'](_0x433a8a['shift']());}catch(_0x4f1a07){_0x433a8a['push'](_0x433a8a['shift']());}}}(a234_0x3426,0x42d3b));const a234_0x7e5c23=(function(){let _0x298593=!![];return function(_0x1fffd3,_0x31ddad){const _0x481cde=_0x298593?function(){if(_0x31ddad){const _0x364214=_0x31ddad['apply'](_0x1fffd3,arguments);return _0x31ddad=null,_0x364214;}}:function(){};return _0x298593=![],_0x481cde;};}()),a234_0x4710e1=a234_0x7e5c23(this,function(){const _0x5c6b87=a234_0x5c5e;return a234_0x4710e1[_0x5c6b87(0xd9)]()[_0x5c6b87(0xde)](_0x5c6b87(0xfa))[_0x5c6b87(0xd9)]()[_0x5c6b87(0xd3)](a234_0x4710e1)[_0x5c6b87(0xde)](_0x5c6b87(0xfa));});a234_0x4710e1();function a234_0x5c5e(_0x2dfc9b,_0x5a5eb8){const _0x4c3526=a234_0x3426();return a234_0x5c5e=function(_0x4710e1,_0x7e5c23){_0x4710e1=_0x4710e1-0xb5;let _0x3426c0=_0x4c3526[_0x4710e1];return _0x3426c0;},a234_0x5c5e(_0x2dfc9b,_0x5a5eb8);}'use strict';var __importDefault=this&&this[a234_0x49eebb(0x10c)]||function(_0x5989d9){const _0x5b7f4f=a234_0x49eebb;return _0x5989d9&&_0x5989d9[_0x5b7f4f(0xec)]?_0x5989d9:{'default':_0x5989d9};};Object[a234_0x49eebb(0x11d)](exports,a234_0x49eebb(0xec),{'value':!![]}),exports[a234_0x49eebb(0x101)]=void 0x0;const constants_1=require(a234_0x49eebb(0xd5)),core_1=require(a234_0x49eebb(0x123)),zip_1=require(a234_0x49eebb(0x117)),typedi_1=__importDefault(require(a234_0x49eebb(0xfb))),salesforce_error_1=require(a234_0x49eebb(0xc2)),composite_utils_1=require(a234_0x49eebb(0xf6)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_git_sync_service_1=require(a234_0x49eebb(0xf2));class SalesforceComponentsManager{constructor(_0x5c0732,_0x1dbcef,_0x3cb0a1,_0x4323dd,_0x355665){const _0x45e06d=a234_0x49eebb;this[_0x45e06d(0xe3)]=_0x5c0732,this[_0x45e06d(0x112)]=_0x1dbcef,this[_0x45e06d(0x119)]=_0x3cb0a1,this[_0x45e06d(0xca)]=_0x4323dd,this['proceededComponentsMeta']=_0x355665,this[_0x45e06d(0x122)]=new core_1[(_0x45e06d(0xc6))](SalesforceComponentsManager[_0x45e06d(0xb7)]),this[_0x45e06d(0xc1)]=typedi_1[_0x45e06d(0x110)][_0x45e06d(0xc8)](salesforce_git_sync_service_1[_0x45e06d(0xd2)]);}[a234_0x49eebb(0x10d)](_0x4b388f,_0x28565a){const _0x882006=a234_0x49eebb,_0x3a40f1=(0x0,flosum_naming_utils_1[_0x882006(0xf8)])(_0x4b388f,[_0x882006(0x104),_0x882006(0xf9),_0x882006(0xcb)]);this[_0x882006(0xbf)][_0x882006(0xb6)]({'componentId':'','reference':_0x28565a,'version':_0x3a40f1[_0x882006(0xcb)],'componentName':_0x3a40f1['Component_Name__c'],'componentType':_0x3a40f1['Component_Type__c']});}[a234_0x49eebb(0x111)](_0x165959,_0x3a0eb7){const _0x5d3886=a234_0x49eebb,{request:_0x29376d}=(0x0,composite_utils_1[_0x5d3886(0x120)])(constants_1[_0x5d3886(0xc7)],{[constants_1[_0x5d3886(0xf7)]+_0x5d3886(0xdb)]:_0x165959,[constants_1[_0x5d3886(0xf7)]+_0x5d3886(0xd8)]:_0x3a0eb7});return _0x29376d;}async[a234_0x49eebb(0xe4)](_0x217000,_0x2adb8e){const _0x388d1c=a234_0x49eebb,_0x28fcd1={},_0x1456be=zip_1['Zip'][_0x388d1c(0xef)]();for(const _0x3245d2 of Object['keys'](_0x217000[_0x388d1c(0x10b)])){_0x1456be[_0x388d1c(0xfd)](_0x3245d2,_0x217000['files'][_0x3245d2],{'createFolders':!![]});}return _0x28fcd1[_0x388d1c(0x11f)]=_0x388d1c(0xba),_0x28fcd1[_0x388d1c(0xbd)]=_0x217000[_0x388d1c(0xdf)],_0x28fcd1[_0x388d1c(0x105)]=_0x217000[_0x388d1c(0xdf)],_0x28fcd1[_0x388d1c(0xb9)]=_0x2adb8e,_0x28fcd1[_0x388d1c(0xd1)]=await _0x1456be[_0x388d1c(0x11c)]({'type':_0x388d1c(0xd4),'compression':'DEFLATE','compressionOptions':{'level':0x6}}),_0x28fcd1;}[a234_0x49eebb(0xdc)](_0x5c2d7f,_0x310d6a,_0x83de0e){const _0x249fe0=a234_0x49eebb,_0x50d2ad=new Date()[_0x249fe0(0x10e)](),_0x2a2b01={};return _0x2a2b01[constants_1[_0x249fe0(0xf7)]+'Component__c']=_0x310d6a,_0x2a2b01[constants_1[_0x249fe0(0xf7)]+_0x249fe0(0x116)]=_0x5c2d7f[_0x249fe0(0xce)],_0x2a2b01[constants_1[_0x249fe0(0xf7)]+_0x249fe0(0x113)]=_0x50d2ad,_0x2a2b01[constants_1[_0x249fe0(0xf7)]+_0x249fe0(0xe2)]=this[_0x249fe0(0x119)],_0x2a2b01[constants_1[_0x249fe0(0xf7)]+_0x249fe0(0xcb)]=_0x83de0e?_0x83de0e+0x1:0x1,_0x2a2b01[constants_1[_0x249fe0(0xf4)]+_0x249fe0(0xbe)]=!![],_0x2a2b01;}[a234_0x49eebb(0xee)](_0x318eb6,_0x5d1334){const _0x4b6a0a=a234_0x49eebb;var _0x10de70,_0xb3c244;const _0x582d82=new Date()[_0x4b6a0a(0x10e)](),_0xb511a5={};return!_0x5d1334?(this['branchId']?(_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+_0x4b6a0a(0xd0)]=this[_0x4b6a0a(0x112)],_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+_0x4b6a0a(0xe0)]=_0x4b6a0a(0x10f),_0xb511a5[_0x4b6a0a(0xcc)]=(_0x10de70=this[_0x4b6a0a(0xca)][_0x4b6a0a(0xea)](_0x230ef5=>_0x230ef5[_0x4b6a0a(0xb7)]===_0x4b6a0a(0x10f)))===null||_0x10de70===void 0x0?void 0x0:_0x10de70['id']):(_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+_0x4b6a0a(0xfe)]=this['repositoryId'],_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+_0x4b6a0a(0xe0)]=_0x4b6a0a(0xff),_0xb511a5['RecordTypeId']=(_0xb3c244=this['recordTypes'][_0x4b6a0a(0xea)](_0x3ae746=>_0x3ae746[_0x4b6a0a(0xb7)]===_0x4b6a0a(0xff)))===null||_0xb3c244===void 0x0?void 0x0:_0xb3c244['id']),_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+'Version__c']=0x1):_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+_0x4b6a0a(0xcb)]=_0x5d1334[_0x4b6a0a(0xe5)]+0x1,_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+_0x4b6a0a(0x104)]=_0x318eb6[_0x4b6a0a(0xdf)],_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+_0x4b6a0a(0xf9)]=_0x318eb6[_0x4b6a0a(0xb7)],_0xb511a5[constants_1['FLOSUM_NAMESPACE']+_0x4b6a0a(0x10a)]=_0x318eb6[_0x4b6a0a(0x11e)],_0xb511a5[constants_1['FLOSUM_NAMESPACE']+_0x4b6a0a(0xb5)]=this['username'],_0xb511a5[constants_1['FLOSUM_NAMESPACE']+_0x4b6a0a(0xb8)]=this[_0x4b6a0a(0x119)],_0xb511a5[constants_1['FLOSUM_NAMESPACE']+_0x4b6a0a(0xc4)]=_0x582d82,_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+_0x4b6a0a(0xe9)]=_0x582d82,_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+_0x4b6a0a(0x116)]=_0x318eb6[_0x4b6a0a(0xce)],_0xb511a5[constants_1[_0x4b6a0a(0xf7)]+_0x4b6a0a(0xbb)]=_0x318eb6[_0x4b6a0a(0xc3)],_0xb511a5[constants_1['FLOSUM_NAMESPACE']+'Vlocity_Component__c']=_0x318eb6[_0x4b6a0a(0xc0)],_0xb511a5;}['getProceededComponentsMeta'](){const _0x100a8b=a234_0x49eebb;return this[_0x100a8b(0xbf)];}async[a234_0x49eebb(0xf0)](_0x31185d,_0x506c90){const _0x4fd4e2=a234_0x49eebb,_0x527adb=[];for(const _0x16a397 of _0x31185d){const _0x5e9f69=(0x0,composite_utils_1['createPostRequest'])(constants_1[_0x4fd4e2(0xcd)],this[_0x4fd4e2(0xee)](_0x16a397)),_0xe8a1e3=(0x0,composite_utils_1[_0x4fd4e2(0x120)])(constants_1[_0x4fd4e2(0x100)],this[_0x4fd4e2(0xdc)](_0x16a397,'@{'+_0x5e9f69[_0x4fd4e2(0xe6)]+_0x4fd4e2(0x108))),_0x3a2a5d=(0x0,composite_utils_1[_0x4fd4e2(0x120)])(constants_1[_0x4fd4e2(0xe1)],await this[_0x4fd4e2(0xe4)](_0x16a397,'@{'+_0xe8a1e3[_0x4fd4e2(0xe6)]+_0x4fd4e2(0x108)));this['proceedComponentMeta'](_0x5e9f69[_0x4fd4e2(0xda)]['body'],_0x5e9f69['reference']),_0x527adb[_0x4fd4e2(0xb6)](_0x5e9f69[_0x4fd4e2(0xda)],_0xe8a1e3[_0x4fd4e2(0xda)],_0x3a2a5d['request']),_0x506c90&&_0x527adb[_0x4fd4e2(0xb6)](this[_0x4fd4e2(0x111)](_0x506c90,'@{'+_0xe8a1e3[_0x4fd4e2(0xe6)]+_0x4fd4e2(0x108)));}return _0x527adb;}async[a234_0x49eebb(0x121)](_0x57a722,_0x10da33=''){const _0x21d61a=a234_0x49eebb,_0x404120=[];for(const {component:_0xecd4e4,meta:_0xea3cf5}of _0x57a722){if(!_0xea3cf5['id']){const _0xe1484e=this[_0x21d61a(0xbf)][_0x21d61a(0xea)](_0x21bc15=>_0x21bc15[_0x21d61a(0xf1)]===_0xecd4e4[_0x21d61a(0xb7)]&&_0x21bc15['componentType']===_0xecd4e4[_0x21d61a(0xdf)]);if(!_0xe1484e)throw new salesforce_error_1[(_0x21d61a(0x118))](new Error(_0x21d61a(0xfc)+_0xecd4e4[_0x21d61a(0xb7)]+'\x20['+_0xecd4e4['type']+_0x21d61a(0xcf)));_0xea3cf5['id']=_0xe1484e[_0x21d61a(0x11a)];}const _0x4915ba=(0x0,composite_utils_1[_0x21d61a(0xf3)])(constants_1[_0x21d61a(0xcd)],_0xea3cf5['id'],this[_0x21d61a(0xee)](_0xecd4e4,_0xea3cf5)),_0x4156bc=(0x0,composite_utils_1['createPostRequest'])(constants_1[_0x21d61a(0x100)],this[_0x21d61a(0xdc)](_0xecd4e4,_0xea3cf5['id'],_0xea3cf5[_0x21d61a(0xe5)])),_0x5d748e=(0x0,composite_utils_1['createPostRequest'])(constants_1[_0x21d61a(0xe1)],await this[_0x21d61a(0xe4)](_0xecd4e4,'@{'+_0x4156bc['reference']+'.id}'));this['proceedComponentMeta'](_0x4915ba[_0x21d61a(0xda)][_0x21d61a(0xeb)],_0x4915ba['reference']),_0x404120['push'](_0x4915ba[_0x21d61a(0xda)],_0x4156bc[_0x21d61a(0xda)],_0x5d748e[_0x21d61a(0xda)]),_0x10da33&&_0x404120[_0x21d61a(0xb6)](this[_0x21d61a(0x111)](_0x10da33,'@{'+_0x4156bc['reference']+_0x21d61a(0x108)));}return _0x404120;}async[a234_0x49eebb(0xe7)](_0x52fa7e,_0x2b6b4d=![]){const _0x1280d1=a234_0x49eebb,_0x4bf05b={'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]},_0x2a91d2=[];for(const _0x4f4a01 of _0x52fa7e){if(_0x4f4a01['id'])_0x2a91d2['push'](_0x4f4a01['id']);else{const _0x420e12=this[_0x1280d1(0xbf)]['find'](_0x135636=>_0x135636[_0x1280d1(0xf1)]===_0x4f4a01[_0x1280d1(0xb7)]&&_0x135636[_0x1280d1(0x114)]===_0x4f4a01[_0x1280d1(0xdf)]);if(!_0x420e12||!_0x420e12[_0x1280d1(0x11a)])continue;_0x2a91d2[_0x1280d1(0xb6)](_0x420e12['componentId']);}}if(_0x2b6b4d){const _0x56817b=await this[_0x1280d1(0xc1)]['fetchCommitManifestsByComponentIds'](_0x2a91d2);_0x4bf05b[_0x1280d1(0x107)]=_0x56817b['map'](_0x44e59e=>(0x0,composite_utils_1['createDeleteRequest'])(constants_1['FLOSUM_COMMIT_MANIFEST'],_0x44e59e)[_0x1280d1(0xda)]);}return _0x4bf05b[_0x1280d1(0xd7)]=_0x2a91d2[_0x1280d1(0x115)](_0x27b15f=>(0x0,composite_utils_1[_0x1280d1(0xf3)])(constants_1['FLOSUM_COMPONENT'],_0x27b15f,{[constants_1[_0x1280d1(0xf4)]+_0x1280d1(0xbc)]:!![]})[_0x1280d1(0xda)]),_0x4bf05b[_0x1280d1(0x109)]=_0x2a91d2[_0x1280d1(0x115)](_0x3fb40b=>(0x0,composite_utils_1['createDeleteRequest'])(constants_1[_0x1280d1(0xcd)],_0x3fb40b)[_0x1280d1(0xda)]),_0x4bf05b;}}exports[a234_0x49eebb(0x101)]=SalesforceComponentsManager;