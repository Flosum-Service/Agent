function a178_0x4bde(_0x6b54e6,_0x52d5d3){const _0x24cb42=a178_0x3710();return a178_0x4bde=function(_0x53fbc3,_0xb3f192){_0x53fbc3=_0x53fbc3-0x147;let _0x3710bf=_0x24cb42[_0x53fbc3];return _0x3710bf;},a178_0x4bde(_0x6b54e6,_0x52d5d3);}const a178_0x126e61=a178_0x4bde;(function(_0x3504c7,_0x149dd1){const _0x54d353=a178_0x4bde,_0x401646=_0x3504c7();while(!![]){try{const _0x574596=parseInt(_0x54d353(0x1ab))/0x1*(parseInt(_0x54d353(0x18f))/0x2)+-parseInt(_0x54d353(0x1aa))/0x3*(parseInt(_0x54d353(0x15d))/0x4)+-parseInt(_0x54d353(0x169))/0x5*(parseInt(_0x54d353(0x15c))/0x6)+-parseInt(_0x54d353(0x182))/0x7*(parseInt(_0x54d353(0x14f))/0x8)+parseInt(_0x54d353(0x199))/0x9+parseInt(_0x54d353(0x14a))/0xa*(parseInt(_0x54d353(0x1a0))/0xb)+-parseInt(_0x54d353(0x1b0))/0xc*(parseInt(_0x54d353(0x1a4))/0xd);if(_0x574596===_0x149dd1)break;else _0x401646['push'](_0x401646['shift']());}catch(_0x4062f2){_0x401646['push'](_0x401646['shift']());}}}(a178_0x3710,0x9ac00));const a178_0xb3f192=(function(){let _0x23864a=!![];return function(_0x27939d,_0x5871ee){const _0x10f760=_0x23864a?function(){const _0x39664e=a178_0x4bde;if(_0x5871ee){const _0x3e97ef=_0x5871ee[_0x39664e(0x18a)](_0x27939d,arguments);return _0x5871ee=null,_0x3e97ef;}}:function(){};return _0x23864a=![],_0x10f760;};}()),a178_0x53fbc3=a178_0xb3f192(this,function(){const _0x47e60a=a178_0x4bde;return a178_0x53fbc3[_0x47e60a(0x18b)]()[_0x47e60a(0x184)](_0x47e60a(0x19c))['toString']()['constructor'](a178_0x53fbc3)['search']('(((.+)+)+)+$');});a178_0x53fbc3();'use strict';function a178_0x3710(){const _0x7e0560=['base64','Changed_By__c','createZip','request','getProceededComponentsMeta','CRC32__c','Last_Updated_By__c','createPatchRequest','default','createPostRequest','Repository__c','./salesforce-git-sync.service','Logger','update','14musPfL','proceededComponentsMeta','search','Component_Type__c','FLOSUM_NAMESPACE','FLOSUM_ATTACHMENT','body','../../parsers/utils/zip','apply','toString','Component_Name__c','Body','manifests','2MDXoPn','SalesforceError','files','crc','SalesforceComponentsManager','Description','Component__c','Committed_On__c','typedi','get','3507669VLYTZf','Branch__c','Last_Modified_Date__c','(((.+)+)+)+$','.id}','Last_Modified_By__c','componentName','4081YynmwP','FLOSUM_COMMIT_MANIFEST','reference','Zip','195OinwPO','name','username','Name','branchId','componentId','979293LLHXad','1222153HMmgri','Commit__c','repositoryId','componentsToUpdate','gitSync','246804ASfLce','extractFieldsFromRecord','Could\x20not\x20proceed\x20component\x20','componentsToDelete','../../../../core','../utils/flosum-naming.utils','File_Name__c','Source__c','ContentType','25030GlCWbn','Component_History__c','FLOSUM_COMPONENT','Repository','find','2328408aoFRlI','DEFLATE','__importDefault','toISOString','FLOSUM_COMPONENT_HISTORY','ParentId','../utils/composite.utils','version','proceedComponentMeta','recordTypes','componentType','file','prepareCommitManifest','3018IAibOG','4dTKvUB','prepareComponentRecord','Is_From_Agent__c','RecordTypeId','push','Deletion_By_Agent__c','delete','fetchCommitManifestsByComponentIds','prepareComponentAttachmentRecord','__esModule','../../../../constants','map','6855akCZfu','type','Changed_On__c','application/zip','createDeleteRequest','Version__c','generateAsync','Branch','insert','prepareComponentHistoryRecord','keys'];a178_0x3710=function(){return _0x7e0560;};return a178_0x3710();}var __importDefault=this&&this[a178_0x126e61(0x151)]||function(_0x37918d){const _0x7f2186=a178_0x126e61;return _0x37918d&&_0x37918d[_0x7f2186(0x166)]?_0x37918d:{'default':_0x37918d};};Object['defineProperty'](exports,a178_0x126e61(0x166),{'value':!![]}),exports[a178_0x126e61(0x193)]=void 0x0;const constants_1=require(a178_0x126e61(0x167)),core_1=require(a178_0x126e61(0x1b4)),zip_1=require(a178_0x126e61(0x189)),typedi_1=__importDefault(require(a178_0x126e61(0x197))),salesforce_error_1=require('../errors/salesforce.error'),composite_utils_1=require(a178_0x126e61(0x155)),flosum_naming_utils_1=require(a178_0x126e61(0x1b5)),salesforce_git_sync_service_1=require(a178_0x126e61(0x17f));class SalesforceComponentsManager{constructor(_0xce31f1,_0x38fb98,_0x22a2ca,_0x203ab7,_0x102757){const _0x51905d=a178_0x126e61;this[_0x51905d(0x1ad)]=_0xce31f1,this[_0x51905d(0x1a8)]=_0x38fb98,this[_0x51905d(0x1a6)]=_0x22a2ca,this['recordTypes']=_0x203ab7,this[_0x51905d(0x183)]=_0x102757,this['logger']=new core_1[(_0x51905d(0x180))](SalesforceComponentsManager['name']),this[_0x51905d(0x1af)]=typedi_1[_0x51905d(0x17c)][_0x51905d(0x198)](salesforce_git_sync_service_1['SalesforceGitSyncService']);}['proceedComponentMeta'](_0x111732,_0x1a6fea){const _0x45df12=a178_0x126e61,_0x4214d1=flosum_naming_utils_1[_0x45df12(0x1b1)](_0x111732,['Component_Type__c',_0x45df12(0x18c),_0x45df12(0x16e)]);this['proceededComponentsMeta'][_0x45df12(0x161)]({'componentId':'','reference':_0x1a6fea,'version':_0x4214d1[_0x45df12(0x16e)],'componentName':_0x4214d1[_0x45df12(0x18c)],'componentType':_0x4214d1[_0x45df12(0x185)]});}['prepareCommitManifest'](_0xbf71c3,_0x2412b8){const _0x4c02f5=a178_0x126e61,{request:_0x55f6b0}=composite_utils_1[_0x4c02f5(0x17d)](constants_1[_0x4c02f5(0x1a1)],{[constants_1[_0x4c02f5(0x186)]+_0x4c02f5(0x1ac)]:_0xbf71c3,[constants_1[_0x4c02f5(0x186)]+_0x4c02f5(0x14b)]:_0x2412b8});return _0x55f6b0;}async[a178_0x126e61(0x165)](_0x1c7c3c,_0x3baadf){const _0x2b458f=a178_0x126e61,_0x120483={},_0x2fac28=zip_1[_0x2b458f(0x1a3)][_0x2b458f(0x176)]();for(const _0x42ca83 of Object[_0x2b458f(0x173)](_0x1c7c3c[_0x2b458f(0x191)])){_0x2fac28[_0x2b458f(0x15a)](_0x42ca83,_0x1c7c3c[_0x2b458f(0x191)][_0x42ca83],{'createFolders':!![]});}return _0x120483[_0x2b458f(0x149)]=_0x2b458f(0x16c),_0x120483[_0x2b458f(0x1a7)]=_0x1c7c3c[_0x2b458f(0x16a)],_0x120483[_0x2b458f(0x194)]=_0x1c7c3c[_0x2b458f(0x16a)],_0x120483[_0x2b458f(0x154)]=_0x3baadf,_0x120483[_0x2b458f(0x18d)]=await _0x2fac28[_0x2b458f(0x16f)]({'type':_0x2b458f(0x174),'compression':_0x2b458f(0x150),'compressionOptions':{'level':0x6}}),_0x120483;}['prepareComponentHistoryRecord'](_0x4f9efc,_0x1a6a4a,_0x2cbff0){const _0x451ea7=a178_0x126e61,_0x41a35b=new Date()['toISOString'](),_0x592306={};return _0x592306[constants_1[_0x451ea7(0x186)]+_0x451ea7(0x195)]=_0x1a6a4a,_0x592306[constants_1[_0x451ea7(0x186)]+_0x451ea7(0x179)]=_0x4f9efc[_0x451ea7(0x192)],_0x592306[constants_1['FLOSUM_NAMESPACE']+_0x451ea7(0x16b)]=_0x41a35b,_0x592306[constants_1[_0x451ea7(0x186)]+_0x451ea7(0x175)]=this[_0x451ea7(0x1a6)],_0x592306[constants_1[_0x451ea7(0x186)]+_0x451ea7(0x16e)]=_0x2cbff0?_0x2cbff0+0x1:0x1,_0x592306[constants_1['FLOSUM_GIT_NAMESPACE']+_0x451ea7(0x15f)]=!![],_0x592306;}[a178_0x126e61(0x15e)](_0x5c8089,_0x3b5f9b){const _0x54c543=a178_0x126e61;var _0x292b29,_0xe65d25;const _0x518988=new Date()[_0x54c543(0x152)](),_0x2ea98a={};return!_0x3b5f9b?(this[_0x54c543(0x1a8)]?(_0x2ea98a[constants_1[_0x54c543(0x186)]+_0x54c543(0x19a)]=this[_0x54c543(0x1a8)],_0x2ea98a[constants_1[_0x54c543(0x186)]+_0x54c543(0x148)]=_0x54c543(0x170),_0x2ea98a[_0x54c543(0x160)]=(_0x292b29=this['recordTypes'][_0x54c543(0x14e)](_0x34114d=>_0x34114d[_0x54c543(0x1a5)]===_0x54c543(0x170)))===null||_0x292b29===void 0x0?void 0x0:_0x292b29['id']):(_0x2ea98a[constants_1[_0x54c543(0x186)]+_0x54c543(0x17e)]=this[_0x54c543(0x1ad)],_0x2ea98a[constants_1[_0x54c543(0x186)]+_0x54c543(0x148)]='Repository',_0x2ea98a[_0x54c543(0x160)]=(_0xe65d25=this[_0x54c543(0x158)]['find'](_0x855013=>_0x855013[_0x54c543(0x1a5)]===_0x54c543(0x14d)))===null||_0xe65d25===void 0x0?void 0x0:_0xe65d25['id']),_0x2ea98a[constants_1[_0x54c543(0x186)]+_0x54c543(0x16e)]=0x1):_0x2ea98a[constants_1['FLOSUM_NAMESPACE']+_0x54c543(0x16e)]=_0x3b5f9b[_0x54c543(0x156)]+0x1,_0x2ea98a[constants_1[_0x54c543(0x186)]+_0x54c543(0x185)]=_0x5c8089['type'],_0x2ea98a[constants_1['FLOSUM_NAMESPACE']+_0x54c543(0x18c)]=_0x5c8089[_0x54c543(0x1a5)],_0x2ea98a[constants_1['FLOSUM_NAMESPACE']+_0x54c543(0x147)]=_0x5c8089['filePath'],_0x2ea98a[constants_1[_0x54c543(0x186)]+_0x54c543(0x17a)]=this[_0x54c543(0x1a6)],_0x2ea98a[constants_1[_0x54c543(0x186)]+_0x54c543(0x19e)]=this[_0x54c543(0x1a6)],_0x2ea98a[constants_1['FLOSUM_NAMESPACE']+_0x54c543(0x19b)]=_0x518988,_0x2ea98a[constants_1[_0x54c543(0x186)]+_0x54c543(0x196)]=_0x518988,_0x2ea98a[constants_1['FLOSUM_NAMESPACE']+'CRC32__c']=_0x5c8089[_0x54c543(0x192)],_0x2ea98a;}[a178_0x126e61(0x178)](){const _0xf4a709=a178_0x126e61;return this[_0xf4a709(0x183)];}async[a178_0x126e61(0x171)](_0x279475,_0x28f957){const _0x1dcce6=a178_0x126e61,_0x5d7672=[];for(const _0x2301a3 of _0x279475){const _0x4230e4=composite_utils_1[_0x1dcce6(0x17d)](constants_1['FLOSUM_COMPONENT'],this[_0x1dcce6(0x15e)](_0x2301a3)),_0x31e648=composite_utils_1[_0x1dcce6(0x17d)](constants_1[_0x1dcce6(0x153)],this[_0x1dcce6(0x172)](_0x2301a3,'@{'+_0x4230e4[_0x1dcce6(0x1a2)]+_0x1dcce6(0x19d))),_0x40c7dc=composite_utils_1[_0x1dcce6(0x17d)](constants_1['FLOSUM_ATTACHMENT'],await this['prepareComponentAttachmentRecord'](_0x2301a3,'@{'+_0x31e648[_0x1dcce6(0x1a2)]+'.id}'));this[_0x1dcce6(0x157)](_0x4230e4[_0x1dcce6(0x177)][_0x1dcce6(0x188)],_0x4230e4[_0x1dcce6(0x1a2)]),_0x5d7672['push'](_0x4230e4[_0x1dcce6(0x177)],_0x31e648[_0x1dcce6(0x177)],_0x40c7dc[_0x1dcce6(0x177)]),_0x28f957&&_0x5d7672['push'](this[_0x1dcce6(0x15b)](_0x28f957,'@{'+_0x31e648[_0x1dcce6(0x1a2)]+_0x1dcce6(0x19d)));}return _0x5d7672;}async[a178_0x126e61(0x181)](_0xb8f4f,_0x58fae0=''){const _0x6daae7=a178_0x126e61,_0x3c4c0f=[];for(const {component:_0x5288c9,meta:_0x1cf8e0}of _0xb8f4f){if(!_0x1cf8e0['id']){const _0x44350a=this[_0x6daae7(0x183)][_0x6daae7(0x14e)](_0x2a65d5=>_0x2a65d5[_0x6daae7(0x19f)]===_0x5288c9['name']&&_0x2a65d5['componentType']===_0x5288c9[_0x6daae7(0x16a)]);if(!_0x44350a)throw new salesforce_error_1[(_0x6daae7(0x190))](new Error(_0x6daae7(0x1b2)+_0x5288c9['name']+'\x20['+_0x5288c9[_0x6daae7(0x16a)]+']\x20-\x20meta\x20not\x20found'));_0x1cf8e0['id']=_0x44350a[_0x6daae7(0x1a9)];}const _0x238a3a=composite_utils_1[_0x6daae7(0x17b)](constants_1[_0x6daae7(0x14c)],_0x1cf8e0['id'],this[_0x6daae7(0x15e)](_0x5288c9,_0x1cf8e0)),_0x10b856=composite_utils_1[_0x6daae7(0x17d)](constants_1[_0x6daae7(0x153)],this['prepareComponentHistoryRecord'](_0x5288c9,_0x1cf8e0['id'],_0x1cf8e0['version'])),_0x570ae1=composite_utils_1[_0x6daae7(0x17d)](constants_1[_0x6daae7(0x187)],await this[_0x6daae7(0x165)](_0x5288c9,'@{'+_0x10b856[_0x6daae7(0x1a2)]+_0x6daae7(0x19d)));this['proceedComponentMeta'](_0x238a3a[_0x6daae7(0x177)]['body'],_0x238a3a[_0x6daae7(0x1a2)]),_0x3c4c0f[_0x6daae7(0x161)](_0x238a3a[_0x6daae7(0x177)],_0x10b856['request'],_0x570ae1[_0x6daae7(0x177)]),_0x58fae0&&_0x3c4c0f[_0x6daae7(0x161)](this['prepareCommitManifest'](_0x58fae0,'@{'+_0x10b856[_0x6daae7(0x1a2)]+_0x6daae7(0x19d)));}return _0x3c4c0f;}async[a178_0x126e61(0x163)](_0x2d8cfe,_0x55f332=![]){const _0x559219=a178_0x126e61,_0x3ff6c9={'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]},_0x5f05ed=[];for(const _0x3132c7 of _0x2d8cfe){if(_0x3132c7['id'])_0x5f05ed[_0x559219(0x161)](_0x3132c7['id']);else{const _0xb7e4ec=this[_0x559219(0x183)][_0x559219(0x14e)](_0x2ddf50=>_0x2ddf50['componentName']===_0x3132c7['name']&&_0x2ddf50[_0x559219(0x159)]===_0x3132c7[_0x559219(0x16a)]);if(!_0xb7e4ec||!_0xb7e4ec[_0x559219(0x1a9)])continue;_0x5f05ed[_0x559219(0x161)](_0xb7e4ec['componentId']);}}if(_0x55f332){const _0x5116bb=await this[_0x559219(0x1af)][_0x559219(0x164)](_0x5f05ed);_0x3ff6c9[_0x559219(0x18e)]=_0x5116bb[_0x559219(0x168)](_0x510d60=>composite_utils_1[_0x559219(0x16d)](constants_1[_0x559219(0x1a1)],_0x510d60)[_0x559219(0x177)]);}return _0x3ff6c9[_0x559219(0x1ae)]=_0x5f05ed[_0x559219(0x168)](_0x7c08b3=>composite_utils_1['createPatchRequest'](constants_1[_0x559219(0x14c)],_0x7c08b3,{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x559219(0x162)]:!![]})[_0x559219(0x177)]),_0x3ff6c9[_0x559219(0x1b3)]=_0x5f05ed[_0x559219(0x168)](_0x17ca83=>composite_utils_1[_0x559219(0x16d)](constants_1[_0x559219(0x14c)],_0x17ca83)[_0x559219(0x177)]),_0x3ff6c9;}}exports[a178_0x126e61(0x193)]=SalesforceComponentsManager;