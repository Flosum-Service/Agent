const a195_0x26d47e=a195_0x4052;function a195_0x4052(_0x190816,_0x57fcf0){const _0x2baa09=a195_0x2f32();return a195_0x4052=function(_0x49de54,_0x5602fd){_0x49de54=_0x49de54-0xea;let _0x2f32bb=_0x2baa09[_0x49de54];return _0x2f32bb;},a195_0x4052(_0x190816,_0x57fcf0);}function a195_0x2f32(){const _0x24dc13=['update','../../../../core','Could\x20not\x20proceed\x20component\x20','base64','Last_Modified_By__c','18rsvQwL','10waoiWc','type','typedi','repositoryId','Branch','search','Component_History__c','request','username','CRC32__c',']\x20-\x20meta\x20not\x20found','Description','8PuwWXE','FLOSUM_COMPONENT_HISTORY','push','Logger','FLOSUM_COMMIT_MANIFEST','body','apply','../errors/salesforce.error','13emImlr','Name','keys','prepareComponentAttachmentRecord','find','extractFieldsFromRecord','application/zip','Version__c','4314563NpGUgU','44372JMPjvX','name','SalesforceError','files','FLOSUM_NAMESPACE','crc','generateAsync','createDeleteRequest','Repository__c','FLOSUM_GIT_NAMESPACE','Body','Component_Type__c','createPatchRequest','constructor','DEFLATE','manifests','gitSync','File_Name__c','./salesforce-git-sync.service','componentId','version','3122147StqbdA','(((.+)+)+)+$','../utils/flosum-naming.utils','prepareComponentHistoryRecord','ContentType','1311144VtSGyG','../../parsers/utils/zip','proceedComponentMeta','ParentId','componentType','FLOSUM_COMPONENT','createPostRequest','toISOString','proceededComponentsMeta','Source__c','Deletion_By_Agent__c','Repository','RecordTypeId','SalesforceComponentsManager','1582855LUAbWk','prepareCommitManifest','defineProperty','.id}','file','default','Changed_On__c','Zip','componentsToDelete','reference','getProceededComponentsMeta','Component_Name__c','toString','logger','insert','prepareComponentRecord','fetchCommitManifestsByComponentIds','map','recordTypes','Is_From_Agent__c','componentName','599103iJRJnZ','delete','FLOSUM_ATTACHMENT','branchId','__esModule','6UjPXZP','3ljQqAc','Last_Updated_By__c','1899116IWDVaR'];a195_0x2f32=function(){return _0x24dc13;};return a195_0x2f32();}(function(_0x2716d2,_0x1191c8){const _0x13946c=a195_0x4052,_0xb8bf24=_0x2716d2();while(!![]){try{const _0x19817b=parseInt(_0x13946c(0x14e))/0x1*(parseInt(_0x13946c(0x103))/0x2)+parseInt(_0x13946c(0x146))/0x3*(-parseInt(_0x13946c(0x148))/0x4)+parseInt(_0x13946c(0x12b))/0x5*(parseInt(_0x13946c(0x145))/0x6)+parseInt(_0x13946c(0x118))/0x7*(parseInt(_0x13946c(0xf2))/0x8)+parseInt(_0x13946c(0x140))/0x9+-parseInt(_0x13946c(0x14f))/0xa*(parseInt(_0x13946c(0x102))/0xb)+-parseInt(_0x13946c(0x11d))/0xc*(parseInt(_0x13946c(0xfa))/0xd);if(_0x19817b===_0x1191c8)break;else _0xb8bf24['push'](_0xb8bf24['shift']());}catch(_0x4a0011){_0xb8bf24['push'](_0xb8bf24['shift']());}}}(a195_0x2f32,0x3d949));const a195_0x5602fd=(function(){let _0x15e30e=!![];return function(_0xe7925b,_0x4430da){const _0x12d0ce=_0x15e30e?function(){const _0x3e6f1e=a195_0x4052;if(_0x4430da){const _0x52fcd4=_0x4430da[_0x3e6f1e(0xf8)](_0xe7925b,arguments);return _0x4430da=null,_0x52fcd4;}}:function(){};return _0x15e30e=![],_0x12d0ce;};}()),a195_0x49de54=a195_0x5602fd(this,function(){const _0x2ada2c=a195_0x4052;return a195_0x49de54[_0x2ada2c(0x137)]()['search']('(((.+)+)+)+$')[_0x2ada2c(0x137)]()[_0x2ada2c(0x110)](a195_0x49de54)[_0x2ada2c(0xeb)](_0x2ada2c(0x119));});a195_0x49de54();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x7a8e8c){const _0x5a5b42=a195_0x4052;return _0x7a8e8c&&_0x7a8e8c[_0x5a5b42(0x144)]?_0x7a8e8c:{'default':_0x7a8e8c};};Object[a195_0x26d47e(0x12d)](exports,a195_0x26d47e(0x144),{'value':!![]}),exports[a195_0x26d47e(0x12a)]=void 0x0;const constants_1=require('../../../../constants'),core_1=require(a195_0x26d47e(0x14a)),zip_1=require(a195_0x26d47e(0x11e)),typedi_1=__importDefault(require(a195_0x26d47e(0x151))),salesforce_error_1=require(a195_0x26d47e(0xf9)),composite_utils_1=require('../utils/composite.utils'),flosum_naming_utils_1=require(a195_0x26d47e(0x11a)),salesforce_git_sync_service_1=require(a195_0x26d47e(0x115));class SalesforceComponentsManager{constructor(_0x34fda6,_0x57e190,_0x3a091e,_0x28513f,_0x887a22){const _0x4c0a3d=a195_0x26d47e;this[_0x4c0a3d(0x152)]=_0x34fda6,this[_0x4c0a3d(0x143)]=_0x57e190,this['username']=_0x3a091e,this[_0x4c0a3d(0x13d)]=_0x28513f,this[_0x4c0a3d(0x125)]=_0x887a22,this[_0x4c0a3d(0x138)]=new core_1[(_0x4c0a3d(0xf5))](SalesforceComponentsManager[_0x4c0a3d(0x104)]),this['gitSync']=typedi_1[_0x4c0a3d(0x130)]['get'](salesforce_git_sync_service_1['SalesforceGitSyncService']);}[a195_0x26d47e(0x11f)](_0x378fc6,_0x401b51){const _0x150572=a195_0x26d47e,_0xe7c224=(0x0,flosum_naming_utils_1[_0x150572(0xff)])(_0x378fc6,[_0x150572(0x10e),_0x150572(0x136),_0x150572(0x101)]);this['proceededComponentsMeta'][_0x150572(0xf4)]({'componentId':'','reference':_0x401b51,'version':_0xe7c224[_0x150572(0x101)],'componentName':_0xe7c224[_0x150572(0x136)],'componentType':_0xe7c224[_0x150572(0x10e)]});}[a195_0x26d47e(0x12c)](_0x44e0ce,_0x208244){const _0x60c6a7=a195_0x26d47e,{request:_0x61f77d}=(0x0,composite_utils_1['createPostRequest'])(constants_1[_0x60c6a7(0xf6)],{[constants_1[_0x60c6a7(0x107)]+'Commit__c']:_0x44e0ce,[constants_1[_0x60c6a7(0x107)]+_0x60c6a7(0xec)]:_0x208244});return _0x61f77d;}async[a195_0x26d47e(0xfd)](_0x3e6e87,_0x40862c){const _0x19cc00=a195_0x26d47e,_0x424a2e={},_0x31dc89=zip_1[_0x19cc00(0x132)]['createZip']();for(const _0x29dce6 of Object[_0x19cc00(0xfc)](_0x3e6e87[_0x19cc00(0x106)])){_0x31dc89[_0x19cc00(0x12f)](_0x29dce6,_0x3e6e87[_0x19cc00(0x106)][_0x29dce6],{'createFolders':!![]});}return _0x424a2e[_0x19cc00(0x11c)]=_0x19cc00(0x100),_0x424a2e[_0x19cc00(0xfb)]=_0x3e6e87[_0x19cc00(0x150)],_0x424a2e[_0x19cc00(0xf1)]=_0x3e6e87[_0x19cc00(0x150)],_0x424a2e[_0x19cc00(0x120)]=_0x40862c,_0x424a2e[_0x19cc00(0x10d)]=await _0x31dc89[_0x19cc00(0x109)]({'type':_0x19cc00(0x14c),'compression':_0x19cc00(0x111),'compressionOptions':{'level':0x6}}),_0x424a2e;}[a195_0x26d47e(0x11b)](_0x4c6e81,_0x1eea57,_0x18cde7){const _0x1fb205=a195_0x26d47e,_0x117416=new Date()[_0x1fb205(0x124)](),_0x59eb37={};return _0x59eb37[constants_1[_0x1fb205(0x107)]+'Component__c']=_0x1eea57,_0x59eb37[constants_1[_0x1fb205(0x107)]+_0x1fb205(0xef)]=_0x4c6e81[_0x1fb205(0x108)],_0x59eb37[constants_1['FLOSUM_NAMESPACE']+_0x1fb205(0x131)]=_0x117416,_0x59eb37[constants_1[_0x1fb205(0x107)]+'Changed_By__c']=this[_0x1fb205(0xee)],_0x59eb37[constants_1[_0x1fb205(0x107)]+_0x1fb205(0x101)]=_0x18cde7?_0x18cde7+0x1:0x1,_0x59eb37[constants_1[_0x1fb205(0x10c)]+_0x1fb205(0x13e)]=!![],_0x59eb37;}[a195_0x26d47e(0x13a)](_0x2e2624,_0x5dccde){const _0x4aec6c=a195_0x26d47e;var _0x4551e7,_0x5d4191;const _0x3c5bb8=new Date()[_0x4aec6c(0x124)](),_0x40720c={};return!_0x5dccde?(this[_0x4aec6c(0x143)]?(_0x40720c[constants_1[_0x4aec6c(0x107)]+'Branch__c']=this[_0x4aec6c(0x143)],_0x40720c[constants_1[_0x4aec6c(0x107)]+_0x4aec6c(0x126)]=_0x4aec6c(0xea),_0x40720c[_0x4aec6c(0x129)]=(_0x4551e7=this['recordTypes'][_0x4aec6c(0xfe)](_0x396287=>_0x396287[_0x4aec6c(0x104)]===_0x4aec6c(0xea)))===null||_0x4551e7===void 0x0?void 0x0:_0x4551e7['id']):(_0x40720c[constants_1[_0x4aec6c(0x107)]+_0x4aec6c(0x10b)]=this[_0x4aec6c(0x152)],_0x40720c[constants_1[_0x4aec6c(0x107)]+_0x4aec6c(0x126)]=_0x4aec6c(0x128),_0x40720c[_0x4aec6c(0x129)]=(_0x5d4191=this[_0x4aec6c(0x13d)][_0x4aec6c(0xfe)](_0x10daa7=>_0x10daa7['name']===_0x4aec6c(0x128)))===null||_0x5d4191===void 0x0?void 0x0:_0x5d4191['id']),_0x40720c[constants_1[_0x4aec6c(0x107)]+_0x4aec6c(0x101)]=0x1):_0x40720c[constants_1[_0x4aec6c(0x107)]+_0x4aec6c(0x101)]=_0x5dccde[_0x4aec6c(0x117)]+0x1,_0x40720c[constants_1[_0x4aec6c(0x107)]+_0x4aec6c(0x10e)]=_0x2e2624['type'],_0x40720c[constants_1[_0x4aec6c(0x107)]+'Component_Name__c']=_0x2e2624[_0x4aec6c(0x104)],_0x40720c[constants_1[_0x4aec6c(0x107)]+_0x4aec6c(0x114)]=_0x2e2624['filePath'],_0x40720c[constants_1['FLOSUM_NAMESPACE']+_0x4aec6c(0x147)]=this[_0x4aec6c(0xee)],_0x40720c[constants_1['FLOSUM_NAMESPACE']+_0x4aec6c(0x14d)]=this['username'],_0x40720c[constants_1[_0x4aec6c(0x107)]+'Last_Modified_Date__c']=_0x3c5bb8,_0x40720c[constants_1[_0x4aec6c(0x107)]+'Committed_On__c']=_0x3c5bb8,_0x40720c[constants_1[_0x4aec6c(0x107)]+_0x4aec6c(0xef)]=_0x2e2624[_0x4aec6c(0x108)],_0x40720c;}[a195_0x26d47e(0x135)](){const _0x59a2e1=a195_0x26d47e;return this[_0x59a2e1(0x125)];}async[a195_0x26d47e(0x139)](_0x2e89df,_0x3d2f35){const _0x10660b=a195_0x26d47e,_0xe707ef=[];for(const _0x513cf3 of _0x2e89df){const _0x1b089f=(0x0,composite_utils_1[_0x10660b(0x123)])(constants_1['FLOSUM_COMPONENT'],this[_0x10660b(0x13a)](_0x513cf3)),_0x4962c4=(0x0,composite_utils_1[_0x10660b(0x123)])(constants_1[_0x10660b(0xf3)],this[_0x10660b(0x11b)](_0x513cf3,'@{'+_0x1b089f[_0x10660b(0x134)]+_0x10660b(0x12e))),_0x4902b5=(0x0,composite_utils_1[_0x10660b(0x123)])(constants_1[_0x10660b(0x142)],await this[_0x10660b(0xfd)](_0x513cf3,'@{'+_0x4962c4[_0x10660b(0x134)]+_0x10660b(0x12e)));this[_0x10660b(0x11f)](_0x1b089f[_0x10660b(0xed)][_0x10660b(0xf7)],_0x1b089f['reference']),_0xe707ef['push'](_0x1b089f[_0x10660b(0xed)],_0x4962c4[_0x10660b(0xed)],_0x4902b5['request']),_0x3d2f35&&_0xe707ef['push'](this['prepareCommitManifest'](_0x3d2f35,'@{'+_0x4962c4[_0x10660b(0x134)]+_0x10660b(0x12e)));}return _0xe707ef;}async[a195_0x26d47e(0x149)](_0x4f905f,_0xf8849a=''){const _0x355789=a195_0x26d47e,_0x3b6506=[];for(const {component:_0x2bf854,meta:_0x42e26b}of _0x4f905f){if(!_0x42e26b['id']){const _0x372da7=this[_0x355789(0x125)][_0x355789(0xfe)](_0x12200b=>_0x12200b[_0x355789(0x13f)]===_0x2bf854['name']&&_0x12200b[_0x355789(0x121)]===_0x2bf854['type']);if(!_0x372da7)throw new salesforce_error_1[(_0x355789(0x105))](new Error(_0x355789(0x14b)+_0x2bf854[_0x355789(0x104)]+'\x20['+_0x2bf854['type']+_0x355789(0xf0)));_0x42e26b['id']=_0x372da7['componentId'];}const _0x17de74=(0x0,composite_utils_1['createPatchRequest'])(constants_1[_0x355789(0x122)],_0x42e26b['id'],this[_0x355789(0x13a)](_0x2bf854,_0x42e26b)),_0x39d7ad=(0x0,composite_utils_1['createPostRequest'])(constants_1[_0x355789(0xf3)],this['prepareComponentHistoryRecord'](_0x2bf854,_0x42e26b['id'],_0x42e26b[_0x355789(0x117)])),_0x7bafad=(0x0,composite_utils_1[_0x355789(0x123)])(constants_1[_0x355789(0x142)],await this[_0x355789(0xfd)](_0x2bf854,'@{'+_0x39d7ad[_0x355789(0x134)]+_0x355789(0x12e)));this[_0x355789(0x11f)](_0x17de74['request'][_0x355789(0xf7)],_0x17de74[_0x355789(0x134)]),_0x3b6506[_0x355789(0xf4)](_0x17de74[_0x355789(0xed)],_0x39d7ad[_0x355789(0xed)],_0x7bafad[_0x355789(0xed)]),_0xf8849a&&_0x3b6506['push'](this[_0x355789(0x12c)](_0xf8849a,'@{'+_0x39d7ad[_0x355789(0x134)]+_0x355789(0x12e)));}return _0x3b6506;}async[a195_0x26d47e(0x141)](_0x260271,_0x12ccc7=![]){const _0x371ceb=a195_0x26d47e,_0x15c395={'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]},_0x579b14=[];for(const _0x35962b of _0x260271){if(_0x35962b['id'])_0x579b14[_0x371ceb(0xf4)](_0x35962b['id']);else{const _0x3263f4=this[_0x371ceb(0x125)][_0x371ceb(0xfe)](_0x5477c5=>_0x5477c5['componentName']===_0x35962b[_0x371ceb(0x104)]&&_0x5477c5['componentType']===_0x35962b[_0x371ceb(0x150)]);if(!_0x3263f4||!_0x3263f4[_0x371ceb(0x116)])continue;_0x579b14[_0x371ceb(0xf4)](_0x3263f4['componentId']);}}if(_0x12ccc7){const _0x2931d9=await this[_0x371ceb(0x113)][_0x371ceb(0x13b)](_0x579b14);_0x15c395[_0x371ceb(0x112)]=_0x2931d9[_0x371ceb(0x13c)](_0x3ef18d=>(0x0,composite_utils_1[_0x371ceb(0x10a)])(constants_1[_0x371ceb(0xf6)],_0x3ef18d)['request']);}return _0x15c395['componentsToUpdate']=_0x579b14['map'](_0x4ffc38=>(0x0,composite_utils_1[_0x371ceb(0x10f)])(constants_1[_0x371ceb(0x122)],_0x4ffc38,{[constants_1[_0x371ceb(0x10c)]+_0x371ceb(0x127)]:!![]})['request']),_0x15c395[_0x371ceb(0x133)]=_0x579b14[_0x371ceb(0x13c)](_0x45b12a=>(0x0,composite_utils_1[_0x371ceb(0x10a)])(constants_1[_0x371ceb(0x122)],_0x45b12a)[_0x371ceb(0xed)]),_0x15c395;}}exports['SalesforceComponentsManager']=SalesforceComponentsManager;