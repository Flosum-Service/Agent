function a229_0x567c(_0x2b8f12,_0x3c1598){const _0x2294ad=a229_0x5aea();return a229_0x567c=function(_0x2f21a9,_0x1d5838){_0x2f21a9=_0x2f21a9-0x179;let _0x5aea32=_0x2294ad[_0x2f21a9];return _0x5aea32;},a229_0x567c(_0x2b8f12,_0x3c1598);}const a229_0x50b8ac=a229_0x567c;(function(_0x34ebb7,_0x4f541c){const _0x48ad79=a229_0x567c,_0x22ccd0=_0x34ebb7();while(!![]){try{const _0x13716c=-parseInt(_0x48ad79(0x1b5))/0x1*(-parseInt(_0x48ad79(0x1cd))/0x2)+-parseInt(_0x48ad79(0x1a3))/0x3*(-parseInt(_0x48ad79(0x1ad))/0x4)+parseInt(_0x48ad79(0x181))/0x5*(-parseInt(_0x48ad79(0x1ac))/0x6)+-parseInt(_0x48ad79(0x17e))/0x7*(-parseInt(_0x48ad79(0x189))/0x8)+parseInt(_0x48ad79(0x186))/0x9+-parseInt(_0x48ad79(0x19c))/0xa+-parseInt(_0x48ad79(0x1dc))/0xb*(parseInt(_0x48ad79(0x1c4))/0xc);if(_0x13716c===_0x4f541c)break;else _0x22ccd0['push'](_0x22ccd0['shift']());}catch(_0x4e0805){_0x22ccd0['push'](_0x22ccd0['shift']());}}}(a229_0x5aea,0xad8bc));function a229_0x5aea(){const _0x2ea5b2=['typedi','version','constructor','(((.+)+)+)+$','../../../../core','createPatchRequest','branchId','Branch__c','filePath','componentsToUpdate','prepareComponentRecord','4262130sXZYBP','RecordTypeId','Logger','default','SalesforceComponentsManager','defineProperty','componentsToDelete','41523vDATcs','Deletion_By_Agent__c','SalesforceError','Name','createDeleteRequest','Version__c','extractFieldsFromRecord','push','Changed_By__c','2603742NHGlqq','152dPTrMJ','name','body','.id}','Last_Updated_By__c','Changed_On__c','type','FLOSUM_ATTACHMENT','1251291cZLinO','CRC32__c','prepareComponentHistoryRecord','delete','__importDefault','reference','repositoryId','find','FLOSUM_GIT_NAMESPACE','__esModule','username','crc','application/zip','FLOSUM_NAMESPACE','Body','12gApktO','FLOSUM_COMPONENT_HISTORY','recordTypes','generateAsync','toISOString','map','componentType','componentId','files','2YNVcle','toString','base64','componentName','proceededComponentsMeta','FLOSUM_COMPONENT','Component__c','keys','search','createPostRequest','Repository','Component_Name__c','Committed_On__c','prepareComponentAttachmentRecord','createZip','20984282GeGrdN','DEFLATE','apply','ContentType','Source__c','Component_Type__c','322ycxVjT','Branch','insert','5srdxcq','Repository__c','proceedComponentMeta','../../../../constants','logger','8277741ALhehS','Zip','fetchCommitManifestsByComponentIds','135944WOKiLT','prepareCommitManifest','get','Last_Modified_Date__c','request','gitSync','Could\x20not\x20proceed\x20component\x20','getProceededComponentsMeta'];a229_0x5aea=function(){return _0x2ea5b2;};return a229_0x5aea();}const a229_0x1d5838=(function(){let _0x3fc430=!![];return function(_0x43bb64,_0x23c5d0){const _0x2d7cf4=_0x3fc430?function(){const _0x107088=a229_0x567c;if(_0x23c5d0){const _0x8187ba=_0x23c5d0[_0x107088(0x17a)](_0x43bb64,arguments);return _0x23c5d0=null,_0x8187ba;}}:function(){};return _0x3fc430=![],_0x2d7cf4;};}()),a229_0x2f21a9=a229_0x1d5838(this,function(){const _0x5da1ac=a229_0x567c;return a229_0x2f21a9['toString']()['search'](_0x5da1ac(0x194))[_0x5da1ac(0x1ce)]()[_0x5da1ac(0x193)](a229_0x2f21a9)[_0x5da1ac(0x1d5)](_0x5da1ac(0x194));});a229_0x2f21a9();'use strict';var __importDefault=this&&this[a229_0x50b8ac(0x1b9)]||function(_0x1373c3){const _0x3f5924=a229_0x50b8ac;return _0x1373c3&&_0x1373c3[_0x3f5924(0x1be)]?_0x1373c3:{'default':_0x1373c3};};Object[a229_0x50b8ac(0x1a1)](exports,'__esModule',{'value':!![]}),exports[a229_0x50b8ac(0x1a0)]=void 0x0;const constants_1=require(a229_0x50b8ac(0x184)),core_1=require(a229_0x50b8ac(0x195)),zip_1=require('../../parsers/utils/zip'),typedi_1=__importDefault(require(a229_0x50b8ac(0x191))),salesforce_error_1=require('../errors/salesforce.error'),composite_utils_1=require('../utils/composite.utils'),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_git_sync_service_1=require('./salesforce-git-sync.service');class SalesforceComponentsManager{constructor(_0x55c3a1,_0x4c9584,_0x526681,_0x24e176,_0x5a8912){const _0x2c512b=a229_0x50b8ac;this[_0x2c512b(0x1bb)]=_0x55c3a1,this[_0x2c512b(0x197)]=_0x4c9584,this[_0x2c512b(0x1bf)]=_0x526681,this['recordTypes']=_0x24e176,this[_0x2c512b(0x1d1)]=_0x5a8912,this[_0x2c512b(0x185)]=new core_1[(_0x2c512b(0x19e))](SalesforceComponentsManager[_0x2c512b(0x1ae)]),this[_0x2c512b(0x18e)]=typedi_1[_0x2c512b(0x19f)][_0x2c512b(0x18b)](salesforce_git_sync_service_1['SalesforceGitSyncService']);}['proceedComponentMeta'](_0x58efbf,_0xa9a544){const _0x3759b2=a229_0x50b8ac,_0x16e6ee=(0x0,flosum_naming_utils_1[_0x3759b2(0x1a9)])(_0x58efbf,['Component_Type__c',_0x3759b2(0x1d8),'Version__c']);this[_0x3759b2(0x1d1)][_0x3759b2(0x1aa)]({'componentId':'','reference':_0xa9a544,'version':_0x16e6ee[_0x3759b2(0x1a8)],'componentName':_0x16e6ee[_0x3759b2(0x1d8)],'componentType':_0x16e6ee[_0x3759b2(0x17d)]});}['prepareCommitManifest'](_0x2bbfed,_0x463b4d){const _0x340b32=a229_0x50b8ac,{request:_0x5be830}=(0x0,composite_utils_1[_0x340b32(0x1d6)])(constants_1['FLOSUM_COMMIT_MANIFEST'],{[constants_1[_0x340b32(0x1c2)]+'Commit__c']:_0x2bbfed,[constants_1[_0x340b32(0x1c2)]+'Component_History__c']:_0x463b4d});return _0x5be830;}async[a229_0x50b8ac(0x1da)](_0x2444b6,_0x18d621){const _0x4773d0=a229_0x50b8ac,_0x3a0495={},_0x587e70=zip_1[_0x4773d0(0x187)][_0x4773d0(0x1db)]();for(const _0x4e720c of Object[_0x4773d0(0x1d4)](_0x2444b6[_0x4773d0(0x1cc)])){_0x587e70['file'](_0x4e720c,_0x2444b6[_0x4773d0(0x1cc)][_0x4e720c],{'createFolders':!![]});}return _0x3a0495[_0x4773d0(0x17b)]=_0x4773d0(0x1c1),_0x3a0495[_0x4773d0(0x1a6)]=_0x2444b6[_0x4773d0(0x1b3)],_0x3a0495['Description']=_0x2444b6[_0x4773d0(0x1b3)],_0x3a0495['ParentId']=_0x18d621,_0x3a0495[_0x4773d0(0x1c3)]=await _0x587e70[_0x4773d0(0x1c7)]({'type':_0x4773d0(0x1cf),'compression':_0x4773d0(0x179),'compressionOptions':{'level':0x6}}),_0x3a0495;}[a229_0x50b8ac(0x1b7)](_0x5b67e9,_0x31b556,_0x2394b3){const _0x7c85d8=a229_0x50b8ac,_0x508f1e=new Date()['toISOString'](),_0x5c2814={};return _0x5c2814[constants_1[_0x7c85d8(0x1c2)]+_0x7c85d8(0x1d3)]=_0x31b556,_0x5c2814[constants_1[_0x7c85d8(0x1c2)]+_0x7c85d8(0x1b6)]=_0x5b67e9['crc'],_0x5c2814[constants_1['FLOSUM_NAMESPACE']+_0x7c85d8(0x1b2)]=_0x508f1e,_0x5c2814[constants_1[_0x7c85d8(0x1c2)]+_0x7c85d8(0x1ab)]=this['username'],_0x5c2814[constants_1['FLOSUM_NAMESPACE']+_0x7c85d8(0x1a8)]=_0x2394b3?_0x2394b3+0x1:0x1,_0x5c2814[constants_1[_0x7c85d8(0x1bd)]+'Is_From_Agent__c']=!![],_0x5c2814;}[a229_0x50b8ac(0x19b)](_0x5990fa,_0x2cbc6f){const _0x365422=a229_0x50b8ac;var _0x72b1a3,_0x3a7bf2;const _0x51a83c=new Date()[_0x365422(0x1c8)](),_0x660d88={};return!_0x2cbc6f?(this[_0x365422(0x197)]?(_0x660d88[constants_1[_0x365422(0x1c2)]+_0x365422(0x198)]=this[_0x365422(0x197)],_0x660d88[constants_1[_0x365422(0x1c2)]+'Source__c']='Branch',_0x660d88['RecordTypeId']=(_0x72b1a3=this[_0x365422(0x1c6)][_0x365422(0x1bc)](_0x21a4a4=>_0x21a4a4[_0x365422(0x1ae)]===_0x365422(0x17f)))===null||_0x72b1a3===void 0x0?void 0x0:_0x72b1a3['id']):(_0x660d88[constants_1[_0x365422(0x1c2)]+_0x365422(0x182)]=this[_0x365422(0x1bb)],_0x660d88[constants_1[_0x365422(0x1c2)]+_0x365422(0x17c)]=_0x365422(0x1d7),_0x660d88[_0x365422(0x19d)]=(_0x3a7bf2=this['recordTypes'][_0x365422(0x1bc)](_0x381ca7=>_0x381ca7[_0x365422(0x1ae)]==='Repository'))===null||_0x3a7bf2===void 0x0?void 0x0:_0x3a7bf2['id']),_0x660d88[constants_1['FLOSUM_NAMESPACE']+_0x365422(0x1a8)]=0x1):_0x660d88[constants_1[_0x365422(0x1c2)]+_0x365422(0x1a8)]=_0x2cbc6f['version']+0x1,_0x660d88[constants_1['FLOSUM_NAMESPACE']+_0x365422(0x17d)]=_0x5990fa[_0x365422(0x1b3)],_0x660d88[constants_1[_0x365422(0x1c2)]+'Component_Name__c']=_0x5990fa[_0x365422(0x1ae)],_0x660d88[constants_1[_0x365422(0x1c2)]+'File_Name__c']=_0x5990fa[_0x365422(0x199)],_0x660d88[constants_1[_0x365422(0x1c2)]+_0x365422(0x1b1)]=this[_0x365422(0x1bf)],_0x660d88[constants_1[_0x365422(0x1c2)]+'Last_Modified_By__c']=this[_0x365422(0x1bf)],_0x660d88[constants_1[_0x365422(0x1c2)]+_0x365422(0x18c)]=_0x51a83c,_0x660d88[constants_1[_0x365422(0x1c2)]+_0x365422(0x1d9)]=_0x51a83c,_0x660d88[constants_1[_0x365422(0x1c2)]+_0x365422(0x1b6)]=_0x5990fa[_0x365422(0x1c0)],_0x660d88;}[a229_0x50b8ac(0x190)](){const _0x327677=a229_0x50b8ac;return this[_0x327677(0x1d1)];}async[a229_0x50b8ac(0x180)](_0x9c3145,_0x15d1a2){const _0x5effed=a229_0x50b8ac,_0x4c7e4b=[];for(const _0xccdb17 of _0x9c3145){const _0x5ceb0d=(0x0,composite_utils_1[_0x5effed(0x1d6)])(constants_1[_0x5effed(0x1d2)],this['prepareComponentRecord'](_0xccdb17)),_0x518834=(0x0,composite_utils_1['createPostRequest'])(constants_1[_0x5effed(0x1c5)],this[_0x5effed(0x1b7)](_0xccdb17,'@{'+_0x5ceb0d[_0x5effed(0x1ba)]+_0x5effed(0x1b0))),_0x4e3033=(0x0,composite_utils_1[_0x5effed(0x1d6)])(constants_1[_0x5effed(0x1b4)],await this[_0x5effed(0x1da)](_0xccdb17,'@{'+_0x518834['reference']+_0x5effed(0x1b0)));this[_0x5effed(0x183)](_0x5ceb0d[_0x5effed(0x18d)]['body'],_0x5ceb0d[_0x5effed(0x1ba)]),_0x4c7e4b[_0x5effed(0x1aa)](_0x5ceb0d[_0x5effed(0x18d)],_0x518834['request'],_0x4e3033[_0x5effed(0x18d)]),_0x15d1a2&&_0x4c7e4b[_0x5effed(0x1aa)](this[_0x5effed(0x18a)](_0x15d1a2,'@{'+_0x518834[_0x5effed(0x1ba)]+_0x5effed(0x1b0)));}return _0x4c7e4b;}async['update'](_0x5c4c09,_0x46d2d3=''){const _0x4d9d1b=a229_0x50b8ac,_0x2eedef=[];for(const {component:_0x52780e,meta:_0x508726}of _0x5c4c09){if(!_0x508726['id']){const _0x3c7224=this[_0x4d9d1b(0x1d1)][_0x4d9d1b(0x1bc)](_0x271983=>_0x271983[_0x4d9d1b(0x1d0)]===_0x52780e['name']&&_0x271983[_0x4d9d1b(0x1ca)]===_0x52780e[_0x4d9d1b(0x1b3)]);if(!_0x3c7224)throw new salesforce_error_1[(_0x4d9d1b(0x1a5))](new Error(_0x4d9d1b(0x18f)+_0x52780e['name']+'\x20['+_0x52780e[_0x4d9d1b(0x1b3)]+']\x20-\x20meta\x20not\x20found'));_0x508726['id']=_0x3c7224[_0x4d9d1b(0x1cb)];}const _0x30290b=(0x0,composite_utils_1[_0x4d9d1b(0x196)])(constants_1[_0x4d9d1b(0x1d2)],_0x508726['id'],this['prepareComponentRecord'](_0x52780e,_0x508726)),_0x53093a=(0x0,composite_utils_1[_0x4d9d1b(0x1d6)])(constants_1['FLOSUM_COMPONENT_HISTORY'],this[_0x4d9d1b(0x1b7)](_0x52780e,_0x508726['id'],_0x508726[_0x4d9d1b(0x192)])),_0x3bf8e2=(0x0,composite_utils_1[_0x4d9d1b(0x1d6)])(constants_1[_0x4d9d1b(0x1b4)],await this[_0x4d9d1b(0x1da)](_0x52780e,'@{'+_0x53093a['reference']+'.id}'));this[_0x4d9d1b(0x183)](_0x30290b[_0x4d9d1b(0x18d)][_0x4d9d1b(0x1af)],_0x30290b['reference']),_0x2eedef[_0x4d9d1b(0x1aa)](_0x30290b['request'],_0x53093a[_0x4d9d1b(0x18d)],_0x3bf8e2[_0x4d9d1b(0x18d)]),_0x46d2d3&&_0x2eedef[_0x4d9d1b(0x1aa)](this[_0x4d9d1b(0x18a)](_0x46d2d3,'@{'+_0x53093a['reference']+_0x4d9d1b(0x1b0)));}return _0x2eedef;}async[a229_0x50b8ac(0x1b8)](_0x4b604d,_0x5ad006=![]){const _0x3ca545=a229_0x50b8ac,_0x225fb6={'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]},_0x536e2a=[];for(const _0x471dc7 of _0x4b604d){if(_0x471dc7['id'])_0x536e2a[_0x3ca545(0x1aa)](_0x471dc7['id']);else{const _0x305f40=this[_0x3ca545(0x1d1)][_0x3ca545(0x1bc)](_0x2601e1=>_0x2601e1[_0x3ca545(0x1d0)]===_0x471dc7['name']&&_0x2601e1[_0x3ca545(0x1ca)]===_0x471dc7[_0x3ca545(0x1b3)]);if(!_0x305f40||!_0x305f40[_0x3ca545(0x1cb)])continue;_0x536e2a[_0x3ca545(0x1aa)](_0x305f40['componentId']);}}if(_0x5ad006){const _0xd70f75=await this['gitSync'][_0x3ca545(0x188)](_0x536e2a);_0x225fb6['manifests']=_0xd70f75[_0x3ca545(0x1c9)](_0x29369d=>(0x0,composite_utils_1[_0x3ca545(0x1a7)])(constants_1['FLOSUM_COMMIT_MANIFEST'],_0x29369d)[_0x3ca545(0x18d)]);}return _0x225fb6[_0x3ca545(0x19a)]=_0x536e2a[_0x3ca545(0x1c9)](_0x1a8bc8=>(0x0,composite_utils_1[_0x3ca545(0x196)])(constants_1['FLOSUM_COMPONENT'],_0x1a8bc8,{[constants_1[_0x3ca545(0x1bd)]+_0x3ca545(0x1a4)]:!![]})['request']),_0x225fb6[_0x3ca545(0x1a2)]=_0x536e2a[_0x3ca545(0x1c9)](_0x298cf7=>(0x0,composite_utils_1[_0x3ca545(0x1a7)])(constants_1['FLOSUM_COMPONENT'],_0x298cf7)['request']),_0x225fb6;}}exports['SalesforceComponentsManager']=SalesforceComponentsManager;