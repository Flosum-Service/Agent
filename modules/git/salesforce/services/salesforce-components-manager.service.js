function a195_0x23ff(_0x108d36,_0x483fa6){const _0x179328=a195_0x5734();return a195_0x23ff=function(_0x4b0a04,_0x44a9eb){_0x4b0a04=_0x4b0a04-0x1a8;let _0x573468=_0x179328[_0x4b0a04];return _0x573468;},a195_0x23ff(_0x108d36,_0x483fa6);}const a195_0x21b00f=a195_0x23ff;(function(_0x5a705d,_0x553641){const _0x16dd70=a195_0x23ff,_0x48e0e1=_0x5a705d();while(!![]){try{const _0x54e48d=-parseInt(_0x16dd70(0x1a8))/0x1*(-parseInt(_0x16dd70(0x1d5))/0x2)+parseInt(_0x16dd70(0x1b9))/0x3*(parseInt(_0x16dd70(0x1bc))/0x4)+-parseInt(_0x16dd70(0x1fb))/0x5+parseInt(_0x16dd70(0x1f6))/0x6+-parseInt(_0x16dd70(0x207))/0x7*(-parseInt(_0x16dd70(0x1e7))/0x8)+parseInt(_0x16dd70(0x1b4))/0x9+-parseInt(_0x16dd70(0x205))/0xa;if(_0x54e48d===_0x553641)break;else _0x48e0e1['push'](_0x48e0e1['shift']());}catch(_0x21dec2){_0x48e0e1['push'](_0x48e0e1['shift']());}}}(a195_0x5734,0x25f2f));const a195_0x44a9eb=(function(){let _0x1bc1aa=!![];return function(_0x4d723b,_0x2051b3){const _0x12a5e4=_0x1bc1aa?function(){const _0xa5d097=a195_0x23ff;if(_0x2051b3){const _0x5d3200=_0x2051b3[_0xa5d097(0x1e8)](_0x4d723b,arguments);return _0x2051b3=null,_0x5d3200;}}:function(){};return _0x1bc1aa=![],_0x12a5e4;};}()),a195_0x4b0a04=a195_0x44a9eb(this,function(){const _0x2652a0=a195_0x23ff;return a195_0x4b0a04[_0x2652a0(0x1d0)]()['search'](_0x2652a0(0x1b5))[_0x2652a0(0x1d0)]()[_0x2652a0(0x1e3)](a195_0x4b0a04)[_0x2652a0(0x1b3)](_0x2652a0(0x1b5));});a195_0x4b0a04();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x50605a){const _0x484c34=a195_0x23ff;return _0x50605a&&_0x50605a[_0x484c34(0x1ca)]?_0x50605a:{'default':_0x50605a};};Object['defineProperty'](exports,a195_0x21b00f(0x1ca),{'value':!![]}),exports[a195_0x21b00f(0x1dc)]=void 0x0;const constants_1=require(a195_0x21b00f(0x1c0)),core_1=require(a195_0x21b00f(0x1bd)),zip_1=require('../../parsers/utils/zip'),typedi_1=__importDefault(require('typedi')),salesforce_error_1=require(a195_0x21b00f(0x1df)),composite_utils_1=require(a195_0x21b00f(0x1f5)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_git_sync_service_1=require(a195_0x21b00f(0x20e));class SalesforceComponentsManager{constructor(_0x4d0de1,_0x57aecd,_0x57ef8e,_0x33b82a,_0x12a821){const _0x2c4b6e=a195_0x21b00f;this[_0x2c4b6e(0x1f0)]=_0x4d0de1,this['branchId']=_0x57aecd,this['username']=_0x57ef8e,this[_0x2c4b6e(0x1f3)]=_0x33b82a,this['proceededComponentsMeta']=_0x12a821,this[_0x2c4b6e(0x1d3)]=new core_1[(_0x2c4b6e(0x1a9))](SalesforceComponentsManager[_0x2c4b6e(0x1d2)]),this[_0x2c4b6e(0x1ed)]=typedi_1[_0x2c4b6e(0x1f1)][_0x2c4b6e(0x1c5)](salesforce_git_sync_service_1[_0x2c4b6e(0x1e1)]);}['proceedComponentMeta'](_0x3ef6f4,_0x4a7a27){const _0x3d30c9=a195_0x21b00f,_0x2d0bd7=(0x0,flosum_naming_utils_1[_0x3d30c9(0x1fa)])(_0x3ef6f4,[_0x3d30c9(0x202),_0x3d30c9(0x1af),'Version__c']);this['proceededComponentsMeta'][_0x3d30c9(0x1b2)]({'componentId':'','reference':_0x4a7a27,'version':_0x2d0bd7[_0x3d30c9(0x1ba)],'componentName':_0x2d0bd7[_0x3d30c9(0x1af)],'componentType':_0x2d0bd7[_0x3d30c9(0x202)]});}[a195_0x21b00f(0x1e9)](_0x5c1488,_0x514c7c){const _0xf3588=a195_0x21b00f,{request:_0x164fc9}=(0x0,composite_utils_1[_0xf3588(0x1de)])(constants_1['FLOSUM_COMMIT_MANIFEST'],{[constants_1['FLOSUM_NAMESPACE']+_0xf3588(0x1ae)]:_0x5c1488,[constants_1[_0xf3588(0x1ec)]+_0xf3588(0x1e0)]:_0x514c7c});return _0x164fc9;}async[a195_0x21b00f(0x1c3)](_0x634859,_0x1bb4a0){const _0x596dd2=a195_0x21b00f,_0x555b80={},_0x458294=zip_1[_0x596dd2(0x1cf)][_0x596dd2(0x206)]();for(const _0x527991 of Object['keys'](_0x634859['files'])){_0x458294[_0x596dd2(0x1d8)](_0x527991,_0x634859[_0x596dd2(0x1da)][_0x527991],{'createFolders':!![]});}return _0x555b80['ContentType']=_0x596dd2(0x1ee),_0x555b80[_0x596dd2(0x1eb)]=_0x634859['type'],_0x555b80[_0x596dd2(0x1c7)]=_0x634859['type'],_0x555b80[_0x596dd2(0x209)]=_0x1bb4a0,_0x555b80[_0x596dd2(0x1b8)]=await _0x458294[_0x596dd2(0x20d)]({'type':_0x596dd2(0x1ef),'compression':_0x596dd2(0x1ad),'compressionOptions':{'level':0x6}}),_0x555b80;}[a195_0x21b00f(0x1d1)](_0x322391,_0x49b473,_0x351242){const _0x2b2027=a195_0x21b00f,_0x40470e=new Date()[_0x2b2027(0x1f9)](),_0x4f0ee9={};return _0x4f0ee9[constants_1['FLOSUM_NAMESPACE']+'Component__c']=_0x49b473,_0x4f0ee9[constants_1[_0x2b2027(0x1ec)]+_0x2b2027(0x1f8)]=_0x322391[_0x2b2027(0x1ce)],_0x4f0ee9[constants_1['FLOSUM_NAMESPACE']+'Changed_On__c']=_0x40470e,_0x4f0ee9[constants_1['FLOSUM_NAMESPACE']+_0x2b2027(0x1ab)]=this[_0x2b2027(0x1ac)],_0x4f0ee9[constants_1['FLOSUM_NAMESPACE']+_0x2b2027(0x1ba)]=_0x351242?_0x351242+0x1:0x1,_0x4f0ee9[constants_1[_0x2b2027(0x1bf)]+_0x2b2027(0x1cc)]=!![],_0x4f0ee9;}[a195_0x21b00f(0x1b0)](_0x354755,_0x44361f){const _0x174422=a195_0x21b00f;var _0x12de6c,_0x36d5b0;const _0x32e568=new Date()[_0x174422(0x1f9)](),_0x75560e={};return!_0x44361f?(this[_0x174422(0x1b6)]?(_0x75560e[constants_1[_0x174422(0x1ec)]+_0x174422(0x1e6)]=this[_0x174422(0x1b6)],_0x75560e[constants_1[_0x174422(0x1ec)]+'Source__c']=_0x174422(0x201),_0x75560e[_0x174422(0x1c2)]=(_0x12de6c=this[_0x174422(0x1f3)][_0x174422(0x1ea)](_0x57692e=>_0x57692e['name']===_0x174422(0x201)))===null||_0x12de6c===void 0x0?void 0x0:_0x12de6c['id']):(_0x75560e[constants_1['FLOSUM_NAMESPACE']+_0x174422(0x1b1)]=this[_0x174422(0x1f0)],_0x75560e[constants_1[_0x174422(0x1ec)]+_0x174422(0x1aa)]=_0x174422(0x20b),_0x75560e[_0x174422(0x1c2)]=(_0x36d5b0=this['recordTypes'][_0x174422(0x1ea)](_0x3b7c87=>_0x3b7c87[_0x174422(0x1d2)]==='Repository'))===null||_0x36d5b0===void 0x0?void 0x0:_0x36d5b0['id']),_0x75560e[constants_1[_0x174422(0x1ec)]+_0x174422(0x1ba)]=0x1):_0x75560e[constants_1[_0x174422(0x1ec)]+'Version__c']=_0x44361f[_0x174422(0x200)]+0x1,_0x75560e[constants_1[_0x174422(0x1ec)]+_0x174422(0x202)]=_0x354755[_0x174422(0x1f4)],_0x75560e[constants_1[_0x174422(0x1ec)]+'Component_Name__c']=_0x354755[_0x174422(0x1d2)],_0x75560e[constants_1[_0x174422(0x1ec)]+'File_Name__c']=_0x354755[_0x174422(0x1d9)],_0x75560e[constants_1[_0x174422(0x1ec)]+_0x174422(0x1f2)]=this[_0x174422(0x1ac)],_0x75560e[constants_1[_0x174422(0x1ec)]+'Last_Modified_By__c']=this[_0x174422(0x1ac)],_0x75560e[constants_1['FLOSUM_NAMESPACE']+_0x174422(0x1f7)]=_0x32e568,_0x75560e[constants_1['FLOSUM_NAMESPACE']+_0x174422(0x203)]=_0x32e568,_0x75560e[constants_1['FLOSUM_NAMESPACE']+'CRC32__c']=_0x354755[_0x174422(0x1ce)],_0x75560e;}[a195_0x21b00f(0x1cd)](){const _0x4f93c6=a195_0x21b00f;return this[_0x4f93c6(0x1d6)];}async[a195_0x21b00f(0x1db)](_0x121543,_0x39515c){const _0x2893e6=a195_0x21b00f,_0x3c209c=[];for(const _0x38f9c4 of _0x121543){const _0x27554c=(0x0,composite_utils_1[_0x2893e6(0x1de)])(constants_1['FLOSUM_COMPONENT'],this['prepareComponentRecord'](_0x38f9c4)),_0x5e9dc4=(0x0,composite_utils_1[_0x2893e6(0x1de)])(constants_1[_0x2893e6(0x1e4)],this['prepareComponentHistoryRecord'](_0x38f9c4,'@{'+_0x27554c[_0x2893e6(0x20c)]+_0x2893e6(0x1ff))),_0x350865=(0x0,composite_utils_1[_0x2893e6(0x1de)])(constants_1['FLOSUM_ATTACHMENT'],await this[_0x2893e6(0x1c3)](_0x38f9c4,'@{'+_0x5e9dc4[_0x2893e6(0x20c)]+_0x2893e6(0x1ff)));this[_0x2893e6(0x20a)](_0x27554c[_0x2893e6(0x1e2)][_0x2893e6(0x1fc)],_0x27554c[_0x2893e6(0x20c)]),_0x3c209c['push'](_0x27554c[_0x2893e6(0x1e2)],_0x5e9dc4['request'],_0x350865['request']),_0x39515c&&_0x3c209c[_0x2893e6(0x1b2)](this[_0x2893e6(0x1e9)](_0x39515c,'@{'+_0x5e9dc4[_0x2893e6(0x20c)]+'.id}'));}return _0x3c209c;}async['update'](_0x4da30e,_0x315082=''){const _0x5e9af7=a195_0x21b00f,_0x31bb53=[];for(const {component:_0x3f8809,meta:_0x38c958}of _0x4da30e){if(!_0x38c958['id']){const _0x258394=this[_0x5e9af7(0x1d6)][_0x5e9af7(0x1ea)](_0x50e554=>_0x50e554[_0x5e9af7(0x1c1)]===_0x3f8809[_0x5e9af7(0x1d2)]&&_0x50e554[_0x5e9af7(0x1b7)]===_0x3f8809['type']);if(!_0x258394)throw new salesforce_error_1['SalesforceError'](new Error(_0x5e9af7(0x1e5)+_0x3f8809[_0x5e9af7(0x1d2)]+'\x20['+_0x3f8809[_0x5e9af7(0x1f4)]+_0x5e9af7(0x1d7)));_0x38c958['id']=_0x258394['componentId'];}const _0x322aa9=(0x0,composite_utils_1[_0x5e9af7(0x1c9)])(constants_1['FLOSUM_COMPONENT'],_0x38c958['id'],this['prepareComponentRecord'](_0x3f8809,_0x38c958)),_0x1468e6=(0x0,composite_utils_1[_0x5e9af7(0x1de)])(constants_1[_0x5e9af7(0x1e4)],this[_0x5e9af7(0x1d1)](_0x3f8809,_0x38c958['id'],_0x38c958[_0x5e9af7(0x200)])),_0x215a39=(0x0,composite_utils_1[_0x5e9af7(0x1de)])(constants_1[_0x5e9af7(0x1fe)],await this[_0x5e9af7(0x1c3)](_0x3f8809,'@{'+_0x1468e6['reference']+_0x5e9af7(0x1ff)));this[_0x5e9af7(0x20a)](_0x322aa9[_0x5e9af7(0x1e2)][_0x5e9af7(0x1fc)],_0x322aa9[_0x5e9af7(0x20c)]),_0x31bb53[_0x5e9af7(0x1b2)](_0x322aa9[_0x5e9af7(0x1e2)],_0x1468e6['request'],_0x215a39[_0x5e9af7(0x1e2)]),_0x315082&&_0x31bb53['push'](this['prepareCommitManifest'](_0x315082,'@{'+_0x1468e6['reference']+_0x5e9af7(0x1ff)));}return _0x31bb53;}async[a195_0x21b00f(0x1be)](_0x159639,_0x5edcdc=![]){const _0x5b3147=a195_0x21b00f,_0x437a96={'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]},_0x3b62bb=[];for(const _0x229f57 of _0x159639){if(_0x229f57['id'])_0x3b62bb['push'](_0x229f57['id']);else{const _0x12cfe7=this[_0x5b3147(0x1d6)][_0x5b3147(0x1ea)](_0x5e78c2=>_0x5e78c2['componentName']===_0x229f57[_0x5b3147(0x1d2)]&&_0x5e78c2[_0x5b3147(0x1b7)]===_0x229f57[_0x5b3147(0x1f4)]);if(!_0x12cfe7||!_0x12cfe7[_0x5b3147(0x1dd)])continue;_0x3b62bb['push'](_0x12cfe7[_0x5b3147(0x1dd)]);}}if(_0x5edcdc){const _0x4b5216=await this['gitSync'][_0x5b3147(0x1c4)](_0x3b62bb);_0x437a96[_0x5b3147(0x1c6)]=_0x4b5216[_0x5b3147(0x1d4)](_0x16d4ce=>(0x0,composite_utils_1[_0x5b3147(0x1bb)])(constants_1[_0x5b3147(0x1c8)],_0x16d4ce)[_0x5b3147(0x1e2)]);}return _0x437a96[_0x5b3147(0x1fd)]=_0x3b62bb[_0x5b3147(0x1d4)](_0x44943a=>(0x0,composite_utils_1[_0x5b3147(0x1c9)])(constants_1['FLOSUM_COMPONENT'],_0x44943a,{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x5b3147(0x208)]:!![]})[_0x5b3147(0x1e2)]),_0x437a96[_0x5b3147(0x204)]=_0x3b62bb[_0x5b3147(0x1d4)](_0xe5b42=>(0x0,composite_utils_1[_0x5b3147(0x1bb)])(constants_1[_0x5b3147(0x1cb)],_0xe5b42)[_0x5b3147(0x1e2)]),_0x437a96;}}function a195_0x5734(){const _0xab21f3=['RecordTypeId','prepareComponentAttachmentRecord','fetchCommitManifestsByComponentIds','get','manifests','Description','FLOSUM_COMMIT_MANIFEST','createPatchRequest','__esModule','FLOSUM_COMPONENT','Is_From_Agent__c','getProceededComponentsMeta','crc','Zip','toString','prepareComponentHistoryRecord','name','logger','map','2zRxKaD','proceededComponentsMeta',']\x20-\x20meta\x20not\x20found','file','filePath','files','insert','SalesforceComponentsManager','componentId','createPostRequest','../errors/salesforce.error','Component_History__c','SalesforceGitSyncService','request','constructor','FLOSUM_COMPONENT_HISTORY','Could\x20not\x20proceed\x20component\x20','Branch__c','120agZQFn','apply','prepareCommitManifest','find','Name','FLOSUM_NAMESPACE','gitSync','application/zip','base64','repositoryId','default','Last_Updated_By__c','recordTypes','type','../utils/composite.utils','1091574TpyvYj','Last_Modified_Date__c','CRC32__c','toISOString','extractFieldsFromRecord','18160bpXJee','body','componentsToUpdate','FLOSUM_ATTACHMENT','.id}','version','Branch','Component_Type__c','Committed_On__c','componentsToDelete','5933280JTNTYz','createZip','64792WRvMwX','Deletion_By_Agent__c','ParentId','proceedComponentMeta','Repository','reference','generateAsync','./salesforce-git-sync.service','106009UViXUN','Logger','Source__c','Changed_By__c','username','DEFLATE','Commit__c','Component_Name__c','prepareComponentRecord','Repository__c','push','search','226197fChnGW','(((.+)+)+)+$','branchId','componentType','Body','24ijcPEj','Version__c','createDeleteRequest','150244uaDELm','../../../../core','delete','FLOSUM_GIT_NAMESPACE','../../../../constants','componentName'];a195_0x5734=function(){return _0xab21f3;};return a195_0x5734();}exports['SalesforceComponentsManager']=SalesforceComponentsManager;