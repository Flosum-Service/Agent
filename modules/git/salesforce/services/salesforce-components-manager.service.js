function a234_0x103d(_0x27581b,_0x290b15){const _0x4c6882=a234_0x46f4();return a234_0x103d=function(_0xeb4433,_0x2a70b9){_0xeb4433=_0xeb4433-0x19a;let _0x46f4f1=_0x4c6882[_0xeb4433];return _0x46f4f1;},a234_0x103d(_0x27581b,_0x290b15);}const a234_0x5ec68d=a234_0x103d;(function(_0x151984,_0x2b5514){const _0x1ba757=a234_0x103d,_0x23cf76=_0x151984();while(!![]){try{const _0x3a1fb7=parseInt(_0x1ba757(0x1e2))/0x1+-parseInt(_0x1ba757(0x1d8))/0x2+parseInt(_0x1ba757(0x1b7))/0x3+parseInt(_0x1ba757(0x1bf))/0x4+parseInt(_0x1ba757(0x1fc))/0x5+-parseInt(_0x1ba757(0x1da))/0x6+parseInt(_0x1ba757(0x1f5))/0x7*(-parseInt(_0x1ba757(0x1cf))/0x8);if(_0x3a1fb7===_0x2b5514)break;else _0x23cf76['push'](_0x23cf76['shift']());}catch(_0x3a0ee1){_0x23cf76['push'](_0x23cf76['shift']());}}}(a234_0x46f4,0xafd53));const a234_0x2a70b9=(function(){let _0x421911=!![];return function(_0x1168a0,_0xed9cba){const _0x2461cf=_0x421911?function(){if(_0xed9cba){const _0x4d2888=_0xed9cba['apply'](_0x1168a0,arguments);return _0xed9cba=null,_0x4d2888;}}:function(){};return _0x421911=![],_0x2461cf;};}()),a234_0xeb4433=a234_0x2a70b9(this,function(){const _0x2866f0=a234_0x103d;return a234_0xeb4433[_0x2866f0(0x1cc)]()[_0x2866f0(0x1c5)](_0x2866f0(0x1d5))[_0x2866f0(0x1cc)]()[_0x2866f0(0x1eb)](a234_0xeb4433)[_0x2866f0(0x1c5)](_0x2866f0(0x1d5));});a234_0xeb4433();'use strict';var __importDefault=this&&this[a234_0x5ec68d(0x1bd)]||function(_0x5b50e8){const _0x33eb6e=a234_0x5ec68d;return _0x5b50e8&&_0x5b50e8[_0x33eb6e(0x1a2)]?_0x5b50e8:{'default':_0x5b50e8};};Object[a234_0x5ec68d(0x1f0)](exports,a234_0x5ec68d(0x1a2),{'value':!![]}),exports[a234_0x5ec68d(0x1c6)]=void 0x0;const constants_1=require(a234_0x5ec68d(0x1b6)),core_1=require('../../../../core'),zip_1=require(a234_0x5ec68d(0x1e3)),typedi_1=__importDefault(require(a234_0x5ec68d(0x1c4))),salesforce_error_1=require(a234_0x5ec68d(0x1e4)),composite_utils_1=require(a234_0x5ec68d(0x1ca)),flosum_naming_utils_1=require(a234_0x5ec68d(0x1bb)),salesforce_git_sync_service_1=require(a234_0x5ec68d(0x1c9));class SalesforceComponentsManager{constructor(_0x4b018b,_0x385e4d,_0x479cfe,_0x8fa38c,_0x296d48){const _0x4824d6=a234_0x5ec68d;this['repositoryId']=_0x4b018b,this[_0x4824d6(0x1db)]=_0x385e4d,this[_0x4824d6(0x1dc)]=_0x479cfe,this[_0x4824d6(0x1dd)]=_0x8fa38c,this['proceededComponentsMeta']=_0x296d48,this[_0x4824d6(0x1ff)]=new core_1['Logger'](SalesforceComponentsManager[_0x4824d6(0x1b2)]),this['gitSync']=typedi_1[_0x4824d6(0x1b9)][_0x4824d6(0x1e7)](salesforce_git_sync_service_1['SalesforceGitSyncService']);}[a234_0x5ec68d(0x1be)](_0x3a4211,_0x3e3ce8){const _0x5321e8=a234_0x5ec68d,_0x4c378a=(0x0,flosum_naming_utils_1[_0x5321e8(0x1ce)])(_0x3a4211,[_0x5321e8(0x1f2),'Component_Name__c','Version__c']);this['proceededComponentsMeta'][_0x5321e8(0x1aa)]({'componentId':'','reference':_0x3e3ce8,'version':_0x4c378a[_0x5321e8(0x1c3)],'componentName':_0x4c378a[_0x5321e8(0x1a5)],'componentType':_0x4c378a[_0x5321e8(0x1f2)]});}['prepareCommitManifest'](_0x5c21c0,_0x30b24c){const _0x36fe37=a234_0x5ec68d,{request:_0x5f5c7b}=(0x0,composite_utils_1[_0x36fe37(0x1f8)])(constants_1['FLOSUM_COMMIT_MANIFEST'],{[constants_1['FLOSUM_NAMESPACE']+'Commit__c']:_0x5c21c0,[constants_1[_0x36fe37(0x1d1)]+'Component_History__c']:_0x30b24c});return _0x5f5c7b;}async[a234_0x5ec68d(0x1a7)](_0x3227dd,_0xbc0eb7){const _0x5511aa=a234_0x5ec68d,_0x22e56c={},_0x2160c9=zip_1[_0x5511aa(0x1ed)][_0x5511aa(0x201)]();for(const _0x523502 of Object[_0x5511aa(0x1ef)](_0x3227dd[_0x5511aa(0x1a9)])){_0x2160c9[_0x5511aa(0x1d3)](_0x523502,_0x3227dd[_0x5511aa(0x1a9)][_0x523502],{'createFolders':!![]});}return _0x22e56c[_0x5511aa(0x1b4)]=_0x5511aa(0x1d6),_0x22e56c[_0x5511aa(0x1fd)]=_0x3227dd[_0x5511aa(0x1cd)],_0x22e56c[_0x5511aa(0x1d7)]=_0x3227dd[_0x5511aa(0x1cd)],_0x22e56c[_0x5511aa(0x1ea)]=_0xbc0eb7,_0x22e56c[_0x5511aa(0x1ad)]=await _0x2160c9[_0x5511aa(0x1fb)]({'type':_0x5511aa(0x1e0),'compression':_0x5511aa(0x1fa),'compressionOptions':{'level':0x6}}),_0x22e56c;}[a234_0x5ec68d(0x1b1)](_0x8349e8,_0x2022d9,_0x12e189){const _0x370175=a234_0x5ec68d,_0x2b94da=new Date()[_0x370175(0x1a1)](),_0x264c71={};return _0x264c71[constants_1[_0x370175(0x1d1)]+'Component__c']=_0x2022d9,_0x264c71[constants_1[_0x370175(0x1d1)]+_0x370175(0x19a)]=_0x8349e8[_0x370175(0x1f4)],_0x264c71[constants_1[_0x370175(0x1d1)]+'Changed_On__c']=_0x2b94da,_0x264c71[constants_1[_0x370175(0x1d1)]+'Changed_By__c']=this[_0x370175(0x1dc)],_0x264c71[constants_1['FLOSUM_NAMESPACE']+_0x370175(0x1c3)]=_0x12e189?_0x12e189+0x1:0x1,_0x264c71[constants_1[_0x370175(0x1f6)]+_0x370175(0x1e8)]=!![],_0x264c71;}[a234_0x5ec68d(0x1ae)](_0x18278b,_0x15817b){const _0x59a2c3=a234_0x5ec68d;var _0x397afa,_0x3d86a3;const _0x143fb0=new Date()[_0x59a2c3(0x1a1)](),_0x473d94={};return!_0x15817b?(this['branchId']?(_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1e1)]=this['branchId'],_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1ab)]='Branch',_0x473d94[_0x59a2c3(0x1a0)]=(_0x397afa=this[_0x59a2c3(0x1dd)][_0x59a2c3(0x1f9)](_0x3af106=>_0x3af106[_0x59a2c3(0x1b2)]===_0x59a2c3(0x1f7)))===null||_0x397afa===void 0x0?void 0x0:_0x397afa['id']):(_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1f1)]=this[_0x59a2c3(0x1c2)],_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1ab)]=_0x59a2c3(0x1cb),_0x473d94[_0x59a2c3(0x1a0)]=(_0x3d86a3=this[_0x59a2c3(0x1dd)]['find'](_0x47d1ec=>_0x47d1ec['name']===_0x59a2c3(0x1cb)))===null||_0x3d86a3===void 0x0?void 0x0:_0x3d86a3['id']),_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1c3)]=0x1):_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1c3)]=_0x15817b[_0x59a2c3(0x1b3)]+0x1,_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1f2)]=_0x18278b[_0x59a2c3(0x1cd)],_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1a5)]=_0x18278b[_0x59a2c3(0x1b2)],_0x473d94[constants_1[_0x59a2c3(0x1d1)]+'File_Name__c']=_0x18278b[_0x59a2c3(0x1d4)],_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1e6)]=this[_0x59a2c3(0x1dc)],_0x473d94[constants_1[_0x59a2c3(0x1d1)]+'Last_Modified_By__c']=this[_0x59a2c3(0x1dc)],_0x473d94[constants_1['FLOSUM_NAMESPACE']+_0x59a2c3(0x1e9)]=_0x143fb0,_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1bc)]=_0x143fb0,_0x473d94[constants_1[_0x59a2c3(0x1d1)]+'CRC32__c']=_0x18278b['crc'],_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1ee)]=_0x18278b[_0x59a2c3(0x1a8)],_0x473d94[constants_1[_0x59a2c3(0x1d1)]+_0x59a2c3(0x1de)]=_0x18278b[_0x59a2c3(0x1f3)],_0x473d94;}[a234_0x5ec68d(0x19f)](){const _0x4942d7=a234_0x5ec68d;return this[_0x4942d7(0x1df)];}async['insert'](_0x275fea,_0x3a4a19){const _0x1eb0c3=a234_0x5ec68d,_0x43668c=[];for(const _0x17b7d9 of _0x275fea){const _0x670766=(0x0,composite_utils_1['createPostRequest'])(constants_1[_0x1eb0c3(0x1b0)],this[_0x1eb0c3(0x1ae)](_0x17b7d9)),_0x205b65=(0x0,composite_utils_1[_0x1eb0c3(0x1f8)])(constants_1[_0x1eb0c3(0x1b8)],this[_0x1eb0c3(0x1b1)](_0x17b7d9,'@{'+_0x670766['reference']+_0x1eb0c3(0x19b))),_0x57d8bf=(0x0,composite_utils_1[_0x1eb0c3(0x1f8)])(constants_1['FLOSUM_ATTACHMENT'],await this[_0x1eb0c3(0x1a7)](_0x17b7d9,'@{'+_0x205b65[_0x1eb0c3(0x1d9)]+_0x1eb0c3(0x19b)));this[_0x1eb0c3(0x1be)](_0x670766[_0x1eb0c3(0x1ac)][_0x1eb0c3(0x200)],_0x670766[_0x1eb0c3(0x1d9)]),_0x43668c['push'](_0x670766[_0x1eb0c3(0x1ac)],_0x205b65[_0x1eb0c3(0x1ac)],_0x57d8bf['request']),_0x3a4a19&&_0x43668c[_0x1eb0c3(0x1aa)](this['prepareCommitManifest'](_0x3a4a19,'@{'+_0x205b65[_0x1eb0c3(0x1d9)]+_0x1eb0c3(0x19b)));}return _0x43668c;}async[a234_0x5ec68d(0x1c1)](_0x13af23,_0x18bd9f=''){const _0x4f639c=a234_0x5ec68d,_0x4cb18c=[];for(const {component:_0x8c89bf,meta:_0x56c952}of _0x13af23){if(!_0x56c952['id']){const _0x56c0e1=this['proceededComponentsMeta'][_0x4f639c(0x1f9)](_0x5d0ae0=>_0x5d0ae0[_0x4f639c(0x19d)]===_0x8c89bf[_0x4f639c(0x1b2)]&&_0x5d0ae0[_0x4f639c(0x1b5)]===_0x8c89bf[_0x4f639c(0x1cd)]);if(!_0x56c0e1)throw new salesforce_error_1[(_0x4f639c(0x202))](new Error(_0x4f639c(0x1c0)+_0x8c89bf[_0x4f639c(0x1b2)]+'\x20['+_0x8c89bf[_0x4f639c(0x1cd)]+_0x4f639c(0x19c)));_0x56c952['id']=_0x56c0e1[_0x4f639c(0x1ba)];}const _0x198f95=(0x0,composite_utils_1[_0x4f639c(0x1af)])(constants_1['FLOSUM_COMPONENT'],_0x56c952['id'],this[_0x4f639c(0x1ae)](_0x8c89bf,_0x56c952)),_0x17a218=(0x0,composite_utils_1['createPostRequest'])(constants_1[_0x4f639c(0x1b8)],this[_0x4f639c(0x1b1)](_0x8c89bf,_0x56c952['id'],_0x56c952[_0x4f639c(0x1b3)])),_0x10c5f2=(0x0,composite_utils_1['createPostRequest'])(constants_1[_0x4f639c(0x1ec)],await this['prepareComponentAttachmentRecord'](_0x8c89bf,'@{'+_0x17a218[_0x4f639c(0x1d9)]+'.id}'));this[_0x4f639c(0x1be)](_0x198f95[_0x4f639c(0x1ac)][_0x4f639c(0x200)],_0x198f95['reference']),_0x4cb18c['push'](_0x198f95['request'],_0x17a218[_0x4f639c(0x1ac)],_0x10c5f2[_0x4f639c(0x1ac)]),_0x18bd9f&&_0x4cb18c[_0x4f639c(0x1aa)](this[_0x4f639c(0x1fe)](_0x18bd9f,'@{'+_0x17a218['reference']+'.id}'));}return _0x4cb18c;}async[a234_0x5ec68d(0x1a6)](_0x5dbf78,_0x4728ff=![]){const _0x2c8295=a234_0x5ec68d,_0x52bdc1={'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]},_0x552833=[];for(const _0x125379 of _0x5dbf78){if(_0x125379['id'])_0x552833[_0x2c8295(0x1aa)](_0x125379['id']);else{const _0x3dead6=this[_0x2c8295(0x1df)][_0x2c8295(0x1f9)](_0x36f90d=>_0x36f90d[_0x2c8295(0x19d)]===_0x125379[_0x2c8295(0x1b2)]&&_0x36f90d[_0x2c8295(0x1b5)]===_0x125379['type']);if(!_0x3dead6||!_0x3dead6[_0x2c8295(0x1ba)])continue;_0x552833['push'](_0x3dead6[_0x2c8295(0x1ba)]);}}if(_0x4728ff){const _0x318b79=await this['gitSync'][_0x2c8295(0x1a4)](_0x552833);_0x52bdc1[_0x2c8295(0x1d0)]=_0x318b79[_0x2c8295(0x1e5)](_0x19b2e2=>(0x0,composite_utils_1[_0x2c8295(0x1c8)])(constants_1[_0x2c8295(0x19e)],_0x19b2e2)[_0x2c8295(0x1ac)]);}return _0x52bdc1[_0x2c8295(0x1d2)]=_0x552833[_0x2c8295(0x1e5)](_0x2b5528=>(0x0,composite_utils_1[_0x2c8295(0x1af)])(constants_1[_0x2c8295(0x1b0)],_0x2b5528,{[constants_1[_0x2c8295(0x1f6)]+_0x2c8295(0x1c7)]:!![]})[_0x2c8295(0x1ac)]),_0x52bdc1[_0x2c8295(0x1a3)]=_0x552833[_0x2c8295(0x1e5)](_0x995a8c=>(0x0,composite_utils_1[_0x2c8295(0x1c8)])(constants_1[_0x2c8295(0x1b0)],_0x995a8c)['request']),_0x52bdc1;}}function a234_0x46f4(){const _0x1eed0d=['../../parsers/utils/zip','../errors/salesforce.error','map','Last_Updated_By__c','get','Is_From_Agent__c','Last_Modified_Date__c','ParentId','constructor','FLOSUM_ATTACHMENT','Zip','Vlocity_Component_Name__c','keys','defineProperty','Repository__c','Component_Type__c','isVlocityComponent','crc','35yMWMUH','FLOSUM_GIT_NAMESPACE','Branch','createPostRequest','find','DEFLATE','generateAsync','384445wMPgOy','Name','prepareCommitManifest','logger','body','createZip','SalesforceError','CRC32__c','.id}',']\x20-\x20meta\x20not\x20found','componentName','FLOSUM_COMMIT_MANIFEST','getProceededComponentsMeta','RecordTypeId','toISOString','__esModule','componentsToDelete','fetchCommitManifestsByComponentIds','Component_Name__c','delete','prepareComponentAttachmentRecord','vlocityComponentName','files','push','Source__c','request','Body','prepareComponentRecord','createPatchRequest','FLOSUM_COMPONENT','prepareComponentHistoryRecord','name','version','ContentType','componentType','../../../../constants','1986543iayqgj','FLOSUM_COMPONENT_HISTORY','default','componentId','../utils/flosum-naming.utils','Committed_On__c','__importDefault','proceedComponentMeta','2679284cWvmvU','Could\x20not\x20proceed\x20component\x20','update','repositoryId','Version__c','typedi','search','SalesforceComponentsManager','Deletion_By_Agent__c','createDeleteRequest','./salesforce-git-sync.service','../utils/composite.utils','Repository','toString','type','extractFieldsFromRecord','326080emDWBs','manifests','FLOSUM_NAMESPACE','componentsToUpdate','file','filePath','(((.+)+)+)+$','application/zip','Description','1605574ZgMHIP','reference','3877380UuMpDC','branchId','username','recordTypes','Vlocity_Component__c','proceededComponentsMeta','base64','Branch__c','964137mZnwsc'];a234_0x46f4=function(){return _0x1eed0d;};return a234_0x46f4();}exports[a234_0x5ec68d(0x1c6)]=SalesforceComponentsManager;