function a238_0x1cd8(){const _0x325844=['getRepositoryRecord','FLOSUM_NAMESPACE','getComponentsFromRepository','12MBRoeX','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','Components__r','\x20not\x20found\x20on\x20salesforce','fromRepositoryRecord','GET_COMPONENTS_QUERY','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','getBranchRecord','Name','decorate','7027174Pvbklc','defineProperty','GET_BRANCH_BY_NAME_QUERY','1243251UqQxzP','Attachment','94602EolTMa','createObject','1228362mojCla','setStatus','salesforceQuery','Synchronization_Status__c','20AaaOye','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','text/plain','push','\x0a\x20\x20\x20\x20\x20\x20','../../../../constants','repositoryId','query','patchObject','getRepositoryRecords','2183994jlXXOf','getAllRepositoryNames','length','FLOSUM_GIT_NAMESPACE','objectType','__decorate','toString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','encodeBase64','../queries','Branch_Name__c','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Repository\x20with\x20Id\x20','design:paramtypes','Repository__r','getBranchComponents','getRepositoryRecordByName','Service','replace','../dto/flosum-repository-sync.dto','catch','GET_WAITING_BRANCHES_QUERY','stringify','GET_BRANCH_QUERY','GET_REPOSITORIES_NAMES_QUERY','../../../../constants/errors','7lvtfRp','getAttachmentId','SalesforceNotFoundError','metadata','./salesforce.service','constructor','SalesforceSyncService','FlosumRepositorySyncDto','157212NuVUQf','map','ERR_INVALID_ATTACHMENT_ID','function','5Kjqkho','salesforceService','getOwnPropertyDescriptor','disableSync','object','getRemoteStateAttachmentId','%name%','Branch\x20','./salesforce-query.service','Connection__c','SalesforceService','../../../shared/utils','%id%','../errors/not-found.error','objectId','4wmrErF','GET_REPOSITORY_QUERY','(((.+)+)+)+$','getComponents','GET_WAITING_REPOSITORIES_QUERY','1599160lQhvjy','Repository\x20','fromBranchRecord','search','typedi'];a238_0x1cd8=function(){return _0x325844;};return a238_0x1cd8();}const a238_0x375e9b=a238_0x4f07;(function(_0x364e68,_0x321ab3){const _0x10d053=a238_0x4f07,_0x465f27=_0x364e68();while(!![]){try{const _0x222cb0=-parseInt(_0x10d053(0x1ed))/0x1*(parseInt(_0x10d053(0x1a8))/0x2)+-parseInt(_0x10d053(0x1aa))/0x3+-parseInt(_0x10d053(0x1da))/0x4+parseInt(_0x10d053(0x1de))/0x5*(parseInt(_0x10d053(0x1b8))/0x6)+parseInt(_0x10d053(0x1d2))/0x7*(-parseInt(_0x10d053(0x1f2))/0x8)+-parseInt(_0x10d053(0x1a6))/0x9*(-parseInt(_0x10d053(0x1ae))/0xa)+parseInt(_0x10d053(0x1a3))/0xb*(parseInt(_0x10d053(0x1fa))/0xc);if(_0x222cb0===_0x321ab3)break;else _0x465f27['push'](_0x465f27['shift']());}catch(_0x220fa0){_0x465f27['push'](_0x465f27['shift']());}}}(a238_0x1cd8,0x6bba7));const a238_0x2c9a76=(function(){let _0xa4c1a5=!![];return function(_0x37baeb,_0xa1cce5){const _0x56e197=_0xa4c1a5?function(){if(_0xa1cce5){const _0x26d96c=_0xa1cce5['apply'](_0x37baeb,arguments);return _0xa1cce5=null,_0x26d96c;}}:function(){};return _0xa4c1a5=![],_0x56e197;};}()),a238_0x530aee=a238_0x2c9a76(this,function(){const _0x4467e0=a238_0x4f07;return a238_0x530aee[_0x4467e0(0x1be)]()[_0x4467e0(0x1f5)](_0x4467e0(0x1ef))[_0x4467e0(0x1be)]()[_0x4467e0(0x1d7)](a238_0x530aee)[_0x4467e0(0x1f5)](_0x4467e0(0x1ef));});a238_0x530aee();'use strict';var __decorate=this&&this[a238_0x375e9b(0x1bd)]||function(_0x3011ba,_0x1601bb,_0x10749b,_0x459e4a){const _0x3ecb23=a238_0x375e9b;var _0x4ddb4a=arguments[_0x3ecb23(0x1ba)],_0xf2c699=_0x4ddb4a<0x3?_0x1601bb:_0x459e4a===null?_0x459e4a=Object[_0x3ecb23(0x1e0)](_0x1601bb,_0x10749b):_0x459e4a,_0x174fa3;if(typeof Reflect===_0x3ecb23(0x1e2)&&typeof Reflect[_0x3ecb23(0x1a2)]===_0x3ecb23(0x1dd))_0xf2c699=Reflect[_0x3ecb23(0x1a2)](_0x3011ba,_0x1601bb,_0x10749b,_0x459e4a);else{for(var _0x31fc30=_0x3011ba[_0x3ecb23(0x1ba)]-0x1;_0x31fc30>=0x0;_0x31fc30--)if(_0x174fa3=_0x3011ba[_0x31fc30])_0xf2c699=(_0x4ddb4a<0x3?_0x174fa3(_0xf2c699):_0x4ddb4a>0x3?_0x174fa3(_0x1601bb,_0x10749b,_0xf2c699):_0x174fa3(_0x1601bb,_0x10749b))||_0xf2c699;}return _0x4ddb4a>0x3&&_0xf2c699&&Object['defineProperty'](_0x1601bb,_0x10749b,_0xf2c699),_0xf2c699;},__metadata=this&&this['__metadata']||function(_0x5822b6,_0x161d27){const _0x1fc7bb=a238_0x375e9b;if(typeof Reflect===_0x1fc7bb(0x1e2)&&typeof Reflect['metadata']===_0x1fc7bb(0x1dd))return Reflect[_0x1fc7bb(0x1d5)](_0x5822b6,_0x161d27);};function a238_0x4f07(_0x211a8b,_0x3b33cf){const _0x4c15bd=a238_0x1cd8();return a238_0x4f07=function(_0x530aee,_0x2c9a76){_0x530aee=_0x530aee-0x1a2;let _0x1cd84b=_0x4c15bd[_0x530aee];return _0x1cd84b;},a238_0x4f07(_0x211a8b,_0x3b33cf);}Object[a238_0x375e9b(0x1a4)](exports,'__esModule',{'value':!![]}),exports[a238_0x375e9b(0x1d8)]=void 0x0;const typedi_1=require(a238_0x375e9b(0x1f6)),constants_1=require(a238_0x375e9b(0x1b3)),errors_1=require(a238_0x375e9b(0x1d1)),utils_1=require(a238_0x375e9b(0x1e9)),flosum_repository_sync_dto_1=require(a238_0x375e9b(0x1cb)),not_found_error_1=require(a238_0x375e9b(0x1eb)),queries_1=require(a238_0x375e9b(0x1c1)),salesforce_query_service_1=require(a238_0x375e9b(0x1e6)),salesforce_service_1=require(a238_0x375e9b(0x1d6));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x1d9f2e,_0x40da9e){const _0x209487=a238_0x375e9b;this['salesforceQuery']=_0x1d9f2e,this[_0x209487(0x1df)]=_0x40da9e;}async[a238_0x375e9b(0x1f0)](_0x1528dc){const _0x914064=a238_0x375e9b;var _0x334946;const _0x452990=await this[_0x914064(0x1ac)][_0x914064(0x1b5)](_0x1528dc),_0x1b0c5c=[];for(const _0x552ecc of _0x452990){const _0x2c1e2c=(_0x334946=_0x552ecc[constants_1[_0x914064(0x1f8)]+_0x914064(0x1fc)])===null||_0x334946===void 0x0?void 0x0:_0x334946['records'];_0x2c1e2c&&_0x2c1e2c[_0x914064(0x1ba)]&&_0x1b0c5c[_0x914064(0x1b1)](_0x2c1e2c[0x0]['Id']);}return _0x1b0c5c;}async[a238_0x375e9b(0x1b9)](_0x2789ac){const _0x494b3f=a238_0x375e9b,_0x33c1b6=await this['salesforceQuery'][_0x494b3f(0x1b5)](queries_1[_0x494b3f(0x1d0)][_0x494b3f(0x1ca)](/\%connection_id\%/g,_0x2789ac));return _0x33c1b6[_0x494b3f(0x1db)](_0x234e86=>{const _0x34eae=_0x494b3f;return _0x234e86[constants_1[_0x34eae(0x1bb)]+_0x34eae(0x1c6)]?_0x234e86[constants_1[_0x34eae(0x1bb)]+_0x34eae(0x1c6)][_0x34eae(0x202)]:_0x234e86[_0x34eae(0x202)];});}async[a238_0x375e9b(0x1b7)](_0x5057e3){const _0x4afa80=a238_0x375e9b,_0x25be50=await this[_0x4afa80(0x1ac)][_0x4afa80(0x1b5)](queries_1[_0x4afa80(0x1f1)]['replace'](/\%connection_id\%/g,_0x5057e3));return _0x25be50[_0x4afa80(0x1db)](_0x98fb72=>flosum_repository_sync_dto_1[_0x4afa80(0x1d9)][_0x4afa80(0x1fe)](_0x98fb72));}async['getBranchRecords'](_0x56d7c0){const _0x5cfdb6=a238_0x375e9b,_0x526201=await this[_0x5cfdb6(0x1ac)][_0x5cfdb6(0x1b5)](queries_1[_0x5cfdb6(0x1cd)][_0x5cfdb6(0x1ca)](/%repositories_ids\%/g,_0x56d7c0));return _0x526201[_0x5cfdb6(0x1db)](_0x3b078c=>flosum_repository_sync_dto_1[_0x5cfdb6(0x1d9)][_0x5cfdb6(0x1f4)](_0x3b078c));}async[a238_0x375e9b(0x1f7)](_0x322c76){const _0xc02695=a238_0x375e9b,_0x51bd90=await this['salesforceQuery'][_0xc02695(0x1b5)](queries_1[_0xc02695(0x1ee)][_0xc02695(0x1ca)]('%id%',_0x322c76));if(_0x51bd90['length']===0x0)throw new not_found_error_1[(_0xc02695(0x1d4))](_0xc02695(0x1c4)+_0x322c76+'\x20not\x20found\x20on\x20salesforce');return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0xc02695(0x1fe)](_0x51bd90[0x0]);}async[a238_0x375e9b(0x201)](_0x200fde){const _0x254224=a238_0x375e9b,_0x1f2964=await this['salesforceQuery'][_0x254224(0x1b5)](queries_1[_0x254224(0x1cf)][_0x254224(0x1ca)](_0x254224(0x1ea),_0x200fde));if(_0x1f2964[_0x254224(0x1ba)]===0x0)throw new not_found_error_1[(_0x254224(0x1d4))]('Branch\x20with\x20Id\x20'+_0x200fde+_0x254224(0x1fd));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x254224(0x1f4)](_0x1f2964[0x0]);}async['getBranchRecordByName'](_0x1c76f3){const _0x5a8b54=a238_0x375e9b,_0x33a2d7=await this[_0x5a8b54(0x1ac)][_0x5a8b54(0x1b5)](queries_1[_0x5a8b54(0x1a5)][_0x5a8b54(0x1ca)](_0x5a8b54(0x1e4),_0x1c76f3));if(_0x33a2d7[_0x5a8b54(0x1ba)]===0x0)throw new not_found_error_1[(_0x5a8b54(0x1d4))](_0x5a8b54(0x1e5)+_0x1c76f3+_0x5a8b54(0x1fd));const _0x1c5aa5=_0x33a2d7['find'](_0x201f5b=>_0x201f5b[constants_1['FLOSUM_NAMESPACE']+_0x5a8b54(0x1c2)]===_0x1c76f3);if(!_0x1c5aa5)throw new not_found_error_1[(_0x5a8b54(0x1d4))]('Branch\x20'+_0x1c76f3+_0x5a8b54(0x1fd));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromBranchRecord'](_0x1c5aa5);}async[a238_0x375e9b(0x1c8)](_0x5bd2d4){const _0x2bcc77=a238_0x375e9b,_0x59976d=await this[_0x2bcc77(0x1ac)][_0x2bcc77(0x1b5)](queries_1['GET_REPOSITORY_BY_NAME_QUERY']['replace'](_0x2bcc77(0x1e4),_0x5bd2d4));if(_0x59976d[_0x2bcc77(0x1ba)]===0x0)throw new not_found_error_1['SalesforceNotFoundError'](_0x2bcc77(0x1f3)+_0x5bd2d4+_0x2bcc77(0x1fd));return flosum_repository_sync_dto_1[_0x2bcc77(0x1d9)][_0x2bcc77(0x1fe)](_0x59976d[0x0]);}async[a238_0x375e9b(0x1f9)](_0x1d8ff4){const _0x1150f=a238_0x375e9b,_0x145a06=_0x1150f(0x1b2)+queries_1['GET_COMPONENTS_QUERY']+_0x1150f(0x1fb)+_0x1d8ff4+'\x27';return this[_0x1150f(0x1f0)](_0x145a06);}async[a238_0x375e9b(0x1c7)](_0x49bb39){const _0x10cf5c=a238_0x375e9b,_0x3d31be=_0x10cf5c(0x1c3)+queries_1[_0x10cf5c(0x1ff)]+_0x10cf5c(0x1bf)+_0x49bb39+'\x27';return this[_0x10cf5c(0x1f0)](_0x3d31be);}async[a238_0x375e9b(0x1d3)](_0x36b370){const _0x2d26b3=a238_0x375e9b;var _0x330ec7;const _0x515da5=queries_1[_0x2d26b3(0x200)]['replace']('%parentId%',_0x36b370['objectId'])[_0x2d26b3(0x1ca)](_0x2d26b3(0x1e4),_0x36b370[_0x2d26b3(0x1b4)]?constants_1[_0x2d26b3(0x1af)]:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']),_0x5a1ca2=await this[_0x2d26b3(0x1ac)]['query'](_0x515da5),_0x3f88d7=(_0x330ec7=_0x5a1ca2[0x0])===null||_0x330ec7===void 0x0?void 0x0:_0x330ec7['Id'];if(!_0x3f88d7)throw new Error(errors_1[_0x2d26b3(0x1dc)]);return _0x3f88d7;}async[a238_0x375e9b(0x1e3)](_0x235e96){const _0x4c208d=a238_0x375e9b;let _0x30bacf=await this['getAttachmentId'](_0x235e96)[_0x4c208d(0x1cc)](()=>null);return!_0x30bacf&&(_0x30bacf=await this[_0x4c208d(0x1df)][_0x4c208d(0x1a9)](_0x4c208d(0x1a7),{'Body':(0x0,utils_1[_0x4c208d(0x1c0)])('{}'),'ParentId':_0x235e96[_0x4c208d(0x1ec)],'ContentType':_0x4c208d(0x1b0),'Name':_0x235e96[_0x4c208d(0x1b4)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']})),_0x30bacf;}async['updateRemoteState'](_0x2302c3,_0x20252b){const _0x5686eb=a238_0x375e9b,_0x4540ae=await this[_0x5686eb(0x1e3)](_0x2302c3);await this['salesforceService'][_0x5686eb(0x1b6)]('Attachment',_0x4540ae,{'Body':(0x0,utils_1[_0x5686eb(0x1c0)])(JSON[_0x5686eb(0x1ce)](_0x20252b))});}async[a238_0x375e9b(0x1ab)](_0x2b53a0,_0x44f826){const _0x31d140=a238_0x375e9b;await this[_0x31d140(0x1df)][_0x31d140(0x1b6)](_0x2b53a0[_0x31d140(0x1bc)],_0x2b53a0[_0x31d140(0x1ec)],{[constants_1[_0x31d140(0x1bb)]+_0x31d140(0x1ad)]:_0x44f826});}async[a238_0x375e9b(0x1e1)](_0x4fe5f3){const _0x3ea87a=a238_0x375e9b;await this[_0x3ea87a(0x1df)][_0x3ea87a(0x1b6)](constants_1[_0x3ea87a(0x1bb)]+_0x3ea87a(0x1e7),_0x4fe5f3,{[constants_1[_0x3ea87a(0x1bb)]+'Sync_In_Progress__c']:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a238_0x375e9b(0x1c9)])(),__metadata(a238_0x375e9b(0x1c5),[salesforce_query_service_1['SalesforceQueryService'],salesforce_service_1[a238_0x375e9b(0x1e8)]])],SalesforceSyncService),exports[a238_0x375e9b(0x1d8)]=SalesforceSyncService;