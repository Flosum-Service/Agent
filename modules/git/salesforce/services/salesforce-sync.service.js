function a203_0x450b(){const _0x4fb3d8=['Attachment','GET_BRANCH_BY_NAME_QUERY','find','ERR_INVALID_ATTACHMENT_ID','defineProperty','salesforceQuery','./salesforce-query.service','(((.+)+)+)+$','getBranchRecordByName','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','4oklbXC','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','1061238zCCHwF','query','5lIpQRE','%name%','function','%parentId%','Service','GET_WAITING_REPOSITORIES_QUERY','fromBranchRecord','decorate','stringify','10190CzzdpR','createObject','repositoryId','__decorate','getBranchComponents','patchObject','metadata','SYNC_ATTACHMENT_FOR_BRANCH_NAME','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','encodeBase64','getRepositoryRecord','apply','./salesforce.service','objectId','Repository\x20','448qwldxv','constructor','fromRepositoryRecord','toString','Branch\x20with\x20Id\x20','Components__r','3711628IGiDCT','GET_COMPONENTS_QUERY','catch','replace','getComponentsFromRepository','GET_REPOSITORY_BY_NAME_QUERY','getOwnPropertyDescriptor','Synchronization_Status__c','GET_REPOSITORY_QUERY','salesforceService','getAllRepositoryNames','map','SalesforceSyncService','\x20not\x20found\x20on\x20salesforce','%id%','../../../../constants/errors','getRemoteStateAttachmentId','__metadata','FLOSUM_GIT_NAMESPACE','typedi','getAttachmentId','length','design:paramtypes','19205450vmdATL','\x0a\x20\x20\x20\x20\x20\x20','GET_WAITING_BRANCHES_QUERY','160206LoVmFM','GET_REPOSITORIES_NAMES_QUERY','object','../queries','Name','getRepositoryRecordByName','Connection__c','1026TjHKvU','search','getRepositoryRecords','updateRemoteState','disableSync','../errors/not-found.error','records','getComponents','getBranchRecords','push','1118118twFzAz','FLOSUM_NAMESPACE','SalesforceNotFoundError','__esModule','14196576EirQsQ','Branch\x20','FlosumRepositorySyncDto'];a203_0x450b=function(){return _0x4fb3d8;};return a203_0x450b();}function a203_0x46c6(_0x4d3452,_0x4965c5){const _0x5526db=a203_0x450b();return a203_0x46c6=function(_0x5181d2,_0x5d762a){_0x5181d2=_0x5181d2-0xa2;let _0x450bd8=_0x5526db[_0x5181d2];return _0x450bd8;},a203_0x46c6(_0x4d3452,_0x4965c5);}const a203_0x15fa6b=a203_0x46c6;(function(_0xb50856,_0x19f254){const _0xa07b87=a203_0x46c6,_0x569db4=_0xb50856();while(!![]){try{const _0x543dee=-parseInt(_0xa07b87(0xd4))/0x1+-parseInt(_0xa07b87(0xe5))/0x2*(parseInt(_0xa07b87(0xe7))/0x3)+-parseInt(_0xa07b87(0xa9))/0x4*(-parseInt(_0xa07b87(0xe9))/0x5)+-parseInt(_0xa07b87(0xc3))/0x6*(-parseInt(_0xa07b87(0xa3))/0x7)+parseInt(_0xa07b87(0xd8))/0x8+parseInt(_0xa07b87(0xca))/0x9*(parseInt(_0xa07b87(0xf2))/0xa)+-parseInt(_0xa07b87(0xc0))/0xb;if(_0x543dee===_0x19f254)break;else _0x569db4['push'](_0x569db4['shift']());}catch(_0x14556c){_0x569db4['push'](_0x569db4['shift']());}}}(a203_0x450b,0xe962d));const a203_0x5d762a=(function(){let _0x1b5f49=!![];return function(_0x109edd,_0x16f320){const _0x76d9de=_0x1b5f49?function(){const _0x584f60=a203_0x46c6;if(_0x16f320){const _0x4d637b=_0x16f320[_0x584f60(0xfd)](_0x109edd,arguments);return _0x16f320=null,_0x4d637b;}}:function(){};return _0x1b5f49=![],_0x76d9de;};}()),a203_0x5181d2=a203_0x5d762a(this,function(){const _0x27df62=a203_0x46c6;return a203_0x5181d2['toString']()[_0x27df62(0xcb)](_0x27df62(0xe2))[_0x27df62(0xa6)]()[_0x27df62(0xa4)](a203_0x5181d2)[_0x27df62(0xcb)]('(((.+)+)+)+$');});a203_0x5181d2();'use strict';var __decorate=this&&this[a203_0x15fa6b(0xf5)]||function(_0x58d4fc,_0x3356d4,_0x4dcbde,_0x29b431){const _0x2f376e=a203_0x15fa6b;var _0x15b250=arguments[_0x2f376e(0xbe)],_0x5985f5=_0x15b250<0x3?_0x3356d4:_0x29b431===null?_0x29b431=Object[_0x2f376e(0xaf)](_0x3356d4,_0x4dcbde):_0x29b431,_0xed216a;if(typeof Reflect===_0x2f376e(0xc5)&&typeof Reflect['decorate']===_0x2f376e(0xeb))_0x5985f5=Reflect[_0x2f376e(0xf0)](_0x58d4fc,_0x3356d4,_0x4dcbde,_0x29b431);else{for(var _0x59329a=_0x58d4fc['length']-0x1;_0x59329a>=0x0;_0x59329a--)if(_0xed216a=_0x58d4fc[_0x59329a])_0x5985f5=(_0x15b250<0x3?_0xed216a(_0x5985f5):_0x15b250>0x3?_0xed216a(_0x3356d4,_0x4dcbde,_0x5985f5):_0xed216a(_0x3356d4,_0x4dcbde))||_0x5985f5;}return _0x15b250>0x3&&_0x5985f5&&Object[_0x2f376e(0xdf)](_0x3356d4,_0x4dcbde,_0x5985f5),_0x5985f5;},__metadata=this&&this[a203_0x15fa6b(0xba)]||function(_0x47873a,_0x153aa0){const _0x59d532=a203_0x15fa6b;if(typeof Reflect===_0x59d532(0xc5)&&typeof Reflect[_0x59d532(0xf8)]==='function')return Reflect[_0x59d532(0xf8)](_0x47873a,_0x153aa0);};Object[a203_0x15fa6b(0xdf)](exports,a203_0x15fa6b(0xd7),{'value':!![]}),exports[a203_0x15fa6b(0xb5)]=void 0x0;const typedi_1=require(a203_0x15fa6b(0xbc)),constants_1=require('../../../../constants'),errors_1=require(a203_0x15fa6b(0xb8)),utils_1=require('../../../shared/utils'),flosum_repository_sync_dto_1=require('../dto/flosum-repository-sync.dto'),not_found_error_1=require(a203_0x15fa6b(0xcf)),queries_1=require(a203_0x15fa6b(0xc6)),salesforce_query_service_1=require(a203_0x15fa6b(0xe1)),salesforce_service_1=require(a203_0x15fa6b(0xfe));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x3e44b7,_0x2ad17f){const _0x5dbb9f=a203_0x15fa6b;this['salesforceQuery']=_0x3e44b7,this[_0x5dbb9f(0xb2)]=_0x2ad17f;}async['getComponents'](_0x29e879){const _0x389586=a203_0x15fa6b;var _0xdac75f;const _0x2d9465=await this[_0x389586(0xe0)][_0x389586(0xe8)](_0x29e879),_0x3633a1=[];for(const _0x5352aa of _0x2d9465){const _0x54316c=(_0xdac75f=_0x5352aa[constants_1[_0x389586(0xd5)]+_0x389586(0xa8)])===null||_0xdac75f===void 0x0?void 0x0:_0xdac75f[_0x389586(0xd0)];_0x54316c&&_0x54316c[_0x389586(0xbe)]&&_0x3633a1[_0x389586(0xd3)](_0x54316c[0x0]['Id']);}return _0x3633a1;}async[a203_0x15fa6b(0xb3)](_0x3f299d){const _0x44a411=a203_0x15fa6b,_0x39d311=await this[_0x44a411(0xe0)][_0x44a411(0xe8)](queries_1[_0x44a411(0xc4)][_0x44a411(0xac)](/\%connection_id\%/g,_0x3f299d));return _0x39d311[_0x44a411(0xb4)](_0x449da0=>{const _0x40de0e=_0x44a411;return _0x449da0[constants_1[_0x40de0e(0xbb)]+'Repository__r']?_0x449da0[constants_1[_0x40de0e(0xbb)]+'Repository__r'][_0x40de0e(0xc7)]:_0x449da0[_0x40de0e(0xc7)];});}async[a203_0x15fa6b(0xcc)](_0xfd944f){const _0x42508e=a203_0x15fa6b,_0x286d2c=await this['salesforceQuery'][_0x42508e(0xe8)](queries_1[_0x42508e(0xee)][_0x42508e(0xac)](/\%connection_id\%/g,_0xfd944f));return _0x286d2c['map'](_0x3e841c=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x42508e(0xa5)](_0x3e841c));}async[a203_0x15fa6b(0xd2)](_0x4b0cee){const _0x5b47a6=a203_0x15fa6b,_0x7941cd=await this['salesforceQuery'][_0x5b47a6(0xe8)](queries_1[_0x5b47a6(0xc2)]['replace'](/%repositories_ids\%/g,_0x4b0cee));return _0x7941cd[_0x5b47a6(0xb4)](_0x200177=>flosum_repository_sync_dto_1[_0x5b47a6(0xda)][_0x5b47a6(0xef)](_0x200177));}async[a203_0x15fa6b(0xfc)](_0x505195){const _0x43c0e5=a203_0x15fa6b,_0x42a849=await this[_0x43c0e5(0xe0)][_0x43c0e5(0xe8)](queries_1[_0x43c0e5(0xb1)][_0x43c0e5(0xac)](_0x43c0e5(0xb7),_0x505195));if(_0x42a849['length']===0x0)throw new not_found_error_1[(_0x43c0e5(0xd6))]('Repository\x20with\x20Id\x20'+_0x505195+_0x43c0e5(0xb6));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x43c0e5(0xa5)](_0x42a849[0x0]);}async['getBranchRecord'](_0x40684d){const _0x2d1c6c=a203_0x15fa6b,_0x3681d2=await this['salesforceQuery'][_0x2d1c6c(0xe8)](queries_1['GET_BRANCH_QUERY'][_0x2d1c6c(0xac)](_0x2d1c6c(0xb7),_0x40684d));if(_0x3681d2[_0x2d1c6c(0xbe)]===0x0)throw new not_found_error_1[(_0x2d1c6c(0xd6))](_0x2d1c6c(0xa7)+_0x40684d+_0x2d1c6c(0xb6));return flosum_repository_sync_dto_1[_0x2d1c6c(0xda)][_0x2d1c6c(0xef)](_0x3681d2[0x0]);}async[a203_0x15fa6b(0xe3)](_0x350fa7){const _0x5ba3f2=a203_0x15fa6b,_0x4e8401=await this[_0x5ba3f2(0xe0)][_0x5ba3f2(0xe8)](queries_1[_0x5ba3f2(0xdc)][_0x5ba3f2(0xac)](_0x5ba3f2(0xea),_0x350fa7));if(_0x4e8401[_0x5ba3f2(0xbe)]===0x0)throw new not_found_error_1['SalesforceNotFoundError'](_0x5ba3f2(0xd9)+_0x350fa7+_0x5ba3f2(0xb6));const _0x188173=_0x4e8401[_0x5ba3f2(0xdd)](_0x4cc4a3=>_0x4cc4a3[constants_1[_0x5ba3f2(0xd5)]+'Branch_Name__c']===_0x350fa7);if(!_0x188173)throw new not_found_error_1[(_0x5ba3f2(0xd6))](_0x5ba3f2(0xd9)+_0x350fa7+_0x5ba3f2(0xb6));return flosum_repository_sync_dto_1[_0x5ba3f2(0xda)][_0x5ba3f2(0xef)](_0x188173);}async[a203_0x15fa6b(0xc8)](_0x520d53){const _0x51cf6d=a203_0x15fa6b,_0x323bce=await this[_0x51cf6d(0xe0)][_0x51cf6d(0xe8)](queries_1[_0x51cf6d(0xae)][_0x51cf6d(0xac)](_0x51cf6d(0xea),_0x520d53));if(_0x323bce['length']===0x0)throw new not_found_error_1[(_0x51cf6d(0xd6))](_0x51cf6d(0xa2)+_0x520d53+_0x51cf6d(0xb6));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x51cf6d(0xa5)](_0x323bce[0x0]);}async[a203_0x15fa6b(0xad)](_0x569b5c){const _0x3bff23=a203_0x15fa6b,_0x2714ca=_0x3bff23(0xc1)+queries_1[_0x3bff23(0xaa)]+_0x3bff23(0xfa)+_0x569b5c+'\x27';return this['getComponents'](_0x2714ca);}async[a203_0x15fa6b(0xf6)](_0x28deb8){const _0x6d16a4=a203_0x15fa6b,_0x35952c=_0x6d16a4(0xe6)+queries_1[_0x6d16a4(0xaa)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27'+_0x28deb8+'\x27';return this[_0x6d16a4(0xd1)](_0x35952c);}async[a203_0x15fa6b(0xbd)](_0x58e809){const _0x483ec8=a203_0x15fa6b;var _0x39864a;const _0x39381a=queries_1['GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY'][_0x483ec8(0xac)](_0x483ec8(0xec),_0x58e809[_0x483ec8(0xff)])[_0x483ec8(0xac)]('%name%',_0x58e809[_0x483ec8(0xf4)]?constants_1[_0x483ec8(0xe4)]:constants_1[_0x483ec8(0xf9)]),_0x217ad5=await this[_0x483ec8(0xe0)][_0x483ec8(0xe8)](_0x39381a),_0x4cea29=(_0x39864a=_0x217ad5[0x0])===null||_0x39864a===void 0x0?void 0x0:_0x39864a['Id'];if(!_0x4cea29)throw new Error(errors_1[_0x483ec8(0xde)]);return _0x4cea29;}async[a203_0x15fa6b(0xb9)](_0x52ac50){const _0x747cd5=a203_0x15fa6b;let _0x642df9=await this['getAttachmentId'](_0x52ac50)[_0x747cd5(0xab)](()=>null);return!_0x642df9&&(_0x642df9=await this[_0x747cd5(0xb2)][_0x747cd5(0xf3)]('Attachment',{'Body':(0x0,utils_1[_0x747cd5(0xfb)])('{}'),'ParentId':_0x52ac50[_0x747cd5(0xff)],'ContentType':'text/plain','Name':_0x52ac50[_0x747cd5(0xf4)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0x747cd5(0xf9)]})),_0x642df9;}async[a203_0x15fa6b(0xcd)](_0x177dc1,_0x36ef43){const _0x23022a=a203_0x15fa6b,_0x2a91f8=await this[_0x23022a(0xb9)](_0x177dc1);await this[_0x23022a(0xb2)][_0x23022a(0xf7)](_0x23022a(0xdb),_0x2a91f8,{'Body':(0x0,utils_1[_0x23022a(0xfb)])(JSON[_0x23022a(0xf1)](_0x36ef43))});}async['setStatus'](_0x57e637,_0x16a623){const _0x27b5de=a203_0x15fa6b;await this[_0x27b5de(0xb2)][_0x27b5de(0xf7)](_0x57e637['objectType'],_0x57e637[_0x27b5de(0xff)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x27b5de(0xb0)]:_0x16a623});}async[a203_0x15fa6b(0xce)](_0x157fab){const _0x51e719=a203_0x15fa6b;await this[_0x51e719(0xb2)][_0x51e719(0xf7)](constants_1['FLOSUM_GIT_NAMESPACE']+_0x51e719(0xc9),_0x157fab,{[constants_1['FLOSUM_GIT_NAMESPACE']+'Sync_In_Progress__c']:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a203_0x15fa6b(0xed)])(),__metadata(a203_0x15fa6b(0xbf),[salesforce_query_service_1['SalesforceQueryService'],salesforce_service_1['SalesforceService']])],SalesforceSyncService),exports[a203_0x15fa6b(0xb5)]=SalesforceSyncService;