function a243_0x20d5(){const _0x258752=['./salesforce-query.service','encodeBase64','../../../../constants','patchObject','%id%','apply','getAttachmentId','setStatus','528248rtvamj','stringify','ERR_INVALID_ATTACHMENT_ID','getBranchComponents','FLOSUM_NAMESPACE','objectId','objectType','63vplWsH','262902FclgPn','Repository__r','constructor','getRepositoryRecordByName','124896zIozVN','635093zEvRHg','SalesforceNotFoundError','4050827ymNKII','GET_COMPONENTS_QUERY','Attachment','toString','defineProperty','getBranchRecords','typedi','replace','Connection__c','(((.+)+)+)+$','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','27pSKFTh','search','Name','%name%','Synchronization_Status__c','disableSync','\x20not\x20found\x20on\x20salesforce','getBranchRecordByName','query','fromRepositoryRecord','updateRemoteState','function','createObject','../errors/not-found.error','GET_BRANCH_QUERY','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Branch_Name__c','./salesforce.service','metadata','length','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','4256395pdplAS','Repository\x20','FlosumRepositorySyncDto','__decorate','Repository\x20with\x20Id\x20','SYNC_ATTACHMENT_FOR_BRANCH_NAME','salesforceService','GET_WAITING_REPOSITORIES_QUERY','Branch\x20','getOwnPropertyDescriptor','SalesforceService','10CXKKmH','getAllRepositoryNames','map','\x0a\x20\x20\x20\x20\x20\x20','2GPyiud','../dto/flosum-repository-sync.dto','getRepositoryRecord','getBranchRecord','GET_BRANCH_BY_NAME_QUERY','35vOemVu','fromBranchRecord','salesforceQuery','Sync_In_Progress__c','Branch\x20with\x20Id\x20','384092FmMImH','1807NNCVCD','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','object','getComponents','Components__r','../queries','getComponentsFromRepository','FLOSUM_GIT_NAMESPACE','find','design:paramtypes','records','decorate','repositoryId','getRemoteStateAttachmentId','catch'];a243_0x20d5=function(){return _0x258752;};return a243_0x20d5();}const a243_0x2c2c5d=a243_0x465a;(function(_0x15f18e,_0x4672b2){const _0x50d042=a243_0x465a,_0xc0f4b3=_0x15f18e();while(!![]){try{const _0x468911=parseInt(_0x50d042(0x14d))/0x1*(-parseInt(_0x50d042(0x11e))/0x2)+parseInt(_0x50d042(0x15a))/0x3*(parseInt(_0x50d042(0x128))/0x4)+parseInt(_0x50d042(0x10f))/0x5+parseInt(_0x50d042(0x148))/0x6*(parseInt(_0x50d042(0x123))/0x7)+-parseInt(_0x50d042(0x140))/0x8*(-parseInt(_0x50d042(0x147))/0x9)+-parseInt(_0x50d042(0x11a))/0xa*(-parseInt(_0x50d042(0x14f))/0xb)+-parseInt(_0x50d042(0x14c))/0xc*(parseInt(_0x50d042(0x129))/0xd);if(_0x468911===_0x4672b2)break;else _0xc0f4b3['push'](_0xc0f4b3['shift']());}catch(_0xcdc1a2){_0xc0f4b3['push'](_0xc0f4b3['shift']());}}}(a243_0x20d5,0xa6ce8));const a243_0x4f42b3=(function(){let _0x5a24d0=!![];return function(_0x36fb6c,_0x4a61d0){const _0x527765=_0x5a24d0?function(){const _0x303a20=a243_0x465a;if(_0x4a61d0){const _0x161133=_0x4a61d0[_0x303a20(0x13d)](_0x36fb6c,arguments);return _0x4a61d0=null,_0x161133;}}:function(){};return _0x5a24d0=![],_0x527765;};}()),a243_0xc8c963=a243_0x4f42b3(this,function(){const _0x3f6bfb=a243_0x465a;return a243_0xc8c963[_0x3f6bfb(0x152)]()[_0x3f6bfb(0x15b)](_0x3f6bfb(0x158))[_0x3f6bfb(0x152)]()[_0x3f6bfb(0x14a)](a243_0xc8c963)[_0x3f6bfb(0x15b)](_0x3f6bfb(0x158));});a243_0xc8c963();function a243_0x465a(_0x219768,_0x41f2c2){const _0x4d7541=a243_0x20d5();return a243_0x465a=function(_0xc8c963,_0x4f42b3){_0xc8c963=_0xc8c963-0xfc;let _0x20d561=_0x4d7541[_0xc8c963];return _0x20d561;},a243_0x465a(_0x219768,_0x41f2c2);}'use strict';var __decorate=this&&this[a243_0x2c2c5d(0x112)]||function(_0x47e7de,_0x428b6c,_0x244eec,_0x2851c6){const _0x5ce344=a243_0x2c2c5d;var _0x5d4c86=arguments[_0x5ce344(0x10d)],_0x6bca3f=_0x5d4c86<0x3?_0x428b6c:_0x2851c6===null?_0x2851c6=Object[_0x5ce344(0x118)](_0x428b6c,_0x244eec):_0x2851c6,_0x5846c0;if(typeof Reflect===_0x5ce344(0x12b)&&typeof Reflect['decorate']==='function')_0x6bca3f=Reflect[_0x5ce344(0x134)](_0x47e7de,_0x428b6c,_0x244eec,_0x2851c6);else{for(var _0xc6fe41=_0x47e7de['length']-0x1;_0xc6fe41>=0x0;_0xc6fe41--)if(_0x5846c0=_0x47e7de[_0xc6fe41])_0x6bca3f=(_0x5d4c86<0x3?_0x5846c0(_0x6bca3f):_0x5d4c86>0x3?_0x5846c0(_0x428b6c,_0x244eec,_0x6bca3f):_0x5846c0(_0x428b6c,_0x244eec))||_0x6bca3f;}return _0x5d4c86>0x3&&_0x6bca3f&&Object[_0x5ce344(0x153)](_0x428b6c,_0x244eec,_0x6bca3f),_0x6bca3f;},__metadata=this&&this['__metadata']||function(_0x24fdbb,_0x2da505){const _0x220295=a243_0x2c2c5d;if(typeof Reflect==='object'&&typeof Reflect[_0x220295(0x10c)]===_0x220295(0x105))return Reflect[_0x220295(0x10c)](_0x24fdbb,_0x2da505);};Object[a243_0x2c2c5d(0x153)](exports,'__esModule',{'value':!![]}),exports['SalesforceSyncService']=void 0x0;const typedi_1=require(a243_0x2c2c5d(0x155)),constants_1=require(a243_0x2c2c5d(0x13a)),errors_1=require('../../../../constants/errors'),utils_1=require('../../../shared/utils'),flosum_repository_sync_dto_1=require(a243_0x2c2c5d(0x11f)),not_found_error_1=require(a243_0x2c2c5d(0x107)),queries_1=require(a243_0x2c2c5d(0x12e)),salesforce_query_service_1=require(a243_0x2c2c5d(0x138)),salesforce_service_1=require(a243_0x2c2c5d(0x10b));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x168d5e,_0x491254){const _0x435761=a243_0x2c2c5d;this[_0x435761(0x125)]=_0x168d5e,this[_0x435761(0x115)]=_0x491254;}async['getComponents'](_0x5d330d){const _0xcae2d=a243_0x2c2c5d;var _0xce4d84;const _0x563322=await this[_0xcae2d(0x125)]['query'](_0x5d330d),_0x2e06d1=[];for(const _0x2b8ca9 of _0x563322){const _0x142e45=(_0xce4d84=_0x2b8ca9[constants_1[_0xcae2d(0x144)]+_0xcae2d(0x12d)])===null||_0xce4d84===void 0x0?void 0x0:_0xce4d84[_0xcae2d(0x133)];_0x142e45&&_0x142e45['length']&&_0x2e06d1['push'](_0x142e45[0x0]['Id']);}return _0x2e06d1;}async[a243_0x2c2c5d(0x11b)](_0x13f61){const _0x5e5157=a243_0x2c2c5d,_0x20f561=await this['salesforceQuery'][_0x5e5157(0x102)](queries_1['GET_REPOSITORIES_NAMES_QUERY'][_0x5e5157(0x156)](/\%connection_id\%/g,_0x13f61));return _0x20f561[_0x5e5157(0x11c)](_0x4253b5=>{const _0x30f25d=_0x5e5157;return _0x4253b5[constants_1[_0x30f25d(0x130)]+_0x30f25d(0x149)]?_0x4253b5[constants_1[_0x30f25d(0x130)]+'Repository__r']['Name']:_0x4253b5[_0x30f25d(0xfc)];});}async['getRepositoryRecords'](_0x161572){const _0x4d0068=a243_0x2c2c5d,_0x5aee34=await this[_0x4d0068(0x125)][_0x4d0068(0x102)](queries_1[_0x4d0068(0x116)][_0x4d0068(0x156)](/\%connection_id\%/g,_0x161572));return _0x5aee34[_0x4d0068(0x11c)](_0x2e39ff=>flosum_repository_sync_dto_1[_0x4d0068(0x111)][_0x4d0068(0x103)](_0x2e39ff));}async[a243_0x2c2c5d(0x154)](_0x329ad1){const _0xc3170a=a243_0x2c2c5d,_0x29730b=await this[_0xc3170a(0x125)][_0xc3170a(0x102)](queries_1['GET_WAITING_BRANCHES_QUERY'][_0xc3170a(0x156)](/%repositories_ids\%/g,_0x329ad1));return _0x29730b[_0xc3170a(0x11c)](_0x3962f0=>flosum_repository_sync_dto_1[_0xc3170a(0x111)][_0xc3170a(0x124)](_0x3962f0));}async[a243_0x2c2c5d(0x120)](_0x2ab24e){const _0x3bb49f=a243_0x2c2c5d,_0x3b7c97=await this[_0x3bb49f(0x125)][_0x3bb49f(0x102)](queries_1['GET_REPOSITORY_QUERY'][_0x3bb49f(0x156)](_0x3bb49f(0x13c),_0x2ab24e));if(_0x3b7c97['length']===0x0)throw new not_found_error_1[(_0x3bb49f(0x14e))](_0x3bb49f(0x113)+_0x2ab24e+_0x3bb49f(0x100));return flosum_repository_sync_dto_1[_0x3bb49f(0x111)][_0x3bb49f(0x103)](_0x3b7c97[0x0]);}async[a243_0x2c2c5d(0x121)](_0x1043d4){const _0x15126f=a243_0x2c2c5d,_0x115354=await this[_0x15126f(0x125)][_0x15126f(0x102)](queries_1[_0x15126f(0x108)][_0x15126f(0x156)](_0x15126f(0x13c),_0x1043d4));if(_0x115354[_0x15126f(0x10d)]===0x0)throw new not_found_error_1['SalesforceNotFoundError'](_0x15126f(0x127)+_0x1043d4+_0x15126f(0x100));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromBranchRecord'](_0x115354[0x0]);}async[a243_0x2c2c5d(0x101)](_0x41cc89){const _0x2716c7=a243_0x2c2c5d,_0x26bff7=await this['salesforceQuery']['query'](queries_1[_0x2716c7(0x122)][_0x2716c7(0x156)](_0x2716c7(0xfd),_0x41cc89));if(_0x26bff7['length']===0x0)throw new not_found_error_1['SalesforceNotFoundError'](_0x2716c7(0x117)+_0x41cc89+_0x2716c7(0x100));const _0x50e6b1=_0x26bff7[_0x2716c7(0x131)](_0x1bbcf6=>_0x1bbcf6[constants_1[_0x2716c7(0x144)]+_0x2716c7(0x10a)]===_0x41cc89);if(!_0x50e6b1)throw new not_found_error_1[(_0x2716c7(0x14e))](_0x2716c7(0x117)+_0x41cc89+'\x20not\x20found\x20on\x20salesforce');return flosum_repository_sync_dto_1[_0x2716c7(0x111)][_0x2716c7(0x124)](_0x50e6b1);}async[a243_0x2c2c5d(0x14b)](_0x2a6d1a){const _0x5c3bb4=a243_0x2c2c5d,_0x569edd=await this[_0x5c3bb4(0x125)][_0x5c3bb4(0x102)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x5c3bb4(0x156)](_0x5c3bb4(0xfd),_0x2a6d1a));if(_0x569edd[_0x5c3bb4(0x10d)]===0x0)throw new not_found_error_1[(_0x5c3bb4(0x14e))](_0x5c3bb4(0x110)+_0x2a6d1a+_0x5c3bb4(0x100));return flosum_repository_sync_dto_1[_0x5c3bb4(0x111)]['fromRepositoryRecord'](_0x569edd[0x0]);}async[a243_0x2c2c5d(0x12f)](_0x1b8ddd){const _0x1c1446=a243_0x2c2c5d,_0x4716de=_0x1c1446(0x11d)+queries_1['GET_COMPONENTS_QUERY']+'\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27'+_0x1b8ddd+'\x27';return this[_0x1c1446(0x12c)](_0x4716de);}async[a243_0x2c2c5d(0x143)](_0x2ce138){const _0x321dc2=a243_0x2c2c5d,_0x26c1b4=_0x321dc2(0x109)+queries_1[_0x321dc2(0x150)]+_0x321dc2(0x12a)+_0x2ce138+'\x27';return this[_0x321dc2(0x12c)](_0x26c1b4);}async[a243_0x2c2c5d(0x13e)](_0x3b98cc){const _0xfe6e62=a243_0x2c2c5d;var _0x401c54;const _0x2b939e=queries_1[_0xfe6e62(0x159)][_0xfe6e62(0x156)]('%parentId%',_0x3b98cc['objectId'])['replace'](_0xfe6e62(0xfd),_0x3b98cc[_0xfe6e62(0x135)]?constants_1[_0xfe6e62(0x10e)]:constants_1[_0xfe6e62(0x114)]),_0x47dbab=await this[_0xfe6e62(0x125)][_0xfe6e62(0x102)](_0x2b939e),_0x512e10=(_0x401c54=_0x47dbab[0x0])===null||_0x401c54===void 0x0?void 0x0:_0x401c54['Id'];if(!_0x512e10)throw new Error(errors_1[_0xfe6e62(0x142)]);return _0x512e10;}async[a243_0x2c2c5d(0x136)](_0x51f2c1){const _0x124572=a243_0x2c2c5d;let _0x12dd78=await this[_0x124572(0x13e)](_0x51f2c1)[_0x124572(0x137)](()=>null);return!_0x12dd78&&(_0x12dd78=await this['salesforceService'][_0x124572(0x106)]('Attachment',{'Body':(0x0,utils_1[_0x124572(0x139)])('{}'),'ParentId':_0x51f2c1[_0x124572(0x145)],'ContentType':'text/plain','Name':_0x51f2c1[_0x124572(0x135)]?constants_1[_0x124572(0x10e)]:constants_1[_0x124572(0x114)]})),_0x12dd78;}async[a243_0x2c2c5d(0x104)](_0xf1cbea,_0x529287){const _0x4fa1ad=a243_0x2c2c5d,_0x5746a9=await this[_0x4fa1ad(0x136)](_0xf1cbea);await this[_0x4fa1ad(0x115)][_0x4fa1ad(0x13b)](_0x4fa1ad(0x151),_0x5746a9,{'Body':(0x0,utils_1[_0x4fa1ad(0x139)])(JSON[_0x4fa1ad(0x141)](_0x529287))});}async[a243_0x2c2c5d(0x13f)](_0xa2ba57,_0x336811){const _0x267b48=a243_0x2c2c5d;await this[_0x267b48(0x115)][_0x267b48(0x13b)](_0xa2ba57[_0x267b48(0x146)],_0xa2ba57['objectId'],{[constants_1[_0x267b48(0x130)]+_0x267b48(0xfe)]:_0x336811});}async[a243_0x2c2c5d(0xff)](_0x4dbc95){const _0x69c222=a243_0x2c2c5d;await this[_0x69c222(0x115)][_0x69c222(0x13b)](constants_1['FLOSUM_GIT_NAMESPACE']+_0x69c222(0x157),_0x4dbc95,{[constants_1[_0x69c222(0x130)]+_0x69c222(0x126)]:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata(a243_0x2c2c5d(0x132),[salesforce_query_service_1['SalesforceQueryService'],salesforce_service_1[a243_0x2c2c5d(0x119)]])],SalesforceSyncService),exports['SalesforceSyncService']=SalesforceSyncService;