function a187_0x2cbe(){const _0x522f40=['object','(((.+)+)+)+$','GET_REPOSITORY_BY_NAME_QUERY','getComponentsFromRepository','343726GsQRLi','%parentId%','Service','fromRepositoryRecord','repositoryId','1531716lYMZRW','getBranchRecords','1032500IiFEUW','180680ozedKj','objectType','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','GET_BRANCH_BY_NAME_QUERY','251622NNyyMX','apply','getRepositoryRecords','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','toString','Branch\x20with\x20Id\x20','Branch\x20','Repository\x20','getBranchComponents','query','fromBranchRecord','899335LKqFgF','getRepositoryRecordByName','push','Attachment','map','patchObject','./salesforce-query.service','getAttachmentId','getComponents','FLOSUM_GIT_NAMESPACE','getOwnPropertyDescriptor','168eUVPbm','GET_REPOSITORY_QUERY','\x0a\x20\x20\x20\x20\x20\x20','GET_COMPONENTS_QUERY','records','function','SalesforceNotFoundError','SalesforceQueryService','SYNC_ATTACHMENT_FOR_BRANCH_NAME','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','1757382qnIcxm','Repository\x20with\x20Id\x20','./salesforce.service','SalesforceService','FlosumRepositorySyncDto','updateRemoteState','getRemoteStateAttachmentId','GET_WAITING_BRANCHES_QUERY','\x20not\x20found\x20on\x20salesforce','../errors/not-found.error','typedi','replace','length','%id%','search','../../../shared/utils','objectId','Connection__c','getBranchRecord','constructor','__esModule','setStatus','getRepositoryRecord','FLOSUM_NAMESPACE','salesforceQuery','salesforceService','../../../../constants','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','../queries','Synchronization_Status__c','defineProperty','text/plain','SalesforceSyncService','__decorate','decorate','encodeBase64','%name%'];a187_0x2cbe=function(){return _0x522f40;};return a187_0x2cbe();}const a187_0xcd36dc=a187_0x7683;(function(_0x1590a7,_0x4a6366){const _0x2ec7d3=a187_0x7683,_0xf7ac43=_0x1590a7();while(!![]){try{const _0x38c5c2=parseInt(_0x2ec7d3(0x174))/0x1+parseInt(_0x2ec7d3(0x179))/0x2+parseInt(_0x2ec7d3(0x12b))/0x3+parseInt(_0x2ec7d3(0x126))/0x4+-parseInt(_0x2ec7d3(0x136))/0x5+-parseInt(_0x2ec7d3(0x14b))/0x6+-parseInt(_0x2ec7d3(0x141))/0x7*(parseInt(_0x2ec7d3(0x127))/0x8);if(_0x38c5c2===_0x4a6366)break;else _0xf7ac43['push'](_0xf7ac43['shift']());}catch(_0x5ef960){_0xf7ac43['push'](_0xf7ac43['shift']());}}}(a187_0x2cbe,0x6aa2b));const a187_0xd8ada3=(function(){let _0x129b59=!![];return function(_0x24c021,_0x12c48a){const _0x1c806d=_0x129b59?function(){const _0x118b43=a187_0x7683;if(_0x12c48a){const _0x579075=_0x12c48a[_0x118b43(0x12c)](_0x24c021,arguments);return _0x12c48a=null,_0x579075;}}:function(){};return _0x129b59=![],_0x1c806d;};}()),a187_0x5abe6a=a187_0xd8ada3(this,function(){const _0x12544a=a187_0x7683;return a187_0x5abe6a[_0x12544a(0x12f)]()['search'](_0x12544a(0x171))[_0x12544a(0x12f)]()[_0x12544a(0x15e)](a187_0x5abe6a)[_0x12544a(0x159)](_0x12544a(0x171));});a187_0x5abe6a();'use strict';function a187_0x7683(_0x39fef4,_0x252606){const _0x2a8390=a187_0x2cbe();return a187_0x7683=function(_0x5abe6a,_0xd8ada3){_0x5abe6a=_0x5abe6a-0x126;let _0x2cbee4=_0x2a8390[_0x5abe6a];return _0x2cbee4;},a187_0x7683(_0x39fef4,_0x252606);}var __decorate=this&&this[a187_0xcd36dc(0x16c)]||function(_0xe8d48d,_0x3fbd1d,_0x3af061,_0x1771ac){const _0x452958=a187_0xcd36dc;var _0x2ebb13=arguments['length'],_0x41d024=_0x2ebb13<0x3?_0x3fbd1d:_0x1771ac===null?_0x1771ac=Object[_0x452958(0x140)](_0x3fbd1d,_0x3af061):_0x1771ac,_0x2dd716;if(typeof Reflect===_0x452958(0x170)&&typeof Reflect['decorate']===_0x452958(0x146))_0x41d024=Reflect[_0x452958(0x16d)](_0xe8d48d,_0x3fbd1d,_0x3af061,_0x1771ac);else{for(var _0x115a70=_0xe8d48d['length']-0x1;_0x115a70>=0x0;_0x115a70--)if(_0x2dd716=_0xe8d48d[_0x115a70])_0x41d024=(_0x2ebb13<0x3?_0x2dd716(_0x41d024):_0x2ebb13>0x3?_0x2dd716(_0x3fbd1d,_0x3af061,_0x41d024):_0x2dd716(_0x3fbd1d,_0x3af061))||_0x41d024;}return _0x2ebb13>0x3&&_0x41d024&&Object['defineProperty'](_0x3fbd1d,_0x3af061,_0x41d024),_0x41d024;},__metadata=this&&this['__metadata']||function(_0x5d7d01,_0x16981b){const _0x18a12f=a187_0xcd36dc;if(typeof Reflect===_0x18a12f(0x170)&&typeof Reflect['metadata']===_0x18a12f(0x146))return Reflect['metadata'](_0x5d7d01,_0x16981b);};Object[a187_0xcd36dc(0x169)](exports,a187_0xcd36dc(0x15f),{'value':!![]}),exports[a187_0xcd36dc(0x16b)]=void 0x0;const typedi_1=require(a187_0xcd36dc(0x155)),constants_1=require(a187_0xcd36dc(0x165)),errors_1=require('../../../../constants/errors'),utils_1=require(a187_0xcd36dc(0x15a)),flosum_repository_sync_dto_1=require('../dto/flosum-repository-sync.dto'),not_found_error_1=require(a187_0xcd36dc(0x154)),queries_1=require(a187_0xcd36dc(0x167)),salesforce_query_service_1=require(a187_0xcd36dc(0x13c)),salesforce_service_1=require(a187_0xcd36dc(0x14d));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x569f9d,_0x375605){const _0x4834c=a187_0xcd36dc;this[_0x4834c(0x163)]=_0x569f9d,this[_0x4834c(0x164)]=_0x375605;}async[a187_0xcd36dc(0x13e)](_0x2e91f8){const _0x4f26f8=a187_0xcd36dc;var _0x1cd1f7;const _0x390169=await this[_0x4f26f8(0x163)]['query'](_0x2e91f8),_0xc09e82=[];for(const _0x1764eb of _0x390169){const _0xf250e0=(_0x1cd1f7=_0x1764eb[constants_1[_0x4f26f8(0x162)]+'Components__r'])===null||_0x1cd1f7===void 0x0?void 0x0:_0x1cd1f7[_0x4f26f8(0x145)];_0xf250e0&&_0xf250e0[_0x4f26f8(0x157)]&&_0xc09e82[_0x4f26f8(0x138)](_0xf250e0[0x0]['Id']);}return _0xc09e82;}async[a187_0xcd36dc(0x12d)](_0x387740){const _0x2e7cef=a187_0xcd36dc,_0x198af4=await this['salesforceQuery'][_0x2e7cef(0x134)](queries_1['GET_WAITING_REPOSITORIES_QUERY'][_0x2e7cef(0x156)](/\%connection_id\%/g,_0x387740));return _0x198af4[_0x2e7cef(0x13a)](_0x453045=>flosum_repository_sync_dto_1[_0x2e7cef(0x14f)][_0x2e7cef(0x177)](_0x453045));}async[a187_0xcd36dc(0x17a)](_0x4ab3bc){const _0x54d97f=a187_0xcd36dc,_0x17c12d=await this[_0x54d97f(0x163)][_0x54d97f(0x134)](queries_1[_0x54d97f(0x152)][_0x54d97f(0x156)](/%repositories_ids\%/g,_0x4ab3bc));return _0x17c12d[_0x54d97f(0x13a)](_0xd24c23=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x54d97f(0x135)](_0xd24c23));}async[a187_0xcd36dc(0x161)](_0x111654){const _0x361b8d=a187_0xcd36dc,_0x741270=await this[_0x361b8d(0x163)][_0x361b8d(0x134)](queries_1[_0x361b8d(0x142)][_0x361b8d(0x156)](_0x361b8d(0x158),_0x111654));if(_0x741270['length']===0x0)throw new not_found_error_1['SalesforceNotFoundError'](_0x361b8d(0x14c)+_0x111654+_0x361b8d(0x153));return flosum_repository_sync_dto_1[_0x361b8d(0x14f)][_0x361b8d(0x177)](_0x741270[0x0]);}async[a187_0xcd36dc(0x15d)](_0x192cc5){const _0x54fb0b=a187_0xcd36dc,_0xfaccd5=await this[_0x54fb0b(0x163)][_0x54fb0b(0x134)](queries_1['GET_BRANCH_QUERY']['replace'](_0x54fb0b(0x158),_0x192cc5));if(_0xfaccd5[_0x54fb0b(0x157)]===0x0)throw new not_found_error_1[(_0x54fb0b(0x147))](_0x54fb0b(0x130)+_0x192cc5+'\x20not\x20found\x20on\x20salesforce');return flosum_repository_sync_dto_1[_0x54fb0b(0x14f)]['fromBranchRecord'](_0xfaccd5[0x0]);}async['getBranchRecordByName'](_0x2c99db){const _0x24fdcb=a187_0xcd36dc,_0x59aad3=await this['salesforceQuery'][_0x24fdcb(0x134)](queries_1[_0x24fdcb(0x12a)]['replace']('%name%',_0x2c99db));if(_0x59aad3[_0x24fdcb(0x157)]===0x0)throw new not_found_error_1['SalesforceNotFoundError'](_0x24fdcb(0x131)+_0x2c99db+_0x24fdcb(0x153));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x24fdcb(0x135)](_0x59aad3[0x0]);}async[a187_0xcd36dc(0x137)](_0x524e42){const _0x56eb9a=a187_0xcd36dc,_0x56a276=await this['salesforceQuery'][_0x56eb9a(0x134)](queries_1[_0x56eb9a(0x172)][_0x56eb9a(0x156)](_0x56eb9a(0x16f),_0x524e42));if(_0x56a276[_0x56eb9a(0x157)]===0x0)throw new not_found_error_1[(_0x56eb9a(0x147))](_0x56eb9a(0x132)+_0x524e42+'\x20not\x20found\x20on\x20salesforce');return flosum_repository_sync_dto_1[_0x56eb9a(0x14f)][_0x56eb9a(0x177)](_0x56a276[0x0]);}async[a187_0xcd36dc(0x173)](_0xf6ed06){const _0xa2015b=a187_0xcd36dc,_0x19ae19=_0xa2015b(0x143)+queries_1[_0xa2015b(0x144)]+_0xa2015b(0x14a)+_0xf6ed06+'\x27';return this[_0xa2015b(0x13e)](_0x19ae19);}async[a187_0xcd36dc(0x133)](_0x5347d4){const _0x198040=a187_0xcd36dc,_0x2df6cd='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+queries_1[_0x198040(0x144)]+_0x198040(0x12e)+_0x5347d4+'\x27';return this[_0x198040(0x13e)](_0x2df6cd);}async[a187_0xcd36dc(0x13d)](_0x53bcf6){const _0x3d09e0=a187_0xcd36dc;var _0x5b13be;const _0x183cbc=queries_1[_0x3d09e0(0x129)]['replace'](_0x3d09e0(0x175),_0x53bcf6[_0x3d09e0(0x15b)])[_0x3d09e0(0x156)](_0x3d09e0(0x16f),_0x53bcf6[_0x3d09e0(0x178)]?constants_1[_0x3d09e0(0x166)]:constants_1[_0x3d09e0(0x149)]),_0x4a99f2=await this[_0x3d09e0(0x163)]['query'](_0x183cbc),_0xc2934=(_0x5b13be=_0x4a99f2[0x0])===null||_0x5b13be===void 0x0?void 0x0:_0x5b13be['Id'];if(!_0xc2934)throw new Error(errors_1['ERR_INVALID_ATTACHMENT_ID']);return _0xc2934;}async[a187_0xcd36dc(0x151)](_0x594936){const _0xf37702=a187_0xcd36dc;let _0x16f8de=await this[_0xf37702(0x13d)](_0x594936)['catch'](()=>null);return!_0x16f8de&&(_0x16f8de=await this[_0xf37702(0x164)]['createObject'](_0xf37702(0x139),{'Body':utils_1[_0xf37702(0x16e)]('{}'),'ParentId':_0x594936[_0xf37702(0x15b)],'ContentType':_0xf37702(0x16a),'Name':_0x594936[_0xf37702(0x178)]?constants_1[_0xf37702(0x166)]:constants_1[_0xf37702(0x149)]})),_0x16f8de;}async[a187_0xcd36dc(0x150)](_0x2978f1,_0x4e9cc6){const _0xebc81f=a187_0xcd36dc,_0x2bf50e=await this[_0xebc81f(0x151)](_0x2978f1);await this[_0xebc81f(0x164)]['patchObject'](_0xebc81f(0x139),_0x2bf50e,{'Body':utils_1['encodeBase64'](JSON['stringify'](_0x4e9cc6))});}async[a187_0xcd36dc(0x160)](_0x334b1c,_0x495e8b){const _0x491398=a187_0xcd36dc;await this[_0x491398(0x164)][_0x491398(0x13b)](_0x334b1c[_0x491398(0x128)],_0x334b1c[_0x491398(0x15b)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x491398(0x168)]:_0x495e8b});}async['disableSync'](_0x2b155d){const _0x5b2c99=a187_0xcd36dc;await this[_0x5b2c99(0x164)][_0x5b2c99(0x13b)](constants_1[_0x5b2c99(0x13f)]+_0x5b2c99(0x15c),_0x2b155d,{[constants_1[_0x5b2c99(0x13f)]+'Sync_In_Progress__c']:![]});}};SalesforceSyncService=__decorate([typedi_1[a187_0xcd36dc(0x176)](),__metadata('design:paramtypes',[salesforce_query_service_1[a187_0xcd36dc(0x148)],salesforce_service_1[a187_0xcd36dc(0x14e)]])],SalesforceSyncService),exports[a187_0xcd36dc(0x16b)]=SalesforceSyncService;