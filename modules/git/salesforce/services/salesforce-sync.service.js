function a269_0x4092(){const _0x8e1dce=['__esModule','function','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','../queries','ERR_INVALID_ATTACHMENT_ID','18327789nIrbpB','6UBWOvi','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','./salesforce-query.service','length','914274RKVdjn','GET_WAITING_BRANCHES_QUERY','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','toString','patchObject','object','design:paramtypes','repositoryId','SalesforceNotFoundError','createObject','../../../shared/utils','getAttachmentId','disableSync','../dto/flosum-repository-sync.dto','find','query','catch','getComponents','%id%','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','decorate','Branch_Name__c','11414YFtEKp','GET_REPOSITORY_QUERY','Branch\x20with\x20Id\x20','metadata','SalesforceSyncService','text/plain','fromBranchRecord','typedi','Repository\x20with\x20Id\x20','Components__r','Service','replace','updateRemoteState','1960770YnGoLf','Repository\x20','constructor','107235IkPzuE','__metadata','salesforceQuery','6033624QvzPVV','getAllRepositoryNames','getRemoteStateAttachmentId','SalesforceService','records','FLOSUM_GIT_NAMESPACE','defineProperty','48dSWCIL','push','getBranchRecords','GET_WAITING_REPOSITORIES_QUERY','Attachment','\x20not\x20found\x20on\x20salesforce','Branch\x20','GET_BRANCH_QUERY','Repository__r','map','GET_COMPONENTS_QUERY','SYNC_ATTACHMENT_FOR_BRANCH_NAME','../../../../constants','SalesforceQueryService','(((.+)+)+)+$','salesforceService','getComponentsFromRepository','objectId','FlosumRepositorySyncDto','fromRepositoryRecord','getRepositoryRecord','objectType','\x0a\x20\x20\x20\x20\x20\x20','getOwnPropertyDescriptor','%parentId%','Sync_In_Progress__c','FLOSUM_NAMESPACE','search','GET_BRANCH_BY_NAME_QUERY','./salesforce.service','4762985KVEKBX'];a269_0x4092=function(){return _0x8e1dce;};return a269_0x4092();}const a269_0x58c9e7=a269_0x2501;(function(_0x2f7d3e,_0x4714b1){const _0x55db58=a269_0x2501,_0x496c0f=_0x2f7d3e();while(!![]){try{const _0x3701a4=parseInt(_0x55db58(0x19c))/0x1+-parseInt(_0x55db58(0x186))/0x2+-parseInt(_0x55db58(0x1ac))/0x3*(-parseInt(_0x55db58(0x15d))/0x4)+parseInt(_0x55db58(0x17b))/0x5*(-parseInt(_0x55db58(0x182))/0x6)+parseInt(_0x55db58(0x1a9))/0x7+-parseInt(_0x55db58(0x1af))/0x8+parseInt(_0x55db58(0x181))/0x9;if(_0x3701a4===_0x4714b1)break;else _0x496c0f['push'](_0x496c0f['shift']());}catch(_0x10455a){_0x496c0f['push'](_0x496c0f['shift']());}}}(a269_0x4092,0x90c34));const a269_0x2c639d=(function(){let _0x4df6cd=!![];return function(_0x1c162d,_0x3e6442){const _0x36e488=_0x4df6cd?function(){if(_0x3e6442){const _0xeca723=_0x3e6442['apply'](_0x1c162d,arguments);return _0x3e6442=null,_0xeca723;}}:function(){};return _0x4df6cd=![],_0x36e488;};}()),a269_0xba1e6a=a269_0x2c639d(this,function(){const _0x465b05=a269_0x2501;return a269_0xba1e6a[_0x465b05(0x189)]()[_0x465b05(0x178)](_0x465b05(0x16b))[_0x465b05(0x189)]()[_0x465b05(0x1ab)](a269_0xba1e6a)[_0x465b05(0x178)](_0x465b05(0x16b));});function a269_0x2501(_0x20ff99,_0xc9f673){const _0xbae2d3=a269_0x4092();return a269_0x2501=function(_0xba1e6a,_0x2c639d){_0xba1e6a=_0xba1e6a-0x158;let _0x4092be=_0xbae2d3[_0xba1e6a];return _0x4092be;},a269_0x2501(_0x20ff99,_0xc9f673);}a269_0xba1e6a();'use strict';var __decorate=this&&this['__decorate']||function(_0x32dc40,_0x9af1f6,_0x2eba38,_0x24e091){const _0x4a9d0b=a269_0x2501;var _0x511bbc=arguments[_0x4a9d0b(0x185)],_0x323196=_0x511bbc<0x3?_0x9af1f6:_0x24e091===null?_0x24e091=Object[_0x4a9d0b(0x174)](_0x9af1f6,_0x2eba38):_0x24e091,_0x32edac;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x4a9d0b(0x17d))_0x323196=Reflect[_0x4a9d0b(0x19a)](_0x32dc40,_0x9af1f6,_0x2eba38,_0x24e091);else{for(var _0x4fed19=_0x32dc40[_0x4a9d0b(0x185)]-0x1;_0x4fed19>=0x0;_0x4fed19--)if(_0x32edac=_0x32dc40[_0x4fed19])_0x323196=(_0x511bbc<0x3?_0x32edac(_0x323196):_0x511bbc>0x3?_0x32edac(_0x9af1f6,_0x2eba38,_0x323196):_0x32edac(_0x9af1f6,_0x2eba38))||_0x323196;}return _0x511bbc>0x3&&_0x323196&&Object[_0x4a9d0b(0x15c)](_0x9af1f6,_0x2eba38,_0x323196),_0x323196;},__metadata=this&&this[a269_0x58c9e7(0x1ad)]||function(_0x18fc07,_0x278e7c){const _0x55f1bc=a269_0x58c9e7;if(typeof Reflect===_0x55f1bc(0x18b)&&typeof Reflect['metadata']===_0x55f1bc(0x17d))return Reflect[_0x55f1bc(0x19f)](_0x18fc07,_0x278e7c);};Object[a269_0x58c9e7(0x15c)](exports,a269_0x58c9e7(0x17c),{'value':!![]}),exports['SalesforceSyncService']=void 0x0;const typedi_1=require(a269_0x58c9e7(0x1a3)),constants_1=require(a269_0x58c9e7(0x169)),errors_1=require('../../../../constants/errors'),utils_1=require(a269_0x58c9e7(0x190)),flosum_repository_sync_dto_1=require(a269_0x58c9e7(0x193)),not_found_error_1=require('../errors/not-found.error'),queries_1=require(a269_0x58c9e7(0x17f)),salesforce_query_service_1=require(a269_0x58c9e7(0x184)),salesforce_service_1=require(a269_0x58c9e7(0x17a));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x212a86,_0x976d6e){const _0x17701d=a269_0x58c9e7;this['salesforceQuery']=_0x212a86,this[_0x17701d(0x16c)]=_0x976d6e;}async[a269_0x58c9e7(0x197)](_0x348254){const _0x47680b=a269_0x58c9e7;var _0x43c756;const _0x4f4bdb=await this[_0x47680b(0x1ae)]['query'](_0x348254),_0x3124bc=[];for(const _0x17bbe0 of _0x4f4bdb){const _0x1685eb=(_0x43c756=_0x17bbe0[constants_1['FLOSUM_NAMESPACE']+_0x47680b(0x1a5)])===null||_0x43c756===void 0x0?void 0x0:_0x43c756[_0x47680b(0x15a)];_0x1685eb&&_0x1685eb[_0x47680b(0x185)]&&_0x3124bc[_0x47680b(0x15e)](_0x1685eb[0x0]['Id']);}return _0x3124bc;}async[a269_0x58c9e7(0x1b0)](_0x1cdd76){const _0x1bf373=a269_0x58c9e7,_0x5a4345=await this[_0x1bf373(0x1ae)][_0x1bf373(0x195)](queries_1['GET_REPOSITORIES_NAMES_QUERY']['replace'](/\%connection_id\%/g,_0x1cdd76));return _0x5a4345[_0x1bf373(0x166)](_0x36a8d1=>{const _0x472c9c=_0x1bf373;return _0x36a8d1[constants_1[_0x472c9c(0x15b)]+_0x472c9c(0x165)]?_0x36a8d1[constants_1[_0x472c9c(0x15b)]+_0x472c9c(0x165)]['Name']:_0x36a8d1['Name'];});}async['getRepositoryRecords'](_0x40798c){const _0x3672a7=a269_0x58c9e7,_0x104bb8=await this[_0x3672a7(0x1ae)][_0x3672a7(0x195)](queries_1[_0x3672a7(0x160)][_0x3672a7(0x1a7)](/\%connection_id\%/g,_0x40798c));return _0x104bb8['map'](_0x353b07=>flosum_repository_sync_dto_1[_0x3672a7(0x16f)]['fromRepositoryRecord'](_0x353b07));}async[a269_0x58c9e7(0x15f)](_0x1ba663){const _0x2def7f=a269_0x58c9e7,_0x2c60b6=await this[_0x2def7f(0x1ae)][_0x2def7f(0x195)](queries_1[_0x2def7f(0x187)][_0x2def7f(0x1a7)](/%repositories_ids\%/g,_0x1ba663));return _0x2c60b6[_0x2def7f(0x166)](_0xf159e=>flosum_repository_sync_dto_1[_0x2def7f(0x16f)][_0x2def7f(0x1a2)](_0xf159e));}async[a269_0x58c9e7(0x171)](_0x359b37){const _0x5e7caa=a269_0x58c9e7,_0x46d65e=await this['salesforceQuery']['query'](queries_1[_0x5e7caa(0x19d)]['replace'](_0x5e7caa(0x198),_0x359b37));if(_0x46d65e[_0x5e7caa(0x185)]===0x0)throw new not_found_error_1[(_0x5e7caa(0x18e))](_0x5e7caa(0x1a4)+_0x359b37+_0x5e7caa(0x162));return flosum_repository_sync_dto_1[_0x5e7caa(0x16f)][_0x5e7caa(0x170)](_0x46d65e[0x0]);}async['getBranchRecord'](_0x58f272){const _0x17c2c8=a269_0x58c9e7,_0x598fc0=await this[_0x17c2c8(0x1ae)]['query'](queries_1[_0x17c2c8(0x164)]['replace']('%id%',_0x58f272));if(_0x598fc0[_0x17c2c8(0x185)]===0x0)throw new not_found_error_1[(_0x17c2c8(0x18e))](_0x17c2c8(0x19e)+_0x58f272+_0x17c2c8(0x162));return flosum_repository_sync_dto_1[_0x17c2c8(0x16f)][_0x17c2c8(0x1a2)](_0x598fc0[0x0]);}async['getBranchRecordByName'](_0x83edc4){const _0x37ba0f=a269_0x58c9e7,_0x19d155=await this['salesforceQuery'][_0x37ba0f(0x195)](queries_1[_0x37ba0f(0x179)][_0x37ba0f(0x1a7)]('%name%',_0x83edc4));if(_0x19d155[_0x37ba0f(0x185)]===0x0)throw new not_found_error_1[(_0x37ba0f(0x18e))](_0x37ba0f(0x163)+_0x83edc4+_0x37ba0f(0x162));const _0xb71dff=_0x19d155[_0x37ba0f(0x194)](_0x5433e1=>_0x5433e1[constants_1[_0x37ba0f(0x177)]+_0x37ba0f(0x19b)]===_0x83edc4);if(!_0xb71dff)throw new not_found_error_1[(_0x37ba0f(0x18e))](_0x37ba0f(0x163)+_0x83edc4+_0x37ba0f(0x162));return flosum_repository_sync_dto_1[_0x37ba0f(0x16f)][_0x37ba0f(0x1a2)](_0xb71dff);}async['getRepositoryRecordByName'](_0x5cebf3){const _0x586f08=a269_0x58c9e7,_0x36039a=await this[_0x586f08(0x1ae)][_0x586f08(0x195)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x586f08(0x1a7)]('%name%',_0x5cebf3));if(_0x36039a[_0x586f08(0x185)]===0x0)throw new not_found_error_1[(_0x586f08(0x18e))](_0x586f08(0x1aa)+_0x5cebf3+_0x586f08(0x162));return flosum_repository_sync_dto_1[_0x586f08(0x16f)][_0x586f08(0x170)](_0x36039a[0x0]);}async[a269_0x58c9e7(0x16d)](_0x278067){const _0x5448b5=a269_0x58c9e7,_0x15d5d2=_0x5448b5(0x173)+queries_1[_0x5448b5(0x167)]+_0x5448b5(0x188)+_0x278067+'\x27';return this[_0x5448b5(0x197)](_0x15d5d2);}async['getBranchComponents'](_0x380e0d){const _0x1edae3=a269_0x58c9e7,_0x1bfcdf='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+queries_1['GET_COMPONENTS_QUERY']+_0x1edae3(0x183)+_0x380e0d+'\x27';return this[_0x1edae3(0x197)](_0x1bfcdf);}async[a269_0x58c9e7(0x191)](_0x25ef13){const _0x15d87e=a269_0x58c9e7;var _0x350442;const _0x1387b5=queries_1[_0x15d87e(0x199)][_0x15d87e(0x1a7)](_0x15d87e(0x175),_0x25ef13[_0x15d87e(0x16e)])[_0x15d87e(0x1a7)]('%name%',_0x25ef13[_0x15d87e(0x18d)]?constants_1[_0x15d87e(0x17e)]:constants_1[_0x15d87e(0x168)]),_0x2ba0fc=await this[_0x15d87e(0x1ae)]['query'](_0x1387b5),_0x5d967d=(_0x350442=_0x2ba0fc[0x0])===null||_0x350442===void 0x0?void 0x0:_0x350442['Id'];if(!_0x5d967d)throw new Error(errors_1[_0x15d87e(0x180)]);return _0x5d967d;}async[a269_0x58c9e7(0x158)](_0x495350){const _0x3d64f9=a269_0x58c9e7;let _0x95f25f=await this['getAttachmentId'](_0x495350)[_0x3d64f9(0x196)](()=>null);return!_0x95f25f&&(_0x95f25f=await this[_0x3d64f9(0x16c)][_0x3d64f9(0x18f)](_0x3d64f9(0x161),{'Body':(0x0,utils_1['encodeBase64'])('{}'),'ParentId':_0x495350[_0x3d64f9(0x16e)],'ContentType':_0x3d64f9(0x1a1),'Name':_0x495350[_0x3d64f9(0x18d)]?constants_1[_0x3d64f9(0x17e)]:constants_1[_0x3d64f9(0x168)]})),_0x95f25f;}async[a269_0x58c9e7(0x1a8)](_0x461e37,_0x4f85cd){const _0x307cbb=a269_0x58c9e7,_0x41bdc1=await this[_0x307cbb(0x158)](_0x461e37);await this[_0x307cbb(0x16c)][_0x307cbb(0x18a)](_0x307cbb(0x161),_0x41bdc1,{'Body':(0x0,utils_1['encodeBase64'])(JSON['stringify'](_0x4f85cd))});}async['setStatus'](_0x4d8e3a,_0x5162ec){const _0xdc6be2=a269_0x58c9e7;await this[_0xdc6be2(0x16c)]['patchObject'](_0x4d8e3a[_0xdc6be2(0x172)],_0x4d8e3a[_0xdc6be2(0x16e)],{[constants_1[_0xdc6be2(0x15b)]+'Synchronization_Status__c']:_0x5162ec});}async[a269_0x58c9e7(0x192)](_0x47caae){const _0x45e586=a269_0x58c9e7;await this[_0x45e586(0x16c)][_0x45e586(0x18a)](constants_1[_0x45e586(0x15b)]+'Connection__c',_0x47caae,{[constants_1[_0x45e586(0x15b)]+_0x45e586(0x176)]:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a269_0x58c9e7(0x1a6)])(),__metadata(a269_0x58c9e7(0x18c),[salesforce_query_service_1[a269_0x58c9e7(0x16a)],salesforce_service_1[a269_0x58c9e7(0x159)]])],SalesforceSyncService),exports[a269_0x58c9e7(0x1a0)]=SalesforceSyncService;