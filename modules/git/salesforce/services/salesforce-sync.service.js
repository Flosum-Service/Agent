function a237_0x299a(){const _0x538ee3=['getBranchRecordByName','GET_REPOSITORY_QUERY','find','Synchronization_Status__c','patchObject','Components__r','FLOSUM_GIT_NAMESPACE','getOwnPropertyDescriptor','objectType','%id%','(((.+)+)+)+$','GET_COMPONENTS_QUERY','fromRepositoryRecord','getAttachmentId','Service','1816570NbBXBs','replace','salesforceService','SalesforceNotFoundError','design:paramtypes','3633224PnvGUy','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','1386984Nvltws','FlosumRepositorySyncDto','GET_WAITING_BRANCHES_QUERY','Repository__r','query','6IUNgvc','2311074ZfFgHq','Attachment','364607qZvbZE','push','stringify','getBranchComponents','SYNC_ATTACHMENT_FOR_BRANCH_NAME','getComponentsFromRepository','metadata','defineProperty','catch','Connection__c','getAllRepositoryNames','createObject','ERR_INVALID_ATTACHMENT_ID','__metadata','decorate','records','../../../shared/utils','../errors/not-found.error','object','function','Sync_In_Progress__c','../../../../constants','GET_BRANCH_BY_NAME_QUERY','__decorate','repositoryId','Repository\x20','salesforceQuery','Branch\x20with\x20Id\x20','__esModule','getBranchRecord','%parentId%','SalesforceSyncService','toString','getRepositoryRecordByName','getBranchRecords','GET_REPOSITORY_BY_NAME_QUERY','Branch\x20','objectId','disableSync','GET_REPOSITORIES_NAMES_QUERY','../dto/flosum-repository-sync.dto','typedi','\x20not\x20found\x20on\x20salesforce','FLOSUM_NAMESPACE','SalesforceQueryService','fromBranchRecord','getComponents','search','length','./salesforce-query.service','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','23506533pIniUH','encodeBase64','%name%','getRemoteStateAttachmentId','Repository\x20with\x20Id\x20','10rhlHvD','text/plain','map','1993996pvGimS','getRepositoryRecords','setStatus'];a237_0x299a=function(){return _0x538ee3;};return a237_0x299a();}const a237_0x4ddbd2=a237_0x3f00;(function(_0x283d16,_0x37e3f2){const _0x5d2b4d=a237_0x3f00,_0x4ddbf7=_0x283d16();while(!![]){try{const _0x489033=parseInt(_0x5d2b4d(0x133))/0x1*(-parseInt(_0x5d2b4d(0x130))/0x2)+-parseInt(_0x5d2b4d(0x131))/0x3+parseInt(_0x5d2b4d(0x112))/0x4+-parseInt(_0x5d2b4d(0x10f))/0x5*(parseInt(_0x5d2b4d(0x12b))/0x6)+parseInt(_0x5d2b4d(0x124))/0x7+-parseInt(_0x5d2b4d(0x129))/0x8+parseInt(_0x5d2b4d(0x166))/0x9;if(_0x489033===_0x37e3f2)break;else _0x4ddbf7['push'](_0x4ddbf7['shift']());}catch(_0x29ecd4){_0x4ddbf7['push'](_0x4ddbf7['shift']());}}}(a237_0x299a,0x8fd82));const a237_0x4780d4=(function(){let _0x42f96c=!![];return function(_0x48565c,_0x268c3a){const _0x10d483=_0x42f96c?function(){if(_0x268c3a){const _0x5e6970=_0x268c3a['apply'](_0x48565c,arguments);return _0x268c3a=null,_0x5e6970;}}:function(){};return _0x42f96c=![],_0x10d483;};}()),a237_0x4c9135=a237_0x4780d4(this,function(){const _0x4ffb25=a237_0x3f00;return a237_0x4c9135[_0x4ffb25(0x153)]()['search']('(((.+)+)+)+$')[_0x4ffb25(0x153)]()['constructor'](a237_0x4c9135)[_0x4ffb25(0x162)](_0x4ffb25(0x11f));});function a237_0x3f00(_0x458262,_0x3dc425){const _0x824949=a237_0x299a();return a237_0x3f00=function(_0x4c9135,_0x4780d4){_0x4c9135=_0x4c9135-0x10b;let _0x299a09=_0x824949[_0x4c9135];return _0x299a09;},a237_0x3f00(_0x458262,_0x3dc425);}a237_0x4c9135();'use strict';var __decorate=this&&this[a237_0x4ddbd2(0x14a)]||function(_0x5aa94b,_0x54662e,_0x41da93,_0x2a235a){const _0x4067b9=a237_0x4ddbd2;var _0x314e09=arguments[_0x4067b9(0x163)],_0x4c8285=_0x314e09<0x3?_0x54662e:_0x2a235a===null?_0x2a235a=Object[_0x4067b9(0x11c)](_0x54662e,_0x41da93):_0x2a235a,_0x5c2e18;if(typeof Reflect===_0x4067b9(0x145)&&typeof Reflect[_0x4067b9(0x141)]===_0x4067b9(0x146))_0x4c8285=Reflect['decorate'](_0x5aa94b,_0x54662e,_0x41da93,_0x2a235a);else{for(var _0x2ce1fd=_0x5aa94b[_0x4067b9(0x163)]-0x1;_0x2ce1fd>=0x0;_0x2ce1fd--)if(_0x5c2e18=_0x5aa94b[_0x2ce1fd])_0x4c8285=(_0x314e09<0x3?_0x5c2e18(_0x4c8285):_0x314e09>0x3?_0x5c2e18(_0x54662e,_0x41da93,_0x4c8285):_0x5c2e18(_0x54662e,_0x41da93))||_0x4c8285;}return _0x314e09>0x3&&_0x4c8285&&Object[_0x4067b9(0x13a)](_0x54662e,_0x41da93,_0x4c8285),_0x4c8285;},__metadata=this&&this[a237_0x4ddbd2(0x140)]||function(_0xcd9cc9,_0x46045e){const _0x246ce1=a237_0x4ddbd2;if(typeof Reflect===_0x246ce1(0x145)&&typeof Reflect[_0x246ce1(0x139)]==='function')return Reflect[_0x246ce1(0x139)](_0xcd9cc9,_0x46045e);};Object['defineProperty'](exports,a237_0x4ddbd2(0x14f),{'value':!![]}),exports['SalesforceSyncService']=void 0x0;const typedi_1=require(a237_0x4ddbd2(0x15c)),constants_1=require(a237_0x4ddbd2(0x148)),errors_1=require('../../../../constants/errors'),utils_1=require(a237_0x4ddbd2(0x143)),flosum_repository_sync_dto_1=require(a237_0x4ddbd2(0x15b)),not_found_error_1=require(a237_0x4ddbd2(0x144)),queries_1=require('../queries'),salesforce_query_service_1=require(a237_0x4ddbd2(0x164)),salesforce_service_1=require('./salesforce.service');let SalesforceSyncService=class SalesforceSyncService{constructor(_0x5de862,_0x28ee34){const _0x278629=a237_0x4ddbd2;this[_0x278629(0x14d)]=_0x5de862,this[_0x278629(0x126)]=_0x28ee34;}async[a237_0x4ddbd2(0x161)](_0x3bc900){const _0x281906=a237_0x4ddbd2;var _0x25ab55;const _0x16c9a4=await this[_0x281906(0x14d)][_0x281906(0x12f)](_0x3bc900),_0x529cab=[];for(const _0x480ae7 of _0x16c9a4){const _0x372299=(_0x25ab55=_0x480ae7[constants_1['FLOSUM_NAMESPACE']+_0x281906(0x11a)])===null||_0x25ab55===void 0x0?void 0x0:_0x25ab55[_0x281906(0x142)];_0x372299&&_0x372299[_0x281906(0x163)]&&_0x529cab[_0x281906(0x134)](_0x372299[0x0]['Id']);}return _0x529cab;}async[a237_0x4ddbd2(0x13d)](_0x40263c){const _0x4b23de=a237_0x4ddbd2,_0x1f446d=await this['salesforceQuery'][_0x4b23de(0x12f)](queries_1[_0x4b23de(0x15a)]['replace'](/\%connection_id\%/g,_0x40263c));return _0x1f446d[_0x4b23de(0x111)](_0x20714d=>{const _0x463d91=_0x4b23de;return _0x20714d[constants_1[_0x463d91(0x11b)]+'Repository__r']?_0x20714d[constants_1[_0x463d91(0x11b)]+_0x463d91(0x12e)]['Name']:_0x20714d['Name'];});}async[a237_0x4ddbd2(0x113)](_0x3c4012){const _0x3aeb18=a237_0x4ddbd2,_0x4c9e1f=await this['salesforceQuery'][_0x3aeb18(0x12f)](queries_1['GET_WAITING_REPOSITORIES_QUERY'][_0x3aeb18(0x125)](/\%connection_id\%/g,_0x3c4012));return _0x4c9e1f[_0x3aeb18(0x111)](_0x4fa297=>flosum_repository_sync_dto_1[_0x3aeb18(0x12c)][_0x3aeb18(0x121)](_0x4fa297));}async[a237_0x4ddbd2(0x155)](_0x1aa2aa){const _0x3b76a2=a237_0x4ddbd2,_0x571f5b=await this[_0x3b76a2(0x14d)][_0x3b76a2(0x12f)](queries_1[_0x3b76a2(0x12d)][_0x3b76a2(0x125)](/%repositories_ids\%/g,_0x1aa2aa));return _0x571f5b[_0x3b76a2(0x111)](_0x3536a7=>flosum_repository_sync_dto_1[_0x3b76a2(0x12c)][_0x3b76a2(0x160)](_0x3536a7));}async['getRepositoryRecord'](_0x3f158c){const _0x4314cd=a237_0x4ddbd2,_0x43918d=await this[_0x4314cd(0x14d)][_0x4314cd(0x12f)](queries_1[_0x4314cd(0x116)][_0x4314cd(0x125)](_0x4314cd(0x11e),_0x3f158c));if(_0x43918d[_0x4314cd(0x163)]===0x0)throw new not_found_error_1['SalesforceNotFoundError'](_0x4314cd(0x10e)+_0x3f158c+_0x4314cd(0x15d));return flosum_repository_sync_dto_1[_0x4314cd(0x12c)][_0x4314cd(0x121)](_0x43918d[0x0]);}async[a237_0x4ddbd2(0x150)](_0x1c24ba){const _0x16e327=a237_0x4ddbd2,_0x1b12ad=await this[_0x16e327(0x14d)]['query'](queries_1['GET_BRANCH_QUERY']['replace']('%id%',_0x1c24ba));if(_0x1b12ad['length']===0x0)throw new not_found_error_1[(_0x16e327(0x127))](_0x16e327(0x14e)+_0x1c24ba+_0x16e327(0x15d));return flosum_repository_sync_dto_1[_0x16e327(0x12c)][_0x16e327(0x160)](_0x1b12ad[0x0]);}async[a237_0x4ddbd2(0x115)](_0x259e0c){const _0x3c607a=a237_0x4ddbd2,_0x45516b=await this[_0x3c607a(0x14d)][_0x3c607a(0x12f)](queries_1[_0x3c607a(0x149)][_0x3c607a(0x125)]('%name%',_0x259e0c));if(_0x45516b[_0x3c607a(0x163)]===0x0)throw new not_found_error_1[(_0x3c607a(0x127))](_0x3c607a(0x157)+_0x259e0c+_0x3c607a(0x15d));const _0x53e04b=_0x45516b[_0x3c607a(0x117)](_0x4d5957=>_0x4d5957[constants_1[_0x3c607a(0x15e)]+'Branch_Name__c']===_0x259e0c);if(!_0x53e04b)throw new not_found_error_1[(_0x3c607a(0x127))](_0x3c607a(0x157)+_0x259e0c+_0x3c607a(0x15d));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x3c607a(0x160)](_0x53e04b);}async[a237_0x4ddbd2(0x154)](_0x65169a){const _0x37855d=a237_0x4ddbd2,_0x496679=await this[_0x37855d(0x14d)][_0x37855d(0x12f)](queries_1[_0x37855d(0x156)][_0x37855d(0x125)](_0x37855d(0x10c),_0x65169a));if(_0x496679[_0x37855d(0x163)]===0x0)throw new not_found_error_1[(_0x37855d(0x127))](_0x37855d(0x14c)+_0x65169a+_0x37855d(0x15d));return flosum_repository_sync_dto_1[_0x37855d(0x12c)][_0x37855d(0x121)](_0x496679[0x0]);}async[a237_0x4ddbd2(0x138)](_0x241594){const _0x858196=a237_0x4ddbd2,_0x58738a='\x0a\x20\x20\x20\x20\x20\x20'+queries_1[_0x858196(0x120)]+'\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27'+_0x241594+'\x27';return this['getComponents'](_0x58738a);}async[a237_0x4ddbd2(0x136)](_0x2020fc){const _0x28c6e0=a237_0x4ddbd2,_0x1d2ce4='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+queries_1[_0x28c6e0(0x120)]+_0x28c6e0(0x12a)+_0x2020fc+'\x27';return this[_0x28c6e0(0x161)](_0x1d2ce4);}async[a237_0x4ddbd2(0x122)](_0x1a7256){const _0x1003b8=a237_0x4ddbd2;var _0x7c4948;const _0x34e0e0=queries_1[_0x1003b8(0x165)][_0x1003b8(0x125)](_0x1003b8(0x151),_0x1a7256[_0x1003b8(0x158)])[_0x1003b8(0x125)]('%name%',_0x1a7256[_0x1003b8(0x14b)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0x1003b8(0x137)]),_0x4e00e9=await this[_0x1003b8(0x14d)][_0x1003b8(0x12f)](_0x34e0e0),_0x163ae9=(_0x7c4948=_0x4e00e9[0x0])===null||_0x7c4948===void 0x0?void 0x0:_0x7c4948['Id'];if(!_0x163ae9)throw new Error(errors_1[_0x1003b8(0x13f)]);return _0x163ae9;}async[a237_0x4ddbd2(0x10d)](_0x53905a){const _0x58402f=a237_0x4ddbd2;let _0x228c4d=await this[_0x58402f(0x122)](_0x53905a)[_0x58402f(0x13b)](()=>null);return!_0x228c4d&&(_0x228c4d=await this['salesforceService'][_0x58402f(0x13e)](_0x58402f(0x132),{'Body':(0x0,utils_1[_0x58402f(0x10b)])('{}'),'ParentId':_0x53905a[_0x58402f(0x158)],'ContentType':_0x58402f(0x110),'Name':_0x53905a[_0x58402f(0x14b)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0x58402f(0x137)]})),_0x228c4d;}async['updateRemoteState'](_0x7e2bee,_0x21e9a8){const _0x3d8764=a237_0x4ddbd2,_0x1fba33=await this[_0x3d8764(0x10d)](_0x7e2bee);await this[_0x3d8764(0x126)][_0x3d8764(0x119)](_0x3d8764(0x132),_0x1fba33,{'Body':(0x0,utils_1['encodeBase64'])(JSON[_0x3d8764(0x135)](_0x21e9a8))});}async[a237_0x4ddbd2(0x114)](_0x16a0ae,_0x1b1498){const _0x39689a=a237_0x4ddbd2;await this[_0x39689a(0x126)][_0x39689a(0x119)](_0x16a0ae[_0x39689a(0x11d)],_0x16a0ae['objectId'],{[constants_1[_0x39689a(0x11b)]+_0x39689a(0x118)]:_0x1b1498});}async[a237_0x4ddbd2(0x159)](_0x109a66){const _0xa79b94=a237_0x4ddbd2;await this[_0xa79b94(0x126)][_0xa79b94(0x119)](constants_1[_0xa79b94(0x11b)]+_0xa79b94(0x13c),_0x109a66,{[constants_1[_0xa79b94(0x11b)]+_0xa79b94(0x147)]:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a237_0x4ddbd2(0x123)])(),__metadata(a237_0x4ddbd2(0x128),[salesforce_query_service_1[a237_0x4ddbd2(0x15f)],salesforce_service_1['SalesforceService']])],SalesforceSyncService),exports[a237_0x4ddbd2(0x152)]=SalesforceSyncService;