function a236_0x5681(_0x488f59,_0x29b7aa){const _0x39fd06=a236_0xd297();return a236_0x5681=function(_0x2d476c,_0x1acd44){_0x2d476c=_0x2d476c-0x82;let _0xd297bf=_0x39fd06[_0x2d476c];return _0xd297bf;},a236_0x5681(_0x488f59,_0x29b7aa);}const a236_0x45e968=a236_0x5681;(function(_0x3ca62e,_0x549a9a){const _0x2cf24c=a236_0x5681,_0x1683d6=_0x3ca62e();while(!![]){try{const _0x44c949=parseInt(_0x2cf24c(0xbe))/0x1+-parseInt(_0x2cf24c(0xca))/0x2*(-parseInt(_0x2cf24c(0x93))/0x3)+parseInt(_0x2cf24c(0x9f))/0x4*(parseInt(_0x2cf24c(0x8b))/0x5)+parseInt(_0x2cf24c(0xaa))/0x6*(-parseInt(_0x2cf24c(0xc6))/0x7)+-parseInt(_0x2cf24c(0xa2))/0x8*(-parseInt(_0x2cf24c(0xcd))/0x9)+-parseInt(_0x2cf24c(0xa0))/0xa+-parseInt(_0x2cf24c(0x97))/0xb*(parseInt(_0x2cf24c(0xbb))/0xc);if(_0x44c949===_0x549a9a)break;else _0x1683d6['push'](_0x1683d6['shift']());}catch(_0x57cbf5){_0x1683d6['push'](_0x1683d6['shift']());}}}(a236_0xd297,0x7922d));const a236_0x1acd44=(function(){let _0x134743=!![];return function(_0x30a78b,_0x4d8271){const _0x4644af=_0x134743?function(){if(_0x4d8271){const _0x2cee13=_0x4d8271['apply'](_0x30a78b,arguments);return _0x4d8271=null,_0x2cee13;}}:function(){};return _0x134743=![],_0x4644af;};}()),a236_0x2d476c=a236_0x1acd44(this,function(){const _0x3c8f80=a236_0x5681;return a236_0x2d476c[_0x3c8f80(0xa8)]()[_0x3c8f80(0xc0)](_0x3c8f80(0xbc))[_0x3c8f80(0xa8)]()[_0x3c8f80(0xa5)](a236_0x2d476c)['search'](_0x3c8f80(0xbc));});a236_0x2d476c();'use strict';var __decorate=this&&this['__decorate']||function(_0x482113,_0xab9d4c,_0x5041b1,_0x2dfb20){const _0x519897=a236_0x5681;var _0x23b635=arguments[_0x519897(0x9c)],_0x4d35f7=_0x23b635<0x3?_0xab9d4c:_0x2dfb20===null?_0x2dfb20=Object[_0x519897(0xcc)](_0xab9d4c,_0x5041b1):_0x2dfb20,_0x19fdb5;if(typeof Reflect===_0x519897(0xa6)&&typeof Reflect[_0x519897(0xb8)]===_0x519897(0xa1))_0x4d35f7=Reflect['decorate'](_0x482113,_0xab9d4c,_0x5041b1,_0x2dfb20);else{for(var _0x350aab=_0x482113[_0x519897(0x9c)]-0x1;_0x350aab>=0x0;_0x350aab--)if(_0x19fdb5=_0x482113[_0x350aab])_0x4d35f7=(_0x23b635<0x3?_0x19fdb5(_0x4d35f7):_0x23b635>0x3?_0x19fdb5(_0xab9d4c,_0x5041b1,_0x4d35f7):_0x19fdb5(_0xab9d4c,_0x5041b1))||_0x4d35f7;}return _0x23b635>0x3&&_0x4d35f7&&Object['defineProperty'](_0xab9d4c,_0x5041b1,_0x4d35f7),_0x4d35f7;},__metadata=this&&this[a236_0x45e968(0xc3)]||function(_0x2afe4e,_0x544b59){const _0x15f32f=a236_0x45e968;if(typeof Reflect===_0x15f32f(0xa6)&&typeof Reflect[_0x15f32f(0xab)]==='function')return Reflect[_0x15f32f(0xab)](_0x2afe4e,_0x544b59);};function a236_0xd297(){const _0x318e15=['MAX_QUERY_ARRAY_ITEMS','%name%','fetchRepositoryComponentsByFilenames','10YzkqWB','extractFieldsFromRecord','%fileNames%','query','../../../../constants','getComponentRecordTypes','File_Name__c','%branchId%','6HttFXp','FLOSUM_COMMIT','replace','join','21087WurzOT','GET_BRANCH_BY_NAME_QUERY','Repository__c','splice','queryService','length','Version__c','fetchRepositoryComponents','1024676pFGouN','8157540uRWfFT','function','3873224AcNKrl','Repository\x20\x22','Service','constructor','object','fetchBranchComponentsByFilenames','toString','getRepositoryIdByName','2210328hRDzfM','metadata','design:paramtypes','fetchBranchComponents','typedi','FLOSUM_GIT_NAMESPACE','../utils/flosum-naming.utils','createCommit','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','NotFoundError','Commit_Name__c','GET_BRANCH_COMPONENTS_QUERY','map','Component_Name__c','decorate','Completed','./salesforce-rest.service','1356xESwwS','(((.+)+)+)+$','push','588831oQxoIY','defineProperty','search','Component_Type__c','CRC32__c','__metadata','restService','\x22\x20not\x20found\x20in\x20flosum.','14SXGQws','Branch\x20\x22','substr','SalesforceRestService','680002AOVNgU','./salesforce-query.service','getOwnPropertyDescriptor','9bKDtWg','Is_From_Agent__c','extractComponentMetadataFromRecord','FLOSUM_NAMESPACE','SalesforceGitSyncService','%repositoryId%','GET_REPOSITORY_BY_NAME_QUERY'];a236_0xd297=function(){return _0x318e15;};return a236_0xd297();}Object[a236_0x45e968(0xbf)](exports,'__esModule',{'value':!![]}),exports[a236_0x45e968(0x85)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a236_0x45e968(0xae)),constants_1=require(a236_0x45e968(0x8f)),queries_1=require('../queries'),flosum_naming_utils_1=require(a236_0x45e968(0xb0)),salesforce_query_service_1=require(a236_0x45e968(0xcb)),salesforce_rest_service_1=require(a236_0x45e968(0xba));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x3cb3fc,_0x4a7dbf){const _0x601471=a236_0x45e968;this[_0x601471(0x9b)]=_0x3cb3fc,this[_0x601471(0xc4)]=_0x4a7dbf,this[_0x601471(0x88)]=0xc8;}['extractComponentMetadataFromRecord'](_0x4a398d){const _0x1f5bc7=a236_0x45e968,_0x35d2da=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x4a398d,[_0x1f5bc7(0xb7),_0x1f5bc7(0xc1),_0x1f5bc7(0xc2),_0x1f5bc7(0x91),_0x1f5bc7(0x9d),'Id']);return{'id':_0x35d2da['Id'],'name':_0x35d2da[_0x1f5bc7(0xb7)],'type':_0x35d2da[_0x1f5bc7(0xc1)],'fileName':_0x35d2da[_0x1f5bc7(0x91)],'crc32':_0x35d2da[_0x1f5bc7(0xc2)],'version':+_0x35d2da['Version__c']};}async[a236_0x45e968(0xa9)](_0x29052a){const _0x343a59=a236_0x45e968,[_0x4b5a46]=await this[_0x343a59(0x9b)]['query'](queries_1[_0x343a59(0x87)][_0x343a59(0x95)](_0x343a59(0x89),_0x29052a));if(!_0x4b5a46)throw new not_found_error_1[(_0x343a59(0xb3))](_0x343a59(0xa3)+_0x29052a+_0x343a59(0xc5));return _0x4b5a46['Id'];}async['getBranchIdByName'](_0x1dcd21){const _0x4ead6a=a236_0x45e968,[_0x5c0dc5]=await this[_0x4ead6a(0x9b)][_0x4ead6a(0x8e)](queries_1[_0x4ead6a(0x98)][_0x4ead6a(0x95)](_0x4ead6a(0x89),_0x1dcd21));if(!_0x5c0dc5)throw new not_found_error_1[(_0x4ead6a(0xb3))](_0x4ead6a(0xc7)+_0x1dcd21+'\x22\x20not\x20found\x20in\x20flosum.');return _0x5c0dc5['Id'];}async[a236_0x45e968(0x90)](){const _0x33952d=a236_0x45e968,_0x5bf0c6=await this[_0x33952d(0x9b)][_0x33952d(0x8e)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x5bf0c6[_0x33952d(0xb6)](_0x337562=>(0x0,flosum_naming_utils_1[_0x33952d(0x8c)])(_0x337562,['Id','Name']))['map'](_0x5086c8=>({'id':_0x5086c8['Id'],'name':_0x5086c8['Name']}));}async[a236_0x45e968(0x8a)](_0x49a7e7,_0x581531){const _0x4ea0fc=a236_0x45e968,_0x721348=[];while(_0x49a7e7[_0x4ea0fc(0x9c)]){const _0x21d7f7=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY']['replace'](_0x4ea0fc(0x8d),_0x49a7e7[_0x4ea0fc(0x9a)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x4ea0fc(0xb6)](_0x5562ab=>'\x27'+_0x5562ab+'\x27')[_0x4ea0fc(0x96)](','))['replace'](_0x4ea0fc(0x86),_0x581531),_0x361550=await this['queryService'][_0x4ea0fc(0x8e)](_0x21d7f7);_0x721348['push'](..._0x361550);}return _0x721348[_0x4ea0fc(0xb6)](_0x1ad240=>this[_0x4ea0fc(0x83)](_0x1ad240));}async[a236_0x45e968(0xa7)](_0xe1c789,_0x437c81){const _0x5c5371=a236_0x45e968,_0x2f47bb=[];while(_0xe1c789[_0x5c5371(0x9c)]){const _0x36dc0f=queries_1[_0x5c5371(0xb2)][_0x5c5371(0x95)]('%fileNames%',_0xe1c789[_0x5c5371(0x9a)](0x0,this[_0x5c5371(0x88)])['map'](_0x32eddf=>'\x27'+_0x32eddf+'\x27')[_0x5c5371(0x96)](','))['replace'](_0x5c5371(0x92),_0x437c81),_0x4aba77=await this[_0x5c5371(0x9b)][_0x5c5371(0x8e)](_0x36dc0f);_0x2f47bb['push'](..._0x4aba77);}return _0x2f47bb[_0x5c5371(0xb6)](_0x4c12ed=>this['extractComponentMetadataFromRecord'](_0x4c12ed));}async[a236_0x45e968(0x9e)](_0x32edd){const _0x2e8f00=a236_0x45e968,_0x566815=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x2e8f00(0x95)](_0x2e8f00(0x86),_0x32edd),_0x520831=await this[_0x2e8f00(0x9b)][_0x2e8f00(0x8e)](_0x566815);return _0x520831[_0x2e8f00(0xb6)](_0x3bdf85=>this[_0x2e8f00(0x83)](_0x3bdf85));}async[a236_0x45e968(0xad)](_0x446964){const _0x10919a=a236_0x45e968,_0x45d2f2=queries_1[_0x10919a(0xb5)][_0x10919a(0x95)]('%branchId%',_0x446964),_0x321821=await this['queryService'][_0x10919a(0x8e)](_0x45d2f2);return _0x321821['map'](_0x4c10be=>this[_0x10919a(0x83)](_0x4c10be));}async['fetchCommitManifestsByComponentIds'](_0x5743ce){const _0x4ba95c=a236_0x45e968,_0x4eadd8=[..._0x5743ce],_0x15b2f7=[];while(_0x4eadd8['length']){const _0xfba689=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x4ba95c(0x95)]('%componentIds%',_0x4eadd8['splice'](0x0,this[_0x4ba95c(0x88)])['map'](_0x3ef459=>'\x27'+_0x3ef459+'\x27')[_0x4ba95c(0x96)](',')),_0x488891=await this[_0x4ba95c(0x9b)]['query'](_0xfba689);_0x15b2f7[_0x4ba95c(0xbd)](..._0x488891[_0x4ba95c(0xb6)](_0x4db6cc=>_0x4db6cc['Id']));}return _0x15b2f7;}async[a236_0x45e968(0xb1)](_0x1faab9,_0x1de955){const _0x3c6722=a236_0x45e968;return this[_0x3c6722(0xc4)]['post'](constants_1[_0x3c6722(0x94)],{[constants_1[_0x3c6722(0x84)]+_0x3c6722(0x99)]:_0x1de955,[constants_1[_0x3c6722(0x84)]+_0x3c6722(0xb4)]:_0x1faab9[_0x3c6722(0xc8)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0x3c6722(0xb9),[constants_1[_0x3c6722(0xaf)]+_0x3c6722(0x82)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x45e968(0xa4)])(),__metadata(a236_0x45e968(0xac),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a236_0x45e968(0xc9)]])],SalesforceGitSyncService),exports[a236_0x45e968(0x85)]=SalesforceGitSyncService;