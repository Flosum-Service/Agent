const a236_0x24e84a=a236_0x5c41;(function(_0x1116a7,_0x35f39e){const _0x504c75=a236_0x5c41,_0x406e51=_0x1116a7();while(!![]){try{const _0x2d25a1=-parseInt(_0x504c75(0x216))/0x1+parseInt(_0x504c75(0x213))/0x2+-parseInt(_0x504c75(0x1e1))/0x3+-parseInt(_0x504c75(0x1d5))/0x4+-parseInt(_0x504c75(0x1e5))/0x5*(parseInt(_0x504c75(0x203))/0x6)+-parseInt(_0x504c75(0x1fa))/0x7+parseInt(_0x504c75(0x1d6))/0x8;if(_0x2d25a1===_0x35f39e)break;else _0x406e51['push'](_0x406e51['shift']());}catch(_0x32eceb){_0x406e51['push'](_0x406e51['shift']());}}}(a236_0x4edc,0x3c2bb));const a236_0x346203=(function(){let _0x5051f7=!![];return function(_0x51496c,_0x3c0906){const _0x6b7a0e=_0x5051f7?function(){const _0x1aba87=a236_0x5c41;if(_0x3c0906){const _0x25334b=_0x3c0906[_0x1aba87(0x1e8)](_0x51496c,arguments);return _0x3c0906=null,_0x25334b;}}:function(){};return _0x5051f7=![],_0x6b7a0e;};}()),a236_0x5d42a3=a236_0x346203(this,function(){const _0x2803b5=a236_0x5c41;return a236_0x5d42a3[_0x2803b5(0x1f7)]()[_0x2803b5(0x20e)]('(((.+)+)+)+$')['toString']()[_0x2803b5(0x21e)](a236_0x5d42a3)[_0x2803b5(0x20e)]('(((.+)+)+)+$');});function a236_0x4edc(){const _0x286b4a=['Repository\x20\x22','queryService','432666NQShnQ','CRC32__c','splice','GET_REPOSITORY_BY_NAME_QUERY','../queries','GET_BRANCH_BY_NAME_QUERY','Status__c','getRepositoryIdByName','constructor','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','metadata','1930268fEexAG','15385448YUrCJU','%repositoryId%','%componentIds%','decorate','post','function','getBranchIdByName','fetchRepositoryComponentsByFilenames','NotFoundError','GET_COMPONENT_RECORD_TYPES_QUERY','createCommit','1328109jJqHnw','Completed','%branchId%','Is_From_Agent__c','15kpGEyV','Version__c','FLOSUM_COMMIT','apply','__decorate','Name','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','length','restService','SalesforceQueryService','__metadata','push','getOwnPropertyDescriptor','../../../../core/errors/not-found.error','./salesforce-rest.service','extractComponentMetadataFromRecord','FLOSUM_NAMESPACE','fetchBranchComponents','toString','../../../../constants','__esModule','3349948evJfFU','fetchRepositoryComponents','map','SalesforceGitSyncService','Component_Name__c','design:paramtypes','%fileNames%','File_Name__c','FLOSUM_GIT_NAMESPACE','425274upzzlE','%name%','Repository__c','Component_Type__c','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','./salesforce-query.service','replace','Service','\x22\x20not\x20found\x20in\x20flosum.','MAX_QUERY_ARRAY_ITEMS','join','search','extractFieldsFromRecord','defineProperty','Commit_Name__c','query','744830ovWlPT'];a236_0x4edc=function(){return _0x286b4a;};return a236_0x4edc();}a236_0x5d42a3();function a236_0x5c41(_0x4aa13a,_0x55eb58){const _0xadf904=a236_0x4edc();return a236_0x5c41=function(_0x5d42a3,_0x346203){_0x5d42a3=_0x5d42a3-0x1d3;let _0x4edc0e=_0xadf904[_0x5d42a3];return _0x4edc0e;},a236_0x5c41(_0x4aa13a,_0x55eb58);}'use strict';var __decorate=this&&this[a236_0x24e84a(0x1e9)]||function(_0x11468e,_0x2a247c,_0x6e337e,_0x6d867e){const _0x23ca33=a236_0x24e84a;var _0x484bb5=arguments[_0x23ca33(0x1ec)],_0x3eb0df=_0x484bb5<0x3?_0x2a247c:_0x6d867e===null?_0x6d867e=Object[_0x23ca33(0x1f1)](_0x2a247c,_0x6e337e):_0x6d867e,_0x26cd2b;if(typeof Reflect==='object'&&typeof Reflect[_0x23ca33(0x1d9)]==='function')_0x3eb0df=Reflect['decorate'](_0x11468e,_0x2a247c,_0x6e337e,_0x6d867e);else{for(var _0x273a6b=_0x11468e[_0x23ca33(0x1ec)]-0x1;_0x273a6b>=0x0;_0x273a6b--)if(_0x26cd2b=_0x11468e[_0x273a6b])_0x3eb0df=(_0x484bb5<0x3?_0x26cd2b(_0x3eb0df):_0x484bb5>0x3?_0x26cd2b(_0x2a247c,_0x6e337e,_0x3eb0df):_0x26cd2b(_0x2a247c,_0x6e337e))||_0x3eb0df;}return _0x484bb5>0x3&&_0x3eb0df&&Object[_0x23ca33(0x210)](_0x2a247c,_0x6e337e,_0x3eb0df),_0x3eb0df;},__metadata=this&&this[a236_0x24e84a(0x1ef)]||function(_0x5afdea,_0xe09bb0){const _0x230548=a236_0x24e84a;if(typeof Reflect==='object'&&typeof Reflect[_0x230548(0x1d4)]===_0x230548(0x1db))return Reflect[_0x230548(0x1d4)](_0x5afdea,_0xe09bb0);};Object[a236_0x24e84a(0x210)](exports,a236_0x24e84a(0x1f9),{'value':!![]}),exports[a236_0x24e84a(0x1fd)]=void 0x0;const not_found_error_1=require(a236_0x24e84a(0x1f2)),typedi_1=require('typedi'),constants_1=require(a236_0x24e84a(0x1f8)),queries_1=require(a236_0x24e84a(0x21a)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a236_0x24e84a(0x208)),salesforce_rest_service_1=require(a236_0x24e84a(0x1f3));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x58c180,_0x3d13ce){const _0x1b3c2b=a236_0x24e84a;this[_0x1b3c2b(0x215)]=_0x58c180,this[_0x1b3c2b(0x1ed)]=_0x3d13ce,this[_0x1b3c2b(0x20c)]=0xc8;}[a236_0x24e84a(0x1f4)](_0xb2f6a1){const _0x499d21=a236_0x24e84a,_0x161b21=(0x0,flosum_naming_utils_1[_0x499d21(0x20f)])(_0xb2f6a1,[_0x499d21(0x1fe),_0x499d21(0x206),_0x499d21(0x217),_0x499d21(0x201),_0x499d21(0x1e6),'Id']);return{'id':_0x161b21['Id'],'name':_0x161b21['Component_Name__c'],'type':_0x161b21[_0x499d21(0x206)],'fileName':_0x161b21[_0x499d21(0x201)],'crc32':_0x161b21[_0x499d21(0x217)],'version':+_0x161b21[_0x499d21(0x1e6)]};}async[a236_0x24e84a(0x21d)](_0x4a5693){const _0x330223=a236_0x24e84a,[_0x13f485]=await this['queryService'][_0x330223(0x212)](queries_1[_0x330223(0x219)][_0x330223(0x209)](_0x330223(0x204),_0x4a5693));if(!_0x13f485)throw new not_found_error_1[(_0x330223(0x1de))](_0x330223(0x214)+_0x4a5693+_0x330223(0x20b));return _0x13f485['Id'];}async[a236_0x24e84a(0x1dc)](_0x5c7d3d){const _0x54f0b6=a236_0x24e84a,[_0x47b6f0]=await this[_0x54f0b6(0x215)]['query'](queries_1[_0x54f0b6(0x21b)]['replace'](_0x54f0b6(0x204),_0x5c7d3d));if(!_0x47b6f0)throw new not_found_error_1[(_0x54f0b6(0x1de))]('Branch\x20\x22'+_0x5c7d3d+_0x54f0b6(0x20b));return _0x47b6f0['Id'];}async['getComponentRecordTypes'](){const _0x11d0eb=a236_0x24e84a,_0x1e9d72=await this[_0x11d0eb(0x215)][_0x11d0eb(0x212)](queries_1[_0x11d0eb(0x1df)]);return _0x1e9d72['map'](_0x3cee74=>(0x0,flosum_naming_utils_1[_0x11d0eb(0x20f)])(_0x3cee74,['Id','Name']))[_0x11d0eb(0x1fc)](_0x171275=>({'id':_0x171275['Id'],'name':_0x171275[_0x11d0eb(0x1ea)]}));}async[a236_0x24e84a(0x1dd)](_0x3e0d31,_0x582d02){const _0x5cfc67=a236_0x24e84a,_0x2ebf8c=[];while(_0x3e0d31['length']){const _0x1fc2df=queries_1[_0x5cfc67(0x1d3)]['replace'](_0x5cfc67(0x200),_0x3e0d31['splice'](0x0,this[_0x5cfc67(0x20c)])[_0x5cfc67(0x1fc)](_0x2c9126=>'\x27'+_0x2c9126+'\x27')[_0x5cfc67(0x20d)](','))[_0x5cfc67(0x209)](_0x5cfc67(0x1d7),_0x582d02),_0x51d399=await this[_0x5cfc67(0x215)][_0x5cfc67(0x212)](_0x1fc2df);_0x2ebf8c[_0x5cfc67(0x1f0)](..._0x51d399);}return _0x2ebf8c[_0x5cfc67(0x1fc)](_0x19b14c=>this[_0x5cfc67(0x1f4)](_0x19b14c));}async['fetchBranchComponentsByFilenames'](_0x4f8f01,_0x148b5b){const _0x4e71b5=a236_0x24e84a,_0x2fc75f=[];while(_0x4f8f01[_0x4e71b5(0x1ec)]){const _0x404390=queries_1[_0x4e71b5(0x1eb)][_0x4e71b5(0x209)](_0x4e71b5(0x200),_0x4f8f01[_0x4e71b5(0x218)](0x0,this[_0x4e71b5(0x20c)])[_0x4e71b5(0x1fc)](_0x40ca06=>'\x27'+_0x40ca06+'\x27')[_0x4e71b5(0x20d)](','))[_0x4e71b5(0x209)](_0x4e71b5(0x1e3),_0x148b5b),_0x38e945=await this[_0x4e71b5(0x215)][_0x4e71b5(0x212)](_0x404390);_0x2fc75f[_0x4e71b5(0x1f0)](..._0x38e945);}return _0x2fc75f[_0x4e71b5(0x1fc)](_0x2b2d03=>this['extractComponentMetadataFromRecord'](_0x2b2d03));}async[a236_0x24e84a(0x1fb)](_0x20852d){const _0x594d98=a236_0x24e84a,_0x846bab=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x594d98(0x209)](_0x594d98(0x1d7),_0x20852d),_0x31c5e1=await this[_0x594d98(0x215)][_0x594d98(0x212)](_0x846bab);return _0x31c5e1[_0x594d98(0x1fc)](_0x54dc17=>this[_0x594d98(0x1f4)](_0x54dc17));}async[a236_0x24e84a(0x1f6)](_0x40229c){const _0x1e22ed=a236_0x24e84a,_0x19fc5c=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x1e22ed(0x209)](_0x1e22ed(0x1e3),_0x40229c),_0x46ecfc=await this['queryService'][_0x1e22ed(0x212)](_0x19fc5c);return _0x46ecfc[_0x1e22ed(0x1fc)](_0x362cf0=>this[_0x1e22ed(0x1f4)](_0x362cf0));}async['fetchCommitManifestsByComponentIds'](_0x314923){const _0x1596a4=a236_0x24e84a,_0x10fceb=[..._0x314923],_0x47ac7f=[];while(_0x10fceb[_0x1596a4(0x1ec)]){const _0x78306d=queries_1[_0x1596a4(0x207)][_0x1596a4(0x209)](_0x1596a4(0x1d8),_0x10fceb[_0x1596a4(0x218)](0x0,this[_0x1596a4(0x20c)])[_0x1596a4(0x1fc)](_0x163b63=>'\x27'+_0x163b63+'\x27')[_0x1596a4(0x20d)](',')),_0x59d9e9=await this[_0x1596a4(0x215)][_0x1596a4(0x212)](_0x78306d);_0x47ac7f['push'](..._0x59d9e9[_0x1596a4(0x1fc)](_0x2a076b=>_0x2a076b['Id']));}return _0x47ac7f;}async[a236_0x24e84a(0x1e0)](_0x424282,_0x326e81){const _0x14cb37=a236_0x24e84a;return this[_0x14cb37(0x1ed)][_0x14cb37(0x1da)](constants_1[_0x14cb37(0x1e7)],{[constants_1[_0x14cb37(0x1f5)]+_0x14cb37(0x205)]:_0x326e81,[constants_1[_0x14cb37(0x1f5)]+_0x14cb37(0x211)]:_0x424282['substr'](0x0,0xff),[constants_1[_0x14cb37(0x1f5)]+_0x14cb37(0x21c)]:_0x14cb37(0x1e2),[constants_1[_0x14cb37(0x202)]+_0x14cb37(0x1e4)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x24e84a(0x20a)])(),__metadata(a236_0x24e84a(0x1ff),[salesforce_query_service_1[a236_0x24e84a(0x1ee)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;