const a275_0x22693c=a275_0x41fb;(function(_0x3e952b,_0x1a4cdf){const _0xa5d1de=a275_0x41fb,_0x5be414=_0x3e952b();while(!![]){try{const _0x208410=parseInt(_0xa5d1de(0xe4))/0x1+-parseInt(_0xa5d1de(0x128))/0x2*(-parseInt(_0xa5d1de(0x11d))/0x3)+-parseInt(_0xa5d1de(0xfa))/0x4*(parseInt(_0xa5d1de(0x115))/0x5)+-parseInt(_0xa5d1de(0x108))/0x6+-parseInt(_0xa5d1de(0x119))/0x7*(parseInt(_0xa5d1de(0x101))/0x8)+-parseInt(_0xa5d1de(0xe0))/0x9+-parseInt(_0xa5d1de(0x125))/0xa*(-parseInt(_0xa5d1de(0xdf))/0xb);if(_0x208410===_0x1a4cdf)break;else _0x5be414['push'](_0x5be414['shift']());}catch(_0x34c2ce){_0x5be414['push'](_0x5be414['shift']());}}}(a275_0x146e,0x1fc3b));const a275_0x4198e5=(function(){let _0x5d7e78=!![];return function(_0x1331c2,_0x4ee8f0){const _0x438071=_0x5d7e78?function(){const _0xb2bdaf=a275_0x41fb;if(_0x4ee8f0){const _0x4034e2=_0x4ee8f0[_0xb2bdaf(0xe6)](_0x1331c2,arguments);return _0x4ee8f0=null,_0x4034e2;}}:function(){};return _0x5d7e78=![],_0x438071;};}()),a275_0x5ec2ab=a275_0x4198e5(this,function(){const _0x58fae2=a275_0x41fb;return a275_0x5ec2ab[_0x58fae2(0x10c)]()[_0x58fae2(0xfd)]('(((.+)+)+)+$')[_0x58fae2(0x10c)]()[_0x58fae2(0xe3)](a275_0x5ec2ab)['search'](_0x58fae2(0x117));});a275_0x5ec2ab();function a275_0x146e(){const _0x5d8016=['Status__c','82495DVOIjR','GET_BRANCH_COMPONENTS_QUERY','function','getRepositoryIdByName','34950DOQSmt','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','decorate','Version__c','join','%branchId%','object','restService','524210PflyYe','../queries','__metadata','18PyzRhU','substr','metadata','map','push','Repository\x20\x22','GET_REPOSITORY_COMPONENTS_QUERY','66CuGLlY','769068vmSzby','MAX_QUERY_ARRAY_ITEMS','Is_From_Agent__c','constructor','110959bOCSFg','fetchCommitManifestsByComponentIds','apply','defineProperty','query','fetchRepositoryComponents','SalesforceQueryService','fetchRepositoryComponentsByFilenames','../../../../core/errors/not-found.error','%repositoryId%','File_Name__c','fetchBranchComponentsByFilenames','./salesforce-rest.service','design:paramtypes','getOwnPropertyDescriptor','../../../../constants','FLOSUM_NAMESPACE','FLOSUM_COMMIT','%componentIds%','SalesforceGitSyncService','extractComponentMetadataFromRecord','NotFoundError','3308xUNbTb','createCommit','splice','search','__decorate','GET_BRANCH_BY_NAME_QUERY','CRC32__c','88RfwPOS','Component_Name__c','\x22\x20not\x20found\x20in\x20flosum.','%fileNames%','replace','%name%','extractFieldsFromRecord','1026492fourxF','SalesforceRestService','length','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','toString','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','Name','Completed','FLOSUM_GIT_NAMESPACE','fetchBranchComponents','Component_Type__c','queryService','./salesforce-query.service','85hkjCMm','GET_REPOSITORY_BY_NAME_QUERY','(((.+)+)+)+$'];a275_0x146e=function(){return _0x5d8016;};return a275_0x146e();}'use strict';function a275_0x41fb(_0x686dca,_0xc24893){const _0x26b7a5=a275_0x146e();return a275_0x41fb=function(_0x5ec2ab,_0x4198e5){_0x5ec2ab=_0x5ec2ab-0xdd;let _0x146e23=_0x26b7a5[_0x5ec2ab];return _0x146e23;},a275_0x41fb(_0x686dca,_0xc24893);}var __decorate=this&&this[a275_0x22693c(0xfe)]||function(_0x454770,_0xfd5bc,_0x5f00a6,_0x5ca148){const _0x3441a0=a275_0x22693c;var _0x2e094b=arguments[_0x3441a0(0x10a)],_0x53920b=_0x2e094b<0x3?_0xfd5bc:_0x5ca148===null?_0x5ca148=Object[_0x3441a0(0xf2)](_0xfd5bc,_0x5f00a6):_0x5ca148,_0x197695;if(typeof Reflect===_0x3441a0(0x123)&&typeof Reflect[_0x3441a0(0x11f)]==='function')_0x53920b=Reflect[_0x3441a0(0x11f)](_0x454770,_0xfd5bc,_0x5f00a6,_0x5ca148);else{for(var _0x2ce15b=_0x454770[_0x3441a0(0x10a)]-0x1;_0x2ce15b>=0x0;_0x2ce15b--)if(_0x197695=_0x454770[_0x2ce15b])_0x53920b=(_0x2e094b<0x3?_0x197695(_0x53920b):_0x2e094b>0x3?_0x197695(_0xfd5bc,_0x5f00a6,_0x53920b):_0x197695(_0xfd5bc,_0x5f00a6))||_0x53920b;}return _0x2e094b>0x3&&_0x53920b&&Object[_0x3441a0(0xe7)](_0xfd5bc,_0x5f00a6,_0x53920b),_0x53920b;},__metadata=this&&this[a275_0x22693c(0x127)]||function(_0x542c9f,_0x262c5b){const _0x869b56=a275_0x22693c;if(typeof Reflect===_0x869b56(0x123)&&typeof Reflect[_0x869b56(0x12a)]===_0x869b56(0x11b))return Reflect[_0x869b56(0x12a)](_0x542c9f,_0x262c5b);};Object[a275_0x22693c(0xe7)](exports,'__esModule',{'value':!![]}),exports[a275_0x22693c(0xf7)]=void 0x0;const not_found_error_1=require(a275_0x22693c(0xec)),typedi_1=require('typedi'),constants_1=require(a275_0x22693c(0xf3)),queries_1=require(a275_0x22693c(0x126)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a275_0x22693c(0x114)),salesforce_rest_service_1=require(a275_0x22693c(0xf0));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x24fd7b,_0x19abdc){const _0x5c3f0c=a275_0x22693c;this[_0x5c3f0c(0x113)]=_0x24fd7b,this[_0x5c3f0c(0x124)]=_0x19abdc,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a275_0x22693c(0xf8)](_0x34d4ee){const _0x2d4ce8=a275_0x22693c,_0x8572fa=(0x0,flosum_naming_utils_1[_0x2d4ce8(0x107)])(_0x34d4ee,[_0x2d4ce8(0x102),'Component_Type__c',_0x2d4ce8(0x100),_0x2d4ce8(0xee),_0x2d4ce8(0x120),'Id']);return{'id':_0x8572fa['Id'],'name':_0x8572fa[_0x2d4ce8(0x102)],'type':_0x8572fa[_0x2d4ce8(0x112)],'fileName':_0x8572fa[_0x2d4ce8(0xee)],'crc32':_0x8572fa[_0x2d4ce8(0x100)],'version':+_0x8572fa[_0x2d4ce8(0x120)]};}async[a275_0x22693c(0x11c)](_0x2fac89){const _0x3caa95=a275_0x22693c,[_0xa56552]=await this['queryService'][_0x3caa95(0xe8)](queries_1[_0x3caa95(0x116)][_0x3caa95(0x105)]('%name%',_0x2fac89));if(!_0xa56552)throw new not_found_error_1['NotFoundError'](_0x3caa95(0xdd)+_0x2fac89+_0x3caa95(0x103));return _0xa56552['Id'];}async['getBranchIdByName'](_0x1ccc10){const _0x49fc1d=a275_0x22693c,[_0x2faae1]=await this[_0x49fc1d(0x113)][_0x49fc1d(0xe8)](queries_1[_0x49fc1d(0xff)]['replace'](_0x49fc1d(0x106),_0x1ccc10));if(!_0x2faae1)throw new not_found_error_1[(_0x49fc1d(0xf9))]('Branch\x20\x22'+_0x1ccc10+'\x22\x20not\x20found\x20in\x20flosum.');return _0x2faae1['Id'];}async['getComponentRecordTypes'](){const _0x364256=a275_0x22693c,_0x1ca6a3=await this[_0x364256(0x113)]['query'](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x1ca6a3[_0x364256(0x12b)](_0x362cab=>(0x0,flosum_naming_utils_1[_0x364256(0x107)])(_0x362cab,['Id',_0x364256(0x10e)]))[_0x364256(0x12b)](_0x43be31=>({'id':_0x43be31['Id'],'name':_0x43be31[_0x364256(0x10e)]}));}async[a275_0x22693c(0xeb)](_0x8c1154,_0x4b0e7b){const _0x21a915=a275_0x22693c,_0x1171c6=[];while(_0x8c1154[_0x21a915(0x10a)]){const _0x101a6f=queries_1[_0x21a915(0x10b)][_0x21a915(0x105)](_0x21a915(0x104),_0x8c1154['splice'](0x0,this[_0x21a915(0xe1)])[_0x21a915(0x12b)](_0x4f08a6=>'\x27'+_0x4f08a6+'\x27')[_0x21a915(0x121)](','))['replace'](_0x21a915(0xed),_0x4b0e7b),_0x1b170a=await this['queryService'][_0x21a915(0xe8)](_0x101a6f);_0x1171c6['push'](..._0x1b170a);}return _0x1171c6[_0x21a915(0x12b)](_0x92982e=>this[_0x21a915(0xf8)](_0x92982e));}async[a275_0x22693c(0xef)](_0x303a06,_0x2bcc72){const _0x2e41cf=a275_0x22693c,_0x94a2a5=[];while(_0x303a06[_0x2e41cf(0x10a)]){const _0x194ce9=queries_1[_0x2e41cf(0x10d)][_0x2e41cf(0x105)](_0x2e41cf(0x104),_0x303a06[_0x2e41cf(0xfc)](0x0,this[_0x2e41cf(0xe1)])[_0x2e41cf(0x12b)](_0xb8b5a9=>'\x27'+_0xb8b5a9+'\x27')['join'](','))[_0x2e41cf(0x105)](_0x2e41cf(0x122),_0x2bcc72),_0x1cd0eb=await this[_0x2e41cf(0x113)]['query'](_0x194ce9);_0x94a2a5[_0x2e41cf(0x12c)](..._0x1cd0eb);}return _0x94a2a5['map'](_0x5b76f4=>this['extractComponentMetadataFromRecord'](_0x5b76f4));}async[a275_0x22693c(0xe9)](_0x4de0b9){const _0x4df658=a275_0x22693c,_0x23074e=queries_1[_0x4df658(0xde)][_0x4df658(0x105)]('%repositoryId%',_0x4de0b9),_0x38fe90=await this[_0x4df658(0x113)][_0x4df658(0xe8)](_0x23074e);return _0x38fe90[_0x4df658(0x12b)](_0x512f6e=>this['extractComponentMetadataFromRecord'](_0x512f6e));}async[a275_0x22693c(0x111)](_0x5522bc){const _0x5e2bd1=a275_0x22693c,_0x1a4e4f=queries_1[_0x5e2bd1(0x11a)][_0x5e2bd1(0x105)](_0x5e2bd1(0x122),_0x5522bc),_0x42febd=await this[_0x5e2bd1(0x113)][_0x5e2bd1(0xe8)](_0x1a4e4f);return _0x42febd[_0x5e2bd1(0x12b)](_0xe72c8d=>this[_0x5e2bd1(0xf8)](_0xe72c8d));}async[a275_0x22693c(0xe5)](_0x48bcf5){const _0x191a69=a275_0x22693c,_0x39444b=[..._0x48bcf5],_0x1f2899=[];while(_0x39444b['length']){const _0x145509=queries_1[_0x191a69(0x11e)][_0x191a69(0x105)](_0x191a69(0xf6),_0x39444b[_0x191a69(0xfc)](0x0,this[_0x191a69(0xe1)])['map'](_0x576a6f=>'\x27'+_0x576a6f+'\x27')[_0x191a69(0x121)](',')),_0x48221f=await this[_0x191a69(0x113)][_0x191a69(0xe8)](_0x145509);_0x1f2899[_0x191a69(0x12c)](..._0x48221f[_0x191a69(0x12b)](_0x31b489=>_0x31b489['Id']));}return _0x1f2899;}async[a275_0x22693c(0xfb)](_0x40d209,_0x7aa5c4){const _0x2bedeb=a275_0x22693c;return this[_0x2bedeb(0x124)]['post'](constants_1[_0x2bedeb(0xf5)],{[constants_1[_0x2bedeb(0xf4)]+'Repository__c']:_0x7aa5c4,[constants_1[_0x2bedeb(0xf4)]+'Commit_Name__c']:_0x40d209[_0x2bedeb(0x129)](0x0,0xff),[constants_1[_0x2bedeb(0xf4)]+_0x2bedeb(0x118)]:_0x2bedeb(0x10f),[constants_1[_0x2bedeb(0x110)]+_0x2bedeb(0xe2)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata(a275_0x22693c(0xf1),[salesforce_query_service_1[a275_0x22693c(0xea)],salesforce_rest_service_1[a275_0x22693c(0x109)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;