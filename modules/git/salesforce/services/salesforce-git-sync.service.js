const a236_0xf6364d=a236_0x1039;function a236_0x1039(_0x2502ad,_0x24e12a){const _0x539b37=a236_0x45fa();return a236_0x1039=function(_0x5eabe0,_0xaa6235){_0x5eabe0=_0x5eabe0-0x16d;let _0x45fa0e=_0x539b37[_0x5eabe0];return _0x45fa0e;},a236_0x1039(_0x2502ad,_0x24e12a);}(function(_0x1b8bf1,_0x3ad20a){const _0x1ed117=a236_0x1039,_0x3c3845=_0x1b8bf1();while(!![]){try{const _0x4405fb=parseInt(_0x1ed117(0x17f))/0x1+-parseInt(_0x1ed117(0x174))/0x2+-parseInt(_0x1ed117(0x18c))/0x3*(parseInt(_0x1ed117(0x1a4))/0x4)+parseInt(_0x1ed117(0x186))/0x5+-parseInt(_0x1ed117(0x175))/0x6*(parseInt(_0x1ed117(0x190))/0x7)+-parseInt(_0x1ed117(0x180))/0x8+-parseInt(_0x1ed117(0x181))/0x9*(-parseInt(_0x1ed117(0x16f))/0xa);if(_0x4405fb===_0x3ad20a)break;else _0x3c3845['push'](_0x3c3845['shift']());}catch(_0x146fbc){_0x3c3845['push'](_0x3c3845['shift']());}}}(a236_0x45fa,0xaac95));const a236_0xaa6235=(function(){let _0x579a55=!![];return function(_0x57e583,_0x4c9059){const _0x3c45f3=_0x579a55?function(){if(_0x4c9059){const _0x1edcff=_0x4c9059['apply'](_0x57e583,arguments);return _0x4c9059=null,_0x1edcff;}}:function(){};return _0x579a55=![],_0x3c45f3;};}()),a236_0x5eabe0=a236_0xaa6235(this,function(){const _0x2157f6=a236_0x1039;return a236_0x5eabe0[_0x2157f6(0x19a)]()[_0x2157f6(0x171)](_0x2157f6(0x19d))['toString']()[_0x2157f6(0x1ac)](a236_0x5eabe0)[_0x2157f6(0x171)](_0x2157f6(0x19d));});a236_0x5eabe0();'use strict';var __decorate=this&&this[a236_0xf6364d(0x194)]||function(_0x1e403a,_0x3b844e,_0x39d1e1,_0xcf3f8d){const _0x6a63c2=a236_0xf6364d;var _0x17d479=arguments[_0x6a63c2(0x18e)],_0x1f51da=_0x17d479<0x3?_0x3b844e:_0xcf3f8d===null?_0xcf3f8d=Object[_0x6a63c2(0x1bc)](_0x3b844e,_0x39d1e1):_0xcf3f8d,_0x35adec;if(typeof Reflect===_0x6a63c2(0x176)&&typeof Reflect[_0x6a63c2(0x1b5)]==='function')_0x1f51da=Reflect['decorate'](_0x1e403a,_0x3b844e,_0x39d1e1,_0xcf3f8d);else{for(var _0x98add5=_0x1e403a['length']-0x1;_0x98add5>=0x0;_0x98add5--)if(_0x35adec=_0x1e403a[_0x98add5])_0x1f51da=(_0x17d479<0x3?_0x35adec(_0x1f51da):_0x17d479>0x3?_0x35adec(_0x3b844e,_0x39d1e1,_0x1f51da):_0x35adec(_0x3b844e,_0x39d1e1))||_0x1f51da;}return _0x17d479>0x3&&_0x1f51da&&Object[_0x6a63c2(0x193)](_0x3b844e,_0x39d1e1,_0x1f51da),_0x1f51da;},__metadata=this&&this[a236_0xf6364d(0x17d)]||function(_0x3f140d,_0x2a6627){const _0x235260=a236_0xf6364d;if(typeof Reflect==='object'&&typeof Reflect[_0x235260(0x1b7)]===_0x235260(0x1ae))return Reflect[_0x235260(0x1b7)](_0x3f140d,_0x2a6627);};Object[a236_0xf6364d(0x193)](exports,a236_0xf6364d(0x1b4),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;function a236_0x45fa(){const _0x52e2fb=['Version__c','CRC32__c','%name%','toString','getRepositoryIdByName','GET_BRANCH_COMPONENTS_QUERY','(((.+)+)+)+$','MAX_QUERY_ARRAY_ITEMS','join','getBranchIdByName','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','typedi','1079396MIVwYa','../queries','Component_Type__c','GET_REPOSITORY_BY_NAME_QUERY','fetchCommitManifestsByComponentIds','map','./salesforce-query.service','fetchRepositoryComponents','constructor','SalesforceGitSyncService','function','splice','extractFieldsFromRecord','Component_Name__c','replace','restService','__esModule','decorate','Completed','metadata','FLOSUM_GIT_NAMESPACE','getComponentRecordTypes','fetchRepositoryComponentsByFilenames','%fileNames%','getOwnPropertyDescriptor','Commit_Name__c','%componentIds%','18307180oJmhFN','\x22\x20not\x20found\x20in\x20flosum.','search','../utils/flosum-naming.utils','%branchId%','1848088JDBoOe','18DUuUAR','object','GET_BRANCH_BY_NAME_QUERY','createCommit','../../../../constants','GET_REPOSITORY_COMPONENTS_QUERY','FLOSUM_NAMESPACE','Status__c','__metadata','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','338378EDGhjb','5847392vkXsxb','18kOJxJK','post','NotFoundError','queryService','%repositoryId%','3237290JrgVsm','Name','substr','Repository__c','File_Name__c','extractComponentMetadataFromRecord','15lHnPcb','push','length','GET_COMPONENT_RECORD_TYPES_QUERY','2201542qobkkl','./salesforce-rest.service','Service','defineProperty','__decorate','query','Repository\x20\x22'];a236_0x45fa=function(){return _0x52e2fb;};return a236_0x45fa();}const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a236_0xf6364d(0x1a3)),constants_1=require(a236_0xf6364d(0x179)),queries_1=require(a236_0xf6364d(0x1a5)),flosum_naming_utils_1=require(a236_0xf6364d(0x172)),salesforce_query_service_1=require(a236_0xf6364d(0x1aa)),salesforce_rest_service_1=require(a236_0xf6364d(0x191));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x801e31,_0x3f1392){const _0x1ae5b9=a236_0xf6364d;this[_0x1ae5b9(0x184)]=_0x801e31,this[_0x1ae5b9(0x1b3)]=_0x3f1392,this[_0x1ae5b9(0x19e)]=0xc8;}['extractComponentMetadataFromRecord'](_0x2063e8){const _0x5d1386=a236_0xf6364d,_0x50445f=(0x0,flosum_naming_utils_1[_0x5d1386(0x1b0)])(_0x2063e8,[_0x5d1386(0x1b1),_0x5d1386(0x1a6),_0x5d1386(0x198),_0x5d1386(0x18a),_0x5d1386(0x197),'Id']);return{'id':_0x50445f['Id'],'name':_0x50445f[_0x5d1386(0x1b1)],'type':_0x50445f[_0x5d1386(0x1a6)],'fileName':_0x50445f[_0x5d1386(0x18a)],'crc32':_0x50445f['CRC32__c'],'version':+_0x50445f[_0x5d1386(0x197)]};}async[a236_0xf6364d(0x19b)](_0x2f33b2){const _0x4c9dd5=a236_0xf6364d,[_0xba9146]=await this['queryService']['query'](queries_1[_0x4c9dd5(0x1a7)][_0x4c9dd5(0x1b2)](_0x4c9dd5(0x199),_0x2f33b2));if(!_0xba9146)throw new not_found_error_1[(_0x4c9dd5(0x183))](_0x4c9dd5(0x196)+_0x2f33b2+'\x22\x20not\x20found\x20in\x20flosum.');return _0xba9146['Id'];}async[a236_0xf6364d(0x1a0)](_0x5989f2){const _0x20fe13=a236_0xf6364d,[_0xc94241]=await this['queryService'][_0x20fe13(0x195)](queries_1[_0x20fe13(0x177)][_0x20fe13(0x1b2)](_0x20fe13(0x199),_0x5989f2));if(!_0xc94241)throw new not_found_error_1['NotFoundError']('Branch\x20\x22'+_0x5989f2+_0x20fe13(0x170));return _0xc94241['Id'];}async[a236_0xf6364d(0x1b9)](){const _0x4c55c9=a236_0xf6364d,_0x4dfbeb=await this[_0x4c55c9(0x184)][_0x4c55c9(0x195)](queries_1[_0x4c55c9(0x18f)]);return _0x4dfbeb[_0x4c55c9(0x1a9)](_0xbf13c6=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0xbf13c6,['Id',_0x4c55c9(0x187)]))[_0x4c55c9(0x1a9)](_0xab9107=>({'id':_0xab9107['Id'],'name':_0xab9107[_0x4c55c9(0x187)]}));}async[a236_0xf6364d(0x1ba)](_0x5931dc,_0x326bc0){const _0x5069e6=a236_0xf6364d,_0x532058=[];while(_0x5931dc[_0x5069e6(0x18e)]){const _0x41016b=queries_1[_0x5069e6(0x17e)]['replace'](_0x5069e6(0x1bb),_0x5931dc[_0x5069e6(0x1af)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x5069e6(0x1a9)](_0x5c2cdc=>'\x27'+_0x5c2cdc+'\x27')['join'](','))[_0x5069e6(0x1b2)](_0x5069e6(0x185),_0x326bc0),_0x161daf=await this[_0x5069e6(0x184)][_0x5069e6(0x195)](_0x41016b);_0x532058[_0x5069e6(0x18d)](..._0x161daf);}return _0x532058[_0x5069e6(0x1a9)](_0x1d15be=>this[_0x5069e6(0x18b)](_0x1d15be));}async['fetchBranchComponentsByFilenames'](_0x396996,_0xb6ac3c){const _0x2e9ec8=a236_0xf6364d,_0x515d95=[];while(_0x396996['length']){const _0x3cd8b3=queries_1[_0x2e9ec8(0x1a2)][_0x2e9ec8(0x1b2)](_0x2e9ec8(0x1bb),_0x396996[_0x2e9ec8(0x1af)](0x0,this[_0x2e9ec8(0x19e)])[_0x2e9ec8(0x1a9)](_0x5dcf99=>'\x27'+_0x5dcf99+'\x27')[_0x2e9ec8(0x19f)](','))[_0x2e9ec8(0x1b2)](_0x2e9ec8(0x173),_0xb6ac3c),_0x5e9ac2=await this[_0x2e9ec8(0x184)][_0x2e9ec8(0x195)](_0x3cd8b3);_0x515d95[_0x2e9ec8(0x18d)](..._0x5e9ac2);}return _0x515d95[_0x2e9ec8(0x1a9)](_0x205359=>this[_0x2e9ec8(0x18b)](_0x205359));}async[a236_0xf6364d(0x1ab)](_0x21749e){const _0x4b8762=a236_0xf6364d,_0x28b251=queries_1[_0x4b8762(0x17a)]['replace'](_0x4b8762(0x185),_0x21749e),_0x5adf36=await this[_0x4b8762(0x184)][_0x4b8762(0x195)](_0x28b251);return _0x5adf36[_0x4b8762(0x1a9)](_0x43e92d=>this[_0x4b8762(0x18b)](_0x43e92d));}async['fetchBranchComponents'](_0x49eddd){const _0x43e2c2=a236_0xf6364d,_0x4d1e8b=queries_1[_0x43e2c2(0x19c)][_0x43e2c2(0x1b2)](_0x43e2c2(0x173),_0x49eddd),_0x35ed1d=await this[_0x43e2c2(0x184)][_0x43e2c2(0x195)](_0x4d1e8b);return _0x35ed1d['map'](_0x5dcd60=>this[_0x43e2c2(0x18b)](_0x5dcd60));}async[a236_0xf6364d(0x1a8)](_0x499f1f){const _0x3d542f=a236_0xf6364d,_0x5d41e3=[..._0x499f1f],_0x46b21b=[];while(_0x5d41e3[_0x3d542f(0x18e)]){const _0x42b6ce=queries_1[_0x3d542f(0x1a1)]['replace'](_0x3d542f(0x16e),_0x5d41e3[_0x3d542f(0x1af)](0x0,this[_0x3d542f(0x19e)])[_0x3d542f(0x1a9)](_0x5ba917=>'\x27'+_0x5ba917+'\x27')[_0x3d542f(0x19f)](',')),_0x2b00f3=await this[_0x3d542f(0x184)]['query'](_0x42b6ce);_0x46b21b[_0x3d542f(0x18d)](..._0x2b00f3['map'](_0x47640b=>_0x47640b['Id']));}return _0x46b21b;}async[a236_0xf6364d(0x178)](_0x1682e7,_0xc8476e){const _0x20d6b1=a236_0xf6364d;return this[_0x20d6b1(0x1b3)][_0x20d6b1(0x182)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x20d6b1(0x17b)]+_0x20d6b1(0x189)]:_0xc8476e,[constants_1[_0x20d6b1(0x17b)]+_0x20d6b1(0x16d)]:_0x1682e7[_0x20d6b1(0x188)](0x0,0xff),[constants_1[_0x20d6b1(0x17b)]+_0x20d6b1(0x17c)]:_0x20d6b1(0x1b6),[constants_1[_0x20d6b1(0x1b8)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0xf6364d(0x192)])(),__metadata('design:paramtypes',[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a236_0xf6364d(0x1ad)]=SalesforceGitSyncService;