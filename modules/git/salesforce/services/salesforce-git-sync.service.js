const a263_0x36382a=a263_0x2bcf;(function(_0x3c4e3e,_0x1fc382){const _0xcbc217=a263_0x2bcf,_0x5e5dc2=_0x3c4e3e();while(!![]){try{const _0x4774e0=-parseInt(_0xcbc217(0x1ff))/0x1*(-parseInt(_0xcbc217(0x20c))/0x2)+parseInt(_0xcbc217(0x215))/0x3+-parseInt(_0xcbc217(0x213))/0x4+parseInt(_0xcbc217(0x201))/0x5+-parseInt(_0xcbc217(0x1dd))/0x6+-parseInt(_0xcbc217(0x1ea))/0x7+-parseInt(_0xcbc217(0x1e6))/0x8;if(_0x4774e0===_0x1fc382)break;else _0x5e5dc2['push'](_0x5e5dc2['shift']());}catch(_0x202917){_0x5e5dc2['push'](_0x5e5dc2['shift']());}}}(a263_0x62d4,0x9a399));const a263_0x291241=(function(){let _0xb93d2c=!![];return function(_0x5b516c,_0x23257e){const _0x584e67=_0xb93d2c?function(){if(_0x23257e){const _0x1eb6a7=_0x23257e['apply'](_0x5b516c,arguments);return _0x23257e=null,_0x1eb6a7;}}:function(){};return _0xb93d2c=![],_0x584e67;};}()),a263_0x16a770=a263_0x291241(this,function(){const _0x8d1d60=a263_0x2bcf;return a263_0x16a770[_0x8d1d60(0x1e7)]()['search']('(((.+)+)+)+$')[_0x8d1d60(0x1e7)]()[_0x8d1d60(0x1e2)](a263_0x16a770)['search'](_0x8d1d60(0x1fd));});a263_0x16a770();'use strict';function a263_0x2bcf(_0x2c6ac,_0x5b14a1){const _0x2f608c=a263_0x62d4();return a263_0x2bcf=function(_0x16a770,_0x291241){_0x16a770=_0x16a770-0x1d2;let _0x62d4b=_0x2f608c[_0x16a770];return _0x62d4b;},a263_0x2bcf(_0x2c6ac,_0x5b14a1);}var __decorate=this&&this['__decorate']||function(_0x4432f3,_0x3b01dc,_0x1b1ba4,_0x1818a2){const _0x2d7407=a263_0x2bcf;var _0x565771=arguments[_0x2d7407(0x210)],_0x1b1a3b=_0x565771<0x3?_0x3b01dc:_0x1818a2===null?_0x1818a2=Object[_0x2d7407(0x20b)](_0x3b01dc,_0x1b1ba4):_0x1818a2,_0x9d9979;if(typeof Reflect===_0x2d7407(0x204)&&typeof Reflect['decorate']===_0x2d7407(0x21b))_0x1b1a3b=Reflect['decorate'](_0x4432f3,_0x3b01dc,_0x1b1ba4,_0x1818a2);else{for(var _0x4e1a34=_0x4432f3[_0x2d7407(0x210)]-0x1;_0x4e1a34>=0x0;_0x4e1a34--)if(_0x9d9979=_0x4432f3[_0x4e1a34])_0x1b1a3b=(_0x565771<0x3?_0x9d9979(_0x1b1a3b):_0x565771>0x3?_0x9d9979(_0x3b01dc,_0x1b1ba4,_0x1b1a3b):_0x9d9979(_0x3b01dc,_0x1b1ba4))||_0x1b1a3b;}return _0x565771>0x3&&_0x1b1a3b&&Object[_0x2d7407(0x1e1)](_0x3b01dc,_0x1b1ba4,_0x1b1a3b),_0x1b1a3b;},__metadata=this&&this[a263_0x36382a(0x214)]||function(_0xc8abc6,_0x4ad3aa){const _0x56080a=a263_0x36382a;if(typeof Reflect===_0x56080a(0x204)&&typeof Reflect['metadata']===_0x56080a(0x21b))return Reflect[_0x56080a(0x208)](_0xc8abc6,_0x4ad3aa);};Object[a263_0x36382a(0x1e1)](exports,a263_0x36382a(0x218),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a263_0x36382a(0x211)),typedi_1=require(a263_0x36382a(0x1e8)),constants_1=require(a263_0x36382a(0x1e3)),queries_1=require(a263_0x36382a(0x1f4)),flosum_naming_utils_1=require(a263_0x36382a(0x1ed)),salesforce_query_service_1=require(a263_0x36382a(0x1e9)),salesforce_rest_service_1=require(a263_0x36382a(0x216));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x2c3f8e,_0x56bc79){const _0x40ab85=a263_0x36382a;this[_0x40ab85(0x21c)]=_0x2c3f8e,this['restService']=_0x56bc79,this[_0x40ab85(0x1ec)]=0xc8;}[a263_0x36382a(0x212)](_0x43ae38){const _0x547274=a263_0x36382a,_0x54b7e2=(0x0,flosum_naming_utils_1[_0x547274(0x1d6)])(_0x43ae38,[_0x547274(0x1f3),_0x547274(0x203),_0x547274(0x1fb),'File_Name__c',_0x547274(0x207),'Id']);return{'id':_0x54b7e2['Id'],'name':_0x54b7e2[_0x547274(0x1f3)],'type':_0x54b7e2[_0x547274(0x203)],'fileName':_0x54b7e2[_0x547274(0x20a)],'crc32':_0x54b7e2['CRC32__c'],'version':+_0x54b7e2[_0x547274(0x207)]};}async['getRepositoryIdByName'](_0x27959d){const _0x5d9fdb=a263_0x36382a,[_0x75d809]=await this[_0x5d9fdb(0x21c)][_0x5d9fdb(0x20e)](queries_1['GET_REPOSITORY_BY_NAME_QUERY']['replace'](_0x5d9fdb(0x1d2),_0x27959d));if(!_0x75d809)throw new not_found_error_1[(_0x5d9fdb(0x1d9))](_0x5d9fdb(0x1de)+_0x27959d+_0x5d9fdb(0x1e5));return _0x75d809['Id'];}async[a263_0x36382a(0x1d7)](_0x5c56db){const _0x3eeb38=a263_0x36382a,[_0x1be65b]=await this[_0x3eeb38(0x21c)][_0x3eeb38(0x20e)](queries_1[_0x3eeb38(0x202)]['replace'](_0x3eeb38(0x1d2),_0x5c56db));if(!_0x1be65b)throw new not_found_error_1['NotFoundError'](_0x3eeb38(0x1f0)+_0x5c56db+_0x3eeb38(0x1e5));return _0x1be65b['Id'];}async[a263_0x36382a(0x1ef)](){const _0x4540f5=a263_0x36382a,_0x27e393=await this[_0x4540f5(0x21c)][_0x4540f5(0x20e)](queries_1[_0x4540f5(0x217)]);return _0x27e393[_0x4540f5(0x200)](_0x5e788a=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x5e788a,['Id',_0x4540f5(0x1df)]))[_0x4540f5(0x200)](_0x4ae468=>({'id':_0x4ae468['Id'],'name':_0x4ae468[_0x4540f5(0x1df)]}));}async[a263_0x36382a(0x1f2)](_0x5bbb7a,_0x27934f){const _0x94c864=a263_0x36382a,_0x3d5671=[];while(_0x5bbb7a[_0x94c864(0x210)]){const _0x1a35e3=queries_1[_0x94c864(0x1f9)]['replace']('%fileNames%',_0x5bbb7a[_0x94c864(0x1ee)](0x0,this[_0x94c864(0x1ec)])[_0x94c864(0x200)](_0x3fd8d4=>'\x27'+_0x3fd8d4+'\x27')[_0x94c864(0x1fc)](','))[_0x94c864(0x219)]('%repositoryId%',_0x27934f),_0x327bf5=await this[_0x94c864(0x21c)]['query'](_0x1a35e3);_0x3d5671[_0x94c864(0x1da)](..._0x327bf5);}return _0x3d5671['map'](_0x4f7945=>this[_0x94c864(0x212)](_0x4f7945));}async['fetchBranchComponentsByFilenames'](_0x2b7e71,_0xeb0a57){const _0x3c04d3=a263_0x36382a,_0x41666a=[];while(_0x2b7e71[_0x3c04d3(0x210)]){const _0x2f172c=queries_1[_0x3c04d3(0x1f5)][_0x3c04d3(0x219)](_0x3c04d3(0x1f6),_0x2b7e71['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x4c0e67=>'\x27'+_0x4c0e67+'\x27')[_0x3c04d3(0x1fc)](','))['replace'](_0x3c04d3(0x1db),_0xeb0a57),_0x4150db=await this[_0x3c04d3(0x21c)][_0x3c04d3(0x20e)](_0x2f172c);_0x41666a['push'](..._0x4150db);}return _0x41666a[_0x3c04d3(0x200)](_0x124453=>this[_0x3c04d3(0x212)](_0x124453));}async[a263_0x36382a(0x1fe)](_0x323ce9){const _0x522c5c=a263_0x36382a,_0x5d03e5=queries_1[_0x522c5c(0x1f1)]['replace'](_0x522c5c(0x1fa),_0x323ce9),_0x537d62=await this[_0x522c5c(0x21c)]['query'](_0x5d03e5);return _0x537d62[_0x522c5c(0x200)](_0xb21c3b=>this['extractComponentMetadataFromRecord'](_0xb21c3b));}async[a263_0x36382a(0x1d8)](_0x34b2a4){const _0x2402f3=a263_0x36382a,_0x3b30f4=queries_1[_0x2402f3(0x1d4)][_0x2402f3(0x219)](_0x2402f3(0x1db),_0x34b2a4),_0x238823=await this[_0x2402f3(0x21c)][_0x2402f3(0x20e)](_0x3b30f4);return _0x238823[_0x2402f3(0x200)](_0x5f7488=>this[_0x2402f3(0x212)](_0x5f7488));}async[a263_0x36382a(0x209)](_0x4c0b0){const _0x21e030=a263_0x36382a,_0x28db9a=[..._0x4c0b0],_0x46c080=[];while(_0x28db9a[_0x21e030(0x210)]){const _0x195f66=queries_1[_0x21e030(0x1d3)][_0x21e030(0x219)]('%componentIds%',_0x28db9a[_0x21e030(0x1ee)](0x0,this[_0x21e030(0x1ec)])['map'](_0x14355f=>'\x27'+_0x14355f+'\x27')[_0x21e030(0x1fc)](',')),_0x372583=await this[_0x21e030(0x21c)]['query'](_0x195f66);_0x46c080['push'](..._0x372583[_0x21e030(0x200)](_0x22ace5=>_0x22ace5['Id']));}return _0x46c080;}async[a263_0x36382a(0x206)](_0x6f4e82,_0x1528eb){const _0x443cc4=a263_0x36382a;return this['restService']['post'](constants_1[_0x443cc4(0x20d)],{[constants_1[_0x443cc4(0x1f8)]+'Repository__c']:_0x1528eb,[constants_1['FLOSUM_NAMESPACE']+_0x443cc4(0x205)]:_0x6f4e82[_0x443cc4(0x1eb)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0x443cc4(0x1e0),[constants_1[_0x443cc4(0x1d5)]+_0x443cc4(0x1e4)]:!![]});}};function a263_0x62d4(){const _0x553889=['./salesforce-rest.service','GET_COMPONENT_RECORD_TYPES_QUERY','__esModule','replace','Service','function','queryService','%name%','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','GET_BRANCH_COMPONENTS_QUERY','FLOSUM_GIT_NAMESPACE','extractFieldsFromRecord','getBranchIdByName','fetchBranchComponents','NotFoundError','push','%branchId%','SalesforceGitSyncService','2110572fvwOQc','Repository\x20\x22','Name','Completed','defineProperty','constructor','../../../../constants','Is_From_Agent__c','\x22\x20not\x20found\x20in\x20flosum.','1115568NBCVXq','toString','typedi','./salesforce-query.service','3829315woTmkT','substr','MAX_QUERY_ARRAY_ITEMS','../utils/flosum-naming.utils','splice','getComponentRecordTypes','Branch\x20\x22','GET_REPOSITORY_COMPONENTS_QUERY','fetchRepositoryComponentsByFilenames','Component_Name__c','../queries','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','%fileNames%','design:paramtypes','FLOSUM_NAMESPACE','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','%repositoryId%','CRC32__c','join','(((.+)+)+)+$','fetchRepositoryComponents','32dGHRxA','map','5557440NsaydO','GET_BRANCH_BY_NAME_QUERY','Component_Type__c','object','Commit_Name__c','createCommit','Version__c','metadata','fetchCommitManifestsByComponentIds','File_Name__c','getOwnPropertyDescriptor','30172jEusqr','FLOSUM_COMMIT','query','SalesforceQueryService','length','../../../../core/errors/not-found.error','extractComponentMetadataFromRecord','3733548bsYBKP','__metadata','3027315QzLNwp'];a263_0x62d4=function(){return _0x553889;};return a263_0x62d4();}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a263_0x36382a(0x21a)])(),__metadata(a263_0x36382a(0x1f7),[salesforce_query_service_1[a263_0x36382a(0x20f)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a263_0x36382a(0x1dc)]=SalesforceGitSyncService;