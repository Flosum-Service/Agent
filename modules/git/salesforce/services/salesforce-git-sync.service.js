const a273_0x22eba3=a273_0x3536;(function(_0x48c0ec,_0x123ae7){const _0x14a4ba=a273_0x3536,_0x2ee39e=_0x48c0ec();while(!![]){try{const _0x293da9=-parseInt(_0x14a4ba(0x177))/0x1+parseInt(_0x14a4ba(0x17e))/0x2+parseInt(_0x14a4ba(0x18b))/0x3+parseInt(_0x14a4ba(0x176))/0x4+-parseInt(_0x14a4ba(0x18e))/0x5+parseInt(_0x14a4ba(0x189))/0x6*(-parseInt(_0x14a4ba(0x168))/0x7)+-parseInt(_0x14a4ba(0x174))/0x8*(-parseInt(_0x14a4ba(0x169))/0x9);if(_0x293da9===_0x123ae7)break;else _0x2ee39e['push'](_0x2ee39e['shift']());}catch(_0x1c9629){_0x2ee39e['push'](_0x2ee39e['shift']());}}}(a273_0x4368,0xec1d3));const a273_0x4fb749=(function(){let _0x1d2f3d=!![];return function(_0x56bd0e,_0x24418e){const _0x23ecc4=_0x1d2f3d?function(){const _0x52f206=a273_0x3536;if(_0x24418e){const _0x17acbd=_0x24418e[_0x52f206(0x16a)](_0x56bd0e,arguments);return _0x24418e=null,_0x17acbd;}}:function(){};return _0x1d2f3d=![],_0x23ecc4;};}()),a273_0x250df6=a273_0x4fb749(this,function(){const _0x2bb8ab=a273_0x3536;return a273_0x250df6[_0x2bb8ab(0x175)]()[_0x2bb8ab(0x172)](_0x2bb8ab(0x17d))['toString']()[_0x2bb8ab(0x193)](a273_0x250df6)[_0x2bb8ab(0x172)](_0x2bb8ab(0x17d));});a273_0x250df6();function a273_0x3536(_0x17e686,_0x47831b){const _0x542a50=a273_0x4368();return a273_0x3536=function(_0x250df6,_0x4fb749){_0x250df6=_0x250df6-0x14f;let _0x4368cd=_0x542a50[_0x250df6];return _0x4368cd;},a273_0x3536(_0x17e686,_0x47831b);}'use strict';var __decorate=this&&this[a273_0x22eba3(0x186)]||function(_0xa6028b,_0x5bd2a4,_0xc6f127,_0x217df0){const _0x59ab3c=a273_0x22eba3;var _0x1dd03b=arguments['length'],_0x51e8b3=_0x1dd03b<0x3?_0x5bd2a4:_0x217df0===null?_0x217df0=Object[_0x59ab3c(0x184)](_0x5bd2a4,_0xc6f127):_0x217df0,_0x5a7bdc;if(typeof Reflect===_0x59ab3c(0x178)&&typeof Reflect[_0x59ab3c(0x16f)]===_0x59ab3c(0x17a))_0x51e8b3=Reflect[_0x59ab3c(0x16f)](_0xa6028b,_0x5bd2a4,_0xc6f127,_0x217df0);else{for(var _0x454e6d=_0xa6028b['length']-0x1;_0x454e6d>=0x0;_0x454e6d--)if(_0x5a7bdc=_0xa6028b[_0x454e6d])_0x51e8b3=(_0x1dd03b<0x3?_0x5a7bdc(_0x51e8b3):_0x1dd03b>0x3?_0x5a7bdc(_0x5bd2a4,_0xc6f127,_0x51e8b3):_0x5a7bdc(_0x5bd2a4,_0xc6f127))||_0x51e8b3;}return _0x1dd03b>0x3&&_0x51e8b3&&Object[_0x59ab3c(0x158)](_0x5bd2a4,_0xc6f127,_0x51e8b3),_0x51e8b3;},__metadata=this&&this[a273_0x22eba3(0x187)]||function(_0x26c7a9,_0x14b9aa){const _0x51fcd4=a273_0x22eba3;if(typeof Reflect===_0x51fcd4(0x178)&&typeof Reflect[_0x51fcd4(0x16e)]===_0x51fcd4(0x17a))return Reflect['metadata'](_0x26c7a9,_0x14b9aa);};Object[a273_0x22eba3(0x158)](exports,a273_0x22eba3(0x180),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;function a273_0x4368(){const _0x29ceb8=['4174770nKdbBE','push','splice','File_Name__c','\x22\x20not\x20found\x20in\x20flosum.','constructor','fetchRepositoryComponentsByFilenames','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','%fileNames%','map','SalesforceGitSyncService','%repositoryId%','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','GET_REPOSITORY_BY_NAME_QUERY','FLOSUM_NAMESPACE','../../../../constants','Completed','queryService','MAX_QUERY_ARRAY_ITEMS','./salesforce-query.service','%componentIds%','GET_COMPONENT_RECORD_TYPES_QUERY','defineProperty','fetchBranchComponents','Is_From_Agent__c','Repository__c','restService','replace','./salesforce-rest.service','length','Branch\x20\x22','getBranchIdByName','Version__c','Commit_Name__c','Service','extractFieldsFromRecord','FLOSUM_COMMIT','NotFoundError','7PNmmph','9IikXZi','apply','Component_Type__c','query','SalesforceQueryService','metadata','decorate','fetchBranchComponentsByFilenames','%name%','search','Name','8955336EJGiqY','toString','760580RPsTdY','1042776pGOpnS','object','../utils/flosum-naming.utils','function','Component_Name__c','%branchId%','(((.+)+)+)+$','2166486zmsBHm','createCommit','__esModule','FLOSUM_GIT_NAMESPACE','post','extractComponentMetadataFromRecord','getOwnPropertyDescriptor','GET_BRANCH_BY_NAME_QUERY','__decorate','__metadata','GET_BRANCH_COMPONENTS_QUERY','6437550Xobmbd','join','4574919QgiPgz','CRC32__c','substr'];a273_0x4368=function(){return _0x29ceb8;};return a273_0x4368();}const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require('typedi'),constants_1=require(a273_0x22eba3(0x151)),queries_1=require('../queries'),flosum_naming_utils_1=require(a273_0x22eba3(0x179)),salesforce_query_service_1=require(a273_0x22eba3(0x155)),salesforce_rest_service_1=require(a273_0x22eba3(0x15e));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x578c40,_0x5f1627){const _0x25b646=a273_0x22eba3;this[_0x25b646(0x153)]=_0x578c40,this[_0x25b646(0x15c)]=_0x5f1627,this[_0x25b646(0x154)]=0xc8;}[a273_0x22eba3(0x183)](_0x1e0ce0){const _0x17246a=a273_0x22eba3,_0x4195a2=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x1e0ce0,[_0x17246a(0x17b),'Component_Type__c',_0x17246a(0x18c),_0x17246a(0x191),_0x17246a(0x162),'Id']);return{'id':_0x4195a2['Id'],'name':_0x4195a2[_0x17246a(0x17b)],'type':_0x4195a2[_0x17246a(0x16b)],'fileName':_0x4195a2['File_Name__c'],'crc32':_0x4195a2[_0x17246a(0x18c)],'version':+_0x4195a2[_0x17246a(0x162)]};}async['getRepositoryIdByName'](_0x3f5c47){const _0x4062d2=a273_0x22eba3,[_0x4139a3]=await this[_0x4062d2(0x153)][_0x4062d2(0x16c)](queries_1[_0x4062d2(0x14f)][_0x4062d2(0x15d)](_0x4062d2(0x171),_0x3f5c47));if(!_0x4139a3)throw new not_found_error_1['NotFoundError']('Repository\x20\x22'+_0x3f5c47+_0x4062d2(0x192));return _0x4139a3['Id'];}async[a273_0x22eba3(0x161)](_0x504099){const _0x3e06f7=a273_0x22eba3,[_0x597f54]=await this[_0x3e06f7(0x153)][_0x3e06f7(0x16c)](queries_1[_0x3e06f7(0x185)][_0x3e06f7(0x15d)](_0x3e06f7(0x171),_0x504099));if(!_0x597f54)throw new not_found_error_1[(_0x3e06f7(0x167))](_0x3e06f7(0x160)+_0x504099+_0x3e06f7(0x192));return _0x597f54['Id'];}async['getComponentRecordTypes'](){const _0x4c03f5=a273_0x22eba3,_0x4b573c=await this['queryService'][_0x4c03f5(0x16c)](queries_1[_0x4c03f5(0x157)]);return _0x4b573c[_0x4c03f5(0x197)](_0x9580ec=>(0x0,flosum_naming_utils_1[_0x4c03f5(0x165)])(_0x9580ec,['Id',_0x4c03f5(0x173)]))[_0x4c03f5(0x197)](_0x3013ae=>({'id':_0x3013ae['Id'],'name':_0x3013ae['Name']}));}async[a273_0x22eba3(0x194)](_0x75a884,_0x2a578f){const _0x3e3637=a273_0x22eba3,_0x5c7324=[];while(_0x75a884['length']){const _0x55565=queries_1[_0x3e3637(0x195)]['replace'](_0x3e3637(0x196),_0x75a884[_0x3e3637(0x190)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x3e3637(0x197)](_0x4ab635=>'\x27'+_0x4ab635+'\x27')['join'](','))[_0x3e3637(0x15d)]('%repositoryId%',_0x2a578f),_0x45d9ee=await this[_0x3e3637(0x153)][_0x3e3637(0x16c)](_0x55565);_0x5c7324[_0x3e3637(0x18f)](..._0x45d9ee);}return _0x5c7324['map'](_0x236b83=>this[_0x3e3637(0x183)](_0x236b83));}async[a273_0x22eba3(0x170)](_0x1bad1e,_0x77d1ad){const _0x2b9898=a273_0x22eba3,_0x2b69e9=[];while(_0x1bad1e[_0x2b9898(0x15f)]){const _0x405987=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x2b9898(0x15d)]('%fileNames%',_0x1bad1e[_0x2b9898(0x190)](0x0,this[_0x2b9898(0x154)])['map'](_0x31f146=>'\x27'+_0x31f146+'\x27')[_0x2b9898(0x18a)](','))[_0x2b9898(0x15d)](_0x2b9898(0x17c),_0x77d1ad),_0x2b838e=await this[_0x2b9898(0x153)]['query'](_0x405987);_0x2b69e9['push'](..._0x2b838e);}return _0x2b69e9['map'](_0x151e6b=>this[_0x2b9898(0x183)](_0x151e6b));}async['fetchRepositoryComponents'](_0x877f5b){const _0x4ce2a3=a273_0x22eba3,_0x119893=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x4ce2a3(0x15d)](_0x4ce2a3(0x199),_0x877f5b),_0x11f082=await this[_0x4ce2a3(0x153)][_0x4ce2a3(0x16c)](_0x119893);return _0x11f082[_0x4ce2a3(0x197)](_0x1e04c8=>this[_0x4ce2a3(0x183)](_0x1e04c8));}async[a273_0x22eba3(0x159)](_0x54efc9){const _0x3cdabe=a273_0x22eba3,_0x4fe93c=queries_1[_0x3cdabe(0x188)][_0x3cdabe(0x15d)](_0x3cdabe(0x17c),_0x54efc9),_0x4dff4d=await this[_0x3cdabe(0x153)][_0x3cdabe(0x16c)](_0x4fe93c);return _0x4dff4d['map'](_0x3c755f=>this[_0x3cdabe(0x183)](_0x3c755f));}async['fetchCommitManifestsByComponentIds'](_0x5c90bd){const _0x42307d=a273_0x22eba3,_0x38b153=[..._0x5c90bd],_0x48c419=[];while(_0x38b153[_0x42307d(0x15f)]){const _0x5e619a=queries_1[_0x42307d(0x19a)][_0x42307d(0x15d)](_0x42307d(0x156),_0x38b153['splice'](0x0,this[_0x42307d(0x154)])[_0x42307d(0x197)](_0x578b07=>'\x27'+_0x578b07+'\x27')['join'](',')),_0x4d4ab5=await this[_0x42307d(0x153)]['query'](_0x5e619a);_0x48c419['push'](..._0x4d4ab5['map'](_0x4dac3f=>_0x4dac3f['Id']));}return _0x48c419;}async[a273_0x22eba3(0x17f)](_0x4a2311,_0x3866d0){const _0x283c8b=a273_0x22eba3;return this[_0x283c8b(0x15c)][_0x283c8b(0x182)](constants_1[_0x283c8b(0x166)],{[constants_1[_0x283c8b(0x150)]+_0x283c8b(0x15b)]:_0x3866d0,[constants_1['FLOSUM_NAMESPACE']+_0x283c8b(0x163)]:_0x4a2311[_0x283c8b(0x18d)](0x0,0xff),[constants_1[_0x283c8b(0x150)]+'Status__c']:_0x283c8b(0x152),[constants_1[_0x283c8b(0x181)]+_0x283c8b(0x15a)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a273_0x22eba3(0x164)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a273_0x22eba3(0x16d)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a273_0x22eba3(0x198)]=SalesforceGitSyncService;