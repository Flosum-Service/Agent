const a236_0x166e28=a236_0x2303;function a236_0x2303(_0x33aff2,_0x95db32){const _0x5c3a9c=a236_0x2d15();return a236_0x2303=function(_0x5e2ec4,_0x434785){_0x5e2ec4=_0x5e2ec4-0xea;let _0x2d15b3=_0x5c3a9c[_0x5e2ec4];return _0x2d15b3;},a236_0x2303(_0x33aff2,_0x95db32);}(function(_0x25a288,_0x21655d){const _0x4b4418=a236_0x2303,_0x499cf4=_0x25a288();while(!![]){try{const _0x4c3e0b=parseInt(_0x4b4418(0xfb))/0x1+-parseInt(_0x4b4418(0x111))/0x2+parseInt(_0x4b4418(0x11a))/0x3+parseInt(_0x4b4418(0xec))/0x4+-parseInt(_0x4b4418(0x100))/0x5*(parseInt(_0x4b4418(0x12a))/0x6)+-parseInt(_0x4b4418(0xf6))/0x7*(parseInt(_0x4b4418(0x12d))/0x8)+parseInt(_0x4b4418(0x126))/0x9;if(_0x4c3e0b===_0x21655d)break;else _0x499cf4['push'](_0x499cf4['shift']());}catch(_0x2d11d3){_0x499cf4['push'](_0x499cf4['shift']());}}}(a236_0x2d15,0x270aa));const a236_0x434785=(function(){let _0x59a88b=!![];return function(_0x2264d0,_0x1aa79c){const _0x5eb09b=_0x59a88b?function(){const _0x259d50=a236_0x2303;if(_0x1aa79c){const _0x15b885=_0x1aa79c[_0x259d50(0xf2)](_0x2264d0,arguments);return _0x1aa79c=null,_0x15b885;}}:function(){};return _0x59a88b=![],_0x5eb09b;};}()),a236_0x5e2ec4=a236_0x434785(this,function(){const _0x5937ed=a236_0x2303;return a236_0x5e2ec4[_0x5937ed(0x113)]()[_0x5937ed(0xff)](_0x5937ed(0xee))[_0x5937ed(0x113)]()['constructor'](a236_0x5e2ec4)[_0x5937ed(0xff)](_0x5937ed(0xee));});a236_0x5e2ec4();function a236_0x2d15(){const _0x1e1d6f=['759801sOAWPB','fetchCommitManifestsByComponentIds','join','Is_From_Agent__c','MAX_QUERY_ARRAY_ITEMS','56055nGpXqr','CRC32__c','File_Name__c','__decorate','search','10VxJaKr','query','substr','NotFoundError','./salesforce-rest.service','fetchRepositoryComponents','object','Completed','getComponentRecordTypes','defineProperty','../../../../constants','function','queryService','push','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','%branchId%','metadata','358596BCsIQs','createCommit','toString','__esModule','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','Status__c','Component_Type__c','FLOSUM_GIT_NAMESPACE','length','598932CiUyTa','Name','design:paramtypes','%fileNames%','SalesforceGitSyncService','typedi','../../../../core/errors/not-found.error','GET_BRANCH_BY_NAME_QUERY','Component_Name__c','SalesforceQueryService','getRepositoryIdByName','SalesforceRestService','1917846IHUIXa','replace','map','%name%','526632ygEGeg','GET_BRANCH_COMPONENTS_QUERY','%componentIds%','16ZqMReV','decorate','extractComponentMetadataFromRecord','Repository\x20\x22','../queries','FLOSUM_COMMIT','Service','./salesforce-query.service','Commit_Name__c','%repositoryId%','1052196CDcjNe','post','(((.+)+)+)+$','fetchBranchComponentsByFilenames','Repository__c','FLOSUM_NAMESPACE','apply','\x22\x20not\x20found\x20in\x20flosum.','restService','splice'];a236_0x2d15=function(){return _0x1e1d6f;};return a236_0x2d15();}'use strict';var __decorate=this&&this[a236_0x166e28(0xfe)]||function(_0x28b10c,_0x23a1c5,_0xf79585,_0x143374){const _0x2a3928=a236_0x166e28;var _0xe5ef8=arguments[_0x2a3928(0x119)],_0x34b3c1=_0xe5ef8<0x3?_0x23a1c5:_0x143374===null?_0x143374=Object['getOwnPropertyDescriptor'](_0x23a1c5,_0xf79585):_0x143374,_0x2d8b1c;if(typeof Reflect===_0x2a3928(0x106)&&typeof Reflect[_0x2a3928(0x12e)]===_0x2a3928(0x10b))_0x34b3c1=Reflect[_0x2a3928(0x12e)](_0x28b10c,_0x23a1c5,_0xf79585,_0x143374);else{for(var _0x55384c=_0x28b10c['length']-0x1;_0x55384c>=0x0;_0x55384c--)if(_0x2d8b1c=_0x28b10c[_0x55384c])_0x34b3c1=(_0xe5ef8<0x3?_0x2d8b1c(_0x34b3c1):_0xe5ef8>0x3?_0x2d8b1c(_0x23a1c5,_0xf79585,_0x34b3c1):_0x2d8b1c(_0x23a1c5,_0xf79585))||_0x34b3c1;}return _0xe5ef8>0x3&&_0x34b3c1&&Object[_0x2a3928(0x109)](_0x23a1c5,_0xf79585,_0x34b3c1),_0x34b3c1;},__metadata=this&&this['__metadata']||function(_0x3ea330,_0x5beec5){const _0x471044=a236_0x166e28;if(typeof Reflect===_0x471044(0x106)&&typeof Reflect[_0x471044(0x110)]==='function')return Reflect[_0x471044(0x110)](_0x3ea330,_0x5beec5);};Object[a236_0x166e28(0x109)](exports,a236_0x166e28(0x114),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a236_0x166e28(0x120)),typedi_1=require(a236_0x166e28(0x11f)),constants_1=require(a236_0x166e28(0x10a)),queries_1=require(a236_0x166e28(0x131)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a236_0x166e28(0x134)),salesforce_rest_service_1=require(a236_0x166e28(0x104));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x5ee334,_0xe7a37b){const _0x5b7a7a=a236_0x166e28;this[_0x5b7a7a(0x10c)]=_0x5ee334,this[_0x5b7a7a(0xf4)]=_0xe7a37b,this[_0x5b7a7a(0xfa)]=0xc8;}[a236_0x166e28(0x12f)](_0x32f3b2){const _0x3c8dea=a236_0x166e28,_0x11f33b=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x32f3b2,[_0x3c8dea(0x122),_0x3c8dea(0x117),'CRC32__c',_0x3c8dea(0xfd),'Version__c','Id']);return{'id':_0x11f33b['Id'],'name':_0x11f33b['Component_Name__c'],'type':_0x11f33b[_0x3c8dea(0x117)],'fileName':_0x11f33b['File_Name__c'],'crc32':_0x11f33b[_0x3c8dea(0xfc)],'version':+_0x11f33b['Version__c']};}async[a236_0x166e28(0x124)](_0x4f4232){const _0x435e6b=a236_0x166e28,[_0x1c1eaf]=await this[_0x435e6b(0x10c)][_0x435e6b(0x101)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x435e6b(0x127)]('%name%',_0x4f4232));if(!_0x1c1eaf)throw new not_found_error_1[(_0x435e6b(0x103))](_0x435e6b(0x130)+_0x4f4232+_0x435e6b(0xf3));return _0x1c1eaf['Id'];}async['getBranchIdByName'](_0x3b3d33){const _0x17b177=a236_0x166e28,[_0x51b80c]=await this[_0x17b177(0x10c)][_0x17b177(0x101)](queries_1[_0x17b177(0x121)][_0x17b177(0x127)](_0x17b177(0x129),_0x3b3d33));if(!_0x51b80c)throw new not_found_error_1[(_0x17b177(0x103))]('Branch\x20\x22'+_0x3b3d33+_0x17b177(0xf3));return _0x51b80c['Id'];}async[a236_0x166e28(0x108)](){const _0xee9475=a236_0x166e28,_0x51a070=await this[_0xee9475(0x10c)][_0xee9475(0x101)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x51a070[_0xee9475(0x128)](_0x348ab0=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x348ab0,['Id','Name']))[_0xee9475(0x128)](_0x3c445c=>({'id':_0x3c445c['Id'],'name':_0x3c445c[_0xee9475(0x11b)]}));}async['fetchRepositoryComponentsByFilenames'](_0x9cfed9,_0x53e786){const _0x1f5eff=a236_0x166e28,_0x27a9c7=[];while(_0x9cfed9[_0x1f5eff(0x119)]){const _0x173e13=queries_1[_0x1f5eff(0x115)]['replace'](_0x1f5eff(0x11d),_0x9cfed9[_0x1f5eff(0xf5)](0x0,this[_0x1f5eff(0xfa)])[_0x1f5eff(0x128)](_0x5f4e73=>'\x27'+_0x5f4e73+'\x27')['join'](','))[_0x1f5eff(0x127)](_0x1f5eff(0xeb),_0x53e786),_0xc83c15=await this[_0x1f5eff(0x10c)][_0x1f5eff(0x101)](_0x173e13);_0x27a9c7[_0x1f5eff(0x10d)](..._0xc83c15);}return _0x27a9c7[_0x1f5eff(0x128)](_0x8d7d51=>this[_0x1f5eff(0x12f)](_0x8d7d51));}async[a236_0x166e28(0xef)](_0x7c382d,_0x35bd5e){const _0x387658=a236_0x166e28,_0x409f97=[];while(_0x7c382d[_0x387658(0x119)]){const _0xe8cc73=queries_1[_0x387658(0x10e)][_0x387658(0x127)]('%fileNames%',_0x7c382d[_0x387658(0xf5)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x387658(0x128)](_0x19f992=>'\x27'+_0x19f992+'\x27')[_0x387658(0xf8)](','))[_0x387658(0x127)](_0x387658(0x10f),_0x35bd5e),_0x5f1bf9=await this[_0x387658(0x10c)][_0x387658(0x101)](_0xe8cc73);_0x409f97[_0x387658(0x10d)](..._0x5f1bf9);}return _0x409f97[_0x387658(0x128)](_0x59ac25=>this[_0x387658(0x12f)](_0x59ac25));}async[a236_0x166e28(0x105)](_0x461c39){const _0x2c39db=a236_0x166e28,_0x16769f=queries_1['GET_REPOSITORY_COMPONENTS_QUERY']['replace'](_0x2c39db(0xeb),_0x461c39),_0x57c501=await this[_0x2c39db(0x10c)]['query'](_0x16769f);return _0x57c501[_0x2c39db(0x128)](_0x591c73=>this[_0x2c39db(0x12f)](_0x591c73));}async['fetchBranchComponents'](_0x56c3a9){const _0x3c0122=a236_0x166e28,_0xaadba4=queries_1[_0x3c0122(0x12b)][_0x3c0122(0x127)](_0x3c0122(0x10f),_0x56c3a9),_0x217f7c=await this[_0x3c0122(0x10c)][_0x3c0122(0x101)](_0xaadba4);return _0x217f7c[_0x3c0122(0x128)](_0x4bf25c=>this['extractComponentMetadataFromRecord'](_0x4bf25c));}async[a236_0x166e28(0xf7)](_0x55c8f8){const _0x3f2589=a236_0x166e28,_0x6bb39e=[..._0x55c8f8],_0x23a0bb=[];while(_0x6bb39e[_0x3f2589(0x119)]){const _0x108ffd=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x3f2589(0x127)](_0x3f2589(0x12c),_0x6bb39e[_0x3f2589(0xf5)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x3f2589(0x128)](_0x423872=>'\x27'+_0x423872+'\x27')[_0x3f2589(0xf8)](',')),_0x410585=await this[_0x3f2589(0x10c)]['query'](_0x108ffd);_0x23a0bb[_0x3f2589(0x10d)](..._0x410585[_0x3f2589(0x128)](_0x459de4=>_0x459de4['Id']));}return _0x23a0bb;}async[a236_0x166e28(0x112)](_0x27cdc7,_0x21baa4){const _0x1e93db=a236_0x166e28;return this[_0x1e93db(0xf4)][_0x1e93db(0xed)](constants_1[_0x1e93db(0x132)],{[constants_1[_0x1e93db(0xf1)]+_0x1e93db(0xf0)]:_0x21baa4,[constants_1[_0x1e93db(0xf1)]+_0x1e93db(0xea)]:_0x27cdc7[_0x1e93db(0x102)](0x0,0xff),[constants_1[_0x1e93db(0xf1)]+_0x1e93db(0x116)]:_0x1e93db(0x107),[constants_1[_0x1e93db(0x118)]+_0x1e93db(0xf9)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x166e28(0x133)])(),__metadata(a236_0x166e28(0x11c),[salesforce_query_service_1[a236_0x166e28(0x123)],salesforce_rest_service_1[a236_0x166e28(0x125)]])],SalesforceGitSyncService),exports[a236_0x166e28(0x11e)]=SalesforceGitSyncService;