const a236_0x169437=a236_0x2f77;(function(_0x5ebc12,_0x50ca4d){const _0x62f7c0=a236_0x2f77,_0x35c8eb=_0x5ebc12();while(!![]){try{const _0x354d2b=parseInt(_0x62f7c0(0x21a))/0x1+parseInt(_0x62f7c0(0x1d7))/0x2*(parseInt(_0x62f7c0(0x1f7))/0x3)+-parseInt(_0x62f7c0(0x1eb))/0x4*(-parseInt(_0x62f7c0(0x1fe))/0x5)+-parseInt(_0x62f7c0(0x1de))/0x6+-parseInt(_0x62f7c0(0x208))/0x7+parseInt(_0x62f7c0(0x1dc))/0x8*(-parseInt(_0x62f7c0(0x1ff))/0x9)+-parseInt(_0x62f7c0(0x1fd))/0xa*(-parseInt(_0x62f7c0(0x21e))/0xb);if(_0x354d2b===_0x50ca4d)break;else _0x35c8eb['push'](_0x35c8eb['shift']());}catch(_0xf427e){_0x35c8eb['push'](_0x35c8eb['shift']());}}}(a236_0x568e,0xd8ecc));const a236_0x557a8b=(function(){let _0x2b043d=!![];return function(_0x1334b0,_0x31688c){const _0x430c2c=_0x2b043d?function(){if(_0x31688c){const _0x408238=_0x31688c['apply'](_0x1334b0,arguments);return _0x31688c=null,_0x408238;}}:function(){};return _0x2b043d=![],_0x430c2c;};}()),a236_0x5e9b36=a236_0x557a8b(this,function(){const _0x3488de=a236_0x2f77;return a236_0x5e9b36[_0x3488de(0x1e2)]()[_0x3488de(0x215)](_0x3488de(0x1f4))[_0x3488de(0x1e2)]()['constructor'](a236_0x5e9b36)['search'](_0x3488de(0x1f4));});a236_0x5e9b36();'use strict';var __decorate=this&&this[a236_0x169437(0x21c)]||function(_0x752407,_0x4211c5,_0x2879fd,_0x1b75e2){const _0x6bbc45=a236_0x169437;var _0x4a8203=arguments[_0x6bbc45(0x1ed)],_0x8d6c43=_0x4a8203<0x3?_0x4211c5:_0x1b75e2===null?_0x1b75e2=Object[_0x6bbc45(0x209)](_0x4211c5,_0x2879fd):_0x1b75e2,_0x510ac3;if(typeof Reflect===_0x6bbc45(0x214)&&typeof Reflect[_0x6bbc45(0x21d)]===_0x6bbc45(0x20d))_0x8d6c43=Reflect['decorate'](_0x752407,_0x4211c5,_0x2879fd,_0x1b75e2);else{for(var _0x87e253=_0x752407[_0x6bbc45(0x1ed)]-0x1;_0x87e253>=0x0;_0x87e253--)if(_0x510ac3=_0x752407[_0x87e253])_0x8d6c43=(_0x4a8203<0x3?_0x510ac3(_0x8d6c43):_0x4a8203>0x3?_0x510ac3(_0x4211c5,_0x2879fd,_0x8d6c43):_0x510ac3(_0x4211c5,_0x2879fd))||_0x8d6c43;}return _0x4a8203>0x3&&_0x8d6c43&&Object['defineProperty'](_0x4211c5,_0x2879fd,_0x8d6c43),_0x8d6c43;},__metadata=this&&this[a236_0x169437(0x1ea)]||function(_0x32adea,_0x3bd9df){const _0x165970=a236_0x169437;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x165970(0x20d))return Reflect['metadata'](_0x32adea,_0x3bd9df);};Object[a236_0x169437(0x210)](exports,a236_0x169437(0x1dd),{'value':!![]}),exports[a236_0x169437(0x213)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a236_0x169437(0x211)),constants_1=require(a236_0x169437(0x21b)),queries_1=require(a236_0x169437(0x1f9)),flosum_naming_utils_1=require(a236_0x169437(0x217)),salesforce_query_service_1=require(a236_0x169437(0x1d4)),salesforce_rest_service_1=require(a236_0x169437(0x1f0));function a236_0x2f77(_0x40a3ea,_0x2f737c){const _0x1e81fe=a236_0x568e();return a236_0x2f77=function(_0x5e9b36,_0x557a8b){_0x5e9b36=_0x5e9b36-0x1d2;let _0x568efd=_0x1e81fe[_0x5e9b36];return _0x568efd;},a236_0x2f77(_0x40a3ea,_0x2f737c);}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x8efd32,_0x20f127){const _0x413825=a236_0x169437;this[_0x413825(0x20f)]=_0x8efd32,this['restService']=_0x20f127,this[_0x413825(0x200)]=0xc8;}[a236_0x169437(0x202)](_0x266a54){const _0x27e7cf=a236_0x169437,_0x5d9411=(0x0,flosum_naming_utils_1[_0x27e7cf(0x206)])(_0x266a54,['Component_Name__c',_0x27e7cf(0x1ef),_0x27e7cf(0x1e3),_0x27e7cf(0x219),'Version__c','Id']);return{'id':_0x5d9411['Id'],'name':_0x5d9411[_0x27e7cf(0x20b)],'type':_0x5d9411[_0x27e7cf(0x1ef)],'fileName':_0x5d9411['File_Name__c'],'crc32':_0x5d9411[_0x27e7cf(0x1e3)],'version':+_0x5d9411['Version__c']};}async[a236_0x169437(0x20e)](_0x1ed55e){const _0x5caf67=a236_0x169437,[_0x4cea65]=await this['queryService']['query'](queries_1[_0x5caf67(0x1e4)][_0x5caf67(0x1f2)](_0x5caf67(0x1fa),_0x1ed55e));if(!_0x4cea65)throw new not_found_error_1[(_0x5caf67(0x216))](_0x5caf67(0x204)+_0x1ed55e+_0x5caf67(0x1e8));return _0x4cea65['Id'];}async[a236_0x169437(0x1d3)](_0x5c6cb8){const _0x5699cd=a236_0x169437,[_0x22f515]=await this[_0x5699cd(0x20f)][_0x5699cd(0x20a)](queries_1[_0x5699cd(0x1da)][_0x5699cd(0x1f2)](_0x5699cd(0x1fa),_0x5c6cb8));if(!_0x22f515)throw new not_found_error_1['NotFoundError'](_0x5699cd(0x1ee)+_0x5c6cb8+'\x22\x20not\x20found\x20in\x20flosum.');return _0x22f515['Id'];}async[a236_0x169437(0x1d2)](){const _0x3d0827=a236_0x169437,_0x106575=await this['queryService'][_0x3d0827(0x20a)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x106575[_0x3d0827(0x207)](_0x389786=>(0x0,flosum_naming_utils_1[_0x3d0827(0x206)])(_0x389786,['Id',_0x3d0827(0x1e1)]))[_0x3d0827(0x207)](_0x1ff8e3=>({'id':_0x1ff8e3['Id'],'name':_0x1ff8e3[_0x3d0827(0x1e1)]}));}async[a236_0x169437(0x218)](_0x50bd52,_0x39a22e){const _0x1df3c1=a236_0x169437,_0x4f23cc=[];while(_0x50bd52[_0x1df3c1(0x1ed)]){const _0x3c1c60=queries_1[_0x1df3c1(0x1d5)][_0x1df3c1(0x1f2)](_0x1df3c1(0x1f3),_0x50bd52['splice'](0x0,this[_0x1df3c1(0x200)])[_0x1df3c1(0x207)](_0x37a609=>'\x27'+_0x37a609+'\x27')['join'](','))[_0x1df3c1(0x1f2)](_0x1df3c1(0x1f6),_0x39a22e),_0x391c64=await this[_0x1df3c1(0x20f)][_0x1df3c1(0x20a)](_0x3c1c60);_0x4f23cc['push'](..._0x391c64);}return _0x4f23cc[_0x1df3c1(0x207)](_0x361518=>this['extractComponentMetadataFromRecord'](_0x361518));}async[a236_0x169437(0x1e5)](_0x2b596f,_0x509072){const _0x1ab19d=a236_0x169437,_0x1c2587=[];while(_0x2b596f[_0x1ab19d(0x1ed)]){const _0x4e7626=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x1ab19d(0x1f2)]('%fileNames%',_0x2b596f[_0x1ab19d(0x1fc)](0x0,this[_0x1ab19d(0x200)])[_0x1ab19d(0x207)](_0xab05b9=>'\x27'+_0xab05b9+'\x27')['join'](','))[_0x1ab19d(0x1f2)](_0x1ab19d(0x1e9),_0x509072),_0x376d68=await this[_0x1ab19d(0x20f)][_0x1ab19d(0x20a)](_0x4e7626);_0x1c2587[_0x1ab19d(0x1f5)](..._0x376d68);}return _0x1c2587[_0x1ab19d(0x207)](_0x20b4f0=>this[_0x1ab19d(0x202)](_0x20b4f0));}async['fetchRepositoryComponents'](_0x282877){const _0x3cc486=a236_0x169437,_0x57612e=queries_1[_0x3cc486(0x1e7)][_0x3cc486(0x1f2)](_0x3cc486(0x1f6),_0x282877),_0x5d7530=await this[_0x3cc486(0x20f)][_0x3cc486(0x20a)](_0x57612e);return _0x5d7530[_0x3cc486(0x207)](_0xb608a6=>this[_0x3cc486(0x202)](_0xb608a6));}async[a236_0x169437(0x1d8)](_0x32eb7b){const _0x498a65=a236_0x169437,_0x59ec9e=queries_1[_0x498a65(0x1ec)][_0x498a65(0x1f2)]('%branchId%',_0x32eb7b),_0x54035b=await this[_0x498a65(0x20f)][_0x498a65(0x20a)](_0x59ec9e);return _0x54035b[_0x498a65(0x207)](_0x1e0761=>this['extractComponentMetadataFromRecord'](_0x1e0761));}async['fetchCommitManifestsByComponentIds'](_0x29370c){const _0x1fa98f=a236_0x169437,_0x446db0=[..._0x29370c],_0x46f8d0=[];while(_0x446db0[_0x1fa98f(0x1ed)]){const _0x5e40fd=queries_1[_0x1fa98f(0x203)][_0x1fa98f(0x1f2)]('%componentIds%',_0x446db0[_0x1fa98f(0x1fc)](0x0,this[_0x1fa98f(0x200)])['map'](_0x4ecdec=>'\x27'+_0x4ecdec+'\x27')[_0x1fa98f(0x1e0)](',')),_0x18d016=await this[_0x1fa98f(0x20f)][_0x1fa98f(0x20a)](_0x5e40fd);_0x46f8d0[_0x1fa98f(0x1f5)](..._0x18d016[_0x1fa98f(0x207)](_0x465124=>_0x465124['Id']));}return _0x46f8d0;}async['createCommit'](_0x2e7c5f,_0x5e31b6){const _0x4241cf=a236_0x169437;return this[_0x4241cf(0x1db)]['post'](constants_1[_0x4241cf(0x1f8)],{[constants_1[_0x4241cf(0x201)]+_0x4241cf(0x1d6)]:_0x5e31b6,[constants_1['FLOSUM_NAMESPACE']+_0x4241cf(0x212)]:_0x2e7c5f[_0x4241cf(0x1fb)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0x4241cf(0x1f1),[constants_1[_0x4241cf(0x20c)]+_0x4241cf(0x1df)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x169437(0x1e6)])(),__metadata(a236_0x169437(0x205),[salesforce_query_service_1[a236_0x169437(0x1d9)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;function a236_0x568e(){const _0x5727d3=['\x22\x20not\x20found\x20in\x20flosum.','%branchId%','__metadata','647788gmTVBM','GET_BRANCH_COMPONENTS_QUERY','length','Branch\x20\x22','Component_Type__c','./salesforce-rest.service','Completed','replace','%fileNames%','(((.+)+)+)+$','push','%repositoryId%','3boNyNN','FLOSUM_COMMIT','../queries','%name%','substr','splice','515090NTcqfL','5kJssNT','14202ooAYJb','MAX_QUERY_ARRAY_ITEMS','FLOSUM_NAMESPACE','extractComponentMetadataFromRecord','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','Repository\x20\x22','design:paramtypes','extractFieldsFromRecord','map','5106003jDwfOC','getOwnPropertyDescriptor','query','Component_Name__c','FLOSUM_GIT_NAMESPACE','function','getRepositoryIdByName','queryService','defineProperty','typedi','Commit_Name__c','SalesforceGitSyncService','object','search','NotFoundError','../utils/flosum-naming.utils','fetchRepositoryComponentsByFilenames','File_Name__c','125320RDgHWl','../../../../constants','__decorate','decorate','209DOnRJe','getComponentRecordTypes','getBranchIdByName','./salesforce-query.service','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','Repository__c','1092446fsjPFd','fetchBranchComponents','SalesforceQueryService','GET_BRANCH_BY_NAME_QUERY','restService','128GkBFFD','__esModule','1013760wzjVVV','Is_From_Agent__c','join','Name','toString','CRC32__c','GET_REPOSITORY_BY_NAME_QUERY','fetchBranchComponentsByFilenames','Service','GET_REPOSITORY_COMPONENTS_QUERY'];a236_0x568e=function(){return _0x5727d3;};return a236_0x568e();}