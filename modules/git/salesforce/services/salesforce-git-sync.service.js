const a274_0x561fe4=a274_0x4b23;function a274_0x4b23(_0x1146fa,_0xa7fe16){const _0x46e852=a274_0x2798();return a274_0x4b23=function(_0x37ec3d,_0x1623a6){_0x37ec3d=_0x37ec3d-0x16b;let _0x2798fe=_0x46e852[_0x37ec3d];return _0x2798fe;},a274_0x4b23(_0x1146fa,_0xa7fe16);}(function(_0x41fc9d,_0x24c0e0){const _0x181fc7=a274_0x4b23,_0x3f281e=_0x41fc9d();while(!![]){try{const _0x3ce8e4=-parseInt(_0x181fc7(0x184))/0x1+-parseInt(_0x181fc7(0x190))/0x2*(parseInt(_0x181fc7(0x18d))/0x3)+-parseInt(_0x181fc7(0x177))/0x4+parseInt(_0x181fc7(0x1ab))/0x5*(-parseInt(_0x181fc7(0x193))/0x6)+parseInt(_0x181fc7(0x170))/0x7*(parseInt(_0x181fc7(0x19b))/0x8)+-parseInt(_0x181fc7(0x1a8))/0x9+-parseInt(_0x181fc7(0x1b1))/0xa*(-parseInt(_0x181fc7(0x19d))/0xb);if(_0x3ce8e4===_0x24c0e0)break;else _0x3f281e['push'](_0x3f281e['shift']());}catch(_0x21fcd5){_0x3f281e['push'](_0x3f281e['shift']());}}}(a274_0x2798,0xeb099));const a274_0x1623a6=(function(){let _0x20ed5f=!![];return function(_0x1cdd17,_0x13884c){const _0xd822a9=_0x20ed5f?function(){const _0x435410=a274_0x4b23;if(_0x13884c){const _0x2e52f2=_0x13884c[_0x435410(0x1a3)](_0x1cdd17,arguments);return _0x13884c=null,_0x2e52f2;}}:function(){};return _0x20ed5f=![],_0xd822a9;};}()),a274_0x37ec3d=a274_0x1623a6(this,function(){const _0x1d7ac7=a274_0x4b23;return a274_0x37ec3d['toString']()[_0x1d7ac7(0x1b3)](_0x1d7ac7(0x198))['toString']()['constructor'](a274_0x37ec3d)[_0x1d7ac7(0x1b3)](_0x1d7ac7(0x198));});a274_0x37ec3d();'use strict';var __decorate=this&&this[a274_0x561fe4(0x188)]||function(_0x150a9d,_0x192cd8,_0x3f558c,_0x29f495){const _0x4b6c0e=a274_0x561fe4;var _0x33f23d=arguments[_0x4b6c0e(0x181)],_0x4eadac=_0x33f23d<0x3?_0x192cd8:_0x29f495===null?_0x29f495=Object['getOwnPropertyDescriptor'](_0x192cd8,_0x3f558c):_0x29f495,_0x59433f;if(typeof Reflect===_0x4b6c0e(0x172)&&typeof Reflect[_0x4b6c0e(0x1ae)]===_0x4b6c0e(0x16e))_0x4eadac=Reflect[_0x4b6c0e(0x1ae)](_0x150a9d,_0x192cd8,_0x3f558c,_0x29f495);else{for(var _0x35f6ed=_0x150a9d[_0x4b6c0e(0x181)]-0x1;_0x35f6ed>=0x0;_0x35f6ed--)if(_0x59433f=_0x150a9d[_0x35f6ed])_0x4eadac=(_0x33f23d<0x3?_0x59433f(_0x4eadac):_0x33f23d>0x3?_0x59433f(_0x192cd8,_0x3f558c,_0x4eadac):_0x59433f(_0x192cd8,_0x3f558c))||_0x4eadac;}return _0x33f23d>0x3&&_0x4eadac&&Object['defineProperty'](_0x192cd8,_0x3f558c,_0x4eadac),_0x4eadac;},__metadata=this&&this[a274_0x561fe4(0x16b)]||function(_0x1553e1,_0x4ed7af){const _0x581092=a274_0x561fe4;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x581092(0x16e))return Reflect[_0x581092(0x18f)](_0x1553e1,_0x4ed7af);};Object[a274_0x561fe4(0x174)](exports,a274_0x561fe4(0x19f),{'value':!![]}),exports[a274_0x561fe4(0x171)]=void 0x0;function a274_0x2798(){const _0x341696=['1333100DCMbOH','GET_BRANCH_COMPONENTS_QUERY','queryService','fetchRepositoryComponents','SalesforceQueryService','../queries','Repository\x20\x22','%componentIds%','GET_REPOSITORY_COMPONENTS_QUERY','%branchId%','length','replace','post','1073116kVaVlA','fetchBranchComponents','../../../../constants','createCommit','__decorate','Name','extractComponentMetadataFromRecord','NotFoundError','Component_Type__c','141984MxzjhI','restService','metadata','38bJmAgK','query','Repository__c','91068CKLEfu','Branch\x20\x22','File_Name__c','\x22\x20not\x20found\x20in\x20flosum.','FLOSUM_NAMESPACE','(((.+)+)+)+$','splice','join','4749416hPVFvx','getComponentRecordTypes','22ZfFInO','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','__esModule','GET_COMPONENT_RECORD_TYPES_QUERY','Completed','FLOSUM_GIT_NAMESPACE','apply','CRC32__c','getRepositoryIdByName','%fileNames%','Version__c','1022670Vkpjvi','Status__c','../../../../core/errors/not-found.error','585wWPGbI','MAX_QUERY_ARRAY_ITEMS','./salesforce-query.service','decorate','extractFieldsFromRecord','SalesforceRestService','19852190aFXcvE','Commit_Name__c','search','substr','Is_From_Agent__c','FLOSUM_COMMIT','%name%','%repositoryId%','__metadata','GET_BRANCH_BY_NAME_QUERY','fetchCommitManifestsByComponentIds','function','Component_Name__c','14Ayqfvp','SalesforceGitSyncService','object','map','defineProperty','push','Service'];a274_0x2798=function(){return _0x341696;};return a274_0x2798();}const not_found_error_1=require(a274_0x561fe4(0x1aa)),typedi_1=require('typedi'),constants_1=require(a274_0x561fe4(0x186)),queries_1=require(a274_0x561fe4(0x17c)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a274_0x561fe4(0x1ad)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x327f8f,_0x2dcc1a){const _0x1242b3=a274_0x561fe4;this[_0x1242b3(0x179)]=_0x327f8f,this[_0x1242b3(0x18e)]=_0x2dcc1a,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}['extractComponentMetadataFromRecord'](_0x496cb7){const _0xa12b6e=a274_0x561fe4,_0xc416ad=(0x0,flosum_naming_utils_1[_0xa12b6e(0x1af)])(_0x496cb7,[_0xa12b6e(0x16f),_0xa12b6e(0x18c),'CRC32__c',_0xa12b6e(0x195),_0xa12b6e(0x1a7),'Id']);return{'id':_0xc416ad['Id'],'name':_0xc416ad[_0xa12b6e(0x16f)],'type':_0xc416ad['Component_Type__c'],'fileName':_0xc416ad[_0xa12b6e(0x195)],'crc32':_0xc416ad[_0xa12b6e(0x1a4)],'version':+_0xc416ad[_0xa12b6e(0x1a7)]};}async[a274_0x561fe4(0x1a5)](_0x461343){const _0x94ff29=a274_0x561fe4,[_0x127d48]=await this[_0x94ff29(0x179)][_0x94ff29(0x191)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x94ff29(0x182)]('%name%',_0x461343));if(!_0x127d48)throw new not_found_error_1[(_0x94ff29(0x18b))](_0x94ff29(0x17d)+_0x461343+_0x94ff29(0x196));return _0x127d48['Id'];}async['getBranchIdByName'](_0x53ab52){const _0x395951=a274_0x561fe4,[_0x3ce1e7]=await this['queryService'][_0x395951(0x191)](queries_1[_0x395951(0x16c)][_0x395951(0x182)](_0x395951(0x1b7),_0x53ab52));if(!_0x3ce1e7)throw new not_found_error_1[(_0x395951(0x18b))](_0x395951(0x194)+_0x53ab52+_0x395951(0x196));return _0x3ce1e7['Id'];}async[a274_0x561fe4(0x19c)](){const _0x574c9f=a274_0x561fe4,_0x53781c=await this[_0x574c9f(0x179)]['query'](queries_1[_0x574c9f(0x1a0)]);return _0x53781c[_0x574c9f(0x173)](_0x228665=>(0x0,flosum_naming_utils_1[_0x574c9f(0x1af)])(_0x228665,['Id',_0x574c9f(0x189)]))['map'](_0x3e3b70=>({'id':_0x3e3b70['Id'],'name':_0x3e3b70[_0x574c9f(0x189)]}));}async['fetchRepositoryComponentsByFilenames'](_0x102204,_0x233b9c){const _0x1f98f1=a274_0x561fe4,_0x21e07d=[];while(_0x102204[_0x1f98f1(0x181)]){const _0x233e95=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x1f98f1(0x182)](_0x1f98f1(0x1a6),_0x102204[_0x1f98f1(0x199)](0x0,this[_0x1f98f1(0x1ac)])[_0x1f98f1(0x173)](_0x444ee2=>'\x27'+_0x444ee2+'\x27')[_0x1f98f1(0x19a)](','))[_0x1f98f1(0x182)](_0x1f98f1(0x1b8),_0x233b9c),_0x4ffd37=await this['queryService'][_0x1f98f1(0x191)](_0x233e95);_0x21e07d['push'](..._0x4ffd37);}return _0x21e07d[_0x1f98f1(0x173)](_0xa790e2=>this[_0x1f98f1(0x18a)](_0xa790e2));}async['fetchBranchComponentsByFilenames'](_0x31ebc2,_0x1486a9){const _0x3d692d=a274_0x561fe4,_0x4b59e0=[];while(_0x31ebc2[_0x3d692d(0x181)]){const _0x179a89=queries_1[_0x3d692d(0x19e)][_0x3d692d(0x182)](_0x3d692d(0x1a6),_0x31ebc2['splice'](0x0,this[_0x3d692d(0x1ac)])[_0x3d692d(0x173)](_0x4bc52a=>'\x27'+_0x4bc52a+'\x27')['join'](','))[_0x3d692d(0x182)](_0x3d692d(0x180),_0x1486a9),_0x3e35a9=await this[_0x3d692d(0x179)][_0x3d692d(0x191)](_0x179a89);_0x4b59e0[_0x3d692d(0x175)](..._0x3e35a9);}return _0x4b59e0[_0x3d692d(0x173)](_0x1773dd=>this[_0x3d692d(0x18a)](_0x1773dd));}async[a274_0x561fe4(0x17a)](_0x2137e7){const _0x13ad1d=a274_0x561fe4,_0x4fcdd9=queries_1[_0x13ad1d(0x17f)][_0x13ad1d(0x182)](_0x13ad1d(0x1b8),_0x2137e7),_0x1d9cd8=await this[_0x13ad1d(0x179)]['query'](_0x4fcdd9);return _0x1d9cd8[_0x13ad1d(0x173)](_0xf54f2c=>this[_0x13ad1d(0x18a)](_0xf54f2c));}async[a274_0x561fe4(0x185)](_0x5d2813){const _0x294a03=a274_0x561fe4,_0xa879a7=queries_1[_0x294a03(0x178)]['replace'](_0x294a03(0x180),_0x5d2813),_0x16cb54=await this[_0x294a03(0x179)][_0x294a03(0x191)](_0xa879a7);return _0x16cb54['map'](_0x52632f=>this[_0x294a03(0x18a)](_0x52632f));}async[a274_0x561fe4(0x16d)](_0x1ec5f9){const _0x3ceffa=a274_0x561fe4,_0x105f86=[..._0x1ec5f9],_0x3757ac=[];while(_0x105f86[_0x3ceffa(0x181)]){const _0x19013e=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x3ceffa(0x182)](_0x3ceffa(0x17e),_0x105f86[_0x3ceffa(0x199)](0x0,this[_0x3ceffa(0x1ac)])[_0x3ceffa(0x173)](_0x3328f0=>'\x27'+_0x3328f0+'\x27')[_0x3ceffa(0x19a)](',')),_0x5ac7c5=await this[_0x3ceffa(0x179)][_0x3ceffa(0x191)](_0x19013e);_0x3757ac[_0x3ceffa(0x175)](..._0x5ac7c5[_0x3ceffa(0x173)](_0x5c4a72=>_0x5c4a72['Id']));}return _0x3757ac;}async[a274_0x561fe4(0x187)](_0x56d29f,_0x316145){const _0x2a8b03=a274_0x561fe4;return this[_0x2a8b03(0x18e)][_0x2a8b03(0x183)](constants_1[_0x2a8b03(0x1b6)],{[constants_1[_0x2a8b03(0x197)]+_0x2a8b03(0x192)]:_0x316145,[constants_1[_0x2a8b03(0x197)]+_0x2a8b03(0x1b2)]:_0x56d29f[_0x2a8b03(0x1b4)](0x0,0xff),[constants_1[_0x2a8b03(0x197)]+_0x2a8b03(0x1a9)]:_0x2a8b03(0x1a1),[constants_1[_0x2a8b03(0x1a2)]+_0x2a8b03(0x1b5)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a274_0x561fe4(0x176)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a274_0x561fe4(0x17b)],salesforce_rest_service_1[a274_0x561fe4(0x1b0)]])],SalesforceGitSyncService),exports[a274_0x561fe4(0x171)]=SalesforceGitSyncService;