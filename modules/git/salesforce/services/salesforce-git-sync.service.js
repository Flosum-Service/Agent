const a274_0x38b7f5=a274_0x4ac5;(function(_0x1edc9d,_0xbe520b){const _0x7a3d8c=a274_0x4ac5,_0x3b8123=_0x1edc9d();while(!![]){try{const _0xb93123=-parseInt(_0x7a3d8c(0x198))/0x1*(parseInt(_0x7a3d8c(0x1bf))/0x2)+parseInt(_0x7a3d8c(0x1a3))/0x3+-parseInt(_0x7a3d8c(0x1b0))/0x4*(parseInt(_0x7a3d8c(0x1b8))/0x5)+parseInt(_0x7a3d8c(0x1b3))/0x6+parseInt(_0x7a3d8c(0x1d1))/0x7*(parseInt(_0x7a3d8c(0x190))/0x8)+parseInt(_0x7a3d8c(0x18e))/0x9+parseInt(_0x7a3d8c(0x191))/0xa*(-parseInt(_0x7a3d8c(0x1b6))/0xb);if(_0xb93123===_0xbe520b)break;else _0x3b8123['push'](_0x3b8123['shift']());}catch(_0x368861){_0x3b8123['push'](_0x3b8123['shift']());}}}(a274_0x391a,0xdacb3));const a274_0x1682c7=(function(){let _0x85816a=!![];return function(_0x7755a9,_0x28cbcf){const _0x1a15db=_0x85816a?function(){const _0x37146a=a274_0x4ac5;if(_0x28cbcf){const _0x15739e=_0x28cbcf[_0x37146a(0x1ca)](_0x7755a9,arguments);return _0x28cbcf=null,_0x15739e;}}:function(){};return _0x85816a=![],_0x1a15db;};}()),a274_0x2ac2c4=a274_0x1682c7(this,function(){const _0x47fba1=a274_0x4ac5;return a274_0x2ac2c4[_0x47fba1(0x195)]()[_0x47fba1(0x1a0)]('(((.+)+)+)+$')[_0x47fba1(0x195)]()['constructor'](a274_0x2ac2c4)[_0x47fba1(0x1a0)](_0x47fba1(0x18c));});a274_0x2ac2c4();function a274_0x391a(){const _0x34e8da=['%fileNames%','1578123xCppYP','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','function','design:paramtypes','metadata','splice','substr','getBranchIdByName','search','Status__c','join','1265595RTTHMY','FLOSUM_NAMESPACE','defineProperty','MAX_QUERY_ARRAY_ITEMS','%name%','FLOSUM_COMMIT','extractComponentMetadataFromRecord','GET_REPOSITORY_BY_NAME_QUERY','CRC32__c','length','./salesforce-rest.service','restService','%branchId%','20HfGLHp','GET_REPOSITORY_COMPONENTS_QUERY','SalesforceGitSyncService','8273748vlxKPK','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','Repository\x20\x22','22VDSAue','Component_Type__c','152995tkEiKh','File_Name__c','NotFoundError','fetchRepositoryComponents','replace','../../../../constants','fetchBranchComponents','2fcOpPo','SalesforceRestService','map','fetchRepositoryComponentsByFilenames','getOwnPropertyDescriptor','object','queryService','__esModule','Commit_Name__c','__metadata','../../../../core/errors/not-found.error','apply','fetchBranchComponentsByFilenames','getComponentRecordTypes','%repositoryId%','query','createCommit','__decorate','12229aWJcLs','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','push','Version__c','Component_Name__c','Service','./salesforce-query.service','post','Name','decorate','(((.+)+)+)+$','Branch\x20\x22','11891295ASPfZt','extractFieldsFromRecord','3688aPozqr','6500740zBNPWu','Repository__c','fetchCommitManifestsByComponentIds','%componentIds%','toString','GET_BRANCH_BY_NAME_QUERY'];a274_0x391a=function(){return _0x34e8da;};return a274_0x391a();}'use strict';var __decorate=this&&this[a274_0x38b7f5(0x1d0)]||function(_0x1b267f,_0x1c2a43,_0x2577fe,_0x43943){const _0x25a0fe=a274_0x38b7f5;var _0x2288ed=arguments[_0x25a0fe(0x1ac)],_0x5a0c21=_0x2288ed<0x3?_0x1c2a43:_0x43943===null?_0x43943=Object[_0x25a0fe(0x1c3)](_0x1c2a43,_0x2577fe):_0x43943,_0x154981;if(typeof Reflect===_0x25a0fe(0x1c4)&&typeof Reflect[_0x25a0fe(0x1da)]===_0x25a0fe(0x19a))_0x5a0c21=Reflect['decorate'](_0x1b267f,_0x1c2a43,_0x2577fe,_0x43943);else{for(var _0x240963=_0x1b267f[_0x25a0fe(0x1ac)]-0x1;_0x240963>=0x0;_0x240963--)if(_0x154981=_0x1b267f[_0x240963])_0x5a0c21=(_0x2288ed<0x3?_0x154981(_0x5a0c21):_0x2288ed>0x3?_0x154981(_0x1c2a43,_0x2577fe,_0x5a0c21):_0x154981(_0x1c2a43,_0x2577fe))||_0x5a0c21;}return _0x2288ed>0x3&&_0x5a0c21&&Object['defineProperty'](_0x1c2a43,_0x2577fe,_0x5a0c21),_0x5a0c21;},__metadata=this&&this[a274_0x38b7f5(0x1c8)]||function(_0x3818ed,_0x375d73){const _0x4356e1=a274_0x38b7f5;if(typeof Reflect===_0x4356e1(0x1c4)&&typeof Reflect[_0x4356e1(0x19c)]===_0x4356e1(0x19a))return Reflect[_0x4356e1(0x19c)](_0x3818ed,_0x375d73);};Object[a274_0x38b7f5(0x1a5)](exports,a274_0x38b7f5(0x1c6),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a274_0x38b7f5(0x1c9)),typedi_1=require('typedi'),constants_1=require(a274_0x38b7f5(0x1bd)),queries_1=require('../queries'),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a274_0x38b7f5(0x1d7)),salesforce_rest_service_1=require(a274_0x38b7f5(0x1ad));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x32ab21,_0x56fac2){const _0x2ee8b6=a274_0x38b7f5;this[_0x2ee8b6(0x1c5)]=_0x32ab21,this[_0x2ee8b6(0x1ae)]=_0x56fac2,this[_0x2ee8b6(0x1a6)]=0xc8;}[a274_0x38b7f5(0x1a9)](_0xe34a1e){const _0x4d91b2=a274_0x38b7f5,_0x4fbd47=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0xe34a1e,[_0x4d91b2(0x1d5),_0x4d91b2(0x1b7),_0x4d91b2(0x1ab),'File_Name__c',_0x4d91b2(0x1d4),'Id']);return{'id':_0x4fbd47['Id'],'name':_0x4fbd47[_0x4d91b2(0x1d5)],'type':_0x4fbd47[_0x4d91b2(0x1b7)],'fileName':_0x4fbd47[_0x4d91b2(0x1b9)],'crc32':_0x4fbd47[_0x4d91b2(0x1ab)],'version':+_0x4fbd47[_0x4d91b2(0x1d4)]};}async['getRepositoryIdByName'](_0x3ae501){const _0x52290a=a274_0x38b7f5,[_0x5ace4e]=await this[_0x52290a(0x1c5)][_0x52290a(0x1ce)](queries_1[_0x52290a(0x1aa)]['replace']('%name%',_0x3ae501));if(!_0x5ace4e)throw new not_found_error_1['NotFoundError'](_0x52290a(0x1b5)+_0x3ae501+'\x22\x20not\x20found\x20in\x20flosum.');return _0x5ace4e['Id'];}async[a274_0x38b7f5(0x19f)](_0x3c153a){const _0x24d1e5=a274_0x38b7f5,[_0x2f85e7]=await this['queryService']['query'](queries_1[_0x24d1e5(0x196)]['replace'](_0x24d1e5(0x1a7),_0x3c153a));if(!_0x2f85e7)throw new not_found_error_1[(_0x24d1e5(0x1ba))](_0x24d1e5(0x18d)+_0x3c153a+'\x22\x20not\x20found\x20in\x20flosum.');return _0x2f85e7['Id'];}async[a274_0x38b7f5(0x1cc)](){const _0x4f22a2=a274_0x38b7f5,_0x480045=await this['queryService'][_0x4f22a2(0x1ce)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x480045[_0x4f22a2(0x1c1)](_0x4c92cd=>(0x0,flosum_naming_utils_1[_0x4f22a2(0x18f)])(_0x4c92cd,['Id','Name']))['map'](_0x5d2fd2=>({'id':_0x5d2fd2['Id'],'name':_0x5d2fd2[_0x4f22a2(0x1d9)]}));}async[a274_0x38b7f5(0x1c2)](_0x19a4f2,_0x56ac49){const _0x393a51=a274_0x38b7f5,_0x3a68cc=[];while(_0x19a4f2[_0x393a51(0x1ac)]){const _0x2b7f1b=queries_1[_0x393a51(0x199)]['replace'](_0x393a51(0x197),_0x19a4f2['splice'](0x0,this[_0x393a51(0x1a6)])[_0x393a51(0x1c1)](_0x107117=>'\x27'+_0x107117+'\x27')['join'](','))[_0x393a51(0x1bc)](_0x393a51(0x1cd),_0x56ac49),_0x4e4b3d=await this[_0x393a51(0x1c5)][_0x393a51(0x1ce)](_0x2b7f1b);_0x3a68cc['push'](..._0x4e4b3d);}return _0x3a68cc['map'](_0x5815e5=>this[_0x393a51(0x1a9)](_0x5815e5));}async[a274_0x38b7f5(0x1cb)](_0x33e720,_0x23e4c){const _0x4c3bbe=a274_0x38b7f5,_0x3c71b3=[];while(_0x33e720[_0x4c3bbe(0x1ac)]){const _0x27213a=queries_1[_0x4c3bbe(0x1d2)][_0x4c3bbe(0x1bc)](_0x4c3bbe(0x197),_0x33e720[_0x4c3bbe(0x19d)](0x0,this[_0x4c3bbe(0x1a6)])['map'](_0x2beadf=>'\x27'+_0x2beadf+'\x27')[_0x4c3bbe(0x1a2)](','))[_0x4c3bbe(0x1bc)](_0x4c3bbe(0x1af),_0x23e4c),_0x389765=await this[_0x4c3bbe(0x1c5)][_0x4c3bbe(0x1ce)](_0x27213a);_0x3c71b3[_0x4c3bbe(0x1d3)](..._0x389765);}return _0x3c71b3[_0x4c3bbe(0x1c1)](_0xe1f5e9=>this[_0x4c3bbe(0x1a9)](_0xe1f5e9));}async[a274_0x38b7f5(0x1bb)](_0x15ae4b){const _0x1123ec=a274_0x38b7f5,_0x39eb3f=queries_1[_0x1123ec(0x1b1)]['replace'](_0x1123ec(0x1cd),_0x15ae4b),_0x2c20c8=await this[_0x1123ec(0x1c5)][_0x1123ec(0x1ce)](_0x39eb3f);return _0x2c20c8[_0x1123ec(0x1c1)](_0x468c56=>this[_0x1123ec(0x1a9)](_0x468c56));}async[a274_0x38b7f5(0x1be)](_0x1337f3){const _0x595efc=a274_0x38b7f5,_0x196daa=queries_1['GET_BRANCH_COMPONENTS_QUERY']['replace']('%branchId%',_0x1337f3),_0x14868e=await this[_0x595efc(0x1c5)]['query'](_0x196daa);return _0x14868e[_0x595efc(0x1c1)](_0x598439=>this[_0x595efc(0x1a9)](_0x598439));}async[a274_0x38b7f5(0x193)](_0x3b7720){const _0x522cc1=a274_0x38b7f5,_0x3587de=[..._0x3b7720],_0x2f90f3=[];while(_0x3587de[_0x522cc1(0x1ac)]){const _0x129d72=queries_1[_0x522cc1(0x1b4)][_0x522cc1(0x1bc)](_0x522cc1(0x194),_0x3587de[_0x522cc1(0x19d)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x3fc06a=>'\x27'+_0x3fc06a+'\x27')[_0x522cc1(0x1a2)](',')),_0x308bcd=await this[_0x522cc1(0x1c5)][_0x522cc1(0x1ce)](_0x129d72);_0x2f90f3[_0x522cc1(0x1d3)](..._0x308bcd[_0x522cc1(0x1c1)](_0x41836c=>_0x41836c['Id']));}return _0x2f90f3;}async[a274_0x38b7f5(0x1cf)](_0x5363ea,_0x2756c5){const _0x14615f=a274_0x38b7f5;return this[_0x14615f(0x1ae)][_0x14615f(0x1d8)](constants_1[_0x14615f(0x1a8)],{[constants_1['FLOSUM_NAMESPACE']+_0x14615f(0x192)]:_0x2756c5,[constants_1[_0x14615f(0x1a4)]+_0x14615f(0x1c7)]:_0x5363ea[_0x14615f(0x19e)](0x0,0xff),[constants_1[_0x14615f(0x1a4)]+_0x14615f(0x1a1)]:'Completed',[constants_1['FLOSUM_GIT_NAMESPACE']+'Is_From_Agent__c']:!![]});}};function a274_0x4ac5(_0x92092c,_0x3eaf13){const _0x1f4470=a274_0x391a();return a274_0x4ac5=function(_0x2ac2c4,_0x1682c7){_0x2ac2c4=_0x2ac2c4-0x18c;let _0x391a12=_0x1f4470[_0x2ac2c4];return _0x391a12;},a274_0x4ac5(_0x92092c,_0x3eaf13);}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a274_0x38b7f5(0x1d6)])(),__metadata(a274_0x38b7f5(0x19b),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a274_0x38b7f5(0x1c0)]])],SalesforceGitSyncService),exports[a274_0x38b7f5(0x1b2)]=SalesforceGitSyncService;