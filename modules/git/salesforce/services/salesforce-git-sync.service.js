const a231_0x418bd6=a231_0x1247;(function(_0x3c5d68,_0x30f032){const _0x20535b=a231_0x1247,_0x94badc=_0x3c5d68();while(!![]){try{const _0x2fadbe=-parseInt(_0x20535b(0x187))/0x1+parseInt(_0x20535b(0x184))/0x2*(parseInt(_0x20535b(0x1a9))/0x3)+parseInt(_0x20535b(0x16e))/0x4*(parseInt(_0x20535b(0x176))/0x5)+-parseInt(_0x20535b(0x1ad))/0x6*(parseInt(_0x20535b(0x19d))/0x7)+parseInt(_0x20535b(0x18b))/0x8*(-parseInt(_0x20535b(0x18f))/0x9)+parseInt(_0x20535b(0x19f))/0xa+parseInt(_0x20535b(0x199))/0xb*(parseInt(_0x20535b(0x17d))/0xc);if(_0x2fadbe===_0x30f032)break;else _0x94badc['push'](_0x94badc['shift']());}catch(_0x4e47fd){_0x94badc['push'](_0x94badc['shift']());}}}(a231_0x2136,0x618f1));const a231_0x5c5739=(function(){let _0x2db59b=!![];return function(_0x31039a,_0x3dc5e2){const _0x5882cd=_0x2db59b?function(){const _0x321b96=a231_0x1247;if(_0x3dc5e2){const _0x13602c=_0x3dc5e2[_0x321b96(0x1ae)](_0x31039a,arguments);return _0x3dc5e2=null,_0x13602c;}}:function(){};return _0x2db59b=![],_0x5882cd;};}()),a231_0x352f0d=a231_0x5c5739(this,function(){const _0x333073=a231_0x1247;return a231_0x352f0d[_0x333073(0x190)]()[_0x333073(0x180)](_0x333073(0x1af))[_0x333073(0x190)]()[_0x333073(0x191)](a231_0x352f0d)[_0x333073(0x180)](_0x333073(0x1af));});a231_0x352f0d();'use strict';var __decorate=this&&this['__decorate']||function(_0x14261f,_0x35d75f,_0x56d88d,_0x52bbcd){const _0x4d61ca=a231_0x1247;var _0x5ed7b5=arguments['length'],_0x373bec=_0x5ed7b5<0x3?_0x35d75f:_0x52bbcd===null?_0x52bbcd=Object['getOwnPropertyDescriptor'](_0x35d75f,_0x56d88d):_0x52bbcd,_0x40d6da;if(typeof Reflect===_0x4d61ca(0x166)&&typeof Reflect[_0x4d61ca(0x1a1)]===_0x4d61ca(0x183))_0x373bec=Reflect[_0x4d61ca(0x1a1)](_0x14261f,_0x35d75f,_0x56d88d,_0x52bbcd);else{for(var _0x2c0017=_0x14261f[_0x4d61ca(0x19c)]-0x1;_0x2c0017>=0x0;_0x2c0017--)if(_0x40d6da=_0x14261f[_0x2c0017])_0x373bec=(_0x5ed7b5<0x3?_0x40d6da(_0x373bec):_0x5ed7b5>0x3?_0x40d6da(_0x35d75f,_0x56d88d,_0x373bec):_0x40d6da(_0x35d75f,_0x56d88d))||_0x373bec;}return _0x5ed7b5>0x3&&_0x373bec&&Object[_0x4d61ca(0x1a5)](_0x35d75f,_0x56d88d,_0x373bec),_0x373bec;},__metadata=this&&this[a231_0x418bd6(0x193)]||function(_0x555d18,_0xe3db3c){const _0x234736=a231_0x418bd6;if(typeof Reflect===_0x234736(0x166)&&typeof Reflect[_0x234736(0x1a6)]==='function')return Reflect[_0x234736(0x1a6)](_0x555d18,_0xe3db3c);};function a231_0x1247(_0x1ccfc1,_0x447d6f){const _0x1b3c3f=a231_0x2136();return a231_0x1247=function(_0x352f0d,_0x5c5739){_0x352f0d=_0x352f0d-0x162;let _0x21368f=_0x1b3c3f[_0x352f0d];return _0x21368f;},a231_0x1247(_0x1ccfc1,_0x447d6f);}Object[a231_0x418bd6(0x1a5)](exports,a231_0x418bd6(0x194),{'value':!![]}),exports[a231_0x418bd6(0x197)]=void 0x0;const not_found_error_1=require(a231_0x418bd6(0x173)),typedi_1=require('typedi'),constants_1=require(a231_0x418bd6(0x174)),queries_1=require(a231_0x418bd6(0x16d)),flosum_naming_utils_1=require(a231_0x418bd6(0x19a)),salesforce_query_service_1=require(a231_0x418bd6(0x196)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x5e40ed,_0x4bed85){const _0x4f3a87=a231_0x418bd6;this[_0x4f3a87(0x198)]=_0x5e40ed,this[_0x4f3a87(0x17e)]=_0x4bed85,this[_0x4f3a87(0x1b1)]=0xc8;}[a231_0x418bd6(0x1a4)](_0x1a4ef5){const _0x2e2578=a231_0x418bd6,_0x26cdf6=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x1a4ef5,[_0x2e2578(0x17f),_0x2e2578(0x16c),_0x2e2578(0x1a7),_0x2e2578(0x1a2),_0x2e2578(0x1a0),'Id']);return{'id':_0x26cdf6['Id'],'name':_0x26cdf6[_0x2e2578(0x17f)],'type':_0x26cdf6['Component_Type__c'],'fileName':_0x26cdf6[_0x2e2578(0x1a2)],'crc32':_0x26cdf6['CRC32__c'],'version':+_0x26cdf6[_0x2e2578(0x1a0)]};}async[a231_0x418bd6(0x1ac)](_0x2af9ad){const _0x1b8eaa=a231_0x418bd6,[_0x1d80a9]=await this[_0x1b8eaa(0x198)][_0x1b8eaa(0x18c)](queries_1['GET_REPOSITORY_BY_NAME_QUERY']['replace']('%name%',_0x2af9ad));if(!_0x1d80a9)throw new not_found_error_1[(_0x1b8eaa(0x188))]('Repository\x20\x22'+_0x2af9ad+_0x1b8eaa(0x189));return _0x1d80a9['Id'];}async[a231_0x418bd6(0x17a)](_0x40d6b9){const _0xe91a18=a231_0x418bd6,[_0x3e989c]=await this[_0xe91a18(0x198)][_0xe91a18(0x18c)](queries_1[_0xe91a18(0x1a8)]['replace'](_0xe91a18(0x178),_0x40d6b9));if(!_0x3e989c)throw new not_found_error_1['NotFoundError'](_0xe91a18(0x172)+_0x40d6b9+_0xe91a18(0x189));return _0x3e989c['Id'];}async[a231_0x418bd6(0x18d)](){const _0x8dcc2=a231_0x418bd6,_0x5d4652=await this[_0x8dcc2(0x198)]['query'](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x5d4652['map'](_0x275351=>(0x0,flosum_naming_utils_1[_0x8dcc2(0x16a)])(_0x275351,['Id',_0x8dcc2(0x167)]))['map'](_0x1dff07=>({'id':_0x1dff07['Id'],'name':_0x1dff07[_0x8dcc2(0x167)]}));}async[a231_0x418bd6(0x177)](_0x5e2aec,_0x5cf485){const _0x3b3b17=a231_0x418bd6,_0x3dbfab=[];while(_0x5e2aec[_0x3b3b17(0x19c)]){const _0x430c5f=queries_1[_0x3b3b17(0x162)][_0x3b3b17(0x17b)](_0x3b3b17(0x19e),_0x5e2aec[_0x3b3b17(0x18e)](0x0,this[_0x3b3b17(0x1b1)])[_0x3b3b17(0x168)](_0x58baec=>'\x27'+_0x58baec+'\x27')[_0x3b3b17(0x1aa)](','))[_0x3b3b17(0x17b)]('%repositoryId%',_0x5cf485),_0x550786=await this[_0x3b3b17(0x198)][_0x3b3b17(0x18c)](_0x430c5f);_0x3dbfab[_0x3b3b17(0x164)](..._0x550786);}return _0x3dbfab[_0x3b3b17(0x168)](_0x1a4244=>this[_0x3b3b17(0x1a4)](_0x1a4244));}async[a231_0x418bd6(0x182)](_0x3c52b9,_0x4ff37e){const _0x2b879a=a231_0x418bd6,_0x42169c=[];while(_0x3c52b9[_0x2b879a(0x19c)]){const _0x5af39f=queries_1[_0x2b879a(0x1a3)][_0x2b879a(0x17b)]('%fileNames%',_0x3c52b9['splice'](0x0,this[_0x2b879a(0x1b1)])['map'](_0x270578=>'\x27'+_0x270578+'\x27')[_0x2b879a(0x1aa)](','))['replace'](_0x2b879a(0x169),_0x4ff37e),_0x4e017f=await this[_0x2b879a(0x198)][_0x2b879a(0x18c)](_0x5af39f);_0x42169c[_0x2b879a(0x164)](..._0x4e017f);}return _0x42169c[_0x2b879a(0x168)](_0x5494c7=>this['extractComponentMetadataFromRecord'](_0x5494c7));}async['fetchRepositoryComponents'](_0x4583fc){const _0x4b115b=a231_0x418bd6,_0x19eac6=queries_1[_0x4b115b(0x195)]['replace'](_0x4b115b(0x185),_0x4583fc),_0x4345fa=await this[_0x4b115b(0x198)][_0x4b115b(0x18c)](_0x19eac6);return _0x4345fa['map'](_0x236902=>this[_0x4b115b(0x1a4)](_0x236902));}async[a231_0x418bd6(0x1b0)](_0xd7f70c){const _0x43d501=a231_0x418bd6,_0x1e8e43=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x43d501(0x17b)](_0x43d501(0x169),_0xd7f70c),_0x6743dc=await this[_0x43d501(0x198)][_0x43d501(0x18c)](_0x1e8e43);return _0x6743dc[_0x43d501(0x168)](_0x5bb2a9=>this['extractComponentMetadataFromRecord'](_0x5bb2a9));}async[a231_0x418bd6(0x16b)](_0x3f4b81){const _0x5e39d3=a231_0x418bd6,_0x476b37=[..._0x3f4b81],_0x3cab82=[];while(_0x476b37[_0x5e39d3(0x19c)]){const _0x578bd2=queries_1[_0x5e39d3(0x19b)][_0x5e39d3(0x17b)](_0x5e39d3(0x192),_0x476b37[_0x5e39d3(0x18e)](0x0,this[_0x5e39d3(0x1b1)])[_0x5e39d3(0x168)](_0x2a30bf=>'\x27'+_0x2a30bf+'\x27')[_0x5e39d3(0x1aa)](',')),_0x4577e1=await this[_0x5e39d3(0x198)][_0x5e39d3(0x18c)](_0x578bd2);_0x3cab82[_0x5e39d3(0x164)](..._0x4577e1[_0x5e39d3(0x168)](_0x33cc7f=>_0x33cc7f['Id']));}return _0x3cab82;}async[a231_0x418bd6(0x170)](_0x40636a,_0x1bea4b){const _0x1abedf=a231_0x418bd6;return this[_0x1abedf(0x17e)][_0x1abedf(0x16f)](constants_1[_0x1abedf(0x163)],{[constants_1[_0x1abedf(0x181)]+'Repository__c']:_0x1bea4b,[constants_1[_0x1abedf(0x181)]+'Commit_Name__c']:_0x40636a[_0x1abedf(0x1ab)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x1abedf(0x179)]:_0x1abedf(0x17c),[constants_1[_0x1abedf(0x171)]+_0x1abedf(0x175)]:!![]});}};function a231_0x2136(){const _0x991676=['fetchRepositoryComponentsByFilenames','%name%','Status__c','getBranchIdByName','replace','Completed','11220nBMhKW','restService','Component_Name__c','search','FLOSUM_NAMESPACE','fetchBranchComponentsByFilenames','function','1636aMCwRr','%repositoryId%','SalesforceQueryService','554917yvKRAZ','NotFoundError','\x22\x20not\x20found\x20in\x20flosum.','Service','2856luxcWu','query','getComponentRecordTypes','splice','441sQeQMf','toString','constructor','%componentIds%','__metadata','__esModule','GET_REPOSITORY_COMPONENTS_QUERY','./salesforce-query.service','SalesforceGitSyncService','queryService','792GoYruT','../utils/flosum-naming.utils','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','length','61376HRvmma','%fileNames%','5033020YVmoLh','Version__c','decorate','File_Name__c','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','extractComponentMetadataFromRecord','defineProperty','metadata','CRC32__c','GET_BRANCH_BY_NAME_QUERY','2028WRdXNJ','join','substr','getRepositoryIdByName','342yoLqEb','apply','(((.+)+)+)+$','fetchBranchComponents','MAX_QUERY_ARRAY_ITEMS','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','FLOSUM_COMMIT','push','design:paramtypes','object','Name','map','%branchId%','extractFieldsFromRecord','fetchCommitManifestsByComponentIds','Component_Type__c','../queries','1392788ieZLjI','post','createCommit','FLOSUM_GIT_NAMESPACE','Branch\x20\x22','../../../../core/errors/not-found.error','../../../../constants','Is_From_Agent__c','5NqKTOz'];a231_0x2136=function(){return _0x991676;};return a231_0x2136();}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a231_0x418bd6(0x18a)])(),__metadata(a231_0x418bd6(0x165),[salesforce_query_service_1[a231_0x418bd6(0x186)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a231_0x418bd6(0x197)]=SalesforceGitSyncService;