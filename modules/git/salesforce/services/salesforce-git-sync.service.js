const a273_0x56f0c5=a273_0x3500;(function(_0x581012,_0x3ccc7c){const _0x48bc09=a273_0x3500,_0x401c23=_0x581012();while(!![]){try{const _0x33f5ec=-parseInt(_0x48bc09(0xe1))/0x1*(-parseInt(_0x48bc09(0xe5))/0x2)+-parseInt(_0x48bc09(0xc0))/0x3*(-parseInt(_0x48bc09(0xcb))/0x4)+-parseInt(_0x48bc09(0xe4))/0x5*(-parseInt(_0x48bc09(0xed))/0x6)+-parseInt(_0x48bc09(0xe6))/0x7+-parseInt(_0x48bc09(0xc6))/0x8+-parseInt(_0x48bc09(0xe3))/0x9+parseInt(_0x48bc09(0xfc))/0xa;if(_0x33f5ec===_0x3ccc7c)break;else _0x401c23['push'](_0x401c23['shift']());}catch(_0x46e2ac){_0x401c23['push'](_0x401c23['shift']());}}}(a273_0x58bd,0xb43d8));const a273_0x163fe7=(function(){let _0x78fe7c=!![];return function(_0x3f95ff,_0x4cc320){const _0x26a85e=_0x78fe7c?function(){const _0x9410ea=a273_0x3500;if(_0x4cc320){const _0x4a07f1=_0x4cc320[_0x9410ea(0xf1)](_0x3f95ff,arguments);return _0x4cc320=null,_0x4a07f1;}}:function(){};return _0x78fe7c=![],_0x26a85e;};}()),a273_0x4c20a1=a273_0x163fe7(this,function(){const _0x46565b=a273_0x3500;return a273_0x4c20a1[_0x46565b(0xd5)]()[_0x46565b(0xf4)](_0x46565b(0xda))['toString']()[_0x46565b(0xd0)](a273_0x4c20a1)['search'](_0x46565b(0xda));});function a273_0x3500(_0x23c951,_0x460795){const _0x11ebb8=a273_0x58bd();return a273_0x3500=function(_0x4c20a1,_0x163fe7){_0x4c20a1=_0x4c20a1-0xb7;let _0x58bd30=_0x11ebb8[_0x4c20a1];return _0x58bd30;},a273_0x3500(_0x23c951,_0x460795);}a273_0x4c20a1();'use strict';var __decorate=this&&this[a273_0x56f0c5(0xf0)]||function(_0x1a3dc6,_0x11c632,_0x4f2aed,_0x5c6bc5){const _0x201694=a273_0x56f0c5;var _0x2b4e96=arguments[_0x201694(0x103)],_0xc73f08=_0x2b4e96<0x3?_0x11c632:_0x5c6bc5===null?_0x5c6bc5=Object[_0x201694(0xdd)](_0x11c632,_0x4f2aed):_0x5c6bc5,_0xc1c631;if(typeof Reflect===_0x201694(0xd6)&&typeof Reflect[_0x201694(0xb9)]===_0x201694(0xc3))_0xc73f08=Reflect[_0x201694(0xb9)](_0x1a3dc6,_0x11c632,_0x4f2aed,_0x5c6bc5);else{for(var _0x4e9532=_0x1a3dc6[_0x201694(0x103)]-0x1;_0x4e9532>=0x0;_0x4e9532--)if(_0xc1c631=_0x1a3dc6[_0x4e9532])_0xc73f08=(_0x2b4e96<0x3?_0xc1c631(_0xc73f08):_0x2b4e96>0x3?_0xc1c631(_0x11c632,_0x4f2aed,_0xc73f08):_0xc1c631(_0x11c632,_0x4f2aed))||_0xc73f08;}return _0x2b4e96>0x3&&_0xc73f08&&Object[_0x201694(0xd8)](_0x11c632,_0x4f2aed,_0xc73f08),_0xc73f08;},__metadata=this&&this[a273_0x56f0c5(0xc4)]||function(_0x4a9199,_0x437007){const _0x3ee951=a273_0x56f0c5;if(typeof Reflect===_0x3ee951(0xd6)&&typeof Reflect['metadata']===_0x3ee951(0xc3))return Reflect['metadata'](_0x4a9199,_0x437007);};function a273_0x58bd(){const _0xbfcdf0=['GET_REPOSITORY_COMPONENTS_QUERY','typedi','getComponentRecordTypes','toString','object','Is_From_Agent__c','defineProperty','%componentIds%','(((.+)+)+)+$','design:paramtypes','queryService','getOwnPropertyDescriptor','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','%name%','extractFieldsFromRecord','3pgJKMG','Service','5145948YHAiih','1175585HBWBGc','631982yuiNsZ','9839739NQNKcU','fetchCommitManifestsByComponentIds','../queries','getRepositoryIdByName','MAX_QUERY_ARRAY_ITEMS','Name','%fileNames%','12BVWVnF','Component_Type__c','GET_BRANCH_COMPONENTS_QUERY','__decorate','apply','fetchBranchComponents','Component_Name__c','search','SalesforceRestService','FLOSUM_NAMESPACE','push','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','./salesforce-query.service','Completed','extractComponentMetadataFromRecord','13230940wZtQSN','Repository__c','GET_REPOSITORY_BY_NAME_QUERY','./salesforce-rest.service','\x22\x20not\x20found\x20in\x20flosum.','replace','splice','length','FLOSUM_COMMIT','Version__c','map','FLOSUM_GIT_NAMESPACE','NotFoundError','decorate','CRC32__c','%repositoryId%','query','../../../../constants','join','Commit_Name__c','123BZeOGl','Repository\x20\x22','getBranchIdByName','function','__metadata','%branchId%','10972288BDRoDk','fetchRepositoryComponentsByFilenames','__esModule','post','SalesforceGitSyncService','131312KBXsoJ','SalesforceQueryService','../utils/flosum-naming.utils','GET_BRANCH_BY_NAME_QUERY','createCommit','constructor','File_Name__c'];a273_0x58bd=function(){return _0xbfcdf0;};return a273_0x58bd();}Object[a273_0x56f0c5(0xd8)](exports,a273_0x56f0c5(0xc8),{'value':!![]}),exports[a273_0x56f0c5(0xca)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a273_0x56f0c5(0xd3)),constants_1=require(a273_0x56f0c5(0xbd)),queries_1=require(a273_0x56f0c5(0xe8)),flosum_naming_utils_1=require(a273_0x56f0c5(0xcd)),salesforce_query_service_1=require(a273_0x56f0c5(0xf9)),salesforce_rest_service_1=require(a273_0x56f0c5(0xff));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x3a9254,_0x533e0d){const _0xbb5737=a273_0x56f0c5;this[_0xbb5737(0xdc)]=_0x3a9254,this['restService']=_0x533e0d,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a273_0x56f0c5(0xfb)](_0x253f80){const _0x28f3a0=a273_0x56f0c5,_0x38de1d=(0x0,flosum_naming_utils_1[_0x28f3a0(0xe0)])(_0x253f80,[_0x28f3a0(0xf3),'Component_Type__c','CRC32__c',_0x28f3a0(0xd1),_0x28f3a0(0x105),'Id']);return{'id':_0x38de1d['Id'],'name':_0x38de1d[_0x28f3a0(0xf3)],'type':_0x38de1d[_0x28f3a0(0xee)],'fileName':_0x38de1d[_0x28f3a0(0xd1)],'crc32':_0x38de1d[_0x28f3a0(0xba)],'version':+_0x38de1d[_0x28f3a0(0x105)]};}async[a273_0x56f0c5(0xe9)](_0x3621ce){const _0x1f7081=a273_0x56f0c5,[_0x1906f7]=await this[_0x1f7081(0xdc)][_0x1f7081(0xbc)](queries_1[_0x1f7081(0xfe)]['replace'](_0x1f7081(0xdf),_0x3621ce));if(!_0x1906f7)throw new not_found_error_1[(_0x1f7081(0xb8))](_0x1f7081(0xc1)+_0x3621ce+_0x1f7081(0x100));return _0x1906f7['Id'];}async[a273_0x56f0c5(0xc2)](_0x51fbf6){const _0x3b9095=a273_0x56f0c5,[_0x1caa7c]=await this[_0x3b9095(0xdc)][_0x3b9095(0xbc)](queries_1[_0x3b9095(0xce)][_0x3b9095(0x101)](_0x3b9095(0xdf),_0x51fbf6));if(!_0x1caa7c)throw new not_found_error_1['NotFoundError']('Branch\x20\x22'+_0x51fbf6+_0x3b9095(0x100));return _0x1caa7c['Id'];}async[a273_0x56f0c5(0xd4)](){const _0x18db78=a273_0x56f0c5,_0x8079cf=await this[_0x18db78(0xdc)][_0x18db78(0xbc)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x8079cf[_0x18db78(0x106)](_0x703280=>(0x0,flosum_naming_utils_1[_0x18db78(0xe0)])(_0x703280,['Id',_0x18db78(0xeb)]))['map'](_0x28ec15=>({'id':_0x28ec15['Id'],'name':_0x28ec15['Name']}));}async[a273_0x56f0c5(0xc7)](_0x477314,_0x4046ff){const _0x595803=a273_0x56f0c5,_0x198e1f=[];while(_0x477314[_0x595803(0x103)]){const _0x4bea47=queries_1[_0x595803(0xde)][_0x595803(0x101)]('%fileNames%',_0x477314[_0x595803(0x102)](0x0,this[_0x595803(0xea)])[_0x595803(0x106)](_0x371904=>'\x27'+_0x371904+'\x27')[_0x595803(0xbe)](','))['replace'](_0x595803(0xbb),_0x4046ff),_0x2457f0=await this[_0x595803(0xdc)]['query'](_0x4bea47);_0x198e1f[_0x595803(0xf7)](..._0x2457f0);}return _0x198e1f[_0x595803(0x106)](_0x155d1e=>this[_0x595803(0xfb)](_0x155d1e));}async['fetchBranchComponentsByFilenames'](_0x34c5d6,_0x165ec0){const _0x4a7c42=a273_0x56f0c5,_0x1ab6e6=[];while(_0x34c5d6[_0x4a7c42(0x103)]){const _0x5ea78=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x4a7c42(0x101)](_0x4a7c42(0xec),_0x34c5d6[_0x4a7c42(0x102)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x25f87d=>'\x27'+_0x25f87d+'\x27')[_0x4a7c42(0xbe)](','))['replace'](_0x4a7c42(0xc5),_0x165ec0),_0xadf722=await this['queryService'][_0x4a7c42(0xbc)](_0x5ea78);_0x1ab6e6[_0x4a7c42(0xf7)](..._0xadf722);}return _0x1ab6e6[_0x4a7c42(0x106)](_0x27c902=>this[_0x4a7c42(0xfb)](_0x27c902));}async['fetchRepositoryComponents'](_0x4b2d52){const _0x1f0859=a273_0x56f0c5,_0xdbc6ea=queries_1[_0x1f0859(0xd2)][_0x1f0859(0x101)]('%repositoryId%',_0x4b2d52),_0xc96d80=await this['queryService'][_0x1f0859(0xbc)](_0xdbc6ea);return _0xc96d80[_0x1f0859(0x106)](_0x35ec92=>this['extractComponentMetadataFromRecord'](_0x35ec92));}async[a273_0x56f0c5(0xf2)](_0x3845ed){const _0x4a4510=a273_0x56f0c5,_0x55d330=queries_1[_0x4a4510(0xef)][_0x4a4510(0x101)]('%branchId%',_0x3845ed),_0x1af5ae=await this[_0x4a4510(0xdc)][_0x4a4510(0xbc)](_0x55d330);return _0x1af5ae[_0x4a4510(0x106)](_0xc47c3e=>this[_0x4a4510(0xfb)](_0xc47c3e));}async[a273_0x56f0c5(0xe7)](_0x2d366c){const _0x3369e5=a273_0x56f0c5,_0x312911=[..._0x2d366c],_0x3d486d=[];while(_0x312911[_0x3369e5(0x103)]){const _0x303009=queries_1[_0x3369e5(0xf8)][_0x3369e5(0x101)](_0x3369e5(0xd9),_0x312911[_0x3369e5(0x102)](0x0,this[_0x3369e5(0xea)])[_0x3369e5(0x106)](_0x3c2a7f=>'\x27'+_0x3c2a7f+'\x27')[_0x3369e5(0xbe)](',')),_0x57bdef=await this[_0x3369e5(0xdc)][_0x3369e5(0xbc)](_0x303009);_0x3d486d['push'](..._0x57bdef[_0x3369e5(0x106)](_0xd678ae=>_0xd678ae['Id']));}return _0x3d486d;}async[a273_0x56f0c5(0xcf)](_0x251977,_0x33bd69){const _0xdabb5b=a273_0x56f0c5;return this['restService'][_0xdabb5b(0xc9)](constants_1[_0xdabb5b(0x104)],{[constants_1[_0xdabb5b(0xf6)]+_0xdabb5b(0xfd)]:_0x33bd69,[constants_1[_0xdabb5b(0xf6)]+_0xdabb5b(0xbf)]:_0x251977['substr'](0x0,0xff),[constants_1[_0xdabb5b(0xf6)]+'Status__c']:_0xdabb5b(0xfa),[constants_1[_0xdabb5b(0xb7)]+_0xdabb5b(0xd7)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a273_0x56f0c5(0xe2)])(),__metadata(a273_0x56f0c5(0xdb),[salesforce_query_service_1[a273_0x56f0c5(0xcc)],salesforce_rest_service_1[a273_0x56f0c5(0xf5)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;