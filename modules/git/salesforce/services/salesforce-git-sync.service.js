const a274_0x2439fd=a274_0x183b;(function(_0x406f18,_0x4d58de){const _0x1ae7cc=a274_0x183b,_0x3784d0=_0x406f18();while(!![]){try{const _0x1d920d=parseInt(_0x1ae7cc(0x221))/0x1*(parseInt(_0x1ae7cc(0x1ff))/0x2)+-parseInt(_0x1ae7cc(0x202))/0x3+parseInt(_0x1ae7cc(0x1f1))/0x4+parseInt(_0x1ae7cc(0x201))/0x5+parseInt(_0x1ae7cc(0x1fa))/0x6*(-parseInt(_0x1ae7cc(0x228))/0x7)+-parseInt(_0x1ae7cc(0x20b))/0x8+parseInt(_0x1ae7cc(0x210))/0x9;if(_0x1d920d===_0x4d58de)break;else _0x3784d0['push'](_0x3784d0['shift']());}catch(_0x4eb1e0){_0x3784d0['push'](_0x3784d0['shift']());}}}(a274_0x4e13,0x3a0f2));function a274_0x4e13(){const _0xc1c1=['join','../queries','Commit_Name__c','GET_BRANCH_COMPONENTS_QUERY','../../../../constants','MAX_QUERY_ARRAY_ITEMS','SalesforceGitSyncService','Component_Name__c','decorate','Branch\x20\x22','Service','NotFoundError','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','__decorate','\x22\x20not\x20found\x20in\x20flosum.','map','post','./salesforce-query.service','343788WfwZIB','%componentIds%','__esModule','toString','(((.+)+)+)+$','%repositoryId%','metadata','Repository__c','%branchId%','563118uSolRZ','constructor','extractFieldsFromRecord','GET_REPOSITORY_COMPONENTS_QUERY','Name','25606Axkuqy','fetchBranchComponents','1757265NhTgTy','820776pnJBpx','../../../../core/errors/not-found.error','./salesforce-rest.service','FLOSUM_GIT_NAMESPACE','function','fetchRepositoryComponents','SalesforceRestService','../utils/flosum-naming.utils','push','3242808Npxfdp','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','FLOSUM_NAMESPACE','CRC32__c','replace','4928400cRPIOb','length','splice','queryService','apply','getComponentRecordTypes','getBranchIdByName','restService','extractComponentMetadataFromRecord','Component_Type__c','search','Status__c','%fileNames%','GET_COMPONENT_RECORD_TYPES_QUERY','query','Version__c','fetchBranchComponentsByFilenames','2xRgZEQ','GET_REPOSITORY_BY_NAME_QUERY','%name%','GET_BRANCH_BY_NAME_QUERY','fetchRepositoryComponentsByFilenames','createCommit','SalesforceQueryService','7xSvakd','defineProperty','File_Name__c','substr'];a274_0x4e13=function(){return _0xc1c1;};return a274_0x4e13();}const a274_0x4c3628=(function(){let _0x2a7de7=!![];return function(_0x5ed3d9,_0x2627aa){const _0x1086bc=_0x2a7de7?function(){const _0x5f471b=a274_0x183b;if(_0x2627aa){const _0x2ca93e=_0x2627aa[_0x5f471b(0x214)](_0x5ed3d9,arguments);return _0x2627aa=null,_0x2ca93e;}}:function(){};return _0x2a7de7=![],_0x1086bc;};}()),a274_0x13deef=a274_0x4c3628(this,function(){const _0x158031=a274_0x183b;return a274_0x13deef[_0x158031(0x1f4)]()[_0x158031(0x21a)](_0x158031(0x1f5))[_0x158031(0x1f4)]()[_0x158031(0x1fb)](a274_0x13deef)[_0x158031(0x21a)]('(((.+)+)+)+$');});a274_0x13deef();'use strict';var __decorate=this&&this[a274_0x2439fd(0x239)]||function(_0x133213,_0x227fa6,_0x28109c,_0x5b4eca){const _0x1463a6=a274_0x2439fd;var _0x49c06d=arguments[_0x1463a6(0x211)],_0x5b134b=_0x49c06d<0x3?_0x227fa6:_0x5b4eca===null?_0x5b4eca=Object['getOwnPropertyDescriptor'](_0x227fa6,_0x28109c):_0x5b4eca,_0x543402;if(typeof Reflect==='object'&&typeof Reflect[_0x1463a6(0x234)]==='function')_0x5b134b=Reflect[_0x1463a6(0x234)](_0x133213,_0x227fa6,_0x28109c,_0x5b4eca);else{for(var _0x4b14e5=_0x133213[_0x1463a6(0x211)]-0x1;_0x4b14e5>=0x0;_0x4b14e5--)if(_0x543402=_0x133213[_0x4b14e5])_0x5b134b=(_0x49c06d<0x3?_0x543402(_0x5b134b):_0x49c06d>0x3?_0x543402(_0x227fa6,_0x28109c,_0x5b134b):_0x543402(_0x227fa6,_0x28109c))||_0x5b134b;}return _0x49c06d>0x3&&_0x5b134b&&Object[_0x1463a6(0x229)](_0x227fa6,_0x28109c,_0x5b134b),_0x5b134b;},__metadata=this&&this['__metadata']||function(_0x4e3a20,_0xaf7c62){const _0x3c83a9=a274_0x2439fd;if(typeof Reflect==='object'&&typeof Reflect[_0x3c83a9(0x1f7)]===_0x3c83a9(0x206))return Reflect[_0x3c83a9(0x1f7)](_0x4e3a20,_0xaf7c62);};Object[a274_0x2439fd(0x229)](exports,a274_0x2439fd(0x1f3),{'value':!![]}),exports[a274_0x2439fd(0x232)]=void 0x0;const not_found_error_1=require(a274_0x2439fd(0x203)),typedi_1=require('typedi'),constants_1=require(a274_0x2439fd(0x230)),queries_1=require(a274_0x2439fd(0x22d)),flosum_naming_utils_1=require(a274_0x2439fd(0x209)),salesforce_query_service_1=require(a274_0x2439fd(0x1f0)),salesforce_rest_service_1=require(a274_0x2439fd(0x204));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x51df7d,_0x414bf0){const _0x632ba3=a274_0x2439fd;this[_0x632ba3(0x213)]=_0x51df7d,this[_0x632ba3(0x217)]=_0x414bf0,this[_0x632ba3(0x231)]=0xc8;}[a274_0x2439fd(0x218)](_0x2f25d1){const _0x60d5=a274_0x2439fd,_0x16995b=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x2f25d1,[_0x60d5(0x233),_0x60d5(0x219),_0x60d5(0x20e),_0x60d5(0x22a),'Version__c','Id']);return{'id':_0x16995b['Id'],'name':_0x16995b['Component_Name__c'],'type':_0x16995b[_0x60d5(0x219)],'fileName':_0x16995b[_0x60d5(0x22a)],'crc32':_0x16995b['CRC32__c'],'version':+_0x16995b[_0x60d5(0x21f)]};}async['getRepositoryIdByName'](_0xef435e){const _0x52d6be=a274_0x2439fd,[_0x2abcd3]=await this[_0x52d6be(0x213)]['query'](queries_1[_0x52d6be(0x222)][_0x52d6be(0x20f)](_0x52d6be(0x223),_0xef435e));if(!_0x2abcd3)throw new not_found_error_1[(_0x52d6be(0x237))]('Repository\x20\x22'+_0xef435e+_0x52d6be(0x23a));return _0x2abcd3['Id'];}async[a274_0x2439fd(0x216)](_0x31a246){const _0x2d0e37=a274_0x2439fd,[_0x27b4ab]=await this['queryService'][_0x2d0e37(0x21e)](queries_1[_0x2d0e37(0x224)][_0x2d0e37(0x20f)](_0x2d0e37(0x223),_0x31a246));if(!_0x27b4ab)throw new not_found_error_1[(_0x2d0e37(0x237))](_0x2d0e37(0x235)+_0x31a246+_0x2d0e37(0x23a));return _0x27b4ab['Id'];}async[a274_0x2439fd(0x215)](){const _0x836a25=a274_0x2439fd,_0x5ce299=await this['queryService'][_0x836a25(0x21e)](queries_1[_0x836a25(0x21d)]);return _0x5ce299[_0x836a25(0x1ee)](_0x96a1a4=>(0x0,flosum_naming_utils_1[_0x836a25(0x1fc)])(_0x96a1a4,['Id',_0x836a25(0x1fe)]))[_0x836a25(0x1ee)](_0x1c39e2=>({'id':_0x1c39e2['Id'],'name':_0x1c39e2[_0x836a25(0x1fe)]}));}async[a274_0x2439fd(0x225)](_0x33d95e,_0x21baee){const _0x3b1598=a274_0x2439fd,_0x3261b5=[];while(_0x33d95e[_0x3b1598(0x211)]){const _0x294b8a=queries_1[_0x3b1598(0x238)][_0x3b1598(0x20f)](_0x3b1598(0x21c),_0x33d95e['splice'](0x0,this[_0x3b1598(0x231)])[_0x3b1598(0x1ee)](_0xdb7ae6=>'\x27'+_0xdb7ae6+'\x27')[_0x3b1598(0x22c)](','))['replace'](_0x3b1598(0x1f6),_0x21baee),_0x183394=await this['queryService'][_0x3b1598(0x21e)](_0x294b8a);_0x3261b5[_0x3b1598(0x20a)](..._0x183394);}return _0x3261b5[_0x3b1598(0x1ee)](_0x487f99=>this[_0x3b1598(0x218)](_0x487f99));}async[a274_0x2439fd(0x220)](_0x1df7cb,_0x40130c){const _0x33047e=a274_0x2439fd,_0x12e43c=[];while(_0x1df7cb['length']){const _0x35670e=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY']['replace'](_0x33047e(0x21c),_0x1df7cb['splice'](0x0,this[_0x33047e(0x231)])[_0x33047e(0x1ee)](_0xc31a29=>'\x27'+_0xc31a29+'\x27')[_0x33047e(0x22c)](','))[_0x33047e(0x20f)]('%branchId%',_0x40130c),_0x1e8b11=await this[_0x33047e(0x213)]['query'](_0x35670e);_0x12e43c[_0x33047e(0x20a)](..._0x1e8b11);}return _0x12e43c['map'](_0x3b19f7=>this['extractComponentMetadataFromRecord'](_0x3b19f7));}async[a274_0x2439fd(0x207)](_0x514480){const _0x42126f=a274_0x2439fd,_0x3a6f3e=queries_1[_0x42126f(0x1fd)][_0x42126f(0x20f)](_0x42126f(0x1f6),_0x514480),_0x2c5c47=await this[_0x42126f(0x213)][_0x42126f(0x21e)](_0x3a6f3e);return _0x2c5c47[_0x42126f(0x1ee)](_0x28ce58=>this['extractComponentMetadataFromRecord'](_0x28ce58));}async[a274_0x2439fd(0x200)](_0x2aea8c){const _0x331b07=a274_0x2439fd,_0x320b83=queries_1[_0x331b07(0x22f)][_0x331b07(0x20f)](_0x331b07(0x1f9),_0x2aea8c),_0x4b32f7=await this[_0x331b07(0x213)][_0x331b07(0x21e)](_0x320b83);return _0x4b32f7['map'](_0x340544=>this[_0x331b07(0x218)](_0x340544));}async['fetchCommitManifestsByComponentIds'](_0x3acc24){const _0x4dff80=a274_0x2439fd,_0x323064=[..._0x3acc24],_0x2dd3a7=[];while(_0x323064[_0x4dff80(0x211)]){const _0x4bb140=queries_1[_0x4dff80(0x20c)][_0x4dff80(0x20f)](_0x4dff80(0x1f2),_0x323064[_0x4dff80(0x212)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x4dff80(0x1ee)](_0x2fb3bb=>'\x27'+_0x2fb3bb+'\x27')[_0x4dff80(0x22c)](',')),_0x50aaa6=await this['queryService']['query'](_0x4bb140);_0x2dd3a7[_0x4dff80(0x20a)](..._0x50aaa6[_0x4dff80(0x1ee)](_0x249529=>_0x249529['Id']));}return _0x2dd3a7;}async[a274_0x2439fd(0x226)](_0x3cab13,_0xe00ea6){const _0x640a7f=a274_0x2439fd;return this[_0x640a7f(0x217)][_0x640a7f(0x1ef)](constants_1['FLOSUM_COMMIT'],{[constants_1['FLOSUM_NAMESPACE']+_0x640a7f(0x1f8)]:_0xe00ea6,[constants_1[_0x640a7f(0x20d)]+_0x640a7f(0x22e)]:_0x3cab13[_0x640a7f(0x22b)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x640a7f(0x21b)]:'Completed',[constants_1[_0x640a7f(0x205)]+'Is_From_Agent__c']:!![]});}};function a274_0x183b(_0x5a9061,_0x12e37e){const _0x3ad308=a274_0x4e13();return a274_0x183b=function(_0x13deef,_0x4c3628){_0x13deef=_0x13deef-0x1ee;let _0x4e1390=_0x3ad308[_0x13deef];return _0x4e1390;},a274_0x183b(_0x5a9061,_0x12e37e);}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a274_0x2439fd(0x236)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a274_0x2439fd(0x227)],salesforce_rest_service_1[a274_0x2439fd(0x208)]])],SalesforceGitSyncService),exports[a274_0x2439fd(0x232)]=SalesforceGitSyncService;