function a197_0x21ff(_0x3f1b2c,_0x39bc76){const _0xd6530f=a197_0x2f65();return a197_0x21ff=function(_0x1c389d,_0x3d32f5){_0x1c389d=_0x1c389d-0xba;let _0x2f65f1=_0xd6530f[_0x1c389d];return _0x2f65f1;},a197_0x21ff(_0x3f1b2c,_0x39bc76);}const a197_0x580611=a197_0x21ff;(function(_0x236c0b,_0x1c8956){const _0x467230=a197_0x21ff,_0x3cfdbe=_0x236c0b();while(!![]){try{const _0x974da9=-parseInt(_0x467230(0xfc))/0x1+parseInt(_0x467230(0xba))/0x2+parseInt(_0x467230(0xfb))/0x3+parseInt(_0x467230(0xce))/0x4*(parseInt(_0x467230(0x102))/0x5)+parseInt(_0x467230(0xbd))/0x6*(parseInt(_0x467230(0xc1))/0x7)+parseInt(_0x467230(0xe9))/0x8*(parseInt(_0x467230(0xf0))/0x9)+-parseInt(_0x467230(0xca))/0xa;if(_0x974da9===_0x1c8956)break;else _0x3cfdbe['push'](_0x3cfdbe['shift']());}catch(_0x2e115a){_0x3cfdbe['push'](_0x3cfdbe['shift']());}}}(a197_0x2f65,0x6fbb4));const a197_0x3d32f5=(function(){let _0x2e3ebf=!![];return function(_0x296ff2,_0x414de9){const _0x13edd9=_0x2e3ebf?function(){const _0x366cd1=a197_0x21ff;if(_0x414de9){const _0x1c8082=_0x414de9[_0x366cd1(0xf8)](_0x296ff2,arguments);return _0x414de9=null,_0x1c8082;}}:function(){};return _0x2e3ebf=![],_0x13edd9;};}()),a197_0x1c389d=a197_0x3d32f5(this,function(){const _0x4d2ccb=a197_0x21ff;return a197_0x1c389d[_0x4d2ccb(0xcd)]()[_0x4d2ccb(0xec)](_0x4d2ccb(0xe1))[_0x4d2ccb(0xcd)]()[_0x4d2ccb(0xfd)](a197_0x1c389d)[_0x4d2ccb(0xec)](_0x4d2ccb(0xe1));});a197_0x1c389d();function a197_0x2f65(){const _0x554580=['../../../../constants','Repository__c','Component_Type__c','GET_BRANCH_COMPONENTS_QUERY','(((.+)+)+)+$','map','decorate','NotFoundError','Commit_Name__c','metadata','Name','SalesforceGitSyncService','72088zUcQpQ','length','SalesforceQueryService','search','%branchId%','FLOSUM_COMMIT','Completed','18nqBIpX','../utils/flosum-naming.utils','Service','MAX_QUERY_ARRAY_ITEMS','%name%','FLOSUM_GIT_NAMESPACE','./salesforce-query.service','Version__c','apply','queryService','function','232575hUJOJW','545279tuujzX','constructor','../../../../core/errors/not-found.error','typedi','%componentIds%','splice','70fbNOas','Repository\x20\x22','__metadata','483708cnmVjm','restService','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','1049562JFBRXT','%fileNames%','extractFieldsFromRecord','\x22\x20not\x20found\x20in\x20flosum.','14UchFFw','FLOSUM_NAMESPACE','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','getBranchIdByName','object','defineProperty','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','fetchRepositoryComponentsByFilenames','createCommit','4442720bkwjPR','query','join','toString','217128PQsxpk','File_Name__c','__esModule','getRepositoryIdByName','Status__c','CRC32__c','GET_COMPONENT_RECORD_TYPES_QUERY','extractComponentMetadataFromRecord','getComponentRecordTypes','fetchBranchComponentsByFilenames','GET_REPOSITORY_BY_NAME_QUERY','GET_REPOSITORY_COMPONENTS_QUERY','Component_Name__c','push','replace'];a197_0x2f65=function(){return _0x554580;};return a197_0x2f65();}'use strict';var __decorate=this&&this['__decorate']||function(_0x2368fa,_0x4f55e0,_0x38bf32,_0x1e5947){const _0x1560fd=a197_0x21ff;var _0x4cae4f=arguments[_0x1560fd(0xea)],_0x3cd20e=_0x4cae4f<0x3?_0x4f55e0:_0x1e5947===null?_0x1e5947=Object['getOwnPropertyDescriptor'](_0x4f55e0,_0x38bf32):_0x1e5947,_0x541e61;if(typeof Reflect===_0x1560fd(0xc5)&&typeof Reflect[_0x1560fd(0xe3)]===_0x1560fd(0xfa))_0x3cd20e=Reflect[_0x1560fd(0xe3)](_0x2368fa,_0x4f55e0,_0x38bf32,_0x1e5947);else{for(var _0x359ca6=_0x2368fa[_0x1560fd(0xea)]-0x1;_0x359ca6>=0x0;_0x359ca6--)if(_0x541e61=_0x2368fa[_0x359ca6])_0x3cd20e=(_0x4cae4f<0x3?_0x541e61(_0x3cd20e):_0x4cae4f>0x3?_0x541e61(_0x4f55e0,_0x38bf32,_0x3cd20e):_0x541e61(_0x4f55e0,_0x38bf32))||_0x3cd20e;}return _0x4cae4f>0x3&&_0x3cd20e&&Object[_0x1560fd(0xc6)](_0x4f55e0,_0x38bf32,_0x3cd20e),_0x3cd20e;},__metadata=this&&this[a197_0x580611(0x104)]||function(_0x1b2cb5,_0x406be4){const _0x1da33c=a197_0x580611;if(typeof Reflect===_0x1da33c(0xc5)&&typeof Reflect[_0x1da33c(0xe6)]===_0x1da33c(0xfa))return Reflect[_0x1da33c(0xe6)](_0x1b2cb5,_0x406be4);};Object['defineProperty'](exports,a197_0x580611(0xd0),{'value':!![]}),exports[a197_0x580611(0xe8)]=void 0x0;const not_found_error_1=require(a197_0x580611(0xfe)),typedi_1=require(a197_0x580611(0xff)),constants_1=require(a197_0x580611(0xdd)),queries_1=require('../queries'),flosum_naming_utils_1=require(a197_0x580611(0xf1)),salesforce_query_service_1=require(a197_0x580611(0xf6)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x5a8b9b,_0x3852ce){const _0x97849=a197_0x580611;this['queryService']=_0x5a8b9b,this[_0x97849(0xbb)]=_0x3852ce,this[_0x97849(0xf3)]=0xc8;}['extractComponentMetadataFromRecord'](_0x37de9c){const _0x30bd53=a197_0x580611,_0x3a7b9a=(0x0,flosum_naming_utils_1[_0x30bd53(0xbf)])(_0x37de9c,[_0x30bd53(0xda),_0x30bd53(0xdf),'CRC32__c',_0x30bd53(0xcf),_0x30bd53(0xf7),'Id']);return{'id':_0x3a7b9a['Id'],'name':_0x3a7b9a[_0x30bd53(0xda)],'type':_0x3a7b9a[_0x30bd53(0xdf)],'fileName':_0x3a7b9a[_0x30bd53(0xcf)],'crc32':_0x3a7b9a[_0x30bd53(0xd3)],'version':+_0x3a7b9a[_0x30bd53(0xf7)]};}async[a197_0x580611(0xd1)](_0x380f8e){const _0x2c92c4=a197_0x580611,[_0xa356cc]=await this[_0x2c92c4(0xf9)][_0x2c92c4(0xcb)](queries_1[_0x2c92c4(0xd8)][_0x2c92c4(0xdc)]('%name%',_0x380f8e));if(!_0xa356cc)throw new not_found_error_1[(_0x2c92c4(0xe4))](_0x2c92c4(0x103)+_0x380f8e+'\x22\x20not\x20found\x20in\x20flosum.');return _0xa356cc['Id'];}async[a197_0x580611(0xc4)](_0x2cfed3){const _0x6ecd52=a197_0x580611,[_0xe4719d]=await this[_0x6ecd52(0xf9)]['query'](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x6ecd52(0xdc)](_0x6ecd52(0xf4),_0x2cfed3));if(!_0xe4719d)throw new not_found_error_1[(_0x6ecd52(0xe4))]('Branch\x20\x22'+_0x2cfed3+_0x6ecd52(0xc0));return _0xe4719d['Id'];}async[a197_0x580611(0xd6)](){const _0x1846a0=a197_0x580611,_0x2b3cbe=await this[_0x1846a0(0xf9)]['query'](queries_1[_0x1846a0(0xd4)]);return _0x2b3cbe[_0x1846a0(0xe2)](_0x29dfd3=>(0x0,flosum_naming_utils_1[_0x1846a0(0xbf)])(_0x29dfd3,['Id','Name']))[_0x1846a0(0xe2)](_0x7bdeed=>({'id':_0x7bdeed['Id'],'name':_0x7bdeed[_0x1846a0(0xe7)]}));}async[a197_0x580611(0xc8)](_0x48afcc,_0x3ea418){const _0x23621e=a197_0x580611,_0x25aebb=[];while(_0x48afcc[_0x23621e(0xea)]){const _0x4d3d2a=queries_1[_0x23621e(0xc7)][_0x23621e(0xdc)](_0x23621e(0xbe),_0x48afcc['splice'](0x0,this[_0x23621e(0xf3)])[_0x23621e(0xe2)](_0x11b6e1=>'\x27'+_0x11b6e1+'\x27')[_0x23621e(0xcc)](','))[_0x23621e(0xdc)]('%repositoryId%',_0x3ea418),_0x4f9c43=await this[_0x23621e(0xf9)]['query'](_0x4d3d2a);_0x25aebb[_0x23621e(0xdb)](..._0x4f9c43);}return _0x25aebb[_0x23621e(0xe2)](_0xdbef7e=>this[_0x23621e(0xd5)](_0xdbef7e));}async[a197_0x580611(0xd7)](_0x3a8612,_0x26f902){const _0x59400c=a197_0x580611,_0x2f3a70=[];while(_0x3a8612[_0x59400c(0xea)]){const _0x5528f7=queries_1[_0x59400c(0xbc)][_0x59400c(0xdc)](_0x59400c(0xbe),_0x3a8612[_0x59400c(0x101)](0x0,this[_0x59400c(0xf3)])[_0x59400c(0xe2)](_0xfe13d3=>'\x27'+_0xfe13d3+'\x27')[_0x59400c(0xcc)](','))['replace']('%branchId%',_0x26f902),_0x1e27bb=await this['queryService'][_0x59400c(0xcb)](_0x5528f7);_0x2f3a70[_0x59400c(0xdb)](..._0x1e27bb);}return _0x2f3a70[_0x59400c(0xe2)](_0x1c5b30=>this['extractComponentMetadataFromRecord'](_0x1c5b30));}async['fetchRepositoryComponents'](_0x5daa2f){const _0x4c598c=a197_0x580611,_0x444eba=queries_1[_0x4c598c(0xd9)][_0x4c598c(0xdc)]('%repositoryId%',_0x5daa2f),_0x57ab82=await this['queryService'][_0x4c598c(0xcb)](_0x444eba);return _0x57ab82[_0x4c598c(0xe2)](_0x2de74f=>this[_0x4c598c(0xd5)](_0x2de74f));}async['fetchBranchComponents'](_0x238552){const _0x267615=a197_0x580611,_0x2a0299=queries_1[_0x267615(0xe0)]['replace'](_0x267615(0xed),_0x238552),_0x48e418=await this[_0x267615(0xf9)][_0x267615(0xcb)](_0x2a0299);return _0x48e418[_0x267615(0xe2)](_0x3073c=>this[_0x267615(0xd5)](_0x3073c));}async['fetchCommitManifestsByComponentIds'](_0x486fc2){const _0x19fbe0=a197_0x580611,_0x5545b2=[..._0x486fc2],_0x1787b8=[];while(_0x5545b2[_0x19fbe0(0xea)]){const _0xce81e2=queries_1[_0x19fbe0(0xc3)][_0x19fbe0(0xdc)](_0x19fbe0(0x100),_0x5545b2[_0x19fbe0(0x101)](0x0,this[_0x19fbe0(0xf3)])[_0x19fbe0(0xe2)](_0xc21404=>'\x27'+_0xc21404+'\x27')[_0x19fbe0(0xcc)](',')),_0xf28572=await this[_0x19fbe0(0xf9)][_0x19fbe0(0xcb)](_0xce81e2);_0x1787b8[_0x19fbe0(0xdb)](..._0xf28572[_0x19fbe0(0xe2)](_0x158926=>_0x158926['Id']));}return _0x1787b8;}async[a197_0x580611(0xc9)](_0x343ead,_0xad3992){const _0x3309f0=a197_0x580611;return this[_0x3309f0(0xbb)]['post'](constants_1[_0x3309f0(0xee)],{[constants_1[_0x3309f0(0xc2)]+_0x3309f0(0xde)]:_0xad3992,[constants_1[_0x3309f0(0xc2)]+_0x3309f0(0xe5)]:_0x343ead['substr'](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x3309f0(0xd2)]:_0x3309f0(0xef),[constants_1[_0x3309f0(0xf5)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a197_0x580611(0xf2)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a197_0x580611(0xeb)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a197_0x580611(0xe8)]=SalesforceGitSyncService;