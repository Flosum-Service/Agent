const a246_0xaebbf1=a246_0x35c3;(function(_0x406606,_0xd4d881){const _0x397e92=a246_0x35c3,_0x24eeab=_0x406606();while(!![]){try{const _0x13df2d=-parseInt(_0x397e92(0x1cf))/0x1*(-parseInt(_0x397e92(0x195))/0x2)+-parseInt(_0x397e92(0x1b5))/0x3+-parseInt(_0x397e92(0x1b1))/0x4+-parseInt(_0x397e92(0x1d4))/0x5+-parseInt(_0x397e92(0x1bc))/0x6+-parseInt(_0x397e92(0x1d2))/0x7+-parseInt(_0x397e92(0x1de))/0x8*(-parseInt(_0x397e92(0x1c9))/0x9);if(_0x13df2d===_0xd4d881)break;else _0x24eeab['push'](_0x24eeab['shift']());}catch(_0x15b20d){_0x24eeab['push'](_0x24eeab['shift']());}}}(a246_0x2b57,0xda2e5));function a246_0x35c3(_0x18dfeb,_0x4f9904){const _0x47fe00=a246_0x2b57();return a246_0x35c3=function(_0x41e4dd,_0x5edfd3){_0x41e4dd=_0x41e4dd-0x195;let _0x2b5780=_0x47fe00[_0x41e4dd];return _0x2b5780;},a246_0x35c3(_0x18dfeb,_0x4f9904);}const a246_0x5edfd3=(function(){let _0x12bad1=!![];return function(_0x434fcb,_0x326596){const _0x41d83e=_0x12bad1?function(){if(_0x326596){const _0x555a1f=_0x326596['apply'](_0x434fcb,arguments);return _0x326596=null,_0x555a1f;}}:function(){};return _0x12bad1=![],_0x41d83e;};}()),a246_0x41e4dd=a246_0x5edfd3(this,function(){const _0x30ba08=a246_0x35c3;return a246_0x41e4dd[_0x30ba08(0x1bb)]()[_0x30ba08(0x1c5)](_0x30ba08(0x198))['toString']()[_0x30ba08(0x1d0)](a246_0x41e4dd)[_0x30ba08(0x1c5)](_0x30ba08(0x198));});a246_0x41e4dd();'use strict';var __decorate=this&&this['__decorate']||function(_0x404671,_0x1df6f2,_0xec781c,_0x38de7c){const _0x14b77a=a246_0x35c3;var _0x4e7c3d=arguments[_0x14b77a(0x1d5)],_0x34cf37=_0x4e7c3d<0x3?_0x1df6f2:_0x38de7c===null?_0x38de7c=Object['getOwnPropertyDescriptor'](_0x1df6f2,_0xec781c):_0x38de7c,_0x5efe3e;if(typeof Reflect===_0x14b77a(0x1a8)&&typeof Reflect[_0x14b77a(0x1bd)]===_0x14b77a(0x1cc))_0x34cf37=Reflect['decorate'](_0x404671,_0x1df6f2,_0xec781c,_0x38de7c);else{for(var _0x126228=_0x404671[_0x14b77a(0x1d5)]-0x1;_0x126228>=0x0;_0x126228--)if(_0x5efe3e=_0x404671[_0x126228])_0x34cf37=(_0x4e7c3d<0x3?_0x5efe3e(_0x34cf37):_0x4e7c3d>0x3?_0x5efe3e(_0x1df6f2,_0xec781c,_0x34cf37):_0x5efe3e(_0x1df6f2,_0xec781c))||_0x34cf37;}return _0x4e7c3d>0x3&&_0x34cf37&&Object[_0x14b77a(0x199)](_0x1df6f2,_0xec781c,_0x34cf37),_0x34cf37;},__metadata=this&&this[a246_0xaebbf1(0x1db)]||function(_0x25a6b7,_0x56f8ab){const _0x13b208=a246_0xaebbf1;if(typeof Reflect===_0x13b208(0x1a8)&&typeof Reflect[_0x13b208(0x196)]===_0x13b208(0x1cc))return Reflect[_0x13b208(0x196)](_0x25a6b7,_0x56f8ab);};Object[a246_0xaebbf1(0x199)](exports,'__esModule',{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a246_0xaebbf1(0x1a4)),typedi_1=require(a246_0xaebbf1(0x1e0)),constants_1=require('../../../../constants'),queries_1=require(a246_0xaebbf1(0x19e)),flosum_naming_utils_1=require(a246_0xaebbf1(0x1c6)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x49d590,_0x26f977){const _0x35799d=a246_0xaebbf1;this['queryService']=_0x49d590,this[_0x35799d(0x1c7)]=_0x26f977,this[_0x35799d(0x1b3)]=0xc8;}[a246_0xaebbf1(0x1cb)](_0x231795){const _0x261d02=a246_0xaebbf1,_0x51c10f=(0x0,flosum_naming_utils_1[_0x261d02(0x1a1)])(_0x231795,[_0x261d02(0x1be),'Component_Type__c',_0x261d02(0x1dd),_0x261d02(0x197),'Version__c','Id']);return{'id':_0x51c10f['Id'],'name':_0x51c10f[_0x261d02(0x1be)],'type':_0x51c10f[_0x261d02(0x1c3)],'fileName':_0x51c10f[_0x261d02(0x197)],'crc32':_0x51c10f[_0x261d02(0x1dd)],'version':+_0x51c10f[_0x261d02(0x1df)]};}async[a246_0xaebbf1(0x1a7)](_0x404a8f){const _0x3bbeec=a246_0xaebbf1,[_0xca4cdd]=await this[_0x3bbeec(0x1b4)]['query'](queries_1[_0x3bbeec(0x19d)][_0x3bbeec(0x1b8)](_0x3bbeec(0x1ad),_0x404a8f));if(!_0xca4cdd)throw new not_found_error_1['NotFoundError'](_0x3bbeec(0x1ab)+_0x404a8f+'\x22\x20not\x20found\x20in\x20flosum.');return _0xca4cdd['Id'];}async[a246_0xaebbf1(0x1a3)](_0x5527aa){const _0x8f6fe4=a246_0xaebbf1,[_0x2044e6]=await this[_0x8f6fe4(0x1b4)]['query'](queries_1[_0x8f6fe4(0x1d3)][_0x8f6fe4(0x1b8)](_0x8f6fe4(0x1ad),_0x5527aa));if(!_0x2044e6)throw new not_found_error_1[(_0x8f6fe4(0x1dc))](_0x8f6fe4(0x1b2)+_0x5527aa+_0x8f6fe4(0x19b));return _0x2044e6['Id'];}async[a246_0xaebbf1(0x1c0)](){const _0x5f2595=a246_0xaebbf1,_0x3eb9dc=await this[_0x5f2595(0x1b4)][_0x5f2595(0x1c4)](queries_1[_0x5f2595(0x1c1)]);return _0x3eb9dc['map'](_0x2ad344=>(0x0,flosum_naming_utils_1[_0x5f2595(0x1a1)])(_0x2ad344,['Id',_0x5f2595(0x1c8)]))[_0x5f2595(0x1bf)](_0x12239e=>({'id':_0x12239e['Id'],'name':_0x12239e[_0x5f2595(0x1c8)]}));}async[a246_0xaebbf1(0x1d1)](_0x2cbd25,_0x3abfea){const _0x70fe5a=a246_0xaebbf1,_0x53e14c=[];while(_0x2cbd25['length']){const _0xcd6a7f=queries_1[_0x70fe5a(0x19f)][_0x70fe5a(0x1b8)](_0x70fe5a(0x19a),_0x2cbd25['splice'](0x0,this[_0x70fe5a(0x1b3)])[_0x70fe5a(0x1bf)](_0x2b5c1e=>'\x27'+_0x2b5c1e+'\x27')[_0x70fe5a(0x1aa)](','))[_0x70fe5a(0x1b8)]('%repositoryId%',_0x3abfea),_0x3d7fa9=await this[_0x70fe5a(0x1b4)][_0x70fe5a(0x1c4)](_0xcd6a7f);_0x53e14c[_0x70fe5a(0x1b0)](..._0x3d7fa9);}return _0x53e14c[_0x70fe5a(0x1bf)](_0x278489=>this[_0x70fe5a(0x1cb)](_0x278489));}async['fetchBranchComponentsByFilenames'](_0x4a01ad,_0x191a48){const _0x2e1802=a246_0xaebbf1,_0x5d1ef3=[];while(_0x4a01ad[_0x2e1802(0x1d5)]){const _0x446b73=queries_1[_0x2e1802(0x1ae)]['replace'](_0x2e1802(0x19a),_0x4a01ad[_0x2e1802(0x1b9)](0x0,this[_0x2e1802(0x1b3)])[_0x2e1802(0x1bf)](_0x44da57=>'\x27'+_0x44da57+'\x27')[_0x2e1802(0x1aa)](','))[_0x2e1802(0x1b8)](_0x2e1802(0x1af),_0x191a48),_0x1cded0=await this[_0x2e1802(0x1b4)][_0x2e1802(0x1c4)](_0x446b73);_0x5d1ef3[_0x2e1802(0x1b0)](..._0x1cded0);}return _0x5d1ef3[_0x2e1802(0x1bf)](_0x4c7c2b=>this[_0x2e1802(0x1cb)](_0x4c7c2b));}async[a246_0xaebbf1(0x1a6)](_0x67e899){const _0xa3adc4=a246_0xaebbf1,_0x2c4944=queries_1[_0xa3adc4(0x1d8)][_0xa3adc4(0x1b8)](_0xa3adc4(0x1a5),_0x67e899),_0x1d56e8=await this[_0xa3adc4(0x1b4)]['query'](_0x2c4944);return _0x1d56e8['map'](_0x3a8a04=>this[_0xa3adc4(0x1cb)](_0x3a8a04));}async['fetchBranchComponents'](_0x22a84e){const _0x3dc14a=a246_0xaebbf1,_0x3716b9=queries_1[_0x3dc14a(0x1d6)]['replace'](_0x3dc14a(0x1af),_0x22a84e),_0x245c9b=await this['queryService']['query'](_0x3716b9);return _0x245c9b['map'](_0x48deed=>this[_0x3dc14a(0x1cb)](_0x48deed));}async[a246_0xaebbf1(0x1a9)](_0x3fb9e4){const _0x5394d0=a246_0xaebbf1,_0x50de99=[..._0x3fb9e4],_0x26beeb=[];while(_0x50de99[_0x5394d0(0x1d5)]){const _0x4fc3e0=queries_1[_0x5394d0(0x1d9)][_0x5394d0(0x1b8)]('%componentIds%',_0x50de99['splice'](0x0,this[_0x5394d0(0x1b3)])[_0x5394d0(0x1bf)](_0x136fc1=>'\x27'+_0x136fc1+'\x27')[_0x5394d0(0x1aa)](',')),_0x40f01b=await this[_0x5394d0(0x1b4)][_0x5394d0(0x1c4)](_0x4fc3e0);_0x26beeb[_0x5394d0(0x1b0)](..._0x40f01b[_0x5394d0(0x1bf)](_0x35bf60=>_0x35bf60['Id']));}return _0x26beeb;}async[a246_0xaebbf1(0x1a0)](_0xf2d93e,_0x1e82fc){const _0x58e33f=a246_0xaebbf1;return this[_0x58e33f(0x1c7)][_0x58e33f(0x1da)](constants_1[_0x58e33f(0x19c)],{[constants_1[_0x58e33f(0x1d7)]+'Repository__c']:_0x1e82fc,[constants_1[_0x58e33f(0x1d7)]+'Commit_Name__c']:_0xf2d93e[_0x58e33f(0x1b7)](0x0,0xff),[constants_1[_0x58e33f(0x1d7)]+_0x58e33f(0x1c2)]:_0x58e33f(0x1ce),[constants_1['FLOSUM_GIT_NAMESPACE']+_0x58e33f(0x1ca)]:!![]});}};function a246_0x2b57(){const _0x4fa054=['FLOSUM_NAMESPACE','GET_REPOSITORY_COMPONENTS_QUERY','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','post','__metadata','NotFoundError','CRC32__c','16HGfmQK','Version__c','typedi','9298XPMMqY','metadata','File_Name__c','(((.+)+)+)+$','defineProperty','%fileNames%','\x22\x20not\x20found\x20in\x20flosum.','FLOSUM_COMMIT','GET_REPOSITORY_BY_NAME_QUERY','../queries','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','createCommit','extractFieldsFromRecord','design:paramtypes','getBranchIdByName','../../../../core/errors/not-found.error','%repositoryId%','fetchRepositoryComponents','getRepositoryIdByName','object','fetchCommitManifestsByComponentIds','join','Repository\x20\x22','SalesforceGitSyncService','%name%','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','%branchId%','push','5939276eGGBmp','Branch\x20\x22','MAX_QUERY_ARRAY_ITEMS','queryService','3679380ZTFlbv','SalesforceRestService','substr','replace','splice','SalesforceQueryService','toString','4782138IOkKCc','decorate','Component_Name__c','map','getComponentRecordTypes','GET_COMPONENT_RECORD_TYPES_QUERY','Status__c','Component_Type__c','query','search','../utils/flosum-naming.utils','restService','Name','18673119iLlOBU','Is_From_Agent__c','extractComponentMetadataFromRecord','function','Service','Completed','379cQQQBk','constructor','fetchRepositoryComponentsByFilenames','9471637LCGgud','GET_BRANCH_BY_NAME_QUERY','782455ncMhQj','length','GET_BRANCH_COMPONENTS_QUERY'];a246_0x2b57=function(){return _0x4fa054;};return a246_0x2b57();}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a246_0xaebbf1(0x1cd)])(),__metadata(a246_0xaebbf1(0x1a2),[salesforce_query_service_1[a246_0xaebbf1(0x1ba)],salesforce_rest_service_1[a246_0xaebbf1(0x1b6)]])],SalesforceGitSyncService),exports[a246_0xaebbf1(0x1ac)]=SalesforceGitSyncService;