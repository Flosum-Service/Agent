const a179_0x5bf68c=a179_0x5e9c;(function(_0x4ae526,_0x46399b){const _0x2dfb1d=a179_0x5e9c,_0x373d90=_0x4ae526();while(!![]){try{const _0x775908=-parseInt(_0x2dfb1d(0xce))/0x1*(parseInt(_0x2dfb1d(0x118))/0x2)+parseInt(_0x2dfb1d(0xf3))/0x3*(parseInt(_0x2dfb1d(0xfc))/0x4)+-parseInt(_0x2dfb1d(0xde))/0x5+-parseInt(_0x2dfb1d(0xf7))/0x6+-parseInt(_0x2dfb1d(0xda))/0x7*(-parseInt(_0x2dfb1d(0xdc))/0x8)+-parseInt(_0x2dfb1d(0x116))/0x9*(-parseInt(_0x2dfb1d(0xe1))/0xa)+parseInt(_0x2dfb1d(0xd8))/0xb*(parseInt(_0x2dfb1d(0x110))/0xc);if(_0x775908===_0x46399b)break;else _0x373d90['push'](_0x373d90['shift']());}catch(_0x1672b){_0x373d90['push'](_0x373d90['shift']());}}}(a179_0x48b6,0xa8bc4));function a179_0x48b6(){const _0x2484e4=['__decorate','8elVaAA','toString','6023870mPrtca','splice','Commit_Name__c','380xjXJnt','SalesforceQueryService','extractFieldsFromRecord','queryService','Completed','GET_BRANCH_COMPONENTS_QUERY','metadata','Component_Type__c','getOwnPropertyDescriptor','MAX_QUERY_ARRAY_ITEMS','../../../../core/errors/not-found.error','(((.+)+)+)+$','Component_Name__c','join','query','FLOSUM_NAMESPACE','Version__c','Repository\x20\x22','21KmEReT','fetchBranchComponents','SalesforceRestService','GET_REPOSITORY_COMPONENTS_QUERY','3996750lNvBQU','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','../../../../constants','function','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','472240IHRdRs','typedi','GET_REPOSITORY_BY_NAME_QUERY','push','%branchId%','fetchRepositoryComponentsByFilenames','FLOSUM_COMMIT','SalesforceGitSyncService','map','../queries','apply','%componentIds%','Name','decorate','restService','%repositoryId%','getComponentRecordTypes','%fileNames%','File_Name__c','\x22\x20not\x20found\x20in\x20flosum.','12MsTRtg','getRepositoryIdByName','replace','NotFoundError','extractComponentMetadataFromRecord','__esModule','11763YMPNFC','defineProperty','14554gGctsd','constructor','59kDaOYI','__metadata','Status__c','post','Repository__c','search','object','./salesforce-rest.service','CRC32__c','length','17027142VpAGKm','design:paramtypes','3971618UAkqqI'];a179_0x48b6=function(){return _0x2484e4;};return a179_0x48b6();}const a179_0x32032a=(function(){let _0x577cb2=!![];return function(_0x3b0d4c,_0x4f1f88){const _0x28bc18=_0x577cb2?function(){const _0x1fee69=a179_0x5e9c;if(_0x4f1f88){const _0x4e3939=_0x4f1f88[_0x1fee69(0x106)](_0x3b0d4c,arguments);return _0x4f1f88=null,_0x4e3939;}}:function(){};return _0x577cb2=![],_0x28bc18;};}()),a179_0x4f211c=a179_0x32032a(this,function(){const _0x3c7fee=a179_0x5e9c;return a179_0x4f211c[_0x3c7fee(0xdd)]()[_0x3c7fee(0xd3)]('(((.+)+)+)+$')[_0x3c7fee(0xdd)]()[_0x3c7fee(0x119)](a179_0x4f211c)[_0x3c7fee(0xd3)](_0x3c7fee(0xec));});function a179_0x5e9c(_0x133090,_0x205a64){const _0x5a910a=a179_0x48b6();return a179_0x5e9c=function(_0x4f211c,_0x32032a){_0x4f211c=_0x4f211c-0xce;let _0x48b66a=_0x5a910a[_0x4f211c];return _0x48b66a;},a179_0x5e9c(_0x133090,_0x205a64);}a179_0x4f211c();'use strict';var __decorate=this&&this[a179_0x5bf68c(0xdb)]||function(_0x1ec5d9,_0xb04ef6,_0x39cca4,_0x1633bf){const _0x4289d9=a179_0x5bf68c;var _0x57c873=arguments[_0x4289d9(0xd7)],_0x1ff245=_0x57c873<0x3?_0xb04ef6:_0x1633bf===null?_0x1633bf=Object[_0x4289d9(0xe9)](_0xb04ef6,_0x39cca4):_0x1633bf,_0x357a1a;if(typeof Reflect===_0x4289d9(0xd4)&&typeof Reflect[_0x4289d9(0x109)]===_0x4289d9(0xfa))_0x1ff245=Reflect[_0x4289d9(0x109)](_0x1ec5d9,_0xb04ef6,_0x39cca4,_0x1633bf);else{for(var _0x1d3867=_0x1ec5d9['length']-0x1;_0x1d3867>=0x0;_0x1d3867--)if(_0x357a1a=_0x1ec5d9[_0x1d3867])_0x1ff245=(_0x57c873<0x3?_0x357a1a(_0x1ff245):_0x57c873>0x3?_0x357a1a(_0xb04ef6,_0x39cca4,_0x1ff245):_0x357a1a(_0xb04ef6,_0x39cca4))||_0x1ff245;}return _0x57c873>0x3&&_0x1ff245&&Object[_0x4289d9(0x117)](_0xb04ef6,_0x39cca4,_0x1ff245),_0x1ff245;},__metadata=this&&this[a179_0x5bf68c(0xcf)]||function(_0x14fb1a,_0x22e354){const _0xbf8f3f=a179_0x5bf68c;if(typeof Reflect==='object'&&typeof Reflect[_0xbf8f3f(0xe7)]===_0xbf8f3f(0xfa))return Reflect[_0xbf8f3f(0xe7)](_0x14fb1a,_0x22e354);};Object[a179_0x5bf68c(0x117)](exports,a179_0x5bf68c(0x115),{'value':!![]}),exports[a179_0x5bf68c(0x103)]=void 0x0;const not_found_error_1=require(a179_0x5bf68c(0xeb)),typedi_1=require(a179_0x5bf68c(0xfd)),constants_1=require(a179_0x5bf68c(0xf9)),queries_1=require(a179_0x5bf68c(0x105)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a179_0x5bf68c(0xd5));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x32c238,_0x478237){const _0x3bab5e=a179_0x5bf68c;this[_0x3bab5e(0xe4)]=_0x32c238,this[_0x3bab5e(0x10a)]=_0x478237,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}['extractComponentMetadataFromRecord'](_0x5163f2){const _0x862977=a179_0x5bf68c,_0x2abddb=flosum_naming_utils_1[_0x862977(0xe3)](_0x5163f2,['Component_Name__c',_0x862977(0xe8),_0x862977(0xd6),_0x862977(0x10e),_0x862977(0xf1),'Id']);return{'id':_0x2abddb['Id'],'name':_0x2abddb[_0x862977(0xed)],'type':_0x2abddb[_0x862977(0xe8)],'fileName':_0x2abddb[_0x862977(0x10e)],'crc32':_0x2abddb[_0x862977(0xd6)],'version':+_0x2abddb['Version__c']};}async[a179_0x5bf68c(0x111)](_0x2b3b33){const _0x9e6e15=a179_0x5bf68c,[_0x3a8403]=await this[_0x9e6e15(0xe4)][_0x9e6e15(0xef)](queries_1[_0x9e6e15(0xfe)]['replace']('%name%',_0x2b3b33));if(!_0x3a8403)throw new not_found_error_1[(_0x9e6e15(0x113))](_0x9e6e15(0xf2)+_0x2b3b33+_0x9e6e15(0x10f));return _0x3a8403['Id'];}async['getBranchIdByName'](_0xae0f70){const _0x1de1dd=a179_0x5bf68c,[_0xc98712]=await this[_0x1de1dd(0xe4)][_0x1de1dd(0xef)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x1de1dd(0x112)]('%name%',_0xae0f70));if(!_0xc98712)throw new not_found_error_1[(_0x1de1dd(0x113))]('Branch\x20\x22'+_0xae0f70+'\x22\x20not\x20found\x20in\x20flosum.');return _0xc98712['Id'];}async[a179_0x5bf68c(0x10c)](){const _0x4d98fa=a179_0x5bf68c,_0x20c299=await this[_0x4d98fa(0xe4)][_0x4d98fa(0xef)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x20c299[_0x4d98fa(0x104)](_0x51d12e=>flosum_naming_utils_1[_0x4d98fa(0xe3)](_0x51d12e,['Id',_0x4d98fa(0x108)]))[_0x4d98fa(0x104)](_0x3d1a7a=>({'id':_0x3d1a7a['Id'],'name':_0x3d1a7a['Name']}));}async[a179_0x5bf68c(0x101)](_0x419779,_0x271793){const _0x5d6a79=a179_0x5bf68c,_0x3737b3=[];while(_0x419779['length']){const _0x57f388=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x5d6a79(0x112)](_0x5d6a79(0x10d),_0x419779[_0x5d6a79(0xdf)](0x0,this[_0x5d6a79(0xea)])[_0x5d6a79(0x104)](_0x2da53f=>'\x27'+_0x2da53f+'\x27')[_0x5d6a79(0xee)](','))[_0x5d6a79(0x112)](_0x5d6a79(0x10b),_0x271793),_0x377b50=await this['queryService']['query'](_0x57f388);_0x3737b3[_0x5d6a79(0xff)](..._0x377b50);}return _0x3737b3[_0x5d6a79(0x104)](_0xddae05=>this[_0x5d6a79(0x114)](_0xddae05));}async['fetchBranchComponentsByFilenames'](_0x12def4,_0x1f9d7d){const _0x7b849c=a179_0x5bf68c,_0x9b81af=[];while(_0x12def4[_0x7b849c(0xd7)]){const _0x3806dd=queries_1[_0x7b849c(0xf8)][_0x7b849c(0x112)](_0x7b849c(0x10d),_0x12def4['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x7b849c(0x104)](_0x56c9ad=>'\x27'+_0x56c9ad+'\x27')[_0x7b849c(0xee)](','))['replace']('%branchId%',_0x1f9d7d),_0xe1c81e=await this[_0x7b849c(0xe4)][_0x7b849c(0xef)](_0x3806dd);_0x9b81af[_0x7b849c(0xff)](..._0xe1c81e);}return _0x9b81af[_0x7b849c(0x104)](_0x27111f=>this[_0x7b849c(0x114)](_0x27111f));}async['fetchRepositoryComponents'](_0xd219cf){const _0x2ac758=a179_0x5bf68c,_0x4a5889=queries_1[_0x2ac758(0xf6)][_0x2ac758(0x112)](_0x2ac758(0x10b),_0xd219cf),_0x12f190=await this[_0x2ac758(0xe4)][_0x2ac758(0xef)](_0x4a5889);return _0x12f190['map'](_0x64188d=>this[_0x2ac758(0x114)](_0x64188d));}async[a179_0x5bf68c(0xf4)](_0x1287f1){const _0xcb642d=a179_0x5bf68c,_0x2e2c27=queries_1[_0xcb642d(0xe6)][_0xcb642d(0x112)](_0xcb642d(0x100),_0x1287f1),_0x4acdf0=await this['queryService'][_0xcb642d(0xef)](_0x2e2c27);return _0x4acdf0[_0xcb642d(0x104)](_0x105da8=>this[_0xcb642d(0x114)](_0x105da8));}async['fetchCommitManifestsByComponentIds'](_0x24ad07){const _0x3a166e=a179_0x5bf68c,_0x99dc31=[..._0x24ad07],_0x5df5e5=[];while(_0x99dc31[_0x3a166e(0xd7)]){const _0x272113=queries_1[_0x3a166e(0xfb)][_0x3a166e(0x112)](_0x3a166e(0x107),_0x99dc31[_0x3a166e(0xdf)](0x0,this[_0x3a166e(0xea)])['map'](_0x17e69b=>'\x27'+_0x17e69b+'\x27')[_0x3a166e(0xee)](',')),_0x1fe933=await this[_0x3a166e(0xe4)]['query'](_0x272113);_0x5df5e5[_0x3a166e(0xff)](..._0x1fe933[_0x3a166e(0x104)](_0x550bdd=>_0x550bdd['Id']));}return _0x5df5e5;}async['createCommit'](_0x275c07,_0x1474fc){const _0x544272=a179_0x5bf68c;return this[_0x544272(0x10a)][_0x544272(0xd1)](constants_1[_0x544272(0x102)],{[constants_1[_0x544272(0xf0)]+_0x544272(0xd2)]:_0x1474fc,[constants_1[_0x544272(0xf0)]+_0x544272(0xe0)]:_0x275c07['substr'](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x544272(0xd0)]:_0x544272(0xe5),[constants_1['FLOSUM_GIT_NAMESPACE']+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([typedi_1['Service'](),__metadata(a179_0x5bf68c(0xd9),[salesforce_query_service_1[a179_0x5bf68c(0xe2)],salesforce_rest_service_1[a179_0x5bf68c(0xf5)]])],SalesforceGitSyncService),exports[a179_0x5bf68c(0x103)]=SalesforceGitSyncService;