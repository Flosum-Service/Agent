const a231_0x340e20=a231_0x282b;(function(_0x23a6cd,_0x5738fc){const _0x4715b8=a231_0x282b,_0x26a501=_0x23a6cd();while(!![]){try{const _0x24706a=-parseInt(_0x4715b8(0x1cd))/0x1+parseInt(_0x4715b8(0x1e1))/0x2+parseInt(_0x4715b8(0x1a6))/0x3+-parseInt(_0x4715b8(0x1ac))/0x4*(parseInt(_0x4715b8(0x1ee))/0x5)+parseInt(_0x4715b8(0x1b3))/0x6+-parseInt(_0x4715b8(0x1e4))/0x7+-parseInt(_0x4715b8(0x1b5))/0x8;if(_0x24706a===_0x5738fc)break;else _0x26a501['push'](_0x26a501['shift']());}catch(_0x4d7639){_0x26a501['push'](_0x26a501['shift']());}}}(a231_0x2c33,0x2218f));const a231_0x3cf8ef=(function(){let _0x4c4984=!![];return function(_0x26f2a9,_0x151fc4){const _0x5581ae=_0x4c4984?function(){const _0x4e74d3=a231_0x282b;if(_0x151fc4){const _0x200a4c=_0x151fc4[_0x4e74d3(0x1b8)](_0x26f2a9,arguments);return _0x151fc4=null,_0x200a4c;}}:function(){};return _0x4c4984=![],_0x5581ae;};}()),a231_0xc058c1=a231_0x3cf8ef(this,function(){const _0x258eb3=a231_0x282b;return a231_0xc058c1[_0x258eb3(0x1b6)]()['search']('(((.+)+)+)+$')[_0x258eb3(0x1b6)]()[_0x258eb3(0x1cf)](a231_0xc058c1)[_0x258eb3(0x1ab)]('(((.+)+)+)+$');});a231_0xc058c1();'use strict';var __decorate=this&&this['__decorate']||function(_0x30b3d1,_0x4a24cc,_0x4e2b84,_0x3ab6f5){const _0x5434b0=a231_0x282b;var _0x57b01c=arguments[_0x5434b0(0x1db)],_0x3410a3=_0x57b01c<0x3?_0x4a24cc:_0x3ab6f5===null?_0x3ab6f5=Object[_0x5434b0(0x1ce)](_0x4a24cc,_0x4e2b84):_0x3ab6f5,_0x709db8;if(typeof Reflect===_0x5434b0(0x1c9)&&typeof Reflect[_0x5434b0(0x1ba)]===_0x5434b0(0x1c4))_0x3410a3=Reflect[_0x5434b0(0x1ba)](_0x30b3d1,_0x4a24cc,_0x4e2b84,_0x3ab6f5);else{for(var _0x244950=_0x30b3d1['length']-0x1;_0x244950>=0x0;_0x244950--)if(_0x709db8=_0x30b3d1[_0x244950])_0x3410a3=(_0x57b01c<0x3?_0x709db8(_0x3410a3):_0x57b01c>0x3?_0x709db8(_0x4a24cc,_0x4e2b84,_0x3410a3):_0x709db8(_0x4a24cc,_0x4e2b84))||_0x3410a3;}return _0x57b01c>0x3&&_0x3410a3&&Object[_0x5434b0(0x1ad)](_0x4a24cc,_0x4e2b84,_0x3410a3),_0x3410a3;},__metadata=this&&this[a231_0x340e20(0x1e8)]||function(_0x2b12ce,_0x533f9e){const _0x2f46b5=a231_0x340e20;if(typeof Reflect===_0x2f46b5(0x1c9)&&typeof Reflect[_0x2f46b5(0x1c8)]==='function')return Reflect[_0x2f46b5(0x1c8)](_0x2b12ce,_0x533f9e);};Object[a231_0x340e20(0x1ad)](exports,'__esModule',{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a231_0x340e20(0x1b4)),typedi_1=require('typedi'),constants_1=require(a231_0x340e20(0x1bf)),queries_1=require('../queries'),flosum_naming_utils_1=require(a231_0x340e20(0x1b9)),salesforce_query_service_1=require(a231_0x340e20(0x1ec)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x2d59fb,_0x366431){const _0x756595=a231_0x340e20;this['queryService']=_0x2d59fb,this[_0x756595(0x1dd)]=_0x366431,this[_0x756595(0x1a8)]=0xc8;}['extractComponentMetadataFromRecord'](_0x32eb06){const _0x2a6187=a231_0x340e20,_0x372d76=(0x0,flosum_naming_utils_1[_0x2a6187(0x1cc)])(_0x32eb06,[_0x2a6187(0x1ea),_0x2a6187(0x1af),'CRC32__c',_0x2a6187(0x1aa),'Version__c','Id']);return{'id':_0x372d76['Id'],'name':_0x372d76[_0x2a6187(0x1ea)],'type':_0x372d76[_0x2a6187(0x1af)],'fileName':_0x372d76['File_Name__c'],'crc32':_0x372d76[_0x2a6187(0x1df)],'version':+_0x372d76[_0x2a6187(0x1be)]};}async[a231_0x340e20(0x1d4)](_0x43cb0e){const _0x586126=a231_0x340e20,[_0x408324]=await this[_0x586126(0x1c1)][_0x586126(0x1ae)](queries_1[_0x586126(0x1a9)][_0x586126(0x1d7)](_0x586126(0x1b0),_0x43cb0e));if(!_0x408324)throw new not_found_error_1[(_0x586126(0x1d3))](_0x586126(0x1eb)+_0x43cb0e+_0x586126(0x1d9));return _0x408324['Id'];}async[a231_0x340e20(0x1e3)](_0x257841){const _0x2ae504=a231_0x340e20,[_0x1018bc]=await this[_0x2ae504(0x1c1)][_0x2ae504(0x1ae)](queries_1[_0x2ae504(0x1d8)][_0x2ae504(0x1d7)](_0x2ae504(0x1b0),_0x257841));if(!_0x1018bc)throw new not_found_error_1[(_0x2ae504(0x1d3))](_0x2ae504(0x1e6)+_0x257841+_0x2ae504(0x1d9));return _0x1018bc['Id'];}async[a231_0x340e20(0x1e0)](){const _0x1e398f=a231_0x340e20,_0x305d20=await this[_0x1e398f(0x1c1)][_0x1e398f(0x1ae)](queries_1[_0x1e398f(0x1d5)]);return _0x305d20[_0x1e398f(0x1e5)](_0x4bf1a9=>(0x0,flosum_naming_utils_1[_0x1e398f(0x1cc)])(_0x4bf1a9,['Id','Name']))[_0x1e398f(0x1e5)](_0x4bc664=>({'id':_0x4bc664['Id'],'name':_0x4bc664['Name']}));}async['fetchRepositoryComponentsByFilenames'](_0x327f0e,_0x4e3a3a){const _0x18e457=a231_0x340e20,_0x3578cf=[];while(_0x327f0e[_0x18e457(0x1db)]){const _0x27a3c6=queries_1[_0x18e457(0x1de)][_0x18e457(0x1d7)](_0x18e457(0x1c5),_0x327f0e[_0x18e457(0x1da)](0x0,this[_0x18e457(0x1a8)])[_0x18e457(0x1e5)](_0x3e7d9b=>'\x27'+_0x3e7d9b+'\x27')[_0x18e457(0x1d0)](','))[_0x18e457(0x1d7)](_0x18e457(0x1b2),_0x4e3a3a),_0x13a2de=await this['queryService']['query'](_0x27a3c6);_0x3578cf[_0x18e457(0x1d2)](..._0x13a2de);}return _0x3578cf['map'](_0x25d04b=>this[_0x18e457(0x1dc)](_0x25d04b));}async[a231_0x340e20(0x1ed)](_0x295551,_0xf1790a){const _0x57b7ae=a231_0x340e20,_0x12e6dd=[];while(_0x295551['length']){const _0x3582a2=queries_1[_0x57b7ae(0x1bc)][_0x57b7ae(0x1d7)]('%fileNames%',_0x295551[_0x57b7ae(0x1da)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x57b7ae(0x1e5)](_0x114c2d=>'\x27'+_0x114c2d+'\x27')[_0x57b7ae(0x1d0)](','))[_0x57b7ae(0x1d7)](_0x57b7ae(0x1c0),_0xf1790a),_0x4a57c6=await this[_0x57b7ae(0x1c1)][_0x57b7ae(0x1ae)](_0x3582a2);_0x12e6dd[_0x57b7ae(0x1d2)](..._0x4a57c6);}return _0x12e6dd[_0x57b7ae(0x1e5)](_0x11aac4=>this['extractComponentMetadataFromRecord'](_0x11aac4));}async[a231_0x340e20(0x1ef)](_0x2b0abf){const _0x26e1e2=a231_0x340e20,_0x409717=queries_1[_0x26e1e2(0x1a7)]['replace'](_0x26e1e2(0x1b2),_0x2b0abf),_0x3d6baa=await this[_0x26e1e2(0x1c1)][_0x26e1e2(0x1ae)](_0x409717);return _0x3d6baa[_0x26e1e2(0x1e5)](_0x36e158=>this[_0x26e1e2(0x1dc)](_0x36e158));}async[a231_0x340e20(0x1e7)](_0x2434b2){const _0x3e2f86=a231_0x340e20,_0xbed13f=queries_1[_0x3e2f86(0x1c7)][_0x3e2f86(0x1d7)](_0x3e2f86(0x1c0),_0x2434b2),_0x44c6dc=await this[_0x3e2f86(0x1c1)][_0x3e2f86(0x1ae)](_0xbed13f);return _0x44c6dc['map'](_0x2192f8=>this[_0x3e2f86(0x1dc)](_0x2192f8));}async[a231_0x340e20(0x1d6)](_0x1331da){const _0x1540e9=a231_0x340e20,_0x13c377=[..._0x1331da],_0x5b7fa1=[];while(_0x13c377[_0x1540e9(0x1db)]){const _0x578b7f=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x1540e9(0x1d7)]('%componentIds%',_0x13c377[_0x1540e9(0x1da)](0x0,this[_0x1540e9(0x1a8)])['map'](_0x4c6332=>'\x27'+_0x4c6332+'\x27')[_0x1540e9(0x1d0)](',')),_0x2d2af2=await this[_0x1540e9(0x1c1)][_0x1540e9(0x1ae)](_0x578b7f);_0x5b7fa1[_0x1540e9(0x1d2)](..._0x2d2af2[_0x1540e9(0x1e5)](_0x5677a7=>_0x5677a7['Id']));}return _0x5b7fa1;}async[a231_0x340e20(0x1b7)](_0x1c0b8c,_0x591156){const _0x1ca7f8=a231_0x340e20;return this['restService']['post'](constants_1[_0x1ca7f8(0x1bd)],{[constants_1[_0x1ca7f8(0x1bb)]+_0x1ca7f8(0x1e2)]:_0x591156,[constants_1['FLOSUM_NAMESPACE']+_0x1ca7f8(0x1c2)]:_0x1c0b8c['substr'](0x0,0xff),[constants_1[_0x1ca7f8(0x1bb)]+_0x1ca7f8(0x1c3)]:'Completed',[constants_1[_0x1ca7f8(0x1e9)]+_0x1ca7f8(0x1c6)]:!![]});}};function a231_0x2c33(){const _0x42ed0e=['../../../../core/errors/not-found.error','568784zZzWUa','toString','createCommit','apply','../utils/flosum-naming.utils','decorate','FLOSUM_NAMESPACE','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','FLOSUM_COMMIT','Version__c','../../../../constants','%branchId%','queryService','Commit_Name__c','Status__c','function','%fileNames%','Is_From_Agent__c','GET_BRANCH_COMPONENTS_QUERY','metadata','object','design:paramtypes','Service','extractFieldsFromRecord','76044bKjcVH','getOwnPropertyDescriptor','constructor','join','SalesforceQueryService','push','NotFoundError','getRepositoryIdByName','GET_COMPONENT_RECORD_TYPES_QUERY','fetchCommitManifestsByComponentIds','replace','GET_BRANCH_BY_NAME_QUERY','\x22\x20not\x20found\x20in\x20flosum.','splice','length','extractComponentMetadataFromRecord','restService','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','CRC32__c','getComponentRecordTypes','258990FPoGzR','Repository__c','getBranchIdByName','421652otlqBw','map','Branch\x20\x22','fetchBranchComponents','__metadata','FLOSUM_GIT_NAMESPACE','Component_Name__c','Repository\x20\x22','./salesforce-query.service','fetchBranchComponentsByFilenames','130LNUKlG','fetchRepositoryComponents','708336uzEgoV','GET_REPOSITORY_COMPONENTS_QUERY','MAX_QUERY_ARRAY_ITEMS','GET_REPOSITORY_BY_NAME_QUERY','File_Name__c','search','24700mlSeRA','defineProperty','query','Component_Type__c','%name%','SalesforceRestService','%repositoryId%','851904zfOOmW'];a231_0x2c33=function(){return _0x42ed0e;};return a231_0x2c33();}function a231_0x282b(_0x1872b5,_0x4476c4){const _0x66fd96=a231_0x2c33();return a231_0x282b=function(_0xc058c1,_0x3cf8ef){_0xc058c1=_0xc058c1-0x1a6;let _0x2c3354=_0x66fd96[_0xc058c1];return _0x2c3354;},a231_0x282b(_0x1872b5,_0x4476c4);}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a231_0x340e20(0x1cb)])(),__metadata(a231_0x340e20(0x1ca),[salesforce_query_service_1[a231_0x340e20(0x1d1)],salesforce_rest_service_1[a231_0x340e20(0x1b1)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;