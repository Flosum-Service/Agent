const a273_0x36e99a=a273_0x3d76;(function(_0x28e1f8,_0x5ee6c3){const _0x1c12cc=a273_0x3d76,_0xe6b189=_0x28e1f8();while(!![]){try{const _0xc8e03b=parseInt(_0x1c12cc(0xc6))/0x1*(-parseInt(_0x1c12cc(0xba))/0x2)+-parseInt(_0x1c12cc(0xbd))/0x3*(-parseInt(_0x1c12cc(0xc8))/0x4)+parseInt(_0x1c12cc(0xab))/0x5*(parseInt(_0x1c12cc(0xcd))/0x6)+-parseInt(_0x1c12cc(0xf5))/0x7*(-parseInt(_0x1c12cc(0xb8))/0x8)+parseInt(_0x1c12cc(0xd1))/0x9+parseInt(_0x1c12cc(0xe5))/0xa*(-parseInt(_0x1c12cc(0xbf))/0xb)+parseInt(_0x1c12cc(0xf4))/0xc*(-parseInt(_0x1c12cc(0xd0))/0xd);if(_0xc8e03b===_0x5ee6c3)break;else _0xe6b189['push'](_0xe6b189['shift']());}catch(_0x132b67){_0xe6b189['push'](_0xe6b189['shift']());}}}(a273_0x5f12,0x5ae3e));function a273_0x5f12(){const _0x1302c9=['../../../../constants','push','typedi','488LhZpAV','../../../../core/errors/not-found.error','88npgsDu','GET_COMPONENT_RECORD_TYPES_QUERY','restService','327363tKfruh','map','3971tpGGCT','toString','splice','CRC32__c','Component_Name__c','design:paramtypes','SalesforceQueryService','16106ygHUAj','apply','12UwQcCz','replace','fetchBranchComponents','%name%','Branch\x20\x22','6slOfXq','(((.+)+)+)+$','defineProperty','26iNqLlE','5939379QnTMYe','File_Name__c','FLOSUM_COMMIT','search','object','Version__c','createCommit','%fileNames%','queryService','extractComponentMetadataFromRecord','post','__esModule','query','fetchRepositoryComponentsByFilenames','\x22\x20not\x20found\x20in\x20flosum.','./salesforce-query.service','FLOSUM_GIT_NAMESPACE','Status__c','Completed','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','2370RTrXCq','getBranchIdByName','decorate','join','SalesforceGitSyncService','extractFieldsFromRecord','%branchId%','MAX_QUERY_ARRAY_ITEMS','%componentIds%','GET_REPOSITORY_COMPONENTS_QUERY','metadata','NotFoundError','function','Is_From_Agent__c','substr','1772028fTplpZ','44429ZiNnxC','436920pKuWYI','../queries','FLOSUM_NAMESPACE','constructor','GET_REPOSITORY_BY_NAME_QUERY','%repositoryId%','Repository__c','length','Component_Type__c','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'];a273_0x5f12=function(){return _0x1302c9;};return a273_0x5f12();}function a273_0x3d76(_0x4dfb09,_0x13a6b5){const _0x6c260f=a273_0x5f12();return a273_0x3d76=function(_0x11e7c7,_0x21426b){_0x11e7c7=_0x11e7c7-0xab;let _0x5f12ef=_0x6c260f[_0x11e7c7];return _0x5f12ef;},a273_0x3d76(_0x4dfb09,_0x13a6b5);}const a273_0x21426b=(function(){let _0x5106f0=!![];return function(_0x241116,_0x4ca593){const _0x4341a2=_0x5106f0?function(){const _0x1e75e5=a273_0x3d76;if(_0x4ca593){const _0x10fb39=_0x4ca593[_0x1e75e5(0xc7)](_0x241116,arguments);return _0x4ca593=null,_0x10fb39;}}:function(){};return _0x5106f0=![],_0x4341a2;};}()),a273_0x11e7c7=a273_0x21426b(this,function(){const _0x47e466=a273_0x3d76;return a273_0x11e7c7[_0x47e466(0xc0)]()['search'](_0x47e466(0xce))[_0x47e466(0xc0)]()[_0x47e466(0xae)](a273_0x11e7c7)[_0x47e466(0xd4)]('(((.+)+)+)+$');});a273_0x11e7c7();'use strict';var __decorate=this&&this['__decorate']||function(_0x90de7f,_0x1afe9a,_0x497ab1,_0x4861b2){const _0x5a7cbf=a273_0x3d76;var _0xc2d054=arguments[_0x5a7cbf(0xb2)],_0x471fee=_0xc2d054<0x3?_0x1afe9a:_0x4861b2===null?_0x4861b2=Object['getOwnPropertyDescriptor'](_0x1afe9a,_0x497ab1):_0x4861b2,_0x453fd2;if(typeof Reflect===_0x5a7cbf(0xd5)&&typeof Reflect[_0x5a7cbf(0xe7)]===_0x5a7cbf(0xf1))_0x471fee=Reflect[_0x5a7cbf(0xe7)](_0x90de7f,_0x1afe9a,_0x497ab1,_0x4861b2);else{for(var _0x229a1a=_0x90de7f[_0x5a7cbf(0xb2)]-0x1;_0x229a1a>=0x0;_0x229a1a--)if(_0x453fd2=_0x90de7f[_0x229a1a])_0x471fee=(_0xc2d054<0x3?_0x453fd2(_0x471fee):_0xc2d054>0x3?_0x453fd2(_0x1afe9a,_0x497ab1,_0x471fee):_0x453fd2(_0x1afe9a,_0x497ab1))||_0x471fee;}return _0xc2d054>0x3&&_0x471fee&&Object[_0x5a7cbf(0xcf)](_0x1afe9a,_0x497ab1,_0x471fee),_0x471fee;},__metadata=this&&this['__metadata']||function(_0x15fa03,_0x112484){const _0xc0292e=a273_0x3d76;if(typeof Reflect===_0xc0292e(0xd5)&&typeof Reflect[_0xc0292e(0xef)]===_0xc0292e(0xf1))return Reflect[_0xc0292e(0xef)](_0x15fa03,_0x112484);};Object[a273_0x36e99a(0xcf)](exports,a273_0x36e99a(0xdc),{'value':!![]}),exports[a273_0x36e99a(0xe9)]=void 0x0;const not_found_error_1=require(a273_0x36e99a(0xb9)),typedi_1=require(a273_0x36e99a(0xb7)),constants_1=require(a273_0x36e99a(0xb5)),queries_1=require(a273_0x36e99a(0xac)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a273_0x36e99a(0xe0)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x506652,_0x3d42c3){const _0x1fe80a=a273_0x36e99a;this[_0x1fe80a(0xd9)]=_0x506652,this[_0x1fe80a(0xbc)]=_0x3d42c3,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}['extractComponentMetadataFromRecord'](_0x50a856){const _0x59c986=a273_0x36e99a,_0x11fab5=(0x0,flosum_naming_utils_1[_0x59c986(0xea)])(_0x50a856,[_0x59c986(0xc3),_0x59c986(0xb3),_0x59c986(0xc2),_0x59c986(0xd2),_0x59c986(0xd6),'Id']);return{'id':_0x11fab5['Id'],'name':_0x11fab5[_0x59c986(0xc3)],'type':_0x11fab5['Component_Type__c'],'fileName':_0x11fab5[_0x59c986(0xd2)],'crc32':_0x11fab5[_0x59c986(0xc2)],'version':+_0x11fab5[_0x59c986(0xd6)]};}async['getRepositoryIdByName'](_0xdb3bc0){const _0x1cf874=a273_0x36e99a,[_0x7bfce8]=await this[_0x1cf874(0xd9)][_0x1cf874(0xdd)](queries_1[_0x1cf874(0xaf)][_0x1cf874(0xc9)](_0x1cf874(0xcb),_0xdb3bc0));if(!_0x7bfce8)throw new not_found_error_1[(_0x1cf874(0xf0))]('Repository\x20\x22'+_0xdb3bc0+_0x1cf874(0xdf));return _0x7bfce8['Id'];}async[a273_0x36e99a(0xe6)](_0x304317){const _0x3f87d2=a273_0x36e99a,[_0x5efea5]=await this[_0x3f87d2(0xd9)]['query'](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x3f87d2(0xc9)](_0x3f87d2(0xcb),_0x304317));if(!_0x5efea5)throw new not_found_error_1[(_0x3f87d2(0xf0))](_0x3f87d2(0xcc)+_0x304317+'\x22\x20not\x20found\x20in\x20flosum.');return _0x5efea5['Id'];}async['getComponentRecordTypes'](){const _0x3647b3=a273_0x36e99a,_0x128eb8=await this['queryService'][_0x3647b3(0xdd)](queries_1[_0x3647b3(0xbb)]);return _0x128eb8[_0x3647b3(0xbe)](_0xdd2e9e=>(0x0,flosum_naming_utils_1[_0x3647b3(0xea)])(_0xdd2e9e,['Id','Name']))['map'](_0x3ea3b0=>({'id':_0x3ea3b0['Id'],'name':_0x3ea3b0['Name']}));}async[a273_0x36e99a(0xde)](_0x10983d,_0x45679e){const _0x12d62f=a273_0x36e99a,_0x45b4b9=[];while(_0x10983d['length']){const _0x9341dd=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x12d62f(0xc9)](_0x12d62f(0xd8),_0x10983d['splice'](0x0,this[_0x12d62f(0xec)])[_0x12d62f(0xbe)](_0x46ac69=>'\x27'+_0x46ac69+'\x27')['join'](','))[_0x12d62f(0xc9)](_0x12d62f(0xb0),_0x45679e),_0x425b0c=await this['queryService'][_0x12d62f(0xdd)](_0x9341dd);_0x45b4b9[_0x12d62f(0xb6)](..._0x425b0c);}return _0x45b4b9[_0x12d62f(0xbe)](_0xb2362=>this[_0x12d62f(0xda)](_0xb2362));}async['fetchBranchComponentsByFilenames'](_0x59ca61,_0x2c8367){const _0x57ffbe=a273_0x36e99a,_0x2b51e0=[];while(_0x59ca61[_0x57ffbe(0xb2)]){const _0x3944bc=queries_1[_0x57ffbe(0xb4)][_0x57ffbe(0xc9)](_0x57ffbe(0xd8),_0x59ca61[_0x57ffbe(0xc1)](0x0,this[_0x57ffbe(0xec)])[_0x57ffbe(0xbe)](_0x117320=>'\x27'+_0x117320+'\x27')[_0x57ffbe(0xe8)](','))[_0x57ffbe(0xc9)](_0x57ffbe(0xeb),_0x2c8367),_0x2d89c0=await this[_0x57ffbe(0xd9)]['query'](_0x3944bc);_0x2b51e0[_0x57ffbe(0xb6)](..._0x2d89c0);}return _0x2b51e0[_0x57ffbe(0xbe)](_0x106fd6=>this[_0x57ffbe(0xda)](_0x106fd6));}async['fetchRepositoryComponents'](_0x29ceb5){const _0x450f7a=a273_0x36e99a,_0x15fcc5=queries_1[_0x450f7a(0xee)][_0x450f7a(0xc9)](_0x450f7a(0xb0),_0x29ceb5),_0x49105e=await this[_0x450f7a(0xd9)]['query'](_0x15fcc5);return _0x49105e[_0x450f7a(0xbe)](_0x3e60e7=>this[_0x450f7a(0xda)](_0x3e60e7));}async[a273_0x36e99a(0xca)](_0x553b32){const _0xd41f0=a273_0x36e99a,_0x1ca617=queries_1['GET_BRANCH_COMPONENTS_QUERY']['replace'](_0xd41f0(0xeb),_0x553b32),_0x4b1365=await this[_0xd41f0(0xd9)]['query'](_0x1ca617);return _0x4b1365[_0xd41f0(0xbe)](_0x5e1ca9=>this[_0xd41f0(0xda)](_0x5e1ca9));}async['fetchCommitManifestsByComponentIds'](_0x30c1bd){const _0x161992=a273_0x36e99a,_0x1de6c5=[..._0x30c1bd],_0x1317c6=[];while(_0x1de6c5[_0x161992(0xb2)]){const _0x5ed7e0=queries_1[_0x161992(0xe4)][_0x161992(0xc9)](_0x161992(0xed),_0x1de6c5['splice'](0x0,this[_0x161992(0xec)])[_0x161992(0xbe)](_0x48a3c8=>'\x27'+_0x48a3c8+'\x27')[_0x161992(0xe8)](',')),_0xe378a5=await this['queryService'][_0x161992(0xdd)](_0x5ed7e0);_0x1317c6[_0x161992(0xb6)](..._0xe378a5[_0x161992(0xbe)](_0x2e2851=>_0x2e2851['Id']));}return _0x1317c6;}async[a273_0x36e99a(0xd7)](_0x1ef16e,_0x28ac40){const _0x29d2a2=a273_0x36e99a;return this[_0x29d2a2(0xbc)][_0x29d2a2(0xdb)](constants_1[_0x29d2a2(0xd3)],{[constants_1['FLOSUM_NAMESPACE']+_0x29d2a2(0xb1)]:_0x28ac40,[constants_1[_0x29d2a2(0xad)]+'Commit_Name__c']:_0x1ef16e[_0x29d2a2(0xf3)](0x0,0xff),[constants_1[_0x29d2a2(0xad)]+_0x29d2a2(0xe2)]:_0x29d2a2(0xe3),[constants_1[_0x29d2a2(0xe1)]+_0x29d2a2(0xf2)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata(a273_0x36e99a(0xc4),[salesforce_query_service_1[a273_0x36e99a(0xc5)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;