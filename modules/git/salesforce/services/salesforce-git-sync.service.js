const a198_0x595a1a=a198_0x32b1;function a198_0x32b1(_0x281876,_0x2b35b8){const _0xaf51e2=a198_0x1f31();return a198_0x32b1=function(_0x1e2dfe,_0x54ef7f){_0x1e2dfe=_0x1e2dfe-0xd6;let _0x1f312e=_0xaf51e2[_0x1e2dfe];return _0x1f312e;},a198_0x32b1(_0x281876,_0x2b35b8);}(function(_0x1ffc38,_0xc3abb1){const _0x321cfa=a198_0x32b1,_0x1b63b3=_0x1ffc38();while(!![]){try{const _0x394d1c=-parseInt(_0x321cfa(0x120))/0x1+parseInt(_0x321cfa(0xe4))/0x2+-parseInt(_0x321cfa(0xf5))/0x3+-parseInt(_0x321cfa(0x10a))/0x4*(-parseInt(_0x321cfa(0x10b))/0x5)+-parseInt(_0x321cfa(0xe5))/0x6+-parseInt(_0x321cfa(0xe6))/0x7+parseInt(_0x321cfa(0xeb))/0x8;if(_0x394d1c===_0xc3abb1)break;else _0x1b63b3['push'](_0x1b63b3['shift']());}catch(_0x739bd2){_0x1b63b3['push'](_0x1b63b3['shift']());}}}(a198_0x1f31,0xdf210));const a198_0x54ef7f=(function(){let _0xc04d6c=!![];return function(_0x3a1554,_0xd48d41){const _0x536079=_0xc04d6c?function(){const _0xd8f70d=a198_0x32b1;if(_0xd48d41){const _0x5e5ff0=_0xd48d41[_0xd8f70d(0x11a)](_0x3a1554,arguments);return _0xd48d41=null,_0x5e5ff0;}}:function(){};return _0xc04d6c=![],_0x536079;};}()),a198_0x1e2dfe=a198_0x54ef7f(this,function(){const _0x508b11=a198_0x32b1;return a198_0x1e2dfe[_0x508b11(0xfc)]()[_0x508b11(0x10c)](_0x508b11(0x101))[_0x508b11(0xfc)]()[_0x508b11(0xd9)](a198_0x1e2dfe)[_0x508b11(0x10c)](_0x508b11(0x101));});a198_0x1e2dfe();'use strict';var __decorate=this&&this['__decorate']||function(_0x105a73,_0x169ffe,_0x432b77,_0x5d399e){const _0xad0547=a198_0x32b1;var _0x55671d=arguments[_0xad0547(0xe3)],_0x25d310=_0x55671d<0x3?_0x169ffe:_0x5d399e===null?_0x5d399e=Object[_0xad0547(0xff)](_0x169ffe,_0x432b77):_0x5d399e,_0x145b63;if(typeof Reflect===_0xad0547(0x118)&&typeof Reflect[_0xad0547(0xde)]==='function')_0x25d310=Reflect['decorate'](_0x105a73,_0x169ffe,_0x432b77,_0x5d399e);else{for(var _0x115d88=_0x105a73[_0xad0547(0xe3)]-0x1;_0x115d88>=0x0;_0x115d88--)if(_0x145b63=_0x105a73[_0x115d88])_0x25d310=(_0x55671d<0x3?_0x145b63(_0x25d310):_0x55671d>0x3?_0x145b63(_0x169ffe,_0x432b77,_0x25d310):_0x145b63(_0x169ffe,_0x432b77))||_0x25d310;}return _0x55671d>0x3&&_0x25d310&&Object[_0xad0547(0x113)](_0x169ffe,_0x432b77,_0x25d310),_0x25d310;},__metadata=this&&this[a198_0x595a1a(0xf0)]||function(_0x2728ca,_0x55c0ba){const _0x4fba40=a198_0x595a1a;if(typeof Reflect===_0x4fba40(0x118)&&typeof Reflect[_0x4fba40(0x11b)]==='function')return Reflect['metadata'](_0x2728ca,_0x55c0ba);};Object['defineProperty'](exports,a198_0x595a1a(0xf9),{'value':!![]}),exports[a198_0x595a1a(0xf8)]=void 0x0;function a198_0x1f31(){const _0x2f8dcd=['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','./salesforce-query.service','\x22\x20not\x20found\x20in\x20flosum.','83964gsDWHl','375ihamFP','search','%repositoryId%','replace','../utils/flosum-naming.utils','fetchRepositoryComponentsByFilenames','Status__c','queryService','defineProperty','GET_BRANCH_COMPONENTS_QUERY','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','restService','./salesforce-rest.service','object','getBranchIdByName','apply','metadata','File_Name__c','extractComponentMetadataFromRecord','Component_Name__c','FLOSUM_GIT_NAMESPACE','1651607mmDplS','Completed','Component_Type__c','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','fetchBranchComponentsByFilenames','constructor','%fileNames%','NotFoundError','getComponentRecordTypes','typedi','decorate','SalesforceQueryService','fetchCommitManifestsByComponentIds','substr','MAX_QUERY_ARRAY_ITEMS','length','3624590kaAnKZ','7853844qiDDJp','8849043kmDrdQ','Commit_Name__c','Version__c','post','Is_From_Agent__c','27926144eOVObB','CRC32__c','map','join','Repository\x20\x22','__metadata','fetchBranchComponents','../../../../constants','../../../../core/errors/not-found.error','FLOSUM_COMMIT','5216166ICfohW','fetchRepositoryComponents','push','SalesforceGitSyncService','__esModule','%componentIds%','Name','toString','%name%','Service','getOwnPropertyDescriptor','query','(((.+)+)+)+$','GET_COMPONENT_RECORD_TYPES_QUERY','SalesforceRestService','extractFieldsFromRecord','%branchId%','splice'];a198_0x1f31=function(){return _0x2f8dcd;};return a198_0x1f31();}const not_found_error_1=require(a198_0x595a1a(0xf3)),typedi_1=require(a198_0x595a1a(0xdd)),constants_1=require(a198_0x595a1a(0xf2)),queries_1=require('../queries'),flosum_naming_utils_1=require(a198_0x595a1a(0x10f)),salesforce_query_service_1=require(a198_0x595a1a(0x108)),salesforce_rest_service_1=require(a198_0x595a1a(0x117));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x57c375,_0x57b4f2){const _0x4c2301=a198_0x595a1a;this['queryService']=_0x57c375,this[_0x4c2301(0x116)]=_0x57b4f2,this[_0x4c2301(0xe2)]=0xc8;}[a198_0x595a1a(0x11d)](_0x5c5d52){const _0x3bdcc1=a198_0x595a1a,_0x47325d=(0x0,flosum_naming_utils_1[_0x3bdcc1(0x104)])(_0x5c5d52,[_0x3bdcc1(0x11e),_0x3bdcc1(0xd6),_0x3bdcc1(0xec),_0x3bdcc1(0x11c),_0x3bdcc1(0xe8),'Id']);return{'id':_0x47325d['Id'],'name':_0x47325d[_0x3bdcc1(0x11e)],'type':_0x47325d['Component_Type__c'],'fileName':_0x47325d['File_Name__c'],'crc32':_0x47325d[_0x3bdcc1(0xec)],'version':+_0x47325d[_0x3bdcc1(0xe8)]};}async['getRepositoryIdByName'](_0x1afe07){const _0x4bfe04=a198_0x595a1a,[_0x831f50]=await this[_0x4bfe04(0x112)][_0x4bfe04(0x100)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x4bfe04(0x10e)](_0x4bfe04(0xfd),_0x1afe07));if(!_0x831f50)throw new not_found_error_1[(_0x4bfe04(0xdb))](_0x4bfe04(0xef)+_0x1afe07+_0x4bfe04(0x109));return _0x831f50['Id'];}async[a198_0x595a1a(0x119)](_0x5bc1a1){const _0x2b471c=a198_0x595a1a,[_0x22192a]=await this[_0x2b471c(0x112)][_0x2b471c(0x100)](queries_1['GET_BRANCH_BY_NAME_QUERY']['replace']('%name%',_0x5bc1a1));if(!_0x22192a)throw new not_found_error_1[(_0x2b471c(0xdb))]('Branch\x20\x22'+_0x5bc1a1+_0x2b471c(0x109));return _0x22192a['Id'];}async[a198_0x595a1a(0xdc)](){const _0x73c083=a198_0x595a1a,_0x5b0447=await this['queryService']['query'](queries_1[_0x73c083(0x102)]);return _0x5b0447[_0x73c083(0xed)](_0x2b2bac=>(0x0,flosum_naming_utils_1[_0x73c083(0x104)])(_0x2b2bac,['Id',_0x73c083(0xfb)]))[_0x73c083(0xed)](_0x32338d=>({'id':_0x32338d['Id'],'name':_0x32338d[_0x73c083(0xfb)]}));}async[a198_0x595a1a(0x110)](_0x2960a4,_0x526bc9){const _0x5bd958=a198_0x595a1a,_0xd44c87=[];while(_0x2960a4['length']){const _0x1d84d0=queries_1[_0x5bd958(0x107)][_0x5bd958(0x10e)](_0x5bd958(0xda),_0x2960a4[_0x5bd958(0x106)](0x0,this[_0x5bd958(0xe2)])[_0x5bd958(0xed)](_0x279097=>'\x27'+_0x279097+'\x27')[_0x5bd958(0xee)](','))[_0x5bd958(0x10e)]('%repositoryId%',_0x526bc9),_0x4e1727=await this[_0x5bd958(0x112)]['query'](_0x1d84d0);_0xd44c87[_0x5bd958(0xf7)](..._0x4e1727);}return _0xd44c87[_0x5bd958(0xed)](_0x33a43b=>this[_0x5bd958(0x11d)](_0x33a43b));}async[a198_0x595a1a(0xd8)](_0x372504,_0x5fa465){const _0x1e11d7=a198_0x595a1a,_0x3e797a=[];while(_0x372504[_0x1e11d7(0xe3)]){const _0x1d8974=queries_1[_0x1e11d7(0x115)]['replace'](_0x1e11d7(0xda),_0x372504[_0x1e11d7(0x106)](0x0,this[_0x1e11d7(0xe2)])['map'](_0x701ab1=>'\x27'+_0x701ab1+'\x27')['join'](','))['replace']('%branchId%',_0x5fa465),_0x753e72=await this[_0x1e11d7(0x112)]['query'](_0x1d8974);_0x3e797a['push'](..._0x753e72);}return _0x3e797a[_0x1e11d7(0xed)](_0xfa3b5c=>this[_0x1e11d7(0x11d)](_0xfa3b5c));}async[a198_0x595a1a(0xf6)](_0x91a18b){const _0x5cd916=a198_0x595a1a,_0x530c3f=queries_1['GET_REPOSITORY_COMPONENTS_QUERY']['replace'](_0x5cd916(0x10d),_0x91a18b),_0x52dcf9=await this[_0x5cd916(0x112)][_0x5cd916(0x100)](_0x530c3f);return _0x52dcf9[_0x5cd916(0xed)](_0x65793b=>this['extractComponentMetadataFromRecord'](_0x65793b));}async[a198_0x595a1a(0xf1)](_0x5caa32){const _0x4fcbb0=a198_0x595a1a,_0x3123d7=queries_1[_0x4fcbb0(0x114)]['replace'](_0x4fcbb0(0x105),_0x5caa32),_0x114bbb=await this[_0x4fcbb0(0x112)]['query'](_0x3123d7);return _0x114bbb['map'](_0x359aea=>this[_0x4fcbb0(0x11d)](_0x359aea));}async[a198_0x595a1a(0xe0)](_0x135b66){const _0x5c6d6d=a198_0x595a1a,_0x37ea0c=[..._0x135b66],_0xbb01ec=[];while(_0x37ea0c['length']){const _0x2e687c=queries_1[_0x5c6d6d(0xd7)][_0x5c6d6d(0x10e)](_0x5c6d6d(0xfa),_0x37ea0c[_0x5c6d6d(0x106)](0x0,this[_0x5c6d6d(0xe2)])[_0x5c6d6d(0xed)](_0x38ab01=>'\x27'+_0x38ab01+'\x27')[_0x5c6d6d(0xee)](',')),_0x28422c=await this[_0x5c6d6d(0x112)][_0x5c6d6d(0x100)](_0x2e687c);_0xbb01ec[_0x5c6d6d(0xf7)](..._0x28422c[_0x5c6d6d(0xed)](_0x210e84=>_0x210e84['Id']));}return _0xbb01ec;}async['createCommit'](_0x4bbd8c,_0x137c3c){const _0x54d38c=a198_0x595a1a;return this[_0x54d38c(0x116)][_0x54d38c(0xe9)](constants_1[_0x54d38c(0xf4)],{[constants_1['FLOSUM_NAMESPACE']+'Repository__c']:_0x137c3c,[constants_1['FLOSUM_NAMESPACE']+_0x54d38c(0xe7)]:_0x4bbd8c[_0x54d38c(0xe1)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x54d38c(0x111)]:_0x54d38c(0x121),[constants_1[_0x54d38c(0x11f)]+_0x54d38c(0xea)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a198_0x595a1a(0xfe)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a198_0x595a1a(0xdf)],salesforce_rest_service_1[a198_0x595a1a(0x103)]])],SalesforceGitSyncService),exports[a198_0x595a1a(0xf8)]=SalesforceGitSyncService;