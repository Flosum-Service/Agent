const a184_0x1019d1=a184_0xa3e9;(function(_0xda8d59,_0x22972a){const _0x3af771=a184_0xa3e9,_0x4a568c=_0xda8d59();while(!![]){try{const _0x2d7036=-parseInt(_0x3af771(0xfb))/0x1+-parseInt(_0x3af771(0xdd))/0x2+parseInt(_0x3af771(0x10a))/0x3+-parseInt(_0x3af771(0xc6))/0x4*(parseInt(_0x3af771(0xfa))/0x5)+parseInt(_0x3af771(0x10e))/0x6+parseInt(_0x3af771(0xd9))/0x7*(parseInt(_0x3af771(0xf9))/0x8)+parseInt(_0x3af771(0xc5))/0x9*(parseInt(_0x3af771(0xc7))/0xa);if(_0x2d7036===_0x22972a)break;else _0x4a568c['push'](_0x4a568c['shift']());}catch(_0x20833c){_0x4a568c['push'](_0x4a568c['shift']());}}}(a184_0x46f5,0xc52bd));const a184_0x21eca6=(function(){let _0x5ac737=!![];return function(_0x479b8a,_0x4b98af){const _0x56bc31=_0x5ac737?function(){if(_0x4b98af){const _0x2d4924=_0x4b98af['apply'](_0x479b8a,arguments);return _0x4b98af=null,_0x2d4924;}}:function(){};return _0x5ac737=![],_0x56bc31;};}()),a184_0x29e90c=a184_0x21eca6(this,function(){const _0x54f3ed=a184_0xa3e9;return a184_0x29e90c[_0x54f3ed(0xec)]()[_0x54f3ed(0x10b)](_0x54f3ed(0xe3))[_0x54f3ed(0xec)]()[_0x54f3ed(0xf8)](a184_0x29e90c)[_0x54f3ed(0x10b)](_0x54f3ed(0xe3));});a184_0x29e90c();'use strict';var __decorate=this&&this['__decorate']||function(_0x5230e9,_0x3455bc,_0x231949,_0x572ea7){const _0x23f95d=a184_0xa3e9;var _0xcfe127=arguments[_0x23f95d(0xd0)],_0x2396f4=_0xcfe127<0x3?_0x3455bc:_0x572ea7===null?_0x572ea7=Object[_0x23f95d(0xe0)](_0x3455bc,_0x231949):_0x572ea7,_0x2aed2c;if(typeof Reflect===_0x23f95d(0xe8)&&typeof Reflect['decorate']===_0x23f95d(0xc8))_0x2396f4=Reflect[_0x23f95d(0xef)](_0x5230e9,_0x3455bc,_0x231949,_0x572ea7);else{for(var _0x8c0b09=_0x5230e9[_0x23f95d(0xd0)]-0x1;_0x8c0b09>=0x0;_0x8c0b09--)if(_0x2aed2c=_0x5230e9[_0x8c0b09])_0x2396f4=(_0xcfe127<0x3?_0x2aed2c(_0x2396f4):_0xcfe127>0x3?_0x2aed2c(_0x3455bc,_0x231949,_0x2396f4):_0x2aed2c(_0x3455bc,_0x231949))||_0x2396f4;}return _0xcfe127>0x3&&_0x2396f4&&Object['defineProperty'](_0x3455bc,_0x231949,_0x2396f4),_0x2396f4;},__metadata=this&&this['__metadata']||function(_0x29179a,_0x569ccc){const _0x2a7b05=a184_0xa3e9;if(typeof Reflect===_0x2a7b05(0xe8)&&typeof Reflect[_0x2a7b05(0xcd)]===_0x2a7b05(0xc8))return Reflect[_0x2a7b05(0xcd)](_0x29179a,_0x569ccc);};Object[a184_0x1019d1(0xe9)](exports,a184_0x1019d1(0xd4),{'value':!![]}),exports[a184_0x1019d1(0xf2)]=void 0x0;function a184_0x46f5(){const _0x3c0a03=['Component_Name__c','1128102eQtZUa','extractFieldsFromRecord','fetchCommitManifestsByComponentIds','getOwnPropertyDescriptor','Service','getRepositoryIdByName','(((.+)+)+)+$','%branchId%','SalesforceQueryService','extractComponentMetadataFromRecord','restService','object','defineProperty','%fileNames%','SalesforceRestService','toString','push','getBranchIdByName','decorate','GET_BRANCH_COMPONENTS_QUERY','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','SalesforceGitSyncService','queryService','GET_REPOSITORY_BY_NAME_QUERY','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','GET_REPOSITORY_COMPONENTS_QUERY','../../../../core/errors/not-found.error','constructor','8VgfUiI','55ooCsrW','778606GLtoyC','join','createCommit','GET_BRANCH_BY_NAME_QUERY','Name','Component_Type__c','MAX_QUERY_ARRAY_ITEMS','splice','Repository\x20\x22','Branch\x20\x22','design:paramtypes','NotFoundError','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','GET_COMPONENT_RECORD_TYPES_QUERY','Repository__c','1563942LQdWIt','search','post','../queries','936528kbWQDf','getComponentRecordTypes','%name%','./salesforce-rest.service','query','99414VwTOPB','528796IxEfKv','2360dtEuzh','function','%repositoryId%','fetchRepositoryComponents','Version__c','replace','metadata','../utils/flosum-naming.utils','map','length','%componentIds%','substr','fetchRepositoryComponentsByFilenames','__esModule','CRC32__c','Commit_Name__c','Is_From_Agent__c','FLOSUM_NAMESPACE','2241407PSeIfW','fetchBranchComponentsByFilenames','fetchBranchComponents'];a184_0x46f5=function(){return _0x3c0a03;};return a184_0x46f5();}function a184_0xa3e9(_0x5b5537,_0x3592fd){const _0x565abc=a184_0x46f5();return a184_0xa3e9=function(_0x29e90c,_0x21eca6){_0x29e90c=_0x29e90c-0xc4;let _0x46f526=_0x565abc[_0x29e90c];return _0x46f526;},a184_0xa3e9(_0x5b5537,_0x3592fd);}const not_found_error_1=require(a184_0x1019d1(0xf7)),typedi_1=require('typedi'),constants_1=require('../../../../constants'),queries_1=require(a184_0x1019d1(0x10d)),flosum_naming_utils_1=require(a184_0x1019d1(0xce)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a184_0x1019d1(0x111));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x5b6f0b,_0x476823){const _0x49a673=a184_0x1019d1;this[_0x49a673(0xf3)]=_0x5b6f0b,this[_0x49a673(0xe7)]=_0x476823,this[_0x49a673(0x101)]=0xc8;}[a184_0x1019d1(0xe6)](_0x4df077){const _0x62c5cc=a184_0x1019d1,_0x4a13c0=flosum_naming_utils_1['extractFieldsFromRecord'](_0x4df077,[_0x62c5cc(0xdc),_0x62c5cc(0x100),_0x62c5cc(0xd5),'File_Name__c','Version__c','Id']);return{'id':_0x4a13c0['Id'],'name':_0x4a13c0['Component_Name__c'],'type':_0x4a13c0[_0x62c5cc(0x100)],'fileName':_0x4a13c0['File_Name__c'],'crc32':_0x4a13c0[_0x62c5cc(0xd5)],'version':+_0x4a13c0[_0x62c5cc(0xcb)]};}async[a184_0x1019d1(0xe2)](_0x33e041){const _0x1d4402=a184_0x1019d1,[_0x32e884]=await this[_0x1d4402(0xf3)]['query'](queries_1[_0x1d4402(0xf4)][_0x1d4402(0xcc)](_0x1d4402(0x110),_0x33e041));if(!_0x32e884)throw new not_found_error_1['NotFoundError'](_0x1d4402(0x103)+_0x33e041+'\x22\x20not\x20found\x20in\x20flosum.');return _0x32e884['Id'];}async[a184_0x1019d1(0xee)](_0x153cf6){const _0x4d9f71=a184_0x1019d1,[_0x183eb6]=await this[_0x4d9f71(0xf3)]['query'](queries_1[_0x4d9f71(0xfe)][_0x4d9f71(0xcc)](_0x4d9f71(0x110),_0x153cf6));if(!_0x183eb6)throw new not_found_error_1[(_0x4d9f71(0x106))](_0x4d9f71(0x104)+_0x153cf6+'\x22\x20not\x20found\x20in\x20flosum.');return _0x183eb6['Id'];}async[a184_0x1019d1(0x10f)](){const _0x2f9cc5=a184_0x1019d1,_0x59b1b1=await this['queryService'][_0x2f9cc5(0xc4)](queries_1[_0x2f9cc5(0x108)]);return _0x59b1b1[_0x2f9cc5(0xcf)](_0x248365=>flosum_naming_utils_1[_0x2f9cc5(0xde)](_0x248365,['Id',_0x2f9cc5(0xff)]))[_0x2f9cc5(0xcf)](_0x34bbb7=>({'id':_0x34bbb7['Id'],'name':_0x34bbb7[_0x2f9cc5(0xff)]}));}async[a184_0x1019d1(0xd3)](_0x1651fc,_0x25f891){const _0x484ef4=a184_0x1019d1,_0xf785c8=[];while(_0x1651fc[_0x484ef4(0xd0)]){const _0x4a9a46=queries_1[_0x484ef4(0xf1)]['replace'](_0x484ef4(0xea),_0x1651fc[_0x484ef4(0x102)](0x0,this[_0x484ef4(0x101)])[_0x484ef4(0xcf)](_0x2d4062=>'\x27'+_0x2d4062+'\x27')['join'](','))['replace']('%repositoryId%',_0x25f891),_0x2c1d60=await this[_0x484ef4(0xf3)][_0x484ef4(0xc4)](_0x4a9a46);_0xf785c8[_0x484ef4(0xed)](..._0x2c1d60);}return _0xf785c8[_0x484ef4(0xcf)](_0x2b0a75=>this[_0x484ef4(0xe6)](_0x2b0a75));}async[a184_0x1019d1(0xda)](_0x272d35,_0x2872b7){const _0x120e20=a184_0x1019d1,_0x2fef1d=[];while(_0x272d35[_0x120e20(0xd0)]){const _0x1219a8=queries_1[_0x120e20(0x107)][_0x120e20(0xcc)]('%fileNames%',_0x272d35[_0x120e20(0x102)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x120e20(0xcf)](_0x2125b0=>'\x27'+_0x2125b0+'\x27')[_0x120e20(0xfc)](','))[_0x120e20(0xcc)]('%branchId%',_0x2872b7),_0x153d57=await this['queryService'][_0x120e20(0xc4)](_0x1219a8);_0x2fef1d[_0x120e20(0xed)](..._0x153d57);}return _0x2fef1d[_0x120e20(0xcf)](_0x5d5d8a=>this[_0x120e20(0xe6)](_0x5d5d8a));}async[a184_0x1019d1(0xca)](_0x4a2f1d){const _0x4b349f=a184_0x1019d1,_0x17c3bc=queries_1[_0x4b349f(0xf6)]['replace'](_0x4b349f(0xc9),_0x4a2f1d),_0x354732=await this['queryService'][_0x4b349f(0xc4)](_0x17c3bc);return _0x354732[_0x4b349f(0xcf)](_0x46996f=>this[_0x4b349f(0xe6)](_0x46996f));}async[a184_0x1019d1(0xdb)](_0xf0195){const _0x4c0f5a=a184_0x1019d1,_0x2043f3=queries_1[_0x4c0f5a(0xf0)][_0x4c0f5a(0xcc)](_0x4c0f5a(0xe4),_0xf0195),_0x1cd524=await this[_0x4c0f5a(0xf3)][_0x4c0f5a(0xc4)](_0x2043f3);return _0x1cd524[_0x4c0f5a(0xcf)](_0x65fd0d=>this[_0x4c0f5a(0xe6)](_0x65fd0d));}async[a184_0x1019d1(0xdf)](_0x134945){const _0x5ff2d1=a184_0x1019d1,_0x4ea6a8=[..._0x134945],_0x4caf79=[];while(_0x4ea6a8[_0x5ff2d1(0xd0)]){const _0xdbdfdb=queries_1[_0x5ff2d1(0xf5)][_0x5ff2d1(0xcc)](_0x5ff2d1(0xd1),_0x4ea6a8['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x30473e=>'\x27'+_0x30473e+'\x27')[_0x5ff2d1(0xfc)](',')),_0x1e4ff0=await this[_0x5ff2d1(0xf3)][_0x5ff2d1(0xc4)](_0xdbdfdb);_0x4caf79[_0x5ff2d1(0xed)](..._0x1e4ff0[_0x5ff2d1(0xcf)](_0x4a2d50=>_0x4a2d50['Id']));}return _0x4caf79;}async[a184_0x1019d1(0xfd)](_0x3b4c84,_0x2c151f){const _0x410126=a184_0x1019d1;return this[_0x410126(0xe7)][_0x410126(0x10c)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x410126(0xd8)]+_0x410126(0x109)]:_0x2c151f,[constants_1[_0x410126(0xd8)]+_0x410126(0xd6)]:_0x3b4c84[_0x410126(0xd2)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:'Completed',[constants_1['FLOSUM_GIT_NAMESPACE']+_0x410126(0xd7)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a184_0x1019d1(0xe1)](),__metadata(a184_0x1019d1(0x105),[salesforce_query_service_1[a184_0x1019d1(0xe5)],salesforce_rest_service_1[a184_0x1019d1(0xeb)]])],SalesforceGitSyncService),exports[a184_0x1019d1(0xf2)]=SalesforceGitSyncService;