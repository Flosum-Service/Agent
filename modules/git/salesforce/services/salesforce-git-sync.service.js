const a180_0x4a0633=a180_0x2cc3;(function(_0x5a11aa,_0x52e55b){const _0x37acb6=a180_0x2cc3,_0x4f0d27=_0x5a11aa();while(!![]){try{const _0x3364d2=-parseInt(_0x37acb6(0x177))/0x1+parseInt(_0x37acb6(0x159))/0x2*(-parseInt(_0x37acb6(0x172))/0x3)+-parseInt(_0x37acb6(0x181))/0x4+-parseInt(_0x37acb6(0x161))/0x5+-parseInt(_0x37acb6(0x145))/0x6*(-parseInt(_0x37acb6(0x16b))/0x7)+parseInt(_0x37acb6(0x14a))/0x8*(parseInt(_0x37acb6(0x17f))/0x9)+parseInt(_0x37acb6(0x16c))/0xa;if(_0x3364d2===_0x52e55b)break;else _0x4f0d27['push'](_0x4f0d27['shift']());}catch(_0x589755){_0x4f0d27['push'](_0x4f0d27['shift']());}}}(a180_0x5de2,0xe8cbc));const a180_0x16dcb4=(function(){let _0x66132=!![];return function(_0x5eeef4,_0x114e81){const _0xb69d46=_0x66132?function(){const _0x57367c=a180_0x2cc3;if(_0x114e81){const _0x5d88f5=_0x114e81[_0x57367c(0x144)](_0x5eeef4,arguments);return _0x114e81=null,_0x5d88f5;}}:function(){};return _0x66132=![],_0xb69d46;};}()),a180_0x4f8795=a180_0x16dcb4(this,function(){const _0x438528=a180_0x2cc3;return a180_0x4f8795[_0x438528(0x141)]()[_0x438528(0x17c)](_0x438528(0x154))['toString']()[_0x438528(0x163)](a180_0x4f8795)['search'](_0x438528(0x154));});a180_0x4f8795();'use strict';function a180_0x5de2(){const _0x12b3a7=['%name%','Commit_Name__c','SalesforceGitSyncService','design:paramtypes','%branchId%','21TGoFwp','Completed','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','Is_From_Agent__c','fetchCommitManifestsByComponentIds','242616kxCBoE','splice','getRepositoryIdByName','defineProperty','GET_REPOSITORY_COMPONENTS_QUERY','search','typedi','object','13135203BLNQkY','./salesforce-rest.service','3821808arfDkK','../utils/flosum-naming.utils','join','../../../../constants','length','replace','CRC32__c','push','../../../../core/errors/not-found.error','Status__c','toString','__metadata','%fileNames%','apply','127734zRfifE','getComponentRecordTypes','function','%repositoryId%','GET_REPOSITORY_BY_NAME_QUERY','8QXUBTc','extractFieldsFromRecord','metadata','GET_BRANCH_BY_NAME_QUERY','MAX_QUERY_ARRAY_ITEMS','NotFoundError','query','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','Name','\x22\x20not\x20found\x20in\x20flosum.','(((.+)+)+)+$','restService','fetchBranchComponents','SalesforceRestService','createCommit','195346oVwdCw','GET_COMPONENT_RECORD_TYPES_QUERY','map','extractComponentMetadataFromRecord','substr','Service','__decorate','Version__c','7079535JBXehn','queryService','constructor','Component_Name__c','fetchBranchComponentsByFilenames','decorate','GET_BRANCH_COMPONENTS_QUERY','getOwnPropertyDescriptor','Repository__c','Component_Type__c','357WgFECd','17060120GLGJVq'];a180_0x5de2=function(){return _0x12b3a7;};return a180_0x5de2();}var __decorate=this&&this[a180_0x4a0633(0x15f)]||function(_0x5460ac,_0x218400,_0x4138df,_0x2190bb){const _0xce1c9=a180_0x4a0633;var _0x2a3f72=arguments[_0xce1c9(0x185)],_0x497148=_0x2a3f72<0x3?_0x218400:_0x2190bb===null?_0x2190bb=Object[_0xce1c9(0x168)](_0x218400,_0x4138df):_0x2190bb,_0x16d9e8;if(typeof Reflect===_0xce1c9(0x17e)&&typeof Reflect[_0xce1c9(0x166)]===_0xce1c9(0x147))_0x497148=Reflect[_0xce1c9(0x166)](_0x5460ac,_0x218400,_0x4138df,_0x2190bb);else{for(var _0x148c62=_0x5460ac[_0xce1c9(0x185)]-0x1;_0x148c62>=0x0;_0x148c62--)if(_0x16d9e8=_0x5460ac[_0x148c62])_0x497148=(_0x2a3f72<0x3?_0x16d9e8(_0x497148):_0x2a3f72>0x3?_0x16d9e8(_0x218400,_0x4138df,_0x497148):_0x16d9e8(_0x218400,_0x4138df))||_0x497148;}return _0x2a3f72>0x3&&_0x497148&&Object[_0xce1c9(0x17a)](_0x218400,_0x4138df,_0x497148),_0x497148;},__metadata=this&&this[a180_0x4a0633(0x142)]||function(_0x34118c,_0x1f3407){const _0x3294e0=a180_0x4a0633;if(typeof Reflect===_0x3294e0(0x17e)&&typeof Reflect[_0x3294e0(0x14c)]===_0x3294e0(0x147))return Reflect[_0x3294e0(0x14c)](_0x34118c,_0x1f3407);};Object[a180_0x4a0633(0x17a)](exports,'__esModule',{'value':!![]}),exports[a180_0x4a0633(0x16f)]=void 0x0;const not_found_error_1=require(a180_0x4a0633(0x189)),typedi_1=require(a180_0x4a0633(0x17d)),constants_1=require(a180_0x4a0633(0x184)),queries_1=require('../queries'),flosum_naming_utils_1=require(a180_0x4a0633(0x182)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a180_0x4a0633(0x180));function a180_0x2cc3(_0x36828c,_0x2202d7){const _0x452773=a180_0x5de2();return a180_0x2cc3=function(_0x4f8795,_0x16dcb4){_0x4f8795=_0x4f8795-0x141;let _0x5de245=_0x452773[_0x4f8795];return _0x5de245;},a180_0x2cc3(_0x36828c,_0x2202d7);}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1e1070,_0x66bab7){const _0x573a18=a180_0x4a0633;this[_0x573a18(0x162)]=_0x1e1070,this[_0x573a18(0x155)]=_0x66bab7,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a180_0x4a0633(0x15c)](_0x1e9116){const _0x38d0cf=a180_0x4a0633,_0x4ffed5=flosum_naming_utils_1[_0x38d0cf(0x14b)](_0x1e9116,[_0x38d0cf(0x164),_0x38d0cf(0x16a),'CRC32__c','File_Name__c',_0x38d0cf(0x160),'Id']);return{'id':_0x4ffed5['Id'],'name':_0x4ffed5[_0x38d0cf(0x164)],'type':_0x4ffed5[_0x38d0cf(0x16a)],'fileName':_0x4ffed5['File_Name__c'],'crc32':_0x4ffed5[_0x38d0cf(0x187)],'version':+_0x4ffed5['Version__c']};}async[a180_0x4a0633(0x179)](_0xa3cb7b){const _0x14eb64=a180_0x4a0633,[_0x5665a8]=await this[_0x14eb64(0x162)]['query'](queries_1[_0x14eb64(0x149)][_0x14eb64(0x186)]('%name%',_0xa3cb7b));if(!_0x5665a8)throw new not_found_error_1['NotFoundError']('Repository\x20\x22'+_0xa3cb7b+'\x22\x20not\x20found\x20in\x20flosum.');return _0x5665a8['Id'];}async['getBranchIdByName'](_0xe60b97){const _0x922240=a180_0x4a0633,[_0x169d22]=await this[_0x922240(0x162)][_0x922240(0x150)](queries_1[_0x922240(0x14d)]['replace'](_0x922240(0x16d),_0xe60b97));if(!_0x169d22)throw new not_found_error_1[(_0x922240(0x14f))]('Branch\x20\x22'+_0xe60b97+_0x922240(0x153));return _0x169d22['Id'];}async[a180_0x4a0633(0x146)](){const _0x177147=a180_0x4a0633,_0x1e54ee=await this[_0x177147(0x162)][_0x177147(0x150)](queries_1[_0x177147(0x15a)]);return _0x1e54ee[_0x177147(0x15b)](_0x5e868f=>flosum_naming_utils_1[_0x177147(0x14b)](_0x5e868f,['Id',_0x177147(0x152)]))['map'](_0x56225f=>({'id':_0x56225f['Id'],'name':_0x56225f[_0x177147(0x152)]}));}async['fetchRepositoryComponentsByFilenames'](_0x3720ca,_0x31c6e9){const _0x2fd623=a180_0x4a0633,_0x26b49c=[];while(_0x3720ca['length']){const _0xa8840=queries_1[_0x2fd623(0x174)][_0x2fd623(0x186)](_0x2fd623(0x143),_0x3720ca['splice'](0x0,this[_0x2fd623(0x14e)])[_0x2fd623(0x15b)](_0x33de4f=>'\x27'+_0x33de4f+'\x27')[_0x2fd623(0x183)](','))[_0x2fd623(0x186)](_0x2fd623(0x148),_0x31c6e9),_0x601390=await this[_0x2fd623(0x162)]['query'](_0xa8840);_0x26b49c['push'](..._0x601390);}return _0x26b49c[_0x2fd623(0x15b)](_0x3a5e31=>this[_0x2fd623(0x15c)](_0x3a5e31));}async[a180_0x4a0633(0x165)](_0x12dc8d,_0x5b95e0){const _0x150c24=a180_0x4a0633,_0x46cfee=[];while(_0x12dc8d[_0x150c24(0x185)]){const _0x597d85=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY']['replace']('%fileNames%',_0x12dc8d[_0x150c24(0x178)](0x0,this[_0x150c24(0x14e)])[_0x150c24(0x15b)](_0x3bf526=>'\x27'+_0x3bf526+'\x27')[_0x150c24(0x183)](','))[_0x150c24(0x186)](_0x150c24(0x171),_0x5b95e0),_0x4421b7=await this[_0x150c24(0x162)]['query'](_0x597d85);_0x46cfee['push'](..._0x4421b7);}return _0x46cfee[_0x150c24(0x15b)](_0x5ab9c0=>this['extractComponentMetadataFromRecord'](_0x5ab9c0));}async['fetchRepositoryComponents'](_0x2daaee){const _0x854582=a180_0x4a0633,_0xccb88e=queries_1[_0x854582(0x17b)][_0x854582(0x186)](_0x854582(0x148),_0x2daaee),_0x2d9acb=await this[_0x854582(0x162)][_0x854582(0x150)](_0xccb88e);return _0x2d9acb[_0x854582(0x15b)](_0x203eda=>this[_0x854582(0x15c)](_0x203eda));}async[a180_0x4a0633(0x156)](_0x6f4cf2){const _0x3ee81c=a180_0x4a0633,_0x5d5144=queries_1[_0x3ee81c(0x167)][_0x3ee81c(0x186)](_0x3ee81c(0x171),_0x6f4cf2),_0x4930f7=await this[_0x3ee81c(0x162)][_0x3ee81c(0x150)](_0x5d5144);return _0x4930f7[_0x3ee81c(0x15b)](_0x455dda=>this[_0x3ee81c(0x15c)](_0x455dda));}async[a180_0x4a0633(0x176)](_0x7dbb52){const _0x2c87bc=a180_0x4a0633,_0x45e2ae=[..._0x7dbb52],_0x122e35=[];while(_0x45e2ae[_0x2c87bc(0x185)]){const _0x2849bf=queries_1[_0x2c87bc(0x151)][_0x2c87bc(0x186)]('%componentIds%',_0x45e2ae[_0x2c87bc(0x178)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x2c87bc(0x15b)](_0x102c58=>'\x27'+_0x102c58+'\x27')[_0x2c87bc(0x183)](',')),_0x349ee0=await this['queryService']['query'](_0x2849bf);_0x122e35[_0x2c87bc(0x188)](..._0x349ee0[_0x2c87bc(0x15b)](_0x468677=>_0x468677['Id']));}return _0x122e35;}async[a180_0x4a0633(0x158)](_0x1b236d,_0x366135){const _0x2ed3dc=a180_0x4a0633;return this[_0x2ed3dc(0x155)]['post'](constants_1['FLOSUM_COMMIT'],{[constants_1['FLOSUM_NAMESPACE']+_0x2ed3dc(0x169)]:_0x366135,[constants_1['FLOSUM_NAMESPACE']+_0x2ed3dc(0x16e)]:_0x1b236d[_0x2ed3dc(0x15d)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x2ed3dc(0x18a)]:_0x2ed3dc(0x173),[constants_1['FLOSUM_GIT_NAMESPACE']+_0x2ed3dc(0x175)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a180_0x4a0633(0x15e)](),__metadata(a180_0x4a0633(0x170),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a180_0x4a0633(0x157)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;