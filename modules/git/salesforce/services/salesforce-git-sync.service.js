const a263_0x5db77b=a263_0x5ddd;(function(_0x317387,_0x13bd09){const _0x20c162=a263_0x5ddd,_0x16f702=_0x317387();while(!![]){try{const _0x32fc00=-parseInt(_0x20c162(0x166))/0x1+parseInt(_0x20c162(0x145))/0x2+-parseInt(_0x20c162(0x13d))/0x3*(-parseInt(_0x20c162(0x182))/0x4)+parseInt(_0x20c162(0x13e))/0x5*(-parseInt(_0x20c162(0x17c))/0x6)+-parseInt(_0x20c162(0x14c))/0x7*(-parseInt(_0x20c162(0x176))/0x8)+-parseInt(_0x20c162(0x179))/0x9*(parseInt(_0x20c162(0x147))/0xa)+-parseInt(_0x20c162(0x157))/0xb*(-parseInt(_0x20c162(0x142))/0xc);if(_0x32fc00===_0x13bd09)break;else _0x16f702['push'](_0x16f702['shift']());}catch(_0xef03ff){_0x16f702['push'](_0x16f702['shift']());}}}(a263_0x5275,0xb48ca));const a263_0x1cb377=(function(){let _0x55f2c7=!![];return function(_0x11d1d9,_0x319180){const _0x16e2e7=_0x55f2c7?function(){const _0x4ca77f=a263_0x5ddd;if(_0x319180){const _0x24527f=_0x319180[_0x4ca77f(0x16e)](_0x11d1d9,arguments);return _0x319180=null,_0x24527f;}}:function(){};return _0x55f2c7=![],_0x16e2e7;};}()),a263_0xd442a8=a263_0x1cb377(this,function(){const _0x1c66a0=a263_0x5ddd;return a263_0xd442a8[_0x1c66a0(0x16a)]()['search'](_0x1c66a0(0x14b))['toString']()['constructor'](a263_0xd442a8)[_0x1c66a0(0x17d)](_0x1c66a0(0x14b));});a263_0xd442a8();'use strict';var __decorate=this&&this[a263_0x5db77b(0x175)]||function(_0x2b4b44,_0x5b9904,_0x5cabfe,_0x39b56b){const _0x22664a=a263_0x5db77b;var _0x4aecc0=arguments['length'],_0x8e1ff0=_0x4aecc0<0x3?_0x5b9904:_0x39b56b===null?_0x39b56b=Object[_0x22664a(0x151)](_0x5b9904,_0x5cabfe):_0x39b56b,_0x36789b;if(typeof Reflect===_0x22664a(0x13c)&&typeof Reflect[_0x22664a(0x172)]==='function')_0x8e1ff0=Reflect[_0x22664a(0x172)](_0x2b4b44,_0x5b9904,_0x5cabfe,_0x39b56b);else{for(var _0x3a12d9=_0x2b4b44[_0x22664a(0x15b)]-0x1;_0x3a12d9>=0x0;_0x3a12d9--)if(_0x36789b=_0x2b4b44[_0x3a12d9])_0x8e1ff0=(_0x4aecc0<0x3?_0x36789b(_0x8e1ff0):_0x4aecc0>0x3?_0x36789b(_0x5b9904,_0x5cabfe,_0x8e1ff0):_0x36789b(_0x5b9904,_0x5cabfe))||_0x8e1ff0;}return _0x4aecc0>0x3&&_0x8e1ff0&&Object['defineProperty'](_0x5b9904,_0x5cabfe,_0x8e1ff0),_0x8e1ff0;},__metadata=this&&this[a263_0x5db77b(0x14a)]||function(_0x5bdc0c,_0x1cc1a3){const _0x1e7cfb=a263_0x5db77b;if(typeof Reflect===_0x1e7cfb(0x13c)&&typeof Reflect[_0x1e7cfb(0x168)]===_0x1e7cfb(0x152))return Reflect[_0x1e7cfb(0x168)](_0x5bdc0c,_0x1cc1a3);};Object['defineProperty'](exports,a263_0x5db77b(0x183),{'value':!![]}),exports[a263_0x5db77b(0x148)]=void 0x0;function a263_0x5ddd(_0x5b32a3,_0x53293b){const _0x8f9074=a263_0x5275();return a263_0x5ddd=function(_0xd442a8,_0x1cb377){_0xd442a8=_0xd442a8-0x139;let _0x527577=_0x8f9074[_0xd442a8];return _0x527577;},a263_0x5ddd(_0x5b32a3,_0x53293b);}const not_found_error_1=require(a263_0x5db77b(0x13b)),typedi_1=require('typedi'),constants_1=require(a263_0x5db77b(0x15a)),queries_1=require('../queries'),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a263_0x5db77b(0x170)),salesforce_rest_service_1=require(a263_0x5db77b(0x14f));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x2bb6f7,_0x4c536d){const _0x4878e8=a263_0x5db77b;this['queryService']=_0x2bb6f7,this[_0x4878e8(0x158)]=_0x4c536d,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a263_0x5db77b(0x13a)](_0x5d1ee7){const _0x24efda=a263_0x5db77b,_0x158de4=(0x0,flosum_naming_utils_1[_0x24efda(0x163)])(_0x5d1ee7,[_0x24efda(0x17f),_0x24efda(0x162),_0x24efda(0x150),_0x24efda(0x159),_0x24efda(0x164),'Id']);return{'id':_0x158de4['Id'],'name':_0x158de4['Component_Name__c'],'type':_0x158de4['Component_Type__c'],'fileName':_0x158de4[_0x24efda(0x159)],'crc32':_0x158de4[_0x24efda(0x150)],'version':+_0x158de4[_0x24efda(0x164)]};}async['getRepositoryIdByName'](_0x5c608){const _0x39d40a=a263_0x5db77b,[_0x4c64d8]=await this['queryService'][_0x39d40a(0x14e)](queries_1['GET_REPOSITORY_BY_NAME_QUERY']['replace'](_0x39d40a(0x15e),_0x5c608));if(!_0x4c64d8)throw new not_found_error_1[(_0x39d40a(0x16f))]('Repository\x20\x22'+_0x5c608+_0x39d40a(0x174));return _0x4c64d8['Id'];}async['getBranchIdByName'](_0x383246){const _0x23a004=a263_0x5db77b,[_0x42d9c2]=await this[_0x23a004(0x180)][_0x23a004(0x14e)](queries_1['GET_BRANCH_BY_NAME_QUERY']['replace'](_0x23a004(0x15e),_0x383246));if(!_0x42d9c2)throw new not_found_error_1[(_0x23a004(0x16f))]('Branch\x20\x22'+_0x383246+'\x22\x20not\x20found\x20in\x20flosum.');return _0x42d9c2['Id'];}async[a263_0x5db77b(0x15d)](){const _0x370d12=a263_0x5db77b,_0x516316=await this[_0x370d12(0x180)][_0x370d12(0x14e)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x516316['map'](_0x47f3fd=>(0x0,flosum_naming_utils_1[_0x370d12(0x163)])(_0x47f3fd,['Id',_0x370d12(0x16d)]))[_0x370d12(0x143)](_0x10081f=>({'id':_0x10081f['Id'],'name':_0x10081f[_0x370d12(0x16d)]}));}async[a263_0x5db77b(0x17a)](_0x23f286,_0x21b63a){const _0x3ba8e6=a263_0x5db77b,_0x11ef03=[];while(_0x23f286[_0x3ba8e6(0x15b)]){const _0x1ba4b2=queries_1[_0x3ba8e6(0x140)][_0x3ba8e6(0x155)]('%fileNames%',_0x23f286[_0x3ba8e6(0x160)](0x0,this[_0x3ba8e6(0x16b)])[_0x3ba8e6(0x143)](_0x4ab66f=>'\x27'+_0x4ab66f+'\x27')[_0x3ba8e6(0x173)](','))[_0x3ba8e6(0x155)](_0x3ba8e6(0x178),_0x21b63a),_0xba0456=await this[_0x3ba8e6(0x180)][_0x3ba8e6(0x14e)](_0x1ba4b2);_0x11ef03[_0x3ba8e6(0x16c)](..._0xba0456);}return _0x11ef03[_0x3ba8e6(0x143)](_0x47fee9=>this[_0x3ba8e6(0x13a)](_0x47fee9));}async['fetchBranchComponentsByFilenames'](_0x1c2672,_0x1ed590){const _0x1f8f5c=a263_0x5db77b,_0x2848d6=[];while(_0x1c2672['length']){const _0x4033be=queries_1[_0x1f8f5c(0x181)][_0x1f8f5c(0x155)](_0x1f8f5c(0x141),_0x1c2672[_0x1f8f5c(0x160)](0x0,this[_0x1f8f5c(0x16b)])[_0x1f8f5c(0x143)](_0x4cdca2=>'\x27'+_0x4cdca2+'\x27')['join'](','))[_0x1f8f5c(0x155)](_0x1f8f5c(0x154),_0x1ed590),_0x420dde=await this['queryService'][_0x1f8f5c(0x14e)](_0x4033be);_0x2848d6['push'](..._0x420dde);}return _0x2848d6['map'](_0x555798=>this['extractComponentMetadataFromRecord'](_0x555798));}async['fetchRepositoryComponents'](_0x41c04b){const _0xab4dac=a263_0x5db77b,_0x58b703=queries_1[_0xab4dac(0x169)]['replace'](_0xab4dac(0x178),_0x41c04b),_0x2cdb1a=await this[_0xab4dac(0x180)][_0xab4dac(0x14e)](_0x58b703);return _0x2cdb1a['map'](_0x79c7b5=>this[_0xab4dac(0x13a)](_0x79c7b5));}async[a263_0x5db77b(0x171)](_0x5088a2){const _0xbdaea1=a263_0x5db77b,_0x3fa73a=queries_1[_0xbdaea1(0x149)][_0xbdaea1(0x155)]('%branchId%',_0x5088a2),_0x3575a6=await this[_0xbdaea1(0x180)][_0xbdaea1(0x14e)](_0x3fa73a);return _0x3575a6['map'](_0x35a1fa=>this['extractComponentMetadataFromRecord'](_0x35a1fa));}async[a263_0x5db77b(0x146)](_0x21ea77){const _0x3f6d3e=a263_0x5db77b,_0xea975f=[..._0x21ea77],_0x4add7e=[];while(_0xea975f['length']){const _0x1b35c5=queries_1[_0x3f6d3e(0x15c)][_0x3f6d3e(0x155)](_0x3f6d3e(0x14d),_0xea975f[_0x3f6d3e(0x160)](0x0,this[_0x3f6d3e(0x16b)])[_0x3f6d3e(0x143)](_0x2f34a9=>'\x27'+_0x2f34a9+'\x27')[_0x3f6d3e(0x173)](',')),_0x491066=await this[_0x3f6d3e(0x180)][_0x3f6d3e(0x14e)](_0x1b35c5);_0x4add7e[_0x3f6d3e(0x16c)](..._0x491066[_0x3f6d3e(0x143)](_0x3d5e90=>_0x3d5e90['Id']));}return _0x4add7e;}async[a263_0x5db77b(0x153)](_0x47f2bc,_0x50fa3e){const _0x5c0f2e=a263_0x5db77b;return this[_0x5c0f2e(0x158)][_0x5c0f2e(0x17b)](constants_1[_0x5c0f2e(0x13f)],{[constants_1[_0x5c0f2e(0x144)]+_0x5c0f2e(0x184)]:_0x50fa3e,[constants_1[_0x5c0f2e(0x144)]+_0x5c0f2e(0x167)]:_0x47f2bc[_0x5c0f2e(0x17e)](0x0,0xff),[constants_1[_0x5c0f2e(0x144)]+'Status__c']:_0x5c0f2e(0x15f),[constants_1[_0x5c0f2e(0x156)]+_0x5c0f2e(0x165)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata(a263_0x5db77b(0x177),[salesforce_query_service_1[a263_0x5db77b(0x161)],salesforce_rest_service_1[a263_0x5db77b(0x139)]])],SalesforceGitSyncService),exports[a263_0x5db77b(0x148)]=SalesforceGitSyncService;function a263_0x5275(){const _0x1b088b=['Completed','splice','SalesforceQueryService','Component_Type__c','extractFieldsFromRecord','Version__c','Is_From_Agent__c','878971JqAeJi','Commit_Name__c','metadata','GET_REPOSITORY_COMPONENTS_QUERY','toString','MAX_QUERY_ARRAY_ITEMS','push','Name','apply','NotFoundError','./salesforce-query.service','fetchBranchComponents','decorate','join','\x22\x20not\x20found\x20in\x20flosum.','__decorate','112ZLaLIP','design:paramtypes','%repositoryId%','927zazBjr','fetchRepositoryComponentsByFilenames','post','6mIPlmT','search','substr','Component_Name__c','queryService','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','40ONQwfC','__esModule','Repository__c','SalesforceRestService','extractComponentMetadataFromRecord','../../../../core/errors/not-found.error','object','13371PESyik','1421125aYKXsS','FLOSUM_COMMIT','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','%fileNames%','708lhzpRk','map','FLOSUM_NAMESPACE','1674694bFvllF','fetchCommitManifestsByComponentIds','65020fmRaJB','SalesforceGitSyncService','GET_BRANCH_COMPONENTS_QUERY','__metadata','(((.+)+)+)+$','287147WxSiyn','%componentIds%','query','./salesforce-rest.service','CRC32__c','getOwnPropertyDescriptor','function','createCommit','%branchId%','replace','FLOSUM_GIT_NAMESPACE','208109nhrCxz','restService','File_Name__c','../../../../constants','length','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','getComponentRecordTypes','%name%'];a263_0x5275=function(){return _0x1b088b;};return a263_0x5275();}