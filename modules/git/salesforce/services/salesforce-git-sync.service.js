const a231_0x15ca58=a231_0x1819;(function(_0x52dde0,_0x368bd7){const _0x1fbdab=a231_0x1819,_0x2de74c=_0x52dde0();while(!![]){try{const _0x19b0f3=parseInt(_0x1fbdab(0xd4))/0x1+parseInt(_0x1fbdab(0xd7))/0x2+parseInt(_0x1fbdab(0xd5))/0x3*(-parseInt(_0x1fbdab(0xf8))/0x4)+parseInt(_0x1fbdab(0xda))/0x5*(parseInt(_0x1fbdab(0xd6))/0x6)+-parseInt(_0x1fbdab(0xde))/0x7+parseInt(_0x1fbdab(0xd2))/0x8*(parseInt(_0x1fbdab(0xf7))/0x9)+-parseInt(_0x1fbdab(0xee))/0xa*(parseInt(_0x1fbdab(0xfb))/0xb);if(_0x19b0f3===_0x368bd7)break;else _0x2de74c['push'](_0x2de74c['shift']());}catch(_0x20f737){_0x2de74c['push'](_0x2de74c['shift']());}}}(a231_0x164f,0x1e5b5));const a231_0x241a68=(function(){let _0x27e55e=!![];return function(_0x1430cc,_0x2ab70d){const _0x2ea897=_0x27e55e?function(){const _0x33c271=a231_0x1819;if(_0x2ab70d){const _0xa599d4=_0x2ab70d[_0x33c271(0xcd)](_0x1430cc,arguments);return _0x2ab70d=null,_0xa599d4;}}:function(){};return _0x27e55e=![],_0x2ea897;};}()),a231_0x1a7eaf=a231_0x241a68(this,function(){const _0x435a32=a231_0x1819;return a231_0x1a7eaf[_0x435a32(0x10b)]()[_0x435a32(0xfe)](_0x435a32(0x108))[_0x435a32(0x10b)]()[_0x435a32(0x114)](a231_0x1a7eaf)[_0x435a32(0xfe)]('(((.+)+)+)+$');});a231_0x1a7eaf();'use strict';var __decorate=this&&this[a231_0x15ca58(0xec)]||function(_0x5e88a5,_0x4cc774,_0x339309,_0x50279b){const _0x56d48d=a231_0x15ca58;var _0x29b0f6=arguments[_0x56d48d(0x100)],_0x345752=_0x29b0f6<0x3?_0x4cc774:_0x50279b===null?_0x50279b=Object['getOwnPropertyDescriptor'](_0x4cc774,_0x339309):_0x50279b,_0xefb8c6;if(typeof Reflect===_0x56d48d(0x112)&&typeof Reflect[_0x56d48d(0x109)]==='function')_0x345752=Reflect['decorate'](_0x5e88a5,_0x4cc774,_0x339309,_0x50279b);else{for(var _0x1a1e40=_0x5e88a5[_0x56d48d(0x100)]-0x1;_0x1a1e40>=0x0;_0x1a1e40--)if(_0xefb8c6=_0x5e88a5[_0x1a1e40])_0x345752=(_0x29b0f6<0x3?_0xefb8c6(_0x345752):_0x29b0f6>0x3?_0xefb8c6(_0x4cc774,_0x339309,_0x345752):_0xefb8c6(_0x4cc774,_0x339309))||_0x345752;}return _0x29b0f6>0x3&&_0x345752&&Object[_0x56d48d(0x10e)](_0x4cc774,_0x339309,_0x345752),_0x345752;},__metadata=this&&this[a231_0x15ca58(0xe9)]||function(_0xf43790,_0x5a77ef){const _0x3e651e=a231_0x15ca58;if(typeof Reflect==='object'&&typeof Reflect[_0x3e651e(0xd1)]===_0x3e651e(0xe6))return Reflect['metadata'](_0xf43790,_0x5a77ef);};Object['defineProperty'](exports,a231_0x15ca58(0xe0),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;function a231_0x1819(_0x4ff87f,_0x346684){const _0x2f11c2=a231_0x164f();return a231_0x1819=function(_0x1a7eaf,_0x241a68){_0x1a7eaf=_0x1a7eaf-0xca;let _0x164fe1=_0x2f11c2[_0x1a7eaf];return _0x164fe1;},a231_0x1819(_0x4ff87f,_0x346684);}const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a231_0x15ca58(0xe4)),constants_1=require('../../../../constants'),queries_1=require(a231_0x15ca58(0xfc)),flosum_naming_utils_1=require(a231_0x15ca58(0xff)),salesforce_query_service_1=require(a231_0x15ca58(0xe1)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1f847f,_0x3476b8){const _0x2061be=a231_0x15ca58;this[_0x2061be(0xdb)]=_0x1f847f,this[_0x2061be(0xd0)]=_0x3476b8,this[_0x2061be(0x111)]=0xc8;}[a231_0x15ca58(0xd9)](_0x238ba7){const _0x351418=a231_0x15ca58,_0x44a473=(0x0,flosum_naming_utils_1[_0x351418(0xca)])(_0x238ba7,[_0x351418(0xd3),_0x351418(0xe7),_0x351418(0x10f),'File_Name__c','Version__c','Id']);return{'id':_0x44a473['Id'],'name':_0x44a473['Component_Name__c'],'type':_0x44a473['Component_Type__c'],'fileName':_0x44a473['File_Name__c'],'crc32':_0x44a473['CRC32__c'],'version':+_0x44a473['Version__c']};}async['getRepositoryIdByName'](_0x507d88){const _0x3389d5=a231_0x15ca58,[_0x84b1ae]=await this['queryService'][_0x3389d5(0xf1)](queries_1[_0x3389d5(0xd8)]['replace'](_0x3389d5(0x106),_0x507d88));if(!_0x84b1ae)throw new not_found_error_1[(_0x3389d5(0xdd))](_0x3389d5(0xcc)+_0x507d88+_0x3389d5(0x103));return _0x84b1ae['Id'];}async['getBranchIdByName'](_0x2d876b){const _0x23c6ce=a231_0x15ca58,[_0x296efe]=await this[_0x23c6ce(0xdb)][_0x23c6ce(0xf1)](queries_1[_0x23c6ce(0xed)]['replace'](_0x23c6ce(0x106),_0x2d876b));if(!_0x296efe)throw new not_found_error_1[(_0x23c6ce(0xdd))](_0x23c6ce(0xdf)+_0x2d876b+'\x22\x20not\x20found\x20in\x20flosum.');return _0x296efe['Id'];}async[a231_0x15ca58(0x10d)](){const _0x9fb76f=a231_0x15ca58,_0x414b3c=await this['queryService'][_0x9fb76f(0xf1)](queries_1[_0x9fb76f(0xfa)]);return _0x414b3c['map'](_0x173e22=>(0x0,flosum_naming_utils_1[_0x9fb76f(0xca)])(_0x173e22,['Id',_0x9fb76f(0xf9)]))['map'](_0xfc1a54=>({'id':_0xfc1a54['Id'],'name':_0xfc1a54[_0x9fb76f(0xf9)]}));}async[a231_0x15ca58(0xdc)](_0x269f26,_0x35356c){const _0x458d37=a231_0x15ca58,_0xa7b3ff=[];while(_0x269f26[_0x458d37(0x100)]){const _0x5572d9=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x458d37(0xcb)](_0x458d37(0x107),_0x269f26[_0x458d37(0xf0)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x458d37(0x116)](_0x4e043e=>'\x27'+_0x4e043e+'\x27')['join'](','))[_0x458d37(0xcb)](_0x458d37(0xce),_0x35356c),_0x39a91f=await this[_0x458d37(0xdb)]['query'](_0x5572d9);_0xa7b3ff[_0x458d37(0x110)](..._0x39a91f);}return _0xa7b3ff[_0x458d37(0x116)](_0x24efb6=>this[_0x458d37(0xd9)](_0x24efb6));}async[a231_0x15ca58(0x113)](_0x41b66c,_0x2f2641){const _0x3565e6=a231_0x15ca58,_0x9d62ee=[];while(_0x41b66c[_0x3565e6(0x100)]){const _0x507d61=queries_1[_0x3565e6(0x105)]['replace'](_0x3565e6(0x107),_0x41b66c['splice'](0x0,this[_0x3565e6(0x111)])[_0x3565e6(0x116)](_0x19cc68=>'\x27'+_0x19cc68+'\x27')[_0x3565e6(0xea)](','))['replace'](_0x3565e6(0xe3),_0x2f2641),_0x517579=await this[_0x3565e6(0xdb)]['query'](_0x507d61);_0x9d62ee[_0x3565e6(0x110)](..._0x517579);}return _0x9d62ee['map'](_0x41a7f3=>this[_0x3565e6(0xd9)](_0x41a7f3));}async[a231_0x15ca58(0x101)](_0x322159){const _0xdffcd3=a231_0x15ca58,_0x4803af=queries_1[_0xdffcd3(0xcf)]['replace'](_0xdffcd3(0xce),_0x322159),_0x5b18df=await this[_0xdffcd3(0xdb)][_0xdffcd3(0xf1)](_0x4803af);return _0x5b18df[_0xdffcd3(0x116)](_0x20a6ac=>this[_0xdffcd3(0xd9)](_0x20a6ac));}async[a231_0x15ca58(0x102)](_0x551cd0){const _0x31fedd=a231_0x15ca58,_0x47eea5=queries_1[_0x31fedd(0xf2)][_0x31fedd(0xcb)](_0x31fedd(0xe3),_0x551cd0),_0x107a8a=await this[_0x31fedd(0xdb)][_0x31fedd(0xf1)](_0x47eea5);return _0x107a8a['map'](_0x4e6dc4=>this['extractComponentMetadataFromRecord'](_0x4e6dc4));}async['fetchCommitManifestsByComponentIds'](_0x384419){const _0x292831=a231_0x15ca58,_0xd502d9=[..._0x384419],_0x5417c5=[];while(_0xd502d9[_0x292831(0x100)]){const _0x26bde9=queries_1[_0x292831(0xfd)][_0x292831(0xcb)](_0x292831(0x10c),_0xd502d9[_0x292831(0xf0)](0x0,this[_0x292831(0x111)])[_0x292831(0x116)](_0x4081b1=>'\x27'+_0x4081b1+'\x27')[_0x292831(0xea)](',')),_0x36bce3=await this[_0x292831(0xdb)][_0x292831(0xf1)](_0x26bde9);_0x5417c5['push'](..._0x36bce3['map'](_0x194656=>_0x194656['Id']));}return _0x5417c5;}async['createCommit'](_0x4b7458,_0x3ca54c){const _0x56a34a=a231_0x15ca58;return this['restService'][_0x56a34a(0xeb)](constants_1[_0x56a34a(0xe5)],{[constants_1[_0x56a34a(0x10a)]+_0x56a34a(0xef)]:_0x3ca54c,[constants_1['FLOSUM_NAMESPACE']+_0x56a34a(0xf4)]:_0x4b7458[_0x56a34a(0xf5)](0x0,0xff),[constants_1[_0x56a34a(0x10a)]+'Status__c']:'Completed',[constants_1[_0x56a34a(0x115)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a231_0x15ca58(0xf3)])(),__metadata(a231_0x15ca58(0xf6),[salesforce_query_service_1[a231_0x15ca58(0x104)],salesforce_rest_service_1[a231_0x15ca58(0xe8)]])],SalesforceGitSyncService),exports[a231_0x15ca58(0xe2)]=SalesforceGitSyncService;function a231_0x164f(){const _0x1a019b=['apply','%repositoryId%','GET_REPOSITORY_COMPONENTS_QUERY','restService','metadata','689864YfQVAY','Component_Name__c','136422IVzJvg','49719XtjHhu','6LGfdAz','268668FzZtnH','GET_REPOSITORY_BY_NAME_QUERY','extractComponentMetadataFromRecord','369235chSViV','queryService','fetchRepositoryComponentsByFilenames','NotFoundError','1731597mLoswt','Branch\x20\x22','__esModule','./salesforce-query.service','SalesforceGitSyncService','%branchId%','typedi','FLOSUM_COMMIT','function','Component_Type__c','SalesforceRestService','__metadata','join','post','__decorate','GET_BRANCH_BY_NAME_QUERY','10OoprVi','Repository__c','splice','query','GET_BRANCH_COMPONENTS_QUERY','Service','Commit_Name__c','substr','design:paramtypes','18RRPcQM','20wapTPH','Name','GET_COMPONENT_RECORD_TYPES_QUERY','687412zmYrlA','../queries','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','search','../utils/flosum-naming.utils','length','fetchRepositoryComponents','fetchBranchComponents','\x22\x20not\x20found\x20in\x20flosum.','SalesforceQueryService','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','%name%','%fileNames%','(((.+)+)+)+$','decorate','FLOSUM_NAMESPACE','toString','%componentIds%','getComponentRecordTypes','defineProperty','CRC32__c','push','MAX_QUERY_ARRAY_ITEMS','object','fetchBranchComponentsByFilenames','constructor','FLOSUM_GIT_NAMESPACE','map','extractFieldsFromRecord','replace','Repository\x20\x22'];a231_0x164f=function(){return _0x1a019b;};return a231_0x164f();}