const a231_0x54a32a=a231_0x3e7e;(function(_0x2fc720,_0xf53051){const _0x132efd=a231_0x3e7e,_0x4a0aa6=_0x2fc720();while(!![]){try{const _0x4c04d9=parseInt(_0x132efd(0x1fc))/0x1+-parseInt(_0x132efd(0x21b))/0x2*(-parseInt(_0x132efd(0x227))/0x3)+parseInt(_0x132efd(0x1f3))/0x4*(-parseInt(_0x132efd(0x22e))/0x5)+parseInt(_0x132efd(0x209))/0x6+parseInt(_0x132efd(0x201))/0x7+parseInt(_0x132efd(0x22c))/0x8*(parseInt(_0x132efd(0x20d))/0x9)+-parseInt(_0x132efd(0x216))/0xa;if(_0x4c04d9===_0xf53051)break;else _0x4a0aa6['push'](_0x4a0aa6['shift']());}catch(_0xb2a31a){_0x4a0aa6['push'](_0x4a0aa6['shift']());}}}(a231_0x56d9,0xc453a));function a231_0x3e7e(_0x1dfe30,_0x5375db){const _0x58f0e5=a231_0x56d9();return a231_0x3e7e=function(_0x483071,_0x55c49f){_0x483071=_0x483071-0x1f0;let _0x56d906=_0x58f0e5[_0x483071];return _0x56d906;},a231_0x3e7e(_0x1dfe30,_0x5375db);}function a231_0x56d9(){const _0x1a6bc6=['2543526DmaxXH','substr','FLOSUM_COMMIT','typedi','27gudZwl','object','defineProperty','SalesforceGitSyncService','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','FLOSUM_NAMESPACE','extractComponentMetadataFromRecord','Name','createCommit','7916030clhZRK','MAX_QUERY_ARRAY_ITEMS','fetchRepositoryComponents','GET_REPOSITORY_COMPONENTS_QUERY','Branch\x20\x22','8634ohzkce','fetchBranchComponents','%name%','__esModule','design:paramtypes','map','%branchId%','(((.+)+)+)+$','query','extractFieldsFromRecord','Status__c','%fileNames%','183EhYjYP','../../../../core/errors/not-found.error','push','GET_BRANCH_BY_NAME_QUERY','%componentIds%','2214592TIgrfb','Commit_Name__c','5NDvJVK','length','restService','getBranchIdByName','Component_Type__c','queryService','apply','SalesforceRestService','Completed','CRC32__c','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','GET_BRANCH_COMPONENTS_QUERY','constructor','Repository__c','5185352tDNxQa','FLOSUM_GIT_NAMESPACE','metadata','File_Name__c','Repository\x20\x22','post','%repositoryId%','join','./salesforce-rest.service','382272aYCqYf','decorate','../queries','toString','GET_REPOSITORY_BY_NAME_QUERY','6944651tWdSDZ','\x22\x20not\x20found\x20in\x20flosum.','fetchCommitManifestsByComponentIds','replace','Version__c','splice','search','function'];a231_0x56d9=function(){return _0x1a6bc6;};return a231_0x56d9();}const a231_0x55c49f=(function(){let _0x393da3=!![];return function(_0x579e52,_0x2f98b7){const _0x4b7419=_0x393da3?function(){const _0xb6788=a231_0x3e7e;if(_0x2f98b7){const _0x271204=_0x2f98b7[_0xb6788(0x234)](_0x579e52,arguments);return _0x2f98b7=null,_0x271204;}}:function(){};return _0x393da3=![],_0x4b7419;};}()),a231_0x483071=a231_0x55c49f(this,function(){const _0x35058b=a231_0x3e7e;return a231_0x483071['toString']()['search'](_0x35058b(0x222))[_0x35058b(0x1ff)]()[_0x35058b(0x1f1)](a231_0x483071)[_0x35058b(0x207)]('(((.+)+)+)+$');});a231_0x483071();'use strict';var __decorate=this&&this['__decorate']||function(_0x563f30,_0x33b228,_0x17f579,_0x4a2ace){const _0xfecb69=a231_0x3e7e;var _0x2ca679=arguments['length'],_0x122b11=_0x2ca679<0x3?_0x33b228:_0x4a2ace===null?_0x4a2ace=Object['getOwnPropertyDescriptor'](_0x33b228,_0x17f579):_0x4a2ace,_0x4c237f;if(typeof Reflect===_0xfecb69(0x20e)&&typeof Reflect[_0xfecb69(0x1fd)]===_0xfecb69(0x208))_0x122b11=Reflect['decorate'](_0x563f30,_0x33b228,_0x17f579,_0x4a2ace);else{for(var _0x484bc0=_0x563f30[_0xfecb69(0x22f)]-0x1;_0x484bc0>=0x0;_0x484bc0--)if(_0x4c237f=_0x563f30[_0x484bc0])_0x122b11=(_0x2ca679<0x3?_0x4c237f(_0x122b11):_0x2ca679>0x3?_0x4c237f(_0x33b228,_0x17f579,_0x122b11):_0x4c237f(_0x33b228,_0x17f579))||_0x122b11;}return _0x2ca679>0x3&&_0x122b11&&Object[_0xfecb69(0x20f)](_0x33b228,_0x17f579,_0x122b11),_0x122b11;},__metadata=this&&this['__metadata']||function(_0x4c18e7,_0x47bbd8){const _0x17e43c=a231_0x3e7e;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x17e43c(0x208))return Reflect[_0x17e43c(0x1f5)](_0x4c18e7,_0x47bbd8);};Object[a231_0x54a32a(0x20f)](exports,a231_0x54a32a(0x21e),{'value':!![]}),exports[a231_0x54a32a(0x210)]=void 0x0;const not_found_error_1=require(a231_0x54a32a(0x228)),typedi_1=require(a231_0x54a32a(0x20c)),constants_1=require('../../../../constants'),queries_1=require(a231_0x54a32a(0x1fe)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a231_0x54a32a(0x1fb));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x199fc7,_0x279016){const _0x30196f=a231_0x54a32a;this[_0x30196f(0x233)]=_0x199fc7,this[_0x30196f(0x230)]=_0x279016,this[_0x30196f(0x217)]=0xc8;}[a231_0x54a32a(0x213)](_0x3e705d){const _0x5d506d=a231_0x54a32a,_0x5258cc=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x3e705d,['Component_Name__c','Component_Type__c','CRC32__c',_0x5d506d(0x1f6),'Version__c','Id']);return{'id':_0x5258cc['Id'],'name':_0x5258cc['Component_Name__c'],'type':_0x5258cc[_0x5d506d(0x232)],'fileName':_0x5258cc['File_Name__c'],'crc32':_0x5258cc[_0x5d506d(0x237)],'version':+_0x5258cc[_0x5d506d(0x205)]};}async['getRepositoryIdByName'](_0x45822a){const _0x42ef0a=a231_0x54a32a,[_0x1e42f0]=await this[_0x42ef0a(0x233)][_0x42ef0a(0x223)](queries_1[_0x42ef0a(0x200)][_0x42ef0a(0x204)](_0x42ef0a(0x21d),_0x45822a));if(!_0x1e42f0)throw new not_found_error_1['NotFoundError'](_0x42ef0a(0x1f7)+_0x45822a+_0x42ef0a(0x202));return _0x1e42f0['Id'];}async[a231_0x54a32a(0x231)](_0x5acd5c){const _0x2b5289=a231_0x54a32a,[_0x47642b]=await this[_0x2b5289(0x233)][_0x2b5289(0x223)](queries_1[_0x2b5289(0x22a)]['replace'](_0x2b5289(0x21d),_0x5acd5c));if(!_0x47642b)throw new not_found_error_1['NotFoundError'](_0x2b5289(0x21a)+_0x5acd5c+_0x2b5289(0x202));return _0x47642b['Id'];}async['getComponentRecordTypes'](){const _0x2d0e55=a231_0x54a32a,_0x46c0a8=await this[_0x2d0e55(0x233)]['query'](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x46c0a8['map'](_0x4e270c=>(0x0,flosum_naming_utils_1[_0x2d0e55(0x224)])(_0x4e270c,['Id',_0x2d0e55(0x214)]))['map'](_0x30048a=>({'id':_0x30048a['Id'],'name':_0x30048a['Name']}));}async['fetchRepositoryComponentsByFilenames'](_0x229311,_0x3ac973){const _0x4d3dc7=a231_0x54a32a,_0x2903e3=[];while(_0x229311[_0x4d3dc7(0x22f)]){const _0x1a0f03=queries_1[_0x4d3dc7(0x238)][_0x4d3dc7(0x204)](_0x4d3dc7(0x226),_0x229311[_0x4d3dc7(0x206)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x4d3dc7(0x220)](_0x55e303=>'\x27'+_0x55e303+'\x27')[_0x4d3dc7(0x1fa)](','))[_0x4d3dc7(0x204)](_0x4d3dc7(0x1f9),_0x3ac973),_0x3c6f43=await this[_0x4d3dc7(0x233)][_0x4d3dc7(0x223)](_0x1a0f03);_0x2903e3['push'](..._0x3c6f43);}return _0x2903e3[_0x4d3dc7(0x220)](_0x1ac9c6=>this[_0x4d3dc7(0x213)](_0x1ac9c6));}async['fetchBranchComponentsByFilenames'](_0x20d039,_0x1b3b66){const _0x13685b=a231_0x54a32a,_0x30514a=[];while(_0x20d039[_0x13685b(0x22f)]){const _0xed0ed0=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x13685b(0x204)](_0x13685b(0x226),_0x20d039[_0x13685b(0x206)](0x0,this[_0x13685b(0x217)])[_0x13685b(0x220)](_0xef4c07=>'\x27'+_0xef4c07+'\x27')[_0x13685b(0x1fa)](','))['replace'](_0x13685b(0x221),_0x1b3b66),_0xfc892a=await this[_0x13685b(0x233)]['query'](_0xed0ed0);_0x30514a[_0x13685b(0x229)](..._0xfc892a);}return _0x30514a['map'](_0x4ea302=>this[_0x13685b(0x213)](_0x4ea302));}async[a231_0x54a32a(0x218)](_0x55f8ff){const _0x59a185=a231_0x54a32a,_0x5b5447=queries_1[_0x59a185(0x219)][_0x59a185(0x204)](_0x59a185(0x1f9),_0x55f8ff),_0x44746f=await this[_0x59a185(0x233)][_0x59a185(0x223)](_0x5b5447);return _0x44746f[_0x59a185(0x220)](_0x4cb9f2=>this[_0x59a185(0x213)](_0x4cb9f2));}async[a231_0x54a32a(0x21c)](_0x14bc0c){const _0x4fc9cb=a231_0x54a32a,_0x283548=queries_1[_0x4fc9cb(0x1f0)]['replace'](_0x4fc9cb(0x221),_0x14bc0c),_0x2a9e6b=await this[_0x4fc9cb(0x233)][_0x4fc9cb(0x223)](_0x283548);return _0x2a9e6b['map'](_0x2c1f5e=>this[_0x4fc9cb(0x213)](_0x2c1f5e));}async[a231_0x54a32a(0x203)](_0x1c56a9){const _0x320e6a=a231_0x54a32a,_0x40ffdd=[..._0x1c56a9],_0x3887eb=[];while(_0x40ffdd[_0x320e6a(0x22f)]){const _0x41f175=queries_1[_0x320e6a(0x211)][_0x320e6a(0x204)](_0x320e6a(0x22b),_0x40ffdd[_0x320e6a(0x206)](0x0,this[_0x320e6a(0x217)])[_0x320e6a(0x220)](_0x2b2917=>'\x27'+_0x2b2917+'\x27')[_0x320e6a(0x1fa)](',')),_0x1a38d6=await this[_0x320e6a(0x233)][_0x320e6a(0x223)](_0x41f175);_0x3887eb[_0x320e6a(0x229)](..._0x1a38d6[_0x320e6a(0x220)](_0x45d238=>_0x45d238['Id']));}return _0x3887eb;}async[a231_0x54a32a(0x215)](_0x179ea5,_0x375c7b){const _0x2a6fe8=a231_0x54a32a;return this['restService'][_0x2a6fe8(0x1f8)](constants_1[_0x2a6fe8(0x20b)],{[constants_1[_0x2a6fe8(0x212)]+_0x2a6fe8(0x1f2)]:_0x375c7b,[constants_1[_0x2a6fe8(0x212)]+_0x2a6fe8(0x22d)]:_0x179ea5[_0x2a6fe8(0x20a)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x2a6fe8(0x225)]:_0x2a6fe8(0x236),[constants_1[_0x2a6fe8(0x1f4)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata(a231_0x54a32a(0x21f),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a231_0x54a32a(0x235)]])],SalesforceGitSyncService),exports[a231_0x54a32a(0x210)]=SalesforceGitSyncService;