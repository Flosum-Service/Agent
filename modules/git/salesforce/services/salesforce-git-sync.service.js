const a197_0x2300bd=a197_0x4119;(function(_0x587a45,_0x4eee7d){const _0x593263=a197_0x4119,_0xef07b3=_0x587a45();while(!![]){try{const _0x364f65=parseInt(_0x593263(0xa8))/0x1+-parseInt(_0x593263(0x8c))/0x2+parseInt(_0x593263(0xb2))/0x3*(-parseInt(_0x593263(0x85))/0x4)+parseInt(_0x593263(0x99))/0x5*(parseInt(_0x593263(0x84))/0x6)+parseInt(_0x593263(0x76))/0x7*(parseInt(_0x593263(0xa5))/0x8)+parseInt(_0x593263(0x96))/0x9*(parseInt(_0x593263(0xa2))/0xa)+-parseInt(_0x593263(0x86))/0xb;if(_0x364f65===_0x4eee7d)break;else _0xef07b3['push'](_0xef07b3['shift']());}catch(_0x51c4bf){_0xef07b3['push'](_0xef07b3['shift']());}}}(a197_0x3666,0xb66b9));const a197_0x6c77c4=(function(){let _0x2ecc8a=!![];return function(_0x3e5fbb,_0x7566d1){const _0x4b5e4d=_0x2ecc8a?function(){const _0x276570=a197_0x4119;if(_0x7566d1){const _0x3b170d=_0x7566d1[_0x276570(0x80)](_0x3e5fbb,arguments);return _0x7566d1=null,_0x3b170d;}}:function(){};return _0x2ecc8a=![],_0x4b5e4d;};}()),a197_0x13f144=a197_0x6c77c4(this,function(){const _0x125144=a197_0x4119;return a197_0x13f144[_0x125144(0x98)]()['search'](_0x125144(0x78))[_0x125144(0x98)]()[_0x125144(0x97)](a197_0x13f144)['search'](_0x125144(0x78));});a197_0x13f144();'use strict';var __decorate=this&&this[a197_0x2300bd(0xa7)]||function(_0x1c1c41,_0x3089b2,_0x213eb9,_0x10fba5){const _0x56fe4c=a197_0x2300bd;var _0x4754ba=arguments[_0x56fe4c(0xb5)],_0x4b1e8f=_0x4754ba<0x3?_0x3089b2:_0x10fba5===null?_0x10fba5=Object['getOwnPropertyDescriptor'](_0x3089b2,_0x213eb9):_0x10fba5,_0x2ff301;if(typeof Reflect===_0x56fe4c(0x8a)&&typeof Reflect['decorate']===_0x56fe4c(0x7a))_0x4b1e8f=Reflect['decorate'](_0x1c1c41,_0x3089b2,_0x213eb9,_0x10fba5);else{for(var _0x541123=_0x1c1c41[_0x56fe4c(0xb5)]-0x1;_0x541123>=0x0;_0x541123--)if(_0x2ff301=_0x1c1c41[_0x541123])_0x4b1e8f=(_0x4754ba<0x3?_0x2ff301(_0x4b1e8f):_0x4754ba>0x3?_0x2ff301(_0x3089b2,_0x213eb9,_0x4b1e8f):_0x2ff301(_0x3089b2,_0x213eb9))||_0x4b1e8f;}return _0x4754ba>0x3&&_0x4b1e8f&&Object[_0x56fe4c(0x9c)](_0x3089b2,_0x213eb9,_0x4b1e8f),_0x4b1e8f;},__metadata=this&&this[a197_0x2300bd(0xbc)]||function(_0x66856a,_0x3de9cc){const _0x24ec33=a197_0x2300bd;if(typeof Reflect==='object'&&typeof Reflect[_0x24ec33(0xb7)]===_0x24ec33(0x7a))return Reflect[_0x24ec33(0xb7)](_0x66856a,_0x3de9cc);};Object['defineProperty'](exports,a197_0x2300bd(0xb8),{'value':!![]}),exports[a197_0x2300bd(0x93)]=void 0x0;function a197_0x4119(_0x4aa3b8,_0x4be436){const _0x5af907=a197_0x3666();return a197_0x4119=function(_0x13f144,_0x6c77c4){_0x13f144=_0x13f144-0x76;let _0x3666e4=_0x5af907[_0x13f144];return _0x3666e4;},a197_0x4119(_0x4aa3b8,_0x4be436);}const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a197_0x2300bd(0x8e)),constants_1=require(a197_0x2300bd(0x7f)),queries_1=require(a197_0x2300bd(0xa1)),flosum_naming_utils_1=require(a197_0x2300bd(0xb4)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a197_0x2300bd(0x8f));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x417c00,_0x18056b){const _0x5e633f=a197_0x2300bd;this[_0x5e633f(0xae)]=_0x417c00,this['restService']=_0x18056b,this[_0x5e633f(0xb9)]=0xc8;}[a197_0x2300bd(0x79)](_0x4fca15){const _0x34ebfa=a197_0x2300bd,_0x30ad82=(0x0,flosum_naming_utils_1[_0x34ebfa(0x95)])(_0x4fca15,['Component_Name__c',_0x34ebfa(0x89),_0x34ebfa(0x83),_0x34ebfa(0x9d),_0x34ebfa(0xa9),'Id']);return{'id':_0x30ad82['Id'],'name':_0x30ad82[_0x34ebfa(0xc0)],'type':_0x30ad82[_0x34ebfa(0x89)],'fileName':_0x30ad82['File_Name__c'],'crc32':_0x30ad82[_0x34ebfa(0x83)],'version':+_0x30ad82[_0x34ebfa(0xa9)]};}async[a197_0x2300bd(0x9a)](_0x514316){const _0x190132=a197_0x2300bd,[_0x24c2d3]=await this['queryService'][_0x190132(0xaa)](queries_1[_0x190132(0x9b)][_0x190132(0x9e)](_0x190132(0x82),_0x514316));if(!_0x24c2d3)throw new not_found_error_1[(_0x190132(0xb0))]('Repository\x20\x22'+_0x514316+_0x190132(0x81));return _0x24c2d3['Id'];}async[a197_0x2300bd(0x8b)](_0x328661){const _0x1d14b8=a197_0x2300bd,[_0x1cd2ba]=await this[_0x1d14b8(0xae)][_0x1d14b8(0xaa)](queries_1[_0x1d14b8(0x7d)][_0x1d14b8(0x9e)](_0x1d14b8(0x82),_0x328661));if(!_0x1cd2ba)throw new not_found_error_1[(_0x1d14b8(0xb0))]('Branch\x20\x22'+_0x328661+_0x1d14b8(0x81));return _0x1cd2ba['Id'];}async['getComponentRecordTypes'](){const _0x40a38f=a197_0x2300bd,_0x43ed76=await this[_0x40a38f(0xae)][_0x40a38f(0xaa)](queries_1[_0x40a38f(0xac)]);return _0x43ed76[_0x40a38f(0x88)](_0x4a1f10=>(0x0,flosum_naming_utils_1[_0x40a38f(0x95)])(_0x4a1f10,['Id',_0x40a38f(0xad)]))['map'](_0x3f554e=>({'id':_0x3f554e['Id'],'name':_0x3f554e['Name']}));}async[a197_0x2300bd(0xbb)](_0x471707,_0x4f2f94){const _0x5d3407=a197_0x2300bd,_0x231986=[];while(_0x471707[_0x5d3407(0xb5)]){const _0x2b6aa0=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x5d3407(0x9e)](_0x5d3407(0x77),_0x471707['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x5d3407(0x88)](_0x1a0bbc=>'\x27'+_0x1a0bbc+'\x27')[_0x5d3407(0xa0)](','))[_0x5d3407(0x9e)](_0x5d3407(0xbe),_0x4f2f94),_0x3a95bc=await this[_0x5d3407(0xae)][_0x5d3407(0xaa)](_0x2b6aa0);_0x231986[_0x5d3407(0xbf)](..._0x3a95bc);}return _0x231986[_0x5d3407(0x88)](_0x4e88c2=>this[_0x5d3407(0x79)](_0x4e88c2));}async['fetchBranchComponentsByFilenames'](_0x155fa5,_0x563590){const _0x274f10=a197_0x2300bd,_0xfc4cf=[];while(_0x155fa5[_0x274f10(0xb5)]){const _0x2001a2=queries_1[_0x274f10(0xb3)][_0x274f10(0x9e)](_0x274f10(0x77),_0x155fa5['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x274f10(0x88)](_0x4bac4b=>'\x27'+_0x4bac4b+'\x27')[_0x274f10(0xa0)](','))[_0x274f10(0x9e)]('%branchId%',_0x563590),_0x49f603=await this[_0x274f10(0xae)]['query'](_0x2001a2);_0xfc4cf[_0x274f10(0xbf)](..._0x49f603);}return _0xfc4cf[_0x274f10(0x88)](_0x2f34ed=>this[_0x274f10(0x79)](_0x2f34ed));}async['fetchRepositoryComponents'](_0x389704){const _0x2738f9=a197_0x2300bd,_0x387c40=queries_1[_0x2738f9(0x7c)][_0x2738f9(0x9e)](_0x2738f9(0xbe),_0x389704),_0x498f8d=await this[_0x2738f9(0xae)][_0x2738f9(0xaa)](_0x387c40);return _0x498f8d[_0x2738f9(0x88)](_0x2ab3c2=>this[_0x2738f9(0x79)](_0x2ab3c2));}async['fetchBranchComponents'](_0x48526f){const _0x37e9f3=a197_0x2300bd,_0x5994fd=queries_1[_0x37e9f3(0xaf)][_0x37e9f3(0x9e)]('%branchId%',_0x48526f),_0xbcb41f=await this['queryService'][_0x37e9f3(0xaa)](_0x5994fd);return _0xbcb41f['map'](_0x455209=>this[_0x37e9f3(0x79)](_0x455209));}async[a197_0x2300bd(0x7b)](_0x12ea51){const _0x4ccb4b=a197_0x2300bd,_0x7b1fe2=[..._0x12ea51],_0x2a1037=[];while(_0x7b1fe2[_0x4ccb4b(0xb5)]){const _0x1ffb57=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x4ccb4b(0x9e)](_0x4ccb4b(0x92),_0x7b1fe2[_0x4ccb4b(0x8d)](0x0,this[_0x4ccb4b(0xb9)])[_0x4ccb4b(0x88)](_0x419ba9=>'\x27'+_0x419ba9+'\x27')['join'](',')),_0x1ccfbc=await this[_0x4ccb4b(0xae)]['query'](_0x1ffb57);_0x2a1037[_0x4ccb4b(0xbf)](..._0x1ccfbc[_0x4ccb4b(0x88)](_0x1d6a51=>_0x1d6a51['Id']));}return _0x2a1037;}async[a197_0x2300bd(0xba)](_0x1df58f,_0x34c695){const _0x390363=a197_0x2300bd;return this[_0x390363(0xab)][_0x390363(0xa4)](constants_1[_0x390363(0xb1)],{[constants_1[_0x390363(0xa6)]+_0x390363(0x90)]:_0x34c695,[constants_1['FLOSUM_NAMESPACE']+'Commit_Name__c']:_0x1df58f[_0x390363(0x91)](0x0,0xff),[constants_1[_0x390363(0xa6)]+'Status__c']:_0x390363(0xb6),[constants_1[_0x390363(0x9f)]+_0x390363(0x7e)]:!![]});}};function a197_0x3666(){const _0x1c5255=['getRepositoryIdByName','GET_REPOSITORY_BY_NAME_QUERY','defineProperty','File_Name__c','replace','FLOSUM_GIT_NAMESPACE','join','../queries','17400UkYyZC','Service','post','136EyzcDp','FLOSUM_NAMESPACE','__decorate','465911FRmPst','Version__c','query','restService','GET_COMPONENT_RECORD_TYPES_QUERY','Name','queryService','GET_BRANCH_COMPONENTS_QUERY','NotFoundError','FLOSUM_COMMIT','2161605RIveqY','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','../utils/flosum-naming.utils','length','Completed','metadata','__esModule','MAX_QUERY_ARRAY_ITEMS','createCommit','fetchRepositoryComponentsByFilenames','__metadata','SalesforceRestService','%repositoryId%','push','Component_Name__c','218505GCiXFt','%fileNames%','(((.+)+)+)+$','extractComponentMetadataFromRecord','function','fetchCommitManifestsByComponentIds','GET_REPOSITORY_COMPONENTS_QUERY','GET_BRANCH_BY_NAME_QUERY','Is_From_Agent__c','../../../../constants','apply','\x22\x20not\x20found\x20in\x20flosum.','%name%','CRC32__c','1013412ZzeiQW','4TUjioE','20271867LgKCwf','design:paramtypes','map','Component_Type__c','object','getBranchIdByName','148394LOdUjk','splice','typedi','./salesforce-rest.service','Repository__c','substr','%componentIds%','SalesforceGitSyncService','SalesforceQueryService','extractFieldsFromRecord','5364iqxuLk','constructor','toString','40EVVwet'];a197_0x3666=function(){return _0x1c5255;};return a197_0x3666();}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a197_0x2300bd(0xa3)])(),__metadata(a197_0x2300bd(0x87),[salesforce_query_service_1[a197_0x2300bd(0x94)],salesforce_rest_service_1[a197_0x2300bd(0xbd)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;