const a247_0x1191ed=a247_0x4930;(function(_0x110bdc,_0xcdf409){const _0x16b666=a247_0x4930,_0x1a4191=_0x110bdc();while(!![]){try{const _0x4528b3=parseInt(_0x16b666(0x193))/0x1*(-parseInt(_0x16b666(0x16c))/0x2)+parseInt(_0x16b666(0x16f))/0x3+-parseInt(_0x16b666(0x18d))/0x4*(-parseInt(_0x16b666(0x159))/0x5)+-parseInt(_0x16b666(0x166))/0x6*(parseInt(_0x16b666(0x155))/0x7)+parseInt(_0x16b666(0x14d))/0x8+parseInt(_0x16b666(0x184))/0x9+-parseInt(_0x16b666(0x146))/0xa*(parseInt(_0x16b666(0x169))/0xb);if(_0x4528b3===_0xcdf409)break;else _0x1a4191['push'](_0x1a4191['shift']());}catch(_0xf33616){_0x1a4191['push'](_0x1a4191['shift']());}}}(a247_0x1337,0x9e090));const a247_0x3ff168=(function(){let _0xd34a2=!![];return function(_0x48c4f9,_0x1ced24){const _0x2d36ed=_0xd34a2?function(){if(_0x1ced24){const _0x5a10fc=_0x1ced24['apply'](_0x48c4f9,arguments);return _0x1ced24=null,_0x5a10fc;}}:function(){};return _0xd34a2=![],_0x2d36ed;};}()),a247_0x5c48d1=a247_0x3ff168(this,function(){const _0x52b98d=a247_0x4930;return a247_0x5c48d1[_0x52b98d(0x158)]()[_0x52b98d(0x176)]('(((.+)+)+)+$')['toString']()[_0x52b98d(0x188)](a247_0x5c48d1)[_0x52b98d(0x176)](_0x52b98d(0x17f));});a247_0x5c48d1();'use strict';var __decorate=this&&this[a247_0x1191ed(0x148)]||function(_0x95a8b6,_0x4a5838,_0x6578dc,_0x298feb){const _0x3d4d7b=a247_0x1191ed;var _0x10eb53=arguments[_0x3d4d7b(0x17c)],_0x250f0f=_0x10eb53<0x3?_0x4a5838:_0x298feb===null?_0x298feb=Object['getOwnPropertyDescriptor'](_0x4a5838,_0x6578dc):_0x298feb,_0x1edfa5;if(typeof Reflect===_0x3d4d7b(0x15b)&&typeof Reflect[_0x3d4d7b(0x18b)]===_0x3d4d7b(0x152))_0x250f0f=Reflect['decorate'](_0x95a8b6,_0x4a5838,_0x6578dc,_0x298feb);else{for(var _0x5f20db=_0x95a8b6['length']-0x1;_0x5f20db>=0x0;_0x5f20db--)if(_0x1edfa5=_0x95a8b6[_0x5f20db])_0x250f0f=(_0x10eb53<0x3?_0x1edfa5(_0x250f0f):_0x10eb53>0x3?_0x1edfa5(_0x4a5838,_0x6578dc,_0x250f0f):_0x1edfa5(_0x4a5838,_0x6578dc))||_0x250f0f;}return _0x10eb53>0x3&&_0x250f0f&&Object[_0x3d4d7b(0x154)](_0x4a5838,_0x6578dc,_0x250f0f),_0x250f0f;},__metadata=this&&this[a247_0x1191ed(0x168)]||function(_0x304957,_0x3e5e79){const _0x277972=a247_0x1191ed;if(typeof Reflect===_0x277972(0x15b)&&typeof Reflect[_0x277972(0x185)]===_0x277972(0x152))return Reflect['metadata'](_0x304957,_0x3e5e79);};Object[a247_0x1191ed(0x154)](exports,a247_0x1191ed(0x187),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a247_0x1191ed(0x156)),constants_1=require(a247_0x1191ed(0x164)),queries_1=require('../queries'),flosum_naming_utils_1=require(a247_0x1191ed(0x183)),salesforce_query_service_1=require(a247_0x1191ed(0x14f)),salesforce_rest_service_1=require(a247_0x1191ed(0x14e));function a247_0x4930(_0x54b391,_0x121892){const _0x47030c=a247_0x1337();return a247_0x4930=function(_0x5c48d1,_0x3ff168){_0x5c48d1=_0x5c48d1-0x146;let _0x1337a5=_0x47030c[_0x5c48d1];return _0x1337a5;},a247_0x4930(_0x54b391,_0x121892);}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x60f50f,_0x54c0e3){const _0x410fab=a247_0x1191ed;this[_0x410fab(0x181)]=_0x60f50f,this[_0x410fab(0x177)]=_0x54c0e3,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a247_0x1191ed(0x151)](_0x5782f7){const _0x1cc960=a247_0x1191ed,_0x3f5768=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x5782f7,['Component_Name__c',_0x1cc960(0x162),_0x1cc960(0x150),_0x1cc960(0x147),'Version__c','Id']);return{'id':_0x3f5768['Id'],'name':_0x3f5768[_0x1cc960(0x167)],'type':_0x3f5768[_0x1cc960(0x162)],'fileName':_0x3f5768['File_Name__c'],'crc32':_0x3f5768[_0x1cc960(0x150)],'version':+_0x3f5768[_0x1cc960(0x17e)]};}async[a247_0x1191ed(0x17a)](_0x3e4cd0){const _0x12bb05=a247_0x1191ed,[_0x2e307f]=await this[_0x12bb05(0x181)]['query'](queries_1[_0x12bb05(0x160)]['replace']('%name%',_0x3e4cd0));if(!_0x2e307f)throw new not_found_error_1[(_0x12bb05(0x14b))](_0x12bb05(0x165)+_0x3e4cd0+_0x12bb05(0x171));return _0x2e307f['Id'];}async[a247_0x1191ed(0x194)](_0x4f0729){const _0xfafc69=a247_0x1191ed,[_0x14f70a]=await this[_0xfafc69(0x181)]['query'](queries_1[_0xfafc69(0x15a)]['replace']('%name%',_0x4f0729));if(!_0x14f70a)throw new not_found_error_1['NotFoundError'](_0xfafc69(0x18e)+_0x4f0729+_0xfafc69(0x171));return _0x14f70a['Id'];}async[a247_0x1191ed(0x161)](){const _0x5eeab8=a247_0x1191ed,_0x35bcde=await this['queryService']['query'](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x35bcde[_0x5eeab8(0x149)](_0x546310=>(0x0,flosum_naming_utils_1[_0x5eeab8(0x157)])(_0x546310,['Id','Name']))[_0x5eeab8(0x149)](_0x4a1a0b=>({'id':_0x4a1a0b['Id'],'name':_0x4a1a0b[_0x5eeab8(0x16a)]}));}async[a247_0x1191ed(0x15f)](_0x5153d1,_0x1f2187){const _0x3f9f24=a247_0x1191ed,_0x304fff=[];while(_0x5153d1[_0x3f9f24(0x17c)]){const _0x3d7fd8=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY']['replace']('%fileNames%',_0x5153d1[_0x3f9f24(0x15c)](0x0,this[_0x3f9f24(0x173)])[_0x3f9f24(0x149)](_0x1924e2=>'\x27'+_0x1924e2+'\x27')[_0x3f9f24(0x15e)](','))[_0x3f9f24(0x178)](_0x3f9f24(0x186),_0x1f2187),_0x283d1f=await this[_0x3f9f24(0x181)][_0x3f9f24(0x153)](_0x3d7fd8);_0x304fff[_0x3f9f24(0x195)](..._0x283d1f);}return _0x304fff[_0x3f9f24(0x149)](_0x5472db=>this[_0x3f9f24(0x151)](_0x5472db));}async[a247_0x1191ed(0x17d)](_0x2364ca,_0x78c7a7){const _0x28fa63=a247_0x1191ed,_0x22e210=[];while(_0x2364ca[_0x28fa63(0x17c)]){const _0x257b29=queries_1[_0x28fa63(0x163)][_0x28fa63(0x178)](_0x28fa63(0x14a),_0x2364ca['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x28fa63(0x149)](_0x1f3e78=>'\x27'+_0x1f3e78+'\x27')[_0x28fa63(0x15e)](','))['replace'](_0x28fa63(0x170),_0x78c7a7),_0x5944b8=await this['queryService'][_0x28fa63(0x153)](_0x257b29);_0x22e210[_0x28fa63(0x195)](..._0x5944b8);}return _0x22e210[_0x28fa63(0x149)](_0x237e09=>this[_0x28fa63(0x151)](_0x237e09));}async[a247_0x1191ed(0x174)](_0x44c8a2){const _0xe3385=a247_0x1191ed,_0x41a0ec=queries_1['GET_REPOSITORY_COMPONENTS_QUERY']['replace'](_0xe3385(0x186),_0x44c8a2),_0x45d299=await this[_0xe3385(0x181)][_0xe3385(0x153)](_0x41a0ec);return _0x45d299[_0xe3385(0x149)](_0x522730=>this[_0xe3385(0x151)](_0x522730));}async[a247_0x1191ed(0x17b)](_0x2234c1){const _0x1d1a18=a247_0x1191ed,_0x72ef63=queries_1[_0x1d1a18(0x192)][_0x1d1a18(0x178)](_0x1d1a18(0x170),_0x2234c1),_0x431a1f=await this[_0x1d1a18(0x181)][_0x1d1a18(0x153)](_0x72ef63);return _0x431a1f[_0x1d1a18(0x149)](_0x5946f2=>this[_0x1d1a18(0x151)](_0x5946f2));}async[a247_0x1191ed(0x16e)](_0x57d9d1){const _0x54d1aa=a247_0x1191ed,_0x5c0db1=[..._0x57d9d1],_0x34dc27=[];while(_0x5c0db1[_0x54d1aa(0x17c)]){const _0x3a6d60=queries_1[_0x54d1aa(0x179)][_0x54d1aa(0x178)](_0x54d1aa(0x182),_0x5c0db1['splice'](0x0,this[_0x54d1aa(0x173)])['map'](_0x88251f=>'\x27'+_0x88251f+'\x27')[_0x54d1aa(0x15e)](',')),_0x182ee6=await this[_0x54d1aa(0x181)][_0x54d1aa(0x153)](_0x3a6d60);_0x34dc27['push'](..._0x182ee6[_0x54d1aa(0x149)](_0xbed1ea=>_0xbed1ea['Id']));}return _0x34dc27;}async['createCommit'](_0x54062a,_0x45504b){const _0x4b8568=a247_0x1191ed;return this[_0x4b8568(0x177)][_0x4b8568(0x190)](constants_1[_0x4b8568(0x18a)],{[constants_1[_0x4b8568(0x16d)]+_0x4b8568(0x16b)]:_0x45504b,[constants_1[_0x4b8568(0x16d)]+_0x4b8568(0x175)]:_0x54062a[_0x4b8568(0x18c)](0x0,0xff),[constants_1[_0x4b8568(0x16d)]+_0x4b8568(0x189)]:_0x4b8568(0x172),[constants_1[_0x4b8568(0x15d)]+'Is_From_Agent__c']:!![]});}};function a247_0x1337(){const _0x4dbd01=['substr','87284bCaxLC','Branch\x20\x22','Service','post','SalesforceRestService','GET_BRANCH_COMPONENTS_QUERY','252KOcKrN','getBranchIdByName','push','11411780EoEvIJ','File_Name__c','__decorate','map','%fileNames%','NotFoundError','design:paramtypes','9264664uSMVVy','./salesforce-rest.service','./salesforce-query.service','CRC32__c','extractComponentMetadataFromRecord','function','query','defineProperty','7280189dorbnH','typedi','extractFieldsFromRecord','toString','80DTlGAY','GET_BRANCH_BY_NAME_QUERY','object','splice','FLOSUM_GIT_NAMESPACE','join','fetchRepositoryComponentsByFilenames','GET_REPOSITORY_BY_NAME_QUERY','getComponentRecordTypes','Component_Type__c','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','../../../../constants','Repository\x20\x22','6KFgOsY','Component_Name__c','__metadata','11QUIlXB','Name','Repository__c','1538cThIZU','FLOSUM_NAMESPACE','fetchCommitManifestsByComponentIds','1168596aNuMZi','%branchId%','\x22\x20not\x20found\x20in\x20flosum.','Completed','MAX_QUERY_ARRAY_ITEMS','fetchRepositoryComponents','Commit_Name__c','search','restService','replace','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','getRepositoryIdByName','fetchBranchComponents','length','fetchBranchComponentsByFilenames','Version__c','(((.+)+)+)+$','SalesforceQueryService','queryService','%componentIds%','../utils/flosum-naming.utils','10129986hBcbgF','metadata','%repositoryId%','__esModule','constructor','Status__c','FLOSUM_COMMIT','decorate'];a247_0x1337=function(){return _0x4dbd01;};return a247_0x1337();}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a247_0x1191ed(0x18f)])(),__metadata(a247_0x1191ed(0x14c),[salesforce_query_service_1[a247_0x1191ed(0x180)],salesforce_rest_service_1[a247_0x1191ed(0x191)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;