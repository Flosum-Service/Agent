const a230_0x15da7c=a230_0x2ac4;(function(_0x56e7af,_0x2f4257){const _0x22ff74=a230_0x2ac4,_0x16d925=_0x56e7af();while(!![]){try{const _0x481f70=parseInt(_0x22ff74(0xb9))/0x1*(-parseInt(_0x22ff74(0xbf))/0x2)+parseInt(_0x22ff74(0x9f))/0x3+-parseInt(_0x22ff74(0xc2))/0x4*(-parseInt(_0x22ff74(0x87))/0x5)+-parseInt(_0x22ff74(0x9b))/0x6*(-parseInt(_0x22ff74(0xa5))/0x7)+-parseInt(_0x22ff74(0x9e))/0x8+-parseInt(_0x22ff74(0xb1))/0x9+parseInt(_0x22ff74(0xc6))/0xa;if(_0x481f70===_0x2f4257)break;else _0x16d925['push'](_0x16d925['shift']());}catch(_0x156005){_0x16d925['push'](_0x16d925['shift']());}}}(a230_0xa960,0xec617));const a230_0xb60103=(function(){let _0x3d0e2d=!![];return function(_0x371132,_0x554411){const _0x43ea1f=_0x3d0e2d?function(){if(_0x554411){const _0x142847=_0x554411['apply'](_0x371132,arguments);return _0x554411=null,_0x142847;}}:function(){};return _0x3d0e2d=![],_0x43ea1f;};}()),a230_0x1bc11e=a230_0xb60103(this,function(){const _0x440ff2=a230_0x2ac4;return a230_0x1bc11e[_0x440ff2(0xb7)]()[_0x440ff2(0x8e)](_0x440ff2(0xc3))[_0x440ff2(0xb7)]()[_0x440ff2(0xa1)](a230_0x1bc11e)[_0x440ff2(0x8e)](_0x440ff2(0xc3));});function a230_0xa960(){const _0x2e183a=['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','Repository__c','fetchCommitManifestsByComponentIds','fetchRepositoryComponents','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','./salesforce-rest.service','3037098vdSDeQ','Repository\x20\x22','post','12336544ENvIdO','115623QXbNeN','getBranchIdByName','constructor','__metadata','__decorate','\x22\x20not\x20found\x20in\x20flosum.','7mAnMvd','File_Name__c','../../../../constants','extractFieldsFromRecord','restService','push','CRC32__c','MAX_QUERY_ARRAY_ITEMS','../queries','FLOSUM_NAMESPACE','../utils/flosum-naming.utils','GET_COMPONENT_RECORD_TYPES_QUERY','16878276hCBZjR','Is_From_Agent__c','getOwnPropertyDescriptor','%fileNames%','SalesforceQueryService','Version__c','toString','%name%','1JpFjzB','Branch\x20\x22','function','substr','decorate','FLOSUM_GIT_NAMESPACE','223136ciGjXx','fetchBranchComponentsByFilenames','replace','1080124mbgQGh','(((.+)+)+)+$','length','defineProperty','23323050UmGxnq','createCommit','join','SalesforceGitSyncService','%componentIds%','fetchRepositoryComponentsByFilenames','Component_Name__c','queryService','extractComponentMetadataFromRecord','GET_BRANCH_COMPONENTS_QUERY','30PzdAyw','splice','map','Name','NotFoundError','Component_Type__c','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','search','%branchId%','query','../../../../core/errors/not-found.error','GET_REPOSITORY_BY_NAME_QUERY','Commit_Name__c','Completed'];a230_0xa960=function(){return _0x2e183a;};return a230_0xa960();}function a230_0x2ac4(_0x5a2bf8,_0x352a95){const _0x4ecbe9=a230_0xa960();return a230_0x2ac4=function(_0x1bc11e,_0xb60103){_0x1bc11e=_0x1bc11e-0x81;let _0xa9604a=_0x4ecbe9[_0x1bc11e];return _0xa9604a;},a230_0x2ac4(_0x5a2bf8,_0x352a95);}a230_0x1bc11e();'use strict';var __decorate=this&&this[a230_0x15da7c(0xa3)]||function(_0x2aa87f,_0x9734f8,_0xbe70dd,_0x110094){const _0x3a66ae=a230_0x15da7c;var _0x25046c=arguments['length'],_0x52f245=_0x25046c<0x3?_0x9734f8:_0x110094===null?_0x110094=Object[_0x3a66ae(0xb3)](_0x9734f8,_0xbe70dd):_0x110094,_0xf25aca;if(typeof Reflect==='object'&&typeof Reflect[_0x3a66ae(0xbd)]==='function')_0x52f245=Reflect[_0x3a66ae(0xbd)](_0x2aa87f,_0x9734f8,_0xbe70dd,_0x110094);else{for(var _0x2f7bdc=_0x2aa87f[_0x3a66ae(0xc4)]-0x1;_0x2f7bdc>=0x0;_0x2f7bdc--)if(_0xf25aca=_0x2aa87f[_0x2f7bdc])_0x52f245=(_0x25046c<0x3?_0xf25aca(_0x52f245):_0x25046c>0x3?_0xf25aca(_0x9734f8,_0xbe70dd,_0x52f245):_0xf25aca(_0x9734f8,_0xbe70dd))||_0x52f245;}return _0x25046c>0x3&&_0x52f245&&Object['defineProperty'](_0x9734f8,_0xbe70dd,_0x52f245),_0x52f245;},__metadata=this&&this[a230_0x15da7c(0xa2)]||function(_0x2a6bab,_0xee832c){const _0x18f284=a230_0x15da7c;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x18f284(0xbb))return Reflect['metadata'](_0x2a6bab,_0xee832c);};Object[a230_0x15da7c(0xc5)](exports,'__esModule',{'value':!![]}),exports[a230_0x15da7c(0xc9)]=void 0x0;const not_found_error_1=require(a230_0x15da7c(0x91)),typedi_1=require('typedi'),constants_1=require(a230_0x15da7c(0xa7)),queries_1=require(a230_0x15da7c(0xad)),flosum_naming_utils_1=require(a230_0x15da7c(0xaf)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a230_0x15da7c(0x9a));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x447100,_0x5e43d2){const _0xd72838=a230_0x15da7c;this['queryService']=_0x447100,this['restService']=_0x5e43d2,this[_0xd72838(0xac)]=0xc8;}[a230_0x15da7c(0x85)](_0x353cd1){const _0xb49d0b=a230_0x15da7c,_0x9ae301=(0x0,flosum_naming_utils_1[_0xb49d0b(0xa8)])(_0x353cd1,[_0xb49d0b(0x83),_0xb49d0b(0x8c),_0xb49d0b(0xab),_0xb49d0b(0xa6),_0xb49d0b(0xb6),'Id']);return{'id':_0x9ae301['Id'],'name':_0x9ae301['Component_Name__c'],'type':_0x9ae301['Component_Type__c'],'fileName':_0x9ae301[_0xb49d0b(0xa6)],'crc32':_0x9ae301['CRC32__c'],'version':+_0x9ae301[_0xb49d0b(0xb6)]};}async['getRepositoryIdByName'](_0x1426ce){const _0x302e94=a230_0x15da7c,[_0x3e1356]=await this[_0x302e94(0x84)][_0x302e94(0x90)](queries_1[_0x302e94(0x92)][_0x302e94(0xc1)](_0x302e94(0xb8),_0x1426ce));if(!_0x3e1356)throw new not_found_error_1[(_0x302e94(0x8b))](_0x302e94(0x9c)+_0x1426ce+_0x302e94(0xa4));return _0x3e1356['Id'];}async[a230_0x15da7c(0xa0)](_0x379700){const _0x43db60=a230_0x15da7c,[_0x2215b8]=await this['queryService'][_0x43db60(0x90)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x43db60(0xc1)](_0x43db60(0xb8),_0x379700));if(!_0x2215b8)throw new not_found_error_1[(_0x43db60(0x8b))](_0x43db60(0xba)+_0x379700+_0x43db60(0xa4));return _0x2215b8['Id'];}async['getComponentRecordTypes'](){const _0x1fa43f=a230_0x15da7c,_0x346b36=await this[_0x1fa43f(0x84)][_0x1fa43f(0x90)](queries_1[_0x1fa43f(0xb0)]);return _0x346b36[_0x1fa43f(0x89)](_0xe84532=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0xe84532,['Id',_0x1fa43f(0x8a)]))[_0x1fa43f(0x89)](_0x2e7054=>({'id':_0x2e7054['Id'],'name':_0x2e7054[_0x1fa43f(0x8a)]}));}async[a230_0x15da7c(0x82)](_0x137fe7,_0x5373f8){const _0x52080d=a230_0x15da7c,_0xf4aa81=[];while(_0x137fe7[_0x52080d(0xc4)]){const _0xa72fed=queries_1[_0x52080d(0x95)][_0x52080d(0xc1)](_0x52080d(0xb4),_0x137fe7[_0x52080d(0x88)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x52080d(0x89)](_0x21fcda=>'\x27'+_0x21fcda+'\x27')[_0x52080d(0xc8)](','))[_0x52080d(0xc1)]('%repositoryId%',_0x5373f8),_0x4f457a=await this['queryService'][_0x52080d(0x90)](_0xa72fed);_0xf4aa81[_0x52080d(0xaa)](..._0x4f457a);}return _0xf4aa81[_0x52080d(0x89)](_0x1ba73f=>this[_0x52080d(0x85)](_0x1ba73f));}async[a230_0x15da7c(0xc0)](_0x21540f,_0x19203b){const _0x46ce76=a230_0x15da7c,_0x9a8f69=[];while(_0x21540f[_0x46ce76(0xc4)]){const _0x4ee668=queries_1[_0x46ce76(0x8d)][_0x46ce76(0xc1)]('%fileNames%',_0x21540f[_0x46ce76(0x88)](0x0,this[_0x46ce76(0xac)])[_0x46ce76(0x89)](_0x2bfd53=>'\x27'+_0x2bfd53+'\x27')[_0x46ce76(0xc8)](','))['replace'](_0x46ce76(0x8f),_0x19203b),_0x43a32d=await this[_0x46ce76(0x84)][_0x46ce76(0x90)](_0x4ee668);_0x9a8f69[_0x46ce76(0xaa)](..._0x43a32d);}return _0x9a8f69[_0x46ce76(0x89)](_0x21409b=>this['extractComponentMetadataFromRecord'](_0x21409b));}async[a230_0x15da7c(0x98)](_0x20d03c){const _0x4a58b6=a230_0x15da7c,_0x171ae9=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x4a58b6(0xc1)]('%repositoryId%',_0x20d03c),_0x333b41=await this[_0x4a58b6(0x84)][_0x4a58b6(0x90)](_0x171ae9);return _0x333b41[_0x4a58b6(0x89)](_0x18f548=>this[_0x4a58b6(0x85)](_0x18f548));}async['fetchBranchComponents'](_0x558fb8){const _0x2e0aef=a230_0x15da7c,_0x455290=queries_1[_0x2e0aef(0x86)]['replace'](_0x2e0aef(0x8f),_0x558fb8),_0x3f78c6=await this[_0x2e0aef(0x84)][_0x2e0aef(0x90)](_0x455290);return _0x3f78c6[_0x2e0aef(0x89)](_0x555e10=>this['extractComponentMetadataFromRecord'](_0x555e10));}async[a230_0x15da7c(0x97)](_0x5280e5){const _0xe26578=a230_0x15da7c,_0x117244=[..._0x5280e5],_0x10fbf0=[];while(_0x117244[_0xe26578(0xc4)]){const _0x2e4ea8=queries_1[_0xe26578(0x99)]['replace'](_0xe26578(0x81),_0x117244['splice'](0x0,this[_0xe26578(0xac)])[_0xe26578(0x89)](_0x336f91=>'\x27'+_0x336f91+'\x27')['join'](',')),_0x2d9f77=await this[_0xe26578(0x84)][_0xe26578(0x90)](_0x2e4ea8);_0x10fbf0['push'](..._0x2d9f77[_0xe26578(0x89)](_0x543e48=>_0x543e48['Id']));}return _0x10fbf0;}async[a230_0x15da7c(0xc7)](_0x5979f0,_0x8d9d33){const _0x52e4cb=a230_0x15da7c;return this[_0x52e4cb(0xa9)][_0x52e4cb(0x9d)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x52e4cb(0xae)]+_0x52e4cb(0x96)]:_0x8d9d33,[constants_1['FLOSUM_NAMESPACE']+_0x52e4cb(0x93)]:_0x5979f0[_0x52e4cb(0xbc)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0x52e4cb(0x94),[constants_1[_0x52e4cb(0xbe)]+_0x52e4cb(0xb2)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata('design:paramtypes',[salesforce_query_service_1[a230_0x15da7c(0xb5)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a230_0x15da7c(0xc9)]=SalesforceGitSyncService;