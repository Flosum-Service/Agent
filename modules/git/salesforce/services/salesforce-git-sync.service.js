const a231_0x49bb97=a231_0x544f;(function(_0xb85b03,_0x187fe5){const _0x1797b8=a231_0x544f,_0x3a62b0=_0xb85b03();while(!![]){try{const _0xf596b7=-parseInt(_0x1797b8(0x1d0))/0x1+parseInt(_0x1797b8(0x1cd))/0x2+-parseInt(_0x1797b8(0x1d9))/0x3+parseInt(_0x1797b8(0x1ca))/0x4*(-parseInt(_0x1797b8(0x1d4))/0x5)+parseInt(_0x1797b8(0x1e1))/0x6+-parseInt(_0x1797b8(0x1c6))/0x7*(parseInt(_0x1797b8(0x1a9))/0x8)+-parseInt(_0x1797b8(0x1a1))/0x9*(-parseInt(_0x1797b8(0x1d3))/0xa);if(_0xf596b7===_0x187fe5)break;else _0x3a62b0['push'](_0x3a62b0['shift']());}catch(_0x9ca3a9){_0x3a62b0['push'](_0x3a62b0['shift']());}}}(a231_0x335d,0x4bce4));const a231_0x5f526b=(function(){let _0x1df7b7=!![];return function(_0x42536a,_0x301e61){const _0x5eb230=_0x1df7b7?function(){const _0x5242b6=a231_0x544f;if(_0x301e61){const _0x37395e=_0x301e61[_0x5242b6(0x1ad)](_0x42536a,arguments);return _0x301e61=null,_0x37395e;}}:function(){};return _0x1df7b7=![],_0x5eb230;};}()),a231_0x715d08=a231_0x5f526b(this,function(){const _0x560e1f=a231_0x544f;return a231_0x715d08['toString']()[_0x560e1f(0x1e3)](_0x560e1f(0x1a3))['toString']()[_0x560e1f(0x1dd)](a231_0x715d08)[_0x560e1f(0x1e3)](_0x560e1f(0x1a3));});a231_0x715d08();'use strict';function a231_0x335d(){const _0x44acce=['apply','Is_From_Agent__c','FLOSUM_COMMIT','Repository__c','metadata','%name%','GET_REPOSITORY_COMPONENTS_QUERY','NotFoundError','SalesforceQueryService','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','__decorate','./salesforce-query.service','getBranchIdByName','Completed','restService','length','push','%componentIds%','fetchRepositoryComponents','splice','extractComponentMetadataFromRecord','fetchBranchComponentsByFilenames','SalesforceGitSyncService','Version__c','114184NxihuW','FLOSUM_GIT_NAMESPACE','createCommit','query','221064iNWLcM','getRepositoryIdByName','Service','1223596YwGkiC','%fileNames%','post','151342eebHJf','Component_Name__c','Commit_Name__c','3883040aIDZpp','10zLXVWH','defineProperty','Branch\x20\x22','__esModule','FLOSUM_NAMESPACE','1377945IKvWht','fetchBranchComponents','__metadata','Status__c','constructor','GET_COMPONENT_RECORD_TYPES_QUERY','function','SalesforceRestService','600114ikSGLB','replace','search','./salesforce-rest.service','MAX_QUERY_ARRAY_ITEMS','queryService','fetchRepositoryComponentsByFilenames','fetchCommitManifestsByComponentIds','18GzSpLT','decorate','(((.+)+)+)+$','map','../queries','join','extractFieldsFromRecord','Component_Type__c','224yvdpRl','CRC32__c','../../../../core/errors/not-found.error','%branchId%'];a231_0x335d=function(){return _0x44acce;};return a231_0x335d();}function a231_0x544f(_0x478989,_0x26289b){const _0x12b929=a231_0x335d();return a231_0x544f=function(_0x715d08,_0x5f526b){_0x715d08=_0x715d08-0x19c;let _0x335d28=_0x12b929[_0x715d08];return _0x335d28;},a231_0x544f(_0x478989,_0x26289b);}var __decorate=this&&this[a231_0x49bb97(0x1b8)]||function(_0xcf4fa1,_0x399cd3,_0x17c117,_0x171042){const _0xe3e6b7=a231_0x49bb97;var _0x111a9c=arguments[_0xe3e6b7(0x1bd)],_0x5bdbf1=_0x111a9c<0x3?_0x399cd3:_0x171042===null?_0x171042=Object['getOwnPropertyDescriptor'](_0x399cd3,_0x17c117):_0x171042,_0x7230e;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0xe3e6b7(0x1df))_0x5bdbf1=Reflect[_0xe3e6b7(0x1a2)](_0xcf4fa1,_0x399cd3,_0x17c117,_0x171042);else{for(var _0x35d8d9=_0xcf4fa1[_0xe3e6b7(0x1bd)]-0x1;_0x35d8d9>=0x0;_0x35d8d9--)if(_0x7230e=_0xcf4fa1[_0x35d8d9])_0x5bdbf1=(_0x111a9c<0x3?_0x7230e(_0x5bdbf1):_0x111a9c>0x3?_0x7230e(_0x399cd3,_0x17c117,_0x5bdbf1):_0x7230e(_0x399cd3,_0x17c117))||_0x5bdbf1;}return _0x111a9c>0x3&&_0x5bdbf1&&Object['defineProperty'](_0x399cd3,_0x17c117,_0x5bdbf1),_0x5bdbf1;},__metadata=this&&this[a231_0x49bb97(0x1db)]||function(_0x5cc7d9,_0x25aac2){const _0x24f1ca=a231_0x49bb97;if(typeof Reflect==='object'&&typeof Reflect[_0x24f1ca(0x1b1)]===_0x24f1ca(0x1df))return Reflect[_0x24f1ca(0x1b1)](_0x5cc7d9,_0x25aac2);};Object[a231_0x49bb97(0x1d5)](exports,a231_0x49bb97(0x1d7),{'value':!![]}),exports[a231_0x49bb97(0x1c4)]=void 0x0;const not_found_error_1=require(a231_0x49bb97(0x1ab)),typedi_1=require('typedi'),constants_1=require('../../../../constants'),queries_1=require(a231_0x49bb97(0x1a5)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a231_0x49bb97(0x1b9)),salesforce_rest_service_1=require(a231_0x49bb97(0x19c));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x3abd32,_0x1f9f38){const _0x248131=a231_0x49bb97;this[_0x248131(0x19e)]=_0x3abd32,this[_0x248131(0x1bc)]=_0x1f9f38,this[_0x248131(0x19d)]=0xc8;}[a231_0x49bb97(0x1c2)](_0x2b2547){const _0x3c0386=a231_0x49bb97,_0x2c959f=(0x0,flosum_naming_utils_1[_0x3c0386(0x1a7)])(_0x2b2547,[_0x3c0386(0x1d1),_0x3c0386(0x1a8),_0x3c0386(0x1aa),'File_Name__c',_0x3c0386(0x1c5),'Id']);return{'id':_0x2c959f['Id'],'name':_0x2c959f[_0x3c0386(0x1d1)],'type':_0x2c959f[_0x3c0386(0x1a8)],'fileName':_0x2c959f['File_Name__c'],'crc32':_0x2c959f[_0x3c0386(0x1aa)],'version':+_0x2c959f[_0x3c0386(0x1c5)]};}async[a231_0x49bb97(0x1cb)](_0x51a7f6){const _0x1facfd=a231_0x49bb97,[_0x4af1ea]=await this[_0x1facfd(0x19e)][_0x1facfd(0x1c9)](queries_1['GET_REPOSITORY_BY_NAME_QUERY']['replace']('%name%',_0x51a7f6));if(!_0x4af1ea)throw new not_found_error_1[(_0x1facfd(0x1b4))]('Repository\x20\x22'+_0x51a7f6+'\x22\x20not\x20found\x20in\x20flosum.');return _0x4af1ea['Id'];}async[a231_0x49bb97(0x1ba)](_0x5e7604){const _0x3d0527=a231_0x49bb97,[_0x1a256b]=await this[_0x3d0527(0x19e)]['query'](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x3d0527(0x1e2)](_0x3d0527(0x1b2),_0x5e7604));if(!_0x1a256b)throw new not_found_error_1[(_0x3d0527(0x1b4))](_0x3d0527(0x1d6)+_0x5e7604+'\x22\x20not\x20found\x20in\x20flosum.');return _0x1a256b['Id'];}async['getComponentRecordTypes'](){const _0x311332=a231_0x49bb97,_0x3ef219=await this[_0x311332(0x19e)]['query'](queries_1[_0x311332(0x1de)]);return _0x3ef219[_0x311332(0x1a4)](_0x31db95=>(0x0,flosum_naming_utils_1[_0x311332(0x1a7)])(_0x31db95,['Id','Name']))[_0x311332(0x1a4)](_0x532300=>({'id':_0x532300['Id'],'name':_0x532300['Name']}));}async[a231_0x49bb97(0x19f)](_0x4be4c4,_0x297d05){const _0xd48195=a231_0x49bb97,_0x5125af=[];while(_0x4be4c4[_0xd48195(0x1bd)]){const _0x50bd60=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0xd48195(0x1e2)](_0xd48195(0x1ce),_0x4be4c4[_0xd48195(0x1c1)](0x0,this[_0xd48195(0x19d)])[_0xd48195(0x1a4)](_0x35ee4a=>'\x27'+_0x35ee4a+'\x27')[_0xd48195(0x1a6)](','))['replace']('%repositoryId%',_0x297d05),_0x41c77f=await this[_0xd48195(0x19e)][_0xd48195(0x1c9)](_0x50bd60);_0x5125af[_0xd48195(0x1be)](..._0x41c77f);}return _0x5125af[_0xd48195(0x1a4)](_0x35908d=>this[_0xd48195(0x1c2)](_0x35908d));}async[a231_0x49bb97(0x1c3)](_0x24c5b8,_0xc517f){const _0x4053e0=a231_0x49bb97,_0x39d514=[];while(_0x24c5b8[_0x4053e0(0x1bd)]){const _0x181643=queries_1[_0x4053e0(0x1b6)][_0x4053e0(0x1e2)](_0x4053e0(0x1ce),_0x24c5b8[_0x4053e0(0x1c1)](0x0,this[_0x4053e0(0x19d)])[_0x4053e0(0x1a4)](_0x331578=>'\x27'+_0x331578+'\x27')['join'](','))['replace'](_0x4053e0(0x1ac),_0xc517f),_0x4730a2=await this[_0x4053e0(0x19e)][_0x4053e0(0x1c9)](_0x181643);_0x39d514[_0x4053e0(0x1be)](..._0x4730a2);}return _0x39d514[_0x4053e0(0x1a4)](_0x2b38af=>this['extractComponentMetadataFromRecord'](_0x2b38af));}async[a231_0x49bb97(0x1c0)](_0x46f214){const _0x35a995=a231_0x49bb97,_0xe20b4d=queries_1[_0x35a995(0x1b3)]['replace']('%repositoryId%',_0x46f214),_0x5e925b=await this['queryService'][_0x35a995(0x1c9)](_0xe20b4d);return _0x5e925b[_0x35a995(0x1a4)](_0x1ad175=>this[_0x35a995(0x1c2)](_0x1ad175));}async[a231_0x49bb97(0x1da)](_0x1a3474){const _0x1b31cb=a231_0x49bb97,_0x1465b1=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x1b31cb(0x1e2)]('%branchId%',_0x1a3474),_0xec7fa=await this[_0x1b31cb(0x19e)][_0x1b31cb(0x1c9)](_0x1465b1);return _0xec7fa['map'](_0x497cbd=>this[_0x1b31cb(0x1c2)](_0x497cbd));}async[a231_0x49bb97(0x1a0)](_0x570865){const _0x2018a3=a231_0x49bb97,_0x484528=[..._0x570865],_0x15a712=[];while(_0x484528['length']){const _0x28dd80=queries_1[_0x2018a3(0x1b7)][_0x2018a3(0x1e2)](_0x2018a3(0x1bf),_0x484528[_0x2018a3(0x1c1)](0x0,this[_0x2018a3(0x19d)])[_0x2018a3(0x1a4)](_0x34ac07=>'\x27'+_0x34ac07+'\x27')[_0x2018a3(0x1a6)](',')),_0x5f4e99=await this[_0x2018a3(0x19e)][_0x2018a3(0x1c9)](_0x28dd80);_0x15a712['push'](..._0x5f4e99[_0x2018a3(0x1a4)](_0x4fdf2a=>_0x4fdf2a['Id']));}return _0x15a712;}async[a231_0x49bb97(0x1c8)](_0x3f5139,_0xf14c6b){const _0x114ff4=a231_0x49bb97;return this[_0x114ff4(0x1bc)][_0x114ff4(0x1cf)](constants_1[_0x114ff4(0x1af)],{[constants_1[_0x114ff4(0x1d8)]+_0x114ff4(0x1b0)]:_0xf14c6b,[constants_1[_0x114ff4(0x1d8)]+_0x114ff4(0x1d2)]:_0x3f5139['substr'](0x0,0xff),[constants_1[_0x114ff4(0x1d8)]+_0x114ff4(0x1dc)]:_0x114ff4(0x1bb),[constants_1[_0x114ff4(0x1c7)]+_0x114ff4(0x1ae)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a231_0x49bb97(0x1cc)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a231_0x49bb97(0x1b5)],salesforce_rest_service_1[a231_0x49bb97(0x1e0)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;