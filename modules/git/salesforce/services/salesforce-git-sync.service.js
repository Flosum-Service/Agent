const a275_0x6c1c2a=a275_0x40fe;(function(_0x5a7d69,_0x534525){const _0x2ff0b4=a275_0x40fe,_0x3b19b1=_0x5a7d69();while(!![]){try{const _0x3b6ba4=-parseInt(_0x2ff0b4(0xfe))/0x1*(parseInt(_0x2ff0b4(0xe8))/0x2)+-parseInt(_0x2ff0b4(0xdd))/0x3+parseInt(_0x2ff0b4(0xdf))/0x4+-parseInt(_0x2ff0b4(0xe6))/0x5+parseInt(_0x2ff0b4(0x117))/0x6+-parseInt(_0x2ff0b4(0xf9))/0x7*(parseInt(_0x2ff0b4(0xd6))/0x8)+parseInt(_0x2ff0b4(0x119))/0x9*(parseInt(_0x2ff0b4(0xf2))/0xa);if(_0x3b6ba4===_0x534525)break;else _0x3b19b1['push'](_0x3b19b1['shift']());}catch(_0x295515){_0x3b19b1['push'](_0x3b19b1['shift']());}}}(a275_0x2cb2,0x8c399));function a275_0x2cb2(){const _0x386cb5=['typedi','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','decorate','Commit_Name__c','__metadata','1210vAxHwV','%repositoryId%','Name','post','Repository\x20\x22','fetchRepositoryComponents','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','14700jEgCzN','object','query','FLOSUM_NAMESPACE','extractComponentMetadataFromRecord','1NiOTZi','queryService','Version__c','%branchId%','Service','Completed','FLOSUM_GIT_NAMESPACE','SalesforceGitSyncService','replace','Component_Type__c','NotFoundError','apply','toString','__decorate','__esModule','MAX_QUERY_ARRAY_ITEMS','metadata','../queries','\x22\x20not\x20found\x20in\x20flosum.','search','SalesforceQueryService','../utils/flosum-naming.utils','GET_REPOSITORY_BY_NAME_QUERY','./salesforce-query.service','File_Name__c','5227482wJHrVQ','extractFieldsFromRecord','82341XzIgZy','push','Branch\x20\x22','getOwnPropertyDescriptor','defineProperty','../../../../constants','fetchBranchComponents','2280GrJJtt','map','Repository__c','Status__c','length','GET_BRANCH_BY_NAME_QUERY','function','698103aGbpbd','splice','1621244TyBpbD','design:paramtypes','restService','createCommit','getRepositoryIdByName','fetchRepositoryComponentsByFilenames','Component_Name__c','1227730RoEoKZ','(((.+)+)+)+$','1464958pJwUmw','join','%name%','CRC32__c','SalesforceRestService'];a275_0x2cb2=function(){return _0x386cb5;};return a275_0x2cb2();}const a275_0x3b3aa1=(function(){let _0x284693=!![];return function(_0x3f14af,_0x410241){const _0x40596c=_0x284693?function(){const _0x1c4539=a275_0x40fe;if(_0x410241){const _0x33716b=_0x410241[_0x1c4539(0x109)](_0x3f14af,arguments);return _0x410241=null,_0x33716b;}}:function(){};return _0x284693=![],_0x40596c;};}()),a275_0x4ac1f3=a275_0x3b3aa1(this,function(){const _0x43b5b3=a275_0x40fe;return a275_0x4ac1f3['toString']()[_0x43b5b3(0x111)](_0x43b5b3(0xe7))[_0x43b5b3(0x10a)]()['constructor'](a275_0x4ac1f3)['search'](_0x43b5b3(0xe7));});a275_0x4ac1f3();function a275_0x40fe(_0xbd1854,_0x171b6f){const _0x503bbe=a275_0x2cb2();return a275_0x40fe=function(_0x4ac1f3,_0x3b3aa1){_0x4ac1f3=_0x4ac1f3-0xd6;let _0x2cb219=_0x503bbe[_0x4ac1f3];return _0x2cb219;},a275_0x40fe(_0xbd1854,_0x171b6f);}'use strict';var __decorate=this&&this[a275_0x6c1c2a(0x10b)]||function(_0x40bdde,_0x25aa8a,_0x4376dd,_0x57e644){const _0x2001c1=a275_0x6c1c2a;var _0x20c8b4=arguments[_0x2001c1(0xda)],_0x1c91d7=_0x20c8b4<0x3?_0x25aa8a:_0x57e644===null?_0x57e644=Object[_0x2001c1(0x11c)](_0x25aa8a,_0x4376dd):_0x57e644,_0x4557ee;if(typeof Reflect===_0x2001c1(0xfa)&&typeof Reflect['decorate']===_0x2001c1(0xdc))_0x1c91d7=Reflect[_0x2001c1(0xef)](_0x40bdde,_0x25aa8a,_0x4376dd,_0x57e644);else{for(var _0x1544f0=_0x40bdde[_0x2001c1(0xda)]-0x1;_0x1544f0>=0x0;_0x1544f0--)if(_0x4557ee=_0x40bdde[_0x1544f0])_0x1c91d7=(_0x20c8b4<0x3?_0x4557ee(_0x1c91d7):_0x20c8b4>0x3?_0x4557ee(_0x25aa8a,_0x4376dd,_0x1c91d7):_0x4557ee(_0x25aa8a,_0x4376dd))||_0x1c91d7;}return _0x20c8b4>0x3&&_0x1c91d7&&Object['defineProperty'](_0x25aa8a,_0x4376dd,_0x1c91d7),_0x1c91d7;},__metadata=this&&this[a275_0x6c1c2a(0xf1)]||function(_0x294c42,_0x252e7f){const _0x3fa107=a275_0x6c1c2a;if(typeof Reflect===_0x3fa107(0xfa)&&typeof Reflect[_0x3fa107(0x10e)]===_0x3fa107(0xdc))return Reflect[_0x3fa107(0x10e)](_0x294c42,_0x252e7f);};Object[a275_0x6c1c2a(0x11d)](exports,a275_0x6c1c2a(0x10c),{'value':!![]}),exports[a275_0x6c1c2a(0x105)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a275_0x6c1c2a(0xed)),constants_1=require(a275_0x6c1c2a(0x11e)),queries_1=require(a275_0x6c1c2a(0x10f)),flosum_naming_utils_1=require(a275_0x6c1c2a(0x113)),salesforce_query_service_1=require(a275_0x6c1c2a(0x115)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x507a36,_0x92dd86){const _0x2ab1a3=a275_0x6c1c2a;this[_0x2ab1a3(0xff)]=_0x507a36,this['restService']=_0x92dd86,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a275_0x6c1c2a(0xfd)](_0x298e64){const _0x4adb2f=a275_0x6c1c2a,_0x9249c5=(0x0,flosum_naming_utils_1[_0x4adb2f(0x118)])(_0x298e64,[_0x4adb2f(0xe5),_0x4adb2f(0x107),'CRC32__c',_0x4adb2f(0x116),_0x4adb2f(0x100),'Id']);return{'id':_0x9249c5['Id'],'name':_0x9249c5['Component_Name__c'],'type':_0x9249c5[_0x4adb2f(0x107)],'fileName':_0x9249c5[_0x4adb2f(0x116)],'crc32':_0x9249c5[_0x4adb2f(0xeb)],'version':+_0x9249c5['Version__c']};}async[a275_0x6c1c2a(0xe3)](_0x5da914){const _0x727d85=a275_0x6c1c2a,[_0x55e7df]=await this[_0x727d85(0xff)][_0x727d85(0xfb)](queries_1[_0x727d85(0x114)][_0x727d85(0x106)](_0x727d85(0xea),_0x5da914));if(!_0x55e7df)throw new not_found_error_1[(_0x727d85(0x108))](_0x727d85(0xf6)+_0x5da914+_0x727d85(0x110));return _0x55e7df['Id'];}async['getBranchIdByName'](_0x5676a5){const _0x1a1c2f=a275_0x6c1c2a,[_0x1c4bd6]=await this[_0x1a1c2f(0xff)][_0x1a1c2f(0xfb)](queries_1[_0x1a1c2f(0xdb)][_0x1a1c2f(0x106)]('%name%',_0x5676a5));if(!_0x1c4bd6)throw new not_found_error_1[(_0x1a1c2f(0x108))](_0x1a1c2f(0x11b)+_0x5676a5+_0x1a1c2f(0x110));return _0x1c4bd6['Id'];}async['getComponentRecordTypes'](){const _0x3a488e=a275_0x6c1c2a,_0x346aba=await this[_0x3a488e(0xff)][_0x3a488e(0xfb)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x346aba[_0x3a488e(0xd7)](_0x39dc24=>(0x0,flosum_naming_utils_1[_0x3a488e(0x118)])(_0x39dc24,['Id',_0x3a488e(0xf4)]))[_0x3a488e(0xd7)](_0x4654af=>({'id':_0x4654af['Id'],'name':_0x4654af[_0x3a488e(0xf4)]}));}async[a275_0x6c1c2a(0xe4)](_0x103384,_0x3ef656){const _0x23e664=a275_0x6c1c2a,_0x3b7673=[];while(_0x103384[_0x23e664(0xda)]){const _0x9d5757=queries_1[_0x23e664(0xee)][_0x23e664(0x106)]('%fileNames%',_0x103384['splice'](0x0,this[_0x23e664(0x10d)])[_0x23e664(0xd7)](_0x3f7553=>'\x27'+_0x3f7553+'\x27')[_0x23e664(0xe9)](','))[_0x23e664(0x106)](_0x23e664(0xf3),_0x3ef656),_0x3e70e4=await this[_0x23e664(0xff)]['query'](_0x9d5757);_0x3b7673[_0x23e664(0x11a)](..._0x3e70e4);}return _0x3b7673[_0x23e664(0xd7)](_0x35e8e7=>this[_0x23e664(0xfd)](_0x35e8e7));}async['fetchBranchComponentsByFilenames'](_0x59e627,_0x5dd9de){const _0x31d475=a275_0x6c1c2a,_0x231024=[];while(_0x59e627['length']){const _0x478cf9=queries_1[_0x31d475(0xf8)][_0x31d475(0x106)]('%fileNames%',_0x59e627[_0x31d475(0xde)](0x0,this[_0x31d475(0x10d)])[_0x31d475(0xd7)](_0x307f4f=>'\x27'+_0x307f4f+'\x27')[_0x31d475(0xe9)](','))[_0x31d475(0x106)]('%branchId%',_0x5dd9de),_0x260762=await this['queryService'][_0x31d475(0xfb)](_0x478cf9);_0x231024[_0x31d475(0x11a)](..._0x260762);}return _0x231024['map'](_0x533589=>this[_0x31d475(0xfd)](_0x533589));}async[a275_0x6c1c2a(0xf7)](_0x311ac4){const _0x16ed95=a275_0x6c1c2a,_0x1cb706=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x16ed95(0x106)]('%repositoryId%',_0x311ac4),_0x52b5a5=await this[_0x16ed95(0xff)][_0x16ed95(0xfb)](_0x1cb706);return _0x52b5a5[_0x16ed95(0xd7)](_0x42823d=>this[_0x16ed95(0xfd)](_0x42823d));}async[a275_0x6c1c2a(0x11f)](_0x15b6a1){const _0x3aacfd=a275_0x6c1c2a,_0x56b5c3=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x3aacfd(0x106)](_0x3aacfd(0x101),_0x15b6a1),_0x5124a8=await this[_0x3aacfd(0xff)][_0x3aacfd(0xfb)](_0x56b5c3);return _0x5124a8[_0x3aacfd(0xd7)](_0x315900=>this['extractComponentMetadataFromRecord'](_0x315900));}async['fetchCommitManifestsByComponentIds'](_0x29d934){const _0x530008=a275_0x6c1c2a,_0x332b5f=[..._0x29d934],_0x3784a1=[];while(_0x332b5f[_0x530008(0xda)]){const _0x3eece3=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x530008(0x106)]('%componentIds%',_0x332b5f['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x4ab37f=>'\x27'+_0x4ab37f+'\x27')[_0x530008(0xe9)](',')),_0x2d5a4c=await this['queryService'][_0x530008(0xfb)](_0x3eece3);_0x3784a1[_0x530008(0x11a)](..._0x2d5a4c[_0x530008(0xd7)](_0x100e00=>_0x100e00['Id']));}return _0x3784a1;}async[a275_0x6c1c2a(0xe2)](_0x4a6edb,_0x3898f3){const _0x87171f=a275_0x6c1c2a;return this[_0x87171f(0xe1)][_0x87171f(0xf5)](constants_1['FLOSUM_COMMIT'],{[constants_1['FLOSUM_NAMESPACE']+_0x87171f(0xd8)]:_0x3898f3,[constants_1[_0x87171f(0xfc)]+_0x87171f(0xf0)]:_0x4a6edb['substr'](0x0,0xff),[constants_1[_0x87171f(0xfc)]+_0x87171f(0xd9)]:_0x87171f(0x103),[constants_1[_0x87171f(0x104)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a275_0x6c1c2a(0x102)])(),__metadata(a275_0x6c1c2a(0xe0),[salesforce_query_service_1[a275_0x6c1c2a(0x112)],salesforce_rest_service_1[a275_0x6c1c2a(0xec)]])],SalesforceGitSyncService),exports[a275_0x6c1c2a(0x105)]=SalesforceGitSyncService;