const a247_0xd7428f=a247_0x298d;function a247_0x298d(_0x15a25c,_0x3fd0c2){const _0x2d1ac5=a247_0x1f21();return a247_0x298d=function(_0x56f982,_0xe64dda){_0x56f982=_0x56f982-0xa0;let _0x1f2110=_0x2d1ac5[_0x56f982];return _0x1f2110;},a247_0x298d(_0x15a25c,_0x3fd0c2);}(function(_0x210717,_0x619f39){const _0x12b81c=a247_0x298d,_0x3ca147=_0x210717();while(!![]){try{const _0x5943ab=-parseInt(_0x12b81c(0xaf))/0x1*(-parseInt(_0x12b81c(0xb6))/0x2)+parseInt(_0x12b81c(0xc8))/0x3*(parseInt(_0x12b81c(0xc7))/0x4)+parseInt(_0x12b81c(0xa4))/0x5*(-parseInt(_0x12b81c(0xdb))/0x6)+parseInt(_0x12b81c(0xcb))/0x7*(-parseInt(_0x12b81c(0xe5))/0x8)+parseInt(_0x12b81c(0xec))/0x9+parseInt(_0x12b81c(0xac))/0xa*(-parseInt(_0x12b81c(0xae))/0xb)+parseInt(_0x12b81c(0xab))/0xc;if(_0x5943ab===_0x619f39)break;else _0x3ca147['push'](_0x3ca147['shift']());}catch(_0x5dd0fc){_0x3ca147['push'](_0x3ca147['shift']());}}}(a247_0x1f21,0x1ca80));const a247_0xe64dda=(function(){let _0x418d74=!![];return function(_0x167570,_0x2617ca){const _0x23aa1b=_0x418d74?function(){const _0x1f7ece=a247_0x298d;if(_0x2617ca){const _0x54aa8f=_0x2617ca[_0x1f7ece(0xb5)](_0x167570,arguments);return _0x2617ca=null,_0x54aa8f;}}:function(){};return _0x418d74=![],_0x23aa1b;};}()),a247_0x56f982=a247_0xe64dda(this,function(){const _0x1136de=a247_0x298d;return a247_0x56f982[_0x1136de(0xde)]()[_0x1136de(0xf2)](_0x1136de(0xb2))[_0x1136de(0xde)]()[_0x1136de(0xc0)](a247_0x56f982)['search'](_0x1136de(0xb2));});function a247_0x1f21(){const _0x2891f3=['FLOSUM_NAMESPACE','Component_Type__c','__decorate','constructor','%name%','fetchBranchComponents','metadata','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','length','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','508DDzeOa','5169RLMYnF','getComponentRecordTypes','%repositoryId%','27818maqOkX','Component_Name__c','replace','object','%componentIds%','fetchBranchComponentsByFilenames','createCommit','design:paramtypes','getOwnPropertyDescriptor','post','getRepositoryIdByName','extractComponentMetadataFromRecord','__metadata','defineProperty','./salesforce-rest.service','../../../../constants','6biAUKZ','queryService','NotFoundError','toString','fetchRepositoryComponentsByFilenames','GET_COMPONENT_RECORD_TYPES_QUERY','function','fetchCommitManifestsByComponentIds','../../../../core/errors/not-found.error','restService','456TKtRPJ','GET_REPOSITORY_COMPONENTS_QUERY','decorate','./salesforce-query.service','../utils/flosum-naming.utils','query','__esModule','1633959JuxqgJ','Version__c','splice','%fileNames%','\x22\x20not\x20found\x20in\x20flosum.','getBranchIdByName','search','Repository__c','join','Name','Repository\x20\x22','FLOSUM_COMMIT','Service','map','File_Name__c','658535DAUHPs','Commit_Name__c','%branchId%','push','GET_BRANCH_BY_NAME_QUERY','SalesforceQueryService','GET_REPOSITORY_BY_NAME_QUERY','307344CgkZAF','3170KsxolI','Branch\x20\x22','1034EePkhB','7yJDHlS','MAX_QUERY_ARRAY_ITEMS','SalesforceRestService','(((.+)+)+)+$','../queries','fetchRepositoryComponents','apply','22690SrNRwI','CRC32__c','extractFieldsFromRecord','GET_BRANCH_COMPONENTS_QUERY','Status__c','substr','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'];a247_0x1f21=function(){return _0x2891f3;};return a247_0x1f21();}a247_0x56f982();'use strict';var __decorate=this&&this[a247_0xd7428f(0xbf)]||function(_0x552677,_0x243243,_0x134453,_0x445bdb){const _0x324140=a247_0xd7428f;var _0x5c6b69=arguments[_0x324140(0xc5)],_0x1f4f54=_0x5c6b69<0x3?_0x243243:_0x445bdb===null?_0x445bdb=Object[_0x324140(0xd3)](_0x243243,_0x134453):_0x445bdb,_0x32444e;if(typeof Reflect===_0x324140(0xce)&&typeof Reflect[_0x324140(0xe7)]==='function')_0x1f4f54=Reflect['decorate'](_0x552677,_0x243243,_0x134453,_0x445bdb);else{for(var _0x3b45eb=_0x552677[_0x324140(0xc5)]-0x1;_0x3b45eb>=0x0;_0x3b45eb--)if(_0x32444e=_0x552677[_0x3b45eb])_0x1f4f54=(_0x5c6b69<0x3?_0x32444e(_0x1f4f54):_0x5c6b69>0x3?_0x32444e(_0x243243,_0x134453,_0x1f4f54):_0x32444e(_0x243243,_0x134453))||_0x1f4f54;}return _0x5c6b69>0x3&&_0x1f4f54&&Object[_0x324140(0xd8)](_0x243243,_0x134453,_0x1f4f54),_0x1f4f54;},__metadata=this&&this[a247_0xd7428f(0xd7)]||function(_0x3b1e40,_0x116cb5){const _0x51a732=a247_0xd7428f;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x51a732(0xe1))return Reflect[_0x51a732(0xc3)](_0x3b1e40,_0x116cb5);};Object[a247_0xd7428f(0xd8)](exports,a247_0xd7428f(0xeb),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a247_0xd7428f(0xe3)),typedi_1=require('typedi'),constants_1=require(a247_0xd7428f(0xda)),queries_1=require(a247_0xd7428f(0xb3)),flosum_naming_utils_1=require(a247_0xd7428f(0xe9)),salesforce_query_service_1=require(a247_0xd7428f(0xe8)),salesforce_rest_service_1=require(a247_0xd7428f(0xd9));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x92f348,_0x42a9c8){const _0x950a1=a247_0xd7428f;this['queryService']=_0x92f348,this[_0x950a1(0xe4)]=_0x42a9c8,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a247_0xd7428f(0xd6)](_0x43603a){const _0x4141bc=a247_0xd7428f,_0x2997ed=(0x0,flosum_naming_utils_1[_0x4141bc(0xb8)])(_0x43603a,[_0x4141bc(0xcc),'Component_Type__c',_0x4141bc(0xb7),_0x4141bc(0xa3),_0x4141bc(0xed),'Id']);return{'id':_0x2997ed['Id'],'name':_0x2997ed[_0x4141bc(0xcc)],'type':_0x2997ed[_0x4141bc(0xbe)],'fileName':_0x2997ed[_0x4141bc(0xa3)],'crc32':_0x2997ed[_0x4141bc(0xb7)],'version':+_0x2997ed['Version__c']};}async[a247_0xd7428f(0xd5)](_0xf5c3ae){const _0x15d1cd=a247_0xd7428f,[_0x5d359f]=await this['queryService'][_0x15d1cd(0xea)](queries_1[_0x15d1cd(0xaa)][_0x15d1cd(0xcd)](_0x15d1cd(0xc1),_0xf5c3ae));if(!_0x5d359f)throw new not_found_error_1[(_0x15d1cd(0xdd))](_0x15d1cd(0xf6)+_0xf5c3ae+_0x15d1cd(0xf0));return _0x5d359f['Id'];}async[a247_0xd7428f(0xf1)](_0x1b1139){const _0x42c902=a247_0xd7428f,[_0x4ac7f5]=await this[_0x42c902(0xdc)][_0x42c902(0xea)](queries_1[_0x42c902(0xa8)][_0x42c902(0xcd)](_0x42c902(0xc1),_0x1b1139));if(!_0x4ac7f5)throw new not_found_error_1[(_0x42c902(0xdd))](_0x42c902(0xad)+_0x1b1139+'\x22\x20not\x20found\x20in\x20flosum.');return _0x4ac7f5['Id'];}async[a247_0xd7428f(0xc9)](){const _0x17dca8=a247_0xd7428f,_0x28e79c=await this['queryService'][_0x17dca8(0xea)](queries_1[_0x17dca8(0xe0)]);return _0x28e79c[_0x17dca8(0xa2)](_0x5461a9=>(0x0,flosum_naming_utils_1[_0x17dca8(0xb8)])(_0x5461a9,['Id',_0x17dca8(0xf5)]))[_0x17dca8(0xa2)](_0x3c2ca7=>({'id':_0x3c2ca7['Id'],'name':_0x3c2ca7['Name']}));}async[a247_0xd7428f(0xdf)](_0x395f43,_0x5a7f57){const _0x12d467=a247_0xd7428f,_0x49e761=[];while(_0x395f43[_0x12d467(0xc5)]){const _0x4b25cc=queries_1[_0x12d467(0xc4)][_0x12d467(0xcd)](_0x12d467(0xef),_0x395f43[_0x12d467(0xee)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x323fcc=>'\x27'+_0x323fcc+'\x27')[_0x12d467(0xf4)](','))[_0x12d467(0xcd)](_0x12d467(0xca),_0x5a7f57),_0xc41b5f=await this[_0x12d467(0xdc)][_0x12d467(0xea)](_0x4b25cc);_0x49e761[_0x12d467(0xa7)](..._0xc41b5f);}return _0x49e761[_0x12d467(0xa2)](_0x32bb3b=>this[_0x12d467(0xd6)](_0x32bb3b));}async[a247_0xd7428f(0xd0)](_0x2ff273,_0x1d2cf9){const _0xe095db=a247_0xd7428f,_0x2c184b=[];while(_0x2ff273[_0xe095db(0xc5)]){const _0x29eed5=queries_1[_0xe095db(0xbc)][_0xe095db(0xcd)](_0xe095db(0xef),_0x2ff273[_0xe095db(0xee)](0x0,this[_0xe095db(0xb0)])[_0xe095db(0xa2)](_0x40de39=>'\x27'+_0x40de39+'\x27')[_0xe095db(0xf4)](','))[_0xe095db(0xcd)](_0xe095db(0xa6),_0x1d2cf9),_0x53836c=await this['queryService'][_0xe095db(0xea)](_0x29eed5);_0x2c184b[_0xe095db(0xa7)](..._0x53836c);}return _0x2c184b[_0xe095db(0xa2)](_0x138fd5=>this[_0xe095db(0xd6)](_0x138fd5));}async[a247_0xd7428f(0xb4)](_0x50d5d4){const _0x2292dc=a247_0xd7428f,_0x211cc6=queries_1[_0x2292dc(0xe6)][_0x2292dc(0xcd)](_0x2292dc(0xca),_0x50d5d4),_0x56cebf=await this[_0x2292dc(0xdc)][_0x2292dc(0xea)](_0x211cc6);return _0x56cebf['map'](_0x330a9f=>this[_0x2292dc(0xd6)](_0x330a9f));}async[a247_0xd7428f(0xc2)](_0x10bbdd){const _0x4d4fae=a247_0xd7428f,_0x2df072=queries_1[_0x4d4fae(0xb9)]['replace']('%branchId%',_0x10bbdd),_0x4c3a6f=await this['queryService'][_0x4d4fae(0xea)](_0x2df072);return _0x4c3a6f['map'](_0x282e7e=>this['extractComponentMetadataFromRecord'](_0x282e7e));}async[a247_0xd7428f(0xe2)](_0x365ce8){const _0x1d074d=a247_0xd7428f,_0x2db42f=[..._0x365ce8],_0x419dfa=[];while(_0x2db42f[_0x1d074d(0xc5)]){const _0x280e92=queries_1[_0x1d074d(0xc6)][_0x1d074d(0xcd)](_0x1d074d(0xcf),_0x2db42f[_0x1d074d(0xee)](0x0,this[_0x1d074d(0xb0)])[_0x1d074d(0xa2)](_0x430fde=>'\x27'+_0x430fde+'\x27')['join'](',')),_0x50bff6=await this[_0x1d074d(0xdc)]['query'](_0x280e92);_0x419dfa[_0x1d074d(0xa7)](..._0x50bff6['map'](_0x46f869=>_0x46f869['Id']));}return _0x419dfa;}async[a247_0xd7428f(0xd1)](_0x221a39,_0x2e3b80){const _0x3eb486=a247_0xd7428f;return this['restService'][_0x3eb486(0xd4)](constants_1[_0x3eb486(0xa0)],{[constants_1['FLOSUM_NAMESPACE']+_0x3eb486(0xf3)]:_0x2e3b80,[constants_1[_0x3eb486(0xbd)]+_0x3eb486(0xa5)]:_0x221a39[_0x3eb486(0xbb)](0x0,0xff),[constants_1[_0x3eb486(0xbd)]+_0x3eb486(0xba)]:'Completed',[constants_1['FLOSUM_GIT_NAMESPACE']+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a247_0xd7428f(0xa1)])(),__metadata(a247_0xd7428f(0xd2),[salesforce_query_service_1[a247_0xd7428f(0xa9)],salesforce_rest_service_1[a247_0xd7428f(0xb1)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;