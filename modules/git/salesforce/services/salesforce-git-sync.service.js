const a231_0x5b8f17=a231_0x1b8b;(function(_0x47a605,_0x4a4240){const _0x316df2=a231_0x1b8b,_0x17cc96=_0x47a605();while(!![]){try{const _0x116991=-parseInt(_0x316df2(0x1e9))/0x1*(parseInt(_0x316df2(0x1e5))/0x2)+-parseInt(_0x316df2(0x20c))/0x3+-parseInt(_0x316df2(0x1f7))/0x4*(parseInt(_0x316df2(0x205))/0x5)+-parseInt(_0x316df2(0x21c))/0x6*(-parseInt(_0x316df2(0x215))/0x7)+parseInt(_0x316df2(0x221))/0x8*(-parseInt(_0x316df2(0x216))/0x9)+-parseInt(_0x316df2(0x20a))/0xa+-parseInt(_0x316df2(0x1f8))/0xb*(-parseInt(_0x316df2(0x217))/0xc);if(_0x116991===_0x4a4240)break;else _0x17cc96['push'](_0x17cc96['shift']());}catch(_0x3bcdfb){_0x17cc96['push'](_0x17cc96['shift']());}}}(a231_0x3f21,0x3da0d));const a231_0x3eed40=(function(){let _0x504229=!![];return function(_0x5884ef,_0x5d1ff8){const _0x57fcb7=_0x504229?function(){const _0x1a02b2=a231_0x1b8b;if(_0x5d1ff8){const _0x29f21e=_0x5d1ff8[_0x1a02b2(0x1e8)](_0x5884ef,arguments);return _0x5d1ff8=null,_0x29f21e;}}:function(){};return _0x504229=![],_0x57fcb7;};}()),a231_0x20e44e=a231_0x3eed40(this,function(){const _0x50f588=a231_0x1b8b;return a231_0x20e44e[_0x50f588(0x1e3)]()[_0x50f588(0x208)](_0x50f588(0x219))[_0x50f588(0x1e3)]()[_0x50f588(0x203)](a231_0x20e44e)[_0x50f588(0x208)](_0x50f588(0x219));});a231_0x20e44e();'use strict';var __decorate=this&&this[a231_0x5b8f17(0x1e4)]||function(_0x5912ab,_0x36b5ca,_0x2dbb49,_0x734950){const _0x5429ac=a231_0x5b8f17;var _0x2a9797=arguments[_0x5429ac(0x1f3)],_0x4a8b80=_0x2a9797<0x3?_0x36b5ca:_0x734950===null?_0x734950=Object[_0x5429ac(0x222)](_0x36b5ca,_0x2dbb49):_0x734950,_0x29a0a4;if(typeof Reflect===_0x5429ac(0x1f6)&&typeof Reflect[_0x5429ac(0x1dc)]===_0x5429ac(0x1ef))_0x4a8b80=Reflect[_0x5429ac(0x1dc)](_0x5912ab,_0x36b5ca,_0x2dbb49,_0x734950);else{for(var _0x3f71ea=_0x5912ab[_0x5429ac(0x1f3)]-0x1;_0x3f71ea>=0x0;_0x3f71ea--)if(_0x29a0a4=_0x5912ab[_0x3f71ea])_0x4a8b80=(_0x2a9797<0x3?_0x29a0a4(_0x4a8b80):_0x2a9797>0x3?_0x29a0a4(_0x36b5ca,_0x2dbb49,_0x4a8b80):_0x29a0a4(_0x36b5ca,_0x2dbb49))||_0x4a8b80;}return _0x2a9797>0x3&&_0x4a8b80&&Object[_0x5429ac(0x1e0)](_0x36b5ca,_0x2dbb49,_0x4a8b80),_0x4a8b80;},__metadata=this&&this['__metadata']||function(_0x56dd87,_0x5a2c4b){const _0x5e4aa0=a231_0x5b8f17;if(typeof Reflect===_0x5e4aa0(0x1f6)&&typeof Reflect[_0x5e4aa0(0x223)]==='function')return Reflect[_0x5e4aa0(0x223)](_0x56dd87,_0x5a2c4b);};Object[a231_0x5b8f17(0x1e0)](exports,a231_0x5b8f17(0x1f5),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a231_0x5b8f17(0x1dd)),typedi_1=require('typedi'),constants_1=require('../../../../constants'),queries_1=require(a231_0x5b8f17(0x1ea)),flosum_naming_utils_1=require(a231_0x5b8f17(0x1fc)),salesforce_query_service_1=require(a231_0x5b8f17(0x1e7)),salesforce_rest_service_1=require(a231_0x5b8f17(0x20e));function a231_0x1b8b(_0x15b0cc,_0x13a1a8){const _0x5dd993=a231_0x3f21();return a231_0x1b8b=function(_0x20e44e,_0x3eed40){_0x20e44e=_0x20e44e-0x1d7;let _0x3f21c1=_0x5dd993[_0x20e44e];return _0x3f21c1;},a231_0x1b8b(_0x15b0cc,_0x13a1a8);}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x368766,_0x51d68d){const _0x2ec75f=a231_0x5b8f17;this['queryService']=_0x368766,this[_0x2ec75f(0x200)]=_0x51d68d,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a231_0x5b8f17(0x210)](_0x10bb40){const _0x2a0492=a231_0x5b8f17,_0xccae91=(0x0,flosum_naming_utils_1[_0x2a0492(0x206)])(_0x10bb40,[_0x2a0492(0x1ff),_0x2a0492(0x21d),_0x2a0492(0x20b),_0x2a0492(0x224),'Version__c','Id']);return{'id':_0xccae91['Id'],'name':_0xccae91[_0x2a0492(0x1ff)],'type':_0xccae91[_0x2a0492(0x21d)],'fileName':_0xccae91[_0x2a0492(0x224)],'crc32':_0xccae91[_0x2a0492(0x20b)],'version':+_0xccae91['Version__c']};}async[a231_0x5b8f17(0x1f4)](_0x5e384c){const _0x11d59d=a231_0x5b8f17,[_0x294717]=await this['queryService'][_0x11d59d(0x213)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x11d59d(0x20d)](_0x11d59d(0x1fb),_0x5e384c));if(!_0x294717)throw new not_found_error_1[(_0x11d59d(0x202))](_0x11d59d(0x1f9)+_0x5e384c+'\x22\x20not\x20found\x20in\x20flosum.');return _0x294717['Id'];}async[a231_0x5b8f17(0x201)](_0x26084a){const _0x405c6a=a231_0x5b8f17,[_0x95e091]=await this['queryService']['query'](queries_1[_0x405c6a(0x212)][_0x405c6a(0x20d)]('%name%',_0x26084a));if(!_0x95e091)throw new not_found_error_1[(_0x405c6a(0x202))](_0x405c6a(0x1f2)+_0x26084a+_0x405c6a(0x214));return _0x95e091['Id'];}async[a231_0x5b8f17(0x220)](){const _0x1af61d=a231_0x5b8f17,_0x1601df=await this['queryService']['query'](queries_1[_0x1af61d(0x1d8)]);return _0x1601df[_0x1af61d(0x1d7)](_0x148a67=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x148a67,['Id',_0x1af61d(0x1ed)]))[_0x1af61d(0x1d7)](_0x1161a9=>({'id':_0x1161a9['Id'],'name':_0x1161a9[_0x1af61d(0x1ed)]}));}async[a231_0x5b8f17(0x1eb)](_0x436adc,_0x280da8){const _0x278316=a231_0x5b8f17,_0x30a27f=[];while(_0x436adc['length']){const _0x400d71=queries_1[_0x278316(0x1df)][_0x278316(0x20d)](_0x278316(0x1fe),_0x436adc['splice'](0x0,this[_0x278316(0x218)])[_0x278316(0x1d7)](_0x473334=>'\x27'+_0x473334+'\x27')['join'](','))['replace'](_0x278316(0x21e),_0x280da8),_0x5768dc=await this[_0x278316(0x1e6)][_0x278316(0x213)](_0x400d71);_0x30a27f[_0x278316(0x1f0)](..._0x5768dc);}return _0x30a27f['map'](_0x372ee7=>this[_0x278316(0x210)](_0x372ee7));}async[a231_0x5b8f17(0x21b)](_0x29b2ca,_0x2525b5){const _0xbb74d=a231_0x5b8f17,_0x4f0088=[];while(_0x29b2ca[_0xbb74d(0x1f3)]){const _0xa171ec=queries_1[_0xbb74d(0x1e2)]['replace'](_0xbb74d(0x1fe),_0x29b2ca['splice'](0x0,this[_0xbb74d(0x218)])[_0xbb74d(0x1d7)](_0x44b1f6=>'\x27'+_0x44b1f6+'\x27')[_0xbb74d(0x21f)](','))['replace'](_0xbb74d(0x211),_0x2525b5),_0x563a97=await this[_0xbb74d(0x1e6)][_0xbb74d(0x213)](_0xa171ec);_0x4f0088[_0xbb74d(0x1f0)](..._0x563a97);}return _0x4f0088['map'](_0x404120=>this[_0xbb74d(0x210)](_0x404120));}async[a231_0x5b8f17(0x1de)](_0x580e2){const _0x569d44=a231_0x5b8f17,_0x57cea4=queries_1[_0x569d44(0x1fa)][_0x569d44(0x20d)](_0x569d44(0x21e),_0x580e2),_0x383b78=await this[_0x569d44(0x1e6)][_0x569d44(0x213)](_0x57cea4);return _0x383b78[_0x569d44(0x1d7)](_0x25dc22=>this[_0x569d44(0x210)](_0x25dc22));}async[a231_0x5b8f17(0x1da)](_0x57959e){const _0x4a3fd5=a231_0x5b8f17,_0x2f1833=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x4a3fd5(0x20d)](_0x4a3fd5(0x211),_0x57959e),_0x16283=await this['queryService']['query'](_0x2f1833);return _0x16283[_0x4a3fd5(0x1d7)](_0x370536=>this[_0x4a3fd5(0x210)](_0x370536));}async[a231_0x5b8f17(0x204)](_0x3df397){const _0x3ed3f5=a231_0x5b8f17,_0x14c4f5=[..._0x3df397],_0x12eecd=[];while(_0x14c4f5['length']){const _0x4829f6=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS']['replace']('%componentIds%',_0x14c4f5['splice'](0x0,this[_0x3ed3f5(0x218)])['map'](_0x4bdad5=>'\x27'+_0x4bdad5+'\x27')[_0x3ed3f5(0x21f)](',')),_0x5ba75e=await this[_0x3ed3f5(0x1e6)][_0x3ed3f5(0x213)](_0x4829f6);_0x12eecd[_0x3ed3f5(0x1f0)](..._0x5ba75e[_0x3ed3f5(0x1d7)](_0x551c25=>_0x551c25['Id']));}return _0x12eecd;}async['createCommit'](_0x3ffcc1,_0x2072de){const _0x2544d1=a231_0x5b8f17;return this['restService']['post'](constants_1[_0x2544d1(0x20f)],{[constants_1['FLOSUM_NAMESPACE']+'Repository__c']:_0x2072de,[constants_1[_0x2544d1(0x225)]+_0x2544d1(0x209)]:_0x3ffcc1['substr'](0x0,0xff),[constants_1[_0x2544d1(0x225)]+_0x2544d1(0x1e1)]:_0x2544d1(0x21a),[constants_1[_0x2544d1(0x1d9)]+_0x2544d1(0x1fd)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a231_0x5b8f17(0x1f1)])(),__metadata(a231_0x5b8f17(0x1ec),[salesforce_query_service_1[a231_0x5b8f17(0x1ee)],salesforce_rest_service_1[a231_0x5b8f17(0x1db)]])],SalesforceGitSyncService),exports[a231_0x5b8f17(0x207)]=SalesforceGitSyncService;function a231_0x3f21(){const _0x230ac6=['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','defineProperty','Status__c','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','toString','__decorate','4318eQZBQo','queryService','./salesforce-query.service','apply','121jxnlVA','../queries','fetchRepositoryComponentsByFilenames','design:paramtypes','Name','SalesforceQueryService','function','push','Service','Branch\x20\x22','length','getRepositoryIdByName','__esModule','object','916EGRDWF','3311638WwPLSd','Repository\x20\x22','GET_REPOSITORY_COMPONENTS_QUERY','%name%','../utils/flosum-naming.utils','Is_From_Agent__c','%fileNames%','Component_Name__c','restService','getBranchIdByName','NotFoundError','constructor','fetchCommitManifestsByComponentIds','2785XmSmLc','extractFieldsFromRecord','SalesforceGitSyncService','search','Commit_Name__c','4271090XnMuCO','CRC32__c','992700ABbrbd','replace','./salesforce-rest.service','FLOSUM_COMMIT','extractComponentMetadataFromRecord','%branchId%','GET_BRANCH_BY_NAME_QUERY','query','\x22\x20not\x20found\x20in\x20flosum.','1113336rGwGPx','1719iAPcbV','60rkhtnr','MAX_QUERY_ARRAY_ITEMS','(((.+)+)+)+$','Completed','fetchBranchComponentsByFilenames','6FybIRg','Component_Type__c','%repositoryId%','join','getComponentRecordTypes','11104bbHtWY','getOwnPropertyDescriptor','metadata','File_Name__c','FLOSUM_NAMESPACE','map','GET_COMPONENT_RECORD_TYPES_QUERY','FLOSUM_GIT_NAMESPACE','fetchBranchComponents','SalesforceRestService','decorate','../../../../core/errors/not-found.error','fetchRepositoryComponents'];a231_0x3f21=function(){return _0x230ac6;};return a231_0x3f21();}