const a247_0x2a6219=a247_0x1dad;(function(_0x234451,_0x2bf83d){const _0x1b8abc=a247_0x1dad,_0x349b3c=_0x234451();while(!![]){try{const _0x4199b4=-parseInt(_0x1b8abc(0xb0))/0x1+-parseInt(_0x1b8abc(0xb2))/0x2+parseInt(_0x1b8abc(0xf3))/0x3*(parseInt(_0x1b8abc(0xb8))/0x4)+-parseInt(_0x1b8abc(0xb9))/0x5+parseInt(_0x1b8abc(0xe3))/0x6+-parseInt(_0x1b8abc(0xe4))/0x7+-parseInt(_0x1b8abc(0xea))/0x8*(-parseInt(_0x1b8abc(0xc5))/0x9);if(_0x4199b4===_0x2bf83d)break;else _0x349b3c['push'](_0x349b3c['shift']());}catch(_0x15d34a){_0x349b3c['push'](_0x349b3c['shift']());}}}(a247_0xf20c,0xedab5));const a247_0x37e4c1=(function(){let _0x41dc0c=!![];return function(_0x679c13,_0x3a3945){const _0x8e6e31=_0x41dc0c?function(){const _0x55b620=a247_0x1dad;if(_0x3a3945){const _0x38c45b=_0x3a3945[_0x55b620(0xba)](_0x679c13,arguments);return _0x3a3945=null,_0x38c45b;}}:function(){};return _0x41dc0c=![],_0x8e6e31;};}()),a247_0x3b1e09=a247_0x37e4c1(this,function(){const _0x3ef446=a247_0x1dad;return a247_0x3b1e09['toString']()[_0x3ef446(0xe6)](_0x3ef446(0xcc))[_0x3ef446(0xf0)]()[_0x3ef446(0xee)](a247_0x3b1e09)['search']('(((.+)+)+)+$');});a247_0x3b1e09();'use strict';var __decorate=this&&this[a247_0x2a6219(0xcd)]||function(_0x4b488f,_0x21eec4,_0x66d5b,_0x403160){const _0x82d6f2=a247_0x2a6219;var _0x139c2b=arguments[_0x82d6f2(0xef)],_0x36db09=_0x139c2b<0x3?_0x21eec4:_0x403160===null?_0x403160=Object[_0x82d6f2(0xb5)](_0x21eec4,_0x66d5b):_0x403160,_0x4f105f;if(typeof Reflect===_0x82d6f2(0xc1)&&typeof Reflect[_0x82d6f2(0xda)]===_0x82d6f2(0xae))_0x36db09=Reflect[_0x82d6f2(0xda)](_0x4b488f,_0x21eec4,_0x66d5b,_0x403160);else{for(var _0x5428c5=_0x4b488f[_0x82d6f2(0xef)]-0x1;_0x5428c5>=0x0;_0x5428c5--)if(_0x4f105f=_0x4b488f[_0x5428c5])_0x36db09=(_0x139c2b<0x3?_0x4f105f(_0x36db09):_0x139c2b>0x3?_0x4f105f(_0x21eec4,_0x66d5b,_0x36db09):_0x4f105f(_0x21eec4,_0x66d5b))||_0x36db09;}return _0x139c2b>0x3&&_0x36db09&&Object[_0x82d6f2(0xdf)](_0x21eec4,_0x66d5b,_0x36db09),_0x36db09;},__metadata=this&&this[a247_0x2a6219(0xe7)]||function(_0x533914,_0x4b24e0){const _0xdabda9=a247_0x2a6219;if(typeof Reflect===_0xdabda9(0xc1)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x533914,_0x4b24e0);};Object[a247_0x2a6219(0xdf)](exports,a247_0x2a6219(0xad),{'value':!![]}),exports[a247_0x2a6219(0xd2)]=void 0x0;function a247_0x1dad(_0xe1a3ef,_0x1751e){const _0x405f30=a247_0xf20c();return a247_0x1dad=function(_0x3b1e09,_0x37e4c1){_0x3b1e09=_0x3b1e09-0xad;let _0xf20ce3=_0x405f30[_0x3b1e09];return _0xf20ce3;},a247_0x1dad(_0xe1a3ef,_0x1751e);}const not_found_error_1=require(a247_0x2a6219(0xdb)),typedi_1=require('typedi'),constants_1=require(a247_0x2a6219(0xd9)),queries_1=require(a247_0x2a6219(0xd7)),flosum_naming_utils_1=require(a247_0x2a6219(0xe2)),salesforce_query_service_1=require(a247_0x2a6219(0xed)),salesforce_rest_service_1=require(a247_0x2a6219(0xdd));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1a494c,_0x3b4a34){const _0x116d23=a247_0x2a6219;this[_0x116d23(0xe8)]=_0x1a494c,this[_0x116d23(0xb7)]=_0x3b4a34,this[_0x116d23(0xde)]=0xc8;}[a247_0x2a6219(0xbc)](_0x41a0e0){const _0x107faa=a247_0x2a6219,_0x292864=(0x0,flosum_naming_utils_1[_0x107faa(0xc0)])(_0x41a0e0,[_0x107faa(0xe5),_0x107faa(0xce),_0x107faa(0xb4),_0x107faa(0xc3),_0x107faa(0xc4),'Id']);return{'id':_0x292864['Id'],'name':_0x292864['Component_Name__c'],'type':_0x292864[_0x107faa(0xce)],'fileName':_0x292864['File_Name__c'],'crc32':_0x292864[_0x107faa(0xb4)],'version':+_0x292864[_0x107faa(0xc4)]};}async[a247_0x2a6219(0xdc)](_0x397d02){const _0x574205=a247_0x2a6219,[_0x49aeb5]=await this[_0x574205(0xe8)][_0x574205(0xd3)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x574205(0xbb)](_0x574205(0xe1),_0x397d02));if(!_0x49aeb5)throw new not_found_error_1[(_0x574205(0xd1))](_0x574205(0xd0)+_0x397d02+'\x22\x20not\x20found\x20in\x20flosum.');return _0x49aeb5['Id'];}async['getBranchIdByName'](_0x170377){const _0x2165e5=a247_0x2a6219,[_0x1e08e9]=await this[_0x2165e5(0xe8)][_0x2165e5(0xd3)](queries_1[_0x2165e5(0xf1)][_0x2165e5(0xbb)](_0x2165e5(0xe1),_0x170377));if(!_0x1e08e9)throw new not_found_error_1[(_0x2165e5(0xd1))]('Branch\x20\x22'+_0x170377+'\x22\x20not\x20found\x20in\x20flosum.');return _0x1e08e9['Id'];}async['getComponentRecordTypes'](){const _0x1fbe61=a247_0x2a6219,_0x335356=await this['queryService'][_0x1fbe61(0xd3)](queries_1[_0x1fbe61(0xbe)]);return _0x335356[_0x1fbe61(0xec)](_0x525aa2=>(0x0,flosum_naming_utils_1[_0x1fbe61(0xc0)])(_0x525aa2,['Id',_0x1fbe61(0xb1)]))[_0x1fbe61(0xec)](_0x112773=>({'id':_0x112773['Id'],'name':_0x112773['Name']}));}async[a247_0x2a6219(0xbd)](_0x1d0d74,_0x51b664){const _0x1b8a8b=a247_0x2a6219,_0xfd2c97=[];while(_0x1d0d74[_0x1b8a8b(0xef)]){const _0xc2ce68=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x1b8a8b(0xbb)](_0x1b8a8b(0xc6),_0x1d0d74[_0x1b8a8b(0xb3)](0x0,this[_0x1b8a8b(0xde)])['map'](_0x2e389e=>'\x27'+_0x2e389e+'\x27')[_0x1b8a8b(0xd8)](','))[_0x1b8a8b(0xbb)](_0x1b8a8b(0xc2),_0x51b664),_0x1dec3a=await this[_0x1b8a8b(0xe8)][_0x1b8a8b(0xd3)](_0xc2ce68);_0xfd2c97['push'](..._0x1dec3a);}return _0xfd2c97['map'](_0x2c38ec=>this[_0x1b8a8b(0xbc)](_0x2c38ec));}async['fetchBranchComponentsByFilenames'](_0x4e7b3b,_0x3fe8fc){const _0x56facb=a247_0x2a6219,_0x1c4bc4=[];while(_0x4e7b3b[_0x56facb(0xef)]){const _0x378526=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x56facb(0xbb)]('%fileNames%',_0x4e7b3b['splice'](0x0,this[_0x56facb(0xde)])[_0x56facb(0xec)](_0x466592=>'\x27'+_0x466592+'\x27')[_0x56facb(0xd8)](','))['replace'](_0x56facb(0xb6),_0x3fe8fc),_0x3c4934=await this[_0x56facb(0xe8)][_0x56facb(0xd3)](_0x378526);_0x1c4bc4[_0x56facb(0xcf)](..._0x3c4934);}return _0x1c4bc4['map'](_0x1ee6f2=>this[_0x56facb(0xbc)](_0x1ee6f2));}async['fetchRepositoryComponents'](_0x569709){const _0x41de39=a247_0x2a6219,_0x216813=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x41de39(0xbb)](_0x41de39(0xc2),_0x569709),_0x5200d1=await this[_0x41de39(0xe8)]['query'](_0x216813);return _0x5200d1[_0x41de39(0xec)](_0x4a930b=>this[_0x41de39(0xbc)](_0x4a930b));}async[a247_0x2a6219(0xd6)](_0x4ea02e){const _0x51b20a=a247_0x2a6219,_0x18434c=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x51b20a(0xbb)](_0x51b20a(0xb6),_0x4ea02e),_0x2a8ab4=await this[_0x51b20a(0xe8)]['query'](_0x18434c);return _0x2a8ab4[_0x51b20a(0xec)](_0xf1cfbd=>this[_0x51b20a(0xbc)](_0xf1cfbd));}async[a247_0x2a6219(0xf2)](_0x23cafc){const _0x23a8af=a247_0x2a6219,_0x21739f=[..._0x23cafc],_0x1c9b1b=[];while(_0x21739f['length']){const _0x16881b=queries_1[_0x23a8af(0xe0)][_0x23a8af(0xbb)](_0x23a8af(0xd5),_0x21739f[_0x23a8af(0xb3)](0x0,this[_0x23a8af(0xde)])['map'](_0x3cc7e3=>'\x27'+_0x3cc7e3+'\x27')['join'](',')),_0x5af5fb=await this['queryService'][_0x23a8af(0xd3)](_0x16881b);_0x1c9b1b[_0x23a8af(0xcf)](..._0x5af5fb['map'](_0x55c7e5=>_0x55c7e5['Id']));}return _0x1c9b1b;}async[a247_0x2a6219(0xcb)](_0x2ce6c9,_0x56b5d4){const _0xec20ae=a247_0x2a6219;return this[_0xec20ae(0xb7)][_0xec20ae(0xeb)](constants_1[_0xec20ae(0xc9)],{[constants_1[_0xec20ae(0xca)]+'Repository__c']:_0x56b5d4,[constants_1['FLOSUM_NAMESPACE']+_0xec20ae(0xaf)]:_0x2ce6c9['substr'](0x0,0xff),[constants_1[_0xec20ae(0xca)]+_0xec20ae(0xc7)]:'Completed',[constants_1[_0xec20ae(0xbf)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a247_0x2a6219(0xc8)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a247_0x2a6219(0xe9)],salesforce_rest_service_1[a247_0x2a6219(0xd4)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;function a247_0xf20c(){const _0x3bd50f=['toString','GET_BRANCH_BY_NAME_QUERY','fetchCommitManifestsByComponentIds','558309tpGDyB','__esModule','function','Commit_Name__c','1063398vtNLnn','Name','1930802ZsNVJV','splice','CRC32__c','getOwnPropertyDescriptor','%branchId%','restService','40ywBuJA','4749235RGLBFi','apply','replace','extractComponentMetadataFromRecord','fetchRepositoryComponentsByFilenames','GET_COMPONENT_RECORD_TYPES_QUERY','FLOSUM_GIT_NAMESPACE','extractFieldsFromRecord','object','%repositoryId%','File_Name__c','Version__c','81QRJIPH','%fileNames%','Status__c','Service','FLOSUM_COMMIT','FLOSUM_NAMESPACE','createCommit','(((.+)+)+)+$','__decorate','Component_Type__c','push','Repository\x20\x22','NotFoundError','SalesforceGitSyncService','query','SalesforceRestService','%componentIds%','fetchBranchComponents','../queries','join','../../../../constants','decorate','../../../../core/errors/not-found.error','getRepositoryIdByName','./salesforce-rest.service','MAX_QUERY_ARRAY_ITEMS','defineProperty','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','%name%','../utils/flosum-naming.utils','6342450CuomUX','5118771jLLeEp','Component_Name__c','search','__metadata','queryService','SalesforceQueryService','1569144uPXXCR','post','map','./salesforce-query.service','constructor','length'];a247_0xf20c=function(){return _0x3bd50f;};return a247_0xf20c();}