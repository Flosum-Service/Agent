const a246_0x38ff7a=a246_0x2031;(function(_0x28cabf,_0x2645de){const _0x462c18=a246_0x2031,_0x1d845e=_0x28cabf();while(!![]){try{const _0x2f4e00=-parseInt(_0x462c18(0xec))/0x1*(parseInt(_0x462c18(0xcc))/0x2)+-parseInt(_0x462c18(0x10a))/0x3+-parseInt(_0x462c18(0xe7))/0x4*(-parseInt(_0x462c18(0xd5))/0x5)+parseInt(_0x462c18(0xd8))/0x6*(-parseInt(_0x462c18(0xe5))/0x7)+-parseInt(_0x462c18(0xd7))/0x8*(-parseInt(_0x462c18(0x109))/0x9)+-parseInt(_0x462c18(0x100))/0xa*(-parseInt(_0x462c18(0xf6))/0xb)+parseInt(_0x462c18(0x105))/0xc*(-parseInt(_0x462c18(0xd0))/0xd);if(_0x2f4e00===_0x2645de)break;else _0x1d845e['push'](_0x1d845e['shift']());}catch(_0x2328ff){_0x1d845e['push'](_0x1d845e['shift']());}}}(a246_0x2674,0xea651));const a246_0x4a2d4c=(function(){let _0x4e9ae0=!![];return function(_0x350138,_0x18d515){const _0x24c974=_0x4e9ae0?function(){if(_0x18d515){const _0x5d9cfc=_0x18d515['apply'](_0x350138,arguments);return _0x18d515=null,_0x5d9cfc;}}:function(){};return _0x4e9ae0=![],_0x24c974;};}()),a246_0x21880f=a246_0x4a2d4c(this,function(){const _0x1b714c=a246_0x2031;return a246_0x21880f['toString']()[_0x1b714c(0xe8)](_0x1b714c(0xf7))[_0x1b714c(0xca)]()[_0x1b714c(0xfc)](a246_0x21880f)[_0x1b714c(0xe8)]('(((.+)+)+)+$');});a246_0x21880f();'use strict';var __decorate=this&&this['__decorate']||function(_0x5f0775,_0x15a932,_0x4fd1d2,_0x3c2478){const _0x41f4db=a246_0x2031;var _0x405be6=arguments[_0x41f4db(0xff)],_0x2e25b2=_0x405be6<0x3?_0x15a932:_0x3c2478===null?_0x3c2478=Object[_0x41f4db(0xeb)](_0x15a932,_0x4fd1d2):_0x3c2478,_0x7fe6b;if(typeof Reflect===_0x41f4db(0x108)&&typeof Reflect[_0x41f4db(0xd4)]===_0x41f4db(0x103))_0x2e25b2=Reflect[_0x41f4db(0xd4)](_0x5f0775,_0x15a932,_0x4fd1d2,_0x3c2478);else{for(var _0xdae30f=_0x5f0775[_0x41f4db(0xff)]-0x1;_0xdae30f>=0x0;_0xdae30f--)if(_0x7fe6b=_0x5f0775[_0xdae30f])_0x2e25b2=(_0x405be6<0x3?_0x7fe6b(_0x2e25b2):_0x405be6>0x3?_0x7fe6b(_0x15a932,_0x4fd1d2,_0x2e25b2):_0x7fe6b(_0x15a932,_0x4fd1d2))||_0x2e25b2;}return _0x405be6>0x3&&_0x2e25b2&&Object[_0x41f4db(0xdd)](_0x15a932,_0x4fd1d2,_0x2e25b2),_0x2e25b2;},__metadata=this&&this[a246_0x38ff7a(0xd1)]||function(_0x169faa,_0x585a25){const _0x3c6607=a246_0x38ff7a;if(typeof Reflect===_0x3c6607(0x108)&&typeof Reflect[_0x3c6607(0x110)]==='function')return Reflect[_0x3c6607(0x110)](_0x169faa,_0x585a25);};Object[a246_0x38ff7a(0xdd)](exports,a246_0x38ff7a(0xc6),{'value':!![]}),exports[a246_0x38ff7a(0xf4)]=void 0x0;function a246_0x2674(){const _0x59182f=['restService','\x22\x20not\x20found\x20in\x20flosum.','__esModule','%branchId%','Branch\x20\x22','getBranchIdByName','toString','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','62caYDzS','../utils/flosum-naming.utils','CRC32__c','getRepositoryIdByName','64831TxpISK','__metadata','Repository\x20\x22','Repository__c','decorate','355kTKAFk','../queries','617272zFRTyl','48RrjdQA','Name','join','Completed','%fileNames%','defineProperty','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','typedi','Version__c','fetchBranchComponents','query','./salesforce-query.service','Commit_Name__c','1251544BrbBxh','MAX_QUERY_ARRAY_ITEMS','59308MtFETq','search','FLOSUM_NAMESPACE','fetchCommitManifestsByComponentIds','getOwnPropertyDescriptor','15167BzxtOs','../../../../core/errors/not-found.error','%name%','splice','Component_Name__c','extractFieldsFromRecord','fetchBranchComponentsByFilenames','push','SalesforceGitSyncService','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','55JDpvZa','(((.+)+)+)+$','Status__c','Service','GET_REPOSITORY_BY_NAME_QUERY','FLOSUM_COMMIT','constructor','File_Name__c','%repositoryId%','length','3618130bBWWIh','Is_From_Agent__c','NotFoundError','function','replace','696lxGMLk','Component_Type__c','queryService','object','72HnBucm','987642RXQPUj','createCommit','extractComponentMetadataFromRecord','../../../../constants','map','fetchRepositoryComponentsByFilenames','metadata','getComponentRecordTypes'];a246_0x2674=function(){return _0x59182f;};return a246_0x2674();}const not_found_error_1=require(a246_0x38ff7a(0xed)),typedi_1=require(a246_0x38ff7a(0xdf)),constants_1=require(a246_0x38ff7a(0x10d)),queries_1=require(a246_0x38ff7a(0xd6)),flosum_naming_utils_1=require(a246_0x38ff7a(0xcd)),salesforce_query_service_1=require(a246_0x38ff7a(0xe3)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x4194c4,_0x2a4c86){const _0x454c92=a246_0x38ff7a;this['queryService']=_0x4194c4,this[_0x454c92(0x112)]=_0x2a4c86,this[_0x454c92(0xe6)]=0xc8;}[a246_0x38ff7a(0x10c)](_0xe3d47a){const _0x21f6eb=a246_0x38ff7a,_0x5263e2=(0x0,flosum_naming_utils_1[_0x21f6eb(0xf1)])(_0xe3d47a,[_0x21f6eb(0xf0),_0x21f6eb(0x106),_0x21f6eb(0xce),_0x21f6eb(0xfd),'Version__c','Id']);return{'id':_0x5263e2['Id'],'name':_0x5263e2[_0x21f6eb(0xf0)],'type':_0x5263e2[_0x21f6eb(0x106)],'fileName':_0x5263e2[_0x21f6eb(0xfd)],'crc32':_0x5263e2[_0x21f6eb(0xce)],'version':+_0x5263e2[_0x21f6eb(0xe0)]};}async[a246_0x38ff7a(0xcf)](_0xfc18b0){const _0x28680c=a246_0x38ff7a,[_0x4c49d7]=await this[_0x28680c(0x107)][_0x28680c(0xe2)](queries_1[_0x28680c(0xfa)][_0x28680c(0x104)](_0x28680c(0xee),_0xfc18b0));if(!_0x4c49d7)throw new not_found_error_1[(_0x28680c(0x102))](_0x28680c(0xd2)+_0xfc18b0+_0x28680c(0x113));return _0x4c49d7['Id'];}async[a246_0x38ff7a(0xc9)](_0x3a9f12){const _0x7c06a9=a246_0x38ff7a,[_0x383a68]=await this['queryService'][_0x7c06a9(0xe2)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x7c06a9(0x104)](_0x7c06a9(0xee),_0x3a9f12));if(!_0x383a68)throw new not_found_error_1['NotFoundError'](_0x7c06a9(0xc8)+_0x3a9f12+'\x22\x20not\x20found\x20in\x20flosum.');return _0x383a68['Id'];}async[a246_0x38ff7a(0x111)](){const _0x4aaf9f=a246_0x38ff7a,_0x13536d=await this[_0x4aaf9f(0x107)][_0x4aaf9f(0xe2)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x13536d[_0x4aaf9f(0x10e)](_0x3cf25b=>(0x0,flosum_naming_utils_1[_0x4aaf9f(0xf1)])(_0x3cf25b,['Id',_0x4aaf9f(0xd9)]))[_0x4aaf9f(0x10e)](_0x4412f5=>({'id':_0x4412f5['Id'],'name':_0x4412f5[_0x4aaf9f(0xd9)]}));}async[a246_0x38ff7a(0x10f)](_0x59e85f,_0xe70331){const _0x1ab2af=a246_0x38ff7a,_0x5d598f=[];while(_0x59e85f[_0x1ab2af(0xff)]){const _0x130c91=queries_1[_0x1ab2af(0xcb)]['replace'](_0x1ab2af(0xdc),_0x59e85f[_0x1ab2af(0xef)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x1ab2af(0x10e)](_0x1e49ee=>'\x27'+_0x1e49ee+'\x27')[_0x1ab2af(0xda)](','))[_0x1ab2af(0x104)](_0x1ab2af(0xfe),_0xe70331),_0x461a34=await this[_0x1ab2af(0x107)][_0x1ab2af(0xe2)](_0x130c91);_0x5d598f[_0x1ab2af(0xf3)](..._0x461a34);}return _0x5d598f[_0x1ab2af(0x10e)](_0x352502=>this[_0x1ab2af(0x10c)](_0x352502));}async[a246_0x38ff7a(0xf2)](_0x345156,_0x159c19){const _0x1e42f5=a246_0x38ff7a,_0x6b9fe2=[];while(_0x345156['length']){const _0x5c40fc=queries_1[_0x1e42f5(0xf5)][_0x1e42f5(0x104)]('%fileNames%',_0x345156['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x221f23=>'\x27'+_0x221f23+'\x27')[_0x1e42f5(0xda)](','))[_0x1e42f5(0x104)]('%branchId%',_0x159c19),_0xaccbdd=await this[_0x1e42f5(0x107)][_0x1e42f5(0xe2)](_0x5c40fc);_0x6b9fe2[_0x1e42f5(0xf3)](..._0xaccbdd);}return _0x6b9fe2[_0x1e42f5(0x10e)](_0x479d56=>this[_0x1e42f5(0x10c)](_0x479d56));}async['fetchRepositoryComponents'](_0x2234a8){const _0x555369=a246_0x38ff7a,_0x289c7b=queries_1['GET_REPOSITORY_COMPONENTS_QUERY']['replace'](_0x555369(0xfe),_0x2234a8),_0x29b33b=await this[_0x555369(0x107)][_0x555369(0xe2)](_0x289c7b);return _0x29b33b[_0x555369(0x10e)](_0x4f6cb7=>this[_0x555369(0x10c)](_0x4f6cb7));}async[a246_0x38ff7a(0xe1)](_0xfd171e){const _0x1cdd59=a246_0x38ff7a,_0x34d6c6=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x1cdd59(0x104)](_0x1cdd59(0xc7),_0xfd171e),_0x5a62fa=await this[_0x1cdd59(0x107)]['query'](_0x34d6c6);return _0x5a62fa[_0x1cdd59(0x10e)](_0x7c58ca=>this[_0x1cdd59(0x10c)](_0x7c58ca));}async[a246_0x38ff7a(0xea)](_0x3b4416){const _0x478d9e=a246_0x38ff7a,_0x50161c=[..._0x3b4416],_0x197412=[];while(_0x50161c[_0x478d9e(0xff)]){const _0x544336=queries_1[_0x478d9e(0xde)][_0x478d9e(0x104)]('%componentIds%',_0x50161c[_0x478d9e(0xef)](0x0,this[_0x478d9e(0xe6)])[_0x478d9e(0x10e)](_0x21f3f9=>'\x27'+_0x21f3f9+'\x27')[_0x478d9e(0xda)](',')),_0x15b802=await this[_0x478d9e(0x107)][_0x478d9e(0xe2)](_0x544336);_0x197412['push'](..._0x15b802['map'](_0x1d24a9=>_0x1d24a9['Id']));}return _0x197412;}async[a246_0x38ff7a(0x10b)](_0x3def5b,_0x4333da){const _0x1a7b56=a246_0x38ff7a;return this[_0x1a7b56(0x112)]['post'](constants_1[_0x1a7b56(0xfb)],{[constants_1[_0x1a7b56(0xe9)]+_0x1a7b56(0xd3)]:_0x4333da,[constants_1[_0x1a7b56(0xe9)]+_0x1a7b56(0xe4)]:_0x3def5b['substr'](0x0,0xff),[constants_1[_0x1a7b56(0xe9)]+_0x1a7b56(0xf8)]:_0x1a7b56(0xdb),[constants_1['FLOSUM_GIT_NAMESPACE']+_0x1a7b56(0x101)]:!![]});}};function a246_0x2031(_0x50cf3f,_0x3eb3c0){const _0x203d56=a246_0x2674();return a246_0x2031=function(_0x21880f,_0x4a2d4c){_0x21880f=_0x21880f-0xc6;let _0x267497=_0x203d56[_0x21880f];return _0x267497;},a246_0x2031(_0x50cf3f,_0x3eb3c0);}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a246_0x38ff7a(0xf9)])(),__metadata('design:paramtypes',[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a246_0x38ff7a(0xf4)]=SalesforceGitSyncService;