const a273_0x22420d=a273_0x59d0;(function(_0x3d6dc4,_0x5dfa55){const _0x186971=a273_0x59d0,_0x3d3f5e=_0x3d6dc4();while(!![]){try{const _0x359d11=parseInt(_0x186971(0x1e0))/0x1+-parseInt(_0x186971(0x1cf))/0x2+parseInt(_0x186971(0x1f4))/0x3+parseInt(_0x186971(0x1f1))/0x4*(-parseInt(_0x186971(0x1de))/0x5)+parseInt(_0x186971(0x1e8))/0x6*(-parseInt(_0x186971(0x1db))/0x7)+parseInt(_0x186971(0x1e2))/0x8+parseInt(_0x186971(0x1cb))/0x9;if(_0x359d11===_0x5dfa55)break;else _0x3d3f5e['push'](_0x3d3f5e['shift']());}catch(_0xfed18e){_0x3d3f5e['push'](_0x3d3f5e['shift']());}}}(a273_0x3c34,0x5881b));const a273_0x366e20=(function(){let _0x2855fc=!![];return function(_0x193389,_0x42f3fa){const _0x4fbda8=_0x2855fc?function(){const _0x3db849=a273_0x59d0;if(_0x42f3fa){const _0x876c69=_0x42f3fa[_0x3db849(0x1e5)](_0x193389,arguments);return _0x42f3fa=null,_0x876c69;}}:function(){};return _0x2855fc=![],_0x4fbda8;};}()),a273_0x1d8885=a273_0x366e20(this,function(){const _0x196083=a273_0x59d0;return a273_0x1d8885[_0x196083(0x1f8)]()[_0x196083(0x1d7)](_0x196083(0x1c1))[_0x196083(0x1f8)]()['constructor'](a273_0x1d8885)[_0x196083(0x1d7)](_0x196083(0x1c1));});a273_0x1d8885();'use strict';var __decorate=this&&this[a273_0x22420d(0x1cc)]||function(_0x11a4ff,_0x35080e,_0x1a10ab,_0x7ebbdd){const _0xbaa311=a273_0x22420d;var _0x47ed6f=arguments['length'],_0x447955=_0x47ed6f<0x3?_0x35080e:_0x7ebbdd===null?_0x7ebbdd=Object[_0xbaa311(0x209)](_0x35080e,_0x1a10ab):_0x7ebbdd,_0xacc5f7;if(typeof Reflect===_0xbaa311(0x1f5)&&typeof Reflect[_0xbaa311(0x1fd)]===_0xbaa311(0x204))_0x447955=Reflect['decorate'](_0x11a4ff,_0x35080e,_0x1a10ab,_0x7ebbdd);else{for(var _0x1cba2e=_0x11a4ff[_0xbaa311(0x201)]-0x1;_0x1cba2e>=0x0;_0x1cba2e--)if(_0xacc5f7=_0x11a4ff[_0x1cba2e])_0x447955=(_0x47ed6f<0x3?_0xacc5f7(_0x447955):_0x47ed6f>0x3?_0xacc5f7(_0x35080e,_0x1a10ab,_0x447955):_0xacc5f7(_0x35080e,_0x1a10ab))||_0x447955;}return _0x47ed6f>0x3&&_0x447955&&Object[_0xbaa311(0x1fc)](_0x35080e,_0x1a10ab,_0x447955),_0x447955;},__metadata=this&&this[a273_0x22420d(0x1ed)]||function(_0x3515e1,_0x4c87cb){const _0x74299=a273_0x22420d;if(typeof Reflect===_0x74299(0x1f5)&&typeof Reflect[_0x74299(0x1ee)]===_0x74299(0x204))return Reflect[_0x74299(0x1ee)](_0x3515e1,_0x4c87cb);};Object['defineProperty'](exports,a273_0x22420d(0x1bd),{'value':!![]}),exports[a273_0x22420d(0x1c3)]=void 0x0;function a273_0x3c34(){const _0x2da777=['fetchCommitManifestsByComponentIds','%componentIds%','extractFieldsFromRecord','createCommit','search','queryService','replace','map','1617EDkRno','%branchId%','getComponentRecordTypes','35hMptbV','%fileNames%','481507TXRgbD','query','2354616mdBodo','design:paramtypes','fetchRepositoryComponentsByFilenames','apply','join','../../../../constants','15222ugrXel','fetchBranchComponents','MAX_QUERY_ARRAY_ITEMS','Commit_Name__c','splice','__metadata','metadata','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','Name','351136ZDSwOK','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','post','1954839MEtxvP','object','FLOSUM_NAMESPACE','Branch\x20\x22','toString','Repository\x20\x22','GET_COMPONENT_RECORD_TYPES_QUERY','typedi','defineProperty','decorate','Repository__c','extractComponentMetadataFromRecord','push','length','restService','FLOSUM_GIT_NAMESPACE','function','fetchRepositoryComponents','getBranchIdByName','SalesforceQueryService','../../../../core/errors/not-found.error','getOwnPropertyDescriptor','fetchBranchComponentsByFilenames','CRC32__c','Service','File_Name__c','Version__c','__esModule','NotFoundError','Component_Type__c','GET_BRANCH_BY_NAME_QUERY','(((.+)+)+)+$','Status__c','SalesforceGitSyncService','Completed','./salesforce-rest.service','GET_REPOSITORY_COMPONENTS_QUERY','./salesforce-query.service','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','%name%','../utils/flosum-naming.utils','6470244FMJhpn','__decorate','%repositoryId%','getRepositoryIdByName','1166610VVnRCq','Is_From_Agent__c','\x22\x20not\x20found\x20in\x20flosum.','Component_Name__c'];a273_0x3c34=function(){return _0x2da777;};return a273_0x3c34();}const not_found_error_1=require(a273_0x22420d(0x208)),typedi_1=require(a273_0x22420d(0x1fb)),constants_1=require(a273_0x22420d(0x1e7)),queries_1=require('../queries'),flosum_naming_utils_1=require(a273_0x22420d(0x1ca)),salesforce_query_service_1=require(a273_0x22420d(0x1c7)),salesforce_rest_service_1=require(a273_0x22420d(0x1c5));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x69740a,_0x1728da){const _0x15687a=a273_0x22420d;this[_0x15687a(0x1d8)]=_0x69740a,this['restService']=_0x1728da,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}['extractComponentMetadataFromRecord'](_0x397cfd){const _0x24930e=a273_0x22420d,_0x3cff07=(0x0,flosum_naming_utils_1[_0x24930e(0x1d5)])(_0x397cfd,[_0x24930e(0x1d2),'Component_Type__c',_0x24930e(0x20b),_0x24930e(0x20d),_0x24930e(0x20e),'Id']);return{'id':_0x3cff07['Id'],'name':_0x3cff07['Component_Name__c'],'type':_0x3cff07[_0x24930e(0x1bf)],'fileName':_0x3cff07[_0x24930e(0x20d)],'crc32':_0x3cff07['CRC32__c'],'version':+_0x3cff07[_0x24930e(0x20e)]};}async[a273_0x22420d(0x1ce)](_0x47dfa1){const _0x21fc6b=a273_0x22420d,[_0x102d4e]=await this[_0x21fc6b(0x1d8)][_0x21fc6b(0x1e1)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x21fc6b(0x1d9)](_0x21fc6b(0x1c9),_0x47dfa1));if(!_0x102d4e)throw new not_found_error_1[(_0x21fc6b(0x1be))](_0x21fc6b(0x1f9)+_0x47dfa1+_0x21fc6b(0x1d1));return _0x102d4e['Id'];}async[a273_0x22420d(0x206)](_0x2314ed){const _0x4615b4=a273_0x22420d,[_0x405bf6]=await this[_0x4615b4(0x1d8)][_0x4615b4(0x1e1)](queries_1[_0x4615b4(0x1c0)][_0x4615b4(0x1d9)]('%name%',_0x2314ed));if(!_0x405bf6)throw new not_found_error_1[(_0x4615b4(0x1be))](_0x4615b4(0x1f7)+_0x2314ed+_0x4615b4(0x1d1));return _0x405bf6['Id'];}async[a273_0x22420d(0x1dd)](){const _0x448c13=a273_0x22420d,_0x5a2328=await this[_0x448c13(0x1d8)][_0x448c13(0x1e1)](queries_1[_0x448c13(0x1fa)]);return _0x5a2328['map'](_0x3c94a0=>(0x0,flosum_naming_utils_1[_0x448c13(0x1d5)])(_0x3c94a0,['Id',_0x448c13(0x1f0)]))[_0x448c13(0x1da)](_0x54b31a=>({'id':_0x54b31a['Id'],'name':_0x54b31a[_0x448c13(0x1f0)]}));}async[a273_0x22420d(0x1e4)](_0x51c260,_0xf8478f){const _0x174157=a273_0x22420d,_0x4db8c0=[];while(_0x51c260[_0x174157(0x201)]){const _0x2c9080=queries_1[_0x174157(0x1c8)][_0x174157(0x1d9)](_0x174157(0x1df),_0x51c260['splice'](0x0,this[_0x174157(0x1ea)])[_0x174157(0x1da)](_0x10bdcd=>'\x27'+_0x10bdcd+'\x27')[_0x174157(0x1e6)](','))['replace'](_0x174157(0x1cd),_0xf8478f),_0x422822=await this[_0x174157(0x1d8)]['query'](_0x2c9080);_0x4db8c0[_0x174157(0x200)](..._0x422822);}return _0x4db8c0[_0x174157(0x1da)](_0x53314d=>this['extractComponentMetadataFromRecord'](_0x53314d));}async[a273_0x22420d(0x20a)](_0x52542b,_0x3405f1){const _0x26486f=a273_0x22420d,_0xd01e70=[];while(_0x52542b['length']){const _0x101ed7=queries_1[_0x26486f(0x1ef)][_0x26486f(0x1d9)](_0x26486f(0x1df),_0x52542b[_0x26486f(0x1ec)](0x0,this[_0x26486f(0x1ea)])['map'](_0x26022a=>'\x27'+_0x26022a+'\x27')[_0x26486f(0x1e6)](','))[_0x26486f(0x1d9)](_0x26486f(0x1dc),_0x3405f1),_0x4070a7=await this[_0x26486f(0x1d8)][_0x26486f(0x1e1)](_0x101ed7);_0xd01e70[_0x26486f(0x200)](..._0x4070a7);}return _0xd01e70[_0x26486f(0x1da)](_0x445ac7=>this['extractComponentMetadataFromRecord'](_0x445ac7));}async[a273_0x22420d(0x205)](_0x1d5c35){const _0x4c5aff=a273_0x22420d,_0x59fb7b=queries_1[_0x4c5aff(0x1c6)][_0x4c5aff(0x1d9)](_0x4c5aff(0x1cd),_0x1d5c35),_0x18823d=await this[_0x4c5aff(0x1d8)]['query'](_0x59fb7b);return _0x18823d['map'](_0x211a1d=>this[_0x4c5aff(0x1ff)](_0x211a1d));}async[a273_0x22420d(0x1e9)](_0xe1c1f0){const _0x1120f4=a273_0x22420d,_0x1af356=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x1120f4(0x1d9)](_0x1120f4(0x1dc),_0xe1c1f0),_0x36345c=await this['queryService']['query'](_0x1af356);return _0x36345c['map'](_0x5943c5=>this[_0x1120f4(0x1ff)](_0x5943c5));}async[a273_0x22420d(0x1d3)](_0x5c2cb6){const _0x47699a=a273_0x22420d,_0x151ce5=[..._0x5c2cb6],_0x31b78d=[];while(_0x151ce5['length']){const _0x36b43c=queries_1[_0x47699a(0x1f2)][_0x47699a(0x1d9)](_0x47699a(0x1d4),_0x151ce5['splice'](0x0,this[_0x47699a(0x1ea)])[_0x47699a(0x1da)](_0x185d69=>'\x27'+_0x185d69+'\x27')[_0x47699a(0x1e6)](',')),_0x589ae0=await this['queryService'][_0x47699a(0x1e1)](_0x36b43c);_0x31b78d[_0x47699a(0x200)](..._0x589ae0[_0x47699a(0x1da)](_0x49b809=>_0x49b809['Id']));}return _0x31b78d;}async[a273_0x22420d(0x1d6)](_0x2b88b2,_0x31c0b0){const _0x8dfbe4=a273_0x22420d;return this[_0x8dfbe4(0x202)][_0x8dfbe4(0x1f3)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x8dfbe4(0x1f6)]+_0x8dfbe4(0x1fe)]:_0x31c0b0,[constants_1[_0x8dfbe4(0x1f6)]+_0x8dfbe4(0x1eb)]:_0x2b88b2['substr'](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x8dfbe4(0x1c2)]:_0x8dfbe4(0x1c4),[constants_1[_0x8dfbe4(0x203)]+_0x8dfbe4(0x1d0)]:!![]});}};function a273_0x59d0(_0x409b99,_0x5d78a7){const _0xca3933=a273_0x3c34();return a273_0x59d0=function(_0x1d8885,_0x366e20){_0x1d8885=_0x1d8885-0x1bd;let _0x3c34b9=_0xca3933[_0x1d8885];return _0x3c34b9;},a273_0x59d0(_0x409b99,_0x5d78a7);}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a273_0x22420d(0x20c)])(),__metadata(a273_0x22420d(0x1e3),[salesforce_query_service_1[a273_0x22420d(0x207)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a273_0x22420d(0x1c3)]=SalesforceGitSyncService;