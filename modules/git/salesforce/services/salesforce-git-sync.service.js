const a273_0x59559e=a273_0x4881;(function(_0x33a9f4,_0x168760){const _0x481049=a273_0x4881,_0x4a863f=_0x33a9f4();while(!![]){try{const _0x4eea5b=-parseInt(_0x481049(0xdd))/0x1+parseInt(_0x481049(0xe1))/0x2*(parseInt(_0x481049(0x117))/0x3)+parseInt(_0x481049(0xe3))/0x4*(-parseInt(_0x481049(0x115))/0x5)+parseInt(_0x481049(0xeb))/0x6*(parseInt(_0x481049(0xe5))/0x7)+parseInt(_0x481049(0x10a))/0x8*(parseInt(_0x481049(0x109))/0x9)+-parseInt(_0x481049(0xff))/0xa+parseInt(_0x481049(0x100))/0xb;if(_0x4eea5b===_0x168760)break;else _0x4a863f['push'](_0x4a863f['shift']());}catch(_0x58dda6){_0x4a863f['push'](_0x4a863f['shift']());}}}(a273_0x33af,0x74e5a));function a273_0x33af(){const _0x170b01=['Completed','../../../../constants','GET_COMPONENT_RECORD_TYPES_QUERY','Name','post','%name%','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','4169601KQUNiy','8KWOXqm','map','function','replace','decorate','fetchBranchComponents','typedi','(((.+)+)+)+$','splice','getBranchIdByName','../../../../core/errors/not-found.error','215DPXryJ','Status__c','6726GKAZqd','substr','Repository__c','%fileNames%','Version__c','MAX_QUERY_ARRAY_ITEMS','../queries','__decorate','__metadata','%componentIds%','%branchId%','605134yLNvfJ','SalesforceQueryService','__esModule','\x22\x20not\x20found\x20in\x20flosum.','478TXDwhE','NotFoundError','82052uSUUxD','join','34412ucZuFD','getOwnPropertyDescriptor','GET_REPOSITORY_BY_NAME_QUERY','query','./salesforce-rest.service','Service','492ZYNrFa','fetchBranchComponentsByFilenames','fetchRepositoryComponents','extractComponentMetadataFromRecord','FLOSUM_COMMIT','search','push','Component_Type__c','object','length','FLOSUM_NAMESPACE','File_Name__c','Component_Name__c','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','./salesforce-query.service','../utils/flosum-naming.utils','metadata','defineProperty','FLOSUM_GIT_NAMESPACE','queryService','2221910QdookQ','8645505shgMfc','extractFieldsFromRecord'];a273_0x33af=function(){return _0x170b01;};return a273_0x33af();}const a273_0x45f83c=(function(){let _0x305f0a=!![];return function(_0x37ae22,_0x15c7a8){const _0x3bb456=_0x305f0a?function(){if(_0x15c7a8){const _0x176584=_0x15c7a8['apply'](_0x37ae22,arguments);return _0x15c7a8=null,_0x176584;}}:function(){};return _0x305f0a=![],_0x3bb456;};}()),a273_0xc6abc4=a273_0x45f83c(this,function(){const _0x5999fa=a273_0x4881;return a273_0xc6abc4['toString']()[_0x5999fa(0xf0)](_0x5999fa(0x111))['toString']()['constructor'](a273_0xc6abc4)[_0x5999fa(0xf0)]('(((.+)+)+)+$');});a273_0xc6abc4();function a273_0x4881(_0x544547,_0x23dc60){const _0x402f07=a273_0x33af();return a273_0x4881=function(_0xc6abc4,_0x45f83c){_0xc6abc4=_0xc6abc4-0xd6;let _0x33af2a=_0x402f07[_0xc6abc4];return _0x33af2a;},a273_0x4881(_0x544547,_0x23dc60);}'use strict';var __decorate=this&&this[a273_0x59559e(0xd9)]||function(_0x570f5c,_0xf247ca,_0x1ad572,_0x25373e){const _0x10c4e3=a273_0x59559e;var _0x2e4247=arguments[_0x10c4e3(0xf4)],_0x4980ff=_0x2e4247<0x3?_0xf247ca:_0x25373e===null?_0x25373e=Object[_0x10c4e3(0xe6)](_0xf247ca,_0x1ad572):_0x25373e,_0xe3cb88;if(typeof Reflect===_0x10c4e3(0xf3)&&typeof Reflect[_0x10c4e3(0x10e)]===_0x10c4e3(0x10c))_0x4980ff=Reflect['decorate'](_0x570f5c,_0xf247ca,_0x1ad572,_0x25373e);else{for(var _0xa9b97d=_0x570f5c[_0x10c4e3(0xf4)]-0x1;_0xa9b97d>=0x0;_0xa9b97d--)if(_0xe3cb88=_0x570f5c[_0xa9b97d])_0x4980ff=(_0x2e4247<0x3?_0xe3cb88(_0x4980ff):_0x2e4247>0x3?_0xe3cb88(_0xf247ca,_0x1ad572,_0x4980ff):_0xe3cb88(_0xf247ca,_0x1ad572))||_0x4980ff;}return _0x2e4247>0x3&&_0x4980ff&&Object[_0x10c4e3(0xfc)](_0xf247ca,_0x1ad572,_0x4980ff),_0x4980ff;},__metadata=this&&this[a273_0x59559e(0xda)]||function(_0x42cf7d,_0x4c9063){const _0x555294=a273_0x59559e;if(typeof Reflect===_0x555294(0xf3)&&typeof Reflect['metadata']===_0x555294(0x10c))return Reflect[_0x555294(0xfb)](_0x42cf7d,_0x4c9063);};Object[a273_0x59559e(0xfc)](exports,a273_0x59559e(0xdf),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a273_0x59559e(0x114)),typedi_1=require(a273_0x59559e(0x110)),constants_1=require(a273_0x59559e(0x103)),queries_1=require(a273_0x59559e(0xd8)),flosum_naming_utils_1=require(a273_0x59559e(0xfa)),salesforce_query_service_1=require(a273_0x59559e(0xf9)),salesforce_rest_service_1=require(a273_0x59559e(0xe9));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x3d503d,_0x233e25){const _0x3dcda4=a273_0x59559e;this[_0x3dcda4(0xfe)]=_0x3d503d,this['restService']=_0x233e25,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}['extractComponentMetadataFromRecord'](_0x5060f3){const _0x38fe2c=a273_0x59559e,_0x3aa6d7=(0x0,flosum_naming_utils_1[_0x38fe2c(0x101)])(_0x5060f3,[_0x38fe2c(0xf7),'Component_Type__c','CRC32__c','File_Name__c',_0x38fe2c(0xd6),'Id']);return{'id':_0x3aa6d7['Id'],'name':_0x3aa6d7[_0x38fe2c(0xf7)],'type':_0x3aa6d7[_0x38fe2c(0xf2)],'fileName':_0x3aa6d7[_0x38fe2c(0xf6)],'crc32':_0x3aa6d7['CRC32__c'],'version':+_0x3aa6d7['Version__c']};}async['getRepositoryIdByName'](_0x12d5b8){const _0x3985c4=a273_0x59559e,[_0x48af66]=await this[_0x3985c4(0xfe)][_0x3985c4(0xe8)](queries_1[_0x3985c4(0xe7)][_0x3985c4(0x10d)](_0x3985c4(0x107),_0x12d5b8));if(!_0x48af66)throw new not_found_error_1[(_0x3985c4(0xe2))]('Repository\x20\x22'+_0x12d5b8+_0x3985c4(0xe0));return _0x48af66['Id'];}async[a273_0x59559e(0x113)](_0x3ed2d2){const _0x412085=a273_0x59559e,[_0x1dab01]=await this[_0x412085(0xfe)][_0x412085(0xe8)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x412085(0x10d)](_0x412085(0x107),_0x3ed2d2));if(!_0x1dab01)throw new not_found_error_1[(_0x412085(0xe2))]('Branch\x20\x22'+_0x3ed2d2+'\x22\x20not\x20found\x20in\x20flosum.');return _0x1dab01['Id'];}async['getComponentRecordTypes'](){const _0x629afe=a273_0x59559e,_0x2e3cdd=await this[_0x629afe(0xfe)]['query'](queries_1[_0x629afe(0x104)]);return _0x2e3cdd[_0x629afe(0x10b)](_0x403170=>(0x0,flosum_naming_utils_1[_0x629afe(0x101)])(_0x403170,['Id',_0x629afe(0x105)]))[_0x629afe(0x10b)](_0x28af9b=>({'id':_0x28af9b['Id'],'name':_0x28af9b['Name']}));}async['fetchRepositoryComponentsByFilenames'](_0x849712,_0x23709e){const _0x515d1e=a273_0x59559e,_0x1e4c7e=[];while(_0x849712[_0x515d1e(0xf4)]){const _0x37ee7f=queries_1[_0x515d1e(0xf8)][_0x515d1e(0x10d)](_0x515d1e(0x11a),_0x849712[_0x515d1e(0x112)](0x0,this[_0x515d1e(0xd7)])[_0x515d1e(0x10b)](_0x1b585c=>'\x27'+_0x1b585c+'\x27')[_0x515d1e(0xe4)](','))[_0x515d1e(0x10d)]('%repositoryId%',_0x23709e),_0x558419=await this['queryService'][_0x515d1e(0xe8)](_0x37ee7f);_0x1e4c7e['push'](..._0x558419);}return _0x1e4c7e[_0x515d1e(0x10b)](_0x5f21be=>this[_0x515d1e(0xee)](_0x5f21be));}async[a273_0x59559e(0xec)](_0x2b60ae,_0x468c8c){const _0x5bf61c=a273_0x59559e,_0xeb7c56=[];while(_0x2b60ae[_0x5bf61c(0xf4)]){const _0xb63a6d=queries_1[_0x5bf61c(0x108)][_0x5bf61c(0x10d)](_0x5bf61c(0x11a),_0x2b60ae[_0x5bf61c(0x112)](0x0,this[_0x5bf61c(0xd7)])[_0x5bf61c(0x10b)](_0x181dc1=>'\x27'+_0x181dc1+'\x27')['join'](','))[_0x5bf61c(0x10d)](_0x5bf61c(0xdc),_0x468c8c),_0x124e61=await this[_0x5bf61c(0xfe)][_0x5bf61c(0xe8)](_0xb63a6d);_0xeb7c56[_0x5bf61c(0xf1)](..._0x124e61);}return _0xeb7c56[_0x5bf61c(0x10b)](_0x255bd4=>this[_0x5bf61c(0xee)](_0x255bd4));}async[a273_0x59559e(0xed)](_0x46487b){const _0x4768d9=a273_0x59559e,_0x235c42=queries_1['GET_REPOSITORY_COMPONENTS_QUERY']['replace']('%repositoryId%',_0x46487b),_0x21c952=await this['queryService'][_0x4768d9(0xe8)](_0x235c42);return _0x21c952[_0x4768d9(0x10b)](_0x3e8c6c=>this[_0x4768d9(0xee)](_0x3e8c6c));}async[a273_0x59559e(0x10f)](_0x1afa3f){const _0x3655de=a273_0x59559e,_0x5d4e71=queries_1['GET_BRANCH_COMPONENTS_QUERY']['replace'](_0x3655de(0xdc),_0x1afa3f),_0x52c261=await this[_0x3655de(0xfe)][_0x3655de(0xe8)](_0x5d4e71);return _0x52c261[_0x3655de(0x10b)](_0x23332e=>this['extractComponentMetadataFromRecord'](_0x23332e));}async['fetchCommitManifestsByComponentIds'](_0x5bdcbe){const _0x27fa4d=a273_0x59559e,_0x7abd82=[..._0x5bdcbe],_0x5d03ad=[];while(_0x7abd82[_0x27fa4d(0xf4)]){const _0x59199b=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x27fa4d(0x10d)](_0x27fa4d(0xdb),_0x7abd82[_0x27fa4d(0x112)](0x0,this[_0x27fa4d(0xd7)])[_0x27fa4d(0x10b)](_0x189d6e=>'\x27'+_0x189d6e+'\x27')['join'](',')),_0x4f992e=await this[_0x27fa4d(0xfe)][_0x27fa4d(0xe8)](_0x59199b);_0x5d03ad['push'](..._0x4f992e['map'](_0x6990b8=>_0x6990b8['Id']));}return _0x5d03ad;}async['createCommit'](_0x1fde6a,_0x59e7f2){const _0x578c31=a273_0x59559e;return this['restService'][_0x578c31(0x106)](constants_1[_0x578c31(0xef)],{[constants_1[_0x578c31(0xf5)]+_0x578c31(0x119)]:_0x59e7f2,[constants_1[_0x578c31(0xf5)]+'Commit_Name__c']:_0x1fde6a[_0x578c31(0x118)](0x0,0xff),[constants_1[_0x578c31(0xf5)]+_0x578c31(0x116)]:_0x578c31(0x102),[constants_1[_0x578c31(0xfd)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a273_0x59559e(0xea)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a273_0x59559e(0xde)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;