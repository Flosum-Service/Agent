const a275_0x2383cb=a275_0x5da0;function a275_0x5da0(_0x110e51,_0x3505c4){const _0x4b332d=a275_0x138f();return a275_0x5da0=function(_0x3f17df,_0x4949c8){_0x3f17df=_0x3f17df-0x1bb;let _0x138fd0=_0x4b332d[_0x3f17df];return _0x138fd0;},a275_0x5da0(_0x110e51,_0x3505c4);}(function(_0x490a5a,_0x4b6d2f){const _0x394fe2=a275_0x5da0,_0x3c366e=_0x490a5a();while(!![]){try{const _0x365d8f=parseInt(_0x394fe2(0x202))/0x1*(parseInt(_0x394fe2(0x1bc))/0x2)+-parseInt(_0x394fe2(0x1d3))/0x3*(-parseInt(_0x394fe2(0x1c3))/0x4)+-parseInt(_0x394fe2(0x1d1))/0x5+parseInt(_0x394fe2(0x1e1))/0x6+-parseInt(_0x394fe2(0x1ce))/0x7+-parseInt(_0x394fe2(0x1cb))/0x8*(parseInt(_0x394fe2(0x1c4))/0x9)+parseInt(_0x394fe2(0x1d4))/0xa;if(_0x365d8f===_0x4b6d2f)break;else _0x3c366e['push'](_0x3c366e['shift']());}catch(_0x227ef6){_0x3c366e['push'](_0x3c366e['shift']());}}}(a275_0x138f,0xcb50d));const a275_0x4949c8=(function(){let _0x5984e7=!![];return function(_0x2ddfff,_0x3a07b3){const _0x58e736=_0x5984e7?function(){const _0x2bba67=a275_0x5da0;if(_0x3a07b3){const _0x308868=_0x3a07b3[_0x2bba67(0x1d9)](_0x2ddfff,arguments);return _0x3a07b3=null,_0x308868;}}:function(){};return _0x5984e7=![],_0x58e736;};}()),a275_0x3f17df=a275_0x4949c8(this,function(){const _0x4c60a1=a275_0x5da0;return a275_0x3f17df[_0x4c60a1(0x205)]()['search'](_0x4c60a1(0x201))['toString']()[_0x4c60a1(0x1e5)](a275_0x3f17df)[_0x4c60a1(0x1de)]('(((.+)+)+)+$');});a275_0x3f17df();'use strict';var __decorate=this&&this[a275_0x2383cb(0x1ec)]||function(_0x2fda86,_0x2f150b,_0x1f713f,_0x3f2f6e){const _0x2d76f2=a275_0x2383cb;var _0x428511=arguments['length'],_0x146651=_0x428511<0x3?_0x2f150b:_0x3f2f6e===null?_0x3f2f6e=Object[_0x2d76f2(0x1db)](_0x2f150b,_0x1f713f):_0x3f2f6e,_0x5c3b4b;if(typeof Reflect===_0x2d76f2(0x200)&&typeof Reflect[_0x2d76f2(0x1c0)]===_0x2d76f2(0x1d6))_0x146651=Reflect[_0x2d76f2(0x1c0)](_0x2fda86,_0x2f150b,_0x1f713f,_0x3f2f6e);else{for(var _0x212d15=_0x2fda86[_0x2d76f2(0x1e0)]-0x1;_0x212d15>=0x0;_0x212d15--)if(_0x5c3b4b=_0x2fda86[_0x212d15])_0x146651=(_0x428511<0x3?_0x5c3b4b(_0x146651):_0x428511>0x3?_0x5c3b4b(_0x2f150b,_0x1f713f,_0x146651):_0x5c3b4b(_0x2f150b,_0x1f713f))||_0x146651;}return _0x428511>0x3&&_0x146651&&Object[_0x2d76f2(0x1be)](_0x2f150b,_0x1f713f,_0x146651),_0x146651;},__metadata=this&&this['__metadata']||function(_0x5ae37c,_0x53b815){const _0x441ce3=a275_0x2383cb;if(typeof Reflect==='object'&&typeof Reflect[_0x441ce3(0x1d7)]===_0x441ce3(0x1d6))return Reflect[_0x441ce3(0x1d7)](_0x5ae37c,_0x53b815);};Object[a275_0x2383cb(0x1be)](exports,a275_0x2383cb(0x1d5),{'value':!![]}),exports[a275_0x2383cb(0x1e8)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require('typedi'),constants_1=require(a275_0x2383cb(0x1f1)),queries_1=require('../queries'),flosum_naming_utils_1=require(a275_0x2383cb(0x1bd)),salesforce_query_service_1=require(a275_0x2383cb(0x1e4)),salesforce_rest_service_1=require(a275_0x2383cb(0x1fa));function a275_0x138f(){const _0x56c955=['1kRWqci','map','Version__c','toString','restService','getBranchIdByName','3074746BHvGEP','../utils/flosum-naming.utils','defineProperty','GET_COMPONENT_RECORD_TYPES_QUERY','decorate','MAX_QUERY_ARRAY_ITEMS','getRepositoryIdByName','4IrrGsM','6111VdaFbO','FLOSUM_COMMIT','extractFieldsFromRecord','GET_BRANCH_BY_NAME_QUERY','%fileNames%','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','CRC32__c','10328mwRcjP','SalesforceRestService','Branch\x20\x22','6780781DSrxYE','FLOSUM_NAMESPACE','%branchId%','2758215jZKFon','substr','579603JaFYhH','928420jIyLNA','__esModule','function','metadata','Component_Name__c','apply','%repositoryId%','getOwnPropertyDescriptor','FLOSUM_GIT_NAMESPACE','join','search','GET_REPOSITORY_COMPONENTS_QUERY','length','8437680aisOst','splice','replace','./salesforce-query.service','constructor','createCommit','\x22\x20not\x20found\x20in\x20flosum.','SalesforceGitSyncService','extractComponentMetadataFromRecord','fetchRepositoryComponents','getComponentRecordTypes','__decorate','push','Service','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','File_Name__c','../../../../constants','Completed','query','%name%','Name','fetchRepositoryComponentsByFilenames','NotFoundError','design:paramtypes','post','./salesforce-rest.service','Component_Type__c','fetchBranchComponentsByFilenames','queryService','SalesforceQueryService','Status__c','object','(((.+)+)+)+$'];a275_0x138f=function(){return _0x56c955;};return a275_0x138f();}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1bb8bc,_0x38c395){const _0x40caed=a275_0x2383cb;this['queryService']=_0x1bb8bc,this['restService']=_0x38c395,this[_0x40caed(0x1c1)]=0xc8;}[a275_0x2383cb(0x1e9)](_0x132205){const _0x175144=a275_0x2383cb,_0x1bdcf9=(0x0,flosum_naming_utils_1[_0x175144(0x1c6)])(_0x132205,[_0x175144(0x1d8),_0x175144(0x1fb),_0x175144(0x1ca),_0x175144(0x1f0),'Version__c','Id']);return{'id':_0x1bdcf9['Id'],'name':_0x1bdcf9[_0x175144(0x1d8)],'type':_0x1bdcf9[_0x175144(0x1fb)],'fileName':_0x1bdcf9[_0x175144(0x1f0)],'crc32':_0x1bdcf9[_0x175144(0x1ca)],'version':+_0x1bdcf9[_0x175144(0x204)]};}async[a275_0x2383cb(0x1c2)](_0x428e32){const _0x325d66=a275_0x2383cb,[_0x4dfd36]=await this[_0x325d66(0x1fd)][_0x325d66(0x1f3)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x325d66(0x1e3)](_0x325d66(0x1f4),_0x428e32));if(!_0x4dfd36)throw new not_found_error_1[(_0x325d66(0x1f7))]('Repository\x20\x22'+_0x428e32+_0x325d66(0x1e7));return _0x4dfd36['Id'];}async[a275_0x2383cb(0x1bb)](_0x30a794){const _0xee6bba=a275_0x2383cb,[_0x1156bf]=await this[_0xee6bba(0x1fd)][_0xee6bba(0x1f3)](queries_1[_0xee6bba(0x1c7)][_0xee6bba(0x1e3)](_0xee6bba(0x1f4),_0x30a794));if(!_0x1156bf)throw new not_found_error_1[(_0xee6bba(0x1f7))](_0xee6bba(0x1cd)+_0x30a794+_0xee6bba(0x1e7));return _0x1156bf['Id'];}async[a275_0x2383cb(0x1eb)](){const _0x5238f0=a275_0x2383cb,_0x53246b=await this['queryService'][_0x5238f0(0x1f3)](queries_1[_0x5238f0(0x1bf)]);return _0x53246b[_0x5238f0(0x203)](_0x2ce8c9=>(0x0,flosum_naming_utils_1[_0x5238f0(0x1c6)])(_0x2ce8c9,['Id',_0x5238f0(0x1f5)]))[_0x5238f0(0x203)](_0x84fdf1=>({'id':_0x84fdf1['Id'],'name':_0x84fdf1[_0x5238f0(0x1f5)]}));}async[a275_0x2383cb(0x1f6)](_0x48fc4d,_0x6f1b35){const _0x398b3e=a275_0x2383cb,_0x90f698=[];while(_0x48fc4d['length']){const _0x1cc799=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x398b3e(0x1e3)](_0x398b3e(0x1c8),_0x48fc4d[_0x398b3e(0x1e2)](0x0,this[_0x398b3e(0x1c1)])[_0x398b3e(0x203)](_0x90faf4=>'\x27'+_0x90faf4+'\x27')[_0x398b3e(0x1dd)](','))[_0x398b3e(0x1e3)](_0x398b3e(0x1da),_0x6f1b35),_0x4617a3=await this['queryService']['query'](_0x1cc799);_0x90f698[_0x398b3e(0x1ed)](..._0x4617a3);}return _0x90f698[_0x398b3e(0x203)](_0x269967=>this[_0x398b3e(0x1e9)](_0x269967));}async[a275_0x2383cb(0x1fc)](_0x356239,_0x1c8f72){const _0x3a4f80=a275_0x2383cb,_0x5cbf9f=[];while(_0x356239[_0x3a4f80(0x1e0)]){const _0xf17be6=queries_1[_0x3a4f80(0x1c9)][_0x3a4f80(0x1e3)](_0x3a4f80(0x1c8),_0x356239[_0x3a4f80(0x1e2)](0x0,this[_0x3a4f80(0x1c1)])[_0x3a4f80(0x203)](_0x3773c4=>'\x27'+_0x3773c4+'\x27')['join'](','))[_0x3a4f80(0x1e3)]('%branchId%',_0x1c8f72),_0x720196=await this['queryService'][_0x3a4f80(0x1f3)](_0xf17be6);_0x5cbf9f[_0x3a4f80(0x1ed)](..._0x720196);}return _0x5cbf9f[_0x3a4f80(0x203)](_0x1bf40c=>this['extractComponentMetadataFromRecord'](_0x1bf40c));}async[a275_0x2383cb(0x1ea)](_0x5bf623){const _0x3b2f9f=a275_0x2383cb,_0x42fc48=queries_1[_0x3b2f9f(0x1df)][_0x3b2f9f(0x1e3)](_0x3b2f9f(0x1da),_0x5bf623),_0xc38a96=await this[_0x3b2f9f(0x1fd)][_0x3b2f9f(0x1f3)](_0x42fc48);return _0xc38a96[_0x3b2f9f(0x203)](_0x216e30=>this['extractComponentMetadataFromRecord'](_0x216e30));}async['fetchBranchComponents'](_0xff075a){const _0xe0f0e2=a275_0x2383cb,_0x32fa06=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0xe0f0e2(0x1e3)](_0xe0f0e2(0x1d0),_0xff075a),_0x1a16f5=await this['queryService'][_0xe0f0e2(0x1f3)](_0x32fa06);return _0x1a16f5['map'](_0x1f4abb=>this[_0xe0f0e2(0x1e9)](_0x1f4abb));}async['fetchCommitManifestsByComponentIds'](_0x4a1645){const _0x4702dc=a275_0x2383cb,_0x944f25=[..._0x4a1645],_0x542a8f=[];while(_0x944f25[_0x4702dc(0x1e0)]){const _0x2a9224=queries_1[_0x4702dc(0x1ef)][_0x4702dc(0x1e3)]('%componentIds%',_0x944f25[_0x4702dc(0x1e2)](0x0,this[_0x4702dc(0x1c1)])['map'](_0x1e73d1=>'\x27'+_0x1e73d1+'\x27')[_0x4702dc(0x1dd)](',')),_0x38c0a0=await this['queryService']['query'](_0x2a9224);_0x542a8f[_0x4702dc(0x1ed)](..._0x38c0a0[_0x4702dc(0x203)](_0x290d48=>_0x290d48['Id']));}return _0x542a8f;}async[a275_0x2383cb(0x1e6)](_0x294ec5,_0x1e55b6){const _0x256e60=a275_0x2383cb;return this[_0x256e60(0x206)][_0x256e60(0x1f9)](constants_1[_0x256e60(0x1c5)],{[constants_1['FLOSUM_NAMESPACE']+'Repository__c']:_0x1e55b6,[constants_1[_0x256e60(0x1cf)]+'Commit_Name__c']:_0x294ec5[_0x256e60(0x1d2)](0x0,0xff),[constants_1[_0x256e60(0x1cf)]+_0x256e60(0x1ff)]:_0x256e60(0x1f2),[constants_1[_0x256e60(0x1dc)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a275_0x2383cb(0x1ee)])(),__metadata(a275_0x2383cb(0x1f8),[salesforce_query_service_1[a275_0x2383cb(0x1fe)],salesforce_rest_service_1[a275_0x2383cb(0x1cc)]])],SalesforceGitSyncService),exports[a275_0x2383cb(0x1e8)]=SalesforceGitSyncService;