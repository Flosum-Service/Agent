const a263_0x4f9122=a263_0x507f;(function(_0x2fd814,_0x57229c){const _0x430752=a263_0x507f,_0x2e272d=_0x2fd814();while(!![]){try{const _0xb20cae=-parseInt(_0x430752(0xf2))/0x1+parseInt(_0x430752(0xef))/0x2*(parseInt(_0x430752(0xe7))/0x3)+-parseInt(_0x430752(0x11c))/0x4*(-parseInt(_0x430752(0x10c))/0x5)+parseInt(_0x430752(0x100))/0x6+-parseInt(_0x430752(0x115))/0x7*(-parseInt(_0x430752(0x107))/0x8)+-parseInt(_0x430752(0xf7))/0x9*(parseInt(_0x430752(0xe5))/0xa)+-parseInt(_0x430752(0xe8))/0xb*(parseInt(_0x430752(0x111))/0xc);if(_0xb20cae===_0x57229c)break;else _0x2e272d['push'](_0x2e272d['shift']());}catch(_0x221e3a){_0x2e272d['push'](_0x2e272d['shift']());}}}(a263_0x5ddf,0xe46b1));const a263_0x597af7=(function(){let _0x3e57ed=!![];return function(_0x16d073,_0x146cbf){const _0x2b4f27=_0x3e57ed?function(){const _0x3970ed=a263_0x507f;if(_0x146cbf){const _0x1aa53d=_0x146cbf[_0x3970ed(0x10b)](_0x16d073,arguments);return _0x146cbf=null,_0x1aa53d;}}:function(){};return _0x3e57ed=![],_0x2b4f27;};}()),a263_0x33fabe=a263_0x597af7(this,function(){const _0x4b448f=a263_0x507f;return a263_0x33fabe['toString']()['search'](_0x4b448f(0xe1))[_0x4b448f(0x11f)]()[_0x4b448f(0xf6)](a263_0x33fabe)[_0x4b448f(0xe2)](_0x4b448f(0xe1));});a263_0x33fabe();'use strict';function a263_0x507f(_0x1e9519,_0xea0156){const _0x54ffff=a263_0x5ddf();return a263_0x507f=function(_0x33fabe,_0x597af7){_0x33fabe=_0x33fabe-0xde;let _0x5ddf44=_0x54ffff[_0x33fabe];return _0x5ddf44;},a263_0x507f(_0x1e9519,_0xea0156);}var __decorate=this&&this['__decorate']||function(_0x4576fd,_0x3a8708,_0x2750ad,_0x1e1dff){const _0x110253=a263_0x507f;var _0x23afdc=arguments['length'],_0x31d94c=_0x23afdc<0x3?_0x3a8708:_0x1e1dff===null?_0x1e1dff=Object[_0x110253(0x103)](_0x3a8708,_0x2750ad):_0x1e1dff,_0x559bfb;if(typeof Reflect===_0x110253(0x125)&&typeof Reflect['decorate']===_0x110253(0xf0))_0x31d94c=Reflect[_0x110253(0x109)](_0x4576fd,_0x3a8708,_0x2750ad,_0x1e1dff);else{for(var _0x39b99c=_0x4576fd[_0x110253(0xea)]-0x1;_0x39b99c>=0x0;_0x39b99c--)if(_0x559bfb=_0x4576fd[_0x39b99c])_0x31d94c=(_0x23afdc<0x3?_0x559bfb(_0x31d94c):_0x23afdc>0x3?_0x559bfb(_0x3a8708,_0x2750ad,_0x31d94c):_0x559bfb(_0x3a8708,_0x2750ad))||_0x31d94c;}return _0x23afdc>0x3&&_0x31d94c&&Object[_0x110253(0x101)](_0x3a8708,_0x2750ad,_0x31d94c),_0x31d94c;},__metadata=this&&this['__metadata']||function(_0x589303,_0x20b6cf){const _0xb9b0b=a263_0x507f;if(typeof Reflect==='object'&&typeof Reflect[_0xb9b0b(0x118)]===_0xb9b0b(0xf0))return Reflect[_0xb9b0b(0x118)](_0x589303,_0x20b6cf);};Object[a263_0x4f9122(0x101)](exports,'__esModule',{'value':!![]}),exports[a263_0x4f9122(0xe6)]=void 0x0;function a263_0x5ddf(){const _0x28b98c=['./salesforce-rest.service','Repository\x20\x22','Commit_Name__c','Name','object','restService','MAX_QUERY_ARRAY_ITEMS','GET_BRANCH_BY_NAME_QUERY','%componentIds%','extractFieldsFromRecord','extractComponentMetadataFromRecord','(((.+)+)+)+$','search','substr','\x22\x20not\x20found\x20in\x20flosum.','10DWWLpo','SalesforceGitSyncService','9ndWnjl','121GTcXSN','GET_REPOSITORY_COMPONENTS_QUERY','length','getComponentRecordTypes','Repository__c','../../../../core/errors/not-found.error','FLOSUM_GIT_NAMESPACE','1222246HjJVox','function','map','793443zfClhJ','../../../../constants','fetchRepositoryComponents','splice','constructor','11490021ujzzCR','%name%','typedi','push','join','getRepositoryIdByName','%fileNames%','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','Is_From_Agent__c','1486770cpvAZs','defineProperty','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','getOwnPropertyDescriptor','queryService','NotFoundError','Completed','10763576aFIRwf','query','decorate','FLOSUM_COMMIT','apply','5822165lHCHoh','replace','fetchBranchComponentsByFilenames','createCommit','fetchCommitManifestsByComponentIds','1729452WfYLrI','../utils/flosum-naming.utils','Status__c','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','7TWGGiM','%branchId%','getBranchIdByName','metadata','../queries','Component_Name__c','GET_BRANCH_COMPONENTS_QUERY','4upJeqj','GET_COMPONENT_RECORD_TYPES_QUERY','Component_Type__c','toString','File_Name__c'];a263_0x5ddf=function(){return _0x28b98c;};return a263_0x5ddf();}const not_found_error_1=require(a263_0x4f9122(0xed)),typedi_1=require(a263_0x4f9122(0xf9)),constants_1=require(a263_0x4f9122(0xf3)),queries_1=require(a263_0x4f9122(0x119)),flosum_naming_utils_1=require(a263_0x4f9122(0x112)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a263_0x4f9122(0x121));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x2bc142,_0x44c19b){const _0x57c522=a263_0x4f9122;this[_0x57c522(0x104)]=_0x2bc142,this[_0x57c522(0x126)]=_0x44c19b,this[_0x57c522(0x127)]=0xc8;}[a263_0x4f9122(0xe0)](_0x23fa5c){const _0x28b909=a263_0x4f9122,_0x73ecf5=(0x0,flosum_naming_utils_1[_0x28b909(0xdf)])(_0x23fa5c,[_0x28b909(0x11a),'Component_Type__c','CRC32__c',_0x28b909(0x120),'Version__c','Id']);return{'id':_0x73ecf5['Id'],'name':_0x73ecf5['Component_Name__c'],'type':_0x73ecf5[_0x28b909(0x11e)],'fileName':_0x73ecf5[_0x28b909(0x120)],'crc32':_0x73ecf5['CRC32__c'],'version':+_0x73ecf5['Version__c']};}async[a263_0x4f9122(0xfc)](_0xfaf333){const _0x311141=a263_0x4f9122,[_0x493962]=await this[_0x311141(0x104)][_0x311141(0x108)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x311141(0x10d)](_0x311141(0xf8),_0xfaf333));if(!_0x493962)throw new not_found_error_1[(_0x311141(0x105))](_0x311141(0x122)+_0xfaf333+'\x22\x20not\x20found\x20in\x20flosum.');return _0x493962['Id'];}async[a263_0x4f9122(0x117)](_0x1932b5){const _0x131466=a263_0x4f9122,[_0x48aa13]=await this[_0x131466(0x104)]['query'](queries_1[_0x131466(0x128)]['replace'](_0x131466(0xf8),_0x1932b5));if(!_0x48aa13)throw new not_found_error_1[(_0x131466(0x105))]('Branch\x20\x22'+_0x1932b5+_0x131466(0xe4));return _0x48aa13['Id'];}async[a263_0x4f9122(0xeb)](){const _0x4e3e3d=a263_0x4f9122,_0x4889b7=await this[_0x4e3e3d(0x104)][_0x4e3e3d(0x108)](queries_1[_0x4e3e3d(0x11d)]);return _0x4889b7[_0x4e3e3d(0xf1)](_0x42a91c=>(0x0,flosum_naming_utils_1[_0x4e3e3d(0xdf)])(_0x42a91c,['Id',_0x4e3e3d(0x124)]))[_0x4e3e3d(0xf1)](_0x4df6f1=>({'id':_0x4df6f1['Id'],'name':_0x4df6f1['Name']}));}async['fetchRepositoryComponentsByFilenames'](_0xdb3964,_0x137c86){const _0x530312=a263_0x4f9122,_0xc781f0=[];while(_0xdb3964['length']){const _0xc9d3ef=queries_1[_0x530312(0xfe)][_0x530312(0x10d)](_0x530312(0xfd),_0xdb3964[_0x530312(0xf5)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x530312(0xf1)](_0xe87868=>'\x27'+_0xe87868+'\x27')[_0x530312(0xfb)](','))[_0x530312(0x10d)]('%repositoryId%',_0x137c86),_0xe9e476=await this['queryService']['query'](_0xc9d3ef);_0xc781f0[_0x530312(0xfa)](..._0xe9e476);}return _0xc781f0['map'](_0x18c852=>this['extractComponentMetadataFromRecord'](_0x18c852));}async[a263_0x4f9122(0x10e)](_0x3da545,_0x4efcc2){const _0x3b1aae=a263_0x4f9122,_0x36c286=[];while(_0x3da545[_0x3b1aae(0xea)]){const _0x22959d=queries_1[_0x3b1aae(0x102)][_0x3b1aae(0x10d)](_0x3b1aae(0xfd),_0x3da545[_0x3b1aae(0xf5)](0x0,this[_0x3b1aae(0x127)])[_0x3b1aae(0xf1)](_0x70cb75=>'\x27'+_0x70cb75+'\x27')[_0x3b1aae(0xfb)](','))['replace'](_0x3b1aae(0x116),_0x4efcc2),_0x198630=await this[_0x3b1aae(0x104)][_0x3b1aae(0x108)](_0x22959d);_0x36c286[_0x3b1aae(0xfa)](..._0x198630);}return _0x36c286['map'](_0x521796=>this['extractComponentMetadataFromRecord'](_0x521796));}async[a263_0x4f9122(0xf4)](_0x398ffc){const _0x510d5c=a263_0x4f9122,_0x93ae21=queries_1[_0x510d5c(0xe9)][_0x510d5c(0x10d)]('%repositoryId%',_0x398ffc),_0x2f55d3=await this['queryService']['query'](_0x93ae21);return _0x2f55d3[_0x510d5c(0xf1)](_0x2f01ed=>this[_0x510d5c(0xe0)](_0x2f01ed));}async['fetchBranchComponents'](_0x15d023){const _0x45c6f1=a263_0x4f9122,_0x36f51b=queries_1[_0x45c6f1(0x11b)]['replace'](_0x45c6f1(0x116),_0x15d023),_0x22e45d=await this[_0x45c6f1(0x104)][_0x45c6f1(0x108)](_0x36f51b);return _0x22e45d[_0x45c6f1(0xf1)](_0x2143fd=>this[_0x45c6f1(0xe0)](_0x2143fd));}async[a263_0x4f9122(0x110)](_0x3a3869){const _0x23e83b=a263_0x4f9122,_0x1562ee=[..._0x3a3869],_0x4ca310=[];while(_0x1562ee[_0x23e83b(0xea)]){const _0x1b25ad=queries_1[_0x23e83b(0x114)][_0x23e83b(0x10d)](_0x23e83b(0xde),_0x1562ee[_0x23e83b(0xf5)](0x0,this[_0x23e83b(0x127)])[_0x23e83b(0xf1)](_0x524e3d=>'\x27'+_0x524e3d+'\x27')[_0x23e83b(0xfb)](',')),_0x153311=await this['queryService'][_0x23e83b(0x108)](_0x1b25ad);_0x4ca310[_0x23e83b(0xfa)](..._0x153311[_0x23e83b(0xf1)](_0x5ef4be=>_0x5ef4be['Id']));}return _0x4ca310;}async[a263_0x4f9122(0x10f)](_0xb7236a,_0x3959b9){const _0x457114=a263_0x4f9122;return this['restService']['post'](constants_1[_0x457114(0x10a)],{[constants_1['FLOSUM_NAMESPACE']+_0x457114(0xec)]:_0x3959b9,[constants_1['FLOSUM_NAMESPACE']+_0x457114(0x123)]:_0xb7236a[_0x457114(0xe3)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x457114(0x113)]:_0x457114(0x106),[constants_1[_0x457114(0xee)]+_0x457114(0xff)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata('design:paramtypes',[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a263_0x4f9122(0xe6)]=SalesforceGitSyncService;