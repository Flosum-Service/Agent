const a184_0x43959e=a184_0x375f;(function(_0x4e219e,_0x1c09fc){const _0x5eabc8=a184_0x375f,_0x58f4cd=_0x4e219e();while(!![]){try{const _0x1a1bcf=parseInt(_0x5eabc8(0xb8))/0x1+parseInt(_0x5eabc8(0xe4))/0x2*(parseInt(_0x5eabc8(0xc5))/0x3)+parseInt(_0x5eabc8(0xd7))/0x4*(parseInt(_0x5eabc8(0xab))/0x5)+-parseInt(_0x5eabc8(0xa7))/0x6+parseInt(_0x5eabc8(0xa9))/0x7+parseInt(_0x5eabc8(0x99))/0x8*(-parseInt(_0x5eabc8(0xdd))/0x9)+-parseInt(_0x5eabc8(0x9d))/0xa*(parseInt(_0x5eabc8(0xcf))/0xb);if(_0x1a1bcf===_0x1c09fc)break;else _0x58f4cd['push'](_0x58f4cd['shift']());}catch(_0x2a9b24){_0x58f4cd['push'](_0x58f4cd['shift']());}}}(a184_0x2276,0x8fa2a));const a184_0x43e84d=(function(){let _0x2c37f4=!![];return function(_0x8d1692,_0x33cbe8){const _0x4bd5d9=_0x2c37f4?function(){const _0x1b7bdf=a184_0x375f;if(_0x33cbe8){const _0x14b23e=_0x33cbe8[_0x1b7bdf(0xb3)](_0x8d1692,arguments);return _0x33cbe8=null,_0x14b23e;}}:function(){};return _0x2c37f4=![],_0x4bd5d9;};}()),a184_0x5c1959=a184_0x43e84d(this,function(){const _0x5a48f1=a184_0x375f;return a184_0x5c1959['toString']()['search'](_0x5a48f1(0xd0))[_0x5a48f1(0x9f)]()[_0x5a48f1(0xa4)](a184_0x5c1959)[_0x5a48f1(0xd8)](_0x5a48f1(0xd0));});function a184_0x2276(){const _0x29e309=['NotFoundError','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','FLOSUM_NAMESPACE','2092871qHKCgb','(((.+)+)+)+$','metadata','Name','FLOSUM_GIT_NAMESPACE','FLOSUM_COMMIT','%name%','createCommit','8zDobeh','search','GET_REPOSITORY_BY_NAME_QUERY','typedi','../utils/flosum-naming.utils','splice','1307007APhaHN','query','Component_Name__c','File_Name__c','GET_REPOSITORY_COMPONENTS_QUERY','getRepositoryIdByName','GET_COMPONENT_RECORD_TYPES_QUERY','2QcOMnI','join','map','40QhAksA','fetchCommitManifestsByComponentIds','../../../../core/errors/not-found.error','function','30fSozuz','post','toString','replace','Version__c','queryService','Component_Type__c','constructor','%branchId%','SalesforceQueryService','5083206lSQCxl','push','6008408ZgMNBp','GET_BRANCH_BY_NAME_QUERY','197945lMMrbj','\x22\x20not\x20found\x20in\x20flosum.','fetchRepositoryComponentsByFilenames','Completed','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','getBranchIdByName','design:paramtypes','length','apply','__esModule','fetchBranchComponentsByFilenames','getOwnPropertyDescriptor','%fileNames%','645896CSmiCe','../queries','defineProperty','SalesforceGitSyncService','decorate','getComponentRecordTypes','restService','%componentIds%','substr','extractComponentMetadataFromRecord','../../../../constants','Repository\x20\x22','__metadata','3447033momgeq','Status__c','MAX_QUERY_ARRAY_ITEMS','Service','fetchRepositoryComponents','object','CRC32__c'];a184_0x2276=function(){return _0x29e309;};return a184_0x2276();}a184_0x5c1959();function a184_0x375f(_0x4a9e7c,_0x42ba50){const _0x4020ba=a184_0x2276();return a184_0x375f=function(_0x5c1959,_0x43e84d){_0x5c1959=_0x5c1959-0x97;let _0x227649=_0x4020ba[_0x5c1959];return _0x227649;},a184_0x375f(_0x4a9e7c,_0x42ba50);}'use strict';var __decorate=this&&this['__decorate']||function(_0x360323,_0x28a54c,_0x58fe39,_0x5e0a59){const _0x53e451=a184_0x375f;var _0x476f27=arguments[_0x53e451(0xb2)],_0x5666b9=_0x476f27<0x3?_0x28a54c:_0x5e0a59===null?_0x5e0a59=Object[_0x53e451(0xb6)](_0x28a54c,_0x58fe39):_0x5e0a59,_0x12a218;if(typeof Reflect===_0x53e451(0xca)&&typeof Reflect[_0x53e451(0xbc)]==='function')_0x5666b9=Reflect['decorate'](_0x360323,_0x28a54c,_0x58fe39,_0x5e0a59);else{for(var _0x26d8cd=_0x360323[_0x53e451(0xb2)]-0x1;_0x26d8cd>=0x0;_0x26d8cd--)if(_0x12a218=_0x360323[_0x26d8cd])_0x5666b9=(_0x476f27<0x3?_0x12a218(_0x5666b9):_0x476f27>0x3?_0x12a218(_0x28a54c,_0x58fe39,_0x5666b9):_0x12a218(_0x28a54c,_0x58fe39))||_0x5666b9;}return _0x476f27>0x3&&_0x5666b9&&Object[_0x53e451(0xba)](_0x28a54c,_0x58fe39,_0x5666b9),_0x5666b9;},__metadata=this&&this[a184_0x43959e(0xc4)]||function(_0x2c50da,_0x4be7f4){const _0x3a5d08=a184_0x43959e;if(typeof Reflect===_0x3a5d08(0xca)&&typeof Reflect[_0x3a5d08(0xd1)]===_0x3a5d08(0x9c))return Reflect[_0x3a5d08(0xd1)](_0x2c50da,_0x4be7f4);};Object[a184_0x43959e(0xba)](exports,a184_0x43959e(0xb4),{'value':!![]}),exports[a184_0x43959e(0xbb)]=void 0x0;const not_found_error_1=require(a184_0x43959e(0x9b)),typedi_1=require(a184_0x43959e(0xda)),constants_1=require(a184_0x43959e(0xc2)),queries_1=require(a184_0x43959e(0xb9)),flosum_naming_utils_1=require(a184_0x43959e(0xdb)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1752f0,_0x471814){const _0x2c92a1=a184_0x43959e;this[_0x2c92a1(0xa2)]=_0x1752f0,this[_0x2c92a1(0xbe)]=_0x471814,this[_0x2c92a1(0xc7)]=0xc8;}['extractComponentMetadataFromRecord'](_0x17e403){const _0xcf8b99=a184_0x43959e,_0x161ef8=flosum_naming_utils_1['extractFieldsFromRecord'](_0x17e403,[_0xcf8b99(0xdf),_0xcf8b99(0xa3),_0xcf8b99(0xcb),_0xcf8b99(0xe0),_0xcf8b99(0xa1),'Id']);return{'id':_0x161ef8['Id'],'name':_0x161ef8[_0xcf8b99(0xdf)],'type':_0x161ef8[_0xcf8b99(0xa3)],'fileName':_0x161ef8['File_Name__c'],'crc32':_0x161ef8[_0xcf8b99(0xcb)],'version':+_0x161ef8[_0xcf8b99(0xa1)]};}async[a184_0x43959e(0xe2)](_0x2d6355){const _0x43302d=a184_0x43959e,[_0x4021b6]=await this[_0x43302d(0xa2)][_0x43302d(0xde)](queries_1[_0x43302d(0xd9)][_0x43302d(0xa0)](_0x43302d(0xd5),_0x2d6355));if(!_0x4021b6)throw new not_found_error_1['NotFoundError'](_0x43302d(0xc3)+_0x2d6355+_0x43302d(0xac));return _0x4021b6['Id'];}async[a184_0x43959e(0xb0)](_0x307a63){const _0x475ba4=a184_0x43959e,[_0x59d415]=await this[_0x475ba4(0xa2)]['query'](queries_1[_0x475ba4(0xaa)]['replace'](_0x475ba4(0xd5),_0x307a63));if(!_0x59d415)throw new not_found_error_1[(_0x475ba4(0xcc))]('Branch\x20\x22'+_0x307a63+_0x475ba4(0xac));return _0x59d415['Id'];}async[a184_0x43959e(0xbd)](){const _0x4c839a=a184_0x43959e,_0x388d25=await this[_0x4c839a(0xa2)][_0x4c839a(0xde)](queries_1[_0x4c839a(0xe3)]);return _0x388d25[_0x4c839a(0x98)](_0x5f0e79=>flosum_naming_utils_1['extractFieldsFromRecord'](_0x5f0e79,['Id',_0x4c839a(0xd2)]))[_0x4c839a(0x98)](_0x441103=>({'id':_0x441103['Id'],'name':_0x441103['Name']}));}async[a184_0x43959e(0xad)](_0x3562ab,_0xb3ff90){const _0x24716a=a184_0x43959e,_0x339c1f=[];while(_0x3562ab[_0x24716a(0xb2)]){const _0x404026=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x24716a(0xa0)](_0x24716a(0xb7),_0x3562ab[_0x24716a(0xdc)](0x0,this[_0x24716a(0xc7)])[_0x24716a(0x98)](_0xd75f10=>'\x27'+_0xd75f10+'\x27')[_0x24716a(0x97)](','))[_0x24716a(0xa0)]('%repositoryId%',_0xb3ff90),_0x586eb3=await this[_0x24716a(0xa2)][_0x24716a(0xde)](_0x404026);_0x339c1f[_0x24716a(0xa8)](..._0x586eb3);}return _0x339c1f[_0x24716a(0x98)](_0xad942f=>this['extractComponentMetadataFromRecord'](_0xad942f));}async[a184_0x43959e(0xb5)](_0x3d5ced,_0xef05df){const _0x3f3f46=a184_0x43959e,_0x3e8f1=[];while(_0x3d5ced[_0x3f3f46(0xb2)]){const _0x5d716f=queries_1[_0x3f3f46(0xcd)]['replace']('%fileNames%',_0x3d5ced[_0x3f3f46(0xdc)](0x0,this[_0x3f3f46(0xc7)])['map'](_0x1604ca=>'\x27'+_0x1604ca+'\x27')[_0x3f3f46(0x97)](','))[_0x3f3f46(0xa0)]('%branchId%',_0xef05df),_0x3c3a13=await this['queryService'][_0x3f3f46(0xde)](_0x5d716f);_0x3e8f1[_0x3f3f46(0xa8)](..._0x3c3a13);}return _0x3e8f1['map'](_0x3255f3=>this['extractComponentMetadataFromRecord'](_0x3255f3));}async[a184_0x43959e(0xc9)](_0x13e54e){const _0x56f613=a184_0x43959e,_0x3a995c=queries_1[_0x56f613(0xe1)][_0x56f613(0xa0)]('%repositoryId%',_0x13e54e),_0x317487=await this[_0x56f613(0xa2)][_0x56f613(0xde)](_0x3a995c);return _0x317487[_0x56f613(0x98)](_0x133f54=>this[_0x56f613(0xc1)](_0x133f54));}async['fetchBranchComponents'](_0x1419d1){const _0x3fc1c0=a184_0x43959e,_0x4d85ee=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x3fc1c0(0xa0)](_0x3fc1c0(0xa5),_0x1419d1),_0x2b1eb9=await this['queryService'][_0x3fc1c0(0xde)](_0x4d85ee);return _0x2b1eb9['map'](_0x5198ba=>this[_0x3fc1c0(0xc1)](_0x5198ba));}async[a184_0x43959e(0x9a)](_0x44c984){const _0x33f6f6=a184_0x43959e,_0x32bb6f=[..._0x44c984],_0x6da7f5=[];while(_0x32bb6f[_0x33f6f6(0xb2)]){const _0x5492df=queries_1[_0x33f6f6(0xaf)][_0x33f6f6(0xa0)](_0x33f6f6(0xbf),_0x32bb6f['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x33f6f6(0x98)](_0x198ead=>'\x27'+_0x198ead+'\x27')['join'](',')),_0x50dbff=await this[_0x33f6f6(0xa2)][_0x33f6f6(0xde)](_0x5492df);_0x6da7f5[_0x33f6f6(0xa8)](..._0x50dbff['map'](_0x5fdb82=>_0x5fdb82['Id']));}return _0x6da7f5;}async[a184_0x43959e(0xd6)](_0x36b02b,_0x52b2e1){const _0x2ffffc=a184_0x43959e;return this['restService'][_0x2ffffc(0x9e)](constants_1[_0x2ffffc(0xd4)],{[constants_1['FLOSUM_NAMESPACE']+'Repository__c']:_0x52b2e1,[constants_1[_0x2ffffc(0xce)]+'Commit_Name__c']:_0x36b02b[_0x2ffffc(0xc0)](0x0,0xff),[constants_1[_0x2ffffc(0xce)]+_0x2ffffc(0xc6)]:_0x2ffffc(0xae),[constants_1[_0x2ffffc(0xd3)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a184_0x43959e(0xc8)](),__metadata(a184_0x43959e(0xb1),[salesforce_query_service_1[a184_0x43959e(0xa6)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;