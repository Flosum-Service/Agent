const a236_0x197c6e=a236_0xaca6;(function(_0x6d8553,_0x24e71a){const _0x3f8016=a236_0xaca6,_0x119324=_0x6d8553();while(!![]){try{const _0x2fdd63=-parseInt(_0x3f8016(0x1d6))/0x1+-parseInt(_0x3f8016(0x213))/0x2*(-parseInt(_0x3f8016(0x1f3))/0x3)+parseInt(_0x3f8016(0x210))/0x4*(-parseInt(_0x3f8016(0x1e9))/0x5)+-parseInt(_0x3f8016(0x1fb))/0x6*(parseInt(_0x3f8016(0x20d))/0x7)+-parseInt(_0x3f8016(0x217))/0x8*(-parseInt(_0x3f8016(0x200))/0x9)+parseInt(_0x3f8016(0x202))/0xa*(-parseInt(_0x3f8016(0x214))/0xb)+parseInt(_0x3f8016(0x208))/0xc;if(_0x2fdd63===_0x24e71a)break;else _0x119324['push'](_0x119324['shift']());}catch(_0x5d7b9d){_0x119324['push'](_0x119324['shift']());}}}(a236_0x5107,0x72023));const a236_0x1d6aa8=(function(){let _0x2f0360=!![];return function(_0x4fa3c4,_0x3a7f62){const _0xb7028f=_0x2f0360?function(){if(_0x3a7f62){const _0x25595a=_0x3a7f62['apply'](_0x4fa3c4,arguments);return _0x3a7f62=null,_0x25595a;}}:function(){};return _0x2f0360=![],_0xb7028f;};}()),a236_0x183935=a236_0x1d6aa8(this,function(){const _0x3f7278=a236_0xaca6;return a236_0x183935['toString']()['search'](_0x3f7278(0x207))[_0x3f7278(0x1d8)]()[_0x3f7278(0x204)](a236_0x183935)['search'](_0x3f7278(0x207));});a236_0x183935();function a236_0x5107(){const _0x4ff7eb=['Commit_Name__c','(((.+)+)+)+$','19023720OpRxap','splice','__decorate','__esModule','../utils/flosum-naming.utils','174853AOhnct','GET_COMPONENT_RECORD_TYPES_QUERY','query','36228gvkaZW','Name','metadata','594498cSObMr','11mUirJb','substr','Component_Type__c','2130968pxJXgb','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','fetchRepositoryComponentsByFilenames','%componentIds%','post','%name%','MAX_QUERY_ARRAY_ITEMS','Service','./salesforce-query.service','File_Name__c','344889GXnEDx','getOwnPropertyDescriptor','toString','fetchBranchComponents','FLOSUM_NAMESPACE','restService','%branchId%','design:paramtypes','Status__c','push','Branch\x20\x22','Version__c','SalesforceQueryService','\x22\x20not\x20found\x20in\x20flosum.','fetchRepositoryComponents','SalesforceGitSyncService','map','./salesforce-rest.service','length','25PrfQFJ','../../../../constants','NotFoundError','decorate','extractComponentMetadataFromRecord','FLOSUM_COMMIT','%repositoryId%','function','queryService','GET_REPOSITORY_COMPONENTS_QUERY','3ybJYWP','GET_REPOSITORY_BY_NAME_QUERY','createCommit','Is_From_Agent__c','Component_Name__c','FLOSUM_GIT_NAMESPACE','fetchBranchComponentsByFilenames','CRC32__c','222sWJzIH','%fileNames%','../../../../core/errors/not-found.error','Repository\x20\x22','extractFieldsFromRecord','9kDycyH','replace','3675540gnzxvq','object','constructor','getBranchIdByName'];a236_0x5107=function(){return _0x4ff7eb;};return a236_0x5107();}'use strict';function a236_0xaca6(_0x1b3e3f,_0x3c4ed4){const _0x2838a8=a236_0x5107();return a236_0xaca6=function(_0x183935,_0x1d6aa8){_0x183935=_0x183935-0x1cd;let _0x5107ec=_0x2838a8[_0x183935];return _0x5107ec;},a236_0xaca6(_0x1b3e3f,_0x3c4ed4);}var __decorate=this&&this[a236_0x197c6e(0x20a)]||function(_0x8d52,_0x7cdfcf,_0x1cf338,_0x5513d6){const _0x48c01d=a236_0x197c6e;var _0x53bc4b=arguments['length'],_0x5e2294=_0x53bc4b<0x3?_0x7cdfcf:_0x5513d6===null?_0x5513d6=Object[_0x48c01d(0x1d7)](_0x7cdfcf,_0x1cf338):_0x5513d6,_0x13ab9b;if(typeof Reflect===_0x48c01d(0x203)&&typeof Reflect[_0x48c01d(0x1ec)]===_0x48c01d(0x1f0))_0x5e2294=Reflect[_0x48c01d(0x1ec)](_0x8d52,_0x7cdfcf,_0x1cf338,_0x5513d6);else{for(var _0x4fd661=_0x8d52[_0x48c01d(0x1e8)]-0x1;_0x4fd661>=0x0;_0x4fd661--)if(_0x13ab9b=_0x8d52[_0x4fd661])_0x5e2294=(_0x53bc4b<0x3?_0x13ab9b(_0x5e2294):_0x53bc4b>0x3?_0x13ab9b(_0x7cdfcf,_0x1cf338,_0x5e2294):_0x13ab9b(_0x7cdfcf,_0x1cf338))||_0x5e2294;}return _0x53bc4b>0x3&&_0x5e2294&&Object['defineProperty'](_0x7cdfcf,_0x1cf338,_0x5e2294),_0x5e2294;},__metadata=this&&this['__metadata']||function(_0x16625d,_0x556476){const _0x111957=a236_0x197c6e;if(typeof Reflect===_0x111957(0x203)&&typeof Reflect[_0x111957(0x212)]==='function')return Reflect[_0x111957(0x212)](_0x16625d,_0x556476);};Object['defineProperty'](exports,a236_0x197c6e(0x20b),{'value':!![]}),exports[a236_0x197c6e(0x1e5)]=void 0x0;const not_found_error_1=require(a236_0x197c6e(0x1fd)),typedi_1=require('typedi'),constants_1=require(a236_0x197c6e(0x1ea)),queries_1=require('../queries'),flosum_naming_utils_1=require(a236_0x197c6e(0x20c)),salesforce_query_service_1=require(a236_0x197c6e(0x1d4)),salesforce_rest_service_1=require(a236_0x197c6e(0x1e7));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x34f671,_0x414cf0){const _0x1eeb4b=a236_0x197c6e;this[_0x1eeb4b(0x1f1)]=_0x34f671,this[_0x1eeb4b(0x1db)]=_0x414cf0,this[_0x1eeb4b(0x1d2)]=0xc8;}[a236_0x197c6e(0x1ed)](_0x17e77e){const _0x2c8e1d=a236_0x197c6e,_0x2ca76a=(0x0,flosum_naming_utils_1[_0x2c8e1d(0x1ff)])(_0x17e77e,[_0x2c8e1d(0x1f7),'Component_Type__c',_0x2c8e1d(0x1fa),_0x2c8e1d(0x1d5),'Version__c','Id']);return{'id':_0x2ca76a['Id'],'name':_0x2ca76a[_0x2c8e1d(0x1f7)],'type':_0x2ca76a[_0x2c8e1d(0x216)],'fileName':_0x2ca76a['File_Name__c'],'crc32':_0x2ca76a[_0x2c8e1d(0x1fa)],'version':+_0x2ca76a[_0x2c8e1d(0x1e1)]};}async['getRepositoryIdByName'](_0x11d1fe){const _0x557eca=a236_0x197c6e,[_0x50f486]=await this[_0x557eca(0x1f1)]['query'](queries_1[_0x557eca(0x1f4)][_0x557eca(0x201)](_0x557eca(0x1d1),_0x11d1fe));if(!_0x50f486)throw new not_found_error_1[(_0x557eca(0x1eb))](_0x557eca(0x1fe)+_0x11d1fe+_0x557eca(0x1e3));return _0x50f486['Id'];}async[a236_0x197c6e(0x205)](_0x15d4f3){const _0x20125=a236_0x197c6e,[_0x42347c]=await this[_0x20125(0x1f1)]['query'](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x20125(0x201)](_0x20125(0x1d1),_0x15d4f3));if(!_0x42347c)throw new not_found_error_1[(_0x20125(0x1eb))](_0x20125(0x1e0)+_0x15d4f3+_0x20125(0x1e3));return _0x42347c['Id'];}async['getComponentRecordTypes'](){const _0x5df6f9=a236_0x197c6e,_0x18a4e4=await this[_0x5df6f9(0x1f1)]['query'](queries_1[_0x5df6f9(0x20e)]);return _0x18a4e4['map'](_0x9cc297=>(0x0,flosum_naming_utils_1[_0x5df6f9(0x1ff)])(_0x9cc297,['Id',_0x5df6f9(0x211)]))['map'](_0x3d4701=>({'id':_0x3d4701['Id'],'name':_0x3d4701[_0x5df6f9(0x211)]}));}async[a236_0x197c6e(0x1ce)](_0x1c7427,_0x2418cf){const _0x2d4082=a236_0x197c6e,_0x331fa3=[];while(_0x1c7427['length']){const _0x3915e6=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x2d4082(0x201)](_0x2d4082(0x1fc),_0x1c7427[_0x2d4082(0x209)](0x0,this[_0x2d4082(0x1d2)])[_0x2d4082(0x1e6)](_0x5271d4=>'\x27'+_0x5271d4+'\x27')['join'](','))[_0x2d4082(0x201)](_0x2d4082(0x1ef),_0x2418cf),_0x1ef42b=await this[_0x2d4082(0x1f1)][_0x2d4082(0x20f)](_0x3915e6);_0x331fa3[_0x2d4082(0x1df)](..._0x1ef42b);}return _0x331fa3[_0x2d4082(0x1e6)](_0x3aef06=>this[_0x2d4082(0x1ed)](_0x3aef06));}async[a236_0x197c6e(0x1f9)](_0x547ec8,_0x274428){const _0x37996b=a236_0x197c6e,_0x545222=[];while(_0x547ec8['length']){const _0x3ea8b1=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x37996b(0x201)](_0x37996b(0x1fc),_0x547ec8[_0x37996b(0x209)](0x0,this[_0x37996b(0x1d2)])[_0x37996b(0x1e6)](_0x3f9559=>'\x27'+_0x3f9559+'\x27')['join'](','))[_0x37996b(0x201)](_0x37996b(0x1dc),_0x274428),_0x487db7=await this[_0x37996b(0x1f1)][_0x37996b(0x20f)](_0x3ea8b1);_0x545222[_0x37996b(0x1df)](..._0x487db7);}return _0x545222[_0x37996b(0x1e6)](_0x5d0fac=>this[_0x37996b(0x1ed)](_0x5d0fac));}async[a236_0x197c6e(0x1e4)](_0x369294){const _0xe31c81=a236_0x197c6e,_0x57d94b=queries_1[_0xe31c81(0x1f2)][_0xe31c81(0x201)]('%repositoryId%',_0x369294),_0x55f776=await this[_0xe31c81(0x1f1)][_0xe31c81(0x20f)](_0x57d94b);return _0x55f776['map'](_0x32ae40=>this[_0xe31c81(0x1ed)](_0x32ae40));}async[a236_0x197c6e(0x1d9)](_0x426145){const _0x41a7fd=a236_0x197c6e,_0x4e9785=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x41a7fd(0x201)](_0x41a7fd(0x1dc),_0x426145),_0x500ace=await this[_0x41a7fd(0x1f1)][_0x41a7fd(0x20f)](_0x4e9785);return _0x500ace[_0x41a7fd(0x1e6)](_0x26438b=>this[_0x41a7fd(0x1ed)](_0x26438b));}async['fetchCommitManifestsByComponentIds'](_0x4fea6d){const _0x4ad529=a236_0x197c6e,_0x23ec2d=[..._0x4fea6d],_0x243be0=[];while(_0x23ec2d['length']){const _0x19bbd6=queries_1[_0x4ad529(0x1cd)]['replace'](_0x4ad529(0x1cf),_0x23ec2d['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x4ad529(0x1e6)](_0x573f26=>'\x27'+_0x573f26+'\x27')['join'](',')),_0x14b452=await this['queryService'][_0x4ad529(0x20f)](_0x19bbd6);_0x243be0[_0x4ad529(0x1df)](..._0x14b452['map'](_0x57d811=>_0x57d811['Id']));}return _0x243be0;}async[a236_0x197c6e(0x1f5)](_0x3545a8,_0x293acc){const _0x2b51de=a236_0x197c6e;return this[_0x2b51de(0x1db)][_0x2b51de(0x1d0)](constants_1[_0x2b51de(0x1ee)],{[constants_1['FLOSUM_NAMESPACE']+'Repository__c']:_0x293acc,[constants_1[_0x2b51de(0x1da)]+_0x2b51de(0x206)]:_0x3545a8[_0x2b51de(0x215)](0x0,0xff),[constants_1[_0x2b51de(0x1da)]+_0x2b51de(0x1de)]:'Completed',[constants_1[_0x2b51de(0x1f8)]+_0x2b51de(0x1f6)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x197c6e(0x1d3)])(),__metadata(a236_0x197c6e(0x1dd),[salesforce_query_service_1[a236_0x197c6e(0x1e2)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;