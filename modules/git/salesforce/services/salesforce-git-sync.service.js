function a236_0xaa4e(){const _0x23b938=['function','decorate','10050AoUiIB','\x22\x20not\x20found\x20in\x20flosum.','466358LalMiL','join','__esModule','Status__c','extractFieldsFromRecord','%fileNames%','push','712TuSKDv','GET_COMPONENT_RECORD_TYPES_QUERY','constructor','extractComponentMetadataFromRecord','MAX_QUERY_ARRAY_ITEMS','fetchBranchComponentsByFilenames','GET_BRANCH_BY_NAME_QUERY','Repository\x20\x22','fetchRepositoryComponentsByFilenames','restService','Version__c','FLOSUM_NAMESPACE','SalesforceRestService','post','__decorate','getRepositoryIdByName','7518fERIZo','Service','createCommit','Repository__c','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','(((.+)+)+)+$','Component_Name__c','FLOSUM_GIT_NAMESPACE','%componentIds%','replace','defineProperty','toString','189352CyIOGD','GET_REPOSITORY_BY_NAME_QUERY','splice','fetchCommitManifestsByComponentIds','./salesforce-rest.service','../../../../constants','14306990oYBliw','%name%','Component_Type__c','getOwnPropertyDescriptor','SalesforceGitSyncService','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','6276645QuMlAc','map','Completed','GET_BRANCH_COMPONENTS_QUERY','2975HRhbms','%branchId%','CRC32__c','design:paramtypes','metadata','117522GLTbQZ','length','../../../../core/errors/not-found.error','object','queryService','File_Name__c','query','161pBanjs','fetchRepositoryComponents','GET_REPOSITORY_COMPONENTS_QUERY','getBranchIdByName','search','Is_From_Agent__c','typedi','Name'];a236_0xaa4e=function(){return _0x23b938;};return a236_0xaa4e();}const a236_0x7e07f7=a236_0x2b42;(function(_0x4f1d9e,_0x3e04be){const _0x1a9848=a236_0x2b42,_0x391ce3=_0x4f1d9e();while(!![]){try{const _0x16b9a0=-parseInt(_0x1a9848(0x1f8))/0x1+-parseInt(_0x1a9848(0x230))/0x2+parseInt(_0x1a9848(0x1f6))/0x3*(parseInt(_0x1a9848(0x1ff))/0x4)+parseInt(_0x1a9848(0x22b))/0x5*(parseInt(_0x1a9848(0x20f))/0x6)+-parseInt(_0x1a9848(0x237))/0x7*(-parseInt(_0x1a9848(0x21b))/0x8)+parseInt(_0x1a9848(0x227))/0x9+-parseInt(_0x1a9848(0x221))/0xa;if(_0x16b9a0===_0x3e04be)break;else _0x391ce3['push'](_0x391ce3['shift']());}catch(_0x2ea817){_0x391ce3['push'](_0x391ce3['shift']());}}}(a236_0xaa4e,0x99461));const a236_0x2fa67c=(function(){let _0x2cd95c=!![];return function(_0x3fdaee,_0x3a45b9){const _0x541486=_0x2cd95c?function(){if(_0x3a45b9){const _0x81bbf=_0x3a45b9['apply'](_0x3fdaee,arguments);return _0x3a45b9=null,_0x81bbf;}}:function(){};return _0x2cd95c=![],_0x541486;};}()),a236_0x3b56ae=a236_0x2fa67c(this,function(){const _0x17967b=a236_0x2b42;return a236_0x3b56ae['toString']()[_0x17967b(0x23b)](_0x17967b(0x214))[_0x17967b(0x21a)]()[_0x17967b(0x201)](a236_0x3b56ae)[_0x17967b(0x23b)](_0x17967b(0x214));});a236_0x3b56ae();'use strict';var __decorate=this&&this[a236_0x7e07f7(0x20d)]||function(_0x242c64,_0x1384aa,_0x542877,_0x50675a){const _0x2f211f=a236_0x7e07f7;var _0x40eca8=arguments[_0x2f211f(0x231)],_0xb51bf6=_0x40eca8<0x3?_0x1384aa:_0x50675a===null?_0x50675a=Object[_0x2f211f(0x224)](_0x1384aa,_0x542877):_0x50675a,_0x118875;if(typeof Reflect===_0x2f211f(0x233)&&typeof Reflect[_0x2f211f(0x1f5)]===_0x2f211f(0x1f4))_0xb51bf6=Reflect[_0x2f211f(0x1f5)](_0x242c64,_0x1384aa,_0x542877,_0x50675a);else{for(var _0x2c09df=_0x242c64[_0x2f211f(0x231)]-0x1;_0x2c09df>=0x0;_0x2c09df--)if(_0x118875=_0x242c64[_0x2c09df])_0xb51bf6=(_0x40eca8<0x3?_0x118875(_0xb51bf6):_0x40eca8>0x3?_0x118875(_0x1384aa,_0x542877,_0xb51bf6):_0x118875(_0x1384aa,_0x542877))||_0xb51bf6;}return _0x40eca8>0x3&&_0xb51bf6&&Object['defineProperty'](_0x1384aa,_0x542877,_0xb51bf6),_0xb51bf6;},__metadata=this&&this['__metadata']||function(_0x1ba13e,_0x22c2f7){const _0x408d75=a236_0x7e07f7;if(typeof Reflect===_0x408d75(0x233)&&typeof Reflect[_0x408d75(0x22f)]===_0x408d75(0x1f4))return Reflect[_0x408d75(0x22f)](_0x1ba13e,_0x22c2f7);};Object[a236_0x7e07f7(0x219)](exports,a236_0x7e07f7(0x1fa),{'value':!![]}),exports[a236_0x7e07f7(0x225)]=void 0x0;function a236_0x2b42(_0x3d16ff,_0x10d931){const _0x326cd0=a236_0xaa4e();return a236_0x2b42=function(_0x3b56ae,_0x2fa67c){_0x3b56ae=_0x3b56ae-0x1f2;let _0xaa4e5e=_0x326cd0[_0x3b56ae];return _0xaa4e5e;},a236_0x2b42(_0x3d16ff,_0x10d931);}const not_found_error_1=require(a236_0x7e07f7(0x232)),typedi_1=require(a236_0x7e07f7(0x1f2)),constants_1=require(a236_0x7e07f7(0x220)),queries_1=require('../queries'),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a236_0x7e07f7(0x21f));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x143dce,_0x313822){const _0xb65b7b=a236_0x7e07f7;this[_0xb65b7b(0x234)]=_0x143dce,this[_0xb65b7b(0x208)]=_0x313822,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a236_0x7e07f7(0x202)](_0x41c741){const _0x316a85=a236_0x7e07f7,_0x3b3e5b=(0x0,flosum_naming_utils_1[_0x316a85(0x1fc)])(_0x41c741,[_0x316a85(0x215),_0x316a85(0x223),'CRC32__c','File_Name__c',_0x316a85(0x209),'Id']);return{'id':_0x3b3e5b['Id'],'name':_0x3b3e5b[_0x316a85(0x215)],'type':_0x3b3e5b[_0x316a85(0x223)],'fileName':_0x3b3e5b[_0x316a85(0x235)],'crc32':_0x3b3e5b[_0x316a85(0x22d)],'version':+_0x3b3e5b[_0x316a85(0x209)]};}async[a236_0x7e07f7(0x20e)](_0x529dcc){const _0x51e746=a236_0x7e07f7,[_0x56b8d1]=await this[_0x51e746(0x234)][_0x51e746(0x236)](queries_1[_0x51e746(0x21c)][_0x51e746(0x218)]('%name%',_0x529dcc));if(!_0x56b8d1)throw new not_found_error_1['NotFoundError'](_0x51e746(0x206)+_0x529dcc+_0x51e746(0x1f7));return _0x56b8d1['Id'];}async[a236_0x7e07f7(0x23a)](_0x5af0b6){const _0x4d156b=a236_0x7e07f7,[_0x56cb19]=await this[_0x4d156b(0x234)][_0x4d156b(0x236)](queries_1[_0x4d156b(0x205)][_0x4d156b(0x218)](_0x4d156b(0x222),_0x5af0b6));if(!_0x56cb19)throw new not_found_error_1['NotFoundError']('Branch\x20\x22'+_0x5af0b6+_0x4d156b(0x1f7));return _0x56cb19['Id'];}async['getComponentRecordTypes'](){const _0x4b647c=a236_0x7e07f7,_0x44bbb1=await this[_0x4b647c(0x234)][_0x4b647c(0x236)](queries_1[_0x4b647c(0x200)]);return _0x44bbb1['map'](_0x194d8a=>(0x0,flosum_naming_utils_1[_0x4b647c(0x1fc)])(_0x194d8a,['Id',_0x4b647c(0x1f3)]))[_0x4b647c(0x228)](_0x2d9506=>({'id':_0x2d9506['Id'],'name':_0x2d9506['Name']}));}async[a236_0x7e07f7(0x207)](_0x73b1e8,_0x2e9b70){const _0xffd72b=a236_0x7e07f7,_0x219482=[];while(_0x73b1e8[_0xffd72b(0x231)]){const _0x37a6d6=queries_1[_0xffd72b(0x213)]['replace']('%fileNames%',_0x73b1e8['splice'](0x0,this[_0xffd72b(0x203)])['map'](_0x2f39d5=>'\x27'+_0x2f39d5+'\x27')[_0xffd72b(0x1f9)](','))['replace']('%repositoryId%',_0x2e9b70),_0x11d7ee=await this[_0xffd72b(0x234)][_0xffd72b(0x236)](_0x37a6d6);_0x219482[_0xffd72b(0x1fe)](..._0x11d7ee);}return _0x219482[_0xffd72b(0x228)](_0x4f6b90=>this[_0xffd72b(0x202)](_0x4f6b90));}async[a236_0x7e07f7(0x204)](_0x1cfad6,_0xef8947){const _0x43bafb=a236_0x7e07f7,_0x3ec507=[];while(_0x1cfad6['length']){const _0x139330=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x43bafb(0x218)](_0x43bafb(0x1fd),_0x1cfad6[_0x43bafb(0x21d)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x43bafb(0x228)](_0xfef162=>'\x27'+_0xfef162+'\x27')['join'](','))[_0x43bafb(0x218)](_0x43bafb(0x22c),_0xef8947),_0x146d53=await this[_0x43bafb(0x234)]['query'](_0x139330);_0x3ec507['push'](..._0x146d53);}return _0x3ec507[_0x43bafb(0x228)](_0x4d289d=>this[_0x43bafb(0x202)](_0x4d289d));}async[a236_0x7e07f7(0x238)](_0xb09fb3){const _0x1f4141=a236_0x7e07f7,_0x1bee2d=queries_1[_0x1f4141(0x239)][_0x1f4141(0x218)]('%repositoryId%',_0xb09fb3),_0x287c79=await this['queryService'][_0x1f4141(0x236)](_0x1bee2d);return _0x287c79[_0x1f4141(0x228)](_0x279fb7=>this[_0x1f4141(0x202)](_0x279fb7));}async['fetchBranchComponents'](_0x2a0214){const _0x543d02=a236_0x7e07f7,_0x5383fb=queries_1[_0x543d02(0x22a)][_0x543d02(0x218)](_0x543d02(0x22c),_0x2a0214),_0x2f8f09=await this['queryService'][_0x543d02(0x236)](_0x5383fb);return _0x2f8f09[_0x543d02(0x228)](_0x4cad8c=>this['extractComponentMetadataFromRecord'](_0x4cad8c));}async[a236_0x7e07f7(0x21e)](_0x53c528){const _0x3560ef=a236_0x7e07f7,_0x57f4de=[..._0x53c528],_0x15637f=[];while(_0x57f4de[_0x3560ef(0x231)]){const _0xd5d70e=queries_1[_0x3560ef(0x226)][_0x3560ef(0x218)](_0x3560ef(0x217),_0x57f4de[_0x3560ef(0x21d)](0x0,this[_0x3560ef(0x203)])[_0x3560ef(0x228)](_0x218ee9=>'\x27'+_0x218ee9+'\x27')['join'](',')),_0x17b05e=await this[_0x3560ef(0x234)][_0x3560ef(0x236)](_0xd5d70e);_0x15637f[_0x3560ef(0x1fe)](..._0x17b05e[_0x3560ef(0x228)](_0x296ba0=>_0x296ba0['Id']));}return _0x15637f;}async[a236_0x7e07f7(0x211)](_0x1493ad,_0x4efd8a){const _0x262ad3=a236_0x7e07f7;return this['restService'][_0x262ad3(0x20c)](constants_1['FLOSUM_COMMIT'],{[constants_1['FLOSUM_NAMESPACE']+_0x262ad3(0x212)]:_0x4efd8a,[constants_1[_0x262ad3(0x20a)]+'Commit_Name__c']:_0x1493ad['substr'](0x0,0xff),[constants_1[_0x262ad3(0x20a)]+_0x262ad3(0x1fb)]:_0x262ad3(0x229),[constants_1[_0x262ad3(0x216)]+_0x262ad3(0x23c)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x7e07f7(0x210)])(),__metadata(a236_0x7e07f7(0x22e),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a236_0x7e07f7(0x20b)]])],SalesforceGitSyncService),exports[a236_0x7e07f7(0x225)]=SalesforceGitSyncService;