const a231_0x43a060=a231_0x39a1;(function(_0x26c97a,_0xb466a0){const _0x4e22e7=a231_0x39a1,_0x4abe8a=_0x26c97a();while(!![]){try{const _0x11051c=parseInt(_0x4e22e7(0x1fa))/0x1+parseInt(_0x4e22e7(0x1e3))/0x2*(-parseInt(_0x4e22e7(0x1c0))/0x3)+-parseInt(_0x4e22e7(0x1ce))/0x4+-parseInt(_0x4e22e7(0x1d1))/0x5+-parseInt(_0x4e22e7(0x1d8))/0x6*(parseInt(_0x4e22e7(0x1e2))/0x7)+parseInt(_0x4e22e7(0x1f0))/0x8+parseInt(_0x4e22e7(0x1f8))/0x9;if(_0x11051c===_0xb466a0)break;else _0x4abe8a['push'](_0x4abe8a['shift']());}catch(_0x1e52da){_0x4abe8a['push'](_0x4abe8a['shift']());}}}(a231_0x3c91,0x8cc91));const a231_0xba38a1=(function(){let _0x4c909e=!![];return function(_0x3f46d9,_0x29aba5){const _0xf16d9d=_0x4c909e?function(){const _0x22ee04=a231_0x39a1;if(_0x29aba5){const _0x4bff0a=_0x29aba5[_0x22ee04(0x202)](_0x3f46d9,arguments);return _0x29aba5=null,_0x4bff0a;}}:function(){};return _0x4c909e=![],_0xf16d9d;};}()),a231_0x299fc8=a231_0xba38a1(this,function(){const _0x31c595=a231_0x39a1;return a231_0x299fc8[_0x31c595(0x1dd)]()[_0x31c595(0x1bd)](_0x31c595(0x1ef))[_0x31c595(0x1dd)]()[_0x31c595(0x1d9)](a231_0x299fc8)[_0x31c595(0x1bd)](_0x31c595(0x1ef));});function a231_0x3c91(){const _0x16fed5=['__decorate','./salesforce-rest.service','4605660Kdoyxa','../queries','780856zdvIuJ','fetchCommitManifestsByComponentIds','function','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','fetchRepositoryComponents','Component_Name__c','length','join','apply','fetchBranchComponents','Status__c','map','search','CRC32__c','File_Name__c','39HvfaRh','getBranchIdByName','fetchBranchComponentsByFilenames','extractFieldsFromRecord','%branchId%','replace','typedi','Component_Type__c','decorate','Is_From_Agent__c','getOwnPropertyDescriptor','Completed','Service','splice','289212RvyUjF','getRepositoryIdByName','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','4412620wfsVOb','MAX_QUERY_ARRAY_ITEMS','%repositoryId%','extractComponentMetadataFromRecord','Name','GET_COMPONENT_RECORD_TYPES_QUERY','restService','1576914NdRAZO','constructor','__metadata','SalesforceGitSyncService','Version__c','toString','../../../../core/errors/not-found.error','queryService','fetchRepositoryComponentsByFilenames','query','7NnIhPn','99138zgyQXv','getComponentRecordTypes','push','design:paramtypes','FLOSUM_NAMESPACE','substr','SalesforceRestService','../../../../constants','SalesforceQueryService','object','%name%','createCommit','(((.+)+)+)+$','9168832SzbzTy','\x22\x20not\x20found\x20in\x20flosum.','Commit_Name__c','NotFoundError','FLOSUM_COMMIT','metadata'];a231_0x3c91=function(){return _0x16fed5;};return a231_0x3c91();}a231_0x299fc8();'use strict';var __decorate=this&&this[a231_0x43a060(0x1f6)]||function(_0x13c1db,_0x40873b,_0x3e4a7d,_0x4983ec){const _0x3b5343=a231_0x43a060;var _0x213807=arguments[_0x3b5343(0x200)],_0x42bf55=_0x213807<0x3?_0x40873b:_0x4983ec===null?_0x4983ec=Object[_0x3b5343(0x1ca)](_0x40873b,_0x3e4a7d):_0x4983ec,_0x5afcac;if(typeof Reflect===_0x3b5343(0x1ec)&&typeof Reflect[_0x3b5343(0x1c8)]===_0x3b5343(0x1fc))_0x42bf55=Reflect[_0x3b5343(0x1c8)](_0x13c1db,_0x40873b,_0x3e4a7d,_0x4983ec);else{for(var _0x3e8650=_0x13c1db[_0x3b5343(0x200)]-0x1;_0x3e8650>=0x0;_0x3e8650--)if(_0x5afcac=_0x13c1db[_0x3e8650])_0x42bf55=(_0x213807<0x3?_0x5afcac(_0x42bf55):_0x213807>0x3?_0x5afcac(_0x40873b,_0x3e4a7d,_0x42bf55):_0x5afcac(_0x40873b,_0x3e4a7d))||_0x42bf55;}return _0x213807>0x3&&_0x42bf55&&Object['defineProperty'](_0x40873b,_0x3e4a7d,_0x42bf55),_0x42bf55;},__metadata=this&&this[a231_0x43a060(0x1da)]||function(_0x5bc64d,_0x6f06d9){const _0x1100a5=a231_0x43a060;if(typeof Reflect===_0x1100a5(0x1ec)&&typeof Reflect['metadata']===_0x1100a5(0x1fc))return Reflect[_0x1100a5(0x1f5)](_0x5bc64d,_0x6f06d9);};function a231_0x39a1(_0x7382b8,_0x1de5e2){const _0x99260f=a231_0x3c91();return a231_0x39a1=function(_0x299fc8,_0xba38a1){_0x299fc8=_0x299fc8-0x1bd;let _0x3c916a=_0x99260f[_0x299fc8];return _0x3c916a;},a231_0x39a1(_0x7382b8,_0x1de5e2);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a231_0x43a060(0x1db)]=void 0x0;const not_found_error_1=require(a231_0x43a060(0x1de)),typedi_1=require(a231_0x43a060(0x1c6)),constants_1=require(a231_0x43a060(0x1ea)),queries_1=require(a231_0x43a060(0x1f9)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a231_0x43a060(0x1f7));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x394936,_0x10a9d2){const _0xdc4fc5=a231_0x43a060;this[_0xdc4fc5(0x1df)]=_0x394936,this[_0xdc4fc5(0x1d7)]=_0x10a9d2,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a231_0x43a060(0x1d4)](_0x258eba){const _0x107401=a231_0x43a060,_0x3a3e20=(0x0,flosum_naming_utils_1[_0x107401(0x1c3)])(_0x258eba,[_0x107401(0x1ff),_0x107401(0x1c7),_0x107401(0x1be),_0x107401(0x1bf),_0x107401(0x1dc),'Id']);return{'id':_0x3a3e20['Id'],'name':_0x3a3e20[_0x107401(0x1ff)],'type':_0x3a3e20[_0x107401(0x1c7)],'fileName':_0x3a3e20[_0x107401(0x1bf)],'crc32':_0x3a3e20[_0x107401(0x1be)],'version':+_0x3a3e20[_0x107401(0x1dc)]};}async[a231_0x43a060(0x1cf)](_0x358cad){const _0x104ed4=a231_0x43a060,[_0x572117]=await this[_0x104ed4(0x1df)][_0x104ed4(0x1e1)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x104ed4(0x1c5)](_0x104ed4(0x1ed),_0x358cad));if(!_0x572117)throw new not_found_error_1[(_0x104ed4(0x1f3))]('Repository\x20\x22'+_0x358cad+_0x104ed4(0x1f1));return _0x572117['Id'];}async[a231_0x43a060(0x1c1)](_0x10a084){const _0x44851b=a231_0x43a060,[_0x40c800]=await this[_0x44851b(0x1df)]['query'](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x44851b(0x1c5)](_0x44851b(0x1ed),_0x10a084));if(!_0x40c800)throw new not_found_error_1[(_0x44851b(0x1f3))]('Branch\x20\x22'+_0x10a084+_0x44851b(0x1f1));return _0x40c800['Id'];}async[a231_0x43a060(0x1e4)](){const _0x41029a=a231_0x43a060,_0x4e13e2=await this[_0x41029a(0x1df)]['query'](queries_1[_0x41029a(0x1d6)]);return _0x4e13e2['map'](_0x212ac6=>(0x0,flosum_naming_utils_1[_0x41029a(0x1c3)])(_0x212ac6,['Id',_0x41029a(0x1d5)]))[_0x41029a(0x205)](_0x28ea48=>({'id':_0x28ea48['Id'],'name':_0x28ea48[_0x41029a(0x1d5)]}));}async[a231_0x43a060(0x1e0)](_0x2c8a99,_0x3918f4){const _0xd7bfeb=a231_0x43a060,_0x3207e5=[];while(_0x2c8a99[_0xd7bfeb(0x200)]){const _0x481569=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0xd7bfeb(0x1c5)]('%fileNames%',_0x2c8a99[_0xd7bfeb(0x1cd)](0x0,this[_0xd7bfeb(0x1d2)])[_0xd7bfeb(0x205)](_0x228a2e=>'\x27'+_0x228a2e+'\x27')['join'](','))['replace'](_0xd7bfeb(0x1d3),_0x3918f4),_0x5acc52=await this[_0xd7bfeb(0x1df)]['query'](_0x481569);_0x3207e5['push'](..._0x5acc52);}return _0x3207e5[_0xd7bfeb(0x205)](_0x29baf5=>this[_0xd7bfeb(0x1d4)](_0x29baf5));}async[a231_0x43a060(0x1c2)](_0x14a56d,_0x6ecd78){const _0xd1b32e=a231_0x43a060,_0x5de282=[];while(_0x14a56d[_0xd1b32e(0x200)]){const _0x1ea717=queries_1[_0xd1b32e(0x1d0)][_0xd1b32e(0x1c5)]('%fileNames%',_0x14a56d[_0xd1b32e(0x1cd)](0x0,this[_0xd1b32e(0x1d2)])['map'](_0xd6b73d=>'\x27'+_0xd6b73d+'\x27')[_0xd1b32e(0x201)](','))['replace'](_0xd1b32e(0x1c4),_0x6ecd78),_0x386a8d=await this['queryService'][_0xd1b32e(0x1e1)](_0x1ea717);_0x5de282[_0xd1b32e(0x1e5)](..._0x386a8d);}return _0x5de282['map'](_0x196f85=>this[_0xd1b32e(0x1d4)](_0x196f85));}async[a231_0x43a060(0x1fe)](_0x2572ff){const _0x145b5a=a231_0x43a060,_0x563ff0=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x145b5a(0x1c5)](_0x145b5a(0x1d3),_0x2572ff),_0x484683=await this[_0x145b5a(0x1df)][_0x145b5a(0x1e1)](_0x563ff0);return _0x484683[_0x145b5a(0x205)](_0x390303=>this[_0x145b5a(0x1d4)](_0x390303));}async[a231_0x43a060(0x203)](_0x2bd11a){const _0x1bd10d=a231_0x43a060,_0x46d09b=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x1bd10d(0x1c5)](_0x1bd10d(0x1c4),_0x2bd11a),_0x49f6f5=await this[_0x1bd10d(0x1df)][_0x1bd10d(0x1e1)](_0x46d09b);return _0x49f6f5[_0x1bd10d(0x205)](_0x13d02d=>this[_0x1bd10d(0x1d4)](_0x13d02d));}async[a231_0x43a060(0x1fb)](_0x14274a){const _0x1e7232=a231_0x43a060,_0x5559d4=[..._0x14274a],_0x24c06f=[];while(_0x5559d4[_0x1e7232(0x200)]){const _0x36ca40=queries_1[_0x1e7232(0x1fd)][_0x1e7232(0x1c5)]('%componentIds%',_0x5559d4['splice'](0x0,this[_0x1e7232(0x1d2)])[_0x1e7232(0x205)](_0x2c3352=>'\x27'+_0x2c3352+'\x27')['join'](',')),_0x22766e=await this[_0x1e7232(0x1df)][_0x1e7232(0x1e1)](_0x36ca40);_0x24c06f[_0x1e7232(0x1e5)](..._0x22766e[_0x1e7232(0x205)](_0x5dafba=>_0x5dafba['Id']));}return _0x24c06f;}async[a231_0x43a060(0x1ee)](_0x32869b,_0x54d4d9){const _0xc3cf15=a231_0x43a060;return this['restService']['post'](constants_1[_0xc3cf15(0x1f4)],{[constants_1[_0xc3cf15(0x1e7)]+'Repository__c']:_0x54d4d9,[constants_1[_0xc3cf15(0x1e7)]+_0xc3cf15(0x1f2)]:_0x32869b[_0xc3cf15(0x1e8)](0x0,0xff),[constants_1[_0xc3cf15(0x1e7)]+_0xc3cf15(0x204)]:_0xc3cf15(0x1cb),[constants_1['FLOSUM_GIT_NAMESPACE']+_0xc3cf15(0x1c9)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a231_0x43a060(0x1cc)])(),__metadata(a231_0x43a060(0x1e6),[salesforce_query_service_1[a231_0x43a060(0x1eb)],salesforce_rest_service_1[a231_0x43a060(0x1e9)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;