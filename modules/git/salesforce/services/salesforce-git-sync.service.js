const a230_0x3c2737=a230_0x18b9;function a230_0x18b9(_0x47bac0,_0xd6ba46){const _0x30453a=a230_0x6434();return a230_0x18b9=function(_0x1a7305,_0x29a1ee){_0x1a7305=_0x1a7305-0xc6;let _0x643438=_0x30453a[_0x1a7305];return _0x643438;},a230_0x18b9(_0x47bac0,_0xd6ba46);}function a230_0x6434(){const _0x4e5e16=['Component_Type__c','785090DEsLGd','__metadata','fetchRepositoryComponents','post','extractComponentMetadataFromRecord','../queries','search','restService','GET_REPOSITORY_COMPONENTS_QUERY','FLOSUM_GIT_NAMESPACE','5199215kuRCbO','%name%','Commit_Name__c','__decorate','join','1322884cjyccT','getOwnPropertyDescriptor','fetchCommitManifestsByComponentIds','getRepositoryIdByName','object','decorate','map','Component_Name__c','Version__c','splice','%componentIds%','CRC32__c','apply','Name','toString','SalesforceRestService','SalesforceGitSyncService','Is_From_Agent__c','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','defineProperty','Completed','File_Name__c','getComponentRecordTypes','./salesforce-rest.service','FLOSUM_NAMESPACE','metadata','typedi','SalesforceQueryService','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','419556HxggvN','(((.+)+)+)+$','Branch\x20\x22','fetchBranchComponentsByFilenames','function','queryService','%branchId%','extractFieldsFromRecord','%repositoryId%','2301636uQCjJV','1437660cUXrVv','MAX_QUERY_ARRAY_ITEMS','Service','GET_BRANCH_BY_NAME_QUERY','length','\x22\x20not\x20found\x20in\x20flosum.','NotFoundError','5ENphOh','../utils/flosum-naming.utils','query','replace','Repository\x20\x22','Status__c','design:paramtypes','push','10913360WNXVTN','__esModule','fetchBranchComponents'];a230_0x6434=function(){return _0x4e5e16;};return a230_0x6434();}(function(_0x5af8a8,_0x507802){const _0x1098e9=a230_0x18b9,_0x17eb3a=_0x5af8a8();while(!![]){try{const _0x38811c=parseInt(_0x1098e9(0x101))/0x1+parseInt(_0x1098e9(0xc7))/0x2+parseInt(_0x1098e9(0xed))/0x3+parseInt(_0x1098e9(0xe4))/0x4*(parseInt(_0x1098e9(0xf5))/0x5)+parseInt(_0x1098e9(0xee))/0x6+-parseInt(_0x1098e9(0x10b))/0x7+-parseInt(_0x1098e9(0xfd))/0x8;if(_0x38811c===_0x507802)break;else _0x17eb3a['push'](_0x17eb3a['shift']());}catch(_0x2fcd80){_0x17eb3a['push'](_0x17eb3a['shift']());}}}(a230_0x6434,0x6e300));const a230_0x29a1ee=(function(){let _0x1fe2f6=!![];return function(_0x43da8d,_0x30a0b8){const _0x1dfc73=_0x1fe2f6?function(){const _0xf71eb4=a230_0x18b9;if(_0x30a0b8){const _0x165f79=_0x30a0b8[_0xf71eb4(0xd3)](_0x43da8d,arguments);return _0x30a0b8=null,_0x165f79;}}:function(){};return _0x1fe2f6=![],_0x1dfc73;};}()),a230_0x1a7305=a230_0x29a1ee(this,function(){const _0xcc4119=a230_0x18b9;return a230_0x1a7305[_0xcc4119(0xd5)]()[_0xcc4119(0x107)](_0xcc4119(0xe5))[_0xcc4119(0xd5)]()['constructor'](a230_0x1a7305)[_0xcc4119(0x107)]('(((.+)+)+)+$');});a230_0x1a7305();'use strict';var __decorate=this&&this[a230_0x3c2737(0x10e)]||function(_0x336b82,_0x4b8041,_0x1b24c7,_0x4489f1){const _0x5e8cb4=a230_0x3c2737;var _0x2ca505=arguments[_0x5e8cb4(0xf2)],_0x387026=_0x2ca505<0x3?_0x4b8041:_0x4489f1===null?_0x4489f1=Object[_0x5e8cb4(0xc8)](_0x4b8041,_0x1b24c7):_0x4489f1,_0x1b4fe8;if(typeof Reflect===_0x5e8cb4(0xcb)&&typeof Reflect[_0x5e8cb4(0xcc)]===_0x5e8cb4(0xe8))_0x387026=Reflect['decorate'](_0x336b82,_0x4b8041,_0x1b24c7,_0x4489f1);else{for(var _0x2ae442=_0x336b82[_0x5e8cb4(0xf2)]-0x1;_0x2ae442>=0x0;_0x2ae442--)if(_0x1b4fe8=_0x336b82[_0x2ae442])_0x387026=(_0x2ca505<0x3?_0x1b4fe8(_0x387026):_0x2ca505>0x3?_0x1b4fe8(_0x4b8041,_0x1b24c7,_0x387026):_0x1b4fe8(_0x4b8041,_0x1b24c7))||_0x387026;}return _0x2ca505>0x3&&_0x387026&&Object['defineProperty'](_0x4b8041,_0x1b24c7,_0x387026),_0x387026;},__metadata=this&&this[a230_0x3c2737(0x102)]||function(_0x43775a,_0x23268d){const _0x5b3ccf=a230_0x3c2737;if(typeof Reflect===_0x5b3ccf(0xcb)&&typeof Reflect[_0x5b3ccf(0xe0)]===_0x5b3ccf(0xe8))return Reflect[_0x5b3ccf(0xe0)](_0x43775a,_0x23268d);};Object[a230_0x3c2737(0xda)](exports,a230_0x3c2737(0xfe),{'value':!![]}),exports[a230_0x3c2737(0xd7)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a230_0x3c2737(0xe1)),constants_1=require('../../../../constants'),queries_1=require(a230_0x3c2737(0x106)),flosum_naming_utils_1=require(a230_0x3c2737(0xf6)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a230_0x3c2737(0xde));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1e0985,_0x596717){const _0x49dcf0=a230_0x3c2737;this[_0x49dcf0(0xe9)]=_0x1e0985,this[_0x49dcf0(0x108)]=_0x596717,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a230_0x3c2737(0x105)](_0x4aad0d){const _0x5b425a=a230_0x3c2737,_0x3005ab=(0x0,flosum_naming_utils_1[_0x5b425a(0xeb)])(_0x4aad0d,[_0x5b425a(0xce),_0x5b425a(0x100),'CRC32__c',_0x5b425a(0xdc),_0x5b425a(0xcf),'Id']);return{'id':_0x3005ab['Id'],'name':_0x3005ab['Component_Name__c'],'type':_0x3005ab[_0x5b425a(0x100)],'fileName':_0x3005ab[_0x5b425a(0xdc)],'crc32':_0x3005ab[_0x5b425a(0xd2)],'version':+_0x3005ab[_0x5b425a(0xcf)]};}async[a230_0x3c2737(0xca)](_0x443f04){const _0x357b53=a230_0x3c2737,[_0x21e5c7]=await this['queryService'][_0x357b53(0xf7)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x357b53(0xf8)](_0x357b53(0x10c),_0x443f04));if(!_0x21e5c7)throw new not_found_error_1[(_0x357b53(0xf4))](_0x357b53(0xf9)+_0x443f04+_0x357b53(0xf3));return _0x21e5c7['Id'];}async['getBranchIdByName'](_0x5066a8){const _0x31567a=a230_0x3c2737,[_0x935715]=await this[_0x31567a(0xe9)][_0x31567a(0xf7)](queries_1[_0x31567a(0xf1)]['replace'](_0x31567a(0x10c),_0x5066a8));if(!_0x935715)throw new not_found_error_1['NotFoundError'](_0x31567a(0xe6)+_0x5066a8+_0x31567a(0xf3));return _0x935715['Id'];}async[a230_0x3c2737(0xdd)](){const _0x24faaf=a230_0x3c2737,_0x5f2880=await this[_0x24faaf(0xe9)][_0x24faaf(0xf7)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x5f2880[_0x24faaf(0xcd)](_0x574bf6=>(0x0,flosum_naming_utils_1[_0x24faaf(0xeb)])(_0x574bf6,['Id',_0x24faaf(0xd4)]))[_0x24faaf(0xcd)](_0x20b2d9=>({'id':_0x20b2d9['Id'],'name':_0x20b2d9[_0x24faaf(0xd4)]}));}async['fetchRepositoryComponentsByFilenames'](_0x10d367,_0x2cf979){const _0x41cbc9=a230_0x3c2737,_0xcd97a3=[];while(_0x10d367[_0x41cbc9(0xf2)]){const _0x1c4db6=queries_1[_0x41cbc9(0xd9)][_0x41cbc9(0xf8)]('%fileNames%',_0x10d367[_0x41cbc9(0xd0)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x229802=>'\x27'+_0x229802+'\x27')[_0x41cbc9(0xc6)](','))[_0x41cbc9(0xf8)](_0x41cbc9(0xec),_0x2cf979),_0xde0e75=await this[_0x41cbc9(0xe9)][_0x41cbc9(0xf7)](_0x1c4db6);_0xcd97a3[_0x41cbc9(0xfc)](..._0xde0e75);}return _0xcd97a3[_0x41cbc9(0xcd)](_0x11f2d0=>this[_0x41cbc9(0x105)](_0x11f2d0));}async[a230_0x3c2737(0xe7)](_0x8ea555,_0x15379c){const _0x369d40=a230_0x3c2737,_0x1236a0=[];while(_0x8ea555[_0x369d40(0xf2)]){const _0x52bba3=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY']['replace']('%fileNames%',_0x8ea555[_0x369d40(0xd0)](0x0,this[_0x369d40(0xef)])[_0x369d40(0xcd)](_0x4ec1a9=>'\x27'+_0x4ec1a9+'\x27')['join'](','))[_0x369d40(0xf8)](_0x369d40(0xea),_0x15379c),_0x250af2=await this['queryService']['query'](_0x52bba3);_0x1236a0['push'](..._0x250af2);}return _0x1236a0['map'](_0x2ba52b=>this['extractComponentMetadataFromRecord'](_0x2ba52b));}async[a230_0x3c2737(0x103)](_0x3c0bc9){const _0x334c2a=a230_0x3c2737,_0xf7d0ab=queries_1[_0x334c2a(0x109)]['replace'](_0x334c2a(0xec),_0x3c0bc9),_0x52e981=await this[_0x334c2a(0xe9)]['query'](_0xf7d0ab);return _0x52e981['map'](_0x12febe=>this[_0x334c2a(0x105)](_0x12febe));}async[a230_0x3c2737(0xff)](_0x368c3d){const _0x21c52f=a230_0x3c2737,_0x50e13e=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x21c52f(0xf8)](_0x21c52f(0xea),_0x368c3d),_0x501563=await this[_0x21c52f(0xe9)][_0x21c52f(0xf7)](_0x50e13e);return _0x501563[_0x21c52f(0xcd)](_0x23cefc=>this[_0x21c52f(0x105)](_0x23cefc));}async[a230_0x3c2737(0xc9)](_0x5c689d){const _0x472c32=a230_0x3c2737,_0x319824=[..._0x5c689d],_0x214d49=[];while(_0x319824[_0x472c32(0xf2)]){const _0x587042=queries_1[_0x472c32(0xe3)][_0x472c32(0xf8)](_0x472c32(0xd1),_0x319824[_0x472c32(0xd0)](0x0,this[_0x472c32(0xef)])[_0x472c32(0xcd)](_0x1cd409=>'\x27'+_0x1cd409+'\x27')['join'](',')),_0x5be77b=await this[_0x472c32(0xe9)][_0x472c32(0xf7)](_0x587042);_0x214d49['push'](..._0x5be77b[_0x472c32(0xcd)](_0x43938c=>_0x43938c['Id']));}return _0x214d49;}async['createCommit'](_0x1c8fae,_0xdecd4a){const _0x233857=a230_0x3c2737;return this[_0x233857(0x108)][_0x233857(0x104)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x233857(0xdf)]+'Repository__c']:_0xdecd4a,[constants_1[_0x233857(0xdf)]+_0x233857(0x10d)]:_0x1c8fae['substr'](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x233857(0xfa)]:_0x233857(0xdb),[constants_1[_0x233857(0x10a)]+_0x233857(0xd8)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a230_0x3c2737(0xf0)])(),__metadata(a230_0x3c2737(0xfb),[salesforce_query_service_1[a230_0x3c2737(0xe2)],salesforce_rest_service_1[a230_0x3c2737(0xd6)]])],SalesforceGitSyncService),exports[a230_0x3c2737(0xd7)]=SalesforceGitSyncService;