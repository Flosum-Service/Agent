const a230_0x51b58e=a230_0x4edb;(function(_0x111ac6,_0x470b70){const _0x453597=a230_0x4edb,_0x1f0fd0=_0x111ac6();while(!![]){try{const _0x16e5a4=-parseInt(_0x453597(0x13e))/0x1*(-parseInt(_0x453597(0xfe))/0x2)+parseInt(_0x453597(0x11f))/0x3+parseInt(_0x453597(0x145))/0x4+parseInt(_0x453597(0x12d))/0x5+parseInt(_0x453597(0x133))/0x6*(parseInt(_0x453597(0x120))/0x7)+parseInt(_0x453597(0x128))/0x8*(-parseInt(_0x453597(0x12f))/0x9)+-parseInt(_0x453597(0x124))/0xa;if(_0x16e5a4===_0x470b70)break;else _0x1f0fd0['push'](_0x1f0fd0['shift']());}catch(_0x1ac6a7){_0x1f0fd0['push'](_0x1f0fd0['shift']());}}}(a230_0x3c46,0x41e51));function a230_0x4edb(_0x57e4c6,_0x28eabd){const _0xa6255c=a230_0x3c46();return a230_0x4edb=function(_0x34bf1c,_0x32c828){_0x34bf1c=_0x34bf1c-0xfc;let _0x3c4622=_0xa6255c[_0x34bf1c];return _0x3c4622;},a230_0x4edb(_0x57e4c6,_0x28eabd);}const a230_0x32c828=(function(){let _0x20d507=!![];return function(_0x384e07,_0x1e79bf){const _0x420b15=_0x20d507?function(){const _0x311f26=a230_0x4edb;if(_0x1e79bf){const _0x4f1096=_0x1e79bf[_0x311f26(0xfc)](_0x384e07,arguments);return _0x1e79bf=null,_0x4f1096;}}:function(){};return _0x20d507=![],_0x420b15;};}()),a230_0x34bf1c=a230_0x32c828(this,function(){const _0x4d675b=a230_0x4edb;return a230_0x34bf1c[_0x4d675b(0x10f)]()['search'](_0x4d675b(0x112))[_0x4d675b(0x10f)]()[_0x4d675b(0x137)](a230_0x34bf1c)[_0x4d675b(0x13c)]('(((.+)+)+)+$');});a230_0x34bf1c();'use strict';var __decorate=this&&this[a230_0x51b58e(0x142)]||function(_0x40a8c0,_0x8502cc,_0x1446d5,_0x5dfd91){const _0x2d5677=a230_0x51b58e;var _0xeae0dd=arguments[_0x2d5677(0x131)],_0x2251eb=_0xeae0dd<0x3?_0x8502cc:_0x5dfd91===null?_0x5dfd91=Object[_0x2d5677(0x108)](_0x8502cc,_0x1446d5):_0x5dfd91,_0x5e8c44;if(typeof Reflect===_0x2d5677(0x144)&&typeof Reflect[_0x2d5677(0x107)]==='function')_0x2251eb=Reflect['decorate'](_0x40a8c0,_0x8502cc,_0x1446d5,_0x5dfd91);else{for(var _0x2be0dc=_0x40a8c0[_0x2d5677(0x131)]-0x1;_0x2be0dc>=0x0;_0x2be0dc--)if(_0x5e8c44=_0x40a8c0[_0x2be0dc])_0x2251eb=(_0xeae0dd<0x3?_0x5e8c44(_0x2251eb):_0xeae0dd>0x3?_0x5e8c44(_0x8502cc,_0x1446d5,_0x2251eb):_0x5e8c44(_0x8502cc,_0x1446d5))||_0x2251eb;}return _0xeae0dd>0x3&&_0x2251eb&&Object['defineProperty'](_0x8502cc,_0x1446d5,_0x2251eb),_0x2251eb;},__metadata=this&&this[a230_0x51b58e(0x10b)]||function(_0x416c76,_0x17ebbb){const _0x54468c=a230_0x51b58e;if(typeof Reflect===_0x54468c(0x144)&&typeof Reflect[_0x54468c(0x100)]===_0x54468c(0x13b))return Reflect['metadata'](_0x416c76,_0x17ebbb);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a230_0x51b58e(0x114)),typedi_1=require(a230_0x51b58e(0x127)),constants_1=require(a230_0x51b58e(0x110)),queries_1=require(a230_0x51b58e(0x12c)),flosum_naming_utils_1=require(a230_0x51b58e(0x12e)),salesforce_query_service_1=require(a230_0x51b58e(0x11a)),salesforce_rest_service_1=require('./salesforce-rest.service');function a230_0x3c46(){const _0x4532a0=['../queries','1235820SrFNyn','../utils/flosum-naming.utils','414mOuoeY','FLOSUM_COMMIT','length','CRC32__c','40806xAYUBt','map','getComponentRecordTypes','Repository\x20\x22','constructor','getBranchIdByName','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','SalesforceRestService','function','search','Component_Type__c','1NUuxxK','extractFieldsFromRecord','Commit_Name__c','%branchId%','__decorate','queryService','object','1843844fKdRmX','apply','fetchBranchComponentsByFilenames','862804DWneuV','FLOSUM_NAMESPACE','metadata','replace','GET_BRANCH_BY_NAME_QUERY','Status__c','SalesforceGitSyncService','Repository__c','Service','decorate','getOwnPropertyDescriptor','\x22\x20not\x20found\x20in\x20flosum.','extractComponentMetadataFromRecord','__metadata','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','Is_From_Agent__c','NotFoundError','toString','../../../../constants','fetchRepositoryComponents','(((.+)+)+)+$','query','../../../../core/errors/not-found.error','fetchCommitManifestsByComponentIds','Branch\x20\x22','%name%','Component_Name__c','restService','./salesforce-query.service','MAX_QUERY_ARRAY_ITEMS','splice','FLOSUM_GIT_NAMESPACE','substr','35382aCkxlN','14hZiYub','join','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','createCommit','5811600esuTrN','%repositoryId%','SalesforceQueryService','typedi','54584nsmlVn','Version__c','fetchRepositoryComponentsByFilenames','push'];a230_0x3c46=function(){return _0x4532a0;};return a230_0x3c46();}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x5e449e,_0x1b57f8){const _0x36e489=a230_0x51b58e;this[_0x36e489(0x143)]=_0x5e449e,this[_0x36e489(0x119)]=_0x1b57f8,this[_0x36e489(0x11b)]=0xc8;}[a230_0x51b58e(0x10a)](_0x53b0b5){const _0xf1b90f=a230_0x51b58e,_0xc57b74=(0x0,flosum_naming_utils_1[_0xf1b90f(0x13f)])(_0x53b0b5,[_0xf1b90f(0x118),_0xf1b90f(0x13d),_0xf1b90f(0x132),'File_Name__c',_0xf1b90f(0x129),'Id']);return{'id':_0xc57b74['Id'],'name':_0xc57b74[_0xf1b90f(0x118)],'type':_0xc57b74['Component_Type__c'],'fileName':_0xc57b74['File_Name__c'],'crc32':_0xc57b74[_0xf1b90f(0x132)],'version':+_0xc57b74[_0xf1b90f(0x129)]};}async['getRepositoryIdByName'](_0x1b00b2){const _0x1311f3=a230_0x51b58e,[_0x303dc1]=await this[_0x1311f3(0x143)][_0x1311f3(0x113)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x1311f3(0x101)](_0x1311f3(0x117),_0x1b00b2));if(!_0x303dc1)throw new not_found_error_1[(_0x1311f3(0x10e))](_0x1311f3(0x136)+_0x1b00b2+_0x1311f3(0x109));return _0x303dc1['Id'];}async[a230_0x51b58e(0x138)](_0x4017e7){const _0x504db3=a230_0x51b58e,[_0x3f3cb9]=await this['queryService'][_0x504db3(0x113)](queries_1[_0x504db3(0x102)][_0x504db3(0x101)](_0x504db3(0x117),_0x4017e7));if(!_0x3f3cb9)throw new not_found_error_1[(_0x504db3(0x10e))](_0x504db3(0x116)+_0x4017e7+_0x504db3(0x109));return _0x3f3cb9['Id'];}async[a230_0x51b58e(0x135)](){const _0x4d3202=a230_0x51b58e,_0x1b5a30=await this[_0x4d3202(0x143)]['query'](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x1b5a30[_0x4d3202(0x134)](_0x357444=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x357444,['Id','Name']))['map'](_0x3adf5c=>({'id':_0x3adf5c['Id'],'name':_0x3adf5c['Name']}));}async[a230_0x51b58e(0x12a)](_0x503fdf,_0xc52cd){const _0x2c79e6=a230_0x51b58e,_0x1c8995=[];while(_0x503fdf[_0x2c79e6(0x131)]){const _0x4c89a0=queries_1[_0x2c79e6(0x10c)]['replace']('%fileNames%',_0x503fdf['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x2c79e6(0x134)](_0x234d95=>'\x27'+_0x234d95+'\x27')['join'](','))[_0x2c79e6(0x101)](_0x2c79e6(0x125),_0xc52cd),_0x3e5c4e=await this[_0x2c79e6(0x143)]['query'](_0x4c89a0);_0x1c8995[_0x2c79e6(0x12b)](..._0x3e5c4e);}return _0x1c8995['map'](_0x48399b=>this[_0x2c79e6(0x10a)](_0x48399b));}async[a230_0x51b58e(0xfd)](_0x215eb3,_0x5c9530){const _0x4783f4=a230_0x51b58e,_0x278cdc=[];while(_0x215eb3[_0x4783f4(0x131)]){const _0x4522d3=queries_1[_0x4783f4(0x139)]['replace']('%fileNames%',_0x215eb3[_0x4783f4(0x11c)](0x0,this[_0x4783f4(0x11b)])[_0x4783f4(0x134)](_0x5c46ed=>'\x27'+_0x5c46ed+'\x27')[_0x4783f4(0x121)](','))[_0x4783f4(0x101)](_0x4783f4(0x141),_0x5c9530),_0x1d30b8=await this['queryService'][_0x4783f4(0x113)](_0x4522d3);_0x278cdc[_0x4783f4(0x12b)](..._0x1d30b8);}return _0x278cdc['map'](_0x492991=>this[_0x4783f4(0x10a)](_0x492991));}async[a230_0x51b58e(0x111)](_0x840896){const _0x5cdb6e=a230_0x51b58e,_0x495422=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x5cdb6e(0x101)](_0x5cdb6e(0x125),_0x840896),_0x58b96d=await this[_0x5cdb6e(0x143)][_0x5cdb6e(0x113)](_0x495422);return _0x58b96d[_0x5cdb6e(0x134)](_0x471e60=>this['extractComponentMetadataFromRecord'](_0x471e60));}async['fetchBranchComponents'](_0x213e7f){const _0x138ae8=a230_0x51b58e,_0x5fb0f2=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x138ae8(0x101)](_0x138ae8(0x141),_0x213e7f),_0x4f7e8a=await this['queryService']['query'](_0x5fb0f2);return _0x4f7e8a['map'](_0x479619=>this[_0x138ae8(0x10a)](_0x479619));}async[a230_0x51b58e(0x115)](_0x226541){const _0x1a972f=a230_0x51b58e,_0xcef3a9=[..._0x226541],_0x5e593f=[];while(_0xcef3a9['length']){const _0x38b4ec=queries_1[_0x1a972f(0x122)]['replace']('%componentIds%',_0xcef3a9[_0x1a972f(0x11c)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x1a972f(0x134)](_0x9ae702=>'\x27'+_0x9ae702+'\x27')[_0x1a972f(0x121)](',')),_0x3bad90=await this['queryService'][_0x1a972f(0x113)](_0x38b4ec);_0x5e593f['push'](..._0x3bad90[_0x1a972f(0x134)](_0xfd197a=>_0xfd197a['Id']));}return _0x5e593f;}async[a230_0x51b58e(0x123)](_0x169201,_0x4dba43){const _0x516330=a230_0x51b58e;return this[_0x516330(0x119)]['post'](constants_1[_0x516330(0x130)],{[constants_1[_0x516330(0xff)]+_0x516330(0x105)]:_0x4dba43,[constants_1[_0x516330(0xff)]+_0x516330(0x140)]:_0x169201[_0x516330(0x11e)](0x0,0xff),[constants_1[_0x516330(0xff)]+_0x516330(0x103)]:'Completed',[constants_1[_0x516330(0x11d)]+_0x516330(0x10d)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a230_0x51b58e(0x106)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a230_0x51b58e(0x126)],salesforce_rest_service_1[a230_0x51b58e(0x13a)]])],SalesforceGitSyncService),exports[a230_0x51b58e(0x104)]=SalesforceGitSyncService;