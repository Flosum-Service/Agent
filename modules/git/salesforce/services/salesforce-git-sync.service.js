const a263_0x262cc2=a263_0x1c75;(function(_0x503b0b,_0x4d4370){const _0x70bec4=a263_0x1c75,_0x2997ae=_0x503b0b();while(!![]){try{const _0x4a955a=parseInt(_0x70bec4(0x110))/0x1*(-parseInt(_0x70bec4(0x133))/0x2)+parseInt(_0x70bec4(0x11f))/0x3+parseInt(_0x70bec4(0x107))/0x4+parseInt(_0x70bec4(0x13c))/0x5*(parseInt(_0x70bec4(0x10b))/0x6)+-parseInt(_0x70bec4(0x112))/0x7+-parseInt(_0x70bec4(0xee))/0x8+-parseInt(_0x70bec4(0xff))/0x9;if(_0x4a955a===_0x4d4370)break;else _0x2997ae['push'](_0x2997ae['shift']());}catch(_0x56a705){_0x2997ae['push'](_0x2997ae['shift']());}}}(a263_0x3a9d,0xedbb1));const a263_0x23eec6=(function(){let _0x1f8485=!![];return function(_0x49ccde,_0x4f694b){const _0x4130d9=_0x1f8485?function(){const _0x19281c=a263_0x1c75;if(_0x4f694b){const _0x1578c6=_0x4f694b[_0x19281c(0xf6)](_0x49ccde,arguments);return _0x4f694b=null,_0x1578c6;}}:function(){};return _0x1f8485=![],_0x4130d9;};}()),a263_0xca96a6=a263_0x23eec6(this,function(){const _0x25b6b2=a263_0x1c75;return a263_0xca96a6[_0x25b6b2(0xf8)]()[_0x25b6b2(0x124)](_0x25b6b2(0xfe))[_0x25b6b2(0xf8)]()[_0x25b6b2(0x135)](a263_0xca96a6)[_0x25b6b2(0x124)](_0x25b6b2(0xfe));});a263_0xca96a6();function a263_0x1c75(_0x28942f,_0x23e361){const _0x4a8484=a263_0x3a9d();return a263_0x1c75=function(_0xca96a6,_0x23eec6){_0xca96a6=_0xca96a6-0xee;let _0x3a9dec=_0x4a8484[_0xca96a6];return _0x3a9dec;},a263_0x1c75(_0x28942f,_0x23e361);}'use strict';var __decorate=this&&this[a263_0x262cc2(0x100)]||function(_0x37cc3b,_0x1c0be5,_0x4df2bf,_0x23a62a){const _0xf5ff62=a263_0x262cc2;var _0x450800=arguments[_0xf5ff62(0x12b)],_0x12e2ba=_0x450800<0x3?_0x1c0be5:_0x23a62a===null?_0x23a62a=Object[_0xf5ff62(0x109)](_0x1c0be5,_0x4df2bf):_0x23a62a,_0x151892;if(typeof Reflect==='object'&&typeof Reflect[_0xf5ff62(0x134)]===_0xf5ff62(0xf7))_0x12e2ba=Reflect['decorate'](_0x37cc3b,_0x1c0be5,_0x4df2bf,_0x23a62a);else{for(var _0x5b8fc6=_0x37cc3b[_0xf5ff62(0x12b)]-0x1;_0x5b8fc6>=0x0;_0x5b8fc6--)if(_0x151892=_0x37cc3b[_0x5b8fc6])_0x12e2ba=(_0x450800<0x3?_0x151892(_0x12e2ba):_0x450800>0x3?_0x151892(_0x1c0be5,_0x4df2bf,_0x12e2ba):_0x151892(_0x1c0be5,_0x4df2bf))||_0x12e2ba;}return _0x450800>0x3&&_0x12e2ba&&Object[_0xf5ff62(0x108)](_0x1c0be5,_0x4df2bf,_0x12e2ba),_0x12e2ba;},__metadata=this&&this['__metadata']||function(_0x1b8845,_0x29e79a){const _0x4e59b3=a263_0x262cc2;if(typeof Reflect===_0x4e59b3(0x12a)&&typeof Reflect[_0x4e59b3(0xf1)]===_0x4e59b3(0xf7))return Reflect[_0x4e59b3(0xf1)](_0x1b8845,_0x29e79a);};Object[a263_0x262cc2(0x108)](exports,a263_0x262cc2(0x13d),{'value':!![]}),exports[a263_0x262cc2(0x128)]=void 0x0;const not_found_error_1=require(a263_0x262cc2(0x10d)),typedi_1=require(a263_0x262cc2(0x102)),constants_1=require(a263_0x262cc2(0xfd)),queries_1=require(a263_0x262cc2(0x12d)),flosum_naming_utils_1=require(a263_0x262cc2(0x125)),salesforce_query_service_1=require(a263_0x262cc2(0x12c)),salesforce_rest_service_1=require(a263_0x262cc2(0x131));function a263_0x3a9d(){const _0x1807a5=['./salesforce-query.service','../queries','%componentIds%','post','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','./salesforce-rest.service','design:paramtypes','1426zneRiJ','decorate','constructor','GET_REPOSITORY_BY_NAME_QUERY','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','Name','Commit_Name__c','push','getRepositoryIdByName','358705QFzQZR','__esModule','map','868464nQJGYY','CRC32__c','queryService','metadata','%name%','MAX_QUERY_ARRAY_ITEMS','getBranchIdByName','join','apply','function','toString','fetchBranchComponentsByFilenames','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','SalesforceRestService','File_Name__c','../../../../constants','(((.+)+)+)+$','3786120dmBwvt','__decorate','extractComponentMetadataFromRecord','typedi','Component_Name__c','substr','NotFoundError','%repositoryId%','4849640GKLZSX','defineProperty','getOwnPropertyDescriptor','extractFieldsFromRecord','6hKFKCP','fetchRepositoryComponentsByFilenames','../../../../core/errors/not-found.error','Service','fetchCommitManifestsByComponentIds','277hvbCKp','fetchRepositoryComponents','1014783zQdvkm','%fileNames%','fetchBranchComponents','FLOSUM_COMMIT','GET_REPOSITORY_COMPONENTS_QUERY','\x22\x20not\x20found\x20in\x20flosum.','FLOSUM_NAMESPACE','Repository\x20\x22','Component_Type__c','splice','restService','query','Is_From_Agent__c','1683906CWmHkH','GET_COMPONENT_RECORD_TYPES_QUERY','Status__c','replace','SalesforceQueryService','search','../utils/flosum-naming.utils','getComponentRecordTypes','Version__c','SalesforceGitSyncService','%branchId%','object','length'];a263_0x3a9d=function(){return _0x1807a5;};return a263_0x3a9d();}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x240c62,_0x518a81){const _0x2f548e=a263_0x262cc2;this['queryService']=_0x240c62,this[_0x2f548e(0x11c)]=_0x518a81,this[_0x2f548e(0xf3)]=0xc8;}[a263_0x262cc2(0x101)](_0x35c5eb){const _0x594d4b=a263_0x262cc2,_0x3eea52=(0x0,flosum_naming_utils_1[_0x594d4b(0x10a)])(_0x35c5eb,['Component_Name__c','Component_Type__c',_0x594d4b(0xef),_0x594d4b(0xfc),_0x594d4b(0x127),'Id']);return{'id':_0x3eea52['Id'],'name':_0x3eea52[_0x594d4b(0x103)],'type':_0x3eea52[_0x594d4b(0x11a)],'fileName':_0x3eea52['File_Name__c'],'crc32':_0x3eea52[_0x594d4b(0xef)],'version':+_0x3eea52[_0x594d4b(0x127)]};}async[a263_0x262cc2(0x13b)](_0x262fb4){const _0x786d6b=a263_0x262cc2,[_0x4016a5]=await this[_0x786d6b(0xf0)][_0x786d6b(0x11d)](queries_1[_0x786d6b(0x136)][_0x786d6b(0x122)](_0x786d6b(0xf2),_0x262fb4));if(!_0x4016a5)throw new not_found_error_1['NotFoundError'](_0x786d6b(0x119)+_0x262fb4+_0x786d6b(0x117));return _0x4016a5['Id'];}async[a263_0x262cc2(0xf4)](_0xc7a2ce){const _0x2d079c=a263_0x262cc2,[_0x258c35]=await this['queryService'][_0x2d079c(0x11d)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x2d079c(0x122)]('%name%',_0xc7a2ce));if(!_0x258c35)throw new not_found_error_1[(_0x2d079c(0x105))]('Branch\x20\x22'+_0xc7a2ce+'\x22\x20not\x20found\x20in\x20flosum.');return _0x258c35['Id'];}async[a263_0x262cc2(0x126)](){const _0x4e3b3f=a263_0x262cc2,_0x458a1c=await this[_0x4e3b3f(0xf0)][_0x4e3b3f(0x11d)](queries_1[_0x4e3b3f(0x120)]);return _0x458a1c[_0x4e3b3f(0x13e)](_0x4f700a=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x4f700a,['Id','Name']))[_0x4e3b3f(0x13e)](_0x18fa26=>({'id':_0x18fa26['Id'],'name':_0x18fa26[_0x4e3b3f(0x138)]}));}async[a263_0x262cc2(0x10c)](_0x19d218,_0x253c33){const _0x4277d5=a263_0x262cc2,_0x41cadd=[];while(_0x19d218[_0x4277d5(0x12b)]){const _0x3370d1=queries_1[_0x4277d5(0x130)][_0x4277d5(0x122)](_0x4277d5(0x113),_0x19d218['splice'](0x0,this[_0x4277d5(0xf3)])['map'](_0x3fab7f=>'\x27'+_0x3fab7f+'\x27')[_0x4277d5(0xf5)](','))[_0x4277d5(0x122)](_0x4277d5(0x106),_0x253c33),_0x5b4475=await this['queryService'][_0x4277d5(0x11d)](_0x3370d1);_0x41cadd['push'](..._0x5b4475);}return _0x41cadd['map'](_0x321228=>this['extractComponentMetadataFromRecord'](_0x321228));}async[a263_0x262cc2(0xf9)](_0x2512e5,_0x1b993c){const _0x566880=a263_0x262cc2,_0x3c0d85=[];while(_0x2512e5[_0x566880(0x12b)]){const _0x57ae18=queries_1[_0x566880(0x137)][_0x566880(0x122)](_0x566880(0x113),_0x2512e5['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x566880(0x13e)](_0x3635df=>'\x27'+_0x3635df+'\x27')['join'](','))[_0x566880(0x122)](_0x566880(0x129),_0x1b993c),_0x47ce8e=await this[_0x566880(0xf0)][_0x566880(0x11d)](_0x57ae18);_0x3c0d85[_0x566880(0x13a)](..._0x47ce8e);}return _0x3c0d85['map'](_0x16aa16=>this[_0x566880(0x101)](_0x16aa16));}async[a263_0x262cc2(0x111)](_0x284a82){const _0x2ebeaf=a263_0x262cc2,_0x10ca1e=queries_1[_0x2ebeaf(0x116)][_0x2ebeaf(0x122)]('%repositoryId%',_0x284a82),_0x13c5ea=await this[_0x2ebeaf(0xf0)][_0x2ebeaf(0x11d)](_0x10ca1e);return _0x13c5ea[_0x2ebeaf(0x13e)](_0x28051a=>this[_0x2ebeaf(0x101)](_0x28051a));}async[a263_0x262cc2(0x114)](_0x2dd152){const _0x13c7d0=a263_0x262cc2,_0x529d30=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x13c7d0(0x122)]('%branchId%',_0x2dd152),_0x33d382=await this[_0x13c7d0(0xf0)][_0x13c7d0(0x11d)](_0x529d30);return _0x33d382[_0x13c7d0(0x13e)](_0x53ad12=>this[_0x13c7d0(0x101)](_0x53ad12));}async[a263_0x262cc2(0x10f)](_0x39ff18){const _0x4e2cb5=a263_0x262cc2,_0x2862b3=[..._0x39ff18],_0xb6bcac=[];while(_0x2862b3[_0x4e2cb5(0x12b)]){const _0x136369=queries_1[_0x4e2cb5(0xfa)][_0x4e2cb5(0x122)](_0x4e2cb5(0x12e),_0x2862b3[_0x4e2cb5(0x11b)](0x0,this[_0x4e2cb5(0xf3)])[_0x4e2cb5(0x13e)](_0x394555=>'\x27'+_0x394555+'\x27')[_0x4e2cb5(0xf5)](',')),_0x3b2f16=await this[_0x4e2cb5(0xf0)][_0x4e2cb5(0x11d)](_0x136369);_0xb6bcac['push'](..._0x3b2f16[_0x4e2cb5(0x13e)](_0x53a614=>_0x53a614['Id']));}return _0xb6bcac;}async['createCommit'](_0xc40ee7,_0x1e1a64){const _0x2e2917=a263_0x262cc2;return this['restService'][_0x2e2917(0x12f)](constants_1[_0x2e2917(0x115)],{[constants_1[_0x2e2917(0x118)]+'Repository__c']:_0x1e1a64,[constants_1['FLOSUM_NAMESPACE']+_0x2e2917(0x139)]:_0xc40ee7[_0x2e2917(0x104)](0x0,0xff),[constants_1[_0x2e2917(0x118)]+_0x2e2917(0x121)]:'Completed',[constants_1['FLOSUM_GIT_NAMESPACE']+_0x2e2917(0x11e)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a263_0x262cc2(0x10e)])(),__metadata(a263_0x262cc2(0x132),[salesforce_query_service_1[a263_0x262cc2(0x123)],salesforce_rest_service_1[a263_0x262cc2(0xfb)]])],SalesforceGitSyncService),exports[a263_0x262cc2(0x128)]=SalesforceGitSyncService;