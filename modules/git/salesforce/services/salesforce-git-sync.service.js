const a184_0xe4129f=a184_0x46c1;(function(_0x561757,_0x2b3336){const _0x224015=a184_0x46c1,_0x1f1ebf=_0x561757();while(!![]){try{const _0x3ea90f=parseInt(_0x224015(0xe5))/0x1*(parseInt(_0x224015(0xf9))/0x2)+parseInt(_0x224015(0xfd))/0x3*(parseInt(_0x224015(0xb2))/0x4)+-parseInt(_0x224015(0xbe))/0x5*(-parseInt(_0x224015(0xc5))/0x6)+parseInt(_0x224015(0xb0))/0x7+-parseInt(_0x224015(0xee))/0x8*(-parseInt(_0x224015(0xf3))/0x9)+parseInt(_0x224015(0xfc))/0xa*(-parseInt(_0x224015(0xdd))/0xb)+parseInt(_0x224015(0xf6))/0xc*(-parseInt(_0x224015(0xf2))/0xd);if(_0x3ea90f===_0x2b3336)break;else _0x1f1ebf['push'](_0x1f1ebf['shift']());}catch(_0x393777){_0x1f1ebf['push'](_0x1f1ebf['shift']());}}}(a184_0x3b75,0x4784f));function a184_0x3b75(){const _0x36bdd3=['decorate','fetchRepositoryComponents','282NFmBlr','toString','defineProperty','design:paramtypes','GET_REPOSITORY_COMPONENTS_QUERY','__metadata','push','Component_Name__c','./salesforce-rest.service','SalesforceGitSyncService','NotFoundError','../../../../constants','__esModule','Component_Type__c','Version__c','splice','GET_REPOSITORY_BY_NAME_QUERY','getBranchIdByName','FLOSUM_NAMESPACE','extractFieldsFromRecord','substr','length','../../../../core/errors/not-found.error','getComponentRecordTypes','9119PXCOUc','../utils/flosum-naming.utils','join','search','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','metadata','Branch\x20\x22','File_Name__c','1WvDfVU','SalesforceQueryService','restService','GET_COMPONENT_RECORD_TYPES_QUERY','Name','object','./salesforce-query.service','queryService','%name%','16FhHHna','%fileNames%','createCommit','fetchRepositoryComponentsByFilenames','1495AXaXRn','2040264DYRGpk','\x22\x20not\x20found\x20in\x20flosum.','GET_BRANCH_BY_NAME_QUERY','128196jZlIng','query','post','156010OZnjHM','fetchBranchComponents','function','590tovWTf','39fYoPdn','fetchBranchComponentsByFilenames','replace','FLOSUM_COMMIT','(((.+)+)+)+$','3739071hdOMxG','Service','27556dLjdiV','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','Is_From_Agent__c','fetchCommitManifestsByComponentIds','MAX_QUERY_ARRAY_ITEMS','apply','Completed','%branchId%','constructor','SalesforceRestService','%componentIds%','map','44180YJnWdy','extractComponentMetadataFromRecord','CRC32__c','../queries','getRepositoryIdByName'];a184_0x3b75=function(){return _0x36bdd3;};return a184_0x3b75();}const a184_0x26c206=(function(){let _0x570c87=!![];return function(_0x7ea32c,_0x361dfd){const _0x178c83=_0x570c87?function(){const _0xa1ff6b=a184_0x46c1;if(_0x361dfd){const _0x4fe9e2=_0x361dfd[_0xa1ff6b(0xb7)](_0x7ea32c,arguments);return _0x361dfd=null,_0x4fe9e2;}}:function(){};return _0x570c87=![],_0x178c83;};}()),a184_0x39286b=a184_0x26c206(this,function(){const _0x45a708=a184_0x46c1;return a184_0x39286b[_0x45a708(0xc6)]()[_0x45a708(0xe0)]('(((.+)+)+)+$')[_0x45a708(0xc6)]()[_0x45a708(0xba)](a184_0x39286b)[_0x45a708(0xe0)](_0x45a708(0xaf));});a184_0x39286b();'use strict';var __decorate=this&&this['__decorate']||function(_0x1bea4e,_0x49a44b,_0x31c89c,_0x1807f2){const _0x4fbfd0=a184_0x46c1;var _0xebc48=arguments[_0x4fbfd0(0xda)],_0x2006cb=_0xebc48<0x3?_0x49a44b:_0x1807f2===null?_0x1807f2=Object['getOwnPropertyDescriptor'](_0x49a44b,_0x31c89c):_0x1807f2,_0x5893ae;if(typeof Reflect===_0x4fbfd0(0xea)&&typeof Reflect['decorate']===_0x4fbfd0(0xfb))_0x2006cb=Reflect[_0x4fbfd0(0xc3)](_0x1bea4e,_0x49a44b,_0x31c89c,_0x1807f2);else{for(var _0x2d43da=_0x1bea4e['length']-0x1;_0x2d43da>=0x0;_0x2d43da--)if(_0x5893ae=_0x1bea4e[_0x2d43da])_0x2006cb=(_0xebc48<0x3?_0x5893ae(_0x2006cb):_0xebc48>0x3?_0x5893ae(_0x49a44b,_0x31c89c,_0x2006cb):_0x5893ae(_0x49a44b,_0x31c89c))||_0x2006cb;}return _0xebc48>0x3&&_0x2006cb&&Object[_0x4fbfd0(0xc7)](_0x49a44b,_0x31c89c,_0x2006cb),_0x2006cb;},__metadata=this&&this[a184_0xe4129f(0xca)]||function(_0x1f9ab0,_0x52a982){const _0x300652=a184_0xe4129f;if(typeof Reflect==='object'&&typeof Reflect[_0x300652(0xe2)]===_0x300652(0xfb))return Reflect[_0x300652(0xe2)](_0x1f9ab0,_0x52a982);};Object[a184_0xe4129f(0xc7)](exports,a184_0xe4129f(0xd1),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a184_0xe4129f(0xdb)),typedi_1=require('typedi'),constants_1=require(a184_0xe4129f(0xd0)),queries_1=require(a184_0xe4129f(0xc1)),flosum_naming_utils_1=require(a184_0xe4129f(0xde)),salesforce_query_service_1=require(a184_0xe4129f(0xeb)),salesforce_rest_service_1=require(a184_0xe4129f(0xcd));function a184_0x46c1(_0x416305,_0x4e1cb5){const _0x54f462=a184_0x3b75();return a184_0x46c1=function(_0x39286b,_0x26c206){_0x39286b=_0x39286b-0xac;let _0x3b7575=_0x54f462[_0x39286b];return _0x3b7575;},a184_0x46c1(_0x416305,_0x4e1cb5);}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x247e1c,_0x232a49){const _0x1293b1=a184_0xe4129f;this[_0x1293b1(0xec)]=_0x247e1c,this[_0x1293b1(0xe7)]=_0x232a49,this[_0x1293b1(0xb6)]=0xc8;}[a184_0xe4129f(0xbf)](_0x32c3ab){const _0x1a3e89=a184_0xe4129f,_0x26317b=flosum_naming_utils_1[_0x1a3e89(0xd8)](_0x32c3ab,[_0x1a3e89(0xcc),_0x1a3e89(0xd2),_0x1a3e89(0xc0),_0x1a3e89(0xe4),_0x1a3e89(0xd3),'Id']);return{'id':_0x26317b['Id'],'name':_0x26317b[_0x1a3e89(0xcc)],'type':_0x26317b[_0x1a3e89(0xd2)],'fileName':_0x26317b[_0x1a3e89(0xe4)],'crc32':_0x26317b['CRC32__c'],'version':+_0x26317b[_0x1a3e89(0xd3)]};}async[a184_0xe4129f(0xc2)](_0x41d2e2){const _0x132c4e=a184_0xe4129f,[_0x22eeb8]=await this['queryService'][_0x132c4e(0xf7)](queries_1[_0x132c4e(0xd5)][_0x132c4e(0xad)](_0x132c4e(0xed),_0x41d2e2));if(!_0x22eeb8)throw new not_found_error_1[(_0x132c4e(0xcf))]('Repository\x20\x22'+_0x41d2e2+_0x132c4e(0xf4));return _0x22eeb8['Id'];}async[a184_0xe4129f(0xd6)](_0x2687e9){const _0x5b0670=a184_0xe4129f,[_0x6d8c9]=await this[_0x5b0670(0xec)]['query'](queries_1[_0x5b0670(0xf5)]['replace'](_0x5b0670(0xed),_0x2687e9));if(!_0x6d8c9)throw new not_found_error_1[(_0x5b0670(0xcf))](_0x5b0670(0xe3)+_0x2687e9+_0x5b0670(0xf4));return _0x6d8c9['Id'];}async[a184_0xe4129f(0xdc)](){const _0x1cb568=a184_0xe4129f,_0x1a2497=await this[_0x1cb568(0xec)]['query'](queries_1[_0x1cb568(0xe8)]);return _0x1a2497['map'](_0x1b435a=>flosum_naming_utils_1[_0x1cb568(0xd8)](_0x1b435a,['Id',_0x1cb568(0xe9)]))[_0x1cb568(0xbd)](_0x1e1405=>({'id':_0x1e1405['Id'],'name':_0x1e1405[_0x1cb568(0xe9)]}));}async[a184_0xe4129f(0xf1)](_0x59af97,_0xa98069){const _0x325973=a184_0xe4129f,_0x58a3c7=[];while(_0x59af97['length']){const _0x1e941d=queries_1[_0x325973(0xe1)][_0x325973(0xad)](_0x325973(0xef),_0x59af97[_0x325973(0xd4)](0x0,this[_0x325973(0xb6)])[_0x325973(0xbd)](_0x1fcbed=>'\x27'+_0x1fcbed+'\x27')[_0x325973(0xdf)](','))['replace']('%repositoryId%',_0xa98069),_0x543196=await this[_0x325973(0xec)][_0x325973(0xf7)](_0x1e941d);_0x58a3c7[_0x325973(0xcb)](..._0x543196);}return _0x58a3c7[_0x325973(0xbd)](_0x3dac58=>this['extractComponentMetadataFromRecord'](_0x3dac58));}async[a184_0xe4129f(0xac)](_0x16ac8c,_0x33659b){const _0x42a686=a184_0xe4129f,_0x3fae43=[];while(_0x16ac8c[_0x42a686(0xda)]){const _0x5a7545=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY']['replace'](_0x42a686(0xef),_0x16ac8c[_0x42a686(0xd4)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x42a686(0xbd)](_0x5bc66e=>'\x27'+_0x5bc66e+'\x27')[_0x42a686(0xdf)](','))[_0x42a686(0xad)](_0x42a686(0xb9),_0x33659b),_0x59ed73=await this['queryService']['query'](_0x5a7545);_0x3fae43[_0x42a686(0xcb)](..._0x59ed73);}return _0x3fae43['map'](_0x514508=>this[_0x42a686(0xbf)](_0x514508));}async[a184_0xe4129f(0xc4)](_0x25594a){const _0xfb4f66=a184_0xe4129f,_0x18b43c=queries_1[_0xfb4f66(0xc9)][_0xfb4f66(0xad)]('%repositoryId%',_0x25594a),_0x10d4fd=await this['queryService'][_0xfb4f66(0xf7)](_0x18b43c);return _0x10d4fd['map'](_0x166dae=>this[_0xfb4f66(0xbf)](_0x166dae));}async[a184_0xe4129f(0xfa)](_0x63dd29){const _0x63a811=a184_0xe4129f,_0x4c76d7=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x63a811(0xad)](_0x63a811(0xb9),_0x63dd29),_0x4bb539=await this['queryService'][_0x63a811(0xf7)](_0x4c76d7);return _0x4bb539[_0x63a811(0xbd)](_0x4545f7=>this[_0x63a811(0xbf)](_0x4545f7));}async[a184_0xe4129f(0xb5)](_0xb38368){const _0x6789b4=a184_0xe4129f,_0x2a3019=[..._0xb38368],_0xc915ca=[];while(_0x2a3019[_0x6789b4(0xda)]){const _0x55dcf7=queries_1[_0x6789b4(0xb3)]['replace'](_0x6789b4(0xbc),_0x2a3019['splice'](0x0,this[_0x6789b4(0xb6)])[_0x6789b4(0xbd)](_0x598022=>'\x27'+_0x598022+'\x27')[_0x6789b4(0xdf)](',')),_0xb8320c=await this[_0x6789b4(0xec)][_0x6789b4(0xf7)](_0x55dcf7);_0xc915ca[_0x6789b4(0xcb)](..._0xb8320c[_0x6789b4(0xbd)](_0x3a0e61=>_0x3a0e61['Id']));}return _0xc915ca;}async[a184_0xe4129f(0xf0)](_0x355aee,_0xb8ce8d){const _0x49a603=a184_0xe4129f;return this[_0x49a603(0xe7)][_0x49a603(0xf8)](constants_1[_0x49a603(0xae)],{[constants_1[_0x49a603(0xd7)]+'Repository__c']:_0xb8ce8d,[constants_1[_0x49a603(0xd7)]+'Commit_Name__c']:_0x355aee[_0x49a603(0xd9)](0x0,0xff),[constants_1[_0x49a603(0xd7)]+'Status__c']:_0x49a603(0xb8),[constants_1['FLOSUM_GIT_NAMESPACE']+_0x49a603(0xb4)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a184_0xe4129f(0xb1)](),__metadata(a184_0xe4129f(0xc8),[salesforce_query_service_1[a184_0xe4129f(0xe6)],salesforce_rest_service_1[a184_0xe4129f(0xbb)]])],SalesforceGitSyncService),exports[a184_0xe4129f(0xce)]=SalesforceGitSyncService;