const a197_0x590341=a197_0x4275;(function(_0x5f3a45,_0x3b33be){const _0x37b3de=a197_0x4275,_0x5f030c=_0x5f3a45();while(!![]){try{const _0x1b335e=parseInt(_0x37b3de(0x1e0))/0x1+parseInt(_0x37b3de(0x1f0))/0x2*(parseInt(_0x37b3de(0x1e4))/0x3)+-parseInt(_0x37b3de(0x1e1))/0x4+parseInt(_0x37b3de(0x1fc))/0x5*(parseInt(_0x37b3de(0x1e9))/0x6)+parseInt(_0x37b3de(0x1ea))/0x7+-parseInt(_0x37b3de(0x204))/0x8+-parseInt(_0x37b3de(0x210))/0x9;if(_0x1b335e===_0x3b33be)break;else _0x5f030c['push'](_0x5f030c['shift']());}catch(_0x592fc3){_0x5f030c['push'](_0x5f030c['shift']());}}}(a197_0x50f5,0x385f1));const a197_0x1ec6d5=(function(){let _0x2d84a6=!![];return function(_0x3faa66,_0x5b70fe){const _0x3e82d5=_0x2d84a6?function(){if(_0x5b70fe){const _0x369092=_0x5b70fe['apply'](_0x3faa66,arguments);return _0x5b70fe=null,_0x369092;}}:function(){};return _0x2d84a6=![],_0x3e82d5;};}()),a197_0x1f9956=a197_0x1ec6d5(this,function(){const _0x3630c1=a197_0x4275;return a197_0x1f9956[_0x3630c1(0x224)]()[_0x3630c1(0x1e8)]('(((.+)+)+)+$')[_0x3630c1(0x224)]()['constructor'](a197_0x1f9956)[_0x3630c1(0x1e8)](_0x3630c1(0x200));});a197_0x1f9956();'use strict';var __decorate=this&&this[a197_0x590341(0x1eb)]||function(_0x426f6c,_0x16d621,_0x5d1fb2,_0x4c6103){const _0x180dda=a197_0x590341;var _0x49b00f=arguments['length'],_0x1cb56b=_0x49b00f<0x3?_0x16d621:_0x4c6103===null?_0x4c6103=Object['getOwnPropertyDescriptor'](_0x16d621,_0x5d1fb2):_0x4c6103,_0x3b39a0;if(typeof Reflect===_0x180dda(0x1fe)&&typeof Reflect[_0x180dda(0x1df)]==='function')_0x1cb56b=Reflect['decorate'](_0x426f6c,_0x16d621,_0x5d1fb2,_0x4c6103);else{for(var _0x3d89d8=_0x426f6c[_0x180dda(0x222)]-0x1;_0x3d89d8>=0x0;_0x3d89d8--)if(_0x3b39a0=_0x426f6c[_0x3d89d8])_0x1cb56b=(_0x49b00f<0x3?_0x3b39a0(_0x1cb56b):_0x49b00f>0x3?_0x3b39a0(_0x16d621,_0x5d1fb2,_0x1cb56b):_0x3b39a0(_0x16d621,_0x5d1fb2))||_0x1cb56b;}return _0x49b00f>0x3&&_0x1cb56b&&Object[_0x180dda(0x203)](_0x16d621,_0x5d1fb2,_0x1cb56b),_0x1cb56b;},__metadata=this&&this[a197_0x590341(0x225)]||function(_0x4ec235,_0x110d60){const _0x2ad40d=a197_0x590341;if(typeof Reflect===_0x2ad40d(0x1fe)&&typeof Reflect['metadata']===_0x2ad40d(0x207))return Reflect[_0x2ad40d(0x1e7)](_0x4ec235,_0x110d60);};Object[a197_0x590341(0x203)](exports,a197_0x590341(0x21a),{'value':!![]}),exports[a197_0x590341(0x1f9)]=void 0x0;function a197_0x50f5(){const _0x4842cd=['GET_REPOSITORY_COMPONENTS_QUERY','151705OucPjZ','FLOSUM_COMMIT','object','Component_Name__c','(((.+)+)+)+$','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','%fileNames%','defineProperty','892360ioKuQU','fetchBranchComponents','\x22\x20not\x20found\x20in\x20flosum.','function','SalesforceRestService','NotFoundError','FLOSUM_NAMESPACE','Name','join','splice','getRepositoryIdByName','extractFieldsFromRecord','1233126llJuES','extractComponentMetadataFromRecord','MAX_QUERY_ARRAY_ITEMS','File_Name__c','query','typedi','Completed','substr','./salesforce-rest.service','%repositoryId%','__esModule','design:paramtypes','fetchBranchComponentsByFilenames','Branch\x20\x22','map','../../../../core/errors/not-found.error','replace','%branchId%','length','fetchCommitManifestsByComponentIds','toString','__metadata','GET_COMPONENT_RECORD_TYPES_QUERY','decorate','35870BqsdBo','152004XsItgL','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','Commit_Name__c','12837xRhGBv','Status__c','GET_REPOSITORY_BY_NAME_QUERY','metadata','search','6qCmnMu','313187TtlOyJ','__decorate','restService','../utils/flosum-naming.utils','post','Service','190JCvvJj','push','FLOSUM_GIT_NAMESPACE','%name%','CRC32__c','getComponentRecordTypes','queryService','Component_Type__c','Version__c','SalesforceGitSyncService','%componentIds%'];a197_0x50f5=function(){return _0x4842cd;};return a197_0x50f5();}function a197_0x4275(_0x3fd44b,_0x4726bc){const _0x267f7c=a197_0x50f5();return a197_0x4275=function(_0x1f9956,_0x1ec6d5){_0x1f9956=_0x1f9956-0x1df;let _0x50f509=_0x267f7c[_0x1f9956];return _0x50f509;},a197_0x4275(_0x3fd44b,_0x4726bc);}const not_found_error_1=require(a197_0x590341(0x21f)),typedi_1=require(a197_0x590341(0x215)),constants_1=require('../../../../constants'),queries_1=require('../queries'),flosum_naming_utils_1=require(a197_0x590341(0x1ed)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a197_0x590341(0x218));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x328bc3,_0x8901c){const _0x8f5e67=a197_0x590341;this[_0x8f5e67(0x1f6)]=_0x328bc3,this['restService']=_0x8901c,this[_0x8f5e67(0x212)]=0xc8;}['extractComponentMetadataFromRecord'](_0x37806a){const _0x4cfade=a197_0x590341,_0x12a98d=(0x0,flosum_naming_utils_1[_0x4cfade(0x20f)])(_0x37806a,[_0x4cfade(0x1ff),'Component_Type__c',_0x4cfade(0x1f4),_0x4cfade(0x213),_0x4cfade(0x1f8),'Id']);return{'id':_0x12a98d['Id'],'name':_0x12a98d[_0x4cfade(0x1ff)],'type':_0x12a98d[_0x4cfade(0x1f7)],'fileName':_0x12a98d[_0x4cfade(0x213)],'crc32':_0x12a98d[_0x4cfade(0x1f4)],'version':+_0x12a98d[_0x4cfade(0x1f8)]};}async[a197_0x590341(0x20e)](_0x322306){const _0x43c9e1=a197_0x590341,[_0x553c90]=await this[_0x43c9e1(0x1f6)][_0x43c9e1(0x214)](queries_1[_0x43c9e1(0x1e6)]['replace'](_0x43c9e1(0x1f3),_0x322306));if(!_0x553c90)throw new not_found_error_1[(_0x43c9e1(0x209))]('Repository\x20\x22'+_0x322306+'\x22\x20not\x20found\x20in\x20flosum.');return _0x553c90['Id'];}async['getBranchIdByName'](_0x9223d4){const _0x3d72dc=a197_0x590341,[_0x1a719c]=await this[_0x3d72dc(0x1f6)][_0x3d72dc(0x214)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x3d72dc(0x220)]('%name%',_0x9223d4));if(!_0x1a719c)throw new not_found_error_1[(_0x3d72dc(0x209))](_0x3d72dc(0x21d)+_0x9223d4+_0x3d72dc(0x206));return _0x1a719c['Id'];}async[a197_0x590341(0x1f5)](){const _0x5f2c65=a197_0x590341,_0x42b776=await this['queryService']['query'](queries_1[_0x5f2c65(0x226)]);return _0x42b776['map'](_0x426d42=>(0x0,flosum_naming_utils_1[_0x5f2c65(0x20f)])(_0x426d42,['Id',_0x5f2c65(0x20b)]))[_0x5f2c65(0x21e)](_0x2452b6=>({'id':_0x2452b6['Id'],'name':_0x2452b6[_0x5f2c65(0x20b)]}));}async['fetchRepositoryComponentsByFilenames'](_0x2aaee1,_0xe15af8){const _0x545902=a197_0x590341,_0x3f58db=[];while(_0x2aaee1['length']){const _0x46f538=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY']['replace'](_0x545902(0x202),_0x2aaee1['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x545902(0x21e)](_0xa84171=>'\x27'+_0xa84171+'\x27')[_0x545902(0x20c)](','))[_0x545902(0x220)](_0x545902(0x219),_0xe15af8),_0x28723f=await this[_0x545902(0x1f6)][_0x545902(0x214)](_0x46f538);_0x3f58db[_0x545902(0x1f1)](..._0x28723f);}return _0x3f58db[_0x545902(0x21e)](_0x97cf6e=>this[_0x545902(0x211)](_0x97cf6e));}async[a197_0x590341(0x21c)](_0x3d685a,_0x43fa31){const _0x231a43=a197_0x590341,_0x544671=[];while(_0x3d685a[_0x231a43(0x222)]){const _0x486583=queries_1[_0x231a43(0x1e2)][_0x231a43(0x220)](_0x231a43(0x202),_0x3d685a[_0x231a43(0x20d)](0x0,this[_0x231a43(0x212)])[_0x231a43(0x21e)](_0x45fc94=>'\x27'+_0x45fc94+'\x27')['join'](','))[_0x231a43(0x220)](_0x231a43(0x221),_0x43fa31),_0x44d713=await this[_0x231a43(0x1f6)]['query'](_0x486583);_0x544671[_0x231a43(0x1f1)](..._0x44d713);}return _0x544671[_0x231a43(0x21e)](_0x44b25d=>this[_0x231a43(0x211)](_0x44b25d));}async['fetchRepositoryComponents'](_0x1595c4){const _0x538954=a197_0x590341,_0x1bc5b4=queries_1[_0x538954(0x1fb)][_0x538954(0x220)](_0x538954(0x219),_0x1595c4),_0x21b743=await this[_0x538954(0x1f6)][_0x538954(0x214)](_0x1bc5b4);return _0x21b743[_0x538954(0x21e)](_0x179dd4=>this[_0x538954(0x211)](_0x179dd4));}async[a197_0x590341(0x205)](_0x1d760b){const _0x4fdb64=a197_0x590341,_0x15f689=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x4fdb64(0x220)](_0x4fdb64(0x221),_0x1d760b),_0x49dcd3=await this[_0x4fdb64(0x1f6)][_0x4fdb64(0x214)](_0x15f689);return _0x49dcd3[_0x4fdb64(0x21e)](_0x4c3c97=>this[_0x4fdb64(0x211)](_0x4c3c97));}async[a197_0x590341(0x223)](_0x151a23){const _0x5a90dc=a197_0x590341,_0x589b71=[..._0x151a23],_0x4c9917=[];while(_0x589b71[_0x5a90dc(0x222)]){const _0x45f114=queries_1[_0x5a90dc(0x201)][_0x5a90dc(0x220)](_0x5a90dc(0x1fa),_0x589b71['splice'](0x0,this[_0x5a90dc(0x212)])['map'](_0x221bef=>'\x27'+_0x221bef+'\x27')[_0x5a90dc(0x20c)](',')),_0x1a83b6=await this[_0x5a90dc(0x1f6)]['query'](_0x45f114);_0x4c9917['push'](..._0x1a83b6[_0x5a90dc(0x21e)](_0x4506a2=>_0x4506a2['Id']));}return _0x4c9917;}async['createCommit'](_0x271251,_0x579ef6){const _0x62da9=a197_0x590341;return this[_0x62da9(0x1ec)][_0x62da9(0x1ee)](constants_1[_0x62da9(0x1fd)],{[constants_1[_0x62da9(0x20a)]+'Repository__c']:_0x579ef6,[constants_1[_0x62da9(0x20a)]+_0x62da9(0x1e3)]:_0x271251[_0x62da9(0x217)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x62da9(0x1e5)]:_0x62da9(0x216),[constants_1[_0x62da9(0x1f2)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a197_0x590341(0x1ef)])(),__metadata(a197_0x590341(0x21b),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a197_0x590341(0x208)]])],SalesforceGitSyncService),exports[a197_0x590341(0x1f9)]=SalesforceGitSyncService;