const a231_0x307162=a231_0x41d4;(function(_0x2131a9,_0x26f719){const _0x2baa1d=a231_0x41d4,_0x5e4b8c=_0x2131a9();while(!![]){try{const _0x4c5133=-parseInt(_0x2baa1d(0x135))/0x1+parseInt(_0x2baa1d(0x15b))/0x2*(parseInt(_0x2baa1d(0x125))/0x3)+parseInt(_0x2baa1d(0x158))/0x4*(-parseInt(_0x2baa1d(0x11f))/0x5)+parseInt(_0x2baa1d(0x11e))/0x6+parseInt(_0x2baa1d(0x12f))/0x7*(-parseInt(_0x2baa1d(0x139))/0x8)+parseInt(_0x2baa1d(0x127))/0x9+-parseInt(_0x2baa1d(0x118))/0xa;if(_0x4c5133===_0x26f719)break;else _0x5e4b8c['push'](_0x5e4b8c['shift']());}catch(_0x25f33a){_0x5e4b8c['push'](_0x5e4b8c['shift']());}}}(a231_0x2200,0x9868c));const a231_0x2bb03a=(function(){let _0x2fc669=!![];return function(_0x1438c4,_0x40d4b5){const _0x7c5bf2=_0x2fc669?function(){const _0x2b0170=a231_0x41d4;if(_0x40d4b5){const _0x2e813c=_0x40d4b5[_0x2b0170(0x14c)](_0x1438c4,arguments);return _0x40d4b5=null,_0x2e813c;}}:function(){};return _0x2fc669=![],_0x7c5bf2;};}()),a231_0x369d44=a231_0x2bb03a(this,function(){const _0x11b3a3=a231_0x41d4;return a231_0x369d44[_0x11b3a3(0x147)]()[_0x11b3a3(0x11a)](_0x11b3a3(0x13a))['toString']()[_0x11b3a3(0x15c)](a231_0x369d44)['search'](_0x11b3a3(0x13a));});function a231_0x41d4(_0x10dcc7,_0x5dec3e){const _0x5d4cc0=a231_0x2200();return a231_0x41d4=function(_0x369d44,_0x2bb03a){_0x369d44=_0x369d44-0x111;let _0x2200cc=_0x5d4cc0[_0x369d44];return _0x2200cc;},a231_0x41d4(_0x10dcc7,_0x5dec3e);}a231_0x369d44();'use strict';var __decorate=this&&this[a231_0x307162(0x14d)]||function(_0x6afa3d,_0x36cfef,_0x17656b,_0x5de25f){const _0x12aaea=a231_0x307162;var _0x393e07=arguments[_0x12aaea(0x151)],_0x58a3ab=_0x393e07<0x3?_0x36cfef:_0x5de25f===null?_0x5de25f=Object[_0x12aaea(0x14f)](_0x36cfef,_0x17656b):_0x5de25f,_0x4b422d;if(typeof Reflect==='object'&&typeof Reflect[_0x12aaea(0x121)]===_0x12aaea(0x117))_0x58a3ab=Reflect['decorate'](_0x6afa3d,_0x36cfef,_0x17656b,_0x5de25f);else{for(var _0x4795f5=_0x6afa3d[_0x12aaea(0x151)]-0x1;_0x4795f5>=0x0;_0x4795f5--)if(_0x4b422d=_0x6afa3d[_0x4795f5])_0x58a3ab=(_0x393e07<0x3?_0x4b422d(_0x58a3ab):_0x393e07>0x3?_0x4b422d(_0x36cfef,_0x17656b,_0x58a3ab):_0x4b422d(_0x36cfef,_0x17656b))||_0x58a3ab;}return _0x393e07>0x3&&_0x58a3ab&&Object['defineProperty'](_0x36cfef,_0x17656b,_0x58a3ab),_0x58a3ab;},__metadata=this&&this[a231_0x307162(0x123)]||function(_0x49d297,_0x2ff9ce){const _0x5415ba=a231_0x307162;if(typeof Reflect===_0x5415ba(0x12b)&&typeof Reflect[_0x5415ba(0x126)]===_0x5415ba(0x117))return Reflect[_0x5415ba(0x126)](_0x49d297,_0x2ff9ce);};Object['defineProperty'](exports,a231_0x307162(0x11c),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a231_0x307162(0x124)),typedi_1=require(a231_0x307162(0x133)),constants_1=require(a231_0x307162(0x11b)),queries_1=require('../queries'),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a231_0x307162(0x152)),salesforce_rest_service_1=require(a231_0x307162(0x15a));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x2e2783,_0x5486f9){const _0x2beaaf=a231_0x307162;this[_0x2beaaf(0x15d)]=_0x2e2783,this[_0x2beaaf(0x12e)]=_0x5486f9,this[_0x2beaaf(0x142)]=0xc8;}[a231_0x307162(0x134)](_0x1f4ee6){const _0x34ab7a=a231_0x307162,_0x510fd3=(0x0,flosum_naming_utils_1[_0x34ab7a(0x154)])(_0x1f4ee6,['Component_Name__c',_0x34ab7a(0x130),'CRC32__c','File_Name__c',_0x34ab7a(0x14e),'Id']);return{'id':_0x510fd3['Id'],'name':_0x510fd3['Component_Name__c'],'type':_0x510fd3[_0x34ab7a(0x130)],'fileName':_0x510fd3[_0x34ab7a(0x11d)],'crc32':_0x510fd3[_0x34ab7a(0x150)],'version':+_0x510fd3[_0x34ab7a(0x14e)]};}async[a231_0x307162(0x157)](_0xccb3b4){const _0x448b6b=a231_0x307162,[_0x563e9d]=await this[_0x448b6b(0x15d)][_0x448b6b(0x140)](queries_1[_0x448b6b(0x141)][_0x448b6b(0x12a)](_0x448b6b(0x13e),_0xccb3b4));if(!_0x563e9d)throw new not_found_error_1[(_0x448b6b(0x153))](_0x448b6b(0x114)+_0xccb3b4+'\x22\x20not\x20found\x20in\x20flosum.');return _0x563e9d['Id'];}async[a231_0x307162(0x149)](_0x414559){const _0x645373=a231_0x307162,[_0x4a2bec]=await this[_0x645373(0x15d)][_0x645373(0x140)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x645373(0x12a)](_0x645373(0x13e),_0x414559));if(!_0x4a2bec)throw new not_found_error_1[(_0x645373(0x153))](_0x645373(0x120)+_0x414559+'\x22\x20not\x20found\x20in\x20flosum.');return _0x4a2bec['Id'];}async[a231_0x307162(0x159)](){const _0x55a187=a231_0x307162,_0x40cac4=await this[_0x55a187(0x15d)][_0x55a187(0x140)](queries_1[_0x55a187(0x129)]);return _0x40cac4['map'](_0x482ca4=>(0x0,flosum_naming_utils_1[_0x55a187(0x154)])(_0x482ca4,['Id',_0x55a187(0x111)]))[_0x55a187(0x116)](_0x34318d=>({'id':_0x34318d['Id'],'name':_0x34318d[_0x55a187(0x111)]}));}async[a231_0x307162(0x155)](_0x434bef,_0x50c385){const _0x2ca54=a231_0x307162,_0x4f77d=[];while(_0x434bef[_0x2ca54(0x151)]){const _0x34e7e8=queries_1[_0x2ca54(0x128)]['replace']('%fileNames%',_0x434bef[_0x2ca54(0x13d)](0x0,this[_0x2ca54(0x142)])[_0x2ca54(0x116)](_0x549dfb=>'\x27'+_0x549dfb+'\x27')[_0x2ca54(0x136)](','))['replace'](_0x2ca54(0x156),_0x50c385),_0x29e5fb=await this['queryService'][_0x2ca54(0x140)](_0x34e7e8);_0x4f77d[_0x2ca54(0x115)](..._0x29e5fb);}return _0x4f77d[_0x2ca54(0x116)](_0x105d5e=>this[_0x2ca54(0x134)](_0x105d5e));}async['fetchBranchComponentsByFilenames'](_0x2d5af3,_0x1bfd13){const _0x2ec5f0=a231_0x307162,_0x4e2148=[];while(_0x2d5af3[_0x2ec5f0(0x151)]){const _0x607a7e=queries_1[_0x2ec5f0(0x132)][_0x2ec5f0(0x12a)](_0x2ec5f0(0x122),_0x2d5af3[_0x2ec5f0(0x13d)](0x0,this[_0x2ec5f0(0x142)])[_0x2ec5f0(0x116)](_0x592010=>'\x27'+_0x592010+'\x27')[_0x2ec5f0(0x136)](','))[_0x2ec5f0(0x12a)](_0x2ec5f0(0x13b),_0x1bfd13),_0xf1a0df=await this[_0x2ec5f0(0x15d)]['query'](_0x607a7e);_0x4e2148[_0x2ec5f0(0x115)](..._0xf1a0df);}return _0x4e2148['map'](_0x7557b5=>this[_0x2ec5f0(0x134)](_0x7557b5));}async[a231_0x307162(0x14a)](_0x52d0c2){const _0x3ec8cb=a231_0x307162,_0x660db=queries_1[_0x3ec8cb(0x112)][_0x3ec8cb(0x12a)]('%repositoryId%',_0x52d0c2),_0x32b4ec=await this['queryService'][_0x3ec8cb(0x140)](_0x660db);return _0x32b4ec[_0x3ec8cb(0x116)](_0x3d6dc4=>this[_0x3ec8cb(0x134)](_0x3d6dc4));}async[a231_0x307162(0x15e)](_0x2db813){const _0x513f37=a231_0x307162,_0x5b2d49=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x513f37(0x12a)]('%branchId%',_0x2db813),_0x54aba1=await this[_0x513f37(0x15d)][_0x513f37(0x140)](_0x5b2d49);return _0x54aba1[_0x513f37(0x116)](_0x53215b=>this['extractComponentMetadataFromRecord'](_0x53215b));}async[a231_0x307162(0x137)](_0x2c3618){const _0x4ffa31=a231_0x307162,_0x18c91b=[..._0x2c3618],_0x4743b3=[];while(_0x18c91b[_0x4ffa31(0x151)]){const _0x4a6293=queries_1[_0x4ffa31(0x13f)][_0x4ffa31(0x12a)]('%componentIds%',_0x18c91b[_0x4ffa31(0x13d)](0x0,this[_0x4ffa31(0x142)])[_0x4ffa31(0x116)](_0x352e3f=>'\x27'+_0x352e3f+'\x27')[_0x4ffa31(0x136)](',')),_0x3fd159=await this[_0x4ffa31(0x15d)][_0x4ffa31(0x140)](_0x4a6293);_0x4743b3[_0x4ffa31(0x115)](..._0x3fd159[_0x4ffa31(0x116)](_0x608aa7=>_0x608aa7['Id']));}return _0x4743b3;}async[a231_0x307162(0x14b)](_0x153202,_0x4549b8){const _0x20ec5d=a231_0x307162;return this[_0x20ec5d(0x12e)][_0x20ec5d(0x113)](constants_1[_0x20ec5d(0x13c)],{[constants_1[_0x20ec5d(0x143)]+_0x20ec5d(0x119)]:_0x4549b8,[constants_1[_0x20ec5d(0x143)]+_0x20ec5d(0x12d)]:_0x153202[_0x20ec5d(0x146)](0x0,0xff),[constants_1[_0x20ec5d(0x143)]+_0x20ec5d(0x12c)]:_0x20ec5d(0x144),[constants_1[_0x20ec5d(0x145)]+_0x20ec5d(0x148)]:!![]});}};function a231_0x2200(){const _0x261422=['function','6865660zYSUOH','Repository__c','search','../../../../constants','__esModule','File_Name__c','5255490EwTkrZ','115kcevkY','Branch\x20\x22','decorate','%fileNames%','__metadata','../../../../core/errors/not-found.error','3LleVxr','metadata','3146166JTFvUm','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','GET_COMPONENT_RECORD_TYPES_QUERY','replace','object','Status__c','Commit_Name__c','restService','14iZfJIm','Component_Type__c','SalesforceRestService','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','typedi','extractComponentMetadataFromRecord','519487fsvVNV','join','fetchCommitManifestsByComponentIds','design:paramtypes','447248XoSpkA','(((.+)+)+)+$','%branchId%','FLOSUM_COMMIT','splice','%name%','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','query','GET_REPOSITORY_BY_NAME_QUERY','MAX_QUERY_ARRAY_ITEMS','FLOSUM_NAMESPACE','Completed','FLOSUM_GIT_NAMESPACE','substr','toString','Is_From_Agent__c','getBranchIdByName','fetchRepositoryComponents','createCommit','apply','__decorate','Version__c','getOwnPropertyDescriptor','CRC32__c','length','./salesforce-query.service','NotFoundError','extractFieldsFromRecord','fetchRepositoryComponentsByFilenames','%repositoryId%','getRepositoryIdByName','26924jzsBOm','getComponentRecordTypes','./salesforce-rest.service','1742914yjaLmd','constructor','queryService','fetchBranchComponents','SalesforceGitSyncService','Name','GET_REPOSITORY_COMPONENTS_QUERY','post','Repository\x20\x22','push','map'];a231_0x2200=function(){return _0x261422;};return a231_0x2200();}SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata(a231_0x307162(0x138),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a231_0x307162(0x131)]])],SalesforceGitSyncService),exports[a231_0x307162(0x15f)]=SalesforceGitSyncService;