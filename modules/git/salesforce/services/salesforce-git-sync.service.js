const a230_0x2450f6=a230_0x15c3;(function(_0x52af97,_0x4aec99){const _0x87bc76=a230_0x15c3,_0x379130=_0x52af97();while(!![]){try{const _0x39a632=parseInt(_0x87bc76(0x18e))/0x1*(parseInt(_0x87bc76(0x197))/0x2)+-parseInt(_0x87bc76(0x185))/0x3*(parseInt(_0x87bc76(0x18c))/0x4)+-parseInt(_0x87bc76(0x17e))/0x5*(parseInt(_0x87bc76(0x18d))/0x6)+-parseInt(_0x87bc76(0x18f))/0x7+-parseInt(_0x87bc76(0x19a))/0x8+-parseInt(_0x87bc76(0x1a0))/0x9+parseInt(_0x87bc76(0x1a4))/0xa*(parseInt(_0x87bc76(0x17d))/0xb);if(_0x39a632===_0x4aec99)break;else _0x379130['push'](_0x379130['shift']());}catch(_0x431c6d){_0x379130['push'](_0x379130['shift']());}}}(a230_0x2683,0xebc1d));const a230_0x22405b=(function(){let _0x104270=!![];return function(_0x4bd86a,_0x27ec0a){const _0xfdfe74=_0x104270?function(){if(_0x27ec0a){const _0x2dd872=_0x27ec0a['apply'](_0x4bd86a,arguments);return _0x27ec0a=null,_0x2dd872;}}:function(){};return _0x104270=![],_0xfdfe74;};}()),a230_0x975f8c=a230_0x22405b(this,function(){const _0x47ac30=a230_0x15c3;return a230_0x975f8c['toString']()[_0x47ac30(0x1a6)](_0x47ac30(0x17a))[_0x47ac30(0x186)]()[_0x47ac30(0x1aa)](a230_0x975f8c)[_0x47ac30(0x1a6)](_0x47ac30(0x17a));});function a230_0x15c3(_0x2dbb09,_0x58778b){const _0x4b9cfa=a230_0x2683();return a230_0x15c3=function(_0x975f8c,_0x22405b){_0x975f8c=_0x975f8c-0x174;let _0x2683a8=_0x4b9cfa[_0x975f8c];return _0x2683a8;},a230_0x15c3(_0x2dbb09,_0x58778b);}a230_0x975f8c();'use strict';function a230_0x2683(){const _0x1a5c76=['typedi','Version__c','2660794EebwdC','FLOSUM_NAMESPACE','GET_REPOSITORY_COMPONENTS_QUERY','9029600pYeapq','../queries','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','Is_From_Agent__c','decorate','replace','13457844eZcIhG','substr','Commit_Name__c','SalesforceGitSyncService','6730hdEqEl','NotFoundError','search','%branchId%','getRepositoryIdByName','extractComponentMetadataFromRecord','constructor','GET_REPOSITORY_BY_NAME_QUERY','queryService','join','__decorate','object','length','\x22\x20not\x20found\x20in\x20flosum.','defineProperty','Service','../../../../core/errors/not-found.error','restService','fetchBranchComponentsByFilenames','%componentIds%','CRC32__c','fetchRepositoryComponents','fetchRepositoryComponentsByFilenames','./salesforce-query.service','extractFieldsFromRecord','Completed','query','Name','FLOSUM_GIT_NAMESPACE','MAX_QUERY_ARRAY_ITEMS','%repositoryId%','(((.+)+)+)+$','function','getBranchIdByName','69003njfKDW','40IIcSOs','%name%','../../../../constants','splice','push','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','Component_Type__c','2319549xxiDlc','toString','File_Name__c','Repository\x20\x22','map','SalesforceRestService','FLOSUM_COMMIT','4oSEiwb','708162VvBXqK','1ngLDey','1715350CcUZpS','fetchCommitManifestsByComponentIds','__metadata','metadata','Status__c','%fileNames%'];a230_0x2683=function(){return _0x1a5c76;};return a230_0x2683();}var __decorate=this&&this[a230_0x2450f6(0x1ae)]||function(_0x5556ab,_0x215fba,_0x59eff7,_0xc117c8){const _0x42aa95=a230_0x2450f6;var _0x5415b8=arguments[_0x42aa95(0x1b0)],_0x17cc81=_0x5415b8<0x3?_0x215fba:_0xc117c8===null?_0xc117c8=Object['getOwnPropertyDescriptor'](_0x215fba,_0x59eff7):_0xc117c8,_0x7800a5;if(typeof Reflect===_0x42aa95(0x1af)&&typeof Reflect[_0x42aa95(0x19e)]===_0x42aa95(0x17b))_0x17cc81=Reflect['decorate'](_0x5556ab,_0x215fba,_0x59eff7,_0xc117c8);else{for(var _0x2880ef=_0x5556ab[_0x42aa95(0x1b0)]-0x1;_0x2880ef>=0x0;_0x2880ef--)if(_0x7800a5=_0x5556ab[_0x2880ef])_0x17cc81=(_0x5415b8<0x3?_0x7800a5(_0x17cc81):_0x5415b8>0x3?_0x7800a5(_0x215fba,_0x59eff7,_0x17cc81):_0x7800a5(_0x215fba,_0x59eff7))||_0x17cc81;}return _0x5415b8>0x3&&_0x17cc81&&Object[_0x42aa95(0x1b2)](_0x215fba,_0x59eff7,_0x17cc81),_0x17cc81;},__metadata=this&&this[a230_0x2450f6(0x191)]||function(_0x2a4401,_0x43f9cc){const _0xad0fff=a230_0x2450f6;if(typeof Reflect===_0xad0fff(0x1af)&&typeof Reflect[_0xad0fff(0x192)]===_0xad0fff(0x17b))return Reflect[_0xad0fff(0x192)](_0x2a4401,_0x43f9cc);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a230_0x2450f6(0x1a3)]=void 0x0;const not_found_error_1=require(a230_0x2450f6(0x1b4)),typedi_1=require(a230_0x2450f6(0x195)),constants_1=require(a230_0x2450f6(0x180)),queries_1=require(a230_0x2450f6(0x19b)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a230_0x2450f6(0x1bb)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x379720,_0xba92cf){const _0x5c08b6=a230_0x2450f6;this[_0x5c08b6(0x1ac)]=_0x379720,this[_0x5c08b6(0x1b5)]=_0xba92cf,this[_0x5c08b6(0x178)]=0xc8;}[a230_0x2450f6(0x1a9)](_0x2a69dd){const _0xa8ea13=a230_0x2450f6,_0x4fa1ba=(0x0,flosum_naming_utils_1[_0xa8ea13(0x1bc)])(_0x2a69dd,['Component_Name__c',_0xa8ea13(0x184),'CRC32__c','File_Name__c','Version__c','Id']);return{'id':_0x4fa1ba['Id'],'name':_0x4fa1ba['Component_Name__c'],'type':_0x4fa1ba[_0xa8ea13(0x184)],'fileName':_0x4fa1ba[_0xa8ea13(0x187)],'crc32':_0x4fa1ba[_0xa8ea13(0x1b8)],'version':+_0x4fa1ba[_0xa8ea13(0x196)]};}async[a230_0x2450f6(0x1a8)](_0x501c0a){const _0x49362c=a230_0x2450f6,[_0x584008]=await this[_0x49362c(0x1ac)][_0x49362c(0x175)](queries_1[_0x49362c(0x1ab)][_0x49362c(0x19f)](_0x49362c(0x17f),_0x501c0a));if(!_0x584008)throw new not_found_error_1['NotFoundError'](_0x49362c(0x188)+_0x501c0a+_0x49362c(0x1b1));return _0x584008['Id'];}async[a230_0x2450f6(0x17c)](_0xd295c3){const _0x19106a=a230_0x2450f6,[_0x544da3]=await this[_0x19106a(0x1ac)][_0x19106a(0x175)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x19106a(0x19f)](_0x19106a(0x17f),_0xd295c3));if(!_0x544da3)throw new not_found_error_1[(_0x19106a(0x1a5))]('Branch\x20\x22'+_0xd295c3+_0x19106a(0x1b1));return _0x544da3['Id'];}async['getComponentRecordTypes'](){const _0xa0ac3f=a230_0x2450f6,_0x22e9c3=await this[_0xa0ac3f(0x1ac)][_0xa0ac3f(0x175)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x22e9c3[_0xa0ac3f(0x189)](_0x55299e=>(0x0,flosum_naming_utils_1[_0xa0ac3f(0x1bc)])(_0x55299e,['Id','Name']))[_0xa0ac3f(0x189)](_0x29bc82=>({'id':_0x29bc82['Id'],'name':_0x29bc82[_0xa0ac3f(0x176)]}));}async[a230_0x2450f6(0x1ba)](_0x342b2f,_0x18f130){const _0x588873=a230_0x2450f6,_0x5400b9=[];while(_0x342b2f['length']){const _0xb5fce=queries_1[_0x588873(0x19c)][_0x588873(0x19f)](_0x588873(0x194),_0x342b2f['splice'](0x0,this[_0x588873(0x178)])[_0x588873(0x189)](_0x282b8e=>'\x27'+_0x282b8e+'\x27')[_0x588873(0x1ad)](','))[_0x588873(0x19f)](_0x588873(0x179),_0x18f130),_0x58836e=await this[_0x588873(0x1ac)][_0x588873(0x175)](_0xb5fce);_0x5400b9[_0x588873(0x182)](..._0x58836e);}return _0x5400b9[_0x588873(0x189)](_0x1f0796=>this[_0x588873(0x1a9)](_0x1f0796));}async[a230_0x2450f6(0x1b6)](_0xdb3011,_0x54d183){const _0x318d75=a230_0x2450f6,_0x3e0fbe=[];while(_0xdb3011['length']){const _0x183b77=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x318d75(0x19f)]('%fileNames%',_0xdb3011[_0x318d75(0x181)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x318d75(0x189)](_0x1173aa=>'\x27'+_0x1173aa+'\x27')[_0x318d75(0x1ad)](','))['replace'](_0x318d75(0x1a7),_0x54d183),_0x474b6d=await this[_0x318d75(0x1ac)][_0x318d75(0x175)](_0x183b77);_0x3e0fbe[_0x318d75(0x182)](..._0x474b6d);}return _0x3e0fbe['map'](_0x283cb2=>this[_0x318d75(0x1a9)](_0x283cb2));}async[a230_0x2450f6(0x1b9)](_0x36c2d2){const _0x29020b=a230_0x2450f6,_0x285f45=queries_1[_0x29020b(0x199)][_0x29020b(0x19f)](_0x29020b(0x179),_0x36c2d2),_0x52e7ff=await this[_0x29020b(0x1ac)][_0x29020b(0x175)](_0x285f45);return _0x52e7ff[_0x29020b(0x189)](_0x1c6ffe=>this['extractComponentMetadataFromRecord'](_0x1c6ffe));}async['fetchBranchComponents'](_0x25b1f6){const _0x30187b=a230_0x2450f6,_0x330ce3=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x30187b(0x19f)](_0x30187b(0x1a7),_0x25b1f6),_0x5dc9b0=await this[_0x30187b(0x1ac)][_0x30187b(0x175)](_0x330ce3);return _0x5dc9b0['map'](_0x4c5bcb=>this[_0x30187b(0x1a9)](_0x4c5bcb));}async[a230_0x2450f6(0x190)](_0x66c6fd){const _0x52fa3d=a230_0x2450f6,_0x4cfcf7=[..._0x66c6fd],_0xfe818d=[];while(_0x4cfcf7[_0x52fa3d(0x1b0)]){const _0x55c38b=queries_1[_0x52fa3d(0x183)][_0x52fa3d(0x19f)](_0x52fa3d(0x1b7),_0x4cfcf7[_0x52fa3d(0x181)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x52fa3d(0x189)](_0x2a9639=>'\x27'+_0x2a9639+'\x27')['join'](',')),_0x5b4f7a=await this[_0x52fa3d(0x1ac)][_0x52fa3d(0x175)](_0x55c38b);_0xfe818d[_0x52fa3d(0x182)](..._0x5b4f7a[_0x52fa3d(0x189)](_0x1ffa3c=>_0x1ffa3c['Id']));}return _0xfe818d;}async['createCommit'](_0x52ca5d,_0x228dfe){const _0x43b31a=a230_0x2450f6;return this['restService']['post'](constants_1[_0x43b31a(0x18b)],{[constants_1['FLOSUM_NAMESPACE']+'Repository__c']:_0x228dfe,[constants_1['FLOSUM_NAMESPACE']+_0x43b31a(0x1a2)]:_0x52ca5d[_0x43b31a(0x1a1)](0x0,0xff),[constants_1[_0x43b31a(0x198)]+_0x43b31a(0x193)]:_0x43b31a(0x174),[constants_1[_0x43b31a(0x177)]+_0x43b31a(0x19d)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a230_0x2450f6(0x1b3)])(),__metadata('design:paramtypes',[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a230_0x2450f6(0x18a)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;