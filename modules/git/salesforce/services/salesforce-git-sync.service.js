const a236_0x5d4415=a236_0x476e;(function(_0x4399a2,_0x578de4){const _0x54bd3e=a236_0x476e,_0x3cd179=_0x4399a2();while(!![]){try{const _0x48c6fc=-parseInt(_0x54bd3e(0x137))/0x1+-parseInt(_0x54bd3e(0x138))/0x2*(-parseInt(_0x54bd3e(0x13b))/0x3)+parseInt(_0x54bd3e(0x167))/0x4*(parseInt(_0x54bd3e(0x13d))/0x5)+-parseInt(_0x54bd3e(0x121))/0x6*(-parseInt(_0x54bd3e(0x128))/0x7)+-parseInt(_0x54bd3e(0x15c))/0x8+-parseInt(_0x54bd3e(0x16e))/0x9*(-parseInt(_0x54bd3e(0x145))/0xa)+parseInt(_0x54bd3e(0x151))/0xb*(-parseInt(_0x54bd3e(0x168))/0xc);if(_0x48c6fc===_0x578de4)break;else _0x3cd179['push'](_0x3cd179['shift']());}catch(_0x1f7732){_0x3cd179['push'](_0x3cd179['shift']());}}}(a236_0x1103,0x5aea7));const a236_0x15f882=(function(){let _0x5d9b4d=!![];return function(_0x29257e,_0x46d162){const _0x53f527=_0x5d9b4d?function(){const _0x268f86=a236_0x476e;if(_0x46d162){const _0x7c0d04=_0x46d162[_0x268f86(0x15a)](_0x29257e,arguments);return _0x46d162=null,_0x7c0d04;}}:function(){};return _0x5d9b4d=![],_0x53f527;};}()),a236_0x157b70=a236_0x15f882(this,function(){const _0x19ea95=a236_0x476e;return a236_0x157b70['toString']()['search'](_0x19ea95(0x157))[_0x19ea95(0x13c)]()[_0x19ea95(0x163)](a236_0x157b70)[_0x19ea95(0x153)]('(((.+)+)+)+$');});a236_0x157b70();'use strict';var __decorate=this&&this[a236_0x5d4415(0x16b)]||function(_0x51fda2,_0x1f0d9f,_0x18f147,_0x208a7d){const _0x51d3e8=a236_0x5d4415;var _0x147092=arguments[_0x51d3e8(0x130)],_0x3ea58b=_0x147092<0x3?_0x1f0d9f:_0x208a7d===null?_0x208a7d=Object[_0x51d3e8(0x131)](_0x1f0d9f,_0x18f147):_0x208a7d,_0x344acc;if(typeof Reflect===_0x51d3e8(0x147)&&typeof Reflect[_0x51d3e8(0x125)]===_0x51d3e8(0x164))_0x3ea58b=Reflect[_0x51d3e8(0x125)](_0x51fda2,_0x1f0d9f,_0x18f147,_0x208a7d);else{for(var _0x5d1afc=_0x51fda2[_0x51d3e8(0x130)]-0x1;_0x5d1afc>=0x0;_0x5d1afc--)if(_0x344acc=_0x51fda2[_0x5d1afc])_0x3ea58b=(_0x147092<0x3?_0x344acc(_0x3ea58b):_0x147092>0x3?_0x344acc(_0x1f0d9f,_0x18f147,_0x3ea58b):_0x344acc(_0x1f0d9f,_0x18f147))||_0x3ea58b;}return _0x147092>0x3&&_0x3ea58b&&Object[_0x51d3e8(0x16d)](_0x1f0d9f,_0x18f147,_0x3ea58b),_0x3ea58b;},__metadata=this&&this[a236_0x5d4415(0x134)]||function(_0x2bbffb,_0x17c412){const _0x84c481=a236_0x5d4415;if(typeof Reflect===_0x84c481(0x147)&&typeof Reflect['metadata']===_0x84c481(0x164))return Reflect['metadata'](_0x2bbffb,_0x17c412);};Object['defineProperty'](exports,a236_0x5d4415(0x155),{'value':!![]}),exports[a236_0x5d4415(0x12b)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a236_0x5d4415(0x150)),constants_1=require(a236_0x5d4415(0x132)),queries_1=require(a236_0x5d4415(0x144)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a236_0x5d4415(0x14d)),salesforce_rest_service_1=require(a236_0x5d4415(0x16c));function a236_0x476e(_0x48c72b,_0x524778){const _0x550224=a236_0x1103();return a236_0x476e=function(_0x157b70,_0x15f882){_0x157b70=_0x157b70-0x120;let _0x110347=_0x550224[_0x157b70];return _0x110347;},a236_0x476e(_0x48c72b,_0x524778);}function a236_0x1103(){const _0x17069f=['getComponentRecordTypes','map','12jPdcaQ','fetchBranchComponentsByFilenames','Branch\x20\x22','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','decorate','extractComponentMetadataFromRecord','Component_Name__c','251755AkfCoA','fetchCommitManifestsByComponentIds','fetchRepositoryComponents','SalesforceGitSyncService','%repositoryId%','push','NotFoundError','substr','length','getOwnPropertyDescriptor','../../../../constants','restService','__metadata','replace','SalesforceRestService','37230xMDQEC','457112BKcSsm','GET_REPOSITORY_COMPONENTS_QUERY','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','9AtwCdD','toString','5uDtVhz','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','%fileNames%','GET_BRANCH_COMPONENTS_QUERY','GET_REPOSITORY_BY_NAME_QUERY','extractFieldsFromRecord','splice','../queries','310XOBMTR','GET_COMPONENT_RECORD_TYPES_QUERY','object','query','%componentIds%','\x22\x20not\x20found\x20in\x20flosum.','%branchId%','File_Name__c','./salesforce-query.service','SalesforceQueryService','getRepositoryIdByName','typedi','837474yWhCJr','%name%','search','post','__esModule','design:paramtypes','(((.+)+)+)+$','FLOSUM_GIT_NAMESPACE','queryService','apply','Name','847440jMSlso','Service','createCommit','fetchBranchComponents','Version__c','fetchRepositoryComponentsByFilenames','FLOSUM_NAMESPACE','constructor','function','GET_BRANCH_BY_NAME_QUERY','Completed','2946628ORiYwT','168recNDO','Repository\x20\x22','join','__decorate','./salesforce-rest.service','defineProperty','25308hQWpXg'];a236_0x1103=function(){return _0x17069f;};return a236_0x1103();}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1ad7d4,_0x28159a){const _0x192bf8=a236_0x5d4415;this['queryService']=_0x1ad7d4,this[_0x192bf8(0x133)]=_0x28159a,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a236_0x5d4415(0x126)](_0x1cf84a){const _0x30c832=a236_0x5d4415,_0xcf7b8b=(0x0,flosum_naming_utils_1[_0x30c832(0x142)])(_0x1cf84a,[_0x30c832(0x127),'Component_Type__c','CRC32__c',_0x30c832(0x14c),'Version__c','Id']);return{'id':_0xcf7b8b['Id'],'name':_0xcf7b8b[_0x30c832(0x127)],'type':_0xcf7b8b['Component_Type__c'],'fileName':_0xcf7b8b[_0x30c832(0x14c)],'crc32':_0xcf7b8b['CRC32__c'],'version':+_0xcf7b8b[_0x30c832(0x160)]};}async[a236_0x5d4415(0x14f)](_0x703e3){const _0x116a85=a236_0x5d4415,[_0x3cb621]=await this[_0x116a85(0x159)]['query'](queries_1[_0x116a85(0x141)][_0x116a85(0x135)](_0x116a85(0x152),_0x703e3));if(!_0x3cb621)throw new not_found_error_1[(_0x116a85(0x12e))](_0x116a85(0x169)+_0x703e3+_0x116a85(0x14a));return _0x3cb621['Id'];}async['getBranchIdByName'](_0xd4a1c){const _0x503e8c=a236_0x5d4415,[_0x2a64ff]=await this[_0x503e8c(0x159)][_0x503e8c(0x148)](queries_1[_0x503e8c(0x165)][_0x503e8c(0x135)](_0x503e8c(0x152),_0xd4a1c));if(!_0x2a64ff)throw new not_found_error_1['NotFoundError'](_0x503e8c(0x123)+_0xd4a1c+_0x503e8c(0x14a));return _0x2a64ff['Id'];}async[a236_0x5d4415(0x16f)](){const _0xe12974=a236_0x5d4415,_0x4be936=await this[_0xe12974(0x159)][_0xe12974(0x148)](queries_1[_0xe12974(0x146)]);return _0x4be936[_0xe12974(0x120)](_0x379daf=>(0x0,flosum_naming_utils_1[_0xe12974(0x142)])(_0x379daf,['Id',_0xe12974(0x15b)]))[_0xe12974(0x120)](_0x20ccc9=>({'id':_0x20ccc9['Id'],'name':_0x20ccc9[_0xe12974(0x15b)]}));}async[a236_0x5d4415(0x161)](_0x281831,_0x2e990b){const _0x53a2a0=a236_0x5d4415,_0x1e116b=[];while(_0x281831[_0x53a2a0(0x130)]){const _0x1cb236=queries_1[_0x53a2a0(0x13e)][_0x53a2a0(0x135)]('%fileNames%',_0x281831[_0x53a2a0(0x143)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x53a2a0(0x120)](_0x3d27f8=>'\x27'+_0x3d27f8+'\x27')['join'](','))[_0x53a2a0(0x135)](_0x53a2a0(0x12c),_0x2e990b),_0x4ec14a=await this[_0x53a2a0(0x159)][_0x53a2a0(0x148)](_0x1cb236);_0x1e116b[_0x53a2a0(0x12d)](..._0x4ec14a);}return _0x1e116b[_0x53a2a0(0x120)](_0x4f1225=>this[_0x53a2a0(0x126)](_0x4f1225));}async[a236_0x5d4415(0x122)](_0x1c5e54,_0x38be26){const _0x5949d5=a236_0x5d4415,_0xe8fe17=[];while(_0x1c5e54[_0x5949d5(0x130)]){const _0x1d1eb0=queries_1[_0x5949d5(0x124)]['replace'](_0x5949d5(0x13f),_0x1c5e54['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x5949d5(0x120)](_0x541454=>'\x27'+_0x541454+'\x27')[_0x5949d5(0x16a)](','))[_0x5949d5(0x135)](_0x5949d5(0x14b),_0x38be26),_0x5cd3d7=await this[_0x5949d5(0x159)][_0x5949d5(0x148)](_0x1d1eb0);_0xe8fe17[_0x5949d5(0x12d)](..._0x5cd3d7);}return _0xe8fe17[_0x5949d5(0x120)](_0x34fb05=>this[_0x5949d5(0x126)](_0x34fb05));}async[a236_0x5d4415(0x12a)](_0x1cd81f){const _0x226bd9=a236_0x5d4415,_0x435755=queries_1[_0x226bd9(0x139)]['replace'](_0x226bd9(0x12c),_0x1cd81f),_0xc9a65f=await this[_0x226bd9(0x159)][_0x226bd9(0x148)](_0x435755);return _0xc9a65f[_0x226bd9(0x120)](_0x33a1e5=>this[_0x226bd9(0x126)](_0x33a1e5));}async[a236_0x5d4415(0x15f)](_0x50887c){const _0x311047=a236_0x5d4415,_0xfffac2=queries_1[_0x311047(0x140)][_0x311047(0x135)](_0x311047(0x14b),_0x50887c),_0x223850=await this[_0x311047(0x159)][_0x311047(0x148)](_0xfffac2);return _0x223850['map'](_0xb2ef25=>this['extractComponentMetadataFromRecord'](_0xb2ef25));}async[a236_0x5d4415(0x129)](_0x2227b1){const _0x412657=a236_0x5d4415,_0x6bee53=[..._0x2227b1],_0x7fe471=[];while(_0x6bee53['length']){const _0x4736a9=queries_1[_0x412657(0x13a)][_0x412657(0x135)](_0x412657(0x149),_0x6bee53[_0x412657(0x143)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x412657(0x120)](_0xd03935=>'\x27'+_0xd03935+'\x27')[_0x412657(0x16a)](',')),_0x10d04d=await this[_0x412657(0x159)]['query'](_0x4736a9);_0x7fe471['push'](..._0x10d04d[_0x412657(0x120)](_0x4ab674=>_0x4ab674['Id']));}return _0x7fe471;}async[a236_0x5d4415(0x15e)](_0x26384f,_0x3fc93d){const _0x449474=a236_0x5d4415;return this[_0x449474(0x133)][_0x449474(0x154)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x449474(0x162)]+'Repository__c']:_0x3fc93d,[constants_1[_0x449474(0x162)]+'Commit_Name__c']:_0x26384f[_0x449474(0x12f)](0x0,0xff),[constants_1[_0x449474(0x162)]+'Status__c']:_0x449474(0x166),[constants_1[_0x449474(0x158)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x5d4415(0x15d)])(),__metadata(a236_0x5d4415(0x156),[salesforce_query_service_1[a236_0x5d4415(0x14e)],salesforce_rest_service_1[a236_0x5d4415(0x136)]])],SalesforceGitSyncService),exports[a236_0x5d4415(0x12b)]=SalesforceGitSyncService;