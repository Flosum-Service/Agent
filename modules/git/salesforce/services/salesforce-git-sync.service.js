const a236_0x3d2d1c=a236_0x4f06;(function(_0x215d3b,_0x311d4d){const _0x4fc206=a236_0x4f06,_0x2055bd=_0x215d3b();while(!![]){try{const _0x3b828d=-parseInt(_0x4fc206(0x153))/0x1*(-parseInt(_0x4fc206(0x182))/0x2)+parseInt(_0x4fc206(0x16a))/0x3+-parseInt(_0x4fc206(0x181))/0x4*(-parseInt(_0x4fc206(0x13e))/0x5)+-parseInt(_0x4fc206(0x15a))/0x6*(-parseInt(_0x4fc206(0x144))/0x7)+parseInt(_0x4fc206(0x142))/0x8*(-parseInt(_0x4fc206(0x16d))/0x9)+parseInt(_0x4fc206(0x17d))/0xa+parseInt(_0x4fc206(0x178))/0xb*(-parseInt(_0x4fc206(0x17b))/0xc);if(_0x3b828d===_0x311d4d)break;else _0x2055bd['push'](_0x2055bd['shift']());}catch(_0x48220d){_0x2055bd['push'](_0x2055bd['shift']());}}}(a236_0x3889,0x1a6ab));const a236_0x125749=(function(){let _0x414c2a=!![];return function(_0x2a2f43,_0x4b9f82){const _0x322bc9=_0x414c2a?function(){const _0x1cb912=a236_0x4f06;if(_0x4b9f82){const _0xed5ce3=_0x4b9f82[_0x1cb912(0x168)](_0x2a2f43,arguments);return _0x4b9f82=null,_0xed5ce3;}}:function(){};return _0x414c2a=![],_0x322bc9;};}()),a236_0x1494b0=a236_0x125749(this,function(){const _0x34ee08=a236_0x4f06;return a236_0x1494b0[_0x34ee08(0x175)]()[_0x34ee08(0x14e)](_0x34ee08(0x151))['toString']()['constructor'](a236_0x1494b0)[_0x34ee08(0x14e)](_0x34ee08(0x151));});a236_0x1494b0();'use strict';var __decorate=this&&this[a236_0x3d2d1c(0x13b)]||function(_0x1bb689,_0x51d3fc,_0x19f427,_0x574013){const _0x567b93=a236_0x3d2d1c;var _0x4ed0eb=arguments[_0x567b93(0x156)],_0x506c99=_0x4ed0eb<0x3?_0x51d3fc:_0x574013===null?_0x574013=Object[_0x567b93(0x15e)](_0x51d3fc,_0x19f427):_0x574013,_0x16c9d3;if(typeof Reflect===_0x567b93(0x167)&&typeof Reflect['decorate']==='function')_0x506c99=Reflect['decorate'](_0x1bb689,_0x51d3fc,_0x19f427,_0x574013);else{for(var _0x7b192b=_0x1bb689[_0x567b93(0x156)]-0x1;_0x7b192b>=0x0;_0x7b192b--)if(_0x16c9d3=_0x1bb689[_0x7b192b])_0x506c99=(_0x4ed0eb<0x3?_0x16c9d3(_0x506c99):_0x4ed0eb>0x3?_0x16c9d3(_0x51d3fc,_0x19f427,_0x506c99):_0x16c9d3(_0x51d3fc,_0x19f427))||_0x506c99;}return _0x4ed0eb>0x3&&_0x506c99&&Object[_0x567b93(0x173)](_0x51d3fc,_0x19f427,_0x506c99),_0x506c99;},__metadata=this&&this[a236_0x3d2d1c(0x185)]||function(_0x51d8aa,_0x4602d4){const _0x2cbd9b=a236_0x3d2d1c;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x2cbd9b(0x13c))return Reflect[_0x2cbd9b(0x188)](_0x51d8aa,_0x4602d4);};function a236_0x4f06(_0x58393d,_0x5abb10){const _0x78c724=a236_0x3889();return a236_0x4f06=function(_0x1494b0,_0x125749){_0x1494b0=_0x1494b0-0x137;let _0x3889bf=_0x78c724[_0x1494b0];return _0x3889bf;},a236_0x4f06(_0x58393d,_0x5abb10);}Object[a236_0x3d2d1c(0x173)](exports,a236_0x3d2d1c(0x187),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a236_0x3d2d1c(0x148)),typedi_1=require(a236_0x3d2d1c(0x17c)),constants_1=require(a236_0x3d2d1c(0x14b)),queries_1=require(a236_0x3d2d1c(0x161)),flosum_naming_utils_1=require(a236_0x3d2d1c(0x17e)),salesforce_query_service_1=require(a236_0x3d2d1c(0x138)),salesforce_rest_service_1=require(a236_0x3d2d1c(0x147));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x4e4935,_0x414289){const _0xd776da=a236_0x3d2d1c;this['queryService']=_0x4e4935,this[_0xd776da(0x184)]=_0x414289,this[_0xd776da(0x164)]=0xc8;}[a236_0x3d2d1c(0x13a)](_0x4f5fa0){const _0x7e0163=a236_0x3d2d1c,_0x1ce818=(0x0,flosum_naming_utils_1[_0x7e0163(0x162)])(_0x4f5fa0,[_0x7e0163(0x165),_0x7e0163(0x189),'CRC32__c',_0x7e0163(0x139),'Version__c','Id']);return{'id':_0x1ce818['Id'],'name':_0x1ce818[_0x7e0163(0x165)],'type':_0x1ce818[_0x7e0163(0x189)],'fileName':_0x1ce818[_0x7e0163(0x139)],'crc32':_0x1ce818[_0x7e0163(0x163)],'version':+_0x1ce818[_0x7e0163(0x149)]};}async[a236_0x3d2d1c(0x159)](_0x4f120e){const _0x3932dc=a236_0x3d2d1c,[_0xc45c8e]=await this[_0x3932dc(0x155)]['query'](queries_1[_0x3932dc(0x179)]['replace'](_0x3932dc(0x16f),_0x4f120e));if(!_0xc45c8e)throw new not_found_error_1[(_0x3932dc(0x145))]('Repository\x20\x22'+_0x4f120e+_0x3932dc(0x141));return _0xc45c8e['Id'];}async[a236_0x3d2d1c(0x16b)](_0x1247bc){const _0xad3a00=a236_0x3d2d1c,[_0x14bdea]=await this[_0xad3a00(0x155)][_0xad3a00(0x15b)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0xad3a00(0x183)](_0xad3a00(0x16f),_0x1247bc));if(!_0x14bdea)throw new not_found_error_1['NotFoundError'](_0xad3a00(0x14c)+_0x1247bc+_0xad3a00(0x141));return _0x14bdea['Id'];}async[a236_0x3d2d1c(0x177)](){const _0x5e10fa=a236_0x3d2d1c,_0x53b6b3=await this[_0x5e10fa(0x155)]['query'](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x53b6b3['map'](_0x145607=>(0x0,flosum_naming_utils_1[_0x5e10fa(0x162)])(_0x145607,['Id',_0x5e10fa(0x15c)]))[_0x5e10fa(0x158)](_0x203088=>({'id':_0x203088['Id'],'name':_0x203088[_0x5e10fa(0x15c)]}));}async['fetchRepositoryComponentsByFilenames'](_0x48b3aa,_0x5103cd){const _0x2a08f0=a236_0x3d2d1c,_0x265d82=[];while(_0x48b3aa['length']){const _0x1674a1=queries_1[_0x2a08f0(0x16c)][_0x2a08f0(0x183)](_0x2a08f0(0x15f),_0x48b3aa[_0x2a08f0(0x14d)](0x0,this[_0x2a08f0(0x164)])[_0x2a08f0(0x158)](_0x2c0ad5=>'\x27'+_0x2c0ad5+'\x27')['join'](','))['replace'](_0x2a08f0(0x140),_0x5103cd),_0x54890f=await this[_0x2a08f0(0x155)]['query'](_0x1674a1);_0x265d82[_0x2a08f0(0x170)](..._0x54890f);}return _0x265d82[_0x2a08f0(0x158)](_0x3f76f2=>this[_0x2a08f0(0x13a)](_0x3f76f2));}async[a236_0x3d2d1c(0x180)](_0x180d29,_0x440417){const _0x47b2e3=a236_0x3d2d1c,_0x44a698=[];while(_0x180d29[_0x47b2e3(0x156)]){const _0x46abc1=queries_1[_0x47b2e3(0x146)]['replace'](_0x47b2e3(0x15f),_0x180d29[_0x47b2e3(0x14d)](0x0,this[_0x47b2e3(0x164)])['map'](_0x50eed7=>'\x27'+_0x50eed7+'\x27')[_0x47b2e3(0x13f)](','))['replace'](_0x47b2e3(0x143),_0x440417),_0x39f2e3=await this['queryService'][_0x47b2e3(0x15b)](_0x46abc1);_0x44a698[_0x47b2e3(0x170)](..._0x39f2e3);}return _0x44a698[_0x47b2e3(0x158)](_0x146f30=>this[_0x47b2e3(0x13a)](_0x146f30));}async[a236_0x3d2d1c(0x137)](_0xd587b3){const _0x1db1ce=a236_0x3d2d1c,_0x194f48=queries_1[_0x1db1ce(0x186)][_0x1db1ce(0x183)]('%repositoryId%',_0xd587b3),_0x47fb63=await this[_0x1db1ce(0x155)][_0x1db1ce(0x15b)](_0x194f48);return _0x47fb63[_0x1db1ce(0x158)](_0x1e866e=>this['extractComponentMetadataFromRecord'](_0x1e866e));}async[a236_0x3d2d1c(0x17f)](_0x593340){const _0xec22d6=a236_0x3d2d1c,_0x57d2a2=queries_1[_0xec22d6(0x172)][_0xec22d6(0x183)]('%branchId%',_0x593340),_0x4f27c7=await this[_0xec22d6(0x155)][_0xec22d6(0x15b)](_0x57d2a2);return _0x4f27c7['map'](_0x136060=>this[_0xec22d6(0x13a)](_0x136060));}async[a236_0x3d2d1c(0x171)](_0xaa9901){const _0x318c81=a236_0x3d2d1c,_0x5b0127=[..._0xaa9901],_0x4b39d8=[];while(_0x5b0127[_0x318c81(0x156)]){const _0x291ce7=queries_1[_0x318c81(0x15d)][_0x318c81(0x183)](_0x318c81(0x160),_0x5b0127[_0x318c81(0x14d)](0x0,this[_0x318c81(0x164)])[_0x318c81(0x158)](_0x10bd2a=>'\x27'+_0x10bd2a+'\x27')[_0x318c81(0x13f)](',')),_0x2b1b76=await this['queryService']['query'](_0x291ce7);_0x4b39d8[_0x318c81(0x170)](..._0x2b1b76[_0x318c81(0x158)](_0x4aadd3=>_0x4aadd3['Id']));}return _0x4b39d8;}async[a236_0x3d2d1c(0x150)](_0x5bd4ac,_0x104ca1){const _0x4c9169=a236_0x3d2d1c;return this['restService'][_0x4c9169(0x13d)](constants_1[_0x4c9169(0x14a)],{[constants_1[_0x4c9169(0x14f)]+_0x4c9169(0x157)]:_0x104ca1,[constants_1[_0x4c9169(0x14f)]+_0x4c9169(0x152)]:_0x5bd4ac['substr'](0x0,0xff),[constants_1[_0x4c9169(0x14f)]+_0x4c9169(0x154)]:_0x4c9169(0x174),[constants_1[_0x4c9169(0x166)]+_0x4c9169(0x17a)]:!![]});}};function a236_0x3889(){const _0x4bd3ee=['Status__c','queryService','length','Repository__c','map','getRepositoryIdByName','511884QibObP','query','Name','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','getOwnPropertyDescriptor','%fileNames%','%componentIds%','../queries','extractFieldsFromRecord','CRC32__c','MAX_QUERY_ARRAY_ITEMS','Component_Name__c','FLOSUM_GIT_NAMESPACE','object','apply','SalesforceGitSyncService','631953uDXKlt','getBranchIdByName','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','72aCloMJ','Service','%name%','push','fetchCommitManifestsByComponentIds','GET_BRANCH_COMPONENTS_QUERY','defineProperty','Completed','toString','SalesforceRestService','getComponentRecordTypes','55TlxFnM','GET_REPOSITORY_BY_NAME_QUERY','Is_From_Agent__c','1430268HKmVsM','typedi','1723280pqaqgT','../utils/flosum-naming.utils','fetchBranchComponents','fetchBranchComponentsByFilenames','116aaJDcH','18934lDtWHv','replace','restService','__metadata','GET_REPOSITORY_COMPONENTS_QUERY','__esModule','metadata','Component_Type__c','fetchRepositoryComponents','./salesforce-query.service','File_Name__c','extractComponentMetadataFromRecord','__decorate','function','post','11405UIirVI','join','%repositoryId%','\x22\x20not\x20found\x20in\x20flosum.','38568MFgKhm','%branchId%','7SCipin','NotFoundError','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','./salesforce-rest.service','../../../../core/errors/not-found.error','Version__c','FLOSUM_COMMIT','../../../../constants','Branch\x20\x22','splice','search','FLOSUM_NAMESPACE','createCommit','(((.+)+)+)+$','Commit_Name__c','22unSsiW'];a236_0x3889=function(){return _0x4bd3ee;};return a236_0x3889();}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x3d2d1c(0x16e)])(),__metadata('design:paramtypes',[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a236_0x3d2d1c(0x176)]])],SalesforceGitSyncService),exports[a236_0x3d2d1c(0x169)]=SalesforceGitSyncService;