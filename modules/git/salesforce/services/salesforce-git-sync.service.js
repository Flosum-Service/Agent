const a247_0x5ba81f=a247_0x2446;(function(_0x2e62c4,_0x5baf){const _0x55e4b5=a247_0x2446,_0x470b82=_0x2e62c4();while(!![]){try{const _0x3f9726=-parseInt(_0x55e4b5(0x1d6))/0x1*(-parseInt(_0x55e4b5(0x1a3))/0x2)+parseInt(_0x55e4b5(0x1dd))/0x3+parseInt(_0x55e4b5(0x1ab))/0x4+parseInt(_0x55e4b5(0x1a9))/0x5+-parseInt(_0x55e4b5(0x1d4))/0x6*(-parseInt(_0x55e4b5(0x1bc))/0x7)+parseInt(_0x55e4b5(0x1b1))/0x8*(-parseInt(_0x55e4b5(0x1b8))/0x9)+parseInt(_0x55e4b5(0x1c4))/0xa*(-parseInt(_0x55e4b5(0x197))/0xb);if(_0x3f9726===_0x5baf)break;else _0x470b82['push'](_0x470b82['shift']());}catch(_0x364253){_0x470b82['push'](_0x470b82['shift']());}}}(a247_0x368a,0x8e969));const a247_0x340398=(function(){let _0x28bea4=!![];return function(_0x41c181,_0x31387c){const _0x19359b=_0x28bea4?function(){const _0x396a6b=a247_0x2446;if(_0x31387c){const _0x14c086=_0x31387c[_0x396a6b(0x1d1)](_0x41c181,arguments);return _0x31387c=null,_0x14c086;}}:function(){};return _0x28bea4=![],_0x19359b;};}()),a247_0x4fa239=a247_0x340398(this,function(){const _0x18e486=a247_0x2446;return a247_0x4fa239[_0x18e486(0x1a1)]()[_0x18e486(0x1af)]('(((.+)+)+)+$')['toString']()[_0x18e486(0x1b0)](a247_0x4fa239)['search']('(((.+)+)+)+$');});a247_0x4fa239();'use strict';var __decorate=this&&this[a247_0x5ba81f(0x1a5)]||function(_0x2b5a86,_0x3132c9,_0x52496c,_0xc8ee80){const _0x1e6f06=a247_0x5ba81f;var _0x25e124=arguments[_0x1e6f06(0x1b3)],_0x305fdf=_0x25e124<0x3?_0x3132c9:_0xc8ee80===null?_0xc8ee80=Object[_0x1e6f06(0x1b7)](_0x3132c9,_0x52496c):_0xc8ee80,_0x218563;if(typeof Reflect==='object'&&typeof Reflect[_0x1e6f06(0x1d7)]==='function')_0x305fdf=Reflect[_0x1e6f06(0x1d7)](_0x2b5a86,_0x3132c9,_0x52496c,_0xc8ee80);else{for(var _0x2d7952=_0x2b5a86[_0x1e6f06(0x1b3)]-0x1;_0x2d7952>=0x0;_0x2d7952--)if(_0x218563=_0x2b5a86[_0x2d7952])_0x305fdf=(_0x25e124<0x3?_0x218563(_0x305fdf):_0x25e124>0x3?_0x218563(_0x3132c9,_0x52496c,_0x305fdf):_0x218563(_0x3132c9,_0x52496c))||_0x305fdf;}return _0x25e124>0x3&&_0x305fdf&&Object[_0x1e6f06(0x195)](_0x3132c9,_0x52496c,_0x305fdf),_0x305fdf;},__metadata=this&&this[a247_0x5ba81f(0x1ba)]||function(_0x8957ac,_0x5a837f){const _0x2d7fe2=a247_0x5ba81f;if(typeof Reflect===_0x2d7fe2(0x1bb)&&typeof Reflect[_0x2d7fe2(0x196)]===_0x2d7fe2(0x1b2))return Reflect[_0x2d7fe2(0x196)](_0x8957ac,_0x5a837f);};function a247_0x2446(_0x1943a1,_0x4de615){const _0x1547bb=a247_0x368a();return a247_0x2446=function(_0x4fa239,_0x340398){_0x4fa239=_0x4fa239-0x191;let _0x368a51=_0x1547bb[_0x4fa239];return _0x368a51;},a247_0x2446(_0x1943a1,_0x4de615);}Object[a247_0x5ba81f(0x195)](exports,a247_0x5ba81f(0x1ce),{'value':!![]}),exports[a247_0x5ba81f(0x1a2)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a247_0x5ba81f(0x1c9)),constants_1=require(a247_0x5ba81f(0x1db)),queries_1=require(a247_0x5ba81f(0x1c8)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a247_0x5ba81f(0x192)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x2dd82f,_0xf0dbbb){const _0x3a5d44=a247_0x5ba81f;this[_0x3a5d44(0x1ca)]=_0x2dd82f,this[_0x3a5d44(0x1b4)]=_0xf0dbbb,this[_0x3a5d44(0x1d0)]=0xc8;}[a247_0x5ba81f(0x1c0)](_0x3db7d0){const _0x2b4c01=a247_0x5ba81f,_0x2ec639=(0x0,flosum_naming_utils_1[_0x2b4c01(0x1da)])(_0x3db7d0,[_0x2b4c01(0x1d9),'Component_Type__c','CRC32__c',_0x2b4c01(0x199),_0x2b4c01(0x1ae),'Id']);return{'id':_0x2ec639['Id'],'name':_0x2ec639[_0x2b4c01(0x1d9)],'type':_0x2ec639[_0x2b4c01(0x1bf)],'fileName':_0x2ec639[_0x2b4c01(0x199)],'crc32':_0x2ec639[_0x2b4c01(0x1bd)],'version':+_0x2ec639[_0x2b4c01(0x1ae)]};}async[a247_0x5ba81f(0x1ad)](_0x6796ad){const _0x58d5bd=a247_0x5ba81f,[_0x5b6481]=await this[_0x58d5bd(0x1ca)][_0x58d5bd(0x1cf)](queries_1[_0x58d5bd(0x1be)][_0x58d5bd(0x1b9)](_0x58d5bd(0x1dc),_0x6796ad));if(!_0x5b6481)throw new not_found_error_1['NotFoundError']('Repository\x20\x22'+_0x6796ad+'\x22\x20not\x20found\x20in\x20flosum.');return _0x5b6481['Id'];}async[a247_0x5ba81f(0x19a)](_0x26b4cf){const _0x334a85=a247_0x5ba81f,[_0x146ff2]=await this['queryService'][_0x334a85(0x1cf)](queries_1['GET_BRANCH_BY_NAME_QUERY']['replace'](_0x334a85(0x1dc),_0x26b4cf));if(!_0x146ff2)throw new not_found_error_1[(_0x334a85(0x1c1))](_0x334a85(0x1a4)+_0x26b4cf+'\x22\x20not\x20found\x20in\x20flosum.');return _0x146ff2['Id'];}async[a247_0x5ba81f(0x1cd)](){const _0x5f4a58=a247_0x5ba81f,_0x34fede=await this[_0x5f4a58(0x1ca)][_0x5f4a58(0x1cf)](queries_1[_0x5f4a58(0x1d5)]);return _0x34fede[_0x5f4a58(0x1aa)](_0xd9a8c=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0xd9a8c,['Id','Name']))['map'](_0x5e768f=>({'id':_0x5e768f['Id'],'name':_0x5e768f[_0x5f4a58(0x1c7)]}));}async[a247_0x5ba81f(0x1c6)](_0x146929,_0x437099){const _0x5b292e=a247_0x5ba81f,_0x13f397=[];while(_0x146929[_0x5b292e(0x1b3)]){const _0x113a15=queries_1[_0x5b292e(0x1a7)][_0x5b292e(0x1b9)](_0x5b292e(0x19c),_0x146929['splice'](0x0,this[_0x5b292e(0x1d0)])[_0x5b292e(0x1aa)](_0x291292=>'\x27'+_0x291292+'\x27')[_0x5b292e(0x19e)](','))[_0x5b292e(0x1b9)](_0x5b292e(0x1c5),_0x437099),_0x5649eb=await this[_0x5b292e(0x1ca)][_0x5b292e(0x1cf)](_0x113a15);_0x13f397[_0x5b292e(0x1d8)](..._0x5649eb);}return _0x13f397['map'](_0x11af18=>this[_0x5b292e(0x1c0)](_0x11af18));}async[a247_0x5ba81f(0x1cb)](_0x53d10e,_0x5d643e){const _0x4b9158=a247_0x5ba81f,_0x5e216c=[];while(_0x53d10e[_0x4b9158(0x1b3)]){const _0x5af174=queries_1[_0x4b9158(0x198)][_0x4b9158(0x1b9)]('%fileNames%',_0x53d10e[_0x4b9158(0x1b5)](0x0,this[_0x4b9158(0x1d0)])[_0x4b9158(0x1aa)](_0x3d26cd=>'\x27'+_0x3d26cd+'\x27')[_0x4b9158(0x19e)](','))['replace'](_0x4b9158(0x19f),_0x5d643e),_0xef4efe=await this[_0x4b9158(0x1ca)][_0x4b9158(0x1cf)](_0x5af174);_0x5e216c[_0x4b9158(0x1d8)](..._0xef4efe);}return _0x5e216c[_0x4b9158(0x1aa)](_0x16ded4=>this['extractComponentMetadataFromRecord'](_0x16ded4));}async[a247_0x5ba81f(0x1c3)](_0x1fc755){const _0x351d17=a247_0x5ba81f,_0x21a96d=queries_1[_0x351d17(0x1a8)][_0x351d17(0x1b9)]('%repositoryId%',_0x1fc755),_0x3ac4f7=await this[_0x351d17(0x1ca)]['query'](_0x21a96d);return _0x3ac4f7[_0x351d17(0x1aa)](_0x388ee5=>this['extractComponentMetadataFromRecord'](_0x388ee5));}async[a247_0x5ba81f(0x1a0)](_0x4b4669){const _0x2c63ca=a247_0x5ba81f,_0xef6610=queries_1[_0x2c63ca(0x194)][_0x2c63ca(0x1b9)](_0x2c63ca(0x19f),_0x4b4669),_0x47079f=await this[_0x2c63ca(0x1ca)][_0x2c63ca(0x1cf)](_0xef6610);return _0x47079f[_0x2c63ca(0x1aa)](_0x52a8c1=>this['extractComponentMetadataFromRecord'](_0x52a8c1));}async['fetchCommitManifestsByComponentIds'](_0x3e1e73){const _0x211de8=a247_0x5ba81f,_0x16a1c4=[..._0x3e1e73],_0x5471db=[];while(_0x16a1c4[_0x211de8(0x1b3)]){const _0x33eb84=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x211de8(0x1b9)](_0x211de8(0x193),_0x16a1c4[_0x211de8(0x1b5)](0x0,this[_0x211de8(0x1d0)])[_0x211de8(0x1aa)](_0x21f57b=>'\x27'+_0x21f57b+'\x27')[_0x211de8(0x19e)](',')),_0xf13b9f=await this['queryService'][_0x211de8(0x1cf)](_0x33eb84);_0x5471db[_0x211de8(0x1d8)](..._0xf13b9f[_0x211de8(0x1aa)](_0x16ee33=>_0x16ee33['Id']));}return _0x5471db;}async['createCommit'](_0x3c1de4,_0x49ca64){const _0x536c77=a247_0x5ba81f;return this[_0x536c77(0x1b4)][_0x536c77(0x1c2)](constants_1['FLOSUM_COMMIT'],{[constants_1['FLOSUM_NAMESPACE']+'Repository__c']:_0x49ca64,[constants_1[_0x536c77(0x19b)]+'Commit_Name__c']:_0x3c1de4[_0x536c77(0x1cc)](0x0,0xff),[constants_1[_0x536c77(0x19b)]+_0x536c77(0x1d3)]:_0x536c77(0x1d2),[constants_1[_0x536c77(0x1de)]+_0x536c77(0x19d)]:!![]});}};function a247_0x368a(){const _0xa7d458=['SalesforceGitSyncService','14bEiPHa','Branch\x20\x22','__decorate','Service','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','GET_REPOSITORY_COMPONENTS_QUERY','3994985BkfSuJ','map','1956312cQchuo','SalesforceQueryService','getRepositoryIdByName','Version__c','search','constructor','8hSGLhK','function','length','restService','splice','design:paramtypes','getOwnPropertyDescriptor','1196271qqdjcX','replace','__metadata','object','14YkJaPT','CRC32__c','GET_REPOSITORY_BY_NAME_QUERY','Component_Type__c','extractComponentMetadataFromRecord','NotFoundError','post','fetchRepositoryComponents','1480190TznGVS','%repositoryId%','fetchRepositoryComponentsByFilenames','Name','../queries','typedi','queryService','fetchBranchComponentsByFilenames','substr','getComponentRecordTypes','__esModule','query','MAX_QUERY_ARRAY_ITEMS','apply','Completed','Status__c','3185514QNgqkA','GET_COMPONENT_RECORD_TYPES_QUERY','86531LDJsyZ','decorate','push','Component_Name__c','extractFieldsFromRecord','../../../../constants','%name%','832959Wipqsu','FLOSUM_GIT_NAMESPACE','SalesforceRestService','./salesforce-query.service','%componentIds%','GET_BRANCH_COMPONENTS_QUERY','defineProperty','metadata','187cIhELD','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','File_Name__c','getBranchIdByName','FLOSUM_NAMESPACE','%fileNames%','Is_From_Agent__c','join','%branchId%','fetchBranchComponents','toString'];a247_0x368a=function(){return _0xa7d458;};return a247_0x368a();}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a247_0x5ba81f(0x1a6)])(),__metadata(a247_0x5ba81f(0x1b6),[salesforce_query_service_1[a247_0x5ba81f(0x1ac)],salesforce_rest_service_1[a247_0x5ba81f(0x191)]])],SalesforceGitSyncService),exports[a247_0x5ba81f(0x1a2)]=SalesforceGitSyncService;