const a262_0x22b596=a262_0x2abb;function a262_0x53f6(){const _0xc576c5=['object','map','File_Name__c','5379108PeFHWP','CRC32__c','GET_COMPONENT_RECORD_TYPES_QUERY','FLOSUM_COMMIT','\x22\x20not\x20found\x20in\x20flosum.','fetchRepositoryComponentsByFilenames','./salesforce-rest.service','extractFieldsFromRecord','GET_BRANCH_COMPONENTS_QUERY','fetchBranchComponents','Repository\x20\x22','defineProperty','./salesforce-query.service','4DdoqOX','function','Branch\x20\x22','substr','__metadata','%branchId%','59721NuyUIz','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','%name%','Is_From_Agent__c','query','GET_BRANCH_BY_NAME_QUERY','Name','MAX_QUERY_ARRAY_ITEMS','queryService','%fileNames%','createCommit','splice','getOwnPropertyDescriptor','Status__c','decorate','typedi','../../../../constants','%componentIds%','fetchRepositoryComponents','399590FJggBR','join','getComponentRecordTypes','257382qyhJWt','../../../../core/errors/not-found.error','replace','Component_Type__c','metadata','search','extractComponentMetadataFromRecord','SalesforceGitSyncService','restService','%repositoryId%','push','(((.+)+)+)+$','196RfaWwG','fetchBranchComponentsByFilenames','length','Version__c','apply','404461XwzpFQ','5100200HjyIad','NotFoundError','FLOSUM_NAMESPACE','Service','7ISrCAP','FLOSUM_GIT_NAMESPACE','getBranchIdByName','Component_Name__c','3911512ZFrEpy','toString','__decorate'];a262_0x53f6=function(){return _0xc576c5;};return a262_0x53f6();}(function(_0x1646fa,_0x24f33f){const _0xc93630=a262_0x2abb,_0x40a83d=_0x1646fa();while(!![]){try{const _0x4f0316=-parseInt(_0xc93630(0x1a6))/0x1*(parseInt(_0xc93630(0x1c2))/0x2)+parseInt(_0xc93630(0x1c8))/0x3*(parseInt(_0xc93630(0x1ea))/0x4)+-parseInt(_0xc93630(0x1a7))/0x5+parseInt(_0xc93630(0x1b5))/0x6+-parseInt(_0xc93630(0x1ab))/0x7*(-parseInt(_0xc93630(0x1af))/0x8)+-parseInt(_0xc93630(0x1de))/0x9+parseInt(_0xc93630(0x1db))/0xa;if(_0x4f0316===_0x24f33f)break;else _0x40a83d['push'](_0x40a83d['shift']());}catch(_0x2e5f80){_0x40a83d['push'](_0x40a83d['shift']());}}}(a262_0x53f6,0x84a43));const a262_0x2c07cd=(function(){let _0x334aa6=!![];return function(_0x512eb4,_0x41ace1){const _0x52c9c4=_0x334aa6?function(){const _0x448451=a262_0x2abb;if(_0x41ace1){const _0xc5ff2=_0x41ace1[_0x448451(0x1ee)](_0x512eb4,arguments);return _0x41ace1=null,_0xc5ff2;}}:function(){};return _0x334aa6=![],_0x52c9c4;};}()),a262_0x4fed94=a262_0x2c07cd(this,function(){const _0x2b2071=a262_0x2abb;return a262_0x4fed94[_0x2b2071(0x1b0)]()[_0x2b2071(0x1e3)](_0x2b2071(0x1e9))[_0x2b2071(0x1b0)]()['constructor'](a262_0x4fed94)[_0x2b2071(0x1e3)]('(((.+)+)+)+$');});a262_0x4fed94();'use strict';var __decorate=this&&this[a262_0x22b596(0x1b1)]||function(_0x5e8e3b,_0x12a6ca,_0x4059a,_0x6c6ffd){const _0x56fc96=a262_0x22b596;var _0x2fd2b6=arguments[_0x56fc96(0x1ec)],_0x2d20e5=_0x2fd2b6<0x3?_0x12a6ca:_0x6c6ffd===null?_0x6c6ffd=Object[_0x56fc96(0x1d4)](_0x12a6ca,_0x4059a):_0x6c6ffd,_0x4ede24;if(typeof Reflect===_0x56fc96(0x1b2)&&typeof Reflect[_0x56fc96(0x1d6)]===_0x56fc96(0x1c3))_0x2d20e5=Reflect[_0x56fc96(0x1d6)](_0x5e8e3b,_0x12a6ca,_0x4059a,_0x6c6ffd);else{for(var _0x2266b5=_0x5e8e3b[_0x56fc96(0x1ec)]-0x1;_0x2266b5>=0x0;_0x2266b5--)if(_0x4ede24=_0x5e8e3b[_0x2266b5])_0x2d20e5=(_0x2fd2b6<0x3?_0x4ede24(_0x2d20e5):_0x2fd2b6>0x3?_0x4ede24(_0x12a6ca,_0x4059a,_0x2d20e5):_0x4ede24(_0x12a6ca,_0x4059a))||_0x2d20e5;}return _0x2fd2b6>0x3&&_0x2d20e5&&Object[_0x56fc96(0x1c0)](_0x12a6ca,_0x4059a,_0x2d20e5),_0x2d20e5;},__metadata=this&&this[a262_0x22b596(0x1c6)]||function(_0x110b0e,_0x132cab){const _0x438713=a262_0x22b596;if(typeof Reflect===_0x438713(0x1b2)&&typeof Reflect[_0x438713(0x1e2)]==='function')return Reflect[_0x438713(0x1e2)](_0x110b0e,_0x132cab);};function a262_0x2abb(_0x1dd613,_0x2b8966){const _0x1fa950=a262_0x53f6();return a262_0x2abb=function(_0x4fed94,_0x2c07cd){_0x4fed94=_0x4fed94-0x1a6;let _0x53f677=_0x1fa950[_0x4fed94];return _0x53f677;},a262_0x2abb(_0x1dd613,_0x2b8966);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a262_0x22b596(0x1e5)]=void 0x0;const not_found_error_1=require(a262_0x22b596(0x1df)),typedi_1=require(a262_0x22b596(0x1d7)),constants_1=require(a262_0x22b596(0x1d8)),queries_1=require('../queries'),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a262_0x22b596(0x1c1)),salesforce_rest_service_1=require(a262_0x22b596(0x1bb));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x416a6b,_0x469b98){this['queryService']=_0x416a6b,this['restService']=_0x469b98,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a262_0x22b596(0x1e4)](_0x4383f4){const _0x57134e=a262_0x22b596,_0x52a5dd=(0x0,flosum_naming_utils_1[_0x57134e(0x1bc)])(_0x4383f4,[_0x57134e(0x1ae),_0x57134e(0x1e1),_0x57134e(0x1b6),_0x57134e(0x1b4),_0x57134e(0x1ed),'Id']);return{'id':_0x52a5dd['Id'],'name':_0x52a5dd['Component_Name__c'],'type':_0x52a5dd[_0x57134e(0x1e1)],'fileName':_0x52a5dd[_0x57134e(0x1b4)],'crc32':_0x52a5dd[_0x57134e(0x1b6)],'version':+_0x52a5dd[_0x57134e(0x1ed)]};}async['getRepositoryIdByName'](_0x5ef9ff){const _0x3551a0=a262_0x22b596,[_0x429044]=await this['queryService'][_0x3551a0(0x1cc)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x3551a0(0x1e0)](_0x3551a0(0x1ca),_0x5ef9ff));if(!_0x429044)throw new not_found_error_1[(_0x3551a0(0x1a8))](_0x3551a0(0x1bf)+_0x5ef9ff+'\x22\x20not\x20found\x20in\x20flosum.');return _0x429044['Id'];}async[a262_0x22b596(0x1ad)](_0x2bd7d6){const _0x22efe5=a262_0x22b596,[_0x5d4968]=await this['queryService']['query'](queries_1[_0x22efe5(0x1cd)][_0x22efe5(0x1e0)]('%name%',_0x2bd7d6));if(!_0x5d4968)throw new not_found_error_1['NotFoundError'](_0x22efe5(0x1c4)+_0x2bd7d6+_0x22efe5(0x1b9));return _0x5d4968['Id'];}async[a262_0x22b596(0x1dd)](){const _0x2e341b=a262_0x22b596,_0xba2496=await this['queryService']['query'](queries_1[_0x2e341b(0x1b7)]);return _0xba2496['map'](_0x2391de=>(0x0,flosum_naming_utils_1[_0x2e341b(0x1bc)])(_0x2391de,['Id',_0x2e341b(0x1ce)]))[_0x2e341b(0x1b3)](_0x46a9ed=>({'id':_0x46a9ed['Id'],'name':_0x46a9ed[_0x2e341b(0x1ce)]}));}async[a262_0x22b596(0x1ba)](_0x4f84c2,_0x5f50c0){const _0x5ce15f=a262_0x22b596,_0x450f08=[];while(_0x4f84c2['length']){const _0x5ab03b=queries_1[_0x5ce15f(0x1c9)][_0x5ce15f(0x1e0)](_0x5ce15f(0x1d1),_0x4f84c2[_0x5ce15f(0x1d3)](0x0,this[_0x5ce15f(0x1cf)])[_0x5ce15f(0x1b3)](_0x2fab6f=>'\x27'+_0x2fab6f+'\x27')[_0x5ce15f(0x1dc)](','))[_0x5ce15f(0x1e0)](_0x5ce15f(0x1e7),_0x5f50c0),_0x54f675=await this[_0x5ce15f(0x1d0)][_0x5ce15f(0x1cc)](_0x5ab03b);_0x450f08[_0x5ce15f(0x1e8)](..._0x54f675);}return _0x450f08['map'](_0x39a6e3=>this[_0x5ce15f(0x1e4)](_0x39a6e3));}async[a262_0x22b596(0x1eb)](_0x121791,_0x4590d3){const _0x31042a=a262_0x22b596,_0x302dbf=[];while(_0x121791[_0x31042a(0x1ec)]){const _0x591868=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY']['replace'](_0x31042a(0x1d1),_0x121791[_0x31042a(0x1d3)](0x0,this[_0x31042a(0x1cf)])[_0x31042a(0x1b3)](_0x396854=>'\x27'+_0x396854+'\x27')[_0x31042a(0x1dc)](','))[_0x31042a(0x1e0)](_0x31042a(0x1c7),_0x4590d3),_0x3c3840=await this['queryService'][_0x31042a(0x1cc)](_0x591868);_0x302dbf['push'](..._0x3c3840);}return _0x302dbf['map'](_0x4e7fd4=>this['extractComponentMetadataFromRecord'](_0x4e7fd4));}async[a262_0x22b596(0x1da)](_0x5bab95){const _0x199907=a262_0x22b596,_0x5df196=queries_1['GET_REPOSITORY_COMPONENTS_QUERY']['replace'](_0x199907(0x1e7),_0x5bab95),_0x3a6891=await this[_0x199907(0x1d0)][_0x199907(0x1cc)](_0x5df196);return _0x3a6891[_0x199907(0x1b3)](_0x46f749=>this[_0x199907(0x1e4)](_0x46f749));}async[a262_0x22b596(0x1be)](_0x2fbc72){const _0x23777c=a262_0x22b596,_0x44bacf=queries_1[_0x23777c(0x1bd)]['replace']('%branchId%',_0x2fbc72),_0x2cd53f=await this[_0x23777c(0x1d0)][_0x23777c(0x1cc)](_0x44bacf);return _0x2cd53f[_0x23777c(0x1b3)](_0x584483=>this[_0x23777c(0x1e4)](_0x584483));}async['fetchCommitManifestsByComponentIds'](_0xe0a78e){const _0x3a67c3=a262_0x22b596,_0x44004f=[..._0xe0a78e],_0x2b0e6f=[];while(_0x44004f[_0x3a67c3(0x1ec)]){const _0x104bc2=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x3a67c3(0x1e0)](_0x3a67c3(0x1d9),_0x44004f[_0x3a67c3(0x1d3)](0x0,this[_0x3a67c3(0x1cf)])[_0x3a67c3(0x1b3)](_0x533650=>'\x27'+_0x533650+'\x27')[_0x3a67c3(0x1dc)](',')),_0x14ee5d=await this[_0x3a67c3(0x1d0)][_0x3a67c3(0x1cc)](_0x104bc2);_0x2b0e6f[_0x3a67c3(0x1e8)](..._0x14ee5d[_0x3a67c3(0x1b3)](_0x573e48=>_0x573e48['Id']));}return _0x2b0e6f;}async[a262_0x22b596(0x1d2)](_0x425ea2,_0x4db9af){const _0x5cff60=a262_0x22b596;return this[_0x5cff60(0x1e6)]['post'](constants_1[_0x5cff60(0x1b8)],{[constants_1['FLOSUM_NAMESPACE']+'Repository__c']:_0x4db9af,[constants_1['FLOSUM_NAMESPACE']+'Commit_Name__c']:_0x425ea2[_0x5cff60(0x1c5)](0x0,0xff),[constants_1[_0x5cff60(0x1a9)]+_0x5cff60(0x1d5)]:'Completed',[constants_1[_0x5cff60(0x1ac)]+_0x5cff60(0x1cb)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a262_0x22b596(0x1aa)])(),__metadata('design:paramtypes',[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;