const a230_0x65b3f6=a230_0x2bfa;(function(_0x488c1c,_0xfa217d){const _0x5a834b=a230_0x2bfa,_0x2d8a34=_0x488c1c();while(!![]){try{const _0x5948d7=-parseInt(_0x5a834b(0xd0))/0x1*(parseInt(_0x5a834b(0xf6))/0x2)+-parseInt(_0x5a834b(0xe4))/0x3+-parseInt(_0x5a834b(0xea))/0x4*(-parseInt(_0x5a834b(0xce))/0x5)+-parseInt(_0x5a834b(0xfa))/0x6+-parseInt(_0x5a834b(0xc1))/0x7*(parseInt(_0x5a834b(0xd3))/0x8)+parseInt(_0x5a834b(0xd7))/0x9*(-parseInt(_0x5a834b(0xfb))/0xa)+parseInt(_0x5a834b(0xb9))/0xb*(parseInt(_0x5a834b(0xfe))/0xc);if(_0x5948d7===_0xfa217d)break;else _0x2d8a34['push'](_0x2d8a34['shift']());}catch(_0x18d81b){_0x2d8a34['push'](_0x2d8a34['shift']());}}}(a230_0x1c4a,0x72395));const a230_0x3a5142=(function(){let _0xd763c5=!![];return function(_0x4cb4e3,_0x51e47f){const _0x26f18a=_0xd763c5?function(){const _0x581175=a230_0x2bfa;if(_0x51e47f){const _0x336d2b=_0x51e47f[_0x581175(0xd1)](_0x4cb4e3,arguments);return _0x51e47f=null,_0x336d2b;}}:function(){};return _0xd763c5=![],_0x26f18a;};}()),a230_0x4bf49e=a230_0x3a5142(this,function(){const _0x117ac6=a230_0x2bfa;return a230_0x4bf49e[_0x117ac6(0xdc)]()[_0x117ac6(0xdd)](_0x117ac6(0xc8))[_0x117ac6(0xdc)]()[_0x117ac6(0xc4)](a230_0x4bf49e)[_0x117ac6(0xdd)](_0x117ac6(0xc8));});a230_0x4bf49e();function a230_0x2bfa(_0x4754ae,_0x139110){const _0x76a149=a230_0x1c4a();return a230_0x2bfa=function(_0x4bf49e,_0x3a5142){_0x4bf49e=_0x4bf49e-0xb9;let _0x1c4ad8=_0x76a149[_0x4bf49e];return _0x1c4ad8;},a230_0x2bfa(_0x4754ae,_0x139110);}'use strict';var __decorate=this&&this['__decorate']||function(_0x396f06,_0x5e7df4,_0x2ad786,_0x340076){const _0x2eb3e0=a230_0x2bfa;var _0x31a1f2=arguments[_0x2eb3e0(0xbb)],_0x34d7e1=_0x31a1f2<0x3?_0x5e7df4:_0x340076===null?_0x340076=Object[_0x2eb3e0(0xf2)](_0x5e7df4,_0x2ad786):_0x340076,_0x1e9284;if(typeof Reflect===_0x2eb3e0(0xee)&&typeof Reflect[_0x2eb3e0(0x107)]===_0x2eb3e0(0xe5))_0x34d7e1=Reflect[_0x2eb3e0(0x107)](_0x396f06,_0x5e7df4,_0x2ad786,_0x340076);else{for(var _0x4b402f=_0x396f06[_0x2eb3e0(0xbb)]-0x1;_0x4b402f>=0x0;_0x4b402f--)if(_0x1e9284=_0x396f06[_0x4b402f])_0x34d7e1=(_0x31a1f2<0x3?_0x1e9284(_0x34d7e1):_0x31a1f2>0x3?_0x1e9284(_0x5e7df4,_0x2ad786,_0x34d7e1):_0x1e9284(_0x5e7df4,_0x2ad786))||_0x34d7e1;}return _0x31a1f2>0x3&&_0x34d7e1&&Object[_0x2eb3e0(0xe9)](_0x5e7df4,_0x2ad786,_0x34d7e1),_0x34d7e1;},__metadata=this&&this[a230_0x65b3f6(0x102)]||function(_0x23d4a0,_0x4178a0){const _0x2414d9=a230_0x65b3f6;if(typeof Reflect===_0x2414d9(0xee)&&typeof Reflect['metadata']===_0x2414d9(0xe5))return Reflect[_0x2414d9(0xdb)](_0x23d4a0,_0x4178a0);};Object[a230_0x65b3f6(0xe9)](exports,a230_0x65b3f6(0xc6),{'value':!![]}),exports[a230_0x65b3f6(0xed)]=void 0x0;const not_found_error_1=require(a230_0x65b3f6(0xcf)),typedi_1=require('typedi'),constants_1=require(a230_0x65b3f6(0xc5)),queries_1=require('../queries'),flosum_naming_utils_1=require(a230_0x65b3f6(0xbe)),salesforce_query_service_1=require(a230_0x65b3f6(0x10b)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x121045,_0x5dc298){const _0x3784a6=a230_0x65b3f6;this['queryService']=_0x121045,this[_0x3784a6(0xfc)]=_0x5dc298,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}['extractComponentMetadataFromRecord'](_0x3ef5da){const _0x3aba84=a230_0x65b3f6,_0x4fd59a=(0x0,flosum_naming_utils_1[_0x3aba84(0xc3)])(_0x3ef5da,['Component_Name__c',_0x3aba84(0xdf),_0x3aba84(0xbf),_0x3aba84(0xf5),_0x3aba84(0xc9),'Id']);return{'id':_0x4fd59a['Id'],'name':_0x4fd59a['Component_Name__c'],'type':_0x4fd59a[_0x3aba84(0xdf)],'fileName':_0x4fd59a['File_Name__c'],'crc32':_0x4fd59a['CRC32__c'],'version':+_0x4fd59a['Version__c']};}async[a230_0x65b3f6(0xc0)](_0x1d0e9e){const _0xc8eef4=a230_0x65b3f6,[_0x347fc0]=await this[_0xc8eef4(0xf9)]['query'](queries_1[_0xc8eef4(0x106)][_0xc8eef4(0xf7)](_0xc8eef4(0xc2),_0x1d0e9e));if(!_0x347fc0)throw new not_found_error_1[(_0xc8eef4(0xe7))](_0xc8eef4(0xca)+_0x1d0e9e+_0xc8eef4(0xe3));return _0x347fc0['Id'];}async['getBranchIdByName'](_0x170e14){const _0x2dc193=a230_0x65b3f6,[_0x51170a]=await this['queryService'][_0x2dc193(0xda)](queries_1[_0x2dc193(0xde)][_0x2dc193(0xf7)](_0x2dc193(0xc2),_0x170e14));if(!_0x51170a)throw new not_found_error_1[(_0x2dc193(0xe7))](_0x2dc193(0xcd)+_0x170e14+_0x2dc193(0xe3));return _0x51170a['Id'];}async[a230_0x65b3f6(0xf0)](){const _0x39af92=a230_0x65b3f6,_0xbd299b=await this[_0x39af92(0xf9)][_0x39af92(0xda)](queries_1[_0x39af92(0xe8)]);return _0xbd299b['map'](_0x2fe7b9=>(0x0,flosum_naming_utils_1[_0x39af92(0xc3)])(_0x2fe7b9,['Id',_0x39af92(0x108)]))['map'](_0x3e21f9=>({'id':_0x3e21f9['Id'],'name':_0x3e21f9[_0x39af92(0x108)]}));}async['fetchRepositoryComponentsByFilenames'](_0x584467,_0x382018){const _0x7976b7=a230_0x65b3f6,_0x4a1944=[];while(_0x584467[_0x7976b7(0xbb)]){const _0x4739d8=queries_1[_0x7976b7(0xe2)]['replace'](_0x7976b7(0xcb),_0x584467['splice'](0x0,this[_0x7976b7(0xd8)])['map'](_0x58ae19=>'\x27'+_0x58ae19+'\x27')['join'](','))['replace'](_0x7976b7(0xfd),_0x382018),_0x1b3414=await this['queryService'][_0x7976b7(0xda)](_0x4739d8);_0x4a1944[_0x7976b7(0xc7)](..._0x1b3414);}return _0x4a1944[_0x7976b7(0xd9)](_0x406552=>this[_0x7976b7(0x109)](_0x406552));}async[a230_0x65b3f6(0xd6)](_0x1bc62b,_0xd969fe){const _0x56737d=a230_0x65b3f6,_0x241e16=[];while(_0x1bc62b[_0x56737d(0xbb)]){const _0x436463=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY']['replace']('%fileNames%',_0x1bc62b[_0x56737d(0xe1)](0x0,this[_0x56737d(0xd8)])[_0x56737d(0xd9)](_0x318ac6=>'\x27'+_0x318ac6+'\x27')[_0x56737d(0xd2)](','))[_0x56737d(0xf7)](_0x56737d(0x100),_0xd969fe),_0x1e5a89=await this[_0x56737d(0xf9)]['query'](_0x436463);_0x241e16[_0x56737d(0xc7)](..._0x1e5a89);}return _0x241e16['map'](_0x117c87=>this[_0x56737d(0x109)](_0x117c87));}async['fetchRepositoryComponents'](_0x1d3aa3){const _0x896dc4=a230_0x65b3f6,_0xf37667=queries_1[_0x896dc4(0xe6)][_0x896dc4(0xf7)](_0x896dc4(0xfd),_0x1d3aa3),_0x463c0f=await this['queryService']['query'](_0xf37667);return _0x463c0f[_0x896dc4(0xd9)](_0x4a0d88=>this[_0x896dc4(0x109)](_0x4a0d88));}async[a230_0x65b3f6(0xe0)](_0x1d3183){const _0xa55895=a230_0x65b3f6,_0x340b56=queries_1[_0xa55895(0xba)][_0xa55895(0xf7)](_0xa55895(0x100),_0x1d3183),_0x2d2c88=await this[_0xa55895(0xf9)]['query'](_0x340b56);return _0x2d2c88[_0xa55895(0xd9)](_0x549b6d=>this['extractComponentMetadataFromRecord'](_0x549b6d));}async[a230_0x65b3f6(0xff)](_0x4dffdf){const _0x56a1c8=a230_0x65b3f6,_0x214e7d=[..._0x4dffdf],_0x16799b=[];while(_0x214e7d[_0x56a1c8(0xbb)]){const _0x4f3d5c=queries_1[_0x56a1c8(0x103)][_0x56a1c8(0xf7)](_0x56a1c8(0x104),_0x214e7d[_0x56a1c8(0xe1)](0x0,this[_0x56a1c8(0xd8)])[_0x56a1c8(0xd9)](_0xcfa2b1=>'\x27'+_0xcfa2b1+'\x27')[_0x56a1c8(0xd2)](',')),_0x40d951=await this[_0x56a1c8(0xf9)][_0x56a1c8(0xda)](_0x4f3d5c);_0x16799b[_0x56a1c8(0xc7)](..._0x40d951[_0x56a1c8(0xd9)](_0x40f516=>_0x40f516['Id']));}return _0x16799b;}async[a230_0x65b3f6(0x101)](_0x58cbab,_0x2987b2){const _0x4a7ce6=a230_0x65b3f6;return this[_0x4a7ce6(0xfc)][_0x4a7ce6(0xf1)](constants_1[_0x4a7ce6(0xf4)],{[constants_1[_0x4a7ce6(0xd4)]+_0x4a7ce6(0x10a)]:_0x2987b2,[constants_1[_0x4a7ce6(0xd4)]+_0x4a7ce6(0xd5)]:_0x58cbab[_0x4a7ce6(0xf8)](0x0,0xff),[constants_1[_0x4a7ce6(0xd4)]+_0x4a7ce6(0xec)]:_0x4a7ce6(0xbd),[constants_1[_0x4a7ce6(0x105)]+_0x4a7ce6(0xcc)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a230_0x65b3f6(0xf3)])(),__metadata(a230_0x65b3f6(0xbc),[salesforce_query_service_1[a230_0x65b3f6(0xeb)],salesforce_rest_service_1[a230_0x65b3f6(0xef)]])],SalesforceGitSyncService),exports[a230_0x65b3f6(0xed)]=SalesforceGitSyncService;function a230_0x1c4a(){const _0x317dd7=['File_Name__c','5214gkbLbj','replace','substr','queryService','549960Nfnzrx','6830EzkDuW','restService','%repositoryId%','2412nxTRoa','fetchCommitManifestsByComponentIds','%branchId%','createCommit','__metadata','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','%componentIds%','FLOSUM_GIT_NAMESPACE','GET_REPOSITORY_BY_NAME_QUERY','decorate','Name','extractComponentMetadataFromRecord','Repository__c','./salesforce-query.service','153450mkvMNh','GET_BRANCH_COMPONENTS_QUERY','length','design:paramtypes','Completed','../utils/flosum-naming.utils','CRC32__c','getRepositoryIdByName','28JxSITR','%name%','extractFieldsFromRecord','constructor','../../../../constants','__esModule','push','(((.+)+)+)+$','Version__c','Repository\x20\x22','%fileNames%','Is_From_Agent__c','Branch\x20\x22','202485hDdByE','../../../../core/errors/not-found.error','258dGlLgc','apply','join','470608xsYqXa','FLOSUM_NAMESPACE','Commit_Name__c','fetchBranchComponentsByFilenames','10827LgKhsm','MAX_QUERY_ARRAY_ITEMS','map','query','metadata','toString','search','GET_BRANCH_BY_NAME_QUERY','Component_Type__c','fetchBranchComponents','splice','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','\x22\x20not\x20found\x20in\x20flosum.','2638029kWNaoH','function','GET_REPOSITORY_COMPONENTS_QUERY','NotFoundError','GET_COMPONENT_RECORD_TYPES_QUERY','defineProperty','36SUUrye','SalesforceQueryService','Status__c','SalesforceGitSyncService','object','SalesforceRestService','getComponentRecordTypes','post','getOwnPropertyDescriptor','Service','FLOSUM_COMMIT'];a230_0x1c4a=function(){return _0x317dd7;};return a230_0x1c4a();}