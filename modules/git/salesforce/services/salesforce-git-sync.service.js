const a197_0x41c4c4=a197_0x2b4e;(function(_0x4f42f3,_0xaecdd6){const _0x49ec82=a197_0x2b4e,_0x3e4415=_0x4f42f3();while(!![]){try{const _0xc069b=parseInt(_0x49ec82(0xdb))/0x1*(-parseInt(_0x49ec82(0xd2))/0x2)+parseInt(_0x49ec82(0xb3))/0x3+-parseInt(_0x49ec82(0xc9))/0x4+parseInt(_0x49ec82(0xd1))/0x5*(parseInt(_0x49ec82(0xa7))/0x6)+parseInt(_0x49ec82(0x9b))/0x7*(-parseInt(_0x49ec82(0xcb))/0x8)+parseInt(_0x49ec82(0xc3))/0x9+parseInt(_0x49ec82(0xde))/0xa*(parseInt(_0x49ec82(0xc8))/0xb);if(_0xc069b===_0xaecdd6)break;else _0x3e4415['push'](_0x3e4415['shift']());}catch(_0x215170){_0x3e4415['push'](_0x3e4415['shift']());}}}(a197_0x467d,0xe2025));const a197_0x4076a2=(function(){let _0x3a1f7d=!![];return function(_0x2bc31a,_0x493e9d){const _0x18d1c3=_0x3a1f7d?function(){if(_0x493e9d){const _0x23a449=_0x493e9d['apply'](_0x2bc31a,arguments);return _0x493e9d=null,_0x23a449;}}:function(){};return _0x3a1f7d=![],_0x18d1c3;};}()),a197_0x2f021c=a197_0x4076a2(this,function(){const _0x37f54e=a197_0x2b4e;return a197_0x2f021c[_0x37f54e(0xb6)]()[_0x37f54e(0xad)]('(((.+)+)+)+$')[_0x37f54e(0xb6)]()[_0x37f54e(0xd5)](a197_0x2f021c)[_0x37f54e(0xad)](_0x37f54e(0xdf));});a197_0x2f021c();'use strict';function a197_0x2b4e(_0x3fb7f2,_0x2a4565){const _0x2ad5f8=a197_0x467d();return a197_0x2b4e=function(_0x2f021c,_0x4076a2){_0x2f021c=_0x2f021c-0x94;let _0x467d11=_0x2ad5f8[_0x2f021c];return _0x467d11;},a197_0x2b4e(_0x3fb7f2,_0x2a4565);}var __decorate=this&&this[a197_0x41c4c4(0xb7)]||function(_0x268a90,_0x231aea,_0x257bf2,_0x33828f){const _0x8ff715=a197_0x41c4c4;var _0x1208e7=arguments[_0x8ff715(0xda)],_0x16df38=_0x1208e7<0x3?_0x231aea:_0x33828f===null?_0x33828f=Object[_0x8ff715(0xe0)](_0x231aea,_0x257bf2):_0x33828f,_0x492ec5;if(typeof Reflect===_0x8ff715(0xa1)&&typeof Reflect[_0x8ff715(0xae)]===_0x8ff715(0x9c))_0x16df38=Reflect[_0x8ff715(0xae)](_0x268a90,_0x231aea,_0x257bf2,_0x33828f);else{for(var _0x35549c=_0x268a90[_0x8ff715(0xda)]-0x1;_0x35549c>=0x0;_0x35549c--)if(_0x492ec5=_0x268a90[_0x35549c])_0x16df38=(_0x1208e7<0x3?_0x492ec5(_0x16df38):_0x1208e7>0x3?_0x492ec5(_0x231aea,_0x257bf2,_0x16df38):_0x492ec5(_0x231aea,_0x257bf2))||_0x16df38;}return _0x1208e7>0x3&&_0x16df38&&Object[_0x8ff715(0xbc)](_0x231aea,_0x257bf2,_0x16df38),_0x16df38;},__metadata=this&&this[a197_0x41c4c4(0xd7)]||function(_0x3d43fd,_0x3a144b){const _0x2ee882=a197_0x41c4c4;if(typeof Reflect===_0x2ee882(0xa1)&&typeof Reflect['metadata']==='function')return Reflect[_0x2ee882(0xd8)](_0x3d43fd,_0x3a144b);};Object[a197_0x41c4c4(0xbc)](exports,a197_0x41c4c4(0xd6),{'value':!![]}),exports[a197_0x41c4c4(0xa0)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a197_0x41c4c4(0xc5)),constants_1=require(a197_0x41c4c4(0x9d)),queries_1=require(a197_0x41c4c4(0xc4)),flosum_naming_utils_1=require(a197_0x41c4c4(0x9e)),salesforce_query_service_1=require(a197_0x41c4c4(0xdc)),salesforce_rest_service_1=require(a197_0x41c4c4(0xe2));function a197_0x467d(){const _0x59a424=['%branchId%','NotFoundError','defineProperty','GET_BRANCH_COMPONENTS_QUERY','getComponentRecordTypes','extractComponentMetadataFromRecord','fetchBranchComponentsByFilenames','File_Name__c','Is_From_Agent__c','7142958QceIiy','../queries','typedi','design:paramtypes','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','11POJjCq','6731688AUPXvI','Branch\x20\x22','192PcMvgl','Repository\x20\x22','MAX_QUERY_ARRAY_ITEMS','GET_REPOSITORY_COMPONENTS_QUERY','createCommit','%fileNames%','5PNIeef','204058yVbivb','%name%','push','constructor','__esModule','__metadata','metadata','Version__c','length','5WDvgWn','./salesforce-query.service','fetchBranchComponents','12198650sVEszv','(((.+)+)+)+$','getOwnPropertyDescriptor','fetchRepositoryComponentsByFilenames','./salesforce-rest.service','query','post','FLOSUM_COMMIT','Name','CRC32__c','Status__c','extractFieldsFromRecord','restService','338597WzTuAe','function','../../../../constants','../utils/flosum-naming.utils','getBranchIdByName','SalesforceGitSyncService','object','queryService','fetchCommitManifestsByComponentIds','SalesforceRestService','Service','Component_Name__c','7651158XlFlGY','Completed','FLOSUM_NAMESPACE','Commit_Name__c','GET_COMPONENT_RECORD_TYPES_QUERY','splice','search','decorate','GET_BRANCH_BY_NAME_QUERY','GET_REPOSITORY_BY_NAME_QUERY','replace','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','2972952wmaOdN','map','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','toString','__decorate','join','FLOSUM_GIT_NAMESPACE'];a197_0x467d=function(){return _0x59a424;};return a197_0x467d();}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x39ed51,_0x574b9c){const _0xce9592=a197_0x41c4c4;this['queryService']=_0x39ed51,this[_0xce9592(0x9a)]=_0x574b9c,this[_0xce9592(0xcd)]=0xc8;}[a197_0x41c4c4(0xbf)](_0x8dc4b0){const _0x3c13b9=a197_0x41c4c4,_0x486d4c=(0x0,flosum_naming_utils_1[_0x3c13b9(0x99)])(_0x8dc4b0,[_0x3c13b9(0xa6),'Component_Type__c',_0x3c13b9(0x97),_0x3c13b9(0xc1),_0x3c13b9(0xd9),'Id']);return{'id':_0x486d4c['Id'],'name':_0x486d4c['Component_Name__c'],'type':_0x486d4c['Component_Type__c'],'fileName':_0x486d4c[_0x3c13b9(0xc1)],'crc32':_0x486d4c['CRC32__c'],'version':+_0x486d4c[_0x3c13b9(0xd9)]};}async['getRepositoryIdByName'](_0x4ca902){const _0x25c1f6=a197_0x41c4c4,[_0x409391]=await this[_0x25c1f6(0xa2)]['query'](queries_1[_0x25c1f6(0xb0)][_0x25c1f6(0xb1)](_0x25c1f6(0xd3),_0x4ca902));if(!_0x409391)throw new not_found_error_1[(_0x25c1f6(0xbb))](_0x25c1f6(0xcc)+_0x4ca902+'\x22\x20not\x20found\x20in\x20flosum.');return _0x409391['Id'];}async[a197_0x41c4c4(0x9f)](_0x4e2154){const _0x3acab8=a197_0x41c4c4,[_0x5b2cf5]=await this[_0x3acab8(0xa2)][_0x3acab8(0xe3)](queries_1[_0x3acab8(0xaf)]['replace'](_0x3acab8(0xd3),_0x4e2154));if(!_0x5b2cf5)throw new not_found_error_1[(_0x3acab8(0xbb))](_0x3acab8(0xca)+_0x4e2154+'\x22\x20not\x20found\x20in\x20flosum.');return _0x5b2cf5['Id'];}async[a197_0x41c4c4(0xbe)](){const _0x3fc4c2=a197_0x41c4c4,_0x2cd525=await this[_0x3fc4c2(0xa2)][_0x3fc4c2(0xe3)](queries_1[_0x3fc4c2(0xab)]);return _0x2cd525[_0x3fc4c2(0xb4)](_0x11caf5=>(0x0,flosum_naming_utils_1[_0x3fc4c2(0x99)])(_0x11caf5,['Id',_0x3fc4c2(0x96)]))[_0x3fc4c2(0xb4)](_0x1a62bd=>({'id':_0x1a62bd['Id'],'name':_0x1a62bd[_0x3fc4c2(0x96)]}));}async[a197_0x41c4c4(0xe1)](_0x4ba4c9,_0x5881da){const _0x1106bb=a197_0x41c4c4,_0x1472fe=[];while(_0x4ba4c9[_0x1106bb(0xda)]){const _0xaab57b=queries_1[_0x1106bb(0xc7)][_0x1106bb(0xb1)](_0x1106bb(0xd0),_0x4ba4c9[_0x1106bb(0xac)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x1106bb(0xb4)](_0x4b2048=>'\x27'+_0x4b2048+'\x27')[_0x1106bb(0xb8)](','))['replace']('%repositoryId%',_0x5881da),_0x2a63fa=await this[_0x1106bb(0xa2)][_0x1106bb(0xe3)](_0xaab57b);_0x1472fe['push'](..._0x2a63fa);}return _0x1472fe['map'](_0x1de877=>this[_0x1106bb(0xbf)](_0x1de877));}async[a197_0x41c4c4(0xc0)](_0xc7e986,_0x203da8){const _0xbbbe25=a197_0x41c4c4,_0x3dca5d=[];while(_0xc7e986[_0xbbbe25(0xda)]){const _0x19b61c=queries_1[_0xbbbe25(0xb2)][_0xbbbe25(0xb1)](_0xbbbe25(0xd0),_0xc7e986[_0xbbbe25(0xac)](0x0,this[_0xbbbe25(0xcd)])[_0xbbbe25(0xb4)](_0x2789dd=>'\x27'+_0x2789dd+'\x27')[_0xbbbe25(0xb8)](','))[_0xbbbe25(0xb1)](_0xbbbe25(0xba),_0x203da8),_0x48f417=await this[_0xbbbe25(0xa2)][_0xbbbe25(0xe3)](_0x19b61c);_0x3dca5d[_0xbbbe25(0xd4)](..._0x48f417);}return _0x3dca5d[_0xbbbe25(0xb4)](_0x3a6efe=>this[_0xbbbe25(0xbf)](_0x3a6efe));}async['fetchRepositoryComponents'](_0x4c83ca){const _0x25eeeb=a197_0x41c4c4,_0x37f456=queries_1[_0x25eeeb(0xce)][_0x25eeeb(0xb1)]('%repositoryId%',_0x4c83ca),_0x203440=await this[_0x25eeeb(0xa2)][_0x25eeeb(0xe3)](_0x37f456);return _0x203440[_0x25eeeb(0xb4)](_0x29b2c5=>this[_0x25eeeb(0xbf)](_0x29b2c5));}async[a197_0x41c4c4(0xdd)](_0x1e7c10){const _0x57554d=a197_0x41c4c4,_0x4625b9=queries_1[_0x57554d(0xbd)][_0x57554d(0xb1)]('%branchId%',_0x1e7c10),_0x267e4d=await this[_0x57554d(0xa2)][_0x57554d(0xe3)](_0x4625b9);return _0x267e4d[_0x57554d(0xb4)](_0x288cb8=>this[_0x57554d(0xbf)](_0x288cb8));}async[a197_0x41c4c4(0xa3)](_0x26ebd8){const _0x1b76c1=a197_0x41c4c4,_0x3d60a1=[..._0x26ebd8],_0x23e6b2=[];while(_0x3d60a1[_0x1b76c1(0xda)]){const _0x580f2f=queries_1[_0x1b76c1(0xb5)][_0x1b76c1(0xb1)]('%componentIds%',_0x3d60a1[_0x1b76c1(0xac)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x1b76c1(0xb4)](_0x1bc90d=>'\x27'+_0x1bc90d+'\x27')[_0x1b76c1(0xb8)](',')),_0x248f81=await this[_0x1b76c1(0xa2)]['query'](_0x580f2f);_0x23e6b2[_0x1b76c1(0xd4)](..._0x248f81[_0x1b76c1(0xb4)](_0x30fd79=>_0x30fd79['Id']));}return _0x23e6b2;}async[a197_0x41c4c4(0xcf)](_0x31f929,_0x10d4b5){const _0xf9dc68=a197_0x41c4c4;return this[_0xf9dc68(0x9a)][_0xf9dc68(0x94)](constants_1[_0xf9dc68(0x95)],{[constants_1[_0xf9dc68(0xa9)]+'Repository__c']:_0x10d4b5,[constants_1[_0xf9dc68(0xa9)]+_0xf9dc68(0xaa)]:_0x31f929['substr'](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0xf9dc68(0x98)]:_0xf9dc68(0xa8),[constants_1[_0xf9dc68(0xb9)]+_0xf9dc68(0xc2)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a197_0x41c4c4(0xa5)])(),__metadata(a197_0x41c4c4(0xc6),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a197_0x41c4c4(0xa4)]])],SalesforceGitSyncService),exports[a197_0x41c4c4(0xa0)]=SalesforceGitSyncService;