const a197_0x132534=a197_0xc1d0;(function(_0x16421f,_0x38da41){const _0x2f3335=a197_0xc1d0,_0x5435ce=_0x16421f();while(!![]){try{const _0x4c103a=parseInt(_0x2f3335(0x1de))/0x1*(-parseInt(_0x2f3335(0x205))/0x2)+parseInt(_0x2f3335(0x1e0))/0x3+parseInt(_0x2f3335(0x1f6))/0x4*(-parseInt(_0x2f3335(0x211))/0x5)+-parseInt(_0x2f3335(0x1ec))/0x6*(-parseInt(_0x2f3335(0x20d))/0x7)+-parseInt(_0x2f3335(0x203))/0x8*(-parseInt(_0x2f3335(0x21a))/0x9)+-parseInt(_0x2f3335(0x225))/0xa+-parseInt(_0x2f3335(0x20c))/0xb;if(_0x4c103a===_0x38da41)break;else _0x5435ce['push'](_0x5435ce['shift']());}catch(_0x46f30d){_0x5435ce['push'](_0x5435ce['shift']());}}}(a197_0x5843,0x7075e));const a197_0x30d3ef=(function(){let _0x25f518=!![];return function(_0xd063c1,_0x5a8ed5){const _0x16171f=_0x25f518?function(){if(_0x5a8ed5){const _0x23381f=_0x5a8ed5['apply'](_0xd063c1,arguments);return _0x5a8ed5=null,_0x23381f;}}:function(){};return _0x25f518=![],_0x16171f;};}()),a197_0x3088e0=a197_0x30d3ef(this,function(){const _0x5984a4=a197_0xc1d0;return a197_0x3088e0['toString']()[_0x5984a4(0x206)](_0x5984a4(0x1df))[_0x5984a4(0x1db)]()[_0x5984a4(0x21f)](a197_0x3088e0)[_0x5984a4(0x206)]('(((.+)+)+)+$');});function a197_0xc1d0(_0xcb4fe2,_0x3b82f4){const _0x190077=a197_0x5843();return a197_0xc1d0=function(_0x3088e0,_0x30d3ef){_0x3088e0=_0x3088e0-0x1d6;let _0x584367=_0x190077[_0x3088e0];return _0x584367;},a197_0xc1d0(_0xcb4fe2,_0x3b82f4);}function a197_0x5843(){const _0x3d1c79=['map','Repository\x20\x22','./salesforce-rest.service','%name%','replace','1453056fTIzkj','7BDQjxY','GET_REPOSITORY_BY_NAME_QUERY','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','queryService','60245xLUPZq','push','restService','Completed','getOwnPropertyDescriptor','MAX_QUERY_ARRAY_ITEMS','CRC32__c','Commit_Name__c','getRepositoryIdByName','7105878ZDAaCe','fetchRepositoryComponentsByFilenames','length','Service','__decorate','constructor','__esModule','createCommit','GET_COMPONENT_RECORD_TYPES_QUERY','getBranchIdByName','metadata','8549550wDsKLI','decorate','__metadata','GET_REPOSITORY_COMPONENTS_QUERY','../queries','Name','toString','GET_BRANCH_COMPONENTS_QUERY','../../../../constants','368eUnpcl','(((.+)+)+)+$','2051835wJjlow','defineProperty','GET_BRANCH_BY_NAME_QUERY','object','extractComponentMetadataFromRecord','../../../../core/errors/not-found.error','NotFoundError','%componentIds%','query','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','join','Status__c','3602658jbtmHY','Branch\x20\x22','../utils/flosum-naming.utils','splice','File_Name__c','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','FLOSUM_NAMESPACE','Version__c','Component_Type__c','fetchCommitManifestsByComponentIds','4JPuNaP','extractFieldsFromRecord','FLOSUM_COMMIT','SalesforceRestService','SalesforceGitSyncService','Component_Name__c','design:paramtypes','SalesforceQueryService','Is_From_Agent__c','%branchId%','substr','%fileNames%','%repositoryId%','8xtPOCO','Repository__c','3338lUjHPF','search'];a197_0x5843=function(){return _0x3d1c79;};return a197_0x5843();}a197_0x3088e0();'use strict';var __decorate=this&&this[a197_0x132534(0x21e)]||function(_0x321459,_0x137a0a,_0x58c44e,_0x30a230){const _0x6e1095=a197_0x132534;var _0x116916=arguments[_0x6e1095(0x21c)],_0x58e59e=_0x116916<0x3?_0x137a0a:_0x30a230===null?_0x30a230=Object[_0x6e1095(0x215)](_0x137a0a,_0x58c44e):_0x30a230,_0x14d0bc;if(typeof Reflect==='object'&&typeof Reflect[_0x6e1095(0x1d6)]==='function')_0x58e59e=Reflect[_0x6e1095(0x1d6)](_0x321459,_0x137a0a,_0x58c44e,_0x30a230);else{for(var _0x3db51d=_0x321459[_0x6e1095(0x21c)]-0x1;_0x3db51d>=0x0;_0x3db51d--)if(_0x14d0bc=_0x321459[_0x3db51d])_0x58e59e=(_0x116916<0x3?_0x14d0bc(_0x58e59e):_0x116916>0x3?_0x14d0bc(_0x137a0a,_0x58c44e,_0x58e59e):_0x14d0bc(_0x137a0a,_0x58c44e))||_0x58e59e;}return _0x116916>0x3&&_0x58e59e&&Object[_0x6e1095(0x1e1)](_0x137a0a,_0x58c44e,_0x58e59e),_0x58e59e;},__metadata=this&&this[a197_0x132534(0x1d7)]||function(_0x44594,_0x4c3bbf){const _0x2a2228=a197_0x132534;if(typeof Reflect===_0x2a2228(0x1e3)&&typeof Reflect[_0x2a2228(0x224)]==='function')return Reflect[_0x2a2228(0x224)](_0x44594,_0x4c3bbf);};Object[a197_0x132534(0x1e1)](exports,a197_0x132534(0x220),{'value':!![]}),exports[a197_0x132534(0x1fa)]=void 0x0;const not_found_error_1=require(a197_0x132534(0x1e5)),typedi_1=require('typedi'),constants_1=require(a197_0x132534(0x1dd)),queries_1=require(a197_0x132534(0x1d9)),flosum_naming_utils_1=require(a197_0x132534(0x1ee)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a197_0x132534(0x209));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x203394,_0x28eabe){this['queryService']=_0x203394,this['restService']=_0x28eabe,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a197_0x132534(0x1e4)](_0x2d5ce1){const _0x51658a=a197_0x132534,_0x4db1a5=(0x0,flosum_naming_utils_1[_0x51658a(0x1f7)])(_0x2d5ce1,[_0x51658a(0x1fb),_0x51658a(0x1f4),_0x51658a(0x217),'File_Name__c',_0x51658a(0x1f3),'Id']);return{'id':_0x4db1a5['Id'],'name':_0x4db1a5[_0x51658a(0x1fb)],'type':_0x4db1a5[_0x51658a(0x1f4)],'fileName':_0x4db1a5[_0x51658a(0x1f0)],'crc32':_0x4db1a5[_0x51658a(0x217)],'version':+_0x4db1a5['Version__c']};}async[a197_0x132534(0x219)](_0xbdc344){const _0x3d8364=a197_0x132534,[_0x4f12d6]=await this[_0x3d8364(0x210)]['query'](queries_1[_0x3d8364(0x20e)][_0x3d8364(0x20b)](_0x3d8364(0x20a),_0xbdc344));if(!_0x4f12d6)throw new not_found_error_1[(_0x3d8364(0x1e6))](_0x3d8364(0x208)+_0xbdc344+'\x22\x20not\x20found\x20in\x20flosum.');return _0x4f12d6['Id'];}async[a197_0x132534(0x223)](_0x15fd77){const _0x30d67c=a197_0x132534,[_0x5464b0]=await this[_0x30d67c(0x210)][_0x30d67c(0x1e8)](queries_1[_0x30d67c(0x1e2)][_0x30d67c(0x20b)](_0x30d67c(0x20a),_0x15fd77));if(!_0x5464b0)throw new not_found_error_1[(_0x30d67c(0x1e6))](_0x30d67c(0x1ed)+_0x15fd77+'\x22\x20not\x20found\x20in\x20flosum.');return _0x5464b0['Id'];}async['getComponentRecordTypes'](){const _0x50b79d=a197_0x132534,_0x1fa9fd=await this['queryService'][_0x50b79d(0x1e8)](queries_1[_0x50b79d(0x222)]);return _0x1fa9fd[_0x50b79d(0x207)](_0x2746e5=>(0x0,flosum_naming_utils_1[_0x50b79d(0x1f7)])(_0x2746e5,['Id',_0x50b79d(0x1da)]))[_0x50b79d(0x207)](_0x2076bb=>({'id':_0x2076bb['Id'],'name':_0x2076bb[_0x50b79d(0x1da)]}));}async[a197_0x132534(0x21b)](_0xb0cda0,_0x55616f){const _0x2458f0=a197_0x132534,_0x458552=[];while(_0xb0cda0[_0x2458f0(0x21c)]){const _0x4a27b5=queries_1[_0x2458f0(0x1f1)][_0x2458f0(0x20b)](_0x2458f0(0x201),_0xb0cda0['splice'](0x0,this[_0x2458f0(0x216)])[_0x2458f0(0x207)](_0x20efb7=>'\x27'+_0x20efb7+'\x27')[_0x2458f0(0x1ea)](','))[_0x2458f0(0x20b)](_0x2458f0(0x202),_0x55616f),_0x170983=await this[_0x2458f0(0x210)][_0x2458f0(0x1e8)](_0x4a27b5);_0x458552['push'](..._0x170983);}return _0x458552[_0x2458f0(0x207)](_0x4cd933=>this[_0x2458f0(0x1e4)](_0x4cd933));}async['fetchBranchComponentsByFilenames'](_0x5a94ba,_0x566906){const _0x2dc441=a197_0x132534,_0x17dd80=[];while(_0x5a94ba[_0x2dc441(0x21c)]){const _0x2e91c1=queries_1[_0x2dc441(0x20f)]['replace'](_0x2dc441(0x201),_0x5a94ba['splice'](0x0,this[_0x2dc441(0x216)])[_0x2dc441(0x207)](_0x555f52=>'\x27'+_0x555f52+'\x27')[_0x2dc441(0x1ea)](','))[_0x2dc441(0x20b)](_0x2dc441(0x1ff),_0x566906),_0x7aeb3d=await this[_0x2dc441(0x210)][_0x2dc441(0x1e8)](_0x2e91c1);_0x17dd80[_0x2dc441(0x212)](..._0x7aeb3d);}return _0x17dd80[_0x2dc441(0x207)](_0x554b03=>this[_0x2dc441(0x1e4)](_0x554b03));}async['fetchRepositoryComponents'](_0x448df1){const _0x5bcaee=a197_0x132534,_0x32e2d5=queries_1[_0x5bcaee(0x1d8)][_0x5bcaee(0x20b)](_0x5bcaee(0x202),_0x448df1),_0x4f1b40=await this[_0x5bcaee(0x210)]['query'](_0x32e2d5);return _0x4f1b40[_0x5bcaee(0x207)](_0x4f7a0f=>this['extractComponentMetadataFromRecord'](_0x4f7a0f));}async['fetchBranchComponents'](_0x29ce89){const _0xdeb639=a197_0x132534,_0x3a49c4=queries_1[_0xdeb639(0x1dc)]['replace'](_0xdeb639(0x1ff),_0x29ce89),_0x163575=await this[_0xdeb639(0x210)]['query'](_0x3a49c4);return _0x163575['map'](_0x1176fc=>this[_0xdeb639(0x1e4)](_0x1176fc));}async[a197_0x132534(0x1f5)](_0xc22bb9){const _0x445a42=a197_0x132534,_0x224ea4=[..._0xc22bb9],_0x595886=[];while(_0x224ea4[_0x445a42(0x21c)]){const _0x3d93b5=queries_1[_0x445a42(0x1e9)][_0x445a42(0x20b)](_0x445a42(0x1e7),_0x224ea4[_0x445a42(0x1ef)](0x0,this[_0x445a42(0x216)])[_0x445a42(0x207)](_0x262f10=>'\x27'+_0x262f10+'\x27')[_0x445a42(0x1ea)](',')),_0x1a8b5d=await this[_0x445a42(0x210)][_0x445a42(0x1e8)](_0x3d93b5);_0x595886[_0x445a42(0x212)](..._0x1a8b5d[_0x445a42(0x207)](_0x21887a=>_0x21887a['Id']));}return _0x595886;}async[a197_0x132534(0x221)](_0x1569e9,_0x38a9f5){const _0x2310f1=a197_0x132534;return this[_0x2310f1(0x213)]['post'](constants_1[_0x2310f1(0x1f8)],{[constants_1[_0x2310f1(0x1f2)]+_0x2310f1(0x204)]:_0x38a9f5,[constants_1[_0x2310f1(0x1f2)]+_0x2310f1(0x218)]:_0x1569e9[_0x2310f1(0x200)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x2310f1(0x1eb)]:_0x2310f1(0x214),[constants_1['FLOSUM_GIT_NAMESPACE']+_0x2310f1(0x1fe)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a197_0x132534(0x21d)])(),__metadata(a197_0x132534(0x1fc),[salesforce_query_service_1[a197_0x132534(0x1fd)],salesforce_rest_service_1[a197_0x132534(0x1f9)]])],SalesforceGitSyncService),exports[a197_0x132534(0x1fa)]=SalesforceGitSyncService;