const a263_0x164774=a263_0x3d3c;(function(_0x22cade,_0x5179a6){const _0x4bc0fc=a263_0x3d3c,_0x4adb68=_0x22cade();while(!![]){try{const _0x4da3d6=parseInt(_0x4bc0fc(0x200))/0x1+-parseInt(_0x4bc0fc(0x20c))/0x2*(parseInt(_0x4bc0fc(0x234))/0x3)+parseInt(_0x4bc0fc(0x21e))/0x4*(parseInt(_0x4bc0fc(0x1fd))/0x5)+parseInt(_0x4bc0fc(0x20d))/0x6+parseInt(_0x4bc0fc(0x1f8))/0x7+-parseInt(_0x4bc0fc(0x224))/0x8*(parseInt(_0x4bc0fc(0x210))/0x9)+-parseInt(_0x4bc0fc(0x204))/0xa*(-parseInt(_0x4bc0fc(0x213))/0xb);if(_0x4da3d6===_0x5179a6)break;else _0x4adb68['push'](_0x4adb68['shift']());}catch(_0x160c96){_0x4adb68['push'](_0x4adb68['shift']());}}}(a263_0x265e,0x4076d));const a263_0xe76922=(function(){let _0x31dcd9=!![];return function(_0x4ed05b,_0x182502){const _0x50ae7b=_0x31dcd9?function(){if(_0x182502){const _0x2543df=_0x182502['apply'](_0x4ed05b,arguments);return _0x182502=null,_0x2543df;}}:function(){};return _0x31dcd9=![],_0x50ae7b;};}()),a263_0x2d6c84=a263_0xe76922(this,function(){const _0xa3d02c=a263_0x3d3c;return a263_0x2d6c84[_0xa3d02c(0x207)]()[_0xa3d02c(0x217)](_0xa3d02c(0x236))['toString']()[_0xa3d02c(0x230)](a263_0x2d6c84)[_0xa3d02c(0x217)](_0xa3d02c(0x236));});a263_0x2d6c84();'use strict';var __decorate=this&&this['__decorate']||function(_0x360572,_0x3f53e2,_0x228e57,_0x1720c4){const _0x1cb255=a263_0x3d3c;var _0x300b50=arguments['length'],_0x52fc70=_0x300b50<0x3?_0x3f53e2:_0x1720c4===null?_0x1720c4=Object[_0x1cb255(0x231)](_0x3f53e2,_0x228e57):_0x1720c4,_0x158fd8;if(typeof Reflect===_0x1cb255(0x21b)&&typeof Reflect[_0x1cb255(0x208)]===_0x1cb255(0x1f6))_0x52fc70=Reflect[_0x1cb255(0x208)](_0x360572,_0x3f53e2,_0x228e57,_0x1720c4);else{for(var _0x202d15=_0x360572[_0x1cb255(0x1f7)]-0x1;_0x202d15>=0x0;_0x202d15--)if(_0x158fd8=_0x360572[_0x202d15])_0x52fc70=(_0x300b50<0x3?_0x158fd8(_0x52fc70):_0x300b50>0x3?_0x158fd8(_0x3f53e2,_0x228e57,_0x52fc70):_0x158fd8(_0x3f53e2,_0x228e57))||_0x52fc70;}return _0x300b50>0x3&&_0x52fc70&&Object[_0x1cb255(0x1fe)](_0x3f53e2,_0x228e57,_0x52fc70),_0x52fc70;},__metadata=this&&this[a263_0x164774(0x211)]||function(_0x423e94,_0x18ad72){const _0x4882b8=a263_0x164774;if(typeof Reflect===_0x4882b8(0x21b)&&typeof Reflect[_0x4882b8(0x212)]==='function')return Reflect[_0x4882b8(0x212)](_0x423e94,_0x18ad72);};Object[a263_0x164774(0x1fe)](exports,a263_0x164774(0x22f),{'value':!![]}),exports[a263_0x164774(0x228)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a263_0x164774(0x239)),constants_1=require('../../../../constants'),queries_1=require(a263_0x164774(0x1fa)),flosum_naming_utils_1=require(a263_0x164774(0x1f4)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a263_0x164774(0x22b));function a263_0x3d3c(_0x5b95e9,_0x3df30a){const _0x14ce8c=a263_0x265e();return a263_0x3d3c=function(_0x2d6c84,_0xe76922){_0x2d6c84=_0x2d6c84-0x1f2;let _0x265ea0=_0x14ce8c[_0x2d6c84];return _0x265ea0;},a263_0x3d3c(_0x5b95e9,_0x3df30a);}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x3a34e5,_0x36b849){const _0x540bd8=a263_0x164774;this[_0x540bd8(0x232)]=_0x3a34e5,this['restService']=_0x36b849,this[_0x540bd8(0x222)]=0xc8;}[a263_0x164774(0x1fc)](_0x3ca9de){const _0x400597=a263_0x164774,_0x5c0a1c=(0x0,flosum_naming_utils_1[_0x400597(0x1f5)])(_0x3ca9de,['Component_Name__c',_0x400597(0x201),_0x400597(0x203),_0x400597(0x22a),_0x400597(0x205),'Id']);return{'id':_0x5c0a1c['Id'],'name':_0x5c0a1c[_0x400597(0x22d)],'type':_0x5c0a1c['Component_Type__c'],'fileName':_0x5c0a1c[_0x400597(0x22a)],'crc32':_0x5c0a1c[_0x400597(0x203)],'version':+_0x5c0a1c[_0x400597(0x205)]};}async[a263_0x164774(0x214)](_0x46901c){const _0x48b937=a263_0x164774,[_0x56c286]=await this[_0x48b937(0x232)][_0x48b937(0x1f9)](queries_1[_0x48b937(0x233)][_0x48b937(0x21f)](_0x48b937(0x220),_0x46901c));if(!_0x56c286)throw new not_found_error_1[(_0x48b937(0x22c))](_0x48b937(0x1f3)+_0x46901c+'\x22\x20not\x20found\x20in\x20flosum.');return _0x56c286['Id'];}async[a263_0x164774(0x206)](_0x45d712){const _0x481f37=a263_0x164774,[_0x26bae1]=await this[_0x481f37(0x232)]['query'](queries_1[_0x481f37(0x20a)][_0x481f37(0x21f)](_0x481f37(0x220),_0x45d712));if(!_0x26bae1)throw new not_found_error_1[(_0x481f37(0x22c))]('Branch\x20\x22'+_0x45d712+'\x22\x20not\x20found\x20in\x20flosum.');return _0x26bae1['Id'];}async[a263_0x164774(0x21c)](){const _0x14849b=a263_0x164774,_0x5c656f=await this[_0x14849b(0x232)][_0x14849b(0x1f9)](queries_1[_0x14849b(0x229)]);return _0x5c656f[_0x14849b(0x202)](_0x48678c=>(0x0,flosum_naming_utils_1[_0x14849b(0x1f5)])(_0x48678c,['Id',_0x14849b(0x20b)]))[_0x14849b(0x202)](_0x42d388=>({'id':_0x42d388['Id'],'name':_0x42d388[_0x14849b(0x20b)]}));}async[a263_0x164774(0x221)](_0x2c7d9c,_0xe61f84){const _0x362f65=a263_0x164774,_0x1290d0=[];while(_0x2c7d9c[_0x362f65(0x1f7)]){const _0xa84cbc=queries_1[_0x362f65(0x215)][_0x362f65(0x21f)](_0x362f65(0x219),_0x2c7d9c[_0x362f65(0x20f)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x544ce7=>'\x27'+_0x544ce7+'\x27')['join'](','))['replace'](_0x362f65(0x1fb),_0xe61f84),_0x4be13c=await this[_0x362f65(0x232)][_0x362f65(0x1f9)](_0xa84cbc);_0x1290d0[_0x362f65(0x225)](..._0x4be13c);}return _0x1290d0[_0x362f65(0x202)](_0x356e7a=>this[_0x362f65(0x1fc)](_0x356e7a));}async[a263_0x164774(0x20e)](_0x2e0e53,_0x2d0cc7){const _0x20cad0=a263_0x164774,_0x5b8816=[];while(_0x2e0e53[_0x20cad0(0x1f7)]){const _0x28ccab=queries_1[_0x20cad0(0x227)][_0x20cad0(0x21f)](_0x20cad0(0x219),_0x2e0e53[_0x20cad0(0x20f)](0x0,this[_0x20cad0(0x222)])[_0x20cad0(0x202)](_0x49bb32=>'\x27'+_0x49bb32+'\x27')[_0x20cad0(0x22e)](','))['replace'](_0x20cad0(0x238),_0x2d0cc7),_0x535481=await this[_0x20cad0(0x232)][_0x20cad0(0x1f9)](_0x28ccab);_0x5b8816['push'](..._0x535481);}return _0x5b8816[_0x20cad0(0x202)](_0xd9a83e=>this[_0x20cad0(0x1fc)](_0xd9a83e));}async[a263_0x164774(0x216)](_0x35c45c){const _0x2f3d24=a263_0x164774,_0x217efd=queries_1[_0x2f3d24(0x237)]['replace'](_0x2f3d24(0x1fb),_0x35c45c),_0xe3fb4b=await this[_0x2f3d24(0x232)][_0x2f3d24(0x1f9)](_0x217efd);return _0xe3fb4b[_0x2f3d24(0x202)](_0x22ee3f=>this['extractComponentMetadataFromRecord'](_0x22ee3f));}async['fetchBranchComponents'](_0x19ce4a){const _0x19dc48=a263_0x164774,_0x4d920c=queries_1[_0x19dc48(0x218)][_0x19dc48(0x21f)](_0x19dc48(0x238),_0x19ce4a),_0x46c6cf=await this[_0x19dc48(0x232)][_0x19dc48(0x1f9)](_0x4d920c);return _0x46c6cf['map'](_0x535088=>this[_0x19dc48(0x1fc)](_0x535088));}async[a263_0x164774(0x21a)](_0x47eb27){const _0x2e9c73=a263_0x164774,_0x62eb87=[..._0x47eb27],_0x3cbbf1=[];while(_0x62eb87['length']){const _0xecc9f7=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x2e9c73(0x21f)](_0x2e9c73(0x1f2),_0x62eb87[_0x2e9c73(0x20f)](0x0,this[_0x2e9c73(0x222)])['map'](_0x2a769d=>'\x27'+_0x2a769d+'\x27')[_0x2e9c73(0x22e)](',')),_0x24ed2c=await this[_0x2e9c73(0x232)][_0x2e9c73(0x1f9)](_0xecc9f7);_0x3cbbf1[_0x2e9c73(0x225)](..._0x24ed2c['map'](_0x2ee01c=>_0x2ee01c['Id']));}return _0x3cbbf1;}async[a263_0x164774(0x1ff)](_0x25cb0a,_0x7b8f27){const _0x6987c8=a263_0x164774;return this[_0x6987c8(0x223)]['post'](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x6987c8(0x21d)]+'Repository__c']:_0x7b8f27,[constants_1[_0x6987c8(0x21d)]+_0x6987c8(0x209)]:_0x25cb0a['substr'](0x0,0xff),[constants_1[_0x6987c8(0x21d)]+'Status__c']:'Completed',[constants_1['FLOSUM_GIT_NAMESPACE']+'Is_From_Agent__c']:!![]});}};function a263_0x265e(){const _0x5b9303=['220tGMxsb','getRepositoryIdByName','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','fetchRepositoryComponents','search','GET_BRANCH_COMPONENTS_QUERY','%fileNames%','fetchCommitManifestsByComponentIds','object','getComponentRecordTypes','FLOSUM_NAMESPACE','368gxrjTr','replace','%name%','fetchRepositoryComponentsByFilenames','MAX_QUERY_ARRAY_ITEMS','restService','8qSobNA','push','SalesforceQueryService','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','SalesforceGitSyncService','GET_COMPONENT_RECORD_TYPES_QUERY','File_Name__c','./salesforce-rest.service','NotFoundError','Component_Name__c','join','__esModule','constructor','getOwnPropertyDescriptor','queryService','GET_REPOSITORY_BY_NAME_QUERY','42uapNzj','design:paramtypes','(((.+)+)+)+$','GET_REPOSITORY_COMPONENTS_QUERY','%branchId%','typedi','%componentIds%','Repository\x20\x22','../utils/flosum-naming.utils','extractFieldsFromRecord','function','length','1103347YzXvmb','query','../queries','%repositoryId%','extractComponentMetadataFromRecord','20215oLaNGh','defineProperty','createCommit','73565fORgcJ','Component_Type__c','map','CRC32__c','29300Eskran','Version__c','getBranchIdByName','toString','decorate','Commit_Name__c','GET_BRANCH_BY_NAME_QUERY','Name','53254IvKYEs','2419404nfClVQ','fetchBranchComponentsByFilenames','splice','3853377SIHgtL','__metadata','metadata'];a263_0x265e=function(){return _0x5b9303;};return a263_0x265e();}SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata(a263_0x164774(0x235),[salesforce_query_service_1[a263_0x164774(0x226)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;