const a236_0x5ae9b8=a236_0x829e;(function(_0x940a5a,_0x28fd56){const _0x49e18f=a236_0x829e,_0x3f2f74=_0x940a5a();while(!![]){try{const _0x1cf7c4=parseInt(_0x49e18f(0x1b9))/0x1+parseInt(_0x49e18f(0x1b1))/0x2*(-parseInt(_0x49e18f(0x1d4))/0x3)+parseInt(_0x49e18f(0x1c7))/0x4*(parseInt(_0x49e18f(0x1b6))/0x5)+-parseInt(_0x49e18f(0x1ac))/0x6*(-parseInt(_0x49e18f(0x1bf))/0x7)+parseInt(_0x49e18f(0x1b4))/0x8*(-parseInt(_0x49e18f(0x197))/0x9)+parseInt(_0x49e18f(0x1d2))/0xa+parseInt(_0x49e18f(0x1c5))/0xb;if(_0x1cf7c4===_0x28fd56)break;else _0x3f2f74['push'](_0x3f2f74['shift']());}catch(_0x39b93d){_0x3f2f74['push'](_0x3f2f74['shift']());}}}(a236_0x4c00,0x20d97));const a236_0x27db4c=(function(){let _0x46e0ab=!![];return function(_0x34bfc0,_0x3388c1){const _0x52ee2b=_0x46e0ab?function(){const _0x176e5a=a236_0x829e;if(_0x3388c1){const _0x4ea462=_0x3388c1[_0x176e5a(0x1a8)](_0x34bfc0,arguments);return _0x3388c1=null,_0x4ea462;}}:function(){};return _0x46e0ab=![],_0x52ee2b;};}()),a236_0x45ebc0=a236_0x27db4c(this,function(){const _0xfb05d1=a236_0x829e;return a236_0x45ebc0['toString']()[_0xfb05d1(0x1e2)](_0xfb05d1(0x1c4))[_0xfb05d1(0x1e3)]()[_0xfb05d1(0x1d3)](a236_0x45ebc0)[_0xfb05d1(0x1e2)](_0xfb05d1(0x1c4));});function a236_0x829e(_0x24c01f,_0x13262f){const _0x42bee7=a236_0x4c00();return a236_0x829e=function(_0x45ebc0,_0x27db4c){_0x45ebc0=_0x45ebc0-0x197;let _0x4c0055=_0x42bee7[_0x45ebc0];return _0x4c0055;},a236_0x829e(_0x24c01f,_0x13262f);}a236_0x45ebc0();'use strict';var __decorate=this&&this[a236_0x5ae9b8(0x1a2)]||function(_0xbecdcc,_0x249782,_0x7fcb6f,_0x133c44){const _0x58cd9b=a236_0x5ae9b8;var _0x1757e0=arguments[_0x58cd9b(0x1d8)],_0x341603=_0x1757e0<0x3?_0x249782:_0x133c44===null?_0x133c44=Object[_0x58cd9b(0x1c9)](_0x249782,_0x7fcb6f):_0x133c44,_0x5bddcb;if(typeof Reflect===_0x58cd9b(0x1bb)&&typeof Reflect[_0x58cd9b(0x1a9)]===_0x58cd9b(0x1db))_0x341603=Reflect[_0x58cd9b(0x1a9)](_0xbecdcc,_0x249782,_0x7fcb6f,_0x133c44);else{for(var _0x2388a1=_0xbecdcc[_0x58cd9b(0x1d8)]-0x1;_0x2388a1>=0x0;_0x2388a1--)if(_0x5bddcb=_0xbecdcc[_0x2388a1])_0x341603=(_0x1757e0<0x3?_0x5bddcb(_0x341603):_0x1757e0>0x3?_0x5bddcb(_0x249782,_0x7fcb6f,_0x341603):_0x5bddcb(_0x249782,_0x7fcb6f))||_0x341603;}return _0x1757e0>0x3&&_0x341603&&Object[_0x58cd9b(0x1c6)](_0x249782,_0x7fcb6f,_0x341603),_0x341603;},__metadata=this&&this[a236_0x5ae9b8(0x1da)]||function(_0x9f1e69,_0x4202b9){const _0x6b2e3e=a236_0x5ae9b8;if(typeof Reflect===_0x6b2e3e(0x1bb)&&typeof Reflect[_0x6b2e3e(0x1cc)]===_0x6b2e3e(0x1db))return Reflect[_0x6b2e3e(0x1cc)](_0x9f1e69,_0x4202b9);};Object[a236_0x5ae9b8(0x1c6)](exports,a236_0x5ae9b8(0x1d7),{'value':!![]}),exports[a236_0x5ae9b8(0x1b0)]=void 0x0;function a236_0x4c00(){const _0x3d7e00=['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','metadata','fetchBranchComponentsByFilenames','push','join','queryService','extractFieldsFromRecord','378980StaJle','constructor','3nyPwNX','../queries','../utils/flosum-naming.utils','__esModule','length','../../../../core/errors/not-found.error','__metadata','function','FLOSUM_COMMIT','query','Name','GET_BRANCH_BY_NAME_QUERY','Is_From_Agent__c','MAX_QUERY_ARRAY_ITEMS','search','toString','GET_REPOSITORY_COMPONENTS_QUERY','fetchRepositoryComponentsByFilenames','design:paramtypes','getRepositoryIdByName','Branch\x20\x22','restService','14940TsfZQb','replace','FLOSUM_GIT_NAMESPACE','Service','typedi','File_Name__c','extractComponentMetadataFromRecord','\x22\x20not\x20found\x20in\x20flosum.','./salesforce-query.service','fetchBranchComponents','FLOSUM_NAMESPACE','__decorate','fetchRepositoryComponents','SalesforceQueryService','map','Version__c','%componentIds%','apply','decorate','CRC32__c','getBranchIdByName','194586GSTKPF','getComponentRecordTypes','%fileNames%','Component_Name__c','SalesforceGitSyncService','29314MTgaKf','%repositoryId%','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','1112wPDVde','splice','211135ipfPcy','createCommit','Component_Type__c','16842MsfMMl','%name%','object','SalesforceRestService','%branchId%','GET_BRANCH_COMPONENTS_QUERY','7dhHPWo','../../../../constants','substr','post','NotFoundError','(((.+)+)+)+$','2756050raJVbn','defineProperty','4UbGHUu','GET_REPOSITORY_BY_NAME_QUERY','getOwnPropertyDescriptor','./salesforce-rest.service'];a236_0x4c00=function(){return _0x3d7e00;};return a236_0x4c00();}const not_found_error_1=require(a236_0x5ae9b8(0x1d9)),typedi_1=require(a236_0x5ae9b8(0x19b)),constants_1=require(a236_0x5ae9b8(0x1c0)),queries_1=require(a236_0x5ae9b8(0x1d5)),flosum_naming_utils_1=require(a236_0x5ae9b8(0x1d6)),salesforce_query_service_1=require(a236_0x5ae9b8(0x19f)),salesforce_rest_service_1=require(a236_0x5ae9b8(0x1ca));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x208d2c,_0x483837){const _0x5b80a8=a236_0x5ae9b8;this['queryService']=_0x208d2c,this[_0x5b80a8(0x1e9)]=_0x483837,this[_0x5b80a8(0x1e1)]=0xc8;}[a236_0x5ae9b8(0x19d)](_0x1166bd){const _0xd46459=a236_0x5ae9b8,_0x7fb7c0=(0x0,flosum_naming_utils_1[_0xd46459(0x1d1)])(_0x1166bd,['Component_Name__c',_0xd46459(0x1b8),_0xd46459(0x1aa),_0xd46459(0x19c),_0xd46459(0x1a6),'Id']);return{'id':_0x7fb7c0['Id'],'name':_0x7fb7c0[_0xd46459(0x1af)],'type':_0x7fb7c0['Component_Type__c'],'fileName':_0x7fb7c0[_0xd46459(0x19c)],'crc32':_0x7fb7c0[_0xd46459(0x1aa)],'version':+_0x7fb7c0[_0xd46459(0x1a6)]};}async[a236_0x5ae9b8(0x1e7)](_0xdc27e9){const _0x22c56d=a236_0x5ae9b8,[_0xe1d636]=await this[_0x22c56d(0x1d0)][_0x22c56d(0x1dd)](queries_1[_0x22c56d(0x1c8)][_0x22c56d(0x198)](_0x22c56d(0x1ba),_0xdc27e9));if(!_0xe1d636)throw new not_found_error_1['NotFoundError']('Repository\x20\x22'+_0xdc27e9+'\x22\x20not\x20found\x20in\x20flosum.');return _0xe1d636['Id'];}async[a236_0x5ae9b8(0x1ab)](_0x2718eb){const _0x5032d6=a236_0x5ae9b8,[_0x465ba2]=await this[_0x5032d6(0x1d0)][_0x5032d6(0x1dd)](queries_1[_0x5032d6(0x1df)][_0x5032d6(0x198)]('%name%',_0x2718eb));if(!_0x465ba2)throw new not_found_error_1[(_0x5032d6(0x1c3))](_0x5032d6(0x1e8)+_0x2718eb+_0x5032d6(0x19e));return _0x465ba2['Id'];}async[a236_0x5ae9b8(0x1ad)](){const _0x312ebc=a236_0x5ae9b8,_0x385122=await this['queryService'][_0x312ebc(0x1dd)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x385122[_0x312ebc(0x1a5)](_0x4aa92f=>(0x0,flosum_naming_utils_1[_0x312ebc(0x1d1)])(_0x4aa92f,['Id',_0x312ebc(0x1de)]))[_0x312ebc(0x1a5)](_0x593a9e=>({'id':_0x593a9e['Id'],'name':_0x593a9e['Name']}));}async[a236_0x5ae9b8(0x1e5)](_0x5bca4f,_0x428544){const _0x490904=a236_0x5ae9b8,_0x2e18d6=[];while(_0x5bca4f[_0x490904(0x1d8)]){const _0x1cd07b=queries_1[_0x490904(0x1b3)]['replace'](_0x490904(0x1ae),_0x5bca4f[_0x490904(0x1b5)](0x0,this[_0x490904(0x1e1)])[_0x490904(0x1a5)](_0x48bb65=>'\x27'+_0x48bb65+'\x27')[_0x490904(0x1cf)](','))['replace'](_0x490904(0x1b2),_0x428544),_0x11f0b0=await this['queryService'][_0x490904(0x1dd)](_0x1cd07b);_0x2e18d6[_0x490904(0x1ce)](..._0x11f0b0);}return _0x2e18d6[_0x490904(0x1a5)](_0x295f2d=>this['extractComponentMetadataFromRecord'](_0x295f2d));}async[a236_0x5ae9b8(0x1cd)](_0xc61ead,_0xafea2a){const _0x435372=a236_0x5ae9b8,_0x4675ff=[];while(_0xc61ead[_0x435372(0x1d8)]){const _0xe8b017=queries_1[_0x435372(0x1cb)][_0x435372(0x198)](_0x435372(0x1ae),_0xc61ead[_0x435372(0x1b5)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x435372(0x1a5)](_0x945e22=>'\x27'+_0x945e22+'\x27')[_0x435372(0x1cf)](','))[_0x435372(0x198)](_0x435372(0x1bd),_0xafea2a),_0x52660a=await this[_0x435372(0x1d0)]['query'](_0xe8b017);_0x4675ff[_0x435372(0x1ce)](..._0x52660a);}return _0x4675ff[_0x435372(0x1a5)](_0xbf8055=>this[_0x435372(0x19d)](_0xbf8055));}async[a236_0x5ae9b8(0x1a3)](_0x1fcc47){const _0x2d8d3f=a236_0x5ae9b8,_0x1b91aa=queries_1[_0x2d8d3f(0x1e4)]['replace']('%repositoryId%',_0x1fcc47),_0x1e5df=await this[_0x2d8d3f(0x1d0)][_0x2d8d3f(0x1dd)](_0x1b91aa);return _0x1e5df[_0x2d8d3f(0x1a5)](_0x239d7c=>this['extractComponentMetadataFromRecord'](_0x239d7c));}async[a236_0x5ae9b8(0x1a0)](_0x58fc43){const _0x43a0c4=a236_0x5ae9b8,_0x4265da=queries_1[_0x43a0c4(0x1be)]['replace'](_0x43a0c4(0x1bd),_0x58fc43),_0x407748=await this[_0x43a0c4(0x1d0)][_0x43a0c4(0x1dd)](_0x4265da);return _0x407748[_0x43a0c4(0x1a5)](_0x4c0f83=>this[_0x43a0c4(0x19d)](_0x4c0f83));}async['fetchCommitManifestsByComponentIds'](_0x1cd7df){const _0x508ab8=a236_0x5ae9b8,_0x163f18=[..._0x1cd7df],_0x50dd33=[];while(_0x163f18['length']){const _0x11d62a=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x508ab8(0x198)](_0x508ab8(0x1a7),_0x163f18[_0x508ab8(0x1b5)](0x0,this[_0x508ab8(0x1e1)])[_0x508ab8(0x1a5)](_0x5e7478=>'\x27'+_0x5e7478+'\x27')[_0x508ab8(0x1cf)](',')),_0x46ddcb=await this['queryService'][_0x508ab8(0x1dd)](_0x11d62a);_0x50dd33[_0x508ab8(0x1ce)](..._0x46ddcb['map'](_0x2ff41e=>_0x2ff41e['Id']));}return _0x50dd33;}async[a236_0x5ae9b8(0x1b7)](_0x2cab1d,_0x4558bc){const _0x5b24a3=a236_0x5ae9b8;return this[_0x5b24a3(0x1e9)][_0x5b24a3(0x1c2)](constants_1[_0x5b24a3(0x1dc)],{[constants_1['FLOSUM_NAMESPACE']+'Repository__c']:_0x4558bc,[constants_1[_0x5b24a3(0x1a1)]+'Commit_Name__c']:_0x2cab1d[_0x5b24a3(0x1c1)](0x0,0xff),[constants_1[_0x5b24a3(0x1a1)]+'Status__c']:'Completed',[constants_1[_0x5b24a3(0x199)]+_0x5b24a3(0x1e0)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x5ae9b8(0x19a)])(),__metadata(a236_0x5ae9b8(0x1e6),[salesforce_query_service_1[a236_0x5ae9b8(0x1a4)],salesforce_rest_service_1[a236_0x5ae9b8(0x1bc)]])],SalesforceGitSyncService),exports[a236_0x5ae9b8(0x1b0)]=SalesforceGitSyncService;