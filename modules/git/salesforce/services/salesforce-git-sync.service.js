const a230_0x351acc=a230_0xd984;(function(_0x17f16a,_0x1ef166){const _0xe88310=a230_0xd984,_0x24690d=_0x17f16a();while(!![]){try{const _0x51877d=parseInt(_0xe88310(0x134))/0x1*(-parseInt(_0xe88310(0x13e))/0x2)+parseInt(_0xe88310(0x16d))/0x3+parseInt(_0xe88310(0x156))/0x4*(parseInt(_0xe88310(0x14d))/0x5)+parseInt(_0xe88310(0x166))/0x6+parseInt(_0xe88310(0x164))/0x7+parseInt(_0xe88310(0x146))/0x8+parseInt(_0xe88310(0x13b))/0x9*(-parseInt(_0xe88310(0x177))/0xa);if(_0x51877d===_0x1ef166)break;else _0x24690d['push'](_0x24690d['shift']());}catch(_0x321744){_0x24690d['push'](_0x24690d['shift']());}}}(a230_0xe465,0x838ec));const a230_0x33cdb4=(function(){let _0x58f860=!![];return function(_0x2d1c1a,_0x913375){const _0x48a2f6=_0x58f860?function(){if(_0x913375){const _0x3283d9=_0x913375['apply'](_0x2d1c1a,arguments);return _0x913375=null,_0x3283d9;}}:function(){};return _0x58f860=![],_0x48a2f6;};}()),a230_0x4fee93=a230_0x33cdb4(this,function(){const _0x5e45d1=a230_0xd984;return a230_0x4fee93[_0x5e45d1(0x136)]()[_0x5e45d1(0x174)]('(((.+)+)+)+$')[_0x5e45d1(0x136)]()[_0x5e45d1(0x16c)](a230_0x4fee93)[_0x5e45d1(0x174)](_0x5e45d1(0x155));});a230_0x4fee93();function a230_0xd984(_0xa38b55,_0x3c0e88){const _0x42444e=a230_0xe465();return a230_0xd984=function(_0x4fee93,_0x33cdb4){_0x4fee93=_0x4fee93-0x132;let _0xe465be=_0x42444e[_0x4fee93];return _0xe465be;},a230_0xd984(_0xa38b55,_0x3c0e88);}'use strict';function a230_0xe465(){const _0x507dad=['Name','Repository__c','GET_BRANCH_COMPONENTS_QUERY','CRC32__c','File_Name__c','FLOSUM_NAMESPACE','GET_REPOSITORY_COMPONENTS_QUERY','post','3436797SOyujp','fetchBranchComponentsByFilenames','5884680hKtZiY','replace','map','getComponentRecordTypes','extractFieldsFromRecord','push','constructor','1225275lnmRZX','object','../../../../core/errors/not-found.error','GET_BRANCH_BY_NAME_QUERY','join','Component_Name__c','length','search','../queries','__esModule','20TOvnKk','fetchRepositoryComponentsByFilenames','Component_Type__c','Version__c','Repository\x20\x22','GET_REPOSITORY_BY_NAME_QUERY','SalesforceGitSyncService','NotFoundError','11364bVbptu','GET_COMPONENT_RECORD_TYPES_QUERY','toString','createCommit','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','%repositoryId%','restService','13612527CORZvP','../../../../constants','Commit_Name__c','24POjGXH','SalesforceRestService','\x22\x20not\x20found\x20in\x20flosum.','metadata','extractComponentMetadataFromRecord','getOwnPropertyDescriptor','./salesforce-query.service','__metadata','7467200JPLITq','MAX_QUERY_ARRAY_ITEMS','%branchId%','query','Status__c','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','design:paramtypes','60730FezRlz','getBranchIdByName','Branch\x20\x22','fetchBranchComponents','FLOSUM_GIT_NAMESPACE','%fileNames%','function','SalesforceQueryService','(((.+)+)+)+$','292GcQYUn','fetchCommitManifestsByComponentIds','splice','queryService','defineProperty','%name%'];a230_0xe465=function(){return _0x507dad;};return a230_0xe465();}var __decorate=this&&this['__decorate']||function(_0x455a9c,_0x44fdad,_0x1b9910,_0x165625){const _0x1f8f60=a230_0xd984;var _0x3bdb7a=arguments[_0x1f8f60(0x173)],_0x3cc2a1=_0x3bdb7a<0x3?_0x44fdad:_0x165625===null?_0x165625=Object[_0x1f8f60(0x143)](_0x44fdad,_0x1b9910):_0x165625,_0x376d60;if(typeof Reflect===_0x1f8f60(0x16e)&&typeof Reflect['decorate']===_0x1f8f60(0x153))_0x3cc2a1=Reflect['decorate'](_0x455a9c,_0x44fdad,_0x1b9910,_0x165625);else{for(var _0x40ec6=_0x455a9c[_0x1f8f60(0x173)]-0x1;_0x40ec6>=0x0;_0x40ec6--)if(_0x376d60=_0x455a9c[_0x40ec6])_0x3cc2a1=(_0x3bdb7a<0x3?_0x376d60(_0x3cc2a1):_0x3bdb7a>0x3?_0x376d60(_0x44fdad,_0x1b9910,_0x3cc2a1):_0x376d60(_0x44fdad,_0x1b9910))||_0x3cc2a1;}return _0x3bdb7a>0x3&&_0x3cc2a1&&Object[_0x1f8f60(0x15a)](_0x44fdad,_0x1b9910,_0x3cc2a1),_0x3cc2a1;},__metadata=this&&this[a230_0x351acc(0x145)]||function(_0x2c0135,_0x12ca5f){const _0x193747=a230_0x351acc;if(typeof Reflect===_0x193747(0x16e)&&typeof Reflect[_0x193747(0x141)]===_0x193747(0x153))return Reflect[_0x193747(0x141)](_0x2c0135,_0x12ca5f);};Object[a230_0x351acc(0x15a)](exports,a230_0x351acc(0x176),{'value':!![]}),exports[a230_0x351acc(0x132)]=void 0x0;const not_found_error_1=require(a230_0x351acc(0x16f)),typedi_1=require('typedi'),constants_1=require(a230_0x351acc(0x13c)),queries_1=require(a230_0x351acc(0x175)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a230_0x351acc(0x144)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x4d290d,_0x322bfd){const _0x1fd6ff=a230_0x351acc;this[_0x1fd6ff(0x159)]=_0x4d290d,this[_0x1fd6ff(0x13a)]=_0x322bfd,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a230_0x351acc(0x142)](_0x563562){const _0x1d77c0=a230_0x351acc,_0x1bec43=(0x0,flosum_naming_utils_1[_0x1d77c0(0x16a)])(_0x563562,[_0x1d77c0(0x172),_0x1d77c0(0x179),_0x1d77c0(0x15f),_0x1d77c0(0x160),'Version__c','Id']);return{'id':_0x1bec43['Id'],'name':_0x1bec43['Component_Name__c'],'type':_0x1bec43[_0x1d77c0(0x179)],'fileName':_0x1bec43[_0x1d77c0(0x160)],'crc32':_0x1bec43['CRC32__c'],'version':+_0x1bec43[_0x1d77c0(0x17a)]};}async['getRepositoryIdByName'](_0x4f0703){const _0x15f1c6=a230_0x351acc,[_0x6fcb87]=await this['queryService']['query'](queries_1[_0x15f1c6(0x17c)][_0x15f1c6(0x167)](_0x15f1c6(0x15b),_0x4f0703));if(!_0x6fcb87)throw new not_found_error_1[(_0x15f1c6(0x133))](_0x15f1c6(0x17b)+_0x4f0703+_0x15f1c6(0x140));return _0x6fcb87['Id'];}async[a230_0x351acc(0x14e)](_0x128cc9){const _0x44cdeb=a230_0x351acc,[_0x18bf38]=await this[_0x44cdeb(0x159)][_0x44cdeb(0x149)](queries_1[_0x44cdeb(0x170)][_0x44cdeb(0x167)](_0x44cdeb(0x15b),_0x128cc9));if(!_0x18bf38)throw new not_found_error_1[(_0x44cdeb(0x133))](_0x44cdeb(0x14f)+_0x128cc9+'\x22\x20not\x20found\x20in\x20flosum.');return _0x18bf38['Id'];}async[a230_0x351acc(0x169)](){const _0x2d8d19=a230_0x351acc,_0x381f94=await this[_0x2d8d19(0x159)][_0x2d8d19(0x149)](queries_1[_0x2d8d19(0x135)]);return _0x381f94[_0x2d8d19(0x168)](_0x19178f=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x19178f,['Id',_0x2d8d19(0x15c)]))[_0x2d8d19(0x168)](_0x41c5a7=>({'id':_0x41c5a7['Id'],'name':_0x41c5a7[_0x2d8d19(0x15c)]}));}async[a230_0x351acc(0x178)](_0x4adb78,_0x5982a0){const _0x5d983c=a230_0x351acc,_0x26530f=[];while(_0x4adb78[_0x5d983c(0x173)]){const _0x51ddec=queries_1[_0x5d983c(0x14b)][_0x5d983c(0x167)]('%fileNames%',_0x4adb78[_0x5d983c(0x158)](0x0,this[_0x5d983c(0x147)])[_0x5d983c(0x168)](_0x518d1b=>'\x27'+_0x518d1b+'\x27')[_0x5d983c(0x171)](','))['replace'](_0x5d983c(0x139),_0x5982a0),_0x108a7e=await this[_0x5d983c(0x159)][_0x5d983c(0x149)](_0x51ddec);_0x26530f[_0x5d983c(0x16b)](..._0x108a7e);}return _0x26530f[_0x5d983c(0x168)](_0x40b8bc=>this[_0x5d983c(0x142)](_0x40b8bc));}async[a230_0x351acc(0x165)](_0x369041,_0x3540c0){const _0x4f4580=a230_0x351acc,_0x31535b=[];while(_0x369041['length']){const _0x6fe496=queries_1[_0x4f4580(0x138)][_0x4f4580(0x167)](_0x4f4580(0x152),_0x369041[_0x4f4580(0x158)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x227ee8=>'\x27'+_0x227ee8+'\x27')[_0x4f4580(0x171)](','))[_0x4f4580(0x167)](_0x4f4580(0x148),_0x3540c0),_0x44952b=await this[_0x4f4580(0x159)][_0x4f4580(0x149)](_0x6fe496);_0x31535b['push'](..._0x44952b);}return _0x31535b[_0x4f4580(0x168)](_0x573762=>this[_0x4f4580(0x142)](_0x573762));}async['fetchRepositoryComponents'](_0x445ee6){const _0x5e3957=a230_0x351acc,_0x2329e9=queries_1[_0x5e3957(0x162)][_0x5e3957(0x167)]('%repositoryId%',_0x445ee6),_0x1cf494=await this['queryService'][_0x5e3957(0x149)](_0x2329e9);return _0x1cf494[_0x5e3957(0x168)](_0x11dd21=>this[_0x5e3957(0x142)](_0x11dd21));}async[a230_0x351acc(0x150)](_0x246791){const _0x5cf4ba=a230_0x351acc,_0x42be12=queries_1[_0x5cf4ba(0x15e)][_0x5cf4ba(0x167)](_0x5cf4ba(0x148),_0x246791),_0x2f1e52=await this[_0x5cf4ba(0x159)]['query'](_0x42be12);return _0x2f1e52[_0x5cf4ba(0x168)](_0x38a79a=>this[_0x5cf4ba(0x142)](_0x38a79a));}async[a230_0x351acc(0x157)](_0x3452f0){const _0x529938=a230_0x351acc,_0x565a81=[..._0x3452f0],_0x2dfabc=[];while(_0x565a81[_0x529938(0x173)]){const _0x2a6b8f=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS']['replace']('%componentIds%',_0x565a81['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x290ed0=>'\x27'+_0x290ed0+'\x27')[_0x529938(0x171)](',')),_0x9b7b74=await this[_0x529938(0x159)][_0x529938(0x149)](_0x2a6b8f);_0x2dfabc[_0x529938(0x16b)](..._0x9b7b74[_0x529938(0x168)](_0x4414c6=>_0x4414c6['Id']));}return _0x2dfabc;}async[a230_0x351acc(0x137)](_0x614dee,_0x1875e3){const _0x1e9b59=a230_0x351acc;return this['restService'][_0x1e9b59(0x163)](constants_1['FLOSUM_COMMIT'],{[constants_1['FLOSUM_NAMESPACE']+_0x1e9b59(0x15d)]:_0x1875e3,[constants_1[_0x1e9b59(0x161)]+_0x1e9b59(0x13d)]:_0x614dee['substr'](0x0,0xff),[constants_1[_0x1e9b59(0x161)]+_0x1e9b59(0x14a)]:'Completed',[constants_1[_0x1e9b59(0x151)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata(a230_0x351acc(0x14c),[salesforce_query_service_1[a230_0x351acc(0x154)],salesforce_rest_service_1[a230_0x351acc(0x13f)]])],SalesforceGitSyncService),exports[a230_0x351acc(0x132)]=SalesforceGitSyncService;