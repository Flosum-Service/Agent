const a179_0x179852=a179_0x1431;(function(_0x3b649f,_0xb6cfd9){const _0x5f271f=a179_0x1431,_0x30c520=_0x3b649f();while(!![]){try{const _0xf7f6d4=parseInt(_0x5f271f(0xe9))/0x1*(parseInt(_0x5f271f(0xd1))/0x2)+parseInt(_0x5f271f(0xfe))/0x3*(-parseInt(_0x5f271f(0xf3))/0x4)+parseInt(_0x5f271f(0xf0))/0x5+-parseInt(_0x5f271f(0xdb))/0x6+parseInt(_0x5f271f(0x110))/0x7+parseInt(_0x5f271f(0x102))/0x8*(parseInt(_0x5f271f(0xd0))/0x9)+parseInt(_0x5f271f(0xea))/0xa;if(_0xf7f6d4===_0xb6cfd9)break;else _0x30c520['push'](_0x30c520['shift']());}catch(_0x424754){_0x30c520['push'](_0x30c520['shift']());}}}(a179_0x41f9,0xa0641));const a179_0x7592f1=(function(){let _0x23f22e=!![];return function(_0x5cd22d,_0x863b0a){const _0xed0673=_0x23f22e?function(){const _0x2cb93c=a179_0x1431;if(_0x863b0a){const _0x2fb5b0=_0x863b0a[_0x2cb93c(0x103)](_0x5cd22d,arguments);return _0x863b0a=null,_0x2fb5b0;}}:function(){};return _0x23f22e=![],_0xed0673;};}()),a179_0x385b4f=a179_0x7592f1(this,function(){const _0x29d4ce=a179_0x1431;return a179_0x385b4f[_0x29d4ce(0xfc)]()['search'](_0x29d4ce(0x116))[_0x29d4ce(0xfc)]()[_0x29d4ce(0xe3)](a179_0x385b4f)['search']('(((.+)+)+)+$');});a179_0x385b4f();'use strict';function a179_0x41f9(){const _0x25cbe3=['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','GET_BRANCH_COMPONENTS_QUERY','Branch\x20\x22','Version__c','CRC32__c','(((.+)+)+)+$','GET_REPOSITORY_BY_NAME_QUERY','query','27WHCihC','136qTbrIm','FLOSUM_NAMESPACE','splice','GET_BRANCH_BY_NAME_QUERY','join','getComponentRecordTypes','design:paramtypes','substr','GET_COMPONENT_RECORD_TYPES_QUERY','FLOSUM_COMMIT','6318024igYYXq','Status__c','Completed','metadata','./salesforce-query.service','push','queryService','MAX_QUERY_ARRAY_ITEMS','constructor','../../../../constants','SalesforceGitSyncService','__metadata','__decorate','FLOSUM_GIT_NAMESPACE','10448oxALzC','3389090ThYwrO','replace','decorate','__esModule','Name','NotFoundError','4965285WInDfk','Repository__c','restService','48pglCYa','./salesforce-rest.service','Component_Type__c','Component_Name__c','Repository\x20\x22','\x22\x20not\x20found\x20in\x20flosum.','fetchBranchComponentsByFilenames','%componentIds%','length','toString','../queries','233421nbPrKy','function','GET_REPOSITORY_COMPONENTS_QUERY','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','205976WUJgkA','apply','%repositoryId%','SalesforceQueryService','extractFieldsFromRecord','post','fetchCommitManifestsByComponentIds','fetchRepositoryComponentsByFilenames','../utils/flosum-naming.utils','map','Service','extractComponentMetadataFromRecord','../../../../core/errors/not-found.error','%fileNames%','3667846mklpBc'];a179_0x41f9=function(){return _0x25cbe3;};return a179_0x41f9();}function a179_0x1431(_0xa6040b,_0x8bbe90){const _0x420e82=a179_0x41f9();return a179_0x1431=function(_0x385b4f,_0x7592f1){_0x385b4f=_0x385b4f-0xcf;let _0x41f93b=_0x420e82[_0x385b4f];return _0x41f93b;},a179_0x1431(_0xa6040b,_0x8bbe90);}var __decorate=this&&this[a179_0x179852(0xe7)]||function(_0x35dbc8,_0x45d055,_0x53c05e,_0x40c9d0){const _0x257d4c=a179_0x179852;var _0xae37a3=arguments[_0x257d4c(0xfb)],_0x134d55=_0xae37a3<0x3?_0x45d055:_0x40c9d0===null?_0x40c9d0=Object['getOwnPropertyDescriptor'](_0x45d055,_0x53c05e):_0x40c9d0,_0x5aa55d;if(typeof Reflect==='object'&&typeof Reflect[_0x257d4c(0xec)]===_0x257d4c(0xff))_0x134d55=Reflect[_0x257d4c(0xec)](_0x35dbc8,_0x45d055,_0x53c05e,_0x40c9d0);else{for(var _0x18b49a=_0x35dbc8[_0x257d4c(0xfb)]-0x1;_0x18b49a>=0x0;_0x18b49a--)if(_0x5aa55d=_0x35dbc8[_0x18b49a])_0x134d55=(_0xae37a3<0x3?_0x5aa55d(_0x134d55):_0xae37a3>0x3?_0x5aa55d(_0x45d055,_0x53c05e,_0x134d55):_0x5aa55d(_0x45d055,_0x53c05e))||_0x134d55;}return _0xae37a3>0x3&&_0x134d55&&Object['defineProperty'](_0x45d055,_0x53c05e,_0x134d55),_0x134d55;},__metadata=this&&this[a179_0x179852(0xe6)]||function(_0x331fb9,_0x3df199){const _0x24d036=a179_0x179852;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x24d036(0xff))return Reflect[_0x24d036(0xde)](_0x331fb9,_0x3df199);};Object['defineProperty'](exports,a179_0x179852(0xed),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a179_0x179852(0x10e)),typedi_1=require('typedi'),constants_1=require(a179_0x179852(0xe4)),queries_1=require(a179_0x179852(0xfd)),flosum_naming_utils_1=require(a179_0x179852(0x10a)),salesforce_query_service_1=require(a179_0x179852(0xdf)),salesforce_rest_service_1=require(a179_0x179852(0xf4));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x15b434,_0x175efa){const _0x2c893f=a179_0x179852;this[_0x2c893f(0xe1)]=_0x15b434,this[_0x2c893f(0xf2)]=_0x175efa,this[_0x2c893f(0xe2)]=0xc8;}['extractComponentMetadataFromRecord'](_0x3c6709){const _0x2c879b=a179_0x179852,_0x297f46=flosum_naming_utils_1[_0x2c879b(0x106)](_0x3c6709,['Component_Name__c',_0x2c879b(0xf5),'CRC32__c','File_Name__c',_0x2c879b(0x114),'Id']);return{'id':_0x297f46['Id'],'name':_0x297f46[_0x2c879b(0xf6)],'type':_0x297f46[_0x2c879b(0xf5)],'fileName':_0x297f46['File_Name__c'],'crc32':_0x297f46[_0x2c879b(0x115)],'version':+_0x297f46['Version__c']};}async['getRepositoryIdByName'](_0x42bf30){const _0x46db28=a179_0x179852,[_0x27c2e9]=await this[_0x46db28(0xe1)]['query'](queries_1[_0x46db28(0x117)]['replace']('%name%',_0x42bf30));if(!_0x27c2e9)throw new not_found_error_1[(_0x46db28(0xef))](_0x46db28(0xf7)+_0x42bf30+_0x46db28(0xf8));return _0x27c2e9['Id'];}async['getBranchIdByName'](_0x45c50e){const _0x4ce889=a179_0x179852,[_0x54ee03]=await this[_0x4ce889(0xe1)][_0x4ce889(0xcf)](queries_1[_0x4ce889(0xd4)][_0x4ce889(0xeb)]('%name%',_0x45c50e));if(!_0x54ee03)throw new not_found_error_1['NotFoundError'](_0x4ce889(0x113)+_0x45c50e+_0x4ce889(0xf8));return _0x54ee03['Id'];}async[a179_0x179852(0xd6)](){const _0x10d873=a179_0x179852,_0x1f5e50=await this[_0x10d873(0xe1)][_0x10d873(0xcf)](queries_1[_0x10d873(0xd9)]);return _0x1f5e50[_0x10d873(0x10b)](_0xff9fea=>flosum_naming_utils_1[_0x10d873(0x106)](_0xff9fea,['Id',_0x10d873(0xee)]))[_0x10d873(0x10b)](_0x3437e2=>({'id':_0x3437e2['Id'],'name':_0x3437e2['Name']}));}async[a179_0x179852(0x109)](_0x52cef1,_0x4026f7){const _0x4a0733=a179_0x179852,_0x5bf2cb=[];while(_0x52cef1['length']){const _0x30a1ec=queries_1[_0x4a0733(0x101)][_0x4a0733(0xeb)]('%fileNames%',_0x52cef1[_0x4a0733(0xd3)](0x0,this[_0x4a0733(0xe2)])[_0x4a0733(0x10b)](_0x2aa8a8=>'\x27'+_0x2aa8a8+'\x27')[_0x4a0733(0xd5)](','))[_0x4a0733(0xeb)](_0x4a0733(0x104),_0x4026f7),_0x10c998=await this[_0x4a0733(0xe1)][_0x4a0733(0xcf)](_0x30a1ec);_0x5bf2cb[_0x4a0733(0xe0)](..._0x10c998);}return _0x5bf2cb[_0x4a0733(0x10b)](_0x31e60e=>this[_0x4a0733(0x10d)](_0x31e60e));}async[a179_0x179852(0xf9)](_0x47118c,_0x170ed7){const _0x5bff1e=a179_0x179852,_0x45e84f=[];while(_0x47118c[_0x5bff1e(0xfb)]){const _0x26a110=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x5bff1e(0xeb)](_0x5bff1e(0x10f),_0x47118c[_0x5bff1e(0xd3)](0x0,this[_0x5bff1e(0xe2)])[_0x5bff1e(0x10b)](_0xc65512=>'\x27'+_0xc65512+'\x27')[_0x5bff1e(0xd5)](','))[_0x5bff1e(0xeb)]('%branchId%',_0x170ed7),_0x3e5fdd=await this[_0x5bff1e(0xe1)][_0x5bff1e(0xcf)](_0x26a110);_0x45e84f['push'](..._0x3e5fdd);}return _0x45e84f['map'](_0x424de4=>this[_0x5bff1e(0x10d)](_0x424de4));}async['fetchRepositoryComponents'](_0x1e37bc){const _0x24c3dc=a179_0x179852,_0x486610=queries_1[_0x24c3dc(0x100)][_0x24c3dc(0xeb)](_0x24c3dc(0x104),_0x1e37bc),_0x39a9d1=await this['queryService']['query'](_0x486610);return _0x39a9d1[_0x24c3dc(0x10b)](_0x520bb2=>this[_0x24c3dc(0x10d)](_0x520bb2));}async['fetchBranchComponents'](_0x121870){const _0xef37cf=a179_0x179852,_0x5c79d6=queries_1[_0xef37cf(0x112)][_0xef37cf(0xeb)]('%branchId%',_0x121870),_0x4a8f13=await this[_0xef37cf(0xe1)][_0xef37cf(0xcf)](_0x5c79d6);return _0x4a8f13['map'](_0x2d2b63=>this[_0xef37cf(0x10d)](_0x2d2b63));}async[a179_0x179852(0x108)](_0x3d7494){const _0x4df0cd=a179_0x179852,_0x913978=[..._0x3d7494],_0x318c0c=[];while(_0x913978[_0x4df0cd(0xfb)]){const _0x4cb88e=queries_1[_0x4df0cd(0x111)][_0x4df0cd(0xeb)](_0x4df0cd(0xfa),_0x913978[_0x4df0cd(0xd3)](0x0,this[_0x4df0cd(0xe2)])[_0x4df0cd(0x10b)](_0x4d4752=>'\x27'+_0x4d4752+'\x27')[_0x4df0cd(0xd5)](',')),_0x4b6253=await this[_0x4df0cd(0xe1)][_0x4df0cd(0xcf)](_0x4cb88e);_0x318c0c['push'](..._0x4b6253[_0x4df0cd(0x10b)](_0x5b9596=>_0x5b9596['Id']));}return _0x318c0c;}async['createCommit'](_0x1d8493,_0x19a98f){const _0x34dd44=a179_0x179852;return this[_0x34dd44(0xf2)][_0x34dd44(0x107)](constants_1[_0x34dd44(0xda)],{[constants_1['FLOSUM_NAMESPACE']+_0x34dd44(0xf1)]:_0x19a98f,[constants_1[_0x34dd44(0xd2)]+'Commit_Name__c']:_0x1d8493[_0x34dd44(0xd8)](0x0,0xff),[constants_1[_0x34dd44(0xd2)]+_0x34dd44(0xdc)]:_0x34dd44(0xdd),[constants_1[_0x34dd44(0xe8)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a179_0x179852(0x10c)](),__metadata(a179_0x179852(0xd7),[salesforce_query_service_1[a179_0x179852(0x105)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a179_0x179852(0xe5)]=SalesforceGitSyncService;