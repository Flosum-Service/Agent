const a231_0x5e6779=a231_0x2d57;(function(_0x5d9049,_0x48687d){const _0x235ccb=a231_0x2d57,_0x5257bd=_0x5d9049();while(!![]){try{const _0x11d350=parseInt(_0x235ccb(0x9a))/0x1+-parseInt(_0x235ccb(0xa1))/0x2+parseInt(_0x235ccb(0x8a))/0x3+-parseInt(_0x235ccb(0xa3))/0x4+-parseInt(_0x235ccb(0x96))/0x5+parseInt(_0x235ccb(0xcd))/0x6+parseInt(_0x235ccb(0xc6))/0x7;if(_0x11d350===_0x48687d)break;else _0x5257bd['push'](_0x5257bd['shift']());}catch(_0x36b092){_0x5257bd['push'](_0x5257bd['shift']());}}}(a231_0x4470,0xd1073));function a231_0x2d57(_0x3a41f3,_0x1e5d5a){const _0x3de57f=a231_0x4470();return a231_0x2d57=function(_0x2f4098,_0x3e8286){_0x2f4098=_0x2f4098-0x85;let _0x4470de=_0x3de57f[_0x2f4098];return _0x4470de;},a231_0x2d57(_0x3a41f3,_0x1e5d5a);}const a231_0x3e8286=(function(){let _0x1ec6c5=!![];return function(_0x151c37,_0x48bb51){const _0x382d2a=_0x1ec6c5?function(){if(_0x48bb51){const _0x52eefb=_0x48bb51['apply'](_0x151c37,arguments);return _0x48bb51=null,_0x52eefb;}}:function(){};return _0x1ec6c5=![],_0x382d2a;};}()),a231_0x2f4098=a231_0x3e8286(this,function(){const _0x3527b6=a231_0x2d57;return a231_0x2f4098[_0x3527b6(0x98)]()['search'](_0x3527b6(0xb4))[_0x3527b6(0x98)]()[_0x3527b6(0x9b)](a231_0x2f4098)[_0x3527b6(0xcb)](_0x3527b6(0xb4));});a231_0x2f4098();'use strict';var __decorate=this&&this[a231_0x5e6779(0x97)]||function(_0x479bbe,_0x2ddd0c,_0x1ee0a7,_0x299316){const _0x1d87d5=a231_0x5e6779;var _0x192da3=arguments[_0x1d87d5(0x89)],_0x93f6b8=_0x192da3<0x3?_0x2ddd0c:_0x299316===null?_0x299316=Object[_0x1d87d5(0x8d)](_0x2ddd0c,_0x1ee0a7):_0x299316,_0x3481f5;if(typeof Reflect==='object'&&typeof Reflect[_0x1d87d5(0x8e)]===_0x1d87d5(0x8c))_0x93f6b8=Reflect[_0x1d87d5(0x8e)](_0x479bbe,_0x2ddd0c,_0x1ee0a7,_0x299316);else{for(var _0x217baf=_0x479bbe[_0x1d87d5(0x89)]-0x1;_0x217baf>=0x0;_0x217baf--)if(_0x3481f5=_0x479bbe[_0x217baf])_0x93f6b8=(_0x192da3<0x3?_0x3481f5(_0x93f6b8):_0x192da3>0x3?_0x3481f5(_0x2ddd0c,_0x1ee0a7,_0x93f6b8):_0x3481f5(_0x2ddd0c,_0x1ee0a7))||_0x93f6b8;}return _0x192da3>0x3&&_0x93f6b8&&Object['defineProperty'](_0x2ddd0c,_0x1ee0a7,_0x93f6b8),_0x93f6b8;},__metadata=this&&this['__metadata']||function(_0xca96e2,_0x9b4f63){const _0x10a10e=a231_0x5e6779;if(typeof Reflect===_0x10a10e(0xc9)&&typeof Reflect['metadata']===_0x10a10e(0x8c))return Reflect[_0x10a10e(0xa4)](_0xca96e2,_0x9b4f63);};Object['defineProperty'](exports,a231_0x5e6779(0xbf),{'value':!![]}),exports[a231_0x5e6779(0x93)]=void 0x0;const not_found_error_1=require(a231_0x5e6779(0xb1)),typedi_1=require('typedi'),constants_1=require(a231_0x5e6779(0xc8)),queries_1=require(a231_0x5e6779(0xab)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a231_0x5e6779(0xbd)),salesforce_rest_service_1=require(a231_0x5e6779(0xc4));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x441f94,_0x3ab241){const _0x30a890=a231_0x5e6779;this[_0x30a890(0x8b)]=_0x441f94,this[_0x30a890(0x87)]=_0x3ab241,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a231_0x5e6779(0xc5)](_0x2e6ac2){const _0x3951da=a231_0x5e6779,_0x4c97ee=(0x0,flosum_naming_utils_1[_0x3951da(0xb5)])(_0x2e6ac2,[_0x3951da(0xc2),_0x3951da(0xa9),_0x3951da(0xba),_0x3951da(0x90),_0x3951da(0x86),'Id']);return{'id':_0x4c97ee['Id'],'name':_0x4c97ee[_0x3951da(0xc2)],'type':_0x4c97ee['Component_Type__c'],'fileName':_0x4c97ee[_0x3951da(0x90)],'crc32':_0x4c97ee[_0x3951da(0xba)],'version':+_0x4c97ee[_0x3951da(0x86)]};}async[a231_0x5e6779(0xb6)](_0x457bfc){const _0x6dbb91=a231_0x5e6779,[_0x269edd]=await this[_0x6dbb91(0x8b)][_0x6dbb91(0x88)](queries_1[_0x6dbb91(0xc3)][_0x6dbb91(0x95)](_0x6dbb91(0x9c),_0x457bfc));if(!_0x269edd)throw new not_found_error_1[(_0x6dbb91(0xb7))](_0x6dbb91(0xa6)+_0x457bfc+_0x6dbb91(0x9f));return _0x269edd['Id'];}async[a231_0x5e6779(0xac)](_0x1b1f55){const _0x55a032=a231_0x5e6779,[_0x5070a1]=await this['queryService'][_0x55a032(0x88)](queries_1[_0x55a032(0xa5)][_0x55a032(0x95)](_0x55a032(0x9c),_0x1b1f55));if(!_0x5070a1)throw new not_found_error_1[(_0x55a032(0xb7))](_0x55a032(0xbe)+_0x1b1f55+_0x55a032(0x9f));return _0x5070a1['Id'];}async['getComponentRecordTypes'](){const _0x45975f=a231_0x5e6779,_0x5e78dc=await this[_0x45975f(0x8b)][_0x45975f(0x88)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x5e78dc[_0x45975f(0xa2)](_0x131d31=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x131d31,['Id','Name']))[_0x45975f(0xa2)](_0x4fbf95=>({'id':_0x4fbf95['Id'],'name':_0x4fbf95[_0x45975f(0xbc)]}));}async[a231_0x5e6779(0xae)](_0x1091dd,_0x2ab073){const _0x1b7513=a231_0x5e6779,_0x3f2a85=[];while(_0x1091dd['length']){const _0x5b5950=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x1b7513(0x95)](_0x1b7513(0xcc),_0x1091dd[_0x1b7513(0xbb)](0x0,this[_0x1b7513(0x9e)])[_0x1b7513(0xa2)](_0x2ea09a=>'\x27'+_0x2ea09a+'\x27')[_0x1b7513(0xaf)](','))[_0x1b7513(0x95)](_0x1b7513(0xc7),_0x2ab073),_0x202b84=await this['queryService'][_0x1b7513(0x88)](_0x5b5950);_0x3f2a85[_0x1b7513(0x85)](..._0x202b84);}return _0x3f2a85[_0x1b7513(0xa2)](_0x493cd2=>this[_0x1b7513(0xc5)](_0x493cd2));}async['fetchBranchComponentsByFilenames'](_0x592d71,_0x578697){const _0x5931c2=a231_0x5e6779,_0x2da04d=[];while(_0x592d71[_0x5931c2(0x89)]){const _0xc20d1=queries_1[_0x5931c2(0xad)][_0x5931c2(0x95)]('%fileNames%',_0x592d71[_0x5931c2(0xbb)](0x0,this[_0x5931c2(0x9e)])[_0x5931c2(0xa2)](_0x274386=>'\x27'+_0x274386+'\x27')[_0x5931c2(0xaf)](','))[_0x5931c2(0x95)](_0x5931c2(0x8f),_0x578697),_0x1ceb1d=await this[_0x5931c2(0x8b)][_0x5931c2(0x88)](_0xc20d1);_0x2da04d[_0x5931c2(0x85)](..._0x1ceb1d);}return _0x2da04d[_0x5931c2(0xa2)](_0xb16f69=>this[_0x5931c2(0xc5)](_0xb16f69));}async['fetchRepositoryComponents'](_0x5344bd){const _0x56be92=a231_0x5e6779,_0x4e1d74=queries_1[_0x56be92(0x92)]['replace']('%repositoryId%',_0x5344bd),_0x5b1efa=await this[_0x56be92(0x8b)][_0x56be92(0x88)](_0x4e1d74);return _0x5b1efa['map'](_0xbe26d9=>this[_0x56be92(0xc5)](_0xbe26d9));}async[a231_0x5e6779(0x91)](_0x5884d3){const _0x336e56=a231_0x5e6779,_0x3c865=queries_1[_0x336e56(0xc0)][_0x336e56(0x95)](_0x336e56(0x8f),_0x5884d3),_0x109e59=await this[_0x336e56(0x8b)]['query'](_0x3c865);return _0x109e59[_0x336e56(0xa2)](_0x48f8a2=>this[_0x336e56(0xc5)](_0x48f8a2));}async[a231_0x5e6779(0x9d)](_0x13c4e6){const _0x41bf7b=a231_0x5e6779,_0x1fcfa4=[..._0x13c4e6],_0x4d38c1=[];while(_0x1fcfa4[_0x41bf7b(0x89)]){const _0x7e708d=queries_1[_0x41bf7b(0xb2)][_0x41bf7b(0x95)](_0x41bf7b(0x94),_0x1fcfa4[_0x41bf7b(0xbb)](0x0,this[_0x41bf7b(0x9e)])[_0x41bf7b(0xa2)](_0x73947c=>'\x27'+_0x73947c+'\x27')['join'](',')),_0x58d46b=await this[_0x41bf7b(0x8b)][_0x41bf7b(0x88)](_0x7e708d);_0x4d38c1[_0x41bf7b(0x85)](..._0x58d46b[_0x41bf7b(0xa2)](_0x4ea161=>_0x4ea161['Id']));}return _0x4d38c1;}async[a231_0x5e6779(0xa0)](_0x547a3b,_0x320ce1){const _0x1f8b54=a231_0x5e6779;return this[_0x1f8b54(0x87)][_0x1f8b54(0xaa)](constants_1[_0x1f8b54(0xb8)],{[constants_1['FLOSUM_NAMESPACE']+_0x1f8b54(0x99)]:_0x320ce1,[constants_1[_0x1f8b54(0xb0)]+_0x1f8b54(0xa8)]:_0x547a3b['substr'](0x0,0xff),[constants_1[_0x1f8b54(0xb0)]+_0x1f8b54(0xc1)]:_0x1f8b54(0xb3),[constants_1['FLOSUM_GIT_NAMESPACE']+'Is_From_Agent__c']:!![]});}};function a231_0x4470(){const _0x5a3d3f=['Branch\x20\x22','__esModule','GET_BRANCH_COMPONENTS_QUERY','Status__c','Component_Name__c','GET_REPOSITORY_BY_NAME_QUERY','./salesforce-rest.service','extractComponentMetadataFromRecord','27125wxCSal','%repositoryId%','../../../../constants','object','design:paramtypes','search','%fileNames%','4956174oHPjIJ','push','Version__c','restService','query','length','3434292snNmPd','queryService','function','getOwnPropertyDescriptor','decorate','%branchId%','File_Name__c','fetchBranchComponents','GET_REPOSITORY_COMPONENTS_QUERY','SalesforceGitSyncService','%componentIds%','replace','890120GxTptW','__decorate','toString','Repository__c','7029xzgoGu','constructor','%name%','fetchCommitManifestsByComponentIds','MAX_QUERY_ARRAY_ITEMS','\x22\x20not\x20found\x20in\x20flosum.','createCommit','1742308ORGLnw','map','305360cikbhq','metadata','GET_BRANCH_BY_NAME_QUERY','Repository\x20\x22','SalesforceRestService','Commit_Name__c','Component_Type__c','post','../queries','getBranchIdByName','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','fetchRepositoryComponentsByFilenames','join','FLOSUM_NAMESPACE','../../../../core/errors/not-found.error','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','Completed','(((.+)+)+)+$','extractFieldsFromRecord','getRepositoryIdByName','NotFoundError','FLOSUM_COMMIT','Service','CRC32__c','splice','Name','./salesforce-query.service'];a231_0x4470=function(){return _0x5a3d3f;};return a231_0x4470();}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a231_0x5e6779(0xb9)])(),__metadata(a231_0x5e6779(0xca),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a231_0x5e6779(0xa7)]])],SalesforceGitSyncService),exports[a231_0x5e6779(0x93)]=SalesforceGitSyncService;