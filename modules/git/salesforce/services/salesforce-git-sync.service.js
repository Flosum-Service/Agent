const a274_0x3d31ac=a274_0x2098;function a274_0x1c08(){const _0xeea038=['FLOSUM_COMMIT','9mAJLGF','8BbdjKY','GET_COMPONENT_RECORD_TYPES_QUERY','toString','./salesforce-rest.service','GET_REPOSITORY_BY_NAME_QUERY','length','Completed','decorate','595095QqRmKA','__metadata','getOwnPropertyDescriptor','fetchRepositoryComponentsByFilenames','../queries','SalesforceGitSyncService','33781ZjuHak','FLOSUM_NAMESPACE','\x22\x20not\x20found\x20in\x20flosum.','substr','%fileNames%','Branch\x20\x22','fetchRepositoryComponents','getRepositoryIdByName','../utils/flosum-naming.utils','Component_Name__c','Repository\x20\x22','MAX_QUERY_ARRAY_ITEMS','object','function','762972XQimGa','1108760ayNciT','extractFieldsFromRecord','typedi','Is_From_Agent__c','map','defineProperty','GET_BRANCH_BY_NAME_QUERY','restService','join','../../../../core/errors/not-found.error','(((.+)+)+)+$','search','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','metadata','post','%name%','__esModule','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','extractComponentMetadataFromRecord','SalesforceRestService','replace','317910hRHzrU','fetchBranchComponents','CRC32__c','Name','query','getComponentRecordTypes','NotFoundError','67470xUvSpa','Version__c','__decorate','Commit_Name__c','SalesforceQueryService','GET_BRANCH_COMPONENTS_QUERY','Component_Type__c','%componentIds%','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','queryService','File_Name__c','../../../../constants','FLOSUM_GIT_NAMESPACE','./salesforce-query.service','push','1609559vwqzgh','%repositoryId%','splice'];a274_0x1c08=function(){return _0xeea038;};return a274_0x1c08();}(function(_0x27e47e,_0x121235){const _0xae66c6=a274_0x2098,_0x57d2dd=_0x27e47e();while(!![]){try{const _0x13bea9=parseInt(_0xae66c6(0x13c))/0x1+-parseInt(_0xae66c6(0x167))/0x2+-parseInt(_0xae66c6(0x14a))/0x3+parseInt(_0xae66c6(0x17b))/0x4*(parseInt(_0xae66c6(0x136))/0x5)+parseInt(_0xae66c6(0x160))/0x6+parseInt(_0xae66c6(0x176))/0x7+-parseInt(_0xae66c6(0x14b))/0x8*(parseInt(_0xae66c6(0x17a))/0x9);if(_0x13bea9===_0x121235)break;else _0x57d2dd['push'](_0x57d2dd['shift']());}catch(_0x10b322){_0x57d2dd['push'](_0x57d2dd['shift']());}}}(a274_0x1c08,0x1f457));const a274_0x28e904=(function(){let _0x54451f=!![];return function(_0x5a608f,_0x1fadbf){const _0x2cce5f=_0x54451f?function(){if(_0x1fadbf){const _0x13dc37=_0x1fadbf['apply'](_0x5a608f,arguments);return _0x1fadbf=null,_0x13dc37;}}:function(){};return _0x54451f=![],_0x2cce5f;};}()),a274_0x1eff25=a274_0x28e904(this,function(){const _0x31b985=a274_0x2098;return a274_0x1eff25[_0x31b985(0x130)]()[_0x31b985(0x156)](_0x31b985(0x155))[_0x31b985(0x130)]()['constructor'](a274_0x1eff25)[_0x31b985(0x156)](_0x31b985(0x155));});a274_0x1eff25();'use strict';var __decorate=this&&this[a274_0x3d31ac(0x169)]||function(_0x250f9c,_0x5c7129,_0x2fafa4,_0x375a03){const _0x26e851=a274_0x3d31ac;var _0x406adb=arguments[_0x26e851(0x133)],_0x45c756=_0x406adb<0x3?_0x5c7129:_0x375a03===null?_0x375a03=Object[_0x26e851(0x138)](_0x5c7129,_0x2fafa4):_0x375a03,_0x139269;if(typeof Reflect===_0x26e851(0x148)&&typeof Reflect[_0x26e851(0x135)]===_0x26e851(0x149))_0x45c756=Reflect[_0x26e851(0x135)](_0x250f9c,_0x5c7129,_0x2fafa4,_0x375a03);else{for(var _0x55021b=_0x250f9c[_0x26e851(0x133)]-0x1;_0x55021b>=0x0;_0x55021b--)if(_0x139269=_0x250f9c[_0x55021b])_0x45c756=(_0x406adb<0x3?_0x139269(_0x45c756):_0x406adb>0x3?_0x139269(_0x5c7129,_0x2fafa4,_0x45c756):_0x139269(_0x5c7129,_0x2fafa4))||_0x45c756;}return _0x406adb>0x3&&_0x45c756&&Object['defineProperty'](_0x5c7129,_0x2fafa4,_0x45c756),_0x45c756;},__metadata=this&&this[a274_0x3d31ac(0x137)]||function(_0x461996,_0x57bc1e){const _0x2cd6f1=a274_0x3d31ac;if(typeof Reflect===_0x2cd6f1(0x148)&&typeof Reflect[_0x2cd6f1(0x158)]===_0x2cd6f1(0x149))return Reflect[_0x2cd6f1(0x158)](_0x461996,_0x57bc1e);};function a274_0x2098(_0x2ac653,_0x26812e){const _0x2c1f12=a274_0x1c08();return a274_0x2098=function(_0x1eff25,_0x28e904){_0x1eff25=_0x1eff25-0x130;let _0x1c0819=_0x2c1f12[_0x1eff25];return _0x1c0819;},a274_0x2098(_0x2ac653,_0x26812e);}Object[a274_0x3d31ac(0x150)](exports,a274_0x3d31ac(0x15b),{'value':!![]}),exports[a274_0x3d31ac(0x13b)]=void 0x0;const not_found_error_1=require(a274_0x3d31ac(0x154)),typedi_1=require(a274_0x3d31ac(0x14d)),constants_1=require(a274_0x3d31ac(0x172)),queries_1=require(a274_0x3d31ac(0x13a)),flosum_naming_utils_1=require(a274_0x3d31ac(0x144)),salesforce_query_service_1=require(a274_0x3d31ac(0x174)),salesforce_rest_service_1=require(a274_0x3d31ac(0x131));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1cafdf,_0x44c542){const _0x217cf3=a274_0x3d31ac;this[_0x217cf3(0x170)]=_0x1cafdf,this[_0x217cf3(0x152)]=_0x44c542,this[_0x217cf3(0x147)]=0xc8;}['extractComponentMetadataFromRecord'](_0x494c36){const _0x2d6c77=a274_0x3d31ac,_0x244c69=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x494c36,[_0x2d6c77(0x145),_0x2d6c77(0x16d),'CRC32__c',_0x2d6c77(0x171),'Version__c','Id']);return{'id':_0x244c69['Id'],'name':_0x244c69[_0x2d6c77(0x145)],'type':_0x244c69[_0x2d6c77(0x16d)],'fileName':_0x244c69[_0x2d6c77(0x171)],'crc32':_0x244c69[_0x2d6c77(0x162)],'version':+_0x244c69[_0x2d6c77(0x168)]};}async[a274_0x3d31ac(0x143)](_0x48ff6d){const _0x2578dc=a274_0x3d31ac,[_0x36d7ff]=await this['queryService'][_0x2578dc(0x164)](queries_1[_0x2578dc(0x132)][_0x2578dc(0x15f)](_0x2578dc(0x15a),_0x48ff6d));if(!_0x36d7ff)throw new not_found_error_1[(_0x2578dc(0x166))](_0x2578dc(0x146)+_0x48ff6d+_0x2578dc(0x13e));return _0x36d7ff['Id'];}async['getBranchIdByName'](_0x591279){const _0x5a0423=a274_0x3d31ac,[_0x3b59a0]=await this[_0x5a0423(0x170)][_0x5a0423(0x164)](queries_1[_0x5a0423(0x151)][_0x5a0423(0x15f)](_0x5a0423(0x15a),_0x591279));if(!_0x3b59a0)throw new not_found_error_1[(_0x5a0423(0x166))](_0x5a0423(0x141)+_0x591279+_0x5a0423(0x13e));return _0x3b59a0['Id'];}async[a274_0x3d31ac(0x165)](){const _0x19d96a=a274_0x3d31ac,_0x33c1b8=await this[_0x19d96a(0x170)][_0x19d96a(0x164)](queries_1[_0x19d96a(0x17c)]);return _0x33c1b8[_0x19d96a(0x14f)](_0x33eaa6=>(0x0,flosum_naming_utils_1[_0x19d96a(0x14c)])(_0x33eaa6,['Id',_0x19d96a(0x163)]))[_0x19d96a(0x14f)](_0x7b334b=>({'id':_0x7b334b['Id'],'name':_0x7b334b['Name']}));}async[a274_0x3d31ac(0x139)](_0x524a90,_0x122992){const _0x59c631=a274_0x3d31ac,_0x167402=[];while(_0x524a90[_0x59c631(0x133)]){const _0x5afe70=queries_1[_0x59c631(0x16f)][_0x59c631(0x15f)](_0x59c631(0x140),_0x524a90[_0x59c631(0x178)](0x0,this[_0x59c631(0x147)])[_0x59c631(0x14f)](_0x110818=>'\x27'+_0x110818+'\x27')[_0x59c631(0x153)](','))[_0x59c631(0x15f)](_0x59c631(0x177),_0x122992),_0x113725=await this['queryService'][_0x59c631(0x164)](_0x5afe70);_0x167402[_0x59c631(0x175)](..._0x113725);}return _0x167402[_0x59c631(0x14f)](_0x52d4b6=>this[_0x59c631(0x15d)](_0x52d4b6));}async['fetchBranchComponentsByFilenames'](_0x7f48cd,_0x25b154){const _0x31ffa6=a274_0x3d31ac,_0x33508c=[];while(_0x7f48cd[_0x31ffa6(0x133)]){const _0x2baca4=queries_1[_0x31ffa6(0x15c)][_0x31ffa6(0x15f)](_0x31ffa6(0x140),_0x7f48cd[_0x31ffa6(0x178)](0x0,this[_0x31ffa6(0x147)])[_0x31ffa6(0x14f)](_0x122abf=>'\x27'+_0x122abf+'\x27')[_0x31ffa6(0x153)](','))[_0x31ffa6(0x15f)]('%branchId%',_0x25b154),_0xb93af=await this['queryService'][_0x31ffa6(0x164)](_0x2baca4);_0x33508c[_0x31ffa6(0x175)](..._0xb93af);}return _0x33508c[_0x31ffa6(0x14f)](_0x20fe95=>this[_0x31ffa6(0x15d)](_0x20fe95));}async[a274_0x3d31ac(0x142)](_0x54c9a8){const _0x875463=a274_0x3d31ac,_0x207cda=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x875463(0x15f)]('%repositoryId%',_0x54c9a8),_0x36bc4d=await this[_0x875463(0x170)][_0x875463(0x164)](_0x207cda);return _0x36bc4d[_0x875463(0x14f)](_0x1f6377=>this['extractComponentMetadataFromRecord'](_0x1f6377));}async[a274_0x3d31ac(0x161)](_0x37b8ff){const _0x5e966e=a274_0x3d31ac,_0x40af45=queries_1[_0x5e966e(0x16c)][_0x5e966e(0x15f)]('%branchId%',_0x37b8ff),_0x16ef4e=await this[_0x5e966e(0x170)][_0x5e966e(0x164)](_0x40af45);return _0x16ef4e[_0x5e966e(0x14f)](_0xda4c06=>this[_0x5e966e(0x15d)](_0xda4c06));}async['fetchCommitManifestsByComponentIds'](_0x449a74){const _0x1b063b=a274_0x3d31ac,_0x2c3513=[..._0x449a74],_0x120937=[];while(_0x2c3513['length']){const _0x5301e4=queries_1[_0x1b063b(0x157)][_0x1b063b(0x15f)](_0x1b063b(0x16e),_0x2c3513[_0x1b063b(0x178)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x1b063b(0x14f)](_0x21a186=>'\x27'+_0x21a186+'\x27')[_0x1b063b(0x153)](',')),_0x5911d4=await this[_0x1b063b(0x170)][_0x1b063b(0x164)](_0x5301e4);_0x120937[_0x1b063b(0x175)](..._0x5911d4[_0x1b063b(0x14f)](_0x321e03=>_0x321e03['Id']));}return _0x120937;}async['createCommit'](_0x2449f2,_0x26d653){const _0x4a0a9f=a274_0x3d31ac;return this[_0x4a0a9f(0x152)][_0x4a0a9f(0x159)](constants_1[_0x4a0a9f(0x179)],{[constants_1[_0x4a0a9f(0x13d)]+'Repository__c']:_0x26d653,[constants_1['FLOSUM_NAMESPACE']+_0x4a0a9f(0x16a)]:_0x2449f2[_0x4a0a9f(0x13f)](0x0,0xff),[constants_1[_0x4a0a9f(0x13d)]+'Status__c']:_0x4a0a9f(0x134),[constants_1[_0x4a0a9f(0x173)]+_0x4a0a9f(0x14e)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata('design:paramtypes',[salesforce_query_service_1[a274_0x3d31ac(0x16b)],salesforce_rest_service_1[a274_0x3d31ac(0x15e)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;