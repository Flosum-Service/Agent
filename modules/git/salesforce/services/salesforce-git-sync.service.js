const a274_0x4d66ec=a274_0x3966;(function(_0x2c0cb2,_0x3a23a9){const _0x4adfe4=a274_0x3966,_0x44905c=_0x2c0cb2();while(!![]){try{const _0x1e097c=-parseInt(_0x4adfe4(0x10c))/0x1*(parseInt(_0x4adfe4(0xfa))/0x2)+parseInt(_0x4adfe4(0x105))/0x3+-parseInt(_0x4adfe4(0x102))/0x4*(parseInt(_0x4adfe4(0xdd))/0x5)+-parseInt(_0x4adfe4(0xdf))/0x6*(-parseInt(_0x4adfe4(0xe3))/0x7)+-parseInt(_0x4adfe4(0x109))/0x8*(-parseInt(_0x4adfe4(0xd8))/0x9)+parseInt(_0x4adfe4(0x103))/0xa*(-parseInt(_0x4adfe4(0xd9))/0xb)+parseInt(_0x4adfe4(0xff))/0xc*(parseInt(_0x4adfe4(0xd5))/0xd);if(_0x1e097c===_0x3a23a9)break;else _0x44905c['push'](_0x44905c['shift']());}catch(_0x35dc73){_0x44905c['push'](_0x44905c['shift']());}}}(a274_0x1d69,0x42000));const a274_0x46c61e=(function(){let _0x70129=!![];return function(_0xd10967,_0x2729e3){const _0x4a7e72=_0x70129?function(){if(_0x2729e3){const _0x3053b4=_0x2729e3['apply'](_0xd10967,arguments);return _0x2729e3=null,_0x3053b4;}}:function(){};return _0x70129=![],_0x4a7e72;};}()),a274_0x413947=a274_0x46c61e(this,function(){const _0xd8d935=a274_0x3966;return a274_0x413947[_0xd8d935(0xde)]()[_0xd8d935(0x10a)](_0xd8d935(0xfd))[_0xd8d935(0xde)]()[_0xd8d935(0xc9)](a274_0x413947)[_0xd8d935(0x10a)]('(((.+)+)+)+$');});a274_0x413947();'use strict';function a274_0x1d69(){const _0x36ec87=['GET_REPOSITORY_COMPONENTS_QUERY','CRC32__c','File_Name__c','fetchBranchComponents','typedi','decorate','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','Branch\x20\x22','Component_Name__c','constructor','map','__decorate','query','getBranchIdByName','\x22\x20not\x20found\x20in\x20flosum.','restService','SalesforceQueryService','getRepositoryIdByName','FLOSUM_COMMIT','Service','Component_Type__c','8840429FzUMWe','Name','queryService','18Yvwewu','22QuuPyt','GET_COMPONENT_RECORD_TYPES_QUERY','fetchRepositoryComponents','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','5DGRvaZ','toString','786354sEkKwd','%branchId%','Is_From_Agent__c','extractFieldsFromRecord','14ibkHwI','./salesforce-query.service','MAX_QUERY_ARRAY_ITEMS','post','Commit_Name__c','%fileNames%','Version__c','NotFoundError','%repositoryId%','../utils/flosum-naming.utils','getComponentRecordTypes','design:paramtypes','extractComponentMetadataFromRecord','Repository\x20\x22','length','FLOSUM_GIT_NAMESPACE','getOwnPropertyDescriptor','Status__c','%componentIds%','./salesforce-rest.service','../../../../constants','../../../../core/errors/not-found.error','push','26JHxnBS','GET_REPOSITORY_BY_NAME_QUERY','__esModule','(((.+)+)+)+$','GET_BRANCH_COMPONENTS_QUERY','12dVJKVk','defineProperty','createCommit','249316MrhRnT','2253030yFYAYm','replace','206151KUbWGk','__metadata','%name%','join','444680jVjFXV','search','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','26059vPvekU','object','splice','SalesforceGitSyncService','FLOSUM_NAMESPACE'];a274_0x1d69=function(){return _0x36ec87;};return a274_0x1d69();}function a274_0x3966(_0x3e1e15,_0x321a0e){const _0x159e7f=a274_0x1d69();return a274_0x3966=function(_0x413947,_0x46c61e){_0x413947=_0x413947-0xc6;let _0x1d6990=_0x159e7f[_0x413947];return _0x1d6990;},a274_0x3966(_0x3e1e15,_0x321a0e);}var __decorate=this&&this[a274_0x4d66ec(0xcb)]||function(_0x452f0c,_0x2616be,_0x1d387d,_0x486621){const _0x48c00b=a274_0x4d66ec;var _0x206117=arguments[_0x48c00b(0xf1)],_0x522f81=_0x206117<0x3?_0x2616be:_0x486621===null?_0x486621=Object[_0x48c00b(0xf3)](_0x2616be,_0x1d387d):_0x486621,_0x34eb2b;if(typeof Reflect===_0x48c00b(0x10d)&&typeof Reflect[_0x48c00b(0x116)]==='function')_0x522f81=Reflect[_0x48c00b(0x116)](_0x452f0c,_0x2616be,_0x1d387d,_0x486621);else{for(var _0x37c44a=_0x452f0c['length']-0x1;_0x37c44a>=0x0;_0x37c44a--)if(_0x34eb2b=_0x452f0c[_0x37c44a])_0x522f81=(_0x206117<0x3?_0x34eb2b(_0x522f81):_0x206117>0x3?_0x34eb2b(_0x2616be,_0x1d387d,_0x522f81):_0x34eb2b(_0x2616be,_0x1d387d))||_0x522f81;}return _0x206117>0x3&&_0x522f81&&Object['defineProperty'](_0x2616be,_0x1d387d,_0x522f81),_0x522f81;},__metadata=this&&this[a274_0x4d66ec(0x106)]||function(_0x13d702,_0x4b1998){if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x13d702,_0x4b1998);};Object[a274_0x4d66ec(0x100)](exports,a274_0x4d66ec(0xfc),{'value':!![]}),exports[a274_0x4d66ec(0x10f)]=void 0x0;const not_found_error_1=require(a274_0x4d66ec(0xf8)),typedi_1=require(a274_0x4d66ec(0x115)),constants_1=require(a274_0x4d66ec(0xf7)),queries_1=require('../queries'),flosum_naming_utils_1=require(a274_0x4d66ec(0xec)),salesforce_query_service_1=require(a274_0x4d66ec(0xe4)),salesforce_rest_service_1=require(a274_0x4d66ec(0xf6));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x2c1a92,_0x67b419){const _0x1ae2a6=a274_0x4d66ec;this[_0x1ae2a6(0xd7)]=_0x2c1a92,this[_0x1ae2a6(0xcf)]=_0x67b419,this[_0x1ae2a6(0xe5)]=0xc8;}[a274_0x4d66ec(0xef)](_0x3fb38e){const _0x4cdf0e=a274_0x4d66ec,_0x4b3abb=(0x0,flosum_naming_utils_1[_0x4cdf0e(0xe2)])(_0x3fb38e,['Component_Name__c',_0x4cdf0e(0xd4),_0x4cdf0e(0x112),_0x4cdf0e(0x113),_0x4cdf0e(0xe9),'Id']);return{'id':_0x4b3abb['Id'],'name':_0x4b3abb[_0x4cdf0e(0xc8)],'type':_0x4b3abb[_0x4cdf0e(0xd4)],'fileName':_0x4b3abb[_0x4cdf0e(0x113)],'crc32':_0x4b3abb['CRC32__c'],'version':+_0x4b3abb[_0x4cdf0e(0xe9)]};}async[a274_0x4d66ec(0xd1)](_0x4d4727){const _0x5d3c6d=a274_0x4d66ec,[_0x566a89]=await this[_0x5d3c6d(0xd7)][_0x5d3c6d(0xcc)](queries_1[_0x5d3c6d(0xfb)][_0x5d3c6d(0x104)]('%name%',_0x4d4727));if(!_0x566a89)throw new not_found_error_1['NotFoundError'](_0x5d3c6d(0xf0)+_0x4d4727+'\x22\x20not\x20found\x20in\x20flosum.');return _0x566a89['Id'];}async[a274_0x4d66ec(0xcd)](_0x3594d2){const _0x539961=a274_0x4d66ec,[_0x407f23]=await this[_0x539961(0xd7)][_0x539961(0xcc)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x539961(0x104)](_0x539961(0x107),_0x3594d2));if(!_0x407f23)throw new not_found_error_1[(_0x539961(0xea))](_0x539961(0xc7)+_0x3594d2+_0x539961(0xce));return _0x407f23['Id'];}async[a274_0x4d66ec(0xed)](){const _0x3af5d8=a274_0x4d66ec,_0x229348=await this[_0x3af5d8(0xd7)][_0x3af5d8(0xcc)](queries_1[_0x3af5d8(0xda)]);return _0x229348['map'](_0x46d8f8=>(0x0,flosum_naming_utils_1[_0x3af5d8(0xe2)])(_0x46d8f8,['Id',_0x3af5d8(0xd6)]))[_0x3af5d8(0xca)](_0x3df47c=>({'id':_0x3df47c['Id'],'name':_0x3df47c[_0x3af5d8(0xd6)]}));}async['fetchRepositoryComponentsByFilenames'](_0x39d867,_0x51ab83){const _0x4b657d=a274_0x4d66ec,_0x5668e2=[];while(_0x39d867['length']){const _0x1e122b=queries_1[_0x4b657d(0xc6)][_0x4b657d(0x104)](_0x4b657d(0xe8),_0x39d867['splice'](0x0,this[_0x4b657d(0xe5)])[_0x4b657d(0xca)](_0x52d464=>'\x27'+_0x52d464+'\x27')[_0x4b657d(0x108)](','))['replace']('%repositoryId%',_0x51ab83),_0xbb81f5=await this[_0x4b657d(0xd7)]['query'](_0x1e122b);_0x5668e2[_0x4b657d(0xf9)](..._0xbb81f5);}return _0x5668e2[_0x4b657d(0xca)](_0x1e98e6=>this[_0x4b657d(0xef)](_0x1e98e6));}async['fetchBranchComponentsByFilenames'](_0xc7d88f,_0x25b300){const _0x116e19=a274_0x4d66ec,_0x1d80e4=[];while(_0xc7d88f['length']){const _0x104862=queries_1[_0x116e19(0xdc)][_0x116e19(0x104)](_0x116e19(0xe8),_0xc7d88f[_0x116e19(0x10e)](0x0,this[_0x116e19(0xe5)])[_0x116e19(0xca)](_0x5b4e82=>'\x27'+_0x5b4e82+'\x27')['join'](','))['replace'](_0x116e19(0xe0),_0x25b300),_0x364f4b=await this[_0x116e19(0xd7)][_0x116e19(0xcc)](_0x104862);_0x1d80e4['push'](..._0x364f4b);}return _0x1d80e4['map'](_0x549c8d=>this['extractComponentMetadataFromRecord'](_0x549c8d));}async[a274_0x4d66ec(0xdb)](_0x3196a7){const _0x13ceae=a274_0x4d66ec,_0x85eadf=queries_1[_0x13ceae(0x111)][_0x13ceae(0x104)](_0x13ceae(0xeb),_0x3196a7),_0x37fcb4=await this[_0x13ceae(0xd7)][_0x13ceae(0xcc)](_0x85eadf);return _0x37fcb4['map'](_0x3769a8=>this[_0x13ceae(0xef)](_0x3769a8));}async[a274_0x4d66ec(0x114)](_0x1adbff){const _0x5a75aa=a274_0x4d66ec,_0x3ade55=queries_1[_0x5a75aa(0xfe)][_0x5a75aa(0x104)]('%branchId%',_0x1adbff),_0x40be06=await this[_0x5a75aa(0xd7)][_0x5a75aa(0xcc)](_0x3ade55);return _0x40be06[_0x5a75aa(0xca)](_0x5a20ba=>this['extractComponentMetadataFromRecord'](_0x5a20ba));}async['fetchCommitManifestsByComponentIds'](_0x3ae62d){const _0x54b77f=a274_0x4d66ec,_0x539f88=[..._0x3ae62d],_0x585c41=[];while(_0x539f88[_0x54b77f(0xf1)]){const _0x2b75e5=queries_1[_0x54b77f(0x10b)][_0x54b77f(0x104)](_0x54b77f(0xf5),_0x539f88['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x54b77f(0xca)](_0x1b1436=>'\x27'+_0x1b1436+'\x27')[_0x54b77f(0x108)](',')),_0x135675=await this[_0x54b77f(0xd7)][_0x54b77f(0xcc)](_0x2b75e5);_0x585c41[_0x54b77f(0xf9)](..._0x135675['map'](_0x1c1030=>_0x1c1030['Id']));}return _0x585c41;}async[a274_0x4d66ec(0x101)](_0x5f4dd3,_0xbe3f3e){const _0x4ca2cc=a274_0x4d66ec;return this[_0x4ca2cc(0xcf)][_0x4ca2cc(0xe6)](constants_1[_0x4ca2cc(0xd2)],{[constants_1[_0x4ca2cc(0x110)]+'Repository__c']:_0xbe3f3e,[constants_1[_0x4ca2cc(0x110)]+_0x4ca2cc(0xe7)]:_0x5f4dd3['substr'](0x0,0xff),[constants_1[_0x4ca2cc(0x110)]+_0x4ca2cc(0xf4)]:'Completed',[constants_1[_0x4ca2cc(0xf2)]+_0x4ca2cc(0xe1)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a274_0x4d66ec(0xd3)])(),__metadata(a274_0x4d66ec(0xee),[salesforce_query_service_1[a274_0x4d66ec(0xd0)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a274_0x4d66ec(0x10f)]=SalesforceGitSyncService;