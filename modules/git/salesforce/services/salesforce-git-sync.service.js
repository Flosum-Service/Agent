const a230_0x4671f6=a230_0xd3a8;function a230_0xd3a8(_0xd59a5b,_0x3b4df3){const _0x27015b=a230_0x25bc();return a230_0xd3a8=function(_0x20eedc,_0x3e9b9e){_0x20eedc=_0x20eedc-0xfd;let _0x25bcc6=_0x27015b[_0x20eedc];return _0x25bcc6;},a230_0xd3a8(_0xd59a5b,_0x3b4df3);}(function(_0x56f887,_0x30961b){const _0x2c7720=a230_0xd3a8,_0x4573ec=_0x56f887();while(!![]){try{const _0x3da10b=-parseInt(_0x2c7720(0x121))/0x1*(-parseInt(_0x2c7720(0x13a))/0x2)+parseInt(_0x2c7720(0x111))/0x3*(parseInt(_0x2c7720(0x141))/0x4)+parseInt(_0x2c7720(0xff))/0x5*(parseInt(_0x2c7720(0x131))/0x6)+-parseInt(_0x2c7720(0x11d))/0x7+parseInt(_0x2c7720(0x142))/0x8+-parseInt(_0x2c7720(0x106))/0x9+-parseInt(_0x2c7720(0x11e))/0xa;if(_0x3da10b===_0x30961b)break;else _0x4573ec['push'](_0x4573ec['shift']());}catch(_0x4f3122){_0x4573ec['push'](_0x4573ec['shift']());}}}(a230_0x25bc,0x824db));const a230_0x3e9b9e=(function(){let _0x4870f7=!![];return function(_0x3d3ab5,_0x3bf8d9){const _0x416677=_0x4870f7?function(){if(_0x3bf8d9){const _0xce8ca0=_0x3bf8d9['apply'](_0x3d3ab5,arguments);return _0x3bf8d9=null,_0xce8ca0;}}:function(){};return _0x4870f7=![],_0x416677;};}()),a230_0x20eedc=a230_0x3e9b9e(this,function(){const _0x1d0174=a230_0xd3a8;return a230_0x20eedc[_0x1d0174(0x128)]()[_0x1d0174(0x144)](_0x1d0174(0x11f))[_0x1d0174(0x128)]()['constructor'](a230_0x20eedc)[_0x1d0174(0x144)]('(((.+)+)+)+$');});a230_0x20eedc();function a230_0x25bc(){const _0x9b2f90=['GET_REPOSITORY_COMPONENTS_QUERY','object','fetchBranchComponents','toString','post','typedi','%name%','map','GET_COMPONENT_RECORD_TYPES_QUERY','%repositoryId%','Commit_Name__c','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','6307734lpKGDG','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','SalesforceGitSyncService','function','NotFoundError','query','splice','./salesforce-rest.service','FLOSUM_GIT_NAMESPACE','102WKDfqc','length','Repository__c','../utils/flosum-naming.utils','restService','%fileNames%','Status__c','1697548fnIkNe','3617888EESQCZ','Is_From_Agent__c','search','metadata','File_Name__c','join','5XRvXzm','Version__c','extractFieldsFromRecord','Completed','MAX_QUERY_ARRAY_ITEMS','replace','../../../../core/errors/not-found.error','8275140LuiCim','../../../../constants','CRC32__c','Service','push','fetchRepositoryComponents','Name','getRepositoryIdByName','__metadata','./salesforce-query.service','queryService','3voFNli','createCommit','decorate','Component_Name__c','substr','extractComponentMetadataFromRecord','%componentIds%','defineProperty','fetchBranchComponentsByFilenames','getComponentRecordTypes','__decorate','SalesforceQueryService','5156473VUBiiQ','3521810xXnZxL','(((.+)+)+)+$','\x22\x20not\x20found\x20in\x20flosum.','12041jEqNqA','%branchId%','GET_BRANCH_COMPONENTS_QUERY','FLOSUM_NAMESPACE'];a230_0x25bc=function(){return _0x9b2f90;};return a230_0x25bc();}'use strict';var __decorate=this&&this[a230_0x4671f6(0x11b)]||function(_0x58196e,_0x4af2a2,_0x1f5313,_0x7ac1ef){const _0x338efc=a230_0x4671f6;var _0x4cdacf=arguments['length'],_0x2414b6=_0x4cdacf<0x3?_0x4af2a2:_0x7ac1ef===null?_0x7ac1ef=Object['getOwnPropertyDescriptor'](_0x4af2a2,_0x1f5313):_0x7ac1ef,_0x5479bd;if(typeof Reflect===_0x338efc(0x126)&&typeof Reflect[_0x338efc(0x113)]===_0x338efc(0x134))_0x2414b6=Reflect[_0x338efc(0x113)](_0x58196e,_0x4af2a2,_0x1f5313,_0x7ac1ef);else{for(var _0x338890=_0x58196e[_0x338efc(0x13b)]-0x1;_0x338890>=0x0;_0x338890--)if(_0x5479bd=_0x58196e[_0x338890])_0x2414b6=(_0x4cdacf<0x3?_0x5479bd(_0x2414b6):_0x4cdacf>0x3?_0x5479bd(_0x4af2a2,_0x1f5313,_0x2414b6):_0x5479bd(_0x4af2a2,_0x1f5313))||_0x2414b6;}return _0x4cdacf>0x3&&_0x2414b6&&Object[_0x338efc(0x118)](_0x4af2a2,_0x1f5313,_0x2414b6),_0x2414b6;},__metadata=this&&this[a230_0x4671f6(0x10e)]||function(_0x3a74ba,_0x4e7e46){const _0x4f1f1c=a230_0x4671f6;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x4f1f1c(0x134))return Reflect[_0x4f1f1c(0x145)](_0x3a74ba,_0x4e7e46);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a230_0x4671f6(0x133)]=void 0x0;const not_found_error_1=require(a230_0x4671f6(0x105)),typedi_1=require(a230_0x4671f6(0x12a)),constants_1=require(a230_0x4671f6(0x107)),queries_1=require('../queries'),flosum_naming_utils_1=require(a230_0x4671f6(0x13d)),salesforce_query_service_1=require(a230_0x4671f6(0x10f)),salesforce_rest_service_1=require(a230_0x4671f6(0x138));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x12195b,_0xd6fbb4){const _0x24ac64=a230_0x4671f6;this[_0x24ac64(0x110)]=_0x12195b,this[_0x24ac64(0x13e)]=_0xd6fbb4,this[_0x24ac64(0x103)]=0xc8;}['extractComponentMetadataFromRecord'](_0x209407){const _0x4ac241=a230_0x4671f6,_0x1d05af=(0x0,flosum_naming_utils_1[_0x4ac241(0x101)])(_0x209407,[_0x4ac241(0x114),'Component_Type__c',_0x4ac241(0x108),_0x4ac241(0xfd),_0x4ac241(0x100),'Id']);return{'id':_0x1d05af['Id'],'name':_0x1d05af[_0x4ac241(0x114)],'type':_0x1d05af['Component_Type__c'],'fileName':_0x1d05af[_0x4ac241(0xfd)],'crc32':_0x1d05af[_0x4ac241(0x108)],'version':+_0x1d05af[_0x4ac241(0x100)]};}async[a230_0x4671f6(0x10d)](_0x250269){const _0x204400=a230_0x4671f6,[_0x42ea9f]=await this['queryService'][_0x204400(0x136)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x204400(0x104)]('%name%',_0x250269));if(!_0x42ea9f)throw new not_found_error_1['NotFoundError']('Repository\x20\x22'+_0x250269+_0x204400(0x120));return _0x42ea9f['Id'];}async['getBranchIdByName'](_0x3c41b2){const _0xbadac0=a230_0x4671f6,[_0x242167]=await this[_0xbadac0(0x110)]['query'](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0xbadac0(0x104)](_0xbadac0(0x12b),_0x3c41b2));if(!_0x242167)throw new not_found_error_1[(_0xbadac0(0x135))]('Branch\x20\x22'+_0x3c41b2+_0xbadac0(0x120));return _0x242167['Id'];}async[a230_0x4671f6(0x11a)](){const _0x24f3cd=a230_0x4671f6,_0x1e94e3=await this[_0x24f3cd(0x110)][_0x24f3cd(0x136)](queries_1[_0x24f3cd(0x12d)]);return _0x1e94e3['map'](_0x4ea5c8=>(0x0,flosum_naming_utils_1[_0x24f3cd(0x101)])(_0x4ea5c8,['Id',_0x24f3cd(0x10c)]))[_0x24f3cd(0x12c)](_0x5043dc=>({'id':_0x5043dc['Id'],'name':_0x5043dc[_0x24f3cd(0x10c)]}));}async['fetchRepositoryComponentsByFilenames'](_0x43ccbd,_0x494a5e){const _0x2d14f2=a230_0x4671f6,_0x40faf8=[];while(_0x43ccbd[_0x2d14f2(0x13b)]){const _0x4d4bcb=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY']['replace'](_0x2d14f2(0x13f),_0x43ccbd[_0x2d14f2(0x137)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x2d14f2(0x12c)](_0x3888ed=>'\x27'+_0x3888ed+'\x27')[_0x2d14f2(0xfe)](','))[_0x2d14f2(0x104)]('%repositoryId%',_0x494a5e),_0x378f3d=await this[_0x2d14f2(0x110)][_0x2d14f2(0x136)](_0x4d4bcb);_0x40faf8['push'](..._0x378f3d);}return _0x40faf8[_0x2d14f2(0x12c)](_0x3d6a22=>this['extractComponentMetadataFromRecord'](_0x3d6a22));}async[a230_0x4671f6(0x119)](_0x328385,_0x1b4f35){const _0x464dbe=a230_0x4671f6,_0x432bee=[];while(_0x328385['length']){const _0x3766ab=queries_1[_0x464dbe(0x132)]['replace'](_0x464dbe(0x13f),_0x328385['splice'](0x0,this[_0x464dbe(0x103)])[_0x464dbe(0x12c)](_0x3a3326=>'\x27'+_0x3a3326+'\x27')[_0x464dbe(0xfe)](','))[_0x464dbe(0x104)](_0x464dbe(0x122),_0x1b4f35),_0x5be6ce=await this[_0x464dbe(0x110)][_0x464dbe(0x136)](_0x3766ab);_0x432bee[_0x464dbe(0x10a)](..._0x5be6ce);}return _0x432bee[_0x464dbe(0x12c)](_0x5da962=>this['extractComponentMetadataFromRecord'](_0x5da962));}async[a230_0x4671f6(0x10b)](_0x46827a){const _0x2c598c=a230_0x4671f6,_0x83e360=queries_1[_0x2c598c(0x125)]['replace'](_0x2c598c(0x12e),_0x46827a),_0x15ee84=await this[_0x2c598c(0x110)]['query'](_0x83e360);return _0x15ee84[_0x2c598c(0x12c)](_0x3c923c=>this[_0x2c598c(0x116)](_0x3c923c));}async[a230_0x4671f6(0x127)](_0xe2b1f9){const _0x54fe85=a230_0x4671f6,_0x1dea5d=queries_1[_0x54fe85(0x123)][_0x54fe85(0x104)](_0x54fe85(0x122),_0xe2b1f9),_0x5d7b20=await this[_0x54fe85(0x110)]['query'](_0x1dea5d);return _0x5d7b20['map'](_0x1c5c4a=>this['extractComponentMetadataFromRecord'](_0x1c5c4a));}async['fetchCommitManifestsByComponentIds'](_0x2b8a5e){const _0x9e30f0=a230_0x4671f6,_0x343c2c=[..._0x2b8a5e],_0x245d60=[];while(_0x343c2c[_0x9e30f0(0x13b)]){const _0xe6763a=queries_1[_0x9e30f0(0x130)][_0x9e30f0(0x104)](_0x9e30f0(0x117),_0x343c2c[_0x9e30f0(0x137)](0x0,this[_0x9e30f0(0x103)])[_0x9e30f0(0x12c)](_0x433803=>'\x27'+_0x433803+'\x27')[_0x9e30f0(0xfe)](',')),_0x73faa9=await this['queryService'][_0x9e30f0(0x136)](_0xe6763a);_0x245d60['push'](..._0x73faa9['map'](_0x3b9edb=>_0x3b9edb['Id']));}return _0x245d60;}async[a230_0x4671f6(0x112)](_0x3382c4,_0x1dcb31){const _0x470851=a230_0x4671f6;return this[_0x470851(0x13e)][_0x470851(0x129)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x470851(0x124)]+_0x470851(0x13c)]:_0x1dcb31,[constants_1['FLOSUM_NAMESPACE']+_0x470851(0x12f)]:_0x3382c4[_0x470851(0x115)](0x0,0xff),[constants_1[_0x470851(0x124)]+_0x470851(0x140)]:_0x470851(0x102),[constants_1[_0x470851(0x139)]+_0x470851(0x143)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a230_0x4671f6(0x109)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a230_0x4671f6(0x11c)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a230_0x4671f6(0x133)]=SalesforceGitSyncService;