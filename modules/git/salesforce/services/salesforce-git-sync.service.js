const a197_0x50d51c=a197_0x4333;(function(_0x218c61,_0x5325b4){const _0x27b440=a197_0x4333,_0x3fab83=_0x218c61();while(!![]){try{const _0x578e2b=-parseInt(_0x27b440(0xf2))/0x1*(-parseInt(_0x27b440(0xfd))/0x2)+parseInt(_0x27b440(0xfa))/0x3+-parseInt(_0x27b440(0xe8))/0x4+parseInt(_0x27b440(0x11b))/0x5*(-parseInt(_0x27b440(0x112))/0x6)+-parseInt(_0x27b440(0x124))/0x7+parseInt(_0x27b440(0x126))/0x8*(-parseInt(_0x27b440(0x105))/0x9)+parseInt(_0x27b440(0x109))/0xa*(parseInt(_0x27b440(0x111))/0xb);if(_0x578e2b===_0x5325b4)break;else _0x3fab83['push'](_0x3fab83['shift']());}catch(_0x48f327){_0x3fab83['push'](_0x3fab83['shift']());}}}(a197_0x22d9,0xd555d));const a197_0xb8970d=(function(){let _0x8ce8c0=!![];return function(_0x27c742,_0x3f9489){const _0xe6e3d7=_0x8ce8c0?function(){const _0x10877c=a197_0x4333;if(_0x3f9489){const _0x586685=_0x3f9489[_0x10877c(0xf7)](_0x27c742,arguments);return _0x3f9489=null,_0x586685;}}:function(){};return _0x8ce8c0=![],_0xe6e3d7;};}()),a197_0x42ca8e=a197_0xb8970d(this,function(){const _0x27553e=a197_0x4333;return a197_0x42ca8e[_0x27553e(0x128)]()[_0x27553e(0xf0)]('(((.+)+)+)+$')[_0x27553e(0x128)]()['constructor'](a197_0x42ca8e)[_0x27553e(0xf0)]('(((.+)+)+)+$');});function a197_0x4333(_0x5d9407,_0x1cdca4){const _0x36863e=a197_0x22d9();return a197_0x4333=function(_0x42ca8e,_0xb8970d){_0x42ca8e=_0x42ca8e-0xdf;let _0x22d9e4=_0x36863e[_0x42ca8e];return _0x22d9e4;},a197_0x4333(_0x5d9407,_0x1cdca4);}a197_0x42ca8e();function a197_0x22d9(){const _0x2407df=['./salesforce-rest.service','extractFieldsFromRecord','metadata','946340fsTFWl','GET_BRANCH_COMPONENTS_QUERY','join','%fileNames%','Repository\x20\x22','replace','__decorate','function','275cGOGfA','111990lWecOS','./salesforce-query.service','GET_BRANCH_BY_NAME_QUERY','query','Component_Name__c','SalesforceQueryService','MAX_QUERY_ARRAY_ITEMS','getBranchIdByName','../../../../constants','300djSxbm','push','Name','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','getComponentRecordTypes','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','Commit_Name__c','%repositoryId%','fetchBranchComponentsByFilenames','5442717KclGsF','SalesforceRestService','1384feEGvo','fetchBranchComponents','toString','../queries','\x22\x20not\x20found\x20in\x20flosum.','Component_Type__c','%branchId%','__metadata','length','typedi','Service','Repository__c','queryService','5544160KZFARh','extractComponentMetadataFromRecord','decorate','object','FLOSUM_NAMESPACE','post','SalesforceGitSyncService','fetchRepositoryComponents','search','getOwnPropertyDescriptor','49SJSRxR','__esModule','File_Name__c','splice','%componentIds%','apply','NotFoundError','restService','4562385MebcSC','GET_COMPONENT_RECORD_TYPES_QUERY','%name%','48782ZgScbH','substr','CRC32__c','createCommit','../utils/flosum-naming.utils','defineProperty','Version__c','map','48096MCypPG'];a197_0x22d9=function(){return _0x2407df;};return a197_0x22d9();}'use strict';var __decorate=this&&this[a197_0x50d51c(0x10f)]||function(_0x1f885a,_0x5454bc,_0x5a4a86,_0xe3c49d){const _0x5ed85c=a197_0x50d51c;var _0x535720=arguments[_0x5ed85c(0xe3)],_0x27e6cf=_0x535720<0x3?_0x5454bc:_0xe3c49d===null?_0xe3c49d=Object[_0x5ed85c(0xf1)](_0x5454bc,_0x5a4a86):_0xe3c49d,_0x4e850d;if(typeof Reflect===_0x5ed85c(0xeb)&&typeof Reflect['decorate']==='function')_0x27e6cf=Reflect[_0x5ed85c(0xea)](_0x1f885a,_0x5454bc,_0x5a4a86,_0xe3c49d);else{for(var _0x5b2eba=_0x1f885a['length']-0x1;_0x5b2eba>=0x0;_0x5b2eba--)if(_0x4e850d=_0x1f885a[_0x5b2eba])_0x27e6cf=(_0x535720<0x3?_0x4e850d(_0x27e6cf):_0x535720>0x3?_0x4e850d(_0x5454bc,_0x5a4a86,_0x27e6cf):_0x4e850d(_0x5454bc,_0x5a4a86))||_0x27e6cf;}return _0x535720>0x3&&_0x27e6cf&&Object[_0x5ed85c(0x102)](_0x5454bc,_0x5a4a86,_0x27e6cf),_0x27e6cf;},__metadata=this&&this[a197_0x50d51c(0xe2)]||function(_0x1e36b2,_0x5d7c4f){const _0x286dac=a197_0x50d51c;if(typeof Reflect===_0x286dac(0xeb)&&typeof Reflect[_0x286dac(0x108)]===_0x286dac(0x110))return Reflect['metadata'](_0x1e36b2,_0x5d7c4f);};Object[a197_0x50d51c(0x102)](exports,a197_0x50d51c(0xf3),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a197_0x50d51c(0xe4)),constants_1=require(a197_0x50d51c(0x11a)),queries_1=require(a197_0x50d51c(0x129)),flosum_naming_utils_1=require(a197_0x50d51c(0x101)),salesforce_query_service_1=require(a197_0x50d51c(0x113)),salesforce_rest_service_1=require(a197_0x50d51c(0x106));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x5959aa,_0x19b588){const _0x5f225e=a197_0x50d51c;this['queryService']=_0x5959aa,this[_0x5f225e(0xf9)]=_0x19b588,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a197_0x50d51c(0xe9)](_0x5ebf0){const _0x2af0d1=a197_0x50d51c,_0x5d1d8d=(0x0,flosum_naming_utils_1[_0x2af0d1(0x107)])(_0x5ebf0,[_0x2af0d1(0x116),'Component_Type__c',_0x2af0d1(0xff),_0x2af0d1(0xf4),'Version__c','Id']);return{'id':_0x5d1d8d['Id'],'name':_0x5d1d8d[_0x2af0d1(0x116)],'type':_0x5d1d8d[_0x2af0d1(0xe0)],'fileName':_0x5d1d8d[_0x2af0d1(0xf4)],'crc32':_0x5d1d8d[_0x2af0d1(0xff)],'version':+_0x5d1d8d[_0x2af0d1(0x103)]};}async['getRepositoryIdByName'](_0x204d5b){const _0x1d4878=a197_0x50d51c,[_0x5b829b]=await this[_0x1d4878(0xe7)]['query'](queries_1['GET_REPOSITORY_BY_NAME_QUERY']['replace'](_0x1d4878(0xfc),_0x204d5b));if(!_0x5b829b)throw new not_found_error_1[(_0x1d4878(0xf8))](_0x1d4878(0x10d)+_0x204d5b+'\x22\x20not\x20found\x20in\x20flosum.');return _0x5b829b['Id'];}async[a197_0x50d51c(0x119)](_0x111047){const _0x450e82=a197_0x50d51c,[_0x51eff8]=await this[_0x450e82(0xe7)][_0x450e82(0x115)](queries_1[_0x450e82(0x114)][_0x450e82(0x10e)](_0x450e82(0xfc),_0x111047));if(!_0x51eff8)throw new not_found_error_1[(_0x450e82(0xf8))]('Branch\x20\x22'+_0x111047+_0x450e82(0xdf));return _0x51eff8['Id'];}async[a197_0x50d51c(0x11f)](){const _0x1f32bd=a197_0x50d51c,_0x916e31=await this[_0x1f32bd(0xe7)]['query'](queries_1[_0x1f32bd(0xfb)]);return _0x916e31[_0x1f32bd(0x104)](_0x5c9f7a=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x5c9f7a,['Id','Name']))[_0x1f32bd(0x104)](_0x13c92c=>({'id':_0x13c92c['Id'],'name':_0x13c92c[_0x1f32bd(0x11d)]}));}async['fetchRepositoryComponentsByFilenames'](_0x77bac1,_0x50055e){const _0x5153aa=a197_0x50d51c,_0x23e42c=[];while(_0x77bac1['length']){const _0x4feed1=queries_1[_0x5153aa(0x11e)][_0x5153aa(0x10e)]('%fileNames%',_0x77bac1[_0x5153aa(0xf5)](0x0,this[_0x5153aa(0x118)])[_0x5153aa(0x104)](_0x10f2b0=>'\x27'+_0x10f2b0+'\x27')[_0x5153aa(0x10b)](','))[_0x5153aa(0x10e)](_0x5153aa(0x122),_0x50055e),_0x1809c1=await this[_0x5153aa(0xe7)][_0x5153aa(0x115)](_0x4feed1);_0x23e42c[_0x5153aa(0x11c)](..._0x1809c1);}return _0x23e42c[_0x5153aa(0x104)](_0x2d3de8=>this[_0x5153aa(0xe9)](_0x2d3de8));}async[a197_0x50d51c(0x123)](_0x561694,_0x4b9d49){const _0x14ad39=a197_0x50d51c,_0x201117=[];while(_0x561694[_0x14ad39(0xe3)]){const _0x2bdc83=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x14ad39(0x10e)](_0x14ad39(0x10c),_0x561694[_0x14ad39(0xf5)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x14ad39(0x104)](_0xbf97c9=>'\x27'+_0xbf97c9+'\x27')['join'](','))[_0x14ad39(0x10e)](_0x14ad39(0xe1),_0x4b9d49),_0x2ad702=await this['queryService'][_0x14ad39(0x115)](_0x2bdc83);_0x201117[_0x14ad39(0x11c)](..._0x2ad702);}return _0x201117[_0x14ad39(0x104)](_0x3f838e=>this[_0x14ad39(0xe9)](_0x3f838e));}async[a197_0x50d51c(0xef)](_0x3ec313){const _0x4e3d8e=a197_0x50d51c,_0x2e6f14=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x4e3d8e(0x10e)]('%repositoryId%',_0x3ec313),_0x57109d=await this[_0x4e3d8e(0xe7)][_0x4e3d8e(0x115)](_0x2e6f14);return _0x57109d['map'](_0x14e3da=>this[_0x4e3d8e(0xe9)](_0x14e3da));}async[a197_0x50d51c(0x127)](_0x9b349a){const _0x36dc09=a197_0x50d51c,_0x4c8151=queries_1[_0x36dc09(0x10a)][_0x36dc09(0x10e)](_0x36dc09(0xe1),_0x9b349a),_0x5165be=await this[_0x36dc09(0xe7)][_0x36dc09(0x115)](_0x4c8151);return _0x5165be['map'](_0x168aba=>this[_0x36dc09(0xe9)](_0x168aba));}async['fetchCommitManifestsByComponentIds'](_0x5a67d3){const _0x4a532b=a197_0x50d51c,_0x25e689=[..._0x5a67d3],_0x493c06=[];while(_0x25e689[_0x4a532b(0xe3)]){const _0x3850ed=queries_1[_0x4a532b(0x120)]['replace'](_0x4a532b(0xf6),_0x25e689[_0x4a532b(0xf5)](0x0,this[_0x4a532b(0x118)])['map'](_0x1beba6=>'\x27'+_0x1beba6+'\x27')[_0x4a532b(0x10b)](',')),_0x5d0cf2=await this['queryService']['query'](_0x3850ed);_0x493c06['push'](..._0x5d0cf2[_0x4a532b(0x104)](_0x1616d2=>_0x1616d2['Id']));}return _0x493c06;}async[a197_0x50d51c(0x100)](_0x15216b,_0x32e69e){const _0x1d4846=a197_0x50d51c;return this[_0x1d4846(0xf9)][_0x1d4846(0xed)](constants_1['FLOSUM_COMMIT'],{[constants_1['FLOSUM_NAMESPACE']+_0x1d4846(0xe6)]:_0x32e69e,[constants_1[_0x1d4846(0xec)]+_0x1d4846(0x121)]:_0x15216b[_0x1d4846(0xfe)](0x0,0xff),[constants_1[_0x1d4846(0xec)]+'Status__c']:'Completed',[constants_1['FLOSUM_GIT_NAMESPACE']+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a197_0x50d51c(0xe5)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a197_0x50d51c(0x117)],salesforce_rest_service_1[a197_0x50d51c(0x125)]])],SalesforceGitSyncService),exports[a197_0x50d51c(0xee)]=SalesforceGitSyncService;