const a236_0x2947fe=a236_0x3991;(function(_0x3c1cf0,_0x16c1fd){const _0x411dfe=a236_0x3991,_0x35f703=_0x3c1cf0();while(!![]){try{const _0x4db02d=-parseInt(_0x411dfe(0x119))/0x1+parseInt(_0x411dfe(0x13a))/0x2+-parseInt(_0x411dfe(0x13c))/0x3*(-parseInt(_0x411dfe(0x11b))/0x4)+parseInt(_0x411dfe(0x12f))/0x5+-parseInt(_0x411dfe(0x146))/0x6*(-parseInt(_0x411dfe(0x144))/0x7)+-parseInt(_0x411dfe(0x12b))/0x8*(-parseInt(_0x411dfe(0x120))/0x9)+-parseInt(_0x411dfe(0x122))/0xa*(parseInt(_0x411dfe(0x11d))/0xb);if(_0x4db02d===_0x16c1fd)break;else _0x35f703['push'](_0x35f703['shift']());}catch(_0xfc2930){_0x35f703['push'](_0x35f703['shift']());}}}(a236_0x187a,0xe85ca));const a236_0x38e5d1=(function(){let _0x4eb548=!![];return function(_0x5a5caf,_0x1cf608){const _0x586873=_0x4eb548?function(){if(_0x1cf608){const _0x57ff74=_0x1cf608['apply'](_0x5a5caf,arguments);return _0x1cf608=null,_0x57ff74;}}:function(){};return _0x4eb548=![],_0x586873;};}()),a236_0x236158=a236_0x38e5d1(this,function(){const _0x4e0b89=a236_0x3991;return a236_0x236158['toString']()[_0x4e0b89(0x151)](_0x4e0b89(0x128))[_0x4e0b89(0x148)]()[_0x4e0b89(0x152)](a236_0x236158)[_0x4e0b89(0x151)](_0x4e0b89(0x128));});a236_0x236158();'use strict';var __decorate=this&&this[a236_0x2947fe(0x145)]||function(_0x3bc1ea,_0x64d5ff,_0x272bea,_0x492308){const _0x4f402f=a236_0x2947fe;var _0x5d7f81=arguments['length'],_0x40adca=_0x5d7f81<0x3?_0x64d5ff:_0x492308===null?_0x492308=Object[_0x4f402f(0x13f)](_0x64d5ff,_0x272bea):_0x492308,_0x6d0856;if(typeof Reflect===_0x4f402f(0x12d)&&typeof Reflect[_0x4f402f(0x147)]===_0x4f402f(0x11e))_0x40adca=Reflect['decorate'](_0x3bc1ea,_0x64d5ff,_0x272bea,_0x492308);else{for(var _0x16dd46=_0x3bc1ea['length']-0x1;_0x16dd46>=0x0;_0x16dd46--)if(_0x6d0856=_0x3bc1ea[_0x16dd46])_0x40adca=(_0x5d7f81<0x3?_0x6d0856(_0x40adca):_0x5d7f81>0x3?_0x6d0856(_0x64d5ff,_0x272bea,_0x40adca):_0x6d0856(_0x64d5ff,_0x272bea))||_0x40adca;}return _0x5d7f81>0x3&&_0x40adca&&Object[_0x4f402f(0x142)](_0x64d5ff,_0x272bea,_0x40adca),_0x40adca;},__metadata=this&&this[a236_0x2947fe(0x135)]||function(_0x696c5c,_0x17af84){const _0x5eb601=a236_0x2947fe;if(typeof Reflect===_0x5eb601(0x12d)&&typeof Reflect['metadata']===_0x5eb601(0x11e))return Reflect[_0x5eb601(0x134)](_0x696c5c,_0x17af84);};function a236_0x187a(){const _0x574a34=['GET_REPOSITORY_COMPONENTS_QUERY','fetchBranchComponentsByFilenames','%repositoryId%','790562LPOppL','../../../../core/errors/not-found.error','1348BImWNc','push','2726548olZvrD','function','replace','27knOOfV','CRC32__c','140fomCIZ','getRepositoryIdByName','fetchRepositoryComponentsByFilenames','Repository__c','extractFieldsFromRecord','Status__c','(((.+)+)+)+$','../../../../constants','Service','2555528bTaEYJ','SalesforceRestService','object','%branchId%','3797115cSkQKy','Component_Type__c','Completed','fetchCommitManifestsByComponentIds','\x22\x20not\x20found\x20in\x20flosum.','metadata','__metadata','join','fetchRepositoryComponents','extractComponentMetadataFromRecord','typedi','2581920jxRNIG','splice','5907nAYrDz','./salesforce-rest.service','File_Name__c','getOwnPropertyDescriptor','getBranchIdByName','SalesforceGitSyncService','defineProperty','GET_BRANCH_BY_NAME_QUERY','21IdhBYj','__decorate','3080418zauZcj','decorate','toString','%fileNames%','length','Version__c','GET_COMPONENT_RECORD_TYPES_QUERY','./salesforce-query.service','NotFoundError','Is_From_Agent__c','Repository\x20\x22','search','constructor','GET_REPOSITORY_BY_NAME_QUERY','%name%','fetchBranchComponents','Commit_Name__c','restService','MAX_QUERY_ARRAY_ITEMS','FLOSUM_COMMIT','queryService','query','map','../queries','Name','Component_Name__c','post','__esModule','design:paramtypes','GET_BRANCH_COMPONENTS_QUERY','FLOSUM_GIT_NAMESPACE'];a236_0x187a=function(){return _0x574a34;};return a236_0x187a();}function a236_0x3991(_0x3897a6,_0x3f9a46){const _0x596cae=a236_0x187a();return a236_0x3991=function(_0x236158,_0x38e5d1){_0x236158=_0x236158-0x10d;let _0x187a66=_0x596cae[_0x236158];return _0x187a66;},a236_0x3991(_0x3897a6,_0x3f9a46);}Object[a236_0x2947fe(0x142)](exports,a236_0x2947fe(0x112),{'value':!![]}),exports[a236_0x2947fe(0x141)]=void 0x0;const not_found_error_1=require(a236_0x2947fe(0x11a)),typedi_1=require(a236_0x2947fe(0x139)),constants_1=require(a236_0x2947fe(0x129)),queries_1=require(a236_0x2947fe(0x10e)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a236_0x2947fe(0x14d)),salesforce_rest_service_1=require(a236_0x2947fe(0x13d));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x12cfcc,_0x15b12e){const _0x124bbc=a236_0x2947fe;this[_0x124bbc(0x15a)]=_0x12cfcc,this[_0x124bbc(0x157)]=_0x15b12e,this[_0x124bbc(0x158)]=0xc8;}['extractComponentMetadataFromRecord'](_0x189881){const _0x49ac1a=a236_0x2947fe,_0x10ca11=(0x0,flosum_naming_utils_1[_0x49ac1a(0x126)])(_0x189881,[_0x49ac1a(0x110),_0x49ac1a(0x130),'CRC32__c','File_Name__c',_0x49ac1a(0x14b),'Id']);return{'id':_0x10ca11['Id'],'name':_0x10ca11[_0x49ac1a(0x110)],'type':_0x10ca11['Component_Type__c'],'fileName':_0x10ca11[_0x49ac1a(0x13e)],'crc32':_0x10ca11[_0x49ac1a(0x121)],'version':+_0x10ca11[_0x49ac1a(0x14b)]};}async[a236_0x2947fe(0x123)](_0x157a6c){const _0x2361cb=a236_0x2947fe,[_0x196a72]=await this[_0x2361cb(0x15a)][_0x2361cb(0x15b)](queries_1[_0x2361cb(0x153)][_0x2361cb(0x11f)](_0x2361cb(0x154),_0x157a6c));if(!_0x196a72)throw new not_found_error_1['NotFoundError'](_0x2361cb(0x150)+_0x157a6c+'\x22\x20not\x20found\x20in\x20flosum.');return _0x196a72['Id'];}async[a236_0x2947fe(0x140)](_0x286671){const _0x5882bf=a236_0x2947fe,[_0x155bc8]=await this['queryService'][_0x5882bf(0x15b)](queries_1[_0x5882bf(0x143)][_0x5882bf(0x11f)]('%name%',_0x286671));if(!_0x155bc8)throw new not_found_error_1[(_0x5882bf(0x14e))]('Branch\x20\x22'+_0x286671+_0x5882bf(0x133));return _0x155bc8['Id'];}async['getComponentRecordTypes'](){const _0x2e462d=a236_0x2947fe,_0x3443e2=await this[_0x2e462d(0x15a)][_0x2e462d(0x15b)](queries_1[_0x2e462d(0x14c)]);return _0x3443e2[_0x2e462d(0x10d)](_0x3c66ed=>(0x0,flosum_naming_utils_1[_0x2e462d(0x126)])(_0x3c66ed,['Id',_0x2e462d(0x10f)]))[_0x2e462d(0x10d)](_0x82c22c=>({'id':_0x82c22c['Id'],'name':_0x82c22c[_0x2e462d(0x10f)]}));}async[a236_0x2947fe(0x124)](_0x2c12c3,_0x165bf){const _0x40659f=a236_0x2947fe,_0x1c7cbc=[];while(_0x2c12c3[_0x40659f(0x14a)]){const _0x349184=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x40659f(0x11f)](_0x40659f(0x149),_0x2c12c3['splice'](0x0,this[_0x40659f(0x158)])['map'](_0x1b9f52=>'\x27'+_0x1b9f52+'\x27')['join'](','))['replace']('%repositoryId%',_0x165bf),_0x21e5d6=await this[_0x40659f(0x15a)]['query'](_0x349184);_0x1c7cbc[_0x40659f(0x11c)](..._0x21e5d6);}return _0x1c7cbc[_0x40659f(0x10d)](_0x246742=>this[_0x40659f(0x138)](_0x246742));}async[a236_0x2947fe(0x117)](_0x3ec4f4,_0x47784b){const _0x5b1b54=a236_0x2947fe,_0x5ac927=[];while(_0x3ec4f4['length']){const _0x27e58e=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x5b1b54(0x11f)](_0x5b1b54(0x149),_0x3ec4f4['splice'](0x0,this[_0x5b1b54(0x158)])['map'](_0x144f71=>'\x27'+_0x144f71+'\x27')[_0x5b1b54(0x136)](','))['replace']('%branchId%',_0x47784b),_0x5c8aa9=await this[_0x5b1b54(0x15a)][_0x5b1b54(0x15b)](_0x27e58e);_0x5ac927[_0x5b1b54(0x11c)](..._0x5c8aa9);}return _0x5ac927[_0x5b1b54(0x10d)](_0x5caff1=>this[_0x5b1b54(0x138)](_0x5caff1));}async[a236_0x2947fe(0x137)](_0x46fe3e){const _0x562021=a236_0x2947fe,_0x20f3b8=queries_1[_0x562021(0x116)][_0x562021(0x11f)](_0x562021(0x118),_0x46fe3e),_0xc6ab83=await this[_0x562021(0x15a)][_0x562021(0x15b)](_0x20f3b8);return _0xc6ab83['map'](_0x14b5cf=>this[_0x562021(0x138)](_0x14b5cf));}async[a236_0x2947fe(0x155)](_0x46b0a3){const _0x345807=a236_0x2947fe,_0x400b00=queries_1[_0x345807(0x114)][_0x345807(0x11f)](_0x345807(0x12e),_0x46b0a3),_0x5bd475=await this[_0x345807(0x15a)][_0x345807(0x15b)](_0x400b00);return _0x5bd475['map'](_0x534b96=>this['extractComponentMetadataFromRecord'](_0x534b96));}async[a236_0x2947fe(0x132)](_0x5da4d9){const _0x2dca6b=a236_0x2947fe,_0x3fc533=[..._0x5da4d9],_0x283203=[];while(_0x3fc533[_0x2dca6b(0x14a)]){const _0x5be238=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x2dca6b(0x11f)]('%componentIds%',_0x3fc533[_0x2dca6b(0x13b)](0x0,this[_0x2dca6b(0x158)])[_0x2dca6b(0x10d)](_0x3ed112=>'\x27'+_0x3ed112+'\x27')['join'](',')),_0x3104a1=await this[_0x2dca6b(0x15a)]['query'](_0x5be238);_0x283203[_0x2dca6b(0x11c)](..._0x3104a1['map'](_0x382f14=>_0x382f14['Id']));}return _0x283203;}async['createCommit'](_0x328ba1,_0x2295a3){const _0x4dfc8a=a236_0x2947fe;return this[_0x4dfc8a(0x157)][_0x4dfc8a(0x111)](constants_1[_0x4dfc8a(0x159)],{[constants_1['FLOSUM_NAMESPACE']+_0x4dfc8a(0x125)]:_0x2295a3,[constants_1['FLOSUM_NAMESPACE']+_0x4dfc8a(0x156)]:_0x328ba1['substr'](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x4dfc8a(0x127)]:_0x4dfc8a(0x131),[constants_1[_0x4dfc8a(0x115)]+_0x4dfc8a(0x14f)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x2947fe(0x12a)])(),__metadata(a236_0x2947fe(0x113),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a236_0x2947fe(0x12c)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;