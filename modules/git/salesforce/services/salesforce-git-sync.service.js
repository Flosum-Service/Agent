const a236_0x1b88d8=a236_0x32aa;(function(_0x5d9f27,_0x115687){const _0x3e6799=a236_0x32aa,_0x262015=_0x5d9f27();while(!![]){try{const _0x27fde8=parseInt(_0x3e6799(0x126))/0x1*(-parseInt(_0x3e6799(0x163))/0x2)+-parseInt(_0x3e6799(0x125))/0x3*(-parseInt(_0x3e6799(0x131))/0x4)+-parseInt(_0x3e6799(0x134))/0x5+-parseInt(_0x3e6799(0x15d))/0x6+parseInt(_0x3e6799(0x12b))/0x7*(-parseInt(_0x3e6799(0x13f))/0x8)+-parseInt(_0x3e6799(0x132))/0x9*(parseInt(_0x3e6799(0x153))/0xa)+parseInt(_0x3e6799(0x162))/0xb*(parseInt(_0x3e6799(0x12c))/0xc);if(_0x27fde8===_0x115687)break;else _0x262015['push'](_0x262015['shift']());}catch(_0x582e44){_0x262015['push'](_0x262015['shift']());}}}(a236_0x1510,0xb5e60));const a236_0x275798=(function(){let _0xe9b5e6=!![];return function(_0x3b830d,_0xceec65){const _0x34567f=_0xe9b5e6?function(){const _0x125490=a236_0x32aa;if(_0xceec65){const _0x3742b9=_0xceec65[_0x125490(0x127)](_0x3b830d,arguments);return _0xceec65=null,_0x3742b9;}}:function(){};return _0xe9b5e6=![],_0x34567f;};}()),a236_0x3e00f6=a236_0x275798(this,function(){const _0x3853a2=a236_0x32aa;return a236_0x3e00f6[_0x3853a2(0x168)]()[_0x3853a2(0x14a)](_0x3853a2(0x152))[_0x3853a2(0x168)]()[_0x3853a2(0x138)](a236_0x3e00f6)['search']('(((.+)+)+)+$');});a236_0x3e00f6();'use strict';var __decorate=this&&this[a236_0x1b88d8(0x15b)]||function(_0x17480a,_0x22842a,_0x327043,_0xb71d5f){const _0xc68c92=a236_0x1b88d8;var _0x55a33f=arguments[_0xc68c92(0x161)],_0x3957ca=_0x55a33f<0x3?_0x22842a:_0xb71d5f===null?_0xb71d5f=Object[_0xc68c92(0x12a)](_0x22842a,_0x327043):_0xb71d5f,_0x3bb4d3;if(typeof Reflect===_0xc68c92(0x16c)&&typeof Reflect[_0xc68c92(0x15c)]===_0xc68c92(0x155))_0x3957ca=Reflect['decorate'](_0x17480a,_0x22842a,_0x327043,_0xb71d5f);else{for(var _0x4212c3=_0x17480a['length']-0x1;_0x4212c3>=0x0;_0x4212c3--)if(_0x3bb4d3=_0x17480a[_0x4212c3])_0x3957ca=(_0x55a33f<0x3?_0x3bb4d3(_0x3957ca):_0x55a33f>0x3?_0x3bb4d3(_0x22842a,_0x327043,_0x3957ca):_0x3bb4d3(_0x22842a,_0x327043))||_0x3957ca;}return _0x55a33f>0x3&&_0x3957ca&&Object[_0xc68c92(0x158)](_0x22842a,_0x327043,_0x3957ca),_0x3957ca;},__metadata=this&&this['__metadata']||function(_0xcf24b1,_0x5c1598){const _0x127bb3=a236_0x1b88d8;if(typeof Reflect===_0x127bb3(0x16c)&&typeof Reflect['metadata']===_0x127bb3(0x155))return Reflect['metadata'](_0xcf24b1,_0x5c1598);};function a236_0x32aa(_0x4cfca7,_0x126379){const _0x565ed0=a236_0x1510();return a236_0x32aa=function(_0x3e00f6,_0x275798){_0x3e00f6=_0x3e00f6-0x124;let _0x1510fa=_0x565ed0[_0x3e00f6];return _0x1510fa;},a236_0x32aa(_0x4cfca7,_0x126379);}function a236_0x1510(){const _0xe78a28=['defineProperty','fetchRepositoryComponents','GET_REPOSITORY_COMPONENTS_QUERY','__decorate','decorate','1936266UmCNHv','getRepositoryIdByName','%name%','Component_Type__c','length','11WKclGm','39434UkojrQ','restService','SalesforceGitSyncService','%branchId%','fetchBranchComponents','toString','./salesforce-rest.service','Name','join','object','__esModule','push','%componentIds%','663JsAwQa','17HxOPfg','apply','createCommit','File_Name__c','getOwnPropertyDescriptor','7205261sGsfAX','20856732pxxuWJ','CRC32__c','splice','Repository\x20\x22','Repository__c','21652EuNuRI','18hiNJVm','post','2389225rHPHFc','./salesforce-query.service','Is_From_Agent__c','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','constructor','query','SalesforceQueryService','Service','SalesforceRestService','FLOSUM_COMMIT','%repositoryId%','8TbfHgH','Component_Name__c','extractFieldsFromRecord','replace','map','queryService','getBranchIdByName','MAX_QUERY_ARRAY_ITEMS','NotFoundError','design:paramtypes','FLOSUM_NAMESPACE','search','../queries','substr','\x22\x20not\x20found\x20in\x20flosum.','Version__c','../../../../core/errors/not-found.error','fetchBranchComponentsByFilenames','getComponentRecordTypes','(((.+)+)+)+$','121050KWJYsI','extractComponentMetadataFromRecord','function','fetchRepositoryComponentsByFilenames','GET_BRANCH_BY_NAME_QUERY'];a236_0x1510=function(){return _0xe78a28;};return a236_0x1510();}Object[a236_0x1b88d8(0x158)](exports,a236_0x1b88d8(0x16d),{'value':!![]}),exports[a236_0x1b88d8(0x165)]=void 0x0;const not_found_error_1=require(a236_0x1b88d8(0x14f)),typedi_1=require('typedi'),constants_1=require('../../../../constants'),queries_1=require(a236_0x1b88d8(0x14b)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a236_0x1b88d8(0x135)),salesforce_rest_service_1=require(a236_0x1b88d8(0x169));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x10f19c,_0x1f1406){const _0x1a3e18=a236_0x1b88d8;this[_0x1a3e18(0x144)]=_0x10f19c,this['restService']=_0x1f1406,this[_0x1a3e18(0x146)]=0xc8;}[a236_0x1b88d8(0x154)](_0x545d36){const _0x502349=a236_0x1b88d8,_0x3f2300=(0x0,flosum_naming_utils_1[_0x502349(0x141)])(_0x545d36,[_0x502349(0x140),_0x502349(0x160),_0x502349(0x12d),'File_Name__c','Version__c','Id']);return{'id':_0x3f2300['Id'],'name':_0x3f2300[_0x502349(0x140)],'type':_0x3f2300[_0x502349(0x160)],'fileName':_0x3f2300[_0x502349(0x129)],'crc32':_0x3f2300[_0x502349(0x12d)],'version':+_0x3f2300[_0x502349(0x14e)]};}async[a236_0x1b88d8(0x15e)](_0x57c34c){const _0xda296e=a236_0x1b88d8,[_0x943005]=await this[_0xda296e(0x144)][_0xda296e(0x139)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0xda296e(0x142)](_0xda296e(0x15f),_0x57c34c));if(!_0x943005)throw new not_found_error_1['NotFoundError'](_0xda296e(0x12f)+_0x57c34c+_0xda296e(0x14d));return _0x943005['Id'];}async[a236_0x1b88d8(0x145)](_0x42af2a){const _0x30148a=a236_0x1b88d8,[_0x18112f]=await this['queryService'][_0x30148a(0x139)](queries_1[_0x30148a(0x157)][_0x30148a(0x142)](_0x30148a(0x15f),_0x42af2a));if(!_0x18112f)throw new not_found_error_1[(_0x30148a(0x147))]('Branch\x20\x22'+_0x42af2a+_0x30148a(0x14d));return _0x18112f['Id'];}async[a236_0x1b88d8(0x151)](){const _0x3511ae=a236_0x1b88d8,_0x1dd8bd=await this[_0x3511ae(0x144)][_0x3511ae(0x139)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x1dd8bd[_0x3511ae(0x143)](_0x1d4a1e=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x1d4a1e,['Id',_0x3511ae(0x16a)]))[_0x3511ae(0x143)](_0x305245=>({'id':_0x305245['Id'],'name':_0x305245[_0x3511ae(0x16a)]}));}async[a236_0x1b88d8(0x156)](_0x43361c,_0x6af00e){const _0x30cf0e=a236_0x1b88d8,_0xae10b7=[];while(_0x43361c[_0x30cf0e(0x161)]){const _0x323064=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY']['replace']('%fileNames%',_0x43361c['splice'](0x0,this[_0x30cf0e(0x146)])['map'](_0x17f130=>'\x27'+_0x17f130+'\x27')[_0x30cf0e(0x16b)](','))[_0x30cf0e(0x142)](_0x30cf0e(0x13e),_0x6af00e),_0x3a3936=await this[_0x30cf0e(0x144)][_0x30cf0e(0x139)](_0x323064);_0xae10b7[_0x30cf0e(0x16e)](..._0x3a3936);}return _0xae10b7[_0x30cf0e(0x143)](_0x22bb78=>this[_0x30cf0e(0x154)](_0x22bb78));}async[a236_0x1b88d8(0x150)](_0x447639,_0x3d6de1){const _0x11f41e=a236_0x1b88d8,_0x46a53e=[];while(_0x447639['length']){const _0x16063d=queries_1[_0x11f41e(0x137)][_0x11f41e(0x142)]('%fileNames%',_0x447639[_0x11f41e(0x12e)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x11f41e(0x143)](_0x177f4e=>'\x27'+_0x177f4e+'\x27')[_0x11f41e(0x16b)](','))[_0x11f41e(0x142)](_0x11f41e(0x166),_0x3d6de1),_0x24924f=await this['queryService'][_0x11f41e(0x139)](_0x16063d);_0x46a53e['push'](..._0x24924f);}return _0x46a53e[_0x11f41e(0x143)](_0x58422a=>this[_0x11f41e(0x154)](_0x58422a));}async[a236_0x1b88d8(0x159)](_0x2bee00){const _0x28efb4=a236_0x1b88d8,_0x3d45e8=queries_1[_0x28efb4(0x15a)][_0x28efb4(0x142)](_0x28efb4(0x13e),_0x2bee00),_0x20ab62=await this[_0x28efb4(0x144)]['query'](_0x3d45e8);return _0x20ab62['map'](_0x444d95=>this[_0x28efb4(0x154)](_0x444d95));}async[a236_0x1b88d8(0x167)](_0x1be8bf){const _0x16829a=a236_0x1b88d8,_0x330d72=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x16829a(0x142)]('%branchId%',_0x1be8bf),_0x5e7317=await this['queryService'][_0x16829a(0x139)](_0x330d72);return _0x5e7317[_0x16829a(0x143)](_0x2e986e=>this[_0x16829a(0x154)](_0x2e986e));}async['fetchCommitManifestsByComponentIds'](_0x422ad6){const _0x49184b=a236_0x1b88d8,_0xfce944=[..._0x422ad6],_0x2bec10=[];while(_0xfce944['length']){const _0x4d1f33=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x49184b(0x142)](_0x49184b(0x124),_0xfce944[_0x49184b(0x12e)](0x0,this[_0x49184b(0x146)])[_0x49184b(0x143)](_0x3dd218=>'\x27'+_0x3dd218+'\x27')['join'](',')),_0x199a47=await this[_0x49184b(0x144)][_0x49184b(0x139)](_0x4d1f33);_0x2bec10[_0x49184b(0x16e)](..._0x199a47[_0x49184b(0x143)](_0x38809b=>_0x38809b['Id']));}return _0x2bec10;}async[a236_0x1b88d8(0x128)](_0x359b12,_0x28d031){const _0x4f7c4c=a236_0x1b88d8;return this[_0x4f7c4c(0x164)][_0x4f7c4c(0x133)](constants_1[_0x4f7c4c(0x13d)],{[constants_1[_0x4f7c4c(0x149)]+_0x4f7c4c(0x130)]:_0x28d031,[constants_1[_0x4f7c4c(0x149)]+'Commit_Name__c']:_0x359b12[_0x4f7c4c(0x14c)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:'Completed',[constants_1['FLOSUM_GIT_NAMESPACE']+_0x4f7c4c(0x136)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a236_0x1b88d8(0x13b)])(),__metadata(a236_0x1b88d8(0x148),[salesforce_query_service_1[a236_0x1b88d8(0x13a)],salesforce_rest_service_1[a236_0x1b88d8(0x13c)]])],SalesforceGitSyncService),exports[a236_0x1b88d8(0x165)]=SalesforceGitSyncService;