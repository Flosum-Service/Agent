const a246_0x2764a6=a246_0x37a5;(function(_0x30bff2,_0x1a5c6b){const _0x4e5bdd=a246_0x37a5,_0x57217f=_0x30bff2();while(!![]){try{const _0x17cb5e=-parseInt(_0x4e5bdd(0x1f1))/0x1+-parseInt(_0x4e5bdd(0x1e3))/0x2*(parseInt(_0x4e5bdd(0x1ff))/0x3)+parseInt(_0x4e5bdd(0x205))/0x4*(parseInt(_0x4e5bdd(0x1eb))/0x5)+parseInt(_0x4e5bdd(0x1da))/0x6*(parseInt(_0x4e5bdd(0x216))/0x7)+parseInt(_0x4e5bdd(0x1f3))/0x8*(parseInt(_0x4e5bdd(0x201))/0x9)+-parseInt(_0x4e5bdd(0x1d1))/0xa+parseInt(_0x4e5bdd(0x1e7))/0xb;if(_0x17cb5e===_0x1a5c6b)break;else _0x57217f['push'](_0x57217f['shift']());}catch(_0x3915b9){_0x57217f['push'](_0x57217f['shift']());}}}(a246_0x3f14,0x9bab2));const a246_0xb7a90c=(function(){let _0x449ff8=!![];return function(_0x5bb8c4,_0x47e818){const _0x3048d2=_0x449ff8?function(){const _0x311410=a246_0x37a5;if(_0x47e818){const _0x2a89db=_0x47e818[_0x311410(0x200)](_0x5bb8c4,arguments);return _0x47e818=null,_0x2a89db;}}:function(){};return _0x449ff8=![],_0x3048d2;};}()),a246_0x3626bb=a246_0xb7a90c(this,function(){const _0x3c3066=a246_0x37a5;return a246_0x3626bb[_0x3c3066(0x1f6)]()['search']('(((.+)+)+)+$')[_0x3c3066(0x1f6)]()[_0x3c3066(0x1e6)](a246_0x3626bb)[_0x3c3066(0x1e9)](_0x3c3066(0x1d7));});a246_0x3626bb();'use strict';function a246_0x37a5(_0x31ec8d,_0x38f6e7){const _0x21f97a=a246_0x3f14();return a246_0x37a5=function(_0x3626bb,_0xb7a90c){_0x3626bb=_0x3626bb-0x1d0;let _0x3f1440=_0x21f97a[_0x3626bb];return _0x3f1440;},a246_0x37a5(_0x31ec8d,_0x38f6e7);}var __decorate=this&&this[a246_0x2764a6(0x1fb)]||function(_0x2b15ec,_0x248e6c,_0x556a75,_0x12637c){const _0xd4448c=a246_0x2764a6;var _0x107280=arguments['length'],_0xcf84cf=_0x107280<0x3?_0x248e6c:_0x12637c===null?_0x12637c=Object[_0xd4448c(0x1d3)](_0x248e6c,_0x556a75):_0x12637c,_0x2106a6;if(typeof Reflect==='object'&&typeof Reflect[_0xd4448c(0x1e1)]==='function')_0xcf84cf=Reflect[_0xd4448c(0x1e1)](_0x2b15ec,_0x248e6c,_0x556a75,_0x12637c);else{for(var _0x2934f9=_0x2b15ec[_0xd4448c(0x20f)]-0x1;_0x2934f9>=0x0;_0x2934f9--)if(_0x2106a6=_0x2b15ec[_0x2934f9])_0xcf84cf=(_0x107280<0x3?_0x2106a6(_0xcf84cf):_0x107280>0x3?_0x2106a6(_0x248e6c,_0x556a75,_0xcf84cf):_0x2106a6(_0x248e6c,_0x556a75))||_0xcf84cf;}return _0x107280>0x3&&_0xcf84cf&&Object[_0xd4448c(0x1d2)](_0x248e6c,_0x556a75,_0xcf84cf),_0xcf84cf;},__metadata=this&&this[a246_0x2764a6(0x1d0)]||function(_0x523f62,_0x45f294){const _0x29cae6=a246_0x2764a6;if(typeof Reflect===_0x29cae6(0x1ee)&&typeof Reflect[_0x29cae6(0x21b)]===_0x29cae6(0x20a))return Reflect[_0x29cae6(0x21b)](_0x523f62,_0x45f294);};Object['defineProperty'](exports,a246_0x2764a6(0x1f8),{'value':!![]}),exports['SalesforceGitSyncService']=void 0x0;const not_found_error_1=require(a246_0x2764a6(0x206)),typedi_1=require(a246_0x2764a6(0x1fe)),constants_1=require('../../../../constants'),queries_1=require(a246_0x2764a6(0x1fc)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1a6001,_0x5a3a0d){const _0x4f82cd=a246_0x2764a6;this[_0x4f82cd(0x1de)]=_0x1a6001,this[_0x4f82cd(0x202)]=_0x5a3a0d,this[_0x4f82cd(0x1dd)]=0xc8;}[a246_0x2764a6(0x20d)](_0x5545b0){const _0xf3d906=a246_0x2764a6,_0x317155=(0x0,flosum_naming_utils_1[_0xf3d906(0x1e2)])(_0x5545b0,[_0xf3d906(0x1f9),_0xf3d906(0x1fd),_0xf3d906(0x207),_0xf3d906(0x217),_0xf3d906(0x212),'Id']);return{'id':_0x317155['Id'],'name':_0x317155[_0xf3d906(0x1f9)],'type':_0x317155[_0xf3d906(0x1fd)],'fileName':_0x317155[_0xf3d906(0x217)],'crc32':_0x317155['CRC32__c'],'version':+_0x317155['Version__c']};}async[a246_0x2764a6(0x1db)](_0x10e3ab){const _0x587378=a246_0x2764a6,[_0x58d1a4]=await this[_0x587378(0x1de)][_0x587378(0x1ed)](queries_1[_0x587378(0x219)][_0x587378(0x214)](_0x587378(0x1d9),_0x10e3ab));if(!_0x58d1a4)throw new not_found_error_1['NotFoundError']('Repository\x20\x22'+_0x10e3ab+_0x587378(0x1f2));return _0x58d1a4['Id'];}async[a246_0x2764a6(0x21a)](_0x342e94){const _0x6ef3e0=a246_0x2764a6,[_0x166604]=await this[_0x6ef3e0(0x1de)]['query'](queries_1[_0x6ef3e0(0x1ef)][_0x6ef3e0(0x214)](_0x6ef3e0(0x1d9),_0x342e94));if(!_0x166604)throw new not_found_error_1[(_0x6ef3e0(0x210))](_0x6ef3e0(0x1d4)+_0x342e94+_0x6ef3e0(0x1f2));return _0x166604['Id'];}async['getComponentRecordTypes'](){const _0x316033=a246_0x2764a6,_0x32ca4e=await this[_0x316033(0x1de)][_0x316033(0x1ed)](queries_1[_0x316033(0x1d8)]);return _0x32ca4e[_0x316033(0x1e8)](_0x3907ce=>(0x0,flosum_naming_utils_1[_0x316033(0x1e2)])(_0x3907ce,['Id',_0x316033(0x1f4)]))[_0x316033(0x1e8)](_0x40d8a2=>({'id':_0x40d8a2['Id'],'name':_0x40d8a2[_0x316033(0x1f4)]}));}async[a246_0x2764a6(0x209)](_0x240ab6,_0x235538){const _0x102f98=a246_0x2764a6,_0x3863b3=[];while(_0x240ab6['length']){const _0x2cfb8d=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x102f98(0x214)](_0x102f98(0x211),_0x240ab6[_0x102f98(0x1d6)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x102f98(0x1e8)](_0x43ea8d=>'\x27'+_0x43ea8d+'\x27')[_0x102f98(0x218)](','))[_0x102f98(0x214)](_0x102f98(0x1e0),_0x235538),_0x1c84ae=await this[_0x102f98(0x1de)][_0x102f98(0x1ed)](_0x2cfb8d);_0x3863b3[_0x102f98(0x1f0)](..._0x1c84ae);}return _0x3863b3[_0x102f98(0x1e8)](_0x2f9ced=>this[_0x102f98(0x20d)](_0x2f9ced));}async['fetchBranchComponentsByFilenames'](_0x123bda,_0x4cab7c){const _0x58566e=a246_0x2764a6,_0x49d43e=[];while(_0x123bda['length']){const _0xb47676=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x58566e(0x214)]('%fileNames%',_0x123bda['splice'](0x0,this[_0x58566e(0x1dd)])[_0x58566e(0x1e8)](_0x4c16c8=>'\x27'+_0x4c16c8+'\x27')[_0x58566e(0x218)](','))[_0x58566e(0x214)]('%branchId%',_0x4cab7c),_0x57c705=await this[_0x58566e(0x1de)][_0x58566e(0x1ed)](_0xb47676);_0x49d43e['push'](..._0x57c705);}return _0x49d43e['map'](_0x45244a=>this[_0x58566e(0x20d)](_0x45244a));}async[a246_0x2764a6(0x215)](_0x5c54de){const _0x8bbab2=a246_0x2764a6,_0x21c91e=queries_1['GET_REPOSITORY_COMPONENTS_QUERY']['replace'](_0x8bbab2(0x1e0),_0x5c54de),_0x69fd4d=await this['queryService'][_0x8bbab2(0x1ed)](_0x21c91e);return _0x69fd4d[_0x8bbab2(0x1e8)](_0x28300d=>this[_0x8bbab2(0x20d)](_0x28300d));}async[a246_0x2764a6(0x20c)](_0x335b7f){const _0x5a3bc4=a246_0x2764a6,_0x480f73=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x5a3bc4(0x214)](_0x5a3bc4(0x1e5),_0x335b7f),_0x8711ad=await this['queryService'][_0x5a3bc4(0x1ed)](_0x480f73);return _0x8711ad[_0x5a3bc4(0x1e8)](_0x1b269f=>this[_0x5a3bc4(0x20d)](_0x1b269f));}async[a246_0x2764a6(0x1f7)](_0x21a6bb){const _0xe59dc7=a246_0x2764a6,_0x2b6c21=[..._0x21a6bb],_0x442233=[];while(_0x2b6c21['length']){const _0x22b16f=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0xe59dc7(0x214)](_0xe59dc7(0x208),_0x2b6c21[_0xe59dc7(0x1d6)](0x0,this[_0xe59dc7(0x1dd)])[_0xe59dc7(0x1e8)](_0x123b8d=>'\x27'+_0x123b8d+'\x27')['join'](',')),_0x46ab7b=await this['queryService'][_0xe59dc7(0x1ed)](_0x22b16f);_0x442233[_0xe59dc7(0x1f0)](..._0x46ab7b['map'](_0x1a1004=>_0x1a1004['Id']));}return _0x442233;}async[a246_0x2764a6(0x1fa)](_0x1dc60a,_0x5ef54b){const _0x1381dc=a246_0x2764a6;return this[_0x1381dc(0x202)][_0x1381dc(0x203)](constants_1[_0x1381dc(0x213)],{[constants_1[_0x1381dc(0x204)]+'Repository__c']:_0x5ef54b,[constants_1[_0x1381dc(0x204)]+_0x1381dc(0x1dc)]:_0x1dc60a[_0x1381dc(0x1e4)](0x0,0xff),[constants_1[_0x1381dc(0x204)]+_0x1381dc(0x20e)]:'Completed',[constants_1[_0x1381dc(0x1d5)]+_0x1381dc(0x20b)]:!![]});}};function a246_0x3f14(){const _0x4bdf27=['decorate','extractFieldsFromRecord','366tEjsTD','substr','%branchId%','constructor','8623362oAiiax','map','search','Service','5747965GgmiJH','SalesforceQueryService','query','object','GET_BRANCH_BY_NAME_QUERY','push','458403yJPZio','\x22\x20not\x20found\x20in\x20flosum.','8AqOqnz','Name','design:paramtypes','toString','fetchCommitManifestsByComponentIds','__esModule','Component_Name__c','createCommit','__decorate','../queries','Component_Type__c','typedi','1389Lzqymb','apply','102006tjhzki','restService','post','FLOSUM_NAMESPACE','4cpXHXk','../../../../core/errors/not-found.error','CRC32__c','%componentIds%','fetchRepositoryComponentsByFilenames','function','Is_From_Agent__c','fetchBranchComponents','extractComponentMetadataFromRecord','Status__c','length','NotFoundError','%fileNames%','Version__c','FLOSUM_COMMIT','replace','fetchRepositoryComponents','5376XIjeBg','File_Name__c','join','GET_REPOSITORY_BY_NAME_QUERY','getBranchIdByName','metadata','__metadata','7764070OkGhkw','defineProperty','getOwnPropertyDescriptor','Branch\x20\x22','FLOSUM_GIT_NAMESPACE','splice','(((.+)+)+)+$','GET_COMPONENT_RECORD_TYPES_QUERY','%name%','96IWFhff','getRepositoryIdByName','Commit_Name__c','MAX_QUERY_ARRAY_ITEMS','queryService','SalesforceRestService','%repositoryId%'];a246_0x3f14=function(){return _0x4bdf27;};return a246_0x3f14();}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a246_0x2764a6(0x1ea)])(),__metadata(a246_0x2764a6(0x1f5),[salesforce_query_service_1[a246_0x2764a6(0x1ec)],salesforce_rest_service_1[a246_0x2764a6(0x1df)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;