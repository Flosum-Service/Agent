const a275_0x55d0b2=a275_0x5d8e;(function(_0x24ac05,_0x16559a){const _0x2955d3=a275_0x5d8e,_0xa130a5=_0x24ac05();while(!![]){try{const _0x19e5d2=-parseInt(_0x2955d3(0xae))/0x1+parseInt(_0x2955d3(0x85))/0x2*(parseInt(_0x2955d3(0x96))/0x3)+parseInt(_0x2955d3(0x9d))/0x4+-parseInt(_0x2955d3(0x76))/0x5*(parseInt(_0x2955d3(0x7a))/0x6)+-parseInt(_0x2955d3(0x80))/0x7+parseInt(_0x2955d3(0x89))/0x8+parseInt(_0x2955d3(0x8b))/0x9*(parseInt(_0x2955d3(0x83))/0xa);if(_0x19e5d2===_0x16559a)break;else _0xa130a5['push'](_0xa130a5['shift']());}catch(_0x24c093){_0xa130a5['push'](_0xa130a5['shift']());}}}(a275_0xdf5b,0x3039f));const a275_0x36abbf=(function(){let _0x51faf8=!![];return function(_0x5de91e,_0x236e76){const _0x533997=_0x51faf8?function(){const _0x36fcec=a275_0x5d8e;if(_0x236e76){const _0x26ddea=_0x236e76[_0x36fcec(0x84)](_0x5de91e,arguments);return _0x236e76=null,_0x26ddea;}}:function(){};return _0x51faf8=![],_0x533997;};}()),a275_0x39552b=a275_0x36abbf(this,function(){const _0xcb4400=a275_0x5d8e;return a275_0x39552b[_0xcb4400(0xaa)]()[_0xcb4400(0xa6)](_0xcb4400(0x8c))[_0xcb4400(0xaa)]()['constructor'](a275_0x39552b)[_0xcb4400(0xa6)](_0xcb4400(0x8c));});a275_0x39552b();'use strict';function a275_0x5d8e(_0x57f7c8,_0x423ec9){const _0x566385=a275_0xdf5b();return a275_0x5d8e=function(_0x39552b,_0x36abbf){_0x39552b=_0x39552b-0x67;let _0xdf5b6d=_0x566385[_0x39552b];return _0xdf5b6d;},a275_0x5d8e(_0x57f7c8,_0x423ec9);}var __decorate=this&&this[a275_0x55d0b2(0x8d)]||function(_0x252f4f,_0x401074,_0x5eec32,_0x3e94a2){const _0x269fa3=a275_0x55d0b2;var _0x2bad3b=arguments[_0x269fa3(0xb2)],_0xd5448f=_0x2bad3b<0x3?_0x401074:_0x3e94a2===null?_0x3e94a2=Object['getOwnPropertyDescriptor'](_0x401074,_0x5eec32):_0x3e94a2,_0x326a7e;if(typeof Reflect==='object'&&typeof Reflect[_0x269fa3(0xac)]===_0x269fa3(0x72))_0xd5448f=Reflect[_0x269fa3(0xac)](_0x252f4f,_0x401074,_0x5eec32,_0x3e94a2);else{for(var _0x437e0b=_0x252f4f['length']-0x1;_0x437e0b>=0x0;_0x437e0b--)if(_0x326a7e=_0x252f4f[_0x437e0b])_0xd5448f=(_0x2bad3b<0x3?_0x326a7e(_0xd5448f):_0x2bad3b>0x3?_0x326a7e(_0x401074,_0x5eec32,_0xd5448f):_0x326a7e(_0x401074,_0x5eec32))||_0xd5448f;}return _0x2bad3b>0x3&&_0xd5448f&&Object[_0x269fa3(0x93)](_0x401074,_0x5eec32,_0xd5448f),_0xd5448f;},__metadata=this&&this[a275_0x55d0b2(0x6c)]||function(_0x258e2c,_0x105674){if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x258e2c,_0x105674);};Object[a275_0x55d0b2(0x93)](exports,a275_0x55d0b2(0x8e),{'value':!![]}),exports[a275_0x55d0b2(0x7c)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a275_0x55d0b2(0x67)),constants_1=require(a275_0x55d0b2(0xa2)),queries_1=require(a275_0x55d0b2(0x69)),flosum_naming_utils_1=require(a275_0x55d0b2(0x9e)),salesforce_query_service_1=require(a275_0x55d0b2(0x6f)),salesforce_rest_service_1=require(a275_0x55d0b2(0x70));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x303fcb,_0x4be910){const _0x3b1a39=a275_0x55d0b2;this['queryService']=_0x303fcb,this[_0x3b1a39(0x79)]=_0x4be910,this[_0x3b1a39(0x81)]=0xc8;}[a275_0x55d0b2(0x6b)](_0x44db92){const _0x54195a=a275_0x55d0b2,_0xf96428=(0x0,flosum_naming_utils_1[_0x54195a(0xaf)])(_0x44db92,[_0x54195a(0x71),_0x54195a(0x7d),'CRC32__c',_0x54195a(0x7f),_0x54195a(0xa4),'Id']);return{'id':_0xf96428['Id'],'name':_0xf96428['Component_Name__c'],'type':_0xf96428[_0x54195a(0x7d)],'fileName':_0xf96428[_0x54195a(0x7f)],'crc32':_0xf96428[_0x54195a(0xb3)],'version':+_0xf96428[_0x54195a(0xa4)]};}async[a275_0x55d0b2(0x88)](_0x422243){const _0x2c890c=a275_0x55d0b2,[_0x10fd0e]=await this[_0x2c890c(0x99)][_0x2c890c(0x9c)](queries_1[_0x2c890c(0xa9)]['replace'](_0x2c890c(0x9a),_0x422243));if(!_0x10fd0e)throw new not_found_error_1[(_0x2c890c(0xb4))]('Repository\x20\x22'+_0x422243+'\x22\x20not\x20found\x20in\x20flosum.');return _0x10fd0e['Id'];}async[a275_0x55d0b2(0xa7)](_0x12003b){const _0x2e0b31=a275_0x55d0b2,[_0x50f8e3]=await this['queryService'][_0x2e0b31(0x9c)](queries_1[_0x2e0b31(0x91)]['replace'](_0x2e0b31(0x9a),_0x12003b));if(!_0x50f8e3)throw new not_found_error_1[(_0x2e0b31(0xb4))](_0x2e0b31(0x9b)+_0x12003b+'\x22\x20not\x20found\x20in\x20flosum.');return _0x50f8e3['Id'];}async[a275_0x55d0b2(0x8a)](){const _0x5e3b1f=a275_0x55d0b2,_0x2bdf30=await this['queryService'][_0x5e3b1f(0x9c)](queries_1[_0x5e3b1f(0xa1)]);return _0x2bdf30[_0x5e3b1f(0xa3)](_0x7a4dba=>(0x0,flosum_naming_utils_1[_0x5e3b1f(0xaf)])(_0x7a4dba,['Id','Name']))[_0x5e3b1f(0xa3)](_0x5e60bd=>({'id':_0x5e60bd['Id'],'name':_0x5e60bd[_0x5e3b1f(0x6e)]}));}async[a275_0x55d0b2(0xa0)](_0x2fe664,_0xf67e96){const _0x598cdc=a275_0x55d0b2,_0xc67a47=[];while(_0x2fe664[_0x598cdc(0xb2)]){const _0x452838=queries_1[_0x598cdc(0x9f)]['replace'](_0x598cdc(0xad),_0x2fe664['splice'](0x0,this[_0x598cdc(0x81)])[_0x598cdc(0xa3)](_0x5153dd=>'\x27'+_0x5153dd+'\x27')['join'](','))[_0x598cdc(0x86)]('%repositoryId%',_0xf67e96),_0xff2af=await this[_0x598cdc(0x99)][_0x598cdc(0x9c)](_0x452838);_0xc67a47[_0x598cdc(0x7b)](..._0xff2af);}return _0xc67a47['map'](_0x381c70=>this['extractComponentMetadataFromRecord'](_0x381c70));}async[a275_0x55d0b2(0xb1)](_0x5035eb,_0x685e17){const _0x3305e9=a275_0x55d0b2,_0x440800=[];while(_0x5035eb[_0x3305e9(0xb2)]){const _0xa86511=queries_1[_0x3305e9(0x82)]['replace'](_0x3305e9(0xad),_0x5035eb[_0x3305e9(0x95)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x35d095=>'\x27'+_0x35d095+'\x27')[_0x3305e9(0x74)](','))['replace'](_0x3305e9(0xb0),_0x685e17),_0x379d35=await this[_0x3305e9(0x99)][_0x3305e9(0x9c)](_0xa86511);_0x440800['push'](..._0x379d35);}return _0x440800['map'](_0x318dd8=>this[_0x3305e9(0x6b)](_0x318dd8));}async[a275_0x55d0b2(0x87)](_0x3368bc){const _0x340292=a275_0x55d0b2,_0x5c1934=queries_1[_0x340292(0x7e)][_0x340292(0x86)](_0x340292(0x97),_0x3368bc),_0x190918=await this['queryService'][_0x340292(0x9c)](_0x5c1934);return _0x190918[_0x340292(0xa3)](_0x16f139=>this[_0x340292(0x6b)](_0x16f139));}async['fetchBranchComponents'](_0x50161e){const _0x81f892=a275_0x55d0b2,_0xdba8a0=queries_1[_0x81f892(0x90)]['replace'](_0x81f892(0xb0),_0x50161e),_0x1bde9e=await this[_0x81f892(0x99)][_0x81f892(0x9c)](_0xdba8a0);return _0x1bde9e[_0x81f892(0xa3)](_0x315972=>this[_0x81f892(0x6b)](_0x315972));}async[a275_0x55d0b2(0x92)](_0x43ecd3){const _0x3f337f=a275_0x55d0b2,_0x4b8c45=[..._0x43ecd3],_0x2c6cb7=[];while(_0x4b8c45[_0x3f337f(0xb2)]){const _0x24ba31=queries_1[_0x3f337f(0x8f)]['replace']('%componentIds%',_0x4b8c45[_0x3f337f(0x95)](0x0,this[_0x3f337f(0x81)])[_0x3f337f(0xa3)](_0x465af4=>'\x27'+_0x465af4+'\x27')[_0x3f337f(0x74)](',')),_0x188a5c=await this['queryService'][_0x3f337f(0x9c)](_0x24ba31);_0x2c6cb7[_0x3f337f(0x7b)](..._0x188a5c[_0x3f337f(0xa3)](_0x4c2736=>_0x4c2736['Id']));}return _0x2c6cb7;}async[a275_0x55d0b2(0x6a)](_0x12aa8d,_0x30bb45){const _0x1f5cc7=a275_0x55d0b2;return this[_0x1f5cc7(0x79)][_0x1f5cc7(0x75)](constants_1[_0x1f5cc7(0xa5)],{[constants_1[_0x1f5cc7(0xa8)]+'Repository__c']:_0x30bb45,[constants_1[_0x1f5cc7(0xa8)]+_0x1f5cc7(0x6d)]:_0x12aa8d[_0x1f5cc7(0x73)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0x1f5cc7(0x77),[constants_1[_0x1f5cc7(0x68)]+'Is_From_Agent__c']:!![]});}};function a275_0xdf5b(){const _0x2313e1=['__esModule','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','GET_BRANCH_COMPONENTS_QUERY','GET_BRANCH_BY_NAME_QUERY','fetchCommitManifestsByComponentIds','defineProperty','SalesforceQueryService','splice','43143OzEvBh','%repositoryId%','SalesforceRestService','queryService','%name%','Branch\x20\x22','query','613284weFxRM','../utils/flosum-naming.utils','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','fetchRepositoryComponentsByFilenames','GET_COMPONENT_RECORD_TYPES_QUERY','../../../../constants','map','Version__c','FLOSUM_COMMIT','search','getBranchIdByName','FLOSUM_NAMESPACE','GET_REPOSITORY_BY_NAME_QUERY','toString','Service','decorate','%fileNames%','29471ziSslf','extractFieldsFromRecord','%branchId%','fetchBranchComponentsByFilenames','length','CRC32__c','NotFoundError','typedi','FLOSUM_GIT_NAMESPACE','../queries','createCommit','extractComponentMetadataFromRecord','__metadata','Commit_Name__c','Name','./salesforce-query.service','./salesforce-rest.service','Component_Name__c','function','substr','join','post','15axnWgP','Completed','design:paramtypes','restService','461688BBUgsz','push','SalesforceGitSyncService','Component_Type__c','GET_REPOSITORY_COMPONENTS_QUERY','File_Name__c','1041614UsvPFx','MAX_QUERY_ARRAY_ITEMS','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','30zXMgrY','apply','50seabmH','replace','fetchRepositoryComponents','getRepositoryIdByName','309928iuvbgI','getComponentRecordTypes','165195UNbqZk','(((.+)+)+)+$','__decorate'];a275_0xdf5b=function(){return _0x2313e1;};return a275_0xdf5b();}SalesforceGitSyncService=__decorate([(0x0,typedi_1[a275_0x55d0b2(0xab)])(),__metadata(a275_0x55d0b2(0x78),[salesforce_query_service_1[a275_0x55d0b2(0x94)],salesforce_rest_service_1[a275_0x55d0b2(0x98)]])],SalesforceGitSyncService),exports[a275_0x55d0b2(0x7c)]=SalesforceGitSyncService;