const a236_0xb401f7=a236_0x1ad4;(function(_0x17223c,_0x148487){const _0x9cd801=a236_0x1ad4,_0xd3cba0=_0x17223c();while(!![]){try{const _0x2e7f63=-parseInt(_0x9cd801(0xb3))/0x1+-parseInt(_0x9cd801(0xdb))/0x2+-parseInt(_0x9cd801(0xb7))/0x3+-parseInt(_0x9cd801(0x9f))/0x4*(parseInt(_0x9cd801(0xdf))/0x5)+-parseInt(_0x9cd801(0x97))/0x6*(parseInt(_0x9cd801(0xcd))/0x7)+parseInt(_0x9cd801(0xc9))/0x8*(-parseInt(_0x9cd801(0xc8))/0x9)+parseInt(_0x9cd801(0x9c))/0xa*(parseInt(_0x9cd801(0xe1))/0xb);if(_0x2e7f63===_0x148487)break;else _0xd3cba0['push'](_0xd3cba0['shift']());}catch(_0x2b6990){_0xd3cba0['push'](_0xd3cba0['shift']());}}}(a236_0x3412,0xea65a));function a236_0x3412(){const _0x5e9350=['24fKnRYf','Commit_Name__c','%name%','Name','280nkhNAy','../utils/flosum-naming.utils','constructor','fetchRepositoryComponentsByFilenames','extractFieldsFromRecord','defineProperty','SalesforceQueryService','extractComponentMetadataFromRecord','MAX_QUERY_ARRAY_ITEMS','../../../../core/errors/not-found.error','Component_Type__c','%componentIds%','map','fetchRepositoryComponents','3397034YFHEwf','Repository\x20\x22','../queries','File_Name__c','5Zmgbgy','fetchBranchComponents','110bTSfec','CRC32__c','__metadata','post','(((.+)+)+)+$','fetchCommitManifestsByComponentIds','search','FLOSUM_COMMIT','push','createCommit','199776ZiIVsd','replace','Component_Name__c','FLOSUM_NAMESPACE','apply','7667750YaxdTA','metadata','GET_BRANCH_BY_NAME_QUERY','2470624mDbbBj','%repositoryId%','NotFoundError','GET_REPOSITORY_BY_NAME_QUERY','Version__c','__decorate','design:paramtypes','%branchId%','SalesforceRestService','getComponentRecordTypes','getOwnPropertyDescriptor','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','%fileNames%','Repository__c','substr','Completed','object','GET_COMPONENT_RECORD_TYPES_QUERY','queryService','join','1465386bCThMo','typedi','./salesforce-query.service','restService','2512272HTUrAC','Branch\x20\x22','\x22\x20not\x20found\x20in\x20flosum.','../../../../constants','length','getBranchIdByName','query','__esModule','decorate','toString','splice','GET_REPOSITORY_COMPONENTS_QUERY','SalesforceGitSyncService','fetchBranchComponentsByFilenames','GET_BRANCH_COMPONENTS_QUERY','FLOSUM_GIT_NAMESPACE','function','2270511fzAtAD'];a236_0x3412=function(){return _0x5e9350;};return a236_0x3412();}const a236_0x47dd23=(function(){let _0x315ee8=!![];return function(_0xb701ed,_0x2f15bd){const _0x3f4c4f=_0x315ee8?function(){const _0x5aa847=a236_0x1ad4;if(_0x2f15bd){const _0xd2d03f=_0x2f15bd[_0x5aa847(0x9b)](_0xb701ed,arguments);return _0x2f15bd=null,_0xd2d03f;}}:function(){};return _0x315ee8=![],_0x3f4c4f;};}()),a236_0x47ffb8=a236_0x47dd23(this,function(){const _0x4df458=a236_0x1ad4;return a236_0x47ffb8[_0x4df458(0xc0)]()[_0x4df458(0x93)]('(((.+)+)+)+$')[_0x4df458(0xc0)]()[_0x4df458(0xcf)](a236_0x47ffb8)[_0x4df458(0x93)](_0x4df458(0x91));});function a236_0x1ad4(_0x4ab8ce,_0x1b1c6f){const _0x5f2a94=a236_0x3412();return a236_0x1ad4=function(_0x47ffb8,_0x47dd23){_0x47ffb8=_0x47ffb8-0x8f;let _0x34122a=_0x5f2a94[_0x47ffb8];return _0x34122a;},a236_0x1ad4(_0x4ab8ce,_0x1b1c6f);}a236_0x47ffb8();'use strict';var __decorate=this&&this[a236_0xb401f7(0xa4)]||function(_0x265aca,_0x3cd307,_0x58a4b4,_0x52cfc1){const _0xc2c314=a236_0xb401f7;var _0x48b7fb=arguments[_0xc2c314(0xbb)],_0x52f212=_0x48b7fb<0x3?_0x3cd307:_0x52cfc1===null?_0x52cfc1=Object[_0xc2c314(0xa9)](_0x3cd307,_0x58a4b4):_0x52cfc1,_0x2b6d13;if(typeof Reflect===_0xc2c314(0xaf)&&typeof Reflect[_0xc2c314(0xbf)]===_0xc2c314(0xc7))_0x52f212=Reflect[_0xc2c314(0xbf)](_0x265aca,_0x3cd307,_0x58a4b4,_0x52cfc1);else{for(var _0x43c37b=_0x265aca['length']-0x1;_0x43c37b>=0x0;_0x43c37b--)if(_0x2b6d13=_0x265aca[_0x43c37b])_0x52f212=(_0x48b7fb<0x3?_0x2b6d13(_0x52f212):_0x48b7fb>0x3?_0x2b6d13(_0x3cd307,_0x58a4b4,_0x52f212):_0x2b6d13(_0x3cd307,_0x58a4b4))||_0x52f212;}return _0x48b7fb>0x3&&_0x52f212&&Object[_0xc2c314(0xd2)](_0x3cd307,_0x58a4b4,_0x52f212),_0x52f212;},__metadata=this&&this[a236_0xb401f7(0x8f)]||function(_0x389491,_0x1bcf88){const _0x3e666f=a236_0xb401f7;if(typeof Reflect==='object'&&typeof Reflect[_0x3e666f(0x9d)]===_0x3e666f(0xc7))return Reflect['metadata'](_0x389491,_0x1bcf88);};Object[a236_0xb401f7(0xd2)](exports,a236_0xb401f7(0xbe),{'value':!![]}),exports[a236_0xb401f7(0xc3)]=void 0x0;const not_found_error_1=require(a236_0xb401f7(0xd6)),typedi_1=require(a236_0xb401f7(0xb4)),constants_1=require(a236_0xb401f7(0xba)),queries_1=require(a236_0xb401f7(0xdd)),flosum_naming_utils_1=require(a236_0xb401f7(0xce)),salesforce_query_service_1=require(a236_0xb401f7(0xb5)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x599b29,_0x4abca5){const _0x56cce9=a236_0xb401f7;this['queryService']=_0x599b29,this[_0x56cce9(0xb6)]=_0x4abca5,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a236_0xb401f7(0xd4)](_0x2bab83){const _0x2bc8e3=a236_0xb401f7,_0x9c551d=(0x0,flosum_naming_utils_1[_0x2bc8e3(0xd1)])(_0x2bab83,[_0x2bc8e3(0x99),_0x2bc8e3(0xd7),'CRC32__c',_0x2bc8e3(0xde),_0x2bc8e3(0xa3),'Id']);return{'id':_0x9c551d['Id'],'name':_0x9c551d[_0x2bc8e3(0x99)],'type':_0x9c551d['Component_Type__c'],'fileName':_0x9c551d['File_Name__c'],'crc32':_0x9c551d[_0x2bc8e3(0xe2)],'version':+_0x9c551d['Version__c']};}async['getRepositoryIdByName'](_0x40ce7a){const _0x5e21d4=a236_0xb401f7,[_0x26b929]=await this[_0x5e21d4(0xb1)][_0x5e21d4(0xbd)](queries_1[_0x5e21d4(0xa2)][_0x5e21d4(0x98)](_0x5e21d4(0xcb),_0x40ce7a));if(!_0x26b929)throw new not_found_error_1[(_0x5e21d4(0xa1))](_0x5e21d4(0xdc)+_0x40ce7a+_0x5e21d4(0xb9));return _0x26b929['Id'];}async[a236_0xb401f7(0xbc)](_0x1949eb){const _0x5d7bdd=a236_0xb401f7,[_0x1cdb43]=await this[_0x5d7bdd(0xb1)][_0x5d7bdd(0xbd)](queries_1[_0x5d7bdd(0x9e)]['replace'](_0x5d7bdd(0xcb),_0x1949eb));if(!_0x1cdb43)throw new not_found_error_1[(_0x5d7bdd(0xa1))](_0x5d7bdd(0xb8)+_0x1949eb+_0x5d7bdd(0xb9));return _0x1cdb43['Id'];}async[a236_0xb401f7(0xa8)](){const _0x48329f=a236_0xb401f7,_0x21a055=await this[_0x48329f(0xb1)][_0x48329f(0xbd)](queries_1[_0x48329f(0xb0)]);return _0x21a055['map'](_0x518fa8=>(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x518fa8,['Id',_0x48329f(0xcc)]))[_0x48329f(0xd9)](_0xa7383c=>({'id':_0xa7383c['Id'],'name':_0xa7383c[_0x48329f(0xcc)]}));}async[a236_0xb401f7(0xd0)](_0x48b7df,_0x1a9219){const _0x4c26bf=a236_0xb401f7,_0xc3421a=[];while(_0x48b7df['length']){const _0x223782=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY']['replace'](_0x4c26bf(0xab),_0x48b7df['splice'](0x0,this[_0x4c26bf(0xd5)])[_0x4c26bf(0xd9)](_0x2070b7=>'\x27'+_0x2070b7+'\x27')['join'](','))[_0x4c26bf(0x98)]('%repositoryId%',_0x1a9219),_0x1d9573=await this[_0x4c26bf(0xb1)][_0x4c26bf(0xbd)](_0x223782);_0xc3421a[_0x4c26bf(0x95)](..._0x1d9573);}return _0xc3421a['map'](_0x42d7ff=>this['extractComponentMetadataFromRecord'](_0x42d7ff));}async[a236_0xb401f7(0xc4)](_0x42b267,_0x115b72){const _0x19ad5f=a236_0xb401f7,_0x46fe31=[];while(_0x42b267['length']){const _0x5ec7ec=queries_1[_0x19ad5f(0xaa)]['replace'](_0x19ad5f(0xab),_0x42b267[_0x19ad5f(0xc1)](0x0,this[_0x19ad5f(0xd5)])['map'](_0x28777b=>'\x27'+_0x28777b+'\x27')[_0x19ad5f(0xb2)](','))[_0x19ad5f(0x98)](_0x19ad5f(0xa6),_0x115b72),_0x592f6e=await this[_0x19ad5f(0xb1)][_0x19ad5f(0xbd)](_0x5ec7ec);_0x46fe31[_0x19ad5f(0x95)](..._0x592f6e);}return _0x46fe31[_0x19ad5f(0xd9)](_0x57a1f5=>this[_0x19ad5f(0xd4)](_0x57a1f5));}async[a236_0xb401f7(0xda)](_0x18af27){const _0x1a27bc=a236_0xb401f7,_0x169b99=queries_1[_0x1a27bc(0xc2)][_0x1a27bc(0x98)](_0x1a27bc(0xa0),_0x18af27),_0x4df668=await this[_0x1a27bc(0xb1)][_0x1a27bc(0xbd)](_0x169b99);return _0x4df668[_0x1a27bc(0xd9)](_0x18a9a5=>this[_0x1a27bc(0xd4)](_0x18a9a5));}async[a236_0xb401f7(0xe0)](_0x374d1f){const _0x5d7b6d=a236_0xb401f7,_0x1c4783=queries_1[_0x5d7b6d(0xc5)][_0x5d7b6d(0x98)](_0x5d7b6d(0xa6),_0x374d1f),_0x2a013c=await this['queryService']['query'](_0x1c4783);return _0x2a013c[_0x5d7b6d(0xd9)](_0xa96ed9=>this[_0x5d7b6d(0xd4)](_0xa96ed9));}async[a236_0xb401f7(0x92)](_0x13488b){const _0x366157=a236_0xb401f7,_0xae78bd=[..._0x13488b],_0x29f962=[];while(_0xae78bd['length']){const _0x2f5497=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x366157(0x98)](_0x366157(0xd8),_0xae78bd[_0x366157(0xc1)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x366157(0xd9)](_0x41d32e=>'\x27'+_0x41d32e+'\x27')[_0x366157(0xb2)](',')),_0x1b0a14=await this[_0x366157(0xb1)][_0x366157(0xbd)](_0x2f5497);_0x29f962[_0x366157(0x95)](..._0x1b0a14[_0x366157(0xd9)](_0x29909c=>_0x29909c['Id']));}return _0x29f962;}async[a236_0xb401f7(0x96)](_0x59d2df,_0x40c479){const _0x13a3fc=a236_0xb401f7;return this[_0x13a3fc(0xb6)][_0x13a3fc(0x90)](constants_1[_0x13a3fc(0x94)],{[constants_1[_0x13a3fc(0x9a)]+_0x13a3fc(0xac)]:_0x40c479,[constants_1['FLOSUM_NAMESPACE']+_0x13a3fc(0xca)]:_0x59d2df[_0x13a3fc(0xad)](0x0,0xff),[constants_1[_0x13a3fc(0x9a)]+'Status__c']:_0x13a3fc(0xae),[constants_1[_0x13a3fc(0xc6)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata(a236_0xb401f7(0xa5),[salesforce_query_service_1[a236_0xb401f7(0xd3)],salesforce_rest_service_1[a236_0xb401f7(0xa7)]])],SalesforceGitSyncService),exports[a236_0xb401f7(0xc3)]=SalesforceGitSyncService;