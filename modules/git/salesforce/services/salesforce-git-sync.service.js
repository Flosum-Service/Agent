const a236_0x4b4516=a236_0x27e7;(function(_0x1c09aa,_0x4e655c){const _0x5cade4=a236_0x27e7,_0x4422b5=_0x1c09aa();while(!![]){try{const _0x2fc685=-parseInt(_0x5cade4(0x1fb))/0x1*(parseInt(_0x5cade4(0x1ec))/0x2)+-parseInt(_0x5cade4(0x1dd))/0x3+parseInt(_0x5cade4(0x20d))/0x4*(parseInt(_0x5cade4(0x211))/0x5)+-parseInt(_0x5cade4(0x200))/0x6*(parseInt(_0x5cade4(0x213))/0x7)+-parseInt(_0x5cade4(0x1f0))/0x8+-parseInt(_0x5cade4(0x1eb))/0x9+parseInt(_0x5cade4(0x1f4))/0xa*(parseInt(_0x5cade4(0x202))/0xb);if(_0x2fc685===_0x4e655c)break;else _0x4422b5['push'](_0x4422b5['shift']());}catch(_0x20877f){_0x4422b5['push'](_0x4422b5['shift']());}}}(a236_0x392b,0xca07d));const a236_0x11d74e=(function(){let _0x998557=!![];return function(_0x246bb9,_0x2fedfc){const _0x5c1857=_0x998557?function(){const _0x3063c7=a236_0x27e7;if(_0x2fedfc){const _0x1909fe=_0x2fedfc[_0x3063c7(0x20b)](_0x246bb9,arguments);return _0x2fedfc=null,_0x1909fe;}}:function(){};return _0x998557=![],_0x5c1857;};}()),a236_0x46dd15=a236_0x11d74e(this,function(){const _0x4ecd58=a236_0x27e7;return a236_0x46dd15['toString']()[_0x4ecd58(0x1f9)]('(((.+)+)+)+$')['toString']()['constructor'](a236_0x46dd15)[_0x4ecd58(0x1f9)](_0x4ecd58(0x1ed));});a236_0x46dd15();function a236_0x27e7(_0x228ad8,_0x37fc69){const _0x18c3a5=a236_0x392b();return a236_0x27e7=function(_0x46dd15,_0x11d74e){_0x46dd15=_0x46dd15-0x1cd;let _0x392b37=_0x18c3a5[_0x46dd15];return _0x392b37;},a236_0x27e7(_0x228ad8,_0x37fc69);}'use strict';var __decorate=this&&this['__decorate']||function(_0x276315,_0x3d4bc1,_0x16b3c6,_0x130240){const _0x4688a0=a236_0x27e7;var _0x563a7a=arguments['length'],_0x1a0f98=_0x563a7a<0x3?_0x3d4bc1:_0x130240===null?_0x130240=Object['getOwnPropertyDescriptor'](_0x3d4bc1,_0x16b3c6):_0x130240,_0x59fabe;if(typeof Reflect===_0x4688a0(0x1f5)&&typeof Reflect[_0x4688a0(0x1f2)]===_0x4688a0(0x207))_0x1a0f98=Reflect[_0x4688a0(0x1f2)](_0x276315,_0x3d4bc1,_0x16b3c6,_0x130240);else{for(var _0x4495e0=_0x276315['length']-0x1;_0x4495e0>=0x0;_0x4495e0--)if(_0x59fabe=_0x276315[_0x4495e0])_0x1a0f98=(_0x563a7a<0x3?_0x59fabe(_0x1a0f98):_0x563a7a>0x3?_0x59fabe(_0x3d4bc1,_0x16b3c6,_0x1a0f98):_0x59fabe(_0x3d4bc1,_0x16b3c6))||_0x1a0f98;}return _0x563a7a>0x3&&_0x1a0f98&&Object[_0x4688a0(0x203)](_0x3d4bc1,_0x16b3c6,_0x1a0f98),_0x1a0f98;},__metadata=this&&this[a236_0x4b4516(0x201)]||function(_0x1eed99,_0x1d054d){const _0x3efbde=a236_0x4b4516;if(typeof Reflect==='object'&&typeof Reflect[_0x3efbde(0x1fc)]===_0x3efbde(0x207))return Reflect[_0x3efbde(0x1fc)](_0x1eed99,_0x1d054d);};Object['defineProperty'](exports,a236_0x4b4516(0x1df),{'value':!![]}),exports[a236_0x4b4516(0x1f1)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require('typedi'),constants_1=require(a236_0x4b4516(0x1e5)),queries_1=require('../queries'),flosum_naming_utils_1=require(a236_0x4b4516(0x1fa)),salesforce_query_service_1=require(a236_0x4b4516(0x1e7)),salesforce_rest_service_1=require(a236_0x4b4516(0x1e8));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x588ed7,_0x2969a2){const _0x362fa5=a236_0x4b4516;this[_0x362fa5(0x1d6)]=_0x588ed7,this[_0x362fa5(0x1f3)]=_0x2969a2,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}[a236_0x4b4516(0x1dc)](_0x1e6448){const _0x48d745=a236_0x4b4516,_0x9f6dfb=(0x0,flosum_naming_utils_1[_0x48d745(0x1e4)])(_0x1e6448,[_0x48d745(0x204),_0x48d745(0x1d4),_0x48d745(0x1e2),_0x48d745(0x1d7),_0x48d745(0x208),'Id']);return{'id':_0x9f6dfb['Id'],'name':_0x9f6dfb[_0x48d745(0x204)],'type':_0x9f6dfb[_0x48d745(0x1d4)],'fileName':_0x9f6dfb[_0x48d745(0x1d7)],'crc32':_0x9f6dfb[_0x48d745(0x1e2)],'version':+_0x9f6dfb['Version__c']};}async['getRepositoryIdByName'](_0x4e891d){const _0x489a31=a236_0x4b4516,[_0x19ea36]=await this[_0x489a31(0x1d6)]['query'](queries_1[_0x489a31(0x1ce)][_0x489a31(0x209)](_0x489a31(0x1fe),_0x4e891d));if(!_0x19ea36)throw new not_found_error_1[(_0x489a31(0x1de))](_0x489a31(0x1e3)+_0x4e891d+_0x489a31(0x1db));return _0x19ea36['Id'];}async['getBranchIdByName'](_0x1bfdd6){const _0x16cf7c=a236_0x4b4516,[_0x5139a4]=await this[_0x16cf7c(0x1d6)]['query'](queries_1[_0x16cf7c(0x1ff)][_0x16cf7c(0x209)]('%name%',_0x1bfdd6));if(!_0x5139a4)throw new not_found_error_1[(_0x16cf7c(0x1de))](_0x16cf7c(0x20e)+_0x1bfdd6+_0x16cf7c(0x1db));return _0x5139a4['Id'];}async['getComponentRecordTypes'](){const _0x31ba15=a236_0x4b4516,_0x5c6c65=await this[_0x31ba15(0x1d6)][_0x31ba15(0x1d1)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x5c6c65[_0x31ba15(0x1e9)](_0x378e54=>(0x0,flosum_naming_utils_1[_0x31ba15(0x1e4)])(_0x378e54,['Id',_0x31ba15(0x1e6)]))['map'](_0x203777=>({'id':_0x203777['Id'],'name':_0x203777['Name']}));}async['fetchRepositoryComponentsByFilenames'](_0x289008,_0xce7bc9){const _0x2ea562=a236_0x4b4516,_0x1b98a4=[];while(_0x289008[_0x2ea562(0x1f6)]){const _0x4b651f=queries_1[_0x2ea562(0x1d5)][_0x2ea562(0x209)](_0x2ea562(0x210),_0x289008[_0x2ea562(0x1e1)](0x0,this[_0x2ea562(0x212)])[_0x2ea562(0x1e9)](_0x6e21f9=>'\x27'+_0x6e21f9+'\x27')[_0x2ea562(0x1f8)](','))[_0x2ea562(0x209)](_0x2ea562(0x1e0),_0xce7bc9),_0x1e5fc4=await this[_0x2ea562(0x1d6)][_0x2ea562(0x1d1)](_0x4b651f);_0x1b98a4[_0x2ea562(0x1ee)](..._0x1e5fc4);}return _0x1b98a4[_0x2ea562(0x1e9)](_0x1b7cab=>this[_0x2ea562(0x1dc)](_0x1b7cab));}async[a236_0x4b4516(0x1cf)](_0xfa4449,_0x29bb83){const _0x4d46fa=a236_0x4b4516,_0x4a5cdd=[];while(_0xfa4449[_0x4d46fa(0x1f6)]){const _0x1d6841=queries_1[_0x4d46fa(0x1cd)][_0x4d46fa(0x209)](_0x4d46fa(0x210),_0xfa4449[_0x4d46fa(0x1e1)](0x0,this[_0x4d46fa(0x212)])[_0x4d46fa(0x1e9)](_0x4b627b=>'\x27'+_0x4b627b+'\x27')[_0x4d46fa(0x1f8)](','))[_0x4d46fa(0x209)](_0x4d46fa(0x1f7),_0x29bb83),_0x2de22a=await this[_0x4d46fa(0x1d6)]['query'](_0x1d6841);_0x4a5cdd[_0x4d46fa(0x1ee)](..._0x2de22a);}return _0x4a5cdd[_0x4d46fa(0x1e9)](_0x2fb370=>this[_0x4d46fa(0x1dc)](_0x2fb370));}async[a236_0x4b4516(0x1d2)](_0x11083c){const _0x10e9c1=a236_0x4b4516,_0x201951=queries_1[_0x10e9c1(0x1fd)][_0x10e9c1(0x209)]('%repositoryId%',_0x11083c),_0xe93fcd=await this['queryService'][_0x10e9c1(0x1d1)](_0x201951);return _0xe93fcd[_0x10e9c1(0x1e9)](_0x33efd5=>this['extractComponentMetadataFromRecord'](_0x33efd5));}async[a236_0x4b4516(0x1da)](_0x1f5cd2){const _0x3ab338=a236_0x4b4516,_0x3ac04d=queries_1[_0x3ab338(0x1ef)][_0x3ab338(0x209)]('%branchId%',_0x1f5cd2),_0x30a324=await this['queryService'][_0x3ab338(0x1d1)](_0x3ac04d);return _0x30a324[_0x3ab338(0x1e9)](_0xbe3e37=>this['extractComponentMetadataFromRecord'](_0xbe3e37));}async['fetchCommitManifestsByComponentIds'](_0x4365cf){const _0x417dc8=a236_0x4b4516,_0x2d7af1=[..._0x4365cf],_0x30e0a2=[];while(_0x2d7af1[_0x417dc8(0x1f6)]){const _0x32447d=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x417dc8(0x209)](_0x417dc8(0x20a),_0x2d7af1[_0x417dc8(0x1e1)](0x0,this[_0x417dc8(0x212)])['map'](_0x9e07f6=>'\x27'+_0x9e07f6+'\x27')[_0x417dc8(0x1f8)](',')),_0x3f8406=await this[_0x417dc8(0x1d6)]['query'](_0x32447d);_0x30e0a2['push'](..._0x3f8406[_0x417dc8(0x1e9)](_0x553802=>_0x553802['Id']));}return _0x30e0a2;}async[a236_0x4b4516(0x1d9)](_0x37ed60,_0x2a3ca1){const _0x8c346e=a236_0x4b4516;return this[_0x8c346e(0x1f3)]['post'](constants_1[_0x8c346e(0x20c)],{[constants_1['FLOSUM_NAMESPACE']+'Repository__c']:_0x2a3ca1,[constants_1[_0x8c346e(0x1ea)]+_0x8c346e(0x20f)]:_0x37ed60['substr'](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x8c346e(0x206)]:_0x8c346e(0x1d8),[constants_1[_0x8c346e(0x205)]+_0x8c346e(0x1d3)]:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata('design:paramtypes',[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1[a236_0x4b4516(0x1d0)]])],SalesforceGitSyncService),exports[a236_0x4b4516(0x1f1)]=SalesforceGitSyncService;function a236_0x392b(){const _0x22b1b3=['decorate','restService','16970uvcERs','object','length','%branchId%','join','search','../utils/flosum-naming.utils','3HSyLhF','metadata','GET_REPOSITORY_COMPONENTS_QUERY','%name%','GET_BRANCH_BY_NAME_QUERY','3097914hfWqzS','__metadata','18293cwGkhf','defineProperty','Component_Name__c','FLOSUM_GIT_NAMESPACE','Status__c','function','Version__c','replace','%componentIds%','apply','FLOSUM_COMMIT','9764qgUipM','Branch\x20\x22','Commit_Name__c','%fileNames%','255NLfzqo','MAX_QUERY_ARRAY_ITEMS','7Xplwwn','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','GET_REPOSITORY_BY_NAME_QUERY','fetchBranchComponentsByFilenames','SalesforceRestService','query','fetchRepositoryComponents','Is_From_Agent__c','Component_Type__c','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','queryService','File_Name__c','Completed','createCommit','fetchBranchComponents','\x22\x20not\x20found\x20in\x20flosum.','extractComponentMetadataFromRecord','3437223ntiIVj','NotFoundError','__esModule','%repositoryId%','splice','CRC32__c','Repository\x20\x22','extractFieldsFromRecord','../../../../constants','Name','./salesforce-query.service','./salesforce-rest.service','map','FLOSUM_NAMESPACE','493290FvWDRk','36796uMdkOB','(((.+)+)+)+$','push','GET_BRANCH_COMPONENTS_QUERY','2776168pfqKiH','SalesforceGitSyncService'];a236_0x392b=function(){return _0x22b1b3;};return a236_0x392b();}