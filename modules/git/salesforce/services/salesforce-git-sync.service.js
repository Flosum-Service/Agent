const a273_0x2b47be=a273_0x2692;(function(_0x5c6848,_0x411d6d){const _0xf13648=a273_0x2692,_0x2b0095=_0x5c6848();while(!![]){try{const _0x79e2df=parseInt(_0xf13648(0x211))/0x1*(parseInt(_0xf13648(0x213))/0x2)+-parseInt(_0xf13648(0x1dc))/0x3*(-parseInt(_0xf13648(0x1f0))/0x4)+parseInt(_0xf13648(0x20a))/0x5*(-parseInt(_0xf13648(0x1e1))/0x6)+-parseInt(_0xf13648(0x20c))/0x7+parseInt(_0xf13648(0x206))/0x8*(-parseInt(_0xf13648(0x1e5))/0x9)+parseInt(_0xf13648(0x1fd))/0xa+-parseInt(_0xf13648(0x1ed))/0xb*(-parseInt(_0xf13648(0x1e3))/0xc);if(_0x79e2df===_0x411d6d)break;else _0x2b0095['push'](_0x2b0095['shift']());}catch(_0x50163e){_0x2b0095['push'](_0x2b0095['shift']());}}}(a273_0x55bb,0x3c87d));const a273_0x35e1c2=(function(){let _0x55a1b9=!![];return function(_0x1e7c42,_0x66ace){const _0x56fa90=_0x55a1b9?function(){const _0x642972=a273_0x2692;if(_0x66ace){const _0x59d83f=_0x66ace[_0x642972(0x202)](_0x1e7c42,arguments);return _0x66ace=null,_0x59d83f;}}:function(){};return _0x55a1b9=![],_0x56fa90;};}()),a273_0x59c5a1=a273_0x35e1c2(this,function(){const _0x1b87d5=a273_0x2692;return a273_0x59c5a1[_0x1b87d5(0x21b)]()['search'](_0x1b87d5(0x21a))[_0x1b87d5(0x21b)]()[_0x1b87d5(0x1e6)](a273_0x59c5a1)[_0x1b87d5(0x207)](_0x1b87d5(0x21a));});function a273_0x55bb(){const _0x22399d=['getOwnPropertyDescriptor','GET_BRANCH_COMPONENTS_QUERY','GET_COMPONENT_RECORD_TYPES_QUERY','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','398166AuuouL','File_Name__c','design:paramtypes','typedi','./salesforce-query.service','60HuEhMR','replace','1272mFgkNo','Commit_Name__c','4146003PAypPd','constructor','Component_Name__c','FLOSUM_NAMESPACE','SalesforceGitSyncService','GET_BRANCH_BY_NAME_QUERY','GET_REPOSITORY_COMPONENTS_QUERY','restService','75581vhAIfP','./salesforce-rest.service','Repository__c','4XVAZHn','Version__c','fetchBranchComponents','../../../../constants','splice','%branchId%','%repositoryId%','FLOSUM_GIT_NAMESPACE','getComponentRecordTypes','\x22\x20not\x20found\x20in\x20flosum.','metadata','Status__c','SalesforceQueryService','355520AZVgLs','createCommit','NotFoundError','length','post','apply','Name','extractFieldsFromRecord','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','8dgKaKu','search','%fileNames%','join','124535QpBhzY','query','326718ETFlst','GET_REPOSITORY_BY_NAME_QUERY','map','function','Repository\x20\x22','7zTUHWJ','decorate','30784MoNxlx','%name%','__decorate','Completed','Service','substr','fetchBranchComponentsByFilenames','(((.+)+)+)+$','toString','../queries','fetchRepositoryComponents','FLOSUM_COMMIT','Component_Type__c','getRepositoryIdByName','object','queryService','extractComponentMetadataFromRecord','../utils/flosum-naming.utils','MAX_QUERY_ARRAY_ITEMS','push'];a273_0x55bb=function(){return _0x22399d;};return a273_0x55bb();}a273_0x59c5a1();'use strict';function a273_0x2692(_0x51a32f,_0x17eb9d){const _0x56c7cb=a273_0x55bb();return a273_0x2692=function(_0x59c5a1,_0x35e1c2){_0x59c5a1=_0x59c5a1-0x1cf;let _0x55bbb3=_0x56c7cb[_0x59c5a1];return _0x55bbb3;},a273_0x2692(_0x51a32f,_0x17eb9d);}var __decorate=this&&this[a273_0x2b47be(0x215)]||function(_0x551d88,_0x5581e3,_0xbed032,_0x58a1b5){const _0x54dba3=a273_0x2b47be;var _0x26e247=arguments[_0x54dba3(0x200)],_0x7342c0=_0x26e247<0x3?_0x5581e3:_0x58a1b5===null?_0x58a1b5=Object[_0x54dba3(0x1d8)](_0x5581e3,_0xbed032):_0x58a1b5,_0x3622cc;if(typeof Reflect===_0x54dba3(0x1d2)&&typeof Reflect['decorate']===_0x54dba3(0x20f))_0x7342c0=Reflect[_0x54dba3(0x212)](_0x551d88,_0x5581e3,_0xbed032,_0x58a1b5);else{for(var _0x5f3d61=_0x551d88[_0x54dba3(0x200)]-0x1;_0x5f3d61>=0x0;_0x5f3d61--)if(_0x3622cc=_0x551d88[_0x5f3d61])_0x7342c0=(_0x26e247<0x3?_0x3622cc(_0x7342c0):_0x26e247>0x3?_0x3622cc(_0x5581e3,_0xbed032,_0x7342c0):_0x3622cc(_0x5581e3,_0xbed032))||_0x7342c0;}return _0x26e247>0x3&&_0x7342c0&&Object['defineProperty'](_0x5581e3,_0xbed032,_0x7342c0),_0x7342c0;},__metadata=this&&this['__metadata']||function(_0x442131,_0xe3f2){const _0x3e9ee8=a273_0x2b47be;if(typeof Reflect===_0x3e9ee8(0x1d2)&&typeof Reflect[_0x3e9ee8(0x1fa)]===_0x3e9ee8(0x20f))return Reflect[_0x3e9ee8(0x1fa)](_0x442131,_0xe3f2);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a273_0x2b47be(0x1e9)]=void 0x0;const not_found_error_1=require('../../../../core/errors/not-found.error'),typedi_1=require(a273_0x2b47be(0x1df)),constants_1=require(a273_0x2b47be(0x1f3)),queries_1=require(a273_0x2b47be(0x21c)),flosum_naming_utils_1=require(a273_0x2b47be(0x1d5)),salesforce_query_service_1=require(a273_0x2b47be(0x1e0)),salesforce_rest_service_1=require(a273_0x2b47be(0x1ee));let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x2320a1,_0x460c8c){const _0x109432=a273_0x2b47be;this[_0x109432(0x1d3)]=_0x2320a1,this[_0x109432(0x1ec)]=_0x460c8c,this[_0x109432(0x1d6)]=0xc8;}[a273_0x2b47be(0x1d4)](_0x105808){const _0x35bbb0=a273_0x2b47be,_0x278c7b=(0x0,flosum_naming_utils_1['extractFieldsFromRecord'])(_0x105808,[_0x35bbb0(0x1e7),_0x35bbb0(0x1d0),'CRC32__c',_0x35bbb0(0x1dd),'Version__c','Id']);return{'id':_0x278c7b['Id'],'name':_0x278c7b[_0x35bbb0(0x1e7)],'type':_0x278c7b[_0x35bbb0(0x1d0)],'fileName':_0x278c7b[_0x35bbb0(0x1dd)],'crc32':_0x278c7b['CRC32__c'],'version':+_0x278c7b[_0x35bbb0(0x1f1)]};}async[a273_0x2b47be(0x1d1)](_0x5be898){const _0x3cc794=a273_0x2b47be,[_0x1a0dc0]=await this[_0x3cc794(0x1d3)]['query'](queries_1[_0x3cc794(0x20d)][_0x3cc794(0x1e2)](_0x3cc794(0x214),_0x5be898));if(!_0x1a0dc0)throw new not_found_error_1[(_0x3cc794(0x1ff))](_0x3cc794(0x210)+_0x5be898+_0x3cc794(0x1f9));return _0x1a0dc0['Id'];}async['getBranchIdByName'](_0x2d339c){const _0x418cf8=a273_0x2b47be,[_0x513039]=await this[_0x418cf8(0x1d3)]['query'](queries_1[_0x418cf8(0x1ea)][_0x418cf8(0x1e2)](_0x418cf8(0x214),_0x2d339c));if(!_0x513039)throw new not_found_error_1[(_0x418cf8(0x1ff))]('Branch\x20\x22'+_0x2d339c+'\x22\x20not\x20found\x20in\x20flosum.');return _0x513039['Id'];}async[a273_0x2b47be(0x1f8)](){const _0x2bbdaa=a273_0x2b47be,_0x4c6140=await this['queryService'][_0x2bbdaa(0x20b)](queries_1[_0x2bbdaa(0x1da)]);return _0x4c6140[_0x2bbdaa(0x20e)](_0x253758=>(0x0,flosum_naming_utils_1[_0x2bbdaa(0x204)])(_0x253758,['Id','Name']))[_0x2bbdaa(0x20e)](_0x2b3bac=>({'id':_0x2b3bac['Id'],'name':_0x2b3bac[_0x2bbdaa(0x203)]}));}async['fetchRepositoryComponentsByFilenames'](_0x5710fd,_0x11f7b5){const _0x495ae7=a273_0x2b47be,_0x37fb4f=[];while(_0x5710fd[_0x495ae7(0x200)]){const _0x46e9c6=queries_1['GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY'][_0x495ae7(0x1e2)](_0x495ae7(0x208),_0x5710fd[_0x495ae7(0x1f4)](0x0,this[_0x495ae7(0x1d6)])['map'](_0xbd61c5=>'\x27'+_0xbd61c5+'\x27')['join'](','))['replace'](_0x495ae7(0x1f6),_0x11f7b5),_0x4fc3a9=await this[_0x495ae7(0x1d3)][_0x495ae7(0x20b)](_0x46e9c6);_0x37fb4f[_0x495ae7(0x1d7)](..._0x4fc3a9);}return _0x37fb4f['map'](_0x390766=>this[_0x495ae7(0x1d4)](_0x390766));}async[a273_0x2b47be(0x219)](_0x204aea,_0x575f6f){const _0x1a43d7=a273_0x2b47be,_0x1dfe7c=[];while(_0x204aea[_0x1a43d7(0x200)]){const _0x4eb004=queries_1[_0x1a43d7(0x1db)][_0x1a43d7(0x1e2)](_0x1a43d7(0x208),_0x204aea[_0x1a43d7(0x1f4)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x51953e=>'\x27'+_0x51953e+'\x27')[_0x1a43d7(0x209)](','))[_0x1a43d7(0x1e2)](_0x1a43d7(0x1f5),_0x575f6f),_0x57b117=await this[_0x1a43d7(0x1d3)][_0x1a43d7(0x20b)](_0x4eb004);_0x1dfe7c['push'](..._0x57b117);}return _0x1dfe7c['map'](_0x49bd0e=>this[_0x1a43d7(0x1d4)](_0x49bd0e));}async[a273_0x2b47be(0x21d)](_0x550856){const _0x283bdf=a273_0x2b47be,_0x2f52a4=queries_1[_0x283bdf(0x1eb)][_0x283bdf(0x1e2)]('%repositoryId%',_0x550856),_0x3875a2=await this['queryService'][_0x283bdf(0x20b)](_0x2f52a4);return _0x3875a2[_0x283bdf(0x20e)](_0x316742=>this[_0x283bdf(0x1d4)](_0x316742));}async[a273_0x2b47be(0x1f2)](_0x1e6a60){const _0x1e958d=a273_0x2b47be,_0x1451a1=queries_1[_0x1e958d(0x1d9)][_0x1e958d(0x1e2)](_0x1e958d(0x1f5),_0x1e6a60),_0x1fd42d=await this[_0x1e958d(0x1d3)][_0x1e958d(0x20b)](_0x1451a1);return _0x1fd42d[_0x1e958d(0x20e)](_0x462abc=>this['extractComponentMetadataFromRecord'](_0x462abc));}async['fetchCommitManifestsByComponentIds'](_0x503134){const _0x7273c8=a273_0x2b47be,_0x3aacbe=[..._0x503134],_0x3be52b=[];while(_0x3aacbe[_0x7273c8(0x200)]){const _0x3160c=queries_1[_0x7273c8(0x205)]['replace']('%componentIds%',_0x3aacbe[_0x7273c8(0x1f4)](0x0,this[_0x7273c8(0x1d6)])['map'](_0x511c75=>'\x27'+_0x511c75+'\x27')[_0x7273c8(0x209)](',')),_0x21c98e=await this[_0x7273c8(0x1d3)][_0x7273c8(0x20b)](_0x3160c);_0x3be52b['push'](..._0x21c98e[_0x7273c8(0x20e)](_0x190b3a=>_0x190b3a['Id']));}return _0x3be52b;}async[a273_0x2b47be(0x1fe)](_0xaecac2,_0x5f02dc){const _0x290333=a273_0x2b47be;return this['restService'][_0x290333(0x201)](constants_1[_0x290333(0x1cf)],{[constants_1[_0x290333(0x1e8)]+_0x290333(0x1ef)]:_0x5f02dc,[constants_1[_0x290333(0x1e8)]+_0x290333(0x1e4)]:_0xaecac2[_0x290333(0x218)](0x0,0xff),[constants_1[_0x290333(0x1e8)]+_0x290333(0x1fb)]:_0x290333(0x216),[constants_1[_0x290333(0x1f7)]+'Is_From_Agent__c']:!![]});}};SalesforceGitSyncService=__decorate([(0x0,typedi_1[a273_0x2b47be(0x217)])(),__metadata(a273_0x2b47be(0x1de),[salesforce_query_service_1[a273_0x2b47be(0x1fc)],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a273_0x2b47be(0x1e9)]=SalesforceGitSyncService;