const a236_0x11c292=a236_0x1857;(function(_0x8ec739,_0x51b68f){const _0x16915b=a236_0x1857,_0x3ab4eb=_0x8ec739();while(!![]){try{const _0x325484=-parseInt(_0x16915b(0x1fb))/0x1+parseInt(_0x16915b(0x1d2))/0x2+parseInt(_0x16915b(0x1fa))/0x3+-parseInt(_0x16915b(0x1fd))/0x4*(-parseInt(_0x16915b(0x1d7))/0x5)+parseInt(_0x16915b(0x1ee))/0x6+parseInt(_0x16915b(0x1eb))/0x7*(-parseInt(_0x16915b(0x1dd))/0x8)+parseInt(_0x16915b(0x1f2))/0x9;if(_0x325484===_0x51b68f)break;else _0x3ab4eb['push'](_0x3ab4eb['shift']());}catch(_0x1ebc13){_0x3ab4eb['push'](_0x3ab4eb['shift']());}}}(a236_0x4d5b,0xc49b5));const a236_0x3f6e0d=(function(){let _0x379483=!![];return function(_0xca117f,_0x5c8f9e){const _0x30b64b=_0x379483?function(){const _0x16abd4=a236_0x1857;if(_0x5c8f9e){const _0x37fb2f=_0x5c8f9e[_0x16abd4(0x1d6)](_0xca117f,arguments);return _0x5c8f9e=null,_0x37fb2f;}}:function(){};return _0x379483=![],_0x30b64b;};}()),a236_0x47f5bf=a236_0x3f6e0d(this,function(){const _0x79a98c=a236_0x1857;return a236_0x47f5bf[_0x79a98c(0x1ff)]()[_0x79a98c(0x1c8)](_0x79a98c(0x201))[_0x79a98c(0x1ff)]()[_0x79a98c(0x1cf)](a236_0x47f5bf)[_0x79a98c(0x1c8)]('(((.+)+)+)+$');});a236_0x47f5bf();'use strict';function a236_0x1857(_0x3234d5,_0x37a036){const _0x598194=a236_0x4d5b();return a236_0x1857=function(_0x47f5bf,_0x3f6e0d){_0x47f5bf=_0x47f5bf-0x1c8;let _0x4d5bce=_0x598194[_0x47f5bf];return _0x4d5bce;},a236_0x1857(_0x3234d5,_0x37a036);}var __importDefault=this&&this['__importDefault']||function(_0x4c5214){const _0x22c26e=a236_0x1857;return _0x4c5214&&_0x4c5214[_0x22c26e(0x1dc)]?_0x4c5214:{'default':_0x4c5214};};Object[a236_0x11c292(0x1e4)](exports,a236_0x11c292(0x1dc),{'value':!![]}),exports[a236_0x11c292(0x1e6)]=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require(a236_0x11c292(0x1ca))),salesforce_query_service_1=require(a236_0x11c292(0x1d4)),queries_1=require(a236_0x11c292(0x202)),flosum_component_history_dto_1=require(a236_0x11c292(0x1e5));function a236_0x4d5b(){const _0x1e91df=['1260672cZTfjd','attachmentId','ParentId','logger','177030fpumoU','components','manually\x20retrieved\x20%d/%d\x20components','length','query','Name','salesforceService','Logger','3091023gCSnnN','1059695BPmDOB','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','12hDhTOn','info','toString','retrieveLastComponents','(((.+)+)+)+$','../queries','search','replace','typedi','fromSalesforce','fileType','manually\x20retrieving\x20components\x20from\x20salesforce','base64','constructor','retrieveComponentIdsFromHistoryIds','get','1366448nOPwfI','GET_COMPONENT_HISTORIES_BY_IDS','./salesforce-query.service','default','apply','992725ziHgLB','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','filename','log','retrieveAttachment','__esModule','898648swVsGc','retrieveComponents','SalesforceQueryService','%ids%','ids','FlosumComponentHistoryDto','then','defineProperty','../dto/flosum-component-history.dto','SalesforceRetrieverService','COMPONENTS_PER_QUERY','join','%parent_ids%','push','42KKQuXA','COMPONENTS_PER_REQUEST','splice'];a236_0x4d5b=function(){return _0x1e91df;};return a236_0x4d5b();}class SalesforceRetrieverService{constructor(_0x2a93b3){const _0xb464f9=a236_0x11c292;this[_0xb464f9(0x1f8)]=_0x2a93b3,this[_0xb464f9(0x1f1)]=new core_1[(_0xb464f9(0x1f9))](SalesforceRetrieverService['name']),this['COMPONENTS_PER_REQUEST']=0xbb8,this['COMPONENTS_PER_QUERY']=0x1f4;}async[a236_0x11c292(0x1d0)](_0xc916aa){const _0x5bd46a=a236_0x11c292;this[_0x5bd46a(0x1f1)][_0x5bd46a(0x1fe)](_0x5bd46a(0x1fc),_0xc916aa['length']);const _0x4ffc28=typedi_1[_0x5bd46a(0x1d5)][_0x5bd46a(0x1d1)](salesforce_query_service_1[_0x5bd46a(0x1df)]),_0x3b0063=_0xc916aa['map'](_0x49b68d=>'\x27'+_0x49b68d+'\x27'),_0x180b53=[];while(_0x3b0063[_0x5bd46a(0x1f5)]){const _0x1f3c36=_0x3b0063['splice'](0x0,this[_0x5bd46a(0x1e7)]),_0x2a9799=_0x4ffc28[_0x5bd46a(0x1f6)](queries_1[_0x5bd46a(0x1d8)][_0x5bd46a(0x1c9)](_0x5bd46a(0x1e9),_0x1f3c36[_0x5bd46a(0x1e8)]())),_0x4c7cc3=_0x4ffc28[_0x5bd46a(0x1f6)](queries_1[_0x5bd46a(0x1d3)][_0x5bd46a(0x1c9)](_0x5bd46a(0x1e0),_0x1f3c36[_0x5bd46a(0x1e8)]()))[_0x5bd46a(0x1e3)](_0x55656d=>_0x55656d['map'](_0x2e3913=>flosum_component_history_dto_1[_0x5bd46a(0x1e2)][_0x5bd46a(0x1cb)](_0x2e3913))),[_0x168dec,_0x49c24d]=await Promise['all']([_0x2a9799,_0x4c7cc3]);for(const _0x44b684 of _0x49c24d){const _0x1a2e74=_0x168dec['find'](_0x3e651b=>_0x3e651b[_0x5bd46a(0x1f0)]===_0x44b684['id']);_0x1a2e74&&_0x180b53[_0x5bd46a(0x1ea)]({'fileType':_0x1a2e74[_0x5bd46a(0x1f7)],'fileName':_0x44b684[_0x5bd46a(0x1d9)],'attachmentId':_0x1a2e74['Id']});}}return _0x180b53;}async[a236_0x11c292(0x200)](_0x52b15b){const _0x50a536=a236_0x11c292,_0x4217a9=await this[_0x50a536(0x1d0)](_0x52b15b);this[_0x50a536(0x1f1)]['info'](_0x50a536(0x1cd));const _0x16dfcf=[];for(const _0x4d5249 of _0x4217a9){const _0x48149d=await this[_0x50a536(0x1f8)][_0x50a536(0x1db)](_0x4d5249[_0x50a536(0x1ef)],!![]);_0x16dfcf[_0x50a536(0x1ea)]({'body':_0x48149d[_0x50a536(0x1ff)](_0x50a536(0x1ce)),'fileName':_0x4d5249['fileName'],'fileType':_0x4d5249[_0x50a536(0x1cc)]}),this[_0x50a536(0x1f1)][_0x50a536(0x1fe)](_0x50a536(0x1f4),_0x16dfcf[_0x50a536(0x1f5)],_0x52b15b[_0x50a536(0x1f5)]);}return _0x16dfcf;}async['run'](_0x5679d6){const _0x57531d=a236_0x11c292,_0x1a4683=[..._0x5679d6],_0x38f82d=[],_0x2995b0=[];while(_0x1a4683[_0x57531d(0x1f5)]){const _0x5a9bd2=_0x1a4683[_0x57531d(0x1ed)](0x0,this[_0x57531d(0x1ec)]),_0x4497a0=await this[_0x57531d(0x1f8)][_0x57531d(0x1de)](_0x5a9bd2);_0x5a9bd2[_0x57531d(0x1f5)]!==_0x4497a0[_0x57531d(0x1e1)][_0x57531d(0x1f5)]?(_0x1a4683[_0x57531d(0x1ea)](..._0x4497a0[_0x57531d(0x1e1)]),_0x38f82d[_0x57531d(0x1ea)](..._0x4497a0[_0x57531d(0x1f3)])):_0x2995b0[_0x57531d(0x1ea)](..._0x5a9bd2),this[_0x57531d(0x1f1)][_0x57531d(0x1da)]('retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest',_0x5679d6[_0x57531d(0x1f5)]-_0x1a4683[_0x57531d(0x1f5)],_0x5679d6['length']);}if(_0x2995b0[_0x57531d(0x1f5)]){const _0x1d3045=await this[_0x57531d(0x200)](_0x2995b0);_0x38f82d['push'](..._0x1d3045);}return _0x38f82d;}}exports['SalesforceRetrieverService']=SalesforceRetrieverService;