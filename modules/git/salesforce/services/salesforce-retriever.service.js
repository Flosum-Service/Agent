function a242_0x5d35(_0x48d626,_0x4c3c99){const _0x56e715=a242_0x2ee2();return a242_0x5d35=function(_0x232db5,_0x37dd77){_0x232db5=_0x232db5-0xaa;let _0x2ee2da=_0x56e715[_0x232db5];return _0x2ee2da;},a242_0x5d35(_0x48d626,_0x4c3c99);}const a242_0x5c95f5=a242_0x5d35;(function(_0x56dba2,_0x2025fa){const _0x20504a=a242_0x5d35,_0x2667bb=_0x56dba2();while(!![]){try{const _0x6c4de0=parseInt(_0x20504a(0xbd))/0x1+parseInt(_0x20504a(0xdf))/0x2+-parseInt(_0x20504a(0xe3))/0x3+-parseInt(_0x20504a(0xb8))/0x4*(parseInt(_0x20504a(0xce))/0x5)+parseInt(_0x20504a(0xb6))/0x6+parseInt(_0x20504a(0xd8))/0x7*(parseInt(_0x20504a(0xc5))/0x8)+-parseInt(_0x20504a(0xc1))/0x9*(parseInt(_0x20504a(0xd1))/0xa);if(_0x6c4de0===_0x2025fa)break;else _0x2667bb['push'](_0x2667bb['shift']());}catch(_0x40d467){_0x2667bb['push'](_0x2667bb['shift']());}}}(a242_0x2ee2,0xac744));const a242_0x37dd77=(function(){let _0x4386e1=!![];return function(_0x5a0b58,_0x523bb6){const _0x2bf0f7=_0x4386e1?function(){if(_0x523bb6){const _0x1d351b=_0x523bb6['apply'](_0x5a0b58,arguments);return _0x523bb6=null,_0x1d351b;}}:function(){};return _0x4386e1=![],_0x2bf0f7;};}()),a242_0x232db5=a242_0x37dd77(this,function(){const _0x4f6994=a242_0x5d35;return a242_0x232db5[_0x4f6994(0xd9)]()[_0x4f6994(0xc9)](_0x4f6994(0xd0))['toString']()[_0x4f6994(0xb9)](a242_0x232db5)['search'](_0x4f6994(0xd0));});function a242_0x2ee2(){const _0xce1831=['name','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','617730EZEbEm','retrieveComponents','(((.+)+)+)+$','24554590OeOFma','SalesforceRetrieverService','__importDefault','components','__esModule','typedi','./salesforce-query.service','2793070geBEiX','toString','Logger','%parent_ids%','fromSalesforce','ids','default','2650408KmtHgF','map','length','SalesforceQueryService','406938VByIdB','../queries','attachmentId','retrieveLastComponents','base64','GET_COMPONENT_HISTORIES_BY_IDS','COMPONENTS_PER_REQUEST','%ids%','filename','replace','info','retrieveComponentIdsFromHistoryIds','manually\x20retrieving\x20components\x20from\x20salesforce','manually\x20retrieved\x20%d/%d\x20components','fileName','splice','8368716UURLvs','join','4gqmxzU','constructor','salesforceService','log','push','302023IpeNeI','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','logger','fileType','9FnowCH','all','ParentId','get','8qxcZRa','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','COMPONENTS_PER_QUERY','../dto/flosum-component-history.dto','search','retrieveAttachment','FlosumComponentHistoryDto'];a242_0x2ee2=function(){return _0xce1831;};return a242_0x2ee2();}a242_0x232db5();'use strict';var __importDefault=this&&this[a242_0x5c95f5(0xd3)]||function(_0x47bb58){return _0x47bb58&&_0x47bb58['__esModule']?_0x47bb58:{'default':_0x47bb58};};Object['defineProperty'](exports,a242_0x5c95f5(0xd5),{'value':!![]}),exports[a242_0x5c95f5(0xd2)]=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require(a242_0x5c95f5(0xd6))),salesforce_query_service_1=require(a242_0x5c95f5(0xd7)),queries_1=require(a242_0x5c95f5(0xe4)),flosum_component_history_dto_1=require(a242_0x5c95f5(0xc8));class SalesforceRetrieverService{constructor(_0x201e3c){const _0x5c096d=a242_0x5c95f5;this[_0x5c096d(0xba)]=_0x201e3c,this[_0x5c096d(0xbf)]=new core_1[(_0x5c096d(0xda))](SalesforceRetrieverService[_0x5c096d(0xcc)]),this['COMPONENTS_PER_REQUEST']=0xbb8,this[_0x5c096d(0xc7)]=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0x60e0c2){const _0x180c60=a242_0x5c95f5;this[_0x180c60(0xbf)]['info'](_0x180c60(0xbe),_0x60e0c2[_0x180c60(0xe1)]);const _0x2c69ae=typedi_1[_0x180c60(0xde)][_0x180c60(0xc4)](salesforce_query_service_1[_0x180c60(0xe2)]),_0x1c18ad=_0x60e0c2[_0x180c60(0xe0)](_0x2e6ca2=>'\x27'+_0x2e6ca2+'\x27'),_0x4c0f5e=[];while(_0x1c18ad[_0x180c60(0xe1)]){const _0x3dac97=_0x1c18ad[_0x180c60(0xb5)](0x0,this[_0x180c60(0xc7)]),_0x45db27=_0x2c69ae['query'](queries_1[_0x180c60(0xc6)][_0x180c60(0xaf)](_0x180c60(0xdb),_0x3dac97[_0x180c60(0xb7)]())),_0x42ca48=_0x2c69ae['query'](queries_1[_0x180c60(0xab)][_0x180c60(0xaf)](_0x180c60(0xad),_0x3dac97[_0x180c60(0xb7)]()))['then'](_0x336574=>_0x336574['map'](_0x4317ba=>flosum_component_history_dto_1[_0x180c60(0xcb)][_0x180c60(0xdc)](_0x4317ba))),[_0x2f359e,_0x4273d8]=await Promise[_0x180c60(0xc2)]([_0x45db27,_0x42ca48]);for(const _0x336fae of _0x4273d8){const _0x1cb2d0=_0x2f359e['find'](_0x452565=>_0x452565[_0x180c60(0xc3)]===_0x336fae['id']);_0x1cb2d0&&_0x4c0f5e[_0x180c60(0xbc)]({'fileType':_0x1cb2d0['Name'],'fileName':_0x336fae[_0x180c60(0xae)],'attachmentId':_0x1cb2d0['Id']});}}return _0x4c0f5e;}async[a242_0x5c95f5(0xe6)](_0x2d533e){const _0x4a8388=a242_0x5c95f5,_0x494f24=await this[_0x4a8388(0xb1)](_0x2d533e);this[_0x4a8388(0xbf)][_0x4a8388(0xb0)](_0x4a8388(0xb2));const _0x28fb6d=[];for(const _0x82b65b of _0x494f24){const _0x1573cf=await this[_0x4a8388(0xba)][_0x4a8388(0xca)](_0x82b65b[_0x4a8388(0xe5)],!![]);_0x28fb6d[_0x4a8388(0xbc)]({'body':_0x1573cf[_0x4a8388(0xd9)](_0x4a8388(0xaa)),'fileName':_0x82b65b[_0x4a8388(0xb4)],'fileType':_0x82b65b[_0x4a8388(0xc0)]}),this[_0x4a8388(0xbf)][_0x4a8388(0xb0)](_0x4a8388(0xb3),_0x28fb6d['length'],_0x2d533e['length']);}return _0x28fb6d;}async['run'](_0x15fbd3){const _0x15ff64=a242_0x5c95f5,_0x1c6df7=[..._0x15fbd3],_0x33add2=[],_0x5d7bf9=[];while(_0x1c6df7[_0x15ff64(0xe1)]){const _0x4804ad=_0x1c6df7[_0x15ff64(0xb5)](0x0,this[_0x15ff64(0xac)]),_0x4a9301=await this[_0x15ff64(0xba)][_0x15ff64(0xcf)](_0x4804ad);_0x4804ad['length']!==_0x4a9301[_0x15ff64(0xdd)]['length']?(_0x1c6df7[_0x15ff64(0xbc)](..._0x4a9301[_0x15ff64(0xdd)]),_0x33add2[_0x15ff64(0xbc)](..._0x4a9301[_0x15ff64(0xd4)])):_0x5d7bf9[_0x15ff64(0xbc)](..._0x4804ad),this['logger'][_0x15ff64(0xbb)](_0x15ff64(0xcd),_0x15fbd3[_0x15ff64(0xe1)]-_0x1c6df7[_0x15ff64(0xe1)],_0x15fbd3[_0x15ff64(0xe1)]);}if(_0x5d7bf9[_0x15ff64(0xe1)]){const _0x41e368=await this[_0x15ff64(0xe6)](_0x5d7bf9);_0x33add2[_0x15ff64(0xbc)](..._0x41e368);}return _0x33add2;}}exports['SalesforceRetrieverService']=SalesforceRetrieverService;