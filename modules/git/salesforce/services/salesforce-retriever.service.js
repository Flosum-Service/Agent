function a279_0xa07a(){const _0x4c9b5f=['logger','40MoIcgT','then','62375sDBDOF','retrieveComponentIdsFromHistoryIds','351078MDDnEO','%parent_ids%','6219QPLUyP','968gFdGfi','apply','default','get','join','Manually\x20retrieved\x20%d/%d\x20components','712330KScQjl','COMPONENTS_PER_QUERY','22897nGqTHk','splice','info','run','push','Manually\x20retrieving\x20components\x20from\x20salesforce','find','all','retrieveAttachment','salesforceService','SalesforceRetrieverService','COMPONENTS_PER_REQUEST','1PCjteg','__importDefault','toString','6800jBySEb','attachmentId','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','retrieveComponents','search','name','10410301FbGwfH','length','base64','../../../../core','query','(((.+)+)+)+$','replace','fileName','fromSalesforce','typedi','250899nUrqFy','../dto/flosum-component-history.dto','ParentId'];a279_0xa07a=function(){return _0x4c9b5f;};return a279_0xa07a();}const a279_0x24e21c=a279_0x4f55;(function(_0x333dce,_0x489a70){const _0x1a4dfd=a279_0x4f55,_0x54b22c=_0x333dce();while(!![]){try{const _0x1a7629=parseInt(_0x1a4dfd(0x207))/0x1*(parseInt(_0x1a4dfd(0x1f9))/0x2)+-parseInt(_0x1a4dfd(0x1e8))/0x3+parseInt(_0x1a4dfd(0x1ec))/0x4*(parseInt(_0x1a4dfd(0x1ee))/0x5)+-parseInt(_0x1a4dfd(0x1f0))/0x6+parseInt(_0x1a4dfd(0x1fb))/0x7*(parseInt(_0x1a4dfd(0x1f3))/0x8)+-parseInt(_0x1a4dfd(0x1f2))/0x9*(-parseInt(_0x1a4dfd(0x20a))/0xa)+-parseInt(_0x1a4dfd(0x210))/0xb;if(_0x1a7629===_0x489a70)break;else _0x54b22c['push'](_0x54b22c['shift']());}catch(_0x1a0459){_0x54b22c['push'](_0x54b22c['shift']());}}}(a279_0xa07a,0x3f001));const a279_0x5e953f=(function(){let _0x29f0d5=!![];return function(_0x44d9b3,_0x48deba){const _0x17c7cd=_0x29f0d5?function(){const _0x42de35=a279_0x4f55;if(_0x48deba){const _0x2c359a=_0x48deba[_0x42de35(0x1f4)](_0x44d9b3,arguments);return _0x48deba=null,_0x2c359a;}}:function(){};return _0x29f0d5=![],_0x17c7cd;};}()),a279_0x18028c=a279_0x5e953f(this,function(){const _0x4d1a3a=a279_0x4f55;return a279_0x18028c[_0x4d1a3a(0x209)]()[_0x4d1a3a(0x20e)](_0x4d1a3a(0x215))['toString']()['constructor'](a279_0x18028c)[_0x4d1a3a(0x20e)](_0x4d1a3a(0x215));});a279_0x18028c();'use strict';function a279_0x4f55(_0x4b77e7,_0x40b972){const _0x582995=a279_0xa07a();return a279_0x4f55=function(_0x18028c,_0x5e953f){_0x18028c=_0x18028c-0x1e4;let _0xa07a0d=_0x582995[_0x18028c];return _0xa07a0d;},a279_0x4f55(_0x4b77e7,_0x40b972);}var __importDefault=this&&this[a279_0x24e21c(0x208)]||function(_0x4dfa4a){return _0x4dfa4a&&_0x4dfa4a['__esModule']?_0x4dfa4a:{'default':_0x4dfa4a};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a279_0x24e21c(0x205)]=void 0x0;const core_1=require(a279_0x24e21c(0x213)),typedi_1=__importDefault(require(a279_0x24e21c(0x1e7))),salesforce_query_service_1=require('./salesforce-query.service'),queries_1=require('../queries'),flosum_component_history_dto_1=require(a279_0x24e21c(0x1e9));class SalesforceRetrieverService{constructor(_0x2316f7){const _0x1b1175=a279_0x24e21c;this[_0x1b1175(0x204)]=_0x2316f7,this['logger']=new core_1['Logger'](SalesforceRetrieverService[_0x1b1175(0x20f)]),this[_0x1b1175(0x206)]=0xbb8,this['COMPONENTS_PER_QUERY']=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0x346afd){const _0x57fa8a=a279_0x24e21c;this[_0x57fa8a(0x1eb)][_0x57fa8a(0x1fd)](_0x57fa8a(0x20c),_0x346afd[_0x57fa8a(0x211)]);const _0x11aa90=typedi_1[_0x57fa8a(0x1f5)][_0x57fa8a(0x1f6)](salesforce_query_service_1['SalesforceQueryService']),_0x5658a6=_0x346afd['map'](_0x1b7126=>'\x27'+_0x1b7126+'\x27'),_0x45c7fb=[];while(_0x5658a6['length']){const _0x5c8da5=_0x5658a6[_0x57fa8a(0x1fc)](0x0,this[_0x57fa8a(0x1fa)]),_0x6a3fcf=_0x11aa90[_0x57fa8a(0x214)](queries_1['GET_ATTACHMENT_BY_PARENT_IDS_QUERY'][_0x57fa8a(0x1e4)](_0x57fa8a(0x1f1),_0x5c8da5[_0x57fa8a(0x1f7)]())),_0x12f7db=_0x11aa90['query'](queries_1['GET_COMPONENT_HISTORIES_BY_IDS'][_0x57fa8a(0x1e4)]('%ids%',_0x5c8da5[_0x57fa8a(0x1f7)]()))[_0x57fa8a(0x1ed)](_0x119bbd=>_0x119bbd['map'](_0x26bf29=>flosum_component_history_dto_1['FlosumComponentHistoryDto'][_0x57fa8a(0x1e6)](_0x26bf29))),[_0x479fe7,_0x922889]=await Promise[_0x57fa8a(0x202)]([_0x6a3fcf,_0x12f7db]);for(const _0x4ebe38 of _0x922889){const _0xef63fc=_0x479fe7[_0x57fa8a(0x201)](_0x32d6a0=>_0x32d6a0[_0x57fa8a(0x1ea)]===_0x4ebe38['id']);_0xef63fc&&_0x45c7fb[_0x57fa8a(0x1ff)]({'fileType':_0xef63fc['Name'],'fileName':_0x4ebe38['filename'],'attachmentId':_0xef63fc['Id']});}}return _0x45c7fb;}async['retrieveLastComponents'](_0x21f5bd){const _0x42f711=a279_0x24e21c,_0xe81854=await this[_0x42f711(0x1ef)](_0x21f5bd);this[_0x42f711(0x1eb)][_0x42f711(0x1fd)](_0x42f711(0x200));const _0xd7cc96=[];for(const _0x56b799 of _0xe81854){const _0x31f3e7=await this[_0x42f711(0x204)][_0x42f711(0x203)](_0x56b799[_0x42f711(0x20b)],!![]);_0xd7cc96['push']({'body':_0x31f3e7[_0x42f711(0x209)](_0x42f711(0x212)),'fileName':_0x56b799[_0x42f711(0x1e5)],'fileType':_0x56b799['fileType']}),this[_0x42f711(0x1eb)]['info'](_0x42f711(0x1f8),_0xd7cc96[_0x42f711(0x211)],_0x21f5bd[_0x42f711(0x211)]);}return _0xd7cc96;}async[a279_0x24e21c(0x1fe)](_0x1205a4){const _0x1f9292=a279_0x24e21c;if(!_0x1205a4['length'])return[];const _0x4bd364=await this[_0x1f9292(0x204)][_0x1f9292(0x20d)](_0x1205a4);return _0x4bd364;}}exports[a279_0x24e21c(0x205)]=SalesforceRetrieverService;