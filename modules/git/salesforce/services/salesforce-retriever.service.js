const a237_0x2b43de=a237_0x26fa;(function(_0x29b26d,_0x1c7c0a){const _0x4dd18b=a237_0x26fa,_0x20e6e1=_0x29b26d();while(!![]){try{const _0x45a970=-parseInt(_0x4dd18b(0x194))/0x1*(parseInt(_0x4dd18b(0x19a))/0x2)+parseInt(_0x4dd18b(0x16e))/0x3+parseInt(_0x4dd18b(0x197))/0x4*(-parseInt(_0x4dd18b(0x188))/0x5)+-parseInt(_0x4dd18b(0x183))/0x6*(-parseInt(_0x4dd18b(0x186))/0x7)+parseInt(_0x4dd18b(0x182))/0x8+parseInt(_0x4dd18b(0x168))/0x9+-parseInt(_0x4dd18b(0x195))/0xa*(-parseInt(_0x4dd18b(0x184))/0xb);if(_0x45a970===_0x1c7c0a)break;else _0x20e6e1['push'](_0x20e6e1['shift']());}catch(_0xac355e){_0x20e6e1['push'](_0x20e6e1['shift']());}}}(a237_0x4b6b,0x71969));const a237_0x7682b0=(function(){let _0x25b210=!![];return function(_0x3cba54,_0x18d6b4){const _0x556035=_0x25b210?function(){const _0x4b1890=a237_0x26fa;if(_0x18d6b4){const _0x253ddc=_0x18d6b4[_0x4b1890(0x180)](_0x3cba54,arguments);return _0x18d6b4=null,_0x253ddc;}}:function(){};return _0x25b210=![],_0x556035;};}()),a237_0x33bf5f=a237_0x7682b0(this,function(){const _0x4d5f3a=a237_0x26fa;return a237_0x33bf5f[_0x4d5f3a(0x193)]()[_0x4d5f3a(0x175)](_0x4d5f3a(0x16f))[_0x4d5f3a(0x193)]()['constructor'](a237_0x33bf5f)['search'](_0x4d5f3a(0x16f));});a237_0x33bf5f();'use strict';var __importDefault=this&&this[a237_0x2b43de(0x187)]||function(_0x28d2b6){const _0x4b5d79=a237_0x2b43de;return _0x28d2b6&&_0x28d2b6[_0x4b5d79(0x17b)]?_0x28d2b6:{'default':_0x28d2b6};};Object['defineProperty'](exports,a237_0x2b43de(0x17b),{'value':!![]}),exports[a237_0x2b43de(0x17c)]=void 0x0;const core_1=require(a237_0x2b43de(0x19c)),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require(a237_0x2b43de(0x164)),queries_1=require(a237_0x2b43de(0x19e)),flosum_component_history_dto_1=require(a237_0x2b43de(0x16b));class SalesforceRetrieverService{constructor(_0x1efddd){const _0x427cad=a237_0x2b43de;this[_0x427cad(0x16a)]=_0x1efddd,this['logger']=new core_1[(_0x427cad(0x174))](SalesforceRetrieverService[_0x427cad(0x18a)]),this[_0x427cad(0x166)]=0xbb8,this[_0x427cad(0x192)]=0x1f4;}async[a237_0x2b43de(0x199)](_0x4e7530){const _0xab8aa7=a237_0x2b43de;this[_0xab8aa7(0x179)][_0xab8aa7(0x18c)](_0xab8aa7(0x19b),_0x4e7530['length']);const _0x1aca53=typedi_1['default'][_0xab8aa7(0x19f)](salesforce_query_service_1['SalesforceQueryService']),_0x128545=_0x4e7530[_0xab8aa7(0x196)](_0x21d304=>'\x27'+_0x21d304+'\x27'),_0x411929=[];while(_0x128545[_0xab8aa7(0x178)]){const _0x5c6584=_0x128545[_0xab8aa7(0x16c)](0x0,this[_0xab8aa7(0x192)]),_0x5e11ae=_0x1aca53[_0xab8aa7(0x190)](queries_1[_0xab8aa7(0x191)][_0xab8aa7(0x17e)](_0xab8aa7(0x19d),_0x5c6584[_0xab8aa7(0x165)]())),_0x34c361=_0x1aca53[_0xab8aa7(0x190)](queries_1[_0xab8aa7(0x171)][_0xab8aa7(0x17e)](_0xab8aa7(0x17a),_0x5c6584[_0xab8aa7(0x165)]()))['then'](_0x8dcb74=>_0x8dcb74[_0xab8aa7(0x196)](_0x4ea17b=>flosum_component_history_dto_1[_0xab8aa7(0x177)][_0xab8aa7(0x172)](_0x4ea17b))),[_0x20b842,_0x3c1197]=await Promise[_0xab8aa7(0x185)]([_0x5e11ae,_0x34c361]);for(const _0x20beca of _0x3c1197){const _0x2d0de2=_0x20b842['find'](_0x3369b8=>_0x3369b8['ParentId']===_0x20beca['id']);_0x2d0de2&&_0x411929[_0xab8aa7(0x17f)]({'fileType':_0x2d0de2[_0xab8aa7(0x18b)],'fileName':_0x20beca[_0xab8aa7(0x16d)],'attachmentId':_0x2d0de2['Id']});}}return _0x411929;}async[a237_0x2b43de(0x1a0)](_0x20ec71){const _0x22a089=a237_0x2b43de,_0x2751e5=await this['retrieveComponentIdsFromHistoryIds'](_0x20ec71);this[_0x22a089(0x179)][_0x22a089(0x18c)](_0x22a089(0x18f));const _0x47bf66=[];for(const _0xa1ae8f of _0x2751e5){const _0x54625a=await this[_0x22a089(0x16a)][_0x22a089(0x173)](_0xa1ae8f[_0x22a089(0x17d)],!![]);_0x47bf66[_0x22a089(0x17f)]({'body':_0x54625a[_0x22a089(0x193)](_0x22a089(0x189)),'fileName':_0xa1ae8f['fileName'],'fileType':_0xa1ae8f[_0x22a089(0x170)]}),this[_0x22a089(0x179)][_0x22a089(0x18c)](_0x22a089(0x181),_0x47bf66['length'],_0x20ec71['length']);}return _0x47bf66;}async[a237_0x2b43de(0x176)](_0x12d137){const _0x348c3f=a237_0x2b43de,_0xc365e0=[..._0x12d137],_0x311d06=[],_0x35f706=[];while(_0xc365e0[_0x348c3f(0x178)]){const _0x5b03c1=_0xc365e0['splice'](0x0,this[_0x348c3f(0x166)]),_0x4ff780=await this[_0x348c3f(0x16a)][_0x348c3f(0x167)](_0x5b03c1);_0x5b03c1[_0x348c3f(0x178)]!==_0x4ff780['ids'][_0x348c3f(0x178)]?(_0xc365e0[_0x348c3f(0x17f)](..._0x4ff780[_0x348c3f(0x18d)]),_0x311d06[_0x348c3f(0x17f)](..._0x4ff780[_0x348c3f(0x169)])):_0x35f706[_0x348c3f(0x17f)](..._0x5b03c1),this['logger'][_0x348c3f(0x198)](_0x348c3f(0x18e),_0x12d137[_0x348c3f(0x178)]-_0xc365e0[_0x348c3f(0x178)],_0x12d137['length']);}if(_0x35f706[_0x348c3f(0x178)]){const _0x2a2f6c=await this[_0x348c3f(0x1a0)](_0x35f706);_0x311d06['push'](..._0x2a2f6c);}return _0x311d06;}}exports[a237_0x2b43de(0x17c)]=SalesforceRetrieverService;function a237_0x26fa(_0x2ba760,_0x433a4b){const _0x3d53c3=a237_0x4b6b();return a237_0x26fa=function(_0x33bf5f,_0x7682b0){_0x33bf5f=_0x33bf5f-0x164;let _0x4b6b5d=_0x3d53c3[_0x33bf5f];return _0x4b6b5d;},a237_0x26fa(_0x2ba760,_0x433a4b);}function a237_0x4b6b(){const _0x1a5dc2=['FlosumComponentHistoryDto','length','logger','%ids%','__esModule','SalesforceRetrieverService','attachmentId','replace','push','apply','manually\x20retrieved\x20%d/%d\x20components','2839680znfsYc','6ymHdFj','19283iYBNIT','all','3199441pAyBqM','__importDefault','10ziKTlm','base64','name','Name','info','ids','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','manually\x20retrieving\x20components\x20from\x20salesforce','query','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','COMPONENTS_PER_QUERY','toString','49Oqaeyn','1000psCiBd','map','866524GaANeR','log','retrieveComponentIdsFromHistoryIds','12966MFcQkV','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','../../../../core','%parent_ids%','../queries','get','retrieveLastComponents','./salesforce-query.service','join','COMPONENTS_PER_REQUEST','retrieveComponents','2029995vWNGVb','components','salesforceService','../dto/flosum-component-history.dto','splice','filename','9924nAzMaU','(((.+)+)+)+$','fileType','GET_COMPONENT_HISTORIES_BY_IDS','fromSalesforce','retrieveAttachment','Logger','search','run'];a237_0x4b6b=function(){return _0x1a5dc2;};return a237_0x4b6b();}