function a203_0x37d4(_0x5644ef,_0x44710f){const _0x334236=a203_0x3979();return a203_0x37d4=function(_0x191968,_0x5eece3){_0x191968=_0x191968-0x1a2;let _0x397914=_0x334236[_0x191968];return _0x397914;},a203_0x37d4(_0x5644ef,_0x44710f);}const a203_0x3d54ef=a203_0x37d4;function a203_0x3979(){const _0x3b5302=['run','log','36FzITdW','COMPONENTS_PER_REQUEST','defineProperty','get','retrieveLastComponents','join','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','ids','retrieveComponentIdsFromHistoryIds','push','460834BWNylT','989295lbZhkf','length','../../../../core','../dto/flosum-component-history.dto','all','379380LVAOJB','retrieveAttachment','constructor','ParentId','16SxPLQP','manually\x20retrieved\x20%d/%d\x20components','search','attachmentId','11694hxQFGm','retrieveComponents','Logger','3112iNlqmp','info','default','COMPONENTS_PER_QUERY','name','logger','replace','24yXNsjS','query','../queries','apply','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','salesforceService','splice','map','21ssSEwF','__esModule','manually\x20retrieving\x20components\x20from\x20salesforce','5372190wDahMK','filename','fileType','18999hcSssE','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','Name','fromSalesforce','toString','base64','GET_COMPONENT_HISTORIES_BY_IDS','1208562vqahUk'];a203_0x3979=function(){return _0x3b5302;};return a203_0x3979();}(function(_0x411a72,_0x490c26){const _0x4d22b6=a203_0x37d4,_0x459750=_0x411a72();while(!![]){try{const _0x52d316=parseInt(_0x4d22b6(0x1c5))/0x1+-parseInt(_0x4d22b6(0x1cd))/0x2*(parseInt(_0x4d22b6(0x1b5))/0x3)+parseInt(_0x4d22b6(0x1c9))/0x4*(parseInt(_0x4d22b6(0x1c0))/0x5)+-parseInt(_0x4d22b6(0x1b2))/0x6*(-parseInt(_0x4d22b6(0x1a5))/0x7)+parseInt(_0x4d22b6(0x1d0))/0x8*(-parseInt(_0x4d22b6(0x1ab))/0x9)+-parseInt(_0x4d22b6(0x1a8))/0xa+-parseInt(_0x4d22b6(0x1bf))/0xb*(-parseInt(_0x4d22b6(0x1d7))/0xc);if(_0x52d316===_0x490c26)break;else _0x459750['push'](_0x459750['shift']());}catch(_0x121e01){_0x459750['push'](_0x459750['shift']());}}}(a203_0x3979,0x690f3));const a203_0x5eece3=(function(){let _0x213f26=!![];return function(_0x147c62,_0x594388){const _0x31a5b9=_0x213f26?function(){const _0x3fc922=a203_0x37d4;if(_0x594388){const _0xbb5d21=_0x594388[_0x3fc922(0x1da)](_0x147c62,arguments);return _0x594388=null,_0xbb5d21;}}:function(){};return _0x213f26=![],_0x31a5b9;};}()),a203_0x191968=a203_0x5eece3(this,function(){const _0x119164=a203_0x37d4;return a203_0x191968[_0x119164(0x1af)]()[_0x119164(0x1cb)]('(((.+)+)+)+$')[_0x119164(0x1af)]()[_0x119164(0x1c7)](a203_0x191968)[_0x119164(0x1cb)]('(((.+)+)+)+$');});a203_0x191968();'use strict';var __importDefault=this&&this['__importDefault']||function(_0xc7ce13){const _0x2ae7ab=a203_0x37d4;return _0xc7ce13&&_0xc7ce13[_0x2ae7ab(0x1a6)]?_0xc7ce13:{'default':_0xc7ce13};};Object[a203_0x3d54ef(0x1b7)](exports,'__esModule',{'value':!![]}),exports['SalesforceRetrieverService']=void 0x0;const core_1=require(a203_0x3d54ef(0x1c2)),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require('./salesforce-query.service'),queries_1=require(a203_0x3d54ef(0x1d9)),flosum_component_history_dto_1=require(a203_0x3d54ef(0x1c3));class SalesforceRetrieverService{constructor(_0x257907){const _0x3b92d4=a203_0x3d54ef;this['salesforceService']=_0x257907,this[_0x3b92d4(0x1d5)]=new core_1[(_0x3b92d4(0x1cf))](SalesforceRetrieverService[_0x3b92d4(0x1d4)]),this[_0x3b92d4(0x1b6)]=0xbb8,this['COMPONENTS_PER_QUERY']=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0x54565a){const _0x27167f=a203_0x3d54ef;this[_0x27167f(0x1d5)]['info'](_0x27167f(0x1db),_0x54565a[_0x27167f(0x1c1)]);const _0x526a0e=typedi_1[_0x27167f(0x1d2)][_0x27167f(0x1b8)](salesforce_query_service_1['SalesforceQueryService']),_0x3160e0=_0x54565a[_0x27167f(0x1a4)](_0x56e37e=>'\x27'+_0x56e37e+'\x27'),_0x46310e=[];while(_0x3160e0[_0x27167f(0x1c1)]){const _0xf1ca6d=_0x3160e0['splice'](0x0,this[_0x27167f(0x1d3)]),_0x5818a4=_0x526a0e[_0x27167f(0x1d8)](queries_1[_0x27167f(0x1ac)][_0x27167f(0x1d6)]('%parent_ids%',_0xf1ca6d['join']())),_0x1ff7c9=_0x526a0e[_0x27167f(0x1d8)](queries_1[_0x27167f(0x1b1)][_0x27167f(0x1d6)]('%ids%',_0xf1ca6d[_0x27167f(0x1ba)]()))['then'](_0x21f795=>_0x21f795[_0x27167f(0x1a4)](_0x880c3b=>flosum_component_history_dto_1['FlosumComponentHistoryDto'][_0x27167f(0x1ae)](_0x880c3b))),[_0x4dcdf8,_0x81acf7]=await Promise[_0x27167f(0x1c4)]([_0x5818a4,_0x1ff7c9]);for(const _0x1c612b of _0x81acf7){const _0x215e0d=_0x4dcdf8['find'](_0x9e93e=>_0x9e93e[_0x27167f(0x1c8)]===_0x1c612b['id']);_0x215e0d&&_0x46310e[_0x27167f(0x1be)]({'fileType':_0x215e0d[_0x27167f(0x1ad)],'fileName':_0x1c612b[_0x27167f(0x1a9)],'attachmentId':_0x215e0d['Id']});}}return _0x46310e;}async[a203_0x3d54ef(0x1b9)](_0x1be65c){const _0x210fd3=a203_0x3d54ef,_0x4d03bb=await this[_0x210fd3(0x1bd)](_0x1be65c);this[_0x210fd3(0x1d5)]['info'](_0x210fd3(0x1a7));const _0x1db6dc=[];for(const _0x31007a of _0x4d03bb){const _0x4bba8c=await this[_0x210fd3(0x1a2)][_0x210fd3(0x1c6)](_0x31007a[_0x210fd3(0x1cc)],!![]);_0x1db6dc[_0x210fd3(0x1be)]({'body':_0x4bba8c[_0x210fd3(0x1af)](_0x210fd3(0x1b0)),'fileName':_0x31007a['fileName'],'fileType':_0x31007a[_0x210fd3(0x1aa)]}),this[_0x210fd3(0x1d5)][_0x210fd3(0x1d1)](_0x210fd3(0x1ca),_0x1db6dc[_0x210fd3(0x1c1)],_0x1be65c[_0x210fd3(0x1c1)]);}return _0x1db6dc;}async[a203_0x3d54ef(0x1b3)](_0x3dfacc){const _0x6f5b57=a203_0x3d54ef,_0x1f7820=[..._0x3dfacc],_0x419fd4=[],_0x2a768e=[];while(_0x1f7820['length']){const _0x30ece3=_0x1f7820[_0x6f5b57(0x1a3)](0x0,this[_0x6f5b57(0x1b6)]),_0x485ac4=await this[_0x6f5b57(0x1a2)][_0x6f5b57(0x1ce)](_0x30ece3);_0x30ece3[_0x6f5b57(0x1c1)]!==_0x485ac4[_0x6f5b57(0x1bc)][_0x6f5b57(0x1c1)]?(_0x1f7820[_0x6f5b57(0x1be)](..._0x485ac4['ids']),_0x419fd4[_0x6f5b57(0x1be)](..._0x485ac4['components'])):_0x2a768e[_0x6f5b57(0x1be)](..._0x30ece3),this['logger'][_0x6f5b57(0x1b4)](_0x6f5b57(0x1bb),_0x3dfacc[_0x6f5b57(0x1c1)]-_0x1f7820[_0x6f5b57(0x1c1)],_0x3dfacc[_0x6f5b57(0x1c1)]);}if(_0x2a768e[_0x6f5b57(0x1c1)]){const _0x1a55c2=await this[_0x6f5b57(0x1b9)](_0x2a768e);_0x419fd4[_0x6f5b57(0x1be)](..._0x1a55c2);}return _0x419fd4;}}exports['SalesforceRetrieverService']=SalesforceRetrieverService;