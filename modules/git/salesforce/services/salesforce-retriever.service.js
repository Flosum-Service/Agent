function a237_0x5043(_0x318f6a,_0x473067){const _0xda100f=a237_0x2013();return a237_0x5043=function(_0x4d2305,_0x182ea8){_0x4d2305=_0x4d2305-0x13c;let _0x2013e6=_0xda100f[_0x4d2305];return _0x2013e6;},a237_0x5043(_0x318f6a,_0x473067);}const a237_0x26992f=a237_0x5043;(function(_0x31e2ec,_0x45028d){const _0x29513c=a237_0x5043,_0x240000=_0x31e2ec();while(!![]){try{const _0x217ce7=parseInt(_0x29513c(0x170))/0x1*(-parseInt(_0x29513c(0x14a))/0x2)+-parseInt(_0x29513c(0x14c))/0x3+parseInt(_0x29513c(0x162))/0x4+-parseInt(_0x29513c(0x148))/0x5+parseInt(_0x29513c(0x150))/0x6+parseInt(_0x29513c(0x155))/0x7*(-parseInt(_0x29513c(0x158))/0x8)+parseInt(_0x29513c(0x16e))/0x9;if(_0x217ce7===_0x45028d)break;else _0x240000['push'](_0x240000['shift']());}catch(_0x318b21){_0x240000['push'](_0x240000['shift']());}}}(a237_0x2013,0x208ff));const a237_0x182ea8=(function(){let _0x5c045d=!![];return function(_0x2a7bfa,_0x6978eb){const _0x2be78a=_0x5c045d?function(){const _0x2dea45=a237_0x5043;if(_0x6978eb){const _0x4a4272=_0x6978eb[_0x2dea45(0x171)](_0x2a7bfa,arguments);return _0x6978eb=null,_0x4a4272;}}:function(){};return _0x5c045d=![],_0x2be78a;};}()),a237_0x4d2305=a237_0x182ea8(this,function(){const _0x1c244d=a237_0x5043;return a237_0x4d2305['toString']()['search'](_0x1c244d(0x144))[_0x1c244d(0x16c)]()[_0x1c244d(0x175)](a237_0x4d2305)[_0x1c244d(0x16a)](_0x1c244d(0x144));});a237_0x4d2305();function a237_0x2013(){const _0x52423a=['manually\x20retrieved\x20%d/%d\x20components','splice','(((.+)+)+)+$','Logger','ids','retrieveAttachment','175870gLerhB','../dto/flosum-component-history.dto','26542AUXtFd','fileName','618243KNLtmW','Name','retrieveComponentIdsFromHistoryIds','replace','933612zqzAke','base64','COMPONENTS_PER_REQUEST','logger','attachmentId','406399psmwEu','GET_COMPONENT_HISTORIES_BY_IDS','ParentId','8jkRuAU','FlosumComponentHistoryDto','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','info','then','salesforceService','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','query','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','length','516064LjWBgq','../../../../core','retrieveLastComponents','SalesforceRetrieverService','run','log','join','typedi','search','default','toString','retrieveComponents','2407572HOPLEs','push','9FMLVMK','apply','name','SalesforceQueryService','map','constructor','./salesforce-query.service','%parent_ids%','COMPONENTS_PER_QUERY','manually\x20retrieving\x20components\x20from\x20salesforce','__esModule','%ids%','find','../queries','__importDefault'];a237_0x2013=function(){return _0x52423a;};return a237_0x2013();}'use strict';var __importDefault=this&&this[a237_0x26992f(0x141)]||function(_0x4ae156){const _0x16ddbb=a237_0x26992f;return _0x4ae156&&_0x4ae156[_0x16ddbb(0x13d)]?_0x4ae156:{'default':_0x4ae156};};Object['defineProperty'](exports,a237_0x26992f(0x13d),{'value':!![]}),exports['SalesforceRetrieverService']=void 0x0;const core_1=require(a237_0x26992f(0x163)),typedi_1=__importDefault(require(a237_0x26992f(0x169))),salesforce_query_service_1=require(a237_0x26992f(0x176)),queries_1=require(a237_0x26992f(0x140)),flosum_component_history_dto_1=require(a237_0x26992f(0x149));class SalesforceRetrieverService{constructor(_0x22abba){const _0x2a6bf0=a237_0x26992f;this['salesforceService']=_0x22abba,this[_0x2a6bf0(0x153)]=new core_1[(_0x2a6bf0(0x145))](SalesforceRetrieverService[_0x2a6bf0(0x172)]),this[_0x2a6bf0(0x152)]=0xbb8,this[_0x2a6bf0(0x178)]=0x1f4;}async[a237_0x26992f(0x14e)](_0x3c6d0d){const _0x1eaa63=a237_0x26992f;this[_0x1eaa63(0x153)]['info'](_0x1eaa63(0x160),_0x3c6d0d['length']);const _0x4f4ea4=typedi_1[_0x1eaa63(0x16b)]['get'](salesforce_query_service_1[_0x1eaa63(0x173)]),_0x245332=_0x3c6d0d[_0x1eaa63(0x174)](_0x14abb0=>'\x27'+_0x14abb0+'\x27'),_0x1bfda5=[];while(_0x245332[_0x1eaa63(0x161)]){const _0x48f94e=_0x245332['splice'](0x0,this[_0x1eaa63(0x178)]),_0x463b51=_0x4f4ea4['query'](queries_1[_0x1eaa63(0x15e)]['replace'](_0x1eaa63(0x177),_0x48f94e['join']())),_0x5153e8=_0x4f4ea4[_0x1eaa63(0x15f)](queries_1[_0x1eaa63(0x156)][_0x1eaa63(0x14f)](_0x1eaa63(0x13e),_0x48f94e[_0x1eaa63(0x168)]()))[_0x1eaa63(0x15c)](_0x5d6cd4=>_0x5d6cd4[_0x1eaa63(0x174)](_0x29d54d=>flosum_component_history_dto_1[_0x1eaa63(0x159)]['fromSalesforce'](_0x29d54d))),[_0x54dbf2,_0x491397]=await Promise['all']([_0x463b51,_0x5153e8]);for(const _0x4988c4 of _0x491397){const _0x2c3347=_0x54dbf2[_0x1eaa63(0x13f)](_0x3e8be3=>_0x3e8be3[_0x1eaa63(0x157)]===_0x4988c4['id']);_0x2c3347&&_0x1bfda5[_0x1eaa63(0x16f)]({'fileType':_0x2c3347[_0x1eaa63(0x14d)],'fileName':_0x4988c4['filename'],'attachmentId':_0x2c3347['Id']});}}return _0x1bfda5;}async[a237_0x26992f(0x164)](_0x2e5efa){const _0x1da082=a237_0x26992f,_0x1dbb33=await this['retrieveComponentIdsFromHistoryIds'](_0x2e5efa);this['logger'][_0x1da082(0x15b)](_0x1da082(0x13c));const _0x4f026f=[];for(const _0x32f622 of _0x1dbb33){const _0x165f63=await this[_0x1da082(0x15d)][_0x1da082(0x147)](_0x32f622[_0x1da082(0x154)],!![]);_0x4f026f[_0x1da082(0x16f)]({'body':_0x165f63['toString'](_0x1da082(0x151)),'fileName':_0x32f622[_0x1da082(0x14b)],'fileType':_0x32f622['fileType']}),this['logger'][_0x1da082(0x15b)](_0x1da082(0x142),_0x4f026f['length'],_0x2e5efa['length']);}return _0x4f026f;}async[a237_0x26992f(0x166)](_0x36d9a0){const _0x3d150c=a237_0x26992f,_0x22f49f=[..._0x36d9a0],_0x1cf435=[],_0x2e6f90=[];while(_0x22f49f[_0x3d150c(0x161)]){const _0x3a480f=_0x22f49f[_0x3d150c(0x143)](0x0,this[_0x3d150c(0x152)]),_0x3efa79=await this[_0x3d150c(0x15d)][_0x3d150c(0x16d)](_0x3a480f);_0x3a480f['length']!==_0x3efa79[_0x3d150c(0x146)][_0x3d150c(0x161)]?(_0x22f49f[_0x3d150c(0x16f)](..._0x3efa79[_0x3d150c(0x146)]),_0x1cf435['push'](..._0x3efa79['components'])):_0x2e6f90['push'](..._0x3a480f),this['logger'][_0x3d150c(0x167)](_0x3d150c(0x15a),_0x36d9a0['length']-_0x22f49f['length'],_0x36d9a0[_0x3d150c(0x161)]);}if(_0x2e6f90[_0x3d150c(0x161)]){const _0x5506c5=await this[_0x3d150c(0x164)](_0x2e6f90);_0x1cf435[_0x3d150c(0x16f)](..._0x5506c5);}return _0x1cf435;}}exports[a237_0x26992f(0x165)]=SalesforceRetrieverService;