const a281_0x3e6e54=a281_0x1433;(function(_0x42edd1,_0x5e1737){const _0x3748ed=a281_0x1433,_0x85a01b=_0x42edd1();while(!![]){try{const _0xa6d05=parseInt(_0x3748ed(0x171))/0x1+-parseInt(_0x3748ed(0x165))/0x2+parseInt(_0x3748ed(0x17a))/0x3*(-parseInt(_0x3748ed(0x168))/0x4)+parseInt(_0x3748ed(0x162))/0x5*(-parseInt(_0x3748ed(0x16c))/0x6)+parseInt(_0x3748ed(0x17c))/0x7+parseInt(_0x3748ed(0x183))/0x8*(-parseInt(_0x3748ed(0x18a))/0x9)+parseInt(_0x3748ed(0x167))/0xa;if(_0xa6d05===_0x5e1737)break;else _0x85a01b['push'](_0x85a01b['shift']());}catch(_0x18b040){_0x85a01b['push'](_0x85a01b['shift']());}}}(a281_0x4bdf,0x51a6f));function a281_0x4bdf(){const _0x1323ed=['SalesforceQueryService','%ids%','__esModule','fileType','__importDefault','9ucjrpx','(((.+)+)+)+$','defineProperty','fileName','all','ParentId','SalesforceRetrieverService','Name','base64','Logger','constructor','GET_COMPONENT_HISTORIES_BY_IDS','../../../../core','push','logger','fromSalesforce','retrieveComponentIdsFromHistoryIds','splice','5UetErI','find','COMPONENTS_PER_QUERY','953304GPQnxd','run','7091390wfPMoD','4CKAifH','info','length','filename','1445328LqVenH','toString','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','name','get','220068oYLkSY','then','%parent_ids%','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','retrieveAttachment','COMPONENTS_PER_REQUEST','../queries','../dto/flosum-component-history.dto','replace','138999XLTSYe','Manually\x20retrieved\x20%d/%d\x20components','4418624qmeMKZ','apply','salesforceService','map','query','retrieveComponents','./salesforce-query.service','3696952kGfwYP','join'];a281_0x4bdf=function(){return _0x1323ed;};return a281_0x4bdf();}function a281_0x1433(_0x42aac4,_0x4afc26){const _0x5555a4=a281_0x4bdf();return a281_0x1433=function(_0x57b439,_0x16ec2a){_0x57b439=_0x57b439-0x15b;let _0x4bdfda=_0x5555a4[_0x57b439];return _0x4bdfda;},a281_0x1433(_0x42aac4,_0x4afc26);}const a281_0x16ec2a=(function(){let _0x3f78ae=!![];return function(_0x2a176f,_0x27d1b8){const _0x1c39a9=_0x3f78ae?function(){const _0x2f5cf5=a281_0x1433;if(_0x27d1b8){const _0x508f0b=_0x27d1b8[_0x2f5cf5(0x17d)](_0x2a176f,arguments);return _0x27d1b8=null,_0x508f0b;}}:function(){};return _0x3f78ae=![],_0x1c39a9;};}()),a281_0x57b439=a281_0x16ec2a(this,function(){const _0x2712d6=a281_0x1433;return a281_0x57b439[_0x2712d6(0x16d)]()['search'](_0x2712d6(0x18b))['toString']()[_0x2712d6(0x194)](a281_0x57b439)['search']('(((.+)+)+)+$');});a281_0x57b439();'use strict';var __importDefault=this&&this[a281_0x3e6e54(0x189)]||function(_0x551c41){const _0x299dd5=a281_0x3e6e54;return _0x551c41&&_0x551c41[_0x299dd5(0x187)]?_0x551c41:{'default':_0x551c41};};Object[a281_0x3e6e54(0x18c)](exports,a281_0x3e6e54(0x187),{'value':!![]}),exports[a281_0x3e6e54(0x190)]=void 0x0;const core_1=require(a281_0x3e6e54(0x15c)),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require(a281_0x3e6e54(0x182)),queries_1=require(a281_0x3e6e54(0x177)),flosum_component_history_dto_1=require(a281_0x3e6e54(0x178));class SalesforceRetrieverService{constructor(_0x2582e0){const _0x27a49f=a281_0x3e6e54;this[_0x27a49f(0x17e)]=_0x2582e0,this[_0x27a49f(0x15e)]=new core_1[(_0x27a49f(0x193))](SalesforceRetrieverService[_0x27a49f(0x16f)]),this[_0x27a49f(0x176)]=0xbb8,this[_0x27a49f(0x164)]=0x1f4;}async[a281_0x3e6e54(0x160)](_0x5c8f33){const _0xa7d18=a281_0x3e6e54;this[_0xa7d18(0x15e)][_0xa7d18(0x169)](_0xa7d18(0x174),_0x5c8f33[_0xa7d18(0x16a)]);const _0x94577c=typedi_1['default'][_0xa7d18(0x170)](salesforce_query_service_1[_0xa7d18(0x185)]),_0x54ef55=_0x5c8f33['map'](_0x1804fd=>'\x27'+_0x1804fd+'\x27'),_0x54a374=[];while(_0x54ef55[_0xa7d18(0x16a)]){const _0x1ec09f=_0x54ef55[_0xa7d18(0x161)](0x0,this[_0xa7d18(0x164)]),_0x334599=_0x94577c['query'](queries_1[_0xa7d18(0x16e)]['replace'](_0xa7d18(0x173),_0x1ec09f[_0xa7d18(0x184)]())),_0x13bcd9=_0x94577c[_0xa7d18(0x180)](queries_1[_0xa7d18(0x15b)][_0xa7d18(0x179)](_0xa7d18(0x186),_0x1ec09f[_0xa7d18(0x184)]()))[_0xa7d18(0x172)](_0x4ac13e=>_0x4ac13e[_0xa7d18(0x17f)](_0x2a5f15=>flosum_component_history_dto_1['FlosumComponentHistoryDto'][_0xa7d18(0x15f)](_0x2a5f15))),[_0x129637,_0xd47eaa]=await Promise[_0xa7d18(0x18e)]([_0x334599,_0x13bcd9]);for(const _0x2eb522 of _0xd47eaa){const _0x3f8c81=_0x129637[_0xa7d18(0x163)](_0x1c4e7d=>_0x1c4e7d[_0xa7d18(0x18f)]===_0x2eb522['id']);_0x3f8c81&&_0x54a374[_0xa7d18(0x15d)]({'fileType':_0x3f8c81[_0xa7d18(0x191)],'fileName':_0x2eb522[_0xa7d18(0x16b)],'attachmentId':_0x3f8c81['Id']});}}return _0x54a374;}async['retrieveLastComponents'](_0x1b66dd){const _0x5e3ea5=a281_0x3e6e54,_0x316543=await this[_0x5e3ea5(0x160)](_0x1b66dd);this['logger'][_0x5e3ea5(0x169)]('Manually\x20retrieving\x20components\x20from\x20salesforce');const _0x250ea1=[];for(const _0x5a7972 of _0x316543){const _0x317f85=await this[_0x5e3ea5(0x17e)][_0x5e3ea5(0x175)](_0x5a7972['attachmentId'],!![]);_0x250ea1['push']({'body':_0x317f85[_0x5e3ea5(0x16d)](_0x5e3ea5(0x192)),'fileName':_0x5a7972[_0x5e3ea5(0x18d)],'fileType':_0x5a7972[_0x5e3ea5(0x188)]}),this['logger']['info'](_0x5e3ea5(0x17b),_0x250ea1[_0x5e3ea5(0x16a)],_0x1b66dd[_0x5e3ea5(0x16a)]);}return _0x250ea1;}async[a281_0x3e6e54(0x166)](_0x4ae3f6){const _0xc5d5cc=a281_0x3e6e54;if(!_0x4ae3f6[_0xc5d5cc(0x16a)])return[];const _0x32fd4d=await this[_0xc5d5cc(0x17e)][_0xc5d5cc(0x181)](_0x4ae3f6);return _0x32fd4d;}}exports[a281_0x3e6e54(0x190)]=SalesforceRetrieverService;