function a242_0x56a5(){const _0x439174=['all','base64','then','41152240ULopzJ','./salesforce-query.service','%ids%','../../../../core','logger','push','search','7NNCrNy','typedi','default','info','1135118lsUebT','constructor','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','1ICFSIA','(((.+)+)+)+$','27xFcmXf','toString','480920sIdVFr','query','../queries','manually\x20retrieved\x20%d/%d\x20components','ids','Logger','join','FlosumComponentHistoryDto','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','replace','salesforceService','components','COMPONENTS_PER_REQUEST','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','SalesforceQueryService','get','2249541ekPCsm','%parent_ids%','COMPONENTS_PER_QUERY','map','retrieveLastComponents','Name','run','__esModule','fileType','3533408VDLAzL','__importDefault','retrieveComponents','fileName','390396MsdSeX','filename','length','4303938EiDNKr','GET_COMPONENT_HISTORIES_BY_IDS','manually\x20retrieving\x20components\x20from\x20salesforce','fromSalesforce','SalesforceRetrieverService'];a242_0x56a5=function(){return _0x439174;};return a242_0x56a5();}const a242_0x14d688=a242_0x257d;(function(_0x4996c0,_0x37427c){const _0x4c36a9=a242_0x257d,_0x21c86b=_0x4996c0();while(!![]){try{const _0x4b00e3=parseInt(_0x4c36a9(0x191))/0x1*(-parseInt(_0x4c36a9(0x18e))/0x2)+-parseInt(_0x4c36a9(0x16b))/0x3+-parseInt(_0x4c36a9(0x178))/0x4+parseInt(_0x4c36a9(0x195))/0x5+parseInt(_0x4c36a9(0x17b))/0x6*(-parseInt(_0x4c36a9(0x18a))/0x7)+parseInt(_0x4c36a9(0x174))/0x8*(-parseInt(_0x4c36a9(0x193))/0x9)+parseInt(_0x4c36a9(0x183))/0xa;if(_0x4b00e3===_0x37427c)break;else _0x21c86b['push'](_0x21c86b['shift']());}catch(_0x35b3c2){_0x21c86b['push'](_0x21c86b['shift']());}}}(a242_0x56a5,0xb8184));const a242_0x190fc2=(function(){let _0x55fc45=!![];return function(_0x253092,_0x57c1aa){const _0x5eab51=_0x55fc45?function(){if(_0x57c1aa){const _0x4f122e=_0x57c1aa['apply'](_0x253092,arguments);return _0x57c1aa=null,_0x4f122e;}}:function(){};return _0x55fc45=![],_0x5eab51;};}()),a242_0x42170d=a242_0x190fc2(this,function(){const _0x28d528=a242_0x257d;return a242_0x42170d[_0x28d528(0x194)]()[_0x28d528(0x189)](_0x28d528(0x192))[_0x28d528(0x194)]()[_0x28d528(0x18f)](a242_0x42170d)[_0x28d528(0x189)](_0x28d528(0x192));});a242_0x42170d();'use strict';var __importDefault=this&&this[a242_0x14d688(0x175)]||function(_0x158ddb){const _0x4c7b26=a242_0x14d688;return _0x158ddb&&_0x158ddb[_0x4c7b26(0x172)]?_0x158ddb:{'default':_0x158ddb};};function a242_0x257d(_0x231440,_0x3f569a){const _0xeb3aa2=a242_0x56a5();return a242_0x257d=function(_0x42170d,_0x190fc2){_0x42170d=_0x42170d-0x161;let _0x56a57e=_0xeb3aa2[_0x42170d];return _0x56a57e;},a242_0x257d(_0x231440,_0x3f569a);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a242_0x14d688(0x17f)]=void 0x0;const core_1=require(a242_0x14d688(0x186)),typedi_1=__importDefault(require(a242_0x14d688(0x18b))),salesforce_query_service_1=require(a242_0x14d688(0x184)),queries_1=require(a242_0x14d688(0x197)),flosum_component_history_dto_1=require('../dto/flosum-component-history.dto');class SalesforceRetrieverService{constructor(_0x15547e){const _0x3f6497=a242_0x14d688;this[_0x3f6497(0x165)]=_0x15547e,this[_0x3f6497(0x187)]=new core_1[(_0x3f6497(0x19a))](SalesforceRetrieverService['name']),this[_0x3f6497(0x167)]=0xbb8,this[_0x3f6497(0x16d)]=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0x13c73c){const _0x1bda52=a242_0x14d688;this[_0x1bda52(0x187)]['info'](_0x1bda52(0x190),_0x13c73c[_0x1bda52(0x17a)]);const _0x3b9625=typedi_1[_0x1bda52(0x18c)][_0x1bda52(0x16a)](salesforce_query_service_1[_0x1bda52(0x169)]),_0x4dda41=_0x13c73c[_0x1bda52(0x16e)](_0x545f61=>'\x27'+_0x545f61+'\x27'),_0x173726=[];while(_0x4dda41['length']){const _0x4a936a=_0x4dda41['splice'](0x0,this['COMPONENTS_PER_QUERY']),_0x578119=_0x3b9625[_0x1bda52(0x196)](queries_1[_0x1bda52(0x168)][_0x1bda52(0x164)](_0x1bda52(0x16c),_0x4a936a['join']())),_0x18aee5=_0x3b9625[_0x1bda52(0x196)](queries_1[_0x1bda52(0x17c)][_0x1bda52(0x164)](_0x1bda52(0x185),_0x4a936a[_0x1bda52(0x161)]()))[_0x1bda52(0x182)](_0x5cb3cf=>_0x5cb3cf[_0x1bda52(0x16e)](_0x3cd174=>flosum_component_history_dto_1[_0x1bda52(0x162)][_0x1bda52(0x17e)](_0x3cd174))),[_0x57174a,_0x3a8d70]=await Promise[_0x1bda52(0x180)]([_0x578119,_0x18aee5]);for(const _0x4ee65b of _0x3a8d70){const _0x1663d4=_0x57174a['find'](_0x1ec65f=>_0x1ec65f['ParentId']===_0x4ee65b['id']);_0x1663d4&&_0x173726[_0x1bda52(0x188)]({'fileType':_0x1663d4[_0x1bda52(0x170)],'fileName':_0x4ee65b[_0x1bda52(0x179)],'attachmentId':_0x1663d4['Id']});}}return _0x173726;}async[a242_0x14d688(0x16f)](_0x10aa6a){const _0x1908d3=a242_0x14d688,_0x100ce6=await this['retrieveComponentIdsFromHistoryIds'](_0x10aa6a);this[_0x1908d3(0x187)]['info'](_0x1908d3(0x17d));const _0x3058f8=[];for(const _0x350865 of _0x100ce6){const _0x5b9606=await this[_0x1908d3(0x165)]['retrieveAttachment'](_0x350865['attachmentId'],!![]);_0x3058f8['push']({'body':_0x5b9606[_0x1908d3(0x194)](_0x1908d3(0x181)),'fileName':_0x350865[_0x1908d3(0x177)],'fileType':_0x350865[_0x1908d3(0x173)]}),this[_0x1908d3(0x187)][_0x1908d3(0x18d)](_0x1908d3(0x198),_0x3058f8[_0x1908d3(0x17a)],_0x10aa6a['length']);}return _0x3058f8;}async[a242_0x14d688(0x171)](_0x4c1dc8){const _0x2ecb53=a242_0x14d688,_0xf7a35=[..._0x4c1dc8],_0x53cdf8=[],_0x4db6b0=[];while(_0xf7a35[_0x2ecb53(0x17a)]){const _0x46d712=_0xf7a35['splice'](0x0,this[_0x2ecb53(0x167)]),_0x48be3e=await this[_0x2ecb53(0x165)][_0x2ecb53(0x176)](_0x46d712);_0x46d712[_0x2ecb53(0x17a)]!==_0x48be3e[_0x2ecb53(0x199)][_0x2ecb53(0x17a)]?(_0xf7a35[_0x2ecb53(0x188)](..._0x48be3e[_0x2ecb53(0x199)]),_0x53cdf8[_0x2ecb53(0x188)](..._0x48be3e[_0x2ecb53(0x166)])):_0x4db6b0[_0x2ecb53(0x188)](..._0x46d712),this[_0x2ecb53(0x187)]['log'](_0x2ecb53(0x163),_0x4c1dc8[_0x2ecb53(0x17a)]-_0xf7a35[_0x2ecb53(0x17a)],_0x4c1dc8[_0x2ecb53(0x17a)]);}if(_0x4db6b0['length']){const _0x16ee11=await this[_0x2ecb53(0x16f)](_0x4db6b0);_0x53cdf8[_0x2ecb53(0x188)](..._0x16ee11);}return _0x53cdf8;}}exports[a242_0x14d688(0x17f)]=SalesforceRetrieverService;