const a242_0x3d0bef=a242_0x2622;(function(_0x498bec,_0x5b2caa){const _0x6a12fb=a242_0x2622,_0x449f25=_0x498bec();while(!![]){try{const _0x2d2391=-parseInt(_0x6a12fb(0x143))/0x1+parseInt(_0x6a12fb(0x137))/0x2*(-parseInt(_0x6a12fb(0x142))/0x3)+-parseInt(_0x6a12fb(0x146))/0x4*(parseInt(_0x6a12fb(0x16b))/0x5)+-parseInt(_0x6a12fb(0x168))/0x6+parseInt(_0x6a12fb(0x14f))/0x7+parseInt(_0x6a12fb(0x13b))/0x8*(parseInt(_0x6a12fb(0x160))/0x9)+parseInt(_0x6a12fb(0x145))/0xa;if(_0x2d2391===_0x5b2caa)break;else _0x449f25['push'](_0x449f25['shift']());}catch(_0x225f60){_0x449f25['push'](_0x449f25['shift']());}}}(a242_0x41c0,0x7b9e3));const a242_0x3f2068=(function(){let _0x44003b=!![];return function(_0x53f858,_0x421472){const _0x465fe0=_0x44003b?function(){if(_0x421472){const _0x46992f=_0x421472['apply'](_0x53f858,arguments);return _0x421472=null,_0x46992f;}}:function(){};return _0x44003b=![],_0x465fe0;};}()),a242_0x4fe912=a242_0x3f2068(this,function(){const _0x5611df=a242_0x2622;return a242_0x4fe912[_0x5611df(0x161)]()[_0x5611df(0x16e)](_0x5611df(0x15d))[_0x5611df(0x161)]()['constructor'](a242_0x4fe912)[_0x5611df(0x16e)](_0x5611df(0x15d));});a242_0x4fe912();function a242_0x2622(_0x2ffb46,_0x1093ab){const _0x3a6b78=a242_0x41c0();return a242_0x2622=function(_0x4fe912,_0x3f2068){_0x4fe912=_0x4fe912-0x137;let _0x41c05f=_0x3a6b78[_0x4fe912];return _0x41c05f;},a242_0x2622(_0x2ffb46,_0x1093ab);}'use strict';function a242_0x41c0(){const _0x246bf9=['join','6868820VLjhpN','fileName','../dto/flosum-component-history.dto','then','log','run','retrieveAttachment','get','query','manually\x20retrieving\x20components\x20from\x20salesforce','retrieveLastComponents','find','fromSalesforce','filename','(((.+)+)+)+$','map','COMPONENTS_PER_QUERY','18HMYIFS','toString','manually\x20retrieved\x20%d/%d\x20components','default','Name','attachmentId','length','ids','2416938MZzBAv','Logger','__esModule','35GzWlUi','../queries','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','search','SalesforceRetrieverService','__importDefault','name','253502jXsRla','COMPONENTS_PER_REQUEST','SalesforceQueryService','all','1974424ScZmBP','retrieveComponentIdsFromHistoryIds','GET_COMPONENT_HISTORIES_BY_IDS','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','base64','logger','splice','3oFsrWt','12375IHHPnU','%parent_ids%','5093850nqWhfG','534836rZEfzD','ParentId','replace','salesforceService','defineProperty','info','push','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)'];a242_0x41c0=function(){return _0x246bf9;};return a242_0x41c0();}var __importDefault=this&&this[a242_0x3d0bef(0x170)]||function(_0x33de67){const _0x1f441f=a242_0x3d0bef;return _0x33de67&&_0x33de67[_0x1f441f(0x16a)]?_0x33de67:{'default':_0x33de67};};Object[a242_0x3d0bef(0x14a)](exports,'__esModule',{'value':!![]}),exports[a242_0x3d0bef(0x16f)]=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require('./salesforce-query.service'),queries_1=require(a242_0x3d0bef(0x16c)),flosum_component_history_dto_1=require(a242_0x3d0bef(0x151));class SalesforceRetrieverService{constructor(_0x234736){const _0x2d519e=a242_0x3d0bef;this[_0x2d519e(0x149)]=_0x234736,this[_0x2d519e(0x140)]=new core_1[(_0x2d519e(0x169))](SalesforceRetrieverService[_0x2d519e(0x171)]),this[_0x2d519e(0x138)]=0xbb8,this[_0x2d519e(0x15f)]=0x1f4;}async[a242_0x3d0bef(0x13c)](_0x3b7736){const _0x163b29=a242_0x3d0bef;this[_0x163b29(0x140)][_0x163b29(0x14b)](_0x163b29(0x14d),_0x3b7736[_0x163b29(0x166)]);const _0x304b38=typedi_1[_0x163b29(0x163)][_0x163b29(0x156)](salesforce_query_service_1[_0x163b29(0x139)]),_0x5f2dca=_0x3b7736[_0x163b29(0x15e)](_0x3bb6c6=>'\x27'+_0x3bb6c6+'\x27'),_0x3f17fc=[];while(_0x5f2dca[_0x163b29(0x166)]){const _0x4f1aab=_0x5f2dca[_0x163b29(0x141)](0x0,this[_0x163b29(0x15f)]),_0x23f9f4=_0x304b38['query'](queries_1[_0x163b29(0x13e)]['replace'](_0x163b29(0x144),_0x4f1aab['join']())),_0x1eb2a=_0x304b38[_0x163b29(0x157)](queries_1[_0x163b29(0x13d)][_0x163b29(0x148)]('%ids%',_0x4f1aab[_0x163b29(0x14e)]()))[_0x163b29(0x152)](_0x22e278=>_0x22e278[_0x163b29(0x15e)](_0x47a22d=>flosum_component_history_dto_1['FlosumComponentHistoryDto'][_0x163b29(0x15b)](_0x47a22d))),[_0x425620,_0x1faafa]=await Promise[_0x163b29(0x13a)]([_0x23f9f4,_0x1eb2a]);for(const _0xfc3349 of _0x1faafa){const _0xaaf132=_0x425620[_0x163b29(0x15a)](_0x170bff=>_0x170bff[_0x163b29(0x147)]===_0xfc3349['id']);_0xaaf132&&_0x3f17fc['push']({'fileType':_0xaaf132[_0x163b29(0x164)],'fileName':_0xfc3349[_0x163b29(0x15c)],'attachmentId':_0xaaf132['Id']});}}return _0x3f17fc;}async[a242_0x3d0bef(0x159)](_0x3679d6){const _0x2da3f7=a242_0x3d0bef,_0x221497=await this[_0x2da3f7(0x13c)](_0x3679d6);this[_0x2da3f7(0x140)][_0x2da3f7(0x14b)](_0x2da3f7(0x158));const _0x493889=[];for(const _0x5ec013 of _0x221497){const _0xe868d4=await this[_0x2da3f7(0x149)][_0x2da3f7(0x155)](_0x5ec013[_0x2da3f7(0x165)],!![]);_0x493889[_0x2da3f7(0x14c)]({'body':_0xe868d4['toString'](_0x2da3f7(0x13f)),'fileName':_0x5ec013[_0x2da3f7(0x150)],'fileType':_0x5ec013['fileType']}),this[_0x2da3f7(0x140)][_0x2da3f7(0x14b)](_0x2da3f7(0x162),_0x493889['length'],_0x3679d6['length']);}return _0x493889;}async[a242_0x3d0bef(0x154)](_0xf23a7c){const _0x4704f4=a242_0x3d0bef,_0x2888c2=[..._0xf23a7c],_0x514ceb=[],_0x29120e=[];while(_0x2888c2[_0x4704f4(0x166)]){const _0x4105c8=_0x2888c2[_0x4704f4(0x141)](0x0,this[_0x4704f4(0x138)]),_0x1a6f58=await this[_0x4704f4(0x149)]['retrieveComponents'](_0x4105c8);_0x4105c8['length']!==_0x1a6f58[_0x4704f4(0x167)][_0x4704f4(0x166)]?(_0x2888c2[_0x4704f4(0x14c)](..._0x1a6f58[_0x4704f4(0x167)]),_0x514ceb[_0x4704f4(0x14c)](..._0x1a6f58['components'])):_0x29120e['push'](..._0x4105c8),this[_0x4704f4(0x140)][_0x4704f4(0x153)](_0x4704f4(0x16d),_0xf23a7c[_0x4704f4(0x166)]-_0x2888c2['length'],_0xf23a7c[_0x4704f4(0x166)]);}if(_0x29120e['length']){const _0x2c5e2e=await this[_0x4704f4(0x159)](_0x29120e);_0x514ceb[_0x4704f4(0x14c)](..._0x2c5e2e);}return _0x514ceb;}}exports[a242_0x3d0bef(0x16f)]=SalesforceRetrieverService;