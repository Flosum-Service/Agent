const a242_0x761fab=a242_0x1723;(function(_0x5f19b1,_0x144a64){const _0x4ca919=a242_0x1723,_0x5319f4=_0x5f19b1();while(!![]){try{const _0x5844ad=parseInt(_0x4ca919(0xaa))/0x1+parseInt(_0x4ca919(0x7b))/0x2+parseInt(_0x4ca919(0x7e))/0x3*(-parseInt(_0x4ca919(0xaf))/0x4)+-parseInt(_0x4ca919(0x97))/0x5+-parseInt(_0x4ca919(0xa7))/0x6+-parseInt(_0x4ca919(0xa8))/0x7*(parseInt(_0x4ca919(0xb3))/0x8)+parseInt(_0x4ca919(0x8a))/0x9;if(_0x5844ad===_0x144a64)break;else _0x5319f4['push'](_0x5319f4['shift']());}catch(_0x2f7bb2){_0x5319f4['push'](_0x5319f4['shift']());}}}(a242_0x1af5,0x9cd85));const a242_0x38ae0d=(function(){let _0x238257=!![];return function(_0x166f9b,_0x15c826){const _0x4bc84d=_0x238257?function(){const _0x15d783=a242_0x1723;if(_0x15c826){const _0x413307=_0x15c826[_0x15d783(0x8b)](_0x166f9b,arguments);return _0x15c826=null,_0x413307;}}:function(){};return _0x238257=![],_0x4bc84d;};}()),a242_0x582a0c=a242_0x38ae0d(this,function(){const _0x229371=a242_0x1723;return a242_0x582a0c[_0x229371(0x84)]()[_0x229371(0x81)](_0x229371(0x9d))[_0x229371(0x84)]()[_0x229371(0x9e)](a242_0x582a0c)[_0x229371(0x81)](_0x229371(0x9d));});function a242_0x1723(_0x1fbc24,_0x1d497c){const _0x3bbc0d=a242_0x1af5();return a242_0x1723=function(_0x582a0c,_0x38ae0d){_0x582a0c=_0x582a0c-0x78;let _0x1af5c3=_0x3bbc0d[_0x582a0c];return _0x1af5c3;},a242_0x1723(_0x1fbc24,_0x1d497c);}a242_0x582a0c();'use strict';var __importDefault=this&&this[a242_0x761fab(0x91)]||function(_0x14b7b2){return _0x14b7b2&&_0x14b7b2['__esModule']?_0x14b7b2:{'default':_0x14b7b2};};Object['defineProperty'](exports,a242_0x761fab(0x9c),{'value':!![]}),exports['SalesforceRetrieverService']=void 0x0;const core_1=require(a242_0x761fab(0x7d)),typedi_1=__importDefault(require(a242_0x761fab(0xb0))),salesforce_query_service_1=require(a242_0x761fab(0x79)),queries_1=require(a242_0x761fab(0xa4)),flosum_component_history_dto_1=require(a242_0x761fab(0x7c));class SalesforceRetrieverService{constructor(_0x59f9e5){const _0x3c7653=a242_0x761fab;this[_0x3c7653(0x9b)]=_0x59f9e5,this[_0x3c7653(0x8d)]=new core_1[(_0x3c7653(0xab))](SalesforceRetrieverService[_0x3c7653(0x92)]),this[_0x3c7653(0x90)]=0xbb8,this[_0x3c7653(0x94)]=0x1f4;}async[a242_0x761fab(0x89)](_0x47acd4){const _0x2d78b4=a242_0x761fab;this['logger'][_0x2d78b4(0xae)]('manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)',_0x47acd4[_0x2d78b4(0xb4)]);const _0x4d648d=typedi_1['default'][_0x2d78b4(0x83)](salesforce_query_service_1[_0x2d78b4(0xb2)]),_0x589e50=_0x47acd4[_0x2d78b4(0x7f)](_0x259966=>'\x27'+_0x259966+'\x27'),_0x5dd3fd=[];while(_0x589e50[_0x2d78b4(0xb4)]){const _0x1d9759=_0x589e50[_0x2d78b4(0x86)](0x0,this[_0x2d78b4(0x94)]),_0x552d99=_0x4d648d[_0x2d78b4(0x87)](queries_1[_0x2d78b4(0x98)]['replace'](_0x2d78b4(0xa0),_0x1d9759[_0x2d78b4(0xb1)]())),_0x13a5a6=_0x4d648d['query'](queries_1[_0x2d78b4(0x9a)][_0x2d78b4(0x82)](_0x2d78b4(0x78),_0x1d9759[_0x2d78b4(0xb1)]()))[_0x2d78b4(0xa5)](_0x5c447a=>_0x5c447a[_0x2d78b4(0x7f)](_0x26d417=>flosum_component_history_dto_1[_0x2d78b4(0xb5)][_0x2d78b4(0xa9)](_0x26d417))),[_0x462ba9,_0x279ecd]=await Promise[_0x2d78b4(0xad)]([_0x552d99,_0x13a5a6]);for(const _0x3ecd0f of _0x279ecd){const _0x3afdfb=_0x462ba9[_0x2d78b4(0x88)](_0xe22b48=>_0xe22b48[_0x2d78b4(0xa2)]===_0x3ecd0f['id']);_0x3afdfb&&_0x5dd3fd[_0x2d78b4(0xac)]({'fileType':_0x3afdfb['Name'],'fileName':_0x3ecd0f[_0x2d78b4(0xa6)],'attachmentId':_0x3afdfb['Id']});}}return _0x5dd3fd;}async[a242_0x761fab(0x7a)](_0x507d05){const _0x35b920=a242_0x761fab,_0x1a270c=await this[_0x35b920(0x89)](_0x507d05);this[_0x35b920(0x8d)][_0x35b920(0xae)](_0x35b920(0x80));const _0x1a4c92=[];for(const _0x5ac038 of _0x1a270c){const _0x228496=await this[_0x35b920(0x9b)]['retrieveAttachment'](_0x5ac038[_0x35b920(0x85)],!![]);_0x1a4c92['push']({'body':_0x228496['toString'](_0x35b920(0x99)),'fileName':_0x5ac038[_0x35b920(0x96)],'fileType':_0x5ac038[_0x35b920(0x93)]}),this['logger']['info'](_0x35b920(0x95),_0x1a4c92['length'],_0x507d05[_0x35b920(0xb4)]);}return _0x1a4c92;}async[a242_0x761fab(0x9f)](_0x7e0534){const _0x3704b7=a242_0x761fab,_0xb039ce=[..._0x7e0534],_0x32ff84=[],_0x3a2e8b=[];while(_0xb039ce[_0x3704b7(0xb4)]){const _0x5e25da=_0xb039ce[_0x3704b7(0x86)](0x0,this[_0x3704b7(0x90)]),_0x3d853b=await this[_0x3704b7(0x9b)][_0x3704b7(0xa3)](_0x5e25da);_0x5e25da[_0x3704b7(0xb4)]!==_0x3d853b[_0x3704b7(0xb6)]['length']?(_0xb039ce[_0x3704b7(0xac)](..._0x3d853b['ids']),_0x32ff84[_0x3704b7(0xac)](..._0x3d853b[_0x3704b7(0x8f)])):_0x3a2e8b[_0x3704b7(0xac)](..._0x5e25da),this[_0x3704b7(0x8d)][_0x3704b7(0x8c)](_0x3704b7(0x8e),_0x7e0534[_0x3704b7(0xb4)]-_0xb039ce[_0x3704b7(0xb4)],_0x7e0534['length']);}if(_0x3a2e8b[_0x3704b7(0xb4)]){const _0x284155=await this[_0x3704b7(0x7a)](_0x3a2e8b);_0x32ff84[_0x3704b7(0xac)](..._0x284155);}return _0x32ff84;}}exports[a242_0x761fab(0xa1)]=SalesforceRetrieverService;function a242_0x1af5(){const _0x159e71=['ids','%ids%','./salesforce-query.service','retrieveLastComponents','2266170AqJkOY','../dto/flosum-component-history.dto','../../../../core','93QSlkYm','map','manually\x20retrieving\x20components\x20from\x20salesforce','search','replace','get','toString','attachmentId','splice','query','find','retrieveComponentIdsFromHistoryIds','11377494mHNBEg','apply','log','logger','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','components','COMPONENTS_PER_REQUEST','__importDefault','name','fileType','COMPONENTS_PER_QUERY','manually\x20retrieved\x20%d/%d\x20components','fileName','1685705DyFZNl','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','base64','GET_COMPONENT_HISTORIES_BY_IDS','salesforceService','__esModule','(((.+)+)+)+$','constructor','run','%parent_ids%','SalesforceRetrieverService','ParentId','retrieveComponents','../queries','then','filename','5149182btotvU','729967UWnFsw','fromSalesforce','252148FyXqKc','Logger','push','all','info','23992NImual','typedi','join','SalesforceQueryService','48HJqcVu','length','FlosumComponentHistoryDto'];a242_0x1af5=function(){return _0x159e71;};return a242_0x1af5();}