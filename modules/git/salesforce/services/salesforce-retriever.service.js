function a203_0x22db(_0x2f6d86,_0x1c8e56){const _0x599455=a203_0x7b71();return a203_0x22db=function(_0x4a8f4f,_0x4111b2){_0x4a8f4f=_0x4a8f4f-0xf3;let _0x7b719b=_0x599455[_0x4a8f4f];return _0x7b719b;},a203_0x22db(_0x2f6d86,_0x1c8e56);}const a203_0x5af128=a203_0x22db;function a203_0x7b71(){const _0x2fbfe6=['retrieveLastComponents','retrieveAttachment','../../../../core','SalesforceQueryService','length','4161627VYkXCG','COMPONENTS_PER_QUERY','2073320UqYmWr','ids','typedi','FlosumComponentHistoryDto','SalesforceRetrieverService','default','query','apply','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','search','1110178KTBKws','ParentId','(((.+)+)+)+$','attachmentId','__esModule','manually\x20retrieved\x20%d/%d\x20components','11221ErlWFQ','splice','salesforceService','fileType','find','get','name','80uGqByM','map','5954980hjIFhb','logger','1DKSiVf','6873708ZhLsZl','info','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','7320xAYTuW','constructor','Name','%ids%','push','join','retrieveComponentIdsFromHistoryIds','all','filename','GET_COMPONENT_HISTORIES_BY_IDS','replace','../dto/flosum-component-history.dto','then','COMPONENTS_PER_REQUEST','2898513wrJWfo','base64','log','run','fromSalesforce','toString','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','retrieveComponents'];a203_0x7b71=function(){return _0x2fbfe6;};return a203_0x7b71();}(function(_0x58f9cd,_0x3e8f64){const _0x1ef9dc=a203_0x22db,_0x98af94=_0x58f9cd();while(!![]){try{const _0x1fd9dd=parseInt(_0x1ef9dc(0x11b))/0x1*(parseInt(_0x1ef9dc(0x10a))/0x2)+-parseInt(_0x1ef9dc(0xfe))/0x3+parseInt(_0x1ef9dc(0x100))/0x4+parseInt(_0x1ef9dc(0x119))/0x5+parseInt(_0x1ef9dc(0x11c))/0x6+parseInt(_0x1ef9dc(0x110))/0x7*(parseInt(_0x1ef9dc(0x11f))/0x8)+-parseInt(_0x1ef9dc(0x12d))/0x9*(parseInt(_0x1ef9dc(0x117))/0xa);if(_0x1fd9dd===_0x3e8f64)break;else _0x98af94['push'](_0x98af94['shift']());}catch(_0x3ecc29){_0x98af94['push'](_0x98af94['shift']());}}}(a203_0x7b71,0xdeed9));const a203_0x4111b2=(function(){let _0xb8e7f4=!![];return function(_0xac71e5,_0x11bbe6){const _0x67819c=_0xb8e7f4?function(){const _0x215c5d=a203_0x22db;if(_0x11bbe6){const _0x51d702=_0x11bbe6[_0x215c5d(0x107)](_0xac71e5,arguments);return _0x11bbe6=null,_0x51d702;}}:function(){};return _0xb8e7f4=![],_0x67819c;};}()),a203_0x4a8f4f=a203_0x4111b2(this,function(){const _0x1afbcb=a203_0x22db;return a203_0x4a8f4f[_0x1afbcb(0xf6)]()[_0x1afbcb(0x109)](_0x1afbcb(0x10c))[_0x1afbcb(0xf6)]()[_0x1afbcb(0x120)](a203_0x4a8f4f)[_0x1afbcb(0x109)](_0x1afbcb(0x10c));});a203_0x4a8f4f();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1b04f9){return _0x1b04f9&&_0x1b04f9['__esModule']?_0x1b04f9:{'default':_0x1b04f9};};Object['defineProperty'](exports,a203_0x5af128(0x10e),{'value':!![]}),exports[a203_0x5af128(0x104)]=void 0x0;const core_1=require(a203_0x5af128(0xfb)),typedi_1=__importDefault(require(a203_0x5af128(0x102))),salesforce_query_service_1=require('./salesforce-query.service'),queries_1=require('../queries'),flosum_component_history_dto_1=require(a203_0x5af128(0x12a));class SalesforceRetrieverService{constructor(_0x57b1e7){const _0x1c4eaf=a203_0x5af128;this[_0x1c4eaf(0x112)]=_0x57b1e7,this[_0x1c4eaf(0x11a)]=new core_1['Logger'](SalesforceRetrieverService[_0x1c4eaf(0x116)]),this[_0x1c4eaf(0x12c)]=0xbb8,this[_0x1c4eaf(0xff)]=0x1f4;}async[a203_0x5af128(0x125)](_0x66d211){const _0x102a28=a203_0x5af128;this[_0x102a28(0x11a)][_0x102a28(0x11d)](_0x102a28(0x11e),_0x66d211[_0x102a28(0xfd)]);const _0x5782bc=typedi_1[_0x102a28(0x105)][_0x102a28(0x115)](salesforce_query_service_1[_0x102a28(0xfc)]),_0x5dbdc0=_0x66d211[_0x102a28(0x118)](_0x26ef22=>'\x27'+_0x26ef22+'\x27'),_0xb9e10b=[];while(_0x5dbdc0[_0x102a28(0xfd)]){const _0x190a2c=_0x5dbdc0['splice'](0x0,this['COMPONENTS_PER_QUERY']),_0x446e72=_0x5782bc[_0x102a28(0x106)](queries_1[_0x102a28(0xf7)][_0x102a28(0x129)]('%parent_ids%',_0x190a2c[_0x102a28(0x124)]())),_0x16f424=_0x5782bc[_0x102a28(0x106)](queries_1[_0x102a28(0x128)][_0x102a28(0x129)](_0x102a28(0x122),_0x190a2c[_0x102a28(0x124)]()))[_0x102a28(0x12b)](_0x140654=>_0x140654[_0x102a28(0x118)](_0x5a3aa3=>flosum_component_history_dto_1[_0x102a28(0x103)][_0x102a28(0xf5)](_0x5a3aa3))),[_0x488510,_0x2337c6]=await Promise[_0x102a28(0x126)]([_0x446e72,_0x16f424]);for(const _0x1561b6 of _0x2337c6){const _0x1279f8=_0x488510[_0x102a28(0x114)](_0x279b21=>_0x279b21[_0x102a28(0x10b)]===_0x1561b6['id']);_0x1279f8&&_0xb9e10b[_0x102a28(0x123)]({'fileType':_0x1279f8[_0x102a28(0x121)],'fileName':_0x1561b6[_0x102a28(0x127)],'attachmentId':_0x1279f8['Id']});}}return _0xb9e10b;}async[a203_0x5af128(0xf9)](_0x300261){const _0x281320=a203_0x5af128,_0x279b3a=await this[_0x281320(0x125)](_0x300261);this[_0x281320(0x11a)]['info']('manually\x20retrieving\x20components\x20from\x20salesforce');const _0x1db712=[];for(const _0x2d7a7c of _0x279b3a){const _0x52c330=await this[_0x281320(0x112)][_0x281320(0xfa)](_0x2d7a7c[_0x281320(0x10d)],!![]);_0x1db712[_0x281320(0x123)]({'body':_0x52c330[_0x281320(0xf6)](_0x281320(0x12e)),'fileName':_0x2d7a7c['fileName'],'fileType':_0x2d7a7c[_0x281320(0x113)]}),this[_0x281320(0x11a)][_0x281320(0x11d)](_0x281320(0x10f),_0x1db712[_0x281320(0xfd)],_0x300261[_0x281320(0xfd)]);}return _0x1db712;}async[a203_0x5af128(0xf4)](_0x267fb9){const _0xf38011=a203_0x5af128,_0x1a1b01=[..._0x267fb9],_0x464862=[],_0x5e550d=[];while(_0x1a1b01['length']){const _0x15d663=_0x1a1b01[_0xf38011(0x111)](0x0,this[_0xf38011(0x12c)]),_0x22e1fc=await this[_0xf38011(0x112)][_0xf38011(0xf8)](_0x15d663);_0x15d663[_0xf38011(0xfd)]!==_0x22e1fc[_0xf38011(0x101)]['length']?(_0x1a1b01[_0xf38011(0x123)](..._0x22e1fc[_0xf38011(0x101)]),_0x464862[_0xf38011(0x123)](..._0x22e1fc['components'])):_0x5e550d[_0xf38011(0x123)](..._0x15d663),this['logger'][_0xf38011(0xf3)](_0xf38011(0x108),_0x267fb9[_0xf38011(0xfd)]-_0x1a1b01[_0xf38011(0xfd)],_0x267fb9[_0xf38011(0xfd)]);}if(_0x5e550d['length']){const _0x30014e=await this['retrieveLastComponents'](_0x5e550d);_0x464862[_0xf38011(0x123)](..._0x30014e);}return _0x464862;}}exports['SalesforceRetrieverService']=SalesforceRetrieverService;