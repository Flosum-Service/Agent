function a242_0x1a96(){const _0x439fa0=['splice','retrieveComponentIdsFromHistoryIds','join','(((.+)+)+)+$','1498122PFUvvA','constructor','filename','../dto/flosum-component-history.dto','461055AfFVfZ','4638iseYTQ','./salesforce-query.service','../../../../core','info','SalesforceQueryService','469apHQfV','length','COMPONENTS_PER_REQUEST','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','8vawzkJ','replace','run','__importDefault','1888620spKqeY','GET_COMPONENT_HISTORIES_BY_IDS','ids','default','logger','name','push','../queries','map','retrieveComponents','manually\x20retrieving\x20components\x20from\x20salesforce','42712NXJDwH','all','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','Name','attachmentId','base64','%parent_ids%','__esModule','Logger','apply','1KFdvRd','find','get','FlosumComponentHistoryDto','COMPONENTS_PER_QUERY','fileName','1346080swpURn','ParentId','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','retrieveLastComponents','1708272UNAmtk','SalesforceRetrieverService','toString','then','retrieveAttachment','salesforceService','search','query'];a242_0x1a96=function(){return _0x439fa0;};return a242_0x1a96();}const a242_0x399337=a242_0x291f;(function(_0x613f9d,_0x2e6bf8){const _0x30114a=a242_0x291f,_0xe2e7cc=_0x613f9d();while(!![]){try{const _0x45b7aa=parseInt(_0x30114a(0x1cf))/0x1*(parseInt(_0x30114a(0x1e5))/0x2)+-parseInt(_0x30114a(0x1ea))/0x3*(-parseInt(_0x30114a(0x1b6))/0x4)+parseInt(_0x30114a(0x1e9))/0x5+parseInt(_0x30114a(0x1ba))/0x6+-parseInt(_0x30114a(0x1b2))/0x7*(parseInt(_0x30114a(0x1c5))/0x8)+-parseInt(_0x30114a(0x1d9))/0x9+-parseInt(_0x30114a(0x1d5))/0xa;if(_0x45b7aa===_0x2e6bf8)break;else _0xe2e7cc['push'](_0xe2e7cc['shift']());}catch(_0x4ecaa6){_0xe2e7cc['push'](_0xe2e7cc['shift']());}}}(a242_0x1a96,0x7474d));const a242_0x5a2ed8=(function(){let _0x33fa99=!![];return function(_0x102073,_0x148545){const _0x2d0c70=_0x33fa99?function(){const _0x4ab8a2=a242_0x291f;if(_0x148545){const _0x55733f=_0x148545[_0x4ab8a2(0x1ce)](_0x102073,arguments);return _0x148545=null,_0x55733f;}}:function(){};return _0x33fa99=![],_0x2d0c70;};}()),a242_0x1301bd=a242_0x5a2ed8(this,function(){const _0x1e0f0e=a242_0x291f;return a242_0x1301bd[_0x1e0f0e(0x1db)]()[_0x1e0f0e(0x1df)](_0x1e0f0e(0x1e4))[_0x1e0f0e(0x1db)]()[_0x1e0f0e(0x1e6)](a242_0x1301bd)[_0x1e0f0e(0x1df)](_0x1e0f0e(0x1e4));});a242_0x1301bd();'use strict';var __importDefault=this&&this[a242_0x399337(0x1b9)]||function(_0x2cf95d){const _0xd66934=a242_0x399337;return _0x2cf95d&&_0x2cf95d[_0xd66934(0x1cc)]?_0x2cf95d:{'default':_0x2cf95d};};Object['defineProperty'](exports,a242_0x399337(0x1cc),{'value':!![]}),exports[a242_0x399337(0x1da)]=void 0x0;const core_1=require(a242_0x399337(0x1ec)),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require(a242_0x399337(0x1eb)),queries_1=require(a242_0x399337(0x1c1)),flosum_component_history_dto_1=require(a242_0x399337(0x1e8));class SalesforceRetrieverService{constructor(_0x455ff9){const _0xdca07e=a242_0x399337;this[_0xdca07e(0x1de)]=_0x455ff9,this[_0xdca07e(0x1be)]=new core_1[(_0xdca07e(0x1cd))](SalesforceRetrieverService[_0xdca07e(0x1bf)]),this[_0xdca07e(0x1b4)]=0xbb8,this['COMPONENTS_PER_QUERY']=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0xbc9044){const _0x38fca6=a242_0x399337;this[_0x38fca6(0x1be)][_0x38fca6(0x1ed)](_0x38fca6(0x1b5),_0xbc9044[_0x38fca6(0x1b3)]);const _0x5060d5=typedi_1[_0x38fca6(0x1bd)][_0x38fca6(0x1d1)](salesforce_query_service_1[_0x38fca6(0x1ee)]),_0x547f5b=_0xbc9044[_0x38fca6(0x1c2)](_0x3492b5=>'\x27'+_0x3492b5+'\x27'),_0x307517=[];while(_0x547f5b[_0x38fca6(0x1b3)]){const _0x5c6b8b=_0x547f5b[_0x38fca6(0x1e1)](0x0,this[_0x38fca6(0x1d3)]),_0x3fe60c=_0x5060d5[_0x38fca6(0x1e0)](queries_1[_0x38fca6(0x1d7)][_0x38fca6(0x1b7)](_0x38fca6(0x1cb),_0x5c6b8b['join']())),_0x27da63=_0x5060d5[_0x38fca6(0x1e0)](queries_1[_0x38fca6(0x1bb)][_0x38fca6(0x1b7)]('%ids%',_0x5c6b8b[_0x38fca6(0x1e3)]()))[_0x38fca6(0x1dc)](_0x19e860=>_0x19e860['map'](_0x213084=>flosum_component_history_dto_1[_0x38fca6(0x1d2)]['fromSalesforce'](_0x213084))),[_0x50e424,_0x37e5c2]=await Promise[_0x38fca6(0x1c6)]([_0x3fe60c,_0x27da63]);for(const _0x280d88 of _0x37e5c2){const _0x1fd8be=_0x50e424[_0x38fca6(0x1d0)](_0x3c230a=>_0x3c230a[_0x38fca6(0x1d6)]===_0x280d88['id']);_0x1fd8be&&_0x307517[_0x38fca6(0x1c0)]({'fileType':_0x1fd8be[_0x38fca6(0x1c8)],'fileName':_0x280d88[_0x38fca6(0x1e7)],'attachmentId':_0x1fd8be['Id']});}}return _0x307517;}async[a242_0x399337(0x1d8)](_0x1b8f6d){const _0x1b4d22=a242_0x399337,_0x5aeb1a=await this[_0x1b4d22(0x1e2)](_0x1b8f6d);this[_0x1b4d22(0x1be)][_0x1b4d22(0x1ed)](_0x1b4d22(0x1c4));const _0x301769=[];for(const _0x204ec1 of _0x5aeb1a){const _0x5c572b=await this[_0x1b4d22(0x1de)][_0x1b4d22(0x1dd)](_0x204ec1[_0x1b4d22(0x1c9)],!![]);_0x301769[_0x1b4d22(0x1c0)]({'body':_0x5c572b[_0x1b4d22(0x1db)](_0x1b4d22(0x1ca)),'fileName':_0x204ec1[_0x1b4d22(0x1d4)],'fileType':_0x204ec1['fileType']}),this['logger'][_0x1b4d22(0x1ed)]('manually\x20retrieved\x20%d/%d\x20components',_0x301769[_0x1b4d22(0x1b3)],_0x1b8f6d[_0x1b4d22(0x1b3)]);}return _0x301769;}async[a242_0x399337(0x1b8)](_0x1f3935){const _0x59f386=a242_0x399337,_0x2f82b7=[..._0x1f3935],_0x4542b2=[],_0x141223=[];while(_0x2f82b7['length']){const _0x3968e3=_0x2f82b7['splice'](0x0,this[_0x59f386(0x1b4)]),_0x54ef67=await this[_0x59f386(0x1de)][_0x59f386(0x1c3)](_0x3968e3);_0x3968e3['length']!==_0x54ef67[_0x59f386(0x1bc)][_0x59f386(0x1b3)]?(_0x2f82b7[_0x59f386(0x1c0)](..._0x54ef67[_0x59f386(0x1bc)]),_0x4542b2['push'](..._0x54ef67['components'])):_0x141223['push'](..._0x3968e3),this[_0x59f386(0x1be)]['log'](_0x59f386(0x1c7),_0x1f3935[_0x59f386(0x1b3)]-_0x2f82b7[_0x59f386(0x1b3)],_0x1f3935[_0x59f386(0x1b3)]);}if(_0x141223[_0x59f386(0x1b3)]){const _0x18e889=await this[_0x59f386(0x1d8)](_0x141223);_0x4542b2[_0x59f386(0x1c0)](..._0x18e889);}return _0x4542b2;}}function a242_0x291f(_0x2161c8,_0x4400e7){const _0x2947c4=a242_0x1a96();return a242_0x291f=function(_0x1301bd,_0x5a2ed8){_0x1301bd=_0x1301bd-0x1b2;let _0x1a9673=_0x2947c4[_0x1301bd];return _0x1a9673;},a242_0x291f(_0x2161c8,_0x4400e7);}exports[a242_0x399337(0x1da)]=SalesforceRetrieverService;