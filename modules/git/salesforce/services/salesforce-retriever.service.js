const a203_0x1c6805=a203_0x4fff;function a203_0x4fff(_0xd91d7f,_0x355780){const _0x6f9273=a203_0x26dd();return a203_0x4fff=function(_0x2ed5df,_0x4a6853){_0x2ed5df=_0x2ed5df-0x8b;let _0x26dd91=_0x6f9273[_0x2ed5df];return _0x26dd91;},a203_0x4fff(_0xd91d7f,_0x355780);}(function(_0x529913,_0x442f79){const _0x149048=a203_0x4fff,_0x51e24f=_0x529913();while(!![]){try{const _0x1e8952=parseInt(_0x149048(0xc2))/0x1+parseInt(_0x149048(0xb9))/0x2+parseInt(_0x149048(0x97))/0x3+-parseInt(_0x149048(0x95))/0x4*(-parseInt(_0x149048(0xb2))/0x5)+parseInt(_0x149048(0xb5))/0x6*(parseInt(_0x149048(0x8d))/0x7)+parseInt(_0x149048(0xa0))/0x8*(parseInt(_0x149048(0xb0))/0x9)+-parseInt(_0x149048(0x9d))/0xa;if(_0x1e8952===_0x442f79)break;else _0x51e24f['push'](_0x51e24f['shift']());}catch(_0x5da1dc){_0x51e24f['push'](_0x51e24f['shift']());}}}(a203_0x26dd,0x6b15a));const a203_0x4a6853=(function(){let _0x5f26bd=!![];return function(_0x466234,_0x3e9305){const _0x41cb9a=_0x5f26bd?function(){if(_0x3e9305){const _0x1a02c7=_0x3e9305['apply'](_0x466234,arguments);return _0x3e9305=null,_0x1a02c7;}}:function(){};return _0x5f26bd=![],_0x41cb9a;};}()),a203_0x2ed5df=a203_0x4a6853(this,function(){const _0x4b5711=a203_0x4fff;return a203_0x2ed5df[_0x4b5711(0xa8)]()[_0x4b5711(0xa5)](_0x4b5711(0xc3))[_0x4b5711(0xa8)]()[_0x4b5711(0x94)](a203_0x2ed5df)[_0x4b5711(0xa5)](_0x4b5711(0xc3));});a203_0x2ed5df();'use strict';var __importDefault=this&&this[a203_0x1c6805(0xb4)]||function(_0x2b0d24){const _0x535012=a203_0x1c6805;return _0x2b0d24&&_0x2b0d24[_0x535012(0xc0)]?_0x2b0d24:{'default':_0x2b0d24};};function a203_0x26dd(){const _0x163d17=['176kuFCvM','map','ids','../queries','info','search','salesforceService','manually\x20retrieved\x20%d/%d\x20components','toString','retrieveAttachment','replace','logger','COMPONENTS_PER_REQUEST','./salesforce-query.service','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','filename','79533gfKSmq','run','50135ivfmxX','then','__importDefault','6SVGpXS','defineProperty','fromSalesforce','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','315454GqKkhx','fileName','../../../../core','retrieveComponents','default','fileType','splice','__esModule','push','367208ucrTWb','(((.+)+)+)+$','ParentId','Logger','SalesforceQueryService','FlosumComponentHistoryDto','1032661jSnsCX','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','query','%ids%','%parent_ids%','length','retrieveLastComponents','constructor','336wIdUxS','join','2189022BNZnAx','all','components','retrieveComponentIdsFromHistoryIds','manually\x20retrieving\x20components\x20from\x20salesforce','name','20001960IZKHFj','typedi','COMPONENTS_PER_QUERY'];a203_0x26dd=function(){return _0x163d17;};return a203_0x26dd();}Object[a203_0x1c6805(0xb6)](exports,'__esModule',{'value':!![]}),exports['SalesforceRetrieverService']=void 0x0;const core_1=require(a203_0x1c6805(0xbb)),typedi_1=__importDefault(require(a203_0x1c6805(0x9e))),salesforce_query_service_1=require(a203_0x1c6805(0xad)),queries_1=require(a203_0x1c6805(0xa3)),flosum_component_history_dto_1=require('../dto/flosum-component-history.dto');class SalesforceRetrieverService{constructor(_0x3f86ac){const _0x294294=a203_0x1c6805;this[_0x294294(0xa6)]=_0x3f86ac,this[_0x294294(0xab)]=new core_1[(_0x294294(0xc5))](SalesforceRetrieverService[_0x294294(0x9c)]),this[_0x294294(0xac)]=0xbb8,this[_0x294294(0x9f)]=0x1f4;}async[a203_0x1c6805(0x9a)](_0x328b1c){const _0x3733b4=a203_0x1c6805;this[_0x3733b4(0xab)][_0x3733b4(0xa4)](_0x3733b4(0x8e),_0x328b1c[_0x3733b4(0x92)]);const _0x15f04c=typedi_1[_0x3733b4(0xbd)]['get'](salesforce_query_service_1[_0x3733b4(0x8b)]),_0x4da288=_0x328b1c[_0x3733b4(0xa1)](_0x4cd4fd=>'\x27'+_0x4cd4fd+'\x27'),_0x74d1ce=[];while(_0x4da288[_0x3733b4(0x92)]){const _0x56822e=_0x4da288[_0x3733b4(0xbf)](0x0,this['COMPONENTS_PER_QUERY']),_0x417220=_0x15f04c[_0x3733b4(0x8f)](queries_1[_0x3733b4(0xae)][_0x3733b4(0xaa)](_0x3733b4(0x91),_0x56822e['join']())),_0x5d9c9f=_0x15f04c[_0x3733b4(0x8f)](queries_1['GET_COMPONENT_HISTORIES_BY_IDS']['replace'](_0x3733b4(0x90),_0x56822e[_0x3733b4(0x96)]()))[_0x3733b4(0xb3)](_0x2d4905=>_0x2d4905[_0x3733b4(0xa1)](_0x5d1504=>flosum_component_history_dto_1[_0x3733b4(0x8c)][_0x3733b4(0xb7)](_0x5d1504))),[_0x4eef8e,_0xbd1638]=await Promise[_0x3733b4(0x98)]([_0x417220,_0x5d9c9f]);for(const _0x1142ff of _0xbd1638){const _0x317c70=_0x4eef8e['find'](_0x4d0d20=>_0x4d0d20[_0x3733b4(0xc4)]===_0x1142ff['id']);_0x317c70&&_0x74d1ce['push']({'fileType':_0x317c70['Name'],'fileName':_0x1142ff[_0x3733b4(0xaf)],'attachmentId':_0x317c70['Id']});}}return _0x74d1ce;}async['retrieveLastComponents'](_0xb0a78b){const _0x2beb16=a203_0x1c6805,_0x36ba24=await this[_0x2beb16(0x9a)](_0xb0a78b);this[_0x2beb16(0xab)][_0x2beb16(0xa4)](_0x2beb16(0x9b));const _0x3582fe=[];for(const _0x3a1bc9 of _0x36ba24){const _0x4d8ddd=await this[_0x2beb16(0xa6)][_0x2beb16(0xa9)](_0x3a1bc9['attachmentId'],!![]);_0x3582fe[_0x2beb16(0xc1)]({'body':_0x4d8ddd['toString']('base64'),'fileName':_0x3a1bc9[_0x2beb16(0xba)],'fileType':_0x3a1bc9[_0x2beb16(0xbe)]}),this[_0x2beb16(0xab)]['info'](_0x2beb16(0xa7),_0x3582fe['length'],_0xb0a78b[_0x2beb16(0x92)]);}return _0x3582fe;}async[a203_0x1c6805(0xb1)](_0x1957e8){const _0x56d190=a203_0x1c6805,_0x1e500a=[..._0x1957e8],_0x518d1b=[],_0x38995f=[];while(_0x1e500a['length']){const _0x2b1570=_0x1e500a[_0x56d190(0xbf)](0x0,this[_0x56d190(0xac)]),_0x5850e1=await this['salesforceService'][_0x56d190(0xbc)](_0x2b1570);_0x2b1570[_0x56d190(0x92)]!==_0x5850e1[_0x56d190(0xa2)][_0x56d190(0x92)]?(_0x1e500a['push'](..._0x5850e1[_0x56d190(0xa2)]),_0x518d1b[_0x56d190(0xc1)](..._0x5850e1[_0x56d190(0x99)])):_0x38995f['push'](..._0x2b1570),this[_0x56d190(0xab)]['log'](_0x56d190(0xb8),_0x1957e8[_0x56d190(0x92)]-_0x1e500a[_0x56d190(0x92)],_0x1957e8['length']);}if(_0x38995f[_0x56d190(0x92)]){const _0x5a64e5=await this[_0x56d190(0x93)](_0x38995f);_0x518d1b[_0x56d190(0xc1)](..._0x5a64e5);}return _0x518d1b;}}exports['SalesforceRetrieverService']=SalesforceRetrieverService;