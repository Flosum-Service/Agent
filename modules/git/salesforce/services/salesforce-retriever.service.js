function a280_0x1b66(){const _0x16d966=['name','length','query','%ids%','join','SalesforceRetrieverService','./salesforce-query.service','6VlBQvM','push','Manually\x20retrieved\x20%d/%d\x20components','1385fxZExb','retrieveComponentIdsFromHistoryIds','salesforceService','retrieveComponents','logger','%parent_ids%','map','(((.+)+)+)+$','retrieveAttachment','apply','837KkFmMd','run','SalesforceQueryService','11RvTXnp','39254891yUfmvC','45kIozyd','toString','574126iLJoKV','252688mQcmre','info','568qVXHFJ','typedi','__importDefault','Name','Manually\x20retrieving\x20components\x20from\x20salesforce','search','Logger','replace','then','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','GET_COMPONENT_HISTORIES_BY_IDS','../../../../core','../queries','fromSalesforce','3584950EcsQDo','../dto/flosum-component-history.dto','17557296gvfUaG','ParentId','64VWMWrH','82370ucgBcI','constructor','get','filename','attachmentId','splice','COMPONENTS_PER_REQUEST','fileType','find','FlosumComponentHistoryDto'];a280_0x1b66=function(){return _0x16d966;};return a280_0x1b66();}function a280_0x5a03(_0x4954f7,_0x211301){const _0x2f167a=a280_0x1b66();return a280_0x5a03=function(_0x550429,_0x20efbf){_0x550429=_0x550429-0x1db;let _0x1b6653=_0x2f167a[_0x550429];return _0x1b6653;},a280_0x5a03(_0x4954f7,_0x211301);}const a280_0x1d7360=a280_0x5a03;(function(_0x2357b4,_0x456d06){const _0x183b9a=a280_0x5a03,_0x343b87=_0x2357b4();while(!![]){try{const _0x50bf06=parseInt(_0x183b9a(0x1ee))/0x1*(-parseInt(_0x183b9a(0x202))/0x2)+-parseInt(_0x183b9a(0x1fd))/0x3*(parseInt(_0x183b9a(0x200))/0x4)+parseInt(_0x183b9a(0x210))/0x5*(parseInt(_0x183b9a(0x1eb))/0x6)+-parseInt(_0x183b9a(0x1ff))/0x7*(-parseInt(_0x183b9a(0x214))/0x8)+-parseInt(_0x183b9a(0x1f8))/0x9*(parseInt(_0x183b9a(0x215))/0xa)+-parseInt(_0x183b9a(0x1fb))/0xb*(parseInt(_0x183b9a(0x212))/0xc)+parseInt(_0x183b9a(0x1fc))/0xd;if(_0x50bf06===_0x456d06)break;else _0x343b87['push'](_0x343b87['shift']());}catch(_0xd7744a){_0x343b87['push'](_0x343b87['shift']());}}}(a280_0x1b66,0xc8d90));const a280_0x20efbf=(function(){let _0x533f93=!![];return function(_0x4bbc5a,_0x352c53){const _0x5cf829=_0x533f93?function(){const _0x4e2d55=a280_0x5a03;if(_0x352c53){const _0xb73006=_0x352c53[_0x4e2d55(0x1f7)](_0x4bbc5a,arguments);return _0x352c53=null,_0xb73006;}}:function(){};return _0x533f93=![],_0x5cf829;};}()),a280_0x550429=a280_0x20efbf(this,function(){const _0x31f3bb=a280_0x5a03;return a280_0x550429[_0x31f3bb(0x1fe)]()[_0x31f3bb(0x207)]('(((.+)+)+)+$')[_0x31f3bb(0x1fe)]()[_0x31f3bb(0x1db)](a280_0x550429)[_0x31f3bb(0x207)](_0x31f3bb(0x1f5));});a280_0x550429();'use strict';var __importDefault=this&&this[a280_0x1d7360(0x204)]||function(_0x550cfd){return _0x550cfd&&_0x550cfd['__esModule']?_0x550cfd:{'default':_0x550cfd};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a280_0x1d7360(0x1e9)]=void 0x0;const core_1=require(a280_0x1d7360(0x20d)),typedi_1=__importDefault(require(a280_0x1d7360(0x203))),salesforce_query_service_1=require(a280_0x1d7360(0x1ea)),queries_1=require(a280_0x1d7360(0x20e)),flosum_component_history_dto_1=require(a280_0x1d7360(0x211));class SalesforceRetrieverService{constructor(_0x5587a7){const _0xe763a0=a280_0x1d7360;this[_0xe763a0(0x1f0)]=_0x5587a7,this['logger']=new core_1[(_0xe763a0(0x208))](SalesforceRetrieverService[_0xe763a0(0x1e4)]),this[_0xe763a0(0x1e0)]=0xbb8,this['COMPONENTS_PER_QUERY']=0x1f4;}async[a280_0x1d7360(0x1ef)](_0x3d6d17){const _0x6fa7ae=a280_0x1d7360;this['logger']['info']('Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)',_0x3d6d17[_0x6fa7ae(0x1e5)]);const _0x46a978=typedi_1['default'][_0x6fa7ae(0x1dc)](salesforce_query_service_1[_0x6fa7ae(0x1fa)]),_0x36adb5=_0x3d6d17[_0x6fa7ae(0x1f4)](_0x42ca15=>'\x27'+_0x42ca15+'\x27'),_0x485ed1=[];while(_0x36adb5['length']){const _0x561f59=_0x36adb5[_0x6fa7ae(0x1df)](0x0,this['COMPONENTS_PER_QUERY']),_0x8f2d52=_0x46a978[_0x6fa7ae(0x1e6)](queries_1[_0x6fa7ae(0x20b)][_0x6fa7ae(0x209)](_0x6fa7ae(0x1f3),_0x561f59['join']())),_0x3d7b23=_0x46a978[_0x6fa7ae(0x1e6)](queries_1[_0x6fa7ae(0x20c)][_0x6fa7ae(0x209)](_0x6fa7ae(0x1e7),_0x561f59[_0x6fa7ae(0x1e8)]()))[_0x6fa7ae(0x20a)](_0x483f7f=>_0x483f7f[_0x6fa7ae(0x1f4)](_0x164399=>flosum_component_history_dto_1[_0x6fa7ae(0x1e3)][_0x6fa7ae(0x20f)](_0x164399))),[_0x1965d7,_0x124a1a]=await Promise['all']([_0x8f2d52,_0x3d7b23]);for(const _0x18bcab of _0x124a1a){const _0x4fd45a=_0x1965d7[_0x6fa7ae(0x1e2)](_0x44b09a=>_0x44b09a[_0x6fa7ae(0x213)]===_0x18bcab['id']);_0x4fd45a&&_0x485ed1[_0x6fa7ae(0x1ec)]({'fileType':_0x4fd45a[_0x6fa7ae(0x205)],'fileName':_0x18bcab[_0x6fa7ae(0x1dd)],'attachmentId':_0x4fd45a['Id']});}}return _0x485ed1;}async['retrieveLastComponents'](_0x4f73f6){const _0x4f8382=a280_0x1d7360,_0x5d0ca9=await this[_0x4f8382(0x1ef)](_0x4f73f6);this['logger'][_0x4f8382(0x201)](_0x4f8382(0x206));const _0x55a3af=[];for(const _0x43ddfc of _0x5d0ca9){const _0x468fab=await this[_0x4f8382(0x1f0)][_0x4f8382(0x1f6)](_0x43ddfc[_0x4f8382(0x1de)],!![]);_0x55a3af[_0x4f8382(0x1ec)]({'body':_0x468fab[_0x4f8382(0x1fe)]('base64'),'fileName':_0x43ddfc['fileName'],'fileType':_0x43ddfc[_0x4f8382(0x1e1)]}),this[_0x4f8382(0x1f2)][_0x4f8382(0x201)](_0x4f8382(0x1ed),_0x55a3af[_0x4f8382(0x1e5)],_0x4f73f6['length']);}return _0x55a3af;}async[a280_0x1d7360(0x1f9)](_0x4aa20b){const _0x5219fa=a280_0x1d7360;if(!_0x4aa20b['length'])return[];const _0x187acc=await this[_0x5219fa(0x1f0)][_0x5219fa(0x1f1)](_0x4aa20b);return _0x187acc;}}exports['SalesforceRetrieverService']=SalesforceRetrieverService;