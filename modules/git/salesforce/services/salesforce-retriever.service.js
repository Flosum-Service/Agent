const a280_0x3b7dd9=a280_0x3dab;(function(_0x23d405,_0x2fb758){const _0x455833=a280_0x3dab,_0x35589d=_0x23d405();while(!![]){try{const _0x4cb22e=-parseInt(_0x455833(0x18d))/0x1*(-parseInt(_0x455833(0x169))/0x2)+-parseInt(_0x455833(0x171))/0x3*(parseInt(_0x455833(0x187))/0x4)+-parseInt(_0x455833(0x165))/0x5*(-parseInt(_0x455833(0x177))/0x6)+parseInt(_0x455833(0x15f))/0x7*(-parseInt(_0x455833(0x18c))/0x8)+-parseInt(_0x455833(0x190))/0x9+-parseInt(_0x455833(0x17d))/0xa*(parseInt(_0x455833(0x178))/0xb)+parseInt(_0x455833(0x191))/0xc*(parseInt(_0x455833(0x168))/0xd);if(_0x4cb22e===_0x2fb758)break;else _0x35589d['push'](_0x35589d['shift']());}catch(_0x458cbc){_0x35589d['push'](_0x35589d['shift']());}}}(a280_0x24fe,0x96f45));const a280_0x2531f9=(function(){let _0x1afd98=!![];return function(_0x33df60,_0x37939c){const _0x584ded=_0x1afd98?function(){const _0x3b0374=a280_0x3dab;if(_0x37939c){const _0x650e8a=_0x37939c[_0x3b0374(0x182)](_0x33df60,arguments);return _0x37939c=null,_0x650e8a;}}:function(){};return _0x1afd98=![],_0x584ded;};}()),a280_0x17eb5a=a280_0x2531f9(this,function(){const _0x432ace=a280_0x3dab;return a280_0x17eb5a['toString']()['search']('(((.+)+)+)+$')['toString']()[_0x432ace(0x172)](a280_0x17eb5a)[_0x432ace(0x194)](_0x432ace(0x18b));});a280_0x17eb5a();'use strict';function a280_0x3dab(_0x282403,_0x32f840){const _0x1e3a5d=a280_0x24fe();return a280_0x3dab=function(_0x17eb5a,_0x2531f9){_0x17eb5a=_0x17eb5a-0x15d;let _0x24fe60=_0x1e3a5d[_0x17eb5a];return _0x24fe60;},a280_0x3dab(_0x282403,_0x32f840);}function a280_0x24fe(){const _0x320e7a=['length','__importDefault','info','../../../../core','apply','../dto/flosum-component-history.dto','default','run','FlosumComponentHistoryDto','2020idcYiZ','join','splice','base64','(((.+)+)+)+$','904DrzjrP','11IRavKq','fileName','SalesforceQueryService','1991061uuFpGj','3500136tpHQkY','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','__esModule','search','Manually\x20retrieved\x20%d/%d\x20components','toString','retrieveAttachment','typedi','COMPONENTS_PER_QUERY','31045dYGvLC','Name','retrieveComponentIdsFromHistoryIds','find','Manually\x20retrieving\x20components\x20from\x20salesforce','filename','680ZRnGcB','query','attachmentId','65FBymKw','63514bMTQFi','COMPONENTS_PER_REQUEST','./salesforce-query.service','fileType','fromSalesforce','push','../queries','salesforceService','2265XEvqJW','constructor','retrieveComponents','logger','Logger','ParentId','36354DzDDIr','11YrlFAR','replace','retrieveLastComponents','%ids%','SalesforceRetrieverService','9097730rdBLEZ'];a280_0x24fe=function(){return _0x320e7a;};return a280_0x24fe();}var __importDefault=this&&this[a280_0x3b7dd9(0x17f)]||function(_0x260f92){return _0x260f92&&_0x260f92['__esModule']?_0x260f92:{'default':_0x260f92};};Object['defineProperty'](exports,a280_0x3b7dd9(0x193),{'value':!![]}),exports[a280_0x3b7dd9(0x17c)]=void 0x0;const core_1=require(a280_0x3b7dd9(0x181)),typedi_1=__importDefault(require(a280_0x3b7dd9(0x15d))),salesforce_query_service_1=require(a280_0x3b7dd9(0x16b)),queries_1=require(a280_0x3b7dd9(0x16f)),flosum_component_history_dto_1=require(a280_0x3b7dd9(0x183));class SalesforceRetrieverService{constructor(_0x55e490){const _0x5a611b=a280_0x3b7dd9;this[_0x5a611b(0x170)]=_0x55e490,this[_0x5a611b(0x174)]=new core_1[(_0x5a611b(0x175))](SalesforceRetrieverService['name']),this[_0x5a611b(0x16a)]=0xbb8,this[_0x5a611b(0x15e)]=0x1f4;}async[a280_0x3b7dd9(0x161)](_0x4b1723){const _0x30d479=a280_0x3b7dd9;this['logger'][_0x30d479(0x180)]('Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)',_0x4b1723[_0x30d479(0x17e)]);const _0xa8c717=typedi_1[_0x30d479(0x184)]['get'](salesforce_query_service_1[_0x30d479(0x18f)]),_0x42c55c=_0x4b1723['map'](_0x28523a=>'\x27'+_0x28523a+'\x27'),_0x4cb43b=[];while(_0x42c55c['length']){const _0x41728e=_0x42c55c[_0x30d479(0x189)](0x0,this[_0x30d479(0x15e)]),_0x76729=_0xa8c717[_0x30d479(0x166)](queries_1[_0x30d479(0x192)][_0x30d479(0x179)]('%parent_ids%',_0x41728e[_0x30d479(0x188)]())),_0x259ef1=_0xa8c717['query'](queries_1['GET_COMPONENT_HISTORIES_BY_IDS']['replace'](_0x30d479(0x17b),_0x41728e[_0x30d479(0x188)]()))['then'](_0x4a018d=>_0x4a018d['map'](_0x532d34=>flosum_component_history_dto_1[_0x30d479(0x186)][_0x30d479(0x16d)](_0x532d34))),[_0x4a5723,_0x229f2d]=await Promise['all']([_0x76729,_0x259ef1]);for(const _0x27dc43 of _0x229f2d){const _0xf0d5ad=_0x4a5723[_0x30d479(0x162)](_0xd9a888=>_0xd9a888[_0x30d479(0x176)]===_0x27dc43['id']);_0xf0d5ad&&_0x4cb43b[_0x30d479(0x16e)]({'fileType':_0xf0d5ad[_0x30d479(0x160)],'fileName':_0x27dc43[_0x30d479(0x164)],'attachmentId':_0xf0d5ad['Id']});}}return _0x4cb43b;}async[a280_0x3b7dd9(0x17a)](_0x4c82b6){const _0x32850c=a280_0x3b7dd9,_0x51a64f=await this['retrieveComponentIdsFromHistoryIds'](_0x4c82b6);this[_0x32850c(0x174)]['info'](_0x32850c(0x163));const _0x3eb861=[];for(const _0x22d32b of _0x51a64f){const _0x2768e7=await this['salesforceService'][_0x32850c(0x197)](_0x22d32b[_0x32850c(0x167)],!![]);_0x3eb861['push']({'body':_0x2768e7[_0x32850c(0x196)](_0x32850c(0x18a)),'fileName':_0x22d32b[_0x32850c(0x18e)],'fileType':_0x22d32b[_0x32850c(0x16c)]}),this[_0x32850c(0x174)]['info'](_0x32850c(0x195),_0x3eb861[_0x32850c(0x17e)],_0x4c82b6[_0x32850c(0x17e)]);}return _0x3eb861;}async[a280_0x3b7dd9(0x185)](_0x39d012){const _0x54566b=a280_0x3b7dd9;if(!_0x39d012['length'])return[];const _0x573690=await this[_0x54566b(0x170)][_0x54566b(0x173)](_0x39d012);return _0x573690;}}exports[a280_0x3b7dd9(0x17c)]=SalesforceRetrieverService;