function a237_0x3703(_0x1adaae,_0x5c219c){const _0x3d2a22=a237_0x3d71();return a237_0x3703=function(_0x283568,_0x223da0){_0x283568=_0x283568-0x1f0;let _0x3d7187=_0x3d2a22[_0x283568];return _0x3d7187;},a237_0x3703(_0x1adaae,_0x5c219c);}const a237_0x2057a2=a237_0x3703;(function(_0x1d85c6,_0x1f312d){const _0x4d6910=a237_0x3703,_0x387dd1=_0x1d85c6();while(!![]){try{const _0x9e7757=-parseInt(_0x4d6910(0x1f3))/0x1+parseInt(_0x4d6910(0x1f2))/0x2*(parseInt(_0x4d6910(0x1f0))/0x3)+-parseInt(_0x4d6910(0x1f8))/0x4*(-parseInt(_0x4d6910(0x210))/0x5)+parseInt(_0x4d6910(0x218))/0x6+parseInt(_0x4d6910(0x21c))/0x7+parseInt(_0x4d6910(0x227))/0x8*(parseInt(_0x4d6910(0x21f))/0x9)+-parseInt(_0x4d6910(0x1f1))/0xa;if(_0x9e7757===_0x1f312d)break;else _0x387dd1['push'](_0x387dd1['shift']());}catch(_0x4a4a92){_0x387dd1['push'](_0x387dd1['shift']());}}}(a237_0x3d71,0xf2b1c));const a237_0x223da0=(function(){let _0x135f00=!![];return function(_0x3a3b4e,_0x191cf0){const _0x357755=_0x135f00?function(){const _0x11111b=a237_0x3703;if(_0x191cf0){const _0x26cdad=_0x191cf0[_0x11111b(0x21e)](_0x3a3b4e,arguments);return _0x191cf0=null,_0x26cdad;}}:function(){};return _0x135f00=![],_0x357755;};}()),a237_0x283568=a237_0x223da0(this,function(){const _0x25ce75=a237_0x3703;return a237_0x283568['toString']()['search'](_0x25ce75(0x215))[_0x25ce75(0x202)]()['constructor'](a237_0x283568)[_0x25ce75(0x1ff)]('(((.+)+)+)+$');});a237_0x283568();function a237_0x3d71(){const _0x56ea5b=['info','../../../../core','retrieveComponents','search','COMPONENTS_PER_REQUEST','length','toString','attachmentId','typedi','query','__esModule','base64','name','fileType','fromSalesforce','retrieveLastComponents','Logger','salesforceService','defineProperty','FlosumComponentHistoryDto','11560kQhxRC','%parent_ids%','ids','SalesforceRetrieverService','COMPONENTS_PER_QUERY','(((.+)+)+)+$','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','__importDefault','475338CygIOm','fileName','logger','join','13082650RWKYXK','find','apply','13182417LFqyuG','../queries','./salesforce-query.service','then','manually\x20retrieved\x20%d/%d\x20components','log','Name','SalesforceQueryService','8QpjEed','default','map','3018567AONITA','30115150MjxgmG','2IQIhzi','1241180iAbRPu','run','push','components','../dto/flosum-component-history.dto','1432zsEucn','ParentId','splice','retrieveComponentIdsFromHistoryIds'];a237_0x3d71=function(){return _0x56ea5b;};return a237_0x3d71();}'use strict';var __importDefault=this&&this[a237_0x2057a2(0x217)]||function(_0x1299d5){const _0x4c61dc=a237_0x2057a2;return _0x1299d5&&_0x1299d5[_0x4c61dc(0x206)]?_0x1299d5:{'default':_0x1299d5};};Object[a237_0x2057a2(0x20e)](exports,a237_0x2057a2(0x206),{'value':!![]}),exports[a237_0x2057a2(0x213)]=void 0x0;const core_1=require(a237_0x2057a2(0x1fd)),typedi_1=__importDefault(require(a237_0x2057a2(0x204))),salesforce_query_service_1=require(a237_0x2057a2(0x221)),queries_1=require(a237_0x2057a2(0x220)),flosum_component_history_dto_1=require(a237_0x2057a2(0x1f7));class SalesforceRetrieverService{constructor(_0x769793){const _0x35b41d=a237_0x2057a2;this[_0x35b41d(0x20d)]=_0x769793,this[_0x35b41d(0x21a)]=new core_1[(_0x35b41d(0x20c))](SalesforceRetrieverService[_0x35b41d(0x208)]),this[_0x35b41d(0x200)]=0xbb8,this[_0x35b41d(0x214)]=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0x476476){const _0xf33cc9=a237_0x2057a2;this[_0xf33cc9(0x21a)]['info']('manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)',_0x476476[_0xf33cc9(0x201)]);const _0x413669=typedi_1[_0xf33cc9(0x228)]['get'](salesforce_query_service_1[_0xf33cc9(0x226)]),_0x12db7d=_0x476476['map'](_0x2844ac=>'\x27'+_0x2844ac+'\x27'),_0x2e1fa2=[];while(_0x12db7d['length']){const _0x4f28a2=_0x12db7d[_0xf33cc9(0x1fa)](0x0,this['COMPONENTS_PER_QUERY']),_0x63a657=_0x413669[_0xf33cc9(0x205)](queries_1[_0xf33cc9(0x216)]['replace'](_0xf33cc9(0x211),_0x4f28a2[_0xf33cc9(0x21b)]())),_0x498bec=_0x413669[_0xf33cc9(0x205)](queries_1['GET_COMPONENT_HISTORIES_BY_IDS']['replace']('%ids%',_0x4f28a2[_0xf33cc9(0x21b)]()))[_0xf33cc9(0x222)](_0xe16d39=>_0xe16d39[_0xf33cc9(0x229)](_0x4a0fe9=>flosum_component_history_dto_1[_0xf33cc9(0x20f)][_0xf33cc9(0x20a)](_0x4a0fe9))),[_0x2aea77,_0x4b3ecc]=await Promise['all']([_0x63a657,_0x498bec]);for(const _0x5380fc of _0x4b3ecc){const _0x4bdab4=_0x2aea77[_0xf33cc9(0x21d)](_0x5d29bf=>_0x5d29bf[_0xf33cc9(0x1f9)]===_0x5380fc['id']);_0x4bdab4&&_0x2e1fa2[_0xf33cc9(0x1f5)]({'fileType':_0x4bdab4[_0xf33cc9(0x225)],'fileName':_0x5380fc['filename'],'attachmentId':_0x4bdab4['Id']});}}return _0x2e1fa2;}async[a237_0x2057a2(0x20b)](_0x349ea5){const _0x8545af=a237_0x2057a2,_0x399a8b=await this[_0x8545af(0x1fb)](_0x349ea5);this[_0x8545af(0x21a)][_0x8545af(0x1fc)]('manually\x20retrieving\x20components\x20from\x20salesforce');const _0x44defb=[];for(const _0x51c712 of _0x399a8b){const _0x182284=await this[_0x8545af(0x20d)]['retrieveAttachment'](_0x51c712[_0x8545af(0x203)],!![]);_0x44defb[_0x8545af(0x1f5)]({'body':_0x182284[_0x8545af(0x202)](_0x8545af(0x207)),'fileName':_0x51c712[_0x8545af(0x219)],'fileType':_0x51c712[_0x8545af(0x209)]}),this[_0x8545af(0x21a)][_0x8545af(0x1fc)](_0x8545af(0x223),_0x44defb[_0x8545af(0x201)],_0x349ea5[_0x8545af(0x201)]);}return _0x44defb;}async[a237_0x2057a2(0x1f4)](_0x274d1d){const _0x463d43=a237_0x2057a2,_0x21997b=[..._0x274d1d],_0x31c494=[],_0x16b8d3=[];while(_0x21997b['length']){const _0x588a9c=_0x21997b['splice'](0x0,this[_0x463d43(0x200)]),_0x3a4496=await this[_0x463d43(0x20d)][_0x463d43(0x1fe)](_0x588a9c);_0x588a9c[_0x463d43(0x201)]!==_0x3a4496[_0x463d43(0x212)][_0x463d43(0x201)]?(_0x21997b[_0x463d43(0x1f5)](..._0x3a4496[_0x463d43(0x212)]),_0x31c494[_0x463d43(0x1f5)](..._0x3a4496[_0x463d43(0x1f6)])):_0x16b8d3[_0x463d43(0x1f5)](..._0x588a9c),this[_0x463d43(0x21a)][_0x463d43(0x224)]('retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest',_0x274d1d['length']-_0x21997b[_0x463d43(0x201)],_0x274d1d['length']);}if(_0x16b8d3[_0x463d43(0x201)]){const _0x1f6bdb=await this[_0x463d43(0x20b)](_0x16b8d3);_0x31c494[_0x463d43(0x1f5)](..._0x1f6bdb);}return _0x31c494;}}exports[a237_0x2057a2(0x213)]=SalesforceRetrieverService;