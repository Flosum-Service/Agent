function a281_0x2a15(_0x431198,_0x12192b){const _0x5a0a52=a281_0x3719();return a281_0x2a15=function(_0x1a353e,_0x19312e){_0x1a353e=_0x1a353e-0x1e4;let _0x37190c=_0x5a0a52[_0x1a353e];return _0x37190c;},a281_0x2a15(_0x431198,_0x12192b);}const a281_0x3c1ccd=a281_0x2a15;(function(_0x2083ad,_0x5164ad){const _0x1df62a=a281_0x2a15,_0x1a31d7=_0x2083ad();while(!![]){try{const _0x579076=parseInt(_0x1df62a(0x1fa))/0x1*(parseInt(_0x1df62a(0x1e5))/0x2)+-parseInt(_0x1df62a(0x213))/0x3+parseInt(_0x1df62a(0x1e4))/0x4*(parseInt(_0x1df62a(0x1fe))/0x5)+-parseInt(_0x1df62a(0x1e8))/0x6*(-parseInt(_0x1df62a(0x21c))/0x7)+parseInt(_0x1df62a(0x1ea))/0x8+parseInt(_0x1df62a(0x200))/0x9*(parseInt(_0x1df62a(0x206))/0xa)+-parseInt(_0x1df62a(0x1fc))/0xb;if(_0x579076===_0x5164ad)break;else _0x1a31d7['push'](_0x1a31d7['shift']());}catch(_0x444b89){_0x1a31d7['push'](_0x1a31d7['shift']());}}}(a281_0x3719,0x691e6));const a281_0x19312e=(function(){let _0x46e0a0=!![];return function(_0x4c6668,_0x117f26){const _0x5e3891=_0x46e0a0?function(){const _0x1efb47=a281_0x2a15;if(_0x117f26){const _0x358238=_0x117f26[_0x1efb47(0x201)](_0x4c6668,arguments);return _0x117f26=null,_0x358238;}}:function(){};return _0x46e0a0=![],_0x5e3891;};}()),a281_0x1a353e=a281_0x19312e(this,function(){const _0x380a34=a281_0x2a15;return a281_0x1a353e[_0x380a34(0x20b)]()[_0x380a34(0x21d)](_0x380a34(0x211))[_0x380a34(0x20b)]()[_0x380a34(0x1e6)](a281_0x1a353e)['search'](_0x380a34(0x211));});a281_0x1a353e();'use strict';function a281_0x3719(){const _0x4aa9cc=['739588KXTell','constructor','attachmentId','342vYCAQI','%ids%','6061784sYOZvY','Manually\x20retrieving\x20components\x20from\x20salesforce','../queries','then','replace','FlosumComponentHistoryDto','Logger','retrieveAttachment','retrieveLastComponents','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','SalesforceQueryService','fileType','__importDefault','length','join','run','1JCbHph','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','10500853RXcuic','COMPONENTS_PER_REQUEST','65NTucUn','logger','509841zBtwcN','apply','__esModule','info','retrieveComponents','Name','90LnDrXp','GET_COMPONENT_HISTORIES_BY_IDS','Manually\x20retrieved\x20%d/%d\x20components','filename','splice','toString','default','salesforceService','SalesforceRetrieverService','fromSalesforce','../dto/flosum-component-history.dto','(((.+)+)+)+$','defineProperty','1630050LlyHas','retrieveComponentIdsFromHistoryIds','ParentId','base64','push','query','%parent_ids%','COMPONENTS_PER_QUERY','map','35063iqJXYq','search','../../../../core','1744VECRMk'];a281_0x3719=function(){return _0x4aa9cc;};return a281_0x3719();}var __importDefault=this&&this[a281_0x3c1ccd(0x1f6)]||function(_0x5be4c2){const _0x574d55=a281_0x3c1ccd;return _0x5be4c2&&_0x5be4c2[_0x574d55(0x202)]?_0x5be4c2:{'default':_0x5be4c2};};Object[a281_0x3c1ccd(0x212)](exports,a281_0x3c1ccd(0x202),{'value':!![]}),exports['SalesforceRetrieverService']=void 0x0;const core_1=require(a281_0x3c1ccd(0x21e)),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require('./salesforce-query.service'),queries_1=require(a281_0x3c1ccd(0x1ec)),flosum_component_history_dto_1=require(a281_0x3c1ccd(0x210));class SalesforceRetrieverService{constructor(_0x53f840){const _0x4ebe60=a281_0x3c1ccd;this[_0x4ebe60(0x20d)]=_0x53f840,this[_0x4ebe60(0x1ff)]=new core_1[(_0x4ebe60(0x1f0))](SalesforceRetrieverService['name']),this[_0x4ebe60(0x1fd)]=0xbb8,this[_0x4ebe60(0x21a)]=0x1f4;}async[a281_0x3c1ccd(0x214)](_0x4d414b){const _0x3d4883=a281_0x3c1ccd;this['logger']['info'](_0x3d4883(0x1f3),_0x4d414b[_0x3d4883(0x1f7)]);const _0x5db376=typedi_1[_0x3d4883(0x20c)]['get'](salesforce_query_service_1[_0x3d4883(0x1f4)]),_0x50cbff=_0x4d414b[_0x3d4883(0x21b)](_0x4c1c92=>'\x27'+_0x4c1c92+'\x27'),_0x139bb2=[];while(_0x50cbff[_0x3d4883(0x1f7)]){const _0x4aaf1f=_0x50cbff[_0x3d4883(0x20a)](0x0,this[_0x3d4883(0x21a)]),_0x25c6ad=_0x5db376[_0x3d4883(0x218)](queries_1[_0x3d4883(0x1fb)][_0x3d4883(0x1ee)](_0x3d4883(0x219),_0x4aaf1f[_0x3d4883(0x1f8)]())),_0x10142b=_0x5db376[_0x3d4883(0x218)](queries_1[_0x3d4883(0x207)][_0x3d4883(0x1ee)](_0x3d4883(0x1e9),_0x4aaf1f[_0x3d4883(0x1f8)]()))[_0x3d4883(0x1ed)](_0x1422e2=>_0x1422e2[_0x3d4883(0x21b)](_0x55a57b=>flosum_component_history_dto_1[_0x3d4883(0x1ef)][_0x3d4883(0x20f)](_0x55a57b))),[_0x244597,_0x43b104]=await Promise['all']([_0x25c6ad,_0x10142b]);for(const _0x32a87b of _0x43b104){const _0x204daa=_0x244597['find'](_0x590fa6=>_0x590fa6[_0x3d4883(0x215)]===_0x32a87b['id']);_0x204daa&&_0x139bb2[_0x3d4883(0x217)]({'fileType':_0x204daa[_0x3d4883(0x205)],'fileName':_0x32a87b[_0x3d4883(0x209)],'attachmentId':_0x204daa['Id']});}}return _0x139bb2;}async[a281_0x3c1ccd(0x1f2)](_0x2b07ef){const _0x4865a9=a281_0x3c1ccd,_0x3a17f1=await this['retrieveComponentIdsFromHistoryIds'](_0x2b07ef);this[_0x4865a9(0x1ff)][_0x4865a9(0x203)](_0x4865a9(0x1eb));const _0x5890b2=[];for(const _0xf1c63a of _0x3a17f1){const _0x15934d=await this['salesforceService'][_0x4865a9(0x1f1)](_0xf1c63a[_0x4865a9(0x1e7)],!![]);_0x5890b2[_0x4865a9(0x217)]({'body':_0x15934d['toString'](_0x4865a9(0x216)),'fileName':_0xf1c63a['fileName'],'fileType':_0xf1c63a[_0x4865a9(0x1f5)]}),this[_0x4865a9(0x1ff)][_0x4865a9(0x203)](_0x4865a9(0x208),_0x5890b2['length'],_0x2b07ef[_0x4865a9(0x1f7)]);}return _0x5890b2;}async[a281_0x3c1ccd(0x1f9)](_0x483123){const _0x5e31ea=a281_0x3c1ccd;if(!_0x483123[_0x5e31ea(0x1f7)])return[];const _0xc608ab=await this['salesforceService'][_0x5e31ea(0x204)](_0x483123);return _0xc608ab;}}exports[a281_0x3c1ccd(0x20e)]=SalesforceRetrieverService;