const a269_0x455440=a269_0x5474;(function(_0x106f51,_0x5e576d){const _0xe4d63e=a269_0x5474,_0x349aac=_0x106f51();while(!![]){try{const _0x4354cb=-parseInt(_0xe4d63e(0x1b6))/0x1+-parseInt(_0xe4d63e(0x194))/0x2+parseInt(_0xe4d63e(0x19f))/0x3+parseInt(_0xe4d63e(0x1c2))/0x4+-parseInt(_0xe4d63e(0x193))/0x5*(parseInt(_0xe4d63e(0x195))/0x6)+parseInt(_0xe4d63e(0x1b5))/0x7+-parseInt(_0xe4d63e(0x1a1))/0x8*(-parseInt(_0xe4d63e(0x1be))/0x9);if(_0x4354cb===_0x5e576d)break;else _0x349aac['push'](_0x349aac['shift']());}catch(_0x4680d2){_0x349aac['push'](_0x349aac['shift']());}}}(a269_0x1b1d,0x6cf5c));const a269_0x2f1200=(function(){let _0x2c8ce6=!![];return function(_0x1af4b1,_0x3552a1){const _0xb0ad7c=_0x2c8ce6?function(){const _0x3c7d2e=a269_0x5474;if(_0x3552a1){const _0x2e0ef3=_0x3552a1[_0x3c7d2e(0x1aa)](_0x1af4b1,arguments);return _0x3552a1=null,_0x2e0ef3;}}:function(){};return _0x2c8ce6=![],_0xb0ad7c;};}()),a269_0x92daca=a269_0x2f1200(this,function(){const _0x352e36=a269_0x5474;return a269_0x92daca[_0x352e36(0x1a3)]()['search']('(((.+)+)+)+$')['toString']()[_0x352e36(0x199)](a269_0x92daca)['search']('(((.+)+)+)+$');});a269_0x92daca();'use strict';var __importDefault=this&&this[a269_0x455440(0x1a7)]||function(_0xf2cc66){const _0x5a1473=a269_0x455440;return _0xf2cc66&&_0xf2cc66[_0x5a1473(0x1c4)]?_0xf2cc66:{'default':_0xf2cc66};};Object[a269_0x455440(0x1af)](exports,'__esModule',{'value':!![]}),exports[a269_0x455440(0x198)]=void 0x0;const core_1=require(a269_0x455440(0x1a4)),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require(a269_0x455440(0x1ac)),queries_1=require(a269_0x455440(0x1b4)),flosum_component_history_dto_1=require(a269_0x455440(0x19c));function a269_0x5474(_0xd0e52d,_0x2fed2b){const _0x118b82=a269_0x1b1d();return a269_0x5474=function(_0x92daca,_0x2f1200){_0x92daca=_0x92daca-0x193;let _0x1b1d44=_0x118b82[_0x92daca];return _0x1b1d44;},a269_0x5474(_0xd0e52d,_0x2fed2b);}class SalesforceRetrieverService{constructor(_0x31f305){const _0x57ff00=a269_0x455440;this[_0x57ff00(0x1a8)]=_0x31f305,this[_0x57ff00(0x1bc)]=new core_1['Logger'](SalesforceRetrieverService['name']),this[_0x57ff00(0x1b9)]=0xbb8,this[_0x57ff00(0x1c5)]=0x1f4;}async[a269_0x455440(0x19b)](_0x189ad3){const _0x26199b=a269_0x455440;this['logger']['info'](_0x26199b(0x1a9),_0x189ad3['length']);const _0x22996d=typedi_1['default'][_0x26199b(0x1ad)](salesforce_query_service_1[_0x26199b(0x1ae)]),_0x2cc2ec=_0x189ad3[_0x26199b(0x1bd)](_0x1bef2b=>'\x27'+_0x1bef2b+'\x27'),_0x282b6c=[];while(_0x2cc2ec[_0x26199b(0x196)]){const _0x4a7698=_0x2cc2ec[_0x26199b(0x19a)](0x0,this[_0x26199b(0x1c5)]),_0x5ae5e1=_0x22996d['query'](queries_1['GET_ATTACHMENT_BY_PARENT_IDS_QUERY'][_0x26199b(0x1a2)](_0x26199b(0x1a5),_0x4a7698[_0x26199b(0x1b3)]())),_0x423800=_0x22996d[_0x26199b(0x1c7)](queries_1[_0x26199b(0x1b2)][_0x26199b(0x1a2)](_0x26199b(0x1ba),_0x4a7698['join']()))['then'](_0x39e8f2=>_0x39e8f2[_0x26199b(0x1bd)](_0x3a7ca0=>flosum_component_history_dto_1[_0x26199b(0x1b7)][_0x26199b(0x1b0)](_0x3a7ca0))),[_0x2f6d35,_0x46b017]=await Promise[_0x26199b(0x1b8)]([_0x5ae5e1,_0x423800]);for(const _0x2af3bb of _0x46b017){const _0x4fb344=_0x2f6d35[_0x26199b(0x1c1)](_0x24671c=>_0x24671c[_0x26199b(0x1ab)]===_0x2af3bb['id']);_0x4fb344&&_0x282b6c[_0x26199b(0x197)]({'fileType':_0x4fb344[_0x26199b(0x1a0)],'fileName':_0x2af3bb[_0x26199b(0x1b1)],'attachmentId':_0x4fb344['Id']});}}return _0x282b6c;}async[a269_0x455440(0x1bf)](_0x2554a1){const _0x1b3f7f=a269_0x455440,_0xf453cf=await this[_0x1b3f7f(0x19b)](_0x2554a1);this[_0x1b3f7f(0x1bc)][_0x1b3f7f(0x1c3)](_0x1b3f7f(0x19e));const _0x3b79c0=[];for(const _0x546763 of _0xf453cf){const _0x2028bb=await this[_0x1b3f7f(0x1a8)][_0x1b3f7f(0x19d)](_0x546763[_0x1b3f7f(0x1c0)],!![]);_0x3b79c0[_0x1b3f7f(0x197)]({'body':_0x2028bb[_0x1b3f7f(0x1a3)](_0x1b3f7f(0x1c6)),'fileName':_0x546763[_0x1b3f7f(0x1a6)],'fileType':_0x546763['fileType']}),this[_0x1b3f7f(0x1bc)]['info']('Manually\x20retrieved\x20%d/%d\x20components',_0x3b79c0[_0x1b3f7f(0x196)],_0x2554a1[_0x1b3f7f(0x196)]);}return _0x3b79c0;}async[a269_0x455440(0x1bb)](_0x285350){const _0x285103=a269_0x455440;if(!_0x285350[_0x285103(0x196)])return[];const _0x178056=await this[_0x285103(0x1a8)]['retrieveComponents'](_0x285350);return _0x178056;}}function a269_0x1b1d(){const _0x222b89=['run','logger','map','18ekOyYE','retrieveLastComponents','attachmentId','find','876608kDCdiO','info','__esModule','COMPONENTS_PER_QUERY','base64','query','15gWVzZu','662628lKQTzt','605334GtexsM','length','push','SalesforceRetrieverService','constructor','splice','retrieveComponentIdsFromHistoryIds','../dto/flosum-component-history.dto','retrieveAttachment','Manually\x20retrieving\x20components\x20from\x20salesforce','78753FAPfmW','Name','4496728uZZqkf','replace','toString','../../../../core','%parent_ids%','fileName','__importDefault','salesforceService','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','apply','ParentId','./salesforce-query.service','get','SalesforceQueryService','defineProperty','fromSalesforce','filename','GET_COMPONENT_HISTORIES_BY_IDS','join','../queries','211932HXZNOD','319580pagFwr','FlosumComponentHistoryDto','all','COMPONENTS_PER_REQUEST','%ids%'];a269_0x1b1d=function(){return _0x222b89;};return a269_0x1b1d();}exports['SalesforceRetrieverService']=SalesforceRetrieverService;