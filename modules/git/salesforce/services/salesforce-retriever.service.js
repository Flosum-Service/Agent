function a237_0x1330(_0x5ac565,_0x48cbbd){const _0x9903eb=a237_0x23c7();return a237_0x1330=function(_0x1abc9a,_0x5cab9a){_0x1abc9a=_0x1abc9a-0xa4;let _0x23c751=_0x9903eb[_0x1abc9a];return _0x23c751;},a237_0x1330(_0x5ac565,_0x48cbbd);}const a237_0x531243=a237_0x1330;function a237_0x23c7(){const _0x2bd181=['28BKtxiO','base64','COMPONENTS_PER_QUERY','(((.+)+)+)+$','12maFBbQ','FlosumComponentHistoryDto','then','defineProperty','1526082dbpAdY','fileName','toString','43514500jaccTU','fromSalesforce','COMPONENTS_PER_REQUEST','../../../../core','./salesforce-query.service','apply','salesforceService','296qownrh','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','retrieveLastComponents','push','manually\x20retrieved\x20%d/%d\x20components','name','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','log','8402265LOnYGG','logger','SalesforceQueryService','6510750rVckMC','replace','map','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','length','search','join','attachmentId','info','find','retrieveComponents','180873IbSPNl','components','1359513SnvcqC','get','ids','__esModule','SalesforceRetrieverService','retrieveComponentIdsFromHistoryIds','Logger','fileType','retrieveAttachment','46355DTWCuU','%parent_ids%','splice'];a237_0x23c7=function(){return _0x2bd181;};return a237_0x23c7();}(function(_0x2c6b53,_0x48a4fd){const _0x2ff8de=a237_0x1330,_0x526ed3=_0x2c6b53();while(!![]){try{const _0x185842=-parseInt(_0x2ff8de(0xa7))/0x1*(parseInt(_0x2ff8de(0xaa))/0x2)+-parseInt(_0x2ff8de(0xd4))/0x3*(parseInt(_0x2ff8de(0xae))/0x4)+-parseInt(_0x2ff8de(0xc7))/0x5+-parseInt(_0x2ff8de(0xb2))/0x6+parseInt(_0x2ff8de(0xd2))/0x7*(parseInt(_0x2ff8de(0xbc))/0x8)+-parseInt(_0x2ff8de(0xc4))/0x9+parseInt(_0x2ff8de(0xb5))/0xa;if(_0x185842===_0x48a4fd)break;else _0x526ed3['push'](_0x526ed3['shift']());}catch(_0x14fd20){_0x526ed3['push'](_0x526ed3['shift']());}}}(a237_0x23c7,0xc57e0));const a237_0x5cab9a=(function(){let _0x5d08fb=!![];return function(_0x3fc859,_0x4201fa){const _0x430b79=_0x5d08fb?function(){const _0x21b983=a237_0x1330;if(_0x4201fa){const _0x387fb3=_0x4201fa[_0x21b983(0xba)](_0x3fc859,arguments);return _0x4201fa=null,_0x387fb3;}}:function(){};return _0x5d08fb=![],_0x430b79;};}()),a237_0x1abc9a=a237_0x5cab9a(this,function(){const _0x5ed439=a237_0x1330;return a237_0x1abc9a[_0x5ed439(0xb4)]()[_0x5ed439(0xcc)](_0x5ed439(0xad))[_0x5ed439(0xb4)]()['constructor'](a237_0x1abc9a)[_0x5ed439(0xcc)]('(((.+)+)+)+$');});a237_0x1abc9a();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x258a3e){const _0x124ce6=a237_0x1330;return _0x258a3e&&_0x258a3e[_0x124ce6(0xd7)]?_0x258a3e:{'default':_0x258a3e};};Object[a237_0x531243(0xb1)](exports,a237_0x531243(0xd7),{'value':!![]}),exports[a237_0x531243(0xd8)]=void 0x0;const core_1=require(a237_0x531243(0xb8)),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require(a237_0x531243(0xb9)),queries_1=require('../queries'),flosum_component_history_dto_1=require('../dto/flosum-component-history.dto');class SalesforceRetrieverService{constructor(_0x26c26a){const _0x38f77f=a237_0x531243;this[_0x38f77f(0xbb)]=_0x26c26a,this[_0x38f77f(0xc5)]=new core_1[(_0x38f77f(0xa4))](SalesforceRetrieverService[_0x38f77f(0xc1)]),this[_0x38f77f(0xb7)]=0xbb8,this[_0x38f77f(0xac)]=0x1f4;}async[a237_0x531243(0xd9)](_0x10f72a){const _0x1f2781=a237_0x531243;this[_0x1f2781(0xc5)]['info'](_0x1f2781(0xca),_0x10f72a[_0x1f2781(0xcb)]);const _0x41432f=typedi_1['default'][_0x1f2781(0xd5)](salesforce_query_service_1[_0x1f2781(0xc6)]),_0x45d73e=_0x10f72a[_0x1f2781(0xc9)](_0x23f382=>'\x27'+_0x23f382+'\x27'),_0x46b3e5=[];while(_0x45d73e[_0x1f2781(0xcb)]){const _0x2adb87=_0x45d73e[_0x1f2781(0xa9)](0x0,this[_0x1f2781(0xac)]),_0x4b218e=_0x41432f['query'](queries_1[_0x1f2781(0xc2)]['replace'](_0x1f2781(0xa8),_0x2adb87[_0x1f2781(0xcd)]())),_0x2c5530=_0x41432f['query'](queries_1['GET_COMPONENT_HISTORIES_BY_IDS'][_0x1f2781(0xc8)]('%ids%',_0x2adb87['join']()))[_0x1f2781(0xb0)](_0x588043=>_0x588043[_0x1f2781(0xc9)](_0x3f9622=>flosum_component_history_dto_1[_0x1f2781(0xaf)][_0x1f2781(0xb6)](_0x3f9622))),[_0x328b93,_0x5e55e4]=await Promise['all']([_0x4b218e,_0x2c5530]);for(const _0x1c8e7d of _0x5e55e4){const _0x5ce627=_0x328b93[_0x1f2781(0xd0)](_0x2a753e=>_0x2a753e['ParentId']===_0x1c8e7d['id']);_0x5ce627&&_0x46b3e5['push']({'fileType':_0x5ce627['Name'],'fileName':_0x1c8e7d['filename'],'attachmentId':_0x5ce627['Id']});}}return _0x46b3e5;}async[a237_0x531243(0xbe)](_0x5d2d98){const _0x516889=a237_0x531243,_0x18fa9f=await this[_0x516889(0xd9)](_0x5d2d98);this[_0x516889(0xc5)][_0x516889(0xcf)]('manually\x20retrieving\x20components\x20from\x20salesforce');const _0x45b2db=[];for(const _0x17dbd of _0x18fa9f){const _0x13e976=await this[_0x516889(0xbb)][_0x516889(0xa6)](_0x17dbd[_0x516889(0xce)],!![]);_0x45b2db[_0x516889(0xbf)]({'body':_0x13e976[_0x516889(0xb4)](_0x516889(0xab)),'fileName':_0x17dbd[_0x516889(0xb3)],'fileType':_0x17dbd[_0x516889(0xa5)]}),this[_0x516889(0xc5)][_0x516889(0xcf)](_0x516889(0xc0),_0x45b2db[_0x516889(0xcb)],_0x5d2d98[_0x516889(0xcb)]);}return _0x45b2db;}async['run'](_0xb44c6e){const _0x2db9fa=a237_0x531243,_0x155d26=[..._0xb44c6e],_0x1a8a71=[],_0x197e4c=[];while(_0x155d26['length']){const _0x37614f=_0x155d26['splice'](0x0,this[_0x2db9fa(0xb7)]),_0xd1ccb=await this[_0x2db9fa(0xbb)][_0x2db9fa(0xd1)](_0x37614f);_0x37614f['length']!==_0xd1ccb[_0x2db9fa(0xd6)][_0x2db9fa(0xcb)]?(_0x155d26[_0x2db9fa(0xbf)](..._0xd1ccb[_0x2db9fa(0xd6)]),_0x1a8a71[_0x2db9fa(0xbf)](..._0xd1ccb[_0x2db9fa(0xd3)])):_0x197e4c[_0x2db9fa(0xbf)](..._0x37614f),this[_0x2db9fa(0xc5)][_0x2db9fa(0xc3)](_0x2db9fa(0xbd),_0xb44c6e[_0x2db9fa(0xcb)]-_0x155d26[_0x2db9fa(0xcb)],_0xb44c6e[_0x2db9fa(0xcb)]);}if(_0x197e4c[_0x2db9fa(0xcb)]){const _0x27969c=await this[_0x2db9fa(0xbe)](_0x197e4c);_0x1a8a71[_0x2db9fa(0xbf)](..._0x27969c);}return _0x1a8a71;}}exports[a237_0x531243(0xd8)]=SalesforceRetrieverService;