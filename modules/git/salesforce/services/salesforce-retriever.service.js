const a269_0xded8de=a269_0x1d74;(function(_0x3ae30f,_0x44037b){const _0x524d3e=a269_0x1d74,_0x5067f2=_0x3ae30f();while(!![]){try{const _0x3c6492=-parseInt(_0x524d3e(0x1d7))/0x1*(-parseInt(_0x524d3e(0x1dc))/0x2)+parseInt(_0x524d3e(0x1cc))/0x3+parseInt(_0x524d3e(0x1d5))/0x4*(parseInt(_0x524d3e(0x1d0))/0x5)+-parseInt(_0x524d3e(0x1e2))/0x6*(parseInt(_0x524d3e(0x1bf))/0x7)+-parseInt(_0x524d3e(0x1e8))/0x8+parseInt(_0x524d3e(0x1ea))/0x9+-parseInt(_0x524d3e(0x1c9))/0xa;if(_0x3c6492===_0x44037b)break;else _0x5067f2['push'](_0x5067f2['shift']());}catch(_0x22727a){_0x5067f2['push'](_0x5067f2['shift']());}}}(a269_0x2362,0xcb20b));const a269_0x47e5da=(function(){let _0x2e7f3d=!![];return function(_0xcbfb37,_0x36725d){const _0x14eaaf=_0x2e7f3d?function(){const _0x14fc94=a269_0x1d74;if(_0x36725d){const _0xb2fc8b=_0x36725d[_0x14fc94(0x1d8)](_0xcbfb37,arguments);return _0x36725d=null,_0xb2fc8b;}}:function(){};return _0x2e7f3d=![],_0x14eaaf;};}()),a269_0x4fc187=a269_0x47e5da(this,function(){const _0x25688f=a269_0x1d74;return a269_0x4fc187['toString']()[_0x25688f(0x1dd)](_0x25688f(0x1bb))[_0x25688f(0x1b9)]()[_0x25688f(0x1df)](a269_0x4fc187)[_0x25688f(0x1dd)]('(((.+)+)+)+$');});a269_0x4fc187();'use strict';var __importDefault=this&&this[a269_0xded8de(0x1bd)]||function(_0x11e04a){const _0x2ba8c6=a269_0xded8de;return _0x11e04a&&_0x11e04a[_0x2ba8c6(0x1e6)]?_0x11e04a:{'default':_0x11e04a};};Object[a269_0xded8de(0x1e5)](exports,a269_0xded8de(0x1e6),{'value':!![]}),exports['SalesforceRetrieverService']=void 0x0;const core_1=require(a269_0xded8de(0x1de)),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require(a269_0xded8de(0x1e3)),queries_1=require(a269_0xded8de(0x1da)),flosum_component_history_dto_1=require(a269_0xded8de(0x1d4));class SalesforceRetrieverService{constructor(_0x21ff28){const _0x5eb7fe=a269_0xded8de;this['salesforceService']=_0x21ff28,this[_0x5eb7fe(0x1d1)]=new core_1['Logger'](SalesforceRetrieverService['name']),this[_0x5eb7fe(0x1ed)]=0xbb8,this[_0x5eb7fe(0x1c7)]=0x1f4;}async[a269_0xded8de(0x1c5)](_0x180eba){const _0xca9b6b=a269_0xded8de;this['logger'][_0xca9b6b(0x1cb)](_0xca9b6b(0x1e4),_0x180eba[_0xca9b6b(0x1ce)]);const _0x38786c=typedi_1[_0xca9b6b(0x1cd)]['get'](salesforce_query_service_1['SalesforceQueryService']),_0xc3469e=_0x180eba[_0xca9b6b(0x1c2)](_0x52b059=>'\x27'+_0x52b059+'\x27'),_0x508953=[];while(_0xc3469e['length']){const _0x3dd80d=_0xc3469e[_0xca9b6b(0x1c6)](0x0,this[_0xca9b6b(0x1c7)]),_0x422d21=_0x38786c[_0xca9b6b(0x1be)](queries_1[_0xca9b6b(0x1ca)][_0xca9b6b(0x1cf)](_0xca9b6b(0x1c1),_0x3dd80d['join']())),_0x1c6e83=_0x38786c[_0xca9b6b(0x1be)](queries_1[_0xca9b6b(0x1d9)][_0xca9b6b(0x1cf)](_0xca9b6b(0x1ec),_0x3dd80d[_0xca9b6b(0x1ee)]()))[_0xca9b6b(0x1c0)](_0x55442f=>_0x55442f['map'](_0xd92291=>flosum_component_history_dto_1['FlosumComponentHistoryDto'][_0xca9b6b(0x1bc)](_0xd92291))),[_0x2849ae,_0x224919]=await Promise[_0xca9b6b(0x1ba)]([_0x422d21,_0x1c6e83]);for(const _0x124ede of _0x224919){const _0x4d9fff=_0x2849ae[_0xca9b6b(0x1eb)](_0x8e87c2=>_0x8e87c2[_0xca9b6b(0x1b8)]===_0x124ede['id']);_0x4d9fff&&_0x508953[_0xca9b6b(0x1d6)]({'fileType':_0x4d9fff[_0xca9b6b(0x1d3)],'fileName':_0x124ede[_0xca9b6b(0x1e7)],'attachmentId':_0x4d9fff['Id']});}}return _0x508953;}async[a269_0xded8de(0x1e0)](_0x1206b0){const _0x5600ba=a269_0xded8de,_0x15a56a=await this[_0x5600ba(0x1c5)](_0x1206b0);this['logger']['info'](_0x5600ba(0x1ef));const _0x24e760=[];for(const _0x1f27ca of _0x15a56a){const _0x2013f4=await this['salesforceService'][_0x5600ba(0x1e1)](_0x1f27ca[_0x5600ba(0x1c3)],!![]);_0x24e760[_0x5600ba(0x1d6)]({'body':_0x2013f4['toString'](_0x5600ba(0x1c8)),'fileName':_0x1f27ca[_0x5600ba(0x1db)],'fileType':_0x1f27ca[_0x5600ba(0x1c4)]}),this[_0x5600ba(0x1d1)][_0x5600ba(0x1cb)](_0x5600ba(0x1e9),_0x24e760[_0x5600ba(0x1ce)],_0x1206b0[_0x5600ba(0x1ce)]);}return _0x24e760;}async[a269_0xded8de(0x1f0)](_0x13532f){const _0x366bad=a269_0xded8de;if(!_0x13532f[_0x366bad(0x1ce)])return[];const _0x4a44a1=await this[_0x366bad(0x1d2)]['retrieveComponents'](_0x13532f);return _0x4a44a1;}}function a269_0x1d74(_0x50da3b,_0x4eebfa){const _0x2e3d4d=a269_0x2362();return a269_0x1d74=function(_0x4fc187,_0x47e5da){_0x4fc187=_0x4fc187-0x1b8;let _0x23622a=_0x2e3d4d[_0x4fc187];return _0x23622a;},a269_0x1d74(_0x50da3b,_0x4eebfa);}exports['SalesforceRetrieverService']=SalesforceRetrieverService;function a269_0x2362(){const _0x25452d=['(((.+)+)+)+$','fromSalesforce','__importDefault','query','12509gBPQpv','then','%parent_ids%','map','attachmentId','fileType','retrieveComponentIdsFromHistoryIds','splice','COMPONENTS_PER_QUERY','base64','21895690gDeBlb','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','info','3162063NOQXgp','default','length','replace','15ibGbHA','logger','salesforceService','Name','../dto/flosum-component-history.dto','751908aFhOby','push','806321PETkLw','apply','GET_COMPONENT_HISTORIES_BY_IDS','../queries','fileName','4gsqqkt','search','../../../../core','constructor','retrieveLastComponents','retrieveAttachment','3582pIRJPt','./salesforce-query.service','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','defineProperty','__esModule','filename','1567832pBjVQd','Manually\x20retrieved\x20%d/%d\x20components','9484236QhQbtR','find','%ids%','COMPONENTS_PER_REQUEST','join','Manually\x20retrieving\x20components\x20from\x20salesforce','run','ParentId','toString','all'];a269_0x2362=function(){return _0x25452d;};return a269_0x2362();}