function a242_0x1816(_0x17c1f8,_0xaa5882){const _0x1aba8f=a242_0x3749();return a242_0x1816=function(_0x14fcaa,_0x53911f){_0x14fcaa=_0x14fcaa-0xa7;let _0x374998=_0x1aba8f[_0x14fcaa];return _0x374998;},a242_0x1816(_0x17c1f8,_0xaa5882);}const a242_0x52472c=a242_0x1816;(function(_0x50bb4f,_0x3e52c4){const _0x39585f=a242_0x1816,_0x358520=_0x50bb4f();while(!![]){try{const _0xca570=-parseInt(_0x39585f(0xaa))/0x1*(-parseInt(_0x39585f(0xd3))/0x2)+-parseInt(_0x39585f(0xac))/0x3+-parseInt(_0x39585f(0xdd))/0x4+parseInt(_0x39585f(0xe0))/0x5+parseInt(_0x39585f(0xb8))/0x6*(parseInt(_0x39585f(0xda))/0x7)+-parseInt(_0x39585f(0xb1))/0x8+-parseInt(_0x39585f(0xc0))/0x9;if(_0xca570===_0x3e52c4)break;else _0x358520['push'](_0x358520['shift']());}catch(_0x5a76a0){_0x358520['push'](_0x358520['shift']());}}}(a242_0x3749,0x58a97));const a242_0x53911f=(function(){let _0x1c967f=!![];return function(_0x1e6f7e,_0x442fef){const _0x431da8=_0x1c967f?function(){const _0x9348cb=a242_0x1816;if(_0x442fef){const _0x5c7766=_0x442fef[_0x9348cb(0xcb)](_0x1e6f7e,arguments);return _0x442fef=null,_0x5c7766;}}:function(){};return _0x1c967f=![],_0x431da8;};}()),a242_0x14fcaa=a242_0x53911f(this,function(){const _0x2dbeab=a242_0x1816;return a242_0x14fcaa[_0x2dbeab(0xaf)]()['search'](_0x2dbeab(0xcd))[_0x2dbeab(0xaf)]()[_0x2dbeab(0xc6)](a242_0x14fcaa)[_0x2dbeab(0xe3)](_0x2dbeab(0xcd));});a242_0x14fcaa();'use strict';function a242_0x3749(){const _0x1d0714=['info','ParentId','filename','26DlIift','log','Name','defineProperty','manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','replace','../queries','154AvkeTT','then','get','185752MgKbkg','retrieveComponents','find','2316370hzFsrX','./salesforce-query.service','SalesforceQueryService','search','default','base64','fileName','GET_COMPONENT_HISTORIES_BY_IDS','31981fnkhuJ','FlosumComponentHistoryDto','1590600PFSPeV','fromSalesforce','join','toString','all','3224512uoOjxX','attachmentId','manually\x20retrieving\x20components\x20from\x20salesforce','push','%ids%','components','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','182814Julsre','COMPONENTS_PER_QUERY','salesforceService','manually\x20retrieved\x20%d/%d\x20components','name','map','length','../../../../core','1858356ebFXwh','logger','SalesforceRetrieverService','typedi','splice','query','constructor','retrieveLastComponents','COMPONENTS_PER_REQUEST','fileType','retrieveAttachment','apply','__importDefault','(((.+)+)+)+$','%parent_ids%','retrieveComponentIdsFromHistoryIds'];a242_0x3749=function(){return _0x1d0714;};return a242_0x3749();}var __importDefault=this&&this[a242_0x52472c(0xcc)]||function(_0x483553){return _0x483553&&_0x483553['__esModule']?_0x483553:{'default':_0x483553};};Object[a242_0x52472c(0xd6)](exports,'__esModule',{'value':!![]}),exports[a242_0x52472c(0xc2)]=void 0x0;const core_1=require(a242_0x52472c(0xbf)),typedi_1=__importDefault(require(a242_0x52472c(0xc3))),salesforce_query_service_1=require(a242_0x52472c(0xe1)),queries_1=require(a242_0x52472c(0xd9)),flosum_component_history_dto_1=require('../dto/flosum-component-history.dto');class SalesforceRetrieverService{constructor(_0x19ae79){const _0x3f9a23=a242_0x52472c;this[_0x3f9a23(0xba)]=_0x19ae79,this['logger']=new core_1['Logger'](SalesforceRetrieverService[_0x3f9a23(0xbc)]),this['COMPONENTS_PER_REQUEST']=0xbb8,this[_0x3f9a23(0xb9)]=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0x43677f){const _0x32b856=a242_0x52472c;this[_0x32b856(0xc1)][_0x32b856(0xd0)](_0x32b856(0xd7),_0x43677f[_0x32b856(0xbe)]);const _0x149728=typedi_1[_0x32b856(0xe4)][_0x32b856(0xdc)](salesforce_query_service_1[_0x32b856(0xe2)]),_0x2c6866=_0x43677f[_0x32b856(0xbd)](_0x36b691=>'\x27'+_0x36b691+'\x27'),_0x3fd80f=[];while(_0x2c6866[_0x32b856(0xbe)]){const _0x386322=_0x2c6866[_0x32b856(0xc4)](0x0,this['COMPONENTS_PER_QUERY']),_0x366913=_0x149728[_0x32b856(0xc5)](queries_1[_0x32b856(0xb7)][_0x32b856(0xd8)](_0x32b856(0xce),_0x386322[_0x32b856(0xae)]())),_0x3cf58d=_0x149728['query'](queries_1[_0x32b856(0xa9)]['replace'](_0x32b856(0xb5),_0x386322['join']()))[_0x32b856(0xdb)](_0x2129ee=>_0x2129ee[_0x32b856(0xbd)](_0x573b82=>flosum_component_history_dto_1[_0x32b856(0xab)][_0x32b856(0xad)](_0x573b82))),[_0x391216,_0x58948f]=await Promise[_0x32b856(0xb0)]([_0x366913,_0x3cf58d]);for(const _0x3e966a of _0x58948f){const _0x58a865=_0x391216[_0x32b856(0xdf)](_0x105906=>_0x105906[_0x32b856(0xd1)]===_0x3e966a['id']);_0x58a865&&_0x3fd80f[_0x32b856(0xb4)]({'fileType':_0x58a865[_0x32b856(0xd5)],'fileName':_0x3e966a[_0x32b856(0xd2)],'attachmentId':_0x58a865['Id']});}}return _0x3fd80f;}async[a242_0x52472c(0xc7)](_0x224534){const _0x2ed316=a242_0x52472c,_0x3b7d03=await this[_0x2ed316(0xcf)](_0x224534);this['logger'][_0x2ed316(0xd0)](_0x2ed316(0xb3));const _0x1f4e5a=[];for(const _0x531dbd of _0x3b7d03){const _0x4d01c7=await this[_0x2ed316(0xba)][_0x2ed316(0xca)](_0x531dbd[_0x2ed316(0xb2)],!![]);_0x1f4e5a['push']({'body':_0x4d01c7['toString'](_0x2ed316(0xa7)),'fileName':_0x531dbd[_0x2ed316(0xa8)],'fileType':_0x531dbd[_0x2ed316(0xc9)]}),this[_0x2ed316(0xc1)][_0x2ed316(0xd0)](_0x2ed316(0xbb),_0x1f4e5a[_0x2ed316(0xbe)],_0x224534['length']);}return _0x1f4e5a;}async['run'](_0xb4876a){const _0x541581=a242_0x52472c,_0x128a0a=[..._0xb4876a],_0x4b275f=[],_0x3fdab2=[];while(_0x128a0a[_0x541581(0xbe)]){const _0xaa34d=_0x128a0a[_0x541581(0xc4)](0x0,this[_0x541581(0xc8)]),_0x57282a=await this[_0x541581(0xba)][_0x541581(0xde)](_0xaa34d);_0xaa34d['length']!==_0x57282a['ids'][_0x541581(0xbe)]?(_0x128a0a[_0x541581(0xb4)](..._0x57282a['ids']),_0x4b275f[_0x541581(0xb4)](..._0x57282a[_0x541581(0xb6)])):_0x3fdab2[_0x541581(0xb4)](..._0xaa34d),this[_0x541581(0xc1)][_0x541581(0xd4)]('retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest',_0xb4876a[_0x541581(0xbe)]-_0x128a0a[_0x541581(0xbe)],_0xb4876a[_0x541581(0xbe)]);}if(_0x3fdab2[_0x541581(0xbe)]){const _0x479826=await this['retrieveLastComponents'](_0x3fdab2);_0x4b275f[_0x541581(0xb4)](..._0x479826);}return _0x4b275f;}}exports[a242_0x52472c(0xc2)]=SalesforceRetrieverService;