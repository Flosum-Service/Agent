const a279_0x276331=a279_0x18f8;function a279_0x18f8(_0x200697,_0x3c0d8e){const _0x196a42=a279_0x50f8();return a279_0x18f8=function(_0x561100,_0x595c27){_0x561100=_0x561100-0x13d;let _0x50f85e=_0x196a42[_0x561100];return _0x50f85e;},a279_0x18f8(_0x200697,_0x3c0d8e);}(function(_0x5437b2,_0x378d5c){const _0x31413b=a279_0x18f8,_0x17764e=_0x5437b2();while(!![]){try{const _0x3bb130=parseInt(_0x31413b(0x162))/0x1*(parseInt(_0x31413b(0x150))/0x2)+-parseInt(_0x31413b(0x166))/0x3+parseInt(_0x31413b(0x160))/0x4*(parseInt(_0x31413b(0x154))/0x5)+-parseInt(_0x31413b(0x173))/0x6*(parseInt(_0x31413b(0x153))/0x7)+parseInt(_0x31413b(0x13d))/0x8*(-parseInt(_0x31413b(0x16c))/0x9)+parseInt(_0x31413b(0x141))/0xa+-parseInt(_0x31413b(0x158))/0xb*(-parseInt(_0x31413b(0x16b))/0xc);if(_0x3bb130===_0x378d5c)break;else _0x17764e['push'](_0x17764e['shift']());}catch(_0x13f141){_0x17764e['push'](_0x17764e['shift']());}}}(a279_0x50f8,0x2d1ca));const a279_0x595c27=(function(){let _0x298b52=!![];return function(_0x3b3fc3,_0x30c7fb){const _0x4711ed=_0x298b52?function(){const _0x1797bd=a279_0x18f8;if(_0x30c7fb){const _0x1e0ecc=_0x30c7fb[_0x1797bd(0x14c)](_0x3b3fc3,arguments);return _0x30c7fb=null,_0x1e0ecc;}}:function(){};return _0x298b52=![],_0x4711ed;};}()),a279_0x561100=a279_0x595c27(this,function(){const _0x538e6a=a279_0x18f8;return a279_0x561100[_0x538e6a(0x14f)]()['search'](_0x538e6a(0x16e))[_0x538e6a(0x14f)]()[_0x538e6a(0x169)](a279_0x561100)[_0x538e6a(0x159)](_0x538e6a(0x16e));});a279_0x561100();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x13c925){const _0x523c4b=a279_0x18f8;return _0x13c925&&_0x13c925[_0x523c4b(0x142)]?_0x13c925:{'default':_0x13c925};};Object['defineProperty'](exports,a279_0x276331(0x142),{'value':!![]}),exports[a279_0x276331(0x152)]=void 0x0;const core_1=require(a279_0x276331(0x144)),typedi_1=__importDefault(require(a279_0x276331(0x14a))),salesforce_query_service_1=require('./salesforce-query.service'),queries_1=require(a279_0x276331(0x16f)),flosum_component_history_dto_1=require(a279_0x276331(0x16a));function a279_0x50f8(){const _0x2b7236=['base64','1430803Mtmuut','search','retrieveAttachment','length','run','all','map','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','1100zMsbmM','retrieveLastComponents','187GcoyDW','fromSalesforce','then','COMPONENTS_PER_QUERY','734184ukUkvE','push','%parent_ids%','constructor','../dto/flosum-component-history.dto','12bLVFZc','18uSuKCH','join','(((.+)+)+)+$','../queries','logger','splice','attachmentId','15894tLWtJL','name','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','Logger','278072gmtBpP','get','salesforceService','Manually\x20retrieving\x20components\x20from\x20salesforce','2649960blEwAK','__esModule','Name','../../../../core','retrieveComponents','FlosumComponentHistoryDto','%ids%','find','Manually\x20retrieved\x20%d/%d\x20components','typedi','COMPONENTS_PER_REQUEST','apply','ParentId','retrieveComponentIdsFromHistoryIds','toString','3152WDpwEH','info','SalesforceRetrieverService','826SatRRh','2215hAtEWZ','GET_COMPONENT_HISTORIES_BY_IDS','SalesforceQueryService'];a279_0x50f8=function(){return _0x2b7236;};return a279_0x50f8();}class SalesforceRetrieverService{constructor(_0x4e1ad0){const _0x12244a=a279_0x276331;this[_0x12244a(0x13f)]=_0x4e1ad0,this[_0x12244a(0x170)]=new core_1[(_0x12244a(0x176))](SalesforceRetrieverService[_0x12244a(0x174)]),this[_0x12244a(0x14b)]=0xbb8,this[_0x12244a(0x165)]=0x1f4;}async[a279_0x276331(0x14e)](_0x37ac34){const _0x3ea4f1=a279_0x276331;this['logger'][_0x3ea4f1(0x151)](_0x3ea4f1(0x15f),_0x37ac34[_0x3ea4f1(0x15b)]);const _0x4eec36=typedi_1['default'][_0x3ea4f1(0x13e)](salesforce_query_service_1[_0x3ea4f1(0x156)]),_0x12e05d=_0x37ac34[_0x3ea4f1(0x15e)](_0x5236ea=>'\x27'+_0x5236ea+'\x27'),_0x3c6669=[];while(_0x12e05d['length']){const _0xcaf138=_0x12e05d[_0x3ea4f1(0x171)](0x0,this[_0x3ea4f1(0x165)]),_0x17815c=_0x4eec36['query'](queries_1[_0x3ea4f1(0x175)]['replace'](_0x3ea4f1(0x168),_0xcaf138['join']())),_0x2f2101=_0x4eec36['query'](queries_1[_0x3ea4f1(0x155)]['replace'](_0x3ea4f1(0x147),_0xcaf138[_0x3ea4f1(0x16d)]()))[_0x3ea4f1(0x164)](_0x3072ee=>_0x3072ee[_0x3ea4f1(0x15e)](_0x465bf5=>flosum_component_history_dto_1[_0x3ea4f1(0x146)][_0x3ea4f1(0x163)](_0x465bf5))),[_0x209233,_0x385d58]=await Promise[_0x3ea4f1(0x15d)]([_0x17815c,_0x2f2101]);for(const _0x303123 of _0x385d58){const _0x57c0fe=_0x209233[_0x3ea4f1(0x148)](_0x2cec96=>_0x2cec96[_0x3ea4f1(0x14d)]===_0x303123['id']);_0x57c0fe&&_0x3c6669[_0x3ea4f1(0x167)]({'fileType':_0x57c0fe[_0x3ea4f1(0x143)],'fileName':_0x303123['filename'],'attachmentId':_0x57c0fe['Id']});}}return _0x3c6669;}async[a279_0x276331(0x161)](_0x39ec3c){const _0x124db6=a279_0x276331,_0x59c500=await this[_0x124db6(0x14e)](_0x39ec3c);this['logger'][_0x124db6(0x151)](_0x124db6(0x140));const _0x2e36c6=[];for(const _0x4a7946 of _0x59c500){const _0x1ab6e1=await this[_0x124db6(0x13f)][_0x124db6(0x15a)](_0x4a7946[_0x124db6(0x172)],!![]);_0x2e36c6[_0x124db6(0x167)]({'body':_0x1ab6e1[_0x124db6(0x14f)](_0x124db6(0x157)),'fileName':_0x4a7946['fileName'],'fileType':_0x4a7946['fileType']}),this[_0x124db6(0x170)][_0x124db6(0x151)](_0x124db6(0x149),_0x2e36c6[_0x124db6(0x15b)],_0x39ec3c[_0x124db6(0x15b)]);}return _0x2e36c6;}async[a279_0x276331(0x15c)](_0x11ace2){const _0x2589c1=a279_0x276331;if(!_0x11ace2['length'])return[];const _0x310f6c=await this[_0x2589c1(0x13f)][_0x2589c1(0x145)](_0x11ace2);return _0x310f6c;}}exports[a279_0x276331(0x152)]=SalesforceRetrieverService;