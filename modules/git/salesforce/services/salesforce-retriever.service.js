const a236_0x7596e8=a236_0x33b5;(function(_0x3bd016,_0x1dd1c3){const _0x4bdea1=a236_0x33b5,_0x289a0b=_0x3bd016();while(!![]){try{const _0x158bf0=-parseInt(_0x4bdea1(0x1d4))/0x1+parseInt(_0x4bdea1(0x1ce))/0x2*(-parseInt(_0x4bdea1(0x1db))/0x3)+parseInt(_0x4bdea1(0x1e7))/0x4*(-parseInt(_0x4bdea1(0x1d7))/0x5)+-parseInt(_0x4bdea1(0x1d6))/0x6*(-parseInt(_0x4bdea1(0x1ee))/0x7)+parseInt(_0x4bdea1(0x1d0))/0x8*(-parseInt(_0x4bdea1(0x1f3))/0x9)+parseInt(_0x4bdea1(0x1fe))/0xa+parseInt(_0x4bdea1(0x201))/0xb;if(_0x158bf0===_0x1dd1c3)break;else _0x289a0b['push'](_0x289a0b['shift']());}catch(_0x127c99){_0x289a0b['push'](_0x289a0b['shift']());}}}(a236_0x434f,0x9be4d));const a236_0x53009a=(function(){let _0x3f75c4=!![];return function(_0x4e73a4,_0x56accb){const _0x5f06c8=_0x3f75c4?function(){const _0x460c4e=a236_0x33b5;if(_0x56accb){const _0x1fff5b=_0x56accb[_0x460c4e(0x200)](_0x4e73a4,arguments);return _0x56accb=null,_0x1fff5b;}}:function(){};return _0x3f75c4=![],_0x5f06c8;};}()),a236_0x5d0a50=a236_0x53009a(this,function(){const _0x3afdfc=a236_0x33b5;return a236_0x5d0a50[_0x3afdfc(0x1fd)]()[_0x3afdfc(0x1f4)](_0x3afdfc(0x1d8))[_0x3afdfc(0x1fd)]()[_0x3afdfc(0x1f8)](a236_0x5d0a50)[_0x3afdfc(0x1f4)](_0x3afdfc(0x1d8));});a236_0x5d0a50();'use strict';function a236_0x33b5(_0x3e69ed,_0x11ca6a){const _0x1ce6a1=a236_0x434f();return a236_0x33b5=function(_0x5d0a50,_0x53009a){_0x5d0a50=_0x5d0a50-0x1cd;let _0x434f11=_0x1ce6a1[_0x5d0a50];return _0x434f11;},a236_0x33b5(_0x3e69ed,_0x11ca6a);}function a236_0x434f(){const _0x4e6051=['__importDefault','retrieveComponents','replace','toString','4726060XoDPnL','name','apply','15490662wuCICm','%ids%','components','ParentId','map','logger','retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','default','all','SalesforceRetrieverService','fileName','push','120018gGsWRc','%parent_ids%','808iuGdFO','manually\x20retrieving\x20components\x20from\x20salesforce','Name','../queries','11367holXbI','COMPONENTS_PER_REQUEST','6tELGhW','5cyyFLP','(((.+)+)+)+$','base64','length','12NwDFmt','fileType','COMPONENTS_PER_QUERY','attachmentId','retrieveComponentIdsFromHistoryIds','join','then','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','filename','typedi','../../../../core','./salesforce-query.service','165820einjQg','retrieveLastComponents','info','manually\x20retrieved\x20%d/%d\x20components','find','fromSalesforce','__esModule','928655tZWQqg','../dto/flosum-component-history.dto','defineProperty','ids','salesforceService','96426DHuHTH','search','query','get','run','constructor','Logger'];a236_0x434f=function(){return _0x4e6051;};return a236_0x434f();}var __importDefault=this&&this[a236_0x7596e8(0x1fa)]||function(_0x55c648){return _0x55c648&&_0x55c648['__esModule']?_0x55c648:{'default':_0x55c648};};Object[a236_0x7596e8(0x1f0)](exports,a236_0x7596e8(0x1ed),{'value':!![]}),exports[a236_0x7596e8(0x20a)]=void 0x0;const core_1=require(a236_0x7596e8(0x1e5)),typedi_1=__importDefault(require(a236_0x7596e8(0x1e4))),salesforce_query_service_1=require(a236_0x7596e8(0x1e6)),queries_1=require(a236_0x7596e8(0x1d3)),flosum_component_history_dto_1=require(a236_0x7596e8(0x1ef));class SalesforceRetrieverService{constructor(_0x254402){const _0x3784af=a236_0x7596e8;this['salesforceService']=_0x254402,this['logger']=new core_1[(_0x3784af(0x1f9))](SalesforceRetrieverService[_0x3784af(0x1ff)]),this[_0x3784af(0x1d5)]=0xbb8,this['COMPONENTS_PER_QUERY']=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0x545422){const _0x554601=a236_0x7596e8;this[_0x554601(0x206)][_0x554601(0x1e9)]('manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)',_0x545422[_0x554601(0x1da)]);const _0xc75c1b=typedi_1[_0x554601(0x208)][_0x554601(0x1f6)](salesforce_query_service_1['SalesforceQueryService']),_0x4f06f0=_0x545422[_0x554601(0x205)](_0x667f5a=>'\x27'+_0x667f5a+'\x27'),_0x10909e=[];while(_0x4f06f0['length']){const _0x18d853=_0x4f06f0['splice'](0x0,this[_0x554601(0x1dd)]),_0x1db5d3=_0xc75c1b[_0x554601(0x1f5)](queries_1[_0x554601(0x1e2)][_0x554601(0x1fc)](_0x554601(0x1cf),_0x18d853[_0x554601(0x1e0)]())),_0xbcd9d4=_0xc75c1b[_0x554601(0x1f5)](queries_1['GET_COMPONENT_HISTORIES_BY_IDS'][_0x554601(0x1fc)](_0x554601(0x202),_0x18d853['join']()))[_0x554601(0x1e1)](_0x3d1a8c=>_0x3d1a8c[_0x554601(0x205)](_0x1fd1f9=>flosum_component_history_dto_1['FlosumComponentHistoryDto'][_0x554601(0x1ec)](_0x1fd1f9))),[_0x25ce68,_0x22155a]=await Promise[_0x554601(0x209)]([_0x1db5d3,_0xbcd9d4]);for(const _0x59a280 of _0x22155a){const _0x1e6348=_0x25ce68[_0x554601(0x1eb)](_0x106719=>_0x106719[_0x554601(0x204)]===_0x59a280['id']);_0x1e6348&&_0x10909e[_0x554601(0x1cd)]({'fileType':_0x1e6348[_0x554601(0x1d2)],'fileName':_0x59a280[_0x554601(0x1e3)],'attachmentId':_0x1e6348['Id']});}}return _0x10909e;}async[a236_0x7596e8(0x1e8)](_0x3c125e){const _0x3a2098=a236_0x7596e8,_0x3b55b1=await this[_0x3a2098(0x1df)](_0x3c125e);this[_0x3a2098(0x206)][_0x3a2098(0x1e9)](_0x3a2098(0x1d1));const _0x216667=[];for(const _0x1fddd2 of _0x3b55b1){const _0x374b87=await this[_0x3a2098(0x1f2)]['retrieveAttachment'](_0x1fddd2[_0x3a2098(0x1de)],!![]);_0x216667[_0x3a2098(0x1cd)]({'body':_0x374b87[_0x3a2098(0x1fd)](_0x3a2098(0x1d9)),'fileName':_0x1fddd2[_0x3a2098(0x20b)],'fileType':_0x1fddd2[_0x3a2098(0x1dc)]}),this[_0x3a2098(0x206)]['info'](_0x3a2098(0x1ea),_0x216667[_0x3a2098(0x1da)],_0x3c125e[_0x3a2098(0x1da)]);}return _0x216667;}async[a236_0x7596e8(0x1f7)](_0x3ab9c9){const _0x23d659=a236_0x7596e8,_0x5befb5=[..._0x3ab9c9],_0x37ee95=[],_0x450fab=[];while(_0x5befb5['length']){const _0x125e20=_0x5befb5['splice'](0x0,this[_0x23d659(0x1d5)]),_0x44da74=await this[_0x23d659(0x1f2)][_0x23d659(0x1fb)](_0x125e20);_0x125e20['length']!==_0x44da74[_0x23d659(0x1f1)][_0x23d659(0x1da)]?(_0x5befb5[_0x23d659(0x1cd)](..._0x44da74[_0x23d659(0x1f1)]),_0x37ee95[_0x23d659(0x1cd)](..._0x44da74[_0x23d659(0x203)])):_0x450fab['push'](..._0x125e20),this[_0x23d659(0x206)]['log'](_0x23d659(0x207),_0x3ab9c9[_0x23d659(0x1da)]-_0x5befb5[_0x23d659(0x1da)],_0x3ab9c9[_0x23d659(0x1da)]);}if(_0x450fab[_0x23d659(0x1da)]){const _0x36491c=await this[_0x23d659(0x1e8)](_0x450fab);_0x37ee95[_0x23d659(0x1cd)](..._0x36491c);}return _0x37ee95;}}exports['SalesforceRetrieverService']=SalesforceRetrieverService;