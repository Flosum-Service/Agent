const a281_0xc31166=a281_0x7007;(function(_0x34916d,_0x3d3a7b){const _0xb598c4=a281_0x7007,_0x345da1=_0x34916d();while(!![]){try{const _0xaf42a8=parseInt(_0xb598c4(0xb4))/0x1+parseInt(_0xb598c4(0xd5))/0x2+parseInt(_0xb598c4(0xd2))/0x3*(-parseInt(_0xb598c4(0xba))/0x4)+-parseInt(_0xb598c4(0xd9))/0x5*(-parseInt(_0xb598c4(0xd3))/0x6)+-parseInt(_0xb598c4(0xbd))/0x7*(parseInt(_0xb598c4(0xda))/0x8)+-parseInt(_0xb598c4(0xbc))/0x9*(parseInt(_0xb598c4(0xcf))/0xa)+-parseInt(_0xb598c4(0xbf))/0xb*(parseInt(_0xb598c4(0xb5))/0xc);if(_0xaf42a8===_0x3d3a7b)break;else _0x345da1['push'](_0x345da1['shift']());}catch(_0x2885b9){_0x345da1['push'](_0x345da1['shift']());}}}(a281_0x3d61,0x534a9));const a281_0x2fd07c=(function(){let _0x591a09=!![];return function(_0xafbc42,_0x54c1b9){const _0x1e2f87=_0x591a09?function(){if(_0x54c1b9){const _0x269698=_0x54c1b9['apply'](_0xafbc42,arguments);return _0x54c1b9=null,_0x269698;}}:function(){};return _0x591a09=![],_0x1e2f87;};}()),a281_0x2a410c=a281_0x2fd07c(this,function(){const _0xcc8ea7=a281_0x7007;return a281_0x2a410c[_0xcc8ea7(0xb8)]()[_0xcc8ea7(0xdd)](_0xcc8ea7(0xdb))[_0xcc8ea7(0xb8)]()[_0xcc8ea7(0xc9)](a281_0x2a410c)[_0xcc8ea7(0xdd)](_0xcc8ea7(0xdb));});a281_0x2a410c();'use strict';function a281_0x7007(_0x489e6a,_0x5ceb6d){const _0x25c5ea=a281_0x3d61();return a281_0x7007=function(_0x2a410c,_0x2fd07c){_0x2a410c=_0x2a410c-0xb0;let _0x3d614b=_0x25c5ea[_0x2a410c];return _0x3d614b;},a281_0x7007(_0x489e6a,_0x5ceb6d);}function a281_0x3d61(){const _0x3547db=['replace','1035hgHffH','1770083sWwpUx','fromSalesforce','264fVZLMw','attachmentId','query','retrieveComponents','push','fileType','retrieveComponentIdsFromHistoryIds','run','../dto/flosum-component-history.dto','defineProperty','constructor','find','GET_COMPONENT_HISTORIES_BY_IDS','then','retrieveAttachment','default','33870bOEztz','get','all','5097UrZQHC','2613486npniJH','Logger','1357724OoThda','./salesforce-query.service','COMPONENTS_PER_QUERY','join','5fQxcrf','16SRXUHo','(((.+)+)+)+$','info','search','base64','SalesforceRetrieverService','%parent_ids%','ParentId','Manually\x20retrieving\x20components\x20from\x20salesforce','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','length','SalesforceQueryService','Manually\x20retrieved\x20%d/%d\x20components','Name','map','%ids%','logger','501013ofLlot','152148hRHGNB','filename','salesforceService','toString','__esModule','176SqBJwh'];a281_0x3d61=function(){return _0x3547db;};return a281_0x3d61();}var __importDefault=this&&this['__importDefault']||function(_0x2f03d7){const _0x5b5e82=a281_0x7007;return _0x2f03d7&&_0x2f03d7[_0x5b5e82(0xb9)]?_0x2f03d7:{'default':_0x2f03d7};};Object[a281_0xc31166(0xc8)](exports,a281_0xc31166(0xb9),{'value':!![]}),exports[a281_0xc31166(0xdf)]=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require(a281_0xc31166(0xd6)),queries_1=require('../queries'),flosum_component_history_dto_1=require(a281_0xc31166(0xc7));class SalesforceRetrieverService{constructor(_0x129afb){const _0x4664cf=a281_0xc31166;this['salesforceService']=_0x129afb,this['logger']=new core_1[(_0x4664cf(0xd4))](SalesforceRetrieverService['name']),this['COMPONENTS_PER_REQUEST']=0xbb8,this[_0x4664cf(0xd7)]=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0x20b84b){const _0x18ecdf=a281_0xc31166;this[_0x18ecdf(0xb3)][_0x18ecdf(0xdc)]('Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)',_0x20b84b[_0x18ecdf(0xe4)]);const _0x3354ca=typedi_1[_0x18ecdf(0xce)][_0x18ecdf(0xd0)](salesforce_query_service_1[_0x18ecdf(0xe5)]),_0x74eb89=_0x20b84b['map'](_0x1ac6b5=>'\x27'+_0x1ac6b5+'\x27'),_0x483855=[];while(_0x74eb89['length']){const _0x3c51bd=_0x74eb89['splice'](0x0,this['COMPONENTS_PER_QUERY']),_0x2420f2=_0x3354ca[_0x18ecdf(0xc1)](queries_1[_0x18ecdf(0xe3)]['replace'](_0x18ecdf(0xe0),_0x3c51bd[_0x18ecdf(0xd8)]())),_0x5b3464=_0x3354ca['query'](queries_1[_0x18ecdf(0xcb)][_0x18ecdf(0xbb)](_0x18ecdf(0xb2),_0x3c51bd[_0x18ecdf(0xd8)]()))[_0x18ecdf(0xcc)](_0x5725c7=>_0x5725c7[_0x18ecdf(0xb1)](_0xeaaad2=>flosum_component_history_dto_1['FlosumComponentHistoryDto'][_0x18ecdf(0xbe)](_0xeaaad2))),[_0x54517a,_0x30e21c]=await Promise[_0x18ecdf(0xd1)]([_0x2420f2,_0x5b3464]);for(const _0x2cf7bc of _0x30e21c){const _0x1e569b=_0x54517a[_0x18ecdf(0xca)](_0xf82742=>_0xf82742[_0x18ecdf(0xe1)]===_0x2cf7bc['id']);_0x1e569b&&_0x483855[_0x18ecdf(0xc3)]({'fileType':_0x1e569b[_0x18ecdf(0xb0)],'fileName':_0x2cf7bc[_0x18ecdf(0xb6)],'attachmentId':_0x1e569b['Id']});}}return _0x483855;}async['retrieveLastComponents'](_0x59d6b7){const _0x48f98c=a281_0xc31166,_0x4ec7e8=await this[_0x48f98c(0xc5)](_0x59d6b7);this[_0x48f98c(0xb3)][_0x48f98c(0xdc)](_0x48f98c(0xe2));const _0x594e96=[];for(const _0x2d4def of _0x4ec7e8){const _0x4a81bc=await this[_0x48f98c(0xb7)][_0x48f98c(0xcd)](_0x2d4def[_0x48f98c(0xc0)],!![]);_0x594e96[_0x48f98c(0xc3)]({'body':_0x4a81bc[_0x48f98c(0xb8)](_0x48f98c(0xde)),'fileName':_0x2d4def['fileName'],'fileType':_0x2d4def[_0x48f98c(0xc4)]}),this['logger'][_0x48f98c(0xdc)](_0x48f98c(0xe6),_0x594e96['length'],_0x59d6b7['length']);}return _0x594e96;}async[a281_0xc31166(0xc6)](_0x46d0fb){const _0xf888b1=a281_0xc31166;if(!_0x46d0fb[_0xf888b1(0xe4)])return[];const _0x4120f6=await this[_0xf888b1(0xb7)][_0xf888b1(0xc2)](_0x46d0fb);return _0x4120f6;}}exports['SalesforceRetrieverService']=SalesforceRetrieverService;