const a280_0x5a0b2f=a280_0x6ce2;(function(_0x1deb95,_0x805ecf){const _0x37aa66=a280_0x6ce2,_0x33d197=_0x1deb95();while(!![]){try{const _0x495b8d=parseInt(_0x37aa66(0x194))/0x1*(parseInt(_0x37aa66(0x196))/0x2)+-parseInt(_0x37aa66(0x179))/0x3*(parseInt(_0x37aa66(0x163))/0x4)+parseInt(_0x37aa66(0x183))/0x5+parseInt(_0x37aa66(0x187))/0x6*(parseInt(_0x37aa66(0x19b))/0x7)+parseInt(_0x37aa66(0x17f))/0x8+parseInt(_0x37aa66(0x175))/0x9*(parseInt(_0x37aa66(0x16d))/0xa)+-parseInt(_0x37aa66(0x17a))/0xb*(parseInt(_0x37aa66(0x199))/0xc);if(_0x495b8d===_0x805ecf)break;else _0x33d197['push'](_0x33d197['shift']());}catch(_0x1179a9){_0x33d197['push'](_0x33d197['shift']());}}}(a280_0x3a00,0x3cc51));const a280_0x383d36=(function(){let _0x3d024d=!![];return function(_0x32d487,_0x519ce3){const _0x2a304b=_0x3d024d?function(){const _0x20cb3a=a280_0x6ce2;if(_0x519ce3){const _0x5792ea=_0x519ce3[_0x20cb3a(0x174)](_0x32d487,arguments);return _0x519ce3=null,_0x5792ea;}}:function(){};return _0x3d024d=![],_0x2a304b;};}()),a280_0x1e8bae=a280_0x383d36(this,function(){const _0x52fb45=a280_0x6ce2;return a280_0x1e8bae[_0x52fb45(0x189)]()[_0x52fb45(0x190)](_0x52fb45(0x16b))[_0x52fb45(0x189)]()[_0x52fb45(0x162)](a280_0x1e8bae)[_0x52fb45(0x190)]('(((.+)+)+)+$');});function a280_0x6ce2(_0x1f6af8,_0x34e18a){const _0x77162a=a280_0x3a00();return a280_0x6ce2=function(_0x1e8bae,_0x383d36){_0x1e8bae=_0x1e8bae-0x162;let _0x3a007c=_0x77162a[_0x1e8bae];return _0x3a007c;},a280_0x6ce2(_0x1f6af8,_0x34e18a);}a280_0x1e8bae();function a280_0x3a00(){const _0x2c9c9d=['base64','length','COMPONENTS_PER_QUERY','Logger','FlosumComponentHistoryDto','info','Manually\x20retrieving\x20components\x20from\x20salesforce','(((.+)+)+)+$','SalesforceQueryService','1999790rCkjKM','typedi','%ids%','replace','name','ParentId','SalesforceRetrieverService','apply','18NMOVUt','GET_COMPONENT_HISTORIES_BY_IDS','fileName','./salesforce-query.service','3KRtZJT','9338186JNVFDh','retrieveAttachment','%parent_ids%','map','run','111392TJZGAr','get','__esModule','push','1937880yumppx','COMPONENTS_PER_REQUEST','join','retrieveComponents','4524tgRCfl','salesforceService','toString','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','filename','../dto/flosum-component-history.dto','fileType','logger','attachmentId','search','retrieveComponentIdsFromHistoryIds','find','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','1EscpDO','Manually\x20retrieved\x20%d/%d\x20components','374156rweZiv','defineProperty','../../../../core','12MbMrhe','splice','2513JFHNFE','constructor','645532JfeCga'];a280_0x3a00=function(){return _0x2c9c9d;};return a280_0x3a00();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x43c7fa){const _0x26b8cc=a280_0x6ce2;return _0x43c7fa&&_0x43c7fa[_0x26b8cc(0x181)]?_0x43c7fa:{'default':_0x43c7fa};};Object[a280_0x5a0b2f(0x197)](exports,a280_0x5a0b2f(0x181),{'value':!![]}),exports['SalesforceRetrieverService']=void 0x0;const core_1=require(a280_0x5a0b2f(0x198)),typedi_1=__importDefault(require(a280_0x5a0b2f(0x16e))),salesforce_query_service_1=require(a280_0x5a0b2f(0x178)),queries_1=require('../queries'),flosum_component_history_dto_1=require(a280_0x5a0b2f(0x18c));class SalesforceRetrieverService{constructor(_0x54f9da){const _0x2bc62e=a280_0x5a0b2f;this['salesforceService']=_0x54f9da,this[_0x2bc62e(0x18e)]=new core_1[(_0x2bc62e(0x167))](SalesforceRetrieverService[_0x2bc62e(0x171)]),this[_0x2bc62e(0x184)]=0xbb8,this[_0x2bc62e(0x166)]=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0x1d09bb){const _0xda54ed=a280_0x5a0b2f;this['logger'][_0xda54ed(0x169)](_0xda54ed(0x193),_0x1d09bb[_0xda54ed(0x165)]);const _0x3b7068=typedi_1['default'][_0xda54ed(0x180)](salesforce_query_service_1[_0xda54ed(0x16c)]),_0x427b1a=_0x1d09bb['map'](_0x207714=>'\x27'+_0x207714+'\x27'),_0x300300=[];while(_0x427b1a[_0xda54ed(0x165)]){const _0x33cad2=_0x427b1a[_0xda54ed(0x19a)](0x0,this['COMPONENTS_PER_QUERY']),_0x112425=_0x3b7068['query'](queries_1[_0xda54ed(0x18a)]['replace'](_0xda54ed(0x17c),_0x33cad2[_0xda54ed(0x185)]())),_0x47b219=_0x3b7068['query'](queries_1[_0xda54ed(0x176)][_0xda54ed(0x170)](_0xda54ed(0x16f),_0x33cad2['join']()))['then'](_0x316e71=>_0x316e71[_0xda54ed(0x17d)](_0x1af6c3=>flosum_component_history_dto_1[_0xda54ed(0x168)]['fromSalesforce'](_0x1af6c3))),[_0x31094b,_0x5956f7]=await Promise['all']([_0x112425,_0x47b219]);for(const _0x552afc of _0x5956f7){const _0x7e6cf9=_0x31094b[_0xda54ed(0x192)](_0x5270e2=>_0x5270e2[_0xda54ed(0x172)]===_0x552afc['id']);_0x7e6cf9&&_0x300300[_0xda54ed(0x182)]({'fileType':_0x7e6cf9['Name'],'fileName':_0x552afc[_0xda54ed(0x18b)],'attachmentId':_0x7e6cf9['Id']});}}return _0x300300;}async['retrieveLastComponents'](_0x27d1a5){const _0x2ae791=a280_0x5a0b2f,_0x347048=await this[_0x2ae791(0x191)](_0x27d1a5);this['logger'][_0x2ae791(0x169)](_0x2ae791(0x16a));const _0x25c966=[];for(const _0x50ad8f of _0x347048){const _0x15ade8=await this[_0x2ae791(0x188)][_0x2ae791(0x17b)](_0x50ad8f[_0x2ae791(0x18f)],!![]);_0x25c966[_0x2ae791(0x182)]({'body':_0x15ade8[_0x2ae791(0x189)](_0x2ae791(0x164)),'fileName':_0x50ad8f[_0x2ae791(0x177)],'fileType':_0x50ad8f[_0x2ae791(0x18d)]}),this['logger'][_0x2ae791(0x169)](_0x2ae791(0x195),_0x25c966[_0x2ae791(0x165)],_0x27d1a5[_0x2ae791(0x165)]);}return _0x25c966;}async[a280_0x5a0b2f(0x17e)](_0x5e8d8a){const _0x135f0d=a280_0x5a0b2f;if(!_0x5e8d8a[_0x135f0d(0x165)])return[];const _0x59784d=await this[_0x135f0d(0x188)][_0x135f0d(0x186)](_0x5e8d8a);return _0x59784d;}}exports[a280_0x5a0b2f(0x173)]=SalesforceRetrieverService;