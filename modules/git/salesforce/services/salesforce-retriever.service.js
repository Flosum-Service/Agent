function a253_0x2c32(){const _0x171a0a=['get','join','../dto/flosum-component-history.dto','defineProperty','logger','ids','COMPONENTS_PER_REQUEST','132BXfCpZ','../queries','Manually\x20retrieving\x20components\x20from\x20salesforce','310617RueMZh','push','filename','fileName','fileType','log','(((.+)+)+)+$','COMPONENTS_PER_QUERY','79010sXlyrA','apply','128HnuiZr','replace','retrieveComponentIdsFromHistoryIds','Retrieved\x20%d/%d\x20components\x20from\x20salesforce\x20rest','components','length','Logger','info','toString','search','then','%parent_ids%','451juNkrO','default','313782nGcrML','typedi','ParentId','SalesforceQueryService','__esModule','attachmentId','base64','query','470itduZR','524613JaFUTE','GET_COMPONENT_HISTORIES_BY_IDS','__importDefault','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','SalesforceRetrieverService','find','splice','map','retrieveLastComponents','15156IixSBp','retrieveAttachment','retrieveComponents','249914nOTJza','136381BqGPKx'];a253_0x2c32=function(){return _0x171a0a;};return a253_0x2c32();}const a253_0x53c582=a253_0x60f3;(function(_0x3ebd87,_0x5e81e2){const _0x5e6bb6=a253_0x60f3,_0x560ad0=_0x3ebd87();while(!![]){try{const _0x20cd85=-parseInt(_0x5e6bb6(0x91))/0x1+-parseInt(_0x5e6bb6(0xa6))/0x2+-parseInt(_0x5e6bb6(0x9a))/0x3+parseInt(_0x5e6bb6(0xa3))/0x4*(-parseInt(_0x5e6bb6(0x99))/0x5)+-parseInt(_0x5e6bb6(0x76))/0x6*(-parseInt(_0x5e6bb6(0xa7))/0x7)+parseInt(_0x5e6bb6(0x83))/0x8*(parseInt(_0x5e6bb6(0x79))/0x9)+parseInt(_0x5e6bb6(0x81))/0xa*(parseInt(_0x5e6bb6(0x8f))/0xb);if(_0x20cd85===_0x5e81e2)break;else _0x560ad0['push'](_0x560ad0['shift']());}catch(_0x2e3565){_0x560ad0['push'](_0x560ad0['shift']());}}}(a253_0x2c32,0x51c97));const a253_0x41666d=(function(){let _0x1e9f8d=!![];return function(_0x5cbacf,_0x3c51a4){const _0x1d5e39=_0x1e9f8d?function(){const _0x661c=a253_0x60f3;if(_0x3c51a4){const _0x5106cd=_0x3c51a4[_0x661c(0x82)](_0x5cbacf,arguments);return _0x3c51a4=null,_0x5106cd;}}:function(){};return _0x1e9f8d=![],_0x1d5e39;};}()),a253_0x113bc0=a253_0x41666d(this,function(){const _0x2cf698=a253_0x60f3;return a253_0x113bc0[_0x2cf698(0x8b)]()[_0x2cf698(0x8c)](_0x2cf698(0x7f))[_0x2cf698(0x8b)]()['constructor'](a253_0x113bc0)[_0x2cf698(0x8c)](_0x2cf698(0x7f));});a253_0x113bc0();'use strict';function a253_0x60f3(_0x58a9e8,_0x4c4be7){const _0x295278=a253_0x2c32();return a253_0x60f3=function(_0x113bc0,_0x41666d){_0x113bc0=_0x113bc0-0x73;let _0x2c329e=_0x295278[_0x113bc0];return _0x2c329e;},a253_0x60f3(_0x58a9e8,_0x4c4be7);}var __importDefault=this&&this[a253_0x53c582(0x9c)]||function(_0x32594e){const _0x84a4a2=a253_0x53c582;return _0x32594e&&_0x32594e[_0x84a4a2(0x95)]?_0x32594e:{'default':_0x32594e};};Object[a253_0x53c582(0xab)](exports,a253_0x53c582(0x95),{'value':!![]}),exports[a253_0x53c582(0x9e)]=void 0x0;const core_1=require('../../../../core'),typedi_1=__importDefault(require(a253_0x53c582(0x92))),salesforce_query_service_1=require('./salesforce-query.service'),queries_1=require(a253_0x53c582(0x77)),flosum_component_history_dto_1=require(a253_0x53c582(0xaa));class SalesforceRetrieverService{constructor(_0xca2f7c){const _0x347648=a253_0x53c582;this['salesforceService']=_0xca2f7c,this['logger']=new core_1[(_0x347648(0x89))](SalesforceRetrieverService['name']),this[_0x347648(0x75)]=0xbb8,this['COMPONENTS_PER_QUERY']=0x1f4;}async[a253_0x53c582(0x85)](_0x5b000d){const _0x226b88=a253_0x53c582;this[_0x226b88(0x73)][_0x226b88(0x8a)](_0x226b88(0x9d),_0x5b000d['length']);const _0x53deb9=typedi_1[_0x226b88(0x90)][_0x226b88(0xa8)](salesforce_query_service_1[_0x226b88(0x94)]),_0x6d9b98=_0x5b000d[_0x226b88(0xa1)](_0x4b1b13=>'\x27'+_0x4b1b13+'\x27'),_0x5241ed=[];while(_0x6d9b98['length']){const _0x45b484=_0x6d9b98[_0x226b88(0xa0)](0x0,this[_0x226b88(0x80)]),_0x3faa6f=_0x53deb9[_0x226b88(0x98)](queries_1['GET_ATTACHMENT_BY_PARENT_IDS_QUERY'][_0x226b88(0x84)](_0x226b88(0x8e),_0x45b484['join']())),_0x13ea1f=_0x53deb9[_0x226b88(0x98)](queries_1[_0x226b88(0x9b)][_0x226b88(0x84)]('%ids%',_0x45b484[_0x226b88(0xa9)]()))[_0x226b88(0x8d)](_0x17b3b3=>_0x17b3b3[_0x226b88(0xa1)](_0x204bcf=>flosum_component_history_dto_1['FlosumComponentHistoryDto']['fromSalesforce'](_0x204bcf))),[_0x29ce68,_0x4c4276]=await Promise['all']([_0x3faa6f,_0x13ea1f]);for(const _0x586cb8 of _0x4c4276){const _0x2debb0=_0x29ce68[_0x226b88(0x9f)](_0x2c48e9=>_0x2c48e9[_0x226b88(0x93)]===_0x586cb8['id']);_0x2debb0&&_0x5241ed['push']({'fileType':_0x2debb0['Name'],'fileName':_0x586cb8[_0x226b88(0x7b)],'attachmentId':_0x2debb0['Id']});}}return _0x5241ed;}async[a253_0x53c582(0xa2)](_0x446def){const _0x38cef2=a253_0x53c582,_0x425824=await this[_0x38cef2(0x85)](_0x446def);this['logger'][_0x38cef2(0x8a)](_0x38cef2(0x78));const _0x423802=[];for(const _0x374c08 of _0x425824){const _0x56feb3=await this['salesforceService'][_0x38cef2(0xa4)](_0x374c08[_0x38cef2(0x96)],!![]);_0x423802[_0x38cef2(0x7a)]({'body':_0x56feb3[_0x38cef2(0x8b)](_0x38cef2(0x97)),'fileName':_0x374c08[_0x38cef2(0x7c)],'fileType':_0x374c08[_0x38cef2(0x7d)]}),this['logger'][_0x38cef2(0x8a)]('Manually\x20retrieved\x20%d/%d\x20components',_0x423802['length'],_0x446def[_0x38cef2(0x88)]);}return _0x423802;}async['run'](_0x258083){const _0x34d476=a253_0x53c582,_0x4cbd0f=[..._0x258083],_0x4a72d4=[],_0x2bd4d1=[];while(_0x4cbd0f['length']){const _0x6dcd0=_0x4cbd0f[_0x34d476(0xa0)](0x0,this[_0x34d476(0x75)]),_0x366fda=await this['salesforceService'][_0x34d476(0xa5)](_0x6dcd0);_0x6dcd0[_0x34d476(0x88)]!==_0x366fda[_0x34d476(0x74)][_0x34d476(0x88)]?(_0x4cbd0f[_0x34d476(0x7a)](..._0x366fda[_0x34d476(0x74)]),_0x4a72d4[_0x34d476(0x7a)](..._0x366fda[_0x34d476(0x87)])):_0x2bd4d1['push'](..._0x6dcd0),this['logger'][_0x34d476(0x7e)](_0x34d476(0x86),_0x258083[_0x34d476(0x88)]-_0x4cbd0f[_0x34d476(0x88)],_0x258083[_0x34d476(0x88)]);}if(_0x2bd4d1[_0x34d476(0x88)]){const _0x1a3500=await this[_0x34d476(0xa2)](_0x2bd4d1);_0x4a72d4[_0x34d476(0x7a)](..._0x1a3500);}return _0x4a72d4;}}exports[a253_0x53c582(0x9e)]=SalesforceRetrieverService;