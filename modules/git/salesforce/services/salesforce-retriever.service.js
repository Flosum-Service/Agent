const a280_0xd94ff6=a280_0x37bb;(function(_0x27902a,_0x582387){const _0x25b601=a280_0x37bb,_0xa0f695=_0x27902a();while(!![]){try{const _0x2c7ed7=parseInt(_0x25b601(0xa3))/0x1+-parseInt(_0x25b601(0xa9))/0x2+-parseInt(_0x25b601(0x8c))/0x3+-parseInt(_0x25b601(0xb7))/0x4*(parseInt(_0x25b601(0x89))/0x5)+parseInt(_0x25b601(0x8e))/0x6+-parseInt(_0x25b601(0xb1))/0x7+-parseInt(_0x25b601(0x91))/0x8*(-parseInt(_0x25b601(0x96))/0x9);if(_0x2c7ed7===_0x582387)break;else _0xa0f695['push'](_0xa0f695['shift']());}catch(_0x50cf24){_0xa0f695['push'](_0xa0f695['shift']());}}}(a280_0x740b,0x3e2b9));const a280_0x17caea=(function(){let _0x1aa362=!![];return function(_0x467fc3,_0x2d3d10){const _0x2c46f0=_0x1aa362?function(){if(_0x2d3d10){const _0x400e3a=_0x2d3d10['apply'](_0x467fc3,arguments);return _0x2d3d10=null,_0x400e3a;}}:function(){};return _0x1aa362=![],_0x2c46f0;};}()),a280_0x5cab8f=a280_0x17caea(this,function(){const _0x134dcb=a280_0x37bb;return a280_0x5cab8f[_0x134dcb(0xb4)]()[_0x134dcb(0x9d)](_0x134dcb(0xb5))[_0x134dcb(0xb4)]()[_0x134dcb(0x8b)](a280_0x5cab8f)[_0x134dcb(0x9d)](_0x134dcb(0xb5));});a280_0x5cab8f();'use strict';var __importDefault=this&&this[a280_0xd94ff6(0xab)]||function(_0xa2f058){const _0x20808c=a280_0xd94ff6;return _0xa2f058&&_0xa2f058[_0x20808c(0x99)]?_0xa2f058:{'default':_0xa2f058};};Object[a280_0xd94ff6(0x83)](exports,a280_0xd94ff6(0x99),{'value':!![]}),exports[a280_0xd94ff6(0xaf)]=void 0x0;function a280_0x740b(){const _0xd4054a=['all','constructor','143403pUCzNV','Manually\x20retrieved\x20%d/%d\x20components','2718696zLNHNY','salesforceService','%parent_ids%','909416oeImuI','info','retrieveLastComponents','get','Logger','9KIiHSF','Manually\x20retrieving\x20components\x20from\x20salesforce','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','__esModule','fileType','splice','Name','search','COMPONENTS_PER_QUERY','then','logger','base64','default','269172qbKxCp','replace','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','attachmentId','ParentId','push','683884irNIdU','GET_COMPONENT_HISTORIES_BY_IDS','__importDefault','query','find','filename','SalesforceRetrieverService','FlosumComponentHistoryDto','230587NRynaN','retrieveComponentIdsFromHistoryIds','map','toString','(((.+)+)+)+$','../../../../core','4016gGRKjl','run','retrieveAttachment','defineProperty','length','name','../dto/flosum-component-history.dto','./salesforce-query.service','join','790lxVYBb'];a280_0x740b=function(){return _0xd4054a;};return a280_0x740b();}const core_1=require(a280_0xd94ff6(0xb6)),typedi_1=__importDefault(require('typedi')),salesforce_query_service_1=require(a280_0xd94ff6(0x87)),queries_1=require('../queries'),flosum_component_history_dto_1=require(a280_0xd94ff6(0x86));function a280_0x37bb(_0x2bac92,_0x136559){const _0x22942a=a280_0x740b();return a280_0x37bb=function(_0x5cab8f,_0x17caea){_0x5cab8f=_0x5cab8f-0x82;let _0x740b72=_0x22942a[_0x5cab8f];return _0x740b72;},a280_0x37bb(_0x2bac92,_0x136559);}class SalesforceRetrieverService{constructor(_0x4f2ec5){const _0x71cc8=a280_0xd94ff6;this[_0x71cc8(0x8f)]=_0x4f2ec5,this[_0x71cc8(0xa0)]=new core_1[(_0x71cc8(0x95))](SalesforceRetrieverService[_0x71cc8(0x85)]),this['COMPONENTS_PER_REQUEST']=0xbb8,this[_0x71cc8(0x9e)]=0x1f4;}async[a280_0xd94ff6(0xb2)](_0x35281c){const _0x186c6d=a280_0xd94ff6;this['logger'][_0x186c6d(0x92)](_0x186c6d(0xa5),_0x35281c[_0x186c6d(0x84)]);const _0x55d993=typedi_1[_0x186c6d(0xa2)][_0x186c6d(0x94)](salesforce_query_service_1['SalesforceQueryService']),_0x4202a9=_0x35281c[_0x186c6d(0xb3)](_0x4e64cc=>'\x27'+_0x4e64cc+'\x27'),_0x68679b=[];while(_0x4202a9[_0x186c6d(0x84)]){const _0x4a4b0b=_0x4202a9[_0x186c6d(0x9b)](0x0,this[_0x186c6d(0x9e)]),_0x413bac=_0x55d993[_0x186c6d(0xac)](queries_1[_0x186c6d(0x98)][_0x186c6d(0xa4)](_0x186c6d(0x90),_0x4a4b0b[_0x186c6d(0x88)]())),_0x3e0d09=_0x55d993[_0x186c6d(0xac)](queries_1[_0x186c6d(0xaa)][_0x186c6d(0xa4)]('%ids%',_0x4a4b0b[_0x186c6d(0x88)]()))[_0x186c6d(0x9f)](_0x446788=>_0x446788[_0x186c6d(0xb3)](_0x178ec8=>flosum_component_history_dto_1[_0x186c6d(0xb0)]['fromSalesforce'](_0x178ec8))),[_0x3f685b,_0x3bb356]=await Promise[_0x186c6d(0x8a)]([_0x413bac,_0x3e0d09]);for(const _0xf26b44 of _0x3bb356){const _0x1c70d2=_0x3f685b[_0x186c6d(0xad)](_0x1eaf9e=>_0x1eaf9e[_0x186c6d(0xa7)]===_0xf26b44['id']);_0x1c70d2&&_0x68679b[_0x186c6d(0xa8)]({'fileType':_0x1c70d2[_0x186c6d(0x9c)],'fileName':_0xf26b44[_0x186c6d(0xae)],'attachmentId':_0x1c70d2['Id']});}}return _0x68679b;}async[a280_0xd94ff6(0x93)](_0x400585){const _0x15216e=a280_0xd94ff6,_0x2bde39=await this[_0x15216e(0xb2)](_0x400585);this[_0x15216e(0xa0)][_0x15216e(0x92)](_0x15216e(0x97));const _0x45282b=[];for(const _0x5ea672 of _0x2bde39){const _0x41fbc6=await this[_0x15216e(0x8f)][_0x15216e(0x82)](_0x5ea672[_0x15216e(0xa6)],!![]);_0x45282b[_0x15216e(0xa8)]({'body':_0x41fbc6[_0x15216e(0xb4)](_0x15216e(0xa1)),'fileName':_0x5ea672['fileName'],'fileType':_0x5ea672[_0x15216e(0x9a)]}),this[_0x15216e(0xa0)][_0x15216e(0x92)](_0x15216e(0x8d),_0x45282b[_0x15216e(0x84)],_0x400585[_0x15216e(0x84)]);}return _0x45282b;}async[a280_0xd94ff6(0xb8)](_0x8d4120){const _0x2a4719=a280_0xd94ff6;if(!_0x8d4120[_0x2a4719(0x84)])return[];const _0x3ff1d8=await this['salesforceService']['retrieveComponents'](_0x8d4120);return _0x3ff1d8;}}exports[a280_0xd94ff6(0xaf)]=SalesforceRetrieverService;