const a269_0x5a2418=a269_0x2be9;function a269_0x2be9(_0x5dbce1,_0xf08168){const _0x12c9a9=a269_0x3203();return a269_0x2be9=function(_0xa7d428,_0x49423a){_0xa7d428=_0xa7d428-0x14e;let _0x320357=_0x12c9a9[_0xa7d428];return _0x320357;},a269_0x2be9(_0x5dbce1,_0xf08168);}function a269_0x3203(){const _0x4c106d=['GET_ATTACHMENT_BY_PARENT_IDS_QUERY','query','GET_COMPONENT_HISTORIES_BY_IDS','retrieveComponents','salesforceService','5075fixRJo','logger','toString','88qKrdge','fromSalesforce','../queries','get','typedi','__importDefault','name','info','replace','247734MGqpje','../../../../core','(((.+)+)+)+$','constructor','filename','push','FlosumComponentHistoryDto','2893821PkwVUw','SalesforceRetrieverService','%ids%','length','search','3saPGEO','run','SalesforceQueryService','Logger','../dto/flosum-component-history.dto','attachmentId','join','base64','./salesforce-query.service','retrieveAttachment','map','apply','4650Qyqvhw','Manually\x20retrieving\x20components\x20from\x20salesforce','%parent_ids%','retrieveComponentIdsFromHistoryIds','splice','ParentId','retrieveLastComponents','Manually\x20retrieved\x20%d/%d\x20components','513891WtttSX','all','Name','8oBDCGa','default','2680317iAKNeK','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','COMPONENTS_PER_QUERY','2018968zlChYC','1550160NbgaLV','then'];a269_0x3203=function(){return _0x4c106d;};return a269_0x3203();}(function(_0x3e7df3,_0x83a78b){const _0x2d74a9=a269_0x2be9,_0x339ad4=_0x3e7df3();while(!![]){try{const _0x384bae=-parseInt(_0x2d74a9(0x180))/0x1+-parseInt(_0x2d74a9(0x160))/0x2+parseInt(_0x2d74a9(0x16c))/0x3*(parseInt(_0x2d74a9(0x188))/0x4)+parseInt(_0x2d74a9(0x154))/0x5*(-parseInt(_0x2d74a9(0x178))/0x6)+parseInt(_0x2d74a9(0x167))/0x7*(parseInt(_0x2d74a9(0x183))/0x8)+-parseInt(_0x2d74a9(0x185))/0x9+parseInt(_0x2d74a9(0x189))/0xa*(parseInt(_0x2d74a9(0x157))/0xb);if(_0x384bae===_0x83a78b)break;else _0x339ad4['push'](_0x339ad4['shift']());}catch(_0x183c16){_0x339ad4['push'](_0x339ad4['shift']());}}}(a269_0x3203,0x6a76d));const a269_0x49423a=(function(){let _0x4fcab7=!![];return function(_0x70356c,_0x45af46){const _0x45d6a8=_0x4fcab7?function(){const _0x174a7f=a269_0x2be9;if(_0x45af46){const _0x47ccca=_0x45af46[_0x174a7f(0x177)](_0x70356c,arguments);return _0x45af46=null,_0x47ccca;}}:function(){};return _0x4fcab7=![],_0x45d6a8;};}()),a269_0xa7d428=a269_0x49423a(this,function(){const _0x52d39b=a269_0x2be9;return a269_0xa7d428['toString']()[_0x52d39b(0x16b)](_0x52d39b(0x162))['toString']()[_0x52d39b(0x163)](a269_0xa7d428)['search']('(((.+)+)+)+$');});a269_0xa7d428();'use strict';var __importDefault=this&&this[a269_0x5a2418(0x15c)]||function(_0x20cdb5){return _0x20cdb5&&_0x20cdb5['__esModule']?_0x20cdb5:{'default':_0x20cdb5};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a269_0x5a2418(0x168)]=void 0x0;const core_1=require(a269_0x5a2418(0x161)),typedi_1=__importDefault(require(a269_0x5a2418(0x15b))),salesforce_query_service_1=require(a269_0x5a2418(0x174)),queries_1=require(a269_0x5a2418(0x159)),flosum_component_history_dto_1=require(a269_0x5a2418(0x170));class SalesforceRetrieverService{constructor(_0x3628ad){const _0x347b34=a269_0x5a2418;this[_0x347b34(0x153)]=_0x3628ad,this[_0x347b34(0x155)]=new core_1[(_0x347b34(0x16f))](SalesforceRetrieverService[_0x347b34(0x15d)]),this['COMPONENTS_PER_REQUEST']=0xbb8,this[_0x347b34(0x187)]=0x1f4;}async[a269_0x5a2418(0x17b)](_0x367865){const _0x3f390f=a269_0x5a2418;this['logger']['info'](_0x3f390f(0x186),_0x367865[_0x3f390f(0x16a)]);const _0x4ef8aa=typedi_1[_0x3f390f(0x184)][_0x3f390f(0x15a)](salesforce_query_service_1[_0x3f390f(0x16e)]),_0x3ec912=_0x367865['map'](_0x1b7899=>'\x27'+_0x1b7899+'\x27'),_0x48a1f8=[];while(_0x3ec912[_0x3f390f(0x16a)]){const _0x36fce4=_0x3ec912[_0x3f390f(0x17c)](0x0,this[_0x3f390f(0x187)]),_0x48b8a4=_0x4ef8aa[_0x3f390f(0x150)](queries_1[_0x3f390f(0x14f)][_0x3f390f(0x15f)](_0x3f390f(0x17a),_0x36fce4[_0x3f390f(0x172)]())),_0x528e2e=_0x4ef8aa[_0x3f390f(0x150)](queries_1[_0x3f390f(0x151)][_0x3f390f(0x15f)](_0x3f390f(0x169),_0x36fce4[_0x3f390f(0x172)]()))[_0x3f390f(0x14e)](_0x35964b=>_0x35964b[_0x3f390f(0x176)](_0x31f6a8=>flosum_component_history_dto_1[_0x3f390f(0x166)][_0x3f390f(0x158)](_0x31f6a8))),[_0x11cb80,_0x5192db]=await Promise[_0x3f390f(0x181)]([_0x48b8a4,_0x528e2e]);for(const _0x3c00e4 of _0x5192db){const _0x253544=_0x11cb80['find'](_0x570999=>_0x570999[_0x3f390f(0x17d)]===_0x3c00e4['id']);_0x253544&&_0x48a1f8[_0x3f390f(0x165)]({'fileType':_0x253544[_0x3f390f(0x182)],'fileName':_0x3c00e4[_0x3f390f(0x164)],'attachmentId':_0x253544['Id']});}}return _0x48a1f8;}async[a269_0x5a2418(0x17e)](_0x2b521f){const _0x41423a=a269_0x5a2418,_0x101032=await this[_0x41423a(0x17b)](_0x2b521f);this['logger']['info'](_0x41423a(0x179));const _0x2c7da6=[];for(const _0x5c98ef of _0x101032){const _0x57cac9=await this[_0x41423a(0x153)][_0x41423a(0x175)](_0x5c98ef[_0x41423a(0x171)],!![]);_0x2c7da6[_0x41423a(0x165)]({'body':_0x57cac9[_0x41423a(0x156)](_0x41423a(0x173)),'fileName':_0x5c98ef['fileName'],'fileType':_0x5c98ef['fileType']}),this['logger'][_0x41423a(0x15e)](_0x41423a(0x17f),_0x2c7da6[_0x41423a(0x16a)],_0x2b521f['length']);}return _0x2c7da6;}async[a269_0x5a2418(0x16d)](_0x41e4a0){const _0x27055a=a269_0x5a2418;if(!_0x41e4a0['length'])return[];const _0x31e4e5=await this['salesforceService'][_0x27055a(0x152)](_0x41e4a0);return _0x31e4e5;}}exports[a269_0x5a2418(0x168)]=SalesforceRetrieverService;