const a279_0x2f1a84=a279_0xccb8;(function(_0x115a24,_0x5585c5){const _0x17a8d6=a279_0xccb8,_0x38b3f2=_0x115a24();while(!![]){try{const _0x261f06=parseInt(_0x17a8d6(0x99))/0x1+-parseInt(_0x17a8d6(0xa1))/0x2+-parseInt(_0x17a8d6(0xb4))/0x3*(-parseInt(_0x17a8d6(0xba))/0x4)+parseInt(_0x17a8d6(0x97))/0x5*(parseInt(_0x17a8d6(0x91))/0x6)+-parseInt(_0x17a8d6(0xb3))/0x7+parseInt(_0x17a8d6(0x8b))/0x8+-parseInt(_0x17a8d6(0x9e))/0x9;if(_0x261f06===_0x5585c5)break;else _0x38b3f2['push'](_0x38b3f2['shift']());}catch(_0x17aca8){_0x38b3f2['push'](_0x38b3f2['shift']());}}}(a279_0x3982,0x394a0));const a279_0x5693a9=(function(){let _0x562ca6=!![];return function(_0xc0419,_0xd60806){const _0x3eb368=_0x562ca6?function(){if(_0xd60806){const _0x4fe93c=_0xd60806['apply'](_0xc0419,arguments);return _0xd60806=null,_0x4fe93c;}}:function(){};return _0x562ca6=![],_0x3eb368;};}()),a279_0x274076=a279_0x5693a9(this,function(){const _0x5a5c67=a279_0xccb8;return a279_0x274076[_0x5a5c67(0xa8)]()[_0x5a5c67(0x9b)](_0x5a5c67(0x8a))[_0x5a5c67(0xa8)]()[_0x5a5c67(0x98)](a279_0x274076)[_0x5a5c67(0x9b)](_0x5a5c67(0x8a));});a279_0x274076();function a279_0xccb8(_0x58f8a8,_0x4a0227){const _0x5d6e02=a279_0x3982();return a279_0xccb8=function(_0x274076,_0x5693a9){_0x274076=_0x274076-0x8a;let _0x398214=_0x5d6e02[_0x274076];return _0x398214;},a279_0xccb8(_0x58f8a8,_0x4a0227);}'use strict';var __importDefault=this&&this[a279_0x2f1a84(0xbe)]||function(_0x3efb99){const _0x381b8e=a279_0x2f1a84;return _0x3efb99&&_0x3efb99[_0x381b8e(0x90)]?_0x3efb99:{'default':_0x3efb99};};Object[a279_0x2f1a84(0xa0)](exports,a279_0x2f1a84(0x90),{'value':!![]}),exports[a279_0x2f1a84(0x8c)]=void 0x0;const core_1=require(a279_0x2f1a84(0xbf)),typedi_1=__importDefault(require(a279_0x2f1a84(0xa2))),salesforce_query_service_1=require(a279_0x2f1a84(0x9c)),queries_1=require('../queries'),flosum_component_history_dto_1=require(a279_0x2f1a84(0xb8));class SalesforceRetrieverService{constructor(_0x3f258a){const _0x84bd89=a279_0x2f1a84;this['salesforceService']=_0x3f258a,this[_0x84bd89(0x96)]=new core_1[(_0x84bd89(0xa7))](SalesforceRetrieverService[_0x84bd89(0xaa)]),this[_0x84bd89(0xb9)]=0xbb8,this['COMPONENTS_PER_QUERY']=0x1f4;}async['retrieveComponentIdsFromHistoryIds'](_0x134599){const _0x1df38b=a279_0x2f1a84;this['logger'][_0x1df38b(0xa3)](_0x1df38b(0xae),_0x134599['length']);const _0x524fd=typedi_1[_0x1df38b(0xb6)][_0x1df38b(0x92)](salesforce_query_service_1[_0x1df38b(0xbc)]),_0x101e06=_0x134599[_0x1df38b(0xa4)](_0x4f1921=>'\x27'+_0x4f1921+'\x27'),_0x1408f0=[];while(_0x101e06[_0x1df38b(0xb2)]){const _0x1726fe=_0x101e06[_0x1df38b(0xc1)](0x0,this[_0x1df38b(0xab)]),_0x3bf85a=_0x524fd[_0x1df38b(0xa5)](queries_1[_0x1df38b(0xc0)][_0x1df38b(0xa9)](_0x1df38b(0xac),_0x1726fe[_0x1df38b(0x8e)]())),_0x14d4b4=_0x524fd['query'](queries_1[_0x1df38b(0x8d)][_0x1df38b(0xa9)]('%ids%',_0x1726fe[_0x1df38b(0x8e)]()))[_0x1df38b(0x8f)](_0x20ab9a=>_0x20ab9a[_0x1df38b(0xa4)](_0x21341a=>flosum_component_history_dto_1[_0x1df38b(0xb5)][_0x1df38b(0xc3)](_0x21341a))),[_0xe7b372,_0x4885de]=await Promise[_0x1df38b(0x95)]([_0x3bf85a,_0x14d4b4]);for(const _0x2cf6e4 of _0x4885de){const _0x1cd930=_0xe7b372[_0x1df38b(0xbd)](_0x2382c3=>_0x2382c3[_0x1df38b(0x9f)]===_0x2cf6e4['id']);_0x1cd930&&_0x1408f0[_0x1df38b(0xad)]({'fileType':_0x1cd930[_0x1df38b(0xbb)],'fileName':_0x2cf6e4[_0x1df38b(0xb1)],'attachmentId':_0x1cd930['Id']});}}return _0x1408f0;}async[a279_0x2f1a84(0xa6)](_0x404650){const _0x5dabb0=a279_0x2f1a84,_0x189100=await this[_0x5dabb0(0xc2)](_0x404650);this[_0x5dabb0(0x96)][_0x5dabb0(0xa3)](_0x5dabb0(0x94));const _0x4629a1=[];for(const _0x6deeb8 of _0x189100){const _0x27ff6d=await this['salesforceService'][_0x5dabb0(0x9a)](_0x6deeb8['attachmentId'],!![]);_0x4629a1[_0x5dabb0(0xad)]({'body':_0x27ff6d[_0x5dabb0(0xa8)](_0x5dabb0(0xb7)),'fileName':_0x6deeb8[_0x5dabb0(0xaf)],'fileType':_0x6deeb8[_0x5dabb0(0xb0)]}),this[_0x5dabb0(0x96)][_0x5dabb0(0xa3)](_0x5dabb0(0x9d),_0x4629a1[_0x5dabb0(0xb2)],_0x404650['length']);}return _0x4629a1;}async['run'](_0x5c9c40){const _0x388205=a279_0x2f1a84;if(!_0x5c9c40['length'])return[];const _0x12070c=await this[_0x388205(0x93)][_0x388205(0xc4)](_0x5c9c40);return _0x12070c;}}exports[a279_0x2f1a84(0x8c)]=SalesforceRetrieverService;function a279_0x3982(){const _0x4f6a77=['fromSalesforce','retrieveComponents','(((.+)+)+)+$','466136tyhfMf','SalesforceRetrieverService','GET_COMPONENT_HISTORIES_BY_IDS','join','then','__esModule','18eBxotw','get','salesforceService','Manually\x20retrieving\x20components\x20from\x20salesforce','all','logger','510885rsMIZH','constructor','172308bwirif','retrieveAttachment','search','./salesforce-query.service','Manually\x20retrieved\x20%d/%d\x20components','2364111afDWSg','ParentId','defineProperty','302998psUKIf','typedi','info','map','query','retrieveLastComponents','Logger','toString','replace','name','COMPONENTS_PER_QUERY','%parent_ids%','push','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','fileName','fileType','filename','length','857136sqLjKM','6CzsfLQ','FlosumComponentHistoryDto','default','base64','../dto/flosum-component-history.dto','COMPONENTS_PER_REQUEST','468352jFjMvn','Name','SalesforceQueryService','find','__importDefault','../../../../core','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','splice','retrieveComponentIdsFromHistoryIds'];a279_0x3982=function(){return _0x4f6a77;};return a279_0x3982();}