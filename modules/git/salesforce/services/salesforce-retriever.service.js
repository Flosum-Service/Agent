function a280_0x50da(_0x104154,_0x482973){const _0x3610e3=a280_0x1344();return a280_0x50da=function(_0x1bf354,_0x58fb88){_0x1bf354=_0x1bf354-0xf0;let _0x13442c=_0x3610e3[_0x1bf354];return _0x13442c;},a280_0x50da(_0x104154,_0x482973);}const a280_0x29da44=a280_0x50da;(function(_0x1cf9ba,_0x1bac09){const _0x1aa501=a280_0x50da,_0x532999=_0x1cf9ba();while(!![]){try{const _0x3edcf5=-parseInt(_0x1aa501(0xf2))/0x1+-parseInt(_0x1aa501(0x11b))/0x2*(-parseInt(_0x1aa501(0xf1))/0x3)+-parseInt(_0x1aa501(0x107))/0x4+parseInt(_0x1aa501(0x116))/0x5+-parseInt(_0x1aa501(0x119))/0x6+parseInt(_0x1aa501(0x106))/0x7+parseInt(_0x1aa501(0x10d))/0x8;if(_0x3edcf5===_0x1bac09)break;else _0x532999['push'](_0x532999['shift']());}catch(_0x41cdc2){_0x532999['push'](_0x532999['shift']());}}}(a280_0x1344,0xade70));const a280_0x58fb88=(function(){let _0xd4d960=!![];return function(_0x33a775,_0x3f5ab0){const _0x212395=_0xd4d960?function(){const _0x566235=a280_0x50da;if(_0x3f5ab0){const _0x4925a5=_0x3f5ab0[_0x566235(0x124)](_0x33a775,arguments);return _0x3f5ab0=null,_0x4925a5;}}:function(){};return _0xd4d960=![],_0x212395;};}()),a280_0x1bf354=a280_0x58fb88(this,function(){const _0x12081e=a280_0x50da;return a280_0x1bf354['toString']()['search'](_0x12081e(0x10e))[_0x12081e(0xfa)]()[_0x12081e(0x108)](a280_0x1bf354)['search'](_0x12081e(0x10e));});a280_0x1bf354();'use strict';var __importDefault=this&&this[a280_0x29da44(0xf4)]||function(_0x4dcfeb){return _0x4dcfeb&&_0x4dcfeb['__esModule']?_0x4dcfeb:{'default':_0x4dcfeb};};Object[a280_0x29da44(0xf0)](exports,a280_0x29da44(0x122),{'value':!![]}),exports[a280_0x29da44(0x104)]=void 0x0;const core_1=require(a280_0x29da44(0xf3)),typedi_1=__importDefault(require(a280_0x29da44(0x10a))),salesforce_query_service_1=require(a280_0x29da44(0x10f)),queries_1=require(a280_0x29da44(0x117)),flosum_component_history_dto_1=require(a280_0x29da44(0x11a));class SalesforceRetrieverService{constructor(_0x39e39a){const _0x5983c8=a280_0x29da44;this['salesforceService']=_0x39e39a,this['logger']=new core_1[(_0x5983c8(0xfd))](SalesforceRetrieverService[_0x5983c8(0xfc)]),this['COMPONENTS_PER_REQUEST']=0xbb8,this[_0x5983c8(0xf5)]=0x1f4;}async[a280_0x29da44(0xf9)](_0x56aca5){const _0x505dbd=a280_0x29da44;this['logger'][_0x505dbd(0x10c)](_0x505dbd(0x11f),_0x56aca5[_0x505dbd(0xf7)]);const _0x6fd6b6=typedi_1[_0x505dbd(0xf6)][_0x505dbd(0x101)](salesforce_query_service_1['SalesforceQueryService']),_0xc28a42=_0x56aca5['map'](_0x14a8a0=>'\x27'+_0x14a8a0+'\x27'),_0x22e306=[];while(_0xc28a42[_0x505dbd(0xf7)]){const _0x187545=_0xc28a42[_0x505dbd(0x110)](0x0,this['COMPONENTS_PER_QUERY']),_0x5e95d4=_0x6fd6b6[_0x505dbd(0xfb)](queries_1[_0x505dbd(0x118)][_0x505dbd(0x111)]('%parent_ids%',_0x187545[_0x505dbd(0x11c)]())),_0x3c6fc8=_0x6fd6b6[_0x505dbd(0xfb)](queries_1[_0x505dbd(0x105)]['replace'](_0x505dbd(0xfe),_0x187545[_0x505dbd(0x11c)]()))[_0x505dbd(0x120)](_0x244db1=>_0x244db1[_0x505dbd(0x121)](_0x43e83d=>flosum_component_history_dto_1[_0x505dbd(0x125)]['fromSalesforce'](_0x43e83d))),[_0xdfe1e6,_0x5b1d29]=await Promise[_0x505dbd(0x11d)]([_0x5e95d4,_0x3c6fc8]);for(const _0x59fab6 of _0x5b1d29){const _0xa86de0=_0xdfe1e6[_0x505dbd(0xff)](_0x5f1f01=>_0x5f1f01[_0x505dbd(0x103)]===_0x59fab6['id']);_0xa86de0&&_0x22e306[_0x505dbd(0x11e)]({'fileType':_0xa86de0['Name'],'fileName':_0x59fab6['filename'],'attachmentId':_0xa86de0['Id']});}}return _0x22e306;}async['retrieveLastComponents'](_0x58ffc8){const _0x3374e3=a280_0x29da44,_0xc4c310=await this[_0x3374e3(0xf9)](_0x58ffc8);this[_0x3374e3(0xf8)][_0x3374e3(0x10c)](_0x3374e3(0x112));const _0xb872cf=[];for(const _0x176551 of _0xc4c310){const _0x4c9710=await this[_0x3374e3(0x123)][_0x3374e3(0x100)](_0x176551[_0x3374e3(0x109)],!![]);_0xb872cf[_0x3374e3(0x11e)]({'body':_0x4c9710['toString'](_0x3374e3(0x102)),'fileName':_0x176551[_0x3374e3(0x115)],'fileType':_0x176551[_0x3374e3(0x10b)]}),this[_0x3374e3(0xf8)][_0x3374e3(0x10c)]('Manually\x20retrieved\x20%d/%d\x20components',_0xb872cf['length'],_0x58ffc8[_0x3374e3(0xf7)]);}return _0xb872cf;}async[a280_0x29da44(0x113)](_0x5bb991){const _0x30c2ce=a280_0x29da44;if(!_0x5bb991['length'])return[];const _0x112152=await this['salesforceService'][_0x30c2ce(0x114)](_0x5bb991);return _0x112152;}}exports[a280_0x29da44(0x104)]=SalesforceRetrieverService;function a280_0x1344(){const _0x228021=['map','__esModule','salesforceService','apply','FlosumComponentHistoryDto','defineProperty','12YvwADv','952803YuYsCT','../../../../core','__importDefault','COMPONENTS_PER_QUERY','default','length','logger','retrieveComponentIdsFromHistoryIds','toString','query','name','Logger','%ids%','find','retrieveAttachment','get','base64','ParentId','SalesforceRetrieverService','GET_COMPONENT_HISTORIES_BY_IDS','9748200aLLsEM','2081524enXIww','constructor','attachmentId','typedi','fileType','info','4037320zSAeMN','(((.+)+)+)+$','./salesforce-query.service','splice','replace','Manually\x20retrieving\x20components\x20from\x20salesforce','run','retrieveComponents','fileName','3101665BZXryr','../queries','GET_ATTACHMENT_BY_PARENT_IDS_QUERY','8377332SVhOxL','../dto/flosum-component-history.dto','532056gTBtmz','join','all','push','Manually\x20retrieving\x20component\x20ids\x20from\x20history\x20ids\x20(%d)','then'];a280_0x1344=function(){return _0x228021;};return a280_0x1344();}