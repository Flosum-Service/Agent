const a245_0x429ffb=a245_0x2851;(function(_0x4d2ea7,_0x77b076){const _0x12994e=a245_0x2851,_0x1784a3=_0x4d2ea7();while(!![]){try{const _0x31679b=parseInt(_0x12994e(0x10c))/0x1*(parseInt(_0x12994e(0x128))/0x2)+parseInt(_0x12994e(0x106))/0x3*(parseInt(_0x12994e(0x125))/0x4)+parseInt(_0x12994e(0x10f))/0x5*(parseInt(_0x12994e(0x11d))/0x6)+-parseInt(_0x12994e(0x130))/0x7*(-parseInt(_0x12994e(0x12b))/0x8)+parseInt(_0x12994e(0xf7))/0x9*(parseInt(_0x12994e(0x107))/0xa)+-parseInt(_0x12994e(0x103))/0xb*(parseInt(_0x12994e(0x138))/0xc)+-parseInt(_0x12994e(0xfd))/0xd;if(_0x31679b===_0x77b076)break;else _0x1784a3['push'](_0x1784a3['shift']());}catch(_0x22c6cc){_0x1784a3['push'](_0x1784a3['shift']());}}}(a245_0x1b10,0x40794));function a245_0x1b10(){const _0x78bc65=['then','toString','Logger','get','sendLog','../utils/create-request.util','search','4JEkoEC','retrieveComponents','/sobjects/Attachment/','32dOdXyg','arraybuffer','metadata','16664csqtsO','../dto/connection.dto','(((.+)+)+)+$','typedi','delete','973VonwpE','loggerId','SALESFORCE_API_VERSION','decorate','patchObject','/sobjects/','__param','/flosum_git','66912NyOzCC','./salesforce-auth.service','error','log','deleteAttachment','/body','26145AYMCOa','length','SalesforceAuthService','post','/connection','forEach','7748429TAJeTY','SalesforceService','setLoggerId','name','services/data/','delete\x20attachment\x20%s\x20from\x20salesforce','803gUHtCe','SalesforceError','namespace','1189428EPDktZ','1300RLdDUg','[message]\x20%s','patch','__esModule','object','11842nYTESL','design:paramtypes','internalLogger','7015vylasd','request','__decorate','/logger','./salesforce-logger.service','function','getOwnPropertyDescriptor','getLogger','services/apexrest','retrieve\x20components\x20\x20%d\x20from\x20salesforce','logger','__metadata','text','retrieveAttachment','60xYSXIs'];a245_0x1b10=function(){return _0x78bc65;};return a245_0x1b10();}const a245_0x4dd159=(function(){let _0x4a9656=!![];return function(_0x3e7f5d,_0x49442e){const _0x1c7f60=_0x4a9656?function(){if(_0x49442e){const _0x208e87=_0x49442e['apply'](_0x3e7f5d,arguments);return _0x49442e=null,_0x208e87;}}:function(){};return _0x4a9656=![],_0x1c7f60;};}()),a245_0x1015bc=a245_0x4dd159(this,function(){const _0x1d02fa=a245_0x2851;return a245_0x1015bc['toString']()['search']('(((.+)+)+)+$')[_0x1d02fa(0x11f)]()['constructor'](a245_0x1015bc)[_0x1d02fa(0x124)](_0x1d02fa(0x12d));});a245_0x1015bc();'use strict';var __decorate=this&&this[a245_0x429ffb(0x111)]||function(_0x3ef1a7,_0x3d1c94,_0x127e91,_0x1c7ee5){const _0x3c630f=a245_0x429ffb;var _0x472eb6=arguments[_0x3c630f(0xf8)],_0x3ad35a=_0x472eb6<0x3?_0x3d1c94:_0x1c7ee5===null?_0x1c7ee5=Object[_0x3c630f(0x115)](_0x3d1c94,_0x127e91):_0x1c7ee5,_0x3ecb76;if(typeof Reflect===_0x3c630f(0x10b)&&typeof Reflect[_0x3c630f(0x133)]==='function')_0x3ad35a=Reflect[_0x3c630f(0x133)](_0x3ef1a7,_0x3d1c94,_0x127e91,_0x1c7ee5);else{for(var _0x142171=_0x3ef1a7[_0x3c630f(0xf8)]-0x1;_0x142171>=0x0;_0x142171--)if(_0x3ecb76=_0x3ef1a7[_0x142171])_0x3ad35a=(_0x472eb6<0x3?_0x3ecb76(_0x3ad35a):_0x472eb6>0x3?_0x3ecb76(_0x3d1c94,_0x127e91,_0x3ad35a):_0x3ecb76(_0x3d1c94,_0x127e91))||_0x3ad35a;}return _0x472eb6>0x3&&_0x3ad35a&&Object['defineProperty'](_0x3d1c94,_0x127e91,_0x3ad35a),_0x3ad35a;},__metadata=this&&this[a245_0x429ffb(0x11a)]||function(_0x33162f,_0x4cdb2f){const _0x3b0df1=a245_0x429ffb;if(typeof Reflect===_0x3b0df1(0x10b)&&typeof Reflect[_0x3b0df1(0x12a)]===_0x3b0df1(0x114))return Reflect[_0x3b0df1(0x12a)](_0x33162f,_0x4cdb2f);},__param=this&&this[a245_0x429ffb(0x136)]||function(_0x3925b1,_0x1e1cc4){return function(_0x17a28a,_0x2a5288){_0x1e1cc4(_0x17a28a,_0x2a5288,_0x3925b1);};},SalesforceService_1;Object['defineProperty'](exports,a245_0x429ffb(0x10a),{'value':!![]}),exports[a245_0x429ffb(0xfe)]=void 0x0;const typedi_1=require(a245_0x429ffb(0x12e)),core_1=require('../../../../core'),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require(a245_0x429ffb(0x139)),constants_1=require('../../../../constants'),create_request_util_1=require(a245_0x429ffb(0x123)),salesforce_logger_service_1=require(a245_0x429ffb(0x113)),salesforce_error_1=require('../errors/salesforce.error'),connection_dto_1=require(a245_0x429ffb(0x12c));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x7484ae){const _0x167c48=a245_0x429ffb;this[_0x167c48(0x119)]=new core_1[(_0x167c48(0x120))](SalesforceService_1[_0x167c48(0x100)]),this[_0x167c48(0x110)]=(0x0,create_request_util_1['createSalesforceRequest'])(_0x7484ae),this[_0x167c48(0x105)]=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':_0x167c48(0x137);}[a245_0x429ffb(0xff)](_0x3cd913){const _0x3ee433=a245_0x429ffb;this['loggerId']=_0x3cd913,this[_0x3ee433(0x10e)]=new salesforce_logger_service_1['SalesforceLogger'](this);}[a245_0x429ffb(0x116)](){const _0x11d5ee=a245_0x429ffb;return this[_0x11d5ee(0x10e)];}async[a245_0x429ffb(0x126)](_0x340629){const _0xd45ad7=a245_0x429ffb;try{this[_0xd45ad7(0x119)][_0xd45ad7(0x13b)](_0xd45ad7(0x118),_0x340629[_0xd45ad7(0xf8)]);const _0x332aea=await this[_0xd45ad7(0x110)]['post'](_0xd45ad7(0x117)+this['namespace']+'/attachments',{'componentIds':_0x340629,'loggerId':this[_0xd45ad7(0x131)]})[_0xd45ad7(0x11e)](({data:_0x458760})=>_0x458760);return _0x332aea;}catch(_0x56e9ec){this['logger'][_0xd45ad7(0x13a)](_0x56e9ec);throw new salesforce_error_1[(_0xd45ad7(0x104))](_0x56e9ec);}}async[a245_0x429ffb(0x13c)](_0x5e6936){const _0x5ae41c=a245_0x429ffb;try{this[_0x5ae41c(0x119)][_0x5ae41c(0x13b)](_0x5ae41c(0x102),_0x5e6936),await this[_0x5ae41c(0x110)][_0x5ae41c(0x12f)]('services/data/'+constants_1[_0x5ae41c(0x132)]+_0x5ae41c(0x127)+_0x5e6936);}catch(_0x30d1f2){this[_0x5ae41c(0x119)][_0x5ae41c(0x13a)](_0x30d1f2);throw new salesforce_error_1[(_0x5ae41c(0x104))](_0x30d1f2);}}async[a245_0x429ffb(0x11c)](_0x1019b1,_0x36528a=![]){const _0x175a7d=a245_0x429ffb;try{this[_0x175a7d(0x119)][_0x175a7d(0x13b)]('retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x1019b1);const _0x1cae4a=await this['request'][_0x175a7d(0x121)](_0x175a7d(0x101)+constants_1[_0x175a7d(0x132)]+'/sobjects/Attachment/'+_0x1019b1+_0x175a7d(0x13d),{'responseType':_0x36528a?_0x175a7d(0x129):_0x175a7d(0x11b)})[_0x175a7d(0x11e)](({data:_0xee99d3})=>_0xee99d3);return _0x1cae4a;}catch(_0x2a96ee){this[_0x175a7d(0x119)][_0x175a7d(0x13a)](_0x2a96ee);throw new salesforce_error_1['SalesforceError'](_0x2a96ee);}}async[a245_0x429ffb(0x122)](_0x1d8ffd){const _0x3d7e3b=a245_0x429ffb;try{_0x1d8ffd[_0x3d7e3b(0xfc)](_0x35a3e8=>this[_0x3d7e3b(0x119)]['log'](_0x3d7e3b(0x108),_0x35a3e8)),await this[_0x3d7e3b(0x110)][_0x3d7e3b(0xfa)](_0x3d7e3b(0x117)+this[_0x3d7e3b(0x105)]+_0x3d7e3b(0x112),{'messages':_0x1d8ffd,'loggerId':this[_0x3d7e3b(0x131)]});}catch(_0x50e74d){this[_0x3d7e3b(0x119)][_0x3d7e3b(0x13a)](_0x50e74d);throw new internal_server_error_1['InternalServerError'](_0x50e74d);}}async['createObject'](_0x4acadf,_0x12707b){const _0xb214f4=a245_0x429ffb;try{const {data:_0x45c3cc}=await this['request'][_0xb214f4(0xfa)]('services/data/'+constants_1[_0xb214f4(0x132)]+_0xb214f4(0x135)+_0x4acadf+'/',_0x12707b);return _0x45c3cc['id'];}catch(_0x203620){throw new salesforce_error_1[(_0xb214f4(0x104))](_0x203620);}}async[a245_0x429ffb(0x134)](_0x23cbf3,_0x58c878,_0x8e0463){const _0x31706a=a245_0x429ffb;try{await this[_0x31706a(0x110)][_0x31706a(0x109)](_0x31706a(0x101)+constants_1['SALESFORCE_API_VERSION']+_0x31706a(0x135)+_0x23cbf3+'/'+_0x58c878,_0x8e0463);}catch(_0x4d6c0d){throw new salesforce_error_1[(_0x31706a(0x104))](_0x4d6c0d);}}async['fetchConnection'](_0x645250){const _0x40c005=a245_0x429ffb;try{const {data:_0x725695}=await this[_0x40c005(0x110)][_0x40c005(0x121)](_0x40c005(0x117)+this[_0x40c005(0x105)]+_0x40c005(0xfb),{'params':{'connectionId':_0x645250}});return new connection_dto_1['ConnectionDto'](_0x725695);}catch(_0x4711e6){throw new salesforce_error_1[(_0x40c005(0x104))](_0x4711e6);}}};function a245_0x2851(_0x1a4c53,_0xda0b32){const _0x412baf=a245_0x1b10();return a245_0x2851=function(_0x1015bc,_0x4dd159){_0x1015bc=_0x1015bc-0xf7;let _0x1b10e4=_0x412baf[_0x1015bc];return _0x1b10e4;},a245_0x2851(_0x1a4c53,_0xda0b32);}SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1['Inject'])()),__metadata(a245_0x429ffb(0x10d),[salesforce_auth_service_1[a245_0x429ffb(0xf9)]])],SalesforceService),exports[a245_0x429ffb(0xfe)]=SalesforceService;