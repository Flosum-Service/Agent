const a245_0xf28b01=a245_0x5dab;(function(_0x4dd561,_0x5402b8){const _0xf20886=a245_0x5dab,_0x3f4b33=_0x4dd561();while(!![]){try{const _0x2ab335=-parseInt(_0xf20886(0x1f3))/0x1+-parseInt(_0xf20886(0x1df))/0x2+parseInt(_0xf20886(0x1d4))/0x3*(parseInt(_0xf20886(0x1c5))/0x4)+-parseInt(_0xf20886(0x1ef))/0x5+parseInt(_0xf20886(0x1ba))/0x6+-parseInt(_0xf20886(0x1ee))/0x7+parseInt(_0xf20886(0x1ff))/0x8*(parseInt(_0xf20886(0x1c4))/0x9);if(_0x2ab335===_0x5402b8)break;else _0x3f4b33['push'](_0x3f4b33['shift']());}catch(_0x5d1619){_0x3f4b33['push'](_0x3f4b33['shift']());}}}(a245_0x458e,0xcb4c3));const a245_0x2e65fd=(function(){let _0x135b04=!![];return function(_0x18db70,_0x10c074){const _0x1bc33f=_0x135b04?function(){if(_0x10c074){const _0x48f71a=_0x10c074['apply'](_0x18db70,arguments);return _0x10c074=null,_0x48f71a;}}:function(){};return _0x135b04=![],_0x1bc33f;};}()),a245_0x3f9985=a245_0x2e65fd(this,function(){const _0x216b35=a245_0x5dab;return a245_0x3f9985['toString']()['search'](_0x216b35(0x1d1))['toString']()[_0x216b35(0x1cf)](a245_0x3f9985)[_0x216b35(0x1fe)](_0x216b35(0x1d1));});a245_0x3f9985();'use strict';var __decorate=this&&this[a245_0xf28b01(0x1bb)]||function(_0x409e58,_0x53ad1c,_0x20d932,_0x4c3416){const _0x2fce54=a245_0xf28b01;var _0x438296=arguments[_0x2fce54(0x1bd)],_0x45e229=_0x438296<0x3?_0x53ad1c:_0x4c3416===null?_0x4c3416=Object[_0x2fce54(0x1cc)](_0x53ad1c,_0x20d932):_0x4c3416,_0x58d03d;if(typeof Reflect===_0x2fce54(0x1c3)&&typeof Reflect[_0x2fce54(0x1f9)]===_0x2fce54(0x1d2))_0x45e229=Reflect[_0x2fce54(0x1f9)](_0x409e58,_0x53ad1c,_0x20d932,_0x4c3416);else{for(var _0x44e58a=_0x409e58[_0x2fce54(0x1bd)]-0x1;_0x44e58a>=0x0;_0x44e58a--)if(_0x58d03d=_0x409e58[_0x44e58a])_0x45e229=(_0x438296<0x3?_0x58d03d(_0x45e229):_0x438296>0x3?_0x58d03d(_0x53ad1c,_0x20d932,_0x45e229):_0x58d03d(_0x53ad1c,_0x20d932))||_0x45e229;}return _0x438296>0x3&&_0x45e229&&Object[_0x2fce54(0x1c2)](_0x53ad1c,_0x20d932,_0x45e229),_0x45e229;},__metadata=this&&this['__metadata']||function(_0x4f911f,_0x3041c2){const _0x3dac44=a245_0xf28b01;if(typeof Reflect==='object'&&typeof Reflect[_0x3dac44(0x1cd)]==='function')return Reflect['metadata'](_0x4f911f,_0x3041c2);},__param=this&&this['__param']||function(_0x53fba9,_0x56e0c4){return function(_0x4dab63,_0x747e6c){_0x56e0c4(_0x4dab63,_0x747e6c,_0x53fba9);};},SalesforceService_1;Object[a245_0xf28b01(0x1c2)](exports,a245_0xf28b01(0x1ea),{'value':!![]}),exports[a245_0xf28b01(0x1d6)]=void 0x0;const typedi_1=require(a245_0xf28b01(0x1e2)),core_1=require(a245_0xf28b01(0x1e1)),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require('./salesforce-auth.service'),constants_1=require(a245_0xf28b01(0x1c7)),create_request_util_1=require(a245_0xf28b01(0x1d7)),salesforce_logger_service_1=require(a245_0xf28b01(0x1ec)),salesforce_error_1=require(a245_0xf28b01(0x1e6)),connection_dto_1=require(a245_0xf28b01(0x1c1));function a245_0x5dab(_0x2cac6e,_0x58f617){const _0x238fec=a245_0x458e();return a245_0x5dab=function(_0x3f9985,_0x2e65fd){_0x3f9985=_0x3f9985-0x1ba;let _0x458e34=_0x238fec[_0x3f9985];return _0x458e34;},a245_0x5dab(_0x2cac6e,_0x58f617);}let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x266f38){const _0x484f02=a245_0xf28b01;this[_0x484f02(0x1da)]=new core_1[(_0x484f02(0x1c6))](SalesforceService_1['name']),this[_0x484f02(0x1f2)]=(0x0,create_request_util_1[_0x484f02(0x1ce)])(_0x266f38),this['namespace']=constants_1[_0x484f02(0x1d3)]?'':'/flosum_git';}[a245_0xf28b01(0x1c0)](_0xa55a64){const _0x33e681=a245_0xf28b01;this[_0x33e681(0x1fb)]=_0xa55a64,this[_0x33e681(0x1c9)]=new salesforce_logger_service_1[(_0x33e681(0x1e7))](this);}[a245_0xf28b01(0x1dd)](){const _0x2a1932=a245_0xf28b01;return this[_0x2a1932(0x1c9)];}async[a245_0xf28b01(0x1bf)](_0x2a3d3d){const _0x2c7de7=a245_0xf28b01;try{this[_0x2c7de7(0x1da)][_0x2c7de7(0x1db)](_0x2c7de7(0x200),_0x2a3d3d[_0x2c7de7(0x1bd)]);const _0x2f0848=await this[_0x2c7de7(0x1f2)][_0x2c7de7(0x1e0)](_0x2c7de7(0x1f8)+this[_0x2c7de7(0x1f5)]+'/attachments',{'componentIds':_0x2a3d3d,'loggerId':this[_0x2c7de7(0x1fb)]})['then'](({data:_0x5a4fd0})=>_0x5a4fd0);return _0x2f0848;}catch(_0x4cbd12){this[_0x2c7de7(0x1da)]['error'](_0x4cbd12);throw new salesforce_error_1[(_0x2c7de7(0x1dc))](_0x4cbd12);}}async['deleteAttachment'](_0x56d7a2){const _0x5c1e17=a245_0xf28b01;try{this['logger']['log'](_0x5c1e17(0x1c8),_0x56d7a2),await this[_0x5c1e17(0x1f2)][_0x5c1e17(0x1d9)](_0x5c1e17(0x1eb)+constants_1[_0x5c1e17(0x1fa)]+_0x5c1e17(0x1ed)+_0x56d7a2);}catch(_0x1ccaf8){this[_0x5c1e17(0x1da)][_0x5c1e17(0x1cb)](_0x1ccaf8);throw new salesforce_error_1[(_0x5c1e17(0x1dc))](_0x1ccaf8);}}async['retrieveAttachment'](_0x649bef,_0x3e9e6f=![]){const _0x468395=a245_0xf28b01;try{this[_0x468395(0x1da)][_0x468395(0x1db)](_0x468395(0x1e8),_0x649bef);const _0x3fc53f=await this[_0x468395(0x1f2)][_0x468395(0x1ca)](_0x468395(0x1eb)+constants_1['SALESFORCE_API_VERSION']+_0x468395(0x1ed)+_0x649bef+'/body',{'responseType':_0x3e9e6f?_0x468395(0x1be):'text'})[_0x468395(0x1f7)](({data:_0xb5bee3})=>_0xb5bee3);return _0x3fc53f;}catch(_0x1b0999){this[_0x468395(0x1da)][_0x468395(0x1cb)](_0x1b0999);throw new salesforce_error_1[(_0x468395(0x1dc))](_0x1b0999);}}async[a245_0xf28b01(0x1f1)](_0x58cc6a){const _0xc8fdbc=a245_0xf28b01;try{_0x58cc6a[_0xc8fdbc(0x1d8)](_0x2c552b=>this['logger'][_0xc8fdbc(0x1db)](_0xc8fdbc(0x1e9),_0x2c552b)),await this[_0xc8fdbc(0x1f2)][_0xc8fdbc(0x1e0)](_0xc8fdbc(0x1f8)+this[_0xc8fdbc(0x1f5)]+'/logger',{'messages':_0x58cc6a,'loggerId':this[_0xc8fdbc(0x1fb)]});}catch(_0x28675e){this[_0xc8fdbc(0x1da)]['error'](_0x28675e);throw new internal_server_error_1[(_0xc8fdbc(0x1f0))](_0x28675e);}}async[a245_0xf28b01(0x1fd)](_0x133cc7,_0x44a6dd){const _0x319769=a245_0xf28b01;try{const {data:_0x11a648}=await this[_0x319769(0x1f2)][_0x319769(0x1e0)](_0x319769(0x1eb)+constants_1[_0x319769(0x1fa)]+_0x319769(0x1f6)+_0x133cc7+'/',_0x44a6dd);return _0x11a648['id'];}catch(_0x3562b7){throw new salesforce_error_1['SalesforceError'](_0x3562b7);}}async[a245_0xf28b01(0x1fc)](_0x2bdda2,_0x47393d,_0x66d07a){const _0x52272b=a245_0xf28b01;try{await this[_0x52272b(0x1f2)][_0x52272b(0x1d0)](_0x52272b(0x1eb)+constants_1[_0x52272b(0x1fa)]+_0x52272b(0x1f6)+_0x2bdda2+'/'+_0x47393d,_0x66d07a);}catch(_0x13b731){throw new salesforce_error_1[(_0x52272b(0x1dc))](_0x13b731);}}async[a245_0xf28b01(0x1bc)](_0x5c116a){const _0x3e516f=a245_0xf28b01;try{const {data:_0x1f3d39}=await this[_0x3e516f(0x1f2)][_0x3e516f(0x1ca)](_0x3e516f(0x1f8)+this['namespace']+_0x3e516f(0x1e5),{'params':{'connectionId':_0x5c116a}});return new connection_dto_1[(_0x3e516f(0x1e3))](_0x1f3d39);}catch(_0x342766){throw new salesforce_error_1['SalesforceError'](_0x342766);}}};function a245_0x458e(){const _0xa1bb40=['internalLogger','get','error','getOwnPropertyDescriptor','metadata','createSalesforceRequest','constructor','patch','(((.+)+)+)+$','function','IGNORE_FLOSUM_GIT_NAMESPACE','335724qgbGPA','Inject','SalesforceService','../utils/create-request.util','forEach','delete','logger','log','SalesforceError','getLogger','design:paramtypes','1707298snSUxT','post','../../../../core','typedi','ConnectionDto','Service','/connection','../errors/salesforce.error','SalesforceLogger','retrieve\x20attachment\x20%s\x20from\x20salesforce','[message]\x20%s','__esModule','services/data/','./salesforce-logger.service','/sobjects/Attachment/','5599370nRExLi','5919275tahlFN','InternalServerError','sendLog','request','551343KsYbbl','SalesforceAuthService','namespace','/sobjects/','then','services/apexrest','decorate','SALESFORCE_API_VERSION','loggerId','patchObject','createObject','search','1814120TGMBwA','retrieve\x20components\x20\x20%d\x20from\x20salesforce','8365644bARtpe','__decorate','fetchConnection','length','arraybuffer','retrieveComponents','setLoggerId','../dto/connection.dto','defineProperty','object','90JlyRfi','20oFYPyC','Logger','../../../../constants','delete\x20attachment\x20%s\x20from\x20salesforce'];a245_0x458e=function(){return _0xa1bb40;};return a245_0x458e();}SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a245_0xf28b01(0x1e4)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a245_0xf28b01(0x1d5)])()),__metadata(a245_0xf28b01(0x1de),[salesforce_auth_service_1[a245_0xf28b01(0x1f4)]])],SalesforceService),exports[a245_0xf28b01(0x1d6)]=SalesforceService;