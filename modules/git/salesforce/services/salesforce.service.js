const a240_0x5e2d21=a240_0x388d;(function(_0x523db8,_0x11061a){const _0x22bb5c=a240_0x388d,_0x24b123=_0x523db8();while(!![]){try{const _0x4488e1=parseInt(_0x22bb5c(0x1a6))/0x1+parseInt(_0x22bb5c(0x192))/0x2+-parseInt(_0x22bb5c(0x176))/0x3+parseInt(_0x22bb5c(0x19a))/0x4+parseInt(_0x22bb5c(0x1a4))/0x5+-parseInt(_0x22bb5c(0x19f))/0x6+-parseInt(_0x22bb5c(0x184))/0x7*(parseInt(_0x22bb5c(0x19b))/0x8);if(_0x4488e1===_0x11061a)break;else _0x24b123['push'](_0x24b123['shift']());}catch(_0x3054b0){_0x24b123['push'](_0x24b123['shift']());}}}(a240_0x40d0,0xa21b8));const a240_0x48bc8f=(function(){let _0x12b16e=!![];return function(_0x245f8e,_0x2adaee){const _0xe9afed=_0x12b16e?function(){const _0x5f4bbb=a240_0x388d;if(_0x2adaee){const _0x4697a3=_0x2adaee[_0x5f4bbb(0x183)](_0x245f8e,arguments);return _0x2adaee=null,_0x4697a3;}}:function(){};return _0x12b16e=![],_0xe9afed;};}()),a240_0x3962f=a240_0x48bc8f(this,function(){const _0x5457d5=a240_0x388d;return a240_0x3962f[_0x5457d5(0x17c)]()['search'](_0x5457d5(0x180))['toString']()[_0x5457d5(0x1a7)](a240_0x3962f)[_0x5457d5(0x18b)]('(((.+)+)+)+$');});a240_0x3962f();'use strict';var __decorate=this&&this[a240_0x5e2d21(0x16d)]||function(_0x105bb2,_0x54756c,_0xd22be1,_0x30cb0b){const _0x356b25=a240_0x5e2d21;var _0x3bd07e=arguments['length'],_0xcbf373=_0x3bd07e<0x3?_0x54756c:_0x30cb0b===null?_0x30cb0b=Object['getOwnPropertyDescriptor'](_0x54756c,_0xd22be1):_0x30cb0b,_0x1b9720;if(typeof Reflect==='object'&&typeof Reflect[_0x356b25(0x168)]===_0x356b25(0x19d))_0xcbf373=Reflect['decorate'](_0x105bb2,_0x54756c,_0xd22be1,_0x30cb0b);else{for(var _0x16cab0=_0x105bb2[_0x356b25(0x17b)]-0x1;_0x16cab0>=0x0;_0x16cab0--)if(_0x1b9720=_0x105bb2[_0x16cab0])_0xcbf373=(_0x3bd07e<0x3?_0x1b9720(_0xcbf373):_0x3bd07e>0x3?_0x1b9720(_0x54756c,_0xd22be1,_0xcbf373):_0x1b9720(_0x54756c,_0xd22be1))||_0xcbf373;}return _0x3bd07e>0x3&&_0xcbf373&&Object[_0x356b25(0x188)](_0x54756c,_0xd22be1,_0xcbf373),_0xcbf373;},__metadata=this&&this[a240_0x5e2d21(0x1a8)]||function(_0x58de7b,_0x19d6f8){const _0x143125=a240_0x5e2d21;if(typeof Reflect===_0x143125(0x190)&&typeof Reflect[_0x143125(0x195)]==='function')return Reflect[_0x143125(0x195)](_0x58de7b,_0x19d6f8);},__param=this&&this[a240_0x5e2d21(0x199)]||function(_0x59c9aa,_0x2e8668){return function(_0x462602,_0x3b5390){_0x2e8668(_0x462602,_0x3b5390,_0x59c9aa);};},SalesforceService_1;Object[a240_0x5e2d21(0x188)](exports,'__esModule',{'value':!![]}),exports['SalesforceService']=void 0x0;const typedi_1=require(a240_0x5e2d21(0x178)),core_1=require(a240_0x5e2d21(0x1a0)),internal_server_error_1=require(a240_0x5e2d21(0x18a)),salesforce_auth_service_1=require(a240_0x5e2d21(0x16e)),constants_1=require(a240_0x5e2d21(0x1a3)),create_request_util_1=require(a240_0x5e2d21(0x17d)),salesforce_logger_service_1=require(a240_0x5e2d21(0x17a)),salesforce_error_1=require(a240_0x5e2d21(0x17f)),connection_dto_1=require('../dto/connection.dto');function a240_0x40d0(){const _0x74493f=['sendLog','../errors/salesforce.error','(((.+)+)+)+$','name','SALESFORCE_API_VERSION','apply','7051156znfESZ','IGNORE_FLOSUM_GIT_NAMESPACE','post','Logger','defineProperty','arraybuffer','../../../../core/errors/internal-server.error','search','request','InternalServerError','internalLogger','error','object','logger','2245956xlioDS','Service','deleteAttachment','metadata','fetchConnection','/logger','/sobjects/Attachment/','__param','724640iwsVfl','8tiRAIK','forEach','function','/flosum_git','150000kGTDaU','../../../../core','delete','createObject','../../../../constants','3115070TSbzZN','SalesforceError','203204rGKEJE','constructor','__metadata','namespace','decorate','patch','then','SalesforceService','ConnectionDto','__decorate','./salesforce-auth.service','get','design:paramtypes','loggerId','getLogger','services/data/','services/apexrest','log','1302168fuJiHE','/connection','typedi','/body','./salesforce-logger.service','length','toString','../utils/create-request.util'];a240_0x40d0=function(){return _0x74493f;};return a240_0x40d0();}function a240_0x388d(_0x23085f,_0x4df31c){const _0x3e984a=a240_0x40d0();return a240_0x388d=function(_0x3962f,_0x48bc8f){_0x3962f=_0x3962f-0x168;let _0x40d06a=_0x3e984a[_0x3962f];return _0x40d06a;},a240_0x388d(_0x23085f,_0x4df31c);}let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x50553b){const _0xccf8e5=a240_0x5e2d21;this[_0xccf8e5(0x191)]=new core_1[(_0xccf8e5(0x187))](SalesforceService_1[_0xccf8e5(0x181)]),this[_0xccf8e5(0x18c)]=(0x0,create_request_util_1['createSalesforceRequest'])(_0x50553b),this[_0xccf8e5(0x1a9)]=constants_1[_0xccf8e5(0x185)]?'':_0xccf8e5(0x19e);}['setLoggerId'](_0x165e5f){const _0x350a1b=a240_0x5e2d21;this[_0x350a1b(0x171)]=_0x165e5f,this[_0x350a1b(0x18e)]=new salesforce_logger_service_1['SalesforceLogger'](this);}[a240_0x5e2d21(0x172)](){const _0x395bfa=a240_0x5e2d21;return this[_0x395bfa(0x18e)];}async['retrieveComponents'](_0x19efc9){const _0x2c0074=a240_0x5e2d21;try{this[_0x2c0074(0x191)][_0x2c0074(0x175)]('retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x19efc9[_0x2c0074(0x17b)]);const _0x285fc7=await this[_0x2c0074(0x18c)]['post'](_0x2c0074(0x174)+this[_0x2c0074(0x1a9)]+'/attachments',{'componentIds':_0x19efc9,'loggerId':this['loggerId']})[_0x2c0074(0x16a)](({data:_0x3fc00e})=>_0x3fc00e);return _0x285fc7;}catch(_0x388b6a){this[_0x2c0074(0x191)][_0x2c0074(0x18f)](_0x388b6a);throw new salesforce_error_1['SalesforceError'](_0x388b6a);}}async[a240_0x5e2d21(0x194)](_0x1e0d6c){const _0x4d74e3=a240_0x5e2d21;try{this[_0x4d74e3(0x191)][_0x4d74e3(0x175)]('delete\x20attachment\x20%s\x20from\x20salesforce',_0x1e0d6c),await this[_0x4d74e3(0x18c)][_0x4d74e3(0x1a1)](_0x4d74e3(0x173)+constants_1[_0x4d74e3(0x182)]+_0x4d74e3(0x198)+_0x1e0d6c);}catch(_0x2646f6){this[_0x4d74e3(0x191)][_0x4d74e3(0x18f)](_0x2646f6);throw new salesforce_error_1['SalesforceError'](_0x2646f6);}}async['retrieveAttachment'](_0x26554c,_0x36eec6=![]){const _0x54c97b=a240_0x5e2d21;try{this[_0x54c97b(0x191)][_0x54c97b(0x175)]('retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x26554c);const _0x2ec39d=await this['request']['get']('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x54c97b(0x198)+_0x26554c+_0x54c97b(0x179),{'responseType':_0x36eec6?_0x54c97b(0x189):'text'})[_0x54c97b(0x16a)](({data:_0x7166ea})=>_0x7166ea);return _0x2ec39d;}catch(_0x3605cc){this[_0x54c97b(0x191)][_0x54c97b(0x18f)](_0x3605cc);throw new salesforce_error_1[(_0x54c97b(0x1a5))](_0x3605cc);}}async[a240_0x5e2d21(0x17e)](_0x20753d){const _0x2be887=a240_0x5e2d21;try{_0x20753d[_0x2be887(0x19c)](_0x362de0=>this[_0x2be887(0x191)][_0x2be887(0x175)]('[message]\x20%s',_0x362de0)),await this[_0x2be887(0x18c)][_0x2be887(0x186)](_0x2be887(0x174)+this['namespace']+_0x2be887(0x197),{'messages':_0x20753d,'loggerId':this[_0x2be887(0x171)]});}catch(_0x17d21c){this[_0x2be887(0x191)]['error'](_0x17d21c);throw new internal_server_error_1[(_0x2be887(0x18d))](_0x17d21c);}}async[a240_0x5e2d21(0x1a2)](_0x5d497f,_0x217bc3){const _0x3470c1=a240_0x5e2d21;try{const {data:_0x136daa}=await this[_0x3470c1(0x18c)][_0x3470c1(0x186)]('services/data/'+constants_1[_0x3470c1(0x182)]+'/sobjects/'+_0x5d497f+'/',_0x217bc3);return _0x136daa['id'];}catch(_0x34be39){throw new salesforce_error_1['SalesforceError'](_0x34be39);}}async['patchObject'](_0x138dd8,_0x56c342,_0x3ff08c){const _0x414563=a240_0x5e2d21;try{await this[_0x414563(0x18c)][_0x414563(0x169)]('services/data/'+constants_1[_0x414563(0x182)]+'/sobjects/'+_0x138dd8+'/'+_0x56c342,_0x3ff08c);}catch(_0x2e17fd){throw new salesforce_error_1['SalesforceError'](_0x2e17fd);}}async[a240_0x5e2d21(0x196)](_0x565224){const _0x562052=a240_0x5e2d21;try{const {data:_0x2d75d1}=await this[_0x562052(0x18c)][_0x562052(0x16f)](_0x562052(0x174)+this['namespace']+_0x562052(0x177),{'params':{'connectionId':_0x565224}});return new connection_dto_1[(_0x562052(0x16c))](_0x2d75d1);}catch(_0x5b7790){throw new salesforce_error_1[(_0x562052(0x1a5))](_0x5b7790);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a240_0x5e2d21(0x193)])({'transient':!![]}),__param(0x0,(0x0,typedi_1['Inject'])()),__metadata(a240_0x5e2d21(0x170),[salesforce_auth_service_1['SalesforceAuthService']])],SalesforceService),exports[a240_0x5e2d21(0x16b)]=SalesforceService;