const a240_0x2d834a=a240_0x19d2;(function(_0x88b99d,_0xfc1e87){const _0x5268e6=a240_0x19d2,_0x37d1dd=_0x88b99d();while(!![]){try{const _0x460d20=parseInt(_0x5268e6(0x101))/0x1+parseInt(_0x5268e6(0x102))/0x2*(-parseInt(_0x5268e6(0xcb))/0x3)+parseInt(_0x5268e6(0xfc))/0x4*(parseInt(_0x5268e6(0xef))/0x5)+-parseInt(_0x5268e6(0xd7))/0x6*(-parseInt(_0x5268e6(0x108))/0x7)+parseInt(_0x5268e6(0xfd))/0x8*(-parseInt(_0x5268e6(0xce))/0x9)+-parseInt(_0x5268e6(0xdc))/0xa+-parseInt(_0x5268e6(0xde))/0xb;if(_0x460d20===_0xfc1e87)break;else _0x37d1dd['push'](_0x37d1dd['shift']());}catch(_0x5ee6ee){_0x37d1dd['push'](_0x37d1dd['shift']());}}}(a240_0x2891,0x6ed1f));function a240_0x19d2(_0x3514b6,_0x3b7c61){const _0x1fb106=a240_0x2891();return a240_0x19d2=function(_0x292459,_0x1df7f1){_0x292459=_0x292459-0xc3;let _0x2891b3=_0x1fb106[_0x292459];return _0x2891b3;},a240_0x19d2(_0x3514b6,_0x3b7c61);}const a240_0x1df7f1=(function(){let _0x256857=!![];return function(_0x5d69df,_0x5f01da){const _0x175f8e=_0x256857?function(){if(_0x5f01da){const _0x3ee65e=_0x5f01da['apply'](_0x5d69df,arguments);return _0x5f01da=null,_0x3ee65e;}}:function(){};return _0x256857=![],_0x175f8e;};}()),a240_0x292459=a240_0x1df7f1(this,function(){const _0x3653d8=a240_0x19d2;return a240_0x292459[_0x3653d8(0x107)]()[_0x3653d8(0xf4)](_0x3653d8(0xc4))[_0x3653d8(0x107)]()['constructor'](a240_0x292459)['search'](_0x3653d8(0xc4));});a240_0x292459();'use strict';var __decorate=this&&this[a240_0x2d834a(0xee)]||function(_0x49e07b,_0x591dc1,_0x1ce423,_0x35d625){const _0x191000=a240_0x2d834a;var _0x38a935=arguments[_0x191000(0xff)],_0x34eaf0=_0x38a935<0x3?_0x591dc1:_0x35d625===null?_0x35d625=Object[_0x191000(0xd5)](_0x591dc1,_0x1ce423):_0x35d625,_0x11c4c3;if(typeof Reflect===_0x191000(0xcf)&&typeof Reflect[_0x191000(0xfb)]===_0x191000(0xe8))_0x34eaf0=Reflect[_0x191000(0xfb)](_0x49e07b,_0x591dc1,_0x1ce423,_0x35d625);else{for(var _0x41e201=_0x49e07b[_0x191000(0xff)]-0x1;_0x41e201>=0x0;_0x41e201--)if(_0x11c4c3=_0x49e07b[_0x41e201])_0x34eaf0=(_0x38a935<0x3?_0x11c4c3(_0x34eaf0):_0x38a935>0x3?_0x11c4c3(_0x591dc1,_0x1ce423,_0x34eaf0):_0x11c4c3(_0x591dc1,_0x1ce423))||_0x34eaf0;}return _0x38a935>0x3&&_0x34eaf0&&Object['defineProperty'](_0x591dc1,_0x1ce423,_0x34eaf0),_0x34eaf0;},__metadata=this&&this[a240_0x2d834a(0x100)]||function(_0x13ed07,_0x31eab6){const _0x45d415=a240_0x2d834a;if(typeof Reflect==='object'&&typeof Reflect[_0x45d415(0xf3)]===_0x45d415(0xe8))return Reflect[_0x45d415(0xf3)](_0x13ed07,_0x31eab6);},__param=this&&this[a240_0x2d834a(0xdf)]||function(_0x4b31a9,_0x56801e){return function(_0x56ca56,_0x492ecf){_0x56801e(_0x56ca56,_0x492ecf,_0x4b31a9);};},SalesforceService_1;Object[a240_0x2d834a(0xe7)](exports,a240_0x2d834a(0xdd),{'value':!![]}),exports[a240_0x2d834a(0xd1)]=void 0x0;const typedi_1=require(a240_0x2d834a(0xf0)),core_1=require('../../../../core'),internal_server_error_1=require(a240_0x2d834a(0x106)),salesforce_auth_service_1=require('./salesforce-auth.service'),constants_1=require(a240_0x2d834a(0xc7)),create_request_util_1=require(a240_0x2d834a(0xf5)),salesforce_logger_service_1=require(a240_0x2d834a(0xd2)),salesforce_error_1=require(a240_0x2d834a(0xca)),connection_dto_1=require('../dto/connection.dto');let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x524649){const _0x5c051c=a240_0x2d834a;this['logger']=new core_1[(_0x5c051c(0xe5))](SalesforceService_1[_0x5c051c(0xfe)]),this[_0x5c051c(0xdb)]=(0x0,create_request_util_1['createSalesforceRequest'])(_0x524649),this['namespace']=constants_1[_0x5c051c(0xc9)]?'':'/flosum_git';}['setLoggerId'](_0x755935){const _0x46572d=a240_0x2d834a;this[_0x46572d(0xe3)]=_0x755935,this[_0x46572d(0xe6)]=new salesforce_logger_service_1[(_0x46572d(0xed))](this);}[a240_0x2d834a(0xf8)](){const _0x358870=a240_0x2d834a;return this[_0x358870(0xe6)];}async['retrieveComponents'](_0x549e63){const _0x57a891=a240_0x2d834a;try{this['logger'][_0x57a891(0xf1)](_0x57a891(0xec),_0x549e63[_0x57a891(0xff)]);const _0x2068c0=await this[_0x57a891(0xdb)][_0x57a891(0xe4)](_0x57a891(0xe0)+this[_0x57a891(0xd6)]+_0x57a891(0xe2),{'componentIds':_0x549e63,'loggerId':this[_0x57a891(0xe3)]})[_0x57a891(0xc6)](({data:_0xab8e5e})=>_0xab8e5e);return _0x2068c0;}catch(_0x3d45b7){this[_0x57a891(0xd4)][_0x57a891(0xd8)](_0x3d45b7);throw new salesforce_error_1[(_0x57a891(0x105))](_0x3d45b7);}}async[a240_0x2d834a(0xc8)](_0x4bfee0){const _0x5e1278=a240_0x2d834a;try{this['logger'][_0x5e1278(0xf1)]('delete\x20attachment\x20%s\x20from\x20salesforce',_0x4bfee0),await this[_0x5e1278(0xdb)]['delete'](_0x5e1278(0xe1)+constants_1[_0x5e1278(0xc5)]+_0x5e1278(0x104)+_0x4bfee0);}catch(_0x4ead60){this[_0x5e1278(0xd4)][_0x5e1278(0xd8)](_0x4ead60);throw new salesforce_error_1[(_0x5e1278(0x105))](_0x4ead60);}}async[a240_0x2d834a(0xeb)](_0x46302d,_0x7eadfe=![]){const _0x3165a3=a240_0x2d834a;try{this[_0x3165a3(0xd4)][_0x3165a3(0xf1)]('retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x46302d);const _0x31b81f=await this['request'][_0x3165a3(0x103)](_0x3165a3(0xe1)+constants_1[_0x3165a3(0xc5)]+_0x3165a3(0x104)+_0x46302d+_0x3165a3(0xd3),{'responseType':_0x7eadfe?_0x3165a3(0xc3):'text'})[_0x3165a3(0xc6)](({data:_0x155dd1})=>_0x155dd1);return _0x31b81f;}catch(_0x824ea){this[_0x3165a3(0xd4)][_0x3165a3(0xd8)](_0x824ea);throw new salesforce_error_1[(_0x3165a3(0x105))](_0x824ea);}}async[a240_0x2d834a(0xe9)](_0x36160d){const _0x400f87=a240_0x2d834a;try{_0x36160d[_0x400f87(0xd0)](_0x5937ea=>this[_0x400f87(0xd4)][_0x400f87(0xf1)](_0x400f87(0xf6),_0x5937ea)),await this[_0x400f87(0xdb)][_0x400f87(0xe4)](_0x400f87(0xe0)+this[_0x400f87(0xd6)]+'/logger',{'messages':_0x36160d,'loggerId':this['loggerId']});}catch(_0x5d09b7){this['logger']['error'](_0x5d09b7);throw new internal_server_error_1[(_0x400f87(0xcc))](_0x5d09b7);}}async[a240_0x2d834a(0xfa)](_0x53b878,_0x902f0a){const _0x272f19=a240_0x2d834a;try{const {data:_0x3e29bb}=await this[_0x272f19(0xdb)][_0x272f19(0xe4)](_0x272f19(0xe1)+constants_1[_0x272f19(0xc5)]+'/sobjects/'+_0x53b878+'/',_0x902f0a);return _0x3e29bb['id'];}catch(_0x39d0e6){throw new salesforce_error_1[(_0x272f19(0x105))](_0x39d0e6);}}async['patchObject'](_0x3d7f71,_0x35fdfb,_0x147fd1){const _0x133e27=a240_0x2d834a;try{await this[_0x133e27(0xdb)][_0x133e27(0xda)](_0x133e27(0xe1)+constants_1[_0x133e27(0xc5)]+_0x133e27(0xea)+_0x3d7f71+'/'+_0x35fdfb,_0x147fd1);}catch(_0x42fc63){throw new salesforce_error_1[(_0x133e27(0x105))](_0x42fc63);}}async['fetchConnection'](_0xe27c64){const _0x642cc3=a240_0x2d834a;try{const {data:_0x4bffd9}=await this[_0x642cc3(0xdb)][_0x642cc3(0x103)]('services/apexrest'+this[_0x642cc3(0xd6)]+_0x642cc3(0xf2),{'params':{'connectionId':_0xe27c64}});return new connection_dto_1[(_0x642cc3(0xd9))](_0x4bffd9);}catch(_0x52f412){throw new salesforce_error_1[(_0x642cc3(0x105))](_0x52f412);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a240_0x2d834a(0xf9)])()),__metadata(a240_0x2d834a(0xf7),[salesforce_auth_service_1[a240_0x2d834a(0xcd)]])],SalesforceService),exports[a240_0x2d834a(0xd1)]=SalesforceService;function a240_0x2891(){const _0x53e2eb=['__param','services/apexrest','services/data/','/attachments','loggerId','post','Logger','internalLogger','defineProperty','function','sendLog','/sobjects/','retrieveAttachment','retrieve\x20components\x20\x20%d\x20from\x20salesforce','SalesforceLogger','__decorate','655jAkrtS','typedi','log','/connection','metadata','search','../utils/create-request.util','[message]\x20%s','design:paramtypes','getLogger','Inject','createObject','decorate','14276iSxyne','8TZKAwx','name','length','__metadata','459806nWBbUD','462536UVUxog','get','/sobjects/Attachment/','SalesforceError','../../../../core/errors/internal-server.error','toString','146559BrgbWe','arraybuffer','(((.+)+)+)+$','SALESFORCE_API_VERSION','then','../../../../constants','deleteAttachment','IGNORE_FLOSUM_GIT_NAMESPACE','../errors/salesforce.error','3mjNdwR','InternalServerError','SalesforceAuthService','2397384zSogXl','object','forEach','SalesforceService','./salesforce-logger.service','/body','logger','getOwnPropertyDescriptor','namespace','258VchuBV','error','ConnectionDto','patch','request','8215980DvmfnZ','__esModule','599225UeDmOk'];a240_0x2891=function(){return _0x53e2eb;};return a240_0x2891();}