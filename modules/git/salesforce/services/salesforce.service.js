const a282_0xe0a28=a282_0x2670;(function(_0x5d1e66,_0x146bd1){const _0x5ad43d=a282_0x2670,_0x3cf016=_0x5d1e66();while(!![]){try{const _0x59129b=-parseInt(_0x5ad43d(0x106))/0x1*(parseInt(_0x5ad43d(0x11a))/0x2)+-parseInt(_0x5ad43d(0xf8))/0x3*(parseInt(_0x5ad43d(0xfb))/0x4)+-parseInt(_0x5ad43d(0x12d))/0x5*(parseInt(_0x5ad43d(0x128))/0x6)+parseInt(_0x5ad43d(0x101))/0x7+-parseInt(_0x5ad43d(0x11b))/0x8+parseInt(_0x5ad43d(0x11c))/0x9+-parseInt(_0x5ad43d(0x119))/0xa*(-parseInt(_0x5ad43d(0x10f))/0xb);if(_0x59129b===_0x146bd1)break;else _0x3cf016['push'](_0x3cf016['shift']());}catch(_0xa736b9){_0x3cf016['push'](_0x3cf016['shift']());}}}(a282_0x5169,0xd09b2));const a282_0x5de9df=(function(){let _0x2f3a7a=!![];return function(_0x4c89be,_0x2429c2){const _0x12b00b=_0x2f3a7a?function(){const _0x5eea1d=a282_0x2670;if(_0x2429c2){const _0x55fc75=_0x2429c2[_0x5eea1d(0xf7)](_0x4c89be,arguments);return _0x2429c2=null,_0x55fc75;}}:function(){};return _0x2f3a7a=![],_0x12b00b;};}()),a282_0x30d9db=a282_0x5de9df(this,function(){const _0x2d1cc1=a282_0x2670;return a282_0x30d9db[_0x2d1cc1(0x10a)]()[_0x2d1cc1(0x115)](_0x2d1cc1(0x133))[_0x2d1cc1(0x10a)]()[_0x2d1cc1(0x105)](a282_0x30d9db)[_0x2d1cc1(0x115)](_0x2d1cc1(0x133));});a282_0x30d9db();function a282_0x2670(_0x5f1514,_0x5b12b5){const _0x876aba=a282_0x5169();return a282_0x2670=function(_0x30d9db,_0x5de9df){_0x30d9db=_0x30d9db-0xf5;let _0x51692b=_0x876aba[_0x30d9db];return _0x51692b;},a282_0x2670(_0x5f1514,_0x5b12b5);}'use strict';function a282_0x5169(){const _0x2648ff=['createSalesforceRequest','388vlOSxG','SALESFORCE_API_VERSION','services/apexrest','services/data/','ConnectionDto','name','6298663HpzcCp','forEach','Logger','logger','constructor','4RdFCCE','../../../../core','loggerId','./salesforce-auth.service','toString','retrieveAttachment','get','./salesforce-logger.service','/body','21271591ulcbUB','../dto/connection.dto','Inject','error','/sobjects/','object','search','__decorate','internalLogger','getOwnPropertyDescriptor','20dlTaks','527704WYknFt','4284864Ywyonu','3574260oIlQvk','/sobjects/Attachment/','length','Service','[message]\x20%s','defineProperty','then','/connection','design:paramtypes','retrieve','SalesforceAuthService','__param','516MxGVQz','../../../../constants','namespace','../errors/salesforce.error','metadata','92265hTQGMl','/logger','__metadata','setLoggerId','typedi','SalesforceError','(((.+)+)+)+$','deleteAttachment','post','decorate','request','SalesforceService','Retrieve\x20attachment\x20%s\x20from\x20salesforce','IGNORE_FLOSUM_GIT_NAMESPACE','function','apply','35013hhDnqf','fetchConnection'];a282_0x5169=function(){return _0x2648ff;};return a282_0x5169();}var __decorate=this&&this[a282_0xe0a28(0x116)]||function(_0x33c66a,_0x449639,_0x2070e4,_0x26b693){const _0x23d5ae=a282_0xe0a28;var _0x4cd87e=arguments['length'],_0x2ef0a3=_0x4cd87e<0x3?_0x449639:_0x26b693===null?_0x26b693=Object[_0x23d5ae(0x118)](_0x449639,_0x2070e4):_0x26b693,_0x17deff;if(typeof Reflect===_0x23d5ae(0x114)&&typeof Reflect['decorate']===_0x23d5ae(0xf6))_0x2ef0a3=Reflect[_0x23d5ae(0x136)](_0x33c66a,_0x449639,_0x2070e4,_0x26b693);else{for(var _0x14c9fb=_0x33c66a[_0x23d5ae(0x11e)]-0x1;_0x14c9fb>=0x0;_0x14c9fb--)if(_0x17deff=_0x33c66a[_0x14c9fb])_0x2ef0a3=(_0x4cd87e<0x3?_0x17deff(_0x2ef0a3):_0x4cd87e>0x3?_0x17deff(_0x449639,_0x2070e4,_0x2ef0a3):_0x17deff(_0x449639,_0x2070e4))||_0x2ef0a3;}return _0x4cd87e>0x3&&_0x2ef0a3&&Object[_0x23d5ae(0x121)](_0x449639,_0x2070e4,_0x2ef0a3),_0x2ef0a3;},__metadata=this&&this[a282_0xe0a28(0x12f)]||function(_0x1db7e2,_0x2147ce){const _0x8967bb=a282_0xe0a28;if(typeof Reflect===_0x8967bb(0x114)&&typeof Reflect[_0x8967bb(0x12c)]===_0x8967bb(0xf6))return Reflect[_0x8967bb(0x12c)](_0x1db7e2,_0x2147ce);},__param=this&&this[a282_0xe0a28(0x127)]||function(_0x423826,_0x288fd2){return function(_0x115a87,_0x424774){_0x288fd2(_0x115a87,_0x424774,_0x423826);};},SalesforceService_1;Object[a282_0xe0a28(0x121)](exports,'__esModule',{'value':!![]}),exports[a282_0xe0a28(0x138)]=void 0x0;const typedi_1=require(a282_0xe0a28(0x131)),core_1=require(a282_0xe0a28(0x107)),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require(a282_0xe0a28(0x109)),constants_1=require(a282_0xe0a28(0x129)),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require(a282_0xe0a28(0x10d)),salesforce_error_1=require(a282_0xe0a28(0x12b)),connection_dto_1=require(a282_0xe0a28(0x110)),bulk_components_retriever_1=require('../classes/bulk-components-retriever');let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x58a302){const _0x361c35=a282_0xe0a28;this['logger']=new core_1[(_0x361c35(0x103))](SalesforceService_1[_0x361c35(0x100)]),this[_0x361c35(0x137)]=(0x0,create_request_util_1[_0x361c35(0xfa)])(_0x58a302),this['namespace']=constants_1[_0x361c35(0xf5)]?'':'/flosum_git';}[a282_0xe0a28(0x130)](_0x24b55d){const _0x52f5df=a282_0xe0a28;this[_0x52f5df(0x108)]=_0x24b55d,this[_0x52f5df(0x117)]=new salesforce_logger_service_1['SalesforceLogger'](this);}['getLogger'](){const _0x185aa0=a282_0xe0a28;return this[_0x185aa0(0x117)];}async['retrieveComponents'](_0x42bf26){const _0x2d4c5d=a282_0xe0a28;try{this['logger']['log']('Retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x42bf26['length']);const _0x971f60=new bulk_components_retriever_1['BulkComponentsRetriever']({'request':this[_0x2d4c5d(0x137)],'ids':_0x42bf26}),_0x254ac2=await _0x971f60[_0x2d4c5d(0x125)]();return _0x254ac2;}catch(_0x307025){this['logger'][_0x2d4c5d(0x112)](_0x307025);throw new salesforce_error_1[(_0x2d4c5d(0x132))](_0x307025);}}async[a282_0xe0a28(0x134)](_0x7e81ef){const _0x257ae7=a282_0xe0a28;try{this[_0x257ae7(0x104)]['log']('Delete\x20attachment\x20%s\x20from\x20salesforce',_0x7e81ef),await this[_0x257ae7(0x137)]['delete']('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x257ae7(0x11d)+_0x7e81ef);}catch(_0x3bc836){this[_0x257ae7(0x104)][_0x257ae7(0x112)](_0x3bc836);throw new salesforce_error_1[(_0x257ae7(0x132))](_0x3bc836);}}async[a282_0xe0a28(0x10b)](_0x57caa7,_0x27b77c=![]){const _0x23460e=a282_0xe0a28;try{this[_0x23460e(0x104)]['log'](_0x23460e(0x139),_0x57caa7);const _0x107876=await this[_0x23460e(0x137)][_0x23460e(0x10c)]('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x23460e(0x11d)+_0x57caa7+_0x23460e(0x10e),{'responseType':_0x27b77c?'arraybuffer':'text'})[_0x23460e(0x122)](({data:_0x3116c6})=>_0x3116c6);return _0x107876;}catch(_0x4f94d4){this[_0x23460e(0x104)][_0x23460e(0x112)](_0x4f94d4);throw new salesforce_error_1[(_0x23460e(0x132))](_0x4f94d4);}}async['sendLog'](_0x3a37fe){const _0x148aa4=a282_0xe0a28;try{_0x3a37fe[_0x148aa4(0x102)](_0xd21566=>this[_0x148aa4(0x104)]['log'](_0x148aa4(0x120),_0xd21566)),await this['request']['post'](_0x148aa4(0xfd)+this[_0x148aa4(0x12a)]+_0x148aa4(0x12e),{'messages':_0x3a37fe,'loggerId':this[_0x148aa4(0x108)]});}catch(_0x551cc9){this[_0x148aa4(0x104)][_0x148aa4(0x112)](_0x551cc9);throw new internal_server_error_1['InternalServerError'](_0x551cc9);}}async['createObject'](_0x38465e,_0x513a26){const _0x1c80f2=a282_0xe0a28;try{const {data:_0x202c42}=await this[_0x1c80f2(0x137)][_0x1c80f2(0x135)](_0x1c80f2(0xfe)+constants_1[_0x1c80f2(0xfc)]+_0x1c80f2(0x113)+_0x38465e+'/',_0x513a26);return _0x202c42['id'];}catch(_0x4def86){throw new salesforce_error_1[(_0x1c80f2(0x132))](_0x4def86);}}async['patchObject'](_0x1808a2,_0x54de3c,_0x3ceb8f){const _0x4dd161=a282_0xe0a28;try{await this[_0x4dd161(0x137)]['patch'](_0x4dd161(0xfe)+constants_1[_0x4dd161(0xfc)]+_0x4dd161(0x113)+_0x1808a2+'/'+_0x54de3c,_0x3ceb8f);}catch(_0x3f46f5){throw new salesforce_error_1[(_0x4dd161(0x132))](_0x3f46f5);}}async[a282_0xe0a28(0xf9)](_0x56fe72){const _0x52de1b=a282_0xe0a28;try{const {data:_0x1f1cab}=await this['request']['get'](_0x52de1b(0xfd)+this[_0x52de1b(0x12a)]+_0x52de1b(0x123),{'params':{'connectionId':_0x56fe72}});return new connection_dto_1[(_0x52de1b(0xff))](_0x1f1cab);}catch(_0x4be97f){throw new salesforce_error_1[(_0x52de1b(0x132))](_0x4be97f);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a282_0xe0a28(0x11f)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a282_0xe0a28(0x111)])()),__metadata(a282_0xe0a28(0x124),[salesforce_auth_service_1[a282_0xe0a28(0x126)]])],SalesforceService),exports['SalesforceService']=SalesforceService;