const a239_0x462d22=a239_0x40dd;function a239_0x38aa(){const _0x354016=['forEach','/sobjects/','constructor','724460NCuYeV','delete','retrieveAttachment','__decorate','280880JbTBqk','__param','error','33wWnbFm','get','patch','/flosum_git','SalesforceAuthService','post','arraybuffer','/body','services/data/','../errors/salesforce.error','function','(((.+)+)+)+$','../../../../core/errors/internal-server.error','Inject','request','defineProperty','log','getLogger','88sqXbEu','apply','6981wQsNUh','./salesforce-auth.service','../utils/create-request.util','createObject','metadata','464282Sanpsv','InternalServerError','/logger','../dto/connection.dto','sendLog','then','text','SalesforceError','ConnectionDto','toString','internalLogger','[message]\x20%s','/attachments','decorate','search','fetchConnection','3515480ETfOgV','deleteAttachment','1028940uyYmSJ','retrieve\x20components\x20\x20%d\x20from\x20salesforce','__metadata','length','/connection','176vFzYMu','6088950OZNSve','/sobjects/Attachment/','object','loggerId','logger','SALESFORCE_API_VERSION','setLoggerId','services/apexrest','SalesforceService','createSalesforceRequest','SalesforceLogger','patchObject'];a239_0x38aa=function(){return _0x354016;};return a239_0x38aa();}(function(_0x27b01f,_0x44d66f){const _0x2efdf7=a239_0x40dd,_0xf839c0=_0x27b01f();while(!![]){try{const _0x529a37=parseInt(_0x2efdf7(0x1ba))/0x1*(parseInt(_0x2efdf7(0x18f))/0x2)+parseInt(_0x2efdf7(0x1a6))/0x3*(parseInt(_0x2efdf7(0x1a3))/0x4)+-parseInt(_0x2efdf7(0x1cf))/0x5+-parseInt(_0x2efdf7(0x1d1))/0x6+-parseInt(_0x2efdf7(0x1bf))/0x7*(-parseInt(_0x2efdf7(0x1b8))/0x8)+-parseInt(_0x2efdf7(0x190))/0x9+-parseInt(_0x2efdf7(0x19f))/0xa;if(_0x529a37===_0x44d66f)break;else _0xf839c0['push'](_0xf839c0['shift']());}catch(_0x423dbf){_0xf839c0['push'](_0xf839c0['shift']());}}}(a239_0x38aa,0x784d0));const a239_0x358306=(function(){let _0x43ed86=!![];return function(_0x3431b3,_0x11e2f1){const _0x1505ba=_0x43ed86?function(){const _0x41aa51=a239_0x40dd;if(_0x11e2f1){const _0x6b319c=_0x11e2f1[_0x41aa51(0x1b9)](_0x3431b3,arguments);return _0x11e2f1=null,_0x6b319c;}}:function(){};return _0x43ed86=![],_0x1505ba;};}()),a239_0xb4dfc0=a239_0x358306(this,function(){const _0x287d0a=a239_0x40dd;return a239_0xb4dfc0[_0x287d0a(0x1c8)]()[_0x287d0a(0x1cd)](_0x287d0a(0x1b1))['toString']()[_0x287d0a(0x19e)](a239_0xb4dfc0)[_0x287d0a(0x1cd)]('(((.+)+)+)+$');});a239_0xb4dfc0();'use strict';var __decorate=this&&this[a239_0x462d22(0x1a2)]||function(_0x21773d,_0x571afd,_0x347cb0,_0x41bd6c){const _0x38aa61=a239_0x462d22;var _0x29b0db=arguments[_0x38aa61(0x18d)],_0x5b74a1=_0x29b0db<0x3?_0x571afd:_0x41bd6c===null?_0x41bd6c=Object['getOwnPropertyDescriptor'](_0x571afd,_0x347cb0):_0x41bd6c,_0xd6c4e4;if(typeof Reflect===_0x38aa61(0x192)&&typeof Reflect[_0x38aa61(0x1cc)]===_0x38aa61(0x1b0))_0x5b74a1=Reflect[_0x38aa61(0x1cc)](_0x21773d,_0x571afd,_0x347cb0,_0x41bd6c);else{for(var _0x44640d=_0x21773d[_0x38aa61(0x18d)]-0x1;_0x44640d>=0x0;_0x44640d--)if(_0xd6c4e4=_0x21773d[_0x44640d])_0x5b74a1=(_0x29b0db<0x3?_0xd6c4e4(_0x5b74a1):_0x29b0db>0x3?_0xd6c4e4(_0x571afd,_0x347cb0,_0x5b74a1):_0xd6c4e4(_0x571afd,_0x347cb0))||_0x5b74a1;}return _0x29b0db>0x3&&_0x5b74a1&&Object[_0x38aa61(0x1b5)](_0x571afd,_0x347cb0,_0x5b74a1),_0x5b74a1;},__metadata=this&&this[a239_0x462d22(0x18c)]||function(_0x4a96a3,_0x2eed57){const _0x5b77aa=a239_0x462d22;if(typeof Reflect==='object'&&typeof Reflect[_0x5b77aa(0x1be)]===_0x5b77aa(0x1b0))return Reflect['metadata'](_0x4a96a3,_0x2eed57);},__param=this&&this[a239_0x462d22(0x1a4)]||function(_0x4ac8c9,_0x346f42){return function(_0x2d59f2,_0x1a1c85){_0x346f42(_0x2d59f2,_0x1a1c85,_0x4ac8c9);};},SalesforceService_1;Object[a239_0x462d22(0x1b5)](exports,'__esModule',{'value':!![]}),exports[a239_0x462d22(0x198)]=void 0x0;const typedi_1=require('typedi'),core_1=require('../../../../core'),internal_server_error_1=require(a239_0x462d22(0x1b2)),salesforce_auth_service_1=require(a239_0x462d22(0x1bb)),constants_1=require('../../../../constants'),create_request_util_1=require(a239_0x462d22(0x1bc)),salesforce_logger_service_1=require('./salesforce-logger.service'),salesforce_error_1=require(a239_0x462d22(0x1af)),connection_dto_1=require(a239_0x462d22(0x1c2));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x826cfc){const _0x5600cc=a239_0x462d22;this['logger']=new core_1['Logger'](SalesforceService_1['name']),this[_0x5600cc(0x1b4)]=(0x0,create_request_util_1[_0x5600cc(0x199)])(_0x826cfc),this['namespace']=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':_0x5600cc(0x1a9);}[a239_0x462d22(0x196)](_0x5f20d5){const _0x25b58e=a239_0x462d22;this['loggerId']=_0x5f20d5,this[_0x25b58e(0x1c9)]=new salesforce_logger_service_1[(_0x25b58e(0x19a))](this);}[a239_0x462d22(0x1b7)](){return this['internalLogger'];}async['retrieveComponents'](_0x3dd8b4){const _0x45894e=a239_0x462d22;try{this[_0x45894e(0x194)][_0x45894e(0x1b6)](_0x45894e(0x1d2),_0x3dd8b4[_0x45894e(0x18d)]);const _0x14e690=await this[_0x45894e(0x1b4)][_0x45894e(0x1ab)](_0x45894e(0x197)+this['namespace']+_0x45894e(0x1cb),{'componentIds':_0x3dd8b4,'loggerId':this[_0x45894e(0x193)]})[_0x45894e(0x1c4)](({data:_0x4ca906})=>_0x4ca906);return _0x14e690;}catch(_0x52e1cf){this['logger'][_0x45894e(0x1a5)](_0x52e1cf);throw new salesforce_error_1[(_0x45894e(0x1c6))](_0x52e1cf);}}async[a239_0x462d22(0x1d0)](_0x602024){const _0x2d6950=a239_0x462d22;try{this['logger'][_0x2d6950(0x1b6)]('delete\x20attachment\x20%s\x20from\x20salesforce',_0x602024),await this['request'][_0x2d6950(0x1a0)](_0x2d6950(0x1ae)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment/'+_0x602024);}catch(_0x55797d){this[_0x2d6950(0x194)]['error'](_0x55797d);throw new salesforce_error_1['SalesforceError'](_0x55797d);}}async[a239_0x462d22(0x1a1)](_0x24a2c5,_0x346ee7=![]){const _0x19f31d=a239_0x462d22;try{this[_0x19f31d(0x194)][_0x19f31d(0x1b6)]('retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x24a2c5);const _0x1bea73=await this['request'][_0x19f31d(0x1a7)](_0x19f31d(0x1ae)+constants_1[_0x19f31d(0x195)]+_0x19f31d(0x191)+_0x24a2c5+_0x19f31d(0x1ad),{'responseType':_0x346ee7?_0x19f31d(0x1ac):_0x19f31d(0x1c5)})[_0x19f31d(0x1c4)](({data:_0x50887b})=>_0x50887b);return _0x1bea73;}catch(_0x16d085){this[_0x19f31d(0x194)]['error'](_0x16d085);throw new salesforce_error_1[(_0x19f31d(0x1c6))](_0x16d085);}}async[a239_0x462d22(0x1c3)](_0x52cd7e){const _0x2c4a68=a239_0x462d22;try{_0x52cd7e[_0x2c4a68(0x19c)](_0xf6466a=>this[_0x2c4a68(0x194)][_0x2c4a68(0x1b6)](_0x2c4a68(0x1ca),_0xf6466a)),await this[_0x2c4a68(0x1b4)][_0x2c4a68(0x1ab)]('services/apexrest'+this['namespace']+_0x2c4a68(0x1c1),{'messages':_0x52cd7e,'loggerId':this['loggerId']});}catch(_0x541e9c){this[_0x2c4a68(0x194)][_0x2c4a68(0x1a5)](_0x541e9c);throw new internal_server_error_1[(_0x2c4a68(0x1c0))](_0x541e9c);}}async[a239_0x462d22(0x1bd)](_0xe4e559,_0x3b264a){const _0x403e04=a239_0x462d22;try{const {data:_0x567774}=await this[_0x403e04(0x1b4)]['post']('services/data/'+constants_1['SALESFORCE_API_VERSION']+'/sobjects/'+_0xe4e559+'/',_0x3b264a);return _0x567774['id'];}catch(_0x35632e){throw new salesforce_error_1[(_0x403e04(0x1c6))](_0x35632e);}}async[a239_0x462d22(0x19b)](_0x328608,_0xf37523,_0x4589c8){const _0x55da95=a239_0x462d22;try{await this[_0x55da95(0x1b4)][_0x55da95(0x1a8)](_0x55da95(0x1ae)+constants_1[_0x55da95(0x195)]+_0x55da95(0x19d)+_0x328608+'/'+_0xf37523,_0x4589c8);}catch(_0x407225){throw new salesforce_error_1[(_0x55da95(0x1c6))](_0x407225);}}async[a239_0x462d22(0x1ce)](_0x24b5be){const _0x1104e3=a239_0x462d22;try{const {data:_0x1ca9bd}=await this[_0x1104e3(0x1b4)][_0x1104e3(0x1a7)](_0x1104e3(0x197)+this['namespace']+_0x1104e3(0x18e),{'params':{'connectionId':_0x24b5be}});return new connection_dto_1[(_0x1104e3(0x1c7))](_0x1ca9bd);}catch(_0x505217){throw new salesforce_error_1[(_0x1104e3(0x1c6))](_0x505217);}}};function a239_0x40dd(_0xb8120c,_0x31f3ea){const _0x339230=a239_0x38aa();return a239_0x40dd=function(_0xb4dfc0,_0x358306){_0xb4dfc0=_0xb4dfc0-0x18c;let _0x38aad2=_0x339230[_0xb4dfc0];return _0x38aad2;},a239_0x40dd(_0xb8120c,_0x31f3ea);}SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a239_0x462d22(0x1b3)])()),__metadata('design:paramtypes',[salesforce_auth_service_1[a239_0x462d22(0x1aa)]])],SalesforceService),exports[a239_0x462d22(0x198)]=SalesforceService;