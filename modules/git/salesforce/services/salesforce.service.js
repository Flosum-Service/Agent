const a272_0x7bf7cc=a272_0x5cd1;(function(_0x22ce43,_0x179596){const _0x5dca5b=a272_0x5cd1,_0x5f2276=_0x22ce43();while(!![]){try{const _0x3014eb=-parseInt(_0x5dca5b(0x1c2))/0x1*(-parseInt(_0x5dca5b(0x1c7))/0x2)+-parseInt(_0x5dca5b(0x1f1))/0x3+-parseInt(_0x5dca5b(0x1dd))/0x4+-parseInt(_0x5dca5b(0x1e9))/0x5*(parseInt(_0x5dca5b(0x1b8))/0x6)+parseInt(_0x5dca5b(0x1cf))/0x7*(-parseInt(_0x5dca5b(0x1b6))/0x8)+-parseInt(_0x5dca5b(0x1c0))/0x9*(parseInt(_0x5dca5b(0x1ef))/0xa)+-parseInt(_0x5dca5b(0x1c3))/0xb*(-parseInt(_0x5dca5b(0x1f3))/0xc);if(_0x3014eb===_0x179596)break;else _0x5f2276['push'](_0x5f2276['shift']());}catch(_0x3cc82b){_0x5f2276['push'](_0x5f2276['shift']());}}}(a272_0x4779,0xa3897));const a272_0x48fb1a=(function(){let _0x366d71=!![];return function(_0x2448ae,_0x485d88){const _0x25c39d=_0x366d71?function(){const _0x4924eb=a272_0x5cd1;if(_0x485d88){const _0x1216d4=_0x485d88[_0x4924eb(0x1c5)](_0x2448ae,arguments);return _0x485d88=null,_0x1216d4;}}:function(){};return _0x366d71=![],_0x25c39d;};}()),a272_0x38ba87=a272_0x48fb1a(this,function(){const _0x319639=a272_0x5cd1;return a272_0x38ba87[_0x319639(0x1c9)]()[_0x319639(0x1e1)](_0x319639(0x1fa))[_0x319639(0x1c9)]()[_0x319639(0x1e6)](a272_0x38ba87)[_0x319639(0x1e1)](_0x319639(0x1fa));});a272_0x38ba87();function a272_0x5cd1(_0x146586,_0x57955f){const _0x13f2ee=a272_0x4779();return a272_0x5cd1=function(_0x38ba87,_0x48fb1a){_0x38ba87=_0x38ba87-0x1b4;let _0x477939=_0x13f2ee[_0x38ba87];return _0x477939;},a272_0x5cd1(_0x146586,_0x57955f);}'use strict';var __decorate=this&&this[a272_0x7bf7cc(0x1d0)]||function(_0xcc0517,_0x5d01db,_0x53c182,_0x3f1b5f){const _0x538423=a272_0x7bf7cc;var _0x4fb0d0=arguments[_0x538423(0x1d2)],_0x1d2d44=_0x4fb0d0<0x3?_0x5d01db:_0x3f1b5f===null?_0x3f1b5f=Object[_0x538423(0x1bf)](_0x5d01db,_0x53c182):_0x3f1b5f,_0x26d7d6;if(typeof Reflect===_0x538423(0x1de)&&typeof Reflect[_0x538423(0x1df)]===_0x538423(0x1d9))_0x1d2d44=Reflect[_0x538423(0x1df)](_0xcc0517,_0x5d01db,_0x53c182,_0x3f1b5f);else{for(var _0x5e6cda=_0xcc0517[_0x538423(0x1d2)]-0x1;_0x5e6cda>=0x0;_0x5e6cda--)if(_0x26d7d6=_0xcc0517[_0x5e6cda])_0x1d2d44=(_0x4fb0d0<0x3?_0x26d7d6(_0x1d2d44):_0x4fb0d0>0x3?_0x26d7d6(_0x5d01db,_0x53c182,_0x1d2d44):_0x26d7d6(_0x5d01db,_0x53c182))||_0x1d2d44;}return _0x4fb0d0>0x3&&_0x1d2d44&&Object[_0x538423(0x1f7)](_0x5d01db,_0x53c182,_0x1d2d44),_0x1d2d44;},__metadata=this&&this[a272_0x7bf7cc(0x1d8)]||function(_0xd15700,_0x213f53){const _0x421962=a272_0x7bf7cc;if(typeof Reflect===_0x421962(0x1de)&&typeof Reflect['metadata']==='function')return Reflect[_0x421962(0x1ee)](_0xd15700,_0x213f53);},__param=this&&this[a272_0x7bf7cc(0x1bd)]||function(_0xa8557d,_0x3082b8){return function(_0x43de56,_0x3f81ef){_0x3082b8(_0x43de56,_0x3f81ef,_0xa8557d);};},SalesforceService_1;function a272_0x4779(){const _0x12ce83=['120272DtmKdw','services/apexrest','667566zwrmLs','get','/sobjects/','../classes/bulk-components-retriever','../../../../core','__param','internalLogger','getOwnPropertyDescriptor','17217uiNUBc','Inject','715777QBAXAv','3733103LosnGq','/sobjects/Attachment/','apply','../errors/salesforce.error','2dUSUWY','retrieveComponents','toString','text','sendLog','patch','request','delete','392qJOWWu','__decorate','error','length','then','logger','SalesforceAuthService','[message]\x20%s','./salesforce-auth.service','__metadata','function','post','SalesforceError','createObject','3702768nQkqiz','object','decorate','SALESFORCE_API_VERSION','search','SalesforceService','fetchConnection','SalesforceLogger','namespace','constructor','../dto/connection.dto','ConnectionDto','45SBWrjn','log','patchObject','Retrieve\x20attachment\x20%s\x20from\x20salesforce','BulkComponentsRetriever','metadata','4130lLJJgG','__esModule','3714414lcwGEI','../../../../core/errors/internal-server.error','168cCbJTp','../utils/create-request.util','name','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','defineProperty','/body','retrieveAttachment','(((.+)+)+)+$','services/data/','design:paramtypes','retrieve','loggerId','IGNORE_FLOSUM_GIT_NAMESPACE','/flosum_git'];a272_0x4779=function(){return _0x12ce83;};return a272_0x4779();}Object['defineProperty'](exports,a272_0x7bf7cc(0x1f0),{'value':!![]}),exports['SalesforceService']=void 0x0;const typedi_1=require('typedi'),core_1=require(a272_0x7bf7cc(0x1bc)),internal_server_error_1=require(a272_0x7bf7cc(0x1f2)),salesforce_auth_service_1=require(a272_0x7bf7cc(0x1d7)),constants_1=require('../../../../constants'),create_request_util_1=require(a272_0x7bf7cc(0x1f4)),salesforce_logger_service_1=require('./salesforce-logger.service'),salesforce_error_1=require(a272_0x7bf7cc(0x1c6)),connection_dto_1=require(a272_0x7bf7cc(0x1e7)),bulk_components_retriever_1=require(a272_0x7bf7cc(0x1bb));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x281829){const _0x11ba35=a272_0x7bf7cc;this[_0x11ba35(0x1d4)]=new core_1['Logger'](SalesforceService_1[_0x11ba35(0x1f5)]),this[_0x11ba35(0x1cd)]=(0x0,create_request_util_1['createSalesforceRequest'])(_0x281829),this['namespace']=constants_1[_0x11ba35(0x1b4)]?'':_0x11ba35(0x1b5);}['setLoggerId'](_0x1862dd){const _0x2fe97d=a272_0x7bf7cc;this[_0x2fe97d(0x1fe)]=_0x1862dd,this[_0x2fe97d(0x1be)]=new salesforce_logger_service_1[(_0x2fe97d(0x1e4))](this);}['getLogger'](){return this['internalLogger'];}async[a272_0x7bf7cc(0x1c8)](_0x348f9e){const _0x74b2a9=a272_0x7bf7cc;try{this['logger']['log'](_0x74b2a9(0x1f6),_0x348f9e[_0x74b2a9(0x1d2)]);const _0x564152=new bulk_components_retriever_1[(_0x74b2a9(0x1ed))]({'request':this['request'],'ids':_0x348f9e}),_0x1d3bb1=await _0x564152[_0x74b2a9(0x1fd)]();return _0x1d3bb1;}catch(_0x4aeff2){this['logger'][_0x74b2a9(0x1d1)](_0x4aeff2);throw new salesforce_error_1[(_0x74b2a9(0x1db))](_0x4aeff2);}}async['deleteAttachment'](_0x146e4a){const _0x5ec725=a272_0x7bf7cc;try{this[_0x5ec725(0x1d4)]['log']('Delete\x20attachment\x20%s\x20from\x20salesforce',_0x146e4a),await this[_0x5ec725(0x1cd)][_0x5ec725(0x1ce)]('services/data/'+constants_1[_0x5ec725(0x1e0)]+_0x5ec725(0x1c4)+_0x146e4a);}catch(_0x4546af){this[_0x5ec725(0x1d4)][_0x5ec725(0x1d1)](_0x4546af);throw new salesforce_error_1[(_0x5ec725(0x1db))](_0x4546af);}}async[a272_0x7bf7cc(0x1f9)](_0x53a297,_0x170a06=![]){const _0x39e31c=a272_0x7bf7cc;try{this['logger'][_0x39e31c(0x1ea)](_0x39e31c(0x1ec),_0x53a297);const _0x1b687c=await this[_0x39e31c(0x1cd)]['get'](_0x39e31c(0x1fb)+constants_1[_0x39e31c(0x1e0)]+_0x39e31c(0x1c4)+_0x53a297+_0x39e31c(0x1f8),{'responseType':_0x170a06?'arraybuffer':_0x39e31c(0x1ca)})[_0x39e31c(0x1d3)](({data:_0x3693b9})=>_0x3693b9);return _0x1b687c;}catch(_0x4d6ae2){this[_0x39e31c(0x1d4)][_0x39e31c(0x1d1)](_0x4d6ae2);throw new salesforce_error_1[(_0x39e31c(0x1db))](_0x4d6ae2);}}async[a272_0x7bf7cc(0x1cb)](_0x558102){const _0x5e4da6=a272_0x7bf7cc;try{_0x558102['forEach'](_0x4ae83e=>this[_0x5e4da6(0x1d4)][_0x5e4da6(0x1ea)](_0x5e4da6(0x1d6),_0x4ae83e)),await this[_0x5e4da6(0x1cd)]['post'](_0x5e4da6(0x1b7)+this[_0x5e4da6(0x1e5)]+'/logger',{'messages':_0x558102,'loggerId':this['loggerId']});}catch(_0x1e23be){this[_0x5e4da6(0x1d4)][_0x5e4da6(0x1d1)](_0x1e23be);throw new internal_server_error_1['InternalServerError'](_0x1e23be);}}async[a272_0x7bf7cc(0x1dc)](_0x38adeb,_0x496220){const _0x45d2c0=a272_0x7bf7cc;try{const {data:_0xb22fec}=await this[_0x45d2c0(0x1cd)][_0x45d2c0(0x1da)]('services/data/'+constants_1[_0x45d2c0(0x1e0)]+_0x45d2c0(0x1ba)+_0x38adeb+'/',_0x496220);return _0xb22fec['id'];}catch(_0x4376bf){throw new salesforce_error_1[(_0x45d2c0(0x1db))](_0x4376bf);}}async[a272_0x7bf7cc(0x1eb)](_0x3fc207,_0x33ad61,_0xc444fd){const _0x1b68b5=a272_0x7bf7cc;try{await this[_0x1b68b5(0x1cd)][_0x1b68b5(0x1cc)](_0x1b68b5(0x1fb)+constants_1[_0x1b68b5(0x1e0)]+_0x1b68b5(0x1ba)+_0x3fc207+'/'+_0x33ad61,_0xc444fd);}catch(_0x1d683d){throw new salesforce_error_1[(_0x1b68b5(0x1db))](_0x1d683d);}}async[a272_0x7bf7cc(0x1e3)](_0x107b35){const _0x258ae8=a272_0x7bf7cc;try{const {data:_0x1fb649}=await this[_0x258ae8(0x1cd)][_0x258ae8(0x1b9)](_0x258ae8(0x1b7)+this[_0x258ae8(0x1e5)]+'/connection',{'params':{'connectionId':_0x107b35}});return new connection_dto_1[(_0x258ae8(0x1e8))](_0x1fb649);}catch(_0x32868a){throw new salesforce_error_1[(_0x258ae8(0x1db))](_0x32868a);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a272_0x7bf7cc(0x1c1)])()),__metadata(a272_0x7bf7cc(0x1fc),[salesforce_auth_service_1[a272_0x7bf7cc(0x1d5)]])],SalesforceService),exports[a272_0x7bf7cc(0x1e2)]=SalesforceService;