const a283_0x154114=a283_0x44d3;(function(_0x3bf869,_0x135500){const _0x4e550e=a283_0x44d3,_0x3bc2e7=_0x3bf869();while(!![]){try{const _0x5b1f9c=-parseInt(_0x4e550e(0x123))/0x1+-parseInt(_0x4e550e(0x127))/0x2*(-parseInt(_0x4e550e(0x121))/0x3)+parseInt(_0x4e550e(0xfa))/0x4+parseInt(_0x4e550e(0x137))/0x5*(-parseInt(_0x4e550e(0x104))/0x6)+parseInt(_0x4e550e(0x110))/0x7*(parseInt(_0x4e550e(0xf5))/0x8)+-parseInt(_0x4e550e(0x111))/0x9+parseInt(_0x4e550e(0x11b))/0xa;if(_0x5b1f9c===_0x135500)break;else _0x3bc2e7['push'](_0x3bc2e7['shift']());}catch(_0x4cee9b){_0x3bc2e7['push'](_0x3bc2e7['shift']());}}}(a283_0x32be,0xc16b9));const a283_0x467a44=(function(){let _0x505cbe=!![];return function(_0x1303f3,_0x4b5d7a){const _0x8ac5d3=_0x505cbe?function(){if(_0x4b5d7a){const _0x118e3f=_0x4b5d7a['apply'](_0x1303f3,arguments);return _0x4b5d7a=null,_0x118e3f;}}:function(){};return _0x505cbe=![],_0x8ac5d3;};}()),a283_0x32806a=a283_0x467a44(this,function(){const _0xdd49c9=a283_0x44d3;return a283_0x32806a[_0xdd49c9(0x10c)]()[_0xdd49c9(0x124)](_0xdd49c9(0x116))['toString']()['constructor'](a283_0x32806a)[_0xdd49c9(0x124)](_0xdd49c9(0x116));});a283_0x32806a();function a283_0x44d3(_0x25d8c7,_0x15f6f0){const _0x3b9962=a283_0x32be();return a283_0x44d3=function(_0x32806a,_0x467a44){_0x32806a=_0x32806a-0xf2;let _0x32be83=_0x3b9962[_0x32806a];return _0x32be83;},a283_0x44d3(_0x25d8c7,_0x15f6f0);}'use strict';function a283_0x32be(){const _0x5f3c3f=['11112ncAKcy','Delete\x20attachment\x20%s\x20from\x20salesforce','Inject','patchObject','IGNORE_FLOSUM_GIT_NAMESPACE','defineProperty','getLogger','createSalesforceRequest','toString','services/apexrest','Logger','text','2110213mlGfhV','7620624ANdcWJ','ConnectionDto','[message]\x20%s','/logger','function','(((.+)+)+)+$','logger','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','InternalServerError','../../../../constants','15245500oFFOvt','createObject','name','/sobjects/','error','SalesforceService','188433PzXGHL','typedi','1396378qcYmpK','search','request','../utils/create-request.util','26mhZWsC','SalesforceLogger','Service','services/data/','../dto/connection.dto','loggerId','getOwnPropertyDescriptor','decorate','retrieveAttachment','then','__decorate','length','metadata','deleteAttachment','/connection','retrieve','3755IRmJcO','../../../../core','SalesforceError','log','../classes/bulk-components-retriever','../errors/salesforce.error','24lIbhZN','namespace','./salesforce-auth.service','fetchConnection','get','4722980eekpzq','../../../../core/errors/internal-server.error','__metadata','internalLogger','/flosum_git','SALESFORCE_API_VERSION','BulkComponentsRetriever','post','/sobjects/Attachment/','arraybuffer'];a283_0x32be=function(){return _0x5f3c3f;};return a283_0x32be();}var __decorate=this&&this[a283_0x154114(0x131)]||function(_0x23ddc8,_0x263f90,_0x5e6ce6,_0x1ae267){const _0x21a816=a283_0x154114;var _0x3d5645=arguments[_0x21a816(0x132)],_0x1d22af=_0x3d5645<0x3?_0x263f90:_0x1ae267===null?_0x1ae267=Object[_0x21a816(0x12d)](_0x263f90,_0x5e6ce6):_0x1ae267,_0x48a1f9;if(typeof Reflect==='object'&&typeof Reflect[_0x21a816(0x12e)]===_0x21a816(0x115))_0x1d22af=Reflect[_0x21a816(0x12e)](_0x23ddc8,_0x263f90,_0x5e6ce6,_0x1ae267);else{for(var _0x140e1d=_0x23ddc8['length']-0x1;_0x140e1d>=0x0;_0x140e1d--)if(_0x48a1f9=_0x23ddc8[_0x140e1d])_0x1d22af=(_0x3d5645<0x3?_0x48a1f9(_0x1d22af):_0x3d5645>0x3?_0x48a1f9(_0x263f90,_0x5e6ce6,_0x1d22af):_0x48a1f9(_0x263f90,_0x5e6ce6))||_0x1d22af;}return _0x3d5645>0x3&&_0x1d22af&&Object[_0x21a816(0x109)](_0x263f90,_0x5e6ce6,_0x1d22af),_0x1d22af;},__metadata=this&&this[a283_0x154114(0xfc)]||function(_0x285311,_0x43637e){const _0x1ecc88=a283_0x154114;if(typeof Reflect==='object'&&typeof Reflect[_0x1ecc88(0x133)]===_0x1ecc88(0x115))return Reflect[_0x1ecc88(0x133)](_0x285311,_0x43637e);},__param=this&&this['__param']||function(_0x59c061,_0x2f26a8){return function(_0x1b2acb,_0xcb0df9){_0x2f26a8(_0x1b2acb,_0xcb0df9,_0x59c061);};},SalesforceService_1;Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a283_0x154114(0x120)]=void 0x0;const typedi_1=require(a283_0x154114(0x122)),core_1=require(a283_0x154114(0x138)),internal_server_error_1=require(a283_0x154114(0xfb)),salesforce_auth_service_1=require(a283_0x154114(0xf7)),constants_1=require(a283_0x154114(0x11a)),create_request_util_1=require(a283_0x154114(0x126)),salesforce_logger_service_1=require('./salesforce-logger.service'),salesforce_error_1=require(a283_0x154114(0xf4)),connection_dto_1=require(a283_0x154114(0x12b)),bulk_components_retriever_1=require(a283_0x154114(0xf3));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x145a57){const _0x54de77=a283_0x154114;this['logger']=new core_1[(_0x54de77(0x10e))](SalesforceService_1[_0x54de77(0x11d)]),this[_0x54de77(0x125)]=(0x0,create_request_util_1[_0x54de77(0x10b)])(_0x145a57),this[_0x54de77(0xf6)]=constants_1[_0x54de77(0x108)]?'':_0x54de77(0xfe);}['setLoggerId'](_0x2375fe){const _0x4ffad6=a283_0x154114;this['loggerId']=_0x2375fe,this[_0x4ffad6(0xfd)]=new salesforce_logger_service_1[(_0x4ffad6(0x128))](this);}[a283_0x154114(0x10a)](){const _0x2c3805=a283_0x154114;return this[_0x2c3805(0xfd)];}async['retrieveComponents'](_0x69486b){const _0xe7a862=a283_0x154114;try{this[_0xe7a862(0x117)][_0xe7a862(0xf2)](_0xe7a862(0x118),_0x69486b[_0xe7a862(0x132)]);const _0x52e617=new bulk_components_retriever_1[(_0xe7a862(0x100))]({'request':this['request'],'ids':_0x69486b}),_0xfecd73=await _0x52e617[_0xe7a862(0x136)]();return _0xfecd73;}catch(_0x571a8f){this['logger'][_0xe7a862(0x11f)](_0x571a8f);throw new salesforce_error_1[(_0xe7a862(0x139))](_0x571a8f);}}async[a283_0x154114(0x134)](_0x260cbe){const _0x223b64=a283_0x154114;try{this[_0x223b64(0x117)][_0x223b64(0xf2)](_0x223b64(0x105),_0x260cbe),await this['request']['delete']('services/data/'+constants_1[_0x223b64(0xff)]+'/sobjects/Attachment/'+_0x260cbe);}catch(_0x36b193){this[_0x223b64(0x117)][_0x223b64(0x11f)](_0x36b193);throw new salesforce_error_1[(_0x223b64(0x139))](_0x36b193);}}async[a283_0x154114(0x12f)](_0x3b145f,_0x1ed7c9=![]){const _0x245ebe=a283_0x154114;try{this['logger'][_0x245ebe(0xf2)]('Retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x3b145f);const _0x7edab=await this[_0x245ebe(0x125)][_0x245ebe(0xf9)](_0x245ebe(0x12a)+constants_1[_0x245ebe(0xff)]+_0x245ebe(0x102)+_0x3b145f+'/body',{'responseType':_0x1ed7c9?_0x245ebe(0x103):_0x245ebe(0x10f)})[_0x245ebe(0x130)](({data:_0x26501d})=>_0x26501d);return _0x7edab;}catch(_0xfb899f){this[_0x245ebe(0x117)][_0x245ebe(0x11f)](_0xfb899f);throw new salesforce_error_1[(_0x245ebe(0x139))](_0xfb899f);}}async['sendLog'](_0x58ff8a){const _0x455bfc=a283_0x154114;try{_0x58ff8a['forEach'](_0x585924=>this['logger']['log'](_0x455bfc(0x113),_0x585924)),await this[_0x455bfc(0x125)][_0x455bfc(0x101)](_0x455bfc(0x10d)+this[_0x455bfc(0xf6)]+_0x455bfc(0x114),{'messages':_0x58ff8a,'loggerId':this[_0x455bfc(0x12c)]});}catch(_0x18a488){this['logger'][_0x455bfc(0x11f)](_0x18a488);throw new internal_server_error_1[(_0x455bfc(0x119))](_0x18a488);}}async[a283_0x154114(0x11c)](_0x52c2bb,_0x3b009b){const _0x3b5ecd=a283_0x154114;try{const {data:_0x4e12c6}=await this[_0x3b5ecd(0x125)][_0x3b5ecd(0x101)](_0x3b5ecd(0x12a)+constants_1[_0x3b5ecd(0xff)]+_0x3b5ecd(0x11e)+_0x52c2bb+'/',_0x3b009b);return _0x4e12c6['id'];}catch(_0x112783){throw new salesforce_error_1[(_0x3b5ecd(0x139))](_0x112783);}}async[a283_0x154114(0x107)](_0x2df718,_0x5ebee2,_0x4fec5e){const _0x521d79=a283_0x154114;try{await this[_0x521d79(0x125)]['patch'](_0x521d79(0x12a)+constants_1[_0x521d79(0xff)]+_0x521d79(0x11e)+_0x2df718+'/'+_0x5ebee2,_0x4fec5e);}catch(_0x44fd52){throw new salesforce_error_1[(_0x521d79(0x139))](_0x44fd52);}}async[a283_0x154114(0xf8)](_0x2efcaf){const _0x3adf44=a283_0x154114;try{const {data:_0x2aa9e8}=await this[_0x3adf44(0x125)][_0x3adf44(0xf9)]('services/apexrest'+this[_0x3adf44(0xf6)]+_0x3adf44(0x135),{'params':{'connectionId':_0x2efcaf}});return new connection_dto_1[(_0x3adf44(0x112))](_0x2aa9e8);}catch(_0x39bd88){throw new salesforce_error_1[(_0x3adf44(0x139))](_0x39bd88);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a283_0x154114(0x129)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a283_0x154114(0x106)])()),__metadata('design:paramtypes',[salesforce_auth_service_1['SalesforceAuthService']])],SalesforceService),exports[a283_0x154114(0x120)]=SalesforceService;