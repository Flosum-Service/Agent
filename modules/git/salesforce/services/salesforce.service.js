const a272_0x5d6633=a272_0x157f;function a272_0x57b6(){const _0x224dd3=['services/data/','../dto/connection.dto','(((.+)+)+)+$','toString','../errors/salesforce.error','__param','search','internalLogger','Delete\x20attachment\x20%s\x20from\x20salesforce','get','SalesforceError','./salesforce-auth.service','SALESFORCE_API_VERSION','post','1834721hlozsH','object','typedi','Logger','patchObject','getOwnPropertyDescriptor','forEach','6MtHfnA','defineProperty','metadata','services/apexrest','length','Inject','182304iSfhrH','BulkComponentsRetriever','setLoggerId','log','retrieveComponents','request','constructor','function','Retrieve\x20attachment\x20%s\x20from\x20salesforce','283329XjeXAi','__metadata','24fPLLgW','../../../../constants','SalesforceLogger','/sobjects/','./salesforce-logger.service','error','/sobjects/Attachment/','../classes/bulk-components-retriever','[message]\x20%s','/flosum_git','createSalesforceRequest','/logger','2754945DVUOAz','namespace','../../../../core','SalesforceAuthService','text','688gLmpJW','/connection','retrieve','/body','then','name','Service','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','logger','__decorate','InternalServerError','499ZDCXPh','delete','1967444HuWLAi','getLogger','design:paramtypes','2021590hhoOuY','decorate','arraybuffer','3ljJDua','11wMHWjq','fetchConnection','createObject','sendLog'];a272_0x57b6=function(){return _0x224dd3;};return a272_0x57b6();}(function(_0x43be68,_0x2c572c){const _0xc4d1d=a272_0x157f,_0x204cf8=_0x43be68();while(!![]){try{const _0x42a783=parseInt(_0xc4d1d(0x17a))/0x1*(parseInt(_0xc4d1d(0x16f))/0x2)+-parseInt(_0xc4d1d(0x182))/0x3*(-parseInt(_0xc4d1d(0x17c))/0x4)+-parseInt(_0xc4d1d(0x1b9))/0x5*(parseInt(_0xc4d1d(0x19c))/0x6)+parseInt(_0xc4d1d(0x195))/0x7+parseInt(_0xc4d1d(0x1ad))/0x8*(parseInt(_0xc4d1d(0x1ab))/0x9)+parseInt(_0xc4d1d(0x17f))/0xa*(-parseInt(_0xc4d1d(0x183))/0xb)+parseInt(_0xc4d1d(0x1a2))/0xc;if(_0x42a783===_0x2c572c)break;else _0x204cf8['push'](_0x204cf8['shift']());}catch(_0x5a5e9c){_0x204cf8['push'](_0x204cf8['shift']());}}}(a272_0x57b6,0x44dfb));const a272_0x417dfd=(function(){let _0x2d6950=!![];return function(_0x20272e,_0x5f3d82){const _0x302d65=_0x2d6950?function(){if(_0x5f3d82){const _0x1a145f=_0x5f3d82['apply'](_0x20272e,arguments);return _0x5f3d82=null,_0x1a145f;}}:function(){};return _0x2d6950=![],_0x302d65;};}()),a272_0xf426f9=a272_0x417dfd(this,function(){const _0x20248d=a272_0x157f;return a272_0xf426f9[_0x20248d(0x18a)]()['search'](_0x20248d(0x189))[_0x20248d(0x18a)]()[_0x20248d(0x1a8)](a272_0xf426f9)[_0x20248d(0x18d)](_0x20248d(0x189));});a272_0xf426f9();function a272_0x157f(_0x108a00,_0x4a4882){const _0x24ef47=a272_0x57b6();return a272_0x157f=function(_0xf426f9,_0x417dfd){_0xf426f9=_0xf426f9-0x16b;let _0x57b66e=_0x24ef47[_0xf426f9];return _0x57b66e;},a272_0x157f(_0x108a00,_0x4a4882);}'use strict';var __decorate=this&&this[a272_0x5d6633(0x178)]||function(_0x16d1a0,_0x143d39,_0x214fc1,_0x30d082){const _0x34f755=a272_0x5d6633;var _0xffff07=arguments[_0x34f755(0x1a0)],_0x5ac075=_0xffff07<0x3?_0x143d39:_0x30d082===null?_0x30d082=Object[_0x34f755(0x19a)](_0x143d39,_0x214fc1):_0x30d082,_0x672057;if(typeof Reflect===_0x34f755(0x196)&&typeof Reflect[_0x34f755(0x180)]===_0x34f755(0x1a9))_0x5ac075=Reflect[_0x34f755(0x180)](_0x16d1a0,_0x143d39,_0x214fc1,_0x30d082);else{for(var _0x3f1d75=_0x16d1a0[_0x34f755(0x1a0)]-0x1;_0x3f1d75>=0x0;_0x3f1d75--)if(_0x672057=_0x16d1a0[_0x3f1d75])_0x5ac075=(_0xffff07<0x3?_0x672057(_0x5ac075):_0xffff07>0x3?_0x672057(_0x143d39,_0x214fc1,_0x5ac075):_0x672057(_0x143d39,_0x214fc1))||_0x5ac075;}return _0xffff07>0x3&&_0x5ac075&&Object[_0x34f755(0x19d)](_0x143d39,_0x214fc1,_0x5ac075),_0x5ac075;},__metadata=this&&this[a272_0x5d6633(0x1ac)]||function(_0x339650,_0x4f9238){const _0x18445a=a272_0x5d6633;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x18445a(0x1a9))return Reflect[_0x18445a(0x19e)](_0x339650,_0x4f9238);},__param=this&&this[a272_0x5d6633(0x18c)]||function(_0x1cedab,_0x5a306b){return function(_0x5d00c2,_0x4784f1){_0x5a306b(_0x5d00c2,_0x4784f1,_0x1cedab);};},SalesforceService_1;Object[a272_0x5d6633(0x19d)](exports,'__esModule',{'value':!![]}),exports['SalesforceService']=void 0x0;const typedi_1=require(a272_0x5d6633(0x197)),core_1=require(a272_0x5d6633(0x16c)),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require(a272_0x5d6633(0x192)),constants_1=require(a272_0x5d6633(0x1ae)),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require(a272_0x5d6633(0x1b1)),salesforce_error_1=require(a272_0x5d6633(0x18b)),connection_dto_1=require(a272_0x5d6633(0x188)),bulk_components_retriever_1=require(a272_0x5d6633(0x1b4));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x425e03){const _0x3ac496=a272_0x5d6633;this[_0x3ac496(0x177)]=new core_1[(_0x3ac496(0x198))](SalesforceService_1[_0x3ac496(0x174)]),this[_0x3ac496(0x1a7)]=(0x0,create_request_util_1[_0x3ac496(0x1b7)])(_0x425e03),this[_0x3ac496(0x16b)]=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':_0x3ac496(0x1b6);}[a272_0x5d6633(0x1a4)](_0x57fd6a){const _0x10311b=a272_0x5d6633;this['loggerId']=_0x57fd6a,this[_0x10311b(0x18e)]=new salesforce_logger_service_1[(_0x10311b(0x1af))](this);}[a272_0x5d6633(0x17d)](){return this['internalLogger'];}async[a272_0x5d6633(0x1a6)](_0x247108){const _0x456c4d=a272_0x5d6633;try{this['logger'][_0x456c4d(0x1a5)](_0x456c4d(0x176),_0x247108[_0x456c4d(0x1a0)]);const _0x438364=new bulk_components_retriever_1[(_0x456c4d(0x1a3))]({'request':this[_0x456c4d(0x1a7)],'ids':_0x247108}),_0x413154=await _0x438364[_0x456c4d(0x171)]();return _0x413154;}catch(_0x525d0e){this[_0x456c4d(0x177)]['error'](_0x525d0e);throw new salesforce_error_1[(_0x456c4d(0x191))](_0x525d0e);}}async['deleteAttachment'](_0x26ce93){const _0x15c069=a272_0x5d6633;try{this[_0x15c069(0x177)]['log'](_0x15c069(0x18f),_0x26ce93),await this[_0x15c069(0x1a7)][_0x15c069(0x17b)]('services/data/'+constants_1[_0x15c069(0x193)]+_0x15c069(0x1b3)+_0x26ce93);}catch(_0x4fa6ba){this[_0x15c069(0x177)][_0x15c069(0x1b2)](_0x4fa6ba);throw new salesforce_error_1[(_0x15c069(0x191))](_0x4fa6ba);}}async['retrieveAttachment'](_0x1977f6,_0x569eb9=![]){const _0x39dade=a272_0x5d6633;try{this['logger']['log'](_0x39dade(0x1aa),_0x1977f6);const _0x5269fc=await this[_0x39dade(0x1a7)]['get']('services/data/'+constants_1[_0x39dade(0x193)]+_0x39dade(0x1b3)+_0x1977f6+_0x39dade(0x172),{'responseType':_0x569eb9?_0x39dade(0x181):_0x39dade(0x16e)})[_0x39dade(0x173)](({data:_0x4ca576})=>_0x4ca576);return _0x5269fc;}catch(_0x4fd231){this[_0x39dade(0x177)][_0x39dade(0x1b2)](_0x4fd231);throw new salesforce_error_1[(_0x39dade(0x191))](_0x4fd231);}}async[a272_0x5d6633(0x186)](_0x555108){const _0x320865=a272_0x5d6633;try{_0x555108[_0x320865(0x19b)](_0x2dc1f7=>this[_0x320865(0x177)]['log'](_0x320865(0x1b5),_0x2dc1f7)),await this[_0x320865(0x1a7)][_0x320865(0x194)]('services/apexrest'+this['namespace']+_0x320865(0x1b8),{'messages':_0x555108,'loggerId':this['loggerId']});}catch(_0x302ada){this[_0x320865(0x177)][_0x320865(0x1b2)](_0x302ada);throw new internal_server_error_1[(_0x320865(0x179))](_0x302ada);}}async[a272_0x5d6633(0x185)](_0x20ebfc,_0x316026){const _0x38d10f=a272_0x5d6633;try{const {data:_0x3a4e26}=await this[_0x38d10f(0x1a7)][_0x38d10f(0x194)](_0x38d10f(0x187)+constants_1[_0x38d10f(0x193)]+_0x38d10f(0x1b0)+_0x20ebfc+'/',_0x316026);return _0x3a4e26['id'];}catch(_0x4a5727){throw new salesforce_error_1[(_0x38d10f(0x191))](_0x4a5727);}}async[a272_0x5d6633(0x199)](_0x23ff87,_0x36a977,_0x309e83){const _0x194f06=a272_0x5d6633;try{await this[_0x194f06(0x1a7)]['patch']('services/data/'+constants_1['SALESFORCE_API_VERSION']+'/sobjects/'+_0x23ff87+'/'+_0x36a977,_0x309e83);}catch(_0x4eba05){throw new salesforce_error_1[(_0x194f06(0x191))](_0x4eba05);}}async[a272_0x5d6633(0x184)](_0x37a78f){const _0x40f733=a272_0x5d6633;try{const {data:_0x51ffac}=await this[_0x40f733(0x1a7)][_0x40f733(0x190)](_0x40f733(0x19f)+this[_0x40f733(0x16b)]+_0x40f733(0x170),{'params':{'connectionId':_0x37a78f}});return new connection_dto_1['ConnectionDto'](_0x51ffac);}catch(_0x4a8523){throw new salesforce_error_1[(_0x40f733(0x191))](_0x4a8523);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a272_0x5d6633(0x175)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a272_0x5d6633(0x1a1)])()),__metadata(a272_0x5d6633(0x17e),[salesforce_auth_service_1[a272_0x5d6633(0x16d)]])],SalesforceService),exports['SalesforceService']=SalesforceService;