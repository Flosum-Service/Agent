const a271_0x4e1f2c=a271_0x7b97;(function(_0xdcbc4b,_0x5df064){const _0x4a8d04=a271_0x7b97,_0x4f63b5=_0xdcbc4b();while(!![]){try{const _0x10f2e6=parseInt(_0x4a8d04(0x1c5))/0x1+-parseInt(_0x4a8d04(0x196))/0x2+parseInt(_0x4a8d04(0x1c4))/0x3*(parseInt(_0x4a8d04(0x1cb))/0x4)+-parseInt(_0x4a8d04(0x1a9))/0x5+parseInt(_0x4a8d04(0x1ae))/0x6+-parseInt(_0x4a8d04(0x1c1))/0x7+parseInt(_0x4a8d04(0x1bf))/0x8;if(_0x10f2e6===_0x5df064)break;else _0x4f63b5['push'](_0x4f63b5['shift']());}catch(_0x369afe){_0x4f63b5['push'](_0x4f63b5['shift']());}}}(a271_0x3089,0x62019));const a271_0x2c0da3=(function(){let _0x315d98=!![];return function(_0x16e8fa,_0x4178b9){const _0x2753f1=_0x315d98?function(){const _0x38c388=a271_0x7b97;if(_0x4178b9){const _0x136301=_0x4178b9[_0x38c388(0x18e)](_0x16e8fa,arguments);return _0x4178b9=null,_0x136301;}}:function(){};return _0x315d98=![],_0x2753f1;};}()),a271_0x22322e=a271_0x2c0da3(this,function(){const _0x90cb33=a271_0x7b97;return a271_0x22322e[_0x90cb33(0x1a6)]()[_0x90cb33(0x18b)](_0x90cb33(0x1bc))['toString']()[_0x90cb33(0x1a0)](a271_0x22322e)['search'](_0x90cb33(0x1bc));});a271_0x22322e();function a271_0x7b97(_0x5b3384,_0x44526e){const _0xcf4cbd=a271_0x3089();return a271_0x7b97=function(_0x22322e,_0x2c0da3){_0x22322e=_0x22322e-0x18b;let _0x30898b=_0xcf4cbd[_0x22322e];return _0x30898b;},a271_0x7b97(_0x5b3384,_0x44526e);}'use strict';var __decorate=this&&this[a271_0x4e1f2c(0x1b5)]||function(_0x51e576,_0x7091d8,_0x538b2a,_0x925fca){const _0x58334c=a271_0x4e1f2c;var _0x288bba=arguments[_0x58334c(0x1bb)],_0x9bc16=_0x288bba<0x3?_0x7091d8:_0x925fca===null?_0x925fca=Object[_0x58334c(0x1b6)](_0x7091d8,_0x538b2a):_0x925fca,_0x29ed4a;if(typeof Reflect===_0x58334c(0x191)&&typeof Reflect[_0x58334c(0x1af)]===_0x58334c(0x19c))_0x9bc16=Reflect['decorate'](_0x51e576,_0x7091d8,_0x538b2a,_0x925fca);else{for(var _0x33736a=_0x51e576['length']-0x1;_0x33736a>=0x0;_0x33736a--)if(_0x29ed4a=_0x51e576[_0x33736a])_0x9bc16=(_0x288bba<0x3?_0x29ed4a(_0x9bc16):_0x288bba>0x3?_0x29ed4a(_0x7091d8,_0x538b2a,_0x9bc16):_0x29ed4a(_0x7091d8,_0x538b2a))||_0x9bc16;}return _0x288bba>0x3&&_0x9bc16&&Object[_0x58334c(0x1b0)](_0x7091d8,_0x538b2a,_0x9bc16),_0x9bc16;},__metadata=this&&this['__metadata']||function(_0x5f4727,_0x591971){const _0x4b54b1=a271_0x4e1f2c;if(typeof Reflect===_0x4b54b1(0x191)&&typeof Reflect[_0x4b54b1(0x1a4)]==='function')return Reflect[_0x4b54b1(0x1a4)](_0x5f4727,_0x591971);},__param=this&&this['__param']||function(_0x15e13a,_0x4658fc){return function(_0x1df6cb,_0x4c2331){_0x4658fc(_0x1df6cb,_0x4c2331,_0x15e13a);};},SalesforceService_1;Object[a271_0x4e1f2c(0x1b0)](exports,a271_0x4e1f2c(0x192),{'value':!![]}),exports['SalesforceService']=void 0x0;const typedi_1=require('typedi'),core_1=require('../../../../core'),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require('./salesforce-auth.service'),constants_1=require(a271_0x4e1f2c(0x1b4)),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require('./salesforce-logger.service'),salesforce_error_1=require(a271_0x4e1f2c(0x1c8)),connection_dto_1=require(a271_0x4e1f2c(0x1b7));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x3929a4){const _0x1e2b45=a271_0x4e1f2c;this[_0x1e2b45(0x1be)]=new core_1['Logger'](SalesforceService_1['name']),this[_0x1e2b45(0x1a8)]=(0x0,create_request_util_1[_0x1e2b45(0x1b8)])(_0x3929a4),this[_0x1e2b45(0x1ab)]=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':'/flosum_git';}[a271_0x4e1f2c(0x1c3)](_0x17798e){const _0x248552=a271_0x4e1f2c;this[_0x248552(0x19d)]=_0x17798e,this['internalLogger']=new salesforce_logger_service_1[(_0x248552(0x19f))](this);}[a271_0x4e1f2c(0x193)](){const _0x292d3a=a271_0x4e1f2c;return this[_0x292d3a(0x190)];}async['retrieveComponents'](_0x1a3c27){const _0x9248ae=a271_0x4e1f2c;try{this[_0x9248ae(0x1be)][_0x9248ae(0x1a5)](_0x9248ae(0x1a2),_0x1a3c27['length']);const _0xe09612=await this[_0x9248ae(0x1a8)][_0x9248ae(0x1ba)](_0x9248ae(0x195)+this[_0x9248ae(0x1ab)]+_0x9248ae(0x1a1),{'componentIds':_0x1a3c27,'loggerId':this['loggerId']})[_0x9248ae(0x198)](({data:_0x1e42f1})=>_0x1e42f1);return _0xe09612;}catch(_0x3de5fc){this[_0x9248ae(0x1be)][_0x9248ae(0x1ac)](_0x3de5fc);throw new salesforce_error_1['SalesforceError'](_0x3de5fc);}}async[a271_0x4e1f2c(0x1b2)](_0x5ae74a){const _0x5b8dce=a271_0x4e1f2c;try{this[_0x5b8dce(0x1be)][_0x5b8dce(0x1a5)]('Delete\x20attachment\x20%s\x20from\x20salesforce',_0x5ae74a),await this[_0x5b8dce(0x1a8)][_0x5b8dce(0x18d)](_0x5b8dce(0x18f)+constants_1[_0x5b8dce(0x19e)]+'/sobjects/Attachment/'+_0x5ae74a);}catch(_0x1f9f4b){this[_0x5b8dce(0x1be)]['error'](_0x1f9f4b);throw new salesforce_error_1[(_0x5b8dce(0x18c))](_0x1f9f4b);}}async['retrieveAttachment'](_0x9612b7,_0x5a586c=![]){const _0x122b50=a271_0x4e1f2c;try{this[_0x122b50(0x1be)][_0x122b50(0x1a5)](_0x122b50(0x1b9),_0x9612b7);const _0xc3faeb=await this[_0x122b50(0x1a8)][_0x122b50(0x197)]('services/data/'+constants_1[_0x122b50(0x19e)]+_0x122b50(0x19a)+_0x9612b7+_0x122b50(0x199),{'responseType':_0x5a586c?_0x122b50(0x1b1):_0x122b50(0x1aa)})['then'](({data:_0x35e407})=>_0x35e407);return _0xc3faeb;}catch(_0x48096b){this['logger'][_0x122b50(0x1ac)](_0x48096b);throw new salesforce_error_1[(_0x122b50(0x18c))](_0x48096b);}}async[a271_0x4e1f2c(0x1ad)](_0x2d490d){const _0x16a8aa=a271_0x4e1f2c;try{_0x2d490d[_0x16a8aa(0x194)](_0x326456=>this[_0x16a8aa(0x1be)][_0x16a8aa(0x1a5)](_0x16a8aa(0x1c9),_0x326456)),await this[_0x16a8aa(0x1a8)][_0x16a8aa(0x1ba)](_0x16a8aa(0x195)+this[_0x16a8aa(0x1ab)]+'/logger',{'messages':_0x2d490d,'loggerId':this['loggerId']});}catch(_0x3fe161){this[_0x16a8aa(0x1be)][_0x16a8aa(0x1ac)](_0x3fe161);throw new internal_server_error_1[(_0x16a8aa(0x1c0))](_0x3fe161);}}async[a271_0x4e1f2c(0x1ca)](_0x6412e5,_0x512fa2){const _0x16879d=a271_0x4e1f2c;try{const {data:_0xcc821a}=await this[_0x16879d(0x1a8)]['post'](_0x16879d(0x18f)+constants_1[_0x16879d(0x19e)]+_0x16879d(0x19b)+_0x6412e5+'/',_0x512fa2);return _0xcc821a['id'];}catch(_0x4dfb7c){throw new salesforce_error_1[(_0x16879d(0x18c))](_0x4dfb7c);}}async[a271_0x4e1f2c(0x1c6)](_0x42de33,_0x272fe6,_0x2ef4a4){const _0x2d7e6c=a271_0x4e1f2c;try{await this['request'][_0x2d7e6c(0x1bd)](_0x2d7e6c(0x18f)+constants_1[_0x2d7e6c(0x19e)]+_0x2d7e6c(0x19b)+_0x42de33+'/'+_0x272fe6,_0x2ef4a4);}catch(_0x23f31c){throw new salesforce_error_1[(_0x2d7e6c(0x18c))](_0x23f31c);}}async[a271_0x4e1f2c(0x1c7)](_0x4cfc34){const _0xf8e727=a271_0x4e1f2c;try{const {data:_0x38bc53}=await this[_0xf8e727(0x1a8)]['get']('services/apexrest'+this[_0xf8e727(0x1ab)]+'/connection',{'params':{'connectionId':_0x4cfc34}});return new connection_dto_1['ConnectionDto'](_0x38bc53);}catch(_0x505e55){throw new salesforce_error_1[(_0xf8e727(0x18c))](_0x505e55);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a271_0x4e1f2c(0x1b3)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a271_0x4e1f2c(0x1a7)])()),__metadata('design:paramtypes',[salesforce_auth_service_1[a271_0x4e1f2c(0x1c2)]])],SalesforceService),exports[a271_0x4e1f2c(0x1a3)]=SalesforceService;function a271_0x3089(){const _0x1d6f9e=['object','__esModule','getLogger','forEach','services/apexrest','985776XwTptO','get','then','/body','/sobjects/Attachment/','/sobjects/','function','loggerId','SALESFORCE_API_VERSION','SalesforceLogger','constructor','/attachments','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','SalesforceService','metadata','log','toString','Inject','request','2909625mhqpiJ','text','namespace','error','sendLog','3964770bBsEDF','decorate','defineProperty','arraybuffer','deleteAttachment','Service','../../../../constants','__decorate','getOwnPropertyDescriptor','../dto/connection.dto','createSalesforceRequest','Retrieve\x20attachment\x20%s\x20from\x20salesforce','post','length','(((.+)+)+)+$','patch','logger','4662576UMtXCD','InternalServerError','2379755YZgKID','SalesforceAuthService','setLoggerId','3BmDSdF','147117lzSlzx','patchObject','fetchConnection','../errors/salesforce.error','[message]\x20%s','createObject','1701908vVUyYx','search','SalesforceError','delete','apply','services/data/','internalLogger'];a271_0x3089=function(){return _0x1d6f9e;};return a271_0x3089();}