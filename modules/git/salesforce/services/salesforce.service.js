const a282_0x490c2f=a282_0x1420;function a282_0x1dd1(){const _0x146ebd=['__decorate','./salesforce-logger.service','../classes/bulk-components-retriever','metadata','function','then','retrieve','../../../../core/errors/internal-server.error','defineProperty','../errors/salesforce.error','search','(((.+)+)+)+$','5BjESJz','name','944736vkEsBu','text','arraybuffer','8bjUNFk','IGNORE_FLOSUM_GIT_NAMESPACE','post','../../../../core','apply','request','length','/body','/logger','getLogger','loggerId','13212824PRYkWc','namespace','retrieveAttachment','getOwnPropertyDescriptor','__param','Service','1145709yZmZUR','SalesforceError','__metadata','services/apexrest','../dto/connection.dto','typedi','Delete\x20attachment\x20%s\x20from\x20salesforce','decorate','/flosum_git','/sobjects/','error','toString','/connection','7zuqAru','sendLog','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','get','SALESFORCE_API_VERSION','126682XxtzgD','design:paramtypes','setLoggerId','Logger','constructor','5341196AUNrbh','deleteAttachment','../utils/create-request.util','internalLogger','object','32895632bjPFuf','./salesforce-auth.service','log','fetchConnection','ConnectionDto','110fXjSHV','2108706qouZmW','12tgoFug','logger','services/data/','SalesforceAuthService','retrieveComponents','SalesforceService','SalesforceLogger'];a282_0x1dd1=function(){return _0x146ebd;};return a282_0x1dd1();}(function(_0x3d6db4,_0x8b6fde){const _0x57fce9=a282_0x1420,_0x194461=_0x3d6db4();while(!![]){try{const _0x56b556=-parseInt(_0x57fce9(0x1dd))/0x1+-parseInt(_0x57fce9(0x206))/0x2*(parseInt(_0x57fce9(0x203))/0x3)+-parseInt(_0x57fce9(0x1e2))/0x4+-parseInt(_0x57fce9(0x201))/0x5*(-parseInt(_0x57fce9(0x1ed))/0x6)+parseInt(_0x57fce9(0x1d8))/0x7*(parseInt(_0x57fce9(0x211))/0x8)+parseInt(_0x57fce9(0x217))/0x9*(-parseInt(_0x57fce9(0x1ec))/0xa)+parseInt(_0x57fce9(0x1e7))/0xb*(parseInt(_0x57fce9(0x1ee))/0xc);if(_0x56b556===_0x8b6fde)break;else _0x194461['push'](_0x194461['shift']());}catch(_0x3bcc4b){_0x194461['push'](_0x194461['shift']());}}}(a282_0x1dd1,0xd4cca));const a282_0x2e0a31=(function(){let _0xe5adc1=!![];return function(_0x11b6c1,_0x2f0205){const _0x3001c2=_0xe5adc1?function(){const _0x2c3f9e=a282_0x1420;if(_0x2f0205){const _0x321f31=_0x2f0205[_0x2c3f9e(0x20a)](_0x11b6c1,arguments);return _0x2f0205=null,_0x321f31;}}:function(){};return _0xe5adc1=![],_0x3001c2;};}()),a282_0x2923f1=a282_0x2e0a31(this,function(){const _0x59d84d=a282_0x1420;return a282_0x2923f1[_0x59d84d(0x1d6)]()[_0x59d84d(0x1ff)]('(((.+)+)+)+$')['toString']()[_0x59d84d(0x1e1)](a282_0x2923f1)[_0x59d84d(0x1ff)](_0x59d84d(0x200));});function a282_0x1420(_0xa75d5f,_0x3ed4d1){const _0x27b9d1=a282_0x1dd1();return a282_0x1420=function(_0x2923f1,_0x2e0a31){_0x2923f1=_0x2923f1-0x1ce;let _0x1dd16e=_0x27b9d1[_0x2923f1];return _0x1dd16e;},a282_0x1420(_0xa75d5f,_0x3ed4d1);}a282_0x2923f1();'use strict';var __decorate=this&&this[a282_0x490c2f(0x1f5)]||function(_0x362c8d,_0x543a4a,_0x4e1ba5,_0x2c328e){const _0x58eb9a=a282_0x490c2f;var _0x495b4a=arguments[_0x58eb9a(0x20c)],_0x2c009b=_0x495b4a<0x3?_0x543a4a:_0x2c328e===null?_0x2c328e=Object[_0x58eb9a(0x214)](_0x543a4a,_0x4e1ba5):_0x2c328e,_0x157e15;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x58eb9a(0x1f9))_0x2c009b=Reflect[_0x58eb9a(0x1d2)](_0x362c8d,_0x543a4a,_0x4e1ba5,_0x2c328e);else{for(var _0x48ae10=_0x362c8d[_0x58eb9a(0x20c)]-0x1;_0x48ae10>=0x0;_0x48ae10--)if(_0x157e15=_0x362c8d[_0x48ae10])_0x2c009b=(_0x495b4a<0x3?_0x157e15(_0x2c009b):_0x495b4a>0x3?_0x157e15(_0x543a4a,_0x4e1ba5,_0x2c009b):_0x157e15(_0x543a4a,_0x4e1ba5))||_0x2c009b;}return _0x495b4a>0x3&&_0x2c009b&&Object['defineProperty'](_0x543a4a,_0x4e1ba5,_0x2c009b),_0x2c009b;},__metadata=this&&this[a282_0x490c2f(0x219)]||function(_0x3bf3d3,_0x3930ba){const _0x5a9e89=a282_0x490c2f;if(typeof Reflect===_0x5a9e89(0x1e6)&&typeof Reflect['metadata']===_0x5a9e89(0x1f9))return Reflect[_0x5a9e89(0x1f8)](_0x3bf3d3,_0x3930ba);},__param=this&&this[a282_0x490c2f(0x215)]||function(_0x46ec0c,_0x489506){return function(_0x9182cc,_0x5f1947){_0x489506(_0x9182cc,_0x5f1947,_0x46ec0c);};},SalesforceService_1;Object[a282_0x490c2f(0x1fd)](exports,'__esModule',{'value':!![]}),exports['SalesforceService']=void 0x0;const typedi_1=require(a282_0x490c2f(0x1d0)),core_1=require(a282_0x490c2f(0x209)),internal_server_error_1=require(a282_0x490c2f(0x1fc)),salesforce_auth_service_1=require(a282_0x490c2f(0x1e8)),constants_1=require('../../../../constants'),create_request_util_1=require(a282_0x490c2f(0x1e4)),salesforce_logger_service_1=require(a282_0x490c2f(0x1f6)),salesforce_error_1=require(a282_0x490c2f(0x1fe)),connection_dto_1=require(a282_0x490c2f(0x1cf)),bulk_components_retriever_1=require(a282_0x490c2f(0x1f7));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x259e6a){const _0x2b17ee=a282_0x490c2f;this[_0x2b17ee(0x1ef)]=new core_1[(_0x2b17ee(0x1e0))](SalesforceService_1[_0x2b17ee(0x202)]),this[_0x2b17ee(0x20b)]=(0x0,create_request_util_1['createSalesforceRequest'])(_0x259e6a),this[_0x2b17ee(0x212)]=constants_1[_0x2b17ee(0x207)]?'':_0x2b17ee(0x1d3);}[a282_0x490c2f(0x1df)](_0x1a05ed){const _0x71cf8b=a282_0x490c2f;this[_0x71cf8b(0x210)]=_0x1a05ed,this[_0x71cf8b(0x1e5)]=new salesforce_logger_service_1[(_0x71cf8b(0x1f4))](this);}[a282_0x490c2f(0x20f)](){const _0x55fc32=a282_0x490c2f;return this[_0x55fc32(0x1e5)];}async[a282_0x490c2f(0x1f2)](_0x57e611){const _0x2f052e=a282_0x490c2f;try{this[_0x2f052e(0x1ef)][_0x2f052e(0x1e9)](_0x2f052e(0x1da),_0x57e611[_0x2f052e(0x20c)]);const _0x242032=new bulk_components_retriever_1['BulkComponentsRetriever']({'request':this[_0x2f052e(0x20b)],'ids':_0x57e611}),_0x5abd34=await _0x242032[_0x2f052e(0x1fb)]();return _0x5abd34;}catch(_0xc9c061){this[_0x2f052e(0x1ef)][_0x2f052e(0x1d5)](_0xc9c061);throw new salesforce_error_1[(_0x2f052e(0x218))](_0xc9c061);}}async[a282_0x490c2f(0x1e3)](_0x4222a4){const _0x3ad37c=a282_0x490c2f;try{this[_0x3ad37c(0x1ef)]['log'](_0x3ad37c(0x1d1),_0x4222a4),await this['request']['delete'](_0x3ad37c(0x1f0)+constants_1[_0x3ad37c(0x1dc)]+'/sobjects/Attachment/'+_0x4222a4);}catch(_0x5144a3){this[_0x3ad37c(0x1ef)]['error'](_0x5144a3);throw new salesforce_error_1[(_0x3ad37c(0x218))](_0x5144a3);}}async[a282_0x490c2f(0x213)](_0x3927d4,_0x10660b=![]){const _0x372bbd=a282_0x490c2f;try{this[_0x372bbd(0x1ef)]['log']('Retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x3927d4);const _0x1128b0=await this[_0x372bbd(0x20b)]['get'](_0x372bbd(0x1f0)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment/'+_0x3927d4+_0x372bbd(0x20d),{'responseType':_0x10660b?_0x372bbd(0x205):_0x372bbd(0x204)})[_0x372bbd(0x1fa)](({data:_0x4c6f66})=>_0x4c6f66);return _0x1128b0;}catch(_0x46fe90){this['logger'][_0x372bbd(0x1d5)](_0x46fe90);throw new salesforce_error_1['SalesforceError'](_0x46fe90);}}async[a282_0x490c2f(0x1d9)](_0x12ee6a){const _0x4d0df9=a282_0x490c2f;try{_0x12ee6a['forEach'](_0x8243ad=>this['logger'][_0x4d0df9(0x1e9)]('[message]\x20%s',_0x8243ad)),await this['request'][_0x4d0df9(0x208)]('services/apexrest'+this[_0x4d0df9(0x212)]+_0x4d0df9(0x20e),{'messages':_0x12ee6a,'loggerId':this[_0x4d0df9(0x210)]});}catch(_0x20fc0a){this['logger'][_0x4d0df9(0x1d5)](_0x20fc0a);throw new internal_server_error_1['InternalServerError'](_0x20fc0a);}}async['createObject'](_0x79d952,_0x1e2376){const _0x4848df=a282_0x490c2f;try{const {data:_0x2bbb74}=await this[_0x4848df(0x20b)][_0x4848df(0x208)](_0x4848df(0x1f0)+constants_1[_0x4848df(0x1dc)]+_0x4848df(0x1d4)+_0x79d952+'/',_0x1e2376);return _0x2bbb74['id'];}catch(_0x5f2573){throw new salesforce_error_1['SalesforceError'](_0x5f2573);}}async['patchObject'](_0x582fe1,_0xf02f6c,_0x5e9031){const _0x247f4f=a282_0x490c2f;try{await this['request']['patch'](_0x247f4f(0x1f0)+constants_1['SALESFORCE_API_VERSION']+_0x247f4f(0x1d4)+_0x582fe1+'/'+_0xf02f6c,_0x5e9031);}catch(_0xde65d6){throw new salesforce_error_1[(_0x247f4f(0x218))](_0xde65d6);}}async[a282_0x490c2f(0x1ea)](_0x1e9c80){const _0x1cd688=a282_0x490c2f;try{const {data:_0x4fdfbd}=await this['request'][_0x1cd688(0x1db)](_0x1cd688(0x1ce)+this['namespace']+_0x1cd688(0x1d7),{'params':{'connectionId':_0x1e9c80}});return new connection_dto_1[(_0x1cd688(0x1eb))](_0x4fdfbd);}catch(_0x3cd989){throw new salesforce_error_1[(_0x1cd688(0x218))](_0x3cd989);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a282_0x490c2f(0x216)])({'transient':!![]}),__param(0x0,(0x0,typedi_1['Inject'])()),__metadata(a282_0x490c2f(0x1de),[salesforce_auth_service_1[a282_0x490c2f(0x1f1)]])],SalesforceService),exports[a282_0x490c2f(0x1f3)]=SalesforceService;