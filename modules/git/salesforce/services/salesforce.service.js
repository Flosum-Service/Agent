const a255_0x5580ac=a255_0x57ad;function a255_0x57ad(_0xdc4744,_0x365440){const _0x1955bd=a255_0x2711();return a255_0x57ad=function(_0x21fa1d,_0x2e2e38){_0x21fa1d=_0x21fa1d-0x111;let _0x2711a2=_0x1955bd[_0x21fa1d];return _0x2711a2;},a255_0x57ad(_0xdc4744,_0x365440);}(function(_0x1ff7ff,_0x5a09b4){const _0xd4e02e=a255_0x57ad,_0x344cc5=_0x1ff7ff();while(!![]){try{const _0x24cd5f=parseInt(_0xd4e02e(0x111))/0x1*(parseInt(_0xd4e02e(0x13f))/0x2)+parseInt(_0xd4e02e(0x15a))/0x3+-parseInt(_0xd4e02e(0x113))/0x4+parseInt(_0xd4e02e(0x14c))/0x5*(parseInt(_0xd4e02e(0x115))/0x6)+parseInt(_0xd4e02e(0x128))/0x7+parseInt(_0xd4e02e(0x15e))/0x8*(parseInt(_0xd4e02e(0x158))/0x9)+parseInt(_0xd4e02e(0x112))/0xa*(-parseInt(_0xd4e02e(0x137))/0xb);if(_0x24cd5f===_0x5a09b4)break;else _0x344cc5['push'](_0x344cc5['shift']());}catch(_0xc2f157){_0x344cc5['push'](_0x344cc5['shift']());}}}(a255_0x2711,0x4322d));const a255_0x2e2e38=(function(){let _0x4b1c4e=!![];return function(_0x16f178,_0x4e9719){const _0x15452a=_0x4b1c4e?function(){const _0x3652b9=a255_0x57ad;if(_0x4e9719){const _0x8aa7da=_0x4e9719[_0x3652b9(0x14b)](_0x16f178,arguments);return _0x4e9719=null,_0x8aa7da;}}:function(){};return _0x4b1c4e=![],_0x15452a;};}()),a255_0x21fa1d=a255_0x2e2e38(this,function(){const _0x108ba2=a255_0x57ad;return a255_0x21fa1d[_0x108ba2(0x139)]()[_0x108ba2(0x14a)](_0x108ba2(0x144))[_0x108ba2(0x139)]()[_0x108ba2(0x138)](a255_0x21fa1d)[_0x108ba2(0x14a)](_0x108ba2(0x144));});function a255_0x2711(){const _0x24a95f=['forEach','SALESFORCE_API_VERSION','../errors/salesforce.error','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','./salesforce-auth.service','../../../../constants','sendLog','9911bloUFi','constructor','toString','IGNORE_FLOSUM_GIT_NAMESPACE','text','createSalesforceRequest','/attachments','__metadata','2YDahNW','__decorate','function','createObject','/sobjects/','(((.+)+)+)+$','/body','../../../../core','internalLogger','logger','design:paramtypes','search','apply','52510PKbywD','patchObject','getLogger','Retrieve\x20attachment\x20%s\x20from\x20salesforce','error','/connection','ConnectionDto','get','__param','decorate','SalesforceService','[message]\x20%s','64494bUCCCQ','retrieveComponents','81102MlvXji','length','/logger','request','488HPTLrl','147581BnhGyE','4210zUAOpe','1299756mLbIux','typedi','120WKKLcI','SalesforceError','__esModule','post','SalesforceAuthService','fetchConnection','retrieveAttachment','deleteAttachment','setLoggerId','loggerId','defineProperty','name','log','Inject','object','delete','services/apexrest','arraybuffer','Logger','1102276fpviuM','/sobjects/Attachment/','./salesforce-logger.service','getOwnPropertyDescriptor','namespace','patch','metadata','../utils/create-request.util'];a255_0x2711=function(){return _0x24a95f;};return a255_0x2711();}a255_0x21fa1d();'use strict';var __decorate=this&&this[a255_0x5580ac(0x140)]||function(_0x27737d,_0x14d5d0,_0x41e901,_0x19ba36){const _0x307617=a255_0x5580ac;var _0x4f50a9=arguments[_0x307617(0x15b)],_0x32ddf2=_0x4f50a9<0x3?_0x14d5d0:_0x19ba36===null?_0x19ba36=Object[_0x307617(0x12b)](_0x14d5d0,_0x41e901):_0x19ba36,_0x82f887;if(typeof Reflect===_0x307617(0x123)&&typeof Reflect[_0x307617(0x155)]===_0x307617(0x141))_0x32ddf2=Reflect['decorate'](_0x27737d,_0x14d5d0,_0x41e901,_0x19ba36);else{for(var _0x37db2d=_0x27737d['length']-0x1;_0x37db2d>=0x0;_0x37db2d--)if(_0x82f887=_0x27737d[_0x37db2d])_0x32ddf2=(_0x4f50a9<0x3?_0x82f887(_0x32ddf2):_0x4f50a9>0x3?_0x82f887(_0x14d5d0,_0x41e901,_0x32ddf2):_0x82f887(_0x14d5d0,_0x41e901))||_0x32ddf2;}return _0x4f50a9>0x3&&_0x32ddf2&&Object[_0x307617(0x11f)](_0x14d5d0,_0x41e901,_0x32ddf2),_0x32ddf2;},__metadata=this&&this[a255_0x5580ac(0x13e)]||function(_0x3d39de,_0x1f7c95){const _0x1f4408=a255_0x5580ac;if(typeof Reflect===_0x1f4408(0x123)&&typeof Reflect[_0x1f4408(0x12e)]===_0x1f4408(0x141))return Reflect['metadata'](_0x3d39de,_0x1f7c95);},__param=this&&this[a255_0x5580ac(0x154)]||function(_0x5b16df,_0x381779){return function(_0x2be86c,_0x45f8a1){_0x381779(_0x2be86c,_0x45f8a1,_0x5b16df);};},SalesforceService_1;Object[a255_0x5580ac(0x11f)](exports,a255_0x5580ac(0x117),{'value':!![]}),exports[a255_0x5580ac(0x156)]=void 0x0;const typedi_1=require(a255_0x5580ac(0x114)),core_1=require(a255_0x5580ac(0x146)),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require(a255_0x5580ac(0x134)),constants_1=require(a255_0x5580ac(0x135)),create_request_util_1=require(a255_0x5580ac(0x12f)),salesforce_logger_service_1=require(a255_0x5580ac(0x12a)),salesforce_error_1=require(a255_0x5580ac(0x132)),connection_dto_1=require('../dto/connection.dto');let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x284440){const _0x47d3d1=a255_0x5580ac;this['logger']=new core_1[(_0x47d3d1(0x127))](SalesforceService_1[_0x47d3d1(0x120)]),this['request']=(0x0,create_request_util_1[_0x47d3d1(0x13c)])(_0x284440),this[_0x47d3d1(0x12c)]=constants_1[_0x47d3d1(0x13a)]?'':'/flosum_git';}[a255_0x5580ac(0x11d)](_0x24fd49){const _0x200f0a=a255_0x5580ac;this[_0x200f0a(0x11e)]=_0x24fd49,this[_0x200f0a(0x147)]=new salesforce_logger_service_1['SalesforceLogger'](this);}[a255_0x5580ac(0x14e)](){const _0x57a9b1=a255_0x5580ac;return this[_0x57a9b1(0x147)];}async[a255_0x5580ac(0x159)](_0x4f3296){const _0x36fdb9=a255_0x5580ac;try{this[_0x36fdb9(0x148)]['log'](_0x36fdb9(0x133),_0x4f3296[_0x36fdb9(0x15b)]);const _0x4d1f4f=await this['request']['post'](_0x36fdb9(0x125)+this[_0x36fdb9(0x12c)]+_0x36fdb9(0x13d),{'componentIds':_0x4f3296,'loggerId':this['loggerId']})['then'](({data:_0x4ff4b4})=>_0x4ff4b4);return _0x4d1f4f;}catch(_0x538ab0){this[_0x36fdb9(0x148)][_0x36fdb9(0x150)](_0x538ab0);throw new salesforce_error_1['SalesforceError'](_0x538ab0);}}async[a255_0x5580ac(0x11c)](_0x19a002){const _0x5e59f1=a255_0x5580ac;try{this[_0x5e59f1(0x148)][_0x5e59f1(0x121)]('Delete\x20attachment\x20%s\x20from\x20salesforce',_0x19a002),await this[_0x5e59f1(0x15d)][_0x5e59f1(0x124)]('services/data/'+constants_1[_0x5e59f1(0x131)]+_0x5e59f1(0x129)+_0x19a002);}catch(_0x234417){this[_0x5e59f1(0x148)]['error'](_0x234417);throw new salesforce_error_1[(_0x5e59f1(0x116))](_0x234417);}}async[a255_0x5580ac(0x11b)](_0x5f281b,_0x238c60=![]){const _0x1111ce=a255_0x5580ac;try{this['logger'][_0x1111ce(0x121)](_0x1111ce(0x14f),_0x5f281b);const _0xea59a0=await this['request'][_0x1111ce(0x153)]('services/data/'+constants_1[_0x1111ce(0x131)]+_0x1111ce(0x129)+_0x5f281b+_0x1111ce(0x145),{'responseType':_0x238c60?_0x1111ce(0x126):_0x1111ce(0x13b)})['then'](({data:_0x39dd18})=>_0x39dd18);return _0xea59a0;}catch(_0x2c4b3f){this[_0x1111ce(0x148)][_0x1111ce(0x150)](_0x2c4b3f);throw new salesforce_error_1[(_0x1111ce(0x116))](_0x2c4b3f);}}async[a255_0x5580ac(0x136)](_0x1e960b){const _0x33a199=a255_0x5580ac;try{_0x1e960b[_0x33a199(0x130)](_0x228a1e=>this[_0x33a199(0x148)][_0x33a199(0x121)](_0x33a199(0x157),_0x228a1e)),await this[_0x33a199(0x15d)][_0x33a199(0x118)](_0x33a199(0x125)+this[_0x33a199(0x12c)]+_0x33a199(0x15c),{'messages':_0x1e960b,'loggerId':this[_0x33a199(0x11e)]});}catch(_0x5b8c51){this[_0x33a199(0x148)][_0x33a199(0x150)](_0x5b8c51);throw new internal_server_error_1['InternalServerError'](_0x5b8c51);}}async[a255_0x5580ac(0x142)](_0x340b5d,_0x14ffa5){const _0x4ee29c=a255_0x5580ac;try{const {data:_0x4b0c53}=await this[_0x4ee29c(0x15d)][_0x4ee29c(0x118)]('services/data/'+constants_1[_0x4ee29c(0x131)]+_0x4ee29c(0x143)+_0x340b5d+'/',_0x14ffa5);return _0x4b0c53['id'];}catch(_0x3c33fe){throw new salesforce_error_1[(_0x4ee29c(0x116))](_0x3c33fe);}}async[a255_0x5580ac(0x14d)](_0x33e289,_0x5ca321,_0x598aca){const _0x5221f8=a255_0x5580ac;try{await this[_0x5221f8(0x15d)][_0x5221f8(0x12d)]('services/data/'+constants_1[_0x5221f8(0x131)]+'/sobjects/'+_0x33e289+'/'+_0x5ca321,_0x598aca);}catch(_0xf8c4e6){throw new salesforce_error_1[(_0x5221f8(0x116))](_0xf8c4e6);}}async[a255_0x5580ac(0x11a)](_0x5e057f){const _0x24cfa8=a255_0x5580ac;try{const {data:_0x294651}=await this['request'][_0x24cfa8(0x153)](_0x24cfa8(0x125)+this[_0x24cfa8(0x12c)]+_0x24cfa8(0x151),{'params':{'connectionId':_0x5e057f}});return new connection_dto_1[(_0x24cfa8(0x152))](_0x294651);}catch(_0x44f1a9){throw new salesforce_error_1[(_0x24cfa8(0x116))](_0x44f1a9);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a255_0x5580ac(0x122)])()),__metadata(a255_0x5580ac(0x149),[salesforce_auth_service_1[a255_0x5580ac(0x119)]])],SalesforceService),exports[a255_0x5580ac(0x156)]=SalesforceService;