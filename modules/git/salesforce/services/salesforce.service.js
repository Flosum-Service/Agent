const a245_0x6b523b=a245_0x5b6f;function a245_0x4040(){const _0x393df2=['18zYFGOa','./salesforce-logger.service','createObject','2hjLMPS','setLoggerId','decorate','services/data/','delete\x20attachment\x20%s\x20from\x20salesforce','namespace','3599264PhXHOX','__esModule','services/apexrest','Logger','retrieveComponents','internalLogger','__metadata','/attachments','../../../../core','/connection','ConnectionDto','deleteAttachment','get','SalesforceLogger','toString','2945808PjQKcE','length','1221565vYrEBq','error','../dto/connection.dto','metadata','/body','../errors/salesforce.error','/sobjects/Attachment/','fetchConnection','/sobjects/','text','(((.+)+)+)+$','SalesforceService','request','[message]\x20%s','440982cvPKFG','1441416BkzNPo','forEach','InternalServerError','SALESFORCE_API_VERSION','search','arraybuffer','design:paramtypes','constructor','loggerId','name','./salesforce-auth.service','function','object','SalesforceError','then','__decorate','getOwnPropertyDescriptor','typedi','IGNORE_FLOSUM_GIT_NAMESPACE','apply','patchObject','post','/logger','delete','__param','SalesforceAuthService','log','5346943rMPhnP','defineProperty','Inject','143056lAnYVz','../utils/create-request.util','logger'];a245_0x4040=function(){return _0x393df2;};return a245_0x4040();}(function(_0x4f84a1,_0x438a2d){const _0x420f85=a245_0x5b6f,_0x4bfe5d=_0x4f84a1();while(!![]){try{const _0x460a69=-parseInt(_0x420f85(0xce))/0x1+parseInt(_0x420f85(0xd4))/0x2*(-parseInt(_0x420f85(0xf9))/0x3)+parseInt(_0x420f85(0xda))/0x4+-parseInt(_0x420f85(0xeb))/0x5*(parseInt(_0x420f85(0xd1))/0x6)+parseInt(_0x420f85(0xcb))/0x7+parseInt(_0x420f85(0xfa))/0x8+-parseInt(_0x420f85(0xe9))/0x9;if(_0x460a69===_0x438a2d)break;else _0x4bfe5d['push'](_0x4bfe5d['shift']());}catch(_0xdf8493){_0x4bfe5d['push'](_0x4bfe5d['shift']());}}}(a245_0x4040,0x787e5));const a245_0x47010b=(function(){let _0x768a40=!![];return function(_0x325edf,_0x1c67e8){const _0x28b5bb=_0x768a40?function(){const _0x57852b=a245_0x5b6f;if(_0x1c67e8){const _0x1db5d3=_0x1c67e8[_0x57852b(0xc3)](_0x325edf,arguments);return _0x1c67e8=null,_0x1db5d3;}}:function(){};return _0x768a40=![],_0x28b5bb;};}()),a245_0xb02ae9=a245_0x47010b(this,function(){const _0x337dc9=a245_0x5b6f;return a245_0xb02ae9['toString']()['search'](_0x337dc9(0xf5))[_0x337dc9(0xe8)]()[_0x337dc9(0xb7)](a245_0xb02ae9)[_0x337dc9(0xb4)](_0x337dc9(0xf5));});a245_0xb02ae9();'use strict';var __decorate=this&&this[a245_0x6b523b(0xbf)]||function(_0x19d777,_0x596051,_0x135f4c,_0x4eb095){const _0x4d8a43=a245_0x6b523b;var _0x3ef78c=arguments[_0x4d8a43(0xea)],_0x11c67e=_0x3ef78c<0x3?_0x596051:_0x4eb095===null?_0x4eb095=Object[_0x4d8a43(0xc0)](_0x596051,_0x135f4c):_0x4eb095,_0x41bf67;if(typeof Reflect===_0x4d8a43(0xbc)&&typeof Reflect['decorate']===_0x4d8a43(0xbb))_0x11c67e=Reflect[_0x4d8a43(0xd6)](_0x19d777,_0x596051,_0x135f4c,_0x4eb095);else{for(var _0x39dc5a=_0x19d777[_0x4d8a43(0xea)]-0x1;_0x39dc5a>=0x0;_0x39dc5a--)if(_0x41bf67=_0x19d777[_0x39dc5a])_0x11c67e=(_0x3ef78c<0x3?_0x41bf67(_0x11c67e):_0x3ef78c>0x3?_0x41bf67(_0x596051,_0x135f4c,_0x11c67e):_0x41bf67(_0x596051,_0x135f4c))||_0x11c67e;}return _0x3ef78c>0x3&&_0x11c67e&&Object[_0x4d8a43(0xcc)](_0x596051,_0x135f4c,_0x11c67e),_0x11c67e;},__metadata=this&&this[a245_0x6b523b(0xe0)]||function(_0x3a6e9,_0x24bed0){const _0x37c1bb=a245_0x6b523b;if(typeof Reflect===_0x37c1bb(0xbc)&&typeof Reflect[_0x37c1bb(0xee)]===_0x37c1bb(0xbb))return Reflect[_0x37c1bb(0xee)](_0x3a6e9,_0x24bed0);},__param=this&&this[a245_0x6b523b(0xc8)]||function(_0x4bc0fd,_0x54554f){return function(_0x51b979,_0x59d90e){_0x54554f(_0x51b979,_0x59d90e,_0x4bc0fd);};},SalesforceService_1;Object[a245_0x6b523b(0xcc)](exports,a245_0x6b523b(0xdb),{'value':!![]}),exports['SalesforceService']=void 0x0;function a245_0x5b6f(_0x6419e0,_0x1e67ac){const _0x43f75c=a245_0x4040();return a245_0x5b6f=function(_0xb02ae9,_0x47010b){_0xb02ae9=_0xb02ae9-0xb4;let _0x40407d=_0x43f75c[_0xb02ae9];return _0x40407d;},a245_0x5b6f(_0x6419e0,_0x1e67ac);}const typedi_1=require(a245_0x6b523b(0xc1)),core_1=require(a245_0x6b523b(0xe2)),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require(a245_0x6b523b(0xba)),constants_1=require('../../../../constants'),create_request_util_1=require(a245_0x6b523b(0xcf)),salesforce_logger_service_1=require(a245_0x6b523b(0xd2)),salesforce_error_1=require(a245_0x6b523b(0xf0)),connection_dto_1=require(a245_0x6b523b(0xed));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x34e21d){const _0xc25c07=a245_0x6b523b;this['logger']=new core_1[(_0xc25c07(0xdd))](SalesforceService_1[_0xc25c07(0xb9)]),this[_0xc25c07(0xf7)]=(0x0,create_request_util_1['createSalesforceRequest'])(_0x34e21d),this['namespace']=constants_1[_0xc25c07(0xc2)]?'':'/flosum_git';}[a245_0x6b523b(0xd5)](_0x55ba62){const _0x5703e6=a245_0x6b523b;this[_0x5703e6(0xb8)]=_0x55ba62,this[_0x5703e6(0xdf)]=new salesforce_logger_service_1[(_0x5703e6(0xe7))](this);}['getLogger'](){return this['internalLogger'];}async[a245_0x6b523b(0xde)](_0x3a5b27){const _0x30bf41=a245_0x6b523b;try{this[_0x30bf41(0xd0)][_0x30bf41(0xca)]('retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x3a5b27[_0x30bf41(0xea)]);const _0x36bb70=await this[_0x30bf41(0xf7)][_0x30bf41(0xc5)](_0x30bf41(0xdc)+this[_0x30bf41(0xd9)]+_0x30bf41(0xe1),{'componentIds':_0x3a5b27,'loggerId':this[_0x30bf41(0xb8)]})[_0x30bf41(0xbe)](({data:_0x57b159})=>_0x57b159);return _0x36bb70;}catch(_0x54fcb7){this['logger'][_0x30bf41(0xec)](_0x54fcb7);throw new salesforce_error_1[(_0x30bf41(0xbd))](_0x54fcb7);}}async[a245_0x6b523b(0xe5)](_0x322202){const _0x5685b1=a245_0x6b523b;try{this[_0x5685b1(0xd0)]['log'](_0x5685b1(0xd8),_0x322202),await this[_0x5685b1(0xf7)][_0x5685b1(0xc7)](_0x5685b1(0xd7)+constants_1[_0x5685b1(0xfd)]+'/sobjects/Attachment/'+_0x322202);}catch(_0x5f3fca){this['logger'][_0x5685b1(0xec)](_0x5f3fca);throw new salesforce_error_1[(_0x5685b1(0xbd))](_0x5f3fca);}}async['retrieveAttachment'](_0x670e3f,_0x32f952=![]){const _0x152cc7=a245_0x6b523b;try{this['logger'][_0x152cc7(0xca)]('retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x670e3f);const _0x1e2d36=await this[_0x152cc7(0xf7)]['get']('services/data/'+constants_1[_0x152cc7(0xfd)]+_0x152cc7(0xf1)+_0x670e3f+_0x152cc7(0xef),{'responseType':_0x32f952?_0x152cc7(0xb5):_0x152cc7(0xf4)})['then'](({data:_0x1329d9})=>_0x1329d9);return _0x1e2d36;}catch(_0x42b53e){this[_0x152cc7(0xd0)][_0x152cc7(0xec)](_0x42b53e);throw new salesforce_error_1[(_0x152cc7(0xbd))](_0x42b53e);}}async['sendLog'](_0xf00746){const _0x3810ed=a245_0x6b523b;try{_0xf00746[_0x3810ed(0xfb)](_0x21dd20=>this['logger'][_0x3810ed(0xca)](_0x3810ed(0xf8),_0x21dd20)),await this[_0x3810ed(0xf7)][_0x3810ed(0xc5)](_0x3810ed(0xdc)+this[_0x3810ed(0xd9)]+_0x3810ed(0xc6),{'messages':_0xf00746,'loggerId':this[_0x3810ed(0xb8)]});}catch(_0x5af7c9){this['logger']['error'](_0x5af7c9);throw new internal_server_error_1[(_0x3810ed(0xfc))](_0x5af7c9);}}async[a245_0x6b523b(0xd3)](_0x5bb7dd,_0xe7adeb){const _0x58514c=a245_0x6b523b;try{const {data:_0x107edf}=await this[_0x58514c(0xf7)][_0x58514c(0xc5)](_0x58514c(0xd7)+constants_1['SALESFORCE_API_VERSION']+_0x58514c(0xf3)+_0x5bb7dd+'/',_0xe7adeb);return _0x107edf['id'];}catch(_0x63fa7f){throw new salesforce_error_1['SalesforceError'](_0x63fa7f);}}async[a245_0x6b523b(0xc4)](_0x2c6267,_0x443416,_0x34b786){const _0x842953=a245_0x6b523b;try{await this[_0x842953(0xf7)]['patch'](_0x842953(0xd7)+constants_1[_0x842953(0xfd)]+_0x842953(0xf3)+_0x2c6267+'/'+_0x443416,_0x34b786);}catch(_0x7a38ed){throw new salesforce_error_1[(_0x842953(0xbd))](_0x7a38ed);}}async[a245_0x6b523b(0xf2)](_0x533fe2){const _0x22084e=a245_0x6b523b;try{const {data:_0x4847ca}=await this[_0x22084e(0xf7)][_0x22084e(0xe6)]('services/apexrest'+this[_0x22084e(0xd9)]+_0x22084e(0xe3),{'params':{'connectionId':_0x533fe2}});return new connection_dto_1[(_0x22084e(0xe4))](_0x4847ca);}catch(_0xdaec11){throw new salesforce_error_1['SalesforceError'](_0xdaec11);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a245_0x6b523b(0xcd)])()),__metadata(a245_0x6b523b(0xb6),[salesforce_auth_service_1[a245_0x6b523b(0xc9)]])],SalesforceService),exports[a245_0x6b523b(0xf6)]=SalesforceService;