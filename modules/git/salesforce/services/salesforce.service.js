const a245_0x125834=a245_0x23dc;(function(_0x1550ba,_0x4cd3f3){const _0x360238=a245_0x23dc,_0x5a7a36=_0x1550ba();while(!![]){try{const _0x60507f=-parseInt(_0x360238(0x1b6))/0x1+parseInt(_0x360238(0x19e))/0x2*(parseInt(_0x360238(0x1cd))/0x3)+-parseInt(_0x360238(0x1bc))/0x4+parseInt(_0x360238(0x1b9))/0x5*(-parseInt(_0x360238(0x1d7))/0x6)+parseInt(_0x360238(0x1b2))/0x7+-parseInt(_0x360238(0x1db))/0x8+parseInt(_0x360238(0x1c6))/0x9;if(_0x60507f===_0x4cd3f3)break;else _0x5a7a36['push'](_0x5a7a36['shift']());}catch(_0x3a41a1){_0x5a7a36['push'](_0x5a7a36['shift']());}}}(a245_0x56cb,0x87412));const a245_0x18a659=(function(){let _0x1e7470=!![];return function(_0xc60e3e,_0x58b66a){const _0x5d348b=_0x1e7470?function(){const _0x1203c6=a245_0x23dc;if(_0x58b66a){const _0x2835b7=_0x58b66a[_0x1203c6(0x1e2)](_0xc60e3e,arguments);return _0x58b66a=null,_0x2835b7;}}:function(){};return _0x1e7470=![],_0x5d348b;};}()),a245_0x56a4aa=a245_0x18a659(this,function(){const _0x425004=a245_0x23dc;return a245_0x56a4aa['toString']()[_0x425004(0x1af)](_0x425004(0x1c3))[_0x425004(0x1b4)]()[_0x425004(0x1a9)](a245_0x56a4aa)[_0x425004(0x1af)](_0x425004(0x1c3));});a245_0x56a4aa();'use strict';var __decorate=this&&this['__decorate']||function(_0x2e6ba7,_0x3b83fb,_0x5cc537,_0x13e4bb){const _0x1a05c1=a245_0x23dc;var _0x19e363=arguments[_0x1a05c1(0x1c1)],_0x566b60=_0x19e363<0x3?_0x3b83fb:_0x13e4bb===null?_0x13e4bb=Object[_0x1a05c1(0x1ce)](_0x3b83fb,_0x5cc537):_0x13e4bb,_0x3b1114;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x1a05c1(0x1ad))_0x566b60=Reflect[_0x1a05c1(0x1c5)](_0x2e6ba7,_0x3b83fb,_0x5cc537,_0x13e4bb);else{for(var _0x4a434d=_0x2e6ba7[_0x1a05c1(0x1c1)]-0x1;_0x4a434d>=0x0;_0x4a434d--)if(_0x3b1114=_0x2e6ba7[_0x4a434d])_0x566b60=(_0x19e363<0x3?_0x3b1114(_0x566b60):_0x19e363>0x3?_0x3b1114(_0x3b83fb,_0x5cc537,_0x566b60):_0x3b1114(_0x3b83fb,_0x5cc537))||_0x566b60;}return _0x19e363>0x3&&_0x566b60&&Object[_0x1a05c1(0x1d1)](_0x3b83fb,_0x5cc537,_0x566b60),_0x566b60;},__metadata=this&&this[a245_0x125834(0x1c8)]||function(_0x5a02d8,_0x225cf5){const _0x35a1d1=a245_0x125834;if(typeof Reflect===_0x35a1d1(0x1c0)&&typeof Reflect[_0x35a1d1(0x1a1)]==='function')return Reflect[_0x35a1d1(0x1a1)](_0x5a02d8,_0x225cf5);},__param=this&&this['__param']||function(_0x1b6aa7,_0x386f18){return function(_0x55cbdd,_0x2f321d){_0x386f18(_0x55cbdd,_0x2f321d,_0x1b6aa7);};},SalesforceService_1;Object['defineProperty'](exports,a245_0x125834(0x1b3),{'value':!![]}),exports[a245_0x125834(0x1b7)]=void 0x0;function a245_0x23dc(_0x53ba3c,_0x3f6fb4){const _0x4b7a8e=a245_0x56cb();return a245_0x23dc=function(_0x56a4aa,_0x18a659){_0x56a4aa=_0x56a4aa-0x19c;let _0x56cbde=_0x4b7a8e[_0x56a4aa];return _0x56cbde;},a245_0x23dc(_0x53ba3c,_0x3f6fb4);}const typedi_1=require(a245_0x125834(0x1d5)),core_1=require(a245_0x125834(0x1cc)),internal_server_error_1=require(a245_0x125834(0x1da)),salesforce_auth_service_1=require(a245_0x125834(0x19f)),constants_1=require(a245_0x125834(0x1d4)),create_request_util_1=require(a245_0x125834(0x1ca)),salesforce_logger_service_1=require(a245_0x125834(0x1cb)),salesforce_error_1=require(a245_0x125834(0x1dc)),connection_dto_1=require('../dto/connection.dto');function a245_0x56cb(){const _0x1e8813=['decorate','27126630LxChLG','namespace','__metadata','delete','../utils/create-request.util','./salesforce-logger.service','../../../../core','33ZQjtMP','getOwnPropertyDescriptor','Logger','request','defineProperty','deleteAttachment','error','../../../../constants','typedi','[message]\x20%s','8220AVmTcd','Service','Inject','../../../../core/errors/internal-server.error','6553976rkekqG','../errors/salesforce.error','SALESFORCE_API_VERSION','loggerId','arraybuffer','logger','SalesforceError','apply','/sobjects/','InternalServerError','59016spGTae','./salesforce-auth.service','get','metadata','post','fetchConnection','createSalesforceRequest','/body','/sobjects/Attachment/','SalesforceLogger','internalLogger','constructor','name','design:paramtypes','/flosum_git','function','retrieve\x20attachment\x20%s\x20from\x20salesforce','search','ConnectionDto','services/data/','3698849KaewJZ','__esModule','toString','forEach','999188obtFlp','SalesforceService','retrieveAttachment','2305Hvunun','delete\x20attachment\x20%s\x20from\x20salesforce','/connection','3452232gLfgbx','services/apexrest','then','getLogger','object','length','SalesforceAuthService','(((.+)+)+)+$','log'];a245_0x56cb=function(){return _0x1e8813;};return a245_0x56cb();}let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x12ae0d){const _0x4f79a6=a245_0x125834;this[_0x4f79a6(0x1e0)]=new core_1[(_0x4f79a6(0x1cf))](SalesforceService_1[_0x4f79a6(0x1aa)]),this[_0x4f79a6(0x1d0)]=(0x0,create_request_util_1[_0x4f79a6(0x1a4)])(_0x12ae0d),this['namespace']=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':_0x4f79a6(0x1ac);}['setLoggerId'](_0x4c7157){const _0x361149=a245_0x125834;this[_0x361149(0x1de)]=_0x4c7157,this[_0x361149(0x1a8)]=new salesforce_logger_service_1[(_0x361149(0x1a7))](this);}[a245_0x125834(0x1bf)](){const _0x233699=a245_0x125834;return this[_0x233699(0x1a8)];}async['retrieveComponents'](_0x3bfbcf){const _0x38a93f=a245_0x125834;try{this[_0x38a93f(0x1e0)][_0x38a93f(0x1c4)]('retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x3bfbcf['length']);const _0x5aa239=await this[_0x38a93f(0x1d0)][_0x38a93f(0x1a2)](_0x38a93f(0x1bd)+this[_0x38a93f(0x1c7)]+'/attachments',{'componentIds':_0x3bfbcf,'loggerId':this[_0x38a93f(0x1de)]})[_0x38a93f(0x1be)](({data:_0x342967})=>_0x342967);return _0x5aa239;}catch(_0x3f190c){this[_0x38a93f(0x1e0)]['error'](_0x3f190c);throw new salesforce_error_1['SalesforceError'](_0x3f190c);}}async[a245_0x125834(0x1d2)](_0x34c834){const _0x2aaebe=a245_0x125834;try{this[_0x2aaebe(0x1e0)][_0x2aaebe(0x1c4)](_0x2aaebe(0x1ba),_0x34c834),await this[_0x2aaebe(0x1d0)][_0x2aaebe(0x1c9)](_0x2aaebe(0x1b1)+constants_1['SALESFORCE_API_VERSION']+_0x2aaebe(0x1a6)+_0x34c834);}catch(_0x1c8f92){this['logger'][_0x2aaebe(0x1d3)](_0x1c8f92);throw new salesforce_error_1['SalesforceError'](_0x1c8f92);}}async[a245_0x125834(0x1b8)](_0x2608a8,_0x2901ff=![]){const _0x42acc8=a245_0x125834;try{this[_0x42acc8(0x1e0)][_0x42acc8(0x1c4)](_0x42acc8(0x1ae),_0x2608a8);const _0x20c595=await this[_0x42acc8(0x1d0)]['get'](_0x42acc8(0x1b1)+constants_1[_0x42acc8(0x1dd)]+_0x42acc8(0x1a6)+_0x2608a8+_0x42acc8(0x1a5),{'responseType':_0x2901ff?_0x42acc8(0x1df):'text'})[_0x42acc8(0x1be)](({data:_0x1fe831})=>_0x1fe831);return _0x20c595;}catch(_0xdeca84){this[_0x42acc8(0x1e0)]['error'](_0xdeca84);throw new salesforce_error_1[(_0x42acc8(0x1e1))](_0xdeca84);}}async['sendLog'](_0x152f64){const _0x1aa080=a245_0x125834;try{_0x152f64[_0x1aa080(0x1b5)](_0x1555c4=>this['logger']['log'](_0x1aa080(0x1d6),_0x1555c4)),await this[_0x1aa080(0x1d0)][_0x1aa080(0x1a2)](_0x1aa080(0x1bd)+this[_0x1aa080(0x1c7)]+'/logger',{'messages':_0x152f64,'loggerId':this[_0x1aa080(0x1de)]});}catch(_0x8100ad){this[_0x1aa080(0x1e0)][_0x1aa080(0x1d3)](_0x8100ad);throw new internal_server_error_1[(_0x1aa080(0x19d))](_0x8100ad);}}async['createObject'](_0x45440e,_0x5b805f){const _0x16349d=a245_0x125834;try{const {data:_0x5eff9e}=await this[_0x16349d(0x1d0)][_0x16349d(0x1a2)]('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x16349d(0x19c)+_0x45440e+'/',_0x5b805f);return _0x5eff9e['id'];}catch(_0x191240){throw new salesforce_error_1[(_0x16349d(0x1e1))](_0x191240);}}async['patchObject'](_0x2cb7af,_0xf0931e,_0x5ed722){const _0x568065=a245_0x125834;try{await this['request']['patch'](_0x568065(0x1b1)+constants_1[_0x568065(0x1dd)]+_0x568065(0x19c)+_0x2cb7af+'/'+_0xf0931e,_0x5ed722);}catch(_0x2e69ee){throw new salesforce_error_1[(_0x568065(0x1e1))](_0x2e69ee);}}async[a245_0x125834(0x1a3)](_0x32e529){const _0x4cb4dd=a245_0x125834;try{const {data:_0x2243a9}=await this['request'][_0x4cb4dd(0x1a0)]('services/apexrest'+this[_0x4cb4dd(0x1c7)]+_0x4cb4dd(0x1bb),{'params':{'connectionId':_0x32e529}});return new connection_dto_1[(_0x4cb4dd(0x1b0))](_0x2243a9);}catch(_0x4f43b3){throw new salesforce_error_1['SalesforceError'](_0x4f43b3);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a245_0x125834(0x1d8)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a245_0x125834(0x1d9)])()),__metadata(a245_0x125834(0x1ab),[salesforce_auth_service_1[a245_0x125834(0x1c2)]])],SalesforceService),exports[a245_0x125834(0x1b7)]=SalesforceService;