const a245_0x253115=a245_0x9105;(function(_0x3398cf,_0x37a66c){const _0x5d5b38=a245_0x9105,_0x1bdfad=_0x3398cf();while(!![]){try{const _0xe8872=parseInt(_0x5d5b38(0x1b0))/0x1*(parseInt(_0x5d5b38(0x1c6))/0x2)+-parseInt(_0x5d5b38(0x180))/0x3+-parseInt(_0x5d5b38(0x1a5))/0x4+parseInt(_0x5d5b38(0x1c4))/0x5*(parseInt(_0x5d5b38(0x1ad))/0x6)+parseInt(_0x5d5b38(0x19f))/0x7*(-parseInt(_0x5d5b38(0x182))/0x8)+-parseInt(_0x5d5b38(0x196))/0x9*(parseInt(_0x5d5b38(0x185))/0xa)+parseInt(_0x5d5b38(0x1a3))/0xb;if(_0xe8872===_0x37a66c)break;else _0x1bdfad['push'](_0x1bdfad['shift']());}catch(_0x31c3ad){_0x1bdfad['push'](_0x1bdfad['shift']());}}}(a245_0x21f1,0x3a84a));function a245_0x9105(_0x49d33b,_0x8fe717){const _0x40e87a=a245_0x21f1();return a245_0x9105=function(_0x4f0297,_0x4e4566){_0x4f0297=_0x4f0297-0x17f;let _0x21f101=_0x40e87a[_0x4f0297];return _0x21f101;},a245_0x9105(_0x49d33b,_0x8fe717);}const a245_0x4e4566=(function(){let _0x501b26=!![];return function(_0x1b8acb,_0x433fea){const _0x4d6405=_0x501b26?function(){if(_0x433fea){const _0x36a847=_0x433fea['apply'](_0x1b8acb,arguments);return _0x433fea=null,_0x36a847;}}:function(){};return _0x501b26=![],_0x4d6405;};}()),a245_0x4f0297=a245_0x4e4566(this,function(){const _0x1cd6a2=a245_0x9105;return a245_0x4f0297[_0x1cd6a2(0x1a1)]()['search'](_0x1cd6a2(0x19c))['toString']()['constructor'](a245_0x4f0297)[_0x1cd6a2(0x194)](_0x1cd6a2(0x19c));});a245_0x4f0297();'use strict';var __decorate=this&&this[a245_0x253115(0x1bb)]||function(_0x4cc2c8,_0x3ac03f,_0x5acee0,_0x19e9a6){const _0x3c2706=a245_0x253115;var _0x1a7535=arguments['length'],_0x3702a6=_0x1a7535<0x3?_0x3ac03f:_0x19e9a6===null?_0x19e9a6=Object[_0x3c2706(0x1c1)](_0x3ac03f,_0x5acee0):_0x19e9a6,_0x1854b9;if(typeof Reflect==='object'&&typeof Reflect[_0x3c2706(0x183)]===_0x3c2706(0x181))_0x3702a6=Reflect[_0x3c2706(0x183)](_0x4cc2c8,_0x3ac03f,_0x5acee0,_0x19e9a6);else{for(var _0x48e89d=_0x4cc2c8[_0x3c2706(0x1b2)]-0x1;_0x48e89d>=0x0;_0x48e89d--)if(_0x1854b9=_0x4cc2c8[_0x48e89d])_0x3702a6=(_0x1a7535<0x3?_0x1854b9(_0x3702a6):_0x1a7535>0x3?_0x1854b9(_0x3ac03f,_0x5acee0,_0x3702a6):_0x1854b9(_0x3ac03f,_0x5acee0))||_0x3702a6;}return _0x1a7535>0x3&&_0x3702a6&&Object[_0x3c2706(0x1b9)](_0x3ac03f,_0x5acee0,_0x3702a6),_0x3702a6;},__metadata=this&&this[a245_0x253115(0x1bc)]||function(_0x19110b,_0x24edbd){const _0x8afe04=a245_0x253115;if(typeof Reflect===_0x8afe04(0x1a2)&&typeof Reflect['metadata']===_0x8afe04(0x181))return Reflect[_0x8afe04(0x186)](_0x19110b,_0x24edbd);},__param=this&&this['__param']||function(_0x49d456,_0x174380){return function(_0x19ef25,_0x38e095){_0x174380(_0x19ef25,_0x38e095,_0x49d456);};},SalesforceService_1;function a245_0x21f1(){const _0x2af78a=['retrieveComponents','586020UfBpcT','createSalesforceRequest','2pBcvDR','/sobjects/Attachment/','412902dPrEsy','function','3144896aunYjH','decorate','name','3847510VLxlrT','metadata','../dto/connection.dto','SalesforceError','then','request','retrieve\x20attachment\x20%s\x20from\x20salesforce','delete\x20attachment\x20%s\x20from\x20salesforce','../../../../core/errors/internal-server.error','/logger','./salesforce-logger.service','/connection','/sobjects/','delete','get','search','[message]\x20%s','9tkANwT','deleteAttachment','SalesforceService','loggerId','error','fetchConnection','(((.+)+)+)+$','logger','services/apexrest','7YVpRiO','SALESFORCE_API_VERSION','toString','object','8424515OzgQZX','retrieve\x20components\x20\x20%d\x20from\x20salesforce','1379956cqCyZE','forEach','namespace','SalesforceAuthService','/body','IGNORE_FLOSUM_GIT_NAMESPACE','../errors/salesforce.error','retrieveAttachment','18CtTgnM','log','getLogger','382699QjYOLQ','Service','length','sendLog','services/data/','__esModule','internalLogger','SalesforceLogger','design:paramtypes','defineProperty','Inject','__decorate','__metadata','../../../../core','post','setLoggerId','./salesforce-auth.service','getOwnPropertyDescriptor','text'];a245_0x21f1=function(){return _0x2af78a;};return a245_0x21f1();}Object[a245_0x253115(0x1b9)](exports,a245_0x253115(0x1b5),{'value':!![]}),exports['SalesforceService']=void 0x0;const typedi_1=require('typedi'),core_1=require(a245_0x253115(0x1bd)),internal_server_error_1=require(a245_0x253115(0x18d)),salesforce_auth_service_1=require(a245_0x253115(0x1c0)),constants_1=require('../../../../constants'),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require(a245_0x253115(0x18f)),salesforce_error_1=require(a245_0x253115(0x1ab)),connection_dto_1=require(a245_0x253115(0x187));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x51add1){const _0x14b457=a245_0x253115;this[_0x14b457(0x19d)]=new core_1['Logger'](SalesforceService_1[_0x14b457(0x184)]),this['request']=(0x0,create_request_util_1[_0x14b457(0x1c5)])(_0x51add1),this['namespace']=constants_1[_0x14b457(0x1aa)]?'':'/flosum_git';}[a245_0x253115(0x1bf)](_0x486df4){const _0x221b6b=a245_0x253115;this[_0x221b6b(0x199)]=_0x486df4,this[_0x221b6b(0x1b6)]=new salesforce_logger_service_1[(_0x221b6b(0x1b7))](this);}[a245_0x253115(0x1af)](){const _0x463d95=a245_0x253115;return this[_0x463d95(0x1b6)];}async[a245_0x253115(0x1c3)](_0x13681d){const _0x2f1147=a245_0x253115;try{this[_0x2f1147(0x19d)][_0x2f1147(0x1ae)](_0x2f1147(0x1a4),_0x13681d[_0x2f1147(0x1b2)]);const _0x36b55=await this['request'][_0x2f1147(0x1be)]('services/apexrest'+this[_0x2f1147(0x1a7)]+'/attachments',{'componentIds':_0x13681d,'loggerId':this[_0x2f1147(0x199)]})[_0x2f1147(0x189)](({data:_0x3f1579})=>_0x3f1579);return _0x36b55;}catch(_0x1f97bb){this[_0x2f1147(0x19d)][_0x2f1147(0x19a)](_0x1f97bb);throw new salesforce_error_1[(_0x2f1147(0x188))](_0x1f97bb);}}async[a245_0x253115(0x197)](_0x20cb8b){const _0x2b23ce=a245_0x253115;try{this[_0x2b23ce(0x19d)][_0x2b23ce(0x1ae)](_0x2b23ce(0x18c),_0x20cb8b),await this[_0x2b23ce(0x18a)][_0x2b23ce(0x192)](_0x2b23ce(0x1b4)+constants_1[_0x2b23ce(0x1a0)]+'/sobjects/Attachment/'+_0x20cb8b);}catch(_0x1d5db7){this[_0x2b23ce(0x19d)][_0x2b23ce(0x19a)](_0x1d5db7);throw new salesforce_error_1[(_0x2b23ce(0x188))](_0x1d5db7);}}async[a245_0x253115(0x1ac)](_0x214bcf,_0x3e05e6=![]){const _0x53610d=a245_0x253115;try{this[_0x53610d(0x19d)][_0x53610d(0x1ae)](_0x53610d(0x18b),_0x214bcf);const _0x403d93=await this[_0x53610d(0x18a)][_0x53610d(0x193)](_0x53610d(0x1b4)+constants_1[_0x53610d(0x1a0)]+_0x53610d(0x17f)+_0x214bcf+_0x53610d(0x1a9),{'responseType':_0x3e05e6?'arraybuffer':_0x53610d(0x1c2)})[_0x53610d(0x189)](({data:_0x17e181})=>_0x17e181);return _0x403d93;}catch(_0x38990d){this[_0x53610d(0x19d)][_0x53610d(0x19a)](_0x38990d);throw new salesforce_error_1[(_0x53610d(0x188))](_0x38990d);}}async[a245_0x253115(0x1b3)](_0x4472f0){const _0x5f3d9e=a245_0x253115;try{_0x4472f0[_0x5f3d9e(0x1a6)](_0x3d8760=>this['logger'][_0x5f3d9e(0x1ae)](_0x5f3d9e(0x195),_0x3d8760)),await this['request'][_0x5f3d9e(0x1be)](_0x5f3d9e(0x19e)+this['namespace']+_0x5f3d9e(0x18e),{'messages':_0x4472f0,'loggerId':this[_0x5f3d9e(0x199)]});}catch(_0x130845){this[_0x5f3d9e(0x19d)][_0x5f3d9e(0x19a)](_0x130845);throw new internal_server_error_1['InternalServerError'](_0x130845);}}async['createObject'](_0x5ab73e,_0x29660a){const _0x22006b=a245_0x253115;try{const {data:_0x481164}=await this[_0x22006b(0x18a)][_0x22006b(0x1be)]('services/data/'+constants_1[_0x22006b(0x1a0)]+_0x22006b(0x191)+_0x5ab73e+'/',_0x29660a);return _0x481164['id'];}catch(_0x10faac){throw new salesforce_error_1[(_0x22006b(0x188))](_0x10faac);}}async['patchObject'](_0x5f2c9b,_0x4b3634,_0x54f370){const _0x275faf=a245_0x253115;try{await this[_0x275faf(0x18a)]['patch'](_0x275faf(0x1b4)+constants_1[_0x275faf(0x1a0)]+_0x275faf(0x191)+_0x5f2c9b+'/'+_0x4b3634,_0x54f370);}catch(_0x579a38){throw new salesforce_error_1[(_0x275faf(0x188))](_0x579a38);}}async[a245_0x253115(0x19b)](_0x5f3269){const _0x58fb25=a245_0x253115;try{const {data:_0x5e84b6}=await this[_0x58fb25(0x18a)][_0x58fb25(0x193)](_0x58fb25(0x19e)+this['namespace']+_0x58fb25(0x190),{'params':{'connectionId':_0x5f3269}});return new connection_dto_1['ConnectionDto'](_0x5e84b6);}catch(_0x25f0f3){throw new salesforce_error_1[(_0x58fb25(0x188))](_0x25f0f3);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a245_0x253115(0x1b1)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a245_0x253115(0x1ba)])()),__metadata(a245_0x253115(0x1b8),[salesforce_auth_service_1[a245_0x253115(0x1a8)]])],SalesforceService),exports[a245_0x253115(0x198)]=SalesforceService;