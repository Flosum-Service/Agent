const a239_0x2fb924=a239_0x4417;function a239_0x34f1(){const _0x5ba863=['forEach','Logger','retrieveComponents','sendLog','/sobjects/','createSalesforceRequest','metadata','../dto/connection.dto','defineProperty','retrieve\x20attachment\x20%s\x20from\x20salesforce','SALESFORCE_API_VERSION','getLogger','9572664mpQFtQ','2242130LBrASf','ConnectionDto','2324697FGgUCl','Inject','SalesforceService','typedi','services/apexrest','1173587owWtpr','design:paramtypes','arraybuffer','error','5266270xNqmpY','function','./salesforce-logger.service','__esModule','__param','delete','/attachments','deleteAttachment','SalesforceError','services/data/','object','constructor','26714997OyKeJG','(((.+)+)+)+$','fetchConnection','8kBiTuz','patch','retrieve\x20components\x20\x20%d\x20from\x20salesforce','decorate','retrieveAttachment','/body','SalesforceAuthService','loggerId','[message]\x20%s','4llnNrh','/connection','length','namespace','then','request','5157348GFRNDC','./salesforce-auth.service','patchObject','log','internalLogger','/logger','name','__metadata','logger','IGNORE_FLOSUM_GIT_NAMESPACE','createObject','post','../../../../constants','get','setLoggerId','__decorate','toString'];a239_0x34f1=function(){return _0x5ba863;};return a239_0x34f1();}(function(_0x5be239,_0x3550a8){const _0x403715=a239_0x4417,_0x5db72e=_0x5be239();while(!![]){try{const _0x1f27da=-parseInt(_0x403715(0xd7))/0x1+parseInt(_0x403715(0x117))/0x2+-parseInt(_0x403715(0x119))/0x3+parseInt(_0x403715(0xf3))/0x4*(parseInt(_0x403715(0xdb))/0x5)+-parseInt(_0x403715(0x116))/0x6+-parseInt(_0x403715(0xf9))/0x7+parseInt(_0x403715(0xea))/0x8*(parseInt(_0x403715(0xe7))/0x9);if(_0x1f27da===_0x3550a8)break;else _0x5db72e['push'](_0x5db72e['shift']());}catch(_0x1e5f00){_0x5db72e['push'](_0x5db72e['shift']());}}}(a239_0x34f1,0xd2706));const a239_0x4dc015=(function(){let _0x8c7b8f=!![];return function(_0x26e174,_0x288d06){const _0x5362b6=_0x8c7b8f?function(){if(_0x288d06){const _0x2229af=_0x288d06['apply'](_0x26e174,arguments);return _0x288d06=null,_0x2229af;}}:function(){};return _0x8c7b8f=![],_0x5362b6;};}()),a239_0x1b8432=a239_0x4dc015(this,function(){const _0x48ad94=a239_0x4417;return a239_0x1b8432[_0x48ad94(0x109)]()['search'](_0x48ad94(0xe8))[_0x48ad94(0x109)]()[_0x48ad94(0xe6)](a239_0x1b8432)['search'](_0x48ad94(0xe8));});a239_0x1b8432();'use strict';var __decorate=this&&this[a239_0x2fb924(0x108)]||function(_0x8dd8f9,_0x31cec9,_0x278688,_0x5deb28){const _0x13a827=a239_0x2fb924;var _0x36da31=arguments['length'],_0x2489c1=_0x36da31<0x3?_0x31cec9:_0x5deb28===null?_0x5deb28=Object['getOwnPropertyDescriptor'](_0x31cec9,_0x278688):_0x5deb28,_0x4a7602;if(typeof Reflect===_0x13a827(0xe5)&&typeof Reflect[_0x13a827(0xed)]===_0x13a827(0xdc))_0x2489c1=Reflect[_0x13a827(0xed)](_0x8dd8f9,_0x31cec9,_0x278688,_0x5deb28);else{for(var _0x728203=_0x8dd8f9[_0x13a827(0xf5)]-0x1;_0x728203>=0x0;_0x728203--)if(_0x4a7602=_0x8dd8f9[_0x728203])_0x2489c1=(_0x36da31<0x3?_0x4a7602(_0x2489c1):_0x36da31>0x3?_0x4a7602(_0x31cec9,_0x278688,_0x2489c1):_0x4a7602(_0x31cec9,_0x278688))||_0x2489c1;}return _0x36da31>0x3&&_0x2489c1&&Object[_0x13a827(0x112)](_0x31cec9,_0x278688,_0x2489c1),_0x2489c1;},__metadata=this&&this[a239_0x2fb924(0x100)]||function(_0x20a90d,_0x223f31){const _0x890bd4=a239_0x2fb924;if(typeof Reflect===_0x890bd4(0xe5)&&typeof Reflect[_0x890bd4(0x110)]==='function')return Reflect[_0x890bd4(0x110)](_0x20a90d,_0x223f31);},__param=this&&this[a239_0x2fb924(0xdf)]||function(_0x3fb23b,_0x4bfb10){return function(_0x58de96,_0x283943){_0x4bfb10(_0x58de96,_0x283943,_0x3fb23b);};},SalesforceService_1;Object['defineProperty'](exports,a239_0x2fb924(0xde),{'value':!![]}),exports[a239_0x2fb924(0x11b)]=void 0x0;const typedi_1=require(a239_0x2fb924(0x11c)),core_1=require('../../../../core'),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require(a239_0x2fb924(0xfa)),constants_1=require(a239_0x2fb924(0x105)),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require(a239_0x2fb924(0xdd)),salesforce_error_1=require('../errors/salesforce.error'),connection_dto_1=require(a239_0x2fb924(0x111));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x3d9c02){const _0x439e80=a239_0x2fb924;this[_0x439e80(0x101)]=new core_1[(_0x439e80(0x10b))](SalesforceService_1[_0x439e80(0xff)]),this[_0x439e80(0xf8)]=(0x0,create_request_util_1[_0x439e80(0x10f)])(_0x3d9c02),this[_0x439e80(0xf6)]=constants_1[_0x439e80(0x102)]?'':'/flosum_git';}[a239_0x2fb924(0x107)](_0x3bd20c){const _0x5dca0a=a239_0x2fb924;this[_0x5dca0a(0xf1)]=_0x3bd20c,this[_0x5dca0a(0xfd)]=new salesforce_logger_service_1['SalesforceLogger'](this);}[a239_0x2fb924(0x115)](){const _0x25f550=a239_0x2fb924;return this[_0x25f550(0xfd)];}async[a239_0x2fb924(0x10c)](_0x2afe19){const _0x381571=a239_0x2fb924;try{this[_0x381571(0x101)][_0x381571(0xfc)](_0x381571(0xec),_0x2afe19[_0x381571(0xf5)]);const _0x2201da=await this['request'][_0x381571(0x104)](_0x381571(0xd6)+this[_0x381571(0xf6)]+_0x381571(0xe1),{'componentIds':_0x2afe19,'loggerId':this[_0x381571(0xf1)]})[_0x381571(0xf7)](({data:_0x1746d6})=>_0x1746d6);return _0x2201da;}catch(_0x3e4a14){this[_0x381571(0x101)]['error'](_0x3e4a14);throw new salesforce_error_1[(_0x381571(0xe3))](_0x3e4a14);}}async[a239_0x2fb924(0xe2)](_0x40f2aa){const _0x4b1781=a239_0x2fb924;try{this[_0x4b1781(0x101)][_0x4b1781(0xfc)]('delete\x20attachment\x20%s\x20from\x20salesforce',_0x40f2aa),await this[_0x4b1781(0xf8)][_0x4b1781(0xe0)](_0x4b1781(0xe4)+constants_1[_0x4b1781(0x114)]+'/sobjects/Attachment/'+_0x40f2aa);}catch(_0x449020){this[_0x4b1781(0x101)]['error'](_0x449020);throw new salesforce_error_1['SalesforceError'](_0x449020);}}async[a239_0x2fb924(0xee)](_0x374449,_0x252fde=![]){const _0x16f0bd=a239_0x2fb924;try{this['logger'][_0x16f0bd(0xfc)](_0x16f0bd(0x113),_0x374449);const _0x32339a=await this[_0x16f0bd(0xf8)][_0x16f0bd(0x106)]('services/data/'+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment/'+_0x374449+_0x16f0bd(0xef),{'responseType':_0x252fde?_0x16f0bd(0xd9):'text'})['then'](({data:_0x54d956})=>_0x54d956);return _0x32339a;}catch(_0x1e69c8){this[_0x16f0bd(0x101)][_0x16f0bd(0xda)](_0x1e69c8);throw new salesforce_error_1[(_0x16f0bd(0xe3))](_0x1e69c8);}}async[a239_0x2fb924(0x10d)](_0x2522d3){const _0x261c17=a239_0x2fb924;try{_0x2522d3[_0x261c17(0x10a)](_0x19351d=>this[_0x261c17(0x101)][_0x261c17(0xfc)](_0x261c17(0xf2),_0x19351d)),await this[_0x261c17(0xf8)][_0x261c17(0x104)]('services/apexrest'+this[_0x261c17(0xf6)]+_0x261c17(0xfe),{'messages':_0x2522d3,'loggerId':this[_0x261c17(0xf1)]});}catch(_0x1216a0){this[_0x261c17(0x101)][_0x261c17(0xda)](_0x1216a0);throw new internal_server_error_1['InternalServerError'](_0x1216a0);}}async[a239_0x2fb924(0x103)](_0x334ca4,_0x419015){const _0xbb5814=a239_0x2fb924;try{const {data:_0x5a5275}=await this[_0xbb5814(0xf8)][_0xbb5814(0x104)](_0xbb5814(0xe4)+constants_1[_0xbb5814(0x114)]+_0xbb5814(0x10e)+_0x334ca4+'/',_0x419015);return _0x5a5275['id'];}catch(_0xb095c7){throw new salesforce_error_1['SalesforceError'](_0xb095c7);}}async[a239_0x2fb924(0xfb)](_0x31e113,_0x18296d,_0x1f5305){const _0x18e8bd=a239_0x2fb924;try{await this[_0x18e8bd(0xf8)][_0x18e8bd(0xeb)](_0x18e8bd(0xe4)+constants_1[_0x18e8bd(0x114)]+'/sobjects/'+_0x31e113+'/'+_0x18296d,_0x1f5305);}catch(_0x10f78a){throw new salesforce_error_1[(_0x18e8bd(0xe3))](_0x10f78a);}}async[a239_0x2fb924(0xe9)](_0x39dc16){const _0x47be9e=a239_0x2fb924;try{const {data:_0x4eb8a8}=await this[_0x47be9e(0xf8)]['get'](_0x47be9e(0xd6)+this['namespace']+_0x47be9e(0xf4),{'params':{'connectionId':_0x39dc16}});return new connection_dto_1[(_0x47be9e(0x118))](_0x4eb8a8);}catch(_0x5cd3ee){throw new salesforce_error_1[(_0x47be9e(0xe3))](_0x5cd3ee);}}};function a239_0x4417(_0x6b0919,_0x1b6e6){const _0x403f9a=a239_0x34f1();return a239_0x4417=function(_0x1b8432,_0x4dc015){_0x1b8432=_0x1b8432-0xd6;let _0x34f10c=_0x403f9a[_0x1b8432];return _0x34f10c;},a239_0x4417(_0x6b0919,_0x1b6e6);}SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a239_0x2fb924(0x11a)])()),__metadata(a239_0x2fb924(0xd8),[salesforce_auth_service_1[a239_0x2fb924(0xf0)]])],SalesforceService),exports['SalesforceService']=SalesforceService;