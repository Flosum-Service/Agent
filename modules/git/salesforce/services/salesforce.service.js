const a245_0x54d67e=a245_0x56da;(function(_0x266d4c,_0x3f543){const _0x5417eb=a245_0x56da,_0x24f174=_0x266d4c();while(!![]){try{const _0x293b44=-parseInt(_0x5417eb(0x141))/0x1+-parseInt(_0x5417eb(0x13d))/0x2+parseInt(_0x5417eb(0x13b))/0x3+-parseInt(_0x5417eb(0x12a))/0x4+-parseInt(_0x5417eb(0x143))/0x5*(-parseInt(_0x5417eb(0x14d))/0x6)+-parseInt(_0x5417eb(0x129))/0x7*(-parseInt(_0x5417eb(0x135))/0x8)+-parseInt(_0x5417eb(0x158))/0x9;if(_0x293b44===_0x3f543)break;else _0x24f174['push'](_0x24f174['shift']());}catch(_0x490ed9){_0x24f174['push'](_0x24f174['shift']());}}}(a245_0x19fe,0x6eee6));const a245_0x3a309a=(function(){let _0x267648=!![];return function(_0x20db44,_0x50a57e){const _0x34f957=_0x267648?function(){const _0x26b20d=a245_0x56da;if(_0x50a57e){const _0x308732=_0x50a57e[_0x26b20d(0x15b)](_0x20db44,arguments);return _0x50a57e=null,_0x308732;}}:function(){};return _0x267648=![],_0x34f957;};}()),a245_0x28f2aa=a245_0x3a309a(this,function(){const _0x2a716e=a245_0x56da;return a245_0x28f2aa[_0x2a716e(0x139)]()[_0x2a716e(0x144)](_0x2a716e(0x15a))[_0x2a716e(0x139)]()[_0x2a716e(0x14c)](a245_0x28f2aa)['search']('(((.+)+)+)+$');});a245_0x28f2aa();'use strict';var __decorate=this&&this[a245_0x54d67e(0x136)]||function(_0x17a643,_0x12a6bb,_0x4a1af6,_0x23e1fc){const _0x5bb7a7=a245_0x54d67e;var _0x23d9f8=arguments[_0x5bb7a7(0x15e)],_0x360184=_0x23d9f8<0x3?_0x12a6bb:_0x23e1fc===null?_0x23e1fc=Object[_0x5bb7a7(0x16d)](_0x12a6bb,_0x4a1af6):_0x23e1fc,_0x431faa;if(typeof Reflect===_0x5bb7a7(0x16b)&&typeof Reflect[_0x5bb7a7(0x14a)]==='function')_0x360184=Reflect['decorate'](_0x17a643,_0x12a6bb,_0x4a1af6,_0x23e1fc);else{for(var _0x54b71b=_0x17a643['length']-0x1;_0x54b71b>=0x0;_0x54b71b--)if(_0x431faa=_0x17a643[_0x54b71b])_0x360184=(_0x23d9f8<0x3?_0x431faa(_0x360184):_0x23d9f8>0x3?_0x431faa(_0x12a6bb,_0x4a1af6,_0x360184):_0x431faa(_0x12a6bb,_0x4a1af6))||_0x360184;}return _0x23d9f8>0x3&&_0x360184&&Object[_0x5bb7a7(0x147)](_0x12a6bb,_0x4a1af6,_0x360184),_0x360184;},__metadata=this&&this[a245_0x54d67e(0x137)]||function(_0x3228e1,_0x111e6c){const _0x194d0e=a245_0x54d67e;if(typeof Reflect===_0x194d0e(0x16b)&&typeof Reflect['metadata']==='function')return Reflect[_0x194d0e(0x165)](_0x3228e1,_0x111e6c);},__param=this&&this['__param']||function(_0x1f7db7,_0x1aff30){return function(_0x3a01b3,_0x3e2e85){_0x1aff30(_0x3a01b3,_0x3e2e85,_0x1f7db7);};},SalesforceService_1;Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a245_0x54d67e(0x157)]=void 0x0;const typedi_1=require('typedi'),core_1=require(a245_0x54d67e(0x167)),internal_server_error_1=require(a245_0x54d67e(0x13c)),salesforce_auth_service_1=require(a245_0x54d67e(0x14f)),constants_1=require(a245_0x54d67e(0x159)),create_request_util_1=require(a245_0x54d67e(0x132)),salesforce_logger_service_1=require('./salesforce-logger.service'),salesforce_error_1=require('../errors/salesforce.error'),connection_dto_1=require(a245_0x54d67e(0x134));function a245_0x19fe(){const _0x2c5629=['870372EGmPtK','../../../../core/errors/internal-server.error','1561910GgARsy','then','/body','namespace','122510jKTHyU','text','292255fWwTLJ','search','forEach','get','defineProperty','arraybuffer','services/data/','decorate','loggerId','constructor','60gAIQiT','patch','./salesforce-auth.service','retrieve\x20components\x20\x20%d\x20from\x20salesforce','error','Inject','SALESFORCE_API_VERSION','Logger','retrieveComponents','deleteAttachment','SalesforceService','1503954LareAS','../../../../constants','(((.+)+)+)+$','apply','/sobjects/Attachment/','/sobjects/','length','delete','setLoggerId','request','patchObject','retrieve\x20attachment\x20%s\x20from\x20salesforce','ConnectionDto','metadata','retrieveAttachment','../../../../core','InternalServerError','IGNORE_FLOSUM_GIT_NAMESPACE','createObject','object','name','getOwnPropertyDescriptor','35WQtPNK','240336ZLeqUX','getLogger','SalesforceLogger','logger','/attachments','post','services/apexrest','SalesforceError','../utils/create-request.util','log','../dto/connection.dto','1136632ajvwlh','__decorate','__metadata','internalLogger','toString','/connection'];a245_0x19fe=function(){return _0x2c5629;};return a245_0x19fe();}let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x4e9861){const _0x468949=a245_0x54d67e;this['logger']=new core_1[(_0x468949(0x154))](SalesforceService_1[_0x468949(0x16c)]),this[_0x468949(0x161)]=(0x0,create_request_util_1['createSalesforceRequest'])(_0x4e9861),this[_0x468949(0x140)]=constants_1[_0x468949(0x169)]?'':'/flosum_git';}[a245_0x54d67e(0x160)](_0xc65b1b){const _0x33b041=a245_0x54d67e;this[_0x33b041(0x14b)]=_0xc65b1b,this[_0x33b041(0x138)]=new salesforce_logger_service_1[(_0x33b041(0x12c))](this);}[a245_0x54d67e(0x12b)](){const _0x40b55e=a245_0x54d67e;return this[_0x40b55e(0x138)];}async[a245_0x54d67e(0x155)](_0x3afbc7){const _0x36f1b2=a245_0x54d67e;try{this[_0x36f1b2(0x12d)][_0x36f1b2(0x133)](_0x36f1b2(0x150),_0x3afbc7[_0x36f1b2(0x15e)]);const _0x4a16c0=await this[_0x36f1b2(0x161)]['post'](_0x36f1b2(0x130)+this[_0x36f1b2(0x140)]+_0x36f1b2(0x12e),{'componentIds':_0x3afbc7,'loggerId':this[_0x36f1b2(0x14b)]})[_0x36f1b2(0x13e)](({data:_0x3acd12})=>_0x3acd12);return _0x4a16c0;}catch(_0x2529b3){this[_0x36f1b2(0x12d)][_0x36f1b2(0x151)](_0x2529b3);throw new salesforce_error_1[(_0x36f1b2(0x131))](_0x2529b3);}}async[a245_0x54d67e(0x156)](_0x42bb35){const _0x28d5b4=a245_0x54d67e;try{this[_0x28d5b4(0x12d)][_0x28d5b4(0x133)]('delete\x20attachment\x20%s\x20from\x20salesforce',_0x42bb35),await this[_0x28d5b4(0x161)][_0x28d5b4(0x15f)](_0x28d5b4(0x149)+constants_1['SALESFORCE_API_VERSION']+_0x28d5b4(0x15c)+_0x42bb35);}catch(_0x5310b0){this[_0x28d5b4(0x12d)]['error'](_0x5310b0);throw new salesforce_error_1['SalesforceError'](_0x5310b0);}}async[a245_0x54d67e(0x166)](_0x29e35e,_0x2f17a9=![]){const _0x516f19=a245_0x54d67e;try{this[_0x516f19(0x12d)][_0x516f19(0x133)](_0x516f19(0x163),_0x29e35e);const _0x318b1c=await this[_0x516f19(0x161)][_0x516f19(0x146)](_0x516f19(0x149)+constants_1[_0x516f19(0x153)]+_0x516f19(0x15c)+_0x29e35e+_0x516f19(0x13f),{'responseType':_0x2f17a9?_0x516f19(0x148):_0x516f19(0x142)})['then'](({data:_0x42f034})=>_0x42f034);return _0x318b1c;}catch(_0x3a5c05){this['logger'][_0x516f19(0x151)](_0x3a5c05);throw new salesforce_error_1[(_0x516f19(0x131))](_0x3a5c05);}}async['sendLog'](_0x28fd20){const _0x42571a=a245_0x54d67e;try{_0x28fd20[_0x42571a(0x145)](_0xd28ca3=>this['logger'][_0x42571a(0x133)]('[message]\x20%s',_0xd28ca3)),await this[_0x42571a(0x161)][_0x42571a(0x12f)](_0x42571a(0x130)+this[_0x42571a(0x140)]+'/logger',{'messages':_0x28fd20,'loggerId':this[_0x42571a(0x14b)]});}catch(_0xb934de){this['logger'][_0x42571a(0x151)](_0xb934de);throw new internal_server_error_1[(_0x42571a(0x168))](_0xb934de);}}async[a245_0x54d67e(0x16a)](_0x5ba03f,_0x5c4a34){const _0x551450=a245_0x54d67e;try{const {data:_0x8e880e}=await this[_0x551450(0x161)]['post'](_0x551450(0x149)+constants_1[_0x551450(0x153)]+_0x551450(0x15d)+_0x5ba03f+'/',_0x5c4a34);return _0x8e880e['id'];}catch(_0x9a7e3f){throw new salesforce_error_1[(_0x551450(0x131))](_0x9a7e3f);}}async[a245_0x54d67e(0x162)](_0x321be4,_0x57d39a,_0x35c55e){const _0x1b9de2=a245_0x54d67e;try{await this['request'][_0x1b9de2(0x14e)](_0x1b9de2(0x149)+constants_1[_0x1b9de2(0x153)]+_0x1b9de2(0x15d)+_0x321be4+'/'+_0x57d39a,_0x35c55e);}catch(_0x27feb8){throw new salesforce_error_1[(_0x1b9de2(0x131))](_0x27feb8);}}async['fetchConnection'](_0x26366c){const _0x3ebaad=a245_0x54d67e;try{const {data:_0x3d08c0}=await this[_0x3ebaad(0x161)]['get']('services/apexrest'+this['namespace']+_0x3ebaad(0x13a),{'params':{'connectionId':_0x26366c}});return new connection_dto_1[(_0x3ebaad(0x164))](_0x3d08c0);}catch(_0x2dbc60){throw new salesforce_error_1['SalesforceError'](_0x2dbc60);}}};function a245_0x56da(_0x3d0789,_0x5d9e1e){const _0x2f3db3=a245_0x19fe();return a245_0x56da=function(_0x28f2aa,_0x3a309a){_0x28f2aa=_0x28f2aa-0x129;let _0x19feb3=_0x2f3db3[_0x28f2aa];return _0x19feb3;},a245_0x56da(_0x3d0789,_0x5d9e1e);}SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a245_0x54d67e(0x152)])()),__metadata('design:paramtypes',[salesforce_auth_service_1['SalesforceAuthService']])],SalesforceService),exports['SalesforceService']=SalesforceService;