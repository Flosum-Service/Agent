const a284_0x1f480c=a284_0x2733;(function(_0x4afe37,_0x48ccf7){const _0xd99e6a=a284_0x2733,_0xe32ed3=_0x4afe37();while(!![]){try{const _0x4a3ab5=parseInt(_0xd99e6a(0x191))/0x1+-parseInt(_0xd99e6a(0x17b))/0x2+-parseInt(_0xd99e6a(0x170))/0x3+parseInt(_0xd99e6a(0x196))/0x4+-parseInt(_0xd99e6a(0x1af))/0x5*(-parseInt(_0xd99e6a(0x180))/0x6)+parseInt(_0xd99e6a(0x1a5))/0x7*(parseInt(_0xd99e6a(0x1b3))/0x8)+parseInt(_0xd99e6a(0x18e))/0x9*(parseInt(_0xd99e6a(0x192))/0xa);if(_0x4a3ab5===_0x48ccf7)break;else _0xe32ed3['push'](_0xe32ed3['shift']());}catch(_0x24f21a){_0xe32ed3['push'](_0xe32ed3['shift']());}}}(a284_0x1873,0x8b9f6));const a284_0x24c55f=(function(){let _0x592c91=!![];return function(_0x594e9e,_0x46109d){const _0x5b6dde=_0x592c91?function(){if(_0x46109d){const _0x393a9e=_0x46109d['apply'](_0x594e9e,arguments);return _0x46109d=null,_0x393a9e;}}:function(){};return _0x592c91=![],_0x5b6dde;};}()),a284_0x57685f=a284_0x24c55f(this,function(){const _0x32b6fd=a284_0x2733;return a284_0x57685f['toString']()[_0x32b6fd(0x1b5)]('(((.+)+)+)+$')[_0x32b6fd(0x17c)]()[_0x32b6fd(0x197)](a284_0x57685f)[_0x32b6fd(0x1b5)](_0x32b6fd(0x182));});a284_0x57685f();function a284_0x2733(_0x2106ac,_0x506af3){const _0x580c63=a284_0x1873();return a284_0x2733=function(_0x57685f,_0x24c55f){_0x57685f=_0x57685f-0x16f;let _0x187384=_0x580c63[_0x57685f];return _0x187384;},a284_0x2733(_0x2106ac,_0x506af3);}'use strict';var __decorate=this&&this[a284_0x1f480c(0x1ab)]||function(_0x3cb442,_0x1b0483,_0xb6f4df,_0x410d15){const _0x440362=a284_0x1f480c;var _0x3c40fe=arguments[_0x440362(0x17d)],_0x4dfd41=_0x3c40fe<0x3?_0x1b0483:_0x410d15===null?_0x410d15=Object[_0x440362(0x176)](_0x1b0483,_0xb6f4df):_0x410d15,_0x2664d4;if(typeof Reflect===_0x440362(0x1b4)&&typeof Reflect[_0x440362(0x18f)]===_0x440362(0x1b8))_0x4dfd41=Reflect['decorate'](_0x3cb442,_0x1b0483,_0xb6f4df,_0x410d15);else{for(var _0x1f1834=_0x3cb442[_0x440362(0x17d)]-0x1;_0x1f1834>=0x0;_0x1f1834--)if(_0x2664d4=_0x3cb442[_0x1f1834])_0x4dfd41=(_0x3c40fe<0x3?_0x2664d4(_0x4dfd41):_0x3c40fe>0x3?_0x2664d4(_0x1b0483,_0xb6f4df,_0x4dfd41):_0x2664d4(_0x1b0483,_0xb6f4df))||_0x4dfd41;}return _0x3c40fe>0x3&&_0x4dfd41&&Object[_0x440362(0x17e)](_0x1b0483,_0xb6f4df,_0x4dfd41),_0x4dfd41;},__metadata=this&&this[a284_0x1f480c(0x1a1)]||function(_0x9e5f92,_0x3d05ed){const _0x28c7cd=a284_0x1f480c;if(typeof Reflect===_0x28c7cd(0x1b4)&&typeof Reflect[_0x28c7cd(0x19a)]==='function')return Reflect['metadata'](_0x9e5f92,_0x3d05ed);},__param=this&&this[a284_0x1f480c(0x194)]||function(_0x29b76c,_0x54503d){return function(_0x2aff9b,_0x2f4ab6){_0x54503d(_0x2aff9b,_0x2f4ab6,_0x29b76c);};},SalesforceService_1;Object[a284_0x1f480c(0x17e)](exports,a284_0x1f480c(0x19d),{'value':!![]}),exports[a284_0x1f480c(0x185)]=void 0x0;function a284_0x1873(){const _0x32828a=['request','../errors/salesforce.error','error','__metadata','InternalServerError','../utils/create-request.util','createObject','5061217BvSdjN','then','Delete\x20attachment\x20%s\x20from\x20salesforce','BulkComponentsRetriever','arraybuffer','services/apexrest','__decorate','sendLog','retrieveComponents','patchObject','336065vvOuBB','get','SALESFORCE_API_VERSION','internalLogger','8GalhNg','object','search','Retrieve\x20attachment\x20%s\x20from\x20salesforce','fetchConnection','function','./salesforce-auth.service','text','ConnectionDto','2021274wxNzHP','IGNORE_FLOSUM_GIT_NAMESPACE','../dto/connection.dto','services/data/','patch','/sobjects/Attachment/','getOwnPropertyDescriptor','design:paramtypes','typedi','Service','../../../../core','1663108SsOOFf','toString','length','defineProperty','Logger','24rsfOXh','namespace','(((.+)+)+)+$','post','logger','SalesforceService','retrieveAttachment','/sobjects/','SalesforceError','log','retrieve','[message]\x20%s','../../../../constants','Inject','1467OBwciN','decorate','createSalesforceRequest','505238Xofuuj','19010faJqtk','./salesforce-logger.service','__param','setLoggerId','1080888WEAFxh','constructor','/body','getLogger','metadata','loggerId','SalesforceAuthService','__esModule'];a284_0x1873=function(){return _0x32828a;};return a284_0x1873();}const typedi_1=require(a284_0x1f480c(0x178)),core_1=require(a284_0x1f480c(0x17a)),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require(a284_0x1f480c(0x1b9)),constants_1=require(a284_0x1f480c(0x18c)),create_request_util_1=require(a284_0x1f480c(0x1a3)),salesforce_logger_service_1=require(a284_0x1f480c(0x193)),salesforce_error_1=require(a284_0x1f480c(0x19f)),connection_dto_1=require(a284_0x1f480c(0x172)),bulk_components_retriever_1=require('../classes/bulk-components-retriever');let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x21b6c3){const _0x3ec8d9=a284_0x1f480c;this[_0x3ec8d9(0x184)]=new core_1[(_0x3ec8d9(0x17f))](SalesforceService_1['name']),this[_0x3ec8d9(0x19e)]=(0x0,create_request_util_1[_0x3ec8d9(0x190)])(_0x21b6c3),this[_0x3ec8d9(0x181)]=constants_1[_0x3ec8d9(0x171)]?'':'/flosum_git';}[a284_0x1f480c(0x195)](_0x16181c){const _0x236520=a284_0x1f480c;this[_0x236520(0x19b)]=_0x16181c,this[_0x236520(0x1b2)]=new salesforce_logger_service_1['SalesforceLogger'](this);}[a284_0x1f480c(0x199)](){return this['internalLogger'];}async[a284_0x1f480c(0x1ad)](_0x16b718){const _0x420c3b=a284_0x1f480c;try{this['logger'][_0x420c3b(0x189)]('Retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x16b718[_0x420c3b(0x17d)]);const _0x5c0836=new bulk_components_retriever_1[(_0x420c3b(0x1a8))]({'request':this[_0x420c3b(0x19e)],'ids':_0x16b718}),_0x453a78=await _0x5c0836[_0x420c3b(0x18a)]();return _0x453a78;}catch(_0x15189d){this[_0x420c3b(0x184)]['error'](_0x15189d);throw new salesforce_error_1[(_0x420c3b(0x188))](_0x15189d);}}async['deleteAttachment'](_0x485250){const _0x56a86c=a284_0x1f480c;try{this[_0x56a86c(0x184)][_0x56a86c(0x189)](_0x56a86c(0x1a7),_0x485250),await this[_0x56a86c(0x19e)]['delete'](_0x56a86c(0x173)+constants_1[_0x56a86c(0x1b1)]+_0x56a86c(0x175)+_0x485250);}catch(_0x93fac1){this[_0x56a86c(0x184)][_0x56a86c(0x1a0)](_0x93fac1);throw new salesforce_error_1['SalesforceError'](_0x93fac1);}}async[a284_0x1f480c(0x186)](_0x500166,_0x5e54d1=![]){const _0x1beaff=a284_0x1f480c;try{this[_0x1beaff(0x184)]['log'](_0x1beaff(0x1b6),_0x500166);const _0x52b600=await this['request'][_0x1beaff(0x1b0)]('services/data/'+constants_1[_0x1beaff(0x1b1)]+_0x1beaff(0x175)+_0x500166+_0x1beaff(0x198),{'responseType':_0x5e54d1?_0x1beaff(0x1a9):_0x1beaff(0x1ba)})[_0x1beaff(0x1a6)](({data:_0x810674})=>_0x810674);return _0x52b600;}catch(_0xebc6fe){this[_0x1beaff(0x184)]['error'](_0xebc6fe);throw new salesforce_error_1['SalesforceError'](_0xebc6fe);}}async[a284_0x1f480c(0x1ac)](_0x288167){const _0xc3bdd1=a284_0x1f480c;try{_0x288167['forEach'](_0x1ca219=>this[_0xc3bdd1(0x184)][_0xc3bdd1(0x189)](_0xc3bdd1(0x18b),_0x1ca219)),await this[_0xc3bdd1(0x19e)][_0xc3bdd1(0x183)](_0xc3bdd1(0x1aa)+this['namespace']+'/logger',{'messages':_0x288167,'loggerId':this[_0xc3bdd1(0x19b)]});}catch(_0x21d5bd){this[_0xc3bdd1(0x184)][_0xc3bdd1(0x1a0)](_0x21d5bd);throw new internal_server_error_1[(_0xc3bdd1(0x1a2))](_0x21d5bd);}}async[a284_0x1f480c(0x1a4)](_0x4ebdd2,_0x190c68){const _0x2c94ba=a284_0x1f480c;try{const {data:_0xb35d35}=await this[_0x2c94ba(0x19e)][_0x2c94ba(0x183)](_0x2c94ba(0x173)+constants_1[_0x2c94ba(0x1b1)]+_0x2c94ba(0x187)+_0x4ebdd2+'/',_0x190c68);return _0xb35d35['id'];}catch(_0x4b980d){throw new salesforce_error_1[(_0x2c94ba(0x188))](_0x4b980d);}}async[a284_0x1f480c(0x1ae)](_0x4e1b1b,_0x329aab,_0x4b17e1){const _0x942254=a284_0x1f480c;try{await this[_0x942254(0x19e)][_0x942254(0x174)](_0x942254(0x173)+constants_1[_0x942254(0x1b1)]+'/sobjects/'+_0x4e1b1b+'/'+_0x329aab,_0x4b17e1);}catch(_0x3c3f93){throw new salesforce_error_1[(_0x942254(0x188))](_0x3c3f93);}}async[a284_0x1f480c(0x1b7)](_0x280d58){const _0x5093d4=a284_0x1f480c;try{const {data:_0x3783f0}=await this['request']['get'](_0x5093d4(0x1aa)+this[_0x5093d4(0x181)]+'/connection',{'params':{'connectionId':_0x280d58}});return new connection_dto_1[(_0x5093d4(0x16f))](_0x3783f0);}catch(_0x51058a){throw new salesforce_error_1['SalesforceError'](_0x51058a);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a284_0x1f480c(0x179)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a284_0x1f480c(0x18d)])()),__metadata(a284_0x1f480c(0x177),[salesforce_auth_service_1[a284_0x1f480c(0x19c)]])],SalesforceService),exports[a284_0x1f480c(0x185)]=SalesforceService;