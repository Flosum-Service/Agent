const a283_0x58f4ce=a283_0x42e2;(function(_0x2725d3,_0x4a94d3){const _0x235f21=a283_0x42e2,_0x18dfa2=_0x2725d3();while(!![]){try{const _0x489d30=-parseInt(_0x235f21(0x1cf))/0x1*(-parseInt(_0x235f21(0x1ec))/0x2)+parseInt(_0x235f21(0x1e3))/0x3*(parseInt(_0x235f21(0x1da))/0x4)+parseInt(_0x235f21(0x1d0))/0x5*(-parseInt(_0x235f21(0x1f1))/0x6)+parseInt(_0x235f21(0x1b1))/0x7*(parseInt(_0x235f21(0x1d1))/0x8)+-parseInt(_0x235f21(0x1b5))/0x9+-parseInt(_0x235f21(0x1f0))/0xa+parseInt(_0x235f21(0x1df))/0xb;if(_0x489d30===_0x4a94d3)break;else _0x18dfa2['push'](_0x18dfa2['shift']());}catch(_0x296080){_0x18dfa2['push'](_0x18dfa2['shift']());}}}(a283_0x585d,0x4e56b));const a283_0x4fcab8=(function(){let _0x805f86=!![];return function(_0x52445a,_0x203fb7){const _0x4c898b=_0x805f86?function(){const _0x2c9b83=a283_0x42e2;if(_0x203fb7){const _0xb786cd=_0x203fb7[_0x2c9b83(0x1cd)](_0x52445a,arguments);return _0x203fb7=null,_0xb786cd;}}:function(){};return _0x805f86=![],_0x4c898b;};}()),a283_0x14e5b3=a283_0x4fcab8(this,function(){const _0x564aae=a283_0x42e2;return a283_0x14e5b3['toString']()['search'](_0x564aae(0x1f5))['toString']()['constructor'](a283_0x14e5b3)[_0x564aae(0x1f2)]('(((.+)+)+)+$');});function a283_0x42e2(_0x395e87,_0x130a67){const _0x1bb4d0=a283_0x585d();return a283_0x42e2=function(_0x14e5b3,_0x4fcab8){_0x14e5b3=_0x14e5b3-0x1b1;let _0x585d4a=_0x1bb4d0[_0x14e5b3];return _0x585d4a;},a283_0x42e2(_0x395e87,_0x130a67);}a283_0x14e5b3();function a283_0x585d(){const _0xe23734=['post','services/apexrest','defineProperty','__decorate','services/data/','2218332SMLYwu','metadata','SalesforceError','get','logger','6424792fWiVLa','./salesforce-logger.service','__esModule','../../../../core','3pGgDkY','forEach','IGNORE_FLOSUM_GIT_NAMESPACE','function','./salesforce-auth.service','delete','__metadata','createSalesforceRequest','fetchConnection','2zjAAKV','error','createObject','then','296120ayExpL','263838RVahxJ','search','/body','retrieveAttachment','(((.+)+)+)+$','internalLogger','21CpAhfJ','object','log','__param','3962187fPpobK','/sobjects/','Delete\x20attachment\x20%s\x20from\x20salesforce','namespace','sendLog','../errors/salesforce.error','SALESFORCE_API_VERSION','decorate','Logger','SalesforceLogger','typedi','getOwnPropertyDescriptor','deleteAttachment','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','../../../../core/errors/internal-server.error','request','/sobjects/Attachment/','text','../dto/connection.dto','arraybuffer','loggerId','length','name','SalesforceService','apply','ConnectionDto','127109TCKJuR','65btyaFT','257640GYFRnD','[message]\x20%s','patchObject','/logger'];a283_0x585d=function(){return _0xe23734;};return a283_0x585d();}'use strict';var __decorate=this&&this[a283_0x58f4ce(0x1d8)]||function(_0x4928d9,_0x21de2d,_0x18b1bd,_0x1a65c6){const _0x76fc65=a283_0x58f4ce;var _0x543f4b=arguments['length'],_0x157fb0=_0x543f4b<0x3?_0x21de2d:_0x1a65c6===null?_0x1a65c6=Object[_0x76fc65(0x1c0)](_0x21de2d,_0x18b1bd):_0x1a65c6,_0xe0b646;if(typeof Reflect===_0x76fc65(0x1b2)&&typeof Reflect[_0x76fc65(0x1bc)]===_0x76fc65(0x1e6))_0x157fb0=Reflect[_0x76fc65(0x1bc)](_0x4928d9,_0x21de2d,_0x18b1bd,_0x1a65c6);else{for(var _0x2343e9=_0x4928d9[_0x76fc65(0x1ca)]-0x1;_0x2343e9>=0x0;_0x2343e9--)if(_0xe0b646=_0x4928d9[_0x2343e9])_0x157fb0=(_0x543f4b<0x3?_0xe0b646(_0x157fb0):_0x543f4b>0x3?_0xe0b646(_0x21de2d,_0x18b1bd,_0x157fb0):_0xe0b646(_0x21de2d,_0x18b1bd))||_0x157fb0;}return _0x543f4b>0x3&&_0x157fb0&&Object[_0x76fc65(0x1d7)](_0x21de2d,_0x18b1bd,_0x157fb0),_0x157fb0;},__metadata=this&&this[a283_0x58f4ce(0x1e9)]||function(_0x4496fd,_0x2f0548){const _0x40de59=a283_0x58f4ce;if(typeof Reflect===_0x40de59(0x1b2)&&typeof Reflect[_0x40de59(0x1db)]===_0x40de59(0x1e6))return Reflect[_0x40de59(0x1db)](_0x4496fd,_0x2f0548);},__param=this&&this[a283_0x58f4ce(0x1b4)]||function(_0x2e8848,_0x16aab3){return function(_0x522f41,_0x1515b7){_0x16aab3(_0x522f41,_0x1515b7,_0x2e8848);};},SalesforceService_1;Object['defineProperty'](exports,a283_0x58f4ce(0x1e1),{'value':!![]}),exports[a283_0x58f4ce(0x1cc)]=void 0x0;const typedi_1=require(a283_0x58f4ce(0x1bf)),core_1=require(a283_0x58f4ce(0x1e2)),internal_server_error_1=require(a283_0x58f4ce(0x1c3)),salesforce_auth_service_1=require(a283_0x58f4ce(0x1e7)),constants_1=require('../../../../constants'),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require(a283_0x58f4ce(0x1e0)),salesforce_error_1=require(a283_0x58f4ce(0x1ba)),connection_dto_1=require(a283_0x58f4ce(0x1c7)),bulk_components_retriever_1=require('../classes/bulk-components-retriever');let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x264c4f){const _0x1b6780=a283_0x58f4ce;this['logger']=new core_1[(_0x1b6780(0x1bd))](SalesforceService_1[_0x1b6780(0x1cb)]),this[_0x1b6780(0x1c4)]=(0x0,create_request_util_1[_0x1b6780(0x1ea)])(_0x264c4f),this[_0x1b6780(0x1b8)]=constants_1[_0x1b6780(0x1e5)]?'':'/flosum_git';}['setLoggerId'](_0x489f14){const _0x35bd2d=a283_0x58f4ce;this['loggerId']=_0x489f14,this[_0x35bd2d(0x1f6)]=new salesforce_logger_service_1[(_0x35bd2d(0x1be))](this);}['getLogger'](){const _0x305e78=a283_0x58f4ce;return this[_0x305e78(0x1f6)];}async['retrieveComponents'](_0x2081a8){const _0x35a9db=a283_0x58f4ce;try{this['logger'][_0x35a9db(0x1b3)](_0x35a9db(0x1c2),_0x2081a8[_0x35a9db(0x1ca)]);const _0x2b6b2a=new bulk_components_retriever_1['BulkComponentsRetriever']({'request':this[_0x35a9db(0x1c4)],'ids':_0x2081a8}),_0x2427b8=await _0x2b6b2a['retrieve']();return _0x2427b8;}catch(_0x3aeab2){this[_0x35a9db(0x1de)][_0x35a9db(0x1ed)](_0x3aeab2);throw new salesforce_error_1[(_0x35a9db(0x1dc))](_0x3aeab2);}}async[a283_0x58f4ce(0x1c1)](_0x56b6eb){const _0x156d06=a283_0x58f4ce;try{this[_0x156d06(0x1de)][_0x156d06(0x1b3)](_0x156d06(0x1b7),_0x56b6eb),await this[_0x156d06(0x1c4)][_0x156d06(0x1e8)](_0x156d06(0x1d9)+constants_1['SALESFORCE_API_VERSION']+_0x156d06(0x1c5)+_0x56b6eb);}catch(_0x258456){this[_0x156d06(0x1de)][_0x156d06(0x1ed)](_0x258456);throw new salesforce_error_1[(_0x156d06(0x1dc))](_0x258456);}}async[a283_0x58f4ce(0x1f4)](_0x267678,_0x1d5962=![]){const _0x32ddcf=a283_0x58f4ce;try{this[_0x32ddcf(0x1de)][_0x32ddcf(0x1b3)]('Retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x267678);const _0x1a051f=await this[_0x32ddcf(0x1c4)]['get'](_0x32ddcf(0x1d9)+constants_1[_0x32ddcf(0x1bb)]+'/sobjects/Attachment/'+_0x267678+_0x32ddcf(0x1f3),{'responseType':_0x1d5962?_0x32ddcf(0x1c8):_0x32ddcf(0x1c6)})[_0x32ddcf(0x1ef)](({data:_0x3c2913})=>_0x3c2913);return _0x1a051f;}catch(_0x2796fb){this[_0x32ddcf(0x1de)][_0x32ddcf(0x1ed)](_0x2796fb);throw new salesforce_error_1[(_0x32ddcf(0x1dc))](_0x2796fb);}}async[a283_0x58f4ce(0x1b9)](_0xf95879){const _0x32de04=a283_0x58f4ce;try{_0xf95879[_0x32de04(0x1e4)](_0x1be074=>this[_0x32de04(0x1de)][_0x32de04(0x1b3)](_0x32de04(0x1d2),_0x1be074)),await this['request'][_0x32de04(0x1d5)](_0x32de04(0x1d6)+this['namespace']+_0x32de04(0x1d4),{'messages':_0xf95879,'loggerId':this[_0x32de04(0x1c9)]});}catch(_0x383a41){this[_0x32de04(0x1de)]['error'](_0x383a41);throw new internal_server_error_1['InternalServerError'](_0x383a41);}}async[a283_0x58f4ce(0x1ee)](_0x113b4f,_0x4dea05){const _0xb32b85=a283_0x58f4ce;try{const {data:_0x1c034b}=await this[_0xb32b85(0x1c4)][_0xb32b85(0x1d5)](_0xb32b85(0x1d9)+constants_1[_0xb32b85(0x1bb)]+_0xb32b85(0x1b6)+_0x113b4f+'/',_0x4dea05);return _0x1c034b['id'];}catch(_0x33b879){throw new salesforce_error_1[(_0xb32b85(0x1dc))](_0x33b879);}}async[a283_0x58f4ce(0x1d3)](_0x4f4aaa,_0x4e2d42,_0x4f860e){const _0x300a7e=a283_0x58f4ce;try{await this[_0x300a7e(0x1c4)]['patch']('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x300a7e(0x1b6)+_0x4f4aaa+'/'+_0x4e2d42,_0x4f860e);}catch(_0x3980ed){throw new salesforce_error_1[(_0x300a7e(0x1dc))](_0x3980ed);}}async[a283_0x58f4ce(0x1eb)](_0x34edae){const _0x16574=a283_0x58f4ce;try{const {data:_0x12af75}=await this[_0x16574(0x1c4)][_0x16574(0x1dd)]('services/apexrest'+this[_0x16574(0x1b8)]+'/connection',{'params':{'connectionId':_0x34edae}});return new connection_dto_1[(_0x16574(0x1ce))](_0x12af75);}catch(_0x491d14){throw new salesforce_error_1[(_0x16574(0x1dc))](_0x491d14);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1['Inject'])()),__metadata('design:paramtypes',[salesforce_auth_service_1['SalesforceAuthService']])],SalesforceService),exports['SalesforceService']=SalesforceService;