const a283_0x18af40=a283_0x450a;(function(_0x3ca1f4,_0x4928c3){const _0x3af54a=a283_0x450a,_0x4c5e6=_0x3ca1f4();while(!![]){try{const _0x28881e=parseInt(_0x3af54a(0x1b3))/0x1+-parseInt(_0x3af54a(0x1db))/0x2+parseInt(_0x3af54a(0x1cf))/0x3+parseInt(_0x3af54a(0x1d3))/0x4*(-parseInt(_0x3af54a(0x1c0))/0x5)+parseInt(_0x3af54a(0x1be))/0x6*(parseInt(_0x3af54a(0x1ab))/0x7)+parseInt(_0x3af54a(0x1bb))/0x8+-parseInt(_0x3af54a(0x1cc))/0x9;if(_0x28881e===_0x4928c3)break;else _0x4c5e6['push'](_0x4c5e6['shift']());}catch(_0x53dc62){_0x4c5e6['push'](_0x4c5e6['shift']());}}}(a283_0x4473,0xcafea));const a283_0x109789=(function(){let _0x461ef4=!![];return function(_0x20b25e,_0x18b77b){const _0x2a2400=_0x461ef4?function(){const _0x342f53=a283_0x450a;if(_0x18b77b){const _0x5a6143=_0x18b77b[_0x342f53(0x1a5)](_0x20b25e,arguments);return _0x18b77b=null,_0x5a6143;}}:function(){};return _0x461ef4=![],_0x2a2400;};}()),a283_0x30b314=a283_0x109789(this,function(){const _0x4914f5=a283_0x450a;return a283_0x30b314[_0x4914f5(0x1aa)]()['search'](_0x4914f5(0x1ba))['toString']()[_0x4914f5(0x1d8)](a283_0x30b314)[_0x4914f5(0x1d0)](_0x4914f5(0x1ba));});a283_0x30b314();function a283_0x4473(){const _0x57879b=['arraybuffer','SalesforceError','../../../../core/errors/internal-server.error','request','post','/sobjects/','312317YhTZRT','metadata','SalesforceLogger','text','../classes/bulk-components-retriever','log','services/apexrest','(((.+)+)+)+$','11618312HgICLG','IGNORE_FLOSUM_GIT_NAMESPACE','../../../../core','2190882tPYJWf','forEach','115BeYdut','logger','fetchConnection','function','[message]\x20%s','namespace','internalLogger','../errors/salesforce.error','SALESFORCE_API_VERSION','/sobjects/Attachment/','sendLog','setLoggerId','17412003pxpgpz','../dto/connection.dto','SalesforceService','3786252aWDPNV','search','error','Logger','194756ntOtgr','loggerId','createSalesforceRequest','Inject','/connection','constructor','decorate','Service','472302DvfRul','./salesforce-auth.service','then','retrieve','InternalServerError','services/data/','__esModule','../../../../constants','deleteAttachment','/logger','defineProperty','typedi','length','object','apply','design:paramtypes','delete','__metadata','../utils/create-request.util','toString','21QmSOsR','patchObject'];a283_0x4473=function(){return _0x57879b;};return a283_0x4473();}'use strict';var __decorate=this&&this['__decorate']||function(_0xac3383,_0x44f57f,_0xa34d82,_0x109838){const _0x46de7b=a283_0x450a;var _0x1e4040=arguments[_0x46de7b(0x1a3)],_0x27da6f=_0x1e4040<0x3?_0x44f57f:_0x109838===null?_0x109838=Object['getOwnPropertyDescriptor'](_0x44f57f,_0xa34d82):_0x109838,_0x4002ad;if(typeof Reflect===_0x46de7b(0x1a4)&&typeof Reflect[_0x46de7b(0x1d9)]===_0x46de7b(0x1c3))_0x27da6f=Reflect[_0x46de7b(0x1d9)](_0xac3383,_0x44f57f,_0xa34d82,_0x109838);else{for(var _0x49c90a=_0xac3383[_0x46de7b(0x1a3)]-0x1;_0x49c90a>=0x0;_0x49c90a--)if(_0x4002ad=_0xac3383[_0x49c90a])_0x27da6f=(_0x1e4040<0x3?_0x4002ad(_0x27da6f):_0x1e4040>0x3?_0x4002ad(_0x44f57f,_0xa34d82,_0x27da6f):_0x4002ad(_0x44f57f,_0xa34d82))||_0x27da6f;}return _0x1e4040>0x3&&_0x27da6f&&Object[_0x46de7b(0x1e5)](_0x44f57f,_0xa34d82,_0x27da6f),_0x27da6f;},__metadata=this&&this[a283_0x18af40(0x1a8)]||function(_0xba1173,_0x4edc13){const _0x48868a=a283_0x18af40;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x48868a(0x1c3))return Reflect[_0x48868a(0x1b4)](_0xba1173,_0x4edc13);},__param=this&&this['__param']||function(_0x37d0ca,_0x4ccf01){return function(_0x1b62e2,_0x16792e){_0x4ccf01(_0x1b62e2,_0x16792e,_0x37d0ca);};},SalesforceService_1;Object[a283_0x18af40(0x1e5)](exports,a283_0x18af40(0x1e1),{'value':!![]}),exports[a283_0x18af40(0x1ce)]=void 0x0;const typedi_1=require(a283_0x18af40(0x1e6)),core_1=require(a283_0x18af40(0x1bd)),internal_server_error_1=require(a283_0x18af40(0x1af)),salesforce_auth_service_1=require(a283_0x18af40(0x1dc)),constants_1=require(a283_0x18af40(0x1e2)),create_request_util_1=require(a283_0x18af40(0x1a9)),salesforce_logger_service_1=require('./salesforce-logger.service'),salesforce_error_1=require(a283_0x18af40(0x1c7)),connection_dto_1=require(a283_0x18af40(0x1cd)),bulk_components_retriever_1=require(a283_0x18af40(0x1b7));function a283_0x450a(_0x25dfa8,_0x1face2){const _0xe1d69e=a283_0x4473();return a283_0x450a=function(_0x30b314,_0x109789){_0x30b314=_0x30b314-0x1a3;let _0x447341=_0xe1d69e[_0x30b314];return _0x447341;},a283_0x450a(_0x25dfa8,_0x1face2);}let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x40ce04){const _0x11834c=a283_0x18af40;this['logger']=new core_1[(_0x11834c(0x1d2))](SalesforceService_1['name']),this[_0x11834c(0x1b0)]=(0x0,create_request_util_1[_0x11834c(0x1d5)])(_0x40ce04),this['namespace']=constants_1[_0x11834c(0x1bc)]?'':'/flosum_git';}[a283_0x18af40(0x1cb)](_0xd5175){const _0x1ee0d8=a283_0x18af40;this[_0x1ee0d8(0x1d4)]=_0xd5175,this['internalLogger']=new salesforce_logger_service_1[(_0x1ee0d8(0x1b5))](this);}['getLogger'](){const _0x38c0ab=a283_0x18af40;return this[_0x38c0ab(0x1c6)];}async['retrieveComponents'](_0x2bb6ae){const _0x1ff3cc=a283_0x18af40;try{this[_0x1ff3cc(0x1c1)][_0x1ff3cc(0x1b8)]('Retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x2bb6ae[_0x1ff3cc(0x1a3)]);const _0x1dcd14=new bulk_components_retriever_1['BulkComponentsRetriever']({'request':this[_0x1ff3cc(0x1b0)],'ids':_0x2bb6ae}),_0x519109=await _0x1dcd14[_0x1ff3cc(0x1de)]();return _0x519109;}catch(_0x5b8347){this[_0x1ff3cc(0x1c1)][_0x1ff3cc(0x1d1)](_0x5b8347);throw new salesforce_error_1[(_0x1ff3cc(0x1ae))](_0x5b8347);}}async[a283_0x18af40(0x1e3)](_0x2001a8){const _0x36fa80=a283_0x18af40;try{this[_0x36fa80(0x1c1)][_0x36fa80(0x1b8)]('Delete\x20attachment\x20%s\x20from\x20salesforce',_0x2001a8),await this[_0x36fa80(0x1b0)][_0x36fa80(0x1a7)](_0x36fa80(0x1e0)+constants_1[_0x36fa80(0x1c8)]+_0x36fa80(0x1c9)+_0x2001a8);}catch(_0x4bab4d){this[_0x36fa80(0x1c1)][_0x36fa80(0x1d1)](_0x4bab4d);throw new salesforce_error_1[(_0x36fa80(0x1ae))](_0x4bab4d);}}async['retrieveAttachment'](_0x210ae2,_0x21603a=![]){const _0x24581c=a283_0x18af40;try{this['logger'][_0x24581c(0x1b8)]('Retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x210ae2);const _0x223a7d=await this[_0x24581c(0x1b0)]['get']('services/data/'+constants_1[_0x24581c(0x1c8)]+_0x24581c(0x1c9)+_0x210ae2+'/body',{'responseType':_0x21603a?_0x24581c(0x1ad):_0x24581c(0x1b6)})[_0x24581c(0x1dd)](({data:_0x3161f0})=>_0x3161f0);return _0x223a7d;}catch(_0x5b8dbc){this['logger']['error'](_0x5b8dbc);throw new salesforce_error_1[(_0x24581c(0x1ae))](_0x5b8dbc);}}async[a283_0x18af40(0x1ca)](_0x20794d){const _0x2edd2a=a283_0x18af40;try{_0x20794d[_0x2edd2a(0x1bf)](_0x24fbe8=>this[_0x2edd2a(0x1c1)]['log'](_0x2edd2a(0x1c4),_0x24fbe8)),await this['request'][_0x2edd2a(0x1b1)](_0x2edd2a(0x1b9)+this[_0x2edd2a(0x1c5)]+_0x2edd2a(0x1e4),{'messages':_0x20794d,'loggerId':this[_0x2edd2a(0x1d4)]});}catch(_0x5b0f5d){this[_0x2edd2a(0x1c1)][_0x2edd2a(0x1d1)](_0x5b0f5d);throw new internal_server_error_1[(_0x2edd2a(0x1df))](_0x5b0f5d);}}async['createObject'](_0x594bb0,_0x37eede){const _0x4e44d7=a283_0x18af40;try{const {data:_0x4a9c3b}=await this['request'][_0x4e44d7(0x1b1)](_0x4e44d7(0x1e0)+constants_1[_0x4e44d7(0x1c8)]+_0x4e44d7(0x1b2)+_0x594bb0+'/',_0x37eede);return _0x4a9c3b['id'];}catch(_0x3f301b){throw new salesforce_error_1[(_0x4e44d7(0x1ae))](_0x3f301b);}}async[a283_0x18af40(0x1ac)](_0x28c948,_0x3af9d1,_0x5ecc41){const _0x6bf2a6=a283_0x18af40;try{await this['request']['patch']('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x6bf2a6(0x1b2)+_0x28c948+'/'+_0x3af9d1,_0x5ecc41);}catch(_0x3fbd97){throw new salesforce_error_1[(_0x6bf2a6(0x1ae))](_0x3fbd97);}}async[a283_0x18af40(0x1c2)](_0x211953){const _0x3de17e=a283_0x18af40;try{const {data:_0x498517}=await this['request']['get']('services/apexrest'+this[_0x3de17e(0x1c5)]+_0x3de17e(0x1d7),{'params':{'connectionId':_0x211953}});return new connection_dto_1['ConnectionDto'](_0x498517);}catch(_0x4674e5){throw new salesforce_error_1['SalesforceError'](_0x4674e5);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a283_0x18af40(0x1da)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a283_0x18af40(0x1d6)])()),__metadata(a283_0x18af40(0x1a6),[salesforce_auth_service_1['SalesforceAuthService']])],SalesforceService),exports[a283_0x18af40(0x1ce)]=SalesforceService;