const a284_0x280d58=a284_0x49ef;(function(_0x1b40d5,_0x21de77){const _0x121aff=a284_0x49ef,_0x11b063=_0x1b40d5();while(!![]){try{const _0x359f8e=-parseInt(_0x121aff(0x87))/0x1+-parseInt(_0x121aff(0x92))/0x2*(parseInt(_0x121aff(0xbe))/0x3)+-parseInt(_0x121aff(0x9c))/0x4+parseInt(_0x121aff(0x8d))/0x5+-parseInt(_0x121aff(0xc6))/0x6+parseInt(_0x121aff(0xca))/0x7*(parseInt(_0x121aff(0x9e))/0x8)+-parseInt(_0x121aff(0x8f))/0x9*(-parseInt(_0x121aff(0x8a))/0xa);if(_0x359f8e===_0x21de77)break;else _0x11b063['push'](_0x11b063['shift']());}catch(_0x751ea4){_0x11b063['push'](_0x11b063['shift']());}}}(a284_0xaed5,0x8cec8));const a284_0x2ad090=(function(){let _0x5a47d0=!![];return function(_0x2104a1,_0xe058b9){const _0x5d46e1=_0x5a47d0?function(){const _0x36d9b8=a284_0x49ef;if(_0xe058b9){const _0x1f05ac=_0xe058b9[_0x36d9b8(0xc3)](_0x2104a1,arguments);return _0xe058b9=null,_0x1f05ac;}}:function(){};return _0x5a47d0=![],_0x5d46e1;};}()),a284_0x2d711a=a284_0x2ad090(this,function(){const _0x36b0cc=a284_0x49ef;return a284_0x2d711a[_0x36b0cc(0xaf)]()[_0x36b0cc(0xa7)]('(((.+)+)+)+$')[_0x36b0cc(0xaf)]()[_0x36b0cc(0xc1)](a284_0x2d711a)[_0x36b0cc(0xa7)](_0x36b0cc(0xbb));});a284_0x2d711a();function a284_0x49ef(_0x2a2bb3,_0xfb6a19){const _0x5b182c=a284_0xaed5();return a284_0x49ef=function(_0x2d711a,_0x2ad090){_0x2d711a=_0x2d711a-0x85;let _0xaed584=_0x5b182c[_0x2d711a];return _0xaed584;},a284_0x49ef(_0x2a2bb3,_0xfb6a19);}'use strict';var __decorate=this&&this[a284_0x280d58(0xa4)]||function(_0x1bf2b6,_0x2f02bc,_0xb19018,_0xcd3949){const _0x2caf93=a284_0x280d58;var _0x4dee35=arguments['length'],_0x20f9be=_0x4dee35<0x3?_0x2f02bc:_0xcd3949===null?_0xcd3949=Object['getOwnPropertyDescriptor'](_0x2f02bc,_0xb19018):_0xcd3949,_0x564663;if(typeof Reflect===_0x2caf93(0x98)&&typeof Reflect[_0x2caf93(0x85)]===_0x2caf93(0xbd))_0x20f9be=Reflect[_0x2caf93(0x85)](_0x1bf2b6,_0x2f02bc,_0xb19018,_0xcd3949);else{for(var _0xec2f83=_0x1bf2b6[_0x2caf93(0xa1)]-0x1;_0xec2f83>=0x0;_0xec2f83--)if(_0x564663=_0x1bf2b6[_0xec2f83])_0x20f9be=(_0x4dee35<0x3?_0x564663(_0x20f9be):_0x4dee35>0x3?_0x564663(_0x2f02bc,_0xb19018,_0x20f9be):_0x564663(_0x2f02bc,_0xb19018))||_0x20f9be;}return _0x4dee35>0x3&&_0x20f9be&&Object[_0x2caf93(0xc8)](_0x2f02bc,_0xb19018,_0x20f9be),_0x20f9be;},__metadata=this&&this['__metadata']||function(_0x18a1da,_0x3acd65){const _0x4747b2=a284_0x280d58;if(typeof Reflect==='object'&&typeof Reflect[_0x4747b2(0xac)]===_0x4747b2(0xbd))return Reflect[_0x4747b2(0xac)](_0x18a1da,_0x3acd65);},__param=this&&this[a284_0x280d58(0x97)]||function(_0x2e96e9,_0x4d30e4){return function(_0x1ebb7f,_0xd457d6){_0x4d30e4(_0x1ebb7f,_0xd457d6,_0x2e96e9);};},SalesforceService_1;Object[a284_0x280d58(0xc8)](exports,a284_0x280d58(0xc7),{'value':!![]}),exports[a284_0x280d58(0x9f)]=void 0x0;function a284_0xaed5(){const _0x5db089=['__param','object','SalesforceError','../dto/connection.dto','namespace','313200sbhove','/flosum_git','2990168fDjbhf','SalesforceService','error','length','./salesforce-auth.service','Service','__decorate','../../../../core/errors/internal-server.error','delete','search','text','loggerId','name','createObject','metadata','../../../../core','/connection','toString','retrieveComponents','post','/sobjects/','services/apexrest','ConnectionDto','createSalesforceRequest','get','internalLogger','fetchConnection','retrieveAttachment','log','(((.+)+)+)+$','/logger','function','831daQVxq','[message]\x20%s','forEach','constructor','then','apply','Inject','SalesforceLogger','3630918jTJuDw','__esModule','defineProperty','patch','7IkZsXo','InternalServerError','patchObject','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','BulkComponentsRetriever','decorate','deleteAttachment','853740EsQwvU','logger','arraybuffer','6710BZgxpb','SALESFORCE_API_VERSION','request','3369310vPyiWZ','sendLog','20268dbmqeX','services/data/','setLoggerId','3208opoLCD','design:paramtypes','Delete\x20attachment\x20%s\x20from\x20salesforce','SalesforceAuthService','/sobjects/Attachment/'];a284_0xaed5=function(){return _0x5db089;};return a284_0xaed5();}const typedi_1=require('typedi'),core_1=require(a284_0x280d58(0xad)),internal_server_error_1=require(a284_0x280d58(0xa5)),salesforce_auth_service_1=require(a284_0x280d58(0xa2)),constants_1=require('../../../../constants'),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require('./salesforce-logger.service'),salesforce_error_1=require('../errors/salesforce.error'),connection_dto_1=require(a284_0x280d58(0x9a)),bulk_components_retriever_1=require('../classes/bulk-components-retriever');let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x1a2109){const _0x3b3835=a284_0x280d58;this[_0x3b3835(0x88)]=new core_1['Logger'](SalesforceService_1[_0x3b3835(0xaa)]),this[_0x3b3835(0x8c)]=(0x0,create_request_util_1[_0x3b3835(0xb5)])(_0x1a2109),this[_0x3b3835(0x9b)]=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':_0x3b3835(0x9d);}[a284_0x280d58(0x91)](_0x200e71){const _0x1ec09e=a284_0x280d58;this[_0x1ec09e(0xa9)]=_0x200e71,this[_0x1ec09e(0xb7)]=new salesforce_logger_service_1[(_0x1ec09e(0xc5))](this);}['getLogger'](){const _0x44e34d=a284_0x280d58;return this[_0x44e34d(0xb7)];}async[a284_0x280d58(0xb0)](_0xf6fb6){const _0xa846c6=a284_0x280d58;try{this[_0xa846c6(0x88)]['log'](_0xa846c6(0xcd),_0xf6fb6[_0xa846c6(0xa1)]);const _0x3453d4=new bulk_components_retriever_1[(_0xa846c6(0xce))]({'request':this[_0xa846c6(0x8c)],'ids':_0xf6fb6}),_0x5aa356=await _0x3453d4['retrieve']();return _0x5aa356;}catch(_0x5dd0f1){this[_0xa846c6(0x88)][_0xa846c6(0xa0)](_0x5dd0f1);throw new salesforce_error_1[(_0xa846c6(0x99))](_0x5dd0f1);}}async[a284_0x280d58(0x86)](_0x502bfb){const _0x20a519=a284_0x280d58;try{this[_0x20a519(0x88)][_0x20a519(0xba)](_0x20a519(0x94),_0x502bfb),await this[_0x20a519(0x8c)][_0x20a519(0xa6)](_0x20a519(0x90)+constants_1[_0x20a519(0x8b)]+_0x20a519(0x96)+_0x502bfb);}catch(_0x50c497){this[_0x20a519(0x88)][_0x20a519(0xa0)](_0x50c497);throw new salesforce_error_1[(_0x20a519(0x99))](_0x50c497);}}async[a284_0x280d58(0xb9)](_0x29e987,_0x3b6a4b=![]){const _0x3714c6=a284_0x280d58;try{this[_0x3714c6(0x88)][_0x3714c6(0xba)]('Retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x29e987);const _0x5bf596=await this['request']['get'](_0x3714c6(0x90)+constants_1[_0x3714c6(0x8b)]+_0x3714c6(0x96)+_0x29e987+'/body',{'responseType':_0x3b6a4b?_0x3714c6(0x89):_0x3714c6(0xa8)})[_0x3714c6(0xc2)](({data:_0x533153})=>_0x533153);return _0x5bf596;}catch(_0x45562d){this[_0x3714c6(0x88)]['error'](_0x45562d);throw new salesforce_error_1['SalesforceError'](_0x45562d);}}async[a284_0x280d58(0x8e)](_0x18faa4){const _0x87e4cd=a284_0x280d58;try{_0x18faa4[_0x87e4cd(0xc0)](_0x2adb4f=>this[_0x87e4cd(0x88)][_0x87e4cd(0xba)](_0x87e4cd(0xbf),_0x2adb4f)),await this['request']['post'](_0x87e4cd(0xb3)+this[_0x87e4cd(0x9b)]+_0x87e4cd(0xbc),{'messages':_0x18faa4,'loggerId':this[_0x87e4cd(0xa9)]});}catch(_0x553e2c){this['logger'][_0x87e4cd(0xa0)](_0x553e2c);throw new internal_server_error_1[(_0x87e4cd(0xcb))](_0x553e2c);}}async[a284_0x280d58(0xab)](_0x915d52,_0x16d34c){const _0x53fc07=a284_0x280d58;try{const {data:_0x35d2ce}=await this['request'][_0x53fc07(0xb1)](_0x53fc07(0x90)+constants_1[_0x53fc07(0x8b)]+_0x53fc07(0xb2)+_0x915d52+'/',_0x16d34c);return _0x35d2ce['id'];}catch(_0x5cd68a){throw new salesforce_error_1[(_0x53fc07(0x99))](_0x5cd68a);}}async[a284_0x280d58(0xcc)](_0x10e3f1,_0x4f7bfb,_0x2bdd76){const _0x142002=a284_0x280d58;try{await this[_0x142002(0x8c)][_0x142002(0xc9)](_0x142002(0x90)+constants_1[_0x142002(0x8b)]+_0x142002(0xb2)+_0x10e3f1+'/'+_0x4f7bfb,_0x2bdd76);}catch(_0x5824f5){throw new salesforce_error_1[(_0x142002(0x99))](_0x5824f5);}}async[a284_0x280d58(0xb8)](_0x319ca7){const _0x268912=a284_0x280d58;try{const {data:_0x3984f3}=await this[_0x268912(0x8c)][_0x268912(0xb6)]('services/apexrest'+this[_0x268912(0x9b)]+_0x268912(0xae),{'params':{'connectionId':_0x319ca7}});return new connection_dto_1[(_0x268912(0xb4))](_0x3984f3);}catch(_0x22914d){throw new salesforce_error_1[(_0x268912(0x99))](_0x22914d);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a284_0x280d58(0xa3)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a284_0x280d58(0xc4)])()),__metadata(a284_0x280d58(0x93),[salesforce_auth_service_1[a284_0x280d58(0x95)]])],SalesforceService),exports['SalesforceService']=SalesforceService;