const a282_0x5a1971=a282_0x4e5a;(function(_0x1a9478,_0x1bb08a){const _0x8cd93c=a282_0x4e5a,_0x18fd10=_0x1a9478();while(!![]){try{const _0x4f3a67=parseInt(_0x8cd93c(0x201))/0x1+parseInt(_0x8cd93c(0x224))/0x2*(-parseInt(_0x8cd93c(0x220))/0x3)+parseInt(_0x8cd93c(0x204))/0x4+-parseInt(_0x8cd93c(0x21b))/0x5*(parseInt(_0x8cd93c(0x20e))/0x6)+parseInt(_0x8cd93c(0x1fa))/0x7+-parseInt(_0x8cd93c(0x213))/0x8+-parseInt(_0x8cd93c(0x21e))/0x9;if(_0x4f3a67===_0x1bb08a)break;else _0x18fd10['push'](_0x18fd10['shift']());}catch(_0x59d185){_0x18fd10['push'](_0x18fd10['shift']());}}}(a282_0xf1e5,0x7ac60));const a282_0x502765=(function(){let _0x4468ac=!![];return function(_0x3fe4f6,_0x2fb86f){const _0x4c33a6=_0x4468ac?function(){const _0x1fda14=a282_0x4e5a;if(_0x2fb86f){const _0xe4ed51=_0x2fb86f[_0x1fda14(0x218)](_0x3fe4f6,arguments);return _0x2fb86f=null,_0xe4ed51;}}:function(){};return _0x4468ac=![],_0x4c33a6;};}()),a282_0x10d72b=a282_0x502765(this,function(){const _0x2e93c2=a282_0x4e5a;return a282_0x10d72b[_0x2e93c2(0x232)]()[_0x2e93c2(0x20c)](_0x2e93c2(0x227))['toString']()[_0x2e93c2(0x1f9)](a282_0x10d72b)['search'](_0x2e93c2(0x227));});function a282_0xf1e5(){const _0x55d0e8=['internalLogger','ConnectionDto','../classes/bulk-components-retriever','./salesforce-auth.service','text','/logger','../errors/salesforce.error','Inject','toString','/sobjects/','error','/body','object','createSalesforceRequest','SalesforceService','design:paramtypes','defineProperty','InternalServerError','forEach','constructor','5178796Koduvt','loggerId','decorate','function','name','request','services/apexrest','700088mhSmtl','IGNORE_FLOSUM_GIT_NAMESPACE','services/data/','3984852VkDXnd','length','setLoggerId','logger','SalesforceLogger','retrieveAttachment','typedi','BulkComponentsRetriever','search','fetchConnection','153558ZYXJiX','/connection','SALESFORCE_API_VERSION','createObject','../../../../core/errors/internal-server.error','2648704VuJtdd','metadata','[message]\x20%s','./salesforce-logger.service','SalesforceAuthService','apply','post','log','25BlHDiz','SalesforceError','Delete\x20attachment\x20%s\x20from\x20salesforce','8212689pckwOn','delete','45kbEfwg','../../../../core','Retrieve\x20attachment\x20%s\x20from\x20salesforce','__metadata','74890ttjWrV','namespace','/flosum_git','(((.+)+)+)+$','/sobjects/Attachment/','getLogger'];a282_0xf1e5=function(){return _0x55d0e8;};return a282_0xf1e5();}a282_0x10d72b();'use strict';var __decorate=this&&this['__decorate']||function(_0x200694,_0x348a9a,_0x50197d,_0x5a17f5){const _0x563a63=a282_0x4e5a;var _0x3bada0=arguments[_0x563a63(0x205)],_0xab8024=_0x3bada0<0x3?_0x348a9a:_0x5a17f5===null?_0x5a17f5=Object['getOwnPropertyDescriptor'](_0x348a9a,_0x50197d):_0x5a17f5,_0x8021a;if(typeof Reflect===_0x563a63(0x1f2)&&typeof Reflect[_0x563a63(0x1fc)]===_0x563a63(0x1fd))_0xab8024=Reflect['decorate'](_0x200694,_0x348a9a,_0x50197d,_0x5a17f5);else{for(var _0x343e9e=_0x200694[_0x563a63(0x205)]-0x1;_0x343e9e>=0x0;_0x343e9e--)if(_0x8021a=_0x200694[_0x343e9e])_0xab8024=(_0x3bada0<0x3?_0x8021a(_0xab8024):_0x3bada0>0x3?_0x8021a(_0x348a9a,_0x50197d,_0xab8024):_0x8021a(_0x348a9a,_0x50197d))||_0xab8024;}return _0x3bada0>0x3&&_0xab8024&&Object[_0x563a63(0x1f6)](_0x348a9a,_0x50197d,_0xab8024),_0xab8024;},__metadata=this&&this[a282_0x5a1971(0x223)]||function(_0x2ecde3,_0x272797){const _0x2d3891=a282_0x5a1971;if(typeof Reflect===_0x2d3891(0x1f2)&&typeof Reflect[_0x2d3891(0x214)]===_0x2d3891(0x1fd))return Reflect['metadata'](_0x2ecde3,_0x272797);},__param=this&&this['__param']||function(_0x51d5f0,_0x3fac04){return function(_0x16afd6,_0x57a474){_0x3fac04(_0x16afd6,_0x57a474,_0x51d5f0);};},SalesforceService_1;Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a282_0x5a1971(0x1f4)]=void 0x0;const typedi_1=require(a282_0x5a1971(0x20a)),core_1=require(a282_0x5a1971(0x221)),internal_server_error_1=require(a282_0x5a1971(0x212)),salesforce_auth_service_1=require(a282_0x5a1971(0x22d)),constants_1=require('../../../../constants'),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require(a282_0x5a1971(0x216)),salesforce_error_1=require(a282_0x5a1971(0x230)),connection_dto_1=require('../dto/connection.dto'),bulk_components_retriever_1=require(a282_0x5a1971(0x22c));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0xc4a3ef){const _0x44ff84=a282_0x5a1971;this['logger']=new core_1['Logger'](SalesforceService_1[_0x44ff84(0x1fe)]),this[_0x44ff84(0x1ff)]=(0x0,create_request_util_1[_0x44ff84(0x1f3)])(_0xc4a3ef),this[_0x44ff84(0x225)]=constants_1[_0x44ff84(0x202)]?'':_0x44ff84(0x226);}[a282_0x5a1971(0x206)](_0x335c25){const _0x2010bf=a282_0x5a1971;this['loggerId']=_0x335c25,this[_0x2010bf(0x22a)]=new salesforce_logger_service_1[(_0x2010bf(0x208))](this);}[a282_0x5a1971(0x229)](){const _0x33f634=a282_0x5a1971;return this[_0x33f634(0x22a)];}async['retrieveComponents'](_0x52e31b){const _0x34ad3e=a282_0x5a1971;try{this[_0x34ad3e(0x207)][_0x34ad3e(0x21a)]('Retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x52e31b['length']);const _0x363897=new bulk_components_retriever_1[(_0x34ad3e(0x20b))]({'request':this[_0x34ad3e(0x1ff)],'ids':_0x52e31b}),_0x29aa84=await _0x363897['retrieve']();return _0x29aa84;}catch(_0x443638){this[_0x34ad3e(0x207)][_0x34ad3e(0x234)](_0x443638);throw new salesforce_error_1[(_0x34ad3e(0x21c))](_0x443638);}}async['deleteAttachment'](_0x159f76){const _0x3eb448=a282_0x5a1971;try{this[_0x3eb448(0x207)][_0x3eb448(0x21a)](_0x3eb448(0x21d),_0x159f76),await this[_0x3eb448(0x1ff)][_0x3eb448(0x21f)]('services/data/'+constants_1[_0x3eb448(0x210)]+_0x3eb448(0x228)+_0x159f76);}catch(_0x6ea315){this[_0x3eb448(0x207)][_0x3eb448(0x234)](_0x6ea315);throw new salesforce_error_1[(_0x3eb448(0x21c))](_0x6ea315);}}async[a282_0x5a1971(0x209)](_0x3aa8c4,_0x4e9e18=![]){const _0x283780=a282_0x5a1971;try{this[_0x283780(0x207)][_0x283780(0x21a)](_0x283780(0x222),_0x3aa8c4);const _0xc993fe=await this[_0x283780(0x1ff)]['get'](_0x283780(0x203)+constants_1['SALESFORCE_API_VERSION']+_0x283780(0x228)+_0x3aa8c4+_0x283780(0x1f1),{'responseType':_0x4e9e18?'arraybuffer':_0x283780(0x22e)})['then'](({data:_0x1be147})=>_0x1be147);return _0xc993fe;}catch(_0x4d9a87){this[_0x283780(0x207)][_0x283780(0x234)](_0x4d9a87);throw new salesforce_error_1['SalesforceError'](_0x4d9a87);}}async['sendLog'](_0x4ea80d){const _0x444a08=a282_0x5a1971;try{_0x4ea80d[_0x444a08(0x1f8)](_0x27c4f4=>this[_0x444a08(0x207)][_0x444a08(0x21a)](_0x444a08(0x215),_0x27c4f4)),await this[_0x444a08(0x1ff)][_0x444a08(0x219)]('services/apexrest'+this[_0x444a08(0x225)]+_0x444a08(0x22f),{'messages':_0x4ea80d,'loggerId':this[_0x444a08(0x1fb)]});}catch(_0x1b074d){this['logger'][_0x444a08(0x234)](_0x1b074d);throw new internal_server_error_1[(_0x444a08(0x1f7))](_0x1b074d);}}async[a282_0x5a1971(0x211)](_0x4fe87c,_0x61559a){const _0x1e1ce1=a282_0x5a1971;try{const {data:_0x1f0278}=await this[_0x1e1ce1(0x1ff)]['post'](_0x1e1ce1(0x203)+constants_1['SALESFORCE_API_VERSION']+_0x1e1ce1(0x233)+_0x4fe87c+'/',_0x61559a);return _0x1f0278['id'];}catch(_0x190386){throw new salesforce_error_1[(_0x1e1ce1(0x21c))](_0x190386);}}async['patchObject'](_0x7ae4cb,_0x11492f,_0x53d940){const _0x4c1892=a282_0x5a1971;try{await this[_0x4c1892(0x1ff)]['patch'](_0x4c1892(0x203)+constants_1['SALESFORCE_API_VERSION']+_0x4c1892(0x233)+_0x7ae4cb+'/'+_0x11492f,_0x53d940);}catch(_0x106c24){throw new salesforce_error_1['SalesforceError'](_0x106c24);}}async[a282_0x5a1971(0x20d)](_0x5e85a2){const _0xd9fd17=a282_0x5a1971;try{const {data:_0x3afc17}=await this[_0xd9fd17(0x1ff)]['get'](_0xd9fd17(0x200)+this['namespace']+_0xd9fd17(0x20f),{'params':{'connectionId':_0x5e85a2}});return new connection_dto_1[(_0xd9fd17(0x22b))](_0x3afc17);}catch(_0x422f44){throw new salesforce_error_1[(_0xd9fd17(0x21c))](_0x422f44);}}};function a282_0x4e5a(_0x1e32f0,_0x1a47e9){const _0x124326=a282_0xf1e5();return a282_0x4e5a=function(_0x10d72b,_0x502765){_0x10d72b=_0x10d72b-0x1f1;let _0xf1e579=_0x124326[_0x10d72b];return _0xf1e579;},a282_0x4e5a(_0x1e32f0,_0x1a47e9);}SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a282_0x5a1971(0x231)])()),__metadata(a282_0x5a1971(0x1f5),[salesforce_auth_service_1[a282_0x5a1971(0x217)]])],SalesforceService),exports[a282_0x5a1971(0x1f4)]=SalesforceService;