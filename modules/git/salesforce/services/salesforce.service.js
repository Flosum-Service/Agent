const a240_0x165189=a240_0x2426;(function(_0x4cf11e,_0xea2531){const _0x712de1=a240_0x2426,_0x400ae8=_0x4cf11e();while(!![]){try{const _0x51decf=-parseInt(_0x712de1(0x69))/0x1+parseInt(_0x712de1(0x78))/0x2+parseInt(_0x712de1(0x8e))/0x3+-parseInt(_0x712de1(0x82))/0x4+-parseInt(_0x712de1(0xa5))/0x5+parseInt(_0x712de1(0x83))/0x6*(-parseInt(_0x712de1(0x74))/0x7)+parseInt(_0x712de1(0x8d))/0x8;if(_0x51decf===_0xea2531)break;else _0x400ae8['push'](_0x400ae8['shift']());}catch(_0x247af0){_0x400ae8['push'](_0x400ae8['shift']());}}}(a240_0x1ce3,0x560c0));function a240_0x2426(_0x3743e9,_0x2e0ddc){const _0x11b2a0=a240_0x1ce3();return a240_0x2426=function(_0x5c05c6,_0x5343eb){_0x5c05c6=_0x5c05c6-0x64;let _0x1ce353=_0x11b2a0[_0x5c05c6];return _0x1ce353;},a240_0x2426(_0x3743e9,_0x2e0ddc);}function a240_0x1ce3(){const _0xccad0c=['loggerId','forEach','Service','createSalesforceRequest','/sobjects/','error','request','patchObject','retrieve\x20components\x20\x20%d\x20from\x20salesforce','1805045jOSBmx','then','typedi','(((.+)+)+)+$','__decorate','createObject','/flosum_git','SalesforceError','642791Jefiav','constructor','/logger','retrieve\x20attachment\x20%s\x20from\x20salesforce','../../../../core','getLogger','design:paramtypes','retrieveComponents','/sobjects/Attachment/','delete','retrieveAttachment','10983fOBKuy','length','SALESFORCE_API_VERSION','log','729198KAfhzZ','SalesforceService','[message]\x20%s','toString','decorate','deleteAttachment','__esModule','namespace','IGNORE_FLOSUM_GIT_NAMESPACE','/attachments','90988apOstu','2526FcahHE','../../../../constants','name','Logger','logger','function','object','../errors/salesforce.error','fetchConnection','arraybuffer','8467224QWEYqv','1849626nSTuhE','Inject','./salesforce-logger.service','internalLogger','/body','patch','text','../utils/create-request.util','metadata','services/data/','post','services/apexrest','search','defineProperty'];a240_0x1ce3=function(){return _0xccad0c;};return a240_0x1ce3();}const a240_0x5343eb=(function(){let _0x568b3b=!![];return function(_0xc36a1a,_0x55e01e){const _0x7d33da=_0x568b3b?function(){if(_0x55e01e){const _0x426a0b=_0x55e01e['apply'](_0xc36a1a,arguments);return _0x55e01e=null,_0x426a0b;}}:function(){};return _0x568b3b=![],_0x7d33da;};}()),a240_0x5c05c6=a240_0x5343eb(this,function(){const _0xfca572=a240_0x2426;return a240_0x5c05c6[_0xfca572(0x7b)]()[_0xfca572(0x9a)](_0xfca572(0x64))[_0xfca572(0x7b)]()[_0xfca572(0x6a)](a240_0x5c05c6)[_0xfca572(0x9a)](_0xfca572(0x64));});a240_0x5c05c6();'use strict';var __decorate=this&&this[a240_0x165189(0x65)]||function(_0x2ba6cf,_0x1a0dc2,_0x551a50,_0x322545){const _0x540a38=a240_0x165189;var _0x267a56=arguments[_0x540a38(0x75)],_0x562f10=_0x267a56<0x3?_0x1a0dc2:_0x322545===null?_0x322545=Object['getOwnPropertyDescriptor'](_0x1a0dc2,_0x551a50):_0x322545,_0x239821;if(typeof Reflect===_0x540a38(0x89)&&typeof Reflect[_0x540a38(0x7c)]===_0x540a38(0x88))_0x562f10=Reflect['decorate'](_0x2ba6cf,_0x1a0dc2,_0x551a50,_0x322545);else{for(var _0x24beb3=_0x2ba6cf[_0x540a38(0x75)]-0x1;_0x24beb3>=0x0;_0x24beb3--)if(_0x239821=_0x2ba6cf[_0x24beb3])_0x562f10=(_0x267a56<0x3?_0x239821(_0x562f10):_0x267a56>0x3?_0x239821(_0x1a0dc2,_0x551a50,_0x562f10):_0x239821(_0x1a0dc2,_0x551a50))||_0x562f10;}return _0x267a56>0x3&&_0x562f10&&Object['defineProperty'](_0x1a0dc2,_0x551a50,_0x562f10),_0x562f10;},__metadata=this&&this['__metadata']||function(_0x154acd,_0x4b80f5){const _0x2327fe=a240_0x165189;if(typeof Reflect==='object'&&typeof Reflect[_0x2327fe(0x96)]===_0x2327fe(0x88))return Reflect[_0x2327fe(0x96)](_0x154acd,_0x4b80f5);},__param=this&&this['__param']||function(_0x201baf,_0x557f23){return function(_0x118baf,_0x2d1f0a){_0x557f23(_0x118baf,_0x2d1f0a,_0x201baf);};},SalesforceService_1;Object[a240_0x165189(0x9b)](exports,a240_0x165189(0x7e),{'value':!![]}),exports[a240_0x165189(0x79)]=void 0x0;const typedi_1=require(a240_0x165189(0xa7)),core_1=require(a240_0x165189(0x6d)),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require('./salesforce-auth.service'),constants_1=require(a240_0x165189(0x84)),create_request_util_1=require(a240_0x165189(0x95)),salesforce_logger_service_1=require(a240_0x165189(0x90)),salesforce_error_1=require(a240_0x165189(0x8a)),connection_dto_1=require('../dto/connection.dto');let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x5d1c1c){const _0x335cea=a240_0x165189;this[_0x335cea(0x87)]=new core_1[(_0x335cea(0x86))](SalesforceService_1[_0x335cea(0x85)]),this['request']=(0x0,create_request_util_1[_0x335cea(0x9f)])(_0x5d1c1c),this[_0x335cea(0x7f)]=constants_1[_0x335cea(0x80)]?'':_0x335cea(0x67);}['setLoggerId'](_0x27408d){const _0x3aa830=a240_0x165189;this[_0x3aa830(0x9c)]=_0x27408d,this[_0x3aa830(0x91)]=new salesforce_logger_service_1['SalesforceLogger'](this);}[a240_0x165189(0x6e)](){return this['internalLogger'];}async[a240_0x165189(0x70)](_0x260da7){const _0x4ef9dc=a240_0x165189;try{this['logger'][_0x4ef9dc(0x77)](_0x4ef9dc(0xa4),_0x260da7[_0x4ef9dc(0x75)]);const _0x32182f=await this[_0x4ef9dc(0xa2)][_0x4ef9dc(0x98)](_0x4ef9dc(0x99)+this['namespace']+_0x4ef9dc(0x81),{'componentIds':_0x260da7,'loggerId':this[_0x4ef9dc(0x9c)]})[_0x4ef9dc(0xa6)](({data:_0x4bf715})=>_0x4bf715);return _0x32182f;}catch(_0x48090a){this[_0x4ef9dc(0x87)][_0x4ef9dc(0xa1)](_0x48090a);throw new salesforce_error_1[(_0x4ef9dc(0x68))](_0x48090a);}}async[a240_0x165189(0x7d)](_0x38ce2d){const _0x4da867=a240_0x165189;try{this['logger'][_0x4da867(0x77)]('delete\x20attachment\x20%s\x20from\x20salesforce',_0x38ce2d),await this['request'][_0x4da867(0x72)]('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x4da867(0x71)+_0x38ce2d);}catch(_0x1b96c3){this[_0x4da867(0x87)][_0x4da867(0xa1)](_0x1b96c3);throw new salesforce_error_1['SalesforceError'](_0x1b96c3);}}async[a240_0x165189(0x73)](_0x466deb,_0x2a8c68=![]){const _0x28d298=a240_0x165189;try{this['logger'][_0x28d298(0x77)](_0x28d298(0x6c),_0x466deb);const _0x2bba15=await this['request']['get'](_0x28d298(0x97)+constants_1[_0x28d298(0x76)]+'/sobjects/Attachment/'+_0x466deb+_0x28d298(0x92),{'responseType':_0x2a8c68?_0x28d298(0x8c):_0x28d298(0x94)})[_0x28d298(0xa6)](({data:_0x1caca7})=>_0x1caca7);return _0x2bba15;}catch(_0x136ba1){this[_0x28d298(0x87)][_0x28d298(0xa1)](_0x136ba1);throw new salesforce_error_1[(_0x28d298(0x68))](_0x136ba1);}}async['sendLog'](_0x29f19a){const _0x18a532=a240_0x165189;try{_0x29f19a[_0x18a532(0x9d)](_0x235a40=>this[_0x18a532(0x87)][_0x18a532(0x77)](_0x18a532(0x7a),_0x235a40)),await this[_0x18a532(0xa2)][_0x18a532(0x98)](_0x18a532(0x99)+this[_0x18a532(0x7f)]+_0x18a532(0x6b),{'messages':_0x29f19a,'loggerId':this[_0x18a532(0x9c)]});}catch(_0x5b6df1){this['logger'][_0x18a532(0xa1)](_0x5b6df1);throw new internal_server_error_1['InternalServerError'](_0x5b6df1);}}async[a240_0x165189(0x66)](_0x635178,_0x1f954e){const _0x6dc299=a240_0x165189;try{const {data:_0x496aef}=await this[_0x6dc299(0xa2)][_0x6dc299(0x98)]('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x6dc299(0xa0)+_0x635178+'/',_0x1f954e);return _0x496aef['id'];}catch(_0xd4186f){throw new salesforce_error_1[(_0x6dc299(0x68))](_0xd4186f);}}async[a240_0x165189(0xa3)](_0x5390c9,_0x2e82b9,_0x126ef1){const _0x497120=a240_0x165189;try{await this[_0x497120(0xa2)][_0x497120(0x93)](_0x497120(0x97)+constants_1[_0x497120(0x76)]+_0x497120(0xa0)+_0x5390c9+'/'+_0x2e82b9,_0x126ef1);}catch(_0x2b14d3){throw new salesforce_error_1[(_0x497120(0x68))](_0x2b14d3);}}async[a240_0x165189(0x8b)](_0x159a4d){const _0x34f41a=a240_0x165189;try{const {data:_0x70d441}=await this[_0x34f41a(0xa2)]['get'](_0x34f41a(0x99)+this[_0x34f41a(0x7f)]+'/connection',{'params':{'connectionId':_0x159a4d}});return new connection_dto_1['ConnectionDto'](_0x70d441);}catch(_0x2283d1){throw new salesforce_error_1['SalesforceError'](_0x2283d1);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a240_0x165189(0x9e)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a240_0x165189(0x8f)])()),__metadata(a240_0x165189(0x6f),[salesforce_auth_service_1['SalesforceAuthService']])],SalesforceService),exports[a240_0x165189(0x79)]=SalesforceService;