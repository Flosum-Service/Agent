const a284_0x1fd1eb=a284_0x2781;(function(_0x43c546,_0x116815){const _0x403afa=a284_0x2781,_0x5e1745=_0x43c546();while(!![]){try{const _0x9595fa=-parseInt(_0x403afa(0x1d6))/0x1*(parseInt(_0x403afa(0x1e2))/0x2)+parseInt(_0x403afa(0x1cd))/0x3+parseInt(_0x403afa(0x1ca))/0x4*(parseInt(_0x403afa(0x1b7))/0x5)+parseInt(_0x403afa(0x1db))/0x6+parseInt(_0x403afa(0x1d5))/0x7+-parseInt(_0x403afa(0x1c7))/0x8+-parseInt(_0x403afa(0x1d8))/0x9;if(_0x9595fa===_0x116815)break;else _0x5e1745['push'](_0x5e1745['shift']());}catch(_0x4067e2){_0x5e1745['push'](_0x5e1745['shift']());}}}(a284_0x3e5b,0x42ae4));const a284_0x22a2aa=(function(){let _0x10e479=!![];return function(_0x55cea1,_0x3b9adc){const _0x26c103=_0x10e479?function(){const _0x279008=a284_0x2781;if(_0x3b9adc){const _0xd7e002=_0x3b9adc[_0x279008(0x1cc)](_0x55cea1,arguments);return _0x3b9adc=null,_0xd7e002;}}:function(){};return _0x10e479=![],_0x26c103;};}()),a284_0x10098d=a284_0x22a2aa(this,function(){const _0x429152=a284_0x2781;return a284_0x10098d[_0x429152(0x1f6)]()[_0x429152(0x1c6)](_0x429152(0x1df))[_0x429152(0x1f6)]()['constructor'](a284_0x10098d)[_0x429152(0x1c6)](_0x429152(0x1df));});a284_0x10098d();'use strict';var __decorate=this&&this[a284_0x1fd1eb(0x1f5)]||function(_0x3a46e7,_0xfb5b6,_0x2eb25c,_0x4df28b){const _0x17642f=a284_0x1fd1eb;var _0x392746=arguments[_0x17642f(0x1e8)],_0x32890c=_0x392746<0x3?_0xfb5b6:_0x4df28b===null?_0x4df28b=Object[_0x17642f(0x1ba)](_0xfb5b6,_0x2eb25c):_0x4df28b,_0xdf0123;if(typeof Reflect===_0x17642f(0x1fd)&&typeof Reflect[_0x17642f(0x1ec)]==='function')_0x32890c=Reflect[_0x17642f(0x1ec)](_0x3a46e7,_0xfb5b6,_0x2eb25c,_0x4df28b);else{for(var _0x3ebb76=_0x3a46e7[_0x17642f(0x1e8)]-0x1;_0x3ebb76>=0x0;_0x3ebb76--)if(_0xdf0123=_0x3a46e7[_0x3ebb76])_0x32890c=(_0x392746<0x3?_0xdf0123(_0x32890c):_0x392746>0x3?_0xdf0123(_0xfb5b6,_0x2eb25c,_0x32890c):_0xdf0123(_0xfb5b6,_0x2eb25c))||_0x32890c;}return _0x392746>0x3&&_0x32890c&&Object['defineProperty'](_0xfb5b6,_0x2eb25c,_0x32890c),_0x32890c;},__metadata=this&&this[a284_0x1fd1eb(0x1fb)]||function(_0x28e750,_0x449852){const _0x435a62=a284_0x1fd1eb;if(typeof Reflect===_0x435a62(0x1fd)&&typeof Reflect[_0x435a62(0x1fc)]==='function')return Reflect[_0x435a62(0x1fc)](_0x28e750,_0x449852);},__param=this&&this['__param']||function(_0x58d748,_0x3faa7b){return function(_0x4895ca,_0x1c125e){_0x3faa7b(_0x4895ca,_0x1c125e,_0x58d748);};},SalesforceService_1;Object[a284_0x1fd1eb(0x1ef)](exports,a284_0x1fd1eb(0x1c3),{'value':!![]}),exports[a284_0x1fd1eb(0x1f7)]=void 0x0;const typedi_1=require(a284_0x1fd1eb(0x1c9)),core_1=require(a284_0x1fd1eb(0x1fa)),internal_server_error_1=require(a284_0x1fd1eb(0x1bf)),salesforce_auth_service_1=require(a284_0x1fd1eb(0x1e0)),constants_1=require(a284_0x1fd1eb(0x1dd)),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require(a284_0x1fd1eb(0x1f1)),salesforce_error_1=require(a284_0x1fd1eb(0x1f4)),connection_dto_1=require(a284_0x1fd1eb(0x1d3)),bulk_components_retriever_1=require(a284_0x1fd1eb(0x1c2));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x311a5f){const _0x535a8a=a284_0x1fd1eb;this['logger']=new core_1[(_0x535a8a(0x1e1))](SalesforceService_1[_0x535a8a(0x1e4)]),this['request']=(0x0,create_request_util_1['createSalesforceRequest'])(_0x311a5f),this[_0x535a8a(0x1eb)]=constants_1[_0x535a8a(0x1d2)]?'':'/flosum_git';}['setLoggerId'](_0x897891){const _0x248392=a284_0x1fd1eb;this[_0x248392(0x1d9)]=_0x897891,this[_0x248392(0x1d1)]=new salesforce_logger_service_1[(_0x248392(0x1b9))](this);}[a284_0x1fd1eb(0x1ce)](){return this['internalLogger'];}async['retrieveComponents'](_0x594790){const _0x4a0670=a284_0x1fd1eb;try{this[_0x4a0670(0x1bd)][_0x4a0670(0x1b8)](_0x4a0670(0x1c1),_0x594790[_0x4a0670(0x1e8)]);const _0x16ad0c=new bulk_components_retriever_1['BulkComponentsRetriever']({'request':this[_0x4a0670(0x1c0)],'ids':_0x594790}),_0x4c7fee=await _0x16ad0c[_0x4a0670(0x1e6)]();return _0x4c7fee;}catch(_0x2a2447){this[_0x4a0670(0x1bd)][_0x4a0670(0x1ea)](_0x2a2447);throw new salesforce_error_1[(_0x4a0670(0x1be))](_0x2a2447);}}async['deleteAttachment'](_0x5a4a78){const _0x2cb6b3=a284_0x1fd1eb;try{this[_0x2cb6b3(0x1bd)]['log']('Delete\x20attachment\x20%s\x20from\x20salesforce',_0x5a4a78),await this[_0x2cb6b3(0x1c0)]['delete']('services/data/'+constants_1[_0x2cb6b3(0x1e7)]+_0x2cb6b3(0x1ff)+_0x5a4a78);}catch(_0x23ed94){this[_0x2cb6b3(0x1bd)][_0x2cb6b3(0x1ea)](_0x23ed94);throw new salesforce_error_1['SalesforceError'](_0x23ed94);}}async[a284_0x1fd1eb(0x1c4)](_0x41dc73,_0x1328e9=![]){const _0x2740ac=a284_0x1fd1eb;try{this[_0x2740ac(0x1bd)][_0x2740ac(0x1b8)](_0x2740ac(0x1f0),_0x41dc73);const _0x57e0e3=await this['request'][_0x2740ac(0x1da)](_0x2740ac(0x1ed)+constants_1[_0x2740ac(0x1e7)]+_0x2740ac(0x1ff)+_0x41dc73+_0x2740ac(0x1bc),{'responseType':_0x1328e9?_0x2740ac(0x1fe):_0x2740ac(0x1f9)})[_0x2740ac(0x1d7)](({data:_0x4a2133})=>_0x4a2133);return _0x57e0e3;}catch(_0x244aaa){this[_0x2740ac(0x1bd)][_0x2740ac(0x1ea)](_0x244aaa);throw new salesforce_error_1[(_0x2740ac(0x1be))](_0x244aaa);}}async[a284_0x1fd1eb(0x1bb)](_0x1ece0a){const _0x65c774=a284_0x1fd1eb;try{_0x1ece0a[_0x65c774(0x1cf)](_0x556ea4=>this['logger']['log'](_0x65c774(0x1dc),_0x556ea4)),await this['request'][_0x65c774(0x1f3)]('services/apexrest'+this['namespace']+_0x65c774(0x1f8),{'messages':_0x1ece0a,'loggerId':this['loggerId']});}catch(_0x2f51ef){this[_0x65c774(0x1bd)][_0x65c774(0x1ea)](_0x2f51ef);throw new internal_server_error_1[(_0x65c774(0x1e3))](_0x2f51ef);}}async[a284_0x1fd1eb(0x1e9)](_0x319a10,_0x36babd){const _0x46e15c=a284_0x1fd1eb;try{const {data:_0x6861e3}=await this[_0x46e15c(0x1c0)]['post'](_0x46e15c(0x1ed)+constants_1[_0x46e15c(0x1e7)]+_0x46e15c(0x1de)+_0x319a10+'/',_0x36babd);return _0x6861e3['id'];}catch(_0x4d99ef){throw new salesforce_error_1['SalesforceError'](_0x4d99ef);}}async[a284_0x1fd1eb(0x1cb)](_0x5233cd,_0x5d1be2,_0x2cbe08){const _0x4944bb=a284_0x1fd1eb;try{await this[_0x4944bb(0x1c0)][_0x4944bb(0x1f2)](_0x4944bb(0x1ed)+constants_1[_0x4944bb(0x1e7)]+_0x4944bb(0x1de)+_0x5233cd+'/'+_0x5d1be2,_0x2cbe08);}catch(_0x3b0c32){throw new salesforce_error_1['SalesforceError'](_0x3b0c32);}}async[a284_0x1fd1eb(0x1c8)](_0x110142){const _0x52eaca=a284_0x1fd1eb;try{const {data:_0x2091f4}=await this['request'][_0x52eaca(0x1da)](_0x52eaca(0x1ee)+this[_0x52eaca(0x1eb)]+_0x52eaca(0x1d4),{'params':{'connectionId':_0x110142}});return new connection_dto_1[(_0x52eaca(0x1e5))](_0x2091f4);}catch(_0x296899){throw new salesforce_error_1[(_0x52eaca(0x1be))](_0x296899);}}};function a284_0x2781(_0x101e71,_0x41df5e){const _0x521745=a284_0x3e5b();return a284_0x2781=function(_0x10098d,_0x22a2aa){_0x10098d=_0x10098d-0x1b7;let _0x3e5bb0=_0x521745[_0x10098d];return _0x3e5bb0;},a284_0x2781(_0x101e71,_0x41df5e);}SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a284_0x1fd1eb(0x200)])()),__metadata(a284_0x1fd1eb(0x1c5),[salesforce_auth_service_1[a284_0x1fd1eb(0x1d0)]])],SalesforceService),exports[a284_0x1fd1eb(0x1f7)]=SalesforceService;function a284_0x3e5b(){const _0x5ef70b=['../../../../core/errors/internal-server.error','request','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','../classes/bulk-components-retriever','__esModule','retrieveAttachment','design:paramtypes','search','3060896fTrZUk','fetchConnection','typedi','5188abHkso','patchObject','apply','1373997kdOjjo','getLogger','forEach','SalesforceAuthService','internalLogger','IGNORE_FLOSUM_GIT_NAMESPACE','../dto/connection.dto','/connection','2293382JbunNg','8NLEqla','then','5182263jRAPFP','loggerId','get','2540964TgJHXI','[message]\x20%s','../../../../constants','/sobjects/','(((.+)+)+)+$','./salesforce-auth.service','Logger','54056EjXTua','InternalServerError','name','ConnectionDto','retrieve','SALESFORCE_API_VERSION','length','createObject','error','namespace','decorate','services/data/','services/apexrest','defineProperty','Retrieve\x20attachment\x20%s\x20from\x20salesforce','./salesforce-logger.service','patch','post','../errors/salesforce.error','__decorate','toString','SalesforceService','/logger','text','../../../../core','__metadata','metadata','object','arraybuffer','/sobjects/Attachment/','Inject','920KLRhlV','log','SalesforceLogger','getOwnPropertyDescriptor','sendLog','/body','logger','SalesforceError'];a284_0x3e5b=function(){return _0x5ef70b;};return a284_0x3e5b();}