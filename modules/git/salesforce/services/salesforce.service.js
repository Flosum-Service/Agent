const a272_0x5a141d=a272_0x1c14;(function(_0x3452d5,_0x4b6d8b){const _0x297cd7=a272_0x1c14,_0x5bdd0d=_0x3452d5();while(!![]){try{const _0xfbf2be=parseInt(_0x297cd7(0x167))/0x1*(parseInt(_0x297cd7(0x177))/0x2)+-parseInt(_0x297cd7(0x189))/0x3*(parseInt(_0x297cd7(0x18a))/0x4)+parseInt(_0x297cd7(0x1a1))/0x5*(-parseInt(_0x297cd7(0x19a))/0x6)+parseInt(_0x297cd7(0x15b))/0x7+-parseInt(_0x297cd7(0x197))/0x8+-parseInt(_0x297cd7(0x15d))/0x9+parseInt(_0x297cd7(0x19e))/0xa*(parseInt(_0x297cd7(0x196))/0xb);if(_0xfbf2be===_0x4b6d8b)break;else _0x5bdd0d['push'](_0x5bdd0d['shift']());}catch(_0x1dade1){_0x5bdd0d['push'](_0x5bdd0d['shift']());}}}(a272_0x463a,0x51e60));const a272_0x181092=(function(){let _0x317e3a=!![];return function(_0x5c857a,_0x535f57){const _0x33e8d9=_0x317e3a?function(){const _0x21782=a272_0x1c14;if(_0x535f57){const _0x3bbaab=_0x535f57[_0x21782(0x195)](_0x5c857a,arguments);return _0x535f57=null,_0x3bbaab;}}:function(){};return _0x317e3a=![],_0x33e8d9;};}()),a272_0x48f094=a272_0x181092(this,function(){const _0x4fc085=a272_0x1c14;return a272_0x48f094['toString']()[_0x4fc085(0x162)](_0x4fc085(0x174))['toString']()['constructor'](a272_0x48f094)[_0x4fc085(0x162)](_0x4fc085(0x174));});a272_0x48f094();'use strict';function a272_0x1c14(_0x1d0509,_0x40c084){const _0x36ea29=a272_0x463a();return a272_0x1c14=function(_0x48f094,_0x181092){_0x48f094=_0x48f094-0x158;let _0x463a6e=_0x36ea29[_0x48f094];return _0x463a6e;},a272_0x1c14(_0x1d0509,_0x40c084);}var __decorate=this&&this[a272_0x5a141d(0x18f)]||function(_0x1a5d4c,_0x28357e,_0xfcb780,_0x3a0509){const _0x2adcfb=a272_0x5a141d;var _0x490192=arguments[_0x2adcfb(0x181)],_0x315814=_0x490192<0x3?_0x28357e:_0x3a0509===null?_0x3a0509=Object[_0x2adcfb(0x18e)](_0x28357e,_0xfcb780):_0x3a0509,_0x4ac077;if(typeof Reflect===_0x2adcfb(0x190)&&typeof Reflect[_0x2adcfb(0x19b)]===_0x2adcfb(0x194))_0x315814=Reflect[_0x2adcfb(0x19b)](_0x1a5d4c,_0x28357e,_0xfcb780,_0x3a0509);else{for(var _0x4107f2=_0x1a5d4c[_0x2adcfb(0x181)]-0x1;_0x4107f2>=0x0;_0x4107f2--)if(_0x4ac077=_0x1a5d4c[_0x4107f2])_0x315814=(_0x490192<0x3?_0x4ac077(_0x315814):_0x490192>0x3?_0x4ac077(_0x28357e,_0xfcb780,_0x315814):_0x4ac077(_0x28357e,_0xfcb780))||_0x315814;}return _0x490192>0x3&&_0x315814&&Object[_0x2adcfb(0x18b)](_0x28357e,_0xfcb780,_0x315814),_0x315814;},__metadata=this&&this['__metadata']||function(_0x2767a7,_0xed9940){const _0x597290=a272_0x5a141d;if(typeof Reflect===_0x597290(0x190)&&typeof Reflect[_0x597290(0x170)]==='function')return Reflect[_0x597290(0x170)](_0x2767a7,_0xed9940);},__param=this&&this[a272_0x5a141d(0x168)]||function(_0x696969,_0x415e14){return function(_0x5aadb2,_0x2fcbbc){_0x415e14(_0x5aadb2,_0x2fcbbc,_0x696969);};},SalesforceService_1;Object[a272_0x5a141d(0x18b)](exports,'__esModule',{'value':!![]}),exports[a272_0x5a141d(0x17c)]=void 0x0;const typedi_1=require(a272_0x5a141d(0x161)),core_1=require(a272_0x5a141d(0x16b)),internal_server_error_1=require(a272_0x5a141d(0x15e)),salesforce_auth_service_1=require(a272_0x5a141d(0x179)),constants_1=require(a272_0x5a141d(0x17f)),create_request_util_1=require(a272_0x5a141d(0x165)),salesforce_logger_service_1=require(a272_0x5a141d(0x17d)),salesforce_error_1=require(a272_0x5a141d(0x166)),connection_dto_1=require('../dto/connection.dto'),bulk_components_retriever_1=require(a272_0x5a141d(0x180));function a272_0x463a(){const _0x329224=['./salesforce-logger.service','Inject','../../../../constants','../classes/bulk-components-retriever','length','getLogger','retrieveAttachment','Delete\x20attachment\x20%s\x20from\x20salesforce','retrieve','createObject','error','then','3hQcKwT','1822092rzFlDW','defineProperty','/body','SALESFORCE_API_VERSION','getOwnPropertyDescriptor','__decorate','object','/flosum_git','createSalesforceRequest','get','function','apply','81367oTfTnL','1022704sFomDz','request','patchObject','59634ItGWLN','decorate','arraybuffer','post','670QOyclQ','SalesforceLogger','logger','225DVjRgZ','BulkComponentsRetriever','loggerId','sendLog','forEach','4371150MDlcdy','name','1399203wgTTBW','../../../../core/errors/internal-server.error','retrieveComponents','internalLogger','typedi','search','SalesforceAuthService','deleteAttachment','../utils/create-request.util','../errors/salesforce.error','10OWKEmO','__param','/sobjects/Attachment/','namespace','../../../../core','design:paramtypes','/logger','ConnectionDto','log','metadata','patch','Service','SalesforceError','(((.+)+)+)+$','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','text','80298PWCCMf','services/data/','./salesforce-auth.service','services/apexrest','InternalServerError','SalesforceService'];a272_0x463a=function(){return _0x329224;};return a272_0x463a();}let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x425d34){const _0x209d82=a272_0x5a141d;this['logger']=new core_1['Logger'](SalesforceService_1[_0x209d82(0x15c)]),this[_0x209d82(0x198)]=(0x0,create_request_util_1[_0x209d82(0x192)])(_0x425d34),this[_0x209d82(0x16a)]=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':_0x209d82(0x191);}['setLoggerId'](_0xd38606){const _0x3e130c=a272_0x5a141d;this[_0x3e130c(0x158)]=_0xd38606,this['internalLogger']=new salesforce_logger_service_1[(_0x3e130c(0x19f))](this);}[a272_0x5a141d(0x182)](){const _0x3b3b52=a272_0x5a141d;return this[_0x3b3b52(0x160)];}async[a272_0x5a141d(0x15f)](_0x2b3969){const _0x3ed1b9=a272_0x5a141d;try{this[_0x3ed1b9(0x1a0)][_0x3ed1b9(0x16f)](_0x3ed1b9(0x175),_0x2b3969['length']);const _0x113a24=new bulk_components_retriever_1[(_0x3ed1b9(0x1a2))]({'request':this[_0x3ed1b9(0x198)],'ids':_0x2b3969}),_0x4b7b13=await _0x113a24[_0x3ed1b9(0x185)]();return _0x4b7b13;}catch(_0x5b5987){this[_0x3ed1b9(0x1a0)][_0x3ed1b9(0x187)](_0x5b5987);throw new salesforce_error_1[(_0x3ed1b9(0x173))](_0x5b5987);}}async[a272_0x5a141d(0x164)](_0x163f20){const _0x3fac8e=a272_0x5a141d;try{this[_0x3fac8e(0x1a0)][_0x3fac8e(0x16f)](_0x3fac8e(0x184),_0x163f20),await this[_0x3fac8e(0x198)]['delete'](_0x3fac8e(0x178)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment/'+_0x163f20);}catch(_0x2bb8bb){this[_0x3fac8e(0x1a0)][_0x3fac8e(0x187)](_0x2bb8bb);throw new salesforce_error_1[(_0x3fac8e(0x173))](_0x2bb8bb);}}async[a272_0x5a141d(0x183)](_0x3bde9a,_0x1093ef=![]){const _0xdd5b40=a272_0x5a141d;try{this[_0xdd5b40(0x1a0)]['log']('Retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x3bde9a);const _0x45242a=await this[_0xdd5b40(0x198)]['get'](_0xdd5b40(0x178)+constants_1[_0xdd5b40(0x18d)]+_0xdd5b40(0x169)+_0x3bde9a+_0xdd5b40(0x18c),{'responseType':_0x1093ef?_0xdd5b40(0x19c):_0xdd5b40(0x176)})[_0xdd5b40(0x188)](({data:_0x507171})=>_0x507171);return _0x45242a;}catch(_0x1abda7){this['logger'][_0xdd5b40(0x187)](_0x1abda7);throw new salesforce_error_1[(_0xdd5b40(0x173))](_0x1abda7);}}async[a272_0x5a141d(0x159)](_0x26e55b){const _0x3281d8=a272_0x5a141d;try{_0x26e55b[_0x3281d8(0x15a)](_0x26e69d=>this[_0x3281d8(0x1a0)]['log']('[message]\x20%s',_0x26e69d)),await this['request'][_0x3281d8(0x19d)]('services/apexrest'+this[_0x3281d8(0x16a)]+_0x3281d8(0x16d),{'messages':_0x26e55b,'loggerId':this['loggerId']});}catch(_0x49a6fc){this[_0x3281d8(0x1a0)]['error'](_0x49a6fc);throw new internal_server_error_1[(_0x3281d8(0x17b))](_0x49a6fc);}}async[a272_0x5a141d(0x186)](_0x60adb4,_0x4e0337){const _0x324eb0=a272_0x5a141d;try{const {data:_0xbf9dc7}=await this['request']['post'](_0x324eb0(0x178)+constants_1[_0x324eb0(0x18d)]+'/sobjects/'+_0x60adb4+'/',_0x4e0337);return _0xbf9dc7['id'];}catch(_0x337bbd){throw new salesforce_error_1[(_0x324eb0(0x173))](_0x337bbd);}}async[a272_0x5a141d(0x199)](_0x5a54a8,_0x469226,_0x3c0c92){const _0x2916a8=a272_0x5a141d;try{await this['request'][_0x2916a8(0x171)](_0x2916a8(0x178)+constants_1[_0x2916a8(0x18d)]+'/sobjects/'+_0x5a54a8+'/'+_0x469226,_0x3c0c92);}catch(_0xd6160){throw new salesforce_error_1[(_0x2916a8(0x173))](_0xd6160);}}async['fetchConnection'](_0x2eb7ef){const _0x1e0189=a272_0x5a141d;try{const {data:_0x49a30d}=await this[_0x1e0189(0x198)][_0x1e0189(0x193)](_0x1e0189(0x17a)+this['namespace']+'/connection',{'params':{'connectionId':_0x2eb7ef}});return new connection_dto_1[(_0x1e0189(0x16e))](_0x49a30d);}catch(_0x1dd004){throw new salesforce_error_1[(_0x1e0189(0x173))](_0x1dd004);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a272_0x5a141d(0x172)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a272_0x5a141d(0x17e)])()),__metadata(a272_0x5a141d(0x16c),[salesforce_auth_service_1[a272_0x5a141d(0x163)]])],SalesforceService),exports['SalesforceService']=SalesforceService;