const a205_0x4090b4=a205_0x50ef;function a205_0x6ef9(){const _0x5eaf34=['design:paramtypes','3krzTxg','../../../../core','Inject','__esModule','retrieveAttachment','Logger','153WKkHWI','/sobjects/Attachment/','/flosum_git','post','patchObject','delete\x20attachment\x20%s\x20from\x20salesforce','error','apply','forEach','delete','1695778nmbHRk','ConnectionDto','createObject','function','1280660DZcQWH','metadata','name','toString','services/apexrest','SalesforceLogger','16ssIbIu','patch','arraybuffer','./salesforce-auth.service','log','loggerId','decorate','__decorate','internalLogger','[message]\x20%s','__param','../errors/salesforce.error','/body','1086556eEXHcd','512722ielugp','request','IGNORE_FLOSUM_GIT_NAMESPACE','SalesforceError','logger','../utils/create-request.util','namespace','fetchConnection','../../../../core/errors/internal-server.error','3189016QBcUAV','get','services/data/','length','InternalServerError','270730jBNlVh','constructor','retrieve\x20attachment\x20%s\x20from\x20salesforce','getLogger','getOwnPropertyDescriptor','then','2438604mqCaFf','createSalesforceRequest','SALESFORCE_API_VERSION','defineProperty','retrieve\x20components\x20\x20%d\x20from\x20salesforce','object','/sobjects/','SalesforceService','search','/connection','/attachments'];a205_0x6ef9=function(){return _0x5eaf34;};return a205_0x6ef9();}(function(_0x3464d9,_0x2146c0){const _0x1fdd3a=a205_0x50ef,_0x29eee5=_0x3464d9();while(!![]){try{const _0x3cb5c9=-parseInt(_0x1fdd3a(0x13e))/0x1+-parseInt(_0x1fdd3a(0x13d))/0x2*(parseInt(_0x1fdd3a(0x15e))/0x3)+parseInt(_0x1fdd3a(0x178))/0x4*(-parseInt(_0x1fdd3a(0x14c))/0x5)+-parseInt(_0x1fdd3a(0x152))/0x6+parseInt(_0x1fdd3a(0x16e))/0x7+-parseInt(_0x1fdd3a(0x147))/0x8+-parseInt(_0x1fdd3a(0x164))/0x9*(-parseInt(_0x1fdd3a(0x172))/0xa);if(_0x3cb5c9===_0x2146c0)break;else _0x29eee5['push'](_0x29eee5['shift']());}catch(_0x3039e5){_0x29eee5['push'](_0x29eee5['shift']());}}}(a205_0x6ef9,0x536e3));const a205_0x70879e=(function(){let _0x43171c=!![];return function(_0x4b2e45,_0x1a6fec){const _0x4206bd=_0x43171c?function(){const _0x5824fd=a205_0x50ef;if(_0x1a6fec){const _0x44c6a7=_0x1a6fec[_0x5824fd(0x16b)](_0x4b2e45,arguments);return _0x1a6fec=null,_0x44c6a7;}}:function(){};return _0x43171c=![],_0x4206bd;};}()),a205_0xfdb3f9=a205_0x70879e(this,function(){const _0x38ade7=a205_0x50ef;return a205_0xfdb3f9[_0x38ade7(0x175)]()[_0x38ade7(0x15a)]('(((.+)+)+)+$')['toString']()[_0x38ade7(0x14d)](a205_0xfdb3f9)[_0x38ade7(0x15a)]('(((.+)+)+)+$');});function a205_0x50ef(_0x49a344,_0x513723){const _0x453ee3=a205_0x6ef9();return a205_0x50ef=function(_0xfdb3f9,_0x70879e){_0xfdb3f9=_0xfdb3f9-0x137;let _0x6ef948=_0x453ee3[_0xfdb3f9];return _0x6ef948;},a205_0x50ef(_0x49a344,_0x513723);}a205_0xfdb3f9();'use strict';var __decorate=this&&this[a205_0x4090b4(0x137)]||function(_0x30e8af,_0x4c8dce,_0x54bc3e,_0x154072){const _0x5e1b84=a205_0x4090b4;var _0x50a46a=arguments[_0x5e1b84(0x14a)],_0x2a6e7f=_0x50a46a<0x3?_0x4c8dce:_0x154072===null?_0x154072=Object[_0x5e1b84(0x150)](_0x4c8dce,_0x54bc3e):_0x154072,_0x395f1c;if(typeof Reflect===_0x5e1b84(0x157)&&typeof Reflect[_0x5e1b84(0x17e)]==='function')_0x2a6e7f=Reflect[_0x5e1b84(0x17e)](_0x30e8af,_0x4c8dce,_0x54bc3e,_0x154072);else{for(var _0x2d1254=_0x30e8af[_0x5e1b84(0x14a)]-0x1;_0x2d1254>=0x0;_0x2d1254--)if(_0x395f1c=_0x30e8af[_0x2d1254])_0x2a6e7f=(_0x50a46a<0x3?_0x395f1c(_0x2a6e7f):_0x50a46a>0x3?_0x395f1c(_0x4c8dce,_0x54bc3e,_0x2a6e7f):_0x395f1c(_0x4c8dce,_0x54bc3e))||_0x2a6e7f;}return _0x50a46a>0x3&&_0x2a6e7f&&Object[_0x5e1b84(0x155)](_0x4c8dce,_0x54bc3e,_0x2a6e7f),_0x2a6e7f;},__metadata=this&&this['__metadata']||function(_0x184feb,_0x1bf2f0){const _0x1dd4dc=a205_0x4090b4;if(typeof Reflect==='object'&&typeof Reflect[_0x1dd4dc(0x173)]===_0x1dd4dc(0x171))return Reflect['metadata'](_0x184feb,_0x1bf2f0);},__param=this&&this[a205_0x4090b4(0x13a)]||function(_0x60d136,_0x56edcb){return function(_0x19dc72,_0x4134b3){_0x56edcb(_0x19dc72,_0x4134b3,_0x60d136);};},SalesforceService_1;Object[a205_0x4090b4(0x155)](exports,a205_0x4090b4(0x161),{'value':!![]}),exports[a205_0x4090b4(0x159)]=void 0x0;const typedi_1=require('typedi'),core_1=require(a205_0x4090b4(0x15f)),internal_server_error_1=require(a205_0x4090b4(0x146)),salesforce_auth_service_1=require(a205_0x4090b4(0x17b)),constants_1=require('../../../../constants'),create_request_util_1=require(a205_0x4090b4(0x143)),salesforce_logger_service_1=require('./salesforce-logger.service'),salesforce_error_1=require(a205_0x4090b4(0x13b)),connection_dto_1=require('../dto/connection.dto');let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x303213){const _0x14e9c4=a205_0x4090b4;this[_0x14e9c4(0x142)]=new core_1[(_0x14e9c4(0x163))](SalesforceService_1[_0x14e9c4(0x174)]),this[_0x14e9c4(0x13f)]=(0x0,create_request_util_1[_0x14e9c4(0x153)])(_0x303213),this[_0x14e9c4(0x144)]=constants_1[_0x14e9c4(0x140)]?'':_0x14e9c4(0x166);}['setLoggerId'](_0x2f7bd3){const _0x2eafe2=a205_0x4090b4;this['loggerId']=_0x2f7bd3,this[_0x2eafe2(0x138)]=new salesforce_logger_service_1[(_0x2eafe2(0x177))](this);}[a205_0x4090b4(0x14f)](){const _0x27e966=a205_0x4090b4;return this[_0x27e966(0x138)];}async['retrieveComponents'](_0x5ebf29){const _0x39d695=a205_0x4090b4;try{this[_0x39d695(0x142)][_0x39d695(0x17c)](_0x39d695(0x156),_0x5ebf29['length']);const _0x55c0db=await this[_0x39d695(0x13f)][_0x39d695(0x167)]('services/apexrest'+this[_0x39d695(0x144)]+_0x39d695(0x15c),{'componentIds':_0x5ebf29,'loggerId':this[_0x39d695(0x17d)]})[_0x39d695(0x151)](({data:_0x37d8cd})=>_0x37d8cd);return _0x55c0db;}catch(_0x5d2407){this[_0x39d695(0x142)][_0x39d695(0x16a)](_0x5d2407);throw new salesforce_error_1[(_0x39d695(0x141))](_0x5d2407);}}async['deleteAttachment'](_0x57d9d3){const _0x4634f0=a205_0x4090b4;try{this[_0x4634f0(0x142)][_0x4634f0(0x17c)](_0x4634f0(0x169),_0x57d9d3),await this[_0x4634f0(0x13f)][_0x4634f0(0x16d)](_0x4634f0(0x149)+constants_1[_0x4634f0(0x154)]+_0x4634f0(0x165)+_0x57d9d3);}catch(_0x5002be){this['logger']['error'](_0x5002be);throw new salesforce_error_1[(_0x4634f0(0x141))](_0x5002be);}}async[a205_0x4090b4(0x162)](_0x24480c,_0x29d7d6=![]){const _0x3cce9c=a205_0x4090b4;try{this[_0x3cce9c(0x142)][_0x3cce9c(0x17c)](_0x3cce9c(0x14e),_0x24480c);const _0x5b1611=await this[_0x3cce9c(0x13f)][_0x3cce9c(0x148)](_0x3cce9c(0x149)+constants_1[_0x3cce9c(0x154)]+_0x3cce9c(0x165)+_0x24480c+_0x3cce9c(0x13c),{'responseType':_0x29d7d6?_0x3cce9c(0x17a):'text'})[_0x3cce9c(0x151)](({data:_0x5ae73f})=>_0x5ae73f);return _0x5b1611;}catch(_0x1f31a7){this[_0x3cce9c(0x142)][_0x3cce9c(0x16a)](_0x1f31a7);throw new salesforce_error_1[(_0x3cce9c(0x141))](_0x1f31a7);}}async['sendLog'](_0x37b311){const _0x45377f=a205_0x4090b4;try{_0x37b311[_0x45377f(0x16c)](_0xa1489a=>this['logger'][_0x45377f(0x17c)](_0x45377f(0x139),_0xa1489a)),await this[_0x45377f(0x13f)][_0x45377f(0x167)](_0x45377f(0x176)+this['namespace']+'/logger',{'messages':_0x37b311,'loggerId':this[_0x45377f(0x17d)]});}catch(_0x28fdbe){this[_0x45377f(0x142)][_0x45377f(0x16a)](_0x28fdbe);throw new internal_server_error_1[(_0x45377f(0x14b))](_0x28fdbe);}}async[a205_0x4090b4(0x170)](_0x12d35b,_0xab5d71){const _0x172fa2=a205_0x4090b4;try{const {data:_0x3ad41d}=await this[_0x172fa2(0x13f)][_0x172fa2(0x167)](_0x172fa2(0x149)+constants_1[_0x172fa2(0x154)]+_0x172fa2(0x158)+_0x12d35b+'/',_0xab5d71);return _0x3ad41d['id'];}catch(_0x285968){throw new salesforce_error_1['SalesforceError'](_0x285968);}}async[a205_0x4090b4(0x168)](_0x3b23b2,_0x660e6,_0x3c824e){const _0x2c5344=a205_0x4090b4;try{await this[_0x2c5344(0x13f)][_0x2c5344(0x179)](_0x2c5344(0x149)+constants_1[_0x2c5344(0x154)]+_0x2c5344(0x158)+_0x3b23b2+'/'+_0x660e6,_0x3c824e);}catch(_0x47e39a){throw new salesforce_error_1[(_0x2c5344(0x141))](_0x47e39a);}}async[a205_0x4090b4(0x145)](_0x4cde58){const _0x2cc30c=a205_0x4090b4;try{const {data:_0x22fcc0}=await this[_0x2cc30c(0x13f)][_0x2cc30c(0x148)](_0x2cc30c(0x176)+this[_0x2cc30c(0x144)]+_0x2cc30c(0x15b),{'params':{'connectionId':_0x4cde58}});return new connection_dto_1[(_0x2cc30c(0x16f))](_0x22fcc0);}catch(_0x273ce6){throw new salesforce_error_1[(_0x2cc30c(0x141))](_0x273ce6);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a205_0x4090b4(0x160)])()),__metadata(a205_0x4090b4(0x15d),[salesforce_auth_service_1['SalesforceAuthService']])],SalesforceService),exports['SalesforceService']=SalesforceService;