const a239_0x174a80=a239_0xe9d8;(function(_0x24dac0,_0x28c020){const _0x5b79a0=a239_0xe9d8,_0x22c748=_0x24dac0();while(!![]){try{const _0x16a6e8=parseInt(_0x5b79a0(0x165))/0x1*(parseInt(_0x5b79a0(0x145))/0x2)+-parseInt(_0x5b79a0(0x142))/0x3+-parseInt(_0x5b79a0(0x168))/0x4*(-parseInt(_0x5b79a0(0x159))/0x5)+parseInt(_0x5b79a0(0x14c))/0x6*(-parseInt(_0x5b79a0(0x166))/0x7)+parseInt(_0x5b79a0(0x13b))/0x8*(-parseInt(_0x5b79a0(0x146))/0x9)+-parseInt(_0x5b79a0(0x148))/0xa*(parseInt(_0x5b79a0(0x176))/0xb)+-parseInt(_0x5b79a0(0x154))/0xc*(-parseInt(_0x5b79a0(0x14a))/0xd);if(_0x16a6e8===_0x28c020)break;else _0x22c748['push'](_0x22c748['shift']());}catch(_0xdab37c){_0x22c748['push'](_0x22c748['shift']());}}}(a239_0x460b,0xc8b87));const a239_0xb1630b=(function(){let _0x20a1ff=!![];return function(_0x1aa8e8,_0x48b5cc){const _0x4f0ede=_0x20a1ff?function(){const _0x2ef602=a239_0xe9d8;if(_0x48b5cc){const _0x595cf8=_0x48b5cc[_0x2ef602(0x14d)](_0x1aa8e8,arguments);return _0x48b5cc=null,_0x595cf8;}}:function(){};return _0x20a1ff=![],_0x4f0ede;};}()),a239_0xfb500e=a239_0xb1630b(this,function(){const _0xddf890=a239_0xe9d8;return a239_0xfb500e['toString']()[_0xddf890(0x16f)](_0xddf890(0x153))['toString']()[_0xddf890(0x16c)](a239_0xfb500e)[_0xddf890(0x16f)]('(((.+)+)+)+$');});function a239_0xe9d8(_0xf816e9,_0x3492ff){const _0x181c5a=a239_0x460b();return a239_0xe9d8=function(_0xfb500e,_0xb1630b){_0xfb500e=_0xfb500e-0x135;let _0x460b8a=_0x181c5a[_0xfb500e];return _0x460b8a;},a239_0xe9d8(_0xf816e9,_0x3492ff);}a239_0xfb500e();function a239_0x460b(){const _0x58a401=['SalesforceService','get','/logger','patchObject','SalesforceLogger','36WoouPg','76454qRRHpF','retrieveAttachment','8192JskMql','SALESFORCE_API_VERSION','../errors/salesforce.error','InternalServerError','constructor','[message]\x20%s','/connection','search','__decorate','forEach','post','getOwnPropertyDescriptor','Logger','createSalesforceRequest','1374329CsXBEH','request','decorate','createObject','/flosum_git','text','log','IGNORE_FLOSUM_GIT_NAMESPACE','fetchConnection','object','then','delete','./salesforce-logger.service','retrieve\x20attachment\x20%s\x20from\x20salesforce','/sobjects/Attachment/','sendLog','Service','logger','../../../../core/errors/internal-server.error','ConnectionDto','1064FlSEfJ','../utils/create-request.util','__param','function','metadata','/sobjects/','__esModule','631629BPBSDV','../dto/connection.dto','./salesforce-auth.service','29266kmSIBC','79983XWYZQz','patch','130dBZusE','internalLogger','2241343JyEnBS','SalesforceError','864dCtHoa','apply','namespace','length','defineProperty','Inject','getLogger','(((.+)+)+)+$','336fLFOnu','error','name','setLoggerId','services/apexrest','140JDMPTh','loggerId','deleteAttachment','retrieveComponents','../../../../constants','SalesforceAuthService','services/data/'];a239_0x460b=function(){return _0x58a401;};return a239_0x460b();}'use strict';var __decorate=this&&this[a239_0x174a80(0x170)]||function(_0x4e2406,_0x1abffa,_0x2431b6,_0x2b1839){const _0x542f1d=a239_0x174a80;var _0x581bfa=arguments[_0x542f1d(0x14f)],_0x5879de=_0x581bfa<0x3?_0x1abffa:_0x2b1839===null?_0x2b1839=Object[_0x542f1d(0x173)](_0x1abffa,_0x2431b6):_0x2b1839,_0x357708;if(typeof Reflect===_0x542f1d(0x17f)&&typeof Reflect[_0x542f1d(0x178)]===_0x542f1d(0x13e))_0x5879de=Reflect[_0x542f1d(0x178)](_0x4e2406,_0x1abffa,_0x2431b6,_0x2b1839);else{for(var _0x395111=_0x4e2406[_0x542f1d(0x14f)]-0x1;_0x395111>=0x0;_0x395111--)if(_0x357708=_0x4e2406[_0x395111])_0x5879de=(_0x581bfa<0x3?_0x357708(_0x5879de):_0x581bfa>0x3?_0x357708(_0x1abffa,_0x2431b6,_0x5879de):_0x357708(_0x1abffa,_0x2431b6))||_0x5879de;}return _0x581bfa>0x3&&_0x5879de&&Object['defineProperty'](_0x1abffa,_0x2431b6,_0x5879de),_0x5879de;},__metadata=this&&this['__metadata']||function(_0x5173ba,_0x25950b){const _0x38863b=a239_0x174a80;if(typeof Reflect===_0x38863b(0x17f)&&typeof Reflect[_0x38863b(0x13f)]==='function')return Reflect['metadata'](_0x5173ba,_0x25950b);},__param=this&&this[a239_0x174a80(0x13d)]||function(_0x3c7cb8,_0x1ddb7f){return function(_0x32f7b4,_0x43911c){_0x1ddb7f(_0x32f7b4,_0x43911c,_0x3c7cb8);};},SalesforceService_1;Object[a239_0x174a80(0x150)](exports,a239_0x174a80(0x141),{'value':!![]}),exports[a239_0x174a80(0x160)]=void 0x0;const typedi_1=require('typedi'),core_1=require('../../../../core'),internal_server_error_1=require(a239_0x174a80(0x139)),salesforce_auth_service_1=require(a239_0x174a80(0x144)),constants_1=require(a239_0x174a80(0x15d)),create_request_util_1=require(a239_0x174a80(0x13c)),salesforce_logger_service_1=require(a239_0x174a80(0x182)),salesforce_error_1=require(a239_0x174a80(0x16a)),connection_dto_1=require(a239_0x174a80(0x143));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x3f719a){const _0x25cc57=a239_0x174a80;this[_0x25cc57(0x138)]=new core_1[(_0x25cc57(0x174))](SalesforceService_1[_0x25cc57(0x156)]),this[_0x25cc57(0x177)]=(0x0,create_request_util_1[_0x25cc57(0x175)])(_0x3f719a),this['namespace']=constants_1[_0x25cc57(0x17d)]?'':_0x25cc57(0x17a);}[a239_0x174a80(0x157)](_0x265292){const _0x42122e=a239_0x174a80;this[_0x42122e(0x15a)]=_0x265292,this[_0x42122e(0x149)]=new salesforce_logger_service_1[(_0x42122e(0x164))](this);}[a239_0x174a80(0x152)](){const _0x1ac2de=a239_0x174a80;return this[_0x1ac2de(0x149)];}async[a239_0x174a80(0x15c)](_0x276900){const _0xee6608=a239_0x174a80;try{this[_0xee6608(0x138)][_0xee6608(0x17c)]('retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x276900['length']);const _0x3450b8=await this[_0xee6608(0x177)][_0xee6608(0x172)](_0xee6608(0x158)+this['namespace']+'/attachments',{'componentIds':_0x276900,'loggerId':this[_0xee6608(0x15a)]})[_0xee6608(0x180)](({data:_0x279585})=>_0x279585);return _0x3450b8;}catch(_0xe9dc27){this[_0xee6608(0x138)][_0xee6608(0x155)](_0xe9dc27);throw new salesforce_error_1[(_0xee6608(0x14b))](_0xe9dc27);}}async[a239_0x174a80(0x15b)](_0xbe37f4){const _0x2a3109=a239_0x174a80;try{this['logger']['log']('delete\x20attachment\x20%s\x20from\x20salesforce',_0xbe37f4),await this[_0x2a3109(0x177)][_0x2a3109(0x181)]('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x2a3109(0x135)+_0xbe37f4);}catch(_0x58224e){this[_0x2a3109(0x138)][_0x2a3109(0x155)](_0x58224e);throw new salesforce_error_1['SalesforceError'](_0x58224e);}}async[a239_0x174a80(0x167)](_0x2d9a9c,_0x4092fd=![]){const _0x54f790=a239_0x174a80;try{this[_0x54f790(0x138)][_0x54f790(0x17c)](_0x54f790(0x183),_0x2d9a9c);const _0x6c48b5=await this['request'][_0x54f790(0x161)](_0x54f790(0x15f)+constants_1[_0x54f790(0x169)]+_0x54f790(0x135)+_0x2d9a9c+'/body',{'responseType':_0x4092fd?'arraybuffer':_0x54f790(0x17b)})[_0x54f790(0x180)](({data:_0x3582c3})=>_0x3582c3);return _0x6c48b5;}catch(_0x138184){this[_0x54f790(0x138)]['error'](_0x138184);throw new salesforce_error_1[(_0x54f790(0x14b))](_0x138184);}}async[a239_0x174a80(0x136)](_0x53977e){const _0xb9e1be=a239_0x174a80;try{_0x53977e[_0xb9e1be(0x171)](_0x599b25=>this['logger'][_0xb9e1be(0x17c)](_0xb9e1be(0x16d),_0x599b25)),await this['request'][_0xb9e1be(0x172)]('services/apexrest'+this[_0xb9e1be(0x14e)]+_0xb9e1be(0x162),{'messages':_0x53977e,'loggerId':this[_0xb9e1be(0x15a)]});}catch(_0x386ed3){this['logger'][_0xb9e1be(0x155)](_0x386ed3);throw new internal_server_error_1[(_0xb9e1be(0x16b))](_0x386ed3);}}async[a239_0x174a80(0x179)](_0x5329b8,_0x4b9911){const _0x8fb46=a239_0x174a80;try{const {data:_0x56d2b5}=await this['request'][_0x8fb46(0x172)](_0x8fb46(0x15f)+constants_1[_0x8fb46(0x169)]+_0x8fb46(0x140)+_0x5329b8+'/',_0x4b9911);return _0x56d2b5['id'];}catch(_0x399f23){throw new salesforce_error_1['SalesforceError'](_0x399f23);}}async[a239_0x174a80(0x163)](_0x10e8c2,_0x56b2f9,_0x4b472d){const _0x43d14a=a239_0x174a80;try{await this[_0x43d14a(0x177)][_0x43d14a(0x147)](_0x43d14a(0x15f)+constants_1[_0x43d14a(0x169)]+'/sobjects/'+_0x10e8c2+'/'+_0x56b2f9,_0x4b472d);}catch(_0x2735a0){throw new salesforce_error_1[(_0x43d14a(0x14b))](_0x2735a0);}}async[a239_0x174a80(0x17e)](_0x36ed31){const _0x50a3b7=a239_0x174a80;try{const {data:_0x4c63a8}=await this['request']['get'](_0x50a3b7(0x158)+this['namespace']+_0x50a3b7(0x16e),{'params':{'connectionId':_0x36ed31}});return new connection_dto_1[(_0x50a3b7(0x13a))](_0x4c63a8);}catch(_0x5a537e){throw new salesforce_error_1[(_0x50a3b7(0x14b))](_0x5a537e);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a239_0x174a80(0x137)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a239_0x174a80(0x151)])()),__metadata('design:paramtypes',[salesforce_auth_service_1[a239_0x174a80(0x15e)]])],SalesforceService),exports[a239_0x174a80(0x160)]=SalesforceService;