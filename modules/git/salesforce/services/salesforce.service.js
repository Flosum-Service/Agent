const a245_0x20044d=a245_0x17ab;(function(_0x2f6b1b,_0x59b99b){const _0x2254f5=a245_0x17ab,_0x775da1=_0x2f6b1b();while(!![]){try{const _0x3e5301=parseInt(_0x2254f5(0xa1))/0x1+-parseInt(_0x2254f5(0xbf))/0x2+parseInt(_0x2254f5(0xb4))/0x3+parseInt(_0x2254f5(0xaf))/0x4*(-parseInt(_0x2254f5(0xd9))/0x5)+-parseInt(_0x2254f5(0xc3))/0x6*(parseInt(_0x2254f5(0xd4))/0x7)+parseInt(_0x2254f5(0xcf))/0x8*(parseInt(_0x2254f5(0xbb))/0x9)+parseInt(_0x2254f5(0xa6))/0xa*(parseInt(_0x2254f5(0xe5))/0xb);if(_0x3e5301===_0x59b99b)break;else _0x775da1['push'](_0x775da1['shift']());}catch(_0x2981b2){_0x775da1['push'](_0x775da1['shift']());}}}(a245_0x5b22,0x3134a));function a245_0x17ab(_0x62d638,_0x4bb514){const _0x2761f7=a245_0x5b22();return a245_0x17ab=function(_0x4ea744,_0x2b4bd4){_0x4ea744=_0x4ea744-0x9d;let _0x5b2261=_0x2761f7[_0x4ea744];return _0x5b2261;},a245_0x17ab(_0x62d638,_0x4bb514);}const a245_0x2b4bd4=(function(){let _0x37d377=!![];return function(_0x3d71d5,_0x1134b2){const _0x4dc90c=_0x37d377?function(){const _0x93fe7a=a245_0x17ab;if(_0x1134b2){const _0x399bee=_0x1134b2[_0x93fe7a(0xc7)](_0x3d71d5,arguments);return _0x1134b2=null,_0x399bee;}}:function(){};return _0x37d377=![],_0x4dc90c;};}()),a245_0x4ea744=a245_0x2b4bd4(this,function(){const _0x5de77d=a245_0x17ab;return a245_0x4ea744[_0x5de77d(0xb3)]()[_0x5de77d(0xc9)](_0x5de77d(0xd2))[_0x5de77d(0xb3)]()[_0x5de77d(0xa8)](a245_0x4ea744)[_0x5de77d(0xc9)](_0x5de77d(0xd2));});a245_0x4ea744();function a245_0x5b22(){const _0xc9423e=['/sobjects/','SalesforceAuthService','46984jzommg','../../../../constants','then','(((.+)+)+)+$','createObject','630qHJNpM','getOwnPropertyDescriptor','design:paramtypes','retrieve\x20attachment\x20%s\x20from\x20salesforce','object','1460405xDqbpr','namespace','internalLogger','services/apexrest','services/data/','metadata','forEach','SALESFORCE_API_VERSION','__decorate','error','/logger','[message]\x20%s','66IOACjo','Service','../dto/connection.dto','setLoggerId','../../../../core/errors/internal-server.error','IGNORE_FLOSUM_GIT_NAMESPACE','71181VQClcq','retrieveComponents','logger','loggerId','/flosum_git','908090hKxNXm','createSalesforceRequest','constructor','defineProperty','/sobjects/Attachment/','request','sendLog','SalesforceService','/body','4YtqAwj','Inject','../utils/create-request.util','text','toString','104280jJqMww','fetchConnection','log','__metadata','../../../../core','getLogger','InternalServerError','351KfMpYC','decorate','deleteAttachment','post','615650GUJFjF','SalesforceLogger','get','function','5226dKuwLq','__esModule','SalesforceError','delete','apply','arraybuffer','search','length','./salesforce-auth.service','./salesforce-logger.service'];a245_0x5b22=function(){return _0xc9423e;};return a245_0x5b22();}'use strict';var __decorate=this&&this[a245_0x20044d(0xe1)]||function(_0x1c3b67,_0x9736cf,_0x11a233,_0x4e2dbe){const _0x165084=a245_0x20044d;var _0x3b8c3f=arguments[_0x165084(0xca)],_0xb3f5fa=_0x3b8c3f<0x3?_0x9736cf:_0x4e2dbe===null?_0x4e2dbe=Object[_0x165084(0xd5)](_0x9736cf,_0x11a233):_0x4e2dbe,_0x1bbde2;if(typeof Reflect==='object'&&typeof Reflect[_0x165084(0xbc)]===_0x165084(0xc2))_0xb3f5fa=Reflect[_0x165084(0xbc)](_0x1c3b67,_0x9736cf,_0x11a233,_0x4e2dbe);else{for(var _0x496bd5=_0x1c3b67[_0x165084(0xca)]-0x1;_0x496bd5>=0x0;_0x496bd5--)if(_0x1bbde2=_0x1c3b67[_0x496bd5])_0xb3f5fa=(_0x3b8c3f<0x3?_0x1bbde2(_0xb3f5fa):_0x3b8c3f>0x3?_0x1bbde2(_0x9736cf,_0x11a233,_0xb3f5fa):_0x1bbde2(_0x9736cf,_0x11a233))||_0xb3f5fa;}return _0x3b8c3f>0x3&&_0xb3f5fa&&Object[_0x165084(0xa9)](_0x9736cf,_0x11a233,_0xb3f5fa),_0xb3f5fa;},__metadata=this&&this[a245_0x20044d(0xb7)]||function(_0x3df1c2,_0x194bec){const _0x25388b=a245_0x20044d;if(typeof Reflect===_0x25388b(0xd8)&&typeof Reflect[_0x25388b(0xde)]===_0x25388b(0xc2))return Reflect['metadata'](_0x3df1c2,_0x194bec);},__param=this&&this['__param']||function(_0x242d46,_0x10087d){return function(_0x24bf63,_0x1c1f5d){_0x10087d(_0x24bf63,_0x1c1f5d,_0x242d46);};},SalesforceService_1;Object[a245_0x20044d(0xa9)](exports,a245_0x20044d(0xc4),{'value':!![]}),exports[a245_0x20044d(0xad)]=void 0x0;const typedi_1=require('typedi'),core_1=require(a245_0x20044d(0xb8)),internal_server_error_1=require(a245_0x20044d(0x9f)),salesforce_auth_service_1=require(a245_0x20044d(0xcb)),constants_1=require(a245_0x20044d(0xd0)),create_request_util_1=require(a245_0x20044d(0xb1)),salesforce_logger_service_1=require(a245_0x20044d(0xcc)),salesforce_error_1=require('../errors/salesforce.error'),connection_dto_1=require(a245_0x20044d(0x9d));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x3b7892){const _0xc40d80=a245_0x20044d;this['logger']=new core_1['Logger'](SalesforceService_1['name']),this['request']=(0x0,create_request_util_1[_0xc40d80(0xa7)])(_0x3b7892),this[_0xc40d80(0xda)]=constants_1[_0xc40d80(0xa0)]?'':_0xc40d80(0xa5);}[a245_0x20044d(0x9e)](_0x45da3d){const _0x32f7f8=a245_0x20044d;this[_0x32f7f8(0xa4)]=_0x45da3d,this['internalLogger']=new salesforce_logger_service_1[(_0x32f7f8(0xc0))](this);}[a245_0x20044d(0xb9)](){const _0x1a9b0f=a245_0x20044d;return this[_0x1a9b0f(0xdb)];}async[a245_0x20044d(0xa2)](_0x4fa939){const _0xbc9f11=a245_0x20044d;try{this[_0xbc9f11(0xa3)][_0xbc9f11(0xb6)]('retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x4fa939[_0xbc9f11(0xca)]);const _0x532d82=await this['request'][_0xbc9f11(0xbe)](_0xbc9f11(0xdc)+this[_0xbc9f11(0xda)]+'/attachments',{'componentIds':_0x4fa939,'loggerId':this[_0xbc9f11(0xa4)]})['then'](({data:_0x4f67c7})=>_0x4f67c7);return _0x532d82;}catch(_0x22254d){this['logger'][_0xbc9f11(0xe2)](_0x22254d);throw new salesforce_error_1['SalesforceError'](_0x22254d);}}async[a245_0x20044d(0xbd)](_0x1195d5){const _0x238f70=a245_0x20044d;try{this[_0x238f70(0xa3)][_0x238f70(0xb6)]('delete\x20attachment\x20%s\x20from\x20salesforce',_0x1195d5),await this[_0x238f70(0xab)][_0x238f70(0xc6)](_0x238f70(0xdd)+constants_1[_0x238f70(0xe0)]+'/sobjects/Attachment/'+_0x1195d5);}catch(_0x58c4fd){this[_0x238f70(0xa3)][_0x238f70(0xe2)](_0x58c4fd);throw new salesforce_error_1[(_0x238f70(0xc5))](_0x58c4fd);}}async['retrieveAttachment'](_0x597226,_0x47df29=![]){const _0x5491ac=a245_0x20044d;try{this[_0x5491ac(0xa3)][_0x5491ac(0xb6)](_0x5491ac(0xd7),_0x597226);const _0x26645b=await this[_0x5491ac(0xab)][_0x5491ac(0xc1)](_0x5491ac(0xdd)+constants_1[_0x5491ac(0xe0)]+_0x5491ac(0xaa)+_0x597226+_0x5491ac(0xae),{'responseType':_0x47df29?_0x5491ac(0xc8):_0x5491ac(0xb2)})[_0x5491ac(0xd1)](({data:_0x1a6216})=>_0x1a6216);return _0x26645b;}catch(_0x421c82){this['logger'][_0x5491ac(0xe2)](_0x421c82);throw new salesforce_error_1['SalesforceError'](_0x421c82);}}async[a245_0x20044d(0xac)](_0x5e9f97){const _0x27cfa6=a245_0x20044d;try{_0x5e9f97[_0x27cfa6(0xdf)](_0xcaf8aa=>this['logger'][_0x27cfa6(0xb6)](_0x27cfa6(0xe4),_0xcaf8aa)),await this[_0x27cfa6(0xab)][_0x27cfa6(0xbe)](_0x27cfa6(0xdc)+this[_0x27cfa6(0xda)]+_0x27cfa6(0xe3),{'messages':_0x5e9f97,'loggerId':this['loggerId']});}catch(_0x35e263){this[_0x27cfa6(0xa3)][_0x27cfa6(0xe2)](_0x35e263);throw new internal_server_error_1[(_0x27cfa6(0xba))](_0x35e263);}}async[a245_0x20044d(0xd3)](_0x3e4471,_0x1c2e5d){const _0x3f5b17=a245_0x20044d;try{const {data:_0x5aaf4a}=await this[_0x3f5b17(0xab)][_0x3f5b17(0xbe)](_0x3f5b17(0xdd)+constants_1[_0x3f5b17(0xe0)]+_0x3f5b17(0xcd)+_0x3e4471+'/',_0x1c2e5d);return _0x5aaf4a['id'];}catch(_0x2f5a84){throw new salesforce_error_1[(_0x3f5b17(0xc5))](_0x2f5a84);}}async['patchObject'](_0x1d1f47,_0x4e43a7,_0x35e8e0){const _0x5a74b8=a245_0x20044d;try{await this['request']['patch']('services/data/'+constants_1[_0x5a74b8(0xe0)]+'/sobjects/'+_0x1d1f47+'/'+_0x4e43a7,_0x35e8e0);}catch(_0x4a6985){throw new salesforce_error_1['SalesforceError'](_0x4a6985);}}async[a245_0x20044d(0xb5)](_0x45d0ee){const _0x4d0ff4=a245_0x20044d;try{const {data:_0x519d66}=await this[_0x4d0ff4(0xab)]['get']('services/apexrest'+this['namespace']+'/connection',{'params':{'connectionId':_0x45d0ee}});return new connection_dto_1['ConnectionDto'](_0x519d66);}catch(_0x55ab28){throw new salesforce_error_1[(_0x4d0ff4(0xc5))](_0x55ab28);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a245_0x20044d(0xe6)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a245_0x20044d(0xb0)])()),__metadata(a245_0x20044d(0xd6),[salesforce_auth_service_1[a245_0x20044d(0xce)]])],SalesforceService),exports[a245_0x20044d(0xad)]=SalesforceService;