const a193_0x4d1c5a=a193_0x39c0;(function(_0x18c662,_0x3d4d7e){const _0x2d731e=a193_0x39c0,_0xacc698=_0x18c662();while(!![]){try{const _0x5d9582=-parseInt(_0x2d731e(0xc7))/0x1*(parseInt(_0x2d731e(0xce))/0x2)+parseInt(_0x2d731e(0xae))/0x3+parseInt(_0x2d731e(0xbc))/0x4*(-parseInt(_0x2d731e(0xac))/0x5)+-parseInt(_0x2d731e(0xd6))/0x6+parseInt(_0x2d731e(0xe4))/0x7+parseInt(_0x2d731e(0xb8))/0x8+-parseInt(_0x2d731e(0xd8))/0x9;if(_0x5d9582===_0x3d4d7e)break;else _0xacc698['push'](_0xacc698['shift']());}catch(_0x1aaefe){_0xacc698['push'](_0xacc698['shift']());}}}(a193_0x1b36,0x643ea));const a193_0xe857aa=(function(){let _0x25a74b=!![];return function(_0x49afd5,_0x330051){const _0x19948f=_0x25a74b?function(){if(_0x330051){const _0x25a48e=_0x330051['apply'](_0x49afd5,arguments);return _0x330051=null,_0x25a48e;}}:function(){};return _0x25a74b=![],_0x19948f;};}()),a193_0x49bc81=a193_0xe857aa(this,function(){const _0x54eeca=a193_0x39c0;return a193_0x49bc81[_0x54eeca(0xaf)]()['search']('(((.+)+)+)+$')[_0x54eeca(0xaf)]()['constructor'](a193_0x49bc81)[_0x54eeca(0xbd)](_0x54eeca(0xc9));});a193_0x49bc81();function a193_0x39c0(_0x35f32b,_0x5abf79){const _0x197dd0=a193_0x1b36();return a193_0x39c0=function(_0x49bc81,_0xe857aa){_0x49bc81=_0x49bc81-0xa1;let _0x1b365e=_0x197dd0[_0x49bc81];return _0x1b365e;},a193_0x39c0(_0x35f32b,_0x5abf79);}'use strict';var __decorate=this&&this[a193_0x4d1c5a(0xcb)]||function(_0x2af68c,_0x27a067,_0x51f843,_0x2b0cb3){const _0x2ac395=a193_0x4d1c5a;var _0x170b49=arguments[_0x2ac395(0xa3)],_0x4005c9=_0x170b49<0x3?_0x27a067:_0x2b0cb3===null?_0x2b0cb3=Object[_0x2ac395(0xb0)](_0x27a067,_0x51f843):_0x2b0cb3,_0x23fd6e;if(typeof Reflect===_0x2ac395(0xdf)&&typeof Reflect[_0x2ac395(0xc3)]===_0x2ac395(0xbe))_0x4005c9=Reflect[_0x2ac395(0xc3)](_0x2af68c,_0x27a067,_0x51f843,_0x2b0cb3);else{for(var _0x3713a8=_0x2af68c['length']-0x1;_0x3713a8>=0x0;_0x3713a8--)if(_0x23fd6e=_0x2af68c[_0x3713a8])_0x4005c9=(_0x170b49<0x3?_0x23fd6e(_0x4005c9):_0x170b49>0x3?_0x23fd6e(_0x27a067,_0x51f843,_0x4005c9):_0x23fd6e(_0x27a067,_0x51f843))||_0x4005c9;}return _0x170b49>0x3&&_0x4005c9&&Object['defineProperty'](_0x27a067,_0x51f843,_0x4005c9),_0x4005c9;},__metadata=this&&this[a193_0x4d1c5a(0xc8)]||function(_0x1760fb,_0x37c469){const _0x33232d=a193_0x4d1c5a;if(typeof Reflect===_0x33232d(0xdf)&&typeof Reflect['metadata']===_0x33232d(0xbe))return Reflect[_0x33232d(0xa8)](_0x1760fb,_0x37c469);},__param=this&&this[a193_0x4d1c5a(0xdc)]||function(_0x4e0163,_0x41a4e3){return function(_0x257254,_0x1fc198){_0x41a4e3(_0x257254,_0x1fc198,_0x4e0163);};},SalesforceService_1;Object[a193_0x4d1c5a(0xd9)](exports,a193_0x4d1c5a(0xd4),{'value':!![]}),exports['SalesforceService']=void 0x0;const typedi_1=require('typedi'),core_1=require(a193_0x4d1c5a(0xbb)),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require(a193_0x4d1c5a(0xc6)),constants_1=require(a193_0x4d1c5a(0xcd)),create_request_util_1=require(a193_0x4d1c5a(0xb4)),salesforce_logger_service_1=require('./salesforce-logger.service'),salesforce_error_1=require(a193_0x4d1c5a(0xd5)),connection_dto_1=require(a193_0x4d1c5a(0xad));function a193_0x1b36(){const _0x4dfa58=['__esModule','../errors/salesforce.error','2728860tWdrOL','SalesforceService','1279881Zgbify','defineProperty','ConnectionDto','/attachments','__param','Service','IGNORE_FLOSUM_GIT_NAMESPACE','object','arraybuffer','/logger','name','[message]\x20%s','1680672LSZrUh','/flosum_git','sendLog','log','SalesforceError','/sobjects/Attachment/','forEach','length','request','SALESFORCE_API_VERSION','SalesforceAuthService','delete\x20attachment\x20%s\x20from\x20salesforce','metadata','namespace','/body','services/data/','72730OtAveD','../dto/connection.dto','1847985NDZjyV','toString','getOwnPropertyDescriptor','delete','error','internalLogger','../utils/create-request.util','patchObject','logger','get','3464032MBRfiE','getLogger','Logger','../../../../core','72ffBngi','search','function','design:paramtypes','/connection','then','patch','decorate','/sobjects/','post','./salesforce-auth.service','2THZYwf','__metadata','(((.+)+)+)+$','loggerId','__decorate','deleteAttachment','../../../../constants','19646rnXRrF','retrieveAttachment','createSalesforceRequest','services/apexrest','fetchConnection','retrieveComponents'];a193_0x1b36=function(){return _0x4dfa58;};return a193_0x1b36();}let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x2151dd){const _0xf1b5e0=a193_0x4d1c5a;this['logger']=new core_1[(_0xf1b5e0(0xba))](SalesforceService_1[_0xf1b5e0(0xe2)]),this[_0xf1b5e0(0xa4)]=create_request_util_1[_0xf1b5e0(0xd0)](_0x2151dd),this[_0xf1b5e0(0xa9)]=constants_1[_0xf1b5e0(0xde)]?'':_0xf1b5e0(0xe5);}['setLoggerId'](_0x4aa396){const _0x14941a=a193_0x4d1c5a;this['loggerId']=_0x4aa396,this[_0x14941a(0xb3)]=new salesforce_logger_service_1['SalesforceLogger'](this);}[a193_0x4d1c5a(0xb9)](){const _0x15e82c=a193_0x4d1c5a;return this[_0x15e82c(0xb3)];}async[a193_0x4d1c5a(0xd3)](_0x9bf76d){const _0x66fe6d=a193_0x4d1c5a;try{this['logger'][_0x66fe6d(0xe7)]('retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x9bf76d[_0x66fe6d(0xa3)]);const _0x270b47=await this[_0x66fe6d(0xa4)]['post'](_0x66fe6d(0xd1)+this[_0x66fe6d(0xa9)]+_0x66fe6d(0xdb),{'componentIds':_0x9bf76d,'loggerId':this[_0x66fe6d(0xca)]})[_0x66fe6d(0xc1)](({data:_0x4861a9})=>_0x4861a9);return _0x270b47;}catch(_0x442f4f){this[_0x66fe6d(0xb6)]['error'](_0x442f4f);throw new salesforce_error_1[(_0x66fe6d(0xe8))](_0x442f4f);}}async[a193_0x4d1c5a(0xcc)](_0x87159e){const _0x53ca16=a193_0x4d1c5a;try{this[_0x53ca16(0xb6)][_0x53ca16(0xe7)](_0x53ca16(0xa7),_0x87159e),await this[_0x53ca16(0xa4)][_0x53ca16(0xb1)](_0x53ca16(0xab)+constants_1[_0x53ca16(0xa5)]+_0x53ca16(0xa1)+_0x87159e);}catch(_0x5dae4c){this['logger'][_0x53ca16(0xb2)](_0x5dae4c);throw new salesforce_error_1[(_0x53ca16(0xe8))](_0x5dae4c);}}async[a193_0x4d1c5a(0xcf)](_0x50d9de,_0x75b37c=![]){const _0x2ed949=a193_0x4d1c5a;try{this[_0x2ed949(0xb6)][_0x2ed949(0xe7)]('retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x50d9de);const _0x1ed7da=await this[_0x2ed949(0xa4)][_0x2ed949(0xb7)]('services/data/'+constants_1[_0x2ed949(0xa5)]+_0x2ed949(0xa1)+_0x50d9de+_0x2ed949(0xaa),{'responseType':_0x75b37c?_0x2ed949(0xe0):'text'})[_0x2ed949(0xc1)](({data:_0x4efce0})=>_0x4efce0);return _0x1ed7da;}catch(_0x10e7db){this[_0x2ed949(0xb6)]['error'](_0x10e7db);throw new salesforce_error_1[(_0x2ed949(0xe8))](_0x10e7db);}}async[a193_0x4d1c5a(0xe6)](_0x41e8a5){const _0xcd634c=a193_0x4d1c5a;try{_0x41e8a5[_0xcd634c(0xa2)](_0x4923c7=>this[_0xcd634c(0xb6)][_0xcd634c(0xe7)](_0xcd634c(0xe3),_0x4923c7)),await this[_0xcd634c(0xa4)][_0xcd634c(0xc5)](_0xcd634c(0xd1)+this[_0xcd634c(0xa9)]+_0xcd634c(0xe1),{'messages':_0x41e8a5,'loggerId':this[_0xcd634c(0xca)]});}catch(_0x33d98f){this[_0xcd634c(0xb6)]['error'](_0x33d98f);throw new internal_server_error_1['InternalServerError'](_0x33d98f);}}async['createObject'](_0x54a197,_0x24496d){const _0x5a289b=a193_0x4d1c5a;try{const {data:_0x65ca15}=await this[_0x5a289b(0xa4)]['post'](_0x5a289b(0xab)+constants_1[_0x5a289b(0xa5)]+'/sobjects/'+_0x54a197+'/',_0x24496d);return _0x65ca15['id'];}catch(_0x267730){throw new salesforce_error_1['SalesforceError'](_0x267730);}}async[a193_0x4d1c5a(0xb5)](_0x41d8c7,_0x256f10,_0x43707d){const _0x2fd3ea=a193_0x4d1c5a;try{await this[_0x2fd3ea(0xa4)][_0x2fd3ea(0xc2)](_0x2fd3ea(0xab)+constants_1['SALESFORCE_API_VERSION']+_0x2fd3ea(0xc4)+_0x41d8c7+'/'+_0x256f10,_0x43707d);}catch(_0x102c6e){throw new salesforce_error_1[(_0x2fd3ea(0xe8))](_0x102c6e);}}async[a193_0x4d1c5a(0xd2)](_0x5c3a3a){const _0x3fb85c=a193_0x4d1c5a;try{const {data:_0x45c454}=await this['request'][_0x3fb85c(0xb7)](_0x3fb85c(0xd1)+this[_0x3fb85c(0xa9)]+_0x3fb85c(0xc0),{'params':{'connectionId':_0x5c3a3a}});return new connection_dto_1[(_0x3fb85c(0xda))](_0x45c454);}catch(_0x5c204e){throw new salesforce_error_1[(_0x3fb85c(0xe8))](_0x5c204e);}}};SalesforceService=SalesforceService_1=__decorate([typedi_1[a193_0x4d1c5a(0xdd)]({'transient':!![]}),__param(0x0,typedi_1['Inject']()),__metadata(a193_0x4d1c5a(0xbf),[salesforce_auth_service_1[a193_0x4d1c5a(0xa6)]])],SalesforceService),exports[a193_0x4d1c5a(0xd7)]=SalesforceService;