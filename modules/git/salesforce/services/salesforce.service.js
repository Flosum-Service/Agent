function a245_0x3b3a(){const _0x32c9a3=['constructor','patch','createSalesforceRequest','retrieveAttachment','7261745AojbRO','get','413322bZxKpY','SALESFORCE_API_VERSION','error','__esModule','204953YcUSmE','design:paramtypes','__metadata','getLogger','/sobjects/','metadata','19321168PuUtgl','/sobjects/Attachment/','../../../../core','decorate','post','then','/flosum_git','1643313KeDHWu','services/apexrest','Logger','9yhbRdY','SalesforceError','function','../dto/connection.dto','../../../../core/errors/internal-server.error','../errors/salesforce.error','/connection','logger','/attachments','fetchConnection','text','name','retrieve\x20attachment\x20%s\x20from\x20salesforce','30qqxJgS','patchObject','180424onZdiv','../utils/create-request.util','../../../../constants','request','length','services/data/','getOwnPropertyDescriptor','forEach','InternalServerError','toString','namespace','SalesforceService','/body','(((.+)+)+)+$','/logger','loggerId','object','log','internalLogger','__decorate','ConnectionDto','apply','1946061uoufeT','sendLog','deleteAttachment','__param','SalesforceAuthService','./salesforce-logger.service'];a245_0x3b3a=function(){return _0x32c9a3;};return a245_0x3b3a();}const a245_0x2ec9fe=a245_0x2ff2;(function(_0xc1881e,_0x2b8cc3){const _0x2eeea8=a245_0x2ff2,_0x23a71b=_0xc1881e();while(!![]){try{const _0x39ee20=parseInt(_0x2eeea8(0x1f0))/0x1+parseInt(_0x2eeea8(0x1ec))/0x2+parseInt(_0x2eeea8(0x1e0))/0x3+-parseInt(_0x2eeea8(0x20f))/0x4+-parseInt(_0x2eeea8(0x1ea))/0x5+parseInt(_0x2eeea8(0x20d))/0x6*(-parseInt(_0x2eeea8(0x1fd))/0x7)+parseInt(_0x2eeea8(0x1f6))/0x8*(parseInt(_0x2eeea8(0x200))/0x9);if(_0x39ee20===_0x2b8cc3)break;else _0x23a71b['push'](_0x23a71b['shift']());}catch(_0x52827d){_0x23a71b['push'](_0x23a71b['shift']());}}}(a245_0x3b3a,0xc4565));const a245_0x209601=(function(){let _0x4be2dc=!![];return function(_0x56b584,_0x12f504){const _0x2f033c=_0x4be2dc?function(){const _0x5d4058=a245_0x2ff2;if(_0x12f504){const _0x19a9a1=_0x12f504[_0x5d4058(0x224)](_0x56b584,arguments);return _0x12f504=null,_0x19a9a1;}}:function(){};return _0x4be2dc=![],_0x2f033c;};}()),a245_0x680fe1=a245_0x209601(this,function(){const _0x3b4380=a245_0x2ff2;return a245_0x680fe1[_0x3b4380(0x218)]()['search']('(((.+)+)+)+$')[_0x3b4380(0x218)]()[_0x3b4380(0x1e6)](a245_0x680fe1)['search'](_0x3b4380(0x21c));});a245_0x680fe1();'use strict';var __decorate=this&&this[a245_0x2ec9fe(0x222)]||function(_0x3c0083,_0x3000c0,_0x3188b4,_0x48a350){const _0x33e163=a245_0x2ec9fe;var _0xe681ae=arguments['length'],_0x58f339=_0xe681ae<0x3?_0x3000c0:_0x48a350===null?_0x48a350=Object[_0x33e163(0x215)](_0x3000c0,_0x3188b4):_0x48a350,_0x14486f;if(typeof Reflect===_0x33e163(0x21f)&&typeof Reflect[_0x33e163(0x1f9)]===_0x33e163(0x202))_0x58f339=Reflect[_0x33e163(0x1f9)](_0x3c0083,_0x3000c0,_0x3188b4,_0x48a350);else{for(var _0x48160b=_0x3c0083['length']-0x1;_0x48160b>=0x0;_0x48160b--)if(_0x14486f=_0x3c0083[_0x48160b])_0x58f339=(_0xe681ae<0x3?_0x14486f(_0x58f339):_0xe681ae>0x3?_0x14486f(_0x3000c0,_0x3188b4,_0x58f339):_0x14486f(_0x3000c0,_0x3188b4))||_0x58f339;}return _0xe681ae>0x3&&_0x58f339&&Object['defineProperty'](_0x3000c0,_0x3188b4,_0x58f339),_0x58f339;},__metadata=this&&this[a245_0x2ec9fe(0x1f2)]||function(_0x5912cd,_0x159e43){const _0x2c689e=a245_0x2ec9fe;if(typeof Reflect===_0x2c689e(0x21f)&&typeof Reflect[_0x2c689e(0x1f5)]===_0x2c689e(0x202))return Reflect[_0x2c689e(0x1f5)](_0x5912cd,_0x159e43);},__param=this&&this[a245_0x2ec9fe(0x1e3)]||function(_0x21184e,_0x4a7e6a){return function(_0x1b7411,_0x5a4bf3){_0x4a7e6a(_0x1b7411,_0x5a4bf3,_0x21184e);};},SalesforceService_1;function a245_0x2ff2(_0x2d2983,_0x5a5d03){const _0x214696=a245_0x3b3a();return a245_0x2ff2=function(_0x680fe1,_0x209601){_0x680fe1=_0x680fe1-0x1e0;let _0x3b3a4a=_0x214696[_0x680fe1];return _0x3b3a4a;},a245_0x2ff2(_0x2d2983,_0x5a5d03);}Object['defineProperty'](exports,a245_0x2ec9fe(0x1ef),{'value':!![]}),exports[a245_0x2ec9fe(0x21a)]=void 0x0;const typedi_1=require('typedi'),core_1=require(a245_0x2ec9fe(0x1f8)),internal_server_error_1=require(a245_0x2ec9fe(0x204)),salesforce_auth_service_1=require('./salesforce-auth.service'),constants_1=require(a245_0x2ec9fe(0x211)),create_request_util_1=require(a245_0x2ec9fe(0x210)),salesforce_logger_service_1=require(a245_0x2ec9fe(0x1e5)),salesforce_error_1=require(a245_0x2ec9fe(0x205)),connection_dto_1=require(a245_0x2ec9fe(0x203));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x214c24){const _0x2e24fe=a245_0x2ec9fe;this[_0x2e24fe(0x207)]=new core_1[(_0x2e24fe(0x1ff))](SalesforceService_1[_0x2e24fe(0x20b)]),this[_0x2e24fe(0x212)]=(0x0,create_request_util_1[_0x2e24fe(0x1e8)])(_0x214c24),this[_0x2e24fe(0x219)]=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':_0x2e24fe(0x1fc);}['setLoggerId'](_0x5eb2b1){const _0x347f91=a245_0x2ec9fe;this[_0x347f91(0x21e)]=_0x5eb2b1,this[_0x347f91(0x221)]=new salesforce_logger_service_1['SalesforceLogger'](this);}[a245_0x2ec9fe(0x1f3)](){const _0x59c67a=a245_0x2ec9fe;return this[_0x59c67a(0x221)];}async['retrieveComponents'](_0x5b4060){const _0x21422c=a245_0x2ec9fe;try{this['logger']['log']('retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x5b4060[_0x21422c(0x213)]);const _0x28e081=await this[_0x21422c(0x212)]['post']('services/apexrest'+this[_0x21422c(0x219)]+_0x21422c(0x208),{'componentIds':_0x5b4060,'loggerId':this[_0x21422c(0x21e)]})[_0x21422c(0x1fb)](({data:_0x3812d0})=>_0x3812d0);return _0x28e081;}catch(_0x3178d8){this[_0x21422c(0x207)][_0x21422c(0x1ee)](_0x3178d8);throw new salesforce_error_1[(_0x21422c(0x201))](_0x3178d8);}}async[a245_0x2ec9fe(0x1e2)](_0x2ee876){const _0x3abf34=a245_0x2ec9fe;try{this[_0x3abf34(0x207)][_0x3abf34(0x220)]('delete\x20attachment\x20%s\x20from\x20salesforce',_0x2ee876),await this[_0x3abf34(0x212)]['delete']('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x3abf34(0x1f7)+_0x2ee876);}catch(_0x5ea385){this[_0x3abf34(0x207)][_0x3abf34(0x1ee)](_0x5ea385);throw new salesforce_error_1[(_0x3abf34(0x201))](_0x5ea385);}}async[a245_0x2ec9fe(0x1e9)](_0x45c0df,_0x368c92=![]){const _0x1f822b=a245_0x2ec9fe;try{this[_0x1f822b(0x207)][_0x1f822b(0x220)](_0x1f822b(0x20c),_0x45c0df);const _0x1e77e5=await this[_0x1f822b(0x212)][_0x1f822b(0x1eb)](_0x1f822b(0x214)+constants_1[_0x1f822b(0x1ed)]+'/sobjects/Attachment/'+_0x45c0df+_0x1f822b(0x21b),{'responseType':_0x368c92?'arraybuffer':_0x1f822b(0x20a)})[_0x1f822b(0x1fb)](({data:_0x57226b})=>_0x57226b);return _0x1e77e5;}catch(_0xf66dd7){this['logger']['error'](_0xf66dd7);throw new salesforce_error_1[(_0x1f822b(0x201))](_0xf66dd7);}}async[a245_0x2ec9fe(0x1e1)](_0x20144e){const _0x5c796b=a245_0x2ec9fe;try{_0x20144e[_0x5c796b(0x216)](_0x4b7d5b=>this[_0x5c796b(0x207)][_0x5c796b(0x220)]('[message]\x20%s',_0x4b7d5b)),await this[_0x5c796b(0x212)][_0x5c796b(0x1fa)](_0x5c796b(0x1fe)+this[_0x5c796b(0x219)]+_0x5c796b(0x21d),{'messages':_0x20144e,'loggerId':this['loggerId']});}catch(_0x259ac9){this[_0x5c796b(0x207)][_0x5c796b(0x1ee)](_0x259ac9);throw new internal_server_error_1[(_0x5c796b(0x217))](_0x259ac9);}}async['createObject'](_0x4f72ff,_0x1174e6){const _0x5cce06=a245_0x2ec9fe;try{const {data:_0x490601}=await this['request'][_0x5cce06(0x1fa)](_0x5cce06(0x214)+constants_1[_0x5cce06(0x1ed)]+_0x5cce06(0x1f4)+_0x4f72ff+'/',_0x1174e6);return _0x490601['id'];}catch(_0xb9d5b0){throw new salesforce_error_1['SalesforceError'](_0xb9d5b0);}}async[a245_0x2ec9fe(0x20e)](_0x52fefb,_0x7d4af3,_0x5be236){const _0x4ea6ce=a245_0x2ec9fe;try{await this['request'][_0x4ea6ce(0x1e7)](_0x4ea6ce(0x214)+constants_1[_0x4ea6ce(0x1ed)]+_0x4ea6ce(0x1f4)+_0x52fefb+'/'+_0x7d4af3,_0x5be236);}catch(_0x4f2552){throw new salesforce_error_1[(_0x4ea6ce(0x201))](_0x4f2552);}}async[a245_0x2ec9fe(0x209)](_0x24c0db){const _0x312851=a245_0x2ec9fe;try{const {data:_0x454bd3}=await this[_0x312851(0x212)][_0x312851(0x1eb)](_0x312851(0x1fe)+this[_0x312851(0x219)]+_0x312851(0x206),{'params':{'connectionId':_0x24c0db}});return new connection_dto_1[(_0x312851(0x223))](_0x454bd3);}catch(_0x4e90ef){throw new salesforce_error_1[(_0x312851(0x201))](_0x4e90ef);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__param(0x0,(0x0,typedi_1['Inject'])()),__metadata(a245_0x2ec9fe(0x1f1),[salesforce_auth_service_1[a245_0x2ec9fe(0x1e4)]])],SalesforceService),exports[a245_0x2ec9fe(0x21a)]=SalesforceService;