const a245_0x1cba82=a245_0x71ba;(function(_0x2964b1,_0x450b35){const _0x1723a7=a245_0x71ba,_0x50782a=_0x2964b1();while(!![]){try{const _0x3472d1=-parseInt(_0x1723a7(0x1f6))/0x1*(-parseInt(_0x1723a7(0x1f7))/0x2)+-parseInt(_0x1723a7(0x21f))/0x3+parseInt(_0x1723a7(0x1e8))/0x4*(-parseInt(_0x1723a7(0x1f9))/0x5)+-parseInt(_0x1723a7(0x211))/0x6+-parseInt(_0x1723a7(0x210))/0x7+-parseInt(_0x1723a7(0x1e9))/0x8*(-parseInt(_0x1723a7(0x21e))/0x9)+-parseInt(_0x1723a7(0x203))/0xa*(-parseInt(_0x1723a7(0x1fd))/0xb);if(_0x3472d1===_0x450b35)break;else _0x50782a['push'](_0x50782a['shift']());}catch(_0x4934f8){_0x50782a['push'](_0x50782a['shift']());}}}(a245_0x1b64,0x5f7a1));const a245_0x569577=(function(){let _0xc7d0ea=!![];return function(_0x51d7b3,_0xd7986e){const _0x27ebf4=_0xc7d0ea?function(){if(_0xd7986e){const _0xba7332=_0xd7986e['apply'](_0x51d7b3,arguments);return _0xd7986e=null,_0xba7332;}}:function(){};return _0xc7d0ea=![],_0x27ebf4;};}()),a245_0x242b84=a245_0x569577(this,function(){const _0x163533=a245_0x71ba;return a245_0x242b84[_0x163533(0x208)]()[_0x163533(0x206)](_0x163533(0x21b))['toString']()['constructor'](a245_0x242b84)[_0x163533(0x206)](_0x163533(0x21b));});function a245_0x71ba(_0x31618d,_0x8f11f9){const _0x2ca9a6=a245_0x1b64();return a245_0x71ba=function(_0x242b84,_0x569577){_0x242b84=_0x242b84-0x1e5;let _0x1b64d3=_0x2ca9a6[_0x242b84];return _0x1b64d3;},a245_0x71ba(_0x31618d,_0x8f11f9);}a245_0x242b84();'use strict';var __decorate=this&&this[a245_0x1cba82(0x214)]||function(_0x292a0d,_0x214c98,_0x118a93,_0x5bf7e0){const _0x19e0a3=a245_0x1cba82;var _0xbb75d8=arguments[_0x19e0a3(0x20e)],_0x14242c=_0xbb75d8<0x3?_0x214c98:_0x5bf7e0===null?_0x5bf7e0=Object[_0x19e0a3(0x1ed)](_0x214c98,_0x118a93):_0x5bf7e0,_0x11bff8;if(typeof Reflect===_0x19e0a3(0x20b)&&typeof Reflect['decorate']===_0x19e0a3(0x21a))_0x14242c=Reflect['decorate'](_0x292a0d,_0x214c98,_0x118a93,_0x5bf7e0);else{for(var _0x250ace=_0x292a0d['length']-0x1;_0x250ace>=0x0;_0x250ace--)if(_0x11bff8=_0x292a0d[_0x250ace])_0x14242c=(_0xbb75d8<0x3?_0x11bff8(_0x14242c):_0xbb75d8>0x3?_0x11bff8(_0x214c98,_0x118a93,_0x14242c):_0x11bff8(_0x214c98,_0x118a93))||_0x14242c;}return _0xbb75d8>0x3&&_0x14242c&&Object['defineProperty'](_0x214c98,_0x118a93,_0x14242c),_0x14242c;},__metadata=this&&this[a245_0x1cba82(0x1fc)]||function(_0x114d14,_0x4af6e0){const _0x4622a1=a245_0x1cba82;if(typeof Reflect===_0x4622a1(0x20b)&&typeof Reflect[_0x4622a1(0x1ff)]===_0x4622a1(0x21a))return Reflect[_0x4622a1(0x1ff)](_0x114d14,_0x4af6e0);},__param=this&&this[a245_0x1cba82(0x217)]||function(_0x4b0919,_0x5c547c){return function(_0x37f6ed,_0x6f528){_0x5c547c(_0x37f6ed,_0x6f528,_0x4b0919);};},SalesforceService_1;Object['defineProperty'](exports,a245_0x1cba82(0x1e7),{'value':!![]}),exports[a245_0x1cba82(0x1f8)]=void 0x0;function a245_0x1b64(){const _0x30fdaf=['post','search','/connection','toString','namespace','createSalesforceRequest','object','../utils/create-request.util','deleteAttachment','length','SalesforceAuthService','15925BwDKGs','1656042GZyJoG','../../../../constants','then','__decorate','Logger','SalesforceError','__param','/body','getLogger','function','(((.+)+)+)+$','/logger','logger','27muqkSe','1549386FLcjJU','InternalServerError','sendLog','log','SalesforceLogger','services/data/','retrieve\x20components\x20\x20%d\x20from\x20salesforce','/sobjects/Attachment/','design:paramtypes','error','Inject','../../../../core','SALESFORCE_API_VERSION','__esModule','1026356OPyYrV','493872VRtBmv','loggerId','../dto/connection.dto','Service','getOwnPropertyDescriptor','./salesforce-auth.service','/sobjects/','fetchConnection','createObject','./salesforce-logger.service','forEach','get','retrieveAttachment','32VECBPY','29412XtlOpo','SalesforceService','5qQLrnC','retrieve\x20attachment\x20%s\x20from\x20salesforce','/attachments','__metadata','2884244yjFZHJ','request','metadata','internalLogger','[message]\x20%s','retrieveComponents','30LxTmUX','../errors/salesforce.error'];a245_0x1b64=function(){return _0x30fdaf;};return a245_0x1b64();}const typedi_1=require('typedi'),core_1=require(a245_0x1cba82(0x1e5)),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require(a245_0x1cba82(0x1ee)),constants_1=require(a245_0x1cba82(0x212)),create_request_util_1=require(a245_0x1cba82(0x20c)),salesforce_logger_service_1=require(a245_0x1cba82(0x1f2)),salesforce_error_1=require(a245_0x1cba82(0x204)),connection_dto_1=require(a245_0x1cba82(0x1eb));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x3e3a45){const _0xbf678c=a245_0x1cba82;this[_0xbf678c(0x21d)]=new core_1[(_0xbf678c(0x215))](SalesforceService_1['name']),this['request']=(0x0,create_request_util_1[_0xbf678c(0x20a)])(_0x3e3a45),this[_0xbf678c(0x209)]=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':'/flosum_git';}['setLoggerId'](_0x4dc847){const _0x5878f9=a245_0x1cba82;this[_0x5878f9(0x1ea)]=_0x4dc847,this[_0x5878f9(0x200)]=new salesforce_logger_service_1[(_0x5878f9(0x223))](this);}[a245_0x1cba82(0x219)](){const _0x58ecae=a245_0x1cba82;return this[_0x58ecae(0x200)];}async[a245_0x1cba82(0x202)](_0x3931df){const _0x14101b=a245_0x1cba82;try{this[_0x14101b(0x21d)][_0x14101b(0x222)](_0x14101b(0x225),_0x3931df[_0x14101b(0x20e)]);const _0xf22cff=await this['request']['post']('services/apexrest'+this['namespace']+_0x14101b(0x1fb),{'componentIds':_0x3931df,'loggerId':this[_0x14101b(0x1ea)]})['then'](({data:_0xcdf51})=>_0xcdf51);return _0xf22cff;}catch(_0x5333d1){this[_0x14101b(0x21d)][_0x14101b(0x228)](_0x5333d1);throw new salesforce_error_1[(_0x14101b(0x216))](_0x5333d1);}}async[a245_0x1cba82(0x20d)](_0x58bcf8){const _0x3b400e=a245_0x1cba82;try{this['logger'][_0x3b400e(0x222)]('delete\x20attachment\x20%s\x20from\x20salesforce',_0x58bcf8),await this[_0x3b400e(0x1fe)]['delete'](_0x3b400e(0x224)+constants_1[_0x3b400e(0x1e6)]+_0x3b400e(0x226)+_0x58bcf8);}catch(_0x382af0){this[_0x3b400e(0x21d)]['error'](_0x382af0);throw new salesforce_error_1[(_0x3b400e(0x216))](_0x382af0);}}async[a245_0x1cba82(0x1f5)](_0x1367cc,_0xc57a3d=![]){const _0x2d2413=a245_0x1cba82;try{this['logger'][_0x2d2413(0x222)](_0x2d2413(0x1fa),_0x1367cc);const _0x1ffca9=await this[_0x2d2413(0x1fe)][_0x2d2413(0x1f4)](_0x2d2413(0x224)+constants_1[_0x2d2413(0x1e6)]+_0x2d2413(0x226)+_0x1367cc+_0x2d2413(0x218),{'responseType':_0xc57a3d?'arraybuffer':'text'})[_0x2d2413(0x213)](({data:_0x24cd55})=>_0x24cd55);return _0x1ffca9;}catch(_0x1ea9e7){this[_0x2d2413(0x21d)]['error'](_0x1ea9e7);throw new salesforce_error_1[(_0x2d2413(0x216))](_0x1ea9e7);}}async[a245_0x1cba82(0x221)](_0x31cba3){const _0x567d21=a245_0x1cba82;try{_0x31cba3[_0x567d21(0x1f3)](_0x3af33a=>this[_0x567d21(0x21d)][_0x567d21(0x222)](_0x567d21(0x201),_0x3af33a)),await this[_0x567d21(0x1fe)][_0x567d21(0x205)]('services/apexrest'+this['namespace']+_0x567d21(0x21c),{'messages':_0x31cba3,'loggerId':this['loggerId']});}catch(_0x27220a){this[_0x567d21(0x21d)][_0x567d21(0x228)](_0x27220a);throw new internal_server_error_1[(_0x567d21(0x220))](_0x27220a);}}async[a245_0x1cba82(0x1f1)](_0x44c1f0,_0x47fb5b){const _0x268303=a245_0x1cba82;try{const {data:_0x97d37e}=await this['request']['post'](_0x268303(0x224)+constants_1[_0x268303(0x1e6)]+_0x268303(0x1ef)+_0x44c1f0+'/',_0x47fb5b);return _0x97d37e['id'];}catch(_0x247764){throw new salesforce_error_1[(_0x268303(0x216))](_0x247764);}}async['patchObject'](_0x240afd,_0x139623,_0x184b2b){const _0x1c9e2f=a245_0x1cba82;try{await this[_0x1c9e2f(0x1fe)]['patch'](_0x1c9e2f(0x224)+constants_1['SALESFORCE_API_VERSION']+_0x1c9e2f(0x1ef)+_0x240afd+'/'+_0x139623,_0x184b2b);}catch(_0x4bea42){throw new salesforce_error_1[(_0x1c9e2f(0x216))](_0x4bea42);}}async[a245_0x1cba82(0x1f0)](_0x35c532){const _0x546770=a245_0x1cba82;try{const {data:_0x460f2b}=await this[_0x546770(0x1fe)]['get']('services/apexrest'+this[_0x546770(0x209)]+_0x546770(0x207),{'params':{'connectionId':_0x35c532}});return new connection_dto_1['ConnectionDto'](_0x460f2b);}catch(_0x36db68){throw new salesforce_error_1[(_0x546770(0x216))](_0x36db68);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a245_0x1cba82(0x1ec)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a245_0x1cba82(0x229)])()),__metadata(a245_0x1cba82(0x227),[salesforce_auth_service_1[a245_0x1cba82(0x20f)]])],SalesforceService),exports[a245_0x1cba82(0x1f8)]=SalesforceService;