const a255_0x21c575=a255_0x4ae3;(function(_0x3a054b,_0x4d5ad2){const _0x3a8bfe=a255_0x4ae3,_0x51ab92=_0x3a054b();while(!![]){try{const _0xce9db9=-parseInt(_0x3a8bfe(0x1eb))/0x1*(-parseInt(_0x3a8bfe(0x1e6))/0x2)+parseInt(_0x3a8bfe(0x1c9))/0x3*(parseInt(_0x3a8bfe(0x1f4))/0x4)+parseInt(_0x3a8bfe(0x1b8))/0x5+parseInt(_0x3a8bfe(0x1d9))/0x6+parseInt(_0x3a8bfe(0x1af))/0x7*(parseInt(_0x3a8bfe(0x1d3))/0x8)+-parseInt(_0x3a8bfe(0x1d7))/0x9*(-parseInt(_0x3a8bfe(0x1d2))/0xa)+-parseInt(_0x3a8bfe(0x1d8))/0xb;if(_0xce9db9===_0x4d5ad2)break;else _0x51ab92['push'](_0x51ab92['shift']());}catch(_0x582ba1){_0x51ab92['push'](_0x51ab92['shift']());}}}(a255_0x571a,0x25438));function a255_0x571a(){const _0x5dd0c4=['forEach','object','278PONsUk','apply','defineProperty','metadata','services/data/','777VIGUuJ','request','../utils/create-request.util','fetchConnection','namespace','constructor','IGNORE_FLOSUM_GIT_NAMESPACE','sendLog','__metadata','4884EmHvLI','ConnectionDto','__decorate','deleteAttachment','[message]\x20%s','31451NtRpUr','log','decorate','logger','./salesforce-logger.service','Retrieve\x20attachment\x20%s\x20from\x20salesforce','/flosum_git','error','SalesforceService','599680PtlJgn','../../../../constants','loggerId','./salesforce-auth.service','function','services/apexrest','SalesforceLogger','search','/attachments','then','/connection','(((.+)+)+)+$','../../../../core/errors/internal-server.error','name','../errors/salesforce.error','length','Service','357EWCePO','SALESFORCE_API_VERSION','Logger','Inject','internalLogger','setLoggerId','design:paramtypes','retrieveComponents','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','10ZapTGq','104zeyhFH','retrieveAttachment','../dto/connection.dto','patch','979821DwLerv','4617921yKFCfH','191562iJPddO','SalesforceError','post','get','/body','getLogger','patchObject','__param','SalesforceAuthService','/sobjects/','InternalServerError'];a255_0x571a=function(){return _0x5dd0c4;};return a255_0x571a();}const a255_0x55569e=(function(){let _0x217207=!![];return function(_0x5e5570,_0x3d026b){const _0x5ee8d7=_0x217207?function(){const _0x1fc21c=a255_0x4ae3;if(_0x3d026b){const _0x2620ea=_0x3d026b[_0x1fc21c(0x1e7)](_0x5e5570,arguments);return _0x3d026b=null,_0x2620ea;}}:function(){};return _0x217207=![],_0x5ee8d7;};}()),a255_0x54a65d=a255_0x55569e(this,function(){const _0x15d441=a255_0x4ae3;return a255_0x54a65d['toString']()[_0x15d441(0x1bf)]('(((.+)+)+)+$')['toString']()[_0x15d441(0x1f0)](a255_0x54a65d)[_0x15d441(0x1bf)](_0x15d441(0x1c3));});a255_0x54a65d();'use strict';var __decorate=this&&this[a255_0x21c575(0x1ac)]||function(_0x198c8e,_0x244a6e,_0x284344,_0x20adfc){const _0x463c89=a255_0x21c575;var _0x5e88ed=arguments[_0x463c89(0x1c7)],_0x1e5592=_0x5e88ed<0x3?_0x244a6e:_0x20adfc===null?_0x20adfc=Object['getOwnPropertyDescriptor'](_0x244a6e,_0x284344):_0x20adfc,_0x21cfbc;if(typeof Reflect===_0x463c89(0x1e5)&&typeof Reflect[_0x463c89(0x1b1)]==='function')_0x1e5592=Reflect['decorate'](_0x198c8e,_0x244a6e,_0x284344,_0x20adfc);else{for(var _0x2f7d41=_0x198c8e[_0x463c89(0x1c7)]-0x1;_0x2f7d41>=0x0;_0x2f7d41--)if(_0x21cfbc=_0x198c8e[_0x2f7d41])_0x1e5592=(_0x5e88ed<0x3?_0x21cfbc(_0x1e5592):_0x5e88ed>0x3?_0x21cfbc(_0x244a6e,_0x284344,_0x1e5592):_0x21cfbc(_0x244a6e,_0x284344))||_0x1e5592;}return _0x5e88ed>0x3&&_0x1e5592&&Object[_0x463c89(0x1e8)](_0x244a6e,_0x284344,_0x1e5592),_0x1e5592;},__metadata=this&&this[a255_0x21c575(0x1f3)]||function(_0x427d47,_0x2017bb){const _0x2b4377=a255_0x21c575;if(typeof Reflect===_0x2b4377(0x1e5)&&typeof Reflect['metadata']===_0x2b4377(0x1bc))return Reflect[_0x2b4377(0x1e9)](_0x427d47,_0x2017bb);},__param=this&&this[a255_0x21c575(0x1e0)]||function(_0x4bade4,_0x3f7ecd){return function(_0x21eb95,_0x42199a){_0x3f7ecd(_0x21eb95,_0x42199a,_0x4bade4);};},SalesforceService_1;Object[a255_0x21c575(0x1e8)](exports,'__esModule',{'value':!![]}),exports[a255_0x21c575(0x1b7)]=void 0x0;const typedi_1=require('typedi'),core_1=require('../../../../core'),internal_server_error_1=require(a255_0x21c575(0x1c4)),salesforce_auth_service_1=require(a255_0x21c575(0x1bb)),constants_1=require(a255_0x21c575(0x1b9)),create_request_util_1=require(a255_0x21c575(0x1ed)),salesforce_logger_service_1=require(a255_0x21c575(0x1b3)),salesforce_error_1=require(a255_0x21c575(0x1c6)),connection_dto_1=require(a255_0x21c575(0x1d5));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x202de0){const _0x45efb8=a255_0x21c575;this['logger']=new core_1[(_0x45efb8(0x1cb))](SalesforceService_1[_0x45efb8(0x1c5)]),this[_0x45efb8(0x1ec)]=(0x0,create_request_util_1['createSalesforceRequest'])(_0x202de0),this[_0x45efb8(0x1ef)]=constants_1[_0x45efb8(0x1f1)]?'':_0x45efb8(0x1b5);}[a255_0x21c575(0x1ce)](_0x4c7dd1){const _0x1302fc=a255_0x21c575;this[_0x1302fc(0x1ba)]=_0x4c7dd1,this[_0x1302fc(0x1cd)]=new salesforce_logger_service_1[(_0x1302fc(0x1be))](this);}[a255_0x21c575(0x1de)](){const _0x51039a=a255_0x21c575;return this[_0x51039a(0x1cd)];}async[a255_0x21c575(0x1d0)](_0x423006){const _0x3b3f6b=a255_0x21c575;try{this['logger'][_0x3b3f6b(0x1b0)](_0x3b3f6b(0x1d1),_0x423006[_0x3b3f6b(0x1c7)]);const _0x1646b8=await this['request'][_0x3b3f6b(0x1db)](_0x3b3f6b(0x1bd)+this[_0x3b3f6b(0x1ef)]+_0x3b3f6b(0x1c0),{'componentIds':_0x423006,'loggerId':this[_0x3b3f6b(0x1ba)]})[_0x3b3f6b(0x1c1)](({data:_0x36743f})=>_0x36743f);return _0x1646b8;}catch(_0x555fb8){this[_0x3b3f6b(0x1b2)]['error'](_0x555fb8);throw new salesforce_error_1[(_0x3b3f6b(0x1da))](_0x555fb8);}}async[a255_0x21c575(0x1ad)](_0x26fd67){const _0x2a4a74=a255_0x21c575;try{this['logger'][_0x2a4a74(0x1b0)]('Delete\x20attachment\x20%s\x20from\x20salesforce',_0x26fd67),await this['request']['delete'](_0x2a4a74(0x1ea)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/Attachment/'+_0x26fd67);}catch(_0x1594af){this['logger'][_0x2a4a74(0x1b6)](_0x1594af);throw new salesforce_error_1[(_0x2a4a74(0x1da))](_0x1594af);}}async[a255_0x21c575(0x1d4)](_0x4a3681,_0x5db548=![]){const _0x1329ec=a255_0x21c575;try{this['logger'][_0x1329ec(0x1b0)](_0x1329ec(0x1b4),_0x4a3681);const _0x166e52=await this['request'][_0x1329ec(0x1dc)](_0x1329ec(0x1ea)+constants_1[_0x1329ec(0x1ca)]+'/sobjects/Attachment/'+_0x4a3681+_0x1329ec(0x1dd),{'responseType':_0x5db548?'arraybuffer':'text'})[_0x1329ec(0x1c1)](({data:_0x7251c0})=>_0x7251c0);return _0x166e52;}catch(_0x522773){this['logger'][_0x1329ec(0x1b6)](_0x522773);throw new salesforce_error_1[(_0x1329ec(0x1da))](_0x522773);}}async[a255_0x21c575(0x1f2)](_0xaf8f74){const _0x12b65d=a255_0x21c575;try{_0xaf8f74[_0x12b65d(0x1e4)](_0x54eefd=>this[_0x12b65d(0x1b2)][_0x12b65d(0x1b0)](_0x12b65d(0x1ae),_0x54eefd)),await this[_0x12b65d(0x1ec)][_0x12b65d(0x1db)](_0x12b65d(0x1bd)+this[_0x12b65d(0x1ef)]+'/logger',{'messages':_0xaf8f74,'loggerId':this[_0x12b65d(0x1ba)]});}catch(_0x12047d){this[_0x12b65d(0x1b2)]['error'](_0x12047d);throw new internal_server_error_1[(_0x12b65d(0x1e3))](_0x12047d);}}async['createObject'](_0x3c18c6,_0x172a4f){const _0xf0f48d=a255_0x21c575;try{const {data:_0x991ea}=await this[_0xf0f48d(0x1ec)][_0xf0f48d(0x1db)]('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0xf0f48d(0x1e2)+_0x3c18c6+'/',_0x172a4f);return _0x991ea['id'];}catch(_0x45f2c9){throw new salesforce_error_1[(_0xf0f48d(0x1da))](_0x45f2c9);}}async[a255_0x21c575(0x1df)](_0x44ce80,_0xc18dbb,_0x5e0b9c){const _0x4fb509=a255_0x21c575;try{await this[_0x4fb509(0x1ec)][_0x4fb509(0x1d6)](_0x4fb509(0x1ea)+constants_1['SALESFORCE_API_VERSION']+_0x4fb509(0x1e2)+_0x44ce80+'/'+_0xc18dbb,_0x5e0b9c);}catch(_0x19b9cc){throw new salesforce_error_1[(_0x4fb509(0x1da))](_0x19b9cc);}}async[a255_0x21c575(0x1ee)](_0x2bbbf6){const _0x5df8ed=a255_0x21c575;try{const {data:_0x4a086e}=await this['request']['get'](_0x5df8ed(0x1bd)+this[_0x5df8ed(0x1ef)]+_0x5df8ed(0x1c2),{'params':{'connectionId':_0x2bbbf6}});return new connection_dto_1[(_0x5df8ed(0x1f5))](_0x4a086e);}catch(_0x571722){throw new salesforce_error_1['SalesforceError'](_0x571722);}}};function a255_0x4ae3(_0x26b910,_0x480a57){const _0x320373=a255_0x571a();return a255_0x4ae3=function(_0x54a65d,_0x55569e){_0x54a65d=_0x54a65d-0x1ac;let _0x571a40=_0x320373[_0x54a65d];return _0x571a40;},a255_0x4ae3(_0x26b910,_0x480a57);}SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a255_0x21c575(0x1c8)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a255_0x21c575(0x1cc)])()),__metadata(a255_0x21c575(0x1cf),[salesforce_auth_service_1[a255_0x21c575(0x1e1)]])],SalesforceService),exports[a255_0x21c575(0x1b7)]=SalesforceService;