const a284_0xb1285e=a284_0x31d9;(function(_0x16abd8,_0x3209a8){const _0x56e865=a284_0x31d9,_0x1356cd=_0x16abd8();while(!![]){try{const _0x533a9d=-parseInt(_0x56e865(0xce))/0x1+parseInt(_0x56e865(0xc2))/0x2+parseInt(_0x56e865(0xbd))/0x3*(-parseInt(_0x56e865(0xde))/0x4)+-parseInt(_0x56e865(0xdb))/0x5*(parseInt(_0x56e865(0xc4))/0x6)+parseInt(_0x56e865(0xb4))/0x7+-parseInt(_0x56e865(0xec))/0x8+-parseInt(_0x56e865(0xd6))/0x9*(-parseInt(_0x56e865(0xc3))/0xa);if(_0x533a9d===_0x3209a8)break;else _0x1356cd['push'](_0x1356cd['shift']());}catch(_0x22bdbe){_0x1356cd['push'](_0x1356cd['shift']());}}}(a284_0x2a7b,0x1a3d4));function a284_0x2a7b(){const _0x22a90a=['get','81449BxcLhq','../../../../core','services/data/','SalesforceService','apply','SalesforceError','SALESFORCE_API_VERSION','logger','333CeVNPK','function','IGNORE_FLOSUM_GIT_NAMESPACE','post','createObject','670pWqqkX','patchObject','sendLog','182396eJfoOR','__decorate','../errors/salesforce.error','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','defineProperty','arraybuffer','loggerId','name','ConnectionDto','__metadata','SalesforceLogger','typedi','log','__esModule','1432296uQrbCx','metadata','Service','error','namespace','../../../../core/errors/internal-server.error','patch','services/apexrest','getLogger','then','../classes/bulk-components-retriever','length','constructor','__param','57379yohnUg','./salesforce-auth.service','toString','/connection','Inject','/flosum_git','./salesforce-logger.service','[message]\x20%s','search','9WHynwf','internalLogger','/sobjects/','setLoggerId','request','419238ivoXrW','126770pDxLIK','8154nNsoES','text','../dto/connection.dto','retrieve','(((.+)+)+)+$','SalesforceAuthService','Logger','Delete\x20attachment\x20%s\x20from\x20salesforce','forEach'];a284_0x2a7b=function(){return _0x22a90a;};return a284_0x2a7b();}const a284_0x404127=(function(){let _0x289f9a=!![];return function(_0x2d62cf,_0x38cfbd){const _0x353f07=_0x289f9a?function(){const _0x15f457=a284_0x31d9;if(_0x38cfbd){const _0x45eb66=_0x38cfbd[_0x15f457(0xd2)](_0x2d62cf,arguments);return _0x38cfbd=null,_0x45eb66;}}:function(){};return _0x289f9a=![],_0x353f07;};}()),a284_0x5e6651=a284_0x404127(this,function(){const _0x32bbc9=a284_0x31d9;return a284_0x5e6651[_0x32bbc9(0xb6)]()[_0x32bbc9(0xbc)](_0x32bbc9(0xc8))[_0x32bbc9(0xb6)]()[_0x32bbc9(0xb2)](a284_0x5e6651)[_0x32bbc9(0xbc)]('(((.+)+)+)+$');});a284_0x5e6651();'use strict';var __decorate=this&&this[a284_0xb1285e(0xdf)]||function(_0x422786,_0xa032f4,_0x1cec60,_0x462b0d){const _0x51b0d6=a284_0xb1285e;var _0x18fb44=arguments[_0x51b0d6(0xb1)],_0x4d9a9f=_0x18fb44<0x3?_0xa032f4:_0x462b0d===null?_0x462b0d=Object['getOwnPropertyDescriptor'](_0xa032f4,_0x1cec60):_0x462b0d,_0x3f3645;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x51b0d6(0xd7))_0x4d9a9f=Reflect['decorate'](_0x422786,_0xa032f4,_0x1cec60,_0x462b0d);else{for(var _0xfdafa=_0x422786[_0x51b0d6(0xb1)]-0x1;_0xfdafa>=0x0;_0xfdafa--)if(_0x3f3645=_0x422786[_0xfdafa])_0x4d9a9f=(_0x18fb44<0x3?_0x3f3645(_0x4d9a9f):_0x18fb44>0x3?_0x3f3645(_0xa032f4,_0x1cec60,_0x4d9a9f):_0x3f3645(_0xa032f4,_0x1cec60))||_0x4d9a9f;}return _0x18fb44>0x3&&_0x4d9a9f&&Object[_0x51b0d6(0xe2)](_0xa032f4,_0x1cec60,_0x4d9a9f),_0x4d9a9f;},__metadata=this&&this[a284_0xb1285e(0xe7)]||function(_0x3ab20c,_0x5ffd8f){const _0x217bfd=a284_0xb1285e;if(typeof Reflect==='object'&&typeof Reflect[_0x217bfd(0xed)]===_0x217bfd(0xd7))return Reflect['metadata'](_0x3ab20c,_0x5ffd8f);},__param=this&&this[a284_0xb1285e(0xb3)]||function(_0x2634c7,_0xcd7d40){return function(_0x460d48,_0x5ec05a){_0xcd7d40(_0x460d48,_0x5ec05a,_0x2634c7);};},SalesforceService_1;function a284_0x31d9(_0x5ae6d5,_0x53ad00){const _0x4d5948=a284_0x2a7b();return a284_0x31d9=function(_0x5e6651,_0x404127){_0x5e6651=_0x5e6651-0xab;let _0x2a7b13=_0x4d5948[_0x5e6651];return _0x2a7b13;},a284_0x31d9(_0x5ae6d5,_0x53ad00);}Object[a284_0xb1285e(0xe2)](exports,a284_0xb1285e(0xeb),{'value':!![]}),exports['SalesforceService']=void 0x0;const typedi_1=require(a284_0xb1285e(0xe9)),core_1=require(a284_0xb1285e(0xcf)),internal_server_error_1=require(a284_0xb1285e(0xab)),salesforce_auth_service_1=require(a284_0xb1285e(0xb5)),constants_1=require('../../../../constants'),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require(a284_0xb1285e(0xba)),salesforce_error_1=require(a284_0xb1285e(0xe0)),connection_dto_1=require(a284_0xb1285e(0xc6)),bulk_components_retriever_1=require(a284_0xb1285e(0xb0));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x33c7a6){const _0x3addc9=a284_0xb1285e;this['logger']=new core_1[(_0x3addc9(0xca))](SalesforceService_1[_0x3addc9(0xe5)]),this[_0x3addc9(0xc1)]=(0x0,create_request_util_1['createSalesforceRequest'])(_0x33c7a6),this['namespace']=constants_1[_0x3addc9(0xd8)]?'':_0x3addc9(0xb9);}[a284_0xb1285e(0xc0)](_0x58cec6){const _0x206735=a284_0xb1285e;this[_0x206735(0xe4)]=_0x58cec6,this[_0x206735(0xbe)]=new salesforce_logger_service_1[(_0x206735(0xe8))](this);}[a284_0xb1285e(0xae)](){return this['internalLogger'];}async['retrieveComponents'](_0x42670d){const _0x41dcc8=a284_0xb1285e;try{this[_0x41dcc8(0xd5)][_0x41dcc8(0xea)](_0x41dcc8(0xe1),_0x42670d[_0x41dcc8(0xb1)]);const _0x4a7f8a=new bulk_components_retriever_1['BulkComponentsRetriever']({'request':this['request'],'ids':_0x42670d}),_0x330145=await _0x4a7f8a[_0x41dcc8(0xc7)]();return _0x330145;}catch(_0x412fea){this['logger'][_0x41dcc8(0xef)](_0x412fea);throw new salesforce_error_1[(_0x41dcc8(0xd3))](_0x412fea);}}async['deleteAttachment'](_0x143420){const _0x5647ef=a284_0xb1285e;try{this[_0x5647ef(0xd5)][_0x5647ef(0xea)](_0x5647ef(0xcb),_0x143420),await this[_0x5647ef(0xc1)]['delete'](_0x5647ef(0xd0)+constants_1[_0x5647ef(0xd4)]+'/sobjects/Attachment/'+_0x143420);}catch(_0x1a6a2d){this[_0x5647ef(0xd5)][_0x5647ef(0xef)](_0x1a6a2d);throw new salesforce_error_1[(_0x5647ef(0xd3))](_0x1a6a2d);}}async['retrieveAttachment'](_0x42aad0,_0xc1893d=![]){const _0x50778b=a284_0xb1285e;try{this[_0x50778b(0xd5)]['log']('Retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x42aad0);const _0x1aa45c=await this[_0x50778b(0xc1)][_0x50778b(0xcd)](_0x50778b(0xd0)+constants_1[_0x50778b(0xd4)]+'/sobjects/Attachment/'+_0x42aad0+'/body',{'responseType':_0xc1893d?_0x50778b(0xe3):_0x50778b(0xc5)})[_0x50778b(0xaf)](({data:_0x20cb57})=>_0x20cb57);return _0x1aa45c;}catch(_0x569db7){this[_0x50778b(0xd5)]['error'](_0x569db7);throw new salesforce_error_1[(_0x50778b(0xd3))](_0x569db7);}}async[a284_0xb1285e(0xdd)](_0x4c7b04){const _0x405c12=a284_0xb1285e;try{_0x4c7b04[_0x405c12(0xcc)](_0x254807=>this[_0x405c12(0xd5)]['log'](_0x405c12(0xbb),_0x254807)),await this[_0x405c12(0xc1)][_0x405c12(0xd9)](_0x405c12(0xad)+this[_0x405c12(0xf0)]+'/logger',{'messages':_0x4c7b04,'loggerId':this['loggerId']});}catch(_0x335272){this[_0x405c12(0xd5)]['error'](_0x335272);throw new internal_server_error_1['InternalServerError'](_0x335272);}}async[a284_0xb1285e(0xda)](_0x23a628,_0x322c0f){const _0xb24fd7=a284_0xb1285e;try{const {data:_0x377b42}=await this['request'][_0xb24fd7(0xd9)]('services/data/'+constants_1[_0xb24fd7(0xd4)]+_0xb24fd7(0xbf)+_0x23a628+'/',_0x322c0f);return _0x377b42['id'];}catch(_0x2cb4b9){throw new salesforce_error_1[(_0xb24fd7(0xd3))](_0x2cb4b9);}}async[a284_0xb1285e(0xdc)](_0xeabd86,_0x3eff50,_0x4b0299){const _0x40858b=a284_0xb1285e;try{await this[_0x40858b(0xc1)][_0x40858b(0xac)](_0x40858b(0xd0)+constants_1['SALESFORCE_API_VERSION']+_0x40858b(0xbf)+_0xeabd86+'/'+_0x3eff50,_0x4b0299);}catch(_0x1a8b1c){throw new salesforce_error_1['SalesforceError'](_0x1a8b1c);}}async['fetchConnection'](_0x1bc0ea){const _0x5817af=a284_0xb1285e;try{const {data:_0x5f35e9}=await this[_0x5817af(0xc1)][_0x5817af(0xcd)](_0x5817af(0xad)+this[_0x5817af(0xf0)]+_0x5817af(0xb7),{'params':{'connectionId':_0x1bc0ea}});return new connection_dto_1[(_0x5817af(0xe6))](_0x5f35e9);}catch(_0x4a63f6){throw new salesforce_error_1[(_0x5817af(0xd3))](_0x4a63f6);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a284_0xb1285e(0xee)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a284_0xb1285e(0xb8)])()),__metadata('design:paramtypes',[salesforce_auth_service_1[a284_0xb1285e(0xc9)]])],SalesforceService),exports[a284_0xb1285e(0xd1)]=SalesforceService;