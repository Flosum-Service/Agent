const a283_0x32b4bc=a283_0x5f5d;(function(_0x318ef0,_0x3f1a2f){const _0x17d4ed=a283_0x5f5d,_0x2a135a=_0x318ef0();while(!![]){try{const _0x3ce728=-parseInt(_0x17d4ed(0x195))/0x1+-parseInt(_0x17d4ed(0x1c5))/0x2*(parseInt(_0x17d4ed(0x19a))/0x3)+-parseInt(_0x17d4ed(0x1d4))/0x4+-parseInt(_0x17d4ed(0x1a8))/0x5+parseInt(_0x17d4ed(0x1b3))/0x6+-parseInt(_0x17d4ed(0x1a2))/0x7*(parseInt(_0x17d4ed(0x1cc))/0x8)+parseInt(_0x17d4ed(0x1cf))/0x9;if(_0x3ce728===_0x3f1a2f)break;else _0x2a135a['push'](_0x2a135a['shift']());}catch(_0x174fa1){_0x2a135a['push'](_0x2a135a['shift']());}}}(a283_0x2ea4,0x88598));const a283_0x1914e2=(function(){let _0x1150d9=!![];return function(_0x589843,_0x5d3953){const _0x1ff268=_0x1150d9?function(){if(_0x5d3953){const _0x5958c3=_0x5d3953['apply'](_0x589843,arguments);return _0x5d3953=null,_0x5958c3;}}:function(){};return _0x1150d9=![],_0x1ff268;};}()),a283_0x4607a8=a283_0x1914e2(this,function(){const _0x18d3b0=a283_0x5f5d;return a283_0x4607a8['toString']()[_0x18d3b0(0x1ad)](_0x18d3b0(0x1c3))['toString']()['constructor'](a283_0x4607a8)[_0x18d3b0(0x1ad)](_0x18d3b0(0x1c3));});a283_0x4607a8();function a283_0x5f5d(_0x243fb8,_0x2f07ab){const _0x540df5=a283_0x2ea4();return a283_0x5f5d=function(_0x4607a8,_0x1914e2){_0x4607a8=_0x4607a8-0x190;let _0x2ea483=_0x540df5[_0x4607a8];return _0x2ea483;},a283_0x5f5d(_0x243fb8,_0x2f07ab);}'use strict';var __decorate=this&&this['__decorate']||function(_0x3ff1ef,_0xa90831,_0xbf64e5,_0x20b839){const _0x35e09e=a283_0x5f5d;var _0x58914f=arguments[_0x35e09e(0x1af)],_0x3ad9ec=_0x58914f<0x3?_0xa90831:_0x20b839===null?_0x20b839=Object[_0x35e09e(0x1ca)](_0xa90831,_0xbf64e5):_0x20b839,_0x166fce;if(typeof Reflect==='object'&&typeof Reflect[_0x35e09e(0x194)]===_0x35e09e(0x1a3))_0x3ad9ec=Reflect['decorate'](_0x3ff1ef,_0xa90831,_0xbf64e5,_0x20b839);else{for(var _0x44406c=_0x3ff1ef['length']-0x1;_0x44406c>=0x0;_0x44406c--)if(_0x166fce=_0x3ff1ef[_0x44406c])_0x3ad9ec=(_0x58914f<0x3?_0x166fce(_0x3ad9ec):_0x58914f>0x3?_0x166fce(_0xa90831,_0xbf64e5,_0x3ad9ec):_0x166fce(_0xa90831,_0xbf64e5))||_0x3ad9ec;}return _0x58914f>0x3&&_0x3ad9ec&&Object['defineProperty'](_0xa90831,_0xbf64e5,_0x3ad9ec),_0x3ad9ec;},__metadata=this&&this[a283_0x32b4bc(0x1c1)]||function(_0xee1f15,_0x1cdf17){const _0x3c6d4f=a283_0x32b4bc;if(typeof Reflect===_0x3c6d4f(0x1c7)&&typeof Reflect[_0x3c6d4f(0x1b9)]===_0x3c6d4f(0x1a3))return Reflect[_0x3c6d4f(0x1b9)](_0xee1f15,_0x1cdf17);},__param=this&&this[a283_0x32b4bc(0x1d1)]||function(_0x58f6e2,_0x510962){return function(_0x5b3669,_0x12f857){_0x510962(_0x5b3669,_0x12f857,_0x58f6e2);};},SalesforceService_1;Object['defineProperty'](exports,a283_0x32b4bc(0x1bf),{'value':!![]}),exports[a283_0x32b4bc(0x1ae)]=void 0x0;function a283_0x2ea4(){const _0x3e4ece=['services/data/','(((.+)+)+)+$','logger','278oIQTDx','SalesforceAuthService','object','../classes/bulk-components-retriever','Logger','getOwnPropertyDescriptor','InternalServerError','8uQyBFO','./salesforce-auth.service','services/apexrest','33673320pzjrkc','retrieve','__param','patch','SalesforceLogger','972548Ojdyky','request','loggerId','get','createObject','delete','Service','../../../../core/errors/internal-server.error','decorate','653254CprOmX','../dto/connection.dto','../errors/salesforce.error','patchObject','deleteAttachment','9030hiykoY','SalesforceError','/connection','../../../../constants','then','log','/flosum_git','/body','7552475frqpBa','function','../utils/create-request.util','error','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','createSalesforceRequest','4298685RJOTLN','ConnectionDto','SALESFORCE_API_VERSION','internalLogger','Inject','search','SalesforceService','length','retrieveAttachment','../../../../core','/sobjects/','422706lxXIxs','setLoggerId','design:paramtypes','post','typedi','getLogger','metadata','namespace','/sobjects/Attachment/','Delete\x20attachment\x20%s\x20from\x20salesforce','sendLog','./salesforce-logger.service','__esModule','fetchConnection','__metadata'];a283_0x2ea4=function(){return _0x3e4ece;};return a283_0x2ea4();}const typedi_1=require(a283_0x32b4bc(0x1b7)),core_1=require(a283_0x32b4bc(0x1b1)),internal_server_error_1=require(a283_0x32b4bc(0x193)),salesforce_auth_service_1=require(a283_0x32b4bc(0x1cd)),constants_1=require(a283_0x32b4bc(0x19d)),create_request_util_1=require(a283_0x32b4bc(0x1a4)),salesforce_logger_service_1=require(a283_0x32b4bc(0x1be)),salesforce_error_1=require(a283_0x32b4bc(0x197)),connection_dto_1=require(a283_0x32b4bc(0x196)),bulk_components_retriever_1=require(a283_0x32b4bc(0x1c8));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x318998){const _0x23c4da=a283_0x32b4bc;this[_0x23c4da(0x1c4)]=new core_1[(_0x23c4da(0x1c9))](SalesforceService_1['name']),this[_0x23c4da(0x1d5)]=(0x0,create_request_util_1[_0x23c4da(0x1a7)])(_0x318998),this[_0x23c4da(0x1ba)]=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':_0x23c4da(0x1a0);}[a283_0x32b4bc(0x1b4)](_0x4244cd){const _0x3b0ee=a283_0x32b4bc;this[_0x3b0ee(0x1d6)]=_0x4244cd,this[_0x3b0ee(0x1ab)]=new salesforce_logger_service_1[(_0x3b0ee(0x1d3))](this);}[a283_0x32b4bc(0x1b8)](){const _0x199e0e=a283_0x32b4bc;return this[_0x199e0e(0x1ab)];}async['retrieveComponents'](_0x4dbe4f){const _0x139d62=a283_0x32b4bc;try{this['logger'][_0x139d62(0x19f)](_0x139d62(0x1a6),_0x4dbe4f[_0x139d62(0x1af)]);const _0x53ab22=new bulk_components_retriever_1['BulkComponentsRetriever']({'request':this[_0x139d62(0x1d5)],'ids':_0x4dbe4f}),_0x51d65e=await _0x53ab22[_0x139d62(0x1d0)]();return _0x51d65e;}catch(_0xa3ee79){this[_0x139d62(0x1c4)][_0x139d62(0x1a5)](_0xa3ee79);throw new salesforce_error_1[(_0x139d62(0x19b))](_0xa3ee79);}}async[a283_0x32b4bc(0x199)](_0x22f4dd){const _0x36c0fa=a283_0x32b4bc;try{this['logger'][_0x36c0fa(0x19f)](_0x36c0fa(0x1bc),_0x22f4dd),await this[_0x36c0fa(0x1d5)][_0x36c0fa(0x191)]('services/data/'+constants_1[_0x36c0fa(0x1aa)]+'/sobjects/Attachment/'+_0x22f4dd);}catch(_0x26b057){this[_0x36c0fa(0x1c4)][_0x36c0fa(0x1a5)](_0x26b057);throw new salesforce_error_1[(_0x36c0fa(0x19b))](_0x26b057);}}async[a283_0x32b4bc(0x1b0)](_0x4822bb,_0x4704ad=![]){const _0x43d13e=a283_0x32b4bc;try{this['logger'][_0x43d13e(0x19f)]('Retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x4822bb);const _0x6d6116=await this[_0x43d13e(0x1d5)][_0x43d13e(0x1d7)](_0x43d13e(0x1c2)+constants_1[_0x43d13e(0x1aa)]+_0x43d13e(0x1bb)+_0x4822bb+_0x43d13e(0x1a1),{'responseType':_0x4704ad?'arraybuffer':'text'})[_0x43d13e(0x19e)](({data:_0x55584b})=>_0x55584b);return _0x6d6116;}catch(_0x22ead7){this[_0x43d13e(0x1c4)][_0x43d13e(0x1a5)](_0x22ead7);throw new salesforce_error_1['SalesforceError'](_0x22ead7);}}async[a283_0x32b4bc(0x1bd)](_0x246962){const _0x54562a=a283_0x32b4bc;try{_0x246962['forEach'](_0xb6375b=>this['logger']['log']('[message]\x20%s',_0xb6375b)),await this['request'][_0x54562a(0x1b6)](_0x54562a(0x1ce)+this[_0x54562a(0x1ba)]+'/logger',{'messages':_0x246962,'loggerId':this[_0x54562a(0x1d6)]});}catch(_0x5cb188){this[_0x54562a(0x1c4)][_0x54562a(0x1a5)](_0x5cb188);throw new internal_server_error_1[(_0x54562a(0x1cb))](_0x5cb188);}}async[a283_0x32b4bc(0x190)](_0x5ef556,_0x5a0c53){const _0x29c8e8=a283_0x32b4bc;try{const {data:_0x35572b}=await this[_0x29c8e8(0x1d5)]['post']('services/data/'+constants_1['SALESFORCE_API_VERSION']+_0x29c8e8(0x1b2)+_0x5ef556+'/',_0x5a0c53);return _0x35572b['id'];}catch(_0x47cb79){throw new salesforce_error_1[(_0x29c8e8(0x19b))](_0x47cb79);}}async[a283_0x32b4bc(0x198)](_0x3ad56a,_0x34d7c7,_0x198714){const _0x209458=a283_0x32b4bc;try{await this[_0x209458(0x1d5)][_0x209458(0x1d2)](_0x209458(0x1c2)+constants_1[_0x209458(0x1aa)]+_0x209458(0x1b2)+_0x3ad56a+'/'+_0x34d7c7,_0x198714);}catch(_0x519504){throw new salesforce_error_1['SalesforceError'](_0x519504);}}async[a283_0x32b4bc(0x1c0)](_0x377445){const _0xc55b3e=a283_0x32b4bc;try{const {data:_0x26cdbd}=await this['request'][_0xc55b3e(0x1d7)](_0xc55b3e(0x1ce)+this[_0xc55b3e(0x1ba)]+_0xc55b3e(0x19c),{'params':{'connectionId':_0x377445}});return new connection_dto_1[(_0xc55b3e(0x1a9))](_0x26cdbd);}catch(_0x803b1c){throw new salesforce_error_1['SalesforceError'](_0x803b1c);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a283_0x32b4bc(0x192)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a283_0x32b4bc(0x1ac)])()),__metadata(a283_0x32b4bc(0x1b5),[salesforce_auth_service_1[a283_0x32b4bc(0x1c6)]])],SalesforceService),exports[a283_0x32b4bc(0x1ae)]=SalesforceService;