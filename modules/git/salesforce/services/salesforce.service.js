const a282_0xfecf8a=a282_0x8818;(function(_0x2409ee,_0x239baa){const _0x2d732b=a282_0x8818,_0xd6fdd0=_0x2409ee();while(!![]){try{const _0x42840b=-parseInt(_0x2d732b(0x220))/0x1+parseInt(_0x2d732b(0x21a))/0x2*(parseInt(_0x2d732b(0x226))/0x3)+-parseInt(_0x2d732b(0x1f5))/0x4*(parseInt(_0x2d732b(0x203))/0x5)+-parseInt(_0x2d732b(0x1ee))/0x6+-parseInt(_0x2d732b(0x1e6))/0x7+parseInt(_0x2d732b(0x225))/0x8*(parseInt(_0x2d732b(0x200))/0x9)+parseInt(_0x2d732b(0x21e))/0xa*(parseInt(_0x2d732b(0x21d))/0xb);if(_0x42840b===_0x239baa)break;else _0xd6fdd0['push'](_0xd6fdd0['shift']());}catch(_0x6b34e6){_0xd6fdd0['push'](_0xd6fdd0['shift']());}}}(a282_0x142c,0xf1b13));const a282_0x1db414=(function(){let _0x4c2cea=!![];return function(_0x25bac8,_0x26ea14){const _0xc5399a=_0x4c2cea?function(){if(_0x26ea14){const _0x4705fd=_0x26ea14['apply'](_0x25bac8,arguments);return _0x26ea14=null,_0x4705fd;}}:function(){};return _0x4c2cea=![],_0xc5399a;};}()),a282_0x59fdb4=a282_0x1db414(this,function(){const _0x1c2d56=a282_0x8818;return a282_0x59fdb4['toString']()[_0x1c2d56(0x227)](_0x1c2d56(0x1f1))[_0x1c2d56(0x20a)]()[_0x1c2d56(0x1f9)](a282_0x59fdb4)['search'](_0x1c2d56(0x1f1));});a282_0x59fdb4();'use strict';function a282_0x8818(_0x3e5c6b,_0x3d51dc){const _0x4c776=a282_0x142c();return a282_0x8818=function(_0x59fdb4,_0x1db414){_0x59fdb4=_0x59fdb4-0x1e5;let _0x142c62=_0x4c776[_0x59fdb4];return _0x142c62;},a282_0x8818(_0x3e5c6b,_0x3d51dc);}var __decorate=this&&this[a282_0xfecf8a(0x206)]||function(_0x5e4482,_0x207437,_0xc8167e,_0x15bc19){const _0x3a9a0f=a282_0xfecf8a;var _0x433ccc=arguments[_0x3a9a0f(0x1f6)],_0xe97364=_0x433ccc<0x3?_0x207437:_0x15bc19===null?_0x15bc19=Object['getOwnPropertyDescriptor'](_0x207437,_0xc8167e):_0x15bc19,_0x39ca07;if(typeof Reflect===_0x3a9a0f(0x1ff)&&typeof Reflect['decorate']===_0x3a9a0f(0x22a))_0xe97364=Reflect[_0x3a9a0f(0x1fe)](_0x5e4482,_0x207437,_0xc8167e,_0x15bc19);else{for(var _0x38c7b2=_0x5e4482[_0x3a9a0f(0x1f6)]-0x1;_0x38c7b2>=0x0;_0x38c7b2--)if(_0x39ca07=_0x5e4482[_0x38c7b2])_0xe97364=(_0x433ccc<0x3?_0x39ca07(_0xe97364):_0x433ccc>0x3?_0x39ca07(_0x207437,_0xc8167e,_0xe97364):_0x39ca07(_0x207437,_0xc8167e))||_0xe97364;}return _0x433ccc>0x3&&_0xe97364&&Object['defineProperty'](_0x207437,_0xc8167e,_0xe97364),_0xe97364;},__metadata=this&&this[a282_0xfecf8a(0x228)]||function(_0x243289,_0x1d744e){const _0x530b2a=a282_0xfecf8a;if(typeof Reflect===_0x530b2a(0x1ff)&&typeof Reflect[_0x530b2a(0x20b)]===_0x530b2a(0x22a))return Reflect[_0x530b2a(0x20b)](_0x243289,_0x1d744e);},__param=this&&this[a282_0xfecf8a(0x214)]||function(_0x444742,_0x46e8cb){return function(_0x5b4023,_0x265741){_0x46e8cb(_0x5b4023,_0x265741,_0x444742);};},SalesforceService_1;Object[a282_0xfecf8a(0x21b)](exports,a282_0xfecf8a(0x221),{'value':!![]}),exports[a282_0xfecf8a(0x229)]=void 0x0;function a282_0x142c(){const _0x5af7b0=['(((.+)+)+)+$','../../../../constants','post','../errors/salesforce.error','308dzMNOt','length','deleteAttachment','/sobjects/','constructor','error','createObject','Service','/sobjects/Attachment/','decorate','object','3435084fuijug','./salesforce-auth.service','SalesforceAuthService','78730KZTXRv','services/apexrest','logger','__decorate','services/data/','../../../../core/errors/internal-server.error','./salesforce-logger.service','toString','metadata','[message]\x20%s','InternalServerError','loggerId','log','sendLog','BulkComponentsRetriever','../utils/create-request.util','Inject','__param','SALESFORCE_API_VERSION','namespace','SalesforceLogger','request','arraybuffer','66892KJYzve','defineProperty','../classes/bulk-components-retriever','1793297QtOXWb','240xloymW','get','1244893swTmcw','__esModule','/body','Logger','ConnectionDto','24VndbHY','15RWnabD','search','__metadata','SalesforceService','function','patch','Retrieve\x20attachment\x20%s\x20from\x20salesforce','then','/connection','name','design:paramtypes','3104479ffeJKt','setLoggerId','getLogger','forEach','retrieve','IGNORE_FLOSUM_GIT_NAMESPACE','retrieveAttachment','../dto/connection.dto','8004618bcbwmG','Delete\x20attachment\x20%s\x20from\x20salesforce','SalesforceError'];a282_0x142c=function(){return _0x5af7b0;};return a282_0x142c();}const typedi_1=require('typedi'),core_1=require('../../../../core'),internal_server_error_1=require(a282_0xfecf8a(0x208)),salesforce_auth_service_1=require(a282_0xfecf8a(0x201)),constants_1=require(a282_0xfecf8a(0x1f2)),create_request_util_1=require(a282_0xfecf8a(0x212)),salesforce_logger_service_1=require(a282_0xfecf8a(0x209)),salesforce_error_1=require(a282_0xfecf8a(0x1f4)),connection_dto_1=require(a282_0xfecf8a(0x1ed)),bulk_components_retriever_1=require(a282_0xfecf8a(0x21c));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x260854){const _0x3f2048=a282_0xfecf8a;this['logger']=new core_1[(_0x3f2048(0x223))](SalesforceService_1[_0x3f2048(0x22f)]),this[_0x3f2048(0x218)]=(0x0,create_request_util_1['createSalesforceRequest'])(_0x260854),this['namespace']=constants_1[_0x3f2048(0x1eb)]?'':'/flosum_git';}[a282_0xfecf8a(0x1e7)](_0x2a5dca){const _0x276161=a282_0xfecf8a;this[_0x276161(0x20e)]=_0x2a5dca,this['internalLogger']=new salesforce_logger_service_1[(_0x276161(0x217))](this);}[a282_0xfecf8a(0x1e8)](){return this['internalLogger'];}async['retrieveComponents'](_0x3c4b21){const _0x12be29=a282_0xfecf8a;try{this[_0x12be29(0x205)][_0x12be29(0x20f)]('Retrieve\x20components\x20\x20%d\x20from\x20salesforce',_0x3c4b21['length']);const _0x102c2d=new bulk_components_retriever_1[(_0x12be29(0x211))]({'request':this[_0x12be29(0x218)],'ids':_0x3c4b21}),_0x96ba4c=await _0x102c2d[_0x12be29(0x1ea)]();return _0x96ba4c;}catch(_0x3de6db){this[_0x12be29(0x205)][_0x12be29(0x1fa)](_0x3de6db);throw new salesforce_error_1[(_0x12be29(0x1f0))](_0x3de6db);}}async[a282_0xfecf8a(0x1f7)](_0xec58da){const _0x12b9b2=a282_0xfecf8a;try{this[_0x12b9b2(0x205)]['log'](_0x12b9b2(0x1ef),_0xec58da),await this[_0x12b9b2(0x218)]['delete'](_0x12b9b2(0x207)+constants_1[_0x12b9b2(0x215)]+_0x12b9b2(0x1fd)+_0xec58da);}catch(_0x3d839a){this[_0x12b9b2(0x205)][_0x12b9b2(0x1fa)](_0x3d839a);throw new salesforce_error_1[(_0x12b9b2(0x1f0))](_0x3d839a);}}async[a282_0xfecf8a(0x1ec)](_0x54a22c,_0x5ac789=![]){const _0x590261=a282_0xfecf8a;try{this['logger'][_0x590261(0x20f)](_0x590261(0x22c),_0x54a22c);const _0x21eb99=await this[_0x590261(0x218)][_0x590261(0x21f)](_0x590261(0x207)+constants_1[_0x590261(0x215)]+_0x590261(0x1fd)+_0x54a22c+_0x590261(0x222),{'responseType':_0x5ac789?_0x590261(0x219):'text'})[_0x590261(0x22d)](({data:_0x49a2c5})=>_0x49a2c5);return _0x21eb99;}catch(_0x11bc4f){this[_0x590261(0x205)][_0x590261(0x1fa)](_0x11bc4f);throw new salesforce_error_1[(_0x590261(0x1f0))](_0x11bc4f);}}async[a282_0xfecf8a(0x210)](_0x37ccfc){const _0x3ef8b4=a282_0xfecf8a;try{_0x37ccfc[_0x3ef8b4(0x1e9)](_0x4f7c5a=>this[_0x3ef8b4(0x205)][_0x3ef8b4(0x20f)](_0x3ef8b4(0x20c),_0x4f7c5a)),await this['request'][_0x3ef8b4(0x1f3)]('services/apexrest'+this[_0x3ef8b4(0x216)]+'/logger',{'messages':_0x37ccfc,'loggerId':this['loggerId']});}catch(_0x364a80){this[_0x3ef8b4(0x205)]['error'](_0x364a80);throw new internal_server_error_1[(_0x3ef8b4(0x20d))](_0x364a80);}}async[a282_0xfecf8a(0x1fb)](_0x41b5ec,_0x231ed9){const _0x246de0=a282_0xfecf8a;try{const {data:_0x3f9a2}=await this[_0x246de0(0x218)][_0x246de0(0x1f3)](_0x246de0(0x207)+constants_1[_0x246de0(0x215)]+_0x246de0(0x1f8)+_0x41b5ec+'/',_0x231ed9);return _0x3f9a2['id'];}catch(_0x33b0ec){throw new salesforce_error_1[(_0x246de0(0x1f0))](_0x33b0ec);}}async['patchObject'](_0x4e85ee,_0x56b199,_0x55974b){const _0x18aa22=a282_0xfecf8a;try{await this[_0x18aa22(0x218)][_0x18aa22(0x22b)](_0x18aa22(0x207)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/'+_0x4e85ee+'/'+_0x56b199,_0x55974b);}catch(_0x5d373d){throw new salesforce_error_1[(_0x18aa22(0x1f0))](_0x5d373d);}}async['fetchConnection'](_0x362524){const _0x2fba71=a282_0xfecf8a;try{const {data:_0x270fd7}=await this[_0x2fba71(0x218)]['get'](_0x2fba71(0x204)+this[_0x2fba71(0x216)]+_0x2fba71(0x22e),{'params':{'connectionId':_0x362524}});return new connection_dto_1[(_0x2fba71(0x224))](_0x270fd7);}catch(_0x3f3566){throw new salesforce_error_1[(_0x2fba71(0x1f0))](_0x3f3566);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a282_0xfecf8a(0x1fc)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a282_0xfecf8a(0x213)])()),__metadata(a282_0xfecf8a(0x1e5),[salesforce_auth_service_1[a282_0xfecf8a(0x202)]])],SalesforceService),exports[a282_0xfecf8a(0x229)]=SalesforceService;