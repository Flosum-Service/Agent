function a272_0x28f9(_0x5b026b,_0x3a9dae){const _0xa7731b=a272_0x36de();return a272_0x28f9=function(_0x4edd34,_0x5762d8){_0x4edd34=_0x4edd34-0xbc;let _0x36de2f=_0xa7731b[_0x4edd34];return _0x36de2f;},a272_0x28f9(_0x5b026b,_0x3a9dae);}const a272_0x2a9890=a272_0x28f9;(function(_0x17d7bb,_0x2ca420){const _0x100276=a272_0x28f9,_0xe71de4=_0x17d7bb();while(!![]){try{const _0x34f91c=parseInt(_0x100276(0xd4))/0x1+parseInt(_0x100276(0xbe))/0x2+parseInt(_0x100276(0xc6))/0x3*(parseInt(_0x100276(0xca))/0x4)+parseInt(_0x100276(0xd8))/0x5+-parseInt(_0x100276(0xdd))/0x6*(-parseInt(_0x100276(0xcb))/0x7)+parseInt(_0x100276(0xf6))/0x8*(-parseInt(_0x100276(0xd0))/0x9)+-parseInt(_0x100276(0xe6))/0xa;if(_0x34f91c===_0x2ca420)break;else _0xe71de4['push'](_0xe71de4['shift']());}catch(_0xae56de){_0xe71de4['push'](_0xe71de4['shift']());}}}(a272_0x36de,0x5059b));const a272_0x5762d8=(function(){let _0x24602f=!![];return function(_0x1162fa,_0x330af6){const _0x12d6d8=_0x24602f?function(){const _0x5bbb65=a272_0x28f9;if(_0x330af6){const _0x484981=_0x330af6[_0x5bbb65(0xf0)](_0x1162fa,arguments);return _0x330af6=null,_0x484981;}}:function(){};return _0x24602f=![],_0x12d6d8;};}()),a272_0x4edd34=a272_0x5762d8(this,function(){const _0x62be57=a272_0x28f9;return a272_0x4edd34[_0x62be57(0xd3)]()[_0x62be57(0xf4)]('(((.+)+)+)+$')['toString']()['constructor'](a272_0x4edd34)['search'](_0x62be57(0xc4));});a272_0x4edd34();'use strict';var __decorate=this&&this[a272_0x2a9890(0xdb)]||function(_0x23090d,_0x54d728,_0x36bb9c,_0x50e640){const _0x4fff22=a272_0x2a9890;var _0x32ca71=arguments['length'],_0x52fe97=_0x32ca71<0x3?_0x54d728:_0x50e640===null?_0x50e640=Object[_0x4fff22(0xdf)](_0x54d728,_0x36bb9c):_0x50e640,_0x6ec4d7;if(typeof Reflect===_0x4fff22(0xc5)&&typeof Reflect[_0x4fff22(0xf3)]===_0x4fff22(0xbf))_0x52fe97=Reflect[_0x4fff22(0xf3)](_0x23090d,_0x54d728,_0x36bb9c,_0x50e640);else{for(var _0x2ff339=_0x23090d[_0x4fff22(0xfe)]-0x1;_0x2ff339>=0x0;_0x2ff339--)if(_0x6ec4d7=_0x23090d[_0x2ff339])_0x52fe97=(_0x32ca71<0x3?_0x6ec4d7(_0x52fe97):_0x32ca71>0x3?_0x6ec4d7(_0x54d728,_0x36bb9c,_0x52fe97):_0x6ec4d7(_0x54d728,_0x36bb9c))||_0x52fe97;}return _0x32ca71>0x3&&_0x52fe97&&Object[_0x4fff22(0xf9)](_0x54d728,_0x36bb9c,_0x52fe97),_0x52fe97;},__metadata=this&&this[a272_0x2a9890(0xcf)]||function(_0x518f23,_0x2104a1){const _0x780fae=a272_0x2a9890;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x780fae(0xbf))return Reflect[_0x780fae(0xfa)](_0x518f23,_0x2104a1);},__param=this&&this[a272_0x2a9890(0xc1)]||function(_0x31c779,_0x571d45){return function(_0x517730,_0x5cc465){_0x571d45(_0x517730,_0x5cc465,_0x31c779);};},SalesforceService_1;Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a272_0x2a9890(0xd7)]=void 0x0;const typedi_1=require(a272_0x2a9890(0xef)),core_1=require(a272_0x2a9890(0xf1)),internal_server_error_1=require(a272_0x2a9890(0xe9)),salesforce_auth_service_1=require(a272_0x2a9890(0xbd)),constants_1=require(a272_0x2a9890(0xfb)),create_request_util_1=require(a272_0x2a9890(0xe4)),salesforce_logger_service_1=require(a272_0x2a9890(0xe5)),salesforce_error_1=require('../errors/salesforce.error'),connection_dto_1=require(a272_0x2a9890(0xc3)),bulk_components_retriever_1=require(a272_0x2a9890(0xcd));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x497e0a){const _0x19f008=a272_0x2a9890;this[_0x19f008(0xd9)]=new core_1['Logger'](SalesforceService_1[_0x19f008(0xce)]),this['request']=(0x0,create_request_util_1['createSalesforceRequest'])(_0x497e0a),this[_0x19f008(0xed)]=constants_1['IGNORE_FLOSUM_GIT_NAMESPACE']?'':'/flosum_git';}[a272_0x2a9890(0xf5)](_0x1c3d29){const _0x1d0655=a272_0x2a9890;this[_0x1d0655(0x101)]=_0x1c3d29,this[_0x1d0655(0xeb)]=new salesforce_logger_service_1[(_0x1d0655(0xf2))](this);}[a272_0x2a9890(0xe7)](){const _0x1c9a25=a272_0x2a9890;return this[_0x1c9a25(0xeb)];}async['retrieveComponents'](_0x2d4eb2){const _0xf6572d=a272_0x2a9890;try{this[_0xf6572d(0xd9)][_0xf6572d(0xd1)](_0xf6572d(0xdc),_0x2d4eb2[_0xf6572d(0xfe)]);const _0x5cc8ad=new bulk_components_retriever_1[(_0xf6572d(0xda))]({'request':this['request'],'ids':_0x2d4eb2}),_0x274c21=await _0x5cc8ad['retrieve']();return _0x274c21;}catch(_0x337529){this[_0xf6572d(0xd9)]['error'](_0x337529);throw new salesforce_error_1[(_0xf6572d(0xde))](_0x337529);}}async[a272_0x2a9890(0xea)](_0x351d42){const _0x53417e=a272_0x2a9890;try{this[_0x53417e(0xd9)][_0x53417e(0xd1)](_0x53417e(0xc8),_0x351d42),await this['request']['delete'](_0x53417e(0xe0)+constants_1[_0x53417e(0xec)]+_0x53417e(0xe1)+_0x351d42);}catch(_0x1ee960){this['logger']['error'](_0x1ee960);throw new salesforce_error_1[(_0x53417e(0xde))](_0x1ee960);}}async[a272_0x2a9890(0xc7)](_0x33693a,_0x12c91f=![]){const _0x9087a8=a272_0x2a9890;try{this[_0x9087a8(0xd9)][_0x9087a8(0xd1)]('Retrieve\x20attachment\x20%s\x20from\x20salesforce',_0x33693a);const _0x4f142c=await this[_0x9087a8(0xfd)][_0x9087a8(0xe8)]('services/data/'+constants_1[_0x9087a8(0xec)]+_0x9087a8(0xe1)+_0x33693a+_0x9087a8(0xf7),{'responseType':_0x12c91f?_0x9087a8(0xcc):'text'})['then'](({data:_0xf20775})=>_0xf20775);return _0x4f142c;}catch(_0x2a62d6){this[_0x9087a8(0xd9)][_0x9087a8(0xe2)](_0x2a62d6);throw new salesforce_error_1[(_0x9087a8(0xde))](_0x2a62d6);}}async['sendLog'](_0x56473e){const _0x3adf3b=a272_0x2a9890;try{_0x56473e['forEach'](_0x281d0c=>this[_0x3adf3b(0xd9)][_0x3adf3b(0xd1)]('[message]\x20%s',_0x281d0c)),await this[_0x3adf3b(0xfd)][_0x3adf3b(0x100)]('services/apexrest'+this[_0x3adf3b(0xed)]+'/logger',{'messages':_0x56473e,'loggerId':this[_0x3adf3b(0x101)]});}catch(_0x1f6c28){this[_0x3adf3b(0xd9)][_0x3adf3b(0xe2)](_0x1f6c28);throw new internal_server_error_1[(_0x3adf3b(0xd6))](_0x1f6c28);}}async[a272_0x2a9890(0xbc)](_0x585faf,_0x27a5e9){const _0x165aa5=a272_0x2a9890;try{const {data:_0xb8050}=await this[_0x165aa5(0xfd)][_0x165aa5(0x100)](_0x165aa5(0xe0)+constants_1['SALESFORCE_API_VERSION']+_0x165aa5(0xfc)+_0x585faf+'/',_0x27a5e9);return _0xb8050['id'];}catch(_0x4e779d){throw new salesforce_error_1[(_0x165aa5(0xde))](_0x4e779d);}}async[a272_0x2a9890(0xe3)](_0x48d916,_0x3e3076,_0x138382){const _0x38ee05=a272_0x2a9890;try{await this[_0x38ee05(0xfd)][_0x38ee05(0xc0)]('services/data/'+constants_1[_0x38ee05(0xec)]+_0x38ee05(0xfc)+_0x48d916+'/'+_0x3e3076,_0x138382);}catch(_0xafdd4b){throw new salesforce_error_1[(_0x38ee05(0xde))](_0xafdd4b);}}async[a272_0x2a9890(0xf8)](_0x3757d1){const _0x206cff=a272_0x2a9890;try{const {data:_0x5db7d5}=await this[_0x206cff(0xfd)]['get'](_0x206cff(0xd5)+this[_0x206cff(0xed)]+_0x206cff(0xd2),{'params':{'connectionId':_0x3757d1}});return new connection_dto_1[(_0x206cff(0xee))](_0x5db7d5);}catch(_0x17f669){throw new salesforce_error_1[(_0x206cff(0xde))](_0x17f669);}}};function a272_0x36de(){const _0x149685=['namespace','ConnectionDto','typedi','apply','../../../../core','SalesforceLogger','decorate','search','setLoggerId','56Dffrrv','/body','fetchConnection','defineProperty','metadata','../../../../constants','/sobjects/','request','length','Service','post','loggerId','createObject','./salesforce-auth.service','1052538OdxghV','function','patch','__param','Inject','../dto/connection.dto','(((.+)+)+)+$','object','33297YJfEjb','retrieveAttachment','Delete\x20attachment\x20%s\x20from\x20salesforce','design:paramtypes','120AmDuaG','49wxJTOR','arraybuffer','../classes/bulk-components-retriever','name','__metadata','488484GzpHNH','log','/connection','toString','585083QlccNw','services/apexrest','InternalServerError','SalesforceService','2557665EjSwuU','logger','BulkComponentsRetriever','__decorate','Retrieve\x20components\x20\x20%d\x20from\x20salesforce','85194dZXsbg','SalesforceError','getOwnPropertyDescriptor','services/data/','/sobjects/Attachment/','error','patchObject','../utils/create-request.util','./salesforce-logger.service','13462010zxWdfa','getLogger','get','../../../../core/errors/internal-server.error','deleteAttachment','internalLogger','SALESFORCE_API_VERSION'];a272_0x36de=function(){return _0x149685;};return a272_0x36de();}SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a272_0x2a9890(0xff)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a272_0x2a9890(0xc2)])()),__metadata(a272_0x2a9890(0xc9),[salesforce_auth_service_1['SalesforceAuthService']])],SalesforceService),exports[a272_0x2a9890(0xd7)]=SalesforceService;