const a240_0xaca9a6=a240_0x1b07;(function(_0x2240b8,_0x59c17b){const _0x16e381=a240_0x1b07,_0x52664a=_0x2240b8();while(!![]){try{const _0x362ee8=-parseInt(_0x16e381(0x176))/0x1*(parseInt(_0x16e381(0x15c))/0x2)+-parseInt(_0x16e381(0x164))/0x3+parseInt(_0x16e381(0x14b))/0x4+parseInt(_0x16e381(0x160))/0x5*(parseInt(_0x16e381(0x14d))/0x6)+-parseInt(_0x16e381(0x17a))/0x7+parseInt(_0x16e381(0x14a))/0x8*(parseInt(_0x16e381(0x137))/0x9)+parseInt(_0x16e381(0x154))/0xa*(parseInt(_0x16e381(0x16b))/0xb);if(_0x362ee8===_0x59c17b)break;else _0x52664a['push'](_0x52664a['shift']());}catch(_0x8ba905){_0x52664a['push'](_0x52664a['shift']());}}}(a240_0x3d46,0x20319));const a240_0x4e2abb=(function(){let _0x963ab2=!![];return function(_0x11458b,_0x2e20c5){const _0x430d68=_0x963ab2?function(){const _0x5024ef=a240_0x1b07;if(_0x2e20c5){const _0x252853=_0x2e20c5[_0x5024ef(0x17b)](_0x11458b,arguments);return _0x2e20c5=null,_0x252853;}}:function(){};return _0x963ab2=![],_0x430d68;};}()),a240_0x44cdeb=a240_0x4e2abb(this,function(){const _0x308d3d=a240_0x1b07;return a240_0x44cdeb['toString']()[_0x308d3d(0x141)](_0x308d3d(0x15b))[_0x308d3d(0x138)]()[_0x308d3d(0x157)](a240_0x44cdeb)['search']('(((.+)+)+)+$');});function a240_0x3d46(){const _0x130f0a=['length','43765whdyac','Inject','getOwnPropertyDescriptor','getLogger','407925XbxBqs','internalLogger','/flosum_git','services/data/','get','[message]\x20%s','SALESFORCE_API_VERSION','8074DPwXMV','arraybuffer','__metadata','delete\x20attachment\x20%s\x20from\x20salesforce','sendLog','retrieveAttachment','InternalServerError','defineProperty','namespace','services/apexrest','../../../../constants','1PnzHTx','logger','SalesforceService','object','1194326qSjwZk','apply','retrieve\x20components\x20\x20%d\x20from\x20salesforce','./salesforce-logger.service','error','log','../../../../core','9eJVQit','toString','request','./salesforce-auth.service','/sobjects/','decorate','text','retrieve\x20attachment\x20%s\x20from\x20salesforce','delete','SalesforceLogger','search','loggerId','deleteAttachment','SalesforceError','Logger','fetchConnection','__esModule','metadata','__param','448920RkNzdk','563464TqIApL','SalesforceAuthService','84GrtdSm','../errors/salesforce.error','../../../../core/errors/internal-server.error','/logger','post','Service','ConnectionDto','4370tFABpR','function','patchObject','constructor','../dto/connection.dto','/sobjects/Attachment/','retrieveComponents','(((.+)+)+)+$','403646GtKhVD','IGNORE_FLOSUM_GIT_NAMESPACE','then'];a240_0x3d46=function(){return _0x130f0a;};return a240_0x3d46();}a240_0x44cdeb();'use strict';var __decorate=this&&this['__decorate']||function(_0x262e3a,_0x2d1184,_0x35c81c,_0x572a7d){const _0x19fd72=a240_0x1b07;var _0x17dca9=arguments[_0x19fd72(0x15f)],_0x41f171=_0x17dca9<0x3?_0x2d1184:_0x572a7d===null?_0x572a7d=Object[_0x19fd72(0x162)](_0x2d1184,_0x35c81c):_0x572a7d,_0x58f444;if(typeof Reflect===_0x19fd72(0x179)&&typeof Reflect[_0x19fd72(0x13c)]===_0x19fd72(0x155))_0x41f171=Reflect['decorate'](_0x262e3a,_0x2d1184,_0x35c81c,_0x572a7d);else{for(var _0x4d3f74=_0x262e3a[_0x19fd72(0x15f)]-0x1;_0x4d3f74>=0x0;_0x4d3f74--)if(_0x58f444=_0x262e3a[_0x4d3f74])_0x41f171=(_0x17dca9<0x3?_0x58f444(_0x41f171):_0x17dca9>0x3?_0x58f444(_0x2d1184,_0x35c81c,_0x41f171):_0x58f444(_0x2d1184,_0x35c81c))||_0x41f171;}return _0x17dca9>0x3&&_0x41f171&&Object['defineProperty'](_0x2d1184,_0x35c81c,_0x41f171),_0x41f171;},__metadata=this&&this[a240_0xaca9a6(0x16d)]||function(_0x1cbbc5,_0x28e999){const _0x1ed206=a240_0xaca9a6;if(typeof Reflect===_0x1ed206(0x179)&&typeof Reflect['metadata']===_0x1ed206(0x155))return Reflect[_0x1ed206(0x148)](_0x1cbbc5,_0x28e999);},__param=this&&this[a240_0xaca9a6(0x149)]||function(_0x5531aa,_0x37900e){return function(_0x15cf77,_0xb8f801){_0x37900e(_0x15cf77,_0xb8f801,_0x5531aa);};},SalesforceService_1;Object[a240_0xaca9a6(0x172)](exports,a240_0xaca9a6(0x147),{'value':!![]}),exports[a240_0xaca9a6(0x178)]=void 0x0;function a240_0x1b07(_0x37bfb5,_0x50a5c6){const _0x3e9703=a240_0x3d46();return a240_0x1b07=function(_0x44cdeb,_0x4e2abb){_0x44cdeb=_0x44cdeb-0x136;let _0x3d4689=_0x3e9703[_0x44cdeb];return _0x3d4689;},a240_0x1b07(_0x37bfb5,_0x50a5c6);}const typedi_1=require('typedi'),core_1=require(a240_0xaca9a6(0x136)),internal_server_error_1=require(a240_0xaca9a6(0x14f)),salesforce_auth_service_1=require(a240_0xaca9a6(0x13a)),constants_1=require(a240_0xaca9a6(0x175)),create_request_util_1=require('../utils/create-request.util'),salesforce_logger_service_1=require(a240_0xaca9a6(0x17d)),salesforce_error_1=require(a240_0xaca9a6(0x14e)),connection_dto_1=require(a240_0xaca9a6(0x158));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x200675){const _0x208e37=a240_0xaca9a6;this[_0x208e37(0x177)]=new core_1[(_0x208e37(0x145))](SalesforceService_1['name']),this['request']=(0x0,create_request_util_1['createSalesforceRequest'])(_0x200675),this[_0x208e37(0x173)]=constants_1[_0x208e37(0x15d)]?'':_0x208e37(0x166);}['setLoggerId'](_0x44fc70){const _0x53df40=a240_0xaca9a6;this[_0x53df40(0x142)]=_0x44fc70,this[_0x53df40(0x165)]=new salesforce_logger_service_1[(_0x53df40(0x140))](this);}[a240_0xaca9a6(0x163)](){const _0x2e8c4e=a240_0xaca9a6;return this[_0x2e8c4e(0x165)];}async[a240_0xaca9a6(0x15a)](_0x122816){const _0xcf2c6c=a240_0xaca9a6;try{this[_0xcf2c6c(0x177)][_0xcf2c6c(0x17f)](_0xcf2c6c(0x17c),_0x122816[_0xcf2c6c(0x15f)]);const _0x184003=await this[_0xcf2c6c(0x139)][_0xcf2c6c(0x151)]('services/apexrest'+this[_0xcf2c6c(0x173)]+'/attachments',{'componentIds':_0x122816,'loggerId':this['loggerId']})[_0xcf2c6c(0x15e)](({data:_0x260e4b})=>_0x260e4b);return _0x184003;}catch(_0x413a74){this[_0xcf2c6c(0x177)][_0xcf2c6c(0x17e)](_0x413a74);throw new salesforce_error_1[(_0xcf2c6c(0x144))](_0x413a74);}}async[a240_0xaca9a6(0x143)](_0x14f505){const _0x2973b3=a240_0xaca9a6;try{this[_0x2973b3(0x177)][_0x2973b3(0x17f)](_0x2973b3(0x16e),_0x14f505),await this[_0x2973b3(0x139)][_0x2973b3(0x13f)]('services/data/'+constants_1[_0x2973b3(0x16a)]+_0x2973b3(0x159)+_0x14f505);}catch(_0x32fca9){this[_0x2973b3(0x177)][_0x2973b3(0x17e)](_0x32fca9);throw new salesforce_error_1['SalesforceError'](_0x32fca9);}}async[a240_0xaca9a6(0x170)](_0x3eaefb,_0x1ff3a0=![]){const _0x48defc=a240_0xaca9a6;try{this['logger']['log'](_0x48defc(0x13e),_0x3eaefb);const _0x244fb2=await this[_0x48defc(0x139)][_0x48defc(0x168)](_0x48defc(0x167)+constants_1[_0x48defc(0x16a)]+_0x48defc(0x159)+_0x3eaefb+'/body',{'responseType':_0x1ff3a0?_0x48defc(0x16c):_0x48defc(0x13d)})[_0x48defc(0x15e)](({data:_0x1aeba0})=>_0x1aeba0);return _0x244fb2;}catch(_0x834475){this[_0x48defc(0x177)][_0x48defc(0x17e)](_0x834475);throw new salesforce_error_1[(_0x48defc(0x144))](_0x834475);}}async[a240_0xaca9a6(0x16f)](_0x59eccd){const _0x3314a9=a240_0xaca9a6;try{_0x59eccd['forEach'](_0x170146=>this[_0x3314a9(0x177)][_0x3314a9(0x17f)](_0x3314a9(0x169),_0x170146)),await this[_0x3314a9(0x139)][_0x3314a9(0x151)](_0x3314a9(0x174)+this[_0x3314a9(0x173)]+_0x3314a9(0x150),{'messages':_0x59eccd,'loggerId':this[_0x3314a9(0x142)]});}catch(_0x1a40fe){this['logger'][_0x3314a9(0x17e)](_0x1a40fe);throw new internal_server_error_1[(_0x3314a9(0x171))](_0x1a40fe);}}async['createObject'](_0x8ef824,_0x1953c6){const _0x3ce91a=a240_0xaca9a6;try{const {data:_0x4dff6e}=await this[_0x3ce91a(0x139)]['post'](_0x3ce91a(0x167)+constants_1[_0x3ce91a(0x16a)]+_0x3ce91a(0x13b)+_0x8ef824+'/',_0x1953c6);return _0x4dff6e['id'];}catch(_0x328674){throw new salesforce_error_1[(_0x3ce91a(0x144))](_0x328674);}}async[a240_0xaca9a6(0x156)](_0x101894,_0x4f69cf,_0x47c076){const _0x56b76d=a240_0xaca9a6;try{await this[_0x56b76d(0x139)]['patch'](_0x56b76d(0x167)+constants_1[_0x56b76d(0x16a)]+_0x56b76d(0x13b)+_0x101894+'/'+_0x4f69cf,_0x47c076);}catch(_0x2f64bf){throw new salesforce_error_1[(_0x56b76d(0x144))](_0x2f64bf);}}async[a240_0xaca9a6(0x146)](_0xeb6eb0){const _0x39a944=a240_0xaca9a6;try{const {data:_0x547477}=await this[_0x39a944(0x139)]['get'](_0x39a944(0x174)+this[_0x39a944(0x173)]+'/connection',{'params':{'connectionId':_0xeb6eb0}});return new connection_dto_1[(_0x39a944(0x153))](_0x547477);}catch(_0x1e2633){throw new salesforce_error_1['SalesforceError'](_0x1e2633);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a240_0xaca9a6(0x152)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a240_0xaca9a6(0x161)])()),__metadata('design:paramtypes',[salesforce_auth_service_1[a240_0xaca9a6(0x14c)]])],SalesforceService),exports['SalesforceService']=SalesforceService;