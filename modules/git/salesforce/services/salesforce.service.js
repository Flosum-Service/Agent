const a239_0x52b417=a239_0x291c;(function(_0x6f1c4,_0x317c5c){const _0x4858ba=a239_0x291c,_0x56f87b=_0x6f1c4();while(!![]){try{const _0x6792f3=parseInt(_0x4858ba(0x147))/0x1+parseInt(_0x4858ba(0x16d))/0x2*(-parseInt(_0x4858ba(0x13f))/0x3)+-parseInt(_0x4858ba(0x13b))/0x4*(parseInt(_0x4858ba(0x172))/0x5)+-parseInt(_0x4858ba(0x13a))/0x6+-parseInt(_0x4858ba(0x142))/0x7*(parseInt(_0x4858ba(0x13d))/0x8)+parseInt(_0x4858ba(0x158))/0x9+-parseInt(_0x4858ba(0x160))/0xa*(-parseInt(_0x4858ba(0x16b))/0xb);if(_0x6792f3===_0x317c5c)break;else _0x56f87b['push'](_0x56f87b['shift']());}catch(_0x384ea7){_0x56f87b['push'](_0x56f87b['shift']());}}}(a239_0x11fc,0x1baca));function a239_0x291c(_0x8f1084,_0x49b923){const _0x37eb18=a239_0x11fc();return a239_0x291c=function(_0x3da3c3,_0x54bf55){_0x3da3c3=_0x3da3c3-0x130;let _0x11fca6=_0x37eb18[_0x3da3c3];return _0x11fca6;},a239_0x291c(_0x8f1084,_0x49b923);}const a239_0x54bf55=(function(){let _0x271e96=!![];return function(_0x398a24,_0x1a1760){const _0x59eaa9=_0x271e96?function(){const _0x57fa54=a239_0x291c;if(_0x1a1760){const _0x46e519=_0x1a1760[_0x57fa54(0x15a)](_0x398a24,arguments);return _0x1a1760=null,_0x46e519;}}:function(){};return _0x271e96=![],_0x59eaa9;};}()),a239_0x3da3c3=a239_0x54bf55(this,function(){const _0x22f4b3=a239_0x291c;return a239_0x3da3c3[_0x22f4b3(0x152)]()['search'](_0x22f4b3(0x153))[_0x22f4b3(0x152)]()[_0x22f4b3(0x130)](a239_0x3da3c3)['search'](_0x22f4b3(0x153));});a239_0x3da3c3();'use strict';var __decorate=this&&this[a239_0x52b417(0x143)]||function(_0x5cb329,_0x1fb6b2,_0x464053,_0x381a59){const _0x43da87=a239_0x52b417;var _0x1a7d4f=arguments['length'],_0x57b478=_0x1a7d4f<0x3?_0x1fb6b2:_0x381a59===null?_0x381a59=Object[_0x43da87(0x162)](_0x1fb6b2,_0x464053):_0x381a59,_0x307224;if(typeof Reflect===_0x43da87(0x14f)&&typeof Reflect['decorate']==='function')_0x57b478=Reflect[_0x43da87(0x136)](_0x5cb329,_0x1fb6b2,_0x464053,_0x381a59);else{for(var _0x4a156b=_0x5cb329['length']-0x1;_0x4a156b>=0x0;_0x4a156b--)if(_0x307224=_0x5cb329[_0x4a156b])_0x57b478=(_0x1a7d4f<0x3?_0x307224(_0x57b478):_0x1a7d4f>0x3?_0x307224(_0x1fb6b2,_0x464053,_0x57b478):_0x307224(_0x1fb6b2,_0x464053))||_0x57b478;}return _0x1a7d4f>0x3&&_0x57b478&&Object['defineProperty'](_0x1fb6b2,_0x464053,_0x57b478),_0x57b478;},__metadata=this&&this['__metadata']||function(_0xf29939,_0x28855a){const _0x2cb2e6=a239_0x52b417;if(typeof Reflect===_0x2cb2e6(0x14f)&&typeof Reflect['metadata']===_0x2cb2e6(0x155))return Reflect['metadata'](_0xf29939,_0x28855a);},__param=this&&this['__param']||function(_0x1c792f,_0x5d2ec8){return function(_0x4d051a,_0xaff0a7){_0x5d2ec8(_0x4d051a,_0xaff0a7,_0x1c792f);};},SalesforceService_1;function a239_0x11fc(){const _0x47cd55=['../errors/salesforce.error','247895AVgufJ','delete','services/data/','./salesforce-auth.service','retrieveComponents','InternalServerError','get','constructor','sendLog','request','./salesforce-logger.service','loggerId','error','decorate','then','SalesforceError','typedi','1081392REvTPw','16udEQSS','retrieveAttachment','8AsudYZ','/attachments','18435aCqnjm','fetchConnection','../utils/create-request.util','1356691pJurkl','__decorate','Logger','length','SalesforceLogger','52633hzPuVu','internalLogger','[message]\x20%s','createObject','/body','defineProperty','log','name','object','../../../../core','SalesforceService','toString','(((.+)+)+)+$','retrieve\x20components\x20\x20%d\x20from\x20salesforce','function','SALESFORCE_API_VERSION','IGNORE_FLOSUM_GIT_NAMESPACE','1267101dGGmnu','createSalesforceRequest','apply','text','namespace','forEach','__esModule','deleteAttachment','10HrGpjN','/connection','getOwnPropertyDescriptor','/sobjects/Attachment/','post','../../../../constants','design:paramtypes','/logger','Inject','logger','../dto/connection.dto','5550413lxWEai','services/apexrest','4ndTyUo','SalesforceAuthService','setLoggerId','Service'];a239_0x11fc=function(){return _0x47cd55;};return a239_0x11fc();}Object[a239_0x52b417(0x14c)](exports,a239_0x52b417(0x15e),{'value':!![]}),exports[a239_0x52b417(0x151)]=void 0x0;const typedi_1=require(a239_0x52b417(0x139)),core_1=require(a239_0x52b417(0x150)),internal_server_error_1=require('../../../../core/errors/internal-server.error'),salesforce_auth_service_1=require(a239_0x52b417(0x175)),constants_1=require(a239_0x52b417(0x165)),create_request_util_1=require(a239_0x52b417(0x141)),salesforce_logger_service_1=require(a239_0x52b417(0x133)),salesforce_error_1=require(a239_0x52b417(0x171)),connection_dto_1=require(a239_0x52b417(0x16a));let SalesforceService=SalesforceService_1=class SalesforceService{constructor(_0x39a0d1){const _0x394fd4=a239_0x52b417;this[_0x394fd4(0x169)]=new core_1[(_0x394fd4(0x144))](SalesforceService_1[_0x394fd4(0x14e)]),this['request']=(0x0,create_request_util_1[_0x394fd4(0x159)])(_0x39a0d1),this[_0x394fd4(0x15c)]=constants_1[_0x394fd4(0x157)]?'':'/flosum_git';}[a239_0x52b417(0x16f)](_0x402736){const _0x176318=a239_0x52b417;this[_0x176318(0x134)]=_0x402736,this['internalLogger']=new salesforce_logger_service_1[(_0x176318(0x146))](this);}['getLogger'](){const _0x1098da=a239_0x52b417;return this[_0x1098da(0x148)];}async[a239_0x52b417(0x176)](_0x19a42a){const _0x186a2b=a239_0x52b417;try{this[_0x186a2b(0x169)]['log'](_0x186a2b(0x154),_0x19a42a[_0x186a2b(0x145)]);const _0x4f14e5=await this['request'][_0x186a2b(0x164)](_0x186a2b(0x16c)+this[_0x186a2b(0x15c)]+_0x186a2b(0x13e),{'componentIds':_0x19a42a,'loggerId':this[_0x186a2b(0x134)]})[_0x186a2b(0x137)](({data:_0x36ada0})=>_0x36ada0);return _0x4f14e5;}catch(_0x3bc312){this['logger']['error'](_0x3bc312);throw new salesforce_error_1[(_0x186a2b(0x138))](_0x3bc312);}}async[a239_0x52b417(0x15f)](_0x366687){const _0x1c887c=a239_0x52b417;try{this[_0x1c887c(0x169)]['log']('delete\x20attachment\x20%s\x20from\x20salesforce',_0x366687),await this[_0x1c887c(0x132)][_0x1c887c(0x173)](_0x1c887c(0x174)+constants_1[_0x1c887c(0x156)]+_0x1c887c(0x163)+_0x366687);}catch(_0x3c8d09){this[_0x1c887c(0x169)][_0x1c887c(0x135)](_0x3c8d09);throw new salesforce_error_1[(_0x1c887c(0x138))](_0x3c8d09);}}async[a239_0x52b417(0x13c)](_0xfdafc2,_0x190ccb=![]){const _0x90da99=a239_0x52b417;try{this[_0x90da99(0x169)][_0x90da99(0x14d)]('retrieve\x20attachment\x20%s\x20from\x20salesforce',_0xfdafc2);const _0x2b13bd=await this[_0x90da99(0x132)][_0x90da99(0x178)](_0x90da99(0x174)+constants_1[_0x90da99(0x156)]+_0x90da99(0x163)+_0xfdafc2+_0x90da99(0x14b),{'responseType':_0x190ccb?'arraybuffer':_0x90da99(0x15b)})[_0x90da99(0x137)](({data:_0x582f9c})=>_0x582f9c);return _0x2b13bd;}catch(_0x58c246){this[_0x90da99(0x169)][_0x90da99(0x135)](_0x58c246);throw new salesforce_error_1[(_0x90da99(0x138))](_0x58c246);}}async[a239_0x52b417(0x131)](_0x548b7d){const _0xfd747c=a239_0x52b417;try{_0x548b7d[_0xfd747c(0x15d)](_0x125ea6=>this[_0xfd747c(0x169)]['log'](_0xfd747c(0x149),_0x125ea6)),await this[_0xfd747c(0x132)][_0xfd747c(0x164)](_0xfd747c(0x16c)+this[_0xfd747c(0x15c)]+_0xfd747c(0x167),{'messages':_0x548b7d,'loggerId':this[_0xfd747c(0x134)]});}catch(_0x4b13f4){this[_0xfd747c(0x169)]['error'](_0x4b13f4);throw new internal_server_error_1[(_0xfd747c(0x177))](_0x4b13f4);}}async[a239_0x52b417(0x14a)](_0x3d94fe,_0x4c9a82){const _0x589946=a239_0x52b417;try{const {data:_0x4b9885}=await this[_0x589946(0x132)][_0x589946(0x164)](_0x589946(0x174)+constants_1['SALESFORCE_API_VERSION']+'/sobjects/'+_0x3d94fe+'/',_0x4c9a82);return _0x4b9885['id'];}catch(_0x335ea0){throw new salesforce_error_1['SalesforceError'](_0x335ea0);}}async['patchObject'](_0x727b25,_0x3445b,_0x5767ae){const _0x5ef4e2=a239_0x52b417;try{await this['request']['patch'](_0x5ef4e2(0x174)+constants_1[_0x5ef4e2(0x156)]+'/sobjects/'+_0x727b25+'/'+_0x3445b,_0x5767ae);}catch(_0x42675b){throw new salesforce_error_1[(_0x5ef4e2(0x138))](_0x42675b);}}async[a239_0x52b417(0x140)](_0x4cd681){const _0x398d9d=a239_0x52b417;try{const {data:_0x48e968}=await this[_0x398d9d(0x132)]['get'](_0x398d9d(0x16c)+this[_0x398d9d(0x15c)]+_0x398d9d(0x161),{'params':{'connectionId':_0x4cd681}});return new connection_dto_1['ConnectionDto'](_0x48e968);}catch(_0x4034c6){throw new salesforce_error_1[(_0x398d9d(0x138))](_0x4034c6);}}};SalesforceService=SalesforceService_1=__decorate([(0x0,typedi_1[a239_0x52b417(0x170)])({'transient':!![]}),__param(0x0,(0x0,typedi_1[a239_0x52b417(0x168)])()),__metadata(a239_0x52b417(0x166),[salesforce_auth_service_1[a239_0x52b417(0x16e)]])],SalesforceService),exports[a239_0x52b417(0x151)]=SalesforceService;