const a303_0x4d33c6=a303_0x2990;(function(_0x239748,_0x47d464){const _0x885110=a303_0x2990,_0x511ac2=_0x239748();while(!![]){try{const _0x1c7b5c=-parseInt(_0x885110(0x1c1))/0x1+parseInt(_0x885110(0x1c0))/0x2+parseInt(_0x885110(0x1bd))/0x3+parseInt(_0x885110(0x194))/0x4+-parseInt(_0x885110(0x19b))/0x5*(-parseInt(_0x885110(0x196))/0x6)+parseInt(_0x885110(0x1a4))/0x7+-parseInt(_0x885110(0x1aa))/0x8;if(_0x1c7b5c===_0x47d464)break;else _0x511ac2['push'](_0x511ac2['shift']());}catch(_0x1c74fc){_0x511ac2['push'](_0x511ac2['shift']());}}}(a303_0x4634,0xba65a));const a303_0x56f690=(function(){let _0x3ef1d9=!![];return function(_0x1c9c50,_0x45838a){const _0x137b9b=_0x3ef1d9?function(){const _0x3a9359=a303_0x2990;if(_0x45838a){const _0x4921fb=_0x45838a[_0x3a9359(0x198)](_0x1c9c50,arguments);return _0x45838a=null,_0x4921fb;}}:function(){};return _0x3ef1d9=![],_0x137b9b;};}()),a303_0x39265d=a303_0x56f690(this,function(){const _0x509499=a303_0x2990;return a303_0x39265d[_0x509499(0x199)]()['search'](_0x509499(0x1a1))[_0x509499(0x199)]()[_0x509499(0x1c2)](a303_0x39265d)[_0x509499(0x1b6)](_0x509499(0x1a1));});a303_0x39265d();'use strict';var __importDefault=this&&this[a303_0x4d33c6(0x1c6)]||function(_0x12cc25){const _0x1e259a=a303_0x4d33c6;return _0x12cc25&&_0x12cc25[_0x1e259a(0x1c3)]?_0x12cc25:{'default':_0x12cc25};};function a303_0x4634(){const _0x136351=['].\x20Original\x20error:\x20','search','writeChild','splice','fileName','MDApiWriter','exists','BaseWriter','2014752hdOcEb','MAX_WRITES_PER_TICK','components','1256584SXEbYz','398079mVYngu','constructor','__esModule','readZip','catch','__importDefault','skipChildErrors','fileType','4256492xjkKOq','parse','12sIUaRl','body','apply','toString','logger','1058945lhlzLs','log','path','XmlV2','length','join','(((.+)+)+)+$','../parsers/data/child-types','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','6126127JzkKaf','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','includes','sourceDir','replaceOrAppend','keys','20009416OYlKRD','./base.writer','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','writeFile','push','parentComponents','default','handleXmlParsingError','name','all','writeParent'];a303_0x4634=function(){return _0x136351;};return a303_0x4634();}Object['defineProperty'](exports,a303_0x4d33c6(0x1c3),{'value':!![]}),exports[a303_0x4d33c6(0x1ba)]=void 0x0;function a303_0x2990(_0x3a5a42,_0x22cb14){const _0x280b8d=a303_0x4634();return a303_0x2990=function(_0x39265d,_0x56f690){_0x39265d=_0x39265d-0x194;let _0x4634f1=_0x280b8d[_0x39265d];return _0x4634f1;},a303_0x2990(_0x3a5a42,_0x22cb14);}const path_1=__importDefault(require(a303_0x4d33c6(0x19d))),fs_internal_1=require('../internal/fs.internal'),invalid_xml_error_1=require('../parsers/errors/invalid-xml.error'),xml_v2_1=require('../parsers/utils/xml-v2'),child_types_1=__importDefault(require(a303_0x4d33c6(0x1a2))),base_writer_1=require(a303_0x4d33c6(0x1ab));class MDApiWriter extends base_writer_1[a303_0x4d33c6(0x1bc)]{constructor({components:_0x57cfe0,sourceDir:_0x53264f,skipChildErrors:_0x290c9e}){const _0x4c05aa=a303_0x4d33c6;super({'components':_0x57cfe0,'sourceDir':_0x53264f},MDApiWriter[_0x4c05aa(0x1b2)]),this[_0x4c05aa(0x1be)]=0x64,this[_0x4c05aa(0x1af)]={},this[_0x4c05aa(0x1c7)]=_0x290c9e;}async[a303_0x4d33c6(0x1b4)](_0x5946f6){const _0x4c14e1=a303_0x4d33c6;try{const _0x43b35f=await this[_0x4c14e1(0x1c4)](_0x5946f6[_0x4c14e1(0x197)],!![]);await Promise[_0x4c14e1(0x1b3)](_0x43b35f['map'](({filename:_0x159cb6,body:_0x3f3231})=>fs_internal_1['FS'][_0x4c14e1(0x1ad)](path_1[_0x4c14e1(0x1b0)][_0x4c14e1(0x1a0)](this[_0x4c14e1(0x1a7)],_0x159cb6),_0x3f3231)));}catch(_0x5698f1){throw new Error(_0x4c14e1(0x1a3)+_0x5946f6[_0x4c14e1(0x1b9)]+'\x20['+_0x5946f6[_0x4c14e1(0x1c8)]+_0x4c14e1(0x1b5)+_0x5698f1);}}[a303_0x4d33c6(0x1b1)](_0x888a3f,_0x45a34a){const _0x3835aa=a303_0x4d33c6;throw new invalid_xml_error_1['InvalidXmlError'](_0x3835aa(0x1a5)+_0x45a34a[_0x3835aa(0x1b9)]+'\x20['+_0x45a34a[_0x3835aa(0x1c8)]+_0x3835aa(0x1b5)+_0x888a3f);}async[a303_0x4d33c6(0x1b7)](_0x43ff11){const _0x4bb7ad=a303_0x4d33c6,{filename:_0x159767,body:_0x3b4dce}=(await this['readZip'](_0x43ff11['body']))[0x0];try{if(!this[_0x4bb7ad(0x1af)][_0x159767]){const _0x389436=path_1[_0x4bb7ad(0x1b0)]['join'](this[_0x4bb7ad(0x1a7)],_0x159767);if(await fs_internal_1['FS']['exists'](_0x389436)){const _0x4ea5fa=await fs_internal_1['FS']['readFile'](_0x389436);this[_0x4bb7ad(0x1af)][_0x159767]=await xml_v2_1['XmlV2'][_0x4bb7ad(0x195)](_0x4ea5fa)['catch'](_0x10903a=>this[_0x4bb7ad(0x1b1)](_0x10903a,_0x43ff11));}else{this[_0x4bb7ad(0x1af)][_0x159767]=await xml_v2_1[_0x4bb7ad(0x19e)][_0x4bb7ad(0x195)](_0x3b4dce)[_0x4bb7ad(0x1c5)](_0x2ffb5f=>this['handleXmlParsingError'](_0x2ffb5f,_0x43ff11));return;}}const _0x41a573=this[_0x4bb7ad(0x1af)][_0x159767],_0x376302=await xml_v2_1[_0x4bb7ad(0x19e)]['parse'](_0x3b4dce)[_0x4bb7ad(0x1c5)](_0x4187d4=>this['handleXmlParsingError'](_0x4187d4,_0x43ff11));xml_v2_1[_0x4bb7ad(0x19e)][_0x4bb7ad(0x1a8)](_0x41a573,_0x376302);}catch(_0x5b8c84){if(_0x5b8c84 instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0x4bb7ad(0x1c7)])return;else throw _0x5b8c84;}throw new Error(_0x4bb7ad(0x1ac)+_0x43ff11[_0x4bb7ad(0x1b9)]+'\x20['+_0x43ff11[_0x4bb7ad(0x1c8)]+'].\x20Original\x20error:\x20'+_0x5b8c84);}}async['execute'](){const _0x4e268=a303_0x4d33c6;!await fs_internal_1['FS'][_0x4e268(0x1bb)](this['sourceDir'])&&await fs_internal_1['FS']['makeDir'](this[_0x4e268(0x1a7)]);const _0x4a674d=[],_0x55021c=[];for(const _0x3aa198 of this[_0x4e268(0x1bf)]){child_types_1['default'][_0x4e268(0x1a6)](_0x3aa198[_0x4e268(0x1c8)])?_0x55021c[_0x4e268(0x1ae)](_0x3aa198):_0x4a674d[_0x4e268(0x1ae)](_0x3aa198);}for(const _0x1637a9 of _0x4a674d){await this['writeParent'](_0x1637a9);}for(const _0x177258 of _0x55021c){await this[_0x4e268(0x1b7)](_0x177258);}const _0x43aaa1=Object[_0x4e268(0x1a9)](this[_0x4e268(0x1af)]);this[_0x4e268(0x19a)][_0x4e268(0x19c)]('Have\x20to\x20write\x20%d\x20files',this[_0x4e268(0x1bf)][_0x4e268(0x19f)]);while(_0x43aaa1[_0x4e268(0x19f)]){const _0x33fcca=_0x43aaa1[_0x4e268(0x1b8)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x5437ca of _0x33fcca){await fs_internal_1['FS'][_0x4e268(0x1ad)](path_1[_0x4e268(0x1b0)][_0x4e268(0x1a0)](this['sourceDir'],_0x5437ca),xml_v2_1[_0x4e268(0x19e)]['convertToString'](this[_0x4e268(0x1af)][_0x5437ca]));}}this[_0x4e268(0x1af)]={};}}exports[a303_0x4d33c6(0x1ba)]=MDApiWriter;