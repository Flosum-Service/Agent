const a126_0x21c15d=a126_0x2bdf;function a126_0x2bdf(_0x5615e7,_0x3856a2){const _0x3844c6=a126_0x5220();return a126_0x2bdf=function(_0x40b183,_0x4e595d){_0x40b183=_0x40b183-0x198;let _0x5220bc=_0x3844c6[_0x40b183];return _0x5220bc;},a126_0x2bdf(_0x5615e7,_0x3856a2);}(function(_0x13d9eb,_0x6554dd){const _0x360d97=a126_0x2bdf,_0x534580=_0x13d9eb();while(!![]){try{const _0x57d5cc=-parseInt(_0x360d97(0x1a3))/0x1*(parseInt(_0x360d97(0x1cf))/0x2)+parseInt(_0x360d97(0x1ba))/0x3*(-parseInt(_0x360d97(0x1a0))/0x4)+-parseInt(_0x360d97(0x1c1))/0x5+-parseInt(_0x360d97(0x1a2))/0x6*(-parseInt(_0x360d97(0x19f))/0x7)+parseInt(_0x360d97(0x1a5))/0x8+parseInt(_0x360d97(0x1b8))/0x9+-parseInt(_0x360d97(0x1dc))/0xa*(-parseInt(_0x360d97(0x1d2))/0xb);if(_0x57d5cc===_0x6554dd)break;else _0x534580['push'](_0x534580['shift']());}catch(_0x56e205){_0x534580['push'](_0x534580['shift']());}}}(a126_0x5220,0xf2ac1));const a126_0x4e595d=(function(){let _0x1b5256=!![];return function(_0x28c6bf,_0x1ef573){const _0x3b7075=_0x1b5256?function(){const _0x511081=a126_0x2bdf;if(_0x1ef573){const _0x3bf584=_0x1ef573[_0x511081(0x19e)](_0x28c6bf,arguments);return _0x1ef573=null,_0x3bf584;}}:function(){};return _0x1b5256=![],_0x3b7075;};}()),a126_0x40b183=a126_0x4e595d(this,function(){const _0xe0acf8=a126_0x2bdf;return a126_0x40b183[_0xe0acf8(0x1b9)]()[_0xe0acf8(0x1af)]('(((.+)+)+)+$')[_0xe0acf8(0x1b9)]()['constructor'](a126_0x40b183)[_0xe0acf8(0x1af)](_0xe0acf8(0x1a7));});a126_0x40b183();'use strict';var __importDefault=this&&this[a126_0x21c15d(0x1b3)]||function(_0x30737a){const _0x4afa33=a126_0x21c15d;return _0x30737a&&_0x30737a[_0x4afa33(0x1d5)]?_0x30737a:{'default':_0x30737a};};Object[a126_0x21c15d(0x19d)](exports,'__esModule',{'value':!![]}),exports[a126_0x21c15d(0x1ac)]=void 0x0;function a126_0x5220(){const _0x3f4b66=['setCredentials','\x22\x20--allow-empty','\x20&&\x20git\x20remote\x20add\x20origin\x20','ChildProcessUtils','commit\x20message\x20\x22%s\x22','../../shared/utils','\x20&&\x20git\x20commit\x20-m\x20\x22','spawnPromise','.temp','getGitShellAuthorizationString','1448htEWnD','\x20&&\x20git\x20status','cwd','4915493sAWlAl','../../../core','\x20--single-branch\x20','__esModule','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','join','../providers/branches/dto/branch.dto','\x20&&\x20git\x20checkout\x20--orphan\x20','test','status','10MxLyfF','filter','@flosum/utils','\x20&&\x20git\x20add\x20','cd\x20','commit','checkout\x20to\x20%s','DEFAULT_GIT_USER_NAME','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','INITIAL_COMMIT','clone','log','git\x20clone\x20-b\x20','_repoPath','describe\x20commit\x20%s','makeDir','extractMessageFromCommitDescribe','default','createEmptyBranch','defineProperty','apply','21ynsJPW','7548uLLGqh','DEFAULT_GIT_USER_EMAIL','3962556MgshUT','87VpGaHP','logger','5083960FNaZEU','getRemoteHash','(((.+)+)+)+$','://','\x20&&\x20git\x20rev-parse\x20HEAD','\x20&&\x20git\x20init','name','Git','map','replace','search','gitUrl','then','push\x20changes\x20to\x20%s','__importDefault','checkout','clone\x20repository\x20branch\x20%s\x20to\x20%s','baseDir','\x20--refs','8146728vvIpPs','toString','1899qqKfuh','extractChangesFromCommitDescribe','\x20&&\x20git\x20checkout\x20','describeCommit','add','git\x20ls-remote\x20','DEFAULT_CLONE_PATH','8586920SWnKPG','./fs.internal','removeDir','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]'];a126_0x5220=function(){return _0x3f4b66;};return a126_0x5220();}const constants_1=require('../../../constants'),core_1=require(a126_0x21c15d(0x1d3)),path_1=__importDefault(require('path')),branch_dto_1=require(a126_0x21c15d(0x1d8)),utils_1=require(a126_0x21c15d(0x1ca)),fs_internal_1=require(a126_0x21c15d(0x1c2)),internal_utils_1=require('./internal.utils'),utils_2=require(a126_0x21c15d(0x1de));class Git{constructor(_0xc69ee3){const _0x3ccaaf=a126_0x21c15d;this[_0x3ccaaf(0x1e9)]=_0xc69ee3;}get[a126_0x21c15d(0x1b6)](){const _0x32a568=a126_0x21c15d;return this[_0x32a568(0x1e9)];}async['setCredentials'](_0x5d6594,_0x262074){const _0x314171=a126_0x21c15d;await utils_2[_0x314171(0x1c8)][_0x314171(0x1cc)](_0x314171(0x1e0)+this[_0x314171(0x1e9)]+'\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22'+_0x5d6594+_0x314171(0x1e4)+_0x262074+'\x22','');}async[a126_0x21c15d(0x1be)](..._0x30bf21){const _0x41b474=a126_0x21c15d;await utils_2[_0x41b474(0x1c8)][_0x41b474(0x1cc)](_0x41b474(0x1e0)+this[_0x41b474(0x1e9)]+_0x41b474(0x1df)+_0x30bf21[_0x41b474(0x1d7)]('\x20'),'');}async[a126_0x21c15d(0x1db)](){const _0x5ec0df=a126_0x21c15d;return utils_2[_0x5ec0df(0x1c8)][_0x5ec0df(0x1cc)](_0x5ec0df(0x1e0)+this['_repoPath']+_0x5ec0df(0x1d0),'');}async[a126_0x21c15d(0x1e1)](_0x123af9){const _0x45aef0=a126_0x21c15d;Git[_0x45aef0(0x1a4)]['log'](_0x45aef0(0x1c9),_0x123af9),await utils_2[_0x45aef0(0x1c8)]['spawnPromise'](_0x45aef0(0x1e0)+this[_0x45aef0(0x1e9)]+_0x45aef0(0x1cb)+_0x123af9+'\x22','');}async['push'](_0x59a101){const _0x1d986d=a126_0x21c15d;Git[_0x1d986d(0x1a4)][_0x1d986d(0x1e7)](_0x1d986d(0x1b2),_0x59a101),await utils_2[_0x1d986d(0x1c8)][_0x1d986d(0x1cc)](_0x1d986d(0x1e0)+this['_repoPath']+'\x20&&\x20git\x20push\x20origin\x20'+_0x59a101+'\x20--quiet','');}async[a126_0x21c15d(0x1b4)](_0x9b625c){const _0xe4d3b4=a126_0x21c15d;Git['logger'][_0xe4d3b4(0x1e7)](_0xe4d3b4(0x1e2),_0x9b625c),await utils_2['ChildProcessUtils']['spawnPromise'](_0xe4d3b4(0x1e0)+this['_repoPath']+_0xe4d3b4(0x1bc)+_0x9b625c,'');}async['getCurrentHash'](){const _0x39ca71=a126_0x21c15d,_0x2ece08=await utils_2[_0x39ca71(0x1c8)][_0x39ca71(0x1cc)](_0x39ca71(0x1e0)+this['_repoPath']+_0x39ca71(0x1a9),'');return _0x2ece08[_0x39ca71(0x1ae)]('\x0a','');}async[a126_0x21c15d(0x1bd)](_0x4e75ef){const _0x7399b8=a126_0x21c15d;Git[_0x7399b8(0x1a4)]['log'](_0x7399b8(0x198),_0x4e75ef);const _0x1315ed=await utils_2['ChildProcessUtils'][_0x7399b8(0x1cc)](_0x7399b8(0x1e0)+this['_repoPath']+'\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20'+_0x4e75ef,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x1315ed),'email':(0x0,internal_utils_1['extractEmailFromCommitDescribe'])(_0x1315ed),'message':(0x0,internal_utils_1[_0x7399b8(0x19a)])(_0x1315ed),'changes':(0x0,internal_utils_1[_0x7399b8(0x1bb)])(_0x1315ed)};}static async[a126_0x21c15d(0x1a6)](_0x353557,_0x3248f0){const _0x457f8d=a126_0x21c15d,[_0xeef4bf]=await utils_2['ChildProcessUtils'][_0x457f8d(0x1cc)](_0x457f8d(0x1bf)+_0x353557+'\x20'+_0x3248f0+_0x457f8d(0x1b7),'')[_0x457f8d(0x1b1)](_0x3e490c=>_0x3e490c[_0x457f8d(0x1ae)](/\s/g,'\x20')['split']('\x20'));return _0xeef4bf;}static async[a126_0x21c15d(0x1e6)](_0x5b96f0,_0x4cb822,_0x1795d8){const _0x3fbf64=a126_0x21c15d,_0x824478=path_1['default'][_0x3fbf64(0x1d7)](this['DEFAULT_CLONE_PATH'],_0x4cb822),_0x591297=new Git(_0x824478);return Git[_0x3fbf64(0x1a4)][_0x3fbf64(0x1e7)](_0x3fbf64(0x1b5),_0x1795d8,_0x824478),await fs_internal_1['FS'][_0x3fbf64(0x1c3)](_0x824478),await utils_2[_0x3fbf64(0x1c8)][_0x3fbf64(0x1cc)](_0x3fbf64(0x1e8)+_0x1795d8+_0x3fbf64(0x1d4)+_0x5b96f0+'\x20'+_0x824478,''),_0x591297;}static async['getRepositoryBranches'](_0x547dd9,_0x31b119){const _0x28df99=a126_0x21c15d,_0x2b2707=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x3f2142=_0x547dd9['gitUrl']['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x547dd9[_0x28df99(0x1b0)])+_0x28df99(0x1a8)+_0x31b119[_0x28df99(0x1ce)]()+'@'),_0x9cdc0e=await utils_2[_0x28df99(0x1c8)][_0x28df99(0x1cc)]('git\x20ls-remote\x20'+_0x3f2142,'');return _0x9cdc0e['split']('\x0a')[_0x28df99(0x1dd)](_0x12ce12=>_0x2b2707[_0x28df99(0x1da)](_0x12ce12))[_0x28df99(0x1ad)](_0x3a2fde=>{const _0x43afd0=_0x28df99,[,_0x441569,_0x486206]=_0x3a2fde['match'](_0x2b2707),_0x262409=new branch_dto_1['BranchDto']();return _0x262409['sha']=_0x441569,_0x262409[_0x43afd0(0x1ab)]=_0x486206[_0x43afd0(0x1ae)]('refs/heads/',''),_0x262409;});}static async[a126_0x21c15d(0x19c)](_0x2c28a5,_0x36c5ca,_0x458187,_0x4c54fc){const _0x510b0f=a126_0x21c15d,_0x1c3447=_0x2c28a5[_0x510b0f(0x1b0)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x2c28a5[_0x510b0f(0x1b0)])+'://'+_0x4c54fc[_0x510b0f(0x1ce)]()+'@'),_0xd6ea5=path_1[_0x510b0f(0x19b)][_0x510b0f(0x1d7)](this[_0x510b0f(0x1c0)],_0x2c28a5[_0x510b0f(0x1ab)]);Git[_0x510b0f(0x1a4)]['log'](_0x510b0f(0x1c4),_0x2c28a5['name'],_0x36c5ca,_0xd6ea5),await fs_internal_1['FS']['removeDir'](_0xd6ea5),await fs_internal_1['FS'][_0x510b0f(0x199)](_0xd6ea5);const _0x13ec8f=new Git(_0xd6ea5);await utils_2['ChildProcessUtils'][_0x510b0f(0x1cc)](_0x510b0f(0x1e0)+_0x13ec8f['baseDir']+_0x510b0f(0x1aa),''),await utils_2[_0x510b0f(0x1c8)][_0x510b0f(0x1cc)](_0x510b0f(0x1e0)+_0x13ec8f[_0x510b0f(0x1b6)]+_0x510b0f(0x1c7)+_0x1c3447,''),await _0x13ec8f[_0x510b0f(0x1c5)](constants_1[_0x510b0f(0x1e3)],constants_1[_0x510b0f(0x1a1)]),await utils_2[_0x510b0f(0x1c8)][_0x510b0f(0x1cc)]('cd\x20'+_0x13ec8f[_0x510b0f(0x1b6)]+_0x510b0f(0x1d9)+_0x36c5ca,''),await utils_2['ChildProcessUtils'][_0x510b0f(0x1cc)](_0x510b0f(0x1e0)+_0x13ec8f[_0x510b0f(0x1b6)]+_0x510b0f(0x1cb)+(_0x458187||constants_1[_0x510b0f(0x1e5)])+_0x510b0f(0x1c6),''),await _0x13ec8f['push'](_0x36c5ca),Git[_0x510b0f(0x1a4)][_0x510b0f(0x1e7)](_0x510b0f(0x1d6)),await fs_internal_1['FS']['removeDir'](_0x13ec8f['baseDir']);}}exports[a126_0x21c15d(0x1ac)]=Git,Git[a126_0x21c15d(0x1c0)]=path_1[a126_0x21c15d(0x19b)][a126_0x21c15d(0x1d7)](process[a126_0x21c15d(0x1d1)](),a126_0x21c15d(0x1cd),'git'),Git[a126_0x21c15d(0x1a4)]=new core_1['Logger'](Git[a126_0x21c15d(0x1ab)]);