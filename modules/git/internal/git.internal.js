const a126_0x3f1b4d=a126_0x1b24;(function(_0x1cf6b7,_0x400f51){const _0x30b11f=a126_0x1b24,_0x4a79a3=_0x1cf6b7();while(!![]){try{const _0x18b503=-parseInt(_0x30b11f(0x20a))/0x1*(parseInt(_0x30b11f(0x1e2))/0x2)+-parseInt(_0x30b11f(0x1d0))/0x3*(-parseInt(_0x30b11f(0x1f2))/0x4)+parseInt(_0x30b11f(0x205))/0x5*(-parseInt(_0x30b11f(0x1d6))/0x6)+parseInt(_0x30b11f(0x1d7))/0x7+parseInt(_0x30b11f(0x1cd))/0x8+-parseInt(_0x30b11f(0x1fa))/0x9*(parseInt(_0x30b11f(0x1f4))/0xa)+parseInt(_0x30b11f(0x1ff))/0xb*(parseInt(_0x30b11f(0x1fd))/0xc);if(_0x18b503===_0x400f51)break;else _0x4a79a3['push'](_0x4a79a3['shift']());}catch(_0x571bcd){_0x4a79a3['push'](_0x4a79a3['shift']());}}}(a126_0x5553,0x642a5));const a126_0x3d79cf=(function(){let _0x2b0ac4=!![];return function(_0x1dfc40,_0x973dea){const _0x1ce805=_0x2b0ac4?function(){const _0x1536a6=a126_0x1b24;if(_0x973dea){const _0x32612d=_0x973dea[_0x1536a6(0x1ca)](_0x1dfc40,arguments);return _0x973dea=null,_0x32612d;}}:function(){};return _0x2b0ac4=![],_0x1ce805;};}()),a126_0xd01c55=a126_0x3d79cf(this,function(){const _0x5c2e44=a126_0x1b24;return a126_0xd01c55['toString']()['search']('(((.+)+)+)+$')['toString']()[_0x5c2e44(0x1fc)](a126_0xd01c55)[_0x5c2e44(0x1e9)]('(((.+)+)+)+$');});a126_0xd01c55();'use strict';function a126_0x1b24(_0x3e17b5,_0x497147){const _0x2ae55b=a126_0x5553();return a126_0x1b24=function(_0xd01c55,_0x3d79cf){_0xd01c55=_0xd01c55-0x1c0;let _0x5553b9=_0x2ae55b[_0xd01c55];return _0x5553b9;},a126_0x1b24(_0x3e17b5,_0x497147);}var __importDefault=this&&this[a126_0x3f1b4d(0x1f3)]||function(_0x361b47){return _0x361b47&&_0x361b47['__esModule']?_0x361b47:{'default':_0x361b47};};Object[a126_0x3f1b4d(0x1de)](exports,'__esModule',{'value':!![]}),exports[a126_0x3f1b4d(0x1e6)]=void 0x0;function a126_0x5553(){const _0x407da8=['getProtocol','BranchDto','cd\x20','2zkNpIP','ChildProcessUtils','default','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','git\x20ls-remote\x20','getCurrentHash','setCredentials','name','\x20&&\x20git\x20remote\x20add\x20origin\x20','match','DEFAULT_CLONE_PATH','cwd','\x20&&\x20git\x20checkout\x20','DEFAULT_GIT_USER_NAME','DEFAULT_GIT_USER_EMAIL','@flosum/utils','describeCommit','apply','push\x20changes\x20to\x20%s','split','1420456FqesBJ','add','../../../core','48qgnmyZ','refs/heads/','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','checkout','map','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','856386QJtrjo','645190bhIaYu','then','extractMessageFromCommitDescribe','_repoPath','.temp','gitUrl','getRemoteHash','defineProperty','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','makeDir','createEmptyBranch','501624mqbMjM','\x20--refs','\x20--single-branch\x20','spawnPromise','Git','logger','sha','search','extractEmailFromCommitDescribe','baseDir','./fs.internal','./internal.utils','extractChangesFromCommitDescribe','removeDir','join','getGitShellAuthorizationString','66280KqGanw','__importDefault','260070AeWTql','commit\x20message\x20\x22%s\x22','log','clone\x20repository\x20branch\x20%s\x20to\x20%s','://','\x20&&\x20git\x20add\x20','63glsSKK','\x20&&\x20git\x20rev-parse\x20HEAD','constructor','12GhYyvi','checkout\x20to\x20%s','7720174mWHoqt','\x20&&\x20git\x20status','replace','push','\x20&&\x20git\x20commit\x20-m\x20\x22','\x20&&\x20git\x20init','5SOntuE','test'];a126_0x5553=function(){return _0x407da8;};return a126_0x5553();}const constants_1=require('../../../constants'),core_1=require(a126_0x3f1b4d(0x1cf)),path_1=__importDefault(require('path')),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require('../../shared/utils'),fs_internal_1=require(a126_0x3f1b4d(0x1ec)),internal_utils_1=require(a126_0x3f1b4d(0x1ed)),utils_2=require(a126_0x3f1b4d(0x1c8));class Git{constructor(_0x1ad5fe){const _0x1f52b9=a126_0x3f1b4d;this[_0x1f52b9(0x1da)]=_0x1ad5fe;}get[a126_0x3f1b4d(0x1eb)](){return this['_repoPath'];}async['setCredentials'](_0x4fee01,_0x4cb42b){const _0xedc573=a126_0x3f1b4d;await utils_2[_0xedc573(0x20b)][_0xedc573(0x1e5)](_0xedc573(0x209)+this[_0xedc573(0x1da)]+_0xedc573(0x20d)+_0x4fee01+_0xedc573(0x20e)+_0x4cb42b+'\x22','');}async[a126_0x3f1b4d(0x1ce)](..._0x2c35fd){const _0x1791ae=a126_0x3f1b4d;await utils_2['ChildProcessUtils'][_0x1791ae(0x1e5)](_0x1791ae(0x209)+this[_0x1791ae(0x1da)]+_0x1791ae(0x1f9)+_0x2c35fd[_0x1791ae(0x1f0)]('\x20'),'');}async['status'](){const _0x253d05=a126_0x3f1b4d;return utils_2[_0x253d05(0x20b)][_0x253d05(0x1e5)]('cd\x20'+this[_0x253d05(0x1da)]+_0x253d05(0x200),'');}async['commit'](_0x30b3d0){const _0x281819=a126_0x3f1b4d;Git[_0x281819(0x1e7)][_0x281819(0x1f6)](_0x281819(0x1f5),_0x30b3d0),await utils_2[_0x281819(0x20b)][_0x281819(0x1e5)](_0x281819(0x209)+this['_repoPath']+_0x281819(0x203)+_0x30b3d0+'\x22','');}async[a126_0x3f1b4d(0x202)](_0x37a0a2){const _0x55c2a4=a126_0x3f1b4d;Git[_0x55c2a4(0x1e7)][_0x55c2a4(0x1f6)](_0x55c2a4(0x1cb),_0x37a0a2),await utils_2['ChildProcessUtils'][_0x55c2a4(0x1e5)](_0x55c2a4(0x209)+this['_repoPath']+'\x20&&\x20git\x20push\x20origin\x20'+_0x37a0a2+'\x20--quiet','');}async[a126_0x3f1b4d(0x1d3)](_0x1d32d7){const _0x2f5d2c=a126_0x3f1b4d;Git[_0x2f5d2c(0x1e7)][_0x2f5d2c(0x1f6)](_0x2f5d2c(0x1fe),_0x1d32d7),await utils_2[_0x2f5d2c(0x20b)][_0x2f5d2c(0x1e5)](_0x2f5d2c(0x209)+this[_0x2f5d2c(0x1da)]+_0x2f5d2c(0x1c5)+_0x1d32d7,'');}async[a126_0x3f1b4d(0x210)](){const _0x3534ac=a126_0x3f1b4d,_0x32d403=await utils_2[_0x3534ac(0x20b)]['spawnPromise'](_0x3534ac(0x209)+this['_repoPath']+_0x3534ac(0x1fb),'');return _0x32d403['replace']('\x0a','');}async[a126_0x3f1b4d(0x1c9)](_0x35e6ee){const _0x39392b=a126_0x3f1b4d;Git[_0x39392b(0x1e7)][_0x39392b(0x1f6)]('describe\x20commit\x20%s',_0x35e6ee);const _0x725deb=await utils_2['ChildProcessUtils'][_0x39392b(0x1e5)](_0x39392b(0x209)+this[_0x39392b(0x1da)]+_0x39392b(0x1d5)+_0x35e6ee,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x725deb),'email':(0x0,internal_utils_1[_0x39392b(0x1ea)])(_0x725deb),'message':(0x0,internal_utils_1[_0x39392b(0x1d9)])(_0x725deb),'changes':(0x0,internal_utils_1[_0x39392b(0x1ee)])(_0x725deb)};}static async[a126_0x3f1b4d(0x1dd)](_0x4413fb,_0x117fad){const _0x5e774c=a126_0x3f1b4d,[_0x240268]=await utils_2[_0x5e774c(0x20b)][_0x5e774c(0x1e5)](_0x5e774c(0x20f)+_0x4413fb+'\x20'+_0x117fad+_0x5e774c(0x1e3),'')[_0x5e774c(0x1d8)](_0x2ef9bb=>_0x2ef9bb[_0x5e774c(0x201)](/\s/g,'\x20')[_0x5e774c(0x1cc)]('\x20'));return _0x240268;}static async['clone'](_0x558291,_0x4cf9ed,_0x2e2afc){const _0x3e27ef=a126_0x3f1b4d,_0x2da3e6=path_1[_0x3e27ef(0x20c)]['join'](this[_0x3e27ef(0x1c3)],_0x4cf9ed),_0x42ec29=new Git(_0x2da3e6);return Git[_0x3e27ef(0x1e7)][_0x3e27ef(0x1f6)](_0x3e27ef(0x1f7),_0x2e2afc,_0x2da3e6),await fs_internal_1['FS']['removeDir'](_0x2da3e6),await utils_2[_0x3e27ef(0x20b)]['spawnPromise']('git\x20clone\x20-b\x20'+_0x2e2afc+_0x3e27ef(0x1e4)+_0x558291+'\x20'+_0x2da3e6,''),_0x42ec29;}static async['getRepositoryBranches'](_0x183d8a,_0x511d6a){const _0x42a12a=a126_0x3f1b4d,_0xea6aaf=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x5d7bdf=_0x183d8a[_0x42a12a(0x1dc)][_0x42a12a(0x201)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x42a12a(0x207)])(_0x183d8a[_0x42a12a(0x1dc)])+_0x42a12a(0x1f8)+_0x511d6a[_0x42a12a(0x1f1)]()+'@'),_0x3f3d97=await utils_2[_0x42a12a(0x20b)][_0x42a12a(0x1e5)](_0x42a12a(0x20f)+_0x5d7bdf,'');return _0x3f3d97[_0x42a12a(0x1cc)]('\x0a')['filter'](_0x37b2e4=>_0xea6aaf[_0x42a12a(0x206)](_0x37b2e4))[_0x42a12a(0x1d4)](_0x4bcd0d=>{const _0x39f51f=_0x42a12a,[,_0x826ba3,_0x5afac9]=_0x4bcd0d[_0x39f51f(0x1c2)](_0xea6aaf),_0x32399c=new branch_dto_1[(_0x39f51f(0x208))]();return _0x32399c[_0x39f51f(0x1e8)]=_0x826ba3,_0x32399c['name']=_0x5afac9[_0x39f51f(0x201)](_0x39f51f(0x1d1),''),_0x32399c;});}static async[a126_0x3f1b4d(0x1e1)](_0x3eb42b,_0x1eb327,_0x57e776,_0x48a889){const _0x36153c=a126_0x3f1b4d,_0x5a75ff=_0x3eb42b[_0x36153c(0x1dc)][_0x36153c(0x201)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x3eb42b['gitUrl'])+'://'+_0x48a889[_0x36153c(0x1f1)]()+'@'),_0x199d86=path_1[_0x36153c(0x20c)]['join'](this['DEFAULT_CLONE_PATH'],_0x3eb42b['name']);Git[_0x36153c(0x1e7)][_0x36153c(0x1f6)](_0x36153c(0x1d2),_0x3eb42b[_0x36153c(0x1c0)],_0x1eb327,_0x199d86),await fs_internal_1['FS'][_0x36153c(0x1ef)](_0x199d86),await fs_internal_1['FS'][_0x36153c(0x1e0)](_0x199d86);const _0x33fa33=new Git(_0x199d86);await utils_2[_0x36153c(0x20b)][_0x36153c(0x1e5)](_0x36153c(0x209)+_0x33fa33[_0x36153c(0x1eb)]+_0x36153c(0x204),''),await utils_2[_0x36153c(0x20b)]['spawnPromise'](_0x36153c(0x209)+_0x33fa33[_0x36153c(0x1eb)]+_0x36153c(0x1c1)+_0x5a75ff,''),await _0x33fa33[_0x36153c(0x211)](constants_1[_0x36153c(0x1c6)],constants_1[_0x36153c(0x1c7)]),await utils_2[_0x36153c(0x20b)][_0x36153c(0x1e5)](_0x36153c(0x209)+_0x33fa33[_0x36153c(0x1eb)]+'\x20&&\x20git\x20checkout\x20--orphan\x20'+_0x1eb327,''),await utils_2['ChildProcessUtils'][_0x36153c(0x1e5)](_0x36153c(0x209)+_0x33fa33['baseDir']+_0x36153c(0x203)+(_0x57e776||constants_1['INITIAL_COMMIT'])+'\x22\x20--allow-empty',''),await _0x33fa33[_0x36153c(0x202)](_0x1eb327),Git[_0x36153c(0x1e7)][_0x36153c(0x1f6)](_0x36153c(0x1df)),await fs_internal_1['FS'][_0x36153c(0x1ef)](_0x33fa33[_0x36153c(0x1eb)]);}}exports[a126_0x3f1b4d(0x1e6)]=Git,Git[a126_0x3f1b4d(0x1c3)]=path_1[a126_0x3f1b4d(0x20c)][a126_0x3f1b4d(0x1f0)](process[a126_0x3f1b4d(0x1c4)](),a126_0x3f1b4d(0x1db),'git'),Git[a126_0x3f1b4d(0x1e7)]=new core_1['Logger'](Git['name']);