const a145_0x45d2df=a145_0xb21e;(function(_0x191832,_0xc73453){const _0x3a03c4=a145_0xb21e,_0x31e187=_0x191832();while(!![]){try{const _0x1a9ed2=parseInt(_0x3a03c4(0x1b0))/0x1+parseInt(_0x3a03c4(0x19e))/0x2+parseInt(_0x3a03c4(0x1af))/0x3+-parseInt(_0x3a03c4(0x1bf))/0x4+-parseInt(_0x3a03c4(0x1b6))/0x5*(-parseInt(_0x3a03c4(0x1bb))/0x6)+parseInt(_0x3a03c4(0x19d))/0x7+-parseInt(_0x3a03c4(0x18c))/0x8;if(_0x1a9ed2===_0xc73453)break;else _0x31e187['push'](_0x31e187['shift']());}catch(_0x5cbc8a){_0x31e187['push'](_0x31e187['shift']());}}}(a145_0x1a36,0x2568f));const a145_0x3fdfb2=(function(){let _0x551878=!![];return function(_0x29ce6f,_0x374029){const _0x511e3c=_0x551878?function(){const _0x2f1e89=a145_0xb21e;if(_0x374029){const _0x18f9c0=_0x374029[_0x2f1e89(0x1aa)](_0x29ce6f,arguments);return _0x374029=null,_0x18f9c0;}}:function(){};return _0x551878=![],_0x511e3c;};}()),a145_0x133da3=a145_0x3fdfb2(this,function(){const _0x2f6a5a=a145_0xb21e;return a145_0x133da3[_0x2f6a5a(0x1cc)]()[_0x2f6a5a(0x1ad)](_0x2f6a5a(0x1c3))[_0x2f6a5a(0x1cc)]()[_0x2f6a5a(0x193)](a145_0x133da3)[_0x2f6a5a(0x1ad)](_0x2f6a5a(0x1c3));});function a145_0x1a36(){const _0x1554b1=['3984zNCTJV','Describe\x20commit\x20%s','Checkout\x20to\x20%s','\x20&&\x20git\x20init','610680WhLKqN','../providers/branches/dto/branch.dto','default','cwd','(((.+)+)+)+$','git','extractAuthorFromCommitDescribe','ChildProcessUtils','INITIAL_COMMIT','push','BranchDto','Git','getCurrentHash','toString','DEFAULT_CLONE_PATH','\x20&&\x20git\x20push\x20origin\x20','\x20&&\x20git\x20commit\x20-m\x20\x22','\x20&&\x20git\x20status','gitUrl','replace','log','Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','extractChangesFromCommitDescribe','\x20--refs','makeDir','join','cd\x20','filter','getRemoteHash','commit','4765168LDXmvH','logger','\x20&&\x20git\x20add\x20','setCredentials','Push\x20changes\x20to\x20%s','status','path','constructor','baseDir','\x20&&\x20git\x20checkout\x20','extractMessageFromCommitDescribe','split','git\x20ls-remote\x20','_repoPath','../../../constants','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','://','275975DIujwr','357474vgecSd','test','../../../core','clone','getGitShellAuthorizationString','match','./internal.utils','Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','.temp','__esModule','DEFAULT_GIT_USER_EMAIL','apply','../../shared/utils','map','search','createEmptyBranch','705921HcYZaE','253526wIsggj','\x20--single-branch\x20','describeCommit','Commit\x20message\x20\x22%s\x22','getProtocol','name','1465VuucuX','add','spawnPromise','Clone\x20repository\x20branch\x20%s\x20to\x20%s','removeDir'];a145_0x1a36=function(){return _0x1554b1;};return a145_0x1a36();}a145_0x133da3();'use strict';function a145_0xb21e(_0x12c006,_0x4bc7a0){const _0x1bda53=a145_0x1a36();return a145_0xb21e=function(_0x133da3,_0x3fdfb2){_0x133da3=_0x133da3-0x18b;let _0x1a3624=_0x1bda53[_0x133da3];return _0x1a3624;},a145_0xb21e(_0x12c006,_0x4bc7a0);}var __importDefault=this&&this['__importDefault']||function(_0x20fefe){const _0x452942=a145_0xb21e;return _0x20fefe&&_0x20fefe[_0x452942(0x1a8)]?_0x20fefe:{'default':_0x20fefe};};Object['defineProperty'](exports,a145_0x45d2df(0x1a8),{'value':!![]}),exports['Git']=void 0x0;const constants_1=require(a145_0x45d2df(0x19a)),core_1=require(a145_0x45d2df(0x1a0)),path_1=__importDefault(require(a145_0x45d2df(0x192))),branch_dto_1=require(a145_0x45d2df(0x1c0)),utils_1=require(a145_0x45d2df(0x1ab)),fs_internal_1=require('./fs.internal'),internal_utils_1=require(a145_0x45d2df(0x1a4)),utils_2=require('@flosum/utils');class Git{constructor(_0x4c8efe){const _0x43d1c6=a145_0x45d2df;this[_0x43d1c6(0x199)]=_0x4c8efe;}get['baseDir'](){return this['_repoPath'];}async['setCredentials'](_0x14bf72,_0x20d53d){const _0x3089b4=a145_0x45d2df;await utils_2[_0x3089b4(0x1c6)][_0x3089b4(0x1b8)](_0x3089b4(0x1d9)+this[_0x3089b4(0x199)]+'\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22'+_0x14bf72+_0x3089b4(0x1a6)+_0x20d53d+'\x22','');}async[a145_0x45d2df(0x1b7)](..._0x3b6ff0){const _0x27893b=a145_0x45d2df;await utils_2[_0x27893b(0x1c6)][_0x27893b(0x1b8)](_0x27893b(0x1d9)+this[_0x27893b(0x199)]+_0x27893b(0x18e)+_0x3b6ff0[_0x27893b(0x1d8)]('\x20'),'');}async[a145_0x45d2df(0x191)](){const _0x33d311=a145_0x45d2df;return utils_2['ChildProcessUtils']['spawnPromise'](_0x33d311(0x1d9)+this['_repoPath']+_0x33d311(0x1d0),'');}async[a145_0x45d2df(0x18b)](_0x1ee928){const _0x12cd4c=a145_0x45d2df;Git[_0x12cd4c(0x18d)][_0x12cd4c(0x1d3)](_0x12cd4c(0x1b3),_0x1ee928),await utils_2['ChildProcessUtils'][_0x12cd4c(0x1b8)](_0x12cd4c(0x1d9)+this['_repoPath']+_0x12cd4c(0x1cf)+_0x1ee928+'\x22','');}async[a145_0x45d2df(0x1c8)](_0x182320){const _0x372257=a145_0x45d2df;Git[_0x372257(0x18d)][_0x372257(0x1d3)](_0x372257(0x190),_0x182320),await utils_2[_0x372257(0x1c6)][_0x372257(0x1b8)](_0x372257(0x1d9)+this[_0x372257(0x199)]+_0x372257(0x1ce)+_0x182320+'\x20--quiet','');}async['checkout'](_0x1bc17a){const _0x4d6aa2=a145_0x45d2df;Git[_0x4d6aa2(0x18d)][_0x4d6aa2(0x1d3)](_0x4d6aa2(0x1bd),_0x1bc17a),await utils_2[_0x4d6aa2(0x1c6)][_0x4d6aa2(0x1b8)](_0x4d6aa2(0x1d9)+this[_0x4d6aa2(0x199)]+_0x4d6aa2(0x195)+_0x1bc17a,'');}async[a145_0x45d2df(0x1cb)](){const _0x26168f=a145_0x45d2df,_0x224975=await utils_2['ChildProcessUtils']['spawnPromise'](_0x26168f(0x1d9)+this[_0x26168f(0x199)]+'\x20&&\x20git\x20rev-parse\x20HEAD','');return _0x224975[_0x26168f(0x1d2)]('\x0a','');}async[a145_0x45d2df(0x1b2)](_0x4358a4){const _0x58c4a7=a145_0x45d2df;Git[_0x58c4a7(0x18d)][_0x58c4a7(0x1d3)](_0x58c4a7(0x1bc),_0x4358a4);const _0x1c6be8=await utils_2[_0x58c4a7(0x1c6)][_0x58c4a7(0x1b8)](_0x58c4a7(0x1d9)+this['_repoPath']+_0x58c4a7(0x19b)+_0x4358a4,'');return{'author':(0x0,internal_utils_1[_0x58c4a7(0x1c5)])(_0x1c6be8),'email':(0x0,internal_utils_1['extractEmailFromCommitDescribe'])(_0x1c6be8),'message':(0x0,internal_utils_1[_0x58c4a7(0x196)])(_0x1c6be8),'changes':(0x0,internal_utils_1[_0x58c4a7(0x1d5)])(_0x1c6be8)};}static async[a145_0x45d2df(0x1db)](_0xb9e721,_0x20b1ac){const _0x272b83=a145_0x45d2df,[_0xf71e81]=await utils_2[_0x272b83(0x1c6)][_0x272b83(0x1b8)](_0x272b83(0x198)+_0xb9e721+'\x20'+_0x20b1ac+_0x272b83(0x1d6),'')['then'](_0x1f2010=>_0x1f2010[_0x272b83(0x1d2)](/\s/g,'\x20')[_0x272b83(0x197)]('\x20'));return _0xf71e81;}static async[a145_0x45d2df(0x1a1)](_0x109291,_0x3450e7,_0x6aa7d0){const _0x3f9956=a145_0x45d2df,_0x13b995=path_1[_0x3f9956(0x1c1)][_0x3f9956(0x1d8)](this['DEFAULT_CLONE_PATH'],_0x3450e7),_0x124331=new Git(_0x13b995);return Git[_0x3f9956(0x18d)][_0x3f9956(0x1d3)](_0x3f9956(0x1b9),_0x6aa7d0,_0x13b995),await fs_internal_1['FS'][_0x3f9956(0x1ba)](_0x13b995),await utils_2['ChildProcessUtils'][_0x3f9956(0x1b8)]('git\x20clone\x20-b\x20'+_0x6aa7d0+_0x3f9956(0x1b1)+_0x109291+'\x20'+_0x13b995,''),_0x124331;}static async['getRepositoryBranches'](_0x3ba19f,_0x578ba8){const _0x5d170c=a145_0x45d2df,_0xf2e627=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x12a0d0=_0x3ba19f[_0x5d170c(0x1d1)][_0x5d170c(0x1d2)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x3ba19f[_0x5d170c(0x1d1)])+_0x5d170c(0x19c)+_0x578ba8['getGitShellAuthorizationString']()+'@'),_0x6db8ed=await utils_2['ChildProcessUtils']['spawnPromise'](_0x5d170c(0x198)+_0x12a0d0,'');return _0x6db8ed[_0x5d170c(0x197)]('\x0a')[_0x5d170c(0x1da)](_0xacf049=>_0xf2e627[_0x5d170c(0x19f)](_0xacf049))[_0x5d170c(0x1ac)](_0x5a4d5b=>{const _0x469499=_0x5d170c,[,_0x9f2db6,_0x8e55fa]=_0x5a4d5b[_0x469499(0x1a3)](_0xf2e627),_0x45db86=new branch_dto_1[(_0x469499(0x1c9))]();return _0x45db86['sha']=_0x9f2db6,_0x45db86[_0x469499(0x1b5)]=_0x8e55fa[_0x469499(0x1d2)]('refs/heads/',''),_0x45db86;});}static async[a145_0x45d2df(0x1ae)](_0x32e697,_0xab8047,_0x39ee47,_0x4994a0){const _0x316957=a145_0x45d2df,_0x39434f=_0x32e697['gitUrl'][_0x316957(0x1d2)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x316957(0x1b4)])(_0x32e697[_0x316957(0x1d1)])+_0x316957(0x19c)+_0x4994a0[_0x316957(0x1a2)]()+'@'),_0x4aa167=path_1[_0x316957(0x1c1)][_0x316957(0x1d8)](this['DEFAULT_CLONE_PATH'],_0x32e697['name']);Git['logger'][_0x316957(0x1d3)](_0x316957(0x1a5),_0x32e697['name'],_0xab8047,_0x4aa167),await fs_internal_1['FS']['removeDir'](_0x4aa167),await fs_internal_1['FS'][_0x316957(0x1d7)](_0x4aa167);const _0x22a227=new Git(_0x4aa167);await utils_2['ChildProcessUtils'][_0x316957(0x1b8)](_0x316957(0x1d9)+_0x22a227[_0x316957(0x194)]+_0x316957(0x1be),''),await utils_2[_0x316957(0x1c6)][_0x316957(0x1b8)](_0x316957(0x1d9)+_0x22a227[_0x316957(0x194)]+'\x20&&\x20git\x20remote\x20add\x20origin\x20'+_0x39434f,''),await _0x22a227[_0x316957(0x18f)](constants_1['DEFAULT_GIT_USER_NAME'],constants_1[_0x316957(0x1a9)]),await utils_2[_0x316957(0x1c6)][_0x316957(0x1b8)](_0x316957(0x1d9)+_0x22a227[_0x316957(0x194)]+'\x20&&\x20git\x20checkout\x20--orphan\x20'+_0xab8047,''),await utils_2[_0x316957(0x1c6)][_0x316957(0x1b8)](_0x316957(0x1d9)+_0x22a227[_0x316957(0x194)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+(_0x39ee47||constants_1[_0x316957(0x1c7)])+'\x22\x20--allow-empty',''),await _0x22a227[_0x316957(0x1c8)](_0xab8047),Git[_0x316957(0x18d)]['log'](_0x316957(0x1d4)),await fs_internal_1['FS'][_0x316957(0x1ba)](_0x22a227['baseDir']);}}exports[a145_0x45d2df(0x1ca)]=Git,Git[a145_0x45d2df(0x1cd)]=path_1[a145_0x45d2df(0x1c1)]['join'](process[a145_0x45d2df(0x1c2)](),a145_0x45d2df(0x1a7),a145_0x45d2df(0x1c4)),Git[a145_0x45d2df(0x18d)]=new core_1['Logger'](Git[a145_0x45d2df(0x1b5)]);