const a148_0x451058=a148_0x2b08;(function(_0x49773a,_0x3b818a){const _0x5b4735=a148_0x2b08,_0x278bd5=_0x49773a();while(!![]){try{const _0x4bf5ff=-parseInt(_0x5b4735(0x1c1))/0x1+parseInt(_0x5b4735(0x1ec))/0x2+-parseInt(_0x5b4735(0x1aa))/0x3*(parseInt(_0x5b4735(0x1bf))/0x4)+-parseInt(_0x5b4735(0x1bd))/0x5*(parseInt(_0x5b4735(0x1c5))/0x6)+-parseInt(_0x5b4735(0x1e9))/0x7+parseInt(_0x5b4735(0x1d1))/0x8*(parseInt(_0x5b4735(0x1de))/0x9)+parseInt(_0x5b4735(0x1d0))/0xa;if(_0x4bf5ff===_0x3b818a)break;else _0x278bd5['push'](_0x278bd5['shift']());}catch(_0x2e3d20){_0x278bd5['push'](_0x278bd5['shift']());}}}(a148_0x106b,0xc3b23));const a148_0x21bd03=(function(){let _0x49d17c=!![];return function(_0x426a00,_0x798a58){const _0x329475=_0x49d17c?function(){if(_0x798a58){const _0x1caeea=_0x798a58['apply'](_0x426a00,arguments);return _0x798a58=null,_0x1caeea;}}:function(){};return _0x49d17c=![],_0x329475;};}()),a148_0x353dca=a148_0x21bd03(this,function(){const _0x3c9545=a148_0x2b08;return a148_0x353dca[_0x3c9545(0x1bc)]()[_0x3c9545(0x1cc)](_0x3c9545(0x1b8))[_0x3c9545(0x1bc)]()[_0x3c9545(0x1b6)](a148_0x353dca)[_0x3c9545(0x1cc)](_0x3c9545(0x1b8));});a148_0x353dca();'use strict';var __importDefault=this&&this[a148_0x451058(0x1b9)]||function(_0x8eaa1e){const _0x3e2d65=a148_0x451058;return _0x8eaa1e&&_0x8eaa1e[_0x3e2d65(0x1ea)]?_0x8eaa1e:{'default':_0x8eaa1e};};Object[a148_0x451058(0x1b1)](exports,a148_0x451058(0x1ea),{'value':!![]}),exports[a148_0x451058(0x1f1)]=void 0x0;function a148_0x2b08(_0x3d6185,_0x1ae2fb){const _0x5f05d6=a148_0x106b();return a148_0x2b08=function(_0x353dca,_0x21bd03){_0x353dca=_0x353dca-0x1a4;let _0x106b84=_0x5f05d6[_0x353dca];return _0x106b84;},a148_0x2b08(_0x3d6185,_0x1ae2fb);}const constants_1=require(a148_0x451058(0x1bb)),core_1=require(a148_0x451058(0x1b0)),path_1=__importDefault(require('path')),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require(a148_0x451058(0x1e3)),fs_internal_1=require('./fs.internal'),internal_utils_1=require('./internal.utils'),utils_2=require(a148_0x451058(0x1f4));function a148_0x106b(){const _0x2240c9=['../../shared/utils','Describe\x20commit\x20%s','removeDir','refs/heads/','DEFAULT_GIT_USER_NAME','ChildProcessUtils','7295001XZfezM','__esModule','://','769822PKUEWY','git\x20ls-remote\x20','setCredentials','cd\x20','log','Git','cwd','name','@flosum/utils','BranchDto','checkout','baseDir','push','getRemoteHash','DEFAULT_GIT_USER_EMAIL','Logger','4708467RCsaFd','Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','match','split','\x20&&\x20git\x20add\x20','extractChangesFromCommitDescribe','../../../core','defineProperty','gitUrl','\x20&&\x20git\x20status','default','clone','constructor','\x20--quiet','(((.+)+)+)+$','__importDefault','_repoPath','../../../constants','toString','5xQBHYd','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','4VoPdmE','add','1373713hEWhLD','\x20&&\x20git\x20push\x20origin\x20','getProtocol','\x20--refs','8123358ToeQEQ','extractMessageFromCommitDescribe','\x20&&\x20git\x20remote\x20add\x20origin\x20','INITIAL_COMMIT','makeDir','status','getGitShellAuthorizationString','search','replace','sha','DEFAULT_CLONE_PATH','45615020SjwSiq','11568CtCaua','test','Push\x20changes\x20to\x20%s','extractEmailFromCommitDescribe','createEmptyBranch','then','\x20--single-branch\x20','\x20&&\x20git\x20checkout\x20','map','join','filter','getCurrentHash','spawnPromise','7434eZFOBW','.temp','\x20&&\x20git\x20init','logger','Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]'];a148_0x106b=function(){return _0x2240c9;};return a148_0x106b();}class Git{constructor(_0x11cfa1){const _0xe39d43=a148_0x451058;this[_0xe39d43(0x1ba)]=_0x11cfa1;}get[a148_0x451058(0x1a5)](){const _0x427c8b=a148_0x451058;return this[_0x427c8b(0x1ba)];}async[a148_0x451058(0x1ee)](_0x4e3e72,_0x28e085){const _0x529447=a148_0x451058;await utils_2[_0x529447(0x1e8)][_0x529447(0x1dd)]('cd\x20'+this[_0x529447(0x1ba)]+_0x529447(0x1be)+_0x4e3e72+'\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'+_0x28e085+'\x22','');}async[a148_0x451058(0x1c0)](..._0xbdc900){const _0x4c2473=a148_0x451058;await utils_2[_0x4c2473(0x1e8)][_0x4c2473(0x1dd)](_0x4c2473(0x1ef)+this[_0x4c2473(0x1ba)]+_0x4c2473(0x1ae)+_0xbdc900[_0x4c2473(0x1da)]('\x20'),'');}async[a148_0x451058(0x1ca)](){const _0x273dad=a148_0x451058;return utils_2['ChildProcessUtils'][_0x273dad(0x1dd)](_0x273dad(0x1ef)+this[_0x273dad(0x1ba)]+_0x273dad(0x1b3),'');}async['commit'](_0x470a29){const _0x346f9b=a148_0x451058;Git[_0x346f9b(0x1e1)]['log']('Commit\x20message\x20\x22%s\x22',_0x470a29),await utils_2[_0x346f9b(0x1e8)][_0x346f9b(0x1dd)](_0x346f9b(0x1ef)+this[_0x346f9b(0x1ba)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x470a29+'\x22','');}async[a148_0x451058(0x1a6)](_0x1d8c85){const _0x302b99=a148_0x451058;Git[_0x302b99(0x1e1)][_0x302b99(0x1f0)](_0x302b99(0x1d3),_0x1d8c85),await utils_2['ChildProcessUtils'][_0x302b99(0x1dd)](_0x302b99(0x1ef)+this['_repoPath']+_0x302b99(0x1c2)+_0x1d8c85+_0x302b99(0x1b7),'');}async[a148_0x451058(0x1a4)](_0x24e30a){const _0x29c54c=a148_0x451058;Git[_0x29c54c(0x1e1)]['log']('Checkout\x20to\x20%s',_0x24e30a),await utils_2[_0x29c54c(0x1e8)][_0x29c54c(0x1dd)](_0x29c54c(0x1ef)+this[_0x29c54c(0x1ba)]+_0x29c54c(0x1d8)+_0x24e30a,'');}async[a148_0x451058(0x1dc)](){const _0xc030d5=a148_0x451058,_0x34d938=await utils_2[_0xc030d5(0x1e8)][_0xc030d5(0x1dd)](_0xc030d5(0x1ef)+this[_0xc030d5(0x1ba)]+'\x20&&\x20git\x20rev-parse\x20HEAD','');return _0x34d938[_0xc030d5(0x1cd)]('\x0a','');}async['describeCommit'](_0x4ec993){const _0xbd182f=a148_0x451058;Git['logger'][_0xbd182f(0x1f0)](_0xbd182f(0x1e4),_0x4ec993);const _0x4c229b=await utils_2[_0xbd182f(0x1e8)][_0xbd182f(0x1dd)](_0xbd182f(0x1ef)+this[_0xbd182f(0x1ba)]+'\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20'+_0x4ec993,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x4c229b),'email':(0x0,internal_utils_1[_0xbd182f(0x1d4)])(_0x4c229b),'message':(0x0,internal_utils_1[_0xbd182f(0x1c6)])(_0x4c229b),'changes':(0x0,internal_utils_1[_0xbd182f(0x1af)])(_0x4c229b)};}static async[a148_0x451058(0x1a7)](_0x3b867c,_0x1a4a9f){const _0x2a4ae2=a148_0x451058,[_0x5055b2]=await utils_2['ChildProcessUtils'][_0x2a4ae2(0x1dd)](_0x2a4ae2(0x1ed)+_0x3b867c+'\x20'+_0x1a4a9f+_0x2a4ae2(0x1c4),'')[_0x2a4ae2(0x1d6)](_0x137d3f=>_0x137d3f['replace'](/\s/g,'\x20')[_0x2a4ae2(0x1ad)]('\x20'));return _0x5055b2;}static async[a148_0x451058(0x1b5)](_0x152ed2,_0x1347b5,_0x5f2db1){const _0x35ee84=a148_0x451058,_0xa5b10f=path_1['default'][_0x35ee84(0x1da)](this[_0x35ee84(0x1cf)],_0x1347b5),_0x5b9a5a=new Git(_0xa5b10f);return Git[_0x35ee84(0x1e1)][_0x35ee84(0x1f0)]('Clone\x20repository\x20branch\x20%s\x20to\x20%s',_0x5f2db1,_0xa5b10f),await fs_internal_1['FS'][_0x35ee84(0x1e5)](_0xa5b10f),await utils_2[_0x35ee84(0x1e8)][_0x35ee84(0x1dd)]('git\x20clone\x20-b\x20'+_0x5f2db1+_0x35ee84(0x1d7)+_0x152ed2+'\x20'+_0xa5b10f,''),_0x5b9a5a;}static async['getRepositoryBranches'](_0x19b388,_0x1a2bd9){const _0x5ce691=a148_0x451058,_0x12cd95=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x5ae908=_0x19b388['gitUrl'][_0x5ce691(0x1cd)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x5ce691(0x1c3)])(_0x19b388[_0x5ce691(0x1b2)])+_0x5ce691(0x1eb)+_0x1a2bd9['getGitShellAuthorizationString']()+'@'),_0x3e82f1=await utils_2[_0x5ce691(0x1e8)]['spawnPromise'](_0x5ce691(0x1ed)+_0x5ae908,'');return _0x3e82f1[_0x5ce691(0x1ad)]('\x0a')[_0x5ce691(0x1db)](_0x22fc4e=>_0x12cd95[_0x5ce691(0x1d2)](_0x22fc4e))[_0x5ce691(0x1d9)](_0x58e3e8=>{const _0x639489=_0x5ce691,[,_0x1dde31,_0x5b75b5]=_0x58e3e8[_0x639489(0x1ac)](_0x12cd95),_0x99b903=new branch_dto_1[(_0x639489(0x1f5))]();return _0x99b903[_0x639489(0x1ce)]=_0x1dde31,_0x99b903['name']=_0x5b75b5[_0x639489(0x1cd)](_0x639489(0x1e6),''),_0x99b903;});}static async[a148_0x451058(0x1d5)](_0x12bc67,_0xc3a14d,_0x27dcbb,_0x3f3a0e){const _0x2c7d50=a148_0x451058,_0x45241d=_0x12bc67[_0x2c7d50(0x1b2)][_0x2c7d50(0x1cd)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x2c7d50(0x1c3)])(_0x12bc67[_0x2c7d50(0x1b2)])+_0x2c7d50(0x1eb)+_0x3f3a0e[_0x2c7d50(0x1cb)]()+'@'),_0x488be7=path_1[_0x2c7d50(0x1b4)][_0x2c7d50(0x1da)](this['DEFAULT_CLONE_PATH'],_0x12bc67[_0x2c7d50(0x1f3)]);Git[_0x2c7d50(0x1e1)][_0x2c7d50(0x1f0)](_0x2c7d50(0x1e2),_0x12bc67[_0x2c7d50(0x1f3)],_0xc3a14d,_0x488be7),await fs_internal_1['FS']['removeDir'](_0x488be7),await fs_internal_1['FS'][_0x2c7d50(0x1c9)](_0x488be7);const _0x531180=new Git(_0x488be7);await utils_2['ChildProcessUtils'][_0x2c7d50(0x1dd)](_0x2c7d50(0x1ef)+_0x531180[_0x2c7d50(0x1a5)]+_0x2c7d50(0x1e0),''),await utils_2['ChildProcessUtils'][_0x2c7d50(0x1dd)](_0x2c7d50(0x1ef)+_0x531180[_0x2c7d50(0x1a5)]+_0x2c7d50(0x1c7)+_0x45241d,''),await _0x531180[_0x2c7d50(0x1ee)](constants_1[_0x2c7d50(0x1e7)],constants_1[_0x2c7d50(0x1a8)]),await utils_2['ChildProcessUtils'][_0x2c7d50(0x1dd)](_0x2c7d50(0x1ef)+_0x531180[_0x2c7d50(0x1a5)]+'\x20&&\x20git\x20checkout\x20--orphan\x20'+_0xc3a14d,''),await utils_2[_0x2c7d50(0x1e8)][_0x2c7d50(0x1dd)](_0x2c7d50(0x1ef)+_0x531180[_0x2c7d50(0x1a5)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+(_0x27dcbb||constants_1[_0x2c7d50(0x1c8)])+'\x22\x20--allow-empty',''),await _0x531180[_0x2c7d50(0x1a6)](_0xc3a14d),Git[_0x2c7d50(0x1e1)][_0x2c7d50(0x1f0)](_0x2c7d50(0x1ab)),await fs_internal_1['FS'][_0x2c7d50(0x1e5)](_0x531180[_0x2c7d50(0x1a5)]);}}exports[a148_0x451058(0x1f1)]=Git,Git['DEFAULT_CLONE_PATH']=path_1[a148_0x451058(0x1b4)][a148_0x451058(0x1da)](process[a148_0x451058(0x1f2)](),a148_0x451058(0x1df),'git'),Git[a148_0x451058(0x1e1)]=new core_1[(a148_0x451058(0x1a9))](Git[a148_0x451058(0x1f3)]);