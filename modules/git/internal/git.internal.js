const a148_0x3edd6e=a148_0x18f6;function a148_0x46af(){const _0x320f5c=['(((.+)+)+)+$','../../../constants','apply','replace','7239265nzIJxg','38SfTRFc','ChildProcessUtils','Git','match','makeDir','cd\x20','Checkout\x20to\x20%s','38520JEbcze','extractEmailFromCommitDescribe','DEFAULT_GIT_USER_NAME','BranchDto','\x20&&\x20git\x20add\x20','describeCommit','getRemoteHash','__importDefault','split','baseDir','__esModule','\x22\x20--allow-empty','setCredentials','push','name','\x20--refs','Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','extractAuthorFromCommitDescribe','extractMessageFromCommitDescribe','../../../core','://','spawnPromise','Commit\x20message\x20\x22%s\x22','gitUrl','4212666ftlnAa','git\x20ls-remote\x20','\x20&&\x20git\x20init','commit','refs/heads/','getGitShellAuthorizationString','getProtocol','@flosum/utils','logger','2501190PmsSlq','1083464KrCEsp','extractChangesFromCommitDescribe','cwd','default','\x20&&\x20git\x20checkout\x20','./fs.internal','\x20&&\x20git\x20checkout\x20--orphan\x20','\x20&&\x20git\x20rev-parse\x20HEAD','Push\x20changes\x20to\x20%s','.temp','then','search','map','4184937mGDVNG','../providers/branches/dto/branch.dto','\x20&&\x20git\x20push\x20origin\x20','3702970brWmNI','84LlDhoO','createEmptyBranch','\x20&&\x20git\x20commit\x20-m\x20\x22','clone','4lVYIlH','toString','defineProperty','join','_repoPath','Describe\x20commit\x20%s','git','getRepositoryBranches','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','INITIAL_COMMIT','DEFAULT_CLONE_PATH','log','sha','./internal.utils','Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','getCurrentHash','filter'];a148_0x46af=function(){return _0x320f5c;};return a148_0x46af();}function a148_0x18f6(_0x2d564e,_0x581ad8){const _0x3afe9c=a148_0x46af();return a148_0x18f6=function(_0x5a5907,_0x2edf95){_0x5a5907=_0x5a5907-0x91;let _0x46af47=_0x3afe9c[_0x5a5907];return _0x46af47;},a148_0x18f6(_0x2d564e,_0x581ad8);}(function(_0x3ae007,_0xe8d075){const _0x97924b=a148_0x18f6,_0x4e417c=_0x3ae007();while(!![]){try{const _0x18e1c0=-parseInt(_0x97924b(0xc3))/0x1*(-parseInt(_0x97924b(0xca))/0x2)+-parseInt(_0x97924b(0xa5))/0x3*(parseInt(_0x97924b(0xad))/0x4)+-parseInt(_0x97924b(0xc2))/0x5+parseInt(_0x97924b(0xe2))/0x6+-parseInt(_0x97924b(0xa9))/0x7*(-parseInt(_0x97924b(0x98))/0x8)+parseInt(_0x97924b(0x97))/0x9+parseInt(_0x97924b(0xa8))/0xa;if(_0x18e1c0===_0xe8d075)break;else _0x4e417c['push'](_0x4e417c['shift']());}catch(_0x24320f){_0x4e417c['push'](_0x4e417c['shift']());}}}(a148_0x46af,0xd3132));const a148_0x2edf95=(function(){let _0x1f4836=!![];return function(_0x4c5cb4,_0x4b9cd4){const _0x31dfae=_0x1f4836?function(){const _0xb46675=a148_0x18f6;if(_0x4b9cd4){const _0x114369=_0x4b9cd4[_0xb46675(0xc0)](_0x4c5cb4,arguments);return _0x4b9cd4=null,_0x114369;}}:function(){};return _0x1f4836=![],_0x31dfae;};}()),a148_0x5a5907=a148_0x2edf95(this,function(){const _0x55cc41=a148_0x18f6;return a148_0x5a5907[_0x55cc41(0xae)]()[_0x55cc41(0xa3)](_0x55cc41(0xbe))[_0x55cc41(0xae)]()['constructor'](a148_0x5a5907)[_0x55cc41(0xa3)]('(((.+)+)+)+$');});a148_0x5a5907();'use strict';var __importDefault=this&&this[a148_0x3edd6e(0xd1)]||function(_0x3ba3ab){const _0x407804=a148_0x3edd6e;return _0x3ba3ab&&_0x3ba3ab[_0x407804(0xd4)]?_0x3ba3ab:{'default':_0x3ba3ab};};Object[a148_0x3edd6e(0xaf)](exports,a148_0x3edd6e(0xd4),{'value':!![]}),exports[a148_0x3edd6e(0xc5)]=void 0x0;const constants_1=require(a148_0x3edd6e(0xbf)),core_1=require(a148_0x3edd6e(0xdd)),path_1=__importDefault(require('path')),branch_dto_1=require(a148_0x3edd6e(0xa6)),utils_1=require('../../shared/utils'),fs_internal_1=require(a148_0x3edd6e(0x9d)),internal_utils_1=require(a148_0x3edd6e(0xba)),utils_2=require(a148_0x3edd6e(0x95));class Git{constructor(_0x23936b){const _0x2e7331=a148_0x3edd6e;this[_0x2e7331(0xb1)]=_0x23936b;}get[a148_0x3edd6e(0xd3)](){const _0x28026f=a148_0x3edd6e;return this[_0x28026f(0xb1)];}async[a148_0x3edd6e(0xd6)](_0x4e7dbe,_0x59ab3e){const _0x252388=a148_0x3edd6e;await utils_2[_0x252388(0xc4)]['spawnPromise'](_0x252388(0xc8)+this[_0x252388(0xb1)]+_0x252388(0xb5)+_0x4e7dbe+'\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'+_0x59ab3e+'\x22','');}async['add'](..._0x2d33ec){const _0x2d07d0=a148_0x3edd6e;await utils_2[_0x2d07d0(0xc4)][_0x2d07d0(0xdf)](_0x2d07d0(0xc8)+this['_repoPath']+_0x2d07d0(0xce)+_0x2d33ec[_0x2d07d0(0xb0)]('\x20'),'');}async['status'](){const _0x2cb04c=a148_0x3edd6e;return utils_2[_0x2cb04c(0xc4)][_0x2cb04c(0xdf)]('cd\x20'+this[_0x2cb04c(0xb1)]+'\x20&&\x20git\x20status','');}async[a148_0x3edd6e(0x91)](_0xadde36){const _0x4883b8=a148_0x3edd6e;Git[_0x4883b8(0x96)][_0x4883b8(0xb8)](_0x4883b8(0xe0),_0xadde36),await utils_2[_0x4883b8(0xc4)]['spawnPromise']('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0xadde36+'\x22','');}async[a148_0x3edd6e(0xd7)](_0x1dac8d){const _0x3a02de=a148_0x3edd6e;Git['logger'][_0x3a02de(0xb8)](_0x3a02de(0xa0),_0x1dac8d),await utils_2[_0x3a02de(0xc4)][_0x3a02de(0xdf)]('cd\x20'+this[_0x3a02de(0xb1)]+_0x3a02de(0xa7)+_0x1dac8d+'\x20--quiet','');}async['checkout'](_0x5a5250){const _0x223244=a148_0x3edd6e;Git[_0x223244(0x96)][_0x223244(0xb8)](_0x223244(0xc9),_0x5a5250),await utils_2[_0x223244(0xc4)]['spawnPromise']('cd\x20'+this[_0x223244(0xb1)]+_0x223244(0x9c)+_0x5a5250,'');}async[a148_0x3edd6e(0xbc)](){const _0x437c2d=a148_0x3edd6e,_0x40cdbf=await utils_2[_0x437c2d(0xc4)][_0x437c2d(0xdf)](_0x437c2d(0xc8)+this[_0x437c2d(0xb1)]+_0x437c2d(0x9f),'');return _0x40cdbf[_0x437c2d(0xc1)]('\x0a','');}async[a148_0x3edd6e(0xcf)](_0x48c2ac){const _0x4d7d92=a148_0x3edd6e;Git['logger'][_0x4d7d92(0xb8)](_0x4d7d92(0xb2),_0x48c2ac);const _0x7726a5=await utils_2[_0x4d7d92(0xc4)][_0x4d7d92(0xdf)]('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20'+_0x48c2ac,'');return{'author':(0x0,internal_utils_1[_0x4d7d92(0xdb)])(_0x7726a5),'email':(0x0,internal_utils_1[_0x4d7d92(0xcb)])(_0x7726a5),'message':(0x0,internal_utils_1[_0x4d7d92(0xdc)])(_0x7726a5),'changes':(0x0,internal_utils_1[_0x4d7d92(0x99)])(_0x7726a5)};}static async[a148_0x3edd6e(0xd0)](_0x41a801,_0x5b7727){const _0x374544=a148_0x3edd6e,[_0x1b0926]=await utils_2[_0x374544(0xc4)]['spawnPromise']('git\x20ls-remote\x20'+_0x41a801+'\x20'+_0x5b7727+_0x374544(0xd9),'')[_0x374544(0xa2)](_0x29f9af=>_0x29f9af['replace'](/\s/g,'\x20')[_0x374544(0xd2)]('\x20'));return _0x1b0926;}static async[a148_0x3edd6e(0xac)](_0x49f731,_0x4e8f8b,_0x5555f1){const _0x3ebdee=a148_0x3edd6e,_0x37a190=path_1['default'][_0x3ebdee(0xb0)](this[_0x3ebdee(0xb7)],_0x4e8f8b),_0x530bec=new Git(_0x37a190);return Git[_0x3ebdee(0x96)]['log']('Clone\x20repository\x20branch\x20%s\x20to\x20%s',_0x5555f1,_0x37a190),await fs_internal_1['FS']['removeDir'](_0x37a190),await utils_2[_0x3ebdee(0xc4)][_0x3ebdee(0xdf)]('git\x20clone\x20-b\x20'+_0x5555f1+'\x20--single-branch\x20'+_0x49f731+'\x20'+_0x37a190,''),_0x530bec;}static async[a148_0x3edd6e(0xb4)](_0x3562bd,_0x787004){const _0x110fa7=a148_0x3edd6e,_0x5c813a=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x3052b2=_0x3562bd['gitUrl']['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x110fa7(0x94)])(_0x3562bd[_0x110fa7(0xe1)])+_0x110fa7(0xde)+_0x787004[_0x110fa7(0x93)]()+'@'),_0x48bd40=await utils_2['ChildProcessUtils'][_0x110fa7(0xdf)](_0x110fa7(0xe3)+_0x3052b2,'');return _0x48bd40[_0x110fa7(0xd2)]('\x0a')[_0x110fa7(0xbd)](_0x1df023=>_0x5c813a['test'](_0x1df023))[_0x110fa7(0xa4)](_0x54dae9=>{const _0x484b7f=_0x110fa7,[,_0x33fd40,_0x52438b]=_0x54dae9[_0x484b7f(0xc6)](_0x5c813a),_0xa84ac9=new branch_dto_1[(_0x484b7f(0xcd))]();return _0xa84ac9[_0x484b7f(0xb9)]=_0x33fd40,_0xa84ac9['name']=_0x52438b[_0x484b7f(0xc1)](_0x484b7f(0x92),''),_0xa84ac9;});}static async[a148_0x3edd6e(0xaa)](_0x49d658,_0x58cae2,_0x5d5fd4,_0x2239e8){const _0x4c3eca=a148_0x3edd6e,_0x2c0677=_0x49d658[_0x4c3eca(0xe1)][_0x4c3eca(0xc1)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x4c3eca(0x94)])(_0x49d658[_0x4c3eca(0xe1)])+'://'+_0x2239e8[_0x4c3eca(0x93)]()+'@'),_0x56099c=path_1['default'][_0x4c3eca(0xb0)](this['DEFAULT_CLONE_PATH'],_0x49d658[_0x4c3eca(0xd8)]);Git['logger'][_0x4c3eca(0xb8)](_0x4c3eca(0xda),_0x49d658[_0x4c3eca(0xd8)],_0x58cae2,_0x56099c),await fs_internal_1['FS']['removeDir'](_0x56099c),await fs_internal_1['FS'][_0x4c3eca(0xc7)](_0x56099c);const _0x57b2a6=new Git(_0x56099c);await utils_2[_0x4c3eca(0xc4)][_0x4c3eca(0xdf)](_0x4c3eca(0xc8)+_0x57b2a6[_0x4c3eca(0xd3)]+_0x4c3eca(0xe4),''),await utils_2[_0x4c3eca(0xc4)]['spawnPromise'](_0x4c3eca(0xc8)+_0x57b2a6['baseDir']+'\x20&&\x20git\x20remote\x20add\x20origin\x20'+_0x2c0677,''),await _0x57b2a6[_0x4c3eca(0xd6)](constants_1[_0x4c3eca(0xcc)],constants_1['DEFAULT_GIT_USER_EMAIL']),await utils_2[_0x4c3eca(0xc4)][_0x4c3eca(0xdf)](_0x4c3eca(0xc8)+_0x57b2a6[_0x4c3eca(0xd3)]+_0x4c3eca(0x9e)+_0x58cae2,''),await utils_2[_0x4c3eca(0xc4)][_0x4c3eca(0xdf)](_0x4c3eca(0xc8)+_0x57b2a6[_0x4c3eca(0xd3)]+_0x4c3eca(0xab)+(_0x5d5fd4||constants_1[_0x4c3eca(0xb6)])+_0x4c3eca(0xd5),''),await _0x57b2a6[_0x4c3eca(0xd7)](_0x58cae2),Git[_0x4c3eca(0x96)]['log'](_0x4c3eca(0xbb)),await fs_internal_1['FS']['removeDir'](_0x57b2a6[_0x4c3eca(0xd3)]);}}exports['Git']=Git,Git['DEFAULT_CLONE_PATH']=path_1[a148_0x3edd6e(0x9b)][a148_0x3edd6e(0xb0)](process[a148_0x3edd6e(0x9a)](),a148_0x3edd6e(0xa1),a148_0x3edd6e(0xb3)),Git['logger']=new core_1['Logger'](Git[a148_0x3edd6e(0xd8)]);