const a147_0x14ce87=a147_0x34e9;function a147_0x4cb2(){const _0x11650f=['INITIAL_COMMIT','\x20&&\x20git\x20checkout\x20--orphan\x20','refs/heads/','81BeUVHP','400apYHst','\x20--single-branch\x20','5cLXXFN','checkout','\x20--quiet','add','DEFAULT_CLONE_PATH','log','Clone\x20repository\x20branch\x20%s\x20to\x20%s','78953IGgXRE','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','Describe\x20commit\x20%s','../../shared/utils','(((.+)+)+)+$','clone','Git','getGitShellAuthorizationString','gitUrl','11934637ZIvAXp','constructor','Commit\x20message\x20\x22%s\x22','DEFAULT_GIT_USER_NAME','extractAuthorFromCommitDescribe','Logger','sha','getRemoteHash','cd\x20','baseDir','createEmptyBranch','../../../constants','map','git','__importDefault','spawnPromise','removeDir','git\x20ls-remote\x20','\x22\x20--allow-empty','replace','split','logger','describeCommit','default','\x20&&\x20git\x20commit\x20-m\x20\x22','DEFAULT_GIT_USER_EMAIL','setCredentials','Push\x20changes\x20to\x20%s','\x20&&\x20git\x20checkout\x20','status','makeDir','../../../core','87231URzLqZ','apply','then','cwd','1GpAaXn','6606228dJVeRI','2242812wdutJc','name','extractMessageFromCommitDescribe','://','Checkout\x20to\x20%s','Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','./fs.internal','ChildProcessUtils','getProtocol','20XuHnLe','test','getRepositoryBranches','\x20&&\x20git\x20rev-parse\x20HEAD','search','toString','\x20&&\x20git\x20remote\x20add\x20origin\x20','13DyomMx','match','\x20&&\x20git\x20status','_repoPath','__esModule','join','273450YlZIkF','defineProperty','getCurrentHash','\x20--refs','Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','\x20&&\x20git\x20add\x20','6319260AsNhsr','push','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'];a147_0x4cb2=function(){return _0x11650f;};return a147_0x4cb2();}function a147_0x34e9(_0x267f1c,_0x23bef8){const _0x123bb6=a147_0x4cb2();return a147_0x34e9=function(_0x5c9a4c,_0x4bcfbc){_0x5c9a4c=_0x5c9a4c-0x1b4;let _0x4cb2da=_0x123bb6[_0x5c9a4c];return _0x4cb2da;},a147_0x34e9(_0x267f1c,_0x23bef8);}(function(_0x2e42dc,_0x4e2925){const _0x76bf70=a147_0x34e9,_0x4584e1=_0x2e42dc();while(!![]){try{const _0x5cf1b3=-parseInt(_0x76bf70(0x1e0))/0x1*(-parseInt(_0x76bf70(0x1e2))/0x2)+-parseInt(_0x76bf70(0x1dc))/0x3*(parseInt(_0x76bf70(0x1eb))/0x4)+-parseInt(_0x76bf70(0x208))/0x5*(parseInt(_0x76bf70(0x1fe))/0x6)+-parseInt(_0x76bf70(0x20f))/0x7*(-parseInt(_0x76bf70(0x206))/0x8)+-parseInt(_0x76bf70(0x205))/0x9*(parseInt(_0x76bf70(0x1f8))/0xa)+parseInt(_0x76bf70(0x1bc))/0xb+-parseInt(_0x76bf70(0x1e1))/0xc*(parseInt(_0x76bf70(0x1f2))/0xd);if(_0x5cf1b3===_0x4e2925)break;else _0x4584e1['push'](_0x4584e1['shift']());}catch(_0x279d32){_0x4584e1['push'](_0x4584e1['shift']());}}}(a147_0x4cb2,0xbd3c0));const a147_0x4bcfbc=(function(){let _0xd4e24=!![];return function(_0x228400,_0x364ef5){const _0x2fa8a7=_0xd4e24?function(){const _0x6c2096=a147_0x34e9;if(_0x364ef5){const _0x20d738=_0x364ef5[_0x6c2096(0x1dd)](_0x228400,arguments);return _0x364ef5=null,_0x20d738;}}:function(){};return _0xd4e24=![],_0x2fa8a7;};}()),a147_0x5c9a4c=a147_0x4bcfbc(this,function(){const _0x17c353=a147_0x34e9;return a147_0x5c9a4c[_0x17c353(0x1f0)]()[_0x17c353(0x1ef)](_0x17c353(0x1b7))['toString']()[_0x17c353(0x1bd)](a147_0x5c9a4c)[_0x17c353(0x1ef)]('(((.+)+)+)+$');});a147_0x5c9a4c();'use strict';var __importDefault=this&&this[a147_0x14ce87(0x1ca)]||function(_0x2204c1){return _0x2204c1&&_0x2204c1['__esModule']?_0x2204c1:{'default':_0x2204c1};};Object[a147_0x14ce87(0x1f9)](exports,a147_0x14ce87(0x1f6),{'value':!![]}),exports[a147_0x14ce87(0x1b9)]=void 0x0;const constants_1=require(a147_0x14ce87(0x1c7)),core_1=require(a147_0x14ce87(0x1db)),path_1=__importDefault(require('path')),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require(a147_0x14ce87(0x1b6)),fs_internal_1=require(a147_0x14ce87(0x1e8)),internal_utils_1=require('./internal.utils'),utils_2=require('@flosum/utils');class Git{constructor(_0xa747fa){const _0x17665f=a147_0x14ce87;this[_0x17665f(0x1f5)]=_0xa747fa;}get[a147_0x14ce87(0x1c5)](){const _0x45dfa3=a147_0x14ce87;return this[_0x45dfa3(0x1f5)];}async[a147_0x14ce87(0x1d6)](_0x3809f3,_0x1b0029){const _0x1f5546=a147_0x14ce87;await utils_2[_0x1f5546(0x1e9)][_0x1f5546(0x1cb)](_0x1f5546(0x1c4)+this[_0x1f5546(0x1f5)]+_0x1f5546(0x1b4)+_0x3809f3+_0x1f5546(0x201)+_0x1b0029+'\x22','');}async[a147_0x14ce87(0x20b)](..._0x2d4846){const _0x2c7dc1=a147_0x14ce87;await utils_2[_0x2c7dc1(0x1e9)][_0x2c7dc1(0x1cb)](_0x2c7dc1(0x1c4)+this['_repoPath']+_0x2c7dc1(0x1fd)+_0x2d4846[_0x2c7dc1(0x1f7)]('\x20'),'');}async[a147_0x14ce87(0x1d9)](){const _0x364317=a147_0x14ce87;return utils_2['ChildProcessUtils'][_0x364317(0x1cb)](_0x364317(0x1c4)+this['_repoPath']+_0x364317(0x1f4),'');}async['commit'](_0x11539d){const _0x1b7d2a=a147_0x14ce87;Git[_0x1b7d2a(0x1d1)][_0x1b7d2a(0x20d)](_0x1b7d2a(0x1be),_0x11539d),await utils_2[_0x1b7d2a(0x1e9)]['spawnPromise']('cd\x20'+this[_0x1b7d2a(0x1f5)]+_0x1b7d2a(0x1d4)+_0x11539d+'\x22','');}async[a147_0x14ce87(0x1ff)](_0x9acdea){const _0x5bf6b2=a147_0x14ce87;Git[_0x5bf6b2(0x1d1)]['log'](_0x5bf6b2(0x1d7),_0x9acdea),await utils_2[_0x5bf6b2(0x1e9)][_0x5bf6b2(0x1cb)]('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20push\x20origin\x20'+_0x9acdea+_0x5bf6b2(0x20a),'');}async[a147_0x14ce87(0x209)](_0x2fb9be){const _0x1f38f1=a147_0x14ce87;Git['logger'][_0x1f38f1(0x20d)](_0x1f38f1(0x1e6),_0x2fb9be),await utils_2[_0x1f38f1(0x1e9)]['spawnPromise'](_0x1f38f1(0x1c4)+this[_0x1f38f1(0x1f5)]+_0x1f38f1(0x1d8)+_0x2fb9be,'');}async[a147_0x14ce87(0x1fa)](){const _0xbf289f=a147_0x14ce87,_0x3c964b=await utils_2['ChildProcessUtils'][_0xbf289f(0x1cb)](_0xbf289f(0x1c4)+this['_repoPath']+_0xbf289f(0x1ee),'');return _0x3c964b['replace']('\x0a','');}async[a147_0x14ce87(0x1d2)](_0x2252c7){const _0x538874=a147_0x14ce87;Git[_0x538874(0x1d1)]['log'](_0x538874(0x1b5),_0x2252c7);const _0x2123f=await utils_2['ChildProcessUtils']['spawnPromise'](_0x538874(0x1c4)+this[_0x538874(0x1f5)]+_0x538874(0x200)+_0x2252c7,'');return{'author':(0x0,internal_utils_1[_0x538874(0x1c0)])(_0x2123f),'email':(0x0,internal_utils_1['extractEmailFromCommitDescribe'])(_0x2123f),'message':(0x0,internal_utils_1[_0x538874(0x1e4)])(_0x2123f),'changes':(0x0,internal_utils_1['extractChangesFromCommitDescribe'])(_0x2123f)};}static async[a147_0x14ce87(0x1c3)](_0x4f2246,_0x257858){const _0x5697a1=a147_0x14ce87,[_0x268dc3]=await utils_2[_0x5697a1(0x1e9)][_0x5697a1(0x1cb)]('git\x20ls-remote\x20'+_0x4f2246+'\x20'+_0x257858+_0x5697a1(0x1fb),'')[_0x5697a1(0x1de)](_0x719c42=>_0x719c42[_0x5697a1(0x1cf)](/\s/g,'\x20')[_0x5697a1(0x1d0)]('\x20'));return _0x268dc3;}static async[a147_0x14ce87(0x1b8)](_0x22e5f1,_0x513888,_0x286ce6){const _0x592411=a147_0x14ce87,_0x1feda1=path_1['default']['join'](this[_0x592411(0x20c)],_0x513888),_0x46493c=new Git(_0x1feda1);return Git[_0x592411(0x1d1)][_0x592411(0x20d)](_0x592411(0x20e),_0x286ce6,_0x1feda1),await fs_internal_1['FS'][_0x592411(0x1cc)](_0x1feda1),await utils_2[_0x592411(0x1e9)]['spawnPromise']('git\x20clone\x20-b\x20'+_0x286ce6+_0x592411(0x207)+_0x22e5f1+'\x20'+_0x1feda1,''),_0x46493c;}static async[a147_0x14ce87(0x1ed)](_0x414b08,_0x505b02){const _0x4ed186=a147_0x14ce87,_0x2ccf9b=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x37ed8d=_0x414b08['gitUrl'][_0x4ed186(0x1cf)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x4ed186(0x1ea)])(_0x414b08[_0x4ed186(0x1bb)])+_0x4ed186(0x1e5)+_0x505b02[_0x4ed186(0x1ba)]()+'@'),_0x343c0e=await utils_2[_0x4ed186(0x1e9)][_0x4ed186(0x1cb)](_0x4ed186(0x1cd)+_0x37ed8d,'');return _0x343c0e[_0x4ed186(0x1d0)]('\x0a')['filter'](_0x510025=>_0x2ccf9b[_0x4ed186(0x1ec)](_0x510025))[_0x4ed186(0x1c8)](_0x33c598=>{const _0x3a99aa=_0x4ed186,[,_0x25a95,_0x4e1f6e]=_0x33c598[_0x3a99aa(0x1f3)](_0x2ccf9b),_0x2a8aad=new branch_dto_1['BranchDto']();return _0x2a8aad[_0x3a99aa(0x1c2)]=_0x25a95,_0x2a8aad[_0x3a99aa(0x1e3)]=_0x4e1f6e[_0x3a99aa(0x1cf)](_0x3a99aa(0x204),''),_0x2a8aad;});}static async[a147_0x14ce87(0x1c6)](_0x291adc,_0x33fec9,_0x2af918,_0x4a5432){const _0x22d4e8=a147_0x14ce87,_0x3378cb=_0x291adc[_0x22d4e8(0x1bb)][_0x22d4e8(0x1cf)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x22d4e8(0x1ea)])(_0x291adc[_0x22d4e8(0x1bb)])+_0x22d4e8(0x1e5)+_0x4a5432['getGitShellAuthorizationString']()+'@'),_0xfce2a3=path_1[_0x22d4e8(0x1d3)][_0x22d4e8(0x1f7)](this[_0x22d4e8(0x20c)],_0x291adc[_0x22d4e8(0x1e3)]);Git[_0x22d4e8(0x1d1)]['log'](_0x22d4e8(0x1fc),_0x291adc[_0x22d4e8(0x1e3)],_0x33fec9,_0xfce2a3),await fs_internal_1['FS'][_0x22d4e8(0x1cc)](_0xfce2a3),await fs_internal_1['FS'][_0x22d4e8(0x1da)](_0xfce2a3);const _0x3654d6=new Git(_0xfce2a3);await utils_2[_0x22d4e8(0x1e9)][_0x22d4e8(0x1cb)]('cd\x20'+_0x3654d6[_0x22d4e8(0x1c5)]+'\x20&&\x20git\x20init',''),await utils_2[_0x22d4e8(0x1e9)][_0x22d4e8(0x1cb)](_0x22d4e8(0x1c4)+_0x3654d6[_0x22d4e8(0x1c5)]+_0x22d4e8(0x1f1)+_0x3378cb,''),await _0x3654d6[_0x22d4e8(0x1d6)](constants_1[_0x22d4e8(0x1bf)],constants_1[_0x22d4e8(0x1d5)]),await utils_2[_0x22d4e8(0x1e9)]['spawnPromise'](_0x22d4e8(0x1c4)+_0x3654d6[_0x22d4e8(0x1c5)]+_0x22d4e8(0x203)+_0x33fec9,''),await utils_2[_0x22d4e8(0x1e9)][_0x22d4e8(0x1cb)]('cd\x20'+_0x3654d6[_0x22d4e8(0x1c5)]+_0x22d4e8(0x1d4)+(_0x2af918||constants_1[_0x22d4e8(0x202)])+_0x22d4e8(0x1ce),''),await _0x3654d6['push'](_0x33fec9),Git[_0x22d4e8(0x1d1)]['log'](_0x22d4e8(0x1e7)),await fs_internal_1['FS'][_0x22d4e8(0x1cc)](_0x3654d6[_0x22d4e8(0x1c5)]);}}exports['Git']=Git,Git[a147_0x14ce87(0x20c)]=path_1[a147_0x14ce87(0x1d3)][a147_0x14ce87(0x1f7)](process[a147_0x14ce87(0x1df)](),'.temp',a147_0x14ce87(0x1c9)),Git[a147_0x14ce87(0x1d1)]=new core_1[(a147_0x14ce87(0x1c1))](Git['name']);