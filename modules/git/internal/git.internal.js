const a125_0xcd9db5=a125_0x32a5;(function(_0x10b99a,_0x56ed65){const _0x478a01=a125_0x32a5,_0x1cf545=_0x10b99a();while(!![]){try{const _0x40ca27=-parseInt(_0x478a01(0x1eb))/0x1+parseInt(_0x478a01(0x1e1))/0x2+-parseInt(_0x478a01(0x1cd))/0x3*(-parseInt(_0x478a01(0x1ef))/0x4)+-parseInt(_0x478a01(0x1b1))/0x5+parseInt(_0x478a01(0x1e0))/0x6+parseInt(_0x478a01(0x1ae))/0x7+-parseInt(_0x478a01(0x1b5))/0x8;if(_0x40ca27===_0x56ed65)break;else _0x1cf545['push'](_0x1cf545['shift']());}catch(_0x343b66){_0x1cf545['push'](_0x1cf545['shift']());}}}(a125_0x3c4a,0x5ad68));const a125_0x5aa679=(function(){let _0x46b9f8=!![];return function(_0x5cd4fa,_0x55f7b4){const _0xe798ef=_0x46b9f8?function(){const _0x142125=a125_0x32a5;if(_0x55f7b4){const _0x2cc8c3=_0x55f7b4[_0x142125(0x1e9)](_0x5cd4fa,arguments);return _0x55f7b4=null,_0x2cc8c3;}}:function(){};return _0x46b9f8=![],_0xe798ef;};}()),a125_0x37db3d=a125_0x5aa679(this,function(){const _0x317ab1=a125_0x32a5;return a125_0x37db3d[_0x317ab1(0x1d7)]()['search'](_0x317ab1(0x1cf))['toString']()[_0x317ab1(0x1d8)](a125_0x37db3d)[_0x317ab1(0x1e3)]('(((.+)+)+)+$');});a125_0x37db3d();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x194947){const _0x1fbd8a=a125_0x32a5;return _0x194947&&_0x194947[_0x1fbd8a(0x1b2)]?_0x194947:{'default':_0x194947};};Object['defineProperty'](exports,a125_0xcd9db5(0x1b2),{'value':!![]}),exports[a125_0xcd9db5(0x1c5)]=void 0x0;const constants_1=require(a125_0xcd9db5(0x1a7)),core_1=require(a125_0xcd9db5(0x1d5)),path_1=__importDefault(require(a125_0xcd9db5(0x1b6))),branch_dto_1=require(a125_0xcd9db5(0x1af)),utils_1=require(a125_0xcd9db5(0x1bc)),fs_internal_1=require('./fs.internal'),internal_utils_1=require(a125_0xcd9db5(0x1ea)),utils_2=require(a125_0xcd9db5(0x1c0));function a125_0x32a5(_0x2b047f,_0x36e542){const _0x59416d=a125_0x3c4a();return a125_0x32a5=function(_0x37db3d,_0x5aa679){_0x37db3d=_0x37db3d-0x19c;let _0x3c4afa=_0x59416d[_0x37db3d];return _0x3c4afa;},a125_0x32a5(_0x2b047f,_0x36e542);}function a125_0x3c4a(){const _0xf241cd=['getCurrentHash','\x20--single-branch\x20','describeCommit','then','test','status','git','2229912xilIze','1249060urTmth','commit\x20message\x20\x22%s\x22','search','extractAuthorFromCommitDescribe','\x20&&\x20git\x20rev-parse\x20HEAD','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','getProtocol','\x20&&\x20git\x20add\x20','apply','./internal.utils','610119kKMRhF','checkout','\x20&&\x20git\x20checkout\x20--orphan\x20','getRemoteHash','4DkoCLG','filter','DEFAULT_GIT_USER_NAME','DEFAULT_CLONE_PATH','extractChangesFromCommitDescribe','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','removeDir','sha','clone','createEmptyBranch','\x20&&\x20git\x20checkout\x20','DEFAULT_GIT_USER_EMAIL','://','extractMessageFromCommitDescribe','../../../constants','.temp','push\x20changes\x20to\x20%s','\x20&&\x20git\x20commit\x20-m\x20\x22','add','push','\x20&&\x20git\x20push\x20origin\x20','1026452DTOOyd','../providers/branches/dto/branch.dto','name','33505jLngHL','__esModule','spawnPromise','Logger','6486344gWEHSc','path','gitUrl','log','clone\x20repository\x20branch\x20%s\x20to\x20%s','\x20--refs','_repoPath','../../shared/utils','cwd','replace','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','@flosum/utils','extractEmailFromCommitDescribe','getGitShellAuthorizationString','\x20&&\x20git\x20status','setCredentials','Git','commit','baseDir','split','git\x20ls-remote\x20','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','cd\x20','\x20--quiet','1970601MvMGCG','join','(((.+)+)+)+$','git\x20clone\x20-b\x20','default','ChildProcessUtils','logger','map','../../../core','getRepositoryBranches','toString','constructor'];a125_0x3c4a=function(){return _0xf241cd;};return a125_0x3c4a();}class Git{constructor(_0x1e31d6){this['_repoPath']=_0x1e31d6;}get[a125_0xcd9db5(0x1c7)](){const _0x56472e=a125_0xcd9db5;return this[_0x56472e(0x1bb)];}async[a125_0xcd9db5(0x1c4)](_0x22726c,_0x566352){const _0x4018af=a125_0xcd9db5;await utils_2['ChildProcessUtils'][_0x4018af(0x1b3)](_0x4018af(0x1cb)+this[_0x4018af(0x1bb)]+_0x4018af(0x1ca)+_0x22726c+_0x4018af(0x19e)+_0x566352+'\x22','');}async[a125_0xcd9db5(0x1ab)](..._0x1542bb){const _0x206ad8=a125_0xcd9db5;await utils_2['ChildProcessUtils'][_0x206ad8(0x1b3)](_0x206ad8(0x1cb)+this[_0x206ad8(0x1bb)]+_0x206ad8(0x1e8)+_0x1542bb[_0x206ad8(0x1ce)]('\x20'),'');}async[a125_0xcd9db5(0x1de)](){const _0x2c151d=a125_0xcd9db5;return utils_2[_0x2c151d(0x1d2)]['spawnPromise'](_0x2c151d(0x1cb)+this['_repoPath']+_0x2c151d(0x1c3),'');}async[a125_0xcd9db5(0x1c6)](_0x1a20af){const _0x2b3caa=a125_0xcd9db5;Git['logger'][_0x2b3caa(0x1b8)](_0x2b3caa(0x1e2),_0x1a20af),await utils_2[_0x2b3caa(0x1d2)][_0x2b3caa(0x1b3)](_0x2b3caa(0x1cb)+this[_0x2b3caa(0x1bb)]+_0x2b3caa(0x1aa)+_0x1a20af+'\x22','');}async[a125_0xcd9db5(0x1ac)](_0x5d61c8){const _0x43ebe7=a125_0xcd9db5;Git[_0x43ebe7(0x1d3)][_0x43ebe7(0x1b8)](_0x43ebe7(0x1a9),_0x5d61c8),await utils_2['ChildProcessUtils'][_0x43ebe7(0x1b3)](_0x43ebe7(0x1cb)+this[_0x43ebe7(0x1bb)]+_0x43ebe7(0x1ad)+_0x5d61c8+_0x43ebe7(0x1cc),'');}async[a125_0xcd9db5(0x1ec)](_0x4bec89){const _0x7c8c1e=a125_0xcd9db5;Git[_0x7c8c1e(0x1d3)][_0x7c8c1e(0x1b8)]('checkout\x20to\x20%s',_0x4bec89),await utils_2[_0x7c8c1e(0x1d2)][_0x7c8c1e(0x1b3)](_0x7c8c1e(0x1cb)+this[_0x7c8c1e(0x1bb)]+_0x7c8c1e(0x1a3)+_0x4bec89,'');}async[a125_0xcd9db5(0x1d9)](){const _0x1c4f8e=a125_0xcd9db5,_0x2039d8=await utils_2[_0x1c4f8e(0x1d2)][_0x1c4f8e(0x1b3)](_0x1c4f8e(0x1cb)+this[_0x1c4f8e(0x1bb)]+_0x1c4f8e(0x1e5),'');return _0x2039d8[_0x1c4f8e(0x1be)]('\x0a','');}async[a125_0xcd9db5(0x1db)](_0x545a87){const _0x210b1e=a125_0xcd9db5;Git['logger'][_0x210b1e(0x1b8)]('describe\x20commit\x20%s',_0x545a87);const _0x451450=await utils_2[_0x210b1e(0x1d2)][_0x210b1e(0x1b3)](_0x210b1e(0x1cb)+this[_0x210b1e(0x1bb)]+_0x210b1e(0x1e6)+_0x545a87,'');return{'author':(0x0,internal_utils_1[_0x210b1e(0x1e4)])(_0x451450),'email':(0x0,internal_utils_1[_0x210b1e(0x1c1)])(_0x451450),'message':(0x0,internal_utils_1[_0x210b1e(0x1a6)])(_0x451450),'changes':(0x0,internal_utils_1[_0x210b1e(0x19d)])(_0x451450)};}static async[a125_0xcd9db5(0x1ee)](_0x462b45,_0xbedc54){const _0x23288a=a125_0xcd9db5,[_0x53a382]=await utils_2[_0x23288a(0x1d2)][_0x23288a(0x1b3)](_0x23288a(0x1c9)+_0x462b45+'\x20'+_0xbedc54+_0x23288a(0x1ba),'')[_0x23288a(0x1dc)](_0x2bdd58=>_0x2bdd58[_0x23288a(0x1be)](/\s/g,'\x20')[_0x23288a(0x1c8)]('\x20'));return _0x53a382;}static async[a125_0xcd9db5(0x1a1)](_0x23a087,_0x24e216,_0x204abe){const _0x1c3d9f=a125_0xcd9db5,_0x149ea3=path_1[_0x1c3d9f(0x1d1)]['join'](this[_0x1c3d9f(0x19c)],_0x24e216),_0x5ac2be=new Git(_0x149ea3);return Git[_0x1c3d9f(0x1d3)]['log'](_0x1c3d9f(0x1b9),_0x204abe,_0x149ea3),await fs_internal_1['FS'][_0x1c3d9f(0x19f)](_0x149ea3),await utils_2[_0x1c3d9f(0x1d2)][_0x1c3d9f(0x1b3)](_0x1c3d9f(0x1d0)+_0x204abe+_0x1c3d9f(0x1da)+_0x23a087+'\x20'+_0x149ea3,''),_0x5ac2be;}static async[a125_0xcd9db5(0x1d6)](_0x56dd69,_0x36196e){const _0xc5a331=a125_0xcd9db5,_0x1fdfe0=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x2e8af7=_0x56dd69[_0xc5a331(0x1b7)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0xc5a331(0x1e7)])(_0x56dd69[_0xc5a331(0x1b7)])+_0xc5a331(0x1a5)+_0x36196e[_0xc5a331(0x1c2)]()+'@'),_0x5f0ce9=await utils_2[_0xc5a331(0x1d2)]['spawnPromise'](_0xc5a331(0x1c9)+_0x2e8af7,'');return _0x5f0ce9[_0xc5a331(0x1c8)]('\x0a')[_0xc5a331(0x1f0)](_0x4dd142=>_0x1fdfe0[_0xc5a331(0x1dd)](_0x4dd142))[_0xc5a331(0x1d4)](_0x491142=>{const _0x35591f=_0xc5a331,[,_0x1e8364,_0x2c28f5]=_0x491142['match'](_0x1fdfe0),_0x232df6=new branch_dto_1['BranchDto']();return _0x232df6[_0x35591f(0x1a0)]=_0x1e8364,_0x232df6[_0x35591f(0x1b0)]=_0x2c28f5[_0x35591f(0x1be)]('refs/heads/',''),_0x232df6;});}static async[a125_0xcd9db5(0x1a2)](_0x1a4c30,_0x2939de,_0x3c5e61,_0x5188fb){const _0x3b73db=a125_0xcd9db5,_0x450272=_0x1a4c30['gitUrl'][_0x3b73db(0x1be)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x3b73db(0x1e7)])(_0x1a4c30['gitUrl'])+_0x3b73db(0x1a5)+_0x5188fb[_0x3b73db(0x1c2)]()+'@'),_0x1a8b12=path_1[_0x3b73db(0x1d1)]['join'](this[_0x3b73db(0x19c)],_0x1a4c30[_0x3b73db(0x1b0)]);Git['logger'][_0x3b73db(0x1b8)](_0x3b73db(0x1bf),_0x1a4c30[_0x3b73db(0x1b0)],_0x2939de,_0x1a8b12),await fs_internal_1['FS']['removeDir'](_0x1a8b12),await fs_internal_1['FS']['makeDir'](_0x1a8b12);const _0x1b687a=new Git(_0x1a8b12);await utils_2[_0x3b73db(0x1d2)]['spawnPromise'](_0x3b73db(0x1cb)+_0x1b687a[_0x3b73db(0x1c7)]+'\x20&&\x20git\x20init',''),await utils_2['ChildProcessUtils']['spawnPromise']('cd\x20'+_0x1b687a[_0x3b73db(0x1c7)]+'\x20&&\x20git\x20remote\x20add\x20origin\x20'+_0x450272,''),await _0x1b687a[_0x3b73db(0x1c4)](constants_1[_0x3b73db(0x1f1)],constants_1[_0x3b73db(0x1a4)]),await utils_2[_0x3b73db(0x1d2)]['spawnPromise']('cd\x20'+_0x1b687a['baseDir']+_0x3b73db(0x1ed)+_0x2939de,''),await utils_2[_0x3b73db(0x1d2)][_0x3b73db(0x1b3)]('cd\x20'+_0x1b687a[_0x3b73db(0x1c7)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+(_0x3c5e61||constants_1['INITIAL_COMMIT'])+'\x22\x20--allow-empty',''),await _0x1b687a[_0x3b73db(0x1ac)](_0x2939de),Git[_0x3b73db(0x1d3)][_0x3b73db(0x1b8)]('clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch'),await fs_internal_1['FS'][_0x3b73db(0x19f)](_0x1b687a[_0x3b73db(0x1c7)]);}}exports[a125_0xcd9db5(0x1c5)]=Git,Git['DEFAULT_CLONE_PATH']=path_1[a125_0xcd9db5(0x1d1)]['join'](process[a125_0xcd9db5(0x1bd)](),a125_0xcd9db5(0x1a8),a125_0xcd9db5(0x1df)),Git['logger']=new core_1[(a125_0xcd9db5(0x1b4))](Git[a125_0xcd9db5(0x1b0)]);