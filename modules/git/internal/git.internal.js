const a147_0x485477=a147_0x5f51;(function(_0x19d55e,_0x171b32){const _0x417ac3=a147_0x5f51,_0x118964=_0x19d55e();while(!![]){try{const _0x3b498e=-parseInt(_0x417ac3(0xad))/0x1+parseInt(_0x417ac3(0xc4))/0x2+-parseInt(_0x417ac3(0xc9))/0x3*(-parseInt(_0x417ac3(0xa5))/0x4)+parseInt(_0x417ac3(0x98))/0x5*(parseInt(_0x417ac3(0xd6))/0x6)+parseInt(_0x417ac3(0xc2))/0x7*(-parseInt(_0x417ac3(0xaa))/0x8)+parseInt(_0x417ac3(0xb6))/0x9+parseInt(_0x417ac3(0xc6))/0xa;if(_0x3b498e===_0x171b32)break;else _0x118964['push'](_0x118964['shift']());}catch(_0x56012f){_0x118964['push'](_0x118964['shift']());}}}(a147_0x24d3,0xebdab));const a147_0xbf84b0=(function(){let _0x26ae24=!![];return function(_0x2ebbc0,_0xe19c6e){const _0x277a8e=_0x26ae24?function(){const _0x2b1361=a147_0x5f51;if(_0xe19c6e){const _0x253554=_0xe19c6e[_0x2b1361(0x8e)](_0x2ebbc0,arguments);return _0xe19c6e=null,_0x253554;}}:function(){};return _0x26ae24=![],_0x277a8e;};}()),a147_0x4148ba=a147_0xbf84b0(this,function(){const _0x2737ee=a147_0x5f51;return a147_0x4148ba['toString']()[_0x2737ee(0xd5)](_0x2737ee(0xcb))[_0x2737ee(0x88)]()['constructor'](a147_0x4148ba)[_0x2737ee(0xd5)](_0x2737ee(0xcb));});a147_0x4148ba();'use strict';var __importDefault=this&&this[a147_0x485477(0x8b)]||function(_0x5ce635){const _0x3b1927=a147_0x485477;return _0x5ce635&&_0x5ce635[_0x3b1927(0xbb)]?_0x5ce635:{'default':_0x5ce635};};function a147_0x5f51(_0xfaa3db,_0x5f1b32){const _0x28d49d=a147_0x24d3();return a147_0x5f51=function(_0x4148ba,_0xbf84b0){_0x4148ba=_0x4148ba-0x85;let _0x24d316=_0x28d49d[_0x4148ba];return _0x24d316;},a147_0x5f51(_0xfaa3db,_0x5f1b32);}function a147_0x24d3(){const _0x376185=['__importDefault','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','_repoPath','apply','removeDir','\x20&&\x20git\x20checkout\x20','path','Logger','join','sha','checkout','git\x20ls-remote\x20','replace','71665vjIKvx','git\x20clone\x20-b\x20','extractChangesFromCommitDescribe','baseDir','\x20&&\x20git\x20commit\x20-m\x20\x22','\x20&&\x20git\x20push\x20origin\x20','cwd','Commit\x20message\x20\x22%s\x22','commit','logger','\x20&&\x20git\x20add\x20','INITIAL_COMMIT','Describe\x20commit\x20%s','4CQzyGL','Git','\x20--single-branch\x20','makeDir','DEFAULT_CLONE_PATH','24HLTOGW','DEFAULT_GIT_USER_EMAIL','Checkout\x20to\x20%s','1409451ICqOQJ','\x20&&\x20git\x20remote\x20add\x20origin\x20','git','gitUrl','\x22\x20--allow-empty','filter','\x20&&\x20git\x20init','getProtocol','ChildProcessUtils','325935RTUJok','../../../constants','then','Push\x20changes\x20to\x20%s','add','__esModule','spawnPromise','push','Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','match','defineProperty','1417549lfxvPX','\x20--quiet','2785562ITFPpU','\x20&&\x20git\x20rev-parse\x20HEAD','4573320KoRqlt','getGitShellAuthorizationString','DEFAULT_GIT_USER_NAME','624171FMxboO','./fs.internal','(((.+)+)+)+$','\x20&&\x20git\x20checkout\x20--orphan\x20','getRemoteHash','://','.temp','cd\x20','map','\x20--refs','name','status','search','372VqBEzX','extractMessageFromCommitDescribe','log','setCredentials','toString','../../../core','default'];a147_0x24d3=function(){return _0x376185;};return a147_0x24d3();}Object[a147_0x485477(0xc1)](exports,'__esModule',{'value':!![]}),exports[a147_0x485477(0xa6)]=void 0x0;const constants_1=require(a147_0x485477(0xb7)),core_1=require(a147_0x485477(0x89)),path_1=__importDefault(require(a147_0x485477(0x91))),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require('../../shared/utils'),fs_internal_1=require(a147_0x485477(0xca)),internal_utils_1=require('./internal.utils'),utils_2=require('@flosum/utils');class Git{constructor(_0x11fdb3){const _0x5901e6=a147_0x485477;this[_0x5901e6(0x8d)]=_0x11fdb3;}get[a147_0x485477(0x9b)](){const _0x106ce5=a147_0x485477;return this[_0x106ce5(0x8d)];}async['setCredentials'](_0x2fc0b4,_0x105f2a){const _0xf7a2d=a147_0x485477;await utils_2['ChildProcessUtils']['spawnPromise'](_0xf7a2d(0xd0)+this['_repoPath']+'\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22'+_0x2fc0b4+'\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'+_0x105f2a+'\x22','');}async[a147_0x485477(0xba)](..._0x483b96){const _0x8c57f6=a147_0x485477;await utils_2[_0x8c57f6(0xb5)][_0x8c57f6(0xbc)](_0x8c57f6(0xd0)+this[_0x8c57f6(0x8d)]+_0x8c57f6(0xa2)+_0x483b96['join']('\x20'),'');}async[a147_0x485477(0xd4)](){const _0x5d0a17=a147_0x485477;return utils_2['ChildProcessUtils'][_0x5d0a17(0xbc)](_0x5d0a17(0xd0)+this['_repoPath']+'\x20&&\x20git\x20status','');}async[a147_0x485477(0xa0)](_0x5192c3){const _0x4dee0f=a147_0x485477;Git['logger']['log'](_0x4dee0f(0x9f),_0x5192c3),await utils_2[_0x4dee0f(0xb5)][_0x4dee0f(0xbc)](_0x4dee0f(0xd0)+this[_0x4dee0f(0x8d)]+_0x4dee0f(0x9c)+_0x5192c3+'\x22','');}async[a147_0x485477(0xbd)](_0x19f0bc){const _0x2b09e1=a147_0x485477;Git[_0x2b09e1(0xa1)][_0x2b09e1(0x86)](_0x2b09e1(0xb9),_0x19f0bc),await utils_2[_0x2b09e1(0xb5)][_0x2b09e1(0xbc)]('cd\x20'+this[_0x2b09e1(0x8d)]+_0x2b09e1(0x9d)+_0x19f0bc+_0x2b09e1(0xc3),'');}async[a147_0x485477(0x95)](_0x30a1b3){const _0x3371c1=a147_0x485477;Git[_0x3371c1(0xa1)]['log'](_0x3371c1(0xac),_0x30a1b3),await utils_2[_0x3371c1(0xb5)][_0x3371c1(0xbc)](_0x3371c1(0xd0)+this[_0x3371c1(0x8d)]+_0x3371c1(0x90)+_0x30a1b3,'');}async['getCurrentHash'](){const _0x387717=a147_0x485477,_0xc27fca=await utils_2['ChildProcessUtils'][_0x387717(0xbc)](_0x387717(0xd0)+this[_0x387717(0x8d)]+_0x387717(0xc5),'');return _0xc27fca[_0x387717(0x97)]('\x0a','');}async['describeCommit'](_0x8560ba){const _0x281576=a147_0x485477;Git['logger'][_0x281576(0x86)](_0x281576(0xa4),_0x8560ba);const _0x3eeeb1=await utils_2['ChildProcessUtils'][_0x281576(0xbc)](_0x281576(0xd0)+this[_0x281576(0x8d)]+_0x281576(0x8c)+_0x8560ba,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x3eeeb1),'email':(0x0,internal_utils_1['extractEmailFromCommitDescribe'])(_0x3eeeb1),'message':(0x0,internal_utils_1[_0x281576(0x85)])(_0x3eeeb1),'changes':(0x0,internal_utils_1[_0x281576(0x9a)])(_0x3eeeb1)};}static async[a147_0x485477(0xcd)](_0x43786a,_0x4c9904){const _0x252afb=a147_0x485477,[_0x47dc21]=await utils_2[_0x252afb(0xb5)]['spawnPromise']('git\x20ls-remote\x20'+_0x43786a+'\x20'+_0x4c9904+_0x252afb(0xd2),'')[_0x252afb(0xb8)](_0x4cc4ed=>_0x4cc4ed[_0x252afb(0x97)](/\s/g,'\x20')['split']('\x20'));return _0x47dc21;}static async['clone'](_0x674bf3,_0x18f30f,_0x6ca3f){const _0x1312e8=a147_0x485477,_0x2dfb0f=path_1[_0x1312e8(0x8a)][_0x1312e8(0x93)](this[_0x1312e8(0xa9)],_0x18f30f),_0x142ec9=new Git(_0x2dfb0f);return Git['logger'][_0x1312e8(0x86)]('Clone\x20repository\x20branch\x20%s\x20to\x20%s',_0x6ca3f,_0x2dfb0f),await fs_internal_1['FS'][_0x1312e8(0x8f)](_0x2dfb0f),await utils_2[_0x1312e8(0xb5)][_0x1312e8(0xbc)](_0x1312e8(0x99)+_0x6ca3f+_0x1312e8(0xa7)+_0x674bf3+'\x20'+_0x2dfb0f,''),_0x142ec9;}static async['getRepositoryBranches'](_0x185041,_0x3347ec){const _0x246712=a147_0x485477,_0x45f165=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x3a3162=_0x185041[_0x246712(0xb0)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x246712(0xb4)])(_0x185041['gitUrl'])+'://'+_0x3347ec[_0x246712(0xc7)]()+'@'),_0x3b7ccd=await utils_2['ChildProcessUtils'][_0x246712(0xbc)](_0x246712(0x96)+_0x3a3162,'');return _0x3b7ccd['split']('\x0a')[_0x246712(0xb2)](_0x90f532=>_0x45f165['test'](_0x90f532))[_0x246712(0xd1)](_0x3a108d=>{const _0x568df9=_0x246712,[,_0x15ef01,_0x300d36]=_0x3a108d[_0x568df9(0xc0)](_0x45f165),_0x52678d=new branch_dto_1['BranchDto']();return _0x52678d[_0x568df9(0x94)]=_0x15ef01,_0x52678d[_0x568df9(0xd3)]=_0x300d36[_0x568df9(0x97)]('refs/heads/',''),_0x52678d;});}static async['createEmptyBranch'](_0x3cf46a,_0xdca17a,_0x1fefe5,_0x47f0bb){const _0x26bf74=a147_0x485477,_0x321a72=_0x3cf46a[_0x26bf74(0xb0)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x26bf74(0xb4)])(_0x3cf46a[_0x26bf74(0xb0)])+_0x26bf74(0xce)+_0x47f0bb['getGitShellAuthorizationString']()+'@'),_0x107a89=path_1[_0x26bf74(0x8a)][_0x26bf74(0x93)](this['DEFAULT_CLONE_PATH'],_0x3cf46a[_0x26bf74(0xd3)]);Git['logger'][_0x26bf74(0x86)](_0x26bf74(0xbe),_0x3cf46a[_0x26bf74(0xd3)],_0xdca17a,_0x107a89),await fs_internal_1['FS'][_0x26bf74(0x8f)](_0x107a89),await fs_internal_1['FS'][_0x26bf74(0xa8)](_0x107a89);const _0xeaa763=new Git(_0x107a89);await utils_2['ChildProcessUtils'][_0x26bf74(0xbc)](_0x26bf74(0xd0)+_0xeaa763[_0x26bf74(0x9b)]+_0x26bf74(0xb3),''),await utils_2[_0x26bf74(0xb5)]['spawnPromise'](_0x26bf74(0xd0)+_0xeaa763['baseDir']+_0x26bf74(0xae)+_0x321a72,''),await _0xeaa763[_0x26bf74(0x87)](constants_1[_0x26bf74(0xc8)],constants_1[_0x26bf74(0xab)]),await utils_2[_0x26bf74(0xb5)][_0x26bf74(0xbc)](_0x26bf74(0xd0)+_0xeaa763[_0x26bf74(0x9b)]+_0x26bf74(0xcc)+_0xdca17a,''),await utils_2[_0x26bf74(0xb5)][_0x26bf74(0xbc)](_0x26bf74(0xd0)+_0xeaa763[_0x26bf74(0x9b)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+(_0x1fefe5||constants_1[_0x26bf74(0xa3)])+_0x26bf74(0xb1),''),await _0xeaa763[_0x26bf74(0xbd)](_0xdca17a),Git[_0x26bf74(0xa1)][_0x26bf74(0x86)](_0x26bf74(0xbf)),await fs_internal_1['FS']['removeDir'](_0xeaa763[_0x26bf74(0x9b)]);}}exports['Git']=Git,Git[a147_0x485477(0xa9)]=path_1[a147_0x485477(0x8a)][a147_0x485477(0x93)](process[a147_0x485477(0x9e)](),a147_0x485477(0xcf),a147_0x485477(0xaf)),Git[a147_0x485477(0xa1)]=new core_1[(a147_0x485477(0x92))](Git[a147_0x485477(0xd3)]);