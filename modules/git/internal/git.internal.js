const a125_0x2bf4f7=a125_0x28ca;(function(_0x22117a,_0xeb6d99){const _0xb36588=a125_0x28ca,_0x4e30a1=_0x22117a();while(!![]){try{const _0x4a40cb=-parseInt(_0xb36588(0x7d))/0x1*(-parseInt(_0xb36588(0x8c))/0x2)+parseInt(_0xb36588(0xac))/0x3+-parseInt(_0xb36588(0xbd))/0x4*(parseInt(_0xb36588(0x8b))/0x5)+-parseInt(_0xb36588(0xba))/0x6*(parseInt(_0xb36588(0x7c))/0x7)+-parseInt(_0xb36588(0x9b))/0x8+parseInt(_0xb36588(0x7a))/0x9+parseInt(_0xb36588(0x8f))/0xa;if(_0x4a40cb===_0xeb6d99)break;else _0x4e30a1['push'](_0x4e30a1['shift']());}catch(_0x17407a){_0x4e30a1['push'](_0x4e30a1['shift']());}}}(a125_0x3d79,0x9effc));const a125_0xb60a7c=(function(){let _0x2ee113=!![];return function(_0x429854,_0x10d3cf){const _0x295019=_0x2ee113?function(){const _0xa96090=a125_0x28ca;if(_0x10d3cf){const _0x42db14=_0x10d3cf[_0xa96090(0x83)](_0x429854,arguments);return _0x10d3cf=null,_0x42db14;}}:function(){};return _0x2ee113=![],_0x295019;};}()),a125_0xbf7ee=a125_0xb60a7c(this,function(){const _0x1d2cb5=a125_0x28ca;return a125_0xbf7ee[_0x1d2cb5(0xa3)]()[_0x1d2cb5(0xab)]('(((.+)+)+)+$')[_0x1d2cb5(0xa3)]()['constructor'](a125_0xbf7ee)['search']('(((.+)+)+)+$');});function a125_0x3d79(){const _0x5be9a8=['\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','spawnPromise','Logger','__esModule','extractChangesFromCommitDescribe','cd\x20','\x20&&\x20git\x20rev-parse\x20HEAD','log','1813095Lxwhlx','\x20&&\x20git\x20checkout\x20--orphan\x20','2230466xCwxbm','1cKikkW','setCredentials','\x20&&\x20git\x20remote\x20add\x20origin\x20','removeDir','DEFAULT_GIT_USER_EMAIL','refs/heads/','apply','getGitShellAuthorizationString','ChildProcessUtils','join','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','extractMessageFromCommitDescribe','\x22\x20--allow-empty','_repoPath','3787510vXGNaJ','2487520KPrcAG','../../../core','@flosum/utils','8891730doqHEn','then','name','defineProperty','push','logger','replace','BranchDto','DEFAULT_CLONE_PATH','\x20&&\x20git\x20status','\x20--single-branch\x20','git\x20ls-remote\x20','124544MMCmLn','filter','clone','./fs.internal','sha','\x20&&\x20git\x20init','git','default','toString','checkout\x20to\x20%s','cwd','git\x20clone\x20-b\x20','__importDefault','INITIAL_COMMIT','split','createEmptyBranch','search','137568GdLOHF','DEFAULT_GIT_USER_NAME','getProtocol','../../../constants','\x20&&\x20git\x20add\x20','://','add','extractEmailFromCommitDescribe','../../shared/utils','getRemoteHash','describe\x20commit\x20%s','baseDir','gitUrl','status','18gnpyll','\x20&&\x20git\x20commit\x20-m\x20\x22','makeDir','4YAHxFa','getCurrentHash'];a125_0x3d79=function(){return _0x5be9a8;};return a125_0x3d79();}a125_0xbf7ee();function a125_0x28ca(_0x1fd2fa,_0x1b02e5){const _0xa15a38=a125_0x3d79();return a125_0x28ca=function(_0xbf7ee,_0xb60a7c){_0xbf7ee=_0xbf7ee-0x72;let _0x3d79e2=_0xa15a38[_0xbf7ee];return _0x3d79e2;},a125_0x28ca(_0x1fd2fa,_0x1b02e5);}'use strict';var __importDefault=this&&this[a125_0x2bf4f7(0xa7)]||function(_0x21cadc){return _0x21cadc&&_0x21cadc['__esModule']?_0x21cadc:{'default':_0x21cadc};};Object[a125_0x2bf4f7(0x92)](exports,a125_0x2bf4f7(0x75),{'value':!![]}),exports['Git']=void 0x0;const constants_1=require(a125_0x2bf4f7(0xaf)),core_1=require(a125_0x2bf4f7(0x8d)),path_1=__importDefault(require('path')),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require(a125_0x2bf4f7(0xb4)),fs_internal_1=require(a125_0x2bf4f7(0x9e)),internal_utils_1=require('./internal.utils'),utils_2=require(a125_0x2bf4f7(0x8e));class Git{constructor(_0x377fe9){const _0x182f09=a125_0x2bf4f7;this[_0x182f09(0x8a)]=_0x377fe9;}get['baseDir'](){const _0x14bf04=a125_0x2bf4f7;return this[_0x14bf04(0x8a)];}async[a125_0x2bf4f7(0x7e)](_0x112681,_0x3b724d){const _0x39dbee=a125_0x2bf4f7;await utils_2[_0x39dbee(0x85)]['spawnPromise']('cd\x20'+this[_0x39dbee(0x8a)]+'\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22'+_0x112681+_0x39dbee(0x87)+_0x3b724d+'\x22','');}async[a125_0x2bf4f7(0xb2)](..._0x2d0b02){const _0x11875f=a125_0x2bf4f7;await utils_2[_0x11875f(0x85)][_0x11875f(0x73)](_0x11875f(0x77)+this[_0x11875f(0x8a)]+_0x11875f(0xb0)+_0x2d0b02[_0x11875f(0x86)]('\x20'),'');}async[a125_0x2bf4f7(0xb9)](){const _0x27c2fb=a125_0x2bf4f7;return utils_2[_0x27c2fb(0x85)][_0x27c2fb(0x73)](_0x27c2fb(0x77)+this['_repoPath']+_0x27c2fb(0x98),'');}async['commit'](_0x169584){const _0xf6aaae=a125_0x2bf4f7;Git[_0xf6aaae(0x94)][_0xf6aaae(0x79)]('commit\x20message\x20\x22%s\x22',_0x169584),await utils_2['ChildProcessUtils'][_0xf6aaae(0x73)](_0xf6aaae(0x77)+this[_0xf6aaae(0x8a)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x169584+'\x22','');}async[a125_0x2bf4f7(0x93)](_0x5208c0){const _0x480eb5=a125_0x2bf4f7;Git[_0x480eb5(0x94)]['log']('push\x20changes\x20to\x20%s',_0x5208c0),await utils_2['ChildProcessUtils'][_0x480eb5(0x73)]('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20push\x20origin\x20'+_0x5208c0+'\x20--quiet','');}async['checkout'](_0x811c6c){const _0x597e55=a125_0x2bf4f7;Git[_0x597e55(0x94)][_0x597e55(0x79)](_0x597e55(0xa4),_0x811c6c),await utils_2[_0x597e55(0x85)]['spawnPromise'](_0x597e55(0x77)+this[_0x597e55(0x8a)]+'\x20&&\x20git\x20checkout\x20'+_0x811c6c,'');}async[a125_0x2bf4f7(0xbe)](){const _0x127b17=a125_0x2bf4f7,_0x3a8ce7=await utils_2[_0x127b17(0x85)]['spawnPromise']('cd\x20'+this[_0x127b17(0x8a)]+_0x127b17(0x78),'');return _0x3a8ce7['replace']('\x0a','');}async['describeCommit'](_0x3912c0){const _0x932ab=a125_0x2bf4f7;Git[_0x932ab(0x94)][_0x932ab(0x79)](_0x932ab(0xb6),_0x3912c0);const _0x56141b=await utils_2[_0x932ab(0x85)]['spawnPromise'](_0x932ab(0x77)+this[_0x932ab(0x8a)]+_0x932ab(0x72)+_0x3912c0,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x56141b),'email':(0x0,internal_utils_1[_0x932ab(0xb3)])(_0x56141b),'message':(0x0,internal_utils_1[_0x932ab(0x88)])(_0x56141b),'changes':(0x0,internal_utils_1[_0x932ab(0x76)])(_0x56141b)};}static async[a125_0x2bf4f7(0xb5)](_0x5be659,_0x4eeb37){const _0x34ac58=a125_0x2bf4f7,[_0x33e6e9]=await utils_2[_0x34ac58(0x85)][_0x34ac58(0x73)](_0x34ac58(0x9a)+_0x5be659+'\x20'+_0x4eeb37+'\x20--refs','')[_0x34ac58(0x90)](_0x33222d=>_0x33222d[_0x34ac58(0x95)](/\s/g,'\x20')[_0x34ac58(0xa9)]('\x20'));return _0x33e6e9;}static async[a125_0x2bf4f7(0x9d)](_0x5bc8e5,_0x1f974e,_0x22370b){const _0x228231=a125_0x2bf4f7,_0xbd7cfc=path_1[_0x228231(0xa2)][_0x228231(0x86)](this[_0x228231(0x97)],_0x1f974e),_0x597600=new Git(_0xbd7cfc);return Git[_0x228231(0x94)][_0x228231(0x79)]('clone\x20repository\x20branch\x20%s\x20to\x20%s',_0x22370b,_0xbd7cfc),await fs_internal_1['FS'][_0x228231(0x80)](_0xbd7cfc),await utils_2[_0x228231(0x85)]['spawnPromise'](_0x228231(0xa6)+_0x22370b+_0x228231(0x99)+_0x5bc8e5+'\x20'+_0xbd7cfc,''),_0x597600;}static async['getRepositoryBranches'](_0xd63093,_0x397bdc){const _0x2e2fb7=a125_0x2bf4f7,_0x26766d=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x32c34d=_0xd63093[_0x2e2fb7(0xb8)][_0x2e2fb7(0x95)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x2e2fb7(0xae)])(_0xd63093[_0x2e2fb7(0xb8)])+_0x2e2fb7(0xb1)+_0x397bdc[_0x2e2fb7(0x84)]()+'@'),_0x706ae8=await utils_2[_0x2e2fb7(0x85)][_0x2e2fb7(0x73)]('git\x20ls-remote\x20'+_0x32c34d,'');return _0x706ae8[_0x2e2fb7(0xa9)]('\x0a')[_0x2e2fb7(0x9c)](_0x35a2ae=>_0x26766d['test'](_0x35a2ae))['map'](_0x26414c=>{const _0x5c31b5=_0x2e2fb7,[,_0x411c88,_0x19d719]=_0x26414c['match'](_0x26766d),_0xf5487=new branch_dto_1[(_0x5c31b5(0x96))]();return _0xf5487[_0x5c31b5(0x9f)]=_0x411c88,_0xf5487['name']=_0x19d719[_0x5c31b5(0x95)](_0x5c31b5(0x82),''),_0xf5487;});}static async[a125_0x2bf4f7(0xaa)](_0x316f64,_0x4df832,_0x55695b,_0x10222a){const _0x185d92=a125_0x2bf4f7,_0x59004b=_0x316f64[_0x185d92(0xb8)][_0x185d92(0x95)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x316f64['gitUrl'])+_0x185d92(0xb1)+_0x10222a[_0x185d92(0x84)]()+'@'),_0x166935=path_1[_0x185d92(0xa2)]['join'](this[_0x185d92(0x97)],_0x316f64['name']);Git[_0x185d92(0x94)]['log']('create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]',_0x316f64[_0x185d92(0x91)],_0x4df832,_0x166935),await fs_internal_1['FS'][_0x185d92(0x80)](_0x166935),await fs_internal_1['FS'][_0x185d92(0xbc)](_0x166935);const _0x1d5448=new Git(_0x166935);await utils_2[_0x185d92(0x85)]['spawnPromise'](_0x185d92(0x77)+_0x1d5448[_0x185d92(0xb7)]+_0x185d92(0xa0),''),await utils_2['ChildProcessUtils'][_0x185d92(0x73)]('cd\x20'+_0x1d5448[_0x185d92(0xb7)]+_0x185d92(0x7f)+_0x59004b,''),await _0x1d5448[_0x185d92(0x7e)](constants_1[_0x185d92(0xad)],constants_1[_0x185d92(0x81)]),await utils_2['ChildProcessUtils']['spawnPromise']('cd\x20'+_0x1d5448[_0x185d92(0xb7)]+_0x185d92(0x7b)+_0x4df832,''),await utils_2[_0x185d92(0x85)][_0x185d92(0x73)]('cd\x20'+_0x1d5448['baseDir']+_0x185d92(0xbb)+(_0x55695b||constants_1[_0x185d92(0xa8)])+_0x185d92(0x89),''),await _0x1d5448[_0x185d92(0x93)](_0x4df832),Git['logger']['log']('clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch'),await fs_internal_1['FS'][_0x185d92(0x80)](_0x1d5448[_0x185d92(0xb7)]);}}exports['Git']=Git,Git[a125_0x2bf4f7(0x97)]=path_1[a125_0x2bf4f7(0xa2)][a125_0x2bf4f7(0x86)](process[a125_0x2bf4f7(0xa5)](),'.temp',a125_0x2bf4f7(0xa1)),Git[a125_0x2bf4f7(0x94)]=new core_1[(a125_0x2bf4f7(0x74))](Git[a125_0x2bf4f7(0x91)]);