const a148_0x4d13fd=a148_0x59bc;(function(_0x310246,_0x3012ed){const _0x430bfd=a148_0x59bc,_0x4051f9=_0x310246();while(!![]){try{const _0x46e166=-parseInt(_0x430bfd(0x12f))/0x1*(parseInt(_0x430bfd(0x131))/0x2)+parseInt(_0x430bfd(0xfa))/0x3+-parseInt(_0x430bfd(0x145))/0x4*(-parseInt(_0x430bfd(0x134))/0x5)+-parseInt(_0x430bfd(0x10a))/0x6+-parseInt(_0x430bfd(0x111))/0x7+-parseInt(_0x430bfd(0x11a))/0x8+parseInt(_0x430bfd(0x10e))/0x9;if(_0x46e166===_0x3012ed)break;else _0x4051f9['push'](_0x4051f9['shift']());}catch(_0x5bd55c){_0x4051f9['push'](_0x4051f9['shift']());}}}(a148_0x4b9a,0xe5be4));const a148_0x3a54e7=(function(){let _0xc3f97=!![];return function(_0x45d7d2,_0x5b12b8){const _0x468008=_0xc3f97?function(){const _0x4fd897=a148_0x59bc;if(_0x5b12b8){const _0x299273=_0x5b12b8[_0x4fd897(0xfe)](_0x45d7d2,arguments);return _0x5b12b8=null,_0x299273;}}:function(){};return _0xc3f97=![],_0x468008;};}()),a148_0x5b910e=a148_0x3a54e7(this,function(){const _0x9dae68=a148_0x59bc;return a148_0x5b910e['toString']()['search'](_0x9dae68(0x101))[_0x9dae68(0x146)]()[_0x9dae68(0x130)](a148_0x5b910e)['search'](_0x9dae68(0x101));});function a148_0x59bc(_0x2e9bea,_0x13ef07){const _0x278c2e=a148_0x4b9a();return a148_0x59bc=function(_0x5b910e,_0x3a54e7){_0x5b910e=_0x5b910e-0xf5;let _0x4b9a5b=_0x278c2e[_0x5b910e];return _0x4b9a5b;},a148_0x59bc(_0x2e9bea,_0x13ef07);}a148_0x5b910e();'use strict';function a148_0x4b9a(){const _0x35cfd2=['cd\x20','@flosum/utils','Checkout\x20to\x20%s','spawnPromise','\x20&&\x20git\x20init','removeDir','ChildProcessUtils','7835528aLSEfp','cwd','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','git\x20clone\x20-b\x20','clone','\x20&&\x20git\x20push\x20origin\x20','push','match','logger','\x20&&\x20git\x20commit\x20-m\x20\x22','baseDir','\x20&&\x20git\x20rev-parse\x20HEAD','join','__esModule','Push\x20changes\x20to\x20%s','describeCommit','\x20--single-branch\x20','extractMessageFromCommitDescribe','DEFAULT_GIT_USER_NAME','\x20&&\x20git\x20checkout\x20','extractAuthorFromCommitDescribe','43OEcczG','constructor','30026hWNrWq','./internal.utils','getProtocol','7753895YfYZCM','Commit\x20message\x20\x22%s\x22','Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','../../../constants','split','Git','then','add','map','../../shared/utils','\x20&&\x20git\x20checkout\x20--orphan\x20','getRepositoryBranches','filter','log','git','git\x20ls-remote\x20','_repoPath','4llEbdr','toString','INITIAL_COMMIT','getGitShellAuthorizationString','default','name','gitUrl','929781jYTdxf','makeDir','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','test','apply','setCredentials','Clone\x20repository\x20branch\x20%s\x20to\x20%s','(((.+)+)+)+$','\x20&&\x20git\x20status','checkout','\x22\x20--allow-empty','commit','defineProperty','replace','path','://','8212122Hpyell','__importDefault','../../../core','\x20--quiet','23905260JZugte','\x20&&\x20git\x20add\x20','DEFAULT_CLONE_PATH','4074917JwdctX','./fs.internal'];a148_0x4b9a=function(){return _0x35cfd2;};return a148_0x4b9a();}var __importDefault=this&&this[a148_0x4d13fd(0x10b)]||function(_0x2abc64){const _0x4c2c9d=a148_0x4d13fd;return _0x2abc64&&_0x2abc64[_0x4c2c9d(0x127)]?_0x2abc64:{'default':_0x2abc64};};Object[a148_0x4d13fd(0x106)](exports,a148_0x4d13fd(0x127),{'value':!![]}),exports[a148_0x4d13fd(0x139)]=void 0x0;const constants_1=require(a148_0x4d13fd(0x137)),core_1=require(a148_0x4d13fd(0x10c)),path_1=__importDefault(require(a148_0x4d13fd(0x108))),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require(a148_0x4d13fd(0x13d)),fs_internal_1=require(a148_0x4d13fd(0x112)),internal_utils_1=require(a148_0x4d13fd(0x132)),utils_2=require(a148_0x4d13fd(0x114));class Git{constructor(_0xf2b7f9){const _0x44a4be=a148_0x4d13fd;this[_0x44a4be(0x144)]=_0xf2b7f9;}get[a148_0x4d13fd(0x124)](){const _0x1986c9=a148_0x4d13fd;return this[_0x1986c9(0x144)];}async['setCredentials'](_0x6d115d,_0x3a93c0){const _0x1529dc=a148_0x4d13fd;await utils_2[_0x1529dc(0x119)][_0x1529dc(0x116)]('cd\x20'+this[_0x1529dc(0x144)]+'\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22'+_0x6d115d+_0x1529dc(0x11c)+_0x3a93c0+'\x22','');}async[a148_0x4d13fd(0x13b)](..._0x4096fa){const _0x1ba264=a148_0x4d13fd;await utils_2[_0x1ba264(0x119)][_0x1ba264(0x116)](_0x1ba264(0x113)+this[_0x1ba264(0x144)]+_0x1ba264(0x10f)+_0x4096fa[_0x1ba264(0x126)]('\x20'),'');}async['status'](){const _0x437a95=a148_0x4d13fd;return utils_2[_0x437a95(0x119)][_0x437a95(0x116)]('cd\x20'+this[_0x437a95(0x144)]+_0x437a95(0x102),'');}async[a148_0x4d13fd(0x105)](_0x55bd56){const _0x16e3a2=a148_0x4d13fd;Git[_0x16e3a2(0x122)][_0x16e3a2(0x141)](_0x16e3a2(0x135),_0x55bd56),await utils_2[_0x16e3a2(0x119)]['spawnPromise']('cd\x20'+this[_0x16e3a2(0x144)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x55bd56+'\x22','');}async[a148_0x4d13fd(0x120)](_0x391476){const _0x126b65=a148_0x4d13fd;Git[_0x126b65(0x122)][_0x126b65(0x141)](_0x126b65(0x128),_0x391476),await utils_2[_0x126b65(0x119)][_0x126b65(0x116)](_0x126b65(0x113)+this[_0x126b65(0x144)]+_0x126b65(0x11f)+_0x391476+_0x126b65(0x10d),'');}async[a148_0x4d13fd(0x103)](_0xea71e7){const _0x54f62e=a148_0x4d13fd;Git[_0x54f62e(0x122)][_0x54f62e(0x141)](_0x54f62e(0x115),_0xea71e7),await utils_2['ChildProcessUtils'][_0x54f62e(0x116)](_0x54f62e(0x113)+this[_0x54f62e(0x144)]+_0x54f62e(0x12d)+_0xea71e7,'');}async['getCurrentHash'](){const _0x4f34b9=a148_0x4d13fd,_0x53b529=await utils_2['ChildProcessUtils'][_0x4f34b9(0x116)](_0x4f34b9(0x113)+this['_repoPath']+_0x4f34b9(0x125),'');return _0x53b529[_0x4f34b9(0x107)]('\x0a','');}async[a148_0x4d13fd(0x129)](_0x5862e7){const _0x36434a=a148_0x4d13fd;Git[_0x36434a(0x122)][_0x36434a(0x141)]('Describe\x20commit\x20%s',_0x5862e7);const _0x39b03e=await utils_2['ChildProcessUtils']['spawnPromise'](_0x36434a(0x113)+this[_0x36434a(0x144)]+_0x36434a(0xfc)+_0x5862e7,'');return{'author':(0x0,internal_utils_1[_0x36434a(0x12e)])(_0x39b03e),'email':(0x0,internal_utils_1['extractEmailFromCommitDescribe'])(_0x39b03e),'message':(0x0,internal_utils_1[_0x36434a(0x12b)])(_0x39b03e),'changes':(0x0,internal_utils_1['extractChangesFromCommitDescribe'])(_0x39b03e)};}static async['getRemoteHash'](_0x204bd0,_0x8d395){const _0x57516f=a148_0x4d13fd,[_0x300bea]=await utils_2[_0x57516f(0x119)][_0x57516f(0x116)](_0x57516f(0x143)+_0x204bd0+'\x20'+_0x8d395+'\x20--refs','')[_0x57516f(0x13a)](_0x5da2a9=>_0x5da2a9[_0x57516f(0x107)](/\s/g,'\x20')[_0x57516f(0x138)]('\x20'));return _0x300bea;}static async[a148_0x4d13fd(0x11e)](_0xce26b9,_0x2c59d9,_0x13d0fd){const _0x5815c9=a148_0x4d13fd,_0x5afbf5=path_1['default'][_0x5815c9(0x126)](this[_0x5815c9(0x110)],_0x2c59d9),_0x53600f=new Git(_0x5afbf5);return Git['logger'][_0x5815c9(0x141)](_0x5815c9(0x100),_0x13d0fd,_0x5afbf5),await fs_internal_1['FS']['removeDir'](_0x5afbf5),await utils_2[_0x5815c9(0x119)][_0x5815c9(0x116)](_0x5815c9(0x11d)+_0x13d0fd+_0x5815c9(0x12a)+_0xce26b9+'\x20'+_0x5afbf5,''),_0x53600f;}static async[a148_0x4d13fd(0x13f)](_0x24d019,_0x6cebd4){const _0xef3888=a148_0x4d13fd,_0x363e91=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x2f087e=_0x24d019[_0xef3888(0xf9)][_0xef3888(0x107)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0xef3888(0x133)])(_0x24d019[_0xef3888(0xf9)])+_0xef3888(0x109)+_0x6cebd4[_0xef3888(0xf6)]()+'@'),_0x401018=await utils_2[_0xef3888(0x119)][_0xef3888(0x116)](_0xef3888(0x143)+_0x2f087e,'');return _0x401018[_0xef3888(0x138)]('\x0a')[_0xef3888(0x140)](_0x1de6f6=>_0x363e91[_0xef3888(0xfd)](_0x1de6f6))[_0xef3888(0x13c)](_0x5d4f4d=>{const _0x1d6bf1=_0xef3888,[,_0x5dedbe,_0x2f1ed2]=_0x5d4f4d[_0x1d6bf1(0x121)](_0x363e91),_0x37f73f=new branch_dto_1['BranchDto']();return _0x37f73f['sha']=_0x5dedbe,_0x37f73f[_0x1d6bf1(0xf8)]=_0x2f1ed2[_0x1d6bf1(0x107)]('refs/heads/',''),_0x37f73f;});}static async['createEmptyBranch'](_0x98b68c,_0x421234,_0x6039dd,_0x19e936){const _0x1d4238=a148_0x4d13fd,_0x134178=_0x98b68c[_0x1d4238(0xf9)][_0x1d4238(0x107)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x1d4238(0x133)])(_0x98b68c[_0x1d4238(0xf9)])+_0x1d4238(0x109)+_0x19e936[_0x1d4238(0xf6)]()+'@'),_0x3d8c83=path_1[_0x1d4238(0xf7)][_0x1d4238(0x126)](this[_0x1d4238(0x110)],_0x98b68c[_0x1d4238(0xf8)]);Git['logger'][_0x1d4238(0x141)](_0x1d4238(0x136),_0x98b68c['name'],_0x421234,_0x3d8c83),await fs_internal_1['FS'][_0x1d4238(0x118)](_0x3d8c83),await fs_internal_1['FS'][_0x1d4238(0xfb)](_0x3d8c83);const _0x1e102e=new Git(_0x3d8c83);await utils_2[_0x1d4238(0x119)][_0x1d4238(0x116)](_0x1d4238(0x113)+_0x1e102e['baseDir']+_0x1d4238(0x117),''),await utils_2[_0x1d4238(0x119)]['spawnPromise'](_0x1d4238(0x113)+_0x1e102e[_0x1d4238(0x124)]+'\x20&&\x20git\x20remote\x20add\x20origin\x20'+_0x134178,''),await _0x1e102e[_0x1d4238(0xff)](constants_1[_0x1d4238(0x12c)],constants_1['DEFAULT_GIT_USER_EMAIL']),await utils_2[_0x1d4238(0x119)][_0x1d4238(0x116)](_0x1d4238(0x113)+_0x1e102e['baseDir']+_0x1d4238(0x13e)+_0x421234,''),await utils_2[_0x1d4238(0x119)]['spawnPromise'](_0x1d4238(0x113)+_0x1e102e[_0x1d4238(0x124)]+_0x1d4238(0x123)+(_0x6039dd||constants_1[_0x1d4238(0xf5)])+_0x1d4238(0x104),''),await _0x1e102e[_0x1d4238(0x120)](_0x421234),Git[_0x1d4238(0x122)][_0x1d4238(0x141)]('Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch'),await fs_internal_1['FS']['removeDir'](_0x1e102e[_0x1d4238(0x124)]);}}exports[a148_0x4d13fd(0x139)]=Git,Git['DEFAULT_CLONE_PATH']=path_1[a148_0x4d13fd(0xf7)]['join'](process[a148_0x4d13fd(0x11b)](),'.temp',a148_0x4d13fd(0x142)),Git['logger']=new core_1['Logger'](Git[a148_0x4d13fd(0xf8)]);