const a126_0x59a596=a126_0x5b96;(function(_0x7d5e3f,_0x35b408){const _0x5647a4=a126_0x5b96,_0x5c56c1=_0x7d5e3f();while(!![]){try{const _0x45beb9=-parseInt(_0x5647a4(0xaf))/0x1+parseInt(_0x5647a4(0xb5))/0x2*(-parseInt(_0x5647a4(0xcf))/0x3)+parseInt(_0x5647a4(0x9a))/0x4+parseInt(_0x5647a4(0x8a))/0x5*(parseInt(_0x5647a4(0x98))/0x6)+parseInt(_0x5647a4(0xd3))/0x7*(-parseInt(_0x5647a4(0x86))/0x8)+parseInt(_0x5647a4(0xc3))/0x9+-parseInt(_0x5647a4(0xc7))/0xa*(parseInt(_0x5647a4(0x96))/0xb);if(_0x45beb9===_0x35b408)break;else _0x5c56c1['push'](_0x5c56c1['shift']());}catch(_0x12cd71){_0x5c56c1['push'](_0x5c56c1['shift']());}}}(a126_0x51b8,0xa85a3));const a126_0x18f4a5=(function(){let _0x36df66=!![];return function(_0x349f72,_0x391fa6){const _0x1f9984=_0x36df66?function(){if(_0x391fa6){const _0x46b7a6=_0x391fa6['apply'](_0x349f72,arguments);return _0x391fa6=null,_0x46b7a6;}}:function(){};return _0x36df66=![],_0x1f9984;};}()),a126_0x516ba7=a126_0x18f4a5(this,function(){const _0x10eafe=a126_0x5b96;return a126_0x516ba7[_0x10eafe(0xac)]()[_0x10eafe(0x8b)](_0x10eafe(0x97))[_0x10eafe(0xac)]()['constructor'](a126_0x516ba7)[_0x10eafe(0x8b)](_0x10eafe(0x97));});function a126_0x51b8(){const _0x4d9990=['__esModule','getRemoteHash','DEFAULT_GIT_USER_NAME','getProtocol','gitUrl','\x22\x20--allow-empty','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','11975220SATNTK','join','push\x20changes\x20to\x20%s','checkout','50ApSsyE','git\x20clone\x20-b\x20','createEmptyBranch','extractEmailFromCommitDescribe','commit','extractChangesFromCommitDescribe','\x20&&\x20git\x20add\x20','@flosum/utils','18TXhCIp','../providers/branches/dto/branch.dto','\x20&&\x20git\x20commit\x20-m\x20\x22','replace','4016229frdnsI','../../../core','name','then','8JmLUbp','defineProperty','logger','log','5SuKbiE','search','.temp','INITIAL_COMMIT','test','\x20&&\x20git\x20status','cd\x20','baseDir','ChildProcessUtils','./fs.internal','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','\x20&&\x20git\x20remote\x20add\x20origin\x20','1061621FoUHgG','(((.+)+)+)+$','908850LPzUrh','\x20&&\x20git\x20rev-parse\x20HEAD','3685580inqOJi','DEFAULT_GIT_USER_EMAIL','sha','__importDefault','\x20--single-branch\x20','_repoPath','add','Git','\x20--quiet','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','DEFAULT_CLONE_PATH','\x20&&\x20git\x20checkout\x20','spawnPromise','removeDir','Logger','\x20--refs','push','clone\x20repository\x20branch\x20%s\x20to\x20%s','toString','describe\x20commit\x20%s','git','498703hqzDwZ','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','checkout\x20to\x20%s','git\x20ls-remote\x20','\x20&&\x20git\x20push\x20origin\x20','\x20&&\x20git\x20init','52958FzQDZf','refs/heads/','../../shared/utils','split','default','commit\x20message\x20\x22%s\x22','extractMessageFromCommitDescribe'];a126_0x51b8=function(){return _0x4d9990;};return a126_0x51b8();}a126_0x516ba7();function a126_0x5b96(_0x21f2ad,_0x440128){const _0x20938c=a126_0x51b8();return a126_0x5b96=function(_0x516ba7,_0x18f4a5){_0x516ba7=_0x516ba7-0x83;let _0x51b811=_0x20938c[_0x516ba7];return _0x51b811;},a126_0x5b96(_0x21f2ad,_0x440128);}'use strict';var __importDefault=this&&this[a126_0x59a596(0x9d)]||function(_0x323374){const _0x30f548=a126_0x59a596;return _0x323374&&_0x323374[_0x30f548(0xbc)]?_0x323374:{'default':_0x323374};};Object[a126_0x59a596(0x87)](exports,a126_0x59a596(0xbc),{'value':!![]}),exports['Git']=void 0x0;const constants_1=require('../../../constants'),core_1=require(a126_0x59a596(0x83)),path_1=__importDefault(require('path')),branch_dto_1=require(a126_0x59a596(0xd0)),utils_1=require(a126_0x59a596(0xb7)),fs_internal_1=require(a126_0x59a596(0x93)),internal_utils_1=require('./internal.utils'),utils_2=require(a126_0x59a596(0xce));class Git{constructor(_0x12016c){const _0x54a2c7=a126_0x59a596;this[_0x54a2c7(0x9f)]=_0x12016c;}get['baseDir'](){const _0x572720=a126_0x59a596;return this[_0x572720(0x9f)];}async['setCredentials'](_0x16e058,_0x56a68a){const _0x478edc=a126_0x59a596;await utils_2[_0x478edc(0x92)][_0x478edc(0xa6)]('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22'+_0x16e058+_0x478edc(0xb0)+_0x56a68a+'\x22','');}async[a126_0x59a596(0xa0)](..._0x559bd1){const _0x38200b=a126_0x59a596;await utils_2[_0x38200b(0x92)][_0x38200b(0xa6)](_0x38200b(0x90)+this[_0x38200b(0x9f)]+_0x38200b(0xcd)+_0x559bd1[_0x38200b(0xc4)]('\x20'),'');}async['status'](){const _0x6582a9=a126_0x59a596;return utils_2['ChildProcessUtils'][_0x6582a9(0xa6)]('cd\x20'+this[_0x6582a9(0x9f)]+_0x6582a9(0x8f),'');}async[a126_0x59a596(0xcb)](_0x110d4e){const _0x318510=a126_0x59a596;Git[_0x318510(0x88)][_0x318510(0x89)](_0x318510(0xba),_0x110d4e),await utils_2[_0x318510(0x92)][_0x318510(0xa6)](_0x318510(0x90)+this[_0x318510(0x9f)]+_0x318510(0xd1)+_0x110d4e+'\x22','');}async['push'](_0x2823d4){const _0x3e183f=a126_0x59a596;Git[_0x3e183f(0x88)][_0x3e183f(0x89)](_0x3e183f(0xc5),_0x2823d4),await utils_2[_0x3e183f(0x92)][_0x3e183f(0xa6)]('cd\x20'+this['_repoPath']+_0x3e183f(0xb3)+_0x2823d4+_0x3e183f(0xa2),'');}async[a126_0x59a596(0xc6)](_0x5d67a6){const _0x499631=a126_0x59a596;Git[_0x499631(0x88)][_0x499631(0x89)](_0x499631(0xb1),_0x5d67a6),await utils_2['ChildProcessUtils'][_0x499631(0xa6)](_0x499631(0x90)+this[_0x499631(0x9f)]+_0x499631(0xa5)+_0x5d67a6,'');}async['getCurrentHash'](){const _0x311803=a126_0x59a596,_0x3432a1=await utils_2[_0x311803(0x92)][_0x311803(0xa6)](_0x311803(0x90)+this[_0x311803(0x9f)]+_0x311803(0x99),'');return _0x3432a1[_0x311803(0xd2)]('\x0a','');}async['describeCommit'](_0x5a672d){const _0x202a68=a126_0x59a596;Git[_0x202a68(0x88)][_0x202a68(0x89)](_0x202a68(0xad),_0x5a672d);const _0x49b97a=await utils_2[_0x202a68(0x92)][_0x202a68(0xa6)](_0x202a68(0x90)+this[_0x202a68(0x9f)]+_0x202a68(0x94)+_0x5a672d,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x49b97a),'email':(0x0,internal_utils_1[_0x202a68(0xca)])(_0x49b97a),'message':(0x0,internal_utils_1[_0x202a68(0xbb)])(_0x49b97a),'changes':(0x0,internal_utils_1[_0x202a68(0xcc)])(_0x49b97a)};}static async[a126_0x59a596(0xbd)](_0x26c82f,_0x51d73b){const _0x166503=a126_0x59a596,[_0x1bd551]=await utils_2['ChildProcessUtils'][_0x166503(0xa6)](_0x166503(0xb2)+_0x26c82f+'\x20'+_0x51d73b+_0x166503(0xa9),'')[_0x166503(0x85)](_0xc459a=>_0xc459a[_0x166503(0xd2)](/\s/g,'\x20')['split']('\x20'));return _0x1bd551;}static async['clone'](_0x53d565,_0x59e2b7,_0x259f9f){const _0x166c18=a126_0x59a596,_0x5075f=path_1[_0x166c18(0xb9)][_0x166c18(0xc4)](this[_0x166c18(0xa4)],_0x59e2b7),_0x3902ec=new Git(_0x5075f);return Git[_0x166c18(0x88)][_0x166c18(0x89)](_0x166c18(0xab),_0x259f9f,_0x5075f),await fs_internal_1['FS'][_0x166c18(0xa7)](_0x5075f),await utils_2['ChildProcessUtils'][_0x166c18(0xa6)](_0x166c18(0xc8)+_0x259f9f+_0x166c18(0x9e)+_0x53d565+'\x20'+_0x5075f,''),_0x3902ec;}static async['getRepositoryBranches'](_0x362197,_0x3b6a6f){const _0xb9e928=a126_0x59a596,_0x5a9575=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x1b655e=_0x362197[_0xb9e928(0xc0)][_0xb9e928(0xd2)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0xb9e928(0xbf)])(_0x362197[_0xb9e928(0xc0)])+'://'+_0x3b6a6f['getGitShellAuthorizationString']()+'@'),_0x54eb2b=await utils_2[_0xb9e928(0x92)][_0xb9e928(0xa6)](_0xb9e928(0xb2)+_0x1b655e,'');return _0x54eb2b[_0xb9e928(0xb8)]('\x0a')['filter'](_0x18736a=>_0x5a9575[_0xb9e928(0x8e)](_0x18736a))['map'](_0x109942=>{const _0x3d2868=_0xb9e928,[,_0x5e8c5e,_0x3c3091]=_0x109942['match'](_0x5a9575),_0x41a4ef=new branch_dto_1['BranchDto']();return _0x41a4ef[_0x3d2868(0x9c)]=_0x5e8c5e,_0x41a4ef['name']=_0x3c3091[_0x3d2868(0xd2)](_0x3d2868(0xb6),''),_0x41a4ef;});}static async[a126_0x59a596(0xc9)](_0x5be385,_0x265104,_0x4898c9,_0xb0115c){const _0x31b86d=a126_0x59a596,_0x8adac2=_0x5be385['gitUrl'][_0x31b86d(0xd2)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x5be385[_0x31b86d(0xc0)])+'://'+_0xb0115c['getGitShellAuthorizationString']()+'@'),_0x735655=path_1[_0x31b86d(0xb9)]['join'](this[_0x31b86d(0xa4)],_0x5be385[_0x31b86d(0x84)]);Git[_0x31b86d(0x88)][_0x31b86d(0x89)](_0x31b86d(0xc2),_0x5be385[_0x31b86d(0x84)],_0x265104,_0x735655),await fs_internal_1['FS']['removeDir'](_0x735655),await fs_internal_1['FS']['makeDir'](_0x735655);const _0x5ddaf0=new Git(_0x735655);await utils_2[_0x31b86d(0x92)][_0x31b86d(0xa6)](_0x31b86d(0x90)+_0x5ddaf0['baseDir']+_0x31b86d(0xb4),''),await utils_2['ChildProcessUtils'][_0x31b86d(0xa6)]('cd\x20'+_0x5ddaf0[_0x31b86d(0x91)]+_0x31b86d(0x95)+_0x8adac2,''),await _0x5ddaf0['setCredentials'](constants_1[_0x31b86d(0xbe)],constants_1[_0x31b86d(0x9b)]),await utils_2[_0x31b86d(0x92)][_0x31b86d(0xa6)](_0x31b86d(0x90)+_0x5ddaf0['baseDir']+'\x20&&\x20git\x20checkout\x20--orphan\x20'+_0x265104,''),await utils_2[_0x31b86d(0x92)][_0x31b86d(0xa6)](_0x31b86d(0x90)+_0x5ddaf0['baseDir']+_0x31b86d(0xd1)+(_0x4898c9||constants_1[_0x31b86d(0x8d)])+_0x31b86d(0xc1),''),await _0x5ddaf0[_0x31b86d(0xaa)](_0x265104),Git[_0x31b86d(0x88)]['log'](_0x31b86d(0xa3)),await fs_internal_1['FS'][_0x31b86d(0xa7)](_0x5ddaf0[_0x31b86d(0x91)]);}}exports[a126_0x59a596(0xa1)]=Git,Git[a126_0x59a596(0xa4)]=path_1['default'][a126_0x59a596(0xc4)](process['cwd'](),a126_0x59a596(0x8c),a126_0x59a596(0xae)),Git[a126_0x59a596(0x88)]=new core_1[(a126_0x59a596(0xa8))](Git[a126_0x59a596(0x84)]);