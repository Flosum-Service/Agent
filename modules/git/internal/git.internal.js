const a126_0xf07a9f=a126_0x435a;(function(_0x119cdb,_0x416472){const _0x1adb08=a126_0x435a,_0x4d29b4=_0x119cdb();while(!![]){try{const _0x50dfe5=-parseInt(_0x1adb08(0xbf))/0x1*(parseInt(_0x1adb08(0xd5))/0x2)+parseInt(_0x1adb08(0xd1))/0x3*(-parseInt(_0x1adb08(0xce))/0x4)+-parseInt(_0x1adb08(0xed))/0x5+parseInt(_0x1adb08(0xe2))/0x6+-parseInt(_0x1adb08(0xd7))/0x7*(parseInt(_0x1adb08(0xdc))/0x8)+-parseInt(_0x1adb08(0xe8))/0x9+-parseInt(_0x1adb08(0xe1))/0xa*(-parseInt(_0x1adb08(0xfe))/0xb);if(_0x50dfe5===_0x416472)break;else _0x4d29b4['push'](_0x4d29b4['shift']());}catch(_0xab07e){_0x4d29b4['push'](_0x4d29b4['shift']());}}}(a126_0x5b0a,0x936f1));const a126_0xe4e002=(function(){let _0x27f669=!![];return function(_0x3e3607,_0x57c736){const _0x19c77c=_0x27f669?function(){if(_0x57c736){const _0x34b802=_0x57c736['apply'](_0x3e3607,arguments);return _0x57c736=null,_0x34b802;}}:function(){};return _0x27f669=![],_0x19c77c;};}()),a126_0x60c966=a126_0xe4e002(this,function(){const _0x53bf43=a126_0x435a;return a126_0x60c966[_0x53bf43(0xf8)]()[_0x53bf43(0xe9)]('(((.+)+)+)+$')['toString']()[_0x53bf43(0x107)](a126_0x60c966)[_0x53bf43(0xe9)](_0x53bf43(0xeb));});function a126_0x435a(_0x658e8b,_0x2b773c){const _0x116162=a126_0x5b0a();return a126_0x435a=function(_0x60c966,_0xe4e002){_0x60c966=_0x60c966-0xbc;let _0x5b0a18=_0x116162[_0x60c966];return _0x5b0a18;},a126_0x435a(_0x658e8b,_0x2b773c);}a126_0x60c966();'use strict';function a126_0x5b0a(){const _0x44e0b5=['extractChangesFromCommitDescribe','status','\x20&&\x20git\x20rev-parse\x20HEAD','describe\x20commit\x20%s','DEFAULT_CLONE_PATH','871INBTAR','commit','removeDir','cd\x20','getRemoteHash','./internal.utils','default','refs/heads/','\x20--single-branch\x20','replace','git','INITIAL_COMMIT','\x20&&\x20git\x20commit\x20-m\x20\x22','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','extractMessageFromCommitDescribe','675652CZNgmS','name','clone\x20repository\x20branch\x20%s\x20to\x20%s','21dnVHeW','__importDefault','\x20&&\x20git\x20add\x20','ChildProcessUtils','1550YoAmLG','getRepositoryBranches','445459uVCBeU','baseDir','then','Git','__esModule','32iOyshX','git\x20ls-remote\x20','makeDir','getProtocol','match','10DhNQJM','2297622ETMpVK','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','_repoPath','getCurrentHash','gitUrl','setCredentials','3960432Tpwmpq','search','sha','(((.+)+)+)+$','\x20&&\x20git\x20status','4873815DpRqmj','commit\x20message\x20\x22%s\x22','getGitShellAuthorizationString','./fs.internal','\x20&&\x20git\x20remote\x20add\x20origin\x20','\x20&&\x20git\x20checkout\x20','spawnPromise','@flosum/utils','split','logger','defineProperty','toString','push','test','DEFAULT_GIT_USER_NAME','\x20&&\x20git\x20init','\x20--quiet','41224997ahVICZ','log','extractEmailFromCommitDescribe','cwd','://','push\x20changes\x20to\x20%s','clone','.temp','\x20--refs','constructor','DEFAULT_GIT_USER_EMAIL','map','join','Logger'];a126_0x5b0a=function(){return _0x44e0b5;};return a126_0x5b0a();}var __importDefault=this&&this[a126_0xf07a9f(0xd2)]||function(_0x22040b){return _0x22040b&&_0x22040b['__esModule']?_0x22040b:{'default':_0x22040b};};Object[a126_0xf07a9f(0xf7)](exports,a126_0xf07a9f(0xdb),{'value':!![]}),exports[a126_0xf07a9f(0xda)]=void 0x0;const constants_1=require('../../../constants'),core_1=require('../../../core'),path_1=__importDefault(require('path')),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require('../../shared/utils'),fs_internal_1=require(a126_0xf07a9f(0xf0)),internal_utils_1=require(a126_0xf07a9f(0xc4)),utils_2=require(a126_0xf07a9f(0xf4));class Git{constructor(_0xbe1d1f){this['_repoPath']=_0xbe1d1f;}get[a126_0xf07a9f(0xd8)](){return this['_repoPath'];}async[a126_0xf07a9f(0xe7)](_0x37832d,_0x25a562){const _0x101c1d=a126_0xf07a9f;await utils_2['ChildProcessUtils'][_0x101c1d(0xf3)](_0x101c1d(0xc2)+this[_0x101c1d(0xe4)]+_0x101c1d(0xe3)+_0x37832d+_0x101c1d(0xcc)+_0x25a562+'\x22','');}async['add'](..._0x418907){const _0x20d4ec=a126_0xf07a9f;await utils_2[_0x20d4ec(0xd4)]['spawnPromise'](_0x20d4ec(0xc2)+this[_0x20d4ec(0xe4)]+_0x20d4ec(0xd3)+_0x418907[_0x20d4ec(0x10a)]('\x20'),'');}async[a126_0xf07a9f(0x10d)](){const _0xbb97be=a126_0xf07a9f;return utils_2[_0xbb97be(0xd4)][_0xbb97be(0xf3)]('cd\x20'+this['_repoPath']+_0xbb97be(0xec),'');}async[a126_0xf07a9f(0xc0)](_0x3c0148){const _0x16a70d=a126_0xf07a9f;Git[_0x16a70d(0xf6)][_0x16a70d(0xff)](_0x16a70d(0xee),_0x3c0148),await utils_2[_0x16a70d(0xd4)][_0x16a70d(0xf3)]('cd\x20'+this[_0x16a70d(0xe4)]+_0x16a70d(0xcb)+_0x3c0148+'\x22','');}async[a126_0xf07a9f(0xf9)](_0x43e25b){const _0x2ad174=a126_0xf07a9f;Git[_0x2ad174(0xf6)]['log'](_0x2ad174(0x103),_0x43e25b),await utils_2['ChildProcessUtils'][_0x2ad174(0xf3)]('cd\x20'+this[_0x2ad174(0xe4)]+'\x20&&\x20git\x20push\x20origin\x20'+_0x43e25b+_0x2ad174(0xfd),'');}async['checkout'](_0x1a30ba){const _0x1c6f8b=a126_0xf07a9f;Git[_0x1c6f8b(0xf6)][_0x1c6f8b(0xff)]('checkout\x20to\x20%s',_0x1a30ba),await utils_2[_0x1c6f8b(0xd4)][_0x1c6f8b(0xf3)](_0x1c6f8b(0xc2)+this[_0x1c6f8b(0xe4)]+_0x1c6f8b(0xf2)+_0x1a30ba,'');}async[a126_0xf07a9f(0xe5)](){const _0x58a70c=a126_0xf07a9f,_0xe665c1=await utils_2[_0x58a70c(0xd4)]['spawnPromise'](_0x58a70c(0xc2)+this[_0x58a70c(0xe4)]+_0x58a70c(0xbc),'');return _0xe665c1[_0x58a70c(0xc8)]('\x0a','');}async['describeCommit'](_0x5863f1){const _0x193140=a126_0xf07a9f;Git[_0x193140(0xf6)][_0x193140(0xff)](_0x193140(0xbd),_0x5863f1);const _0x54f2d3=await utils_2[_0x193140(0xd4)][_0x193140(0xf3)](_0x193140(0xc2)+this['_repoPath']+'\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20'+_0x5863f1,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x54f2d3),'email':(0x0,internal_utils_1[_0x193140(0x100)])(_0x54f2d3),'message':(0x0,internal_utils_1[_0x193140(0xcd)])(_0x54f2d3),'changes':(0x0,internal_utils_1[_0x193140(0x10c)])(_0x54f2d3)};}static async[a126_0xf07a9f(0xc3)](_0xe9d72,_0x1a0a89){const _0x362bc3=a126_0xf07a9f,[_0x19c01d]=await utils_2[_0x362bc3(0xd4)][_0x362bc3(0xf3)]('git\x20ls-remote\x20'+_0xe9d72+'\x20'+_0x1a0a89+_0x362bc3(0x106),'')[_0x362bc3(0xd9)](_0x516998=>_0x516998[_0x362bc3(0xc8)](/\s/g,'\x20')['split']('\x20'));return _0x19c01d;}static async[a126_0xf07a9f(0x104)](_0x371d3d,_0x1d14f6,_0x53b19b){const _0x5bbd4d=a126_0xf07a9f,_0x42e703=path_1[_0x5bbd4d(0xc5)]['join'](this['DEFAULT_CLONE_PATH'],_0x1d14f6),_0x21d591=new Git(_0x42e703);return Git[_0x5bbd4d(0xf6)][_0x5bbd4d(0xff)](_0x5bbd4d(0xd0),_0x53b19b,_0x42e703),await fs_internal_1['FS'][_0x5bbd4d(0xc1)](_0x42e703),await utils_2[_0x5bbd4d(0xd4)][_0x5bbd4d(0xf3)]('git\x20clone\x20-b\x20'+_0x53b19b+_0x5bbd4d(0xc7)+_0x371d3d+'\x20'+_0x42e703,''),_0x21d591;}static async[a126_0xf07a9f(0xd6)](_0x931e7f,_0x15d410){const _0x5125b7=a126_0xf07a9f,_0x59508b=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x27dc99=_0x931e7f[_0x5125b7(0xe6)][_0x5125b7(0xc8)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x5125b7(0xdf)])(_0x931e7f[_0x5125b7(0xe6)])+_0x5125b7(0x102)+_0x15d410[_0x5125b7(0xef)]()+'@'),_0x3d5904=await utils_2[_0x5125b7(0xd4)][_0x5125b7(0xf3)](_0x5125b7(0xdd)+_0x27dc99,'');return _0x3d5904[_0x5125b7(0xf5)]('\x0a')['filter'](_0x179430=>_0x59508b[_0x5125b7(0xfa)](_0x179430))[_0x5125b7(0x109)](_0x343641=>{const _0x1f6fd5=_0x5125b7,[,_0x10ec58,_0x2429d4]=_0x343641[_0x1f6fd5(0xe0)](_0x59508b),_0xa7034c=new branch_dto_1['BranchDto']();return _0xa7034c[_0x1f6fd5(0xea)]=_0x10ec58,_0xa7034c[_0x1f6fd5(0xcf)]=_0x2429d4[_0x1f6fd5(0xc8)](_0x1f6fd5(0xc6),''),_0xa7034c;});}static async['createEmptyBranch'](_0x511e80,_0x13b1cc,_0x31a3b9,_0x4153ad){const _0x141fad=a126_0xf07a9f,_0x3a8c14=_0x511e80['gitUrl'][_0x141fad(0xc8)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x141fad(0xdf)])(_0x511e80[_0x141fad(0xe6)])+_0x141fad(0x102)+_0x4153ad[_0x141fad(0xef)]()+'@'),_0xfcad23=path_1[_0x141fad(0xc5)][_0x141fad(0x10a)](this[_0x141fad(0xbe)],_0x511e80[_0x141fad(0xcf)]);Git['logger'][_0x141fad(0xff)]('create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]',_0x511e80[_0x141fad(0xcf)],_0x13b1cc,_0xfcad23),await fs_internal_1['FS'][_0x141fad(0xc1)](_0xfcad23),await fs_internal_1['FS'][_0x141fad(0xde)](_0xfcad23);const _0x4147b8=new Git(_0xfcad23);await utils_2[_0x141fad(0xd4)][_0x141fad(0xf3)](_0x141fad(0xc2)+_0x4147b8[_0x141fad(0xd8)]+_0x141fad(0xfc),''),await utils_2[_0x141fad(0xd4)][_0x141fad(0xf3)](_0x141fad(0xc2)+_0x4147b8[_0x141fad(0xd8)]+_0x141fad(0xf1)+_0x3a8c14,''),await _0x4147b8[_0x141fad(0xe7)](constants_1[_0x141fad(0xfb)],constants_1[_0x141fad(0x108)]),await utils_2['ChildProcessUtils'][_0x141fad(0xf3)](_0x141fad(0xc2)+_0x4147b8[_0x141fad(0xd8)]+'\x20&&\x20git\x20checkout\x20--orphan\x20'+_0x13b1cc,''),await utils_2[_0x141fad(0xd4)][_0x141fad(0xf3)](_0x141fad(0xc2)+_0x4147b8[_0x141fad(0xd8)]+_0x141fad(0xcb)+(_0x31a3b9||constants_1[_0x141fad(0xca)])+'\x22\x20--allow-empty',''),await _0x4147b8['push'](_0x13b1cc),Git[_0x141fad(0xf6)][_0x141fad(0xff)]('clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch'),await fs_internal_1['FS'][_0x141fad(0xc1)](_0x4147b8[_0x141fad(0xd8)]);}}exports['Git']=Git,Git[a126_0xf07a9f(0xbe)]=path_1[a126_0xf07a9f(0xc5)][a126_0xf07a9f(0x10a)](process[a126_0xf07a9f(0x101)](),a126_0xf07a9f(0x105),a126_0xf07a9f(0xc9)),Git['logger']=new core_1[(a126_0xf07a9f(0x10b))](Git[a126_0xf07a9f(0xcf)]);