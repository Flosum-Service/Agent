const a126_0x25d587=a126_0x7e7a;(function(_0x2ea1c0,_0x347804){const _0x2e5c07=a126_0x7e7a,_0x1cf505=_0x2ea1c0();while(!![]){try{const _0x3b9545=-parseInt(_0x2e5c07(0x14d))/0x1*(-parseInt(_0x2e5c07(0x14e))/0x2)+-parseInt(_0x2e5c07(0x18c))/0x3*(parseInt(_0x2e5c07(0x18d))/0x4)+-parseInt(_0x2e5c07(0x165))/0x5+-parseInt(_0x2e5c07(0x17e))/0x6+parseInt(_0x2e5c07(0x16f))/0x7+parseInt(_0x2e5c07(0x182))/0x8*(parseInt(_0x2e5c07(0x159))/0x9)+parseInt(_0x2e5c07(0x177))/0xa*(parseInt(_0x2e5c07(0x158))/0xb);if(_0x3b9545===_0x347804)break;else _0x1cf505['push'](_0x1cf505['shift']());}catch(_0x3e758a){_0x1cf505['push'](_0x1cf505['shift']());}}}(a126_0x3b9a,0x6423b));function a126_0x3b9a(){const _0x16fed0=['cd\x20','getRemoteHash','replace','_repoPath','1850682RZXkyl','defineProperty','../../../constants','spawnPromise','1264GOHxlM','cwd','\x20--refs','commit','DEFAULT_CLONE_PATH','git','logger','describeCommit','constructor','getCurrentHash','3045hSsrEm','1348nAuClg','makeDir','Git','\x20&&\x20git\x20commit\x20-m\x20\x22','clone','gitUrl','refs/heads/','\x20&&\x20git\x20rev-parse\x20HEAD','../../shared/utils','baseDir','name','../providers/branches/dto/branch.dto','INITIAL_COMMIT','log','./fs.internal','Logger','BranchDto','map','\x20&&\x20git\x20add\x20','path','\x20&&\x20git\x20remote\x20add\x20origin\x20','\x20--single-branch\x20','git\x20clone\x20-b\x20','push','14401OyrPzH','44ArrRpm','.temp','\x20--quiet','filter','__importDefault','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','DEFAULT_GIT_USER_NAME','__esModule','git\x20ls-remote\x20','1098955BNTLHk','20754NYatrD','split','DEFAULT_GIT_USER_EMAIL','getRepositoryBranches','\x20&&\x20git\x20init','checkout','extractMessageFromCommitDescribe','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','\x20&&\x20git\x20status','add','://','getGitShellAuthorizationString','4085755lYhVKg','sha','createEmptyBranch','describe\x20commit\x20%s','(((.+)+)+)+$','getProtocol','removeDir','\x20&&\x20git\x20checkout\x20','./internal.utils','search','5579238GPeRzH','toString','default','checkout\x20to\x20%s','test','match','ChildProcessUtils','join','40NXnjoA','setCredentials','\x20&&\x20git\x20checkout\x20--orphan\x20'];a126_0x3b9a=function(){return _0x16fed0;};return a126_0x3b9a();}const a126_0x5d82de=(function(){let _0x440250=!![];return function(_0x329269,_0x572d8b){const _0x218b5b=_0x440250?function(){if(_0x572d8b){const _0x204638=_0x572d8b['apply'](_0x329269,arguments);return _0x572d8b=null,_0x204638;}}:function(){};return _0x440250=![],_0x218b5b;};}()),a126_0xe83acb=a126_0x5d82de(this,function(){const _0x2639cc=a126_0x7e7a;return a126_0xe83acb[_0x2639cc(0x170)]()[_0x2639cc(0x16e)](_0x2639cc(0x169))[_0x2639cc(0x170)]()[_0x2639cc(0x18a)](a126_0xe83acb)[_0x2639cc(0x16e)](_0x2639cc(0x169));});a126_0xe83acb();'use strict';var __importDefault=this&&this[a126_0x25d587(0x152)]||function(_0x52d0d5){const _0x6a4ff6=a126_0x25d587;return _0x52d0d5&&_0x52d0d5[_0x6a4ff6(0x156)]?_0x52d0d5:{'default':_0x52d0d5};};Object[a126_0x25d587(0x17f)](exports,'__esModule',{'value':!![]}),exports['Git']=void 0x0;const constants_1=require(a126_0x25d587(0x180)),core_1=require('../../../core'),path_1=__importDefault(require(a126_0x25d587(0x1a0))),branch_dto_1=require(a126_0x25d587(0x198)),utils_1=require(a126_0x25d587(0x195)),fs_internal_1=require(a126_0x25d587(0x19b)),internal_utils_1=require(a126_0x25d587(0x16d)),utils_2=require('@flosum/utils');function a126_0x7e7a(_0x294374,_0x56636d){const _0x57bbda=a126_0x3b9a();return a126_0x7e7a=function(_0xe83acb,_0x5d82de){_0xe83acb=_0xe83acb-0x149;let _0x3b9a8c=_0x57bbda[_0xe83acb];return _0x3b9a8c;},a126_0x7e7a(_0x294374,_0x56636d);}class Git{constructor(_0x4b5326){const _0x482233=a126_0x25d587;this[_0x482233(0x17d)]=_0x4b5326;}get[a126_0x25d587(0x196)](){const _0x547438=a126_0x25d587;return this[_0x547438(0x17d)];}async[a126_0x25d587(0x178)](_0x4d743b,_0x5b1116){const _0x5e2db9=a126_0x25d587;await utils_2[_0x5e2db9(0x175)][_0x5e2db9(0x181)](_0x5e2db9(0x17a)+this['_repoPath']+_0x5e2db9(0x160)+_0x4d743b+'\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'+_0x5b1116+'\x22','');}async[a126_0x25d587(0x162)](..._0x5bf0b9){const _0x214200=a126_0x25d587;await utils_2[_0x214200(0x175)][_0x214200(0x181)](_0x214200(0x17a)+this['_repoPath']+_0x214200(0x19f)+_0x5bf0b9['join']('\x20'),'');}async['status'](){const _0x2ca1c7=a126_0x25d587;return utils_2[_0x2ca1c7(0x175)][_0x2ca1c7(0x181)](_0x2ca1c7(0x17a)+this[_0x2ca1c7(0x17d)]+_0x2ca1c7(0x161),'');}async[a126_0x25d587(0x185)](_0x4d7408){const _0x85b27a=a126_0x25d587;Git[_0x85b27a(0x188)][_0x85b27a(0x19a)]('commit\x20message\x20\x22%s\x22',_0x4d7408),await utils_2[_0x85b27a(0x175)][_0x85b27a(0x181)](_0x85b27a(0x17a)+this['_repoPath']+_0x85b27a(0x190)+_0x4d7408+'\x22','');}async[a126_0x25d587(0x14c)](_0x1e46c8){const _0xfe2b1d=a126_0x25d587;Git['logger']['log']('push\x20changes\x20to\x20%s',_0x1e46c8),await utils_2[_0xfe2b1d(0x175)][_0xfe2b1d(0x181)](_0xfe2b1d(0x17a)+this[_0xfe2b1d(0x17d)]+'\x20&&\x20git\x20push\x20origin\x20'+_0x1e46c8+_0xfe2b1d(0x150),'');}async[a126_0x25d587(0x15e)](_0x14178e){const _0x31cf6f=a126_0x25d587;Git[_0x31cf6f(0x188)][_0x31cf6f(0x19a)](_0x31cf6f(0x172),_0x14178e),await utils_2[_0x31cf6f(0x175)]['spawnPromise'](_0x31cf6f(0x17a)+this[_0x31cf6f(0x17d)]+_0x31cf6f(0x16c)+_0x14178e,'');}async[a126_0x25d587(0x18b)](){const _0x3787d4=a126_0x25d587,_0xe302f2=await utils_2['ChildProcessUtils'][_0x3787d4(0x181)]('cd\x20'+this[_0x3787d4(0x17d)]+_0x3787d4(0x194),'');return _0xe302f2[_0x3787d4(0x17c)]('\x0a','');}async[a126_0x25d587(0x189)](_0x1e484b){const _0x31687a=a126_0x25d587;Git[_0x31687a(0x188)][_0x31687a(0x19a)](_0x31687a(0x168),_0x1e484b);const _0x3aa355=await utils_2['ChildProcessUtils'][_0x31687a(0x181)](_0x31687a(0x17a)+this[_0x31687a(0x17d)]+'\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20'+_0x1e484b,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x3aa355),'email':(0x0,internal_utils_1['extractEmailFromCommitDescribe'])(_0x3aa355),'message':(0x0,internal_utils_1[_0x31687a(0x15f)])(_0x3aa355),'changes':(0x0,internal_utils_1['extractChangesFromCommitDescribe'])(_0x3aa355)};}static async[a126_0x25d587(0x17b)](_0x4c6f68,_0x47ace0){const _0x415959=a126_0x25d587,[_0xefeb0d]=await utils_2[_0x415959(0x175)][_0x415959(0x181)](_0x415959(0x157)+_0x4c6f68+'\x20'+_0x47ace0+_0x415959(0x184),'')['then'](_0xeb7076=>_0xeb7076[_0x415959(0x17c)](/\s/g,'\x20')[_0x415959(0x15a)]('\x20'));return _0xefeb0d;}static async[a126_0x25d587(0x191)](_0x27ac43,_0x356fa0,_0x57ce3a){const _0xf7e1ea=a126_0x25d587,_0x3c4820=path_1[_0xf7e1ea(0x171)][_0xf7e1ea(0x176)](this[_0xf7e1ea(0x186)],_0x356fa0),_0x3e07b1=new Git(_0x3c4820);return Git['logger']['log']('clone\x20repository\x20branch\x20%s\x20to\x20%s',_0x57ce3a,_0x3c4820),await fs_internal_1['FS'][_0xf7e1ea(0x16b)](_0x3c4820),await utils_2[_0xf7e1ea(0x175)][_0xf7e1ea(0x181)](_0xf7e1ea(0x14b)+_0x57ce3a+_0xf7e1ea(0x14a)+_0x27ac43+'\x20'+_0x3c4820,''),_0x3e07b1;}static async[a126_0x25d587(0x15c)](_0x2b7253,_0x43e870){const _0x29a55c=a126_0x25d587,_0x1edf99=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x3fda0d=_0x2b7253[_0x29a55c(0x192)][_0x29a55c(0x17c)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x29a55c(0x16a)])(_0x2b7253[_0x29a55c(0x192)])+_0x29a55c(0x163)+_0x43e870[_0x29a55c(0x164)]()+'@'),_0x5c9115=await utils_2[_0x29a55c(0x175)][_0x29a55c(0x181)]('git\x20ls-remote\x20'+_0x3fda0d,'');return _0x5c9115[_0x29a55c(0x15a)]('\x0a')[_0x29a55c(0x151)](_0x405e07=>_0x1edf99[_0x29a55c(0x173)](_0x405e07))[_0x29a55c(0x19e)](_0x1f38d3=>{const _0x1e0811=_0x29a55c,[,_0x9389b2,_0x56bcae]=_0x1f38d3[_0x1e0811(0x174)](_0x1edf99),_0x37ef3c=new branch_dto_1[(_0x1e0811(0x19d))]();return _0x37ef3c[_0x1e0811(0x166)]=_0x9389b2,_0x37ef3c[_0x1e0811(0x197)]=_0x56bcae['replace'](_0x1e0811(0x193),''),_0x37ef3c;});}static async[a126_0x25d587(0x167)](_0x1d711b,_0x2abbf7,_0x25f0ab,_0x465695){const _0x514684=a126_0x25d587,_0x5c61b8=_0x1d711b[_0x514684(0x192)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x514684(0x16a)])(_0x1d711b['gitUrl'])+_0x514684(0x163)+_0x465695[_0x514684(0x164)]()+'@'),_0x20b1bc=path_1[_0x514684(0x171)][_0x514684(0x176)](this['DEFAULT_CLONE_PATH'],_0x1d711b[_0x514684(0x197)]);Git[_0x514684(0x188)][_0x514684(0x19a)](_0x514684(0x153),_0x1d711b[_0x514684(0x197)],_0x2abbf7,_0x20b1bc),await fs_internal_1['FS'][_0x514684(0x16b)](_0x20b1bc),await fs_internal_1['FS'][_0x514684(0x18e)](_0x20b1bc);const _0x53e3bc=new Git(_0x20b1bc);await utils_2['ChildProcessUtils'][_0x514684(0x181)](_0x514684(0x17a)+_0x53e3bc['baseDir']+_0x514684(0x15d),''),await utils_2[_0x514684(0x175)][_0x514684(0x181)]('cd\x20'+_0x53e3bc['baseDir']+_0x514684(0x149)+_0x5c61b8,''),await _0x53e3bc['setCredentials'](constants_1[_0x514684(0x155)],constants_1[_0x514684(0x15b)]),await utils_2[_0x514684(0x175)][_0x514684(0x181)]('cd\x20'+_0x53e3bc[_0x514684(0x196)]+_0x514684(0x179)+_0x2abbf7,''),await utils_2[_0x514684(0x175)][_0x514684(0x181)]('cd\x20'+_0x53e3bc[_0x514684(0x196)]+_0x514684(0x190)+(_0x25f0ab||constants_1[_0x514684(0x199)])+'\x22\x20--allow-empty',''),await _0x53e3bc[_0x514684(0x14c)](_0x2abbf7),Git[_0x514684(0x188)]['log'](_0x514684(0x154)),await fs_internal_1['FS'][_0x514684(0x16b)](_0x53e3bc['baseDir']);}}exports[a126_0x25d587(0x18f)]=Git,Git[a126_0x25d587(0x186)]=path_1[a126_0x25d587(0x171)][a126_0x25d587(0x176)](process[a126_0x25d587(0x183)](),a126_0x25d587(0x14f),a126_0x25d587(0x187)),Git[a126_0x25d587(0x188)]=new core_1[(a126_0x25d587(0x19c))](Git[a126_0x25d587(0x197)]);