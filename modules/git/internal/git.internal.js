const a126_0x3633ea=a126_0x50ad;(function(_0x218d7,_0x5d0e39){const _0x4ba73d=a126_0x50ad,_0x2ce86a=_0x218d7();while(!![]){try{const _0x165f80=parseInt(_0x4ba73d(0x11b))/0x1*(-parseInt(_0x4ba73d(0x148))/0x2)+-parseInt(_0x4ba73d(0x152))/0x3*(parseInt(_0x4ba73d(0x133))/0x4)+-parseInt(_0x4ba73d(0x150))/0x5+-parseInt(_0x4ba73d(0x144))/0x6+-parseInt(_0x4ba73d(0x16d))/0x7*(parseInt(_0x4ba73d(0x12f))/0x8)+-parseInt(_0x4ba73d(0x162))/0x9*(parseInt(_0x4ba73d(0x120))/0xa)+parseInt(_0x4ba73d(0x15d))/0xb;if(_0x165f80===_0x5d0e39)break;else _0x2ce86a['push'](_0x2ce86a['shift']());}catch(_0x2af1e3){_0x2ce86a['push'](_0x2ce86a['shift']());}}}(a126_0x45ef,0x854eb));function a126_0x50ad(_0x36c7c8,_0x45142a){const _0x2a9fe7=a126_0x45ef();return a126_0x50ad=function(_0x3af852,_0x5c42dd){_0x3af852=_0x3af852-0x11b;let _0x45ef18=_0x2a9fe7[_0x3af852];return _0x45ef18;},a126_0x50ad(_0x36c7c8,_0x45142a);}const a126_0x5c42dd=(function(){let _0x5a011d=!![];return function(_0x274d75,_0x595b89){const _0x5ac662=_0x5a011d?function(){const _0x34e747=a126_0x50ad;if(_0x595b89){const _0x216736=_0x595b89[_0x34e747(0x15b)](_0x274d75,arguments);return _0x595b89=null,_0x216736;}}:function(){};return _0x5a011d=![],_0x5ac662;};}()),a126_0x3af852=a126_0x5c42dd(this,function(){const _0x4df3a0=a126_0x50ad;return a126_0x3af852['toString']()[_0x4df3a0(0x12d)](_0x4df3a0(0x14d))[_0x4df3a0(0x12e)]()[_0x4df3a0(0x13e)](a126_0x3af852)[_0x4df3a0(0x12d)](_0x4df3a0(0x14d));});a126_0x3af852();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1c5db7){const _0x253ae0=a126_0x50ad;return _0x1c5db7&&_0x1c5db7[_0x253ae0(0x12c)]?_0x1c5db7:{'default':_0x1c5db7};};Object[a126_0x3633ea(0x14a)](exports,a126_0x3633ea(0x12c),{'value':!![]}),exports[a126_0x3633ea(0x154)]=void 0x0;const constants_1=require(a126_0x3633ea(0x13b)),core_1=require(a126_0x3633ea(0x143)),path_1=__importDefault(require(a126_0x3633ea(0x159))),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require(a126_0x3633ea(0x13d)),fs_internal_1=require('./fs.internal'),internal_utils_1=require(a126_0x3633ea(0x122)),utils_2=require('@flosum/utils');class Git{constructor(_0x504006){const _0x55e1bf=a126_0x3633ea;this[_0x55e1bf(0x167)]=_0x504006;}get[a126_0x3633ea(0x16b)](){return this['_repoPath'];}async[a126_0x3633ea(0x169)](_0xe5a44,_0x5211e8){const _0x1e1d6e=a126_0x3633ea;await utils_2[_0x1e1d6e(0x147)][_0x1e1d6e(0x11e)](_0x1e1d6e(0x13f)+this[_0x1e1d6e(0x167)]+_0x1e1d6e(0x141)+_0xe5a44+_0x1e1d6e(0x146)+_0x5211e8+'\x22','');}async[a126_0x3633ea(0x149)](..._0x47b2a4){const _0x5b1346=a126_0x3633ea;await utils_2[_0x5b1346(0x147)][_0x5b1346(0x11e)](_0x5b1346(0x13f)+this[_0x5b1346(0x167)]+_0x5b1346(0x124)+_0x47b2a4[_0x5b1346(0x129)]('\x20'),'');}async[a126_0x3633ea(0x145)](){const _0x1b684e=a126_0x3633ea;return utils_2[_0x1b684e(0x147)][_0x1b684e(0x11e)](_0x1b684e(0x13f)+this[_0x1b684e(0x167)]+_0x1b684e(0x16f),'');}async['commit'](_0x97af75){const _0x2c2ed7=a126_0x3633ea;Git[_0x2c2ed7(0x138)][_0x2c2ed7(0x13c)](_0x2c2ed7(0x16c),_0x97af75),await utils_2[_0x2c2ed7(0x147)][_0x2c2ed7(0x11e)]('cd\x20'+this[_0x2c2ed7(0x167)]+_0x2c2ed7(0x155)+_0x97af75+'\x22','');}async[a126_0x3633ea(0x157)](_0x3e2b0c){const _0x1bdb4b=a126_0x3633ea;Git['logger'][_0x1bdb4b(0x13c)]('push\x20changes\x20to\x20%s',_0x3e2b0c),await utils_2[_0x1bdb4b(0x147)][_0x1bdb4b(0x11e)](_0x1bdb4b(0x13f)+this[_0x1bdb4b(0x167)]+'\x20&&\x20git\x20push\x20origin\x20'+_0x3e2b0c+_0x1bdb4b(0x158),'');}async[a126_0x3633ea(0x14c)](_0x2f7607){const _0x307be6=a126_0x3633ea;Git[_0x307be6(0x138)][_0x307be6(0x13c)]('checkout\x20to\x20%s',_0x2f7607),await utils_2[_0x307be6(0x147)][_0x307be6(0x11e)]('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20checkout\x20'+_0x2f7607,'');}async['getCurrentHash'](){const _0x5113ce=a126_0x3633ea,_0x4a7aaa=await utils_2[_0x5113ce(0x147)]['spawnPromise'](_0x5113ce(0x13f)+this['_repoPath']+_0x5113ce(0x121),'');return _0x4a7aaa['replace']('\x0a','');}async[a126_0x3633ea(0x128)](_0x2cd88c){const _0x435b8f=a126_0x3633ea;Git['logger'][_0x435b8f(0x13c)](_0x435b8f(0x13a),_0x2cd88c);const _0x2458c6=await utils_2[_0x435b8f(0x147)][_0x435b8f(0x11e)](_0x435b8f(0x13f)+this['_repoPath']+_0x435b8f(0x130)+_0x2cd88c,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x2458c6),'email':(0x0,internal_utils_1[_0x435b8f(0x140)])(_0x2458c6),'message':(0x0,internal_utils_1[_0x435b8f(0x12b)])(_0x2458c6),'changes':(0x0,internal_utils_1[_0x435b8f(0x14f)])(_0x2458c6)};}static async[a126_0x3633ea(0x163)](_0x3112b9,_0x1d67bd){const _0x3620c4=a126_0x3633ea,[_0x3e77da]=await utils_2['ChildProcessUtils'][_0x3620c4(0x11e)](_0x3620c4(0x15e)+_0x3112b9+'\x20'+_0x1d67bd+_0x3620c4(0x136),'')['then'](_0x175d1b=>_0x175d1b[_0x3620c4(0x12a)](/\s/g,'\x20')['split']('\x20'));return _0x3e77da;}static async['clone'](_0x56fcae,_0x408374,_0x4c0955){const _0x1989c1=a126_0x3633ea,_0x3dd39b=path_1['default'][_0x1989c1(0x129)](this['DEFAULT_CLONE_PATH'],_0x408374),_0x3de65b=new Git(_0x3dd39b);return Git[_0x1989c1(0x138)][_0x1989c1(0x13c)](_0x1989c1(0x11d),_0x4c0955,_0x3dd39b),await fs_internal_1['FS'][_0x1989c1(0x164)](_0x3dd39b),await utils_2[_0x1989c1(0x147)][_0x1989c1(0x11e)](_0x1989c1(0x131)+_0x4c0955+_0x1989c1(0x132)+_0x56fcae+'\x20'+_0x3dd39b,''),_0x3de65b;}static async['getRepositoryBranches'](_0x1ac617,_0x480417){const _0x453c2e=a126_0x3633ea,_0x526c30=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x2fc391=_0x1ac617['gitUrl'][_0x453c2e(0x12a)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x453c2e(0x16a)])(_0x1ac617[_0x453c2e(0x166)])+_0x453c2e(0x156)+_0x480417['getGitShellAuthorizationString']()+'@'),_0x1dd0cd=await utils_2['ChildProcessUtils'][_0x453c2e(0x11e)](_0x453c2e(0x15e)+_0x2fc391,'');return _0x1dd0cd[_0x453c2e(0x137)]('\x0a')[_0x453c2e(0x14e)](_0x2aabd8=>_0x526c30[_0x453c2e(0x16e)](_0x2aabd8))[_0x453c2e(0x123)](_0x43de4d=>{const _0x26a831=_0x453c2e,[,_0x4b4f95,_0x58a990]=_0x43de4d[_0x26a831(0x165)](_0x526c30),_0xa36ff2=new branch_dto_1[(_0x26a831(0x139))]();return _0xa36ff2[_0x26a831(0x142)]=_0x4b4f95,_0xa36ff2[_0x26a831(0x151)]=_0x58a990[_0x26a831(0x12a)](_0x26a831(0x15a),''),_0xa36ff2;});}static async[a126_0x3633ea(0x170)](_0x329dd4,_0x2ab8d7,_0x3435d8,_0x2fea85){const _0x532605=a126_0x3633ea,_0x7c1308=_0x329dd4['gitUrl'][_0x532605(0x12a)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x532605(0x16a)])(_0x329dd4[_0x532605(0x166)])+_0x532605(0x156)+_0x2fea85[_0x532605(0x11c)]()+'@'),_0x173c02=path_1['default']['join'](this[_0x532605(0x135)],_0x329dd4[_0x532605(0x151)]);Git[_0x532605(0x138)]['log'](_0x532605(0x126),_0x329dd4[_0x532605(0x151)],_0x2ab8d7,_0x173c02),await fs_internal_1['FS'][_0x532605(0x164)](_0x173c02),await fs_internal_1['FS'][_0x532605(0x127)](_0x173c02);const _0x42cd7e=new Git(_0x173c02);await utils_2[_0x532605(0x147)][_0x532605(0x11e)](_0x532605(0x13f)+_0x42cd7e['baseDir']+'\x20&&\x20git\x20init',''),await utils_2[_0x532605(0x147)][_0x532605(0x11e)](_0x532605(0x13f)+_0x42cd7e[_0x532605(0x16b)]+_0x532605(0x15c)+_0x7c1308,''),await _0x42cd7e['setCredentials'](constants_1[_0x532605(0x11f)],constants_1[_0x532605(0x134)]),await utils_2[_0x532605(0x147)][_0x532605(0x11e)](_0x532605(0x13f)+_0x42cd7e['baseDir']+'\x20&&\x20git\x20checkout\x20--orphan\x20'+_0x2ab8d7,''),await utils_2[_0x532605(0x147)][_0x532605(0x11e)](_0x532605(0x13f)+_0x42cd7e['baseDir']+_0x532605(0x155)+(_0x3435d8||constants_1[_0x532605(0x125)])+_0x532605(0x168),''),await _0x42cd7e[_0x532605(0x157)](_0x2ab8d7),Git[_0x532605(0x138)][_0x532605(0x13c)](_0x532605(0x14b)),await fs_internal_1['FS'][_0x532605(0x164)](_0x42cd7e[_0x532605(0x16b)]);}}function a126_0x45ef(){const _0x48582e=['status','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','ChildProcessUtils','248zYitFU','add','defineProperty','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','checkout','(((.+)+)+)+$','filter','extractChangesFromCommitDescribe','1153595dFHdDi','name','31251pwrCsL','cwd','Git','\x20&&\x20git\x20commit\x20-m\x20\x22','://','push','\x20--quiet','path','refs/heads/','apply','\x20&&\x20git\x20remote\x20add\x20origin\x20','26393279hsYvvP','git\x20ls-remote\x20','default','Logger','git','108EulsnN','getRemoteHash','removeDir','match','gitUrl','_repoPath','\x22\x20--allow-empty','setCredentials','getProtocol','baseDir','commit\x20message\x20\x22%s\x22','175021pVQFOT','test','\x20&&\x20git\x20status','createEmptyBranch','313HoWIFh','getGitShellAuthorizationString','clone\x20repository\x20branch\x20%s\x20to\x20%s','spawnPromise','DEFAULT_GIT_USER_NAME','186570BGNFUP','\x20&&\x20git\x20rev-parse\x20HEAD','./internal.utils','map','\x20&&\x20git\x20add\x20','INITIAL_COMMIT','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','makeDir','describeCommit','join','replace','extractMessageFromCommitDescribe','__esModule','search','toString','344oIFhIE','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','git\x20clone\x20-b\x20','\x20--single-branch\x20','68cyGExH','DEFAULT_GIT_USER_EMAIL','DEFAULT_CLONE_PATH','\x20--refs','split','logger','BranchDto','describe\x20commit\x20%s','../../../constants','log','../../shared/utils','constructor','cd\x20','extractEmailFromCommitDescribe','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','sha','../../../core','646374UGDwcz'];a126_0x45ef=function(){return _0x48582e;};return a126_0x45ef();}exports[a126_0x3633ea(0x154)]=Git,Git['DEFAULT_CLONE_PATH']=path_1[a126_0x3633ea(0x15f)][a126_0x3633ea(0x129)](process[a126_0x3633ea(0x153)](),'.temp',a126_0x3633ea(0x161)),Git['logger']=new core_1[(a126_0x3633ea(0x160))](Git[a126_0x3633ea(0x151)]);