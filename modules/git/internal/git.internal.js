const a95_0x45e521=a95_0x10bc;(function(_0x11c7ff,_0x42c58c){const _0x1529aa=a95_0x10bc,_0x57e50a=_0x11c7ff();while(!![]){try{const _0x4621a4=parseInt(_0x1529aa(0xe9))/0x1+parseInt(_0x1529aa(0xf1))/0x2*(-parseInt(_0x1529aa(0xd9))/0x3)+-parseInt(_0x1529aa(0xda))/0x4*(parseInt(_0x1529aa(0xbe))/0x5)+-parseInt(_0x1529aa(0xc1))/0x6+parseInt(_0x1529aa(0xe2))/0x7+-parseInt(_0x1529aa(0xc0))/0x8*(-parseInt(_0x1529aa(0xbc))/0x9)+-parseInt(_0x1529aa(0x100))/0xa*(parseInt(_0x1529aa(0xb5))/0xb);if(_0x4621a4===_0x42c58c)break;else _0x57e50a['push'](_0x57e50a['shift']());}catch(_0xe9c8f1){_0x57e50a['push'](_0x57e50a['shift']());}}}(a95_0x49f0,0xb2e56));const a95_0x431893=(function(){let _0xefaad0=!![];return function(_0x58cb05,_0xfd0307){const _0x8509cd=_0xefaad0?function(){const _0x23d6f2=a95_0x10bc;if(_0xfd0307){const _0x5edea7=_0xfd0307[_0x23d6f2(0xb6)](_0x58cb05,arguments);return _0xfd0307=null,_0x5edea7;}}:function(){};return _0xefaad0=![],_0x8509cd;};}()),a95_0x573fb0=a95_0x431893(this,function(){const _0x24947b=a95_0x10bc;return a95_0x573fb0[_0x24947b(0x103)]()[_0x24947b(0xb4)](_0x24947b(0xe4))[_0x24947b(0x103)]()[_0x24947b(0x109)](a95_0x573fb0)['search'](_0x24947b(0xe4));});function a95_0x10bc(_0x1c87cf,_0x3079de){const _0x17cb2e=a95_0x49f0();return a95_0x10bc=function(_0x573fb0,_0x431893){_0x573fb0=_0x573fb0-0xb3;let _0x49f061=_0x17cb2e[_0x573fb0];return _0x49f061;},a95_0x10bc(_0x1c87cf,_0x3079de);}a95_0x573fb0();'use strict';var __importDefault=this&&this[a95_0x45e521(0xf0)]||function(_0x335b91){const _0x3d2dfa=a95_0x45e521;return _0x335b91&&_0x335b91[_0x3d2dfa(0xea)]?_0x335b91:{'default':_0x335b91};};Object[a95_0x45e521(0xe0)](exports,a95_0x45e521(0xea),{'value':!![]}),exports['Git']=void 0x0;const constants_1=require(a95_0x45e521(0xfe)),core_1=require(a95_0x45e521(0xc6)),path_1=__importDefault(require(a95_0x45e521(0xcf))),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require(a95_0x45e521(0xd1)),fs_internal_1=require(a95_0x45e521(0xcb)),internal_utils_1=require(a95_0x45e521(0xf9)),shell_internal_1=require(a95_0x45e521(0xb8));class Git{constructor(_0x138b6c){this['_repoPath']=_0x138b6c;}get[a95_0x45e521(0xb7)](){const _0x3dc36c=a95_0x45e521;return this[_0x3dc36c(0xd8)];}async['setCredentials'](_0x53c2ae,_0x29e714){const _0x391aae=a95_0x45e521;await shell_internal_1[_0x391aae(0xfd)]['exec'](_0x391aae(0xb3)+this[_0x391aae(0xd8)]+_0x391aae(0xc3)+_0x53c2ae+_0x391aae(0xfb)+_0x29e714+'\x22');}async[a95_0x45e521(0xca)](..._0x2af660){const _0x1ffd77=a95_0x45e521;await shell_internal_1[_0x1ffd77(0xfd)][_0x1ffd77(0xd7)](_0x1ffd77(0xb3)+this[_0x1ffd77(0xd8)]+_0x1ffd77(0xf3)+_0x2af660[_0x1ffd77(0xe3)]('\x20'));}async[a95_0x45e521(0xe8)](){const _0x2a24c7=a95_0x45e521;return shell_internal_1[_0x2a24c7(0xfd)]['exec']('cd\x20'+this['_repoPath']+_0x2a24c7(0xf4));}async[a95_0x45e521(0xbd)](_0x23bac5){const _0x5f0041=a95_0x45e521;Git[_0x5f0041(0xce)][_0x5f0041(0xd5)](_0x5f0041(0x106),_0x23bac5),await shell_internal_1[_0x5f0041(0xfd)][_0x5f0041(0xd7)](_0x5f0041(0xb3)+this['_repoPath']+_0x5f0041(0xf5)+_0x23bac5+'\x22');}async[a95_0x45e521(0xf7)](_0x142686){const _0x18c59c=a95_0x45e521;Git[_0x18c59c(0xce)][_0x18c59c(0xd5)]('push\x20changes\x20to\x20%s',_0x142686),await shell_internal_1[_0x18c59c(0xfd)][_0x18c59c(0xd7)](_0x18c59c(0xb3)+this[_0x18c59c(0xd8)]+_0x18c59c(0x107)+_0x142686+'\x20--quiet');}async[a95_0x45e521(0xc7)](_0x4524e2){const _0x4bc327=a95_0x45e521;Git[_0x4bc327(0xce)]['log'](_0x4bc327(0xdc),_0x4524e2),await shell_internal_1['Shell'][_0x4bc327(0xd7)](_0x4bc327(0xb3)+this['_repoPath']+'\x20&&\x20git\x20checkout\x20'+_0x4524e2);}async['getCurrentHash'](){const _0x1b1d3d=a95_0x45e521,_0x22d69e=await shell_internal_1['Shell'][_0x1b1d3d(0xd7)](_0x1b1d3d(0xb3)+this[_0x1b1d3d(0xd8)]+_0x1b1d3d(0xd6));return _0x22d69e[_0x1b1d3d(0xdb)]('\x0a','');}async[a95_0x45e521(0xe1)](_0x41d1ea){const _0x1ac994=a95_0x45e521;Git['logger']['log'](_0x1ac994(0xb9),_0x41d1ea);const _0x321587=await shell_internal_1[_0x1ac994(0xfd)][_0x1ac994(0xd7)](_0x1ac994(0xb3)+this[_0x1ac994(0xd8)]+'\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20'+_0x41d1ea);return{'author':(0x0,internal_utils_1[_0x1ac994(0xde)])(_0x321587),'email':(0x0,internal_utils_1[_0x1ac994(0xc4)])(_0x321587),'message':(0x0,internal_utils_1[_0x1ac994(0xf2)])(_0x321587),'changes':(0x0,internal_utils_1[_0x1ac994(0xdf)])(_0x321587)};}static async[a95_0x45e521(0xe6)](_0x2c8137,_0x246a9c){const _0x2f7b63=a95_0x45e521,[_0x530cd0]=await shell_internal_1[_0x2f7b63(0xfd)][_0x2f7b63(0xd7)](_0x2f7b63(0xcc)+_0x2c8137+'\x20'+_0x246a9c+'\x20--refs')[_0x2f7b63(0xec)](_0x2c832e=>_0x2c832e[_0x2f7b63(0xdb)](/\s/g,'\x20')[_0x2f7b63(0xfc)]('\x20'));return _0x530cd0;}static async[a95_0x45e521(0x108)](_0x26c28f,_0x374a72,_0x208b6a){const _0x6c9dd=a95_0x45e521,_0x1282bf=path_1[_0x6c9dd(0xff)][_0x6c9dd(0xe3)](this[_0x6c9dd(0xee)],_0x374a72),_0x352c4a=new Git(_0x1282bf);return Git[_0x6c9dd(0xce)][_0x6c9dd(0xd5)](_0x6c9dd(0xd2),_0x208b6a,_0x26c28f,_0x1282bf),await fs_internal_1['FS'][_0x6c9dd(0xef)](_0x1282bf),await shell_internal_1[_0x6c9dd(0xfd)][_0x6c9dd(0xd7)]('git\x20clone\x20-b\x20'+_0x208b6a+_0x6c9dd(0xc5)+_0x26c28f+'\x20'+_0x1282bf),_0x352c4a;}static async[a95_0x45e521(0xcd)](_0x11aee0,_0x2ed00c){const _0x2d78f7=a95_0x45e521,_0x2f05b5=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x4bbae6=_0x11aee0[_0x2d78f7(0xc9)][_0x2d78f7(0xdb)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x2d78f7(0xe5)])(_0x11aee0[_0x2d78f7(0xc9)])+_0x2d78f7(0xc8)+_0x2ed00c[_0x2d78f7(0x102)]()+'@'),_0x23e390=await shell_internal_1['Shell'][_0x2d78f7(0xd7)](_0x2d78f7(0xcc)+_0x4bbae6),_0x5f3951=_0x23e390[_0x2d78f7(0xfc)]('\x0a')['filter'](_0x516746=>_0x2f05b5['test'](_0x516746))[_0x2d78f7(0x105)](_0x3a1b8e=>{const _0x517dae=_0x2d78f7,[,_0x4c76cc,_0x3d7759]=_0x3a1b8e[_0x517dae(0xd0)](_0x2f05b5),_0x168a85=new branch_dto_1[(_0x517dae(0xbf))]();return _0x168a85['sha']=_0x4c76cc,_0x168a85[_0x517dae(0xd3)]=_0x3d7759[_0x517dae(0xdb)](_0x517dae(0xd4),''),_0x168a85;});return _0x5f3951;}static async[a95_0x45e521(0xf8)](_0x5b1f8c,_0x541461,_0x10e2a6,_0x3f4fab){const _0x32d74a=a95_0x45e521,_0x3bda17=_0x5b1f8c[_0x32d74a(0xc9)][_0x32d74a(0xdb)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x32d74a(0xe5)])(_0x5b1f8c['gitUrl'])+'://'+_0x3f4fab['getGitShellAuthorizationString']()+'@'),_0x4a995a=path_1['default'][_0x32d74a(0xe3)](this['DEFAULT_CLONE_PATH'],_0x5b1f8c[_0x32d74a(0xd3)]);Git[_0x32d74a(0xce)]['log']('create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s',_0x5b1f8c[_0x32d74a(0xd3)],_0x541461,_0x4a995a,_0x3bda17),await fs_internal_1['FS'][_0x32d74a(0xef)](_0x4a995a),await fs_internal_1['FS']['makeDir'](_0x4a995a);const _0x3328e8=new Git(_0x4a995a);await shell_internal_1[_0x32d74a(0xfd)][_0x32d74a(0xd7)](_0x32d74a(0xb3)+_0x3328e8[_0x32d74a(0xb7)]+_0x32d74a(0x101)),await shell_internal_1[_0x32d74a(0xfd)][_0x32d74a(0xd7)](_0x32d74a(0xb3)+_0x3328e8[_0x32d74a(0xb7)]+_0x32d74a(0xfa)+_0x3bda17),await _0x3328e8[_0x32d74a(0xbb)](constants_1['DEFAULT_GIT_USER_NAME'],constants_1[_0x32d74a(0xeb)]),await shell_internal_1['Shell']['exec'](_0x32d74a(0xb3)+_0x3328e8['baseDir']+_0x32d74a(0xed)+_0x541461),await shell_internal_1['Shell'][_0x32d74a(0xd7)](_0x32d74a(0xb3)+_0x3328e8['baseDir']+'\x20&&\x20git\x20commit\x20-m\x20\x22'+(_0x10e2a6||constants_1[_0x32d74a(0xf6)])+'\x22\x20--allow-empty'),await _0x3328e8['push'](_0x541461),Git[_0x32d74a(0xce)][_0x32d74a(0xd5)]('clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch'),await fs_internal_1['FS'][_0x32d74a(0xef)](_0x3328e8['baseDir']);}}exports[a95_0x45e521(0xdd)]=Git,Git[a95_0x45e521(0xee)]=path_1[a95_0x45e521(0xff)]['join'](process[a95_0x45e521(0xc2)](),a95_0x45e521(0x104),a95_0x45e521(0xba)),Git[a95_0x45e521(0xce)]=new core_1[(a95_0x45e521(0xe7))](Git['name']);function a95_0x49f0(){const _0xe6ad66=['\x20&&\x20git\x20remote\x20add\x20origin\x20','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','split','Shell','../../../constants','default','20444210XHHHWa','\x20&&\x20git\x20init','getGitShellAuthorizationString','toString','.temp','map','commit\x20message\x20\x22%s\x22','\x20&&\x20git\x20push\x20origin\x20','clone','constructor','cd\x20','search','11KYMWOg','apply','baseDir','./shell.internal','describe\x20commit\x20%s','git','setCredentials','18FXMRjr','commit','33790WSKZfu','BranchDto','5805640lJfPEX','2664282TWCcXv','cwd','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','extractEmailFromCommitDescribe','\x20--single-branch\x20','../../../core','checkout','://','gitUrl','add','./fs.internal','git\x20ls-remote\x20','getRepositoryBranches','logger','path','match','../../shared/utils','clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s','name','refs/heads/','log','\x20&&\x20git\x20rev-parse\x20HEAD','exec','_repoPath','60663gmKZVT','232qhtSSf','replace','checkout\x20to\x20%s','Git','extractAuthorFromCommitDescribe','extractChangesFromCommitDescribe','defineProperty','describeCommit','7271047CvZlab','join','(((.+)+)+)+$','getProtocol','getRemoteHash','Logger','status','1183722SUFQwH','__esModule','DEFAULT_GIT_USER_EMAIL','then','\x20&&\x20git\x20checkout\x20--orphan\x20','DEFAULT_CLONE_PATH','removeDir','__importDefault','6VLGNAm','extractMessageFromCommitDescribe','\x20&&\x20git\x20add\x20','\x20&&\x20git\x20status','\x20&&\x20git\x20commit\x20-m\x20\x22','INITIAL_COMMIT','push','createEmptyBranch','./internal.utils'];a95_0x49f0=function(){return _0xe6ad66;};return a95_0x49f0();}