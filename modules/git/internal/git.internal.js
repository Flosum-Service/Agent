const a149_0x1fa429=a149_0xca38;(function(_0x303c0d,_0x273288){const _0x9a4ed0=a149_0xca38,_0x4dcf1f=_0x303c0d();while(!![]){try{const _0xf7b360=parseInt(_0x9a4ed0(0x8b))/0x1*(-parseInt(_0x9a4ed0(0xa5))/0x2)+-parseInt(_0x9a4ed0(0x78))/0x3+parseInt(_0x9a4ed0(0xaa))/0x4+parseInt(_0x9a4ed0(0xa8))/0x5+parseInt(_0x9a4ed0(0x95))/0x6*(-parseInt(_0x9a4ed0(0xa0))/0x7)+-parseInt(_0x9a4ed0(0xba))/0x8+parseInt(_0x9a4ed0(0xc2))/0x9;if(_0xf7b360===_0x273288)break;else _0x4dcf1f['push'](_0x4dcf1f['shift']());}catch(_0x34e637){_0x4dcf1f['push'](_0x4dcf1f['shift']());}}}(a149_0x5e2a,0xaa01c));const a149_0x34b950=(function(){let _0x47989f=!![];return function(_0x1e69f3,_0x2f1de3){const _0x27dbde=_0x47989f?function(){const _0x2f9b66=a149_0xca38;if(_0x2f1de3){const _0x2e0600=_0x2f1de3[_0x2f9b66(0xa6)](_0x1e69f3,arguments);return _0x2f1de3=null,_0x2e0600;}}:function(){};return _0x47989f=![],_0x27dbde;};}()),a149_0x5c9e96=a149_0x34b950(this,function(){const _0x3f7271=a149_0xca38;return a149_0x5c9e96[_0x3f7271(0x80)]()['search'](_0x3f7271(0x96))[_0x3f7271(0x80)]()[_0x3f7271(0xab)](a149_0x5c9e96)['search'](_0x3f7271(0x96));});function a149_0xca38(_0x3807e7,_0x4153d1){const _0xe0b08=a149_0x5e2a();return a149_0xca38=function(_0x5c9e96,_0x34b950){_0x5c9e96=_0x5c9e96-0x6f;let _0x5e2ad5=_0xe0b08[_0x5c9e96];return _0x5e2ad5;},a149_0xca38(_0x3807e7,_0x4153d1);}a149_0x5c9e96();'use strict';var __importDefault=this&&this[a149_0x1fa429(0xa3)]||function(_0x15967d){const _0x3605e4=a149_0x1fa429;return _0x15967d&&_0x15967d[_0x3605e4(0x75)]?_0x15967d:{'default':_0x15967d};};function a149_0x5e2a(){const _0x163d7e=['getCurrentHash','511306oPlJEB','apply','ChildProcessUtils','2559830RhRmPQ','extractAuthorFromCommitDescribe','4172720ySeHvA','constructor','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','_repoPath','Git','add','extractEmailFromCommitDescribe','\x22\x20--allow-empty','.temp','Push\x20changes\x20to\x20%s','setCredentials','./fs.internal','\x20&&\x20git\x20checkout\x20--orphan\x20','user','spawnPromise','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','10555480nXQAiz','default','\x20--quiet','Clone\x20repository\x20branch\x20%s\x20to\x20%s','email','://','getRemoteHash','log','13079556oFUwTt','map','getProtocol','join','DEFAULT_CLONE_PATH','Logger','\x20&&\x20git\x20push\x20origin\x20','__esModule','logger','\x20--refs','1685964aZegGK','\x20&&\x20git\x20remote\x20add\x20origin\x20','describeCommit','Checkout\x20to\x20%s','\x20--single-branch\x20','git\x20ls-remote\x20','extractChangesFromCommitDescribe','split','toString','match','test','baseDir','getGitShellAuthorizationString','Commit\x20message\x20\x22%s\x22','git','\x20&&\x20git\x20rev-parse\x20HEAD','cd\x20','gitUrl','makeDir','1NpXkBk','removeDir','../../../constants','filter','getRepositoryBranches','\x20&&\x20git\x20status','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','then','name','../providers/branches/dto/branch.dto','1050036piiNAh','(((.+)+)+)+$','refs/heads/','Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','defineProperty','push','Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','createEmptyBranch','INITIAL_COMMIT','DEFAULT_GIT_USER_NAME','\x20&&\x20git\x20commit\x20-m\x20\x22','7TBKipq','replace','\x20&&\x20git\x20add\x20','__importDefault'];a149_0x5e2a=function(){return _0x163d7e;};return a149_0x5e2a();}Object[a149_0x1fa429(0x99)](exports,'__esModule',{'value':!![]}),exports[a149_0x1fa429(0xae)]=void 0x0;const constants_1=require(a149_0x1fa429(0x8d)),core_1=require('../../../core'),path_1=__importDefault(require('path')),branch_dto_1=require(a149_0x1fa429(0x94)),utils_1=require('../../shared/utils'),fs_internal_1=require(a149_0x1fa429(0xb5)),internal_utils_1=require('./internal.utils'),utils_2=require('@flosum/utils');class Git{constructor(_0x509cda){this['_repoPath']=_0x509cda;}get[a149_0x1fa429(0x83)](){const _0x5111bb=a149_0x1fa429;return this[_0x5111bb(0xad)];}async[a149_0x1fa429(0xb4)](_0x476906,_0x26cf1a){const _0x21ecfa=a149_0x1fa429;await utils_2[_0x21ecfa(0xa7)][_0x21ecfa(0xb8)](_0x21ecfa(0x88)+this['_repoPath']+_0x21ecfa(0xac)+_0x476906+_0x21ecfa(0x91)+_0x26cf1a+'\x22','');}async[a149_0x1fa429(0xaf)](..._0x1a630e){const _0x8ecae7=a149_0x1fa429;await utils_2[_0x8ecae7(0xa7)]['spawnPromise'](_0x8ecae7(0x88)+this['_repoPath']+_0x8ecae7(0xa2)+_0x1a630e['join']('\x20'),'');}async['status'](){const _0xa5ad9=a149_0x1fa429;return utils_2['ChildProcessUtils']['spawnPromise'](_0xa5ad9(0x88)+this[_0xa5ad9(0xad)]+_0xa5ad9(0x90),'');}async['commit'](_0x2a53a9){const _0xf70c68=a149_0x1fa429;Git[_0xf70c68(0x76)][_0xf70c68(0xc1)](_0xf70c68(0x85),_0x2a53a9),await utils_2[_0xf70c68(0xa7)][_0xf70c68(0xb8)](_0xf70c68(0x88)+this[_0xf70c68(0xad)]+_0xf70c68(0x9f)+_0x2a53a9+'\x22','');}async['push'](_0x4199a2){const _0x5e69a8=a149_0x1fa429;Git[_0x5e69a8(0x76)][_0x5e69a8(0xc1)](_0x5e69a8(0xb3),_0x4199a2),await utils_2['ChildProcessUtils'][_0x5e69a8(0xb8)](_0x5e69a8(0x88)+this[_0x5e69a8(0xad)]+_0x5e69a8(0x74)+_0x4199a2+_0x5e69a8(0xbc),'');}async['checkout'](_0x4c585d){const _0xdcbaee=a149_0x1fa429;Git[_0xdcbaee(0x76)][_0xdcbaee(0xc1)](_0xdcbaee(0x7b),_0x4c585d),await utils_2[_0xdcbaee(0xa7)][_0xdcbaee(0xb8)](_0xdcbaee(0x88)+this[_0xdcbaee(0xad)]+'\x20&&\x20git\x20checkout\x20'+_0x4c585d,'');}async[a149_0x1fa429(0xa4)](){const _0x26c86d=a149_0x1fa429,_0x4e6741=await utils_2[_0x26c86d(0xa7)][_0x26c86d(0xb8)](_0x26c86d(0x88)+this[_0x26c86d(0xad)]+_0x26c86d(0x87),'');return _0x4e6741[_0x26c86d(0xa1)]('\x0a','');}async[a149_0x1fa429(0x7a)](_0x62723d){const _0x4fe00e=a149_0x1fa429;Git['logger'][_0x4fe00e(0xc1)]('Describe\x20commit\x20%s',_0x62723d);const _0x23e146=await utils_2[_0x4fe00e(0xa7)][_0x4fe00e(0xb8)]('cd\x20'+this[_0x4fe00e(0xad)]+_0x4fe00e(0xb9)+_0x62723d,'');return{'author':(0x0,internal_utils_1[_0x4fe00e(0xa9)])(_0x23e146),'email':(0x0,internal_utils_1[_0x4fe00e(0xb0)])(_0x23e146),'message':(0x0,internal_utils_1['extractMessageFromCommitDescribe'])(_0x23e146),'changes':(0x0,internal_utils_1[_0x4fe00e(0x7e)])(_0x23e146)};}static async[a149_0x1fa429(0xc0)](_0x11bcb3,_0x178b68){const _0x6549b2=a149_0x1fa429,[_0x558f81]=await utils_2[_0x6549b2(0xa7)]['spawnPromise']('git\x20ls-remote\x20'+_0x11bcb3+'\x20'+_0x178b68+_0x6549b2(0x77),'')[_0x6549b2(0x92)](_0x5ac183=>_0x5ac183[_0x6549b2(0xa1)](/\s/g,'\x20')[_0x6549b2(0x7f)]('\x20'));return _0x558f81;}static async['clone'](_0x27dc70,_0x2b20f3,_0x206bc0){const _0x23170f=a149_0x1fa429,_0x5c038e=path_1[_0x23170f(0xbb)]['join'](this[_0x23170f(0x72)],_0x2b20f3),_0x2001aa=new Git(_0x5c038e);return Git[_0x23170f(0x76)]['log'](_0x23170f(0xbd),_0x206bc0,_0x5c038e),await fs_internal_1['FS'][_0x23170f(0x8c)](_0x5c038e),await utils_2[_0x23170f(0xa7)][_0x23170f(0xb8)]('git\x20clone\x20-b\x20'+_0x206bc0+_0x23170f(0x7c)+_0x27dc70+'\x20'+_0x5c038e,''),_0x2001aa;}static async[a149_0x1fa429(0x8f)](_0x5cd077,_0x3fb943){const _0x241083=a149_0x1fa429,_0x55aa2c=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x55160e=_0x5cd077[_0x241083(0x89)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x241083(0x70)])(_0x5cd077['gitUrl'])+_0x241083(0xbf)+_0x3fb943['getGitShellAuthorizationString']()+'@'),_0x114cee=await utils_2[_0x241083(0xa7)]['spawnPromise'](_0x241083(0x7d)+_0x55160e,'');return _0x114cee[_0x241083(0x7f)]('\x0a')[_0x241083(0x8e)](_0x451c2b=>_0x55aa2c[_0x241083(0x82)](_0x451c2b))[_0x241083(0x6f)](_0x5da312=>{const _0x1a2c33=_0x241083,[,_0x42050e,_0x18905c]=_0x5da312[_0x1a2c33(0x81)](_0x55aa2c),_0x2c3e18=new branch_dto_1['BranchDto']();return _0x2c3e18['sha']=_0x42050e,_0x2c3e18[_0x1a2c33(0x93)]=_0x18905c[_0x1a2c33(0xa1)](_0x1a2c33(0x97),''),_0x2c3e18;});}static async[a149_0x1fa429(0x9c)](_0x7b0e40,_0x1b9428,_0xb11201,_0x12691c){const _0x35a116=a149_0x1fa429;var _0x59ea77,_0x3b4966;const _0x3d4de4=_0x7b0e40[_0x35a116(0x89)][_0x35a116(0xa1)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x35a116(0x70)])(_0x7b0e40[_0x35a116(0x89)])+'://'+_0x12691c[_0x35a116(0x84)]()+'@'),_0x392623=path_1[_0x35a116(0xbb)][_0x35a116(0x71)](this['DEFAULT_CLONE_PATH'],_0x7b0e40[_0x35a116(0x93)]);Git['logger'][_0x35a116(0xc1)](_0x35a116(0x9b),_0x7b0e40[_0x35a116(0x93)],_0x1b9428[_0x35a116(0x93)],_0x392623),await fs_internal_1['FS']['removeDir'](_0x392623),await fs_internal_1['FS'][_0x35a116(0x8a)](_0x392623);const _0x2fb931=new Git(_0x392623);await utils_2[_0x35a116(0xa7)][_0x35a116(0xb8)](_0x35a116(0x88)+_0x2fb931[_0x35a116(0x83)]+'\x20&&\x20git\x20init',''),await utils_2[_0x35a116(0xa7)][_0x35a116(0xb8)](_0x35a116(0x88)+_0x2fb931['baseDir']+_0x35a116(0x79)+_0x3d4de4,''),await _0x2fb931[_0x35a116(0xb4)](((_0x59ea77=_0x1b9428['user'])===null||_0x59ea77===void 0x0?void 0x0:_0x59ea77['name'])||constants_1[_0x35a116(0x9e)],((_0x3b4966=_0x1b9428[_0x35a116(0xb7)])===null||_0x3b4966===void 0x0?void 0x0:_0x3b4966[_0x35a116(0xbe)])||constants_1['DEFAULT_GIT_USER_EMAIL']),await utils_2['ChildProcessUtils'][_0x35a116(0xb8)](_0x35a116(0x88)+_0x2fb931[_0x35a116(0x83)]+_0x35a116(0xb6)+_0x1b9428[_0x35a116(0x93)],''),await utils_2[_0x35a116(0xa7)][_0x35a116(0xb8)]('cd\x20'+_0x2fb931['baseDir']+_0x35a116(0x9f)+(_0xb11201||constants_1[_0x35a116(0x9d)])+_0x35a116(0xb1),''),await _0x2fb931[_0x35a116(0x9a)](_0x1b9428[_0x35a116(0x93)]),Git[_0x35a116(0x76)][_0x35a116(0xc1)](_0x35a116(0x98)),await fs_internal_1['FS'][_0x35a116(0x8c)](_0x2fb931[_0x35a116(0x83)]);}}exports['Git']=Git,Git[a149_0x1fa429(0x72)]=path_1[a149_0x1fa429(0xbb)][a149_0x1fa429(0x71)](process['cwd'](),a149_0x1fa429(0xb2),a149_0x1fa429(0x86)),Git[a149_0x1fa429(0x76)]=new core_1[(a149_0x1fa429(0x73))](Git['name']);