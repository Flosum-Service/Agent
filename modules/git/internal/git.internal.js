const a126_0x2dfb70=a126_0x267b;(function(_0x326aee,_0x464612){const _0x171b33=a126_0x267b,_0x47929a=_0x326aee();while(!![]){try{const _0x2a5729=parseInt(_0x171b33(0x1b0))/0x1+-parseInt(_0x171b33(0x1af))/0x2+parseInt(_0x171b33(0x17e))/0x3+-parseInt(_0x171b33(0x1b2))/0x4+parseInt(_0x171b33(0x1b4))/0x5+parseInt(_0x171b33(0x1cf))/0x6+parseInt(_0x171b33(0x1a4))/0x7*(parseInt(_0x171b33(0x191))/0x8);if(_0x2a5729===_0x464612)break;else _0x47929a['push'](_0x47929a['shift']());}catch(_0x434c92){_0x47929a['push'](_0x47929a['shift']());}}}(a126_0x4613,0x27d2f));const a126_0x1e779d=(function(){let _0x205fad=!![];return function(_0x40a0e1,_0x99deb1){const _0x46bf85=_0x205fad?function(){const _0x519b69=a126_0x267b;if(_0x99deb1){const _0x24141c=_0x99deb1[_0x519b69(0x1c1)](_0x40a0e1,arguments);return _0x99deb1=null,_0x24141c;}}:function(){};return _0x205fad=![],_0x46bf85;};}()),a126_0x13775e=a126_0x1e779d(this,function(){const _0x26c53d=a126_0x267b;return a126_0x13775e[_0x26c53d(0x1d0)]()[_0x26c53d(0x1ca)](_0x26c53d(0x197))['toString']()[_0x26c53d(0x183)](a126_0x13775e)[_0x26c53d(0x1ca)](_0x26c53d(0x197));});function a126_0x4613(){const _0x54102b=['Git','extractEmailFromCommitDescribe','__importDefault','join','INITIAL_COMMIT','describe\x20commit\x20%s','\x20&&\x20git\x20checkout\x20--orphan\x20','search','refs/heads/','cwd','git\x20clone\x20-b\x20','add','424638PSLCqq','toString','116220BuVujS','removeDir','path','_repoPath','@flosum/utils','constructor','split','default','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','DEFAULT_CLONE_PATH','\x20--single-branch\x20','replace','.temp','ChildProcessUtils','\x20&&\x20git\x20init','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','getProtocol','DEFAULT_GIT_USER_EMAIL','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','56aMfpAS','\x20--quiet','checkout\x20to\x20%s','\x20&&\x20git\x20remote\x20add\x20origin\x20','filter','commit\x20message\x20\x22%s\x22','(((.+)+)+)+$','cd\x20','BranchDto','logger','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','defineProperty','\x20&&\x20git\x20commit\x20-m\x20\x22','clone','://','getRepositoryBranches','\x20&&\x20git\x20status','extractMessageFromCommitDescribe','\x20--refs','41671vUvjvQ','../providers/branches/dto/branch.dto','git','sha','extractAuthorFromCommitDescribe','./internal.utils','push\x20changes\x20to\x20%s','name','baseDir','__esModule','getGitShellAuthorizationString','31386SfBTXQ','288172JTTmbq','\x20&&\x20git\x20add\x20','1304364AEIvnR','gitUrl','327735dkyvpi','spawnPromise','map','git\x20ls-remote\x20','describeCommit','setCredentials','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','getRemoteHash','status','push','DEFAULT_GIT_USER_NAME','../../shared/utils','checkout','apply','log'];a126_0x4613=function(){return _0x54102b;};return a126_0x4613();}a126_0x13775e();'use strict';function a126_0x267b(_0x339171,_0x224f15){const _0xab1e57=a126_0x4613();return a126_0x267b=function(_0x13775e,_0x1e779d){_0x13775e=_0x13775e-0x17e;let _0x46135e=_0xab1e57[_0x13775e];return _0x46135e;},a126_0x267b(_0x339171,_0x224f15);}var __importDefault=this&&this[a126_0x2dfb70(0x1c5)]||function(_0x180ddb){const _0x431753=a126_0x2dfb70;return _0x180ddb&&_0x180ddb[_0x431753(0x1ad)]?_0x180ddb:{'default':_0x180ddb};};Object[a126_0x2dfb70(0x19c)](exports,a126_0x2dfb70(0x1ad),{'value':!![]}),exports[a126_0x2dfb70(0x1c3)]=void 0x0;const constants_1=require('../../../constants'),core_1=require('../../../core'),path_1=__importDefault(require(a126_0x2dfb70(0x180))),branch_dto_1=require(a126_0x2dfb70(0x1a5)),utils_1=require(a126_0x2dfb70(0x1bf)),fs_internal_1=require('./fs.internal'),internal_utils_1=require(a126_0x2dfb70(0x1a9)),utils_2=require(a126_0x2dfb70(0x182));class Git{constructor(_0x368dc7){this['_repoPath']=_0x368dc7;}get['baseDir'](){const _0x1a4f89=a126_0x2dfb70;return this[_0x1a4f89(0x181)];}async[a126_0x2dfb70(0x1b9)](_0x42b437,_0x389b20){const _0x1a305b=a126_0x2dfb70;await utils_2['ChildProcessUtils'][_0x1a305b(0x1b5)](_0x1a305b(0x198)+this[_0x1a305b(0x181)]+_0x1a305b(0x18d)+_0x42b437+_0x1a305b(0x186)+_0x389b20+'\x22','');}async[a126_0x2dfb70(0x1ce)](..._0x395cb3){const _0x3aac46=a126_0x2dfb70;await utils_2[_0x3aac46(0x18b)][_0x3aac46(0x1b5)](_0x3aac46(0x198)+this[_0x3aac46(0x181)]+_0x3aac46(0x1b1)+_0x395cb3[_0x3aac46(0x1c6)]('\x20'),'');}async[a126_0x2dfb70(0x1bc)](){const _0x4e5a86=a126_0x2dfb70;return utils_2[_0x4e5a86(0x18b)][_0x4e5a86(0x1b5)](_0x4e5a86(0x198)+this[_0x4e5a86(0x181)]+_0x4e5a86(0x1a1),'');}async['commit'](_0x1cc3bf){const _0x54eaf7=a126_0x2dfb70;Git[_0x54eaf7(0x19a)][_0x54eaf7(0x1c2)](_0x54eaf7(0x196),_0x1cc3bf),await utils_2[_0x54eaf7(0x18b)][_0x54eaf7(0x1b5)](_0x54eaf7(0x198)+this['_repoPath']+_0x54eaf7(0x19d)+_0x1cc3bf+'\x22','');}async['push'](_0x16c66a){const _0x25eb8d=a126_0x2dfb70;Git['logger']['log'](_0x25eb8d(0x1aa),_0x16c66a),await utils_2[_0x25eb8d(0x18b)]['spawnPromise'](_0x25eb8d(0x198)+this[_0x25eb8d(0x181)]+'\x20&&\x20git\x20push\x20origin\x20'+_0x16c66a+_0x25eb8d(0x192),'');}async[a126_0x2dfb70(0x1c0)](_0x426749){const _0x2058c1=a126_0x2dfb70;Git[_0x2058c1(0x19a)][_0x2058c1(0x1c2)](_0x2058c1(0x193),_0x426749),await utils_2['ChildProcessUtils'][_0x2058c1(0x1b5)](_0x2058c1(0x198)+this[_0x2058c1(0x181)]+'\x20&&\x20git\x20checkout\x20'+_0x426749,'');}async['getCurrentHash'](){const _0x4b1b93=a126_0x2dfb70,_0x5a8a6c=await utils_2[_0x4b1b93(0x18b)][_0x4b1b93(0x1b5)]('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20rev-parse\x20HEAD','');return _0x5a8a6c['replace']('\x0a','');}async[a126_0x2dfb70(0x1b8)](_0x5d458e){const _0x5211c9=a126_0x2dfb70;Git[_0x5211c9(0x19a)][_0x5211c9(0x1c2)](_0x5211c9(0x1c8),_0x5d458e);const _0x344018=await utils_2[_0x5211c9(0x18b)][_0x5211c9(0x1b5)]('cd\x20'+this[_0x5211c9(0x181)]+_0x5211c9(0x19b)+_0x5d458e,'');return{'author':(0x0,internal_utils_1[_0x5211c9(0x1a8)])(_0x344018),'email':(0x0,internal_utils_1[_0x5211c9(0x1c4)])(_0x344018),'message':(0x0,internal_utils_1[_0x5211c9(0x1a2)])(_0x344018),'changes':(0x0,internal_utils_1['extractChangesFromCommitDescribe'])(_0x344018)};}static async[a126_0x2dfb70(0x1bb)](_0x2a1209,_0x5389fb){const _0x808db2=a126_0x2dfb70,[_0x42ab48]=await utils_2[_0x808db2(0x18b)]['spawnPromise'](_0x808db2(0x1b7)+_0x2a1209+'\x20'+_0x5389fb+_0x808db2(0x1a3),'')['then'](_0x33536c=>_0x33536c[_0x808db2(0x189)](/\s/g,'\x20')['split']('\x20'));return _0x42ab48;}static async[a126_0x2dfb70(0x19e)](_0x1a29eb,_0x3cb43d,_0x172c99){const _0x51f215=a126_0x2dfb70,_0x257651=path_1[_0x51f215(0x185)][_0x51f215(0x1c6)](this[_0x51f215(0x187)],_0x3cb43d),_0x280a59=new Git(_0x257651);return Git[_0x51f215(0x19a)]['log']('clone\x20repository\x20branch\x20%s\x20to\x20%s',_0x172c99,_0x257651),await fs_internal_1['FS'][_0x51f215(0x17f)](_0x257651),await utils_2[_0x51f215(0x18b)][_0x51f215(0x1b5)](_0x51f215(0x1cd)+_0x172c99+_0x51f215(0x188)+_0x1a29eb+'\x20'+_0x257651,''),_0x280a59;}static async[a126_0x2dfb70(0x1a0)](_0x390e43,_0x18b844){const _0x2a6fdb=a126_0x2dfb70,_0x43ce38=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x2f3596=_0x390e43['gitUrl'][_0x2a6fdb(0x189)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x2a6fdb(0x18e)])(_0x390e43[_0x2a6fdb(0x1b3)])+_0x2a6fdb(0x19f)+_0x18b844[_0x2a6fdb(0x1ae)]()+'@'),_0x4266ba=await utils_2[_0x2a6fdb(0x18b)][_0x2a6fdb(0x1b5)](_0x2a6fdb(0x1b7)+_0x2f3596,'');return _0x4266ba[_0x2a6fdb(0x184)]('\x0a')[_0x2a6fdb(0x195)](_0x559825=>_0x43ce38['test'](_0x559825))[_0x2a6fdb(0x1b6)](_0x4a859e=>{const _0x36ebb1=_0x2a6fdb,[,_0x4716ee,_0x15a1b7]=_0x4a859e['match'](_0x43ce38),_0x552d80=new branch_dto_1[(_0x36ebb1(0x199))]();return _0x552d80[_0x36ebb1(0x1a7)]=_0x4716ee,_0x552d80[_0x36ebb1(0x1ab)]=_0x15a1b7[_0x36ebb1(0x189)](_0x36ebb1(0x1cb),''),_0x552d80;});}static async['createEmptyBranch'](_0x5b9540,_0x1883d1,_0x55f5c0,_0x28d935){const _0x1f84a5=a126_0x2dfb70,_0x4b7b8c=_0x5b9540[_0x1f84a5(0x1b3)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x1f84a5(0x18e)])(_0x5b9540['gitUrl'])+_0x1f84a5(0x19f)+_0x28d935['getGitShellAuthorizationString']()+'@'),_0x31f445=path_1[_0x1f84a5(0x185)][_0x1f84a5(0x1c6)](this[_0x1f84a5(0x187)],_0x5b9540['name']);Git['logger'][_0x1f84a5(0x1c2)](_0x1f84a5(0x1ba),_0x5b9540[_0x1f84a5(0x1ab)],_0x1883d1,_0x31f445),await fs_internal_1['FS'][_0x1f84a5(0x17f)](_0x31f445),await fs_internal_1['FS']['makeDir'](_0x31f445);const _0x360cf9=new Git(_0x31f445);await utils_2['ChildProcessUtils']['spawnPromise'](_0x1f84a5(0x198)+_0x360cf9[_0x1f84a5(0x1ac)]+_0x1f84a5(0x18c),''),await utils_2[_0x1f84a5(0x18b)][_0x1f84a5(0x1b5)](_0x1f84a5(0x198)+_0x360cf9[_0x1f84a5(0x1ac)]+_0x1f84a5(0x194)+_0x4b7b8c,''),await _0x360cf9[_0x1f84a5(0x1b9)](constants_1[_0x1f84a5(0x1be)],constants_1[_0x1f84a5(0x18f)]),await utils_2[_0x1f84a5(0x18b)][_0x1f84a5(0x1b5)]('cd\x20'+_0x360cf9[_0x1f84a5(0x1ac)]+_0x1f84a5(0x1c9)+_0x1883d1,''),await utils_2['ChildProcessUtils'][_0x1f84a5(0x1b5)](_0x1f84a5(0x198)+_0x360cf9[_0x1f84a5(0x1ac)]+_0x1f84a5(0x19d)+(_0x55f5c0||constants_1[_0x1f84a5(0x1c7)])+'\x22\x20--allow-empty',''),await _0x360cf9[_0x1f84a5(0x1bd)](_0x1883d1),Git['logger'][_0x1f84a5(0x1c2)](_0x1f84a5(0x190)),await fs_internal_1['FS']['removeDir'](_0x360cf9[_0x1f84a5(0x1ac)]);}}exports[a126_0x2dfb70(0x1c3)]=Git,Git['DEFAULT_CLONE_PATH']=path_1[a126_0x2dfb70(0x185)]['join'](process[a126_0x2dfb70(0x1cc)](),a126_0x2dfb70(0x18a),a126_0x2dfb70(0x1a6)),Git[a126_0x2dfb70(0x19a)]=new core_1['Logger'](Git[a126_0x2dfb70(0x1ab)]);