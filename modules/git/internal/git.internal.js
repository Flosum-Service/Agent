const a126_0x23f171=a126_0x47c0;function a126_0x1f4c(){const _0x32ffc4=['getProtocol','gitUrl','getRepositoryBranches','commit\x20message\x20\x22%s\x22','filter','defineProperty','1286844jxgCeZ','join','commit','baseDir','\x20&&\x20git\x20rev-parse\x20HEAD','@flosum/utils','(((.+)+)+)+$','test','search','map','1703480ZYGlGv','createEmptyBranch','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','replace','apply','sha','7999684CEHrcU','\x20--single-branch\x20','extractMessageFromCommitDescribe','479269iZuIsX','extractEmailFromCommitDescribe','DEFAULT_CLONE_PATH','\x20&&\x20git\x20commit\x20-m\x20\x22','setCredentials','status','then','.temp','866630HPmFIC','cd\x20','__esModule','\x20--quiet','../../shared/utils','split','logger','git\x20ls-remote\x20','INITIAL_COMMIT','2440300cSFgNg','extractAuthorFromCommitDescribe','refs/heads/','log','1305531tCykjg','\x20&&\x20git\x20push\x20origin\x20','\x20&&\x20git\x20remote\x20add\x20origin\x20','removeDir','../../../core','Git','name','\x22\x20--allow-empty','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','DEFAULT_GIT_USER_NAME','getCurrentHash','\x20--refs','constructor','push','://','getRemoteHash','ChildProcessUtils','getGitShellAuthorizationString','push\x20changes\x20to\x20%s','clone','extractChangesFromCommitDescribe','add','_repoPath','default','spawnPromise','./fs.internal','git\x20clone\x20-b\x20','BranchDto','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','../providers/branches/dto/branch.dto','checkout\x20to\x20%s','\x20&&\x20git\x20add\x20','makeDir'];a126_0x1f4c=function(){return _0x32ffc4;};return a126_0x1f4c();}(function(_0x2f7758,_0xc0b229){const _0x2f5857=a126_0x47c0,_0x4c7637=_0x2f7758();while(!![]){try{const _0xbb3b68=-parseInt(_0x2f5857(0x19e))/0x1+parseInt(_0x2f5857(0x1a6))/0x2+parseInt(_0x2f5857(0x1b3))/0x3+-parseInt(_0x2f5857(0x1af))/0x4+-parseInt(_0x2f5857(0x1e4))/0x5+-parseInt(_0x2f5857(0x1da))/0x6+parseInt(_0x2f5857(0x19b))/0x7;if(_0xbb3b68===_0xc0b229)break;else _0x4c7637['push'](_0x4c7637['shift']());}catch(_0x5348bf){_0x4c7637['push'](_0x4c7637['shift']());}}}(a126_0x1f4c,0x598c6));const a126_0x2d4260=(function(){let _0x286185=!![];return function(_0x5899d7,_0x409ce8){const _0x1fc8d8=_0x286185?function(){const _0x1c67cf=a126_0x47c0;if(_0x409ce8){const _0x572e36=_0x409ce8[_0x1c67cf(0x199)](_0x5899d7,arguments);return _0x409ce8=null,_0x572e36;}}:function(){};return _0x286185=![],_0x1fc8d8;};}()),a126_0x2c520f=a126_0x2d4260(this,function(){const _0x507b88=a126_0x47c0;return a126_0x2c520f['toString']()['search'](_0x507b88(0x1e0))['toString']()[_0x507b88(0x1bf)](a126_0x2c520f)[_0x507b88(0x1e2)](_0x507b88(0x1e0));});a126_0x2c520f();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x95ceab){const _0x406c89=a126_0x47c0;return _0x95ceab&&_0x95ceab[_0x406c89(0x1a8)]?_0x95ceab:{'default':_0x95ceab};};Object[a126_0x23f171(0x1d9)](exports,a126_0x23f171(0x1a8),{'value':!![]}),exports[a126_0x23f171(0x1b8)]=void 0x0;const constants_1=require('../../../constants'),core_1=require(a126_0x23f171(0x1b7)),path_1=__importDefault(require('path')),branch_dto_1=require(a126_0x23f171(0x1d0)),utils_1=require(a126_0x23f171(0x1aa)),fs_internal_1=require(a126_0x23f171(0x1cc)),internal_utils_1=require('./internal.utils'),utils_2=require(a126_0x23f171(0x1df));function a126_0x47c0(_0x188d61,_0x5c432f){const _0xa3f9f7=a126_0x1f4c();return a126_0x47c0=function(_0x2c520f,_0x2d4260){_0x2c520f=_0x2c520f-0x196;let _0x1f4c02=_0xa3f9f7[_0x2c520f];return _0x1f4c02;},a126_0x47c0(_0x188d61,_0x5c432f);}class Git{constructor(_0x1d1561){const _0x1a68e0=a126_0x23f171;this[_0x1a68e0(0x1c9)]=_0x1d1561;}get[a126_0x23f171(0x1dd)](){const _0x38866e=a126_0x23f171;return this[_0x38866e(0x1c9)];}async[a126_0x23f171(0x1a2)](_0x489699,_0x4abf41){const _0x202315=a126_0x23f171;await utils_2[_0x202315(0x1c3)][_0x202315(0x1cb)](_0x202315(0x1a7)+this[_0x202315(0x1c9)]+_0x202315(0x1cf)+_0x489699+_0x202315(0x1bb)+_0x4abf41+'\x22','');}async[a126_0x23f171(0x1c8)](..._0x273b0c){const _0x3fb5f6=a126_0x23f171;await utils_2[_0x3fb5f6(0x1c3)][_0x3fb5f6(0x1cb)](_0x3fb5f6(0x1a7)+this[_0x3fb5f6(0x1c9)]+_0x3fb5f6(0x1d2)+_0x273b0c[_0x3fb5f6(0x1db)]('\x20'),'');}async[a126_0x23f171(0x1a3)](){const _0x3691c4=a126_0x23f171;return utils_2['ChildProcessUtils'][_0x3691c4(0x1cb)]('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20status','');}async[a126_0x23f171(0x1dc)](_0x6a8a65){const _0x406c20=a126_0x23f171;Git[_0x406c20(0x1ac)][_0x406c20(0x1b2)](_0x406c20(0x1d7),_0x6a8a65),await utils_2[_0x406c20(0x1c3)][_0x406c20(0x1cb)](_0x406c20(0x1a7)+this['_repoPath']+_0x406c20(0x1a1)+_0x6a8a65+'\x22','');}async[a126_0x23f171(0x1c0)](_0x39ba7a){const _0x2de963=a126_0x23f171;Git[_0x2de963(0x1ac)][_0x2de963(0x1b2)](_0x2de963(0x1c5),_0x39ba7a),await utils_2[_0x2de963(0x1c3)][_0x2de963(0x1cb)](_0x2de963(0x1a7)+this[_0x2de963(0x1c9)]+_0x2de963(0x1b4)+_0x39ba7a+_0x2de963(0x1a9),'');}async['checkout'](_0x16973d){const _0xcac3f9=a126_0x23f171;Git[_0xcac3f9(0x1ac)]['log'](_0xcac3f9(0x1d1),_0x16973d),await utils_2[_0xcac3f9(0x1c3)][_0xcac3f9(0x1cb)](_0xcac3f9(0x1a7)+this[_0xcac3f9(0x1c9)]+'\x20&&\x20git\x20checkout\x20'+_0x16973d,'');}async[a126_0x23f171(0x1bd)](){const _0x3ffb08=a126_0x23f171,_0x2e39f7=await utils_2[_0x3ffb08(0x1c3)][_0x3ffb08(0x1cb)](_0x3ffb08(0x1a7)+this[_0x3ffb08(0x1c9)]+_0x3ffb08(0x1de),'');return _0x2e39f7[_0x3ffb08(0x198)]('\x0a','');}async['describeCommit'](_0x267d2b){const _0x595103=a126_0x23f171;Git['logger'][_0x595103(0x1b2)]('describe\x20commit\x20%s',_0x267d2b);const _0x2cfa40=await utils_2[_0x595103(0x1c3)][_0x595103(0x1cb)](_0x595103(0x1a7)+this[_0x595103(0x1c9)]+'\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20'+_0x267d2b,'');return{'author':(0x0,internal_utils_1[_0x595103(0x1b0)])(_0x2cfa40),'email':(0x0,internal_utils_1[_0x595103(0x19f)])(_0x2cfa40),'message':(0x0,internal_utils_1[_0x595103(0x19d)])(_0x2cfa40),'changes':(0x0,internal_utils_1[_0x595103(0x1c7)])(_0x2cfa40)};}static async[a126_0x23f171(0x1c2)](_0x21e7d1,_0x3e1aeb){const _0x1ea6ce=a126_0x23f171,[_0x574844]=await utils_2[_0x1ea6ce(0x1c3)][_0x1ea6ce(0x1cb)](_0x1ea6ce(0x1ad)+_0x21e7d1+'\x20'+_0x3e1aeb+_0x1ea6ce(0x1be),'')[_0x1ea6ce(0x1a4)](_0x3911c1=>_0x3911c1[_0x1ea6ce(0x198)](/\s/g,'\x20')[_0x1ea6ce(0x1ab)]('\x20'));return _0x574844;}static async[a126_0x23f171(0x1c6)](_0x428a3d,_0x11f89d,_0x1d4d0f){const _0x228f5d=a126_0x23f171,_0x401dbd=path_1[_0x228f5d(0x1ca)][_0x228f5d(0x1db)](this[_0x228f5d(0x1a0)],_0x11f89d),_0x35f08b=new Git(_0x401dbd);return Git[_0x228f5d(0x1ac)][_0x228f5d(0x1b2)]('clone\x20repository\x20branch\x20%s\x20to\x20%s',_0x1d4d0f,_0x401dbd),await fs_internal_1['FS'][_0x228f5d(0x1b6)](_0x401dbd),await utils_2[_0x228f5d(0x1c3)][_0x228f5d(0x1cb)](_0x228f5d(0x1cd)+_0x1d4d0f+_0x228f5d(0x19c)+_0x428a3d+'\x20'+_0x401dbd,''),_0x35f08b;}static async[a126_0x23f171(0x1d6)](_0x9646d0,_0x25cc03){const _0x4171d5=a126_0x23f171,_0x4e8f8e=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x6c87f3=_0x9646d0['gitUrl']['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x4171d5(0x1d4)])(_0x9646d0[_0x4171d5(0x1d5)])+_0x4171d5(0x1c1)+_0x25cc03[_0x4171d5(0x1c4)]()+'@'),_0x476583=await utils_2['ChildProcessUtils'][_0x4171d5(0x1cb)](_0x4171d5(0x1ad)+_0x6c87f3,'');return _0x476583[_0x4171d5(0x1ab)]('\x0a')[_0x4171d5(0x1d8)](_0x5b17f1=>_0x4e8f8e[_0x4171d5(0x1e1)](_0x5b17f1))[_0x4171d5(0x1e3)](_0x5936bf=>{const _0x5cba25=_0x4171d5,[,_0x17f149,_0x472082]=_0x5936bf['match'](_0x4e8f8e),_0x33295e=new branch_dto_1[(_0x5cba25(0x1ce))]();return _0x33295e[_0x5cba25(0x19a)]=_0x17f149,_0x33295e[_0x5cba25(0x1b9)]=_0x472082['replace'](_0x5cba25(0x1b1),''),_0x33295e;});}static async[a126_0x23f171(0x196)](_0x3940fb,_0x336117,_0x54b679,_0x477121){const _0x41af62=a126_0x23f171,_0xe04a76=_0x3940fb[_0x41af62(0x1d5)][_0x41af62(0x198)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x41af62(0x1d4)])(_0x3940fb[_0x41af62(0x1d5)])+_0x41af62(0x1c1)+_0x477121['getGitShellAuthorizationString']()+'@'),_0x227dc2=path_1[_0x41af62(0x1ca)][_0x41af62(0x1db)](this['DEFAULT_CLONE_PATH'],_0x3940fb['name']);Git[_0x41af62(0x1ac)]['log']('create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]',_0x3940fb[_0x41af62(0x1b9)],_0x336117,_0x227dc2),await fs_internal_1['FS'][_0x41af62(0x1b6)](_0x227dc2),await fs_internal_1['FS'][_0x41af62(0x1d3)](_0x227dc2);const _0x2cf596=new Git(_0x227dc2);await utils_2['ChildProcessUtils'][_0x41af62(0x1cb)](_0x41af62(0x1a7)+_0x2cf596[_0x41af62(0x1dd)]+'\x20&&\x20git\x20init',''),await utils_2[_0x41af62(0x1c3)]['spawnPromise'](_0x41af62(0x1a7)+_0x2cf596['baseDir']+_0x41af62(0x1b5)+_0xe04a76,''),await _0x2cf596[_0x41af62(0x1a2)](constants_1[_0x41af62(0x1bc)],constants_1['DEFAULT_GIT_USER_EMAIL']),await utils_2[_0x41af62(0x1c3)][_0x41af62(0x1cb)](_0x41af62(0x1a7)+_0x2cf596[_0x41af62(0x1dd)]+'\x20&&\x20git\x20checkout\x20--orphan\x20'+_0x336117,''),await utils_2['ChildProcessUtils']['spawnPromise']('cd\x20'+_0x2cf596[_0x41af62(0x1dd)]+_0x41af62(0x1a1)+(_0x54b679||constants_1[_0x41af62(0x1ae)])+_0x41af62(0x1ba),''),await _0x2cf596['push'](_0x336117),Git[_0x41af62(0x1ac)]['log'](_0x41af62(0x197)),await fs_internal_1['FS'][_0x41af62(0x1b6)](_0x2cf596[_0x41af62(0x1dd)]);}}exports[a126_0x23f171(0x1b8)]=Git,Git[a126_0x23f171(0x1a0)]=path_1[a126_0x23f171(0x1ca)][a126_0x23f171(0x1db)](process['cwd'](),a126_0x23f171(0x1a5),'git'),Git[a126_0x23f171(0x1ac)]=new core_1['Logger'](Git['name']);