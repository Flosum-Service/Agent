const a148_0x415974=a148_0x21e4;(function(_0x3dedc6,_0x7eda53){const _0x132ca6=a148_0x21e4,_0x4b4510=_0x3dedc6();while(!![]){try{const _0x36faf7=-parseInt(_0x132ca6(0x9d))/0x1+-parseInt(_0x132ca6(0x8e))/0x2+parseInt(_0x132ca6(0x80))/0x3*(parseInt(_0x132ca6(0x8c))/0x4)+parseInt(_0x132ca6(0xaf))/0x5*(parseInt(_0x132ca6(0xa1))/0x6)+-parseInt(_0x132ca6(0x6a))/0x7+-parseInt(_0x132ca6(0x83))/0x8*(-parseInt(_0x132ca6(0xa7))/0x9)+parseInt(_0x132ca6(0x73))/0xa;if(_0x36faf7===_0x7eda53)break;else _0x4b4510['push'](_0x4b4510['shift']());}catch(_0x234e24){_0x4b4510['push'](_0x4b4510['shift']());}}}(a148_0x4b47,0x753a3));const a148_0x4cc9ee=(function(){let _0x97bb70=!![];return function(_0x5122ab,_0x591c6c){const _0x5027a3=_0x97bb70?function(){const _0x195e7e=a148_0x21e4;if(_0x591c6c){const _0x56dbf7=_0x591c6c[_0x195e7e(0x6e)](_0x5122ab,arguments);return _0x591c6c=null,_0x56dbf7;}}:function(){};return _0x97bb70=![],_0x5027a3;};}()),a148_0x34c877=a148_0x4cc9ee(this,function(){const _0x3680c4=a148_0x21e4;return a148_0x34c877[_0x3680c4(0xa3)]()[_0x3680c4(0x7f)](_0x3680c4(0x8b))[_0x3680c4(0xa3)]()[_0x3680c4(0x65)](a148_0x34c877)[_0x3680c4(0x7f)](_0x3680c4(0x8b));});a148_0x34c877();'use strict';function a148_0x21e4(_0x18bd00,_0x1779b9){const _0x44b071=a148_0x4b47();return a148_0x21e4=function(_0x34c877,_0x4cc9ee){_0x34c877=_0x34c877-0x65;let _0x4b474c=_0x44b071[_0x34c877];return _0x4b474c;},a148_0x21e4(_0x18bd00,_0x1779b9);}var __importDefault=this&&this[a148_0x415974(0x92)]||function(_0x3137cd){return _0x3137cd&&_0x3137cd['__esModule']?_0x3137cd:{'default':_0x3137cd};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a148_0x415974(0xa4)]=void 0x0;const constants_1=require(a148_0x415974(0x7b)),core_1=require('../../../core'),path_1=__importDefault(require('path')),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require(a148_0x415974(0xb1)),fs_internal_1=require(a148_0x415974(0x67)),internal_utils_1=require('./internal.utils'),utils_2=require('@flosum/utils');function a148_0x4b47(){const _0x4b399f=['(((.+)+)+)+$','320lRpZIf','replace','1433386wCZsAQ','spawnPromise','getRemoteHash','\x20&&\x20git\x20rev-parse\x20HEAD','__importDefault','getProtocol','://','baseDir','extractMessageFromCommitDescribe','BranchDto','clone','Describe\x20commit\x20%s','checkout','add','push','156780MkLtqu','commit','\x20&&\x20git\x20init','_repoPath','2706rSSNfh','status','toString','Git','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','DEFAULT_GIT_USER_EMAIL','32949pGXuQT','getCurrentHash','default','\x20--quiet','cwd','refs/heads/','log','\x20&&\x20git\x20push\x20origin\x20','1995tpshbf','test','../../shared/utils','split','extractChangesFromCommitDescribe','ChildProcessUtils','removeDir','constructor','\x20--refs','./fs.internal','then','Push\x20changes\x20to\x20%s','4385507pvUdrB','setCredentials','Logger','git\x20ls-remote\x20','apply','Checkout\x20to\x20%s','filter','\x20&&\x20git\x20status','name','6628550PqyjKN','DEFAULT_CLONE_PATH','git\x20clone\x20-b\x20','join','describeCommit','sha','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','\x20--single-branch\x20','../../../constants','cd\x20','logger','git','search','32628FfvOBy','map','extractEmailFromCommitDescribe','584aoSNdd','\x20&&\x20git\x20remote\x20add\x20origin\x20','\x22\x20--allow-empty','DEFAULT_GIT_USER_NAME','gitUrl','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','\x20&&\x20git\x20commit\x20-m\x20\x22','getGitShellAuthorizationString'];a148_0x4b47=function(){return _0x4b399f;};return a148_0x4b47();}class Git{constructor(_0x3a8b46){this['_repoPath']=_0x3a8b46;}get[a148_0x415974(0x95)](){const _0x454ea1=a148_0x415974;return this[_0x454ea1(0xa0)];}async[a148_0x415974(0x6b)](_0x255e3a,_0x51ae5f){const _0x4d4254=a148_0x415974;await utils_2[_0x4d4254(0xb4)][_0x4d4254(0x8f)](_0x4d4254(0x7c)+this['_repoPath']+_0x4d4254(0xa5)+_0x255e3a+_0x4d4254(0x88)+_0x51ae5f+'\x22','');}async[a148_0x415974(0x9b)](..._0x54d4d1){const _0x3ce94b=a148_0x415974;await utils_2[_0x3ce94b(0xb4)]['spawnPromise'](_0x3ce94b(0x7c)+this[_0x3ce94b(0xa0)]+'\x20&&\x20git\x20add\x20'+_0x54d4d1[_0x3ce94b(0x76)]('\x20'),'');}async[a148_0x415974(0xa2)](){const _0x28850f=a148_0x415974;return utils_2[_0x28850f(0xb4)]['spawnPromise']('cd\x20'+this[_0x28850f(0xa0)]+_0x28850f(0x71),'');}async[a148_0x415974(0x9e)](_0x407e33){const _0x108dff=a148_0x415974;Git['logger'][_0x108dff(0xad)]('Commit\x20message\x20\x22%s\x22',_0x407e33),await utils_2[_0x108dff(0xb4)]['spawnPromise'](_0x108dff(0x7c)+this['_repoPath']+_0x108dff(0x89)+_0x407e33+'\x22','');}async[a148_0x415974(0x9c)](_0x2edf9d){const _0x1962ed=a148_0x415974;Git[_0x1962ed(0x7d)][_0x1962ed(0xad)](_0x1962ed(0x69),_0x2edf9d),await utils_2['ChildProcessUtils'][_0x1962ed(0x8f)](_0x1962ed(0x7c)+this[_0x1962ed(0xa0)]+_0x1962ed(0xae)+_0x2edf9d+_0x1962ed(0xaa),'');}async[a148_0x415974(0x9a)](_0x5bdeee){const _0x370f20=a148_0x415974;Git[_0x370f20(0x7d)][_0x370f20(0xad)](_0x370f20(0x6f),_0x5bdeee),await utils_2['ChildProcessUtils'][_0x370f20(0x8f)](_0x370f20(0x7c)+this[_0x370f20(0xa0)]+'\x20&&\x20git\x20checkout\x20'+_0x5bdeee,'');}async[a148_0x415974(0xa8)](){const _0xaffa20=a148_0x415974,_0x24870f=await utils_2[_0xaffa20(0xb4)]['spawnPromise']('cd\x20'+this[_0xaffa20(0xa0)]+_0xaffa20(0x91),'');return _0x24870f[_0xaffa20(0x8d)]('\x0a','');}async[a148_0x415974(0x77)](_0x30c973){const _0x4ecb89=a148_0x415974;Git['logger'][_0x4ecb89(0xad)](_0x4ecb89(0x99),_0x30c973);const _0xc74c00=await utils_2[_0x4ecb89(0xb4)][_0x4ecb89(0x8f)](_0x4ecb89(0x7c)+this[_0x4ecb89(0xa0)]+_0x4ecb89(0x79)+_0x30c973,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0xc74c00),'email':(0x0,internal_utils_1[_0x4ecb89(0x82)])(_0xc74c00),'message':(0x0,internal_utils_1[_0x4ecb89(0x96)])(_0xc74c00),'changes':(0x0,internal_utils_1[_0x4ecb89(0xb3)])(_0xc74c00)};}static async[a148_0x415974(0x90)](_0x39350b,_0x2e3d72){const _0x188c8c=a148_0x415974,[_0x5efce0]=await utils_2[_0x188c8c(0xb4)][_0x188c8c(0x8f)](_0x188c8c(0x6d)+_0x39350b+'\x20'+_0x2e3d72+_0x188c8c(0x66),'')[_0x188c8c(0x68)](_0x17852d=>_0x17852d[_0x188c8c(0x8d)](/\s/g,'\x20')[_0x188c8c(0xb2)]('\x20'));return _0x5efce0;}static async[a148_0x415974(0x98)](_0x557aba,_0x4de441,_0x430e97){const _0x3209f7=a148_0x415974,_0x542695=path_1[_0x3209f7(0xa9)][_0x3209f7(0x76)](this[_0x3209f7(0x74)],_0x4de441),_0x54fa8a=new Git(_0x542695);return Git[_0x3209f7(0x7d)][_0x3209f7(0xad)]('Clone\x20repository\x20branch\x20%s\x20to\x20%s',_0x430e97,_0x542695),await fs_internal_1['FS'][_0x3209f7(0xb5)](_0x542695),await utils_2['ChildProcessUtils'][_0x3209f7(0x8f)](_0x3209f7(0x75)+_0x430e97+_0x3209f7(0x7a)+_0x557aba+'\x20'+_0x542695,''),_0x54fa8a;}static async['getRepositoryBranches'](_0x69691b,_0x572899){const _0xa0b6ac=a148_0x415974,_0x27348c=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x1326da=_0x69691b[_0xa0b6ac(0x87)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0xa0b6ac(0x93)])(_0x69691b[_0xa0b6ac(0x87)])+_0xa0b6ac(0x94)+_0x572899[_0xa0b6ac(0x8a)]()+'@'),_0x5ac229=await utils_2[_0xa0b6ac(0xb4)][_0xa0b6ac(0x8f)]('git\x20ls-remote\x20'+_0x1326da,'');return _0x5ac229[_0xa0b6ac(0xb2)]('\x0a')[_0xa0b6ac(0x70)](_0x131e56=>_0x27348c[_0xa0b6ac(0xb0)](_0x131e56))[_0xa0b6ac(0x81)](_0x5747a3=>{const _0x4fddec=_0xa0b6ac,[,_0x1ab1fa,_0x2dbcfb]=_0x5747a3['match'](_0x27348c),_0x475848=new branch_dto_1[(_0x4fddec(0x97))]();return _0x475848[_0x4fddec(0x78)]=_0x1ab1fa,_0x475848[_0x4fddec(0x72)]=_0x2dbcfb[_0x4fddec(0x8d)](_0x4fddec(0xac),''),_0x475848;});}static async['createEmptyBranch'](_0x5a0282,_0x104095,_0x175774,_0x146b71){const _0x233b5d=a148_0x415974,_0x18f0c6=_0x5a0282[_0x233b5d(0x87)][_0x233b5d(0x8d)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x5a0282['gitUrl'])+'://'+_0x146b71['getGitShellAuthorizationString']()+'@'),_0x4a5f7b=path_1['default']['join'](this[_0x233b5d(0x74)],_0x5a0282[_0x233b5d(0x72)]);Git[_0x233b5d(0x7d)][_0x233b5d(0xad)]('Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]',_0x5a0282[_0x233b5d(0x72)],_0x104095,_0x4a5f7b),await fs_internal_1['FS']['removeDir'](_0x4a5f7b),await fs_internal_1['FS']['makeDir'](_0x4a5f7b);const _0x86ff4c=new Git(_0x4a5f7b);await utils_2[_0x233b5d(0xb4)][_0x233b5d(0x8f)]('cd\x20'+_0x86ff4c[_0x233b5d(0x95)]+_0x233b5d(0x9f),''),await utils_2['ChildProcessUtils'][_0x233b5d(0x8f)](_0x233b5d(0x7c)+_0x86ff4c[_0x233b5d(0x95)]+_0x233b5d(0x84)+_0x18f0c6,''),await _0x86ff4c['setCredentials'](constants_1[_0x233b5d(0x86)],constants_1[_0x233b5d(0xa6)]),await utils_2[_0x233b5d(0xb4)][_0x233b5d(0x8f)](_0x233b5d(0x7c)+_0x86ff4c[_0x233b5d(0x95)]+'\x20&&\x20git\x20checkout\x20--orphan\x20'+_0x104095,''),await utils_2[_0x233b5d(0xb4)][_0x233b5d(0x8f)]('cd\x20'+_0x86ff4c['baseDir']+'\x20&&\x20git\x20commit\x20-m\x20\x22'+(_0x175774||constants_1['INITIAL_COMMIT'])+_0x233b5d(0x85),''),await _0x86ff4c[_0x233b5d(0x9c)](_0x104095),Git[_0x233b5d(0x7d)][_0x233b5d(0xad)]('Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch'),await fs_internal_1['FS'][_0x233b5d(0xb5)](_0x86ff4c[_0x233b5d(0x95)]);}}exports[a148_0x415974(0xa4)]=Git,Git[a148_0x415974(0x74)]=path_1[a148_0x415974(0xa9)][a148_0x415974(0x76)](process[a148_0x415974(0xab)](),'.temp',a148_0x415974(0x7e)),Git[a148_0x415974(0x7d)]=new core_1[(a148_0x415974(0x6c))](Git[a148_0x415974(0x72)]);