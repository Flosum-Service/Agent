const a129_0x5b86d4=a129_0x42bf;function a129_0x5953(){const _0x5ebd93=['Checkout\x20to\x20%s','push','\x20&&\x20git\x20commit\x20-m\x20\x22','__esModule','6sZtChR','Logger','filter','\x22\x20--allow-empty','856hpNDPX','\x20&&\x20git\x20add\x20','status','\x20&&\x20git\x20rev-parse\x20HEAD','getGitShellAuthorizationString','join','329fixYle','12925910wrFTbw','\x20&&\x20git\x20status','toString','match','BranchDto','getCurrentHash','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','search','removeDir','102792oCxtwz','add','://','defineProperty','baseDir','Git','\x20&&\x20git\x20remote\x20add\x20origin\x20','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','git\x20ls-remote\x20','11NRtltQ','__importDefault','4DDdmxU','logger','getProtocol','clone','1990220wUcNAK','Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','commit','gitUrl','Clone\x20repository\x20branch\x20%s\x20to\x20%s','cd\x20','21959xnpRzX','\x20--single-branch\x20','Describe\x20commit\x20%s','\x20&&\x20git\x20push\x20origin\x20','INITIAL_COMMIT','.temp','ChildProcessUtils','describeCommit','Push\x20changes\x20to\x20%s','DEFAULT_GIT_USER_EMAIL','getRemoteHash','split','spawnPromise','Commit\x20message\x20\x22%s\x22','\x20--quiet','log','setCredentials','git\x20clone\x20-b\x20','Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','test','then','54444708YDCRmn','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','git','@flosum/utils','_repoPath','./internal.utils','default','(((.+)+)+)+$','replace','\x20&&\x20git\x20checkout\x20--orphan\x20','name','7320100nXULcA','../../../constants','checkout','constructor','DEFAULT_CLONE_PATH','cwd','path','101529rmxQZA'];a129_0x5953=function(){return _0x5ebd93;};return a129_0x5953();}(function(_0x5b5945,_0x3db7ca){const _0x30dfb7=a129_0x42bf,_0x40172c=_0x5b5945();while(!![]){try{const _0x559be1=parseInt(_0x30dfb7(0x18e))/0x1*(parseInt(_0x30dfb7(0x184))/0x2)+parseInt(_0x30dfb7(0x1ba))/0x3*(parseInt(_0x30dfb7(0x188))/0x4)+-parseInt(_0x30dfb7(0x1ae))/0x5+-parseInt(_0x30dfb7(0x1ce))/0x6*(parseInt(_0x30dfb7(0x1c4))/0x7)+parseInt(_0x30dfb7(0x1be))/0x8*(-parseInt(_0x30dfb7(0x1b5))/0x9)+-parseInt(_0x30dfb7(0x1c5))/0xa*(parseInt(_0x30dfb7(0x182))/0xb)+parseInt(_0x30dfb7(0x1a3))/0xc;if(_0x559be1===_0x3db7ca)break;else _0x40172c['push'](_0x40172c['shift']());}catch(_0x46fb56){_0x40172c['push'](_0x40172c['shift']());}}}(a129_0x5953,0xc5125));function a129_0x42bf(_0x26d463,_0x575a04){const _0x4cbab5=a129_0x5953();return a129_0x42bf=function(_0x48838e,_0x3053eb){_0x48838e=_0x48838e-0x17f;let _0x595300=_0x4cbab5[_0x48838e];return _0x595300;},a129_0x42bf(_0x26d463,_0x575a04);}const a129_0x3053eb=(function(){let _0x5a588f=!![];return function(_0x82fe62,_0x4c060e){const _0x5e563b=_0x5a588f?function(){if(_0x4c060e){const _0x29a194=_0x4c060e['apply'](_0x82fe62,arguments);return _0x4c060e=null,_0x29a194;}}:function(){};return _0x5a588f=![],_0x5e563b;};}()),a129_0x48838e=a129_0x3053eb(this,function(){const _0x30e2e8=a129_0x42bf;return a129_0x48838e['toString']()[_0x30e2e8(0x1cc)](_0x30e2e8(0x1aa))[_0x30e2e8(0x1c7)]()[_0x30e2e8(0x1b1)](a129_0x48838e)[_0x30e2e8(0x1cc)](_0x30e2e8(0x1aa));});a129_0x48838e();'use strict';var __importDefault=this&&this[a129_0x5b86d4(0x183)]||function(_0x59dc43){return _0x59dc43&&_0x59dc43['__esModule']?_0x59dc43:{'default':_0x59dc43};};Object[a129_0x5b86d4(0x1d1)](exports,a129_0x5b86d4(0x1b9),{'value':!![]}),exports[a129_0x5b86d4(0x1d3)]=void 0x0;const constants_1=require(a129_0x5b86d4(0x1af)),core_1=require('../../../core'),path_1=__importDefault(require(a129_0x5b86d4(0x1b4))),branch_dto_1=require('../providers/branches/dto/branch.dto'),utils_1=require('../../shared/utils'),fs_internal_1=require('./fs.internal'),internal_utils_1=require(a129_0x5b86d4(0x1a8)),utils_2=require(a129_0x5b86d4(0x1a6));class Git{constructor(_0x8453fb){const _0x4d894c=a129_0x5b86d4;this[_0x4d894c(0x1a7)]=_0x8453fb;}get[a129_0x5b86d4(0x1d2)](){const _0x1686b3=a129_0x5b86d4;return this[_0x1686b3(0x1a7)];}async[a129_0x5b86d4(0x19e)](_0x4b90cc,_0xc936cb){const _0x24535a=a129_0x5b86d4;await utils_2[_0x24535a(0x194)][_0x24535a(0x19a)](_0x24535a(0x18d)+this[_0x24535a(0x1a7)]+_0x24535a(0x1cb)+_0x4b90cc+_0x24535a(0x1a4)+_0xc936cb+'\x22','');}async[a129_0x5b86d4(0x1cf)](..._0xfb5eb9){const _0x194de9=a129_0x5b86d4;await utils_2[_0x194de9(0x194)]['spawnPromise']('cd\x20'+this['_repoPath']+_0x194de9(0x1bf)+_0xfb5eb9[_0x194de9(0x1c3)]('\x20'),'');}async[a129_0x5b86d4(0x1c0)](){const _0x5a1c56=a129_0x5b86d4;return utils_2['ChildProcessUtils'][_0x5a1c56(0x19a)](_0x5a1c56(0x18d)+this[_0x5a1c56(0x1a7)]+_0x5a1c56(0x1c6),'');}async[a129_0x5b86d4(0x18a)](_0x55929e){const _0x13071c=a129_0x5b86d4;Git['logger'][_0x13071c(0x19d)](_0x13071c(0x19b),_0x55929e),await utils_2[_0x13071c(0x194)][_0x13071c(0x19a)](_0x13071c(0x18d)+this['_repoPath']+_0x13071c(0x1b8)+_0x55929e+'\x22','');}async['push'](_0x433d06){const _0x400dcc=a129_0x5b86d4;Git[_0x400dcc(0x185)]['log'](_0x400dcc(0x196),_0x433d06),await utils_2['ChildProcessUtils'][_0x400dcc(0x19a)](_0x400dcc(0x18d)+this[_0x400dcc(0x1a7)]+_0x400dcc(0x191)+_0x433d06+_0x400dcc(0x19c),'');}async[a129_0x5b86d4(0x1b0)](_0x750889){const _0x578596=a129_0x5b86d4;Git[_0x578596(0x185)][_0x578596(0x19d)](_0x578596(0x1b6),_0x750889),await utils_2[_0x578596(0x194)][_0x578596(0x19a)](_0x578596(0x18d)+this['_repoPath']+'\x20&&\x20git\x20checkout\x20'+_0x750889,'');}async[a129_0x5b86d4(0x1ca)](){const _0x15437b=a129_0x5b86d4,_0xcf9189=await utils_2['ChildProcessUtils'][_0x15437b(0x19a)](_0x15437b(0x18d)+this[_0x15437b(0x1a7)]+_0x15437b(0x1c1),'');return _0xcf9189['replace']('\x0a','');}async[a129_0x5b86d4(0x195)](_0x4fdb49){const _0x5c1df6=a129_0x5b86d4;Git[_0x5c1df6(0x185)][_0x5c1df6(0x19d)](_0x5c1df6(0x190),_0x4fdb49);const _0x2452b6=await utils_2[_0x5c1df6(0x194)][_0x5c1df6(0x19a)]('cd\x20'+this[_0x5c1df6(0x1a7)]+_0x5c1df6(0x180)+_0x4fdb49,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x2452b6),'email':(0x0,internal_utils_1['extractEmailFromCommitDescribe'])(_0x2452b6),'message':(0x0,internal_utils_1['extractMessageFromCommitDescribe'])(_0x2452b6),'changes':(0x0,internal_utils_1['extractChangesFromCommitDescribe'])(_0x2452b6)};}static async[a129_0x5b86d4(0x198)](_0xcfff62,_0x48a660){const _0x4c6d09=a129_0x5b86d4,[_0x564a55]=await utils_2[_0x4c6d09(0x194)]['spawnPromise'](_0x4c6d09(0x181)+_0xcfff62+'\x20'+_0x48a660+'\x20--refs','')[_0x4c6d09(0x1a2)](_0x32da54=>_0x32da54[_0x4c6d09(0x1ab)](/\s/g,'\x20')['split']('\x20'));return _0x564a55;}static async[a129_0x5b86d4(0x187)](_0x52d64d,_0x39727f,_0xf473cb){const _0xf632f5=a129_0x5b86d4,_0x57c5f5=path_1[_0xf632f5(0x1a9)][_0xf632f5(0x1c3)](this[_0xf632f5(0x1b2)],_0x39727f),_0x5cc9a2=new Git(_0x57c5f5);return Git[_0xf632f5(0x185)][_0xf632f5(0x19d)](_0xf632f5(0x18c),_0xf473cb,_0x57c5f5),await fs_internal_1['FS']['removeDir'](_0x57c5f5),await utils_2[_0xf632f5(0x194)][_0xf632f5(0x19a)](_0xf632f5(0x19f)+_0xf473cb+_0xf632f5(0x18f)+_0x52d64d+'\x20'+_0x57c5f5,''),_0x5cc9a2;}static async['getRepositoryBranches'](_0x33fd82,_0x19748c){const _0x29bd93=a129_0x5b86d4,_0x456407=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x573628=_0x33fd82[_0x29bd93(0x18b)][_0x29bd93(0x1ab)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x29bd93(0x186)])(_0x33fd82[_0x29bd93(0x18b)])+'://'+_0x19748c[_0x29bd93(0x1c2)]()+'@'),_0x365f68=await utils_2[_0x29bd93(0x194)][_0x29bd93(0x19a)]('git\x20ls-remote\x20'+_0x573628,'');return _0x365f68[_0x29bd93(0x199)]('\x0a')[_0x29bd93(0x1bc)](_0x288064=>_0x456407[_0x29bd93(0x1a1)](_0x288064))['map'](_0x8f2ee6=>{const _0xdc5537=_0x29bd93,[,_0x2b97f6,_0x29454c]=_0x8f2ee6[_0xdc5537(0x1c8)](_0x456407),_0x3a2386=new branch_dto_1[(_0xdc5537(0x1c9))]();return _0x3a2386['sha']=_0x2b97f6,_0x3a2386[_0xdc5537(0x1ad)]=_0x29454c['replace']('refs/heads/',''),_0x3a2386;});}static async['createEmptyBranch'](_0x145a1a,_0x5700d1,_0x4391ab,_0x150218){const _0x5963ee=a129_0x5b86d4,_0xdb0e2b=_0x145a1a['gitUrl']['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x5963ee(0x186)])(_0x145a1a[_0x5963ee(0x18b)])+_0x5963ee(0x1d0)+_0x150218[_0x5963ee(0x1c2)]()+'@'),_0x2633f8=path_1[_0x5963ee(0x1a9)][_0x5963ee(0x1c3)](this['DEFAULT_CLONE_PATH'],_0x145a1a['name']);Git[_0x5963ee(0x185)]['log'](_0x5963ee(0x1a0),_0x145a1a[_0x5963ee(0x1ad)],_0x5700d1,_0x2633f8),await fs_internal_1['FS']['removeDir'](_0x2633f8),await fs_internal_1['FS']['makeDir'](_0x2633f8);const _0x35c63e=new Git(_0x2633f8);await utils_2[_0x5963ee(0x194)]['spawnPromise'](_0x5963ee(0x18d)+_0x35c63e[_0x5963ee(0x1d2)]+'\x20&&\x20git\x20init',''),await utils_2[_0x5963ee(0x194)][_0x5963ee(0x19a)](_0x5963ee(0x18d)+_0x35c63e[_0x5963ee(0x1d2)]+_0x5963ee(0x17f)+_0xdb0e2b,''),await _0x35c63e[_0x5963ee(0x19e)](constants_1['DEFAULT_GIT_USER_NAME'],constants_1[_0x5963ee(0x197)]),await utils_2[_0x5963ee(0x194)]['spawnPromise'](_0x5963ee(0x18d)+_0x35c63e[_0x5963ee(0x1d2)]+_0x5963ee(0x1ac)+_0x5700d1,''),await utils_2[_0x5963ee(0x194)][_0x5963ee(0x19a)]('cd\x20'+_0x35c63e['baseDir']+_0x5963ee(0x1b8)+(_0x4391ab||constants_1[_0x5963ee(0x192)])+_0x5963ee(0x1bd),''),await _0x35c63e[_0x5963ee(0x1b7)](_0x5700d1),Git[_0x5963ee(0x185)][_0x5963ee(0x19d)](_0x5963ee(0x189)),await fs_internal_1['FS'][_0x5963ee(0x1cd)](_0x35c63e[_0x5963ee(0x1d2)]);}}exports[a129_0x5b86d4(0x1d3)]=Git,Git[a129_0x5b86d4(0x1b2)]=path_1[a129_0x5b86d4(0x1a9)][a129_0x5b86d4(0x1c3)](process[a129_0x5b86d4(0x1b3)](),a129_0x5b86d4(0x193),a129_0x5b86d4(0x1a5)),Git[a129_0x5b86d4(0x185)]=new core_1[(a129_0x5b86d4(0x1bb))](Git[a129_0x5b86d4(0x1ad)]);