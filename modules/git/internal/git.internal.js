const a148_0x4b239d=a148_0x28bf;(function(_0x345067,_0x1be629){const _0x1860bd=a148_0x28bf,_0x4de5cb=_0x345067();while(!![]){try{const _0x2bce51=parseInt(_0x1860bd(0x7e))/0x1+parseInt(_0x1860bd(0x8a))/0x2*(parseInt(_0x1860bd(0x89))/0x3)+-parseInt(_0x1860bd(0x7b))/0x4*(parseInt(_0x1860bd(0xbf))/0x5)+-parseInt(_0x1860bd(0xc0))/0x6*(-parseInt(_0x1860bd(0x97))/0x7)+parseInt(_0x1860bd(0xad))/0x8+-parseInt(_0x1860bd(0xa5))/0x9*(parseInt(_0x1860bd(0x91))/0xa)+-parseInt(_0x1860bd(0xa7))/0xb*(-parseInt(_0x1860bd(0x8d))/0xc);if(_0x2bce51===_0x1be629)break;else _0x4de5cb['push'](_0x4de5cb['shift']());}catch(_0x535033){_0x4de5cb['push'](_0x4de5cb['shift']());}}}(a148_0x3cba,0xa2008));const a148_0x377df1=(function(){let _0x27dc56=!![];return function(_0x28306a,_0x12d249){const _0x2b9162=_0x27dc56?function(){if(_0x12d249){const _0x5d7059=_0x12d249['apply'](_0x28306a,arguments);return _0x12d249=null,_0x5d7059;}}:function(){};return _0x27dc56=![],_0x2b9162;};}()),a148_0x625364=a148_0x377df1(this,function(){const _0x293e96=a148_0x28bf;return a148_0x625364[_0x293e96(0xac)]()[_0x293e96(0x96)](_0x293e96(0x9f))['toString']()['constructor'](a148_0x625364)[_0x293e96(0x96)](_0x293e96(0x9f));});a148_0x625364();function a148_0x28bf(_0x27c9d8,_0x3b407b){const _0x4a2282=a148_0x3cba();return a148_0x28bf=function(_0x625364,_0x377df1){_0x625364=_0x625364-0x7a;let _0x3cba48=_0x4a2282[_0x625364];return _0x3cba48;},a148_0x28bf(_0x27c9d8,_0x3b407b);}'use strict';var __importDefault=this&&this[a148_0x4b239d(0x9a)]||function(_0xc9ea72){const _0x7f0a7b=a148_0x4b239d;return _0xc9ea72&&_0xc9ea72[_0x7f0a7b(0x86)]?_0xc9ea72:{'default':_0xc9ea72};};Object['defineProperty'](exports,a148_0x4b239d(0x86),{'value':!![]}),exports[a148_0x4b239d(0x93)]=void 0x0;const constants_1=require('../../../constants'),core_1=require(a148_0x4b239d(0xbd)),path_1=__importDefault(require(a148_0x4b239d(0xa8))),branch_dto_1=require(a148_0x4b239d(0xaa)),utils_1=require(a148_0x4b239d(0xb5)),fs_internal_1=require(a148_0x4b239d(0xb1)),internal_utils_1=require(a148_0x4b239d(0x7d)),utils_2=require('@flosum/utils');class Git{constructor(_0x41370c){this['_repoPath']=_0x41370c;}get[a148_0x4b239d(0x83)](){const _0x2ec497=a148_0x4b239d;return this[_0x2ec497(0xa3)];}async[a148_0x4b239d(0x80)](_0x4273b4,_0xcf9704){const _0xb7726e=a148_0x4b239d;await utils_2[_0xb7726e(0x8c)][_0xb7726e(0x7f)]('cd\x20'+this[_0xb7726e(0xa3)]+_0xb7726e(0xba)+_0x4273b4+'\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'+_0xcf9704+'\x22','');}async['add'](..._0x34e025){const _0x218d1b=a148_0x4b239d;await utils_2['ChildProcessUtils'][_0x218d1b(0x7f)](_0x218d1b(0x85)+this[_0x218d1b(0xa3)]+'\x20&&\x20git\x20add\x20'+_0x34e025[_0x218d1b(0xbe)]('\x20'),'');}async[a148_0x4b239d(0xb7)](){const _0x3c174b=a148_0x4b239d;return utils_2[_0x3c174b(0x8c)][_0x3c174b(0x7f)]('cd\x20'+this[_0x3c174b(0xa3)]+_0x3c174b(0xa1),'');}async['commit'](_0xa6deaf){const _0x255cd2=a148_0x4b239d;Git[_0x255cd2(0x98)][_0x255cd2(0x87)](_0x255cd2(0x99),_0xa6deaf),await utils_2[_0x255cd2(0x8c)]['spawnPromise'](_0x255cd2(0x85)+this['_repoPath']+_0x255cd2(0x9e)+_0xa6deaf+'\x22','');}async[a148_0x4b239d(0xb3)](_0x54d5d8){const _0x22bd00=a148_0x4b239d;Git[_0x22bd00(0x98)][_0x22bd00(0x87)]('Push\x20changes\x20to\x20%s',_0x54d5d8),await utils_2['ChildProcessUtils'][_0x22bd00(0x7f)](_0x22bd00(0x85)+this['_repoPath']+_0x22bd00(0x88)+_0x54d5d8+_0x22bd00(0xb8),'');}async[a148_0x4b239d(0xc4)](_0x1235ea){const _0x395bed=a148_0x4b239d;Git[_0x395bed(0x98)]['log'](_0x395bed(0xab),_0x1235ea),await utils_2[_0x395bed(0x8c)][_0x395bed(0x7f)]('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20checkout\x20'+_0x1235ea,'');}async[a148_0x4b239d(0xb2)](){const _0xaf6700=a148_0x4b239d,_0x423bd1=await utils_2['ChildProcessUtils'][_0xaf6700(0x7f)](_0xaf6700(0x85)+this[_0xaf6700(0xa3)]+'\x20&&\x20git\x20rev-parse\x20HEAD','');return _0x423bd1['replace']('\x0a','');}async[a148_0x4b239d(0xc2)](_0x3902f7){const _0xecfd8b=a148_0x4b239d;Git[_0xecfd8b(0x98)][_0xecfd8b(0x87)]('Describe\x20commit\x20%s',_0x3902f7);const _0x54c60b=await utils_2[_0xecfd8b(0x8c)]['spawnPromise'](_0xecfd8b(0x85)+this['_repoPath']+_0xecfd8b(0xc8)+_0x3902f7,'');return{'author':(0x0,internal_utils_1[_0xecfd8b(0x8f)])(_0x54c60b),'email':(0x0,internal_utils_1[_0xecfd8b(0xbb)])(_0x54c60b),'message':(0x0,internal_utils_1[_0xecfd8b(0xaf)])(_0x54c60b),'changes':(0x0,internal_utils_1[_0xecfd8b(0x9d)])(_0x54c60b)};}static async[a148_0x4b239d(0x94)](_0x4a673b,_0xde4df0){const _0x5c3a18=a148_0x4b239d,[_0x544ef6]=await utils_2['ChildProcessUtils']['spawnPromise'](_0x5c3a18(0x7c)+_0x4a673b+'\x20'+_0xde4df0+'\x20--refs','')['then'](_0x594dff=>_0x594dff[_0x5c3a18(0x8b)](/\s/g,'\x20')[_0x5c3a18(0x9b)]('\x20'));return _0x544ef6;}static async[a148_0x4b239d(0xb4)](_0x49e75b,_0xb31c0c,_0x3de3fc){const _0x2c9039=a148_0x4b239d,_0x1dca8d=path_1[_0x2c9039(0xc6)]['join'](this[_0x2c9039(0xc7)],_0xb31c0c),_0x4f1224=new Git(_0x1dca8d);return Git['logger'][_0x2c9039(0x87)](_0x2c9039(0xae),_0x3de3fc,_0x1dca8d),await fs_internal_1['FS'][_0x2c9039(0xbc)](_0x1dca8d),await utils_2[_0x2c9039(0x8c)][_0x2c9039(0x7f)](_0x2c9039(0xc1)+_0x3de3fc+'\x20--single-branch\x20'+_0x49e75b+'\x20'+_0x1dca8d,''),_0x4f1224;}static async['getRepositoryBranches'](_0x502872,_0x17ff3f){const _0x21438d=a148_0x4b239d,_0x26b802=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x5301d7=_0x502872['gitUrl']['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x21438d(0x92)])(_0x502872[_0x21438d(0xc3)])+_0x21438d(0x84)+_0x17ff3f[_0x21438d(0xa0)]()+'@'),_0x1b685c=await utils_2['ChildProcessUtils']['spawnPromise']('git\x20ls-remote\x20'+_0x5301d7,'');return _0x1b685c[_0x21438d(0x9b)]('\x0a')['filter'](_0x542dc0=>_0x26b802['test'](_0x542dc0))[_0x21438d(0xa6)](_0x524b17=>{const _0x36d20b=_0x21438d,[,_0x1ffc90,_0x15e80e]=_0x524b17['match'](_0x26b802),_0x769415=new branch_dto_1['BranchDto']();return _0x769415[_0x36d20b(0xc5)]=_0x1ffc90,_0x769415['name']=_0x15e80e[_0x36d20b(0x8b)]('refs/heads/',''),_0x769415;});}static async[a148_0x4b239d(0x9c)](_0x72683d,_0x1d9ff5,_0x56a5e1,_0x34f0ed){const _0x15ce3a=a148_0x4b239d,_0x288f17=_0x72683d[_0x15ce3a(0xc3)][_0x15ce3a(0x8b)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x15ce3a(0x92)])(_0x72683d['gitUrl'])+_0x15ce3a(0x84)+_0x34f0ed[_0x15ce3a(0xa0)]()+'@'),_0x2d6a6c=path_1[_0x15ce3a(0xc6)][_0x15ce3a(0xbe)](this['DEFAULT_CLONE_PATH'],_0x72683d['name']);Git[_0x15ce3a(0x98)]['log']('Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]',_0x72683d[_0x15ce3a(0x8e)],_0x1d9ff5,_0x2d6a6c),await fs_internal_1['FS'][_0x15ce3a(0xbc)](_0x2d6a6c),await fs_internal_1['FS'][_0x15ce3a(0x90)](_0x2d6a6c);const _0x157f9c=new Git(_0x2d6a6c);await utils_2[_0x15ce3a(0x8c)][_0x15ce3a(0x7f)](_0x15ce3a(0x85)+_0x157f9c[_0x15ce3a(0x83)]+_0x15ce3a(0xb6),''),await utils_2[_0x15ce3a(0x8c)][_0x15ce3a(0x7f)](_0x15ce3a(0x85)+_0x157f9c['baseDir']+'\x20&&\x20git\x20remote\x20add\x20origin\x20'+_0x288f17,''),await _0x157f9c[_0x15ce3a(0x80)](constants_1[_0x15ce3a(0xa9)],constants_1[_0x15ce3a(0xb0)]),await utils_2[_0x15ce3a(0x8c)][_0x15ce3a(0x7f)](_0x15ce3a(0x85)+_0x157f9c[_0x15ce3a(0x83)]+_0x15ce3a(0x95)+_0x1d9ff5,''),await utils_2['ChildProcessUtils'][_0x15ce3a(0x7f)]('cd\x20'+_0x157f9c[_0x15ce3a(0x83)]+_0x15ce3a(0x9e)+(_0x56a5e1||constants_1['INITIAL_COMMIT'])+_0x15ce3a(0xa4),''),await _0x157f9c[_0x15ce3a(0xb3)](_0x1d9ff5),Git[_0x15ce3a(0x98)][_0x15ce3a(0x87)](_0x15ce3a(0x7a)),await fs_internal_1['FS'][_0x15ce3a(0xbc)](_0x157f9c['baseDir']);}}exports['Git']=Git,Git[a148_0x4b239d(0xc7)]=path_1[a148_0x4b239d(0xc6)]['join'](process[a148_0x4b239d(0x82)](),a148_0x4b239d(0x81),a148_0x4b239d(0xb9)),Git[a148_0x4b239d(0x98)]=new core_1[(a148_0x4b239d(0xa2))](Git['name']);function a148_0x3cba(){const _0x429be6=['Clone\x20repository\x20branch\x20%s\x20to\x20%s','extractMessageFromCommitDescribe','DEFAULT_GIT_USER_EMAIL','./fs.internal','getCurrentHash','push','clone','../../shared/utils','\x20&&\x20git\x20init','status','\x20--quiet','git','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','extractEmailFromCommitDescribe','removeDir','../../../core','join','1020IiIOcJ','2918022mjdlPH','git\x20clone\x20-b\x20','describeCommit','gitUrl','checkout','sha','default','DEFAULT_CLONE_PATH','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','22244SlErFK','git\x20ls-remote\x20','./internal.utils','1270085zgyjLi','spawnPromise','setCredentials','.temp','cwd','baseDir','://','cd\x20','__esModule','log','\x20&&\x20git\x20push\x20origin\x20','36ukqaaf','27420iSSWLL','replace','ChildProcessUtils','180aTSDFY','name','extractAuthorFromCommitDescribe','makeDir','70kfKaaB','getProtocol','Git','getRemoteHash','\x20&&\x20git\x20checkout\x20--orphan\x20','search','7XIVThq','logger','Commit\x20message\x20\x22%s\x22','__importDefault','split','createEmptyBranch','extractChangesFromCommitDescribe','\x20&&\x20git\x20commit\x20-m\x20\x22','(((.+)+)+)+$','getGitShellAuthorizationString','\x20&&\x20git\x20status','Logger','_repoPath','\x22\x20--allow-empty','1544679gtYODi','map','181885NZsoBx','path','DEFAULT_GIT_USER_NAME','../providers/branches/dto/branch.dto','Checkout\x20to\x20%s','toString','6643632DzumZp'];a148_0x3cba=function(){return _0x429be6;};return a148_0x3cba();}