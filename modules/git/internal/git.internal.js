const a126_0x87ce48=a126_0x3ed7;(function(_0xe741f8,_0x18629f){const _0x2785f4=a126_0x3ed7,_0x409a65=_0xe741f8();while(!![]){try{const _0x2a57fe=parseInt(_0x2785f4(0xec))/0x1+parseInt(_0x2785f4(0xff))/0x2+-parseInt(_0x2785f4(0xfd))/0x3*(-parseInt(_0x2785f4(0x122))/0x4)+parseInt(_0x2785f4(0xde))/0x5+-parseInt(_0x2785f4(0xf6))/0x6*(-parseInt(_0x2785f4(0xf7))/0x7)+parseInt(_0x2785f4(0xfb))/0x8+-parseInt(_0x2785f4(0x121))/0x9;if(_0x2a57fe===_0x18629f)break;else _0x409a65['push'](_0x409a65['shift']());}catch(_0xef4b7a){_0x409a65['push'](_0x409a65['shift']());}}}(a126_0x94f7,0x27e2e));function a126_0x94f7(){const _0xe0b31e=['create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','toString','name','\x20&&\x20git\x20commit\x20-m\x20\x22','log','@flosum/utils','git\x20clone\x20-b\x20','DEFAULT_GIT_USER_EMAIL','\x20&&\x20git\x20add\x20','625625umcMcV','\x22\x20--allow-empty','search','Git','makeDir','join','getGitShellAuthorizationString','\x20&&\x20git\x20checkout\x20--orphan\x20','logger','apply','./internal.utils','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','\x20--quiet','clone\x20repository\x20branch\x20%s\x20to\x20%s','200987wYWyJp','gitUrl','git','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','push','getCurrentHash','cd\x20','extractMessageFromCommitDescribe','\x20&&\x20git\x20checkout\x20','DEFAULT_CLONE_PATH','1524oSBWPj','9002SQzBhV','getProtocol','describe\x20commit\x20%s','getRemoteHash','1523480liNRmU','(((.+)+)+)+$','27TvnZCp','setCredentials','198086qcFzSh','_repoPath','\x20--single-branch\x20','baseDir','./fs.internal','commit','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','status','split','BranchDto','map','removeDir','spawnPromise','ChildProcessUtils','git\x20ls-remote\x20','extractAuthorFromCommitDescribe','clone','default','refs/heads/','replace','test','extractEmailFromCommitDescribe','Logger','filter','path','match','__importDefault','checkout\x20to\x20%s','cwd','__esModule','\x20&&\x20git\x20init','\x20&&\x20git\x20remote\x20add\x20origin\x20','\x20&&\x20git\x20push\x20origin\x20','../../../constants','7913457KHqqAw','44628HScCQI','DEFAULT_GIT_USER_NAME','getRepositoryBranches','commit\x20message\x20\x22%s\x22','sha','describeCommit','constructor','add','../providers/branches/dto/branch.dto'];a126_0x94f7=function(){return _0xe0b31e;};return a126_0x94f7();}const a126_0x7ef865=(function(){let _0x13f20c=!![];return function(_0x12a77f,_0x1e04e5){const _0x3abbd9=_0x13f20c?function(){const _0x289f78=a126_0x3ed7;if(_0x1e04e5){const _0x5119a7=_0x1e04e5[_0x289f78(0xe7)](_0x12a77f,arguments);return _0x1e04e5=null,_0x5119a7;}}:function(){};return _0x13f20c=![],_0x3abbd9;};}()),a126_0x5a5630=a126_0x7ef865(this,function(){const _0x5235bc=a126_0x3ed7;return a126_0x5a5630[_0x5235bc(0xd6)]()[_0x5235bc(0xe0)](_0x5235bc(0xfc))[_0x5235bc(0xd6)]()[_0x5235bc(0xd2)](a126_0x5a5630)[_0x5235bc(0xe0)]('(((.+)+)+)+$');});a126_0x5a5630();'use strict';function a126_0x3ed7(_0x149c94,_0x121bda){const _0x417300=a126_0x94f7();return a126_0x3ed7=function(_0x5a5630,_0x7ef865){_0x5a5630=_0x5a5630-0xd2;let _0x94f74=_0x417300[_0x5a5630];return _0x94f74;},a126_0x3ed7(_0x149c94,_0x121bda);}var __importDefault=this&&this[a126_0x87ce48(0x119)]||function(_0x1e3751){const _0x30a29e=a126_0x87ce48;return _0x1e3751&&_0x1e3751[_0x30a29e(0x11c)]?_0x1e3751:{'default':_0x1e3751};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a126_0x87ce48(0xe1)]=void 0x0;const constants_1=require(a126_0x87ce48(0x120)),core_1=require('../../../core'),path_1=__importDefault(require(a126_0x87ce48(0x117))),branch_dto_1=require(a126_0x87ce48(0xd4)),utils_1=require('../../shared/utils'),fs_internal_1=require(a126_0x87ce48(0x103)),internal_utils_1=require(a126_0x87ce48(0xe8)),utils_2=require(a126_0x87ce48(0xda));class Git{constructor(_0xe2d9c5){this['_repoPath']=_0xe2d9c5;}get[a126_0x87ce48(0x102)](){const _0x27ac0a=a126_0x87ce48;return this[_0x27ac0a(0x100)];}async['setCredentials'](_0x3ae544,_0x3bf494){const _0x1a0367=a126_0x87ce48;await utils_2[_0x1a0367(0x10c)][_0x1a0367(0x10b)]('cd\x20'+this[_0x1a0367(0x100)]+_0x1a0367(0x105)+_0x3ae544+_0x1a0367(0xef)+_0x3bf494+'\x22','');}async[a126_0x87ce48(0xd3)](..._0xa9ebe8){const _0x1486be=a126_0x87ce48;await utils_2['ChildProcessUtils'][_0x1486be(0x10b)]('cd\x20'+this['_repoPath']+_0x1486be(0xdd)+_0xa9ebe8[_0x1486be(0xe3)]('\x20'),'');}async[a126_0x87ce48(0x106)](){const _0x3ff550=a126_0x87ce48;return utils_2[_0x3ff550(0x10c)][_0x3ff550(0x10b)](_0x3ff550(0xf2)+this['_repoPath']+'\x20&&\x20git\x20status','');}async[a126_0x87ce48(0x104)](_0x20789f){const _0x2e01cf=a126_0x87ce48;Git[_0x2e01cf(0xe6)][_0x2e01cf(0xd9)](_0x2e01cf(0x125),_0x20789f),await utils_2[_0x2e01cf(0x10c)][_0x2e01cf(0x10b)](_0x2e01cf(0xf2)+this[_0x2e01cf(0x100)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x20789f+'\x22','');}async[a126_0x87ce48(0xf0)](_0x4fb147){const _0x44fb96=a126_0x87ce48;Git[_0x44fb96(0xe6)][_0x44fb96(0xd9)]('push\x20changes\x20to\x20%s',_0x4fb147),await utils_2['ChildProcessUtils'][_0x44fb96(0x10b)](_0x44fb96(0xf2)+this[_0x44fb96(0x100)]+_0x44fb96(0x11f)+_0x4fb147+_0x44fb96(0xea),'');}async['checkout'](_0x1bd786){const _0x29dbe4=a126_0x87ce48;Git[_0x29dbe4(0xe6)][_0x29dbe4(0xd9)](_0x29dbe4(0x11a),_0x1bd786),await utils_2['ChildProcessUtils']['spawnPromise']('cd\x20'+this[_0x29dbe4(0x100)]+_0x29dbe4(0xf4)+_0x1bd786,'');}async[a126_0x87ce48(0xf1)](){const _0x36d5b9=a126_0x87ce48,_0x3ea1ad=await utils_2['ChildProcessUtils'][_0x36d5b9(0x10b)](_0x36d5b9(0xf2)+this[_0x36d5b9(0x100)]+'\x20&&\x20git\x20rev-parse\x20HEAD','');return _0x3ea1ad[_0x36d5b9(0x112)]('\x0a','');}async[a126_0x87ce48(0x127)](_0x600afe){const _0x285d83=a126_0x87ce48;Git[_0x285d83(0xe6)][_0x285d83(0xd9)](_0x285d83(0xf9),_0x600afe);const _0x4ea155=await utils_2[_0x285d83(0x10c)]['spawnPromise']('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20'+_0x600afe,'');return{'author':(0x0,internal_utils_1[_0x285d83(0x10e)])(_0x4ea155),'email':(0x0,internal_utils_1[_0x285d83(0x114)])(_0x4ea155),'message':(0x0,internal_utils_1[_0x285d83(0xf3)])(_0x4ea155),'changes':(0x0,internal_utils_1['extractChangesFromCommitDescribe'])(_0x4ea155)};}static async[a126_0x87ce48(0xfa)](_0x21aaf3,_0x37329c){const _0x2d0c69=a126_0x87ce48,[_0x40dd9a]=await utils_2['ChildProcessUtils'][_0x2d0c69(0x10b)](_0x2d0c69(0x10d)+_0x21aaf3+'\x20'+_0x37329c+'\x20--refs','')['then'](_0x497085=>_0x497085[_0x2d0c69(0x112)](/\s/g,'\x20')[_0x2d0c69(0x107)]('\x20'));return _0x40dd9a;}static async[a126_0x87ce48(0x10f)](_0x356676,_0xa32a00,_0x3f6a9e){const _0x5daa94=a126_0x87ce48,_0x2bd6c1=path_1[_0x5daa94(0x110)][_0x5daa94(0xe3)](this[_0x5daa94(0xf5)],_0xa32a00),_0x328a9a=new Git(_0x2bd6c1);return Git[_0x5daa94(0xe6)][_0x5daa94(0xd9)](_0x5daa94(0xeb),_0x3f6a9e,_0x2bd6c1),await fs_internal_1['FS'][_0x5daa94(0x10a)](_0x2bd6c1),await utils_2[_0x5daa94(0x10c)][_0x5daa94(0x10b)](_0x5daa94(0xdb)+_0x3f6a9e+_0x5daa94(0x101)+_0x356676+'\x20'+_0x2bd6c1,''),_0x328a9a;}static async[a126_0x87ce48(0x124)](_0x2fa757,_0x251465){const _0x36cc97=a126_0x87ce48,_0x4f1c3c=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x21e564=_0x2fa757[_0x36cc97(0xed)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x36cc97(0xf8)])(_0x2fa757['gitUrl'])+'://'+_0x251465[_0x36cc97(0xe4)]()+'@'),_0x4b198b=await utils_2[_0x36cc97(0x10c)][_0x36cc97(0x10b)]('git\x20ls-remote\x20'+_0x21e564,'');return _0x4b198b['split']('\x0a')[_0x36cc97(0x116)](_0x3f5111=>_0x4f1c3c[_0x36cc97(0x113)](_0x3f5111))[_0x36cc97(0x109)](_0x4356d1=>{const _0x558904=_0x36cc97,[,_0x1ff377,_0x3e2dba]=_0x4356d1[_0x558904(0x118)](_0x4f1c3c),_0x1c98ad=new branch_dto_1[(_0x558904(0x108))]();return _0x1c98ad[_0x558904(0x126)]=_0x1ff377,_0x1c98ad[_0x558904(0xd7)]=_0x3e2dba['replace'](_0x558904(0x111),''),_0x1c98ad;});}static async['createEmptyBranch'](_0x522376,_0x5587c6,_0x166965,_0x305035){const _0x58d27a=a126_0x87ce48,_0xc7ef7e=_0x522376['gitUrl']['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x522376['gitUrl'])+'://'+_0x305035[_0x58d27a(0xe4)]()+'@'),_0xba9358=path_1[_0x58d27a(0x110)][_0x58d27a(0xe3)](this[_0x58d27a(0xf5)],_0x522376[_0x58d27a(0xd7)]);Git[_0x58d27a(0xe6)][_0x58d27a(0xd9)](_0x58d27a(0xd5),_0x522376[_0x58d27a(0xd7)],_0x5587c6,_0xba9358),await fs_internal_1['FS'][_0x58d27a(0x10a)](_0xba9358),await fs_internal_1['FS'][_0x58d27a(0xe2)](_0xba9358);const _0x5ea38b=new Git(_0xba9358);await utils_2[_0x58d27a(0x10c)]['spawnPromise'](_0x58d27a(0xf2)+_0x5ea38b['baseDir']+_0x58d27a(0x11d),''),await utils_2[_0x58d27a(0x10c)]['spawnPromise'](_0x58d27a(0xf2)+_0x5ea38b['baseDir']+_0x58d27a(0x11e)+_0xc7ef7e,''),await _0x5ea38b[_0x58d27a(0xfe)](constants_1[_0x58d27a(0x123)],constants_1[_0x58d27a(0xdc)]),await utils_2[_0x58d27a(0x10c)][_0x58d27a(0x10b)](_0x58d27a(0xf2)+_0x5ea38b[_0x58d27a(0x102)]+_0x58d27a(0xe5)+_0x5587c6,''),await utils_2[_0x58d27a(0x10c)][_0x58d27a(0x10b)](_0x58d27a(0xf2)+_0x5ea38b[_0x58d27a(0x102)]+_0x58d27a(0xd8)+(_0x166965||constants_1['INITIAL_COMMIT'])+_0x58d27a(0xdf),''),await _0x5ea38b[_0x58d27a(0xf0)](_0x5587c6),Git[_0x58d27a(0xe6)][_0x58d27a(0xd9)](_0x58d27a(0xe9)),await fs_internal_1['FS'][_0x58d27a(0x10a)](_0x5ea38b['baseDir']);}}exports[a126_0x87ce48(0xe1)]=Git,Git['DEFAULT_CLONE_PATH']=path_1[a126_0x87ce48(0x110)][a126_0x87ce48(0xe3)](process[a126_0x87ce48(0x11b)](),'.temp',a126_0x87ce48(0xee)),Git[a126_0x87ce48(0xe6)]=new core_1[(a126_0x87ce48(0x115))](Git[a126_0x87ce48(0xd7)]);