const a148_0x7db5e7=a148_0x229e;(function(_0x97fafc,_0x5b64d1){const _0x479a29=a148_0x229e,_0x348f1b=_0x97fafc();while(!![]){try{const _0x139d3f=parseInt(_0x479a29(0x149))/0x1*(parseInt(_0x479a29(0x153))/0x2)+parseInt(_0x479a29(0x11a))/0x3*(parseInt(_0x479a29(0x11f))/0x4)+parseInt(_0x479a29(0x12a))/0x5*(parseInt(_0x479a29(0x147))/0x6)+parseInt(_0x479a29(0x160))/0x7*(-parseInt(_0x479a29(0x110))/0x8)+parseInt(_0x479a29(0x111))/0x9*(-parseInt(_0x479a29(0x162))/0xa)+parseInt(_0x479a29(0x130))/0xb+parseInt(_0x479a29(0x15d))/0xc*(-parseInt(_0x479a29(0x15a))/0xd);if(_0x139d3f===_0x5b64d1)break;else _0x348f1b['push'](_0x348f1b['shift']());}catch(_0x1f5bc1){_0x348f1b['push'](_0x348f1b['shift']());}}}(a148_0x1ba9,0xe9595));const a148_0x4dcc82=(function(){let _0x41794f=!![];return function(_0x56409c,_0x19fad3){const _0x3a85d2=_0x41794f?function(){const _0x4f570a=a148_0x229e;if(_0x19fad3){const _0x12759d=_0x19fad3[_0x4f570a(0x155)](_0x56409c,arguments);return _0x19fad3=null,_0x12759d;}}:function(){};return _0x41794f=![],_0x3a85d2;};}()),a148_0x2c8e8a=a148_0x4dcc82(this,function(){const _0x3197f0=a148_0x229e;return a148_0x2c8e8a['toString']()['search'](_0x3197f0(0x121))['toString']()[_0x3197f0(0x137)](a148_0x2c8e8a)[_0x3197f0(0x136)](_0x3197f0(0x121));});a148_0x2c8e8a();'use strict';var __importDefault=this&&this[a148_0x7db5e7(0x13c)]||function(_0x10c647){const _0x5947b3=a148_0x7db5e7;return _0x10c647&&_0x10c647[_0x5947b3(0x152)]?_0x10c647:{'default':_0x10c647};};function a148_0x229e(_0x59c621,_0x4a12a0){const _0x262cba=a148_0x1ba9();return a148_0x229e=function(_0x2c8e8a,_0x4dcc82){_0x2c8e8a=_0x2c8e8a-0x10e;let _0x1ba9f7=_0x262cba[_0x2c8e8a];return _0x1ba9f7;},a148_0x229e(_0x59c621,_0x4a12a0);}Object[a148_0x7db5e7(0x12c)](exports,'__esModule',{'value':!![]}),exports[a148_0x7db5e7(0x131)]=void 0x0;function a148_0x1ba9(){const _0x419b12=['map','(((.+)+)+)+$','\x20&&\x20git\x20remote\x20add\x20origin\x20','replace','Checkout\x20to\x20%s','extractMessageFromCommitDescribe','setCredentials','getRemoteHash','then','removeDir','42255SQNjcI','Commit\x20message\x20\x22%s\x22','defineProperty','join','baseDir','name','18077004dvLWlE','Git','cwd','Logger','status','://','search','constructor','\x20&&\x20git\x20add\x20','refs/heads/','git\x20ls-remote\x20','match','__importDefault','ChildProcessUtils','\x20&&\x20git\x20checkout\x20','default','cd\x20','../../../core','push','checkout','test','DEFAULT_CLONE_PATH','_repoPath','54BWvgFS','logger','734hwYpsD','split','getCurrentHash','../../../constants','getProtocol','spawnPromise','Create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]','\x20&&\x20git\x20push\x20origin\x20','commit','__esModule','4714UfRgAM','\x22\x20--allow-empty','apply','../../shared/utils','DEFAULT_GIT_USER_NAME','describeCommit','filter','19254287ZNgKUv','gitUrl','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','12CXRyiI','extractChangesFromCommitDescribe','add','7yaPVjx','user','15210740RvjAqZ','email','\x20&&\x20git\x20init','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%nEmail:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','INITIAL_COMMIT','7139464cLhkyB','9rBnQfE','.temp','../providers/branches/dto/branch.dto','\x20--single-branch\x20','getGitShellAuthorizationString','makeDir','\x20&&\x20git\x20checkout\x20--orphan\x20','git','log','4202826EPwVJp','createEmptyBranch','\x20&&\x20git\x20status','sha','Push\x20changes\x20to\x20%s','4WNJQHM'];a148_0x1ba9=function(){return _0x419b12;};return a148_0x1ba9();}const constants_1=require(a148_0x7db5e7(0x14c)),core_1=require(a148_0x7db5e7(0x141)),path_1=__importDefault(require('path')),branch_dto_1=require(a148_0x7db5e7(0x113)),utils_1=require(a148_0x7db5e7(0x156)),fs_internal_1=require('./fs.internal'),internal_utils_1=require('./internal.utils'),utils_2=require('@flosum/utils');class Git{constructor(_0x577941){const _0x31c70a=a148_0x7db5e7;this[_0x31c70a(0x146)]=_0x577941;}get['baseDir'](){const _0x2883b0=a148_0x7db5e7;return this[_0x2883b0(0x146)];}async[a148_0x7db5e7(0x126)](_0x37a70b,_0x9e6dc6){const _0x12a74e=a148_0x7db5e7;await utils_2[_0x12a74e(0x13d)][_0x12a74e(0x14e)]('cd\x20'+this[_0x12a74e(0x146)]+'\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22'+_0x37a70b+_0x12a74e(0x15c)+_0x9e6dc6+'\x22','');}async[a148_0x7db5e7(0x15f)](..._0x14c196){const _0x5e1938=a148_0x7db5e7;await utils_2[_0x5e1938(0x13d)]['spawnPromise'](_0x5e1938(0x140)+this[_0x5e1938(0x146)]+_0x5e1938(0x138)+_0x14c196['join']('\x20'),'');}async[a148_0x7db5e7(0x134)](){const _0x52336c=a148_0x7db5e7;return utils_2[_0x52336c(0x13d)]['spawnPromise'](_0x52336c(0x140)+this['_repoPath']+_0x52336c(0x11c),'');}async[a148_0x7db5e7(0x151)](_0x201554){const _0x2be093=a148_0x7db5e7;Git['logger']['log'](_0x2be093(0x12b),_0x201554),await utils_2['ChildProcessUtils'][_0x2be093(0x14e)](_0x2be093(0x140)+this[_0x2be093(0x146)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x201554+'\x22','');}async[a148_0x7db5e7(0x142)](_0x234062){const _0x293d41=a148_0x7db5e7;Git[_0x293d41(0x148)][_0x293d41(0x119)](_0x293d41(0x11e),_0x234062),await utils_2[_0x293d41(0x13d)][_0x293d41(0x14e)](_0x293d41(0x140)+this[_0x293d41(0x146)]+_0x293d41(0x150)+_0x234062+'\x20--quiet','');}async[a148_0x7db5e7(0x143)](_0x412966){const _0x1d457b=a148_0x7db5e7;Git[_0x1d457b(0x148)][_0x1d457b(0x119)](_0x1d457b(0x124),_0x412966),await utils_2['ChildProcessUtils'][_0x1d457b(0x14e)]('cd\x20'+this[_0x1d457b(0x146)]+_0x1d457b(0x13e)+_0x412966,'');}async[a148_0x7db5e7(0x14b)](){const _0x17795a=a148_0x7db5e7,_0x1f761d=await utils_2[_0x17795a(0x13d)][_0x17795a(0x14e)]('cd\x20'+this[_0x17795a(0x146)]+'\x20&&\x20git\x20rev-parse\x20HEAD','');return _0x1f761d['replace']('\x0a','');}async[a148_0x7db5e7(0x158)](_0x1492ec){const _0x3ad20c=a148_0x7db5e7;Git[_0x3ad20c(0x148)]['log']('Describe\x20commit\x20%s',_0x1492ec);const _0x5035be=await utils_2[_0x3ad20c(0x13d)][_0x3ad20c(0x14e)](_0x3ad20c(0x140)+this['_repoPath']+_0x3ad20c(0x10e)+_0x1492ec,'');return{'author':(0x0,internal_utils_1['extractAuthorFromCommitDescribe'])(_0x5035be),'email':(0x0,internal_utils_1['extractEmailFromCommitDescribe'])(_0x5035be),'message':(0x0,internal_utils_1[_0x3ad20c(0x125)])(_0x5035be),'changes':(0x0,internal_utils_1[_0x3ad20c(0x15e)])(_0x5035be)};}static async[a148_0x7db5e7(0x127)](_0x1da62b,_0x102dd8){const _0x46d2ea=a148_0x7db5e7,[_0x1d543e]=await utils_2[_0x46d2ea(0x13d)][_0x46d2ea(0x14e)](_0x46d2ea(0x13a)+_0x1da62b+'\x20'+_0x102dd8+'\x20--refs','')[_0x46d2ea(0x128)](_0x29d8be=>_0x29d8be[_0x46d2ea(0x123)](/\s/g,'\x20')[_0x46d2ea(0x14a)]('\x20'));return _0x1d543e;}static async['clone'](_0xbaad07,_0x26a019,_0x43b779){const _0x475935=a148_0x7db5e7,_0x29a96d=path_1[_0x475935(0x13f)][_0x475935(0x12d)](this[_0x475935(0x145)],_0x26a019),_0x1cca3b=new Git(_0x29a96d);return Git[_0x475935(0x148)][_0x475935(0x119)]('Clone\x20repository\x20branch\x20%s\x20to\x20%s',_0x43b779,_0x29a96d),await fs_internal_1['FS'][_0x475935(0x129)](_0x29a96d),await utils_2[_0x475935(0x13d)][_0x475935(0x14e)]('git\x20clone\x20-b\x20'+_0x43b779+_0x475935(0x114)+_0xbaad07+'\x20'+_0x29a96d,''),_0x1cca3b;}static async['getRepositoryBranches'](_0x4a9274,_0x436782){const _0x7ec74a=a148_0x7db5e7,_0x2f8fa5=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,_0x181c54=_0x4a9274[_0x7ec74a(0x15b)][_0x7ec74a(0x123)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x7ec74a(0x14d)])(_0x4a9274['gitUrl'])+_0x7ec74a(0x135)+_0x436782[_0x7ec74a(0x115)]()+'@'),_0x303d7b=await utils_2[_0x7ec74a(0x13d)][_0x7ec74a(0x14e)](_0x7ec74a(0x13a)+_0x181c54,'');return _0x303d7b['split']('\x0a')[_0x7ec74a(0x159)](_0x4aa342=>_0x2f8fa5[_0x7ec74a(0x144)](_0x4aa342))[_0x7ec74a(0x120)](_0x29a088=>{const _0x5ca9b6=_0x7ec74a,[,_0x2ab08b,_0x59f98c]=_0x29a088[_0x5ca9b6(0x13b)](_0x2f8fa5),_0x2cc4b3=new branch_dto_1['BranchDto']();return _0x2cc4b3[_0x5ca9b6(0x11d)]=_0x2ab08b,_0x2cc4b3[_0x5ca9b6(0x12f)]=_0x59f98c[_0x5ca9b6(0x123)](_0x5ca9b6(0x139),''),_0x2cc4b3;});}static async[a148_0x7db5e7(0x11b)](_0x17b446,_0x489f65,_0x414eae,_0x133619){const _0x4b57f4=a148_0x7db5e7;var _0x51ac58,_0x36309b;const _0x4733f9=_0x17b446[_0x4b57f4(0x15b)][_0x4b57f4(0x123)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x4b57f4(0x14d)])(_0x17b446[_0x4b57f4(0x15b)])+_0x4b57f4(0x135)+_0x133619[_0x4b57f4(0x115)]()+'@'),_0x3e4f05=path_1['default'][_0x4b57f4(0x12d)](this[_0x4b57f4(0x145)],_0x17b446[_0x4b57f4(0x12f)]);Git[_0x4b57f4(0x148)][_0x4b57f4(0x119)](_0x4b57f4(0x14f),_0x17b446[_0x4b57f4(0x12f)],_0x489f65[_0x4b57f4(0x12f)],_0x3e4f05),await fs_internal_1['FS'][_0x4b57f4(0x129)](_0x3e4f05),await fs_internal_1['FS'][_0x4b57f4(0x116)](_0x3e4f05);const _0x2e2951=new Git(_0x3e4f05);await utils_2[_0x4b57f4(0x13d)][_0x4b57f4(0x14e)](_0x4b57f4(0x140)+_0x2e2951[_0x4b57f4(0x12e)]+_0x4b57f4(0x164),''),await utils_2[_0x4b57f4(0x13d)]['spawnPromise'](_0x4b57f4(0x140)+_0x2e2951[_0x4b57f4(0x12e)]+_0x4b57f4(0x122)+_0x4733f9,''),await _0x2e2951['setCredentials'](((_0x51ac58=_0x489f65[_0x4b57f4(0x161)])===null||_0x51ac58===void 0x0?void 0x0:_0x51ac58[_0x4b57f4(0x12f)])||constants_1[_0x4b57f4(0x157)],((_0x36309b=_0x489f65['user'])===null||_0x36309b===void 0x0?void 0x0:_0x36309b[_0x4b57f4(0x163)])||constants_1['DEFAULT_GIT_USER_EMAIL']),await utils_2[_0x4b57f4(0x13d)][_0x4b57f4(0x14e)](_0x4b57f4(0x140)+_0x2e2951['baseDir']+_0x4b57f4(0x117)+_0x489f65['name'],''),await utils_2[_0x4b57f4(0x13d)][_0x4b57f4(0x14e)](_0x4b57f4(0x140)+_0x2e2951[_0x4b57f4(0x12e)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+(_0x414eae||constants_1[_0x4b57f4(0x10f)])+_0x4b57f4(0x154),''),await _0x2e2951[_0x4b57f4(0x142)](_0x489f65[_0x4b57f4(0x12f)]),Git['logger'][_0x4b57f4(0x119)]('Clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch'),await fs_internal_1['FS'][_0x4b57f4(0x129)](_0x2e2951[_0x4b57f4(0x12e)]);}}exports[a148_0x7db5e7(0x131)]=Git,Git['DEFAULT_CLONE_PATH']=path_1[a148_0x7db5e7(0x13f)][a148_0x7db5e7(0x12d)](process[a148_0x7db5e7(0x132)](),a148_0x7db5e7(0x112),a148_0x7db5e7(0x118)),Git['logger']=new core_1[(a148_0x7db5e7(0x133))](Git['name']);