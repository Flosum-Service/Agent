const a147_0x5a3d89=a147_0x2c39;function a147_0xb038(){const _0x54a01f=['extractFileNameFromFiles','default','414904tHKWNB','isParentComponent','210467lqcUip','defineProperty','MDApiParser','convertToCleanPaths','paths','type','readChildComponents','META_EXPERIENCES_EXTENSION','join','exists','Component\x20\x22','WaveTemplateBundle','2195354YnjGTr','crc','__esModule','isSFDXProject','readBundledFiles','endsWith','Xml','isDir','logger','../data/settings-types-list','1089195arEDCf','(((.+)+)+)+$','../utils','filter','1798434eQwagg','../data/folder-types','includes','META_EXTENSION','catch','835668KYczXr','name','error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','hasChildNodes','\x22\x20not\x20found\x20in\x20\x22','readComponentFiles','269400NbJmYW','values','2iCoHKm','Logger','push','../../internal/fs.internal','reduce','getChildsByName','calculateCRC32','Cannot\x20parse\x20childs\x20in\x20','../../../../core','relative','startsWith','extractFilenameFromPath','path','.site-meta.xml','error','search','__importDefault','split','toString','../../devops/utils/git-commit.utils','dir','../utils/crc32','readDir','filePath','files','../data/child-types-map','readFile','test'];a147_0xb038=function(){return _0x54a01f;};return a147_0xb038();}(function(_0x2e801e,_0x1b0c37){const _0x3124eb=a147_0x2c39,_0x1b0fb0=_0x2e801e();while(!![]){try{const _0x3919ca=parseInt(_0x3124eb(0x1ff))/0x1*(parseInt(_0x3124eb(0x1df))/0x2)+parseInt(_0x3124eb(0x1d7))/0x3+-parseInt(_0x3124eb(0x1dd))/0x4+-parseInt(_0x3124eb(0x215))/0x5+-parseInt(_0x3124eb(0x219))/0x6+parseInt(_0x3124eb(0x20b))/0x7+-parseInt(_0x3124eb(0x1fd))/0x8;if(_0x3919ca===_0x1b0c37)break;else _0x1b0fb0['push'](_0x1b0fb0['shift']());}catch(_0x266751){_0x1b0fb0['push'](_0x1b0fb0['shift']());}}}(a147_0xb038,0x287de));const a147_0x301a49=(function(){let _0x3e886b=!![];return function(_0x79b45d,_0x36cde1){const _0x56a59e=_0x3e886b?function(){if(_0x36cde1){const _0x67b099=_0x36cde1['apply'](_0x79b45d,arguments);return _0x36cde1=null,_0x67b099;}}:function(){};return _0x3e886b=![],_0x56a59e;};}()),a147_0x42057c=a147_0x301a49(this,function(){const _0x594786=a147_0x2c39;return a147_0x42057c[_0x594786(0x1f1)]()[_0x594786(0x1ee)](_0x594786(0x216))[_0x594786(0x1f1)]()['constructor'](a147_0x42057c)['search'](_0x594786(0x216));});a147_0x42057c();'use strict';var __importDefault=this&&this[a147_0x5a3d89(0x1ef)]||function(_0x509e60){const _0x521f18=a147_0x5a3d89;return _0x509e60&&_0x509e60[_0x521f18(0x20d)]?_0x509e60:{'default':_0x509e60};};Object[a147_0x5a3d89(0x200)](exports,'__esModule',{'value':!![]}),exports[a147_0x5a3d89(0x201)]=void 0x0;const fs_internal_1=require(a147_0x5a3d89(0x1e2)),utils_1=require(a147_0x5a3d89(0x217)),path_1=require(a147_0x5a3d89(0x1eb)),xml_1=require('../utils/xml'),child_types_map_1=__importDefault(require(a147_0x5a3d89(0x1f8))),constants_1=require('../../../../constants'),core_1=require(a147_0x5a3d89(0x1e7)),git_commit_utils_1=require(a147_0x5a3d89(0x1f2)),crc32_1=require(a147_0x5a3d89(0x1f4)),folder_types_1=__importDefault(require(a147_0x5a3d89(0x21a))),settings_types_list_1=__importDefault(require(a147_0x5a3d89(0x214))),CHILD_XML_KEYS=Object[a147_0x5a3d89(0x1de)](child_types_map_1[a147_0x5a3d89(0x1fc)]);class MDApiParser{constructor(_0x1dfc9c,_0xc6eee3,_0x5b1ccb){const _0x1fdc59=a147_0x5a3d89;this[_0x1fdc59(0x1f3)]=_0x1dfc9c,this[_0x1fdc59(0x20e)]=_0x5b1ccb,this['logger']=new core_1[(_0x1fdc59(0x1e0))](MDApiParser[_0x1fdc59(0x1d8)]),this['META_EXTENSION']='-meta.xml',this[_0x1fdc59(0x206)]=_0x1fdc59(0x1ec),this['paths']=_0xc6eee3;}async[a147_0x5a3d89(0x205)](_0x5e7cc7){const _0x54d04c=a147_0x5a3d89;try{const _0x24847a=await xml_1[_0x54d04c(0x211)]['parse'](Object['values'](_0x5e7cc7[_0x54d04c(0x1f7)])[0x0][_0x54d04c(0x1f1)]('utf-8')),_0x2ef403=CHILD_XML_KEYS[_0x54d04c(0x218)](_0x164831=>xml_1[_0x54d04c(0x211)][_0x54d04c(0x1da)](_0x24847a,_0x164831))[_0x54d04c(0x1e3)]((_0xf14c0a,_0x5a05a5)=>[..._0xf14c0a,...xml_1[_0x54d04c(0x211)][_0x54d04c(0x1e4)](_0x24847a,_0x5a05a5)],[]);return(0x0,utils_1['createChildComponentsFromParent'])(_0x5e7cc7,_0x24847a,_0x2ef403);}catch(_0x4403fa){throw new Error(_0x54d04c(0x1e6)+_0x5e7cc7[_0x54d04c(0x1d8)]+'\x20['+_0x5e7cc7['type']+']');}}async['readBundledFiles'](_0x24ba05){const _0x3cd7d2=a147_0x5a3d89,_0x5a1ce7=(0x0,path_1['join'])(this[_0x3cd7d2(0x1f3)],_0x24ba05),_0x1558a0=_0x24ba05+(_0x24ba05[_0x3cd7d2(0x1e9)]('experiences')?this['META_EXPERIENCES_EXTENSION']:this['META_EXTENSION']),_0x35797e=await fs_internal_1['FS'][_0x3cd7d2(0x1f5)](_0x5a1ce7,!![]),_0x404480=await fs_internal_1['FS'][_0x3cd7d2(0x1f9)]((0x0,path_1['join'])(this[_0x3cd7d2(0x1f3)],_0x1558a0),!![])[_0x3cd7d2(0x1d6)](()=>null),_0x232101={};for(const _0x2276db of _0x35797e){_0x232101[(0x0,path_1[_0x3cd7d2(0x1e8)])(this[_0x3cd7d2(0x1f3)],_0x2276db)]=await fs_internal_1['FS']['readFile'](_0x2276db,!![]);}return _0x404480&&(_0x232101[(0x0,path_1[_0x3cd7d2(0x1e8)])(this[_0x3cd7d2(0x1f3)],_0x1558a0)]=_0x404480),_0x232101;}async[a147_0x5a3d89(0x1dc)](_0x3aa9ff){const _0x2258ca=a147_0x5a3d89;let _0x3f34b2=_0x3aa9ff+this[_0x2258ca(0x21c)];if(constants_1['BUNDLED_FOLDERS_REGEXP'][_0x2258ca(0x1fa)](_0x3aa9ff))return this[_0x2258ca(0x20f)](_0x3aa9ff);if(await fs_internal_1['FS'][_0x2258ca(0x212)]((0x0,path_1[_0x2258ca(0x207)])(this['dir'],_0x3aa9ff))||await fs_internal_1['FS'][_0x2258ca(0x208)]((0x0,path_1[_0x2258ca(0x207)])(this[_0x2258ca(0x1f3)],_0x3f34b2))){const _0x167cc0=await fs_internal_1['FS'][_0x2258ca(0x1f9)]((0x0,path_1[_0x2258ca(0x207)])(this[_0x2258ca(0x1f3)],_0x3f34b2),!![]),_0x3ddc8b=await(0x0,utils_1['extractComponentTypeFromFiles'])({'files':{[_0x3f34b2]:_0x167cc0}})[_0x2258ca(0x1d6)](()=>null);if(_0x3ddc8b&&folder_types_1[_0x2258ca(0x1fc)][_0x2258ca(0x21b)](_0x3ddc8b))return{[_0x3f34b2]:await fs_internal_1['FS'][_0x2258ca(0x1f9)]((0x0,path_1['join'])(this[_0x2258ca(0x1f3)],_0x3f34b2),!![])};}if(!(0x0,path_1['extname'])(_0x3aa9ff)&&this['isSFDXProject']){const _0x159e0e=_0x3aa9ff[_0x2258ca(0x1f0)]('/')[0x0],_0x3b3dfd=(await fs_internal_1['FS'][_0x2258ca(0x1f5)]((0x0,path_1['join'])(this[_0x2258ca(0x1f3)],_0x159e0e)))['find'](_0x58dbcd=>(0x0,git_commit_utils_1['isPathsEquals'])(_0x58dbcd,(0x0,path_1['join'])(this[_0x2258ca(0x1f3)],_0x3aa9ff)));if(!_0x3b3dfd)throw new Error(_0x2258ca(0x209)+_0x3aa9ff+_0x2258ca(0x1db)+_0x159e0e+'\x22');_0x3aa9ff=(0x0,path_1[_0x2258ca(0x1e8)])(this[_0x2258ca(0x1f3)],_0x3b3dfd),_0x3f34b2=_0x3aa9ff+this[_0x2258ca(0x21c)];}const [_0x2a7e1e,_0x58d8d5]=await Promise['all']([fs_internal_1['FS'][_0x2258ca(0x1f9)]((0x0,path_1['join'])(this['dir'],_0x3aa9ff),!![])['catch'](()=>null),fs_internal_1['FS'][_0x2258ca(0x1f9)]((0x0,path_1['join'])(this[_0x2258ca(0x1f3)],_0x3f34b2),!![])[_0x2258ca(0x1d6)](()=>null)]);return{..._0x2a7e1e?{[_0x3aa9ff]:_0x2a7e1e}:{},..._0x58d8d5?{[_0x3f34b2]:_0x58d8d5}:{}};}async['init'](){const _0x472e38=a147_0x5a3d89,_0x58ce6f=[...this[_0x472e38(0x203)]];if(this[_0x472e38(0x20e)])for(const _0x1f66d1 of _0x58ce6f){if(constants_1['BUNDLED_FOLDERS_REGEXP'][_0x472e38(0x1fa)](_0x1f66d1))continue;if(await fs_internal_1['FS'][_0x472e38(0x212)]((0x0,path_1[_0x472e38(0x207)])(this[_0x472e38(0x1f3)],_0x1f66d1))){const _0x44d4b6=await fs_internal_1['FS'][_0x472e38(0x1f5)]((0x0,path_1[_0x472e38(0x207)])(this['dir'],_0x1f66d1),!![]);_0x58ce6f['push'](..._0x44d4b6['map'](_0x49d170=>(0x0,path_1['relative'])(this[_0x472e38(0x1f3)],_0x49d170)));}}this[_0x472e38(0x203)]=(0x0,utils_1[_0x472e38(0x202)])(_0x58ce6f);}async['parse'](){const _0x31191b=a147_0x5a3d89;await this['init']();const _0x244fdb=[];for(const _0x524a32 of this[_0x31191b(0x203)]){if(_0x524a32[_0x31191b(0x210)]('package.xml'))continue;const _0xe279f9={};try{_0xe279f9['files']=await this['readComponentFiles'](_0x524a32),_0xe279f9[_0x31191b(0x1f6)]=constants_1['BUNDLED_FOLDERS_REGEXP']['test'](_0x524a32)?_0x524a32:(0x0,utils_1[_0x31191b(0x1fb)])({'files':_0xe279f9[_0x31191b(0x1f7)]}),_0x524a32[_0x31191b(0x1e9)]('waveTemplates')?_0xe279f9['type']=_0x31191b(0x20a):_0xe279f9[_0x31191b(0x204)]=await(0x0,utils_1['extractComponentTypeFromFiles'])({'files':_0xe279f9[_0x31191b(0x1f7)]});}catch(_0x2f0cea){this[_0x31191b(0x213)][_0x31191b(0x1ed)](_0x31191b(0x1d9),_0x524a32,_0x2f0cea);continue;}_0xe279f9['name']=(0x0,utils_1[_0x31191b(0x1ea)])(_0x524a32),_0xe279f9[_0x31191b(0x20c)]=(0x0,crc32_1[_0x31191b(0x1e5)])(_0xe279f9);if((0x0,utils_1[_0x31191b(0x1fe)])(_0xe279f9)){const _0x57e855=await this[_0x31191b(0x205)](_0xe279f9);_0x244fdb[_0x31191b(0x1e1)](..._0x57e855);}if(_0xe279f9[_0x31191b(0x204)]==='CustomLabels')continue;settings_types_list_1['default'][_0x31191b(0x21b)](_0xe279f9[_0x31191b(0x204)])&&(_0xe279f9[_0x31191b(0x204)]='Settings'),_0x244fdb[_0x31191b(0x1e1)](_0xe279f9);}return _0x244fdb;}}function a147_0x2c39(_0x2b80f8,_0x2bb526){const _0x2e2a1c=a147_0xb038();return a147_0x2c39=function(_0x42057c,_0x301a49){_0x42057c=_0x42057c-0x1d6;let _0xb038d1=_0x2e2a1c[_0x42057c];return _0xb038d1;},a147_0x2c39(_0x2b80f8,_0x2bb526);}exports[a147_0x5a3d89(0x201)]=MDApiParser;