const a147_0x4c6427=a147_0x1c18;function a147_0x3d69(){const _0x25ff15=['values','META_EXTENSION','readComponentFiles','hasChildNodes','Logger','toString','BUNDLED_FOLDERS_REGEXP','isDir','../utils/xml','relative','createChildComponentsFromParent','filter','\x22\x20not\x20found\x20in\x20\x22','../utils/crc32','error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','481887GwXzOW','../data/settings-types-list','push','MDApiParser','readBundledFiles','42qpPASA','utf-8','all','extractFilenameFromPath','readDir','parse','includes','package.xml','../utils','search','extractComponentTypeFromFiles','exists','crc','type','META_EXPERIENCES_EXTENSION','apply','3732720SckYON','WaveTemplateBundle','__esModule','isSFDXProject','error','constructor','name','path','getChildsByName','logger','endsWith','5yAaMfN','calculateCRC32','readFile','join','experiences','119904GUBfXs','test','Xml','../../../../constants','isPathsEquals','__importDefault','../data/child-types-map','catch','find','../../../../core','10IbnbfD','98693RVwRzr','default','Settings','987468EZHfhI','init','files','waveTemplates','paths','3150168kQDRxM','dir','convertToCleanPaths','3430044HfyynB','-meta.xml','../../devops/utils/git-commit.utils','isParentComponent','(((.+)+)+)+$','../data/folder-types','filePath'];a147_0x3d69=function(){return _0x25ff15;};return a147_0x3d69();}(function(_0x3615e9,_0x46fa36){const _0x41a6b3=a147_0x1c18,_0x3d4c11=_0x3615e9();while(!![]){try{const _0x5b5adc=-parseInt(_0x41a6b3(0x152))/0x1+-parseInt(_0x41a6b3(0x151))/0x2*(-parseInt(_0x41a6b3(0x147))/0x3)+parseInt(_0x41a6b3(0x155))/0x4*(parseInt(_0x41a6b3(0x142))/0x5)+parseInt(_0x41a6b3(0x178))/0x6*(-parseInt(_0x41a6b3(0x173))/0x7)+parseInt(_0x41a6b3(0x15a))/0x8+-parseInt(_0x41a6b3(0x15d))/0x9+parseInt(_0x41a6b3(0x137))/0xa;if(_0x5b5adc===_0x46fa36)break;else _0x3d4c11['push'](_0x3d4c11['shift']());}catch(_0x25d99c){_0x3d4c11['push'](_0x3d4c11['shift']());}}}(a147_0x3d69,0x3d896));const a147_0x4b0fd1=(function(){let _0x358e87=!![];return function(_0x142f3c,_0x4813db){const _0xb7952=_0x358e87?function(){const _0x1eea2b=a147_0x1c18;if(_0x4813db){const _0x29a343=_0x4813db[_0x1eea2b(0x136)](_0x142f3c,arguments);return _0x4813db=null,_0x29a343;}}:function(){};return _0x358e87=![],_0xb7952;};}()),a147_0x1c3dfa=a147_0x4b0fd1(this,function(){const _0x21a39d=a147_0x1c18;return a147_0x1c3dfa[_0x21a39d(0x169)]()[_0x21a39d(0x130)]('(((.+)+)+)+$')[_0x21a39d(0x169)]()[_0x21a39d(0x13c)](a147_0x1c3dfa)[_0x21a39d(0x130)](_0x21a39d(0x161));});function a147_0x1c18(_0x514834,_0x16e6c4){const _0x1a21ec=a147_0x3d69();return a147_0x1c18=function(_0x1c3dfa,_0x4b0fd1){_0x1c3dfa=_0x1c3dfa-0x130;let _0x3d6937=_0x1a21ec[_0x1c3dfa];return _0x3d6937;},a147_0x1c18(_0x514834,_0x16e6c4);}a147_0x1c3dfa();'use strict';var __importDefault=this&&this[a147_0x4c6427(0x14c)]||function(_0x49dff0){const _0x581c94=a147_0x4c6427;return _0x49dff0&&_0x49dff0[_0x581c94(0x139)]?_0x49dff0:{'default':_0x49dff0};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['MDApiParser']=void 0x0;const fs_internal_1=require('../../internal/fs.internal'),utils_1=require(a147_0x4c6427(0x180)),path_1=require(a147_0x4c6427(0x13e)),xml_1=require(a147_0x4c6427(0x16c)),child_types_map_1=__importDefault(require(a147_0x4c6427(0x14d))),constants_1=require(a147_0x4c6427(0x14a)),core_1=require(a147_0x4c6427(0x150)),git_commit_utils_1=require(a147_0x4c6427(0x15f)),crc32_1=require(a147_0x4c6427(0x171)),folder_types_1=__importDefault(require(a147_0x4c6427(0x162))),settings_types_list_1=__importDefault(require(a147_0x4c6427(0x174))),CHILD_XML_KEYS=Object[a147_0x4c6427(0x164)](child_types_map_1['default']);class MDApiParser{constructor(_0x59f8dc,_0x516e8a,_0x27aad8){const _0x3a0b67=a147_0x4c6427;this[_0x3a0b67(0x15b)]=_0x59f8dc,this[_0x3a0b67(0x13a)]=_0x27aad8,this['logger']=new core_1[(_0x3a0b67(0x168))](MDApiParser[_0x3a0b67(0x13d)]),this['META_EXTENSION']=_0x3a0b67(0x15e),this['META_EXPERIENCES_EXTENSION']='.site-meta.xml',this[_0x3a0b67(0x159)]=_0x516e8a;}async['readChildComponents'](_0x2e0abe){const _0x753118=a147_0x4c6427;try{const _0x2aced4=await xml_1[_0x753118(0x149)][_0x753118(0x17d)](Object[_0x753118(0x164)](_0x2e0abe['files'])[0x0][_0x753118(0x169)](_0x753118(0x179))),_0x48dd6c=CHILD_XML_KEYS[_0x753118(0x16f)](_0x1b8a8b=>xml_1[_0x753118(0x149)][_0x753118(0x167)](_0x2aced4,_0x1b8a8b))['reduce']((_0x5f3e52,_0x10e5bd)=>[..._0x5f3e52,...xml_1['Xml'][_0x753118(0x13f)](_0x2aced4,_0x10e5bd)],[]);return(0x0,utils_1[_0x753118(0x16e)])(_0x2e0abe,_0x2aced4,_0x48dd6c);}catch(_0x594243){throw new Error('Cannot\x20parse\x20childs\x20in\x20'+_0x2e0abe[_0x753118(0x13d)]+'\x20['+_0x2e0abe[_0x753118(0x134)]+']');}}async[a147_0x4c6427(0x177)](_0x495153){const _0x35718e=a147_0x4c6427,_0x8665a4=(0x0,path_1['join'])(this[_0x35718e(0x15b)],_0x495153),_0xada630=_0x495153+(_0x495153['startsWith'](_0x35718e(0x146))?this[_0x35718e(0x135)]:this['META_EXTENSION']),_0x12ddd2=await fs_internal_1['FS']['readDir'](_0x8665a4,!![]),_0x1a5d0e=await fs_internal_1['FS'][_0x35718e(0x144)]((0x0,path_1[_0x35718e(0x145)])(this['dir'],_0xada630),!![])[_0x35718e(0x14e)](()=>null),_0x36ca37={};for(const _0xca6a01 of _0x12ddd2){_0x36ca37[(0x0,path_1['relative'])(this[_0x35718e(0x15b)],_0xca6a01)]=await fs_internal_1['FS'][_0x35718e(0x144)](_0xca6a01,!![]);}return _0x1a5d0e&&(_0x36ca37[(0x0,path_1[_0x35718e(0x16d)])(this['dir'],_0xada630)]=_0x1a5d0e),_0x36ca37;}async[a147_0x4c6427(0x166)](_0x4d8b29){const _0x297c02=a147_0x4c6427;let _0x59e2f3=_0x4d8b29+this['META_EXTENSION'];if(constants_1[_0x297c02(0x16a)][_0x297c02(0x148)](_0x4d8b29))return this[_0x297c02(0x177)](_0x4d8b29);if(await fs_internal_1['FS'][_0x297c02(0x16b)]((0x0,path_1['join'])(this[_0x297c02(0x15b)],_0x4d8b29))||await fs_internal_1['FS'][_0x297c02(0x132)]((0x0,path_1[_0x297c02(0x145)])(this[_0x297c02(0x15b)],_0x59e2f3))){const _0x5658c2=await fs_internal_1['FS'][_0x297c02(0x144)]((0x0,path_1[_0x297c02(0x145)])(this[_0x297c02(0x15b)],_0x59e2f3),!![]),_0x48f5f9=await(0x0,utils_1[_0x297c02(0x131)])({'files':{[_0x59e2f3]:_0x5658c2}})[_0x297c02(0x14e)](()=>null);if(_0x48f5f9&&folder_types_1[_0x297c02(0x153)][_0x297c02(0x17e)](_0x48f5f9))return{[_0x59e2f3]:await fs_internal_1['FS'][_0x297c02(0x144)]((0x0,path_1[_0x297c02(0x145)])(this[_0x297c02(0x15b)],_0x59e2f3),!![])};}if(!(0x0,path_1['extname'])(_0x4d8b29)&&this['isSFDXProject']){const _0x618c4b=_0x4d8b29['split']('/')[0x0],_0x5432d1=(await fs_internal_1['FS'][_0x297c02(0x17c)]((0x0,path_1['join'])(this[_0x297c02(0x15b)],_0x618c4b)))[_0x297c02(0x14f)](_0x3ddc83=>(0x0,git_commit_utils_1[_0x297c02(0x14b)])(_0x3ddc83,(0x0,path_1[_0x297c02(0x145)])(this[_0x297c02(0x15b)],_0x4d8b29)));if(!_0x5432d1)throw new Error('Component\x20\x22'+_0x4d8b29+_0x297c02(0x170)+_0x618c4b+'\x22');_0x4d8b29=(0x0,path_1[_0x297c02(0x16d)])(this[_0x297c02(0x15b)],_0x5432d1),_0x59e2f3=_0x4d8b29+this[_0x297c02(0x165)];}const [_0x59b573,_0x129901]=await Promise[_0x297c02(0x17a)]([fs_internal_1['FS'][_0x297c02(0x144)]((0x0,path_1[_0x297c02(0x145)])(this[_0x297c02(0x15b)],_0x4d8b29),!![])[_0x297c02(0x14e)](()=>null),fs_internal_1['FS'][_0x297c02(0x144)]((0x0,path_1['join'])(this[_0x297c02(0x15b)],_0x59e2f3),!![])[_0x297c02(0x14e)](()=>null)]);return{..._0x59b573?{[_0x4d8b29]:_0x59b573}:{},..._0x129901?{[_0x59e2f3]:_0x129901}:{}};}async[a147_0x4c6427(0x156)](){const _0x4ea96d=a147_0x4c6427,_0x27dd45=[...this[_0x4ea96d(0x159)]];if(this[_0x4ea96d(0x13a)])for(const _0x2f7c24 of _0x27dd45){if(constants_1['BUNDLED_FOLDERS_REGEXP']['test'](_0x2f7c24))continue;if(await fs_internal_1['FS']['isDir']((0x0,path_1['join'])(this[_0x4ea96d(0x15b)],_0x2f7c24))){const _0x24afd0=await fs_internal_1['FS'][_0x4ea96d(0x17c)]((0x0,path_1[_0x4ea96d(0x145)])(this[_0x4ea96d(0x15b)],_0x2f7c24),!![]);_0x27dd45[_0x4ea96d(0x175)](..._0x24afd0['map'](_0x372a1b=>(0x0,path_1[_0x4ea96d(0x16d)])(this[_0x4ea96d(0x15b)],_0x372a1b)));}}this[_0x4ea96d(0x159)]=(0x0,utils_1[_0x4ea96d(0x15c)])(_0x27dd45);}async[a147_0x4c6427(0x17d)](){const _0x2f2117=a147_0x4c6427;await this['init']();const _0x1b87e8=[];for(const _0x2171c3 of this[_0x2f2117(0x159)]){if(_0x2171c3[_0x2f2117(0x141)](_0x2f2117(0x17f)))continue;const _0x449f30={};try{_0x449f30[_0x2f2117(0x157)]=await this['readComponentFiles'](_0x2171c3),_0x449f30[_0x2f2117(0x163)]=constants_1['BUNDLED_FOLDERS_REGEXP'][_0x2f2117(0x148)](_0x2171c3)?_0x2171c3:(0x0,utils_1['extractFileNameFromFiles'])({'files':_0x449f30['files']}),_0x2171c3['startsWith'](_0x2f2117(0x158))?_0x449f30[_0x2f2117(0x134)]=_0x2f2117(0x138):_0x449f30['type']=await(0x0,utils_1[_0x2f2117(0x131)])({'files':_0x449f30[_0x2f2117(0x157)]});}catch(_0x5b19ad){this[_0x2f2117(0x140)][_0x2f2117(0x13b)](_0x2f2117(0x172),_0x2171c3,_0x5b19ad);continue;}_0x449f30[_0x2f2117(0x13d)]=(0x0,utils_1[_0x2f2117(0x17b)])(_0x2171c3),_0x449f30[_0x2f2117(0x133)]=(0x0,crc32_1[_0x2f2117(0x143)])(_0x449f30);if((0x0,utils_1[_0x2f2117(0x160)])(_0x449f30)){const _0x33d642=await this['readChildComponents'](_0x449f30);_0x1b87e8['push'](..._0x33d642);}if(_0x449f30[_0x2f2117(0x134)]==='CustomLabels')continue;settings_types_list_1[_0x2f2117(0x153)][_0x2f2117(0x17e)](_0x449f30['type'])&&(_0x449f30[_0x2f2117(0x134)]=_0x2f2117(0x154)),_0x1b87e8[_0x2f2117(0x175)](_0x449f30);}return _0x1b87e8;}}exports[a147_0x4c6427(0x176)]=MDApiParser;