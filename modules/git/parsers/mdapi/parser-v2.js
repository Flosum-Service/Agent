const a146_0x2f8ca7=a146_0x5286;(function(_0x37b0ab,_0x1ae7ee){const _0x44c1a9=a146_0x5286,_0x28dba2=_0x37b0ab();while(!![]){try{const _0x50f625=-parseInt(_0x44c1a9(0x198))/0x1+parseInt(_0x44c1a9(0x179))/0x2+-parseInt(_0x44c1a9(0x182))/0x3+-parseInt(_0x44c1a9(0x166))/0x4*(parseInt(_0x44c1a9(0x187))/0x5)+-parseInt(_0x44c1a9(0x163))/0x6*(parseInt(_0x44c1a9(0x19d))/0x7)+parseInt(_0x44c1a9(0x190))/0x8*(parseInt(_0x44c1a9(0x17e))/0x9)+parseInt(_0x44c1a9(0x19c))/0xa;if(_0x50f625===_0x1ae7ee)break;else _0x28dba2['push'](_0x28dba2['shift']());}catch(_0x57f586){_0x28dba2['push'](_0x28dba2['shift']());}}}(a146_0x1393,0x7a216));const a146_0x34caf8=(function(){let _0x316f7e=!![];return function(_0x531ee1,_0x38afb8){const _0x498249=_0x316f7e?function(){const _0x5a362c=a146_0x5286;if(_0x38afb8){const _0x21c893=_0x38afb8[_0x5a362c(0x17d)](_0x531ee1,arguments);return _0x38afb8=null,_0x21c893;}}:function(){};return _0x316f7e=![],_0x498249;};}()),a146_0x9ecbca=a146_0x34caf8(this,function(){const _0x59f438=a146_0x5286;return a146_0x9ecbca[_0x59f438(0x17f)]()[_0x59f438(0x192)](_0x59f438(0x186))[_0x59f438(0x17f)]()[_0x59f438(0x162)](a146_0x9ecbca)['search'](_0x59f438(0x186));});function a146_0x5286(_0x50d766,_0x4874a4){const _0x3aefd1=a146_0x1393();return a146_0x5286=function(_0x9ecbca,_0x34caf8){_0x9ecbca=_0x9ecbca-0x15c;let _0x1393c3=_0x3aefd1[_0x9ecbca];return _0x1393c3;},a146_0x5286(_0x50d766,_0x4874a4);}a146_0x9ecbca();'use strict';function a146_0x1393(){const _0x537b20=['../data/child-types-map','MDApiParserV2','20OCnfAu','relative','parse','readBundledComponent','startsWith','WaveTemplateBundle','XmlV2','slice','dir','path','calculateCRC32','../../../../core','readFile','../utils/xml-v2','META_EXTENSION','join','readChildComponents','files','push','1011440EStCxZ','-meta.xml','test','../utils','apply','513AfwCcm','toString','includes','utf-8','439026EnQVkM','../../../../constants','waveTemplates','type','(((.+)+)+)+$','109955qMEwHS','default','Settings','getChildsByName','createChildComponentsFromParent','exists','defineProperty','../utils/crc32','META_EXPERIENCES_EXTENSION','86024hPXlty','BUNDLED_FOLDERS_REGEXP','search','.site-meta.xml','values','logger','__esModule','hasChildNodes','283083QuIjjx','crc','paths','replace','5572400oliEfk','164955jhrVKF','catch','isParentComponent','extractComponentTypeFromFiles','map','foldBundledComponentsPaths','name','readComponent','extractFileNameFromFiles','endsWith','reduce','constructor','162YTWtuP'];a146_0x1393=function(){return _0x537b20;};return a146_0x1393();}var __importDefault=this&&this['__importDefault']||function(_0x145af5){const _0x4e70d1=a146_0x5286;return _0x145af5&&_0x145af5[_0x4e70d1(0x196)]?_0x145af5:{'default':_0x145af5};};Object[a146_0x2f8ca7(0x18d)](exports,a146_0x2f8ca7(0x196),{'value':!![]}),exports['MDApiParserV2']=void 0x0;const fs_internal_1=require('../../internal/fs.internal'),utils_1=require(a146_0x2f8ca7(0x17c)),path_1=require(a146_0x2f8ca7(0x16f)),xml_v2_1=require(a146_0x2f8ca7(0x173)),child_types_map_1=__importDefault(require(a146_0x2f8ca7(0x164))),constants_1=require(a146_0x2f8ca7(0x183)),core_1=require(a146_0x2f8ca7(0x171)),crc32_1=require(a146_0x2f8ca7(0x18e)),folder_types_1=__importDefault(require('../data/folder-types')),settings_types_list_1=__importDefault(require('../data/settings-types-list')),CHILD_XML_KEYS=Object['values'](child_types_map_1['default']);class MDApiParserV2{constructor(_0x3d3f52,_0xbc2d9f){const _0x27f8f8=a146_0x2f8ca7;this['dir']=_0x3d3f52,this['paths']=_0xbc2d9f,this[_0x27f8f8(0x195)]=new core_1['Logger'](MDApiParserV2['name']),this[_0x27f8f8(0x174)]=_0x27f8f8(0x17a),this[_0x27f8f8(0x18f)]=_0x27f8f8(0x193);}async[a146_0x2f8ca7(0x176)](_0x149bc5){const _0x478ccc=a146_0x2f8ca7;try{const _0x2b524f=await xml_v2_1[_0x478ccc(0x16c)][_0x478ccc(0x168)](Object[_0x478ccc(0x194)](_0x149bc5['files'])[0x0]['toString'](_0x478ccc(0x181))),_0x45e271=CHILD_XML_KEYS['filter'](_0x11677d=>xml_v2_1[_0x478ccc(0x16c)][_0x478ccc(0x197)](_0x2b524f,_0x11677d))[_0x478ccc(0x161)]((_0x17de63,_0x2878ef)=>[..._0x17de63,...xml_v2_1[_0x478ccc(0x16c)][_0x478ccc(0x18a)](_0x2b524f,_0x2878ef)],[]);return(0x0,utils_1[_0x478ccc(0x18b)])(_0x149bc5,_0x2b524f,_0x45e271);}catch(_0x1f6ac5){throw new Error('Cannot\x20parse\x20children\x20in\x20'+_0x149bc5['name']+'\x20['+_0x149bc5[_0x478ccc(0x185)]+']');}}async[a146_0x2f8ca7(0x169)](_0x465086){const _0x3a6049=a146_0x2f8ca7,_0x3d0c74=(0x0,path_1['join'])(this[_0x3a6049(0x16e)],_0x465086),_0x2beddd=_0x465086+(_0x465086[_0x3a6049(0x16a)]('experiences')?this[_0x3a6049(0x18f)]:this[_0x3a6049(0x174)]),_0x5d4b5f=await fs_internal_1['FS']['readDir'](_0x3d0c74,!![]),_0x5268ab=await fs_internal_1['FS']['readFile']((0x0,path_1['join'])(this['dir'],_0x2beddd),!![])[_0x3a6049(0x19e)](()=>null),_0x29180f={};for(const _0x512bde of _0x5d4b5f){_0x29180f[(0x0,path_1[_0x3a6049(0x167)])(this[_0x3a6049(0x16e)],_0x512bde)[_0x3a6049(0x19b)](/\\/g,'/')]=await fs_internal_1['FS'][_0x3a6049(0x172)](_0x512bde,!![]);}return _0x5268ab&&(_0x29180f[(0x0,path_1[_0x3a6049(0x167)])(this[_0x3a6049(0x16e)],_0x2beddd)['replace'](/\\/g,'/')]=_0x5268ab),_0x29180f;}async['readComponent'](_0x4e38a0){const _0x15abd0=a146_0x2f8ca7,_0x5095eb=_0x4e38a0+this[_0x15abd0(0x174)];if(constants_1['BUNDLED_FOLDERS_REGEXP'][_0x15abd0(0x17b)](_0x4e38a0))return this[_0x15abd0(0x169)](_0x4e38a0);if(await fs_internal_1['FS'][_0x15abd0(0x18c)]((0x0,path_1[_0x15abd0(0x175)])(this[_0x15abd0(0x16e)],_0x5095eb))){const _0x39b307=await fs_internal_1['FS']['readFile']((0x0,path_1['join'])(this[_0x15abd0(0x16e)],_0x5095eb),!![]),_0x51cc33=await(0x0,utils_1[_0x15abd0(0x1a0)])({'files':{[_0x5095eb]:_0x39b307}})['catch'](()=>null);if(_0x51cc33&&folder_types_1[_0x15abd0(0x188)][_0x15abd0(0x180)](_0x51cc33))return{[_0x5095eb]:_0x39b307};return{[_0x5095eb]:_0x39b307,[_0x4e38a0]:await fs_internal_1['FS']['readFile']((0x0,path_1['join'])(this[_0x15abd0(0x16e)],_0x4e38a0),!![])};}return{[_0x4e38a0]:await fs_internal_1['FS'][_0x15abd0(0x172)]((0x0,path_1['join'])(this[_0x15abd0(0x16e)],_0x4e38a0),!![])};}[a146_0x2f8ca7(0x15c)](){const _0x46c599=a146_0x2f8ca7;this[_0x46c599(0x19a)]=this[_0x46c599(0x19a)][_0x46c599(0x1a1)](_0x211bcb=>constants_1['BUNDLED_FOLDERS_REGEXP']['test'](_0x211bcb)?_0x211bcb['split']('/')[_0x46c599(0x16d)](0x0,0x2)[_0x46c599(0x175)]('/'):_0x211bcb),this['paths']=[...new Set(this['paths'])];}async[a146_0x2f8ca7(0x168)](){const _0x59cbfe=a146_0x2f8ca7,_0x5d9d51=[];this['foldBundledComponentsPaths']();for(const _0x5be6c6 of this['paths']){if(_0x5be6c6[_0x59cbfe(0x160)]('package.xml'))continue;const _0x2941df={};try{_0x2941df[_0x59cbfe(0x177)]=await this[_0x59cbfe(0x15e)](_0x5be6c6),_0x2941df['filePath']=constants_1[_0x59cbfe(0x191)][_0x59cbfe(0x17b)](_0x5be6c6)?_0x5be6c6:(0x0,utils_1[_0x59cbfe(0x15f)])({'files':_0x2941df['files']}),_0x5be6c6[_0x59cbfe(0x16a)](_0x59cbfe(0x184))?_0x2941df['type']=_0x59cbfe(0x16b):_0x2941df[_0x59cbfe(0x185)]=await(0x0,utils_1[_0x59cbfe(0x1a0)])({'files':_0x2941df[_0x59cbfe(0x177)]});}catch(_0x5288c7){this[_0x59cbfe(0x195)]['error']('error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20',_0x5be6c6,_0x5288c7);continue;}_0x2941df[_0x59cbfe(0x15d)]=(0x0,utils_1['extractFilenameFromPath'])(_0x5be6c6),_0x2941df[_0x59cbfe(0x199)]=(0x0,crc32_1[_0x59cbfe(0x170)])(_0x2941df);if((0x0,utils_1[_0x59cbfe(0x19f)])(_0x2941df)){const _0x58c344=await this[_0x59cbfe(0x176)](_0x2941df);_0x5d9d51[_0x59cbfe(0x178)](..._0x58c344);}if(_0x2941df[_0x59cbfe(0x185)]==='CustomLabels')continue;settings_types_list_1['default'][_0x59cbfe(0x180)](_0x2941df[_0x59cbfe(0x185)])&&(_0x2941df[_0x59cbfe(0x185)]=_0x59cbfe(0x189)),_0x5d9d51['push'](_0x2941df);}return _0x5d9d51;}}exports[a146_0x2f8ca7(0x165)]=MDApiParserV2;