const a149_0x21a743=a149_0x28aa;(function(_0xb0218f,_0x105dc2){const _0x243a86=a149_0x28aa,_0x5cbda9=_0xb0218f();while(!![]){try{const _0xd327c1=parseInt(_0x243a86(0x1b7))/0x1*(-parseInt(_0x243a86(0x1ca))/0x2)+-parseInt(_0x243a86(0x1e2))/0x3+parseInt(_0x243a86(0x1fa))/0x4*(parseInt(_0x243a86(0x1f7))/0x5)+parseInt(_0x243a86(0x1b8))/0x6*(parseInt(_0x243a86(0x1ce))/0x7)+-parseInt(_0x243a86(0x1f1))/0x8+parseInt(_0x243a86(0x1fb))/0x9+parseInt(_0x243a86(0x1d2))/0xa*(-parseInt(_0x243a86(0x1da))/0xb);if(_0xd327c1===_0x105dc2)break;else _0x5cbda9['push'](_0x5cbda9['shift']());}catch(_0x132050){_0x5cbda9['push'](_0x5cbda9['shift']());}}}(a149_0x36b2,0x1992d));const a149_0x5458e2=(function(){let _0x52d288=!![];return function(_0x124f30,_0x23be80){const _0x17af2b=_0x52d288?function(){const _0x4a01de=a149_0x28aa;if(_0x23be80){const _0x376923=_0x23be80[_0x4a01de(0x1d6)](_0x124f30,arguments);return _0x23be80=null,_0x376923;}}:function(){};return _0x52d288=![],_0x17af2b;};}()),a149_0x1afc23=a149_0x5458e2(this,function(){const _0x303afb=a149_0x28aa;return a149_0x1afc23[_0x303afb(0x1e9)]()[_0x303afb(0x1c3)](_0x303afb(0x1f3))['toString']()[_0x303afb(0x1e6)](a149_0x1afc23)[_0x303afb(0x1c3)](_0x303afb(0x1f3));});a149_0x1afc23();function a149_0x28aa(_0xeb2982,_0x27853d){const _0x4ad5aa=a149_0x36b2();return a149_0x28aa=function(_0x1afc23,_0x5458e2){_0x1afc23=_0x1afc23-0x1b5;let _0x36b2fe=_0x4ad5aa[_0x1afc23];return _0x36b2fe;},a149_0x28aa(_0xeb2982,_0x27853d);}'use strict';var __importDefault=this&&this[a149_0x21a743(0x1d7)]||function(_0x189330){const _0xcc040f=a149_0x21a743;return _0x189330&&_0x189330[_0xcc040f(0x1f2)]?_0x189330:{'default':_0x189330};};Object[a149_0x21a743(0x1ec)](exports,'__esModule',{'value':!![]}),exports[a149_0x21a743(0x1fc)]=void 0x0;function a149_0x36b2(){const _0x2cfc45=['package.xml','startsWith','Settings','exists','43044fHMTOb','.site-meta.xml','../../internal/fs.internal','name','constructor','waveTemplates','../utils','toString','endsWith','../data/folder-types','defineProperty','relative','readFile','foldBundledComponentsPaths','values','83288NlFcoM','__esModule','(((.+)+)+)+$','default','../utils/crc32','split','5kiieUt','readDir','readChildComponents','507752fiFDYf','1219491vsCZvV','MDApiParserV2','includes','Cannot\x20parse\x20children\x20in\x20','type','META_EXPERIENCES_EXTENSION','crc','error','2qfmwXS','204MxLVhB','../data/settings-types-list','extractComponentTypeFromFiles','hasChildNodes','getChildsByName','isParentComponent','dir','paths','logger','filePath','join','search','BUNDLED_FOLDERS_REGEXP','slice','XmlV2','map','calculateCRC32','error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','92762vSCCbA','CustomLabels','files','utf-8','41685ODzZFZ','extractFilenameFromPath','META_EXTENSION','catch','930iwIAnM','test','replace','push','apply','__importDefault','readComponent','experiences','28699grVegW','parse','-meta.xml','../data/child-types-map'];a149_0x36b2=function(){return _0x2cfc45;};return a149_0x36b2();}const fs_internal_1=require(a149_0x21a743(0x1e4)),utils_1=require(a149_0x21a743(0x1e8)),path_1=require('path'),xml_v2_1=require('../utils/xml-v2'),child_types_map_1=__importDefault(require(a149_0x21a743(0x1dd))),constants_1=require('../../../../constants'),crc32_1=require(a149_0x21a743(0x1f5)),folder_types_1=__importDefault(require(a149_0x21a743(0x1eb))),settings_types_list_1=__importDefault(require(a149_0x21a743(0x1b9))),base_parser_1=require('./base.parser'),CHILD_XML_KEYS=Object[a149_0x21a743(0x1f0)](child_types_map_1['default']);class MDApiParserV2 extends base_parser_1['BaseParser']{constructor(_0x320d40,_0x4e1767){const _0x35394d=a149_0x21a743;super(MDApiParserV2[_0x35394d(0x1e5)],_0x320d40,_0x4e1767),this[_0x35394d(0x1d0)]=_0x35394d(0x1dc),this[_0x35394d(0x200)]=_0x35394d(0x1e3);}async['readChildComponents'](_0x496600){const _0x5f2bd6=a149_0x21a743;try{const _0x38e112=await xml_v2_1['XmlV2'][_0x5f2bd6(0x1db)](Object[_0x5f2bd6(0x1f0)](_0x496600['files'])[0x0][_0x5f2bd6(0x1e9)](_0x5f2bd6(0x1cd))),_0x3e78e7=CHILD_XML_KEYS['filter'](_0x2bd123=>xml_v2_1[_0x5f2bd6(0x1c6)][_0x5f2bd6(0x1bb)](_0x38e112,_0x2bd123))['reduce']((_0x4de55a,_0x57a1d4)=>[..._0x4de55a,...xml_v2_1['XmlV2'][_0x5f2bd6(0x1bc)](_0x38e112,_0x57a1d4)],[]);return(0x0,utils_1['createChildComponentsFromParent'])(_0x496600,_0x38e112,_0x3e78e7);}catch(_0xb0927b){throw new Error(_0x5f2bd6(0x1fe)+_0x496600[_0x5f2bd6(0x1e5)]+'\x20['+_0x496600[_0x5f2bd6(0x1ff)]+']');}}async['readBundledComponent'](_0x249e1e){const _0x99ef4c=a149_0x21a743,_0x1d00e1=(0x0,path_1[_0x99ef4c(0x1c2)])(this[_0x99ef4c(0x1be)],_0x249e1e),_0x325054=_0x249e1e+(_0x249e1e[_0x99ef4c(0x1df)](_0x99ef4c(0x1d9))?this[_0x99ef4c(0x200)]:this[_0x99ef4c(0x1d0)]),_0x4ef9c3=await fs_internal_1['FS'][_0x99ef4c(0x1f8)](_0x1d00e1,!![]),_0x7b76da=await fs_internal_1['FS'][_0x99ef4c(0x1ee)]((0x0,path_1[_0x99ef4c(0x1c2)])(this[_0x99ef4c(0x1be)],_0x325054),!![])[_0x99ef4c(0x1d1)](()=>null),_0x34da82={};for(const _0x551f03 of _0x4ef9c3){_0x34da82[(0x0,path_1['relative'])(this[_0x99ef4c(0x1be)],_0x551f03)[_0x99ef4c(0x1d4)](/\\/g,'/')]=await fs_internal_1['FS'][_0x99ef4c(0x1ee)](_0x551f03,!![]);}return _0x7b76da&&(_0x34da82[(0x0,path_1[_0x99ef4c(0x1ed)])(this[_0x99ef4c(0x1be)],_0x325054)[_0x99ef4c(0x1d4)](/\\/g,'/')]=_0x7b76da),_0x34da82;}async[a149_0x21a743(0x1d8)](_0x32f44f){const _0x1c98e1=a149_0x21a743,_0xf456f7=_0x32f44f+this[_0x1c98e1(0x1d0)];if(constants_1[_0x1c98e1(0x1c4)]['test'](_0x32f44f))return this['readBundledComponent'](_0x32f44f);if(await fs_internal_1['FS'][_0x1c98e1(0x1e1)]((0x0,path_1[_0x1c98e1(0x1c2)])(this[_0x1c98e1(0x1be)],_0xf456f7))){const _0x185beb=await fs_internal_1['FS']['readFile']((0x0,path_1[_0x1c98e1(0x1c2)])(this[_0x1c98e1(0x1be)],_0xf456f7),!![]),_0x1f5cde=await(0x0,utils_1[_0x1c98e1(0x1ba)])({'files':{[_0xf456f7]:_0x185beb}})[_0x1c98e1(0x1d1)](()=>null);if(_0x1f5cde&&folder_types_1[_0x1c98e1(0x1f4)]['includes'](_0x1f5cde))return{[_0xf456f7]:_0x185beb};return{[_0xf456f7]:_0x185beb,[_0x32f44f]:await fs_internal_1['FS']['readFile']((0x0,path_1[_0x1c98e1(0x1c2)])(this[_0x1c98e1(0x1be)],_0x32f44f),!![])};}return{[_0x32f44f]:await fs_internal_1['FS'][_0x1c98e1(0x1ee)]((0x0,path_1['join'])(this[_0x1c98e1(0x1be)],_0x32f44f),!![])};}[a149_0x21a743(0x1ef)](){const _0x4c9863=a149_0x21a743;this[_0x4c9863(0x1bf)]=this[_0x4c9863(0x1bf)][_0x4c9863(0x1c7)](_0x2b37dd=>constants_1[_0x4c9863(0x1c4)]['test'](_0x2b37dd)?_0x2b37dd[_0x4c9863(0x1f6)]('/')[_0x4c9863(0x1c5)](0x0,0x2)[_0x4c9863(0x1c2)]('/'):_0x2b37dd),this[_0x4c9863(0x1bf)]=[...new Set(this['paths'])];}async['parse'](){const _0x2817c5=a149_0x21a743,_0x34a719=[];this['foldBundledComponentsPaths']();for(const _0xfde961 of this[_0x2817c5(0x1bf)]){if(_0xfde961[_0x2817c5(0x1ea)](_0x2817c5(0x1de)))continue;const _0xc42a04={};try{_0xc42a04[_0x2817c5(0x1cc)]=await this['readComponent'](_0xfde961),_0xc42a04[_0x2817c5(0x1c1)]=constants_1[_0x2817c5(0x1c4)][_0x2817c5(0x1d3)](_0xfde961)?_0xfde961:(0x0,utils_1['extractFileNameFromFiles'])({'files':_0xc42a04[_0x2817c5(0x1cc)]}),_0xfde961[_0x2817c5(0x1df)](_0x2817c5(0x1e7))?_0xc42a04['type']='WaveTemplateBundle':_0xc42a04[_0x2817c5(0x1ff)]=await(0x0,utils_1[_0x2817c5(0x1ba)])({'files':_0xc42a04['files']});}catch(_0x3329ee){this[_0x2817c5(0x1c0)][_0x2817c5(0x1b6)](_0x2817c5(0x1c9),_0xfde961,_0x3329ee);continue;}_0xc42a04[_0x2817c5(0x1e5)]=(0x0,utils_1[_0x2817c5(0x1cf)])(_0xfde961),_0xc42a04[_0x2817c5(0x1b5)]=(0x0,crc32_1[_0x2817c5(0x1c8)])(_0xc42a04);if((0x0,utils_1[_0x2817c5(0x1bd)])(_0xc42a04)){const _0xe6e850=await this[_0x2817c5(0x1f9)](_0xc42a04);_0x34a719[_0x2817c5(0x1d5)](..._0xe6e850);}if(_0xc42a04[_0x2817c5(0x1ff)]===_0x2817c5(0x1cb))continue;settings_types_list_1[_0x2817c5(0x1f4)][_0x2817c5(0x1fd)](_0xc42a04[_0x2817c5(0x1ff)])&&(_0xc42a04[_0x2817c5(0x1ff)]=_0x2817c5(0x1e0)),_0x34a719['push'](_0xc42a04);}return _0x34a719;}}exports[a149_0x21a743(0x1fc)]=MDApiParserV2;