const a146_0xa90504=a146_0x2a15;(function(_0x285495,_0x4ca04a){const _0x5e9da2=a146_0x2a15,_0x3ec167=_0x285495();while(!![]){try{const _0x3e102c=-parseInt(_0x5e9da2(0x134))/0x1+parseInt(_0x5e9da2(0x165))/0x2*(-parseInt(_0x5e9da2(0x137))/0x3)+-parseInt(_0x5e9da2(0x13b))/0x4+parseInt(_0x5e9da2(0x17d))/0x5*(parseInt(_0x5e9da2(0x147))/0x6)+parseInt(_0x5e9da2(0x136))/0x7*(-parseInt(_0x5e9da2(0x171))/0x8)+-parseInt(_0x5e9da2(0x17c))/0x9*(-parseInt(_0x5e9da2(0x140))/0xa)+parseInt(_0x5e9da2(0x177))/0xb*(parseInt(_0x5e9da2(0x161))/0xc);if(_0x3e102c===_0x4ca04a)break;else _0x3ec167['push'](_0x3ec167['shift']());}catch(_0x3732bc){_0x3ec167['push'](_0x3ec167['shift']());}}}(a146_0x56fa,0x90240));const a146_0xa1a0dc=(function(){let _0x5773ac=!![];return function(_0x230110,_0x52ce61){const _0x177e53=_0x5773ac?function(){const _0x3345b7=a146_0x2a15;if(_0x52ce61){const _0x1f1a8e=_0x52ce61[_0x3345b7(0x13e)](_0x230110,arguments);return _0x52ce61=null,_0x1f1a8e;}}:function(){};return _0x5773ac=![],_0x177e53;};}()),a146_0x3eaad6=a146_0xa1a0dc(this,function(){const _0x2a5205=a146_0x2a15;return a146_0x3eaad6[_0x2a5205(0x139)]()['search'](_0x2a5205(0x176))[_0x2a5205(0x139)]()[_0x2a5205(0x163)](a146_0x3eaad6)[_0x2a5205(0x153)](_0x2a5205(0x176));});a146_0x3eaad6();'use strict';function a146_0x56fa(){const _0x32b373=['includes','extractFileNameFromFiles','Settings','../utils/crc32','relative','files','readBundledComponent','push','parse','237304UPCZhN','type','error','filePath','values','(((.+)+)+)+$','11LjSwFF','Cannot\x20parse\x20children\x20in\x20','CustomLabels','crc','slice','5229cXEqva','3778435XtiFIh','../../../../core','META_EXPERIENCES_EXTENSION','map','488945GwxTlb','error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','259VxhSSw','27wwpkDp','logger','toString','isParentComponent','170896nlblwl','readComponent','reduce','apply','../data/folder-types','17180GYybsE','startsWith','META_EXTENSION','../data/child-types-map','extractComponentTypeFromFiles','endsWith','readFile','6pKOrgg','readChildComponents','waveTemplates','-meta.xml','defineProperty','replace','../utils','utf-8','catch','test','dir','MDApiParserV2','search','package.xml','XmlV2','paths','../utils/xml-v2','../../internal/fs.internal','name','.site-meta.xml','__esModule','BUNDLED_FOLDERS_REGEXP','default','join','path','foldBundledComponentsPaths','19668588QQcriS','calculateCRC32','constructor','Logger','260732CJspvU','hasChildNodes','../../../../constants'];a146_0x56fa=function(){return _0x32b373;};return a146_0x56fa();}var __importDefault=this&&this['__importDefault']||function(_0x694e17){return _0x694e17&&_0x694e17['__esModule']?_0x694e17:{'default':_0x694e17};};Object[a146_0xa90504(0x14b)](exports,a146_0xa90504(0x15b),{'value':!![]}),exports[a146_0xa90504(0x152)]=void 0x0;const fs_internal_1=require(a146_0xa90504(0x158)),utils_1=require(a146_0xa90504(0x14d)),path_1=require(a146_0xa90504(0x15f)),xml_v2_1=require(a146_0xa90504(0x157)),child_types_map_1=__importDefault(require(a146_0xa90504(0x143))),constants_1=require(a146_0xa90504(0x167)),core_1=require(a146_0xa90504(0x17e)),crc32_1=require(a146_0xa90504(0x16b)),folder_types_1=__importDefault(require(a146_0xa90504(0x13f))),settings_types_list_1=__importDefault(require('../data/settings-types-list')),CHILD_XML_KEYS=Object[a146_0xa90504(0x175)](child_types_map_1[a146_0xa90504(0x15d)]);function a146_0x2a15(_0xb3f6ea,_0x257c07){const _0x5ef641=a146_0x56fa();return a146_0x2a15=function(_0x3eaad6,_0xa1a0dc){_0x3eaad6=_0x3eaad6-0x133;let _0x56faa2=_0x5ef641[_0x3eaad6];return _0x56faa2;},a146_0x2a15(_0xb3f6ea,_0x257c07);}class MDApiParserV2{constructor(_0x49a586,_0x5a48e2){const _0x5e2318=a146_0xa90504;this['dir']=_0x49a586,this['paths']=_0x5a48e2,this[_0x5e2318(0x138)]=new core_1[(_0x5e2318(0x164))](MDApiParserV2[_0x5e2318(0x159)]),this[_0x5e2318(0x142)]=_0x5e2318(0x14a),this[_0x5e2318(0x17f)]=_0x5e2318(0x15a);}async[a146_0xa90504(0x148)](_0x290658){const _0xd7aa28=a146_0xa90504;try{const _0x36829f=await xml_v2_1[_0xd7aa28(0x155)][_0xd7aa28(0x170)](Object[_0xd7aa28(0x175)](_0x290658['files'])[0x0][_0xd7aa28(0x139)](_0xd7aa28(0x14e))),_0x1e1299=CHILD_XML_KEYS['filter'](_0x24d6d7=>xml_v2_1['XmlV2'][_0xd7aa28(0x166)](_0x36829f,_0x24d6d7))[_0xd7aa28(0x13d)]((_0x45cc8f,_0x38066c)=>[..._0x45cc8f,...xml_v2_1[_0xd7aa28(0x155)]['getChildsByName'](_0x36829f,_0x38066c)],[]);return(0x0,utils_1['createChildComponentsFromParent'])(_0x290658,_0x36829f,_0x1e1299);}catch(_0x59f45e){throw new Error(_0xd7aa28(0x178)+_0x290658[_0xd7aa28(0x159)]+'\x20['+_0x290658['type']+']');}}async[a146_0xa90504(0x16e)](_0x440007){const _0x4555da=a146_0xa90504,_0x585bd1=(0x0,path_1[_0x4555da(0x15e)])(this[_0x4555da(0x151)],_0x440007),_0xb792e1=_0x440007+(_0x440007[_0x4555da(0x141)]('experiences')?this[_0x4555da(0x17f)]:this['META_EXTENSION']),_0x688d24=await fs_internal_1['FS']['readDir'](_0x585bd1,!![]),_0x2d81ee=await fs_internal_1['FS'][_0x4555da(0x146)]((0x0,path_1['join'])(this['dir'],_0xb792e1),!![])['catch'](()=>null),_0x19fe0a={};for(const _0x4e51f8 of _0x688d24){_0x19fe0a[(0x0,path_1[_0x4555da(0x16c)])(this['dir'],_0x4e51f8)[_0x4555da(0x14c)](/\\/g,'/')]=await fs_internal_1['FS'][_0x4555da(0x146)](_0x4e51f8,!![]);}return _0x2d81ee&&(_0x19fe0a[(0x0,path_1[_0x4555da(0x16c)])(this[_0x4555da(0x151)],_0xb792e1)[_0x4555da(0x14c)](/\\/g,'/')]=_0x2d81ee),_0x19fe0a;}async[a146_0xa90504(0x13c)](_0x10ee90){const _0x237f33=a146_0xa90504,_0x4c21bf=_0x10ee90+this[_0x237f33(0x142)];if(constants_1[_0x237f33(0x15c)]['test'](_0x10ee90))return this[_0x237f33(0x16e)](_0x10ee90);if(await fs_internal_1['FS']['exists']((0x0,path_1[_0x237f33(0x15e)])(this[_0x237f33(0x151)],_0x4c21bf))){const _0x3ccd78=await fs_internal_1['FS'][_0x237f33(0x146)]((0x0,path_1['join'])(this['dir'],_0x4c21bf),!![]),_0x2e3f71=await(0x0,utils_1['extractComponentTypeFromFiles'])({'files':{[_0x4c21bf]:_0x3ccd78}})[_0x237f33(0x14f)](()=>null);if(_0x2e3f71&&folder_types_1[_0x237f33(0x15d)][_0x237f33(0x168)](_0x2e3f71))return{[_0x4c21bf]:_0x3ccd78};return{[_0x4c21bf]:_0x3ccd78,[_0x10ee90]:await fs_internal_1['FS']['readFile']((0x0,path_1[_0x237f33(0x15e)])(this[_0x237f33(0x151)],_0x10ee90),!![])};}return{[_0x10ee90]:await fs_internal_1['FS'][_0x237f33(0x146)]((0x0,path_1['join'])(this['dir'],_0x10ee90),!![])};}[a146_0xa90504(0x160)](){const _0x4b8ff9=a146_0xa90504;this[_0x4b8ff9(0x156)]=this[_0x4b8ff9(0x156)][_0x4b8ff9(0x133)](_0x2f21f1=>constants_1['BUNDLED_FOLDERS_REGEXP']['test'](_0x2f21f1)?_0x2f21f1['split']('/')[_0x4b8ff9(0x17b)](0x0,0x2)[_0x4b8ff9(0x15e)]('/'):_0x2f21f1),this['paths']=[...new Set(this[_0x4b8ff9(0x156)])];}async[a146_0xa90504(0x170)](){const _0x12daaf=a146_0xa90504,_0x1c744a=[];this[_0x12daaf(0x160)]();for(const _0x38c8d7 of this[_0x12daaf(0x156)]){if(_0x38c8d7[_0x12daaf(0x145)](_0x12daaf(0x154)))continue;const _0x1495df={};try{_0x1495df[_0x12daaf(0x16d)]=await this[_0x12daaf(0x13c)](_0x38c8d7),_0x1495df[_0x12daaf(0x174)]=constants_1[_0x12daaf(0x15c)][_0x12daaf(0x150)](_0x38c8d7)?_0x38c8d7:(0x0,utils_1[_0x12daaf(0x169)])({'files':_0x1495df['files']}),_0x38c8d7[_0x12daaf(0x141)](_0x12daaf(0x149))?_0x1495df[_0x12daaf(0x172)]='WaveTemplateBundle':_0x1495df[_0x12daaf(0x172)]=await(0x0,utils_1[_0x12daaf(0x144)])({'files':_0x1495df[_0x12daaf(0x16d)]});}catch(_0x4d005d){this[_0x12daaf(0x138)][_0x12daaf(0x173)](_0x12daaf(0x135),_0x38c8d7,_0x4d005d);continue;}_0x1495df[_0x12daaf(0x159)]=(0x0,utils_1['extractFilenameFromPath'])(_0x38c8d7),_0x1495df[_0x12daaf(0x17a)]=(0x0,crc32_1[_0x12daaf(0x162)])(_0x1495df);if((0x0,utils_1[_0x12daaf(0x13a)])(_0x1495df)){const _0x13e362=await this[_0x12daaf(0x148)](_0x1495df);_0x1c744a[_0x12daaf(0x16f)](..._0x13e362);}if(_0x1495df['type']===_0x12daaf(0x179))continue;settings_types_list_1['default'][_0x12daaf(0x168)](_0x1495df['type'])&&(_0x1495df['type']=_0x12daaf(0x16a)),_0x1c744a[_0x12daaf(0x16f)](_0x1495df);}return _0x1c744a;}}exports[a146_0xa90504(0x152)]=MDApiParserV2;