const a149_0x52f578=a149_0x33fb;function a149_0x33fb(_0xa86c47,_0x273553){const _0x49690b=a149_0x3b93();return a149_0x33fb=function(_0x24654a,_0x264c75){_0x24654a=_0x24654a-0x1f2;let _0x3b9307=_0x49690b[_0x24654a];return _0x3b9307;},a149_0x33fb(_0xa86c47,_0x273553);}(function(_0x545e36,_0x49525a){const _0x962deb=a149_0x33fb,_0x204b5c=_0x545e36();while(!![]){try{const _0x21c4f0=parseInt(_0x962deb(0x238))/0x1+parseInt(_0x962deb(0x200))/0x2*(parseInt(_0x962deb(0x233))/0x3)+parseInt(_0x962deb(0x219))/0x4*(-parseInt(_0x962deb(0x1f3))/0x5)+parseInt(_0x962deb(0x1f5))/0x6+parseInt(_0x962deb(0x225))/0x7*(parseInt(_0x962deb(0x239))/0x8)+parseInt(_0x962deb(0x22d))/0x9*(parseInt(_0x962deb(0x224))/0xa)+parseInt(_0x962deb(0x214))/0xb*(-parseInt(_0x962deb(0x1ff))/0xc);if(_0x21c4f0===_0x49525a)break;else _0x204b5c['push'](_0x204b5c['shift']());}catch(_0x5b2a5c){_0x204b5c['push'](_0x204b5c['shift']());}}}(a149_0x3b93,0x8bbd9));const a149_0x264c75=(function(){let _0x5d0560=!![];return function(_0x1d78c1,_0x48f8a3){const _0x330759=_0x5d0560?function(){const _0x42f379=a149_0x33fb;if(_0x48f8a3){const _0x3aa3bc=_0x48f8a3[_0x42f379(0x22b)](_0x1d78c1,arguments);return _0x48f8a3=null,_0x3aa3bc;}}:function(){};return _0x5d0560=![],_0x330759;};}()),a149_0x24654a=a149_0x264c75(this,function(){const _0x3c9bf6=a149_0x33fb;return a149_0x24654a[_0x3c9bf6(0x1f6)]()['search'](_0x3c9bf6(0x203))['toString']()[_0x3c9bf6(0x22f)](a149_0x24654a)[_0x3c9bf6(0x1f4)](_0x3c9bf6(0x203));});a149_0x24654a();'use strict';var __importDefault=this&&this[a149_0x52f578(0x20b)]||function(_0x33f484){const _0x13b35f=a149_0x52f578;return _0x33f484&&_0x33f484[_0x13b35f(0x1fa)]?_0x33f484:{'default':_0x33f484};};Object[a149_0x52f578(0x22e)](exports,'__esModule',{'value':!![]}),exports[a149_0x52f578(0x223)]=void 0x0;function a149_0x3b93(){const _0x2956e0=['error','XmlV2','578633vnsKUJ','filePath','relative','default','dir','28nZwCwo','experiences','isParentComponent','readComponent','META_EXTENSION','exists','type','paths','Settings','-meta.xml','MDApiParserV2','350sFZdOe','1794653klaFUu','slice','META_EXPERIENCES_EXTENSION','WaveTemplateBundle','files','replace','apply','../../internal/fs.internal','144198rlaKil','defineProperty','constructor','values','filter','push','90579Hjywxp','join','endsWith','includes','BUNDLED_FOLDERS_REGEXP','327996ogjRQB','16QqcvRk','waveTemplates','catch','readBundledComponent','crc','766315msWtRL','search','4057968sBNolS','toString','map','Cannot\x20parse\x20children\x20in\x20','readChildComponents','__esModule','name','extractComponentTypeFromFiles','parse','./base.parser','264KBCkyz','48EqmHAX','createChildComponentsFromParent','path','(((.+)+)+)+$','error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','../utils','CustomLabels','package.xml','reduce','logger','readFile','__importDefault','../data/settings-types-list','extractFileNameFromFiles','foldBundledComponentsPaths','startsWith','test','../../../../constants'];a149_0x3b93=function(){return _0x2956e0;};return a149_0x3b93();}const fs_internal_1=require(a149_0x52f578(0x22c)),utils_1=require(a149_0x52f578(0x205)),path_1=require(a149_0x52f578(0x202)),xml_v2_1=require('../utils/xml-v2'),child_types_map_1=__importDefault(require('../data/child-types-map')),constants_1=require(a149_0x52f578(0x211)),crc32_1=require('../utils/crc32'),folder_types_1=__importDefault(require('../data/folder-types')),settings_types_list_1=__importDefault(require(a149_0x52f578(0x20c))),base_parser_1=require(a149_0x52f578(0x1fe)),CHILD_XML_KEYS=Object[a149_0x52f578(0x230)](child_types_map_1['default']);class MDApiParserV2 extends base_parser_1['BaseParser']{constructor(_0x20eacc,_0x59347c){const _0x40ffbd=a149_0x52f578;super(MDApiParserV2[_0x40ffbd(0x1fb)],_0x20eacc,_0x59347c),this[_0x40ffbd(0x21d)]=_0x40ffbd(0x222),this[_0x40ffbd(0x227)]='.site-meta.xml';}async[a149_0x52f578(0x1f9)](_0x321a06){const _0x4907ce=a149_0x52f578;try{const _0x4f9e5b=await xml_v2_1['XmlV2']['parse'](Object[_0x4907ce(0x230)](_0x321a06['files'])[0x0][_0x4907ce(0x1f6)]('utf-8')),_0x1d0768=CHILD_XML_KEYS[_0x4907ce(0x231)](_0x4bdd36=>xml_v2_1[_0x4907ce(0x213)]['hasChildNodes'](_0x4f9e5b,_0x4bdd36))[_0x4907ce(0x208)]((_0x320856,_0x52a4de)=>[..._0x320856,...xml_v2_1[_0x4907ce(0x213)]['getChildsByName'](_0x4f9e5b,_0x52a4de)],[]);return(0x0,utils_1[_0x4907ce(0x201)])(_0x321a06,_0x4f9e5b,_0x1d0768);}catch(_0x106c55){throw new Error(_0x4907ce(0x1f8)+_0x321a06[_0x4907ce(0x1fb)]+'\x20['+_0x321a06[_0x4907ce(0x21f)]+']');}}async[a149_0x52f578(0x23c)](_0x5f5b98){const _0x3d2626=a149_0x52f578,_0x22abc3=(0x0,path_1[_0x3d2626(0x234)])(this[_0x3d2626(0x218)],_0x5f5b98),_0x4a246a=_0x5f5b98+(_0x5f5b98[_0x3d2626(0x20f)](_0x3d2626(0x21a))?this[_0x3d2626(0x227)]:this[_0x3d2626(0x21d)]),_0x29e848=await fs_internal_1['FS']['readDir'](_0x22abc3,!![]),_0x24080a=await fs_internal_1['FS'][_0x3d2626(0x20a)]((0x0,path_1[_0x3d2626(0x234)])(this[_0x3d2626(0x218)],_0x4a246a),!![])[_0x3d2626(0x23b)](()=>null),_0x4e5a0e={};for(const _0x2152c0 of _0x29e848){_0x4e5a0e[(0x0,path_1[_0x3d2626(0x216)])(this['dir'],_0x2152c0)['replace'](/\\/g,'/')]=await fs_internal_1['FS'][_0x3d2626(0x20a)](_0x2152c0,!![]);}return _0x24080a&&(_0x4e5a0e[(0x0,path_1[_0x3d2626(0x216)])(this['dir'],_0x4a246a)[_0x3d2626(0x22a)](/\\/g,'/')]=_0x24080a),_0x4e5a0e;}async[a149_0x52f578(0x21c)](_0x15c242){const _0x540dec=a149_0x52f578,_0x223856=_0x15c242+this['META_EXTENSION'];if(constants_1[_0x540dec(0x237)][_0x540dec(0x210)](_0x15c242))return this[_0x540dec(0x23c)](_0x15c242);if(await fs_internal_1['FS'][_0x540dec(0x21e)]((0x0,path_1['join'])(this[_0x540dec(0x218)],_0x223856))){const _0x50aff6=await fs_internal_1['FS']['readFile']((0x0,path_1[_0x540dec(0x234)])(this[_0x540dec(0x218)],_0x223856),!![]),_0x3b90f7=await(0x0,utils_1[_0x540dec(0x1fc)])({'files':{[_0x223856]:_0x50aff6}})[_0x540dec(0x23b)](()=>null);if(_0x3b90f7&&folder_types_1[_0x540dec(0x217)][_0x540dec(0x236)](_0x3b90f7))return{[_0x223856]:_0x50aff6};return{[_0x223856]:_0x50aff6,[_0x15c242]:await fs_internal_1['FS'][_0x540dec(0x20a)]((0x0,path_1['join'])(this[_0x540dec(0x218)],_0x15c242),!![])};}return{[_0x15c242]:await fs_internal_1['FS'][_0x540dec(0x20a)]((0x0,path_1[_0x540dec(0x234)])(this['dir'],_0x15c242),!![])};}['foldBundledComponentsPaths'](){const _0x12d3ce=a149_0x52f578;this['paths']=this[_0x12d3ce(0x220)][_0x12d3ce(0x1f7)](_0x47a1ca=>constants_1['BUNDLED_FOLDERS_REGEXP'][_0x12d3ce(0x210)](_0x47a1ca)?_0x47a1ca['split']('/')[_0x12d3ce(0x226)](0x0,0x2)[_0x12d3ce(0x234)]('/'):_0x47a1ca),this['paths']=[...new Set(this[_0x12d3ce(0x220)])];}async[a149_0x52f578(0x1fd)](){const _0x27f6c0=a149_0x52f578,_0x4285b5=[];this[_0x27f6c0(0x20e)]();for(const _0x42c755 of this[_0x27f6c0(0x220)]){if(_0x42c755[_0x27f6c0(0x235)](_0x27f6c0(0x207)))continue;const _0x1381d7={};try{_0x1381d7[_0x27f6c0(0x229)]=await this[_0x27f6c0(0x21c)](_0x42c755),_0x1381d7[_0x27f6c0(0x215)]=constants_1[_0x27f6c0(0x237)][_0x27f6c0(0x210)](_0x42c755)?_0x42c755:(0x0,utils_1[_0x27f6c0(0x20d)])({'files':_0x1381d7[_0x27f6c0(0x229)]}),_0x42c755[_0x27f6c0(0x20f)](_0x27f6c0(0x23a))?_0x1381d7[_0x27f6c0(0x21f)]=_0x27f6c0(0x228):_0x1381d7[_0x27f6c0(0x21f)]=await(0x0,utils_1[_0x27f6c0(0x1fc)])({'files':_0x1381d7['files']});}catch(_0x4cb84e){this[_0x27f6c0(0x209)][_0x27f6c0(0x212)](_0x27f6c0(0x204),_0x42c755,_0x4cb84e);continue;}_0x1381d7[_0x27f6c0(0x1fb)]=(0x0,utils_1['extractFilenameFromPath'])(_0x42c755),_0x1381d7[_0x27f6c0(0x1f2)]=(0x0,crc32_1['calculateCRC32'])(_0x1381d7);if((0x0,utils_1[_0x27f6c0(0x21b)])(_0x1381d7)){const _0x2d5578=await this[_0x27f6c0(0x1f9)](_0x1381d7);_0x4285b5[_0x27f6c0(0x232)](..._0x2d5578);}if(_0x1381d7[_0x27f6c0(0x21f)]===_0x27f6c0(0x206))continue;settings_types_list_1[_0x27f6c0(0x217)][_0x27f6c0(0x236)](_0x1381d7[_0x27f6c0(0x21f)])&&(_0x1381d7[_0x27f6c0(0x21f)]=_0x27f6c0(0x221)),_0x4285b5['push'](_0x1381d7);}return _0x4285b5;}}exports[a149_0x52f578(0x223)]=MDApiParserV2;