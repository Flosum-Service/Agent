const a149_0x396a83=a149_0x2370;(function(_0xea4214,_0x5eec4f){const _0x1c5a6a=a149_0x2370,_0x384ec4=_0xea4214();while(!![]){try{const _0x1576e8=-parseInt(_0x1c5a6a(0x14a))/0x1+-parseInt(_0x1c5a6a(0x139))/0x2+-parseInt(_0x1c5a6a(0x167))/0x3*(-parseInt(_0x1c5a6a(0x13b))/0x4)+parseInt(_0x1c5a6a(0x151))/0x5+parseInt(_0x1c5a6a(0x175))/0x6*(parseInt(_0x1c5a6a(0x174))/0x7)+-parseInt(_0x1c5a6a(0x156))/0x8+parseInt(_0x1c5a6a(0x149))/0x9*(parseInt(_0x1c5a6a(0x15e))/0xa);if(_0x1576e8===_0x5eec4f)break;else _0x384ec4['push'](_0x384ec4['shift']());}catch(_0x2f5e72){_0x384ec4['push'](_0x384ec4['shift']());}}}(a149_0x1fa5,0xd891d));function a149_0x1fa5(){const _0x2bc937=['MDApiParserV2','../data/settings-types-list','readBundledComponent','__importDefault','isParentComponent','package.xml','replace','type','19408914UVpWfm','663026IfbpSa','BaseParser','readFile','../../internal/fs.internal','__esModule','calculateCRC32','join','1340805hKyHok','./base.parser','extractComponentTypeFromFiles','endsWith','hasChildNodes','13334912yWthyB','test','filePath','constructor','slice','WaveTemplateBundle','createChildComponentsFromParent','../data/folder-types','10mToYYF','values','foldBundledComponentsPaths','XmlV2','toString','META_EXTENSION','paths','relative','map','11415ygGbyT','../data/child-types-map','dir','parse','files','exists','path','readChildComponents','default','crc','META_EXPERIENCES_EXTENSION','name','startsWith','1939qmUcgS','1842jJXiEA','BUNDLED_FOLDERS_REGEXP','../utils/xml-v2','apply','Cannot\x20parse\x20children\x20in\x20','catch','includes','extractFileNameFromFiles','1987244AZFsgA','(((.+)+)+)+$','1788OQLdCG','experiences','push','-meta.xml','logger','readComponent'];a149_0x1fa5=function(){return _0x2bc937;};return a149_0x1fa5();}const a149_0x5e22ec=(function(){let _0x43a436=!![];return function(_0x5d3159,_0x50e985){const _0x2d7876=_0x43a436?function(){const _0x1f7574=a149_0x2370;if(_0x50e985){const _0x47d61b=_0x50e985[_0x1f7574(0x178)](_0x5d3159,arguments);return _0x50e985=null,_0x47d61b;}}:function(){};return _0x43a436=![],_0x2d7876;};}()),a149_0x4a2893=a149_0x5e22ec(this,function(){const _0x359841=a149_0x2370;return a149_0x4a2893[_0x359841(0x162)]()['search'](_0x359841(0x13a))[_0x359841(0x162)]()[_0x359841(0x159)](a149_0x4a2893)['search'](_0x359841(0x13a));});a149_0x4a2893();'use strict';function a149_0x2370(_0x47f66f,_0x5da64f){const _0x2ee364=a149_0x1fa5();return a149_0x2370=function(_0x4a2893,_0x5e22ec){_0x4a2893=_0x4a2893-0x135;let _0x1fa5f7=_0x2ee364[_0x4a2893];return _0x1fa5f7;},a149_0x2370(_0x47f66f,_0x5da64f);}var __importDefault=this&&this[a149_0x396a83(0x144)]||function(_0x29acad){const _0x3e05e0=a149_0x396a83;return _0x29acad&&_0x29acad[_0x3e05e0(0x14e)]?_0x29acad:{'default':_0x29acad};};Object['defineProperty'](exports,a149_0x396a83(0x14e),{'value':!![]}),exports[a149_0x396a83(0x141)]=void 0x0;const fs_internal_1=require(a149_0x396a83(0x14d)),utils_1=require('../utils'),path_1=require(a149_0x396a83(0x16d)),xml_v2_1=require(a149_0x396a83(0x177)),child_types_map_1=__importDefault(require(a149_0x396a83(0x168))),constants_1=require('../../../../constants'),crc32_1=require('../utils/crc32'),folder_types_1=__importDefault(require(a149_0x396a83(0x15d))),settings_types_list_1=__importDefault(require(a149_0x396a83(0x142))),base_parser_1=require(a149_0x396a83(0x152)),CHILD_XML_KEYS=Object[a149_0x396a83(0x15f)](child_types_map_1[a149_0x396a83(0x16f)]);class MDApiParserV2 extends base_parser_1[a149_0x396a83(0x14b)]{constructor(_0x3a4b8f,_0xe881d0){const _0x3f3752=a149_0x396a83;super(MDApiParserV2[_0x3f3752(0x172)],_0x3a4b8f,_0xe881d0),this['META_EXTENSION']=_0x3f3752(0x13e),this['META_EXPERIENCES_EXTENSION']='.site-meta.xml';}async[a149_0x396a83(0x16e)](_0xbac2cb){const _0x2219ab=a149_0x396a83;try{const _0x110cba=await xml_v2_1[_0x2219ab(0x161)][_0x2219ab(0x16a)](Object['values'](_0xbac2cb[_0x2219ab(0x16b)])[0x0]['toString']('utf-8')),_0x24694e=CHILD_XML_KEYS['filter'](_0x5ae65f=>xml_v2_1[_0x2219ab(0x161)][_0x2219ab(0x155)](_0x110cba,_0x5ae65f))['reduce']((_0xe43b8b,_0x1f7a38)=>[..._0xe43b8b,...xml_v2_1[_0x2219ab(0x161)]['getChildsByName'](_0x110cba,_0x1f7a38)],[]);return(0x0,utils_1[_0x2219ab(0x15c)])(_0xbac2cb,_0x110cba,_0x24694e);}catch(_0x37e1dc){throw new Error(_0x2219ab(0x135)+_0xbac2cb[_0x2219ab(0x172)]+'\x20['+_0xbac2cb['type']+']');}}async['readBundledComponent'](_0x23da3b){const _0x3f37d7=a149_0x396a83,_0x5b1174=(0x0,path_1[_0x3f37d7(0x150)])(this[_0x3f37d7(0x169)],_0x23da3b),_0x44db55=_0x23da3b+(_0x23da3b[_0x3f37d7(0x173)](_0x3f37d7(0x13c))?this[_0x3f37d7(0x171)]:this[_0x3f37d7(0x163)]),_0x445e42=await fs_internal_1['FS']['readDir'](_0x5b1174,!![]),_0x47e24e=await fs_internal_1['FS'][_0x3f37d7(0x14c)]((0x0,path_1[_0x3f37d7(0x150)])(this[_0x3f37d7(0x169)],_0x44db55),!![])[_0x3f37d7(0x136)](()=>null),_0x3ec27a={};for(const _0x1c444e of _0x445e42){_0x3ec27a[(0x0,path_1[_0x3f37d7(0x165)])(this[_0x3f37d7(0x169)],_0x1c444e)[_0x3f37d7(0x147)](/\\/g,'/')]=await fs_internal_1['FS']['readFile'](_0x1c444e,!![]);}return _0x47e24e&&(_0x3ec27a[(0x0,path_1[_0x3f37d7(0x165)])(this[_0x3f37d7(0x169)],_0x44db55)[_0x3f37d7(0x147)](/\\/g,'/')]=_0x47e24e),_0x3ec27a;}async[a149_0x396a83(0x140)](_0x18fd08){const _0x5d4aac=a149_0x396a83,_0x23358b=_0x18fd08+this[_0x5d4aac(0x163)];if(constants_1['BUNDLED_FOLDERS_REGEXP'][_0x5d4aac(0x157)](_0x18fd08))return this[_0x5d4aac(0x143)](_0x18fd08);if(await fs_internal_1['FS'][_0x5d4aac(0x16c)]((0x0,path_1[_0x5d4aac(0x150)])(this[_0x5d4aac(0x169)],_0x23358b))){const _0x5a66ec=await fs_internal_1['FS'][_0x5d4aac(0x14c)]((0x0,path_1[_0x5d4aac(0x150)])(this['dir'],_0x23358b),!![]),_0x44c6a3=await(0x0,utils_1['extractComponentTypeFromFiles'])({'files':{[_0x23358b]:_0x5a66ec}})[_0x5d4aac(0x136)](()=>null);if(_0x44c6a3&&folder_types_1['default'][_0x5d4aac(0x137)](_0x44c6a3))return{[_0x23358b]:_0x5a66ec};return{[_0x23358b]:_0x5a66ec,[_0x18fd08]:await fs_internal_1['FS']['readFile']((0x0,path_1[_0x5d4aac(0x150)])(this[_0x5d4aac(0x169)],_0x18fd08),!![])};}return{[_0x18fd08]:await fs_internal_1['FS'][_0x5d4aac(0x14c)]((0x0,path_1[_0x5d4aac(0x150)])(this[_0x5d4aac(0x169)],_0x18fd08),!![])};}[a149_0x396a83(0x160)](){const _0x9674ad=a149_0x396a83;this[_0x9674ad(0x164)]=this[_0x9674ad(0x164)][_0x9674ad(0x166)](_0x400c89=>constants_1['BUNDLED_FOLDERS_REGEXP']['test'](_0x400c89)?_0x400c89['split']('/')[_0x9674ad(0x15a)](0x0,0x2)[_0x9674ad(0x150)]('/'):_0x400c89),this[_0x9674ad(0x164)]=[...new Set(this[_0x9674ad(0x164)])];}async[a149_0x396a83(0x16a)](){const _0xc2a0fb=a149_0x396a83,_0x5d0963=[];this[_0xc2a0fb(0x160)]();for(const _0x2c902c of this[_0xc2a0fb(0x164)]){if(_0x2c902c[_0xc2a0fb(0x154)](_0xc2a0fb(0x146)))continue;const _0x123371={};try{_0x123371['files']=await this[_0xc2a0fb(0x140)](_0x2c902c),_0x123371[_0xc2a0fb(0x158)]=constants_1[_0xc2a0fb(0x176)][_0xc2a0fb(0x157)](_0x2c902c)?_0x2c902c:(0x0,utils_1[_0xc2a0fb(0x138)])({'files':_0x123371['files']}),_0x2c902c['startsWith']('waveTemplates')?_0x123371['type']=_0xc2a0fb(0x15b):_0x123371[_0xc2a0fb(0x148)]=await(0x0,utils_1[_0xc2a0fb(0x153)])({'files':_0x123371[_0xc2a0fb(0x16b)]});}catch(_0x3c9293){this[_0xc2a0fb(0x13f)]['error']('error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20',_0x2c902c,_0x3c9293);continue;}_0x123371[_0xc2a0fb(0x172)]=(0x0,utils_1['extractFilenameFromPath'])(_0x2c902c),_0x123371[_0xc2a0fb(0x170)]=(0x0,crc32_1[_0xc2a0fb(0x14f)])(_0x123371);if((0x0,utils_1[_0xc2a0fb(0x145)])(_0x123371)){const _0x4e506c=await this[_0xc2a0fb(0x16e)](_0x123371);_0x5d0963['push'](..._0x4e506c);}if(_0x123371[_0xc2a0fb(0x148)]==='CustomLabels')continue;settings_types_list_1[_0xc2a0fb(0x16f)][_0xc2a0fb(0x137)](_0x123371[_0xc2a0fb(0x148)])&&(_0x123371[_0xc2a0fb(0x148)]='Settings'),_0x5d0963[_0xc2a0fb(0x13d)](_0x123371);}return _0x5d0963;}}exports[a149_0x396a83(0x141)]=MDApiParserV2;