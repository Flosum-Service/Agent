const a149_0x5bdfcd=a149_0x4037;(function(_0x17d847,_0x28cdee){const _0x27acd2=a149_0x4037,_0x480fee=_0x17d847();while(!![]){try{const _0x8b51c9=parseInt(_0x27acd2(0x182))/0x1+parseInt(_0x27acd2(0x16c))/0x2*(parseInt(_0x27acd2(0x169))/0x3)+-parseInt(_0x27acd2(0x17f))/0x4+parseInt(_0x27acd2(0x191))/0x5*(parseInt(_0x27acd2(0x183))/0x6)+-parseInt(_0x27acd2(0x180))/0x7+-parseInt(_0x27acd2(0x15d))/0x8*(parseInt(_0x27acd2(0x160))/0x9)+-parseInt(_0x27acd2(0x18a))/0xa;if(_0x8b51c9===_0x28cdee)break;else _0x480fee['push'](_0x480fee['shift']());}catch(_0x2e6ac5){_0x480fee['push'](_0x480fee['shift']());}}}(a149_0x17a1,0x7cc98));const a149_0x48fd84=(function(){let _0x314ec0=!![];return function(_0x38ceef,_0x1f0f75){const _0x33f3bd=_0x314ec0?function(){const _0x5a3aba=a149_0x4037;if(_0x1f0f75){const _0x3b8bd7=_0x1f0f75[_0x5a3aba(0x14c)](_0x38ceef,arguments);return _0x1f0f75=null,_0x3b8bd7;}}:function(){};return _0x314ec0=![],_0x33f3bd;};}()),a149_0x1d22d4=a149_0x48fd84(this,function(){const _0xba91a4=a149_0x4037;return a149_0x1d22d4[_0xba91a4(0x18d)]()['search'](_0xba91a4(0x164))[_0xba91a4(0x18d)]()[_0xba91a4(0x15e)](a149_0x1d22d4)[_0xba91a4(0x153)](_0xba91a4(0x164));});a149_0x1d22d4();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x16797e){const _0x1980fe=a149_0x4037;return _0x16797e&&_0x16797e[_0x1980fe(0x172)]?_0x16797e:{'default':_0x16797e};};Object[a149_0x5bdfcd(0x15f)](exports,a149_0x5bdfcd(0x172),{'value':!![]}),exports['MDApiParserV2']=void 0x0;function a149_0x4037(_0x5dc031,_0x5bfc8b){const _0x58b84e=a149_0x17a1();return a149_0x4037=function(_0x1d22d4,_0x48fd84){_0x1d22d4=_0x1d22d4-0x14c;let _0x17a19f=_0x58b84e[_0x1d22d4];return _0x17a19f;},a149_0x4037(_0x5dc031,_0x5bfc8b);}function a149_0x17a1(){const _0x209841=['getChildsByName','688990wsMYUK','1066218khxAOr','META_EXTENSION','slice','foldBundledComponentsPaths','crc','replace','type','4298840EJclYx','parse','error','toString','catch','experiences','extractComponentTypeFromFiles','5WFcfEy','apply','test','files','name','.site-meta.xml','../../../../constants','dir','search','readComponent','Cannot\x20parse\x20children\x20in\x20','default','relative','readFile','../data/settings-types-list','startsWith','extractFileNameFromFiles','waveTemplates','1448JpnLdY','constructor','defineProperty','6102hDfYMW','path','../data/child-types-map','readBundledComponent','(((.+)+)+)+$','../utils/xml-v2','XmlV2','../../internal/fs.internal','logger','28839sbAzmT','-meta.xml','paths','58cGspyV','filter','./base.parser','filePath','readChildComponents','exists','__esModule','split','includes','META_EXPERIENCES_EXTENSION','join','extractFilenameFromPath','MDApiParserV2','WaveTemplateBundle','BUNDLED_FOLDERS_REGEXP','../data/folder-types','reduce','BaseParser','readDir','217656jOTIMB','191282XZniny'];a149_0x17a1=function(){return _0x209841;};return a149_0x17a1();}const fs_internal_1=require(a149_0x5bdfcd(0x167)),utils_1=require('../utils'),path_1=require(a149_0x5bdfcd(0x161)),xml_v2_1=require(a149_0x5bdfcd(0x165)),child_types_map_1=__importDefault(require(a149_0x5bdfcd(0x162))),constants_1=require(a149_0x5bdfcd(0x151)),crc32_1=require('../utils/crc32'),folder_types_1=__importDefault(require(a149_0x5bdfcd(0x17b))),settings_types_list_1=__importDefault(require(a149_0x5bdfcd(0x159))),base_parser_1=require(a149_0x5bdfcd(0x16e)),CHILD_XML_KEYS=Object['values'](child_types_map_1['default']);class MDApiParserV2 extends base_parser_1[a149_0x5bdfcd(0x17d)]{constructor(_0x4a477f,_0x1cceb1){const _0x26c386=a149_0x5bdfcd;super(MDApiParserV2[_0x26c386(0x14f)],_0x4a477f,_0x1cceb1),this[_0x26c386(0x184)]=_0x26c386(0x16a),this[_0x26c386(0x175)]=_0x26c386(0x150);}async[a149_0x5bdfcd(0x170)](_0x1c3c42){const _0x429ef8=a149_0x5bdfcd;try{const _0x346c9b=await xml_v2_1[_0x429ef8(0x166)][_0x429ef8(0x18b)](Object['values'](_0x1c3c42[_0x429ef8(0x14e)])[0x0][_0x429ef8(0x18d)]('utf-8')),_0x3a074d=CHILD_XML_KEYS[_0x429ef8(0x16d)](_0x593049=>xml_v2_1[_0x429ef8(0x166)]['hasChildNodes'](_0x346c9b,_0x593049))[_0x429ef8(0x17c)]((_0x40f020,_0x11e5eb)=>[..._0x40f020,...xml_v2_1[_0x429ef8(0x166)][_0x429ef8(0x181)](_0x346c9b,_0x11e5eb)],[]);return(0x0,utils_1['createChildComponentsFromParent'])(_0x1c3c42,_0x346c9b,_0x3a074d);}catch(_0x56da8a){throw new Error(_0x429ef8(0x155)+_0x1c3c42[_0x429ef8(0x14f)]+'\x20['+_0x1c3c42[_0x429ef8(0x189)]+']');}}async[a149_0x5bdfcd(0x163)](_0x3d8776){const _0x378dd8=a149_0x5bdfcd,_0x23992f=(0x0,path_1[_0x378dd8(0x176)])(this[_0x378dd8(0x152)],_0x3d8776),_0x470990=_0x3d8776+(_0x3d8776[_0x378dd8(0x15a)](_0x378dd8(0x18f))?this[_0x378dd8(0x175)]:this[_0x378dd8(0x184)]),_0x3e938e=await fs_internal_1['FS'][_0x378dd8(0x17e)](_0x23992f,!![]),_0x46bbd4=await fs_internal_1['FS'][_0x378dd8(0x158)]((0x0,path_1[_0x378dd8(0x176)])(this[_0x378dd8(0x152)],_0x470990),!![])[_0x378dd8(0x18e)](()=>null),_0x1a5fb2={};for(const _0x1bbcfa of _0x3e938e){_0x1a5fb2[(0x0,path_1['relative'])(this[_0x378dd8(0x152)],_0x1bbcfa)[_0x378dd8(0x188)](/\\/g,'/')]=await fs_internal_1['FS']['readFile'](_0x1bbcfa,!![]);}return _0x46bbd4&&(_0x1a5fb2[(0x0,path_1[_0x378dd8(0x157)])(this[_0x378dd8(0x152)],_0x470990)[_0x378dd8(0x188)](/\\/g,'/')]=_0x46bbd4),_0x1a5fb2;}async[a149_0x5bdfcd(0x154)](_0x1811da){const _0x3a70ac=a149_0x5bdfcd,_0x24db98=_0x1811da+this[_0x3a70ac(0x184)];if(constants_1['BUNDLED_FOLDERS_REGEXP'][_0x3a70ac(0x14d)](_0x1811da))return this[_0x3a70ac(0x163)](_0x1811da);if(await fs_internal_1['FS'][_0x3a70ac(0x171)]((0x0,path_1['join'])(this[_0x3a70ac(0x152)],_0x24db98))){const _0x24f01c=await fs_internal_1['FS']['readFile']((0x0,path_1['join'])(this[_0x3a70ac(0x152)],_0x24db98),!![]),_0x3d7fd4=await(0x0,utils_1[_0x3a70ac(0x190)])({'files':{[_0x24db98]:_0x24f01c}})[_0x3a70ac(0x18e)](()=>null);if(_0x3d7fd4&&folder_types_1[_0x3a70ac(0x156)][_0x3a70ac(0x174)](_0x3d7fd4))return{[_0x24db98]:_0x24f01c};return{[_0x24db98]:_0x24f01c,[_0x1811da]:await fs_internal_1['FS'][_0x3a70ac(0x158)]((0x0,path_1['join'])(this['dir'],_0x1811da),!![])};}return{[_0x1811da]:await fs_internal_1['FS'][_0x3a70ac(0x158)]((0x0,path_1[_0x3a70ac(0x176)])(this['dir'],_0x1811da),!![])};}[a149_0x5bdfcd(0x186)](){const _0x196625=a149_0x5bdfcd;this[_0x196625(0x16b)]=this['paths']['map'](_0x36ab42=>constants_1['BUNDLED_FOLDERS_REGEXP'][_0x196625(0x14d)](_0x36ab42)?_0x36ab42[_0x196625(0x173)]('/')[_0x196625(0x185)](0x0,0x2)[_0x196625(0x176)]('/'):_0x36ab42),this[_0x196625(0x16b)]=[...new Set(this[_0x196625(0x16b)])];}async[a149_0x5bdfcd(0x18b)](){const _0x3a37c0=a149_0x5bdfcd,_0x1afeff=[];this[_0x3a37c0(0x186)]();for(const _0x1ba436 of this['paths']){if(_0x1ba436['endsWith']('package.xml'))continue;const _0x3e986a={};try{_0x3e986a[_0x3a37c0(0x14e)]=await this[_0x3a37c0(0x154)](_0x1ba436),_0x3e986a[_0x3a37c0(0x16f)]=constants_1[_0x3a37c0(0x17a)][_0x3a37c0(0x14d)](_0x1ba436)?_0x1ba436:(0x0,utils_1[_0x3a37c0(0x15b)])({'files':_0x3e986a[_0x3a37c0(0x14e)]}),_0x1ba436[_0x3a37c0(0x15a)](_0x3a37c0(0x15c))?_0x3e986a[_0x3a37c0(0x189)]=_0x3a37c0(0x179):_0x3e986a['type']=await(0x0,utils_1[_0x3a37c0(0x190)])({'files':_0x3e986a[_0x3a37c0(0x14e)]});}catch(_0x35cf5a){this[_0x3a37c0(0x168)][_0x3a37c0(0x18c)]('error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20',_0x1ba436,_0x35cf5a);continue;}_0x3e986a[_0x3a37c0(0x14f)]=(0x0,utils_1[_0x3a37c0(0x177)])(_0x1ba436),_0x3e986a[_0x3a37c0(0x187)]=(0x0,crc32_1['calculateCRC32'])(_0x3e986a);if((0x0,utils_1['isParentComponent'])(_0x3e986a)){const _0x3e60e5=await this['readChildComponents'](_0x3e986a);_0x1afeff['push'](..._0x3e60e5);}if(_0x3e986a[_0x3a37c0(0x189)]==='CustomLabels')continue;settings_types_list_1[_0x3a37c0(0x156)][_0x3a37c0(0x174)](_0x3e986a[_0x3a37c0(0x189)])&&(_0x3e986a[_0x3a37c0(0x189)]='Settings'),_0x1afeff['push'](_0x3e986a);}return _0x1afeff;}}exports[a149_0x5bdfcd(0x178)]=MDApiParserV2;