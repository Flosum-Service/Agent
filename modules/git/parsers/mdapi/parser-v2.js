const a146_0x12e827=a146_0x4588;(function(_0x2e508b,_0x107130){const _0x38f532=a146_0x4588,_0x387c64=_0x2e508b();while(!![]){try{const _0x1650f2=parseInt(_0x38f532(0x12b))/0x1+-parseInt(_0x38f532(0x14d))/0x2+-parseInt(_0x38f532(0x13d))/0x3*(parseInt(_0x38f532(0x154))/0x4)+parseInt(_0x38f532(0x139))/0x5+-parseInt(_0x38f532(0x11e))/0x6*(parseInt(_0x38f532(0x123))/0x7)+-parseInt(_0x38f532(0x11f))/0x8+parseInt(_0x38f532(0x124))/0x9;if(_0x1650f2===_0x107130)break;else _0x387c64['push'](_0x387c64['shift']());}catch(_0x4547db){_0x387c64['push'](_0x387c64['shift']());}}}(a146_0x26f2,0xbe57e));const a146_0x3a43dd=(function(){let _0x2caeab=!![];return function(_0x4bf5f2,_0x541570){const _0x5a1336=_0x2caeab?function(){const _0x4bc43c=a146_0x4588;if(_0x541570){const _0x32238d=_0x541570[_0x4bc43c(0x135)](_0x4bf5f2,arguments);return _0x541570=null,_0x32238d;}}:function(){};return _0x2caeab=![],_0x5a1336;};}()),a146_0x53ed10=a146_0x3a43dd(this,function(){const _0x5e20fd=a146_0x4588;return a146_0x53ed10[_0x5e20fd(0x15f)]()[_0x5e20fd(0x136)](_0x5e20fd(0x11d))['toString']()[_0x5e20fd(0x156)](a146_0x53ed10)['search'](_0x5e20fd(0x11d));});a146_0x53ed10();function a146_0x4588(_0x881346,_0x158dd5){const _0xf2bc8a=a146_0x26f2();return a146_0x4588=function(_0x53ed10,_0x3a43dd){_0x53ed10=_0x53ed10-0x119;let _0x26f216=_0xf2bc8a[_0x53ed10];return _0x26f216;},a146_0x4588(_0x881346,_0x158dd5);}'use strict';var __importDefault=this&&this[a146_0x12e827(0x152)]||function(_0x27b24c){const _0xfb5b83=a146_0x12e827;return _0x27b24c&&_0x27b24c[_0xfb5b83(0x12a)]?_0x27b24c:{'default':_0x27b24c};};function a146_0x26f2(){const _0x1b44eb=['../data/child-types-map','filePath','map','21zUrvIS','28860039MWuBCQ','Logger','test','reduce','slice','utf-8','__esModule','722197kctDCu','paths','values','isParentComponent','BUNDLED_FOLDERS_REGEXP','parse','../utils','replace','hasChildNodes','readComponent','apply','search','getChildsByName','readDir','4819590ZbTvsT','path','Settings','experiences','1352067iuAsMp','-meta.xml','extractComponentTypeFromFiles','name','../data/folder-types','../utils/xml-v2','readChildComponents','META_EXPERIENCES_EXTENSION','WaveTemplateBundle','readBundledComponent','filter','relative','endsWith','startsWith','default','exists','1689256eOcItY','catch','dir','extractFilenameFromPath','calculateCRC32','__importDefault','files','4FbNZrr','defineProperty','constructor','error','push','readFile','extractFileNameFromFiles','../data/settings-types-list','../utils/crc32','../../internal/fs.internal','MDApiParserV2','toString','.site-meta.xml','META_EXTENSION','logger','join','XmlV2','../../../../constants','includes','type','(((.+)+)+)+$','2546898cMtKAj','12354992BMCTnP'];a146_0x26f2=function(){return _0x1b44eb;};return a146_0x26f2();}Object[a146_0x12e827(0x155)](exports,'__esModule',{'value':!![]}),exports['MDApiParserV2']=void 0x0;const fs_internal_1=require(a146_0x12e827(0x15d)),utils_1=require(a146_0x12e827(0x131)),path_1=require(a146_0x12e827(0x13a)),xml_v2_1=require(a146_0x12e827(0x142)),child_types_map_1=__importDefault(require(a146_0x12e827(0x120))),constants_1=require(a146_0x12e827(0x11a)),core_1=require('../../../../core'),crc32_1=require(a146_0x12e827(0x15c)),folder_types_1=__importDefault(require(a146_0x12e827(0x141))),settings_types_list_1=__importDefault(require(a146_0x12e827(0x15b))),CHILD_XML_KEYS=Object['values'](child_types_map_1[a146_0x12e827(0x14b)]);class MDApiParserV2{constructor(_0x81de73,_0x1f5ef4){const _0x598c97=a146_0x12e827;this[_0x598c97(0x14f)]=_0x81de73,this[_0x598c97(0x12c)]=_0x1f5ef4,this[_0x598c97(0x162)]=new core_1[(_0x598c97(0x125))](MDApiParserV2[_0x598c97(0x140)]),this[_0x598c97(0x161)]=_0x598c97(0x13e),this['META_EXPERIENCES_EXTENSION']=_0x598c97(0x160);}async[a146_0x12e827(0x143)](_0x493c0b){const _0x24ea60=a146_0x12e827;try{const _0x27271d=await xml_v2_1['XmlV2'][_0x24ea60(0x130)](Object[_0x24ea60(0x12d)](_0x493c0b[_0x24ea60(0x153)])[0x0][_0x24ea60(0x15f)](_0x24ea60(0x129))),_0x356c01=CHILD_XML_KEYS[_0x24ea60(0x147)](_0x2e0fdd=>xml_v2_1['XmlV2'][_0x24ea60(0x133)](_0x27271d,_0x2e0fdd))[_0x24ea60(0x127)]((_0x877e37,_0x15d85b)=>[..._0x877e37,...xml_v2_1[_0x24ea60(0x119)][_0x24ea60(0x137)](_0x27271d,_0x15d85b)],[]);return(0x0,utils_1['createChildComponentsFromParent'])(_0x493c0b,_0x27271d,_0x356c01);}catch(_0x4a773c){throw new Error('Cannot\x20parse\x20children\x20in\x20'+_0x493c0b['name']+'\x20['+_0x493c0b[_0x24ea60(0x11c)]+']');}}async[a146_0x12e827(0x146)](_0x4d5d5c){const _0x17a154=a146_0x12e827,_0x1491ae=(0x0,path_1[_0x17a154(0x163)])(this[_0x17a154(0x14f)],_0x4d5d5c),_0x26fa12=_0x4d5d5c+(_0x4d5d5c[_0x17a154(0x14a)](_0x17a154(0x13c))?this[_0x17a154(0x144)]:this[_0x17a154(0x161)]),_0x1dd899=await fs_internal_1['FS'][_0x17a154(0x138)](_0x1491ae,!![]),_0x553fbe=await fs_internal_1['FS'][_0x17a154(0x159)]((0x0,path_1[_0x17a154(0x163)])(this[_0x17a154(0x14f)],_0x26fa12),!![])[_0x17a154(0x14e)](()=>null),_0x4958bc={};for(const _0x3c6799 of _0x1dd899){_0x4958bc[(0x0,path_1[_0x17a154(0x148)])(this['dir'],_0x3c6799)[_0x17a154(0x132)](/\\/g,'/')]=await fs_internal_1['FS']['readFile'](_0x3c6799,!![]);}return _0x553fbe&&(_0x4958bc[(0x0,path_1['relative'])(this[_0x17a154(0x14f)],_0x26fa12)[_0x17a154(0x132)](/\\/g,'/')]=_0x553fbe),_0x4958bc;}async[a146_0x12e827(0x134)](_0x850fbf){const _0x431957=a146_0x12e827,_0x491bf3=_0x850fbf+this['META_EXTENSION'];if(constants_1['BUNDLED_FOLDERS_REGEXP'][_0x431957(0x126)](_0x850fbf))return this[_0x431957(0x146)](_0x850fbf);if(await fs_internal_1['FS'][_0x431957(0x14c)]((0x0,path_1[_0x431957(0x163)])(this[_0x431957(0x14f)],_0x491bf3))){const _0x29891f=await fs_internal_1['FS'][_0x431957(0x159)]((0x0,path_1[_0x431957(0x163)])(this[_0x431957(0x14f)],_0x491bf3),!![]),_0x2fabd3=await(0x0,utils_1[_0x431957(0x13f)])({'files':{[_0x491bf3]:_0x29891f}})[_0x431957(0x14e)](()=>null);if(_0x2fabd3&&folder_types_1[_0x431957(0x14b)][_0x431957(0x11b)](_0x2fabd3))return{[_0x491bf3]:_0x29891f};return{[_0x491bf3]:_0x29891f,[_0x850fbf]:await fs_internal_1['FS'][_0x431957(0x159)]((0x0,path_1['join'])(this['dir'],_0x850fbf),!![])};}return{[_0x850fbf]:await fs_internal_1['FS'][_0x431957(0x159)]((0x0,path_1[_0x431957(0x163)])(this[_0x431957(0x14f)],_0x850fbf),!![])};}['foldBundledComponentsPaths'](){const _0x480ae3=a146_0x12e827;this[_0x480ae3(0x12c)]=this['paths'][_0x480ae3(0x122)](_0x2ea673=>constants_1[_0x480ae3(0x12f)][_0x480ae3(0x126)](_0x2ea673)?_0x2ea673['split']('/')[_0x480ae3(0x128)](0x0,0x2)[_0x480ae3(0x163)]('/'):_0x2ea673),this['paths']=[...new Set(this['paths'])];}async[a146_0x12e827(0x130)](){const _0x26f06c=a146_0x12e827,_0x58c7a3=[];this['foldBundledComponentsPaths']();for(const _0xc122a3 of this[_0x26f06c(0x12c)]){if(_0xc122a3[_0x26f06c(0x149)]('package.xml'))continue;const _0x879228={};try{_0x879228[_0x26f06c(0x153)]=await this[_0x26f06c(0x134)](_0xc122a3),_0x879228[_0x26f06c(0x121)]=constants_1['BUNDLED_FOLDERS_REGEXP'][_0x26f06c(0x126)](_0xc122a3)?_0xc122a3:(0x0,utils_1[_0x26f06c(0x15a)])({'files':_0x879228['files']}),_0xc122a3[_0x26f06c(0x14a)]('waveTemplates')?_0x879228[_0x26f06c(0x11c)]=_0x26f06c(0x145):_0x879228[_0x26f06c(0x11c)]=await(0x0,utils_1[_0x26f06c(0x13f)])({'files':_0x879228[_0x26f06c(0x153)]});}catch(_0x5a5ac5){this[_0x26f06c(0x162)][_0x26f06c(0x157)]('error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20',_0xc122a3,_0x5a5ac5);continue;}_0x879228[_0x26f06c(0x140)]=(0x0,utils_1[_0x26f06c(0x150)])(_0xc122a3),_0x879228['crc']=(0x0,crc32_1[_0x26f06c(0x151)])(_0x879228);if((0x0,utils_1[_0x26f06c(0x12e)])(_0x879228)){const _0x10efba=await this['readChildComponents'](_0x879228);_0x58c7a3['push'](..._0x10efba);}if(_0x879228[_0x26f06c(0x11c)]==='CustomLabels')continue;settings_types_list_1['default'][_0x26f06c(0x11b)](_0x879228[_0x26f06c(0x11c)])&&(_0x879228[_0x26f06c(0x11c)]=_0x26f06c(0x13b)),_0x58c7a3[_0x26f06c(0x158)](_0x879228);}return _0x58c7a3;}}exports[a146_0x12e827(0x15e)]=MDApiParserV2;