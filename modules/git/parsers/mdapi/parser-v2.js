const a146_0x310dba=a146_0x5414;(function(_0x1ce842,_0x3be6ee){const _0x529a98=a146_0x5414,_0x120f28=_0x1ce842();while(!![]){try{const _0x5ea6c8=-parseInt(_0x529a98(0x13e))/0x1+parseInt(_0x529a98(0x143))/0x2+parseInt(_0x529a98(0x153))/0x3+-parseInt(_0x529a98(0x150))/0x4*(-parseInt(_0x529a98(0x144))/0x5)+-parseInt(_0x529a98(0x145))/0x6+-parseInt(_0x529a98(0x127))/0x7*(parseInt(_0x529a98(0x131))/0x8)+-parseInt(_0x529a98(0x154))/0x9*(parseInt(_0x529a98(0x163))/0xa);if(_0x5ea6c8===_0x3be6ee)break;else _0x120f28['push'](_0x120f28['shift']());}catch(_0x46fa1f){_0x120f28['push'](_0x120f28['shift']());}}}(a146_0x3651,0xed929));const a146_0x1f26f3=(function(){let _0x1a70db=!![];return function(_0x4eb8c0,_0x4092da){const _0x1b71df=_0x1a70db?function(){const _0x34de28=a146_0x5414;if(_0x4092da){const _0x485998=_0x4092da[_0x34de28(0x125)](_0x4eb8c0,arguments);return _0x4092da=null,_0x485998;}}:function(){};return _0x1a70db=![],_0x1b71df;};}()),a146_0x5aac73=a146_0x1f26f3(this,function(){const _0x45a625=a146_0x5414;return a146_0x5aac73[_0x45a625(0x15b)]()[_0x45a625(0x148)]('(((.+)+)+)+$')[_0x45a625(0x15b)]()[_0x45a625(0x15f)](a146_0x5aac73)[_0x45a625(0x148)](_0x45a625(0x139));});a146_0x5aac73();'use strict';var __importDefault=this&&this[a146_0x310dba(0x14b)]||function(_0x2c1183){return _0x2c1183&&_0x2c1183['__esModule']?_0x2c1183:{'default':_0x2c1183};};Object[a146_0x310dba(0x161)](exports,'__esModule',{'value':!![]}),exports[a146_0x310dba(0x164)]=void 0x0;const fs_internal_1=require(a146_0x310dba(0x130)),utils_1=require('../utils'),path_1=require(a146_0x310dba(0x13d)),xml_v2_1=require(a146_0x310dba(0x128)),child_types_map_1=__importDefault(require(a146_0x310dba(0x12b))),constants_1=require(a146_0x310dba(0x122)),core_1=require(a146_0x310dba(0x147)),crc32_1=require(a146_0x310dba(0x14f)),folder_types_1=__importDefault(require('../data/folder-types')),settings_types_list_1=__importDefault(require('../data/settings-types-list')),CHILD_XML_KEYS=Object[a146_0x310dba(0x14a)](child_types_map_1[a146_0x310dba(0x167)]);class MDApiParserV2{constructor(_0x53f0e4,_0x5a926e){const _0x3c6721=a146_0x310dba;this[_0x3c6721(0x14c)]=_0x53f0e4,this['paths']=_0x5a926e,this['logger']=new core_1['Logger'](MDApiParserV2[_0x3c6721(0x12c)]),this[_0x3c6721(0x13c)]=_0x3c6721(0x140),this[_0x3c6721(0x162)]=_0x3c6721(0x13b);}async[a146_0x310dba(0x133)](_0x448d81){const _0x37592a=a146_0x310dba;try{const _0x234d8d=await xml_v2_1[_0x37592a(0x129)][_0x37592a(0x15e)](Object[_0x37592a(0x14a)](_0x448d81[_0x37592a(0x159)])[0x0][_0x37592a(0x15b)](_0x37592a(0x157))),_0x2cc0a9=CHILD_XML_KEYS[_0x37592a(0x121)](_0x38e463=>xml_v2_1[_0x37592a(0x129)][_0x37592a(0x152)](_0x234d8d,_0x38e463))[_0x37592a(0x149)]((_0x27e4ad,_0x5a835c)=>[..._0x27e4ad,...xml_v2_1[_0x37592a(0x129)][_0x37592a(0x124)](_0x234d8d,_0x5a835c)],[]);return(0x0,utils_1['createChildComponentsFromParent'])(_0x448d81,_0x234d8d,_0x2cc0a9);}catch(_0x5c7d9d){throw new Error('Cannot\x20parse\x20children\x20in\x20'+_0x448d81['name']+'\x20['+_0x448d81[_0x37592a(0x136)]+']');}}async[a146_0x310dba(0x155)](_0x1bdb6b){const _0x3b705b=a146_0x310dba,_0x2ee43f=(0x0,path_1[_0x3b705b(0x165)])(this['dir'],_0x1bdb6b),_0x331125=_0x1bdb6b+(_0x1bdb6b[_0x3b705b(0x15a)](_0x3b705b(0x132))?this[_0x3b705b(0x162)]:this[_0x3b705b(0x13c)]),_0x3afe5f=await fs_internal_1['FS'][_0x3b705b(0x160)](_0x2ee43f,!![]),_0x2d206a=await fs_internal_1['FS'][_0x3b705b(0x142)]((0x0,path_1[_0x3b705b(0x165)])(this['dir'],_0x331125),!![])['catch'](()=>null),_0x30be7e={};for(const _0x34f4b9 of _0x3afe5f){_0x30be7e[(0x0,path_1['relative'])(this['dir'],_0x34f4b9)[_0x3b705b(0x158)](/\\/g,'/')]=await fs_internal_1['FS']['readFile'](_0x34f4b9,!![]);}return _0x2d206a&&(_0x30be7e[(0x0,path_1[_0x3b705b(0x123)])(this[_0x3b705b(0x14c)],_0x331125)[_0x3b705b(0x158)](/\\/g,'/')]=_0x2d206a),_0x30be7e;}async['readComponent'](_0x1a1881){const _0x5b7d02=a146_0x310dba,_0x541fae=_0x1a1881+this['META_EXTENSION'];if(constants_1[_0x5b7d02(0x151)][_0x5b7d02(0x13a)](_0x1a1881))return this[_0x5b7d02(0x155)](_0x1a1881);if(await fs_internal_1['FS'][_0x5b7d02(0x14d)]((0x0,path_1[_0x5b7d02(0x165)])(this[_0x5b7d02(0x14c)],_0x541fae))){const _0x140dc7=await fs_internal_1['FS'][_0x5b7d02(0x142)]((0x0,path_1['join'])(this['dir'],_0x541fae),!![]),_0x1473f9=await(0x0,utils_1[_0x5b7d02(0x166)])({'files':{[_0x541fae]:_0x140dc7}})[_0x5b7d02(0x169)](()=>null);if(_0x1473f9&&folder_types_1['default'][_0x5b7d02(0x126)](_0x1473f9))return{[_0x541fae]:_0x140dc7};return{[_0x541fae]:_0x140dc7,[_0x1a1881]:await fs_internal_1['FS']['readFile']((0x0,path_1[_0x5b7d02(0x165)])(this['dir'],_0x1a1881),!![])};}return{[_0x1a1881]:await fs_internal_1['FS'][_0x5b7d02(0x142)]((0x0,path_1[_0x5b7d02(0x165)])(this[_0x5b7d02(0x14c)],_0x1a1881),!![])};}['foldBundledComponentsPaths'](){const _0x1d135a=a146_0x310dba;this[_0x1d135a(0x12d)]=this['paths'][_0x1d135a(0x138)](_0x5d5318=>constants_1[_0x1d135a(0x151)][_0x1d135a(0x13a)](_0x5d5318)?_0x5d5318['split']('/')['slice'](0x0,0x2)[_0x1d135a(0x165)]('/'):_0x5d5318),this[_0x1d135a(0x12d)]=[...new Set(this[_0x1d135a(0x12d)])];}async[a146_0x310dba(0x15e)](){const _0x2947d7=a146_0x310dba,_0x3be02f=[];this[_0x2947d7(0x146)]();for(const _0x414f1e of this['paths']){if(_0x414f1e['endsWith'](_0x2947d7(0x15c)))continue;const _0x3177cf={};try{_0x3177cf['files']=await this[_0x2947d7(0x14e)](_0x414f1e),_0x3177cf[_0x2947d7(0x15d)]=constants_1[_0x2947d7(0x151)][_0x2947d7(0x13a)](_0x414f1e)?_0x414f1e:(0x0,utils_1[_0x2947d7(0x135)])({'files':_0x3177cf[_0x2947d7(0x159)]}),_0x414f1e[_0x2947d7(0x15a)](_0x2947d7(0x134))?_0x3177cf[_0x2947d7(0x136)]=_0x2947d7(0x12e):_0x3177cf['type']=await(0x0,utils_1['extractComponentTypeFromFiles'])({'files':_0x3177cf[_0x2947d7(0x159)]});}catch(_0x21bda9){this['logger'][_0x2947d7(0x141)]('error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20',_0x414f1e,_0x21bda9);continue;}_0x3177cf[_0x2947d7(0x12c)]=(0x0,utils_1[_0x2947d7(0x168)])(_0x414f1e),_0x3177cf['crc']=(0x0,crc32_1[_0x2947d7(0x13f)])(_0x3177cf);if((0x0,utils_1[_0x2947d7(0x12f)])(_0x3177cf)){const _0x528f09=await this[_0x2947d7(0x133)](_0x3177cf);_0x3be02f[_0x2947d7(0x12a)](..._0x528f09);}if(_0x3177cf[_0x2947d7(0x136)]===_0x2947d7(0x137))continue;settings_types_list_1[_0x2947d7(0x167)]['includes'](_0x3177cf[_0x2947d7(0x136)])&&(_0x3177cf[_0x2947d7(0x136)]=_0x2947d7(0x156)),_0x3be02f[_0x2947d7(0x12a)](_0x3177cf);}return _0x3be02f;}}function a146_0x3651(){const _0x3bbae1=['package.xml','filePath','parse','constructor','readDir','defineProperty','META_EXPERIENCES_EXTENSION','30ZCxCHR','MDApiParserV2','join','extractComponentTypeFromFiles','default','extractFilenameFromPath','catch','filter','../../../../constants','relative','getChildsByName','apply','includes','504784opYfsx','../utils/xml-v2','XmlV2','push','../data/child-types-map','name','paths','WaveTemplateBundle','isParentComponent','../../internal/fs.internal','48kyVTnV','experiences','readChildComponents','waveTemplates','extractFileNameFromFiles','type','CustomLabels','map','(((.+)+)+)+$','test','.site-meta.xml','META_EXTENSION','path','1593236UqIWHl','calculateCRC32','-meta.xml','error','readFile','3855214RNmTsy','125165NfIMmf','3082548cOOggE','foldBundledComponentsPaths','../../../../core','search','reduce','values','__importDefault','dir','exists','readComponent','../utils/crc32','140FoJyNM','BUNDLED_FOLDERS_REGEXP','hasChildNodes','3660459hfQPIL','1533456EfSxIC','readBundledComponent','Settings','utf-8','replace','files','startsWith','toString'];a146_0x3651=function(){return _0x3bbae1;};return a146_0x3651();}function a146_0x5414(_0x1c9ef5,_0x464605){const _0x3a9920=a146_0x3651();return a146_0x5414=function(_0x5aac73,_0x1f26f3){_0x5aac73=_0x5aac73-0x121;let _0x3651ed=_0x3a9920[_0x5aac73];return _0x3651ed;},a146_0x5414(_0x1c9ef5,_0x464605);}exports[a146_0x310dba(0x164)]=MDApiParserV2;