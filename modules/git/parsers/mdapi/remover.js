const a151_0x1c38c8=a151_0x2c0a;(function(_0x3fed08,_0x228323){const _0x29cb42=a151_0x2c0a,_0x5a81d1=_0x3fed08();while(!![]){try{const _0x5eaf47=-parseInt(_0x29cb42(0x204))/0x1*(parseInt(_0x29cb42(0x1fa))/0x2)+-parseInt(_0x29cb42(0x206))/0x3+parseInt(_0x29cb42(0x217))/0x4+parseInt(_0x29cb42(0x1f9))/0x5+parseInt(_0x29cb42(0x210))/0x6+-parseInt(_0x29cb42(0x1e5))/0x7+-parseInt(_0x29cb42(0x1e0))/0x8;if(_0x5eaf47===_0x228323)break;else _0x5a81d1['push'](_0x5a81d1['shift']());}catch(_0x126e96){_0x5a81d1['push'](_0x5a81d1['shift']());}}}(a151_0x14ab,0xf024c));const a151_0x453b72=(function(){let _0x1a5444=!![];return function(_0x4c899b,_0x28143d){const _0x1a36a=_0x1a5444?function(){const _0x53cc93=a151_0x2c0a;if(_0x28143d){const _0x45ac1f=_0x28143d[_0x53cc93(0x1e7)](_0x4c899b,arguments);return _0x28143d=null,_0x45ac1f;}}:function(){};return _0x1a5444=![],_0x1a36a;};}()),a151_0x498a1d=a151_0x453b72(this,function(){const _0x3150c3=a151_0x2c0a;return a151_0x498a1d[_0x3150c3(0x21a)]()[_0x3150c3(0x1e6)]('(((.+)+)+)+$')['toString']()[_0x3150c3(0x21c)](a151_0x498a1d)[_0x3150c3(0x1e6)](_0x3150c3(0x21b));});function a151_0x14ab(){const _0x5929db=['sourceDir','Unknown\x20child\x20type\x20','isEmptyXml','length','splice','META_EXTENSION','387298vxxZZz','includes','1532496TikrsM','log','parse','makeDir','removeParent','../utils/xml-v2','keys','__importDefault','components','pop','5006058TKuoxF','META_EXPERIENCE_BUNDLE','fileName','writeFile','convertToString','path','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','6692548SVbpKo','XmlV2','catch','toString','(((.+)+)+)+$','constructor','../../../../core','remove\x20parent\x20component\x20%s\x20[%s]','have\x20to\x20update\x20%d\x20files','7053968wbLEcc','type','removeChild','remove\x20child\x20component\x20%s\x20[%s]','../data/child-types','6938099NjhIVz','search','apply','parentComponents','remove\x20component\x20directory\x20%s\x20[%s]','__esModule','all','isDir','MDApiRemover','logger','removeFile','split','name','start','readFile','removeAt','join','default','site-meta.xml','defineProperty','8172395zxhYcS','4OmINMt','MAX_WRITES_PER_TICK','Logger','exists'];a151_0x14ab=function(){return _0x5929db;};return a151_0x14ab();}a151_0x498a1d();'use strict';var __importDefault=this&&this[a151_0x1c38c8(0x20d)]||function(_0x56ce32){const _0x4dc06a=a151_0x1c38c8;return _0x56ce32&&_0x56ce32[_0x4dc06a(0x1ea)]?_0x56ce32:{'default':_0x56ce32};};Object[a151_0x1c38c8(0x1f8)](exports,a151_0x1c38c8(0x1ea),{'value':!![]}),exports[a151_0x1c38c8(0x1ed)]=void 0x0;function a151_0x2c0a(_0x3483de,_0x517256){const _0xb7d95e=a151_0x14ab();return a151_0x2c0a=function(_0x498a1d,_0x453b72){_0x498a1d=_0x498a1d-0x1df;let _0x14ab05=_0xb7d95e[_0x498a1d];return _0x14ab05;},a151_0x2c0a(_0x3483de,_0x517256);}const fs_internal_1=require('../../internal/fs.internal'),core_1=require(a151_0x1c38c8(0x21d)),xml_v2_1=require(a151_0x1c38c8(0x20b)),child_types_1=__importDefault(require(a151_0x1c38c8(0x1e4))),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require(a151_0x1c38c8(0x215)));class MDApiRemover{constructor(_0x324385,_0x743206){const _0x574e57=a151_0x1c38c8;this[_0x574e57(0x20e)]=_0x324385,this[_0x574e57(0x1fe)]=_0x743206,this[_0x574e57(0x203)]='-meta.xml',this[_0x574e57(0x211)]=_0x574e57(0x1f7),this['MAX_WRITES_PER_TICK']=0x64,this[_0x574e57(0x1ee)]=new core_1[(_0x574e57(0x1fc))](MDApiRemover[_0x574e57(0x1f1)]),this[_0x574e57(0x1e8)]={};}async['removeParent'](_0x194714){const _0x1ed543=a151_0x1c38c8,_0x134002=path_1[_0x1ed543(0x1f6)][_0x1ed543(0x1f5)](this[_0x1ed543(0x1fe)],_0x194714[_0x1ed543(0x215)]),_0x249062=path_1[_0x1ed543(0x1f6)][_0x1ed543(0x1f5)](this[_0x1ed543(0x1fe)],''+_0x194714[_0x1ed543(0x215)]+this[_0x1ed543(0x203)]);this['parentComponents'][_0x194714[_0x1ed543(0x215)]]&&delete this[_0x1ed543(0x1e8)][_0x194714['path']];const _0x1083a4=await fs_internal_1['FS'][_0x1ed543(0x1ec)](_0x134002)[_0x1ed543(0x219)](()=>![]);if(_0x1083a4){this[_0x1ed543(0x1ee)][_0x1ed543(0x207)](_0x1ed543(0x1e9),_0x134002,_0x194714['type']),await fs_internal_1['FS']['removeDir'](_0x134002);_0x194714[_0x1ed543(0x1e1)]==='ExperienceBundle'?await fs_internal_1['FS'][_0x1ed543(0x1ef)](''+_0x134002+this['META_EXPERIENCE_BUNDLE'])[_0x1ed543(0x219)](()=>void 0x0):(this[_0x1ed543(0x1ee)]['log']('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x134002,_0x194714[_0x1ed543(0x1e1)]),await fs_internal_1['FS']['removeFile'](''+_0x134002+this['META_EXTENSION'])[_0x1ed543(0x219)](()=>void 0x0));return;}this[_0x1ed543(0x1ee)][_0x1ed543(0x207)]('remove\x20component\x20\x20%s\x20[%s]',_0x134002,_0x194714['type']),await Promise[_0x1ed543(0x1eb)]([fs_internal_1['FS']['removeFile'](_0x134002),fs_internal_1['FS'][_0x1ed543(0x1ef)](_0x249062)]);}async[a151_0x1c38c8(0x1e2)](_0x2a3751){const _0x5cbc06=a151_0x1c38c8,{fileName:_0xc69a34,type:_0x16f024,path:_0x556231}=_0x2a3751,_0x508eb0=child_types_map_1[_0x5cbc06(0x1f6)][_0x16f024];if(!_0x508eb0)throw new Error(_0x5cbc06(0x1ff)+_0x16f024);if(!this[_0x5cbc06(0x1e8)][_0x556231]){const _0x3e0b57=path_1[_0x5cbc06(0x1f6)]['join'](this[_0x5cbc06(0x1fe)],_0x556231),_0x296891=await fs_internal_1['FS'][_0x5cbc06(0x1fd)](_0x3e0b57);if(!_0x296891)return;const _0x264c55=await fs_internal_1['FS'][_0x5cbc06(0x1f3)](_0x3e0b57);this[_0x5cbc06(0x1e8)][_0x556231]=await xml_v2_1[_0x5cbc06(0x218)][_0x5cbc06(0x208)](_0x264c55);}const _0x196762=this[_0x5cbc06(0x1e8)][_0x556231],_0x4e5003=_0xc69a34[_0x5cbc06(0x1f0)]('.')[_0x5cbc06(0x20f)]();xml_v2_1[_0x5cbc06(0x218)][_0x5cbc06(0x1f4)](_0x196762,_0x508eb0,_0x4e5003||_0xc69a34),xml_v2_1[_0x5cbc06(0x218)][_0x5cbc06(0x200)](_0x196762)?(this['logger'][_0x5cbc06(0x207)](_0x5cbc06(0x216),_0x2a3751[_0x5cbc06(0x215)],_0x2a3751[_0x5cbc06(0x212)]),await this[_0x5cbc06(0x20a)](_0x2a3751),delete this[_0x5cbc06(0x1e8)][_0x556231]):this[_0x5cbc06(0x1e8)][_0x556231]=_0x196762;}async[a151_0x1c38c8(0x1f2)](){const _0x3df16e=a151_0x1c38c8;!await fs_internal_1['FS'][_0x3df16e(0x1fd)](this['sourceDir'])&&await fs_internal_1['FS'][_0x3df16e(0x209)](this[_0x3df16e(0x1fe)]);for(const _0x9262eb of this[_0x3df16e(0x20e)]){!child_types_1[_0x3df16e(0x1f6)][_0x3df16e(0x205)](_0x9262eb[_0x3df16e(0x1e1)])?(this[_0x3df16e(0x1ee)][_0x3df16e(0x207)](_0x3df16e(0x21e),_0x9262eb[_0x3df16e(0x212)],_0x9262eb['type']),await this[_0x3df16e(0x20a)](_0x9262eb)):(this[_0x3df16e(0x1ee)]['log'](_0x3df16e(0x1e3),_0x9262eb[_0x3df16e(0x212)],_0x9262eb[_0x3df16e(0x1e1)]),await this[_0x3df16e(0x1e2)](_0x9262eb));}const _0x3f0a3c=Object[_0x3df16e(0x20c)](this[_0x3df16e(0x1e8)]);this['logger'][_0x3df16e(0x207)](_0x3df16e(0x1df),this['components'][_0x3df16e(0x201)]);while(_0x3f0a3c[_0x3df16e(0x201)]){const _0x3eade4=_0x3f0a3c[_0x3df16e(0x202)](0x0,this[_0x3df16e(0x1fb)]);for(const _0x1e752b of _0x3eade4){await fs_internal_1['FS'][_0x3df16e(0x213)](path_1[_0x3df16e(0x1f6)][_0x3df16e(0x1f5)](this[_0x3df16e(0x1fe)],_0x1e752b),xml_v2_1[_0x3df16e(0x218)][_0x3df16e(0x214)](this['parentComponents'][_0x1e752b]));}}this['parentComponents']={};}}exports[a151_0x1c38c8(0x1ed)]=MDApiRemover;