const a151_0x36ae6c=a151_0x25b2;(function(_0x31d446,_0x46fb60){const _0x3f7d7c=a151_0x25b2,_0x3df5f1=_0x31d446();while(!![]){try{const _0x1369cc=parseInt(_0x3f7d7c(0xec))/0x1+parseInt(_0x3f7d7c(0xcb))/0x2+-parseInt(_0x3f7d7c(0xd2))/0x3*(-parseInt(_0x3f7d7c(0xd0))/0x4)+parseInt(_0x3f7d7c(0xbc))/0x5+parseInt(_0x3f7d7c(0xcd))/0x6*(-parseInt(_0x3f7d7c(0xd6))/0x7)+-parseInt(_0x3f7d7c(0xba))/0x8+-parseInt(_0x3f7d7c(0xd1))/0x9*(-parseInt(_0x3f7d7c(0xc7))/0xa);if(_0x1369cc===_0x46fb60)break;else _0x3df5f1['push'](_0x3df5f1['shift']());}catch(_0xf5513f){_0x3df5f1['push'](_0x3df5f1['shift']());}}}(a151_0x5a51,0xb50b0));const a151_0x3ae4c6=(function(){let _0x55f686=!![];return function(_0x1e8caa,_0x3d78dc){const _0x3dea59=_0x55f686?function(){const _0x227143=a151_0x25b2;if(_0x3d78dc){const _0x3b6d00=_0x3d78dc[_0x227143(0xb5)](_0x1e8caa,arguments);return _0x3d78dc=null,_0x3b6d00;}}:function(){};return _0x55f686=![],_0x3dea59;};}()),a151_0x2c5661=a151_0x3ae4c6(this,function(){const _0x3ae856=a151_0x25b2;return a151_0x2c5661[_0x3ae856(0xe9)]()[_0x3ae856(0xf2)](_0x3ae856(0xc4))[_0x3ae856(0xe9)]()['constructor'](a151_0x2c5661)[_0x3ae856(0xf2)](_0x3ae856(0xc4));});a151_0x2c5661();'use strict';var __importDefault=this&&this[a151_0x36ae6c(0xc2)]||function(_0x169dc7){return _0x169dc7&&_0x169dc7['__esModule']?_0x169dc7:{'default':_0x169dc7};};Object[a151_0x36ae6c(0xc6)](exports,a151_0x36ae6c(0xc9),{'value':!![]}),exports['MDApiRemover']=void 0x0;function a151_0x5a51(){const _0x58e653=['XmlV2','removeFile','includes','14qSUIAy','Unknown\x20child\x20type\x20','have\x20to\x20update\x20%d\x20files','META_EXTENSION','exists','keys','components','MAX_WRITES_PER_TICK','makeDir','catch','splice','writeFile','../data/child-types-map','name','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','path','length','parse','removeChild','toString','removeParent','ExperienceBundle','122773DOKYky','readFile','logger','removeAt','convertToString','Logger','search','../data/child-types','log','-meta.xml','apply','META_EXPERIENCE_BUNDLE','fileName','isEmptyXml','type','7872624pqNMwD','start','1199850sjaTRo','remove\x20parent\x20component\x20%s\x20[%s]','remove\x20component\x20\x20%s\x20[%s]','remove\x20child\x20component\x20%s\x20[%s]','MDApiRemover','join','__importDefault','split','(((.+)+)+)+$','parentComponents','defineProperty','8370KMtzmk','default','__esModule','remove\x20component\x20directory\x20%s\x20[%s]','2762170uKLyJX','sourceDir','844824lXszdj','isDir','../../../../core','356ETOFqV','927kDcYAG','5973EuJwQU'];a151_0x5a51=function(){return _0x58e653;};return a151_0x5a51();}const fs_internal_1=require('../../internal/fs.internal'),core_1=require(a151_0x36ae6c(0xcf)),xml_v2_1=require('../utils/xml-v2'),child_types_1=__importDefault(require(a151_0x36ae6c(0xf3))),child_types_map_1=__importDefault(require(a151_0x36ae6c(0xe2))),path_1=__importDefault(require(a151_0x36ae6c(0xe5)));function a151_0x25b2(_0x492fbe,_0x48e31c){const _0x5c3986=a151_0x5a51();return a151_0x25b2=function(_0x2c5661,_0x3ae4c6){_0x2c5661=_0x2c5661-0xb5;let _0x5a5122=_0x5c3986[_0x2c5661];return _0x5a5122;},a151_0x25b2(_0x492fbe,_0x48e31c);}class MDApiRemover{constructor(_0x2f2bee,_0x26f96f){const _0x5de3ac=a151_0x36ae6c;this[_0x5de3ac(0xdc)]=_0x2f2bee,this['sourceDir']=_0x26f96f,this['META_EXTENSION']=_0x5de3ac(0xf5),this[_0x5de3ac(0xb6)]='site-meta.xml',this[_0x5de3ac(0xdd)]=0x64,this['logger']=new core_1[(_0x5de3ac(0xf1))](MDApiRemover[_0x5de3ac(0xe3)]),this['parentComponents']={};}async['removeParent'](_0xea635){const _0x40b8de=a151_0x36ae6c,_0x29a765=path_1[_0x40b8de(0xc8)][_0x40b8de(0xc1)](this[_0x40b8de(0xcc)],_0xea635[_0x40b8de(0xe5)]),_0x540758=path_1['default'][_0x40b8de(0xc1)](this['sourceDir'],''+_0xea635[_0x40b8de(0xe5)]+this[_0x40b8de(0xd9)]);this[_0x40b8de(0xc5)][_0xea635['path']]&&delete this['parentComponents'][_0xea635[_0x40b8de(0xe5)]];const _0x57328a=await fs_internal_1['FS'][_0x40b8de(0xce)](_0x29a765)[_0x40b8de(0xdf)](()=>![]);if(_0x57328a){this[_0x40b8de(0xee)]['log'](_0x40b8de(0xca),_0x29a765,_0xea635[_0x40b8de(0xb9)]),await fs_internal_1['FS']['removeDir'](_0x29a765);_0xea635[_0x40b8de(0xb9)]===_0x40b8de(0xeb)?await fs_internal_1['FS'][_0x40b8de(0xd4)](''+_0x29a765+this[_0x40b8de(0xb6)])[_0x40b8de(0xdf)](()=>void 0x0):(this[_0x40b8de(0xee)][_0x40b8de(0xf4)]('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x29a765,_0xea635[_0x40b8de(0xb9)]),await fs_internal_1['FS'][_0x40b8de(0xd4)](''+_0x29a765+this[_0x40b8de(0xd9)])[_0x40b8de(0xdf)](()=>void 0x0));return;}this['logger'][_0x40b8de(0xf4)](_0x40b8de(0xbe),_0x29a765,_0xea635[_0x40b8de(0xb9)]),await Promise['all']([fs_internal_1['FS'][_0x40b8de(0xd4)](_0x29a765),fs_internal_1['FS']['removeFile'](_0x540758)]);}async[a151_0x36ae6c(0xe8)](_0x5c617b){const _0x4fa3a9=a151_0x36ae6c,{fileName:_0x580a88,type:_0x122b65,path:_0x38387b}=_0x5c617b,_0x352f91=child_types_map_1[_0x4fa3a9(0xc8)][_0x122b65];if(!_0x352f91)throw new Error(_0x4fa3a9(0xd7)+_0x122b65);if(!this[_0x4fa3a9(0xc5)][_0x38387b]){const _0x2c9db5=path_1[_0x4fa3a9(0xc8)][_0x4fa3a9(0xc1)](this['sourceDir'],_0x38387b),_0x27059b=await fs_internal_1['FS'][_0x4fa3a9(0xda)](_0x2c9db5);if(!_0x27059b)return;const _0x388e2d=await fs_internal_1['FS'][_0x4fa3a9(0xed)](_0x2c9db5);this[_0x4fa3a9(0xc5)][_0x38387b]=await xml_v2_1[_0x4fa3a9(0xd3)][_0x4fa3a9(0xe7)](_0x388e2d);}const _0x4e2295=this['parentComponents'][_0x38387b],_0x11cfaa=_0x580a88[_0x4fa3a9(0xc3)]('.')['pop']();xml_v2_1[_0x4fa3a9(0xd3)][_0x4fa3a9(0xef)](_0x4e2295,_0x352f91,_0x11cfaa||_0x580a88),xml_v2_1[_0x4fa3a9(0xd3)][_0x4fa3a9(0xb8)](_0x4e2295)?(this['logger']['log'](_0x4fa3a9(0xe4),_0x5c617b[_0x4fa3a9(0xe5)],_0x5c617b[_0x4fa3a9(0xb7)]),await this[_0x4fa3a9(0xea)](_0x5c617b),delete this[_0x4fa3a9(0xc5)][_0x38387b]):this[_0x4fa3a9(0xc5)][_0x38387b]=_0x4e2295;}async[a151_0x36ae6c(0xbb)](){const _0x39de51=a151_0x36ae6c;!await fs_internal_1['FS'][_0x39de51(0xda)](this[_0x39de51(0xcc)])&&await fs_internal_1['FS'][_0x39de51(0xde)](this[_0x39de51(0xcc)]);for(const _0x172bdc of this[_0x39de51(0xdc)]){!child_types_1[_0x39de51(0xc8)][_0x39de51(0xd5)](_0x172bdc[_0x39de51(0xb9)])?(this[_0x39de51(0xee)][_0x39de51(0xf4)](_0x39de51(0xbd),_0x172bdc[_0x39de51(0xb7)],_0x172bdc[_0x39de51(0xb9)]),await this[_0x39de51(0xea)](_0x172bdc)):(this[_0x39de51(0xee)][_0x39de51(0xf4)](_0x39de51(0xbf),_0x172bdc[_0x39de51(0xb7)],_0x172bdc[_0x39de51(0xb9)]),await this[_0x39de51(0xe8)](_0x172bdc));}const _0xa216f0=Object[_0x39de51(0xdb)](this['parentComponents']);this[_0x39de51(0xee)][_0x39de51(0xf4)](_0x39de51(0xd8),this[_0x39de51(0xdc)][_0x39de51(0xe6)]);while(_0xa216f0[_0x39de51(0xe6)]){const _0x18140e=_0xa216f0[_0x39de51(0xe0)](0x0,this[_0x39de51(0xdd)]);for(const _0x36fac4 of _0x18140e){await fs_internal_1['FS'][_0x39de51(0xe1)](path_1[_0x39de51(0xc8)][_0x39de51(0xc1)](this['sourceDir'],_0x36fac4),xml_v2_1[_0x39de51(0xd3)][_0x39de51(0xf0)](this[_0x39de51(0xc5)][_0x36fac4]));}}this[_0x39de51(0xc5)]={};}}exports[a151_0x36ae6c(0xc0)]=MDApiRemover;