const a116_0x2f58a5=a116_0x302f;(function(_0x3c5521,_0x571300){const _0x763836=a116_0x302f,_0x12bf45=_0x3c5521();while(!![]){try{const _0x896524=parseInt(_0x763836(0x1fd))/0x1*(-parseInt(_0x763836(0x218))/0x2)+-parseInt(_0x763836(0x1eb))/0x3+parseInt(_0x763836(0x1fa))/0x4*(parseInt(_0x763836(0x1f5))/0x5)+-parseInt(_0x763836(0x20d))/0x6*(parseInt(_0x763836(0x1e4))/0x7)+-parseInt(_0x763836(0x1fb))/0x8*(parseInt(_0x763836(0x216))/0x9)+-parseInt(_0x763836(0x1ec))/0xa+parseInt(_0x763836(0x209))/0xb;if(_0x896524===_0x571300)break;else _0x12bf45['push'](_0x12bf45['shift']());}catch(_0x4b2d58){_0x12bf45['push'](_0x12bf45['shift']());}}}(a116_0x529d,0x24e8e));const a116_0xbd5b78=(function(){let _0x51696e=!![];return function(_0x2f2232,_0x1274c5){const _0x1831b8=_0x51696e?function(){const _0x983cc4=a116_0x302f;if(_0x1274c5){const _0x31f3d2=_0x1274c5[_0x983cc4(0x215)](_0x2f2232,arguments);return _0x1274c5=null,_0x31f3d2;}}:function(){};return _0x51696e=![],_0x1831b8;};}()),a116_0xc09294=a116_0xbd5b78(this,function(){const _0x46b916=a116_0x302f;return a116_0xc09294['toString']()[_0x46b916(0x210)](_0x46b916(0x20f))[_0x46b916(0x221)]()['constructor'](a116_0xc09294)[_0x46b916(0x210)]('(((.+)+)+)+$');});function a116_0x529d(){const _0x2c147f=['join','../../internal/fs.internal','META_EXTENSION','convertToString','default','removeChild','-meta.xml','type','toString','Unknown\x20child\x20type\x20','1078EjsxJn','MDApiRemover','Logger','writeFile','all','site-meta.xml','isDir','17067RMcbyF','1697440oKbeTs','logger','fileName','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','../data/child-types','length','sourceDir','catch','log','1249715JrZHRh','start','__importDefault','remove\x20child\x20component\x20%s\x20[%s]','Xml','4yBArBe','117304ZVwijT','MAX_WRITES_PER_TICK','307HZlfhp','parentComponents','exists','../../../../core','../utils/xml','ExperienceBundle','removeParent','splice','pop','components','path','includes','5922972nbnYJI','removeFile','makeDir','keys','6216opVkYg','defineProperty','(((.+)+)+)+$','search','parse','remove\x20component\x20directory\x20%s\x20[%s]','remove\x20component\x20\x20%s\x20[%s]','META_EXPERIENCE_BUNDLE','apply','171dxkRwE','__esModule','154SLeaGO'];a116_0x529d=function(){return _0x2c147f;};return a116_0x529d();}a116_0xc09294();'use strict';var __importDefault=this&&this[a116_0x2f58a5(0x1f7)]||function(_0x41f09b){return _0x41f09b&&_0x41f09b['__esModule']?_0x41f09b:{'default':_0x41f09b};};Object[a116_0x2f58a5(0x20e)](exports,a116_0x2f58a5(0x217),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a116_0x2f58a5(0x21a)),core_1=require(a116_0x2f58a5(0x200)),xml_1=require(a116_0x2f58a5(0x201)),child_types_1=__importDefault(require(a116_0x2f58a5(0x1f0))),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require(a116_0x2f58a5(0x207)));class MDApiRemover{constructor(_0x179c16,_0xc69d9f){const _0x493c91=a116_0x2f58a5;this['components']=_0x179c16,this['sourceDir']=_0xc69d9f,this[_0x493c91(0x21b)]=_0x493c91(0x21f),this[_0x493c91(0x214)]=_0x493c91(0x1e9),this[_0x493c91(0x1fc)]=0x64,this['logger']=new core_1[(_0x493c91(0x1e6))](MDApiRemover['name']),this[_0x493c91(0x1fe)]={};}async[a116_0x2f58a5(0x203)](_0x3dd3f7){const _0x24534d=a116_0x2f58a5,_0x1071f9=path_1[_0x24534d(0x21d)][_0x24534d(0x219)](this[_0x24534d(0x1f2)],_0x3dd3f7[_0x24534d(0x207)]),_0x1b0f23=path_1[_0x24534d(0x21d)]['join'](this[_0x24534d(0x1f2)],''+_0x3dd3f7[_0x24534d(0x207)]+this[_0x24534d(0x21b)]);this[_0x24534d(0x1fe)][_0x3dd3f7[_0x24534d(0x207)]]&&delete this[_0x24534d(0x1fe)][_0x3dd3f7[_0x24534d(0x207)]];const _0x4b0b43=await fs_internal_1['FS'][_0x24534d(0x1ea)](_0x1071f9)[_0x24534d(0x1f3)](()=>![]);if(_0x4b0b43){this[_0x24534d(0x1ed)][_0x24534d(0x1f4)](_0x24534d(0x212),_0x1071f9,_0x3dd3f7[_0x24534d(0x220)]),await fs_internal_1['FS']['removeDir'](_0x1071f9);_0x3dd3f7[_0x24534d(0x220)]===_0x24534d(0x202)?await fs_internal_1['FS'][_0x24534d(0x20a)](''+_0x1071f9+this[_0x24534d(0x214)])[_0x24534d(0x1f3)](()=>void 0x0):(this[_0x24534d(0x1ed)][_0x24534d(0x1f4)]('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x1071f9,_0x3dd3f7['type']),await fs_internal_1['FS'][_0x24534d(0x20a)](''+_0x1071f9+this[_0x24534d(0x21b)])[_0x24534d(0x1f3)](()=>void 0x0));return;}this[_0x24534d(0x1ed)][_0x24534d(0x1f4)](_0x24534d(0x213),_0x1071f9,_0x3dd3f7['type']),await Promise[_0x24534d(0x1e8)]([fs_internal_1['FS']['removeFile'](_0x1071f9),fs_internal_1['FS'][_0x24534d(0x20a)](_0x1b0f23)]);}async[a116_0x2f58a5(0x21e)](_0x1ebff5){const _0x14dbc2=a116_0x2f58a5,{fileName:_0x478c0a,type:_0x22cd2f,path:_0x3c1e22}=_0x1ebff5,_0x2b34fb=child_types_map_1[_0x14dbc2(0x21d)][_0x22cd2f];if(!_0x2b34fb)throw new Error(_0x14dbc2(0x1e3)+_0x22cd2f);if(!this[_0x14dbc2(0x1fe)][_0x3c1e22]){const _0x568d4d=path_1[_0x14dbc2(0x21d)][_0x14dbc2(0x219)](this['sourceDir'],_0x3c1e22),_0x2a1735=await fs_internal_1['FS'][_0x14dbc2(0x1ff)](_0x568d4d);if(!_0x2a1735)return;const _0xf00d38=await fs_internal_1['FS']['readFile'](_0x568d4d);this[_0x14dbc2(0x1fe)][_0x3c1e22]=await xml_1[_0x14dbc2(0x1f9)][_0x14dbc2(0x211)](_0xf00d38);}const _0x7030ec=this[_0x14dbc2(0x1fe)][_0x3c1e22],_0x557ba8=_0x478c0a['split']('.')[_0x14dbc2(0x205)]();xml_1[_0x14dbc2(0x1f9)]['removeAt'](_0x7030ec,_0x2b34fb,_0x557ba8||_0x478c0a),xml_1['Xml']['isEmptyXml'](_0x7030ec)?(this[_0x14dbc2(0x1ed)][_0x14dbc2(0x1f4)](_0x14dbc2(0x1ef),_0x1ebff5['path'],_0x1ebff5[_0x14dbc2(0x1ee)]),await this[_0x14dbc2(0x203)](_0x1ebff5),delete this[_0x14dbc2(0x1fe)][_0x3c1e22]):this[_0x14dbc2(0x1fe)][_0x3c1e22]=_0x7030ec;}async[a116_0x2f58a5(0x1f6)](){const _0x5172d9=a116_0x2f58a5;!await fs_internal_1['FS'][_0x5172d9(0x1ff)](this['sourceDir'])&&await fs_internal_1['FS'][_0x5172d9(0x20b)](this[_0x5172d9(0x1f2)]);for(const _0x3e1554 of this['components']){!child_types_1[_0x5172d9(0x21d)][_0x5172d9(0x208)](_0x3e1554['type'])?(this[_0x5172d9(0x1ed)]['log']('remove\x20parent\x20component\x20%s\x20[%s]',_0x3e1554[_0x5172d9(0x1ee)],_0x3e1554[_0x5172d9(0x220)]),await this[_0x5172d9(0x203)](_0x3e1554)):(this[_0x5172d9(0x1ed)][_0x5172d9(0x1f4)](_0x5172d9(0x1f8),_0x3e1554[_0x5172d9(0x1ee)],_0x3e1554[_0x5172d9(0x220)]),await this[_0x5172d9(0x21e)](_0x3e1554));}const _0x1daf4a=Object[_0x5172d9(0x20c)](this[_0x5172d9(0x1fe)]);this[_0x5172d9(0x1ed)][_0x5172d9(0x1f4)]('have\x20to\x20update\x20%d\x20files',this[_0x5172d9(0x206)][_0x5172d9(0x1f1)]);while(_0x1daf4a[_0x5172d9(0x1f1)]){const _0x432617=_0x1daf4a[_0x5172d9(0x204)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x2e3908 of _0x432617){await fs_internal_1['FS'][_0x5172d9(0x1e7)](path_1[_0x5172d9(0x21d)]['join'](this[_0x5172d9(0x1f2)],_0x2e3908),xml_1[_0x5172d9(0x1f9)][_0x5172d9(0x21c)](this['parentComponents'][_0x2e3908]));}}this[_0x5172d9(0x1fe)]={};}}function a116_0x302f(_0x1faffd,_0x254b66){const _0x4f6520=a116_0x529d();return a116_0x302f=function(_0xc09294,_0xbd5b78){_0xc09294=_0xc09294-0x1e3;let _0x529d4c=_0x4f6520[_0xc09294];return _0x529d4c;},a116_0x302f(_0x1faffd,_0x254b66);}exports[a116_0x2f58a5(0x1e5)]=MDApiRemover;