const a148_0x286e2d=a148_0x7096;(function(_0x1ab42f,_0x620158){const _0x544238=a148_0x7096,_0x5a6be6=_0x1ab42f();while(!![]){try{const _0x12b97b=-parseInt(_0x544238(0x20c))/0x1+-parseInt(_0x544238(0x1e7))/0x2*(-parseInt(_0x544238(0x1eb))/0x3)+parseInt(_0x544238(0x21c))/0x4+parseInt(_0x544238(0x1f5))/0x5+-parseInt(_0x544238(0x21d))/0x6+-parseInt(_0x544238(0x1e8))/0x7*(-parseInt(_0x544238(0x226))/0x8)+-parseInt(_0x544238(0x1f3))/0x9;if(_0x12b97b===_0x620158)break;else _0x5a6be6['push'](_0x5a6be6['shift']());}catch(_0x4905a4){_0x5a6be6['push'](_0x5a6be6['shift']());}}}(a148_0x38f2,0xa1672));const a148_0xff054=(function(){let _0x1e61cc=!![];return function(_0x2cdf2b,_0x43250a){const _0x2a8f71=_0x1e61cc?function(){const _0x3410e2=a148_0x7096;if(_0x43250a){const _0x417113=_0x43250a[_0x3410e2(0x202)](_0x2cdf2b,arguments);return _0x43250a=null,_0x417113;}}:function(){};return _0x1e61cc=![],_0x2a8f71;};}()),a148_0x461adb=a148_0xff054(this,function(){const _0x199e72=a148_0x7096;return a148_0x461adb[_0x199e72(0x216)]()[_0x199e72(0x1ec)]('(((.+)+)+)+$')[_0x199e72(0x216)]()[_0x199e72(0x211)](a148_0x461adb)[_0x199e72(0x1ec)]('(((.+)+)+)+$');});function a148_0x38f2(){const _0x4cb459=['name','removeFile','toString','parentComponents','MDApiRemover','logger','__esModule','exists','2601356WMgAvV','3748356kwPzcN','defineProperty','default','XmlV2','type','removeAt','split','splice','length','130744seVxhM','1657558QkJrQx','469eWDRaY','-meta.xml','remove\x20component\x20\x20%s\x20[%s]','3vTSTuy','search','../../../../core','start','keys','isEmptyXml','remove\x20child\x20component\x20%s\x20[%s]','path','11571624JRVomA','fileName','5854080wPVDzD','pop','have\x20to\x20update\x20%d\x20files','makeDir','removeDir','remove\x20component\x20directory\x20%s\x20[%s]','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','catch','log','../data/child-types-map','META_EXTENSION','removeChild','components','apply','remove\x20parent\x20component\x20%s\x20[%s]','MAX_WRITES_PER_TICK','META_EXPERIENCE_BUNDLE','sourceDir','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','convertToString','../utils/xml-v2','__importDefault','readFile','1173347FJpKhd','all','Unknown\x20child\x20type\x20','site-meta.xml','ExperienceBundle','constructor','removeParent','join'];a148_0x38f2=function(){return _0x4cb459;};return a148_0x38f2();}a148_0x461adb();'use strict';var __importDefault=this&&this[a148_0x286e2d(0x20a)]||function(_0x5d4c1f){return _0x5d4c1f&&_0x5d4c1f['__esModule']?_0x5d4c1f:{'default':_0x5d4c1f};};Object[a148_0x286e2d(0x21e)](exports,a148_0x286e2d(0x21a),{'value':!![]}),exports[a148_0x286e2d(0x218)]=void 0x0;const fs_internal_1=require('../../internal/fs.internal'),core_1=require(a148_0x286e2d(0x1ed)),xml_v2_1=require(a148_0x286e2d(0x209)),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require(a148_0x286e2d(0x1fe))),path_1=__importDefault(require(a148_0x286e2d(0x1f2)));class MDApiRemover{constructor(_0x125680,_0x58670b){const _0x1094ab=a148_0x286e2d;this[_0x1094ab(0x201)]=_0x125680,this[_0x1094ab(0x206)]=_0x58670b,this[_0x1094ab(0x1ff)]=_0x1094ab(0x1e9),this[_0x1094ab(0x205)]=_0x1094ab(0x20f),this[_0x1094ab(0x204)]=0x64,this[_0x1094ab(0x219)]=new core_1['Logger'](MDApiRemover[_0x1094ab(0x214)]),this['parentComponents']={};}async[a148_0x286e2d(0x212)](_0x5a9c6f){const _0x411762=a148_0x286e2d,_0xf8c339=path_1[_0x411762(0x21f)][_0x411762(0x213)](this[_0x411762(0x206)],_0x5a9c6f[_0x411762(0x1f2)]),_0x5ac534=path_1[_0x411762(0x21f)]['join'](this[_0x411762(0x206)],''+_0x5a9c6f['path']+this[_0x411762(0x1ff)]);this[_0x411762(0x217)][_0x5a9c6f[_0x411762(0x1f2)]]&&delete this[_0x411762(0x217)][_0x5a9c6f['path']];const _0x3dc83a=await fs_internal_1['FS']['isDir'](_0xf8c339)[_0x411762(0x1fc)](()=>![]);if(_0x3dc83a){this['logger'][_0x411762(0x1fd)](_0x411762(0x1fa),_0xf8c339,_0x5a9c6f['type']),await fs_internal_1['FS'][_0x411762(0x1f9)](_0xf8c339);_0x5a9c6f[_0x411762(0x221)]===_0x411762(0x210)?await fs_internal_1['FS'][_0x411762(0x215)](''+_0xf8c339+this[_0x411762(0x205)])[_0x411762(0x1fc)](()=>void 0x0):(this['logger'][_0x411762(0x1fd)](_0x411762(0x1fb),_0xf8c339,_0x5a9c6f[_0x411762(0x221)]),await fs_internal_1['FS']['removeFile'](''+_0xf8c339+this[_0x411762(0x1ff)])[_0x411762(0x1fc)](()=>void 0x0));return;}this[_0x411762(0x219)][_0x411762(0x1fd)](_0x411762(0x1ea),_0xf8c339,_0x5a9c6f['type']),await Promise[_0x411762(0x20d)]([fs_internal_1['FS']['removeFile'](_0xf8c339),fs_internal_1['FS'][_0x411762(0x215)](_0x5ac534)]);}async['removeChild'](_0x5c17c4){const _0x2f0534=a148_0x286e2d,{fileName:_0x380001,type:_0x4192b4,path:_0xd90fd9}=_0x5c17c4,_0x2b2b6c=child_types_map_1[_0x2f0534(0x21f)][_0x4192b4];if(!_0x2b2b6c)throw new Error(_0x2f0534(0x20e)+_0x4192b4);if(!this[_0x2f0534(0x217)][_0xd90fd9]){const _0x45a395=path_1[_0x2f0534(0x21f)][_0x2f0534(0x213)](this['sourceDir'],_0xd90fd9),_0x25108a=await fs_internal_1['FS'][_0x2f0534(0x21b)](_0x45a395);if(!_0x25108a)return;const _0x1d0599=await fs_internal_1['FS'][_0x2f0534(0x20b)](_0x45a395);this[_0x2f0534(0x217)][_0xd90fd9]=await xml_v2_1[_0x2f0534(0x220)]['parse'](_0x1d0599);}const _0x12c668=this[_0x2f0534(0x217)][_0xd90fd9],_0xdbe198=_0x380001[_0x2f0534(0x223)]('.')[_0x2f0534(0x1f6)]();xml_v2_1[_0x2f0534(0x220)][_0x2f0534(0x222)](_0x12c668,_0x2b2b6c,_0xdbe198||_0x380001),xml_v2_1['XmlV2'][_0x2f0534(0x1f0)](_0x12c668)?(this[_0x2f0534(0x219)][_0x2f0534(0x1fd)](_0x2f0534(0x207),_0x5c17c4[_0x2f0534(0x1f2)],_0x5c17c4[_0x2f0534(0x1f4)]),await this[_0x2f0534(0x212)](_0x5c17c4),delete this[_0x2f0534(0x217)][_0xd90fd9]):this[_0x2f0534(0x217)][_0xd90fd9]=_0x12c668;}async[a148_0x286e2d(0x1ee)](){const _0x4c3da5=a148_0x286e2d;!await fs_internal_1['FS'][_0x4c3da5(0x21b)](this[_0x4c3da5(0x206)])&&await fs_internal_1['FS'][_0x4c3da5(0x1f8)](this['sourceDir']);for(const _0x494ae0 of this['components']){!child_types_1[_0x4c3da5(0x21f)]['includes'](_0x494ae0[_0x4c3da5(0x221)])?(this[_0x4c3da5(0x219)]['log'](_0x4c3da5(0x203),_0x494ae0[_0x4c3da5(0x1f4)],_0x494ae0['type']),await this['removeParent'](_0x494ae0)):(this[_0x4c3da5(0x219)][_0x4c3da5(0x1fd)](_0x4c3da5(0x1f1),_0x494ae0[_0x4c3da5(0x1f4)],_0x494ae0[_0x4c3da5(0x221)]),await this[_0x4c3da5(0x200)](_0x494ae0));}const _0xb772db=Object[_0x4c3da5(0x1ef)](this['parentComponents']);this[_0x4c3da5(0x219)][_0x4c3da5(0x1fd)](_0x4c3da5(0x1f7),this['components'][_0x4c3da5(0x225)]);while(_0xb772db[_0x4c3da5(0x225)]){const _0x24663d=_0xb772db[_0x4c3da5(0x224)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x347a9f of _0x24663d){await fs_internal_1['FS']['writeFile'](path_1[_0x4c3da5(0x21f)][_0x4c3da5(0x213)](this[_0x4c3da5(0x206)],_0x347a9f),xml_v2_1[_0x4c3da5(0x220)][_0x4c3da5(0x208)](this[_0x4c3da5(0x217)][_0x347a9f]));}}this[_0x4c3da5(0x217)]={};}}function a148_0x7096(_0x307f26,_0x493ce6){const _0x8926b5=a148_0x38f2();return a148_0x7096=function(_0x461adb,_0xff054){_0x461adb=_0x461adb-0x1e7;let _0x38f2b9=_0x8926b5[_0x461adb];return _0x38f2b9;},a148_0x7096(_0x307f26,_0x493ce6);}exports[a148_0x286e2d(0x218)]=MDApiRemover;