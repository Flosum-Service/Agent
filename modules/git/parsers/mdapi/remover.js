const a151_0x321de1=a151_0x5bb9;(function(_0x194975,_0x5f3961){const _0x56a6c8=a151_0x5bb9,_0x37e6cb=_0x194975();while(!![]){try{const _0x15a350=parseInt(_0x56a6c8(0x120))/0x1+parseInt(_0x56a6c8(0x136))/0x2*(-parseInt(_0x56a6c8(0x118))/0x3)+parseInt(_0x56a6c8(0x128))/0x4*(-parseInt(_0x56a6c8(0x148))/0x5)+parseInt(_0x56a6c8(0x108))/0x6*(-parseInt(_0x56a6c8(0x135))/0x7)+-parseInt(_0x56a6c8(0x11c))/0x8*(-parseInt(_0x56a6c8(0x12a))/0x9)+-parseInt(_0x56a6c8(0x113))/0xa*(parseInt(_0x56a6c8(0x12d))/0xb)+parseInt(_0x56a6c8(0x145))/0xc;if(_0x15a350===_0x5f3961)break;else _0x37e6cb['push'](_0x37e6cb['shift']());}catch(_0x46e381){_0x37e6cb['push'](_0x37e6cb['shift']());}}}(a151_0x4fad,0x1f3fc));const a151_0x3c1014=(function(){let _0x2efead=!![];return function(_0x4e5103,_0x3f25f1){const _0x8e5c35=_0x2efead?function(){if(_0x3f25f1){const _0x1b47c3=_0x3f25f1['apply'](_0x4e5103,arguments);return _0x3f25f1=null,_0x1b47c3;}}:function(){};return _0x2efead=![],_0x8e5c35;};}()),a151_0x2fa019=a151_0x3c1014(this,function(){const _0x58452e=a151_0x5bb9;return a151_0x2fa019[_0x58452e(0x127)]()[_0x58452e(0x143)](_0x58452e(0x12b))[_0x58452e(0x127)]()[_0x58452e(0x109)](a151_0x2fa019)[_0x58452e(0x143)]('(((.+)+)+)+$');});a151_0x2fa019();function a151_0x5bb9(_0x723955,_0x2ded15){const _0x2c0317=a151_0x4fad();return a151_0x5bb9=function(_0x2fa019,_0x3c1014){_0x2fa019=_0x2fa019-0x108;let _0x4fad6a=_0x2c0317[_0x2fa019];return _0x4fad6a;},a151_0x5bb9(_0x723955,_0x2ded15);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x555801){const _0x55ee5e=a151_0x5bb9;return _0x555801&&_0x555801[_0x55ee5e(0x13a)]?_0x555801:{'default':_0x555801};};Object[a151_0x321de1(0x140)](exports,'__esModule',{'value':!![]}),exports[a151_0x321de1(0x125)]=void 0x0;function a151_0x4fad(){const _0x1565cd=['writeFile','isEmptyXml','remove\x20parent\x20component\x20%s\x20[%s]','sourceDir','defineProperty','join','META_EXTENSION','search','fileName','8299800iVjpey','META_EXPERIENCE_BUNDLE','have\x20to\x20update\x20%d\x20files','970lrCgvm','212838uiKxYM','constructor','components','path','start','keys','catch','remove\x20component\x20directory\x20%s\x20[%s]','type','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','split','10CVoZPW','ExperienceBundle','parentComponents','removeDir','exists','3XiTgxR','log','splice','removeParent','819208SOAFeU','removeAt','logger','Unknown\x20child\x20type\x20','79119ykDGCb','includes','-meta.xml','../../../../core','parse','MDApiRemover','convertToString','toString','4124vXGbBA','pop','9JhsAIb','(((.+)+)+)+$','default','1336885mnwydt','readFile','removeChild','removeFile','../../internal/fs.internal','XmlV2','name','makeDir','42FGdouV','421574MkogRi','../data/child-types-map','MAX_WRITES_PER_TICK','length','__esModule','Logger'];a151_0x4fad=function(){return _0x1565cd;};return a151_0x4fad();}const fs_internal_1=require(a151_0x321de1(0x131)),core_1=require(a151_0x321de1(0x123)),xml_v2_1=require('../utils/xml-v2'),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require(a151_0x321de1(0x137))),path_1=__importDefault(require(a151_0x321de1(0x10b)));class MDApiRemover{constructor(_0x58839e,_0x3948d5){const _0x9072b1=a151_0x321de1;this['components']=_0x58839e,this[_0x9072b1(0x13f)]=_0x3948d5,this[_0x9072b1(0x142)]=_0x9072b1(0x122),this['META_EXPERIENCE_BUNDLE']='site-meta.xml',this[_0x9072b1(0x138)]=0x64,this['logger']=new core_1[(_0x9072b1(0x13b))](MDApiRemover[_0x9072b1(0x133)]),this[_0x9072b1(0x115)]={};}async[a151_0x321de1(0x11b)](_0x1e6607){const _0x1e84fa=a151_0x321de1,_0x322835=path_1[_0x1e84fa(0x12c)]['join'](this[_0x1e84fa(0x13f)],_0x1e6607['path']),_0x29b3f2=path_1[_0x1e84fa(0x12c)][_0x1e84fa(0x141)](this[_0x1e84fa(0x13f)],''+_0x1e6607[_0x1e84fa(0x10b)]+this[_0x1e84fa(0x142)]);this[_0x1e84fa(0x115)][_0x1e6607[_0x1e84fa(0x10b)]]&&delete this[_0x1e84fa(0x115)][_0x1e6607['path']];const _0x1aec5f=await fs_internal_1['FS']['isDir'](_0x322835)[_0x1e84fa(0x10e)](()=>![]);if(_0x1aec5f){this['logger'][_0x1e84fa(0x119)](_0x1e84fa(0x10f),_0x322835,_0x1e6607[_0x1e84fa(0x110)]),await fs_internal_1['FS'][_0x1e84fa(0x116)](_0x322835);_0x1e6607[_0x1e84fa(0x110)]===_0x1e84fa(0x114)?await fs_internal_1['FS'][_0x1e84fa(0x130)](''+_0x322835+this[_0x1e84fa(0x146)])['catch'](()=>void 0x0):(this[_0x1e84fa(0x11e)][_0x1e84fa(0x119)]('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x322835,_0x1e6607[_0x1e84fa(0x110)]),await fs_internal_1['FS'][_0x1e84fa(0x130)](''+_0x322835+this[_0x1e84fa(0x142)])['catch'](()=>void 0x0));return;}this[_0x1e84fa(0x11e)][_0x1e84fa(0x119)]('remove\x20component\x20\x20%s\x20[%s]',_0x322835,_0x1e6607[_0x1e84fa(0x110)]),await Promise['all']([fs_internal_1['FS'][_0x1e84fa(0x130)](_0x322835),fs_internal_1['FS']['removeFile'](_0x29b3f2)]);}async[a151_0x321de1(0x12f)](_0x4737c8){const _0x1650e2=a151_0x321de1,{fileName:_0x1c3514,type:_0x380c8e,path:_0x2a5b95}=_0x4737c8,_0x5906bf=child_types_map_1[_0x1650e2(0x12c)][_0x380c8e];if(!_0x5906bf)throw new Error(_0x1650e2(0x11f)+_0x380c8e);if(!this[_0x1650e2(0x115)][_0x2a5b95]){const _0x38aec8=path_1['default'][_0x1650e2(0x141)](this['sourceDir'],_0x2a5b95),_0x2eb0a3=await fs_internal_1['FS'][_0x1650e2(0x117)](_0x38aec8);if(!_0x2eb0a3)return;const _0x4c5ed2=await fs_internal_1['FS'][_0x1650e2(0x12e)](_0x38aec8);this[_0x1650e2(0x115)][_0x2a5b95]=await xml_v2_1['XmlV2'][_0x1650e2(0x124)](_0x4c5ed2);}const _0x4f6dd5=this['parentComponents'][_0x2a5b95],_0x5cddd8=_0x1c3514[_0x1650e2(0x112)]('.')[_0x1650e2(0x129)]();xml_v2_1[_0x1650e2(0x132)][_0x1650e2(0x11d)](_0x4f6dd5,_0x5906bf,_0x5cddd8||_0x1c3514),xml_v2_1[_0x1650e2(0x132)][_0x1650e2(0x13d)](_0x4f6dd5)?(this[_0x1650e2(0x11e)][_0x1650e2(0x119)](_0x1650e2(0x111),_0x4737c8['path'],_0x4737c8[_0x1650e2(0x144)]),await this[_0x1650e2(0x11b)](_0x4737c8),delete this[_0x1650e2(0x115)][_0x2a5b95]):this['parentComponents'][_0x2a5b95]=_0x4f6dd5;}async[a151_0x321de1(0x10c)](){const _0xaaa5e6=a151_0x321de1;!await fs_internal_1['FS'][_0xaaa5e6(0x117)](this[_0xaaa5e6(0x13f)])&&await fs_internal_1['FS'][_0xaaa5e6(0x134)](this['sourceDir']);for(const _0x9477f8 of this[_0xaaa5e6(0x10a)]){!child_types_1[_0xaaa5e6(0x12c)][_0xaaa5e6(0x121)](_0x9477f8[_0xaaa5e6(0x110)])?(this['logger'][_0xaaa5e6(0x119)](_0xaaa5e6(0x13e),_0x9477f8[_0xaaa5e6(0x144)],_0x9477f8['type']),await this['removeParent'](_0x9477f8)):(this[_0xaaa5e6(0x11e)][_0xaaa5e6(0x119)]('remove\x20child\x20component\x20%s\x20[%s]',_0x9477f8[_0xaaa5e6(0x144)],_0x9477f8[_0xaaa5e6(0x110)]),await this['removeChild'](_0x9477f8));}const _0x579ac9=Object[_0xaaa5e6(0x10d)](this[_0xaaa5e6(0x115)]);this['logger'][_0xaaa5e6(0x119)](_0xaaa5e6(0x147),this['components'][_0xaaa5e6(0x139)]);while(_0x579ac9[_0xaaa5e6(0x139)]){const _0x107acc=_0x579ac9[_0xaaa5e6(0x11a)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x170e20 of _0x107acc){await fs_internal_1['FS'][_0xaaa5e6(0x13c)](path_1[_0xaaa5e6(0x12c)][_0xaaa5e6(0x141)](this[_0xaaa5e6(0x13f)],_0x170e20),xml_v2_1['XmlV2'][_0xaaa5e6(0x126)](this[_0xaaa5e6(0x115)][_0x170e20]));}}this[_0xaaa5e6(0x115)]={};}}exports['MDApiRemover']=MDApiRemover;