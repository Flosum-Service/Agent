const a151_0x471d9b=a151_0x8a1f;(function(_0x5c06bb,_0x3d5ef6){const _0x22508f=a151_0x8a1f,_0x54703c=_0x5c06bb();while(!![]){try{const _0xba74ec=parseInt(_0x22508f(0x1cc))/0x1+parseInt(_0x22508f(0x1e1))/0x2*(parseInt(_0x22508f(0x1cb))/0x3)+-parseInt(_0x22508f(0x1d7))/0x4+-parseInt(_0x22508f(0x1bc))/0x5*(parseInt(_0x22508f(0x1ee))/0x6)+-parseInt(_0x22508f(0x1d6))/0x7*(-parseInt(_0x22508f(0x1b9))/0x8)+-parseInt(_0x22508f(0x1eb))/0x9+-parseInt(_0x22508f(0x1c7))/0xa*(-parseInt(_0x22508f(0x1e2))/0xb);if(_0xba74ec===_0x3d5ef6)break;else _0x54703c['push'](_0x54703c['shift']());}catch(_0x4d472a){_0x54703c['push'](_0x54703c['shift']());}}}(a151_0x6a8d,0xc20c4));function a151_0x6a8d(){const _0x39ae07=['ExperienceBundle','1776kvNlbY','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','toString','7065sXrhhX','join','start','isDir','removeParent','../../../../core','../data/child-types','MDApiRemover','../../internal/fs.internal','all','writeFile','2213300FBkqax','splice','META_EXTENSION','removeAt','1291947mSUMcZ','76858KfcSeE','removeDir','type','fileName','search','remove\x20parent\x20component\x20%s\x20[%s]','pop','path','constructor','components','14210MkJRlY','5215972mMeTvV','removeChild','parse','parentComponents','XmlV2','logger','have\x20to\x20update\x20%d\x20files','(((.+)+)+)+$','site-meta.xml','convertToString','6WFcZLr','55CFZhkV','exists','../utils/xml-v2','META_EXPERIENCE_BUNDLE','-meta.xml','../data/child-types-map','catch','Unknown\x20child\x20type\x20','Logger','4673412GCWdYU','apply','length','1308VbJMob','makeDir','MAX_WRITES_PER_TICK','sourceDir','isEmptyXml','default','log','removeFile'];a151_0x6a8d=function(){return _0x39ae07;};return a151_0x6a8d();}const a151_0x1f89bf=(function(){let _0x207094=!![];return function(_0xfdb884,_0x5ab5ae){const _0x2050d9=_0x207094?function(){const _0x134368=a151_0x8a1f;if(_0x5ab5ae){const _0x2730a0=_0x5ab5ae[_0x134368(0x1ec)](_0xfdb884,arguments);return _0x5ab5ae=null,_0x2730a0;}}:function(){};return _0x207094=![],_0x2050d9;};}()),a151_0x1fa9b5=a151_0x1f89bf(this,function(){const _0x5684b1=a151_0x8a1f;return a151_0x1fa9b5[_0x5684b1(0x1bb)]()['search'](_0x5684b1(0x1de))['toString']()[_0x5684b1(0x1d4)](a151_0x1fa9b5)[_0x5684b1(0x1d0)]('(((.+)+)+)+$');});a151_0x1fa9b5();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x45fbbd){return _0x45fbbd&&_0x45fbbd['__esModule']?_0x45fbbd:{'default':_0x45fbbd};};function a151_0x8a1f(_0x21204d,_0x1c680e){const _0x1cc5f2=a151_0x6a8d();return a151_0x8a1f=function(_0x1fa9b5,_0x1f89bf){_0x1fa9b5=_0x1fa9b5-0x1b4;let _0x6a8db4=_0x1cc5f2[_0x1fa9b5];return _0x6a8db4;},a151_0x8a1f(_0x21204d,_0x1c680e);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a151_0x471d9b(0x1c4)),core_1=require(a151_0x471d9b(0x1c1)),xml_v2_1=require(a151_0x471d9b(0x1e4)),child_types_1=__importDefault(require(a151_0x471d9b(0x1c2))),child_types_map_1=__importDefault(require(a151_0x471d9b(0x1e7))),path_1=__importDefault(require(a151_0x471d9b(0x1d3)));class MDApiRemover{constructor(_0x34b465,_0x2e630a){const _0x484d0f=a151_0x471d9b;this['components']=_0x34b465,this['sourceDir']=_0x2e630a,this[_0x484d0f(0x1c9)]=_0x484d0f(0x1e6),this[_0x484d0f(0x1e5)]=_0x484d0f(0x1df),this[_0x484d0f(0x1f0)]=0x64,this[_0x484d0f(0x1dc)]=new core_1[(_0x484d0f(0x1ea))](MDApiRemover['name']),this[_0x484d0f(0x1da)]={};}async[a151_0x471d9b(0x1c0)](_0x5739c){const _0x5d63c3=a151_0x471d9b,_0x347931=path_1['default'][_0x5d63c3(0x1bd)](this['sourceDir'],_0x5739c[_0x5d63c3(0x1d3)]),_0x533e98=path_1[_0x5d63c3(0x1b5)][_0x5d63c3(0x1bd)](this[_0x5d63c3(0x1f1)],''+_0x5739c[_0x5d63c3(0x1d3)]+this[_0x5d63c3(0x1c9)]);this[_0x5d63c3(0x1da)][_0x5739c[_0x5d63c3(0x1d3)]]&&delete this[_0x5d63c3(0x1da)][_0x5739c[_0x5d63c3(0x1d3)]];const _0x186a97=await fs_internal_1['FS'][_0x5d63c3(0x1bf)](_0x347931)[_0x5d63c3(0x1e8)](()=>![]);if(_0x186a97){this[_0x5d63c3(0x1dc)][_0x5d63c3(0x1b6)]('remove\x20component\x20directory\x20%s\x20[%s]',_0x347931,_0x5739c[_0x5d63c3(0x1ce)]),await fs_internal_1['FS'][_0x5d63c3(0x1cd)](_0x347931);_0x5739c['type']===_0x5d63c3(0x1b8)?await fs_internal_1['FS'][_0x5d63c3(0x1b7)](''+_0x347931+this[_0x5d63c3(0x1e5)])[_0x5d63c3(0x1e8)](()=>void 0x0):(this[_0x5d63c3(0x1dc)][_0x5d63c3(0x1b6)](_0x5d63c3(0x1ba),_0x347931,_0x5739c['type']),await fs_internal_1['FS']['removeFile'](''+_0x347931+this[_0x5d63c3(0x1c9)])[_0x5d63c3(0x1e8)](()=>void 0x0));return;}this['logger'][_0x5d63c3(0x1b6)]('remove\x20component\x20\x20%s\x20[%s]',_0x347931,_0x5739c['type']),await Promise[_0x5d63c3(0x1c5)]([fs_internal_1['FS'][_0x5d63c3(0x1b7)](_0x347931),fs_internal_1['FS'][_0x5d63c3(0x1b7)](_0x533e98)]);}async['removeChild'](_0x305b04){const _0x965843=a151_0x471d9b,{fileName:_0x15480b,type:_0xf53a1a,path:_0x13f744}=_0x305b04,_0x46c72c=child_types_map_1[_0x965843(0x1b5)][_0xf53a1a];if(!_0x46c72c)throw new Error(_0x965843(0x1e9)+_0xf53a1a);if(!this[_0x965843(0x1da)][_0x13f744]){const _0x30f8d4=path_1[_0x965843(0x1b5)]['join'](this[_0x965843(0x1f1)],_0x13f744),_0x3501be=await fs_internal_1['FS'][_0x965843(0x1e3)](_0x30f8d4);if(!_0x3501be)return;const _0x1fb036=await fs_internal_1['FS']['readFile'](_0x30f8d4);this[_0x965843(0x1da)][_0x13f744]=await xml_v2_1['XmlV2'][_0x965843(0x1d9)](_0x1fb036);}const _0x48fae1=this[_0x965843(0x1da)][_0x13f744],_0x540030=_0x15480b['split']('.')[_0x965843(0x1d2)]();xml_v2_1[_0x965843(0x1db)][_0x965843(0x1ca)](_0x48fae1,_0x46c72c,_0x540030||_0x15480b),xml_v2_1[_0x965843(0x1db)][_0x965843(0x1b4)](_0x48fae1)?(this['logger'][_0x965843(0x1b6)]('remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x305b04[_0x965843(0x1d3)],_0x305b04[_0x965843(0x1cf)]),await this[_0x965843(0x1c0)](_0x305b04),delete this[_0x965843(0x1da)][_0x13f744]):this[_0x965843(0x1da)][_0x13f744]=_0x48fae1;}async[a151_0x471d9b(0x1be)](){const _0x2f7854=a151_0x471d9b;!await fs_internal_1['FS'][_0x2f7854(0x1e3)](this['sourceDir'])&&await fs_internal_1['FS'][_0x2f7854(0x1ef)](this[_0x2f7854(0x1f1)]);for(const _0x56dcbe of this[_0x2f7854(0x1d5)]){!child_types_1['default']['includes'](_0x56dcbe[_0x2f7854(0x1ce)])?(this['logger'][_0x2f7854(0x1b6)](_0x2f7854(0x1d1),_0x56dcbe[_0x2f7854(0x1cf)],_0x56dcbe[_0x2f7854(0x1ce)]),await this[_0x2f7854(0x1c0)](_0x56dcbe)):(this[_0x2f7854(0x1dc)][_0x2f7854(0x1b6)]('remove\x20child\x20component\x20%s\x20[%s]',_0x56dcbe[_0x2f7854(0x1cf)],_0x56dcbe[_0x2f7854(0x1ce)]),await this[_0x2f7854(0x1d8)](_0x56dcbe));}const _0x5a8d64=Object['keys'](this['parentComponents']);this[_0x2f7854(0x1dc)][_0x2f7854(0x1b6)](_0x2f7854(0x1dd),this[_0x2f7854(0x1d5)][_0x2f7854(0x1ed)]);while(_0x5a8d64['length']){const _0x58e0d5=_0x5a8d64[_0x2f7854(0x1c8)](0x0,this[_0x2f7854(0x1f0)]);for(const _0x563965 of _0x58e0d5){await fs_internal_1['FS'][_0x2f7854(0x1c6)](path_1[_0x2f7854(0x1b5)]['join'](this[_0x2f7854(0x1f1)],_0x563965),xml_v2_1[_0x2f7854(0x1db)][_0x2f7854(0x1e0)](this[_0x2f7854(0x1da)][_0x563965]));}}this[_0x2f7854(0x1da)]={};}}exports[a151_0x471d9b(0x1c3)]=MDApiRemover;