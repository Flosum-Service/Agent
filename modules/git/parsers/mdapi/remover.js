const a148_0x1d7bad=a148_0x58f8;function a148_0x2be2(){const _0x3bb18b=['search','XmlV2','pop','META_EXTENSION','remove\x20component\x20directory\x20%s\x20[%s]','MDApiRemover','splice','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','includes','removeChild','parse','convertToString','40dqVbyW','type','../data/child-types','Logger','removeAt','63TrCelv','286244wmOrul','550HeuuEe','parentComponents','defineProperty','126538mPuSqR','makeDir','keys','../utils/xml-v2','Unknown\x20child\x20type\x20','11814084kpknFh','writeFile','removeParent','removeFile','sourceDir','log','catch','-meta.xml','split','11SSKjdN','(((.+)+)+)+$','constructor','remove\x20child\x20component\x20%s\x20[%s]','114930GzetJz','components','default','name','length','META_EXPERIENCE_BUNDLE','__esModule','187936uyxzTI','toString','apply','__importDefault','remove\x20parent\x20component\x20%s\x20[%s]','6PSxceD','path','isDir','join','have\x20to\x20update\x20%d\x20files','3354486MZfVpL','ExperienceBundle','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','site-meta.xml','2023263JlHdMj','logger','fileName','start'];a148_0x2be2=function(){return _0x3bb18b;};return a148_0x2be2();}function a148_0x58f8(_0x5b216c,_0x118ae4){const _0x42c8b3=a148_0x2be2();return a148_0x58f8=function(_0x3d30bd,_0x53112c){_0x3d30bd=_0x3d30bd-0x83;let _0x2be2ab=_0x42c8b3[_0x3d30bd];return _0x2be2ab;},a148_0x58f8(_0x5b216c,_0x118ae4);}(function(_0x4cd534,_0x4cf969){const _0x208440=a148_0x58f8,_0xfb6e51=_0x4cd534();while(!![]){try{const _0x5277e1=-parseInt(_0x208440(0x95))/0x1*(parseInt(_0x208440(0xb8))/0x2)+-parseInt(_0x208440(0x9e))/0x3+parseInt(_0x208440(0xb4))/0x4*(-parseInt(_0x208440(0xae))/0x5)+parseInt(_0x208440(0x9a))/0x6+parseInt(_0x208440(0xb3))/0x7*(-parseInt(_0x208440(0x90))/0x8)+-parseInt(_0x208440(0x89))/0x9*(-parseInt(_0x208440(0xb5))/0xa)+-parseInt(_0x208440(0x85))/0xb*(-parseInt(_0x208440(0xbd))/0xc);if(_0x5277e1===_0x4cf969)break;else _0xfb6e51['push'](_0xfb6e51['shift']());}catch(_0x5efe5c){_0xfb6e51['push'](_0xfb6e51['shift']());}}}(a148_0x2be2,0x639b3));const a148_0x53112c=(function(){let _0x12f439=!![];return function(_0x291875,_0x3a3491){const _0x2be566=_0x12f439?function(){const _0x32379e=a148_0x58f8;if(_0x3a3491){const _0x14a49c=_0x3a3491[_0x32379e(0x92)](_0x291875,arguments);return _0x3a3491=null,_0x14a49c;}}:function(){};return _0x12f439=![],_0x2be566;};}()),a148_0x3d30bd=a148_0x53112c(this,function(){const _0x5b3e8a=a148_0x58f8;return a148_0x3d30bd[_0x5b3e8a(0x91)]()['search'](_0x5b3e8a(0x86))[_0x5b3e8a(0x91)]()[_0x5b3e8a(0x87)](a148_0x3d30bd)[_0x5b3e8a(0xa2)](_0x5b3e8a(0x86));});a148_0x3d30bd();'use strict';var __importDefault=this&&this[a148_0x1d7bad(0x93)]||function(_0x46de3a){const _0x2bf986=a148_0x1d7bad;return _0x46de3a&&_0x46de3a[_0x2bf986(0x8f)]?_0x46de3a:{'default':_0x46de3a};};Object[a148_0x1d7bad(0xb7)](exports,a148_0x1d7bad(0x8f),{'value':!![]}),exports[a148_0x1d7bad(0xa7)]=void 0x0;const fs_internal_1=require('../../internal/fs.internal'),core_1=require('../../../../core'),xml_v2_1=require(a148_0x1d7bad(0xbb)),child_types_1=__importDefault(require(a148_0x1d7bad(0xb0))),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require(a148_0x1d7bad(0x96)));class MDApiRemover{constructor(_0x7b6683,_0x2b113c){const _0x241be8=a148_0x1d7bad;this[_0x241be8(0x8a)]=_0x7b6683,this[_0x241be8(0xc1)]=_0x2b113c,this['META_EXTENSION']=_0x241be8(0x83),this['META_EXPERIENCE_BUNDLE']=_0x241be8(0x9d),this['MAX_WRITES_PER_TICK']=0x64,this[_0x241be8(0x9f)]=new core_1[(_0x241be8(0xb1))](MDApiRemover[_0x241be8(0x8c)]),this['parentComponents']={};}async[a148_0x1d7bad(0xbf)](_0x4c3e83){const _0x1895fc=a148_0x1d7bad,_0x136a95=path_1[_0x1895fc(0x8b)]['join'](this['sourceDir'],_0x4c3e83[_0x1895fc(0x96)]),_0x843545=path_1[_0x1895fc(0x8b)][_0x1895fc(0x98)](this[_0x1895fc(0xc1)],''+_0x4c3e83[_0x1895fc(0x96)]+this[_0x1895fc(0xa5)]);this[_0x1895fc(0xb6)][_0x4c3e83['path']]&&delete this[_0x1895fc(0xb6)][_0x4c3e83[_0x1895fc(0x96)]];const _0x5d8457=await fs_internal_1['FS'][_0x1895fc(0x97)](_0x136a95)[_0x1895fc(0xc3)](()=>![]);if(_0x5d8457){this[_0x1895fc(0x9f)][_0x1895fc(0xc2)](_0x1895fc(0xa6),_0x136a95,_0x4c3e83['type']),await fs_internal_1['FS']['removeDir'](_0x136a95);_0x4c3e83[_0x1895fc(0xaf)]===_0x1895fc(0x9b)?await fs_internal_1['FS'][_0x1895fc(0xc0)](''+_0x136a95+this[_0x1895fc(0x8e)])[_0x1895fc(0xc3)](()=>void 0x0):(this[_0x1895fc(0x9f)]['log'](_0x1895fc(0xa9),_0x136a95,_0x4c3e83['type']),await fs_internal_1['FS']['removeFile'](''+_0x136a95+this[_0x1895fc(0xa5)])[_0x1895fc(0xc3)](()=>void 0x0));return;}this[_0x1895fc(0x9f)][_0x1895fc(0xc2)]('remove\x20component\x20\x20%s\x20[%s]',_0x136a95,_0x4c3e83[_0x1895fc(0xaf)]),await Promise['all']([fs_internal_1['FS'][_0x1895fc(0xc0)](_0x136a95),fs_internal_1['FS'][_0x1895fc(0xc0)](_0x843545)]);}async[a148_0x1d7bad(0xab)](_0x5e985e){const _0x5d9638=a148_0x1d7bad,{fileName:_0x358f44,type:_0x28704b,path:_0x2bf819}=_0x5e985e,_0x40ac4d=child_types_map_1[_0x5d9638(0x8b)][_0x28704b];if(!_0x40ac4d)throw new Error(_0x5d9638(0xbc)+_0x28704b);if(!this['parentComponents'][_0x2bf819]){const _0x3aa348=path_1['default'][_0x5d9638(0x98)](this['sourceDir'],_0x2bf819),_0x2c0f33=await fs_internal_1['FS']['exists'](_0x3aa348);if(!_0x2c0f33)return;const _0x2e4598=await fs_internal_1['FS']['readFile'](_0x3aa348);this['parentComponents'][_0x2bf819]=await xml_v2_1[_0x5d9638(0xa3)][_0x5d9638(0xac)](_0x2e4598);}const _0x1f575d=this[_0x5d9638(0xb6)][_0x2bf819],_0x415d05=_0x358f44[_0x5d9638(0x84)]('.')[_0x5d9638(0xa4)]();xml_v2_1[_0x5d9638(0xa3)][_0x5d9638(0xb2)](_0x1f575d,_0x40ac4d,_0x415d05||_0x358f44),xml_v2_1['XmlV2']['isEmptyXml'](_0x1f575d)?(this[_0x5d9638(0x9f)][_0x5d9638(0xc2)](_0x5d9638(0x9c),_0x5e985e[_0x5d9638(0x96)],_0x5e985e[_0x5d9638(0xa0)]),await this[_0x5d9638(0xbf)](_0x5e985e),delete this[_0x5d9638(0xb6)][_0x2bf819]):this['parentComponents'][_0x2bf819]=_0x1f575d;}async[a148_0x1d7bad(0xa1)](){const _0x507bab=a148_0x1d7bad;!await fs_internal_1['FS']['exists'](this['sourceDir'])&&await fs_internal_1['FS'][_0x507bab(0xb9)](this[_0x507bab(0xc1)]);for(const _0x2e0eea of this[_0x507bab(0x8a)]){!child_types_1['default'][_0x507bab(0xaa)](_0x2e0eea[_0x507bab(0xaf)])?(this[_0x507bab(0x9f)][_0x507bab(0xc2)](_0x507bab(0x94),_0x2e0eea[_0x507bab(0xa0)],_0x2e0eea['type']),await this[_0x507bab(0xbf)](_0x2e0eea)):(this[_0x507bab(0x9f)][_0x507bab(0xc2)](_0x507bab(0x88),_0x2e0eea[_0x507bab(0xa0)],_0x2e0eea[_0x507bab(0xaf)]),await this[_0x507bab(0xab)](_0x2e0eea));}const _0x4de004=Object[_0x507bab(0xba)](this['parentComponents']);this[_0x507bab(0x9f)][_0x507bab(0xc2)](_0x507bab(0x99),this[_0x507bab(0x8a)]['length']);while(_0x4de004[_0x507bab(0x8d)]){const _0x1bf39a=_0x4de004[_0x507bab(0xa8)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x450cc0 of _0x1bf39a){await fs_internal_1['FS'][_0x507bab(0xbe)](path_1[_0x507bab(0x8b)][_0x507bab(0x98)](this[_0x507bab(0xc1)],_0x450cc0),xml_v2_1[_0x507bab(0xa3)][_0x507bab(0xad)](this[_0x507bab(0xb6)][_0x450cc0]));}}this[_0x507bab(0xb6)]={};}}exports[a148_0x1d7bad(0xa7)]=MDApiRemover;