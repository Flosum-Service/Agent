const a151_0x1a5dd6=a151_0x318b;(function(_0x17793f,_0x40cdae){const _0x4e0008=a151_0x318b,_0xef556a=_0x17793f();while(!![]){try{const _0x3b8119=-parseInt(_0x4e0008(0x107))/0x1*(-parseInt(_0x4e0008(0x133))/0x2)+parseInt(_0x4e0008(0x102))/0x3*(parseInt(_0x4e0008(0x124))/0x4)+parseInt(_0x4e0008(0x122))/0x5*(-parseInt(_0x4e0008(0x10a))/0x6)+parseInt(_0x4e0008(0x121))/0x7+-parseInt(_0x4e0008(0x135))/0x8+parseInt(_0x4e0008(0x105))/0x9+-parseInt(_0x4e0008(0x126))/0xa;if(_0x3b8119===_0x40cdae)break;else _0xef556a['push'](_0xef556a['shift']());}catch(_0x5979a9){_0xef556a['push'](_0xef556a['shift']());}}}(a151_0x5336,0x2560f));const a151_0x580ce1=(function(){let _0x1c30e9=!![];return function(_0x269102,_0x424973){const _0x553793=_0x1c30e9?function(){if(_0x424973){const _0x2e64f7=_0x424973['apply'](_0x269102,arguments);return _0x424973=null,_0x2e64f7;}}:function(){};return _0x1c30e9=![],_0x553793;};}()),a151_0x5efe9d=a151_0x580ce1(this,function(){const _0x5ee788=a151_0x318b;return a151_0x5efe9d[_0x5ee788(0x104)]()['search'](_0x5ee788(0x11f))['toString']()['constructor'](a151_0x5efe9d)['search'](_0x5ee788(0x11f));});a151_0x5efe9d();'use strict';var __importDefault=this&&this[a151_0x1a5dd6(0x10c)]||function(_0x10714f){const _0x502aca=a151_0x1a5dd6;return _0x10714f&&_0x10714f[_0x502aca(0x100)]?_0x10714f:{'default':_0x10714f};};function a151_0x5336(){const _0x26124a=['default','../utils/xml-v2','../../internal/fs.internal','catch','makeDir','path','META_EXTENSION','removeAt','14pZmkEz','convertToString','1206896XfhwFm','XmlV2','../data/child-types','logger','parentComponents','remove\x20component\x20directory\x20%s\x20[%s]','isDir','remove\x20child\x20component\x20%s\x20[%s]','pop','__esModule','defineProperty','3yzcLuC','start','toString','2628216ownMdn','splice','15971iaqNee','META_EXPERIENCE_BUNDLE','name','6BVCaHd','components','__importDefault','removeFile','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','../data/child-types-map','length','writeFile','includes','MDApiRemover','have\x20to\x20update\x20%d\x20files','type','remove\x20component\x20\x20%s\x20[%s]','split','sourceDir','remove\x20parent\x20component\x20%s\x20[%s]','log','removeChild','site-meta.xml','MAX_WRITES_PER_TICK','isEmptyXml','(((.+)+)+)+$','-meta.xml','1998591XNlWtY','696190keghMe','join','752012sbZjuF','../../../../core','4341340ChPYIo','fileName','removeDir','readFile','removeParent'];a151_0x5336=function(){return _0x26124a;};return a151_0x5336();}Object[a151_0x1a5dd6(0x101)](exports,a151_0x1a5dd6(0x100),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a151_0x1a5dd6(0x12d)),core_1=require(a151_0x1a5dd6(0x125)),xml_v2_1=require(a151_0x1a5dd6(0x12c)),child_types_1=__importDefault(require(a151_0x1a5dd6(0x137))),child_types_map_1=__importDefault(require(a151_0x1a5dd6(0x10f))),path_1=__importDefault(require('path'));function a151_0x318b(_0x42522b,_0x1d1c9e){const _0x3058b5=a151_0x5336();return a151_0x318b=function(_0x5efe9d,_0x580ce1){_0x5efe9d=_0x5efe9d-0xff;let _0x533636=_0x3058b5[_0x5efe9d];return _0x533636;},a151_0x318b(_0x42522b,_0x1d1c9e);}class MDApiRemover{constructor(_0x17cdd2,_0x27bec4){const _0x54e5d0=a151_0x1a5dd6;this[_0x54e5d0(0x10b)]=_0x17cdd2,this['sourceDir']=_0x27bec4,this[_0x54e5d0(0x131)]=_0x54e5d0(0x120),this[_0x54e5d0(0x108)]=_0x54e5d0(0x11c),this['MAX_WRITES_PER_TICK']=0x64,this[_0x54e5d0(0x138)]=new core_1['Logger'](MDApiRemover[_0x54e5d0(0x109)]),this[_0x54e5d0(0x139)]={};}async['removeParent'](_0x39eadf){const _0x4897ec=a151_0x1a5dd6,_0x13a6cf=path_1['default'][_0x4897ec(0x123)](this[_0x4897ec(0x118)],_0x39eadf[_0x4897ec(0x130)]),_0x3b9ad7=path_1[_0x4897ec(0x12b)][_0x4897ec(0x123)](this[_0x4897ec(0x118)],''+_0x39eadf[_0x4897ec(0x130)]+this['META_EXTENSION']);this[_0x4897ec(0x139)][_0x39eadf[_0x4897ec(0x130)]]&&delete this[_0x4897ec(0x139)][_0x39eadf[_0x4897ec(0x130)]];const _0x27fc4e=await fs_internal_1['FS'][_0x4897ec(0x13b)](_0x13a6cf)[_0x4897ec(0x12e)](()=>![]);if(_0x27fc4e){this['logger']['log'](_0x4897ec(0x13a),_0x13a6cf,_0x39eadf['type']),await fs_internal_1['FS'][_0x4897ec(0x128)](_0x13a6cf);_0x39eadf['type']==='ExperienceBundle'?await fs_internal_1['FS'][_0x4897ec(0x10d)](''+_0x13a6cf+this[_0x4897ec(0x108)])[_0x4897ec(0x12e)](()=>void 0x0):(this[_0x4897ec(0x138)][_0x4897ec(0x11a)]('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x13a6cf,_0x39eadf['type']),await fs_internal_1['FS'][_0x4897ec(0x10d)](''+_0x13a6cf+this[_0x4897ec(0x131)])[_0x4897ec(0x12e)](()=>void 0x0));return;}this[_0x4897ec(0x138)][_0x4897ec(0x11a)](_0x4897ec(0x116),_0x13a6cf,_0x39eadf[_0x4897ec(0x115)]),await Promise['all']([fs_internal_1['FS']['removeFile'](_0x13a6cf),fs_internal_1['FS']['removeFile'](_0x3b9ad7)]);}async[a151_0x1a5dd6(0x11b)](_0x5e92f5){const _0x1beca7=a151_0x1a5dd6,{fileName:_0x3bc901,type:_0x11f7c6,path:_0x293ad0}=_0x5e92f5,_0x5a166d=child_types_map_1[_0x1beca7(0x12b)][_0x11f7c6];if(!_0x5a166d)throw new Error('Unknown\x20child\x20type\x20'+_0x11f7c6);if(!this[_0x1beca7(0x139)][_0x293ad0]){const _0x13b76d=path_1[_0x1beca7(0x12b)][_0x1beca7(0x123)](this[_0x1beca7(0x118)],_0x293ad0),_0x59f980=await fs_internal_1['FS']['exists'](_0x13b76d);if(!_0x59f980)return;const _0x1d7999=await fs_internal_1['FS'][_0x1beca7(0x129)](_0x13b76d);this[_0x1beca7(0x139)][_0x293ad0]=await xml_v2_1[_0x1beca7(0x136)]['parse'](_0x1d7999);}const _0x2493fc=this[_0x1beca7(0x139)][_0x293ad0],_0x4b37b9=_0x3bc901[_0x1beca7(0x117)]('.')[_0x1beca7(0xff)]();xml_v2_1[_0x1beca7(0x136)][_0x1beca7(0x132)](_0x2493fc,_0x5a166d,_0x4b37b9||_0x3bc901),xml_v2_1[_0x1beca7(0x136)][_0x1beca7(0x11e)](_0x2493fc)?(this[_0x1beca7(0x138)][_0x1beca7(0x11a)](_0x1beca7(0x10e),_0x5e92f5[_0x1beca7(0x130)],_0x5e92f5['fileName']),await this[_0x1beca7(0x12a)](_0x5e92f5),delete this[_0x1beca7(0x139)][_0x293ad0]):this[_0x1beca7(0x139)][_0x293ad0]=_0x2493fc;}async[a151_0x1a5dd6(0x103)](){const _0x44f8f4=a151_0x1a5dd6;!await fs_internal_1['FS']['exists'](this['sourceDir'])&&await fs_internal_1['FS'][_0x44f8f4(0x12f)](this[_0x44f8f4(0x118)]);for(const _0x2aa770 of this[_0x44f8f4(0x10b)]){!child_types_1[_0x44f8f4(0x12b)][_0x44f8f4(0x112)](_0x2aa770[_0x44f8f4(0x115)])?(this[_0x44f8f4(0x138)][_0x44f8f4(0x11a)](_0x44f8f4(0x119),_0x2aa770[_0x44f8f4(0x127)],_0x2aa770[_0x44f8f4(0x115)]),await this[_0x44f8f4(0x12a)](_0x2aa770)):(this['logger']['log'](_0x44f8f4(0x13c),_0x2aa770[_0x44f8f4(0x127)],_0x2aa770['type']),await this[_0x44f8f4(0x11b)](_0x2aa770));}const _0x35b2d0=Object['keys'](this['parentComponents']);this[_0x44f8f4(0x138)][_0x44f8f4(0x11a)](_0x44f8f4(0x114),this['components'][_0x44f8f4(0x110)]);while(_0x35b2d0[_0x44f8f4(0x110)]){const _0x2a6557=_0x35b2d0[_0x44f8f4(0x106)](0x0,this[_0x44f8f4(0x11d)]);for(const _0x54c362 of _0x2a6557){await fs_internal_1['FS'][_0x44f8f4(0x111)](path_1[_0x44f8f4(0x12b)][_0x44f8f4(0x123)](this[_0x44f8f4(0x118)],_0x54c362),xml_v2_1[_0x44f8f4(0x136)][_0x44f8f4(0x134)](this[_0x44f8f4(0x139)][_0x54c362]));}}this[_0x44f8f4(0x139)]={};}}exports[a151_0x1a5dd6(0x113)]=MDApiRemover;