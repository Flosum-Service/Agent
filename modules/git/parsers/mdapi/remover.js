const a151_0x19857a=a151_0x19d1;(function(_0x13effd,_0x190681){const _0x21db39=a151_0x19d1,_0x2cf302=_0x13effd();while(!![]){try{const _0x8c1f71=parseInt(_0x21db39(0x1bd))/0x1*(-parseInt(_0x21db39(0x1a8))/0x2)+-parseInt(_0x21db39(0x1b2))/0x3*(parseInt(_0x21db39(0x18a))/0x4)+parseInt(_0x21db39(0x1b4))/0x5*(parseInt(_0x21db39(0x186))/0x6)+parseInt(_0x21db39(0x1a4))/0x7+-parseInt(_0x21db39(0x190))/0x8*(-parseInt(_0x21db39(0x185))/0x9)+-parseInt(_0x21db39(0x198))/0xa*(parseInt(_0x21db39(0x1a1))/0xb)+parseInt(_0x21db39(0x1b5))/0xc*(parseInt(_0x21db39(0x1ab))/0xd);if(_0x8c1f71===_0x190681)break;else _0x2cf302['push'](_0x2cf302['shift']());}catch(_0x35b6a5){_0x2cf302['push'](_0x2cf302['shift']());}}}(a151_0x3709,0xa5d51));function a151_0x3709(){const _0x3ac467=['type','27LUeXvn','3462DOcDCx','ExperienceBundle','join','toString','12HUGNCe','split','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','isDir','removeParent','-meta.xml','239504hfqmDW','default','XmlV2','start','length','fileName','Logger','log','1065400VadOFl','removeChild','../../../../core','MDApiRemover','splice','exists','removeDir','isEmptyXml','apply','11pVBpBO','constructor','META_EXPERIENCE_BUNDLE','5934446TeSPwA','catch','MAX_WRITES_PER_TICK','convertToString','424GotYZJ','removeAt','makeDir','13QTPKmg','removeFile','sourceDir','components','META_EXTENSION','remove\x20component\x20directory\x20%s\x20[%s]','(((.+)+)+)+$','1192629lJsrBP','remove\x20child\x20component\x20%s\x20[%s]','11375ZxryHK','12739572JTUVrB','all','remove\x20component\x20\x20%s\x20[%s]','logger','search','__importDefault','../../internal/fs.internal','have\x20to\x20update\x20%d\x20files','6290CTftwQ','defineProperty','site-meta.xml','../utils/xml-v2','parentComponents','path'];a151_0x3709=function(){return _0x3ac467;};return a151_0x3709();}const a151_0xe7ad8f=(function(){let _0x2afcf7=!![];return function(_0x256540,_0x563e00){const _0x17565a=_0x2afcf7?function(){const _0x404bba=a151_0x19d1;if(_0x563e00){const _0x1db542=_0x563e00[_0x404bba(0x1a0)](_0x256540,arguments);return _0x563e00=null,_0x1db542;}}:function(){};return _0x2afcf7=![],_0x17565a;};}()),a151_0x351b2d=a151_0xe7ad8f(this,function(){const _0x222fbd=a151_0x19d1;return a151_0x351b2d[_0x222fbd(0x189)]()[_0x222fbd(0x1b9)](_0x222fbd(0x1b1))[_0x222fbd(0x189)]()[_0x222fbd(0x1a2)](a151_0x351b2d)[_0x222fbd(0x1b9)]('(((.+)+)+)+$');});a151_0x351b2d();'use strict';var __importDefault=this&&this[a151_0x19857a(0x1ba)]||function(_0x322a18){return _0x322a18&&_0x322a18['__esModule']?_0x322a18:{'default':_0x322a18};};Object[a151_0x19857a(0x1be)](exports,'__esModule',{'value':!![]}),exports[a151_0x19857a(0x19b)]=void 0x0;function a151_0x19d1(_0x31290a,_0x393462){const _0x35a4b7=a151_0x3709();return a151_0x19d1=function(_0x351b2d,_0xe7ad8f){_0x351b2d=_0x351b2d-0x183;let _0x3709f7=_0x35a4b7[_0x351b2d];return _0x3709f7;},a151_0x19d1(_0x31290a,_0x393462);}const fs_internal_1=require(a151_0x19857a(0x1bb)),core_1=require(a151_0x19857a(0x19a)),xml_v2_1=require(a151_0x19857a(0x1c0)),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require(a151_0x19857a(0x183)));class MDApiRemover{constructor(_0x5da4e9,_0x14fa5b){const _0x376e37=a151_0x19857a;this[_0x376e37(0x1ae)]=_0x5da4e9,this['sourceDir']=_0x14fa5b,this[_0x376e37(0x1af)]=_0x376e37(0x18f),this[_0x376e37(0x1a3)]=_0x376e37(0x1bf),this[_0x376e37(0x1a6)]=0x64,this[_0x376e37(0x1b8)]=new core_1[(_0x376e37(0x196))](MDApiRemover['name']),this[_0x376e37(0x1c1)]={};}async[a151_0x19857a(0x18e)](_0x4f40c1){const _0xdc7b53=a151_0x19857a,_0x1e100d=path_1[_0xdc7b53(0x191)][_0xdc7b53(0x188)](this[_0xdc7b53(0x1ad)],_0x4f40c1[_0xdc7b53(0x183)]),_0x3ba408=path_1['default'][_0xdc7b53(0x188)](this[_0xdc7b53(0x1ad)],''+_0x4f40c1['path']+this[_0xdc7b53(0x1af)]);this['parentComponents'][_0x4f40c1[_0xdc7b53(0x183)]]&&delete this[_0xdc7b53(0x1c1)][_0x4f40c1[_0xdc7b53(0x183)]];const _0x4dee53=await fs_internal_1['FS'][_0xdc7b53(0x18d)](_0x1e100d)[_0xdc7b53(0x1a5)](()=>![]);if(_0x4dee53){this['logger'][_0xdc7b53(0x197)](_0xdc7b53(0x1b0),_0x1e100d,_0x4f40c1[_0xdc7b53(0x184)]),await fs_internal_1['FS'][_0xdc7b53(0x19e)](_0x1e100d);_0x4f40c1[_0xdc7b53(0x184)]===_0xdc7b53(0x187)?await fs_internal_1['FS']['removeFile'](''+_0x1e100d+this[_0xdc7b53(0x1a3)])[_0xdc7b53(0x1a5)](()=>void 0x0):(this[_0xdc7b53(0x1b8)][_0xdc7b53(0x197)]('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x1e100d,_0x4f40c1[_0xdc7b53(0x184)]),await fs_internal_1['FS'][_0xdc7b53(0x1ac)](''+_0x1e100d+this[_0xdc7b53(0x1af)])[_0xdc7b53(0x1a5)](()=>void 0x0));return;}this[_0xdc7b53(0x1b8)][_0xdc7b53(0x197)](_0xdc7b53(0x1b7),_0x1e100d,_0x4f40c1[_0xdc7b53(0x184)]),await Promise[_0xdc7b53(0x1b6)]([fs_internal_1['FS'][_0xdc7b53(0x1ac)](_0x1e100d),fs_internal_1['FS'][_0xdc7b53(0x1ac)](_0x3ba408)]);}async[a151_0x19857a(0x199)](_0x3a584d){const _0x414c22=a151_0x19857a,{fileName:_0xd64f36,type:_0x9402ac,path:_0x5e07ee}=_0x3a584d,_0x3b0815=child_types_map_1[_0x414c22(0x191)][_0x9402ac];if(!_0x3b0815)throw new Error('Unknown\x20child\x20type\x20'+_0x9402ac);if(!this[_0x414c22(0x1c1)][_0x5e07ee]){const _0x8ff6c3=path_1[_0x414c22(0x191)][_0x414c22(0x188)](this[_0x414c22(0x1ad)],_0x5e07ee),_0x2d70f2=await fs_internal_1['FS'][_0x414c22(0x19d)](_0x8ff6c3);if(!_0x2d70f2)return;const _0x5f0c47=await fs_internal_1['FS']['readFile'](_0x8ff6c3);this[_0x414c22(0x1c1)][_0x5e07ee]=await xml_v2_1[_0x414c22(0x192)]['parse'](_0x5f0c47);}const _0x267044=this[_0x414c22(0x1c1)][_0x5e07ee],_0x2d33bb=_0xd64f36[_0x414c22(0x18b)]('.')['pop']();xml_v2_1['XmlV2'][_0x414c22(0x1a9)](_0x267044,_0x3b0815,_0x2d33bb||_0xd64f36),xml_v2_1[_0x414c22(0x192)][_0x414c22(0x19f)](_0x267044)?(this['logger']['log'](_0x414c22(0x18c),_0x3a584d['path'],_0x3a584d[_0x414c22(0x195)]),await this[_0x414c22(0x18e)](_0x3a584d),delete this[_0x414c22(0x1c1)][_0x5e07ee]):this['parentComponents'][_0x5e07ee]=_0x267044;}async[a151_0x19857a(0x193)](){const _0x4aadec=a151_0x19857a;!await fs_internal_1['FS'][_0x4aadec(0x19d)](this[_0x4aadec(0x1ad)])&&await fs_internal_1['FS'][_0x4aadec(0x1aa)](this['sourceDir']);for(const _0xa11867 of this[_0x4aadec(0x1ae)]){!child_types_1[_0x4aadec(0x191)]['includes'](_0xa11867[_0x4aadec(0x184)])?(this[_0x4aadec(0x1b8)][_0x4aadec(0x197)]('remove\x20parent\x20component\x20%s\x20[%s]',_0xa11867[_0x4aadec(0x195)],_0xa11867[_0x4aadec(0x184)]),await this[_0x4aadec(0x18e)](_0xa11867)):(this[_0x4aadec(0x1b8)][_0x4aadec(0x197)](_0x4aadec(0x1b3),_0xa11867['fileName'],_0xa11867['type']),await this[_0x4aadec(0x199)](_0xa11867));}const _0xbfb55c=Object['keys'](this[_0x4aadec(0x1c1)]);this[_0x4aadec(0x1b8)]['log'](_0x4aadec(0x1bc),this['components'][_0x4aadec(0x194)]);while(_0xbfb55c[_0x4aadec(0x194)]){const _0x45f4f5=_0xbfb55c[_0x4aadec(0x19c)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x2a45be of _0x45f4f5){await fs_internal_1['FS']['writeFile'](path_1[_0x4aadec(0x191)][_0x4aadec(0x188)](this[_0x4aadec(0x1ad)],_0x2a45be),xml_v2_1['XmlV2'][_0x4aadec(0x1a7)](this['parentComponents'][_0x2a45be]));}}this['parentComponents']={};}}exports[a151_0x19857a(0x19b)]=MDApiRemover;