const a115_0x161629=a115_0x4587;(function(_0x105e45,_0x511449){const _0x1d8a8f=a115_0x4587,_0x298cd8=_0x105e45();while(!![]){try{const _0x8484d2=-parseInt(_0x1d8a8f(0xf0))/0x1+-parseInt(_0x1d8a8f(0x11f))/0x2*(-parseInt(_0x1d8a8f(0xef))/0x3)+-parseInt(_0x1d8a8f(0xf2))/0x4*(parseInt(_0x1d8a8f(0xfd))/0x5)+parseInt(_0x1d8a8f(0x11b))/0x6+parseInt(_0x1d8a8f(0x10f))/0x7*(parseInt(_0x1d8a8f(0x11a))/0x8)+parseInt(_0x1d8a8f(0x10c))/0x9*(parseInt(_0x1d8a8f(0x116))/0xa)+-parseInt(_0x1d8a8f(0x100))/0xb*(-parseInt(_0x1d8a8f(0x11c))/0xc);if(_0x8484d2===_0x511449)break;else _0x298cd8['push'](_0x298cd8['shift']());}catch(_0x5c28b2){_0x298cd8['push'](_0x298cd8['shift']());}}}(a115_0x3af6,0xeb886));const a115_0x2e8ea8=(function(){let _0x258fcf=!![];return function(_0x51daf3,_0x4a959b){const _0x35a926=_0x258fcf?function(){const _0x33c72e=a115_0x4587;if(_0x4a959b){const _0xa67381=_0x4a959b[_0x33c72e(0x10d)](_0x51daf3,arguments);return _0x4a959b=null,_0xa67381;}}:function(){};return _0x258fcf=![],_0x35a926;};}()),a115_0x44ad42=a115_0x2e8ea8(this,function(){const _0xfc3531=a115_0x4587;return a115_0x44ad42[_0xfc3531(0x111)]()['search'](_0xfc3531(0x104))['toString']()['constructor'](a115_0x44ad42)[_0xfc3531(0x102)](_0xfc3531(0x104));});a115_0x44ad42();'use strict';var __importDefault=this&&this[a115_0x161629(0x12a)]||function(_0x569c63){return _0x569c63&&_0x569c63['__esModule']?_0x569c63:{'default':_0x569c63};};Object['defineProperty'](exports,a115_0x161629(0x101),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a115_0x161629(0x129)),core_1=require(a115_0x161629(0x12f)),xml_1=require(a115_0x161629(0x11e)),child_types_1=__importDefault(require(a115_0x161629(0x117))),child_types_map_1=__importDefault(require(a115_0x161629(0xf3))),path_1=__importDefault(require(a115_0x161629(0xf9)));class MDApiRemover{constructor(_0xdaf724,_0x24c0f0){const _0x1ec881=a115_0x161629;this['components']=_0xdaf724,this[_0x1ec881(0x114)]=_0x24c0f0,this['META_EXTENSION']=_0x1ec881(0x113),this[_0x1ec881(0x12d)]=_0x1ec881(0xfe),this[_0x1ec881(0xf1)]=0x64,this[_0x1ec881(0x11d)]=new core_1['Logger'](MDApiRemover[_0x1ec881(0x109)]),this[_0x1ec881(0xfa)]={};}async[a115_0x161629(0x124)](_0x415717){const _0x56e8ad=a115_0x161629,_0x18d2d2=path_1[_0x56e8ad(0x121)][_0x56e8ad(0x12c)](this[_0x56e8ad(0x114)],_0x415717[_0x56e8ad(0xf9)]),_0x2f7dc5=path_1[_0x56e8ad(0x121)][_0x56e8ad(0x12c)](this[_0x56e8ad(0x114)],''+_0x415717[_0x56e8ad(0xf9)]+this['META_EXTENSION']);this[_0x56e8ad(0xfa)][_0x415717[_0x56e8ad(0xf9)]]&&delete this[_0x56e8ad(0xfa)][_0x415717[_0x56e8ad(0xf9)]];const _0x3f8650=await fs_internal_1['FS'][_0x56e8ad(0xfc)](_0x18d2d2)[_0x56e8ad(0x12e)](()=>![]);if(_0x3f8650){this[_0x56e8ad(0x11d)][_0x56e8ad(0xfb)](_0x56e8ad(0x105),_0x18d2d2,_0x415717[_0x56e8ad(0xf7)]),await fs_internal_1['FS'][_0x56e8ad(0x119)](_0x18d2d2);_0x415717[_0x56e8ad(0xf7)]===_0x56e8ad(0x127)?await fs_internal_1['FS'][_0x56e8ad(0x107)](''+_0x18d2d2+this[_0x56e8ad(0x12d)])[_0x56e8ad(0x12e)](()=>void 0x0):(this[_0x56e8ad(0x11d)][_0x56e8ad(0xfb)](_0x56e8ad(0x112),_0x18d2d2,_0x415717[_0x56e8ad(0xf7)]),await fs_internal_1['FS'][_0x56e8ad(0x107)](''+_0x18d2d2+this[_0x56e8ad(0xf4)])['catch'](()=>void 0x0));return;}this[_0x56e8ad(0x11d)][_0x56e8ad(0xfb)]('remove\x20component\x20\x20%s\x20[%s]',_0x18d2d2,_0x415717[_0x56e8ad(0xf7)]),await Promise[_0x56e8ad(0xff)]([fs_internal_1['FS'][_0x56e8ad(0x107)](_0x18d2d2),fs_internal_1['FS'][_0x56e8ad(0x107)](_0x2f7dc5)]);}async[a115_0x161629(0xf5)](_0x36d226){const _0x566db7=a115_0x161629,{fileName:_0x868ac6,type:_0x165ca5,path:_0x2bdbb1}=_0x36d226,_0x423e3a=child_types_map_1['default'][_0x165ca5];if(!_0x423e3a)throw new Error('Unknown\x20child\x20type\x20'+_0x165ca5);if(!this[_0x566db7(0xfa)][_0x2bdbb1]){const _0x2b837c=path_1[_0x566db7(0x121)][_0x566db7(0x12c)](this['sourceDir'],_0x2bdbb1),_0x10ee3e=await fs_internal_1['FS'][_0x566db7(0xf8)](_0x2b837c);if(!_0x10ee3e)return;const _0x93bef5=await fs_internal_1['FS'][_0x566db7(0x128)](_0x2b837c);this[_0x566db7(0xfa)][_0x2bdbb1]=await xml_1[_0x566db7(0x108)][_0x566db7(0x10e)](_0x93bef5);}const _0x34ee74=this[_0x566db7(0xfa)][_0x2bdbb1],_0xa84833=_0x868ac6[_0x566db7(0x106)]('.')[_0x566db7(0xf6)]();xml_1[_0x566db7(0x108)][_0x566db7(0x125)](_0x34ee74,_0x423e3a,_0xa84833||_0x868ac6),xml_1[_0x566db7(0x108)][_0x566db7(0x126)](_0x34ee74)?(this['logger']['log']('remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x36d226[_0x566db7(0xf9)],_0x36d226[_0x566db7(0x103)]),await this[_0x566db7(0x124)](_0x36d226),delete this[_0x566db7(0xfa)][_0x2bdbb1]):this[_0x566db7(0xfa)][_0x2bdbb1]=_0x34ee74;}async[a115_0x161629(0x10a)](){const _0x118724=a115_0x161629;!await fs_internal_1['FS'][_0x118724(0xf8)](this[_0x118724(0x114)])&&await fs_internal_1['FS'][_0x118724(0x118)](this[_0x118724(0x114)]);for(const _0x3b8a74 of this[_0x118724(0x10b)]){!child_types_1[_0x118724(0x121)]['includes'](_0x3b8a74[_0x118724(0xf7)])?(this[_0x118724(0x11d)]['log'](_0x118724(0x123),_0x3b8a74[_0x118724(0x103)],_0x3b8a74[_0x118724(0xf7)]),await this[_0x118724(0x124)](_0x3b8a74)):(this[_0x118724(0x11d)][_0x118724(0xfb)]('remove\x20child\x20component\x20%s\x20[%s]',_0x3b8a74[_0x118724(0x103)],_0x3b8a74[_0x118724(0xf7)]),await this[_0x118724(0xf5)](_0x3b8a74));}const _0x2e4f39=Object[_0x118724(0x122)](this[_0x118724(0xfa)]);this[_0x118724(0x11d)][_0x118724(0xfb)](_0x118724(0x12b),this[_0x118724(0x10b)][_0x118724(0x110)]);while(_0x2e4f39['length']){const _0x28ff60=_0x2e4f39[_0x118724(0x115)](0x0,this[_0x118724(0xf1)]);for(const _0xe1fd96 of _0x28ff60){await fs_internal_1['FS']['writeFile'](path_1[_0x118724(0x121)][_0x118724(0x12c)](this[_0x118724(0x114)],_0xe1fd96),xml_1[_0x118724(0x108)]['convertToString'](this[_0x118724(0xfa)][_0xe1fd96]));}}this[_0x118724(0xfa)]={};}}function a115_0x4587(_0x28ece8,_0x5231a9){const _0x5649e0=a115_0x3af6();return a115_0x4587=function(_0x44ad42,_0x2e8ea8){_0x44ad42=_0x44ad42-0xef;let _0x3af667=_0x5649e0[_0x44ad42];return _0x3af667;},a115_0x4587(_0x28ece8,_0x5231a9);}function a115_0x3af6(){const _0x3afa4b=['default','keys','remove\x20parent\x20component\x20%s\x20[%s]','removeParent','removeAt','isEmptyXml','ExperienceBundle','readFile','../../internal/fs.internal','__importDefault','have\x20to\x20update\x20%d\x20files','join','META_EXPERIENCE_BUNDLE','catch','../../../../core','1140eVVsQh','956655dalrkh','MAX_WRITES_PER_TICK','1604684aCtGNN','../data/child-types-map','META_EXTENSION','removeChild','pop','type','exists','path','parentComponents','log','isDir','20dgniqb','site-meta.xml','all','11LcMryR','__esModule','search','fileName','(((.+)+)+)+$','remove\x20component\x20directory\x20%s\x20[%s]','split','removeFile','Xml','name','start','components','45711UcaJwF','apply','parse','217ILiqIl','length','toString','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','-meta.xml','sourceDir','splice','2270JygSQo','../data/child-types','makeDir','removeDir','58440etkyLJ','7191738QfKMJB','9926760SyPsMR','logger','../utils/xml','636WeKEYQ','MDApiRemover'];a115_0x3af6=function(){return _0x3afa4b;};return a115_0x3af6();}exports[a115_0x161629(0x120)]=MDApiRemover;