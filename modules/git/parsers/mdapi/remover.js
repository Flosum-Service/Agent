const a103_0x37a46f=a103_0x277a;(function(_0xdf294e,_0x2eaed8){const _0x53ce89=a103_0x277a,_0x375191=_0xdf294e();while(!![]){try{const _0xd34447=parseInt(_0x53ce89(0xc0))/0x1+parseInt(_0x53ce89(0xec))/0x2*(parseInt(_0x53ce89(0xc4))/0x3)+-parseInt(_0x53ce89(0xe3))/0x4*(-parseInt(_0x53ce89(0xb5))/0x5)+-parseInt(_0x53ce89(0xe2))/0x6*(-parseInt(_0x53ce89(0xbf))/0x7)+parseInt(_0x53ce89(0xca))/0x8+-parseInt(_0x53ce89(0xd0))/0x9+-parseInt(_0x53ce89(0xcf))/0xa;if(_0xd34447===_0x2eaed8)break;else _0x375191['push'](_0x375191['shift']());}catch(_0x55b9db){_0x375191['push'](_0x375191['shift']());}}}(a103_0x4750,0xe87f8));const a103_0x171953=(function(){let _0x5b1d01=!![];return function(_0x15a4d4,_0x1009d8){const _0x4fdc97=_0x5b1d01?function(){if(_0x1009d8){const _0x5157ad=_0x1009d8['apply'](_0x15a4d4,arguments);return _0x1009d8=null,_0x5157ad;}}:function(){};return _0x5b1d01=![],_0x4fdc97;};}()),a103_0x5decac=a103_0x171953(this,function(){const _0x42619f=a103_0x277a;return a103_0x5decac['toString']()[_0x42619f(0xe9)](_0x42619f(0xc5))['toString']()['constructor'](a103_0x5decac)['search']('(((.+)+)+)+$');});a103_0x5decac();function a103_0x277a(_0x122536,_0x16facc){const _0x2a8248=a103_0x4750();return a103_0x277a=function(_0x5decac,_0x171953){_0x5decac=_0x5decac-0xb3;let _0x4750ca=_0x2a8248[_0x5decac];return _0x4750ca;},a103_0x277a(_0x122536,_0x16facc);}'use strict';var __importDefault=this&&this[a103_0x37a46f(0xc6)]||function(_0x3ef78){const _0x4f4f07=a103_0x37a46f;return _0x3ef78&&_0x3ef78[_0x4f4f07(0xeb)]?_0x3ef78:{'default':_0x3ef78};};Object[a103_0x37a46f(0xe8)](exports,a103_0x37a46f(0xeb),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a103_0x37a46f(0xd4)),core_1=require(a103_0x37a46f(0xd6)),xml_1=require(a103_0x37a46f(0xcb)),child_types_1=__importDefault(require(a103_0x37a46f(0xe0))),child_types_map_1=__importDefault(require(a103_0x37a46f(0xe4))),path_1=__importDefault(require('path'));class MDApiRemover{constructor(_0x11579c,_0x252db3){const _0x525871=a103_0x37a46f;this[_0x525871(0xd7)]=_0x11579c,this[_0x525871(0xb8)]=_0x252db3,this[_0x525871(0xd8)]=_0x525871(0xb4),this[_0x525871(0xc7)]=_0x525871(0xdd),this['MAX_WRITES_PER_TICK']=0x64,this['logger']=new core_1[(_0x525871(0xd1))](MDApiRemover['name']),this[_0x525871(0xd9)]={};}async[a103_0x37a46f(0xd2)](_0x5bfe4c){const _0x5de882=a103_0x37a46f,_0x2eb30e=path_1[_0x5de882(0xd5)][_0x5de882(0xc3)](this['sourceDir'],_0x5bfe4c['path']),_0x300039=path_1[_0x5de882(0xd5)][_0x5de882(0xc3)](this['sourceDir'],''+_0x5bfe4c[_0x5de882(0xdb)]+this[_0x5de882(0xd8)]);this['parentComponents'][_0x5bfe4c[_0x5de882(0xdb)]]&&delete this['parentComponents'][_0x5bfe4c[_0x5de882(0xdb)]];const _0x2ebf46=await fs_internal_1['FS'][_0x5de882(0xea)](_0x2eb30e)[_0x5de882(0xdf)](()=>![]);if(_0x2ebf46){this[_0x5de882(0xc2)][_0x5de882(0xcd)](_0x5de882(0xce),_0x2eb30e,_0x5bfe4c['type']),await fs_internal_1['FS']['removeDir'](_0x2eb30e);_0x5bfe4c['type']===_0x5de882(0xde)?await fs_internal_1['FS']['removeFile'](''+_0x2eb30e+this[_0x5de882(0xc7)])['catch'](()=>void 0x0):(this['logger'][_0x5de882(0xcd)](_0x5de882(0xe6),_0x2eb30e,_0x5bfe4c[_0x5de882(0xb3)]),await fs_internal_1['FS'][_0x5de882(0xba)](''+_0x2eb30e+this['META_EXTENSION'])[_0x5de882(0xdf)](()=>void 0x0));return;}this[_0x5de882(0xc2)][_0x5de882(0xcd)](_0x5de882(0xb9),_0x2eb30e,_0x5bfe4c[_0x5de882(0xb3)]),await Promise['all']([fs_internal_1['FS'][_0x5de882(0xba)](_0x2eb30e),fs_internal_1['FS'][_0x5de882(0xba)](_0x300039)]);}async[a103_0x37a46f(0xbc)](_0x547b63){const _0x2f695e=a103_0x37a46f,{fileName:_0x5b15d0,type:_0x590880,path:_0x4d5776}=_0x547b63,_0x588d88=child_types_map_1['default'][_0x590880];if(!_0x588d88)throw new Error('Unknown\x20child\x20type\x20'+_0x590880);if(!this[_0x2f695e(0xd9)][_0x4d5776]){const _0x363df4=path_1[_0x2f695e(0xd5)]['join'](this[_0x2f695e(0xb8)],_0x4d5776),_0x31c3c1=await fs_internal_1['FS']['exists'](_0x363df4);if(!_0x31c3c1)return;const _0xff94bf=await fs_internal_1['FS'][_0x2f695e(0xe1)](_0x363df4);this[_0x2f695e(0xd9)][_0x4d5776]=await xml_1[_0x2f695e(0xc8)]['parse'](_0xff94bf);}const _0x5c5f0b=this[_0x2f695e(0xd9)][_0x4d5776],_0x23b17d=_0x5b15d0[_0x2f695e(0xb6)]('.')[_0x2f695e(0xdc)]();xml_1[_0x2f695e(0xc8)]['removeAt'](_0x5c5f0b,_0x588d88,_0x23b17d||_0x5b15d0),xml_1[_0x2f695e(0xc8)]['isEmptyXml'](_0x5c5f0b)?(this[_0x2f695e(0xc2)][_0x2f695e(0xcd)]('remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x547b63['path'],_0x547b63[_0x2f695e(0xbd)]),await this[_0x2f695e(0xd2)](_0x547b63),delete this['parentComponents'][_0x4d5776]):this[_0x2f695e(0xd9)][_0x4d5776]=_0x5c5f0b;}async[a103_0x37a46f(0xda)](){const _0xb1891a=a103_0x37a46f;!await fs_internal_1['FS']['exists'](this[_0xb1891a(0xb8)])&&await fs_internal_1['FS'][_0xb1891a(0xee)](this['sourceDir']);for(const _0x414cba of this['components']){!child_types_1['default'][_0xb1891a(0xe7)](_0x414cba[_0xb1891a(0xb3)])?(this[_0xb1891a(0xc2)][_0xb1891a(0xcd)](_0xb1891a(0xd3),_0x414cba[_0xb1891a(0xbd)],_0x414cba[_0xb1891a(0xb3)]),await this['removeParent'](_0x414cba)):(this[_0xb1891a(0xc2)][_0xb1891a(0xcd)]('remove\x20child\x20component\x20%s\x20[%s]',_0x414cba[_0xb1891a(0xbd)],_0x414cba[_0xb1891a(0xb3)]),await this[_0xb1891a(0xbc)](_0x414cba));}const _0x14150c=Object[_0xb1891a(0xbe)](this[_0xb1891a(0xd9)]);this[_0xb1891a(0xc2)][_0xb1891a(0xcd)](_0xb1891a(0xbb),this['components'][_0xb1891a(0xed)]);while(_0x14150c[_0xb1891a(0xed)]){const _0x2dacd4=_0x14150c[_0xb1891a(0xcc)](0x0,this[_0xb1891a(0xb7)]);for(const _0x565ec7 of _0x2dacd4){await fs_internal_1['FS'][_0xb1891a(0xe5)](path_1[_0xb1891a(0xd5)]['join'](this[_0xb1891a(0xb8)],_0x565ec7),xml_1['Xml'][_0xb1891a(0xc1)](this[_0xb1891a(0xd9)][_0x565ec7]));}}this[_0xb1891a(0xd9)]={};}}function a103_0x4750(){const _0x2ac742=['type','-meta.xml','945bIRdnZ','split','MAX_WRITES_PER_TICK','sourceDir','remove\x20component\x20\x20%s\x20[%s]','removeFile','have\x20to\x20update\x20%d\x20files','removeChild','fileName','keys','7428638nMRJyh','301328YXXeKV','convertToString','logger','join','50172ikxKVH','(((.+)+)+)+$','__importDefault','META_EXPERIENCE_BUNDLE','Xml','MDApiRemover','11316168VLubEt','../utils/xml','splice','log','remove\x20component\x20directory\x20%s\x20[%s]','37186940QtxKuw','3433716eGjJex','Logger','removeParent','remove\x20parent\x20component\x20%s\x20[%s]','../../internal/fs.internal','default','../../../../core','components','META_EXTENSION','parentComponents','start','path','pop','site-meta.xml','ExperienceBundle','catch','../data/child-types','readFile','6dJNmqV','18780vWMRMQ','../data/child-types-map','writeFile','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','includes','defineProperty','search','isDir','__esModule','166VDShNp','length','makeDir'];a103_0x4750=function(){return _0x2ac742;};return a103_0x4750();}exports[a103_0x37a46f(0xc9)]=MDApiRemover;