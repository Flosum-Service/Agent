const a116_0x2cb200=a116_0x5950;(function(_0x5ac51c,_0x4f5424){const _0x1f9467=a116_0x5950,_0x4002c1=_0x5ac51c();while(!![]){try{const _0x46cc06=parseInt(_0x1f9467(0x1b5))/0x1*(-parseInt(_0x1f9467(0x18b))/0x2)+-parseInt(_0x1f9467(0x186))/0x3*(-parseInt(_0x1f9467(0x19f))/0x4)+parseInt(_0x1f9467(0x1a4))/0x5+-parseInt(_0x1f9467(0x1c0))/0x6*(-parseInt(_0x1f9467(0x1bc))/0x7)+parseInt(_0x1f9467(0x1bf))/0x8*(-parseInt(_0x1f9467(0x194))/0x9)+parseInt(_0x1f9467(0x1a5))/0xa*(parseInt(_0x1f9467(0x1b9))/0xb)+-parseInt(_0x1f9467(0x1ae))/0xc;if(_0x46cc06===_0x4f5424)break;else _0x4002c1['push'](_0x4002c1['shift']());}catch(_0x364e68){_0x4002c1['push'](_0x4002c1['shift']());}}}(a116_0x1aaa,0x8a5c9));const a116_0x42f963=(function(){let _0x21655b=!![];return function(_0x1b415a,_0x1f770f){const _0x47355f=_0x21655b?function(){const _0x9ad66a=a116_0x5950;if(_0x1f770f){const _0x17874d=_0x1f770f[_0x9ad66a(0x188)](_0x1b415a,arguments);return _0x1f770f=null,_0x17874d;}}:function(){};return _0x21655b=![],_0x47355f;};}()),a116_0x374eb7=a116_0x42f963(this,function(){const _0x19a643=a116_0x5950;return a116_0x374eb7[_0x19a643(0x1b2)]()[_0x19a643(0x185)](_0x19a643(0x18d))[_0x19a643(0x1b2)]()[_0x19a643(0x1a6)](a116_0x374eb7)[_0x19a643(0x185)](_0x19a643(0x18d));});a116_0x374eb7();'use strict';function a116_0x1aaa(){const _0x3dcadc=['type','META_EXTENSION','955130XfXoRx','1062590aZGWBz','constructor','MAX_WRITES_PER_TICK','isDir','join','../../internal/fs.internal','parentComponents','remove\x20parent\x20component\x20%s\x20[%s]','length','7321656gIVfes','logger','readFile','fileName','toString','removeChild','META_EXPERIENCE_BUNDLE','2hqqWSU','../data/child-types','isEmptyXml','catch','22NFzJYp','../data/child-types-map','Xml','233317JNdFGa','all','parse','1101992XjUzXS','186fCohmt','default','search','3sWcfGa','pop','apply','-meta.xml','convertToString','724222fJKrWS','keys','(((.+)+)+)+$','__esModule','remove\x20child\x20component\x20%s\x20[%s]','defineProperty','name','makeDir','log','9FtIJnL','path','removeParent','sourceDir','removeFile','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','__importDefault','writeFile','Logger','removeDir','includes','2408132theabG','components','exists'];a116_0x1aaa=function(){return _0x3dcadc;};return a116_0x1aaa();}function a116_0x5950(_0x5233f4,_0x5359d6){const _0x483da7=a116_0x1aaa();return a116_0x5950=function(_0x374eb7,_0x42f963){_0x374eb7=_0x374eb7-0x185;let _0x1aaa01=_0x483da7[_0x374eb7];return _0x1aaa01;},a116_0x5950(_0x5233f4,_0x5359d6);}var __importDefault=this&&this[a116_0x2cb200(0x19a)]||function(_0x150914){return _0x150914&&_0x150914['__esModule']?_0x150914:{'default':_0x150914};};Object[a116_0x2cb200(0x190)](exports,a116_0x2cb200(0x18e),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a116_0x2cb200(0x1aa)),core_1=require('../../../../core'),xml_1=require('../utils/xml'),child_types_1=__importDefault(require(a116_0x2cb200(0x1b6))),child_types_map_1=__importDefault(require(a116_0x2cb200(0x1ba))),path_1=__importDefault(require(a116_0x2cb200(0x195)));class MDApiRemover{constructor(_0x456212,_0x3e4729){const _0x375121=a116_0x2cb200;this[_0x375121(0x1a0)]=_0x456212,this[_0x375121(0x197)]=_0x3e4729,this[_0x375121(0x1a3)]=_0x375121(0x189),this[_0x375121(0x1b4)]='site-meta.xml',this[_0x375121(0x1a7)]=0x64,this[_0x375121(0x1af)]=new core_1[(_0x375121(0x19c))](MDApiRemover[_0x375121(0x191)]),this[_0x375121(0x1ab)]={};}async[a116_0x2cb200(0x196)](_0x55788f){const _0x23f1c0=a116_0x2cb200,_0x2f2c5a=path_1['default'][_0x23f1c0(0x1a9)](this[_0x23f1c0(0x197)],_0x55788f[_0x23f1c0(0x195)]),_0x2820d5=path_1[_0x23f1c0(0x1c1)][_0x23f1c0(0x1a9)](this[_0x23f1c0(0x197)],''+_0x55788f['path']+this['META_EXTENSION']);this[_0x23f1c0(0x1ab)][_0x55788f[_0x23f1c0(0x195)]]&&delete this[_0x23f1c0(0x1ab)][_0x55788f[_0x23f1c0(0x195)]];const _0x134e9c=await fs_internal_1['FS'][_0x23f1c0(0x1a8)](_0x2f2c5a)[_0x23f1c0(0x1b8)](()=>![]);if(_0x134e9c){this[_0x23f1c0(0x1af)]['log']('remove\x20component\x20directory\x20%s\x20[%s]',_0x2f2c5a,_0x55788f['type']),await fs_internal_1['FS'][_0x23f1c0(0x19d)](_0x2f2c5a);_0x55788f[_0x23f1c0(0x1a2)]==='ExperienceBundle'?await fs_internal_1['FS'][_0x23f1c0(0x198)](''+_0x2f2c5a+this[_0x23f1c0(0x1b4)])[_0x23f1c0(0x1b8)](()=>void 0x0):(this[_0x23f1c0(0x1af)][_0x23f1c0(0x193)]('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x2f2c5a,_0x55788f[_0x23f1c0(0x1a2)]),await fs_internal_1['FS'][_0x23f1c0(0x198)](''+_0x2f2c5a+this['META_EXTENSION'])[_0x23f1c0(0x1b8)](()=>void 0x0));return;}this[_0x23f1c0(0x1af)][_0x23f1c0(0x193)]('remove\x20component\x20\x20%s\x20[%s]',_0x2f2c5a,_0x55788f[_0x23f1c0(0x1a2)]),await Promise[_0x23f1c0(0x1bd)]([fs_internal_1['FS'][_0x23f1c0(0x198)](_0x2f2c5a),fs_internal_1['FS']['removeFile'](_0x2820d5)]);}async[a116_0x2cb200(0x1b3)](_0x4fea4b){const _0x57ac40=a116_0x2cb200,{fileName:_0x1898a1,type:_0x33381a,path:_0x1476ff}=_0x4fea4b,_0x515bbc=child_types_map_1[_0x57ac40(0x1c1)][_0x33381a];if(!_0x515bbc)throw new Error('Unknown\x20child\x20type\x20'+_0x33381a);if(!this[_0x57ac40(0x1ab)][_0x1476ff]){const _0x33abe9=path_1['default'][_0x57ac40(0x1a9)](this['sourceDir'],_0x1476ff),_0x3f130e=await fs_internal_1['FS'][_0x57ac40(0x1a1)](_0x33abe9);if(!_0x3f130e)return;const _0x16016d=await fs_internal_1['FS'][_0x57ac40(0x1b0)](_0x33abe9);this['parentComponents'][_0x1476ff]=await xml_1[_0x57ac40(0x1bb)][_0x57ac40(0x1be)](_0x16016d);}const _0xc82363=this[_0x57ac40(0x1ab)][_0x1476ff],_0x4e479e=_0x1898a1['split']('.')[_0x57ac40(0x187)]();xml_1['Xml']['removeAt'](_0xc82363,_0x515bbc,_0x4e479e||_0x1898a1),xml_1[_0x57ac40(0x1bb)][_0x57ac40(0x1b7)](_0xc82363)?(this['logger'][_0x57ac40(0x193)](_0x57ac40(0x199),_0x4fea4b[_0x57ac40(0x195)],_0x4fea4b[_0x57ac40(0x1b1)]),await this[_0x57ac40(0x196)](_0x4fea4b),delete this[_0x57ac40(0x1ab)][_0x1476ff]):this[_0x57ac40(0x1ab)][_0x1476ff]=_0xc82363;}async['start'](){const _0x3ee926=a116_0x2cb200;!await fs_internal_1['FS']['exists'](this[_0x3ee926(0x197)])&&await fs_internal_1['FS'][_0x3ee926(0x192)](this['sourceDir']);for(const _0x3e66ca of this[_0x3ee926(0x1a0)]){!child_types_1[_0x3ee926(0x1c1)][_0x3ee926(0x19e)](_0x3e66ca[_0x3ee926(0x1a2)])?(this[_0x3ee926(0x1af)]['log'](_0x3ee926(0x1ac),_0x3e66ca[_0x3ee926(0x1b1)],_0x3e66ca[_0x3ee926(0x1a2)]),await this[_0x3ee926(0x196)](_0x3e66ca)):(this[_0x3ee926(0x1af)][_0x3ee926(0x193)](_0x3ee926(0x18f),_0x3e66ca[_0x3ee926(0x1b1)],_0x3e66ca[_0x3ee926(0x1a2)]),await this['removeChild'](_0x3e66ca));}const _0x512eb5=Object[_0x3ee926(0x18c)](this[_0x3ee926(0x1ab)]);this[_0x3ee926(0x1af)][_0x3ee926(0x193)]('have\x20to\x20update\x20%d\x20files',this[_0x3ee926(0x1a0)][_0x3ee926(0x1ad)]);while(_0x512eb5[_0x3ee926(0x1ad)]){const _0x5a5159=_0x512eb5['splice'](0x0,this[_0x3ee926(0x1a7)]);for(const _0x5d28ba of _0x5a5159){await fs_internal_1['FS'][_0x3ee926(0x19b)](path_1[_0x3ee926(0x1c1)]['join'](this['sourceDir'],_0x5d28ba),xml_1[_0x3ee926(0x1bb)][_0x3ee926(0x18a)](this[_0x3ee926(0x1ab)][_0x5d28ba]));}}this[_0x3ee926(0x1ab)]={};}}exports['MDApiRemover']=MDApiRemover;