const a147_0xd56afa=a147_0x3355;(function(_0x213d64,_0x192c3b){const _0x29beef=a147_0x3355,_0x1e43bc=_0x213d64();while(!![]){try{const _0x1202bd=parseInt(_0x29beef(0x121))/0x1+-parseInt(_0x29beef(0x113))/0x2+-parseInt(_0x29beef(0x149))/0x3*(-parseInt(_0x29beef(0x11e))/0x4)+-parseInt(_0x29beef(0x123))/0x5*(parseInt(_0x29beef(0x12c))/0x6)+parseInt(_0x29beef(0x11f))/0x7+-parseInt(_0x29beef(0x14b))/0x8*(parseInt(_0x29beef(0x139))/0x9)+parseInt(_0x29beef(0x130))/0xa*(-parseInt(_0x29beef(0x144))/0xb);if(_0x1202bd===_0x192c3b)break;else _0x1e43bc['push'](_0x1e43bc['shift']());}catch(_0x249f6b){_0x1e43bc['push'](_0x1e43bc['shift']());}}}(a147_0x599e,0xc8b18));const a147_0x596566=(function(){let _0x5b7014=!![];return function(_0x200f3f,_0x4d94b8){const _0x27969b=_0x5b7014?function(){if(_0x4d94b8){const _0x37d795=_0x4d94b8['apply'](_0x200f3f,arguments);return _0x4d94b8=null,_0x37d795;}}:function(){};return _0x5b7014=![],_0x27969b;};}()),a147_0x31b5ff=a147_0x596566(this,function(){const _0x1374bc=a147_0x3355;return a147_0x31b5ff[_0x1374bc(0x13c)]()[_0x1374bc(0x152)]('(((.+)+)+)+$')[_0x1374bc(0x13c)]()[_0x1374bc(0x138)](a147_0x31b5ff)[_0x1374bc(0x152)](_0x1374bc(0x114));});a147_0x31b5ff();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x47ffa5){const _0x3059ff=a147_0x3355;return _0x47ffa5&&_0x47ffa5[_0x3059ff(0x115)]?_0x47ffa5:{'default':_0x47ffa5};};Object[a147_0xd56afa(0x129)](exports,a147_0xd56afa(0x115),{'value':!![]}),exports['MDApiRemover']=void 0x0;function a147_0x599e(){const _0x1cb8d7=['makeDir','META_EXTENSION','removeChild','1450TOfNLR','remove\x20component\x20directory\x20%s\x20[%s]','components','remove\x20child\x20component\x20%s\x20[%s]','length','fileName','ExperienceBundle','isEmptyXml','constructor','3443256ngmmGj','META_EXPERIENCE_BUNDLE','default','toString','type','isDir','join','name','parentComponents','XmlV2','Unknown\x20child\x20type\x20','12595aYloGK','removeDir','Logger','have\x20to\x20update\x20%d\x20files','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','9sUhOBp','splice','24coHdgo','MDApiRemover','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','writeFile','parse','../utils/xml-v2','removeAt','search','3025790LBsPNw','(((.+)+)+)+$','__esModule','path','log','pop','readFile','start','catch','MAX_WRITES_PER_TICK','includes','1965716DERxsT','10873534dGhBeH','logger','817032saAdeB','exists','979845NeajQH','removeParent','../data/child-types-map','all','keys','sourceDir','defineProperty','removeFile','split','6NYaoaM'];a147_0x599e=function(){return _0x1cb8d7;};return a147_0x599e();}function a147_0x3355(_0x126404,_0x4ffd77){const _0x42c8b5=a147_0x599e();return a147_0x3355=function(_0x31b5ff,_0x596566){_0x31b5ff=_0x31b5ff-0x113;let _0x599e23=_0x42c8b5[_0x31b5ff];return _0x599e23;},a147_0x3355(_0x126404,_0x4ffd77);}const fs_internal_1=require('../../internal/fs.internal'),core_1=require('../../../../core'),xml_v2_1=require(a147_0xd56afa(0x150)),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require(a147_0xd56afa(0x125))),path_1=__importDefault(require(a147_0xd56afa(0x116)));class MDApiRemover{constructor(_0x38cf18,_0x19d5b6){const _0x1e9f7d=a147_0xd56afa;this[_0x1e9f7d(0x132)]=_0x38cf18,this[_0x1e9f7d(0x128)]=_0x19d5b6,this[_0x1e9f7d(0x12e)]='-meta.xml',this[_0x1e9f7d(0x13a)]='site-meta.xml',this[_0x1e9f7d(0x11c)]=0x64,this[_0x1e9f7d(0x120)]=new core_1[(_0x1e9f7d(0x146))](MDApiRemover[_0x1e9f7d(0x140)]),this[_0x1e9f7d(0x141)]={};}async[a147_0xd56afa(0x124)](_0x1e6869){const _0x393330=a147_0xd56afa,_0x3a860f=path_1[_0x393330(0x13b)]['join'](this['sourceDir'],_0x1e6869[_0x393330(0x116)]),_0x22c6d8=path_1[_0x393330(0x13b)][_0x393330(0x13f)](this[_0x393330(0x128)],''+_0x1e6869[_0x393330(0x116)]+this[_0x393330(0x12e)]);this[_0x393330(0x141)][_0x1e6869[_0x393330(0x116)]]&&delete this[_0x393330(0x141)][_0x1e6869[_0x393330(0x116)]];const _0x67c281=await fs_internal_1['FS'][_0x393330(0x13e)](_0x3a860f)[_0x393330(0x11b)](()=>![]);if(_0x67c281){this[_0x393330(0x120)][_0x393330(0x117)](_0x393330(0x131),_0x3a860f,_0x1e6869[_0x393330(0x13d)]),await fs_internal_1['FS'][_0x393330(0x145)](_0x3a860f);_0x1e6869[_0x393330(0x13d)]===_0x393330(0x136)?await fs_internal_1['FS'][_0x393330(0x12a)](''+_0x3a860f+this['META_EXPERIENCE_BUNDLE'])['catch'](()=>void 0x0):(this['logger'][_0x393330(0x117)](_0x393330(0x14d),_0x3a860f,_0x1e6869[_0x393330(0x13d)]),await fs_internal_1['FS'][_0x393330(0x12a)](''+_0x3a860f+this[_0x393330(0x12e)])[_0x393330(0x11b)](()=>void 0x0));return;}this[_0x393330(0x120)][_0x393330(0x117)]('remove\x20component\x20\x20%s\x20[%s]',_0x3a860f,_0x1e6869['type']),await Promise[_0x393330(0x126)]([fs_internal_1['FS']['removeFile'](_0x3a860f),fs_internal_1['FS']['removeFile'](_0x22c6d8)]);}async[a147_0xd56afa(0x12f)](_0x148fce){const _0xa74c9d=a147_0xd56afa,{fileName:_0x443595,type:_0x3d2dc4,path:_0xbe14a5}=_0x148fce,_0x4dd64b=child_types_map_1[_0xa74c9d(0x13b)][_0x3d2dc4];if(!_0x4dd64b)throw new Error(_0xa74c9d(0x143)+_0x3d2dc4);if(!this[_0xa74c9d(0x141)][_0xbe14a5]){const _0x41cb89=path_1[_0xa74c9d(0x13b)]['join'](this[_0xa74c9d(0x128)],_0xbe14a5),_0x209e51=await fs_internal_1['FS'][_0xa74c9d(0x122)](_0x41cb89);if(!_0x209e51)return;const _0x5d534e=await fs_internal_1['FS'][_0xa74c9d(0x119)](_0x41cb89);this[_0xa74c9d(0x141)][_0xbe14a5]=await xml_v2_1[_0xa74c9d(0x142)][_0xa74c9d(0x14f)](_0x5d534e);}const _0x5a3dd8=this[_0xa74c9d(0x141)][_0xbe14a5],_0x14eb6a=_0x443595[_0xa74c9d(0x12b)]('.')[_0xa74c9d(0x118)]();xml_v2_1[_0xa74c9d(0x142)][_0xa74c9d(0x151)](_0x5a3dd8,_0x4dd64b,_0x14eb6a||_0x443595),xml_v2_1[_0xa74c9d(0x142)][_0xa74c9d(0x137)](_0x5a3dd8)?(this[_0xa74c9d(0x120)][_0xa74c9d(0x117)](_0xa74c9d(0x148),_0x148fce[_0xa74c9d(0x116)],_0x148fce[_0xa74c9d(0x135)]),await this['removeParent'](_0x148fce),delete this[_0xa74c9d(0x141)][_0xbe14a5]):this[_0xa74c9d(0x141)][_0xbe14a5]=_0x5a3dd8;}async[a147_0xd56afa(0x11a)](){const _0x178bad=a147_0xd56afa;!await fs_internal_1['FS'][_0x178bad(0x122)](this['sourceDir'])&&await fs_internal_1['FS'][_0x178bad(0x12d)](this['sourceDir']);for(const _0x578309 of this[_0x178bad(0x132)]){!child_types_1[_0x178bad(0x13b)][_0x178bad(0x11d)](_0x578309['type'])?(this[_0x178bad(0x120)][_0x178bad(0x117)]('remove\x20parent\x20component\x20%s\x20[%s]',_0x578309[_0x178bad(0x135)],_0x578309['type']),await this[_0x178bad(0x124)](_0x578309)):(this[_0x178bad(0x120)][_0x178bad(0x117)](_0x178bad(0x133),_0x578309['fileName'],_0x578309[_0x178bad(0x13d)]),await this[_0x178bad(0x12f)](_0x578309));}const _0x16b08b=Object[_0x178bad(0x127)](this['parentComponents']);this[_0x178bad(0x120)]['log'](_0x178bad(0x147),this[_0x178bad(0x132)][_0x178bad(0x134)]);while(_0x16b08b['length']){const _0x36a18e=_0x16b08b[_0x178bad(0x14a)](0x0,this[_0x178bad(0x11c)]);for(const _0x2693a6 of _0x36a18e){await fs_internal_1['FS'][_0x178bad(0x14e)](path_1[_0x178bad(0x13b)][_0x178bad(0x13f)](this[_0x178bad(0x128)],_0x2693a6),xml_v2_1[_0x178bad(0x142)]['convertToString'](this[_0x178bad(0x141)][_0x2693a6]));}}this['parentComponents']={};}}exports[a147_0xd56afa(0x14c)]=MDApiRemover;