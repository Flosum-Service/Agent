function a148_0x4978(){const _0x5d8cc0=['remove\x20child\x20component\x20%s\x20[%s]','remove\x20component\x20directory\x20%s\x20[%s]','Logger','22566SNqDYA','type','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','catch','default','search','keys','constructor','-meta.xml','parentComponents','(((.+)+)+)+$','log','4436aLGMuM','remove\x20parent\x20component\x20%s\x20[%s]','22awvitb','writeFile','logger','MDApiRemover','name','2779zgLnAE','convertToString','exists','pop','14589tNRosX','includes','8016ZXJlVY','../../internal/fs.internal','../utils/xml-v2','site-meta.xml','Unknown\x20child\x20type\x20','isEmptyXml','remove\x20component\x20\x20%s\x20[%s]','6605glEWfg','split','META_EXPERIENCE_BUNDLE','readFile','path','splice','makeDir','XmlV2','isDir','88681UUtWoH','removeFile','removeChild','../data/child-types','META_EXTENSION','../../../../core','fileName','removeParent','apply','have\x20to\x20update\x20%d\x20files','4422549TkPTSG','MAX_WRITES_PER_TICK','join','52766640ZQdkpt','2416490ZQJIrh','components','sourceDir','toString','length','__importDefault','2ZbIuXZ'];a148_0x4978=function(){return _0x5d8cc0;};return a148_0x4978();}const a148_0x15a986=a148_0x4cbc;(function(_0x94b1ac,_0x507a7e){const _0x594f28=a148_0x4cbc,_0xd13cdf=_0x94b1ac();while(!![]){try{const _0x185caa=-parseInt(_0x594f28(0x163))/0x1*(-parseInt(_0x594f28(0x136))/0x2)+-parseInt(_0x594f28(0x16d))/0x3+-parseInt(_0x594f28(0x146))/0x4*(-parseInt(_0x594f28(0x15a))/0x5)+-parseInt(_0x594f28(0x13a))/0x6*(parseInt(_0x594f28(0x14d))/0x7)+-parseInt(_0x594f28(0x153))/0x8*(parseInt(_0x594f28(0x151))/0x9)+parseInt(_0x594f28(0x130))/0xa*(-parseInt(_0x594f28(0x148))/0xb)+parseInt(_0x594f28(0x12f))/0xc;if(_0x185caa===_0x507a7e)break;else _0xd13cdf['push'](_0xd13cdf['shift']());}catch(_0x40ff5d){_0xd13cdf['push'](_0xd13cdf['shift']());}}}(a148_0x4978,0xd5e12));const a148_0x361022=(function(){let _0xe95cdf=!![];return function(_0x14eb3f,_0x51dcb2){const _0x1b5c8d=_0xe95cdf?function(){const _0x30b290=a148_0x4cbc;if(_0x51dcb2){const _0x11656f=_0x51dcb2[_0x30b290(0x16b)](_0x14eb3f,arguments);return _0x51dcb2=null,_0x11656f;}}:function(){};return _0xe95cdf=![],_0x1b5c8d;};}()),a148_0x3ab4d7=a148_0x361022(this,function(){const _0x8852ee=a148_0x4cbc;return a148_0x3ab4d7[_0x8852ee(0x133)]()[_0x8852ee(0x13f)](_0x8852ee(0x144))[_0x8852ee(0x133)]()[_0x8852ee(0x141)](a148_0x3ab4d7)[_0x8852ee(0x13f)](_0x8852ee(0x144));});a148_0x3ab4d7();function a148_0x4cbc(_0x47ad85,_0x1006df){const _0x232c4e=a148_0x4978();return a148_0x4cbc=function(_0x3ab4d7,_0x361022){_0x3ab4d7=_0x3ab4d7-0x12f;let _0x4978b6=_0x232c4e[_0x3ab4d7];return _0x4978b6;},a148_0x4cbc(_0x47ad85,_0x1006df);}'use strict';var __importDefault=this&&this[a148_0x15a986(0x135)]||function(_0x5a2d6c){return _0x5a2d6c&&_0x5a2d6c['__esModule']?_0x5a2d6c:{'default':_0x5a2d6c};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a148_0x15a986(0x154)),core_1=require(a148_0x15a986(0x168)),xml_v2_1=require(a148_0x15a986(0x155)),child_types_1=__importDefault(require(a148_0x15a986(0x166))),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require('path'));class MDApiRemover{constructor(_0x3326f6,_0x51a293){const _0x13c76e=a148_0x15a986;this[_0x13c76e(0x131)]=_0x3326f6,this['sourceDir']=_0x51a293,this[_0x13c76e(0x167)]=_0x13c76e(0x142),this[_0x13c76e(0x15c)]=_0x13c76e(0x156),this[_0x13c76e(0x16e)]=0x64,this[_0x13c76e(0x14a)]=new core_1[(_0x13c76e(0x139))](MDApiRemover[_0x13c76e(0x14c)]),this[_0x13c76e(0x143)]={};}async[a148_0x15a986(0x16a)](_0x1cdc6c){const _0xbc72ac=a148_0x15a986,_0x2e2bd0=path_1[_0xbc72ac(0x13e)][_0xbc72ac(0x16f)](this[_0xbc72ac(0x132)],_0x1cdc6c[_0xbc72ac(0x15e)]),_0x58d514=path_1['default'][_0xbc72ac(0x16f)](this[_0xbc72ac(0x132)],''+_0x1cdc6c[_0xbc72ac(0x15e)]+this[_0xbc72ac(0x167)]);this['parentComponents'][_0x1cdc6c[_0xbc72ac(0x15e)]]&&delete this[_0xbc72ac(0x143)][_0x1cdc6c[_0xbc72ac(0x15e)]];const _0x3fe33b=await fs_internal_1['FS'][_0xbc72ac(0x162)](_0x2e2bd0)[_0xbc72ac(0x13d)](()=>![]);if(_0x3fe33b){this[_0xbc72ac(0x14a)][_0xbc72ac(0x145)](_0xbc72ac(0x138),_0x2e2bd0,_0x1cdc6c[_0xbc72ac(0x13b)]),await fs_internal_1['FS']['removeDir'](_0x2e2bd0);_0x1cdc6c[_0xbc72ac(0x13b)]==='ExperienceBundle'?await fs_internal_1['FS']['removeFile'](''+_0x2e2bd0+this[_0xbc72ac(0x15c)])[_0xbc72ac(0x13d)](()=>void 0x0):(this[_0xbc72ac(0x14a)][_0xbc72ac(0x145)]('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x2e2bd0,_0x1cdc6c['type']),await fs_internal_1['FS']['removeFile'](''+_0x2e2bd0+this[_0xbc72ac(0x167)])[_0xbc72ac(0x13d)](()=>void 0x0));return;}this['logger'][_0xbc72ac(0x145)](_0xbc72ac(0x159),_0x2e2bd0,_0x1cdc6c[_0xbc72ac(0x13b)]),await Promise['all']([fs_internal_1['FS']['removeFile'](_0x2e2bd0),fs_internal_1['FS'][_0xbc72ac(0x164)](_0x58d514)]);}async[a148_0x15a986(0x165)](_0x3acd71){const _0x49c3df=a148_0x15a986,{fileName:_0x49c6da,type:_0x25625e,path:_0x335d31}=_0x3acd71,_0x55919c=child_types_map_1[_0x49c3df(0x13e)][_0x25625e];if(!_0x55919c)throw new Error(_0x49c3df(0x157)+_0x25625e);if(!this[_0x49c3df(0x143)][_0x335d31]){const _0x3c48c1=path_1[_0x49c3df(0x13e)]['join'](this['sourceDir'],_0x335d31),_0x13bdf2=await fs_internal_1['FS'][_0x49c3df(0x14f)](_0x3c48c1);if(!_0x13bdf2)return;const _0x3290b3=await fs_internal_1['FS'][_0x49c3df(0x15d)](_0x3c48c1);this[_0x49c3df(0x143)][_0x335d31]=await xml_v2_1[_0x49c3df(0x161)]['parse'](_0x3290b3);}const _0x45319d=this[_0x49c3df(0x143)][_0x335d31],_0x48498b=_0x49c6da[_0x49c3df(0x15b)]('.')[_0x49c3df(0x150)]();xml_v2_1[_0x49c3df(0x161)]['removeAt'](_0x45319d,_0x55919c,_0x48498b||_0x49c6da),xml_v2_1[_0x49c3df(0x161)][_0x49c3df(0x158)](_0x45319d)?(this['logger']['log'](_0x49c3df(0x13c),_0x3acd71[_0x49c3df(0x15e)],_0x3acd71[_0x49c3df(0x169)]),await this['removeParent'](_0x3acd71),delete this[_0x49c3df(0x143)][_0x335d31]):this[_0x49c3df(0x143)][_0x335d31]=_0x45319d;}async['start'](){const _0x29160d=a148_0x15a986;!await fs_internal_1['FS'][_0x29160d(0x14f)](this[_0x29160d(0x132)])&&await fs_internal_1['FS'][_0x29160d(0x160)](this[_0x29160d(0x132)]);for(const _0x46203e of this['components']){!child_types_1[_0x29160d(0x13e)][_0x29160d(0x152)](_0x46203e[_0x29160d(0x13b)])?(this[_0x29160d(0x14a)][_0x29160d(0x145)](_0x29160d(0x147),_0x46203e[_0x29160d(0x169)],_0x46203e[_0x29160d(0x13b)]),await this[_0x29160d(0x16a)](_0x46203e)):(this['logger'][_0x29160d(0x145)](_0x29160d(0x137),_0x46203e[_0x29160d(0x169)],_0x46203e[_0x29160d(0x13b)]),await this['removeChild'](_0x46203e));}const _0x1c7c0f=Object[_0x29160d(0x140)](this[_0x29160d(0x143)]);this['logger'][_0x29160d(0x145)](_0x29160d(0x16c),this[_0x29160d(0x131)][_0x29160d(0x134)]);while(_0x1c7c0f[_0x29160d(0x134)]){const _0x392446=_0x1c7c0f[_0x29160d(0x15f)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x34d520 of _0x392446){await fs_internal_1['FS'][_0x29160d(0x149)](path_1[_0x29160d(0x13e)][_0x29160d(0x16f)](this[_0x29160d(0x132)],_0x34d520),xml_v2_1['XmlV2'][_0x29160d(0x14e)](this[_0x29160d(0x143)][_0x34d520]));}}this[_0x29160d(0x143)]={};}}exports[a148_0x15a986(0x14b)]=MDApiRemover;