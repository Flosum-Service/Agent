const a151_0x5d6210=a151_0xbb3c;function a151_0xbb3c(_0x1c0f0f,_0x326090){const _0x199f94=a151_0x4718();return a151_0xbb3c=function(_0x45b594,_0x5825b6){_0x45b594=_0x45b594-0x1f0;let _0x4718e6=_0x199f94[_0x45b594];return _0x4718e6;},a151_0xbb3c(_0x1c0f0f,_0x326090);}(function(_0x2e0bed,_0x5af0d5){const _0x220935=a151_0xbb3c,_0x411519=_0x2e0bed();while(!![]){try{const _0x593080=-parseInt(_0x220935(0x218))/0x1+-parseInt(_0x220935(0x20f))/0x2*(parseInt(_0x220935(0x222))/0x3)+parseInt(_0x220935(0x1fd))/0x4*(-parseInt(_0x220935(0x20e))/0x5)+-parseInt(_0x220935(0x216))/0x6*(-parseInt(_0x220935(0x229))/0x7)+-parseInt(_0x220935(0x226))/0x8*(-parseInt(_0x220935(0x22e))/0x9)+-parseInt(_0x220935(0x1ff))/0xa*(parseInt(_0x220935(0x22c))/0xb)+-parseInt(_0x220935(0x227))/0xc*(-parseInt(_0x220935(0x213))/0xd);if(_0x593080===_0x5af0d5)break;else _0x411519['push'](_0x411519['shift']());}catch(_0xb0da89){_0x411519['push'](_0x411519['shift']());}}}(a151_0x4718,0x43814));const a151_0x5825b6=(function(){let _0x3d8ad5=!![];return function(_0x28983c,_0x53ba13){const _0x1e4f7a=_0x3d8ad5?function(){const _0x163909=a151_0xbb3c;if(_0x53ba13){const _0x56e1e4=_0x53ba13[_0x163909(0x1fc)](_0x28983c,arguments);return _0x53ba13=null,_0x56e1e4;}}:function(){};return _0x3d8ad5=![],_0x1e4f7a;};}()),a151_0x45b594=a151_0x5825b6(this,function(){const _0x7307a0=a151_0xbb3c;return a151_0x45b594[_0x7307a0(0x1fa)]()[_0x7307a0(0x1fe)](_0x7307a0(0x212))['toString']()[_0x7307a0(0x219)](a151_0x45b594)[_0x7307a0(0x1fe)](_0x7307a0(0x212));});a151_0x45b594();'use strict';var __importDefault=this&&this[a151_0x5d6210(0x20a)]||function(_0x305b96){return _0x305b96&&_0x305b96['__esModule']?_0x305b96:{'default':_0x305b96};};function a151_0x4718(){const _0x49690c=['defineProperty','readFile','(((.+)+)+)+$','2005601cickCr','removeAt','../../internal/fs.internal','427794sYuGXF','../../../../core','271458RrfgRz','constructor','length','fileName','parentComponents','type','includes','remove\x20component\x20\x20%s\x20[%s]','MAX_WRITES_PER_TICK','exists','817494tFWnfr','removeDir','splice','../data/child-types','424TlsRaf','72gOYsCg','META_EXTENSION','7sBpPqL','remove\x20parent\x20component\x20%s\x20[%s]','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','143MxNSCJ','name','47007XrZYOw','remove\x20child\x20component\x20%s\x20[%s]','join','XmlV2','all','remove\x20component\x20directory\x20%s\x20[%s]','parse','MDApiRemover','logger','removeParent','sourceDir','removeChild','convertToString','toString','start','apply','8vlNoSu','search','155860cQkNaR','-meta.xml','ExperienceBundle','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','default','site-meta.xml','Logger','catch','Unknown\x20child\x20type\x20','removeFile','path','__importDefault','components','META_EXPERIENCE_BUNDLE','log','626765MTDypv','2nofLYI'];a151_0x4718=function(){return _0x49690c;};return a151_0x4718();}Object[a151_0x5d6210(0x210)](exports,'__esModule',{'value':!![]}),exports[a151_0x5d6210(0x1f4)]=void 0x0;const fs_internal_1=require(a151_0x5d6210(0x215)),core_1=require(a151_0x5d6210(0x217)),xml_v2_1=require('../utils/xml-v2'),child_types_1=__importDefault(require(a151_0x5d6210(0x225))),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require(a151_0x5d6210(0x209)));class MDApiRemover{constructor(_0x4b1111,_0x4cfab2){const _0x4ebdfb=a151_0x5d6210;this[_0x4ebdfb(0x20b)]=_0x4b1111,this[_0x4ebdfb(0x1f7)]=_0x4cfab2,this[_0x4ebdfb(0x228)]=_0x4ebdfb(0x200),this[_0x4ebdfb(0x20c)]=_0x4ebdfb(0x204),this[_0x4ebdfb(0x220)]=0x64,this['logger']=new core_1[(_0x4ebdfb(0x205))](MDApiRemover[_0x4ebdfb(0x22d)]),this[_0x4ebdfb(0x21c)]={};}async[a151_0x5d6210(0x1f6)](_0x2ba4c6){const _0x24b28e=a151_0x5d6210,_0x2e4d80=path_1[_0x24b28e(0x203)][_0x24b28e(0x230)](this[_0x24b28e(0x1f7)],_0x2ba4c6['path']),_0x331af9=path_1[_0x24b28e(0x203)][_0x24b28e(0x230)](this['sourceDir'],''+_0x2ba4c6[_0x24b28e(0x209)]+this['META_EXTENSION']);this[_0x24b28e(0x21c)][_0x2ba4c6[_0x24b28e(0x209)]]&&delete this[_0x24b28e(0x21c)][_0x2ba4c6[_0x24b28e(0x209)]];const _0x312577=await fs_internal_1['FS']['isDir'](_0x2e4d80)[_0x24b28e(0x206)](()=>![]);if(_0x312577){this[_0x24b28e(0x1f5)][_0x24b28e(0x20d)](_0x24b28e(0x1f2),_0x2e4d80,_0x2ba4c6['type']),await fs_internal_1['FS'][_0x24b28e(0x223)](_0x2e4d80);_0x2ba4c6['type']===_0x24b28e(0x201)?await fs_internal_1['FS'][_0x24b28e(0x208)](''+_0x2e4d80+this[_0x24b28e(0x20c)])[_0x24b28e(0x206)](()=>void 0x0):(this[_0x24b28e(0x1f5)][_0x24b28e(0x20d)](_0x24b28e(0x22b),_0x2e4d80,_0x2ba4c6['type']),await fs_internal_1['FS'][_0x24b28e(0x208)](''+_0x2e4d80+this[_0x24b28e(0x228)])[_0x24b28e(0x206)](()=>void 0x0));return;}this['logger'][_0x24b28e(0x20d)](_0x24b28e(0x21f),_0x2e4d80,_0x2ba4c6[_0x24b28e(0x21d)]),await Promise[_0x24b28e(0x1f1)]([fs_internal_1['FS'][_0x24b28e(0x208)](_0x2e4d80),fs_internal_1['FS']['removeFile'](_0x331af9)]);}async[a151_0x5d6210(0x1f8)](_0x46702){const _0x28424a=a151_0x5d6210,{fileName:_0x4eff80,type:_0x4288ac,path:_0x43994d}=_0x46702,_0x2d7131=child_types_map_1[_0x28424a(0x203)][_0x4288ac];if(!_0x2d7131)throw new Error(_0x28424a(0x207)+_0x4288ac);if(!this[_0x28424a(0x21c)][_0x43994d]){const _0x4dda05=path_1[_0x28424a(0x203)]['join'](this[_0x28424a(0x1f7)],_0x43994d),_0x507609=await fs_internal_1['FS']['exists'](_0x4dda05);if(!_0x507609)return;const _0x34317e=await fs_internal_1['FS'][_0x28424a(0x211)](_0x4dda05);this[_0x28424a(0x21c)][_0x43994d]=await xml_v2_1[_0x28424a(0x1f0)][_0x28424a(0x1f3)](_0x34317e);}const _0x587c51=this[_0x28424a(0x21c)][_0x43994d],_0x21d2fb=_0x4eff80['split']('.')['pop']();xml_v2_1['XmlV2'][_0x28424a(0x214)](_0x587c51,_0x2d7131,_0x21d2fb||_0x4eff80),xml_v2_1[_0x28424a(0x1f0)]['isEmptyXml'](_0x587c51)?(this[_0x28424a(0x1f5)]['log'](_0x28424a(0x202),_0x46702[_0x28424a(0x209)],_0x46702['fileName']),await this[_0x28424a(0x1f6)](_0x46702),delete this[_0x28424a(0x21c)][_0x43994d]):this[_0x28424a(0x21c)][_0x43994d]=_0x587c51;}async[a151_0x5d6210(0x1fb)](){const _0x1b9fda=a151_0x5d6210;!await fs_internal_1['FS'][_0x1b9fda(0x221)](this[_0x1b9fda(0x1f7)])&&await fs_internal_1['FS']['makeDir'](this[_0x1b9fda(0x1f7)]);for(const _0x437593 of this[_0x1b9fda(0x20b)]){!child_types_1[_0x1b9fda(0x203)][_0x1b9fda(0x21e)](_0x437593[_0x1b9fda(0x21d)])?(this['logger'][_0x1b9fda(0x20d)](_0x1b9fda(0x22a),_0x437593['fileName'],_0x437593['type']),await this['removeParent'](_0x437593)):(this[_0x1b9fda(0x1f5)]['log'](_0x1b9fda(0x22f),_0x437593[_0x1b9fda(0x21b)],_0x437593['type']),await this['removeChild'](_0x437593));}const _0x111092=Object['keys'](this['parentComponents']);this[_0x1b9fda(0x1f5)][_0x1b9fda(0x20d)]('have\x20to\x20update\x20%d\x20files',this[_0x1b9fda(0x20b)]['length']);while(_0x111092[_0x1b9fda(0x21a)]){const _0x4355a4=_0x111092[_0x1b9fda(0x224)](0x0,this[_0x1b9fda(0x220)]);for(const _0x387ac2 of _0x4355a4){await fs_internal_1['FS']['writeFile'](path_1[_0x1b9fda(0x203)][_0x1b9fda(0x230)](this['sourceDir'],_0x387ac2),xml_v2_1['XmlV2'][_0x1b9fda(0x1f9)](this[_0x1b9fda(0x21c)][_0x387ac2]));}}this[_0x1b9fda(0x21c)]={};}}exports[a151_0x5d6210(0x1f4)]=MDApiRemover;