const a151_0x2e5c8b=a151_0x2d47;(function(_0x1057aa,_0x2c1a43){const _0xa8a465=a151_0x2d47,_0x579fcb=_0x1057aa();while(!![]){try{const _0x5a961f=-parseInt(_0xa8a465(0x1cf))/0x1+-parseInt(_0xa8a465(0x1c1))/0x2+-parseInt(_0xa8a465(0x1d2))/0x3*(parseInt(_0xa8a465(0x1e3))/0x4)+-parseInt(_0xa8a465(0x1ea))/0x5+parseInt(_0xa8a465(0x1c7))/0x6+-parseInt(_0xa8a465(0x1d6))/0x7+parseInt(_0xa8a465(0x1e8))/0x8;if(_0x5a961f===_0x2c1a43)break;else _0x579fcb['push'](_0x579fcb['shift']());}catch(_0x167277){_0x579fcb['push'](_0x579fcb['shift']());}}}(a151_0x4402,0xd7159));const a151_0xbe7a5d=(function(){let _0x27567a=!![];return function(_0x2d09bc,_0x26e04c){const _0x25d4fe=_0x27567a?function(){const _0xa21183=a151_0x2d47;if(_0x26e04c){const _0x23d62b=_0x26e04c[_0xa21183(0x1d5)](_0x2d09bc,arguments);return _0x26e04c=null,_0x23d62b;}}:function(){};return _0x27567a=![],_0x25d4fe;};}()),a151_0x5e49d8=a151_0xbe7a5d(this,function(){const _0x4ef4af=a151_0x2d47;return a151_0x5e49d8[_0x4ef4af(0x1d7)]()[_0x4ef4af(0x1db)](_0x4ef4af(0x1b2))['toString']()[_0x4ef4af(0x1b5)](a151_0x5e49d8)[_0x4ef4af(0x1db)](_0x4ef4af(0x1b2));});a151_0x5e49d8();function a151_0x4402(){const _0x452a28=['constructor','catch','join','type','split','XmlV2','../../internal/fs.internal','removeParent','remove\x20component\x20directory\x20%s\x20[%s]','META_EXTENSION','all','parentComponents','165426wTQRpb','pop','Logger','remove\x20parent\x20component\x20%s\x20[%s]','Unknown\x20child\x20type\x20','makeDir','5647620NXYFpy','components','logger','fileName','length','path','writeFile','removeChild','886388wwaEcm','-meta.xml','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','3kkNPeW','../utils/xml-v2','defineProperty','apply','9369311afxmDk','toString','includes','isDir','sourceDir','search','readFile','start','MAX_WRITES_PER_TICK','exists','default','name','removeFile','749956WLzhkp','ExperienceBundle','keys','MDApiRemover','log','33144496NIiJKg','META_EXPERIENCE_BUNDLE','8541420JDTgjV','splice','(((.+)+)+)+$','../data/child-types-map','__esModule'];a151_0x4402=function(){return _0x452a28;};return a151_0x4402();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0xc6a58b){const _0x574ed3=a151_0x2d47;return _0xc6a58b&&_0xc6a58b[_0x574ed3(0x1b4)]?_0xc6a58b:{'default':_0xc6a58b};};Object[a151_0x2e5c8b(0x1d4)](exports,a151_0x2e5c8b(0x1b4),{'value':!![]}),exports[a151_0x2e5c8b(0x1e6)]=void 0x0;const fs_internal_1=require(a151_0x2e5c8b(0x1bb)),core_1=require('../../../../core'),xml_v2_1=require(a151_0x2e5c8b(0x1d3)),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require(a151_0x2e5c8b(0x1b3))),path_1=__importDefault(require('path'));class MDApiRemover{constructor(_0x3c087f,_0x3a6e3c){const _0x2457d4=a151_0x2e5c8b;this[_0x2457d4(0x1c8)]=_0x3c087f,this['sourceDir']=_0x3a6e3c,this['META_EXTENSION']=_0x2457d4(0x1d0),this[_0x2457d4(0x1e9)]='site-meta.xml',this[_0x2457d4(0x1de)]=0x64,this['logger']=new core_1[(_0x2457d4(0x1c3))](MDApiRemover[_0x2457d4(0x1e1)]),this['parentComponents']={};}async[a151_0x2e5c8b(0x1bc)](_0x2ca595){const _0x508945=a151_0x2e5c8b,_0x1bfc97=path_1[_0x508945(0x1e0)][_0x508945(0x1b7)](this['sourceDir'],_0x2ca595[_0x508945(0x1cc)]),_0x48fb39=path_1[_0x508945(0x1e0)]['join'](this[_0x508945(0x1da)],''+_0x2ca595[_0x508945(0x1cc)]+this[_0x508945(0x1be)]);this[_0x508945(0x1c0)][_0x2ca595['path']]&&delete this[_0x508945(0x1c0)][_0x2ca595[_0x508945(0x1cc)]];const _0x347676=await fs_internal_1['FS'][_0x508945(0x1d9)](_0x1bfc97)['catch'](()=>![]);if(_0x347676){this[_0x508945(0x1c9)][_0x508945(0x1e7)](_0x508945(0x1bd),_0x1bfc97,_0x2ca595['type']),await fs_internal_1['FS']['removeDir'](_0x1bfc97);_0x2ca595['type']===_0x508945(0x1e4)?await fs_internal_1['FS']['removeFile'](''+_0x1bfc97+this[_0x508945(0x1e9)])[_0x508945(0x1b6)](()=>void 0x0):(this[_0x508945(0x1c9)]['log']('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x1bfc97,_0x2ca595[_0x508945(0x1b8)]),await fs_internal_1['FS']['removeFile'](''+_0x1bfc97+this[_0x508945(0x1be)])[_0x508945(0x1b6)](()=>void 0x0));return;}this[_0x508945(0x1c9)][_0x508945(0x1e7)]('remove\x20component\x20\x20%s\x20[%s]',_0x1bfc97,_0x2ca595['type']),await Promise[_0x508945(0x1bf)]([fs_internal_1['FS'][_0x508945(0x1e2)](_0x1bfc97),fs_internal_1['FS'][_0x508945(0x1e2)](_0x48fb39)]);}async[a151_0x2e5c8b(0x1ce)](_0x138aee){const _0x161a23=a151_0x2e5c8b,{fileName:_0x291b0a,type:_0x41f6fb,path:_0x5b3eea}=_0x138aee,_0x2fbb5d=child_types_map_1[_0x161a23(0x1e0)][_0x41f6fb];if(!_0x2fbb5d)throw new Error(_0x161a23(0x1c5)+_0x41f6fb);if(!this[_0x161a23(0x1c0)][_0x5b3eea]){const _0x2aa99d=path_1[_0x161a23(0x1e0)][_0x161a23(0x1b7)](this[_0x161a23(0x1da)],_0x5b3eea),_0x38b0ac=await fs_internal_1['FS'][_0x161a23(0x1df)](_0x2aa99d);if(!_0x38b0ac)return;const _0x53430c=await fs_internal_1['FS'][_0x161a23(0x1dc)](_0x2aa99d);this[_0x161a23(0x1c0)][_0x5b3eea]=await xml_v2_1[_0x161a23(0x1ba)]['parse'](_0x53430c);}const _0x2077b0=this[_0x161a23(0x1c0)][_0x5b3eea],_0x2cb49b=_0x291b0a[_0x161a23(0x1b9)]('.')[_0x161a23(0x1c2)]();xml_v2_1[_0x161a23(0x1ba)]['removeAt'](_0x2077b0,_0x2fbb5d,_0x2cb49b||_0x291b0a),xml_v2_1[_0x161a23(0x1ba)]['isEmptyXml'](_0x2077b0)?(this['logger'][_0x161a23(0x1e7)](_0x161a23(0x1d1),_0x138aee[_0x161a23(0x1cc)],_0x138aee[_0x161a23(0x1ca)]),await this['removeParent'](_0x138aee),delete this[_0x161a23(0x1c0)][_0x5b3eea]):this['parentComponents'][_0x5b3eea]=_0x2077b0;}async[a151_0x2e5c8b(0x1dd)](){const _0x2e2e60=a151_0x2e5c8b;!await fs_internal_1['FS'][_0x2e2e60(0x1df)](this[_0x2e2e60(0x1da)])&&await fs_internal_1['FS'][_0x2e2e60(0x1c6)](this[_0x2e2e60(0x1da)]);for(const _0x11c833 of this['components']){!child_types_1[_0x2e2e60(0x1e0)][_0x2e2e60(0x1d8)](_0x11c833['type'])?(this['logger'][_0x2e2e60(0x1e7)](_0x2e2e60(0x1c4),_0x11c833[_0x2e2e60(0x1ca)],_0x11c833[_0x2e2e60(0x1b8)]),await this['removeParent'](_0x11c833)):(this[_0x2e2e60(0x1c9)]['log']('remove\x20child\x20component\x20%s\x20[%s]',_0x11c833[_0x2e2e60(0x1ca)],_0x11c833[_0x2e2e60(0x1b8)]),await this[_0x2e2e60(0x1ce)](_0x11c833));}const _0x4ba5c7=Object[_0x2e2e60(0x1e5)](this[_0x2e2e60(0x1c0)]);this['logger'][_0x2e2e60(0x1e7)]('have\x20to\x20update\x20%d\x20files',this[_0x2e2e60(0x1c8)][_0x2e2e60(0x1cb)]);while(_0x4ba5c7['length']){const _0x2f15c4=_0x4ba5c7[_0x2e2e60(0x1b1)](0x0,this[_0x2e2e60(0x1de)]);for(const _0x33a9cc of _0x2f15c4){await fs_internal_1['FS'][_0x2e2e60(0x1cd)](path_1[_0x2e2e60(0x1e0)][_0x2e2e60(0x1b7)](this[_0x2e2e60(0x1da)],_0x33a9cc),xml_v2_1[_0x2e2e60(0x1ba)]['convertToString'](this[_0x2e2e60(0x1c0)][_0x33a9cc]));}}this[_0x2e2e60(0x1c0)]={};}}function a151_0x2d47(_0x354510,_0x599d9){const _0x42969c=a151_0x4402();return a151_0x2d47=function(_0x5e49d8,_0xbe7a5d){_0x5e49d8=_0x5e49d8-0x1b1;let _0x44024e=_0x42969c[_0x5e49d8];return _0x44024e;},a151_0x2d47(_0x354510,_0x599d9);}exports[a151_0x2e5c8b(0x1e6)]=MDApiRemover;