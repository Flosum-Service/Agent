const a151_0x180c67=a151_0x12ca;(function(_0x2c3a01,_0x4e409c){const _0x1e377e=a151_0x12ca,_0x2bd064=_0x2c3a01();while(!![]){try{const _0x42aa75=-parseInt(_0x1e377e(0xde))/0x1+parseInt(_0x1e377e(0xbb))/0x2*(parseInt(_0x1e377e(0xc0))/0x3)+-parseInt(_0x1e377e(0xcc))/0x4+-parseInt(_0x1e377e(0xc5))/0x5+-parseInt(_0x1e377e(0xda))/0x6+parseInt(_0x1e377e(0xb1))/0x7+parseInt(_0x1e377e(0xb4))/0x8*(parseInt(_0x1e377e(0xaf))/0x9);if(_0x42aa75===_0x4e409c)break;else _0x2bd064['push'](_0x2bd064['shift']());}catch(_0x41dadd){_0x2bd064['push'](_0x2bd064['shift']());}}}(a151_0x35a6,0x911b5));const a151_0x27c49a=(function(){let _0x3580b6=!![];return function(_0x27adcb,_0x346ba7){const _0x3898aa=_0x3580b6?function(){const _0x44560f=a151_0x12ca;if(_0x346ba7){const _0x4847c8=_0x346ba7[_0x44560f(0xb7)](_0x27adcb,arguments);return _0x346ba7=null,_0x4847c8;}}:function(){};return _0x3580b6=![],_0x3898aa;};}()),a151_0x4acc07=a151_0x27c49a(this,function(){const _0x1a6d66=a151_0x12ca;return a151_0x4acc07[_0x1a6d66(0xc4)]()['search'](_0x1a6d66(0xb6))['toString']()['constructor'](a151_0x4acc07)[_0x1a6d66(0xe1)](_0x1a6d66(0xb6));});a151_0x4acc07();'use strict';var __importDefault=this&&this[a151_0x180c67(0xd7)]||function(_0x4d6600){const _0x63bddf=a151_0x180c67;return _0x4d6600&&_0x4d6600[_0x63bddf(0xb2)]?_0x4d6600:{'default':_0x4d6600};};Object[a151_0x180c67(0xdf)](exports,a151_0x180c67(0xb2),{'value':!![]}),exports[a151_0x180c67(0xe8)]=void 0x0;function a151_0x35a6(){const _0x2afc90=['Logger','log','XmlV2','25861878ASeupG','META_EXPERIENCE_BUNDLE','6281667VfChFJ','__esModule','ExperienceBundle','8epRsJl','isEmptyXml','(((.+)+)+)+$','apply','MAX_WRITES_PER_TICK','parse','components','8486XPZzXJ','logger','../data/child-types-map','join','writeFile','30XZEnxd','remove\x20parent\x20component\x20%s\x20[%s]','type','default','toString','2443495pIZWur','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','includes','META_EXTENSION','../../internal/fs.internal','removeParent','removeChild','3534732snQZSw','name','makeDir','-meta.xml','catch','splice','path','removeFile','keys','convertToString','isDir','__importDefault','have\x20to\x20update\x20%d\x20files','../utils/xml-v2','6497286BiDPit','parentComponents','remove\x20component\x20\x20%s\x20[%s]','pop','763733UToVnT','defineProperty','exists','search','length','all','../data/child-types','fileName','site-meta.xml','sourceDir','MDApiRemover','remove\x20component\x20directory\x20%s\x20[%s]'];a151_0x35a6=function(){return _0x2afc90;};return a151_0x35a6();}function a151_0x12ca(_0x5f1c18,_0x76ad51){const _0xe2f8b4=a151_0x35a6();return a151_0x12ca=function(_0x4acc07,_0x27c49a){_0x4acc07=_0x4acc07-0xac;let _0x35a6ee=_0xe2f8b4[_0x4acc07];return _0x35a6ee;},a151_0x12ca(_0x5f1c18,_0x76ad51);}const fs_internal_1=require(a151_0x180c67(0xc9)),core_1=require('../../../../core'),xml_v2_1=require(a151_0x180c67(0xd9)),child_types_1=__importDefault(require(a151_0x180c67(0xe4))),child_types_map_1=__importDefault(require(a151_0x180c67(0xbd))),path_1=__importDefault(require(a151_0x180c67(0xd2)));class MDApiRemover{constructor(_0x54ba85,_0x2a3af6){const _0x380327=a151_0x180c67;this[_0x380327(0xba)]=_0x54ba85,this['sourceDir']=_0x2a3af6,this['META_EXTENSION']=_0x380327(0xcf),this[_0x380327(0xb0)]=_0x380327(0xe6),this['MAX_WRITES_PER_TICK']=0x64,this[_0x380327(0xbc)]=new core_1[(_0x380327(0xac))](MDApiRemover[_0x380327(0xcd)]),this[_0x380327(0xdb)]={};}async[a151_0x180c67(0xca)](_0x3ecf1e){const _0x402a75=a151_0x180c67,_0xf5dfad=path_1[_0x402a75(0xc3)][_0x402a75(0xbe)](this[_0x402a75(0xe7)],_0x3ecf1e['path']),_0x4b33bf=path_1[_0x402a75(0xc3)]['join'](this[_0x402a75(0xe7)],''+_0x3ecf1e[_0x402a75(0xd2)]+this['META_EXTENSION']);this['parentComponents'][_0x3ecf1e[_0x402a75(0xd2)]]&&delete this[_0x402a75(0xdb)][_0x3ecf1e[_0x402a75(0xd2)]];const _0x6c07fe=await fs_internal_1['FS'][_0x402a75(0xd6)](_0xf5dfad)[_0x402a75(0xd0)](()=>![]);if(_0x6c07fe){this[_0x402a75(0xbc)][_0x402a75(0xad)](_0x402a75(0xe9),_0xf5dfad,_0x3ecf1e[_0x402a75(0xc2)]),await fs_internal_1['FS']['removeDir'](_0xf5dfad);_0x3ecf1e['type']===_0x402a75(0xb3)?await fs_internal_1['FS'][_0x402a75(0xd3)](''+_0xf5dfad+this['META_EXPERIENCE_BUNDLE'])[_0x402a75(0xd0)](()=>void 0x0):(this[_0x402a75(0xbc)]['log']('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0xf5dfad,_0x3ecf1e[_0x402a75(0xc2)]),await fs_internal_1['FS']['removeFile'](''+_0xf5dfad+this[_0x402a75(0xc8)])[_0x402a75(0xd0)](()=>void 0x0));return;}this['logger'][_0x402a75(0xad)](_0x402a75(0xdc),_0xf5dfad,_0x3ecf1e['type']),await Promise[_0x402a75(0xe3)]([fs_internal_1['FS'][_0x402a75(0xd3)](_0xf5dfad),fs_internal_1['FS']['removeFile'](_0x4b33bf)]);}async[a151_0x180c67(0xcb)](_0x4fbe8b){const _0x48e19a=a151_0x180c67,{fileName:_0x4f7edf,type:_0xe0e8f2,path:_0x39d015}=_0x4fbe8b,_0x15b9fe=child_types_map_1[_0x48e19a(0xc3)][_0xe0e8f2];if(!_0x15b9fe)throw new Error('Unknown\x20child\x20type\x20'+_0xe0e8f2);if(!this[_0x48e19a(0xdb)][_0x39d015]){const _0xe2433a=path_1[_0x48e19a(0xc3)][_0x48e19a(0xbe)](this[_0x48e19a(0xe7)],_0x39d015),_0x4775c2=await fs_internal_1['FS'][_0x48e19a(0xe0)](_0xe2433a);if(!_0x4775c2)return;const _0x490757=await fs_internal_1['FS']['readFile'](_0xe2433a);this['parentComponents'][_0x39d015]=await xml_v2_1[_0x48e19a(0xae)][_0x48e19a(0xb9)](_0x490757);}const _0x4e4328=this['parentComponents'][_0x39d015],_0x326d9b=_0x4f7edf['split']('.')[_0x48e19a(0xdd)]();xml_v2_1[_0x48e19a(0xae)]['removeAt'](_0x4e4328,_0x15b9fe,_0x326d9b||_0x4f7edf),xml_v2_1[_0x48e19a(0xae)][_0x48e19a(0xb5)](_0x4e4328)?(this[_0x48e19a(0xbc)][_0x48e19a(0xad)](_0x48e19a(0xc6),_0x4fbe8b[_0x48e19a(0xd2)],_0x4fbe8b[_0x48e19a(0xe5)]),await this[_0x48e19a(0xca)](_0x4fbe8b),delete this[_0x48e19a(0xdb)][_0x39d015]):this[_0x48e19a(0xdb)][_0x39d015]=_0x4e4328;}async['start'](){const _0x9942a=a151_0x180c67;!await fs_internal_1['FS'][_0x9942a(0xe0)](this[_0x9942a(0xe7)])&&await fs_internal_1['FS'][_0x9942a(0xce)](this[_0x9942a(0xe7)]);for(const _0x10c6a5 of this[_0x9942a(0xba)]){!child_types_1[_0x9942a(0xc3)][_0x9942a(0xc7)](_0x10c6a5[_0x9942a(0xc2)])?(this[_0x9942a(0xbc)][_0x9942a(0xad)](_0x9942a(0xc1),_0x10c6a5['fileName'],_0x10c6a5[_0x9942a(0xc2)]),await this[_0x9942a(0xca)](_0x10c6a5)):(this[_0x9942a(0xbc)][_0x9942a(0xad)]('remove\x20child\x20component\x20%s\x20[%s]',_0x10c6a5[_0x9942a(0xe5)],_0x10c6a5[_0x9942a(0xc2)]),await this['removeChild'](_0x10c6a5));}const _0x1928c9=Object[_0x9942a(0xd4)](this[_0x9942a(0xdb)]);this[_0x9942a(0xbc)][_0x9942a(0xad)](_0x9942a(0xd8),this['components']['length']);while(_0x1928c9[_0x9942a(0xe2)]){const _0x4fc973=_0x1928c9[_0x9942a(0xd1)](0x0,this[_0x9942a(0xb8)]);for(const _0x111fe1 of _0x4fc973){await fs_internal_1['FS'][_0x9942a(0xbf)](path_1['default'][_0x9942a(0xbe)](this[_0x9942a(0xe7)],_0x111fe1),xml_v2_1[_0x9942a(0xae)][_0x9942a(0xd5)](this[_0x9942a(0xdb)][_0x111fe1]));}}this[_0x9942a(0xdb)]={};}}exports['MDApiRemover']=MDApiRemover;