const a103_0x2a22d7=a103_0xc2e3;(function(_0x121702,_0x49d3fb){const _0x456a35=a103_0xc2e3,_0x506425=_0x121702();while(!![]){try{const _0x3d4e83=-parseInt(_0x456a35(0x1c9))/0x1*(parseInt(_0x456a35(0x1ed))/0x2)+parseInt(_0x456a35(0x1c7))/0x3*(-parseInt(_0x456a35(0x1d7))/0x4)+-parseInt(_0x456a35(0x1c3))/0x5+parseInt(_0x456a35(0x1b6))/0x6+parseInt(_0x456a35(0x1e6))/0x7*(-parseInt(_0x456a35(0x1d5))/0x8)+parseInt(_0x456a35(0x1dd))/0x9+-parseInt(_0x456a35(0x1c2))/0xa*(-parseInt(_0x456a35(0x1b1))/0xb);if(_0x3d4e83===_0x49d3fb)break;else _0x506425['push'](_0x506425['shift']());}catch(_0x4d3ab9){_0x506425['push'](_0x506425['shift']());}}}(a103_0x4e2c,0x5e708));function a103_0x4e2c(){const _0xaf4b1f=['remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','META_EXPERIENCE_BUNDLE','toString','7KuIdWQ','join','path','remove\x20child\x20component\x20%s\x20[%s]','parentComponents','includes','have\x20to\x20update\x20%d\x20files','397468jfBtnP','fileName','../utils/xml','11pgeOkF','removeParent','search','../data/child-types-map','exists','498660CfBxBO','type','default','(((.+)+)+)+$','__importDefault','ExperienceBundle','parse','makeDir','removeFile','splice','remove\x20component\x20directory\x20%s\x20[%s]','components','5239320cpWnPO','106975ZSbQUK','Unknown\x20child\x20type\x20','split','Xml','1335306sTuygW','-meta.xml','1WFSUou','keys','site-meta.xml','__esModule','constructor','removeAt','isEmptyXml','removeChild','sourceDir','logger','writeFile','pop','837280wLlgOj','isDir','4xnQToc','remove\x20component\x20\x20%s\x20[%s]','log','catch','MDApiRemover','MAX_WRITES_PER_TICK','4947057vNhePC','../../../../core','META_EXTENSION','remove\x20parent\x20component\x20%s\x20[%s]','defineProperty','length'];a103_0x4e2c=function(){return _0xaf4b1f;};return a103_0x4e2c();}function a103_0xc2e3(_0x4baff5,_0x59d0bc){const _0x9cdc90=a103_0x4e2c();return a103_0xc2e3=function(_0x1e07b6,_0x42b6b7){_0x1e07b6=_0x1e07b6-0x1af;let _0x4e2c46=_0x9cdc90[_0x1e07b6];return _0x4e2c46;},a103_0xc2e3(_0x4baff5,_0x59d0bc);}const a103_0x42b6b7=(function(){let _0x48f99d=!![];return function(_0x288c5d,_0xe99b06){const _0x75ade5=_0x48f99d?function(){if(_0xe99b06){const _0x21a1e1=_0xe99b06['apply'](_0x288c5d,arguments);return _0xe99b06=null,_0x21a1e1;}}:function(){};return _0x48f99d=![],_0x75ade5;};}()),a103_0x1e07b6=a103_0x42b6b7(this,function(){const _0x39fc63=a103_0xc2e3;return a103_0x1e07b6[_0x39fc63(0x1e5)]()[_0x39fc63(0x1b3)](_0x39fc63(0x1b9))[_0x39fc63(0x1e5)]()[_0x39fc63(0x1cd)](a103_0x1e07b6)[_0x39fc63(0x1b3)](_0x39fc63(0x1b9));});a103_0x1e07b6();'use strict';var __importDefault=this&&this[a103_0x2a22d7(0x1ba)]||function(_0x1ac303){return _0x1ac303&&_0x1ac303['__esModule']?_0x1ac303:{'default':_0x1ac303};};Object[a103_0x2a22d7(0x1e1)](exports,a103_0x2a22d7(0x1cc),{'value':!![]}),exports[a103_0x2a22d7(0x1db)]=void 0x0;const fs_internal_1=require('../../internal/fs.internal'),core_1=require(a103_0x2a22d7(0x1de)),xml_1=require(a103_0x2a22d7(0x1b0)),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require(a103_0x2a22d7(0x1b4))),path_1=__importDefault(require(a103_0x2a22d7(0x1e8)));class MDApiRemover{constructor(_0x17fc4e,_0x128a2f){const _0x10dc69=a103_0x2a22d7;this[_0x10dc69(0x1c1)]=_0x17fc4e,this[_0x10dc69(0x1d1)]=_0x128a2f,this[_0x10dc69(0x1df)]=_0x10dc69(0x1c8),this[_0x10dc69(0x1e4)]=_0x10dc69(0x1cb),this['MAX_WRITES_PER_TICK']=0x64,this[_0x10dc69(0x1d2)]=new core_1['Logger'](MDApiRemover['name']),this[_0x10dc69(0x1ea)]={};}async[a103_0x2a22d7(0x1b2)](_0x591ef6){const _0x41d675=a103_0x2a22d7,_0x5d54ff=path_1[_0x41d675(0x1b8)][_0x41d675(0x1e7)](this['sourceDir'],_0x591ef6[_0x41d675(0x1e8)]),_0x235ee1=path_1[_0x41d675(0x1b8)]['join'](this[_0x41d675(0x1d1)],''+_0x591ef6[_0x41d675(0x1e8)]+this[_0x41d675(0x1df)]);this['parentComponents'][_0x591ef6[_0x41d675(0x1e8)]]&&delete this[_0x41d675(0x1ea)][_0x591ef6['path']];const _0x53765c=await fs_internal_1['FS'][_0x41d675(0x1d6)](_0x5d54ff)[_0x41d675(0x1da)](()=>![]);if(_0x53765c){this[_0x41d675(0x1d2)]['log'](_0x41d675(0x1c0),_0x5d54ff,_0x591ef6[_0x41d675(0x1b7)]),await fs_internal_1['FS']['removeDir'](_0x5d54ff);_0x591ef6[_0x41d675(0x1b7)]===_0x41d675(0x1bb)?await fs_internal_1['FS'][_0x41d675(0x1be)](''+_0x5d54ff+this[_0x41d675(0x1e4)])[_0x41d675(0x1da)](()=>void 0x0):(this[_0x41d675(0x1d2)][_0x41d675(0x1d9)](_0x41d675(0x1e3),_0x5d54ff,_0x591ef6['type']),await fs_internal_1['FS'][_0x41d675(0x1be)](''+_0x5d54ff+this[_0x41d675(0x1df)])[_0x41d675(0x1da)](()=>void 0x0));return;}this[_0x41d675(0x1d2)][_0x41d675(0x1d9)](_0x41d675(0x1d8),_0x5d54ff,_0x591ef6['type']),await Promise['all']([fs_internal_1['FS'][_0x41d675(0x1be)](_0x5d54ff),fs_internal_1['FS'][_0x41d675(0x1be)](_0x235ee1)]);}async[a103_0x2a22d7(0x1d0)](_0x5291e0){const _0x1183a5=a103_0x2a22d7,{fileName:_0xc5148f,type:_0x5eb196,path:_0x3f6f46}=_0x5291e0,_0x3972e9=child_types_map_1[_0x1183a5(0x1b8)][_0x5eb196];if(!_0x3972e9)throw new Error(_0x1183a5(0x1c4)+_0x5eb196);if(!this[_0x1183a5(0x1ea)][_0x3f6f46]){const _0x354805=path_1[_0x1183a5(0x1b8)][_0x1183a5(0x1e7)](this[_0x1183a5(0x1d1)],_0x3f6f46),_0x95c23d=await fs_internal_1['FS'][_0x1183a5(0x1b5)](_0x354805);if(!_0x95c23d)return;const _0x511367=await fs_internal_1['FS']['readFile'](_0x354805);this[_0x1183a5(0x1ea)][_0x3f6f46]=await xml_1[_0x1183a5(0x1c6)][_0x1183a5(0x1bc)](_0x511367);}const _0x230d1f=this[_0x1183a5(0x1ea)][_0x3f6f46],_0x59f669=_0xc5148f[_0x1183a5(0x1c5)]('.')[_0x1183a5(0x1d4)]();xml_1[_0x1183a5(0x1c6)][_0x1183a5(0x1ce)](_0x230d1f,_0x3972e9,_0x59f669||_0xc5148f),xml_1[_0x1183a5(0x1c6)][_0x1183a5(0x1cf)](_0x230d1f)?(this['logger']['log']('remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x5291e0[_0x1183a5(0x1e8)],_0x5291e0[_0x1183a5(0x1af)]),await this['removeParent'](_0x5291e0),delete this['parentComponents'][_0x3f6f46]):this[_0x1183a5(0x1ea)][_0x3f6f46]=_0x230d1f;}async['start'](){const _0x81fc97=a103_0x2a22d7;!await fs_internal_1['FS'][_0x81fc97(0x1b5)](this[_0x81fc97(0x1d1)])&&await fs_internal_1['FS'][_0x81fc97(0x1bd)](this['sourceDir']);for(const _0x5a3194 of this[_0x81fc97(0x1c1)]){!child_types_1[_0x81fc97(0x1b8)][_0x81fc97(0x1eb)](_0x5a3194[_0x81fc97(0x1b7)])?(this[_0x81fc97(0x1d2)][_0x81fc97(0x1d9)](_0x81fc97(0x1e0),_0x5a3194[_0x81fc97(0x1af)],_0x5a3194[_0x81fc97(0x1b7)]),await this[_0x81fc97(0x1b2)](_0x5a3194)):(this['logger'][_0x81fc97(0x1d9)](_0x81fc97(0x1e9),_0x5a3194[_0x81fc97(0x1af)],_0x5a3194[_0x81fc97(0x1b7)]),await this[_0x81fc97(0x1d0)](_0x5a3194));}const _0x58f924=Object[_0x81fc97(0x1ca)](this[_0x81fc97(0x1ea)]);this[_0x81fc97(0x1d2)][_0x81fc97(0x1d9)](_0x81fc97(0x1ec),this[_0x81fc97(0x1c1)][_0x81fc97(0x1e2)]);while(_0x58f924[_0x81fc97(0x1e2)]){const _0x180461=_0x58f924[_0x81fc97(0x1bf)](0x0,this[_0x81fc97(0x1dc)]);for(const _0x5b9c69 of _0x180461){await fs_internal_1['FS'][_0x81fc97(0x1d3)](path_1[_0x81fc97(0x1b8)]['join'](this[_0x81fc97(0x1d1)],_0x5b9c69),xml_1[_0x81fc97(0x1c6)]['convertToString'](this[_0x81fc97(0x1ea)][_0x5b9c69]));}}this[_0x81fc97(0x1ea)]={};}}exports[a103_0x2a22d7(0x1db)]=MDApiRemover;