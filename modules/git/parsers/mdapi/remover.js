const a151_0xa1e0be=a151_0x5654;function a151_0x5654(_0x580850,_0x575706){const _0x22fdc3=a151_0x2ef9();return a151_0x5654=function(_0xed25b,_0x4d2e2b){_0xed25b=_0xed25b-0x1c2;let _0x2ef997=_0x22fdc3[_0xed25b];return _0x2ef997;},a151_0x5654(_0x580850,_0x575706);}(function(_0x223d30,_0x3ca6ab){const _0x3aaffe=a151_0x5654,_0x1fb274=_0x223d30();while(!![]){try{const _0x5df213=-parseInt(_0x3aaffe(0x1cc))/0x1*(parseInt(_0x3aaffe(0x1d6))/0x2)+parseInt(_0x3aaffe(0x1c8))/0x3+parseInt(_0x3aaffe(0x1d3))/0x4+-parseInt(_0x3aaffe(0x1d4))/0x5+parseInt(_0x3aaffe(0x1d5))/0x6*(parseInt(_0x3aaffe(0x1f6))/0x7)+parseInt(_0x3aaffe(0x1f8))/0x8*(parseInt(_0x3aaffe(0x1fa))/0x9)+-parseInt(_0x3aaffe(0x1f5))/0xa*(parseInt(_0x3aaffe(0x1e0))/0xb);if(_0x5df213===_0x3ca6ab)break;else _0x1fb274['push'](_0x1fb274['shift']());}catch(_0x3088fc){_0x1fb274['push'](_0x1fb274['shift']());}}}(a151_0x2ef9,0xb11d8));const a151_0x4d2e2b=(function(){let _0x221b5c=!![];return function(_0x4c50be,_0x3fe616){const _0x48417b=_0x221b5c?function(){const _0x124ef6=a151_0x5654;if(_0x3fe616){const _0x3ac9e8=_0x3fe616[_0x124ef6(0x1d7)](_0x4c50be,arguments);return _0x3fe616=null,_0x3ac9e8;}}:function(){};return _0x221b5c=![],_0x48417b;};}()),a151_0xed25b=a151_0x4d2e2b(this,function(){const _0x4346e1=a151_0x5654;return a151_0xed25b[_0x4346e1(0x1e3)]()[_0x4346e1(0x1f2)](_0x4346e1(0x1d8))[_0x4346e1(0x1e3)]()['constructor'](a151_0xed25b)[_0x4346e1(0x1f2)]('(((.+)+)+)+$');});a151_0xed25b();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4eb727){const _0x2b23bf=a151_0x5654;return _0x4eb727&&_0x4eb727[_0x2b23bf(0x1c2)]?_0x4eb727:{'default':_0x4eb727};};Object['defineProperty'](exports,a151_0xa1e0be(0x1c2),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a151_0xa1e0be(0x1da)),core_1=require('../../../../core'),xml_v2_1=require('../utils/xml-v2'),child_types_1=__importDefault(require(a151_0xa1e0be(0x1c5))),child_types_map_1=__importDefault(require(a151_0xa1e0be(0x1e4))),path_1=__importDefault(require('path'));function a151_0x2ef9(){const _0x577619=['fileName','23357oUiioO','path','META_EXPERIENCE_BUNDLE','remove\x20component\x20\x20%s\x20[%s]','remove\x20component\x20directory\x20%s\x20[%s]','components','isEmptyXml','3354452lCFRiB','2541175YLfFAC','2082gxmczL','94RJXTSc','apply','(((.+)+)+)+$','Unknown\x20child\x20type\x20','../../internal/fs.internal','Logger','writeFile','all','removeParent','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','451SVdQfQ','log','splice','toString','../data/child-types-map','sourceDir','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','join','removeDir','convertToString','catch','site-meta.xml','logger','removeChild','type','exists','removeFile','MAX_WRITES_PER_TICK','search','keys','length','289790NYXrRg','16093tRvBxp','default','848qAqUFH','META_EXTENSION','113733OBxXYe','__esModule','parentComponents','pop','../data/child-types','XmlV2','readFile','1631187NyAfdE','MDApiRemover','removeAt'];a151_0x2ef9=function(){return _0x577619;};return a151_0x2ef9();}class MDApiRemover{constructor(_0x276fb1,_0x221a63){const _0x2dcf6f=a151_0xa1e0be;this[_0x2dcf6f(0x1d1)]=_0x276fb1,this[_0x2dcf6f(0x1e5)]=_0x221a63,this[_0x2dcf6f(0x1f9)]='-meta.xml',this[_0x2dcf6f(0x1ce)]=_0x2dcf6f(0x1eb),this[_0x2dcf6f(0x1f1)]=0x64,this[_0x2dcf6f(0x1ec)]=new core_1[(_0x2dcf6f(0x1db))](MDApiRemover['name']),this['parentComponents']={};}async[a151_0xa1e0be(0x1de)](_0x368155){const _0x4bed88=a151_0xa1e0be,_0x4e267f=path_1[_0x4bed88(0x1f7)][_0x4bed88(0x1e7)](this[_0x4bed88(0x1e5)],_0x368155[_0x4bed88(0x1cd)]),_0x16621b=path_1[_0x4bed88(0x1f7)][_0x4bed88(0x1e7)](this[_0x4bed88(0x1e5)],''+_0x368155[_0x4bed88(0x1cd)]+this[_0x4bed88(0x1f9)]);this['parentComponents'][_0x368155['path']]&&delete this[_0x4bed88(0x1c3)][_0x368155[_0x4bed88(0x1cd)]];const _0x47f4b2=await fs_internal_1['FS']['isDir'](_0x4e267f)[_0x4bed88(0x1ea)](()=>![]);if(_0x47f4b2){this[_0x4bed88(0x1ec)][_0x4bed88(0x1e1)](_0x4bed88(0x1d0),_0x4e267f,_0x368155[_0x4bed88(0x1ee)]),await fs_internal_1['FS'][_0x4bed88(0x1e8)](_0x4e267f);_0x368155['type']==='ExperienceBundle'?await fs_internal_1['FS']['removeFile'](''+_0x4e267f+this[_0x4bed88(0x1ce)])[_0x4bed88(0x1ea)](()=>void 0x0):(this[_0x4bed88(0x1ec)][_0x4bed88(0x1e1)](_0x4bed88(0x1e6),_0x4e267f,_0x368155['type']),await fs_internal_1['FS'][_0x4bed88(0x1f0)](''+_0x4e267f+this[_0x4bed88(0x1f9)])[_0x4bed88(0x1ea)](()=>void 0x0));return;}this[_0x4bed88(0x1ec)][_0x4bed88(0x1e1)](_0x4bed88(0x1cf),_0x4e267f,_0x368155['type']),await Promise[_0x4bed88(0x1dd)]([fs_internal_1['FS']['removeFile'](_0x4e267f),fs_internal_1['FS'][_0x4bed88(0x1f0)](_0x16621b)]);}async[a151_0xa1e0be(0x1ed)](_0x58f219){const _0x2c2560=a151_0xa1e0be,{fileName:_0xe34b05,type:_0x3a2616,path:_0xc1804c}=_0x58f219,_0x35c4ac=child_types_map_1[_0x2c2560(0x1f7)][_0x3a2616];if(!_0x35c4ac)throw new Error(_0x2c2560(0x1d9)+_0x3a2616);if(!this[_0x2c2560(0x1c3)][_0xc1804c]){const _0x140b8c=path_1['default'][_0x2c2560(0x1e7)](this[_0x2c2560(0x1e5)],_0xc1804c),_0x1510d2=await fs_internal_1['FS'][_0x2c2560(0x1ef)](_0x140b8c);if(!_0x1510d2)return;const _0x34ba6b=await fs_internal_1['FS'][_0x2c2560(0x1c7)](_0x140b8c);this['parentComponents'][_0xc1804c]=await xml_v2_1[_0x2c2560(0x1c6)]['parse'](_0x34ba6b);}const _0x22980a=this['parentComponents'][_0xc1804c],_0x572d1e=_0xe34b05['split']('.')[_0x2c2560(0x1c4)]();xml_v2_1['XmlV2'][_0x2c2560(0x1ca)](_0x22980a,_0x35c4ac,_0x572d1e||_0xe34b05),xml_v2_1['XmlV2'][_0x2c2560(0x1d2)](_0x22980a)?(this['logger'][_0x2c2560(0x1e1)](_0x2c2560(0x1df),_0x58f219['path'],_0x58f219[_0x2c2560(0x1cb)]),await this['removeParent'](_0x58f219),delete this['parentComponents'][_0xc1804c]):this[_0x2c2560(0x1c3)][_0xc1804c]=_0x22980a;}async['start'](){const _0x43ea21=a151_0xa1e0be;!await fs_internal_1['FS']['exists'](this[_0x43ea21(0x1e5)])&&await fs_internal_1['FS']['makeDir'](this[_0x43ea21(0x1e5)]);for(const _0x3962ef of this[_0x43ea21(0x1d1)]){!child_types_1['default']['includes'](_0x3962ef['type'])?(this[_0x43ea21(0x1ec)][_0x43ea21(0x1e1)]('remove\x20parent\x20component\x20%s\x20[%s]',_0x3962ef['fileName'],_0x3962ef[_0x43ea21(0x1ee)]),await this[_0x43ea21(0x1de)](_0x3962ef)):(this[_0x43ea21(0x1ec)][_0x43ea21(0x1e1)]('remove\x20child\x20component\x20%s\x20[%s]',_0x3962ef['fileName'],_0x3962ef[_0x43ea21(0x1ee)]),await this[_0x43ea21(0x1ed)](_0x3962ef));}const _0x47ff38=Object[_0x43ea21(0x1f3)](this['parentComponents']);this[_0x43ea21(0x1ec)][_0x43ea21(0x1e1)]('have\x20to\x20update\x20%d\x20files',this[_0x43ea21(0x1d1)][_0x43ea21(0x1f4)]);while(_0x47ff38[_0x43ea21(0x1f4)]){const _0x36e5e5=_0x47ff38[_0x43ea21(0x1e2)](0x0,this[_0x43ea21(0x1f1)]);for(const _0x28176d of _0x36e5e5){await fs_internal_1['FS'][_0x43ea21(0x1dc)](path_1[_0x43ea21(0x1f7)][_0x43ea21(0x1e7)](this[_0x43ea21(0x1e5)],_0x28176d),xml_v2_1['XmlV2'][_0x43ea21(0x1e9)](this[_0x43ea21(0x1c3)][_0x28176d]));}}this['parentComponents']={};}}exports[a151_0xa1e0be(0x1c9)]=MDApiRemover;