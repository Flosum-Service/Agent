const a147_0x3a6f98=a147_0x18a7;function a147_0x18a7(_0x142025,_0x684312){const _0x1fdf10=a147_0x26bf();return a147_0x18a7=function(_0x1dae9d,_0x59b701){_0x1dae9d=_0x1dae9d-0x115;let _0x26bff5=_0x1fdf10[_0x1dae9d];return _0x26bff5;},a147_0x18a7(_0x142025,_0x684312);}(function(_0x56c570,_0x2a72ec){const _0x1afd9b=a147_0x18a7,_0x129b5e=_0x56c570();while(!![]){try{const _0x20330a=parseInt(_0x1afd9b(0x124))/0x1+parseInt(_0x1afd9b(0x130))/0x2+-parseInt(_0x1afd9b(0x134))/0x3+parseInt(_0x1afd9b(0x122))/0x4+parseInt(_0x1afd9b(0x12a))/0x5*(parseInt(_0x1afd9b(0x117))/0x6)+parseInt(_0x1afd9b(0x147))/0x7+-parseInt(_0x1afd9b(0x138))/0x8;if(_0x20330a===_0x2a72ec)break;else _0x129b5e['push'](_0x129b5e['shift']());}catch(_0x39fff6){_0x129b5e['push'](_0x129b5e['shift']());}}}(a147_0x26bf,0x29ddd));const a147_0x59b701=(function(){let _0x3cb988=!![];return function(_0xbed77b,_0x35260e){const _0x511089=_0x3cb988?function(){const _0x36eeb5=a147_0x18a7;if(_0x35260e){const _0x4ede67=_0x35260e[_0x36eeb5(0x140)](_0xbed77b,arguments);return _0x35260e=null,_0x4ede67;}}:function(){};return _0x3cb988=![],_0x511089;};}()),a147_0x1dae9d=a147_0x59b701(this,function(){const _0x1d1595=a147_0x18a7;return a147_0x1dae9d[_0x1d1595(0x123)]()['search'](_0x1d1595(0x13a))['toString']()[_0x1d1595(0x135)](a147_0x1dae9d)[_0x1d1595(0x133)](_0x1d1595(0x13a));});a147_0x1dae9d();'use strict';function a147_0x26bf(){const _0x477449=['join','sourceDir','223332rUWtYd','toString','75866OoOLxq','../data/child-types','__importDefault','META_EXTENSION','length','all','1380950vgXNns','log','META_EXPERIENCE_BUNDLE','pop','path','fileName','573354tYDERX','MDApiRemover','parentComponents','search','817413jmLWPM','constructor','includes','type','3820728pcLSRD','removeAt','(((.+)+)+)+$','writeFile','logger','remove\x20parent\x20component\x20%s\x20[%s]','defineProperty','isDir','apply','__esModule','Logger','components','removeChild','readFile','keys','1588867fGPZUK','splice','removeParent','../../internal/fs.internal','Unknown\x20child\x20type\x20','isEmptyXml','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','have\x20to\x20update\x20%d\x20files','-meta.xml','removeDir','6XRZZUW','parse','XmlV2','default','ExperienceBundle','removeFile','start','catch','exists'];a147_0x26bf=function(){return _0x477449;};return a147_0x26bf();}var __importDefault=this&&this[a147_0x3a6f98(0x126)]||function(_0xb93a5a){const _0x70ba27=a147_0x3a6f98;return _0xb93a5a&&_0xb93a5a[_0x70ba27(0x141)]?_0xb93a5a:{'default':_0xb93a5a};};Object[a147_0x3a6f98(0x13e)](exports,a147_0x3a6f98(0x141),{'value':!![]}),exports[a147_0x3a6f98(0x131)]=void 0x0;const fs_internal_1=require(a147_0x3a6f98(0x14a)),core_1=require('../../../../core'),xml_v2_1=require('../utils/xml-v2'),child_types_1=__importDefault(require(a147_0x3a6f98(0x125))),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require(a147_0x3a6f98(0x12e)));class MDApiRemover{constructor(_0x7c6be9,_0xa2d2cb){const _0x1a2dd7=a147_0x3a6f98;this[_0x1a2dd7(0x143)]=_0x7c6be9,this[_0x1a2dd7(0x121)]=_0xa2d2cb,this['META_EXTENSION']=_0x1a2dd7(0x115),this[_0x1a2dd7(0x12c)]='site-meta.xml',this['MAX_WRITES_PER_TICK']=0x64,this[_0x1a2dd7(0x13c)]=new core_1[(_0x1a2dd7(0x142))](MDApiRemover['name']),this[_0x1a2dd7(0x132)]={};}async[a147_0x3a6f98(0x149)](_0x12d179){const _0x23ad31=a147_0x3a6f98,_0x515bde=path_1['default'][_0x23ad31(0x120)](this[_0x23ad31(0x121)],_0x12d179[_0x23ad31(0x12e)]),_0x377ebe=path_1[_0x23ad31(0x11a)]['join'](this[_0x23ad31(0x121)],''+_0x12d179[_0x23ad31(0x12e)]+this[_0x23ad31(0x127)]);this[_0x23ad31(0x132)][_0x12d179[_0x23ad31(0x12e)]]&&delete this[_0x23ad31(0x132)][_0x12d179[_0x23ad31(0x12e)]];const _0x17465d=await fs_internal_1['FS'][_0x23ad31(0x13f)](_0x515bde)[_0x23ad31(0x11e)](()=>![]);if(_0x17465d){this[_0x23ad31(0x13c)][_0x23ad31(0x12b)]('remove\x20component\x20directory\x20%s\x20[%s]',_0x515bde,_0x12d179[_0x23ad31(0x137)]),await fs_internal_1['FS'][_0x23ad31(0x116)](_0x515bde);_0x12d179[_0x23ad31(0x137)]===_0x23ad31(0x11b)?await fs_internal_1['FS'][_0x23ad31(0x11c)](''+_0x515bde+this[_0x23ad31(0x12c)])[_0x23ad31(0x11e)](()=>void 0x0):(this['logger'][_0x23ad31(0x12b)](_0x23ad31(0x14d),_0x515bde,_0x12d179[_0x23ad31(0x137)]),await fs_internal_1['FS'][_0x23ad31(0x11c)](''+_0x515bde+this[_0x23ad31(0x127)])[_0x23ad31(0x11e)](()=>void 0x0));return;}this[_0x23ad31(0x13c)][_0x23ad31(0x12b)]('remove\x20component\x20\x20%s\x20[%s]',_0x515bde,_0x12d179[_0x23ad31(0x137)]),await Promise[_0x23ad31(0x129)]([fs_internal_1['FS'][_0x23ad31(0x11c)](_0x515bde),fs_internal_1['FS']['removeFile'](_0x377ebe)]);}async['removeChild'](_0x86713d){const _0x41ae7a=a147_0x3a6f98,{fileName:_0xf195e5,type:_0x1a7c21,path:_0x39612f}=_0x86713d,_0x42945e=child_types_map_1[_0x41ae7a(0x11a)][_0x1a7c21];if(!_0x42945e)throw new Error(_0x41ae7a(0x14b)+_0x1a7c21);if(!this[_0x41ae7a(0x132)][_0x39612f]){const _0x132893=path_1[_0x41ae7a(0x11a)][_0x41ae7a(0x120)](this[_0x41ae7a(0x121)],_0x39612f),_0x29a32b=await fs_internal_1['FS'][_0x41ae7a(0x11f)](_0x132893);if(!_0x29a32b)return;const _0x2418af=await fs_internal_1['FS'][_0x41ae7a(0x145)](_0x132893);this['parentComponents'][_0x39612f]=await xml_v2_1['XmlV2'][_0x41ae7a(0x118)](_0x2418af);}const _0x4e39ed=this[_0x41ae7a(0x132)][_0x39612f],_0x4e16d3=_0xf195e5['split']('.')[_0x41ae7a(0x12d)]();xml_v2_1[_0x41ae7a(0x119)][_0x41ae7a(0x139)](_0x4e39ed,_0x42945e,_0x4e16d3||_0xf195e5),xml_v2_1[_0x41ae7a(0x119)][_0x41ae7a(0x14c)](_0x4e39ed)?(this['logger'][_0x41ae7a(0x12b)]('remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x86713d[_0x41ae7a(0x12e)],_0x86713d['fileName']),await this['removeParent'](_0x86713d),delete this[_0x41ae7a(0x132)][_0x39612f]):this[_0x41ae7a(0x132)][_0x39612f]=_0x4e39ed;}async[a147_0x3a6f98(0x11d)](){const _0x12ccae=a147_0x3a6f98;!await fs_internal_1['FS']['exists'](this[_0x12ccae(0x121)])&&await fs_internal_1['FS']['makeDir'](this['sourceDir']);for(const _0x1438d7 of this[_0x12ccae(0x143)]){!child_types_1[_0x12ccae(0x11a)][_0x12ccae(0x136)](_0x1438d7[_0x12ccae(0x137)])?(this['logger'][_0x12ccae(0x12b)](_0x12ccae(0x13d),_0x1438d7['fileName'],_0x1438d7[_0x12ccae(0x137)]),await this[_0x12ccae(0x149)](_0x1438d7)):(this[_0x12ccae(0x13c)][_0x12ccae(0x12b)]('remove\x20child\x20component\x20%s\x20[%s]',_0x1438d7[_0x12ccae(0x12f)],_0x1438d7[_0x12ccae(0x137)]),await this[_0x12ccae(0x144)](_0x1438d7));}const _0x556cf9=Object[_0x12ccae(0x146)](this[_0x12ccae(0x132)]);this['logger'][_0x12ccae(0x12b)](_0x12ccae(0x14e),this[_0x12ccae(0x143)][_0x12ccae(0x128)]);while(_0x556cf9[_0x12ccae(0x128)]){const _0x69a836=_0x556cf9[_0x12ccae(0x148)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x470395 of _0x69a836){await fs_internal_1['FS'][_0x12ccae(0x13b)](path_1['default'][_0x12ccae(0x120)](this['sourceDir'],_0x470395),xml_v2_1['XmlV2']['convertToString'](this[_0x12ccae(0x132)][_0x470395]));}}this[_0x12ccae(0x132)]={};}}exports[a147_0x3a6f98(0x131)]=MDApiRemover;