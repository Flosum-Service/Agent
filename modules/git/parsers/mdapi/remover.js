const a151_0x28488b=a151_0x543a;function a151_0x19c1(){const _0x22b408=['XmlV2','MDApiRemover','log','length','4JbzhUz','../../internal/fs.internal','isDir','22410289VmlGvr','name','MAX_WRITES_PER_TICK','defineProperty','removeParent','META_EXPERIENCE_BUNDLE','toString','start','56RZohkK','search','../data/child-types','27NiPLWW','__importDefault','../../../../core','1818805JJeGcZ','catch','includes','(((.+)+)+)+$','path','remove\x20child\x20component\x20%s\x20[%s]','default','3790670sEsaPV','readFile','META_EXTENSION','Unknown\x20child\x20type\x20','components','189042MIVPpz','-meta.xml','splice','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','1Uekbjm','logger','exists','fileName','join','Logger','makeDir','../utils/xml-v2','type','129216fSWxtJ','parse','__esModule','sourceDir','all','writeFile','removeDir','remove\x20parent\x20component\x20%s\x20[%s]','keys','parentComponents','removeFile','1092581KNxbvg','1704700hojOCL'];a151_0x19c1=function(){return _0x22b408;};return a151_0x19c1();}(function(_0xaa8da3,_0x126fb3){const _0x2289cc=a151_0x543a,_0x423b1e=_0xaa8da3();while(!![]){try{const _0x2a6b9f=-parseInt(_0x2289cc(0x131))/0x1*(parseInt(_0x2289cc(0x146))/0x2)+parseInt(_0x2289cc(0x12d))/0x3+-parseInt(_0x2289cc(0x14b))/0x4*(parseInt(_0x2289cc(0x121))/0x5)+-parseInt(_0x2289cc(0x13a))/0x6+-parseInt(_0x2289cc(0x145))/0x7*(-parseInt(_0x2289cc(0x11b))/0x8)+-parseInt(_0x2289cc(0x11e))/0x9*(parseInt(_0x2289cc(0x128))/0xa)+parseInt(_0x2289cc(0x113))/0xb;if(_0x2a6b9f===_0x126fb3)break;else _0x423b1e['push'](_0x423b1e['shift']());}catch(_0x1d19d6){_0x423b1e['push'](_0x423b1e['shift']());}}}(a151_0x19c1,0xc7b7e));const a151_0x4d6ebd=(function(){let _0x11f08e=!![];return function(_0x91ab36,_0x3b3e5d){const _0x423932=_0x11f08e?function(){if(_0x3b3e5d){const _0x27d67e=_0x3b3e5d['apply'](_0x91ab36,arguments);return _0x3b3e5d=null,_0x27d67e;}}:function(){};return _0x11f08e=![],_0x423932;};}()),a151_0x2b173e=a151_0x4d6ebd(this,function(){const _0x4b6a8c=a151_0x543a;return a151_0x2b173e[_0x4b6a8c(0x119)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a151_0x2b173e)[_0x4b6a8c(0x11c)](_0x4b6a8c(0x124));});a151_0x2b173e();'use strict';var __importDefault=this&&this[a151_0x28488b(0x11f)]||function(_0x24ea6d){const _0x59f699=a151_0x28488b;return _0x24ea6d&&_0x24ea6d[_0x59f699(0x13c)]?_0x24ea6d:{'default':_0x24ea6d};};Object[a151_0x28488b(0x116)](exports,a151_0x28488b(0x13c),{'value':!![]}),exports[a151_0x28488b(0x148)]=void 0x0;const fs_internal_1=require(a151_0x28488b(0x14c)),core_1=require(a151_0x28488b(0x120)),xml_v2_1=require(a151_0x28488b(0x138)),child_types_1=__importDefault(require(a151_0x28488b(0x11d))),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require(a151_0x28488b(0x125)));function a151_0x543a(_0x509a49,_0x397090){const _0x4f082b=a151_0x19c1();return a151_0x543a=function(_0x2b173e,_0x4d6ebd){_0x2b173e=_0x2b173e-0x112;let _0x19c1da=_0x4f082b[_0x2b173e];return _0x19c1da;},a151_0x543a(_0x509a49,_0x397090);}class MDApiRemover{constructor(_0x17d17d,_0x549b36){const _0x4952a1=a151_0x28488b;this[_0x4952a1(0x12c)]=_0x17d17d,this[_0x4952a1(0x13d)]=_0x549b36,this[_0x4952a1(0x12a)]=_0x4952a1(0x12e),this[_0x4952a1(0x118)]='site-meta.xml',this['MAX_WRITES_PER_TICK']=0x64,this[_0x4952a1(0x132)]=new core_1[(_0x4952a1(0x136))](MDApiRemover[_0x4952a1(0x114)]),this[_0x4952a1(0x143)]={};}async['removeParent'](_0x3cdeca){const _0x58f37b=a151_0x28488b,_0x5da2bd=path_1[_0x58f37b(0x127)][_0x58f37b(0x135)](this[_0x58f37b(0x13d)],_0x3cdeca['path']),_0xc1b72e=path_1[_0x58f37b(0x127)][_0x58f37b(0x135)](this[_0x58f37b(0x13d)],''+_0x3cdeca[_0x58f37b(0x125)]+this[_0x58f37b(0x12a)]);this[_0x58f37b(0x143)][_0x3cdeca['path']]&&delete this['parentComponents'][_0x3cdeca['path']];const _0x11eedc=await fs_internal_1['FS'][_0x58f37b(0x112)](_0x5da2bd)['catch'](()=>![]);if(_0x11eedc){this[_0x58f37b(0x132)][_0x58f37b(0x149)]('remove\x20component\x20directory\x20%s\x20[%s]',_0x5da2bd,_0x3cdeca[_0x58f37b(0x139)]),await fs_internal_1['FS'][_0x58f37b(0x140)](_0x5da2bd);_0x3cdeca[_0x58f37b(0x139)]==='ExperienceBundle'?await fs_internal_1['FS'][_0x58f37b(0x144)](''+_0x5da2bd+this[_0x58f37b(0x118)])[_0x58f37b(0x122)](()=>void 0x0):(this[_0x58f37b(0x132)][_0x58f37b(0x149)](_0x58f37b(0x130),_0x5da2bd,_0x3cdeca[_0x58f37b(0x139)]),await fs_internal_1['FS'][_0x58f37b(0x144)](''+_0x5da2bd+this[_0x58f37b(0x12a)])[_0x58f37b(0x122)](()=>void 0x0));return;}this[_0x58f37b(0x132)][_0x58f37b(0x149)]('remove\x20component\x20\x20%s\x20[%s]',_0x5da2bd,_0x3cdeca[_0x58f37b(0x139)]),await Promise[_0x58f37b(0x13e)]([fs_internal_1['FS'][_0x58f37b(0x144)](_0x5da2bd),fs_internal_1['FS'][_0x58f37b(0x144)](_0xc1b72e)]);}async['removeChild'](_0x1e8cdc){const _0x45d6e8=a151_0x28488b,{fileName:_0x3eca1e,type:_0x3088c1,path:_0x1e568b}=_0x1e8cdc,_0x132f0c=child_types_map_1[_0x45d6e8(0x127)][_0x3088c1];if(!_0x132f0c)throw new Error(_0x45d6e8(0x12b)+_0x3088c1);if(!this['parentComponents'][_0x1e568b]){const _0x199abc=path_1[_0x45d6e8(0x127)]['join'](this['sourceDir'],_0x1e568b),_0x17248d=await fs_internal_1['FS'][_0x45d6e8(0x133)](_0x199abc);if(!_0x17248d)return;const _0x7f7b28=await fs_internal_1['FS'][_0x45d6e8(0x129)](_0x199abc);this[_0x45d6e8(0x143)][_0x1e568b]=await xml_v2_1[_0x45d6e8(0x147)][_0x45d6e8(0x13b)](_0x7f7b28);}const _0x395943=this['parentComponents'][_0x1e568b],_0x23b8f7=_0x3eca1e['split']('.')['pop']();xml_v2_1[_0x45d6e8(0x147)]['removeAt'](_0x395943,_0x132f0c,_0x23b8f7||_0x3eca1e),xml_v2_1['XmlV2']['isEmptyXml'](_0x395943)?(this[_0x45d6e8(0x132)]['log']('remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x1e8cdc[_0x45d6e8(0x125)],_0x1e8cdc['fileName']),await this[_0x45d6e8(0x117)](_0x1e8cdc),delete this['parentComponents'][_0x1e568b]):this[_0x45d6e8(0x143)][_0x1e568b]=_0x395943;}async[a151_0x28488b(0x11a)](){const _0x32fbb8=a151_0x28488b;!await fs_internal_1['FS'][_0x32fbb8(0x133)](this['sourceDir'])&&await fs_internal_1['FS'][_0x32fbb8(0x137)](this[_0x32fbb8(0x13d)]);for(const _0x39734b of this[_0x32fbb8(0x12c)]){!child_types_1[_0x32fbb8(0x127)][_0x32fbb8(0x123)](_0x39734b['type'])?(this[_0x32fbb8(0x132)][_0x32fbb8(0x149)](_0x32fbb8(0x141),_0x39734b['fileName'],_0x39734b[_0x32fbb8(0x139)]),await this['removeParent'](_0x39734b)):(this[_0x32fbb8(0x132)][_0x32fbb8(0x149)](_0x32fbb8(0x126),_0x39734b[_0x32fbb8(0x134)],_0x39734b[_0x32fbb8(0x139)]),await this['removeChild'](_0x39734b));}const _0x7b5cf2=Object[_0x32fbb8(0x142)](this['parentComponents']);this[_0x32fbb8(0x132)][_0x32fbb8(0x149)]('have\x20to\x20update\x20%d\x20files',this[_0x32fbb8(0x12c)][_0x32fbb8(0x14a)]);while(_0x7b5cf2['length']){const _0x1f9c62=_0x7b5cf2[_0x32fbb8(0x12f)](0x0,this[_0x32fbb8(0x115)]);for(const _0x1e93e5 of _0x1f9c62){await fs_internal_1['FS'][_0x32fbb8(0x13f)](path_1[_0x32fbb8(0x127)][_0x32fbb8(0x135)](this[_0x32fbb8(0x13d)],_0x1e93e5),xml_v2_1[_0x32fbb8(0x147)]['convertToString'](this[_0x32fbb8(0x143)][_0x1e93e5]));}}this[_0x32fbb8(0x143)]={};}}exports[a151_0x28488b(0x148)]=MDApiRemover;