const a148_0x1703e0=a148_0x144b;(function(_0x54dbe2,_0x26340b){const _0xf2e591=a148_0x144b,_0x9d8e5d=_0x54dbe2();while(!![]){try{const _0x572b05=-parseInt(_0xf2e591(0x15d))/0x1+parseInt(_0xf2e591(0x166))/0x2+-parseInt(_0xf2e591(0x16c))/0x3+parseInt(_0xf2e591(0x178))/0x4+parseInt(_0xf2e591(0x171))/0x5+-parseInt(_0xf2e591(0x14d))/0x6+-parseInt(_0xf2e591(0x165))/0x7*(parseInt(_0xf2e591(0x186))/0x8);if(_0x572b05===_0x26340b)break;else _0x9d8e5d['push'](_0x9d8e5d['shift']());}catch(_0x23ab62){_0x9d8e5d['push'](_0x9d8e5d['shift']());}}}(a148_0x4041,0xc9df6));const a148_0x411def=(function(){let _0x4f9c98=!![];return function(_0x462fa,_0x21da20){const _0x350da7=_0x4f9c98?function(){if(_0x21da20){const _0x311c92=_0x21da20['apply'](_0x462fa,arguments);return _0x21da20=null,_0x311c92;}}:function(){};return _0x4f9c98=![],_0x350da7;};}()),a148_0x18df0a=a148_0x411def(this,function(){const _0x47f0f6=a148_0x144b;return a148_0x18df0a[_0x47f0f6(0x16f)]()[_0x47f0f6(0x164)](_0x47f0f6(0x156))['toString']()['constructor'](a148_0x18df0a)['search'](_0x47f0f6(0x156));});a148_0x18df0a();'use strict';var __importDefault=this&&this[a148_0x1703e0(0x161)]||function(_0x2e0ce1){const _0x4c5992=a148_0x1703e0;return _0x2e0ce1&&_0x2e0ce1[_0x4c5992(0x16a)]?_0x2e0ce1:{'default':_0x2e0ce1};};function a148_0x144b(_0x39335b,_0x9ff280){const _0x9f2552=a148_0x4041();return a148_0x144b=function(_0x18df0a,_0x411def){_0x18df0a=_0x18df0a-0x14d;let _0x4041c3=_0x9f2552[_0x18df0a];return _0x4041c3;},a148_0x144b(_0x39335b,_0x9ff280);}Object[a148_0x1703e0(0x170)](exports,a148_0x1703e0(0x16a),{'value':!![]}),exports[a148_0x1703e0(0x17c)]=void 0x0;function a148_0x4041(){const _0x10b0c0=['__esModule','removeChild','869013mtkrhS','all','-meta.xml','toString','defineProperty','3963590awQYAx','../data/child-types-map','removeDir','keys','sourceDir','../../../../core','includes','6412916nchKMc','parse','Logger','META_EXTENSION','MDApiRemover','MAX_WRITES_PER_TICK','fileName','remove\x20component\x20directory\x20%s\x20[%s]','removeFile','removeParent','remove\x20child\x20component\x20%s\x20[%s]','default','type','writeFile','1377064fwDsmH','catch','9215262GEQLvi','isEmptyXml','readFile','isDir','remove\x20parent\x20component\x20%s\x20[%s]','join','exists','components','../data/child-types','(((.+)+)+)+$','remove\x20component\x20\x20%s\x20[%s]','ExperienceBundle','XmlV2','remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file','split','removeAt','671360qFXbmp','logger','log','Unknown\x20child\x20type\x20','__importDefault','length','path','search','21QZgKcc','2888460npkbGA','../../internal/fs.internal','parentComponents','pop'];a148_0x4041=function(){return _0x10b0c0;};return a148_0x4041();}const fs_internal_1=require(a148_0x1703e0(0x167)),core_1=require(a148_0x1703e0(0x176)),xml_v2_1=require('../utils/xml-v2'),child_types_1=__importDefault(require(a148_0x1703e0(0x155))),child_types_map_1=__importDefault(require(a148_0x1703e0(0x172))),path_1=__importDefault(require(a148_0x1703e0(0x163)));class MDApiRemover{constructor(_0x158de6,_0xb23d38){const _0xf0da54=a148_0x1703e0;this['components']=_0x158de6,this[_0xf0da54(0x175)]=_0xb23d38,this[_0xf0da54(0x17b)]=_0xf0da54(0x16e),this['META_EXPERIENCE_BUNDLE']='site-meta.xml',this[_0xf0da54(0x17d)]=0x64,this[_0xf0da54(0x15e)]=new core_1[(_0xf0da54(0x17a))](MDApiRemover['name']),this[_0xf0da54(0x168)]={};}async[a148_0x1703e0(0x181)](_0x33be55){const _0x5e2b39=a148_0x1703e0,_0x3d84ef=path_1[_0x5e2b39(0x183)][_0x5e2b39(0x152)](this['sourceDir'],_0x33be55[_0x5e2b39(0x163)]),_0x5b5345=path_1[_0x5e2b39(0x183)]['join'](this[_0x5e2b39(0x175)],''+_0x33be55[_0x5e2b39(0x163)]+this['META_EXTENSION']);this[_0x5e2b39(0x168)][_0x33be55[_0x5e2b39(0x163)]]&&delete this[_0x5e2b39(0x168)][_0x33be55['path']];const _0x4e7857=await fs_internal_1['FS'][_0x5e2b39(0x150)](_0x3d84ef)['catch'](()=>![]);if(_0x4e7857){this['logger'][_0x5e2b39(0x15f)](_0x5e2b39(0x17f),_0x3d84ef,_0x33be55[_0x5e2b39(0x184)]),await fs_internal_1['FS'][_0x5e2b39(0x173)](_0x3d84ef);_0x33be55[_0x5e2b39(0x184)]===_0x5e2b39(0x158)?await fs_internal_1['FS']['removeFile'](''+_0x3d84ef+this['META_EXPERIENCE_BUNDLE'])[_0x5e2b39(0x187)](()=>void 0x0):(this[_0x5e2b39(0x15e)][_0x5e2b39(0x15f)](_0x5e2b39(0x15a),_0x3d84ef,_0x33be55[_0x5e2b39(0x184)]),await fs_internal_1['FS']['removeFile'](''+_0x3d84ef+this[_0x5e2b39(0x17b)])[_0x5e2b39(0x187)](()=>void 0x0));return;}this[_0x5e2b39(0x15e)]['log'](_0x5e2b39(0x157),_0x3d84ef,_0x33be55[_0x5e2b39(0x184)]),await Promise[_0x5e2b39(0x16d)]([fs_internal_1['FS'][_0x5e2b39(0x180)](_0x3d84ef),fs_internal_1['FS'][_0x5e2b39(0x180)](_0x5b5345)]);}async[a148_0x1703e0(0x16b)](_0x39e79e){const _0x579919=a148_0x1703e0,{fileName:_0x3dd6c4,type:_0x12954d,path:_0x5d065c}=_0x39e79e,_0xa09fe8=child_types_map_1[_0x579919(0x183)][_0x12954d];if(!_0xa09fe8)throw new Error(_0x579919(0x160)+_0x12954d);if(!this[_0x579919(0x168)][_0x5d065c]){const _0x3fd959=path_1[_0x579919(0x183)][_0x579919(0x152)](this[_0x579919(0x175)],_0x5d065c),_0x540e7d=await fs_internal_1['FS'][_0x579919(0x153)](_0x3fd959);if(!_0x540e7d)return;const _0x2cd3c8=await fs_internal_1['FS'][_0x579919(0x14f)](_0x3fd959);this['parentComponents'][_0x5d065c]=await xml_v2_1[_0x579919(0x159)][_0x579919(0x179)](_0x2cd3c8);}const _0x5e15c4=this[_0x579919(0x168)][_0x5d065c],_0x51cf74=_0x3dd6c4[_0x579919(0x15b)]('.')[_0x579919(0x169)]();xml_v2_1[_0x579919(0x159)][_0x579919(0x15c)](_0x5e15c4,_0xa09fe8,_0x51cf74||_0x3dd6c4),xml_v2_1[_0x579919(0x159)][_0x579919(0x14e)](_0x5e15c4)?(this['logger'][_0x579919(0x15f)]('remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x39e79e[_0x579919(0x163)],_0x39e79e[_0x579919(0x17e)]),await this[_0x579919(0x181)](_0x39e79e),delete this['parentComponents'][_0x5d065c]):this['parentComponents'][_0x5d065c]=_0x5e15c4;}async['start'](){const _0x31b872=a148_0x1703e0;!await fs_internal_1['FS']['exists'](this[_0x31b872(0x175)])&&await fs_internal_1['FS']['makeDir'](this['sourceDir']);for(const _0x3cd1f6 of this[_0x31b872(0x154)]){!child_types_1[_0x31b872(0x183)][_0x31b872(0x177)](_0x3cd1f6['type'])?(this[_0x31b872(0x15e)]['log'](_0x31b872(0x151),_0x3cd1f6[_0x31b872(0x17e)],_0x3cd1f6[_0x31b872(0x184)]),await this[_0x31b872(0x181)](_0x3cd1f6)):(this[_0x31b872(0x15e)][_0x31b872(0x15f)](_0x31b872(0x182),_0x3cd1f6[_0x31b872(0x17e)],_0x3cd1f6[_0x31b872(0x184)]),await this[_0x31b872(0x16b)](_0x3cd1f6));}const _0x430916=Object[_0x31b872(0x174)](this[_0x31b872(0x168)]);this['logger'][_0x31b872(0x15f)]('have\x20to\x20update\x20%d\x20files',this['components'][_0x31b872(0x162)]);while(_0x430916[_0x31b872(0x162)]){const _0x5f0670=_0x430916['splice'](0x0,this[_0x31b872(0x17d)]);for(const _0x228559 of _0x5f0670){await fs_internal_1['FS'][_0x31b872(0x185)](path_1[_0x31b872(0x183)]['join'](this[_0x31b872(0x175)],_0x228559),xml_v2_1[_0x31b872(0x159)]['convertToString'](this[_0x31b872(0x168)][_0x228559]));}}this[_0x31b872(0x168)]={};}}exports[a148_0x1703e0(0x17c)]=MDApiRemover;