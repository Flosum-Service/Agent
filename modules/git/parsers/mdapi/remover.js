const a151_0x238704=a151_0x48a9;(function(_0x5caa85,_0x5cfc34){const _0xf9a349=a151_0x48a9,_0x27f660=_0x5caa85();while(!![]){try{const _0x3e0a63=-parseInt(_0xf9a349(0x230))/0x1+-parseInt(_0xf9a349(0x20d))/0x2+parseInt(_0xf9a349(0x1fe))/0x3*(parseInt(_0xf9a349(0x1fb))/0x4)+-parseInt(_0xf9a349(0x213))/0x5*(-parseInt(_0xf9a349(0x208))/0x6)+-parseInt(_0xf9a349(0x21d))/0x7*(parseInt(_0xf9a349(0x200))/0x8)+-parseInt(_0xf9a349(0x221))/0x9*(parseInt(_0xf9a349(0x202))/0xa)+parseInt(_0xf9a349(0x203))/0xb;if(_0x3e0a63===_0x5cfc34)break;else _0x27f660['push'](_0x27f660['shift']());}catch(_0x3459dc){_0x27f660['push'](_0x27f660['shift']());}}}(a151_0x1c1f,0xbc725));const a151_0xcc9f14=(function(){let _0x967a57=!![];return function(_0x4f657c,_0x555391){const _0xef51b8=_0x967a57?function(){const _0xc7c6ca=a151_0x48a9;if(_0x555391){const _0x13c324=_0x555391[_0xc7c6ca(0x1f8)](_0x4f657c,arguments);return _0x555391=null,_0x13c324;}}:function(){};return _0x967a57=![],_0xef51b8;};}()),a151_0x1ad746=a151_0xcc9f14(this,function(){const _0x3fa4a0=a151_0x48a9;return a151_0x1ad746['toString']()['search'](_0x3fa4a0(0x1f6))[_0x3fa4a0(0x22e)]()[_0x3fa4a0(0x215)](a151_0x1ad746)[_0x3fa4a0(0x20b)](_0x3fa4a0(0x1f6));});a151_0x1ad746();function a151_0x1c1f(){const _0x4b97ab=['remove\x20component\x20directory\x20%s\x20[%s]','META_EXTENSION','10505cawMpa','exists','constructor','logger','../../internal/fs.internal','ExperienceBundle','../utils/xml-v2','keys','-meta.xml','name','4423937irNxtQ','isDir','removeParent','sourceDir','257391wboaPL','removeChild','join','META_EXPERIENCE_BUNDLE','removeAt','log','path','writeFile','split','includes','pop','fileName','type','toString','removeFile','739611raIMQs','remove\x20parent\x20component\x20%s\x20[%s]','remove\x20component\x20\x20%s\x20[%s]','Unknown\x20child\x20type\x20','Logger','parse','MDApiRemover','(((.+)+)+)+$','MAX_WRITES_PER_TICK','apply','XmlV2','components','4630552kKydnT','__esModule','convertToString','3HZBwDY','have\x20to\x20update\x20%d\x20files','8XfOrTY','__importDefault','240CvjeZP','22068783qMGMgF','start','removeDir','all','default','2364WHxDrc','splice','catch','search','readFile','2323660ENRDAJ','defineProperty','site-meta.xml','parentComponents'];a151_0x1c1f=function(){return _0x4b97ab;};return a151_0x1c1f();}'use strict';function a151_0x48a9(_0x261ab4,_0x52d091){const _0x386eaa=a151_0x1c1f();return a151_0x48a9=function(_0x1ad746,_0xcc9f14){_0x1ad746=_0x1ad746-0x1f2;let _0x1c1f06=_0x386eaa[_0x1ad746];return _0x1c1f06;},a151_0x48a9(_0x261ab4,_0x52d091);}var __importDefault=this&&this[a151_0x238704(0x201)]||function(_0x35ff34){const _0x372498=a151_0x238704;return _0x35ff34&&_0x35ff34[_0x372498(0x1fc)]?_0x35ff34:{'default':_0x35ff34};};Object[a151_0x238704(0x20e)](exports,a151_0x238704(0x1fc),{'value':!![]}),exports[a151_0x238704(0x1f5)]=void 0x0;const fs_internal_1=require(a151_0x238704(0x217)),core_1=require('../../../../core'),xml_v2_1=require(a151_0x238704(0x219)),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require('path'));class MDApiRemover{constructor(_0x20bd4c,_0x3b4e27){const _0x26daa3=a151_0x238704;this[_0x26daa3(0x1fa)]=_0x20bd4c,this['sourceDir']=_0x3b4e27,this[_0x26daa3(0x212)]=_0x26daa3(0x21b),this[_0x26daa3(0x224)]=_0x26daa3(0x20f),this[_0x26daa3(0x1f7)]=0x64,this['logger']=new core_1[(_0x26daa3(0x1f3))](MDApiRemover[_0x26daa3(0x21c)]),this[_0x26daa3(0x210)]={};}async[a151_0x238704(0x21f)](_0x56f026){const _0x5cb194=a151_0x238704,_0x565ef2=path_1['default'][_0x5cb194(0x223)](this[_0x5cb194(0x220)],_0x56f026[_0x5cb194(0x227)]),_0xe2e38b=path_1['default'][_0x5cb194(0x223)](this['sourceDir'],''+_0x56f026['path']+this['META_EXTENSION']);this[_0x5cb194(0x210)][_0x56f026[_0x5cb194(0x227)]]&&delete this['parentComponents'][_0x56f026['path']];const _0x3dcaca=await fs_internal_1['FS'][_0x5cb194(0x21e)](_0x565ef2)['catch'](()=>![]);if(_0x3dcaca){this[_0x5cb194(0x216)][_0x5cb194(0x226)](_0x5cb194(0x211),_0x565ef2,_0x56f026[_0x5cb194(0x22d)]),await fs_internal_1['FS'][_0x5cb194(0x205)](_0x565ef2);_0x56f026[_0x5cb194(0x22d)]===_0x5cb194(0x218)?await fs_internal_1['FS'][_0x5cb194(0x22f)](''+_0x565ef2+this['META_EXPERIENCE_BUNDLE'])[_0x5cb194(0x20a)](()=>void 0x0):(this[_0x5cb194(0x216)][_0x5cb194(0x226)]('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x565ef2,_0x56f026['type']),await fs_internal_1['FS'][_0x5cb194(0x22f)](''+_0x565ef2+this[_0x5cb194(0x212)])[_0x5cb194(0x20a)](()=>void 0x0));return;}this[_0x5cb194(0x216)][_0x5cb194(0x226)](_0x5cb194(0x232),_0x565ef2,_0x56f026[_0x5cb194(0x22d)]),await Promise[_0x5cb194(0x206)]([fs_internal_1['FS'][_0x5cb194(0x22f)](_0x565ef2),fs_internal_1['FS']['removeFile'](_0xe2e38b)]);}async['removeChild'](_0x473668){const _0xb0beaf=a151_0x238704,{fileName:_0x3cd2e8,type:_0xa224dc,path:_0x4478b6}=_0x473668,_0x39bfbf=child_types_map_1['default'][_0xa224dc];if(!_0x39bfbf)throw new Error(_0xb0beaf(0x1f2)+_0xa224dc);if(!this['parentComponents'][_0x4478b6]){const _0x37abd8=path_1[_0xb0beaf(0x207)]['join'](this['sourceDir'],_0x4478b6),_0x96111b=await fs_internal_1['FS'][_0xb0beaf(0x214)](_0x37abd8);if(!_0x96111b)return;const _0x11909f=await fs_internal_1['FS'][_0xb0beaf(0x20c)](_0x37abd8);this['parentComponents'][_0x4478b6]=await xml_v2_1[_0xb0beaf(0x1f9)][_0xb0beaf(0x1f4)](_0x11909f);}const _0x15d2b0=this['parentComponents'][_0x4478b6],_0xeb05c7=_0x3cd2e8[_0xb0beaf(0x229)]('.')[_0xb0beaf(0x22b)]();xml_v2_1[_0xb0beaf(0x1f9)][_0xb0beaf(0x225)](_0x15d2b0,_0x39bfbf,_0xeb05c7||_0x3cd2e8),xml_v2_1[_0xb0beaf(0x1f9)]['isEmptyXml'](_0x15d2b0)?(this[_0xb0beaf(0x216)][_0xb0beaf(0x226)]('remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x473668[_0xb0beaf(0x227)],_0x473668[_0xb0beaf(0x22c)]),await this['removeParent'](_0x473668),delete this[_0xb0beaf(0x210)][_0x4478b6]):this[_0xb0beaf(0x210)][_0x4478b6]=_0x15d2b0;}async[a151_0x238704(0x204)](){const _0x51efa9=a151_0x238704;!await fs_internal_1['FS'][_0x51efa9(0x214)](this['sourceDir'])&&await fs_internal_1['FS']['makeDir'](this[_0x51efa9(0x220)]);for(const _0x1efc7c of this[_0x51efa9(0x1fa)]){!child_types_1[_0x51efa9(0x207)][_0x51efa9(0x22a)](_0x1efc7c[_0x51efa9(0x22d)])?(this['logger']['log'](_0x51efa9(0x231),_0x1efc7c[_0x51efa9(0x22c)],_0x1efc7c[_0x51efa9(0x22d)]),await this[_0x51efa9(0x21f)](_0x1efc7c)):(this[_0x51efa9(0x216)][_0x51efa9(0x226)]('remove\x20child\x20component\x20%s\x20[%s]',_0x1efc7c[_0x51efa9(0x22c)],_0x1efc7c[_0x51efa9(0x22d)]),await this[_0x51efa9(0x222)](_0x1efc7c));}const _0x30b7aa=Object[_0x51efa9(0x21a)](this[_0x51efa9(0x210)]);this['logger'][_0x51efa9(0x226)](_0x51efa9(0x1ff),this[_0x51efa9(0x1fa)]['length']);while(_0x30b7aa['length']){const _0x2f8b54=_0x30b7aa[_0x51efa9(0x209)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x3ac4d6 of _0x2f8b54){await fs_internal_1['FS'][_0x51efa9(0x228)](path_1['default'][_0x51efa9(0x223)](this[_0x51efa9(0x220)],_0x3ac4d6),xml_v2_1[_0x51efa9(0x1f9)][_0x51efa9(0x1fd)](this[_0x51efa9(0x210)][_0x3ac4d6]));}}this[_0x51efa9(0x210)]={};}}exports[a151_0x238704(0x1f5)]=MDApiRemover;