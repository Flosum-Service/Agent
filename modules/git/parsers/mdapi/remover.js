const a148_0x5327d3=a148_0x2b0a;(function(_0x4f6d6b,_0x2e0157){const _0x2e51d8=a148_0x2b0a,_0x42a622=_0x4f6d6b();while(!![]){try{const _0x4fe6aa=parseInt(_0x2e51d8(0xb7))/0x1+parseInt(_0x2e51d8(0x95))/0x2+parseInt(_0x2e51d8(0xbb))/0x3+-parseInt(_0x2e51d8(0xae))/0x4+parseInt(_0x2e51d8(0xb3))/0x5*(parseInt(_0x2e51d8(0x96))/0x6)+-parseInt(_0x2e51d8(0xb2))/0x7*(-parseInt(_0x2e51d8(0xb9))/0x8)+-parseInt(_0x2e51d8(0xba))/0x9;if(_0x4fe6aa===_0x2e0157)break;else _0x42a622['push'](_0x42a622['shift']());}catch(_0x51889e){_0x42a622['push'](_0x42a622['shift']());}}}(a148_0x3fb8,0xe046b));const a148_0x3a6c55=(function(){let _0x10f00a=!![];return function(_0x47f945,_0x1bcf9a){const _0x186542=_0x10f00a?function(){if(_0x1bcf9a){const _0x5f31fd=_0x1bcf9a['apply'](_0x47f945,arguments);return _0x1bcf9a=null,_0x5f31fd;}}:function(){};return _0x10f00a=![],_0x186542;};}()),a148_0x33030e=a148_0x3a6c55(this,function(){const _0x4b5c6c=a148_0x2b0a;return a148_0x33030e[_0x4b5c6c(0x8c)]()[_0x4b5c6c(0xb4)](_0x4b5c6c(0xa1))[_0x4b5c6c(0x8c)]()[_0x4b5c6c(0xab)](a148_0x33030e)[_0x4b5c6c(0xb4)](_0x4b5c6c(0xa1));});a148_0x33030e();'use strict';var __importDefault=this&&this['__importDefault']||function(_0xd0303e){const _0x384fd8=a148_0x2b0a;return _0xd0303e&&_0xd0303e[_0x384fd8(0xc8)]?_0xd0303e:{'default':_0xd0303e};};function a148_0x2b0a(_0x2606ac,_0x9f1d0b){const _0x2a2ad0=a148_0x3fb8();return a148_0x2b0a=function(_0x33030e,_0x3a6c55){_0x33030e=_0x33030e-0x8b;let _0x3fb835=_0x2a2ad0[_0x33030e];return _0x3fb835;},a148_0x2b0a(_0x2606ac,_0x9f1d0b);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['MDApiRemover']=void 0x0;function a148_0x3fb8(){const _0x15d0bb=['split','removeParent','log','__esModule','../data/child-types','toString','MDApiRemover','Logger','path','length','readFile','writeFile','remove\x20component\x20directory\x20%s\x20[%s]','parentComponents','2239118vgUDyv','12LNNQMn','MAX_WRITES_PER_TICK','exists','includes','splice','../data/child-types-map','../../internal/fs.internal','type','join','ExperienceBundle','parse','(((.+)+)+)+$','have\x20to\x20update\x20%d\x20files','logger','convertToString','META_EXTENSION','pop','removeFile','removeChild','remove\x20component\x20\x20%s\x20[%s]','start','constructor','removeAt','all','4589880SFdtHz','site-meta.xml','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','XmlV2','56IVJREe','2850115DzulwJ','search','removeDir','remove\x20parent\x20component\x20%s\x20[%s]','1268546qHwjeS','components','738448JTshtI','21907683zwRUNw','701079eEsFxM','Unknown\x20child\x20type\x20','catch','isEmptyXml','sourceDir','makeDir','default','isDir','fileName','../../../../core'];a148_0x3fb8=function(){return _0x15d0bb;};return a148_0x3fb8();}const fs_internal_1=require(a148_0x5327d3(0x9c)),core_1=require(a148_0x5327d3(0xc4)),xml_v2_1=require('../utils/xml-v2'),child_types_1=__importDefault(require(a148_0x5327d3(0x8b))),child_types_map_1=__importDefault(require(a148_0x5327d3(0x9b))),path_1=__importDefault(require(a148_0x5327d3(0x8f)));class MDApiRemover{constructor(_0x1a4eb3,_0x5d84d4){const _0x33cefe=a148_0x5327d3;this[_0x33cefe(0xb8)]=_0x1a4eb3,this[_0x33cefe(0xbf)]=_0x5d84d4,this[_0x33cefe(0xa5)]='-meta.xml',this['META_EXPERIENCE_BUNDLE']=_0x33cefe(0xaf),this[_0x33cefe(0x97)]=0x64,this[_0x33cefe(0xa3)]=new core_1[(_0x33cefe(0x8e))](MDApiRemover['name']),this[_0x33cefe(0x94)]={};}async['removeParent'](_0x3d8a50){const _0x5cd3cf=a148_0x5327d3,_0x32576d=path_1[_0x5cd3cf(0xc1)][_0x5cd3cf(0x9e)](this[_0x5cd3cf(0xbf)],_0x3d8a50[_0x5cd3cf(0x8f)]),_0x4b937a=path_1[_0x5cd3cf(0xc1)][_0x5cd3cf(0x9e)](this['sourceDir'],''+_0x3d8a50['path']+this[_0x5cd3cf(0xa5)]);this[_0x5cd3cf(0x94)][_0x3d8a50[_0x5cd3cf(0x8f)]]&&delete this[_0x5cd3cf(0x94)][_0x3d8a50[_0x5cd3cf(0x8f)]];const _0x2a71e9=await fs_internal_1['FS'][_0x5cd3cf(0xc2)](_0x32576d)[_0x5cd3cf(0xbd)](()=>![]);if(_0x2a71e9){this['logger'][_0x5cd3cf(0xc7)](_0x5cd3cf(0x93),_0x32576d,_0x3d8a50[_0x5cd3cf(0x9d)]),await fs_internal_1['FS'][_0x5cd3cf(0xb5)](_0x32576d);_0x3d8a50[_0x5cd3cf(0x9d)]===_0x5cd3cf(0x9f)?await fs_internal_1['FS']['removeFile'](''+_0x32576d+this['META_EXPERIENCE_BUNDLE'])[_0x5cd3cf(0xbd)](()=>void 0x0):(this[_0x5cd3cf(0xa3)][_0x5cd3cf(0xc7)]('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x32576d,_0x3d8a50[_0x5cd3cf(0x9d)]),await fs_internal_1['FS'][_0x5cd3cf(0xa7)](''+_0x32576d+this[_0x5cd3cf(0xa5)])[_0x5cd3cf(0xbd)](()=>void 0x0));return;}this['logger'][_0x5cd3cf(0xc7)](_0x5cd3cf(0xa9),_0x32576d,_0x3d8a50[_0x5cd3cf(0x9d)]),await Promise[_0x5cd3cf(0xad)]([fs_internal_1['FS'][_0x5cd3cf(0xa7)](_0x32576d),fs_internal_1['FS'][_0x5cd3cf(0xa7)](_0x4b937a)]);}async[a148_0x5327d3(0xa8)](_0x58a826){const _0x28f518=a148_0x5327d3,{fileName:_0x2c15e5,type:_0x9d770a,path:_0x14923a}=_0x58a826,_0x22b32d=child_types_map_1[_0x28f518(0xc1)][_0x9d770a];if(!_0x22b32d)throw new Error(_0x28f518(0xbc)+_0x9d770a);if(!this['parentComponents'][_0x14923a]){const _0x60f953=path_1[_0x28f518(0xc1)]['join'](this[_0x28f518(0xbf)],_0x14923a),_0x39d5cf=await fs_internal_1['FS'][_0x28f518(0x98)](_0x60f953);if(!_0x39d5cf)return;const _0x38f226=await fs_internal_1['FS'][_0x28f518(0x91)](_0x60f953);this[_0x28f518(0x94)][_0x14923a]=await xml_v2_1['XmlV2'][_0x28f518(0xa0)](_0x38f226);}const _0x575922=this[_0x28f518(0x94)][_0x14923a],_0x44c0ed=_0x2c15e5[_0x28f518(0xc5)]('.')[_0x28f518(0xa6)]();xml_v2_1['XmlV2'][_0x28f518(0xac)](_0x575922,_0x22b32d,_0x44c0ed||_0x2c15e5),xml_v2_1['XmlV2'][_0x28f518(0xbe)](_0x575922)?(this[_0x28f518(0xa3)][_0x28f518(0xc7)](_0x28f518(0xb0),_0x58a826['path'],_0x58a826[_0x28f518(0xc3)]),await this['removeParent'](_0x58a826),delete this[_0x28f518(0x94)][_0x14923a]):this[_0x28f518(0x94)][_0x14923a]=_0x575922;}async[a148_0x5327d3(0xaa)](){const _0x1d59e6=a148_0x5327d3;!await fs_internal_1['FS'][_0x1d59e6(0x98)](this[_0x1d59e6(0xbf)])&&await fs_internal_1['FS'][_0x1d59e6(0xc0)](this[_0x1d59e6(0xbf)]);for(const _0x83734c of this['components']){!child_types_1[_0x1d59e6(0xc1)][_0x1d59e6(0x99)](_0x83734c[_0x1d59e6(0x9d)])?(this[_0x1d59e6(0xa3)][_0x1d59e6(0xc7)](_0x1d59e6(0xb6),_0x83734c['fileName'],_0x83734c[_0x1d59e6(0x9d)]),await this[_0x1d59e6(0xc6)](_0x83734c)):(this[_0x1d59e6(0xa3)][_0x1d59e6(0xc7)]('remove\x20child\x20component\x20%s\x20[%s]',_0x83734c['fileName'],_0x83734c[_0x1d59e6(0x9d)]),await this['removeChild'](_0x83734c));}const _0x4e5495=Object['keys'](this[_0x1d59e6(0x94)]);this['logger']['log'](_0x1d59e6(0xa2),this[_0x1d59e6(0xb8)]['length']);while(_0x4e5495[_0x1d59e6(0x90)]){const _0x366f9e=_0x4e5495[_0x1d59e6(0x9a)](0x0,this[_0x1d59e6(0x97)]);for(const _0x33c7c3 of _0x366f9e){await fs_internal_1['FS'][_0x1d59e6(0x92)](path_1[_0x1d59e6(0xc1)][_0x1d59e6(0x9e)](this['sourceDir'],_0x33c7c3),xml_v2_1[_0x1d59e6(0xb1)][_0x1d59e6(0xa4)](this['parentComponents'][_0x33c7c3]));}}this[_0x1d59e6(0x94)]={};}}exports[a148_0x5327d3(0x8d)]=MDApiRemover;