const a116_0x30192a=a116_0x5a4e;(function(_0x254f1a,_0x4918f7){const _0x2ac87a=a116_0x5a4e,_0x3370d9=_0x254f1a();while(!![]){try{const _0x297ba1=-parseInt(_0x2ac87a(0xbe))/0x1+-parseInt(_0x2ac87a(0xb9))/0x2*(-parseInt(_0x2ac87a(0xc6))/0x3)+-parseInt(_0x2ac87a(0xb1))/0x4*(-parseInt(_0x2ac87a(0xc8))/0x5)+-parseInt(_0x2ac87a(0xac))/0x6+-parseInt(_0x2ac87a(0xaa))/0x7*(-parseInt(_0x2ac87a(0xda))/0x8)+-parseInt(_0x2ac87a(0xba))/0x9*(-parseInt(_0x2ac87a(0xb5))/0xa)+-parseInt(_0x2ac87a(0xde))/0xb;if(_0x297ba1===_0x4918f7)break;else _0x3370d9['push'](_0x3370d9['shift']());}catch(_0x2f49d9){_0x3370d9['push'](_0x3370d9['shift']());}}}(a116_0x2a2c,0x9e520));const a116_0x4524f2=(function(){let _0xac18c1=!![];return function(_0x325b90,_0x3a0192){const _0x2e88d6=_0xac18c1?function(){const _0x23db83=a116_0x5a4e;if(_0x3a0192){const _0x247c12=_0x3a0192[_0x23db83(0xae)](_0x325b90,arguments);return _0x3a0192=null,_0x247c12;}}:function(){};return _0xac18c1=![],_0x2e88d6;};}()),a116_0x415d64=a116_0x4524f2(this,function(){const _0x53473d=a116_0x5a4e;return a116_0x415d64[_0x53473d(0xdb)]()[_0x53473d(0xd8)](_0x53473d(0xd0))[_0x53473d(0xdb)]()[_0x53473d(0xbd)](a116_0x415d64)[_0x53473d(0xd8)](_0x53473d(0xd0));});function a116_0x2a2c(){const _0x5c12ce=['ExperienceBundle','convertToString','44blSVca','414FfWXJQ','splice','catch','constructor','451775sjDNOW','includes','__esModule','isEmptyXml','makeDir','remove\x20child\x20component\x20%s\x20[%s]','writeFile','removeChild','34872oDEVKc','MAX_WRITES_PER_TICK','10145unYooq','log','Xml','META_EXPERIENCE_BUNDLE','all','removeParent','../../internal/fs.internal','components','(((.+)+)+)+$','defineProperty','join','isDir','MDApiRemover','keys','Unknown\x20child\x20type\x20','pop','search','type','8QIaRYK','toString','exists','fileName','12562286SodATP','start','remove\x20parent\x20component\x20%s\x20[%s]','removeFile','logger','parse','site-meta.xml','have\x20to\x20update\x20%d\x20files','META_EXTENSION','8967917KvtQNp','remove\x20component\x20\x20%s\x20[%s]','1268790boKuBR','sourceDir','apply','../data/child-types','parentComponents','932OJyCKR','default','path','remove\x20component\x20directory\x20%s\x20[%s]','96550WyvCyO','__importDefault'];a116_0x2a2c=function(){return _0x5c12ce;};return a116_0x2a2c();}a116_0x415d64();'use strict';var __importDefault=this&&this[a116_0x30192a(0xb6)]||function(_0x3dc7a0){const _0x3d701b=a116_0x30192a;return _0x3dc7a0&&_0x3dc7a0[_0x3d701b(0xc0)]?_0x3dc7a0:{'default':_0x3dc7a0};};function a116_0x5a4e(_0x43ee8a,_0x47fdc1){const _0x2ecf42=a116_0x2a2c();return a116_0x5a4e=function(_0x415d64,_0x4524f2){_0x415d64=_0x415d64-0xa8;let _0x2a2cba=_0x2ecf42[_0x415d64];return _0x2a2cba;},a116_0x5a4e(_0x43ee8a,_0x47fdc1);}Object[a116_0x30192a(0xd1)](exports,a116_0x30192a(0xc0),{'value':!![]}),exports[a116_0x30192a(0xd4)]=void 0x0;const fs_internal_1=require(a116_0x30192a(0xce)),core_1=require('../../../../core'),xml_1=require('../utils/xml'),child_types_1=__importDefault(require(a116_0x30192a(0xaf))),child_types_map_1=__importDefault(require('../data/child-types-map')),path_1=__importDefault(require('path'));class MDApiRemover{constructor(_0x325215,_0x4dfce8){const _0x259c4c=a116_0x30192a;this['components']=_0x325215,this[_0x259c4c(0xad)]=_0x4dfce8,this[_0x259c4c(0xa9)]='-meta.xml',this[_0x259c4c(0xcb)]=_0x259c4c(0xe4),this['MAX_WRITES_PER_TICK']=0x64,this[_0x259c4c(0xe2)]=new core_1['Logger'](MDApiRemover['name']),this[_0x259c4c(0xb0)]={};}async[a116_0x30192a(0xcd)](_0x1acadd){const _0x525b59=a116_0x30192a,_0x1e6974=path_1['default'][_0x525b59(0xd2)](this['sourceDir'],_0x1acadd[_0x525b59(0xb3)]),_0xa73079=path_1[_0x525b59(0xb2)][_0x525b59(0xd2)](this[_0x525b59(0xad)],''+_0x1acadd[_0x525b59(0xb3)]+this[_0x525b59(0xa9)]);this[_0x525b59(0xb0)][_0x1acadd[_0x525b59(0xb3)]]&&delete this[_0x525b59(0xb0)][_0x1acadd[_0x525b59(0xb3)]];const _0x264709=await fs_internal_1['FS'][_0x525b59(0xd3)](_0x1e6974)[_0x525b59(0xbc)](()=>![]);if(_0x264709){this[_0x525b59(0xe2)]['log'](_0x525b59(0xb4),_0x1e6974,_0x1acadd['type']),await fs_internal_1['FS']['removeDir'](_0x1e6974);_0x1acadd[_0x525b59(0xd9)]===_0x525b59(0xb7)?await fs_internal_1['FS'][_0x525b59(0xe1)](''+_0x1e6974+this[_0x525b59(0xcb)])[_0x525b59(0xbc)](()=>void 0x0):(this[_0x525b59(0xe2)]['log']('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x1e6974,_0x1acadd[_0x525b59(0xd9)]),await fs_internal_1['FS'][_0x525b59(0xe1)](''+_0x1e6974+this['META_EXTENSION'])[_0x525b59(0xbc)](()=>void 0x0));return;}this[_0x525b59(0xe2)][_0x525b59(0xc9)](_0x525b59(0xab),_0x1e6974,_0x1acadd[_0x525b59(0xd9)]),await Promise[_0x525b59(0xcc)]([fs_internal_1['FS'][_0x525b59(0xe1)](_0x1e6974),fs_internal_1['FS'][_0x525b59(0xe1)](_0xa73079)]);}async[a116_0x30192a(0xc5)](_0x44cf96){const _0x456400=a116_0x30192a,{fileName:_0x456b7a,type:_0x524149,path:_0x363e7d}=_0x44cf96,_0x555f86=child_types_map_1[_0x456400(0xb2)][_0x524149];if(!_0x555f86)throw new Error(_0x456400(0xd6)+_0x524149);if(!this[_0x456400(0xb0)][_0x363e7d]){const _0x32025f=path_1[_0x456400(0xb2)][_0x456400(0xd2)](this[_0x456400(0xad)],_0x363e7d),_0x4562b4=await fs_internal_1['FS'][_0x456400(0xdc)](_0x32025f);if(!_0x4562b4)return;const _0x31e2f1=await fs_internal_1['FS']['readFile'](_0x32025f);this[_0x456400(0xb0)][_0x363e7d]=await xml_1['Xml'][_0x456400(0xe3)](_0x31e2f1);}const _0x50ac79=this['parentComponents'][_0x363e7d],_0x6c9c0c=_0x456b7a['split']('.')[_0x456400(0xd7)]();xml_1[_0x456400(0xca)]['removeAt'](_0x50ac79,_0x555f86,_0x6c9c0c||_0x456b7a),xml_1[_0x456400(0xca)][_0x456400(0xc1)](_0x50ac79)?(this[_0x456400(0xe2)]['log']('remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x44cf96[_0x456400(0xb3)],_0x44cf96['fileName']),await this[_0x456400(0xcd)](_0x44cf96),delete this['parentComponents'][_0x363e7d]):this[_0x456400(0xb0)][_0x363e7d]=_0x50ac79;}async[a116_0x30192a(0xdf)](){const _0x336b91=a116_0x30192a;!await fs_internal_1['FS'][_0x336b91(0xdc)](this[_0x336b91(0xad)])&&await fs_internal_1['FS'][_0x336b91(0xc2)](this['sourceDir']);for(const _0x26b49e of this[_0x336b91(0xcf)]){!child_types_1['default'][_0x336b91(0xbf)](_0x26b49e['type'])?(this[_0x336b91(0xe2)][_0x336b91(0xc9)](_0x336b91(0xe0),_0x26b49e['fileName'],_0x26b49e[_0x336b91(0xd9)]),await this[_0x336b91(0xcd)](_0x26b49e)):(this[_0x336b91(0xe2)]['log'](_0x336b91(0xc3),_0x26b49e[_0x336b91(0xdd)],_0x26b49e[_0x336b91(0xd9)]),await this[_0x336b91(0xc5)](_0x26b49e));}const _0x404ea9=Object[_0x336b91(0xd5)](this[_0x336b91(0xb0)]);this[_0x336b91(0xe2)]['log'](_0x336b91(0xa8),this[_0x336b91(0xcf)]['length']);while(_0x404ea9['length']){const _0x3674ac=_0x404ea9[_0x336b91(0xbb)](0x0,this[_0x336b91(0xc7)]);for(const _0x47f38f of _0x3674ac){await fs_internal_1['FS'][_0x336b91(0xc4)](path_1[_0x336b91(0xb2)][_0x336b91(0xd2)](this['sourceDir'],_0x47f38f),xml_1[_0x336b91(0xca)][_0x336b91(0xb8)](this['parentComponents'][_0x47f38f]));}}this[_0x336b91(0xb0)]={};}}exports[a116_0x30192a(0xd4)]=MDApiRemover;