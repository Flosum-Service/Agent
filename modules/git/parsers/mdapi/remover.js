const a148_0x596f8a=a148_0x3d33;(function(_0x5e4b97,_0xda482c){const _0x540ef0=a148_0x3d33,_0x3e7885=_0x5e4b97();while(!![]){try{const _0x2543eb=-parseInt(_0x540ef0(0xe1))/0x1*(-parseInt(_0x540ef0(0xe7))/0x2)+parseInt(_0x540ef0(0xf1))/0x3*(parseInt(_0x540ef0(0xec))/0x4)+-parseInt(_0x540ef0(0xf9))/0x5*(-parseInt(_0x540ef0(0xed))/0x6)+parseInt(_0x540ef0(0xe5))/0x7+parseInt(_0x540ef0(0xe2))/0x8+-parseInt(_0x540ef0(0xd4))/0x9+-parseInt(_0x540ef0(0xdb))/0xa*(parseInt(_0x540ef0(0xf4))/0xb);if(_0x2543eb===_0xda482c)break;else _0x3e7885['push'](_0x3e7885['shift']());}catch(_0x90a646){_0x3e7885['push'](_0x3e7885['shift']());}}}(a148_0x53a3,0xef643));const a148_0x1cfaca=(function(){let _0x25f571=!![];return function(_0x3bb39d,_0x7649b5){const _0x25eedd=_0x25f571?function(){const _0x5ea810=a148_0x3d33;if(_0x7649b5){const _0x596cb=_0x7649b5[_0x5ea810(0xc7)](_0x3bb39d,arguments);return _0x7649b5=null,_0x596cb;}}:function(){};return _0x25f571=![],_0x25eedd;};}()),a148_0xe8f053=a148_0x1cfaca(this,function(){const _0xbec56d=a148_0x3d33;return a148_0xe8f053['toString']()[_0xbec56d(0xda)](_0xbec56d(0xf8))[_0xbec56d(0xd8)]()[_0xbec56d(0xe0)](a148_0xe8f053)[_0xbec56d(0xda)](_0xbec56d(0xf8));});a148_0xe8f053();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x501ef2){const _0x5b50a4=a148_0x3d33;return _0x501ef2&&_0x501ef2[_0x5b50a4(0xd7)]?_0x501ef2:{'default':_0x501ef2};};Object[a148_0x596f8a(0xd2)](exports,a148_0x596f8a(0xd7),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a148_0x596f8a(0xd1)),core_1=require('../../../../core'),xml_v2_1=require('../utils/xml-v2'),child_types_1=__importDefault(require('../data/child-types')),child_types_map_1=__importDefault(require(a148_0x596f8a(0xd3))),path_1=__importDefault(require(a148_0x596f8a(0xca)));function a148_0x3d33(_0x22c7b0,_0x4cfbab){const _0x438a80=a148_0x53a3();return a148_0x3d33=function(_0xe8f053,_0x1cfaca){_0xe8f053=_0xe8f053-0xc0;let _0x53a3d4=_0x438a80[_0xe8f053];return _0x53a3d4;},a148_0x3d33(_0x22c7b0,_0x4cfbab);}class MDApiRemover{constructor(_0x5465fc,_0x5702f0){const _0x15450b=a148_0x596f8a;this[_0x15450b(0xc5)]=_0x5465fc,this[_0x15450b(0xd0)]=_0x5702f0,this[_0x15450b(0xc9)]=_0x15450b(0xf5),this[_0x15450b(0xdc)]='site-meta.xml',this[_0x15450b(0xcb)]=0x64,this[_0x15450b(0xdd)]=new core_1[(_0x15450b(0xf3))](MDApiRemover[_0x15450b(0xcc)]),this[_0x15450b(0xe9)]={};}async[a148_0x596f8a(0xde)](_0x1f206d){const _0x54e229=a148_0x596f8a,_0x1a3ee1=path_1[_0x54e229(0xc4)][_0x54e229(0xfb)](this[_0x54e229(0xd0)],_0x1f206d[_0x54e229(0xca)]),_0x1df949=path_1[_0x54e229(0xc4)]['join'](this[_0x54e229(0xd0)],''+_0x1f206d[_0x54e229(0xca)]+this[_0x54e229(0xc9)]);this['parentComponents'][_0x1f206d['path']]&&delete this['parentComponents'][_0x1f206d[_0x54e229(0xca)]];const _0x42dec0=await fs_internal_1['FS'][_0x54e229(0xce)](_0x1a3ee1)['catch'](()=>![]);if(_0x42dec0){this['logger'][_0x54e229(0xc3)]('remove\x20component\x20directory\x20%s\x20[%s]',_0x1a3ee1,_0x1f206d[_0x54e229(0xc2)]),await fs_internal_1['FS'][_0x54e229(0xf2)](_0x1a3ee1);_0x1f206d[_0x54e229(0xc2)]==='ExperienceBundle'?await fs_internal_1['FS'][_0x54e229(0xc6)](''+_0x1a3ee1+this[_0x54e229(0xdc)])[_0x54e229(0xd5)](()=>void 0x0):(this[_0x54e229(0xdd)][_0x54e229(0xc3)]('remove\x20component\x20directory\x20%s\x20[%s]\x20meta\x20file',_0x1a3ee1,_0x1f206d[_0x54e229(0xc2)]),await fs_internal_1['FS'][_0x54e229(0xc6)](''+_0x1a3ee1+this[_0x54e229(0xc9)])['catch'](()=>void 0x0));return;}this[_0x54e229(0xdd)]['log'](_0x54e229(0xe4),_0x1a3ee1,_0x1f206d[_0x54e229(0xc2)]),await Promise[_0x54e229(0xcf)]([fs_internal_1['FS'][_0x54e229(0xc6)](_0x1a3ee1),fs_internal_1['FS'][_0x54e229(0xc6)](_0x1df949)]);}async['removeChild'](_0x218709){const _0x58850c=a148_0x596f8a,{fileName:_0x4fa874,type:_0x23319a,path:_0x40a6b2}=_0x218709,_0x42caf6=child_types_map_1[_0x58850c(0xc4)][_0x23319a];if(!_0x42caf6)throw new Error(_0x58850c(0xc0)+_0x23319a);if(!this[_0x58850c(0xe9)][_0x40a6b2]){const _0x1be79c=path_1[_0x58850c(0xc4)][_0x58850c(0xfb)](this[_0x58850c(0xd0)],_0x40a6b2),_0x247227=await fs_internal_1['FS'][_0x58850c(0xee)](_0x1be79c);if(!_0x247227)return;const _0x14b99a=await fs_internal_1['FS']['readFile'](_0x1be79c);this[_0x58850c(0xe9)][_0x40a6b2]=await xml_v2_1['XmlV2'][_0x58850c(0xfa)](_0x14b99a);}const _0x2097b7=this['parentComponents'][_0x40a6b2],_0x1c5f60=_0x4fa874[_0x58850c(0xf6)]('.')['pop']();xml_v2_1[_0x58850c(0xe8)][_0x58850c(0xe6)](_0x2097b7,_0x42caf6,_0x1c5f60||_0x4fa874),xml_v2_1[_0x58850c(0xe8)]['isEmptyXml'](_0x2097b7)?(this[_0x58850c(0xdd)][_0x58850c(0xc3)](_0x58850c(0xf0),_0x218709[_0x58850c(0xca)],_0x218709[_0x58850c(0xdf)]),await this[_0x58850c(0xde)](_0x218709),delete this['parentComponents'][_0x40a6b2]):this[_0x58850c(0xe9)][_0x40a6b2]=_0x2097b7;}async[a148_0x596f8a(0xd9)](){const _0x16ca29=a148_0x596f8a;!await fs_internal_1['FS'][_0x16ca29(0xee)](this[_0x16ca29(0xd0)])&&await fs_internal_1['FS'][_0x16ca29(0xeb)](this[_0x16ca29(0xd0)]);for(const _0x4ddb37 of this[_0x16ca29(0xc5)]){!child_types_1[_0x16ca29(0xc4)]['includes'](_0x4ddb37[_0x16ca29(0xc2)])?(this['logger'][_0x16ca29(0xc3)](_0x16ca29(0xef),_0x4ddb37[_0x16ca29(0xdf)],_0x4ddb37[_0x16ca29(0xc2)]),await this[_0x16ca29(0xde)](_0x4ddb37)):(this[_0x16ca29(0xdd)]['log'](_0x16ca29(0xc8),_0x4ddb37[_0x16ca29(0xdf)],_0x4ddb37[_0x16ca29(0xc2)]),await this[_0x16ca29(0xf7)](_0x4ddb37));}const _0x33bc6f=Object[_0x16ca29(0xd6)](this[_0x16ca29(0xe9)]);this[_0x16ca29(0xdd)]['log'](_0x16ca29(0xe3),this['components'][_0x16ca29(0xea)]);while(_0x33bc6f[_0x16ca29(0xea)]){const _0x42993c=_0x33bc6f[_0x16ca29(0xfc)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x12faaf of _0x42993c){await fs_internal_1['FS'][_0x16ca29(0xc1)](path_1[_0x16ca29(0xc4)][_0x16ca29(0xfb)](this[_0x16ca29(0xd0)],_0x12faaf),xml_v2_1['XmlV2'][_0x16ca29(0xcd)](this[_0x16ca29(0xe9)][_0x12faaf]));}}this[_0x16ca29(0xe9)]={};}}function a148_0x53a3(){const _0x56f29f=['1824aYLodr','9606270WqJgfI','exists','remove\x20parent\x20component\x20%s\x20[%s]','remove\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','10356AWkIvs','removeDir','Logger','121OAcVBD','-meta.xml','split','removeChild','(((.+)+)+)+$','5UUlcWZ','parse','join','splice','Unknown\x20child\x20type\x20','writeFile','type','log','default','components','removeFile','apply','remove\x20child\x20component\x20%s\x20[%s]','META_EXTENSION','path','MAX_WRITES_PER_TICK','name','convertToString','isDir','all','sourceDir','../../internal/fs.internal','defineProperty','../data/child-types-map','2518236litTDO','catch','keys','__esModule','toString','start','search','2834610tGJKkP','META_EXPERIENCE_BUNDLE','logger','removeParent','fileName','constructor','1SVwbbX','5818384IzxtHQ','have\x20to\x20update\x20%d\x20files','remove\x20component\x20\x20%s\x20[%s]','275422whohee','removeAt','873242VVEDYu','XmlV2','parentComponents','length','makeDir'];a148_0x53a3=function(){return _0x56f29f;};return a148_0x53a3();}exports['MDApiRemover']=MDApiRemover;