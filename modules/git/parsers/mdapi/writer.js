const a149_0x1a0c18=a149_0x4aee;(function(_0x102c56,_0x5bc6e5){const _0x444825=a149_0x4aee,_0x4356bf=_0x102c56();while(!![]){try{const _0x19e965=-parseInt(_0x444825(0xf2))/0x1+parseInt(_0x444825(0x105))/0x2+-parseInt(_0x444825(0x108))/0x3*(-parseInt(_0x444825(0xef))/0x4)+parseInt(_0x444825(0x10e))/0x5*(parseInt(_0x444825(0xdc))/0x6)+parseInt(_0x444825(0x10f))/0x7+-parseInt(_0x444825(0x100))/0x8*(parseInt(_0x444825(0x103))/0x9)+parseInt(_0x444825(0xf0))/0xa*(parseInt(_0x444825(0x114))/0xb);if(_0x19e965===_0x5bc6e5)break;else _0x4356bf['push'](_0x4356bf['shift']());}catch(_0x4e78c6){_0x4356bf['push'](_0x4356bf['shift']());}}}(a149_0x42e0,0x6f898));const a149_0x3cb0e6=(function(){let _0x375b07=!![];return function(_0xf1db69,_0x5c568e){const _0x79f4cf=_0x375b07?function(){const _0x517098=a149_0x4aee;if(_0x5c568e){const _0x55d310=_0x5c568e[_0x517098(0x116)](_0xf1db69,arguments);return _0x5c568e=null,_0x55d310;}}:function(){};return _0x375b07=![],_0x79f4cf;};}()),a149_0x17ac43=a149_0x3cb0e6(this,function(){const _0x24fd51=a149_0x4aee;return a149_0x17ac43[_0x24fd51(0xf5)]()[_0x24fd51(0xe1)]('(((.+)+)+)+$')[_0x24fd51(0xf5)]()[_0x24fd51(0xe8)](a149_0x17ac43)[_0x24fd51(0xe1)]('(((.+)+)+)+$');});a149_0x17ac43();function a149_0x42e0(){const _0x1c8f27=['301521FWjNFm','length','apply','readZip','skipChildErrors','makeDir','nodebuffer','3390HQGqZM','].\x20Original\x20error:\x20','path','push','async','search','../errors/invalid-xml.error','InvalidXmlError','writeFile','exists','components','keys','constructor','Zip','fileName','internalLogger','../../../../core','splice','files','4HoHCRN','10AlXNCl','handleXmlParsingError','337491HtFekT','replaceOrAppend','defineProperty','toString','sourceDir','log','fileType','readFile','writeChild','body','default','text','parentComponents','writeParent','4856672AJycrD','convertToString','__esModule','9jhJrnG','name','227500BaHnbs','includes','parse','572091ETHcmv','__importDefault','map','../data/child-types','dir','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','6730hWBkSe','2163581jmypnG','unzip','XmlV2','join','catch'];a149_0x42e0=function(){return _0x1c8f27;};return a149_0x42e0();}'use strict';function a149_0x4aee(_0x45c96f,_0x428d5c){const _0x2ead8a=a149_0x42e0();return a149_0x4aee=function(_0x17ac43,_0x3cb0e6){_0x17ac43=_0x17ac43-0xd8;let _0x42e076=_0x2ead8a[_0x17ac43];return _0x42e076;},a149_0x4aee(_0x45c96f,_0x428d5c);}var __importDefault=this&&this[a149_0x1a0c18(0x109)]||function(_0x5e8bfa){const _0x44c8b7=a149_0x1a0c18;return _0x5e8bfa&&_0x5e8bfa[_0x44c8b7(0x102)]?_0x5e8bfa:{'default':_0x5e8bfa};};Object[a149_0x1a0c18(0xf4)](exports,a149_0x1a0c18(0x102),{'value':!![]}),exports['MDApiWriter']=void 0x0;const path_1=__importDefault(require(a149_0x1a0c18(0xde))),core_1=require(a149_0x1a0c18(0xec)),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require(a149_0x1a0c18(0xe2)),xml_v2_1=require('../utils/xml-v2'),zip_1=require('../utils/zip'),child_types_1=__importDefault(require(a149_0x1a0c18(0x10b)));class MDApiWriter{constructor({components:_0x18c940,sourceDir:_0x8c2f15,skipChildErrors:_0x3e5ffd}){const _0x485411=a149_0x1a0c18;this['MAX_WRITES_PER_TICK']=0x64,this['parentComponents']={},this[_0x485411(0xeb)]=new core_1['Logger'](MDApiWriter[_0x485411(0x104)]),this['components']=_0x18c940,this[_0x485411(0xf6)]=_0x8c2f15,this[_0x485411(0xd9)]=_0x3e5ffd;}async[a149_0x1a0c18(0xd8)](_0x554b51,_0x504765=![]){const _0x46542e=a149_0x1a0c18,_0x2879ce=await zip_1[_0x46542e(0xe9)][_0x46542e(0x110)](_0x554b51),_0x470e11=[];for(const _0x1d2912 of Object[_0x46542e(0xe7)](_0x2879ce[_0x46542e(0xee)])){!_0x2879ce['files'][_0x1d2912][_0x46542e(0x10c)]&&_0x470e11[_0x46542e(0xdf)]({'filename':_0x1d2912,'body':await _0x2879ce['files'][_0x1d2912][_0x46542e(0xe0)](_0x504765?_0x46542e(0xdb):_0x46542e(0xfd))});}return _0x470e11;}async[a149_0x1a0c18(0xff)](_0x353ad3){const _0x22791d=a149_0x1a0c18;try{const _0x3594af=await this[_0x22791d(0xd8)](_0x353ad3[_0x22791d(0xfb)],!![]);await Promise['all'](_0x3594af[_0x22791d(0x10a)](({filename:_0x127767,body:_0x33d606})=>fs_internal_1['FS']['writeFile'](path_1['default'][_0x22791d(0x112)](this[_0x22791d(0xf6)],_0x127767),_0x33d606)));}catch(_0x43f245){throw new Error('[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x353ad3['fileName']+'\x20['+_0x353ad3[_0x22791d(0xf8)]+_0x22791d(0xdd)+_0x43f245);}}[a149_0x1a0c18(0xf1)](_0x253b81,_0x464443){const _0x5d3cfa=a149_0x1a0c18;throw new invalid_xml_error_1[(_0x5d3cfa(0xe3))](_0x5d3cfa(0x10d)+_0x464443[_0x5d3cfa(0xea)]+'\x20['+_0x464443[_0x5d3cfa(0xf8)]+_0x5d3cfa(0xdd)+_0x253b81);}async[a149_0x1a0c18(0xfa)](_0x59ba78){const _0x81928f=a149_0x1a0c18,{filename:_0x5744f1,body:_0x5dfd5b}=(await this[_0x81928f(0xd8)](_0x59ba78[_0x81928f(0xfb)]))[0x0];try{if(!this[_0x81928f(0xfe)][_0x5744f1]){const _0x3de9cb=path_1['default'][_0x81928f(0x112)](this[_0x81928f(0xf6)],_0x5744f1);if(await fs_internal_1['FS']['exists'](_0x3de9cb)){const _0x31fbd0=await fs_internal_1['FS'][_0x81928f(0xf9)](_0x3de9cb);this[_0x81928f(0xfe)][_0x5744f1]=await xml_v2_1['XmlV2'][_0x81928f(0x107)](_0x31fbd0)['catch'](_0x31b882=>this['handleXmlParsingError'](_0x31b882,_0x59ba78));}else{this[_0x81928f(0xfe)][_0x5744f1]=await xml_v2_1[_0x81928f(0x111)]['parse'](_0x5dfd5b)[_0x81928f(0x113)](_0xfe9723=>this[_0x81928f(0xf1)](_0xfe9723,_0x59ba78));return;}}const _0x35e539=this[_0x81928f(0xfe)][_0x5744f1],_0x58ebe4=await xml_v2_1[_0x81928f(0x111)][_0x81928f(0x107)](_0x5dfd5b)[_0x81928f(0x113)](_0x275eeb=>this[_0x81928f(0xf1)](_0x275eeb,_0x59ba78));xml_v2_1[_0x81928f(0x111)][_0x81928f(0xf3)](_0x35e539,_0x58ebe4);}catch(_0x7d45d3){if(_0x7d45d3 instanceof invalid_xml_error_1[_0x81928f(0xe3)]){if(this['skipChildErrors'])return;else throw _0x7d45d3;}throw new Error('[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x59ba78[_0x81928f(0xea)]+'\x20['+_0x59ba78[_0x81928f(0xf8)]+_0x81928f(0xdd)+_0x7d45d3);}}async['start'](){const _0x16460f=a149_0x1a0c18;!await fs_internal_1['FS'][_0x16460f(0xe5)](this['sourceDir'])&&await fs_internal_1['FS'][_0x16460f(0xda)](this[_0x16460f(0xf6)]);for(const _0x294b7c of this[_0x16460f(0xe6)]){!child_types_1[_0x16460f(0xfc)][_0x16460f(0x106)](_0x294b7c[_0x16460f(0xf8)])?await this['writeParent'](_0x294b7c):await this[_0x16460f(0xfa)](_0x294b7c);}const _0x488b76=Object[_0x16460f(0xe7)](this[_0x16460f(0xfe)]);this[_0x16460f(0xeb)][_0x16460f(0xf7)]('have\x20to\x20write\x20%d\x20files',this['components'][_0x16460f(0x115)]);while(_0x488b76['length']){const _0x17235c=_0x488b76[_0x16460f(0xed)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x4d70d8 of _0x17235c){await fs_internal_1['FS'][_0x16460f(0xe4)](path_1[_0x16460f(0xfc)][_0x16460f(0x112)](this[_0x16460f(0xf6)],_0x4d70d8),xml_v2_1[_0x16460f(0x111)][_0x16460f(0x101)](this['parentComponents'][_0x4d70d8]));}}this[_0x16460f(0xfe)]={};}}exports['MDApiWriter']=MDApiWriter;