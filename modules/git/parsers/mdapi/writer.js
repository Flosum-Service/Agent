const a116_0x4a248d=a116_0x4dd0;(function(_0x453ba6,_0x5917a4){const _0x220ebb=a116_0x4dd0,_0x4a6065=_0x453ba6();while(!![]){try{const _0x4d60b9=parseInt(_0x220ebb(0xae))/0x1+parseInt(_0x220ebb(0xbf))/0x2*(parseInt(_0x220ebb(0xcc))/0x3)+parseInt(_0x220ebb(0xe5))/0x4+-parseInt(_0x220ebb(0xb9))/0x5*(-parseInt(_0x220ebb(0xdb))/0x6)+-parseInt(_0x220ebb(0xe6))/0x7*(parseInt(_0x220ebb(0xd1))/0x8)+parseInt(_0x220ebb(0xd3))/0x9*(-parseInt(_0x220ebb(0xd8))/0xa)+-parseInt(_0x220ebb(0xc8))/0xb;if(_0x4d60b9===_0x5917a4)break;else _0x4a6065['push'](_0x4a6065['shift']());}catch(_0x440195){_0x4a6065['push'](_0x4a6065['shift']());}}}(a116_0x40d4,0xe8616));function a116_0x4dd0(_0x157ea3,_0x2b285c){const _0x66e641=a116_0x40d4();return a116_0x4dd0=function(_0x5b6aa7,_0x5364fc){_0x5b6aa7=_0x5b6aa7-0xac;let _0x40d429=_0x66e641[_0x5b6aa7];return _0x40d429;},a116_0x4dd0(_0x157ea3,_0x2b285c);}function a116_0x40d4(){const _0x279749=['writeFile','67722xBwrJj','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','join','includes','Logger','82952JIMuEQ','search','41751GulvSA','skipChildErrors','components','unzip','toString','2890pvJqSj','apply','start','83442oLKQNU','async','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','nodebuffer','name','log','default','__esModule','MAX_WRITES_PER_TICK','length','6987324UFhYCl','721KkFoaO','parentComponents','../../internal/fs.internal','readZip','exists','fileType','../utils/xml','have\x20to\x20write\x20%d\x20files','parse','../../../../core','1513247TGceNd','body','replaceOrAppend','writeParent','text','writeChild','Xml','catch','../data/child-types','fileName','../errors/invalid-xml.error','365vpTHRj','(((.+)+)+)+$','sourceDir','handleXmlParsingError','__importDefault','].\x20Original\x20error:\x20','90pZxzSX','MDApiWriter','path','keys','constructor','files','internalLogger','convertToString','splice','21236721zHLpWV','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','map'];a116_0x40d4=function(){return _0x279749;};return a116_0x40d4();}const a116_0x5364fc=(function(){let _0x3f38a5=!![];return function(_0x203386,_0xb69b65){const _0x5e6340=_0x3f38a5?function(){const _0x131565=a116_0x4dd0;if(_0xb69b65){const _0x7f70ee=_0xb69b65[_0x131565(0xd9)](_0x203386,arguments);return _0xb69b65=null,_0x7f70ee;}}:function(){};return _0x3f38a5=![],_0x5e6340;};}()),a116_0x5b6aa7=a116_0x5364fc(this,function(){const _0x34649d=a116_0x4dd0;return a116_0x5b6aa7[_0x34649d(0xd7)]()[_0x34649d(0xd2)](_0x34649d(0xba))[_0x34649d(0xd7)]()[_0x34649d(0xc3)](a116_0x5b6aa7)[_0x34649d(0xd2)](_0x34649d(0xba));});a116_0x5b6aa7();'use strict';var __importDefault=this&&this[a116_0x4a248d(0xbd)]||function(_0x4f76d8){const _0x53321b=a116_0x4a248d;return _0x4f76d8&&_0x4f76d8[_0x53321b(0xe2)]?_0x4f76d8:{'default':_0x4f76d8};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a116_0x4a248d(0xc0)]=void 0x0;const path_1=__importDefault(require(a116_0x4a248d(0xc1))),core_1=require(a116_0x4a248d(0xad)),fs_internal_1=require(a116_0x4a248d(0xe8)),invalid_xml_error_1=require(a116_0x4a248d(0xb8)),xml_1=require(a116_0x4a248d(0xec)),zip_1=require('../utils/zip'),child_types_1=__importDefault(require(a116_0x4a248d(0xb6)));class MDApiWriter{constructor({components:_0x44f9a5,sourceDir:_0x477f46,skipChildErrors:_0x1afc8c}){const _0x9a1cbe=a116_0x4a248d;this[_0x9a1cbe(0xe3)]=0x64,this[_0x9a1cbe(0xe7)]={},this[_0x9a1cbe(0xc5)]=new core_1[(_0x9a1cbe(0xd0))](MDApiWriter[_0x9a1cbe(0xdf)]),this[_0x9a1cbe(0xd5)]=_0x44f9a5,this['sourceDir']=_0x477f46,this[_0x9a1cbe(0xd4)]=_0x1afc8c;}async['readZip'](_0x513a80,_0x200518=![]){const _0x185675=a116_0x4a248d,_0x56e935=await zip_1['Zip'][_0x185675(0xd6)](_0x513a80),_0x37d4aa=[];for(const _0x2e29d3 of Object[_0x185675(0xc2)](_0x56e935[_0x185675(0xc4)])){!_0x56e935[_0x185675(0xc4)][_0x2e29d3]['dir']&&_0x37d4aa['push']({'filename':_0x2e29d3,'body':await _0x56e935[_0x185675(0xc4)][_0x2e29d3][_0x185675(0xdc)](_0x200518?_0x185675(0xde):_0x185675(0xb2))});}return _0x37d4aa;}async[a116_0x4a248d(0xb1)](_0x84745){const _0x2acb35=a116_0x4a248d;try{const _0x567376=await this[_0x2acb35(0xe9)](_0x84745[_0x2acb35(0xaf)],!![]);await Promise['all'](_0x567376[_0x2acb35(0xca)](({filename:_0x5550dd,body:_0x1d0197})=>fs_internal_1['FS'][_0x2acb35(0xcb)](path_1[_0x2acb35(0xe1)][_0x2acb35(0xce)](this['sourceDir'],_0x5550dd),_0x1d0197)));}catch(_0x2784af){throw new Error(_0x2acb35(0xcd)+_0x84745[_0x2acb35(0xb7)]+'\x20['+_0x84745['fileType']+'].\x20Original\x20error:\x20'+_0x2784af);}}['handleXmlParsingError'](_0x4e24eb,_0x59d519){const _0x3c1645=a116_0x4a248d;throw new invalid_xml_error_1['InvalidXmlError'](_0x3c1645(0xc9)+_0x59d519[_0x3c1645(0xb7)]+'\x20['+_0x59d519['fileType']+_0x3c1645(0xbe)+_0x4e24eb);}async['writeChild'](_0x4532a1){const _0x3b8b1c=a116_0x4a248d,{filename:_0xf2c823,body:_0xa8a6c1}=(await this[_0x3b8b1c(0xe9)](_0x4532a1[_0x3b8b1c(0xaf)]))[0x0];try{if(!this[_0x3b8b1c(0xe7)][_0xf2c823]){const _0x24b967=path_1[_0x3b8b1c(0xe1)]['join'](this[_0x3b8b1c(0xbb)],_0xf2c823);if(await fs_internal_1['FS']['exists'](_0x24b967)){const _0x418287=await fs_internal_1['FS']['readFile'](_0x24b967);this[_0x3b8b1c(0xe7)][_0xf2c823]=await xml_1['Xml'][_0x3b8b1c(0xac)](_0x418287)[_0x3b8b1c(0xb5)](_0x48bc8e=>this[_0x3b8b1c(0xbc)](_0x48bc8e,_0x4532a1));}else{this['parentComponents'][_0xf2c823]=await xml_1[_0x3b8b1c(0xb4)][_0x3b8b1c(0xac)](_0xa8a6c1)['catch'](_0x1b4839=>this[_0x3b8b1c(0xbc)](_0x1b4839,_0x4532a1));return;}}const _0x4779c1=this[_0x3b8b1c(0xe7)][_0xf2c823],_0x18293d=await xml_1['Xml']['parse'](_0xa8a6c1)['catch'](_0xb91f96=>this[_0x3b8b1c(0xbc)](_0xb91f96,_0x4532a1));xml_1['Xml'][_0x3b8b1c(0xb0)](_0x4779c1,_0x18293d);}catch(_0x558899){if(_0x558899 instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0x3b8b1c(0xd4)])return;else throw _0x558899;}throw new Error(_0x3b8b1c(0xdd)+_0x4532a1[_0x3b8b1c(0xb7)]+'\x20['+_0x4532a1[_0x3b8b1c(0xeb)]+_0x3b8b1c(0xbe)+_0x558899);}}async[a116_0x4a248d(0xda)](){const _0x3bbd0a=a116_0x4a248d;!await fs_internal_1['FS'][_0x3bbd0a(0xea)](this[_0x3bbd0a(0xbb)])&&await fs_internal_1['FS']['makeDir'](this['sourceDir']);for(const _0x412a0a of this[_0x3bbd0a(0xd5)]){!child_types_1[_0x3bbd0a(0xe1)][_0x3bbd0a(0xcf)](_0x412a0a['fileType'])?await this[_0x3bbd0a(0xb1)](_0x412a0a):await this[_0x3bbd0a(0xb3)](_0x412a0a);}const _0x6530e3=Object[_0x3bbd0a(0xc2)](this[_0x3bbd0a(0xe7)]);this['internalLogger'][_0x3bbd0a(0xe0)](_0x3bbd0a(0xed),this['components'][_0x3bbd0a(0xe4)]);while(_0x6530e3['length']){const _0x3b018b=_0x6530e3[_0x3bbd0a(0xc7)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x5245d3 of _0x3b018b){await fs_internal_1['FS'][_0x3bbd0a(0xcb)](path_1[_0x3bbd0a(0xe1)][_0x3bbd0a(0xce)](this[_0x3bbd0a(0xbb)],_0x5245d3),xml_1['Xml'][_0x3bbd0a(0xc6)](this[_0x3bbd0a(0xe7)][_0x5245d3]));}}this[_0x3bbd0a(0xe7)]={};}}exports['MDApiWriter']=MDApiWriter;