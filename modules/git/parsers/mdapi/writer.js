const a101_0x1aeb8a=a101_0x1d9c;(function(_0x3eaf73,_0x195636){const _0x1d012f=a101_0x1d9c,_0x5c9670=_0x3eaf73();while(!![]){try{const _0x53ce61=-parseInt(_0x1d012f(0x1df))/0x1*(parseInt(_0x1d012f(0x1e2))/0x2)+parseInt(_0x1d012f(0x1d8))/0x3*(parseInt(_0x1d012f(0x208))/0x4)+parseInt(_0x1d012f(0x1d9))/0x5+parseInt(_0x1d012f(0x1ce))/0x6*(-parseInt(_0x1d012f(0x203))/0x7)+parseInt(_0x1d012f(0x1d1))/0x8+-parseInt(_0x1d012f(0x205))/0x9*(parseInt(_0x1d012f(0x1de))/0xa)+-parseInt(_0x1d012f(0x1e1))/0xb;if(_0x53ce61===_0x195636)break;else _0x5c9670['push'](_0x5c9670['shift']());}catch(_0x1d800e){_0x5c9670['push'](_0x5c9670['shift']());}}}(a101_0x34ef,0xd9d4f));const a101_0x3a127f=(function(){let _0x1d871d=!![];return function(_0xda50b5,_0xd14c75){const _0x56a7e4=_0x1d871d?function(){const _0x3071bf=a101_0x1d9c;if(_0xd14c75){const _0x30c21f=_0xd14c75[_0x3071bf(0x1f2)](_0xda50b5,arguments);return _0xd14c75=null,_0x30c21f;}}:function(){};return _0x1d871d=![],_0x56a7e4;};}()),a101_0x4f97dc=a101_0x3a127f(this,function(){const _0x2531b8=a101_0x1d9c;return a101_0x4f97dc[_0x2531b8(0x1dd)]()[_0x2531b8(0x1e3)](_0x2531b8(0x1ec))[_0x2531b8(0x1dd)]()['constructor'](a101_0x4f97dc)[_0x2531b8(0x1e3)]('(((.+)+)+)+$');});function a101_0x34ef(){const _0x3f86fb=['../errors/invalid-xml.error','exists','384nwNLJx','readZip','unzip','10471320gDqOqt','replaceOrAppend','dir','nodebuffer','writeParent','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','splice','9tonuNa','3670325wAMLYu','__esModule','InvalidXmlError','parse','toString','470410DkhxUm','1218853qeACHU','push','575894JaioPr','2iWjLsW','search','all','readFile','have\x20to\x20write\x20%d\x20files','writeFile','map','MDApiWriter','body','defineProperty','(((.+)+)+)+$','includes','components','__importDefault','handleXmlParsingError','Xml','apply','../utils/xml','../../internal/fs.internal','internalLogger','parentComponents','catch','makeDir','sourceDir','Logger','join','length','../utils/zip','writeChild','async','MAX_WRITES_PER_TICK','default','].\x20Original\x20error:\x20','91cUeyWc','fileType','171wXVsOt','fileName','skipChildErrors','1353436WtbjNx','name','keys','files','Zip','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'];a101_0x34ef=function(){return _0x3f86fb;};return a101_0x34ef();}a101_0x4f97dc();'use strict';var __importDefault=this&&this[a101_0x1aeb8a(0x1ef)]||function(_0x2f4d05){const _0x37997b=a101_0x1aeb8a;return _0x2f4d05&&_0x2f4d05[_0x37997b(0x1da)]?_0x2f4d05:{'default':_0x2f4d05};};Object[a101_0x1aeb8a(0x1eb)](exports,'__esModule',{'value':!![]}),exports[a101_0x1aeb8a(0x1e9)]=void 0x0;function a101_0x1d9c(_0x5703f5,_0x4ee985){const _0x5a526c=a101_0x34ef();return a101_0x1d9c=function(_0x4f97dc,_0x3a127f){_0x4f97dc=_0x4f97dc-0x1c9;let _0x34ef64=_0x5a526c[_0x4f97dc];return _0x34ef64;},a101_0x1d9c(_0x5703f5,_0x4ee985);}const path_1=__importDefault(require('path')),core_1=require('../../../../core'),fs_internal_1=require(a101_0x1aeb8a(0x1f4)),invalid_xml_error_1=require(a101_0x1aeb8a(0x1cc)),xml_1=require(a101_0x1aeb8a(0x1f3)),zip_1=require(a101_0x1aeb8a(0x1fd)),child_types_1=__importDefault(require('../data/child-types'));class MDApiWriter{constructor({components:_0x1059de,sourceDir:_0x51fd2e,skipChildErrors:_0x8175ad}){const _0x11e5ea=a101_0x1aeb8a;this[_0x11e5ea(0x200)]=0x64,this[_0x11e5ea(0x1f6)]={},this[_0x11e5ea(0x1f5)]=new core_1[(_0x11e5ea(0x1fa))](MDApiWriter[_0x11e5ea(0x209)]),this[_0x11e5ea(0x1ee)]=_0x1059de,this[_0x11e5ea(0x1f9)]=_0x51fd2e,this[_0x11e5ea(0x207)]=_0x8175ad;}async['readZip'](_0x1cd835,_0x345336=![]){const _0x50e468=a101_0x1aeb8a,_0x2fd657=await zip_1[_0x50e468(0x1ca)][_0x50e468(0x1d0)](_0x1cd835),_0x5d703b=[];for(const _0x268609 of Object[_0x50e468(0x20a)](_0x2fd657['files'])){!_0x2fd657[_0x50e468(0x1c9)][_0x268609][_0x50e468(0x1d3)]&&_0x5d703b[_0x50e468(0x1e0)]({'filename':_0x268609,'body':await _0x2fd657['files'][_0x268609][_0x50e468(0x1ff)](_0x345336?_0x50e468(0x1d4):'text')});}return _0x5d703b;}async[a101_0x1aeb8a(0x1d5)](_0x475212){const _0x394200=a101_0x1aeb8a;try{const _0x44aef1=await this[_0x394200(0x1cf)](_0x475212[_0x394200(0x1ea)],!![]);await Promise[_0x394200(0x1e4)](_0x44aef1[_0x394200(0x1e8)](({filename:_0x42d12e,body:_0x989241})=>fs_internal_1['FS'][_0x394200(0x1e7)](path_1[_0x394200(0x201)][_0x394200(0x1fb)](this[_0x394200(0x1f9)],_0x42d12e),_0x989241)));}catch(_0xdb5d73){throw new Error(_0x394200(0x1d6)+_0x475212[_0x394200(0x206)]+'\x20['+_0x475212[_0x394200(0x204)]+_0x394200(0x202)+_0xdb5d73);}}[a101_0x1aeb8a(0x1f0)](_0x367695,_0x587e90){const _0x1e595e=a101_0x1aeb8a;throw new invalid_xml_error_1[(_0x1e595e(0x1db))]('[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20'+_0x587e90[_0x1e595e(0x206)]+'\x20['+_0x587e90[_0x1e595e(0x204)]+'].\x20Original\x20error:\x20'+_0x367695);}async[a101_0x1aeb8a(0x1fe)](_0x5f0046){const _0xce5314=a101_0x1aeb8a,{filename:_0x521a76,body:_0x4cb791}=(await this['readZip'](_0x5f0046[_0xce5314(0x1ea)]))[0x0];try{if(!this[_0xce5314(0x1f6)][_0x521a76]){const _0x30c7f8=path_1['default']['join'](this[_0xce5314(0x1f9)],_0x521a76);if(await fs_internal_1['FS'][_0xce5314(0x1cd)](_0x30c7f8)){const _0xe1720e=await fs_internal_1['FS'][_0xce5314(0x1e5)](_0x30c7f8);this[_0xce5314(0x1f6)][_0x521a76]=await xml_1[_0xce5314(0x1f1)][_0xce5314(0x1dc)](_0xe1720e)['catch'](_0x1ed8ab=>this['handleXmlParsingError'](_0x1ed8ab,_0x5f0046));}else{this['parentComponents'][_0x521a76]=await xml_1[_0xce5314(0x1f1)][_0xce5314(0x1dc)](_0x4cb791)[_0xce5314(0x1f7)](_0x4eb05b=>this[_0xce5314(0x1f0)](_0x4eb05b,_0x5f0046));return;}}const _0x3f77c2=this[_0xce5314(0x1f6)][_0x521a76],_0x20f54c=await xml_1[_0xce5314(0x1f1)][_0xce5314(0x1dc)](_0x4cb791)['catch'](_0x158ac6=>this[_0xce5314(0x1f0)](_0x158ac6,_0x5f0046));xml_1[_0xce5314(0x1f1)][_0xce5314(0x1d2)](_0x3f77c2,_0x20f54c);}catch(_0x542eae){if(_0x542eae instanceof invalid_xml_error_1['InvalidXmlError']){if(this['skipChildErrors'])return;else throw _0x542eae;}throw new Error(_0xce5314(0x1cb)+_0x5f0046[_0xce5314(0x206)]+'\x20['+_0x5f0046[_0xce5314(0x204)]+_0xce5314(0x202)+_0x542eae);}}async['start'](){const _0x40c413=a101_0x1aeb8a;!await fs_internal_1['FS']['exists'](this[_0x40c413(0x1f9)])&&await fs_internal_1['FS'][_0x40c413(0x1f8)](this[_0x40c413(0x1f9)]);for(const _0x2df39d of this[_0x40c413(0x1ee)]){!child_types_1[_0x40c413(0x201)][_0x40c413(0x1ed)](_0x2df39d[_0x40c413(0x204)])?await this[_0x40c413(0x1d5)](_0x2df39d):await this[_0x40c413(0x1fe)](_0x2df39d);}const _0x50f703=Object[_0x40c413(0x20a)](this[_0x40c413(0x1f6)]);this[_0x40c413(0x1f5)]['log'](_0x40c413(0x1e6),this[_0x40c413(0x1ee)][_0x40c413(0x1fc)]);while(_0x50f703[_0x40c413(0x1fc)]){const _0x15e1e7=_0x50f703[_0x40c413(0x1d7)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x4b7af1 of _0x15e1e7){await fs_internal_1['FS'][_0x40c413(0x1e7)](path_1[_0x40c413(0x201)][_0x40c413(0x1fb)](this[_0x40c413(0x1f9)],_0x4b7af1),xml_1['Xml']['convertToString'](this[_0x40c413(0x1f6)][_0x4b7af1]));}}this['parentComponents']={};}}exports[a101_0x1aeb8a(0x1e9)]=MDApiWriter;