const a153_0x4b654a=a153_0x45ce;(function(_0x44997a,_0x168abd){const _0x35f024=a153_0x45ce,_0xc37645=_0x44997a();while(!![]){try{const _0x2f6570=-parseInt(_0x35f024(0x168))/0x1+-parseInt(_0x35f024(0x180))/0x2*(-parseInt(_0x35f024(0x14f))/0x3)+parseInt(_0x35f024(0x17b))/0x4+-parseInt(_0x35f024(0x157))/0x5+parseInt(_0x35f024(0x177))/0x6+parseInt(_0x35f024(0x160))/0x7*(-parseInt(_0x35f024(0x185))/0x8)+parseInt(_0x35f024(0x16d))/0x9;if(_0x2f6570===_0x168abd)break;else _0xc37645['push'](_0xc37645['shift']());}catch(_0x17f318){_0xc37645['push'](_0xc37645['shift']());}}}(a153_0x3e97,0x901e0));const a153_0x476b3f=(function(){let _0x5db296=!![];return function(_0x58f3e1,_0x4578e2){const _0x31532d=_0x5db296?function(){const _0x876603=a153_0x45ce;if(_0x4578e2){const _0x3b6653=_0x4578e2[_0x876603(0x15c)](_0x58f3e1,arguments);return _0x4578e2=null,_0x3b6653;}}:function(){};return _0x5db296=![],_0x31532d;};}()),a153_0x42dd66=a153_0x476b3f(this,function(){const _0x35d76d=a153_0x45ce;return a153_0x42dd66[_0x35d76d(0x154)]()['search'](_0x35d76d(0x165))[_0x35d76d(0x154)]()[_0x35d76d(0x17e)](a153_0x42dd66)[_0x35d76d(0x153)](_0x35d76d(0x165));});a153_0x42dd66();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5781aa){return _0x5781aa&&_0x5781aa['__esModule']?_0x5781aa:{'default':_0x5781aa};};Object['defineProperty'](exports,a153_0x4b654a(0x151),{'value':!![]}),exports[a153_0x4b654a(0x164)]=void 0x0;function a153_0x45ce(_0x25991b,_0x3b8661){const _0x2bb4ee=a153_0x3e97();return a153_0x45ce=function(_0x42dd66,_0x476b3f){_0x42dd66=_0x42dd66-0x14f;let _0x3e9760=_0x2bb4ee[_0x42dd66];return _0x3e9760;},a153_0x45ce(_0x25991b,_0x3b8661);}const path_1=__importDefault(require(a153_0x4b654a(0x182))),core_1=require(a153_0x4b654a(0x175)),fs_internal_1=require(a153_0x4b654a(0x166)),invalid_xml_error_1=require('../errors/invalid-xml.error'),xml_v2_1=require(a153_0x4b654a(0x156)),zip_1=require('../utils/zip'),child_types_1=__importDefault(require(a153_0x4b654a(0x15a)));class MDApiWriter{constructor({components:_0x5c2e92,sourceDir:_0x547a31,skipChildErrors:_0x4c9055}){const _0x1614d8=a153_0x4b654a;this[_0x1614d8(0x186)]=0x64,this[_0x1614d8(0x184)]={},this['internalLogger']=new core_1[(_0x1614d8(0x15f))](MDApiWriter[_0x1614d8(0x169)]),this['components']=_0x5c2e92,this[_0x1614d8(0x15e)]=_0x547a31,this[_0x1614d8(0x16c)]=_0x4c9055;}async[a153_0x4b654a(0x17f)](_0x963ac3,_0x552e1e=![]){const _0x96f0b8=a153_0x4b654a,_0x570cda=await zip_1[_0x96f0b8(0x16f)][_0x96f0b8(0x16b)](_0x963ac3),_0x12242c=[];for(const _0x125837 of Object[_0x96f0b8(0x179)](_0x570cda[_0x96f0b8(0x161)])){!_0x570cda['files'][_0x125837][_0x96f0b8(0x162)]&&_0x12242c['push']({'filename':_0x125837,'body':await _0x570cda[_0x96f0b8(0x161)][_0x125837][_0x96f0b8(0x17a)](_0x552e1e?_0x96f0b8(0x167):_0x96f0b8(0x159))});}return _0x12242c;}async[a153_0x4b654a(0x189)](_0x45a477){const _0x311481=a153_0x4b654a;try{const _0x5a80c6=await this['readZip'](_0x45a477[_0x311481(0x187)],!![]);await Promise['all'](_0x5a80c6[_0x311481(0x176)](({filename:_0x1d65b4,body:_0x48d910})=>fs_internal_1['FS'][_0x311481(0x155)](path_1[_0x311481(0x188)][_0x311481(0x15d)](this[_0x311481(0x15e)],_0x1d65b4),_0x48d910)));}catch(_0xd62c00){throw new Error('[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x45a477[_0x311481(0x181)]+'\x20['+_0x45a477['fileType']+'].\x20Original\x20error:\x20'+_0xd62c00);}}[a153_0x4b654a(0x17c)](_0x5bceef,_0x1a117d){const _0xa0383e=a153_0x4b654a;throw new invalid_xml_error_1[(_0xa0383e(0x152))](_0xa0383e(0x18a)+_0x1a117d[_0xa0383e(0x181)]+'\x20['+_0x1a117d[_0xa0383e(0x174)]+_0xa0383e(0x18c)+_0x5bceef);}async[a153_0x4b654a(0x158)](_0x3365b9){const _0x478479=a153_0x4b654a,{filename:_0x8808a9,body:_0x2bb7ed}=(await this[_0x478479(0x17f)](_0x3365b9['body']))[0x0];try{if(!this[_0x478479(0x184)][_0x8808a9]){const _0x429cfe=path_1[_0x478479(0x188)][_0x478479(0x15d)](this[_0x478479(0x15e)],_0x8808a9);if(await fs_internal_1['FS'][_0x478479(0x171)](_0x429cfe)){const _0x3ac2d0=await fs_internal_1['FS']['readFile'](_0x429cfe);this[_0x478479(0x184)][_0x8808a9]=await xml_v2_1[_0x478479(0x178)]['parse'](_0x3ac2d0)[_0x478479(0x163)](_0x46e689=>this['handleXmlParsingError'](_0x46e689,_0x3365b9));}else{this[_0x478479(0x184)][_0x8808a9]=await xml_v2_1[_0x478479(0x178)]['parse'](_0x2bb7ed)[_0x478479(0x163)](_0x9732=>this[_0x478479(0x17c)](_0x9732,_0x3365b9));return;}}const _0x42a21f=this[_0x478479(0x184)][_0x8808a9],_0x32b701=await xml_v2_1['XmlV2'][_0x478479(0x150)](_0x2bb7ed)[_0x478479(0x163)](_0x3814ea=>this['handleXmlParsingError'](_0x3814ea,_0x3365b9));xml_v2_1[_0x478479(0x178)][_0x478479(0x183)](_0x42a21f,_0x32b701);}catch(_0xa97f86){if(_0xa97f86 instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0x478479(0x16c)])return;else throw _0xa97f86;}throw new Error('[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x3365b9[_0x478479(0x181)]+'\x20['+_0x3365b9[_0x478479(0x174)]+_0x478479(0x18c)+_0xa97f86);}}async[a153_0x4b654a(0x173)](){const _0x2623ca=a153_0x4b654a;!await fs_internal_1['FS'][_0x2623ca(0x171)](this['sourceDir'])&&await fs_internal_1['FS'][_0x2623ca(0x16e)](this['sourceDir']);for(const _0x3916b7 of this[_0x2623ca(0x18b)]){!child_types_1[_0x2623ca(0x188)][_0x2623ca(0x15b)](_0x3916b7[_0x2623ca(0x174)])?await this[_0x2623ca(0x189)](_0x3916b7):await this[_0x2623ca(0x158)](_0x3916b7);}const _0x3670a3=Object[_0x2623ca(0x179)](this['parentComponents']);this[_0x2623ca(0x17d)]['log'](_0x2623ca(0x170),this[_0x2623ca(0x18b)][_0x2623ca(0x16a)]);while(_0x3670a3[_0x2623ca(0x16a)]){const _0x527b95=_0x3670a3[_0x2623ca(0x172)](0x0,this[_0x2623ca(0x186)]);for(const _0x2d4b69 of _0x527b95){await fs_internal_1['FS']['writeFile'](path_1['default']['join'](this[_0x2623ca(0x15e)],_0x2d4b69),xml_v2_1['XmlV2']['convertToString'](this[_0x2623ca(0x184)][_0x2d4b69]));}}this[_0x2623ca(0x184)]={};}}function a153_0x3e97(){const _0xca25f7=['1236968BAOBcy','fileName','path','replaceOrAppend','parentComponents','216cLsGnJ','MAX_WRITES_PER_TICK','body','default','writeParent','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','components','].\x20Original\x20error:\x20','3yBOQFc','parse','__esModule','InvalidXmlError','search','toString','writeFile','../utils/xml-v2','1973540gMGeSz','writeChild','text','../data/child-types','includes','apply','join','sourceDir','Logger','98966ShVSDr','files','dir','catch','MDApiWriter','(((.+)+)+)+$','../../internal/fs.internal','nodebuffer','1062938OaYsSZ','name','length','unzip','skipChildErrors','11622204XjlISK','makeDir','Zip','have\x20to\x20write\x20%d\x20files','exists','splice','start','fileType','../../../../core','map','1087188tGxdwZ','XmlV2','keys','async','1354552aABSwE','handleXmlParsingError','internalLogger','constructor','readZip'];a153_0x3e97=function(){return _0xca25f7;};return a153_0x3e97();}exports[a153_0x4b654a(0x164)]=MDApiWriter;