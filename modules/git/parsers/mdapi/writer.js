const a153_0x1c5e6b=a153_0x55b9;function a153_0x5525(){const _0x53f7b3=['parse','187zoaSUG','1894104yMqhXQ','log','readZip','__importDefault','../data/child-types','files','internalLogger','../utils/xml-v2','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','XmlV2','default','parentComponents','writeFile','sourceDir','5yLecDv','body','6jUzXNZ','defineProperty','Zip','].\x20Original\x20error:\x20','Logger','join','includes','unzip','apply','../utils/zip','convertToString','length','(((.+)+)+)+$','search','handleXmlParsingError','nodebuffer','8204910tbxSkK','../../../../core','53566zHHNkR','471890pMNhQY','64HafwUb','dir','writeChild','readFile','MDApiWriter','splice','InvalidXmlError','async','__esModule','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','catch','238570LUOohu','toString','components','exists','MAX_WRITES_PER_TICK','replaceOrAppend','writeParent','538578UjCydp','fileType','map','start','123573gcpNwG','fileName','path','name','keys'];a153_0x5525=function(){return _0x53f7b3;};return a153_0x5525();}(function(_0x588c65,_0x286a1d){const _0x5862d9=a153_0x55b9,_0x237a05=_0x588c65();while(!![]){try{const _0x34436f=parseInt(_0x5862d9(0x103))/0x1*(-parseInt(_0x5862d9(0x117))/0x2)+parseInt(_0x5862d9(0x12f))/0x3+-parseInt(_0x5862d9(0x136))/0x4+-parseInt(_0x5862d9(0x118))/0x5*(-parseInt(_0x5862d9(0x105))/0x6)+parseInt(_0x5862d9(0x115))/0x7+parseInt(_0x5862d9(0x119))/0x8*(parseInt(_0x5862d9(0x12b))/0x9)+-parseInt(_0x5862d9(0x124))/0xa*(parseInt(_0x5862d9(0x135))/0xb);if(_0x34436f===_0x286a1d)break;else _0x237a05['push'](_0x237a05['shift']());}catch(_0x3db6f9){_0x237a05['push'](_0x237a05['shift']());}}}(a153_0x5525,0xbcd31));const a153_0x4d8c5f=(function(){let _0x1d7f05=!![];return function(_0x35da8e,_0x496947){const _0x10d386=_0x1d7f05?function(){const _0x42e403=a153_0x55b9;if(_0x496947){const _0x46d409=_0x496947[_0x42e403(0x10d)](_0x35da8e,arguments);return _0x496947=null,_0x46d409;}}:function(){};return _0x1d7f05=![],_0x10d386;};}()),a153_0x141338=a153_0x4d8c5f(this,function(){const _0x52a0b2=a153_0x55b9;return a153_0x141338[_0x52a0b2(0x125)]()[_0x52a0b2(0x112)]('(((.+)+)+)+$')[_0x52a0b2(0x125)]()['constructor'](a153_0x141338)[_0x52a0b2(0x112)](_0x52a0b2(0x111));});a153_0x141338();'use strict';var __importDefault=this&&this[a153_0x1c5e6b(0xf8)]||function(_0x5e319e){const _0x224118=a153_0x1c5e6b;return _0x5e319e&&_0x5e319e[_0x224118(0x121)]?_0x5e319e:{'default':_0x5e319e};};Object[a153_0x1c5e6b(0x106)](exports,'__esModule',{'value':!![]}),exports[a153_0x1c5e6b(0x11d)]=void 0x0;function a153_0x55b9(_0x4ec623,_0x42686b){const _0x170ec6=a153_0x5525();return a153_0x55b9=function(_0x141338,_0x4d8c5f){_0x141338=_0x141338-0xf8;let _0x5525a1=_0x170ec6[_0x141338];return _0x5525a1;},a153_0x55b9(_0x4ec623,_0x42686b);}const path_1=__importDefault(require(a153_0x1c5e6b(0x131))),core_1=require(a153_0x1c5e6b(0x116)),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require('../errors/invalid-xml.error'),xml_v2_1=require(a153_0x1c5e6b(0xfc)),zip_1=require(a153_0x1c5e6b(0x10e)),child_types_1=__importDefault(require(a153_0x1c5e6b(0xf9)));class MDApiWriter{constructor({components:_0x8daad3,sourceDir:_0xb1f1d8,skipChildErrors:_0x58757c}){const _0x594e81=a153_0x1c5e6b;this[_0x594e81(0x128)]=0x64,this[_0x594e81(0x100)]={},this['internalLogger']=new core_1[(_0x594e81(0x109))](MDApiWriter[_0x594e81(0x132)]),this[_0x594e81(0x126)]=_0x8daad3,this[_0x594e81(0x102)]=_0xb1f1d8,this['skipChildErrors']=_0x58757c;}async[a153_0x1c5e6b(0x138)](_0x3cfac9,_0x521b85=![]){const _0xa44974=a153_0x1c5e6b,_0x196e61=await zip_1[_0xa44974(0x107)][_0xa44974(0x10c)](_0x3cfac9),_0x3eea12=[];for(const _0xd1bac3 of Object['keys'](_0x196e61[_0xa44974(0xfa)])){!_0x196e61[_0xa44974(0xfa)][_0xd1bac3][_0xa44974(0x11a)]&&_0x3eea12['push']({'filename':_0xd1bac3,'body':await _0x196e61[_0xa44974(0xfa)][_0xd1bac3][_0xa44974(0x120)](_0x521b85?_0xa44974(0x114):'text')});}return _0x3eea12;}async[a153_0x1c5e6b(0x12a)](_0x4d8cbd){const _0x1120dc=a153_0x1c5e6b;try{const _0x40bd5b=await this[_0x1120dc(0x138)](_0x4d8cbd['body'],!![]);await Promise['all'](_0x40bd5b[_0x1120dc(0x12d)](({filename:_0x29d715,body:_0x5c50b7})=>fs_internal_1['FS'][_0x1120dc(0x101)](path_1[_0x1120dc(0xff)][_0x1120dc(0x10a)](this[_0x1120dc(0x102)],_0x29d715),_0x5c50b7)));}catch(_0x1b89b0){throw new Error(_0x1120dc(0xfd)+_0x4d8cbd[_0x1120dc(0x130)]+'\x20['+_0x4d8cbd[_0x1120dc(0x12c)]+_0x1120dc(0x108)+_0x1b89b0);}}[a153_0x1c5e6b(0x113)](_0x4c4f88,_0x456515){const _0xde3111=a153_0x1c5e6b;throw new invalid_xml_error_1[(_0xde3111(0x11f))](_0xde3111(0x122)+_0x456515[_0xde3111(0x130)]+'\x20['+_0x456515['fileType']+_0xde3111(0x108)+_0x4c4f88);}async[a153_0x1c5e6b(0x11b)](_0x2548f0){const _0x533ee0=a153_0x1c5e6b,{filename:_0x14c5f2,body:_0x486689}=(await this[_0x533ee0(0x138)](_0x2548f0[_0x533ee0(0x104)]))[0x0];try{if(!this[_0x533ee0(0x100)][_0x14c5f2]){const _0x519746=path_1['default'][_0x533ee0(0x10a)](this[_0x533ee0(0x102)],_0x14c5f2);if(await fs_internal_1['FS'][_0x533ee0(0x127)](_0x519746)){const _0x2d20a5=await fs_internal_1['FS'][_0x533ee0(0x11c)](_0x519746);this[_0x533ee0(0x100)][_0x14c5f2]=await xml_v2_1[_0x533ee0(0xfe)][_0x533ee0(0x134)](_0x2d20a5)['catch'](_0x1a8e86=>this[_0x533ee0(0x113)](_0x1a8e86,_0x2548f0));}else{this[_0x533ee0(0x100)][_0x14c5f2]=await xml_v2_1[_0x533ee0(0xfe)]['parse'](_0x486689)['catch'](_0x166bfd=>this[_0x533ee0(0x113)](_0x166bfd,_0x2548f0));return;}}const _0x3cf638=this[_0x533ee0(0x100)][_0x14c5f2],_0x292710=await xml_v2_1['XmlV2'][_0x533ee0(0x134)](_0x486689)[_0x533ee0(0x123)](_0x49dfbf=>this[_0x533ee0(0x113)](_0x49dfbf,_0x2548f0));xml_v2_1['XmlV2'][_0x533ee0(0x129)](_0x3cf638,_0x292710);}catch(_0x3f5638){if(_0x3f5638 instanceof invalid_xml_error_1['InvalidXmlError']){if(this['skipChildErrors'])return;else throw _0x3f5638;}throw new Error('[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x2548f0['fileName']+'\x20['+_0x2548f0[_0x533ee0(0x12c)]+_0x533ee0(0x108)+_0x3f5638);}}async[a153_0x1c5e6b(0x12e)](){const _0x5c13bb=a153_0x1c5e6b;!await fs_internal_1['FS']['exists'](this['sourceDir'])&&await fs_internal_1['FS']['makeDir'](this[_0x5c13bb(0x102)]);for(const _0x2c8145 of this[_0x5c13bb(0x126)]){!child_types_1['default'][_0x5c13bb(0x10b)](_0x2c8145['fileType'])?await this[_0x5c13bb(0x12a)](_0x2c8145):await this['writeChild'](_0x2c8145);}const _0x15b752=Object[_0x5c13bb(0x133)](this[_0x5c13bb(0x100)]);this[_0x5c13bb(0xfb)][_0x5c13bb(0x137)]('have\x20to\x20write\x20%d\x20files',this[_0x5c13bb(0x126)][_0x5c13bb(0x110)]);while(_0x15b752[_0x5c13bb(0x110)]){const _0x40c79a=_0x15b752[_0x5c13bb(0x11e)](0x0,this[_0x5c13bb(0x128)]);for(const _0x17d48d of _0x40c79a){await fs_internal_1['FS'][_0x5c13bb(0x101)](path_1[_0x5c13bb(0xff)][_0x5c13bb(0x10a)](this[_0x5c13bb(0x102)],_0x17d48d),xml_v2_1[_0x5c13bb(0xfe)][_0x5c13bb(0x10f)](this[_0x5c13bb(0x100)][_0x17d48d]));}}this[_0x5c13bb(0x100)]={};}}exports[a153_0x1c5e6b(0x11d)]=MDApiWriter;