const a153_0xf4e791=a153_0x2843;(function(_0x12fd63,_0x334d53){const _0x64f9fa=a153_0x2843,_0x3ba2e3=_0x12fd63();while(!![]){try{const _0x4604cb=-parseInt(_0x64f9fa(0x1e7))/0x1+parseInt(_0x64f9fa(0x1df))/0x2+parseInt(_0x64f9fa(0x202))/0x3+parseInt(_0x64f9fa(0x207))/0x4*(-parseInt(_0x64f9fa(0x1da))/0x5)+parseInt(_0x64f9fa(0x1e2))/0x6*(-parseInt(_0x64f9fa(0x1ff))/0x7)+-parseInt(_0x64f9fa(0x1e6))/0x8+-parseInt(_0x64f9fa(0x1ef))/0x9*(-parseInt(_0x64f9fa(0x1f6))/0xa);if(_0x4604cb===_0x334d53)break;else _0x3ba2e3['push'](_0x3ba2e3['shift']());}catch(_0x2f5aef){_0x3ba2e3['push'](_0x3ba2e3['shift']());}}}(a153_0x4354,0x58ab3));const a153_0x3b6897=(function(){let _0x2906f0=!![];return function(_0x43d077,_0x3b334f){const _0x3cd99f=_0x2906f0?function(){const _0x19073d=a153_0x2843;if(_0x3b334f){const _0x2857ce=_0x3b334f[_0x19073d(0x20e)](_0x43d077,arguments);return _0x3b334f=null,_0x2857ce;}}:function(){};return _0x2906f0=![],_0x3cd99f;};}()),a153_0x316ae8=a153_0x3b6897(this,function(){const _0x463a4d=a153_0x2843;return a153_0x316ae8[_0x463a4d(0x210)]()[_0x463a4d(0x206)](_0x463a4d(0x1f4))[_0x463a4d(0x210)]()['constructor'](a153_0x316ae8)[_0x463a4d(0x206)]('(((.+)+)+)+$');});function a153_0x4354(){const _0x1296d0=['MDApiWriter','6061131sKtvkx','../errors/invalid-xml.error','parse','push','../data/child-types','(((.+)+)+)+$','have\x20to\x20write\x20%d\x20files','10VmERow','name','log','../utils/zip','__esModule','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','writeParent','].\x20Original\x20error:\x20','../../../../core','756420iqqVaE','skipChildErrors','makeDir','1752273MlNlgC','catch','Zip','fileType','search','56FOABKF','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','../../internal/fs.internal','sourceDir','handleXmlParsingError','all','length','apply','parentComponents','toString','writeFile','components','start','body','internalLogger','async','readFile','files','exists','../utils/xml-v2','48265IzSLrR','nodebuffer','InvalidXmlError','replaceOrAppend','defineProperty','468474gFXGga','MAX_WRITES_PER_TICK','default','6ClFKVm','fileName','dir','join','1684544HGssOV','674830zIFCoN','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','keys','includes','XmlV2','convertToString','text'];a153_0x4354=function(){return _0x1296d0;};return a153_0x4354();}a153_0x316ae8();function a153_0x2843(_0x13c35e,_0x15f626){const _0x11fe53=a153_0x4354();return a153_0x2843=function(_0x316ae8,_0x3b6897){_0x316ae8=_0x316ae8-0x1da;let _0x4354f7=_0x11fe53[_0x316ae8];return _0x4354f7;},a153_0x2843(_0x13c35e,_0x15f626);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2f441c){const _0x502110=a153_0x2843;return _0x2f441c&&_0x2f441c[_0x502110(0x1fa)]?_0x2f441c:{'default':_0x2f441c};};Object[a153_0xf4e791(0x1de)](exports,a153_0xf4e791(0x1fa),{'value':!![]}),exports[a153_0xf4e791(0x1ee)]=void 0x0;const path_1=__importDefault(require('path')),core_1=require(a153_0xf4e791(0x1fe)),fs_internal_1=require(a153_0xf4e791(0x209)),invalid_xml_error_1=require(a153_0xf4e791(0x1f0)),xml_v2_1=require(a153_0xf4e791(0x21a)),zip_1=require(a153_0xf4e791(0x1f9)),child_types_1=__importDefault(require(a153_0xf4e791(0x1f3)));class MDApiWriter{constructor({components:_0x16d126,sourceDir:_0x7e825f,skipChildErrors:_0x37d84e}){const _0x282ebc=a153_0xf4e791;this['MAX_WRITES_PER_TICK']=0x64,this['parentComponents']={},this[_0x282ebc(0x215)]=new core_1['Logger'](MDApiWriter[_0x282ebc(0x1f7)]),this[_0x282ebc(0x212)]=_0x16d126,this[_0x282ebc(0x20a)]=_0x7e825f,this[_0x282ebc(0x200)]=_0x37d84e;}async['readZip'](_0x5a3fd5,_0x37dfcc=![]){const _0x74ca23=a153_0xf4e791,_0x55e21d=await zip_1[_0x74ca23(0x204)]['unzip'](_0x5a3fd5),_0x2996a8=[];for(const _0x5aa7a3 of Object[_0x74ca23(0x1e9)](_0x55e21d[_0x74ca23(0x218)])){!_0x55e21d['files'][_0x5aa7a3][_0x74ca23(0x1e4)]&&_0x2996a8[_0x74ca23(0x1f2)]({'filename':_0x5aa7a3,'body':await _0x55e21d['files'][_0x5aa7a3][_0x74ca23(0x216)](_0x37dfcc?_0x74ca23(0x1db):_0x74ca23(0x1ed))});}return _0x2996a8;}async[a153_0xf4e791(0x1fc)](_0x243c56){const _0x59bb01=a153_0xf4e791;try{const _0x262de6=await this['readZip'](_0x243c56[_0x59bb01(0x214)],!![]);await Promise[_0x59bb01(0x20c)](_0x262de6['map'](({filename:_0x4224c8,body:_0x4c8d4f})=>fs_internal_1['FS']['writeFile'](path_1[_0x59bb01(0x1e1)][_0x59bb01(0x1e5)](this[_0x59bb01(0x20a)],_0x4224c8),_0x4c8d4f)));}catch(_0x31d00d){throw new Error(_0x59bb01(0x1e8)+_0x243c56['fileName']+'\x20['+_0x243c56[_0x59bb01(0x205)]+'].\x20Original\x20error:\x20'+_0x31d00d);}}[a153_0xf4e791(0x20b)](_0x541e04,_0x340814){const _0x4dd0ca=a153_0xf4e791;throw new invalid_xml_error_1[(_0x4dd0ca(0x1dc))](_0x4dd0ca(0x208)+_0x340814[_0x4dd0ca(0x1e3)]+'\x20['+_0x340814[_0x4dd0ca(0x205)]+_0x4dd0ca(0x1fd)+_0x541e04);}async['writeChild'](_0x267fe6){const _0x59ed5c=a153_0xf4e791,{filename:_0x2b543d,body:_0x248455}=(await this['readZip'](_0x267fe6[_0x59ed5c(0x214)]))[0x0];try{if(!this[_0x59ed5c(0x20f)][_0x2b543d]){const _0x4b0602=path_1['default']['join'](this[_0x59ed5c(0x20a)],_0x2b543d);if(await fs_internal_1['FS'][_0x59ed5c(0x219)](_0x4b0602)){const _0x27cf9c=await fs_internal_1['FS'][_0x59ed5c(0x217)](_0x4b0602);this[_0x59ed5c(0x20f)][_0x2b543d]=await xml_v2_1[_0x59ed5c(0x1eb)][_0x59ed5c(0x1f1)](_0x27cf9c)[_0x59ed5c(0x203)](_0x52bd49=>this[_0x59ed5c(0x20b)](_0x52bd49,_0x267fe6));}else{this[_0x59ed5c(0x20f)][_0x2b543d]=await xml_v2_1[_0x59ed5c(0x1eb)][_0x59ed5c(0x1f1)](_0x248455)['catch'](_0x263901=>this[_0x59ed5c(0x20b)](_0x263901,_0x267fe6));return;}}const _0x212208=this['parentComponents'][_0x2b543d],_0x31aaef=await xml_v2_1[_0x59ed5c(0x1eb)]['parse'](_0x248455)[_0x59ed5c(0x203)](_0x481b0b=>this[_0x59ed5c(0x20b)](_0x481b0b,_0x267fe6));xml_v2_1[_0x59ed5c(0x1eb)][_0x59ed5c(0x1dd)](_0x212208,_0x31aaef);}catch(_0x1bd759){if(_0x1bd759 instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0x59ed5c(0x200)])return;else throw _0x1bd759;}throw new Error(_0x59ed5c(0x1fb)+_0x267fe6['fileName']+'\x20['+_0x267fe6['fileType']+_0x59ed5c(0x1fd)+_0x1bd759);}}async[a153_0xf4e791(0x213)](){const _0x96486=a153_0xf4e791;!await fs_internal_1['FS']['exists'](this['sourceDir'])&&await fs_internal_1['FS'][_0x96486(0x201)](this[_0x96486(0x20a)]);for(const _0x303692 of this[_0x96486(0x212)]){!child_types_1[_0x96486(0x1e1)][_0x96486(0x1ea)](_0x303692['fileType'])?await this['writeParent'](_0x303692):await this['writeChild'](_0x303692);}const _0x122fe7=Object[_0x96486(0x1e9)](this['parentComponents']);this[_0x96486(0x215)][_0x96486(0x1f8)](_0x96486(0x1f5),this[_0x96486(0x212)][_0x96486(0x20d)]);while(_0x122fe7[_0x96486(0x20d)]){const _0x7a980=_0x122fe7['splice'](0x0,this[_0x96486(0x1e0)]);for(const _0x199f0d of _0x7a980){await fs_internal_1['FS'][_0x96486(0x211)](path_1[_0x96486(0x1e1)]['join'](this[_0x96486(0x20a)],_0x199f0d),xml_v2_1[_0x96486(0x1eb)][_0x96486(0x1ec)](this['parentComponents'][_0x199f0d]));}}this[_0x96486(0x20f)]={};}}exports[a153_0xf4e791(0x1ee)]=MDApiWriter;