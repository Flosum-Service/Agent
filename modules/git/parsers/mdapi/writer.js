const a149_0x3e90e6=a149_0x967f;function a149_0x50c2(){const _0x42d5f9=['2620FUTDHe','../data/child-types','Logger','Zip','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','skipChildErrors','files','writeParent','4ZAqeeN','components','unzip','5293332aPuWuP','handleXmlParsingError','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','defineProperty','1072IomzgH','have\x20to\x20write\x20%d\x20files','toString','48987YinFuT','readZip','log','internalLogger','XmlV2','all','../../../../core','readFile','name','].\x20Original\x20error:\x20','default','858150dMdlnV','push','../errors/invalid-xml.error','4095305afpWvy','path','../utils/zip','constructor','length','531XtZTsX','51709IzKNEG','apply','dir','keys','fileName','MAX_WRITES_PER_TICK','replaceOrAppend','8385540GQkpJL','parentComponents','body','../../internal/fs.internal','fileType','catch','join','InvalidXmlError','map','makeDir','writeChild','exists','sourceDir','14370gJfpkC','parse','writeFile','text','MDApiWriter','splice'];a149_0x50c2=function(){return _0x42d5f9;};return a149_0x50c2();}(function(_0x18d7ae,_0x32909a){const _0x25350d=a149_0x967f,_0xc954dd=_0x18d7ae();while(!![]){try{const _0x52c048=parseInt(_0x25350d(0x1ff))/0x1+-parseInt(_0x25350d(0x21c))/0x2*(-parseInt(_0x25350d(0x207))/0x3)+parseInt(_0x25350d(0x1ea))/0x4*(-parseInt(_0x25350d(0x202))/0x5)+parseInt(_0x25350d(0x20f))/0x6+-parseInt(_0x25350d(0x208))/0x7*(parseInt(_0x25350d(0x1f1))/0x8)+parseInt(_0x25350d(0x1f4))/0x9*(-parseInt(_0x25350d(0x222))/0xa)+parseInt(_0x25350d(0x1ed))/0xb;if(_0x52c048===_0x32909a)break;else _0xc954dd['push'](_0xc954dd['shift']());}catch(_0x3f08a0){_0xc954dd['push'](_0xc954dd['shift']());}}}(a149_0x50c2,0xbce50));const a149_0x1de850=(function(){let _0xd9ebd1=!![];return function(_0x1d578a,_0x4a23ea){const _0x4bffcc=_0xd9ebd1?function(){const _0x38eb2f=a149_0x967f;if(_0x4a23ea){const _0x268090=_0x4a23ea[_0x38eb2f(0x209)](_0x1d578a,arguments);return _0x4a23ea=null,_0x268090;}}:function(){};return _0xd9ebd1=![],_0x4bffcc;};}()),a149_0x548b56=a149_0x1de850(this,function(){const _0xc2f2f7=a149_0x967f;return a149_0x548b56[_0xc2f2f7(0x1f3)]()['search']('(((.+)+)+)+$')['toString']()[_0xc2f2f7(0x205)](a149_0x548b56)['search']('(((.+)+)+)+$');});a149_0x548b56();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5b778f){return _0x5b778f&&_0x5b778f['__esModule']?_0x5b778f:{'default':_0x5b778f};};Object[a149_0x3e90e6(0x1f0)](exports,'__esModule',{'value':!![]}),exports[a149_0x3e90e6(0x220)]=void 0x0;function a149_0x967f(_0x1a8933,_0x3ef11a){const _0x521077=a149_0x50c2();return a149_0x967f=function(_0x548b56,_0x1de850){_0x548b56=_0x548b56-0x1e9;let _0x50c2ae=_0x521077[_0x548b56];return _0x50c2ae;},a149_0x967f(_0x1a8933,_0x3ef11a);}const path_1=__importDefault(require(a149_0x3e90e6(0x203))),core_1=require(a149_0x3e90e6(0x1fa)),fs_internal_1=require(a149_0x3e90e6(0x212)),invalid_xml_error_1=require(a149_0x3e90e6(0x201)),xml_v2_1=require('../utils/xml-v2'),zip_1=require(a149_0x3e90e6(0x204)),child_types_1=__importDefault(require(a149_0x3e90e6(0x223)));class MDApiWriter{constructor({components:_0x294f7d,sourceDir:_0x4caf69,skipChildErrors:_0x35dc64}){const _0xacbaac=a149_0x3e90e6;this[_0xacbaac(0x20d)]=0x64,this[_0xacbaac(0x210)]={},this[_0xacbaac(0x1f7)]=new core_1[(_0xacbaac(0x224))](MDApiWriter[_0xacbaac(0x1fc)]),this[_0xacbaac(0x1eb)]=_0x294f7d,this['sourceDir']=_0x4caf69,this['skipChildErrors']=_0x35dc64;}async['readZip'](_0x2acbbc,_0x460750=![]){const _0x3254aa=a149_0x3e90e6,_0x2b1f91=await zip_1[_0x3254aa(0x225)][_0x3254aa(0x1ec)](_0x2acbbc),_0x48d4d2=[];for(const _0x4b50d3 of Object[_0x3254aa(0x20b)](_0x2b1f91[_0x3254aa(0x228)])){!_0x2b1f91[_0x3254aa(0x228)][_0x4b50d3][_0x3254aa(0x20a)]&&_0x48d4d2[_0x3254aa(0x200)]({'filename':_0x4b50d3,'body':await _0x2b1f91['files'][_0x4b50d3]['async'](_0x460750?'nodebuffer':_0x3254aa(0x21f))});}return _0x48d4d2;}async[a149_0x3e90e6(0x1e9)](_0x21cb05){const _0x291a50=a149_0x3e90e6;try{const _0x1b5c9e=await this[_0x291a50(0x1f5)](_0x21cb05[_0x291a50(0x211)],!![]);await Promise[_0x291a50(0x1f9)](_0x1b5c9e[_0x291a50(0x217)](({filename:_0x27dd7a,body:_0x5e760c})=>fs_internal_1['FS'][_0x291a50(0x21e)](path_1[_0x291a50(0x1fe)][_0x291a50(0x215)](this['sourceDir'],_0x27dd7a),_0x5e760c)));}catch(_0x5ef236){throw new Error(_0x291a50(0x226)+_0x21cb05[_0x291a50(0x20c)]+'\x20['+_0x21cb05[_0x291a50(0x213)]+_0x291a50(0x1fd)+_0x5ef236);}}['handleXmlParsingError'](_0x38839c,_0x20ea06){const _0x5afd5d=a149_0x3e90e6;throw new invalid_xml_error_1[(_0x5afd5d(0x216))](_0x5afd5d(0x1ef)+_0x20ea06['fileName']+'\x20['+_0x20ea06[_0x5afd5d(0x213)]+_0x5afd5d(0x1fd)+_0x38839c);}async[a149_0x3e90e6(0x219)](_0x363dba){const _0x3fbd13=a149_0x3e90e6,{filename:_0x49aadf,body:_0x1a2f92}=(await this[_0x3fbd13(0x1f5)](_0x363dba[_0x3fbd13(0x211)]))[0x0];try{if(!this[_0x3fbd13(0x210)][_0x49aadf]){const _0x558c6e=path_1[_0x3fbd13(0x1fe)]['join'](this[_0x3fbd13(0x21b)],_0x49aadf);if(await fs_internal_1['FS'][_0x3fbd13(0x21a)](_0x558c6e)){const _0x49dd6a=await fs_internal_1['FS'][_0x3fbd13(0x1fb)](_0x558c6e);this[_0x3fbd13(0x210)][_0x49aadf]=await xml_v2_1['XmlV2']['parse'](_0x49dd6a)[_0x3fbd13(0x214)](_0x6a508b=>this[_0x3fbd13(0x1ee)](_0x6a508b,_0x363dba));}else{this[_0x3fbd13(0x210)][_0x49aadf]=await xml_v2_1[_0x3fbd13(0x1f8)]['parse'](_0x1a2f92)[_0x3fbd13(0x214)](_0x16858e=>this[_0x3fbd13(0x1ee)](_0x16858e,_0x363dba));return;}}const _0x1b0c2d=this['parentComponents'][_0x49aadf],_0x359780=await xml_v2_1[_0x3fbd13(0x1f8)][_0x3fbd13(0x21d)](_0x1a2f92)['catch'](_0x18f0f3=>this['handleXmlParsingError'](_0x18f0f3,_0x363dba));xml_v2_1['XmlV2'][_0x3fbd13(0x20e)](_0x1b0c2d,_0x359780);}catch(_0x2a7de9){if(_0x2a7de9 instanceof invalid_xml_error_1[_0x3fbd13(0x216)]){if(this[_0x3fbd13(0x227)])return;else throw _0x2a7de9;}throw new Error('[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x363dba['fileName']+'\x20['+_0x363dba['fileType']+_0x3fbd13(0x1fd)+_0x2a7de9);}}async['start'](){const _0x1fe3f2=a149_0x3e90e6;!await fs_internal_1['FS'][_0x1fe3f2(0x21a)](this[_0x1fe3f2(0x21b)])&&await fs_internal_1['FS'][_0x1fe3f2(0x218)](this[_0x1fe3f2(0x21b)]);for(const _0x11189c of this[_0x1fe3f2(0x1eb)]){!child_types_1[_0x1fe3f2(0x1fe)]['includes'](_0x11189c[_0x1fe3f2(0x213)])?await this['writeParent'](_0x11189c):await this[_0x1fe3f2(0x219)](_0x11189c);}const _0x35fd5d=Object[_0x1fe3f2(0x20b)](this[_0x1fe3f2(0x210)]);this[_0x1fe3f2(0x1f7)][_0x1fe3f2(0x1f6)](_0x1fe3f2(0x1f2),this[_0x1fe3f2(0x1eb)][_0x1fe3f2(0x206)]);while(_0x35fd5d[_0x1fe3f2(0x206)]){const _0x51213c=_0x35fd5d[_0x1fe3f2(0x221)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x3d830c of _0x51213c){await fs_internal_1['FS'][_0x1fe3f2(0x21e)](path_1[_0x1fe3f2(0x1fe)][_0x1fe3f2(0x215)](this['sourceDir'],_0x3d830c),xml_v2_1[_0x1fe3f2(0x1f8)]['convertToString'](this[_0x1fe3f2(0x210)][_0x3d830c]));}}this[_0x1fe3f2(0x210)]={};}}exports[a149_0x3e90e6(0x220)]=MDApiWriter;