const a153_0x4bbd24=a153_0x14e7;(function(_0x2b0031,_0x1fabf4){const _0x58dc90=a153_0x14e7,_0x7ce63b=_0x2b0031();while(!![]){try{const _0x46d156=parseInt(_0x58dc90(0xd6))/0x1*(-parseInt(_0x58dc90(0xaa))/0x2)+-parseInt(_0x58dc90(0xc6))/0x3*(parseInt(_0x58dc90(0xb2))/0x4)+-parseInt(_0x58dc90(0xc5))/0x5+parseInt(_0x58dc90(0xb6))/0x6+-parseInt(_0x58dc90(0xc2))/0x7*(-parseInt(_0x58dc90(0xd2))/0x8)+-parseInt(_0x58dc90(0xc1))/0x9*(parseInt(_0x58dc90(0xc9))/0xa)+parseInt(_0x58dc90(0xb5))/0xb*(parseInt(_0x58dc90(0xd1))/0xc);if(_0x46d156===_0x1fabf4)break;else _0x7ce63b['push'](_0x7ce63b['shift']());}catch(_0x9795b9){_0x7ce63b['push'](_0x7ce63b['shift']());}}}(a153_0x49d6,0x56f5d));const a153_0x30b3b9=(function(){let _0x4e61e4=!![];return function(_0x3938c0,_0x4c5b0a){const _0x1de409=_0x4e61e4?function(){const _0x2b12d7=a153_0x14e7;if(_0x4c5b0a){const _0x38590f=_0x4c5b0a[_0x2b12d7(0xdf)](_0x3938c0,arguments);return _0x4c5b0a=null,_0x38590f;}}:function(){};return _0x4e61e4=![],_0x1de409;};}()),a153_0x9132e1=a153_0x30b3b9(this,function(){const _0x95ea82=a153_0x14e7;return a153_0x9132e1[_0x95ea82(0xb4)]()['search'](_0x95ea82(0xcc))[_0x95ea82(0xb4)]()['constructor'](a153_0x9132e1)['search'](_0x95ea82(0xcc));});a153_0x9132e1();'use strict';var __importDefault=this&&this[a153_0x4bbd24(0xae)]||function(_0x102272){const _0x1385f4=a153_0x4bbd24;return _0x102272&&_0x102272[_0x1385f4(0xcd)]?_0x102272:{'default':_0x102272};};function a153_0x14e7(_0x5c386e,_0x2be59e){const _0x423685=a153_0x49d6();return a153_0x14e7=function(_0x9132e1,_0x30b3b9){_0x9132e1=_0x9132e1-0xaa;let _0x49d626=_0x423685[_0x9132e1];return _0x49d626;},a153_0x14e7(_0x5c386e,_0x2be59e);}Object[a153_0x4bbd24(0xe3)](exports,a153_0x4bbd24(0xcd),{'value':!![]}),exports[a153_0x4bbd24(0xbb)]=void 0x0;function a153_0x49d6(){const _0x21704d=['2322702zZDHpC','4019659xNYkXw','../errors/invalid-xml.error','../utils/xml-v2','3377860NHToZe','69IuHkos','path','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','10hDfaXX','../data/child-types','MAX_WRITES_PER_TICK','(((.+)+)+)+$','__esModule','components','splice','Logger','329292pxRKxB','8FfldwD','writeChild','fileName','makeDir','9ogDdKS','writeFile','parentComponents','name','nodebuffer','unzip','push','exists','keys','apply','length','join','readZip','defineProperty','handleXmlParsingError','XmlV2','replaceOrAppend','writeParent','internalLogger','text','../../../../core','InvalidXmlError','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','readFile','92602ZQldgh','default','].\x20Original\x20error:\x20','map','__importDefault','fileType','catch','includes','53612ihrVEI','sourceDir','toString','374CWmGEy','3045516FfHboJ','../../internal/fs.internal','parse','Zip','body','MDApiWriter','log','../utils/zip','files','skipChildErrors','async'];a153_0x49d6=function(){return _0x21704d;};return a153_0x49d6();}const path_1=__importDefault(require(a153_0x4bbd24(0xc7))),core_1=require(a153_0x4bbd24(0xea)),fs_internal_1=require(a153_0x4bbd24(0xb7)),invalid_xml_error_1=require(a153_0x4bbd24(0xc3)),xml_v2_1=require(a153_0x4bbd24(0xc4)),zip_1=require(a153_0x4bbd24(0xbd)),child_types_1=__importDefault(require(a153_0x4bbd24(0xca)));class MDApiWriter{constructor({components:_0x56b8da,sourceDir:_0x12c74e,skipChildErrors:_0x80dc50}){const _0xad954c=a153_0x4bbd24;this[_0xad954c(0xcb)]=0x64,this[_0xad954c(0xd8)]={},this[_0xad954c(0xe8)]=new core_1[(_0xad954c(0xd0))](MDApiWriter[_0xad954c(0xd9)]),this['components']=_0x56b8da,this[_0xad954c(0xb3)]=_0x12c74e,this['skipChildErrors']=_0x80dc50;}async[a153_0x4bbd24(0xe2)](_0x2f1216,_0x43b2e2=![]){const _0xa85338=a153_0x4bbd24,_0x1a35af=await zip_1[_0xa85338(0xb9)][_0xa85338(0xdb)](_0x2f1216),_0x3a8f6e=[];for(const _0x3288b7 of Object['keys'](_0x1a35af[_0xa85338(0xbe)])){!_0x1a35af['files'][_0x3288b7]['dir']&&_0x3a8f6e[_0xa85338(0xdc)]({'filename':_0x3288b7,'body':await _0x1a35af[_0xa85338(0xbe)][_0x3288b7][_0xa85338(0xc0)](_0x43b2e2?_0xa85338(0xda):_0xa85338(0xe9))});}return _0x3a8f6e;}async['writeParent'](_0x3d18b9){const _0x3f2071=a153_0x4bbd24;try{const _0x43293a=await this['readZip'](_0x3d18b9[_0x3f2071(0xba)],!![]);await Promise['all'](_0x43293a[_0x3f2071(0xad)](({filename:_0x42b0e9,body:_0x5ba38b})=>fs_internal_1['FS']['writeFile'](path_1['default'][_0x3f2071(0xe1)](this[_0x3f2071(0xb3)],_0x42b0e9),_0x5ba38b)));}catch(_0x5ce2aa){throw new Error(_0x3f2071(0xec)+_0x3d18b9[_0x3f2071(0xd4)]+'\x20['+_0x3d18b9[_0x3f2071(0xaf)]+_0x3f2071(0xac)+_0x5ce2aa);}}['handleXmlParsingError'](_0x376379,_0x10a990){const _0xdab9d4=a153_0x4bbd24;throw new invalid_xml_error_1[(_0xdab9d4(0xeb))](_0xdab9d4(0xc8)+_0x10a990[_0xdab9d4(0xd4)]+'\x20['+_0x10a990['fileType']+'].\x20Original\x20error:\x20'+_0x376379);}async[a153_0x4bbd24(0xd3)](_0x554bab){const _0x3b0c79=a153_0x4bbd24,{filename:_0x14bbff,body:_0xbc6bca}=(await this[_0x3b0c79(0xe2)](_0x554bab[_0x3b0c79(0xba)]))[0x0];try{if(!this[_0x3b0c79(0xd8)][_0x14bbff]){const _0x4817a4=path_1[_0x3b0c79(0xab)][_0x3b0c79(0xe1)](this[_0x3b0c79(0xb3)],_0x14bbff);if(await fs_internal_1['FS'][_0x3b0c79(0xdd)](_0x4817a4)){const _0x335335=await fs_internal_1['FS'][_0x3b0c79(0xed)](_0x4817a4);this[_0x3b0c79(0xd8)][_0x14bbff]=await xml_v2_1[_0x3b0c79(0xe5)]['parse'](_0x335335)[_0x3b0c79(0xb0)](_0x369a60=>this[_0x3b0c79(0xe4)](_0x369a60,_0x554bab));}else{this[_0x3b0c79(0xd8)][_0x14bbff]=await xml_v2_1['XmlV2'][_0x3b0c79(0xb8)](_0xbc6bca)[_0x3b0c79(0xb0)](_0x53650b=>this[_0x3b0c79(0xe4)](_0x53650b,_0x554bab));return;}}const _0x129989=this['parentComponents'][_0x14bbff],_0x11f7f0=await xml_v2_1[_0x3b0c79(0xe5)][_0x3b0c79(0xb8)](_0xbc6bca)[_0x3b0c79(0xb0)](_0xf09992=>this[_0x3b0c79(0xe4)](_0xf09992,_0x554bab));xml_v2_1[_0x3b0c79(0xe5)][_0x3b0c79(0xe6)](_0x129989,_0x11f7f0);}catch(_0x48e3a7){if(_0x48e3a7 instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0x3b0c79(0xbf)])return;else throw _0x48e3a7;}throw new Error('[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x554bab[_0x3b0c79(0xd4)]+'\x20['+_0x554bab[_0x3b0c79(0xaf)]+_0x3b0c79(0xac)+_0x48e3a7);}}async['start'](){const _0x4766a8=a153_0x4bbd24;!await fs_internal_1['FS'][_0x4766a8(0xdd)](this['sourceDir'])&&await fs_internal_1['FS'][_0x4766a8(0xd5)](this[_0x4766a8(0xb3)]);for(const _0x47d7da of this['components']){!child_types_1['default'][_0x4766a8(0xb1)](_0x47d7da[_0x4766a8(0xaf)])?await this[_0x4766a8(0xe7)](_0x47d7da):await this[_0x4766a8(0xd3)](_0x47d7da);}const _0x2be623=Object[_0x4766a8(0xde)](this[_0x4766a8(0xd8)]);this[_0x4766a8(0xe8)][_0x4766a8(0xbc)]('have\x20to\x20write\x20%d\x20files',this[_0x4766a8(0xce)][_0x4766a8(0xe0)]);while(_0x2be623[_0x4766a8(0xe0)]){const _0x4ca49e=_0x2be623[_0x4766a8(0xcf)](0x0,this[_0x4766a8(0xcb)]);for(const _0xec9547 of _0x4ca49e){await fs_internal_1['FS'][_0x4766a8(0xd7)](path_1[_0x4766a8(0xab)][_0x4766a8(0xe1)](this[_0x4766a8(0xb3)],_0xec9547),xml_v2_1[_0x4766a8(0xe5)]['convertToString'](this[_0x4766a8(0xd8)][_0xec9547]));}}this['parentComponents']={};}}exports[a153_0x4bbd24(0xbb)]=MDApiWriter;