const a153_0x42d783=a153_0x4d50;(function(_0x40a582,_0x2f60e8){const _0x583122=a153_0x4d50,_0x14894a=_0x40a582();while(!![]){try{const _0x72865e=parseInt(_0x583122(0xe8))/0x1*(-parseInt(_0x583122(0xec))/0x2)+parseInt(_0x583122(0xef))/0x3+parseInt(_0x583122(0x108))/0x4+-parseInt(_0x583122(0x112))/0x5+-parseInt(_0x583122(0x104))/0x6*(-parseInt(_0x583122(0xff))/0x7)+-parseInt(_0x583122(0xe2))/0x8*(parseInt(_0x583122(0x10a))/0x9)+parseInt(_0x583122(0x107))/0xa;if(_0x72865e===_0x2f60e8)break;else _0x14894a['push'](_0x14894a['shift']());}catch(_0x19b54a){_0x14894a['push'](_0x14894a['shift']());}}}(a153_0x1044,0x8b6ef));const a153_0x3e1b1d=(function(){let _0x5419e2=!![];return function(_0x17d8bb,_0x28b958){const _0x405bf2=_0x5419e2?function(){if(_0x28b958){const _0x205cb8=_0x28b958['apply'](_0x17d8bb,arguments);return _0x28b958=null,_0x205cb8;}}:function(){};return _0x5419e2=![],_0x405bf2;};}()),a153_0x58833f=a153_0x3e1b1d(this,function(){const _0x335ace=a153_0x4d50;return a153_0x58833f['toString']()[_0x335ace(0x110)](_0x335ace(0xf4))[_0x335ace(0x116)]()['constructor'](a153_0x58833f)[_0x335ace(0x110)](_0x335ace(0xf4));});a153_0x58833f();'use strict';function a153_0x4d50(_0x1d3116,_0x37422e){const _0x3047f5=a153_0x1044();return a153_0x4d50=function(_0x58833f,_0x3e1b1d){_0x58833f=_0x58833f-0xdf;let _0x10441b=_0x3047f5[_0x58833f];return _0x10441b;},a153_0x4d50(_0x1d3116,_0x37422e);}var __importDefault=this&&this['__importDefault']||function(_0x56306b){const _0x58a8f5=a153_0x4d50;return _0x56306b&&_0x56306b[_0x58a8f5(0xe4)]?_0x56306b:{'default':_0x56306b};};Object['defineProperty'](exports,a153_0x42d783(0xe4),{'value':!![]}),exports[a153_0x42d783(0x109)]=void 0x0;function a153_0x1044(){const _0x4ffe09=['__esModule','MAX_WRITES_PER_TICK','fileName','skipChildErrors','407ZLTvIW','body','sourceDir','components','4584YUUvnD','files','replaceOrAppend','2164302ORgPfM','async','default','log','fileType','(((.+)+)+)+$','includes','path','name','parse','parentComponents','have\x20to\x20write\x20%d\x20files','].\x20Original\x20error:\x20','writeChild','readFile','internalLogger','231112WLpdse','unzip','catch','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','join','108jQtIdK','push','dir','11054180KxFjrK','1451520dYYQfJ','MDApiWriter','1629mCMjJK','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','length','splice','makeDir','exists','search','writeFile','5288040lmxlGA','handleXmlParsingError','XmlV2','Logger','toString','Zip','readZip','start','9832GRVAvw','writeParent'];a153_0x1044=function(){return _0x4ffe09;};return a153_0x1044();}const path_1=__importDefault(require(a153_0x42d783(0xf6))),core_1=require('../../../../core'),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require('../errors/invalid-xml.error'),xml_v2_1=require('../utils/xml-v2'),zip_1=require('../utils/zip'),child_types_1=__importDefault(require('../data/child-types'));class MDApiWriter{constructor({components:_0x3cbd38,sourceDir:_0x5d54a3,skipChildErrors:_0x1681a1}){const _0x3e163c=a153_0x42d783;this[_0x3e163c(0xe5)]=0x64,this[_0x3e163c(0xf9)]={},this[_0x3e163c(0xfe)]=new core_1[(_0x3e163c(0x115))](MDApiWriter[_0x3e163c(0xf7)]),this[_0x3e163c(0xeb)]=_0x3cbd38,this[_0x3e163c(0xea)]=_0x5d54a3,this[_0x3e163c(0xe7)]=_0x1681a1;}async[a153_0x42d783(0xe0)](_0x1efa66,_0x188595=![]){const _0x29d123=a153_0x42d783,_0x2ac2eb=await zip_1[_0x29d123(0xdf)][_0x29d123(0x100)](_0x1efa66),_0x229acf=[];for(const _0x103c16 of Object['keys'](_0x2ac2eb['files'])){!_0x2ac2eb[_0x29d123(0xed)][_0x103c16][_0x29d123(0x106)]&&_0x229acf[_0x29d123(0x105)]({'filename':_0x103c16,'body':await _0x2ac2eb[_0x29d123(0xed)][_0x103c16][_0x29d123(0xf0)](_0x188595?'nodebuffer':'text')});}return _0x229acf;}async[a153_0x42d783(0xe3)](_0x21d22b){const _0x1347c0=a153_0x42d783;try{const _0x54c7af=await this[_0x1347c0(0xe0)](_0x21d22b['body'],!![]);await Promise['all'](_0x54c7af['map'](({filename:_0xa5d841,body:_0x47f386})=>fs_internal_1['FS'][_0x1347c0(0x111)](path_1[_0x1347c0(0xf1)][_0x1347c0(0x103)](this['sourceDir'],_0xa5d841),_0x47f386)));}catch(_0x514448){throw new Error(_0x1347c0(0x10b)+_0x21d22b[_0x1347c0(0xe6)]+'\x20['+_0x21d22b[_0x1347c0(0xf3)]+'].\x20Original\x20error:\x20'+_0x514448);}}['handleXmlParsingError'](_0x6a52ef,_0x2a44e7){throw new invalid_xml_error_1['InvalidXmlError']('[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20'+_0x2a44e7['fileName']+'\x20['+_0x2a44e7['fileType']+'].\x20Original\x20error:\x20'+_0x6a52ef);}async[a153_0x42d783(0xfc)](_0x211155){const _0xf2948=a153_0x42d783,{filename:_0x3f5744,body:_0x1f88b0}=(await this[_0xf2948(0xe0)](_0x211155[_0xf2948(0xe9)]))[0x0];try{if(!this[_0xf2948(0xf9)][_0x3f5744]){const _0x3be9dd=path_1[_0xf2948(0xf1)][_0xf2948(0x103)](this['sourceDir'],_0x3f5744);if(await fs_internal_1['FS'][_0xf2948(0x10f)](_0x3be9dd)){const _0x41abaf=await fs_internal_1['FS'][_0xf2948(0xfd)](_0x3be9dd);this['parentComponents'][_0x3f5744]=await xml_v2_1[_0xf2948(0x114)][_0xf2948(0xf8)](_0x41abaf)[_0xf2948(0x101)](_0x587d1e=>this[_0xf2948(0x113)](_0x587d1e,_0x211155));}else{this[_0xf2948(0xf9)][_0x3f5744]=await xml_v2_1[_0xf2948(0x114)][_0xf2948(0xf8)](_0x1f88b0)['catch'](_0x323d17=>this[_0xf2948(0x113)](_0x323d17,_0x211155));return;}}const _0x5d9a71=this[_0xf2948(0xf9)][_0x3f5744],_0x5d8e08=await xml_v2_1[_0xf2948(0x114)]['parse'](_0x1f88b0)[_0xf2948(0x101)](_0x96139e=>this[_0xf2948(0x113)](_0x96139e,_0x211155));xml_v2_1[_0xf2948(0x114)][_0xf2948(0xee)](_0x5d9a71,_0x5d8e08);}catch(_0x143ab0){if(_0x143ab0 instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0xf2948(0xe7)])return;else throw _0x143ab0;}throw new Error(_0xf2948(0x102)+_0x211155['fileName']+'\x20['+_0x211155['fileType']+_0xf2948(0xfb)+_0x143ab0);}}async[a153_0x42d783(0xe1)](){const _0x17886=a153_0x42d783;!await fs_internal_1['FS'][_0x17886(0x10f)](this[_0x17886(0xea)])&&await fs_internal_1['FS'][_0x17886(0x10e)](this[_0x17886(0xea)]);for(const _0x18ab9d of this[_0x17886(0xeb)]){!child_types_1[_0x17886(0xf1)][_0x17886(0xf5)](_0x18ab9d[_0x17886(0xf3)])?await this['writeParent'](_0x18ab9d):await this[_0x17886(0xfc)](_0x18ab9d);}const _0x3f447f=Object['keys'](this[_0x17886(0xf9)]);this[_0x17886(0xfe)][_0x17886(0xf2)](_0x17886(0xfa),this['components'][_0x17886(0x10c)]);while(_0x3f447f[_0x17886(0x10c)]){const _0x2c4dd9=_0x3f447f[_0x17886(0x10d)](0x0,this[_0x17886(0xe5)]);for(const _0x56952b of _0x2c4dd9){await fs_internal_1['FS']['writeFile'](path_1[_0x17886(0xf1)][_0x17886(0x103)](this[_0x17886(0xea)],_0x56952b),xml_v2_1[_0x17886(0x114)]['convertToString'](this['parentComponents'][_0x56952b]));}}this[_0x17886(0xf9)]={};}}exports['MDApiWriter']=MDApiWriter;