const a149_0xf53c58=a149_0x55bb;function a149_0x55bb(_0x195434,_0x4b5936){const _0x5ef8b9=a149_0x330d();return a149_0x55bb=function(_0x4d6be7,_0x593e25){_0x4d6be7=_0x4d6be7-0x19c;let _0x330d35=_0x5ef8b9[_0x4d6be7];return _0x330d35;},a149_0x55bb(_0x195434,_0x4b5936);}(function(_0x4fef95,_0x96ea93){const _0x20f53e=a149_0x55bb,_0x16c720=_0x4fef95();while(!![]){try{const _0x3a3b0=parseInt(_0x20f53e(0x1a6))/0x1+-parseInt(_0x20f53e(0x1d8))/0x2+-parseInt(_0x20f53e(0x1c8))/0x3+parseInt(_0x20f53e(0x1ba))/0x4+parseInt(_0x20f53e(0x1c0))/0x5+parseInt(_0x20f53e(0x1a4))/0x6+-parseInt(_0x20f53e(0x1bc))/0x7;if(_0x3a3b0===_0x96ea93)break;else _0x16c720['push'](_0x16c720['shift']());}catch(_0x484a34){_0x16c720['push'](_0x16c720['shift']());}}}(a149_0x330d,0xb521f));const a149_0x593e25=(function(){let _0x320c05=!![];return function(_0xeafc7c,_0x1d547c){const _0x1f6239=_0x320c05?function(){const _0x1dbaf6=a149_0x55bb;if(_0x1d547c){const _0x347eb0=_0x1d547c[_0x1dbaf6(0x1c9)](_0xeafc7c,arguments);return _0x1d547c=null,_0x347eb0;}}:function(){};return _0x320c05=![],_0x1f6239;};}()),a149_0x4d6be7=a149_0x593e25(this,function(){const _0xf5e5ec=a149_0x55bb;return a149_0x4d6be7[_0xf5e5ec(0x1c3)]()[_0xf5e5ec(0x1c2)](_0xf5e5ec(0x1cd))[_0xf5e5ec(0x1c3)]()[_0xf5e5ec(0x1b1)](a149_0x4d6be7)[_0xf5e5ec(0x1c2)]('(((.+)+)+)+$');});a149_0x4d6be7();function a149_0x330d(){const _0xf95f47=['splice','].\x20Original\x20error:\x20','InvalidXmlError','__importDefault','2610460vvnScX','have\x20to\x20write\x20%d\x20files','sourceDir','name','includes','writeChild','keys','makeDir','dir','2774190bIVsXm','Zip','1008882IZsjwP','join','defineProperty','replaceOrAppend','unzip','catch','../utils/zip','components','exists','MDApiWriter','convertToString','constructor','start','parse','readZip','fileType','writeParent','async','../utils/xml-v2','MAX_WRITES_PER_TICK','3984456qkOmDf','body','2111025mbiuuy','XmlV2','path','length','5248065aacTUC','text','search','toString','map','parentComponents','fileName','default','3504750zJQZho','apply','nodebuffer','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','../data/child-types','(((.+)+)+)+$','skipChildErrors','__esModule','internalLogger','handleXmlParsingError','writeFile','files'];a149_0x330d=function(){return _0xf95f47;};return a149_0x330d();}'use strict';var __importDefault=this&&this[a149_0xf53c58(0x1d7)]||function(_0x2378ce){return _0x2378ce&&_0x2378ce['__esModule']?_0x2378ce:{'default':_0x2378ce};};Object[a149_0xf53c58(0x1a8)](exports,a149_0xf53c58(0x1cf),{'value':!![]}),exports[a149_0xf53c58(0x1af)]=void 0x0;const path_1=__importDefault(require(a149_0xf53c58(0x1be))),core_1=require('../../../../core'),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require('../errors/invalid-xml.error'),xml_v2_1=require(a149_0xf53c58(0x1b8)),zip_1=require(a149_0xf53c58(0x1ac)),child_types_1=__importDefault(require(a149_0xf53c58(0x1cc)));class MDApiWriter{constructor({components:_0x43889f,sourceDir:_0xdfef67,skipChildErrors:_0x8fd3b}){const _0x42109f=a149_0xf53c58;this[_0x42109f(0x1b9)]=0x64,this[_0x42109f(0x1c5)]={},this['internalLogger']=new core_1['Logger'](MDApiWriter[_0x42109f(0x19e)]),this[_0x42109f(0x1ad)]=_0x43889f,this[_0x42109f(0x19d)]=_0xdfef67,this[_0x42109f(0x1ce)]=_0x8fd3b;}async[a149_0xf53c58(0x1b4)](_0x5b737e,_0x38b27d=![]){const _0x3ef8e9=a149_0xf53c58,_0x309086=await zip_1[_0x3ef8e9(0x1a5)][_0x3ef8e9(0x1aa)](_0x5b737e),_0x5be804=[];for(const _0x1dad39 of Object[_0x3ef8e9(0x1a1)](_0x309086[_0x3ef8e9(0x1d3)])){!_0x309086[_0x3ef8e9(0x1d3)][_0x1dad39][_0x3ef8e9(0x1a3)]&&_0x5be804['push']({'filename':_0x1dad39,'body':await _0x309086['files'][_0x1dad39][_0x3ef8e9(0x1b7)](_0x38b27d?_0x3ef8e9(0x1ca):_0x3ef8e9(0x1c1))});}return _0x5be804;}async[a149_0xf53c58(0x1b6)](_0x4be78d){const _0x57dd71=a149_0xf53c58;try{const _0x2bcfec=await this['readZip'](_0x4be78d[_0x57dd71(0x1bb)],!![]);await Promise['all'](_0x2bcfec[_0x57dd71(0x1c4)](({filename:_0x4af54b,body:_0x7952e2})=>fs_internal_1['FS'][_0x57dd71(0x1d2)](path_1[_0x57dd71(0x1c7)][_0x57dd71(0x1a7)](this[_0x57dd71(0x19d)],_0x4af54b),_0x7952e2)));}catch(_0x585615){throw new Error('[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x4be78d[_0x57dd71(0x1c6)]+'\x20['+_0x4be78d[_0x57dd71(0x1b5)]+'].\x20Original\x20error:\x20'+_0x585615);}}['handleXmlParsingError'](_0x2b21e0,_0x54e090){const _0xdda1e6=a149_0xf53c58;throw new invalid_xml_error_1[(_0xdda1e6(0x1d6))]('[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20'+_0x54e090['fileName']+'\x20['+_0x54e090[_0xdda1e6(0x1b5)]+'].\x20Original\x20error:\x20'+_0x2b21e0);}async[a149_0xf53c58(0x1a0)](_0x1aac9d){const _0x31e582=a149_0xf53c58,{filename:_0x58a48f,body:_0x5e2ab7}=(await this['readZip'](_0x1aac9d[_0x31e582(0x1bb)]))[0x0];try{if(!this[_0x31e582(0x1c5)][_0x58a48f]){const _0x29392f=path_1[_0x31e582(0x1c7)][_0x31e582(0x1a7)](this[_0x31e582(0x19d)],_0x58a48f);if(await fs_internal_1['FS'][_0x31e582(0x1ae)](_0x29392f)){const _0x1ca904=await fs_internal_1['FS']['readFile'](_0x29392f);this[_0x31e582(0x1c5)][_0x58a48f]=await xml_v2_1[_0x31e582(0x1bd)][_0x31e582(0x1b3)](_0x1ca904)[_0x31e582(0x1ab)](_0x9e372c=>this[_0x31e582(0x1d1)](_0x9e372c,_0x1aac9d));}else{this[_0x31e582(0x1c5)][_0x58a48f]=await xml_v2_1[_0x31e582(0x1bd)][_0x31e582(0x1b3)](_0x5e2ab7)[_0x31e582(0x1ab)](_0x4394e0=>this[_0x31e582(0x1d1)](_0x4394e0,_0x1aac9d));return;}}const _0x1c4ca2=this[_0x31e582(0x1c5)][_0x58a48f],_0x2ab665=await xml_v2_1[_0x31e582(0x1bd)]['parse'](_0x5e2ab7)[_0x31e582(0x1ab)](_0x215b9c=>this[_0x31e582(0x1d1)](_0x215b9c,_0x1aac9d));xml_v2_1[_0x31e582(0x1bd)][_0x31e582(0x1a9)](_0x1c4ca2,_0x2ab665);}catch(_0x4ebb0b){if(_0x4ebb0b instanceof invalid_xml_error_1[_0x31e582(0x1d6)]){if(this[_0x31e582(0x1ce)])return;else throw _0x4ebb0b;}throw new Error(_0x31e582(0x1cb)+_0x1aac9d[_0x31e582(0x1c6)]+'\x20['+_0x1aac9d[_0x31e582(0x1b5)]+_0x31e582(0x1d5)+_0x4ebb0b);}}async[a149_0xf53c58(0x1b2)](){const _0x36e4d9=a149_0xf53c58;!await fs_internal_1['FS']['exists'](this[_0x36e4d9(0x19d)])&&await fs_internal_1['FS'][_0x36e4d9(0x1a2)](this[_0x36e4d9(0x19d)]);for(const _0x11d1ea of this['components']){!child_types_1['default'][_0x36e4d9(0x19f)](_0x11d1ea[_0x36e4d9(0x1b5)])?await this[_0x36e4d9(0x1b6)](_0x11d1ea):await this[_0x36e4d9(0x1a0)](_0x11d1ea);}const _0x590fac=Object[_0x36e4d9(0x1a1)](this['parentComponents']);this[_0x36e4d9(0x1d0)]['log'](_0x36e4d9(0x19c),this[_0x36e4d9(0x1ad)][_0x36e4d9(0x1bf)]);while(_0x590fac['length']){const _0x1768bc=_0x590fac[_0x36e4d9(0x1d4)](0x0,this[_0x36e4d9(0x1b9)]);for(const _0x34045e of _0x1768bc){await fs_internal_1['FS'][_0x36e4d9(0x1d2)](path_1[_0x36e4d9(0x1c7)][_0x36e4d9(0x1a7)](this[_0x36e4d9(0x19d)],_0x34045e),xml_v2_1[_0x36e4d9(0x1bd)][_0x36e4d9(0x1b0)](this['parentComponents'][_0x34045e]));}}this[_0x36e4d9(0x1c5)]={};}}exports[a149_0xf53c58(0x1af)]=MDApiWriter;