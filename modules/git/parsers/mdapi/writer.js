const a117_0x12c02f=a117_0x3e62;(function(_0xcb91cd,_0x1cfe16){const _0x242200=a117_0x3e62,_0x455500=_0xcb91cd();while(!![]){try{const _0x439733=parseInt(_0x242200(0x114))/0x1+parseInt(_0x242200(0x110))/0x2+-parseInt(_0x242200(0x111))/0x3*(parseInt(_0x242200(0xf6))/0x4)+parseInt(_0x242200(0x12a))/0x5+-parseInt(_0x242200(0xf2))/0x6*(-parseInt(_0x242200(0x123))/0x7)+parseInt(_0x242200(0x10c))/0x8*(-parseInt(_0x242200(0xfb))/0x9)+-parseInt(_0x242200(0xf1))/0xa;if(_0x439733===_0x1cfe16)break;else _0x455500['push'](_0x455500['shift']());}catch(_0xbc70aa){_0x455500['push'](_0x455500['shift']());}}}(a117_0x2c38,0xcf470));const a117_0x1dcc27=(function(){let _0x203dec=!![];return function(_0x14588b,_0x1093f8){const _0x51f896=_0x203dec?function(){const _0x5dd55d=a117_0x3e62;if(_0x1093f8){const _0x5bad8c=_0x1093f8[_0x5dd55d(0x11a)](_0x14588b,arguments);return _0x1093f8=null,_0x5bad8c;}}:function(){};return _0x203dec=![],_0x51f896;};}()),a117_0x2a31aa=a117_0x1dcc27(this,function(){const _0x47b2b4=a117_0x3e62;return a117_0x2a31aa[_0x47b2b4(0x117)]()['search'](_0x47b2b4(0x115))[_0x47b2b4(0x117)]()[_0x47b2b4(0x113)](a117_0x2a31aa)['search'](_0x47b2b4(0x115));});a117_0x2a31aa();'use strict';var __importDefault=this&&this[a117_0x12c02f(0x100)]||function(_0x5e37e3){return _0x5e37e3&&_0x5e37e3['__esModule']?_0x5e37e3:{'default':_0x5e37e3};};function a117_0x3e62(_0x4ad55f,_0x346bc2){const _0x5a38af=a117_0x2c38();return a117_0x3e62=function(_0x2a31aa,_0x1dcc27){_0x2a31aa=_0x2a31aa-0xef;let _0x2c38ec=_0x5a38af[_0x2a31aa];return _0x2c38ec;},a117_0x3e62(_0x4ad55f,_0x346bc2);}Object['defineProperty'](exports,a117_0x12c02f(0x11f),{'value':!![]}),exports[a117_0x12c02f(0x12f)]=void 0x0;const path_1=__importDefault(require(a117_0x12c02f(0x128))),core_1=require('../../../../core'),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require(a117_0x12c02f(0x126)),xml_1=require(a117_0x12c02f(0x11d)),zip_1=require(a117_0x12c02f(0x125)),child_types_1=__importDefault(require(a117_0x12c02f(0x102)));class MDApiWriter{constructor({components:_0x8c534c,sourceDir:_0x436afc,skipChildErrors:_0x52f1cc}){const _0x185947=a117_0x12c02f;this['MAX_WRITES_PER_TICK']=0x64,this[_0x185947(0x118)]={},this['internalLogger']=new core_1[(_0x185947(0x116))](MDApiWriter['name']),this['components']=_0x8c534c,this[_0x185947(0x122)]=_0x436afc,this[_0x185947(0x129)]=_0x52f1cc;}async[a117_0x12c02f(0x108)](_0x5c96e0,_0x241c3f=![]){const _0x35ebce=a117_0x12c02f,_0x475ed3=await zip_1['Zip'][_0x35ebce(0xf7)](_0x5c96e0),_0x4f46ee=[];for(const _0xb6c8df of Object['keys'](_0x475ed3[_0x35ebce(0x10d)])){!_0x475ed3['files'][_0xb6c8df][_0x35ebce(0xf0)]&&_0x4f46ee[_0x35ebce(0x10f)]({'filename':_0xb6c8df,'body':await _0x475ed3['files'][_0xb6c8df][_0x35ebce(0xf5)](_0x241c3f?'nodebuffer':_0x35ebce(0xf3))});}return _0x4f46ee;}async[a117_0x12c02f(0x12b)](_0x550525){const _0x4fd808=a117_0x12c02f;try{const _0x52c521=await this[_0x4fd808(0x108)](_0x550525[_0x4fd808(0x10b)],!![]);await Promise[_0x4fd808(0x127)](_0x52c521[_0x4fd808(0x12c)](({filename:_0xb8b677,body:_0x40f512})=>fs_internal_1['FS'][_0x4fd808(0x11c)](path_1[_0x4fd808(0xef)][_0x4fd808(0xfd)](this['sourceDir'],_0xb8b677),_0x40f512)));}catch(_0x4f7d1c){throw new Error(_0x4fd808(0x120)+_0x550525[_0x4fd808(0x104)]+'\x20['+_0x550525[_0x4fd808(0x101)]+_0x4fd808(0xfa)+_0x4f7d1c);}}[a117_0x12c02f(0x121)](_0x441067,_0x2d2f47){const _0x59ea4f=a117_0x12c02f;throw new invalid_xml_error_1['InvalidXmlError'](_0x59ea4f(0x112)+_0x2d2f47['fileName']+'\x20['+_0x2d2f47[_0x59ea4f(0x101)]+_0x59ea4f(0xfa)+_0x441067);}async['writeChild'](_0x52ea39){const _0x3b4966=a117_0x12c02f,{filename:_0x133133,body:_0x1ce940}=(await this[_0x3b4966(0x108)](_0x52ea39[_0x3b4966(0x10b)]))[0x0];try{if(!this['parentComponents'][_0x133133]){const _0x56f835=path_1['default'][_0x3b4966(0xfd)](this[_0x3b4966(0x122)],_0x133133);if(await fs_internal_1['FS']['exists'](_0x56f835)){const _0x1cb700=await fs_internal_1['FS'][_0x3b4966(0x109)](_0x56f835);this['parentComponents'][_0x133133]=await xml_1[_0x3b4966(0x119)][_0x3b4966(0x12e)](_0x1cb700)[_0x3b4966(0xf8)](_0x3694e7=>this[_0x3b4966(0x121)](_0x3694e7,_0x52ea39));}else{this[_0x3b4966(0x118)][_0x133133]=await xml_1[_0x3b4966(0x119)][_0x3b4966(0x12e)](_0x1ce940)[_0x3b4966(0xf8)](_0x217155=>this['handleXmlParsingError'](_0x217155,_0x52ea39));return;}}const _0x4f808c=this[_0x3b4966(0x118)][_0x133133],_0x2c3c8f=await xml_1[_0x3b4966(0x119)]['parse'](_0x1ce940)[_0x3b4966(0xf8)](_0xc85a26=>this[_0x3b4966(0x121)](_0xc85a26,_0x52ea39));xml_1[_0x3b4966(0x119)][_0x3b4966(0x10e)](_0x4f808c,_0x2c3c8f);}catch(_0x27bb3d){if(_0x27bb3d instanceof invalid_xml_error_1[_0x3b4966(0xfe)]){if(this['skipChildErrors'])return;else throw _0x27bb3d;}throw new Error(_0x3b4966(0x107)+_0x52ea39['fileName']+'\x20['+_0x52ea39[_0x3b4966(0x101)]+'].\x20Original\x20error:\x20'+_0x27bb3d);}}async['start'](){const _0x189820=a117_0x12c02f;!await fs_internal_1['FS'][_0x189820(0x11b)](this[_0x189820(0x122)])&&await fs_internal_1['FS'][_0x189820(0xf4)](this[_0x189820(0x122)]);for(const _0x4768c7 of this[_0x189820(0x103)]){!child_types_1[_0x189820(0xef)]['includes'](_0x4768c7[_0x189820(0x101)])?await this[_0x189820(0x12b)](_0x4768c7):await this[_0x189820(0xfc)](_0x4768c7);}const _0x2af9ff=Object[_0x189820(0xff)](this[_0x189820(0x118)]);this[_0x189820(0x106)][_0x189820(0x124)](_0x189820(0x11e),this['components']['length']);while(_0x2af9ff[_0x189820(0x10a)]){const _0x4f71c2=_0x2af9ff[_0x189820(0x12d)](0x0,this[_0x189820(0x105)]);for(const _0x1a438f of _0x4f71c2){await fs_internal_1['FS'][_0x189820(0x11c)](path_1['default'][_0x189820(0xfd)](this[_0x189820(0x122)],_0x1a438f),xml_1[_0x189820(0x119)][_0x189820(0xf9)](this[_0x189820(0x118)][_0x1a438f]));}}this['parentComponents']={};}}function a117_0x2c38(){const _0x51bb01=['path','skipChildErrors','3733890vXnrXW','writeParent','map','splice','parse','MDApiWriter','default','dir','19244970EBlddV','54ohwapF','text','makeDir','async','4DFTBeY','unzip','catch','convertToString','].\x20Original\x20error:\x20','4510179kLgJns','writeChild','join','InvalidXmlError','keys','__importDefault','fileType','../data/child-types','components','fileName','MAX_WRITES_PER_TICK','internalLogger','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','readZip','readFile','length','body','8PKWMrX','files','replaceOrAppend','push','3315598gtthvA','2183301CVmCjg','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','constructor','671087NXjuDH','(((.+)+)+)+$','Logger','toString','parentComponents','Xml','apply','exists','writeFile','../utils/xml','have\x20to\x20write\x20%d\x20files','__esModule','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','handleXmlParsingError','sourceDir','720797ViFrsx','log','../utils/zip','../errors/invalid-xml.error','all'];a117_0x2c38=function(){return _0x51bb01;};return a117_0x2c38();}exports[a117_0x12c02f(0x12f)]=MDApiWriter;