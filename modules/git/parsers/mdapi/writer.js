const a117_0x586a17=a117_0x5992;(function(_0x491279,_0x1342d0){const _0x399857=a117_0x5992,_0x127e0f=_0x491279();while(!![]){try{const _0x28e4f0=-parseInt(_0x399857(0x7c))/0x1*(parseInt(_0x399857(0x72))/0x2)+-parseInt(_0x399857(0x8a))/0x3*(parseInt(_0x399857(0x89))/0x4)+-parseInt(_0x399857(0x8b))/0x5+parseInt(_0x399857(0x94))/0x6*(-parseInt(_0x399857(0xa2))/0x7)+-parseInt(_0x399857(0x85))/0x8+parseInt(_0x399857(0x8c))/0x9*(parseInt(_0x399857(0x76))/0xa)+parseInt(_0x399857(0x79))/0xb;if(_0x28e4f0===_0x1342d0)break;else _0x127e0f['push'](_0x127e0f['shift']());}catch(_0x5b6748){_0x127e0f['push'](_0x127e0f['shift']());}}}(a117_0x1418,0xacf1c));const a117_0x1f9577=(function(){let _0x2e5218=!![];return function(_0x396404,_0x4e3b3d){const _0x11133c=_0x2e5218?function(){const _0x1b52e3=a117_0x5992;if(_0x4e3b3d){const _0x992831=_0x4e3b3d[_0x1b52e3(0x7d)](_0x396404,arguments);return _0x4e3b3d=null,_0x992831;}}:function(){};return _0x2e5218=![],_0x11133c;};}()),a117_0x38c5ee=a117_0x1f9577(this,function(){const _0x59a1b7=a117_0x5992;return a117_0x38c5ee[_0x59a1b7(0x6d)]()[_0x59a1b7(0x7a)]('(((.+)+)+)+$')[_0x59a1b7(0x6d)]()[_0x59a1b7(0xa1)](a117_0x38c5ee)['search'](_0x59a1b7(0x7f));});a117_0x38c5ee();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x427c63){const _0x172890=a117_0x5992;return _0x427c63&&_0x427c63[_0x172890(0x87)]?_0x427c63:{'default':_0x427c63};};function a117_0x5992(_0x1968f1,_0xf239dc){const _0x238ca5=a117_0x1418();return a117_0x5992=function(_0x38c5ee,_0x1f9577){_0x38c5ee=_0x38c5ee-0x67;let _0x141824=_0x238ca5[_0x38c5ee];return _0x141824;},a117_0x5992(_0x1968f1,_0xf239dc);}Object[a117_0x586a17(0x9a)](exports,a117_0x586a17(0x87),{'value':!![]}),exports['MDApiWriter']=void 0x0;const path_1=__importDefault(require(a117_0x586a17(0xa3))),core_1=require('../../../../core'),fs_internal_1=require(a117_0x586a17(0x99)),invalid_xml_error_1=require(a117_0x586a17(0x97)),xml_1=require('../utils/xml'),zip_1=require(a117_0x586a17(0x80)),child_types_1=__importDefault(require(a117_0x586a17(0x96)));class MDApiWriter{constructor({components:_0x1f2b1e,sourceDir:_0x56d6f2,skipChildErrors:_0x57f726}){const _0x3bd3d6=a117_0x586a17;this[_0x3bd3d6(0x91)]=0x64,this[_0x3bd3d6(0x9c)]={},this[_0x3bd3d6(0x71)]=new core_1[(_0x3bd3d6(0x82))](MDApiWriter[_0x3bd3d6(0x75)]),this[_0x3bd3d6(0x83)]=_0x1f2b1e,this[_0x3bd3d6(0x92)]=_0x56d6f2,this['skipChildErrors']=_0x57f726;}async[a117_0x586a17(0x81)](_0x4f2d45,_0x54fa2e=![]){const _0xe19323=a117_0x586a17,_0x2c9c52=await zip_1[_0xe19323(0x73)]['unzip'](_0x4f2d45),_0x2dde2e=[];for(const _0x2af0a4 of Object[_0xe19323(0x98)](_0x2c9c52[_0xe19323(0x68)])){!_0x2c9c52['files'][_0x2af0a4][_0xe19323(0x7e)]&&_0x2dde2e['push']({'filename':_0x2af0a4,'body':await _0x2c9c52['files'][_0x2af0a4][_0xe19323(0x69)](_0x54fa2e?_0xe19323(0x86):_0xe19323(0x9b))});}return _0x2dde2e;}async[a117_0x586a17(0x84)](_0x32bcf0){const _0x4a6c72=a117_0x586a17;try{const _0x24e241=await this[_0x4a6c72(0x81)](_0x32bcf0[_0x4a6c72(0xa4)],!![]);await Promise[_0x4a6c72(0x90)](_0x24e241[_0x4a6c72(0x6a)](({filename:_0x15daef,body:_0x20717b})=>fs_internal_1['FS'][_0x4a6c72(0x9d)](path_1[_0x4a6c72(0x88)][_0x4a6c72(0x74)](this['sourceDir'],_0x15daef),_0x20717b)));}catch(_0x3c63f6){throw new Error('[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20'+_0x32bcf0['fileName']+'\x20['+_0x32bcf0['fileType']+_0x4a6c72(0x9e)+_0x3c63f6);}}[a117_0x586a17(0x6f)](_0x80bb70,_0x563cb5){const _0x2d5580=a117_0x586a17;throw new invalid_xml_error_1['InvalidXmlError'](_0x2d5580(0x9f)+_0x563cb5[_0x2d5580(0x8e)]+'\x20['+_0x563cb5[_0x2d5580(0x7b)]+_0x2d5580(0x9e)+_0x80bb70);}async[a117_0x586a17(0x6e)](_0x2c34d3){const _0x38f6d2=a117_0x586a17,{filename:_0xb79259,body:_0x55b9a1}=(await this[_0x38f6d2(0x81)](_0x2c34d3[_0x38f6d2(0xa4)]))[0x0];try{if(!this[_0x38f6d2(0x9c)][_0xb79259]){const _0x420519=path_1[_0x38f6d2(0x88)][_0x38f6d2(0x74)](this[_0x38f6d2(0x92)],_0xb79259);if(await fs_internal_1['FS']['exists'](_0x420519)){const _0xa51e74=await fs_internal_1['FS']['readFile'](_0x420519);this[_0x38f6d2(0x9c)][_0xb79259]=await xml_1['Xml'][_0x38f6d2(0x6b)](_0xa51e74)[_0x38f6d2(0x8d)](_0x7c9ab4=>this[_0x38f6d2(0x6f)](_0x7c9ab4,_0x2c34d3));}else{this[_0x38f6d2(0x9c)][_0xb79259]=await xml_1[_0x38f6d2(0x93)][_0x38f6d2(0x6b)](_0x55b9a1)[_0x38f6d2(0x8d)](_0xd86269=>this[_0x38f6d2(0x6f)](_0xd86269,_0x2c34d3));return;}}const _0x49c02f=this[_0x38f6d2(0x9c)][_0xb79259],_0x3c3739=await xml_1[_0x38f6d2(0x93)]['parse'](_0x55b9a1)['catch'](_0x4fb8ba=>this['handleXmlParsingError'](_0x4fb8ba,_0x2c34d3));xml_1[_0x38f6d2(0x93)][_0x38f6d2(0x95)](_0x49c02f,_0x3c3739);}catch(_0xd22297){if(_0xd22297 instanceof invalid_xml_error_1[_0x38f6d2(0x6c)]){if(this[_0x38f6d2(0x78)])return;else throw _0xd22297;}throw new Error(_0x38f6d2(0x77)+_0x2c34d3[_0x38f6d2(0x8e)]+'\x20['+_0x2c34d3[_0x38f6d2(0x7b)]+_0x38f6d2(0x9e)+_0xd22297);}}async[a117_0x586a17(0xa0)](){const _0x345169=a117_0x586a17;!await fs_internal_1['FS']['exists'](this[_0x345169(0x92)])&&await fs_internal_1['FS'][_0x345169(0x70)](this[_0x345169(0x92)]);for(const _0x104aa3 of this[_0x345169(0x83)]){!child_types_1[_0x345169(0x88)][_0x345169(0xa5)](_0x104aa3[_0x345169(0x7b)])?await this[_0x345169(0x84)](_0x104aa3):await this[_0x345169(0x6e)](_0x104aa3);}const _0x510def=Object['keys'](this['parentComponents']);this[_0x345169(0x71)]['log']('have\x20to\x20write\x20%d\x20files',this[_0x345169(0x83)][_0x345169(0x67)]);while(_0x510def[_0x345169(0x67)]){const _0x6f89e0=_0x510def['splice'](0x0,this[_0x345169(0x91)]);for(const _0x31beca of _0x6f89e0){await fs_internal_1['FS']['writeFile'](path_1['default'][_0x345169(0x74)](this['sourceDir'],_0x31beca),xml_1[_0x345169(0x93)][_0x345169(0x8f)](this['parentComponents'][_0x31beca]));}}this['parentComponents']={};}}function a117_0x1418(){const _0x2d6bde=['defineProperty','text','parentComponents','writeFile','].\x20Original\x20error:\x20','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','start','constructor','7aLaIRG','path','body','includes','length','files','async','map','parse','InvalidXmlError','toString','writeChild','handleXmlParsingError','makeDir','internalLogger','303178BKpqFU','Zip','join','name','70LvEHeZ','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','skipChildErrors','34352395CjgWNT','search','fileType','9xuPxOj','apply','dir','(((.+)+)+)+$','../utils/zip','readZip','Logger','components','writeParent','9173568cNaWCQ','nodebuffer','__esModule','default','3556276NKibtZ','3ALIwab','186040LKBBBr','1331118ZyYnyg','catch','fileName','convertToString','all','MAX_WRITES_PER_TICK','sourceDir','Xml','75630tDGVcG','replaceOrAppend','../data/child-types','../errors/invalid-xml.error','keys','../../internal/fs.internal'];a117_0x1418=function(){return _0x2d6bde;};return a117_0x1418();}exports['MDApiWriter']=MDApiWriter;