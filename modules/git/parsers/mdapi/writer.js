const a153_0xe23f31=a153_0x5d78;(function(_0x5516bf,_0xa3b2ca){const _0x2e6404=a153_0x5d78,_0x343c09=_0x5516bf();while(!![]){try{const _0x2bb012=-parseInt(_0x2e6404(0x191))/0x1+parseInt(_0x2e6404(0x173))/0x2+parseInt(_0x2e6404(0x15e))/0x3*(parseInt(_0x2e6404(0x18c))/0x4)+-parseInt(_0x2e6404(0x172))/0x5+parseInt(_0x2e6404(0x15c))/0x6+parseInt(_0x2e6404(0x170))/0x7*(-parseInt(_0x2e6404(0x155))/0x8)+-parseInt(_0x2e6404(0x190))/0x9;if(_0x2bb012===_0xa3b2ca)break;else _0x343c09['push'](_0x343c09['shift']());}catch(_0x262dc2){_0x343c09['push'](_0x343c09['shift']());}}}(a153_0x32e5,0x5c742));const a153_0x58410f=(function(){let _0x63cba3=!![];return function(_0x3c2d7b,_0xc57947){const _0x3494de=_0x63cba3?function(){const _0x43f465=a153_0x5d78;if(_0xc57947){const _0x595fd1=_0xc57947[_0x43f465(0x162)](_0x3c2d7b,arguments);return _0xc57947=null,_0x595fd1;}}:function(){};return _0x63cba3=![],_0x3494de;};}()),a153_0x59f24b=a153_0x58410f(this,function(){const _0x1eb1c7=a153_0x5d78;return a153_0x59f24b[_0x1eb1c7(0x153)]()[_0x1eb1c7(0x182)]('(((.+)+)+)+$')[_0x1eb1c7(0x153)]()[_0x1eb1c7(0x16b)](a153_0x59f24b)['search'](_0x1eb1c7(0x154));});a153_0x59f24b();'use strict';function a153_0x5d78(_0x25e506,_0x1bee94){const _0x2aafda=a153_0x32e5();return a153_0x5d78=function(_0x59f24b,_0x58410f){_0x59f24b=_0x59f24b-0x153;let _0x32e5f2=_0x2aafda[_0x59f24b];return _0x32e5f2;},a153_0x5d78(_0x25e506,_0x1bee94);}function a153_0x32e5(){const _0x4d9a21=['internalLogger','readFile','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','writeChild','2137482ZctKpt','writeParent','9eYsniq','dir','convertToString','replaceOrAppend','apply','path','].\x20Original\x20error:\x20','Zip','../errors/invalid-xml.error','handleXmlParsingError','push','map','skipChildErrors','constructor','async','includes','catch','XmlV2','1436771oYIOJF','start','820350OcdSSN','1210414KryBNR','exists','sourceDir','__esModule','all','length','fileType','body','InvalidXmlError','components','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','writeFile','splice','../utils/zip','MAX_WRITES_PER_TICK','search','readZip','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','../utils/xml-v2','nodebuffer','default','join','keys','parentComponents','../data/child-types','631528VZMvEY','makeDir','fileName','files','3140766hHXjgY','132860sqEIPq','MDApiWriter','toString','(((.+)+)+)+$','16aHBqZK','parse','Logger'];a153_0x32e5=function(){return _0x4d9a21;};return a153_0x32e5();}var __importDefault=this&&this['__importDefault']||function(_0x3e8df3){return _0x3e8df3&&_0x3e8df3['__esModule']?_0x3e8df3:{'default':_0x3e8df3};};Object['defineProperty'](exports,a153_0xe23f31(0x176),{'value':!![]}),exports[a153_0xe23f31(0x192)]=void 0x0;const path_1=__importDefault(require(a153_0xe23f31(0x163))),core_1=require('../../../../core'),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require(a153_0xe23f31(0x166)),xml_v2_1=require(a153_0xe23f31(0x185)),zip_1=require(a153_0xe23f31(0x180)),child_types_1=__importDefault(require(a153_0xe23f31(0x18b)));class MDApiWriter{constructor({components:_0x42f91b,sourceDir:_0x338eeb,skipChildErrors:_0x323d7d}){const _0x37e84d=a153_0xe23f31;this[_0x37e84d(0x181)]=0x64,this[_0x37e84d(0x18a)]={},this[_0x37e84d(0x158)]=new core_1[(_0x37e84d(0x157))](MDApiWriter['name']),this['components']=_0x42f91b,this[_0x37e84d(0x175)]=_0x338eeb,this[_0x37e84d(0x16a)]=_0x323d7d;}async[a153_0xe23f31(0x183)](_0x2705b9,_0x239bc0=![]){const _0x2c33db=a153_0xe23f31,_0x4fa312=await zip_1[_0x2c33db(0x165)]['unzip'](_0x2705b9),_0x7fdb03=[];for(const _0x3250d4 of Object[_0x2c33db(0x189)](_0x4fa312['files'])){!_0x4fa312['files'][_0x3250d4][_0x2c33db(0x15f)]&&_0x7fdb03[_0x2c33db(0x168)]({'filename':_0x3250d4,'body':await _0x4fa312[_0x2c33db(0x18f)][_0x3250d4][_0x2c33db(0x16c)](_0x239bc0?_0x2c33db(0x186):'text')});}return _0x7fdb03;}async[a153_0xe23f31(0x15d)](_0x31284a){const _0x2201e6=a153_0xe23f31;try{const _0x2d377b=await this[_0x2201e6(0x183)](_0x31284a[_0x2201e6(0x17a)],!![]);await Promise[_0x2201e6(0x177)](_0x2d377b[_0x2201e6(0x169)](({filename:_0x3dcef1,body:_0x57e48c})=>fs_internal_1['FS']['writeFile'](path_1[_0x2201e6(0x187)][_0x2201e6(0x188)](this[_0x2201e6(0x175)],_0x3dcef1),_0x57e48c)));}catch(_0x2fce86){throw new Error(_0x2201e6(0x15a)+_0x31284a[_0x2201e6(0x18e)]+'\x20['+_0x31284a[_0x2201e6(0x179)]+_0x2201e6(0x164)+_0x2fce86);}}[a153_0xe23f31(0x167)](_0x3a17d3,_0x5ee24e){const _0x578fb7=a153_0xe23f31;throw new invalid_xml_error_1[(_0x578fb7(0x17b))](_0x578fb7(0x184)+_0x5ee24e[_0x578fb7(0x18e)]+'\x20['+_0x5ee24e[_0x578fb7(0x179)]+_0x578fb7(0x164)+_0x3a17d3);}async[a153_0xe23f31(0x15b)](_0x153de5){const _0x308721=a153_0xe23f31,{filename:_0x2291ae,body:_0x583a91}=(await this[_0x308721(0x183)](_0x153de5['body']))[0x0];try{if(!this[_0x308721(0x18a)][_0x2291ae]){const _0x5ac5b1=path_1[_0x308721(0x187)][_0x308721(0x188)](this['sourceDir'],_0x2291ae);if(await fs_internal_1['FS'][_0x308721(0x174)](_0x5ac5b1)){const _0x111042=await fs_internal_1['FS'][_0x308721(0x159)](_0x5ac5b1);this['parentComponents'][_0x2291ae]=await xml_v2_1[_0x308721(0x16f)][_0x308721(0x156)](_0x111042)['catch'](_0x1802c4=>this[_0x308721(0x167)](_0x1802c4,_0x153de5));}else{this[_0x308721(0x18a)][_0x2291ae]=await xml_v2_1[_0x308721(0x16f)][_0x308721(0x156)](_0x583a91)[_0x308721(0x16e)](_0xbf787d=>this['handleXmlParsingError'](_0xbf787d,_0x153de5));return;}}const _0x303231=this[_0x308721(0x18a)][_0x2291ae],_0x191263=await xml_v2_1[_0x308721(0x16f)][_0x308721(0x156)](_0x583a91)[_0x308721(0x16e)](_0x3a2a35=>this[_0x308721(0x167)](_0x3a2a35,_0x153de5));xml_v2_1[_0x308721(0x16f)][_0x308721(0x161)](_0x303231,_0x191263);}catch(_0x50e764){if(_0x50e764 instanceof invalid_xml_error_1[_0x308721(0x17b)]){if(this[_0x308721(0x16a)])return;else throw _0x50e764;}throw new Error(_0x308721(0x17d)+_0x153de5['fileName']+'\x20['+_0x153de5['fileType']+_0x308721(0x164)+_0x50e764);}}async[a153_0xe23f31(0x171)](){const _0x5d185e=a153_0xe23f31;!await fs_internal_1['FS'][_0x5d185e(0x174)](this['sourceDir'])&&await fs_internal_1['FS'][_0x5d185e(0x18d)](this[_0x5d185e(0x175)]);for(const _0x1657ad of this[_0x5d185e(0x17c)]){!child_types_1['default'][_0x5d185e(0x16d)](_0x1657ad[_0x5d185e(0x179)])?await this['writeParent'](_0x1657ad):await this[_0x5d185e(0x15b)](_0x1657ad);}const _0x349b7e=Object[_0x5d185e(0x189)](this[_0x5d185e(0x18a)]);this[_0x5d185e(0x158)]['log']('have\x20to\x20write\x20%d\x20files',this[_0x5d185e(0x17c)]['length']);while(_0x349b7e[_0x5d185e(0x178)]){const _0x266938=_0x349b7e[_0x5d185e(0x17f)](0x0,this[_0x5d185e(0x181)]);for(const _0x5c77cf of _0x266938){await fs_internal_1['FS'][_0x5d185e(0x17e)](path_1[_0x5d185e(0x187)]['join'](this[_0x5d185e(0x175)],_0x5c77cf),xml_v2_1[_0x5d185e(0x16f)][_0x5d185e(0x160)](this[_0x5d185e(0x18a)][_0x5c77cf]));}}this['parentComponents']={};}}exports['MDApiWriter']=MDApiWriter;