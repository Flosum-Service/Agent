const a149_0x889188=a149_0x1e12;(function(_0x4fbba4,_0x2c36aa){const _0x389bca=a149_0x1e12,_0x181f60=_0x4fbba4();while(!![]){try{const _0x19326b=-parseInt(_0x389bca(0x1dd))/0x1+-parseInt(_0x389bca(0x1cb))/0x2+parseInt(_0x389bca(0x1c6))/0x3*(-parseInt(_0x389bca(0x1f5))/0x4)+-parseInt(_0x389bca(0x1da))/0x5+parseInt(_0x389bca(0x1f1))/0x6*(-parseInt(_0x389bca(0x1f9))/0x7)+-parseInt(_0x389bca(0x1fe))/0x8*(-parseInt(_0x389bca(0x1bc))/0x9)+parseInt(_0x389bca(0x1c4))/0xa*(parseInt(_0x389bca(0x1bd))/0xb);if(_0x19326b===_0x2c36aa)break;else _0x181f60['push'](_0x181f60['shift']());}catch(_0x484482){_0x181f60['push'](_0x181f60['shift']());}}}(a149_0x4340,0x225ac));const a149_0x3b075a=(function(){let _0x78df1e=!![];return function(_0x3f47fb,_0x49ab18){const _0x24df77=_0x78df1e?function(){if(_0x49ab18){const _0x4e154b=_0x49ab18['apply'](_0x3f47fb,arguments);return _0x49ab18=null,_0x4e154b;}}:function(){};return _0x78df1e=![],_0x24df77;};}()),a149_0x5b02e5=a149_0x3b075a(this,function(){const _0x1df86=a149_0x1e12;return a149_0x5b02e5['toString']()[_0x1df86(0x1f7)]('(((.+)+)+)+$')[_0x1df86(0x1c8)]()[_0x1df86(0x1f3)](a149_0x5b02e5)[_0x1df86(0x1f7)](_0x1df86(0x1e1));});a149_0x5b02e5();'use strict';function a149_0x1e12(_0x21ee04,_0x374b46){const _0x10f1ed=a149_0x4340();return a149_0x1e12=function(_0x5b02e5,_0x3b075a){_0x5b02e5=_0x5b02e5-0x1bc;let _0x43405d=_0x10f1ed[_0x5b02e5];return _0x43405d;},a149_0x1e12(_0x21ee04,_0x374b46);}var __importDefault=this&&this[a149_0x889188(0x1f2)]||function(_0x1d482b){const _0x4d03bf=a149_0x889188;return _0x1d482b&&_0x1d482b[_0x4d03bf(0x1df)]?_0x1d482b:{'default':_0x1d482b};};Object[a149_0x889188(0x1c0)](exports,a149_0x889188(0x1df),{'value':!![]}),exports['MDApiWriter']=void 0x0;const path_1=__importDefault(require(a149_0x889188(0x1d1))),core_1=require(a149_0x889188(0x1ee)),fs_internal_1=require(a149_0x889188(0x1fb)),invalid_xml_error_1=require(a149_0x889188(0x1db)),xml_v2_1=require('../utils/xml-v2'),zip_1=require(a149_0x889188(0x1c7)),child_types_1=__importDefault(require('../data/child-types'));function a149_0x4340(){const _0x238d69=['internalLogger','have\x20to\x20write\x20%d\x20files','catch','default','Zip','parse','length','nodebuffer','parentComponents','text','all','Logger','../../../../core','].\x20Original\x20error:\x20','keys','6LyAIXp','__importDefault','constructor','name','4Ioikvl','map','search','fileType','692167ReyBHX','async','../../internal/fs.internal','join','log','24RsjhbS','194013cTDcTG','11QAoYbY','includes','start','defineProperty','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','components','body','5692340imvOkU','replaceOrAppend','24723SKesAh','../utils/zip','toString','convertToString','exists','543880IRnEwy','handleXmlParsingError','writeChild','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','fileName','MAX_WRITES_PER_TICK','path','splice','sourceDir','dir','readFile','writeParent','skipChildErrors','readZip','files','167015bTTpAe','../errors/invalid-xml.error','makeDir','80724hvWxvA','InvalidXmlError','__esModule','XmlV2','(((.+)+)+)+$'];a149_0x4340=function(){return _0x238d69;};return a149_0x4340();}class MDApiWriter{constructor({components:_0x1fdf86,sourceDir:_0x1fc8b3,skipChildErrors:_0x32fd86}){const _0x21a510=a149_0x889188;this['MAX_WRITES_PER_TICK']=0x64,this[_0x21a510(0x1ea)]={},this[_0x21a510(0x1e2)]=new core_1[(_0x21a510(0x1ed))](MDApiWriter[_0x21a510(0x1f4)]),this[_0x21a510(0x1c2)]=_0x1fdf86,this[_0x21a510(0x1d3)]=_0x1fc8b3,this['skipChildErrors']=_0x32fd86;}async['readZip'](_0x3edbf2,_0x1ee817=![]){const _0x4d52b4=a149_0x889188,_0x389501=await zip_1[_0x4d52b4(0x1e6)]['unzip'](_0x3edbf2),_0x3e1db=[];for(const _0x319679 of Object['keys'](_0x389501[_0x4d52b4(0x1d9)])){!_0x389501['files'][_0x319679][_0x4d52b4(0x1d4)]&&_0x3e1db['push']({'filename':_0x319679,'body':await _0x389501[_0x4d52b4(0x1d9)][_0x319679][_0x4d52b4(0x1fa)](_0x1ee817?_0x4d52b4(0x1e9):_0x4d52b4(0x1eb))});}return _0x3e1db;}async['writeParent'](_0x51856a){const _0x5cba37=a149_0x889188;try{const _0x1693b8=await this['readZip'](_0x51856a[_0x5cba37(0x1c3)],!![]);await Promise[_0x5cba37(0x1ec)](_0x1693b8[_0x5cba37(0x1f6)](({filename:_0x4a4ef7,body:_0xeb5c26})=>fs_internal_1['FS']['writeFile'](path_1['default'][_0x5cba37(0x1fc)](this[_0x5cba37(0x1d3)],_0x4a4ef7),_0xeb5c26)));}catch(_0x5934a8){throw new Error('[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x51856a[_0x5cba37(0x1cf)]+'\x20['+_0x51856a['fileType']+_0x5cba37(0x1ef)+_0x5934a8);}}['handleXmlParsingError'](_0x3a5adc,_0xf2b625){const _0x234d5=a149_0x889188;throw new invalid_xml_error_1[(_0x234d5(0x1de))](_0x234d5(0x1ce)+_0xf2b625['fileName']+'\x20['+_0xf2b625['fileType']+_0x234d5(0x1ef)+_0x3a5adc);}async[a149_0x889188(0x1cd)](_0x3fd068){const _0x11d3ce=a149_0x889188,{filename:_0x2535c4,body:_0x1177c3}=(await this[_0x11d3ce(0x1d8)](_0x3fd068[_0x11d3ce(0x1c3)]))[0x0];try{if(!this[_0x11d3ce(0x1ea)][_0x2535c4]){const _0x49ac10=path_1[_0x11d3ce(0x1e5)]['join'](this['sourceDir'],_0x2535c4);if(await fs_internal_1['FS'][_0x11d3ce(0x1ca)](_0x49ac10)){const _0x74ac77=await fs_internal_1['FS'][_0x11d3ce(0x1d5)](_0x49ac10);this['parentComponents'][_0x2535c4]=await xml_v2_1[_0x11d3ce(0x1e0)][_0x11d3ce(0x1e7)](_0x74ac77)[_0x11d3ce(0x1e4)](_0x438cea=>this[_0x11d3ce(0x1cc)](_0x438cea,_0x3fd068));}else{this[_0x11d3ce(0x1ea)][_0x2535c4]=await xml_v2_1[_0x11d3ce(0x1e0)][_0x11d3ce(0x1e7)](_0x1177c3)['catch'](_0x14dcb2=>this[_0x11d3ce(0x1cc)](_0x14dcb2,_0x3fd068));return;}}const _0x3ff05a=this[_0x11d3ce(0x1ea)][_0x2535c4],_0x4c6132=await xml_v2_1[_0x11d3ce(0x1e0)]['parse'](_0x1177c3)[_0x11d3ce(0x1e4)](_0x58055b=>this[_0x11d3ce(0x1cc)](_0x58055b,_0x3fd068));xml_v2_1[_0x11d3ce(0x1e0)][_0x11d3ce(0x1c5)](_0x3ff05a,_0x4c6132);}catch(_0xa9a608){if(_0xa9a608 instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0x11d3ce(0x1d7)])return;else throw _0xa9a608;}throw new Error(_0x11d3ce(0x1c1)+_0x3fd068['fileName']+'\x20['+_0x3fd068[_0x11d3ce(0x1f8)]+_0x11d3ce(0x1ef)+_0xa9a608);}}async[a149_0x889188(0x1bf)](){const _0x4afe35=a149_0x889188;!await fs_internal_1['FS'][_0x4afe35(0x1ca)](this[_0x4afe35(0x1d3)])&&await fs_internal_1['FS'][_0x4afe35(0x1dc)](this[_0x4afe35(0x1d3)]);for(const _0x447cb8 of this[_0x4afe35(0x1c2)]){!child_types_1[_0x4afe35(0x1e5)][_0x4afe35(0x1be)](_0x447cb8['fileType'])?await this[_0x4afe35(0x1d6)](_0x447cb8):await this[_0x4afe35(0x1cd)](_0x447cb8);}const _0x159d78=Object[_0x4afe35(0x1f0)](this[_0x4afe35(0x1ea)]);this['internalLogger'][_0x4afe35(0x1fd)](_0x4afe35(0x1e3),this['components'][_0x4afe35(0x1e8)]);while(_0x159d78['length']){const _0x1ea0ff=_0x159d78[_0x4afe35(0x1d2)](0x0,this[_0x4afe35(0x1d0)]);for(const _0x39f0f8 of _0x1ea0ff){await fs_internal_1['FS']['writeFile'](path_1[_0x4afe35(0x1e5)][_0x4afe35(0x1fc)](this[_0x4afe35(0x1d3)],_0x39f0f8),xml_v2_1[_0x4afe35(0x1e0)][_0x4afe35(0x1c9)](this['parentComponents'][_0x39f0f8]));}}this[_0x4afe35(0x1ea)]={};}}exports['MDApiWriter']=MDApiWriter;