const a149_0x331fd3=a149_0x3807;(function(_0x2832ce,_0x502bea){const _0x3ad76d=a149_0x3807,_0x22d1cc=_0x2832ce();while(!![]){try{const _0x7016fc=parseInt(_0x3ad76d(0x114))/0x1*(-parseInt(_0x3ad76d(0x13c))/0x2)+parseInt(_0x3ad76d(0x139))/0x3+parseInt(_0x3ad76d(0x11d))/0x4+-parseInt(_0x3ad76d(0x149))/0x5+parseInt(_0x3ad76d(0x11f))/0x6*(parseInt(_0x3ad76d(0x14a))/0x7)+-parseInt(_0x3ad76d(0x11c))/0x8*(-parseInt(_0x3ad76d(0x11e))/0x9)+-parseInt(_0x3ad76d(0x137))/0xa*(parseInt(_0x3ad76d(0x146))/0xb);if(_0x7016fc===_0x502bea)break;else _0x22d1cc['push'](_0x22d1cc['shift']());}catch(_0x2791e7){_0x22d1cc['push'](_0x22d1cc['shift']());}}}(a149_0x17f9,0x78792));const a149_0x56cfae=(function(){let _0x3dcfe9=!![];return function(_0x39a588,_0x5e9fa8){const _0x238a56=_0x3dcfe9?function(){const _0x1b4668=a149_0x3807;if(_0x5e9fa8){const _0x431d35=_0x5e9fa8[_0x1b4668(0x125)](_0x39a588,arguments);return _0x5e9fa8=null,_0x431d35;}}:function(){};return _0x3dcfe9=![],_0x238a56;};}()),a149_0x4311a4=a149_0x56cfae(this,function(){const _0x1c3b8f=a149_0x3807;return a149_0x4311a4[_0x1c3b8f(0x134)]()[_0x1c3b8f(0x12e)](_0x1c3b8f(0x13d))[_0x1c3b8f(0x134)]()[_0x1c3b8f(0x13a)](a149_0x4311a4)[_0x1c3b8f(0x12e)]('(((.+)+)+)+$');});a149_0x4311a4();'use strict';function a149_0x3807(_0x42ca2a,_0xabc778){const _0x35254e=a149_0x17f9();return a149_0x3807=function(_0x4311a4,_0x56cfae){_0x4311a4=_0x4311a4-0x10d;let _0x17f901=_0x35254e[_0x4311a4];return _0x17f901;},a149_0x3807(_0x42ca2a,_0xabc778);}var __importDefault=this&&this[a149_0x331fd3(0x112)]||function(_0x875b){const _0x70881a=a149_0x331fd3;return _0x875b&&_0x875b[_0x70881a(0x12c)]?_0x875b:{'default':_0x875b};};Object['defineProperty'](exports,a149_0x331fd3(0x12c),{'value':!![]}),exports[a149_0x331fd3(0x13f)]=void 0x0;function a149_0x17f9(){const _0x5c0846=['all','Logger','log','name','components','apply','../../internal/fs.internal','files','writeChild','default','Zip','].\x20Original\x20error:\x20','__esModule','map','search','async','internalLogger','fileName','readFile','length','toString','InvalidXmlError','makeDir','10haaNQA','exists','868752plQMph','constructor','parse','17844hKaitv','(((.+)+)+)+$','text','MDApiWriter','writeParent','writeFile','dir','path','handleXmlParsingError','catch','7863559mqoMuI','splice','../errors/invalid-xml.error','1162550zvxRoU','862785ethRFC','../../../../core','parentComponents','../utils/zip','skipChildErrors','join','body','fileType','XmlV2','sourceDir','convertToString','unzip','__importDefault','../data/child-types','20qiQdRV','MAX_WRITES_PER_TICK','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','push','nodebuffer','readZip','have\x20to\x20write\x20%d\x20files','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','202088IYVvRI','2247408FnedjE','54pthrUO','30QTBcDC'];a149_0x17f9=function(){return _0x5c0846;};return a149_0x17f9();}const path_1=__importDefault(require(a149_0x331fd3(0x143))),core_1=require(a149_0x331fd3(0x14b)),fs_internal_1=require(a149_0x331fd3(0x126)),invalid_xml_error_1=require(a149_0x331fd3(0x148)),xml_v2_1=require('../utils/xml-v2'),zip_1=require(a149_0x331fd3(0x14d)),child_types_1=__importDefault(require(a149_0x331fd3(0x113)));class MDApiWriter{constructor({components:_0x1a35ef,sourceDir:_0xec6490,skipChildErrors:_0x3230dc}){const _0x5df933=a149_0x331fd3;this['MAX_WRITES_PER_TICK']=0x64,this[_0x5df933(0x14c)]={},this['internalLogger']=new core_1[(_0x5df933(0x121))](MDApiWriter[_0x5df933(0x123)]),this[_0x5df933(0x124)]=_0x1a35ef,this['sourceDir']=_0xec6490,this[_0x5df933(0x14e)]=_0x3230dc;}async[a149_0x331fd3(0x119)](_0x1e003c,_0x15a0d0=![]){const _0x3257e4=a149_0x331fd3,_0x29707d=await zip_1[_0x3257e4(0x12a)][_0x3257e4(0x111)](_0x1e003c),_0x2ebda3=[];for(const _0x2214c6 of Object['keys'](_0x29707d[_0x3257e4(0x127)])){!_0x29707d[_0x3257e4(0x127)][_0x2214c6][_0x3257e4(0x142)]&&_0x2ebda3[_0x3257e4(0x117)]({'filename':_0x2214c6,'body':await _0x29707d[_0x3257e4(0x127)][_0x2214c6][_0x3257e4(0x12f)](_0x15a0d0?_0x3257e4(0x118):_0x3257e4(0x13e))});}return _0x2ebda3;}async[a149_0x331fd3(0x140)](_0x1f0fc9){const _0x1c5085=a149_0x331fd3;try{const _0x191da3=await this[_0x1c5085(0x119)](_0x1f0fc9[_0x1c5085(0x150)],!![]);await Promise[_0x1c5085(0x120)](_0x191da3[_0x1c5085(0x12d)](({filename:_0x2208c4,body:_0x14e48f})=>fs_internal_1['FS'][_0x1c5085(0x141)](path_1['default']['join'](this[_0x1c5085(0x10f)],_0x2208c4),_0x14e48f)));}catch(_0x4cd6fa){throw new Error('[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x1f0fc9['fileName']+'\x20['+_0x1f0fc9[_0x1c5085(0x10d)]+_0x1c5085(0x12b)+_0x4cd6fa);}}[a149_0x331fd3(0x144)](_0x2c0e04,_0x14cc60){const _0xc4f51e=a149_0x331fd3;throw new invalid_xml_error_1[(_0xc4f51e(0x135))](_0xc4f51e(0x11b)+_0x14cc60['fileName']+'\x20['+_0x14cc60['fileType']+_0xc4f51e(0x12b)+_0x2c0e04);}async[a149_0x331fd3(0x128)](_0x9ed33){const _0x2d68fa=a149_0x331fd3,{filename:_0x37792d,body:_0x1eb89c}=(await this[_0x2d68fa(0x119)](_0x9ed33[_0x2d68fa(0x150)]))[0x0];try{if(!this[_0x2d68fa(0x14c)][_0x37792d]){const _0xd34eb5=path_1[_0x2d68fa(0x129)][_0x2d68fa(0x14f)](this[_0x2d68fa(0x10f)],_0x37792d);if(await fs_internal_1['FS'][_0x2d68fa(0x138)](_0xd34eb5)){const _0x1850c6=await fs_internal_1['FS'][_0x2d68fa(0x132)](_0xd34eb5);this[_0x2d68fa(0x14c)][_0x37792d]=await xml_v2_1[_0x2d68fa(0x10e)][_0x2d68fa(0x13b)](_0x1850c6)[_0x2d68fa(0x145)](_0x1247fb=>this[_0x2d68fa(0x144)](_0x1247fb,_0x9ed33));}else{this[_0x2d68fa(0x14c)][_0x37792d]=await xml_v2_1[_0x2d68fa(0x10e)][_0x2d68fa(0x13b)](_0x1eb89c)['catch'](_0x3b2f6a=>this[_0x2d68fa(0x144)](_0x3b2f6a,_0x9ed33));return;}}const _0xe5dacc=this[_0x2d68fa(0x14c)][_0x37792d],_0x2590b9=await xml_v2_1[_0x2d68fa(0x10e)]['parse'](_0x1eb89c)['catch'](_0xf82b9=>this[_0x2d68fa(0x144)](_0xf82b9,_0x9ed33));xml_v2_1[_0x2d68fa(0x10e)]['replaceOrAppend'](_0xe5dacc,_0x2590b9);}catch(_0x5f34d8){if(_0x5f34d8 instanceof invalid_xml_error_1[_0x2d68fa(0x135)]){if(this['skipChildErrors'])return;else throw _0x5f34d8;}throw new Error(_0x2d68fa(0x116)+_0x9ed33[_0x2d68fa(0x131)]+'\x20['+_0x9ed33[_0x2d68fa(0x10d)]+_0x2d68fa(0x12b)+_0x5f34d8);}}async['start'](){const _0x1f5de6=a149_0x331fd3;!await fs_internal_1['FS'][_0x1f5de6(0x138)](this[_0x1f5de6(0x10f)])&&await fs_internal_1['FS'][_0x1f5de6(0x136)](this[_0x1f5de6(0x10f)]);for(const _0x2c2fe4 of this['components']){!child_types_1[_0x1f5de6(0x129)]['includes'](_0x2c2fe4[_0x1f5de6(0x10d)])?await this['writeParent'](_0x2c2fe4):await this[_0x1f5de6(0x128)](_0x2c2fe4);}const _0x4cb10f=Object['keys'](this[_0x1f5de6(0x14c)]);this[_0x1f5de6(0x130)][_0x1f5de6(0x122)](_0x1f5de6(0x11a),this['components'][_0x1f5de6(0x133)]);while(_0x4cb10f['length']){const _0x96e53f=_0x4cb10f[_0x1f5de6(0x147)](0x0,this[_0x1f5de6(0x115)]);for(const _0x399441 of _0x96e53f){await fs_internal_1['FS'][_0x1f5de6(0x141)](path_1[_0x1f5de6(0x129)][_0x1f5de6(0x14f)](this['sourceDir'],_0x399441),xml_v2_1[_0x1f5de6(0x10e)][_0x1f5de6(0x110)](this[_0x1f5de6(0x14c)][_0x399441]));}}this[_0x1f5de6(0x14c)]={};}}exports[a149_0x331fd3(0x13f)]=MDApiWriter;