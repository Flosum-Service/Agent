const a153_0x2d556a=a153_0x40d1;function a153_0x2a81(){const _0x400fb9=['__esModule','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','start','dir','catch','1692155bLYxWi','keys','2646288GdVUHu','773356MLKNYO','__importDefault','replaceOrAppend','../../../../core','fileName','MDApiWriter','toString','includes','InvalidXmlError','map','skipChildErrors','fileType','337208noVTXO','path','sourceDir','../errors/invalid-xml.error','MAX_WRITES_PER_TICK','log','readZip','1919238CmBRKX','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','parse','../../internal/fs.internal','search','apply','handleXmlParsingError','960621XxdlyQ','writeFile','splice','(((.+)+)+)+$','].\x20Original\x20error:\x20','Zip','exists','join','../utils/xml-v2','internalLogger','have\x20to\x20write\x20%d\x20files','writeChild','body','length','../data/child-types','../utils/zip','files','nodebuffer','Logger','defineProperty','default','makeDir','parentComponents','all','writeParent','167752PgDMuD','components','7yiZeAG','XmlV2','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'];a153_0x2a81=function(){return _0x400fb9;};return a153_0x2a81();}(function(_0x689587,_0x12bd6f){const _0x2520ac=a153_0x40d1,_0x36c1b1=_0x689587();while(!![]){try{const _0x39f240=parseInt(_0x2520ac(0x1e0))/0x1+-parseInt(_0x2520ac(0x1f9))/0x2+-parseInt(_0x2520ac(0x1c7))/0x3+parseInt(_0x2520ac(0x1ed))/0x4+parseInt(_0x2520ac(0x1ea))/0x5+-parseInt(_0x2520ac(0x1c0))/0x6*(parseInt(_0x2520ac(0x1e2))/0x7)+parseInt(_0x2520ac(0x1ec))/0x8;if(_0x39f240===_0x12bd6f)break;else _0x36c1b1['push'](_0x36c1b1['shift']());}catch(_0x57f93e){_0x36c1b1['push'](_0x36c1b1['shift']());}}}(a153_0x2a81,0x361b8));const a153_0x511115=(function(){let _0x5a03d=!![];return function(_0x164ea4,_0x131515){const _0x14e1d4=_0x5a03d?function(){const _0x1572a4=a153_0x40d1;if(_0x131515){const _0x975337=_0x131515[_0x1572a4(0x1c5)](_0x164ea4,arguments);return _0x131515=null,_0x975337;}}:function(){};return _0x5a03d=![],_0x14e1d4;};}()),a153_0x5962f5=a153_0x511115(this,function(){const _0x348a8c=a153_0x40d1;return a153_0x5962f5[_0x348a8c(0x1f3)]()['search'](_0x348a8c(0x1ca))[_0x348a8c(0x1f3)]()['constructor'](a153_0x5962f5)[_0x348a8c(0x1c4)](_0x348a8c(0x1ca));});a153_0x5962f5();'use strict';var __importDefault=this&&this[a153_0x2d556a(0x1ee)]||function(_0x1691d5){const _0x5771b6=a153_0x2d556a;return _0x1691d5&&_0x1691d5[_0x5771b6(0x1e5)]?_0x1691d5:{'default':_0x1691d5};};function a153_0x40d1(_0x21dec0,_0x300d3f){const _0x46d8b2=a153_0x2a81();return a153_0x40d1=function(_0x5962f5,_0x511115){_0x5962f5=_0x5962f5-0x1bf;let _0x2a8183=_0x46d8b2[_0x5962f5];return _0x2a8183;},a153_0x40d1(_0x21dec0,_0x300d3f);}Object[a153_0x2d556a(0x1da)](exports,a153_0x2d556a(0x1e5),{'value':!![]}),exports[a153_0x2d556a(0x1f2)]=void 0x0;const path_1=__importDefault(require(a153_0x2d556a(0x1fa))),core_1=require(a153_0x2d556a(0x1f0)),fs_internal_1=require(a153_0x2d556a(0x1c3)),invalid_xml_error_1=require(a153_0x2d556a(0x1fc)),xml_v2_1=require(a153_0x2d556a(0x1cf)),zip_1=require(a153_0x2d556a(0x1d6)),child_types_1=__importDefault(require(a153_0x2d556a(0x1d5)));class MDApiWriter{constructor({components:_0x3e8581,sourceDir:_0x4415de,skipChildErrors:_0x10cdb5}){const _0x3704ad=a153_0x2d556a;this['MAX_WRITES_PER_TICK']=0x64,this['parentComponents']={},this[_0x3704ad(0x1d0)]=new core_1[(_0x3704ad(0x1d9))](MDApiWriter['name']),this[_0x3704ad(0x1e1)]=_0x3e8581,this[_0x3704ad(0x1fb)]=_0x4415de,this[_0x3704ad(0x1f7)]=_0x10cdb5;}async[a153_0x2d556a(0x1bf)](_0x112cd0,_0x3f2834=![]){const _0x452f5b=a153_0x2d556a,_0x3adf00=await zip_1[_0x452f5b(0x1cc)]['unzip'](_0x112cd0),_0xb16fff=[];for(const _0xdfb158 of Object[_0x452f5b(0x1eb)](_0x3adf00['files'])){!_0x3adf00[_0x452f5b(0x1d7)][_0xdfb158][_0x452f5b(0x1e8)]&&_0xb16fff['push']({'filename':_0xdfb158,'body':await _0x3adf00[_0x452f5b(0x1d7)][_0xdfb158]['async'](_0x3f2834?_0x452f5b(0x1d8):'text')});}return _0xb16fff;}async[a153_0x2d556a(0x1df)](_0x31e91b){const _0x4c6ce8=a153_0x2d556a;try{const _0x19f5e5=await this['readZip'](_0x31e91b[_0x4c6ce8(0x1d3)],!![]);await Promise[_0x4c6ce8(0x1de)](_0x19f5e5[_0x4c6ce8(0x1f6)](({filename:_0x477380,body:_0x49b062})=>fs_internal_1['FS']['writeFile'](path_1[_0x4c6ce8(0x1db)][_0x4c6ce8(0x1ce)](this[_0x4c6ce8(0x1fb)],_0x477380),_0x49b062)));}catch(_0x26f4fd){throw new Error(_0x4c6ce8(0x1e4)+_0x31e91b[_0x4c6ce8(0x1f1)]+'\x20['+_0x31e91b[_0x4c6ce8(0x1f8)]+'].\x20Original\x20error:\x20'+_0x26f4fd);}}[a153_0x2d556a(0x1c6)](_0x219453,_0x1d6a1e){const _0x26b953=a153_0x2d556a;throw new invalid_xml_error_1[(_0x26b953(0x1f5))](_0x26b953(0x1c1)+_0x1d6a1e[_0x26b953(0x1f1)]+'\x20['+_0x1d6a1e[_0x26b953(0x1f8)]+_0x26b953(0x1cb)+_0x219453);}async[a153_0x2d556a(0x1d2)](_0x466eab){const _0x44e774=a153_0x2d556a,{filename:_0x2a5f34,body:_0x57e66f}=(await this[_0x44e774(0x1bf)](_0x466eab[_0x44e774(0x1d3)]))[0x0];try{if(!this[_0x44e774(0x1dd)][_0x2a5f34]){const _0x25e458=path_1[_0x44e774(0x1db)][_0x44e774(0x1ce)](this[_0x44e774(0x1fb)],_0x2a5f34);if(await fs_internal_1['FS']['exists'](_0x25e458)){const _0x5f3335=await fs_internal_1['FS']['readFile'](_0x25e458);this[_0x44e774(0x1dd)][_0x2a5f34]=await xml_v2_1[_0x44e774(0x1e3)][_0x44e774(0x1c2)](_0x5f3335)[_0x44e774(0x1e9)](_0x2600bb=>this[_0x44e774(0x1c6)](_0x2600bb,_0x466eab));}else{this[_0x44e774(0x1dd)][_0x2a5f34]=await xml_v2_1[_0x44e774(0x1e3)][_0x44e774(0x1c2)](_0x57e66f)[_0x44e774(0x1e9)](_0x5af735=>this[_0x44e774(0x1c6)](_0x5af735,_0x466eab));return;}}const _0x46f1e5=this['parentComponents'][_0x2a5f34],_0x1e6d8e=await xml_v2_1[_0x44e774(0x1e3)][_0x44e774(0x1c2)](_0x57e66f)[_0x44e774(0x1e9)](_0x40ce3d=>this[_0x44e774(0x1c6)](_0x40ce3d,_0x466eab));xml_v2_1['XmlV2'][_0x44e774(0x1ef)](_0x46f1e5,_0x1e6d8e);}catch(_0x98ab9f){if(_0x98ab9f instanceof invalid_xml_error_1[_0x44e774(0x1f5)]){if(this[_0x44e774(0x1f7)])return;else throw _0x98ab9f;}throw new Error(_0x44e774(0x1e6)+_0x466eab[_0x44e774(0x1f1)]+'\x20['+_0x466eab[_0x44e774(0x1f8)]+_0x44e774(0x1cb)+_0x98ab9f);}}async[a153_0x2d556a(0x1e7)](){const _0x3d12e1=a153_0x2d556a;!await fs_internal_1['FS'][_0x3d12e1(0x1cd)](this[_0x3d12e1(0x1fb)])&&await fs_internal_1['FS'][_0x3d12e1(0x1dc)](this[_0x3d12e1(0x1fb)]);for(const _0x2aba24 of this[_0x3d12e1(0x1e1)]){!child_types_1['default'][_0x3d12e1(0x1f4)](_0x2aba24['fileType'])?await this[_0x3d12e1(0x1df)](_0x2aba24):await this[_0x3d12e1(0x1d2)](_0x2aba24);}const _0x320ee3=Object[_0x3d12e1(0x1eb)](this[_0x3d12e1(0x1dd)]);this['internalLogger'][_0x3d12e1(0x1fe)](_0x3d12e1(0x1d1),this['components'][_0x3d12e1(0x1d4)]);while(_0x320ee3[_0x3d12e1(0x1d4)]){const _0x582ebc=_0x320ee3[_0x3d12e1(0x1c9)](0x0,this[_0x3d12e1(0x1fd)]);for(const _0x2c2429 of _0x582ebc){await fs_internal_1['FS'][_0x3d12e1(0x1c8)](path_1[_0x3d12e1(0x1db)][_0x3d12e1(0x1ce)](this[_0x3d12e1(0x1fb)],_0x2c2429),xml_v2_1['XmlV2']['convertToString'](this[_0x3d12e1(0x1dd)][_0x2c2429]));}}this[_0x3d12e1(0x1dd)]={};}}exports[a153_0x2d556a(0x1f2)]=MDApiWriter;