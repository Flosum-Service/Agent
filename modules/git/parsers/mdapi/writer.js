const a117_0x38bdea=a117_0x2323;(function(_0x4173fa,_0x3532ae){const _0x4e5670=a117_0x2323,_0x1b27ff=_0x4173fa();while(!![]){try{const _0x36988c=parseInt(_0x4e5670(0x20e))/0x1*(parseInt(_0x4e5670(0x21d))/0x2)+parseInt(_0x4e5670(0x215))/0x3*(-parseInt(_0x4e5670(0x1fa))/0x4)+-parseInt(_0x4e5670(0x219))/0x5+parseInt(_0x4e5670(0x212))/0x6+parseInt(_0x4e5670(0x1ec))/0x7*(parseInt(_0x4e5670(0x213))/0x8)+parseInt(_0x4e5670(0x20d))/0x9+-parseInt(_0x4e5670(0x20c))/0xa*(parseInt(_0x4e5670(0x1f9))/0xb);if(_0x36988c===_0x3532ae)break;else _0x1b27ff['push'](_0x1b27ff['shift']());}catch(_0x544599){_0x1b27ff['push'](_0x1b27ff['shift']());}}}(a117_0xead0,0xeea1c));const a117_0x544140=(function(){let _0x205648=!![];return function(_0x16db22,_0xac82ea){const _0x50e360=_0x205648?function(){const _0xf8864d=a117_0x2323;if(_0xac82ea){const _0x4445d0=_0xac82ea[_0xf8864d(0x203)](_0x16db22,arguments);return _0xac82ea=null,_0x4445d0;}}:function(){};return _0x205648=![],_0x50e360;};}()),a117_0x242fc7=a117_0x544140(this,function(){const _0x5219f6=a117_0x2323;return a117_0x242fc7[_0x5219f6(0x1eb)]()['search'](_0x5219f6(0x200))[_0x5219f6(0x1eb)]()[_0x5219f6(0x1ed)](a117_0x242fc7)['search'](_0x5219f6(0x200));});a117_0x242fc7();'use strict';function a117_0x2323(_0x15d9ad,_0x444269){const _0xdf69d4=a117_0xead0();return a117_0x2323=function(_0x242fc7,_0x544140){_0x242fc7=_0x242fc7-0x1e9;let _0xead0b0=_0xdf69d4[_0x242fc7];return _0xead0b0;},a117_0x2323(_0x15d9ad,_0x444269);}var __importDefault=this&&this['__importDefault']||function(_0x21a779){return _0x21a779&&_0x21a779['__esModule']?_0x21a779:{'default':_0x21a779};};function a117_0xead0(){const _0x54a5d7=['skipChildErrors','Xml','toString','347501ItiVXZ','constructor','fileName','../utils/xml','fileType','async','all','internalLogger','InvalidXmlError','keys','unzip','parentComponents','../utils/zip','11640739PbNfWj','956BEFrxe','path','splice','exists','sourceDir','writeChild','(((.+)+)+)+$','../../../../core','files','apply','readFile','components','defineProperty','text','length','have\x20to\x20write\x20%d\x20files','log','name','10DTQWPA','28260cHBzQQ','425188OBltHd','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','handleXmlParsingError','].\x20Original\x20error:\x20','1891554mhZFDn','144yrBNlY','nodebuffer','1617ODETov','default','parse','map','1615155qHJWOC','body','join','Zip','6UhJHao','writeFile','catch','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','../data/child-types','writeParent','push','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','../errors/invalid-xml.error','readZip'];a117_0xead0=function(){return _0x54a5d7;};return a117_0xead0();}Object[a117_0x38bdea(0x206)](exports,'__esModule',{'value':!![]}),exports['MDApiWriter']=void 0x0;const path_1=__importDefault(require(a117_0x38bdea(0x1fb))),core_1=require(a117_0x38bdea(0x201)),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require(a117_0x38bdea(0x225)),xml_1=require(a117_0x38bdea(0x1ef)),zip_1=require(a117_0x38bdea(0x1f8)),child_types_1=__importDefault(require(a117_0x38bdea(0x221)));class MDApiWriter{constructor({components:_0x2220cf,sourceDir:_0x444b4b,skipChildErrors:_0x500399}){const _0x1ca820=a117_0x38bdea;this['MAX_WRITES_PER_TICK']=0x64,this['parentComponents']={},this[_0x1ca820(0x1f3)]=new core_1['Logger'](MDApiWriter[_0x1ca820(0x20b)]),this[_0x1ca820(0x205)]=_0x2220cf,this[_0x1ca820(0x1fe)]=_0x444b4b,this[_0x1ca820(0x1e9)]=_0x500399;}async['readZip'](_0x239849,_0x2ab1f8=![]){const _0xc98135=a117_0x38bdea,_0x549a3d=await zip_1[_0xc98135(0x21c)][_0xc98135(0x1f6)](_0x239849),_0x2ab994=[];for(const _0x4061ce of Object['keys'](_0x549a3d[_0xc98135(0x202)])){!_0x549a3d['files'][_0x4061ce]['dir']&&_0x2ab994[_0xc98135(0x223)]({'filename':_0x4061ce,'body':await _0x549a3d['files'][_0x4061ce][_0xc98135(0x1f1)](_0x2ab1f8?_0xc98135(0x214):_0xc98135(0x207))});}return _0x2ab994;}async[a117_0x38bdea(0x222)](_0x5d0868){const _0x20ec4f=a117_0x38bdea;try{const _0x36b56f=await this[_0x20ec4f(0x226)](_0x5d0868[_0x20ec4f(0x21a)],!![]);await Promise[_0x20ec4f(0x1f2)](_0x36b56f[_0x20ec4f(0x218)](({filename:_0x4ef6d5,body:_0x1d7337})=>fs_internal_1['FS'][_0x20ec4f(0x21e)](path_1['default'][_0x20ec4f(0x21b)](this[_0x20ec4f(0x1fe)],_0x4ef6d5),_0x1d7337)));}catch(_0x443fca){throw new Error(_0x20ec4f(0x224)+_0x5d0868[_0x20ec4f(0x1ee)]+'\x20['+_0x5d0868[_0x20ec4f(0x1f0)]+_0x20ec4f(0x211)+_0x443fca);}}['handleXmlParsingError'](_0x27c069,_0x5fc5e7){const _0x9b20cf=a117_0x38bdea;throw new invalid_xml_error_1[(_0x9b20cf(0x1f4))](_0x9b20cf(0x20f)+_0x5fc5e7[_0x9b20cf(0x1ee)]+'\x20['+_0x5fc5e7[_0x9b20cf(0x1f0)]+_0x9b20cf(0x211)+_0x27c069);}async[a117_0x38bdea(0x1ff)](_0x47fa22){const _0x18cd27=a117_0x38bdea,{filename:_0x550c57,body:_0x334776}=(await this[_0x18cd27(0x226)](_0x47fa22[_0x18cd27(0x21a)]))[0x0];try{if(!this[_0x18cd27(0x1f7)][_0x550c57]){const _0xb59c85=path_1[_0x18cd27(0x216)][_0x18cd27(0x21b)](this[_0x18cd27(0x1fe)],_0x550c57);if(await fs_internal_1['FS'][_0x18cd27(0x1fd)](_0xb59c85)){const _0x16ee21=await fs_internal_1['FS'][_0x18cd27(0x204)](_0xb59c85);this[_0x18cd27(0x1f7)][_0x550c57]=await xml_1[_0x18cd27(0x1ea)][_0x18cd27(0x217)](_0x16ee21)['catch'](_0x52e558=>this['handleXmlParsingError'](_0x52e558,_0x47fa22));}else{this[_0x18cd27(0x1f7)][_0x550c57]=await xml_1[_0x18cd27(0x1ea)][_0x18cd27(0x217)](_0x334776)[_0x18cd27(0x21f)](_0x26d4e9=>this[_0x18cd27(0x210)](_0x26d4e9,_0x47fa22));return;}}const _0x2d75bf=this[_0x18cd27(0x1f7)][_0x550c57],_0x2a4435=await xml_1['Xml'][_0x18cd27(0x217)](_0x334776)[_0x18cd27(0x21f)](_0x49b3b=>this[_0x18cd27(0x210)](_0x49b3b,_0x47fa22));xml_1[_0x18cd27(0x1ea)]['replaceOrAppend'](_0x2d75bf,_0x2a4435);}catch(_0x46e4de){if(_0x46e4de instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0x18cd27(0x1e9)])return;else throw _0x46e4de;}throw new Error(_0x18cd27(0x220)+_0x47fa22[_0x18cd27(0x1ee)]+'\x20['+_0x47fa22['fileType']+_0x18cd27(0x211)+_0x46e4de);}}async['start'](){const _0x4d5129=a117_0x38bdea;!await fs_internal_1['FS'][_0x4d5129(0x1fd)](this[_0x4d5129(0x1fe)])&&await fs_internal_1['FS']['makeDir'](this[_0x4d5129(0x1fe)]);for(const _0x4a17e4 of this[_0x4d5129(0x205)]){!child_types_1[_0x4d5129(0x216)]['includes'](_0x4a17e4['fileType'])?await this['writeParent'](_0x4a17e4):await this[_0x4d5129(0x1ff)](_0x4a17e4);}const _0x2f69c9=Object[_0x4d5129(0x1f5)](this[_0x4d5129(0x1f7)]);this[_0x4d5129(0x1f3)][_0x4d5129(0x20a)](_0x4d5129(0x209),this[_0x4d5129(0x205)][_0x4d5129(0x208)]);while(_0x2f69c9[_0x4d5129(0x208)]){const _0x188a88=_0x2f69c9[_0x4d5129(0x1fc)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x308ca9 of _0x188a88){await fs_internal_1['FS']['writeFile'](path_1[_0x4d5129(0x216)][_0x4d5129(0x21b)](this[_0x4d5129(0x1fe)],_0x308ca9),xml_1[_0x4d5129(0x1ea)]['convertToString'](this['parentComponents'][_0x308ca9]));}}this['parentComponents']={};}}exports['MDApiWriter']=MDApiWriter;