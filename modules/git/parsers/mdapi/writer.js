const a104_0x6df870=a104_0x1309;function a104_0x211b(){const _0x4cc51f=['3542580xcyLtS','makeDir','path','../errors/invalid-xml.error','nodebuffer','keys','search','parse','353848cWLdzX','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','join','apply','push','12004816mRtAke','writeFile','defineProperty','Zip','InvalidXmlError','text','Xml','body','1248532hvRJYo','fileName','default','5tKWlTW','readZip','dir','name','includes','skipChildErrors','].\x20Original\x20error:\x20','writeChild','../utils/zip','MAX_WRITES_PER_TICK','Logger','async','map','log','(((.+)+)+)+$','unzip','fileType','162378lehzwB','../../../../core','handleXmlParsingError','files','parentComponents','8065813rAaNik','MDApiWriter','start','sourceDir','convertToString','length','components','replaceOrAppend','catch','__esModule','internalLogger','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','exists','writeParent','307406eHbzeJ'];a104_0x211b=function(){return _0x4cc51f;};return a104_0x211b();}(function(_0x1220fa,_0x212202){const _0x252d62=a104_0x1309,_0x508326=_0x1220fa();while(!![]){try{const _0x4fef49=-parseInt(_0x252d62(0xfa))/0x1+-parseInt(_0x252d62(0xe4))/0x2+-parseInt(_0x252d62(0x10e))/0x3+parseInt(_0x252d62(0xed))/0x4*(parseInt(_0x252d62(0xfd))/0x5)+-parseInt(_0x252d62(0xe5))/0x6+parseInt(_0x252d62(0x113))/0x7+parseInt(_0x252d62(0xf2))/0x8;if(_0x4fef49===_0x212202)break;else _0x508326['push'](_0x508326['shift']());}catch(_0x262cf7){_0x508326['push'](_0x508326['shift']());}}}(a104_0x211b,0xa9904));function a104_0x1309(_0x24a0da,_0x3d0406){const _0x11fa18=a104_0x211b();return a104_0x1309=function(_0xc0a89d,_0x4c4570){_0xc0a89d=_0xc0a89d-0xdd;let _0x211b80=_0x11fa18[_0xc0a89d];return _0x211b80;},a104_0x1309(_0x24a0da,_0x3d0406);}const a104_0x4c4570=(function(){let _0x5c612f=!![];return function(_0x201ed0,_0x58a383){const _0x17f823=_0x5c612f?function(){const _0x446c62=a104_0x1309;if(_0x58a383){const _0x154061=_0x58a383[_0x446c62(0xf0)](_0x201ed0,arguments);return _0x58a383=null,_0x154061;}}:function(){};return _0x5c612f=![],_0x17f823;};}()),a104_0xc0a89d=a104_0x4c4570(this,function(){const _0x255173=a104_0x1309;return a104_0xc0a89d['toString']()[_0x255173(0xeb)](_0x255173(0x10b))['toString']()['constructor'](a104_0xc0a89d)['search']('(((.+)+)+)+$');});a104_0xc0a89d();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x373f6f){return _0x373f6f&&_0x373f6f['__esModule']?_0x373f6f:{'default':_0x373f6f};};Object[a104_0x6df870(0xf4)](exports,a104_0x6df870(0xdf),{'value':!![]}),exports[a104_0x6df870(0x114)]=void 0x0;const path_1=__importDefault(require(a104_0x6df870(0xe7))),core_1=require(a104_0x6df870(0x10f)),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require(a104_0x6df870(0xe8)),xml_1=require('../utils/xml'),zip_1=require(a104_0x6df870(0x105)),child_types_1=__importDefault(require('../data/child-types'));class MDApiWriter{constructor({components:_0x2921f0,sourceDir:_0xc89809,skipChildErrors:_0x25f0af}){const _0xd90c38=a104_0x6df870;this[_0xd90c38(0x106)]=0x64,this[_0xd90c38(0x112)]={},this['internalLogger']=new core_1[(_0xd90c38(0x107))](MDApiWriter[_0xd90c38(0x100)]),this[_0xd90c38(0x119)]=_0x2921f0,this[_0xd90c38(0x116)]=_0xc89809,this['skipChildErrors']=_0x25f0af;}async[a104_0x6df870(0xfe)](_0x3f186c,_0x597886=![]){const _0x246d09=a104_0x6df870,_0x41fe48=await zip_1[_0x246d09(0xf5)][_0x246d09(0x10c)](_0x3f186c),_0x247aee=[];for(const _0x553384 of Object['keys'](_0x41fe48[_0x246d09(0x111)])){!_0x41fe48[_0x246d09(0x111)][_0x553384][_0x246d09(0xff)]&&_0x247aee[_0x246d09(0xf1)]({'filename':_0x553384,'body':await _0x41fe48[_0x246d09(0x111)][_0x553384][_0x246d09(0x108)](_0x597886?_0x246d09(0xe9):_0x246d09(0xf7))});}return _0x247aee;}async[a104_0x6df870(0xe3)](_0x152ec2){const _0x324350=a104_0x6df870;try{const _0x194ce3=await this[_0x324350(0xfe)](_0x152ec2[_0x324350(0xf9)],!![]);await Promise['all'](_0x194ce3[_0x324350(0x109)](({filename:_0x2406b3,body:_0xba2364})=>fs_internal_1['FS'][_0x324350(0xf3)](path_1[_0x324350(0xfc)][_0x324350(0xef)](this[_0x324350(0x116)],_0x2406b3),_0xba2364)));}catch(_0x431ab4){throw new Error(_0x324350(0xee)+_0x152ec2[_0x324350(0xfb)]+'\x20['+_0x152ec2[_0x324350(0x10d)]+'].\x20Original\x20error:\x20'+_0x431ab4);}}[a104_0x6df870(0x110)](_0x247b22,_0x4b2099){const _0x3a9200=a104_0x6df870;throw new invalid_xml_error_1[(_0x3a9200(0xf6))]('[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20'+_0x4b2099[_0x3a9200(0xfb)]+'\x20['+_0x4b2099[_0x3a9200(0x10d)]+_0x3a9200(0x103)+_0x247b22);}async[a104_0x6df870(0x104)](_0x5df61d){const _0x40f5bd=a104_0x6df870,{filename:_0x561481,body:_0x54d6e0}=(await this[_0x40f5bd(0xfe)](_0x5df61d[_0x40f5bd(0xf9)]))[0x0];try{if(!this[_0x40f5bd(0x112)][_0x561481]){const _0x15d38d=path_1[_0x40f5bd(0xfc)][_0x40f5bd(0xef)](this['sourceDir'],_0x561481);if(await fs_internal_1['FS'][_0x40f5bd(0xe2)](_0x15d38d)){const _0x10e022=await fs_internal_1['FS']['readFile'](_0x15d38d);this['parentComponents'][_0x561481]=await xml_1[_0x40f5bd(0xf8)][_0x40f5bd(0xec)](_0x10e022)[_0x40f5bd(0xde)](_0xd70965=>this[_0x40f5bd(0x110)](_0xd70965,_0x5df61d));}else{this[_0x40f5bd(0x112)][_0x561481]=await xml_1[_0x40f5bd(0xf8)][_0x40f5bd(0xec)](_0x54d6e0)[_0x40f5bd(0xde)](_0xbe27ce=>this[_0x40f5bd(0x110)](_0xbe27ce,_0x5df61d));return;}}const _0x11da92=this[_0x40f5bd(0x112)][_0x561481],_0x486731=await xml_1[_0x40f5bd(0xf8)][_0x40f5bd(0xec)](_0x54d6e0)[_0x40f5bd(0xde)](_0x49a898=>this[_0x40f5bd(0x110)](_0x49a898,_0x5df61d));xml_1[_0x40f5bd(0xf8)][_0x40f5bd(0xdd)](_0x11da92,_0x486731);}catch(_0x63184e){if(_0x63184e instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0x40f5bd(0x102)])return;else throw _0x63184e;}throw new Error(_0x40f5bd(0xe1)+_0x5df61d[_0x40f5bd(0xfb)]+'\x20['+_0x5df61d[_0x40f5bd(0x10d)]+_0x40f5bd(0x103)+_0x63184e);}}async[a104_0x6df870(0x115)](){const _0x30900c=a104_0x6df870;!await fs_internal_1['FS'][_0x30900c(0xe2)](this[_0x30900c(0x116)])&&await fs_internal_1['FS'][_0x30900c(0xe6)](this[_0x30900c(0x116)]);for(const _0x406cb0 of this[_0x30900c(0x119)]){!child_types_1[_0x30900c(0xfc)][_0x30900c(0x101)](_0x406cb0[_0x30900c(0x10d)])?await this[_0x30900c(0xe3)](_0x406cb0):await this[_0x30900c(0x104)](_0x406cb0);}const _0x2b6066=Object[_0x30900c(0xea)](this['parentComponents']);this[_0x30900c(0xe0)][_0x30900c(0x10a)]('have\x20to\x20write\x20%d\x20files',this[_0x30900c(0x119)][_0x30900c(0x118)]);while(_0x2b6066[_0x30900c(0x118)]){const _0x51f541=_0x2b6066['splice'](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x4087da of _0x51f541){await fs_internal_1['FS'][_0x30900c(0xf3)](path_1[_0x30900c(0xfc)][_0x30900c(0xef)](this['sourceDir'],_0x4087da),xml_1[_0x30900c(0xf8)][_0x30900c(0x117)](this[_0x30900c(0x112)][_0x4087da]));}}this[_0x30900c(0x112)]={};}}exports[a104_0x6df870(0x114)]=MDApiWriter;