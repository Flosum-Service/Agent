const a153_0x573517=a153_0x348f;function a153_0x348f(_0x35da46,_0x349143){const _0x57a012=a153_0x2a80();return a153_0x348f=function(_0x41abb7,_0x23dae4){_0x41abb7=_0x41abb7-0xaa;let _0x2a8076=_0x57a012[_0x41abb7];return _0x2a8076;},a153_0x348f(_0x35da46,_0x349143);}(function(_0x5caf82,_0x29625d){const _0x59c61e=a153_0x348f,_0x82ad99=_0x5caf82();while(!![]){try{const _0x1c216e=parseInt(_0x59c61e(0xcf))/0x1+parseInt(_0x59c61e(0xb5))/0x2+parseInt(_0x59c61e(0xca))/0x3+parseInt(_0x59c61e(0xd2))/0x4*(-parseInt(_0x59c61e(0xc4))/0x5)+-parseInt(_0x59c61e(0xd0))/0x6*(parseInt(_0x59c61e(0xd9))/0x7)+parseInt(_0x59c61e(0xcb))/0x8+-parseInt(_0x59c61e(0xbd))/0x9*(-parseInt(_0x59c61e(0xc3))/0xa);if(_0x1c216e===_0x29625d)break;else _0x82ad99['push'](_0x82ad99['shift']());}catch(_0x3c6f51){_0x82ad99['push'](_0x82ad99['shift']());}}}(a153_0x2a80,0x7b023));const a153_0x23dae4=(function(){let _0x194264=!![];return function(_0x182403,_0xf0ed37){const _0x47d7be=_0x194264?function(){const _0x55b32a=a153_0x348f;if(_0xf0ed37){const _0xfad86e=_0xf0ed37[_0x55b32a(0xc2)](_0x182403,arguments);return _0xf0ed37=null,_0xfad86e;}}:function(){};return _0x194264=![],_0x47d7be;};}()),a153_0x41abb7=a153_0x23dae4(this,function(){const _0x4ed22c=a153_0x348f;return a153_0x41abb7['toString']()[_0x4ed22c(0xe7)](_0x4ed22c(0xc5))[_0x4ed22c(0xe3)]()[_0x4ed22c(0xd8)](a153_0x41abb7)['search']('(((.+)+)+)+$');});a153_0x41abb7();'use strict';var __importDefault=this&&this[a153_0x573517(0xe2)]||function(_0x35cfb4){return _0x35cfb4&&_0x35cfb4['__esModule']?_0x35cfb4:{'default':_0x35cfb4};};Object['defineProperty'](exports,a153_0x573517(0xd1),{'value':!![]}),exports['MDApiWriter']=void 0x0;function a153_0x2a80(){const _0x36dd63=['(((.+)+)+)+$','keys','parentComponents','push','../data/child-types','408192OVuFLE','5391256nQyQTt','../../../../core','convertToString','path','8091DkKDta','426sKVRMe','__esModule','873564BLwdrO','exists','readFile','].\x20Original\x20error:\x20','parse','async','constructor','66262CVGEGo','files','handleXmlParsingError','internalLogger','MDApiWriter','fileType','map','InvalidXmlError','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','__importDefault','toString','start','default','XmlV2','search','writeFile','makeDir','fileName','text','dir','includes','have\x20to\x20write\x20%d\x20files','readZip','MAX_WRITES_PER_TICK','sourceDir','name','writeParent','replaceOrAppend','../utils/xml-v2','698666ymqKLz','length','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','unzip','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','components','body','join','261IDByMI','all','../errors/invalid-xml.error','catch','../../internal/fs.internal','apply','78250yAgIQA','5gTrAdN'];a153_0x2a80=function(){return _0x36dd63;};return a153_0x2a80();}const path_1=__importDefault(require(a153_0x573517(0xce))),core_1=require(a153_0x573517(0xcc)),fs_internal_1=require(a153_0x573517(0xc1)),invalid_xml_error_1=require(a153_0x573517(0xbf)),xml_v2_1=require(a153_0x573517(0xb4)),zip_1=require('../utils/zip'),child_types_1=__importDefault(require(a153_0x573517(0xc9)));class MDApiWriter{constructor({components:_0x5c22d7,sourceDir:_0x2a3da5,skipChildErrors:_0x2ad5dd}){const _0x9aaa38=a153_0x573517;this[_0x9aaa38(0xaf)]=0x64,this[_0x9aaa38(0xc7)]={},this[_0x9aaa38(0xdc)]=new core_1['Logger'](MDApiWriter[_0x9aaa38(0xb1)]),this[_0x9aaa38(0xba)]=_0x5c22d7,this[_0x9aaa38(0xb0)]=_0x2a3da5,this['skipChildErrors']=_0x2ad5dd;}async['readZip'](_0x591243,_0x419116=![]){const _0x3be1c9=a153_0x573517,_0x1b1a32=await zip_1['Zip'][_0x3be1c9(0xb8)](_0x591243),_0x21dee0=[];for(const _0x3ad5aa of Object[_0x3be1c9(0xc6)](_0x1b1a32[_0x3be1c9(0xda)])){!_0x1b1a32['files'][_0x3ad5aa][_0x3be1c9(0xab)]&&_0x21dee0[_0x3be1c9(0xc8)]({'filename':_0x3ad5aa,'body':await _0x1b1a32[_0x3be1c9(0xda)][_0x3ad5aa][_0x3be1c9(0xd7)](_0x419116?'nodebuffer':_0x3be1c9(0xaa))});}return _0x21dee0;}async[a153_0x573517(0xb2)](_0x4632cf){const _0x2c9a9b=a153_0x573517;try{const _0x5247cb=await this[_0x2c9a9b(0xae)](_0x4632cf[_0x2c9a9b(0xbb)],!![]);await Promise[_0x2c9a9b(0xbe)](_0x5247cb[_0x2c9a9b(0xdf)](({filename:_0x1075d2,body:_0x5e7b0c})=>fs_internal_1['FS'][_0x2c9a9b(0xe8)](path_1[_0x2c9a9b(0xe5)][_0x2c9a9b(0xbc)](this[_0x2c9a9b(0xb0)],_0x1075d2),_0x5e7b0c)));}catch(_0x51dab0){throw new Error(_0x2c9a9b(0xb9)+_0x4632cf[_0x2c9a9b(0xea)]+'\x20['+_0x4632cf[_0x2c9a9b(0xde)]+_0x2c9a9b(0xd5)+_0x51dab0);}}[a153_0x573517(0xdb)](_0x2d900f,_0x4eefb8){const _0x474fc8=a153_0x573517;throw new invalid_xml_error_1[(_0x474fc8(0xe0))](_0x474fc8(0xb7)+_0x4eefb8[_0x474fc8(0xea)]+'\x20['+_0x4eefb8[_0x474fc8(0xde)]+_0x474fc8(0xd5)+_0x2d900f);}async['writeChild'](_0x51cd1c){const _0x5575a5=a153_0x573517,{filename:_0x8ae947,body:_0x57216c}=(await this[_0x5575a5(0xae)](_0x51cd1c[_0x5575a5(0xbb)]))[0x0];try{if(!this[_0x5575a5(0xc7)][_0x8ae947]){const _0x4d7ad7=path_1['default'][_0x5575a5(0xbc)](this[_0x5575a5(0xb0)],_0x8ae947);if(await fs_internal_1['FS'][_0x5575a5(0xd3)](_0x4d7ad7)){const _0x276600=await fs_internal_1['FS'][_0x5575a5(0xd4)](_0x4d7ad7);this[_0x5575a5(0xc7)][_0x8ae947]=await xml_v2_1[_0x5575a5(0xe6)][_0x5575a5(0xd6)](_0x276600)[_0x5575a5(0xc0)](_0x1c1742=>this['handleXmlParsingError'](_0x1c1742,_0x51cd1c));}else{this[_0x5575a5(0xc7)][_0x8ae947]=await xml_v2_1[_0x5575a5(0xe6)]['parse'](_0x57216c)[_0x5575a5(0xc0)](_0x2c2869=>this[_0x5575a5(0xdb)](_0x2c2869,_0x51cd1c));return;}}const _0x38f706=this['parentComponents'][_0x8ae947],_0x574958=await xml_v2_1[_0x5575a5(0xe6)][_0x5575a5(0xd6)](_0x57216c)[_0x5575a5(0xc0)](_0x4369a9=>this['handleXmlParsingError'](_0x4369a9,_0x51cd1c));xml_v2_1[_0x5575a5(0xe6)][_0x5575a5(0xb3)](_0x38f706,_0x574958);}catch(_0x362099){if(_0x362099 instanceof invalid_xml_error_1[_0x5575a5(0xe0)]){if(this['skipChildErrors'])return;else throw _0x362099;}throw new Error(_0x5575a5(0xe1)+_0x51cd1c[_0x5575a5(0xea)]+'\x20['+_0x51cd1c[_0x5575a5(0xde)]+'].\x20Original\x20error:\x20'+_0x362099);}}async[a153_0x573517(0xe4)](){const _0xb380e6=a153_0x573517;!await fs_internal_1['FS']['exists'](this['sourceDir'])&&await fs_internal_1['FS'][_0xb380e6(0xe9)](this[_0xb380e6(0xb0)]);const _0x5950eb=[],_0xec1afe=[];for(const _0x266200 of this[_0xb380e6(0xba)]){child_types_1[_0xb380e6(0xe5)][_0xb380e6(0xac)](_0x266200[_0xb380e6(0xde)])?_0xec1afe[_0xb380e6(0xc8)](_0x266200):_0x5950eb[_0xb380e6(0xc8)](_0x266200);}for(const _0x5cd9a2 of _0x5950eb){await this[_0xb380e6(0xb2)](_0x5cd9a2);}for(const _0x41c250 of _0xec1afe){await this['writeChild'](_0x41c250);}const _0x5f257c=Object[_0xb380e6(0xc6)](this[_0xb380e6(0xc7)]);this[_0xb380e6(0xdc)]['log'](_0xb380e6(0xad),this[_0xb380e6(0xba)]['length']);while(_0x5f257c[_0xb380e6(0xb6)]){const _0x5139e9=_0x5f257c['splice'](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x3bc5b3 of _0x5139e9){await fs_internal_1['FS']['writeFile'](path_1[_0xb380e6(0xe5)][_0xb380e6(0xbc)](this[_0xb380e6(0xb0)],_0x3bc5b3),xml_v2_1[_0xb380e6(0xe6)][_0xb380e6(0xcd)](this[_0xb380e6(0xc7)][_0x3bc5b3]));}}this[_0xb380e6(0xc7)]={};}}exports[a153_0x573517(0xdd)]=MDApiWriter;