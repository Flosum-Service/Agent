const a148_0x2c8be7=a148_0x2769;function a148_0x2769(_0x3aa10f,_0x1d650f){const _0x22c704=a148_0x3449();return a148_0x2769=function(_0x5665d9,_0x18e3d1){_0x5665d9=_0x5665d9-0xab;let _0x3449d7=_0x22c704[_0x5665d9];return _0x3449d7;},a148_0x2769(_0x3aa10f,_0x1d650f);}(function(_0x30335c,_0x2f128c){const _0x12c156=a148_0x2769,_0x4c8ae2=_0x30335c();while(!![]){try{const _0x225b38=parseInt(_0x12c156(0xc5))/0x1+-parseInt(_0x12c156(0xae))/0x2+-parseInt(_0x12c156(0xd8))/0x3+parseInt(_0x12c156(0xba))/0x4+-parseInt(_0x12c156(0xd6))/0x5+-parseInt(_0x12c156(0xe1))/0x6+-parseInt(_0x12c156(0xbc))/0x7*(-parseInt(_0x12c156(0xd3))/0x8);if(_0x225b38===_0x2f128c)break;else _0x4c8ae2['push'](_0x4c8ae2['shift']());}catch(_0xf37122){_0x4c8ae2['push'](_0x4c8ae2['shift']());}}}(a148_0x3449,0x45744));const a148_0x18e3d1=(function(){let _0x3efd0e=!![];return function(_0x32e72f,_0x23cf40){const _0x59a735=_0x3efd0e?function(){const _0x155701=a148_0x2769;if(_0x23cf40){const _0x4a45a9=_0x23cf40[_0x155701(0xcd)](_0x32e72f,arguments);return _0x23cf40=null,_0x4a45a9;}}:function(){};return _0x3efd0e=![],_0x59a735;};}()),a148_0x5665d9=a148_0x18e3d1(this,function(){const _0x4d8f03=a148_0x2769;return a148_0x5665d9['toString']()['search'](_0x4d8f03(0xea))[_0x4d8f03(0xdf)]()[_0x4d8f03(0xce)](a148_0x5665d9)[_0x4d8f03(0xe6)]('(((.+)+)+)+$');});a148_0x5665d9();'use strict';var __importDefault=this&&this[a148_0x2c8be7(0xc9)]||function(_0x1a4bef){return _0x1a4bef&&_0x1a4bef['__esModule']?_0x1a4bef:{'default':_0x1a4bef};};Object[a148_0x2c8be7(0xab)](exports,'__esModule',{'value':!![]}),exports['MDApiWriter']=void 0x0;const path_1=__importDefault(require(a148_0x2c8be7(0xac))),core_1=require(a148_0x2c8be7(0xd5)),fs_internal_1=require(a148_0x2c8be7(0xbf)),invalid_xml_error_1=require('../errors/invalid-xml.error'),xml_v2_1=require(a148_0x2c8be7(0xb3)),zip_1=require(a148_0x2c8be7(0xb7)),child_types_1=__importDefault(require(a148_0x2c8be7(0xad)));class MDApiWriter{constructor({components:_0x572e23,sourceDir:_0x545b71,skipChildErrors:_0x1e1fce}){const _0x22af30=a148_0x2c8be7;this[_0x22af30(0xc1)]=0x64,this[_0x22af30(0xc7)]={},this[_0x22af30(0xb1)]=new core_1[(_0x22af30(0xcb))](MDApiWriter[_0x22af30(0xd0)]),this[_0x22af30(0xd9)]=_0x572e23,this[_0x22af30(0xc0)]=_0x545b71,this[_0x22af30(0xdc)]=_0x1e1fce;}async[a148_0x2c8be7(0xe3)](_0x78332d,_0x56be43=![]){const _0x46d053=a148_0x2c8be7,_0x1d908c=await zip_1[_0x46d053(0xdb)][_0x46d053(0xde)](_0x78332d),_0x4820fb=[];for(const _0x597634 of Object[_0x46d053(0xd4)](_0x1d908c[_0x46d053(0xdd)])){!_0x1d908c[_0x46d053(0xdd)][_0x597634][_0x46d053(0xda)]&&_0x4820fb['push']({'filename':_0x597634,'body':await _0x1d908c[_0x46d053(0xdd)][_0x597634][_0x46d053(0xbe)](_0x56be43?'nodebuffer':_0x46d053(0xe0))});}return _0x4820fb;}async[a148_0x2c8be7(0xc6)](_0x4e2bd1){const _0x8efef3=a148_0x2c8be7;try{const _0x4e3982=await this[_0x8efef3(0xe3)](_0x4e2bd1[_0x8efef3(0xe5)],!![]);await Promise['all'](_0x4e3982['map'](({filename:_0x4330a3,body:_0x1ccc0a})=>fs_internal_1['FS'][_0x8efef3(0xd7)](path_1[_0x8efef3(0xb4)]['join'](this[_0x8efef3(0xc0)],_0x4330a3),_0x1ccc0a)));}catch(_0x1f1ceb){throw new Error(_0x8efef3(0xc8)+_0x4e2bd1[_0x8efef3(0xbb)]+'\x20['+_0x4e2bd1[_0x8efef3(0xb0)]+'].\x20Original\x20error:\x20'+_0x1f1ceb);}}[a148_0x2c8be7(0xb8)](_0x2b3d30,_0x20ed46){const _0x171f58=a148_0x2c8be7;throw new invalid_xml_error_1['InvalidXmlError'](_0x171f58(0xb9)+_0x20ed46[_0x171f58(0xbb)]+'\x20['+_0x20ed46[_0x171f58(0xb0)]+'].\x20Original\x20error:\x20'+_0x2b3d30);}async['writeChild'](_0x5dbc4e){const _0x360f4=a148_0x2c8be7,{filename:_0x198237,body:_0x2efe67}=(await this['readZip'](_0x5dbc4e[_0x360f4(0xe5)]))[0x0];try{if(!this[_0x360f4(0xc7)][_0x198237]){const _0xeb3ddf=path_1[_0x360f4(0xb4)][_0x360f4(0xca)](this[_0x360f4(0xc0)],_0x198237);if(await fs_internal_1['FS'][_0x360f4(0xe7)](_0xeb3ddf)){const _0x35dce6=await fs_internal_1['FS'][_0x360f4(0xb6)](_0xeb3ddf);this[_0x360f4(0xc7)][_0x198237]=await xml_v2_1[_0x360f4(0xc2)][_0x360f4(0xcc)](_0x35dce6)[_0x360f4(0xc4)](_0x3e5f9d=>this[_0x360f4(0xb8)](_0x3e5f9d,_0x5dbc4e));}else{this[_0x360f4(0xc7)][_0x198237]=await xml_v2_1[_0x360f4(0xc2)]['parse'](_0x2efe67)[_0x360f4(0xc4)](_0x151b24=>this[_0x360f4(0xb8)](_0x151b24,_0x5dbc4e));return;}}const _0x1959ea=this[_0x360f4(0xc7)][_0x198237],_0x3a872b=await xml_v2_1['XmlV2'][_0x360f4(0xcc)](_0x2efe67)['catch'](_0x112a5f=>this[_0x360f4(0xb8)](_0x112a5f,_0x5dbc4e));xml_v2_1[_0x360f4(0xc2)][_0x360f4(0xb5)](_0x1959ea,_0x3a872b);}catch(_0x24b18d){if(_0x24b18d instanceof invalid_xml_error_1[_0x360f4(0xe9)]){if(this[_0x360f4(0xdc)])return;else throw _0x24b18d;}throw new Error(_0x360f4(0xcf)+_0x5dbc4e[_0x360f4(0xbb)]+'\x20['+_0x5dbc4e[_0x360f4(0xb0)]+_0x360f4(0xd1)+_0x24b18d);}}async[a148_0x2c8be7(0xe8)](){const _0x4f53aa=a148_0x2c8be7;!await fs_internal_1['FS'][_0x4f53aa(0xe7)](this[_0x4f53aa(0xc0)])&&await fs_internal_1['FS'][_0x4f53aa(0xaf)](this['sourceDir']);for(const _0xfed7a7 of this[_0x4f53aa(0xd9)]){!child_types_1['default'][_0x4f53aa(0xbd)](_0xfed7a7[_0x4f53aa(0xb0)])?await this['writeParent'](_0xfed7a7):await this[_0x4f53aa(0xe2)](_0xfed7a7);}const _0x4cd860=Object[_0x4f53aa(0xd4)](this[_0x4f53aa(0xc7)]);this['internalLogger'][_0x4f53aa(0xb2)]('have\x20to\x20write\x20%d\x20files',this['components'][_0x4f53aa(0xd2)]);while(_0x4cd860[_0x4f53aa(0xd2)]){const _0xbcbd53=_0x4cd860[_0x4f53aa(0xc3)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x26e8a9 of _0xbcbd53){await fs_internal_1['FS'][_0x4f53aa(0xd7)](path_1[_0x4f53aa(0xb4)]['join'](this[_0x4f53aa(0xc0)],_0x26e8a9),xml_v2_1[_0x4f53aa(0xc2)][_0x4f53aa(0xeb)](this[_0x4f53aa(0xc7)][_0x26e8a9]));}}this[_0x4f53aa(0xc7)]={};}}function a148_0x3449(){const _0x26e43d=['[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','name','].\x20Original\x20error:\x20','length','1187496LZbRsV','keys','../../../../core','1436425DbQhbg','writeFile','1612731GmgfWX','components','dir','Zip','skipChildErrors','files','unzip','toString','text','556386wkYUCD','writeChild','readZip','MDApiWriter','body','search','exists','start','InvalidXmlError','(((.+)+)+)+$','convertToString','defineProperty','path','../data/child-types','715880qAeMCJ','makeDir','fileType','internalLogger','log','../utils/xml-v2','default','replaceOrAppend','readFile','../utils/zip','handleXmlParsingError','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','1511176KMSDPk','fileName','49msSkda','includes','async','../../internal/fs.internal','sourceDir','MAX_WRITES_PER_TICK','XmlV2','splice','catch','143164uKwrCC','writeParent','parentComponents','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','__importDefault','join','Logger','parse','apply','constructor'];a148_0x3449=function(){return _0x26e43d;};return a148_0x3449();}exports[a148_0x2c8be7(0xe4)]=MDApiWriter;