const a153_0x22a35d=a153_0x43f4;function a153_0x43f4(_0x241e82,_0x237d5a){const _0x2dea58=a153_0x4502();return a153_0x43f4=function(_0xd6f521,_0x3c5bc2){_0xd6f521=_0xd6f521-0x8f;let _0x450204=_0x2dea58[_0xd6f521];return _0x450204;},a153_0x43f4(_0x241e82,_0x237d5a);}(function(_0x12443d,_0x343db0){const _0x297b32=a153_0x43f4,_0x34feaa=_0x12443d();while(!![]){try{const _0x1d46f0=-parseInt(_0x297b32(0x97))/0x1*(-parseInt(_0x297b32(0xac))/0x2)+-parseInt(_0x297b32(0xc5))/0x3+parseInt(_0x297b32(0xb6))/0x4*(-parseInt(_0x297b32(0xb0))/0x5)+parseInt(_0x297b32(0xa5))/0x6*(-parseInt(_0x297b32(0xb8))/0x7)+-parseInt(_0x297b32(0xa6))/0x8+-parseInt(_0x297b32(0x95))/0x9*(parseInt(_0x297b32(0x9e))/0xa)+parseInt(_0x297b32(0x9d))/0xb;if(_0x1d46f0===_0x343db0)break;else _0x34feaa['push'](_0x34feaa['shift']());}catch(_0x1a8c3d){_0x34feaa['push'](_0x34feaa['shift']());}}}(a153_0x4502,0x25c37));const a153_0x3c5bc2=(function(){let _0x25e91e=!![];return function(_0x3fa484,_0x205873){const _0xb2a14f=_0x25e91e?function(){if(_0x205873){const _0x1f6eb0=_0x205873['apply'](_0x3fa484,arguments);return _0x205873=null,_0x1f6eb0;}}:function(){};return _0x25e91e=![],_0xb2a14f;};}()),a153_0xd6f521=a153_0x3c5bc2(this,function(){const _0x57966f=a153_0x43f4;return a153_0xd6f521['toString']()[_0x57966f(0xc6)](_0x57966f(0xb5))[_0x57966f(0xba)]()['constructor'](a153_0xd6f521)[_0x57966f(0xc6)](_0x57966f(0xb5));});a153_0xd6f521();'use strict';var __importDefault=this&&this[a153_0x22a35d(0xc1)]||function(_0x3d850b){const _0x1b2e8e=a153_0x22a35d;return _0x3d850b&&_0x3d850b[_0x1b2e8e(0xc8)]?_0x3d850b:{'default':_0x3d850b};};function a153_0x4502(){const _0x5b9f01=['splice','writeParent','369918YsZoWh','push','180921hZBOIT','makeDir','components','readZip','MAX_WRITES_PER_TICK','dir','10520763jNapyJ','40lUARMi','length','].\x20Original\x20error:\x20','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','body','parentComponents','join','48864cjLaLM','1073504VYNTva','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','handleXmlParsingError','MDApiWriter','XmlV2','convertToString','2rAAuGn','internalLogger','parse','async','197495knuQFx','skipChildErrors','exists','map','fileType','(((.+)+)+)+$','12zLomwh','catch','231lXGPzk','writeFile','toString','includes','have\x20to\x20write\x20%d\x20files','files','../../internal/fs.internal','sourceDir','log','__importDefault','fileName','default','../utils/xml-v2','890490VPxylU','search','../errors/invalid-xml.error','__esModule','keys','writeChild','defineProperty','InvalidXmlError','unzip'];a153_0x4502=function(){return _0x5b9f01;};return a153_0x4502();}Object[a153_0x22a35d(0x90)](exports,a153_0x22a35d(0xc8),{'value':!![]}),exports[a153_0x22a35d(0xa9)]=void 0x0;const path_1=__importDefault(require('path')),core_1=require('../../../../core'),fs_internal_1=require(a153_0x22a35d(0xbe)),invalid_xml_error_1=require(a153_0x22a35d(0xc7)),xml_v2_1=require(a153_0x22a35d(0xc4)),zip_1=require('../utils/zip'),child_types_1=__importDefault(require('../data/child-types'));class MDApiWriter{constructor({components:_0x44bd46,sourceDir:_0x3d5e5d,skipChildErrors:_0x47d18c}){const _0x678fd7=a153_0x22a35d;this[_0x678fd7(0x9b)]=0x64,this[_0x678fd7(0xa3)]={},this[_0x678fd7(0xad)]=new core_1['Logger'](MDApiWriter['name']),this[_0x678fd7(0x99)]=_0x44bd46,this[_0x678fd7(0xbf)]=_0x3d5e5d,this[_0x678fd7(0xb1)]=_0x47d18c;}async['readZip'](_0x2e18a3,_0x3fe458=![]){const _0x5b702e=a153_0x22a35d,_0x4bd9ae=await zip_1['Zip'][_0x5b702e(0x92)](_0x2e18a3),_0x4b9232=[];for(const _0x3c04e3 of Object[_0x5b702e(0xc9)](_0x4bd9ae[_0x5b702e(0xbd)])){!_0x4bd9ae[_0x5b702e(0xbd)][_0x3c04e3][_0x5b702e(0x9c)]&&_0x4b9232[_0x5b702e(0x96)]({'filename':_0x3c04e3,'body':await _0x4bd9ae[_0x5b702e(0xbd)][_0x3c04e3][_0x5b702e(0xaf)](_0x3fe458?'nodebuffer':'text')});}return _0x4b9232;}async[a153_0x22a35d(0x94)](_0x5c9cba){const _0x22ef25=a153_0x22a35d;try{const _0x446025=await this[_0x22ef25(0x9a)](_0x5c9cba[_0x22ef25(0xa2)],!![]);await Promise['all'](_0x446025[_0x22ef25(0xb3)](({filename:_0x384b8e,body:_0x3bf463})=>fs_internal_1['FS'][_0x22ef25(0xb9)](path_1[_0x22ef25(0xc3)][_0x22ef25(0xa4)](this['sourceDir'],_0x384b8e),_0x3bf463)));}catch(_0x30d45b){throw new Error(_0x22ef25(0xa7)+_0x5c9cba[_0x22ef25(0xc2)]+'\x20['+_0x5c9cba[_0x22ef25(0xb4)]+_0x22ef25(0xa0)+_0x30d45b);}}['handleXmlParsingError'](_0x107749,_0x2e43c9){const _0x4fc3f7=a153_0x22a35d;throw new invalid_xml_error_1[(_0x4fc3f7(0x91))]('[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20'+_0x2e43c9[_0x4fc3f7(0xc2)]+'\x20['+_0x2e43c9[_0x4fc3f7(0xb4)]+'].\x20Original\x20error:\x20'+_0x107749);}async[a153_0x22a35d(0x8f)](_0x4c76c5){const _0x21a4ab=a153_0x22a35d,{filename:_0x58a064,body:_0x127506}=(await this[_0x21a4ab(0x9a)](_0x4c76c5[_0x21a4ab(0xa2)]))[0x0];try{if(!this[_0x21a4ab(0xa3)][_0x58a064]){const _0x1c3dd4=path_1[_0x21a4ab(0xc3)][_0x21a4ab(0xa4)](this[_0x21a4ab(0xbf)],_0x58a064);if(await fs_internal_1['FS'][_0x21a4ab(0xb2)](_0x1c3dd4)){const _0x379aa5=await fs_internal_1['FS']['readFile'](_0x1c3dd4);this['parentComponents'][_0x58a064]=await xml_v2_1[_0x21a4ab(0xaa)][_0x21a4ab(0xae)](_0x379aa5)[_0x21a4ab(0xb7)](_0x2a865a=>this[_0x21a4ab(0xa8)](_0x2a865a,_0x4c76c5));}else{this[_0x21a4ab(0xa3)][_0x58a064]=await xml_v2_1['XmlV2'][_0x21a4ab(0xae)](_0x127506)[_0x21a4ab(0xb7)](_0x45f56a=>this[_0x21a4ab(0xa8)](_0x45f56a,_0x4c76c5));return;}}const _0x585dce=this[_0x21a4ab(0xa3)][_0x58a064],_0x56e646=await xml_v2_1[_0x21a4ab(0xaa)][_0x21a4ab(0xae)](_0x127506)[_0x21a4ab(0xb7)](_0x1ecb87=>this[_0x21a4ab(0xa8)](_0x1ecb87,_0x4c76c5));xml_v2_1[_0x21a4ab(0xaa)]['replaceOrAppend'](_0x585dce,_0x56e646);}catch(_0x4c17bf){if(_0x4c17bf instanceof invalid_xml_error_1[_0x21a4ab(0x91)]){if(this[_0x21a4ab(0xb1)])return;else throw _0x4c17bf;}throw new Error(_0x21a4ab(0xa1)+_0x4c76c5[_0x21a4ab(0xc2)]+'\x20['+_0x4c76c5[_0x21a4ab(0xb4)]+'].\x20Original\x20error:\x20'+_0x4c17bf);}}async['start'](){const _0x313da4=a153_0x22a35d;!await fs_internal_1['FS'][_0x313da4(0xb2)](this[_0x313da4(0xbf)])&&await fs_internal_1['FS'][_0x313da4(0x98)](this['sourceDir']);for(const _0x58f781 of this[_0x313da4(0x99)]){!child_types_1['default'][_0x313da4(0xbb)](_0x58f781[_0x313da4(0xb4)])?await this[_0x313da4(0x94)](_0x58f781):await this[_0x313da4(0x8f)](_0x58f781);}const _0xf2fb3a=Object['keys'](this[_0x313da4(0xa3)]);this['internalLogger'][_0x313da4(0xc0)](_0x313da4(0xbc),this[_0x313da4(0x99)][_0x313da4(0x9f)]);while(_0xf2fb3a['length']){const _0x55cdd5=_0xf2fb3a[_0x313da4(0x93)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x408c9d of _0x55cdd5){await fs_internal_1['FS']['writeFile'](path_1[_0x313da4(0xc3)]['join'](this[_0x313da4(0xbf)],_0x408c9d),xml_v2_1[_0x313da4(0xaa)][_0x313da4(0xab)](this[_0x313da4(0xa3)][_0x408c9d]));}}this['parentComponents']={};}}exports[a153_0x22a35d(0xa9)]=MDApiWriter;