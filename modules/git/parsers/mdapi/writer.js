const a153_0x2396d0=a153_0x358b;(function(_0x357aa0,_0xb7a445){const _0x184f74=a153_0x358b,_0x19bfe6=_0x357aa0();while(!![]){try{const _0x5beca0=-parseInt(_0x184f74(0x16c))/0x1*(-parseInt(_0x184f74(0x13e))/0x2)+-parseInt(_0x184f74(0x161))/0x3+-parseInt(_0x184f74(0x149))/0x4+-parseInt(_0x184f74(0x16f))/0x5*(parseInt(_0x184f74(0x14b))/0x6)+-parseInt(_0x184f74(0x172))/0x7+parseInt(_0x184f74(0x15b))/0x8+parseInt(_0x184f74(0x168))/0x9;if(_0x5beca0===_0xb7a445)break;else _0x19bfe6['push'](_0x19bfe6['shift']());}catch(_0x217360){_0x19bfe6['push'](_0x19bfe6['shift']());}}}(a153_0x4a03,0x86a59));const a153_0x9ffca7=(function(){let _0x5c92b4=!![];return function(_0x4b386a,_0x18ad0f){const _0x3445a3=_0x5c92b4?function(){const _0x491523=a153_0x358b;if(_0x18ad0f){const _0x28231c=_0x18ad0f[_0x491523(0x14a)](_0x4b386a,arguments);return _0x18ad0f=null,_0x28231c;}}:function(){};return _0x5c92b4=![],_0x3445a3;};}()),a153_0x1cf944=a153_0x9ffca7(this,function(){const _0x2b939b=a153_0x358b;return a153_0x1cf944[_0x2b939b(0x13b)]()['search']('(((.+)+)+)+$')[_0x2b939b(0x13b)]()['constructor'](a153_0x1cf944)['search']('(((.+)+)+)+$');});function a153_0x358b(_0x52ecd6,_0x43c554){const _0x1d70e6=a153_0x4a03();return a153_0x358b=function(_0x1cf944,_0x9ffca7){_0x1cf944=_0x1cf944-0x13b;let _0x4a037c=_0x1d70e6[_0x1cf944];return _0x4a037c;},a153_0x358b(_0x52ecd6,_0x43c554);}a153_0x1cf944();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2481e6){const _0x1d1956=a153_0x358b;return _0x2481e6&&_0x2481e6[_0x1d1956(0x157)]?_0x2481e6:{'default':_0x2481e6};};Object[a153_0x2396d0(0x147)](exports,'__esModule',{'value':!![]}),exports[a153_0x2396d0(0x171)]=void 0x0;const path_1=__importDefault(require('path')),core_1=require(a153_0x2396d0(0x15c)),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require('../errors/invalid-xml.error'),xml_v2_1=require(a153_0x2396d0(0x13f)),zip_1=require(a153_0x2396d0(0x16e)),child_types_1=__importDefault(require(a153_0x2396d0(0x146)));function a153_0x4a03(){const _0x3db769=['handleXmlParsingError','default','writeParent','3535968mWMJvJ','../../../../core','map','components','fileType','body','2368518TCEemn','writeChild','catch','async','replaceOrAppend','MAX_WRITES_PER_TICK','all','15807969gbVODY','XmlV2','parse','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','9857cjivzG','skipChildErrors','../utils/zip','817870eogYwb','keys','MDApiWriter','2297750EPXEaH','push','fileName','readZip','includes','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','toString','unzip','join','104QnBVTW','../utils/xml-v2','convertToString','writeFile','exists','name','text','parentComponents','../data/child-types','defineProperty','].\x20Original\x20error:\x20','895448vpuKIC','apply','30yNvPey','nodebuffer','InvalidXmlError','splice','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','Logger','log','length','files','readFile','internalLogger','sourceDir','__esModule'];a153_0x4a03=function(){return _0x3db769;};return a153_0x4a03();}class MDApiWriter{constructor({components:_0x5ac700,sourceDir:_0x264842,skipChildErrors:_0x51f264}){const _0x508d58=a153_0x2396d0;this['MAX_WRITES_PER_TICK']=0x64,this[_0x508d58(0x145)]={},this['internalLogger']=new core_1[(_0x508d58(0x150))](MDApiWriter[_0x508d58(0x143)]),this['components']=_0x5ac700,this[_0x508d58(0x156)]=_0x264842,this[_0x508d58(0x16d)]=_0x51f264;}async['readZip'](_0x240b31,_0x5394d0=![]){const _0x264860=a153_0x2396d0,_0x291dc2=await zip_1['Zip'][_0x264860(0x13c)](_0x240b31),_0x4482d1=[];for(const _0x321c7d of Object['keys'](_0x291dc2['files'])){!_0x291dc2['files'][_0x321c7d]['dir']&&_0x4482d1['push']({'filename':_0x321c7d,'body':await _0x291dc2[_0x264860(0x153)][_0x321c7d][_0x264860(0x164)](_0x5394d0?_0x264860(0x14c):_0x264860(0x144))});}return _0x4482d1;}async['writeParent'](_0x5d35a0){const _0x287c4a=a153_0x2396d0;try{const _0x2877d5=await this[_0x287c4a(0x175)](_0x5d35a0[_0x287c4a(0x160)],!![]);await Promise[_0x287c4a(0x167)](_0x2877d5[_0x287c4a(0x15d)](({filename:_0x4a5479,body:_0x545a7d})=>fs_internal_1['FS'][_0x287c4a(0x141)](path_1[_0x287c4a(0x159)][_0x287c4a(0x13d)](this[_0x287c4a(0x156)],_0x4a5479),_0x545a7d)));}catch(_0x5b2190){throw new Error(_0x287c4a(0x16b)+_0x5d35a0[_0x287c4a(0x174)]+'\x20['+_0x5d35a0[_0x287c4a(0x15f)]+_0x287c4a(0x148)+_0x5b2190);}}['handleXmlParsingError'](_0x198c59,_0x3828c9){const _0x43c1ff=a153_0x2396d0;throw new invalid_xml_error_1['InvalidXmlError'](_0x43c1ff(0x14f)+_0x3828c9[_0x43c1ff(0x174)]+'\x20['+_0x3828c9[_0x43c1ff(0x15f)]+'].\x20Original\x20error:\x20'+_0x198c59);}async[a153_0x2396d0(0x162)](_0x168dc8){const _0x230f4a=a153_0x2396d0,{filename:_0x2be869,body:_0x438f40}=(await this['readZip'](_0x168dc8[_0x230f4a(0x160)]))[0x0];try{if(!this['parentComponents'][_0x2be869]){const _0x438ff8=path_1[_0x230f4a(0x159)][_0x230f4a(0x13d)](this[_0x230f4a(0x156)],_0x2be869);if(await fs_internal_1['FS'][_0x230f4a(0x142)](_0x438ff8)){const _0x5294f1=await fs_internal_1['FS'][_0x230f4a(0x154)](_0x438ff8);this[_0x230f4a(0x145)][_0x2be869]=await xml_v2_1[_0x230f4a(0x169)]['parse'](_0x5294f1)[_0x230f4a(0x163)](_0x4af303=>this[_0x230f4a(0x158)](_0x4af303,_0x168dc8));}else{this['parentComponents'][_0x2be869]=await xml_v2_1[_0x230f4a(0x169)][_0x230f4a(0x16a)](_0x438f40)[_0x230f4a(0x163)](_0x3d1ecb=>this[_0x230f4a(0x158)](_0x3d1ecb,_0x168dc8));return;}}const _0x439c84=this['parentComponents'][_0x2be869],_0xbee7c6=await xml_v2_1['XmlV2'][_0x230f4a(0x16a)](_0x438f40)[_0x230f4a(0x163)](_0x3e626a=>this[_0x230f4a(0x158)](_0x3e626a,_0x168dc8));xml_v2_1[_0x230f4a(0x169)][_0x230f4a(0x165)](_0x439c84,_0xbee7c6);}catch(_0x4c8e14){if(_0x4c8e14 instanceof invalid_xml_error_1[_0x230f4a(0x14d)]){if(this['skipChildErrors'])return;else throw _0x4c8e14;}throw new Error(_0x230f4a(0x177)+_0x168dc8[_0x230f4a(0x174)]+'\x20['+_0x168dc8['fileType']+_0x230f4a(0x148)+_0x4c8e14);}}async['start'](){const _0x5d57c0=a153_0x2396d0;!await fs_internal_1['FS']['exists'](this[_0x5d57c0(0x156)])&&await fs_internal_1['FS']['makeDir'](this['sourceDir']);const _0x44f19a=[],_0x434afe=[];for(const _0x415db2 of this[_0x5d57c0(0x15e)]){child_types_1['default'][_0x5d57c0(0x176)](_0x415db2[_0x5d57c0(0x15f)])?_0x434afe[_0x5d57c0(0x173)](_0x415db2):_0x44f19a[_0x5d57c0(0x173)](_0x415db2);}for(const _0x107cee of _0x44f19a){await this[_0x5d57c0(0x15a)](_0x107cee);}for(const _0x5074c2 of _0x434afe){await this[_0x5d57c0(0x162)](_0x5074c2);}const _0x4a42ef=Object[_0x5d57c0(0x170)](this[_0x5d57c0(0x145)]);this[_0x5d57c0(0x155)][_0x5d57c0(0x151)]('have\x20to\x20write\x20%d\x20files',this[_0x5d57c0(0x15e)][_0x5d57c0(0x152)]);while(_0x4a42ef[_0x5d57c0(0x152)]){const _0x4d0bce=_0x4a42ef[_0x5d57c0(0x14e)](0x0,this[_0x5d57c0(0x166)]);for(const _0x378120 of _0x4d0bce){await fs_internal_1['FS'][_0x5d57c0(0x141)](path_1[_0x5d57c0(0x159)]['join'](this[_0x5d57c0(0x156)],_0x378120),xml_v2_1[_0x5d57c0(0x169)][_0x5d57c0(0x140)](this['parentComponents'][_0x378120]));}}this['parentComponents']={};}}exports['MDApiWriter']=MDApiWriter;