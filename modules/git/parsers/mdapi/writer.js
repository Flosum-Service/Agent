const a149_0x18ddd9=a149_0x1fd0;(function(_0x3cd966,_0x1ebb0c){const _0x14c075=a149_0x1fd0,_0x381153=_0x3cd966();while(!![]){try{const _0x3d638d=-parseInt(_0x14c075(0x1e1))/0x1*(-parseInt(_0x14c075(0x1a8))/0x2)+-parseInt(_0x14c075(0x1e6))/0x3+-parseInt(_0x14c075(0x1de))/0x4*(parseInt(_0x14c075(0x1dc))/0x5)+-parseInt(_0x14c075(0x1b2))/0x6+parseInt(_0x14c075(0x1e3))/0x7+parseInt(_0x14c075(0x1c1))/0x8*(parseInt(_0x14c075(0x1c4))/0x9)+parseInt(_0x14c075(0x1e2))/0xa;if(_0x3d638d===_0x1ebb0c)break;else _0x381153['push'](_0x381153['shift']());}catch(_0x16ea25){_0x381153['push'](_0x381153['shift']());}}}(a149_0x2ec3,0xa9909));const a149_0xd2cb93=(function(){let _0x378239=!![];return function(_0x220e40,_0x18aeee){const _0x9388e6=_0x378239?function(){const _0x2fcdae=a149_0x1fd0;if(_0x18aeee){const _0x47a2c2=_0x18aeee[_0x2fcdae(0x1d4)](_0x220e40,arguments);return _0x18aeee=null,_0x47a2c2;}}:function(){};return _0x378239=![],_0x9388e6;};}()),a149_0x3313d2=a149_0xd2cb93(this,function(){const _0x166f7d=a149_0x1fd0;return a149_0x3313d2[_0x166f7d(0x1dd)]()[_0x166f7d(0x1d2)](_0x166f7d(0x1af))[_0x166f7d(0x1dd)]()['constructor'](a149_0x3313d2)['search']('(((.+)+)+)+$');});function a149_0x2ec3(){const _0x1eb0f7=['InvalidXmlError','includes','18017CvcyQF','18238050nepEob','2728446RgBISJ','../utils/xml-v2','nodebuffer','1337733okPTpf','writeFile','join','46DfkRHz','fileType','have\x20to\x20write\x20%d\x20files','splice','push','Logger','../../../../core','(((.+)+)+)+$','XmlV2','../errors/invalid-xml.error','3017790xwzMZv','files','all','skipChildErrors','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','parse','convertToString','components','readZip','replaceOrAppend','log','].\x20Original\x20error:\x20','MDApiWriter','MAX_WRITES_PER_TICK','body','904iOcbps','keys','exists','23940vofekE','internalLogger','unzip','writeParent','catch','__importDefault','sourceDir','__esModule','../data/child-types','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','length','dir','start','handleXmlParsingError','search','fileName','apply','default','name','../../internal/fs.internal','parentComponents','defineProperty','writeChild','map','605coJnku','toString','42484bmExCN'];a149_0x2ec3=function(){return _0x1eb0f7;};return a149_0x2ec3();}a149_0x3313d2();'use strict';var __importDefault=this&&this[a149_0x18ddd9(0x1c9)]||function(_0x39af8a){const _0x3daae9=a149_0x18ddd9;return _0x39af8a&&_0x39af8a[_0x3daae9(0x1cb)]?_0x39af8a:{'default':_0x39af8a};};Object[a149_0x18ddd9(0x1d9)](exports,'__esModule',{'value':!![]}),exports[a149_0x18ddd9(0x1be)]=void 0x0;const path_1=__importDefault(require('path')),core_1=require(a149_0x18ddd9(0x1ae)),fs_internal_1=require(a149_0x18ddd9(0x1d7)),invalid_xml_error_1=require(a149_0x18ddd9(0x1b1)),xml_v2_1=require(a149_0x18ddd9(0x1e4)),zip_1=require('../utils/zip'),child_types_1=__importDefault(require(a149_0x18ddd9(0x1cc)));function a149_0x1fd0(_0x168988,_0x2dcb67){const _0x64fd2c=a149_0x2ec3();return a149_0x1fd0=function(_0x3313d2,_0xd2cb93){_0x3313d2=_0x3313d2-0x1a6;let _0x2ec3c4=_0x64fd2c[_0x3313d2];return _0x2ec3c4;},a149_0x1fd0(_0x168988,_0x2dcb67);}class MDApiWriter{constructor({components:_0x2c5ba1,sourceDir:_0x1fc234,skipChildErrors:_0x52d238}){const _0x3accab=a149_0x18ddd9;this['MAX_WRITES_PER_TICK']=0x64,this[_0x3accab(0x1d8)]={},this[_0x3accab(0x1c5)]=new core_1[(_0x3accab(0x1ad))](MDApiWriter[_0x3accab(0x1d6)]),this['components']=_0x2c5ba1,this[_0x3accab(0x1ca)]=_0x1fc234,this[_0x3accab(0x1b5)]=_0x52d238;}async[a149_0x18ddd9(0x1ba)](_0x2495aa,_0x4f3f4c=![]){const _0x144c54=a149_0x18ddd9,_0x2fadfb=await zip_1['Zip'][_0x144c54(0x1c6)](_0x2495aa),_0x519189=[];for(const _0x18ff42 of Object[_0x144c54(0x1c2)](_0x2fadfb['files'])){!_0x2fadfb[_0x144c54(0x1b3)][_0x18ff42][_0x144c54(0x1cf)]&&_0x519189[_0x144c54(0x1ac)]({'filename':_0x18ff42,'body':await _0x2fadfb['files'][_0x18ff42]['async'](_0x4f3f4c?_0x144c54(0x1e5):'text')});}return _0x519189;}async[a149_0x18ddd9(0x1c7)](_0x4ff7a0){const _0x2e39ec=a149_0x18ddd9;try{const _0x54a534=await this[_0x2e39ec(0x1ba)](_0x4ff7a0['body'],!![]);await Promise[_0x2e39ec(0x1b4)](_0x54a534[_0x2e39ec(0x1db)](({filename:_0x367cf5,body:_0x25bb36})=>fs_internal_1['FS'][_0x2e39ec(0x1a6)](path_1[_0x2e39ec(0x1d5)][_0x2e39ec(0x1a7)](this['sourceDir'],_0x367cf5),_0x25bb36)));}catch(_0x322a59){throw new Error(_0x2e39ec(0x1b6)+_0x4ff7a0[_0x2e39ec(0x1d3)]+'\x20['+_0x4ff7a0['fileType']+'].\x20Original\x20error:\x20'+_0x322a59);}}[a149_0x18ddd9(0x1d1)](_0x5429e1,_0x52c819){const _0x3765dd=a149_0x18ddd9;throw new invalid_xml_error_1[(_0x3765dd(0x1df))](_0x3765dd(0x1cd)+_0x52c819[_0x3765dd(0x1d3)]+'\x20['+_0x52c819[_0x3765dd(0x1a9)]+'].\x20Original\x20error:\x20'+_0x5429e1);}async[a149_0x18ddd9(0x1da)](_0x6c779e){const _0x15f0ba=a149_0x18ddd9,{filename:_0x3f80ef,body:_0x40cae1}=(await this['readZip'](_0x6c779e[_0x15f0ba(0x1c0)]))[0x0];try{if(!this[_0x15f0ba(0x1d8)][_0x3f80ef]){const _0x2edb05=path_1[_0x15f0ba(0x1d5)][_0x15f0ba(0x1a7)](this[_0x15f0ba(0x1ca)],_0x3f80ef);if(await fs_internal_1['FS'][_0x15f0ba(0x1c3)](_0x2edb05)){const _0x19e327=await fs_internal_1['FS']['readFile'](_0x2edb05);this[_0x15f0ba(0x1d8)][_0x3f80ef]=await xml_v2_1['XmlV2']['parse'](_0x19e327)[_0x15f0ba(0x1c8)](_0x5a72a1=>this[_0x15f0ba(0x1d1)](_0x5a72a1,_0x6c779e));}else{this['parentComponents'][_0x3f80ef]=await xml_v2_1[_0x15f0ba(0x1b0)][_0x15f0ba(0x1b7)](_0x40cae1)['catch'](_0x332049=>this[_0x15f0ba(0x1d1)](_0x332049,_0x6c779e));return;}}const _0x13f3ba=this[_0x15f0ba(0x1d8)][_0x3f80ef],_0x2d3b43=await xml_v2_1[_0x15f0ba(0x1b0)]['parse'](_0x40cae1)[_0x15f0ba(0x1c8)](_0x4191c8=>this['handleXmlParsingError'](_0x4191c8,_0x6c779e));xml_v2_1[_0x15f0ba(0x1b0)][_0x15f0ba(0x1bb)](_0x13f3ba,_0x2d3b43);}catch(_0x19cf13){if(_0x19cf13 instanceof invalid_xml_error_1[_0x15f0ba(0x1df)]){if(this[_0x15f0ba(0x1b5)])return;else throw _0x19cf13;}throw new Error('[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x6c779e[_0x15f0ba(0x1d3)]+'\x20['+_0x6c779e['fileType']+_0x15f0ba(0x1bd)+_0x19cf13);}}async[a149_0x18ddd9(0x1d0)](){const _0x522621=a149_0x18ddd9;!await fs_internal_1['FS'][_0x522621(0x1c3)](this[_0x522621(0x1ca)])&&await fs_internal_1['FS']['makeDir'](this[_0x522621(0x1ca)]);for(const _0x1652ab of this[_0x522621(0x1b9)]){!child_types_1[_0x522621(0x1d5)][_0x522621(0x1e0)](_0x1652ab[_0x522621(0x1a9)])?await this['writeParent'](_0x1652ab):await this[_0x522621(0x1da)](_0x1652ab);}const _0x34bb33=Object[_0x522621(0x1c2)](this[_0x522621(0x1d8)]);this['internalLogger'][_0x522621(0x1bc)](_0x522621(0x1aa),this['components'][_0x522621(0x1ce)]);while(_0x34bb33['length']){const _0x19c1c8=_0x34bb33[_0x522621(0x1ab)](0x0,this[_0x522621(0x1bf)]);for(const _0x1213d0 of _0x19c1c8){await fs_internal_1['FS']['writeFile'](path_1[_0x522621(0x1d5)][_0x522621(0x1a7)](this[_0x522621(0x1ca)],_0x1213d0),xml_v2_1[_0x522621(0x1b0)][_0x522621(0x1b8)](this[_0x522621(0x1d8)][_0x1213d0]));}}this['parentComponents']={};}}exports['MDApiWriter']=MDApiWriter;