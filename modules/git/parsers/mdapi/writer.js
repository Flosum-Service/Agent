const a153_0x5ea4c5=a153_0x4d8c;(function(_0xfffe4f,_0x2508b8){const _0x106037=a153_0x4d8c,_0x4287d5=_0xfffe4f();while(!![]){try{const _0x3f1213=-parseInt(_0x106037(0x1a4))/0x1+parseInt(_0x106037(0x1b2))/0x2+-parseInt(_0x106037(0x1c9))/0x3+parseInt(_0x106037(0x1b4))/0x4+parseInt(_0x106037(0x1d6))/0x5+parseInt(_0x106037(0x1cf))/0x6*(parseInt(_0x106037(0x1e0))/0x7)+parseInt(_0x106037(0x1da))/0x8*(-parseInt(_0x106037(0x1d1))/0x9);if(_0x3f1213===_0x2508b8)break;else _0x4287d5['push'](_0x4287d5['shift']());}catch(_0x1b90fb){_0x4287d5['push'](_0x4287d5['shift']());}}}(a153_0x2710,0xca1f5));const a153_0x24068a=(function(){let _0x4029da=!![];return function(_0xbd6a4,_0x2d51df){const _0x271eaa=_0x4029da?function(){const _0x230241=a153_0x4d8c;if(_0x2d51df){const _0x22e713=_0x2d51df[_0x230241(0x1b9)](_0xbd6a4,arguments);return _0x2d51df=null,_0x22e713;}}:function(){};return _0x4029da=![],_0x271eaa;};}()),a153_0x2beedf=a153_0x24068a(this,function(){const _0x5bdc68=a153_0x4d8c;return a153_0x2beedf[_0x5bdc68(0x1bc)]()[_0x5bdc68(0x1ae)](_0x5bdc68(0x1b6))[_0x5bdc68(0x1bc)]()[_0x5bdc68(0x1c5)](a153_0x2beedf)[_0x5bdc68(0x1ae)](_0x5bdc68(0x1b6));});a153_0x2beedf();'use strict';var __importDefault=this&&this['__importDefault']||function(_0xc7cef){return _0xc7cef&&_0xc7cef['__esModule']?_0xc7cef:{'default':_0xc7cef};};Object['defineProperty'](exports,a153_0x5ea4c5(0x1d2),{'value':!![]}),exports[a153_0x5ea4c5(0x1d7)]=void 0x0;const path_1=__importDefault(require(a153_0x5ea4c5(0x1ce))),core_1=require('../../../../core'),fs_internal_1=require(a153_0x5ea4c5(0x1ad)),invalid_xml_error_1=require(a153_0x5ea4c5(0x1c4)),xml_v2_1=require(a153_0x5ea4c5(0x1b8)),zip_1=require(a153_0x5ea4c5(0x1c2)),child_types_1=__importDefault(require(a153_0x5ea4c5(0x1b1)));function a153_0x2710(){const _0x29e363=['../utils/zip','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','../errors/invalid-xml.error','constructor','writeFile','includes','default','4252203nCNMVx','sourceDir','async','Zip','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','path','6293670ddeqCT','parentComponents','417645QfeonC','__esModule','fileType','splice','log','359780pUfOUD','MDApiWriter','all','].\x20Original\x20error:\x20','56kNQhBk','writeChild','handleXmlParsingError','Logger','join','text','7pNPjbN','MAX_WRITES_PER_TICK','fileName','423662RmMhgk','XmlV2','name','push','body','nodebuffer','convertToString','components','readFile','../../internal/fs.internal','search','InvalidXmlError','makeDir','../data/child-types','2028824KvLrck','parse','3433912dDtYZm','exists','(((.+)+)+)+$','files','../utils/xml-v2','apply','writeParent','readZip','toString','have\x20to\x20write\x20%d\x20files','length','catch','map','keys'];a153_0x2710=function(){return _0x29e363;};return a153_0x2710();}class MDApiWriter{constructor({components:_0x1ba499,sourceDir:_0x1390db,skipChildErrors:_0x16d405}){const _0x323e8e=a153_0x5ea4c5;this[_0x323e8e(0x1e1)]=0x64,this[_0x323e8e(0x1d0)]={},this['internalLogger']=new core_1[(_0x323e8e(0x1dd))](MDApiWriter[_0x323e8e(0x1a6)]),this['components']=_0x1ba499,this[_0x323e8e(0x1ca)]=_0x1390db,this['skipChildErrors']=_0x16d405;}async[a153_0x5ea4c5(0x1bb)](_0x4c171d,_0x12b523=![]){const _0x431a5e=a153_0x5ea4c5,_0x43f200=await zip_1[_0x431a5e(0x1cc)]['unzip'](_0x4c171d),_0x14d4c8=[];for(const _0x140aea of Object[_0x431a5e(0x1c1)](_0x43f200['files'])){!_0x43f200[_0x431a5e(0x1b7)][_0x140aea]['dir']&&_0x14d4c8[_0x431a5e(0x1a7)]({'filename':_0x140aea,'body':await _0x43f200[_0x431a5e(0x1b7)][_0x140aea][_0x431a5e(0x1cb)](_0x12b523?_0x431a5e(0x1a9):_0x431a5e(0x1df))});}return _0x14d4c8;}async[a153_0x5ea4c5(0x1ba)](_0x552f9e){const _0x459fa7=a153_0x5ea4c5;try{const _0x5ab0ca=await this['readZip'](_0x552f9e[_0x459fa7(0x1a8)],!![]);await Promise[_0x459fa7(0x1d8)](_0x5ab0ca[_0x459fa7(0x1c0)](({filename:_0x5984d0,body:_0x3392e0})=>fs_internal_1['FS'][_0x459fa7(0x1c6)](path_1[_0x459fa7(0x1c8)][_0x459fa7(0x1de)](this[_0x459fa7(0x1ca)],_0x5984d0),_0x3392e0)));}catch(_0x5addf2){throw new Error(_0x459fa7(0x1c3)+_0x552f9e[_0x459fa7(0x1a3)]+'\x20['+_0x552f9e['fileType']+_0x459fa7(0x1d9)+_0x5addf2);}}[a153_0x5ea4c5(0x1dc)](_0x4b3f33,_0x495865){const _0xb876fc=a153_0x5ea4c5;throw new invalid_xml_error_1[(_0xb876fc(0x1af))](_0xb876fc(0x1cd)+_0x495865[_0xb876fc(0x1a3)]+'\x20['+_0x495865[_0xb876fc(0x1d3)]+'].\x20Original\x20error:\x20'+_0x4b3f33);}async[a153_0x5ea4c5(0x1db)](_0x58ced5){const _0xd8b971=a153_0x5ea4c5,{filename:_0x4ad852,body:_0x12e19b}=(await this[_0xd8b971(0x1bb)](_0x58ced5['body']))[0x0];try{if(!this[_0xd8b971(0x1d0)][_0x4ad852]){const _0x14b603=path_1[_0xd8b971(0x1c8)][_0xd8b971(0x1de)](this['sourceDir'],_0x4ad852);if(await fs_internal_1['FS']['exists'](_0x14b603)){const _0x437b26=await fs_internal_1['FS'][_0xd8b971(0x1ac)](_0x14b603);this[_0xd8b971(0x1d0)][_0x4ad852]=await xml_v2_1[_0xd8b971(0x1a5)][_0xd8b971(0x1b3)](_0x437b26)[_0xd8b971(0x1bf)](_0x225d02=>this['handleXmlParsingError'](_0x225d02,_0x58ced5));}else{this[_0xd8b971(0x1d0)][_0x4ad852]=await xml_v2_1['XmlV2'][_0xd8b971(0x1b3)](_0x12e19b)[_0xd8b971(0x1bf)](_0xbb366e=>this[_0xd8b971(0x1dc)](_0xbb366e,_0x58ced5));return;}}const _0x3e7bd9=this['parentComponents'][_0x4ad852],_0x225e74=await xml_v2_1[_0xd8b971(0x1a5)][_0xd8b971(0x1b3)](_0x12e19b)[_0xd8b971(0x1bf)](_0x489587=>this[_0xd8b971(0x1dc)](_0x489587,_0x58ced5));xml_v2_1[_0xd8b971(0x1a5)]['replaceOrAppend'](_0x3e7bd9,_0x225e74);}catch(_0x7706c1){if(_0x7706c1 instanceof invalid_xml_error_1[_0xd8b971(0x1af)]){if(this['skipChildErrors'])return;else throw _0x7706c1;}throw new Error('[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20'+_0x58ced5['fileName']+'\x20['+_0x58ced5[_0xd8b971(0x1d3)]+_0xd8b971(0x1d9)+_0x7706c1);}}async['start'](){const _0x5c9440=a153_0x5ea4c5;!await fs_internal_1['FS'][_0x5c9440(0x1b5)](this[_0x5c9440(0x1ca)])&&await fs_internal_1['FS'][_0x5c9440(0x1b0)](this[_0x5c9440(0x1ca)]);for(const _0x9d0da0 of this[_0x5c9440(0x1ab)]){!child_types_1[_0x5c9440(0x1c8)][_0x5c9440(0x1c7)](_0x9d0da0[_0x5c9440(0x1d3)])?await this[_0x5c9440(0x1ba)](_0x9d0da0):await this[_0x5c9440(0x1db)](_0x9d0da0);}const _0x485480=Object['keys'](this[_0x5c9440(0x1d0)]);this['internalLogger'][_0x5c9440(0x1d5)](_0x5c9440(0x1bd),this[_0x5c9440(0x1ab)][_0x5c9440(0x1be)]);while(_0x485480['length']){const _0x52ac41=_0x485480[_0x5c9440(0x1d4)](0x0,this[_0x5c9440(0x1e1)]);for(const _0x5c7737 of _0x52ac41){await fs_internal_1['FS'][_0x5c9440(0x1c6)](path_1[_0x5c9440(0x1c8)][_0x5c9440(0x1de)](this[_0x5c9440(0x1ca)],_0x5c7737),xml_v2_1[_0x5c9440(0x1a5)][_0x5c9440(0x1aa)](this[_0x5c9440(0x1d0)][_0x5c7737]));}}this[_0x5c9440(0x1d0)]={};}}function a153_0x4d8c(_0x46b8c4,_0x59de91){const _0x75f702=a153_0x2710();return a153_0x4d8c=function(_0x2beedf,_0x24068a){_0x2beedf=_0x2beedf-0x1a3;let _0x27100f=_0x75f702[_0x2beedf];return _0x27100f;},a153_0x4d8c(_0x46b8c4,_0x59de91);}exports[a153_0x5ea4c5(0x1d7)]=MDApiWriter;