const a148_0x583395=a148_0xedc2;(function(_0x7bafa1,_0x407f64){const _0x23389e=a148_0xedc2,_0xe9db15=_0x7bafa1();while(!![]){try{const _0x118efc=-parseInt(_0x23389e(0x189))/0x1+-parseInt(_0x23389e(0x198))/0x2+parseInt(_0x23389e(0x18c))/0x3+-parseInt(_0x23389e(0x1b0))/0x4*(-parseInt(_0x23389e(0x1a9))/0x5)+parseInt(_0x23389e(0x18e))/0x6+parseInt(_0x23389e(0x1ab))/0x7*(-parseInt(_0x23389e(0x191))/0x8)+-parseInt(_0x23389e(0x192))/0x9*(-parseInt(_0x23389e(0x1b6))/0xa);if(_0x118efc===_0x407f64)break;else _0xe9db15['push'](_0xe9db15['shift']());}catch(_0x3ab6e4){_0xe9db15['push'](_0xe9db15['shift']());}}}(a148_0x1561,0x1cc21));function a148_0x1561(){const _0x94803e=['start','MAX_WRITES_PER_TICK','35bztWcH','splice','28FaTmWb','components','readZip','../errors/invalid-xml.error','join','77676SZtGrz','internalLogger','../../internal/fs.internal','convertToString','exists','files','10mhfCrR','map','replaceOrAppend','parse','fileName','text','__esModule','unzip','all','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','parentComponents','search','async','catch','skipChildErrors','path','Zip','201957LaoGRT','writeFile','writeChild','221649FTwZWP','writeParent','891426AGYKNL','keys','makeDir','246328XvrxFO','2002491ByBtGV','handleXmlParsingError','dir','MDApiWriter','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','fileType','275944BNnFBp','readFile','sourceDir','].\x20Original\x20error:\x20','XmlV2','toString','length','InvalidXmlError','default','constructor','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','../../../../core','__importDefault','Logger','../data/child-types'];a148_0x1561=function(){return _0x94803e;};return a148_0x1561();}const a148_0x20670d=(function(){let _0x53035b=!![];return function(_0x39550c,_0x2daedf){const _0x3fbc29=_0x53035b?function(){if(_0x2daedf){const _0x39d9c9=_0x2daedf['apply'](_0x39550c,arguments);return _0x2daedf=null,_0x39d9c9;}}:function(){};return _0x53035b=![],_0x3fbc29;};}()),a148_0x432806=a148_0x20670d(this,function(){const _0x379231=a148_0xedc2;return a148_0x432806['toString']()[_0x379231(0x1c1)]('(((.+)+)+)+$')[_0x379231(0x19d)]()[_0x379231(0x1a1)](a148_0x432806)[_0x379231(0x1c1)]('(((.+)+)+)+$');});a148_0x432806();function a148_0xedc2(_0x3e11be,_0x379466){const _0x2967e6=a148_0x1561();return a148_0xedc2=function(_0x432806,_0x20670d){_0x432806=_0x432806-0x187;let _0x1561bb=_0x2967e6[_0x432806];return _0x1561bb;},a148_0xedc2(_0x3e11be,_0x379466);}'use strict';var __importDefault=this&&this[a148_0x583395(0x1a4)]||function(_0x34c418){const _0x3960b3=a148_0x583395;return _0x34c418&&_0x34c418[_0x3960b3(0x1bc)]?_0x34c418:{'default':_0x34c418};};Object['defineProperty'](exports,a148_0x583395(0x1bc),{'value':!![]}),exports['MDApiWriter']=void 0x0;const path_1=__importDefault(require(a148_0x583395(0x187))),core_1=require(a148_0x583395(0x1a3)),fs_internal_1=require(a148_0x583395(0x1b2)),invalid_xml_error_1=require(a148_0x583395(0x1ae)),xml_v2_1=require('../utils/xml-v2'),zip_1=require('../utils/zip'),child_types_1=__importDefault(require(a148_0x583395(0x1a6)));class MDApiWriter{constructor({components:_0x2df075,sourceDir:_0x1f842a,skipChildErrors:_0xb69491}){const _0x2d04d0=a148_0x583395;this['MAX_WRITES_PER_TICK']=0x64,this[_0x2d04d0(0x1c0)]={},this[_0x2d04d0(0x1b1)]=new core_1[(_0x2d04d0(0x1a5))](MDApiWriter['name']),this[_0x2d04d0(0x1ac)]=_0x2df075,this[_0x2d04d0(0x19a)]=_0x1f842a,this[_0x2d04d0(0x1c4)]=_0xb69491;}async[a148_0x583395(0x1ad)](_0xa63d1c,_0x306c7e=![]){const _0x327f0a=a148_0x583395,_0x33285f=await zip_1[_0x327f0a(0x188)][_0x327f0a(0x1bd)](_0xa63d1c),_0x1c6ccd=[];for(const _0x27af32 of Object[_0x327f0a(0x18f)](_0x33285f['files'])){!_0x33285f[_0x327f0a(0x1b5)][_0x27af32][_0x327f0a(0x194)]&&_0x1c6ccd['push']({'filename':_0x27af32,'body':await _0x33285f['files'][_0x27af32][_0x327f0a(0x1c2)](_0x306c7e?'nodebuffer':_0x327f0a(0x1bb))});}return _0x1c6ccd;}async[a148_0x583395(0x18d)](_0x1d3e58){const _0x38a506=a148_0x583395;try{const _0x4e3ecb=await this[_0x38a506(0x1ad)](_0x1d3e58['body'],!![]);await Promise[_0x38a506(0x1be)](_0x4e3ecb[_0x38a506(0x1b7)](({filename:_0x2eff2f,body:_0x5a99fc})=>fs_internal_1['FS'][_0x38a506(0x18a)](path_1[_0x38a506(0x1a0)][_0x38a506(0x1af)](this['sourceDir'],_0x2eff2f),_0x5a99fc)));}catch(_0x3d852d){throw new Error(_0x38a506(0x196)+_0x1d3e58[_0x38a506(0x1ba)]+'\x20['+_0x1d3e58['fileType']+_0x38a506(0x19b)+_0x3d852d);}}['handleXmlParsingError'](_0x2ecde6,_0x5482d5){const _0x212414=a148_0x583395;throw new invalid_xml_error_1[(_0x212414(0x19f))](_0x212414(0x1bf)+_0x5482d5['fileName']+'\x20['+_0x5482d5[_0x212414(0x197)]+'].\x20Original\x20error:\x20'+_0x2ecde6);}async[a148_0x583395(0x18b)](_0x3b3024){const _0x44c699=a148_0x583395,{filename:_0x1a95bf,body:_0x326cf7}=(await this[_0x44c699(0x1ad)](_0x3b3024['body']))[0x0];try{if(!this['parentComponents'][_0x1a95bf]){const _0x2f1494=path_1[_0x44c699(0x1a0)]['join'](this['sourceDir'],_0x1a95bf);if(await fs_internal_1['FS'][_0x44c699(0x1b4)](_0x2f1494)){const _0x3508cf=await fs_internal_1['FS'][_0x44c699(0x199)](_0x2f1494);this[_0x44c699(0x1c0)][_0x1a95bf]=await xml_v2_1['XmlV2'][_0x44c699(0x1b9)](_0x3508cf)[_0x44c699(0x1c3)](_0xe3470d=>this[_0x44c699(0x193)](_0xe3470d,_0x3b3024));}else{this[_0x44c699(0x1c0)][_0x1a95bf]=await xml_v2_1[_0x44c699(0x19c)]['parse'](_0x326cf7)[_0x44c699(0x1c3)](_0x52c588=>this[_0x44c699(0x193)](_0x52c588,_0x3b3024));return;}}const _0x2e52ce=this['parentComponents'][_0x1a95bf],_0x44ec17=await xml_v2_1[_0x44c699(0x19c)][_0x44c699(0x1b9)](_0x326cf7)[_0x44c699(0x1c3)](_0x14537b=>this[_0x44c699(0x193)](_0x14537b,_0x3b3024));xml_v2_1[_0x44c699(0x19c)][_0x44c699(0x1b8)](_0x2e52ce,_0x44ec17);}catch(_0x210df4){if(_0x210df4 instanceof invalid_xml_error_1[_0x44c699(0x19f)]){if(this[_0x44c699(0x1c4)])return;else throw _0x210df4;}throw new Error(_0x44c699(0x1a2)+_0x3b3024[_0x44c699(0x1ba)]+'\x20['+_0x3b3024['fileType']+'].\x20Original\x20error:\x20'+_0x210df4);}}async[a148_0x583395(0x1a7)](){const _0x4caaab=a148_0x583395;!await fs_internal_1['FS'][_0x4caaab(0x1b4)](this[_0x4caaab(0x19a)])&&await fs_internal_1['FS'][_0x4caaab(0x190)](this[_0x4caaab(0x19a)]);for(const _0x4b7d2a of this[_0x4caaab(0x1ac)]){!child_types_1['default']['includes'](_0x4b7d2a[_0x4caaab(0x197)])?await this[_0x4caaab(0x18d)](_0x4b7d2a):await this['writeChild'](_0x4b7d2a);}const _0x2222e2=Object[_0x4caaab(0x18f)](this[_0x4caaab(0x1c0)]);this[_0x4caaab(0x1b1)]['log']('have\x20to\x20write\x20%d\x20files',this['components'][_0x4caaab(0x19e)]);while(_0x2222e2['length']){const _0x5777fc=_0x2222e2[_0x4caaab(0x1aa)](0x0,this[_0x4caaab(0x1a8)]);for(const _0x588b88 of _0x5777fc){await fs_internal_1['FS'][_0x4caaab(0x18a)](path_1[_0x4caaab(0x1a0)][_0x4caaab(0x1af)](this[_0x4caaab(0x19a)],_0x588b88),xml_v2_1[_0x4caaab(0x19c)][_0x4caaab(0x1b3)](this['parentComponents'][_0x588b88]));}}this['parentComponents']={};}}exports[a148_0x583395(0x195)]=MDApiWriter;