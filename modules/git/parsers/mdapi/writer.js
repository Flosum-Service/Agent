const a148_0x3a867b=a148_0x550f;function a148_0x3d05(){const _0x27ae34=['MAX_WRITES_PER_TICK','name','406yBbvsL','XmlV2','parse','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','async','3138EjLIeA','InvalidXmlError','110008bFwqHd','__esModule','].\x20Original\x20error:\x20','parentComponents','convertToString','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','88WsuMNX','log','../../../../core','body','../../internal/fs.internal','1115XDEelN','length','../utils/zip','250230qoHqhz','MDApiWriter','push','join','Logger','fileType','catch','(((.+)+)+)+$','sourceDir','5004Jncbmg','nodebuffer','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','keys','files','makeDir','internalLogger','readZip','toString','all','dir','components','readFile','1707Xyrtwi','includes','45TlCASq','path','__importDefault','default','replaceOrAppend','have\x20to\x20write\x20%d\x20files','text','splice','writeChild','../utils/xml-v2','apply','search','skipChildErrors','writeParent','fileName','writeFile','handleXmlParsingError','map','unzip','58200GJGRth','608814OwdmFY','1110808hlRgmT','constructor','exists'];a148_0x3d05=function(){return _0x27ae34;};return a148_0x3d05();}(function(_0x2dd1fe,_0x28bca9){const _0x4bf4e2=a148_0x550f,_0x409d1f=_0x2dd1fe();while(!![]){try{const _0x4cf49c=parseInt(_0x4bf4e2(0x1f5))/0x1+-parseInt(_0x4bf4e2(0x1f4))/0x2+-parseInt(_0x4bf4e2(0x225))/0x3*(-parseInt(_0x4bf4e2(0x218))/0x4)+-parseInt(_0x4bf4e2(0x20c))/0x5*(parseInt(_0x4bf4e2(0x1ff))/0x6)+parseInt(_0x4bf4e2(0x1fa))/0x7*(-parseInt(_0x4bf4e2(0x201))/0x8)+-parseInt(_0x4bf4e2(0x227))/0x9*(-parseInt(_0x4bf4e2(0x20f))/0xa)+parseInt(_0x4bf4e2(0x207))/0xb*(-parseInt(_0x4bf4e2(0x1f3))/0xc);if(_0x4cf49c===_0x28bca9)break;else _0x409d1f['push'](_0x409d1f['shift']());}catch(_0x71949e){_0x409d1f['push'](_0x409d1f['shift']());}}}(a148_0x3d05,0xa88ac));const a148_0x1e61bf=(function(){let _0x2a7fa3=!![];return function(_0x43fd1d,_0x2007f9){const _0x44906f=_0x2a7fa3?function(){const _0x23121d=a148_0x550f;if(_0x2007f9){const _0x333f02=_0x2007f9[_0x23121d(0x231)](_0x43fd1d,arguments);return _0x2007f9=null,_0x333f02;}}:function(){};return _0x2a7fa3=![],_0x44906f;};}()),a148_0x1b0fff=a148_0x1e61bf(this,function(){const _0x458072=a148_0x550f;return a148_0x1b0fff['toString']()[_0x458072(0x232)](_0x458072(0x216))[_0x458072(0x220)]()[_0x458072(0x1f6)](a148_0x1b0fff)['search']('(((.+)+)+)+$');});a148_0x1b0fff();'use strict';function a148_0x550f(_0x28b13d,_0x133e20){const _0x52bcc9=a148_0x3d05();return a148_0x550f=function(_0x1b0fff,_0x1e61bf){_0x1b0fff=_0x1b0fff-0x1f0;let _0x3d0509=_0x52bcc9[_0x1b0fff];return _0x3d0509;},a148_0x550f(_0x28b13d,_0x133e20);}var __importDefault=this&&this[a148_0x3a867b(0x229)]||function(_0x31b27a){const _0x1e4c4d=a148_0x3a867b;return _0x31b27a&&_0x31b27a[_0x1e4c4d(0x202)]?_0x31b27a:{'default':_0x31b27a};};Object['defineProperty'](exports,a148_0x3a867b(0x202),{'value':!![]}),exports[a148_0x3a867b(0x210)]=void 0x0;const path_1=__importDefault(require(a148_0x3a867b(0x228))),core_1=require(a148_0x3a867b(0x209)),fs_internal_1=require(a148_0x3a867b(0x20b)),invalid_xml_error_1=require('../errors/invalid-xml.error'),xml_v2_1=require(a148_0x3a867b(0x230)),zip_1=require(a148_0x3a867b(0x20e)),child_types_1=__importDefault(require('../data/child-types'));class MDApiWriter{constructor({components:_0x23a8e1,sourceDir:_0x2e8ac7,skipChildErrors:_0x1a0610}){const _0x5cbfbc=a148_0x3a867b;this[_0x5cbfbc(0x1f8)]=0x64,this[_0x5cbfbc(0x204)]={},this[_0x5cbfbc(0x21e)]=new core_1[(_0x5cbfbc(0x213))](MDApiWriter[_0x5cbfbc(0x1f9)]),this['components']=_0x23a8e1,this['sourceDir']=_0x2e8ac7,this[_0x5cbfbc(0x233)]=_0x1a0610;}async['readZip'](_0x470a3e,_0x1b9cf1=![]){const _0x31d957=a148_0x3a867b,_0x3dbf14=await zip_1['Zip'][_0x31d957(0x1f2)](_0x470a3e),_0x59d2f5=[];for(const _0x43b496 of Object['keys'](_0x3dbf14[_0x31d957(0x21c)])){!_0x3dbf14['files'][_0x43b496][_0x31d957(0x222)]&&_0x59d2f5[_0x31d957(0x211)]({'filename':_0x43b496,'body':await _0x3dbf14['files'][_0x43b496][_0x31d957(0x1fe)](_0x1b9cf1?_0x31d957(0x219):_0x31d957(0x22d))});}return _0x59d2f5;}async['writeParent'](_0x516a84){const _0x4b7dab=a148_0x3a867b;try{const _0x10958e=await this[_0x4b7dab(0x21f)](_0x516a84[_0x4b7dab(0x20a)],!![]);await Promise[_0x4b7dab(0x221)](_0x10958e[_0x4b7dab(0x1f1)](({filename:_0x8af44c,body:_0x2ebc49})=>fs_internal_1['FS'][_0x4b7dab(0x236)](path_1[_0x4b7dab(0x22a)][_0x4b7dab(0x212)](this[_0x4b7dab(0x217)],_0x8af44c),_0x2ebc49)));}catch(_0x21142c){throw new Error(_0x4b7dab(0x1fd)+_0x516a84[_0x4b7dab(0x235)]+'\x20['+_0x516a84['fileType']+_0x4b7dab(0x203)+_0x21142c);}}[a148_0x3a867b(0x1f0)](_0x3f9fc3,_0xba449b){const _0x189ba7=a148_0x3a867b;throw new invalid_xml_error_1['InvalidXmlError'](_0x189ba7(0x206)+_0xba449b[_0x189ba7(0x235)]+'\x20['+_0xba449b['fileType']+_0x189ba7(0x203)+_0x3f9fc3);}async[a148_0x3a867b(0x22f)](_0x44db8b){const _0x18c086=a148_0x3a867b,{filename:_0x54198e,body:_0x1fff7d}=(await this['readZip'](_0x44db8b[_0x18c086(0x20a)]))[0x0];try{if(!this[_0x18c086(0x204)][_0x54198e]){const _0x41c170=path_1[_0x18c086(0x22a)]['join'](this[_0x18c086(0x217)],_0x54198e);if(await fs_internal_1['FS'][_0x18c086(0x1f7)](_0x41c170)){const _0x2a902c=await fs_internal_1['FS'][_0x18c086(0x224)](_0x41c170);this[_0x18c086(0x204)][_0x54198e]=await xml_v2_1[_0x18c086(0x1fb)][_0x18c086(0x1fc)](_0x2a902c)['catch'](_0x5957ff=>this['handleXmlParsingError'](_0x5957ff,_0x44db8b));}else{this['parentComponents'][_0x54198e]=await xml_v2_1[_0x18c086(0x1fb)][_0x18c086(0x1fc)](_0x1fff7d)[_0x18c086(0x215)](_0x4a3212=>this['handleXmlParsingError'](_0x4a3212,_0x44db8b));return;}}const _0x40aa3f=this[_0x18c086(0x204)][_0x54198e],_0x549568=await xml_v2_1[_0x18c086(0x1fb)][_0x18c086(0x1fc)](_0x1fff7d)['catch'](_0x3d5b4e=>this[_0x18c086(0x1f0)](_0x3d5b4e,_0x44db8b));xml_v2_1[_0x18c086(0x1fb)][_0x18c086(0x22b)](_0x40aa3f,_0x549568);}catch(_0x3f6c83){if(_0x3f6c83 instanceof invalid_xml_error_1[_0x18c086(0x200)]){if(this[_0x18c086(0x233)])return;else throw _0x3f6c83;}throw new Error(_0x18c086(0x21a)+_0x44db8b[_0x18c086(0x235)]+'\x20['+_0x44db8b['fileType']+'].\x20Original\x20error:\x20'+_0x3f6c83);}}async['start'](){const _0x33ad13=a148_0x3a867b;!await fs_internal_1['FS']['exists'](this[_0x33ad13(0x217)])&&await fs_internal_1['FS'][_0x33ad13(0x21d)](this['sourceDir']);for(const _0xa4a143 of this[_0x33ad13(0x223)]){!child_types_1[_0x33ad13(0x22a)][_0x33ad13(0x226)](_0xa4a143[_0x33ad13(0x214)])?await this[_0x33ad13(0x234)](_0xa4a143):await this[_0x33ad13(0x22f)](_0xa4a143);}const _0x425090=Object[_0x33ad13(0x21b)](this[_0x33ad13(0x204)]);this[_0x33ad13(0x21e)][_0x33ad13(0x208)](_0x33ad13(0x22c),this[_0x33ad13(0x223)]['length']);while(_0x425090[_0x33ad13(0x20d)]){const _0x1897b6=_0x425090[_0x33ad13(0x22e)](0x0,this[_0x33ad13(0x1f8)]);for(const _0x1ef8ea of _0x1897b6){await fs_internal_1['FS'][_0x33ad13(0x236)](path_1[_0x33ad13(0x22a)]['join'](this[_0x33ad13(0x217)],_0x1ef8ea),xml_v2_1['XmlV2'][_0x33ad13(0x205)](this[_0x33ad13(0x204)][_0x1ef8ea]));}}this[_0x33ad13(0x204)]={};}}exports[a148_0x3a867b(0x210)]=MDApiWriter;