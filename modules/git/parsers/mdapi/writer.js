const a148_0x5e807b=a148_0x3fbc;(function(_0x475543,_0x5bbe00){const _0x571869=a148_0x3fbc,_0xd45ebb=_0x475543();while(!![]){try{const _0x597b0d=parseInt(_0x571869(0x185))/0x1*(parseInt(_0x571869(0x1ad))/0x2)+parseInt(_0x571869(0x17a))/0x3+-parseInt(_0x571869(0x184))/0x4*(parseInt(_0x571869(0x1b0))/0x5)+parseInt(_0x571869(0x19b))/0x6*(parseInt(_0x571869(0x198))/0x7)+-parseInt(_0x571869(0x188))/0x8+-parseInt(_0x571869(0x182))/0x9*(parseInt(_0x571869(0x193))/0xa)+parseInt(_0x571869(0x18c))/0xb;if(_0x597b0d===_0x5bbe00)break;else _0xd45ebb['push'](_0xd45ebb['shift']());}catch(_0x40f326){_0xd45ebb['push'](_0xd45ebb['shift']());}}}(a148_0x3155,0x826f7));const a148_0x147dcd=(function(){let _0x563e52=!![];return function(_0x55ae40,_0x1a02aa){const _0x2450cf=_0x563e52?function(){const _0x5eed58=a148_0x3fbc;if(_0x1a02aa){const _0x444768=_0x1a02aa[_0x5eed58(0x1af)](_0x55ae40,arguments);return _0x1a02aa=null,_0x444768;}}:function(){};return _0x563e52=![],_0x2450cf;};}()),a148_0x4c187d=a148_0x147dcd(this,function(){const _0x423a1f=a148_0x3fbc;return a148_0x4c187d[_0x423a1f(0x179)]()[_0x423a1f(0x1a3)](_0x423a1f(0x181))['toString']()[_0x423a1f(0x178)](a148_0x4c187d)['search'](_0x423a1f(0x181));});function a148_0x3fbc(_0x1ffcb8,_0x4347ac){const _0x2dd5a6=a148_0x3155();return a148_0x3fbc=function(_0x4c187d,_0x147dcd){_0x4c187d=_0x4c187d-0x174;let _0x31559e=_0x2dd5a6[_0x4c187d];return _0x31559e;},a148_0x3fbc(_0x1ffcb8,_0x4347ac);}a148_0x4c187d();'use strict';var __importDefault=this&&this[a148_0x5e807b(0x177)]||function(_0xefce45){return _0xefce45&&_0xefce45['__esModule']?_0xefce45:{'default':_0xefce45};};Object[a148_0x5e807b(0x174)](exports,'__esModule',{'value':!![]}),exports[a148_0x5e807b(0x19e)]=void 0x0;const path_1=__importDefault(require('path')),core_1=require(a148_0x5e807b(0x175)),fs_internal_1=require(a148_0x5e807b(0x187)),invalid_xml_error_1=require(a148_0x5e807b(0x1a9)),xml_v2_1=require(a148_0x5e807b(0x199)),zip_1=require(a148_0x5e807b(0x19f)),child_types_1=__importDefault(require('../data/child-types'));function a148_0x3155(){const _0x382a8b=['have\x20to\x20write\x20%d\x20files','MAX_WRITES_PER_TICK','4kqtZhW','InvalidXmlError','apply','69310HyZkbw','defineProperty','../../../../core','push','__importDefault','constructor','toString','345855qnKyHW','async','fileName','components','[WriteParent]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','exists','readZip','(((.+)+)+)+$','9fRBSfA','parse','48QhVyIX','405598EOpRNF','internalLogger','../../internal/fs.internal','8477608qjanyO','dir','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','splice','7060053BcWOvi','skipChildErrors','handleXmlParsingError','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','sourceDir','writeParent','catch','3791470PIfiML','join','files','default','nodebuffer','3998057PWkAcB','../utils/xml-v2','writeChild','6WBZpRF','name','body','MDApiWriter','../utils/zip','makeDir','].\x20Original\x20error:\x20','length','search','XmlV2','writeFile','parentComponents','convertToString','fileType','../errors/invalid-xml.error','keys'];a148_0x3155=function(){return _0x382a8b;};return a148_0x3155();}class MDApiWriter{constructor({components:_0x44e021,sourceDir:_0x523cdb,skipChildErrors:_0x1c583b}){const _0x48f2a8=a148_0x5e807b;this[_0x48f2a8(0x1ac)]=0x64,this[_0x48f2a8(0x1a6)]={},this[_0x48f2a8(0x186)]=new core_1['Logger'](MDApiWriter[_0x48f2a8(0x19c)]),this[_0x48f2a8(0x17d)]=_0x44e021,this[_0x48f2a8(0x190)]=_0x523cdb,this[_0x48f2a8(0x18d)]=_0x1c583b;}async['readZip'](_0x5dda12,_0x490fd7=![]){const _0x3544b7=a148_0x5e807b,_0x2feaf2=await zip_1['Zip']['unzip'](_0x5dda12),_0x51e2d2=[];for(const _0x1eb431 of Object[_0x3544b7(0x1aa)](_0x2feaf2['files'])){!_0x2feaf2[_0x3544b7(0x195)][_0x1eb431][_0x3544b7(0x189)]&&_0x51e2d2[_0x3544b7(0x176)]({'filename':_0x1eb431,'body':await _0x2feaf2[_0x3544b7(0x195)][_0x1eb431][_0x3544b7(0x17b)](_0x490fd7?_0x3544b7(0x197):'text')});}return _0x51e2d2;}async['writeParent'](_0x2adb60){const _0x5272f8=a148_0x5e807b;try{const _0x556ef4=await this[_0x5272f8(0x180)](_0x2adb60[_0x5272f8(0x19d)],!![]);await Promise['all'](_0x556ef4['map'](({filename:_0x4510a8,body:_0x1f8ca1})=>fs_internal_1['FS'][_0x5272f8(0x1a5)](path_1[_0x5272f8(0x196)][_0x5272f8(0x194)](this[_0x5272f8(0x190)],_0x4510a8),_0x1f8ca1)));}catch(_0x240ceb){throw new Error(_0x5272f8(0x17e)+_0x2adb60[_0x5272f8(0x17c)]+'\x20['+_0x2adb60[_0x5272f8(0x1a8)]+_0x5272f8(0x1a1)+_0x240ceb);}}[a148_0x5e807b(0x18e)](_0x5ecc8c,_0x1e26ea){const _0x3fd3c2=a148_0x5e807b;throw new invalid_xml_error_1[(_0x3fd3c2(0x1ae))](_0x3fd3c2(0x18a)+_0x1e26ea[_0x3fd3c2(0x17c)]+'\x20['+_0x1e26ea[_0x3fd3c2(0x1a8)]+'].\x20Original\x20error:\x20'+_0x5ecc8c);}async[a148_0x5e807b(0x19a)](_0xd151c1){const _0x177eba=a148_0x5e807b,{filename:_0x14cd3b,body:_0x4d158f}=(await this[_0x177eba(0x180)](_0xd151c1[_0x177eba(0x19d)]))[0x0];try{if(!this[_0x177eba(0x1a6)][_0x14cd3b]){const _0x55f60a=path_1['default'][_0x177eba(0x194)](this[_0x177eba(0x190)],_0x14cd3b);if(await fs_internal_1['FS'][_0x177eba(0x17f)](_0x55f60a)){const _0x3fbf9a=await fs_internal_1['FS']['readFile'](_0x55f60a);this[_0x177eba(0x1a6)][_0x14cd3b]=await xml_v2_1['XmlV2'][_0x177eba(0x183)](_0x3fbf9a)[_0x177eba(0x192)](_0x3ce53f=>this['handleXmlParsingError'](_0x3ce53f,_0xd151c1));}else{this['parentComponents'][_0x14cd3b]=await xml_v2_1['XmlV2'][_0x177eba(0x183)](_0x4d158f)['catch'](_0x16453c=>this[_0x177eba(0x18e)](_0x16453c,_0xd151c1));return;}}const _0x4bb617=this[_0x177eba(0x1a6)][_0x14cd3b],_0x121a99=await xml_v2_1['XmlV2'][_0x177eba(0x183)](_0x4d158f)['catch'](_0x3ebba4=>this[_0x177eba(0x18e)](_0x3ebba4,_0xd151c1));xml_v2_1[_0x177eba(0x1a4)]['replaceOrAppend'](_0x4bb617,_0x121a99);}catch(_0x41c41d){if(_0x41c41d instanceof invalid_xml_error_1[_0x177eba(0x1ae)]){if(this['skipChildErrors'])return;else throw _0x41c41d;}throw new Error(_0x177eba(0x18f)+_0xd151c1[_0x177eba(0x17c)]+'\x20['+_0xd151c1[_0x177eba(0x1a8)]+_0x177eba(0x1a1)+_0x41c41d);}}async['start'](){const _0x5fcf70=a148_0x5e807b;!await fs_internal_1['FS'][_0x5fcf70(0x17f)](this[_0x5fcf70(0x190)])&&await fs_internal_1['FS'][_0x5fcf70(0x1a0)](this[_0x5fcf70(0x190)]);for(const _0x20eebc of this[_0x5fcf70(0x17d)]){!child_types_1['default']['includes'](_0x20eebc[_0x5fcf70(0x1a8)])?await this[_0x5fcf70(0x191)](_0x20eebc):await this[_0x5fcf70(0x19a)](_0x20eebc);}const _0x43c330=Object['keys'](this[_0x5fcf70(0x1a6)]);this['internalLogger']['log'](_0x5fcf70(0x1ab),this[_0x5fcf70(0x17d)][_0x5fcf70(0x1a2)]);while(_0x43c330[_0x5fcf70(0x1a2)]){const _0x44048c=_0x43c330[_0x5fcf70(0x18b)](0x0,this[_0x5fcf70(0x1ac)]);for(const _0x28f882 of _0x44048c){await fs_internal_1['FS'][_0x5fcf70(0x1a5)](path_1[_0x5fcf70(0x196)][_0x5fcf70(0x194)](this[_0x5fcf70(0x190)],_0x28f882),xml_v2_1[_0x5fcf70(0x1a4)][_0x5fcf70(0x1a7)](this[_0x5fcf70(0x1a6)][_0x28f882]));}}this['parentComponents']={};}}exports[a148_0x5e807b(0x19e)]=MDApiWriter;