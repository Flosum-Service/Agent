const a172_0x117672=a172_0x2bfc;(function(_0x104ec0,_0x4330c5){const _0x57f5a1=a172_0x2bfc,_0x495244=_0x104ec0();while(!![]){try{const _0x17471f=parseInt(_0x57f5a1(0x1f4))/0x1*(parseInt(_0x57f5a1(0x1f5))/0x2)+parseInt(_0x57f5a1(0x1d0))/0x3*(-parseInt(_0x57f5a1(0x1f9))/0x4)+parseInt(_0x57f5a1(0x213))/0x5*(-parseInt(_0x57f5a1(0x1d7))/0x6)+parseInt(_0x57f5a1(0x1cd))/0x7+parseInt(_0x57f5a1(0x1e5))/0x8+parseInt(_0x57f5a1(0x1df))/0x9+-parseInt(_0x57f5a1(0x1cc))/0xa;if(_0x17471f===_0x4330c5)break;else _0x495244['push'](_0x495244['shift']());}catch(_0x3f9c13){_0x495244['push'](_0x495244['shift']());}}}(a172_0x1b39,0x28478));const a172_0x35e438=(function(){let _0x4f5e34=!![];return function(_0x28ab61,_0x4a9aad){const _0x48e359=_0x4f5e34?function(){const _0x2d58ca=a172_0x2bfc;if(_0x4a9aad){const _0x2da1a7=_0x4a9aad[_0x2d58ca(0x1f6)](_0x28ab61,arguments);return _0x4a9aad=null,_0x2da1a7;}}:function(){};return _0x4f5e34=![],_0x48e359;};}()),a172_0x5d4402=a172_0x35e438(this,function(){const _0x36f564=a172_0x2bfc;return a172_0x5d4402[_0x36f564(0x1e1)]()[_0x36f564(0x20d)](_0x36f564(0x1dd))[_0x36f564(0x1e1)]()[_0x36f564(0x1e3)](a172_0x5d4402)[_0x36f564(0x20d)](_0x36f564(0x1dd));});a172_0x5d4402();'use strict';var __importDefault=this&&this[a172_0x117672(0x1e0)]||function(_0x124436){const _0x311786=a172_0x117672;return _0x124436&&_0x124436[_0x311786(0x1e4)]?_0x124436:{'default':_0x124436};};function a172_0x1b39(){const _0x3631ec=['apply','parse','META_EXTENSION','8YoECtA','Xml','test','filePath','readFile','init','values','paths','find','map','waveTemplates','reduce','CustomLabels','readComponentFiles','./data/settings-types-list','relative','META_EXPERIENCES_EXTENSION','convertToCleanPaths','catch','extractFileNameFromFiles','search','createChildComponentsFromParent','error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','endsWith','isSFDXProject','logger','78030AybetW','includes','split','isDir','error','hasChildNodes','Logger','type','5992670EXWCtD','1396157PoUgsO','dir','isPathsEquals','57987OMgmnt','./utils/crc32','BUNDLED_FOLDERS_REGEXP','readChildComponents','files','../devops/utils/git-commit.utils','MDApiParser','48DufTmj','crc','utf-8','default','join','defineProperty','(((.+)+)+)+$','isParentComponent','2084913IUHkra','__importDefault','toString','extractComponentTypeFromFiles','constructor','__esModule','1352368LEqSfX','calculateCRC32','readDir','push','./utils/xml','readBundledFiles','experiences','\x22\x20not\x20found\x20in\x20\x22','name','exists','./data/child-types-map','../../../constants','.site-meta.xml','filter','startsWith','1buHurr','655206ofjMhc'];a172_0x1b39=function(){return _0x3631ec;};return a172_0x1b39();}Object[a172_0x117672(0x1dc)](exports,a172_0x117672(0x1e4),{'value':!![]}),exports['MDApiParser']=void 0x0;const fs_internal_1=require('../internal/fs.internal'),utils_1=require('./utils'),path_1=require('path'),xml_1=require(a172_0x117672(0x1e9)),child_types_map_1=__importDefault(require(a172_0x117672(0x1ef))),constants_1=require(a172_0x117672(0x1f0)),core_1=require('../../../core'),git_commit_utils_1=require(a172_0x117672(0x1d5)),crc32_1=require(a172_0x117672(0x1d1)),folder_types_1=__importDefault(require('./data/folder-types')),settings_types_list_1=__importDefault(require(a172_0x117672(0x207))),CHILD_XML_KEYS=Object[a172_0x117672(0x1ff)](child_types_map_1[a172_0x117672(0x1da)]);function a172_0x2bfc(_0x579e76,_0x34ec3e){const _0x4a16db=a172_0x1b39();return a172_0x2bfc=function(_0x5d4402,_0x35e438){_0x5d4402=_0x5d4402-0x1c9;let _0x1b39d0=_0x4a16db[_0x5d4402];return _0x1b39d0;},a172_0x2bfc(_0x579e76,_0x34ec3e);}class MDApiParser{constructor(_0x3c23e7,_0x465148,_0x7159cf){const _0x259020=a172_0x117672;this[_0x259020(0x1ce)]=_0x3c23e7,this[_0x259020(0x211)]=_0x7159cf,this[_0x259020(0x212)]=new core_1[(_0x259020(0x1ca))](MDApiParser[_0x259020(0x1ed)]),this[_0x259020(0x1f8)]='-meta.xml',this[_0x259020(0x209)]=_0x259020(0x1f1),this['paths']=_0x465148;}async[a172_0x117672(0x1d3)](_0x52e6cf){const _0x4d1a65=a172_0x117672;try{const _0x3a6c88=await xml_1[_0x4d1a65(0x1fa)][_0x4d1a65(0x1f7)](Object[_0x4d1a65(0x1ff)](_0x52e6cf[_0x4d1a65(0x1d4)])[0x0]['toString'](_0x4d1a65(0x1d9))),_0x1d8531=CHILD_XML_KEYS[_0x4d1a65(0x1f2)](_0x5a8235=>xml_1[_0x4d1a65(0x1fa)][_0x4d1a65(0x1c9)](_0x3a6c88,_0x5a8235))[_0x4d1a65(0x204)]((_0x88a78d,_0x2494dd)=>[..._0x88a78d,...xml_1[_0x4d1a65(0x1fa)]['getChildsByName'](_0x3a6c88,_0x2494dd)],[]);return(0x0,utils_1[_0x4d1a65(0x20e)])(_0x52e6cf,_0x3a6c88,_0x1d8531);}catch(_0x38ccbd){throw new Error('Cannot\x20parse\x20childs\x20in\x20'+_0x52e6cf[_0x4d1a65(0x1ed)]+'\x20['+_0x52e6cf[_0x4d1a65(0x1cb)]+']');}}async[a172_0x117672(0x1ea)](_0x44aa75){const _0x1caf95=a172_0x117672,_0x5369c1=(0x0,path_1[_0x1caf95(0x1db)])(this[_0x1caf95(0x1ce)],_0x44aa75),_0x3bce60=_0x44aa75+(_0x44aa75[_0x1caf95(0x1f3)](_0x1caf95(0x1eb))?this[_0x1caf95(0x209)]:this['META_EXTENSION']),_0x32402c=await fs_internal_1['FS'][_0x1caf95(0x1e7)](_0x5369c1,!![]),_0xc824c7=await fs_internal_1['FS']['readFile']((0x0,path_1[_0x1caf95(0x1db)])(this[_0x1caf95(0x1ce)],_0x3bce60),!![])[_0x1caf95(0x20b)](()=>null),_0x4c8ee4={};for(const _0x34c324 of _0x32402c){_0x4c8ee4[(0x0,path_1[_0x1caf95(0x208)])(this[_0x1caf95(0x1ce)],_0x34c324)]=await fs_internal_1['FS'][_0x1caf95(0x1fd)](_0x34c324,!![]);}return _0xc824c7&&(_0x4c8ee4[(0x0,path_1['relative'])(this['dir'],_0x3bce60)]=_0xc824c7),_0x4c8ee4;}async[a172_0x117672(0x206)](_0x4f4233){const _0x4ad0e0=a172_0x117672;let _0x2ac3dd=_0x4f4233+this[_0x4ad0e0(0x1f8)];if(constants_1[_0x4ad0e0(0x1d2)][_0x4ad0e0(0x1fb)](_0x4f4233))return this['readBundledFiles'](_0x4f4233);if(await fs_internal_1['FS']['isDir']((0x0,path_1['join'])(this['dir'],_0x4f4233))||await fs_internal_1['FS'][_0x4ad0e0(0x1ee)]((0x0,path_1[_0x4ad0e0(0x1db)])(this[_0x4ad0e0(0x1ce)],_0x2ac3dd))){const _0x5c33ac=await fs_internal_1['FS'][_0x4ad0e0(0x1fd)]((0x0,path_1[_0x4ad0e0(0x1db)])(this[_0x4ad0e0(0x1ce)],_0x2ac3dd),!![]),_0x48f84c=await(0x0,utils_1[_0x4ad0e0(0x1e2)])({'files':{[_0x2ac3dd]:_0x5c33ac}})['catch'](()=>null);if(_0x48f84c&&folder_types_1['default'][_0x4ad0e0(0x214)](_0x48f84c))return{[_0x2ac3dd]:await fs_internal_1['FS'][_0x4ad0e0(0x1fd)]((0x0,path_1['join'])(this['dir'],_0x2ac3dd),!![])};}if(!(0x0,path_1['extname'])(_0x4f4233)&&this[_0x4ad0e0(0x211)]){const _0x5c8528=_0x4f4233[_0x4ad0e0(0x215)]('/')[0x0],_0x1e3cb0=(await fs_internal_1['FS'][_0x4ad0e0(0x1e7)]((0x0,path_1[_0x4ad0e0(0x1db)])(this['dir'],_0x5c8528)))[_0x4ad0e0(0x201)](_0x5434ea=>(0x0,git_commit_utils_1[_0x4ad0e0(0x1cf)])(_0x5434ea,(0x0,path_1['join'])(this[_0x4ad0e0(0x1ce)],_0x4f4233)));if(!_0x1e3cb0)throw new Error('Component\x20\x22'+_0x4f4233+_0x4ad0e0(0x1ec)+_0x5c8528+'\x22');_0x4f4233=(0x0,path_1[_0x4ad0e0(0x208)])(this[_0x4ad0e0(0x1ce)],_0x1e3cb0),_0x2ac3dd=_0x4f4233+this['META_EXTENSION'];}const [_0x28723a,_0x543424]=await Promise['all']([fs_internal_1['FS'][_0x4ad0e0(0x1fd)]((0x0,path_1[_0x4ad0e0(0x1db)])(this[_0x4ad0e0(0x1ce)],_0x4f4233),!![])[_0x4ad0e0(0x20b)](()=>null),fs_internal_1['FS']['readFile']((0x0,path_1[_0x4ad0e0(0x1db)])(this[_0x4ad0e0(0x1ce)],_0x2ac3dd),!![])[_0x4ad0e0(0x20b)](()=>null)]);return{..._0x28723a?{[_0x4f4233]:_0x28723a}:{},..._0x543424?{[_0x2ac3dd]:_0x543424}:{}};}async['init'](){const _0xb223ad=a172_0x117672,_0x197604=[...this[_0xb223ad(0x200)]];if(this[_0xb223ad(0x211)])for(const _0x51a67d of _0x197604){if(constants_1[_0xb223ad(0x1d2)][_0xb223ad(0x1fb)](_0x51a67d))continue;if(await fs_internal_1['FS'][_0xb223ad(0x216)]((0x0,path_1[_0xb223ad(0x1db)])(this[_0xb223ad(0x1ce)],_0x51a67d))){const _0xfb2329=await fs_internal_1['FS']['readDir']((0x0,path_1[_0xb223ad(0x1db)])(this[_0xb223ad(0x1ce)],_0x51a67d),!![]);_0x197604[_0xb223ad(0x1e8)](..._0xfb2329[_0xb223ad(0x202)](_0x3dc826=>(0x0,path_1[_0xb223ad(0x208)])(this[_0xb223ad(0x1ce)],_0x3dc826)));}}this[_0xb223ad(0x200)]=(0x0,utils_1[_0xb223ad(0x20a)])(_0x197604);}async[a172_0x117672(0x1f7)](){const _0x5d9921=a172_0x117672;await this[_0x5d9921(0x1fe)]();const _0x440304=[];for(const _0xaa0759 of this[_0x5d9921(0x200)]){if(_0xaa0759[_0x5d9921(0x210)]('package.xml'))continue;const _0x2c55b3={};try{_0x2c55b3[_0x5d9921(0x1d4)]=await this['readComponentFiles'](_0xaa0759),_0x2c55b3[_0x5d9921(0x1fc)]=constants_1['BUNDLED_FOLDERS_REGEXP']['test'](_0xaa0759)?_0xaa0759:(0x0,utils_1[_0x5d9921(0x20c)])({'files':_0x2c55b3[_0x5d9921(0x1d4)]}),_0xaa0759[_0x5d9921(0x1f3)](_0x5d9921(0x203))?_0x2c55b3[_0x5d9921(0x1cb)]='WaveTemplateBundle':_0x2c55b3[_0x5d9921(0x1cb)]=await(0x0,utils_1[_0x5d9921(0x1e2)])({'files':_0x2c55b3[_0x5d9921(0x1d4)]});}catch(_0x4eef1d){this['logger'][_0x5d9921(0x217)](_0x5d9921(0x20f),_0xaa0759,_0x4eef1d);continue;}_0x2c55b3[_0x5d9921(0x1ed)]=(0x0,utils_1['extractFilenameFromPath'])(_0xaa0759),_0x2c55b3[_0x5d9921(0x1d8)]=(0x0,crc32_1[_0x5d9921(0x1e6)])(_0x2c55b3);if((0x0,utils_1[_0x5d9921(0x1de)])(_0x2c55b3)){const _0x22881e=await this['readChildComponents'](_0x2c55b3);_0x440304['push'](..._0x22881e);}if(_0x2c55b3['type']===_0x5d9921(0x205))continue;settings_types_list_1[_0x5d9921(0x1da)][_0x5d9921(0x214)](_0x2c55b3['type'])&&(_0x2c55b3[_0x5d9921(0x1cb)]='Settings'),_0x440304['push'](_0x2c55b3);}return _0x440304;}}exports[a172_0x117672(0x1d6)]=MDApiParser;