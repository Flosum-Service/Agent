const a183_0x5589c7=a183_0x3799;(function(_0x191003,_0x4391d0){const _0x25bd30=a183_0x3799,_0x5736bc=_0x191003();while(!![]){try{const _0xe6a558=-parseInt(_0x25bd30(0x1e3))/0x1+parseInt(_0x25bd30(0x1d7))/0x2*(-parseInt(_0x25bd30(0x1e1))/0x3)+parseInt(_0x25bd30(0x1d4))/0x4*(-parseInt(_0x25bd30(0x1db))/0x5)+parseInt(_0x25bd30(0x1f8))/0x6+-parseInt(_0x25bd30(0x1fe))/0x7*(-parseInt(_0x25bd30(0x1fb))/0x8)+parseInt(_0x25bd30(0x1f6))/0x9+parseInt(_0x25bd30(0x209))/0xa;if(_0xe6a558===_0x4391d0)break;else _0x5736bc['push'](_0x5736bc['shift']());}catch(_0x4ea68c){_0x5736bc['push'](_0x5736bc['shift']());}}}(a183_0x37df,0x954f2));const a183_0x7610dc=(function(){let _0x288081=!![];return function(_0x1df695,_0x1c2033){const _0x1862b7=_0x288081?function(){const _0xf852a1=a183_0x3799;if(_0x1c2033){const _0x5bc460=_0x1c2033[_0xf852a1(0x1e2)](_0x1df695,arguments);return _0x1c2033=null,_0x5bc460;}}:function(){};return _0x288081=![],_0x1862b7;};}()),a183_0xe36810=a183_0x7610dc(this,function(){const _0x5b4a5d=a183_0x3799;return a183_0xe36810[_0x5b4a5d(0x217)]()[_0x5b4a5d(0x1d0)]('(((.+)+)+)+$')[_0x5b4a5d(0x217)]()[_0x5b4a5d(0x1eb)](a183_0xe36810)[_0x5b4a5d(0x1d0)](_0x5b4a5d(0x1ef));});a183_0xe36810();function a183_0x3799(_0x57b485,_0x1c606f){const _0x705083=a183_0x37df();return a183_0x3799=function(_0xe36810,_0x7610dc){_0xe36810=_0xe36810-0x1cf;let _0x37df6f=_0x705083[_0xe36810];return _0x37df6f;},a183_0x3799(_0x57b485,_0x1c606f);}'use strict';var __importDefault=this&&this[a183_0x5589c7(0x205)]||function(_0x28b756){const _0x2e06a0=a183_0x5589c7;return _0x28b756&&_0x28b756[_0x2e06a0(0x1e4)]?_0x28b756:{'default':_0x28b756};};Object['defineProperty'](exports,a183_0x5589c7(0x1e4),{'value':!![]}),exports['MDApiParser']=void 0x0;const fs_internal_1=require(a183_0x5589c7(0x216)),utils_1=require('./utils'),path_1=require(a183_0x5589c7(0x1d8)),xml_1=require('./utils/xml'),child_types_map_1=__importDefault(require('./data/child-types-map')),constants_1=require('../../../constants'),core_1=require(a183_0x5589c7(0x219)),git_commit_utils_1=require(a183_0x5589c7(0x212)),crc32_1=require(a183_0x5589c7(0x208)),folder_types_1=__importDefault(require('./data/folder-types')),settings_types_list_1=__importDefault(require(a183_0x5589c7(0x213))),CHILD_XML_KEYS=Object[a183_0x5589c7(0x203)](child_types_map_1[a183_0x5589c7(0x1fc)]);class MDApiParser{constructor(_0x54f319,_0x3180a1,_0x4e374b){const _0x1744d8=a183_0x5589c7;this[_0x1744d8(0x1ed)]=_0x54f319,this[_0x1744d8(0x1e0)]=_0x4e374b,this['logger']=new core_1[(_0x1744d8(0x215))](MDApiParser[_0x1744d8(0x211)]),this[_0x1744d8(0x1fd)]=_0x1744d8(0x218),this[_0x1744d8(0x20a)]='.site-meta.xml',this[_0x1744d8(0x1d2)]=_0x3180a1;}async[a183_0x5589c7(0x1f7)](_0x5b8fa9){const _0x581576=a183_0x5589c7;try{const _0x38917e=await xml_1[_0x581576(0x20c)]['parse'](Object['values'](_0x5b8fa9[_0x581576(0x1f1)])[0x0][_0x581576(0x217)](_0x581576(0x1f4))),_0x1bc7f5=CHILD_XML_KEYS[_0x581576(0x1e9)](_0xa0e6e1=>xml_1[_0x581576(0x20c)]['hasChildNodes'](_0x38917e,_0xa0e6e1))[_0x581576(0x1f0)]((_0x3fa073,_0x24a186)=>[..._0x3fa073,...xml_1[_0x581576(0x20c)][_0x581576(0x20e)](_0x38917e,_0x24a186)],[]);return(0x0,utils_1['createChildComponentsFromParent'])(_0x5b8fa9,_0x38917e,_0x1bc7f5);}catch(_0x2eb502){throw new Error(_0x581576(0x1ff)+_0x5b8fa9[_0x581576(0x211)]+'\x20['+_0x5b8fa9['type']+']');}}async[a183_0x5589c7(0x210)](_0xadb5e2){const _0x3bcba2=a183_0x5589c7,_0x168e57=(0x0,path_1[_0x3bcba2(0x1de)])(this[_0x3bcba2(0x1ed)],_0xadb5e2),_0x3d5ae2=_0xadb5e2+(_0xadb5e2[_0x3bcba2(0x214)]('experiences')?this[_0x3bcba2(0x20a)]:this[_0x3bcba2(0x1fd)]),_0x187de9=await fs_internal_1['FS'][_0x3bcba2(0x200)](_0x168e57,!![]),_0x5c5048=await fs_internal_1['FS'][_0x3bcba2(0x21a)]((0x0,path_1[_0x3bcba2(0x1de)])(this['dir'],_0x3d5ae2),!![])[_0x3bcba2(0x1ea)](()=>null),_0x2d9471={};for(const _0x40b687 of _0x187de9){_0x2d9471[(0x0,path_1[_0x3bcba2(0x1da)])(this[_0x3bcba2(0x1ed)],_0x40b687)]=await fs_internal_1['FS'][_0x3bcba2(0x21a)](_0x40b687,!![]);}return _0x5c5048&&(_0x2d9471[(0x0,path_1[_0x3bcba2(0x1da)])(this['dir'],_0x3d5ae2)]=_0x5c5048),_0x2d9471;}async[a183_0x5589c7(0x1d6)](_0x226ed8){const _0x1bc004=a183_0x5589c7;let _0x16d4b2=_0x226ed8+this[_0x1bc004(0x1fd)];if(constants_1[_0x1bc004(0x1ee)]['test'](_0x226ed8))return this[_0x1bc004(0x210)](_0x226ed8);if(await fs_internal_1['FS'][_0x1bc004(0x1f5)]((0x0,path_1[_0x1bc004(0x1de)])(this[_0x1bc004(0x1ed)],_0x226ed8))||await fs_internal_1['FS'][_0x1bc004(0x20d)]((0x0,path_1[_0x1bc004(0x1de)])(this[_0x1bc004(0x1ed)],_0x16d4b2))){const _0x369d5e=await fs_internal_1['FS'][_0x1bc004(0x21a)]((0x0,path_1[_0x1bc004(0x1de)])(this['dir'],_0x16d4b2),!![]),_0x10551d=await(0x0,utils_1[_0x1bc004(0x1d3)])({'files':{[_0x16d4b2]:_0x369d5e}})[_0x1bc004(0x1ea)](()=>null);if(_0x10551d&&folder_types_1[_0x1bc004(0x1fc)][_0x1bc004(0x1d5)](_0x10551d))return{[_0x16d4b2]:await fs_internal_1['FS'][_0x1bc004(0x21a)]((0x0,path_1[_0x1bc004(0x1de)])(this[_0x1bc004(0x1ed)],_0x16d4b2),!![])};}if(!(0x0,path_1[_0x1bc004(0x1ec)])(_0x226ed8)&&this[_0x1bc004(0x1e0)]){const _0x4dc486=_0x226ed8[_0x1bc004(0x1e5)]('/')[0x0],_0x55435a=(await fs_internal_1['FS']['readDir']((0x0,path_1['join'])(this[_0x1bc004(0x1ed)],_0x4dc486)))[_0x1bc004(0x1e6)](_0x1570a4=>(0x0,git_commit_utils_1[_0x1bc004(0x1f3)])(_0x1570a4,(0x0,path_1['join'])(this[_0x1bc004(0x1ed)],_0x226ed8)));if(!_0x55435a)throw new Error('Component\x20\x22'+_0x226ed8+_0x1bc004(0x1dc)+_0x4dc486+'\x22');_0x226ed8=(0x0,path_1[_0x1bc004(0x1da)])(this[_0x1bc004(0x1ed)],_0x55435a),_0x16d4b2=_0x226ed8+this['META_EXTENSION'];}const [_0x2e400f,_0x23f266]=await Promise[_0x1bc004(0x1dd)]([fs_internal_1['FS'][_0x1bc004(0x21a)]((0x0,path_1[_0x1bc004(0x1de)])(this['dir'],_0x226ed8),!![])['catch'](()=>null),fs_internal_1['FS']['readFile']((0x0,path_1[_0x1bc004(0x1de)])(this[_0x1bc004(0x1ed)],_0x16d4b2),!![])[_0x1bc004(0x1ea)](()=>null)]);return{..._0x2e400f?{[_0x226ed8]:_0x2e400f}:{},..._0x23f266?{[_0x16d4b2]:_0x23f266}:{}};}async[a183_0x5589c7(0x204)](){const _0x1ecf87=a183_0x5589c7,_0x3de064=[...this[_0x1ecf87(0x1d2)]];if(this['isSFDXProject'])for(const _0x2d7279 of _0x3de064){if(constants_1[_0x1ecf87(0x1ee)]['test'](_0x2d7279))continue;if(await fs_internal_1['FS'][_0x1ecf87(0x1f5)]((0x0,path_1['join'])(this[_0x1ecf87(0x1ed)],_0x2d7279))){const _0x1a9720=await fs_internal_1['FS'][_0x1ecf87(0x200)]((0x0,path_1[_0x1ecf87(0x1de)])(this['dir'],_0x2d7279),!![]);_0x3de064['push'](..._0x1a9720[_0x1ecf87(0x1f2)](_0x460ea2=>(0x0,path_1['relative'])(this[_0x1ecf87(0x1ed)],_0x460ea2)));}}this[_0x1ecf87(0x1d2)]=(0x0,utils_1[_0x1ecf87(0x1cf)])(_0x3de064);}async[a183_0x5589c7(0x201)](){const _0x2f0a7a=a183_0x5589c7;await this[_0x2f0a7a(0x204)]();const _0x816890=[];for(const _0x22fe28 of this[_0x2f0a7a(0x1d2)]){if(_0x22fe28[_0x2f0a7a(0x202)](_0x2f0a7a(0x1d1)))continue;const _0x31e1f6={};try{_0x31e1f6['files']=await this[_0x2f0a7a(0x1d6)](_0x22fe28),_0x31e1f6['filePath']=constants_1[_0x2f0a7a(0x1ee)]['test'](_0x22fe28)?_0x22fe28:(0x0,utils_1[_0x2f0a7a(0x1d9)])({'files':_0x31e1f6[_0x2f0a7a(0x1f1)]}),_0x22fe28[_0x2f0a7a(0x214)](_0x2f0a7a(0x20f))?_0x31e1f6['type']='WaveTemplateBundle':_0x31e1f6[_0x2f0a7a(0x207)]=await(0x0,utils_1[_0x2f0a7a(0x1d3)])({'files':_0x31e1f6[_0x2f0a7a(0x1f1)]});}catch(_0x496ea0){this['logger']['error'](_0x2f0a7a(0x1f9),_0x22fe28,_0x496ea0);continue;}_0x31e1f6['name']=(0x0,utils_1[_0x2f0a7a(0x206)])(_0x22fe28),_0x31e1f6[_0x2f0a7a(0x1fa)]=(0x0,crc32_1[_0x2f0a7a(0x20b)])(_0x31e1f6);if((0x0,utils_1['isParentComponent'])(_0x31e1f6)){const _0x1b5f09=await this[_0x2f0a7a(0x1f7)](_0x31e1f6);_0x816890[_0x2f0a7a(0x1df)](..._0x1b5f09);}if(_0x31e1f6[_0x2f0a7a(0x207)]===_0x2f0a7a(0x1e7))continue;settings_types_list_1[_0x2f0a7a(0x1fc)][_0x2f0a7a(0x1d5)](_0x31e1f6[_0x2f0a7a(0x207)])&&(_0x31e1f6[_0x2f0a7a(0x207)]='Settings'),_0x816890[_0x2f0a7a(0x1df)](_0x31e1f6);}return _0x816890;}}function a183_0x37df(){const _0x4215bf=['__importDefault','extractFilenameFromPath','type','./utils/crc32','16173570FSURrV','META_EXPERIENCES_EXTENSION','calculateCRC32','Xml','exists','getChildsByName','waveTemplates','readBundledFiles','name','../devops/utils/git-commit.utils','./data/settings-types-list','startsWith','Logger','../internal/fs.internal','toString','-meta.xml','../../../core','readFile','convertToCleanPaths','search','package.xml','paths','extractComponentTypeFromFiles','44pUnJhW','includes','readComponentFiles','775786EHonka','path','extractFileNameFromFiles','relative','343060VuKxNQ','\x22\x20not\x20found\x20in\x20\x22','all','join','push','isSFDXProject','3iaCkIp','apply','1213908FHIbFn','__esModule','split','find','CustomLabels','MDApiParser','filter','catch','constructor','extname','dir','BUNDLED_FOLDERS_REGEXP','(((.+)+)+)+$','reduce','files','map','isPathsEquals','utf-8','isDir','2636298oDeQfo','readChildComponents','793176nilkPZ','error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','crc','1851256CnckbZ','default','META_EXTENSION','28PLbKoc','Cannot\x20parse\x20childs\x20in\x20','readDir','parse','endsWith','values','init'];a183_0x37df=function(){return _0x4215bf;};return a183_0x37df();}exports[a183_0x5589c7(0x1e8)]=MDApiParser;