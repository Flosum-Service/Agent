const a157_0xd8edc9=a157_0x59f5;(function(_0x3af5ef,_0x59eb79){const _0x4e4de0=a157_0x59f5,_0x4a1187=_0x3af5ef();while(!![]){try{const _0x43b718=parseInt(_0x4e4de0(0xba))/0x1*(-parseInt(_0x4e4de0(0x82))/0x2)+-parseInt(_0x4e4de0(0x80))/0x3*(parseInt(_0x4e4de0(0x7b))/0x4)+-parseInt(_0x4e4de0(0x87))/0x5*(-parseInt(_0x4e4de0(0x8b))/0x6)+-parseInt(_0x4e4de0(0xa0))/0x7+-parseInt(_0x4e4de0(0xc4))/0x8+-parseInt(_0x4e4de0(0xab))/0x9+-parseInt(_0x4e4de0(0xac))/0xa*(-parseInt(_0x4e4de0(0xb8))/0xb);if(_0x43b718===_0x59eb79)break;else _0x4a1187['push'](_0x4a1187['shift']());}catch(_0x30d932){_0x4a1187['push'](_0x4a1187['shift']());}}}(a157_0x188d,0x2f959));function a157_0x59f5(_0x38a57b,_0x5c441c){const _0x5a0629=a157_0x188d();return a157_0x59f5=function(_0x5573ce,_0x14d5ed){_0x5573ce=_0x5573ce-0x74;let _0x188db0=_0x5a0629[_0x5573ce];return _0x188db0;},a157_0x59f5(_0x38a57b,_0x5c441c);}const a157_0x14d5ed=(function(){let _0x374af7=!![];return function(_0x2cd552,_0x41d000){const _0x479aaf=_0x374af7?function(){const _0x594d31=a157_0x59f5;if(_0x41d000){const _0x35a9c7=_0x41d000[_0x594d31(0x91)](_0x2cd552,arguments);return _0x41d000=null,_0x35a9c7;}}:function(){};return _0x374af7=![],_0x479aaf;};}()),a157_0x5573ce=a157_0x14d5ed(this,function(){const _0x9f41fe=a157_0x59f5;return a157_0x5573ce[_0x9f41fe(0xbc)]()['search'](_0x9f41fe(0x8a))[_0x9f41fe(0xbc)]()[_0x9f41fe(0xaa)](a157_0x5573ce)[_0x9f41fe(0x7d)]('(((.+)+)+)+$');});a157_0x5573ce();'use strict';var __importDefault=this&&this[a157_0xd8edc9(0x99)]||function(_0x4311cd){const _0x3fca06=a157_0xd8edc9;return _0x4311cd&&_0x4311cd[_0x3fca06(0x76)]?_0x4311cd:{'default':_0x4311cd};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['MDApiParser']=void 0x0;const fs_internal_1=require(a157_0xd8edc9(0x98)),utils_1=require(a157_0xd8edc9(0x9d)),path_1=require(a157_0xd8edc9(0xa4)),xml_1=require('./utils/xml'),child_types_map_1=__importDefault(require(a157_0xd8edc9(0x88))),constants_1=require(a157_0xd8edc9(0x95)),core_1=require(a157_0xd8edc9(0x77)),git_commit_utils_1=require(a157_0xd8edc9(0x9c)),crc32_1=require(a157_0xd8edc9(0x8f)),folder_types_1=__importDefault(require('./data/folder-types')),settings_types_list_1=__importDefault(require(a157_0xd8edc9(0x89))),CHILD_XML_KEYS=Object['values'](child_types_map_1[a157_0xd8edc9(0xad)]);class MDApiParser{constructor(_0x5deebc,_0x12693f,_0x374c00){const _0x331ef9=a157_0xd8edc9;this[_0x331ef9(0x84)]=_0x5deebc,this[_0x331ef9(0xa9)]=_0x374c00,this['logger']=new core_1[(_0x331ef9(0xae))](MDApiParser[_0x331ef9(0x8d)]),this[_0x331ef9(0x8e)]=_0x331ef9(0x8c),this['META_EXPERIENCES_EXTENSION']=_0x331ef9(0xb9),this['paths']=_0x12693f;}async[a157_0xd8edc9(0x86)](_0x1f5fa4){const _0x496a1a=a157_0xd8edc9;try{const _0xdb9f6b=await xml_1['Xml'][_0x496a1a(0x9f)](Object[_0x496a1a(0xa2)](_0x1f5fa4[_0x496a1a(0x74)])[0x0][_0x496a1a(0xbc)](_0x496a1a(0x93))),_0x5e166a=CHILD_XML_KEYS[_0x496a1a(0x85)](_0x4052fe=>xml_1[_0x496a1a(0x7c)][_0x496a1a(0xb7)](_0xdb9f6b,_0x4052fe))[_0x496a1a(0xc0)]((_0x457299,_0x30698f)=>[..._0x457299,...xml_1[_0x496a1a(0x7c)]['getChildsByName'](_0xdb9f6b,_0x30698f)],[]);return(0x0,utils_1['createChildComponentsFromParent'])(_0x1f5fa4,_0xdb9f6b,_0x5e166a);}catch(_0x15ee3e){throw new Error(_0x496a1a(0xb6)+_0x1f5fa4[_0x496a1a(0x8d)]+'\x20['+_0x1f5fa4[_0x496a1a(0xaf)]+']');}}async[a157_0xd8edc9(0xb1)](_0xe8b492){const _0x3f194d=a157_0xd8edc9,_0x2a766d=(0x0,path_1['join'])(this[_0x3f194d(0x84)],_0xe8b492),_0x536ed0=_0xe8b492+(_0xe8b492[_0x3f194d(0xc3)]('experiences')?this['META_EXPERIENCES_EXTENSION']:this[_0x3f194d(0x8e)]),_0x347bd5=await fs_internal_1['FS'][_0x3f194d(0xa6)](_0x2a766d,!![]),_0x16d2c2=await fs_internal_1['FS'][_0x3f194d(0xa1)]((0x0,path_1[_0x3f194d(0xbf)])(this[_0x3f194d(0x84)],_0x536ed0),!![])['catch'](()=>null),_0x35a7b0={};for(const _0x55cc11 of _0x347bd5){_0x35a7b0[(0x0,path_1['relative'])(this[_0x3f194d(0x84)],_0x55cc11)]=await fs_internal_1['FS']['readFile'](_0x55cc11,!![]);}return _0x16d2c2&&(_0x35a7b0[(0x0,path_1['relative'])(this[_0x3f194d(0x84)],_0x536ed0)]=_0x16d2c2),_0x35a7b0;}async['readComponentFiles'](_0x11f4b8){const _0x5dcfc1=a157_0xd8edc9;let _0x1332ba=_0x11f4b8+this[_0x5dcfc1(0x8e)];if(constants_1[_0x5dcfc1(0xa8)][_0x5dcfc1(0x96)](_0x11f4b8))return this[_0x5dcfc1(0xb1)](_0x11f4b8);if(await fs_internal_1['FS'][_0x5dcfc1(0xb0)]((0x0,path_1['join'])(this[_0x5dcfc1(0x84)],_0x11f4b8))||await fs_internal_1['FS'][_0x5dcfc1(0x9e)]((0x0,path_1[_0x5dcfc1(0xbf)])(this[_0x5dcfc1(0x84)],_0x1332ba))){const _0x1cfcd5=await fs_internal_1['FS'][_0x5dcfc1(0xa1)]((0x0,path_1[_0x5dcfc1(0xbf)])(this[_0x5dcfc1(0x84)],_0x1332ba),!![]),_0x121441=await(0x0,utils_1[_0x5dcfc1(0x75)])({'files':{[_0x1332ba]:_0x1cfcd5}})[_0x5dcfc1(0xa7)](()=>null);if(_0x121441&&folder_types_1[_0x5dcfc1(0xad)][_0x5dcfc1(0x81)](_0x121441))return{[_0x1332ba]:await fs_internal_1['FS'][_0x5dcfc1(0xa1)]((0x0,path_1[_0x5dcfc1(0xbf)])(this[_0x5dcfc1(0x84)],_0x1332ba),!![])};}if(!(0x0,path_1[_0x5dcfc1(0x97)])(_0x11f4b8)&&this[_0x5dcfc1(0xa9)]){const _0x1c72a2=_0x11f4b8['split']('/')[0x0],_0x26a592=(await fs_internal_1['FS'][_0x5dcfc1(0xa6)]((0x0,path_1[_0x5dcfc1(0xbf)])(this[_0x5dcfc1(0x84)],_0x1c72a2)))[_0x5dcfc1(0x83)](_0x201bad=>(0x0,git_commit_utils_1[_0x5dcfc1(0xb5)])(_0x201bad,(0x0,path_1[_0x5dcfc1(0xbf)])(this[_0x5dcfc1(0x84)],_0x11f4b8)));if(!_0x26a592)throw new Error(_0x5dcfc1(0xc1)+_0x11f4b8+_0x5dcfc1(0xc2)+_0x1c72a2+'\x22');_0x11f4b8=(0x0,path_1['relative'])(this[_0x5dcfc1(0x84)],_0x26a592),_0x1332ba=_0x11f4b8+this['META_EXTENSION'];}const [_0xcc74a8,_0x1106a5]=await Promise['all']([fs_internal_1['FS'][_0x5dcfc1(0xa1)]((0x0,path_1[_0x5dcfc1(0xbf)])(this[_0x5dcfc1(0x84)],_0x11f4b8),!![])[_0x5dcfc1(0xa7)](()=>null),fs_internal_1['FS'][_0x5dcfc1(0xa1)]((0x0,path_1[_0x5dcfc1(0xbf)])(this[_0x5dcfc1(0x84)],_0x1332ba),!![])['catch'](()=>null)]);return{..._0xcc74a8?{[_0x11f4b8]:_0xcc74a8}:{},..._0x1106a5?{[_0x1332ba]:_0x1106a5}:{}};}async[a157_0xd8edc9(0xb4)](){const _0x54e2af=a157_0xd8edc9,_0xab0cb1=[...this['paths']];if(this[_0x54e2af(0xa9)])for(const _0x2858e3 of _0xab0cb1){if(constants_1[_0x54e2af(0xa8)][_0x54e2af(0x96)](_0x2858e3))continue;if(await fs_internal_1['FS'][_0x54e2af(0xb0)]((0x0,path_1[_0x54e2af(0xbf)])(this[_0x54e2af(0x84)],_0x2858e3))){const _0x2cc575=await fs_internal_1['FS']['readDir']((0x0,path_1[_0x54e2af(0xbf)])(this[_0x54e2af(0x84)],_0x2858e3),!![]);_0xab0cb1[_0x54e2af(0xb2)](..._0x2cc575['map'](_0x27a4b9=>(0x0,path_1[_0x54e2af(0xb3)])(this[_0x54e2af(0x84)],_0x27a4b9)));}}this[_0x54e2af(0xbd)]=(0x0,utils_1['convertToCleanPaths'])(_0xab0cb1);}async[a157_0xd8edc9(0x9f)](){const _0x18bb8c=a157_0xd8edc9;await this[_0x18bb8c(0xb4)]();const _0x2e425a=[];for(const _0x51a450 of this[_0x18bb8c(0xbd)]){if(_0x51a450[_0x18bb8c(0xbb)]('package.xml'))continue;const _0x19b87e={};try{_0x19b87e[_0x18bb8c(0x74)]=await this[_0x18bb8c(0x9a)](_0x51a450),_0x19b87e['filePath']=constants_1['BUNDLED_FOLDERS_REGEXP']['test'](_0x51a450)?_0x51a450:(0x0,utils_1[_0x18bb8c(0x78)])({'files':_0x19b87e[_0x18bb8c(0x74)]}),_0x51a450[_0x18bb8c(0xc3)](_0x18bb8c(0xbe))?_0x19b87e[_0x18bb8c(0xaf)]=_0x18bb8c(0x9b):_0x19b87e[_0x18bb8c(0xaf)]=await(0x0,utils_1[_0x18bb8c(0x75)])({'files':_0x19b87e[_0x18bb8c(0x74)]});}catch(_0xcb9b6a){this[_0x18bb8c(0x7a)][_0x18bb8c(0xa5)]('error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20',_0x51a450,_0xcb9b6a);continue;}_0x19b87e['name']=(0x0,utils_1[_0x18bb8c(0xa3)])(_0x51a450),_0x19b87e[_0x18bb8c(0x92)]=(0x0,crc32_1[_0x18bb8c(0x90)])(_0x19b87e);if((0x0,utils_1[_0x18bb8c(0x94)])(_0x19b87e)){const _0x42f9e5=await this[_0x18bb8c(0x86)](_0x19b87e);_0x2e425a[_0x18bb8c(0xb2)](..._0x42f9e5);}if(_0x19b87e['type']===_0x18bb8c(0x7f))continue;settings_types_list_1[_0x18bb8c(0xad)][_0x18bb8c(0x81)](_0x19b87e[_0x18bb8c(0xaf)])&&(_0x19b87e[_0x18bb8c(0xaf)]=_0x18bb8c(0x7e)),_0x2e425a[_0x18bb8c(0xb2)](_0x19b87e);}return _0x2e425a;}}function a157_0x188d(){const _0x2f9499=['test','extname','../internal/fs.internal','__importDefault','readComponentFiles','WaveTemplateBundle','../devops/utils/git-commit.utils','./utils','exists','parse','1053745GBNUav','readFile','values','extractFilenameFromPath','path','error','readDir','catch','BUNDLED_FOLDERS_REGEXP','isSFDXProject','constructor','2681928JcRPKJ','20lnyTsJ','default','Logger','type','isDir','readBundledFiles','push','relative','init','isPathsEquals','Cannot\x20parse\x20childs\x20in\x20','hasChildNodes','6744001VnTitF','.site-meta.xml','1EPJhGH','endsWith','toString','paths','waveTemplates','join','reduce','Component\x20\x22','\x22\x20not\x20found\x20in\x20\x22','startsWith','1165408jsQLWs','files','extractComponentTypeFromFiles','__esModule','../../../core','extractFileNameFromFiles','MDApiParser','logger','28cTYPiW','Xml','search','Settings','CustomLabels','150375gtDIvz','includes','256148auyzsG','find','dir','filter','readChildComponents','25VWxIlC','./data/child-types-map','./data/settings-types-list','(((.+)+)+)+$','50250XNvcQN','-meta.xml','name','META_EXTENSION','./utils/crc32','calculateCRC32','apply','crc','utf-8','isParentComponent','../../../constants'];a157_0x188d=function(){return _0x2f9499;};return a157_0x188d();}exports[a157_0xd8edc9(0x79)]=MDApiParser;