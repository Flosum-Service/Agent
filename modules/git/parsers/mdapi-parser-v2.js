const a181_0x1b243b=a181_0x4f13;(function(_0x5982a6,_0x472913){const _0x3ebdee=a181_0x4f13,_0x2ac03e=_0x5982a6();while(!![]){try{const _0x407f27=-parseInt(_0x3ebdee(0xba))/0x1*(-parseInt(_0x3ebdee(0xb6))/0x2)+parseInt(_0x3ebdee(0xfc))/0x3*(parseInt(_0x3ebdee(0xb1))/0x4)+parseInt(_0x3ebdee(0xce))/0x5*(parseInt(_0x3ebdee(0xbd))/0x6)+parseInt(_0x3ebdee(0xe4))/0x7+-parseInt(_0x3ebdee(0xd5))/0x8+parseInt(_0x3ebdee(0xda))/0x9+-parseInt(_0x3ebdee(0xc1))/0xa*(parseInt(_0x3ebdee(0xfb))/0xb);if(_0x407f27===_0x472913)break;else _0x2ac03e['push'](_0x2ac03e['shift']());}catch(_0x5cebdd){_0x2ac03e['push'](_0x2ac03e['shift']());}}}(a181_0x17bf,0x69b30));const a181_0x311ada=(function(){let _0x44162e=!![];return function(_0x4ad5b5,_0x4ad577){const _0x558055=_0x44162e?function(){const _0x4ec93b=a181_0x4f13;if(_0x4ad577){const _0xce3a28=_0x4ad577[_0x4ec93b(0xef)](_0x4ad5b5,arguments);return _0x4ad577=null,_0xce3a28;}}:function(){};return _0x44162e=![],_0x558055;};}()),a181_0x348cee=a181_0x311ada(this,function(){const _0x1bae6e=a181_0x4f13;return a181_0x348cee['toString']()['search'](_0x1bae6e(0xb8))[_0x1bae6e(0xc7)]()[_0x1bae6e(0xd4)](a181_0x348cee)[_0x1bae6e(0xd8)](_0x1bae6e(0xb8));});a181_0x348cee();'use strict';var __importDefault=this&&this[a181_0x1b243b(0xbc)]||function(_0x45cf1d){const _0x17a4ff=a181_0x1b243b;return _0x45cf1d&&_0x45cf1d[_0x17a4ff(0xc4)]?_0x45cf1d:{'default':_0x45cf1d};};Object[a181_0x1b243b(0xb2)](exports,a181_0x1b243b(0xc4),{'value':!![]}),exports[a181_0x1b243b(0xcd)]=void 0x0;function a181_0x4f13(_0x54e6bd,_0x1a37b9){const _0xc9c159=a181_0x17bf();return a181_0x4f13=function(_0x348cee,_0x311ada){_0x348cee=_0x348cee-0xb0;let _0x17bf5b=_0xc9c159[_0x348cee];return _0x17bf5b;},a181_0x4f13(_0x54e6bd,_0x1a37b9);}const fs_internal_1=require(a181_0x1b243b(0xbf)),utils_1=require(a181_0x1b243b(0xf4)),path_1=require('path'),xml_v2_1=require('./utils/xml-v2'),child_types_map_1=__importDefault(require(a181_0x1b243b(0xc9))),constants_1=require('../../../constants'),crc32_1=require('./utils/crc32'),folder_types_1=__importDefault(require(a181_0x1b243b(0xbb))),settings_types_list_1=__importDefault(require(a181_0x1b243b(0xfa))),base_parser_1=require('./base.parser'),CHILD_XML_KEYS=Object[a181_0x1b243b(0xb5)](child_types_map_1[a181_0x1b243b(0xb9)]);class MDApiParserV2 extends base_parser_1[a181_0x1b243b(0xed)]{constructor({sourceDir:_0x37cbc9,paths:_0x45a030}){const _0x1e0a1f=a181_0x1b243b;super({'sourceDir':_0x37cbc9,'paths':_0x45a030},MDApiParserV2['name']),this[_0x1e0a1f(0xc8)]=_0x1e0a1f(0xc2),this[_0x1e0a1f(0xf8)]=_0x1e0a1f(0xdc);}async['readChildComponents'](_0x265316){const _0x232a4d=a181_0x1b243b;try{const _0x4d6b5a=await xml_v2_1[_0x232a4d(0xe6)][_0x232a4d(0xd7)](Object[_0x232a4d(0xb5)](_0x265316[_0x232a4d(0xf0)])[0x0][_0x232a4d(0xc7)](_0x232a4d(0xde))),_0x58f6c3=CHILD_XML_KEYS['filter'](_0x493559=>xml_v2_1[_0x232a4d(0xe6)][_0x232a4d(0xc6)](_0x4d6b5a,_0x493559))[_0x232a4d(0xea)]((_0x2ff4c9,_0x5a354f)=>[..._0x2ff4c9,...xml_v2_1[_0x232a4d(0xe6)][_0x232a4d(0xf3)](_0x4d6b5a,_0x5a354f)],[]);return(0x0,utils_1[_0x232a4d(0xc0)])(_0x265316,_0x4d6b5a,_0x58f6c3);}catch(_0x3bc55c){throw new Error(_0x232a4d(0xd1)+_0x265316[_0x232a4d(0xec)]+'\x20['+_0x265316[_0x232a4d(0xee)]+']');}}async[a181_0x1b243b(0xf7)](_0x787792){const _0x24b606=a181_0x1b243b,_0x28db25=(0x0,path_1[_0x24b606(0xf2)])(this[_0x24b606(0xe9)],_0x787792),_0x3d484c=_0x787792+(_0x787792[_0x24b606(0xf9)](_0x24b606(0xb3))?this['META_EXPERIENCES_EXTENSION']:this[_0x24b606(0xc8)]),_0x10a9ac=await fs_internal_1['FS'][_0x24b606(0xcc)](_0x28db25,!![]),_0x4121bc=await fs_internal_1['FS'][_0x24b606(0xc5)]((0x0,path_1[_0x24b606(0xf2)])(this['sourceDir'],_0x3d484c),!![])[_0x24b606(0xdd)](()=>null),_0xc2ac8e={};for(const _0x3a2a7e of _0x10a9ac){_0xc2ac8e[(0x0,path_1[_0x24b606(0xeb)])(this[_0x24b606(0xe9)],_0x3a2a7e)[_0x24b606(0xc3)](/\\/g,'/')]=await fs_internal_1['FS'][_0x24b606(0xc5)](_0x3a2a7e,!![]);}return _0x4121bc&&(_0xc2ac8e[(0x0,path_1[_0x24b606(0xeb)])(this[_0x24b606(0xe9)],_0x3d484c)[_0x24b606(0xc3)](/\\/g,'/')]=_0x4121bc),_0xc2ac8e;}async['readComponent'](_0x16d012){const _0x2202df=a181_0x1b243b,_0x55088e=_0x16d012+this[_0x2202df(0xc8)];if(constants_1[_0x2202df(0xcb)][_0x2202df(0xbe)](_0x16d012))return this[_0x2202df(0xf7)](_0x16d012);if(await fs_internal_1['FS']['exists']((0x0,path_1[_0x2202df(0xf2)])(this[_0x2202df(0xe9)],_0x55088e))){const _0x30d33b=await fs_internal_1['FS'][_0x2202df(0xc5)]((0x0,path_1[_0x2202df(0xf2)])(this['sourceDir'],_0x55088e),!![]),_0x3351af=await(0x0,utils_1['extractComponentTypeFromFiles'])({'files':{[_0x55088e]:_0x30d33b}})[_0x2202df(0xdd)](()=>null);if(_0x3351af&&folder_types_1[_0x2202df(0xb9)][_0x2202df(0xdf)](_0x3351af))return{[_0x55088e]:_0x30d33b};return{[_0x55088e]:_0x30d33b,[_0x16d012]:await fs_internal_1['FS'][_0x2202df(0xc5)]((0x0,path_1[_0x2202df(0xf2)])(this[_0x2202df(0xe9)],_0x16d012),!![])};}return{[_0x16d012]:await fs_internal_1['FS']['readFile']((0x0,path_1[_0x2202df(0xf2)])(this[_0x2202df(0xe9)],_0x16d012),!![])};}[a181_0x1b243b(0xe3)](){const _0x3bf699=a181_0x1b243b;this[_0x3bf699(0xd0)]=this[_0x3bf699(0xd0)][_0x3bf699(0xdb)](_0x4d1d4a=>constants_1[_0x3bf699(0xcb)][_0x3bf699(0xbe)](_0x4d1d4a)?_0x4d1d4a[_0x3bf699(0xd6)]('/')[_0x3bf699(0xd9)](0x0,0x2)['join']('/'):_0x4d1d4a),this['paths']=[...new Set(this[_0x3bf699(0xd0)])];}async[a181_0x1b243b(0xcf)](){const _0x3f4d81=a181_0x1b243b,_0x33b80c=[];this['foldBundledComponentsPaths']();for(const _0x8e624c of this['paths']){if(_0x8e624c[_0x3f4d81(0xe2)](_0x3f4d81(0xe5)))continue;const _0x5da9a3={};try{_0x5da9a3[_0x3f4d81(0xf0)]=await this[_0x3f4d81(0xf5)](_0x8e624c),_0x5da9a3['filePath']=constants_1[_0x3f4d81(0xcb)]['test'](_0x8e624c)?_0x8e624c:(0x0,utils_1[_0x3f4d81(0xf6)])({'files':_0x5da9a3[_0x3f4d81(0xf0)]}),_0x8e624c[_0x3f4d81(0xf9)](_0x3f4d81(0xe0))?_0x5da9a3['type']='WaveTemplateBundle':_0x5da9a3[_0x3f4d81(0xee)]=await(0x0,utils_1[_0x3f4d81(0xb4)])({'files':_0x5da9a3[_0x3f4d81(0xf0)]});}catch(_0x94f64e){this[_0x3f4d81(0xe7)][_0x3f4d81(0xb0)](_0x3f4d81(0xe8),_0x8e624c,_0x94f64e);continue;}_0x5da9a3['name']=(0x0,utils_1[_0x3f4d81(0xd3)])(_0x8e624c),_0x5da9a3['crc']=(0x0,crc32_1[_0x3f4d81(0xd2)])(_0x5da9a3);if((0x0,utils_1['isParentComponent'])(_0x5da9a3)){const _0x31e1e9=await this[_0x3f4d81(0xb7)](_0x5da9a3);_0x33b80c[_0x3f4d81(0xe1)](..._0x31e1e9);}if(_0x5da9a3[_0x3f4d81(0xee)]===_0x3f4d81(0xf1))continue;settings_types_list_1[_0x3f4d81(0xb9)][_0x3f4d81(0xdf)](_0x5da9a3[_0x3f4d81(0xee)])&&(_0x5da9a3['type']=_0x3f4d81(0xca)),_0x33b80c[_0x3f4d81(0xe1)](_0x5da9a3);}return _0x33b80c;}}function a181_0x17bf(){const _0x4c8033=['parse','search','slice','470223noqIZn','map','.site-meta.xml','catch','utf-8','includes','waveTemplates','push','endsWith','foldBundledComponentsPaths','3015621GQqhyW','package.xml','XmlV2','logger','Error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','sourceDir','reduce','relative','name','BaseParser','type','apply','files','CustomLabels','join','getChildsByName','./utils','readComponent','extractFileNameFromFiles','readBundledComponent','META_EXPERIENCES_EXTENSION','startsWith','./data/settings-types-list','11rwMSsu','45435qXlFYd','error','212YMHiSv','defineProperty','experiences','extractComponentTypeFromFiles','values','2798cZhDTl','readChildComponents','(((.+)+)+)+$','default','293hWBatz','./data/folder-types','__importDefault','114QSRlZR','test','../internal/fs.internal','createChildComponentsFromParent','9887990XALMkY','-meta.xml','replace','__esModule','readFile','hasChildNodes','toString','META_EXTENSION','./data/child-types-map','Settings','BUNDLED_FOLDERS_REGEXP','readDir','MDApiParserV2','86585hSMPYO','execute','paths','Cannot\x20parse\x20children\x20in\x20','calculateCRC32','extractFilenameFromPath','constructor','4823376bGyfDS','split'];a181_0x17bf=function(){return _0x4c8033;};return a181_0x17bf();}exports[a181_0x1b243b(0xcd)]=MDApiParserV2;