const a172_0x51fc8=a172_0x19c1;function a172_0x19c1(_0x47324d,_0x26be4d){const _0x15ea20=a172_0x5297();return a172_0x19c1=function(_0xc268bc,_0x1c5cca){_0xc268bc=_0xc268bc-0xe2;let _0x529753=_0x15ea20[_0xc268bc];return _0x529753;},a172_0x19c1(_0x47324d,_0x26be4d);}(function(_0x515958,_0x309fba){const _0x463a32=a172_0x19c1,_0x418246=_0x515958();while(!![]){try{const _0x2c8659=-parseInt(_0x463a32(0xf7))/0x1+parseInt(_0x463a32(0xe3))/0x2+parseInt(_0x463a32(0xec))/0x3+-parseInt(_0x463a32(0x121))/0x4+parseInt(_0x463a32(0xfd))/0x5+-parseInt(_0x463a32(0x11a))/0x6*(parseInt(_0x463a32(0x114))/0x7)+-parseInt(_0x463a32(0x10f))/0x8*(-parseInt(_0x463a32(0xf0))/0x9);if(_0x2c8659===_0x309fba)break;else _0x418246['push'](_0x418246['shift']());}catch(_0x539361){_0x418246['push'](_0x418246['shift']());}}}(a172_0x5297,0xb20ee));const a172_0x1c5cca=(function(){let _0x5cc058=!![];return function(_0xb40437,_0x3478f1){const _0x4900c5=_0x5cc058?function(){const _0xc91fff=a172_0x19c1;if(_0x3478f1){const _0x2ddaf0=_0x3478f1[_0xc91fff(0xeb)](_0xb40437,arguments);return _0x3478f1=null,_0x2ddaf0;}}:function(){};return _0x5cc058=![],_0x4900c5;};}()),a172_0xc268bc=a172_0x1c5cca(this,function(){const _0x4263e3=a172_0x19c1;return a172_0xc268bc['toString']()[_0x4263e3(0x10e)](_0x4263e3(0xf9))[_0x4263e3(0x125)]()['constructor'](a172_0xc268bc)[_0x4263e3(0x10e)](_0x4263e3(0xf9));});a172_0xc268bc();'use strict';var __importDefault=this&&this[a172_0x51fc8(0x129)]||function(_0x4cf799){const _0x3e087b=a172_0x51fc8;return _0x4cf799&&_0x4cf799[_0x3e087b(0x10a)]?_0x4cf799:{'default':_0x4cf799};};Object[a172_0x51fc8(0xf8)](exports,a172_0x51fc8(0x10a),{'value':!![]}),exports[a172_0x51fc8(0x117)]=void 0x0;function a172_0x5297(){const _0x4327a0=['catch','5778768AMcctB','BUNDLED_FOLDERS_REGEXP','../internal/fs.internal','./data/child-types-map','toString','parse','META_EXPERIENCES_EXTENSION','files','__importDefault','utf-8','848698scWvgD','filePath','Cannot\x20parse\x20children\x20in\x20','crc','push','name','values','paths','apply','2135208wgUvmO','./utils/xml-v2','error','type','3311073GKpwgv','.site-meta.xml','test','extractComponentTypeFromFiles','includes','isParentComponent','XmlV2','117026izaDNn','defineProperty','(((.+)+)+)+$','waveTemplates','hasChildNodes','./data/settings-types-list','1017575GApMmB','META_EXTENSION','replace','split','startsWith','./utils/crc32','../../../constants','CustomLabels','readFile','-meta.xml','join','endsWith','logger','__esModule','./data/folder-types','readDir','readBundledComponent','search','24RRRKLz','execute','createChildComponentsFromParent','sourceDir','Error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','399xzGXoQ','readChildComponents','filter','MDApiParserV2','map','readComponent','16026dMTLcC','extractFileNameFromFiles','default','reduce','foldBundledComponentsPaths','getChildsByName'];a172_0x5297=function(){return _0x4327a0;};return a172_0x5297();}const fs_internal_1=require(a172_0x51fc8(0x123)),utils_1=require('./utils'),path_1=require('path'),xml_v2_1=require(a172_0x51fc8(0xed)),child_types_map_1=__importDefault(require(a172_0x51fc8(0x124))),constants_1=require(a172_0x51fc8(0x103)),crc32_1=require(a172_0x51fc8(0x102)),folder_types_1=__importDefault(require(a172_0x51fc8(0x10b))),settings_types_list_1=__importDefault(require(a172_0x51fc8(0xfc))),base_parser_1=require('./base.parser'),CHILD_XML_KEYS=Object['values'](child_types_map_1[a172_0x51fc8(0x11c)]);class MDApiParserV2 extends base_parser_1['BaseParser']{constructor({sourceDir:_0x1c54f2,paths:_0x3db65b}){const _0xd4cdec=a172_0x51fc8;super({'sourceDir':_0x1c54f2,'paths':_0x3db65b},MDApiParserV2[_0xd4cdec(0xe8)]),this['META_EXTENSION']=_0xd4cdec(0x106),this[_0xd4cdec(0x127)]=_0xd4cdec(0xf1);}async[a172_0x51fc8(0x115)](_0x527ed5){const _0x46710c=a172_0x51fc8;try{const _0x4d97dc=await xml_v2_1[_0x46710c(0xf6)][_0x46710c(0x126)](Object[_0x46710c(0xe9)](_0x527ed5[_0x46710c(0x128)])[0x0]['toString'](_0x46710c(0xe2))),_0x2bb921=CHILD_XML_KEYS[_0x46710c(0x116)](_0x448167=>xml_v2_1['XmlV2'][_0x46710c(0xfb)](_0x4d97dc,_0x448167))[_0x46710c(0x11d)]((_0x524330,_0x2e1dba)=>[..._0x524330,...xml_v2_1['XmlV2'][_0x46710c(0x11f)](_0x4d97dc,_0x2e1dba)],[]);return(0x0,utils_1[_0x46710c(0x111)])(_0x527ed5,_0x4d97dc,_0x2bb921);}catch(_0x8fff98){throw new Error(_0x46710c(0xe5)+_0x527ed5[_0x46710c(0xe8)]+'\x20['+_0x527ed5[_0x46710c(0xef)]+']');}}async[a172_0x51fc8(0x10d)](_0x1f1ecb){const _0x3c6690=a172_0x51fc8,_0x1fdd88=(0x0,path_1[_0x3c6690(0x107)])(this['sourceDir'],_0x1f1ecb),_0x22d0e2=_0x1f1ecb+(_0x1f1ecb['startsWith']('experiences')?this[_0x3c6690(0x127)]:this[_0x3c6690(0xfe)]),_0x4909be=await fs_internal_1['FS'][_0x3c6690(0x10c)](_0x1fdd88,!![]),_0x5939c5=await fs_internal_1['FS'][_0x3c6690(0x105)]((0x0,path_1[_0x3c6690(0x107)])(this['sourceDir'],_0x22d0e2),!![])[_0x3c6690(0x120)](()=>null),_0x47052f={};for(const _0x32f046 of _0x4909be){_0x47052f[(0x0,path_1['relative'])(this['sourceDir'],_0x32f046)[_0x3c6690(0xff)](/\\/g,'/')]=await fs_internal_1['FS'][_0x3c6690(0x105)](_0x32f046,!![]);}return _0x5939c5&&(_0x47052f[(0x0,path_1['relative'])(this['sourceDir'],_0x22d0e2)['replace'](/\\/g,'/')]=_0x5939c5),_0x47052f;}async[a172_0x51fc8(0x119)](_0x56a4c5){const _0x5f4b7c=a172_0x51fc8,_0x556170=_0x56a4c5+this[_0x5f4b7c(0xfe)];if(constants_1[_0x5f4b7c(0x122)][_0x5f4b7c(0xf2)](_0x56a4c5))return this[_0x5f4b7c(0x10d)](_0x56a4c5);if(await fs_internal_1['FS']['exists']((0x0,path_1[_0x5f4b7c(0x107)])(this['sourceDir'],_0x556170))){const _0x11ea84=await fs_internal_1['FS'][_0x5f4b7c(0x105)]((0x0,path_1[_0x5f4b7c(0x107)])(this[_0x5f4b7c(0x112)],_0x556170),!![]),_0x4f5eee=await(0x0,utils_1[_0x5f4b7c(0xf3)])({'files':{[_0x556170]:_0x11ea84}})['catch'](()=>null);if(_0x4f5eee&&folder_types_1[_0x5f4b7c(0x11c)][_0x5f4b7c(0xf4)](_0x4f5eee))return{[_0x556170]:_0x11ea84};return{[_0x556170]:_0x11ea84,[_0x56a4c5]:await fs_internal_1['FS'][_0x5f4b7c(0x105)]((0x0,path_1[_0x5f4b7c(0x107)])(this[_0x5f4b7c(0x112)],_0x56a4c5),!![])};}return{[_0x56a4c5]:await fs_internal_1['FS'][_0x5f4b7c(0x105)]((0x0,path_1[_0x5f4b7c(0x107)])(this[_0x5f4b7c(0x112)],_0x56a4c5),!![])};}['foldBundledComponentsPaths'](){const _0x5744b9=a172_0x51fc8;this[_0x5744b9(0xea)]=this[_0x5744b9(0xea)][_0x5744b9(0x118)](_0x101d96=>constants_1[_0x5744b9(0x122)][_0x5744b9(0xf2)](_0x101d96)?_0x101d96[_0x5744b9(0x100)]('/')['slice'](0x0,0x2)[_0x5744b9(0x107)]('/'):_0x101d96),this[_0x5744b9(0xea)]=[...new Set(this[_0x5744b9(0xea)])];}async[a172_0x51fc8(0x110)](){const _0x3e4950=a172_0x51fc8,_0x5d2ce5=[];this[_0x3e4950(0x11e)]();for(const _0x3e8d2c of this['paths']){if(_0x3e8d2c[_0x3e4950(0x108)]('package.xml'))continue;const _0x14aa7f={};try{_0x14aa7f[_0x3e4950(0x128)]=await this['readComponent'](_0x3e8d2c),_0x14aa7f[_0x3e4950(0xe4)]=constants_1[_0x3e4950(0x122)]['test'](_0x3e8d2c)?_0x3e8d2c:(0x0,utils_1[_0x3e4950(0x11b)])({'files':_0x14aa7f[_0x3e4950(0x128)]}),_0x3e8d2c[_0x3e4950(0x101)](_0x3e4950(0xfa))?_0x14aa7f['type']='WaveTemplateBundle':_0x14aa7f['type']=await(0x0,utils_1[_0x3e4950(0xf3)])({'files':_0x14aa7f['files']});}catch(_0x560bad){this[_0x3e4950(0x109)][_0x3e4950(0xee)](_0x3e4950(0x113),_0x3e8d2c,_0x560bad);continue;}_0x14aa7f[_0x3e4950(0xe8)]=(0x0,utils_1['extractFilenameFromPath'])(_0x3e8d2c),_0x14aa7f[_0x3e4950(0xe6)]=(0x0,crc32_1['calculateCRC32'])(_0x14aa7f);if((0x0,utils_1[_0x3e4950(0xf5)])(_0x14aa7f)){const _0x30138c=await this[_0x3e4950(0x115)](_0x14aa7f);_0x5d2ce5[_0x3e4950(0xe7)](..._0x30138c);}if(_0x14aa7f[_0x3e4950(0xef)]===_0x3e4950(0x104))continue;settings_types_list_1[_0x3e4950(0x11c)][_0x3e4950(0xf4)](_0x14aa7f['type'])&&(_0x14aa7f[_0x3e4950(0xef)]='Settings'),_0x5d2ce5[_0x3e4950(0xe7)](_0x14aa7f);}return _0x5d2ce5;}}exports[a172_0x51fc8(0x117)]=MDApiParserV2;