const a182_0x1086ad=a182_0x81c5;function a182_0x1da5(){const _0x2784e6=['extractFileNameFromFiles','15756AeugEo','1243248HuVKZK','sourceDir','push','foldBundledComponentsPaths','CustomLabels','readComponent','Cannot\x20parse\x20children\x20in\x20','slice','9607934DtKPlQ','23098041VXCSwj','8OzuGMl','readDir','replace','name','relative','633vpdOyf','./data/folder-types','test','apply','BUNDLED_FOLDERS_REGEXP','parse','paths','utf-8','toString','search','createChildComponentsFromParent','MDApiParserV2','__importDefault','Error\x20occurred\x20when\x20parsing\x20file/folder\x20%s.\x20Original\x20error:\x20','readBundledComponent','./utils/xml-v2','Settings','files','readFile','isParentComponent','package.xml','filePath','META_EXPERIENCES_EXTENSION','__esModule','extractComponentTypeFromFiles','join','exists','crc','../../../constants','META_EXTENSION','./base.parser','1953616eJXpnz','7273525UBvuiS','includes','readChildComponents','./data/child-types-map','(((.+)+)+)+$','values','default','type','logger','catch','split','.site-meta.xml','./data/settings-types-list','extractFilenameFromPath','hasChildNodes','-meta.xml','waveTemplates','reduce','649907GFQDmD','startsWith','filter','defineProperty','experiences','XmlV2','calculateCRC32'];a182_0x1da5=function(){return _0x2784e6;};return a182_0x1da5();}(function(_0x1cb7b8,_0x4e37f7){const _0x2e334b=a182_0x81c5,_0x342b60=_0x1cb7b8();while(!![]){try{const _0x49579e=parseInt(_0x2e334b(0x212))/0x1+parseInt(_0x2e334b(0x1ff))/0x2+parseInt(_0x2e334b(0x1e0))/0x3*(-parseInt(_0x2e334b(0x1d0))/0x4)+-parseInt(_0x2e334b(0x200))/0x5+parseInt(_0x2e334b(0x1d1))/0x6+-parseInt(_0x2e334b(0x1d9))/0x7*(parseInt(_0x2e334b(0x1db))/0x8)+parseInt(_0x2e334b(0x1da))/0x9;if(_0x49579e===_0x4e37f7)break;else _0x342b60['push'](_0x342b60['shift']());}catch(_0x4b6130){_0x342b60['push'](_0x342b60['shift']());}}}(a182_0x1da5,0xb5258));const a182_0x285fd0=(function(){let _0x45cf22=!![];return function(_0x338336,_0x2ebc02){const _0x1cb170=_0x45cf22?function(){const _0x370282=a182_0x81c5;if(_0x2ebc02){const _0x523c1d=_0x2ebc02[_0x370282(0x1e3)](_0x338336,arguments);return _0x2ebc02=null,_0x523c1d;}}:function(){};return _0x45cf22=![],_0x1cb170;};}()),a182_0x1732b0=a182_0x285fd0(this,function(){const _0x40f90d=a182_0x81c5;return a182_0x1732b0[_0x40f90d(0x1e8)]()[_0x40f90d(0x1e9)](_0x40f90d(0x204))['toString']()['constructor'](a182_0x1732b0)[_0x40f90d(0x1e9)](_0x40f90d(0x204));});a182_0x1732b0();'use strict';var __importDefault=this&&this[a182_0x1086ad(0x1ec)]||function(_0x4ad565){const _0x3b8de7=a182_0x1086ad;return _0x4ad565&&_0x4ad565[_0x3b8de7(0x1f7)]?_0x4ad565:{'default':_0x4ad565};};Object[a182_0x1086ad(0x215)](exports,a182_0x1086ad(0x1f7),{'value':!![]}),exports['MDApiParserV2']=void 0x0;function a182_0x81c5(_0x475207,_0x40890c){const _0x61ba51=a182_0x1da5();return a182_0x81c5=function(_0x1732b0,_0x285fd0){_0x1732b0=_0x1732b0-0x1d0;let _0x1da5eb=_0x61ba51[_0x1732b0];return _0x1da5eb;},a182_0x81c5(_0x475207,_0x40890c);}const fs_internal_1=require('../internal/fs.internal'),utils_1=require('./utils'),path_1=require('path'),xml_v2_1=require(a182_0x1086ad(0x1ef)),child_types_map_1=__importDefault(require(a182_0x1086ad(0x203))),constants_1=require(a182_0x1086ad(0x1fc)),crc32_1=require('./utils/crc32'),folder_types_1=__importDefault(require(a182_0x1086ad(0x1e1))),settings_types_list_1=__importDefault(require(a182_0x1086ad(0x20c))),base_parser_1=require(a182_0x1086ad(0x1fe)),CHILD_XML_KEYS=Object[a182_0x1086ad(0x205)](child_types_map_1['default']);class MDApiParserV2 extends base_parser_1['BaseParser']{constructor({sourceDir:_0xcec16a,paths:_0x42bbc3}){const _0x1bb995=a182_0x1086ad;super({'sourceDir':_0xcec16a,'paths':_0x42bbc3},MDApiParserV2[_0x1bb995(0x1de)]),this['META_EXTENSION']=_0x1bb995(0x20f),this['META_EXPERIENCES_EXTENSION']=_0x1bb995(0x20b);}async[a182_0x1086ad(0x202)](_0x45309f){const _0x981c=a182_0x1086ad;try{const _0x3b4530=await xml_v2_1['XmlV2'][_0x981c(0x1e5)](Object[_0x981c(0x205)](_0x45309f[_0x981c(0x1f1)])[0x0][_0x981c(0x1e8)](_0x981c(0x1e7))),_0x2b2561=CHILD_XML_KEYS[_0x981c(0x214)](_0x674026=>xml_v2_1['XmlV2'][_0x981c(0x20e)](_0x3b4530,_0x674026))[_0x981c(0x211)]((_0x16fc4b,_0x5dcab9)=>[..._0x16fc4b,...xml_v2_1[_0x981c(0x217)]['getChildsByName'](_0x3b4530,_0x5dcab9)],[]);return(0x0,utils_1[_0x981c(0x1ea)])(_0x45309f,_0x3b4530,_0x2b2561);}catch(_0x4ac7f4){throw new Error(_0x981c(0x1d7)+_0x45309f[_0x981c(0x1de)]+'\x20['+_0x45309f['type']+']');}}async[a182_0x1086ad(0x1ee)](_0x936685){const _0x169d60=a182_0x1086ad,_0x2951ec=(0x0,path_1['join'])(this['sourceDir'],_0x936685),_0x4e6a18=_0x936685+(_0x936685[_0x169d60(0x213)](_0x169d60(0x216))?this[_0x169d60(0x1f6)]:this[_0x169d60(0x1fd)]),_0x41875b=await fs_internal_1['FS'][_0x169d60(0x1dc)](_0x2951ec,!![]),_0x15e852=await fs_internal_1['FS'][_0x169d60(0x1f2)]((0x0,path_1[_0x169d60(0x1f9)])(this[_0x169d60(0x1d2)],_0x4e6a18),!![])[_0x169d60(0x209)](()=>null),_0x4557fa={};for(const _0x1f8434 of _0x41875b){_0x4557fa[(0x0,path_1[_0x169d60(0x1df)])(this['sourceDir'],_0x1f8434)['replace'](/\\/g,'/')]=await fs_internal_1['FS'][_0x169d60(0x1f2)](_0x1f8434,!![]);}return _0x15e852&&(_0x4557fa[(0x0,path_1[_0x169d60(0x1df)])(this['sourceDir'],_0x4e6a18)[_0x169d60(0x1dd)](/\\/g,'/')]=_0x15e852),_0x4557fa;}async[a182_0x1086ad(0x1d6)](_0x264868){const _0xfc8434=a182_0x1086ad,_0x6dc219=_0x264868+this[_0xfc8434(0x1fd)];if(constants_1[_0xfc8434(0x1e4)][_0xfc8434(0x1e2)](_0x264868))return this[_0xfc8434(0x1ee)](_0x264868);if(await fs_internal_1['FS'][_0xfc8434(0x1fa)]((0x0,path_1[_0xfc8434(0x1f9)])(this['sourceDir'],_0x6dc219))){const _0x374a98=await fs_internal_1['FS'][_0xfc8434(0x1f2)]((0x0,path_1[_0xfc8434(0x1f9)])(this[_0xfc8434(0x1d2)],_0x6dc219),!![]),_0x1def4e=await(0x0,utils_1['extractComponentTypeFromFiles'])({'files':{[_0x6dc219]:_0x374a98}})[_0xfc8434(0x209)](()=>null);if(_0x1def4e&&folder_types_1[_0xfc8434(0x206)][_0xfc8434(0x201)](_0x1def4e))return{[_0x6dc219]:_0x374a98};return{[_0x6dc219]:_0x374a98,[_0x264868]:await fs_internal_1['FS'][_0xfc8434(0x1f2)]((0x0,path_1[_0xfc8434(0x1f9)])(this[_0xfc8434(0x1d2)],_0x264868),!![])};}return{[_0x264868]:await fs_internal_1['FS'][_0xfc8434(0x1f2)]((0x0,path_1[_0xfc8434(0x1f9)])(this[_0xfc8434(0x1d2)],_0x264868),!![])};}[a182_0x1086ad(0x1d4)](){const _0xdd40ee=a182_0x1086ad;this[_0xdd40ee(0x1e6)]=this[_0xdd40ee(0x1e6)]['map'](_0x1109da=>constants_1[_0xdd40ee(0x1e4)][_0xdd40ee(0x1e2)](_0x1109da)?_0x1109da[_0xdd40ee(0x20a)]('/')[_0xdd40ee(0x1d8)](0x0,0x2)[_0xdd40ee(0x1f9)]('/'):_0x1109da),this[_0xdd40ee(0x1e6)]=[...new Set(this[_0xdd40ee(0x1e6)])];}async['execute'](){const _0x356ab3=a182_0x1086ad,_0x408a14=[];this[_0x356ab3(0x1d4)]();for(const _0x416526 of this[_0x356ab3(0x1e6)]){if(_0x416526['endsWith'](_0x356ab3(0x1f4)))continue;const _0x13d3bf={};try{_0x13d3bf['files']=await this[_0x356ab3(0x1d6)](_0x416526),_0x13d3bf[_0x356ab3(0x1f5)]=constants_1['BUNDLED_FOLDERS_REGEXP'][_0x356ab3(0x1e2)](_0x416526)?_0x416526:(0x0,utils_1[_0x356ab3(0x219)])({'files':_0x13d3bf['files']}),_0x416526[_0x356ab3(0x213)](_0x356ab3(0x210))?_0x13d3bf['type']='WaveTemplateBundle':_0x13d3bf[_0x356ab3(0x207)]=await(0x0,utils_1[_0x356ab3(0x1f8)])({'files':_0x13d3bf[_0x356ab3(0x1f1)]});}catch(_0x1dbe88){this[_0x356ab3(0x208)]['error'](_0x356ab3(0x1ed),_0x416526,_0x1dbe88);continue;}_0x13d3bf[_0x356ab3(0x1de)]=(0x0,utils_1[_0x356ab3(0x20d)])(_0x416526),_0x13d3bf[_0x356ab3(0x1fb)]=(0x0,crc32_1[_0x356ab3(0x218)])(_0x13d3bf);if((0x0,utils_1[_0x356ab3(0x1f3)])(_0x13d3bf)){const _0x2e0a85=await this['readChildComponents'](_0x13d3bf);_0x408a14[_0x356ab3(0x1d3)](..._0x2e0a85);}if(_0x13d3bf[_0x356ab3(0x207)]===_0x356ab3(0x1d5))continue;settings_types_list_1[_0x356ab3(0x206)]['includes'](_0x13d3bf[_0x356ab3(0x207)])&&(_0x13d3bf['type']=_0x356ab3(0x1f0)),_0x408a14[_0x356ab3(0x1d3)](_0x13d3bf);}return _0x408a14;}}exports[a182_0x1086ad(0x1eb)]=MDApiParserV2;