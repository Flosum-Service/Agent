const a205_0x3de465=a205_0x8429;(function(_0x2cf88d,_0x54f7bb){const _0x431bbb=a205_0x8429,_0x11cf01=_0x2cf88d();while(!![]){try{const _0x116226=-parseInt(_0x431bbb(0x197))/0x1+-parseInt(_0x431bbb(0x1c6))/0x2*(parseInt(_0x431bbb(0x189))/0x3)+-parseInt(_0x431bbb(0x1aa))/0x4+parseInt(_0x431bbb(0x1ad))/0x5*(-parseInt(_0x431bbb(0x19e))/0x6)+parseInt(_0x431bbb(0x17e))/0x7+parseInt(_0x431bbb(0x193))/0x8*(-parseInt(_0x431bbb(0x1c5))/0x9)+parseInt(_0x431bbb(0x1c0))/0xa;if(_0x116226===_0x54f7bb)break;else _0x11cf01['push'](_0x11cf01['shift']());}catch(_0x3ebe84){_0x11cf01['push'](_0x11cf01['shift']());}}}(a205_0x23df,0xd361a));const a205_0x5944d0=(function(){let _0x48a0b5=!![];return function(_0xd967fa,_0x107713){const _0xb33c7e=_0x48a0b5?function(){const _0x4983e2=a205_0x8429;if(_0x107713){const _0x504698=_0x107713[_0x4983e2(0x1ae)](_0xd967fa,arguments);return _0x107713=null,_0x504698;}}:function(){};return _0x48a0b5=![],_0xb33c7e;};}()),a205_0x133056=a205_0x5944d0(this,function(){const _0x1cc0c8=a205_0x8429;return a205_0x133056[_0x1cc0c8(0x191)]()[_0x1cc0c8(0x1a1)](_0x1cc0c8(0x1b5))['toString']()[_0x1cc0c8(0x17c)](a205_0x133056)[_0x1cc0c8(0x1a1)](_0x1cc0c8(0x1b5));});a205_0x133056();'use strict';var __decorate=this&&this[a205_0x3de465(0x1cd)]||function(_0x514aa4,_0x4251a7,_0x19bc8a,_0x37138f){const _0x194a78=a205_0x3de465;var _0x322047=arguments[_0x194a78(0x19f)],_0x142bcd=_0x322047<0x3?_0x4251a7:_0x37138f===null?_0x37138f=Object[_0x194a78(0x17a)](_0x4251a7,_0x19bc8a):_0x37138f,_0x4e1f30;if(typeof Reflect===_0x194a78(0x18e)&&typeof Reflect[_0x194a78(0x182)]==='function')_0x142bcd=Reflect[_0x194a78(0x182)](_0x514aa4,_0x4251a7,_0x19bc8a,_0x37138f);else{for(var _0x37e394=_0x514aa4[_0x194a78(0x19f)]-0x1;_0x37e394>=0x0;_0x37e394--)if(_0x4e1f30=_0x514aa4[_0x37e394])_0x142bcd=(_0x322047<0x3?_0x4e1f30(_0x142bcd):_0x322047>0x3?_0x4e1f30(_0x4251a7,_0x19bc8a,_0x142bcd):_0x4e1f30(_0x4251a7,_0x19bc8a))||_0x142bcd;}return _0x322047>0x3&&_0x142bcd&&Object[_0x194a78(0x1a0)](_0x4251a7,_0x19bc8a,_0x142bcd),_0x142bcd;},__metadata=this&&this[a205_0x3de465(0x1a8)]||function(_0x473274,_0x21e136){const _0x45ca48=a205_0x3de465;if(typeof Reflect===_0x45ca48(0x18e)&&typeof Reflect[_0x45ca48(0x1c1)]===_0x45ca48(0x185))return Reflect[_0x45ca48(0x1c1)](_0x473274,_0x21e136);},__param=this&&this[a205_0x3de465(0x1b4)]||function(_0x1808ca,_0xb6bea2){return function(_0xeb7ed1,_0x3c731e){_0xb6bea2(_0xeb7ed1,_0x3c731e,_0x1808ca);};},BitbucketRepoService_1;function a205_0x23df(){const _0x13b883=['/repositories/','typedi','1200348XqHFel','1573054LOosom','create','./git-repo.service','../../api/bitbucket-api.service','toLowerCase','service\x20initialization\x20done','ApiError','__decorate','Git','design:paramtypes','base\x20api\x20url:\x20','update','post','getOwnPropertyDescriptor','ERR_BITBUCKET_MISSING_PROJECT','constructor','NotFoundError','11863369GPdOVs','api','workspace','Repo','decorate','info','../repo.class','function','\x22&pagelen=','delete','../../../internal/git.internal','3OQOeLi','clientSecret:\x20','fromBitbucket','ITEMS_PER_RESPONSE','../../credentials/dto/bitbucket-credentials.dto','object','project','request','toString','repositories/','32EptCew','retrieved:\x20','credentials','get','509205MZXsyh','clientId:\x20','BadRequestError','substring','map','ERR_BITBUCKET_MISSING_WORKSPACE','master','118302caAftD','length','defineProperty','search','values','logger','GitRepoService','service\x20initialization','\x20...','createEmptyBranch','__metadata','defaultBranch','4764276PtOnXK','project:\x20','Tokens','25OdxNJF','apply','private','all\x20repositories\x20retrieved:\x20','BitbucketApiService','getAll','../../../../../core/errors/not-found.error','__param','(((.+)+)+)+$','getOne','getUri','../../../../../core','../../../../../core/errors/api.error','put','Logger','createRequest','autoInit','Service','BitbucketCredentialsDto','22899250PzsyPe','metadata','?q=project.key=\x22'];a205_0x23df=function(){return _0x13b883;};return a205_0x23df();}function a205_0x8429(_0x4bb6bd,_0x5e5690){const _0x1428d1=a205_0x23df();return a205_0x8429=function(_0x133056,_0x5944d0){_0x133056=_0x133056-0x178;let _0x23dff1=_0x1428d1[_0x133056];return _0x23dff1;},a205_0x8429(_0x4bb6bd,_0x5e5690);}Object[a205_0x3de465(0x1a0)](exports,'__esModule',{'value':!![]}),exports['BitbucketRepoService']=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a205_0x3de465(0x1b3)),bitbucket_api_service_1=require(a205_0x3de465(0x1c9)),typedi_1=require(a205_0x3de465(0x1c4)),api_error_1=require(a205_0x3de465(0x1b9)),git_internal_1=require(a205_0x3de465(0x188)),repo_class_1=require(a205_0x3de465(0x184)),git_repo_service_1=require(a205_0x3de465(0x1c8)),bitbucket_credentials_dto_1=require(a205_0x3de465(0x18d)),providers_tokens_1=require('../../providers.tokens'),core_1=require(a205_0x3de465(0x1b8));let BitbucketRepoService=BitbucketRepoService_1=class BitbucketRepoService extends git_repo_service_1[a205_0x3de465(0x1a4)]{constructor(_0x390206,_0xe9d129){const _0x1b0c0f=a205_0x3de465;super(_0x390206),this['api']=_0x390206,this['logger']=new core_1[(_0x1b0c0f(0x1bb))](BitbucketRepoService_1['name']),this[_0x1b0c0f(0x1a3)][_0x1b0c0f(0x183)](_0x1b0c0f(0x1a5)),this[_0x1b0c0f(0x1a3)][_0x1b0c0f(0x183)]('workspace:\x20'+_0xe9d129[_0x1b0c0f(0x180)]),this['logger']['info'](_0x1b0c0f(0x1ab)+_0xe9d129[_0x1b0c0f(0x18f)]),this['logger'][_0x1b0c0f(0x183)](_0x1b0c0f(0x198)+_0xe9d129['clientId']),this[_0x1b0c0f(0x1a3)][_0x1b0c0f(0x183)](_0x1b0c0f(0x18a)+_0xe9d129['clientSecret'][_0x1b0c0f(0x19a)](0x0,0x5)+_0x1b0c0f(0x1a6)),this[_0x1b0c0f(0x190)]=_0x390206[_0x1b0c0f(0x1bc)](),this['project']=_0xe9d129[_0x1b0c0f(0x18f)],this[_0x1b0c0f(0x180)]=_0xe9d129[_0x1b0c0f(0x180)],this[_0x1b0c0f(0x195)]=_0xe9d129;if(!this[_0x1b0c0f(0x180)])throw new Error(errors_1[_0x1b0c0f(0x19c)]);if(!this[_0x1b0c0f(0x18f)])throw new Error(errors_1[_0x1b0c0f(0x17b)]);this[_0x1b0c0f(0x1a3)][_0x1b0c0f(0x183)](_0x1b0c0f(0x1cb));}async[a205_0x3de465(0x1c7)](_0x4009a1){const _0x3822ee=a205_0x3de465;try{const {name:_0x5f4d1a}=_0x4009a1,_0xc440f4={'name':_0x4009a1['name'],'is_private':_0x4009a1[_0x3822ee(0x1af)],..._0x4009a1['apiBody']||{},'project':{'key':this['project']}},_0x2d4ad7=await this[_0x3822ee(0x190)][_0x3822ee(0x179)](_0x3822ee(0x1c3)+this['workspace']+'/'+_0x5f4d1a[_0x3822ee(0x1ca)](),_0xc440f4),_0x4f1db5=repo_class_1[_0x3822ee(0x181)][_0x3822ee(0x18b)](_0x2d4ad7,this[_0x3822ee(0x17f)],this[_0x3822ee(0x195)]);return _0x4009a1[_0x3822ee(0x1bd)]&&(await git_internal_1[_0x3822ee(0x1ce)][_0x3822ee(0x1a7)](_0x4f1db5,_0x4009a1[_0x3822ee(0x1a9)]||_0x3822ee(0x19d),'',this['credentials']),_0x4f1db5[_0x3822ee(0x1a9)]=_0x4009a1['defaultBranch']||_0x3822ee(0x19d)),_0x4f1db5;}catch(_0x5a8cd2){if(_0x5a8cd2 instanceof api_error_1['ApiError'])throw _0x5a8cd2;throw new bad_request_error_1[(_0x3822ee(0x199))](_0x5a8cd2);}}async[a205_0x3de465(0x1b2)](){const _0x125c0f=a205_0x3de465;try{const _0xaa8e81=[];let _0x22623f,_0x46701e=_0x125c0f(0x192)+this[_0x125c0f(0x180)]+_0x125c0f(0x1c2)+this[_0x125c0f(0x18f)]+_0x125c0f(0x186)+BitbucketRepoService_1[_0x125c0f(0x18c)];this[_0x125c0f(0x1a3)]['info'](_0x125c0f(0x1d0)+this[_0x125c0f(0x190)][_0x125c0f(0x1b7)]()),this['logger'][_0x125c0f(0x183)]('request\x20to\x20get\x20all\x20project\x20repositories:\x20'+_0x46701e);do{_0x22623f=await this[_0x125c0f(0x190)][_0x125c0f(0x196)](_0x46701e),_0x46701e=_0x22623f['next'],_0xaa8e81['push'](..._0x22623f[_0x125c0f(0x1a2)]),this['logger'][_0x125c0f(0x183)](_0x125c0f(0x194)+_0xaa8e81[_0x125c0f(0x19f)]);}while(_0x46701e);return this['logger'][_0x125c0f(0x183)](_0x125c0f(0x1b0)+_0xaa8e81['length']),_0xaa8e81[_0x125c0f(0x19b)](_0x1187eb=>repo_class_1[_0x125c0f(0x181)][_0x125c0f(0x18b)](_0x1187eb,this['api'],this[_0x125c0f(0x195)]));}catch(_0x40144a){if(_0x40144a instanceof api_error_1[_0x125c0f(0x1cc)])throw _0x40144a;throw new not_found_error_1[(_0x125c0f(0x17d))](_0x40144a);}}async[a205_0x3de465(0x1b6)](_0x4b9d83){const _0x46ad0e=a205_0x3de465;try{const _0x424d04=await this[_0x46ad0e(0x190)][_0x46ad0e(0x196)](_0x46ad0e(0x192)+this[_0x46ad0e(0x180)]+'/'+_0x4b9d83[_0x46ad0e(0x1ca)]());return repo_class_1[_0x46ad0e(0x181)][_0x46ad0e(0x18b)](_0x424d04,this[_0x46ad0e(0x17f)],this['credentials']);}catch(_0x1dacf4){if(_0x1dacf4 instanceof api_error_1['ApiError'])throw _0x1dacf4;throw new not_found_error_1[(_0x46ad0e(0x17d))](_0x1dacf4);}}async[a205_0x3de465(0x178)](_0x227d2d,_0x23cf52){const _0x299a58=a205_0x3de465;await this[_0x299a58(0x1b6)](_0x227d2d);try{const _0x5e3547=await this[_0x299a58(0x190)][_0x299a58(0x1ba)](_0x299a58(0x192)+this[_0x299a58(0x180)]+'/'+_0x227d2d['toLowerCase'](),_0x23cf52);return repo_class_1['Repo']['fromBitbucket'](_0x5e3547,this['api'],this[_0x299a58(0x195)]);}catch(_0x49a11f){if(_0x49a11f instanceof api_error_1[_0x299a58(0x1cc)])throw _0x49a11f;throw new not_found_error_1['NotFoundError'](_0x49a11f);}}async[a205_0x3de465(0x187)](_0x19b754){const _0x4ce04c=a205_0x3de465;try{await this[_0x4ce04c(0x190)][_0x4ce04c(0x187)](_0x4ce04c(0x192)+this[_0x4ce04c(0x180)]+'/'+_0x19b754[_0x4ce04c(0x1ca)]());}catch(_0x51f076){if(_0x51f076 instanceof api_error_1[_0x4ce04c(0x1cc)])throw _0x51f076;throw new bad_request_error_1['BadRequestError'](_0x51f076);}}};BitbucketRepoService[a205_0x3de465(0x18c)]=0x64,BitbucketRepoService=BitbucketRepoService_1=__decorate([(0x0,typedi_1[a205_0x3de465(0x1be)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a205_0x3de465(0x1ac)][a205_0x3de465(0x195)])),__metadata(a205_0x3de465(0x1cf),[bitbucket_api_service_1[a205_0x3de465(0x1b1)],bitbucket_credentials_dto_1[a205_0x3de465(0x1bf)]])],BitbucketRepoService),exports['BitbucketRepoService']=BitbucketRepoService;