const a200_0x2be604=a200_0x34ff;function a200_0x34ff(_0x379407,_0x163b7f){const _0x30876a=a200_0x2d84();return a200_0x34ff=function(_0x59caf0,_0x3f0858){_0x59caf0=_0x59caf0-0xf6;let _0x2d843b=_0x30876a[_0x59caf0];return _0x2d843b;},a200_0x34ff(_0x379407,_0x163b7f);}(function(_0x3af795,_0x4598ee){const _0x4b56b1=a200_0x34ff,_0x37d5ad=_0x3af795();while(!![]){try{const _0x2c1c1e=-parseInt(_0x4b56b1(0x117))/0x1+-parseInt(_0x4b56b1(0x134))/0x2*(parseInt(_0x4b56b1(0x12b))/0x3)+parseInt(_0x4b56b1(0x106))/0x4+parseInt(_0x4b56b1(0xf8))/0x5*(-parseInt(_0x4b56b1(0x119))/0x6)+-parseInt(_0x4b56b1(0x10e))/0x7*(parseInt(_0x4b56b1(0x138))/0x8)+-parseInt(_0x4b56b1(0x12e))/0x9*(parseInt(_0x4b56b1(0x108))/0xa)+parseInt(_0x4b56b1(0x133))/0xb;if(_0x2c1c1e===_0x4598ee)break;else _0x37d5ad['push'](_0x37d5ad['shift']());}catch(_0xd9280f){_0x37d5ad['push'](_0x37d5ad['shift']());}}}(a200_0x2d84,0x2e43c));function a200_0x2d84(){const _0x407094=['apply','api','GitRepoService','apiBody','__metadata','__esModule','419812vGezEH','defineProperty','20EsgByu','../../../../../core/errors/api.error','BitbucketRepoService','Git','delete','../../providers.tokens','309589tFnhjm','search','metadata','repositories/','next','../../../../../constants/errors','workspace','../../../../../core/errors/bad-request.error','Service','319425egnXcW','decorate','4566axLxcC','Tokens','NotFoundError','project','put','getOne','toLowerCase','Inject','BadRequestError','../../credentials/dto/bitbucket-credentials.dto','name','getOwnPropertyDescriptor','object','update','push','credentials','../../../../../core/errors/not-found.error','toString','30ntQKtm','function','__param','454113pupqAG','Repo','request','fromBitbucket','ApiError','15824842nrSVjH','58488AbqDCb','master','BitbucketCredentialsDto','./git-repo.service','48GYSVXn','createEmptyBranch','defaultBranch','2470vFWcBz','getAll','ERR_BITBUCKET_MISSING_PROJECT','length','(((.+)+)+)+$','autoInit','map','get'];a200_0x2d84=function(){return _0x407094;};return a200_0x2d84();}const a200_0x3f0858=(function(){let _0x13545a=!![];return function(_0x2bbf3c,_0x3c811f){const _0xc35d65=_0x13545a?function(){const _0x399bba=a200_0x34ff;if(_0x3c811f){const _0x48d3a6=_0x3c811f[_0x399bba(0x100)](_0x2bbf3c,arguments);return _0x3c811f=null,_0x48d3a6;}}:function(){};return _0x13545a=![],_0xc35d65;};}()),a200_0x59caf0=a200_0x3f0858(this,function(){const _0x55d4d8=a200_0x34ff;return a200_0x59caf0[_0x55d4d8(0x12a)]()['search'](_0x55d4d8(0xfc))[_0x55d4d8(0x12a)]()['constructor'](a200_0x59caf0)[_0x55d4d8(0x10f)](_0x55d4d8(0xfc));});a200_0x59caf0();'use strict';var __decorate=this&&this['__decorate']||function(_0x18a364,_0x24f68c,_0x1f6bfd,_0x2d066a){const _0x3a3970=a200_0x34ff;var _0x16290d=arguments['length'],_0x478e30=_0x16290d<0x3?_0x24f68c:_0x2d066a===null?_0x2d066a=Object[_0x3a3970(0x124)](_0x24f68c,_0x1f6bfd):_0x2d066a,_0x31c8cc;if(typeof Reflect===_0x3a3970(0x125)&&typeof Reflect['decorate']===_0x3a3970(0x12c))_0x478e30=Reflect[_0x3a3970(0x118)](_0x18a364,_0x24f68c,_0x1f6bfd,_0x2d066a);else{for(var _0x317ec9=_0x18a364[_0x3a3970(0xfb)]-0x1;_0x317ec9>=0x0;_0x317ec9--)if(_0x31c8cc=_0x18a364[_0x317ec9])_0x478e30=(_0x16290d<0x3?_0x31c8cc(_0x478e30):_0x16290d>0x3?_0x31c8cc(_0x24f68c,_0x1f6bfd,_0x478e30):_0x31c8cc(_0x24f68c,_0x1f6bfd))||_0x478e30;}return _0x16290d>0x3&&_0x478e30&&Object[_0x3a3970(0x107)](_0x24f68c,_0x1f6bfd,_0x478e30),_0x478e30;},__metadata=this&&this[a200_0x2be604(0x104)]||function(_0x57524b,_0x5a5057){const _0x5dd6e2=a200_0x2be604;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x5dd6e2(0x12c))return Reflect[_0x5dd6e2(0x110)](_0x57524b,_0x5a5057);},__param=this&&this[a200_0x2be604(0x12d)]||function(_0x32f24a,_0x1a3776){return function(_0x14eff4,_0x1920a4){_0x1a3776(_0x14eff4,_0x1920a4,_0x32f24a);};};Object[a200_0x2be604(0x107)](exports,a200_0x2be604(0x105),{'value':!![]}),exports[a200_0x2be604(0x10a)]=void 0x0;const errors_1=require(a200_0x2be604(0x113)),bad_request_error_1=require(a200_0x2be604(0x115)),not_found_error_1=require(a200_0x2be604(0x129)),bitbucket_api_service_1=require('../../api/bitbucket-api.service'),typedi_1=require('typedi'),api_error_1=require(a200_0x2be604(0x109)),git_internal_1=require('../../../internal/git.internal'),repo_class_1=require('../repo.class'),git_repo_service_1=require(a200_0x2be604(0x137)),bitbucket_credentials_dto_1=require(a200_0x2be604(0x122)),providers_tokens_1=require(a200_0x2be604(0x10d));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a200_0x2be604(0x102)]{constructor(_0x2d1254,_0x77d075){const _0x254cc8=a200_0x2be604;super(_0x2d1254),this[_0x254cc8(0x101)]=_0x2d1254,this[_0x254cc8(0x130)]=_0x2d1254['createRequest'](),this[_0x254cc8(0x11c)]=_0x77d075[_0x254cc8(0x11c)],this[_0x254cc8(0x114)]=_0x77d075[_0x254cc8(0x114)],this[_0x254cc8(0x128)]=_0x77d075;if(!this['workspace'])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x254cc8(0x11c)])throw new Error(errors_1[_0x254cc8(0xfa)]);}async['create'](_0x57191b){const _0x2aa88d=a200_0x2be604;try{const {name:_0x2d326b}=_0x57191b,_0x13900c={'name':_0x57191b[_0x2aa88d(0x123)],'is_private':_0x57191b['private'],..._0x57191b[_0x2aa88d(0x103)]||{},'project':{'key':this[_0x2aa88d(0x11c)]}},_0x517869=await this[_0x2aa88d(0x130)]['post']('/repositories/'+this[_0x2aa88d(0x114)]+'/'+_0x2d326b['toLowerCase'](),_0x13900c),_0x309af3=repo_class_1[_0x2aa88d(0x12f)][_0x2aa88d(0x131)](_0x517869,this[_0x2aa88d(0x101)],this['credentials']);return _0x57191b[_0x2aa88d(0xfd)]&&(await git_internal_1[_0x2aa88d(0x10b)][_0x2aa88d(0xf6)](_0x309af3,_0x57191b[_0x2aa88d(0xf7)]||_0x2aa88d(0x135),'',this[_0x2aa88d(0x128)]),_0x309af3['defaultBranch']=_0x57191b[_0x2aa88d(0xf7)]||_0x2aa88d(0x135)),_0x309af3;}catch(_0x145723){if(_0x145723 instanceof api_error_1['ApiError'])throw _0x145723;throw new bad_request_error_1[(_0x2aa88d(0x121))](_0x145723);}}async[a200_0x2be604(0xf9)](){const _0x20fd3d=a200_0x2be604;try{const _0x2b9809=[];let _0xb23d10;do{_0xb23d10=await this[_0x20fd3d(0x130)][_0x20fd3d(0xff)](_0xb23d10?_0xb23d10['next']:_0x20fd3d(0x111)+this[_0x20fd3d(0x114)]),_0x2b9809[_0x20fd3d(0x127)](..._0xb23d10['values']);}while(_0xb23d10[_0x20fd3d(0x112)]);return _0x2b9809[_0x20fd3d(0xfe)](_0x19bc64=>repo_class_1['Repo']['fromBitbucket'](_0x19bc64,this[_0x20fd3d(0x101)],this[_0x20fd3d(0x128)]));}catch(_0x291620){if(_0x291620 instanceof api_error_1[_0x20fd3d(0x132)])throw _0x291620;throw new not_found_error_1[(_0x20fd3d(0x11b))](_0x291620);}}async[a200_0x2be604(0x11e)](_0x42221d){const _0x203bfe=a200_0x2be604;try{const _0x11e803=await this[_0x203bfe(0x130)][_0x203bfe(0xff)](_0x203bfe(0x111)+this[_0x203bfe(0x114)]+'/'+_0x42221d['toLowerCase']());return repo_class_1[_0x203bfe(0x12f)][_0x203bfe(0x131)](_0x11e803,this[_0x203bfe(0x101)],this[_0x203bfe(0x128)]);}catch(_0x342b0){if(_0x342b0 instanceof api_error_1[_0x203bfe(0x132)])throw _0x342b0;throw new not_found_error_1[(_0x203bfe(0x11b))](_0x342b0);}}async[a200_0x2be604(0x126)](_0x34d216,_0x5d1f49){const _0x3fa590=a200_0x2be604;await this[_0x3fa590(0x11e)](_0x34d216);try{const _0x49fa9b=await this[_0x3fa590(0x130)][_0x3fa590(0x11d)](_0x3fa590(0x111)+this[_0x3fa590(0x114)]+'/'+_0x34d216[_0x3fa590(0x11f)](),_0x5d1f49);return repo_class_1[_0x3fa590(0x12f)][_0x3fa590(0x131)](_0x49fa9b,this[_0x3fa590(0x101)],this[_0x3fa590(0x128)]);}catch(_0x5235fe){if(_0x5235fe instanceof api_error_1['ApiError'])throw _0x5235fe;throw new not_found_error_1[(_0x3fa590(0x11b))](_0x5235fe);}}async[a200_0x2be604(0x10c)](_0x3cea4c){const _0x4dafc2=a200_0x2be604;try{await this[_0x4dafc2(0x130)][_0x4dafc2(0x10c)](_0x4dafc2(0x111)+this[_0x4dafc2(0x114)]+'/'+_0x3cea4c[_0x4dafc2(0x11f)]());}catch(_0x52666f){if(_0x52666f instanceof api_error_1['ApiError'])throw _0x52666f;throw new bad_request_error_1['BadRequestError'](_0x52666f);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a200_0x2be604(0x116)])(),__param(0x1,(0x0,typedi_1[a200_0x2be604(0x120)])(providers_tokens_1[a200_0x2be604(0x11a)][a200_0x2be604(0x128)])),__metadata('design:paramtypes',[bitbucket_api_service_1['BitbucketApiService'],bitbucket_credentials_dto_1[a200_0x2be604(0x136)]])],BitbucketRepoService),exports['BitbucketRepoService']=BitbucketRepoService;