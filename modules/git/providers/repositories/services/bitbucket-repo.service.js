const a200_0x81fd2b=a200_0x3f68;function a200_0x3f68(_0x1a2154,_0x4c0be0){const _0x3126c2=a200_0x4b5c();return a200_0x3f68=function(_0x2d15e3,_0x165af0){_0x2d15e3=_0x2d15e3-0x8d;let _0x4b5ca1=_0x3126c2[_0x2d15e3];return _0x4b5ca1;},a200_0x3f68(_0x1a2154,_0x4c0be0);}function a200_0x4b5c(){const _0x13bdcd=['BadRequestError','repositories/','/repositories/','69383KfCWXC','master','post','../../credentials/dto/bitbucket-credentials.dto','workspace','private','__decorate','metadata','Tokens','next','typedi','(((.+)+)+)+$','__esModule','GitRepoService','create','name','Git','getAll','Service','apply','object','1122808VRedps','ApiError','3742585zecoCo','Inject','autoInit','push','defineProperty','9VUeHxb','constructor','getOne','toString','credentials','../../../../../core/errors/not-found.error','createRequest','decorate','BitbucketApiService','ERR_BITBUCKET_MISSING_PROJECT','../../../../../constants/errors','search','delete','100kAGPwN','defaultBranch','api','513207zZaEju','fromBitbucket','update','NotFoundError','Repo','function','../../../../../core/errors/bad-request.error','BitbucketRepoService','map','4NmeuCS','get','length','ERR_BITBUCKET_MISSING_WORKSPACE','request','__param','1339890CijUym','2955750xKiVmZ','toLowerCase','../../api/bitbucket-api.service','3745088zuQwOP','getOwnPropertyDescriptor','BitbucketCredentialsDto','apiBody','project','../../providers.tokens'];a200_0x4b5c=function(){return _0x13bdcd;};return a200_0x4b5c();}(function(_0x31c785,_0x44448e){const _0x4549de=a200_0x3f68,_0xc9daf8=_0x31c785();while(!![]){try{const _0x369c79=-parseInt(_0x4549de(0x91))/0x1*(-parseInt(_0x4549de(0xc6))/0x2)+parseInt(_0x4549de(0xad))/0x3*(-parseInt(_0x4549de(0xa6))/0x4)+parseInt(_0x4549de(0xcc))/0x5+parseInt(_0x4549de(0xcd))/0x6+parseInt(_0x4549de(0xa8))/0x7+parseInt(_0x4549de(0xd0))/0x8+-parseInt(_0x4549de(0xbd))/0x9*(parseInt(_0x4549de(0xba))/0xa);if(_0x369c79===_0x44448e)break;else _0xc9daf8['push'](_0xc9daf8['shift']());}catch(_0x3ff8cb){_0xc9daf8['push'](_0xc9daf8['shift']());}}}(a200_0x4b5c,0x77960));const a200_0x165af0=(function(){let _0x375cea=!![];return function(_0x2e0ff0,_0x35d91b){const _0x47ee41=_0x375cea?function(){const _0x3e73a8=a200_0x3f68;if(_0x35d91b){const _0x295db4=_0x35d91b[_0x3e73a8(0xa4)](_0x2e0ff0,arguments);return _0x35d91b=null,_0x295db4;}}:function(){};return _0x375cea=![],_0x47ee41;};}()),a200_0x2d15e3=a200_0x165af0(this,function(){const _0x3097ff=a200_0x3f68;return a200_0x2d15e3[_0x3097ff(0xb0)]()[_0x3097ff(0xb8)](_0x3097ff(0x9c))[_0x3097ff(0xb0)]()[_0x3097ff(0xae)](a200_0x2d15e3)[_0x3097ff(0xb8)](_0x3097ff(0x9c));});a200_0x2d15e3();'use strict';var __decorate=this&&this[a200_0x81fd2b(0x97)]||function(_0x1c44b4,_0x26cc7b,_0x5132fc,_0x126ad8){const _0x10ddd7=a200_0x81fd2b;var _0x1f8b30=arguments[_0x10ddd7(0xc8)],_0x22d17e=_0x1f8b30<0x3?_0x26cc7b:_0x126ad8===null?_0x126ad8=Object[_0x10ddd7(0xd1)](_0x26cc7b,_0x5132fc):_0x126ad8,_0x566600;if(typeof Reflect===_0x10ddd7(0xa5)&&typeof Reflect['decorate']===_0x10ddd7(0xc2))_0x22d17e=Reflect[_0x10ddd7(0xb4)](_0x1c44b4,_0x26cc7b,_0x5132fc,_0x126ad8);else{for(var _0x57aef1=_0x1c44b4[_0x10ddd7(0xc8)]-0x1;_0x57aef1>=0x0;_0x57aef1--)if(_0x566600=_0x1c44b4[_0x57aef1])_0x22d17e=(_0x1f8b30<0x3?_0x566600(_0x22d17e):_0x1f8b30>0x3?_0x566600(_0x26cc7b,_0x5132fc,_0x22d17e):_0x566600(_0x26cc7b,_0x5132fc))||_0x22d17e;}return _0x1f8b30>0x3&&_0x22d17e&&Object[_0x10ddd7(0xac)](_0x26cc7b,_0x5132fc,_0x22d17e),_0x22d17e;},__metadata=this&&this['__metadata']||function(_0xf8f727,_0x412170){const _0x5640da=a200_0x81fd2b;if(typeof Reflect===_0x5640da(0xa5)&&typeof Reflect[_0x5640da(0x98)]==='function')return Reflect[_0x5640da(0x98)](_0xf8f727,_0x412170);},__param=this&&this[a200_0x81fd2b(0xcb)]||function(_0x49b689,_0x24307a){return function(_0x3d5762,_0xc177ce){_0x24307a(_0x3d5762,_0xc177ce,_0x49b689);};};Object[a200_0x81fd2b(0xac)](exports,a200_0x81fd2b(0x9d),{'value':!![]}),exports[a200_0x81fd2b(0xc4)]=void 0x0;const errors_1=require(a200_0x81fd2b(0xb7)),bad_request_error_1=require(a200_0x81fd2b(0xc3)),not_found_error_1=require(a200_0x81fd2b(0xb2)),bitbucket_api_service_1=require(a200_0x81fd2b(0xcf)),typedi_1=require(a200_0x81fd2b(0x9b)),api_error_1=require('../../../../../core/errors/api.error'),git_internal_1=require('../../../internal/git.internal'),repo_class_1=require('../repo.class'),git_repo_service_1=require('./git-repo.service'),bitbucket_credentials_dto_1=require(a200_0x81fd2b(0x94)),providers_tokens_1=require(a200_0x81fd2b(0x8d));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a200_0x81fd2b(0x9e)]{constructor(_0x221177,_0x5d046f){const _0x3902e4=a200_0x81fd2b;super(_0x221177),this[_0x3902e4(0xbc)]=_0x221177,this['request']=_0x221177[_0x3902e4(0xb3)](),this[_0x3902e4(0xd4)]=_0x5d046f['project'],this['workspace']=_0x5d046f[_0x3902e4(0x95)],this[_0x3902e4(0xb1)]=_0x5d046f;if(!this[_0x3902e4(0x95)])throw new Error(errors_1[_0x3902e4(0xc9)]);if(!this[_0x3902e4(0xd4)])throw new Error(errors_1[_0x3902e4(0xb6)]);}async[a200_0x81fd2b(0x9f)](_0x139d24){const _0x428178=a200_0x81fd2b;try{const {name:_0x27c339}=_0x139d24,_0x5b1901={'name':_0x139d24[_0x428178(0xa0)],'is_private':_0x139d24[_0x428178(0x96)],..._0x139d24[_0x428178(0xd3)]||{},'project':{'key':this[_0x428178(0xd4)]}},_0x4fbf4a=await this[_0x428178(0xca)][_0x428178(0x93)](_0x428178(0x90)+this[_0x428178(0x95)]+'/'+_0x27c339['toLowerCase'](),_0x5b1901),_0x5ba2ae=repo_class_1[_0x428178(0xc1)]['fromBitbucket'](_0x4fbf4a,this[_0x428178(0xbc)],this['credentials']);return _0x139d24[_0x428178(0xaa)]&&(await git_internal_1[_0x428178(0xa1)]['createEmptyBranch'](_0x5ba2ae,_0x139d24[_0x428178(0xbb)]||_0x428178(0x92),'',this[_0x428178(0xb1)]),_0x5ba2ae[_0x428178(0xbb)]=_0x139d24[_0x428178(0xbb)]||'master'),_0x5ba2ae;}catch(_0x27a425){if(_0x27a425 instanceof api_error_1[_0x428178(0xa7)])throw _0x27a425;throw new bad_request_error_1[(_0x428178(0x8e))](_0x27a425);}}async[a200_0x81fd2b(0xa2)](){const _0x3a8c34=a200_0x81fd2b;try{const _0x5662a1=[];let _0x5ce1de;do{_0x5ce1de=await this['request'][_0x3a8c34(0xc7)](_0x5ce1de?_0x5ce1de[_0x3a8c34(0x9a)]:_0x3a8c34(0x8f)+this[_0x3a8c34(0x95)]),_0x5662a1[_0x3a8c34(0xab)](..._0x5ce1de['values']);}while(_0x5ce1de[_0x3a8c34(0x9a)]);return _0x5662a1[_0x3a8c34(0xc5)](_0x290df8=>repo_class_1['Repo'][_0x3a8c34(0xbe)](_0x290df8,this[_0x3a8c34(0xbc)],this[_0x3a8c34(0xb1)]));}catch(_0x3ed1c4){if(_0x3ed1c4 instanceof api_error_1[_0x3a8c34(0xa7)])throw _0x3ed1c4;throw new not_found_error_1[(_0x3a8c34(0xc0))](_0x3ed1c4);}}async[a200_0x81fd2b(0xaf)](_0x382b5b){const _0x33c4e5=a200_0x81fd2b;try{const _0x28eaf5=await this[_0x33c4e5(0xca)][_0x33c4e5(0xc7)]('repositories/'+this['workspace']+'/'+_0x382b5b[_0x33c4e5(0xce)]());return repo_class_1['Repo']['fromBitbucket'](_0x28eaf5,this[_0x33c4e5(0xbc)],this['credentials']);}catch(_0x20ada3){if(_0x20ada3 instanceof api_error_1[_0x33c4e5(0xa7)])throw _0x20ada3;throw new not_found_error_1[(_0x33c4e5(0xc0))](_0x20ada3);}}async[a200_0x81fd2b(0xbf)](_0x2f15fc,_0x260576){const _0x13d73c=a200_0x81fd2b;await this[_0x13d73c(0xaf)](_0x2f15fc);try{const _0x15a290=await this['request']['put'](_0x13d73c(0x8f)+this[_0x13d73c(0x95)]+'/'+_0x2f15fc[_0x13d73c(0xce)](),_0x260576);return repo_class_1['Repo'][_0x13d73c(0xbe)](_0x15a290,this[_0x13d73c(0xbc)],this[_0x13d73c(0xb1)]);}catch(_0x177004){if(_0x177004 instanceof api_error_1[_0x13d73c(0xa7)])throw _0x177004;throw new not_found_error_1[(_0x13d73c(0xc0))](_0x177004);}}async[a200_0x81fd2b(0xb9)](_0x7abb5a){const _0x1cf452=a200_0x81fd2b;try{await this[_0x1cf452(0xca)][_0x1cf452(0xb9)](_0x1cf452(0x8f)+this[_0x1cf452(0x95)]+'/'+_0x7abb5a[_0x1cf452(0xce)]());}catch(_0x48a35d){if(_0x48a35d instanceof api_error_1[_0x1cf452(0xa7)])throw _0x48a35d;throw new bad_request_error_1[(_0x1cf452(0x8e))](_0x48a35d);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a200_0x81fd2b(0xa3)])(),__param(0x1,(0x0,typedi_1[a200_0x81fd2b(0xa9)])(providers_tokens_1[a200_0x81fd2b(0x99)][a200_0x81fd2b(0xb1)])),__metadata('design:paramtypes',[bitbucket_api_service_1[a200_0x81fd2b(0xb5)],bitbucket_credentials_dto_1[a200_0x81fd2b(0xd2)]])],BitbucketRepoService),exports[a200_0x81fd2b(0xc4)]=BitbucketRepoService;