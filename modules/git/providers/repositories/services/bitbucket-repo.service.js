const a199_0xfd2aeb=a199_0x2715;(function(_0x26868d,_0x2b62f8){const _0x51ca8b=a199_0x2715,_0x64b0f0=_0x26868d();while(!![]){try{const _0x3cd521=-parseInt(_0x51ca8b(0x198))/0x1+parseInt(_0x51ca8b(0x1c9))/0x2+-parseInt(_0x51ca8b(0x196))/0x3+parseInt(_0x51ca8b(0x19e))/0x4+-parseInt(_0x51ca8b(0x1c7))/0x5+parseInt(_0x51ca8b(0x1b7))/0x6+parseInt(_0x51ca8b(0x1a9))/0x7;if(_0x3cd521===_0x2b62f8)break;else _0x64b0f0['push'](_0x64b0f0['shift']());}catch(_0x296f32){_0x64b0f0['push'](_0x64b0f0['shift']());}}}(a199_0x17ff,0xcf10a));const a199_0x511a16=(function(){let _0x3ef2ce=!![];return function(_0x5f56d9,_0x3347f3){const _0x2437d8=_0x3ef2ce?function(){const _0x52cabf=a199_0x2715;if(_0x3347f3){const _0x1722ba=_0x3347f3[_0x52cabf(0x1bb)](_0x5f56d9,arguments);return _0x3347f3=null,_0x1722ba;}}:function(){};return _0x3ef2ce=![],_0x2437d8;};}()),a199_0x36086d=a199_0x511a16(this,function(){const _0x3bca29=a199_0x2715;return a199_0x36086d[_0x3bca29(0x1ae)]()[_0x3bca29(0x18f)](_0x3bca29(0x1c2))[_0x3bca29(0x1ae)]()[_0x3bca29(0x19f)](a199_0x36086d)[_0x3bca29(0x18f)]('(((.+)+)+)+$');});function a199_0x2715(_0x1a204a,_0x56b839){const _0x362174=a199_0x17ff();return a199_0x2715=function(_0x36086d,_0x511a16){_0x36086d=_0x36086d-0x18c;let _0x17ff29=_0x362174[_0x36086d];return _0x17ff29;},a199_0x2715(_0x1a204a,_0x56b839);}a199_0x36086d();'use strict';var __decorate=this&&this[a199_0xfd2aeb(0x1af)]||function(_0x41a9d6,_0x5e4b31,_0x16622d,_0x532124){const _0x583f36=a199_0xfd2aeb;var _0x2d5aa9=arguments[_0x583f36(0x1b2)],_0x95ad01=_0x2d5aa9<0x3?_0x5e4b31:_0x532124===null?_0x532124=Object[_0x583f36(0x19a)](_0x5e4b31,_0x16622d):_0x532124,_0x54eb34;if(typeof Reflect===_0x583f36(0x19d)&&typeof Reflect[_0x583f36(0x1be)]===_0x583f36(0x193))_0x95ad01=Reflect[_0x583f36(0x1be)](_0x41a9d6,_0x5e4b31,_0x16622d,_0x532124);else{for(var _0x85cc6f=_0x41a9d6[_0x583f36(0x1b2)]-0x1;_0x85cc6f>=0x0;_0x85cc6f--)if(_0x54eb34=_0x41a9d6[_0x85cc6f])_0x95ad01=(_0x2d5aa9<0x3?_0x54eb34(_0x95ad01):_0x2d5aa9>0x3?_0x54eb34(_0x5e4b31,_0x16622d,_0x95ad01):_0x54eb34(_0x5e4b31,_0x16622d))||_0x95ad01;}return _0x2d5aa9>0x3&&_0x95ad01&&Object[_0x583f36(0x1a0)](_0x5e4b31,_0x16622d,_0x95ad01),_0x95ad01;},__metadata=this&&this[a199_0xfd2aeb(0x1c6)]||function(_0xcefe35,_0x20ad38){const _0x3cdd60=a199_0xfd2aeb;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x3cdd60(0x193))return Reflect[_0x3cdd60(0x1c4)](_0xcefe35,_0x20ad38);},__param=this&&this['__param']||function(_0x685f0e,_0x3f577f){return function(_0x53651b,_0x3e7475){_0x3f577f(_0x53651b,_0x3e7475,_0x685f0e);};};Object[a199_0xfd2aeb(0x1a0)](exports,'__esModule',{'value':!![]}),exports[a199_0xfd2aeb(0x1bf)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a199_0xfd2aeb(0x19b)),not_found_error_1=require(a199_0xfd2aeb(0x1c8)),bitbucket_api_service_1=require('../../api/bitbucket-api.service'),typedi_1=require('typedi'),api_error_1=require(a199_0xfd2aeb(0x1a7)),git_internal_1=require(a199_0xfd2aeb(0x1b1)),repo_class_1=require('../repo.class'),git_repo_service_1=require('./git-repo.service'),bitbucket_credentials_dto_1=require(a199_0xfd2aeb(0x190)),providers_tokens_1=require('../../providers.tokens');let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a199_0xfd2aeb(0x18d)]{constructor(_0x39e9fb,_0x5b915e){const _0x2958d8=a199_0xfd2aeb;super(_0x39e9fb),this[_0x2958d8(0x1a5)]=_0x39e9fb,this[_0x2958d8(0x1b6)]=_0x39e9fb['createRequest'](),this[_0x2958d8(0x1a2)]=_0x5b915e[_0x2958d8(0x1a2)],this[_0x2958d8(0x1a8)]=_0x5b915e[_0x2958d8(0x1a8)],this[_0x2958d8(0x1c3)]=_0x5b915e;if(!this[_0x2958d8(0x1a8)])throw new Error(errors_1[_0x2958d8(0x1b8)]);if(!this[_0x2958d8(0x1a2)])throw new Error(errors_1[_0x2958d8(0x18e)]);}async[a199_0xfd2aeb(0x197)](_0x44af9d){const _0x4540f0=a199_0xfd2aeb;try{const {name:_0x2d56d8}=_0x44af9d,_0x4274ed={'name':_0x44af9d[_0x4540f0(0x1c1)],'is_private':_0x44af9d[_0x4540f0(0x199)],..._0x44af9d['apiBody']||{},'project':{'key':this[_0x4540f0(0x1a2)]}},_0x5d2ca6=await this['request'][_0x4540f0(0x1c0)](_0x4540f0(0x19c)+this[_0x4540f0(0x1a8)]+'/'+_0x2d56d8[_0x4540f0(0x1ca)](),_0x4274ed),_0x26d438=repo_class_1[_0x4540f0(0x1bd)]['fromBitbucket'](_0x5d2ca6,this['api'],this[_0x4540f0(0x1c3)]);return _0x44af9d[_0x4540f0(0x1b3)]&&(await git_internal_1[_0x4540f0(0x192)][_0x4540f0(0x194)](_0x26d438,_0x44af9d['defaultBranch']||_0x4540f0(0x1a6),'',this[_0x4540f0(0x1c3)]),_0x26d438['defaultBranch']=_0x44af9d[_0x4540f0(0x1c5)]||_0x4540f0(0x1a6)),_0x26d438;}catch(_0x58fa39){if(_0x58fa39 instanceof api_error_1[_0x4540f0(0x1b9)])throw _0x58fa39;throw new bad_request_error_1['BadRequestError'](_0x58fa39);}}async[a199_0xfd2aeb(0x1b5)](){const _0x4903a0=a199_0xfd2aeb;try{const _0x4796f4=[];let _0x2fd0e9;do{_0x2fd0e9=await this[_0x4903a0(0x1b6)][_0x4903a0(0x18c)](_0x2fd0e9?_0x2fd0e9['next']:'repositories/'+this['workspace']),_0x4796f4[_0x4903a0(0x1ab)](..._0x2fd0e9[_0x4903a0(0x1aa)]);}while(_0x2fd0e9['next']);return _0x4796f4['map'](_0x4bec8f=>repo_class_1[_0x4903a0(0x1bd)][_0x4903a0(0x195)](_0x4bec8f,this[_0x4903a0(0x1a5)],this['credentials']));}catch(_0x61f8f4){if(_0x61f8f4 instanceof api_error_1[_0x4903a0(0x1b9)])throw _0x61f8f4;throw new not_found_error_1[(_0x4903a0(0x1a4))](_0x61f8f4);}}async[a199_0xfd2aeb(0x1ac)](_0x26cce3){const _0x5e3a4b=a199_0xfd2aeb;try{const _0x22e634=await this[_0x5e3a4b(0x1b6)][_0x5e3a4b(0x18c)](_0x5e3a4b(0x191)+this[_0x5e3a4b(0x1a8)]+'/'+_0x26cce3[_0x5e3a4b(0x1ca)]());return repo_class_1[_0x5e3a4b(0x1bd)]['fromBitbucket'](_0x22e634,this['api'],this['credentials']);}catch(_0x5f08a4){if(_0x5f08a4 instanceof api_error_1['ApiError'])throw _0x5f08a4;throw new not_found_error_1[(_0x5e3a4b(0x1a4))](_0x5f08a4);}}async['update'](_0x446626,_0xec369){const _0x4ed2e3=a199_0xfd2aeb;await this[_0x4ed2e3(0x1ac)](_0x446626);try{const _0x214e3f=await this[_0x4ed2e3(0x1b6)][_0x4ed2e3(0x1a3)](_0x4ed2e3(0x191)+this[_0x4ed2e3(0x1a8)]+'/'+_0x446626[_0x4ed2e3(0x1ca)](),_0xec369);return repo_class_1['Repo'][_0x4ed2e3(0x195)](_0x214e3f,this[_0x4ed2e3(0x1a5)],this[_0x4ed2e3(0x1c3)]);}catch(_0x11a445){if(_0x11a445 instanceof api_error_1[_0x4ed2e3(0x1b9)])throw _0x11a445;throw new not_found_error_1['NotFoundError'](_0x11a445);}}async[a199_0xfd2aeb(0x1a1)](_0x82de4f){const _0x5e6be3=a199_0xfd2aeb;try{await this[_0x5e6be3(0x1b6)][_0x5e6be3(0x1a1)](_0x5e6be3(0x191)+this[_0x5e6be3(0x1a8)]+'/'+_0x82de4f[_0x5e6be3(0x1ca)]());}catch(_0x7fcf73){if(_0x7fcf73 instanceof api_error_1[_0x5e6be3(0x1b9)])throw _0x7fcf73;throw new bad_request_error_1[(_0x5e6be3(0x1b4))](_0x7fcf73);}}};function a199_0x17ff(){const _0x4474d6=['function','createEmptyBranch','fromBitbucket','3706902RNGCtp','create','1364966QRkuPY','private','getOwnPropertyDescriptor','../../../../../core/errors/bad-request.error','/repositories/','object','820332tNRvXW','constructor','defineProperty','delete','project','put','NotFoundError','api','master','../../../../../core/errors/api.error','workspace','14801164GoMvqC','values','push','getOne','Tokens','toString','__decorate','design:paramtypes','../../../internal/git.internal','length','autoInit','BadRequestError','getAll','request','3203712ZhTOpo','ERR_BITBUCKET_MISSING_WORKSPACE','ApiError','Inject','apply','BitbucketApiService','Repo','decorate','BitbucketRepoService','post','name','(((.+)+)+)+$','credentials','metadata','defaultBranch','__metadata','745290hRJVIh','../../../../../core/errors/not-found.error','1488618TfjmaS','toLowerCase','BitbucketCredentialsDto','get','GitRepoService','ERR_BITBUCKET_MISSING_PROJECT','search','../../credentials/dto/bitbucket-credentials.dto','repositories/','Git'];a199_0x17ff=function(){return _0x4474d6;};return a199_0x17ff();}BitbucketRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a199_0xfd2aeb(0x1ba)])(providers_tokens_1[a199_0xfd2aeb(0x1ad)]['credentials'])),__metadata(a199_0xfd2aeb(0x1b0),[bitbucket_api_service_1[a199_0xfd2aeb(0x1bc)],bitbucket_credentials_dto_1[a199_0xfd2aeb(0x1cb)]])],BitbucketRepoService),exports[a199_0xfd2aeb(0x1bf)]=BitbucketRepoService;