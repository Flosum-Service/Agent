const a200_0x175d32=a200_0x17d8;(function(_0x38366f,_0x29db5c){const _0x3096bd=a200_0x17d8,_0x19856f=_0x38366f();while(!![]){try{const _0x4742c4=-parseInt(_0x3096bd(0x184))/0x1+parseInt(_0x3096bd(0x158))/0x2*(parseInt(_0x3096bd(0x16b))/0x3)+-parseInt(_0x3096bd(0x174))/0x4+-parseInt(_0x3096bd(0x15f))/0x5*(parseInt(_0x3096bd(0x185))/0x6)+parseInt(_0x3096bd(0x188))/0x7+-parseInt(_0x3096bd(0x15b))/0x8+-parseInt(_0x3096bd(0x15e))/0x9*(-parseInt(_0x3096bd(0x160))/0xa);if(_0x4742c4===_0x29db5c)break;else _0x19856f['push'](_0x19856f['shift']());}catch(_0x4d7054){_0x19856f['push'](_0x19856f['shift']());}}}(a200_0x2b14,0xc97e1));const a200_0x170ac1=(function(){let _0x20cc86=!![];return function(_0x33fba2,_0x245499){const _0x474e45=_0x20cc86?function(){const _0x44ab48=a200_0x17d8;if(_0x245499){const _0x317c5e=_0x245499[_0x44ab48(0x155)](_0x33fba2,arguments);return _0x245499=null,_0x317c5e;}}:function(){};return _0x20cc86=![],_0x474e45;};}()),a200_0x1f2dd9=a200_0x170ac1(this,function(){const _0x388a60=a200_0x17d8;return a200_0x1f2dd9[_0x388a60(0x18a)]()[_0x388a60(0x14d)]('(((.+)+)+)+$')['toString']()['constructor'](a200_0x1f2dd9)[_0x388a60(0x14d)](_0x388a60(0x17a));});a200_0x1f2dd9();'use strict';var __decorate=this&&this['__decorate']||function(_0x43cac5,_0x597d37,_0xaf0ba5,_0x1bd4e4){const _0x10c05f=a200_0x17d8;var _0x20d074=arguments[_0x10c05f(0x16c)],_0x407848=_0x20d074<0x3?_0x597d37:_0x1bd4e4===null?_0x1bd4e4=Object[_0x10c05f(0x15c)](_0x597d37,_0xaf0ba5):_0x1bd4e4,_0x32bfb3;if(typeof Reflect===_0x10c05f(0x16d)&&typeof Reflect[_0x10c05f(0x166)]===_0x10c05f(0x187))_0x407848=Reflect[_0x10c05f(0x166)](_0x43cac5,_0x597d37,_0xaf0ba5,_0x1bd4e4);else{for(var _0x53e0dd=_0x43cac5[_0x10c05f(0x16c)]-0x1;_0x53e0dd>=0x0;_0x53e0dd--)if(_0x32bfb3=_0x43cac5[_0x53e0dd])_0x407848=(_0x20d074<0x3?_0x32bfb3(_0x407848):_0x20d074>0x3?_0x32bfb3(_0x597d37,_0xaf0ba5,_0x407848):_0x32bfb3(_0x597d37,_0xaf0ba5))||_0x407848;}return _0x20d074>0x3&&_0x407848&&Object[_0x10c05f(0x165)](_0x597d37,_0xaf0ba5,_0x407848),_0x407848;},__metadata=this&&this[a200_0x175d32(0x180)]||function(_0x23f035,_0xe0438a){const _0x5987ba=a200_0x175d32;if(typeof Reflect==='object'&&typeof Reflect[_0x5987ba(0x183)]===_0x5987ba(0x187))return Reflect[_0x5987ba(0x183)](_0x23f035,_0xe0438a);},__param=this&&this[a200_0x175d32(0x18c)]||function(_0x4e0507,_0x228205){return function(_0x4e3dc2,_0x562673){_0x228205(_0x4e3dc2,_0x562673,_0x4e0507);};};function a200_0x17d8(_0x1f80d6,_0x19df7f){const _0x27b041=a200_0x2b14();return a200_0x17d8=function(_0x1f2dd9,_0x170ac1){_0x1f2dd9=_0x1f2dd9-0x14a;let _0x2b14ba=_0x27b041[_0x1f2dd9];return _0x2b14ba;},a200_0x17d8(_0x1f80d6,_0x19df7f);}function a200_0x2b14(){const _0x5621db=['(((.+)+)+)+$','Service','../../api/bitbucket-api.service','put','private','next','__metadata','getOne','../repo.class','metadata','1503342aEejYo','6lBNqAK','BitbucketApiService','function','10897145VLRDII','NotFoundError','toString','../../../../../core/errors/api.error','__param','post','BadRequestError','delete','push','ERR_BITBUCKET_MISSING_PROJECT','fromBitbucket','repositories/','search','./git-repo.service','apiBody','update','credentials','values','toLowerCase','../../providers.tokens','apply','Tokens','project','4oKxTzH','api','workspace','3501480AoniqA','getOwnPropertyDescriptor','create','18syIWPz','4730415lsbQDZ','8986840sFghSv','Repo','map','get','Inject','defineProperty','decorate','createRequest','BitbucketRepoService','ApiError','request','799221mFHtPx','length','object','GitRepoService','getAll','createEmptyBranch','typedi','master','Git','697976WLATKd','../../credentials/dto/bitbucket-credentials.dto','defaultBranch','../../../../../core/errors/not-found.error','/repositories/','BitbucketCredentialsDto'];a200_0x2b14=function(){return _0x5621db;};return a200_0x2b14();}Object[a200_0x175d32(0x165)](exports,'__esModule',{'value':!![]}),exports[a200_0x175d32(0x168)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a200_0x175d32(0x177)),bitbucket_api_service_1=require(a200_0x175d32(0x17c)),typedi_1=require(a200_0x175d32(0x171)),api_error_1=require(a200_0x175d32(0x18b)),git_internal_1=require('../../../internal/git.internal'),repo_class_1=require(a200_0x175d32(0x182)),git_repo_service_1=require(a200_0x175d32(0x14e)),bitbucket_credentials_dto_1=require(a200_0x175d32(0x175)),providers_tokens_1=require(a200_0x175d32(0x154));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a200_0x175d32(0x16e)]{constructor(_0x3d89ee,_0x327937){const _0x5e433c=a200_0x175d32;super(_0x3d89ee),this[_0x5e433c(0x159)]=_0x3d89ee,this[_0x5e433c(0x16a)]=_0x3d89ee[_0x5e433c(0x167)](),this[_0x5e433c(0x157)]=_0x327937[_0x5e433c(0x157)],this['workspace']=_0x327937[_0x5e433c(0x15a)],this[_0x5e433c(0x151)]=_0x327937;if(!this[_0x5e433c(0x15a)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this['project'])throw new Error(errors_1[_0x5e433c(0x14a)]);}async[a200_0x175d32(0x15d)](_0x30b382){const _0x1a8f3d=a200_0x175d32;try{const {name:_0x4422e9}=_0x30b382,_0x3ecee1={'name':_0x30b382['name'],'is_private':_0x30b382[_0x1a8f3d(0x17e)],..._0x30b382[_0x1a8f3d(0x14f)]||{},'project':{'key':this['project']}},_0x24a0db=await this[_0x1a8f3d(0x16a)][_0x1a8f3d(0x18d)](_0x1a8f3d(0x178)+this[_0x1a8f3d(0x15a)]+'/'+_0x4422e9[_0x1a8f3d(0x153)](),_0x3ecee1),_0x5178c7=repo_class_1[_0x1a8f3d(0x161)]['fromBitbucket'](_0x24a0db,this[_0x1a8f3d(0x159)],this['credentials']);return _0x30b382['autoInit']&&(await git_internal_1[_0x1a8f3d(0x173)][_0x1a8f3d(0x170)](_0x5178c7,_0x30b382[_0x1a8f3d(0x176)]||'master','',this[_0x1a8f3d(0x151)]),_0x5178c7[_0x1a8f3d(0x176)]=_0x30b382['defaultBranch']||_0x1a8f3d(0x172)),_0x5178c7;}catch(_0x672ae7){if(_0x672ae7 instanceof api_error_1['ApiError'])throw _0x672ae7;throw new bad_request_error_1[(_0x1a8f3d(0x18e))](_0x672ae7);}}async[a200_0x175d32(0x16f)](){const _0x10ac4f=a200_0x175d32;try{const _0x4eb20d=[];let _0x4c7eeb;do{_0x4c7eeb=await this[_0x10ac4f(0x16a)][_0x10ac4f(0x163)](_0x4c7eeb?_0x4c7eeb[_0x10ac4f(0x17f)]:_0x10ac4f(0x14c)+this[_0x10ac4f(0x15a)]),_0x4eb20d[_0x10ac4f(0x190)](..._0x4c7eeb[_0x10ac4f(0x152)]);}while(_0x4c7eeb[_0x10ac4f(0x17f)]);return _0x4eb20d[_0x10ac4f(0x162)](_0x387950=>repo_class_1['Repo'][_0x10ac4f(0x14b)](_0x387950,this['api'],this[_0x10ac4f(0x151)]));}catch(_0x1bb4c4){if(_0x1bb4c4 instanceof api_error_1['ApiError'])throw _0x1bb4c4;throw new not_found_error_1[(_0x10ac4f(0x189))](_0x1bb4c4);}}async[a200_0x175d32(0x181)](_0x4aaf2d){const _0x33958c=a200_0x175d32;try{const _0xdc0178=await this['request'][_0x33958c(0x163)](_0x33958c(0x14c)+this[_0x33958c(0x15a)]+'/'+_0x4aaf2d['toLowerCase']());return repo_class_1[_0x33958c(0x161)][_0x33958c(0x14b)](_0xdc0178,this[_0x33958c(0x159)],this[_0x33958c(0x151)]);}catch(_0x20be0f){if(_0x20be0f instanceof api_error_1['ApiError'])throw _0x20be0f;throw new not_found_error_1[(_0x33958c(0x189))](_0x20be0f);}}async[a200_0x175d32(0x150)](_0x2656a2,_0x3248d6){const _0x1c34e5=a200_0x175d32;await this[_0x1c34e5(0x181)](_0x2656a2);try{const _0x50ac6a=await this[_0x1c34e5(0x16a)][_0x1c34e5(0x17d)](_0x1c34e5(0x14c)+this[_0x1c34e5(0x15a)]+'/'+_0x2656a2[_0x1c34e5(0x153)](),_0x3248d6);return repo_class_1['Repo']['fromBitbucket'](_0x50ac6a,this[_0x1c34e5(0x159)],this['credentials']);}catch(_0x47cb4e){if(_0x47cb4e instanceof api_error_1['ApiError'])throw _0x47cb4e;throw new not_found_error_1['NotFoundError'](_0x47cb4e);}}async[a200_0x175d32(0x18f)](_0x3e2ef0){const _0x89fdda=a200_0x175d32;try{await this[_0x89fdda(0x16a)][_0x89fdda(0x18f)](_0x89fdda(0x14c)+this[_0x89fdda(0x15a)]+'/'+_0x3e2ef0[_0x89fdda(0x153)]());}catch(_0x332eb5){if(_0x332eb5 instanceof api_error_1[_0x89fdda(0x169)])throw _0x332eb5;throw new bad_request_error_1[(_0x89fdda(0x18e))](_0x332eb5);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a200_0x175d32(0x17b)])(),__param(0x1,(0x0,typedi_1[a200_0x175d32(0x164)])(providers_tokens_1[a200_0x175d32(0x156)][a200_0x175d32(0x151)])),__metadata('design:paramtypes',[bitbucket_api_service_1[a200_0x175d32(0x186)],bitbucket_credentials_dto_1[a200_0x175d32(0x179)]])],BitbucketRepoService),exports['BitbucketRepoService']=BitbucketRepoService;