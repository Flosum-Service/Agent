const a166_0x204d3f=a166_0x4945;(function(_0xbe3306,_0x1b3ae1){const _0x3e2101=a166_0x4945,_0x39aa45=_0xbe3306();while(!![]){try{const _0x132f72=parseInt(_0x3e2101(0x1c9))/0x1*(-parseInt(_0x3e2101(0x1a8))/0x2)+parseInt(_0x3e2101(0x1be))/0x3*(-parseInt(_0x3e2101(0x1b7))/0x4)+-parseInt(_0x3e2101(0x1b5))/0x5*(parseInt(_0x3e2101(0x1ce))/0x6)+parseInt(_0x3e2101(0x1c5))/0x7+parseInt(_0x3e2101(0x1a4))/0x8*(parseInt(_0x3e2101(0x1cb))/0x9)+parseInt(_0x3e2101(0x1ae))/0xa+-parseInt(_0x3e2101(0x18e))/0xb;if(_0x132f72===_0x1b3ae1)break;else _0x39aa45['push'](_0x39aa45['shift']());}catch(_0x1577a0){_0x39aa45['push'](_0x39aa45['shift']());}}}(a166_0x506e,0x52676));function a166_0x4945(_0x1e8321,_0x578d06){const _0x36ad49=a166_0x506e();return a166_0x4945=function(_0xadb08f,_0x1bd0cc){_0xadb08f=_0xadb08f-0x18d;let _0x506e14=_0x36ad49[_0xadb08f];return _0x506e14;},a166_0x4945(_0x1e8321,_0x578d06);}const a166_0x1bd0cc=(function(){let _0x2f249c=!![];return function(_0x53ac1a,_0x55a336){const _0x5395b9=_0x2f249c?function(){const _0xb97f1=a166_0x4945;if(_0x55a336){const _0x4cdcdb=_0x55a336[_0xb97f1(0x1c8)](_0x53ac1a,arguments);return _0x55a336=null,_0x4cdcdb;}}:function(){};return _0x2f249c=![],_0x5395b9;};}()),a166_0xadb08f=a166_0x1bd0cc(this,function(){const _0x9bb7f0=a166_0x4945;return a166_0xadb08f['toString']()[_0x9bb7f0(0x19a)](_0x9bb7f0(0x1aa))[_0x9bb7f0(0x1a0)]()[_0x9bb7f0(0x1d0)](a166_0xadb08f)[_0x9bb7f0(0x19a)]('(((.+)+)+)+$');});a166_0xadb08f();'use strict';var __decorate=this&&this['__decorate']||function(_0x48beef,_0x321c7e,_0x52728e,_0x10a165){const _0x19e3ad=a166_0x4945;var _0x4be308=arguments[_0x19e3ad(0x195)],_0x47605e=_0x4be308<0x3?_0x321c7e:_0x10a165===null?_0x10a165=Object[_0x19e3ad(0x1c6)](_0x321c7e,_0x52728e):_0x10a165,_0x1ca9bb;if(typeof Reflect==='object'&&typeof Reflect[_0x19e3ad(0x19f)]===_0x19e3ad(0x1bc))_0x47605e=Reflect['decorate'](_0x48beef,_0x321c7e,_0x52728e,_0x10a165);else{for(var _0x271c20=_0x48beef[_0x19e3ad(0x195)]-0x1;_0x271c20>=0x0;_0x271c20--)if(_0x1ca9bb=_0x48beef[_0x271c20])_0x47605e=(_0x4be308<0x3?_0x1ca9bb(_0x47605e):_0x4be308>0x3?_0x1ca9bb(_0x321c7e,_0x52728e,_0x47605e):_0x1ca9bb(_0x321c7e,_0x52728e))||_0x47605e;}return _0x4be308>0x3&&_0x47605e&&Object['defineProperty'](_0x321c7e,_0x52728e,_0x47605e),_0x47605e;},__metadata=this&&this[a166_0x204d3f(0x19c)]||function(_0x8c7731,_0x2d3d5c){const _0x448aa4=a166_0x204d3f;if(typeof Reflect===_0x448aa4(0x197)&&typeof Reflect['metadata']===_0x448aa4(0x1bc))return Reflect['metadata'](_0x8c7731,_0x2d3d5c);},__param=this&&this['__param']||function(_0x18fb41,_0x1f4b93){return function(_0x60a2fb,_0x26c2d3){_0x1f4b93(_0x60a2fb,_0x26c2d3,_0x18fb41);};};Object['defineProperty'](exports,a166_0x204d3f(0x198),{'value':!![]}),exports[a166_0x204d3f(0x1ba)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a166_0x204d3f(0x1b9)),not_found_error_1=require(a166_0x204d3f(0x1b2)),bitbucket_api_service_1=require(a166_0x204d3f(0x1bb)),typedi_1=require(a166_0x204d3f(0x191)),api_error_1=require(a166_0x204d3f(0x1a3)),git_internal_1=require(a166_0x204d3f(0x1cc)),repo_class_1=require(a166_0x204d3f(0x1c4)),git_repo_service_1=require(a166_0x204d3f(0x1af)),bitbucket_credentials_dto_1=require(a166_0x204d3f(0x1cd)),providers_tokens_1=require(a166_0x204d3f(0x1b8));function a166_0x506e(){const _0x26523a=['Repo','ERR_BITBUCKET_MISSING_PROJECT','Tokens','length','delete','object','__esModule','workspace','search','getOne','__metadata','master','createEmptyBranch','decorate','toString','autoInit','private','../../../../../core/errors/api.error','14024KMeTKa','put','ApiError','name','86218ecmioa','post','(((.+)+)+)+$','repositories/','GitRepoService','BadRequestError','1906960TwYxFm','./git-repo.service','NotFoundError','defaultBranch','../../../../../core/errors/not-found.error','BitbucketApiService','project','133270IXwjyb','push','4uqIttB','../../providers.tokens','../../../../../core/errors/bad-request.error','BitbucketRepoService','../../api/bitbucket-api.service','function','toLowerCase','1283361ShwKVj','credentials','getAll','get','api','request','../repo.class','4530113KPmMBO','getOwnPropertyDescriptor','Inject','apply','2HelVal','create','1305TTsxFd','../../../internal/git.internal','../../credentials/dto/bitbucket-credentials.dto','36AMmxEA','BitbucketCredentialsDto','constructor','next','/repositories/','fromBitbucket','886435EXBccd','update','apiBody','typedi'];a166_0x506e=function(){return _0x26523a;};return a166_0x506e();}let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a166_0x204d3f(0x1ac)]{constructor(_0x324ab2,_0x18bf9e){const _0x5dea99=a166_0x204d3f;super(_0x324ab2),this['api']=_0x324ab2,this['request']=_0x324ab2['createRequest'](),this[_0x5dea99(0x1b4)]=_0x18bf9e[_0x5dea99(0x1b4)],this[_0x5dea99(0x199)]=_0x18bf9e['workspace'],this[_0x5dea99(0x1bf)]=_0x18bf9e;if(!this[_0x5dea99(0x199)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x5dea99(0x1b4)])throw new Error(errors_1[_0x5dea99(0x193)]);}async[a166_0x204d3f(0x1ca)](_0x1a50a8){const _0x419e60=a166_0x204d3f;try{const {name:_0x4cf681}=_0x1a50a8,_0x4e763f={'name':_0x1a50a8[_0x419e60(0x1a7)],'is_private':_0x1a50a8[_0x419e60(0x1a2)],..._0x1a50a8[_0x419e60(0x190)]||{},'project':{'key':this[_0x419e60(0x1b4)]}},_0x4c3ae7=await this['request'][_0x419e60(0x1a9)](_0x419e60(0x1d2)+this[_0x419e60(0x199)]+'/'+_0x4cf681[_0x419e60(0x1bd)](),_0x4e763f),_0x287a80=repo_class_1[_0x419e60(0x192)][_0x419e60(0x18d)](_0x4c3ae7,this[_0x419e60(0x1c2)],this[_0x419e60(0x1bf)]);return _0x1a50a8[_0x419e60(0x1a1)]&&(await git_internal_1['Git'][_0x419e60(0x19e)](_0x287a80,_0x1a50a8[_0x419e60(0x1b1)]||_0x419e60(0x19d),'',this['credentials']),_0x287a80[_0x419e60(0x1b1)]=_0x1a50a8[_0x419e60(0x1b1)]||_0x419e60(0x19d)),_0x287a80;}catch(_0x8c7740){if(_0x8c7740 instanceof api_error_1[_0x419e60(0x1a6)])throw _0x8c7740;throw new bad_request_error_1['BadRequestError'](_0x8c7740);}}async[a166_0x204d3f(0x1c0)](){const _0x3f1434=a166_0x204d3f;try{const _0x5b5939=[];let _0x31ac1b;do{_0x31ac1b=await this['request'][_0x3f1434(0x1c1)](_0x31ac1b?_0x31ac1b[_0x3f1434(0x1d1)]:_0x3f1434(0x1ab)+this[_0x3f1434(0x199)]),_0x5b5939[_0x3f1434(0x1b6)](..._0x31ac1b['values']);}while(_0x31ac1b[_0x3f1434(0x1d1)]);return _0x5b5939['map'](_0x45483b=>repo_class_1[_0x3f1434(0x192)][_0x3f1434(0x18d)](_0x45483b,this[_0x3f1434(0x1c2)],this[_0x3f1434(0x1bf)]));}catch(_0x25e472){if(_0x25e472 instanceof api_error_1[_0x3f1434(0x1a6)])throw _0x25e472;throw new not_found_error_1['NotFoundError'](_0x25e472);}}async[a166_0x204d3f(0x19b)](_0x53d231){const _0x4e74c6=a166_0x204d3f;try{const _0x43a8b6=await this[_0x4e74c6(0x1c3)][_0x4e74c6(0x1c1)](_0x4e74c6(0x1ab)+this['workspace']+'/'+_0x53d231[_0x4e74c6(0x1bd)]());return repo_class_1[_0x4e74c6(0x192)][_0x4e74c6(0x18d)](_0x43a8b6,this[_0x4e74c6(0x1c2)],this[_0x4e74c6(0x1bf)]);}catch(_0x4d5549){if(_0x4d5549 instanceof api_error_1['ApiError'])throw _0x4d5549;throw new not_found_error_1[(_0x4e74c6(0x1b0))](_0x4d5549);}}async[a166_0x204d3f(0x18f)](_0x4ed3fc,_0x412644){const _0x347fa0=a166_0x204d3f;await this[_0x347fa0(0x19b)](_0x4ed3fc);try{const _0x402aa3=await this[_0x347fa0(0x1c3)][_0x347fa0(0x1a5)]('repositories/'+this[_0x347fa0(0x199)]+'/'+_0x4ed3fc[_0x347fa0(0x1bd)](),_0x412644);return repo_class_1['Repo'][_0x347fa0(0x18d)](_0x402aa3,this[_0x347fa0(0x1c2)],this[_0x347fa0(0x1bf)]);}catch(_0x48b80f){if(_0x48b80f instanceof api_error_1[_0x347fa0(0x1a6)])throw _0x48b80f;throw new not_found_error_1[(_0x347fa0(0x1b0))](_0x48b80f);}}async[a166_0x204d3f(0x196)](_0x4ec869){const _0x340f6e=a166_0x204d3f;try{await this[_0x340f6e(0x1c3)][_0x340f6e(0x196)](_0x340f6e(0x1ab)+this[_0x340f6e(0x199)]+'/'+_0x4ec869[_0x340f6e(0x1bd)]());}catch(_0xc9673){if(_0xc9673 instanceof api_error_1[_0x340f6e(0x1a6)])throw _0xc9673;throw new bad_request_error_1[(_0x340f6e(0x1ad))](_0xc9673);}}};BitbucketRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a166_0x204d3f(0x1c7)])(providers_tokens_1[a166_0x204d3f(0x194)][a166_0x204d3f(0x1bf)])),__metadata('design:paramtypes',[bitbucket_api_service_1[a166_0x204d3f(0x1b3)],bitbucket_credentials_dto_1[a166_0x204d3f(0x1cf)]])],BitbucketRepoService),exports[a166_0x204d3f(0x1ba)]=BitbucketRepoService;