const a199_0x4a20d2=a199_0x5149;(function(_0x51b635,_0x26dca1){const _0x4c4406=a199_0x5149,_0x53a699=_0x51b635();while(!![]){try{const _0x2c3ba4=parseInt(_0x4c4406(0x101))/0x1*(parseInt(_0x4c4406(0xfa))/0x2)+-parseInt(_0x4c4406(0xe4))/0x3+parseInt(_0x4c4406(0x108))/0x4*(-parseInt(_0x4c4406(0xe0))/0x5)+parseInt(_0x4c4406(0x11f))/0x6*(-parseInt(_0x4c4406(0x119))/0x7)+-parseInt(_0x4c4406(0xf1))/0x8+parseInt(_0x4c4406(0x122))/0x9*(-parseInt(_0x4c4406(0xf2))/0xa)+parseInt(_0x4c4406(0x100))/0xb;if(_0x2c3ba4===_0x26dca1)break;else _0x53a699['push'](_0x53a699['shift']());}catch(_0x20b156){_0x53a699['push'](_0x53a699['shift']());}}}(a199_0x5ddd,0x3317f));function a199_0x5149(_0x2f82aa,_0x580228){const _0x170d59=a199_0x5ddd();return a199_0x5149=function(_0x13ce53,_0x2fdbdb){_0x13ce53=_0x13ce53-0xdd;let _0x5ddd29=_0x170d59[_0x13ce53];return _0x5ddd29;},a199_0x5149(_0x2f82aa,_0x580228);}const a199_0x2fdbdb=(function(){let _0x256c25=!![];return function(_0x17e5b9,_0xeae35d){const _0x2240c2=_0x256c25?function(){const _0x2b49ee=a199_0x5149;if(_0xeae35d){const _0x4d9c5e=_0xeae35d[_0x2b49ee(0xea)](_0x17e5b9,arguments);return _0xeae35d=null,_0x4d9c5e;}}:function(){};return _0x256c25=![],_0x2240c2;};}()),a199_0x13ce53=a199_0x2fdbdb(this,function(){const _0x51377e=a199_0x5149;return a199_0x13ce53[_0x51377e(0xeb)]()[_0x51377e(0xf5)](_0x51377e(0x107))[_0x51377e(0xeb)]()[_0x51377e(0x103)](a199_0x13ce53)[_0x51377e(0xf5)]('(((.+)+)+)+$');});a199_0x13ce53();'use strict';function a199_0x5ddd(){const _0x3cfa8d=['BitbucketApiService','constructor','getAll','__param','design:paramtypes','(((.+)+)+)+$','736jtJaEv','private','../../../internal/git.internal','metadata','Inject','delete','/repositories/','toLowerCase','put','credentials','master','BadRequestError','request','NotFoundError','decorate','name','fromBitbucket','7zsyowG','../../../../../core/errors/not-found.error','defaultBranch','repositories/','api','../../../../../core/errors/api.error','2264682akPyxs','createEmptyBranch','ApiError','1377iaZips','defineProperty','createRequest','map','../../../../../core/errors/bad-request.error','create','typedi','ERR_BITBUCKET_MISSING_PROJECT','7140WKPGpT','length','function','ERR_BITBUCKET_MISSING_WORKSPACE','1088346uVCXAl','../../api/bitbucket-api.service','./git-repo.service','post','apiBody','values','apply','toString','workspace','push','Repo','object','../../../../../constants/errors','2890536DrYets','23440hJvtvW','Service','BitbucketRepoService','search','get','project','../repo.class','getOwnPropertyDescriptor','2ziWOHx','BitbucketCredentialsDto','../../providers.tokens','next','GitRepoService','Git','20692694wkvycA','51055mXMMZJ'];a199_0x5ddd=function(){return _0x3cfa8d;};return a199_0x5ddd();}var __decorate=this&&this['__decorate']||function(_0xc2f538,_0x13adf5,_0x3b64f0,_0x5baa10){const _0x447849=a199_0x5149;var _0x10faa8=arguments[_0x447849(0xe1)],_0x39b385=_0x10faa8<0x3?_0x13adf5:_0x5baa10===null?_0x5baa10=Object[_0x447849(0xf9)](_0x13adf5,_0x3b64f0):_0x5baa10,_0x51b2d3;if(typeof Reflect===_0x447849(0xef)&&typeof Reflect[_0x447849(0x116)]==='function')_0x39b385=Reflect[_0x447849(0x116)](_0xc2f538,_0x13adf5,_0x3b64f0,_0x5baa10);else{for(var _0xc8acca=_0xc2f538[_0x447849(0xe1)]-0x1;_0xc8acca>=0x0;_0xc8acca--)if(_0x51b2d3=_0xc2f538[_0xc8acca])_0x39b385=(_0x10faa8<0x3?_0x51b2d3(_0x39b385):_0x10faa8>0x3?_0x51b2d3(_0x13adf5,_0x3b64f0,_0x39b385):_0x51b2d3(_0x13adf5,_0x3b64f0))||_0x39b385;}return _0x10faa8>0x3&&_0x39b385&&Object[_0x447849(0x123)](_0x13adf5,_0x3b64f0,_0x39b385),_0x39b385;},__metadata=this&&this['__metadata']||function(_0x44f9b9,_0x3b45ec){const _0x23703b=a199_0x5149;if(typeof Reflect===_0x23703b(0xef)&&typeof Reflect['metadata']===_0x23703b(0xe2))return Reflect[_0x23703b(0x10b)](_0x44f9b9,_0x3b45ec);},__param=this&&this[a199_0x4a20d2(0x105)]||function(_0x2ced2b,_0x2ccea4){return function(_0x5922b7,_0x4017c9){_0x2ccea4(_0x5922b7,_0x4017c9,_0x2ced2b);};};Object[a199_0x4a20d2(0x123)](exports,'__esModule',{'value':!![]}),exports[a199_0x4a20d2(0xf4)]=void 0x0;const errors_1=require(a199_0x4a20d2(0xf0)),bad_request_error_1=require(a199_0x4a20d2(0x126)),not_found_error_1=require(a199_0x4a20d2(0x11a)),bitbucket_api_service_1=require(a199_0x4a20d2(0xe5)),typedi_1=require(a199_0x4a20d2(0xde)),api_error_1=require(a199_0x4a20d2(0x11e)),git_internal_1=require(a199_0x4a20d2(0x10a)),repo_class_1=require(a199_0x4a20d2(0xf8)),git_repo_service_1=require(a199_0x4a20d2(0xe6)),bitbucket_credentials_dto_1=require('../../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a199_0x4a20d2(0xfc));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a199_0x4a20d2(0xfe)]{constructor(_0x4092a9,_0x58b266){const _0x10de80=a199_0x4a20d2;super(_0x4092a9),this[_0x10de80(0x11d)]=_0x4092a9,this[_0x10de80(0x114)]=_0x4092a9[_0x10de80(0x124)](),this['project']=_0x58b266['project'],this[_0x10de80(0xec)]=_0x58b266[_0x10de80(0xec)],this['credentials']=_0x58b266;if(!this[_0x10de80(0xec)])throw new Error(errors_1[_0x10de80(0xe3)]);if(!this['project'])throw new Error(errors_1[_0x10de80(0xdf)]);}async[a199_0x4a20d2(0xdd)](_0x4a7ba5){const _0x2e1eba=a199_0x4a20d2;try{const {name:_0x149232}=_0x4a7ba5,_0x1b73dc={'name':_0x4a7ba5[_0x2e1eba(0x117)],'is_private':_0x4a7ba5[_0x2e1eba(0x109)],..._0x4a7ba5[_0x2e1eba(0xe8)]||{},'project':{'key':this[_0x2e1eba(0xf7)]}},_0x1e04ff=await this['request'][_0x2e1eba(0xe7)](_0x2e1eba(0x10e)+this['workspace']+'/'+_0x149232[_0x2e1eba(0x10f)](),_0x1b73dc),_0x26981c=repo_class_1[_0x2e1eba(0xee)][_0x2e1eba(0x118)](_0x1e04ff,this[_0x2e1eba(0x11d)],this['credentials']);return _0x4a7ba5['autoInit']&&(await git_internal_1[_0x2e1eba(0xff)][_0x2e1eba(0x120)](_0x26981c,_0x4a7ba5[_0x2e1eba(0x11b)]||_0x2e1eba(0x112),'',this[_0x2e1eba(0x111)]),_0x26981c['defaultBranch']=_0x4a7ba5[_0x2e1eba(0x11b)]||_0x2e1eba(0x112)),_0x26981c;}catch(_0x591992){if(_0x591992 instanceof api_error_1[_0x2e1eba(0x121)])throw _0x591992;throw new bad_request_error_1['BadRequestError'](_0x591992);}}async[a199_0x4a20d2(0x104)](){const _0x5c10da=a199_0x4a20d2;try{const _0x5ae8b7=[];let _0x1cd21d;do{_0x1cd21d=await this[_0x5c10da(0x114)]['get'](_0x1cd21d?_0x1cd21d['next']:_0x5c10da(0x11c)+this[_0x5c10da(0xec)]),_0x5ae8b7[_0x5c10da(0xed)](..._0x1cd21d[_0x5c10da(0xe9)]);}while(_0x1cd21d[_0x5c10da(0xfd)]);return _0x5ae8b7[_0x5c10da(0x125)](_0x562168=>repo_class_1[_0x5c10da(0xee)][_0x5c10da(0x118)](_0x562168,this[_0x5c10da(0x11d)],this[_0x5c10da(0x111)]));}catch(_0x2783cc){if(_0x2783cc instanceof api_error_1[_0x5c10da(0x121)])throw _0x2783cc;throw new not_found_error_1[(_0x5c10da(0x115))](_0x2783cc);}}async['getOne'](_0x1d8a66){const _0x18ad91=a199_0x4a20d2;try{const _0x338686=await this['request'][_0x18ad91(0xf6)]('repositories/'+this['workspace']+'/'+_0x1d8a66['toLowerCase']());return repo_class_1['Repo'][_0x18ad91(0x118)](_0x338686,this[_0x18ad91(0x11d)],this['credentials']);}catch(_0x73ea0c){if(_0x73ea0c instanceof api_error_1[_0x18ad91(0x121)])throw _0x73ea0c;throw new not_found_error_1[(_0x18ad91(0x115))](_0x73ea0c);}}async['update'](_0x24db84,_0x2593f4){const _0x4eb1be=a199_0x4a20d2;await this['getOne'](_0x24db84);try{const _0x424c8c=await this[_0x4eb1be(0x114)][_0x4eb1be(0x110)]('repositories/'+this['workspace']+'/'+_0x24db84[_0x4eb1be(0x10f)](),_0x2593f4);return repo_class_1[_0x4eb1be(0xee)][_0x4eb1be(0x118)](_0x424c8c,this['api'],this[_0x4eb1be(0x111)]);}catch(_0x5c0a4f){if(_0x5c0a4f instanceof api_error_1[_0x4eb1be(0x121)])throw _0x5c0a4f;throw new not_found_error_1[(_0x4eb1be(0x115))](_0x5c0a4f);}}async[a199_0x4a20d2(0x10d)](_0x12513d){const _0x25b1f2=a199_0x4a20d2;try{await this[_0x25b1f2(0x114)][_0x25b1f2(0x10d)](_0x25b1f2(0x11c)+this[_0x25b1f2(0xec)]+'/'+_0x12513d[_0x25b1f2(0x10f)]());}catch(_0x3c9c70){if(_0x3c9c70 instanceof api_error_1[_0x25b1f2(0x121)])throw _0x3c9c70;throw new bad_request_error_1[(_0x25b1f2(0x113))](_0x3c9c70);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a199_0x4a20d2(0xf3)])(),__param(0x1,(0x0,typedi_1[a199_0x4a20d2(0x10c)])(providers_tokens_1['Tokens'][a199_0x4a20d2(0x111)])),__metadata(a199_0x4a20d2(0x106),[bitbucket_api_service_1[a199_0x4a20d2(0x102)],bitbucket_credentials_dto_1[a199_0x4a20d2(0xfb)]])],BitbucketRepoService),exports[a199_0x4a20d2(0xf4)]=BitbucketRepoService;