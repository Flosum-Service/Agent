const a236_0x3eb6c7=a236_0x44cc;function a236_0x44cc(_0x134232,_0x14aea7){const _0x50e0c9=a236_0x8d2a();return a236_0x44cc=function(_0xcad78a,_0x463438){_0xcad78a=_0xcad78a-0x1aa;let _0x8d2a29=_0x50e0c9[_0xcad78a];return _0x8d2a29;},a236_0x44cc(_0x134232,_0x14aea7);}(function(_0x38960b,_0x22327f){const _0x5e17cc=a236_0x44cc,_0x4769ca=_0x38960b();while(!![]){try{const _0x1efc12=-parseInt(_0x5e17cc(0x1cf))/0x1*(-parseInt(_0x5e17cc(0x1e9))/0x2)+parseInt(_0x5e17cc(0x1d6))/0x3+-parseInt(_0x5e17cc(0x1bb))/0x4+parseInt(_0x5e17cc(0x1ec))/0x5*(-parseInt(_0x5e17cc(0x1df))/0x6)+parseInt(_0x5e17cc(0x1e3))/0x7+-parseInt(_0x5e17cc(0x1de))/0x8*(-parseInt(_0x5e17cc(0x1b0))/0x9)+parseInt(_0x5e17cc(0x1ad))/0xa;if(_0x1efc12===_0x22327f)break;else _0x4769ca['push'](_0x4769ca['shift']());}catch(_0x42b3b7){_0x4769ca['push'](_0x4769ca['shift']());}}}(a236_0x8d2a,0x77b17));const a236_0x463438=(function(){let _0x4e81f9=!![];return function(_0x5843a3,_0x20e628){const _0x526fe3=_0x4e81f9?function(){const _0x3c49c2=a236_0x44cc;if(_0x20e628){const _0xef7893=_0x20e628[_0x3c49c2(0x1e7)](_0x5843a3,arguments);return _0x20e628=null,_0xef7893;}}:function(){};return _0x4e81f9=![],_0x526fe3;};}()),a236_0xcad78a=a236_0x463438(this,function(){const _0x3be9eb=a236_0x44cc;return a236_0xcad78a[_0x3be9eb(0x1c9)]()[_0x3be9eb(0x1b5)](_0x3be9eb(0x1d4))[_0x3be9eb(0x1c9)]()[_0x3be9eb(0x1cc)](a236_0xcad78a)[_0x3be9eb(0x1b5)](_0x3be9eb(0x1d4));});function a236_0x8d2a(){const _0x5d3739=['search','createRequest','metadata','repositories/','__decorate','project','232092cbPmVN','../../providers.tokens','/repositories/','BitbucketRepoService','../../../../../core/errors/bad-request.error','BadRequestError','ERR_BITBUCKET_MISSING_WORKSPACE','values','Inject','Service','Repo','map','fromBitbucket','ITEMS_PER_RESPONSE','toString','design:paramtypes','apiBody','constructor','object','update','1960ohqWcr','NotFoundError','credentials','getOne','function','(((.+)+)+)+$','workspace','431220pLxzpK','name','length','Tokens','defineProperty','master','../../credentials/dto/bitbucket-credentials.dto','delete','53904gWOQzX','5470482OzpHvL','./git-repo.service','getAll','request','57946yVOSFN','defaultBranch','create','typedi','apply','__param','748TJKQkB','push','../../../../../core/errors/not-found.error','5rEJUeS','get','decorate','ApiError','next','1370050HrDKJp','__esModule','api','585BVFiph','../../api/bitbucket-api.service','autoInit','put','../../../internal/git.internal'];a236_0x8d2a=function(){return _0x5d3739;};return a236_0x8d2a();}a236_0xcad78a();'use strict';var __decorate=this&&this[a236_0x3eb6c7(0x1b9)]||function(_0x5c9cbd,_0x542e6c,_0x3c683c,_0x6daf21){const _0x7ae0b5=a236_0x3eb6c7;var _0xf93044=arguments[_0x7ae0b5(0x1d8)],_0xbcd780=_0xf93044<0x3?_0x542e6c:_0x6daf21===null?_0x6daf21=Object['getOwnPropertyDescriptor'](_0x542e6c,_0x3c683c):_0x6daf21,_0x752eac;if(typeof Reflect===_0x7ae0b5(0x1cd)&&typeof Reflect[_0x7ae0b5(0x1aa)]===_0x7ae0b5(0x1d3))_0xbcd780=Reflect[_0x7ae0b5(0x1aa)](_0x5c9cbd,_0x542e6c,_0x3c683c,_0x6daf21);else{for(var _0x5a40e0=_0x5c9cbd[_0x7ae0b5(0x1d8)]-0x1;_0x5a40e0>=0x0;_0x5a40e0--)if(_0x752eac=_0x5c9cbd[_0x5a40e0])_0xbcd780=(_0xf93044<0x3?_0x752eac(_0xbcd780):_0xf93044>0x3?_0x752eac(_0x542e6c,_0x3c683c,_0xbcd780):_0x752eac(_0x542e6c,_0x3c683c))||_0xbcd780;}return _0xf93044>0x3&&_0xbcd780&&Object[_0x7ae0b5(0x1da)](_0x542e6c,_0x3c683c,_0xbcd780),_0xbcd780;},__metadata=this&&this['__metadata']||function(_0x3cd36f,_0x4ef9aa){const _0x3a7cba=a236_0x3eb6c7;if(typeof Reflect===_0x3a7cba(0x1cd)&&typeof Reflect[_0x3a7cba(0x1b7)]===_0x3a7cba(0x1d3))return Reflect[_0x3a7cba(0x1b7)](_0x3cd36f,_0x4ef9aa);},__param=this&&this[a236_0x3eb6c7(0x1e8)]||function(_0x26441a,_0x1aafd5){return function(_0x58d20f,_0xc00588){_0x1aafd5(_0x58d20f,_0xc00588,_0x26441a);};},BitbucketRepoService_1;Object[a236_0x3eb6c7(0x1da)](exports,a236_0x3eb6c7(0x1ae),{'value':!![]}),exports['BitbucketRepoService']=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a236_0x3eb6c7(0x1bf)),not_found_error_1=require(a236_0x3eb6c7(0x1eb)),bitbucket_api_service_1=require(a236_0x3eb6c7(0x1b1)),typedi_1=require(a236_0x3eb6c7(0x1e6)),api_error_1=require('../../../../../core/errors/api.error'),git_internal_1=require(a236_0x3eb6c7(0x1b4)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a236_0x3eb6c7(0x1e0)),bitbucket_credentials_dto_1=require(a236_0x3eb6c7(0x1dc)),providers_tokens_1=require(a236_0x3eb6c7(0x1bc));let BitbucketRepoService=BitbucketRepoService_1=class BitbucketRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x562bb6,_0x26ed8e){const _0x533e9a=a236_0x3eb6c7;super(_0x562bb6),this[_0x533e9a(0x1af)]=_0x562bb6,this[_0x533e9a(0x1e2)]=_0x562bb6[_0x533e9a(0x1b6)](),this[_0x533e9a(0x1ba)]=_0x26ed8e[_0x533e9a(0x1ba)],this['workspace']=_0x26ed8e[_0x533e9a(0x1d5)],this['credentials']=_0x26ed8e;if(!this[_0x533e9a(0x1d5)])throw new Error(errors_1[_0x533e9a(0x1c1)]);if(!this[_0x533e9a(0x1ba)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}async[a236_0x3eb6c7(0x1e5)](_0x548aab){const _0x262d8b=a236_0x3eb6c7;try{const {name:_0x25c558}=_0x548aab,_0x34eca0={'name':_0x548aab[_0x262d8b(0x1d7)],'is_private':_0x548aab['private'],..._0x548aab[_0x262d8b(0x1cb)]||{},'project':{'key':this[_0x262d8b(0x1ba)]}},_0x3304d5=await this[_0x262d8b(0x1e2)]['post'](_0x262d8b(0x1bd)+this[_0x262d8b(0x1d5)]+'/'+_0x25c558['toLowerCase'](),_0x34eca0),_0x1c08f9=repo_class_1['Repo'][_0x262d8b(0x1c7)](_0x3304d5,this['api'],this[_0x262d8b(0x1d1)]);return _0x548aab[_0x262d8b(0x1b2)]&&(await git_internal_1['Git']['createEmptyBranch'](_0x1c08f9,_0x548aab[_0x262d8b(0x1e4)]||_0x262d8b(0x1db),'',this[_0x262d8b(0x1d1)]),_0x1c08f9[_0x262d8b(0x1e4)]=_0x548aab[_0x262d8b(0x1e4)]||_0x262d8b(0x1db)),_0x1c08f9;}catch(_0x296467){if(_0x296467 instanceof api_error_1[_0x262d8b(0x1ab)])throw _0x296467;throw new bad_request_error_1[(_0x262d8b(0x1c0))](_0x296467);}}async[a236_0x3eb6c7(0x1e1)](){const _0x5e090e=a236_0x3eb6c7;try{const _0xf4c285=[];let _0x33b63f,_0x463423=_0x5e090e(0x1b8)+this[_0x5e090e(0x1d5)]+'?q=project.key=\x22'+this[_0x5e090e(0x1ba)]+'\x22&pagelen='+BitbucketRepoService_1[_0x5e090e(0x1c8)];do{_0x33b63f=await this['request'][_0x5e090e(0x1ed)](_0x463423),_0x463423=_0x33b63f[_0x5e090e(0x1ac)],_0xf4c285[_0x5e090e(0x1ea)](..._0x33b63f[_0x5e090e(0x1c2)]);}while(_0x463423);return _0xf4c285[_0x5e090e(0x1c6)](_0x22d4d9=>repo_class_1['Repo']['fromBitbucket'](_0x22d4d9,this[_0x5e090e(0x1af)],this[_0x5e090e(0x1d1)]));}catch(_0x25f28e){if(_0x25f28e instanceof api_error_1[_0x5e090e(0x1ab)])throw _0x25f28e;throw new not_found_error_1['NotFoundError'](_0x25f28e);}}async[a236_0x3eb6c7(0x1d2)](_0x59278b){const _0x3cdba5=a236_0x3eb6c7;try{const _0x50b1fb=await this[_0x3cdba5(0x1e2)][_0x3cdba5(0x1ed)]('repositories/'+this['workspace']+'/'+_0x59278b['toLowerCase']());return repo_class_1[_0x3cdba5(0x1c5)][_0x3cdba5(0x1c7)](_0x50b1fb,this[_0x3cdba5(0x1af)],this['credentials']);}catch(_0x2ba1b0){if(_0x2ba1b0 instanceof api_error_1[_0x3cdba5(0x1ab)])throw _0x2ba1b0;throw new not_found_error_1[(_0x3cdba5(0x1d0))](_0x2ba1b0);}}async[a236_0x3eb6c7(0x1ce)](_0x175b72,_0x5115aa){const _0x4a18db=a236_0x3eb6c7;await this[_0x4a18db(0x1d2)](_0x175b72);try{const _0x5bf79a=await this[_0x4a18db(0x1e2)][_0x4a18db(0x1b3)](_0x4a18db(0x1b8)+this['workspace']+'/'+_0x175b72['toLowerCase'](),_0x5115aa);return repo_class_1['Repo']['fromBitbucket'](_0x5bf79a,this['api'],this[_0x4a18db(0x1d1)]);}catch(_0x508c84){if(_0x508c84 instanceof api_error_1[_0x4a18db(0x1ab)])throw _0x508c84;throw new not_found_error_1[(_0x4a18db(0x1d0))](_0x508c84);}}async[a236_0x3eb6c7(0x1dd)](_0x159bc0){const _0x1b102c=a236_0x3eb6c7;try{await this[_0x1b102c(0x1e2)][_0x1b102c(0x1dd)](_0x1b102c(0x1b8)+this[_0x1b102c(0x1d5)]+'/'+_0x159bc0['toLowerCase']());}catch(_0x25e955){if(_0x25e955 instanceof api_error_1[_0x1b102c(0x1ab)])throw _0x25e955;throw new bad_request_error_1[(_0x1b102c(0x1c0))](_0x25e955);}}};BitbucketRepoService[a236_0x3eb6c7(0x1c8)]=0x64,BitbucketRepoService=BitbucketRepoService_1=__decorate([(0x0,typedi_1[a236_0x3eb6c7(0x1c4)])(),__param(0x1,(0x0,typedi_1[a236_0x3eb6c7(0x1c3)])(providers_tokens_1[a236_0x3eb6c7(0x1d9)][a236_0x3eb6c7(0x1d1)])),__metadata(a236_0x3eb6c7(0x1ca),[bitbucket_api_service_1['BitbucketApiService'],bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketRepoService),exports[a236_0x3eb6c7(0x1be)]=BitbucketRepoService;