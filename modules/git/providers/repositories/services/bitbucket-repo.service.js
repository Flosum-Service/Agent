const a166_0x2392af=a166_0x50b8;(function(_0x41892e,_0x4c37f4){const _0x1133a3=a166_0x50b8,_0x2d203e=_0x41892e();while(!![]){try{const _0x98740d=-parseInt(_0x1133a3(0x176))/0x1+parseInt(_0x1133a3(0x195))/0x2+-parseInt(_0x1133a3(0x18c))/0x3+parseInt(_0x1133a3(0x17a))/0x4*(-parseInt(_0x1133a3(0x183))/0x5)+parseInt(_0x1133a3(0x18e))/0x6*(-parseInt(_0x1133a3(0x180))/0x7)+-parseInt(_0x1133a3(0x187))/0x8*(parseInt(_0x1133a3(0x193))/0x9)+-parseInt(_0x1133a3(0x1b0))/0xa*(-parseInt(_0x1133a3(0x1ae))/0xb);if(_0x98740d===_0x4c37f4)break;else _0x2d203e['push'](_0x2d203e['shift']());}catch(_0x5310b1){_0x2d203e['push'](_0x2d203e['shift']());}}}(a166_0x3029,0xf304b));const a166_0x577ee4=(function(){let _0x490802=!![];return function(_0x27e3ef,_0x23c86d){const _0x280ba5=_0x490802?function(){const _0x306b87=a166_0x50b8;if(_0x23c86d){const _0x58e2b9=_0x23c86d[_0x306b87(0x17b)](_0x27e3ef,arguments);return _0x23c86d=null,_0x58e2b9;}}:function(){};return _0x490802=![],_0x280ba5;};}()),a166_0xc200a2=a166_0x577ee4(this,function(){const _0x3e3782=a166_0x50b8;return a166_0xc200a2[_0x3e3782(0x19b)]()[_0x3e3782(0x199)](_0x3e3782(0x198))[_0x3e3782(0x19b)]()[_0x3e3782(0x184)](a166_0xc200a2)[_0x3e3782(0x199)](_0x3e3782(0x198));});a166_0xc200a2();'use strict';var __decorate=this&&this['__decorate']||function(_0x591112,_0x47ab89,_0x44c7e2,_0x5b0bf9){const _0x187aad=a166_0x50b8;var _0x36f7f6=arguments[_0x187aad(0x1a6)],_0x2c1e00=_0x36f7f6<0x3?_0x47ab89:_0x5b0bf9===null?_0x5b0bf9=Object['getOwnPropertyDescriptor'](_0x47ab89,_0x44c7e2):_0x5b0bf9,_0xa92c24;if(typeof Reflect===_0x187aad(0x196)&&typeof Reflect[_0x187aad(0x174)]===_0x187aad(0x1a2))_0x2c1e00=Reflect[_0x187aad(0x174)](_0x591112,_0x47ab89,_0x44c7e2,_0x5b0bf9);else{for(var _0x1a681d=_0x591112[_0x187aad(0x1a6)]-0x1;_0x1a681d>=0x0;_0x1a681d--)if(_0xa92c24=_0x591112[_0x1a681d])_0x2c1e00=(_0x36f7f6<0x3?_0xa92c24(_0x2c1e00):_0x36f7f6>0x3?_0xa92c24(_0x47ab89,_0x44c7e2,_0x2c1e00):_0xa92c24(_0x47ab89,_0x44c7e2))||_0x2c1e00;}return _0x36f7f6>0x3&&_0x2c1e00&&Object[_0x187aad(0x1ab)](_0x47ab89,_0x44c7e2,_0x2c1e00),_0x2c1e00;},__metadata=this&&this['__metadata']||function(_0x221277,_0x104cbb){const _0x5495cb=a166_0x50b8;if(typeof Reflect==='object'&&typeof Reflect[_0x5495cb(0x19c)]===_0x5495cb(0x1a2))return Reflect[_0x5495cb(0x19c)](_0x221277,_0x104cbb);},__param=this&&this[a166_0x2392af(0x18d)]||function(_0x538be6,_0x576cd2){return function(_0x396df1,_0x3a8b9b){_0x576cd2(_0x396df1,_0x3a8b9b,_0x538be6);};};Object['defineProperty'](exports,a166_0x2392af(0x194),{'value':!![]}),exports[a166_0x2392af(0x188)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a166_0x2392af(0x18a)),not_found_error_1=require(a166_0x2392af(0x1a4)),bitbucket_api_service_1=require(a166_0x2392af(0x192)),typedi_1=require('typedi'),api_error_1=require(a166_0x2392af(0x186)),git_internal_1=require(a166_0x2392af(0x197)),repo_class_1=require(a166_0x2392af(0x190)),git_repo_service_1=require(a166_0x2392af(0x1a9)),bitbucket_credentials_dto_1=require(a166_0x2392af(0x18b)),providers_tokens_1=require('../../providers.tokens');function a166_0x50b8(_0x5516bc,_0x197822){const _0x2712d7=a166_0x3029();return a166_0x50b8=function(_0xc200a2,_0x577ee4){_0xc200a2=_0xc200a2-0x174;let _0x30293e=_0x2712d7[_0xc200a2];return _0x30293e;},a166_0x50b8(_0x5516bc,_0x197822);}let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x50e030,_0xe90cfd){const _0x18c9e2=a166_0x2392af;super(_0x50e030),this[_0x18c9e2(0x1ac)]=_0x50e030,this['request']=_0x50e030['createRequest'](),this[_0x18c9e2(0x17f)]=_0xe90cfd['project'],this[_0x18c9e2(0x191)]=_0xe90cfd[_0x18c9e2(0x191)],this['credentials']=_0xe90cfd;if(!this[_0x18c9e2(0x191)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x18c9e2(0x17f)])throw new Error(errors_1[_0x18c9e2(0x177)]);}async[a166_0x2392af(0x1a1)](_0x959a6b){const _0x35567b=a166_0x2392af;try{const {name:_0x176f28}=_0x959a6b,_0x29d962={'name':_0x959a6b['name'],'is_private':_0x959a6b['private'],..._0x959a6b[_0x35567b(0x19d)]||{},'project':{'key':this[_0x35567b(0x17f)]}},_0x1120c8=await this[_0x35567b(0x19f)][_0x35567b(0x179)]('/repositories/'+this[_0x35567b(0x191)]+'/'+_0x176f28[_0x35567b(0x185)](),_0x29d962),_0x193559=repo_class_1[_0x35567b(0x175)]['fromBitbucket'](_0x1120c8,this[_0x35567b(0x1ac)],this[_0x35567b(0x17d)]);return _0x959a6b['autoInit']&&(await git_internal_1['Git'][_0x35567b(0x17e)](_0x193559,_0x959a6b['defaultBranch']||_0x35567b(0x181),'',this['credentials']),_0x193559[_0x35567b(0x17c)]=_0x959a6b['defaultBranch']||_0x35567b(0x181)),_0x193559;}catch(_0x599e50){if(_0x599e50 instanceof api_error_1['ApiError'])throw _0x599e50;throw new bad_request_error_1[(_0x35567b(0x1af))](_0x599e50);}}async['getAll'](){const _0x3cb364=a166_0x2392af;try{const _0x141114=[];let _0x2896eb;do{_0x2896eb=await this['request']['get'](_0x2896eb?_0x2896eb[_0x3cb364(0x182)]:'repositories/'+this[_0x3cb364(0x191)]),_0x141114[_0x3cb364(0x1aa)](..._0x2896eb['values']);}while(_0x2896eb['next']);return _0x141114['map'](_0x390a84=>repo_class_1['Repo'][_0x3cb364(0x1a5)](_0x390a84,this[_0x3cb364(0x1ac)],this[_0x3cb364(0x17d)]));}catch(_0x39264a){if(_0x39264a instanceof api_error_1[_0x3cb364(0x178)])throw _0x39264a;throw new not_found_error_1[(_0x3cb364(0x19e))](_0x39264a);}}async[a166_0x2392af(0x1a7)](_0x12d660){const _0x3dc2fc=a166_0x2392af;try{const _0x299999=await this[_0x3dc2fc(0x19f)][_0x3dc2fc(0x19a)](_0x3dc2fc(0x18f)+this[_0x3dc2fc(0x191)]+'/'+_0x12d660[_0x3dc2fc(0x185)]());return repo_class_1[_0x3dc2fc(0x175)][_0x3dc2fc(0x1a5)](_0x299999,this[_0x3dc2fc(0x1ac)],this[_0x3dc2fc(0x17d)]);}catch(_0x7fc47f){if(_0x7fc47f instanceof api_error_1[_0x3dc2fc(0x178)])throw _0x7fc47f;throw new not_found_error_1[(_0x3dc2fc(0x19e))](_0x7fc47f);}}async['update'](_0x3c3b02,_0x4221e2){const _0x534d5f=a166_0x2392af;await this[_0x534d5f(0x1a7)](_0x3c3b02);try{const _0xd4bf4e=await this[_0x534d5f(0x19f)]['put'](_0x534d5f(0x18f)+this[_0x534d5f(0x191)]+'/'+_0x3c3b02[_0x534d5f(0x185)](),_0x4221e2);return repo_class_1[_0x534d5f(0x175)][_0x534d5f(0x1a5)](_0xd4bf4e,this[_0x534d5f(0x1ac)],this[_0x534d5f(0x17d)]);}catch(_0x136b85){if(_0x136b85 instanceof api_error_1['ApiError'])throw _0x136b85;throw new not_found_error_1[(_0x534d5f(0x19e))](_0x136b85);}}async[a166_0x2392af(0x1a0)](_0xd2d4b3){const _0x297f40=a166_0x2392af;try{await this[_0x297f40(0x19f)]['delete']('repositories/'+this[_0x297f40(0x191)]+'/'+_0xd2d4b3[_0x297f40(0x185)]());}catch(_0x5f0105){if(_0x5f0105 instanceof api_error_1['ApiError'])throw _0x5f0105;throw new bad_request_error_1[(_0x297f40(0x1af))](_0x5f0105);}}};function a166_0x3029(){const _0x541e68=['12878591NVbqDt','BadRequestError','50cZfvrE','decorate','Repo','1045944BdoUPB','ERR_BITBUCKET_MISSING_PROJECT','ApiError','post','36YUJUPc','apply','defaultBranch','credentials','createEmptyBranch','project','7905618tmmceg','master','next','878695UpwmdN','constructor','toLowerCase','../../../../../core/errors/api.error','48MiFBmV','BitbucketRepoService','BitbucketApiService','../../../../../core/errors/bad-request.error','../../credentials/dto/bitbucket-credentials.dto','3312030YtElWO','__param','6kCinBT','repositories/','../repo.class','workspace','../../api/bitbucket-api.service','2117547AgXKlB','__esModule','2828350vVUcXY','object','../../../internal/git.internal','(((.+)+)+)+$','search','get','toString','metadata','apiBody','NotFoundError','request','delete','create','function','design:paramtypes','../../../../../core/errors/not-found.error','fromBitbucket','length','getOne','BitbucketCredentialsDto','./git-repo.service','push','defineProperty','api','Inject'];a166_0x3029=function(){return _0x541e68;};return a166_0x3029();}BitbucketRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a166_0x2392af(0x1ad)])(providers_tokens_1['Tokens'][a166_0x2392af(0x17d)])),__metadata(a166_0x2392af(0x1a3),[bitbucket_api_service_1[a166_0x2392af(0x189)],bitbucket_credentials_dto_1[a166_0x2392af(0x1a8)]])],BitbucketRepoService),exports[a166_0x2392af(0x188)]=BitbucketRepoService;