const a226_0x284675=a226_0xfd2a;function a226_0x3419(){const _0x20867b=['ERR_BITBUCKET_MISSING_PROJECT','create','post','next','1393mkTkVh','values','design:paramtypes','41408pTblrI','(((.+)+)+)+$','../../credentials/dto/bitbucket-credentials.dto','GitRepoService','BadRequestError','createRequest','1259222GESKSF','__metadata','BitbucketCredentialsDto','ITEMS_PER_RESPONSE','createEmptyBranch','name','../../providers.tokens','\x22&pagelen=','autoInit','getOne','defineProperty','BitbucketApiService','Tokens','defaultBranch','NotFoundError','delete','apiBody','BitbucketRepoService','__decorate','api','constructor','150wCDhXW','../../api/bitbucket-api.service','7588116kXbiBc','../repo.class','../../../../../core/errors/api.error','search','typedi','function','96wauazQ','length','decorate','metadata','apply','toLowerCase','request','../../../../../core/errors/not-found.error','12993710mGMJnC','ERR_BITBUCKET_MISSING_WORKSPACE','toString','workspace','repositories/','get','../../../../../core/errors/bad-request.error','../../../internal/git.internal','getAll','master','credentials','Repo','project','map','46744zbAnFi','Git','fromBitbucket','78240kwtZVn','object','update','ApiError','./git-repo.service','getOwnPropertyDescriptor','1364376enmUqu'];a226_0x3419=function(){return _0x20867b;};return a226_0x3419();}function a226_0xfd2a(_0x13f63a,_0x20e38d){const _0x4adf68=a226_0x3419();return a226_0xfd2a=function(_0x528ee4,_0x5cd2f3){_0x528ee4=_0x528ee4-0x154;let _0x3419f0=_0x4adf68[_0x528ee4];return _0x3419f0;},a226_0xfd2a(_0x13f63a,_0x20e38d);}(function(_0x542125,_0x571c04){const _0x5c3ab4=a226_0xfd2a,_0x265539=_0x542125();while(!![]){try{const _0x1febf1=parseInt(_0x5c3ab4(0x16a))/0x1+parseInt(_0x5c3ab4(0x156))/0x2*(-parseInt(_0x5c3ab4(0x187))/0x3)+parseInt(_0x5c3ab4(0x164))/0x4*(-parseInt(_0x5c3ab4(0x17f))/0x5)+parseInt(_0x5c3ab4(0x15c))/0x6+-parseInt(_0x5c3ab4(0x161))/0x7*(-parseInt(_0x5c3ab4(0x19d))/0x8)+parseInt(_0x5c3ab4(0x181))/0x9+-parseInt(_0x5c3ab4(0x18f))/0xa;if(_0x1febf1===_0x571c04)break;else _0x265539['push'](_0x265539['shift']());}catch(_0x1792ee){_0x265539['push'](_0x265539['shift']());}}}(a226_0x3419,0x99fc8));const a226_0x5cd2f3=(function(){let _0x26b516=!![];return function(_0x394926,_0x5e25ec){const _0xf7e6fd=_0x26b516?function(){const _0x5553d6=a226_0xfd2a;if(_0x5e25ec){const _0xcf994c=_0x5e25ec[_0x5553d6(0x18b)](_0x394926,arguments);return _0x5e25ec=null,_0xcf994c;}}:function(){};return _0x26b516=![],_0xf7e6fd;};}()),a226_0x528ee4=a226_0x5cd2f3(this,function(){const _0xa15934=a226_0xfd2a;return a226_0x528ee4[_0xa15934(0x191)]()['search'](_0xa15934(0x165))[_0xa15934(0x191)]()[_0xa15934(0x17e)](a226_0x528ee4)[_0xa15934(0x184)](_0xa15934(0x165));});a226_0x528ee4();'use strict';var __decorate=this&&this[a226_0x284675(0x17c)]||function(_0x28586f,_0x10fbe5,_0x225df8,_0x3b7eff){const _0x454213=a226_0x284675;var _0x27cc73=arguments[_0x454213(0x188)],_0x407d0c=_0x27cc73<0x3?_0x10fbe5:_0x3b7eff===null?_0x3b7eff=Object[_0x454213(0x15b)](_0x10fbe5,_0x225df8):_0x3b7eff,_0x248170;if(typeof Reflect===_0x454213(0x157)&&typeof Reflect[_0x454213(0x189)]==='function')_0x407d0c=Reflect[_0x454213(0x189)](_0x28586f,_0x10fbe5,_0x225df8,_0x3b7eff);else{for(var _0x6db249=_0x28586f['length']-0x1;_0x6db249>=0x0;_0x6db249--)if(_0x248170=_0x28586f[_0x6db249])_0x407d0c=(_0x27cc73<0x3?_0x248170(_0x407d0c):_0x27cc73>0x3?_0x248170(_0x10fbe5,_0x225df8,_0x407d0c):_0x248170(_0x10fbe5,_0x225df8))||_0x407d0c;}return _0x27cc73>0x3&&_0x407d0c&&Object[_0x454213(0x174)](_0x10fbe5,_0x225df8,_0x407d0c),_0x407d0c;},__metadata=this&&this[a226_0x284675(0x16b)]||function(_0x160111,_0x2fa5c9){const _0x1a3210=a226_0x284675;if(typeof Reflect===_0x1a3210(0x157)&&typeof Reflect[_0x1a3210(0x18a)]===_0x1a3210(0x186))return Reflect['metadata'](_0x160111,_0x2fa5c9);},__param=this&&this['__param']||function(_0x184d46,_0xfd2c09){return function(_0x34f360,_0x116445){_0xfd2c09(_0x34f360,_0x116445,_0x184d46);};},BitbucketRepoService_1;Object[a226_0x284675(0x174)](exports,'__esModule',{'value':!![]}),exports['BitbucketRepoService']=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a226_0x284675(0x195)),not_found_error_1=require(a226_0x284675(0x18e)),bitbucket_api_service_1=require(a226_0x284675(0x180)),typedi_1=require(a226_0x284675(0x185)),api_error_1=require(a226_0x284675(0x183)),git_internal_1=require(a226_0x284675(0x196)),repo_class_1=require(a226_0x284675(0x182)),git_repo_service_1=require(a226_0x284675(0x15a)),bitbucket_credentials_dto_1=require(a226_0x284675(0x166)),providers_tokens_1=require(a226_0x284675(0x170));let BitbucketRepoService=BitbucketRepoService_1=class BitbucketRepoService extends git_repo_service_1[a226_0x284675(0x167)]{constructor(_0x20ad68,_0x2e55e1){const _0x157e9c=a226_0x284675;super(_0x20ad68),this[_0x157e9c(0x17d)]=_0x20ad68,this[_0x157e9c(0x18d)]=_0x20ad68[_0x157e9c(0x169)](),this[_0x157e9c(0x19b)]=_0x2e55e1[_0x157e9c(0x19b)],this[_0x157e9c(0x192)]=_0x2e55e1[_0x157e9c(0x192)],this[_0x157e9c(0x199)]=_0x2e55e1;if(!this[_0x157e9c(0x192)])throw new Error(errors_1[_0x157e9c(0x190)]);if(!this[_0x157e9c(0x19b)])throw new Error(errors_1[_0x157e9c(0x15d)]);}async[a226_0x284675(0x15e)](_0x364459){const _0x2cdcb8=a226_0x284675;try{const {name:_0x3f98fb}=_0x364459,_0x45863f={'name':_0x364459[_0x2cdcb8(0x16f)],'is_private':_0x364459['private'],..._0x364459[_0x2cdcb8(0x17a)]||{},'project':{'key':this['project']}},_0x40cd16=await this[_0x2cdcb8(0x18d)][_0x2cdcb8(0x15f)]('/repositories/'+this['workspace']+'/'+_0x3f98fb[_0x2cdcb8(0x18c)](),_0x45863f),_0x22834b=repo_class_1['Repo'][_0x2cdcb8(0x155)](_0x40cd16,this[_0x2cdcb8(0x17d)],this['credentials']);return _0x364459[_0x2cdcb8(0x172)]&&(await git_internal_1[_0x2cdcb8(0x154)][_0x2cdcb8(0x16e)](_0x22834b,_0x364459[_0x2cdcb8(0x177)]||_0x2cdcb8(0x198),'',this[_0x2cdcb8(0x199)]),_0x22834b[_0x2cdcb8(0x177)]=_0x364459[_0x2cdcb8(0x177)]||_0x2cdcb8(0x198)),_0x22834b;}catch(_0x41f1e4){if(_0x41f1e4 instanceof api_error_1[_0x2cdcb8(0x159)])throw _0x41f1e4;throw new bad_request_error_1[(_0x2cdcb8(0x168))](_0x41f1e4);}}async[a226_0x284675(0x197)](){const _0x419cdc=a226_0x284675;try{const _0x2c429d=[];let _0x1b0f89,_0x25d921='repositories/'+this[_0x419cdc(0x192)]+'?q=project.key=\x22'+this['project']+_0x419cdc(0x171)+BitbucketRepoService_1[_0x419cdc(0x16d)];do{_0x1b0f89=await this[_0x419cdc(0x18d)][_0x419cdc(0x194)](_0x25d921),_0x25d921=_0x1b0f89[_0x419cdc(0x160)],_0x2c429d['push'](..._0x1b0f89[_0x419cdc(0x162)]);}while(_0x25d921);return _0x2c429d[_0x419cdc(0x19c)](_0x3ad84e=>repo_class_1[_0x419cdc(0x19a)]['fromBitbucket'](_0x3ad84e,this[_0x419cdc(0x17d)],this[_0x419cdc(0x199)]));}catch(_0x25999e){if(_0x25999e instanceof api_error_1[_0x419cdc(0x159)])throw _0x25999e;throw new not_found_error_1[(_0x419cdc(0x178))](_0x25999e);}}async[a226_0x284675(0x173)](_0x35a30e){const _0x20f8e4=a226_0x284675;try{const _0x3272a8=await this[_0x20f8e4(0x18d)][_0x20f8e4(0x194)](_0x20f8e4(0x193)+this[_0x20f8e4(0x192)]+'/'+_0x35a30e[_0x20f8e4(0x18c)]());return repo_class_1[_0x20f8e4(0x19a)][_0x20f8e4(0x155)](_0x3272a8,this[_0x20f8e4(0x17d)],this[_0x20f8e4(0x199)]);}catch(_0x80502b){if(_0x80502b instanceof api_error_1[_0x20f8e4(0x159)])throw _0x80502b;throw new not_found_error_1[(_0x20f8e4(0x178))](_0x80502b);}}async[a226_0x284675(0x158)](_0x445dbd,_0x111566){const _0x300b51=a226_0x284675;await this[_0x300b51(0x173)](_0x445dbd);try{const _0x91435a=await this[_0x300b51(0x18d)]['put']('repositories/'+this[_0x300b51(0x192)]+'/'+_0x445dbd[_0x300b51(0x18c)](),_0x111566);return repo_class_1[_0x300b51(0x19a)][_0x300b51(0x155)](_0x91435a,this[_0x300b51(0x17d)],this[_0x300b51(0x199)]);}catch(_0x2a9508){if(_0x2a9508 instanceof api_error_1[_0x300b51(0x159)])throw _0x2a9508;throw new not_found_error_1['NotFoundError'](_0x2a9508);}}async[a226_0x284675(0x179)](_0x5cff7a){const _0x138c4d=a226_0x284675;try{await this[_0x138c4d(0x18d)][_0x138c4d(0x179)]('repositories/'+this[_0x138c4d(0x192)]+'/'+_0x5cff7a[_0x138c4d(0x18c)]());}catch(_0x5224a4){if(_0x5224a4 instanceof api_error_1[_0x138c4d(0x159)])throw _0x5224a4;throw new bad_request_error_1[(_0x138c4d(0x168))](_0x5224a4);}}};BitbucketRepoService[a226_0x284675(0x16d)]=0x64,BitbucketRepoService=BitbucketRepoService_1=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a226_0x284675(0x176)]['credentials'])),__metadata(a226_0x284675(0x163),[bitbucket_api_service_1[a226_0x284675(0x175)],bitbucket_credentials_dto_1[a226_0x284675(0x16c)]])],BitbucketRepoService),exports[a226_0x284675(0x17b)]=BitbucketRepoService;