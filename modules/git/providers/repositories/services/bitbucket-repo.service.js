const a237_0x140d4b=a237_0x56f7;(function(_0x3a8e99,_0x2c392d){const _0x2a733b=a237_0x56f7,_0x57038a=_0x3a8e99();while(!![]){try{const _0x71961d=-parseInt(_0x2a733b(0xce))/0x1+-parseInt(_0x2a733b(0xed))/0x2+-parseInt(_0x2a733b(0xbd))/0x3+parseInt(_0x2a733b(0xd7))/0x4+-parseInt(_0x2a733b(0xc5))/0x5+-parseInt(_0x2a733b(0xd4))/0x6*(-parseInt(_0x2a733b(0xe4))/0x7)+-parseInt(_0x2a733b(0xb5))/0x8*(-parseInt(_0x2a733b(0xc2))/0x9);if(_0x71961d===_0x2c392d)break;else _0x57038a['push'](_0x57038a['shift']());}catch(_0xf81acf){_0x57038a['push'](_0x57038a['shift']());}}}(a237_0x3471,0x2081a));const a237_0x2ae934=(function(){let _0xa14558=!![];return function(_0x261e50,_0x3df843){const _0x59d4d5=_0xa14558?function(){const _0x1d1bf0=a237_0x56f7;if(_0x3df843){const _0x42834d=_0x3df843[_0x1d1bf0(0xc3)](_0x261e50,arguments);return _0x3df843=null,_0x42834d;}}:function(){};return _0xa14558=![],_0x59d4d5;};}()),a237_0x19b226=a237_0x2ae934(this,function(){const _0x282d07=a237_0x56f7;return a237_0x19b226[_0x282d07(0xc8)]()['search'](_0x282d07(0xc6))['toString']()[_0x282d07(0xee)](a237_0x19b226)['search']('(((.+)+)+)+$');});a237_0x19b226();'use strict';var __decorate=this&&this[a237_0x140d4b(0xd3)]||function(_0x2ca0b3,_0x1fd03a,_0x4b7346,_0x2bbfbb){const _0x2ee3f4=a237_0x140d4b;var _0x48b144=arguments['length'],_0x12b55d=_0x48b144<0x3?_0x1fd03a:_0x2bbfbb===null?_0x2bbfbb=Object['getOwnPropertyDescriptor'](_0x1fd03a,_0x4b7346):_0x2bbfbb,_0x41c51e;if(typeof Reflect===_0x2ee3f4(0xc1)&&typeof Reflect[_0x2ee3f4(0xbc)]==='function')_0x12b55d=Reflect[_0x2ee3f4(0xbc)](_0x2ca0b3,_0x1fd03a,_0x4b7346,_0x2bbfbb);else{for(var _0xe148ae=_0x2ca0b3[_0x2ee3f4(0xc7)]-0x1;_0xe148ae>=0x0;_0xe148ae--)if(_0x41c51e=_0x2ca0b3[_0xe148ae])_0x12b55d=(_0x48b144<0x3?_0x41c51e(_0x12b55d):_0x48b144>0x3?_0x41c51e(_0x1fd03a,_0x4b7346,_0x12b55d):_0x41c51e(_0x1fd03a,_0x4b7346))||_0x12b55d;}return _0x48b144>0x3&&_0x12b55d&&Object[_0x2ee3f4(0xd9)](_0x1fd03a,_0x4b7346,_0x12b55d),_0x12b55d;},__metadata=this&&this[a237_0x140d4b(0xe3)]||function(_0x54b740,_0xdb9a8b){const _0x406008=a237_0x140d4b;if(typeof Reflect===_0x406008(0xc1)&&typeof Reflect[_0x406008(0xdd)]===_0x406008(0xdb))return Reflect[_0x406008(0xdd)](_0x54b740,_0xdb9a8b);},__param=this&&this[a237_0x140d4b(0xf2)]||function(_0x41749e,_0x2eb3ee){return function(_0x4e3d6e,_0x2685b3){_0x2eb3ee(_0x4e3d6e,_0x2685b3,_0x41749e);};},BitbucketRepoService_1;function a237_0x56f7(_0x4e5d63,_0x19af78){const _0x26e27d=a237_0x3471();return a237_0x56f7=function(_0x19b226,_0x2ae934){_0x19b226=_0x19b226-0xb4;let _0x347156=_0x26e27d[_0x19b226];return _0x347156;},a237_0x56f7(_0x4e5d63,_0x19af78);}function a237_0x3471(){const _0x1aee0c=['913160FwpzcN','(((.+)+)+)+$','length','toString','push','getAll','../../credentials/dto/bitbucket-credentials.dto','delete','NotFoundError','17980UOhhJO','create','ITEMS_PER_RESPONSE','values','design:paramtypes','__decorate','6meWXmG','toLowerCase','typedi','316944dUkkeJ','BitbucketApiService','defineProperty','repositories/','function','defaultBranch','metadata','next','Service','../../../../../core/errors/bad-request.error','__esModule','BitbucketRepoService','__metadata','982268tkRuvd','BitbucketCredentialsDto','credentials','master','../../../../../core/errors/api.error','workspace','Repo','createEmptyBranch','put','379992gKgQgw','constructor','getOne','createRequest','project','__param','map','Tokens','../repo.class','name','Git','../../api/bitbucket-api.service','get','fromBitbucket','../../providers.tokens','1899192XITWtX','update','post','api','request','BadRequestError','ApiError','decorate','511812OWAbJP','../../../../../core/errors/not-found.error','../../../../../constants/errors','autoInit','object','18eYRAIC','apply','./git-repo.service'];a237_0x3471=function(){return _0x1aee0c;};return a237_0x3471();}Object['defineProperty'](exports,a237_0x140d4b(0xe1),{'value':!![]}),exports[a237_0x140d4b(0xe2)]=void 0x0;const errors_1=require(a237_0x140d4b(0xbf)),bad_request_error_1=require(a237_0x140d4b(0xe0)),not_found_error_1=require(a237_0x140d4b(0xbe)),bitbucket_api_service_1=require(a237_0x140d4b(0xf8)),typedi_1=require(a237_0x140d4b(0xd6)),api_error_1=require(a237_0x140d4b(0xe8)),git_internal_1=require('../../../internal/git.internal'),repo_class_1=require(a237_0x140d4b(0xf5)),git_repo_service_1=require(a237_0x140d4b(0xc4)),bitbucket_credentials_dto_1=require(a237_0x140d4b(0xcb)),providers_tokens_1=require(a237_0x140d4b(0xb4));let BitbucketRepoService=BitbucketRepoService_1=class BitbucketRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x4d1549,_0x9de417){const _0x47c117=a237_0x140d4b;super(_0x4d1549),this[_0x47c117(0xb8)]=_0x4d1549,this['request']=_0x4d1549[_0x47c117(0xf0)](),this[_0x47c117(0xf1)]=_0x9de417[_0x47c117(0xf1)],this[_0x47c117(0xe9)]=_0x9de417[_0x47c117(0xe9)],this[_0x47c117(0xe6)]=_0x9de417;if(!this[_0x47c117(0xe9)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x47c117(0xf1)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}async[a237_0x140d4b(0xcf)](_0xfcb8f1){const _0x5af261=a237_0x140d4b;var _0xa25655;try{const {name:_0x2e341b}=_0xfcb8f1,_0x5033cf={'name':_0xfcb8f1[_0x5af261(0xf6)],'is_private':_0xfcb8f1['private'],..._0xfcb8f1['apiBody']||{},'project':{'key':this[_0x5af261(0xf1)]}},_0x4428b5=await this['request'][_0x5af261(0xb7)]('/repositories/'+this[_0x5af261(0xe9)]+'/'+_0x2e341b[_0x5af261(0xd5)](),_0x5033cf),_0x4ed66e=repo_class_1[_0x5af261(0xea)][_0x5af261(0xfa)](_0x4428b5,this[_0x5af261(0xb8)],this['credentials']);return _0xfcb8f1[_0x5af261(0xc0)]&&(await git_internal_1[_0x5af261(0xf7)][_0x5af261(0xeb)](_0x4ed66e,_0xfcb8f1['defaultBranch']||{'name':_0x5af261(0xe7)},'',this[_0x5af261(0xe6)]),_0x4ed66e[_0x5af261(0xdc)]=((_0xa25655=_0xfcb8f1[_0x5af261(0xdc)])===null||_0xa25655===void 0x0?void 0x0:_0xa25655[_0x5af261(0xf6)])||_0x5af261(0xe7)),_0x4ed66e;}catch(_0x545c70){if(_0x545c70 instanceof api_error_1[_0x5af261(0xbb)])throw _0x545c70;throw new bad_request_error_1[(_0x5af261(0xba))](_0x545c70);}}async[a237_0x140d4b(0xca)](){const _0x35473b=a237_0x140d4b;try{const _0x166e8e=[];let _0x2f466a,_0x3c5998=_0x35473b(0xda)+this[_0x35473b(0xe9)]+'?q=project.key=\x22'+this['project']+'\x22&pagelen='+BitbucketRepoService_1[_0x35473b(0xd0)];do{_0x2f466a=await this[_0x35473b(0xb9)]['get'](_0x3c5998),_0x3c5998=_0x2f466a[_0x35473b(0xde)],_0x166e8e[_0x35473b(0xc9)](..._0x2f466a[_0x35473b(0xd1)]);}while(_0x3c5998);return _0x166e8e[_0x35473b(0xf3)](_0x131644=>repo_class_1[_0x35473b(0xea)][_0x35473b(0xfa)](_0x131644,this[_0x35473b(0xb8)],this[_0x35473b(0xe6)]));}catch(_0x494b57){if(_0x494b57 instanceof api_error_1[_0x35473b(0xbb)])throw _0x494b57;throw new not_found_error_1[(_0x35473b(0xcd))](_0x494b57);}}async[a237_0x140d4b(0xef)](_0x24d2f1){const _0x2daa41=a237_0x140d4b;try{const _0x2ee9f1=await this[_0x2daa41(0xb9)][_0x2daa41(0xf9)](_0x2daa41(0xda)+this[_0x2daa41(0xe9)]+'/'+_0x24d2f1['toLowerCase']());return repo_class_1[_0x2daa41(0xea)]['fromBitbucket'](_0x2ee9f1,this[_0x2daa41(0xb8)],this['credentials']);}catch(_0x2c47b6){if(_0x2c47b6 instanceof api_error_1[_0x2daa41(0xbb)])throw _0x2c47b6;throw new not_found_error_1[(_0x2daa41(0xcd))](_0x2c47b6);}}async[a237_0x140d4b(0xb6)](_0x52ee94,_0x2601f5){const _0x508846=a237_0x140d4b;await this[_0x508846(0xef)](_0x52ee94);try{const _0x4ddc66=await this[_0x508846(0xb9)][_0x508846(0xec)](_0x508846(0xda)+this[_0x508846(0xe9)]+'/'+_0x52ee94[_0x508846(0xd5)](),_0x2601f5);return repo_class_1[_0x508846(0xea)][_0x508846(0xfa)](_0x4ddc66,this[_0x508846(0xb8)],this[_0x508846(0xe6)]);}catch(_0x2b8c37){if(_0x2b8c37 instanceof api_error_1['ApiError'])throw _0x2b8c37;throw new not_found_error_1[(_0x508846(0xcd))](_0x2b8c37);}}async[a237_0x140d4b(0xcc)](_0x283951){const _0x550ea4=a237_0x140d4b;try{await this[_0x550ea4(0xb9)][_0x550ea4(0xcc)](_0x550ea4(0xda)+this[_0x550ea4(0xe9)]+'/'+_0x283951['toLowerCase']());}catch(_0x2ce614){if(_0x2ce614 instanceof api_error_1[_0x550ea4(0xbb)])throw _0x2ce614;throw new bad_request_error_1[(_0x550ea4(0xba))](_0x2ce614);}}};BitbucketRepoService[a237_0x140d4b(0xd0)]=0x64,BitbucketRepoService=BitbucketRepoService_1=__decorate([(0x0,typedi_1[a237_0x140d4b(0xdf)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a237_0x140d4b(0xf4)][a237_0x140d4b(0xe6)])),__metadata(a237_0x140d4b(0xd2),[bitbucket_api_service_1[a237_0x140d4b(0xd8)],bitbucket_credentials_dto_1[a237_0x140d4b(0xe5)]])],BitbucketRepoService),exports[a237_0x140d4b(0xe2)]=BitbucketRepoService;