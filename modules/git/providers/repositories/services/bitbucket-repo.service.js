const a210_0x1f0f2d=a210_0x5133;(function(_0xa1d616,_0x31a6b3){const _0x12f71a=a210_0x5133,_0x3c5090=_0xa1d616();while(!![]){try{const _0x2ffbc9=-parseInt(_0x12f71a(0x204))/0x1+-parseInt(_0x12f71a(0x1f3))/0x2*(parseInt(_0x12f71a(0x20c))/0x3)+parseInt(_0x12f71a(0x225))/0x4*(parseInt(_0x12f71a(0x1e9))/0x5)+-parseInt(_0x12f71a(0x215))/0x6+-parseInt(_0x12f71a(0x220))/0x7+parseInt(_0x12f71a(0x1ef))/0x8+-parseInt(_0x12f71a(0x201))/0x9*(-parseInt(_0x12f71a(0x21e))/0xa);if(_0x2ffbc9===_0x31a6b3)break;else _0x3c5090['push'](_0x3c5090['shift']());}catch(_0x52ebd7){_0x3c5090['push'](_0x3c5090['shift']());}}}(a210_0x46b0,0x46e8d));const a210_0x2784e7=(function(){let _0x4c5156=!![];return function(_0x13509c,_0x521599){const _0x571aec=_0x4c5156?function(){if(_0x521599){const _0x4a5d44=_0x521599['apply'](_0x13509c,arguments);return _0x521599=null,_0x4a5d44;}}:function(){};return _0x4c5156=![],_0x571aec;};}()),a210_0xaa32ad=a210_0x2784e7(this,function(){const _0x12e7f2=a210_0x5133;return a210_0xaa32ad['toString']()[_0x12e7f2(0x207)]('(((.+)+)+)+$')[_0x12e7f2(0x1f0)]()['constructor'](a210_0xaa32ad)[_0x12e7f2(0x207)](_0x12e7f2(0x1fb));});function a210_0x5133(_0x3d0857,_0x5bff7a){const _0x1384b5=a210_0x46b0();return a210_0x5133=function(_0xaa32ad,_0x2784e7){_0xaa32ad=_0xaa32ad-0x1e8;let _0x46b014=_0x1384b5[_0xaa32ad];return _0x46b014;},a210_0x5133(_0x3d0857,_0x5bff7a);}a210_0xaa32ad();'use strict';var __decorate=this&&this['__decorate']||function(_0x16d0af,_0x1a52ac,_0x2ec58b,_0x4bbf97){const _0x1bdec7=a210_0x5133;var _0x2096cb=arguments[_0x1bdec7(0x1e8)],_0x3ff49d=_0x2096cb<0x3?_0x1a52ac:_0x4bbf97===null?_0x4bbf97=Object[_0x1bdec7(0x202)](_0x1a52ac,_0x2ec58b):_0x4bbf97,_0x4c66f7;if(typeof Reflect===_0x1bdec7(0x222)&&typeof Reflect[_0x1bdec7(0x223)]==='function')_0x3ff49d=Reflect['decorate'](_0x16d0af,_0x1a52ac,_0x2ec58b,_0x4bbf97);else{for(var _0x5b60c3=_0x16d0af['length']-0x1;_0x5b60c3>=0x0;_0x5b60c3--)if(_0x4c66f7=_0x16d0af[_0x5b60c3])_0x3ff49d=(_0x2096cb<0x3?_0x4c66f7(_0x3ff49d):_0x2096cb>0x3?_0x4c66f7(_0x1a52ac,_0x2ec58b,_0x3ff49d):_0x4c66f7(_0x1a52ac,_0x2ec58b))||_0x3ff49d;}return _0x2096cb>0x3&&_0x3ff49d&&Object[_0x1bdec7(0x1f5)](_0x1a52ac,_0x2ec58b,_0x3ff49d),_0x3ff49d;},__metadata=this&&this[a210_0x1f0f2d(0x211)]||function(_0x2ab5f6,_0x5b3d05){const _0x33713d=a210_0x1f0f2d;if(typeof Reflect===_0x33713d(0x222)&&typeof Reflect[_0x33713d(0x21f)]===_0x33713d(0x1f9))return Reflect[_0x33713d(0x21f)](_0x2ab5f6,_0x5b3d05);},__param=this&&this['__param']||function(_0xcd222d,_0xf4fb8b){return function(_0xa2094b,_0x49ceaa){_0xf4fb8b(_0xa2094b,_0x49ceaa,_0xcd222d);};},BitbucketRepoService_1;function a210_0x46b0(){const _0x28d361=['360175RDERgX','../../../../../core/errors/not-found.error','next','search','request','map','put','../../../../../core/errors/api.error','30ZkRsNx','getOne','design:paramtypes','Git','api','__metadata','BitbucketRepoService','Service','Inject','410190DqGxYk','workspace','private','./git-repo.service','../../providers.tokens','../../api/bitbucket-api.service','project','Repo','delete','28990DUSLmA','metadata','560gcazlX','repositories/','object','decorate','name','8dCbdtC','ERR_BITBUCKET_MISSING_PROJECT','NotFoundError','length','1134095XyJmxy','createRequest','toLowerCase','fromBitbucket','BadRequestError','credentials','1100136TBriKw','toString','ApiError','get','26600ImtpMI','create','defineProperty','BitbucketCredentialsDto','post','../../credentials/dto/bitbucket-credentials.dto','function','BitbucketApiService','(((.+)+)+)+$','ERR_BITBUCKET_MISSING_WORKSPACE','master','GitRepoService','../../../internal/git.internal','createEmptyBranch','810mUOdFs','getOwnPropertyDescriptor','defaultBranch'];a210_0x46b0=function(){return _0x28d361;};return a210_0x46b0();}Object[a210_0x1f0f2d(0x1f5)](exports,'__esModule',{'value':!![]}),exports[a210_0x1f0f2d(0x212)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a210_0x1f0f2d(0x205)),bitbucket_api_service_1=require(a210_0x1f0f2d(0x21a)),typedi_1=require('typedi'),api_error_1=require(a210_0x1f0f2d(0x20b)),git_internal_1=require(a210_0x1f0f2d(0x1ff)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a210_0x1f0f2d(0x218)),bitbucket_credentials_dto_1=require(a210_0x1f0f2d(0x1f8)),providers_tokens_1=require(a210_0x1f0f2d(0x219));let BitbucketRepoService=BitbucketRepoService_1=class BitbucketRepoService extends git_repo_service_1[a210_0x1f0f2d(0x1fe)]{constructor(_0x30b033,_0x59c240){const _0x450eda=a210_0x1f0f2d;super(_0x30b033),this[_0x450eda(0x210)]=_0x30b033,this[_0x450eda(0x208)]=_0x30b033[_0x450eda(0x1ea)](),this[_0x450eda(0x21b)]=_0x59c240[_0x450eda(0x21b)],this[_0x450eda(0x216)]=_0x59c240[_0x450eda(0x216)],this[_0x450eda(0x1ee)]=_0x59c240;if(!this[_0x450eda(0x216)])throw new Error(errors_1[_0x450eda(0x1fc)]);if(!this[_0x450eda(0x21b)])throw new Error(errors_1[_0x450eda(0x226)]);}async[a210_0x1f0f2d(0x1f4)](_0x19c605){const _0x3b8c69=a210_0x1f0f2d;try{const {name:_0xd2888b}=_0x19c605,_0x5c4a96={'name':_0x19c605[_0x3b8c69(0x224)],'is_private':_0x19c605[_0x3b8c69(0x217)],..._0x19c605['apiBody']||{},'project':{'key':this[_0x3b8c69(0x21b)]}},_0xa74bf0=await this[_0x3b8c69(0x208)][_0x3b8c69(0x1f7)]('/repositories/'+this[_0x3b8c69(0x216)]+'/'+_0xd2888b[_0x3b8c69(0x1eb)](),_0x5c4a96),_0x1c7d9d=repo_class_1[_0x3b8c69(0x21c)][_0x3b8c69(0x1ec)](_0xa74bf0,this[_0x3b8c69(0x210)],this['credentials']);return _0x19c605['autoInit']&&(await git_internal_1[_0x3b8c69(0x20f)][_0x3b8c69(0x200)](_0x1c7d9d,_0x19c605[_0x3b8c69(0x203)]||_0x3b8c69(0x1fd),'',this['credentials']),_0x1c7d9d[_0x3b8c69(0x203)]=_0x19c605[_0x3b8c69(0x203)]||_0x3b8c69(0x1fd)),_0x1c7d9d;}catch(_0x1abbf3){if(_0x1abbf3 instanceof api_error_1[_0x3b8c69(0x1f1)])throw _0x1abbf3;throw new bad_request_error_1[(_0x3b8c69(0x1ed))](_0x1abbf3);}}async['getAll'](){const _0x36c5e2=a210_0x1f0f2d;try{const _0x2f03d8=[];let _0x565e9f,_0x24f5c5=_0x36c5e2(0x221)+this['workspace']+'?q=project.key=\x22'+this[_0x36c5e2(0x21b)]+'\x22&pagelen='+BitbucketRepoService_1['ITEMS_PER_RESPONSE'];do{_0x565e9f=await this[_0x36c5e2(0x208)][_0x36c5e2(0x1f2)](_0x24f5c5),_0x24f5c5=_0x565e9f[_0x36c5e2(0x206)],_0x2f03d8['push'](..._0x565e9f['values']);}while(_0x24f5c5);return _0x2f03d8[_0x36c5e2(0x209)](_0x539811=>repo_class_1[_0x36c5e2(0x21c)][_0x36c5e2(0x1ec)](_0x539811,this[_0x36c5e2(0x210)],this[_0x36c5e2(0x1ee)]));}catch(_0x2aa361){if(_0x2aa361 instanceof api_error_1[_0x36c5e2(0x1f1)])throw _0x2aa361;throw new not_found_error_1['NotFoundError'](_0x2aa361);}}async[a210_0x1f0f2d(0x20d)](_0x1f402f){const _0x4c444d=a210_0x1f0f2d;try{const _0x283d3f=await this[_0x4c444d(0x208)]['get'](_0x4c444d(0x221)+this[_0x4c444d(0x216)]+'/'+_0x1f402f[_0x4c444d(0x1eb)]());return repo_class_1[_0x4c444d(0x21c)][_0x4c444d(0x1ec)](_0x283d3f,this[_0x4c444d(0x210)],this[_0x4c444d(0x1ee)]);}catch(_0x5b2e1e){if(_0x5b2e1e instanceof api_error_1['ApiError'])throw _0x5b2e1e;throw new not_found_error_1[(_0x4c444d(0x227))](_0x5b2e1e);}}async['update'](_0x2b06e1,_0x4b671e){const _0x4c34be=a210_0x1f0f2d;await this['getOne'](_0x2b06e1);try{const _0x300e5f=await this[_0x4c34be(0x208)][_0x4c34be(0x20a)]('repositories/'+this['workspace']+'/'+_0x2b06e1[_0x4c34be(0x1eb)](),_0x4b671e);return repo_class_1['Repo'][_0x4c34be(0x1ec)](_0x300e5f,this[_0x4c34be(0x210)],this['credentials']);}catch(_0x14a1de){if(_0x14a1de instanceof api_error_1[_0x4c34be(0x1f1)])throw _0x14a1de;throw new not_found_error_1[(_0x4c34be(0x227))](_0x14a1de);}}async['delete'](_0x2f3841){const _0x4ebb69=a210_0x1f0f2d;try{await this[_0x4ebb69(0x208)][_0x4ebb69(0x21d)]('repositories/'+this[_0x4ebb69(0x216)]+'/'+_0x2f3841[_0x4ebb69(0x1eb)]());}catch(_0x32dfa4){if(_0x32dfa4 instanceof api_error_1['ApiError'])throw _0x32dfa4;throw new bad_request_error_1[(_0x4ebb69(0x1ed))](_0x32dfa4);}}};BitbucketRepoService['ITEMS_PER_RESPONSE']=0x64,BitbucketRepoService=BitbucketRepoService_1=__decorate([(0x0,typedi_1[a210_0x1f0f2d(0x213)])(),__param(0x1,(0x0,typedi_1[a210_0x1f0f2d(0x214)])(providers_tokens_1['Tokens']['credentials'])),__metadata(a210_0x1f0f2d(0x20e),[bitbucket_api_service_1[a210_0x1f0f2d(0x1fa)],bitbucket_credentials_dto_1[a210_0x1f0f2d(0x1f6)]])],BitbucketRepoService),exports['BitbucketRepoService']=BitbucketRepoService;