const a166_0x180522=a166_0x53d7;(function(_0x5bcbd5,_0x433d35){const _0x26b3d6=a166_0x53d7,_0x280b13=_0x5bcbd5();while(!![]){try{const _0x468a8f=-parseInt(_0x26b3d6(0x188))/0x1*(-parseInt(_0x26b3d6(0x181))/0x2)+-parseInt(_0x26b3d6(0x185))/0x3+-parseInt(_0x26b3d6(0x19e))/0x4+-parseInt(_0x26b3d6(0x179))/0x5*(-parseInt(_0x26b3d6(0x195))/0x6)+parseInt(_0x26b3d6(0x19c))/0x7*(-parseInt(_0x26b3d6(0x17b))/0x8)+-parseInt(_0x26b3d6(0x1a1))/0x9+-parseInt(_0x26b3d6(0x1a2))/0xa*(-parseInt(_0x26b3d6(0x19f))/0xb);if(_0x468a8f===_0x433d35)break;else _0x280b13['push'](_0x280b13['shift']());}catch(_0x5e7111){_0x280b13['push'](_0x280b13['shift']());}}}(a166_0x3229,0xcc66c));const a166_0x5d4630=(function(){let _0x525314=!![];return function(_0xbc5041,_0x414968){const _0x47583f=_0x525314?function(){if(_0x414968){const _0x2588bd=_0x414968['apply'](_0xbc5041,arguments);return _0x414968=null,_0x2588bd;}}:function(){};return _0x525314=![],_0x47583f;};}()),a166_0x3d110e=a166_0x5d4630(this,function(){const _0x18de58=a166_0x53d7;return a166_0x3d110e[_0x18de58(0x19a)]()[_0x18de58(0x194)]('(((.+)+)+)+$')[_0x18de58(0x19a)]()['constructor'](a166_0x3d110e)['search'](_0x18de58(0x19d));});a166_0x3d110e();'use strict';var __decorate=this&&this[a166_0x180522(0x192)]||function(_0x28b472,_0x16697a,_0x12566f,_0x2ca23d){const _0x5256db=a166_0x180522;var _0x4d7089=arguments[_0x5256db(0x198)],_0x237aaf=_0x4d7089<0x3?_0x16697a:_0x2ca23d===null?_0x2ca23d=Object[_0x5256db(0x17e)](_0x16697a,_0x12566f):_0x2ca23d,_0x3015d3;if(typeof Reflect===_0x5256db(0x16c)&&typeof Reflect[_0x5256db(0x169)]==='function')_0x237aaf=Reflect[_0x5256db(0x169)](_0x28b472,_0x16697a,_0x12566f,_0x2ca23d);else{for(var _0x49b39e=_0x28b472['length']-0x1;_0x49b39e>=0x0;_0x49b39e--)if(_0x3015d3=_0x28b472[_0x49b39e])_0x237aaf=(_0x4d7089<0x3?_0x3015d3(_0x237aaf):_0x4d7089>0x3?_0x3015d3(_0x16697a,_0x12566f,_0x237aaf):_0x3015d3(_0x16697a,_0x12566f))||_0x237aaf;}return _0x4d7089>0x3&&_0x237aaf&&Object[_0x5256db(0x161)](_0x16697a,_0x12566f,_0x237aaf),_0x237aaf;},__metadata=this&&this[a166_0x180522(0x16d)]||function(_0x1d014b,_0x223b40){const _0x129380=a166_0x180522;if(typeof Reflect===_0x129380(0x16c)&&typeof Reflect[_0x129380(0x197)]==='function')return Reflect[_0x129380(0x197)](_0x1d014b,_0x223b40);},__param=this&&this[a166_0x180522(0x16f)]||function(_0x1ed87d,_0x512423){return function(_0x1ae62f,_0x3bbed0){_0x512423(_0x1ae62f,_0x3bbed0,_0x1ed87d);};};function a166_0x53d7(_0x10e2c9,_0x518887){const _0x32744d=a166_0x3229();return a166_0x53d7=function(_0x3d110e,_0x5d4630){_0x3d110e=_0x3d110e-0x15f;let _0x3229e7=_0x32744d[_0x3d110e];return _0x3229e7;},a166_0x53d7(_0x10e2c9,_0x518887);}function a166_0x3229(){const _0x25bde9=['__param','Git','next','values','create','private','repositories/','BadRequestError','post','credentials','152755vixmNl','defaultBranch','3736mIgAjO','Service','BitbucketRepoService','getOwnPropertyDescriptor','Inject','ApiError','584IjudRG','put','toLowerCase','Repo','4325376JBvzLl','__esModule','ERR_BITBUCKET_MISSING_PROJECT','541AodGgU','delete','api','Tokens','NotFoundError','createRequest','fromBitbucket','push','autoInit','design:paramtypes','__decorate','/repositories/','search','78aqsdzh','../../providers.tokens','metadata','length','getOne','toString','request','21574KfbApz','(((.+)+)+)+$','1720628HMpUpd','66AdrwHZ','update','14969268gGWMLF','8760980ZVnTKj','map','typedi','../../../../../core/errors/bad-request.error','project','master','defineProperty','../../../../../core/errors/api.error','apiBody','get','getAll','name','workspace','../../credentials/dto/bitbucket-credentials.dto','decorate','../../../internal/git.internal','GitRepoService','object','__metadata','BitbucketApiService'];a166_0x3229=function(){return _0x25bde9;};return a166_0x3229();}Object[a166_0x180522(0x161)](exports,a166_0x180522(0x186),{'value':!![]}),exports[a166_0x180522(0x17d)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a166_0x180522(0x1a5)),not_found_error_1=require('../../../../../core/errors/not-found.error'),bitbucket_api_service_1=require('../../api/bitbucket-api.service'),typedi_1=require(a166_0x180522(0x1a4)),api_error_1=require(a166_0x180522(0x162)),git_internal_1=require(a166_0x180522(0x16a)),repo_class_1=require('../repo.class'),git_repo_service_1=require('./git-repo.service'),bitbucket_credentials_dto_1=require(a166_0x180522(0x168)),providers_tokens_1=require(a166_0x180522(0x196));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a166_0x180522(0x16b)]{constructor(_0x5144b1,_0x298574){const _0x42c7eb=a166_0x180522;super(_0x5144b1),this[_0x42c7eb(0x18a)]=_0x5144b1,this[_0x42c7eb(0x19b)]=_0x5144b1[_0x42c7eb(0x18d)](),this['project']=_0x298574[_0x42c7eb(0x15f)],this[_0x42c7eb(0x167)]=_0x298574[_0x42c7eb(0x167)],this[_0x42c7eb(0x178)]=_0x298574;if(!this[_0x42c7eb(0x167)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x42c7eb(0x15f)])throw new Error(errors_1[_0x42c7eb(0x187)]);}async[a166_0x180522(0x173)](_0x27c835){const _0x4eaffc=a166_0x180522;try{const {name:_0x1c2ac3}=_0x27c835,_0x2b7585={'name':_0x27c835[_0x4eaffc(0x166)],'is_private':_0x27c835[_0x4eaffc(0x174)],..._0x27c835[_0x4eaffc(0x163)]||{},'project':{'key':this['project']}},_0x3dea25=await this[_0x4eaffc(0x19b)][_0x4eaffc(0x177)](_0x4eaffc(0x193)+this[_0x4eaffc(0x167)]+'/'+_0x1c2ac3[_0x4eaffc(0x183)](),_0x2b7585),_0x3eb168=repo_class_1[_0x4eaffc(0x184)][_0x4eaffc(0x18e)](_0x3dea25,this[_0x4eaffc(0x18a)],this[_0x4eaffc(0x178)]);return _0x27c835[_0x4eaffc(0x190)]&&(await git_internal_1[_0x4eaffc(0x170)]['createEmptyBranch'](_0x3eb168,_0x27c835[_0x4eaffc(0x17a)]||_0x4eaffc(0x160),'',this[_0x4eaffc(0x178)]),_0x3eb168[_0x4eaffc(0x17a)]=_0x27c835['defaultBranch']||'master'),_0x3eb168;}catch(_0x524a47){if(_0x524a47 instanceof api_error_1['ApiError'])throw _0x524a47;throw new bad_request_error_1[(_0x4eaffc(0x176))](_0x524a47);}}async[a166_0x180522(0x165)](){const _0x53fc26=a166_0x180522;try{const _0x42113f=[];let _0x1b4536;do{_0x1b4536=await this[_0x53fc26(0x19b)][_0x53fc26(0x164)](_0x1b4536?_0x1b4536[_0x53fc26(0x171)]:'repositories/'+this['workspace']),_0x42113f[_0x53fc26(0x18f)](..._0x1b4536[_0x53fc26(0x172)]);}while(_0x1b4536[_0x53fc26(0x171)]);return _0x42113f[_0x53fc26(0x1a3)](_0x289e03=>repo_class_1[_0x53fc26(0x184)][_0x53fc26(0x18e)](_0x289e03,this[_0x53fc26(0x18a)],this['credentials']));}catch(_0x4463e9){if(_0x4463e9 instanceof api_error_1[_0x53fc26(0x180)])throw _0x4463e9;throw new not_found_error_1[(_0x53fc26(0x18c))](_0x4463e9);}}async[a166_0x180522(0x199)](_0x638e58){const _0x5bc54a=a166_0x180522;try{const _0x3d867b=await this['request']['get'](_0x5bc54a(0x175)+this[_0x5bc54a(0x167)]+'/'+_0x638e58[_0x5bc54a(0x183)]());return repo_class_1['Repo'][_0x5bc54a(0x18e)](_0x3d867b,this['api'],this['credentials']);}catch(_0x4203d1){if(_0x4203d1 instanceof api_error_1[_0x5bc54a(0x180)])throw _0x4203d1;throw new not_found_error_1[(_0x5bc54a(0x18c))](_0x4203d1);}}async[a166_0x180522(0x1a0)](_0x4284d6,_0x5c96c0){const _0x49de91=a166_0x180522;await this['getOne'](_0x4284d6);try{const _0xa51618=await this['request'][_0x49de91(0x182)](_0x49de91(0x175)+this[_0x49de91(0x167)]+'/'+_0x4284d6[_0x49de91(0x183)](),_0x5c96c0);return repo_class_1[_0x49de91(0x184)][_0x49de91(0x18e)](_0xa51618,this[_0x49de91(0x18a)],this['credentials']);}catch(_0x4ec928){if(_0x4ec928 instanceof api_error_1['ApiError'])throw _0x4ec928;throw new not_found_error_1['NotFoundError'](_0x4ec928);}}async['delete'](_0x31a329){const _0x19b586=a166_0x180522;try{await this[_0x19b586(0x19b)][_0x19b586(0x189)](_0x19b586(0x175)+this[_0x19b586(0x167)]+'/'+_0x31a329[_0x19b586(0x183)]());}catch(_0xd1de7e){if(_0xd1de7e instanceof api_error_1[_0x19b586(0x180)])throw _0xd1de7e;throw new bad_request_error_1[(_0x19b586(0x176))](_0xd1de7e);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a166_0x180522(0x17c)])(),__param(0x1,(0x0,typedi_1[a166_0x180522(0x17f)])(providers_tokens_1[a166_0x180522(0x18b)][a166_0x180522(0x178)])),__metadata(a166_0x180522(0x191),[bitbucket_api_service_1[a166_0x180522(0x16e)],bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketRepoService),exports[a166_0x180522(0x17d)]=BitbucketRepoService;