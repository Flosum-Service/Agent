const a153_0x42a6dc=a153_0x5b4c;(function(_0x3771d2,_0x2210f5){const _0x3ee773=a153_0x5b4c,_0x3f92fa=_0x3771d2();while(!![]){try{const _0x2a8c3c=parseInt(_0x3ee773(0xe8))/0x1+-parseInt(_0x3ee773(0x111))/0x2*(parseInt(_0x3ee773(0x118))/0x3)+parseInt(_0x3ee773(0xf9))/0x4+-parseInt(_0x3ee773(0xf4))/0x5+-parseInt(_0x3ee773(0xfb))/0x6*(parseInt(_0x3ee773(0x103))/0x7)+-parseInt(_0x3ee773(0x105))/0x8+parseInt(_0x3ee773(0xef))/0x9;if(_0x2a8c3c===_0x2210f5)break;else _0x3f92fa['push'](_0x3f92fa['shift']());}catch(_0x4780c8){_0x3f92fa['push'](_0x3f92fa['shift']());}}}(a153_0x3900,0xd93c5));const a153_0x3f0ac8=(function(){let _0x2957c5=!![];return function(_0x23c9f0,_0x3e751d){const _0x41d202=_0x2957c5?function(){const _0x2fefdb=a153_0x5b4c;if(_0x3e751d){const _0x173346=_0x3e751d[_0x2fefdb(0xf8)](_0x23c9f0,arguments);return _0x3e751d=null,_0x173346;}}:function(){};return _0x2957c5=![],_0x41d202;};}()),a153_0xd6d96=a153_0x3f0ac8(this,function(){const _0x1a1400=a153_0x5b4c;return a153_0xd6d96[_0x1a1400(0x10c)]()[_0x1a1400(0xe6)]('(((.+)+)+)+$')[_0x1a1400(0x10c)]()['constructor'](a153_0xd6d96)['search']('(((.+)+)+)+$');});function a153_0x5b4c(_0x50cf69,_0x5957bc){const _0x89dc14=a153_0x3900();return a153_0x5b4c=function(_0xd6d96,_0x3f0ac8){_0xd6d96=_0xd6d96-0xdb;let _0x39001b=_0x89dc14[_0xd6d96];return _0x39001b;},a153_0x5b4c(_0x50cf69,_0x5957bc);}a153_0xd6d96();function a153_0x3900(){const _0x39ee52=['1281615RpjaFh','__esModule','private','defaultBranch','BitbucketApiService','BitbucketCredentialsDto','getOne','25736301DbYFWj','decorate','master','object','api','153610sGevbs','Inject','../../api/bitbucket-api.service','createRequest','apply','499824BJbrtc','../../../../../core/errors/bad-request.error','54oEyxeW','BadRequestError','post','credentials','../repo.class','workspace','../../../internal/git.internal','typedi','1034453gCXcbR','../../credentials/dto/bitbucket-credentials.dto','11773392cEMYhR','Tokens','ERR_BITBUCKET_MISSING_WORKSPACE','get','createEmptyBranch','__decorate','/repositories/','toString','apiBody','next','getOwnPropertyDescriptor','Repo','2twOxCJ','metadata','repositories/','request','function','GitRepoService','create','1631868AfSqIv','ERR_BITBUCKET_MISSING_PROJECT','project','design:paramtypes','update','BitbucketRepoService','length','fromBitbucket','toLowerCase','getAll','name','defineProperty','../../providers.tokens','delete','NotFoundError','ApiError','search','push'];a153_0x3900=function(){return _0x39ee52;};return a153_0x3900();}'use strict';var __decorate=this&&this[a153_0x42a6dc(0x10a)]||function(_0x3e2fa6,_0xc20a06,_0x2a52a4,_0x468ed1){const _0x206c7d=a153_0x42a6dc;var _0x4c0738=arguments['length'],_0x1e6fec=_0x4c0738<0x3?_0xc20a06:_0x468ed1===null?_0x468ed1=Object[_0x206c7d(0x10f)](_0xc20a06,_0x2a52a4):_0x468ed1,_0x33d4b4;if(typeof Reflect==='object'&&typeof Reflect[_0x206c7d(0xf0)]===_0x206c7d(0x115))_0x1e6fec=Reflect[_0x206c7d(0xf0)](_0x3e2fa6,_0xc20a06,_0x2a52a4,_0x468ed1);else{for(var _0x3b527e=_0x3e2fa6[_0x206c7d(0xdc)]-0x1;_0x3b527e>=0x0;_0x3b527e--)if(_0x33d4b4=_0x3e2fa6[_0x3b527e])_0x1e6fec=(_0x4c0738<0x3?_0x33d4b4(_0x1e6fec):_0x4c0738>0x3?_0x33d4b4(_0xc20a06,_0x2a52a4,_0x1e6fec):_0x33d4b4(_0xc20a06,_0x2a52a4))||_0x1e6fec;}return _0x4c0738>0x3&&_0x1e6fec&&Object[_0x206c7d(0xe1)](_0xc20a06,_0x2a52a4,_0x1e6fec),_0x1e6fec;},__metadata=this&&this['__metadata']||function(_0x560ced,_0x15dbe0){const _0x561528=a153_0x42a6dc;if(typeof Reflect===_0x561528(0xf2)&&typeof Reflect[_0x561528(0x112)]===_0x561528(0x115))return Reflect[_0x561528(0x112)](_0x560ced,_0x15dbe0);},__param=this&&this['__param']||function(_0x3ad39f,_0x544a7a){return function(_0x45f0aa,_0x4110a5){_0x544a7a(_0x45f0aa,_0x4110a5,_0x3ad39f);};};Object[a153_0x42a6dc(0xe1)](exports,a153_0x42a6dc(0xe9),{'value':!![]}),exports[a153_0x42a6dc(0xdb)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a153_0x42a6dc(0xfa)),not_found_error_1=require('../../../../../core/errors/not-found.error'),bitbucket_api_service_1=require(a153_0x42a6dc(0xf6)),typedi_1=require(a153_0x42a6dc(0x102)),api_error_1=require('../../../../../core/errors/api.error'),git_internal_1=require(a153_0x42a6dc(0x101)),repo_class_1=require(a153_0x42a6dc(0xff)),git_repo_service_1=require('./git-repo.service'),bitbucket_credentials_dto_1=require(a153_0x42a6dc(0x104)),providers_tokens_1=require(a153_0x42a6dc(0xe2));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a153_0x42a6dc(0x116)]{constructor(_0x180ce8,_0x12836c){const _0x4fd2d3=a153_0x42a6dc;super(_0x180ce8),this[_0x4fd2d3(0xf3)]=_0x180ce8,this[_0x4fd2d3(0x114)]=_0x180ce8[_0x4fd2d3(0xf7)](),this[_0x4fd2d3(0x11a)]=_0x12836c[_0x4fd2d3(0x11a)],this[_0x4fd2d3(0x100)]=_0x12836c[_0x4fd2d3(0x100)],this[_0x4fd2d3(0xfe)]=_0x12836c;if(!this[_0x4fd2d3(0x100)])throw new Error(errors_1[_0x4fd2d3(0x107)]);if(!this[_0x4fd2d3(0x11a)])throw new Error(errors_1[_0x4fd2d3(0x119)]);}async[a153_0x42a6dc(0x117)](_0x1ae753){const _0x517c0c=a153_0x42a6dc;try{const {name:_0x4936fb}=_0x1ae753,_0x2d83ce={'name':_0x1ae753[_0x517c0c(0xe0)],'is_private':_0x1ae753[_0x517c0c(0xea)],..._0x1ae753[_0x517c0c(0x10d)]||{},'project':{'key':this[_0x517c0c(0x11a)]}},_0x3b2bba=await this[_0x517c0c(0x114)][_0x517c0c(0xfd)](_0x517c0c(0x10b)+this[_0x517c0c(0x100)]+'/'+_0x4936fb[_0x517c0c(0xde)](),_0x2d83ce),_0x2ab7b0=repo_class_1[_0x517c0c(0x110)][_0x517c0c(0xdd)](_0x3b2bba,this[_0x517c0c(0xf3)],this[_0x517c0c(0xfe)]);return _0x1ae753['autoInit']&&(await git_internal_1['Git'][_0x517c0c(0x109)](_0x2ab7b0,_0x1ae753[_0x517c0c(0xeb)]||_0x517c0c(0xf1),'',this[_0x517c0c(0xfe)]),_0x2ab7b0[_0x517c0c(0xeb)]=_0x1ae753[_0x517c0c(0xeb)]||'master'),_0x2ab7b0;}catch(_0x3fbc68){if(_0x3fbc68 instanceof api_error_1['ApiError'])throw _0x3fbc68;throw new bad_request_error_1[(_0x517c0c(0xfc))](_0x3fbc68);}}async[a153_0x42a6dc(0xdf)](){const _0x1b50c8=a153_0x42a6dc;try{const _0x11839d=[];let _0x3ca300;do{_0x3ca300=await this['request'][_0x1b50c8(0x108)](_0x3ca300?_0x3ca300['next']:_0x1b50c8(0x113)+this[_0x1b50c8(0x100)]),_0x11839d[_0x1b50c8(0xe7)](..._0x3ca300['values']);}while(_0x3ca300[_0x1b50c8(0x10e)]);return _0x11839d['map'](_0x495a0c=>repo_class_1[_0x1b50c8(0x110)][_0x1b50c8(0xdd)](_0x495a0c,this[_0x1b50c8(0xf3)],this['credentials']));}catch(_0x189b86){if(_0x189b86 instanceof api_error_1[_0x1b50c8(0xe5)])throw _0x189b86;throw new not_found_error_1[(_0x1b50c8(0xe4))](_0x189b86);}}async[a153_0x42a6dc(0xee)](_0x5517be){const _0x23b468=a153_0x42a6dc;try{const _0x4ec334=await this['request'][_0x23b468(0x108)](_0x23b468(0x113)+this['workspace']+'/'+_0x5517be[_0x23b468(0xde)]());return repo_class_1['Repo']['fromBitbucket'](_0x4ec334,this[_0x23b468(0xf3)],this[_0x23b468(0xfe)]);}catch(_0x2df26d){if(_0x2df26d instanceof api_error_1['ApiError'])throw _0x2df26d;throw new not_found_error_1[(_0x23b468(0xe4))](_0x2df26d);}}async[a153_0x42a6dc(0x11c)](_0x329c03,_0x41741c){const _0x29452a=a153_0x42a6dc;await this['getOne'](_0x329c03);try{const _0x5887d0=await this[_0x29452a(0x114)]['put'](_0x29452a(0x113)+this[_0x29452a(0x100)]+'/'+_0x329c03[_0x29452a(0xde)](),_0x41741c);return repo_class_1[_0x29452a(0x110)][_0x29452a(0xdd)](_0x5887d0,this[_0x29452a(0xf3)],this[_0x29452a(0xfe)]);}catch(_0x33630e){if(_0x33630e instanceof api_error_1['ApiError'])throw _0x33630e;throw new not_found_error_1[(_0x29452a(0xe4))](_0x33630e);}}async[a153_0x42a6dc(0xe3)](_0x5e2cad){const _0x2a45e3=a153_0x42a6dc;try{await this['request'][_0x2a45e3(0xe3)]('repositories/'+this['workspace']+'/'+_0x5e2cad[_0x2a45e3(0xde)]());}catch(_0x3d2248){if(_0x3d2248 instanceof api_error_1[_0x2a45e3(0xe5)])throw _0x3d2248;throw new bad_request_error_1[(_0x2a45e3(0xfc))](_0x3d2248);}}};BitbucketRepoService=__decorate([typedi_1['Service'](),__param(0x1,typedi_1[a153_0x42a6dc(0xf5)](providers_tokens_1[a153_0x42a6dc(0x106)][a153_0x42a6dc(0xfe)])),__metadata(a153_0x42a6dc(0x11b),[bitbucket_api_service_1[a153_0x42a6dc(0xec)],bitbucket_credentials_dto_1[a153_0x42a6dc(0xed)]])],BitbucketRepoService),exports[a153_0x42a6dc(0xdb)]=BitbucketRepoService;