const a166_0x204c19=a166_0x9813;(function(_0x4a541a,_0xd49db2){const _0x21f1b1=a166_0x9813,_0x1a80b9=_0x4a541a();while(!![]){try{const _0x21a1e6=parseInt(_0x21f1b1(0x196))/0x1+-parseInt(_0x21f1b1(0x18a))/0x2+parseInt(_0x21f1b1(0x188))/0x3*(-parseInt(_0x21f1b1(0x19f))/0x4)+parseInt(_0x21f1b1(0x189))/0x5*(parseInt(_0x21f1b1(0x18e))/0x6)+parseInt(_0x21f1b1(0x177))/0x7*(parseInt(_0x21f1b1(0x182))/0x8)+parseInt(_0x21f1b1(0x171))/0x9+parseInt(_0x21f1b1(0x19c))/0xa*(-parseInt(_0x21f1b1(0x190))/0xb);if(_0x21a1e6===_0xd49db2)break;else _0x1a80b9['push'](_0x1a80b9['shift']());}catch(_0x57fbd8){_0x1a80b9['push'](_0x1a80b9['shift']());}}}(a166_0x156e,0xd99e8));function a166_0x156e(){const _0x550c08=['toLowerCase','length','credentials','master','ERR_BITBUCKET_MISSING_WORKSPACE','GitRepoService','Inject','Service','NotFoundError','apply','5343813OUuMIb','BadRequestError','createEmptyBranch','repositories/','put','BitbucketApiService','9962617CBXayu','request','../repo.class','function','map','getOwnPropertyDescriptor','project','get','defaultBranch','(((.+)+)+)+$','push','8WIOzFZ','object','Git','toString','getAll','fromBitbucket','913341YsbjZX','298615KGGfcw','1201226HTxkdU','update','../../../../../core/errors/api.error','name','18JbFaDF','Repo','242rvtmrO','__metadata','../../credentials/dto/bitbucket-credentials.dto','decorate','../../../../../core/errors/bad-request.error','Tokens','1746547lCLTGV','design:paramtypes','create','defineProperty','getOne','ApiError','975580BwXKFS','search','api','4cYXPSt','workspace','autoInit','delete','./git-repo.service','__decorate','BitbucketRepoService','metadata','next'];a166_0x156e=function(){return _0x550c08;};return a166_0x156e();}const a166_0x354ef9=(function(){let _0x2fd5b9=!![];return function(_0x1aacdc,_0x213783){const _0x105cd3=_0x2fd5b9?function(){const _0x432702=a166_0x9813;if(_0x213783){const _0x2885e1=_0x213783[_0x432702(0x170)](_0x1aacdc,arguments);return _0x213783=null,_0x2885e1;}}:function(){};return _0x2fd5b9=![],_0x105cd3;};}()),a166_0x4e4beb=a166_0x354ef9(this,function(){const _0x4894d3=a166_0x9813;return a166_0x4e4beb[_0x4894d3(0x185)]()[_0x4894d3(0x19d)](_0x4894d3(0x180))[_0x4894d3(0x185)]()['constructor'](a166_0x4e4beb)[_0x4894d3(0x19d)](_0x4894d3(0x180));});a166_0x4e4beb();'use strict';var __decorate=this&&this[a166_0x204c19(0x1a4)]||function(_0x39000b,_0xaadc8c,_0x65d33e,_0x1d7b1f){const _0x168f7d=a166_0x204c19;var _0x5a35e8=arguments[_0x168f7d(0x168)],_0x5e53f1=_0x5a35e8<0x3?_0xaadc8c:_0x1d7b1f===null?_0x1d7b1f=Object[_0x168f7d(0x17c)](_0xaadc8c,_0x65d33e):_0x1d7b1f,_0x5ab6ec;if(typeof Reflect===_0x168f7d(0x183)&&typeof Reflect[_0x168f7d(0x193)]===_0x168f7d(0x17a))_0x5e53f1=Reflect[_0x168f7d(0x193)](_0x39000b,_0xaadc8c,_0x65d33e,_0x1d7b1f);else{for(var _0x53fae5=_0x39000b['length']-0x1;_0x53fae5>=0x0;_0x53fae5--)if(_0x5ab6ec=_0x39000b[_0x53fae5])_0x5e53f1=(_0x5a35e8<0x3?_0x5ab6ec(_0x5e53f1):_0x5a35e8>0x3?_0x5ab6ec(_0xaadc8c,_0x65d33e,_0x5e53f1):_0x5ab6ec(_0xaadc8c,_0x65d33e))||_0x5e53f1;}return _0x5a35e8>0x3&&_0x5e53f1&&Object[_0x168f7d(0x199)](_0xaadc8c,_0x65d33e,_0x5e53f1),_0x5e53f1;},__metadata=this&&this[a166_0x204c19(0x191)]||function(_0x4ad625,_0x1af13d){const _0x43cc3a=a166_0x204c19;if(typeof Reflect===_0x43cc3a(0x183)&&typeof Reflect[_0x43cc3a(0x1a6)]===_0x43cc3a(0x17a))return Reflect['metadata'](_0x4ad625,_0x1af13d);},__param=this&&this['__param']||function(_0x28f98d,_0x51b2b2){return function(_0x372a02,_0x4cecee){_0x51b2b2(_0x372a02,_0x4cecee,_0x28f98d);};};Object[a166_0x204c19(0x199)](exports,'__esModule',{'value':!![]}),exports[a166_0x204c19(0x1a5)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a166_0x204c19(0x194)),not_found_error_1=require('../../../../../core/errors/not-found.error'),bitbucket_api_service_1=require('../../api/bitbucket-api.service'),typedi_1=require('typedi'),api_error_1=require(a166_0x204c19(0x18c)),git_internal_1=require('../../../internal/git.internal'),repo_class_1=require(a166_0x204c19(0x179)),git_repo_service_1=require(a166_0x204c19(0x1a3)),bitbucket_credentials_dto_1=require(a166_0x204c19(0x192)),providers_tokens_1=require('../../providers.tokens');let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a166_0x204c19(0x16c)]{constructor(_0x2e7daf,_0x316403){const _0x4496e4=a166_0x204c19;super(_0x2e7daf),this[_0x4496e4(0x19e)]=_0x2e7daf,this[_0x4496e4(0x178)]=_0x2e7daf['createRequest'](),this[_0x4496e4(0x17d)]=_0x316403['project'],this[_0x4496e4(0x1a0)]=_0x316403[_0x4496e4(0x1a0)],this[_0x4496e4(0x169)]=_0x316403;if(!this['workspace'])throw new Error(errors_1[_0x4496e4(0x16b)]);if(!this[_0x4496e4(0x17d)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}async[a166_0x204c19(0x198)](_0x13be32){const _0x5770a2=a166_0x204c19;try{const {name:_0x2f0fc8}=_0x13be32,_0x44e04f={'name':_0x13be32[_0x5770a2(0x18d)],'is_private':_0x13be32['private'],..._0x13be32['apiBody']||{},'project':{'key':this['project']}},_0x44c790=await this['request']['post']('/repositories/'+this['workspace']+'/'+_0x2f0fc8[_0x5770a2(0x167)](),_0x44e04f),_0x1b0b9b=repo_class_1[_0x5770a2(0x18f)][_0x5770a2(0x187)](_0x44c790,this[_0x5770a2(0x19e)],this[_0x5770a2(0x169)]);return _0x13be32[_0x5770a2(0x1a1)]&&(await git_internal_1[_0x5770a2(0x184)][_0x5770a2(0x173)](_0x1b0b9b,_0x13be32[_0x5770a2(0x17f)]||_0x5770a2(0x16a),'',this[_0x5770a2(0x169)]),_0x1b0b9b['defaultBranch']=_0x13be32[_0x5770a2(0x17f)]||_0x5770a2(0x16a)),_0x1b0b9b;}catch(_0x4d4e7f){if(_0x4d4e7f instanceof api_error_1[_0x5770a2(0x19b)])throw _0x4d4e7f;throw new bad_request_error_1[(_0x5770a2(0x172))](_0x4d4e7f);}}async[a166_0x204c19(0x186)](){const _0xe42021=a166_0x204c19;try{const _0x553426=[];let _0x42d863;do{_0x42d863=await this[_0xe42021(0x178)][_0xe42021(0x17e)](_0x42d863?_0x42d863[_0xe42021(0x1a7)]:_0xe42021(0x174)+this[_0xe42021(0x1a0)]),_0x553426[_0xe42021(0x181)](..._0x42d863['values']);}while(_0x42d863[_0xe42021(0x1a7)]);return _0x553426[_0xe42021(0x17b)](_0x30d0d4=>repo_class_1['Repo']['fromBitbucket'](_0x30d0d4,this[_0xe42021(0x19e)],this[_0xe42021(0x169)]));}catch(_0xbdfdb2){if(_0xbdfdb2 instanceof api_error_1[_0xe42021(0x19b)])throw _0xbdfdb2;throw new not_found_error_1['NotFoundError'](_0xbdfdb2);}}async['getOne'](_0x31c009){const _0x46472c=a166_0x204c19;try{const _0x83c9ab=await this[_0x46472c(0x178)][_0x46472c(0x17e)](_0x46472c(0x174)+this['workspace']+'/'+_0x31c009[_0x46472c(0x167)]());return repo_class_1['Repo'][_0x46472c(0x187)](_0x83c9ab,this[_0x46472c(0x19e)],this[_0x46472c(0x169)]);}catch(_0x3f32b8){if(_0x3f32b8 instanceof api_error_1[_0x46472c(0x19b)])throw _0x3f32b8;throw new not_found_error_1[(_0x46472c(0x16f))](_0x3f32b8);}}async[a166_0x204c19(0x18b)](_0x334f52,_0x437dfa){const _0x2bb597=a166_0x204c19;await this[_0x2bb597(0x19a)](_0x334f52);try{const _0x30deeb=await this[_0x2bb597(0x178)][_0x2bb597(0x175)](_0x2bb597(0x174)+this[_0x2bb597(0x1a0)]+'/'+_0x334f52[_0x2bb597(0x167)](),_0x437dfa);return repo_class_1[_0x2bb597(0x18f)][_0x2bb597(0x187)](_0x30deeb,this[_0x2bb597(0x19e)],this[_0x2bb597(0x169)]);}catch(_0x124f52){if(_0x124f52 instanceof api_error_1[_0x2bb597(0x19b)])throw _0x124f52;throw new not_found_error_1[(_0x2bb597(0x16f))](_0x124f52);}}async[a166_0x204c19(0x1a2)](_0x4afab9){const _0x524ee7=a166_0x204c19;try{await this['request'][_0x524ee7(0x1a2)]('repositories/'+this[_0x524ee7(0x1a0)]+'/'+_0x4afab9['toLowerCase']());}catch(_0xe5b18c){if(_0xe5b18c instanceof api_error_1[_0x524ee7(0x19b)])throw _0xe5b18c;throw new bad_request_error_1[(_0x524ee7(0x172))](_0xe5b18c);}}};function a166_0x9813(_0x44b73c,_0x3e9ff7){const _0x1e31c4=a166_0x156e();return a166_0x9813=function(_0x4e4beb,_0x354ef9){_0x4e4beb=_0x4e4beb-0x167;let _0x156e5c=_0x1e31c4[_0x4e4beb];return _0x156e5c;},a166_0x9813(_0x44b73c,_0x3e9ff7);}BitbucketRepoService=__decorate([(0x0,typedi_1[a166_0x204c19(0x16e)])(),__param(0x1,(0x0,typedi_1[a166_0x204c19(0x16d)])(providers_tokens_1[a166_0x204c19(0x195)][a166_0x204c19(0x169)])),__metadata(a166_0x204c19(0x197),[bitbucket_api_service_1[a166_0x204c19(0x176)],bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketRepoService),exports['BitbucketRepoService']=BitbucketRepoService;