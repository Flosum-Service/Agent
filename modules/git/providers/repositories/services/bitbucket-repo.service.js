const a200_0x221172=a200_0x4287;(function(_0x5b0817,_0x2f9c8e){const _0x472f41=a200_0x4287,_0x4aa0ea=_0x5b0817();while(!![]){try{const _0x4a3cfa=-parseInt(_0x472f41(0x1b1))/0x1+parseInt(_0x472f41(0x185))/0x2+parseInt(_0x472f41(0x186))/0x3*(-parseInt(_0x472f41(0x17f))/0x4)+-parseInt(_0x472f41(0x190))/0x5*(-parseInt(_0x472f41(0x183))/0x6)+parseInt(_0x472f41(0x193))/0x7+-parseInt(_0x472f41(0x175))/0x8*(parseInt(_0x472f41(0x198))/0x9)+-parseInt(_0x472f41(0x18d))/0xa;if(_0x4a3cfa===_0x2f9c8e)break;else _0x4aa0ea['push'](_0x4aa0ea['shift']());}catch(_0x1675b8){_0x4aa0ea['push'](_0x4aa0ea['shift']());}}}(a200_0x4a8d,0x867b4));const a200_0x48f13b=(function(){let _0x3c05be=!![];return function(_0x501130,_0x35decf){const _0x1403a7=_0x3c05be?function(){const _0x51c164=a200_0x4287;if(_0x35decf){const _0x332048=_0x35decf[_0x51c164(0x172)](_0x501130,arguments);return _0x35decf=null,_0x332048;}}:function(){};return _0x3c05be=![],_0x1403a7;};}()),a200_0x253815=a200_0x48f13b(this,function(){const _0x3a877a=a200_0x4287;return a200_0x253815[_0x3a877a(0x17c)]()['search']('(((.+)+)+)+$')[_0x3a877a(0x17c)]()[_0x3a877a(0x1ab)](a200_0x253815)[_0x3a877a(0x17b)](_0x3a877a(0x1ae));});a200_0x253815();'use strict';function a200_0x4a8d(){const _0xefbf9=['constructor','getOne','autoInit','(((.+)+)+)+$','BadRequestError','master','135753XLCXxx','repositories/','../../../../../core/errors/api.error','values','../../../internal/git.internal','Tokens','../repo.class','ApiError','apply','ERR_BITBUCKET_MISSING_WORKSPACE','defineProperty','6440tDOGth','toLowerCase','BitbucketRepoService','__metadata','BitbucketCredentialsDto','object','search','toString','ERR_BITBUCKET_MISSING_PROJECT','function','389264QLopFb','credentials','typedi','BitbucketApiService','12QQUgoo','update','672SomNMd','15yXfTet','api','Repo','../../../../../constants/errors','Inject','metadata','create','183660OGfZcX','request','../../../../../core/errors/bad-request.error','1234430oVPzuG','createEmptyBranch','Git','7344484YCRjMO','getOwnPropertyDescriptor','NotFoundError','../../providers.tokens','get','3933eiQrtz','map','design:paramtypes','createRequest','defaultBranch','apiBody','../../../../../core/errors/not-found.error','post','fromBitbucket','private','workspace','project','/repositories/','getAll','push','length','decorate','GitRepoService','delete'];a200_0x4a8d=function(){return _0xefbf9;};return a200_0x4a8d();}var __decorate=this&&this['__decorate']||function(_0xabc2da,_0x3960f5,_0x13419f,_0x3359ef){const _0x1de1b5=a200_0x4287;var _0x4f027b=arguments[_0x1de1b5(0x1a7)],_0x47187b=_0x4f027b<0x3?_0x3960f5:_0x3359ef===null?_0x3359ef=Object[_0x1de1b5(0x194)](_0x3960f5,_0x13419f):_0x3359ef,_0x2aa148;if(typeof Reflect===_0x1de1b5(0x17a)&&typeof Reflect[_0x1de1b5(0x1a8)]===_0x1de1b5(0x17e))_0x47187b=Reflect[_0x1de1b5(0x1a8)](_0xabc2da,_0x3960f5,_0x13419f,_0x3359ef);else{for(var _0x54fc7d=_0xabc2da[_0x1de1b5(0x1a7)]-0x1;_0x54fc7d>=0x0;_0x54fc7d--)if(_0x2aa148=_0xabc2da[_0x54fc7d])_0x47187b=(_0x4f027b<0x3?_0x2aa148(_0x47187b):_0x4f027b>0x3?_0x2aa148(_0x3960f5,_0x13419f,_0x47187b):_0x2aa148(_0x3960f5,_0x13419f))||_0x47187b;}return _0x4f027b>0x3&&_0x47187b&&Object[_0x1de1b5(0x174)](_0x3960f5,_0x13419f,_0x47187b),_0x47187b;},__metadata=this&&this[a200_0x221172(0x178)]||function(_0xd49d63,_0x3139f0){const _0xae3a36=a200_0x221172;if(typeof Reflect===_0xae3a36(0x17a)&&typeof Reflect[_0xae3a36(0x18b)]===_0xae3a36(0x17e))return Reflect['metadata'](_0xd49d63,_0x3139f0);},__param=this&&this['__param']||function(_0x48852a,_0x381881){return function(_0x5467d6,_0x29982b){_0x381881(_0x5467d6,_0x29982b,_0x48852a);};};Object[a200_0x221172(0x174)](exports,'__esModule',{'value':!![]}),exports[a200_0x221172(0x177)]=void 0x0;const errors_1=require(a200_0x221172(0x189)),bad_request_error_1=require(a200_0x221172(0x18f)),not_found_error_1=require(a200_0x221172(0x19e)),bitbucket_api_service_1=require('../../api/bitbucket-api.service'),typedi_1=require(a200_0x221172(0x181)),api_error_1=require(a200_0x221172(0x1b3)),git_internal_1=require(a200_0x221172(0x1b5)),repo_class_1=require(a200_0x221172(0x1b7)),git_repo_service_1=require('./git-repo.service'),bitbucket_credentials_dto_1=require('../../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a200_0x221172(0x196));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a200_0x221172(0x1a9)]{constructor(_0x52dc70,_0x4f8604){const _0x139d10=a200_0x221172;super(_0x52dc70),this[_0x139d10(0x187)]=_0x52dc70,this[_0x139d10(0x18e)]=_0x52dc70[_0x139d10(0x19b)](),this[_0x139d10(0x1a3)]=_0x4f8604['project'],this[_0x139d10(0x1a2)]=_0x4f8604['workspace'],this[_0x139d10(0x180)]=_0x4f8604;if(!this['workspace'])throw new Error(errors_1[_0x139d10(0x173)]);if(!this[_0x139d10(0x1a3)])throw new Error(errors_1[_0x139d10(0x17d)]);}async[a200_0x221172(0x18c)](_0x41e58f){const _0xb1e572=a200_0x221172;try{const {name:_0xaa9f88}=_0x41e58f,_0x541ef8={'name':_0x41e58f['name'],'is_private':_0x41e58f[_0xb1e572(0x1a1)],..._0x41e58f[_0xb1e572(0x19d)]||{},'project':{'key':this[_0xb1e572(0x1a3)]}},_0x4d7923=await this[_0xb1e572(0x18e)][_0xb1e572(0x19f)](_0xb1e572(0x1a4)+this[_0xb1e572(0x1a2)]+'/'+_0xaa9f88[_0xb1e572(0x176)](),_0x541ef8),_0x41b58b=repo_class_1['Repo']['fromBitbucket'](_0x4d7923,this[_0xb1e572(0x187)],this['credentials']);return _0x41e58f[_0xb1e572(0x1ad)]&&(await git_internal_1[_0xb1e572(0x192)][_0xb1e572(0x191)](_0x41b58b,_0x41e58f[_0xb1e572(0x19c)]||'master','',this[_0xb1e572(0x180)]),_0x41b58b[_0xb1e572(0x19c)]=_0x41e58f[_0xb1e572(0x19c)]||_0xb1e572(0x1b0)),_0x41b58b;}catch(_0x524c9a){if(_0x524c9a instanceof api_error_1[_0xb1e572(0x171)])throw _0x524c9a;throw new bad_request_error_1[(_0xb1e572(0x1af))](_0x524c9a);}}async[a200_0x221172(0x1a5)](){const _0x349f92=a200_0x221172;try{const _0xe382f1=[];let _0x176554;do{_0x176554=await this[_0x349f92(0x18e)][_0x349f92(0x197)](_0x176554?_0x176554['next']:'repositories/'+this['workspace']),_0xe382f1[_0x349f92(0x1a6)](..._0x176554[_0x349f92(0x1b4)]);}while(_0x176554['next']);return _0xe382f1[_0x349f92(0x199)](_0x515281=>repo_class_1['Repo'][_0x349f92(0x1a0)](_0x515281,this[_0x349f92(0x187)],this[_0x349f92(0x180)]));}catch(_0x174776){if(_0x174776 instanceof api_error_1[_0x349f92(0x171)])throw _0x174776;throw new not_found_error_1[(_0x349f92(0x195))](_0x174776);}}async[a200_0x221172(0x1ac)](_0x145a06){const _0x17869f=a200_0x221172;try{const _0x425e2d=await this[_0x17869f(0x18e)]['get'](_0x17869f(0x1b2)+this[_0x17869f(0x1a2)]+'/'+_0x145a06[_0x17869f(0x176)]());return repo_class_1['Repo'][_0x17869f(0x1a0)](_0x425e2d,this['api'],this[_0x17869f(0x180)]);}catch(_0x1efde6){if(_0x1efde6 instanceof api_error_1[_0x17869f(0x171)])throw _0x1efde6;throw new not_found_error_1[(_0x17869f(0x195))](_0x1efde6);}}async[a200_0x221172(0x184)](_0x4e50e8,_0x284a51){const _0x1cdd98=a200_0x221172;await this['getOne'](_0x4e50e8);try{const _0x4a69c6=await this['request']['put'](_0x1cdd98(0x1b2)+this['workspace']+'/'+_0x4e50e8[_0x1cdd98(0x176)](),_0x284a51);return repo_class_1[_0x1cdd98(0x188)][_0x1cdd98(0x1a0)](_0x4a69c6,this[_0x1cdd98(0x187)],this[_0x1cdd98(0x180)]);}catch(_0x31f84b){if(_0x31f84b instanceof api_error_1['ApiError'])throw _0x31f84b;throw new not_found_error_1[(_0x1cdd98(0x195))](_0x31f84b);}}async[a200_0x221172(0x1aa)](_0x36b50f){const _0x36fd3a=a200_0x221172;try{await this[_0x36fd3a(0x18e)][_0x36fd3a(0x1aa)](_0x36fd3a(0x1b2)+this[_0x36fd3a(0x1a2)]+'/'+_0x36b50f[_0x36fd3a(0x176)]());}catch(_0x4ee021){if(_0x4ee021 instanceof api_error_1[_0x36fd3a(0x171)])throw _0x4ee021;throw new bad_request_error_1[(_0x36fd3a(0x1af))](_0x4ee021);}}};function a200_0x4287(_0x6dad85,_0x3715a9){const _0x4b8adb=a200_0x4a8d();return a200_0x4287=function(_0x253815,_0x48f13b){_0x253815=_0x253815-0x171;let _0x4a8db5=_0x4b8adb[_0x253815];return _0x4a8db5;},a200_0x4287(_0x6dad85,_0x3715a9);}BitbucketRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a200_0x221172(0x18a)])(providers_tokens_1[a200_0x221172(0x1b6)][a200_0x221172(0x180)])),__metadata(a200_0x221172(0x19a),[bitbucket_api_service_1[a200_0x221172(0x182)],bitbucket_credentials_dto_1[a200_0x221172(0x179)]])],BitbucketRepoService),exports['BitbucketRepoService']=BitbucketRepoService;