const a199_0x5e4877=a199_0x27f1;function a199_0x27f1(_0xee2229,_0x2cc12f){const _0x92079e=a199_0x1cb4();return a199_0x27f1=function(_0x415bf6,_0x5c1409){_0x415bf6=_0x415bf6-0x197;let _0x1cb41a=_0x92079e[_0x415bf6];return _0x1cb41a;},a199_0x27f1(_0xee2229,_0x2cc12f);}function a199_0x1cb4(){const _0x986f78=['1617DsnsYz','getOwnPropertyDescriptor','request','Service','../../../../../core/errors/api.error','./git-repo.service','ERR_BITBUCKET_MISSING_PROJECT','autoInit','fromBitbucket','GitRepoService','project','ApiError','toLowerCase','BitbucketCredentialsDto','push','134420uHNGIv','design:paramtypes','defaultBranch','BadRequestError','createRequest','__metadata','search','../../../../../constants/errors','../repo.class','toString','../../../internal/git.internal','typedi','get','apiBody','4499916RmRFeu','function','../../credentials/dto/bitbucket-credentials.dto','/repositories/','object','create','private','Inject','delete','BitbucketRepoService','Repo','NotFoundError','4IOFskY','2019160mixSjJ','(((.+)+)+)+$','decorate','252602SMSUBk','defineProperty','repositories/','getOne','createEmptyBranch','../../../../../core/errors/bad-request.error','../../api/bitbucket-api.service','7ceEFMU','753265qfnuEw','master','credentials','../../../../../core/errors/not-found.error','12YfyfvA','935073qjibvB','__param','next','478989hsgxbV','__decorate','workspace','api'];a199_0x1cb4=function(){return _0x986f78;};return a199_0x1cb4();}(function(_0x5277af,_0x34eeb1){const _0x5da32a=a199_0x27f1,_0x248da3=_0x5277af();while(!![]){try{const _0x213572=-parseInt(_0x5da32a(0x1d7))/0x1+parseInt(_0x5da32a(0x1c7))/0x2*(-parseInt(_0x5da32a(0x1d3))/0x3)+parseInt(_0x5da32a(0x1c3))/0x4*(-parseInt(_0x5da32a(0x1cf))/0x5)+parseInt(_0x5da32a(0x1b7))/0x6*(-parseInt(_0x5da32a(0x1ce))/0x7)+parseInt(_0x5da32a(0x1c4))/0x8+parseInt(_0x5da32a(0x1d4))/0x9+parseInt(_0x5da32a(0x1a9))/0xa*(parseInt(_0x5da32a(0x19a))/0xb);if(_0x213572===_0x34eeb1)break;else _0x248da3['push'](_0x248da3['shift']());}catch(_0x595acc){_0x248da3['push'](_0x248da3['shift']());}}}(a199_0x1cb4,0x6d3ca));const a199_0x5c1409=(function(){let _0x566f46=!![];return function(_0x4f3c49,_0x518d7f){const _0x3553c6=_0x566f46?function(){if(_0x518d7f){const _0x49588c=_0x518d7f['apply'](_0x4f3c49,arguments);return _0x518d7f=null,_0x49588c;}}:function(){};return _0x566f46=![],_0x3553c6;};}()),a199_0x415bf6=a199_0x5c1409(this,function(){const _0x231f02=a199_0x27f1;return a199_0x415bf6[_0x231f02(0x1b2)]()[_0x231f02(0x1af)](_0x231f02(0x1c5))[_0x231f02(0x1b2)]()['constructor'](a199_0x415bf6)[_0x231f02(0x1af)](_0x231f02(0x1c5));});a199_0x415bf6();'use strict';var __decorate=this&&this[a199_0x5e4877(0x197)]||function(_0x2924c8,_0x467f15,_0x6b3cd3,_0x475e80){const _0x298355=a199_0x5e4877;var _0x5d7c99=arguments['length'],_0x39f2d9=_0x5d7c99<0x3?_0x467f15:_0x475e80===null?_0x475e80=Object[_0x298355(0x19b)](_0x467f15,_0x6b3cd3):_0x475e80,_0xce9ca0;if(typeof Reflect===_0x298355(0x1bb)&&typeof Reflect[_0x298355(0x1c6)]===_0x298355(0x1b8))_0x39f2d9=Reflect[_0x298355(0x1c6)](_0x2924c8,_0x467f15,_0x6b3cd3,_0x475e80);else{for(var _0x28f63e=_0x2924c8['length']-0x1;_0x28f63e>=0x0;_0x28f63e--)if(_0xce9ca0=_0x2924c8[_0x28f63e])_0x39f2d9=(_0x5d7c99<0x3?_0xce9ca0(_0x39f2d9):_0x5d7c99>0x3?_0xce9ca0(_0x467f15,_0x6b3cd3,_0x39f2d9):_0xce9ca0(_0x467f15,_0x6b3cd3))||_0x39f2d9;}return _0x5d7c99>0x3&&_0x39f2d9&&Object[_0x298355(0x1c8)](_0x467f15,_0x6b3cd3,_0x39f2d9),_0x39f2d9;},__metadata=this&&this[a199_0x5e4877(0x1ae)]||function(_0x503a6c,_0x3d6a78){const _0x3e5936=a199_0x5e4877;if(typeof Reflect===_0x3e5936(0x1bb)&&typeof Reflect['metadata']===_0x3e5936(0x1b8))return Reflect['metadata'](_0x503a6c,_0x3d6a78);},__param=this&&this[a199_0x5e4877(0x1d5)]||function(_0x17fa6a,_0x22bc68){return function(_0x2dabf7,_0x7ff339){_0x22bc68(_0x2dabf7,_0x7ff339,_0x17fa6a);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a199_0x5e4877(0x1c0)]=void 0x0;const errors_1=require(a199_0x5e4877(0x1b0)),bad_request_error_1=require(a199_0x5e4877(0x1cc)),not_found_error_1=require(a199_0x5e4877(0x1d2)),bitbucket_api_service_1=require(a199_0x5e4877(0x1cd)),typedi_1=require(a199_0x5e4877(0x1b4)),api_error_1=require(a199_0x5e4877(0x19e)),git_internal_1=require(a199_0x5e4877(0x1b3)),repo_class_1=require(a199_0x5e4877(0x1b1)),git_repo_service_1=require(a199_0x5e4877(0x19f)),bitbucket_credentials_dto_1=require(a199_0x5e4877(0x1b9)),providers_tokens_1=require('../../providers.tokens');let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a199_0x5e4877(0x1a3)]{constructor(_0x515d0b,_0x38e216){const _0x33f89a=a199_0x5e4877;super(_0x515d0b),this['api']=_0x515d0b,this[_0x33f89a(0x19c)]=_0x515d0b[_0x33f89a(0x1ad)](),this[_0x33f89a(0x1a4)]=_0x38e216[_0x33f89a(0x1a4)],this['workspace']=_0x38e216[_0x33f89a(0x198)],this[_0x33f89a(0x1d1)]=_0x38e216;if(!this[_0x33f89a(0x198)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x33f89a(0x1a4)])throw new Error(errors_1[_0x33f89a(0x1a0)]);}async[a199_0x5e4877(0x1bc)](_0x47639f){const _0x58babd=a199_0x5e4877;try{const {name:_0x5b3e06}=_0x47639f,_0xc79ce6={'name':_0x47639f['name'],'is_private':_0x47639f[_0x58babd(0x1bd)],..._0x47639f[_0x58babd(0x1b6)]||{},'project':{'key':this[_0x58babd(0x1a4)]}},_0x1a25f0=await this['request']['post'](_0x58babd(0x1ba)+this['workspace']+'/'+_0x5b3e06[_0x58babd(0x1a6)](),_0xc79ce6),_0x29469b=repo_class_1['Repo'][_0x58babd(0x1a2)](_0x1a25f0,this['api'],this[_0x58babd(0x1d1)]);return _0x47639f[_0x58babd(0x1a1)]&&(await git_internal_1['Git'][_0x58babd(0x1cb)](_0x29469b,_0x47639f['defaultBranch']||_0x58babd(0x1d0),'',this[_0x58babd(0x1d1)]),_0x29469b[_0x58babd(0x1ab)]=_0x47639f[_0x58babd(0x1ab)]||_0x58babd(0x1d0)),_0x29469b;}catch(_0x551db2){if(_0x551db2 instanceof api_error_1[_0x58babd(0x1a5)])throw _0x551db2;throw new bad_request_error_1[(_0x58babd(0x1ac))](_0x551db2);}}async['getAll'](){const _0x23c3d9=a199_0x5e4877;try{const _0x4842a6=[];let _0x36e176;do{_0x36e176=await this[_0x23c3d9(0x19c)][_0x23c3d9(0x1b5)](_0x36e176?_0x36e176[_0x23c3d9(0x1d6)]:_0x23c3d9(0x1c9)+this[_0x23c3d9(0x198)]),_0x4842a6[_0x23c3d9(0x1a8)](..._0x36e176['values']);}while(_0x36e176[_0x23c3d9(0x1d6)]);return _0x4842a6['map'](_0x1ba3a0=>repo_class_1[_0x23c3d9(0x1c1)][_0x23c3d9(0x1a2)](_0x1ba3a0,this[_0x23c3d9(0x199)],this['credentials']));}catch(_0x63f2bf){if(_0x63f2bf instanceof api_error_1[_0x23c3d9(0x1a5)])throw _0x63f2bf;throw new not_found_error_1['NotFoundError'](_0x63f2bf);}}async[a199_0x5e4877(0x1ca)](_0x50ed98){const _0x4da128=a199_0x5e4877;try{const _0x35b8a3=await this['request'][_0x4da128(0x1b5)](_0x4da128(0x1c9)+this[_0x4da128(0x198)]+'/'+_0x50ed98[_0x4da128(0x1a6)]());return repo_class_1['Repo']['fromBitbucket'](_0x35b8a3,this['api'],this[_0x4da128(0x1d1)]);}catch(_0x2a2e73){if(_0x2a2e73 instanceof api_error_1['ApiError'])throw _0x2a2e73;throw new not_found_error_1[(_0x4da128(0x1c2))](_0x2a2e73);}}async['update'](_0x4766d7,_0x513e5c){const _0x2fb453=a199_0x5e4877;await this[_0x2fb453(0x1ca)](_0x4766d7);try{const _0x26499c=await this[_0x2fb453(0x19c)]['put'](_0x2fb453(0x1c9)+this[_0x2fb453(0x198)]+'/'+_0x4766d7['toLowerCase'](),_0x513e5c);return repo_class_1[_0x2fb453(0x1c1)][_0x2fb453(0x1a2)](_0x26499c,this[_0x2fb453(0x199)],this[_0x2fb453(0x1d1)]);}catch(_0x2012e9){if(_0x2012e9 instanceof api_error_1[_0x2fb453(0x1a5)])throw _0x2012e9;throw new not_found_error_1[(_0x2fb453(0x1c2))](_0x2012e9);}}async['delete'](_0x1ec5e1){const _0x25cf4d=a199_0x5e4877;try{await this[_0x25cf4d(0x19c)][_0x25cf4d(0x1bf)](_0x25cf4d(0x1c9)+this['workspace']+'/'+_0x1ec5e1['toLowerCase']());}catch(_0x29c117){if(_0x29c117 instanceof api_error_1['ApiError'])throw _0x29c117;throw new bad_request_error_1['BadRequestError'](_0x29c117);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a199_0x5e4877(0x19d)])(),__param(0x1,(0x0,typedi_1[a199_0x5e4877(0x1be)])(providers_tokens_1['Tokens'][a199_0x5e4877(0x1d1)])),__metadata(a199_0x5e4877(0x1aa),[bitbucket_api_service_1['BitbucketApiService'],bitbucket_credentials_dto_1[a199_0x5e4877(0x1a7)]])],BitbucketRepoService),exports[a199_0x5e4877(0x1c0)]=BitbucketRepoService;