const a199_0x5dd9f7=a199_0x1593;(function(_0x28dbfd,_0x1769a5){const _0xc1da2d=a199_0x1593,_0x19de64=_0x28dbfd();while(!![]){try{const _0xe1fb60=-parseInt(_0xc1da2d(0xb8))/0x1*(-parseInt(_0xc1da2d(0xf1))/0x2)+parseInt(_0xc1da2d(0xd4))/0x3*(-parseInt(_0xc1da2d(0xd2))/0x4)+-parseInt(_0xc1da2d(0xdf))/0x5*(-parseInt(_0xc1da2d(0xcd))/0x6)+parseInt(_0xc1da2d(0xd6))/0x7*(-parseInt(_0xc1da2d(0xf9))/0x8)+-parseInt(_0xc1da2d(0xd0))/0x9+-parseInt(_0xc1da2d(0xc3))/0xa*(parseInt(_0xc1da2d(0xd1))/0xb)+-parseInt(_0xc1da2d(0xc0))/0xc*(-parseInt(_0xc1da2d(0xe7))/0xd);if(_0xe1fb60===_0x1769a5)break;else _0x19de64['push'](_0x19de64['shift']());}catch(_0x49eff2){_0x19de64['push'](_0x19de64['shift']());}}}(a199_0x1242,0xe95e1));const a199_0x51c4b5=(function(){let _0x29c9e7=!![];return function(_0x8c33f3,_0x45e4af){const _0x5b63cf=_0x29c9e7?function(){const _0x4f6d4d=a199_0x1593;if(_0x45e4af){const _0x2af8e6=_0x45e4af[_0x4f6d4d(0xc9)](_0x8c33f3,arguments);return _0x45e4af=null,_0x2af8e6;}}:function(){};return _0x29c9e7=![],_0x5b63cf;};}()),a199_0x4f2943=a199_0x51c4b5(this,function(){const _0x5440db=a199_0x1593;return a199_0x4f2943[_0x5440db(0xe3)]()[_0x5440db(0xe4)]('(((.+)+)+)+$')[_0x5440db(0xe3)]()[_0x5440db(0xe6)](a199_0x4f2943)[_0x5440db(0xe4)]('(((.+)+)+)+$');});a199_0x4f2943();'use strict';var __decorate=this&&this[a199_0x5dd9f7(0xea)]||function(_0x2ebf38,_0x1be790,_0x55b979,_0x46192a){const _0x575bc9=a199_0x5dd9f7;var _0x492bb1=arguments[_0x575bc9(0xbb)],_0x2faddd=_0x492bb1<0x3?_0x1be790:_0x46192a===null?_0x46192a=Object[_0x575bc9(0xcb)](_0x1be790,_0x55b979):_0x46192a,_0x28fdb3;if(typeof Reflect===_0x575bc9(0xec)&&typeof Reflect[_0x575bc9(0xba)]===_0x575bc9(0xbe))_0x2faddd=Reflect['decorate'](_0x2ebf38,_0x1be790,_0x55b979,_0x46192a);else{for(var _0xffa242=_0x2ebf38[_0x575bc9(0xbb)]-0x1;_0xffa242>=0x0;_0xffa242--)if(_0x28fdb3=_0x2ebf38[_0xffa242])_0x2faddd=(_0x492bb1<0x3?_0x28fdb3(_0x2faddd):_0x492bb1>0x3?_0x28fdb3(_0x1be790,_0x55b979,_0x2faddd):_0x28fdb3(_0x1be790,_0x55b979))||_0x2faddd;}return _0x492bb1>0x3&&_0x2faddd&&Object['defineProperty'](_0x1be790,_0x55b979,_0x2faddd),_0x2faddd;},__metadata=this&&this[a199_0x5dd9f7(0xf0)]||function(_0x1004ed,_0x4dd2d3){const _0x4b03bb=a199_0x5dd9f7;if(typeof Reflect===_0x4b03bb(0xec)&&typeof Reflect[_0x4b03bb(0xca)]===_0x4b03bb(0xbe))return Reflect[_0x4b03bb(0xca)](_0x1004ed,_0x4dd2d3);},__param=this&&this['__param']||function(_0xc2c702,_0x9f9af7){return function(_0x2f8b62,_0x5cc755){_0x9f9af7(_0x2f8b62,_0x5cc755,_0xc2c702);};};function a199_0x1242(){const _0x18a3f4=['852130ynBQAj','../../../../../core/errors/bad-request.error','design:paramtypes','GitRepoService','BitbucketApiService','createEmptyBranch','apply','metadata','getOwnPropertyDescriptor','BitbucketRepoService','11694gkhSBs','/repositories/','../../../../../core/errors/api.error','10316484fQnMfM','22YPNkBK','1616xqVkgS','update','9357SxUQCW','../../../internal/git.internal','5801642YCKwTJ','Repo','delete','request','api','Git','ApiError','workspace','repositories/','65EQyzCe','next','post','autoInit','toString','search','Inject','constructor','47845434cPvCDU','../repo.class','apiBody','__decorate','typedi','object','NotFoundError','BadRequestError','Tokens','__metadata','2969016NIgQJk','get','ERR_BITBUCKET_MISSING_WORKSPACE','getAll','defaultBranch','credentials','Service','../../providers.tokens','16yQpPDg','create','__esModule','project','BitbucketCredentialsDto','1RcquvK','master','decorate','length','toLowerCase','../../../../../constants/errors','function','./git-repo.service','12LOSokg','fromBitbucket','map'];a199_0x1242=function(){return _0x18a3f4;};return a199_0x1242();}Object['defineProperty'](exports,a199_0x5dd9f7(0xfb),{'value':!![]}),exports['BitbucketRepoService']=void 0x0;const errors_1=require(a199_0x5dd9f7(0xbd)),bad_request_error_1=require(a199_0x5dd9f7(0xc4)),not_found_error_1=require('../../../../../core/errors/not-found.error'),bitbucket_api_service_1=require('../../api/bitbucket-api.service'),typedi_1=require(a199_0x5dd9f7(0xeb)),api_error_1=require(a199_0x5dd9f7(0xcf)),git_internal_1=require(a199_0x5dd9f7(0xd5)),repo_class_1=require(a199_0x5dd9f7(0xe8)),git_repo_service_1=require(a199_0x5dd9f7(0xbf)),bitbucket_credentials_dto_1=require('../../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a199_0x5dd9f7(0xf8));function a199_0x1593(_0x2d14ea,_0x4e310c){const _0xd673f9=a199_0x1242();return a199_0x1593=function(_0x4f2943,_0x51c4b5){_0x4f2943=_0x4f2943-0xb8;let _0x1242cd=_0xd673f9[_0x4f2943];return _0x1242cd;},a199_0x1593(_0x2d14ea,_0x4e310c);}let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a199_0x5dd9f7(0xc6)]{constructor(_0x5873e8,_0xc42179){const _0x588994=a199_0x5dd9f7;super(_0x5873e8),this[_0x588994(0xda)]=_0x5873e8,this[_0x588994(0xd9)]=_0x5873e8['createRequest'](),this[_0x588994(0xfc)]=_0xc42179[_0x588994(0xfc)],this[_0x588994(0xdd)]=_0xc42179['workspace'],this[_0x588994(0xf6)]=_0xc42179;if(!this[_0x588994(0xdd)])throw new Error(errors_1[_0x588994(0xf3)]);if(!this[_0x588994(0xfc)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}async[a199_0x5dd9f7(0xfa)](_0x5e609e){const _0x22d210=a199_0x5dd9f7;try{const {name:_0x59455c}=_0x5e609e,_0x29de99={'name':_0x5e609e['name'],'is_private':_0x5e609e['private'],..._0x5e609e[_0x22d210(0xe9)]||{},'project':{'key':this['project']}},_0x12f307=await this[_0x22d210(0xd9)][_0x22d210(0xe1)](_0x22d210(0xce)+this[_0x22d210(0xdd)]+'/'+_0x59455c[_0x22d210(0xbc)](),_0x29de99),_0x3438df=repo_class_1[_0x22d210(0xd7)][_0x22d210(0xc1)](_0x12f307,this[_0x22d210(0xda)],this['credentials']);return _0x5e609e[_0x22d210(0xe2)]&&(await git_internal_1[_0x22d210(0xdb)][_0x22d210(0xc8)](_0x3438df,_0x5e609e['defaultBranch']||'master','',this[_0x22d210(0xf6)]),_0x3438df[_0x22d210(0xf5)]=_0x5e609e[_0x22d210(0xf5)]||_0x22d210(0xb9)),_0x3438df;}catch(_0x121815){if(_0x121815 instanceof api_error_1[_0x22d210(0xdc)])throw _0x121815;throw new bad_request_error_1[(_0x22d210(0xee))](_0x121815);}}async[a199_0x5dd9f7(0xf4)](){const _0xd1548f=a199_0x5dd9f7;try{const _0x4d2761=[];let _0x5de482;do{_0x5de482=await this['request'][_0xd1548f(0xf2)](_0x5de482?_0x5de482[_0xd1548f(0xe0)]:_0xd1548f(0xde)+this[_0xd1548f(0xdd)]),_0x4d2761['push'](..._0x5de482['values']);}while(_0x5de482[_0xd1548f(0xe0)]);return _0x4d2761[_0xd1548f(0xc2)](_0x15065f=>repo_class_1[_0xd1548f(0xd7)][_0xd1548f(0xc1)](_0x15065f,this['api'],this[_0xd1548f(0xf6)]));}catch(_0x56c5b6){if(_0x56c5b6 instanceof api_error_1['ApiError'])throw _0x56c5b6;throw new not_found_error_1[(_0xd1548f(0xed))](_0x56c5b6);}}async['getOne'](_0x1680fb){const _0xf5cd49=a199_0x5dd9f7;try{const _0x11b8cf=await this[_0xf5cd49(0xd9)][_0xf5cd49(0xf2)]('repositories/'+this['workspace']+'/'+_0x1680fb[_0xf5cd49(0xbc)]());return repo_class_1[_0xf5cd49(0xd7)][_0xf5cd49(0xc1)](_0x11b8cf,this[_0xf5cd49(0xda)],this[_0xf5cd49(0xf6)]);}catch(_0x19b527){if(_0x19b527 instanceof api_error_1['ApiError'])throw _0x19b527;throw new not_found_error_1[(_0xf5cd49(0xed))](_0x19b527);}}async[a199_0x5dd9f7(0xd3)](_0x496ed9,_0x471fc7){const _0x23f5b9=a199_0x5dd9f7;await this['getOne'](_0x496ed9);try{const _0x347e28=await this['request']['put']('repositories/'+this[_0x23f5b9(0xdd)]+'/'+_0x496ed9[_0x23f5b9(0xbc)](),_0x471fc7);return repo_class_1[_0x23f5b9(0xd7)]['fromBitbucket'](_0x347e28,this[_0x23f5b9(0xda)],this[_0x23f5b9(0xf6)]);}catch(_0x3b0615){if(_0x3b0615 instanceof api_error_1[_0x23f5b9(0xdc)])throw _0x3b0615;throw new not_found_error_1[(_0x23f5b9(0xed))](_0x3b0615);}}async[a199_0x5dd9f7(0xd8)](_0x30858e){const _0x160ca6=a199_0x5dd9f7;try{await this['request'][_0x160ca6(0xd8)](_0x160ca6(0xde)+this[_0x160ca6(0xdd)]+'/'+_0x30858e['toLowerCase']());}catch(_0xa21b4f){if(_0xa21b4f instanceof api_error_1['ApiError'])throw _0xa21b4f;throw new bad_request_error_1['BadRequestError'](_0xa21b4f);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a199_0x5dd9f7(0xf7)])(),__param(0x1,(0x0,typedi_1[a199_0x5dd9f7(0xe5)])(providers_tokens_1[a199_0x5dd9f7(0xef)]['credentials'])),__metadata(a199_0x5dd9f7(0xc5),[bitbucket_api_service_1[a199_0x5dd9f7(0xc7)],bitbucket_credentials_dto_1[a199_0x5dd9f7(0xfd)]])],BitbucketRepoService),exports[a199_0x5dd9f7(0xcc)]=BitbucketRepoService;