const a148_0xdd90c3=a148_0x196d;(function(_0x151f50,_0x3beeb9){const _0x52271a=a148_0x196d,_0x3ad8c2=_0x151f50();while(!![]){try{const _0x5dbe38=parseInt(_0x52271a(0x158))/0x1*(parseInt(_0x52271a(0x187))/0x2)+-parseInt(_0x52271a(0x176))/0x3*(-parseInt(_0x52271a(0x17d))/0x4)+-parseInt(_0x52271a(0x170))/0x5+parseInt(_0x52271a(0x14c))/0x6+-parseInt(_0x52271a(0x179))/0x7*(-parseInt(_0x52271a(0x182))/0x8)+parseInt(_0x52271a(0x159))/0x9*(parseInt(_0x52271a(0x15f))/0xa)+-parseInt(_0x52271a(0x183))/0xb;if(_0x5dbe38===_0x3beeb9)break;else _0x3ad8c2['push'](_0x3ad8c2['shift']());}catch(_0x315203){_0x3ad8c2['push'](_0x3ad8c2['shift']());}}}(a148_0x3184,0xc14b6));const a148_0x383336=(function(){let _0x2607aa=!![];return function(_0x5747eb,_0x4dbd4e){const _0x4a81fb=_0x2607aa?function(){const _0xadb45a=a148_0x196d;if(_0x4dbd4e){const _0xd4c914=_0x4dbd4e[_0xadb45a(0x17c)](_0x5747eb,arguments);return _0x4dbd4e=null,_0xd4c914;}}:function(){};return _0x2607aa=![],_0x4a81fb;};}()),a148_0x2a8f0d=a148_0x383336(this,function(){const _0x5cf465=a148_0x196d;return a148_0x2a8f0d[_0x5cf465(0x14e)]()['search']('(((.+)+)+)+$')['toString']()[_0x5cf465(0x152)](a148_0x2a8f0d)[_0x5cf465(0x174)](_0x5cf465(0x169));});a148_0x2a8f0d();'use strict';var __decorate=this&&this[a148_0xdd90c3(0x16f)]||function(_0x4c8d28,_0x43843a,_0x3027d8,_0x233cc1){const _0x11a51c=a148_0xdd90c3;var _0x5c8599=arguments['length'],_0x25f7f4=_0x5c8599<0x3?_0x43843a:_0x233cc1===null?_0x233cc1=Object[_0x11a51c(0x185)](_0x43843a,_0x3027d8):_0x233cc1,_0x501290;if(typeof Reflect===_0x11a51c(0x17b)&&typeof Reflect[_0x11a51c(0x146)]===_0x11a51c(0x14d))_0x25f7f4=Reflect[_0x11a51c(0x146)](_0x4c8d28,_0x43843a,_0x3027d8,_0x233cc1);else{for(var _0x5ab3b5=_0x4c8d28[_0x11a51c(0x149)]-0x1;_0x5ab3b5>=0x0;_0x5ab3b5--)if(_0x501290=_0x4c8d28[_0x5ab3b5])_0x25f7f4=(_0x5c8599<0x3?_0x501290(_0x25f7f4):_0x5c8599>0x3?_0x501290(_0x43843a,_0x3027d8,_0x25f7f4):_0x501290(_0x43843a,_0x3027d8))||_0x25f7f4;}return _0x5c8599>0x3&&_0x25f7f4&&Object['defineProperty'](_0x43843a,_0x3027d8,_0x25f7f4),_0x25f7f4;},__metadata=this&&this[a148_0xdd90c3(0x144)]||function(_0xe0f701,_0x336a95){const _0x604718=a148_0xdd90c3;if(typeof Reflect==='object'&&typeof Reflect[_0x604718(0x186)]===_0x604718(0x14d))return Reflect[_0x604718(0x186)](_0xe0f701,_0x336a95);},__param=this&&this['__param']||function(_0x72d453,_0x4794f8){return function(_0x2988ec,_0x19163f){_0x4794f8(_0x2988ec,_0x19163f,_0x72d453);};};function a148_0x196d(_0x475288,_0x18e7d2){const _0x2a486d=a148_0x3184();return a148_0x196d=function(_0x2a8f0d,_0x383336){_0x2a8f0d=_0x2a8f0d-0x143;let _0x318432=_0x2a486d[_0x2a8f0d];return _0x318432;},a148_0x196d(_0x475288,_0x18e7d2);}Object[a148_0xdd90c3(0x171)](exports,'__esModule',{'value':!![]}),exports[a148_0xdd90c3(0x16c)]=void 0x0;function a148_0x3184(){const _0xd434a2=['./git-repo.service','40aAHqlA','32958849MuQjvH','NotFoundError','getOwnPropertyDescriptor','metadata','2UnrpgX','ApiError','api','put','__metadata','delete','decorate','get','BadRequestError','length','project','../../../../../constants/errors','86100DEVXZz','function','toString','workspace','map','design:paramtypes','constructor','createRequest','fromBitbucket','../../credentials/dto/bitbucket-credentials.dto','getAll','update','1553054dvEPPJ','1230759uleoSl','Repo','post','credentials','Service','defaultBranch','90ykVbeH','next','push','typedi','values','createEmptyBranch','repositories/','apiBody','master','Inject','(((.+)+)+)+$','../../../internal/git.internal','Tokens','BitbucketRepoService','../../api/bitbucket-api.service','private','__decorate','3454480ZSBnNa','defineProperty','toLowerCase','getOne','search','request','51402XJYMCD','ERR_BITBUCKET_MISSING_WORKSPACE','GitRepoService','1897252AchIsn','../../../../../core/errors/api.error','object','apply','76NmIzcX','../repo.class','Git','ERR_BITBUCKET_MISSING_PROJECT'];a148_0x3184=function(){return _0xd434a2;};return a148_0x3184();}const errors_1=require(a148_0xdd90c3(0x14b)),bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require('../../../../../core/errors/not-found.error'),bitbucket_api_service_1=require(a148_0xdd90c3(0x16d)),typedi_1=require(a148_0xdd90c3(0x162)),api_error_1=require(a148_0xdd90c3(0x17a)),git_internal_1=require(a148_0xdd90c3(0x16a)),repo_class_1=require(a148_0xdd90c3(0x17e)),git_repo_service_1=require(a148_0xdd90c3(0x181)),bitbucket_credentials_dto_1=require(a148_0xdd90c3(0x155)),providers_tokens_1=require('../../providers.tokens');let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a148_0xdd90c3(0x178)]{constructor(_0x3de049,_0x1ac1d1){const _0x54c159=a148_0xdd90c3;super(_0x3de049),this[_0x54c159(0x189)]=_0x3de049,this['request']=_0x3de049[_0x54c159(0x153)](),this[_0x54c159(0x14a)]=_0x1ac1d1['project'],this[_0x54c159(0x14f)]=_0x1ac1d1[_0x54c159(0x14f)],this[_0x54c159(0x15c)]=_0x1ac1d1;if(!this['workspace'])throw new Error(errors_1[_0x54c159(0x177)]);if(!this[_0x54c159(0x14a)])throw new Error(errors_1[_0x54c159(0x180)]);}async['create'](_0x14af2d){const _0x508199=a148_0xdd90c3;try{const {name:_0x13a91b}=_0x14af2d,_0x168b66={'name':_0x14af2d['name'],'is_private':_0x14af2d[_0x508199(0x16e)],..._0x14af2d[_0x508199(0x166)]||{},'project':{'key':this[_0x508199(0x14a)]}},_0x39016e=await this[_0x508199(0x175)][_0x508199(0x15b)]('/repositories/'+this['workspace']+'/'+_0x13a91b[_0x508199(0x172)](),_0x168b66),_0x5023d2=repo_class_1[_0x508199(0x15a)][_0x508199(0x154)](_0x39016e,this[_0x508199(0x189)],this[_0x508199(0x15c)]);return _0x14af2d['autoInit']&&(await git_internal_1[_0x508199(0x17f)][_0x508199(0x164)](_0x5023d2,_0x14af2d[_0x508199(0x15e)]||_0x508199(0x167),'',this[_0x508199(0x15c)]),_0x5023d2['defaultBranch']=_0x14af2d[_0x508199(0x15e)]||_0x508199(0x167)),_0x5023d2;}catch(_0x29af46){if(_0x29af46 instanceof api_error_1['ApiError'])throw _0x29af46;throw new bad_request_error_1['BadRequestError'](_0x29af46);}}async[a148_0xdd90c3(0x156)](){const _0x1c2cbd=a148_0xdd90c3;try{const _0x1ecf1a=[];let _0x88d530;do{_0x88d530=await this['request'][_0x1c2cbd(0x147)](_0x88d530?_0x88d530[_0x1c2cbd(0x160)]:'repositories/'+this[_0x1c2cbd(0x14f)]),_0x1ecf1a[_0x1c2cbd(0x161)](..._0x88d530[_0x1c2cbd(0x163)]);}while(_0x88d530[_0x1c2cbd(0x160)]);return _0x1ecf1a[_0x1c2cbd(0x150)](_0x1aea48=>repo_class_1['Repo']['fromBitbucket'](_0x1aea48,this[_0x1c2cbd(0x189)],this[_0x1c2cbd(0x15c)]));}catch(_0x3513e1){if(_0x3513e1 instanceof api_error_1[_0x1c2cbd(0x188)])throw _0x3513e1;throw new not_found_error_1['NotFoundError'](_0x3513e1);}}async[a148_0xdd90c3(0x173)](_0xcaab47){const _0x504231=a148_0xdd90c3;try{const _0x224f0e=await this[_0x504231(0x175)]['get'](_0x504231(0x165)+this[_0x504231(0x14f)]+'/'+_0xcaab47[_0x504231(0x172)]());return repo_class_1[_0x504231(0x15a)][_0x504231(0x154)](_0x224f0e,this[_0x504231(0x189)],this[_0x504231(0x15c)]);}catch(_0x41c4a6){if(_0x41c4a6 instanceof api_error_1[_0x504231(0x188)])throw _0x41c4a6;throw new not_found_error_1[(_0x504231(0x184))](_0x41c4a6);}}async[a148_0xdd90c3(0x157)](_0xe06ad9,_0x237af9){const _0x2b23d1=a148_0xdd90c3;await this['getOne'](_0xe06ad9);try{const _0x1b5d74=await this['request'][_0x2b23d1(0x143)](_0x2b23d1(0x165)+this[_0x2b23d1(0x14f)]+'/'+_0xe06ad9['toLowerCase'](),_0x237af9);return repo_class_1[_0x2b23d1(0x15a)]['fromBitbucket'](_0x1b5d74,this[_0x2b23d1(0x189)],this['credentials']);}catch(_0x371013){if(_0x371013 instanceof api_error_1['ApiError'])throw _0x371013;throw new not_found_error_1['NotFoundError'](_0x371013);}}async[a148_0xdd90c3(0x145)](_0x158778){const _0x2f9eba=a148_0xdd90c3;try{await this[_0x2f9eba(0x175)]['delete'](_0x2f9eba(0x165)+this[_0x2f9eba(0x14f)]+'/'+_0x158778['toLowerCase']());}catch(_0x2995d3){if(_0x2995d3 instanceof api_error_1[_0x2f9eba(0x188)])throw _0x2995d3;throw new bad_request_error_1[(_0x2f9eba(0x148))](_0x2995d3);}}};BitbucketRepoService=__decorate([typedi_1[a148_0xdd90c3(0x15d)](),__param(0x1,typedi_1[a148_0xdd90c3(0x168)](providers_tokens_1[a148_0xdd90c3(0x16b)][a148_0xdd90c3(0x15c)])),__metadata(a148_0xdd90c3(0x151),[bitbucket_api_service_1['BitbucketApiService'],bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketRepoService),exports[a148_0xdd90c3(0x16c)]=BitbucketRepoService;