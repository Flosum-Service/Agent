const a205_0xce24d5=a205_0x9c3c;(function(_0x575663,_0x8ba2f0){const _0x429210=a205_0x9c3c,_0x47f4e4=_0x575663();while(!![]){try{const _0x4150b0=-parseInt(_0x429210(0xf1))/0x1*(parseInt(_0x429210(0xee))/0x2)+-parseInt(_0x429210(0xc0))/0x3*(parseInt(_0x429210(0xfd))/0x4)+parseInt(_0x429210(0xda))/0x5*(parseInt(_0x429210(0xe4))/0x6)+-parseInt(_0x429210(0xe6))/0x7*(-parseInt(_0x429210(0xf9))/0x8)+-parseInt(_0x429210(0xbc))/0x9*(-parseInt(_0x429210(0xcc))/0xa)+parseInt(_0x429210(0xf7))/0xb*(parseInt(_0x429210(0xc4))/0xc)+-parseInt(_0x429210(0xe7))/0xd*(parseInt(_0x429210(0xe0))/0xe);if(_0x4150b0===_0x8ba2f0)break;else _0x47f4e4['push'](_0x47f4e4['shift']());}catch(_0x14f275){_0x47f4e4['push'](_0x47f4e4['shift']());}}}(a205_0x4a94,0x57488));const a205_0x444a34=(function(){let _0x5c46fa=!![];return function(_0x173b11,_0x56ff1e){const _0x1f7667=_0x5c46fa?function(){const _0x5c30fa=a205_0x9c3c;if(_0x56ff1e){const _0x1d8e9f=_0x56ff1e[_0x5c30fa(0xea)](_0x173b11,arguments);return _0x56ff1e=null,_0x1d8e9f;}}:function(){};return _0x5c46fa=![],_0x1f7667;};}()),a205_0x4bfc51=a205_0x444a34(this,function(){const _0x3ebfb3=a205_0x9c3c;return a205_0x4bfc51['toString']()['search'](_0x3ebfb3(0xc6))[_0x3ebfb3(0xd8)]()[_0x3ebfb3(0xbe)](a205_0x4bfc51)['search']('(((.+)+)+)+$');});function a205_0x4a94(){const _0x53bbf8=['post','NotFoundError','metadata','83604iGpoBH','next','(((.+)+)+)+$','../../providers.tokens','decorate','defaultBranch','ERR_BITBUCKET_MISSING_WORKSPACE','BitbucketRepoService','10BEZeeJ','function','request','design:paramtypes','__metadata','project','../repo.class','values','private','workspace','get','getOne','toString','apiBody','2196035egVwNl','../../../../../core/errors/bad-request.error','../../../../../core/errors/api.error','fromBitbucket','Service','../../../../../core/errors/not-found.error','11201246DuCjew','__decorate','repositories/','Git','6qdlami','getOwnPropertyDescriptor','3133634oWQCYj','13zrqQFQ','ApiError','toLowerCase','apply','delete','GitRepoService','master','93450cSVfmb','createEmptyBranch','create','1VeXfkm','credentials','Repo','getAll','../../../internal/git.internal','defineProperty','583oeNDbo','api','8XCeTXs','put','BadRequestError','createRequest','12DWHvNF','name','autoInit','4773933ovAKyA','object','constructor','ERR_BITBUCKET_MISSING_PROJECT','582231pdhlmH'];a205_0x4a94=function(){return _0x53bbf8;};return a205_0x4a94();}a205_0x4bfc51();'use strict';var __decorate=this&&this[a205_0xce24d5(0xe1)]||function(_0x53020b,_0x2cb325,_0x303da2,_0x3e2eb5){const _0x19bbac=a205_0xce24d5;var _0x44bc56=arguments['length'],_0x1ba020=_0x44bc56<0x3?_0x2cb325:_0x3e2eb5===null?_0x3e2eb5=Object[_0x19bbac(0xe5)](_0x2cb325,_0x303da2):_0x3e2eb5,_0x167c48;if(typeof Reflect==='object'&&typeof Reflect[_0x19bbac(0xc8)]===_0x19bbac(0xcd))_0x1ba020=Reflect[_0x19bbac(0xc8)](_0x53020b,_0x2cb325,_0x303da2,_0x3e2eb5);else{for(var _0x2a3f80=_0x53020b['length']-0x1;_0x2a3f80>=0x0;_0x2a3f80--)if(_0x167c48=_0x53020b[_0x2a3f80])_0x1ba020=(_0x44bc56<0x3?_0x167c48(_0x1ba020):_0x44bc56>0x3?_0x167c48(_0x2cb325,_0x303da2,_0x1ba020):_0x167c48(_0x2cb325,_0x303da2))||_0x1ba020;}return _0x44bc56>0x3&&_0x1ba020&&Object[_0x19bbac(0xf6)](_0x2cb325,_0x303da2,_0x1ba020),_0x1ba020;},__metadata=this&&this[a205_0xce24d5(0xd0)]||function(_0x359d74,_0x1f51b5){const _0x5b85d5=a205_0xce24d5;if(typeof Reflect===_0x5b85d5(0xbd)&&typeof Reflect[_0x5b85d5(0xc3)]==='function')return Reflect[_0x5b85d5(0xc3)](_0x359d74,_0x1f51b5);},__param=this&&this['__param']||function(_0x514b43,_0x3e5a8c){return function(_0x567dcb,_0xb9a88d){_0x3e5a8c(_0x567dcb,_0xb9a88d,_0x514b43);};};function a205_0x9c3c(_0x517a6d,_0x5246dd){const _0x1b653c=a205_0x4a94();return a205_0x9c3c=function(_0x4bfc51,_0x444a34){_0x4bfc51=_0x4bfc51-0xba;let _0x4a94a7=_0x1b653c[_0x4bfc51];return _0x4a94a7;},a205_0x9c3c(_0x517a6d,_0x5246dd);}Object[a205_0xce24d5(0xf6)](exports,'__esModule',{'value':!![]}),exports[a205_0xce24d5(0xcb)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a205_0xce24d5(0xdb)),not_found_error_1=require(a205_0xce24d5(0xdf)),bitbucket_api_service_1=require('../../api/bitbucket-api.service'),typedi_1=require('typedi'),api_error_1=require(a205_0xce24d5(0xdc)),git_internal_1=require(a205_0xce24d5(0xf5)),repo_class_1=require(a205_0xce24d5(0xd2)),git_repo_service_1=require('./git-repo.service'),bitbucket_credentials_dto_1=require('../../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a205_0xce24d5(0xc7));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a205_0xce24d5(0xec)]{constructor(_0x3a7a1b,_0x19f931){const _0xf0424c=a205_0xce24d5;super(_0x3a7a1b),this[_0xf0424c(0xf8)]=_0x3a7a1b,this['request']=_0x3a7a1b[_0xf0424c(0xfc)](),this[_0xf0424c(0xd1)]=_0x19f931[_0xf0424c(0xd1)],this[_0xf0424c(0xd5)]=_0x19f931['workspace'],this[_0xf0424c(0xf2)]=_0x19f931;if(!this[_0xf0424c(0xd5)])throw new Error(errors_1[_0xf0424c(0xca)]);if(!this[_0xf0424c(0xd1)])throw new Error(errors_1[_0xf0424c(0xbf)]);}async[a205_0xce24d5(0xf0)](_0x45eeeb){const _0xba857d=a205_0xce24d5;try{const {name:_0x54f38}=_0x45eeeb,_0x1979a1={'name':_0x45eeeb[_0xba857d(0xba)],'is_private':_0x45eeeb[_0xba857d(0xd4)],..._0x45eeeb[_0xba857d(0xd9)]||{},'project':{'key':this[_0xba857d(0xd1)]}},_0x737a02=await this[_0xba857d(0xce)][_0xba857d(0xc1)]('/repositories/'+this['workspace']+'/'+_0x54f38[_0xba857d(0xe9)](),_0x1979a1),_0x809670=repo_class_1[_0xba857d(0xf3)][_0xba857d(0xdd)](_0x737a02,this[_0xba857d(0xf8)],this[_0xba857d(0xf2)]);return _0x45eeeb[_0xba857d(0xbb)]&&(await git_internal_1[_0xba857d(0xe3)][_0xba857d(0xef)](_0x809670,_0x45eeeb[_0xba857d(0xc9)]||_0xba857d(0xed),'',this[_0xba857d(0xf2)]),_0x809670['defaultBranch']=_0x45eeeb[_0xba857d(0xc9)]||_0xba857d(0xed)),_0x809670;}catch(_0x179724){if(_0x179724 instanceof api_error_1[_0xba857d(0xe8)])throw _0x179724;throw new bad_request_error_1[(_0xba857d(0xfb))](_0x179724);}}async[a205_0xce24d5(0xf4)](){const _0x5f38f3=a205_0xce24d5;try{const _0x3ad485=[];let _0x5e9c84;do{_0x5e9c84=await this[_0x5f38f3(0xce)][_0x5f38f3(0xd6)](_0x5e9c84?_0x5e9c84['next']:'repositories/'+this[_0x5f38f3(0xd5)]),_0x3ad485['push'](..._0x5e9c84[_0x5f38f3(0xd3)]);}while(_0x5e9c84[_0x5f38f3(0xc5)]);return _0x3ad485['map'](_0x29097c=>repo_class_1[_0x5f38f3(0xf3)][_0x5f38f3(0xdd)](_0x29097c,this['api'],this['credentials']));}catch(_0x131a04){if(_0x131a04 instanceof api_error_1['ApiError'])throw _0x131a04;throw new not_found_error_1[(_0x5f38f3(0xc2))](_0x131a04);}}async[a205_0xce24d5(0xd7)](_0x31e6ae){const _0x571760=a205_0xce24d5;try{const _0x4ceb76=await this[_0x571760(0xce)]['get'](_0x571760(0xe2)+this[_0x571760(0xd5)]+'/'+_0x31e6ae[_0x571760(0xe9)]());return repo_class_1[_0x571760(0xf3)][_0x571760(0xdd)](_0x4ceb76,this['api'],this[_0x571760(0xf2)]);}catch(_0x5812b8){if(_0x5812b8 instanceof api_error_1[_0x571760(0xe8)])throw _0x5812b8;throw new not_found_error_1[(_0x571760(0xc2))](_0x5812b8);}}async['update'](_0x2830db,_0x4b7536){const _0x127d4a=a205_0xce24d5;await this['getOne'](_0x2830db);try{const _0x180605=await this[_0x127d4a(0xce)][_0x127d4a(0xfa)](_0x127d4a(0xe2)+this[_0x127d4a(0xd5)]+'/'+_0x2830db['toLowerCase'](),_0x4b7536);return repo_class_1[_0x127d4a(0xf3)]['fromBitbucket'](_0x180605,this[_0x127d4a(0xf8)],this[_0x127d4a(0xf2)]);}catch(_0x2e9826){if(_0x2e9826 instanceof api_error_1[_0x127d4a(0xe8)])throw _0x2e9826;throw new not_found_error_1[(_0x127d4a(0xc2))](_0x2e9826);}}async[a205_0xce24d5(0xeb)](_0x4beb93){const _0x38eb81=a205_0xce24d5;try{await this['request'][_0x38eb81(0xeb)]('repositories/'+this[_0x38eb81(0xd5)]+'/'+_0x4beb93[_0x38eb81(0xe9)]());}catch(_0x4d05b4){if(_0x4d05b4 instanceof api_error_1['ApiError'])throw _0x4d05b4;throw new bad_request_error_1[(_0x38eb81(0xfb))](_0x4d05b4);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a205_0xce24d5(0xde)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1['Tokens']['credentials'])),__metadata(a205_0xce24d5(0xcf),[bitbucket_api_service_1['BitbucketApiService'],bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketRepoService),exports[a205_0xce24d5(0xcb)]=BitbucketRepoService;