const a199_0xfe3e2c=a199_0x264c;function a199_0x2297(){const _0x264201=['../../../../../constants/errors','Tokens','next','121uzerOJ','Repo','GitRepoService','put','credentials','1LMaMUi','1773zJZfhS','decorate','createRequest','autoInit','private','post','../../../../../core/errors/bad-request.error','/repositories/','delete','getAll','getOne','310150xhQSKF','../../api/bitbucket-api.service','repositories/','__esModule','./git-repo.service','833796MBxDcg','object','4802yZqHgz','7398ITMnRw','metadata','BitbucketApiService','3063048qKoUSU','NotFoundError','push','search','BadRequestError','get','function','createEmptyBranch','20904eRapnI','defaultBranch','constructor','name','__decorate','design:paramtypes','length','workspace','../../../../../core/errors/api.error','project','__param','106585OvFdgf','values','ApiError','../../providers.tokens','244kzkyQi','10796280tIleQg','Inject','BitbucketCredentialsDto','apiBody','getOwnPropertyDescriptor','BitbucketRepoService','__metadata','update','fromBitbucket','master','request','toLowerCase','map'];a199_0x2297=function(){return _0x264201;};return a199_0x2297();}(function(_0x52597c,_0x30d541){const _0x353f9c=a199_0x264c,_0x283cd7=_0x52597c();while(!![]){try{const _0x3d961c=parseInt(_0x353f9c(0x134))/0x1*(-parseInt(_0x353f9c(0x140))/0x2)+-parseInt(_0x353f9c(0x145))/0x3+parseInt(_0x353f9c(0x162))/0x4*(-parseInt(_0x353f9c(0x15e))/0x5)+parseInt(_0x353f9c(0x148))/0x6*(-parseInt(_0x353f9c(0x147))/0x7)+-parseInt(_0x353f9c(0x153))/0x8*(parseInt(_0x353f9c(0x135))/0x9)+parseInt(_0x353f9c(0x163))/0xa+parseInt(_0x353f9c(0x12f))/0xb*(parseInt(_0x353f9c(0x14b))/0xc);if(_0x3d961c===_0x30d541)break;else _0x283cd7['push'](_0x283cd7['shift']());}catch(_0x1caa39){_0x283cd7['push'](_0x283cd7['shift']());}}}(a199_0x2297,0xc1b87));const a199_0x529eda=(function(){let _0x3c9e34=!![];return function(_0x2f16f8,_0x324176){const _0x53e949=_0x3c9e34?function(){if(_0x324176){const _0x3f8805=_0x324176['apply'](_0x2f16f8,arguments);return _0x324176=null,_0x3f8805;}}:function(){};return _0x3c9e34=![],_0x53e949;};}()),a199_0x22be79=a199_0x529eda(this,function(){const _0xaa7eee=a199_0x264c;return a199_0x22be79['toString']()['search']('(((.+)+)+)+$')['toString']()[_0xaa7eee(0x155)](a199_0x22be79)[_0xaa7eee(0x14e)]('(((.+)+)+)+$');});a199_0x22be79();'use strict';var __decorate=this&&this[a199_0xfe3e2c(0x157)]||function(_0x47264a,_0x53b589,_0x152cd2,_0x53ff2b){const _0x413b7c=a199_0xfe3e2c;var _0x492948=arguments[_0x413b7c(0x159)],_0x28b937=_0x492948<0x3?_0x53b589:_0x53ff2b===null?_0x53ff2b=Object[_0x413b7c(0x167)](_0x53b589,_0x152cd2):_0x53ff2b,_0x462941;if(typeof Reflect===_0x413b7c(0x146)&&typeof Reflect[_0x413b7c(0x136)]==='function')_0x28b937=Reflect[_0x413b7c(0x136)](_0x47264a,_0x53b589,_0x152cd2,_0x53ff2b);else{for(var _0x569b98=_0x47264a[_0x413b7c(0x159)]-0x1;_0x569b98>=0x0;_0x569b98--)if(_0x462941=_0x47264a[_0x569b98])_0x28b937=(_0x492948<0x3?_0x462941(_0x28b937):_0x492948>0x3?_0x462941(_0x53b589,_0x152cd2,_0x28b937):_0x462941(_0x53b589,_0x152cd2))||_0x28b937;}return _0x492948>0x3&&_0x28b937&&Object['defineProperty'](_0x53b589,_0x152cd2,_0x28b937),_0x28b937;},__metadata=this&&this[a199_0xfe3e2c(0x169)]||function(_0x17c1c5,_0x2e8913){const _0x490450=a199_0xfe3e2c;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x490450(0x151))return Reflect[_0x490450(0x149)](_0x17c1c5,_0x2e8913);},__param=this&&this[a199_0xfe3e2c(0x15d)]||function(_0x541cc6,_0x1816ab){return function(_0x3b712b,_0x36ae33){_0x1816ab(_0x3b712b,_0x36ae33,_0x541cc6);};};function a199_0x264c(_0x51501d,_0x17d732){const _0x4e2927=a199_0x2297();return a199_0x264c=function(_0x22be79,_0x529eda){_0x22be79=_0x22be79-0x12b;let _0x2297a2=_0x4e2927[_0x22be79];return _0x2297a2;},a199_0x264c(_0x51501d,_0x17d732);}Object['defineProperty'](exports,a199_0xfe3e2c(0x143),{'value':!![]}),exports['BitbucketRepoService']=void 0x0;const errors_1=require(a199_0xfe3e2c(0x12c)),bad_request_error_1=require(a199_0xfe3e2c(0x13b)),not_found_error_1=require('../../../../../core/errors/not-found.error'),bitbucket_api_service_1=require(a199_0xfe3e2c(0x141)),typedi_1=require('typedi'),api_error_1=require(a199_0xfe3e2c(0x15b)),git_internal_1=require('../../../internal/git.internal'),repo_class_1=require('../repo.class'),git_repo_service_1=require(a199_0xfe3e2c(0x144)),bitbucket_credentials_dto_1=require('../../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a199_0xfe3e2c(0x161));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a199_0xfe3e2c(0x131)]{constructor(_0x458cc3,_0x18d76d){const _0x4f5245=a199_0xfe3e2c;super(_0x458cc3),this['api']=_0x458cc3,this[_0x4f5245(0x16d)]=_0x458cc3[_0x4f5245(0x137)](),this[_0x4f5245(0x15c)]=_0x18d76d[_0x4f5245(0x15c)],this[_0x4f5245(0x15a)]=_0x18d76d[_0x4f5245(0x15a)],this['credentials']=_0x18d76d;if(!this[_0x4f5245(0x15a)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x4f5245(0x15c)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}async['create'](_0x317f2c){const _0x3319e1=a199_0xfe3e2c;try{const {name:_0x540b9b}=_0x317f2c,_0x5d74b4={'name':_0x317f2c[_0x3319e1(0x156)],'is_private':_0x317f2c[_0x3319e1(0x139)],..._0x317f2c[_0x3319e1(0x166)]||{},'project':{'key':this[_0x3319e1(0x15c)]}},_0x24a645=await this['request'][_0x3319e1(0x13a)](_0x3319e1(0x13c)+this['workspace']+'/'+_0x540b9b[_0x3319e1(0x16e)](),_0x5d74b4),_0x4a8138=repo_class_1[_0x3319e1(0x130)]['fromBitbucket'](_0x24a645,this['api'],this[_0x3319e1(0x133)]);return _0x317f2c[_0x3319e1(0x138)]&&(await git_internal_1['Git'][_0x3319e1(0x152)](_0x4a8138,_0x317f2c['defaultBranch']||_0x3319e1(0x16c),'',this['credentials']),_0x4a8138[_0x3319e1(0x154)]=_0x317f2c['defaultBranch']||_0x3319e1(0x16c)),_0x4a8138;}catch(_0x3d5c09){if(_0x3d5c09 instanceof api_error_1[_0x3319e1(0x160)])throw _0x3d5c09;throw new bad_request_error_1[(_0x3319e1(0x14f))](_0x3d5c09);}}async[a199_0xfe3e2c(0x13e)](){const _0x38bb76=a199_0xfe3e2c;try{const _0x4f8461=[];let _0x22b9e3;do{_0x22b9e3=await this['request']['get'](_0x22b9e3?_0x22b9e3[_0x38bb76(0x12e)]:_0x38bb76(0x142)+this[_0x38bb76(0x15a)]),_0x4f8461[_0x38bb76(0x14d)](..._0x22b9e3[_0x38bb76(0x15f)]);}while(_0x22b9e3[_0x38bb76(0x12e)]);return _0x4f8461[_0x38bb76(0x12b)](_0x1dc466=>repo_class_1[_0x38bb76(0x130)][_0x38bb76(0x16b)](_0x1dc466,this['api'],this['credentials']));}catch(_0x1fc18e){if(_0x1fc18e instanceof api_error_1[_0x38bb76(0x160)])throw _0x1fc18e;throw new not_found_error_1['NotFoundError'](_0x1fc18e);}}async[a199_0xfe3e2c(0x13f)](_0x423dd4){const _0x5a48c2=a199_0xfe3e2c;try{const _0xcc0d35=await this[_0x5a48c2(0x16d)][_0x5a48c2(0x150)](_0x5a48c2(0x142)+this['workspace']+'/'+_0x423dd4['toLowerCase']());return repo_class_1[_0x5a48c2(0x130)][_0x5a48c2(0x16b)](_0xcc0d35,this['api'],this['credentials']);}catch(_0x5ca3fc){if(_0x5ca3fc instanceof api_error_1[_0x5a48c2(0x160)])throw _0x5ca3fc;throw new not_found_error_1[(_0x5a48c2(0x14c))](_0x5ca3fc);}}async[a199_0xfe3e2c(0x16a)](_0x1cdfe5,_0x565ba9){const _0x2ee4c6=a199_0xfe3e2c;await this[_0x2ee4c6(0x13f)](_0x1cdfe5);try{const _0x15a30b=await this[_0x2ee4c6(0x16d)][_0x2ee4c6(0x132)](_0x2ee4c6(0x142)+this['workspace']+'/'+_0x1cdfe5[_0x2ee4c6(0x16e)](),_0x565ba9);return repo_class_1[_0x2ee4c6(0x130)][_0x2ee4c6(0x16b)](_0x15a30b,this['api'],this[_0x2ee4c6(0x133)]);}catch(_0xd4e03a){if(_0xd4e03a instanceof api_error_1['ApiError'])throw _0xd4e03a;throw new not_found_error_1[(_0x2ee4c6(0x14c))](_0xd4e03a);}}async[a199_0xfe3e2c(0x13d)](_0x539a5b){const _0x22fde4=a199_0xfe3e2c;try{await this[_0x22fde4(0x16d)][_0x22fde4(0x13d)](_0x22fde4(0x142)+this[_0x22fde4(0x15a)]+'/'+_0x539a5b['toLowerCase']());}catch(_0x5b8f2a){if(_0x5b8f2a instanceof api_error_1[_0x22fde4(0x160)])throw _0x5b8f2a;throw new bad_request_error_1[(_0x22fde4(0x14f))](_0x5b8f2a);}}};BitbucketRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a199_0xfe3e2c(0x164)])(providers_tokens_1[a199_0xfe3e2c(0x12d)][a199_0xfe3e2c(0x133)])),__metadata(a199_0xfe3e2c(0x158),[bitbucket_api_service_1[a199_0xfe3e2c(0x14a)],bitbucket_credentials_dto_1[a199_0xfe3e2c(0x165)]])],BitbucketRepoService),exports[a199_0xfe3e2c(0x168)]=BitbucketRepoService;