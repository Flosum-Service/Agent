const a199_0x329497=a199_0x4bd6;(function(_0x26daf3,_0x245496){const _0x29a399=a199_0x4bd6,_0x302feb=_0x26daf3();while(!![]){try{const _0x521c62=-parseInt(_0x29a399(0xe7))/0x1+-parseInt(_0x29a399(0x102))/0x2+parseInt(_0x29a399(0xd1))/0x3+-parseInt(_0x29a399(0xfd))/0x4*(parseInt(_0x29a399(0xde))/0x5)+parseInt(_0x29a399(0xf1))/0x6*(parseInt(_0x29a399(0xfe))/0x7)+parseInt(_0x29a399(0xf6))/0x8*(-parseInt(_0x29a399(0xda))/0x9)+-parseInt(_0x29a399(0xcd))/0xa*(-parseInt(_0x29a399(0x10d))/0xb);if(_0x521c62===_0x245496)break;else _0x302feb['push'](_0x302feb['shift']());}catch(_0x4231ad){_0x302feb['push'](_0x302feb['shift']());}}}(a199_0x197f,0xaa436));const a199_0x52ae05=(function(){let _0x1ae379=!![];return function(_0x4e9831,_0x4d96d8){const _0xe7149a=_0x1ae379?function(){const _0x1ae65b=a199_0x4bd6;if(_0x4d96d8){const _0x191fde=_0x4d96d8[_0x1ae65b(0x10a)](_0x4e9831,arguments);return _0x4d96d8=null,_0x191fde;}}:function(){};return _0x1ae379=![],_0xe7149a;};}()),a199_0x41ae72=a199_0x52ae05(this,function(){const _0x28a725=a199_0x4bd6;return a199_0x41ae72['toString']()[_0x28a725(0x103)](_0x28a725(0xdf))[_0x28a725(0xec)]()[_0x28a725(0xdd)](a199_0x41ae72)['search'](_0x28a725(0xdf));});function a199_0x4bd6(_0x531a9d,_0xa83d40){const _0x30c939=a199_0x197f();return a199_0x4bd6=function(_0x41ae72,_0x52ae05){_0x41ae72=_0x41ae72-0xcd;let _0x197fdf=_0x30c939[_0x41ae72];return _0x197fdf;},a199_0x4bd6(_0x531a9d,_0xa83d40);}a199_0x41ae72();'use strict';function a199_0x197f(){const _0x383dc1=['Git','map','1451548JNSJMm','244391GYlSNf','apiBody','defaultBranch','update','2429652xJpgmn','search','BitbucketApiService','GitRepoService','createRequest','object','./git-repo.service','api','apply','credentials','delete','11WNghrc','toLowerCase','../../../../../constants/errors','Repo','request','repositories/','21212430mOmknj','BadRequestError','../../credentials/dto/bitbucket-credentials.dto','get','718893gBkDSX','BitbucketCredentialsDto','Service','../../api/bitbucket-api.service','post','length','getAll','project','getOne','441xIBCoN','workspace','decorate','constructor','5MlOVzD','(((.+)+)+)+$','put','autoInit','BitbucketRepoService','../repo.class','../../../../../core/errors/api.error','NotFoundError','next','1083518rTJVWz','metadata','../../../../../core/errors/bad-request.error','../../../../../core/errors/not-found.error','__metadata','toString','__param','__decorate','design:paramtypes','ERR_BITBUCKET_MISSING_WORKSPACE','204OfxvEY','../../providers.tokens','function','ApiError','master','30904OtZYjt','fromBitbucket','__esModule','/repositories/','name'];a199_0x197f=function(){return _0x383dc1;};return a199_0x197f();}var __decorate=this&&this[a199_0x329497(0xee)]||function(_0x2c3ae1,_0x4e89ca,_0x31d910,_0x3ec46e){const _0x4686b0=a199_0x329497;var _0x2cb16c=arguments[_0x4686b0(0xd6)],_0x2195c9=_0x2cb16c<0x3?_0x4e89ca:_0x3ec46e===null?_0x3ec46e=Object['getOwnPropertyDescriptor'](_0x4e89ca,_0x31d910):_0x3ec46e,_0x2b2881;if(typeof Reflect==='object'&&typeof Reflect[_0x4686b0(0xdc)]===_0x4686b0(0xf3))_0x2195c9=Reflect[_0x4686b0(0xdc)](_0x2c3ae1,_0x4e89ca,_0x31d910,_0x3ec46e);else{for(var _0x2f1053=_0x2c3ae1[_0x4686b0(0xd6)]-0x1;_0x2f1053>=0x0;_0x2f1053--)if(_0x2b2881=_0x2c3ae1[_0x2f1053])_0x2195c9=(_0x2cb16c<0x3?_0x2b2881(_0x2195c9):_0x2cb16c>0x3?_0x2b2881(_0x4e89ca,_0x31d910,_0x2195c9):_0x2b2881(_0x4e89ca,_0x31d910))||_0x2195c9;}return _0x2cb16c>0x3&&_0x2195c9&&Object['defineProperty'](_0x4e89ca,_0x31d910,_0x2195c9),_0x2195c9;},__metadata=this&&this[a199_0x329497(0xeb)]||function(_0x445115,_0x14d3bf){const _0xc79eb2=a199_0x329497;if(typeof Reflect===_0xc79eb2(0x107)&&typeof Reflect[_0xc79eb2(0xe8)]==='function')return Reflect[_0xc79eb2(0xe8)](_0x445115,_0x14d3bf);},__param=this&&this[a199_0x329497(0xed)]||function(_0x17c762,_0x3a7308){return function(_0x91f5d3,_0x52660a){_0x3a7308(_0x91f5d3,_0x52660a,_0x17c762);};};Object['defineProperty'](exports,a199_0x329497(0xf8),{'value':!![]}),exports['BitbucketRepoService']=void 0x0;const errors_1=require(a199_0x329497(0x10f)),bad_request_error_1=require(a199_0x329497(0xe9)),not_found_error_1=require(a199_0x329497(0xea)),bitbucket_api_service_1=require(a199_0x329497(0xd4)),typedi_1=require('typedi'),api_error_1=require(a199_0x329497(0xe4)),git_internal_1=require('../../../internal/git.internal'),repo_class_1=require(a199_0x329497(0xe3)),git_repo_service_1=require(a199_0x329497(0x108)),bitbucket_credentials_dto_1=require(a199_0x329497(0xcf)),providers_tokens_1=require(a199_0x329497(0xf2));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a199_0x329497(0x105)]{constructor(_0x3daae9,_0x5adc20){const _0x797b12=a199_0x329497;super(_0x3daae9),this[_0x797b12(0x109)]=_0x3daae9,this[_0x797b12(0x111)]=_0x3daae9[_0x797b12(0x106)](),this[_0x797b12(0xd8)]=_0x5adc20[_0x797b12(0xd8)],this[_0x797b12(0xdb)]=_0x5adc20[_0x797b12(0xdb)],this[_0x797b12(0x10b)]=_0x5adc20;if(!this['workspace'])throw new Error(errors_1[_0x797b12(0xf0)]);if(!this['project'])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}async['create'](_0xb28493){const _0x20976b=a199_0x329497;try{const {name:_0x53b487}=_0xb28493,_0x1ea9ab={'name':_0xb28493[_0x20976b(0xfa)],'is_private':_0xb28493['private'],..._0xb28493[_0x20976b(0xff)]||{},'project':{'key':this[_0x20976b(0xd8)]}},_0x1c2b28=await this[_0x20976b(0x111)][_0x20976b(0xd5)](_0x20976b(0xf9)+this['workspace']+'/'+_0x53b487[_0x20976b(0x10e)](),_0x1ea9ab),_0x308859=repo_class_1[_0x20976b(0x110)]['fromBitbucket'](_0x1c2b28,this[_0x20976b(0x109)],this[_0x20976b(0x10b)]);return _0xb28493[_0x20976b(0xe1)]&&(await git_internal_1[_0x20976b(0xfb)]['createEmptyBranch'](_0x308859,_0xb28493[_0x20976b(0x100)]||_0x20976b(0xf5),'',this['credentials']),_0x308859[_0x20976b(0x100)]=_0xb28493['defaultBranch']||_0x20976b(0xf5)),_0x308859;}catch(_0x2d4ec6){if(_0x2d4ec6 instanceof api_error_1['ApiError'])throw _0x2d4ec6;throw new bad_request_error_1[(_0x20976b(0xce))](_0x2d4ec6);}}async[a199_0x329497(0xd7)](){const _0x3a0334=a199_0x329497;try{const _0x210f1a=[];let _0x48872b;do{_0x48872b=await this[_0x3a0334(0x111)][_0x3a0334(0xd0)](_0x48872b?_0x48872b['next']:_0x3a0334(0x112)+this[_0x3a0334(0xdb)]),_0x210f1a['push'](..._0x48872b['values']);}while(_0x48872b[_0x3a0334(0xe6)]);return _0x210f1a[_0x3a0334(0xfc)](_0x50b5a3=>repo_class_1['Repo'][_0x3a0334(0xf7)](_0x50b5a3,this[_0x3a0334(0x109)],this[_0x3a0334(0x10b)]));}catch(_0x677b3f){if(_0x677b3f instanceof api_error_1[_0x3a0334(0xf4)])throw _0x677b3f;throw new not_found_error_1[(_0x3a0334(0xe5))](_0x677b3f);}}async[a199_0x329497(0xd9)](_0x2e448c){const _0x5616e5=a199_0x329497;try{const _0x47c738=await this[_0x5616e5(0x111)][_0x5616e5(0xd0)](_0x5616e5(0x112)+this[_0x5616e5(0xdb)]+'/'+_0x2e448c[_0x5616e5(0x10e)]());return repo_class_1[_0x5616e5(0x110)][_0x5616e5(0xf7)](_0x47c738,this[_0x5616e5(0x109)],this[_0x5616e5(0x10b)]);}catch(_0x365ca9){if(_0x365ca9 instanceof api_error_1[_0x5616e5(0xf4)])throw _0x365ca9;throw new not_found_error_1[(_0x5616e5(0xe5))](_0x365ca9);}}async[a199_0x329497(0x101)](_0x77bd78,_0x5bb3ab){const _0x3a9456=a199_0x329497;await this['getOne'](_0x77bd78);try{const _0x413199=await this[_0x3a9456(0x111)][_0x3a9456(0xe0)]('repositories/'+this['workspace']+'/'+_0x77bd78[_0x3a9456(0x10e)](),_0x5bb3ab);return repo_class_1[_0x3a9456(0x110)][_0x3a9456(0xf7)](_0x413199,this[_0x3a9456(0x109)],this[_0x3a9456(0x10b)]);}catch(_0x1e7b22){if(_0x1e7b22 instanceof api_error_1[_0x3a9456(0xf4)])throw _0x1e7b22;throw new not_found_error_1[(_0x3a9456(0xe5))](_0x1e7b22);}}async['delete'](_0x52ec56){const _0x554e23=a199_0x329497;try{await this[_0x554e23(0x111)][_0x554e23(0x10c)](_0x554e23(0x112)+this[_0x554e23(0xdb)]+'/'+_0x52ec56[_0x554e23(0x10e)]());}catch(_0x127c7b){if(_0x127c7b instanceof api_error_1[_0x554e23(0xf4)])throw _0x127c7b;throw new bad_request_error_1[(_0x554e23(0xce))](_0x127c7b);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a199_0x329497(0xd3)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1['Tokens']['credentials'])),__metadata(a199_0x329497(0xef),[bitbucket_api_service_1[a199_0x329497(0x104)],bitbucket_credentials_dto_1[a199_0x329497(0xd2)]])],BitbucketRepoService),exports[a199_0x329497(0xe2)]=BitbucketRepoService;