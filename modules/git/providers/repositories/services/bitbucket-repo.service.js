const a167_0x29e1e4=a167_0x13a4;(function(_0x28f36d,_0x38dca2){const _0x2aba3b=a167_0x13a4,_0x2fcd04=_0x28f36d();while(!![]){try{const _0x2c38ff=-parseInt(_0x2aba3b(0x13e))/0x1*(-parseInt(_0x2aba3b(0x15a))/0x2)+-parseInt(_0x2aba3b(0x150))/0x3+-parseInt(_0x2aba3b(0x12e))/0x4*(parseInt(_0x2aba3b(0x15c))/0x5)+-parseInt(_0x2aba3b(0x14f))/0x6*(parseInt(_0x2aba3b(0x126))/0x7)+parseInt(_0x2aba3b(0x144))/0x8*(parseInt(_0x2aba3b(0x149))/0x9)+-parseInt(_0x2aba3b(0x129))/0xa+parseInt(_0x2aba3b(0x12a))/0xb;if(_0x2c38ff===_0x38dca2)break;else _0x2fcd04['push'](_0x2fcd04['shift']());}catch(_0x49963f){_0x2fcd04['push'](_0x2fcd04['shift']());}}}(a167_0x4ca3,0xd5cc8));const a167_0x13c157=(function(){let _0x503594=!![];return function(_0x10835f,_0x4141de){const _0x2256e9=_0x503594?function(){if(_0x4141de){const _0x465bcb=_0x4141de['apply'](_0x10835f,arguments);return _0x4141de=null,_0x465bcb;}}:function(){};return _0x503594=![],_0x2256e9;};}()),a167_0x44d7af=a167_0x13c157(this,function(){const _0x388474=a167_0x13a4;return a167_0x44d7af[_0x388474(0x147)]()['search'](_0x388474(0x15d))[_0x388474(0x147)]()[_0x388474(0x135)](a167_0x44d7af)[_0x388474(0x14e)](_0x388474(0x15d));});a167_0x44d7af();'use strict';function a167_0x13a4(_0x1fdadb,_0x58fa49){const _0x157083=a167_0x4ca3();return a167_0x13a4=function(_0x44d7af,_0x13c157){_0x44d7af=_0x44d7af-0x115;let _0x4ca3b3=_0x157083[_0x44d7af];return _0x4ca3b3;},a167_0x13a4(_0x1fdadb,_0x58fa49);}var __decorate=this&&this[a167_0x29e1e4(0x13b)]||function(_0x2f26bb,_0x37860d,_0x3133f9,_0x50bacc){const _0x5c8633=a167_0x29e1e4;var _0x1e0c5f=arguments[_0x5c8633(0x138)],_0x4acfdf=_0x1e0c5f<0x3?_0x37860d:_0x50bacc===null?_0x50bacc=Object[_0x5c8633(0x133)](_0x37860d,_0x3133f9):_0x50bacc,_0x530e16;if(typeof Reflect===_0x5c8633(0x14a)&&typeof Reflect[_0x5c8633(0x14c)]===_0x5c8633(0x154))_0x4acfdf=Reflect[_0x5c8633(0x14c)](_0x2f26bb,_0x37860d,_0x3133f9,_0x50bacc);else{for(var _0xbdbb88=_0x2f26bb[_0x5c8633(0x138)]-0x1;_0xbdbb88>=0x0;_0xbdbb88--)if(_0x530e16=_0x2f26bb[_0xbdbb88])_0x4acfdf=(_0x1e0c5f<0x3?_0x530e16(_0x4acfdf):_0x1e0c5f>0x3?_0x530e16(_0x37860d,_0x3133f9,_0x4acfdf):_0x530e16(_0x37860d,_0x3133f9))||_0x4acfdf;}return _0x1e0c5f>0x3&&_0x4acfdf&&Object[_0x5c8633(0x14b)](_0x37860d,_0x3133f9,_0x4acfdf),_0x4acfdf;},__metadata=this&&this['__metadata']||function(_0x16b004,_0x16600a){const _0x30a902=a167_0x29e1e4;if(typeof Reflect===_0x30a902(0x14a)&&typeof Reflect[_0x30a902(0x115)]===_0x30a902(0x154))return Reflect['metadata'](_0x16b004,_0x16600a);},__param=this&&this['__param']||function(_0x386698,_0x45944e){return function(_0x5a50e4,_0x58ad6f){_0x45944e(_0x5a50e4,_0x58ad6f,_0x386698);};};Object['defineProperty'](exports,a167_0x29e1e4(0x12c),{'value':!![]}),exports[a167_0x29e1e4(0x14d)]=void 0x0;const errors_1=require(a167_0x29e1e4(0x13c)),bad_request_error_1=require(a167_0x29e1e4(0x134)),not_found_error_1=require('../../../../../core/errors/not-found.error'),bitbucket_api_service_1=require(a167_0x29e1e4(0x11a)),typedi_1=require(a167_0x29e1e4(0x13f)),api_error_1=require(a167_0x29e1e4(0x143)),git_internal_1=require(a167_0x29e1e4(0x13d)),repo_class_1=require(a167_0x29e1e4(0x117)),git_repo_service_1=require(a167_0x29e1e4(0x156)),bitbucket_credentials_dto_1=require(a167_0x29e1e4(0x124)),providers_tokens_1=require('../../providers.tokens');function a167_0x4ca3(){const _0xe06f6b=['Tokens','createEmptyBranch','getOwnPropertyDescriptor','../../../../../core/errors/bad-request.error','constructor','map','get','length','name','ERR_BITBUCKET_MISSING_PROJECT','__decorate','../../../../../constants/errors','../../../internal/git.internal','1QvCzqW','typedi','getAll','Git','Repo','../../../../../core/errors/api.error','21912VSZPqv','put','GitRepoService','toString','master','5058FtgqQT','object','defineProperty','decorate','BitbucketRepoService','search','6NYdvXb','4242720OKKIWu','BadRequestError','api','request','function','Service','./git-repo.service','values','BitbucketApiService','post','2750828iXFMtJ','project','54455aFpImu','(((.+)+)+)+$','metadata','NotFoundError','../repo.class','ApiError','ERR_BITBUCKET_MISSING_WORKSPACE','../../api/bitbucket-api.service','fromBitbucket','autoInit','next','getOne','BitbucketCredentialsDto','apiBody','Inject','/repositories/','toLowerCase','../../credentials/dto/bitbucket-credentials.dto','credentials','11301647luSJvu','defaultBranch','create','10757750Webrpj','30148426dlPKva','createRequest','__esModule','delete','248negFLn','workspace','repositories/'];a167_0x4ca3=function(){return _0xe06f6b;};return a167_0x4ca3();}let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a167_0x29e1e4(0x146)]{constructor(_0x1dc0e3,_0xff6f75){const _0x3d8e30=a167_0x29e1e4;super(_0x1dc0e3),this[_0x3d8e30(0x152)]=_0x1dc0e3,this[_0x3d8e30(0x153)]=_0x1dc0e3[_0x3d8e30(0x12b)](),this[_0x3d8e30(0x15b)]=_0xff6f75[_0x3d8e30(0x15b)],this[_0x3d8e30(0x12f)]=_0xff6f75[_0x3d8e30(0x12f)],this[_0x3d8e30(0x125)]=_0xff6f75;if(!this[_0x3d8e30(0x12f)])throw new Error(errors_1[_0x3d8e30(0x119)]);if(!this['project'])throw new Error(errors_1[_0x3d8e30(0x13a)]);}async[a167_0x29e1e4(0x128)](_0x3cad61){const _0x17f8bb=a167_0x29e1e4;try{const {name:_0x2ac7a3}=_0x3cad61,_0x15769a={'name':_0x3cad61[_0x17f8bb(0x139)],'is_private':_0x3cad61['private'],..._0x3cad61[_0x17f8bb(0x120)]||{},'project':{'key':this[_0x17f8bb(0x15b)]}},_0x5e260a=await this[_0x17f8bb(0x153)][_0x17f8bb(0x159)](_0x17f8bb(0x122)+this[_0x17f8bb(0x12f)]+'/'+_0x2ac7a3[_0x17f8bb(0x123)](),_0x15769a),_0x138dba=repo_class_1[_0x17f8bb(0x142)][_0x17f8bb(0x11b)](_0x5e260a,this['api'],this['credentials']);return _0x3cad61[_0x17f8bb(0x11c)]&&(await git_internal_1[_0x17f8bb(0x141)][_0x17f8bb(0x132)](_0x138dba,_0x3cad61['defaultBranch']||_0x17f8bb(0x148),'',this[_0x17f8bb(0x125)]),_0x138dba['defaultBranch']=_0x3cad61[_0x17f8bb(0x127)]||'master'),_0x138dba;}catch(_0x384420){if(_0x384420 instanceof api_error_1[_0x17f8bb(0x118)])throw _0x384420;throw new bad_request_error_1[(_0x17f8bb(0x151))](_0x384420);}}async[a167_0x29e1e4(0x140)](){const _0x4e944c=a167_0x29e1e4;try{const _0x1ec7c5=[];let _0x4e945d;do{_0x4e945d=await this['request'][_0x4e944c(0x137)](_0x4e945d?_0x4e945d['next']:_0x4e944c(0x130)+this['workspace']),_0x1ec7c5['push'](..._0x4e945d[_0x4e944c(0x157)]);}while(_0x4e945d[_0x4e944c(0x11d)]);return _0x1ec7c5[_0x4e944c(0x136)](_0x202125=>repo_class_1[_0x4e944c(0x142)][_0x4e944c(0x11b)](_0x202125,this[_0x4e944c(0x152)],this[_0x4e944c(0x125)]));}catch(_0x19f6e1){if(_0x19f6e1 instanceof api_error_1[_0x4e944c(0x118)])throw _0x19f6e1;throw new not_found_error_1[(_0x4e944c(0x116))](_0x19f6e1);}}async['getOne'](_0x4cbdf6){const _0x374971=a167_0x29e1e4;try{const _0xdb3fe5=await this[_0x374971(0x153)][_0x374971(0x137)](_0x374971(0x130)+this[_0x374971(0x12f)]+'/'+_0x4cbdf6[_0x374971(0x123)]());return repo_class_1[_0x374971(0x142)][_0x374971(0x11b)](_0xdb3fe5,this[_0x374971(0x152)],this[_0x374971(0x125)]);}catch(_0x1e48db){if(_0x1e48db instanceof api_error_1[_0x374971(0x118)])throw _0x1e48db;throw new not_found_error_1[(_0x374971(0x116))](_0x1e48db);}}async['update'](_0x5e1693,_0xf9b818){const _0x2b9fea=a167_0x29e1e4;await this[_0x2b9fea(0x11e)](_0x5e1693);try{const _0x5e0e30=await this[_0x2b9fea(0x153)][_0x2b9fea(0x145)](_0x2b9fea(0x130)+this[_0x2b9fea(0x12f)]+'/'+_0x5e1693[_0x2b9fea(0x123)](),_0xf9b818);return repo_class_1['Repo'][_0x2b9fea(0x11b)](_0x5e0e30,this[_0x2b9fea(0x152)],this['credentials']);}catch(_0x4abb7d){if(_0x4abb7d instanceof api_error_1['ApiError'])throw _0x4abb7d;throw new not_found_error_1[(_0x2b9fea(0x116))](_0x4abb7d);}}async['delete'](_0x48b464){const _0x41e149=a167_0x29e1e4;try{await this[_0x41e149(0x153)][_0x41e149(0x12d)](_0x41e149(0x130)+this[_0x41e149(0x12f)]+'/'+_0x48b464['toLowerCase']());}catch(_0x4a2932){if(_0x4a2932 instanceof api_error_1[_0x41e149(0x118)])throw _0x4a2932;throw new bad_request_error_1[(_0x41e149(0x151))](_0x4a2932);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a167_0x29e1e4(0x155)])(),__param(0x1,(0x0,typedi_1[a167_0x29e1e4(0x121)])(providers_tokens_1[a167_0x29e1e4(0x131)][a167_0x29e1e4(0x125)])),__metadata('design:paramtypes',[bitbucket_api_service_1[a167_0x29e1e4(0x158)],bitbucket_credentials_dto_1[a167_0x29e1e4(0x11f)]])],BitbucketRepoService),exports[a167_0x29e1e4(0x14d)]=BitbucketRepoService;