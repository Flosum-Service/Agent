function a200_0x3971(){const _0x543777=['project','BitbucketCredentialsDto','credentials','metadata','defineProperty','object','BitbucketApiService','218665CjhCjT','6zJvGmA','../../../../../core/errors/not-found.error','search','delete','length','NotFoundError','repositories/','values','240KUMtkO','../../../../../core/errors/api.error','975948zuvaRv','toString','request','Inject','Service','api','getAll','defaultBranch','2213930JiyFlr','map','15684687uuCSYH','__esModule','push','master','../../credentials/dto/bitbucket-credentials.dto','getOne','apply','createRequest','constructor','function','autoInit','create','__param','Tokens','Git','typedi','../../providers.tokens','(((.+)+)+)+$','workspace','/repositories/','get','Repo','15586320SWmrib','../../../internal/git.internal','name','private','../../api/bitbucket-api.service','design:paramtypes','fromBitbucket','BadRequestError','146846wrVRmp','../../../../../core/errors/bad-request.error','decorate','apiBody','472HsYpXP','ApiError','BitbucketRepoService','GitRepoService','1684712NnTfOr','toLowerCase','createEmptyBranch','next'];a200_0x3971=function(){return _0x543777;};return a200_0x3971();}const a200_0x18d68a=a200_0x1437;(function(_0x3fc0ac,_0x4ed0d7){const _0x1e7fdb=a200_0x1437,_0x5f00e2=_0x3fc0ac();while(!![]){try{const _0x1bddd2=parseInt(_0x1e7fdb(0x18b))/0x1+parseInt(_0x1e7fdb(0x14d))/0x2+-parseInt(_0x1e7fdb(0x181))/0x3*(parseInt(_0x1e7fdb(0x175))/0x4)+parseInt(_0x1e7fdb(0x180))/0x5*(parseInt(_0x1e7fdb(0x189))/0x6)+-parseInt(_0x1e7fdb(0x16d))/0x7*(-parseInt(_0x1e7fdb(0x171))/0x8)+-parseInt(_0x1e7fdb(0x14f))/0x9+-parseInt(_0x1e7fdb(0x165))/0xa;if(_0x1bddd2===_0x4ed0d7)break;else _0x5f00e2['push'](_0x5f00e2['shift']());}catch(_0x29c77d){_0x5f00e2['push'](_0x5f00e2['shift']());}}}(a200_0x3971,0xe21fc));const a200_0x3927c3=(function(){let _0xc82cda=!![];return function(_0x11fb4e,_0x2492d9){const _0x292504=_0xc82cda?function(){const _0x17b67a=a200_0x1437;if(_0x2492d9){const _0x5b0ee3=_0x2492d9[_0x17b67a(0x155)](_0x11fb4e,arguments);return _0x2492d9=null,_0x5b0ee3;}}:function(){};return _0xc82cda=![],_0x292504;};}()),a200_0x144b7d=a200_0x3927c3(this,function(){const _0x413653=a200_0x1437;return a200_0x144b7d[_0x413653(0x18c)]()[_0x413653(0x183)](_0x413653(0x160))[_0x413653(0x18c)]()[_0x413653(0x157)](a200_0x144b7d)[_0x413653(0x183)](_0x413653(0x160));});a200_0x144b7d();'use strict';var __decorate=this&&this['__decorate']||function(_0x503c9e,_0x369d9b,_0x7dd7b2,_0x4d470b){const _0x492613=a200_0x1437;var _0x416a94=arguments['length'],_0x1551f8=_0x416a94<0x3?_0x369d9b:_0x4d470b===null?_0x4d470b=Object['getOwnPropertyDescriptor'](_0x369d9b,_0x7dd7b2):_0x4d470b,_0xda7cd6;if(typeof Reflect===_0x492613(0x17e)&&typeof Reflect[_0x492613(0x16f)]===_0x492613(0x158))_0x1551f8=Reflect[_0x492613(0x16f)](_0x503c9e,_0x369d9b,_0x7dd7b2,_0x4d470b);else{for(var _0xf1f033=_0x503c9e[_0x492613(0x185)]-0x1;_0xf1f033>=0x0;_0xf1f033--)if(_0xda7cd6=_0x503c9e[_0xf1f033])_0x1551f8=(_0x416a94<0x3?_0xda7cd6(_0x1551f8):_0x416a94>0x3?_0xda7cd6(_0x369d9b,_0x7dd7b2,_0x1551f8):_0xda7cd6(_0x369d9b,_0x7dd7b2))||_0x1551f8;}return _0x416a94>0x3&&_0x1551f8&&Object[_0x492613(0x17d)](_0x369d9b,_0x7dd7b2,_0x1551f8),_0x1551f8;},__metadata=this&&this['__metadata']||function(_0x180929,_0x5c977f){const _0xf20490=a200_0x1437;if(typeof Reflect===_0xf20490(0x17e)&&typeof Reflect[_0xf20490(0x17c)]===_0xf20490(0x158))return Reflect[_0xf20490(0x17c)](_0x180929,_0x5c977f);},__param=this&&this[a200_0x18d68a(0x15b)]||function(_0x4add1a,_0x30f00f){return function(_0x36e216,_0x57c6bd){_0x30f00f(_0x36e216,_0x57c6bd,_0x4add1a);};};Object[a200_0x18d68a(0x17d)](exports,a200_0x18d68a(0x150),{'value':!![]}),exports[a200_0x18d68a(0x173)]=void 0x0;function a200_0x1437(_0x1bfdfa,_0xdd4fe0){const _0x5f5302=a200_0x3971();return a200_0x1437=function(_0x144b7d,_0x3927c3){_0x144b7d=_0x144b7d-0x14a;let _0x39715b=_0x5f5302[_0x144b7d];return _0x39715b;},a200_0x1437(_0x1bfdfa,_0xdd4fe0);}const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a200_0x18d68a(0x16e)),not_found_error_1=require(a200_0x18d68a(0x182)),bitbucket_api_service_1=require(a200_0x18d68a(0x169)),typedi_1=require(a200_0x18d68a(0x15e)),api_error_1=require(a200_0x18d68a(0x18a)),git_internal_1=require(a200_0x18d68a(0x166)),repo_class_1=require('../repo.class'),git_repo_service_1=require('./git-repo.service'),bitbucket_credentials_dto_1=require(a200_0x18d68a(0x153)),providers_tokens_1=require(a200_0x18d68a(0x15f));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a200_0x18d68a(0x174)]{constructor(_0x256763,_0x88492a){const _0x5bf064=a200_0x18d68a;super(_0x256763),this[_0x5bf064(0x14a)]=_0x256763,this[_0x5bf064(0x18d)]=_0x256763[_0x5bf064(0x156)](),this[_0x5bf064(0x179)]=_0x88492a[_0x5bf064(0x179)],this[_0x5bf064(0x161)]=_0x88492a[_0x5bf064(0x161)],this['credentials']=_0x88492a;if(!this[_0x5bf064(0x161)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x5bf064(0x179)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}async[a200_0x18d68a(0x15a)](_0x140c73){const _0x2dd765=a200_0x18d68a;try{const {name:_0x3c8563}=_0x140c73,_0x44663a={'name':_0x140c73[_0x2dd765(0x167)],'is_private':_0x140c73[_0x2dd765(0x168)],..._0x140c73[_0x2dd765(0x170)]||{},'project':{'key':this[_0x2dd765(0x179)]}},_0x45f0c6=await this[_0x2dd765(0x18d)]['post'](_0x2dd765(0x162)+this['workspace']+'/'+_0x3c8563[_0x2dd765(0x176)](),_0x44663a),_0x2ecfc6=repo_class_1[_0x2dd765(0x164)][_0x2dd765(0x16b)](_0x45f0c6,this[_0x2dd765(0x14a)],this['credentials']);return _0x140c73[_0x2dd765(0x159)]&&(await git_internal_1[_0x2dd765(0x15d)][_0x2dd765(0x177)](_0x2ecfc6,_0x140c73[_0x2dd765(0x14c)]||_0x2dd765(0x152),'',this[_0x2dd765(0x17b)]),_0x2ecfc6['defaultBranch']=_0x140c73[_0x2dd765(0x14c)]||_0x2dd765(0x152)),_0x2ecfc6;}catch(_0x48145a){if(_0x48145a instanceof api_error_1[_0x2dd765(0x172)])throw _0x48145a;throw new bad_request_error_1[(_0x2dd765(0x16c))](_0x48145a);}}async[a200_0x18d68a(0x14b)](){const _0x266b3c=a200_0x18d68a;try{const _0x3732c9=[];let _0x46c97f;do{_0x46c97f=await this[_0x266b3c(0x18d)][_0x266b3c(0x163)](_0x46c97f?_0x46c97f[_0x266b3c(0x178)]:_0x266b3c(0x187)+this['workspace']),_0x3732c9[_0x266b3c(0x151)](..._0x46c97f[_0x266b3c(0x188)]);}while(_0x46c97f['next']);return _0x3732c9[_0x266b3c(0x14e)](_0x22e847=>repo_class_1[_0x266b3c(0x164)][_0x266b3c(0x16b)](_0x22e847,this[_0x266b3c(0x14a)],this[_0x266b3c(0x17b)]));}catch(_0x50c358){if(_0x50c358 instanceof api_error_1[_0x266b3c(0x172)])throw _0x50c358;throw new not_found_error_1[(_0x266b3c(0x186))](_0x50c358);}}async[a200_0x18d68a(0x154)](_0x8adb6e){const _0xfe5a43=a200_0x18d68a;try{const _0x1487c1=await this[_0xfe5a43(0x18d)][_0xfe5a43(0x163)](_0xfe5a43(0x187)+this[_0xfe5a43(0x161)]+'/'+_0x8adb6e['toLowerCase']());return repo_class_1[_0xfe5a43(0x164)][_0xfe5a43(0x16b)](_0x1487c1,this['api'],this[_0xfe5a43(0x17b)]);}catch(_0x55cac5){if(_0x55cac5 instanceof api_error_1['ApiError'])throw _0x55cac5;throw new not_found_error_1[(_0xfe5a43(0x186))](_0x55cac5);}}async['update'](_0x47dd2e,_0x5026f7){const _0x2e1d5f=a200_0x18d68a;await this['getOne'](_0x47dd2e);try{const _0x73a2ce=await this[_0x2e1d5f(0x18d)]['put'](_0x2e1d5f(0x187)+this[_0x2e1d5f(0x161)]+'/'+_0x47dd2e['toLowerCase'](),_0x5026f7);return repo_class_1[_0x2e1d5f(0x164)][_0x2e1d5f(0x16b)](_0x73a2ce,this['api'],this['credentials']);}catch(_0x5bc247){if(_0x5bc247 instanceof api_error_1[_0x2e1d5f(0x172)])throw _0x5bc247;throw new not_found_error_1[(_0x2e1d5f(0x186))](_0x5bc247);}}async[a200_0x18d68a(0x184)](_0x3b5052){const _0x30ab39=a200_0x18d68a;try{await this[_0x30ab39(0x18d)][_0x30ab39(0x184)](_0x30ab39(0x187)+this[_0x30ab39(0x161)]+'/'+_0x3b5052[_0x30ab39(0x176)]());}catch(_0x189f64){if(_0x189f64 instanceof api_error_1[_0x30ab39(0x172)])throw _0x189f64;throw new bad_request_error_1[(_0x30ab39(0x16c))](_0x189f64);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a200_0x18d68a(0x18f)])(),__param(0x1,(0x0,typedi_1[a200_0x18d68a(0x18e)])(providers_tokens_1[a200_0x18d68a(0x15c)][a200_0x18d68a(0x17b)])),__metadata(a200_0x18d68a(0x16a),[bitbucket_api_service_1[a200_0x18d68a(0x17f)],bitbucket_credentials_dto_1[a200_0x18d68a(0x17a)]])],BitbucketRepoService),exports['BitbucketRepoService']=BitbucketRepoService;