const a205_0x4cc585=a205_0x6a8c;function a205_0x6a8c(_0xd62e04,_0xcf082b){const _0xf973be=a205_0x859e();return a205_0x6a8c=function(_0x314da5,_0x498720){_0x314da5=_0x314da5-0x1a2;let _0x859ef1=_0xf973be[_0x314da5];return _0x859ef1;},a205_0x6a8c(_0xd62e04,_0xcf082b);}(function(_0x582232,_0x3066c){const _0x8fe189=a205_0x6a8c,_0xfcaa03=_0x582232();while(!![]){try{const _0x27b608=-parseInt(_0x8fe189(0x1a8))/0x1+-parseInt(_0x8fe189(0x1e0))/0x2*(-parseInt(_0x8fe189(0x1ac))/0x3)+parseInt(_0x8fe189(0x1bc))/0x4+-parseInt(_0x8fe189(0x1e5))/0x5*(-parseInt(_0x8fe189(0x1a3))/0x6)+parseInt(_0x8fe189(0x1a9))/0x7*(-parseInt(_0x8fe189(0x1c2))/0x8)+parseInt(_0x8fe189(0x1dc))/0x9+parseInt(_0x8fe189(0x1ab))/0xa*(-parseInt(_0x8fe189(0x1d0))/0xb);if(_0x27b608===_0x3066c)break;else _0xfcaa03['push'](_0xfcaa03['shift']());}catch(_0x50d857){_0xfcaa03['push'](_0xfcaa03['shift']());}}}(a205_0x859e,0xeee0f));const a205_0x498720=(function(){let _0x553712=!![];return function(_0x1b6f0c,_0x192c34){const _0xe709d2=_0x553712?function(){const _0x569cbd=a205_0x6a8c;if(_0x192c34){const _0x61edb1=_0x192c34[_0x569cbd(0x1cc)](_0x1b6f0c,arguments);return _0x192c34=null,_0x61edb1;}}:function(){};return _0x553712=![],_0xe709d2;};}()),a205_0x314da5=a205_0x498720(this,function(){const _0x4fbc07=a205_0x6a8c;return a205_0x314da5[_0x4fbc07(0x1c8)]()[_0x4fbc07(0x1d9)]('(((.+)+)+)+$')[_0x4fbc07(0x1c8)]()[_0x4fbc07(0x1d6)](a205_0x314da5)['search']('(((.+)+)+)+$');});a205_0x314da5();'use strict';function a205_0x859e(){const _0x5b818e=['__esModule','object','408PFyHlE','../../../../../core/errors/not-found.error','design:paramtypes','Inject','request','5977UWUKRz','28966AYBSOG','autoInit','365870QhVmRG','96qlJEnt','getOwnPropertyDescriptor','values','__param','delete','BadRequestError','update','api','workspace','../../../internal/git.internal','function','push','toLowerCase','post','map','createRequest','2907012MHQUkv','__metadata','defaultBranch','get','../../../../../core/errors/api.error','repositories/','1616mvstuW','next','Tokens','private','./git-repo.service','NotFoundError','toString','../repo.class','getAll','defineProperty','apply','credentials','project','length','77xItZul','../../api/bitbucket-api.service','master','../../providers.tokens','apiBody','ERR_BITBUCKET_MISSING_PROJECT','constructor','BitbucketCredentialsDto','__decorate','search','ApiError','put','3919032MYZCvm','create','/repositories/','fromBitbucket','20044pOxKnw','createEmptyBranch','getOne','Repo','BitbucketRepoService','43640hXJySB'];a205_0x859e=function(){return _0x5b818e;};return a205_0x859e();}var __decorate=this&&this[a205_0x4cc585(0x1d8)]||function(_0x2b4a85,_0x1aa0b8,_0x241323,_0x539380){const _0xb0d3f7=a205_0x4cc585;var _0x57fcd6=arguments[_0xb0d3f7(0x1cf)],_0x13da74=_0x57fcd6<0x3?_0x1aa0b8:_0x539380===null?_0x539380=Object[_0xb0d3f7(0x1ad)](_0x1aa0b8,_0x241323):_0x539380,_0x5bf04f;if(typeof Reflect===_0xb0d3f7(0x1a2)&&typeof Reflect['decorate']==='function')_0x13da74=Reflect['decorate'](_0x2b4a85,_0x1aa0b8,_0x241323,_0x539380);else{for(var _0x4473bc=_0x2b4a85[_0xb0d3f7(0x1cf)]-0x1;_0x4473bc>=0x0;_0x4473bc--)if(_0x5bf04f=_0x2b4a85[_0x4473bc])_0x13da74=(_0x57fcd6<0x3?_0x5bf04f(_0x13da74):_0x57fcd6>0x3?_0x5bf04f(_0x1aa0b8,_0x241323,_0x13da74):_0x5bf04f(_0x1aa0b8,_0x241323))||_0x13da74;}return _0x57fcd6>0x3&&_0x13da74&&Object[_0xb0d3f7(0x1cb)](_0x1aa0b8,_0x241323,_0x13da74),_0x13da74;},__metadata=this&&this[a205_0x4cc585(0x1bd)]||function(_0x39c612,_0x258e53){const _0x58f6ec=a205_0x4cc585;if(typeof Reflect===_0x58f6ec(0x1a2)&&typeof Reflect['metadata']===_0x58f6ec(0x1b6))return Reflect['metadata'](_0x39c612,_0x258e53);},__param=this&&this[a205_0x4cc585(0x1af)]||function(_0x57c806,_0x59f504){return function(_0x145a16,_0x8b319e){_0x59f504(_0x145a16,_0x8b319e,_0x57c806);};};Object[a205_0x4cc585(0x1cb)](exports,a205_0x4cc585(0x1e6),{'value':!![]}),exports[a205_0x4cc585(0x1e4)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a205_0x4cc585(0x1a4)),bitbucket_api_service_1=require(a205_0x4cc585(0x1d1)),typedi_1=require('typedi'),api_error_1=require(a205_0x4cc585(0x1c0)),git_internal_1=require(a205_0x4cc585(0x1b5)),repo_class_1=require(a205_0x4cc585(0x1c9)),git_repo_service_1=require(a205_0x4cc585(0x1c6)),bitbucket_credentials_dto_1=require('../../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a205_0x4cc585(0x1d3));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x335cf1,_0x267eb3){const _0x17d860=a205_0x4cc585;super(_0x335cf1),this[_0x17d860(0x1b3)]=_0x335cf1,this[_0x17d860(0x1a7)]=_0x335cf1[_0x17d860(0x1bb)](),this[_0x17d860(0x1ce)]=_0x267eb3[_0x17d860(0x1ce)],this[_0x17d860(0x1b4)]=_0x267eb3[_0x17d860(0x1b4)],this['credentials']=_0x267eb3;if(!this[_0x17d860(0x1b4)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x17d860(0x1ce)])throw new Error(errors_1[_0x17d860(0x1d5)]);}async[a205_0x4cc585(0x1dd)](_0x528f89){const _0x1daec2=a205_0x4cc585;try{const {name:_0x497292}=_0x528f89,_0x20561f={'name':_0x528f89['name'],'is_private':_0x528f89[_0x1daec2(0x1c5)],..._0x528f89[_0x1daec2(0x1d4)]||{},'project':{'key':this[_0x1daec2(0x1ce)]}},_0x57d166=await this['request'][_0x1daec2(0x1b9)](_0x1daec2(0x1de)+this[_0x1daec2(0x1b4)]+'/'+_0x497292[_0x1daec2(0x1b8)](),_0x20561f),_0x8325a2=repo_class_1['Repo'][_0x1daec2(0x1df)](_0x57d166,this['api'],this[_0x1daec2(0x1cd)]);return _0x528f89[_0x1daec2(0x1aa)]&&(await git_internal_1['Git'][_0x1daec2(0x1e1)](_0x8325a2,_0x528f89[_0x1daec2(0x1be)]||_0x1daec2(0x1d2),'',this[_0x1daec2(0x1cd)]),_0x8325a2[_0x1daec2(0x1be)]=_0x528f89['defaultBranch']||_0x1daec2(0x1d2)),_0x8325a2;}catch(_0x55fb6e){if(_0x55fb6e instanceof api_error_1['ApiError'])throw _0x55fb6e;throw new bad_request_error_1[(_0x1daec2(0x1b1))](_0x55fb6e);}}async[a205_0x4cc585(0x1ca)](){const _0x3dc2aa=a205_0x4cc585;try{const _0x50e05b=[];let _0x4cc1a5;do{_0x4cc1a5=await this[_0x3dc2aa(0x1a7)][_0x3dc2aa(0x1bf)](_0x4cc1a5?_0x4cc1a5[_0x3dc2aa(0x1c3)]:_0x3dc2aa(0x1c1)+this[_0x3dc2aa(0x1b4)]),_0x50e05b[_0x3dc2aa(0x1b7)](..._0x4cc1a5[_0x3dc2aa(0x1ae)]);}while(_0x4cc1a5[_0x3dc2aa(0x1c3)]);return _0x50e05b[_0x3dc2aa(0x1ba)](_0x380357=>repo_class_1[_0x3dc2aa(0x1e3)][_0x3dc2aa(0x1df)](_0x380357,this[_0x3dc2aa(0x1b3)],this[_0x3dc2aa(0x1cd)]));}catch(_0x8eebb4){if(_0x8eebb4 instanceof api_error_1[_0x3dc2aa(0x1da)])throw _0x8eebb4;throw new not_found_error_1[(_0x3dc2aa(0x1c7))](_0x8eebb4);}}async['getOne'](_0x208ecc){const _0x52eb47=a205_0x4cc585;try{const _0xb94524=await this[_0x52eb47(0x1a7)][_0x52eb47(0x1bf)](_0x52eb47(0x1c1)+this[_0x52eb47(0x1b4)]+'/'+_0x208ecc[_0x52eb47(0x1b8)]());return repo_class_1[_0x52eb47(0x1e3)][_0x52eb47(0x1df)](_0xb94524,this[_0x52eb47(0x1b3)],this[_0x52eb47(0x1cd)]);}catch(_0x1e8b62){if(_0x1e8b62 instanceof api_error_1[_0x52eb47(0x1da)])throw _0x1e8b62;throw new not_found_error_1['NotFoundError'](_0x1e8b62);}}async[a205_0x4cc585(0x1b2)](_0x57c855,_0xd9c28c){const _0x72ff45=a205_0x4cc585;await this[_0x72ff45(0x1e2)](_0x57c855);try{const _0x17a5c2=await this['request'][_0x72ff45(0x1db)](_0x72ff45(0x1c1)+this['workspace']+'/'+_0x57c855['toLowerCase'](),_0xd9c28c);return repo_class_1[_0x72ff45(0x1e3)][_0x72ff45(0x1df)](_0x17a5c2,this[_0x72ff45(0x1b3)],this[_0x72ff45(0x1cd)]);}catch(_0x58fc13){if(_0x58fc13 instanceof api_error_1[_0x72ff45(0x1da)])throw _0x58fc13;throw new not_found_error_1[(_0x72ff45(0x1c7))](_0x58fc13);}}async['delete'](_0x28e01a){const _0x36978f=a205_0x4cc585;try{await this[_0x36978f(0x1a7)][_0x36978f(0x1b0)](_0x36978f(0x1c1)+this['workspace']+'/'+_0x28e01a[_0x36978f(0x1b8)]());}catch(_0x47a2ca){if(_0x47a2ca instanceof api_error_1[_0x36978f(0x1da)])throw _0x47a2ca;throw new bad_request_error_1['BadRequestError'](_0x47a2ca);}}};BitbucketRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a205_0x4cc585(0x1a6)])(providers_tokens_1[a205_0x4cc585(0x1c4)][a205_0x4cc585(0x1cd)])),__metadata(a205_0x4cc585(0x1a5),[bitbucket_api_service_1['BitbucketApiService'],bitbucket_credentials_dto_1[a205_0x4cc585(0x1d7)]])],BitbucketRepoService),exports[a205_0x4cc585(0x1e4)]=BitbucketRepoService;