const a166_0x4c4724=a166_0x4a6b;(function(_0x4c73eb,_0x4146e3){const _0x2ca406=a166_0x4a6b,_0x5f3b7c=_0x4c73eb();while(!![]){try{const _0x5c870f=-parseInt(_0x2ca406(0xcd))/0x1+parseInt(_0x2ca406(0xaf))/0x2+-parseInt(_0x2ca406(0xb4))/0x3*(-parseInt(_0x2ca406(0xca))/0x4)+parseInt(_0x2ca406(0xc2))/0x5+-parseInt(_0x2ca406(0xbd))/0x6+parseInt(_0x2ca406(0xbe))/0x7+-parseInt(_0x2ca406(0xda))/0x8;if(_0x5c870f===_0x4146e3)break;else _0x5f3b7c['push'](_0x5f3b7c['shift']());}catch(_0x290a04){_0x5f3b7c['push'](_0x5f3b7c['shift']());}}}(a166_0x450f,0xd4501));function a166_0x450f(){const _0x490e92=['../../../../../constants/errors','../../../internal/git.internal','Tokens','__esModule','get','metadata','Inject','../../../../../core/errors/bad-request.error','getAll','GitRepoService','__decorate','function','../../../../../core/errors/api.error','delete','project','update','ERR_BITBUCKET_MISSING_PROJECT','apply','NotFoundError','22828jqGcuU','values','length','createEmptyBranch','/repositories/','3tYDwLC','search','Service','master','defaultBranch','map','create','post','ERR_BITBUCKET_MISSING_WORKSPACE','5039640QekWbI','10852947LywhGV','getOne','push','credentials','2807380KASdFC','../../api/bitbucket-api.service','Repo','../../../../../core/errors/not-found.error','object','design:paramtypes','Git','ApiError','4431692kvbEMC','decorate','apiBody','495460tSPGwg','defineProperty','./git-repo.service','toLowerCase','toString','getOwnPropertyDescriptor','workspace','private','BitbucketApiService','typedi','api','next','BadRequestError','8209608QaUPND','__metadata','__param','fromBitbucket','name','createRequest','request','autoInit','(((.+)+)+)+$','../../providers.tokens','repositories/','BitbucketRepoService'];a166_0x450f=function(){return _0x490e92;};return a166_0x450f();}const a166_0x5a28c6=(function(){let _0x40e16c=!![];return function(_0x58b2bd,_0x182873){const _0x40a989=_0x40e16c?function(){const _0x5c4229=a166_0x4a6b;if(_0x182873){const _0x2e954c=_0x182873[_0x5c4229(0xad)](_0x58b2bd,arguments);return _0x182873=null,_0x2e954c;}}:function(){};return _0x40e16c=![],_0x40a989;};}()),a166_0x3b98e7=a166_0x5a28c6(this,function(){const _0x273680=a166_0x4a6b;return a166_0x3b98e7[_0x273680(0xd1)]()[_0x273680(0xb5)](_0x273680(0x98))['toString']()['constructor'](a166_0x3b98e7)[_0x273680(0xb5)]('(((.+)+)+)+$');});function a166_0x4a6b(_0x276efe,_0x5cab58){const _0x550490=a166_0x450f();return a166_0x4a6b=function(_0x3b98e7,_0x5a28c6){_0x3b98e7=_0x3b98e7-0x91;let _0x450feb=_0x550490[_0x3b98e7];return _0x450feb;},a166_0x4a6b(_0x276efe,_0x5cab58);}a166_0x3b98e7();'use strict';var __decorate=this&&this[a166_0x4c4724(0xa6)]||function(_0x4744bd,_0x5becc8,_0x30c165,_0x395768){const _0x4849f1=a166_0x4c4724;var _0x126f9a=arguments[_0x4849f1(0xb1)],_0xf8cc4f=_0x126f9a<0x3?_0x5becc8:_0x395768===null?_0x395768=Object[_0x4849f1(0xd2)](_0x5becc8,_0x30c165):_0x395768,_0x4ff8b3;if(typeof Reflect===_0x4849f1(0xc6)&&typeof Reflect[_0x4849f1(0xcb)]==='function')_0xf8cc4f=Reflect[_0x4849f1(0xcb)](_0x4744bd,_0x5becc8,_0x30c165,_0x395768);else{for(var _0x1858de=_0x4744bd[_0x4849f1(0xb1)]-0x1;_0x1858de>=0x0;_0x1858de--)if(_0x4ff8b3=_0x4744bd[_0x1858de])_0xf8cc4f=(_0x126f9a<0x3?_0x4ff8b3(_0xf8cc4f):_0x126f9a>0x3?_0x4ff8b3(_0x5becc8,_0x30c165,_0xf8cc4f):_0x4ff8b3(_0x5becc8,_0x30c165))||_0xf8cc4f;}return _0x126f9a>0x3&&_0xf8cc4f&&Object['defineProperty'](_0x5becc8,_0x30c165,_0xf8cc4f),_0xf8cc4f;},__metadata=this&&this[a166_0x4c4724(0x91)]||function(_0x3ed114,_0x5c253a){const _0x37f17d=a166_0x4c4724;if(typeof Reflect===_0x37f17d(0xc6)&&typeof Reflect[_0x37f17d(0xa1)]===_0x37f17d(0xa7))return Reflect[_0x37f17d(0xa1)](_0x3ed114,_0x5c253a);},__param=this&&this[a166_0x4c4724(0x92)]||function(_0x20f459,_0x17d721){return function(_0x33a5d5,_0x32ebb7){_0x17d721(_0x33a5d5,_0x32ebb7,_0x20f459);};};Object[a166_0x4c4724(0xce)](exports,a166_0x4c4724(0x9f),{'value':!![]}),exports[a166_0x4c4724(0x9b)]=void 0x0;const errors_1=require(a166_0x4c4724(0x9c)),bad_request_error_1=require(a166_0x4c4724(0xa3)),not_found_error_1=require(a166_0x4c4724(0xc5)),bitbucket_api_service_1=require(a166_0x4c4724(0xc3)),typedi_1=require(a166_0x4c4724(0xd6)),api_error_1=require(a166_0x4c4724(0xa8)),git_internal_1=require(a166_0x4c4724(0x9d)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a166_0x4c4724(0xcf)),bitbucket_credentials_dto_1=require('../../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a166_0x4c4724(0x99));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a166_0x4c4724(0xa5)]{constructor(_0x1c7f90,_0x154d02){const _0x4437a5=a166_0x4c4724;super(_0x1c7f90),this[_0x4437a5(0xd7)]=_0x1c7f90,this['request']=_0x1c7f90[_0x4437a5(0x95)](),this[_0x4437a5(0xaa)]=_0x154d02[_0x4437a5(0xaa)],this[_0x4437a5(0xd3)]=_0x154d02['workspace'],this[_0x4437a5(0xc1)]=_0x154d02;if(!this[_0x4437a5(0xd3)])throw new Error(errors_1[_0x4437a5(0xbc)]);if(!this[_0x4437a5(0xaa)])throw new Error(errors_1[_0x4437a5(0xac)]);}async[a166_0x4c4724(0xba)](_0x4359ee){const _0x308663=a166_0x4c4724;try{const {name:_0x5889ca}=_0x4359ee,_0x4dea42={'name':_0x4359ee[_0x308663(0x94)],'is_private':_0x4359ee[_0x308663(0xd4)],..._0x4359ee[_0x308663(0xcc)]||{},'project':{'key':this[_0x308663(0xaa)]}},_0x11b3d5=await this[_0x308663(0x96)][_0x308663(0xbb)](_0x308663(0xb3)+this[_0x308663(0xd3)]+'/'+_0x5889ca['toLowerCase'](),_0x4dea42),_0x99a3c9=repo_class_1['Repo'][_0x308663(0x93)](_0x11b3d5,this['api'],this[_0x308663(0xc1)]);return _0x4359ee[_0x308663(0x97)]&&(await git_internal_1[_0x308663(0xc8)][_0x308663(0xb2)](_0x99a3c9,_0x4359ee['defaultBranch']||_0x308663(0xb7),'',this[_0x308663(0xc1)]),_0x99a3c9['defaultBranch']=_0x4359ee[_0x308663(0xb8)]||_0x308663(0xb7)),_0x99a3c9;}catch(_0x377b30){if(_0x377b30 instanceof api_error_1[_0x308663(0xc9)])throw _0x377b30;throw new bad_request_error_1[(_0x308663(0xd9))](_0x377b30);}}async[a166_0x4c4724(0xa4)](){const _0x2f1119=a166_0x4c4724;try{const _0x5e955c=[];let _0xcc529d;do{_0xcc529d=await this[_0x2f1119(0x96)][_0x2f1119(0xa0)](_0xcc529d?_0xcc529d[_0x2f1119(0xd8)]:_0x2f1119(0x9a)+this[_0x2f1119(0xd3)]),_0x5e955c[_0x2f1119(0xc0)](..._0xcc529d[_0x2f1119(0xb0)]);}while(_0xcc529d[_0x2f1119(0xd8)]);return _0x5e955c[_0x2f1119(0xb9)](_0x25d7b7=>repo_class_1[_0x2f1119(0xc4)]['fromBitbucket'](_0x25d7b7,this[_0x2f1119(0xd7)],this['credentials']));}catch(_0x2b5dfb){if(_0x2b5dfb instanceof api_error_1[_0x2f1119(0xc9)])throw _0x2b5dfb;throw new not_found_error_1[(_0x2f1119(0xae))](_0x2b5dfb);}}async[a166_0x4c4724(0xbf)](_0x3a2410){const _0x14080a=a166_0x4c4724;try{const _0x3cb136=await this['request']['get']('repositories/'+this[_0x14080a(0xd3)]+'/'+_0x3a2410[_0x14080a(0xd0)]());return repo_class_1[_0x14080a(0xc4)][_0x14080a(0x93)](_0x3cb136,this[_0x14080a(0xd7)],this[_0x14080a(0xc1)]);}catch(_0x21a369){if(_0x21a369 instanceof api_error_1[_0x14080a(0xc9)])throw _0x21a369;throw new not_found_error_1[(_0x14080a(0xae))](_0x21a369);}}async[a166_0x4c4724(0xab)](_0x2f0b80,_0x103a10){const _0x16a366=a166_0x4c4724;await this[_0x16a366(0xbf)](_0x2f0b80);try{const _0x8a417f=await this[_0x16a366(0x96)]['put']('repositories/'+this[_0x16a366(0xd3)]+'/'+_0x2f0b80[_0x16a366(0xd0)](),_0x103a10);return repo_class_1[_0x16a366(0xc4)][_0x16a366(0x93)](_0x8a417f,this[_0x16a366(0xd7)],this[_0x16a366(0xc1)]);}catch(_0x2ce2ba){if(_0x2ce2ba instanceof api_error_1['ApiError'])throw _0x2ce2ba;throw new not_found_error_1[(_0x16a366(0xae))](_0x2ce2ba);}}async[a166_0x4c4724(0xa9)](_0x1704cf){const _0x28c6d3=a166_0x4c4724;try{await this[_0x28c6d3(0x96)][_0x28c6d3(0xa9)](_0x28c6d3(0x9a)+this['workspace']+'/'+_0x1704cf[_0x28c6d3(0xd0)]());}catch(_0x219e15){if(_0x219e15 instanceof api_error_1[_0x28c6d3(0xc9)])throw _0x219e15;throw new bad_request_error_1[(_0x28c6d3(0xd9))](_0x219e15);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a166_0x4c4724(0xb6)])(),__param(0x1,(0x0,typedi_1[a166_0x4c4724(0xa2)])(providers_tokens_1[a166_0x4c4724(0x9e)][a166_0x4c4724(0xc1)])),__metadata(a166_0x4c4724(0xc7),[bitbucket_api_service_1[a166_0x4c4724(0xd5)],bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketRepoService),exports[a166_0x4c4724(0x9b)]=BitbucketRepoService;