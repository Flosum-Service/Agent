const a238_0x406da0=a238_0x4e16;(function(_0xbed2c2,_0x1ac4fd){const _0x92b7b=a238_0x4e16,_0x519aeb=_0xbed2c2();while(!![]){try{const _0x476cb2=-parseInt(_0x92b7b(0xd4))/0x1+-parseInt(_0x92b7b(0xc7))/0x2+-parseInt(_0x92b7b(0xd8))/0x3*(parseInt(_0x92b7b(0xc4))/0x4)+-parseInt(_0x92b7b(0xc0))/0x5+parseInt(_0x92b7b(0xc9))/0x6+-parseInt(_0x92b7b(0xe2))/0x7+parseInt(_0x92b7b(0xbe))/0x8;if(_0x476cb2===_0x1ac4fd)break;else _0x519aeb['push'](_0x519aeb['shift']());}catch(_0x29ef29){_0x519aeb['push'](_0x519aeb['shift']());}}}(a238_0x24e0,0x7c505));const a238_0x2a78b3=(function(){let _0x313370=!![];return function(_0x4c6ade,_0x4e4e86){const _0x1f9e2d=_0x313370?function(){const _0x39f6cb=a238_0x4e16;if(_0x4e4e86){const _0x312e19=_0x4e4e86[_0x39f6cb(0xca)](_0x4c6ade,arguments);return _0x4e4e86=null,_0x312e19;}}:function(){};return _0x313370=![],_0x1f9e2d;};}()),a238_0x5b8d2e=a238_0x2a78b3(this,function(){const _0x301fe9=a238_0x4e16;return a238_0x5b8d2e[_0x301fe9(0xb9)]()['search']('(((.+)+)+)+$')[_0x301fe9(0xb9)]()[_0x301fe9(0xd2)](a238_0x5b8d2e)[_0x301fe9(0xcd)](_0x301fe9(0xe0));});a238_0x5b8d2e();'use strict';var __decorate=this&&this[a238_0x406da0(0xc8)]||function(_0x31ca7a,_0x59c504,_0x217518,_0x798d7){const _0x41c540=a238_0x406da0;var _0x5a4b77=arguments['length'],_0xee8a72=_0x5a4b77<0x3?_0x59c504:_0x798d7===null?_0x798d7=Object['getOwnPropertyDescriptor'](_0x59c504,_0x217518):_0x798d7,_0x57a232;if(typeof Reflect===_0x41c540(0xc6)&&typeof Reflect[_0x41c540(0xcb)]===_0x41c540(0xde))_0xee8a72=Reflect['decorate'](_0x31ca7a,_0x59c504,_0x217518,_0x798d7);else{for(var _0x435e8b=_0x31ca7a[_0x41c540(0xf1)]-0x1;_0x435e8b>=0x0;_0x435e8b--)if(_0x57a232=_0x31ca7a[_0x435e8b])_0xee8a72=(_0x5a4b77<0x3?_0x57a232(_0xee8a72):_0x5a4b77>0x3?_0x57a232(_0x59c504,_0x217518,_0xee8a72):_0x57a232(_0x59c504,_0x217518))||_0xee8a72;}return _0x5a4b77>0x3&&_0xee8a72&&Object['defineProperty'](_0x59c504,_0x217518,_0xee8a72),_0xee8a72;},__metadata=this&&this[a238_0x406da0(0xd0)]||function(_0x1eec2f,_0x1c147e){const _0x56e904=a238_0x406da0;if(typeof Reflect===_0x56e904(0xc6)&&typeof Reflect[_0x56e904(0xd1)]===_0x56e904(0xde))return Reflect[_0x56e904(0xd1)](_0x1eec2f,_0x1c147e);},__param=this&&this['__param']||function(_0xa5a4b,_0x272e3c){return function(_0x470698,_0xdb3aec){_0x272e3c(_0x470698,_0xdb3aec,_0xa5a4b);};},BitbucketRepoService_1;Object['defineProperty'](exports,a238_0x406da0(0xf0),{'value':!![]}),exports[a238_0x406da0(0xcf)]=void 0x0;const errors_1=require(a238_0x406da0(0xda)),bad_request_error_1=require(a238_0x406da0(0xc2)),not_found_error_1=require('../../../../../core/errors/not-found.error'),bitbucket_api_service_1=require('../../api/bitbucket-api.service'),typedi_1=require(a238_0x406da0(0xdd)),api_error_1=require(a238_0x406da0(0xbf)),git_internal_1=require(a238_0x406da0(0xf6)),repo_class_1=require(a238_0x406da0(0xb7)),git_repo_service_1=require(a238_0x406da0(0xba)),bitbucket_credentials_dto_1=require(a238_0x406da0(0xdc)),providers_tokens_1=require(a238_0x406da0(0xee));function a238_0x4e16(_0xd4e6dc,_0x3137d9){const _0x47bfcb=a238_0x24e0();return a238_0x4e16=function(_0x5b8d2e,_0x2a78b3){_0x5b8d2e=_0x5b8d2e-0xb5;let _0x24e0a6=_0x47bfcb[_0x5b8d2e];return _0x24e0a6;},a238_0x4e16(_0xd4e6dc,_0x3137d9);}function a238_0x24e0(){const _0x1219c0=['Service','object','1872042uMgEyd','__decorate','2776938XfnXMj','apply','decorate','ITEMS_PER_RESPONSE','search','create','BitbucketRepoService','__metadata','metadata','constructor','repositories/','24819idmFSN','ApiError','push','master','610962UYTQvl','toLowerCase','../../../../../constants/errors','private','../../credentials/dto/bitbucket-credentials.dto','typedi','function','map','(((.+)+)+)+$','post','5817203rpvYUI','workspace','getOne','design:paramtypes','delete','Inject','\x22&pagelen=','api','next','request','BitbucketCredentialsDto','name','../../providers.tokens','GitRepoService','__esModule','length','BitbucketApiService','project','getAll','defaultBranch','../../../internal/git.internal','?q=project.key=\x22','Repo','fromBitbucket','../repo.class','NotFoundError','toString','./git-repo.service','get','credentials','values','16951320jfonpL','../../../../../core/errors/api.error','385130PRIkEk','ERR_BITBUCKET_MISSING_PROJECT','../../../../../core/errors/bad-request.error','BadRequestError','4UdDnzr'];a238_0x24e0=function(){return _0x1219c0;};return a238_0x24e0();}let BitbucketRepoService=BitbucketRepoService_1=class BitbucketRepoService extends git_repo_service_1[a238_0x406da0(0xef)]{constructor(_0x34f8f4,_0x12023f){const _0x47bc73=a238_0x406da0;super(_0x34f8f4),this[_0x47bc73(0xe9)]=_0x34f8f4,this[_0x47bc73(0xeb)]=_0x34f8f4['createRequest'](),this[_0x47bc73(0xf3)]=_0x12023f[_0x47bc73(0xf3)],this['workspace']=_0x12023f[_0x47bc73(0xe3)],this['credentials']=_0x12023f;if(!this['workspace'])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this['project'])throw new Error(errors_1[_0x47bc73(0xc1)]);}async[a238_0x406da0(0xce)](_0x5c8c67){const _0x575315=a238_0x406da0;var _0x2b4557;try{const {name:_0x2cf16d}=_0x5c8c67,_0x946ab9={'name':_0x5c8c67[_0x575315(0xed)],'is_private':_0x5c8c67[_0x575315(0xdb)],..._0x5c8c67['apiBody']||{},'project':{'key':this[_0x575315(0xf3)]}},_0x51548e=await this['request'][_0x575315(0xe1)]('/repositories/'+this[_0x575315(0xe3)]+'/'+_0x2cf16d[_0x575315(0xd9)](),_0x946ab9),_0x504753=repo_class_1[_0x575315(0xb5)]['fromBitbucket'](_0x51548e,this[_0x575315(0xe9)],this[_0x575315(0xbc)]);return _0x5c8c67['autoInit']&&(await git_internal_1['Git']['createEmptyBranch'](_0x504753,_0x5c8c67['defaultBranch']||{'name':_0x575315(0xd7)},'',this[_0x575315(0xbc)]),_0x504753['defaultBranch']=((_0x2b4557=_0x5c8c67[_0x575315(0xf5)])===null||_0x2b4557===void 0x0?void 0x0:_0x2b4557[_0x575315(0xed)])||_0x575315(0xd7)),_0x504753;}catch(_0x336aeb){if(_0x336aeb instanceof api_error_1[_0x575315(0xd5)])throw _0x336aeb;throw new bad_request_error_1[(_0x575315(0xc3))](_0x336aeb);}}async[a238_0x406da0(0xf4)](){const _0x48344c=a238_0x406da0;try{const _0x13a052=[];let _0x3379df,_0x470a8a=_0x48344c(0xd3)+this[_0x48344c(0xe3)]+_0x48344c(0xf7)+this[_0x48344c(0xf3)]+_0x48344c(0xe8)+BitbucketRepoService_1[_0x48344c(0xcc)];do{_0x3379df=await this[_0x48344c(0xeb)][_0x48344c(0xbb)](_0x470a8a),_0x470a8a=_0x3379df[_0x48344c(0xea)],_0x13a052[_0x48344c(0xd6)](..._0x3379df[_0x48344c(0xbd)]);}while(_0x470a8a);return _0x13a052[_0x48344c(0xdf)](_0x3e61ef=>repo_class_1[_0x48344c(0xb5)][_0x48344c(0xb6)](_0x3e61ef,this[_0x48344c(0xe9)],this['credentials']));}catch(_0x4c1896){if(_0x4c1896 instanceof api_error_1['ApiError'])throw _0x4c1896;throw new not_found_error_1[(_0x48344c(0xb8))](_0x4c1896);}}async[a238_0x406da0(0xe4)](_0x496b03){const _0x4378eb=a238_0x406da0;try{const _0x5d85ed=await this[_0x4378eb(0xeb)]['get'](_0x4378eb(0xd3)+this[_0x4378eb(0xe3)]+'/'+_0x496b03['toLowerCase']());return repo_class_1[_0x4378eb(0xb5)]['fromBitbucket'](_0x5d85ed,this[_0x4378eb(0xe9)],this[_0x4378eb(0xbc)]);}catch(_0x3dfa0f){if(_0x3dfa0f instanceof api_error_1['ApiError'])throw _0x3dfa0f;throw new not_found_error_1[(_0x4378eb(0xb8))](_0x3dfa0f);}}async['update'](_0x29029b,_0x4bc14d){const _0x42e23f=a238_0x406da0;await this[_0x42e23f(0xe4)](_0x29029b);try{const _0x3d62d2=await this['request']['put'](_0x42e23f(0xd3)+this[_0x42e23f(0xe3)]+'/'+_0x29029b['toLowerCase'](),_0x4bc14d);return repo_class_1[_0x42e23f(0xb5)][_0x42e23f(0xb6)](_0x3d62d2,this[_0x42e23f(0xe9)],this[_0x42e23f(0xbc)]);}catch(_0x237f7c){if(_0x237f7c instanceof api_error_1[_0x42e23f(0xd5)])throw _0x237f7c;throw new not_found_error_1[(_0x42e23f(0xb8))](_0x237f7c);}}async[a238_0x406da0(0xe6)](_0x4154d){const _0x32af28=a238_0x406da0;try{await this[_0x32af28(0xeb)][_0x32af28(0xe6)](_0x32af28(0xd3)+this[_0x32af28(0xe3)]+'/'+_0x4154d['toLowerCase']());}catch(_0x3da5bd){if(_0x3da5bd instanceof api_error_1[_0x32af28(0xd5)])throw _0x3da5bd;throw new bad_request_error_1[(_0x32af28(0xc3))](_0x3da5bd);}}};BitbucketRepoService[a238_0x406da0(0xcc)]=0x64,BitbucketRepoService=BitbucketRepoService_1=__decorate([(0x0,typedi_1[a238_0x406da0(0xc5)])(),__param(0x1,(0x0,typedi_1[a238_0x406da0(0xe7)])(providers_tokens_1['Tokens']['credentials'])),__metadata(a238_0x406da0(0xe5),[bitbucket_api_service_1[a238_0x406da0(0xf2)],bitbucket_credentials_dto_1[a238_0x406da0(0xec)]])],BitbucketRepoService),exports[a238_0x406da0(0xcf)]=BitbucketRepoService;