const a200_0x3dc74b=a200_0x45f3;(function(_0x26c998,_0x19e280){const _0xb1b79e=a200_0x45f3,_0x40c5f7=_0x26c998();while(!![]){try{const _0x142962=parseInt(_0xb1b79e(0x126))/0x1*(-parseInt(_0xb1b79e(0x15c))/0x2)+parseInt(_0xb1b79e(0x154))/0x3*(parseInt(_0xb1b79e(0x122))/0x4)+-parseInt(_0xb1b79e(0x14b))/0x5+-parseInt(_0xb1b79e(0x158))/0x6*(parseInt(_0xb1b79e(0x133))/0x7)+parseInt(_0xb1b79e(0x13f))/0x8+-parseInt(_0xb1b79e(0x137))/0x9*(-parseInt(_0xb1b79e(0x162))/0xa)+parseInt(_0xb1b79e(0x14e))/0xb*(parseInt(_0xb1b79e(0x14c))/0xc);if(_0x142962===_0x19e280)break;else _0x40c5f7['push'](_0x40c5f7['shift']());}catch(_0x1c53b5){_0x40c5f7['push'](_0x40c5f7['shift']());}}}(a200_0x4a02,0x5329c));const a200_0x258b34=(function(){let _0x400fb9=!![];return function(_0x42ac15,_0x205235){const _0x33cd1f=_0x400fb9?function(){const _0xe10e1d=a200_0x45f3;if(_0x205235){const _0x16a238=_0x205235[_0xe10e1d(0x156)](_0x42ac15,arguments);return _0x205235=null,_0x16a238;}}:function(){};return _0x400fb9=![],_0x33cd1f;};}()),a200_0x3132e2=a200_0x258b34(this,function(){const _0x286acb=a200_0x45f3;return a200_0x3132e2[_0x286acb(0x159)]()['search'](_0x286acb(0x141))[_0x286acb(0x159)]()['constructor'](a200_0x3132e2)[_0x286acb(0x152)]('(((.+)+)+)+$');});function a200_0x4a02(){const _0x2938fd=['Tokens','credentials','Git','2333725vHLtlp','9588rzUDUv','values','1826swPOCK','project','typedi','autoInit','search','apiBody','6981mvCAFn','get','apply','getOwnPropertyDescriptor','1074126uPeVDI','toString','update','__esModule','10xOXpaV','getAll','../../credentials/dto/bitbucket-credentials.dto','defaultBranch','function','createEmptyBranch','10FgbzSd','../../../../../core/errors/bad-request.error','delete','api','ERR_BITBUCKET_MISSING_WORKSPACE','Repo','GitRepoService','../../providers.tokens','../../api/bitbucket-api.service','904eXLLHk','request','private','decorate','70273srJnDs','push','../../../../../core/errors/not-found.error','toLowerCase','fromBitbucket','put','../../../../../core/errors/api.error','workspace','post','metadata','BitbucketCredentialsDto','master','Service','14UXuTVX','next','map','../repo.class','4795209PpNxPj','repositories/','defineProperty','design:paramtypes','length','NotFoundError','ApiError','create','2603608Wgnzfw','BadRequestError','(((.+)+)+)+$','createRequest','getOne','__metadata','BitbucketApiService','Inject','__decorate'];a200_0x4a02=function(){return _0x2938fd;};return a200_0x4a02();}a200_0x3132e2();function a200_0x45f3(_0x1766cb,_0xba5718){const _0x46fe69=a200_0x4a02();return a200_0x45f3=function(_0x3132e2,_0x258b34){_0x3132e2=_0x3132e2-0x120;let _0x4a027b=_0x46fe69[_0x3132e2];return _0x4a027b;},a200_0x45f3(_0x1766cb,_0xba5718);}'use strict';var __decorate=this&&this[a200_0x3dc74b(0x147)]||function(_0xfaae98,_0x22cffb,_0x43e874,_0x261955){const _0x54acee=a200_0x3dc74b;var _0x3f8c9b=arguments[_0x54acee(0x13b)],_0x168fae=_0x3f8c9b<0x3?_0x22cffb:_0x261955===null?_0x261955=Object[_0x54acee(0x157)](_0x22cffb,_0x43e874):_0x261955,_0x5966c4;if(typeof Reflect==='object'&&typeof Reflect[_0x54acee(0x125)]==='function')_0x168fae=Reflect[_0x54acee(0x125)](_0xfaae98,_0x22cffb,_0x43e874,_0x261955);else{for(var _0x7cae9b=_0xfaae98[_0x54acee(0x13b)]-0x1;_0x7cae9b>=0x0;_0x7cae9b--)if(_0x5966c4=_0xfaae98[_0x7cae9b])_0x168fae=(_0x3f8c9b<0x3?_0x5966c4(_0x168fae):_0x3f8c9b>0x3?_0x5966c4(_0x22cffb,_0x43e874,_0x168fae):_0x5966c4(_0x22cffb,_0x43e874))||_0x168fae;}return _0x3f8c9b>0x3&&_0x168fae&&Object[_0x54acee(0x139)](_0x22cffb,_0x43e874,_0x168fae),_0x168fae;},__metadata=this&&this[a200_0x3dc74b(0x144)]||function(_0x4d3a75,_0x1d11f7){const _0x18eb3c=a200_0x3dc74b;if(typeof Reflect==='object'&&typeof Reflect[_0x18eb3c(0x12f)]===_0x18eb3c(0x160))return Reflect[_0x18eb3c(0x12f)](_0x4d3a75,_0x1d11f7);},__param=this&&this['__param']||function(_0x2041d6,_0xa048d1){return function(_0x333a1f,_0x4142ed){_0xa048d1(_0x333a1f,_0x4142ed,_0x2041d6);};};Object[a200_0x3dc74b(0x139)](exports,a200_0x3dc74b(0x15b),{'value':!![]}),exports['BitbucketRepoService']=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a200_0x3dc74b(0x163)),not_found_error_1=require(a200_0x3dc74b(0x128)),bitbucket_api_service_1=require(a200_0x3dc74b(0x121)),typedi_1=require(a200_0x3dc74b(0x150)),api_error_1=require(a200_0x3dc74b(0x12c)),git_internal_1=require('../../../internal/git.internal'),repo_class_1=require(a200_0x3dc74b(0x136)),git_repo_service_1=require('./git-repo.service'),bitbucket_credentials_dto_1=require(a200_0x3dc74b(0x15e)),providers_tokens_1=require(a200_0x3dc74b(0x120));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a200_0x3dc74b(0x168)]{constructor(_0x582783,_0x955fad){const _0x124f36=a200_0x3dc74b;super(_0x582783),this[_0x124f36(0x165)]=_0x582783,this[_0x124f36(0x123)]=_0x582783[_0x124f36(0x142)](),this[_0x124f36(0x14f)]=_0x955fad['project'],this[_0x124f36(0x12d)]=_0x955fad['workspace'],this[_0x124f36(0x149)]=_0x955fad;if(!this['workspace'])throw new Error(errors_1[_0x124f36(0x166)]);if(!this[_0x124f36(0x14f)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}async[a200_0x3dc74b(0x13e)](_0x2ae3e8){const _0xa7452d=a200_0x3dc74b;try{const {name:_0x849e7e}=_0x2ae3e8,_0x563b25={'name':_0x2ae3e8['name'],'is_private':_0x2ae3e8[_0xa7452d(0x124)],..._0x2ae3e8[_0xa7452d(0x153)]||{},'project':{'key':this[_0xa7452d(0x14f)]}},_0x2e8ff9=await this['request'][_0xa7452d(0x12e)]('/repositories/'+this[_0xa7452d(0x12d)]+'/'+_0x849e7e['toLowerCase'](),_0x563b25),_0x4d0a88=repo_class_1[_0xa7452d(0x167)][_0xa7452d(0x12a)](_0x2e8ff9,this[_0xa7452d(0x165)],this[_0xa7452d(0x149)]);return _0x2ae3e8[_0xa7452d(0x151)]&&(await git_internal_1[_0xa7452d(0x14a)][_0xa7452d(0x161)](_0x4d0a88,_0x2ae3e8[_0xa7452d(0x15f)]||_0xa7452d(0x131),'',this['credentials']),_0x4d0a88['defaultBranch']=_0x2ae3e8[_0xa7452d(0x15f)]||_0xa7452d(0x131)),_0x4d0a88;}catch(_0x3122d8){if(_0x3122d8 instanceof api_error_1[_0xa7452d(0x13d)])throw _0x3122d8;throw new bad_request_error_1[(_0xa7452d(0x140))](_0x3122d8);}}async[a200_0x3dc74b(0x15d)](){const _0x39d026=a200_0x3dc74b;try{const _0xf5ac80=[];let _0x1e49ef;do{_0x1e49ef=await this[_0x39d026(0x123)][_0x39d026(0x155)](_0x1e49ef?_0x1e49ef[_0x39d026(0x134)]:_0x39d026(0x138)+this['workspace']),_0xf5ac80[_0x39d026(0x127)](..._0x1e49ef[_0x39d026(0x14d)]);}while(_0x1e49ef['next']);return _0xf5ac80[_0x39d026(0x135)](_0x1eb82e=>repo_class_1[_0x39d026(0x167)][_0x39d026(0x12a)](_0x1eb82e,this['api'],this[_0x39d026(0x149)]));}catch(_0x48599f){if(_0x48599f instanceof api_error_1[_0x39d026(0x13d)])throw _0x48599f;throw new not_found_error_1[(_0x39d026(0x13c))](_0x48599f);}}async[a200_0x3dc74b(0x143)](_0x3966a1){const _0x1dc628=a200_0x3dc74b;try{const _0x33d744=await this[_0x1dc628(0x123)][_0x1dc628(0x155)](_0x1dc628(0x138)+this[_0x1dc628(0x12d)]+'/'+_0x3966a1[_0x1dc628(0x129)]());return repo_class_1[_0x1dc628(0x167)]['fromBitbucket'](_0x33d744,this[_0x1dc628(0x165)],this['credentials']);}catch(_0x4dfdde){if(_0x4dfdde instanceof api_error_1['ApiError'])throw _0x4dfdde;throw new not_found_error_1[(_0x1dc628(0x13c))](_0x4dfdde);}}async[a200_0x3dc74b(0x15a)](_0x2ae472,_0x40f378){const _0x1741a0=a200_0x3dc74b;await this[_0x1741a0(0x143)](_0x2ae472);try{const _0x159e22=await this[_0x1741a0(0x123)][_0x1741a0(0x12b)](_0x1741a0(0x138)+this[_0x1741a0(0x12d)]+'/'+_0x2ae472['toLowerCase'](),_0x40f378);return repo_class_1[_0x1741a0(0x167)][_0x1741a0(0x12a)](_0x159e22,this[_0x1741a0(0x165)],this[_0x1741a0(0x149)]);}catch(_0x536921){if(_0x536921 instanceof api_error_1[_0x1741a0(0x13d)])throw _0x536921;throw new not_found_error_1[(_0x1741a0(0x13c))](_0x536921);}}async[a200_0x3dc74b(0x164)](_0x4ade4b){const _0x42c56d=a200_0x3dc74b;try{await this[_0x42c56d(0x123)][_0x42c56d(0x164)](_0x42c56d(0x138)+this[_0x42c56d(0x12d)]+'/'+_0x4ade4b['toLowerCase']());}catch(_0xb90586){if(_0xb90586 instanceof api_error_1[_0x42c56d(0x13d)])throw _0xb90586;throw new bad_request_error_1[(_0x42c56d(0x140))](_0xb90586);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a200_0x3dc74b(0x132)])(),__param(0x1,(0x0,typedi_1[a200_0x3dc74b(0x146)])(providers_tokens_1[a200_0x3dc74b(0x148)][a200_0x3dc74b(0x149)])),__metadata(a200_0x3dc74b(0x13a),[bitbucket_api_service_1[a200_0x3dc74b(0x145)],bitbucket_credentials_dto_1[a200_0x3dc74b(0x130)]])],BitbucketRepoService),exports['BitbucketRepoService']=BitbucketRepoService;