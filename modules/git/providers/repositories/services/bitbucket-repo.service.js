const a148_0xa6a239=a148_0x1d2c;(function(_0x124357,_0x4f3410){const _0x1942e2=a148_0x1d2c,_0x31e7db=_0x124357();while(!![]){try{const _0x116bab=parseInt(_0x1942e2(0x127))/0x1+-parseInt(_0x1942e2(0x111))/0x2*(-parseInt(_0x1942e2(0x14a))/0x3)+parseInt(_0x1942e2(0x126))/0x4+parseInt(_0x1942e2(0x13c))/0x5+-parseInt(_0x1942e2(0x125))/0x6+-parseInt(_0x1942e2(0x129))/0x7+-parseInt(_0x1942e2(0x14e))/0x8;if(_0x116bab===_0x4f3410)break;else _0x31e7db['push'](_0x31e7db['shift']());}catch(_0x2b9329){_0x31e7db['push'](_0x31e7db['shift']());}}}(a148_0x4c59,0x9b573));const a148_0x7c606b=(function(){let _0x296293=!![];return function(_0x1c0839,_0x16cd72){const _0x2f36c4=_0x296293?function(){if(_0x16cd72){const _0x3e7612=_0x16cd72['apply'](_0x1c0839,arguments);return _0x16cd72=null,_0x3e7612;}}:function(){};return _0x296293=![],_0x2f36c4;};}()),a148_0x23ac2e=a148_0x7c606b(this,function(){const _0x525f95=a148_0x1d2c;return a148_0x23ac2e[_0x525f95(0x12f)]()['search'](_0x525f95(0x12d))[_0x525f95(0x12f)]()[_0x525f95(0x123)](a148_0x23ac2e)['search'](_0x525f95(0x12d));});function a148_0x4c59(){const _0x427c8e=['../../../internal/git.internal','ERR_BITBUCKET_MISSING_WORKSPACE','ApiError','values','defaultBranch','project','/repositories/','length','private','credentials','request','3813030vpVTAD','../repo.class','Git','NotFoundError','fromBitbucket','Tokens','metadata','defineProperty','__param','getAll','get','master','createRequest','Inject','144189GfqMfx','api','next','BitbucketRepoService','11186816hkLvgL','./git-repo.service','BadRequestError','../../../../../core/errors/bad-request.error','14SjMnpd','apiBody','object','decorate','../../providers.tokens','update','../../../../../core/errors/not-found.error','workspace','GitRepoService','../../../../../core/errors/api.error','delete','create','BitbucketApiService','repositories/','toLowerCase','map','getOne','__metadata','constructor','post','4018860KQDVHW','2616188ZoAggf','1208912xgMwix','__esModule','1802983HHmSIW','name','createEmptyBranch','Repo','(((.+)+)+)+$','put','toString','push'];a148_0x4c59=function(){return _0x427c8e;};return a148_0x4c59();}a148_0x23ac2e();'use strict';var __decorate=this&&this['__decorate']||function(_0x4002e6,_0x4687e2,_0x585e69,_0x3ae995){const _0x54ce6d=a148_0x1d2c;var _0xf6739f=arguments[_0x54ce6d(0x138)],_0x7c98cb=_0xf6739f<0x3?_0x4687e2:_0x3ae995===null?_0x3ae995=Object['getOwnPropertyDescriptor'](_0x4687e2,_0x585e69):_0x3ae995,_0x18b944;if(typeof Reflect===_0x54ce6d(0x113)&&typeof Reflect[_0x54ce6d(0x114)]==='function')_0x7c98cb=Reflect[_0x54ce6d(0x114)](_0x4002e6,_0x4687e2,_0x585e69,_0x3ae995);else{for(var _0x288fd7=_0x4002e6[_0x54ce6d(0x138)]-0x1;_0x288fd7>=0x0;_0x288fd7--)if(_0x18b944=_0x4002e6[_0x288fd7])_0x7c98cb=(_0xf6739f<0x3?_0x18b944(_0x7c98cb):_0xf6739f>0x3?_0x18b944(_0x4687e2,_0x585e69,_0x7c98cb):_0x18b944(_0x4687e2,_0x585e69))||_0x7c98cb;}return _0xf6739f>0x3&&_0x7c98cb&&Object[_0x54ce6d(0x143)](_0x4687e2,_0x585e69,_0x7c98cb),_0x7c98cb;},__metadata=this&&this[a148_0xa6a239(0x122)]||function(_0x502033,_0x13dc71){const _0x40a701=a148_0xa6a239;if(typeof Reflect===_0x40a701(0x113)&&typeof Reflect['metadata']==='function')return Reflect[_0x40a701(0x142)](_0x502033,_0x13dc71);},__param=this&&this[a148_0xa6a239(0x144)]||function(_0x2ce286,_0x50e8b3){return function(_0x4b301c,_0x5dc610){_0x50e8b3(_0x4b301c,_0x5dc610,_0x2ce286);};};function a148_0x1d2c(_0x125b05,_0x105b28){const _0x1471d7=a148_0x4c59();return a148_0x1d2c=function(_0x23ac2e,_0x7c606b){_0x23ac2e=_0x23ac2e-0x10f;let _0x4c5995=_0x1471d7[_0x23ac2e];return _0x4c5995;},a148_0x1d2c(_0x125b05,_0x105b28);}Object[a148_0xa6a239(0x143)](exports,a148_0xa6a239(0x128),{'value':!![]}),exports[a148_0xa6a239(0x14d)]=void 0x0;const errors_1=require('../../../../../constants/errors'),bad_request_error_1=require(a148_0xa6a239(0x110)),not_found_error_1=require(a148_0xa6a239(0x117)),bitbucket_api_service_1=require('../../api/bitbucket-api.service'),typedi_1=require('typedi'),api_error_1=require(a148_0xa6a239(0x11a)),git_internal_1=require(a148_0xa6a239(0x131)),repo_class_1=require(a148_0xa6a239(0x13d)),git_repo_service_1=require(a148_0xa6a239(0x14f)),bitbucket_credentials_dto_1=require('../../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a148_0xa6a239(0x115));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a148_0xa6a239(0x119)]{constructor(_0x47c5b2,_0x421e16){const _0x252d84=a148_0xa6a239;super(_0x47c5b2),this[_0x252d84(0x14b)]=_0x47c5b2,this[_0x252d84(0x13b)]=_0x47c5b2[_0x252d84(0x148)](),this[_0x252d84(0x136)]=_0x421e16[_0x252d84(0x136)],this[_0x252d84(0x118)]=_0x421e16[_0x252d84(0x118)],this['credentials']=_0x421e16;if(!this[_0x252d84(0x118)])throw new Error(errors_1[_0x252d84(0x132)]);if(!this[_0x252d84(0x136)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}async[a148_0xa6a239(0x11c)](_0x3a5979){const _0x51d4f5=a148_0xa6a239;try{const {name:_0x341b01}=_0x3a5979,_0x87d043={'name':_0x3a5979[_0x51d4f5(0x12a)],'is_private':_0x3a5979[_0x51d4f5(0x139)],..._0x3a5979[_0x51d4f5(0x112)]||{},'project':{'key':this['project']}},_0x4705da=await this[_0x51d4f5(0x13b)][_0x51d4f5(0x124)](_0x51d4f5(0x137)+this['workspace']+'/'+_0x341b01[_0x51d4f5(0x11f)](),_0x87d043),_0x4271a8=repo_class_1['Repo'][_0x51d4f5(0x140)](_0x4705da,this[_0x51d4f5(0x14b)],this['credentials']);return _0x3a5979['autoInit']&&(await git_internal_1[_0x51d4f5(0x13e)][_0x51d4f5(0x12b)](_0x4271a8,_0x3a5979[_0x51d4f5(0x135)]||_0x51d4f5(0x147),'',this[_0x51d4f5(0x13a)]),_0x4271a8[_0x51d4f5(0x135)]=_0x3a5979[_0x51d4f5(0x135)]||_0x51d4f5(0x147)),_0x4271a8;}catch(_0x1a5b56){if(_0x1a5b56 instanceof api_error_1[_0x51d4f5(0x133)])throw _0x1a5b56;throw new bad_request_error_1['BadRequestError'](_0x1a5b56);}}async[a148_0xa6a239(0x145)](){const _0x119bd9=a148_0xa6a239;try{const _0x1da4bc=[];let _0x4b74d2;do{_0x4b74d2=await this[_0x119bd9(0x13b)]['get'](_0x4b74d2?_0x4b74d2[_0x119bd9(0x14c)]:_0x119bd9(0x11e)+this[_0x119bd9(0x118)]),_0x1da4bc[_0x119bd9(0x130)](..._0x4b74d2[_0x119bd9(0x134)]);}while(_0x4b74d2[_0x119bd9(0x14c)]);return _0x1da4bc[_0x119bd9(0x120)](_0x157c8e=>repo_class_1[_0x119bd9(0x12c)][_0x119bd9(0x140)](_0x157c8e,this['api'],this['credentials']));}catch(_0x3d5f68){if(_0x3d5f68 instanceof api_error_1[_0x119bd9(0x133)])throw _0x3d5f68;throw new not_found_error_1['NotFoundError'](_0x3d5f68);}}async[a148_0xa6a239(0x121)](_0x1f61bf){const _0x23d3ed=a148_0xa6a239;try{const _0x45ce75=await this[_0x23d3ed(0x13b)][_0x23d3ed(0x146)]('repositories/'+this[_0x23d3ed(0x118)]+'/'+_0x1f61bf[_0x23d3ed(0x11f)]());return repo_class_1['Repo'][_0x23d3ed(0x140)](_0x45ce75,this['api'],this[_0x23d3ed(0x13a)]);}catch(_0x29bae5){if(_0x29bae5 instanceof api_error_1[_0x23d3ed(0x133)])throw _0x29bae5;throw new not_found_error_1[(_0x23d3ed(0x13f))](_0x29bae5);}}async[a148_0xa6a239(0x116)](_0x33efba,_0x55d0a0){const _0x288114=a148_0xa6a239;await this[_0x288114(0x121)](_0x33efba);try{const _0x5a7e71=await this['request'][_0x288114(0x12e)]('repositories/'+this[_0x288114(0x118)]+'/'+_0x33efba[_0x288114(0x11f)](),_0x55d0a0);return repo_class_1[_0x288114(0x12c)][_0x288114(0x140)](_0x5a7e71,this[_0x288114(0x14b)],this[_0x288114(0x13a)]);}catch(_0x165c9e){if(_0x165c9e instanceof api_error_1[_0x288114(0x133)])throw _0x165c9e;throw new not_found_error_1[(_0x288114(0x13f))](_0x165c9e);}}async[a148_0xa6a239(0x11b)](_0xb7bc49){const _0x539230=a148_0xa6a239;try{await this[_0x539230(0x13b)][_0x539230(0x11b)](_0x539230(0x11e)+this[_0x539230(0x118)]+'/'+_0xb7bc49[_0x539230(0x11f)]());}catch(_0xae9454){if(_0xae9454 instanceof api_error_1['ApiError'])throw _0xae9454;throw new bad_request_error_1[(_0x539230(0x10f))](_0xae9454);}}};BitbucketRepoService=__decorate([typedi_1['Service'](),__param(0x1,typedi_1[a148_0xa6a239(0x149)](providers_tokens_1[a148_0xa6a239(0x141)][a148_0xa6a239(0x13a)])),__metadata('design:paramtypes',[bitbucket_api_service_1[a148_0xa6a239(0x11d)],bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketRepoService),exports[a148_0xa6a239(0x14d)]=BitbucketRepoService;