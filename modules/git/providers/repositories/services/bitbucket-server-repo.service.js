const a237_0x432127=a237_0x30d5;(function(_0x343340,_0x49e0b5){const _0x418f5=a237_0x30d5,_0xa94ef1=_0x343340();while(!![]){try{const _0x4e96f1=parseInt(_0x418f5(0x111))/0x1*(-parseInt(_0x418f5(0xdf))/0x2)+-parseInt(_0x418f5(0x11a))/0x3+-parseInt(_0x418f5(0xfc))/0x4+-parseInt(_0x418f5(0x103))/0x5+parseInt(_0x418f5(0x105))/0x6+parseInt(_0x418f5(0x10c))/0x7+parseInt(_0x418f5(0x100))/0x8*(parseInt(_0x418f5(0x101))/0x9);if(_0x4e96f1===_0x49e0b5)break;else _0xa94ef1['push'](_0xa94ef1['shift']());}catch(_0x33051f){_0xa94ef1['push'](_0xa94ef1['shift']());}}}(a237_0x3b94,0x26881));function a237_0x3b94(){const _0x22ae0b=['315574HfeoAk','../../providers.tokens','decorate','../../credentials/dto/bitbucket-server-credentials.dto','toString','3CgMFmm','GitRepoService','find','apiBody','name','credentials','api','fromBitbucketServer','apply','870006mPQmui','../../../internal/git.internal','constructor','length','../../../../../core/errors/api.error','search','getAll','getOwnPropertyDescriptor','values','/projects/','createEmptyBranch','/default-branch','ApiError','map','baseURL','Repo','__decorate','117812QmpCrR','apiUrl','getOne','typedi','Git','./git-repo.service','defineProperty','projects/','Tokens','get','__metadata','../../api/bitbucket-server-api.service','joinURL','BadRequestError','delete','defaults','../repo.class','BitbucketServerCredentialsDto','request','../../../../../core/errors/bad-request.error','Service','/repos','__param','../../../../shared/utils','NotFoundError','then','object','BitbucketServerRepoService','project','34304LQjcxJ','defaultBranch','slug','Inject','352hlgGsI','113904iBAVuZ','../../../../../core/errors/not-found.error','936740oqmsyR','(((.+)+)+)+$','1311138kGoWQL','isDefault','BitbucketServerApiService','metadata','design:paramtypes','/repos/','autoInit'];a237_0x3b94=function(){return _0x22ae0b;};return a237_0x3b94();}function a237_0x30d5(_0x5e47e4,_0x403fe0){const _0x5db874=a237_0x3b94();return a237_0x30d5=function(_0x5cdfe7,_0x57c215){_0x5cdfe7=_0x5cdfe7-0xd6;let _0x3b941a=_0x5db874[_0x5cdfe7];return _0x3b941a;},a237_0x30d5(_0x5e47e4,_0x403fe0);}const a237_0x57c215=(function(){let _0x14a289=!![];return function(_0x2b3719,_0x15a56d){const _0x2359f5=_0x14a289?function(){const _0xc2c716=a237_0x30d5;if(_0x15a56d){const _0x580aa3=_0x15a56d[_0xc2c716(0x119)](_0x2b3719,arguments);return _0x15a56d=null,_0x580aa3;}}:function(){};return _0x14a289=![],_0x2359f5;};}()),a237_0x5cdfe7=a237_0x57c215(this,function(){const _0x29a083=a237_0x30d5;return a237_0x5cdfe7[_0x29a083(0x110)]()[_0x29a083(0x11f)](_0x29a083(0x104))[_0x29a083(0x110)]()[_0x29a083(0x11c)](a237_0x5cdfe7)['search'](_0x29a083(0x104));});a237_0x5cdfe7();'use strict';var __decorate=this&&this[a237_0x432127(0xde)]||function(_0x57d6b3,_0x1dc639,_0x1f21a1,_0x1f2740){const _0x590f69=a237_0x432127;var _0x288b61=arguments['length'],_0x235171=_0x288b61<0x3?_0x1dc639:_0x1f2740===null?_0x1f2740=Object[_0x590f69(0x121)](_0x1dc639,_0x1f21a1):_0x1f2740,_0x362f7f;if(typeof Reflect===_0x590f69(0xf9)&&typeof Reflect['decorate']==='function')_0x235171=Reflect[_0x590f69(0x10e)](_0x57d6b3,_0x1dc639,_0x1f21a1,_0x1f2740);else{for(var _0x259e27=_0x57d6b3[_0x590f69(0x11d)]-0x1;_0x259e27>=0x0;_0x259e27--)if(_0x362f7f=_0x57d6b3[_0x259e27])_0x235171=(_0x288b61<0x3?_0x362f7f(_0x235171):_0x288b61>0x3?_0x362f7f(_0x1dc639,_0x1f21a1,_0x235171):_0x362f7f(_0x1dc639,_0x1f21a1))||_0x235171;}return _0x288b61>0x3&&_0x235171&&Object[_0x590f69(0xe5)](_0x1dc639,_0x1f21a1,_0x235171),_0x235171;},__metadata=this&&this[a237_0x432127(0xe9)]||function(_0x335605,_0x30db17){const _0x47922=a237_0x432127;if(typeof Reflect===_0x47922(0xf9)&&typeof Reflect[_0x47922(0x108)]==='function')return Reflect[_0x47922(0x108)](_0x335605,_0x30db17);},__param=this&&this[a237_0x432127(0xf5)]||function(_0x1439b4,_0xbfa352){return function(_0x345038,_0x3a6ce0){_0xbfa352(_0x345038,_0x3a6ce0,_0x1439b4);};};Object[a237_0x432127(0xe5)](exports,'__esModule',{'value':!![]}),exports[a237_0x432127(0xfa)]=void 0x0;const bad_request_error_1=require(a237_0x432127(0xf2)),not_found_error_1=require(a237_0x432127(0x102)),typedi_1=require(a237_0x432127(0xe2)),api_error_1=require(a237_0x432127(0x11e)),bitbucket_server_api_service_1=require(a237_0x432127(0xea)),git_internal_1=require(a237_0x432127(0x11b)),utils_1=require(a237_0x432127(0xf6)),repo_class_1=require(a237_0x432127(0xef)),git_repo_service_1=require(a237_0x432127(0xe4)),providers_tokens_1=require(a237_0x432127(0x10d)),bitbucket_server_credentials_dto_1=require(a237_0x432127(0x10f));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a237_0x432127(0x112)]{constructor(_0xa098d6,_0x5038f3){const _0x1cbaa0=a237_0x432127;super(_0xa098d6),this['api']=_0xa098d6,this[_0x1cbaa0(0xfb)]=_0x5038f3[_0x1cbaa0(0xfb)],this[_0x1cbaa0(0x116)]=_0x5038f3;}async['create'](_0x2ce53b){const _0x16bdfc=a237_0x432127;try{const _0x16dbe7={'name':_0x2ce53b['name'],'scmId':'git','defaultBranch':_0x2ce53b['defaultBranch'],..._0x2ce53b[_0x16bdfc(0x114)]||{}},_0x4b48b7=await this['request']['post'](_0x16bdfc(0xe6)+this[_0x16bdfc(0xfb)]+_0x16bdfc(0xf4),_0x16dbe7),_0x4dc161=repo_class_1[_0x16bdfc(0xdd)][_0x16bdfc(0x118)](_0x4b48b7,'',this['api'],this[_0x16bdfc(0x116)]);return _0x2ce53b[_0x16bdfc(0x10b)]&&await git_internal_1[_0x16bdfc(0xe3)][_0x16bdfc(0xd8)](_0x4dc161,_0x2ce53b[_0x16bdfc(0xfd)]||'master','',this['credentials']),this[_0x16bdfc(0xe1)](_0x4dc161[_0x16bdfc(0x115)]);}catch(_0x5cc82b){if(_0x5cc82b instanceof api_error_1[_0x16bdfc(0xda)])throw _0x5cc82b;throw new bad_request_error_1['BadRequestError'](_0x5cc82b);}}async[a237_0x432127(0x120)](){const _0x378030=a237_0x432127;try{const _0x3c51e1=[];let _0x123874;do{_0x123874=await this['request'][_0x378030(0xe8)](_0x378030(0xe6)+this[_0x378030(0xfb)]+_0x378030(0xf4),{'params':{'limit':0x64,'start':_0x123874?_0x123874['nextPageStart']:0x0}}),_0x3c51e1['push'](..._0x123874[_0x378030(0xd6)]);}while(!_0x123874['isLastPage']);return _0x3c51e1[_0x378030(0xdb)](_0x5d7947=>repo_class_1[_0x378030(0xdd)]['fromBitbucketServer'](_0x5d7947,(0x0,utils_1['joinURL'])(this[_0x378030(0xf1)][_0x378030(0xee)]['baseURL']||'',_0x378030(0xd7)+this[_0x378030(0xfb)]+_0x378030(0x10a)+_0x5d7947[_0x378030(0xfe)]),this[_0x378030(0x117)],this['credentials']));}catch(_0x9fe21f){if(_0x9fe21f instanceof api_error_1[_0x378030(0xda)])throw _0x9fe21f;throw new not_found_error_1[(_0x378030(0xf7))](_0x9fe21f);}}async[a237_0x432127(0xe1)](_0x1046bb){const _0x41d078=a237_0x432127;var _0x4e5ac4;try{const _0x347d26=await this[_0x41d078(0xf1)]['get'](_0x41d078(0xe6)+this[_0x41d078(0xfb)]+_0x41d078(0x10a)+_0x1046bb),_0x188c84=repo_class_1[_0x41d078(0xdd)][_0x41d078(0x118)](_0x347d26,(0x0,utils_1['joinURL'])(this[_0x41d078(0xf1)][_0x41d078(0xee)][_0x41d078(0xdc)]||'',_0x41d078(0xd7)+this[_0x41d078(0xfb)]+_0x41d078(0x10a)+_0x1046bb),this['api'],this[_0x41d078(0x116)]),_0x4ee9c1=await this[_0x41d078(0xf1)][_0x41d078(0xe8)](_0x188c84[_0x41d078(0xe0)]+'/branches')[_0x41d078(0xf8)](_0x4d341c=>_0x4d341c[_0x41d078(0xd6)]);return _0x188c84['defaultBranch']=(_0x4e5ac4=_0x4ee9c1[_0x41d078(0x113)](_0x5ab326=>_0x5ab326[_0x41d078(0x106)]===!![]))===null||_0x4e5ac4===void 0x0?void 0x0:_0x4e5ac4['displayId'],_0x188c84;}catch(_0xb21376){if(_0xb21376 instanceof api_error_1[_0x41d078(0xda)])throw _0xb21376;throw new not_found_error_1[(_0x41d078(0xf7))](_0xb21376);}}async['update'](_0x18b919,_0x2cda22){const _0x1941e5=a237_0x432127;try{const _0x2971cb=await this[_0x1941e5(0xf1)]['put']('projects/'+this[_0x1941e5(0xfb)]+_0x1941e5(0x10a)+_0x18b919,_0x2cda22),_0xf57011=await this[_0x1941e5(0xf1)][_0x1941e5(0xe8)](_0x1941e5(0xe6)+this['project']+_0x1941e5(0x10a)+_0x18b919+_0x1941e5(0xd9)),_0x50da91=repo_class_1[_0x1941e5(0xdd)][_0x1941e5(0x118)](_0x2971cb,(0x0,utils_1[_0x1941e5(0xeb)])(this[_0x1941e5(0xf1)][_0x1941e5(0xee)][_0x1941e5(0xdc)]||'',_0x1941e5(0xd7)+this['project']+_0x1941e5(0x10a)+_0x18b919),this[_0x1941e5(0x117)],this['credentials']);return _0x50da91[_0x1941e5(0xfd)]=_0xf57011['displayId'],_0x50da91;}catch(_0x122461){if(_0x122461 instanceof api_error_1['ApiError'])throw _0x122461;throw new not_found_error_1[(_0x1941e5(0xf7))](_0x122461);}}async[a237_0x432127(0xed)](_0x5ec10b){const _0x56d87b=a237_0x432127;try{await this[_0x56d87b(0xe1)](_0x5ec10b),await this['request'][_0x56d87b(0xed)]('projects/'+this[_0x56d87b(0xfb)]+_0x56d87b(0x10a)+_0x5ec10b);}catch(_0x4833a2){if(_0x4833a2 instanceof api_error_1[_0x56d87b(0xda)])throw _0x4833a2;throw new bad_request_error_1[(_0x56d87b(0xec))](_0x4833a2);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a237_0x432127(0xf3)])(),__param(0x1,(0x0,typedi_1[a237_0x432127(0xff)])(providers_tokens_1[a237_0x432127(0xe7)][a237_0x432127(0x116)])),__metadata(a237_0x432127(0x109),[bitbucket_server_api_service_1[a237_0x432127(0x107)],bitbucket_server_credentials_dto_1[a237_0x432127(0xf0)]])],BitbucketServerRepoService),exports[a237_0x432127(0xfa)]=BitbucketServerRepoService;