const a167_0x5ee26c=a167_0x1658;(function(_0x1d669c,_0x23514e){const _0x4d39cf=a167_0x1658,_0x2ffd4c=_0x1d669c();while(!![]){try{const _0x6312df=-parseInt(_0x4d39cf(0x11f))/0x1+parseInt(_0x4d39cf(0x134))/0x2*(-parseInt(_0x4d39cf(0x114))/0x3)+-parseInt(_0x4d39cf(0x11c))/0x4+parseInt(_0x4d39cf(0x10c))/0x5*(-parseInt(_0x4d39cf(0x12e))/0x6)+parseInt(_0x4d39cf(0x13f))/0x7+-parseInt(_0x4d39cf(0x133))/0x8+parseInt(_0x4d39cf(0x13e))/0x9;if(_0x6312df===_0x23514e)break;else _0x2ffd4c['push'](_0x2ffd4c['shift']());}catch(_0x2007ad){_0x2ffd4c['push'](_0x2ffd4c['shift']());}}}(a167_0x5969,0x9386f));const a167_0x4a6341=(function(){let _0x30e755=!![];return function(_0x544485,_0x5b39bb){const _0x589d8f=_0x30e755?function(){if(_0x5b39bb){const _0x1a44c7=_0x5b39bb['apply'](_0x544485,arguments);return _0x5b39bb=null,_0x1a44c7;}}:function(){};return _0x30e755=![],_0x589d8f;};}()),a167_0x10a168=a167_0x4a6341(this,function(){const _0x18a112=a167_0x1658;return a167_0x10a168[_0x18a112(0x102)]()[_0x18a112(0x104)]('(((.+)+)+)+$')[_0x18a112(0x102)]()[_0x18a112(0x112)](a167_0x10a168)['search'](_0x18a112(0x14d));});a167_0x10a168();'use strict';var __decorate=this&&this[a167_0x5ee26c(0x141)]||function(_0x43525b,_0x5410f7,_0x413d71,_0xdb308){const _0xa7013b=a167_0x5ee26c;var _0xac230=arguments[_0xa7013b(0x138)],_0x1b401c=_0xac230<0x3?_0x5410f7:_0xdb308===null?_0xdb308=Object['getOwnPropertyDescriptor'](_0x5410f7,_0x413d71):_0xdb308,_0x109f54;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0xa7013b(0x145))_0x1b401c=Reflect[_0xa7013b(0x120)](_0x43525b,_0x5410f7,_0x413d71,_0xdb308);else{for(var _0x32fe37=_0x43525b[_0xa7013b(0x138)]-0x1;_0x32fe37>=0x0;_0x32fe37--)if(_0x109f54=_0x43525b[_0x32fe37])_0x1b401c=(_0xac230<0x3?_0x109f54(_0x1b401c):_0xac230>0x3?_0x109f54(_0x5410f7,_0x413d71,_0x1b401c):_0x109f54(_0x5410f7,_0x413d71))||_0x1b401c;}return _0xac230>0x3&&_0x1b401c&&Object[_0xa7013b(0x144)](_0x5410f7,_0x413d71,_0x1b401c),_0x1b401c;},__metadata=this&&this['__metadata']||function(_0x5c13b6,_0x4bbd4e){const _0xf158c0=a167_0x5ee26c;if(typeof Reflect===_0xf158c0(0x12f)&&typeof Reflect[_0xf158c0(0x127)]===_0xf158c0(0x145))return Reflect['metadata'](_0x5c13b6,_0x4bbd4e);},__param=this&&this[a167_0x5ee26c(0x149)]||function(_0x4d217c,_0x1a64e1){return function(_0x14b1fe,_0x437469){_0x1a64e1(_0x14b1fe,_0x437469,_0x4d217c);};};Object['defineProperty'](exports,a167_0x5ee26c(0x122),{'value':!![]}),exports[a167_0x5ee26c(0x105)]=void 0x0;function a167_0x1658(_0x355c1e,_0x4f34f1){const _0x3760d0=a167_0x5969();return a167_0x1658=function(_0x10a168,_0x4a6341){_0x10a168=_0x10a168-0x100;let _0x59691d=_0x3760d0[_0x10a168];return _0x59691d;},a167_0x1658(_0x355c1e,_0x4f34f1);}function a167_0x5969(){const _0xcefba4=['function','post','create','get','__param','ApiError','../../../../../core/errors/bad-request.error','map','(((.+)+)+)+$','/repos/','baseURL','toString','defaults','search','BitbucketServerRepoService','projects/','/branches','/default-branch','joinURL','apiBody','../../credentials/dto/bitbucket-server-credentials.dto','10olbWAs','find','credentials','then','displayId','push','constructor','typedi','16527lcMjdV','../../api/bitbucket-server-api.service','fromBitbucketServer','request','/repos','/projects/','../../../internal/git.internal','nextPageStart','1048400wGgxUJ','getOne','defaultBranch','27452gQyrzY','decorate','Repo','__esModule','BadRequestError','Service','../../../../../core/errors/not-found.error','name','metadata','put','Tokens','delete','update','../repo.class','GitRepoService','1512948IyZYNt','object','git','isDefault','apiUrl','964440lIrbDn','182gpVkGf','design:paramtypes','project','isLastPage','length','Inject','./git-repo.service','../../../../shared/utils','NotFoundError','master','9439263UbVDsv','6798442VNJPVl','autoInit','__decorate','values','api','defineProperty'];a167_0x5969=function(){return _0xcefba4;};return a167_0x5969();}const bad_request_error_1=require(a167_0x5ee26c(0x14b)),not_found_error_1=require(a167_0x5ee26c(0x125)),typedi_1=require(a167_0x5ee26c(0x113)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a167_0x5ee26c(0x115)),git_internal_1=require(a167_0x5ee26c(0x11a)),utils_1=require(a167_0x5ee26c(0x13b)),repo_class_1=require(a167_0x5ee26c(0x12c)),git_repo_service_1=require(a167_0x5ee26c(0x13a)),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require(a167_0x5ee26c(0x10b));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a167_0x5ee26c(0x12d)]{constructor(_0x5b4c03,_0x466689){const _0x209983=a167_0x5ee26c;super(_0x5b4c03),this[_0x209983(0x143)]=_0x5b4c03,this[_0x209983(0x136)]=_0x466689[_0x209983(0x136)],this[_0x209983(0x10e)]=_0x466689;}async[a167_0x5ee26c(0x147)](_0x44f2d4){const _0x162ef6=a167_0x5ee26c;try{const _0x4b16f0={'name':_0x44f2d4[_0x162ef6(0x126)],'scmId':_0x162ef6(0x130),'defaultBranch':_0x44f2d4[_0x162ef6(0x11e)],..._0x44f2d4[_0x162ef6(0x10a)]||{}},_0x144f5c=await this[_0x162ef6(0x117)][_0x162ef6(0x146)](_0x162ef6(0x106)+this[_0x162ef6(0x136)]+_0x162ef6(0x118),_0x4b16f0),_0x14db48=repo_class_1[_0x162ef6(0x121)][_0x162ef6(0x116)](_0x144f5c,'',this[_0x162ef6(0x143)],this[_0x162ef6(0x10e)]);return _0x44f2d4[_0x162ef6(0x140)]&&await git_internal_1['Git']['createEmptyBranch'](_0x14db48,_0x44f2d4[_0x162ef6(0x11e)]||_0x162ef6(0x13d),'',this[_0x162ef6(0x10e)]),this['getOne'](_0x14db48[_0x162ef6(0x126)]);}catch(_0x138bd5){if(_0x138bd5 instanceof api_error_1[_0x162ef6(0x14a)])throw _0x138bd5;throw new bad_request_error_1[(_0x162ef6(0x123))](_0x138bd5);}}async['getAll'](){const _0x3f2a51=a167_0x5ee26c;try{const _0x5b5461=[];let _0x466d00;do{_0x466d00=await this[_0x3f2a51(0x117)]['get'](_0x3f2a51(0x106)+this[_0x3f2a51(0x136)]+_0x3f2a51(0x118),{'params':{'limit':0x64,'start':_0x466d00?_0x466d00[_0x3f2a51(0x11b)]:0x0}}),_0x5b5461[_0x3f2a51(0x111)](..._0x466d00[_0x3f2a51(0x142)]);}while(!_0x466d00[_0x3f2a51(0x137)]);return _0x5b5461[_0x3f2a51(0x14c)](_0x119742=>repo_class_1[_0x3f2a51(0x121)]['fromBitbucketServer'](_0x119742,(0x0,utils_1['joinURL'])(this['request'][_0x3f2a51(0x103)][_0x3f2a51(0x101)]||'',_0x3f2a51(0x119)+this[_0x3f2a51(0x136)]+_0x3f2a51(0x100)+_0x119742['slug']),this[_0x3f2a51(0x143)],this[_0x3f2a51(0x10e)]));}catch(_0x45086b){if(_0x45086b instanceof api_error_1[_0x3f2a51(0x14a)])throw _0x45086b;throw new not_found_error_1[(_0x3f2a51(0x13c))](_0x45086b);}}async[a167_0x5ee26c(0x11d)](_0x113f4e){const _0x2af4df=a167_0x5ee26c;var _0x5fca1e;try{const _0x4e73ef=await this[_0x2af4df(0x117)][_0x2af4df(0x148)]('projects/'+this[_0x2af4df(0x136)]+'/repos/'+_0x113f4e),_0xe8848f=repo_class_1['Repo'][_0x2af4df(0x116)](_0x4e73ef,(0x0,utils_1[_0x2af4df(0x109)])(this['request']['defaults'][_0x2af4df(0x101)]||'',_0x2af4df(0x119)+this[_0x2af4df(0x136)]+_0x2af4df(0x100)+_0x113f4e),this['api'],this[_0x2af4df(0x10e)]),_0x295fc2=await this[_0x2af4df(0x117)][_0x2af4df(0x148)](_0xe8848f[_0x2af4df(0x132)]+_0x2af4df(0x107))[_0x2af4df(0x10f)](_0x30b87e=>_0x30b87e[_0x2af4df(0x142)]);return _0xe8848f[_0x2af4df(0x11e)]=(_0x5fca1e=_0x295fc2[_0x2af4df(0x10d)](_0x205526=>_0x205526[_0x2af4df(0x131)]===!![]))===null||_0x5fca1e===void 0x0?void 0x0:_0x5fca1e[_0x2af4df(0x110)],_0xe8848f;}catch(_0xb250b6){if(_0xb250b6 instanceof api_error_1['ApiError'])throw _0xb250b6;throw new not_found_error_1[(_0x2af4df(0x13c))](_0xb250b6);}}async[a167_0x5ee26c(0x12b)](_0x32df63,_0xb8be1d){const _0x46369e=a167_0x5ee26c;try{const _0x444ee0=await this[_0x46369e(0x117)][_0x46369e(0x128)](_0x46369e(0x106)+this[_0x46369e(0x136)]+_0x46369e(0x100)+_0x32df63,_0xb8be1d),_0x4b9d6c=await this[_0x46369e(0x117)][_0x46369e(0x148)](_0x46369e(0x106)+this[_0x46369e(0x136)]+'/repos/'+_0x32df63+_0x46369e(0x108)),_0x2a8844=repo_class_1[_0x46369e(0x121)][_0x46369e(0x116)](_0x444ee0,(0x0,utils_1[_0x46369e(0x109)])(this[_0x46369e(0x117)][_0x46369e(0x103)][_0x46369e(0x101)]||'',_0x46369e(0x119)+this[_0x46369e(0x136)]+'/repos/'+_0x32df63),this[_0x46369e(0x143)],this[_0x46369e(0x10e)]);return _0x2a8844['defaultBranch']=_0x4b9d6c[_0x46369e(0x110)],_0x2a8844;}catch(_0x57e07a){if(_0x57e07a instanceof api_error_1[_0x46369e(0x14a)])throw _0x57e07a;throw new not_found_error_1[(_0x46369e(0x13c))](_0x57e07a);}}async['delete'](_0x1cd068){const _0x44208e=a167_0x5ee26c;try{await this[_0x44208e(0x11d)](_0x1cd068),await this[_0x44208e(0x117)][_0x44208e(0x12a)](_0x44208e(0x106)+this[_0x44208e(0x136)]+_0x44208e(0x100)+_0x1cd068);}catch(_0x1cc042){if(_0x1cc042 instanceof api_error_1[_0x44208e(0x14a)])throw _0x1cc042;throw new bad_request_error_1[(_0x44208e(0x123))](_0x1cc042);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a167_0x5ee26c(0x124)])(),__param(0x1,(0x0,typedi_1[a167_0x5ee26c(0x139)])(providers_tokens_1[a167_0x5ee26c(0x129)][a167_0x5ee26c(0x10e)])),__metadata(a167_0x5ee26c(0x135),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a167_0x5ee26c(0x105)]=BitbucketServerRepoService;