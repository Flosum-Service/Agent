const a238_0x5e3862=a238_0x16a0;(function(_0x95ad6a,_0xf69088){const _0x2a36bf=a238_0x16a0,_0x27b2a9=_0x95ad6a();while(!![]){try{const _0x3c4c87=parseInt(_0x2a36bf(0x1b8))/0x1*(-parseInt(_0x2a36bf(0x1bc))/0x2)+-parseInt(_0x2a36bf(0x1c3))/0x3+-parseInt(_0x2a36bf(0x1d8))/0x4+parseInt(_0x2a36bf(0x194))/0x5+-parseInt(_0x2a36bf(0x1a8))/0x6*(parseInt(_0x2a36bf(0x1cd))/0x7)+-parseInt(_0x2a36bf(0x19a))/0x8+-parseInt(_0x2a36bf(0x19e))/0x9*(-parseInt(_0x2a36bf(0x1c1))/0xa);if(_0x3c4c87===_0xf69088)break;else _0x27b2a9['push'](_0x27b2a9['shift']());}catch(_0x5ab002){_0x27b2a9['push'](_0x27b2a9['shift']());}}}(a238_0xd293,0x29573));const a238_0x1bcaa4=(function(){let _0x13cf6d=!![];return function(_0x5c5652,_0x136f09){const _0x34f250=_0x13cf6d?function(){const _0x224259=a238_0x16a0;if(_0x136f09){const _0x186539=_0x136f09[_0x224259(0x1c4)](_0x5c5652,arguments);return _0x136f09=null,_0x186539;}}:function(){};return _0x13cf6d=![],_0x34f250;};}()),a238_0x33d6b1=a238_0x1bcaa4(this,function(){const _0x1bec8f=a238_0x16a0;return a238_0x33d6b1[_0x1bec8f(0x1c6)]()[_0x1bec8f(0x1bf)]('(((.+)+)+)+$')[_0x1bec8f(0x1c6)]()[_0x1bec8f(0x1c2)](a238_0x33d6b1)['search']('(((.+)+)+)+$');});function a238_0x16a0(_0x52a9fb,_0x3d5b67){const _0x323b7e=a238_0xd293();return a238_0x16a0=function(_0x33d6b1,_0x1bcaa4){_0x33d6b1=_0x33d6b1-0x18e;let _0xd29308=_0x323b7e[_0x33d6b1];return _0xd29308;},a238_0x16a0(_0x52a9fb,_0x3d5b67);}a238_0x33d6b1();'use strict';var __decorate=this&&this['__decorate']||function(_0x3308f2,_0x20ac9a,_0x39c838,_0xea263d){const _0x509215=a238_0x16a0;var _0x51d591=arguments[_0x509215(0x1a7)],_0x5acef6=_0x51d591<0x3?_0x20ac9a:_0xea263d===null?_0xea263d=Object[_0x509215(0x1b6)](_0x20ac9a,_0x39c838):_0xea263d,_0x34fc64;if(typeof Reflect===_0x509215(0x1a5)&&typeof Reflect[_0x509215(0x18f)]===_0x509215(0x18e))_0x5acef6=Reflect[_0x509215(0x18f)](_0x3308f2,_0x20ac9a,_0x39c838,_0xea263d);else{for(var _0x12612c=_0x3308f2[_0x509215(0x1a7)]-0x1;_0x12612c>=0x0;_0x12612c--)if(_0x34fc64=_0x3308f2[_0x12612c])_0x5acef6=(_0x51d591<0x3?_0x34fc64(_0x5acef6):_0x51d591>0x3?_0x34fc64(_0x20ac9a,_0x39c838,_0x5acef6):_0x34fc64(_0x20ac9a,_0x39c838))||_0x5acef6;}return _0x51d591>0x3&&_0x5acef6&&Object['defineProperty'](_0x20ac9a,_0x39c838,_0x5acef6),_0x5acef6;},__metadata=this&&this['__metadata']||function(_0x4ade95,_0x5e51a0){const _0x517c40=a238_0x16a0;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x517c40(0x18e))return Reflect[_0x517c40(0x1d6)](_0x4ade95,_0x5e51a0);},__param=this&&this[a238_0x5e3862(0x197)]||function(_0x1ee299,_0x7dba1){return function(_0x57c76b,_0x4ed8ad){_0x7dba1(_0x57c76b,_0x4ed8ad,_0x1ee299);};};function a238_0xd293(){const _0x2670c1=['146251VorVYo','slug','post','name','/repos/','find','BadRequestError','project','defaults','metadata','getOne','313020yPVbmf','function','decorate','Inject','/projects/','/repos','./git-repo.service','112620faobge','projects/','api','__param','fromBitbucketServer','delete','2148472gvYkeg','createEmptyBranch','BitbucketServerCredentialsDto','isLastPage','36WulwSW','values','baseURL','create','map','../../../../../core/errors/bad-request.error','BitbucketServerRepoService','object','joinURL','length','6dRcoKN','nextPageStart','../../../../shared/utils','ApiError','apiBody','displayId','git','__esModule','request','/default-branch','GitRepoService','then','defaultBranch','design:paramtypes','getOwnPropertyDescriptor','../../../internal/git.internal','1902IntkrB','../../providers.tokens','typedi','/branches','34AcZSdM','NotFoundError','Service','search','isDefault','1965610dNOGbB','constructor','718188RAHLSm','apply','credentials','toString','getAll','Git','Repo','get','BitbucketServerApiService','../../api/bitbucket-server-api.service'];a238_0xd293=function(){return _0x2670c1;};return a238_0xd293();}Object['defineProperty'](exports,a238_0x5e3862(0x1af),{'value':!![]}),exports[a238_0x5e3862(0x1a4)]=void 0x0;const bad_request_error_1=require(a238_0x5e3862(0x1a3)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a238_0x5e3862(0x1ba)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a238_0x5e3862(0x1cc)),git_internal_1=require(a238_0x5e3862(0x1b7)),utils_1=require(a238_0x5e3862(0x1aa)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a238_0x5e3862(0x193)),providers_tokens_1=require(a238_0x5e3862(0x1b9)),bitbucket_server_credentials_dto_1=require('../../credentials/dto/bitbucket-server-credentials.dto');let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a238_0x5e3862(0x1b2)]{constructor(_0x3dc6a7,_0x304c4f){const _0xf321b7=a238_0x5e3862;super(_0x3dc6a7),this['api']=_0x3dc6a7,this['project']=_0x304c4f[_0xf321b7(0x1d4)],this[_0xf321b7(0x1c5)]=_0x304c4f;}async[a238_0x5e3862(0x1a1)](_0x31ba89){const _0x31ebb8=a238_0x5e3862;try{const _0x42f2d3={'name':_0x31ba89[_0x31ebb8(0x1d0)],'scmId':_0x31ebb8(0x1ae),'defaultBranch':_0x31ba89[_0x31ebb8(0x1b4)],..._0x31ba89[_0x31ebb8(0x1ac)]||{}},_0x17e346=await this[_0x31ebb8(0x1b0)][_0x31ebb8(0x1cf)](_0x31ebb8(0x195)+this[_0x31ebb8(0x1d4)]+_0x31ebb8(0x192),_0x42f2d3),_0x40cda0=repo_class_1['Repo'][_0x31ebb8(0x198)](_0x17e346,'',this[_0x31ebb8(0x196)],this['credentials']);return _0x31ba89['autoInit']&&await git_internal_1[_0x31ebb8(0x1c8)][_0x31ebb8(0x19b)](_0x40cda0,_0x31ba89[_0x31ebb8(0x1b4)]||'master','',this[_0x31ebb8(0x1c5)]),this[_0x31ebb8(0x1d7)](_0x40cda0[_0x31ebb8(0x1d0)]);}catch(_0x4854a9){if(_0x4854a9 instanceof api_error_1['ApiError'])throw _0x4854a9;throw new bad_request_error_1[(_0x31ebb8(0x1d3))](_0x4854a9);}}async[a238_0x5e3862(0x1c7)](){const _0x40a318=a238_0x5e3862;try{const _0x2bd816=[];let _0x4e714b;do{_0x4e714b=await this['request']['get'](_0x40a318(0x195)+this['project']+_0x40a318(0x192),{'params':{'limit':0x64,'start':_0x4e714b?_0x4e714b[_0x40a318(0x1a9)]:0x0}}),_0x2bd816['push'](..._0x4e714b[_0x40a318(0x19f)]);}while(!_0x4e714b[_0x40a318(0x19d)]);return _0x2bd816[_0x40a318(0x1a2)](_0x47129b=>repo_class_1[_0x40a318(0x1c9)]['fromBitbucketServer'](_0x47129b,(0x0,utils_1['joinURL'])(this[_0x40a318(0x1b0)][_0x40a318(0x1d5)][_0x40a318(0x1a0)]||'',_0x40a318(0x191)+this[_0x40a318(0x1d4)]+_0x40a318(0x1d1)+_0x47129b[_0x40a318(0x1ce)]),this[_0x40a318(0x196)],this['credentials']));}catch(_0x176da4){if(_0x176da4 instanceof api_error_1[_0x40a318(0x1ab)])throw _0x176da4;throw new not_found_error_1[(_0x40a318(0x1bd))](_0x176da4);}}async[a238_0x5e3862(0x1d7)](_0x5ae326){const _0x391836=a238_0x5e3862;var _0x517251;try{const _0x44ca82=await this[_0x391836(0x1b0)][_0x391836(0x1ca)](_0x391836(0x195)+this[_0x391836(0x1d4)]+'/repos/'+_0x5ae326),_0x27271c=repo_class_1[_0x391836(0x1c9)]['fromBitbucketServer'](_0x44ca82,(0x0,utils_1[_0x391836(0x1a6)])(this['request']['defaults'][_0x391836(0x1a0)]||'',_0x391836(0x191)+this[_0x391836(0x1d4)]+'/repos/'+_0x5ae326),this[_0x391836(0x196)],this[_0x391836(0x1c5)]),_0x37f49a=await this[_0x391836(0x1b0)][_0x391836(0x1ca)](_0x27271c['apiUrl']+_0x391836(0x1bb))[_0x391836(0x1b3)](_0xdcfb64=>_0xdcfb64[_0x391836(0x19f)]);return _0x27271c['defaultBranch']=(_0x517251=_0x37f49a[_0x391836(0x1d2)](_0x4bc4bb=>_0x4bc4bb[_0x391836(0x1c0)]===!![]))===null||_0x517251===void 0x0?void 0x0:_0x517251[_0x391836(0x1ad)],_0x27271c;}catch(_0x1b2234){if(_0x1b2234 instanceof api_error_1[_0x391836(0x1ab)])throw _0x1b2234;throw new not_found_error_1[(_0x391836(0x1bd))](_0x1b2234);}}async['update'](_0x5e0397,_0x1182d8){const _0x542811=a238_0x5e3862;try{const _0x3e85af=await this['request']['put'](_0x542811(0x195)+this['project']+_0x542811(0x1d1)+_0x5e0397,_0x1182d8),_0x233930=await this[_0x542811(0x1b0)][_0x542811(0x1ca)](_0x542811(0x195)+this[_0x542811(0x1d4)]+'/repos/'+_0x5e0397+_0x542811(0x1b1)),_0x34342d=repo_class_1[_0x542811(0x1c9)]['fromBitbucketServer'](_0x3e85af,(0x0,utils_1[_0x542811(0x1a6)])(this[_0x542811(0x1b0)]['defaults'][_0x542811(0x1a0)]||'',_0x542811(0x191)+this[_0x542811(0x1d4)]+_0x542811(0x1d1)+_0x5e0397),this[_0x542811(0x196)],this['credentials']);return _0x34342d['defaultBranch']=_0x233930[_0x542811(0x1ad)],_0x34342d;}catch(_0x2c5e43){if(_0x2c5e43 instanceof api_error_1[_0x542811(0x1ab)])throw _0x2c5e43;throw new not_found_error_1[(_0x542811(0x1bd))](_0x2c5e43);}}async[a238_0x5e3862(0x199)](_0x2717b8){const _0x574672=a238_0x5e3862;try{await this[_0x574672(0x1d7)](_0x2717b8),await this[_0x574672(0x1b0)][_0x574672(0x199)](_0x574672(0x195)+this[_0x574672(0x1d4)]+'/repos/'+_0x2717b8);}catch(_0x36f1d8){if(_0x36f1d8 instanceof api_error_1[_0x574672(0x1ab)])throw _0x36f1d8;throw new bad_request_error_1[(_0x574672(0x1d3))](_0x36f1d8);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a238_0x5e3862(0x1be)])(),__param(0x1,(0x0,typedi_1[a238_0x5e3862(0x190)])(providers_tokens_1['Tokens'][a238_0x5e3862(0x1c5)])),__metadata(a238_0x5e3862(0x1b5),[bitbucket_server_api_service_1[a238_0x5e3862(0x1cb)],bitbucket_server_credentials_dto_1[a238_0x5e3862(0x19c)]])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;