const a200_0x58f2a8=a200_0x1591;function a200_0x5a39(){const _0x526592=['../repo.class','2nEZQJH','search','../../credentials/dto/bitbucket-server-credentials.dto','createEmptyBranch','toString','project','defaults','design:paramtypes','12152602uDwsol','baseURL','Tokens','map','__metadata','projects/','Inject','../../../../shared/utils','isLastPage','then','update','name','BitbucketServerApiService','/repos/','ApiError','values','getOne','push','../../../../../core/errors/bad-request.error','Service','apply','__decorate','../../providers.tokens','git','NotFoundError','delete','nextPageStart','../../api/bitbucket-server-api.service','6730omwTEk','BadRequestError','51xEIHqw','credentials','typedi','defaultBranch','/projects/','298702ZdJbFO','__param','request','isDefault','get','api','(((.+)+)+)+$','3060YxRkSm','7069792NwATws','../../../../../core/errors/api.error','function','apiBody','18021040OajzWN','displayId','find','22iuWPqI','metadata','Repo','create','fromBitbucketServer','joinURL','10867707GSkQEA','decorate','put','399148UMCfEx'];a200_0x5a39=function(){return _0x526592;};return a200_0x5a39();}(function(_0x4135bb,_0x531dd4){const _0xc3a3b8=a200_0x1591,_0x2b0bfb=_0x4135bb();while(!![]){try{const _0x319e6c=-parseInt(_0xc3a3b8(0x1db))/0x1*(parseInt(_0xc3a3b8(0x1c1))/0x2)+parseInt(_0xc3a3b8(0x1bc))/0x3*(-parseInt(_0xc3a3b8(0x1d9))/0x4)+-parseInt(_0xc3a3b8(0x1ba))/0x5*(-parseInt(_0xc3a3b8(0x1c8))/0x6)+-parseInt(_0xc3a3b8(0x19e))/0x7+-parseInt(_0xc3a3b8(0x1c9))/0x8+parseInt(_0xc3a3b8(0x1d6))/0x9+-parseInt(_0xc3a3b8(0x1cd))/0xa*(-parseInt(_0xc3a3b8(0x1d0))/0xb);if(_0x319e6c===_0x531dd4)break;else _0x2b0bfb['push'](_0x2b0bfb['shift']());}catch(_0x4359d3){_0x2b0bfb['push'](_0x2b0bfb['shift']());}}}(a200_0x5a39,0xd7a64));function a200_0x1591(_0x15b9db,_0xc33d76){const _0x524668=a200_0x5a39();return a200_0x1591=function(_0x6576e5,_0x2f77a2){_0x6576e5=_0x6576e5-0x19d;let _0x5a39ad=_0x524668[_0x6576e5];return _0x5a39ad;},a200_0x1591(_0x15b9db,_0xc33d76);}const a200_0x2f77a2=(function(){let _0x3ee997=!![];return function(_0x572df9,_0x41c0e4){const _0x371962=_0x3ee997?function(){const _0x332240=a200_0x1591;if(_0x41c0e4){const _0xb42765=_0x41c0e4[_0x332240(0x1b2)](_0x572df9,arguments);return _0x41c0e4=null,_0xb42765;}}:function(){};return _0x3ee997=![],_0x371962;};}()),a200_0x6576e5=a200_0x2f77a2(this,function(){const _0x101d3b=a200_0x1591;return a200_0x6576e5[_0x101d3b(0x1df)]()[_0x101d3b(0x1dc)]('(((.+)+)+)+$')[_0x101d3b(0x1df)]()['constructor'](a200_0x6576e5)[_0x101d3b(0x1dc)](_0x101d3b(0x1c7));});a200_0x6576e5();'use strict';var __decorate=this&&this[a200_0x58f2a8(0x1b3)]||function(_0x101a86,_0x3a8473,_0x47190f,_0x68d063){const _0xf77fe1=a200_0x58f2a8;var _0x367ec1=arguments['length'],_0x332090=_0x367ec1<0x3?_0x3a8473:_0x68d063===null?_0x68d063=Object['getOwnPropertyDescriptor'](_0x3a8473,_0x47190f):_0x68d063,_0x5dfb8d;if(typeof Reflect==='object'&&typeof Reflect[_0xf77fe1(0x1d7)]===_0xf77fe1(0x1cb))_0x332090=Reflect['decorate'](_0x101a86,_0x3a8473,_0x47190f,_0x68d063);else{for(var _0x30a591=_0x101a86['length']-0x1;_0x30a591>=0x0;_0x30a591--)if(_0x5dfb8d=_0x101a86[_0x30a591])_0x332090=(_0x367ec1<0x3?_0x5dfb8d(_0x332090):_0x367ec1>0x3?_0x5dfb8d(_0x3a8473,_0x47190f,_0x332090):_0x5dfb8d(_0x3a8473,_0x47190f))||_0x332090;}return _0x367ec1>0x3&&_0x332090&&Object['defineProperty'](_0x3a8473,_0x47190f,_0x332090),_0x332090;},__metadata=this&&this[a200_0x58f2a8(0x1a2)]||function(_0x3b3ba4,_0x14ab18){const _0x5502a9=a200_0x58f2a8;if(typeof Reflect==='object'&&typeof Reflect[_0x5502a9(0x1d1)]===_0x5502a9(0x1cb))return Reflect[_0x5502a9(0x1d1)](_0x3b3ba4,_0x14ab18);},__param=this&&this[a200_0x58f2a8(0x1c2)]||function(_0x5702e0,_0x162dfb){return function(_0x53f8f3,_0x49944c){_0x162dfb(_0x53f8f3,_0x49944c,_0x5702e0);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a200_0x58f2a8(0x1b0)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a200_0x58f2a8(0x1be)),api_error_1=require(a200_0x58f2a8(0x1ca)),bitbucket_server_api_service_1=require(a200_0x58f2a8(0x1b9)),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a200_0x58f2a8(0x1a5)),repo_class_1=require(a200_0x58f2a8(0x1da)),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a200_0x58f2a8(0x1b4)),bitbucket_server_credentials_dto_1=require(a200_0x58f2a8(0x1dd));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0xaba987,_0x563835){const _0x50456c=a200_0x58f2a8;super(_0xaba987),this['api']=_0xaba987,this[_0x50456c(0x1e0)]=_0x563835['project'],this['credentials']=_0x563835;}async[a200_0x58f2a8(0x1d3)](_0x2bc86e){const _0x4f73d3=a200_0x58f2a8;try{const _0x1d69d7={'name':_0x2bc86e[_0x4f73d3(0x1a9)],'scmId':_0x4f73d3(0x1b5),'defaultBranch':_0x2bc86e['defaultBranch'],..._0x2bc86e[_0x4f73d3(0x1cc)]||{}},_0x1112b6=await this[_0x4f73d3(0x1c3)]['post']('projects/'+this[_0x4f73d3(0x1e0)]+'/repos',_0x1d69d7),_0x10e154=repo_class_1[_0x4f73d3(0x1d2)][_0x4f73d3(0x1d4)](_0x1112b6,'',this[_0x4f73d3(0x1c6)],this[_0x4f73d3(0x1bd)]);return _0x2bc86e['autoInit']&&await git_internal_1['Git'][_0x4f73d3(0x1de)](_0x10e154,_0x2bc86e[_0x4f73d3(0x1bf)]||'master','',this[_0x4f73d3(0x1bd)]),this['getOne'](_0x10e154[_0x4f73d3(0x1a9)]);}catch(_0x558f41){if(_0x558f41 instanceof api_error_1[_0x4f73d3(0x1ac)])throw _0x558f41;throw new bad_request_error_1[(_0x4f73d3(0x1bb))](_0x558f41);}}async['getAll'](){const _0x54551e=a200_0x58f2a8;try{const _0x508b3d=[];let _0x3247dc;do{_0x3247dc=await this[_0x54551e(0x1c3)][_0x54551e(0x1c5)]('projects/'+this['project']+'/repos',{'params':{'limit':0x64,'start':_0x3247dc?_0x3247dc[_0x54551e(0x1b8)]:0x0}}),_0x508b3d[_0x54551e(0x1af)](..._0x3247dc['values']);}while(!_0x3247dc[_0x54551e(0x1a6)]);return _0x508b3d[_0x54551e(0x1a1)](_0x34909a=>repo_class_1[_0x54551e(0x1d2)][_0x54551e(0x1d4)](_0x34909a,(0x0,utils_1[_0x54551e(0x1d5)])(this[_0x54551e(0x1c3)][_0x54551e(0x1e1)][_0x54551e(0x19f)]||'',_0x54551e(0x1c0)+this[_0x54551e(0x1e0)]+_0x54551e(0x1ab)+_0x34909a['slug']),this[_0x54551e(0x1c6)],this[_0x54551e(0x1bd)]));}catch(_0x165405){if(_0x165405 instanceof api_error_1[_0x54551e(0x1ac)])throw _0x165405;throw new not_found_error_1[(_0x54551e(0x1b6))](_0x165405);}}async[a200_0x58f2a8(0x1ae)](_0x598525){const _0x3ec3c1=a200_0x58f2a8;var _0x376a0a;try{const _0x5874a2=await this[_0x3ec3c1(0x1c3)][_0x3ec3c1(0x1c5)](_0x3ec3c1(0x1a3)+this[_0x3ec3c1(0x1e0)]+'/repos/'+_0x598525),_0x3e2cc7=repo_class_1[_0x3ec3c1(0x1d2)][_0x3ec3c1(0x1d4)](_0x5874a2,(0x0,utils_1[_0x3ec3c1(0x1d5)])(this[_0x3ec3c1(0x1c3)][_0x3ec3c1(0x1e1)][_0x3ec3c1(0x19f)]||'',_0x3ec3c1(0x1c0)+this[_0x3ec3c1(0x1e0)]+_0x3ec3c1(0x1ab)+_0x598525),this[_0x3ec3c1(0x1c6)],this['credentials']),_0x1cd1a4=await this['request'][_0x3ec3c1(0x1c5)](_0x3e2cc7['apiUrl']+'/branches')[_0x3ec3c1(0x1a7)](_0x2402f2=>_0x2402f2[_0x3ec3c1(0x1ad)]);return _0x3e2cc7['defaultBranch']=(_0x376a0a=_0x1cd1a4[_0x3ec3c1(0x1cf)](_0x99afa4=>_0x99afa4[_0x3ec3c1(0x1c4)]===!![]))===null||_0x376a0a===void 0x0?void 0x0:_0x376a0a['displayId'],_0x3e2cc7;}catch(_0x2783af){if(_0x2783af instanceof api_error_1[_0x3ec3c1(0x1ac)])throw _0x2783af;throw new not_found_error_1[(_0x3ec3c1(0x1b6))](_0x2783af);}}async[a200_0x58f2a8(0x1a8)](_0x3c83ef,_0x546137){const _0x523f7a=a200_0x58f2a8;try{const _0x1edf79=await this[_0x523f7a(0x1c3)][_0x523f7a(0x1d8)]('projects/'+this['project']+_0x523f7a(0x1ab)+_0x3c83ef,_0x546137),_0x3c273e=await this[_0x523f7a(0x1c3)][_0x523f7a(0x1c5)](_0x523f7a(0x1a3)+this[_0x523f7a(0x1e0)]+_0x523f7a(0x1ab)+_0x3c83ef+'/default-branch'),_0x131221=repo_class_1[_0x523f7a(0x1d2)][_0x523f7a(0x1d4)](_0x1edf79,(0x0,utils_1['joinURL'])(this[_0x523f7a(0x1c3)][_0x523f7a(0x1e1)]['baseURL']||'',_0x523f7a(0x1c0)+this[_0x523f7a(0x1e0)]+_0x523f7a(0x1ab)+_0x3c83ef),this[_0x523f7a(0x1c6)],this[_0x523f7a(0x1bd)]);return _0x131221[_0x523f7a(0x1bf)]=_0x3c273e[_0x523f7a(0x1ce)],_0x131221;}catch(_0x4713eb){if(_0x4713eb instanceof api_error_1[_0x523f7a(0x1ac)])throw _0x4713eb;throw new not_found_error_1['NotFoundError'](_0x4713eb);}}async[a200_0x58f2a8(0x1b7)](_0x8278e3){const _0x9172bc=a200_0x58f2a8;try{await this[_0x9172bc(0x1ae)](_0x8278e3),await this[_0x9172bc(0x1c3)][_0x9172bc(0x1b7)](_0x9172bc(0x1a3)+this[_0x9172bc(0x1e0)]+_0x9172bc(0x1ab)+_0x8278e3);}catch(_0x4e1e0c){if(_0x4e1e0c instanceof api_error_1[_0x9172bc(0x1ac)])throw _0x4e1e0c;throw new bad_request_error_1[(_0x9172bc(0x1bb))](_0x4e1e0c);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a200_0x58f2a8(0x1b1)])(),__param(0x1,(0x0,typedi_1[a200_0x58f2a8(0x1a4)])(providers_tokens_1[a200_0x58f2a8(0x1a0)]['credentials'])),__metadata(a200_0x58f2a8(0x19d),[bitbucket_server_api_service_1[a200_0x58f2a8(0x1aa)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;