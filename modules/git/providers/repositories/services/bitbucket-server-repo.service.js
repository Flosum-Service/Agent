const a167_0x5e74f0=a167_0x44f1;(function(_0x55df8e,_0x4dcd99){const _0x1bdbb3=a167_0x44f1,_0x16171e=_0x55df8e();while(!![]){try{const _0x42ab19=parseInt(_0x1bdbb3(0x1cc))/0x1*(parseInt(_0x1bdbb3(0x1b7))/0x2)+-parseInt(_0x1bdbb3(0x185))/0x3*(-parseInt(_0x1bdbb3(0x1c8))/0x4)+-parseInt(_0x1bdbb3(0x1bf))/0x5+parseInt(_0x1bdbb3(0x188))/0x6*(parseInt(_0x1bdbb3(0x1a3))/0x7)+-parseInt(_0x1bdbb3(0x1a9))/0x8*(parseInt(_0x1bdbb3(0x180))/0x9)+parseInt(_0x1bdbb3(0x1ba))/0xa*(parseInt(_0x1bdbb3(0x18e))/0xb)+-parseInt(_0x1bdbb3(0x1bb))/0xc;if(_0x42ab19===_0x4dcd99)break;else _0x16171e['push'](_0x16171e['shift']());}catch(_0x47c382){_0x16171e['push'](_0x16171e['shift']());}}}(a167_0x2d77,0xb8900));const a167_0x3c91f2=(function(){let _0x5f18c1=!![];return function(_0x4aa152,_0x5b72e2){const _0x4b6b20=_0x5f18c1?function(){const _0x262295=a167_0x44f1;if(_0x5b72e2){const _0x130e7d=_0x5b72e2[_0x262295(0x1bc)](_0x4aa152,arguments);return _0x5b72e2=null,_0x130e7d;}}:function(){};return _0x5f18c1=![],_0x4b6b20;};}()),a167_0x1d1256=a167_0x3c91f2(this,function(){const _0x169ce6=a167_0x44f1;return a167_0x1d1256[_0x169ce6(0x187)]()[_0x169ce6(0x1a5)]('(((.+)+)+)+$')[_0x169ce6(0x187)]()[_0x169ce6(0x19d)](a167_0x1d1256)[_0x169ce6(0x1a5)]('(((.+)+)+)+$');});a167_0x1d1256();'use strict';var __decorate=this&&this['__decorate']||function(_0x2dd50e,_0x56a9d2,_0x217698,_0x3ed875){const _0x147279=a167_0x44f1;var _0x306d55=arguments[_0x147279(0x19b)],_0x308b4c=_0x306d55<0x3?_0x56a9d2:_0x3ed875===null?_0x3ed875=Object[_0x147279(0x1c4)](_0x56a9d2,_0x217698):_0x3ed875,_0x41777b;if(typeof Reflect===_0x147279(0x17f)&&typeof Reflect[_0x147279(0x1c0)]===_0x147279(0x19c))_0x308b4c=Reflect[_0x147279(0x1c0)](_0x2dd50e,_0x56a9d2,_0x217698,_0x3ed875);else{for(var _0x28ad49=_0x2dd50e[_0x147279(0x19b)]-0x1;_0x28ad49>=0x0;_0x28ad49--)if(_0x41777b=_0x2dd50e[_0x28ad49])_0x308b4c=(_0x306d55<0x3?_0x41777b(_0x308b4c):_0x306d55>0x3?_0x41777b(_0x56a9d2,_0x217698,_0x308b4c):_0x41777b(_0x56a9d2,_0x217698))||_0x308b4c;}return _0x306d55>0x3&&_0x308b4c&&Object[_0x147279(0x19f)](_0x56a9d2,_0x217698,_0x308b4c),_0x308b4c;},__metadata=this&&this['__metadata']||function(_0x59f57b,_0x1ed80f){const _0x23287d=a167_0x44f1;if(typeof Reflect===_0x23287d(0x17f)&&typeof Reflect[_0x23287d(0x199)]===_0x23287d(0x19c))return Reflect[_0x23287d(0x199)](_0x59f57b,_0x1ed80f);},__param=this&&this[a167_0x5e74f0(0x1a8)]||function(_0x4e4667,_0x490034){return function(_0x15b0f6,_0x340e2c){_0x490034(_0x15b0f6,_0x340e2c,_0x4e4667);};};Object[a167_0x5e74f0(0x19f)](exports,a167_0x5e74f0(0x197),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a167_0x5e74f0(0x19a)),typedi_1=require(a167_0x5e74f0(0x1b3)),api_error_1=require(a167_0x5e74f0(0x198)),bitbucket_server_api_service_1=require(a167_0x5e74f0(0x1a4)),git_internal_1=require(a167_0x5e74f0(0x1b6)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a167_0x5e74f0(0x1ca)),git_repo_service_1=require(a167_0x5e74f0(0x1aa)),providers_tokens_1=require(a167_0x5e74f0(0x1be)),bitbucket_server_credentials_dto_1=require(a167_0x5e74f0(0x1b2));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a167_0x5e74f0(0x1cd)]{constructor(_0x237a85,_0x254dd5){const _0x122556=a167_0x5e74f0;super(_0x237a85),this[_0x122556(0x1b1)]=_0x237a85,this[_0x122556(0x18b)]=_0x254dd5['project'],this['credentials']=_0x254dd5;}async[a167_0x5e74f0(0x1c6)](_0x554401){const _0x4c59cf=a167_0x5e74f0;try{const _0x2fecc4={'name':_0x554401[_0x4c59cf(0x17e)],'scmId':'git','defaultBranch':_0x554401['defaultBranch'],..._0x554401[_0x4c59cf(0x1c2)]||{}},_0x5b1ac0=await this[_0x4c59cf(0x184)][_0x4c59cf(0x1ab)](_0x4c59cf(0x194)+this['project']+'/repos',_0x2fecc4),_0x4edfa2=repo_class_1[_0x4c59cf(0x193)][_0x4c59cf(0x18f)](_0x5b1ac0,'',this[_0x4c59cf(0x1b1)],this[_0x4c59cf(0x1c9)]);return _0x554401[_0x4c59cf(0x1b0)]&&await git_internal_1['Git'][_0x4c59cf(0x183)](_0x4edfa2,_0x554401['defaultBranch']||_0x4c59cf(0x1c1),'',this[_0x4c59cf(0x1c9)]),this[_0x4c59cf(0x18c)](_0x4edfa2[_0x4c59cf(0x17e)]);}catch(_0x2bbcb4){if(_0x2bbcb4 instanceof api_error_1['ApiError'])throw _0x2bbcb4;throw new bad_request_error_1[(_0x4c59cf(0x186))](_0x2bbcb4);}}async[a167_0x5e74f0(0x1a7)](){const _0x442ef4=a167_0x5e74f0;try{const _0x4978b6=[];let _0x17dac7;do{_0x17dac7=await this[_0x442ef4(0x184)][_0x442ef4(0x195)](_0x442ef4(0x194)+this['project']+_0x442ef4(0x182),{'params':{'limit':0x64,'start':_0x17dac7?_0x17dac7[_0x442ef4(0x181)]:0x0}}),_0x4978b6['push'](..._0x17dac7[_0x442ef4(0x1a2)]);}while(!_0x17dac7[_0x442ef4(0x18a)]);return _0x4978b6[_0x442ef4(0x189)](_0x1c9788=>repo_class_1['Repo'][_0x442ef4(0x18f)](_0x1c9788,(0x0,utils_1[_0x442ef4(0x1ae)])(this['request'][_0x442ef4(0x196)][_0x442ef4(0x1c3)]||'',_0x442ef4(0x1b4)+this['project']+_0x442ef4(0x190)+_0x1c9788[_0x442ef4(0x1cb)]),this[_0x442ef4(0x1b1)],this['credentials']));}catch(_0x3c0ee0){if(_0x3c0ee0 instanceof api_error_1[_0x442ef4(0x1c5)])throw _0x3c0ee0;throw new not_found_error_1[(_0x442ef4(0x19e))](_0x3c0ee0);}}async[a167_0x5e74f0(0x18c)](_0x1e96a1){const _0x34be51=a167_0x5e74f0;var _0x2a1062;try{const _0x2d5650=await this[_0x34be51(0x184)][_0x34be51(0x195)](_0x34be51(0x194)+this[_0x34be51(0x18b)]+'/repos/'+_0x1e96a1),_0x2df3bc=repo_class_1[_0x34be51(0x193)][_0x34be51(0x18f)](_0x2d5650,(0x0,utils_1['joinURL'])(this[_0x34be51(0x184)][_0x34be51(0x196)][_0x34be51(0x1c3)]||'',_0x34be51(0x1b4)+this['project']+_0x34be51(0x190)+_0x1e96a1),this[_0x34be51(0x1b1)],this['credentials']),_0x19cff8=await this[_0x34be51(0x184)][_0x34be51(0x195)](_0x2df3bc['apiUrl']+_0x34be51(0x1ad))[_0x34be51(0x18d)](_0x52a46a=>_0x52a46a['values']);return _0x2df3bc[_0x34be51(0x192)]=(_0x2a1062=_0x19cff8['find'](_0x3f55e1=>_0x3f55e1[_0x34be51(0x1bd)]===!![]))===null||_0x2a1062===void 0x0?void 0x0:_0x2a1062[_0x34be51(0x1ac)],_0x2df3bc;}catch(_0x3dcce3){if(_0x3dcce3 instanceof api_error_1[_0x34be51(0x1c5)])throw _0x3dcce3;throw new not_found_error_1[(_0x34be51(0x19e))](_0x3dcce3);}}async[a167_0x5e74f0(0x1b9)](_0x2dd694,_0x375c4a){const _0x42b33f=a167_0x5e74f0;try{const _0x2deae1=await this[_0x42b33f(0x184)]['put'](_0x42b33f(0x194)+this[_0x42b33f(0x18b)]+_0x42b33f(0x190)+_0x2dd694,_0x375c4a),_0x303e8e=await this['request'][_0x42b33f(0x195)](_0x42b33f(0x194)+this[_0x42b33f(0x18b)]+_0x42b33f(0x190)+_0x2dd694+_0x42b33f(0x1af)),_0x128294=repo_class_1[_0x42b33f(0x193)][_0x42b33f(0x18f)](_0x2deae1,(0x0,utils_1[_0x42b33f(0x1ae)])(this[_0x42b33f(0x184)][_0x42b33f(0x196)][_0x42b33f(0x1c3)]||'','/projects/'+this[_0x42b33f(0x18b)]+'/repos/'+_0x2dd694),this[_0x42b33f(0x1b1)],this[_0x42b33f(0x1c9)]);return _0x128294['defaultBranch']=_0x303e8e[_0x42b33f(0x1ac)],_0x128294;}catch(_0x5cb214){if(_0x5cb214 instanceof api_error_1[_0x42b33f(0x1c5)])throw _0x5cb214;throw new not_found_error_1[(_0x42b33f(0x19e))](_0x5cb214);}}async[a167_0x5e74f0(0x1c7)](_0x2c3774){const _0x126c0b=a167_0x5e74f0;try{await this[_0x126c0b(0x18c)](_0x2c3774),await this['request'][_0x126c0b(0x1c7)]('projects/'+this['project']+'/repos/'+_0x2c3774);}catch(_0x3fd35e){if(_0x3fd35e instanceof api_error_1[_0x126c0b(0x1c5)])throw _0x3fd35e;throw new bad_request_error_1[(_0x126c0b(0x186))](_0x3fd35e);}}};function a167_0x44f1(_0x59fe93,_0x36ddce){const _0x39a752=a167_0x2d77();return a167_0x44f1=function(_0x1d1256,_0x3c91f2){_0x1d1256=_0x1d1256-0x17e;let _0x2d77df=_0x39a752[_0x1d1256];return _0x2d77df;},a167_0x44f1(_0x59fe93,_0x36ddce);}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a167_0x5e74f0(0x1ce)])(),__param(0x1,(0x0,typedi_1[a167_0x5e74f0(0x1a1)])(providers_tokens_1[a167_0x5e74f0(0x1a0)][a167_0x5e74f0(0x1c9)])),__metadata(a167_0x5e74f0(0x191),[bitbucket_server_api_service_1[a167_0x5e74f0(0x1a6)],bitbucket_server_credentials_dto_1[a167_0x5e74f0(0x1b8)]])],BitbucketServerRepoService),exports[a167_0x5e74f0(0x1b5)]=BitbucketServerRepoService;function a167_0x2d77(){const _0x42f6d7=['master','apiBody','baseURL','getOwnPropertyDescriptor','ApiError','create','delete','8HpWBEC','credentials','../repo.class','slug','917THtJFH','GitRepoService','Service','name','object','3134907pdHqzr','nextPageStart','/repos','createEmptyBranch','request','1910313GJPVDF','BadRequestError','toString','6DWcbsg','map','isLastPage','project','getOne','then','2486tIzPjV','fromBitbucketServer','/repos/','design:paramtypes','defaultBranch','Repo','projects/','get','defaults','__esModule','../../../../../core/errors/api.error','metadata','../../../../../core/errors/not-found.error','length','function','constructor','NotFoundError','defineProperty','Tokens','Inject','values','4731461AflKqS','../../api/bitbucket-server-api.service','search','BitbucketServerApiService','getAll','__param','8aGljbY','./git-repo.service','post','displayId','/branches','joinURL','/default-branch','autoInit','api','../../credentials/dto/bitbucket-server-credentials.dto','typedi','/projects/','BitbucketServerRepoService','../../../internal/git.internal','890HUNstX','BitbucketServerCredentialsDto','update','43330DRNQIm','21280008lfXfkT','apply','isDefault','../../providers.tokens','2295815gMBLBx','decorate'];a167_0x2d77=function(){return _0x42f6d7;};return a167_0x2d77();}