const a227_0xf4a040=a227_0x5af0;function a227_0x5af0(_0x11f606,_0x18bbb3){const _0x1fe226=a227_0x9660();return a227_0x5af0=function(_0x56d768,_0x11712c){_0x56d768=_0x56d768-0x7c;let _0x966081=_0x1fe226[_0x56d768];return _0x966081;},a227_0x5af0(_0x11f606,_0x18bbb3);}(function(_0x51d553,_0x32e30c){const _0x351de5=a227_0x5af0,_0x2539d4=_0x51d553();while(!![]){try{const _0x1025e4=-parseInt(_0x351de5(0xaf))/0x1+-parseInt(_0x351de5(0xca))/0x2+-parseInt(_0x351de5(0x98))/0x3+-parseInt(_0x351de5(0xad))/0x4+-parseInt(_0x351de5(0xc5))/0x5+-parseInt(_0x351de5(0xc2))/0x6+-parseInt(_0x351de5(0x91))/0x7*(-parseInt(_0x351de5(0x83))/0x8);if(_0x1025e4===_0x32e30c)break;else _0x2539d4['push'](_0x2539d4['shift']());}catch(_0x153135){_0x2539d4['push'](_0x2539d4['shift']());}}}(a227_0x9660,0x390e7));const a227_0x11712c=(function(){let _0x2f2272=!![];return function(_0x46dc72,_0x10b5dc){const _0x441697=_0x2f2272?function(){if(_0x10b5dc){const _0x3d6675=_0x10b5dc['apply'](_0x46dc72,arguments);return _0x10b5dc=null,_0x3d6675;}}:function(){};return _0x2f2272=![],_0x441697;};}()),a227_0x56d768=a227_0x11712c(this,function(){const _0x169c03=a227_0x5af0;return a227_0x56d768[_0x169c03(0x95)]()[_0x169c03(0xa5)](_0x169c03(0x7e))['toString']()[_0x169c03(0xb8)](a227_0x56d768)['search'](_0x169c03(0x7e));});a227_0x56d768();function a227_0x9660(){const _0x41bb36=['2019475DKQlDK','../../../internal/git.internal','project','/repos/','../../../../shared/utils','756414cMrXGV','../../credentials/dto/bitbucket-server-credentials.dto','../../../../../core/errors/bad-request.error','(((.+)+)+)+$','GitRepoService','typedi','/projects/','baseURL','6707032NGMYqV','defaultBranch','getOne','name','decorate','metadata','./git-repo.service','design:paramtypes','getOwnPropertyDescriptor','Service','values','put','update','/default-branch','21BchLBF','delete','/repos','Tokens','toString','git','defaults','1165371JLaUTK','isDefault','BadRequestError','post','get','BitbucketServerApiService','Git','object','/branches','BitbucketServerRepoService','ApiError','push','request','search','fromBitbucketServer','../../../../../core/errors/api.error','api','credentials','../../api/bitbucket-server-api.service','autoInit','NotFoundError','1371340TpvGUH','Inject','400103SOEANI','__metadata','apiUrl','length','../../providers.tokens','joinURL','defineProperty','then','__decorate','constructor','master','projects/','nextPageStart','Repo','../repo.class','map','__esModule','isLastPage','__param','2207622XTkfrV','find','function'];a227_0x9660=function(){return _0x41bb36;};return a227_0x9660();}'use strict';var __decorate=this&&this[a227_0xf4a040(0xb7)]||function(_0x3a5be6,_0x38fa82,_0x11f966,_0x551ec1){const _0x5d3d72=a227_0xf4a040;var _0x59ea51=arguments['length'],_0x310c19=_0x59ea51<0x3?_0x38fa82:_0x551ec1===null?_0x551ec1=Object[_0x5d3d72(0x8b)](_0x38fa82,_0x11f966):_0x551ec1,_0x342ddd;if(typeof Reflect===_0x5d3d72(0x9f)&&typeof Reflect[_0x5d3d72(0x87)]===_0x5d3d72(0xc4))_0x310c19=Reflect[_0x5d3d72(0x87)](_0x3a5be6,_0x38fa82,_0x11f966,_0x551ec1);else{for(var _0x5c39fd=_0x3a5be6[_0x5d3d72(0xb2)]-0x1;_0x5c39fd>=0x0;_0x5c39fd--)if(_0x342ddd=_0x3a5be6[_0x5c39fd])_0x310c19=(_0x59ea51<0x3?_0x342ddd(_0x310c19):_0x59ea51>0x3?_0x342ddd(_0x38fa82,_0x11f966,_0x310c19):_0x342ddd(_0x38fa82,_0x11f966))||_0x310c19;}return _0x59ea51>0x3&&_0x310c19&&Object[_0x5d3d72(0xb5)](_0x38fa82,_0x11f966,_0x310c19),_0x310c19;},__metadata=this&&this[a227_0xf4a040(0xb0)]||function(_0x38b8e1,_0x54c245){const _0x548c50=a227_0xf4a040;if(typeof Reflect===_0x548c50(0x9f)&&typeof Reflect[_0x548c50(0x88)]===_0x548c50(0xc4))return Reflect['metadata'](_0x38b8e1,_0x54c245);},__param=this&&this[a227_0xf4a040(0xc1)]||function(_0x1b23ce,_0x5307a3){return function(_0xd3927,_0x1e9811){_0x5307a3(_0xd3927,_0x1e9811,_0x1b23ce);};};Object[a227_0xf4a040(0xb5)](exports,a227_0xf4a040(0xbf),{'value':!![]}),exports[a227_0xf4a040(0xa1)]=void 0x0;const bad_request_error_1=require(a227_0xf4a040(0x7d)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a227_0xf4a040(0x80)),api_error_1=require(a227_0xf4a040(0xa7)),bitbucket_server_api_service_1=require(a227_0xf4a040(0xaa)),git_internal_1=require(a227_0xf4a040(0xc6)),utils_1=require(a227_0xf4a040(0xc9)),repo_class_1=require(a227_0xf4a040(0xbd)),git_repo_service_1=require(a227_0xf4a040(0x89)),providers_tokens_1=require(a227_0xf4a040(0xb3)),bitbucket_server_credentials_dto_1=require(a227_0xf4a040(0x7c));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a227_0xf4a040(0x7f)]{constructor(_0x1c1a4d,_0x3f2018){const _0x14e411=a227_0xf4a040;super(_0x1c1a4d),this[_0x14e411(0xa8)]=_0x1c1a4d,this[_0x14e411(0xc7)]=_0x3f2018[_0x14e411(0xc7)],this[_0x14e411(0xa9)]=_0x3f2018;}async['create'](_0x118760){const _0x1d8700=a227_0xf4a040;try{const _0x5506d9={'name':_0x118760[_0x1d8700(0x86)],'scmId':_0x1d8700(0x96),'defaultBranch':_0x118760[_0x1d8700(0x84)],..._0x118760['apiBody']||{}},_0x59d912=await this[_0x1d8700(0xa4)][_0x1d8700(0x9b)]('projects/'+this[_0x1d8700(0xc7)]+'/repos',_0x5506d9),_0x3c7475=repo_class_1[_0x1d8700(0xbc)][_0x1d8700(0xa6)](_0x59d912,'',this[_0x1d8700(0xa8)],this['credentials']);return _0x118760[_0x1d8700(0xab)]&&await git_internal_1[_0x1d8700(0x9e)]['createEmptyBranch'](_0x3c7475,_0x118760[_0x1d8700(0x84)]||_0x1d8700(0xb9),'',this[_0x1d8700(0xa9)]),this[_0x1d8700(0x85)](_0x3c7475['name']);}catch(_0x4da896){if(_0x4da896 instanceof api_error_1[_0x1d8700(0xa2)])throw _0x4da896;throw new bad_request_error_1[(_0x1d8700(0x9a))](_0x4da896);}}async['getAll'](){const _0x302d9a=a227_0xf4a040;try{const _0x1dc2cf=[];let _0x4bca9e;do{_0x4bca9e=await this['request']['get']('projects/'+this['project']+_0x302d9a(0x93),{'params':{'limit':0x64,'start':_0x4bca9e?_0x4bca9e[_0x302d9a(0xbb)]:0x0}}),_0x1dc2cf[_0x302d9a(0xa3)](..._0x4bca9e['values']);}while(!_0x4bca9e[_0x302d9a(0xc0)]);return _0x1dc2cf[_0x302d9a(0xbe)](_0x4ca136=>repo_class_1[_0x302d9a(0xbc)]['fromBitbucketServer'](_0x4ca136,(0x0,utils_1['joinURL'])(this[_0x302d9a(0xa4)][_0x302d9a(0x97)][_0x302d9a(0x82)]||'',_0x302d9a(0x81)+this[_0x302d9a(0xc7)]+_0x302d9a(0xc8)+_0x4ca136['slug']),this[_0x302d9a(0xa8)],this[_0x302d9a(0xa9)]));}catch(_0x277758){if(_0x277758 instanceof api_error_1[_0x302d9a(0xa2)])throw _0x277758;throw new not_found_error_1['NotFoundError'](_0x277758);}}async[a227_0xf4a040(0x85)](_0xf25ab8){const _0x2539af=a227_0xf4a040;var _0x14ef5b;try{const _0x1440d0=await this['request'][_0x2539af(0x9c)](_0x2539af(0xba)+this[_0x2539af(0xc7)]+_0x2539af(0xc8)+_0xf25ab8),_0x35d5c5=repo_class_1[_0x2539af(0xbc)][_0x2539af(0xa6)](_0x1440d0,(0x0,utils_1[_0x2539af(0xb4)])(this[_0x2539af(0xa4)][_0x2539af(0x97)]['baseURL']||'',_0x2539af(0x81)+this[_0x2539af(0xc7)]+'/repos/'+_0xf25ab8),this[_0x2539af(0xa8)],this['credentials']),_0x159ae9=await this[_0x2539af(0xa4)]['get'](_0x35d5c5[_0x2539af(0xb1)]+_0x2539af(0xa0))[_0x2539af(0xb6)](_0x3d429c=>_0x3d429c[_0x2539af(0x8d)]);return _0x35d5c5['defaultBranch']=(_0x14ef5b=_0x159ae9[_0x2539af(0xc3)](_0xd0f97e=>_0xd0f97e[_0x2539af(0x99)]===!![]))===null||_0x14ef5b===void 0x0?void 0x0:_0x14ef5b['displayId'],_0x35d5c5;}catch(_0x266ac8){if(_0x266ac8 instanceof api_error_1['ApiError'])throw _0x266ac8;throw new not_found_error_1[(_0x2539af(0xac))](_0x266ac8);}}async[a227_0xf4a040(0x8f)](_0x2d9aa0,_0x427d9d){const _0x28690e=a227_0xf4a040;try{const _0x148699=await this[_0x28690e(0xa4)][_0x28690e(0x8e)](_0x28690e(0xba)+this[_0x28690e(0xc7)]+'/repos/'+_0x2d9aa0,_0x427d9d),_0x15c32e=await this[_0x28690e(0xa4)]['get'](_0x28690e(0xba)+this[_0x28690e(0xc7)]+'/repos/'+_0x2d9aa0+_0x28690e(0x90)),_0x567d68=repo_class_1[_0x28690e(0xbc)][_0x28690e(0xa6)](_0x148699,(0x0,utils_1[_0x28690e(0xb4)])(this[_0x28690e(0xa4)][_0x28690e(0x97)][_0x28690e(0x82)]||'',_0x28690e(0x81)+this[_0x28690e(0xc7)]+_0x28690e(0xc8)+_0x2d9aa0),this[_0x28690e(0xa8)],this[_0x28690e(0xa9)]);return _0x567d68[_0x28690e(0x84)]=_0x15c32e['displayId'],_0x567d68;}catch(_0x5422fd){if(_0x5422fd instanceof api_error_1['ApiError'])throw _0x5422fd;throw new not_found_error_1['NotFoundError'](_0x5422fd);}}async[a227_0xf4a040(0x92)](_0x46c7be){const _0x4763a9=a227_0xf4a040;try{await this[_0x4763a9(0x85)](_0x46c7be),await this[_0x4763a9(0xa4)]['delete']('projects/'+this[_0x4763a9(0xc7)]+'/repos/'+_0x46c7be);}catch(_0x5b2673){if(_0x5b2673 instanceof api_error_1['ApiError'])throw _0x5b2673;throw new bad_request_error_1['BadRequestError'](_0x5b2673);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a227_0xf4a040(0x8c)])(),__param(0x1,(0x0,typedi_1[a227_0xf4a040(0xae)])(providers_tokens_1[a227_0xf4a040(0x94)]['credentials'])),__metadata(a227_0xf4a040(0x8a),[bitbucket_server_api_service_1[a227_0xf4a040(0x9d)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a227_0xf4a040(0xa1)]=BitbucketServerRepoService;