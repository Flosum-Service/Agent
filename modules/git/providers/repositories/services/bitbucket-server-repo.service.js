const a201_0x909a83=a201_0x1d09;(function(_0x5cf3d8,_0x550303){const _0x2d662d=a201_0x1d09,_0xb56d60=_0x5cf3d8();while(!![]){try{const _0x18392f=parseInt(_0x2d662d(0xc0))/0x1+parseInt(_0x2d662d(0xec))/0x2*(-parseInt(_0x2d662d(0xfb))/0x3)+parseInt(_0x2d662d(0xee))/0x4+parseInt(_0x2d662d(0xff))/0x5*(parseInt(_0x2d662d(0xf4))/0x6)+-parseInt(_0x2d662d(0xd0))/0x7*(-parseInt(_0x2d662d(0xdb))/0x8)+parseInt(_0x2d662d(0xf5))/0x9+parseInt(_0x2d662d(0x109))/0xa*(-parseInt(_0x2d662d(0xcd))/0xb);if(_0x18392f===_0x550303)break;else _0xb56d60['push'](_0xb56d60['shift']());}catch(_0x455531){_0xb56d60['push'](_0xb56d60['shift']());}}}(a201_0x14e8,0xde702));const a201_0x57dc4f=(function(){let _0x5ae245=!![];return function(_0x5aa77d,_0x1f04fc){const _0x4f2120=_0x5ae245?function(){const _0x3d1094=a201_0x1d09;if(_0x1f04fc){const _0x4b93bf=_0x1f04fc[_0x3d1094(0xc5)](_0x5aa77d,arguments);return _0x1f04fc=null,_0x4b93bf;}}:function(){};return _0x5ae245=![],_0x4f2120;};}()),a201_0x51fae4=a201_0x57dc4f(this,function(){const _0x56bfc1=a201_0x1d09;return a201_0x51fae4[_0x56bfc1(0xea)]()[_0x56bfc1(0xf7)](_0x56bfc1(0x102))[_0x56bfc1(0xea)]()[_0x56bfc1(0x108)](a201_0x51fae4)[_0x56bfc1(0xf7)]('(((.+)+)+)+$');});a201_0x51fae4();'use strict';var __decorate=this&&this[a201_0x909a83(0x105)]||function(_0x2b0133,_0x591dbb,_0x4216bb,_0x4af0bd){const _0x5ea1f2=a201_0x909a83;var _0x41a194=arguments[_0x5ea1f2(0xca)],_0x3a8ae4=_0x41a194<0x3?_0x591dbb:_0x4af0bd===null?_0x4af0bd=Object[_0x5ea1f2(0xc8)](_0x591dbb,_0x4216bb):_0x4af0bd,_0x1952c8;if(typeof Reflect===_0x5ea1f2(0xde)&&typeof Reflect[_0x5ea1f2(0xe5)]===_0x5ea1f2(0xc1))_0x3a8ae4=Reflect[_0x5ea1f2(0xe5)](_0x2b0133,_0x591dbb,_0x4216bb,_0x4af0bd);else{for(var _0x41aab5=_0x2b0133['length']-0x1;_0x41aab5>=0x0;_0x41aab5--)if(_0x1952c8=_0x2b0133[_0x41aab5])_0x3a8ae4=(_0x41a194<0x3?_0x1952c8(_0x3a8ae4):_0x41a194>0x3?_0x1952c8(_0x591dbb,_0x4216bb,_0x3a8ae4):_0x1952c8(_0x591dbb,_0x4216bb))||_0x3a8ae4;}return _0x41a194>0x3&&_0x3a8ae4&&Object['defineProperty'](_0x591dbb,_0x4216bb,_0x3a8ae4),_0x3a8ae4;},__metadata=this&&this[a201_0x909a83(0xed)]||function(_0xfc5466,_0x5b3022){const _0x1902fc=a201_0x909a83;if(typeof Reflect===_0x1902fc(0xde)&&typeof Reflect['metadata']===_0x1902fc(0xc1))return Reflect['metadata'](_0xfc5466,_0x5b3022);},__param=this&&this['__param']||function(_0x4c4f07,_0x853cf4){return function(_0x16037b,_0x33aa85){_0x853cf4(_0x16037b,_0x33aa85,_0x4c4f07);};};Object[a201_0x909a83(0xf6)](exports,'__esModule',{'value':!![]}),exports[a201_0x909a83(0xe6)]=void 0x0;const bad_request_error_1=require(a201_0x909a83(0x106)),not_found_error_1=require(a201_0x909a83(0xd7)),typedi_1=require(a201_0x909a83(0xcc)),api_error_1=require(a201_0x909a83(0x101)),bitbucket_server_api_service_1=require(a201_0x909a83(0xfc)),git_internal_1=require(a201_0x909a83(0x107)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a201_0x909a83(0xfd)),git_repo_service_1=require(a201_0x909a83(0xf0)),providers_tokens_1=require(a201_0x909a83(0xe4)),bitbucket_server_credentials_dto_1=require(a201_0x909a83(0xf2));function a201_0x14e8(){const _0x2c54ba=['projects/','__decorate','../../../../../core/errors/bad-request.error','../../../internal/git.internal','constructor','127790HejJDj','name','push','ApiError','delete','191952oOPxwq','function','getOne','joinURL','defaults','apply','Service','displayId','getOwnPropertyDescriptor','/branches','length','/repos/','typedi','1419GvEQxL','baseURL','isDefault','133GHseny','/repos','BitbucketServerApiService','get','BitbucketServerCredentialsDto','isLastPage','NotFoundError','../../../../../core/errors/not-found.error','post','/projects/','credentials','39712BtOPum','apiBody','master','object','nextPageStart','Repo','Git','api','getAll','../../providers.tokens','decorate','BitbucketServerRepoService','git','/default-branch','project','toString','values','10128dVfWzp','__metadata','5770820cozpVM','BadRequestError','./git-repo.service','design:paramtypes','../../credentials/dto/bitbucket-server-credentials.dto','Inject','9297786AiZrLt','2370681wOxPQk','defineProperty','search','find','autoInit','request','582CiuQFz','../../api/bitbucket-server-api.service','../repo.class','defaultBranch','5BNZpzC','slug','../../../../../core/errors/api.error','(((.+)+)+)+$','fromBitbucketServer'];a201_0x14e8=function(){return _0x2c54ba;};return a201_0x14e8();}let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x15a76d,_0xf65e1a){const _0x2e0ce1=a201_0x909a83;super(_0x15a76d),this[_0x2e0ce1(0xe2)]=_0x15a76d,this[_0x2e0ce1(0xe9)]=_0xf65e1a['project'],this[_0x2e0ce1(0xda)]=_0xf65e1a;}async['create'](_0x2d8a31){const _0x288784=a201_0x909a83;try{const _0x56f7d2={'name':_0x2d8a31[_0x288784(0x10a)],'scmId':_0x288784(0xe7),'defaultBranch':_0x2d8a31[_0x288784(0xfe)],..._0x2d8a31[_0x288784(0xdc)]||{}},_0x3bc75e=await this[_0x288784(0xfa)][_0x288784(0xd8)]('projects/'+this[_0x288784(0xe9)]+'/repos',_0x56f7d2),_0x2ec828=repo_class_1[_0x288784(0xe0)][_0x288784(0x103)](_0x3bc75e,'',this[_0x288784(0xe2)],this[_0x288784(0xda)]);return _0x2d8a31[_0x288784(0xf9)]&&await git_internal_1[_0x288784(0xe1)]['createEmptyBranch'](_0x2ec828,_0x2d8a31[_0x288784(0xfe)]||_0x288784(0xdd),'',this[_0x288784(0xda)]),this[_0x288784(0xc2)](_0x2ec828[_0x288784(0x10a)]);}catch(_0x332633){if(_0x332633 instanceof api_error_1[_0x288784(0x10c)])throw _0x332633;throw new bad_request_error_1[(_0x288784(0xef))](_0x332633);}}async[a201_0x909a83(0xe3)](){const _0x5eb6c9=a201_0x909a83;try{const _0x434284=[];let _0x2c05c0;do{_0x2c05c0=await this[_0x5eb6c9(0xfa)]['get'](_0x5eb6c9(0x104)+this[_0x5eb6c9(0xe9)]+_0x5eb6c9(0xd1),{'params':{'limit':0x64,'start':_0x2c05c0?_0x2c05c0[_0x5eb6c9(0xdf)]:0x0}}),_0x434284[_0x5eb6c9(0x10b)](..._0x2c05c0[_0x5eb6c9(0xeb)]);}while(!_0x2c05c0[_0x5eb6c9(0xd5)]);return _0x434284['map'](_0x49ab28=>repo_class_1['Repo'][_0x5eb6c9(0x103)](_0x49ab28,(0x0,utils_1[_0x5eb6c9(0xc3)])(this['request'][_0x5eb6c9(0xc4)][_0x5eb6c9(0xce)]||'',_0x5eb6c9(0xd9)+this['project']+'/repos/'+_0x49ab28[_0x5eb6c9(0x100)]),this[_0x5eb6c9(0xe2)],this[_0x5eb6c9(0xda)]));}catch(_0x14c827){if(_0x14c827 instanceof api_error_1[_0x5eb6c9(0x10c)])throw _0x14c827;throw new not_found_error_1[(_0x5eb6c9(0xd6))](_0x14c827);}}async[a201_0x909a83(0xc2)](_0xe270d9){const _0x3265b5=a201_0x909a83;var _0xebe9ba;try{const _0x3bbacf=await this[_0x3265b5(0xfa)][_0x3265b5(0xd3)](_0x3265b5(0x104)+this[_0x3265b5(0xe9)]+_0x3265b5(0xcb)+_0xe270d9),_0x228bd3=repo_class_1[_0x3265b5(0xe0)][_0x3265b5(0x103)](_0x3bbacf,(0x0,utils_1['joinURL'])(this[_0x3265b5(0xfa)][_0x3265b5(0xc4)][_0x3265b5(0xce)]||'','/projects/'+this[_0x3265b5(0xe9)]+'/repos/'+_0xe270d9),this[_0x3265b5(0xe2)],this[_0x3265b5(0xda)]),_0xf51ae9=await this[_0x3265b5(0xfa)]['get'](_0x228bd3['apiUrl']+_0x3265b5(0xc9))['then'](_0x20ff0f=>_0x20ff0f[_0x3265b5(0xeb)]);return _0x228bd3['defaultBranch']=(_0xebe9ba=_0xf51ae9[_0x3265b5(0xf8)](_0x5b59bf=>_0x5b59bf[_0x3265b5(0xcf)]===!![]))===null||_0xebe9ba===void 0x0?void 0x0:_0xebe9ba[_0x3265b5(0xc7)],_0x228bd3;}catch(_0x1610e2){if(_0x1610e2 instanceof api_error_1[_0x3265b5(0x10c)])throw _0x1610e2;throw new not_found_error_1['NotFoundError'](_0x1610e2);}}async['update'](_0x3d3f57,_0x3dcdfb){const _0x5e00ea=a201_0x909a83;try{const _0x415fee=await this['request']['put'](_0x5e00ea(0x104)+this[_0x5e00ea(0xe9)]+_0x5e00ea(0xcb)+_0x3d3f57,_0x3dcdfb),_0x2597fa=await this['request']['get'](_0x5e00ea(0x104)+this[_0x5e00ea(0xe9)]+_0x5e00ea(0xcb)+_0x3d3f57+_0x5e00ea(0xe8)),_0x332c9e=repo_class_1[_0x5e00ea(0xe0)][_0x5e00ea(0x103)](_0x415fee,(0x0,utils_1[_0x5e00ea(0xc3)])(this[_0x5e00ea(0xfa)][_0x5e00ea(0xc4)][_0x5e00ea(0xce)]||'',_0x5e00ea(0xd9)+this[_0x5e00ea(0xe9)]+'/repos/'+_0x3d3f57),this[_0x5e00ea(0xe2)],this[_0x5e00ea(0xda)]);return _0x332c9e[_0x5e00ea(0xfe)]=_0x2597fa[_0x5e00ea(0xc7)],_0x332c9e;}catch(_0x392ce5){if(_0x392ce5 instanceof api_error_1[_0x5e00ea(0x10c)])throw _0x392ce5;throw new not_found_error_1[(_0x5e00ea(0xd6))](_0x392ce5);}}async[a201_0x909a83(0x10d)](_0x228f7d){const _0x4a212a=a201_0x909a83;try{await this[_0x4a212a(0xc2)](_0x228f7d),await this['request'][_0x4a212a(0x10d)](_0x4a212a(0x104)+this['project']+_0x4a212a(0xcb)+_0x228f7d);}catch(_0x36424a){if(_0x36424a instanceof api_error_1['ApiError'])throw _0x36424a;throw new bad_request_error_1[(_0x4a212a(0xef))](_0x36424a);}}};function a201_0x1d09(_0x5048d2,_0x15e5b4){const _0x3572fe=a201_0x14e8();return a201_0x1d09=function(_0x51fae4,_0x57dc4f){_0x51fae4=_0x51fae4-0xc0;let _0x14e8f2=_0x3572fe[_0x51fae4];return _0x14e8f2;},a201_0x1d09(_0x5048d2,_0x15e5b4);}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a201_0x909a83(0xc6)])(),__param(0x1,(0x0,typedi_1[a201_0x909a83(0xf3)])(providers_tokens_1['Tokens']['credentials'])),__metadata(a201_0x909a83(0xf1),[bitbucket_server_api_service_1[a201_0x909a83(0xd2)],bitbucket_server_credentials_dto_1[a201_0x909a83(0xd4)]])],BitbucketServerRepoService),exports[a201_0x909a83(0xe6)]=BitbucketServerRepoService;