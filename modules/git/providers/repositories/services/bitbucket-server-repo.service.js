const a201_0x28b978=a201_0x55d8;function a201_0x2196(){const _0x245f93=['/repos/','design:paramtypes','BitbucketServerApiService','7373120ZoUIdA','BitbucketServerRepoService','__metadata','displayId','/repos','api','Repo','BadRequestError','apply','update','../../credentials/dto/bitbucket-server-credentials.dto','defineProperty','project','67084veLhfK','54rfzVoG','delete','metadata','__param','function','push','search','NotFoundError','../../../../../core/errors/not-found.error','length','(((.+)+)+)+$','7721QUwErd','git','getOwnPropertyDescriptor','/default-branch','createEmptyBranch','933765RBGTYf','toString','create','ApiError','slug','baseURL','../../api/bitbucket-server-api.service','1349468JoGNij','apiBody','__esModule','values','fromBitbucketServer','getOne','post','Service','../repo.class','autoInit','Git','get','credentials','nextPageStart','1374561mSsrid','map','defaults','../../../../../core/errors/bad-request.error','BitbucketServerCredentialsDto','put','then','defaultBranch','22531419hgmtFN','../../../../shared/utils','master','../../../internal/git.internal','./git-repo.service','projects/','name','object','getAll','/projects/','request','170ysuGkr','decorate','Tokens','isLastPage','joinURL','Inject','GitRepoService'];a201_0x2196=function(){return _0x245f93;};return a201_0x2196();}(function(_0x4caa34,_0x404430){const _0x58b1bf=a201_0x55d8,_0x3446c0=_0x4caa34();while(!![]){try{const _0x59a993=parseInt(_0x58b1bf(0xf3))/0x1+-parseInt(_0x58b1bf(0xfa))/0x2+-parseInt(_0x58b1bf(0x108))/0x3+parseInt(_0x58b1bf(0xe2))/0x4*(-parseInt(_0x58b1bf(0x11b))/0x5)+-parseInt(_0x58b1bf(0xe3))/0x6*(-parseInt(_0x58b1bf(0xee))/0x7)+-parseInt(_0x58b1bf(0x125))/0x8+parseInt(_0x58b1bf(0x110))/0x9;if(_0x59a993===_0x404430)break;else _0x3446c0['push'](_0x3446c0['shift']());}catch(_0xc036eb){_0x3446c0['push'](_0x3446c0['shift']());}}}(a201_0x2196,0xc8c88));const a201_0x4be2d6=(function(){let _0x30258c=!![];return function(_0x25974c,_0x54dd65){const _0x1e9257=_0x30258c?function(){const _0x189aac=a201_0x55d8;if(_0x54dd65){const _0x5b5d4a=_0x54dd65[_0x189aac(0xdd)](_0x25974c,arguments);return _0x54dd65=null,_0x5b5d4a;}}:function(){};return _0x30258c=![],_0x1e9257;};}()),a201_0x55b263=a201_0x4be2d6(this,function(){const _0x4754e7=a201_0x55d8;return a201_0x55b263[_0x4754e7(0xf4)]()[_0x4754e7(0xe9)](_0x4754e7(0xed))[_0x4754e7(0xf4)]()['constructor'](a201_0x55b263)[_0x4754e7(0xe9)](_0x4754e7(0xed));});a201_0x55b263();'use strict';var __decorate=this&&this['__decorate']||function(_0x3c3885,_0x22ec10,_0x395ae9,_0xc99293){const _0x2d1662=a201_0x55d8;var _0x45a95f=arguments[_0x2d1662(0xec)],_0x534f19=_0x45a95f<0x3?_0x22ec10:_0xc99293===null?_0xc99293=Object[_0x2d1662(0xf0)](_0x22ec10,_0x395ae9):_0xc99293,_0x174bcc;if(typeof Reflect===_0x2d1662(0x117)&&typeof Reflect[_0x2d1662(0x11c)]===_0x2d1662(0xe7))_0x534f19=Reflect['decorate'](_0x3c3885,_0x22ec10,_0x395ae9,_0xc99293);else{for(var _0xba45c6=_0x3c3885[_0x2d1662(0xec)]-0x1;_0xba45c6>=0x0;_0xba45c6--)if(_0x174bcc=_0x3c3885[_0xba45c6])_0x534f19=(_0x45a95f<0x3?_0x174bcc(_0x534f19):_0x45a95f>0x3?_0x174bcc(_0x22ec10,_0x395ae9,_0x534f19):_0x174bcc(_0x22ec10,_0x395ae9))||_0x534f19;}return _0x45a95f>0x3&&_0x534f19&&Object[_0x2d1662(0xe0)](_0x22ec10,_0x395ae9,_0x534f19),_0x534f19;},__metadata=this&&this[a201_0x28b978(0x127)]||function(_0x4b1e3d,_0x498384){const _0x36b837=a201_0x28b978;if(typeof Reflect===_0x36b837(0x117)&&typeof Reflect[_0x36b837(0xe5)]===_0x36b837(0xe7))return Reflect[_0x36b837(0xe5)](_0x4b1e3d,_0x498384);},__param=this&&this[a201_0x28b978(0xe6)]||function(_0x23c0b2,_0x27549a){return function(_0x757ac0,_0x119689){_0x27549a(_0x757ac0,_0x119689,_0x23c0b2);};};Object[a201_0x28b978(0xe0)](exports,a201_0x28b978(0xfc),{'value':!![]}),exports[a201_0x28b978(0x126)]=void 0x0;const bad_request_error_1=require(a201_0x28b978(0x10b)),not_found_error_1=require(a201_0x28b978(0xeb)),typedi_1=require('typedi'),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a201_0x28b978(0xf9)),git_internal_1=require(a201_0x28b978(0x113)),utils_1=require(a201_0x28b978(0x111)),repo_class_1=require(a201_0x28b978(0x102)),git_repo_service_1=require(a201_0x28b978(0x114)),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require(a201_0x28b978(0xdf));function a201_0x55d8(_0x3c3542,_0x38e0a5){const _0x544295=a201_0x2196();return a201_0x55d8=function(_0x55b263,_0x4be2d6){_0x55b263=_0x55b263-0xdc;let _0x2196bb=_0x544295[_0x55b263];return _0x2196bb;},a201_0x55d8(_0x3c3542,_0x38e0a5);}let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a201_0x28b978(0x121)]{constructor(_0x576bab,_0x4a580e){const _0x4272f8=a201_0x28b978;super(_0x576bab),this[_0x4272f8(0x12a)]=_0x576bab,this['project']=_0x4a580e['project'],this[_0x4272f8(0x106)]=_0x4a580e;}async[a201_0x28b978(0xf5)](_0x3217a3){const _0x30c523=a201_0x28b978;try{const _0x34a02c={'name':_0x3217a3[_0x30c523(0x116)],'scmId':_0x30c523(0xef),'defaultBranch':_0x3217a3[_0x30c523(0x10f)],..._0x3217a3[_0x30c523(0xfb)]||{}},_0xe11e54=await this[_0x30c523(0x11a)][_0x30c523(0x100)](_0x30c523(0x115)+this['project']+'/repos',_0x34a02c),_0x123e41=repo_class_1[_0x30c523(0x12b)][_0x30c523(0xfe)](_0xe11e54,'',this[_0x30c523(0x12a)],this[_0x30c523(0x106)]);return _0x3217a3[_0x30c523(0x103)]&&await git_internal_1[_0x30c523(0x104)][_0x30c523(0xf2)](_0x123e41,_0x3217a3[_0x30c523(0x10f)]||_0x30c523(0x112),'',this[_0x30c523(0x106)]),this[_0x30c523(0xff)](_0x123e41[_0x30c523(0x116)]);}catch(_0xbe19a6){if(_0xbe19a6 instanceof api_error_1[_0x30c523(0xf6)])throw _0xbe19a6;throw new bad_request_error_1[(_0x30c523(0xdc))](_0xbe19a6);}}async[a201_0x28b978(0x118)](){const _0x30b4bc=a201_0x28b978;try{const _0x578773=[];let _0x2e8255;do{_0x2e8255=await this[_0x30b4bc(0x11a)][_0x30b4bc(0x105)]('projects/'+this[_0x30b4bc(0xe1)]+_0x30b4bc(0x129),{'params':{'limit':0x64,'start':_0x2e8255?_0x2e8255[_0x30b4bc(0x107)]:0x0}}),_0x578773[_0x30b4bc(0xe8)](..._0x2e8255[_0x30b4bc(0xfd)]);}while(!_0x2e8255[_0x30b4bc(0x11e)]);return _0x578773[_0x30b4bc(0x109)](_0x3bf33e=>repo_class_1[_0x30b4bc(0x12b)]['fromBitbucketServer'](_0x3bf33e,(0x0,utils_1[_0x30b4bc(0x11f)])(this[_0x30b4bc(0x11a)][_0x30b4bc(0x10a)][_0x30b4bc(0xf8)]||'',_0x30b4bc(0x119)+this['project']+_0x30b4bc(0x122)+_0x3bf33e[_0x30b4bc(0xf7)]),this['api'],this[_0x30b4bc(0x106)]));}catch(_0x3dbe11){if(_0x3dbe11 instanceof api_error_1['ApiError'])throw _0x3dbe11;throw new not_found_error_1[(_0x30b4bc(0xea))](_0x3dbe11);}}async[a201_0x28b978(0xff)](_0x2fc46f){const _0x29f20e=a201_0x28b978;var _0x626631;try{const _0x2075ba=await this[_0x29f20e(0x11a)][_0x29f20e(0x105)](_0x29f20e(0x115)+this[_0x29f20e(0xe1)]+'/repos/'+_0x2fc46f),_0x943b34=repo_class_1[_0x29f20e(0x12b)]['fromBitbucketServer'](_0x2075ba,(0x0,utils_1['joinURL'])(this[_0x29f20e(0x11a)][_0x29f20e(0x10a)]['baseURL']||'',_0x29f20e(0x119)+this['project']+'/repos/'+_0x2fc46f),this[_0x29f20e(0x12a)],this[_0x29f20e(0x106)]),_0x4d900d=await this[_0x29f20e(0x11a)]['get'](_0x943b34['apiUrl']+'/branches')[_0x29f20e(0x10e)](_0x326ce4=>_0x326ce4[_0x29f20e(0xfd)]);return _0x943b34[_0x29f20e(0x10f)]=(_0x626631=_0x4d900d['find'](_0x15c98f=>_0x15c98f['isDefault']===!![]))===null||_0x626631===void 0x0?void 0x0:_0x626631['displayId'],_0x943b34;}catch(_0xc04fcf){if(_0xc04fcf instanceof api_error_1[_0x29f20e(0xf6)])throw _0xc04fcf;throw new not_found_error_1[(_0x29f20e(0xea))](_0xc04fcf);}}async[a201_0x28b978(0xde)](_0x3f3ac4,_0x4c84cf){const _0x500191=a201_0x28b978;try{const _0x1b2e96=await this[_0x500191(0x11a)][_0x500191(0x10d)](_0x500191(0x115)+this[_0x500191(0xe1)]+_0x500191(0x122)+_0x3f3ac4,_0x4c84cf),_0x45f7a2=await this['request'][_0x500191(0x105)](_0x500191(0x115)+this[_0x500191(0xe1)]+_0x500191(0x122)+_0x3f3ac4+_0x500191(0xf1)),_0xf6eec3=repo_class_1[_0x500191(0x12b)][_0x500191(0xfe)](_0x1b2e96,(0x0,utils_1[_0x500191(0x11f)])(this['request']['defaults'][_0x500191(0xf8)]||'','/projects/'+this[_0x500191(0xe1)]+'/repos/'+_0x3f3ac4),this[_0x500191(0x12a)],this['credentials']);return _0xf6eec3[_0x500191(0x10f)]=_0x45f7a2[_0x500191(0x128)],_0xf6eec3;}catch(_0x464f76){if(_0x464f76 instanceof api_error_1[_0x500191(0xf6)])throw _0x464f76;throw new not_found_error_1['NotFoundError'](_0x464f76);}}async[a201_0x28b978(0xe4)](_0x3a1891){const _0x2cc574=a201_0x28b978;try{await this[_0x2cc574(0xff)](_0x3a1891),await this[_0x2cc574(0x11a)][_0x2cc574(0xe4)](_0x2cc574(0x115)+this[_0x2cc574(0xe1)]+'/repos/'+_0x3a1891);}catch(_0xd691d6){if(_0xd691d6 instanceof api_error_1['ApiError'])throw _0xd691d6;throw new bad_request_error_1[(_0x2cc574(0xdc))](_0xd691d6);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a201_0x28b978(0x101)])(),__param(0x1,(0x0,typedi_1[a201_0x28b978(0x120)])(providers_tokens_1[a201_0x28b978(0x11d)][a201_0x28b978(0x106)])),__metadata(a201_0x28b978(0x123),[bitbucket_server_api_service_1[a201_0x28b978(0x124)],bitbucket_server_credentials_dto_1[a201_0x28b978(0x10c)]])],BitbucketServerRepoService),exports[a201_0x28b978(0x126)]=BitbucketServerRepoService;