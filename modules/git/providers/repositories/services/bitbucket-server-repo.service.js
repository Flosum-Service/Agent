const a149_0x3a6590=a149_0x2f83;(function(_0x45ea55,_0x1d6c7e){const _0x59bcae=a149_0x2f83,_0x25a129=_0x45ea55();while(!![]){try{const _0x1ab2a7=parseInt(_0x59bcae(0xf8))/0x1*(parseInt(_0x59bcae(0xdd))/0x2)+-parseInt(_0x59bcae(0xee))/0x3*(parseInt(_0x59bcae(0xd3))/0x4)+parseInt(_0x59bcae(0xea))/0x5+parseInt(_0x59bcae(0x110))/0x6+parseInt(_0x59bcae(0x117))/0x7+-parseInt(_0x59bcae(0xf9))/0x8+-parseInt(_0x59bcae(0xe1))/0x9;if(_0x1ab2a7===_0x1d6c7e)break;else _0x25a129['push'](_0x25a129['shift']());}catch(_0x4f8824){_0x25a129['push'](_0x25a129['shift']());}}}(a149_0x23a8,0xef1c6));const a149_0x34ba84=(function(){let _0x525357=!![];return function(_0x1ee578,_0x1017bd){const _0xa475b3=_0x525357?function(){const _0x22b5e2=a149_0x2f83;if(_0x1017bd){const _0x488c33=_0x1017bd[_0x22b5e2(0xe6)](_0x1ee578,arguments);return _0x1017bd=null,_0x488c33;}}:function(){};return _0x525357=![],_0xa475b3;};}()),a149_0x27133a=a149_0x34ba84(this,function(){const _0x226147=a149_0x2f83;return a149_0x27133a['toString']()[_0x226147(0xd5)](_0x226147(0xed))[_0x226147(0xd7)]()[_0x226147(0xd2)](a149_0x27133a)['search'](_0x226147(0xed));});a149_0x27133a();'use strict';var __decorate=this&&this['__decorate']||function(_0x2bf633,_0xb79458,_0x2580e1,_0x44a507){const _0x2a8777=a149_0x2f83;var _0x4712ad=arguments['length'],_0x5a062a=_0x4712ad<0x3?_0xb79458:_0x44a507===null?_0x44a507=Object[_0x2a8777(0xfc)](_0xb79458,_0x2580e1):_0x44a507,_0x427c48;if(typeof Reflect===_0x2a8777(0xcf)&&typeof Reflect['decorate']==='function')_0x5a062a=Reflect['decorate'](_0x2bf633,_0xb79458,_0x2580e1,_0x44a507);else{for(var _0x5b97cb=_0x2bf633['length']-0x1;_0x5b97cb>=0x0;_0x5b97cb--)if(_0x427c48=_0x2bf633[_0x5b97cb])_0x5a062a=(_0x4712ad<0x3?_0x427c48(_0x5a062a):_0x4712ad>0x3?_0x427c48(_0xb79458,_0x2580e1,_0x5a062a):_0x427c48(_0xb79458,_0x2580e1))||_0x5a062a;}return _0x4712ad>0x3&&_0x5a062a&&Object['defineProperty'](_0xb79458,_0x2580e1,_0x5a062a),_0x5a062a;},__metadata=this&&this[a149_0x3a6590(0xe9)]||function(_0x59321c,_0xf46f44){const _0x11df14=a149_0x3a6590;if(typeof Reflect==='object'&&typeof Reflect[_0x11df14(0xff)]===_0x11df14(0x104))return Reflect[_0x11df14(0xff)](_0x59321c,_0xf46f44);},__param=this&&this[a149_0x3a6590(0xfe)]||function(_0x2f944d,_0xee4537){return function(_0x272428,_0x4ac420){_0xee4537(_0x272428,_0x4ac420,_0x2f944d);};};function a149_0x2f83(_0x3fd9a8,_0x353e47){const _0x3a912f=a149_0x23a8();return a149_0x2f83=function(_0x27133a,_0x34ba84){_0x27133a=_0x27133a-0xcf;let _0x23a8f2=_0x3a912f[_0x27133a];return _0x23a8f2;},a149_0x2f83(_0x3fd9a8,_0x353e47);}Object[a149_0x3a6590(0x115)](exports,a149_0x3a6590(0xe5),{'value':!![]}),exports[a149_0x3a6590(0xd4)]=void 0x0;const bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a149_0x3a6590(0xef)),typedi_1=require(a149_0x3a6590(0x100)),api_error_1=require(a149_0x3a6590(0xe3)),bitbucket_server_api_service_1=require(a149_0x3a6590(0x10b)),git_internal_1=require(a149_0x3a6590(0xfb)),utils_1=require(a149_0x3a6590(0x11b)),repo_class_1=require(a149_0x3a6590(0xec)),git_repo_service_1=require(a149_0x3a6590(0xfa)),providers_tokens_1=require(a149_0x3a6590(0xf2)),bitbucket_server_credentials_dto_1=require(a149_0x3a6590(0x102));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a149_0x3a6590(0xd8)]{constructor(_0x5b5215,_0xf3a4da){const _0x132352=a149_0x3a6590;super(_0x5b5215),this[_0x132352(0xda)]=_0x5b5215,this[_0x132352(0xe0)]=_0xf3a4da['project'],this[_0x132352(0x113)]=_0xf3a4da;}async[a149_0x3a6590(0x109)](_0x57ee41){const _0x570dc3=a149_0x3a6590;try{const _0x3baa23={'name':_0x57ee41[_0x570dc3(0x106)],'scmId':_0x570dc3(0x10f),'defaultBranch':_0x57ee41['defaultBranch'],..._0x57ee41[_0x570dc3(0xfd)]||{}},_0x371a8f=await this[_0x570dc3(0xde)][_0x570dc3(0x10d)](_0x570dc3(0x116)+this[_0x570dc3(0xe0)]+_0x570dc3(0x10c),_0x3baa23),_0x1e9b83=repo_class_1[_0x570dc3(0x103)][_0x570dc3(0x111)](_0x371a8f,'',this[_0x570dc3(0xda)],this[_0x570dc3(0x113)]);return _0x57ee41[_0x570dc3(0x11a)]&&await git_internal_1[_0x570dc3(0xf7)][_0x570dc3(0xf4)](_0x1e9b83,_0x57ee41['defaultBranch']||'master','',this[_0x570dc3(0x113)]),this[_0x570dc3(0x107)](_0x1e9b83[_0x570dc3(0x106)]);}catch(_0x126d22){if(_0x126d22 instanceof api_error_1[_0x570dc3(0x119)])throw _0x126d22;throw new bad_request_error_1[(_0x570dc3(0x11d))](_0x126d22);}}async[a149_0x3a6590(0xd9)](){const _0x59fc5b=a149_0x3a6590;try{const _0x491846=[];let _0x372d1e;do{_0x372d1e=await this['request'][_0x59fc5b(0x108)](_0x59fc5b(0x116)+this[_0x59fc5b(0xe0)]+'/repos',{'params':{'limit':0x64,'start':_0x372d1e?_0x372d1e[_0x59fc5b(0xf6)]:0x0}}),_0x491846[_0x59fc5b(0xf3)](..._0x372d1e[_0x59fc5b(0x118)]);}while(!_0x372d1e[_0x59fc5b(0xeb)]);return _0x491846[_0x59fc5b(0x11c)](_0x114488=>repo_class_1[_0x59fc5b(0x103)][_0x59fc5b(0x111)](_0x114488,utils_1[_0x59fc5b(0xf1)](this[_0x59fc5b(0xde)][_0x59fc5b(0xe4)][_0x59fc5b(0xdf)]||'',_0x59fc5b(0x114)+this['project']+_0x59fc5b(0xdc)+_0x114488['slug']),this[_0x59fc5b(0xda)],this[_0x59fc5b(0x113)]));}catch(_0x23b806){if(_0x23b806 instanceof api_error_1[_0x59fc5b(0x119)])throw _0x23b806;throw new not_found_error_1[(_0x59fc5b(0xd1))](_0x23b806);}}async[a149_0x3a6590(0x107)](_0xb29c78){const _0x3f7743=a149_0x3a6590;var _0x5ddca2;try{const _0x35c076=await this[_0x3f7743(0xde)][_0x3f7743(0x108)]('projects/'+this['project']+_0x3f7743(0xdc)+_0xb29c78),_0x5ef2cd=repo_class_1['Repo'][_0x3f7743(0x111)](_0x35c076,utils_1[_0x3f7743(0xf1)](this[_0x3f7743(0xde)]['defaults']['baseURL']||'',_0x3f7743(0x114)+this[_0x3f7743(0xe0)]+'/repos/'+_0xb29c78),this['api'],this[_0x3f7743(0x113)]),_0x33bde0=await this['request'][_0x3f7743(0x108)](_0x5ef2cd[_0x3f7743(0xd0)]+'/branches')[_0x3f7743(0x10e)](_0x159bc3=>_0x159bc3[_0x3f7743(0x118)]);return _0x5ef2cd['defaultBranch']=(_0x5ddca2=_0x33bde0[_0x3f7743(0xe8)](_0x2640d0=>_0x2640d0['isDefault']===!![]))===null||_0x5ddca2===void 0x0?void 0x0:_0x5ddca2[_0x3f7743(0x10a)],_0x5ef2cd;}catch(_0x549ad9){if(_0x549ad9 instanceof api_error_1[_0x3f7743(0x119)])throw _0x549ad9;throw new not_found_error_1[(_0x3f7743(0xd1))](_0x549ad9);}}async[a149_0x3a6590(0x11e)](_0x24595d,_0x2cb431){const _0x9a17e9=a149_0x3a6590;try{const _0x545eb3=await this['request'][_0x9a17e9(0x112)]('projects/'+this[_0x9a17e9(0xe0)]+_0x9a17e9(0xdc)+_0x24595d,_0x2cb431),_0x8f965b=await this[_0x9a17e9(0xde)][_0x9a17e9(0x108)](_0x9a17e9(0x116)+this[_0x9a17e9(0xe0)]+_0x9a17e9(0xdc)+_0x24595d+_0x9a17e9(0xf5)),_0x27adb1=repo_class_1['Repo'][_0x9a17e9(0x111)](_0x545eb3,utils_1['joinURL'](this['request']['defaults'][_0x9a17e9(0xdf)]||'',_0x9a17e9(0x114)+this['project']+_0x9a17e9(0xdc)+_0x24595d),this[_0x9a17e9(0xda)],this[_0x9a17e9(0x113)]);return _0x27adb1['defaultBranch']=_0x8f965b[_0x9a17e9(0x10a)],_0x27adb1;}catch(_0x59eae6){if(_0x59eae6 instanceof api_error_1['ApiError'])throw _0x59eae6;throw new not_found_error_1[(_0x9a17e9(0xd1))](_0x59eae6);}}async[a149_0x3a6590(0xe7)](_0x29cb35){const _0x2e69ac=a149_0x3a6590;try{await this[_0x2e69ac(0x107)](_0x29cb35),await this[_0x2e69ac(0xde)][_0x2e69ac(0xe7)](_0x2e69ac(0x116)+this[_0x2e69ac(0xe0)]+_0x2e69ac(0xdc)+_0x29cb35);}catch(_0x5cdd27){if(_0x5cdd27 instanceof api_error_1['ApiError'])throw _0x5cdd27;throw new bad_request_error_1[(_0x2e69ac(0x11d))](_0x5cdd27);}}};BitbucketServerRepoService=__decorate([typedi_1[a149_0x3a6590(0xf0)](),__param(0x1,typedi_1[a149_0x3a6590(0xd6)](providers_tokens_1[a149_0x3a6590(0xdb)][a149_0x3a6590(0x113)])),__metadata(a149_0x3a6590(0x105),[bitbucket_server_api_service_1[a149_0x3a6590(0x101)],bitbucket_server_credentials_dto_1[a149_0x3a6590(0xe2)]])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;function a149_0x23a8(){const _0x264a7a=['__esModule','apply','delete','find','__metadata','3743220ANfMuK','isLastPage','../repo.class','(((.+)+)+)+$','5913wWKGmp','../../../../../core/errors/not-found.error','Service','joinURL','../../providers.tokens','push','createEmptyBranch','/default-branch','nextPageStart','Git','27ktNRqF','1250320RbbQmD','./git-repo.service','../../../internal/git.internal','getOwnPropertyDescriptor','apiBody','__param','metadata','typedi','BitbucketServerApiService','../../credentials/dto/bitbucket-server-credentials.dto','Repo','function','design:paramtypes','name','getOne','get','create','displayId','../../api/bitbucket-server-api.service','/repos','post','then','git','2653914RxsoyP','fromBitbucketServer','put','credentials','/projects/','defineProperty','projects/','12206908lZcyzV','values','ApiError','autoInit','../../../../shared/utils','map','BadRequestError','update','object','apiUrl','NotFoundError','constructor','4SWubbN','BitbucketServerRepoService','search','Inject','toString','GitRepoService','getAll','api','Tokens','/repos/','52666HqYwKl','request','baseURL','project','22573251keWYwL','BitbucketServerCredentialsDto','../../../../../core/errors/api.error','defaults'];a149_0x23a8=function(){return _0x264a7a;};return a149_0x23a8();}