const a238_0x33ec1a=a238_0x1d66;function a238_0x1d66(_0x24139e,_0x38d38b){const _0x5660f3=a238_0x5413();return a238_0x1d66=function(_0x3e3691,_0x305f5d){_0x3e3691=_0x3e3691-0xc5;let _0x541356=_0x5660f3[_0x3e3691];return _0x541356;},a238_0x1d66(_0x24139e,_0x38d38b);}(function(_0x50fc67,_0x565af3){const _0x7acb3e=a238_0x1d66,_0x587870=_0x50fc67();while(!![]){try{const _0x177834=-parseInt(_0x7acb3e(0xe2))/0x1+-parseInt(_0x7acb3e(0xd3))/0x2+parseInt(_0x7acb3e(0x104))/0x3*(parseInt(_0x7acb3e(0xec))/0x4)+parseInt(_0x7acb3e(0xc7))/0x5*(parseInt(_0x7acb3e(0x10b))/0x6)+parseInt(_0x7acb3e(0x101))/0x7+-parseInt(_0x7acb3e(0xcb))/0x8+parseInt(_0x7acb3e(0xea))/0x9;if(_0x177834===_0x565af3)break;else _0x587870['push'](_0x587870['shift']());}catch(_0x244b91){_0x587870['push'](_0x587870['shift']());}}}(a238_0x5413,0xd2ef8));const a238_0x305f5d=(function(){let _0x1a93c9=!![];return function(_0x1b20c8,_0x56887d){const _0x540ee2=_0x1a93c9?function(){if(_0x56887d){const _0x558837=_0x56887d['apply'](_0x1b20c8,arguments);return _0x56887d=null,_0x558837;}}:function(){};return _0x1a93c9=![],_0x540ee2;};}()),a238_0x3e3691=a238_0x305f5d(this,function(){const _0x45891a=a238_0x1d66;return a238_0x3e3691[_0x45891a(0xd9)]()[_0x45891a(0xd2)](_0x45891a(0xe9))[_0x45891a(0xd9)]()['constructor'](a238_0x3e3691)[_0x45891a(0xd2)](_0x45891a(0xe9));});a238_0x3e3691();'use strict';var __decorate=this&&this['__decorate']||function(_0x4498dc,_0x5325c3,_0x369e95,_0x4f36d7){const _0x3753f1=a238_0x1d66;var _0x3c7cd2=arguments[_0x3753f1(0xeb)],_0x180be1=_0x3c7cd2<0x3?_0x5325c3:_0x4f36d7===null?_0x4f36d7=Object[_0x3753f1(0xdf)](_0x5325c3,_0x369e95):_0x4f36d7,_0x1444c1;if(typeof Reflect===_0x3753f1(0xee)&&typeof Reflect['decorate']===_0x3753f1(0xe0))_0x180be1=Reflect[_0x3753f1(0xd6)](_0x4498dc,_0x5325c3,_0x369e95,_0x4f36d7);else{for(var _0x2dd965=_0x4498dc[_0x3753f1(0xeb)]-0x1;_0x2dd965>=0x0;_0x2dd965--)if(_0x1444c1=_0x4498dc[_0x2dd965])_0x180be1=(_0x3c7cd2<0x3?_0x1444c1(_0x180be1):_0x3c7cd2>0x3?_0x1444c1(_0x5325c3,_0x369e95,_0x180be1):_0x1444c1(_0x5325c3,_0x369e95))||_0x180be1;}return _0x3c7cd2>0x3&&_0x180be1&&Object[_0x3753f1(0x10e)](_0x5325c3,_0x369e95,_0x180be1),_0x180be1;},__metadata=this&&this[a238_0x33ec1a(0xe5)]||function(_0x2e5d39,_0x10cd6b){const _0x49e138=a238_0x33ec1a;if(typeof Reflect===_0x49e138(0xee)&&typeof Reflect[_0x49e138(0xfc)]===_0x49e138(0xe0))return Reflect[_0x49e138(0xfc)](_0x2e5d39,_0x10cd6b);},__param=this&&this[a238_0x33ec1a(0xdc)]||function(_0xd7a325,_0x55aa7e){return function(_0x152389,_0x1251df){_0x55aa7e(_0x152389,_0x1251df,_0xd7a325);};};Object[a238_0x33ec1a(0x10e)](exports,a238_0x33ec1a(0xf0),{'value':!![]}),exports[a238_0x33ec1a(0xe4)]=void 0x0;const bad_request_error_1=require(a238_0x33ec1a(0xef)),not_found_error_1=require(a238_0x33ec1a(0xcc)),typedi_1=require(a238_0x33ec1a(0xdd)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a238_0x33ec1a(0xff)),git_internal_1=require(a238_0x33ec1a(0xfb)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a238_0x33ec1a(0x10d)),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a238_0x33ec1a(0xde)),bitbucket_server_credentials_dto_1=require(a238_0x33ec1a(0xd8));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x51a8d5,_0x8ce560){const _0x4a7359=a238_0x33ec1a;super(_0x51a8d5),this[_0x4a7359(0xe1)]=_0x51a8d5,this[_0x4a7359(0xf5)]=_0x8ce560[_0x4a7359(0xf5)],this[_0x4a7359(0xdb)]=_0x8ce560;}async[a238_0x33ec1a(0x108)](_0x3b351e){const _0x273844=a238_0x33ec1a;try{const _0x30c27e={'name':_0x3b351e['name'],'scmId':_0x273844(0xf4),'defaultBranch':_0x3b351e['defaultBranch'],..._0x3b351e[_0x273844(0xcf)]||{}},_0x4063fd=await this[_0x273844(0xd7)]['post'](_0x273844(0x105)+this[_0x273844(0xf5)]+_0x273844(0xe7),_0x30c27e),_0x52d00a=repo_class_1[_0x273844(0xe6)][_0x273844(0xfd)](_0x4063fd,'',this[_0x273844(0xe1)],this[_0x273844(0xdb)]);return _0x3b351e['autoInit']&&await git_internal_1['Git']['createEmptyBranch'](_0x52d00a,_0x3b351e[_0x273844(0xe8)]||_0x273844(0xf9),'',this[_0x273844(0xdb)]),this[_0x273844(0xd5)](_0x52d00a[_0x273844(0xed)]);}catch(_0x1af34a){if(_0x1af34a instanceof api_error_1[_0x273844(0xc9)])throw _0x1af34a;throw new bad_request_error_1['BadRequestError'](_0x1af34a);}}async[a238_0x33ec1a(0xca)](){const _0x10da66=a238_0x33ec1a;try{const _0x14d04f=[];let _0x25a9e6;do{_0x25a9e6=await this['request'][_0x10da66(0x109)](_0x10da66(0x105)+this[_0x10da66(0xf5)]+'/repos',{'params':{'limit':0x64,'start':_0x25a9e6?_0x25a9e6[_0x10da66(0xe3)]:0x0}}),_0x14d04f['push'](..._0x25a9e6[_0x10da66(0xf6)]);}while(!_0x25a9e6[_0x10da66(0xf8)]);return _0x14d04f[_0x10da66(0x10a)](_0x578578=>repo_class_1[_0x10da66(0xe6)][_0x10da66(0xfd)](_0x578578,(0x0,utils_1[_0x10da66(0xd4)])(this[_0x10da66(0xd7)][_0x10da66(0xc5)][_0x10da66(0xf1)]||'',_0x10da66(0xd0)+this[_0x10da66(0xf5)]+_0x10da66(0x10c)+_0x578578[_0x10da66(0x102)]),this['api'],this['credentials']));}catch(_0x5b7af8){if(_0x5b7af8 instanceof api_error_1[_0x10da66(0xc9)])throw _0x5b7af8;throw new not_found_error_1['NotFoundError'](_0x5b7af8);}}async[a238_0x33ec1a(0xd5)](_0x18600b){const _0x3ab72d=a238_0x33ec1a;var _0x22c57b;try{const _0x2075b5=await this[_0x3ab72d(0xd7)][_0x3ab72d(0x109)](_0x3ab72d(0x105)+this[_0x3ab72d(0xf5)]+_0x3ab72d(0x10c)+_0x18600b),_0x31b330=repo_class_1[_0x3ab72d(0xe6)]['fromBitbucketServer'](_0x2075b5,(0x0,utils_1[_0x3ab72d(0xd4)])(this[_0x3ab72d(0xd7)][_0x3ab72d(0xc5)][_0x3ab72d(0xf1)]||'',_0x3ab72d(0xd0)+this['project']+_0x3ab72d(0x10c)+_0x18600b),this[_0x3ab72d(0xe1)],this[_0x3ab72d(0xdb)]),_0xd67283=await this[_0x3ab72d(0xd7)][_0x3ab72d(0x109)](_0x31b330[_0x3ab72d(0xfe)]+_0x3ab72d(0xfa))[_0x3ab72d(0x10f)](_0x362093=>_0x362093['values']);return _0x31b330[_0x3ab72d(0xe8)]=(_0x22c57b=_0xd67283[_0x3ab72d(0xf7)](_0x335152=>_0x335152['isDefault']===!![]))===null||_0x22c57b===void 0x0?void 0x0:_0x22c57b[_0x3ab72d(0xce)],_0x31b330;}catch(_0x2f00ac){if(_0x2f00ac instanceof api_error_1[_0x3ab72d(0xc9)])throw _0x2f00ac;throw new not_found_error_1[(_0x3ab72d(0xf2))](_0x2f00ac);}}async[a238_0x33ec1a(0x100)](_0x36b3ba,_0x204bb7){const _0x1a8271=a238_0x33ec1a;try{const _0x10fd18=await this[_0x1a8271(0xd7)][_0x1a8271(0x106)](_0x1a8271(0x105)+this['project']+_0x1a8271(0x10c)+_0x36b3ba,_0x204bb7),_0x327511=await this[_0x1a8271(0xd7)][_0x1a8271(0x109)](_0x1a8271(0x105)+this[_0x1a8271(0xf5)]+_0x1a8271(0x10c)+_0x36b3ba+_0x1a8271(0x107)),_0x513718=repo_class_1[_0x1a8271(0xe6)][_0x1a8271(0xfd)](_0x10fd18,(0x0,utils_1[_0x1a8271(0xd4)])(this[_0x1a8271(0xd7)][_0x1a8271(0xc5)][_0x1a8271(0xf1)]||'','/projects/'+this[_0x1a8271(0xf5)]+'/repos/'+_0x36b3ba),this[_0x1a8271(0xe1)],this[_0x1a8271(0xdb)]);return _0x513718[_0x1a8271(0xe8)]=_0x327511[_0x1a8271(0xce)],_0x513718;}catch(_0x8f4ca9){if(_0x8f4ca9 instanceof api_error_1[_0x1a8271(0xc9)])throw _0x8f4ca9;throw new not_found_error_1['NotFoundError'](_0x8f4ca9);}}async[a238_0x33ec1a(0xc6)](_0x637d2b){const _0x198dce=a238_0x33ec1a;try{await this[_0x198dce(0xd5)](_0x637d2b),await this[_0x198dce(0xd7)]['delete'](_0x198dce(0x105)+this[_0x198dce(0xf5)]+_0x198dce(0x10c)+_0x637d2b);}catch(_0x510de7){if(_0x510de7 instanceof api_error_1[_0x198dce(0xc9)])throw _0x510de7;throw new bad_request_error_1['BadRequestError'](_0x510de7);}}};function a238_0x5413(){const _0x5a1a79=['typedi','../../providers.tokens','getOwnPropertyDescriptor','function','api','1506076jcYdby','nextPageStart','BitbucketServerRepoService','__metadata','Repo','/repos','defaultBranch','(((.+)+)+)+$','35164701mCbzQC','length','331924kLKhMm','name','object','../../../../../core/errors/bad-request.error','__esModule','baseURL','NotFoundError','Inject','git','project','values','find','isLastPage','master','/branches','../../../internal/git.internal','metadata','fromBitbucketServer','apiUrl','../../api/bitbucket-server-api.service','update','5058606cJvfOF','slug','Tokens','39wqPkjc','projects/','put','/default-branch','create','get','map','798GzkvBR','/repos/','../repo.class','defineProperty','then','defaults','delete','1405CkxCiw','Service','ApiError','getAll','13673296cBuzcJ','../../../../../core/errors/not-found.error','BitbucketServerApiService','displayId','apiBody','/projects/','design:paramtypes','search','3333486CSoqtJ','joinURL','getOne','decorate','request','../../credentials/dto/bitbucket-server-credentials.dto','toString','BitbucketServerCredentialsDto','credentials','__param'];a238_0x5413=function(){return _0x5a1a79;};return a238_0x5413();}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a238_0x33ec1a(0xc8)])(),__param(0x1,(0x0,typedi_1[a238_0x33ec1a(0xf3)])(providers_tokens_1[a238_0x33ec1a(0x103)][a238_0x33ec1a(0xdb)])),__metadata(a238_0x33ec1a(0xd1),[bitbucket_server_api_service_1[a238_0x33ec1a(0xcd)],bitbucket_server_credentials_dto_1[a238_0x33ec1a(0xda)]])],BitbucketServerRepoService),exports[a238_0x33ec1a(0xe4)]=BitbucketServerRepoService;