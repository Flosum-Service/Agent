const a227_0x432a3f=a227_0x1d90;(function(_0x3b322a,_0x2401b1){const _0x1c7de6=a227_0x1d90,_0xb3beea=_0x3b322a();while(!![]){try{const _0x3cfc44=-parseInt(_0x1c7de6(0xce))/0x1*(-parseInt(_0x1c7de6(0xfc))/0x2)+-parseInt(_0x1c7de6(0xca))/0x3*(-parseInt(_0x1c7de6(0xe5))/0x4)+parseInt(_0x1c7de6(0xf2))/0x5+parseInt(_0x1c7de6(0x102))/0x6*(-parseInt(_0x1c7de6(0xf5))/0x7)+parseInt(_0x1c7de6(0xd8))/0x8*(-parseInt(_0x1c7de6(0xeb))/0x9)+-parseInt(_0x1c7de6(0xe9))/0xa+parseInt(_0x1c7de6(0x103))/0xb;if(_0x3cfc44===_0x2401b1)break;else _0xb3beea['push'](_0xb3beea['shift']());}catch(_0x122a5a){_0xb3beea['push'](_0xb3beea['shift']());}}}(a227_0x56a4,0x863f3));const a227_0x157d10=(function(){let _0x4382c8=!![];return function(_0x2697a0,_0x553eb6){const _0x7031bc=_0x4382c8?function(){const _0x502f08=a227_0x1d90;if(_0x553eb6){const _0x3947a3=_0x553eb6[_0x502f08(0xee)](_0x2697a0,arguments);return _0x553eb6=null,_0x3947a3;}}:function(){};return _0x4382c8=![],_0x7031bc;};}()),a227_0x50d984=a227_0x157d10(this,function(){const _0x399089=a227_0x1d90;return a227_0x50d984[_0x399089(0xed)]()[_0x399089(0xe7)]('(((.+)+)+)+$')[_0x399089(0xed)]()[_0x399089(0xc9)](a227_0x50d984)['search'](_0x399089(0xf1));});a227_0x50d984();function a227_0x1d90(_0x58203c,_0x611d1f){const _0x54843b=a227_0x56a4();return a227_0x1d90=function(_0x50d984,_0x157d10){_0x50d984=_0x50d984-0xba;let _0x56a40c=_0x54843b[_0x50d984];return _0x56a40c;},a227_0x1d90(_0x58203c,_0x611d1f);}'use strict';var __decorate=this&&this[a227_0x432a3f(0xef)]||function(_0x47ad3d,_0x148618,_0x5d8b4a,_0x49061f){const _0x1481d6=a227_0x432a3f;var _0x3e15c7=arguments[_0x1481d6(0xd4)],_0x243580=_0x3e15c7<0x3?_0x148618:_0x49061f===null?_0x49061f=Object[_0x1481d6(0xe3)](_0x148618,_0x5d8b4a):_0x49061f,_0x52cae5;if(typeof Reflect===_0x1481d6(0x100)&&typeof Reflect[_0x1481d6(0x104)]==='function')_0x243580=Reflect[_0x1481d6(0x104)](_0x47ad3d,_0x148618,_0x5d8b4a,_0x49061f);else{for(var _0x20b628=_0x47ad3d['length']-0x1;_0x20b628>=0x0;_0x20b628--)if(_0x52cae5=_0x47ad3d[_0x20b628])_0x243580=(_0x3e15c7<0x3?_0x52cae5(_0x243580):_0x3e15c7>0x3?_0x52cae5(_0x148618,_0x5d8b4a,_0x243580):_0x52cae5(_0x148618,_0x5d8b4a))||_0x243580;}return _0x3e15c7>0x3&&_0x243580&&Object[_0x1481d6(0xe2)](_0x148618,_0x5d8b4a,_0x243580),_0x243580;},__metadata=this&&this[a227_0x432a3f(0xdc)]||function(_0x1e91ab,_0xbba42e){const _0x268c14=a227_0x432a3f;if(typeof Reflect===_0x268c14(0x100)&&typeof Reflect[_0x268c14(0xe8)]===_0x268c14(0xd3))return Reflect[_0x268c14(0xe8)](_0x1e91ab,_0xbba42e);},__param=this&&this['__param']||function(_0x2c2aaa,_0x39776e){return function(_0x669a87,_0x34c287){_0x39776e(_0x669a87,_0x34c287,_0x2c2aaa);};};function a227_0x56a4(){const _0x267854=['7McfMrt','delete','apiUrl','then','Repo','Tokens','get','291922fWWsis','baseURL','../../credentials/dto/bitbucket-server-credentials.dto','GitRepoService','object','../../api/bitbucket-server-api.service','5196222TaQknb','2223001tpAFkG','decorate','displayId','project','update','/repos/','createEmptyBranch','Service','BitbucketServerRepoService','defaults','create','put','fromBitbucketServer','post','../../providers.tokens','design:paramtypes','map','/projects/','apiBody','constructor','1809pFirqR','../../../../shared/utils','api','git','3SuBcSh','/branches','defaultBranch','/repos','getAll','function','length','push','joinURL','values','331184TWThBH','request','NotFoundError','isLastPage','__metadata','slug','typedi','../repo.class','credentials','../../../../../core/errors/bad-request.error','defineProperty','getOwnPropertyDescriptor','projects/','3324GNNFSD','../../../../../core/errors/api.error','search','metadata','1328910EcyMCN','ApiError','135uXjVwa','../../../../../core/errors/not-found.error','toString','apply','__decorate','isDefault','(((.+)+)+)+$','5143530jFXidX','BadRequestError','autoInit'];a227_0x56a4=function(){return _0x267854;};return a227_0x56a4();}Object[a227_0x432a3f(0xe2)](exports,'__esModule',{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a227_0x432a3f(0xe1)),not_found_error_1=require(a227_0x432a3f(0xec)),typedi_1=require(a227_0x432a3f(0xde)),api_error_1=require(a227_0x432a3f(0xe6)),bitbucket_server_api_service_1=require(a227_0x432a3f(0x101)),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a227_0x432a3f(0xcb)),repo_class_1=require(a227_0x432a3f(0xdf)),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a227_0x432a3f(0xc4)),bitbucket_server_credentials_dto_1=require(a227_0x432a3f(0xfe));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a227_0x432a3f(0xff)]{constructor(_0x5253c3,_0x5a8ffe){const _0x5ce43b=a227_0x432a3f;super(_0x5253c3),this[_0x5ce43b(0xcc)]=_0x5253c3,this[_0x5ce43b(0x106)]=_0x5a8ffe[_0x5ce43b(0x106)],this[_0x5ce43b(0xe0)]=_0x5a8ffe;}async[a227_0x432a3f(0xc0)](_0x11b2de){const _0x50bed3=a227_0x432a3f;try{const _0x30723a={'name':_0x11b2de['name'],'scmId':_0x50bed3(0xcd),'defaultBranch':_0x11b2de[_0x50bed3(0xd0)],..._0x11b2de[_0x50bed3(0xc8)]||{}},_0x48d4a4=await this[_0x50bed3(0xd9)][_0x50bed3(0xc3)]('projects/'+this[_0x50bed3(0x106)]+_0x50bed3(0xd1),_0x30723a),_0x5e9574=repo_class_1['Repo'][_0x50bed3(0xc2)](_0x48d4a4,'',this[_0x50bed3(0xcc)],this[_0x50bed3(0xe0)]);return _0x11b2de[_0x50bed3(0xf4)]&&await git_internal_1['Git'][_0x50bed3(0xbc)](_0x5e9574,_0x11b2de[_0x50bed3(0xd0)]||'master','',this[_0x50bed3(0xe0)]),this['getOne'](_0x5e9574['name']);}catch(_0x505247){if(_0x505247 instanceof api_error_1[_0x50bed3(0xea)])throw _0x505247;throw new bad_request_error_1['BadRequestError'](_0x505247);}}async[a227_0x432a3f(0xd2)](){const _0x514df5=a227_0x432a3f;try{const _0xb1c64e=[];let _0x31a087;do{_0x31a087=await this['request'][_0x514df5(0xfb)]('projects/'+this[_0x514df5(0x106)]+_0x514df5(0xd1),{'params':{'limit':0x64,'start':_0x31a087?_0x31a087['nextPageStart']:0x0}}),_0xb1c64e[_0x514df5(0xd5)](..._0x31a087[_0x514df5(0xd7)]);}while(!_0x31a087[_0x514df5(0xdb)]);return _0xb1c64e[_0x514df5(0xc6)](_0x5ab8a1=>repo_class_1['Repo'][_0x514df5(0xc2)](_0x5ab8a1,(0x0,utils_1[_0x514df5(0xd6)])(this[_0x514df5(0xd9)][_0x514df5(0xbf)][_0x514df5(0xfd)]||'','/projects/'+this[_0x514df5(0x106)]+'/repos/'+_0x5ab8a1[_0x514df5(0xdd)]),this[_0x514df5(0xcc)],this[_0x514df5(0xe0)]));}catch(_0x7dd9d4){if(_0x7dd9d4 instanceof api_error_1[_0x514df5(0xea)])throw _0x7dd9d4;throw new not_found_error_1[(_0x514df5(0xda))](_0x7dd9d4);}}async['getOne'](_0xc95fc4){const _0x510485=a227_0x432a3f;var _0x1208d5;try{const _0x33ee67=await this[_0x510485(0xd9)][_0x510485(0xfb)]('projects/'+this[_0x510485(0x106)]+_0x510485(0xbb)+_0xc95fc4),_0x473a80=repo_class_1[_0x510485(0xf9)][_0x510485(0xc2)](_0x33ee67,(0x0,utils_1['joinURL'])(this['request']['defaults'][_0x510485(0xfd)]||'',_0x510485(0xc7)+this[_0x510485(0x106)]+_0x510485(0xbb)+_0xc95fc4),this[_0x510485(0xcc)],this['credentials']),_0x42b852=await this[_0x510485(0xd9)]['get'](_0x473a80[_0x510485(0xf7)]+_0x510485(0xcf))[_0x510485(0xf8)](_0x14d562=>_0x14d562['values']);return _0x473a80[_0x510485(0xd0)]=(_0x1208d5=_0x42b852['find'](_0x48f713=>_0x48f713[_0x510485(0xf0)]===!![]))===null||_0x1208d5===void 0x0?void 0x0:_0x1208d5[_0x510485(0x105)],_0x473a80;}catch(_0x19f0eb){if(_0x19f0eb instanceof api_error_1[_0x510485(0xea)])throw _0x19f0eb;throw new not_found_error_1[(_0x510485(0xda))](_0x19f0eb);}}async[a227_0x432a3f(0xba)](_0x3cf8e7,_0x45a313){const _0x346379=a227_0x432a3f;try{const _0x2efd72=await this[_0x346379(0xd9)][_0x346379(0xc1)](_0x346379(0xe4)+this['project']+_0x346379(0xbb)+_0x3cf8e7,_0x45a313),_0x1b123f=await this[_0x346379(0xd9)][_0x346379(0xfb)]('projects/'+this['project']+_0x346379(0xbb)+_0x3cf8e7+'/default-branch'),_0x1221c0=repo_class_1[_0x346379(0xf9)][_0x346379(0xc2)](_0x2efd72,(0x0,utils_1['joinURL'])(this[_0x346379(0xd9)][_0x346379(0xbf)]['baseURL']||'',_0x346379(0xc7)+this[_0x346379(0x106)]+_0x346379(0xbb)+_0x3cf8e7),this[_0x346379(0xcc)],this[_0x346379(0xe0)]);return _0x1221c0[_0x346379(0xd0)]=_0x1b123f[_0x346379(0x105)],_0x1221c0;}catch(_0x2031e6){if(_0x2031e6 instanceof api_error_1['ApiError'])throw _0x2031e6;throw new not_found_error_1[(_0x346379(0xda))](_0x2031e6);}}async['delete'](_0x4d6c82){const _0x58559f=a227_0x432a3f;try{await this['getOne'](_0x4d6c82),await this[_0x58559f(0xd9)][_0x58559f(0xf6)](_0x58559f(0xe4)+this[_0x58559f(0x106)]+_0x58559f(0xbb)+_0x4d6c82);}catch(_0x284045){if(_0x284045 instanceof api_error_1[_0x58559f(0xea)])throw _0x284045;throw new bad_request_error_1[(_0x58559f(0xf3))](_0x284045);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a227_0x432a3f(0xbd)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a227_0x432a3f(0xfa)][a227_0x432a3f(0xe0)])),__metadata(a227_0x432a3f(0xc5),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a227_0x432a3f(0xbe)]=BitbucketServerRepoService;