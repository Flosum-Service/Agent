const a206_0x469f5a=a206_0x5512;(function(_0x16e35e,_0x3219ff){const _0x2317ec=a206_0x5512,_0x3e87be=_0x16e35e();while(!![]){try{const _0x5be8ae=parseInt(_0x2317ec(0x15f))/0x1+parseInt(_0x2317ec(0x119))/0x2*(parseInt(_0x2317ec(0x134))/0x3)+-parseInt(_0x2317ec(0x13f))/0x4*(parseInt(_0x2317ec(0x145))/0x5)+parseInt(_0x2317ec(0x15b))/0x6+-parseInt(_0x2317ec(0x154))/0x7+-parseInt(_0x2317ec(0x11a))/0x8*(parseInt(_0x2317ec(0x126))/0x9)+parseInt(_0x2317ec(0x142))/0xa;if(_0x5be8ae===_0x3219ff)break;else _0x3e87be['push'](_0x3e87be['shift']());}catch(_0x345b3d){_0x3e87be['push'](_0x3e87be['shift']());}}}(a206_0x2444,0xd6ab8));const a206_0x2e6d6f=(function(){let _0x4e4d6e=!![];return function(_0x3e3411,_0x55dd4f){const _0x4d2732=_0x4e4d6e?function(){const _0x521076=a206_0x5512;if(_0x55dd4f){const _0x2d9a1f=_0x55dd4f[_0x521076(0x125)](_0x3e3411,arguments);return _0x55dd4f=null,_0x2d9a1f;}}:function(){};return _0x4e4d6e=![],_0x4d2732;};}()),a206_0x730028=a206_0x2e6d6f(this,function(){const _0xf995d=a206_0x5512;return a206_0x730028[_0xf995d(0x144)]()[_0xf995d(0x159)]('(((.+)+)+)+$')[_0xf995d(0x144)]()[_0xf995d(0x11b)](a206_0x730028)[_0xf995d(0x159)]('(((.+)+)+)+$');});a206_0x730028();'use strict';function a206_0x2444(){const _0x3cf2fc=['design:paramtypes','../../../../shared/utils','defineProperty','apply','30681eHgcQS','request','fromBitbucketServer','length','update','baseURL','function','Git','/repos/','createEmptyBranch','../../../internal/git.internal','/repos','git','../../../../../core/errors/bad-request.error','4940043nmYhpe','GitRepoService','../../credentials/dto/bitbucket-server-credentials.dto','displayId','/projects/','project','create','__metadata','name','master','autoInit','6356172VlIwsV','Repo','post','10959200uyxNuj','apiBody','toString','5sSOutg','map','find','get','../../providers.tokens','../../../../../core/errors/api.error','../../../../../core/errors/not-found.error','values','Tokens','metadata','__esModule','defaults','NotFoundError','getOwnPropertyDescriptor','delete','9038680mRzHjE','joinURL','credentials','push','__param','search','__decorate','8958810YJboaw','isDefault','defaultBranch','projects/','529490Ebrumy','getOne','decorate','object','ApiError','2tdijtJ','2360egsAhQ','constructor','apiUrl','getAll','BitbucketServerRepoService','slug','api','../../api/bitbucket-server-api.service'];a206_0x2444=function(){return _0x3cf2fc;};return a206_0x2444();}var __decorate=this&&this[a206_0x469f5a(0x15a)]||function(_0x53fff3,_0x5b4266,_0x332e81,_0x34457a){const _0x2bc866=a206_0x469f5a;var _0x28e4dc=arguments[_0x2bc866(0x129)],_0x4dcef0=_0x28e4dc<0x3?_0x5b4266:_0x34457a===null?_0x34457a=Object[_0x2bc866(0x152)](_0x5b4266,_0x332e81):_0x34457a,_0xefea11;if(typeof Reflect==='object'&&typeof Reflect[_0x2bc866(0x161)]===_0x2bc866(0x12c))_0x4dcef0=Reflect['decorate'](_0x53fff3,_0x5b4266,_0x332e81,_0x34457a);else{for(var _0x5dcd9a=_0x53fff3[_0x2bc866(0x129)]-0x1;_0x5dcd9a>=0x0;_0x5dcd9a--)if(_0xefea11=_0x53fff3[_0x5dcd9a])_0x4dcef0=(_0x28e4dc<0x3?_0xefea11(_0x4dcef0):_0x28e4dc>0x3?_0xefea11(_0x5b4266,_0x332e81,_0x4dcef0):_0xefea11(_0x5b4266,_0x332e81))||_0x4dcef0;}return _0x28e4dc>0x3&&_0x4dcef0&&Object[_0x2bc866(0x124)](_0x5b4266,_0x332e81,_0x4dcef0),_0x4dcef0;},__metadata=this&&this[a206_0x469f5a(0x13b)]||function(_0x1f171b,_0x506d13){const _0x2306ee=a206_0x469f5a;if(typeof Reflect===_0x2306ee(0x162)&&typeof Reflect[_0x2306ee(0x14e)]===_0x2306ee(0x12c))return Reflect[_0x2306ee(0x14e)](_0x1f171b,_0x506d13);},__param=this&&this[a206_0x469f5a(0x158)]||function(_0x82ee3d,_0x248138){return function(_0x2697ec,_0x1d2fa7){_0x248138(_0x2697ec,_0x1d2fa7,_0x82ee3d);};};Object[a206_0x469f5a(0x124)](exports,a206_0x469f5a(0x14f),{'value':!![]}),exports[a206_0x469f5a(0x11e)]=void 0x0;const bad_request_error_1=require(a206_0x469f5a(0x133)),not_found_error_1=require(a206_0x469f5a(0x14b)),typedi_1=require('typedi'),api_error_1=require(a206_0x469f5a(0x14a)),bitbucket_server_api_service_1=require(a206_0x469f5a(0x121)),git_internal_1=require(a206_0x469f5a(0x130)),utils_1=require(a206_0x469f5a(0x123)),repo_class_1=require('../repo.class'),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a206_0x469f5a(0x149)),bitbucket_server_credentials_dto_1=require(a206_0x469f5a(0x136));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a206_0x469f5a(0x135)]{constructor(_0x5caed1,_0x4cc87b){const _0x426fab=a206_0x469f5a;super(_0x5caed1),this[_0x426fab(0x120)]=_0x5caed1,this['project']=_0x4cc87b[_0x426fab(0x139)],this[_0x426fab(0x156)]=_0x4cc87b;}async[a206_0x469f5a(0x13a)](_0x1b7d59){const _0x28401a=a206_0x469f5a;try{const _0x57db71={'name':_0x1b7d59[_0x28401a(0x13c)],'scmId':_0x28401a(0x132),'defaultBranch':_0x1b7d59[_0x28401a(0x15d)],..._0x1b7d59[_0x28401a(0x143)]||{}},_0x51b0cb=await this[_0x28401a(0x127)][_0x28401a(0x141)](_0x28401a(0x15e)+this[_0x28401a(0x139)]+_0x28401a(0x131),_0x57db71),_0xa4681c=repo_class_1[_0x28401a(0x140)][_0x28401a(0x128)](_0x51b0cb,'',this[_0x28401a(0x120)],this[_0x28401a(0x156)]);return _0x1b7d59[_0x28401a(0x13e)]&&await git_internal_1[_0x28401a(0x12d)][_0x28401a(0x12f)](_0xa4681c,_0x1b7d59[_0x28401a(0x15d)]||_0x28401a(0x13d),'',this[_0x28401a(0x156)]),this['getOne'](_0xa4681c['name']);}catch(_0x2534e8){if(_0x2534e8 instanceof api_error_1[_0x28401a(0x163)])throw _0x2534e8;throw new bad_request_error_1['BadRequestError'](_0x2534e8);}}async[a206_0x469f5a(0x11d)](){const _0x4ffa6a=a206_0x469f5a;try{const _0x8dbc1c=[];let _0x59f319;do{_0x59f319=await this[_0x4ffa6a(0x127)][_0x4ffa6a(0x148)]('projects/'+this[_0x4ffa6a(0x139)]+_0x4ffa6a(0x131),{'params':{'limit':0x64,'start':_0x59f319?_0x59f319['nextPageStart']:0x0}}),_0x8dbc1c[_0x4ffa6a(0x157)](..._0x59f319[_0x4ffa6a(0x14c)]);}while(!_0x59f319['isLastPage']);return _0x8dbc1c[_0x4ffa6a(0x146)](_0x1a7751=>repo_class_1[_0x4ffa6a(0x140)]['fromBitbucketServer'](_0x1a7751,(0x0,utils_1[_0x4ffa6a(0x155)])(this['request']['defaults']['baseURL']||'','/projects/'+this[_0x4ffa6a(0x139)]+'/repos/'+_0x1a7751[_0x4ffa6a(0x11f)]),this['api'],this['credentials']));}catch(_0x3ee34a){if(_0x3ee34a instanceof api_error_1[_0x4ffa6a(0x163)])throw _0x3ee34a;throw new not_found_error_1[(_0x4ffa6a(0x151))](_0x3ee34a);}}async['getOne'](_0x55d84d){const _0x209264=a206_0x469f5a;var _0x24c85f;try{const _0x229a3c=await this[_0x209264(0x127)][_0x209264(0x148)](_0x209264(0x15e)+this[_0x209264(0x139)]+_0x209264(0x12e)+_0x55d84d),_0x1eab76=repo_class_1[_0x209264(0x140)][_0x209264(0x128)](_0x229a3c,(0x0,utils_1['joinURL'])(this[_0x209264(0x127)][_0x209264(0x150)][_0x209264(0x12b)]||'',_0x209264(0x138)+this[_0x209264(0x139)]+_0x209264(0x12e)+_0x55d84d),this[_0x209264(0x120)],this['credentials']),_0x358df6=await this[_0x209264(0x127)][_0x209264(0x148)](_0x1eab76[_0x209264(0x11c)]+'/branches')['then'](_0x48dd14=>_0x48dd14[_0x209264(0x14c)]);return _0x1eab76['defaultBranch']=(_0x24c85f=_0x358df6[_0x209264(0x147)](_0x3071c4=>_0x3071c4[_0x209264(0x15c)]===!![]))===null||_0x24c85f===void 0x0?void 0x0:_0x24c85f[_0x209264(0x137)],_0x1eab76;}catch(_0x2af3c4){if(_0x2af3c4 instanceof api_error_1[_0x209264(0x163)])throw _0x2af3c4;throw new not_found_error_1[(_0x209264(0x151))](_0x2af3c4);}}async[a206_0x469f5a(0x12a)](_0x52d966,_0x39b093){const _0x17ea45=a206_0x469f5a;try{const _0x1e86ff=await this[_0x17ea45(0x127)]['put'](_0x17ea45(0x15e)+this[_0x17ea45(0x139)]+_0x17ea45(0x12e)+_0x52d966,_0x39b093),_0x486b5a=await this[_0x17ea45(0x127)][_0x17ea45(0x148)](_0x17ea45(0x15e)+this[_0x17ea45(0x139)]+'/repos/'+_0x52d966+'/default-branch'),_0x267353=repo_class_1['Repo'][_0x17ea45(0x128)](_0x1e86ff,(0x0,utils_1[_0x17ea45(0x155)])(this[_0x17ea45(0x127)][_0x17ea45(0x150)][_0x17ea45(0x12b)]||'',_0x17ea45(0x138)+this[_0x17ea45(0x139)]+_0x17ea45(0x12e)+_0x52d966),this[_0x17ea45(0x120)],this[_0x17ea45(0x156)]);return _0x267353['defaultBranch']=_0x486b5a[_0x17ea45(0x137)],_0x267353;}catch(_0x3d9f48){if(_0x3d9f48 instanceof api_error_1[_0x17ea45(0x163)])throw _0x3d9f48;throw new not_found_error_1[(_0x17ea45(0x151))](_0x3d9f48);}}async['delete'](_0x41a6ec){const _0x400cef=a206_0x469f5a;try{await this[_0x400cef(0x160)](_0x41a6ec),await this['request'][_0x400cef(0x153)](_0x400cef(0x15e)+this[_0x400cef(0x139)]+_0x400cef(0x12e)+_0x41a6ec);}catch(_0x10a42d){if(_0x10a42d instanceof api_error_1[_0x400cef(0x163)])throw _0x10a42d;throw new bad_request_error_1['BadRequestError'](_0x10a42d);}}};function a206_0x5512(_0x54ef09,_0x2ee5fb){const _0x304c13=a206_0x2444();return a206_0x5512=function(_0x730028,_0x2e6d6f){_0x730028=_0x730028-0x119;let _0x2444d2=_0x304c13[_0x730028];return _0x2444d2;},a206_0x5512(_0x54ef09,_0x2ee5fb);}BitbucketServerRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a206_0x469f5a(0x14d)][a206_0x469f5a(0x156)])),__metadata(a206_0x469f5a(0x122),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;