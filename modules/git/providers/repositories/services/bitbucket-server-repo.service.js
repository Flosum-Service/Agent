const a200_0x1fb97f=a200_0x32e3;(function(_0x3d20d4,_0x1a4c3f){const _0xe07d69=a200_0x32e3,_0x54da22=_0x3d20d4();while(!![]){try{const _0x29c3ed=parseInt(_0xe07d69(0x1c7))/0x1*(-parseInt(_0xe07d69(0x1b2))/0x2)+parseInt(_0xe07d69(0x1a4))/0x3+parseInt(_0xe07d69(0x18b))/0x4*(-parseInt(_0xe07d69(0x19f))/0x5)+-parseInt(_0xe07d69(0x197))/0x6*(-parseInt(_0xe07d69(0x1b9))/0x7)+parseInt(_0xe07d69(0x1a5))/0x8+-parseInt(_0xe07d69(0x1a7))/0x9+-parseInt(_0xe07d69(0x1bd))/0xa*(-parseInt(_0xe07d69(0x1b0))/0xb);if(_0x29c3ed===_0x1a4c3f)break;else _0x54da22['push'](_0x54da22['shift']());}catch(_0x4a9aec){_0x54da22['push'](_0x54da22['shift']());}}}(a200_0x13ed,0xa02c5));const a200_0x445739=(function(){let _0x444b9e=!![];return function(_0x4f3d8d,_0x4e4e16){const _0x582889=_0x444b9e?function(){const _0x2dd426=a200_0x32e3;if(_0x4e4e16){const _0x4e316e=_0x4e4e16[_0x2dd426(0x18e)](_0x4f3d8d,arguments);return _0x4e4e16=null,_0x4e316e;}}:function(){};return _0x444b9e=![],_0x582889;};}()),a200_0x5d9464=a200_0x445739(this,function(){const _0x50624e=a200_0x32e3;return a200_0x5d9464[_0x50624e(0x194)]()['search'](_0x50624e(0x1bc))[_0x50624e(0x194)]()[_0x50624e(0x1aa)](a200_0x5d9464)[_0x50624e(0x1cc)](_0x50624e(0x1bc));});function a200_0x32e3(_0xd3ef2c,_0x47c5b4){const _0x39eafe=a200_0x13ed();return a200_0x32e3=function(_0x5d9464,_0x445739){_0x5d9464=_0x5d9464-0x189;let _0x13ed26=_0x39eafe[_0x5d9464];return _0x13ed26;},a200_0x32e3(_0xd3ef2c,_0x47c5b4);}a200_0x5d9464();'use strict';var __decorate=this&&this[a200_0x1fb97f(0x1ba)]||function(_0x4f1d47,_0x1a3def,_0x1d69b9,_0x4c9d15){const _0x1a9109=a200_0x1fb97f;var _0x205f4f=arguments[_0x1a9109(0x1a1)],_0x34f68e=_0x205f4f<0x3?_0x1a3def:_0x4c9d15===null?_0x4c9d15=Object[_0x1a9109(0x1a2)](_0x1a3def,_0x1d69b9):_0x4c9d15,_0x4d7af0;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x1a9109(0x189))_0x34f68e=Reflect['decorate'](_0x4f1d47,_0x1a3def,_0x1d69b9,_0x4c9d15);else{for(var _0x532b7a=_0x4f1d47['length']-0x1;_0x532b7a>=0x0;_0x532b7a--)if(_0x4d7af0=_0x4f1d47[_0x532b7a])_0x34f68e=(_0x205f4f<0x3?_0x4d7af0(_0x34f68e):_0x205f4f>0x3?_0x4d7af0(_0x1a3def,_0x1d69b9,_0x34f68e):_0x4d7af0(_0x1a3def,_0x1d69b9))||_0x34f68e;}return _0x205f4f>0x3&&_0x34f68e&&Object[_0x1a9109(0x1c3)](_0x1a3def,_0x1d69b9,_0x34f68e),_0x34f68e;},__metadata=this&&this[a200_0x1fb97f(0x1bf)]||function(_0x1f0027,_0x15977e){const _0x519fea=a200_0x1fb97f;if(typeof Reflect===_0x519fea(0x1af)&&typeof Reflect['metadata']===_0x519fea(0x189))return Reflect[_0x519fea(0x18a)](_0x1f0027,_0x15977e);},__param=this&&this[a200_0x1fb97f(0x1ae)]||function(_0x1a6af8,_0x60a8fc){return function(_0xcecd6,_0x104475){_0x60a8fc(_0xcecd6,_0x104475,_0x1a6af8);};};function a200_0x13ed(){const _0x13f99f=['push','2MrFZkr','projects/','typedi','/default-branch','request','__esModule','getOne','4193gobZQG','__decorate','../../../../../core/errors/bad-request.error','(((.+)+)+)+$','40aiTUQi','git','__metadata','project','autoInit','name','defineProperty','master','fromBitbucketServer','ApiError','827355XCKMQR','Repo','apiUrl','../../../internal/git.internal','map','search','api','createEmptyBranch','isLastPage','./git-repo.service','slug','BitbucketServerApiService','Service','function','metadata','4aGhxIb','delete','then','apply','credentials','/repos','values','/projects/','NotFoundError','toString','/repos/','design:paramtypes','6516GXFhDB','find','baseURL','nextPageStart','defaultBranch','update','create','../../../../../core/errors/not-found.error','2397990pOwUwF','get','length','getOwnPropertyDescriptor','getAll','1396728bgpDNp','8398632eQizhu','../../api/bitbucket-server-api.service','3446901ipsLFW','GitRepoService','joinURL','constructor','../../../../shared/utils','isDefault','Git','__param','object','495253JJuaXX'];a200_0x13ed=function(){return _0x13f99f;};return a200_0x13ed();}Object['defineProperty'](exports,a200_0x1fb97f(0x1b7),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a200_0x1fb97f(0x1bb)),not_found_error_1=require(a200_0x1fb97f(0x19e)),typedi_1=require(a200_0x1fb97f(0x1b4)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a200_0x1fb97f(0x1a6)),git_internal_1=require(a200_0x1fb97f(0x1ca)),utils_1=require(a200_0x1fb97f(0x1ab)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a200_0x1fb97f(0x1d0)),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require('../../credentials/dto/bitbucket-server-credentials.dto');let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a200_0x1fb97f(0x1a8)]{constructor(_0x46deef,_0x1d288b){const _0x1aadb4=a200_0x1fb97f;super(_0x46deef),this[_0x1aadb4(0x1cd)]=_0x46deef,this[_0x1aadb4(0x1c0)]=_0x1d288b[_0x1aadb4(0x1c0)],this[_0x1aadb4(0x18f)]=_0x1d288b;}async[a200_0x1fb97f(0x19d)](_0x4c7d70){const _0x4263c7=a200_0x1fb97f;try{const _0x9d7d05={'name':_0x4c7d70[_0x4263c7(0x1c2)],'scmId':_0x4263c7(0x1be),'defaultBranch':_0x4c7d70['defaultBranch'],..._0x4c7d70['apiBody']||{}},_0x200ace=await this[_0x4263c7(0x1b6)]['post'](_0x4263c7(0x1b3)+this['project']+_0x4263c7(0x190),_0x9d7d05),_0x3b30ad=repo_class_1[_0x4263c7(0x1c8)][_0x4263c7(0x1c5)](_0x200ace,'',this[_0x4263c7(0x1cd)],this[_0x4263c7(0x18f)]);return _0x4c7d70[_0x4263c7(0x1c1)]&&await git_internal_1[_0x4263c7(0x1ad)][_0x4263c7(0x1ce)](_0x3b30ad,_0x4c7d70[_0x4263c7(0x19b)]||_0x4263c7(0x1c4),'',this['credentials']),this[_0x4263c7(0x1b8)](_0x3b30ad[_0x4263c7(0x1c2)]);}catch(_0x1c6292){if(_0x1c6292 instanceof api_error_1[_0x4263c7(0x1c6)])throw _0x1c6292;throw new bad_request_error_1['BadRequestError'](_0x1c6292);}}async[a200_0x1fb97f(0x1a3)](){const _0x36a2cd=a200_0x1fb97f;try{const _0x5c437d=[];let _0x3f80c2;do{_0x3f80c2=await this[_0x36a2cd(0x1b6)][_0x36a2cd(0x1a0)](_0x36a2cd(0x1b3)+this[_0x36a2cd(0x1c0)]+'/repos',{'params':{'limit':0x64,'start':_0x3f80c2?_0x3f80c2[_0x36a2cd(0x19a)]:0x0}}),_0x5c437d[_0x36a2cd(0x1b1)](..._0x3f80c2[_0x36a2cd(0x191)]);}while(!_0x3f80c2[_0x36a2cd(0x1cf)]);return _0x5c437d[_0x36a2cd(0x1cb)](_0x934e9=>repo_class_1[_0x36a2cd(0x1c8)]['fromBitbucketServer'](_0x934e9,(0x0,utils_1[_0x36a2cd(0x1a9)])(this['request']['defaults'][_0x36a2cd(0x199)]||'',_0x36a2cd(0x192)+this[_0x36a2cd(0x1c0)]+_0x36a2cd(0x195)+_0x934e9[_0x36a2cd(0x1d1)]),this[_0x36a2cd(0x1cd)],this[_0x36a2cd(0x18f)]));}catch(_0x528798){if(_0x528798 instanceof api_error_1[_0x36a2cd(0x1c6)])throw _0x528798;throw new not_found_error_1[(_0x36a2cd(0x193))](_0x528798);}}async['getOne'](_0x297ab3){const _0x402c6a=a200_0x1fb97f;var _0x383f54;try{const _0x5f9db9=await this[_0x402c6a(0x1b6)][_0x402c6a(0x1a0)](_0x402c6a(0x1b3)+this[_0x402c6a(0x1c0)]+_0x402c6a(0x195)+_0x297ab3),_0x45ea10=repo_class_1['Repo'][_0x402c6a(0x1c5)](_0x5f9db9,(0x0,utils_1[_0x402c6a(0x1a9)])(this[_0x402c6a(0x1b6)]['defaults']['baseURL']||'',_0x402c6a(0x192)+this[_0x402c6a(0x1c0)]+_0x402c6a(0x195)+_0x297ab3),this[_0x402c6a(0x1cd)],this[_0x402c6a(0x18f)]),_0x49506f=await this[_0x402c6a(0x1b6)]['get'](_0x45ea10[_0x402c6a(0x1c9)]+'/branches')[_0x402c6a(0x18d)](_0x4ef3d8=>_0x4ef3d8[_0x402c6a(0x191)]);return _0x45ea10['defaultBranch']=(_0x383f54=_0x49506f[_0x402c6a(0x198)](_0x1690de=>_0x1690de[_0x402c6a(0x1ac)]===!![]))===null||_0x383f54===void 0x0?void 0x0:_0x383f54['displayId'],_0x45ea10;}catch(_0x8bc9a4){if(_0x8bc9a4 instanceof api_error_1[_0x402c6a(0x1c6)])throw _0x8bc9a4;throw new not_found_error_1[(_0x402c6a(0x193))](_0x8bc9a4);}}async[a200_0x1fb97f(0x19c)](_0x55d148,_0x5a1559){const _0x4af4fe=a200_0x1fb97f;try{const _0x337514=await this[_0x4af4fe(0x1b6)]['put'](_0x4af4fe(0x1b3)+this[_0x4af4fe(0x1c0)]+_0x4af4fe(0x195)+_0x55d148,_0x5a1559),_0x517c1a=await this[_0x4af4fe(0x1b6)][_0x4af4fe(0x1a0)](_0x4af4fe(0x1b3)+this[_0x4af4fe(0x1c0)]+_0x4af4fe(0x195)+_0x55d148+_0x4af4fe(0x1b5)),_0x1d55fb=repo_class_1['Repo'][_0x4af4fe(0x1c5)](_0x337514,(0x0,utils_1['joinURL'])(this[_0x4af4fe(0x1b6)]['defaults'][_0x4af4fe(0x199)]||'',_0x4af4fe(0x192)+this[_0x4af4fe(0x1c0)]+_0x4af4fe(0x195)+_0x55d148),this[_0x4af4fe(0x1cd)],this[_0x4af4fe(0x18f)]);return _0x1d55fb['defaultBranch']=_0x517c1a['displayId'],_0x1d55fb;}catch(_0x2ef413){if(_0x2ef413 instanceof api_error_1[_0x4af4fe(0x1c6)])throw _0x2ef413;throw new not_found_error_1[(_0x4af4fe(0x193))](_0x2ef413);}}async[a200_0x1fb97f(0x18c)](_0x309b35){const _0x5cabdd=a200_0x1fb97f;try{await this[_0x5cabdd(0x1b8)](_0x309b35),await this[_0x5cabdd(0x1b6)]['delete'](_0x5cabdd(0x1b3)+this['project']+_0x5cabdd(0x195)+_0x309b35);}catch(_0x339958){if(_0x339958 instanceof api_error_1[_0x5cabdd(0x1c6)])throw _0x339958;throw new bad_request_error_1['BadRequestError'](_0x339958);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a200_0x1fb97f(0x1d3)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1['Tokens'][a200_0x1fb97f(0x18f)])),__metadata(a200_0x1fb97f(0x196),[bitbucket_server_api_service_1[a200_0x1fb97f(0x1d2)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;