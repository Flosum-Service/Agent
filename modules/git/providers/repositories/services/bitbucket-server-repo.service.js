const a237_0x54eb3a=a237_0x4954;function a237_0x4954(_0x577172,_0x127792){const _0x30c8c6=a237_0x10b2();return a237_0x4954=function(_0x2a5a63,_0x42b255){_0x2a5a63=_0x2a5a63-0xfb;let _0x10b284=_0x30c8c6[_0x2a5a63];return _0x10b284;},a237_0x4954(_0x577172,_0x127792);}(function(_0x50f178,_0x154909){const _0x5a06bc=a237_0x4954,_0x16fe1f=_0x50f178();while(!![]){try{const _0x1928cd=parseInt(_0x5a06bc(0x134))/0x1*(-parseInt(_0x5a06bc(0x110))/0x2)+-parseInt(_0x5a06bc(0x10c))/0x3*(parseInt(_0x5a06bc(0x140))/0x4)+parseInt(_0x5a06bc(0x118))/0x5*(-parseInt(_0x5a06bc(0xfb))/0x6)+-parseInt(_0x5a06bc(0x119))/0x7*(parseInt(_0x5a06bc(0x124))/0x8)+parseInt(_0x5a06bc(0x144))/0x9*(parseInt(_0x5a06bc(0x121))/0xa)+parseInt(_0x5a06bc(0x10a))/0xb*(-parseInt(_0x5a06bc(0x139))/0xc)+parseInt(_0x5a06bc(0x141))/0xd;if(_0x1928cd===_0x154909)break;else _0x16fe1f['push'](_0x16fe1f['shift']());}catch(_0x37dbbd){_0x16fe1f['push'](_0x16fe1f['shift']());}}}(a237_0x10b2,0xc6a91));const a237_0x42b255=(function(){let _0x3600bd=!![];return function(_0x3bf760,_0x2079cd){const _0x252c7b=_0x3600bd?function(){if(_0x2079cd){const _0x426e16=_0x2079cd['apply'](_0x3bf760,arguments);return _0x2079cd=null,_0x426e16;}}:function(){};return _0x3600bd=![],_0x252c7b;};}()),a237_0x2a5a63=a237_0x42b255(this,function(){const _0x3694cc=a237_0x4954;return a237_0x2a5a63[_0x3694cc(0xff)]()[_0x3694cc(0xfc)](_0x3694cc(0x122))[_0x3694cc(0xff)]()[_0x3694cc(0x133)](a237_0x2a5a63)[_0x3694cc(0xfc)](_0x3694cc(0x122));});a237_0x2a5a63();'use strict';var __decorate=this&&this[a237_0x54eb3a(0x100)]||function(_0x4f9779,_0x3be9ff,_0x306c33,_0x2fef1e){const _0x2bf069=a237_0x54eb3a;var _0x41e4f6=arguments['length'],_0x4576cc=_0x41e4f6<0x3?_0x3be9ff:_0x2fef1e===null?_0x2fef1e=Object[_0x2bf069(0x104)](_0x3be9ff,_0x306c33):_0x2fef1e,_0x466a41;if(typeof Reflect===_0x2bf069(0x12c)&&typeof Reflect[_0x2bf069(0x136)]===_0x2bf069(0x130))_0x4576cc=Reflect[_0x2bf069(0x136)](_0x4f9779,_0x3be9ff,_0x306c33,_0x2fef1e);else{for(var _0x3a4871=_0x4f9779[_0x2bf069(0x10d)]-0x1;_0x3a4871>=0x0;_0x3a4871--)if(_0x466a41=_0x4f9779[_0x3a4871])_0x4576cc=(_0x41e4f6<0x3?_0x466a41(_0x4576cc):_0x41e4f6>0x3?_0x466a41(_0x3be9ff,_0x306c33,_0x4576cc):_0x466a41(_0x3be9ff,_0x306c33))||_0x4576cc;}return _0x41e4f6>0x3&&_0x4576cc&&Object[_0x2bf069(0x132)](_0x3be9ff,_0x306c33,_0x4576cc),_0x4576cc;},__metadata=this&&this['__metadata']||function(_0x443a74,_0x174276){const _0x375220=a237_0x54eb3a;if(typeof Reflect===_0x375220(0x12c)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x443a74,_0x174276);},__param=this&&this[a237_0x54eb3a(0xfe)]||function(_0x4f0fd8,_0x163e90){return function(_0x53958d,_0x469f80){_0x163e90(_0x53958d,_0x469f80,_0x4f0fd8);};};Object['defineProperty'](exports,a237_0x54eb3a(0x123),{'value':!![]}),exports[a237_0x54eb3a(0x143)]=void 0x0;const bad_request_error_1=require(a237_0x54eb3a(0x127)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a237_0x54eb3a(0x10e)),api_error_1=require(a237_0x54eb3a(0x113)),bitbucket_server_api_service_1=require(a237_0x54eb3a(0x109)),git_internal_1=require(a237_0x54eb3a(0x137)),utils_1=require(a237_0x54eb3a(0x126)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a237_0x54eb3a(0x106)),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require(a237_0x54eb3a(0x13f));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a237_0x54eb3a(0x11a)]{constructor(_0x4d333e,_0x42d5f8){const _0x4a9328=a237_0x54eb3a;super(_0x4d333e),this[_0x4a9328(0x10f)]=_0x4d333e,this[_0x4a9328(0x105)]=_0x42d5f8['project'],this[_0x4a9328(0x107)]=_0x42d5f8;}async['create'](_0x54b1fc){const _0x3ea7c4=a237_0x54eb3a;try{const _0x458a9a={'name':_0x54b1fc[_0x3ea7c4(0x115)],'scmId':_0x3ea7c4(0x10b),'defaultBranch':_0x54b1fc[_0x3ea7c4(0xfd)],..._0x54b1fc[_0x3ea7c4(0x142)]||{}},_0x2b98ce=await this['request'][_0x3ea7c4(0x12f)]('projects/'+this[_0x3ea7c4(0x105)]+_0x3ea7c4(0x11e),_0x458a9a),_0x396dae=repo_class_1[_0x3ea7c4(0x103)][_0x3ea7c4(0x13c)](_0x2b98ce,'',this[_0x3ea7c4(0x10f)],this[_0x3ea7c4(0x107)]);return _0x54b1fc[_0x3ea7c4(0x116)]&&await git_internal_1[_0x3ea7c4(0x111)]['createEmptyBranch'](_0x396dae,_0x54b1fc[_0x3ea7c4(0xfd)]||'master','',this[_0x3ea7c4(0x107)]),this[_0x3ea7c4(0x101)](_0x396dae[_0x3ea7c4(0x115)]);}catch(_0x3de664){if(_0x3de664 instanceof api_error_1[_0x3ea7c4(0x129)])throw _0x3de664;throw new bad_request_error_1[(_0x3ea7c4(0x146))](_0x3de664);}}async[a237_0x54eb3a(0x13d)](){const _0x30837d=a237_0x54eb3a;try{const _0x372127=[];let _0x4fb724;do{_0x4fb724=await this['request']['get'](_0x30837d(0x12b)+this[_0x30837d(0x105)]+_0x30837d(0x11e),{'params':{'limit':0x64,'start':_0x4fb724?_0x4fb724['nextPageStart']:0x0}}),_0x372127[_0x30837d(0x13e)](..._0x4fb724[_0x30837d(0x128)]);}while(!_0x4fb724['isLastPage']);return _0x372127['map'](_0x46310a=>repo_class_1['Repo'][_0x30837d(0x13c)](_0x46310a,(0x0,utils_1[_0x30837d(0x13b)])(this[_0x30837d(0x131)]['defaults'][_0x30837d(0x12e)]||'',_0x30837d(0x112)+this[_0x30837d(0x105)]+_0x30837d(0x102)+_0x46310a[_0x30837d(0x108)]),this['api'],this[_0x30837d(0x107)]));}catch(_0x4b9cfd){if(_0x4b9cfd instanceof api_error_1['ApiError'])throw _0x4b9cfd;throw new not_found_error_1[(_0x30837d(0x147))](_0x4b9cfd);}}async[a237_0x54eb3a(0x101)](_0x31e491){const _0x5d70bb=a237_0x54eb3a;var _0x550981;try{const _0x20a677=await this[_0x5d70bb(0x131)][_0x5d70bb(0x117)]('projects/'+this['project']+_0x5d70bb(0x102)+_0x31e491),_0x426c88=repo_class_1[_0x5d70bb(0x103)]['fromBitbucketServer'](_0x20a677,(0x0,utils_1[_0x5d70bb(0x13b)])(this[_0x5d70bb(0x131)][_0x5d70bb(0x13a)][_0x5d70bb(0x12e)]||'','/projects/'+this['project']+_0x5d70bb(0x102)+_0x31e491),this[_0x5d70bb(0x10f)],this['credentials']),_0x588d19=await this[_0x5d70bb(0x131)][_0x5d70bb(0x117)](_0x426c88[_0x5d70bb(0x120)]+_0x5d70bb(0x12d))[_0x5d70bb(0x135)](_0x4676e7=>_0x4676e7[_0x5d70bb(0x128)]);return _0x426c88[_0x5d70bb(0xfd)]=(_0x550981=_0x588d19['find'](_0x2f053f=>_0x2f053f[_0x5d70bb(0x138)]===!![]))===null||_0x550981===void 0x0?void 0x0:_0x550981[_0x5d70bb(0x11f)],_0x426c88;}catch(_0x4a9e9f){if(_0x4a9e9f instanceof api_error_1['ApiError'])throw _0x4a9e9f;throw new not_found_error_1[(_0x5d70bb(0x147))](_0x4a9e9f);}}async[a237_0x54eb3a(0x145)](_0x4b71ba,_0x1742c6){const _0x50012b=a237_0x54eb3a;try{const _0x57746f=await this[_0x50012b(0x131)]['put'](_0x50012b(0x12b)+this['project']+_0x50012b(0x102)+_0x4b71ba,_0x1742c6),_0x3cc31f=await this[_0x50012b(0x131)][_0x50012b(0x117)](_0x50012b(0x12b)+this[_0x50012b(0x105)]+_0x50012b(0x102)+_0x4b71ba+_0x50012b(0x12a)),_0x175c38=repo_class_1[_0x50012b(0x103)][_0x50012b(0x13c)](_0x57746f,(0x0,utils_1[_0x50012b(0x13b)])(this[_0x50012b(0x131)][_0x50012b(0x13a)][_0x50012b(0x12e)]||'',_0x50012b(0x112)+this[_0x50012b(0x105)]+_0x50012b(0x102)+_0x4b71ba),this['api'],this[_0x50012b(0x107)]);return _0x175c38[_0x50012b(0xfd)]=_0x3cc31f[_0x50012b(0x11f)],_0x175c38;}catch(_0x3bf7cc){if(_0x3bf7cc instanceof api_error_1[_0x50012b(0x129)])throw _0x3bf7cc;throw new not_found_error_1[(_0x50012b(0x147))](_0x3bf7cc);}}async[a237_0x54eb3a(0x11b)](_0x3cf32d){const _0x52a645=a237_0x54eb3a;try{await this['getOne'](_0x3cf32d),await this[_0x52a645(0x131)][_0x52a645(0x11b)](_0x52a645(0x12b)+this[_0x52a645(0x105)]+'/repos/'+_0x3cf32d);}catch(_0x2ef286){if(_0x2ef286 instanceof api_error_1['ApiError'])throw _0x2ef286;throw new bad_request_error_1[(_0x52a645(0x146))](_0x2ef286);}}};function a237_0x10b2(){const _0x32d7a2=['typedi','api','514qrtRVX','Git','/projects/','../../../../../core/errors/api.error','Tokens','name','autoInit','get','1097715JZXSKA','805OGncqG','GitRepoService','delete','BitbucketServerCredentialsDto','design:paramtypes','/repos','displayId','apiUrl','119190ArOcWD','(((.+)+)+)+$','__esModule','16264WpOnnI','Service','../../../../shared/utils','../../../../../core/errors/bad-request.error','values','ApiError','/default-branch','projects/','object','/branches','baseURL','post','function','request','defineProperty','constructor','3221ZdtwWO','then','decorate','../../../internal/git.internal','isDefault','12xksVZt','defaults','joinURL','fromBitbucketServer','getAll','push','../../credentials/dto/bitbucket-server-credentials.dto','5728028xiJxrc','34145085oXHNbU','apiBody','BitbucketServerRepoService','1206rAfxEG','update','BadRequestError','NotFoundError','12KYSfkB','search','defaultBranch','__param','toString','__decorate','getOne','/repos/','Repo','getOwnPropertyDescriptor','project','./git-repo.service','credentials','slug','../../api/bitbucket-server-api.service','5250223STVmNh','git','3TqATfK','length'];a237_0x10b2=function(){return _0x32d7a2;};return a237_0x10b2();}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a237_0x54eb3a(0x125)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a237_0x54eb3a(0x114)][a237_0x54eb3a(0x107)])),__metadata(a237_0x54eb3a(0x11d),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1[a237_0x54eb3a(0x11c)]])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;