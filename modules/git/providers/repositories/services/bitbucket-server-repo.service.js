const a237_0x5f2331=a237_0x3b51;(function(_0x309a4f,_0x17d55f){const _0x45679f=a237_0x3b51,_0x148bba=_0x309a4f();while(!![]){try{const _0x3b895a=-parseInt(_0x45679f(0x19e))/0x1*(-parseInt(_0x45679f(0x1c2))/0x2)+parseInt(_0x45679f(0x1a3))/0x3+-parseInt(_0x45679f(0x1a5))/0x4+-parseInt(_0x45679f(0x1c4))/0x5+parseInt(_0x45679f(0x1ba))/0x6+parseInt(_0x45679f(0x1ac))/0x7*(parseInt(_0x45679f(0x1b9))/0x8)+-parseInt(_0x45679f(0x1c3))/0x9*(parseInt(_0x45679f(0x1bc))/0xa);if(_0x3b895a===_0x17d55f)break;else _0x148bba['push'](_0x148bba['shift']());}catch(_0x394683){_0x148bba['push'](_0x148bba['shift']());}}}(a237_0x544e,0x7af6c));const a237_0x184966=(function(){let _0x4485cc=!![];return function(_0x22b1db,_0x537022){const _0x2920a4=_0x4485cc?function(){const _0x434ce3=a237_0x3b51;if(_0x537022){const _0x1e0699=_0x537022[_0x434ce3(0x19d)](_0x22b1db,arguments);return _0x537022=null,_0x1e0699;}}:function(){};return _0x4485cc=![],_0x2920a4;};}()),a237_0x3760b2=a237_0x184966(this,function(){const _0x2abf41=a237_0x3b51;return a237_0x3760b2[_0x2abf41(0x1e0)]()[_0x2abf41(0x1c0)]('(((.+)+)+)+$')[_0x2abf41(0x1e0)]()[_0x2abf41(0x1c8)](a237_0x3760b2)[_0x2abf41(0x1c0)](_0x2abf41(0x1a0));});a237_0x3760b2();'use strict';var __decorate=this&&this[a237_0x5f2331(0x1be)]||function(_0x56b95e,_0x406f11,_0x4c8035,_0x24d9d7){const _0x58000b=a237_0x5f2331;var _0x2968b0=arguments[_0x58000b(0x1d5)],_0x2e033b=_0x2968b0<0x3?_0x406f11:_0x24d9d7===null?_0x24d9d7=Object['getOwnPropertyDescriptor'](_0x406f11,_0x4c8035):_0x24d9d7,_0x52f28a;if(typeof Reflect===_0x58000b(0x1e1)&&typeof Reflect[_0x58000b(0x193)]===_0x58000b(0x19b))_0x2e033b=Reflect[_0x58000b(0x193)](_0x56b95e,_0x406f11,_0x4c8035,_0x24d9d7);else{for(var _0x52dc9b=_0x56b95e[_0x58000b(0x1d5)]-0x1;_0x52dc9b>=0x0;_0x52dc9b--)if(_0x52f28a=_0x56b95e[_0x52dc9b])_0x2e033b=(_0x2968b0<0x3?_0x52f28a(_0x2e033b):_0x2968b0>0x3?_0x52f28a(_0x406f11,_0x4c8035,_0x2e033b):_0x52f28a(_0x406f11,_0x4c8035))||_0x2e033b;}return _0x2968b0>0x3&&_0x2e033b&&Object[_0x58000b(0x1af)](_0x406f11,_0x4c8035,_0x2e033b),_0x2e033b;},__metadata=this&&this[a237_0x5f2331(0x1d8)]||function(_0x743dd7,_0x863d8a){const _0x2a7192=a237_0x5f2331;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x2a7192(0x19b))return Reflect[_0x2a7192(0x1df)](_0x743dd7,_0x863d8a);},__param=this&&this[a237_0x5f2331(0x1b2)]||function(_0x246c6c,_0x360f65){return function(_0x4df7c,_0x1314ed){_0x360f65(_0x4df7c,_0x1314ed,_0x246c6c);};};function a237_0x3b51(_0x480420,_0x2fc434){const _0x3c1547=a237_0x544e();return a237_0x3b51=function(_0x3760b2,_0x184966){_0x3760b2=_0x3760b2-0x193;let _0x544e66=_0x3c1547[_0x3760b2];return _0x544e66;},a237_0x3b51(_0x480420,_0x2fc434);}Object[a237_0x5f2331(0x1af)](exports,a237_0x5f2331(0x1b7),{'value':!![]}),exports[a237_0x5f2331(0x1a1)]=void 0x0;const bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a237_0x5f2331(0x1a2)),typedi_1=require(a237_0x5f2331(0x195)),api_error_1=require(a237_0x5f2331(0x1c5)),bitbucket_server_api_service_1=require(a237_0x5f2331(0x1d7)),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a237_0x5f2331(0x199)),repo_class_1=require(a237_0x5f2331(0x1b6)),git_repo_service_1=require(a237_0x5f2331(0x1cd)),providers_tokens_1=require(a237_0x5f2331(0x194)),bitbucket_server_credentials_dto_1=require('../../credentials/dto/bitbucket-server-credentials.dto');let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x4cdb59,_0x430d7){const _0x51f5c2=a237_0x5f2331;super(_0x4cdb59),this[_0x51f5c2(0x1b0)]=_0x4cdb59,this['project']=_0x430d7['project'],this['credentials']=_0x430d7;}async[a237_0x5f2331(0x1bd)](_0x3eb63c){const _0x1c49f6=a237_0x5f2331;try{const _0x310272={'name':_0x3eb63c[_0x1c49f6(0x1b5)],'scmId':_0x1c49f6(0x19c),'defaultBranch':_0x3eb63c['defaultBranch'],..._0x3eb63c['apiBody']||{}},_0x55be0b=await this[_0x1c49f6(0x1a9)]['post'](_0x1c49f6(0x1bf)+this[_0x1c49f6(0x1b1)]+_0x1c49f6(0x1b3),_0x310272),_0x4c1ca8=repo_class_1[_0x1c49f6(0x198)][_0x1c49f6(0x1de)](_0x55be0b,'',this['api'],this['credentials']);return _0x3eb63c[_0x1c49f6(0x1a7)]&&await git_internal_1[_0x1c49f6(0x1aa)][_0x1c49f6(0x1cb)](_0x4c1ca8,_0x3eb63c[_0x1c49f6(0x1da)]||_0x1c49f6(0x1ca),'',this[_0x1c49f6(0x1d3)]),this[_0x1c49f6(0x1c9)](_0x4c1ca8['name']);}catch(_0x4417c7){if(_0x4417c7 instanceof api_error_1['ApiError'])throw _0x4417c7;throw new bad_request_error_1[(_0x1c49f6(0x1a4))](_0x4417c7);}}async[a237_0x5f2331(0x1d9)](){const _0x41eb02=a237_0x5f2331;try{const _0x3cb254=[];let _0x251284;do{_0x251284=await this[_0x41eb02(0x1a9)]['get'](_0x41eb02(0x1bf)+this[_0x41eb02(0x1b1)]+_0x41eb02(0x1b3),{'params':{'limit':0x64,'start':_0x251284?_0x251284['nextPageStart']:0x0}}),_0x3cb254[_0x41eb02(0x1ae)](..._0x251284[_0x41eb02(0x1c6)]);}while(!_0x251284['isLastPage']);return _0x3cb254[_0x41eb02(0x1c1)](_0x558318=>repo_class_1[_0x41eb02(0x198)][_0x41eb02(0x1de)](_0x558318,(0x0,utils_1[_0x41eb02(0x1db)])(this['request'][_0x41eb02(0x1d0)][_0x41eb02(0x1c7)]||'','/projects/'+this[_0x41eb02(0x1b1)]+_0x41eb02(0x1ab)+_0x558318[_0x41eb02(0x1ce)]),this['api'],this[_0x41eb02(0x1d3)]));}catch(_0x399f1e){if(_0x399f1e instanceof api_error_1[_0x41eb02(0x1cf)])throw _0x399f1e;throw new not_found_error_1['NotFoundError'](_0x399f1e);}}async[a237_0x5f2331(0x1c9)](_0x257a4e){const _0x21427c=a237_0x5f2331;var _0x12f942;try{const _0x3928f4=await this[_0x21427c(0x1a9)][_0x21427c(0x1a8)](_0x21427c(0x1bf)+this[_0x21427c(0x1b1)]+_0x21427c(0x1ab)+_0x257a4e),_0x1ab621=repo_class_1[_0x21427c(0x198)][_0x21427c(0x1de)](_0x3928f4,(0x0,utils_1[_0x21427c(0x1db)])(this['request'][_0x21427c(0x1d0)]['baseURL']||'',_0x21427c(0x1dc)+this[_0x21427c(0x1b1)]+'/repos/'+_0x257a4e),this[_0x21427c(0x1b0)],this[_0x21427c(0x1d3)]),_0x2c1ac3=await this['request'][_0x21427c(0x1a8)](_0x1ab621[_0x21427c(0x1a6)]+_0x21427c(0x1ad))[_0x21427c(0x196)](_0x325421=>_0x325421[_0x21427c(0x1c6)]);return _0x1ab621['defaultBranch']=(_0x12f942=_0x2c1ac3[_0x21427c(0x1dd)](_0x31f378=>_0x31f378[_0x21427c(0x1d1)]===!![]))===null||_0x12f942===void 0x0?void 0x0:_0x12f942[_0x21427c(0x1d2)],_0x1ab621;}catch(_0x42c955){if(_0x42c955 instanceof api_error_1[_0x21427c(0x1cf)])throw _0x42c955;throw new not_found_error_1[(_0x21427c(0x197))](_0x42c955);}}async[a237_0x5f2331(0x1cc)](_0x1c65a1,_0x516fa6){const _0x5d4160=a237_0x5f2331;try{const _0xc25ca5=await this[_0x5d4160(0x1a9)][_0x5d4160(0x1b8)](_0x5d4160(0x1bf)+this[_0x5d4160(0x1b1)]+_0x5d4160(0x1ab)+_0x1c65a1,_0x516fa6),_0x397ef4=await this[_0x5d4160(0x1a9)][_0x5d4160(0x1a8)]('projects/'+this['project']+_0x5d4160(0x1ab)+_0x1c65a1+'/default-branch'),_0x23ba2c=repo_class_1['Repo'][_0x5d4160(0x1de)](_0xc25ca5,(0x0,utils_1[_0x5d4160(0x1db)])(this[_0x5d4160(0x1a9)][_0x5d4160(0x1d0)][_0x5d4160(0x1c7)]||'',_0x5d4160(0x1dc)+this['project']+'/repos/'+_0x1c65a1),this['api'],this[_0x5d4160(0x1d3)]);return _0x23ba2c[_0x5d4160(0x1da)]=_0x397ef4['displayId'],_0x23ba2c;}catch(_0x30cc64){if(_0x30cc64 instanceof api_error_1[_0x5d4160(0x1cf)])throw _0x30cc64;throw new not_found_error_1[(_0x5d4160(0x197))](_0x30cc64);}}async['delete'](_0x191c7b){const _0x12b7af=a237_0x5f2331;try{await this['getOne'](_0x191c7b),await this[_0x12b7af(0x1a9)][_0x12b7af(0x1d4)](_0x12b7af(0x1bf)+this[_0x12b7af(0x1b1)]+_0x12b7af(0x1ab)+_0x191c7b);}catch(_0x3fd956){if(_0x3fd956 instanceof api_error_1['ApiError'])throw _0x3fd956;throw new bad_request_error_1[(_0x12b7af(0x1a4))](_0x3fd956);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a237_0x5f2331(0x19a)])(),__param(0x1,(0x0,typedi_1[a237_0x5f2331(0x19f)])(providers_tokens_1[a237_0x5f2331(0x1bb)][a237_0x5f2331(0x1d3)])),__metadata('design:paramtypes',[bitbucket_server_api_service_1[a237_0x5f2331(0x1d6)],bitbucket_server_credentials_dto_1[a237_0x5f2331(0x1b4)]])],BitbucketServerRepoService),exports[a237_0x5f2331(0x1a1)]=BitbucketServerRepoService;function a237_0x544e(){const _0x15421b=['delete','length','BitbucketServerApiService','../../api/bitbucket-server-api.service','__metadata','getAll','defaultBranch','joinURL','/projects/','find','fromBitbucketServer','metadata','toString','object','decorate','../../providers.tokens','typedi','then','NotFoundError','Repo','../../../../shared/utils','Service','function','git','apply','62627MjLvuT','Inject','(((.+)+)+)+$','BitbucketServerRepoService','../../../../../core/errors/not-found.error','1823895FpgJJk','BadRequestError','1261872PnOMYN','apiUrl','autoInit','get','request','Git','/repos/','314069ymFPYZ','/branches','push','defineProperty','api','project','__param','/repos','BitbucketServerCredentialsDto','name','../repo.class','__esModule','put','40cvnSAp','2460642ugrrkq','Tokens','10riCbEK','create','__decorate','projects/','search','map','8fwEgUr','4670073yCHLKC','774450sHkhtZ','../../../../../core/errors/api.error','values','baseURL','constructor','getOne','master','createEmptyBranch','update','./git-repo.service','slug','ApiError','defaults','isDefault','displayId','credentials'];a237_0x544e=function(){return _0x15421b;};return a237_0x544e();}