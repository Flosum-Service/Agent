const a239_0x703b33=a239_0x2e3d;(function(_0x319b88,_0xde67b0){const _0x3dd5c3=a239_0x2e3d,_0x4c2a07=_0x319b88();while(!![]){try{const _0x394649=parseInt(_0x3dd5c3(0x184))/0x1*(-parseInt(_0x3dd5c3(0x192))/0x2)+-parseInt(_0x3dd5c3(0x189))/0x3+-parseInt(_0x3dd5c3(0x176))/0x4*(-parseInt(_0x3dd5c3(0x162))/0x5)+parseInt(_0x3dd5c3(0x18c))/0x6+parseInt(_0x3dd5c3(0x18d))/0x7+parseInt(_0x3dd5c3(0x193))/0x8+-parseInt(_0x3dd5c3(0x177))/0x9;if(_0x394649===_0xde67b0)break;else _0x4c2a07['push'](_0x4c2a07['shift']());}catch(_0x2badd0){_0x4c2a07['push'](_0x4c2a07['shift']());}}}(a239_0x315e,0x4812d));function a239_0x315e(){const _0x540b4d=['../../../../../core/errors/bad-request.error','1699698OFpLFg','3894793mQkvUM','projects/','defaults','function','defaultBranch','6KfNICp','242496GHyYmR','git','(((.+)+)+)+$','name','fromBitbucketServer','isDefault','isLastPage','typedi','create','Inject','map','api','../../api/bitbucket-server-api.service','ApiError','length','__esModule','BitbucketServerRepoService','master','/default-branch','post','metadata','find','999655dhXtAM','design:paramtypes','Git','object','BitbucketServerCredentialsDto','__decorate','project','joinURL','credentials','getOne','decorate','../../providers.tokens','Tokens','../repo.class','BadRequestError','toString','defineProperty','apiBody','search','displayId','4gGSqZS','3334518LSbaOw','values','get','update','getAll','/repos','baseURL','/projects/','/repos/','nextPageStart','Repo','NotFoundError','request','4741sJjbwM','put','delete','apiUrl','then','1169961DDPiCh','GitRepoService'];a239_0x315e=function(){return _0x540b4d;};return a239_0x315e();}const a239_0x1eb788=(function(){let _0x54e7be=!![];return function(_0x49ce6e,_0x4f1366){const _0x4b91ef=_0x54e7be?function(){if(_0x4f1366){const _0x716c9c=_0x4f1366['apply'](_0x49ce6e,arguments);return _0x4f1366=null,_0x716c9c;}}:function(){};return _0x54e7be=![],_0x4b91ef;};}()),a239_0x17b58a=a239_0x1eb788(this,function(){const _0x112802=a239_0x2e3d;return a239_0x17b58a[_0x112802(0x171)]()[_0x112802(0x174)]('(((.+)+)+)+$')[_0x112802(0x171)]()['constructor'](a239_0x17b58a)[_0x112802(0x174)](_0x112802(0x195));});a239_0x17b58a();'use strict';var __decorate=this&&this[a239_0x703b33(0x167)]||function(_0x323692,_0x189805,_0x255c15,_0x121e10){const _0x4474f1=a239_0x703b33;var _0xb666c3=arguments[_0x4474f1(0x1a1)],_0x25ef80=_0xb666c3<0x3?_0x189805:_0x121e10===null?_0x121e10=Object['getOwnPropertyDescriptor'](_0x189805,_0x255c15):_0x121e10,_0x578742;if(typeof Reflect===_0x4474f1(0x165)&&typeof Reflect[_0x4474f1(0x16c)]==='function')_0x25ef80=Reflect['decorate'](_0x323692,_0x189805,_0x255c15,_0x121e10);else{for(var _0x671134=_0x323692['length']-0x1;_0x671134>=0x0;_0x671134--)if(_0x578742=_0x323692[_0x671134])_0x25ef80=(_0xb666c3<0x3?_0x578742(_0x25ef80):_0xb666c3>0x3?_0x578742(_0x189805,_0x255c15,_0x25ef80):_0x578742(_0x189805,_0x255c15))||_0x25ef80;}return _0xb666c3>0x3&&_0x25ef80&&Object[_0x4474f1(0x172)](_0x189805,_0x255c15,_0x25ef80),_0x25ef80;},__metadata=this&&this['__metadata']||function(_0x1eb714,_0x4a1c4a){const _0x3b2029=a239_0x703b33;if(typeof Reflect===_0x3b2029(0x165)&&typeof Reflect[_0x3b2029(0x160)]===_0x3b2029(0x190))return Reflect[_0x3b2029(0x160)](_0x1eb714,_0x4a1c4a);},__param=this&&this['__param']||function(_0x120c4f,_0xbe41fa){return function(_0x578fbd,_0x327bc3){_0xbe41fa(_0x578fbd,_0x327bc3,_0x120c4f);};};Object[a239_0x703b33(0x172)](exports,a239_0x703b33(0x1a2),{'value':!![]}),exports[a239_0x703b33(0x1a3)]=void 0x0;const bad_request_error_1=require(a239_0x703b33(0x18b)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a239_0x703b33(0x19a)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a239_0x703b33(0x19f)),git_internal_1=require('../../../internal/git.internal'),utils_1=require('../../../../shared/utils'),repo_class_1=require(a239_0x703b33(0x16f)),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a239_0x703b33(0x16d)),bitbucket_server_credentials_dto_1=require('../../credentials/dto/bitbucket-server-credentials.dto');function a239_0x2e3d(_0x44ac0e,_0x38e36d){const _0x8edf4b=a239_0x315e();return a239_0x2e3d=function(_0x17b58a,_0x1eb788){_0x17b58a=_0x17b58a-0x15f;let _0x315ec0=_0x8edf4b[_0x17b58a];return _0x315ec0;},a239_0x2e3d(_0x44ac0e,_0x38e36d);}let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a239_0x703b33(0x18a)]{constructor(_0x289a0e,_0x475191){const _0x301996=a239_0x703b33;super(_0x289a0e),this[_0x301996(0x19e)]=_0x289a0e,this[_0x301996(0x168)]=_0x475191['project'],this[_0x301996(0x16a)]=_0x475191;}async[a239_0x703b33(0x19b)](_0x6a896e){const _0x9d0c22=a239_0x703b33;try{const _0x325715={'name':_0x6a896e[_0x9d0c22(0x196)],'scmId':_0x9d0c22(0x194),'defaultBranch':_0x6a896e[_0x9d0c22(0x191)],..._0x6a896e[_0x9d0c22(0x173)]||{}},_0x38d2b6=await this[_0x9d0c22(0x183)][_0x9d0c22(0x15f)](_0x9d0c22(0x18e)+this[_0x9d0c22(0x168)]+_0x9d0c22(0x17c),_0x325715),_0x449874=repo_class_1[_0x9d0c22(0x181)][_0x9d0c22(0x197)](_0x38d2b6,'',this[_0x9d0c22(0x19e)],this[_0x9d0c22(0x16a)]);return _0x6a896e['autoInit']&&await git_internal_1[_0x9d0c22(0x164)]['createEmptyBranch'](_0x449874,_0x6a896e[_0x9d0c22(0x191)]||{'name':_0x9d0c22(0x1a4)},'',this[_0x9d0c22(0x16a)]),this[_0x9d0c22(0x16b)](_0x449874['name']);}catch(_0x2011bf){if(_0x2011bf instanceof api_error_1[_0x9d0c22(0x1a0)])throw _0x2011bf;throw new bad_request_error_1[(_0x9d0c22(0x170))](_0x2011bf);}}async[a239_0x703b33(0x17b)](){const _0x2736be=a239_0x703b33;try{const _0x508af2=[];let _0x33124f;do{_0x33124f=await this[_0x2736be(0x183)]['get'](_0x2736be(0x18e)+this[_0x2736be(0x168)]+_0x2736be(0x17c),{'params':{'limit':0x64,'start':_0x33124f?_0x33124f[_0x2736be(0x180)]:0x0}}),_0x508af2['push'](..._0x33124f[_0x2736be(0x178)]);}while(!_0x33124f[_0x2736be(0x199)]);return _0x508af2[_0x2736be(0x19d)](_0x45fbcd=>repo_class_1[_0x2736be(0x181)][_0x2736be(0x197)](_0x45fbcd,(0x0,utils_1[_0x2736be(0x169)])(this[_0x2736be(0x183)]['defaults']['baseURL']||'',_0x2736be(0x17e)+this['project']+'/repos/'+_0x45fbcd['slug']),this[_0x2736be(0x19e)],this[_0x2736be(0x16a)]));}catch(_0x506cfb){if(_0x506cfb instanceof api_error_1[_0x2736be(0x1a0)])throw _0x506cfb;throw new not_found_error_1[(_0x2736be(0x182))](_0x506cfb);}}async[a239_0x703b33(0x16b)](_0x234602){const _0x5d46a6=a239_0x703b33;var _0x48c8e8;try{const _0x5c6f21=await this['request']['get'](_0x5d46a6(0x18e)+this[_0x5d46a6(0x168)]+'/repos/'+_0x234602),_0x86f746=repo_class_1[_0x5d46a6(0x181)][_0x5d46a6(0x197)](_0x5c6f21,(0x0,utils_1[_0x5d46a6(0x169)])(this['request']['defaults'][_0x5d46a6(0x17d)]||'',_0x5d46a6(0x17e)+this[_0x5d46a6(0x168)]+_0x5d46a6(0x17f)+_0x234602),this[_0x5d46a6(0x19e)],this[_0x5d46a6(0x16a)]),_0x4e52a2=await this[_0x5d46a6(0x183)][_0x5d46a6(0x179)](_0x86f746[_0x5d46a6(0x187)]+'/branches')[_0x5d46a6(0x188)](_0x1f0f65=>_0x1f0f65[_0x5d46a6(0x178)]);return _0x86f746['defaultBranch']=(_0x48c8e8=_0x4e52a2[_0x5d46a6(0x161)](_0xeb6936=>_0xeb6936[_0x5d46a6(0x198)]===!![]))===null||_0x48c8e8===void 0x0?void 0x0:_0x48c8e8[_0x5d46a6(0x175)],_0x86f746;}catch(_0x3145a0){if(_0x3145a0 instanceof api_error_1['ApiError'])throw _0x3145a0;throw new not_found_error_1[(_0x5d46a6(0x182))](_0x3145a0);}}async[a239_0x703b33(0x17a)](_0xade395,_0x453dcd){const _0x105055=a239_0x703b33;try{const _0x3961e5=await this[_0x105055(0x183)][_0x105055(0x185)](_0x105055(0x18e)+this['project']+'/repos/'+_0xade395,_0x453dcd),_0x23427c=await this[_0x105055(0x183)]['get'](_0x105055(0x18e)+this[_0x105055(0x168)]+'/repos/'+_0xade395+_0x105055(0x1a5)),_0x2a4fbc=repo_class_1['Repo'][_0x105055(0x197)](_0x3961e5,(0x0,utils_1[_0x105055(0x169)])(this[_0x105055(0x183)][_0x105055(0x18f)][_0x105055(0x17d)]||'','/projects/'+this[_0x105055(0x168)]+_0x105055(0x17f)+_0xade395),this['api'],this[_0x105055(0x16a)]);return _0x2a4fbc[_0x105055(0x191)]=_0x23427c['displayId'],_0x2a4fbc;}catch(_0x115f1b){if(_0x115f1b instanceof api_error_1[_0x105055(0x1a0)])throw _0x115f1b;throw new not_found_error_1[(_0x105055(0x182))](_0x115f1b);}}async[a239_0x703b33(0x186)](_0x1f2f7d){const _0x3f114e=a239_0x703b33;try{await this[_0x3f114e(0x16b)](_0x1f2f7d),await this[_0x3f114e(0x183)][_0x3f114e(0x186)](_0x3f114e(0x18e)+this[_0x3f114e(0x168)]+_0x3f114e(0x17f)+_0x1f2f7d);}catch(_0x4b742d){if(_0x4b742d instanceof api_error_1[_0x3f114e(0x1a0)])throw _0x4b742d;throw new bad_request_error_1[(_0x3f114e(0x170))](_0x4b742d);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a239_0x703b33(0x19c)])(providers_tokens_1[a239_0x703b33(0x16e)][a239_0x703b33(0x16a)])),__metadata(a239_0x703b33(0x163),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1[a239_0x703b33(0x166)]])],BitbucketServerRepoService),exports[a239_0x703b33(0x1a3)]=BitbucketServerRepoService;