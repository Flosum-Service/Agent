const a211_0x1b6c93=a211_0x2427;(function(_0x2cf215,_0x42e85c){const _0x800453=a211_0x2427,_0x18bb91=_0x2cf215();while(!![]){try{const _0xfa3d54=-parseInt(_0x800453(0xaa))/0x1*(parseInt(_0x800453(0xad))/0x2)+parseInt(_0x800453(0x97))/0x3+-parseInt(_0x800453(0x92))/0x4+parseInt(_0x800453(0x90))/0x5+parseInt(_0x800453(0x7a))/0x6+parseInt(_0x800453(0xbd))/0x7*(parseInt(_0x800453(0x9e))/0x8)+-parseInt(_0x800453(0xb2))/0x9;if(_0xfa3d54===_0x42e85c)break;else _0x18bb91['push'](_0x18bb91['shift']());}catch(_0x30d7cd){_0x18bb91['push'](_0x18bb91['shift']());}}}(a211_0x5519,0x918fd));const a211_0x16f71c=(function(){let _0x2b1f7d=!![];return function(_0x8cc8d4,_0x185d9b){const _0x31387f=_0x2b1f7d?function(){if(_0x185d9b){const _0x48737d=_0x185d9b['apply'](_0x8cc8d4,arguments);return _0x185d9b=null,_0x48737d;}}:function(){};return _0x2b1f7d=![],_0x31387f;};}()),a211_0x196284=a211_0x16f71c(this,function(){const _0x4e4559=a211_0x2427;return a211_0x196284[_0x4e4559(0x7d)]()[_0x4e4559(0x84)](_0x4e4559(0xa4))[_0x4e4559(0x7d)]()[_0x4e4559(0x80)](a211_0x196284)[_0x4e4559(0x84)]('(((.+)+)+)+$');});function a211_0x2427(_0x8c43a5,_0x26a684){const _0x43c977=a211_0x5519();return a211_0x2427=function(_0x196284,_0x16f71c){_0x196284=_0x196284-0x74;let _0x5519a5=_0x43c977[_0x196284];return _0x5519a5;},a211_0x2427(_0x8c43a5,_0x26a684);}a211_0x196284();'use strict';var __decorate=this&&this[a211_0x1b6c93(0x8f)]||function(_0x3438ab,_0x289551,_0x496446,_0x34bbcd){const _0x20076f=a211_0x1b6c93;var _0x1fa8c8=arguments[_0x20076f(0x94)],_0xa8d1c2=_0x1fa8c8<0x3?_0x289551:_0x34bbcd===null?_0x34bbcd=Object[_0x20076f(0x98)](_0x289551,_0x496446):_0x34bbcd,_0x5489be;if(typeof Reflect==='object'&&typeof Reflect[_0x20076f(0xa0)]==='function')_0xa8d1c2=Reflect[_0x20076f(0xa0)](_0x3438ab,_0x289551,_0x496446,_0x34bbcd);else{for(var _0x294b8e=_0x3438ab[_0x20076f(0x94)]-0x1;_0x294b8e>=0x0;_0x294b8e--)if(_0x5489be=_0x3438ab[_0x294b8e])_0xa8d1c2=(_0x1fa8c8<0x3?_0x5489be(_0xa8d1c2):_0x1fa8c8>0x3?_0x5489be(_0x289551,_0x496446,_0xa8d1c2):_0x5489be(_0x289551,_0x496446))||_0xa8d1c2;}return _0x1fa8c8>0x3&&_0xa8d1c2&&Object[_0x20076f(0xa3)](_0x289551,_0x496446,_0xa8d1c2),_0xa8d1c2;},__metadata=this&&this[a211_0x1b6c93(0x9a)]||function(_0xbcee87,_0x2c8d38){const _0x150ca5=a211_0x1b6c93;if(typeof Reflect===_0x150ca5(0xa8)&&typeof Reflect[_0x150ca5(0x9f)]===_0x150ca5(0x99))return Reflect['metadata'](_0xbcee87,_0x2c8d38);},__param=this&&this['__param']||function(_0x5be7c2,_0x5ca217){return function(_0x58516f,_0x3a9a1a){_0x5ca217(_0x58516f,_0x3a9a1a,_0x5be7c2);};};Object[a211_0x1b6c93(0xa3)](exports,a211_0x1b6c93(0x8c),{'value':!![]}),exports[a211_0x1b6c93(0xa7)]=void 0x0;const bad_request_error_1=require(a211_0x1b6c93(0x78)),not_found_error_1=require(a211_0x1b6c93(0xa5)),typedi_1=require(a211_0x1b6c93(0x9d)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a211_0x1b6c93(0x7c)),git_internal_1=require(a211_0x1b6c93(0x7b)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a211_0x1b6c93(0xb0)),git_repo_service_1=require(a211_0x1b6c93(0xb7)),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require(a211_0x1b6c93(0x76));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x4c9002,_0x242eea){const _0x30cc00=a211_0x1b6c93;super(_0x4c9002),this[_0x30cc00(0xb9)]=_0x4c9002,this['project']=_0x242eea['project'],this['credentials']=_0x242eea;}async['create'](_0x4bbca1){const _0x5271d3=a211_0x1b6c93;try{const _0xbf565f={'name':_0x4bbca1[_0x5271d3(0xa6)],'scmId':'git','defaultBranch':_0x4bbca1[_0x5271d3(0xa1)],..._0x4bbca1[_0x5271d3(0xac)]||{}},_0x3d9aae=await this[_0x5271d3(0x83)]['post'](_0x5271d3(0x96)+this[_0x5271d3(0x91)]+_0x5271d3(0xc0),_0xbf565f),_0x4ac22a=repo_class_1[_0x5271d3(0x77)][_0x5271d3(0xb8)](_0x3d9aae,'',this[_0x5271d3(0xb9)],this[_0x5271d3(0xbf)]);return _0x4bbca1[_0x5271d3(0x85)]&&await git_internal_1[_0x5271d3(0xb4)][_0x5271d3(0x7f)](_0x4ac22a,_0x4bbca1['defaultBranch']||_0x5271d3(0x7e),'',this[_0x5271d3(0xbf)]),this[_0x5271d3(0x87)](_0x4ac22a[_0x5271d3(0xa6)]);}catch(_0x88c6ab){if(_0x88c6ab instanceof api_error_1['ApiError'])throw _0x88c6ab;throw new bad_request_error_1['BadRequestError'](_0x88c6ab);}}async[a211_0x1b6c93(0x8d)](){const _0x297fe6=a211_0x1b6c93;try{const _0x2fa7e5=[];let _0x186b32;do{_0x186b32=await this[_0x297fe6(0x83)][_0x297fe6(0xa2)](_0x297fe6(0x96)+this[_0x297fe6(0x91)]+_0x297fe6(0xc0),{'params':{'limit':0x64,'start':_0x186b32?_0x186b32[_0x297fe6(0x74)]:0x0}}),_0x2fa7e5[_0x297fe6(0xae)](..._0x186b32[_0x297fe6(0xa9)]);}while(!_0x186b32[_0x297fe6(0x8b)]);return _0x2fa7e5[_0x297fe6(0xb3)](_0x154de3=>repo_class_1[_0x297fe6(0x77)][_0x297fe6(0xb8)](_0x154de3,(0x0,utils_1[_0x297fe6(0xbb)])(this[_0x297fe6(0x83)][_0x297fe6(0x86)][_0x297fe6(0x8a)]||'',_0x297fe6(0xaf)+this[_0x297fe6(0x91)]+'/repos/'+_0x154de3[_0x297fe6(0x8e)]),this[_0x297fe6(0xb9)],this['credentials']));}catch(_0x48f037){if(_0x48f037 instanceof api_error_1[_0x297fe6(0x9b)])throw _0x48f037;throw new not_found_error_1[(_0x297fe6(0xb6))](_0x48f037);}}async[a211_0x1b6c93(0x87)](_0x16c6e6){const _0x37bbef=a211_0x1b6c93;var _0x1b81b1;try{const _0xf965d8=await this['request'][_0x37bbef(0xa2)](_0x37bbef(0x96)+this['project']+_0x37bbef(0x88)+_0x16c6e6),_0x31ba0e=repo_class_1[_0x37bbef(0x77)]['fromBitbucketServer'](_0xf965d8,(0x0,utils_1[_0x37bbef(0xbb)])(this[_0x37bbef(0x83)][_0x37bbef(0x86)][_0x37bbef(0x8a)]||'',_0x37bbef(0xaf)+this[_0x37bbef(0x91)]+_0x37bbef(0x88)+_0x16c6e6),this[_0x37bbef(0xb9)],this[_0x37bbef(0xbf)]),_0x2686e9=await this[_0x37bbef(0x83)][_0x37bbef(0xa2)](_0x31ba0e[_0x37bbef(0x82)]+_0x37bbef(0xb1))[_0x37bbef(0x9c)](_0x52cc3c=>_0x52cc3c['values']);return _0x31ba0e[_0x37bbef(0xa1)]=(_0x1b81b1=_0x2686e9[_0x37bbef(0xba)](_0x1709ac=>_0x1709ac[_0x37bbef(0x75)]===!![]))===null||_0x1b81b1===void 0x0?void 0x0:_0x1b81b1[_0x37bbef(0x95)],_0x31ba0e;}catch(_0x4076e6){if(_0x4076e6 instanceof api_error_1[_0x37bbef(0x9b)])throw _0x4076e6;throw new not_found_error_1['NotFoundError'](_0x4076e6);}}async[a211_0x1b6c93(0xbe)](_0x50ec39,_0x5f4483){const _0x36d852=a211_0x1b6c93;try{const _0x3c69fb=await this['request']['put'](_0x36d852(0x96)+this[_0x36d852(0x91)]+'/repos/'+_0x50ec39,_0x5f4483),_0x3da618=await this[_0x36d852(0x83)][_0x36d852(0xa2)](_0x36d852(0x96)+this[_0x36d852(0x91)]+_0x36d852(0x88)+_0x50ec39+'/default-branch'),_0x486063=repo_class_1[_0x36d852(0x77)][_0x36d852(0xb8)](_0x3c69fb,(0x0,utils_1[_0x36d852(0xbb)])(this[_0x36d852(0x83)]['defaults'][_0x36d852(0x8a)]||'',_0x36d852(0xaf)+this[_0x36d852(0x91)]+'/repos/'+_0x50ec39),this['api'],this['credentials']);return _0x486063[_0x36d852(0xa1)]=_0x3da618['displayId'],_0x486063;}catch(_0x5166ad){if(_0x5166ad instanceof api_error_1[_0x36d852(0x9b)])throw _0x5166ad;throw new not_found_error_1['NotFoundError'](_0x5166ad);}}async[a211_0x1b6c93(0xb5)](_0x1a4437){const _0x128f5d=a211_0x1b6c93;try{await this[_0x128f5d(0x87)](_0x1a4437),await this[_0x128f5d(0x83)][_0x128f5d(0xb5)](_0x128f5d(0x96)+this['project']+_0x128f5d(0x88)+_0x1a4437);}catch(_0x41e597){if(_0x41e597 instanceof api_error_1[_0x128f5d(0x9b)])throw _0x41e597;throw new bad_request_error_1[(_0x128f5d(0x81))](_0x41e597);}}};function a211_0x5519(){const _0xf0d17f=['../../../../../core/errors/not-found.error','name','BitbucketServerRepoService','object','values','659777OikWMA','Tokens','apiBody','2PibgRA','push','/projects/','../repo.class','/branches','7608474dhNrWn','map','Git','delete','NotFoundError','./git-repo.service','fromBitbucketServer','api','find','joinURL','BitbucketServerApiService','14oRcBEj','update','credentials','/repos','nextPageStart','isDefault','../../credentials/dto/bitbucket-server-credentials.dto','Repo','../../../../../core/errors/bad-request.error','Inject','5937054pslKVd','../../../internal/git.internal','../../api/bitbucket-server-api.service','toString','master','createEmptyBranch','constructor','BadRequestError','apiUrl','request','search','autoInit','defaults','getOne','/repos/','Service','baseURL','isLastPage','__esModule','getAll','slug','__decorate','5721800feJYmR','project','2003796nczvSM','design:paramtypes','length','displayId','projects/','1134810aItFcH','getOwnPropertyDescriptor','function','__metadata','ApiError','then','typedi','360776kDWgzF','metadata','decorate','defaultBranch','get','defineProperty','(((.+)+)+)+$'];a211_0x5519=function(){return _0xf0d17f;};return a211_0x5519();}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a211_0x1b6c93(0x89)])(),__param(0x1,(0x0,typedi_1[a211_0x1b6c93(0x79)])(providers_tokens_1[a211_0x1b6c93(0xab)][a211_0x1b6c93(0xbf)])),__metadata(a211_0x1b6c93(0x93),[bitbucket_server_api_service_1[a211_0x1b6c93(0xbc)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a211_0x1b6c93(0xa7)]=BitbucketServerRepoService;