const a211_0x4e0547=a211_0x3d01;(function(_0x406c52,_0xf4098c){const _0x1d8603=a211_0x3d01,_0x1a1815=_0x406c52();while(!![]){try{const _0x144bf5=-parseInt(_0x1d8603(0x116))/0x1*(parseInt(_0x1d8603(0x105))/0x2)+parseInt(_0x1d8603(0xfc))/0x3+-parseInt(_0x1d8603(0x125))/0x4+parseInt(_0x1d8603(0x136))/0x5+parseInt(_0x1d8603(0x138))/0x6*(-parseInt(_0x1d8603(0x11b))/0x7)+-parseInt(_0x1d8603(0x10a))/0x8+-parseInt(_0x1d8603(0x10c))/0x9*(-parseInt(_0x1d8603(0x126))/0xa);if(_0x144bf5===_0xf4098c)break;else _0x1a1815['push'](_0x1a1815['shift']());}catch(_0x1df60f){_0x1a1815['push'](_0x1a1815['shift']());}}}(a211_0x2605,0xafb24));const a211_0x11b107=(function(){let _0x142160=!![];return function(_0x23382c,_0x5f187d){const _0x5e9968=_0x142160?function(){const _0x2f9f76=a211_0x3d01;if(_0x5f187d){const _0x313a2f=_0x5f187d[_0x2f9f76(0x123)](_0x23382c,arguments);return _0x5f187d=null,_0x313a2f;}}:function(){};return _0x142160=![],_0x5e9968;};}()),a211_0x2fb4b7=a211_0x11b107(this,function(){const _0x1868cd=a211_0x3d01;return a211_0x2fb4b7[_0x1868cd(0x109)]()['search'](_0x1868cd(0xfb))[_0x1868cd(0x109)]()[_0x1868cd(0x101)](a211_0x2fb4b7)['search'](_0x1868cd(0xfb));});a211_0x2fb4b7();'use strict';var __decorate=this&&this['__decorate']||function(_0x5a409c,_0x316a95,_0x1981e4,_0x3f506a){const _0x2675ca=a211_0x3d01;var _0x19fade=arguments[_0x2675ca(0xed)],_0x2cbb15=_0x19fade<0x3?_0x316a95:_0x3f506a===null?_0x3f506a=Object[_0x2675ca(0x137)](_0x316a95,_0x1981e4):_0x3f506a,_0x132e10;if(typeof Reflect===_0x2675ca(0x115)&&typeof Reflect[_0x2675ca(0x133)]===_0x2675ca(0x12e))_0x2cbb15=Reflect['decorate'](_0x5a409c,_0x316a95,_0x1981e4,_0x3f506a);else{for(var _0x55b4f6=_0x5a409c['length']-0x1;_0x55b4f6>=0x0;_0x55b4f6--)if(_0x132e10=_0x5a409c[_0x55b4f6])_0x2cbb15=(_0x19fade<0x3?_0x132e10(_0x2cbb15):_0x19fade>0x3?_0x132e10(_0x316a95,_0x1981e4,_0x2cbb15):_0x132e10(_0x316a95,_0x1981e4))||_0x2cbb15;}return _0x19fade>0x3&&_0x2cbb15&&Object[_0x2675ca(0x124)](_0x316a95,_0x1981e4,_0x2cbb15),_0x2cbb15;},__metadata=this&&this['__metadata']||function(_0x17c4d4,_0x158871){const _0x5c6a9d=a211_0x3d01;if(typeof Reflect===_0x5c6a9d(0x115)&&typeof Reflect[_0x5c6a9d(0x104)]===_0x5c6a9d(0x12e))return Reflect[_0x5c6a9d(0x104)](_0x17c4d4,_0x158871);},__param=this&&this[a211_0x4e0547(0x10f)]||function(_0x347d48,_0x2c4f10){return function(_0x1a530e,_0x221929){_0x2c4f10(_0x1a530e,_0x221929,_0x347d48);};};Object[a211_0x4e0547(0x124)](exports,a211_0x4e0547(0x107),{'value':!![]}),exports[a211_0x4e0547(0xf6)]=void 0x0;const bad_request_error_1=require(a211_0x4e0547(0x110)),not_found_error_1=require(a211_0x4e0547(0xf0)),typedi_1=require(a211_0x4e0547(0x12d)),api_error_1=require(a211_0x4e0547(0xf9)),bitbucket_server_api_service_1=require(a211_0x4e0547(0x12b)),git_internal_1=require(a211_0x4e0547(0x12f)),utils_1=require(a211_0x4e0547(0x111)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a211_0x4e0547(0xff)),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require('../../credentials/dto/bitbucket-server-credentials.dto');let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a211_0x4e0547(0xfe)]{constructor(_0x2b86c1,_0x1a763){const _0x45b426=a211_0x4e0547;super(_0x2b86c1),this[_0x45b426(0xef)]=_0x2b86c1,this['project']=_0x1a763[_0x45b426(0x128)],this[_0x45b426(0xf8)]=_0x1a763;}async[a211_0x4e0547(0x114)](_0x3c2b34){const _0x414763=a211_0x4e0547;try{const _0x311da0={'name':_0x3c2b34[_0x414763(0x10b)],'scmId':_0x414763(0x112),'defaultBranch':_0x3c2b34[_0x414763(0x127)],..._0x3c2b34[_0x414763(0xf7)]||{}},_0x2e9ece=await this[_0x414763(0x134)][_0x414763(0x113)](_0x414763(0xf1)+this[_0x414763(0x128)]+_0x414763(0xf5),_0x311da0),_0x28337a=repo_class_1[_0x414763(0x106)][_0x414763(0x117)](_0x2e9ece,'',this['api'],this[_0x414763(0xf8)]);return _0x3c2b34[_0x414763(0x10e)]&&await git_internal_1['Git'][_0x414763(0x108)](_0x28337a,_0x3c2b34[_0x414763(0x127)]||_0x414763(0x119),'',this[_0x414763(0xf8)]),this['getOne'](_0x28337a[_0x414763(0x10b)]);}catch(_0x300017){if(_0x300017 instanceof api_error_1[_0x414763(0x120)])throw _0x300017;throw new bad_request_error_1['BadRequestError'](_0x300017);}}async['getAll'](){const _0x589a9d=a211_0x4e0547;try{const _0x34267c=[];let _0xb55dc4;do{_0xb55dc4=await this[_0x589a9d(0x134)][_0x589a9d(0xfd)](_0x589a9d(0xf1)+this[_0x589a9d(0x128)]+_0x589a9d(0xf5),{'params':{'limit':0x64,'start':_0xb55dc4?_0xb55dc4['nextPageStart']:0x0}}),_0x34267c[_0x589a9d(0x11a)](..._0xb55dc4[_0x589a9d(0x118)]);}while(!_0xb55dc4[_0x589a9d(0x135)]);return _0x34267c[_0x589a9d(0x13c)](_0x41cfde=>repo_class_1['Repo'][_0x589a9d(0x117)](_0x41cfde,(0x0,utils_1[_0x589a9d(0xf2)])(this[_0x589a9d(0x134)][_0x589a9d(0x10d)]['baseURL']||'',_0x589a9d(0x103)+this['project']+_0x589a9d(0x121)+_0x41cfde[_0x589a9d(0xf4)]),this[_0x589a9d(0xef)],this[_0x589a9d(0xf8)]));}catch(_0xcc13f3){if(_0xcc13f3 instanceof api_error_1[_0x589a9d(0x120)])throw _0xcc13f3;throw new not_found_error_1[(_0x589a9d(0x11d))](_0xcc13f3);}}async[a211_0x4e0547(0x12a)](_0x117e0c){const _0x5eacd7=a211_0x4e0547;var _0x5e769b;try{const _0x3cf437=await this['request'][_0x5eacd7(0xfd)]('projects/'+this[_0x5eacd7(0x128)]+'/repos/'+_0x117e0c),_0x295a67=repo_class_1['Repo']['fromBitbucketServer'](_0x3cf437,(0x0,utils_1[_0x5eacd7(0xf2)])(this['request'][_0x5eacd7(0x10d)][_0x5eacd7(0x132)]||'','/projects/'+this[_0x5eacd7(0x128)]+_0x5eacd7(0x121)+_0x117e0c),this[_0x5eacd7(0xef)],this[_0x5eacd7(0xf8)]),_0x1bc694=await this[_0x5eacd7(0x134)][_0x5eacd7(0xfd)](_0x295a67[_0x5eacd7(0x11c)]+_0x5eacd7(0x11f))[_0x5eacd7(0x130)](_0x28f3ea=>_0x28f3ea[_0x5eacd7(0x118)]);return _0x295a67[_0x5eacd7(0x127)]=(_0x5e769b=_0x1bc694[_0x5eacd7(0xf3)](_0x21f318=>_0x21f318[_0x5eacd7(0xee)]===!![]))===null||_0x5e769b===void 0x0?void 0x0:_0x5e769b[_0x5eacd7(0x13b)],_0x295a67;}catch(_0x549e8b){if(_0x549e8b instanceof api_error_1[_0x5eacd7(0x120)])throw _0x549e8b;throw new not_found_error_1[(_0x5eacd7(0x11d))](_0x549e8b);}}async[a211_0x4e0547(0x102)](_0x3725dd,_0x1aade8){const _0x429e6a=a211_0x4e0547;try{const _0x318bd9=await this[_0x429e6a(0x134)][_0x429e6a(0x139)](_0x429e6a(0xf1)+this[_0x429e6a(0x128)]+_0x429e6a(0x121)+_0x3725dd,_0x1aade8),_0x30b0a2=await this[_0x429e6a(0x134)][_0x429e6a(0xfd)]('projects/'+this[_0x429e6a(0x128)]+'/repos/'+_0x3725dd+_0x429e6a(0x12c)),_0x358fcb=repo_class_1[_0x429e6a(0x106)][_0x429e6a(0x117)](_0x318bd9,(0x0,utils_1[_0x429e6a(0xf2)])(this[_0x429e6a(0x134)][_0x429e6a(0x10d)]['baseURL']||'',_0x429e6a(0x103)+this[_0x429e6a(0x128)]+_0x429e6a(0x121)+_0x3725dd),this[_0x429e6a(0xef)],this['credentials']);return _0x358fcb['defaultBranch']=_0x30b0a2[_0x429e6a(0x13b)],_0x358fcb;}catch(_0x56ce96){if(_0x56ce96 instanceof api_error_1[_0x429e6a(0x120)])throw _0x56ce96;throw new not_found_error_1['NotFoundError'](_0x56ce96);}}async[a211_0x4e0547(0x122)](_0x2b35f2){const _0x5727de=a211_0x4e0547;try{await this[_0x5727de(0x12a)](_0x2b35f2),await this[_0x5727de(0x134)][_0x5727de(0x122)](_0x5727de(0xf1)+this[_0x5727de(0x128)]+_0x5727de(0x121)+_0x2b35f2);}catch(_0x411197){if(_0x411197 instanceof api_error_1[_0x5727de(0x120)])throw _0x411197;throw new bad_request_error_1[(_0x5727de(0x131))](_0x411197);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a211_0x4e0547(0x129)])(providers_tokens_1[a211_0x4e0547(0xfa)][a211_0x4e0547(0xf8)])),__metadata(a211_0x4e0547(0x11e),[bitbucket_server_api_service_1[a211_0x4e0547(0x13a)],bitbucket_server_credentials_dto_1[a211_0x4e0547(0x100)]])],BitbucketServerRepoService),exports[a211_0x4e0547(0xf6)]=BitbucketServerRepoService;function a211_0x3d01(_0x28d478,_0x2386a6){const _0x1183e3=a211_0x2605();return a211_0x3d01=function(_0x2fb4b7,_0x11b107){_0x2fb4b7=_0x2fb4b7-0xed;let _0x260540=_0x1183e3[_0x2fb4b7];return _0x260540;},a211_0x3d01(_0x28d478,_0x2386a6);}function a211_0x2605(){const _0x1b60f2=['ApiError','/repos/','delete','apply','defineProperty','5416972PDKnFD','99880WhECUZ','defaultBranch','project','Inject','getOne','../../api/bitbucket-server-api.service','/default-branch','typedi','function','../../../internal/git.internal','then','BadRequestError','baseURL','decorate','request','isLastPage','150950VJdFoM','getOwnPropertyDescriptor','3034836QvedSC','put','BitbucketServerApiService','displayId','map','length','isDefault','api','../../../../../core/errors/not-found.error','projects/','joinURL','find','slug','/repos','BitbucketServerRepoService','apiBody','credentials','../../../../../core/errors/api.error','Tokens','(((.+)+)+)+$','3658251XEyyqJ','get','GitRepoService','./git-repo.service','BitbucketServerCredentialsDto','constructor','update','/projects/','metadata','4gaboBa','Repo','__esModule','createEmptyBranch','toString','10076496qjDvlq','name','3492phZege','defaults','autoInit','__param','../../../../../core/errors/bad-request.error','../../../../shared/utils','git','post','create','object','642844MpuLRR','fromBitbucketServer','values','master','push','7AmQsMY','apiUrl','NotFoundError','design:paramtypes','/branches'];a211_0x2605=function(){return _0x1b60f2;};return a211_0x2605();}