const a201_0x19b48f=a201_0x33b8;(function(_0x43175e,_0x248e46){const _0x46dbfc=a201_0x33b8,_0x32e7c7=_0x43175e();while(!![]){try{const _0x554d5a=parseInt(_0x46dbfc(0x126))/0x1*(-parseInt(_0x46dbfc(0x12f))/0x2)+parseInt(_0x46dbfc(0x11a))/0x3+parseInt(_0x46dbfc(0x11b))/0x4*(-parseInt(_0x46dbfc(0x12b))/0x5)+parseInt(_0x46dbfc(0x12d))/0x6+-parseInt(_0x46dbfc(0x10f))/0x7*(-parseInt(_0x46dbfc(0x111))/0x8)+parseInt(_0x46dbfc(0x132))/0x9*(-parseInt(_0x46dbfc(0x13b))/0xa)+parseInt(_0x46dbfc(0x109))/0xb*(parseInt(_0x46dbfc(0x11e))/0xc);if(_0x554d5a===_0x248e46)break;else _0x32e7c7['push'](_0x32e7c7['shift']());}catch(_0x51b017){_0x32e7c7['push'](_0x32e7c7['shift']());}}}(a201_0x2183,0xc64e6));const a201_0x280c44=(function(){let _0x2fffba=!![];return function(_0xefecf6,_0x245aab){const _0x5bcca8=_0x2fffba?function(){if(_0x245aab){const _0x566c79=_0x245aab['apply'](_0xefecf6,arguments);return _0x245aab=null,_0x566c79;}}:function(){};return _0x2fffba=![],_0x5bcca8;};}()),a201_0x9231a1=a201_0x280c44(this,function(){const _0x14f1c2=a201_0x33b8;return a201_0x9231a1[_0x14f1c2(0x11c)]()[_0x14f1c2(0x144)](_0x14f1c2(0x14a))[_0x14f1c2(0x11c)]()[_0x14f1c2(0x10a)](a201_0x9231a1)[_0x14f1c2(0x144)](_0x14f1c2(0x14a));});a201_0x9231a1();'use strict';var __decorate=this&&this['__decorate']||function(_0x2952c0,_0x2ca193,_0x504a11,_0x5d6673){const _0xb0357e=a201_0x33b8;var _0x47b9c3=arguments[_0xb0357e(0x104)],_0x5de2e7=_0x47b9c3<0x3?_0x2ca193:_0x5d6673===null?_0x5d6673=Object['getOwnPropertyDescriptor'](_0x2ca193,_0x504a11):_0x5d6673,_0x426de6;if(typeof Reflect===_0xb0357e(0x117)&&typeof Reflect[_0xb0357e(0x10e)]===_0xb0357e(0x108))_0x5de2e7=Reflect['decorate'](_0x2952c0,_0x2ca193,_0x504a11,_0x5d6673);else{for(var _0x49478e=_0x2952c0[_0xb0357e(0x104)]-0x1;_0x49478e>=0x0;_0x49478e--)if(_0x426de6=_0x2952c0[_0x49478e])_0x5de2e7=(_0x47b9c3<0x3?_0x426de6(_0x5de2e7):_0x47b9c3>0x3?_0x426de6(_0x2ca193,_0x504a11,_0x5de2e7):_0x426de6(_0x2ca193,_0x504a11))||_0x5de2e7;}return _0x47b9c3>0x3&&_0x5de2e7&&Object['defineProperty'](_0x2ca193,_0x504a11,_0x5de2e7),_0x5de2e7;},__metadata=this&&this[a201_0x19b48f(0x134)]||function(_0x55a0b5,_0x3c92b6){const _0x340e47=a201_0x19b48f;if(typeof Reflect===_0x340e47(0x117)&&typeof Reflect[_0x340e47(0x141)]==='function')return Reflect[_0x340e47(0x141)](_0x55a0b5,_0x3c92b6);},__param=this&&this[a201_0x19b48f(0x118)]||function(_0x4e09e2,_0x3ae7d1){return function(_0x43fd76,_0x146178){_0x3ae7d1(_0x43fd76,_0x146178,_0x4e09e2);};};function a201_0x2183(){const _0x4285a2=['joinURL','/repos','length','master','NotFoundError','../../../../../core/errors/bad-request.error','function','293106OieudQ','constructor','Repo','Service','./git-repo.service','decorate','14oZwpfG','Git','4925968XqtHgM','git','../../../../shared/utils','apiUrl','/projects/','get','object','__param','../../credentials/dto/bitbucket-server-credentials.dto','3872277ogCGUy','12ziPYaO','toString','../../../internal/git.internal','168EZzsuq','fromBitbucketServer','request','then','BadRequestError','defineProperty','../../../../../core/errors/api.error','GitRepoService','1obklRu','ApiError','push','isLastPage','nextPageStart','2436065bFKcdH','apiBody','5823636vWwvVm','values','2306642XYQAdc','api','baseURL','171657qkuKxp','defaults','__metadata','createEmptyBranch','find','/default-branch','../../providers.tokens','post','autoInit','230yEbtun','getOne','BitbucketServerRepoService','BitbucketServerCredentialsDto','../../../../../core/errors/not-found.error','typedi','metadata','displayId','credentials','search','map','/repos/','projects/','delete','project','(((.+)+)+)+$','design:paramtypes','__esModule','name','defaultBranch'];a201_0x2183=function(){return _0x4285a2;};return a201_0x2183();}Object[a201_0x19b48f(0x123)](exports,a201_0x19b48f(0xff),{'value':!![]}),exports[a201_0x19b48f(0x13d)]=void 0x0;const bad_request_error_1=require(a201_0x19b48f(0x107)),not_found_error_1=require(a201_0x19b48f(0x13f)),typedi_1=require(a201_0x19b48f(0x140)),api_error_1=require(a201_0x19b48f(0x124)),bitbucket_server_api_service_1=require('../../api/bitbucket-server-api.service'),git_internal_1=require(a201_0x19b48f(0x11d)),utils_1=require(a201_0x19b48f(0x113)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a201_0x19b48f(0x10d)),providers_tokens_1=require(a201_0x19b48f(0x138)),bitbucket_server_credentials_dto_1=require(a201_0x19b48f(0x119));function a201_0x33b8(_0x348c0c,_0x59d819){const _0x53ab4e=a201_0x2183();return a201_0x33b8=function(_0x9231a1,_0x280c44){_0x9231a1=_0x9231a1-0xfe;let _0x2183d0=_0x53ab4e[_0x9231a1];return _0x2183d0;},a201_0x33b8(_0x348c0c,_0x59d819);}let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a201_0x19b48f(0x125)]{constructor(_0x347e9b,_0x4d616b){const _0x8b7fb4=a201_0x19b48f;super(_0x347e9b),this[_0x8b7fb4(0x130)]=_0x347e9b,this[_0x8b7fb4(0x149)]=_0x4d616b[_0x8b7fb4(0x149)],this[_0x8b7fb4(0x143)]=_0x4d616b;}async['create'](_0x57dc6c){const _0x4bbe24=a201_0x19b48f;try{const _0x1cef8d={'name':_0x57dc6c[_0x4bbe24(0x100)],'scmId':_0x4bbe24(0x112),'defaultBranch':_0x57dc6c[_0x4bbe24(0x101)],..._0x57dc6c[_0x4bbe24(0x12c)]||{}},_0x9042a9=await this[_0x4bbe24(0x120)][_0x4bbe24(0x139)](_0x4bbe24(0x147)+this[_0x4bbe24(0x149)]+_0x4bbe24(0x103),_0x1cef8d),_0x4abcd4=repo_class_1[_0x4bbe24(0x10b)][_0x4bbe24(0x11f)](_0x9042a9,'',this[_0x4bbe24(0x130)],this[_0x4bbe24(0x143)]);return _0x57dc6c[_0x4bbe24(0x13a)]&&await git_internal_1[_0x4bbe24(0x110)][_0x4bbe24(0x135)](_0x4abcd4,_0x57dc6c['defaultBranch']||_0x4bbe24(0x105),'',this[_0x4bbe24(0x143)]),this[_0x4bbe24(0x13c)](_0x4abcd4[_0x4bbe24(0x100)]);}catch(_0x5a4e08){if(_0x5a4e08 instanceof api_error_1[_0x4bbe24(0x127)])throw _0x5a4e08;throw new bad_request_error_1['BadRequestError'](_0x5a4e08);}}async['getAll'](){const _0x156371=a201_0x19b48f;try{const _0x2acb7d=[];let _0x1ec69a;do{_0x1ec69a=await this['request']['get'](_0x156371(0x147)+this[_0x156371(0x149)]+'/repos',{'params':{'limit':0x64,'start':_0x1ec69a?_0x1ec69a[_0x156371(0x12a)]:0x0}}),_0x2acb7d[_0x156371(0x128)](..._0x1ec69a[_0x156371(0x12e)]);}while(!_0x1ec69a[_0x156371(0x129)]);return _0x2acb7d[_0x156371(0x145)](_0x639c13=>repo_class_1[_0x156371(0x10b)][_0x156371(0x11f)](_0x639c13,(0x0,utils_1[_0x156371(0x102)])(this['request']['defaults'][_0x156371(0x131)]||'',_0x156371(0x115)+this[_0x156371(0x149)]+'/repos/'+_0x639c13['slug']),this[_0x156371(0x130)],this[_0x156371(0x143)]));}catch(_0x583b83){if(_0x583b83 instanceof api_error_1['ApiError'])throw _0x583b83;throw new not_found_error_1[(_0x156371(0x106))](_0x583b83);}}async[a201_0x19b48f(0x13c)](_0x5a0d2a){const _0x5e6966=a201_0x19b48f;var _0x338005;try{const _0x31ce7c=await this['request'][_0x5e6966(0x116)](_0x5e6966(0x147)+this[_0x5e6966(0x149)]+_0x5e6966(0x146)+_0x5a0d2a),_0x406ac4=repo_class_1[_0x5e6966(0x10b)][_0x5e6966(0x11f)](_0x31ce7c,(0x0,utils_1[_0x5e6966(0x102)])(this[_0x5e6966(0x120)][_0x5e6966(0x133)][_0x5e6966(0x131)]||'',_0x5e6966(0x115)+this['project']+_0x5e6966(0x146)+_0x5a0d2a),this['api'],this[_0x5e6966(0x143)]),_0x5e90d5=await this[_0x5e6966(0x120)]['get'](_0x406ac4[_0x5e6966(0x114)]+'/branches')[_0x5e6966(0x121)](_0xe82523=>_0xe82523['values']);return _0x406ac4[_0x5e6966(0x101)]=(_0x338005=_0x5e90d5[_0x5e6966(0x136)](_0xa7c71e=>_0xa7c71e['isDefault']===!![]))===null||_0x338005===void 0x0?void 0x0:_0x338005[_0x5e6966(0x142)],_0x406ac4;}catch(_0xd22e9b){if(_0xd22e9b instanceof api_error_1['ApiError'])throw _0xd22e9b;throw new not_found_error_1['NotFoundError'](_0xd22e9b);}}async['update'](_0x50817f,_0x36952d){const _0x25e6cc=a201_0x19b48f;try{const _0x2abe67=await this[_0x25e6cc(0x120)]['put']('projects/'+this[_0x25e6cc(0x149)]+_0x25e6cc(0x146)+_0x50817f,_0x36952d),_0x1b4974=await this[_0x25e6cc(0x120)][_0x25e6cc(0x116)](_0x25e6cc(0x147)+this[_0x25e6cc(0x149)]+'/repos/'+_0x50817f+_0x25e6cc(0x137)),_0x25332e=repo_class_1[_0x25e6cc(0x10b)]['fromBitbucketServer'](_0x2abe67,(0x0,utils_1['joinURL'])(this['request'][_0x25e6cc(0x133)][_0x25e6cc(0x131)]||'',_0x25e6cc(0x115)+this['project']+_0x25e6cc(0x146)+_0x50817f),this[_0x25e6cc(0x130)],this['credentials']);return _0x25332e['defaultBranch']=_0x1b4974[_0x25e6cc(0x142)],_0x25332e;}catch(_0x4e1a17){if(_0x4e1a17 instanceof api_error_1['ApiError'])throw _0x4e1a17;throw new not_found_error_1[(_0x25e6cc(0x106))](_0x4e1a17);}}async[a201_0x19b48f(0x148)](_0x57d1b2){const _0x384009=a201_0x19b48f;try{await this[_0x384009(0x13c)](_0x57d1b2),await this['request'][_0x384009(0x148)](_0x384009(0x147)+this[_0x384009(0x149)]+_0x384009(0x146)+_0x57d1b2);}catch(_0x544f6e){if(_0x544f6e instanceof api_error_1['ApiError'])throw _0x544f6e;throw new bad_request_error_1[(_0x384009(0x122))](_0x544f6e);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a201_0x19b48f(0x10c)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1['Tokens']['credentials'])),__metadata(a201_0x19b48f(0xfe),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1[a201_0x19b48f(0x13e)]])],BitbucketServerRepoService),exports[a201_0x19b48f(0x13d)]=BitbucketServerRepoService;