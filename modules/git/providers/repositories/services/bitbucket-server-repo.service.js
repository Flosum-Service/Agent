const a149_0x125fbb=a149_0x2838;function a149_0x3a9e(){const _0x4eab69=['create','getOne','../../../../../core/errors/not-found.error','757419SSfYfC','Service','isDefault','api','update','228duanTV','values','decorate','createEmptyBranch','isLastPage','GitRepoService','apply','Repo','__metadata','map','../repo.class','apiBody','fromBitbucketServer','/repos/','metadata','toString','../../providers.tokens','135NVnIab','ApiError','91704fbtRda','name','joinURL','typedi','getOwnPropertyDescriptor','8709960IIHzLq','../../../../../core/errors/bad-request.error','Git','search','defaults','3308285JvvPIo','352616HvuNVW','6OOrhft','defaultBranch','2126MTnJAI','object','4182269DbcjrN','BadRequestError','put','project','../../../internal/git.internal','length','BitbucketServerRepoService','then','slug','../../../../../core/errors/api.error','credentials','function','NotFoundError','../../api/bitbucket-server-api.service','git','defineProperty','get','request','apiUrl','/default-branch','./git-repo.service','__param','baseURL','/projects/','projects/','displayId','__esModule','post','(((.+)+)+)+$','/repos','../../../../shared/utils','delete'];a149_0x3a9e=function(){return _0x4eab69;};return a149_0x3a9e();}(function(_0xbaed1,_0xfa04da){const _0x484e34=a149_0x2838,_0x3c5cb1=_0xbaed1();while(!![]){try{const _0x5486af=parseInt(_0x484e34(0x139))/0x1*(-parseInt(_0x484e34(0x15a))/0x2)+parseInt(_0x484e34(0x134))/0x3+parseInt(_0x484e34(0x157))/0x4+parseInt(_0x484e34(0x156))/0x5+parseInt(_0x484e34(0x158))/0x6*(parseInt(_0x484e34(0x15c))/0x7)+parseInt(_0x484e34(0x14c))/0x8*(parseInt(_0x484e34(0x14a))/0x9)+-parseInt(_0x484e34(0x151))/0xa;if(_0x5486af===_0xfa04da)break;else _0x3c5cb1['push'](_0x3c5cb1['shift']());}catch(_0x4665e7){_0x3c5cb1['push'](_0x3c5cb1['shift']());}}}(a149_0x3a9e,0xa0ba0));const a149_0x28b1e7=(function(){let _0xb2805c=!![];return function(_0x1cbeb2,_0x41b739){const _0x328048=_0xb2805c?function(){const _0x93e48f=a149_0x2838;if(_0x41b739){const _0x13f432=_0x41b739[_0x93e48f(0x13f)](_0x1cbeb2,arguments);return _0x41b739=null,_0x13f432;}}:function(){};return _0xb2805c=![],_0x328048;};}()),a149_0x56c4ad=a149_0x28b1e7(this,function(){const _0x216525=a149_0x2838;return a149_0x56c4ad[_0x216525(0x148)]()[_0x216525(0x154)]('(((.+)+)+)+$')['toString']()['constructor'](a149_0x56c4ad)['search'](_0x216525(0x12d));});a149_0x56c4ad();'use strict';var __decorate=this&&this['__decorate']||function(_0x40542e,_0x503a29,_0x405626,_0x21ff0d){const _0x4b850d=a149_0x2838;var _0x5023f7=arguments[_0x4b850d(0x161)],_0x2278f5=_0x5023f7<0x3?_0x503a29:_0x21ff0d===null?_0x21ff0d=Object[_0x4b850d(0x150)](_0x503a29,_0x405626):_0x21ff0d,_0x8000ae;if(typeof Reflect===_0x4b850d(0x15b)&&typeof Reflect[_0x4b850d(0x13b)]===_0x4b850d(0x11c))_0x2278f5=Reflect['decorate'](_0x40542e,_0x503a29,_0x405626,_0x21ff0d);else{for(var _0x3597dd=_0x40542e['length']-0x1;_0x3597dd>=0x0;_0x3597dd--)if(_0x8000ae=_0x40542e[_0x3597dd])_0x2278f5=(_0x5023f7<0x3?_0x8000ae(_0x2278f5):_0x5023f7>0x3?_0x8000ae(_0x503a29,_0x405626,_0x2278f5):_0x8000ae(_0x503a29,_0x405626))||_0x2278f5;}return _0x5023f7>0x3&&_0x2278f5&&Object[_0x4b850d(0x120)](_0x503a29,_0x405626,_0x2278f5),_0x2278f5;},__metadata=this&&this[a149_0x125fbb(0x141)]||function(_0x461559,_0x3e645b){const _0x3746a9=a149_0x125fbb;if(typeof Reflect===_0x3746a9(0x15b)&&typeof Reflect[_0x3746a9(0x147)]===_0x3746a9(0x11c))return Reflect[_0x3746a9(0x147)](_0x461559,_0x3e645b);},__param=this&&this[a149_0x125fbb(0x126)]||function(_0x2dcdff,_0x2fc412){return function(_0x2fb087,_0xfdeac6){_0x2fc412(_0x2fb087,_0xfdeac6,_0x2dcdff);};};Object[a149_0x125fbb(0x120)](exports,a149_0x125fbb(0x12b),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a149_0x125fbb(0x152)),not_found_error_1=require(a149_0x125fbb(0x133)),typedi_1=require(a149_0x125fbb(0x14f)),api_error_1=require(a149_0x125fbb(0x11a)),bitbucket_server_api_service_1=require(a149_0x125fbb(0x11e)),git_internal_1=require(a149_0x125fbb(0x160)),utils_1=require(a149_0x125fbb(0x12f)),repo_class_1=require(a149_0x125fbb(0x143)),git_repo_service_1=require(a149_0x125fbb(0x125)),providers_tokens_1=require(a149_0x125fbb(0x149)),bitbucket_server_credentials_dto_1=require('../../credentials/dto/bitbucket-server-credentials.dto');function a149_0x2838(_0x2fad06,_0x5b7b89){const _0x246e56=a149_0x3a9e();return a149_0x2838=function(_0x56c4ad,_0x28b1e7){_0x56c4ad=_0x56c4ad-0x118;let _0x3a9ed9=_0x246e56[_0x56c4ad];return _0x3a9ed9;},a149_0x2838(_0x2fad06,_0x5b7b89);}let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a149_0x125fbb(0x13e)]{constructor(_0x3d1e8d,_0x2ff5e1){const _0x335cb7=a149_0x125fbb;super(_0x3d1e8d),this['api']=_0x3d1e8d,this['project']=_0x2ff5e1[_0x335cb7(0x15f)],this[_0x335cb7(0x11b)]=_0x2ff5e1;}async[a149_0x125fbb(0x131)](_0x5999a7){const _0x188a25=a149_0x125fbb;try{const _0x3076c8={'name':_0x5999a7[_0x188a25(0x14d)],'scmId':_0x188a25(0x11f),'defaultBranch':_0x5999a7['defaultBranch'],..._0x5999a7[_0x188a25(0x144)]||{}},_0x205bfa=await this['request'][_0x188a25(0x12c)]('projects/'+this[_0x188a25(0x15f)]+_0x188a25(0x12e),_0x3076c8),_0x135d6c=repo_class_1[_0x188a25(0x140)][_0x188a25(0x145)](_0x205bfa,'',this[_0x188a25(0x137)],this['credentials']);return _0x5999a7['autoInit']&&await git_internal_1[_0x188a25(0x153)][_0x188a25(0x13c)](_0x135d6c,_0x5999a7[_0x188a25(0x159)]||'master','',this[_0x188a25(0x11b)]),this[_0x188a25(0x132)](_0x135d6c[_0x188a25(0x14d)]);}catch(_0x2fd00a){if(_0x2fd00a instanceof api_error_1[_0x188a25(0x14b)])throw _0x2fd00a;throw new bad_request_error_1[(_0x188a25(0x15d))](_0x2fd00a);}}async['getAll'](){const _0x2825c4=a149_0x125fbb;try{const _0x38c5ba=[];let _0x18ec5e;do{_0x18ec5e=await this['request']['get'](_0x2825c4(0x129)+this['project']+_0x2825c4(0x12e),{'params':{'limit':0x64,'start':_0x18ec5e?_0x18ec5e['nextPageStart']:0x0}}),_0x38c5ba['push'](..._0x18ec5e[_0x2825c4(0x13a)]);}while(!_0x18ec5e[_0x2825c4(0x13d)]);return _0x38c5ba[_0x2825c4(0x142)](_0x4fd033=>repo_class_1[_0x2825c4(0x140)][_0x2825c4(0x145)](_0x4fd033,utils_1[_0x2825c4(0x14e)](this['request']['defaults'][_0x2825c4(0x127)]||'',_0x2825c4(0x128)+this['project']+_0x2825c4(0x146)+_0x4fd033[_0x2825c4(0x119)]),this[_0x2825c4(0x137)],this[_0x2825c4(0x11b)]));}catch(_0x3194be){if(_0x3194be instanceof api_error_1[_0x2825c4(0x14b)])throw _0x3194be;throw new not_found_error_1['NotFoundError'](_0x3194be);}}async[a149_0x125fbb(0x132)](_0x5e431f){const _0x5bfe17=a149_0x125fbb;var _0x2aee84;try{const _0xe1cc00=await this[_0x5bfe17(0x122)][_0x5bfe17(0x121)](_0x5bfe17(0x129)+this[_0x5bfe17(0x15f)]+_0x5bfe17(0x146)+_0x5e431f),_0x4e81cb=repo_class_1[_0x5bfe17(0x140)][_0x5bfe17(0x145)](_0xe1cc00,utils_1[_0x5bfe17(0x14e)](this[_0x5bfe17(0x122)][_0x5bfe17(0x155)][_0x5bfe17(0x127)]||'',_0x5bfe17(0x128)+this['project']+_0x5bfe17(0x146)+_0x5e431f),this[_0x5bfe17(0x137)],this[_0x5bfe17(0x11b)]),_0x490eb8=await this[_0x5bfe17(0x122)]['get'](_0x4e81cb[_0x5bfe17(0x123)]+'/branches')[_0x5bfe17(0x118)](_0x3dfee1=>_0x3dfee1[_0x5bfe17(0x13a)]);return _0x4e81cb['defaultBranch']=(_0x2aee84=_0x490eb8['find'](_0x5cd33d=>_0x5cd33d[_0x5bfe17(0x136)]===!![]))===null||_0x2aee84===void 0x0?void 0x0:_0x2aee84[_0x5bfe17(0x12a)],_0x4e81cb;}catch(_0xad4ed0){if(_0xad4ed0 instanceof api_error_1[_0x5bfe17(0x14b)])throw _0xad4ed0;throw new not_found_error_1[(_0x5bfe17(0x11d))](_0xad4ed0);}}async[a149_0x125fbb(0x138)](_0x11453e,_0x2091ff){const _0x5e8fbd=a149_0x125fbb;try{const _0x1fc605=await this[_0x5e8fbd(0x122)][_0x5e8fbd(0x15e)](_0x5e8fbd(0x129)+this['project']+_0x5e8fbd(0x146)+_0x11453e,_0x2091ff),_0xadef2e=await this[_0x5e8fbd(0x122)]['get'](_0x5e8fbd(0x129)+this[_0x5e8fbd(0x15f)]+_0x5e8fbd(0x146)+_0x11453e+_0x5e8fbd(0x124)),_0x30757e=repo_class_1['Repo'][_0x5e8fbd(0x145)](_0x1fc605,utils_1[_0x5e8fbd(0x14e)](this['request'][_0x5e8fbd(0x155)][_0x5e8fbd(0x127)]||'',_0x5e8fbd(0x128)+this['project']+'/repos/'+_0x11453e),this['api'],this['credentials']);return _0x30757e[_0x5e8fbd(0x159)]=_0xadef2e['displayId'],_0x30757e;}catch(_0x4e360a){if(_0x4e360a instanceof api_error_1[_0x5e8fbd(0x14b)])throw _0x4e360a;throw new not_found_error_1[(_0x5e8fbd(0x11d))](_0x4e360a);}}async[a149_0x125fbb(0x130)](_0x3984d4){const _0x31b8d2=a149_0x125fbb;try{await this['getOne'](_0x3984d4),await this[_0x31b8d2(0x122)][_0x31b8d2(0x130)](_0x31b8d2(0x129)+this['project']+_0x31b8d2(0x146)+_0x3984d4);}catch(_0x404187){if(_0x404187 instanceof api_error_1[_0x31b8d2(0x14b)])throw _0x404187;throw new bad_request_error_1[(_0x31b8d2(0x15d))](_0x404187);}}};BitbucketServerRepoService=__decorate([typedi_1[a149_0x125fbb(0x135)](),__param(0x1,typedi_1['Inject'](providers_tokens_1['Tokens'][a149_0x125fbb(0x11b)])),__metadata('design:paramtypes',[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a149_0x125fbb(0x162)]=BitbucketServerRepoService;