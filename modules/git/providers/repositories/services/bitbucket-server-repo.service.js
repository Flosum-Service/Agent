const a227_0x177a25=a227_0xde90;(function(_0x4bcae2,_0x765470){const _0x20bff2=a227_0xde90,_0x54da0f=_0x4bcae2();while(!![]){try{const _0x59dcab=parseInt(_0x20bff2(0xd8))/0x1+-parseInt(_0x20bff2(0x10a))/0x2*(parseInt(_0x20bff2(0xed))/0x3)+-parseInt(_0x20bff2(0xd9))/0x4*(parseInt(_0x20bff2(0xe1))/0x5)+parseInt(_0x20bff2(0x10f))/0x6*(-parseInt(_0x20bff2(0xdc))/0x7)+parseInt(_0x20bff2(0x111))/0x8*(parseInt(_0x20bff2(0xee))/0x9)+-parseInt(_0x20bff2(0xe9))/0xa+parseInt(_0x20bff2(0xd4))/0xb;if(_0x59dcab===_0x765470)break;else _0x54da0f['push'](_0x54da0f['shift']());}catch(_0xb4fb3d){_0x54da0f['push'](_0x54da0f['shift']());}}}(a227_0x4e08,0x4a1e7));const a227_0x2e2230=(function(){let _0x26afc2=!![];return function(_0x43b1b9,_0x2eb514){const _0x4e812a=_0x26afc2?function(){const _0x3fc8a7=a227_0xde90;if(_0x2eb514){const _0x1852be=_0x2eb514[_0x3fc8a7(0xdf)](_0x43b1b9,arguments);return _0x2eb514=null,_0x1852be;}}:function(){};return _0x26afc2=![],_0x4e812a;};}()),a227_0x258d4e=a227_0x2e2230(this,function(){const _0x46e2a3=a227_0xde90;return a227_0x258d4e[_0x46e2a3(0xfd)]()[_0x46e2a3(0xe6)]('(((.+)+)+)+$')[_0x46e2a3(0xfd)]()[_0x46e2a3(0x107)](a227_0x258d4e)[_0x46e2a3(0xe6)](_0x46e2a3(0x11c));});function a227_0x4e08(){const _0x5c677d=['NotFoundError','2TBJUkK','decorate','git','apiBody','joinURL','6wEszQt','master','16jlXfPb','__metadata','defineProperty','nextPageStart','delete','/default-branch','projects/','../../providers.tokens','Git','/branches','displayId','(((.+)+)+)+$','baseURL','Repo','../../api/bitbucket-server-api.service','3680215MPkimj','__param','metadata','autoInit','515370gpeafs','808UlQAib','put','../../../../shared/utils','228529OCgjUQ','../repo.class','project','apply','length','11705tFcJXj','__decorate','credentials','push','function','search','find','./git-repo.service','692500GmftyP','get','defaults','request','30549UiyjlP','173781moTdeO','Service','isDefault','/projects/','map','fromBitbucketServer','../../credentials/dto/bitbucket-server-credentials.dto','create','BadRequestError','name','object','../../../internal/git.internal','ApiError','/repos','BitbucketServerRepoService','toString','/repos/','api','createEmptyBranch','BitbucketServerApiService','Inject','values','then','defaultBranch','design:paramtypes','constructor','getOne'];a227_0x4e08=function(){return _0x5c677d;};return a227_0x4e08();}a227_0x258d4e();'use strict';var __decorate=this&&this[a227_0x177a25(0xe2)]||function(_0x57209b,_0x55ec08,_0x2e8ea9,_0x54b8f){const _0x2ca363=a227_0x177a25;var _0x34fb56=arguments[_0x2ca363(0xe0)],_0x5f2748=_0x34fb56<0x3?_0x55ec08:_0x54b8f===null?_0x54b8f=Object['getOwnPropertyDescriptor'](_0x55ec08,_0x2e8ea9):_0x54b8f,_0x241b5d;if(typeof Reflect===_0x2ca363(0xf8)&&typeof Reflect[_0x2ca363(0x10b)]===_0x2ca363(0xe5))_0x5f2748=Reflect['decorate'](_0x57209b,_0x55ec08,_0x2e8ea9,_0x54b8f);else{for(var _0x34082=_0x57209b[_0x2ca363(0xe0)]-0x1;_0x34082>=0x0;_0x34082--)if(_0x241b5d=_0x57209b[_0x34082])_0x5f2748=(_0x34fb56<0x3?_0x241b5d(_0x5f2748):_0x34fb56>0x3?_0x241b5d(_0x55ec08,_0x2e8ea9,_0x5f2748):_0x241b5d(_0x55ec08,_0x2e8ea9))||_0x5f2748;}return _0x34fb56>0x3&&_0x5f2748&&Object[_0x2ca363(0x113)](_0x55ec08,_0x2e8ea9,_0x5f2748),_0x5f2748;},__metadata=this&&this[a227_0x177a25(0x112)]||function(_0x7a5fa9,_0x2687f4){const _0x2b65ed=a227_0x177a25;if(typeof Reflect==='object'&&typeof Reflect[_0x2b65ed(0xd6)]==='function')return Reflect[_0x2b65ed(0xd6)](_0x7a5fa9,_0x2687f4);},__param=this&&this[a227_0x177a25(0xd5)]||function(_0x460803,_0x366969){return function(_0x391d1d,_0x5bac69){_0x366969(_0x391d1d,_0x5bac69,_0x460803);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;function a227_0xde90(_0x508016,_0x15c9d2){const _0x4e8bb3=a227_0x4e08();return a227_0xde90=function(_0x258d4e,_0x2e2230){_0x258d4e=_0x258d4e-0xd1;let _0x4e0830=_0x4e8bb3[_0x258d4e];return _0x4e0830;},a227_0xde90(_0x508016,_0x15c9d2);}const bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require('typedi'),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a227_0x177a25(0xd3)),git_internal_1=require(a227_0x177a25(0xf9)),utils_1=require(a227_0x177a25(0xdb)),repo_class_1=require(a227_0x177a25(0xdd)),git_repo_service_1=require(a227_0x177a25(0xe8)),providers_tokens_1=require(a227_0x177a25(0x118)),bitbucket_server_credentials_dto_1=require(a227_0x177a25(0xf4));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x5ebfaf,_0x1cbcdb){const _0x272fcd=a227_0x177a25;super(_0x5ebfaf),this[_0x272fcd(0xff)]=_0x5ebfaf,this[_0x272fcd(0xde)]=_0x1cbcdb[_0x272fcd(0xde)],this[_0x272fcd(0xe3)]=_0x1cbcdb;}async[a227_0x177a25(0xf5)](_0x4a354b){const _0x53ec93=a227_0x177a25;try{const _0x37c23f={'name':_0x4a354b[_0x53ec93(0xf7)],'scmId':_0x53ec93(0x10c),'defaultBranch':_0x4a354b[_0x53ec93(0x105)],..._0x4a354b[_0x53ec93(0x10d)]||{}},_0x3abe7a=await this[_0x53ec93(0xec)]['post'](_0x53ec93(0x117)+this['project']+'/repos',_0x37c23f),_0x59b609=repo_class_1[_0x53ec93(0xd2)]['fromBitbucketServer'](_0x3abe7a,'',this[_0x53ec93(0xff)],this['credentials']);return _0x4a354b[_0x53ec93(0xd7)]&&await git_internal_1[_0x53ec93(0x119)][_0x53ec93(0x100)](_0x59b609,_0x4a354b[_0x53ec93(0x105)]||_0x53ec93(0x110),'',this[_0x53ec93(0xe3)]),this[_0x53ec93(0x108)](_0x59b609[_0x53ec93(0xf7)]);}catch(_0x59cc8f){if(_0x59cc8f instanceof api_error_1[_0x53ec93(0xfa)])throw _0x59cc8f;throw new bad_request_error_1[(_0x53ec93(0xf6))](_0x59cc8f);}}async['getAll'](){const _0x211594=a227_0x177a25;try{const _0x28986b=[];let _0x182471;do{_0x182471=await this[_0x211594(0xec)][_0x211594(0xea)]('projects/'+this['project']+_0x211594(0xfb),{'params':{'limit':0x64,'start':_0x182471?_0x182471[_0x211594(0x114)]:0x0}}),_0x28986b[_0x211594(0xe4)](..._0x182471[_0x211594(0x103)]);}while(!_0x182471['isLastPage']);return _0x28986b[_0x211594(0xf2)](_0x4fe595=>repo_class_1[_0x211594(0xd2)]['fromBitbucketServer'](_0x4fe595,(0x0,utils_1[_0x211594(0x10e)])(this[_0x211594(0xec)][_0x211594(0xeb)][_0x211594(0xd1)]||'','/projects/'+this[_0x211594(0xde)]+_0x211594(0xfe)+_0x4fe595['slug']),this['api'],this[_0x211594(0xe3)]));}catch(_0x1ba0ee){if(_0x1ba0ee instanceof api_error_1[_0x211594(0xfa)])throw _0x1ba0ee;throw new not_found_error_1[(_0x211594(0x109))](_0x1ba0ee);}}async['getOne'](_0x2ff5f5){const _0x8c926d=a227_0x177a25;var _0x16a4df;try{const _0x50d3dd=await this['request'][_0x8c926d(0xea)]('projects/'+this[_0x8c926d(0xde)]+_0x8c926d(0xfe)+_0x2ff5f5),_0x543f99=repo_class_1[_0x8c926d(0xd2)][_0x8c926d(0xf3)](_0x50d3dd,(0x0,utils_1[_0x8c926d(0x10e)])(this['request'][_0x8c926d(0xeb)]['baseURL']||'',_0x8c926d(0xf1)+this['project']+_0x8c926d(0xfe)+_0x2ff5f5),this[_0x8c926d(0xff)],this[_0x8c926d(0xe3)]),_0x1b8ad8=await this[_0x8c926d(0xec)][_0x8c926d(0xea)](_0x543f99['apiUrl']+_0x8c926d(0x11a))[_0x8c926d(0x104)](_0x55018c=>_0x55018c[_0x8c926d(0x103)]);return _0x543f99[_0x8c926d(0x105)]=(_0x16a4df=_0x1b8ad8[_0x8c926d(0xe7)](_0x594bf8=>_0x594bf8[_0x8c926d(0xf0)]===!![]))===null||_0x16a4df===void 0x0?void 0x0:_0x16a4df[_0x8c926d(0x11b)],_0x543f99;}catch(_0x25d216){if(_0x25d216 instanceof api_error_1['ApiError'])throw _0x25d216;throw new not_found_error_1[(_0x8c926d(0x109))](_0x25d216);}}async['update'](_0xe83222,_0x441810){const _0x13c215=a227_0x177a25;try{const _0x53aafb=await this[_0x13c215(0xec)][_0x13c215(0xda)](_0x13c215(0x117)+this[_0x13c215(0xde)]+_0x13c215(0xfe)+_0xe83222,_0x441810),_0x3a058c=await this[_0x13c215(0xec)]['get']('projects/'+this[_0x13c215(0xde)]+'/repos/'+_0xe83222+_0x13c215(0x116)),_0x31c1db=repo_class_1[_0x13c215(0xd2)][_0x13c215(0xf3)](_0x53aafb,(0x0,utils_1[_0x13c215(0x10e)])(this[_0x13c215(0xec)]['defaults'][_0x13c215(0xd1)]||'',_0x13c215(0xf1)+this[_0x13c215(0xde)]+_0x13c215(0xfe)+_0xe83222),this['api'],this['credentials']);return _0x31c1db['defaultBranch']=_0x3a058c['displayId'],_0x31c1db;}catch(_0x5c5f53){if(_0x5c5f53 instanceof api_error_1[_0x13c215(0xfa)])throw _0x5c5f53;throw new not_found_error_1[(_0x13c215(0x109))](_0x5c5f53);}}async[a227_0x177a25(0x115)](_0x25359b){const _0x26e685=a227_0x177a25;try{await this['getOne'](_0x25359b),await this[_0x26e685(0xec)][_0x26e685(0x115)]('projects/'+this[_0x26e685(0xde)]+_0x26e685(0xfe)+_0x25359b);}catch(_0x3671f6){if(_0x3671f6 instanceof api_error_1[_0x26e685(0xfa)])throw _0x3671f6;throw new bad_request_error_1[(_0x26e685(0xf6))](_0x3671f6);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a227_0x177a25(0xef)])(),__param(0x1,(0x0,typedi_1[a227_0x177a25(0x102)])(providers_tokens_1['Tokens']['credentials'])),__metadata(a227_0x177a25(0x106),[bitbucket_server_api_service_1[a227_0x177a25(0x101)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a227_0x177a25(0xfc)]=BitbucketServerRepoService;