const a206_0x5c3c8c=a206_0x5f10;(function(_0x1f0f27,_0x7ee024){const _0x2a9971=a206_0x5f10,_0x43bb76=_0x1f0f27();while(!![]){try{const _0x46af62=-parseInt(_0x2a9971(0x22a))/0x1*(-parseInt(_0x2a9971(0x218))/0x2)+-parseInt(_0x2a9971(0x20d))/0x3+-parseInt(_0x2a9971(0x1fd))/0x4+-parseInt(_0x2a9971(0x1f0))/0x5*(-parseInt(_0x2a9971(0x211))/0x6)+-parseInt(_0x2a9971(0x1f5))/0x7+-parseInt(_0x2a9971(0x22e))/0x8*(parseInt(_0x2a9971(0x1ef))/0x9)+parseInt(_0x2a9971(0x235))/0xa;if(_0x46af62===_0x7ee024)break;else _0x43bb76['push'](_0x43bb76['shift']());}catch(_0x5f0def){_0x43bb76['push'](_0x43bb76['shift']());}}}(a206_0x114e,0x2be10));function a206_0x5f10(_0x312d76,_0x2e6c58){const _0x524e52=a206_0x114e();return a206_0x5f10=function(_0x40ad14,_0x21e271){_0x40ad14=_0x40ad14-0x1ea;let _0x114ec7=_0x524e52[_0x40ad14];return _0x114ec7;},a206_0x5f10(_0x312d76,_0x2e6c58);}const a206_0x21e271=(function(){let _0x2d2eff=!![];return function(_0x10b84c,_0x35f3b8){const _0x3bdbcc=_0x2d2eff?function(){if(_0x35f3b8){const _0x80af8b=_0x35f3b8['apply'](_0x10b84c,arguments);return _0x35f3b8=null,_0x80af8b;}}:function(){};return _0x2d2eff=![],_0x3bdbcc;};}()),a206_0x40ad14=a206_0x21e271(this,function(){const _0x5d6bb2=a206_0x5f10;return a206_0x40ad14[_0x5d6bb2(0x21a)]()[_0x5d6bb2(0x234)]('(((.+)+)+)+$')['toString']()[_0x5d6bb2(0x203)](a206_0x40ad14)[_0x5d6bb2(0x234)](_0x5d6bb2(0x214));});function a206_0x114e(){const _0x3c44ce=['joinURL','put','design:paramtypes','function','constructor','/projects/','isDefault','autoInit','find','metadata','GitRepoService','object','/repos','Repo','288312CEoFae','git','update','../../api/bitbucket-server-api.service','6bYbCSy','BitbucketServerApiService','delete','(((.+)+)+)+$','__decorate','fromBitbucketServer','../../../../../core/errors/bad-request.error','279788lIJjlG','getOne','toString','apiUrl','baseURL','api','/repos/','map','../repo.class','BadRequestError','createEmptyBranch','defaults','BitbucketServerRepoService','projects/','request','../../providers.tokens','ApiError','../../../../../core/errors/not-found.error','1jBhiXJ','get','credentials','getOwnPropertyDescriptor','753992DQYDzd','./git-repo.service','defineProperty','project','__metadata','length','search','8809270TelgSt','/default-branch','Inject','defaultBranch','decorate','post','27sgxmpt','63155SWgZcr','push','__esModule','getAll','displayId','2314410QvhhlI','name','BitbucketServerCredentialsDto','values','create','../../../../../core/errors/api.error','isLastPage','NotFoundError','576972qTMShQ','slug'];a206_0x114e=function(){return _0x3c44ce;};return a206_0x114e();}a206_0x40ad14();'use strict';var __decorate=this&&this[a206_0x5c3c8c(0x215)]||function(_0x32fd2b,_0xf67a69,_0x4f9e14,_0x424e54){const _0x35cf89=a206_0x5c3c8c;var _0x415195=arguments[_0x35cf89(0x233)],_0x530cd1=_0x415195<0x3?_0xf67a69:_0x424e54===null?_0x424e54=Object[_0x35cf89(0x22d)](_0xf67a69,_0x4f9e14):_0x424e54,_0x27ad15;if(typeof Reflect===_0x35cf89(0x20a)&&typeof Reflect[_0x35cf89(0x1ed)]===_0x35cf89(0x202))_0x530cd1=Reflect['decorate'](_0x32fd2b,_0xf67a69,_0x4f9e14,_0x424e54);else{for(var _0x298472=_0x32fd2b[_0x35cf89(0x233)]-0x1;_0x298472>=0x0;_0x298472--)if(_0x27ad15=_0x32fd2b[_0x298472])_0x530cd1=(_0x415195<0x3?_0x27ad15(_0x530cd1):_0x415195>0x3?_0x27ad15(_0xf67a69,_0x4f9e14,_0x530cd1):_0x27ad15(_0xf67a69,_0x4f9e14))||_0x530cd1;}return _0x415195>0x3&&_0x530cd1&&Object[_0x35cf89(0x230)](_0xf67a69,_0x4f9e14,_0x530cd1),_0x530cd1;},__metadata=this&&this[a206_0x5c3c8c(0x232)]||function(_0x1db394,_0x4bd84e){const _0x1f186f=a206_0x5c3c8c;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x1f186f(0x202))return Reflect[_0x1f186f(0x208)](_0x1db394,_0x4bd84e);},__param=this&&this['__param']||function(_0x1fa040,_0xcde7fd){return function(_0xf09615,_0x3fac54){_0xcde7fd(_0xf09615,_0x3fac54,_0x1fa040);};};Object[a206_0x5c3c8c(0x230)](exports,a206_0x5c3c8c(0x1f2),{'value':!![]}),exports[a206_0x5c3c8c(0x224)]=void 0x0;const bad_request_error_1=require(a206_0x5c3c8c(0x217)),not_found_error_1=require(a206_0x5c3c8c(0x229)),typedi_1=require('typedi'),api_error_1=require(a206_0x5c3c8c(0x1fa)),bitbucket_server_api_service_1=require(a206_0x5c3c8c(0x210)),git_internal_1=require('../../../internal/git.internal'),utils_1=require('../../../../shared/utils'),repo_class_1=require(a206_0x5c3c8c(0x220)),git_repo_service_1=require(a206_0x5c3c8c(0x22f)),providers_tokens_1=require(a206_0x5c3c8c(0x227)),bitbucket_server_credentials_dto_1=require('../../credentials/dto/bitbucket-server-credentials.dto');let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a206_0x5c3c8c(0x209)]{constructor(_0x4e7693,_0x4a60f6){const _0x48f0ed=a206_0x5c3c8c;super(_0x4e7693),this[_0x48f0ed(0x21d)]=_0x4e7693,this['project']=_0x4a60f6[_0x48f0ed(0x231)],this[_0x48f0ed(0x22c)]=_0x4a60f6;}async[a206_0x5c3c8c(0x1f9)](_0x2a3698){const _0x51bd2e=a206_0x5c3c8c;try{const _0x10dc2a={'name':_0x2a3698[_0x51bd2e(0x1f6)],'scmId':_0x51bd2e(0x20e),'defaultBranch':_0x2a3698[_0x51bd2e(0x1ec)],..._0x2a3698['apiBody']||{}},_0x3a7f17=await this[_0x51bd2e(0x226)][_0x51bd2e(0x1ee)](_0x51bd2e(0x225)+this['project']+_0x51bd2e(0x20b),_0x10dc2a),_0xbfee4c=repo_class_1[_0x51bd2e(0x20c)][_0x51bd2e(0x216)](_0x3a7f17,'',this[_0x51bd2e(0x21d)],this['credentials']);return _0x2a3698[_0x51bd2e(0x206)]&&await git_internal_1['Git'][_0x51bd2e(0x222)](_0xbfee4c,_0x2a3698['defaultBranch']||'master','',this[_0x51bd2e(0x22c)]),this['getOne'](_0xbfee4c[_0x51bd2e(0x1f6)]);}catch(_0x27196b){if(_0x27196b instanceof api_error_1[_0x51bd2e(0x228)])throw _0x27196b;throw new bad_request_error_1[(_0x51bd2e(0x221))](_0x27196b);}}async[a206_0x5c3c8c(0x1f3)](){const _0x5898b0=a206_0x5c3c8c;try{const _0x32a2e2=[];let _0x3317b7;do{_0x3317b7=await this[_0x5898b0(0x226)][_0x5898b0(0x22b)](_0x5898b0(0x225)+this[_0x5898b0(0x231)]+_0x5898b0(0x20b),{'params':{'limit':0x64,'start':_0x3317b7?_0x3317b7['nextPageStart']:0x0}}),_0x32a2e2[_0x5898b0(0x1f1)](..._0x3317b7[_0x5898b0(0x1f8)]);}while(!_0x3317b7[_0x5898b0(0x1fb)]);return _0x32a2e2[_0x5898b0(0x21f)](_0x9ca98b=>repo_class_1[_0x5898b0(0x20c)][_0x5898b0(0x216)](_0x9ca98b,(0x0,utils_1[_0x5898b0(0x1ff)])(this['request'][_0x5898b0(0x223)][_0x5898b0(0x21c)]||'',_0x5898b0(0x204)+this[_0x5898b0(0x231)]+_0x5898b0(0x21e)+_0x9ca98b[_0x5898b0(0x1fe)]),this[_0x5898b0(0x21d)],this[_0x5898b0(0x22c)]));}catch(_0x282c6c){if(_0x282c6c instanceof api_error_1[_0x5898b0(0x228)])throw _0x282c6c;throw new not_found_error_1[(_0x5898b0(0x1fc))](_0x282c6c);}}async[a206_0x5c3c8c(0x219)](_0x21ca1a){const _0xdd789e=a206_0x5c3c8c;var _0x1cd634;try{const _0x286843=await this['request'][_0xdd789e(0x22b)](_0xdd789e(0x225)+this[_0xdd789e(0x231)]+_0xdd789e(0x21e)+_0x21ca1a),_0x545eb3=repo_class_1[_0xdd789e(0x20c)][_0xdd789e(0x216)](_0x286843,(0x0,utils_1[_0xdd789e(0x1ff)])(this[_0xdd789e(0x226)][_0xdd789e(0x223)][_0xdd789e(0x21c)]||'','/projects/'+this['project']+_0xdd789e(0x21e)+_0x21ca1a),this[_0xdd789e(0x21d)],this['credentials']),_0xb17d84=await this[_0xdd789e(0x226)]['get'](_0x545eb3[_0xdd789e(0x21b)]+'/branches')['then'](_0x31052d=>_0x31052d['values']);return _0x545eb3[_0xdd789e(0x1ec)]=(_0x1cd634=_0xb17d84[_0xdd789e(0x207)](_0x536292=>_0x536292[_0xdd789e(0x205)]===!![]))===null||_0x1cd634===void 0x0?void 0x0:_0x1cd634[_0xdd789e(0x1f4)],_0x545eb3;}catch(_0x41e19c){if(_0x41e19c instanceof api_error_1[_0xdd789e(0x228)])throw _0x41e19c;throw new not_found_error_1['NotFoundError'](_0x41e19c);}}async[a206_0x5c3c8c(0x20f)](_0x2273c6,_0x51f7b2){const _0x1b55bd=a206_0x5c3c8c;try{const _0x371a49=await this[_0x1b55bd(0x226)][_0x1b55bd(0x200)](_0x1b55bd(0x225)+this[_0x1b55bd(0x231)]+_0x1b55bd(0x21e)+_0x2273c6,_0x51f7b2),_0x39a53d=await this[_0x1b55bd(0x226)][_0x1b55bd(0x22b)](_0x1b55bd(0x225)+this['project']+_0x1b55bd(0x21e)+_0x2273c6+_0x1b55bd(0x1ea)),_0x124997=repo_class_1[_0x1b55bd(0x20c)]['fromBitbucketServer'](_0x371a49,(0x0,utils_1[_0x1b55bd(0x1ff)])(this[_0x1b55bd(0x226)]['defaults'][_0x1b55bd(0x21c)]||'',_0x1b55bd(0x204)+this[_0x1b55bd(0x231)]+_0x1b55bd(0x21e)+_0x2273c6),this[_0x1b55bd(0x21d)],this[_0x1b55bd(0x22c)]);return _0x124997[_0x1b55bd(0x1ec)]=_0x39a53d[_0x1b55bd(0x1f4)],_0x124997;}catch(_0x3cc342){if(_0x3cc342 instanceof api_error_1[_0x1b55bd(0x228)])throw _0x3cc342;throw new not_found_error_1[(_0x1b55bd(0x1fc))](_0x3cc342);}}async[a206_0x5c3c8c(0x213)](_0x248778){const _0x4929be=a206_0x5c3c8c;try{await this[_0x4929be(0x219)](_0x248778),await this[_0x4929be(0x226)]['delete'](_0x4929be(0x225)+this[_0x4929be(0x231)]+_0x4929be(0x21e)+_0x248778);}catch(_0x3d5420){if(_0x3d5420 instanceof api_error_1[_0x4929be(0x228)])throw _0x3d5420;throw new bad_request_error_1[(_0x4929be(0x221))](_0x3d5420);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a206_0x5c3c8c(0x1eb)])(providers_tokens_1['Tokens']['credentials'])),__metadata(a206_0x5c3c8c(0x201),[bitbucket_server_api_service_1[a206_0x5c3c8c(0x212)],bitbucket_server_credentials_dto_1[a206_0x5c3c8c(0x1f7)]])],BitbucketServerRepoService),exports[a206_0x5c3c8c(0x224)]=BitbucketServerRepoService;