const a237_0x499821=a237_0x5508;function a237_0x5508(_0x13444f,_0x18159c){const _0x5247af=a237_0x2532();return a237_0x5508=function(_0xcda6ac,_0x3acc80){_0xcda6ac=_0xcda6ac-0x19d;let _0x2532c1=_0x5247af[_0xcda6ac];return _0x2532c1;},a237_0x5508(_0x13444f,_0x18159c);}(function(_0x2ca13c,_0x3e33ca){const _0x244900=a237_0x5508,_0x322499=_0x2ca13c();while(!![]){try{const _0x40d452=parseInt(_0x244900(0x1b1))/0x1*(parseInt(_0x244900(0x1cf))/0x2)+-parseInt(_0x244900(0x1b8))/0x3*(parseInt(_0x244900(0x1a7))/0x4)+parseInt(_0x244900(0x1c0))/0x5+parseInt(_0x244900(0x1a5))/0x6+parseInt(_0x244900(0x1c7))/0x7+-parseInt(_0x244900(0x1df))/0x8*(-parseInt(_0x244900(0x1aa))/0x9)+-parseInt(_0x244900(0x1bc))/0xa;if(_0x40d452===_0x3e33ca)break;else _0x322499['push'](_0x322499['shift']());}catch(_0x3dd22f){_0x322499['push'](_0x322499['shift']());}}}(a237_0x2532,0x97f4e));const a237_0x3acc80=(function(){let _0x57a090=!![];return function(_0x297d90,_0x17a11c){const _0x22e267=_0x57a090?function(){const _0x23f0f7=a237_0x5508;if(_0x17a11c){const _0x136c8c=_0x17a11c[_0x23f0f7(0x1d8)](_0x297d90,arguments);return _0x17a11c=null,_0x136c8c;}}:function(){};return _0x57a090=![],_0x22e267;};}()),a237_0xcda6ac=a237_0x3acc80(this,function(){const _0xc8e399=a237_0x5508;return a237_0xcda6ac[_0xc8e399(0x1dc)]()[_0xc8e399(0x1b5)]('(((.+)+)+)+$')['toString']()[_0xc8e399(0x19f)](a237_0xcda6ac)[_0xc8e399(0x1b5)](_0xc8e399(0x1c5));});a237_0xcda6ac();function a237_0x2532(){const _0x1e4f6b=['isLastPage','then','7264728VMuOsp','displayId','4kjHBzJ','../repo.class','BitbucketServerRepoService','2349kLWFwJ','put','length','createEmptyBranch','function','create','projects/','132221hGpqtb','name','values','NotFoundError','search','fromBitbucketServer','find','2740377ivxExI','object','./git-repo.service','api','14587840xVetsM','update','defaultBranch','Tokens','2110015jmmcJx','apiUrl','baseURL','project','/repos','(((.+)+)+)+$','../../../../../core/errors/api.error','491981AmBjsE','../../api/bitbucket-server-api.service','/branches','get','ApiError','joinURL','credentials','BadRequestError','2qppMSf','Inject','../../../../../core/errors/not-found.error','BitbucketServerApiService','decorate','__decorate','getOne','defaults','request','apply','master','Service','../../../../../core/errors/bad-request.error','toString','nextPageStart','../../providers.tokens','35536tyVLIU','defineProperty','metadata','map','../../../../shared/utils','Repo','__esModule','constructor','/repos/','git','GitRepoService'];a237_0x2532=function(){return _0x1e4f6b;};return a237_0x2532();}'use strict';var __decorate=this&&this[a237_0x499821(0x1d4)]||function(_0x1e6b12,_0x685f3f,_0x243b0f,_0x4dbf65){const _0x216b89=a237_0x499821;var _0x337292=arguments['length'],_0x47dbb7=_0x337292<0x3?_0x685f3f:_0x4dbf65===null?_0x4dbf65=Object['getOwnPropertyDescriptor'](_0x685f3f,_0x243b0f):_0x4dbf65,_0xede40f;if(typeof Reflect===_0x216b89(0x1b9)&&typeof Reflect[_0x216b89(0x1d3)]===_0x216b89(0x1ae))_0x47dbb7=Reflect[_0x216b89(0x1d3)](_0x1e6b12,_0x685f3f,_0x243b0f,_0x4dbf65);else{for(var _0x7c7c0e=_0x1e6b12[_0x216b89(0x1ac)]-0x1;_0x7c7c0e>=0x0;_0x7c7c0e--)if(_0xede40f=_0x1e6b12[_0x7c7c0e])_0x47dbb7=(_0x337292<0x3?_0xede40f(_0x47dbb7):_0x337292>0x3?_0xede40f(_0x685f3f,_0x243b0f,_0x47dbb7):_0xede40f(_0x685f3f,_0x243b0f))||_0x47dbb7;}return _0x337292>0x3&&_0x47dbb7&&Object[_0x216b89(0x1e0)](_0x685f3f,_0x243b0f,_0x47dbb7),_0x47dbb7;},__metadata=this&&this['__metadata']||function(_0x5540f6,_0x32599b){const _0x5cf5c5=a237_0x499821;if(typeof Reflect===_0x5cf5c5(0x1b9)&&typeof Reflect[_0x5cf5c5(0x1e1)]===_0x5cf5c5(0x1ae))return Reflect[_0x5cf5c5(0x1e1)](_0x5540f6,_0x32599b);},__param=this&&this['__param']||function(_0x270978,_0x3b2f10){return function(_0x1c37df,_0x4aa9c9){_0x3b2f10(_0x1c37df,_0x4aa9c9,_0x270978);};};Object['defineProperty'](exports,a237_0x499821(0x19e),{'value':!![]}),exports[a237_0x499821(0x1a9)]=void 0x0;const bad_request_error_1=require(a237_0x499821(0x1db)),not_found_error_1=require(a237_0x499821(0x1d1)),typedi_1=require('typedi'),api_error_1=require(a237_0x499821(0x1c6)),bitbucket_server_api_service_1=require(a237_0x499821(0x1c8)),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a237_0x499821(0x1e3)),repo_class_1=require(a237_0x499821(0x1a8)),git_repo_service_1=require(a237_0x499821(0x1ba)),providers_tokens_1=require(a237_0x499821(0x1de)),bitbucket_server_credentials_dto_1=require('../../credentials/dto/bitbucket-server-credentials.dto');let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a237_0x499821(0x1a2)]{constructor(_0x4f6926,_0x51ece3){const _0x8a40a7=a237_0x499821;super(_0x4f6926),this[_0x8a40a7(0x1bb)]=_0x4f6926,this[_0x8a40a7(0x1c3)]=_0x51ece3[_0x8a40a7(0x1c3)],this[_0x8a40a7(0x1cd)]=_0x51ece3;}async[a237_0x499821(0x1af)](_0x5c094f){const _0x46235f=a237_0x499821;try{const _0x1d7cd6={'name':_0x5c094f[_0x46235f(0x1b2)],'scmId':_0x46235f(0x1a1),'defaultBranch':_0x5c094f[_0x46235f(0x1be)],..._0x5c094f['apiBody']||{}},_0x3cf724=await this[_0x46235f(0x1d7)]['post'](_0x46235f(0x1b0)+this[_0x46235f(0x1c3)]+_0x46235f(0x1c4),_0x1d7cd6),_0x5279bf=repo_class_1['Repo'][_0x46235f(0x1b6)](_0x3cf724,'',this['api'],this['credentials']);return _0x5c094f['autoInit']&&await git_internal_1['Git'][_0x46235f(0x1ad)](_0x5279bf,_0x5c094f[_0x46235f(0x1be)]||_0x46235f(0x1d9),'',this[_0x46235f(0x1cd)]),this['getOne'](_0x5279bf[_0x46235f(0x1b2)]);}catch(_0x46e454){if(_0x46e454 instanceof api_error_1[_0x46235f(0x1cb)])throw _0x46e454;throw new bad_request_error_1['BadRequestError'](_0x46e454);}}async['getAll'](){const _0x5ddf91=a237_0x499821;try{const _0x5acd48=[];let _0x4d6bc4;do{_0x4d6bc4=await this[_0x5ddf91(0x1d7)][_0x5ddf91(0x1ca)]('projects/'+this[_0x5ddf91(0x1c3)]+_0x5ddf91(0x1c4),{'params':{'limit':0x64,'start':_0x4d6bc4?_0x4d6bc4[_0x5ddf91(0x1dd)]:0x0}}),_0x5acd48['push'](..._0x4d6bc4[_0x5ddf91(0x1b3)]);}while(!_0x4d6bc4[_0x5ddf91(0x1a3)]);return _0x5acd48[_0x5ddf91(0x1e2)](_0x3aab6f=>repo_class_1['Repo'][_0x5ddf91(0x1b6)](_0x3aab6f,(0x0,utils_1[_0x5ddf91(0x1cc)])(this[_0x5ddf91(0x1d7)][_0x5ddf91(0x1d6)]['baseURL']||'','/projects/'+this['project']+_0x5ddf91(0x1a0)+_0x3aab6f['slug']),this[_0x5ddf91(0x1bb)],this['credentials']));}catch(_0x24a65b){if(_0x24a65b instanceof api_error_1[_0x5ddf91(0x1cb)])throw _0x24a65b;throw new not_found_error_1[(_0x5ddf91(0x1b4))](_0x24a65b);}}async[a237_0x499821(0x1d5)](_0xee21c0){const _0x56b3fe=a237_0x499821;var _0x5e6cdb;try{const _0x39db38=await this[_0x56b3fe(0x1d7)]['get'](_0x56b3fe(0x1b0)+this[_0x56b3fe(0x1c3)]+_0x56b3fe(0x1a0)+_0xee21c0),_0x24d816=repo_class_1[_0x56b3fe(0x19d)][_0x56b3fe(0x1b6)](_0x39db38,(0x0,utils_1['joinURL'])(this[_0x56b3fe(0x1d7)][_0x56b3fe(0x1d6)][_0x56b3fe(0x1c2)]||'','/projects/'+this[_0x56b3fe(0x1c3)]+'/repos/'+_0xee21c0),this['api'],this['credentials']),_0x48ea4b=await this['request']['get'](_0x24d816[_0x56b3fe(0x1c1)]+_0x56b3fe(0x1c9))[_0x56b3fe(0x1a4)](_0x1011ba=>_0x1011ba[_0x56b3fe(0x1b3)]);return _0x24d816[_0x56b3fe(0x1be)]=(_0x5e6cdb=_0x48ea4b[_0x56b3fe(0x1b7)](_0xad247d=>_0xad247d['isDefault']===!![]))===null||_0x5e6cdb===void 0x0?void 0x0:_0x5e6cdb[_0x56b3fe(0x1a6)],_0x24d816;}catch(_0x4840fb){if(_0x4840fb instanceof api_error_1[_0x56b3fe(0x1cb)])throw _0x4840fb;throw new not_found_error_1['NotFoundError'](_0x4840fb);}}async[a237_0x499821(0x1bd)](_0x3e894f,_0xeecb8a){const _0x104531=a237_0x499821;try{const _0x5a1f5f=await this[_0x104531(0x1d7)][_0x104531(0x1ab)](_0x104531(0x1b0)+this['project']+'/repos/'+_0x3e894f,_0xeecb8a),_0x39f2ce=await this[_0x104531(0x1d7)][_0x104531(0x1ca)](_0x104531(0x1b0)+this[_0x104531(0x1c3)]+_0x104531(0x1a0)+_0x3e894f+'/default-branch'),_0x12d66a=repo_class_1[_0x104531(0x19d)][_0x104531(0x1b6)](_0x5a1f5f,(0x0,utils_1[_0x104531(0x1cc)])(this[_0x104531(0x1d7)][_0x104531(0x1d6)][_0x104531(0x1c2)]||'','/projects/'+this[_0x104531(0x1c3)]+_0x104531(0x1a0)+_0x3e894f),this[_0x104531(0x1bb)],this['credentials']);return _0x12d66a[_0x104531(0x1be)]=_0x39f2ce[_0x104531(0x1a6)],_0x12d66a;}catch(_0x12927f){if(_0x12927f instanceof api_error_1['ApiError'])throw _0x12927f;throw new not_found_error_1[(_0x104531(0x1b4))](_0x12927f);}}async['delete'](_0x21ec33){const _0x572c4b=a237_0x499821;try{await this[_0x572c4b(0x1d5)](_0x21ec33),await this[_0x572c4b(0x1d7)]['delete'](_0x572c4b(0x1b0)+this[_0x572c4b(0x1c3)]+_0x572c4b(0x1a0)+_0x21ec33);}catch(_0x3ee508){if(_0x3ee508 instanceof api_error_1['ApiError'])throw _0x3ee508;throw new bad_request_error_1[(_0x572c4b(0x1ce))](_0x3ee508);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a237_0x499821(0x1da)])(),__param(0x1,(0x0,typedi_1[a237_0x499821(0x1d0)])(providers_tokens_1[a237_0x499821(0x1bf)][a237_0x499821(0x1cd)])),__metadata('design:paramtypes',[bitbucket_server_api_service_1[a237_0x499821(0x1d2)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a237_0x499821(0x1a9)]=BitbucketServerRepoService;