const a167_0x1bdc62=a167_0x51c0;function a167_0x51c0(_0x5a4154,_0x1bc2bb){const _0x4da6a1=a167_0x1ab2();return a167_0x51c0=function(_0x1f3323,_0xf7abf4){_0x1f3323=_0x1f3323-0x1df;let _0x1ab221=_0x4da6a1[_0x1f3323];return _0x1ab221;},a167_0x51c0(_0x5a4154,_0x1bc2bb);}(function(_0xa5bae2,_0x551540){const _0x2510f6=a167_0x51c0,_0x22e747=_0xa5bae2();while(!![]){try{const _0x122fdf=-parseInt(_0x2510f6(0x20c))/0x1*(parseInt(_0x2510f6(0x21f))/0x2)+-parseInt(_0x2510f6(0x1fd))/0x3*(parseInt(_0x2510f6(0x1f4))/0x4)+-parseInt(_0x2510f6(0x1e7))/0x5*(parseInt(_0x2510f6(0x220))/0x6)+-parseInt(_0x2510f6(0x1fa))/0x7+-parseInt(_0x2510f6(0x1f5))/0x8*(parseInt(_0x2510f6(0x202))/0x9)+-parseInt(_0x2510f6(0x21a))/0xa*(parseInt(_0x2510f6(0x20f))/0xb)+parseInt(_0x2510f6(0x212))/0xc;if(_0x122fdf===_0x551540)break;else _0x22e747['push'](_0x22e747['shift']());}catch(_0x32a012){_0x22e747['push'](_0x22e747['shift']());}}}(a167_0x1ab2,0x523b0));function a167_0x1ab2(){const _0x3d5bcf=['210MJoFSy','apiBody','defineProperty','object','__decorate','1491723KmofXR','git','typedi','metadata','Inject','isDefault','joinURL','defaultBranch','request','../../providers.tokens','39vrXjFh','BitbucketServerCredentialsDto','push','418zjJWOw','../../../../../core/errors/api.error','displayId','19854660saXrHI','toString','__esModule','api','../repo.class','BadRequestError','../../api/bitbucket-server-api.service','constructor','80pkwkUD','../../../../../core/errors/bad-request.error','baseURL','function','project','7452TkfsAB','16026wfAmpZ','./git-repo.service','get','../../../../../core/errors/not-found.error','name','apiUrl','Service','GitRepoService','search','credentials','defaults','/projects/','/repos','decorate','fromBitbucketServer','delete','Repo','design:paramtypes','BitbucketServerApiService','15gAWbra','../../credentials/dto/bitbucket-server-credentials.dto','/repos/','getOne','update','BitbucketServerRepoService','Git','find','apply','projects/','length','post','slug','736gwWNrU','24QlcMla','Tokens','map','NotFoundError','ApiError','4577909yUVNRi','getOwnPropertyDescriptor','../../../internal/git.internal'];a167_0x1ab2=function(){return _0x3d5bcf;};return a167_0x1ab2();}const a167_0xf7abf4=(function(){let _0x19f6ac=!![];return function(_0x34db80,_0x491b0b){const _0x2c1776=_0x19f6ac?function(){const _0x444fb2=a167_0x51c0;if(_0x491b0b){const _0x2cfbe2=_0x491b0b[_0x444fb2(0x1ef)](_0x34db80,arguments);return _0x491b0b=null,_0x2cfbe2;}}:function(){};return _0x19f6ac=![],_0x2c1776;};}()),a167_0x1f3323=a167_0xf7abf4(this,function(){const _0x12d2ba=a167_0x51c0;return a167_0x1f3323[_0x12d2ba(0x213)]()[_0x12d2ba(0x228)]('(((.+)+)+)+$')[_0x12d2ba(0x213)]()[_0x12d2ba(0x219)](a167_0x1f3323)[_0x12d2ba(0x228)]('(((.+)+)+)+$');});a167_0x1f3323();'use strict';var __decorate=this&&this[a167_0x1bdc62(0x201)]||function(_0x281631,_0x379138,_0x5ef95f,_0x4eb0aa){const _0x122545=a167_0x1bdc62;var _0x2ba81f=arguments[_0x122545(0x1f1)],_0x32d139=_0x2ba81f<0x3?_0x379138:_0x4eb0aa===null?_0x4eb0aa=Object[_0x122545(0x1fb)](_0x379138,_0x5ef95f):_0x4eb0aa,_0x130997;if(typeof Reflect==='object'&&typeof Reflect[_0x122545(0x1e1)]===_0x122545(0x21d))_0x32d139=Reflect[_0x122545(0x1e1)](_0x281631,_0x379138,_0x5ef95f,_0x4eb0aa);else{for(var _0x220d7c=_0x281631[_0x122545(0x1f1)]-0x1;_0x220d7c>=0x0;_0x220d7c--)if(_0x130997=_0x281631[_0x220d7c])_0x32d139=(_0x2ba81f<0x3?_0x130997(_0x32d139):_0x2ba81f>0x3?_0x130997(_0x379138,_0x5ef95f,_0x32d139):_0x130997(_0x379138,_0x5ef95f))||_0x32d139;}return _0x2ba81f>0x3&&_0x32d139&&Object[_0x122545(0x1ff)](_0x379138,_0x5ef95f,_0x32d139),_0x32d139;},__metadata=this&&this['__metadata']||function(_0x143f83,_0x23c4b4){const _0x19f6d7=a167_0x1bdc62;if(typeof Reflect===_0x19f6d7(0x200)&&typeof Reflect[_0x19f6d7(0x205)]===_0x19f6d7(0x21d))return Reflect[_0x19f6d7(0x205)](_0x143f83,_0x23c4b4);},__param=this&&this['__param']||function(_0x4fc000,_0x33e336){return function(_0x4f6606,_0x297392){_0x33e336(_0x4f6606,_0x297392,_0x4fc000);};};Object[a167_0x1bdc62(0x1ff)](exports,a167_0x1bdc62(0x214),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a167_0x1bdc62(0x21b)),not_found_error_1=require(a167_0x1bdc62(0x223)),typedi_1=require(a167_0x1bdc62(0x204)),api_error_1=require(a167_0x1bdc62(0x210)),bitbucket_server_api_service_1=require(a167_0x1bdc62(0x218)),git_internal_1=require(a167_0x1bdc62(0x1fc)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a167_0x1bdc62(0x216)),git_repo_service_1=require(a167_0x1bdc62(0x221)),providers_tokens_1=require(a167_0x1bdc62(0x20b)),bitbucket_server_credentials_dto_1=require(a167_0x1bdc62(0x1e8));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a167_0x1bdc62(0x227)]{constructor(_0x1c39b2,_0x5c8338){const _0x26e845=a167_0x1bdc62;super(_0x1c39b2),this[_0x26e845(0x215)]=_0x1c39b2,this[_0x26e845(0x21e)]=_0x5c8338[_0x26e845(0x21e)],this[_0x26e845(0x229)]=_0x5c8338;}async['create'](_0x580799){const _0x23b505=a167_0x1bdc62;try{const _0x4ae22b={'name':_0x580799[_0x23b505(0x224)],'scmId':_0x23b505(0x203),'defaultBranch':_0x580799[_0x23b505(0x209)],..._0x580799[_0x23b505(0x1fe)]||{}},_0x1e19c0=await this[_0x23b505(0x20a)][_0x23b505(0x1f2)](_0x23b505(0x1f0)+this[_0x23b505(0x21e)]+_0x23b505(0x1e0),_0x4ae22b),_0x38636f=repo_class_1[_0x23b505(0x1e4)][_0x23b505(0x1e2)](_0x1e19c0,'',this[_0x23b505(0x215)],this[_0x23b505(0x229)]);return _0x580799['autoInit']&&await git_internal_1[_0x23b505(0x1ed)]['createEmptyBranch'](_0x38636f,_0x580799[_0x23b505(0x209)]||'master','',this[_0x23b505(0x229)]),this[_0x23b505(0x1ea)](_0x38636f[_0x23b505(0x224)]);}catch(_0x4f65cb){if(_0x4f65cb instanceof api_error_1[_0x23b505(0x1f9)])throw _0x4f65cb;throw new bad_request_error_1['BadRequestError'](_0x4f65cb);}}async['getAll'](){const _0x3face7=a167_0x1bdc62;try{const _0x36a4d5=[];let _0x3641ef;do{_0x3641ef=await this[_0x3face7(0x20a)][_0x3face7(0x222)](_0x3face7(0x1f0)+this['project']+'/repos',{'params':{'limit':0x64,'start':_0x3641ef?_0x3641ef['nextPageStart']:0x0}}),_0x36a4d5[_0x3face7(0x20e)](..._0x3641ef['values']);}while(!_0x3641ef['isLastPage']);return _0x36a4d5[_0x3face7(0x1f7)](_0x3ed668=>repo_class_1[_0x3face7(0x1e4)][_0x3face7(0x1e2)](_0x3ed668,(0x0,utils_1[_0x3face7(0x208)])(this[_0x3face7(0x20a)]['defaults'][_0x3face7(0x21c)]||'',_0x3face7(0x1df)+this[_0x3face7(0x21e)]+_0x3face7(0x1e9)+_0x3ed668[_0x3face7(0x1f3)]),this[_0x3face7(0x215)],this[_0x3face7(0x229)]));}catch(_0x1b84bf){if(_0x1b84bf instanceof api_error_1[_0x3face7(0x1f9)])throw _0x1b84bf;throw new not_found_error_1[(_0x3face7(0x1f8))](_0x1b84bf);}}async['getOne'](_0x9f11e5){const _0x539cf1=a167_0x1bdc62;var _0x50d9df;try{const _0xd91a9e=await this[_0x539cf1(0x20a)]['get'](_0x539cf1(0x1f0)+this[_0x539cf1(0x21e)]+_0x539cf1(0x1e9)+_0x9f11e5),_0x48b496=repo_class_1['Repo'][_0x539cf1(0x1e2)](_0xd91a9e,(0x0,utils_1[_0x539cf1(0x208)])(this['request'][_0x539cf1(0x22a)][_0x539cf1(0x21c)]||'',_0x539cf1(0x1df)+this['project']+'/repos/'+_0x9f11e5),this['api'],this[_0x539cf1(0x229)]),_0x59b7e0=await this['request'][_0x539cf1(0x222)](_0x48b496[_0x539cf1(0x225)]+'/branches')['then'](_0x4787fb=>_0x4787fb['values']);return _0x48b496['defaultBranch']=(_0x50d9df=_0x59b7e0[_0x539cf1(0x1ee)](_0x3e1a7b=>_0x3e1a7b[_0x539cf1(0x207)]===!![]))===null||_0x50d9df===void 0x0?void 0x0:_0x50d9df[_0x539cf1(0x211)],_0x48b496;}catch(_0x2e1d97){if(_0x2e1d97 instanceof api_error_1['ApiError'])throw _0x2e1d97;throw new not_found_error_1[(_0x539cf1(0x1f8))](_0x2e1d97);}}async[a167_0x1bdc62(0x1eb)](_0x5ce7f2,_0x55d4e3){const _0x37096a=a167_0x1bdc62;try{const _0x333df2=await this[_0x37096a(0x20a)]['put']('projects/'+this[_0x37096a(0x21e)]+_0x37096a(0x1e9)+_0x5ce7f2,_0x55d4e3),_0x51f939=await this[_0x37096a(0x20a)][_0x37096a(0x222)]('projects/'+this[_0x37096a(0x21e)]+'/repos/'+_0x5ce7f2+'/default-branch'),_0x47647a=repo_class_1[_0x37096a(0x1e4)][_0x37096a(0x1e2)](_0x333df2,(0x0,utils_1[_0x37096a(0x208)])(this[_0x37096a(0x20a)]['defaults'][_0x37096a(0x21c)]||'',_0x37096a(0x1df)+this['project']+_0x37096a(0x1e9)+_0x5ce7f2),this[_0x37096a(0x215)],this[_0x37096a(0x229)]);return _0x47647a[_0x37096a(0x209)]=_0x51f939[_0x37096a(0x211)],_0x47647a;}catch(_0x33cd85){if(_0x33cd85 instanceof api_error_1[_0x37096a(0x1f9)])throw _0x33cd85;throw new not_found_error_1[(_0x37096a(0x1f8))](_0x33cd85);}}async[a167_0x1bdc62(0x1e3)](_0x281c1f){const _0x39e0ae=a167_0x1bdc62;try{await this[_0x39e0ae(0x1ea)](_0x281c1f),await this['request'][_0x39e0ae(0x1e3)](_0x39e0ae(0x1f0)+this['project']+_0x39e0ae(0x1e9)+_0x281c1f);}catch(_0x1ea5ed){if(_0x1ea5ed instanceof api_error_1[_0x39e0ae(0x1f9)])throw _0x1ea5ed;throw new bad_request_error_1[(_0x39e0ae(0x217))](_0x1ea5ed);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a167_0x1bdc62(0x226)])(),__param(0x1,(0x0,typedi_1[a167_0x1bdc62(0x206)])(providers_tokens_1[a167_0x1bdc62(0x1f6)][a167_0x1bdc62(0x229)])),__metadata(a167_0x1bdc62(0x1e5),[bitbucket_server_api_service_1[a167_0x1bdc62(0x1e6)],bitbucket_server_credentials_dto_1[a167_0x1bdc62(0x20d)]])],BitbucketServerRepoService),exports[a167_0x1bdc62(0x1ec)]=BitbucketServerRepoService;