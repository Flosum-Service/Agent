const a206_0x5539db=a206_0x5b40;(function(_0x41bf69,_0x4fb943){const _0x3145e5=a206_0x5b40,_0x4d9bc2=_0x41bf69();while(!![]){try{const _0x4a0cb6=-parseInt(_0x3145e5(0x1d3))/0x1+parseInt(_0x3145e5(0x1d1))/0x2*(-parseInt(_0x3145e5(0x191))/0x3)+-parseInt(_0x3145e5(0x1b5))/0x4*(-parseInt(_0x3145e5(0x1c8))/0x5)+parseInt(_0x3145e5(0x18a))/0x6+parseInt(_0x3145e5(0x1ae))/0x7+-parseInt(_0x3145e5(0x1d7))/0x8+parseInt(_0x3145e5(0x1cb))/0x9;if(_0x4a0cb6===_0x4fb943)break;else _0x4d9bc2['push'](_0x4d9bc2['shift']());}catch(_0xb34fd3){_0x4d9bc2['push'](_0x4d9bc2['shift']());}}}(a206_0x5759,0xcaf34));const a206_0xbb4dff=(function(){let _0x4bed90=!![];return function(_0x4f91ca,_0xd1bd69){const _0xf4e67a=_0x4bed90?function(){const _0x29d981=a206_0x5b40;if(_0xd1bd69){const _0x3acdce=_0xd1bd69[_0x29d981(0x1a7)](_0x4f91ca,arguments);return _0xd1bd69=null,_0x3acdce;}}:function(){};return _0x4bed90=![],_0xf4e67a;};}()),a206_0x36e499=a206_0xbb4dff(this,function(){const _0x1e4c60=a206_0x5b40;return a206_0x36e499[_0x1e4c60(0x1c0)]()[_0x1e4c60(0x1b3)](_0x1e4c60(0x1ba))[_0x1e4c60(0x1c0)]()[_0x1e4c60(0x1ac)](a206_0x36e499)[_0x1e4c60(0x1b3)](_0x1e4c60(0x1ba));});a206_0x36e499();function a206_0x5b40(_0x44b344,_0x3f1d92){const _0x2757de=a206_0x5759();return a206_0x5b40=function(_0x36e499,_0xbb4dff){_0x36e499=_0x36e499-0x18a;let _0x575901=_0x2757de[_0x36e499];return _0x575901;},a206_0x5b40(_0x44b344,_0x3f1d92);}'use strict';var __decorate=this&&this[a206_0x5539db(0x1d0)]||function(_0x5d24ad,_0xc69398,_0x8d641a,_0x8be514){const _0x39dd74=a206_0x5539db;var _0x3b3f5d=arguments[_0x39dd74(0x1a0)],_0x6a5798=_0x3b3f5d<0x3?_0xc69398:_0x8be514===null?_0x8be514=Object[_0x39dd74(0x19f)](_0xc69398,_0x8d641a):_0x8be514,_0x2aa81f;if(typeof Reflect===_0x39dd74(0x1cd)&&typeof Reflect[_0x39dd74(0x1a1)]===_0x39dd74(0x196))_0x6a5798=Reflect[_0x39dd74(0x1a1)](_0x5d24ad,_0xc69398,_0x8d641a,_0x8be514);else{for(var _0x398aa9=_0x5d24ad['length']-0x1;_0x398aa9>=0x0;_0x398aa9--)if(_0x2aa81f=_0x5d24ad[_0x398aa9])_0x6a5798=(_0x3b3f5d<0x3?_0x2aa81f(_0x6a5798):_0x3b3f5d>0x3?_0x2aa81f(_0xc69398,_0x8d641a,_0x6a5798):_0x2aa81f(_0xc69398,_0x8d641a))||_0x6a5798;}return _0x3b3f5d>0x3&&_0x6a5798&&Object['defineProperty'](_0xc69398,_0x8d641a,_0x6a5798),_0x6a5798;},__metadata=this&&this['__metadata']||function(_0x2ab3d0,_0xcf78e){const _0x2ae349=a206_0x5539db;if(typeof Reflect==='object'&&typeof Reflect[_0x2ae349(0x1b0)]===_0x2ae349(0x196))return Reflect[_0x2ae349(0x1b0)](_0x2ab3d0,_0xcf78e);},__param=this&&this[a206_0x5539db(0x1c1)]||function(_0x4ebaa6,_0x2acb35){return function(_0x4411f7,_0x402d4c){_0x2acb35(_0x4411f7,_0x402d4c,_0x4ebaa6);};};Object[a206_0x5539db(0x1bb)](exports,a206_0x5539db(0x1b6),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a206_0x5539db(0x1af)),typedi_1=require(a206_0x5539db(0x195)),api_error_1=require(a206_0x5539db(0x1ca)),bitbucket_server_api_service_1=require(a206_0x5539db(0x1a6)),git_internal_1=require(a206_0x5539db(0x198)),utils_1=require('../../../../shared/utils'),repo_class_1=require('../repo.class'),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a206_0x5539db(0x1d2)),bitbucket_server_credentials_dto_1=require('../../credentials/dto/bitbucket-server-credentials.dto');let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a206_0x5539db(0x18f)]{constructor(_0x1b9bf7,_0x5c7802){const _0x6015da=a206_0x5539db;super(_0x1b9bf7),this['api']=_0x1b9bf7,this['project']=_0x5c7802[_0x6015da(0x1c7)],this[_0x6015da(0x194)]=_0x5c7802;}async[a206_0x5539db(0x19e)](_0x418f4c){const _0x345743=a206_0x5539db;try{const _0x16146a={'name':_0x418f4c['name'],'scmId':'git','defaultBranch':_0x418f4c['defaultBranch'],..._0x418f4c[_0x345743(0x18c)]||{}},_0x201b9a=await this[_0x345743(0x192)][_0x345743(0x1d6)](_0x345743(0x199)+this[_0x345743(0x1c7)]+_0x345743(0x1b4),_0x16146a),_0x148a01=repo_class_1[_0x345743(0x1bf)][_0x345743(0x1c6)](_0x201b9a,'',this[_0x345743(0x1ab)],this['credentials']);return _0x418f4c[_0x345743(0x1b9)]&&await git_internal_1[_0x345743(0x197)][_0x345743(0x1c5)](_0x148a01,_0x418f4c['defaultBranch']||_0x345743(0x1cc),'',this[_0x345743(0x194)]),this['getOne'](_0x148a01[_0x345743(0x1a8)]);}catch(_0x3b92b5){if(_0x3b92b5 instanceof api_error_1[_0x345743(0x1d4)])throw _0x3b92b5;throw new bad_request_error_1['BadRequestError'](_0x3b92b5);}}async[a206_0x5539db(0x18b)](){const _0x1cecac=a206_0x5539db;try{const _0x5f3abb=[];let _0x268f90;do{_0x268f90=await this[_0x1cecac(0x192)][_0x1cecac(0x1b2)]('projects/'+this[_0x1cecac(0x1c7)]+'/repos',{'params':{'limit':0x64,'start':_0x268f90?_0x268f90[_0x1cecac(0x1d5)]:0x0}}),_0x5f3abb[_0x1cecac(0x1ce)](..._0x268f90['values']);}while(!_0x268f90[_0x1cecac(0x1cf)]);return _0x5f3abb['map'](_0x412280=>repo_class_1[_0x1cecac(0x1bf)][_0x1cecac(0x1c6)](_0x412280,(0x0,utils_1[_0x1cecac(0x18e)])(this[_0x1cecac(0x192)][_0x1cecac(0x18d)][_0x1cecac(0x1aa)]||'',_0x1cecac(0x193)+this[_0x1cecac(0x1c7)]+_0x1cecac(0x1a5)+_0x412280[_0x1cecac(0x1bd)]),this[_0x1cecac(0x1ab)],this[_0x1cecac(0x194)]));}catch(_0x1a67e7){if(_0x1a67e7 instanceof api_error_1['ApiError'])throw _0x1a67e7;throw new not_found_error_1[(_0x1cecac(0x19c))](_0x1a67e7);}}async['getOne'](_0x1115f6){const _0x28b3d1=a206_0x5539db;var _0x24bcb4;try{const _0x2ab272=await this[_0x28b3d1(0x192)]['get'](_0x28b3d1(0x199)+this[_0x28b3d1(0x1c7)]+_0x28b3d1(0x1a5)+_0x1115f6),_0x1d80e1=repo_class_1[_0x28b3d1(0x1bf)]['fromBitbucketServer'](_0x2ab272,(0x0,utils_1['joinURL'])(this['request']['defaults'][_0x28b3d1(0x1aa)]||'',_0x28b3d1(0x193)+this[_0x28b3d1(0x1c7)]+_0x28b3d1(0x1a5)+_0x1115f6),this[_0x28b3d1(0x1ab)],this['credentials']),_0x22741e=await this[_0x28b3d1(0x192)][_0x28b3d1(0x1b2)](_0x1d80e1[_0x28b3d1(0x1b7)]+_0x28b3d1(0x1c3))[_0x28b3d1(0x1c2)](_0x5bbae0=>_0x5bbae0['values']);return _0x1d80e1[_0x28b3d1(0x1c9)]=(_0x24bcb4=_0x22741e[_0x28b3d1(0x1b1)](_0x5dbd0a=>_0x5dbd0a['isDefault']===!![]))===null||_0x24bcb4===void 0x0?void 0x0:_0x24bcb4[_0x28b3d1(0x19b)],_0x1d80e1;}catch(_0x209244){if(_0x209244 instanceof api_error_1['ApiError'])throw _0x209244;throw new not_found_error_1['NotFoundError'](_0x209244);}}async[a206_0x5539db(0x1a9)](_0x3c6d27,_0x294c9f){const _0x14d07c=a206_0x5539db;try{const _0x2958f1=await this['request']['put'](_0x14d07c(0x199)+this['project']+_0x14d07c(0x1a5)+_0x3c6d27,_0x294c9f),_0x3021d=await this['request'][_0x14d07c(0x1b2)](_0x14d07c(0x199)+this[_0x14d07c(0x1c7)]+_0x14d07c(0x1a5)+_0x3c6d27+_0x14d07c(0x1ad)),_0x214308=repo_class_1[_0x14d07c(0x1bf)][_0x14d07c(0x1c6)](_0x2958f1,(0x0,utils_1[_0x14d07c(0x18e)])(this[_0x14d07c(0x192)][_0x14d07c(0x18d)][_0x14d07c(0x1aa)]||'',_0x14d07c(0x193)+this[_0x14d07c(0x1c7)]+_0x14d07c(0x1a5)+_0x3c6d27),this[_0x14d07c(0x1ab)],this[_0x14d07c(0x194)]);return _0x214308[_0x14d07c(0x1c9)]=_0x3021d[_0x14d07c(0x19b)],_0x214308;}catch(_0x29b16f){if(_0x29b16f instanceof api_error_1['ApiError'])throw _0x29b16f;throw new not_found_error_1['NotFoundError'](_0x29b16f);}}async[a206_0x5539db(0x19a)](_0x54d377){const _0x13ef9e=a206_0x5539db;try{await this[_0x13ef9e(0x1be)](_0x54d377),await this['request'][_0x13ef9e(0x19a)](_0x13ef9e(0x199)+this[_0x13ef9e(0x1c7)]+'/repos/'+_0x54d377);}catch(_0x5f2ef6){if(_0x5f2ef6 instanceof api_error_1['ApiError'])throw _0x5f2ef6;throw new bad_request_error_1[(_0x13ef9e(0x1bc))](_0x5f2ef6);}}};function a206_0x5759(){const _0x3ff3ab=['credentials','typedi','function','Git','../../../internal/git.internal','projects/','delete','displayId','NotFoundError','Inject','create','getOwnPropertyDescriptor','length','decorate','BitbucketServerCredentialsDto','design:paramtypes','Tokens','/repos/','../../api/bitbucket-server-api.service','apply','name','update','baseURL','api','constructor','/default-branch','4110288HwLwYX','../../../../../core/errors/not-found.error','metadata','find','get','search','/repos','7856SPSncw','__esModule','apiUrl','Service','autoInit','(((.+)+)+)+$','defineProperty','BadRequestError','slug','getOne','Repo','toString','__param','then','/branches','BitbucketServerRepoService','createEmptyBranch','fromBitbucketServer','project','3085iQCBWy','defaultBranch','../../../../../core/errors/api.error','11470365fLYwQQ','master','object','push','isLastPage','__decorate','798886KyBJEI','../../providers.tokens','485041ZHtPCc','ApiError','nextPageStart','post','12458608Hgxrrg','3594480mMYTtJ','getAll','apiBody','defaults','joinURL','GitRepoService','BitbucketServerApiService','6Njxxse','request','/projects/'];a206_0x5759=function(){return _0x3ff3ab;};return a206_0x5759();}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a206_0x5539db(0x1b8)])(),__param(0x1,(0x0,typedi_1[a206_0x5539db(0x19d)])(providers_tokens_1[a206_0x5539db(0x1a4)][a206_0x5539db(0x194)])),__metadata(a206_0x5539db(0x1a3),[bitbucket_server_api_service_1[a206_0x5539db(0x190)],bitbucket_server_credentials_dto_1[a206_0x5539db(0x1a2)]])],BitbucketServerRepoService),exports[a206_0x5539db(0x1c4)]=BitbucketServerRepoService;