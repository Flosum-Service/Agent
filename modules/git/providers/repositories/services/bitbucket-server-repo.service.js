const a238_0x23b80e=a238_0x3195;(function(_0x58fc7f,_0xbd5d2c){const _0x5cdc22=a238_0x3195,_0x3509ee=_0x58fc7f();while(!![]){try{const _0x1d0146=parseInt(_0x5cdc22(0x9e))/0x1+-parseInt(_0x5cdc22(0xb1))/0x2+-parseInt(_0x5cdc22(0x93))/0x3*(parseInt(_0x5cdc22(0x85))/0x4)+-parseInt(_0x5cdc22(0x92))/0x5+-parseInt(_0x5cdc22(0xca))/0x6+parseInt(_0x5cdc22(0x97))/0x7*(parseInt(_0x5cdc22(0x83))/0x8)+parseInt(_0x5cdc22(0xcc))/0x9;if(_0x1d0146===_0xbd5d2c)break;else _0x3509ee['push'](_0x3509ee['shift']());}catch(_0x2f9865){_0x3509ee['push'](_0x3509ee['shift']());}}}(a238_0x1110,0x791e2));const a238_0x4cefe8=(function(){let _0x1bda71=!![];return function(_0x30f0b6,_0x3f3e4d){const _0x57fae4=_0x1bda71?function(){const _0x77e658=a238_0x3195;if(_0x3f3e4d){const _0x43dcee=_0x3f3e4d[_0x77e658(0xc0)](_0x30f0b6,arguments);return _0x3f3e4d=null,_0x43dcee;}}:function(){};return _0x1bda71=![],_0x57fae4;};}()),a238_0x16e126=a238_0x4cefe8(this,function(){const _0x4cda72=a238_0x3195;return a238_0x16e126[_0x4cda72(0xc9)]()[_0x4cda72(0x91)](_0x4cda72(0xa4))[_0x4cda72(0xc9)]()[_0x4cda72(0xcd)](a238_0x16e126)[_0x4cda72(0x91)](_0x4cda72(0xa4));});a238_0x16e126();function a238_0x3195(_0x51deab,_0x54f528){const _0x1ba0b1=a238_0x1110();return a238_0x3195=function(_0x16e126,_0x4cefe8){_0x16e126=_0x16e126-0x80;let _0x111022=_0x1ba0b1[_0x16e126];return _0x111022;},a238_0x3195(_0x51deab,_0x54f528);}function a238_0x1110(){const _0xb90245=['object','../../../../../core/errors/not-found.error','Git','(((.+)+)+)+$','createEmptyBranch','__metadata','design:paramtypes','credentials','decorate','api','create','git','Inject','update','request','defaults','1883184sOVIhU','find','fromBitbucketServer','Service','metadata','master','Repo','project','/branches','push','getOne','GitRepoService','joinURL','ApiError','typedi','apply','BadRequestError','Tokens','NotFoundError','apiUrl','/projects/','projects/','isLastPage','name','toString','5480100IuiAuh','function','28245168KTtKRm','constructor','__decorate','put','../../../../../core/errors/bad-request.error','baseURL','8tOsQMX','../../credentials/dto/bitbucket-server-credentials.dto','4qORtBg','__esModule','get','map','length','displayId','getAll','../../../../shared/utils','nextPageStart','values','./git-repo.service','/default-branch','search','4473010XhBpyD','2750313lBfuRg','../../api/bitbucket-server-api.service','../repo.class','defineProperty','1615103xeqtFi','BitbucketServerCredentialsDto','delete','defaultBranch','getOwnPropertyDescriptor','../../providers.tokens','/repos','793332HKJskA','/repos/','BitbucketServerRepoService'];a238_0x1110=function(){return _0xb90245;};return a238_0x1110();}'use strict';var __decorate=this&&this[a238_0x23b80e(0xce)]||function(_0x44d773,_0x31fed5,_0x3216e1,_0x2ec529){const _0x40023c=a238_0x23b80e;var _0x4865d3=arguments[_0x40023c(0x89)],_0x5c8178=_0x4865d3<0x3?_0x31fed5:_0x2ec529===null?_0x2ec529=Object[_0x40023c(0x9b)](_0x31fed5,_0x3216e1):_0x2ec529,_0x2a3139;if(typeof Reflect===_0x40023c(0xa1)&&typeof Reflect[_0x40023c(0xa9)]===_0x40023c(0xcb))_0x5c8178=Reflect[_0x40023c(0xa9)](_0x44d773,_0x31fed5,_0x3216e1,_0x2ec529);else{for(var _0x2797c5=_0x44d773['length']-0x1;_0x2797c5>=0x0;_0x2797c5--)if(_0x2a3139=_0x44d773[_0x2797c5])_0x5c8178=(_0x4865d3<0x3?_0x2a3139(_0x5c8178):_0x4865d3>0x3?_0x2a3139(_0x31fed5,_0x3216e1,_0x5c8178):_0x2a3139(_0x31fed5,_0x3216e1))||_0x5c8178;}return _0x4865d3>0x3&&_0x5c8178&&Object[_0x40023c(0x96)](_0x31fed5,_0x3216e1,_0x5c8178),_0x5c8178;},__metadata=this&&this[a238_0x23b80e(0xa6)]||function(_0xe5dfb,_0x1ff6af){const _0x5856bd=a238_0x23b80e;if(typeof Reflect===_0x5856bd(0xa1)&&typeof Reflect[_0x5856bd(0xb5)]===_0x5856bd(0xcb))return Reflect[_0x5856bd(0xb5)](_0xe5dfb,_0x1ff6af);},__param=this&&this['__param']||function(_0x1fc1f6,_0x105c8b){return function(_0x4c16a5,_0x11cc6b){_0x105c8b(_0x4c16a5,_0x11cc6b,_0x1fc1f6);};};Object[a238_0x23b80e(0x96)](exports,a238_0x23b80e(0x86),{'value':!![]}),exports[a238_0x23b80e(0xa0)]=void 0x0;const bad_request_error_1=require(a238_0x23b80e(0x81)),not_found_error_1=require(a238_0x23b80e(0xa2)),typedi_1=require(a238_0x23b80e(0xbf)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a238_0x23b80e(0x94)),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a238_0x23b80e(0x8c)),repo_class_1=require(a238_0x23b80e(0x95)),git_repo_service_1=require(a238_0x23b80e(0x8f)),providers_tokens_1=require(a238_0x23b80e(0x9c)),bitbucket_server_credentials_dto_1=require(a238_0x23b80e(0x84));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a238_0x23b80e(0xbc)]{constructor(_0x1dbf85,_0x36c5ce){const _0x315c69=a238_0x23b80e;super(_0x1dbf85),this[_0x315c69(0xaa)]=_0x1dbf85,this[_0x315c69(0xb8)]=_0x36c5ce[_0x315c69(0xb8)],this[_0x315c69(0xa8)]=_0x36c5ce;}async[a238_0x23b80e(0xab)](_0x5323ee){const _0x199c48=a238_0x23b80e;try{const _0x412444={'name':_0x5323ee['name'],'scmId':_0x199c48(0xac),'defaultBranch':_0x5323ee[_0x199c48(0x9a)],..._0x5323ee['apiBody']||{}},_0x1c46bb=await this[_0x199c48(0xaf)]['post'](_0x199c48(0xc6)+this[_0x199c48(0xb8)]+_0x199c48(0x9d),_0x412444),_0x23b7f0=repo_class_1[_0x199c48(0xb7)]['fromBitbucketServer'](_0x1c46bb,'',this[_0x199c48(0xaa)],this['credentials']);return _0x5323ee['autoInit']&&await git_internal_1[_0x199c48(0xa3)][_0x199c48(0xa5)](_0x23b7f0,_0x5323ee['defaultBranch']||_0x199c48(0xb6),'',this[_0x199c48(0xa8)]),this[_0x199c48(0xbb)](_0x23b7f0[_0x199c48(0xc8)]);}catch(_0x22fec0){if(_0x22fec0 instanceof api_error_1[_0x199c48(0xbe)])throw _0x22fec0;throw new bad_request_error_1[(_0x199c48(0xc1))](_0x22fec0);}}async[a238_0x23b80e(0x8b)](){const _0xbf2d4c=a238_0x23b80e;try{const _0x3510ea=[];let _0x1926b7;do{_0x1926b7=await this['request'][_0xbf2d4c(0x87)]('projects/'+this['project']+'/repos',{'params':{'limit':0x64,'start':_0x1926b7?_0x1926b7[_0xbf2d4c(0x8d)]:0x0}}),_0x3510ea[_0xbf2d4c(0xba)](..._0x1926b7[_0xbf2d4c(0x8e)]);}while(!_0x1926b7[_0xbf2d4c(0xc7)]);return _0x3510ea[_0xbf2d4c(0x88)](_0x41ca6f=>repo_class_1['Repo'][_0xbf2d4c(0xb3)](_0x41ca6f,(0x0,utils_1[_0xbf2d4c(0xbd)])(this[_0xbf2d4c(0xaf)]['defaults']['baseURL']||'',_0xbf2d4c(0xc5)+this[_0xbf2d4c(0xb8)]+'/repos/'+_0x41ca6f['slug']),this[_0xbf2d4c(0xaa)],this['credentials']));}catch(_0x5b2571){if(_0x5b2571 instanceof api_error_1[_0xbf2d4c(0xbe)])throw _0x5b2571;throw new not_found_error_1[(_0xbf2d4c(0xc3))](_0x5b2571);}}async[a238_0x23b80e(0xbb)](_0x33a0bf){const _0x327975=a238_0x23b80e;var _0x68ae15;try{const _0x35766d=await this[_0x327975(0xaf)]['get'](_0x327975(0xc6)+this[_0x327975(0xb8)]+_0x327975(0x9f)+_0x33a0bf),_0xe8a915=repo_class_1[_0x327975(0xb7)][_0x327975(0xb3)](_0x35766d,(0x0,utils_1[_0x327975(0xbd)])(this[_0x327975(0xaf)][_0x327975(0xb0)]['baseURL']||'',_0x327975(0xc5)+this['project']+'/repos/'+_0x33a0bf),this['api'],this['credentials']),_0x4c9d98=await this[_0x327975(0xaf)][_0x327975(0x87)](_0xe8a915[_0x327975(0xc4)]+_0x327975(0xb9))['then'](_0x12cfb8=>_0x12cfb8[_0x327975(0x8e)]);return _0xe8a915[_0x327975(0x9a)]=(_0x68ae15=_0x4c9d98[_0x327975(0xb2)](_0x12beef=>_0x12beef['isDefault']===!![]))===null||_0x68ae15===void 0x0?void 0x0:_0x68ae15[_0x327975(0x8a)],_0xe8a915;}catch(_0x2c6c7e){if(_0x2c6c7e instanceof api_error_1[_0x327975(0xbe)])throw _0x2c6c7e;throw new not_found_error_1[(_0x327975(0xc3))](_0x2c6c7e);}}async[a238_0x23b80e(0xae)](_0xeddc0a,_0x2d6ce1){const _0x3aaaca=a238_0x23b80e;try{const _0x16ca97=await this[_0x3aaaca(0xaf)][_0x3aaaca(0x80)](_0x3aaaca(0xc6)+this['project']+'/repos/'+_0xeddc0a,_0x2d6ce1),_0x1f325c=await this[_0x3aaaca(0xaf)][_0x3aaaca(0x87)]('projects/'+this[_0x3aaaca(0xb8)]+'/repos/'+_0xeddc0a+_0x3aaaca(0x90)),_0xdc956f=repo_class_1[_0x3aaaca(0xb7)][_0x3aaaca(0xb3)](_0x16ca97,(0x0,utils_1['joinURL'])(this['request'][_0x3aaaca(0xb0)][_0x3aaaca(0x82)]||'',_0x3aaaca(0xc5)+this[_0x3aaaca(0xb8)]+_0x3aaaca(0x9f)+_0xeddc0a),this[_0x3aaaca(0xaa)],this[_0x3aaaca(0xa8)]);return _0xdc956f['defaultBranch']=_0x1f325c[_0x3aaaca(0x8a)],_0xdc956f;}catch(_0x2fc648){if(_0x2fc648 instanceof api_error_1[_0x3aaaca(0xbe)])throw _0x2fc648;throw new not_found_error_1['NotFoundError'](_0x2fc648);}}async['delete'](_0x376152){const _0x27dd24=a238_0x23b80e;try{await this[_0x27dd24(0xbb)](_0x376152),await this[_0x27dd24(0xaf)][_0x27dd24(0x99)]('projects/'+this[_0x27dd24(0xb8)]+_0x27dd24(0x9f)+_0x376152);}catch(_0x4a0be2){if(_0x4a0be2 instanceof api_error_1[_0x27dd24(0xbe)])throw _0x4a0be2;throw new bad_request_error_1[(_0x27dd24(0xc1))](_0x4a0be2);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a238_0x23b80e(0xb4)])(),__param(0x1,(0x0,typedi_1[a238_0x23b80e(0xad)])(providers_tokens_1[a238_0x23b80e(0xc2)]['credentials'])),__metadata(a238_0x23b80e(0xa7),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1[a238_0x23b80e(0x98)]])],BitbucketServerRepoService),exports[a238_0x23b80e(0xa0)]=BitbucketServerRepoService;