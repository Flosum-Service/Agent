const a238_0x3741ce=a238_0x31a3;(function(_0xb6b553,_0x2e0ea7){const _0x38ff2e=a238_0x31a3,_0x54e811=_0xb6b553();while(!![]){try{const _0x3ae757=-parseInt(_0x38ff2e(0x196))/0x1+-parseInt(_0x38ff2e(0x1a8))/0x2+parseInt(_0x38ff2e(0x1b2))/0x3*(parseInt(_0x38ff2e(0x1bb))/0x4)+-parseInt(_0x38ff2e(0x1a6))/0x5*(-parseInt(_0x38ff2e(0x1b1))/0x6)+parseInt(_0x38ff2e(0x199))/0x7*(parseInt(_0x38ff2e(0x17c))/0x8)+parseInt(_0x38ff2e(0x188))/0x9*(parseInt(_0x38ff2e(0x185))/0xa)+-parseInt(_0x38ff2e(0x1c0))/0xb*(parseInt(_0x38ff2e(0x17e))/0xc);if(_0x3ae757===_0x2e0ea7)break;else _0x54e811['push'](_0x54e811['shift']());}catch(_0x54c366){_0x54e811['push'](_0x54e811['shift']());}}}(a238_0xadd7,0xda7a5));const a238_0xabc780=(function(){let _0x3b03f8=!![];return function(_0x44e4e5,_0xe0d6d7){const _0x3e2f77=_0x3b03f8?function(){const _0x40fa6f=a238_0x31a3;if(_0xe0d6d7){const _0x5641ba=_0xe0d6d7[_0x40fa6f(0x191)](_0x44e4e5,arguments);return _0xe0d6d7=null,_0x5641ba;}}:function(){};return _0x3b03f8=![],_0x3e2f77;};}()),a238_0x2d0daf=a238_0xabc780(this,function(){const _0x131be8=a238_0x31a3;return a238_0x2d0daf[_0x131be8(0x18b)]()[_0x131be8(0x186)]('(((.+)+)+)+$')['toString']()[_0x131be8(0x18d)](a238_0x2d0daf)['search'](_0x131be8(0x17b));});a238_0x2d0daf();'use strict';var __decorate=this&&this[a238_0x3741ce(0x173)]||function(_0x2f5614,_0x5b0756,_0xc9e18d,_0x1a5ee9){const _0x2b4a33=a238_0x3741ce;var _0x56e753=arguments['length'],_0x390b5d=_0x56e753<0x3?_0x5b0756:_0x1a5ee9===null?_0x1a5ee9=Object[_0x2b4a33(0x179)](_0x5b0756,_0xc9e18d):_0x1a5ee9,_0x1de53d;if(typeof Reflect===_0x2b4a33(0x174)&&typeof Reflect[_0x2b4a33(0x1a5)]===_0x2b4a33(0x18f))_0x390b5d=Reflect['decorate'](_0x2f5614,_0x5b0756,_0xc9e18d,_0x1a5ee9);else{for(var _0x3d9562=_0x2f5614[_0x2b4a33(0x1b4)]-0x1;_0x3d9562>=0x0;_0x3d9562--)if(_0x1de53d=_0x2f5614[_0x3d9562])_0x390b5d=(_0x56e753<0x3?_0x1de53d(_0x390b5d):_0x56e753>0x3?_0x1de53d(_0x5b0756,_0xc9e18d,_0x390b5d):_0x1de53d(_0x5b0756,_0xc9e18d))||_0x390b5d;}return _0x56e753>0x3&&_0x390b5d&&Object[_0x2b4a33(0x195)](_0x5b0756,_0xc9e18d,_0x390b5d),_0x390b5d;},__metadata=this&&this['__metadata']||function(_0x14f6cd,_0x49ece5){const _0x2fabf9=a238_0x3741ce;if(typeof Reflect===_0x2fabf9(0x174)&&typeof Reflect[_0x2fabf9(0x1b7)]==='function')return Reflect[_0x2fabf9(0x1b7)](_0x14f6cd,_0x49ece5);},__param=this&&this[a238_0x3741ce(0x1bd)]||function(_0x12dbb8,_0x47cbed){return function(_0x34f80d,_0x118e67){_0x47cbed(_0x34f80d,_0x118e67,_0x12dbb8);};};function a238_0x31a3(_0x2f163f,_0x331532){const _0x452e2b=a238_0xadd7();return a238_0x31a3=function(_0x2d0daf,_0xabc780){_0x2d0daf=_0x2d0daf-0x172;let _0xadd775=_0x452e2b[_0x2d0daf];return _0xadd775;},a238_0x31a3(_0x2f163f,_0x331532);}Object['defineProperty'](exports,a238_0x3741ce(0x18c),{'value':!![]}),exports[a238_0x3741ce(0x1a9)]=void 0x0;const bad_request_error_1=require(a238_0x3741ce(0x1bc)),not_found_error_1=require(a238_0x3741ce(0x172)),typedi_1=require('typedi'),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a238_0x3741ce(0x187)),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a238_0x3741ce(0x1ad)),repo_class_1=require(a238_0x3741ce(0x193)),git_repo_service_1=require(a238_0x3741ce(0x19d)),providers_tokens_1=require(a238_0x3741ce(0x1bf)),bitbucket_server_credentials_dto_1=require(a238_0x3741ce(0x19e));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a238_0x3741ce(0x1ac)]{constructor(_0x1bffea,_0x1008b9){const _0x56930d=a238_0x3741ce;super(_0x1bffea),this[_0x56930d(0x18a)]=_0x1bffea,this[_0x56930d(0x1ae)]=_0x1008b9[_0x56930d(0x1ae)],this['credentials']=_0x1008b9;}async[a238_0x3741ce(0x1a7)](_0xc6f975){const _0x3da55e=a238_0x3741ce;try{const _0x3fc957={'name':_0xc6f975[_0x3da55e(0x178)],'scmId':_0x3da55e(0x1a4),'defaultBranch':_0xc6f975[_0x3da55e(0x1aa)],..._0xc6f975[_0x3da55e(0x181)]||{}},_0x5721aa=await this['request']['post'](_0x3da55e(0x175)+this[_0x3da55e(0x1ae)]+_0x3da55e(0x190),_0x3fc957),_0x484dff=repo_class_1[_0x3da55e(0x19c)][_0x3da55e(0x19b)](_0x5721aa,'',this[_0x3da55e(0x18a)],this['credentials']);return _0xc6f975[_0x3da55e(0x1a3)]&&await git_internal_1[_0x3da55e(0x1b6)]['createEmptyBranch'](_0x484dff,_0xc6f975[_0x3da55e(0x1aa)]||{'name':_0x3da55e(0x17d)},'',this[_0x3da55e(0x19a)]),this[_0x3da55e(0x198)](_0x484dff[_0x3da55e(0x178)]);}catch(_0x2194c9){if(_0x2194c9 instanceof api_error_1[_0x3da55e(0x1ba)])throw _0x2194c9;throw new bad_request_error_1[(_0x3da55e(0x182))](_0x2194c9);}}async['getAll'](){const _0x56f868=a238_0x3741ce;try{const _0x1840a8=[];let _0x119ba1;do{_0x119ba1=await this[_0x56f868(0x1a2)][_0x56f868(0x1ab)](_0x56f868(0x175)+this[_0x56f868(0x1ae)]+_0x56f868(0x190),{'params':{'limit':0x64,'start':_0x119ba1?_0x119ba1[_0x56f868(0x18e)]:0x0}}),_0x1840a8['push'](..._0x119ba1[_0x56f868(0x1b5)]);}while(!_0x119ba1['isLastPage']);return _0x1840a8[_0x56f868(0x1a1)](_0x54fcec=>repo_class_1[_0x56f868(0x19c)][_0x56f868(0x19b)](_0x54fcec,(0x0,utils_1[_0x56f868(0x1b9)])(this[_0x56f868(0x1a2)][_0x56f868(0x1b8)][_0x56f868(0x1b3)]||'','/projects/'+this['project']+_0x56f868(0x176)+_0x54fcec['slug']),this[_0x56f868(0x18a)],this[_0x56f868(0x19a)]));}catch(_0x3dd557){if(_0x3dd557 instanceof api_error_1[_0x56f868(0x1ba)])throw _0x3dd557;throw new not_found_error_1[(_0x56f868(0x184))](_0x3dd557);}}async['getOne'](_0x3d86b8){const _0x40830c=a238_0x3741ce;var _0x5eefff;try{const _0x293f4a=await this[_0x40830c(0x1a2)][_0x40830c(0x1ab)](_0x40830c(0x175)+this[_0x40830c(0x1ae)]+_0x40830c(0x176)+_0x3d86b8),_0x499abb=repo_class_1[_0x40830c(0x19c)][_0x40830c(0x19b)](_0x293f4a,(0x0,utils_1[_0x40830c(0x1b9)])(this[_0x40830c(0x1a2)][_0x40830c(0x1b8)][_0x40830c(0x1b3)]||'','/projects/'+this['project']+'/repos/'+_0x3d86b8),this[_0x40830c(0x18a)],this[_0x40830c(0x19a)]),_0x518c89=await this[_0x40830c(0x1a2)][_0x40830c(0x1ab)](_0x499abb['apiUrl']+_0x40830c(0x17a))[_0x40830c(0x183)](_0xe49c4a=>_0xe49c4a[_0x40830c(0x1b5)]);return _0x499abb[_0x40830c(0x1aa)]=(_0x5eefff=_0x518c89[_0x40830c(0x19f)](_0x20a32a=>_0x20a32a[_0x40830c(0x194)]===!![]))===null||_0x5eefff===void 0x0?void 0x0:_0x5eefff[_0x40830c(0x1af)],_0x499abb;}catch(_0x602dc8){if(_0x602dc8 instanceof api_error_1[_0x40830c(0x1ba)])throw _0x602dc8;throw new not_found_error_1['NotFoundError'](_0x602dc8);}}async[a238_0x3741ce(0x197)](_0x396aac,_0xfa7d5e){const _0x180fc2=a238_0x3741ce;try{const _0x36741d=await this[_0x180fc2(0x1a2)][_0x180fc2(0x177)](_0x180fc2(0x175)+this['project']+_0x180fc2(0x176)+_0x396aac,_0xfa7d5e),_0x44076d=await this[_0x180fc2(0x1a2)][_0x180fc2(0x1ab)](_0x180fc2(0x175)+this['project']+_0x180fc2(0x176)+_0x396aac+_0x180fc2(0x17f)),_0x3e92e7=repo_class_1[_0x180fc2(0x19c)][_0x180fc2(0x19b)](_0x36741d,(0x0,utils_1[_0x180fc2(0x1b9)])(this['request']['defaults']['baseURL']||'',_0x180fc2(0x1be)+this[_0x180fc2(0x1ae)]+'/repos/'+_0x396aac),this[_0x180fc2(0x18a)],this[_0x180fc2(0x19a)]);return _0x3e92e7['defaultBranch']=_0x44076d[_0x180fc2(0x1af)],_0x3e92e7;}catch(_0x54f886){if(_0x54f886 instanceof api_error_1[_0x180fc2(0x1ba)])throw _0x54f886;throw new not_found_error_1[(_0x180fc2(0x184))](_0x54f886);}}async[a238_0x3741ce(0x1a0)](_0x3aacfc){const _0x2b0a0e=a238_0x3741ce;try{await this[_0x2b0a0e(0x198)](_0x3aacfc),await this[_0x2b0a0e(0x1a2)]['delete']('projects/'+this[_0x2b0a0e(0x1ae)]+_0x2b0a0e(0x176)+_0x3aacfc);}catch(_0x38363c){if(_0x38363c instanceof api_error_1[_0x2b0a0e(0x1ba)])throw _0x38363c;throw new bad_request_error_1['BadRequestError'](_0x38363c);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a238_0x3741ce(0x189)])(),__param(0x1,(0x0,typedi_1[a238_0x3741ce(0x192)])(providers_tokens_1[a238_0x3741ce(0x1b0)][a238_0x3741ce(0x19a)])),__metadata(a238_0x3741ce(0x180),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;function a238_0xadd7(){const _0x5096b7=['defaultBranch','get','GitRepoService','../../../../shared/utils','project','displayId','Tokens','12SIMYih','15111LRYYAS','baseURL','length','values','Git','metadata','defaults','joinURL','ApiError','196MjLVcy','../../../../../core/errors/bad-request.error','__param','/projects/','../../providers.tokens','11sHsAud','../../../../../core/errors/not-found.error','__decorate','object','projects/','/repos/','put','name','getOwnPropertyDescriptor','/branches','(((.+)+)+)+$','992DMYVle','master','7283028NXtHnh','/default-branch','design:paramtypes','apiBody','BadRequestError','then','NotFoundError','17770sPniBU','search','../../api/bitbucket-server-api.service','5553gbYzCk','Service','api','toString','__esModule','constructor','nextPageStart','function','/repos','apply','Inject','../repo.class','isDefault','defineProperty','1251033uSIsqG','update','getOne','91735iCEGYh','credentials','fromBitbucketServer','Repo','./git-repo.service','../../credentials/dto/bitbucket-server-credentials.dto','find','delete','map','request','autoInit','git','decorate','796570kMMZlK','create','1068066lCjdla','BitbucketServerRepoService'];a238_0xadd7=function(){return _0x5096b7;};return a238_0xadd7();}