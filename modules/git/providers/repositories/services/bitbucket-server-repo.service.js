function a201_0x5fd5(_0x17c1b7,_0x2ba106){const _0x1550c4=a201_0x5d97();return a201_0x5fd5=function(_0x1badfd,_0x38cd4d){_0x1badfd=_0x1badfd-0x1a3;let _0x5d97ee=_0x1550c4[_0x1badfd];return _0x5d97ee;},a201_0x5fd5(_0x17c1b7,_0x2ba106);}const a201_0x33cc72=a201_0x5fd5;(function(_0x24c428,_0xf0c792){const _0x315b33=a201_0x5fd5,_0x5e9fbb=_0x24c428();while(!![]){try{const _0x38de13=parseInt(_0x315b33(0x1cf))/0x1+-parseInt(_0x315b33(0x1d9))/0x2*(parseInt(_0x315b33(0x1e8))/0x3)+-parseInt(_0x315b33(0x1da))/0x4+parseInt(_0x315b33(0x1ed))/0x5+parseInt(_0x315b33(0x1e6))/0x6*(-parseInt(_0x315b33(0x1cc))/0x7)+parseInt(_0x315b33(0x1b5))/0x8*(-parseInt(_0x315b33(0x1b0))/0x9)+parseInt(_0x315b33(0x1bd))/0xa;if(_0x38de13===_0xf0c792)break;else _0x5e9fbb['push'](_0x5e9fbb['shift']());}catch(_0x785571){_0x5e9fbb['push'](_0x5e9fbb['shift']());}}}(a201_0x5d97,0x6c6d6));const a201_0x38cd4d=(function(){let _0xfc3500=!![];return function(_0x90961d,_0x17813e){const _0xcbac14=_0xfc3500?function(){const _0x31520a=a201_0x5fd5;if(_0x17813e){const _0x1fe051=_0x17813e[_0x31520a(0x1b7)](_0x90961d,arguments);return _0x17813e=null,_0x1fe051;}}:function(){};return _0xfc3500=![],_0xcbac14;};}()),a201_0x1badfd=a201_0x38cd4d(this,function(){const _0x4e8ede=a201_0x5fd5;return a201_0x1badfd[_0x4e8ede(0x1ae)]()['search'](_0x4e8ede(0x1e3))['toString']()[_0x4e8ede(0x1e1)](a201_0x1badfd)['search'](_0x4e8ede(0x1e3));});a201_0x1badfd();'use strict';var __decorate=this&&this[a201_0x33cc72(0x1a7)]||function(_0x3dd393,_0x2cbc82,_0x3f4001,_0x26d939){const _0x34bc86=a201_0x33cc72;var _0x332d19=arguments[_0x34bc86(0x1b8)],_0x1a1ed4=_0x332d19<0x3?_0x2cbc82:_0x26d939===null?_0x26d939=Object[_0x34bc86(0x1c6)](_0x2cbc82,_0x3f4001):_0x26d939,_0x17da1b;if(typeof Reflect==='object'&&typeof Reflect[_0x34bc86(0x1c8)]===_0x34bc86(0x1d7))_0x1a1ed4=Reflect[_0x34bc86(0x1c8)](_0x3dd393,_0x2cbc82,_0x3f4001,_0x26d939);else{for(var _0x324d74=_0x3dd393[_0x34bc86(0x1b8)]-0x1;_0x324d74>=0x0;_0x324d74--)if(_0x17da1b=_0x3dd393[_0x324d74])_0x1a1ed4=(_0x332d19<0x3?_0x17da1b(_0x1a1ed4):_0x332d19>0x3?_0x17da1b(_0x2cbc82,_0x3f4001,_0x1a1ed4):_0x17da1b(_0x2cbc82,_0x3f4001))||_0x1a1ed4;}return _0x332d19>0x3&&_0x1a1ed4&&Object[_0x34bc86(0x1df)](_0x2cbc82,_0x3f4001,_0x1a1ed4),_0x1a1ed4;},__metadata=this&&this[a201_0x33cc72(0x1c9)]||function(_0x5ec47a,_0x54da68){const _0x437796=a201_0x33cc72;if(typeof Reflect==='object'&&typeof Reflect[_0x437796(0x1b6)]===_0x437796(0x1d7))return Reflect[_0x437796(0x1b6)](_0x5ec47a,_0x54da68);},__param=this&&this[a201_0x33cc72(0x1bb)]||function(_0x3e78b3,_0x23f310){return function(_0x1b72e9,_0x2997ad){_0x23f310(_0x1b72e9,_0x2997ad,_0x3e78b3);};};Object[a201_0x33cc72(0x1df)](exports,a201_0x33cc72(0x1ad),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a201_0x33cc72(0x1a6)),not_found_error_1=require(a201_0x33cc72(0x1a5)),typedi_1=require(a201_0x33cc72(0x1a9)),api_error_1=require(a201_0x33cc72(0x1d2)),bitbucket_server_api_service_1=require('../../api/bitbucket-server-api.service'),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a201_0x33cc72(0x1e2)),repo_class_1=require(a201_0x33cc72(0x1c1)),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require(a201_0x33cc72(0x1b2));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x95cfe,_0x290c36){const _0x4554ef=a201_0x33cc72;super(_0x95cfe),this[_0x4554ef(0x1db)]=_0x95cfe,this[_0x4554ef(0x1dc)]=_0x290c36[_0x4554ef(0x1dc)],this[_0x4554ef(0x1cd)]=_0x290c36;}async[a201_0x33cc72(0x1a8)](_0x523e10){const _0x6fbc25=a201_0x33cc72;try{const _0x356336={'name':_0x523e10[_0x6fbc25(0x1ac)],'scmId':'git','defaultBranch':_0x523e10['defaultBranch'],..._0x523e10[_0x6fbc25(0x1c7)]||{}},_0x322877=await this[_0x6fbc25(0x1af)][_0x6fbc25(0x1b1)](_0x6fbc25(0x1b9)+this[_0x6fbc25(0x1dc)]+_0x6fbc25(0x1c0),_0x356336),_0x19338a=repo_class_1['Repo']['fromBitbucketServer'](_0x322877,'',this[_0x6fbc25(0x1db)],this['credentials']);return _0x523e10[_0x6fbc25(0x1e5)]&&await git_internal_1['Git'][_0x6fbc25(0x1a4)](_0x19338a,_0x523e10[_0x6fbc25(0x1ab)]||'master','',this['credentials']),this[_0x6fbc25(0x1bf)](_0x19338a[_0x6fbc25(0x1ac)]);}catch(_0x4f5e09){if(_0x4f5e09 instanceof api_error_1[_0x6fbc25(0x1d3)])throw _0x4f5e09;throw new bad_request_error_1['BadRequestError'](_0x4f5e09);}}async[a201_0x33cc72(0x1ea)](){const _0x576c75=a201_0x33cc72;try{const _0x5290b2=[];let _0x396964;do{_0x396964=await this['request'][_0x576c75(0x1c3)](_0x576c75(0x1b9)+this[_0x576c75(0x1dc)]+_0x576c75(0x1c0),{'params':{'limit':0x64,'start':_0x396964?_0x396964[_0x576c75(0x1ca)]:0x0}}),_0x5290b2[_0x576c75(0x1b4)](..._0x396964['values']);}while(!_0x396964[_0x576c75(0x1ba)]);return _0x5290b2[_0x576c75(0x1ce)](_0x277a06=>repo_class_1[_0x576c75(0x1c4)][_0x576c75(0x1e9)](_0x277a06,(0x0,utils_1[_0x576c75(0x1aa)])(this[_0x576c75(0x1af)]['defaults'][_0x576c75(0x1de)]||'',_0x576c75(0x1bc)+this[_0x576c75(0x1dc)]+_0x576c75(0x1c2)+_0x277a06[_0x576c75(0x1d5)]),this[_0x576c75(0x1db)],this[_0x576c75(0x1cd)]));}catch(_0x187ae1){if(_0x187ae1 instanceof api_error_1[_0x576c75(0x1d3)])throw _0x187ae1;throw new not_found_error_1[(_0x576c75(0x1d1))](_0x187ae1);}}async[a201_0x33cc72(0x1bf)](_0x48df3f){const _0x218c3e=a201_0x33cc72;var _0x1757c6;try{const _0x59c4f2=await this[_0x218c3e(0x1af)]['get']('projects/'+this['project']+_0x218c3e(0x1c2)+_0x48df3f),_0x310e4d=repo_class_1[_0x218c3e(0x1c4)]['fromBitbucketServer'](_0x59c4f2,(0x0,utils_1[_0x218c3e(0x1aa)])(this[_0x218c3e(0x1af)][_0x218c3e(0x1e0)][_0x218c3e(0x1de)]||'','/projects/'+this[_0x218c3e(0x1dc)]+_0x218c3e(0x1c2)+_0x48df3f),this[_0x218c3e(0x1db)],this[_0x218c3e(0x1cd)]),_0x58114b=await this[_0x218c3e(0x1af)]['get'](_0x310e4d['apiUrl']+'/branches')[_0x218c3e(0x1be)](_0x164db3=>_0x164db3[_0x218c3e(0x1e7)]);return _0x310e4d[_0x218c3e(0x1ab)]=(_0x1757c6=_0x58114b[_0x218c3e(0x1d0)](_0x51a6d6=>_0x51a6d6[_0x218c3e(0x1d4)]===!![]))===null||_0x1757c6===void 0x0?void 0x0:_0x1757c6[_0x218c3e(0x1cb)],_0x310e4d;}catch(_0x36af0c){if(_0x36af0c instanceof api_error_1[_0x218c3e(0x1d3)])throw _0x36af0c;throw new not_found_error_1[(_0x218c3e(0x1d1))](_0x36af0c);}}async[a201_0x33cc72(0x1dd)](_0x316e0b,_0x187c66){const _0x3c4f71=a201_0x33cc72;try{const _0x13ea31=await this[_0x3c4f71(0x1af)][_0x3c4f71(0x1c5)](_0x3c4f71(0x1b9)+this[_0x3c4f71(0x1dc)]+_0x3c4f71(0x1c2)+_0x316e0b,_0x187c66),_0x52859a=await this[_0x3c4f71(0x1af)][_0x3c4f71(0x1c3)](_0x3c4f71(0x1b9)+this[_0x3c4f71(0x1dc)]+_0x3c4f71(0x1c2)+_0x316e0b+'/default-branch'),_0x41ba96=repo_class_1[_0x3c4f71(0x1c4)][_0x3c4f71(0x1e9)](_0x13ea31,(0x0,utils_1[_0x3c4f71(0x1aa)])(this[_0x3c4f71(0x1af)][_0x3c4f71(0x1e0)]['baseURL']||'',_0x3c4f71(0x1bc)+this[_0x3c4f71(0x1dc)]+_0x3c4f71(0x1c2)+_0x316e0b),this[_0x3c4f71(0x1db)],this[_0x3c4f71(0x1cd)]);return _0x41ba96[_0x3c4f71(0x1ab)]=_0x52859a['displayId'],_0x41ba96;}catch(_0x2820fa){if(_0x2820fa instanceof api_error_1['ApiError'])throw _0x2820fa;throw new not_found_error_1['NotFoundError'](_0x2820fa);}}async[a201_0x33cc72(0x1e4)](_0xcb2c99){const _0x26c126=a201_0x33cc72;try{await this[_0x26c126(0x1bf)](_0xcb2c99),await this[_0x26c126(0x1af)][_0x26c126(0x1e4)](_0x26c126(0x1b9)+this[_0x26c126(0x1dc)]+_0x26c126(0x1c2)+_0xcb2c99);}catch(_0x4b6c1d){if(_0x4b6c1d instanceof api_error_1[_0x26c126(0x1d3)])throw _0x4b6c1d;throw new bad_request_error_1[(_0x26c126(0x1d8))](_0x4b6c1d);}}};function a201_0x5d97(){const _0x2caab5=['(((.+)+)+)+$','delete','autoInit','4290gUOmeq','values','3qIROxG','fromBitbucketServer','getAll','BitbucketServerRepoService','Inject','782690QfLYrl','BitbucketServerCredentialsDto','createEmptyBranch','../../../../../core/errors/not-found.error','../../../../../core/errors/bad-request.error','__decorate','create','typedi','joinURL','defaultBranch','name','__esModule','toString','request','18IqVtxv','post','../../credentials/dto/bitbucket-server-credentials.dto','BitbucketServerApiService','push','3184432HLgbWl','metadata','apply','length','projects/','isLastPage','__param','/projects/','21325190NRWZdU','then','getOne','/repos','../repo.class','/repos/','get','Repo','put','getOwnPropertyDescriptor','apiBody','decorate','__metadata','nextPageStart','displayId','1043bltchW','credentials','map','222035gqIYao','find','NotFoundError','../../../../../core/errors/api.error','ApiError','isDefault','slug','Tokens','function','BadRequestError','622184KgXeOY','3412956mmfkPP','api','project','update','baseURL','defineProperty','defaults','constructor','../../../../shared/utils'];a201_0x5d97=function(){return _0x2caab5;};return a201_0x5d97();}BitbucketServerRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a201_0x33cc72(0x1ec)])(providers_tokens_1[a201_0x33cc72(0x1d6)][a201_0x33cc72(0x1cd)])),__metadata('design:paramtypes',[bitbucket_server_api_service_1[a201_0x33cc72(0x1b3)],bitbucket_server_credentials_dto_1[a201_0x33cc72(0x1a3)]])],BitbucketServerRepoService),exports[a201_0x33cc72(0x1eb)]=BitbucketServerRepoService;