const a154_0xb8cf01=a154_0x192a;(function(_0x4da312,_0x44a10f){const _0x3fc81e=a154_0x192a,_0x545137=_0x4da312();while(!![]){try{const _0x2ed2ab=parseInt(_0x3fc81e(0x10d))/0x1+-parseInt(_0x3fc81e(0x105))/0x2+-parseInt(_0x3fc81e(0x131))/0x3+-parseInt(_0x3fc81e(0xfa))/0x4*(parseInt(_0x3fc81e(0x104))/0x5)+-parseInt(_0x3fc81e(0x103))/0x6*(parseInt(_0x3fc81e(0x11c))/0x7)+parseInt(_0x3fc81e(0xf0))/0x8+parseInt(_0x3fc81e(0x12f))/0x9*(parseInt(_0x3fc81e(0x11a))/0xa);if(_0x2ed2ab===_0x44a10f)break;else _0x545137['push'](_0x545137['shift']());}catch(_0x30b97a){_0x545137['push'](_0x545137['shift']());}}}(a154_0x6eeb,0x42604));const a154_0x2ee24c=(function(){let _0x1ed3aa=!![];return function(_0x305ad3,_0x193328){const _0x55078f=_0x1ed3aa?function(){const _0x26c34=a154_0x192a;if(_0x193328){const _0x6c80d4=_0x193328[_0x26c34(0x100)](_0x305ad3,arguments);return _0x193328=null,_0x6c80d4;}}:function(){};return _0x1ed3aa=![],_0x55078f;};}()),a154_0x23cb55=a154_0x2ee24c(this,function(){const _0x2642c5=a154_0x192a;return a154_0x23cb55[_0x2642c5(0x109)]()[_0x2642c5(0x116)]('(((.+)+)+)+$')['toString']()['constructor'](a154_0x23cb55)[_0x2642c5(0x116)]('(((.+)+)+)+$');});a154_0x23cb55();function a154_0x6eeb(){const _0xecfd7a=['BitbucketServerCredentialsDto','typedi','baseURL','321815XCfAcS','/repos/','../../credentials/dto/bitbucket-server-credentials.dto','push','metadata','../repo.class','delete','master','NotFoundError','search','function','../../../../../core/errors/bad-request.error','/branches','20GnBUyM','joinURL','1713453zptGoN','getOne','../../../../../core/errors/api.error','credentials','Inject','autoInit','ApiError','apiBody','design:paramtypes','update','defaultBranch','defaults','post','BitbucketServerRepoService','name','defineProperty','../../../../shared/utils','/projects/','decorate','1638180pXVgze','../../../internal/git.internal','26904ApURWx','BadRequestError','__metadata','Git','put','request','Repo','Tokens','isDefault','createEmptyBranch','find','get','2459232wtbCQP','__decorate','api','getOwnPropertyDescriptor','../../../../../core/errors/not-found.error','fromBitbucketServer','./git-repo.service','object','project','displayId','268LncAzL','map','projects/','slug','/repos','git','apply','__param','values','6abpyOB','3920uNmGTl','830216BgNafv','__esModule','length','isLastPage','toString'];a154_0x6eeb=function(){return _0xecfd7a;};return a154_0x6eeb();}'use strict';var __decorate=this&&this[a154_0xb8cf01(0xf1)]||function(_0x369acc,_0xadc475,_0x37c913,_0x4a924a){const _0x3491d4=a154_0xb8cf01;var _0x24af2d=arguments[_0x3491d4(0x107)],_0x5ccc8d=_0x24af2d<0x3?_0xadc475:_0x4a924a===null?_0x4a924a=Object[_0x3491d4(0xf3)](_0xadc475,_0x37c913):_0x4a924a,_0x3f883e;if(typeof Reflect===_0x3491d4(0xf7)&&typeof Reflect[_0x3491d4(0x12e)]===_0x3491d4(0x117))_0x5ccc8d=Reflect[_0x3491d4(0x12e)](_0x369acc,_0xadc475,_0x37c913,_0x4a924a);else{for(var _0x1a4e30=_0x369acc[_0x3491d4(0x107)]-0x1;_0x1a4e30>=0x0;_0x1a4e30--)if(_0x3f883e=_0x369acc[_0x1a4e30])_0x5ccc8d=(_0x24af2d<0x3?_0x3f883e(_0x5ccc8d):_0x24af2d>0x3?_0x3f883e(_0xadc475,_0x37c913,_0x5ccc8d):_0x3f883e(_0xadc475,_0x37c913))||_0x5ccc8d;}return _0x24af2d>0x3&&_0x5ccc8d&&Object[_0x3491d4(0x12b)](_0xadc475,_0x37c913,_0x5ccc8d),_0x5ccc8d;},__metadata=this&&this[a154_0xb8cf01(0x133)]||function(_0x200ea7,_0x27a6f0){const _0x8a4694=a154_0xb8cf01;if(typeof Reflect==='object'&&typeof Reflect[_0x8a4694(0x111)]===_0x8a4694(0x117))return Reflect['metadata'](_0x200ea7,_0x27a6f0);},__param=this&&this[a154_0xb8cf01(0x101)]||function(_0x3e4b38,_0x3a065d){return function(_0x46e1bc,_0xf45090){_0x3a065d(_0x46e1bc,_0xf45090,_0x3e4b38);};};function a154_0x192a(_0x4eb096,_0x3c5c2e){const _0x4652d0=a154_0x6eeb();return a154_0x192a=function(_0x23cb55,_0x2ee24c){_0x23cb55=_0x23cb55-0xea;let _0x6eebb0=_0x4652d0[_0x23cb55];return _0x6eebb0;},a154_0x192a(_0x4eb096,_0x3c5c2e);}Object[a154_0xb8cf01(0x12b)](exports,a154_0xb8cf01(0x106),{'value':!![]}),exports[a154_0xb8cf01(0x129)]=void 0x0;const bad_request_error_1=require(a154_0xb8cf01(0x118)),not_found_error_1=require(a154_0xb8cf01(0xf4)),typedi_1=require(a154_0xb8cf01(0x10b)),api_error_1=require(a154_0xb8cf01(0x11e)),bitbucket_server_api_service_1=require('../../api/bitbucket-server-api.service'),git_internal_1=require(a154_0xb8cf01(0x130)),utils_1=require(a154_0xb8cf01(0x12c)),repo_class_1=require(a154_0xb8cf01(0x112)),git_repo_service_1=require(a154_0xb8cf01(0xf6)),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require(a154_0xb8cf01(0x10f));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x611848,_0x4b51aa){const _0xdec53=a154_0xb8cf01;super(_0x611848),this[_0xdec53(0xf2)]=_0x611848,this['project']=_0x4b51aa[_0xdec53(0xf8)],this[_0xdec53(0x11f)]=_0x4b51aa;}async['create'](_0x503c0c){const _0x5a3d28=a154_0xb8cf01;try{const _0x485bac={'name':_0x503c0c[_0x5a3d28(0x12a)],'scmId':_0x5a3d28(0xff),'defaultBranch':_0x503c0c[_0x5a3d28(0x126)],..._0x503c0c[_0x5a3d28(0x123)]||{}},_0x4125e2=await this[_0x5a3d28(0x136)][_0x5a3d28(0x128)](_0x5a3d28(0xfc)+this['project']+_0x5a3d28(0xfe),_0x485bac),_0x13efc4=repo_class_1[_0x5a3d28(0xea)][_0x5a3d28(0xf5)](_0x4125e2,'',this[_0x5a3d28(0xf2)],this[_0x5a3d28(0x11f)]);return _0x503c0c[_0x5a3d28(0x121)]&&await git_internal_1[_0x5a3d28(0x134)][_0x5a3d28(0xed)](_0x13efc4,_0x503c0c[_0x5a3d28(0x126)]||_0x5a3d28(0x114),'',this[_0x5a3d28(0x11f)]),this[_0x5a3d28(0x11d)](_0x13efc4[_0x5a3d28(0x12a)]);}catch(_0x370901){if(_0x370901 instanceof api_error_1[_0x5a3d28(0x122)])throw _0x370901;throw new bad_request_error_1[(_0x5a3d28(0x132))](_0x370901);}}async['getAll'](){const _0x601517=a154_0xb8cf01;try{const _0x32e0e2=[];let _0x15462e;do{_0x15462e=await this[_0x601517(0x136)][_0x601517(0xef)](_0x601517(0xfc)+this[_0x601517(0xf8)]+_0x601517(0xfe),{'params':{'limit':0x64,'start':_0x15462e?_0x15462e['nextPageStart']:0x0}}),_0x32e0e2[_0x601517(0x110)](..._0x15462e[_0x601517(0x102)]);}while(!_0x15462e[_0x601517(0x108)]);return _0x32e0e2[_0x601517(0xfb)](_0x4c33fb=>repo_class_1[_0x601517(0xea)][_0x601517(0xf5)](_0x4c33fb,utils_1['joinURL'](this[_0x601517(0x136)][_0x601517(0x127)][_0x601517(0x10c)]||'',_0x601517(0x12d)+this[_0x601517(0xf8)]+_0x601517(0x10e)+_0x4c33fb[_0x601517(0xfd)]),this[_0x601517(0xf2)],this[_0x601517(0x11f)]));}catch(_0x544da0){if(_0x544da0 instanceof api_error_1['ApiError'])throw _0x544da0;throw new not_found_error_1[(_0x601517(0x115))](_0x544da0);}}async['getOne'](_0x573dba){const _0x257ed3=a154_0xb8cf01;var _0x5a9630;try{const _0xb55f40=await this[_0x257ed3(0x136)][_0x257ed3(0xef)](_0x257ed3(0xfc)+this[_0x257ed3(0xf8)]+_0x257ed3(0x10e)+_0x573dba),_0xa70066=repo_class_1[_0x257ed3(0xea)][_0x257ed3(0xf5)](_0xb55f40,utils_1['joinURL'](this['request'][_0x257ed3(0x127)]['baseURL']||'','/projects/'+this[_0x257ed3(0xf8)]+_0x257ed3(0x10e)+_0x573dba),this['api'],this['credentials']),_0x7dbcee=await this[_0x257ed3(0x136)][_0x257ed3(0xef)](_0xa70066['apiUrl']+_0x257ed3(0x119))['then'](_0x394b20=>_0x394b20[_0x257ed3(0x102)]);return _0xa70066['defaultBranch']=(_0x5a9630=_0x7dbcee[_0x257ed3(0xee)](_0x4802a6=>_0x4802a6[_0x257ed3(0xec)]===!![]))===null||_0x5a9630===void 0x0?void 0x0:_0x5a9630[_0x257ed3(0xf9)],_0xa70066;}catch(_0xa869c8){if(_0xa869c8 instanceof api_error_1[_0x257ed3(0x122)])throw _0xa869c8;throw new not_found_error_1[(_0x257ed3(0x115))](_0xa869c8);}}async[a154_0xb8cf01(0x125)](_0x3a4fad,_0x3ed2ae){const _0x464dba=a154_0xb8cf01;try{const _0x59a2ab=await this[_0x464dba(0x136)][_0x464dba(0x135)](_0x464dba(0xfc)+this[_0x464dba(0xf8)]+_0x464dba(0x10e)+_0x3a4fad,_0x3ed2ae),_0x57afcd=await this[_0x464dba(0x136)][_0x464dba(0xef)]('projects/'+this[_0x464dba(0xf8)]+'/repos/'+_0x3a4fad+'/default-branch'),_0x47ff32=repo_class_1[_0x464dba(0xea)][_0x464dba(0xf5)](_0x59a2ab,utils_1[_0x464dba(0x11b)](this[_0x464dba(0x136)]['defaults'][_0x464dba(0x10c)]||'',_0x464dba(0x12d)+this[_0x464dba(0xf8)]+_0x464dba(0x10e)+_0x3a4fad),this['api'],this['credentials']);return _0x47ff32[_0x464dba(0x126)]=_0x57afcd[_0x464dba(0xf9)],_0x47ff32;}catch(_0x535aa1){if(_0x535aa1 instanceof api_error_1[_0x464dba(0x122)])throw _0x535aa1;throw new not_found_error_1[(_0x464dba(0x115))](_0x535aa1);}}async[a154_0xb8cf01(0x113)](_0x4be7a4){const _0x260b28=a154_0xb8cf01;try{await this['getOne'](_0x4be7a4),await this[_0x260b28(0x136)][_0x260b28(0x113)]('projects/'+this[_0x260b28(0xf8)]+_0x260b28(0x10e)+_0x4be7a4);}catch(_0x7c6827){if(_0x7c6827 instanceof api_error_1[_0x260b28(0x122)])throw _0x7c6827;throw new bad_request_error_1[(_0x260b28(0x132))](_0x7c6827);}}};BitbucketServerRepoService=__decorate([typedi_1['Service'](),__param(0x1,typedi_1[a154_0xb8cf01(0x120)](providers_tokens_1[a154_0xb8cf01(0xeb)][a154_0xb8cf01(0x11f)])),__metadata(a154_0xb8cf01(0x124),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1[a154_0xb8cf01(0x10a)]])],BitbucketServerRepoService),exports[a154_0xb8cf01(0x129)]=BitbucketServerRepoService;