const a206_0x5e0c51=a206_0x553a;function a206_0x433e(){const _0x388d55=['../../../../shared/utils','then','132UsHchI','BitbucketServerCredentialsDto','GitRepoService','48953tpAnRp','Service','../repo.class','8RGfrqb','NotFoundError','5616639sfMaPP','request','__param','defaultBranch','api','apply','find','__esModule','design:paramtypes','baseURL','32731008cNjWsR','object','../../../../../core/errors/not-found.error','(((.+)+)+)+$','map','slug','ApiError','5067303ZiapaC','fromBitbucketServer','Inject','put','apiBody','project','/repos','13IxiCJH','Tokens','/default-branch','defineProperty','./git-repo.service','450066qtoCFM','isDefault','credentials','3156450OLLXrs','metadata','length','search','create','../../providers.tokens','Git','decorate','typedi','post','git','toString','4CmsRCG','constructor','28uFgpYt','getOne','__decorate','49yXDiNv','values','getOwnPropertyDescriptor','function','get','displayId','delete','defaults','push','joinURL','update','nextPageStart','2680FEYZKX','../../../../../core/errors/bad-request.error','/projects/','name','BadRequestError','../../credentials/dto/bitbucket-server-credentials.dto','Repo','__metadata','/repos/','projects/','createEmptyBranch'];a206_0x433e=function(){return _0x388d55;};return a206_0x433e();}(function(_0x170a9f,_0x56cc14){const _0x2c313c=a206_0x553a,_0x2d58e8=_0x170a9f();while(!![]){try{const _0x44e722=-parseInt(_0x2c313c(0x1c2))/0x1*(parseInt(_0x2c313c(0x1f5))/0x2)+parseInt(_0x2c313c(0x1d8))/0x3*(-parseInt(_0x2c313c(0x1f3))/0x4)+-parseInt(_0x2c313c(0x1e7))/0x5+parseInt(_0x2c313c(0x1e4))/0x6*(parseInt(_0x2c313c(0x1f8))/0x7)+parseInt(_0x2c313c(0x1c5))/0x8*(parseInt(_0x2c313c(0x1c7))/0x9)+parseInt(_0x2c313c(0x204))/0xa*(-parseInt(_0x2c313c(0x1bf))/0xb)+parseInt(_0x2c313c(0x1d1))/0xc*(parseInt(_0x2c313c(0x1df))/0xd);if(_0x44e722===_0x56cc14)break;else _0x2d58e8['push'](_0x2d58e8['shift']());}catch(_0x256077){_0x2d58e8['push'](_0x2d58e8['shift']());}}}(a206_0x433e,0xd3dc7));const a206_0x2f7024=(function(){let _0x405d44=!![];return function(_0x56ed91,_0x24e760){const _0x22746f=_0x405d44?function(){const _0x42ad29=a206_0x553a;if(_0x24e760){const _0x38e61d=_0x24e760[_0x42ad29(0x1cc)](_0x56ed91,arguments);return _0x24e760=null,_0x38e61d;}}:function(){};return _0x405d44=![],_0x22746f;};}()),a206_0x2d8a90=a206_0x2f7024(this,function(){const _0x4b4553=a206_0x553a;return a206_0x2d8a90[_0x4b4553(0x1f2)]()['search'](_0x4b4553(0x1d4))[_0x4b4553(0x1f2)]()[_0x4b4553(0x1f4)](a206_0x2d8a90)[_0x4b4553(0x1ea)]('(((.+)+)+)+$');});a206_0x2d8a90();'use strict';var __decorate=this&&this[a206_0x5e0c51(0x1f7)]||function(_0x25a30d,_0x22f9a1,_0x1bd45f,_0xaa0b40){const _0x1a34cd=a206_0x5e0c51;var _0x5a091d=arguments[_0x1a34cd(0x1e9)],_0x196ce2=_0x5a091d<0x3?_0x22f9a1:_0xaa0b40===null?_0xaa0b40=Object[_0x1a34cd(0x1fa)](_0x22f9a1,_0x1bd45f):_0xaa0b40,_0x4b9376;if(typeof Reflect===_0x1a34cd(0x1d2)&&typeof Reflect[_0x1a34cd(0x1ee)]===_0x1a34cd(0x1fb))_0x196ce2=Reflect[_0x1a34cd(0x1ee)](_0x25a30d,_0x22f9a1,_0x1bd45f,_0xaa0b40);else{for(var _0x3d93d4=_0x25a30d[_0x1a34cd(0x1e9)]-0x1;_0x3d93d4>=0x0;_0x3d93d4--)if(_0x4b9376=_0x25a30d[_0x3d93d4])_0x196ce2=(_0x5a091d<0x3?_0x4b9376(_0x196ce2):_0x5a091d>0x3?_0x4b9376(_0x22f9a1,_0x1bd45f,_0x196ce2):_0x4b9376(_0x22f9a1,_0x1bd45f))||_0x196ce2;}return _0x5a091d>0x3&&_0x196ce2&&Object[_0x1a34cd(0x1e2)](_0x22f9a1,_0x1bd45f,_0x196ce2),_0x196ce2;},__metadata=this&&this[a206_0x5e0c51(0x20b)]||function(_0x5a5960,_0x443e91){const _0x53b37a=a206_0x5e0c51;if(typeof Reflect==='object'&&typeof Reflect[_0x53b37a(0x1e8)]===_0x53b37a(0x1fb))return Reflect[_0x53b37a(0x1e8)](_0x5a5960,_0x443e91);},__param=this&&this[a206_0x5e0c51(0x1c9)]||function(_0x59fad7,_0x1f477f){return function(_0x21091c,_0x5c6968){_0x1f477f(_0x21091c,_0x5c6968,_0x59fad7);};};Object['defineProperty'](exports,a206_0x5e0c51(0x1ce),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a206_0x5e0c51(0x205)),not_found_error_1=require(a206_0x5e0c51(0x1d3)),typedi_1=require(a206_0x5e0c51(0x1ef)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require('../../api/bitbucket-server-api.service'),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a206_0x5e0c51(0x1bd)),repo_class_1=require(a206_0x5e0c51(0x1c4)),git_repo_service_1=require(a206_0x5e0c51(0x1e3)),providers_tokens_1=require(a206_0x5e0c51(0x1ec)),bitbucket_server_credentials_dto_1=require(a206_0x5e0c51(0x209));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a206_0x5e0c51(0x1c1)]{constructor(_0x590ec0,_0x2a681c){const _0x540e42=a206_0x5e0c51;super(_0x590ec0),this[_0x540e42(0x1cb)]=_0x590ec0,this['project']=_0x2a681c[_0x540e42(0x1dd)],this[_0x540e42(0x1e6)]=_0x2a681c;}async[a206_0x5e0c51(0x1eb)](_0x2950a6){const _0x421004=a206_0x5e0c51;try{const _0x51f94d={'name':_0x2950a6[_0x421004(0x207)],'scmId':_0x421004(0x1f1),'defaultBranch':_0x2950a6['defaultBranch'],..._0x2950a6[_0x421004(0x1dc)]||{}},_0x6130ab=await this[_0x421004(0x1c8)][_0x421004(0x1f0)](_0x421004(0x1bb)+this[_0x421004(0x1dd)]+_0x421004(0x1de),_0x51f94d),_0x21602e=repo_class_1['Repo'][_0x421004(0x1d9)](_0x6130ab,'',this[_0x421004(0x1cb)],this['credentials']);return _0x2950a6['autoInit']&&await git_internal_1[_0x421004(0x1ed)][_0x421004(0x1bc)](_0x21602e,_0x2950a6[_0x421004(0x1ca)]||'master','',this['credentials']),this[_0x421004(0x1f6)](_0x21602e['name']);}catch(_0x49addd){if(_0x49addd instanceof api_error_1[_0x421004(0x1d7)])throw _0x49addd;throw new bad_request_error_1[(_0x421004(0x208))](_0x49addd);}}async['getAll'](){const _0x381f45=a206_0x5e0c51;try{const _0x4b9470=[];let _0x21ae18;do{_0x21ae18=await this[_0x381f45(0x1c8)]['get']('projects/'+this['project']+_0x381f45(0x1de),{'params':{'limit':0x64,'start':_0x21ae18?_0x21ae18[_0x381f45(0x203)]:0x0}}),_0x4b9470[_0x381f45(0x200)](..._0x21ae18[_0x381f45(0x1f9)]);}while(!_0x21ae18['isLastPage']);return _0x4b9470[_0x381f45(0x1d5)](_0x170bde=>repo_class_1[_0x381f45(0x20a)][_0x381f45(0x1d9)](_0x170bde,(0x0,utils_1[_0x381f45(0x201)])(this[_0x381f45(0x1c8)][_0x381f45(0x1ff)][_0x381f45(0x1d0)]||'',_0x381f45(0x206)+this['project']+_0x381f45(0x1ba)+_0x170bde[_0x381f45(0x1d6)]),this[_0x381f45(0x1cb)],this[_0x381f45(0x1e6)]));}catch(_0x55ba6b){if(_0x55ba6b instanceof api_error_1[_0x381f45(0x1d7)])throw _0x55ba6b;throw new not_found_error_1[(_0x381f45(0x1c6))](_0x55ba6b);}}async[a206_0x5e0c51(0x1f6)](_0x283ff0){const _0x12ffeb=a206_0x5e0c51;var _0x25ec7c;try{const _0x5c3670=await this[_0x12ffeb(0x1c8)][_0x12ffeb(0x1fc)](_0x12ffeb(0x1bb)+this[_0x12ffeb(0x1dd)]+'/repos/'+_0x283ff0),_0x10463c=repo_class_1[_0x12ffeb(0x20a)]['fromBitbucketServer'](_0x5c3670,(0x0,utils_1[_0x12ffeb(0x201)])(this[_0x12ffeb(0x1c8)]['defaults']['baseURL']||'','/projects/'+this[_0x12ffeb(0x1dd)]+'/repos/'+_0x283ff0),this['api'],this['credentials']),_0x1edefb=await this[_0x12ffeb(0x1c8)][_0x12ffeb(0x1fc)](_0x10463c['apiUrl']+'/branches')[_0x12ffeb(0x1be)](_0x395cf4=>_0x395cf4[_0x12ffeb(0x1f9)]);return _0x10463c[_0x12ffeb(0x1ca)]=(_0x25ec7c=_0x1edefb[_0x12ffeb(0x1cd)](_0x44c791=>_0x44c791[_0x12ffeb(0x1e5)]===!![]))===null||_0x25ec7c===void 0x0?void 0x0:_0x25ec7c[_0x12ffeb(0x1fd)],_0x10463c;}catch(_0xcaad2e){if(_0xcaad2e instanceof api_error_1[_0x12ffeb(0x1d7)])throw _0xcaad2e;throw new not_found_error_1[(_0x12ffeb(0x1c6))](_0xcaad2e);}}async[a206_0x5e0c51(0x202)](_0x3bbc68,_0x3ff31f){const _0x4c434f=a206_0x5e0c51;try{const _0x39bab7=await this[_0x4c434f(0x1c8)][_0x4c434f(0x1db)](_0x4c434f(0x1bb)+this['project']+_0x4c434f(0x1ba)+_0x3bbc68,_0x3ff31f),_0x5dd77c=await this['request'][_0x4c434f(0x1fc)](_0x4c434f(0x1bb)+this[_0x4c434f(0x1dd)]+_0x4c434f(0x1ba)+_0x3bbc68+_0x4c434f(0x1e1)),_0x1a1645=repo_class_1[_0x4c434f(0x20a)]['fromBitbucketServer'](_0x39bab7,(0x0,utils_1['joinURL'])(this[_0x4c434f(0x1c8)][_0x4c434f(0x1ff)][_0x4c434f(0x1d0)]||'',_0x4c434f(0x206)+this[_0x4c434f(0x1dd)]+_0x4c434f(0x1ba)+_0x3bbc68),this['api'],this[_0x4c434f(0x1e6)]);return _0x1a1645[_0x4c434f(0x1ca)]=_0x5dd77c[_0x4c434f(0x1fd)],_0x1a1645;}catch(_0xda3261){if(_0xda3261 instanceof api_error_1[_0x4c434f(0x1d7)])throw _0xda3261;throw new not_found_error_1[(_0x4c434f(0x1c6))](_0xda3261);}}async[a206_0x5e0c51(0x1fe)](_0x11cac7){const _0x4d11e5=a206_0x5e0c51;try{await this[_0x4d11e5(0x1f6)](_0x11cac7),await this['request'][_0x4d11e5(0x1fe)]('projects/'+this[_0x4d11e5(0x1dd)]+_0x4d11e5(0x1ba)+_0x11cac7);}catch(_0x3ebf83){if(_0x3ebf83 instanceof api_error_1[_0x4d11e5(0x1d7)])throw _0x3ebf83;throw new bad_request_error_1[(_0x4d11e5(0x208))](_0x3ebf83);}}};function a206_0x553a(_0x47a91f,_0x19bcd9){const _0x1c5aed=a206_0x433e();return a206_0x553a=function(_0x2d8a90,_0x2f7024){_0x2d8a90=_0x2d8a90-0x1ba;let _0x433e0d=_0x1c5aed[_0x2d8a90];return _0x433e0d;},a206_0x553a(_0x47a91f,_0x19bcd9);}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a206_0x5e0c51(0x1c3)])(),__param(0x1,(0x0,typedi_1[a206_0x5e0c51(0x1da)])(providers_tokens_1[a206_0x5e0c51(0x1e0)][a206_0x5e0c51(0x1e6)])),__metadata(a206_0x5e0c51(0x1cf),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1[a206_0x5e0c51(0x1c0)]])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;