const a206_0x1aec32=a206_0x2a20;function a206_0x2a20(_0xc32f7d,_0x143015){const _0x39c6cf=a206_0x4978();return a206_0x2a20=function(_0x277689,_0x2a46f4){_0x277689=_0x277689-0x105;let _0x497862=_0x39c6cf[_0x277689];return _0x497862;},a206_0x2a20(_0xc32f7d,_0x143015);}(function(_0xc92c6c,_0x5be04a){const _0x5d72d8=a206_0x2a20,_0x3f9601=_0xc92c6c();while(!![]){try{const _0x133272=parseInt(_0x5d72d8(0x124))/0x1+parseInt(_0x5d72d8(0x131))/0x2*(-parseInt(_0x5d72d8(0x111))/0x3)+parseInt(_0x5d72d8(0x140))/0x4*(-parseInt(_0x5d72d8(0x13d))/0x5)+parseInt(_0x5d72d8(0x10d))/0x6*(-parseInt(_0x5d72d8(0x128))/0x7)+parseInt(_0x5d72d8(0x138))/0x8*(parseInt(_0x5d72d8(0x136))/0x9)+parseInt(_0x5d72d8(0x107))/0xa*(parseInt(_0x5d72d8(0x10c))/0xb)+parseInt(_0x5d72d8(0x118))/0xc*(parseInt(_0x5d72d8(0x10a))/0xd);if(_0x133272===_0x5be04a)break;else _0x3f9601['push'](_0x3f9601['shift']());}catch(_0x4a96ab){_0x3f9601['push'](_0x3f9601['shift']());}}}(a206_0x4978,0xbd91f));const a206_0x2a46f4=(function(){let _0x411b67=!![];return function(_0x289868,_0x549991){const _0x2bb681=_0x411b67?function(){const _0x56c064=a206_0x2a20;if(_0x549991){const _0x12e0c0=_0x549991[_0x56c064(0x127)](_0x289868,arguments);return _0x549991=null,_0x12e0c0;}}:function(){};return _0x411b67=![],_0x2bb681;};}()),a206_0x277689=a206_0x2a46f4(this,function(){const _0x1c5759=a206_0x2a20;return a206_0x277689[_0x1c5759(0x147)]()[_0x1c5759(0x135)]('(((.+)+)+)+$')[_0x1c5759(0x147)]()['constructor'](a206_0x277689)[_0x1c5759(0x135)](_0x1c5759(0x141));});a206_0x277689();function a206_0x4978(){const _0x1576c7=['metadata','length','createEmptyBranch','get','3593784JBOJeg','Tokens','BitbucketServerApiService','git','/repos/','post','delete','baseURL','../../../../../core/errors/bad-request.error','isDefault','decorate','__metadata','122509YJWojE','/default-branch','__esModule','apply','903973UgygJX','project','find','apiUrl','../../api/bitbucket-server-api.service','autoInit','../../../internal/git.internal','fromBitbucketServer','../../providers.tokens','2xVEENY','ApiError','Repo','function','search','3718854FNgXSa','apiBody','16tNMXei','getOne','BadRequestError','getAll','defaultBranch','1148935xplwwJ','../../credentials/dto/bitbucket-server-credentials.dto','request','8hVCtKs','(((.+)+)+)+$','displayId','BitbucketServerCredentialsDto','master','/projects/','Service','toString','../../../../shared/utils','joinURL','name','projects/','then','object','/repos','api','../../../../../core/errors/not-found.error','credentials','10UPOUeB','design:paramtypes','slug','65wCBQRH','../repo.class','14858569jFwOVL','66LgYkOy','NotFoundError','map','BitbucketServerRepoService','3421584mCeskt','defaults','values'];a206_0x4978=function(){return _0x1576c7;};return a206_0x4978();}'use strict';var __decorate=this&&this['__decorate']||function(_0x58ecb3,_0x95fffe,_0x2d3283,_0x444317){const _0x2f1c93=a206_0x2a20;var _0x9f1d99=arguments[_0x2f1c93(0x115)],_0x2b8bd0=_0x9f1d99<0x3?_0x95fffe:_0x444317===null?_0x444317=Object['getOwnPropertyDescriptor'](_0x95fffe,_0x2d3283):_0x444317,_0x3c08b6;if(typeof Reflect===_0x2f1c93(0x14d)&&typeof Reflect[_0x2f1c93(0x122)]===_0x2f1c93(0x134))_0x2b8bd0=Reflect[_0x2f1c93(0x122)](_0x58ecb3,_0x95fffe,_0x2d3283,_0x444317);else{for(var _0x169a7e=_0x58ecb3[_0x2f1c93(0x115)]-0x1;_0x169a7e>=0x0;_0x169a7e--)if(_0x3c08b6=_0x58ecb3[_0x169a7e])_0x2b8bd0=(_0x9f1d99<0x3?_0x3c08b6(_0x2b8bd0):_0x9f1d99>0x3?_0x3c08b6(_0x95fffe,_0x2d3283,_0x2b8bd0):_0x3c08b6(_0x95fffe,_0x2d3283))||_0x2b8bd0;}return _0x9f1d99>0x3&&_0x2b8bd0&&Object['defineProperty'](_0x95fffe,_0x2d3283,_0x2b8bd0),_0x2b8bd0;},__metadata=this&&this[a206_0x1aec32(0x123)]||function(_0x38859c,_0x4603cb){const _0x32aa50=a206_0x1aec32;if(typeof Reflect===_0x32aa50(0x14d)&&typeof Reflect[_0x32aa50(0x114)]===_0x32aa50(0x134))return Reflect[_0x32aa50(0x114)](_0x38859c,_0x4603cb);},__param=this&&this['__param']||function(_0x8e5c02,_0x303eba){return function(_0x115037,_0x501c4e){_0x303eba(_0x115037,_0x501c4e,_0x8e5c02);};};Object['defineProperty'](exports,a206_0x1aec32(0x126),{'value':!![]}),exports[a206_0x1aec32(0x110)]=void 0x0;const bad_request_error_1=require(a206_0x1aec32(0x120)),not_found_error_1=require(a206_0x1aec32(0x105)),typedi_1=require('typedi'),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a206_0x1aec32(0x12c)),git_internal_1=require(a206_0x1aec32(0x12e)),utils_1=require(a206_0x1aec32(0x148)),repo_class_1=require(a206_0x1aec32(0x10b)),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a206_0x1aec32(0x130)),bitbucket_server_credentials_dto_1=require(a206_0x1aec32(0x13e));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x3f52e4,_0xbc8338){const _0xff0792=a206_0x1aec32;super(_0x3f52e4),this['api']=_0x3f52e4,this[_0xff0792(0x129)]=_0xbc8338[_0xff0792(0x129)],this['credentials']=_0xbc8338;}async['create'](_0x5b600a){const _0x5a1079=a206_0x1aec32;try{const _0x28d96a={'name':_0x5b600a[_0x5a1079(0x14a)],'scmId':_0x5a1079(0x11b),'defaultBranch':_0x5b600a[_0x5a1079(0x13c)],..._0x5b600a[_0x5a1079(0x137)]||{}},_0x1e2958=await this[_0x5a1079(0x13f)][_0x5a1079(0x11d)](_0x5a1079(0x14b)+this['project']+_0x5a1079(0x14e),_0x28d96a),_0x3a869b=repo_class_1[_0x5a1079(0x133)][_0x5a1079(0x12f)](_0x1e2958,'',this[_0x5a1079(0x14f)],this[_0x5a1079(0x106)]);return _0x5b600a[_0x5a1079(0x12d)]&&await git_internal_1['Git'][_0x5a1079(0x116)](_0x3a869b,_0x5b600a[_0x5a1079(0x13c)]||_0x5a1079(0x144),'',this[_0x5a1079(0x106)]),this[_0x5a1079(0x139)](_0x3a869b[_0x5a1079(0x14a)]);}catch(_0x4eeceb){if(_0x4eeceb instanceof api_error_1[_0x5a1079(0x132)])throw _0x4eeceb;throw new bad_request_error_1[(_0x5a1079(0x13a))](_0x4eeceb);}}async[a206_0x1aec32(0x13b)](){const _0x45d1a6=a206_0x1aec32;try{const _0x4645f1=[];let _0x274c31;do{_0x274c31=await this[_0x45d1a6(0x13f)]['get']('projects/'+this['project']+_0x45d1a6(0x14e),{'params':{'limit':0x64,'start':_0x274c31?_0x274c31['nextPageStart']:0x0}}),_0x4645f1['push'](..._0x274c31[_0x45d1a6(0x113)]);}while(!_0x274c31['isLastPage']);return _0x4645f1[_0x45d1a6(0x10f)](_0x1eef5e=>repo_class_1['Repo']['fromBitbucketServer'](_0x1eef5e,(0x0,utils_1['joinURL'])(this[_0x45d1a6(0x13f)][_0x45d1a6(0x112)][_0x45d1a6(0x11f)]||'',_0x45d1a6(0x145)+this[_0x45d1a6(0x129)]+'/repos/'+_0x1eef5e[_0x45d1a6(0x109)]),this[_0x45d1a6(0x14f)],this['credentials']));}catch(_0x3eddb9){if(_0x3eddb9 instanceof api_error_1[_0x45d1a6(0x132)])throw _0x3eddb9;throw new not_found_error_1[(_0x45d1a6(0x10e))](_0x3eddb9);}}async[a206_0x1aec32(0x139)](_0x5ecdd4){const _0x2a307c=a206_0x1aec32;var _0x14b958;try{const _0x5b5616=await this[_0x2a307c(0x13f)][_0x2a307c(0x117)](_0x2a307c(0x14b)+this[_0x2a307c(0x129)]+_0x2a307c(0x11c)+_0x5ecdd4),_0x46b963=repo_class_1[_0x2a307c(0x133)][_0x2a307c(0x12f)](_0x5b5616,(0x0,utils_1[_0x2a307c(0x149)])(this[_0x2a307c(0x13f)][_0x2a307c(0x112)][_0x2a307c(0x11f)]||'','/projects/'+this[_0x2a307c(0x129)]+_0x2a307c(0x11c)+_0x5ecdd4),this[_0x2a307c(0x14f)],this[_0x2a307c(0x106)]),_0x599ecc=await this[_0x2a307c(0x13f)]['get'](_0x46b963[_0x2a307c(0x12b)]+'/branches')[_0x2a307c(0x14c)](_0x1c4581=>_0x1c4581[_0x2a307c(0x113)]);return _0x46b963[_0x2a307c(0x13c)]=(_0x14b958=_0x599ecc[_0x2a307c(0x12a)](_0x3c44ab=>_0x3c44ab[_0x2a307c(0x121)]===!![]))===null||_0x14b958===void 0x0?void 0x0:_0x14b958[_0x2a307c(0x142)],_0x46b963;}catch(_0xb118c1){if(_0xb118c1 instanceof api_error_1['ApiError'])throw _0xb118c1;throw new not_found_error_1['NotFoundError'](_0xb118c1);}}async['update'](_0x4715a2,_0x67da52){const _0x84761f=a206_0x1aec32;try{const _0x37abe1=await this[_0x84761f(0x13f)]['put'](_0x84761f(0x14b)+this[_0x84761f(0x129)]+'/repos/'+_0x4715a2,_0x67da52),_0x136b9f=await this['request'][_0x84761f(0x117)](_0x84761f(0x14b)+this[_0x84761f(0x129)]+_0x84761f(0x11c)+_0x4715a2+_0x84761f(0x125)),_0x58d11a=repo_class_1[_0x84761f(0x133)]['fromBitbucketServer'](_0x37abe1,(0x0,utils_1[_0x84761f(0x149)])(this['request']['defaults']['baseURL']||'','/projects/'+this[_0x84761f(0x129)]+'/repos/'+_0x4715a2),this[_0x84761f(0x14f)],this[_0x84761f(0x106)]);return _0x58d11a[_0x84761f(0x13c)]=_0x136b9f[_0x84761f(0x142)],_0x58d11a;}catch(_0x4719a8){if(_0x4719a8 instanceof api_error_1[_0x84761f(0x132)])throw _0x4719a8;throw new not_found_error_1[(_0x84761f(0x10e))](_0x4719a8);}}async[a206_0x1aec32(0x11e)](_0x1d76d5){const _0x507173=a206_0x1aec32;try{await this[_0x507173(0x139)](_0x1d76d5),await this[_0x507173(0x13f)][_0x507173(0x11e)](_0x507173(0x14b)+this[_0x507173(0x129)]+'/repos/'+_0x1d76d5);}catch(_0x1b5d69){if(_0x1b5d69 instanceof api_error_1['ApiError'])throw _0x1b5d69;throw new bad_request_error_1[(_0x507173(0x13a))](_0x1b5d69);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a206_0x1aec32(0x146)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a206_0x1aec32(0x119)][a206_0x1aec32(0x106)])),__metadata(a206_0x1aec32(0x108),[bitbucket_server_api_service_1[a206_0x1aec32(0x11a)],bitbucket_server_credentials_dto_1[a206_0x1aec32(0x143)]])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;