const a154_0xb2244e=a154_0x3ee3;function a154_0x3f00(){const _0x197f7a=['1273089PVvXDE','request','post','/repos','getOwnPropertyDescriptor','10cUearV','__metadata','/default-branch','update','Git','fromBitbucketServer','projects/','../repo.class','getOne','BitbucketServerApiService','push','./git-repo.service','25308QNiGYP','get','api','decorate','put','then','ApiError','2408FBZnmF','945213OwBFUb','map','defineProperty','createEmptyBranch','__decorate','values','GitRepoService','nextPageStart','BitbucketServerRepoService','2042828WPQdpg','design:paramtypes','../../credentials/dto/bitbucket-server-credentials.dto','find','baseURL','delete','displayId','metadata','search','BitbucketServerCredentialsDto','301684xStGYN','create','Service','credentials','/branches','typedi','name','../../../../../core/errors/not-found.error','autoInit','Repo','Inject','NotFoundError','4700592LbfBOJ','../../api/bitbucket-server-api.service','(((.+)+)+)+$','defaults','../../../internal/git.internal','joinURL','length','object','__esModule','3666483JkcScP','project','master','/repos/','../../providers.tokens','apiUrl','/projects/','defaultBranch','function','../../../../../core/errors/bad-request.error'];a154_0x3f00=function(){return _0x197f7a;};return a154_0x3f00();}(function(_0x38080a,_0x1d8dab){const _0x12bd9a=a154_0x3ee3,_0x4951d0=_0x38080a();while(!![]){try{const _0x4afce6=-parseInt(_0x12bd9a(0x227))/0x1+parseInt(_0x12bd9a(0x1e5))/0x2+-parseInt(_0x12bd9a(0x20e))/0x3+parseInt(_0x12bd9a(0x1ef))/0x4*(-parseInt(_0x12bd9a(0x213))/0x5)+-parseInt(_0x12bd9a(0x21f))/0x6*(-parseInt(_0x12bd9a(0x226))/0x7)+-parseInt(_0x12bd9a(0x1fb))/0x8+parseInt(_0x12bd9a(0x204))/0x9;if(_0x4afce6===_0x1d8dab)break;else _0x4951d0['push'](_0x4951d0['shift']());}catch(_0x43443d){_0x4951d0['push'](_0x4951d0['shift']());}}}(a154_0x3f00,0xbc6d9));const a154_0x152e11=(function(){let _0x4c6af2=!![];return function(_0x1799f9,_0x20af5){const _0x170c72=_0x4c6af2?function(){if(_0x20af5){const _0x380652=_0x20af5['apply'](_0x1799f9,arguments);return _0x20af5=null,_0x380652;}}:function(){};return _0x4c6af2=![],_0x170c72;};}()),a154_0x53572f=a154_0x152e11(this,function(){const _0x3f3f04=a154_0x3ee3;return a154_0x53572f['toString']()['search'](_0x3f3f04(0x1fd))['toString']()['constructor'](a154_0x53572f)[_0x3f3f04(0x1ed)](_0x3f3f04(0x1fd));});a154_0x53572f();'use strict';var __decorate=this&&this[a154_0xb2244e(0x22b)]||function(_0x1dc810,_0x3b7fd0,_0x1d099f,_0xa94646){const _0x35183f=a154_0xb2244e;var _0x46b095=arguments[_0x35183f(0x201)],_0x43c2cc=_0x46b095<0x3?_0x3b7fd0:_0xa94646===null?_0xa94646=Object[_0x35183f(0x212)](_0x3b7fd0,_0x1d099f):_0xa94646,_0x36a952;if(typeof Reflect===_0x35183f(0x202)&&typeof Reflect[_0x35183f(0x222)]===_0x35183f(0x20c))_0x43c2cc=Reflect[_0x35183f(0x222)](_0x1dc810,_0x3b7fd0,_0x1d099f,_0xa94646);else{for(var _0x269595=_0x1dc810[_0x35183f(0x201)]-0x1;_0x269595>=0x0;_0x269595--)if(_0x36a952=_0x1dc810[_0x269595])_0x43c2cc=(_0x46b095<0x3?_0x36a952(_0x43c2cc):_0x46b095>0x3?_0x36a952(_0x3b7fd0,_0x1d099f,_0x43c2cc):_0x36a952(_0x3b7fd0,_0x1d099f))||_0x43c2cc;}return _0x46b095>0x3&&_0x43c2cc&&Object[_0x35183f(0x229)](_0x3b7fd0,_0x1d099f,_0x43c2cc),_0x43c2cc;},__metadata=this&&this[a154_0xb2244e(0x214)]||function(_0x22a36b,_0x519beb){const _0x1bbe70=a154_0xb2244e;if(typeof Reflect===_0x1bbe70(0x202)&&typeof Reflect[_0x1bbe70(0x1ec)]===_0x1bbe70(0x20c))return Reflect[_0x1bbe70(0x1ec)](_0x22a36b,_0x519beb);},__param=this&&this['__param']||function(_0x550c55,_0x114aa5){return function(_0x3b95b8,_0x1830e9){_0x114aa5(_0x3b95b8,_0x1830e9,_0x550c55);};};Object[a154_0xb2244e(0x229)](exports,a154_0xb2244e(0x203),{'value':!![]}),exports[a154_0xb2244e(0x1e4)]=void 0x0;const bad_request_error_1=require(a154_0xb2244e(0x20d)),not_found_error_1=require(a154_0xb2244e(0x1f6)),typedi_1=require(a154_0xb2244e(0x1f4)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a154_0xb2244e(0x1fc)),git_internal_1=require(a154_0xb2244e(0x1ff)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a154_0xb2244e(0x21a)),git_repo_service_1=require(a154_0xb2244e(0x21e)),providers_tokens_1=require(a154_0xb2244e(0x208)),bitbucket_server_credentials_dto_1=require(a154_0xb2244e(0x1e7));function a154_0x3ee3(_0x585e45,_0x138c61){const _0x4dcb77=a154_0x3f00();return a154_0x3ee3=function(_0x53572f,_0x152e11){_0x53572f=_0x53572f-0x1e3;let _0x3f0040=_0x4dcb77[_0x53572f];return _0x3f0040;},a154_0x3ee3(_0x585e45,_0x138c61);}let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a154_0xb2244e(0x22d)]{constructor(_0x1653ab,_0x2a9556){const _0x27ded6=a154_0xb2244e;super(_0x1653ab),this[_0x27ded6(0x221)]=_0x1653ab,this[_0x27ded6(0x205)]=_0x2a9556[_0x27ded6(0x205)],this[_0x27ded6(0x1f2)]=_0x2a9556;}async[a154_0xb2244e(0x1f0)](_0x58ac75){const _0x25fc1a=a154_0xb2244e;try{const _0x5b62a6={'name':_0x58ac75[_0x25fc1a(0x1f5)],'scmId':'git','defaultBranch':_0x58ac75[_0x25fc1a(0x20b)],..._0x58ac75['apiBody']||{}},_0x5a52e2=await this[_0x25fc1a(0x20f)][_0x25fc1a(0x210)](_0x25fc1a(0x219)+this[_0x25fc1a(0x205)]+_0x25fc1a(0x211),_0x5b62a6),_0x31f203=repo_class_1[_0x25fc1a(0x1f8)][_0x25fc1a(0x218)](_0x5a52e2,'',this[_0x25fc1a(0x221)],this['credentials']);return _0x58ac75[_0x25fc1a(0x1f7)]&&await git_internal_1[_0x25fc1a(0x217)][_0x25fc1a(0x22a)](_0x31f203,_0x58ac75[_0x25fc1a(0x20b)]||_0x25fc1a(0x206),'',this[_0x25fc1a(0x1f2)]),this[_0x25fc1a(0x21b)](_0x31f203[_0x25fc1a(0x1f5)]);}catch(_0x29e1ea){if(_0x29e1ea instanceof api_error_1[_0x25fc1a(0x225)])throw _0x29e1ea;throw new bad_request_error_1['BadRequestError'](_0x29e1ea);}}async['getAll'](){const _0x19c62c=a154_0xb2244e;try{const _0x28b38e=[];let _0x249f0e;do{_0x249f0e=await this[_0x19c62c(0x20f)]['get'](_0x19c62c(0x219)+this[_0x19c62c(0x205)]+'/repos',{'params':{'limit':0x64,'start':_0x249f0e?_0x249f0e[_0x19c62c(0x1e3)]:0x0}}),_0x28b38e[_0x19c62c(0x21d)](..._0x249f0e[_0x19c62c(0x22c)]);}while(!_0x249f0e['isLastPage']);return _0x28b38e[_0x19c62c(0x228)](_0x52ccf6=>repo_class_1['Repo'][_0x19c62c(0x218)](_0x52ccf6,utils_1[_0x19c62c(0x200)](this[_0x19c62c(0x20f)][_0x19c62c(0x1fe)]['baseURL']||'','/projects/'+this['project']+_0x19c62c(0x207)+_0x52ccf6['slug']),this[_0x19c62c(0x221)],this['credentials']));}catch(_0x8e3a36){if(_0x8e3a36 instanceof api_error_1[_0x19c62c(0x225)])throw _0x8e3a36;throw new not_found_error_1[(_0x19c62c(0x1fa))](_0x8e3a36);}}async['getOne'](_0x57f0f5){const _0x3547a3=a154_0xb2244e;var _0x4ef8d4;try{const _0x1cb05a=await this[_0x3547a3(0x20f)][_0x3547a3(0x220)](_0x3547a3(0x219)+this[_0x3547a3(0x205)]+_0x3547a3(0x207)+_0x57f0f5),_0x576f6b=repo_class_1['Repo'][_0x3547a3(0x218)](_0x1cb05a,utils_1[_0x3547a3(0x200)](this[_0x3547a3(0x20f)][_0x3547a3(0x1fe)][_0x3547a3(0x1e9)]||'','/projects/'+this['project']+_0x3547a3(0x207)+_0x57f0f5),this['api'],this[_0x3547a3(0x1f2)]),_0x434f60=await this['request']['get'](_0x576f6b[_0x3547a3(0x209)]+_0x3547a3(0x1f3))[_0x3547a3(0x224)](_0x2267fb=>_0x2267fb[_0x3547a3(0x22c)]);return _0x576f6b[_0x3547a3(0x20b)]=(_0x4ef8d4=_0x434f60[_0x3547a3(0x1e8)](_0x8886e7=>_0x8886e7['isDefault']===!![]))===null||_0x4ef8d4===void 0x0?void 0x0:_0x4ef8d4[_0x3547a3(0x1eb)],_0x576f6b;}catch(_0x16759c){if(_0x16759c instanceof api_error_1[_0x3547a3(0x225)])throw _0x16759c;throw new not_found_error_1['NotFoundError'](_0x16759c);}}async[a154_0xb2244e(0x216)](_0x2a923a,_0x4c50ae){const _0x3f8f3e=a154_0xb2244e;try{const _0x13af7c=await this['request'][_0x3f8f3e(0x223)](_0x3f8f3e(0x219)+this[_0x3f8f3e(0x205)]+_0x3f8f3e(0x207)+_0x2a923a,_0x4c50ae),_0x1d8239=await this['request'][_0x3f8f3e(0x220)](_0x3f8f3e(0x219)+this[_0x3f8f3e(0x205)]+'/repos/'+_0x2a923a+_0x3f8f3e(0x215)),_0x305891=repo_class_1[_0x3f8f3e(0x1f8)][_0x3f8f3e(0x218)](_0x13af7c,utils_1[_0x3f8f3e(0x200)](this[_0x3f8f3e(0x20f)]['defaults']['baseURL']||'',_0x3f8f3e(0x20a)+this[_0x3f8f3e(0x205)]+_0x3f8f3e(0x207)+_0x2a923a),this[_0x3f8f3e(0x221)],this['credentials']);return _0x305891['defaultBranch']=_0x1d8239[_0x3f8f3e(0x1eb)],_0x305891;}catch(_0x33c8cd){if(_0x33c8cd instanceof api_error_1[_0x3f8f3e(0x225)])throw _0x33c8cd;throw new not_found_error_1[(_0x3f8f3e(0x1fa))](_0x33c8cd);}}async[a154_0xb2244e(0x1ea)](_0x20e804){const _0x4e7d16=a154_0xb2244e;try{await this[_0x4e7d16(0x21b)](_0x20e804),await this[_0x4e7d16(0x20f)][_0x4e7d16(0x1ea)](_0x4e7d16(0x219)+this['project']+'/repos/'+_0x20e804);}catch(_0x4380b0){if(_0x4380b0 instanceof api_error_1[_0x4e7d16(0x225)])throw _0x4380b0;throw new bad_request_error_1['BadRequestError'](_0x4380b0);}}};BitbucketServerRepoService=__decorate([typedi_1[a154_0xb2244e(0x1f1)](),__param(0x1,typedi_1[a154_0xb2244e(0x1f9)](providers_tokens_1['Tokens'][a154_0xb2244e(0x1f2)])),__metadata(a154_0xb2244e(0x1e6),[bitbucket_server_api_service_1[a154_0xb2244e(0x21c)],bitbucket_server_credentials_dto_1[a154_0xb2244e(0x1ee)]])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;