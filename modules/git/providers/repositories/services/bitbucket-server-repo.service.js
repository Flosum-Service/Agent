const a167_0x4eece3=a167_0x19ce;(function(_0x29e283,_0x55edfe){const _0x145707=a167_0x19ce,_0x1f6207=_0x29e283();while(!![]){try{const _0x368dad=-parseInt(_0x145707(0x140))/0x1+parseInt(_0x145707(0x121))/0x2*(-parseInt(_0x145707(0x128))/0x3)+-parseInt(_0x145707(0x146))/0x4*(parseInt(_0x145707(0x133))/0x5)+-parseInt(_0x145707(0x11a))/0x6*(-parseInt(_0x145707(0x12e))/0x7)+-parseInt(_0x145707(0x102))/0x8+parseInt(_0x145707(0x148))/0x9+parseInt(_0x145707(0x11f))/0xa*(parseInt(_0x145707(0x10a))/0xb);if(_0x368dad===_0x55edfe)break;else _0x1f6207['push'](_0x1f6207['shift']());}catch(_0x4851f8){_0x1f6207['push'](_0x1f6207['shift']());}}}(a167_0x5f5a,0x40b42));const a167_0x409e5f=(function(){let _0x4cb586=!![];return function(_0x55cd04,_0xba6d97){const _0x433f9e=_0x4cb586?function(){const _0x8a9353=a167_0x19ce;if(_0xba6d97){const _0xb061bf=_0xba6d97[_0x8a9353(0xfe)](_0x55cd04,arguments);return _0xba6d97=null,_0xb061bf;}}:function(){};return _0x4cb586=![],_0x433f9e;};}()),a167_0x5775e2=a167_0x409e5f(this,function(){const _0x3561d1=a167_0x19ce;return a167_0x5775e2[_0x3561d1(0x12b)]()['search']('(((.+)+)+)+$')[_0x3561d1(0x12b)]()['constructor'](a167_0x5775e2)[_0x3561d1(0x105)](_0x3561d1(0x10c));});function a167_0x5f5a(){const _0x30dfa7=['1793745SIMUaf','__decorate','Inject','credentials','find','delete','apply','/projects/','/branches','../../api/bitbucket-server-api.service','2940376WpYxus','api','apiUrl','search','isDefault','values','autoInit','NotFoundError','33PGIodf','./git-repo.service','(((.+)+)+)+$','BadRequestError','request','../repo.class','object','/default-branch','BitbucketServerCredentialsDto','slug','__metadata','metadata','GitRepoService','joinURL','defaultBranch','create','414GrRDfX','length','Git','decorate','/repos/','3274370WYUdRa','isLastPage','30jCwxED','Tokens','Service','get','projects/','fromBitbucketServer','displayId','68625DtZkea','typedi','project','toString','BitbucketServerRepoService','Repo','41384UlWLHG','createEmptyBranch','map','apiBody','__esModule','15OGIwYv','defineProperty','git','BitbucketServerApiService','master','getAll','defaults','function','../../../../../core/errors/bad-request.error','../../../../../core/errors/api.error','../../providers.tokens','../../../internal/git.internal','name','368395NUnyHe','../../credentials/dto/bitbucket-server-credentials.dto','baseURL','getOne','/repos','design:paramtypes','327268pXtxWG','ApiError'];a167_0x5f5a=function(){return _0x30dfa7;};return a167_0x5f5a();}function a167_0x19ce(_0x5ee759,_0x118659){const _0xfac8dc=a167_0x5f5a();return a167_0x19ce=function(_0x5775e2,_0x409e5f){_0x5775e2=_0x5775e2-0xfc;let _0x5f5a9d=_0xfac8dc[_0x5775e2];return _0x5f5a9d;},a167_0x19ce(_0x5ee759,_0x118659);}a167_0x5775e2();'use strict';var __decorate=this&&this[a167_0x4eece3(0x149)]||function(_0x9212f6,_0x1b5c65,_0x142485,_0x51b17a){const _0x40f643=a167_0x4eece3;var _0x507f86=arguments[_0x40f643(0x11b)],_0x323544=_0x507f86<0x3?_0x1b5c65:_0x51b17a===null?_0x51b17a=Object['getOwnPropertyDescriptor'](_0x1b5c65,_0x142485):_0x51b17a,_0x363c35;if(typeof Reflect===_0x40f643(0x110)&&typeof Reflect[_0x40f643(0x11d)]===_0x40f643(0x13a))_0x323544=Reflect[_0x40f643(0x11d)](_0x9212f6,_0x1b5c65,_0x142485,_0x51b17a);else{for(var _0x4bc334=_0x9212f6[_0x40f643(0x11b)]-0x1;_0x4bc334>=0x0;_0x4bc334--)if(_0x363c35=_0x9212f6[_0x4bc334])_0x323544=(_0x507f86<0x3?_0x363c35(_0x323544):_0x507f86>0x3?_0x363c35(_0x1b5c65,_0x142485,_0x323544):_0x363c35(_0x1b5c65,_0x142485))||_0x323544;}return _0x507f86>0x3&&_0x323544&&Object[_0x40f643(0x134)](_0x1b5c65,_0x142485,_0x323544),_0x323544;},__metadata=this&&this[a167_0x4eece3(0x114)]||function(_0x16fca4,_0x2ef6ae){const _0x33b322=a167_0x4eece3;if(typeof Reflect===_0x33b322(0x110)&&typeof Reflect[_0x33b322(0x115)]===_0x33b322(0x13a))return Reflect[_0x33b322(0x115)](_0x16fca4,_0x2ef6ae);},__param=this&&this['__param']||function(_0x475692,_0x4ab309){return function(_0x5459cb,_0x1ea295){_0x4ab309(_0x5459cb,_0x1ea295,_0x475692);};};Object[a167_0x4eece3(0x134)](exports,a167_0x4eece3(0x132),{'value':!![]}),exports[a167_0x4eece3(0x12c)]=void 0x0;const bad_request_error_1=require(a167_0x4eece3(0x13b)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a167_0x4eece3(0x129)),api_error_1=require(a167_0x4eece3(0x13c)),bitbucket_server_api_service_1=require(a167_0x4eece3(0x101)),git_internal_1=require(a167_0x4eece3(0x13e)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a167_0x4eece3(0x10f)),git_repo_service_1=require(a167_0x4eece3(0x10b)),providers_tokens_1=require(a167_0x4eece3(0x13d)),bitbucket_server_credentials_dto_1=require(a167_0x4eece3(0x141));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a167_0x4eece3(0x116)]{constructor(_0x1e022a,_0x2778d3){const _0x14639c=a167_0x4eece3;super(_0x1e022a),this[_0x14639c(0x103)]=_0x1e022a,this[_0x14639c(0x12a)]=_0x2778d3['project'],this['credentials']=_0x2778d3;}async[a167_0x4eece3(0x119)](_0x983f76){const _0x1489f5=a167_0x4eece3;try{const _0x3f3821={'name':_0x983f76[_0x1489f5(0x13f)],'scmId':_0x1489f5(0x135),'defaultBranch':_0x983f76[_0x1489f5(0x118)],..._0x983f76[_0x1489f5(0x131)]||{}},_0x333e33=await this['request']['post'](_0x1489f5(0x125)+this[_0x1489f5(0x12a)]+_0x1489f5(0x144),_0x3f3821),_0x3bf8c1=repo_class_1[_0x1489f5(0x12d)][_0x1489f5(0x126)](_0x333e33,'',this[_0x1489f5(0x103)],this[_0x1489f5(0x14b)]);return _0x983f76[_0x1489f5(0x108)]&&await git_internal_1[_0x1489f5(0x11c)][_0x1489f5(0x12f)](_0x3bf8c1,_0x983f76['defaultBranch']||_0x1489f5(0x137),'',this[_0x1489f5(0x14b)]),this[_0x1489f5(0x143)](_0x3bf8c1[_0x1489f5(0x13f)]);}catch(_0x20a98f){if(_0x20a98f instanceof api_error_1[_0x1489f5(0x147)])throw _0x20a98f;throw new bad_request_error_1[(_0x1489f5(0x10d))](_0x20a98f);}}async[a167_0x4eece3(0x138)](){const _0x398031=a167_0x4eece3;try{const _0x20bc6f=[];let _0x500361;do{_0x500361=await this[_0x398031(0x10e)]['get'](_0x398031(0x125)+this[_0x398031(0x12a)]+'/repos',{'params':{'limit':0x64,'start':_0x500361?_0x500361['nextPageStart']:0x0}}),_0x20bc6f['push'](..._0x500361[_0x398031(0x107)]);}while(!_0x500361[_0x398031(0x120)]);return _0x20bc6f[_0x398031(0x130)](_0x53953a=>repo_class_1[_0x398031(0x12d)][_0x398031(0x126)](_0x53953a,(0x0,utils_1[_0x398031(0x117)])(this['request'][_0x398031(0x139)][_0x398031(0x142)]||'','/projects/'+this[_0x398031(0x12a)]+_0x398031(0x11e)+_0x53953a[_0x398031(0x113)]),this[_0x398031(0x103)],this[_0x398031(0x14b)]));}catch(_0x356644){if(_0x356644 instanceof api_error_1[_0x398031(0x147)])throw _0x356644;throw new not_found_error_1[(_0x398031(0x109))](_0x356644);}}async[a167_0x4eece3(0x143)](_0x283627){const _0x4a413f=a167_0x4eece3;var _0x16679e;try{const _0x4f8a7c=await this[_0x4a413f(0x10e)]['get']('projects/'+this[_0x4a413f(0x12a)]+_0x4a413f(0x11e)+_0x283627),_0x3bd921=repo_class_1['Repo'][_0x4a413f(0x126)](_0x4f8a7c,(0x0,utils_1['joinURL'])(this[_0x4a413f(0x10e)][_0x4a413f(0x139)][_0x4a413f(0x142)]||'',_0x4a413f(0xff)+this[_0x4a413f(0x12a)]+_0x4a413f(0x11e)+_0x283627),this[_0x4a413f(0x103)],this[_0x4a413f(0x14b)]),_0x498f57=await this[_0x4a413f(0x10e)][_0x4a413f(0x124)](_0x3bd921[_0x4a413f(0x104)]+_0x4a413f(0x100))['then'](_0x57b7c9=>_0x57b7c9['values']);return _0x3bd921[_0x4a413f(0x118)]=(_0x16679e=_0x498f57[_0x4a413f(0xfc)](_0x4e4683=>_0x4e4683[_0x4a413f(0x106)]===!![]))===null||_0x16679e===void 0x0?void 0x0:_0x16679e[_0x4a413f(0x127)],_0x3bd921;}catch(_0x1ddb92){if(_0x1ddb92 instanceof api_error_1['ApiError'])throw _0x1ddb92;throw new not_found_error_1['NotFoundError'](_0x1ddb92);}}async['update'](_0x1dd56b,_0x37aa13){const _0x27efc2=a167_0x4eece3;try{const _0x58cdcc=await this[_0x27efc2(0x10e)]['put']('projects/'+this['project']+_0x27efc2(0x11e)+_0x1dd56b,_0x37aa13),_0x9a304e=await this[_0x27efc2(0x10e)]['get'](_0x27efc2(0x125)+this[_0x27efc2(0x12a)]+_0x27efc2(0x11e)+_0x1dd56b+_0x27efc2(0x111)),_0x563d87=repo_class_1[_0x27efc2(0x12d)][_0x27efc2(0x126)](_0x58cdcc,(0x0,utils_1['joinURL'])(this[_0x27efc2(0x10e)][_0x27efc2(0x139)][_0x27efc2(0x142)]||'',_0x27efc2(0xff)+this[_0x27efc2(0x12a)]+_0x27efc2(0x11e)+_0x1dd56b),this[_0x27efc2(0x103)],this[_0x27efc2(0x14b)]);return _0x563d87[_0x27efc2(0x118)]=_0x9a304e[_0x27efc2(0x127)],_0x563d87;}catch(_0x37d5f1){if(_0x37d5f1 instanceof api_error_1[_0x27efc2(0x147)])throw _0x37d5f1;throw new not_found_error_1[(_0x27efc2(0x109))](_0x37d5f1);}}async['delete'](_0x1f60b4){const _0x55ab22=a167_0x4eece3;try{await this[_0x55ab22(0x143)](_0x1f60b4),await this[_0x55ab22(0x10e)][_0x55ab22(0xfd)](_0x55ab22(0x125)+this[_0x55ab22(0x12a)]+_0x55ab22(0x11e)+_0x1f60b4);}catch(_0x173488){if(_0x173488 instanceof api_error_1[_0x55ab22(0x147)])throw _0x173488;throw new bad_request_error_1[(_0x55ab22(0x10d))](_0x173488);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a167_0x4eece3(0x123)])(),__param(0x1,(0x0,typedi_1[a167_0x4eece3(0x14a)])(providers_tokens_1[a167_0x4eece3(0x122)]['credentials'])),__metadata(a167_0x4eece3(0x145),[bitbucket_server_api_service_1[a167_0x4eece3(0x136)],bitbucket_server_credentials_dto_1[a167_0x4eece3(0x112)]])],BitbucketServerRepoService),exports[a167_0x4eece3(0x12c)]=BitbucketServerRepoService;