const a238_0x32e103=a238_0x5c90;function a238_0x5c90(_0x1d68c9,_0xde1583){const _0x3a0ce1=a238_0x4627();return a238_0x5c90=function(_0x9b3312,_0x556ce4){_0x9b3312=_0x9b3312-0x73;let _0x4627d4=_0x3a0ce1[_0x9b3312];return _0x4627d4;},a238_0x5c90(_0x1d68c9,_0xde1583);}(function(_0x2aa780,_0xab4875){const _0x3ec898=a238_0x5c90,_0x153def=_0x2aa780();while(!![]){try{const _0x587214=parseInt(_0x3ec898(0x91))/0x1*(parseInt(_0x3ec898(0xaa))/0x2)+-parseInt(_0x3ec898(0x82))/0x3*(parseInt(_0x3ec898(0x86))/0x4)+parseInt(_0x3ec898(0x9d))/0x5+parseInt(_0x3ec898(0x8b))/0x6+-parseInt(_0x3ec898(0x76))/0x7+-parseInt(_0x3ec898(0x9b))/0x8*(parseInt(_0x3ec898(0x87))/0x9)+parseInt(_0x3ec898(0x73))/0xa*(parseInt(_0x3ec898(0x8d))/0xb);if(_0x587214===_0xab4875)break;else _0x153def['push'](_0x153def['shift']());}catch(_0x5a6670){_0x153def['push'](_0x153def['shift']());}}}(a238_0x4627,0xe77eb));const a238_0x556ce4=(function(){let _0x38b861=!![];return function(_0x38532d,_0x5b6523){const _0x208a82=_0x38b861?function(){const _0x49c3da=a238_0x5c90;if(_0x5b6523){const _0xf63550=_0x5b6523[_0x49c3da(0xa3)](_0x38532d,arguments);return _0x5b6523=null,_0xf63550;}}:function(){};return _0x38b861=![],_0x208a82;};}()),a238_0x9b3312=a238_0x556ce4(this,function(){const _0x3e42ac=a238_0x5c90;return a238_0x9b3312[_0x3e42ac(0xa4)]()[_0x3e42ac(0xb4)]('(((.+)+)+)+$')[_0x3e42ac(0xa4)]()[_0x3e42ac(0x74)](a238_0x9b3312)[_0x3e42ac(0xb4)](_0x3e42ac(0xa5));});a238_0x9b3312();'use strict';var __decorate=this&&this['__decorate']||function(_0x62910b,_0x530d76,_0x3807ba,_0x48196e){const _0x1446b0=a238_0x5c90;var _0x427058=arguments[_0x1446b0(0x83)],_0x1ccaf7=_0x427058<0x3?_0x530d76:_0x48196e===null?_0x48196e=Object[_0x1446b0(0x96)](_0x530d76,_0x3807ba):_0x48196e,_0x2367ae;if(typeof Reflect===_0x1446b0(0x89)&&typeof Reflect['decorate']===_0x1446b0(0xaf))_0x1ccaf7=Reflect['decorate'](_0x62910b,_0x530d76,_0x3807ba,_0x48196e);else{for(var _0x507d87=_0x62910b[_0x1446b0(0x83)]-0x1;_0x507d87>=0x0;_0x507d87--)if(_0x2367ae=_0x62910b[_0x507d87])_0x1ccaf7=(_0x427058<0x3?_0x2367ae(_0x1ccaf7):_0x427058>0x3?_0x2367ae(_0x530d76,_0x3807ba,_0x1ccaf7):_0x2367ae(_0x530d76,_0x3807ba))||_0x1ccaf7;}return _0x427058>0x3&&_0x1ccaf7&&Object['defineProperty'](_0x530d76,_0x3807ba,_0x1ccaf7),_0x1ccaf7;},__metadata=this&&this['__metadata']||function(_0x2fa1d0,_0x53c73e){const _0x14686c=a238_0x5c90;if(typeof Reflect===_0x14686c(0x89)&&typeof Reflect[_0x14686c(0xa6)]===_0x14686c(0xaf))return Reflect[_0x14686c(0xa6)](_0x2fa1d0,_0x53c73e);},__param=this&&this[a238_0x32e103(0xa9)]||function(_0x2da9b1,_0x4150b2){return function(_0x29e63e,_0x256836){_0x4150b2(_0x29e63e,_0x256836,_0x2da9b1);};};Object['defineProperty'](exports,a238_0x32e103(0x7a),{'value':!![]}),exports[a238_0x32e103(0xb3)]=void 0x0;function a238_0x4627(){const _0x16d25a=['getOne','fromBitbucketServer','./git-repo.service','32537ycrvap','delete','projects/','getAll','../../providers.tokens','getOwnPropertyDescriptor','project','createEmptyBranch','baseURL','autoInit','684288Eawusx','ApiError','7916630UbsWUs','apiBody','values','joinURL','get','/branches','apply','toString','(((.+)+)+)+$','metadata','displayId','../../../../shared/utils','__param','6STSUKk','Repo','isLastPage','../repo.class','git','function','defaults','update','name','BitbucketServerRepoService','search','NotFoundError','BitbucketServerApiService','slug','/projects/','typedi','/repos/','../../../../../core/errors/not-found.error','4465280yHaHAC','constructor','push','1581468HPiaKY','defaultBranch','request','BadRequestError','__esModule','create','api','map','apiUrl','isDefault','put','design:paramtypes','6eMnaQC','length','Git','credentials','1760448UHPhfP','171hNArox','Service','object','/repos','9312420WZWJNA','post','11HXpmUO'];a238_0x4627=function(){return _0x16d25a;};return a238_0x4627();}const bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a238_0x32e103(0xbb)),typedi_1=require(a238_0x32e103(0xb9)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require('../../api/bitbucket-server-api.service'),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a238_0x32e103(0xa8)),repo_class_1=require(a238_0x32e103(0xad)),git_repo_service_1=require(a238_0x32e103(0x90)),providers_tokens_1=require(a238_0x32e103(0x95)),bitbucket_server_credentials_dto_1=require('../../credentials/dto/bitbucket-server-credentials.dto');let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x357fe4,_0x5d4798){const _0x2e1899=a238_0x32e103;super(_0x357fe4),this[_0x2e1899(0x7c)]=_0x357fe4,this[_0x2e1899(0x97)]=_0x5d4798[_0x2e1899(0x97)],this[_0x2e1899(0x85)]=_0x5d4798;}async[a238_0x32e103(0x7b)](_0xe6d706){const _0x3187d3=a238_0x32e103;try{const _0x411418={'name':_0xe6d706[_0x3187d3(0xb2)],'scmId':_0x3187d3(0xae),'defaultBranch':_0xe6d706[_0x3187d3(0x77)],..._0xe6d706[_0x3187d3(0x9e)]||{}},_0x75190e=await this[_0x3187d3(0x78)][_0x3187d3(0x8c)](_0x3187d3(0x93)+this[_0x3187d3(0x97)]+'/repos',_0x411418),_0x4ec1dd=repo_class_1['Repo']['fromBitbucketServer'](_0x75190e,'',this['api'],this[_0x3187d3(0x85)]);return _0xe6d706[_0x3187d3(0x9a)]&&await git_internal_1[_0x3187d3(0x84)][_0x3187d3(0x98)](_0x4ec1dd,_0xe6d706[_0x3187d3(0x77)]||'master','',this[_0x3187d3(0x85)]),this['getOne'](_0x4ec1dd['name']);}catch(_0x1526f7){if(_0x1526f7 instanceof api_error_1[_0x3187d3(0x9c)])throw _0x1526f7;throw new bad_request_error_1[(_0x3187d3(0x79))](_0x1526f7);}}async[a238_0x32e103(0x94)](){const _0x2ebf11=a238_0x32e103;try{const _0xad3e37=[];let _0xf22902;do{_0xf22902=await this['request'][_0x2ebf11(0xa1)](_0x2ebf11(0x93)+this['project']+_0x2ebf11(0x8a),{'params':{'limit':0x64,'start':_0xf22902?_0xf22902['nextPageStart']:0x0}}),_0xad3e37[_0x2ebf11(0x75)](..._0xf22902[_0x2ebf11(0x9f)]);}while(!_0xf22902[_0x2ebf11(0xac)]);return _0xad3e37[_0x2ebf11(0x7d)](_0x4facad=>repo_class_1[_0x2ebf11(0xab)][_0x2ebf11(0x8f)](_0x4facad,(0x0,utils_1[_0x2ebf11(0xa0)])(this[_0x2ebf11(0x78)][_0x2ebf11(0xb0)][_0x2ebf11(0x99)]||'',_0x2ebf11(0xb8)+this[_0x2ebf11(0x97)]+_0x2ebf11(0xba)+_0x4facad[_0x2ebf11(0xb7)]),this[_0x2ebf11(0x7c)],this['credentials']));}catch(_0x56cc2c){if(_0x56cc2c instanceof api_error_1[_0x2ebf11(0x9c)])throw _0x56cc2c;throw new not_found_error_1[(_0x2ebf11(0xb5))](_0x56cc2c);}}async[a238_0x32e103(0x8e)](_0x57ba5c){const _0x27aee1=a238_0x32e103;var _0x9bb562;try{const _0x1042c7=await this[_0x27aee1(0x78)]['get'](_0x27aee1(0x93)+this[_0x27aee1(0x97)]+_0x27aee1(0xba)+_0x57ba5c),_0x534c5d=repo_class_1[_0x27aee1(0xab)][_0x27aee1(0x8f)](_0x1042c7,(0x0,utils_1['joinURL'])(this[_0x27aee1(0x78)][_0x27aee1(0xb0)][_0x27aee1(0x99)]||'',_0x27aee1(0xb8)+this[_0x27aee1(0x97)]+_0x27aee1(0xba)+_0x57ba5c),this[_0x27aee1(0x7c)],this[_0x27aee1(0x85)]),_0x3b1e42=await this['request']['get'](_0x534c5d[_0x27aee1(0x7e)]+_0x27aee1(0xa2))['then'](_0x18809b=>_0x18809b[_0x27aee1(0x9f)]);return _0x534c5d[_0x27aee1(0x77)]=(_0x9bb562=_0x3b1e42['find'](_0x116c5=>_0x116c5[_0x27aee1(0x7f)]===!![]))===null||_0x9bb562===void 0x0?void 0x0:_0x9bb562['displayId'],_0x534c5d;}catch(_0x389e82){if(_0x389e82 instanceof api_error_1[_0x27aee1(0x9c)])throw _0x389e82;throw new not_found_error_1[(_0x27aee1(0xb5))](_0x389e82);}}async[a238_0x32e103(0xb1)](_0x887830,_0x499d43){const _0x40d096=a238_0x32e103;try{const _0x197d91=await this[_0x40d096(0x78)][_0x40d096(0x80)](_0x40d096(0x93)+this[_0x40d096(0x97)]+_0x40d096(0xba)+_0x887830,_0x499d43),_0x3da477=await this['request'][_0x40d096(0xa1)]('projects/'+this['project']+_0x40d096(0xba)+_0x887830+'/default-branch'),_0x16832b=repo_class_1['Repo'][_0x40d096(0x8f)](_0x197d91,(0x0,utils_1[_0x40d096(0xa0)])(this[_0x40d096(0x78)][_0x40d096(0xb0)][_0x40d096(0x99)]||'','/projects/'+this[_0x40d096(0x97)]+_0x40d096(0xba)+_0x887830),this[_0x40d096(0x7c)],this['credentials']);return _0x16832b['defaultBranch']=_0x3da477[_0x40d096(0xa7)],_0x16832b;}catch(_0x3ded1f){if(_0x3ded1f instanceof api_error_1[_0x40d096(0x9c)])throw _0x3ded1f;throw new not_found_error_1[(_0x40d096(0xb5))](_0x3ded1f);}}async[a238_0x32e103(0x92)](_0x18fb53){const _0x106885=a238_0x32e103;try{await this[_0x106885(0x8e)](_0x18fb53),await this[_0x106885(0x78)][_0x106885(0x92)](_0x106885(0x93)+this[_0x106885(0x97)]+'/repos/'+_0x18fb53);}catch(_0x508b4d){if(_0x508b4d instanceof api_error_1[_0x106885(0x9c)])throw _0x508b4d;throw new bad_request_error_1['BadRequestError'](_0x508b4d);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a238_0x32e103(0x88)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1['Tokens']['credentials'])),__metadata(a238_0x32e103(0x81),[bitbucket_server_api_service_1[a238_0x32e103(0xb6)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;