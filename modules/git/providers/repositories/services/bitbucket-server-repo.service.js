const a238_0x4024e3=a238_0x5489;(function(_0x61b60b,_0x291b35){const _0x55c30d=a238_0x5489,_0x23fbd5=_0x61b60b();while(!![]){try{const _0x422299=parseInt(_0x55c30d(0x13e))/0x1+-parseInt(_0x55c30d(0x142))/0x2*(-parseInt(_0x55c30d(0x145))/0x3)+parseInt(_0x55c30d(0x129))/0x4*(-parseInt(_0x55c30d(0x15e))/0x5)+-parseInt(_0x55c30d(0x131))/0x6+parseInt(_0x55c30d(0x156))/0x7+-parseInt(_0x55c30d(0x12e))/0x8*(parseInt(_0x55c30d(0x163))/0x9)+parseInt(_0x55c30d(0x16d))/0xa;if(_0x422299===_0x291b35)break;else _0x23fbd5['push'](_0x23fbd5['shift']());}catch(_0x19bb85){_0x23fbd5['push'](_0x23fbd5['shift']());}}}(a238_0x27fa,0x8ddc7));const a238_0x2ca4d5=(function(){let _0x247088=!![];return function(_0x30e695,_0x98198c){const _0x462451=_0x247088?function(){if(_0x98198c){const _0x562fd3=_0x98198c['apply'](_0x30e695,arguments);return _0x98198c=null,_0x562fd3;}}:function(){};return _0x247088=![],_0x462451;};}()),a238_0x5248ee=a238_0x2ca4d5(this,function(){const _0xe49951=a238_0x5489;return a238_0x5248ee[_0xe49951(0x14c)]()[_0xe49951(0x13b)](_0xe49951(0x13f))[_0xe49951(0x14c)]()['constructor'](a238_0x5248ee)[_0xe49951(0x13b)]('(((.+)+)+)+$');});function a238_0x27fa(){const _0x3a3f53=['then','request','../../api/bitbucket-server-api.service','712xtoceq','joinURL','BitbucketServerApiService','5189850fkHOqh','project','./git-repo.service','get','isDefault','NotFoundError','fromBitbucketServer','/default-branch','getOne','__param','search','nextPageStart','/branches','42803kUgOuC','(((.+)+)+)+$','__decorate','/repos/','112eRdRfG','Service','createEmptyBranch','21861FgjXLQ','ApiError','defaultBranch','update','map','autoInit','Repo','toString','/repos','../repo.class','typedi','defaults','projects/','Tokens','../../providers.tokens','GitRepoService','BadRequestError','6673765gXmbFI','defineProperty','create','decorate','apiUrl','BitbucketServerCredentialsDto','BitbucketServerRepoService','credentials','160zGvuBH','length','Inject','baseURL','find','93339DWFCKp','post','displayId','__metadata','api','/projects/','object','master','metadata','delete','18297150sHMDEp','function','design:paramtypes','../../credentials/dto/bitbucket-server-credentials.dto','put','name','../../../../../core/errors/bad-request.error','108116JEnHPY','values'];a238_0x27fa=function(){return _0x3a3f53;};return a238_0x27fa();}a238_0x5248ee();'use strict';function a238_0x5489(_0x35288f,_0x2081c3){const _0x3db768=a238_0x27fa();return a238_0x5489=function(_0x5248ee,_0x2ca4d5){_0x5248ee=_0x5248ee-0x127;let _0x27faa7=_0x3db768[_0x5248ee];return _0x27faa7;},a238_0x5489(_0x35288f,_0x2081c3);}var __decorate=this&&this[a238_0x4024e3(0x140)]||function(_0x223fbc,_0xa1bd37,_0x1de9a5,_0x5a3555){const _0x29f5b8=a238_0x4024e3;var _0x367d19=arguments[_0x29f5b8(0x15f)],_0x11aeeb=_0x367d19<0x3?_0xa1bd37:_0x5a3555===null?_0x5a3555=Object['getOwnPropertyDescriptor'](_0xa1bd37,_0x1de9a5):_0x5a3555,_0x823b12;if(typeof Reflect===_0x29f5b8(0x169)&&typeof Reflect[_0x29f5b8(0x159)]===_0x29f5b8(0x16e))_0x11aeeb=Reflect[_0x29f5b8(0x159)](_0x223fbc,_0xa1bd37,_0x1de9a5,_0x5a3555);else{for(var _0x54e580=_0x223fbc[_0x29f5b8(0x15f)]-0x1;_0x54e580>=0x0;_0x54e580--)if(_0x823b12=_0x223fbc[_0x54e580])_0x11aeeb=(_0x367d19<0x3?_0x823b12(_0x11aeeb):_0x367d19>0x3?_0x823b12(_0xa1bd37,_0x1de9a5,_0x11aeeb):_0x823b12(_0xa1bd37,_0x1de9a5))||_0x11aeeb;}return _0x367d19>0x3&&_0x11aeeb&&Object[_0x29f5b8(0x157)](_0xa1bd37,_0x1de9a5,_0x11aeeb),_0x11aeeb;},__metadata=this&&this[a238_0x4024e3(0x166)]||function(_0x3e3a03,_0x5d2519){const _0x3af564=a238_0x4024e3;if(typeof Reflect===_0x3af564(0x169)&&typeof Reflect[_0x3af564(0x16b)]===_0x3af564(0x16e))return Reflect[_0x3af564(0x16b)](_0x3e3a03,_0x5d2519);},__param=this&&this[a238_0x4024e3(0x13a)]||function(_0x11e2dc,_0x262bfe){return function(_0x260dab,_0x33857e){_0x262bfe(_0x260dab,_0x33857e,_0x11e2dc);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a238_0x4024e3(0x128)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a238_0x4024e3(0x14f)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a238_0x4024e3(0x12d)),git_internal_1=require('../../../internal/git.internal'),utils_1=require('../../../../shared/utils'),repo_class_1=require(a238_0x4024e3(0x14e)),git_repo_service_1=require(a238_0x4024e3(0x133)),providers_tokens_1=require(a238_0x4024e3(0x153)),bitbucket_server_credentials_dto_1=require(a238_0x4024e3(0x170));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a238_0x4024e3(0x154)]{constructor(_0x3478d6,_0x37ab41){const _0x3104b8=a238_0x4024e3;super(_0x3478d6),this['api']=_0x3478d6,this['project']=_0x37ab41['project'],this[_0x3104b8(0x15d)]=_0x37ab41;}async[a238_0x4024e3(0x158)](_0x51dbc6){const _0x368874=a238_0x4024e3;try{const _0x465409={'name':_0x51dbc6[_0x368874(0x127)],'scmId':'git','defaultBranch':_0x51dbc6[_0x368874(0x147)],..._0x51dbc6['apiBody']||{}},_0x1e3198=await this['request'][_0x368874(0x164)](_0x368874(0x151)+this[_0x368874(0x132)]+_0x368874(0x14d),_0x465409),_0x2a08fb=repo_class_1[_0x368874(0x14b)][_0x368874(0x137)](_0x1e3198,'',this[_0x368874(0x167)],this[_0x368874(0x15d)]);return _0x51dbc6[_0x368874(0x14a)]&&await git_internal_1['Git'][_0x368874(0x144)](_0x2a08fb,_0x51dbc6[_0x368874(0x147)]||{'name':_0x368874(0x16a)},'',this['credentials']),this[_0x368874(0x139)](_0x2a08fb[_0x368874(0x127)]);}catch(_0x21c626){if(_0x21c626 instanceof api_error_1[_0x368874(0x146)])throw _0x21c626;throw new bad_request_error_1['BadRequestError'](_0x21c626);}}async['getAll'](){const _0x5ca439=a238_0x4024e3;try{const _0x2c5ea2=[];let _0x4e1282;do{_0x4e1282=await this['request'][_0x5ca439(0x134)]('projects/'+this['project']+_0x5ca439(0x14d),{'params':{'limit':0x64,'start':_0x4e1282?_0x4e1282[_0x5ca439(0x13c)]:0x0}}),_0x2c5ea2['push'](..._0x4e1282[_0x5ca439(0x12a)]);}while(!_0x4e1282['isLastPage']);return _0x2c5ea2[_0x5ca439(0x149)](_0x34825a=>repo_class_1[_0x5ca439(0x14b)]['fromBitbucketServer'](_0x34825a,(0x0,utils_1[_0x5ca439(0x12f)])(this[_0x5ca439(0x12c)]['defaults'][_0x5ca439(0x161)]||'',_0x5ca439(0x168)+this['project']+_0x5ca439(0x141)+_0x34825a['slug']),this['api'],this[_0x5ca439(0x15d)]));}catch(_0x25099a){if(_0x25099a instanceof api_error_1['ApiError'])throw _0x25099a;throw new not_found_error_1[(_0x5ca439(0x136))](_0x25099a);}}async[a238_0x4024e3(0x139)](_0x3780f0){const _0x35d543=a238_0x4024e3;var _0x43ad33;try{const _0x2a21df=await this[_0x35d543(0x12c)]['get'](_0x35d543(0x151)+this[_0x35d543(0x132)]+_0x35d543(0x141)+_0x3780f0),_0x3aed55=repo_class_1[_0x35d543(0x14b)][_0x35d543(0x137)](_0x2a21df,(0x0,utils_1[_0x35d543(0x12f)])(this[_0x35d543(0x12c)][_0x35d543(0x150)][_0x35d543(0x161)]||'',_0x35d543(0x168)+this['project']+_0x35d543(0x141)+_0x3780f0),this[_0x35d543(0x167)],this[_0x35d543(0x15d)]),_0x5d21f0=await this[_0x35d543(0x12c)][_0x35d543(0x134)](_0x3aed55[_0x35d543(0x15a)]+_0x35d543(0x13d))[_0x35d543(0x12b)](_0x2d16c9=>_0x2d16c9['values']);return _0x3aed55[_0x35d543(0x147)]=(_0x43ad33=_0x5d21f0[_0x35d543(0x162)](_0x566426=>_0x566426[_0x35d543(0x135)]===!![]))===null||_0x43ad33===void 0x0?void 0x0:_0x43ad33['displayId'],_0x3aed55;}catch(_0x1dd7e5){if(_0x1dd7e5 instanceof api_error_1['ApiError'])throw _0x1dd7e5;throw new not_found_error_1[(_0x35d543(0x136))](_0x1dd7e5);}}async[a238_0x4024e3(0x148)](_0x638314,_0x49af98){const _0x3c4eb3=a238_0x4024e3;try{const _0x2a194a=await this[_0x3c4eb3(0x12c)][_0x3c4eb3(0x171)](_0x3c4eb3(0x151)+this[_0x3c4eb3(0x132)]+_0x3c4eb3(0x141)+_0x638314,_0x49af98),_0x51eb83=await this[_0x3c4eb3(0x12c)][_0x3c4eb3(0x134)](_0x3c4eb3(0x151)+this['project']+_0x3c4eb3(0x141)+_0x638314+_0x3c4eb3(0x138)),_0x2bf328=repo_class_1[_0x3c4eb3(0x14b)][_0x3c4eb3(0x137)](_0x2a194a,(0x0,utils_1[_0x3c4eb3(0x12f)])(this[_0x3c4eb3(0x12c)][_0x3c4eb3(0x150)][_0x3c4eb3(0x161)]||'',_0x3c4eb3(0x168)+this[_0x3c4eb3(0x132)]+'/repos/'+_0x638314),this[_0x3c4eb3(0x167)],this[_0x3c4eb3(0x15d)]);return _0x2bf328[_0x3c4eb3(0x147)]=_0x51eb83[_0x3c4eb3(0x165)],_0x2bf328;}catch(_0x149512){if(_0x149512 instanceof api_error_1[_0x3c4eb3(0x146)])throw _0x149512;throw new not_found_error_1[(_0x3c4eb3(0x136))](_0x149512);}}async[a238_0x4024e3(0x16c)](_0x148fe2){const _0x445397=a238_0x4024e3;try{await this[_0x445397(0x139)](_0x148fe2),await this['request'][_0x445397(0x16c)](_0x445397(0x151)+this[_0x445397(0x132)]+_0x445397(0x141)+_0x148fe2);}catch(_0x2adbf1){if(_0x2adbf1 instanceof api_error_1['ApiError'])throw _0x2adbf1;throw new bad_request_error_1[(_0x445397(0x155))](_0x2adbf1);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a238_0x4024e3(0x143)])(),__param(0x1,(0x0,typedi_1[a238_0x4024e3(0x160)])(providers_tokens_1[a238_0x4024e3(0x152)]['credentials'])),__metadata(a238_0x4024e3(0x16f),[bitbucket_server_api_service_1[a238_0x4024e3(0x130)],bitbucket_server_credentials_dto_1[a238_0x4024e3(0x15b)]])],BitbucketServerRepoService),exports[a238_0x4024e3(0x15c)]=BitbucketServerRepoService;