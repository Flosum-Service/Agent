const a227_0x2faeb4=a227_0x5b64;(function(_0x4f4436,_0x6809ea){const _0x41e34e=a227_0x5b64,_0x2b0c5b=_0x4f4436();while(!![]){try{const _0x5663f3=parseInt(_0x41e34e(0xdf))/0x1*(-parseInt(_0x41e34e(0x101))/0x2)+-parseInt(_0x41e34e(0xb5))/0x3*(-parseInt(_0x41e34e(0xea))/0x4)+parseInt(_0x41e34e(0xf7))/0x5*(-parseInt(_0x41e34e(0xcb))/0x6)+parseInt(_0x41e34e(0xe1))/0x7+parseInt(_0x41e34e(0xbf))/0x8*(parseInt(_0x41e34e(0xbd))/0x9)+-parseInt(_0x41e34e(0xf5))/0xa*(-parseInt(_0x41e34e(0x103))/0xb)+-parseInt(_0x41e34e(0xe9))/0xc;if(_0x5663f3===_0x6809ea)break;else _0x2b0c5b['push'](_0x2b0c5b['shift']());}catch(_0x2a4abd){_0x2b0c5b['push'](_0x2b0c5b['shift']());}}}(a227_0x2439,0x4ebae));const a227_0x13fea0=(function(){let _0xdf8de1=!![];return function(_0x22a7c8,_0x32e25d){const _0x1bbd5b=_0xdf8de1?function(){const _0x5a2505=a227_0x5b64;if(_0x32e25d){const _0x4ec592=_0x32e25d[_0x5a2505(0xfd)](_0x22a7c8,arguments);return _0x32e25d=null,_0x4ec592;}}:function(){};return _0xdf8de1=![],_0x1bbd5b;};}()),a227_0x167fed=a227_0x13fea0(this,function(){const _0xad5b8b=a227_0x5b64;return a227_0x167fed[_0xad5b8b(0xfc)]()[_0xad5b8b(0xd3)](_0xad5b8b(0xfb))[_0xad5b8b(0xfc)]()[_0xad5b8b(0xd6)](a227_0x167fed)[_0xad5b8b(0xd3)]('(((.+)+)+)+$');});a227_0x167fed();function a227_0x5b64(_0x2b1072,_0x589f0e){const _0x813b71=a227_0x2439();return a227_0x5b64=function(_0x167fed,_0x13fea0){_0x167fed=_0x167fed-0xb4;let _0x243979=_0x813b71[_0x167fed];return _0x243979;},a227_0x5b64(_0x2b1072,_0x589f0e);}'use strict';var __decorate=this&&this[a227_0x2faeb4(0xef)]||function(_0x3426b2,_0x5052d1,_0x408bbd,_0x51d008){const _0xfb78e8=a227_0x2faeb4;var _0x42f2ad=arguments[_0xfb78e8(0xb9)],_0x2cd62e=_0x42f2ad<0x3?_0x5052d1:_0x51d008===null?_0x51d008=Object[_0xfb78e8(0xc0)](_0x5052d1,_0x408bbd):_0x51d008,_0x21e333;if(typeof Reflect===_0xfb78e8(0xe5)&&typeof Reflect[_0xfb78e8(0xfe)]===_0xfb78e8(0xe7))_0x2cd62e=Reflect['decorate'](_0x3426b2,_0x5052d1,_0x408bbd,_0x51d008);else{for(var _0x265ea9=_0x3426b2['length']-0x1;_0x265ea9>=0x0;_0x265ea9--)if(_0x21e333=_0x3426b2[_0x265ea9])_0x2cd62e=(_0x42f2ad<0x3?_0x21e333(_0x2cd62e):_0x42f2ad>0x3?_0x21e333(_0x5052d1,_0x408bbd,_0x2cd62e):_0x21e333(_0x5052d1,_0x408bbd))||_0x2cd62e;}return _0x42f2ad>0x3&&_0x2cd62e&&Object[_0xfb78e8(0xd5)](_0x5052d1,_0x408bbd,_0x2cd62e),_0x2cd62e;},__metadata=this&&this[a227_0x2faeb4(0xd4)]||function(_0x5baa24,_0x769731){const _0x2a6c57=a227_0x2faeb4;if(typeof Reflect==='object'&&typeof Reflect[_0x2a6c57(0xf2)]===_0x2a6c57(0xe7))return Reflect[_0x2a6c57(0xf2)](_0x5baa24,_0x769731);},__param=this&&this['__param']||function(_0x1b0f6a,_0x21b380){return function(_0x2a0e55,_0x3c7180){_0x21b380(_0x2a0e55,_0x3c7180,_0x1b0f6a);};};Object[a227_0x2faeb4(0xd5)](exports,a227_0x2faeb4(0xf1),{'value':!![]}),exports[a227_0x2faeb4(0xe2)]=void 0x0;function a227_0x2439(){const _0x552517=['/projects/','api','credentials','update','../../../../../core/errors/api.error','fromBitbucketServer','projects/','isLastPage','638098Ejmsum','Tokens','3073574lcADaj','BitbucketServerRepoService','get','../../../../../core/errors/not-found.error','object','put','function','/repos/','4087284DDNSCR','70492rrHfen','BadRequestError','slug','BitbucketServerApiService','nextPageStart','__decorate','Repo','__esModule','metadata','ApiError','delete','10EkddpC','createEmptyBranch','164045HIFLvC','../repo.class','defaults','../../../internal/git.internal','(((.+)+)+)+$','toString','apply','decorate','NotFoundError','defaultBranch','2OBCMIc','name','3718077npDaru','displayId','24LtZXhy','push','autoInit','getAll','length','post','../../credentials/dto/bitbucket-server-credentials.dto','map','9UMFDzA','Service','3327352pGqPMJ','getOwnPropertyDescriptor','/repos','project','design:paramtypes','typedi','baseURL','git','Git','values','request','then','6OmqxdN','./git-repo.service','joinURL','create','master','../../../../../core/errors/bad-request.error','isDefault','getOne','search','__metadata','defineProperty','constructor'];a227_0x2439=function(){return _0x552517;};return a227_0x2439();}const bad_request_error_1=require(a227_0x2faeb4(0xd0)),not_found_error_1=require(a227_0x2faeb4(0xe4)),typedi_1=require(a227_0x2faeb4(0xc4)),api_error_1=require(a227_0x2faeb4(0xdb)),bitbucket_server_api_service_1=require('../../api/bitbucket-server-api.service'),git_internal_1=require(a227_0x2faeb4(0xfa)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a227_0x2faeb4(0xf8)),git_repo_service_1=require(a227_0x2faeb4(0xcc)),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require(a227_0x2faeb4(0xbb));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x1a679c,_0x455691){const _0x222b74=a227_0x2faeb4;super(_0x1a679c),this[_0x222b74(0xd8)]=_0x1a679c,this[_0x222b74(0xc2)]=_0x455691[_0x222b74(0xc2)],this[_0x222b74(0xd9)]=_0x455691;}async[a227_0x2faeb4(0xce)](_0x5523b4){const _0x11a251=a227_0x2faeb4;try{const _0x4a6875={'name':_0x5523b4['name'],'scmId':_0x11a251(0xc6),'defaultBranch':_0x5523b4[_0x11a251(0x100)],..._0x5523b4['apiBody']||{}},_0x1ba008=await this[_0x11a251(0xc9)][_0x11a251(0xba)](_0x11a251(0xdd)+this[_0x11a251(0xc2)]+_0x11a251(0xc1),_0x4a6875),_0x543f7e=repo_class_1[_0x11a251(0xf0)]['fromBitbucketServer'](_0x1ba008,'',this['api'],this[_0x11a251(0xd9)]);return _0x5523b4[_0x11a251(0xb7)]&&await git_internal_1[_0x11a251(0xc7)][_0x11a251(0xf6)](_0x543f7e,_0x5523b4[_0x11a251(0x100)]||_0x11a251(0xcf),'',this[_0x11a251(0xd9)]),this[_0x11a251(0xd2)](_0x543f7e[_0x11a251(0x102)]);}catch(_0x36a8cf){if(_0x36a8cf instanceof api_error_1[_0x11a251(0xf3)])throw _0x36a8cf;throw new bad_request_error_1[(_0x11a251(0xeb))](_0x36a8cf);}}async[a227_0x2faeb4(0xb8)](){const _0x52c0be=a227_0x2faeb4;try{const _0x1fb256=[];let _0x4340b7;do{_0x4340b7=await this[_0x52c0be(0xc9)][_0x52c0be(0xe3)](_0x52c0be(0xdd)+this[_0x52c0be(0xc2)]+_0x52c0be(0xc1),{'params':{'limit':0x64,'start':_0x4340b7?_0x4340b7[_0x52c0be(0xee)]:0x0}}),_0x1fb256[_0x52c0be(0xb6)](..._0x4340b7[_0x52c0be(0xc8)]);}while(!_0x4340b7[_0x52c0be(0xde)]);return _0x1fb256[_0x52c0be(0xbc)](_0x35fe8e=>repo_class_1[_0x52c0be(0xf0)][_0x52c0be(0xdc)](_0x35fe8e,(0x0,utils_1[_0x52c0be(0xcd)])(this[_0x52c0be(0xc9)]['defaults'][_0x52c0be(0xc5)]||'',_0x52c0be(0xd7)+this[_0x52c0be(0xc2)]+_0x52c0be(0xe8)+_0x35fe8e[_0x52c0be(0xec)]),this[_0x52c0be(0xd8)],this[_0x52c0be(0xd9)]));}catch(_0x41f63a){if(_0x41f63a instanceof api_error_1['ApiError'])throw _0x41f63a;throw new not_found_error_1[(_0x52c0be(0xff))](_0x41f63a);}}async[a227_0x2faeb4(0xd2)](_0x169f01){const _0x38a6e9=a227_0x2faeb4;var _0x55837c;try{const _0x57b794=await this[_0x38a6e9(0xc9)][_0x38a6e9(0xe3)](_0x38a6e9(0xdd)+this[_0x38a6e9(0xc2)]+'/repos/'+_0x169f01),_0x3dc834=repo_class_1[_0x38a6e9(0xf0)][_0x38a6e9(0xdc)](_0x57b794,(0x0,utils_1[_0x38a6e9(0xcd)])(this['request'][_0x38a6e9(0xf9)]['baseURL']||'',_0x38a6e9(0xd7)+this[_0x38a6e9(0xc2)]+'/repos/'+_0x169f01),this['api'],this['credentials']),_0x4193d6=await this[_0x38a6e9(0xc9)]['get'](_0x3dc834['apiUrl']+'/branches')[_0x38a6e9(0xca)](_0x68be30=>_0x68be30[_0x38a6e9(0xc8)]);return _0x3dc834[_0x38a6e9(0x100)]=(_0x55837c=_0x4193d6['find'](_0x3f2dee=>_0x3f2dee[_0x38a6e9(0xd1)]===!![]))===null||_0x55837c===void 0x0?void 0x0:_0x55837c['displayId'],_0x3dc834;}catch(_0x217af1){if(_0x217af1 instanceof api_error_1[_0x38a6e9(0xf3)])throw _0x217af1;throw new not_found_error_1[(_0x38a6e9(0xff))](_0x217af1);}}async[a227_0x2faeb4(0xda)](_0x2250e2,_0x27697b){const _0x3a1f43=a227_0x2faeb4;try{const _0x39f591=await this['request'][_0x3a1f43(0xe6)]('projects/'+this[_0x3a1f43(0xc2)]+_0x3a1f43(0xe8)+_0x2250e2,_0x27697b),_0x1d1ad5=await this[_0x3a1f43(0xc9)]['get'](_0x3a1f43(0xdd)+this[_0x3a1f43(0xc2)]+_0x3a1f43(0xe8)+_0x2250e2+'/default-branch'),_0x29ec4b=repo_class_1[_0x3a1f43(0xf0)][_0x3a1f43(0xdc)](_0x39f591,(0x0,utils_1[_0x3a1f43(0xcd)])(this[_0x3a1f43(0xc9)][_0x3a1f43(0xf9)][_0x3a1f43(0xc5)]||'',_0x3a1f43(0xd7)+this['project']+_0x3a1f43(0xe8)+_0x2250e2),this[_0x3a1f43(0xd8)],this[_0x3a1f43(0xd9)]);return _0x29ec4b[_0x3a1f43(0x100)]=_0x1d1ad5[_0x3a1f43(0xb4)],_0x29ec4b;}catch(_0x23310c){if(_0x23310c instanceof api_error_1[_0x3a1f43(0xf3)])throw _0x23310c;throw new not_found_error_1['NotFoundError'](_0x23310c);}}async[a227_0x2faeb4(0xf4)](_0x37d4fe){const _0x50d239=a227_0x2faeb4;try{await this[_0x50d239(0xd2)](_0x37d4fe),await this[_0x50d239(0xc9)][_0x50d239(0xf4)](_0x50d239(0xdd)+this[_0x50d239(0xc2)]+'/repos/'+_0x37d4fe);}catch(_0x1f0b83){if(_0x1f0b83 instanceof api_error_1[_0x50d239(0xf3)])throw _0x1f0b83;throw new bad_request_error_1[(_0x50d239(0xeb))](_0x1f0b83);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a227_0x2faeb4(0xbe)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a227_0x2faeb4(0xe0)]['credentials'])),__metadata(a227_0x2faeb4(0xc3),[bitbucket_server_api_service_1[a227_0x2faeb4(0xed)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a227_0x2faeb4(0xe2)]=BitbucketServerRepoService;