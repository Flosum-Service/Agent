const a206_0x49a538=a206_0x2384;function a206_0x2384(_0x5028b3,_0x27f6a7){const _0x55878f=a206_0x3bb5();return a206_0x2384=function(_0x19afec,_0x45c15c){_0x19afec=_0x19afec-0x163;let _0x3bb5c2=_0x55878f[_0x19afec];return _0x3bb5c2;},a206_0x2384(_0x5028b3,_0x27f6a7);}(function(_0x3c07d8,_0x6ba918){const _0x400d7b=a206_0x2384,_0x22adf9=_0x3c07d8();while(!![]){try{const _0x234140=-parseInt(_0x400d7b(0x1a1))/0x1*(parseInt(_0x400d7b(0x163))/0x2)+parseInt(_0x400d7b(0x18f))/0x3+-parseInt(_0x400d7b(0x17e))/0x4*(-parseInt(_0x400d7b(0x166))/0x5)+parseInt(_0x400d7b(0x17a))/0x6+-parseInt(_0x400d7b(0x193))/0x7*(-parseInt(_0x400d7b(0x19d))/0x8)+-parseInt(_0x400d7b(0x181))/0x9*(-parseInt(_0x400d7b(0x182))/0xa)+-parseInt(_0x400d7b(0x19c))/0xb;if(_0x234140===_0x6ba918)break;else _0x22adf9['push'](_0x22adf9['shift']());}catch(_0x24f23d){_0x22adf9['push'](_0x22adf9['shift']());}}}(a206_0x3bb5,0x886db));const a206_0x45c15c=(function(){let _0x41f233=!![];return function(_0x449310,_0x4ff461){const _0x5bf4c3=_0x41f233?function(){if(_0x4ff461){const _0x3a4328=_0x4ff461['apply'](_0x449310,arguments);return _0x4ff461=null,_0x3a4328;}}:function(){};return _0x41f233=![],_0x5bf4c3;};}()),a206_0x19afec=a206_0x45c15c(this,function(){const _0x40ad2e=a206_0x2384;return a206_0x19afec[_0x40ad2e(0x190)]()['search'](_0x40ad2e(0x17c))['toString']()[_0x40ad2e(0x199)](a206_0x19afec)[_0x40ad2e(0x18b)]('(((.+)+)+)+$');});a206_0x19afec();'use strict';function a206_0x3bb5(){const _0x509147=['isLastPage','isDefault','baseURL','BitbucketServerCredentialsDto','../../providers.tokens','../../credentials/dto/bitbucket-server-credentials.dto','fromBitbucketServer','__esModule','put','function','post','5446248EIVDHp','Service','(((.+)+)+)+$','ApiError','3540UzSZLy','git','/branches','4437RAjhct','250JEKldT','project','object','../../../../../core/errors/bad-request.error','decorate','find','/default-branch','joinURL','master','search','name','/projects/','metadata','3324120aYVJVz','toString','NotFoundError','push','36372SDPdHt','credentials','projects/','autoInit','createEmptyBranch','getOwnPropertyDescriptor','constructor','defaults','Repo','17990698jBLwOp','608paPNPm','./git-repo.service','getAll','displayId','5cjBxrY','Git','slug','BadRequestError','api','typedi','request','create','apiUrl','GitRepoService','defineProperty','values','defaultBranch','get','/repos','315538OWpEkf','../repo.class','getOne','3165tolWXY','delete','/repos/','BitbucketServerRepoService','design:paramtypes','__param','BitbucketServerApiService','../../api/bitbucket-server-api.service','Inject'];a206_0x3bb5=function(){return _0x509147;};return a206_0x3bb5();}var __decorate=this&&this['__decorate']||function(_0x5cd8c6,_0x215624,_0xbf1ab1,_0x3ac21a){const _0x1850e9=a206_0x2384;var _0x17cd19=arguments['length'],_0x3da8a2=_0x17cd19<0x3?_0x215624:_0x3ac21a===null?_0x3ac21a=Object[_0x1850e9(0x198)](_0x215624,_0xbf1ab1):_0x3ac21a,_0x5a11c3;if(typeof Reflect===_0x1850e9(0x184)&&typeof Reflect[_0x1850e9(0x186)]==='function')_0x3da8a2=Reflect[_0x1850e9(0x186)](_0x5cd8c6,_0x215624,_0xbf1ab1,_0x3ac21a);else{for(var _0x492c09=_0x5cd8c6['length']-0x1;_0x492c09>=0x0;_0x492c09--)if(_0x5a11c3=_0x5cd8c6[_0x492c09])_0x3da8a2=(_0x17cd19<0x3?_0x5a11c3(_0x3da8a2):_0x17cd19>0x3?_0x5a11c3(_0x215624,_0xbf1ab1,_0x3da8a2):_0x5a11c3(_0x215624,_0xbf1ab1))||_0x3da8a2;}return _0x17cd19>0x3&&_0x3da8a2&&Object[_0x1850e9(0x1ab)](_0x215624,_0xbf1ab1,_0x3da8a2),_0x3da8a2;},__metadata=this&&this['__metadata']||function(_0x2d345a,_0x15efe2){const _0x2504a2=a206_0x2384;if(typeof Reflect==='object'&&typeof Reflect[_0x2504a2(0x18e)]===_0x2504a2(0x178))return Reflect['metadata'](_0x2d345a,_0x15efe2);},__param=this&&this[a206_0x49a538(0x16b)]||function(_0x482497,_0x570f74){return function(_0x29c991,_0x5f12e0){_0x570f74(_0x29c991,_0x5f12e0,_0x482497);};};Object[a206_0x49a538(0x1ab)](exports,a206_0x49a538(0x176),{'value':!![]}),exports[a206_0x49a538(0x169)]=void 0x0;const bad_request_error_1=require(a206_0x49a538(0x185)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a206_0x49a538(0x1a6)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a206_0x49a538(0x16d)),git_internal_1=require('../../../internal/git.internal'),utils_1=require('../../../../shared/utils'),repo_class_1=require(a206_0x49a538(0x164)),git_repo_service_1=require(a206_0x49a538(0x19e)),providers_tokens_1=require(a206_0x49a538(0x173)),bitbucket_server_credentials_dto_1=require(a206_0x49a538(0x174));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a206_0x49a538(0x1aa)]{constructor(_0x588033,_0x325602){const _0x1ba97e=a206_0x49a538;super(_0x588033),this[_0x1ba97e(0x1a5)]=_0x588033,this[_0x1ba97e(0x183)]=_0x325602[_0x1ba97e(0x183)],this[_0x1ba97e(0x194)]=_0x325602;}async[a206_0x49a538(0x1a8)](_0x189fa0){const _0x1eae61=a206_0x49a538;try{const _0x3b0346={'name':_0x189fa0['name'],'scmId':_0x1eae61(0x17f),'defaultBranch':_0x189fa0[_0x1eae61(0x1ad)],..._0x189fa0['apiBody']||{}},_0x263a3b=await this[_0x1eae61(0x1a7)][_0x1eae61(0x179)]('projects/'+this['project']+'/repos',_0x3b0346),_0x5c8ce2=repo_class_1[_0x1eae61(0x19b)]['fromBitbucketServer'](_0x263a3b,'',this[_0x1eae61(0x1a5)],this[_0x1eae61(0x194)]);return _0x189fa0[_0x1eae61(0x196)]&&await git_internal_1[_0x1eae61(0x1a2)][_0x1eae61(0x197)](_0x5c8ce2,_0x189fa0[_0x1eae61(0x1ad)]||_0x1eae61(0x18a),'',this[_0x1eae61(0x194)]),this[_0x1eae61(0x165)](_0x5c8ce2[_0x1eae61(0x18c)]);}catch(_0x18c2af){if(_0x18c2af instanceof api_error_1['ApiError'])throw _0x18c2af;throw new bad_request_error_1[(_0x1eae61(0x1a4))](_0x18c2af);}}async[a206_0x49a538(0x19f)](){const _0x3d271b=a206_0x49a538;try{const _0xc932e6=[];let _0x2b88d2;do{_0x2b88d2=await this['request']['get']('projects/'+this[_0x3d271b(0x183)]+_0x3d271b(0x1af),{'params':{'limit':0x64,'start':_0x2b88d2?_0x2b88d2['nextPageStart']:0x0}}),_0xc932e6[_0x3d271b(0x192)](..._0x2b88d2[_0x3d271b(0x1ac)]);}while(!_0x2b88d2[_0x3d271b(0x16f)]);return _0xc932e6['map'](_0xf18848=>repo_class_1[_0x3d271b(0x19b)][_0x3d271b(0x175)](_0xf18848,(0x0,utils_1[_0x3d271b(0x189)])(this['request']['defaults'][_0x3d271b(0x171)]||'',_0x3d271b(0x18d)+this['project']+_0x3d271b(0x168)+_0xf18848[_0x3d271b(0x1a3)]),this[_0x3d271b(0x1a5)],this['credentials']));}catch(_0x5d5777){if(_0x5d5777 instanceof api_error_1[_0x3d271b(0x17d)])throw _0x5d5777;throw new not_found_error_1[(_0x3d271b(0x191))](_0x5d5777);}}async[a206_0x49a538(0x165)](_0xd6db81){const _0x23b463=a206_0x49a538;var _0x599f5c;try{const _0x197f68=await this[_0x23b463(0x1a7)][_0x23b463(0x1ae)](_0x23b463(0x195)+this[_0x23b463(0x183)]+_0x23b463(0x168)+_0xd6db81),_0x1d2d1e=repo_class_1['Repo']['fromBitbucketServer'](_0x197f68,(0x0,utils_1[_0x23b463(0x189)])(this['request'][_0x23b463(0x19a)][_0x23b463(0x171)]||'',_0x23b463(0x18d)+this[_0x23b463(0x183)]+_0x23b463(0x168)+_0xd6db81),this[_0x23b463(0x1a5)],this['credentials']),_0x4a89ec=await this[_0x23b463(0x1a7)]['get'](_0x1d2d1e[_0x23b463(0x1a9)]+_0x23b463(0x180))['then'](_0x1d8982=>_0x1d8982[_0x23b463(0x1ac)]);return _0x1d2d1e[_0x23b463(0x1ad)]=(_0x599f5c=_0x4a89ec[_0x23b463(0x187)](_0x37abd3=>_0x37abd3[_0x23b463(0x170)]===!![]))===null||_0x599f5c===void 0x0?void 0x0:_0x599f5c['displayId'],_0x1d2d1e;}catch(_0x4e2db7){if(_0x4e2db7 instanceof api_error_1[_0x23b463(0x17d)])throw _0x4e2db7;throw new not_found_error_1['NotFoundError'](_0x4e2db7);}}async['update'](_0x1e6011,_0x5a77d5){const _0x5d7a9b=a206_0x49a538;try{const _0x2e33bb=await this[_0x5d7a9b(0x1a7)][_0x5d7a9b(0x177)](_0x5d7a9b(0x195)+this[_0x5d7a9b(0x183)]+'/repos/'+_0x1e6011,_0x5a77d5),_0x23fdb0=await this[_0x5d7a9b(0x1a7)][_0x5d7a9b(0x1ae)](_0x5d7a9b(0x195)+this[_0x5d7a9b(0x183)]+'/repos/'+_0x1e6011+_0x5d7a9b(0x188)),_0x6bc4a2=repo_class_1[_0x5d7a9b(0x19b)][_0x5d7a9b(0x175)](_0x2e33bb,(0x0,utils_1[_0x5d7a9b(0x189)])(this[_0x5d7a9b(0x1a7)][_0x5d7a9b(0x19a)][_0x5d7a9b(0x171)]||'',_0x5d7a9b(0x18d)+this['project']+_0x5d7a9b(0x168)+_0x1e6011),this[_0x5d7a9b(0x1a5)],this['credentials']);return _0x6bc4a2[_0x5d7a9b(0x1ad)]=_0x23fdb0[_0x5d7a9b(0x1a0)],_0x6bc4a2;}catch(_0x1a3abf){if(_0x1a3abf instanceof api_error_1[_0x5d7a9b(0x17d)])throw _0x1a3abf;throw new not_found_error_1['NotFoundError'](_0x1a3abf);}}async[a206_0x49a538(0x167)](_0x2544f5){const _0x15854d=a206_0x49a538;try{await this[_0x15854d(0x165)](_0x2544f5),await this['request'][_0x15854d(0x167)](_0x15854d(0x195)+this[_0x15854d(0x183)]+_0x15854d(0x168)+_0x2544f5);}catch(_0x3b9d14){if(_0x3b9d14 instanceof api_error_1['ApiError'])throw _0x3b9d14;throw new bad_request_error_1['BadRequestError'](_0x3b9d14);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a206_0x49a538(0x17b)])(),__param(0x1,(0x0,typedi_1[a206_0x49a538(0x16e)])(providers_tokens_1['Tokens'][a206_0x49a538(0x194)])),__metadata(a206_0x49a538(0x16a),[bitbucket_server_api_service_1[a206_0x49a538(0x16c)],bitbucket_server_credentials_dto_1[a206_0x49a538(0x172)]])],BitbucketServerRepoService),exports[a206_0x49a538(0x169)]=BitbucketServerRepoService;