const a167_0x39bb22=a167_0x2689;(function(_0x25136a,_0xfc5dac){const _0x54c6c6=a167_0x2689,_0x3100be=_0x25136a();while(!![]){try{const _0x682d37=parseInt(_0x54c6c6(0x16b))/0x1+parseInt(_0x54c6c6(0x14a))/0x2*(parseInt(_0x54c6c6(0x165))/0x3)+parseInt(_0x54c6c6(0x17a))/0x4*(-parseInt(_0x54c6c6(0x16d))/0x5)+parseInt(_0x54c6c6(0x16a))/0x6+-parseInt(_0x54c6c6(0x160))/0x7+-parseInt(_0x54c6c6(0x154))/0x8*(-parseInt(_0x54c6c6(0x175))/0x9)+-parseInt(_0x54c6c6(0x14e))/0xa;if(_0x682d37===_0xfc5dac)break;else _0x3100be['push'](_0x3100be['shift']());}catch(_0x365dfa){_0x3100be['push'](_0x3100be['shift']());}}}(a167_0x1d90,0xd8549));const a167_0x1dfcbf=(function(){let _0x5136d7=!![];return function(_0x3a6ea4,_0x4fb7de){const _0x42f07d=_0x5136d7?function(){const _0x3efc08=a167_0x2689;if(_0x4fb7de){const _0x5229e8=_0x4fb7de[_0x3efc08(0x16f)](_0x3a6ea4,arguments);return _0x4fb7de=null,_0x5229e8;}}:function(){};return _0x5136d7=![],_0x42f07d;};}()),a167_0x449adb=a167_0x1dfcbf(this,function(){const _0x494e74=a167_0x2689;return a167_0x449adb['toString']()[_0x494e74(0x133)](_0x494e74(0x159))[_0x494e74(0x167)]()['constructor'](a167_0x449adb)[_0x494e74(0x133)](_0x494e74(0x159));});a167_0x449adb();'use strict';var __decorate=this&&this[a167_0x39bb22(0x163)]||function(_0x281b37,_0x3feb93,_0xc72d06,_0x55665e){const _0x3121d7=a167_0x39bb22;var _0x21310e=arguments[_0x3121d7(0x16c)],_0x3e401e=_0x21310e<0x3?_0x3feb93:_0x55665e===null?_0x55665e=Object[_0x3121d7(0x174)](_0x3feb93,_0xc72d06):_0x55665e,_0x493c4e;if(typeof Reflect==='object'&&typeof Reflect[_0x3121d7(0x17b)]===_0x3121d7(0x172))_0x3e401e=Reflect[_0x3121d7(0x17b)](_0x281b37,_0x3feb93,_0xc72d06,_0x55665e);else{for(var _0x425472=_0x281b37['length']-0x1;_0x425472>=0x0;_0x425472--)if(_0x493c4e=_0x281b37[_0x425472])_0x3e401e=(_0x21310e<0x3?_0x493c4e(_0x3e401e):_0x21310e>0x3?_0x493c4e(_0x3feb93,_0xc72d06,_0x3e401e):_0x493c4e(_0x3feb93,_0xc72d06))||_0x3e401e;}return _0x21310e>0x3&&_0x3e401e&&Object[_0x3121d7(0x13c)](_0x3feb93,_0xc72d06,_0x3e401e),_0x3e401e;},__metadata=this&&this[a167_0x39bb22(0x134)]||function(_0x237bc8,_0x41d272){const _0x543071=a167_0x39bb22;if(typeof Reflect===_0x543071(0x16e)&&typeof Reflect['metadata']==='function')return Reflect[_0x543071(0x14f)](_0x237bc8,_0x41d272);},__param=this&&this[a167_0x39bb22(0x179)]||function(_0x9503a5,_0xcea8d2){return function(_0x438db1,_0x547289){_0xcea8d2(_0x438db1,_0x547289,_0x9503a5);};};Object[a167_0x39bb22(0x13c)](exports,a167_0x39bb22(0x15c),{'value':!![]}),exports[a167_0x39bb22(0x150)]=void 0x0;const bad_request_error_1=require(a167_0x39bb22(0x146)),not_found_error_1=require(a167_0x39bb22(0x185)),typedi_1=require(a167_0x39bb22(0x176)),api_error_1=require(a167_0x39bb22(0x136)),bitbucket_server_api_service_1=require(a167_0x39bb22(0x182)),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a167_0x39bb22(0x177)),repo_class_1=require(a167_0x39bb22(0x17f)),git_repo_service_1=require(a167_0x39bb22(0x13f)),providers_tokens_1=require(a167_0x39bb22(0x140)),bitbucket_server_credentials_dto_1=require(a167_0x39bb22(0x14b));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x62bded,_0x5e8536){const _0x396955=a167_0x39bb22;super(_0x62bded),this[_0x396955(0x143)]=_0x62bded,this[_0x396955(0x183)]=_0x5e8536[_0x396955(0x183)],this['credentials']=_0x5e8536;}async['create'](_0x528bf2){const _0x38b7b3=a167_0x39bb22;try{const _0x1d3cee={'name':_0x528bf2[_0x38b7b3(0x17e)],'scmId':_0x38b7b3(0x166),'defaultBranch':_0x528bf2[_0x38b7b3(0x15e)],..._0x528bf2[_0x38b7b3(0x17d)]||{}},_0x872990=await this[_0x38b7b3(0x158)][_0x38b7b3(0x173)](_0x38b7b3(0x15b)+this['project']+'/repos',_0x1d3cee),_0x290ecf=repo_class_1[_0x38b7b3(0x135)][_0x38b7b3(0x184)](_0x872990,'',this[_0x38b7b3(0x143)],this[_0x38b7b3(0x141)]);return _0x528bf2[_0x38b7b3(0x171)]&&await git_internal_1[_0x38b7b3(0x170)][_0x38b7b3(0x138)](_0x290ecf,_0x528bf2['defaultBranch']||'master','',this['credentials']),this['getOne'](_0x290ecf['name']);}catch(_0x1484e6){if(_0x1484e6 instanceof api_error_1[_0x38b7b3(0x13a)])throw _0x1484e6;throw new bad_request_error_1[(_0x38b7b3(0x180))](_0x1484e6);}}async[a167_0x39bb22(0x14d)](){const _0xa21ebd=a167_0x39bb22;try{const _0x3b7f8c=[];let _0x31c2e9;do{_0x31c2e9=await this[_0xa21ebd(0x158)]['get']('projects/'+this[_0xa21ebd(0x183)]+_0xa21ebd(0x15f),{'params':{'limit':0x64,'start':_0x31c2e9?_0x31c2e9[_0xa21ebd(0x152)]:0x0}}),_0x3b7f8c[_0xa21ebd(0x161)](..._0x31c2e9['values']);}while(!_0x31c2e9['isLastPage']);return _0x3b7f8c[_0xa21ebd(0x155)](_0x506455=>repo_class_1[_0xa21ebd(0x135)]['fromBitbucketServer'](_0x506455,(0x0,utils_1[_0xa21ebd(0x181)])(this[_0xa21ebd(0x158)][_0xa21ebd(0x13d)][_0xa21ebd(0x139)]||'',_0xa21ebd(0x164)+this[_0xa21ebd(0x183)]+_0xa21ebd(0x149)+_0x506455[_0xa21ebd(0x15d)]),this[_0xa21ebd(0x143)],this['credentials']));}catch(_0x4374bf){if(_0x4374bf instanceof api_error_1['ApiError'])throw _0x4374bf;throw new not_found_error_1['NotFoundError'](_0x4374bf);}}async[a167_0x39bb22(0x17c)](_0x3e363a){const _0x4b2b54=a167_0x39bb22;var _0xf6658a;try{const _0x20ecf9=await this[_0x4b2b54(0x158)][_0x4b2b54(0x15a)](_0x4b2b54(0x15b)+this[_0x4b2b54(0x183)]+_0x4b2b54(0x149)+_0x3e363a),_0xae383=repo_class_1['Repo']['fromBitbucketServer'](_0x20ecf9,(0x0,utils_1['joinURL'])(this[_0x4b2b54(0x158)]['defaults'][_0x4b2b54(0x139)]||'',_0x4b2b54(0x164)+this[_0x4b2b54(0x183)]+_0x4b2b54(0x149)+_0x3e363a),this[_0x4b2b54(0x143)],this[_0x4b2b54(0x141)]),_0x214f12=await this[_0x4b2b54(0x158)]['get'](_0xae383[_0x4b2b54(0x169)]+_0x4b2b54(0x157))[_0x4b2b54(0x13b)](_0x27efe7=>_0x27efe7[_0x4b2b54(0x14c)]);return _0xae383[_0x4b2b54(0x15e)]=(_0xf6658a=_0x214f12[_0x4b2b54(0x144)](_0x10cc76=>_0x10cc76[_0x4b2b54(0x145)]===!![]))===null||_0xf6658a===void 0x0?void 0x0:_0xf6658a[_0x4b2b54(0x178)],_0xae383;}catch(_0x35f545){if(_0x35f545 instanceof api_error_1[_0x4b2b54(0x13a)])throw _0x35f545;throw new not_found_error_1['NotFoundError'](_0x35f545);}}async[a167_0x39bb22(0x162)](_0x8a6e30,_0x147dd8){const _0x56f7e5=a167_0x39bb22;try{const _0x4f916e=await this['request'][_0x56f7e5(0x13e)](_0x56f7e5(0x15b)+this[_0x56f7e5(0x183)]+_0x56f7e5(0x149)+_0x8a6e30,_0x147dd8),_0x3fd077=await this['request']['get'](_0x56f7e5(0x15b)+this[_0x56f7e5(0x183)]+_0x56f7e5(0x149)+_0x8a6e30+_0x56f7e5(0x168)),_0x315983=repo_class_1['Repo'][_0x56f7e5(0x184)](_0x4f916e,(0x0,utils_1[_0x56f7e5(0x181)])(this[_0x56f7e5(0x158)][_0x56f7e5(0x13d)][_0x56f7e5(0x139)]||'',_0x56f7e5(0x164)+this[_0x56f7e5(0x183)]+_0x56f7e5(0x149)+_0x8a6e30),this[_0x56f7e5(0x143)],this['credentials']);return _0x315983['defaultBranch']=_0x3fd077['displayId'],_0x315983;}catch(_0x48cb20){if(_0x48cb20 instanceof api_error_1[_0x56f7e5(0x13a)])throw _0x48cb20;throw new not_found_error_1[(_0x56f7e5(0x137))](_0x48cb20);}}async['delete'](_0x130270){const _0x22ada0=a167_0x39bb22;try{await this['getOne'](_0x130270),await this[_0x22ada0(0x158)][_0x22ada0(0x148)]('projects/'+this[_0x22ada0(0x183)]+'/repos/'+_0x130270);}catch(_0xb227cb){if(_0xb227cb instanceof api_error_1['ApiError'])throw _0xb227cb;throw new bad_request_error_1[(_0x22ada0(0x180))](_0xb227cb);}}};function a167_0x1d90(){const _0x37a009=['function','post','getOwnPropertyDescriptor','18EbpBiu','typedi','../../../../shared/utils','displayId','__param','5260EWqouE','decorate','getOne','apiBody','name','../repo.class','BadRequestError','joinURL','../../api/bitbucket-server-api.service','project','fromBitbucketServer','../../../../../core/errors/not-found.error','Service','search','__metadata','Repo','../../../../../core/errors/api.error','NotFoundError','createEmptyBranch','baseURL','ApiError','then','defineProperty','defaults','put','./git-repo.service','../../providers.tokens','credentials','Tokens','api','find','isDefault','../../../../../core/errors/bad-request.error','BitbucketServerCredentialsDto','delete','/repos/','2vqshiu','../../credentials/dto/bitbucket-server-credentials.dto','values','getAll','4251600FTDaOc','metadata','BitbucketServerRepoService','design:paramtypes','nextPageStart','BitbucketServerApiService','1260488GvONvM','map','Inject','/branches','request','(((.+)+)+)+$','get','projects/','__esModule','slug','defaultBranch','/repos','4373957YcsFRi','push','update','__decorate','/projects/','1109073uYisov','git','toString','/default-branch','apiUrl','3000942DJfRpR','1333675ngOOqd','length','2215bJSnxS','object','apply','Git','autoInit'];a167_0x1d90=function(){return _0x37a009;};return a167_0x1d90();}function a167_0x2689(_0x876db1,_0x20b3a5){const _0x109fb8=a167_0x1d90();return a167_0x2689=function(_0x449adb,_0x1dfcbf){_0x449adb=_0x449adb-0x132;let _0x1d9000=_0x109fb8[_0x449adb];return _0x1d9000;},a167_0x2689(_0x876db1,_0x20b3a5);}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a167_0x39bb22(0x132)])(),__param(0x1,(0x0,typedi_1[a167_0x39bb22(0x156)])(providers_tokens_1[a167_0x39bb22(0x142)][a167_0x39bb22(0x141)])),__metadata(a167_0x39bb22(0x151),[bitbucket_server_api_service_1[a167_0x39bb22(0x153)],bitbucket_server_credentials_dto_1[a167_0x39bb22(0x147)]])],BitbucketServerRepoService),exports[a167_0x39bb22(0x150)]=BitbucketServerRepoService;