const a238_0x5457f6=a238_0x4dd3;function a238_0x414a(){const _0x5be16c=['57790Lifmlw','metadata','2726184MEwjrb','defaults','getOwnPropertyDescriptor','545690TflQOb','credentials','BitbucketServerApiService','/projects/','design:paramtypes','values','length','../repo.class','BitbucketServerRepoService','ApiError','decorate','../../../internal/git.internal','734696WTXiNC','git','BitbucketServerCredentialsDto','getOne','projects/','slug','Git','put','__metadata','post','function','NotFoundError','../../api/bitbucket-server-api.service','defineProperty','167646pWRUrj','isLastPage','get','find','baseURL','Repo','Inject','toString','project','map','object','../../../../../core/errors/not-found.error','/repos','joinURL','944379vVXDbe','BadRequestError','13raMxmT','../../credentials/dto/bitbucket-server-credentials.dto','apiBody','Service','typedi','__param','./git-repo.service','68004WuRIRu','master','../../../../shared/utils','/repos/','getAll','request','create','displayId','../../../../../core/errors/bad-request.error','(((.+)+)+)+$','apply','../../providers.tokens','api','isDefault','search','autoInit','__esModule','/branches','defaultBranch','/default-branch','161wHCbOJ','fromBitbucketServer'];a238_0x414a=function(){return _0x5be16c;};return a238_0x414a();}(function(_0x32af08,_0x4246d3){const _0x4d06a6=a238_0x4dd3,_0xcf2b66=_0x32af08();while(!![]){try{const _0x170b43=-parseInt(_0x4d06a6(0x1cc))/0x1*(-parseInt(_0x4d06a6(0x19d))/0x2)+-parseInt(_0x4d06a6(0x1bc))/0x3+parseInt(_0x4d06a6(0x1ae))/0x4+-parseInt(_0x4d06a6(0x1a2))/0x5+parseInt(_0x4d06a6(0x1d3))/0x6*(parseInt(_0x4d06a6(0x19b))/0x7)+-parseInt(_0x4d06a6(0x19f))/0x8+parseInt(_0x4d06a6(0x1ca))/0x9;if(_0x170b43===_0x4246d3)break;else _0xcf2b66['push'](_0xcf2b66['shift']());}catch(_0x5559aa){_0xcf2b66['push'](_0xcf2b66['shift']());}}}(a238_0x414a,0x66539));const a238_0x471fd9=(function(){let _0x3ae4f4=!![];return function(_0x1b05f6,_0x32ac28){const _0x4d283e=_0x3ae4f4?function(){const _0x1ba216=a238_0x4dd3;if(_0x32ac28){const _0x178e82=_0x32ac28[_0x1ba216(0x191)](_0x1b05f6,arguments);return _0x32ac28=null,_0x178e82;}}:function(){};return _0x3ae4f4=![],_0x4d283e;};}()),a238_0x354782=a238_0x471fd9(this,function(){const _0x2369a9=a238_0x4dd3;return a238_0x354782[_0x2369a9(0x1c3)]()[_0x2369a9(0x195)](_0x2369a9(0x1dc))[_0x2369a9(0x1c3)]()['constructor'](a238_0x354782)[_0x2369a9(0x195)](_0x2369a9(0x1dc));});a238_0x354782();'use strict';var __decorate=this&&this['__decorate']||function(_0x580bcf,_0x569c4b,_0x472492,_0x22a72e){const _0x4d0dc7=a238_0x4dd3;var _0x899edd=arguments[_0x4d0dc7(0x1a8)],_0x3aa0e4=_0x899edd<0x3?_0x569c4b:_0x22a72e===null?_0x22a72e=Object[_0x4d0dc7(0x1a1)](_0x569c4b,_0x472492):_0x22a72e,_0x3d4e6e;if(typeof Reflect===_0x4d0dc7(0x1c6)&&typeof Reflect[_0x4d0dc7(0x1ac)]===_0x4d0dc7(0x1b8))_0x3aa0e4=Reflect['decorate'](_0x580bcf,_0x569c4b,_0x472492,_0x22a72e);else{for(var _0x331f55=_0x580bcf[_0x4d0dc7(0x1a8)]-0x1;_0x331f55>=0x0;_0x331f55--)if(_0x3d4e6e=_0x580bcf[_0x331f55])_0x3aa0e4=(_0x899edd<0x3?_0x3d4e6e(_0x3aa0e4):_0x899edd>0x3?_0x3d4e6e(_0x569c4b,_0x472492,_0x3aa0e4):_0x3d4e6e(_0x569c4b,_0x472492))||_0x3aa0e4;}return _0x899edd>0x3&&_0x3aa0e4&&Object[_0x4d0dc7(0x1bb)](_0x569c4b,_0x472492,_0x3aa0e4),_0x3aa0e4;},__metadata=this&&this[a238_0x5457f6(0x1b6)]||function(_0x217dde,_0x438e41){const _0x582ba3=a238_0x5457f6;if(typeof Reflect===_0x582ba3(0x1c6)&&typeof Reflect[_0x582ba3(0x19e)]===_0x582ba3(0x1b8))return Reflect[_0x582ba3(0x19e)](_0x217dde,_0x438e41);},__param=this&&this[a238_0x5457f6(0x1d1)]||function(_0x2e791d,_0x12a507){return function(_0x45f56e,_0x596481){_0x12a507(_0x45f56e,_0x596481,_0x2e791d);};};Object[a238_0x5457f6(0x1bb)](exports,a238_0x5457f6(0x197),{'value':!![]}),exports[a238_0x5457f6(0x1aa)]=void 0x0;const bad_request_error_1=require(a238_0x5457f6(0x1db)),not_found_error_1=require(a238_0x5457f6(0x1c7)),typedi_1=require(a238_0x5457f6(0x1d0)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a238_0x5457f6(0x1ba)),git_internal_1=require(a238_0x5457f6(0x1ad)),utils_1=require(a238_0x5457f6(0x1d5)),repo_class_1=require(a238_0x5457f6(0x1a9)),git_repo_service_1=require(a238_0x5457f6(0x1d2)),providers_tokens_1=require(a238_0x5457f6(0x192)),bitbucket_server_credentials_dto_1=require(a238_0x5457f6(0x1cd));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x351765,_0xf35d13){super(_0x351765),this['api']=_0x351765,this['project']=_0xf35d13['project'],this['credentials']=_0xf35d13;}async[a238_0x5457f6(0x1d9)](_0x5d1b9b){const _0x13d456=a238_0x5457f6;try{const _0x4d4947={'name':_0x5d1b9b['name'],'scmId':_0x13d456(0x1af),'defaultBranch':_0x5d1b9b[_0x13d456(0x199)],..._0x5d1b9b[_0x13d456(0x1ce)]||{}},_0x104b88=await this[_0x13d456(0x1d8)][_0x13d456(0x1b7)]('projects/'+this[_0x13d456(0x1c4)]+_0x13d456(0x1c8),_0x4d4947),_0x2cc13d=repo_class_1[_0x13d456(0x1c1)]['fromBitbucketServer'](_0x104b88,'',this[_0x13d456(0x193)],this[_0x13d456(0x1a3)]);return _0x5d1b9b[_0x13d456(0x196)]&&await git_internal_1[_0x13d456(0x1b4)]['createEmptyBranch'](_0x2cc13d,_0x5d1b9b[_0x13d456(0x199)]||_0x13d456(0x1d4),'',this[_0x13d456(0x1a3)]),this['getOne'](_0x2cc13d['name']);}catch(_0xa96f02){if(_0xa96f02 instanceof api_error_1[_0x13d456(0x1ab)])throw _0xa96f02;throw new bad_request_error_1[(_0x13d456(0x1cb))](_0xa96f02);}}async[a238_0x5457f6(0x1d7)](){const _0x13cd74=a238_0x5457f6;try{const _0x1a10bf=[];let _0x813f9;do{_0x813f9=await this[_0x13cd74(0x1d8)][_0x13cd74(0x1be)](_0x13cd74(0x1b2)+this[_0x13cd74(0x1c4)]+_0x13cd74(0x1c8),{'params':{'limit':0x64,'start':_0x813f9?_0x813f9['nextPageStart']:0x0}}),_0x1a10bf['push'](..._0x813f9[_0x13cd74(0x1a7)]);}while(!_0x813f9[_0x13cd74(0x1bd)]);return _0x1a10bf[_0x13cd74(0x1c5)](_0x50df95=>repo_class_1['Repo']['fromBitbucketServer'](_0x50df95,(0x0,utils_1['joinURL'])(this['request'][_0x13cd74(0x1a0)][_0x13cd74(0x1c0)]||'',_0x13cd74(0x1a5)+this[_0x13cd74(0x1c4)]+_0x13cd74(0x1d6)+_0x50df95[_0x13cd74(0x1b3)]),this[_0x13cd74(0x193)],this[_0x13cd74(0x1a3)]));}catch(_0x1d64e3){if(_0x1d64e3 instanceof api_error_1[_0x13cd74(0x1ab)])throw _0x1d64e3;throw new not_found_error_1[(_0x13cd74(0x1b9))](_0x1d64e3);}}async['getOne'](_0x3c2c2d){const _0x318496=a238_0x5457f6;var _0x250b91;try{const _0x229c81=await this[_0x318496(0x1d8)][_0x318496(0x1be)](_0x318496(0x1b2)+this[_0x318496(0x1c4)]+_0x318496(0x1d6)+_0x3c2c2d),_0xac082a=repo_class_1[_0x318496(0x1c1)][_0x318496(0x19c)](_0x229c81,(0x0,utils_1[_0x318496(0x1c9)])(this[_0x318496(0x1d8)][_0x318496(0x1a0)][_0x318496(0x1c0)]||'','/projects/'+this[_0x318496(0x1c4)]+'/repos/'+_0x3c2c2d),this[_0x318496(0x193)],this[_0x318496(0x1a3)]),_0x5f3c74=await this[_0x318496(0x1d8)][_0x318496(0x1be)](_0xac082a['apiUrl']+_0x318496(0x198))['then'](_0x3cc568=>_0x3cc568[_0x318496(0x1a7)]);return _0xac082a[_0x318496(0x199)]=(_0x250b91=_0x5f3c74[_0x318496(0x1bf)](_0x186866=>_0x186866[_0x318496(0x194)]===!![]))===null||_0x250b91===void 0x0?void 0x0:_0x250b91[_0x318496(0x1da)],_0xac082a;}catch(_0x3f3828){if(_0x3f3828 instanceof api_error_1['ApiError'])throw _0x3f3828;throw new not_found_error_1[(_0x318496(0x1b9))](_0x3f3828);}}async['update'](_0x5c7edf,_0x1903a2){const _0x40de86=a238_0x5457f6;try{const _0x1895f7=await this[_0x40de86(0x1d8)][_0x40de86(0x1b5)](_0x40de86(0x1b2)+this['project']+_0x40de86(0x1d6)+_0x5c7edf,_0x1903a2),_0x1278b2=await this[_0x40de86(0x1d8)][_0x40de86(0x1be)](_0x40de86(0x1b2)+this[_0x40de86(0x1c4)]+'/repos/'+_0x5c7edf+_0x40de86(0x19a)),_0x1ab767=repo_class_1[_0x40de86(0x1c1)]['fromBitbucketServer'](_0x1895f7,(0x0,utils_1[_0x40de86(0x1c9)])(this[_0x40de86(0x1d8)][_0x40de86(0x1a0)][_0x40de86(0x1c0)]||'',_0x40de86(0x1a5)+this[_0x40de86(0x1c4)]+_0x40de86(0x1d6)+_0x5c7edf),this[_0x40de86(0x193)],this['credentials']);return _0x1ab767[_0x40de86(0x199)]=_0x1278b2[_0x40de86(0x1da)],_0x1ab767;}catch(_0x54db1f){if(_0x54db1f instanceof api_error_1[_0x40de86(0x1ab)])throw _0x54db1f;throw new not_found_error_1[(_0x40de86(0x1b9))](_0x54db1f);}}async['delete'](_0xae05b6){const _0x11162a=a238_0x5457f6;try{await this[_0x11162a(0x1b1)](_0xae05b6),await this[_0x11162a(0x1d8)]['delete'](_0x11162a(0x1b2)+this[_0x11162a(0x1c4)]+_0x11162a(0x1d6)+_0xae05b6);}catch(_0x2fc1df){if(_0x2fc1df instanceof api_error_1[_0x11162a(0x1ab)])throw _0x2fc1df;throw new bad_request_error_1[(_0x11162a(0x1cb))](_0x2fc1df);}}};function a238_0x4dd3(_0x1a6970,_0x2732fc){const _0x15622e=a238_0x414a();return a238_0x4dd3=function(_0x354782,_0x471fd9){_0x354782=_0x354782-0x191;let _0x414a43=_0x15622e[_0x354782];return _0x414a43;},a238_0x4dd3(_0x1a6970,_0x2732fc);}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a238_0x5457f6(0x1cf)])(),__param(0x1,(0x0,typedi_1[a238_0x5457f6(0x1c2)])(providers_tokens_1['Tokens']['credentials'])),__metadata(a238_0x5457f6(0x1a6),[bitbucket_server_api_service_1[a238_0x5457f6(0x1a4)],bitbucket_server_credentials_dto_1[a238_0x5457f6(0x1b0)]])],BitbucketServerRepoService),exports[a238_0x5457f6(0x1aa)]=BitbucketServerRepoService;