const a167_0x5bc6f2=a167_0x4d1a;(function(_0x112394,_0x29e9e8){const _0x46503d=a167_0x4d1a,_0x3b4b91=_0x112394();while(!![]){try{const _0x355a3b=-parseInt(_0x46503d(0x1eb))/0x1+-parseInt(_0x46503d(0x1c4))/0x2+parseInt(_0x46503d(0x1a8))/0x3*(parseInt(_0x46503d(0x1c3))/0x4)+parseInt(_0x46503d(0x1c5))/0x5+parseInt(_0x46503d(0x1a5))/0x6+parseInt(_0x46503d(0x1cc))/0x7+-parseInt(_0x46503d(0x1e8))/0x8;if(_0x355a3b===_0x29e9e8)break;else _0x3b4b91['push'](_0x3b4b91['shift']());}catch(_0x419dca){_0x3b4b91['push'](_0x3b4b91['shift']());}}}(a167_0x4465,0x9bb0f));const a167_0x34d09c=(function(){let _0xd8e0f5=!![];return function(_0x1b97b8,_0x42cc42){const _0x5e320c=_0xd8e0f5?function(){if(_0x42cc42){const _0x288c0f=_0x42cc42['apply'](_0x1b97b8,arguments);return _0x42cc42=null,_0x288c0f;}}:function(){};return _0xd8e0f5=![],_0x5e320c;};}()),a167_0x8a01c0=a167_0x34d09c(this,function(){const _0x1285a7=a167_0x4d1a;return a167_0x8a01c0['toString']()[_0x1285a7(0x1ab)](_0x1285a7(0x1e1))[_0x1285a7(0x1bf)]()['constructor'](a167_0x8a01c0)[_0x1285a7(0x1ab)]('(((.+)+)+)+$');});a167_0x8a01c0();function a167_0x4d1a(_0x3a7b8b,_0x57e1b3){const _0xeda323=a167_0x4465();return a167_0x4d1a=function(_0x8a01c0,_0x34d09c){_0x8a01c0=_0x8a01c0-0x1a3;let _0x446559=_0xeda323[_0x8a01c0];return _0x446559;},a167_0x4d1a(_0x3a7b8b,_0x57e1b3);}'use strict';var __decorate=this&&this[a167_0x5bc6f2(0x1d7)]||function(_0x50191a,_0x22812e,_0x27a527,_0x4c7b31){const _0x5f5883=a167_0x5bc6f2;var _0x3bb962=arguments[_0x5f5883(0x1c7)],_0x497d47=_0x3bb962<0x3?_0x22812e:_0x4c7b31===null?_0x4c7b31=Object[_0x5f5883(0x1dc)](_0x22812e,_0x27a527):_0x4c7b31,_0x5894bf;if(typeof Reflect===_0x5f5883(0x1b7)&&typeof Reflect['decorate']===_0x5f5883(0x1e2))_0x497d47=Reflect[_0x5f5883(0x1e9)](_0x50191a,_0x22812e,_0x27a527,_0x4c7b31);else{for(var _0x2daccf=_0x50191a['length']-0x1;_0x2daccf>=0x0;_0x2daccf--)if(_0x5894bf=_0x50191a[_0x2daccf])_0x497d47=(_0x3bb962<0x3?_0x5894bf(_0x497d47):_0x3bb962>0x3?_0x5894bf(_0x22812e,_0x27a527,_0x497d47):_0x5894bf(_0x22812e,_0x27a527))||_0x497d47;}return _0x3bb962>0x3&&_0x497d47&&Object['defineProperty'](_0x22812e,_0x27a527,_0x497d47),_0x497d47;},__metadata=this&&this[a167_0x5bc6f2(0x1c2)]||function(_0x42352a,_0x201a87){const _0x336cc8=a167_0x5bc6f2;if(typeof Reflect===_0x336cc8(0x1b7)&&typeof Reflect['metadata']===_0x336cc8(0x1e2))return Reflect[_0x336cc8(0x1c9)](_0x42352a,_0x201a87);},__param=this&&this['__param']||function(_0x241962,_0x43be87){return function(_0x1a0f80,_0x4a12ae){_0x43be87(_0x1a0f80,_0x4a12ae,_0x241962);};};Object['defineProperty'](exports,a167_0x5bc6f2(0x1d3),{'value':!![]}),exports[a167_0x5bc6f2(0x1ba)]=void 0x0;const bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a167_0x5bc6f2(0x1a3)),api_error_1=require(a167_0x5bc6f2(0x1b5)),bitbucket_server_api_service_1=require(a167_0x5bc6f2(0x1b6)),git_internal_1=require('../../../internal/git.internal'),utils_1=require('../../../../shared/utils'),repo_class_1=require('../repo.class'),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a167_0x5bc6f2(0x1aa)),bitbucket_server_credentials_dto_1=require(a167_0x5bc6f2(0x1a7));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a167_0x5bc6f2(0x1be)]{constructor(_0x5f1e24,_0x2d1b51){const _0x5502e8=a167_0x5bc6f2;super(_0x5f1e24),this[_0x5502e8(0x1c8)]=_0x5f1e24,this[_0x5502e8(0x1e0)]=_0x2d1b51[_0x5502e8(0x1e0)],this[_0x5502e8(0x1db)]=_0x2d1b51;}async[a167_0x5bc6f2(0x1cb)](_0x48e034){const _0x2a38ca=a167_0x5bc6f2;try{const _0x563fde={'name':_0x48e034[_0x2a38ca(0x1ea)],'scmId':_0x2a38ca(0x1ce),'defaultBranch':_0x48e034[_0x2a38ca(0x1c1)],..._0x48e034[_0x2a38ca(0x1d6)]||{}},_0x5d565f=await this[_0x2a38ca(0x1ad)][_0x2a38ca(0x1a4)](_0x2a38ca(0x1af)+this['project']+_0x2a38ca(0x1b1),_0x563fde),_0xcccbe9=repo_class_1[_0x2a38ca(0x1d4)]['fromBitbucketServer'](_0x5d565f,'',this['api'],this[_0x2a38ca(0x1db)]);return _0x48e034[_0x2a38ca(0x1a9)]&&await git_internal_1[_0x2a38ca(0x1bd)][_0x2a38ca(0x1de)](_0xcccbe9,_0x48e034[_0x2a38ca(0x1c1)]||_0x2a38ca(0x1cd),'',this[_0x2a38ca(0x1db)]),this[_0x2a38ca(0x1d0)](_0xcccbe9[_0x2a38ca(0x1ea)]);}catch(_0x37d44f){if(_0x37d44f instanceof api_error_1[_0x2a38ca(0x1e7)])throw _0x37d44f;throw new bad_request_error_1['BadRequestError'](_0x37d44f);}}async['getAll'](){const _0x150085=a167_0x5bc6f2;try{const _0x547a98=[];let _0x2e2093;do{_0x2e2093=await this[_0x150085(0x1ad)][_0x150085(0x1ae)](_0x150085(0x1af)+this[_0x150085(0x1e0)]+'/repos',{'params':{'limit':0x64,'start':_0x2e2093?_0x2e2093['nextPageStart']:0x0}}),_0x547a98[_0x150085(0x1d2)](..._0x2e2093['values']);}while(!_0x2e2093[_0x150085(0x1ca)]);return _0x547a98[_0x150085(0x1d8)](_0xd4a19a=>repo_class_1[_0x150085(0x1d4)][_0x150085(0x1e3)](_0xd4a19a,(0x0,utils_1[_0x150085(0x1b8)])(this[_0x150085(0x1ad)]['defaults'][_0x150085(0x1a6)]||'',_0x150085(0x1bc)+this['project']+_0x150085(0x1b0)+_0xd4a19a[_0x150085(0x1c0)]),this[_0x150085(0x1c8)],this[_0x150085(0x1db)]));}catch(_0xa29c56){if(_0xa29c56 instanceof api_error_1[_0x150085(0x1e7)])throw _0xa29c56;throw new not_found_error_1[(_0x150085(0x1d1))](_0xa29c56);}}async[a167_0x5bc6f2(0x1d0)](_0x2c1ea2){const _0xeded1=a167_0x5bc6f2;var _0x113de2;try{const _0x53d85b=await this['request'][_0xeded1(0x1ae)](_0xeded1(0x1af)+this['project']+'/repos/'+_0x2c1ea2),_0x4ff9aa=repo_class_1['Repo']['fromBitbucketServer'](_0x53d85b,(0x0,utils_1[_0xeded1(0x1b8)])(this[_0xeded1(0x1ad)][_0xeded1(0x1d5)][_0xeded1(0x1a6)]||'',_0xeded1(0x1bc)+this['project']+_0xeded1(0x1b0)+_0x2c1ea2),this[_0xeded1(0x1c8)],this['credentials']),_0x5a44a8=await this['request']['get'](_0x4ff9aa[_0xeded1(0x1dd)]+_0xeded1(0x1b4))[_0xeded1(0x1e4)](_0x41d005=>_0x41d005['values']);return _0x4ff9aa[_0xeded1(0x1c1)]=(_0x113de2=_0x5a44a8[_0xeded1(0x1e5)](_0x1c8a91=>_0x1c8a91[_0xeded1(0x1df)]===!![]))===null||_0x113de2===void 0x0?void 0x0:_0x113de2['displayId'],_0x4ff9aa;}catch(_0xd73b51){if(_0xd73b51 instanceof api_error_1[_0xeded1(0x1e7)])throw _0xd73b51;throw new not_found_error_1[(_0xeded1(0x1d1))](_0xd73b51);}}async[a167_0x5bc6f2(0x1c6)](_0x5f2b06,_0x1418e9){const _0x49b405=a167_0x5bc6f2;try{const _0x199cdf=await this['request']['put'](_0x49b405(0x1af)+this[_0x49b405(0x1e0)]+_0x49b405(0x1b0)+_0x5f2b06,_0x1418e9),_0x54fa3f=await this['request'][_0x49b405(0x1ae)](_0x49b405(0x1af)+this[_0x49b405(0x1e0)]+'/repos/'+_0x5f2b06+_0x49b405(0x1e6)),_0x2395c3=repo_class_1[_0x49b405(0x1d4)][_0x49b405(0x1e3)](_0x199cdf,(0x0,utils_1[_0x49b405(0x1b8)])(this[_0x49b405(0x1ad)][_0x49b405(0x1d5)][_0x49b405(0x1a6)]||'',_0x49b405(0x1bc)+this[_0x49b405(0x1e0)]+_0x49b405(0x1b0)+_0x5f2b06),this[_0x49b405(0x1c8)],this[_0x49b405(0x1db)]);return _0x2395c3[_0x49b405(0x1c1)]=_0x54fa3f['displayId'],_0x2395c3;}catch(_0x3e0d04){if(_0x3e0d04 instanceof api_error_1[_0x49b405(0x1e7)])throw _0x3e0d04;throw new not_found_error_1[(_0x49b405(0x1d1))](_0x3e0d04);}}async[a167_0x5bc6f2(0x1ac)](_0x326309){const _0x1003ce=a167_0x5bc6f2;try{await this[_0x1003ce(0x1d0)](_0x326309),await this[_0x1003ce(0x1ad)][_0x1003ce(0x1ac)](_0x1003ce(0x1af)+this[_0x1003ce(0x1e0)]+_0x1003ce(0x1b0)+_0x326309);}catch(_0xdd6095){if(_0xdd6095 instanceof api_error_1[_0x1003ce(0x1e7)])throw _0xdd6095;throw new bad_request_error_1[(_0x1003ce(0x1b9))](_0xdd6095);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a167_0x5bc6f2(0x1da)])(),__param(0x1,(0x0,typedi_1[a167_0x5bc6f2(0x1b2)])(providers_tokens_1[a167_0x5bc6f2(0x1bb)][a167_0x5bc6f2(0x1db)])),__metadata(a167_0x5bc6f2(0x1cf),[bitbucket_server_api_service_1[a167_0x5bc6f2(0x1b3)],bitbucket_server_credentials_dto_1[a167_0x5bc6f2(0x1d9)]])],BitbucketServerRepoService),exports[a167_0x5bc6f2(0x1ba)]=BitbucketServerRepoService;function a167_0x4465(){const _0x312eae=['update','length','api','metadata','isLastPage','create','3572100UhNOWb','master','git','design:paramtypes','getOne','NotFoundError','push','__esModule','Repo','defaults','apiBody','__decorate','map','BitbucketServerCredentialsDto','Service','credentials','getOwnPropertyDescriptor','apiUrl','createEmptyBranch','isDefault','project','(((.+)+)+)+$','function','fromBitbucketServer','then','find','/default-branch','ApiError','861416AzWyLE','decorate','name','633509UjyVDr','typedi','post','1954806xDNrOH','baseURL','../../credentials/dto/bitbucket-server-credentials.dto','9561duMIpR','autoInit','../../providers.tokens','search','delete','request','get','projects/','/repos/','/repos','Inject','BitbucketServerApiService','/branches','../../../../../core/errors/api.error','../../api/bitbucket-server-api.service','object','joinURL','BadRequestError','BitbucketServerRepoService','Tokens','/projects/','Git','GitRepoService','toString','slug','defaultBranch','__metadata','1108iTUQWV','2047738yZNIEv','3419330KTAJeC'];a167_0x4465=function(){return _0x312eae;};return a167_0x4465();}