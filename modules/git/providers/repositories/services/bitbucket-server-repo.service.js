const a200_0x5a7b3a=a200_0x2bd4;(function(_0x15d8e6,_0x43d2ec){const _0x39ab3b=a200_0x2bd4,_0xa5d270=_0x15d8e6();while(!![]){try{const _0x50cfd8=-parseInt(_0x39ab3b(0xa9))/0x1+parseInt(_0x39ab3b(0xb4))/0x2*(parseInt(_0x39ab3b(0xe1))/0x3)+-parseInt(_0x39ab3b(0xa8))/0x4+parseInt(_0x39ab3b(0xc0))/0x5+parseInt(_0x39ab3b(0xda))/0x6*(-parseInt(_0x39ab3b(0xeb))/0x7)+-parseInt(_0x39ab3b(0xdb))/0x8*(-parseInt(_0x39ab3b(0xb1))/0x9)+-parseInt(_0x39ab3b(0xe0))/0xa*(parseInt(_0x39ab3b(0xcf))/0xb);if(_0x50cfd8===_0x43d2ec)break;else _0xa5d270['push'](_0xa5d270['shift']());}catch(_0x60cd9d){_0xa5d270['push'](_0xa5d270['shift']());}}}(a200_0x4e79,0x55263));function a200_0x4e79(){const _0x5899de=['/default-branch','git','name','then','getOwnPropertyDescriptor','createEmptyBranch','../../../internal/git.internal','2032005dwwIPg','getOne','apiUrl','put','__esModule','push','../repo.class','defaults','../../credentials/dto/bitbucket-server-credentials.dto','Repo','slug','GitRepoService','defaultBranch','api','BitbucketServerCredentialsDto','1985951fReQcF','find','../../../../../core/errors/not-found.error','NotFoundError','defineProperty','isDefault','credentials','/projects/','__decorate','/repos','length','1147506mdwYXn','3593048zfkWft','toString','Tokens','values','./git-repo.service','10OkeJhw','471CVQQiw','joinURL','(((.+)+)+)+$','design:paramtypes','../../../../shared/utils','BadRequestError','../../api/bitbucket-server-api.service','/repos/','fromBitbucketServer','apiBody','7PtfQhl','../../../../../core/errors/bad-request.error','__metadata','map','BitbucketServerRepoService','Service','projects/','BitbucketServerApiService','delete','decorate','object','ApiError','1121436CSBnkE','421851sJWZOR','constructor','search','function','post','baseURL','autoInit','apply','9CPVtpb','create','project','7226hBZrkN','nextPageStart','get','request','displayId'];a200_0x4e79=function(){return _0x5899de;};return a200_0x4e79();}const a200_0x4a14d5=(function(){let _0x94234c=!![];return function(_0x28c0d1,_0x46e757){const _0x3417cf=_0x94234c?function(){const _0x1204bd=a200_0x2bd4;if(_0x46e757){const _0x5bebc0=_0x46e757[_0x1204bd(0xb0)](_0x28c0d1,arguments);return _0x46e757=null,_0x5bebc0;}}:function(){};return _0x94234c=![],_0x3417cf;};}()),a200_0x525c17=a200_0x4a14d5(this,function(){const _0x1146db=a200_0x2bd4;return a200_0x525c17['toString']()[_0x1146db(0xab)](_0x1146db(0xe3))[_0x1146db(0xdc)]()[_0x1146db(0xaa)](a200_0x525c17)['search']('(((.+)+)+)+$');});a200_0x525c17();'use strict';var __decorate=this&&this[a200_0x5a7b3a(0xd7)]||function(_0x2acfb7,_0x3b5c26,_0x5260c,_0xee2093){const _0x5ddc4c=a200_0x5a7b3a;var _0x47b390=arguments[_0x5ddc4c(0xd9)],_0x4d17f6=_0x47b390<0x3?_0x3b5c26:_0xee2093===null?_0xee2093=Object[_0x5ddc4c(0xbd)](_0x3b5c26,_0x5260c):_0xee2093,_0x391ba4;if(typeof Reflect===_0x5ddc4c(0xa6)&&typeof Reflect[_0x5ddc4c(0xa5)]===_0x5ddc4c(0xac))_0x4d17f6=Reflect[_0x5ddc4c(0xa5)](_0x2acfb7,_0x3b5c26,_0x5260c,_0xee2093);else{for(var _0x3c1075=_0x2acfb7[_0x5ddc4c(0xd9)]-0x1;_0x3c1075>=0x0;_0x3c1075--)if(_0x391ba4=_0x2acfb7[_0x3c1075])_0x4d17f6=(_0x47b390<0x3?_0x391ba4(_0x4d17f6):_0x47b390>0x3?_0x391ba4(_0x3b5c26,_0x5260c,_0x4d17f6):_0x391ba4(_0x3b5c26,_0x5260c))||_0x4d17f6;}return _0x47b390>0x3&&_0x4d17f6&&Object[_0x5ddc4c(0xd3)](_0x3b5c26,_0x5260c,_0x4d17f6),_0x4d17f6;},__metadata=this&&this[a200_0x5a7b3a(0x9e)]||function(_0x5b1958,_0x352c34){const _0x4072a3=a200_0x5a7b3a;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x4072a3(0xac))return Reflect['metadata'](_0x5b1958,_0x352c34);},__param=this&&this['__param']||function(_0x4d84e0,_0x44179b){return function(_0x77646e,_0x51b873){_0x44179b(_0x77646e,_0x51b873,_0x4d84e0);};};Object['defineProperty'](exports,a200_0x5a7b3a(0xc4),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;function a200_0x2bd4(_0x5172f4,_0x236dc5){const _0x13ffef=a200_0x4e79();return a200_0x2bd4=function(_0x525c17,_0x4a14d5){_0x525c17=_0x525c17-0x9e;let _0x4e797d=_0x13ffef[_0x525c17];return _0x4e797d;},a200_0x2bd4(_0x5172f4,_0x236dc5);}const bad_request_error_1=require(a200_0x5a7b3a(0xec)),not_found_error_1=require(a200_0x5a7b3a(0xd1)),typedi_1=require('typedi'),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a200_0x5a7b3a(0xe7)),git_internal_1=require(a200_0x5a7b3a(0xbf)),utils_1=require(a200_0x5a7b3a(0xe5)),repo_class_1=require(a200_0x5a7b3a(0xc6)),git_repo_service_1=require(a200_0x5a7b3a(0xdf)),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require(a200_0x5a7b3a(0xc8));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a200_0x5a7b3a(0xcb)]{constructor(_0x5e47d2,_0x2e7df7){const _0x169a62=a200_0x5a7b3a;super(_0x5e47d2),this[_0x169a62(0xcd)]=_0x5e47d2,this[_0x169a62(0xb3)]=_0x2e7df7[_0x169a62(0xb3)],this['credentials']=_0x2e7df7;}async[a200_0x5a7b3a(0xb2)](_0x11dadd){const _0x1acd2b=a200_0x5a7b3a;try{const _0x486e47={'name':_0x11dadd[_0x1acd2b(0xbb)],'scmId':_0x1acd2b(0xba),'defaultBranch':_0x11dadd['defaultBranch'],..._0x11dadd[_0x1acd2b(0xea)]||{}},_0x5886e1=await this['request'][_0x1acd2b(0xad)](_0x1acd2b(0xa2)+this[_0x1acd2b(0xb3)]+_0x1acd2b(0xd8),_0x486e47),_0x431bec=repo_class_1['Repo'][_0x1acd2b(0xe9)](_0x5886e1,'',this[_0x1acd2b(0xcd)],this[_0x1acd2b(0xd5)]);return _0x11dadd[_0x1acd2b(0xaf)]&&await git_internal_1['Git'][_0x1acd2b(0xbe)](_0x431bec,_0x11dadd['defaultBranch']||'master','',this[_0x1acd2b(0xd5)]),this[_0x1acd2b(0xc1)](_0x431bec[_0x1acd2b(0xbb)]);}catch(_0x5c2aba){if(_0x5c2aba instanceof api_error_1[_0x1acd2b(0xa7)])throw _0x5c2aba;throw new bad_request_error_1[(_0x1acd2b(0xe6))](_0x5c2aba);}}async['getAll'](){const _0x48920d=a200_0x5a7b3a;try{const _0x1cbe7b=[];let _0x73ce79;do{_0x73ce79=await this[_0x48920d(0xb7)][_0x48920d(0xb6)]('projects/'+this[_0x48920d(0xb3)]+_0x48920d(0xd8),{'params':{'limit':0x64,'start':_0x73ce79?_0x73ce79[_0x48920d(0xb5)]:0x0}}),_0x1cbe7b[_0x48920d(0xc5)](..._0x73ce79[_0x48920d(0xde)]);}while(!_0x73ce79['isLastPage']);return _0x1cbe7b[_0x48920d(0x9f)](_0x304238=>repo_class_1['Repo']['fromBitbucketServer'](_0x304238,(0x0,utils_1[_0x48920d(0xe2)])(this[_0x48920d(0xb7)][_0x48920d(0xc7)]['baseURL']||'','/projects/'+this['project']+'/repos/'+_0x304238[_0x48920d(0xca)]),this['api'],this['credentials']));}catch(_0x598a65){if(_0x598a65 instanceof api_error_1['ApiError'])throw _0x598a65;throw new not_found_error_1['NotFoundError'](_0x598a65);}}async[a200_0x5a7b3a(0xc1)](_0x123c8c){const _0x1e24d9=a200_0x5a7b3a;var _0x1b1bd2;try{const _0x544995=await this[_0x1e24d9(0xb7)][_0x1e24d9(0xb6)](_0x1e24d9(0xa2)+this[_0x1e24d9(0xb3)]+_0x1e24d9(0xe8)+_0x123c8c),_0x5a3a26=repo_class_1[_0x1e24d9(0xc9)][_0x1e24d9(0xe9)](_0x544995,(0x0,utils_1[_0x1e24d9(0xe2)])(this[_0x1e24d9(0xb7)]['defaults'][_0x1e24d9(0xae)]||'',_0x1e24d9(0xd6)+this[_0x1e24d9(0xb3)]+'/repos/'+_0x123c8c),this['api'],this[_0x1e24d9(0xd5)]),_0x3f8e8d=await this['request'][_0x1e24d9(0xb6)](_0x5a3a26[_0x1e24d9(0xc2)]+'/branches')[_0x1e24d9(0xbc)](_0x5b25dc=>_0x5b25dc[_0x1e24d9(0xde)]);return _0x5a3a26[_0x1e24d9(0xcc)]=(_0x1b1bd2=_0x3f8e8d[_0x1e24d9(0xd0)](_0x19e757=>_0x19e757[_0x1e24d9(0xd4)]===!![]))===null||_0x1b1bd2===void 0x0?void 0x0:_0x1b1bd2[_0x1e24d9(0xb8)],_0x5a3a26;}catch(_0x3b30ff){if(_0x3b30ff instanceof api_error_1['ApiError'])throw _0x3b30ff;throw new not_found_error_1[(_0x1e24d9(0xd2))](_0x3b30ff);}}async['update'](_0x56f8ca,_0x140aab){const _0x23acd1=a200_0x5a7b3a;try{const _0x4a2390=await this['request'][_0x23acd1(0xc3)]('projects/'+this['project']+'/repos/'+_0x56f8ca,_0x140aab),_0x331eee=await this[_0x23acd1(0xb7)][_0x23acd1(0xb6)](_0x23acd1(0xa2)+this[_0x23acd1(0xb3)]+_0x23acd1(0xe8)+_0x56f8ca+_0x23acd1(0xb9)),_0x4b11bf=repo_class_1[_0x23acd1(0xc9)][_0x23acd1(0xe9)](_0x4a2390,(0x0,utils_1[_0x23acd1(0xe2)])(this[_0x23acd1(0xb7)]['defaults'][_0x23acd1(0xae)]||'',_0x23acd1(0xd6)+this['project']+_0x23acd1(0xe8)+_0x56f8ca),this[_0x23acd1(0xcd)],this[_0x23acd1(0xd5)]);return _0x4b11bf[_0x23acd1(0xcc)]=_0x331eee[_0x23acd1(0xb8)],_0x4b11bf;}catch(_0x36b31b){if(_0x36b31b instanceof api_error_1['ApiError'])throw _0x36b31b;throw new not_found_error_1[(_0x23acd1(0xd2))](_0x36b31b);}}async[a200_0x5a7b3a(0xa4)](_0x11b85f){const _0x5e5120=a200_0x5a7b3a;try{await this['getOne'](_0x11b85f),await this[_0x5e5120(0xb7)][_0x5e5120(0xa4)](_0x5e5120(0xa2)+this[_0x5e5120(0xb3)]+_0x5e5120(0xe8)+_0x11b85f);}catch(_0x26a738){if(_0x26a738 instanceof api_error_1[_0x5e5120(0xa7)])throw _0x26a738;throw new bad_request_error_1[(_0x5e5120(0xe6))](_0x26a738);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a200_0x5a7b3a(0xa1)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a200_0x5a7b3a(0xdd)][a200_0x5a7b3a(0xd5)])),__metadata(a200_0x5a7b3a(0xe4),[bitbucket_server_api_service_1[a200_0x5a7b3a(0xa3)],bitbucket_server_credentials_dto_1[a200_0x5a7b3a(0xce)]])],BitbucketServerRepoService),exports[a200_0x5a7b3a(0xa0)]=BitbucketServerRepoService;