const a206_0xacfbd1=a206_0x3464;(function(_0x2b7f7c,_0x422a2f){const _0x2c1b75=a206_0x3464,_0x5586c1=_0x2b7f7c();while(!![]){try{const _0x2ad737=parseInt(_0x2c1b75(0x13f))/0x1+-parseInt(_0x2c1b75(0x10c))/0x2*(-parseInt(_0x2c1b75(0x12f))/0x3)+-parseInt(_0x2c1b75(0x12b))/0x4+parseInt(_0x2c1b75(0x112))/0x5+parseInt(_0x2c1b75(0x140))/0x6*(-parseInt(_0x2c1b75(0x119))/0x7)+parseInt(_0x2c1b75(0x114))/0x8*(-parseInt(_0x2c1b75(0x130))/0x9)+-parseInt(_0x2c1b75(0x116))/0xa*(parseInt(_0x2c1b75(0x109))/0xb);if(_0x2ad737===_0x422a2f)break;else _0x5586c1['push'](_0x5586c1['shift']());}catch(_0x2bbc33){_0x5586c1['push'](_0x5586c1['shift']());}}}(a206_0x2acd,0x82ca3));const a206_0x4eb022=(function(){let _0x1f8f72=!![];return function(_0x233df2,_0x247cd1){const _0x2898b8=_0x1f8f72?function(){if(_0x247cd1){const _0x3cbd8e=_0x247cd1['apply'](_0x233df2,arguments);return _0x247cd1=null,_0x3cbd8e;}}:function(){};return _0x1f8f72=![],_0x2898b8;};}()),a206_0x1d1c92=a206_0x4eb022(this,function(){const _0x5bdba5=a206_0x3464;return a206_0x1d1c92['toString']()[_0x5bdba5(0x115)](_0x5bdba5(0x108))['toString']()['constructor'](a206_0x1d1c92)[_0x5bdba5(0x115)](_0x5bdba5(0x108));});a206_0x1d1c92();function a206_0x3464(_0x32c5b1,_0x456653){const _0xd806c1=a206_0x2acd();return a206_0x3464=function(_0x1d1c92,_0x4eb022){_0x1d1c92=_0x1d1c92-0xf5;let _0x2acd77=_0xd806c1[_0x1d1c92];return _0x2acd77;},a206_0x3464(_0x32c5b1,_0x456653);}'use strict';var __decorate=this&&this[a206_0xacfbd1(0x11a)]||function(_0x35c68d,_0xcb2ce7,_0x3827df,_0x5ab746){const _0x261458=a206_0xacfbd1;var _0x1c56e4=arguments[_0x261458(0x134)],_0x1adb37=_0x1c56e4<0x3?_0xcb2ce7:_0x5ab746===null?_0x5ab746=Object[_0x261458(0x11e)](_0xcb2ce7,_0x3827df):_0x5ab746,_0xef0b2f;if(typeof Reflect===_0x261458(0x129)&&typeof Reflect[_0x261458(0x10b)]===_0x261458(0x104))_0x1adb37=Reflect['decorate'](_0x35c68d,_0xcb2ce7,_0x3827df,_0x5ab746);else{for(var _0x17399d=_0x35c68d[_0x261458(0x134)]-0x1;_0x17399d>=0x0;_0x17399d--)if(_0xef0b2f=_0x35c68d[_0x17399d])_0x1adb37=(_0x1c56e4<0x3?_0xef0b2f(_0x1adb37):_0x1c56e4>0x3?_0xef0b2f(_0xcb2ce7,_0x3827df,_0x1adb37):_0xef0b2f(_0xcb2ce7,_0x3827df))||_0x1adb37;}return _0x1c56e4>0x3&&_0x1adb37&&Object['defineProperty'](_0xcb2ce7,_0x3827df,_0x1adb37),_0x1adb37;},__metadata=this&&this[a206_0xacfbd1(0x11c)]||function(_0xb3c82d,_0x1861d2){const _0x5e59ee=a206_0xacfbd1;if(typeof Reflect==='object'&&typeof Reflect[_0x5e59ee(0xfb)]===_0x5e59ee(0x104))return Reflect[_0x5e59ee(0xfb)](_0xb3c82d,_0x1861d2);},__param=this&&this['__param']||function(_0x31b4e6,_0x45da2e){return function(_0x153a6c,_0x42882b){_0x45da2e(_0x153a6c,_0x42882b,_0x31b4e6);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a206_0xacfbd1(0x117)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a206_0xacfbd1(0x13c)),api_error_1=require(a206_0xacfbd1(0x13e)),bitbucket_server_api_service_1=require(a206_0xacfbd1(0xff)),git_internal_1=require(a206_0xacfbd1(0xfd)),utils_1=require(a206_0xacfbd1(0x118)),repo_class_1=require('../repo.class'),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a206_0xacfbd1(0x127)),bitbucket_server_credentials_dto_1=require(a206_0xacfbd1(0x13a));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a206_0xacfbd1(0x125)]{constructor(_0x590db7,_0x24ebfd){const _0x1cd00c=a206_0xacfbd1;super(_0x590db7),this[_0x1cd00c(0xf5)]=_0x590db7,this['project']=_0x24ebfd['project'],this[_0x1cd00c(0x131)]=_0x24ebfd;}async[a206_0xacfbd1(0xf8)](_0x403c9f){const _0x19428a=a206_0xacfbd1;try{const _0x50c2b2={'name':_0x403c9f[_0x19428a(0x102)],'scmId':'git','defaultBranch':_0x403c9f[_0x19428a(0x10d)],..._0x403c9f[_0x19428a(0x110)]||{}},_0x21f03f=await this['request'][_0x19428a(0x128)](_0x19428a(0x11b)+this[_0x19428a(0xfa)]+'/repos',_0x50c2b2),_0x159d75=repo_class_1[_0x19428a(0x101)][_0x19428a(0x12c)](_0x21f03f,'',this[_0x19428a(0xf5)],this['credentials']);return _0x403c9f[_0x19428a(0x120)]&&await git_internal_1[_0x19428a(0x126)][_0x19428a(0x141)](_0x159d75,_0x403c9f[_0x19428a(0x10d)]||_0x19428a(0x121),'',this['credentials']),this[_0x19428a(0x11f)](_0x159d75['name']);}catch(_0x4b2053){if(_0x4b2053 instanceof api_error_1[_0x19428a(0x12d)])throw _0x4b2053;throw new bad_request_error_1[(_0x19428a(0xf6))](_0x4b2053);}}async[a206_0xacfbd1(0x113)](){const _0xbd0ab4=a206_0xacfbd1;try{const _0x8e7aeb=[];let _0x4bc677;do{_0x4bc677=await this[_0xbd0ab4(0x135)][_0xbd0ab4(0x132)](_0xbd0ab4(0x11b)+this['project']+_0xbd0ab4(0x13b),{'params':{'limit':0x64,'start':_0x4bc677?_0x4bc677[_0xbd0ab4(0x124)]:0x0}}),_0x8e7aeb[_0xbd0ab4(0x138)](..._0x4bc677[_0xbd0ab4(0x103)]);}while(!_0x4bc677[_0xbd0ab4(0xf7)]);return _0x8e7aeb['map'](_0x2e073d=>repo_class_1[_0xbd0ab4(0x101)][_0xbd0ab4(0x12c)](_0x2e073d,(0x0,utils_1[_0xbd0ab4(0x122)])(this[_0xbd0ab4(0x135)][_0xbd0ab4(0x10a)][_0xbd0ab4(0x123)]||'',_0xbd0ab4(0x10f)+this[_0xbd0ab4(0xfa)]+_0xbd0ab4(0x10e)+_0x2e073d[_0xbd0ab4(0x111)]),this[_0xbd0ab4(0xf5)],this[_0xbd0ab4(0x131)]));}catch(_0x58e7c2){if(_0x58e7c2 instanceof api_error_1[_0xbd0ab4(0x12d)])throw _0x58e7c2;throw new not_found_error_1[(_0xbd0ab4(0xf9))](_0x58e7c2);}}async[a206_0xacfbd1(0x11f)](_0x504b69){const _0x291334=a206_0xacfbd1;var _0x385253;try{const _0x469a3b=await this['request']['get']('projects/'+this[_0x291334(0xfa)]+_0x291334(0x10e)+_0x504b69),_0x1a21b0=repo_class_1[_0x291334(0x101)][_0x291334(0x12c)](_0x469a3b,(0x0,utils_1['joinURL'])(this['request'][_0x291334(0x10a)][_0x291334(0x123)]||'',_0x291334(0x10f)+this[_0x291334(0xfa)]+_0x291334(0x10e)+_0x504b69),this[_0x291334(0xf5)],this['credentials']),_0x218e1c=await this[_0x291334(0x135)][_0x291334(0x132)](_0x1a21b0[_0x291334(0x13d)]+_0x291334(0x106))[_0x291334(0x105)](_0x132268=>_0x132268[_0x291334(0x103)]);return _0x1a21b0[_0x291334(0x10d)]=(_0x385253=_0x218e1c[_0x291334(0x107)](_0x46d350=>_0x46d350['isDefault']===!![]))===null||_0x385253===void 0x0?void 0x0:_0x385253[_0x291334(0x100)],_0x1a21b0;}catch(_0x115b63){if(_0x115b63 instanceof api_error_1['ApiError'])throw _0x115b63;throw new not_found_error_1[(_0x291334(0xf9))](_0x115b63);}}async['update'](_0x3f6f4e,_0x56a675){const _0x48ae91=a206_0xacfbd1;try{const _0x41ce47=await this[_0x48ae91(0x135)][_0x48ae91(0x136)](_0x48ae91(0x11b)+this['project']+_0x48ae91(0x10e)+_0x3f6f4e,_0x56a675),_0x36ac57=await this[_0x48ae91(0x135)][_0x48ae91(0x132)](_0x48ae91(0x11b)+this[_0x48ae91(0xfa)]+_0x48ae91(0x10e)+_0x3f6f4e+_0x48ae91(0xfe)),_0x382b46=repo_class_1[_0x48ae91(0x101)][_0x48ae91(0x12c)](_0x41ce47,(0x0,utils_1[_0x48ae91(0x122)])(this[_0x48ae91(0x135)][_0x48ae91(0x10a)]['baseURL']||'','/projects/'+this[_0x48ae91(0xfa)]+_0x48ae91(0x10e)+_0x3f6f4e),this[_0x48ae91(0xf5)],this['credentials']);return _0x382b46[_0x48ae91(0x10d)]=_0x36ac57[_0x48ae91(0x100)],_0x382b46;}catch(_0x4a19f8){if(_0x4a19f8 instanceof api_error_1[_0x48ae91(0x12d)])throw _0x4a19f8;throw new not_found_error_1[(_0x48ae91(0xf9))](_0x4a19f8);}}async[a206_0xacfbd1(0x142)](_0x31815b){const _0x2489d8=a206_0xacfbd1;try{await this[_0x2489d8(0x11f)](_0x31815b),await this[_0x2489d8(0x135)]['delete'](_0x2489d8(0x11b)+this[_0x2489d8(0xfa)]+_0x2489d8(0x10e)+_0x31815b);}catch(_0x26f67b){if(_0x26f67b instanceof api_error_1[_0x2489d8(0x12d)])throw _0x26f67b;throw new bad_request_error_1[(_0x2489d8(0xf6))](_0x26f67b);}}};function a206_0x2acd(){const _0xadabb5=['../../../../../core/errors/api.error','442321tFZlXZ','30cLHdWV','createEmptyBranch','delete','api','BadRequestError','isLastPage','create','NotFoundError','project','metadata','Tokens','../../../internal/git.internal','/default-branch','../../api/bitbucket-server-api.service','displayId','Repo','name','values','function','then','/branches','find','(((.+)+)+)+$','12001zYULNr','defaults','decorate','2SXRSct','defaultBranch','/repos/','/projects/','apiBody','slug','1650830dIMSyg','getAll','8576vmsbhq','search','1450ixYHkc','../../../../../core/errors/bad-request.error','../../../../shared/utils','258139kmBbMc','__decorate','projects/','__metadata','design:paramtypes','getOwnPropertyDescriptor','getOne','autoInit','master','joinURL','baseURL','nextPageStart','GitRepoService','Git','../../providers.tokens','post','object','BitbucketServerCredentialsDto','366780mqteQC','fromBitbucketServer','ApiError','BitbucketServerRepoService','3091341JevxBi','6993FWZmZb','credentials','get','BitbucketServerApiService','length','request','put','Inject','push','Service','../../credentials/dto/bitbucket-server-credentials.dto','/repos','typedi','apiUrl'];a206_0x2acd=function(){return _0xadabb5;};return a206_0x2acd();}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a206_0xacfbd1(0x139)])(),__param(0x1,(0x0,typedi_1[a206_0xacfbd1(0x137)])(providers_tokens_1[a206_0xacfbd1(0xfc)][a206_0xacfbd1(0x131)])),__metadata(a206_0xacfbd1(0x11d),[bitbucket_server_api_service_1[a206_0xacfbd1(0x133)],bitbucket_server_credentials_dto_1[a206_0xacfbd1(0x12a)]])],BitbucketServerRepoService),exports[a206_0xacfbd1(0x12e)]=BitbucketServerRepoService;