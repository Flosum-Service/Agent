const a237_0x237dcc=a237_0x2d10;(function(_0x155e88,_0x4d99f1){const _0x48926d=a237_0x2d10,_0x881282=_0x155e88();while(!![]){try{const _0x26d1ee=parseInt(_0x48926d(0xf3))/0x1*(parseInt(_0x48926d(0xfe))/0x2)+-parseInt(_0x48926d(0xc6))/0x3*(parseInt(_0x48926d(0xe1))/0x4)+parseInt(_0x48926d(0xc9))/0x5*(-parseInt(_0x48926d(0xec))/0x6)+parseInt(_0x48926d(0xfc))/0x7+parseInt(_0x48926d(0xe4))/0x8*(-parseInt(_0x48926d(0xbe))/0x9)+parseInt(_0x48926d(0xe6))/0xa+-parseInt(_0x48926d(0xdd))/0xb*(-parseInt(_0x48926d(0xfd))/0xc);if(_0x26d1ee===_0x4d99f1)break;else _0x881282['push'](_0x881282['shift']());}catch(_0xc7167d){_0x881282['push'](_0x881282['shift']());}}}(a237_0x2a96,0xccc2c));function a237_0x2d10(_0x8a203,_0x42abfa){const _0x4653ad=a237_0x2a96();return a237_0x2d10=function(_0x4e885a,_0x2716c0){_0x4e885a=_0x4e885a-0xb4;let _0x2a9691=_0x4653ad[_0x4e885a];return _0x2a9691;},a237_0x2d10(_0x8a203,_0x42abfa);}const a237_0x2716c0=(function(){let _0x5b64dd=!![];return function(_0xe811c0,_0x39ce81){const _0x658716=_0x5b64dd?function(){const _0x64bc0f=a237_0x2d10;if(_0x39ce81){const _0x406c7c=_0x39ce81[_0x64bc0f(0xbb)](_0xe811c0,arguments);return _0x39ce81=null,_0x406c7c;}}:function(){};return _0x5b64dd=![],_0x658716;};}()),a237_0x4e885a=a237_0x2716c0(this,function(){const _0xc0e2b7=a237_0x2d10;return a237_0x4e885a[_0xc0e2b7(0xd6)]()[_0xc0e2b7(0xd2)]('(((.+)+)+)+$')[_0xc0e2b7(0xd6)]()['constructor'](a237_0x4e885a)[_0xc0e2b7(0xd2)](_0xc0e2b7(0xc7));});function a237_0x2a96(){const _0x4e9199=['../repo.class','search','git','decorate','delete','toString','/repos/','post','api','master','fromBitbucketServer','getOwnPropertyDescriptor','5146295hMpawL','projects/','metadata','/repos','11644UzMRno','joinURL','Tokens','1600YiizSI','getOne','9114000bzfhwM','credentials','request','BadRequestError','NotFoundError','slug','6lTgSob','apiUrl','./git-repo.service','__decorate','/projects/','object','Inject','591623JviLCL','../../../../shared/utils','length','Git','BitbucketServerRepoService','../../providers.tokens','autoInit','design:paramtypes','defineProperty','6306167zPyfOi','12MQicDr','4nJRpZY','baseURL','project','ApiError','values','defaultBranch','then','function','map','Repo','isLastPage','put','../../../internal/git.internal','apply','isDefault','getAll','17055JZjWRn','find','../../credentials/dto/bitbucket-server-credentials.dto','__param','../../../../../core/errors/bad-request.error','name','get','create','681FOrqDJ','(((.+)+)+)+$','../../../../../core/errors/not-found.error','7924375vLXsrH','/default-branch','push','defaults','BitbucketServerApiService','BitbucketServerCredentialsDto','update','apiBody'];a237_0x2a96=function(){return _0x4e9199;};return a237_0x2a96();}a237_0x4e885a();'use strict';var __decorate=this&&this[a237_0x237dcc(0xef)]||function(_0x191fdc,_0x4090f5,_0xceef7,_0xacdeb2){const _0x45534c=a237_0x237dcc;var _0x238487=arguments['length'],_0x1f1446=_0x238487<0x3?_0x4090f5:_0xacdeb2===null?_0xacdeb2=Object[_0x45534c(0xdc)](_0x4090f5,_0xceef7):_0xacdeb2,_0x33d0cf;if(typeof Reflect==='object'&&typeof Reflect[_0x45534c(0xd4)]===_0x45534c(0xb5))_0x1f1446=Reflect[_0x45534c(0xd4)](_0x191fdc,_0x4090f5,_0xceef7,_0xacdeb2);else{for(var _0x16dfdb=_0x191fdc[_0x45534c(0xf5)]-0x1;_0x16dfdb>=0x0;_0x16dfdb--)if(_0x33d0cf=_0x191fdc[_0x16dfdb])_0x1f1446=(_0x238487<0x3?_0x33d0cf(_0x1f1446):_0x238487>0x3?_0x33d0cf(_0x4090f5,_0xceef7,_0x1f1446):_0x33d0cf(_0x4090f5,_0xceef7))||_0x1f1446;}return _0x238487>0x3&&_0x1f1446&&Object[_0x45534c(0xfb)](_0x4090f5,_0xceef7,_0x1f1446),_0x1f1446;},__metadata=this&&this['__metadata']||function(_0x276c3a,_0x3fb8e2){const _0x1f6244=a237_0x237dcc;if(typeof Reflect===_0x1f6244(0xf1)&&typeof Reflect[_0x1f6244(0xdf)]===_0x1f6244(0xb5))return Reflect[_0x1f6244(0xdf)](_0x276c3a,_0x3fb8e2);},__param=this&&this[a237_0x237dcc(0xc1)]||function(_0x1c64ab,_0x3dfb21){return function(_0xec1c2d,_0x47236f){_0x3dfb21(_0xec1c2d,_0x47236f,_0x1c64ab);};};Object[a237_0x237dcc(0xfb)](exports,'__esModule',{'value':!![]}),exports[a237_0x237dcc(0xf7)]=void 0x0;const bad_request_error_1=require(a237_0x237dcc(0xc2)),not_found_error_1=require(a237_0x237dcc(0xc8)),typedi_1=require('typedi'),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require('../../api/bitbucket-server-api.service'),git_internal_1=require(a237_0x237dcc(0xba)),utils_1=require(a237_0x237dcc(0xf4)),repo_class_1=require(a237_0x237dcc(0xd1)),git_repo_service_1=require(a237_0x237dcc(0xee)),providers_tokens_1=require(a237_0x237dcc(0xf8)),bitbucket_server_credentials_dto_1=require(a237_0x237dcc(0xc0));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x5a8e89,_0x240d2a){const _0x208180=a237_0x237dcc;super(_0x5a8e89),this[_0x208180(0xd9)]=_0x5a8e89,this[_0x208180(0x100)]=_0x240d2a[_0x208180(0x100)],this[_0x208180(0xe7)]=_0x240d2a;}async[a237_0x237dcc(0xc5)](_0x3e652a){const _0x29a9e5=a237_0x237dcc;try{const _0xeef4a5={'name':_0x3e652a[_0x29a9e5(0xc3)],'scmId':_0x29a9e5(0xd3),'defaultBranch':_0x3e652a[_0x29a9e5(0x103)],..._0x3e652a[_0x29a9e5(0xd0)]||{}},_0x54f485=await this[_0x29a9e5(0xe8)][_0x29a9e5(0xd8)](_0x29a9e5(0xde)+this[_0x29a9e5(0x100)]+_0x29a9e5(0xe0),_0xeef4a5),_0x71bb5e=repo_class_1[_0x29a9e5(0xb7)]['fromBitbucketServer'](_0x54f485,'',this[_0x29a9e5(0xd9)],this[_0x29a9e5(0xe7)]);return _0x3e652a[_0x29a9e5(0xf9)]&&await git_internal_1[_0x29a9e5(0xf6)]['createEmptyBranch'](_0x71bb5e,_0x3e652a['defaultBranch']||_0x29a9e5(0xda),'',this[_0x29a9e5(0xe7)]),this[_0x29a9e5(0xe5)](_0x71bb5e[_0x29a9e5(0xc3)]);}catch(_0x361fea){if(_0x361fea instanceof api_error_1['ApiError'])throw _0x361fea;throw new bad_request_error_1[(_0x29a9e5(0xe9))](_0x361fea);}}async[a237_0x237dcc(0xbd)](){const _0x4c6a66=a237_0x237dcc;try{const _0x43ba5d=[];let _0x44ecf9;do{_0x44ecf9=await this['request'][_0x4c6a66(0xc4)]('projects/'+this[_0x4c6a66(0x100)]+_0x4c6a66(0xe0),{'params':{'limit':0x64,'start':_0x44ecf9?_0x44ecf9['nextPageStart']:0x0}}),_0x43ba5d[_0x4c6a66(0xcb)](..._0x44ecf9[_0x4c6a66(0x102)]);}while(!_0x44ecf9[_0x4c6a66(0xb8)]);return _0x43ba5d[_0x4c6a66(0xb6)](_0xbc7a6a=>repo_class_1['Repo'][_0x4c6a66(0xdb)](_0xbc7a6a,(0x0,utils_1[_0x4c6a66(0xe2)])(this[_0x4c6a66(0xe8)][_0x4c6a66(0xcc)][_0x4c6a66(0xff)]||'',_0x4c6a66(0xf0)+this['project']+_0x4c6a66(0xd7)+_0xbc7a6a[_0x4c6a66(0xeb)]),this['api'],this['credentials']));}catch(_0x344cb2){if(_0x344cb2 instanceof api_error_1['ApiError'])throw _0x344cb2;throw new not_found_error_1[(_0x4c6a66(0xea))](_0x344cb2);}}async[a237_0x237dcc(0xe5)](_0xa8ff65){const _0x1e78f6=a237_0x237dcc;var _0x55702d;try{const _0x31930f=await this[_0x1e78f6(0xe8)][_0x1e78f6(0xc4)](_0x1e78f6(0xde)+this[_0x1e78f6(0x100)]+_0x1e78f6(0xd7)+_0xa8ff65),_0x1d2647=repo_class_1[_0x1e78f6(0xb7)]['fromBitbucketServer'](_0x31930f,(0x0,utils_1[_0x1e78f6(0xe2)])(this[_0x1e78f6(0xe8)][_0x1e78f6(0xcc)][_0x1e78f6(0xff)]||'','/projects/'+this[_0x1e78f6(0x100)]+_0x1e78f6(0xd7)+_0xa8ff65),this[_0x1e78f6(0xd9)],this[_0x1e78f6(0xe7)]),_0x42603e=await this['request']['get'](_0x1d2647[_0x1e78f6(0xed)]+'/branches')[_0x1e78f6(0xb4)](_0x4c8305=>_0x4c8305['values']);return _0x1d2647[_0x1e78f6(0x103)]=(_0x55702d=_0x42603e[_0x1e78f6(0xbf)](_0x37f854=>_0x37f854[_0x1e78f6(0xbc)]===!![]))===null||_0x55702d===void 0x0?void 0x0:_0x55702d['displayId'],_0x1d2647;}catch(_0x142448){if(_0x142448 instanceof api_error_1[_0x1e78f6(0x101)])throw _0x142448;throw new not_found_error_1[(_0x1e78f6(0xea))](_0x142448);}}async[a237_0x237dcc(0xcf)](_0x51c0be,_0x940f5b){const _0x37d2d3=a237_0x237dcc;try{const _0x59f3da=await this[_0x37d2d3(0xe8)][_0x37d2d3(0xb9)]('projects/'+this['project']+'/repos/'+_0x51c0be,_0x940f5b),_0x5132d2=await this['request']['get'](_0x37d2d3(0xde)+this['project']+'/repos/'+_0x51c0be+_0x37d2d3(0xca)),_0x4d6032=repo_class_1[_0x37d2d3(0xb7)][_0x37d2d3(0xdb)](_0x59f3da,(0x0,utils_1[_0x37d2d3(0xe2)])(this[_0x37d2d3(0xe8)][_0x37d2d3(0xcc)][_0x37d2d3(0xff)]||'',_0x37d2d3(0xf0)+this['project']+_0x37d2d3(0xd7)+_0x51c0be),this[_0x37d2d3(0xd9)],this['credentials']);return _0x4d6032[_0x37d2d3(0x103)]=_0x5132d2['displayId'],_0x4d6032;}catch(_0x8399e1){if(_0x8399e1 instanceof api_error_1[_0x37d2d3(0x101)])throw _0x8399e1;throw new not_found_error_1[(_0x37d2d3(0xea))](_0x8399e1);}}async['delete'](_0x891263){const _0x1e0790=a237_0x237dcc;try{await this[_0x1e0790(0xe5)](_0x891263),await this[_0x1e0790(0xe8)][_0x1e0790(0xd5)](_0x1e0790(0xde)+this[_0x1e0790(0x100)]+'/repos/'+_0x891263);}catch(_0x43cb38){if(_0x43cb38 instanceof api_error_1[_0x1e0790(0x101)])throw _0x43cb38;throw new bad_request_error_1[(_0x1e0790(0xe9))](_0x43cb38);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a237_0x237dcc(0xf2)])(providers_tokens_1[a237_0x237dcc(0xe3)][a237_0x237dcc(0xe7)])),__metadata(a237_0x237dcc(0xfa),[bitbucket_server_api_service_1[a237_0x237dcc(0xcd)],bitbucket_server_credentials_dto_1[a237_0x237dcc(0xce)]])],BitbucketServerRepoService),exports[a237_0x237dcc(0xf7)]=BitbucketServerRepoService;