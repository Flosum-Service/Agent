const a206_0x57e256=a206_0x5bae;function a206_0x36eb(){const _0x2b5d45=['slug','projects/','post','__metadata','../../../internal/git.internal','put','570yCblXH','../../../../../core/errors/api.error','BitbucketServerCredentialsDto','constructor','../../../../../core/errors/not-found.error','./git-repo.service','__esModule','3846884qDtXfN','master','isLastPage','Tokens','toString','2806456kmBlbL','Repo','defaults','BadRequestError','63fnxjHN','name','typedi','1blkFip','defaultBranch','request','/repos/','length','/default-branch','getAll','apply','BitbucketServerRepoService','metadata','update','1379379JOIYLU','GitRepoService','createEmptyBranch','joinURL','credentials','then','apiBody','../../credentials/dto/bitbucket-server-credentials.dto','delete','values','ApiError','1212812JELFKF','__decorate','../../providers.tokens','13158dldmDQ','/projects/','apiUrl','get','getOne','Service','../../../../../core/errors/bad-request.error','project','../repo.class','decorate','../../api/bitbucket-server-api.service','api','baseURL','(((.+)+)+)+$','function','Git','search','BitbucketServerApiService','push','6903309UDWAwu','NotFoundError','__param','defineProperty','nextPageStart','/repos','1397830NSxhoQ','object','fromBitbucketServer','displayId'];a206_0x36eb=function(){return _0x2b5d45;};return a206_0x36eb();}(function(_0x5db334,_0xa76112){const _0x29754e=a206_0x5bae,_0x2ca4da=_0x5db334();while(!![]){try{const _0x3924ce=parseInt(_0x29754e(0x157))/0x1*(-parseInt(_0x29754e(0x16d))/0x2)+parseInt(_0x29754e(0x162))/0x3+parseInt(_0x29754e(0x14b))/0x4+parseInt(_0x29754e(0x144))/0x5*(-parseInt(_0x29754e(0x170))/0x6)+-parseInt(_0x29754e(0x134))/0x7+parseInt(_0x29754e(0x150))/0x8+-parseInt(_0x29754e(0x154))/0x9*(-parseInt(_0x29754e(0x13a))/0xa);if(_0x3924ce===_0xa76112)break;else _0x2ca4da['push'](_0x2ca4da['shift']());}catch(_0x1a5697){_0x2ca4da['push'](_0x2ca4da['shift']());}}}(a206_0x36eb,0xddbaf));function a206_0x5bae(_0x398989,_0x5965b8){const _0x4a5f50=a206_0x36eb();return a206_0x5bae=function(_0x4068d5,_0x55e2d0){_0x4068d5=_0x4068d5-0x12a;let _0x36eb53=_0x4a5f50[_0x4068d5];return _0x36eb53;},a206_0x5bae(_0x398989,_0x5965b8);}const a206_0x55e2d0=(function(){let _0x479628=!![];return function(_0x173d13,_0x5a494f){const _0x5310ce=_0x479628?function(){const _0x38702c=a206_0x5bae;if(_0x5a494f){const _0x10aa4e=_0x5a494f[_0x38702c(0x15e)](_0x173d13,arguments);return _0x5a494f=null,_0x10aa4e;}}:function(){};return _0x479628=![],_0x5310ce;};}()),a206_0x4068d5=a206_0x55e2d0(this,function(){const _0x1b83e2=a206_0x5bae;return a206_0x4068d5[_0x1b83e2(0x14f)]()['search']('(((.+)+)+)+$')[_0x1b83e2(0x14f)]()[_0x1b83e2(0x147)](a206_0x4068d5)[_0x1b83e2(0x131)](_0x1b83e2(0x12e));});a206_0x4068d5();'use strict';var __decorate=this&&this[a206_0x57e256(0x16e)]||function(_0xde6dde,_0xb06712,_0xb12e42,_0x47c8b3){const _0x2878b8=a206_0x57e256;var _0xd05bbe=arguments[_0x2878b8(0x15b)],_0x1c9b32=_0xd05bbe<0x3?_0xb06712:_0x47c8b3===null?_0x47c8b3=Object['getOwnPropertyDescriptor'](_0xb06712,_0xb12e42):_0x47c8b3,_0x1dd603;if(typeof Reflect===_0x2878b8(0x13b)&&typeof Reflect[_0x2878b8(0x12a)]==='function')_0x1c9b32=Reflect['decorate'](_0xde6dde,_0xb06712,_0xb12e42,_0x47c8b3);else{for(var _0x286622=_0xde6dde[_0x2878b8(0x15b)]-0x1;_0x286622>=0x0;_0x286622--)if(_0x1dd603=_0xde6dde[_0x286622])_0x1c9b32=(_0xd05bbe<0x3?_0x1dd603(_0x1c9b32):_0xd05bbe>0x3?_0x1dd603(_0xb06712,_0xb12e42,_0x1c9b32):_0x1dd603(_0xb06712,_0xb12e42))||_0x1c9b32;}return _0xd05bbe>0x3&&_0x1c9b32&&Object[_0x2878b8(0x137)](_0xb06712,_0xb12e42,_0x1c9b32),_0x1c9b32;},__metadata=this&&this[a206_0x57e256(0x141)]||function(_0x51e7f3,_0x5535d7){const _0x357cd5=a206_0x57e256;if(typeof Reflect==='object'&&typeof Reflect[_0x357cd5(0x160)]===_0x357cd5(0x12f))return Reflect['metadata'](_0x51e7f3,_0x5535d7);},__param=this&&this[a206_0x57e256(0x136)]||function(_0x3e2cf1,_0x3cc46f){return function(_0x238b92,_0x48270a){_0x3cc46f(_0x238b92,_0x48270a,_0x3e2cf1);};};Object[a206_0x57e256(0x137)](exports,a206_0x57e256(0x14a),{'value':!![]}),exports[a206_0x57e256(0x15f)]=void 0x0;const bad_request_error_1=require(a206_0x57e256(0x176)),not_found_error_1=require(a206_0x57e256(0x148)),typedi_1=require(a206_0x57e256(0x156)),api_error_1=require(a206_0x57e256(0x145)),bitbucket_server_api_service_1=require(a206_0x57e256(0x12b)),git_internal_1=require(a206_0x57e256(0x142)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a206_0x57e256(0x178)),git_repo_service_1=require(a206_0x57e256(0x149)),providers_tokens_1=require(a206_0x57e256(0x16f)),bitbucket_server_credentials_dto_1=require(a206_0x57e256(0x169));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a206_0x57e256(0x163)]{constructor(_0x643742,_0x244799){const _0x542531=a206_0x57e256;super(_0x643742),this['api']=_0x643742,this[_0x542531(0x177)]=_0x244799[_0x542531(0x177)],this[_0x542531(0x166)]=_0x244799;}async['create'](_0x488fdf){const _0x24060e=a206_0x57e256;try{const _0x30c25f={'name':_0x488fdf[_0x24060e(0x155)],'scmId':'git','defaultBranch':_0x488fdf[_0x24060e(0x158)],..._0x488fdf[_0x24060e(0x168)]||{}},_0x2d6d30=await this[_0x24060e(0x159)][_0x24060e(0x140)](_0x24060e(0x13f)+this[_0x24060e(0x177)]+_0x24060e(0x139),_0x30c25f),_0x37df0f=repo_class_1[_0x24060e(0x151)][_0x24060e(0x13c)](_0x2d6d30,'',this[_0x24060e(0x12c)],this[_0x24060e(0x166)]);return _0x488fdf['autoInit']&&await git_internal_1[_0x24060e(0x130)][_0x24060e(0x164)](_0x37df0f,_0x488fdf[_0x24060e(0x158)]||_0x24060e(0x14c),'',this[_0x24060e(0x166)]),this[_0x24060e(0x174)](_0x37df0f['name']);}catch(_0x52b1ce){if(_0x52b1ce instanceof api_error_1[_0x24060e(0x16c)])throw _0x52b1ce;throw new bad_request_error_1['BadRequestError'](_0x52b1ce);}}async[a206_0x57e256(0x15d)](){const _0x1d055b=a206_0x57e256;try{const _0x2ec89f=[];let _0x3e3cab;do{_0x3e3cab=await this[_0x1d055b(0x159)][_0x1d055b(0x173)]('projects/'+this[_0x1d055b(0x177)]+_0x1d055b(0x139),{'params':{'limit':0x64,'start':_0x3e3cab?_0x3e3cab[_0x1d055b(0x138)]:0x0}}),_0x2ec89f[_0x1d055b(0x133)](..._0x3e3cab[_0x1d055b(0x16b)]);}while(!_0x3e3cab[_0x1d055b(0x14d)]);return _0x2ec89f['map'](_0x4205eb=>repo_class_1[_0x1d055b(0x151)][_0x1d055b(0x13c)](_0x4205eb,(0x0,utils_1['joinURL'])(this[_0x1d055b(0x159)][_0x1d055b(0x152)][_0x1d055b(0x12d)]||'',_0x1d055b(0x171)+this[_0x1d055b(0x177)]+_0x1d055b(0x15a)+_0x4205eb[_0x1d055b(0x13e)]),this[_0x1d055b(0x12c)],this[_0x1d055b(0x166)]));}catch(_0x139bc8){if(_0x139bc8 instanceof api_error_1[_0x1d055b(0x16c)])throw _0x139bc8;throw new not_found_error_1[(_0x1d055b(0x135))](_0x139bc8);}}async['getOne'](_0x5558c9){const _0x33e420=a206_0x57e256;var _0x55162f;try{const _0x969344=await this[_0x33e420(0x159)][_0x33e420(0x173)]('projects/'+this['project']+'/repos/'+_0x5558c9),_0x363d04=repo_class_1[_0x33e420(0x151)][_0x33e420(0x13c)](_0x969344,(0x0,utils_1[_0x33e420(0x165)])(this[_0x33e420(0x159)]['defaults'][_0x33e420(0x12d)]||'',_0x33e420(0x171)+this[_0x33e420(0x177)]+_0x33e420(0x15a)+_0x5558c9),this['api'],this[_0x33e420(0x166)]),_0x34939b=await this['request'][_0x33e420(0x173)](_0x363d04[_0x33e420(0x172)]+'/branches')[_0x33e420(0x167)](_0x324ead=>_0x324ead[_0x33e420(0x16b)]);return _0x363d04[_0x33e420(0x158)]=(_0x55162f=_0x34939b['find'](_0x19ca61=>_0x19ca61['isDefault']===!![]))===null||_0x55162f===void 0x0?void 0x0:_0x55162f['displayId'],_0x363d04;}catch(_0x577027){if(_0x577027 instanceof api_error_1[_0x33e420(0x16c)])throw _0x577027;throw new not_found_error_1['NotFoundError'](_0x577027);}}async[a206_0x57e256(0x161)](_0x2caf23,_0x44cc44){const _0x381aae=a206_0x57e256;try{const _0x49527d=await this[_0x381aae(0x159)][_0x381aae(0x143)](_0x381aae(0x13f)+this[_0x381aae(0x177)]+_0x381aae(0x15a)+_0x2caf23,_0x44cc44),_0x20b080=await this[_0x381aae(0x159)][_0x381aae(0x173)]('projects/'+this['project']+'/repos/'+_0x2caf23+_0x381aae(0x15c)),_0x56539b=repo_class_1['Repo'][_0x381aae(0x13c)](_0x49527d,(0x0,utils_1['joinURL'])(this[_0x381aae(0x159)][_0x381aae(0x152)][_0x381aae(0x12d)]||'',_0x381aae(0x171)+this[_0x381aae(0x177)]+_0x381aae(0x15a)+_0x2caf23),this[_0x381aae(0x12c)],this[_0x381aae(0x166)]);return _0x56539b[_0x381aae(0x158)]=_0x20b080[_0x381aae(0x13d)],_0x56539b;}catch(_0x374874){if(_0x374874 instanceof api_error_1[_0x381aae(0x16c)])throw _0x374874;throw new not_found_error_1[(_0x381aae(0x135))](_0x374874);}}async[a206_0x57e256(0x16a)](_0xe3e4cd){const _0x10a44a=a206_0x57e256;try{await this[_0x10a44a(0x174)](_0xe3e4cd),await this[_0x10a44a(0x159)][_0x10a44a(0x16a)](_0x10a44a(0x13f)+this[_0x10a44a(0x177)]+'/repos/'+_0xe3e4cd);}catch(_0x4fdc91){if(_0x4fdc91 instanceof api_error_1['ApiError'])throw _0x4fdc91;throw new bad_request_error_1[(_0x10a44a(0x153))](_0x4fdc91);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a206_0x57e256(0x175)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a206_0x57e256(0x14e)]['credentials'])),__metadata('design:paramtypes',[bitbucket_server_api_service_1[a206_0x57e256(0x132)],bitbucket_server_credentials_dto_1[a206_0x57e256(0x146)]])],BitbucketServerRepoService),exports[a206_0x57e256(0x15f)]=BitbucketServerRepoService;