const a206_0x4d2b7c=a206_0x18d4;(function(_0x34779d,_0x532ce2){const _0x15dc7a=a206_0x18d4,_0x2a520a=_0x34779d();while(!![]){try{const _0x55b820=-parseInt(_0x15dc7a(0xdd))/0x1*(-parseInt(_0x15dc7a(0xfe))/0x2)+-parseInt(_0x15dc7a(0xf3))/0x3+parseInt(_0x15dc7a(0xce))/0x4*(parseInt(_0x15dc7a(0xc5))/0x5)+-parseInt(_0x15dc7a(0xed))/0x6*(parseInt(_0x15dc7a(0x10d))/0x7)+-parseInt(_0x15dc7a(0x100))/0x8+-parseInt(_0x15dc7a(0xcc))/0x9*(-parseInt(_0x15dc7a(0xf8))/0xa)+-parseInt(_0x15dc7a(0xd7))/0xb;if(_0x55b820===_0x532ce2)break;else _0x2a520a['push'](_0x2a520a['shift']());}catch(_0x3ce607){_0x2a520a['push'](_0x2a520a['shift']());}}}(a206_0x17bd,0x24aea));const a206_0x4901f6=(function(){let _0x46612d=!![];return function(_0x560ad0,_0x114c21){const _0x15e698=_0x46612d?function(){const _0x4d8063=a206_0x18d4;if(_0x114c21){const _0x19ef88=_0x114c21[_0x4d8063(0xf6)](_0x560ad0,arguments);return _0x114c21=null,_0x19ef88;}}:function(){};return _0x46612d=![],_0x15e698;};}()),a206_0x181058=a206_0x4901f6(this,function(){const _0x5ba4d4=a206_0x18d4;return a206_0x181058['toString']()[_0x5ba4d4(0xf7)](_0x5ba4d4(0x112))[_0x5ba4d4(0xc9)]()['constructor'](a206_0x181058)[_0x5ba4d4(0xf7)](_0x5ba4d4(0x112));});a206_0x181058();'use strict';function a206_0x17bd(){const _0x38990b=['displayId','fromBitbucketServer','master','Inject','projects/','/repos','length','slug','__metadata','defaults','300LCfMdu','Service','../../../../../core/errors/not-found.error','git','BadRequestError','GitRepoService','284328Icykik','values','decorate','apply','search','10MpalsQ','createEmptyBranch','../../providers.tokens','apiUrl','ApiError','../../credentials/dto/bitbucket-server-credentials.dto','550700rXMMEE','request','558368auYDnV','put','apiBody','/projects/','__esModule','isDefault','get','__decorate','getAll','../../../internal/git.internal','then','defineProperty','api','40649KhnoLj','delete','defaultBranch','object','/repos/','(((.+)+)+)+$','typedi','80GMtJIG','design:paramtypes','post','credentials','toString','nextPageStart','../repo.class','1833237MOnCol','/default-branch','68964VLnaKT','__param','autoInit','NotFoundError','getOwnPropertyDescriptor','project','../../../../shared/utils','/branches','update','1646997CcQhmb','../../api/bitbucket-server-api.service','Repo','../../../../../core/errors/bad-request.error','joinURL','getOne','1heSDqM','BitbucketServerApiService','baseURL','function','metadata','find'];a206_0x17bd=function(){return _0x38990b;};return a206_0x17bd();}var __decorate=this&&this[a206_0x4d2b7c(0x107)]||function(_0x3d0fe1,_0xd4201f,_0x25f809,_0x460497){const _0x58b406=a206_0x4d2b7c;var _0x47bbc1=arguments['length'],_0x30010e=_0x47bbc1<0x3?_0xd4201f:_0x460497===null?_0x460497=Object[_0x58b406(0xd2)](_0xd4201f,_0x25f809):_0x460497,_0x30fd84;if(typeof Reflect===_0x58b406(0x110)&&typeof Reflect[_0x58b406(0xf5)]===_0x58b406(0xe0))_0x30010e=Reflect[_0x58b406(0xf5)](_0x3d0fe1,_0xd4201f,_0x25f809,_0x460497);else{for(var _0x6e0d15=_0x3d0fe1[_0x58b406(0xe9)]-0x1;_0x6e0d15>=0x0;_0x6e0d15--)if(_0x30fd84=_0x3d0fe1[_0x6e0d15])_0x30010e=(_0x47bbc1<0x3?_0x30fd84(_0x30010e):_0x47bbc1>0x3?_0x30fd84(_0xd4201f,_0x25f809,_0x30010e):_0x30fd84(_0xd4201f,_0x25f809))||_0x30010e;}return _0x47bbc1>0x3&&_0x30010e&&Object[_0x58b406(0x10b)](_0xd4201f,_0x25f809,_0x30010e),_0x30010e;},__metadata=this&&this[a206_0x4d2b7c(0xeb)]||function(_0x9483cd,_0x39c080){const _0x5f15e1=a206_0x4d2b7c;if(typeof Reflect===_0x5f15e1(0x110)&&typeof Reflect[_0x5f15e1(0xe1)]==='function')return Reflect[_0x5f15e1(0xe1)](_0x9483cd,_0x39c080);},__param=this&&this[a206_0x4d2b7c(0xcf)]||function(_0x210230,_0x5d31a2){return function(_0x2d9ca1,_0x44e632){_0x5d31a2(_0x2d9ca1,_0x44e632,_0x210230);};};Object[a206_0x4d2b7c(0x10b)](exports,a206_0x4d2b7c(0x104),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a206_0x4d2b7c(0xda)),not_found_error_1=require(a206_0x4d2b7c(0xef)),typedi_1=require(a206_0x4d2b7c(0xc4)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a206_0x4d2b7c(0xd8)),git_internal_1=require(a206_0x4d2b7c(0x109)),utils_1=require(a206_0x4d2b7c(0xd4)),repo_class_1=require(a206_0x4d2b7c(0xcb)),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a206_0x4d2b7c(0xfa)),bitbucket_server_credentials_dto_1=require(a206_0x4d2b7c(0xfd));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a206_0x4d2b7c(0xf2)]{constructor(_0xf77a0a,_0x565a07){const _0x49acd5=a206_0x4d2b7c;super(_0xf77a0a),this['api']=_0xf77a0a,this[_0x49acd5(0xd3)]=_0x565a07[_0x49acd5(0xd3)],this[_0x49acd5(0xc8)]=_0x565a07;}async['create'](_0x36ef2a){const _0x400efd=a206_0x4d2b7c;try{const _0x444ad4={'name':_0x36ef2a['name'],'scmId':_0x400efd(0xf0),'defaultBranch':_0x36ef2a[_0x400efd(0x10f)],..._0x36ef2a[_0x400efd(0x102)]||{}},_0x288c41=await this[_0x400efd(0xff)][_0x400efd(0xc7)](_0x400efd(0xe7)+this[_0x400efd(0xd3)]+_0x400efd(0xe8),_0x444ad4),_0x363d10=repo_class_1['Repo'][_0x400efd(0xe4)](_0x288c41,'',this['api'],this['credentials']);return _0x36ef2a[_0x400efd(0xd0)]&&await git_internal_1['Git'][_0x400efd(0xf9)](_0x363d10,_0x36ef2a[_0x400efd(0x10f)]||_0x400efd(0xe5),'',this[_0x400efd(0xc8)]),this[_0x400efd(0xdc)](_0x363d10['name']);}catch(_0x4fce74){if(_0x4fce74 instanceof api_error_1['ApiError'])throw _0x4fce74;throw new bad_request_error_1[(_0x400efd(0xf1))](_0x4fce74);}}async[a206_0x4d2b7c(0x108)](){const _0x442f63=a206_0x4d2b7c;try{const _0x5a9a67=[];let _0x1cd898;do{_0x1cd898=await this['request']['get'](_0x442f63(0xe7)+this[_0x442f63(0xd3)]+'/repos',{'params':{'limit':0x64,'start':_0x1cd898?_0x1cd898[_0x442f63(0xca)]:0x0}}),_0x5a9a67['push'](..._0x1cd898[_0x442f63(0xf4)]);}while(!_0x1cd898['isLastPage']);return _0x5a9a67['map'](_0xed9a25=>repo_class_1[_0x442f63(0xd9)]['fromBitbucketServer'](_0xed9a25,(0x0,utils_1[_0x442f63(0xdb)])(this['request'][_0x442f63(0xec)][_0x442f63(0xdf)]||'',_0x442f63(0x103)+this[_0x442f63(0xd3)]+_0x442f63(0x111)+_0xed9a25[_0x442f63(0xea)]),this[_0x442f63(0x10c)],this[_0x442f63(0xc8)]));}catch(_0x1a46b9){if(_0x1a46b9 instanceof api_error_1['ApiError'])throw _0x1a46b9;throw new not_found_error_1['NotFoundError'](_0x1a46b9);}}async[a206_0x4d2b7c(0xdc)](_0x5bf197){const _0x27f22d=a206_0x4d2b7c;var _0x34e0e2;try{const _0x55da82=await this[_0x27f22d(0xff)][_0x27f22d(0x106)](_0x27f22d(0xe7)+this['project']+_0x27f22d(0x111)+_0x5bf197),_0x566e7a=repo_class_1[_0x27f22d(0xd9)]['fromBitbucketServer'](_0x55da82,(0x0,utils_1[_0x27f22d(0xdb)])(this['request'][_0x27f22d(0xec)][_0x27f22d(0xdf)]||'','/projects/'+this[_0x27f22d(0xd3)]+'/repos/'+_0x5bf197),this[_0x27f22d(0x10c)],this['credentials']),_0x53d4c4=await this['request'][_0x27f22d(0x106)](_0x566e7a[_0x27f22d(0xfb)]+_0x27f22d(0xd5))[_0x27f22d(0x10a)](_0x5467f8=>_0x5467f8[_0x27f22d(0xf4)]);return _0x566e7a[_0x27f22d(0x10f)]=(_0x34e0e2=_0x53d4c4[_0x27f22d(0xe2)](_0x5c9cb1=>_0x5c9cb1[_0x27f22d(0x105)]===!![]))===null||_0x34e0e2===void 0x0?void 0x0:_0x34e0e2[_0x27f22d(0xe3)],_0x566e7a;}catch(_0x4aebc4){if(_0x4aebc4 instanceof api_error_1[_0x27f22d(0xfc)])throw _0x4aebc4;throw new not_found_error_1[(_0x27f22d(0xd1))](_0x4aebc4);}}async[a206_0x4d2b7c(0xd6)](_0x47e508,_0x322df6){const _0x1ccfb8=a206_0x4d2b7c;try{const _0x2fad79=await this['request'][_0x1ccfb8(0x101)](_0x1ccfb8(0xe7)+this[_0x1ccfb8(0xd3)]+'/repos/'+_0x47e508,_0x322df6),_0x932c72=await this[_0x1ccfb8(0xff)]['get'](_0x1ccfb8(0xe7)+this[_0x1ccfb8(0xd3)]+'/repos/'+_0x47e508+_0x1ccfb8(0xcd)),_0x40bb2e=repo_class_1['Repo'][_0x1ccfb8(0xe4)](_0x2fad79,(0x0,utils_1[_0x1ccfb8(0xdb)])(this[_0x1ccfb8(0xff)][_0x1ccfb8(0xec)]['baseURL']||'','/projects/'+this[_0x1ccfb8(0xd3)]+_0x1ccfb8(0x111)+_0x47e508),this['api'],this['credentials']);return _0x40bb2e['defaultBranch']=_0x932c72['displayId'],_0x40bb2e;}catch(_0x5b8bd0){if(_0x5b8bd0 instanceof api_error_1[_0x1ccfb8(0xfc)])throw _0x5b8bd0;throw new not_found_error_1[(_0x1ccfb8(0xd1))](_0x5b8bd0);}}async[a206_0x4d2b7c(0x10e)](_0x129478){const _0x42087f=a206_0x4d2b7c;try{await this['getOne'](_0x129478),await this['request']['delete'](_0x42087f(0xe7)+this[_0x42087f(0xd3)]+_0x42087f(0x111)+_0x129478);}catch(_0x22585d){if(_0x22585d instanceof api_error_1[_0x42087f(0xfc)])throw _0x22585d;throw new bad_request_error_1[(_0x42087f(0xf1))](_0x22585d);}}};function a206_0x18d4(_0x587991,_0x1e9b3f){const _0x2fe1bb=a206_0x17bd();return a206_0x18d4=function(_0x181058,_0x4901f6){_0x181058=_0x181058-0xc4;let _0x17bd20=_0x2fe1bb[_0x181058];return _0x17bd20;},a206_0x18d4(_0x587991,_0x1e9b3f);}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a206_0x4d2b7c(0xee)])(),__param(0x1,(0x0,typedi_1[a206_0x4d2b7c(0xe6)])(providers_tokens_1['Tokens'][a206_0x4d2b7c(0xc8)])),__metadata(a206_0x4d2b7c(0xc6),[bitbucket_server_api_service_1[a206_0x4d2b7c(0xde)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;