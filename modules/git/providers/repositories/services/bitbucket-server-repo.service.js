const a212_0x2ce417=a212_0x41df;(function(_0xcdcf82,_0x3073d1){const _0x3d7beb=a212_0x41df,_0x5641a1=_0xcdcf82();while(!![]){try{const _0x30b70e=-parseInt(_0x3d7beb(0x14f))/0x1*(parseInt(_0x3d7beb(0x165))/0x2)+parseInt(_0x3d7beb(0x179))/0x3+parseInt(_0x3d7beb(0x15d))/0x4+parseInt(_0x3d7beb(0x15e))/0x5+parseInt(_0x3d7beb(0x168))/0x6+-parseInt(_0x3d7beb(0x13b))/0x7*(parseInt(_0x3d7beb(0x173))/0x8)+parseInt(_0x3d7beb(0x144))/0x9*(-parseInt(_0x3d7beb(0x157))/0xa);if(_0x30b70e===_0x3073d1)break;else _0x5641a1['push'](_0x5641a1['shift']());}catch(_0x2206de){_0x5641a1['push'](_0x5641a1['shift']());}}}(a212_0x1c15,0x817ae));const a212_0x1e00c4=(function(){let _0x125173=!![];return function(_0xb249f7,_0x333855){const _0x1d0249=_0x125173?function(){const _0x1a0340=a212_0x41df;if(_0x333855){const _0x6cc0b5=_0x333855[_0x1a0340(0x153)](_0xb249f7,arguments);return _0x333855=null,_0x6cc0b5;}}:function(){};return _0x125173=![],_0x1d0249;};}()),a212_0xa3d85=a212_0x1e00c4(this,function(){const _0x537dd1=a212_0x41df;return a212_0xa3d85['toString']()[_0x537dd1(0x143)]('(((.+)+)+)+$')[_0x537dd1(0x162)]()[_0x537dd1(0x178)](a212_0xa3d85)['search'](_0x537dd1(0x164));});function a212_0x1c15(){const _0x5880a6=['Inject','/repos','search','207uahUFe','../../credentials/dto/bitbucket-server-credentials.dto','autoInit','__decorate','/default-branch','defineProperty','../../../internal/git.internal','object','find','BadRequestError','delete','4UDDFsa','../../../../../core/errors/not-found.error','createEmptyBranch','credentials','apply','defaults','../../../../../core/errors/api.error','/repos/','426190zwkHrq','../../../../shared/utils','ApiError','push','then','function','3360392kkyBbO','3197170BjXNAF','get','apiBody','Git','toString','defaultBranch','(((.+)+)+)+$','44258DeSjPT','map','__param','2006226GFKYVq','design:paramtypes','fromBitbucketServer','__esModule','Tokens','request','baseURL','../../../../../core/errors/bad-request.error','getOne','/projects/','decorate','8yFPhNP','Repo','projects/','isLastPage','git','constructor','1801119MwmgJT','master','length','name','project','NotFoundError','metadata','getOwnPropertyDescriptor','Service','values','__metadata','put','apiUrl','isDefault','./git-repo.service','5706211dVkZuD','api','BitbucketServerApiService','slug','joinURL','create'];a212_0x1c15=function(){return _0x5880a6;};return a212_0x1c15();}a212_0xa3d85();'use strict';function a212_0x41df(_0x128845,_0x2453cb){const _0x33905f=a212_0x1c15();return a212_0x41df=function(_0xa3d85,_0x1e00c4){_0xa3d85=_0xa3d85-0x13a;let _0x1c15a9=_0x33905f[_0xa3d85];return _0x1c15a9;},a212_0x41df(_0x128845,_0x2453cb);}var __decorate=this&&this[a212_0x2ce417(0x147)]||function(_0x2d1375,_0x5df85a,_0x590bbd,_0x1870e2){const _0x3d9f67=a212_0x2ce417;var _0xc1d6eb=arguments[_0x3d9f67(0x17b)],_0x4f200a=_0xc1d6eb<0x3?_0x5df85a:_0x1870e2===null?_0x1870e2=Object[_0x3d9f67(0x180)](_0x5df85a,_0x590bbd):_0x1870e2,_0xada0ae;if(typeof Reflect==='object'&&typeof Reflect[_0x3d9f67(0x172)]===_0x3d9f67(0x15c))_0x4f200a=Reflect[_0x3d9f67(0x172)](_0x2d1375,_0x5df85a,_0x590bbd,_0x1870e2);else{for(var _0x1ce44e=_0x2d1375['length']-0x1;_0x1ce44e>=0x0;_0x1ce44e--)if(_0xada0ae=_0x2d1375[_0x1ce44e])_0x4f200a=(_0xc1d6eb<0x3?_0xada0ae(_0x4f200a):_0xc1d6eb>0x3?_0xada0ae(_0x5df85a,_0x590bbd,_0x4f200a):_0xada0ae(_0x5df85a,_0x590bbd))||_0x4f200a;}return _0xc1d6eb>0x3&&_0x4f200a&&Object[_0x3d9f67(0x149)](_0x5df85a,_0x590bbd,_0x4f200a),_0x4f200a;},__metadata=this&&this[a212_0x2ce417(0x183)]||function(_0x4b8ff3,_0x4faf75){const _0x57b1bd=a212_0x2ce417;if(typeof Reflect===_0x57b1bd(0x14b)&&typeof Reflect['metadata']==='function')return Reflect[_0x57b1bd(0x17f)](_0x4b8ff3,_0x4faf75);},__param=this&&this[a212_0x2ce417(0x167)]||function(_0x23ff28,_0x266af0){return function(_0x3499bf,_0x35e741){_0x266af0(_0x3499bf,_0x35e741,_0x23ff28);};};Object[a212_0x2ce417(0x149)](exports,a212_0x2ce417(0x16b),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a212_0x2ce417(0x16f)),not_found_error_1=require(a212_0x2ce417(0x150)),typedi_1=require('typedi'),api_error_1=require(a212_0x2ce417(0x155)),bitbucket_server_api_service_1=require('../../api/bitbucket-server-api.service'),git_internal_1=require(a212_0x2ce417(0x14a)),utils_1=require(a212_0x2ce417(0x158)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a212_0x2ce417(0x13a)),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require(a212_0x2ce417(0x145));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x2308ab,_0x568915){const _0x5b987e=a212_0x2ce417;super(_0x2308ab),this['api']=_0x2308ab,this[_0x5b987e(0x17d)]=_0x568915['project'],this[_0x5b987e(0x152)]=_0x568915;}async[a212_0x2ce417(0x140)](_0x4a3af8){const _0x25961a=a212_0x2ce417;try{const _0x2a8033={'name':_0x4a3af8[_0x25961a(0x17c)],'scmId':_0x25961a(0x177),'defaultBranch':_0x4a3af8['defaultBranch'],..._0x4a3af8[_0x25961a(0x160)]||{}},_0x521202=await this[_0x25961a(0x16d)]['post']('projects/'+this[_0x25961a(0x17d)]+'/repos',_0x2a8033),_0x241283=repo_class_1[_0x25961a(0x174)][_0x25961a(0x16a)](_0x521202,'',this[_0x25961a(0x13c)],this['credentials']);return _0x4a3af8[_0x25961a(0x146)]&&await git_internal_1[_0x25961a(0x161)][_0x25961a(0x151)](_0x241283,_0x4a3af8[_0x25961a(0x163)]||_0x25961a(0x17a),'',this[_0x25961a(0x152)]),this[_0x25961a(0x170)](_0x241283['name']);}catch(_0x4bf383){if(_0x4bf383 instanceof api_error_1['ApiError'])throw _0x4bf383;throw new bad_request_error_1[(_0x25961a(0x14d))](_0x4bf383);}}async['getAll'](){const _0x1a24ee=a212_0x2ce417;try{const _0x57270e=[];let _0x3b0195;do{_0x3b0195=await this[_0x1a24ee(0x16d)][_0x1a24ee(0x15f)](_0x1a24ee(0x175)+this['project']+_0x1a24ee(0x142),{'params':{'limit':0x64,'start':_0x3b0195?_0x3b0195['nextPageStart']:0x0}}),_0x57270e[_0x1a24ee(0x15a)](..._0x3b0195[_0x1a24ee(0x182)]);}while(!_0x3b0195[_0x1a24ee(0x176)]);return _0x57270e[_0x1a24ee(0x166)](_0x14b8ad=>repo_class_1[_0x1a24ee(0x174)][_0x1a24ee(0x16a)](_0x14b8ad,(0x0,utils_1[_0x1a24ee(0x13f)])(this[_0x1a24ee(0x16d)][_0x1a24ee(0x154)][_0x1a24ee(0x16e)]||'',_0x1a24ee(0x171)+this['project']+'/repos/'+_0x14b8ad[_0x1a24ee(0x13e)]),this[_0x1a24ee(0x13c)],this[_0x1a24ee(0x152)]));}catch(_0x174bd3){if(_0x174bd3 instanceof api_error_1['ApiError'])throw _0x174bd3;throw new not_found_error_1[(_0x1a24ee(0x17e))](_0x174bd3);}}async[a212_0x2ce417(0x170)](_0x44d3ed){const _0xc8c873=a212_0x2ce417;var _0x4335e1;try{const _0x2f1ec9=await this[_0xc8c873(0x16d)][_0xc8c873(0x15f)]('projects/'+this[_0xc8c873(0x17d)]+_0xc8c873(0x156)+_0x44d3ed),_0x4945c7=repo_class_1[_0xc8c873(0x174)][_0xc8c873(0x16a)](_0x2f1ec9,(0x0,utils_1[_0xc8c873(0x13f)])(this[_0xc8c873(0x16d)][_0xc8c873(0x154)][_0xc8c873(0x16e)]||'','/projects/'+this[_0xc8c873(0x17d)]+_0xc8c873(0x156)+_0x44d3ed),this[_0xc8c873(0x13c)],this[_0xc8c873(0x152)]),_0x4f2d64=await this[_0xc8c873(0x16d)][_0xc8c873(0x15f)](_0x4945c7[_0xc8c873(0x185)]+'/branches')[_0xc8c873(0x15b)](_0x1a053c=>_0x1a053c[_0xc8c873(0x182)]);return _0x4945c7[_0xc8c873(0x163)]=(_0x4335e1=_0x4f2d64[_0xc8c873(0x14c)](_0x24379a=>_0x24379a[_0xc8c873(0x186)]===!![]))===null||_0x4335e1===void 0x0?void 0x0:_0x4335e1['displayId'],_0x4945c7;}catch(_0x1037dd){if(_0x1037dd instanceof api_error_1[_0xc8c873(0x159)])throw _0x1037dd;throw new not_found_error_1['NotFoundError'](_0x1037dd);}}async['update'](_0x588a10,_0x567327){const _0x5bba05=a212_0x2ce417;try{const _0x4007ed=await this[_0x5bba05(0x16d)][_0x5bba05(0x184)](_0x5bba05(0x175)+this['project']+_0x5bba05(0x156)+_0x588a10,_0x567327),_0x472ebd=await this[_0x5bba05(0x16d)][_0x5bba05(0x15f)](_0x5bba05(0x175)+this[_0x5bba05(0x17d)]+_0x5bba05(0x156)+_0x588a10+_0x5bba05(0x148)),_0xed705f=repo_class_1[_0x5bba05(0x174)][_0x5bba05(0x16a)](_0x4007ed,(0x0,utils_1['joinURL'])(this[_0x5bba05(0x16d)][_0x5bba05(0x154)][_0x5bba05(0x16e)]||'','/projects/'+this[_0x5bba05(0x17d)]+_0x5bba05(0x156)+_0x588a10),this[_0x5bba05(0x13c)],this[_0x5bba05(0x152)]);return _0xed705f[_0x5bba05(0x163)]=_0x472ebd['displayId'],_0xed705f;}catch(_0x849289){if(_0x849289 instanceof api_error_1['ApiError'])throw _0x849289;throw new not_found_error_1[(_0x5bba05(0x17e))](_0x849289);}}async[a212_0x2ce417(0x14e)](_0x1bef94){const _0x33a49b=a212_0x2ce417;try{await this[_0x33a49b(0x170)](_0x1bef94),await this[_0x33a49b(0x16d)][_0x33a49b(0x14e)](_0x33a49b(0x175)+this[_0x33a49b(0x17d)]+'/repos/'+_0x1bef94);}catch(_0x5e4d62){if(_0x5e4d62 instanceof api_error_1[_0x33a49b(0x159)])throw _0x5e4d62;throw new bad_request_error_1['BadRequestError'](_0x5e4d62);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a212_0x2ce417(0x181)])(),__param(0x1,(0x0,typedi_1[a212_0x2ce417(0x141)])(providers_tokens_1[a212_0x2ce417(0x16c)][a212_0x2ce417(0x152)])),__metadata(a212_0x2ce417(0x169),[bitbucket_server_api_service_1[a212_0x2ce417(0x13d)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;