const a206_0x54a1ec=a206_0xcad6;(function(_0x21d972,_0x5ab393){const _0xb635ee=a206_0xcad6,_0x4792fa=_0x21d972();while(!![]){try{const _0x1358cb=parseInt(_0xb635ee(0x125))/0x1*(parseInt(_0xb635ee(0x14c))/0x2)+-parseInt(_0xb635ee(0x160))/0x3+-parseInt(_0xb635ee(0x12a))/0x4*(parseInt(_0xb635ee(0x16a))/0x5)+parseInt(_0xb635ee(0x130))/0x6*(-parseInt(_0xb635ee(0x120))/0x7)+-parseInt(_0xb635ee(0x140))/0x8*(parseInt(_0xb635ee(0x148))/0x9)+-parseInt(_0xb635ee(0x133))/0xa*(parseInt(_0xb635ee(0x156))/0xb)+parseInt(_0xb635ee(0x126))/0xc;if(_0x1358cb===_0x5ab393)break;else _0x4792fa['push'](_0x4792fa['shift']());}catch(_0x57dffe){_0x4792fa['push'](_0x4792fa['shift']());}}}(a206_0x55c2,0x7c4b3));const a206_0x1314b3=(function(){let _0x1d77ea=!![];return function(_0x5dea58,_0x1db87b){const _0x49bcf8=_0x1d77ea?function(){const _0xbaed5e=a206_0xcad6;if(_0x1db87b){const _0x1f1686=_0x1db87b[_0xbaed5e(0x134)](_0x5dea58,arguments);return _0x1db87b=null,_0x1f1686;}}:function(){};return _0x1d77ea=![],_0x49bcf8;};}()),a206_0x5ef121=a206_0x1314b3(this,function(){const _0x20ddd6=a206_0xcad6;return a206_0x5ef121[_0x20ddd6(0x122)]()['search'](_0x20ddd6(0x13c))[_0x20ddd6(0x122)]()[_0x20ddd6(0x155)](a206_0x5ef121)[_0x20ddd6(0x15c)](_0x20ddd6(0x13c));});a206_0x5ef121();'use strict';var __decorate=this&&this[a206_0x54a1ec(0x143)]||function(_0x3c52e7,_0x504f70,_0x23a11b,_0x4dd672){const _0xde0cf4=a206_0x54a1ec;var _0x43b6d3=arguments[_0xde0cf4(0x167)],_0x459148=_0x43b6d3<0x3?_0x504f70:_0x4dd672===null?_0x4dd672=Object[_0xde0cf4(0x13b)](_0x504f70,_0x23a11b):_0x4dd672,_0x472133;if(typeof Reflect===_0xde0cf4(0x12e)&&typeof Reflect[_0xde0cf4(0x164)]===_0xde0cf4(0x132))_0x459148=Reflect[_0xde0cf4(0x164)](_0x3c52e7,_0x504f70,_0x23a11b,_0x4dd672);else{for(var _0x4b593a=_0x3c52e7[_0xde0cf4(0x167)]-0x1;_0x4b593a>=0x0;_0x4b593a--)if(_0x472133=_0x3c52e7[_0x4b593a])_0x459148=(_0x43b6d3<0x3?_0x472133(_0x459148):_0x43b6d3>0x3?_0x472133(_0x504f70,_0x23a11b,_0x459148):_0x472133(_0x504f70,_0x23a11b))||_0x459148;}return _0x43b6d3>0x3&&_0x459148&&Object['defineProperty'](_0x504f70,_0x23a11b,_0x459148),_0x459148;},__metadata=this&&this['__metadata']||function(_0x140ba1,_0x1a4a26){const _0x5c698c=a206_0x54a1ec;if(typeof Reflect===_0x5c698c(0x12e)&&typeof Reflect[_0x5c698c(0x159)]===_0x5c698c(0x132))return Reflect[_0x5c698c(0x159)](_0x140ba1,_0x1a4a26);},__param=this&&this[a206_0x54a1ec(0x161)]||function(_0x7178d0,_0x44a92f){return function(_0x57e229,_0x3af171){_0x44a92f(_0x57e229,_0x3af171,_0x7178d0);};};Object[a206_0x54a1ec(0x14f)](exports,a206_0x54a1ec(0x142),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;function a206_0x55c2(){const _0x5cecdc=['110bkimwK','apply','project','BadRequestError','/projects/','slug','GitRepoService','apiUrl','getOwnPropertyDescriptor','(((.+)+)+)+$','/repos/','/default-branch','joinURL','24EZrrOh','name','__esModule','__decorate','displayId','../../providers.tokens','isDefault','../repo.class','950544UBaRDE','../../../../../core/errors/not-found.error','request','create','2rkfluq','Tokens','credentials','defineProperty','NotFoundError','Repo','design:paramtypes','map','get','constructor','128964QAJtPr','update','values','metadata','../../credentials/dto/bitbucket-server-credentials.dto','../../api/bitbucket-server-api.service','search','master','/branches','/repos','2626473WboMLZ','__param','delete','../../../internal/git.internal','decorate','find','baseURL','length','push','projects/','1036315BcAmrn','46564SYgTLv','defaultBranch','toString','getOne','api','77684FdgdyZ','33271008oqbVXC','ApiError','defaults','isLastPage','8WxzHyG','../../../../../core/errors/bad-request.error','BitbucketServerRepoService','Service','object','apiBody','546kHztQj','fromBitbucketServer','function'];a206_0x55c2=function(){return _0x5cecdc;};return a206_0x55c2();}const bad_request_error_1=require(a206_0x54a1ec(0x12b)),not_found_error_1=require(a206_0x54a1ec(0x149)),typedi_1=require('typedi'),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require(a206_0x54a1ec(0x15b)),git_internal_1=require(a206_0x54a1ec(0x163)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a206_0x54a1ec(0x147)),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require(a206_0x54a1ec(0x145)),bitbucket_server_credentials_dto_1=require(a206_0x54a1ec(0x15a));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a206_0x54a1ec(0x139)]{constructor(_0x2d5198,_0x30ffea){const _0x2869d3=a206_0x54a1ec;super(_0x2d5198),this[_0x2869d3(0x124)]=_0x2d5198,this[_0x2869d3(0x135)]=_0x30ffea[_0x2869d3(0x135)],this['credentials']=_0x30ffea;}async[a206_0x54a1ec(0x14b)](_0x45569b){const _0x1181fa=a206_0x54a1ec;try{const _0x23d61e={'name':_0x45569b['name'],'scmId':'git','defaultBranch':_0x45569b['defaultBranch'],..._0x45569b[_0x1181fa(0x12f)]||{}},_0x49e2f2=await this[_0x1181fa(0x14a)]['post']('projects/'+this['project']+_0x1181fa(0x15f),_0x23d61e),_0x33eb1b=repo_class_1[_0x1181fa(0x151)][_0x1181fa(0x131)](_0x49e2f2,'',this[_0x1181fa(0x124)],this[_0x1181fa(0x14e)]);return _0x45569b['autoInit']&&await git_internal_1['Git']['createEmptyBranch'](_0x33eb1b,_0x45569b[_0x1181fa(0x121)]||_0x1181fa(0x15d),'',this['credentials']),this[_0x1181fa(0x123)](_0x33eb1b[_0x1181fa(0x141)]);}catch(_0x2eceae){if(_0x2eceae instanceof api_error_1[_0x1181fa(0x127)])throw _0x2eceae;throw new bad_request_error_1[(_0x1181fa(0x136))](_0x2eceae);}}async['getAll'](){const _0xf93b1b=a206_0x54a1ec;try{const _0x1876ab=[];let _0x8ad4d5;do{_0x8ad4d5=await this['request'][_0xf93b1b(0x154)](_0xf93b1b(0x169)+this['project']+_0xf93b1b(0x15f),{'params':{'limit':0x64,'start':_0x8ad4d5?_0x8ad4d5['nextPageStart']:0x0}}),_0x1876ab[_0xf93b1b(0x168)](..._0x8ad4d5[_0xf93b1b(0x158)]);}while(!_0x8ad4d5[_0xf93b1b(0x129)]);return _0x1876ab[_0xf93b1b(0x153)](_0x300ff3=>repo_class_1[_0xf93b1b(0x151)][_0xf93b1b(0x131)](_0x300ff3,(0x0,utils_1['joinURL'])(this[_0xf93b1b(0x14a)][_0xf93b1b(0x128)][_0xf93b1b(0x166)]||'',_0xf93b1b(0x137)+this[_0xf93b1b(0x135)]+'/repos/'+_0x300ff3[_0xf93b1b(0x138)]),this['api'],this['credentials']));}catch(_0x459e6c){if(_0x459e6c instanceof api_error_1[_0xf93b1b(0x127)])throw _0x459e6c;throw new not_found_error_1['NotFoundError'](_0x459e6c);}}async[a206_0x54a1ec(0x123)](_0x22064c){const _0x5d8adb=a206_0x54a1ec;var _0x33f5cc;try{const _0x53dc2e=await this[_0x5d8adb(0x14a)]['get'](_0x5d8adb(0x169)+this[_0x5d8adb(0x135)]+_0x5d8adb(0x13d)+_0x22064c),_0x44bc85=repo_class_1[_0x5d8adb(0x151)][_0x5d8adb(0x131)](_0x53dc2e,(0x0,utils_1[_0x5d8adb(0x13f)])(this[_0x5d8adb(0x14a)][_0x5d8adb(0x128)]['baseURL']||'','/projects/'+this['project']+_0x5d8adb(0x13d)+_0x22064c),this[_0x5d8adb(0x124)],this[_0x5d8adb(0x14e)]),_0x41bea9=await this[_0x5d8adb(0x14a)][_0x5d8adb(0x154)](_0x44bc85[_0x5d8adb(0x13a)]+_0x5d8adb(0x15e))['then'](_0x3e8204=>_0x3e8204['values']);return _0x44bc85[_0x5d8adb(0x121)]=(_0x33f5cc=_0x41bea9[_0x5d8adb(0x165)](_0x53b5f4=>_0x53b5f4[_0x5d8adb(0x146)]===!![]))===null||_0x33f5cc===void 0x0?void 0x0:_0x33f5cc[_0x5d8adb(0x144)],_0x44bc85;}catch(_0x24bc6e){if(_0x24bc6e instanceof api_error_1[_0x5d8adb(0x127)])throw _0x24bc6e;throw new not_found_error_1[(_0x5d8adb(0x150))](_0x24bc6e);}}async[a206_0x54a1ec(0x157)](_0x3913c1,_0x4667db){const _0x6b5821=a206_0x54a1ec;try{const _0x3df529=await this[_0x6b5821(0x14a)]['put'](_0x6b5821(0x169)+this[_0x6b5821(0x135)]+_0x6b5821(0x13d)+_0x3913c1,_0x4667db),_0x3f5361=await this['request'][_0x6b5821(0x154)]('projects/'+this[_0x6b5821(0x135)]+_0x6b5821(0x13d)+_0x3913c1+_0x6b5821(0x13e)),_0x291078=repo_class_1[_0x6b5821(0x151)][_0x6b5821(0x131)](_0x3df529,(0x0,utils_1[_0x6b5821(0x13f)])(this[_0x6b5821(0x14a)][_0x6b5821(0x128)][_0x6b5821(0x166)]||'',_0x6b5821(0x137)+this['project']+'/repos/'+_0x3913c1),this[_0x6b5821(0x124)],this[_0x6b5821(0x14e)]);return _0x291078['defaultBranch']=_0x3f5361[_0x6b5821(0x144)],_0x291078;}catch(_0x34e66c){if(_0x34e66c instanceof api_error_1[_0x6b5821(0x127)])throw _0x34e66c;throw new not_found_error_1['NotFoundError'](_0x34e66c);}}async[a206_0x54a1ec(0x162)](_0xa440cf){const _0x29795b=a206_0x54a1ec;try{await this[_0x29795b(0x123)](_0xa440cf),await this[_0x29795b(0x14a)][_0x29795b(0x162)]('projects/'+this[_0x29795b(0x135)]+_0x29795b(0x13d)+_0xa440cf);}catch(_0x11d698){if(_0x11d698 instanceof api_error_1[_0x29795b(0x127)])throw _0x11d698;throw new bad_request_error_1[(_0x29795b(0x136))](_0x11d698);}}};function a206_0xcad6(_0x465ae6,_0x47b917){const _0xb88add=a206_0x55c2();return a206_0xcad6=function(_0x5ef121,_0x1314b3){_0x5ef121=_0x5ef121-0x120;let _0x55c2d2=_0xb88add[_0x5ef121];return _0x55c2d2;},a206_0xcad6(_0x465ae6,_0x47b917);}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a206_0x54a1ec(0x12d)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a206_0x54a1ec(0x14d)][a206_0x54a1ec(0x14e)])),__metadata(a206_0x54a1ec(0x152),[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a206_0x54a1ec(0x12c)]=BitbucketServerRepoService;