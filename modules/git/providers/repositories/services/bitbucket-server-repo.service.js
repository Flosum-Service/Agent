const a239_0x119512=a239_0x4a35;function a239_0x4a35(_0x42f56b,_0x2a283f){const _0x3defb1=a239_0x4877();return a239_0x4a35=function(_0x3170bd,_0x30419c){_0x3170bd=_0x3170bd-0x7b;let _0x4877ba=_0x3defb1[_0x3170bd];return _0x4877ba;},a239_0x4a35(_0x42f56b,_0x2a283f);}(function(_0x30200e,_0x4940f7){const _0x5e987e=a239_0x4a35,_0x2692a1=_0x30200e();while(!![]){try{const _0x2d43f7=-parseInt(_0x5e987e(0xb7))/0x1*(parseInt(_0x5e987e(0xa6))/0x2)+parseInt(_0x5e987e(0xa9))/0x3*(parseInt(_0x5e987e(0xa7))/0x4)+parseInt(_0x5e987e(0xba))/0x5*(parseInt(_0x5e987e(0xaa))/0x6)+-parseInt(_0x5e987e(0xbb))/0x7+-parseInt(_0x5e987e(0xbe))/0x8+parseInt(_0x5e987e(0x7b))/0x9+parseInt(_0x5e987e(0x91))/0xa;if(_0x2d43f7===_0x4940f7)break;else _0x2692a1['push'](_0x2692a1['shift']());}catch(_0x3e86f0){_0x2692a1['push'](_0x2692a1['shift']());}}}(a239_0x4877,0x26e65));const a239_0x30419c=(function(){let _0x21efbd=!![];return function(_0x573a2e,_0x100dcb){const _0x2e48c4=_0x21efbd?function(){const _0x171d65=a239_0x4a35;if(_0x100dcb){const _0x33629f=_0x100dcb[_0x171d65(0xb9)](_0x573a2e,arguments);return _0x100dcb=null,_0x33629f;}}:function(){};return _0x21efbd=![],_0x2e48c4;};}()),a239_0x3170bd=a239_0x30419c(this,function(){const _0x4e39fc=a239_0x4a35;return a239_0x3170bd[_0x4e39fc(0x8a)]()[_0x4e39fc(0x9f)](_0x4e39fc(0x8f))[_0x4e39fc(0x8a)]()[_0x4e39fc(0xc1)](a239_0x3170bd)[_0x4e39fc(0x9f)](_0x4e39fc(0x8f));});a239_0x3170bd();'use strict';var __decorate=this&&this['__decorate']||function(_0x35ac46,_0x52084e,_0x3cef8d,_0x5c7ffe){const _0x383027=a239_0x4a35;var _0x24f224=arguments[_0x383027(0x7d)],_0x2eb671=_0x24f224<0x3?_0x52084e:_0x5c7ffe===null?_0x5c7ffe=Object[_0x383027(0x82)](_0x52084e,_0x3cef8d):_0x5c7ffe,_0x517c12;if(typeof Reflect===_0x383027(0x84)&&typeof Reflect[_0x383027(0xb1)]===_0x383027(0x90))_0x2eb671=Reflect[_0x383027(0xb1)](_0x35ac46,_0x52084e,_0x3cef8d,_0x5c7ffe);else{for(var _0x1fcd44=_0x35ac46[_0x383027(0x7d)]-0x1;_0x1fcd44>=0x0;_0x1fcd44--)if(_0x517c12=_0x35ac46[_0x1fcd44])_0x2eb671=(_0x24f224<0x3?_0x517c12(_0x2eb671):_0x24f224>0x3?_0x517c12(_0x52084e,_0x3cef8d,_0x2eb671):_0x517c12(_0x52084e,_0x3cef8d))||_0x2eb671;}return _0x24f224>0x3&&_0x2eb671&&Object[_0x383027(0xb2)](_0x52084e,_0x3cef8d,_0x2eb671),_0x2eb671;},__metadata=this&&this['__metadata']||function(_0x577bdb,_0x18329b){const _0x10ebdd=a239_0x4a35;if(typeof Reflect===_0x10ebdd(0x84)&&typeof Reflect[_0x10ebdd(0x83)]===_0x10ebdd(0x90))return Reflect[_0x10ebdd(0x83)](_0x577bdb,_0x18329b);},__param=this&&this['__param']||function(_0xf9008c,_0xc1694d){return function(_0x4833cf,_0x3dc699){_0xc1694d(_0x4833cf,_0x3dc699,_0xf9008c);};};Object['defineProperty'](exports,a239_0x119512(0x9d),{'value':!![]}),exports[a239_0x119512(0x85)]=void 0x0;const bad_request_error_1=require(a239_0x119512(0xb5)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a239_0x119512(0xbf)),api_error_1=require('../../../../../core/errors/api.error'),bitbucket_server_api_service_1=require('../../api/bitbucket-server-api.service'),git_internal_1=require(a239_0x119512(0xc5)),utils_1=require(a239_0x119512(0xa2)),repo_class_1=require(a239_0x119512(0x7f)),git_repo_service_1=require(a239_0x119512(0x9c)),providers_tokens_1=require(a239_0x119512(0xc2)),bitbucket_server_credentials_dto_1=require(a239_0x119512(0xad));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a239_0x119512(0x93)]{constructor(_0x27899f,_0x5745f9){const _0x4938d1=a239_0x119512;super(_0x27899f),this[_0x4938d1(0x98)]=_0x27899f,this[_0x4938d1(0xbd)]=_0x5745f9['project'],this[_0x4938d1(0x9a)]=_0x5745f9;}async[a239_0x119512(0xa8)](_0x37df8d){const _0x5189f3=a239_0x119512;try{const _0x2a88a7={'name':_0x37df8d['name'],'scmId':_0x5189f3(0x9e),'defaultBranch':_0x37df8d[_0x5189f3(0xac)],..._0x37df8d[_0x5189f3(0xc3)]||{}},_0x5d032b=await this['request']['post'](_0x5189f3(0xb0)+this[_0x5189f3(0xbd)]+_0x5189f3(0xb6),_0x2a88a7),_0x3dbae6=repo_class_1[_0x5189f3(0x99)][_0x5189f3(0x8e)](_0x5d032b,'',this[_0x5189f3(0x98)],this[_0x5189f3(0x9a)]);return _0x37df8d['autoInit']&&await git_internal_1[_0x5189f3(0xc6)][_0x5189f3(0xc0)](_0x3dbae6,_0x37df8d[_0x5189f3(0xac)]||{'name':_0x5189f3(0x80)},'',this[_0x5189f3(0x9a)]),this[_0x5189f3(0xa0)](_0x3dbae6[_0x5189f3(0xc4)]);}catch(_0x221f33){if(_0x221f33 instanceof api_error_1[_0x5189f3(0x7c)])throw _0x221f33;throw new bad_request_error_1[(_0x5189f3(0xae))](_0x221f33);}}async[a239_0x119512(0xb4)](){const _0x3c645b=a239_0x119512;try{const _0x30c5a2=[];let _0x39897d;do{_0x39897d=await this['request'][_0x3c645b(0x81)]('projects/'+this[_0x3c645b(0xbd)]+_0x3c645b(0xb6),{'params':{'limit':0x64,'start':_0x39897d?_0x39897d[_0x3c645b(0xaf)]:0x0}}),_0x30c5a2[_0x3c645b(0x7e)](..._0x39897d[_0x3c645b(0x96)]);}while(!_0x39897d[_0x3c645b(0x8c)]);return _0x30c5a2[_0x3c645b(0x94)](_0x29116c=>repo_class_1[_0x3c645b(0x99)][_0x3c645b(0x8e)](_0x29116c,(0x0,utils_1[_0x3c645b(0xab)])(this[_0x3c645b(0x86)][_0x3c645b(0x87)][_0x3c645b(0xb3)]||'',_0x3c645b(0x95)+this['project']+'/repos/'+_0x29116c[_0x3c645b(0x88)]),this[_0x3c645b(0x98)],this[_0x3c645b(0x9a)]));}catch(_0x144523){if(_0x144523 instanceof api_error_1[_0x3c645b(0x7c)])throw _0x144523;throw new not_found_error_1[(_0x3c645b(0x92))](_0x144523);}}async[a239_0x119512(0xa0)](_0x3fe155){const _0x4a2abd=a239_0x119512;var _0x1f0dfc;try{const _0x41a860=await this[_0x4a2abd(0x86)]['get']('projects/'+this[_0x4a2abd(0xbd)]+_0x4a2abd(0xc8)+_0x3fe155),_0x3a2815=repo_class_1[_0x4a2abd(0x99)][_0x4a2abd(0x8e)](_0x41a860,(0x0,utils_1[_0x4a2abd(0xab)])(this[_0x4a2abd(0x86)][_0x4a2abd(0x87)]['baseURL']||'','/projects/'+this['project']+'/repos/'+_0x3fe155),this[_0x4a2abd(0x98)],this[_0x4a2abd(0x9a)]),_0x259173=await this[_0x4a2abd(0x86)][_0x4a2abd(0x81)](_0x3a2815[_0x4a2abd(0xbc)]+'/branches')['then'](_0x476955=>_0x476955['values']);return _0x3a2815[_0x4a2abd(0xac)]=(_0x1f0dfc=_0x259173[_0x4a2abd(0xc7)](_0xa42d92=>_0xa42d92[_0x4a2abd(0xb8)]===!![]))===null||_0x1f0dfc===void 0x0?void 0x0:_0x1f0dfc[_0x4a2abd(0xa4)],_0x3a2815;}catch(_0x28ae67){if(_0x28ae67 instanceof api_error_1[_0x4a2abd(0x7c)])throw _0x28ae67;throw new not_found_error_1[(_0x4a2abd(0x92))](_0x28ae67);}}async[a239_0x119512(0xa3)](_0x30b7be,_0x15a3b1){const _0x41ba5a=a239_0x119512;try{const _0x5e3a9c=await this[_0x41ba5a(0x86)][_0x41ba5a(0xa1)](_0x41ba5a(0xb0)+this[_0x41ba5a(0xbd)]+'/repos/'+_0x30b7be,_0x15a3b1),_0x24dd05=await this[_0x41ba5a(0x86)][_0x41ba5a(0x81)]('projects/'+this[_0x41ba5a(0xbd)]+'/repos/'+_0x30b7be+_0x41ba5a(0x8d)),_0x641e53=repo_class_1[_0x41ba5a(0x99)][_0x41ba5a(0x8e)](_0x5e3a9c,(0x0,utils_1['joinURL'])(this[_0x41ba5a(0x86)]['defaults'][_0x41ba5a(0xb3)]||'',_0x41ba5a(0x95)+this[_0x41ba5a(0xbd)]+_0x41ba5a(0xc8)+_0x30b7be),this[_0x41ba5a(0x98)],this[_0x41ba5a(0x9a)]);return _0x641e53['defaultBranch']=_0x24dd05['displayId'],_0x641e53;}catch(_0x127a21){if(_0x127a21 instanceof api_error_1[_0x41ba5a(0x7c)])throw _0x127a21;throw new not_found_error_1['NotFoundError'](_0x127a21);}}async[a239_0x119512(0x8b)](_0x2bddd6){const _0x4f1d83=a239_0x119512;try{await this['getOne'](_0x2bddd6),await this['request'][_0x4f1d83(0x8b)](_0x4f1d83(0xb0)+this[_0x4f1d83(0xbd)]+_0x4f1d83(0xc8)+_0x2bddd6);}catch(_0x95087d){if(_0x95087d instanceof api_error_1['ApiError'])throw _0x95087d;throw new bad_request_error_1['BadRequestError'](_0x95087d);}}};function a239_0x4877(){const _0x47b672=['object','BitbucketServerRepoService','request','defaults','slug','design:paramtypes','toString','delete','isLastPage','/default-branch','fromBitbucketServer','(((.+)+)+)+$','function','3656790yquIRc','NotFoundError','GitRepoService','map','/projects/','values','BitbucketServerCredentialsDto','api','Repo','credentials','Service','./git-repo.service','__esModule','git','search','getOne','put','../../../../shared/utils','update','displayId','BitbucketServerApiService','346vRatwY','1052bKdHJg','create','1707dFDYli','267522HBsEjT','joinURL','defaultBranch','../../credentials/dto/bitbucket-server-credentials.dto','BadRequestError','nextPageStart','projects/','decorate','defineProperty','baseURL','getAll','../../../../../core/errors/bad-request.error','/repos','1188sbEQYR','isDefault','apply','15lKSoDm','2073120vPemeR','apiUrl','project','1978240tFHLXz','typedi','createEmptyBranch','constructor','../../providers.tokens','apiBody','name','../../../internal/git.internal','Git','find','/repos/','2332890HHYcAf','ApiError','length','push','../repo.class','master','get','getOwnPropertyDescriptor','metadata'];a239_0x4877=function(){return _0x47b672;};return a239_0x4877();}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a239_0x119512(0x9b)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1['Tokens'][a239_0x119512(0x9a)])),__metadata(a239_0x119512(0x89),[bitbucket_server_api_service_1[a239_0x119512(0xa5)],bitbucket_server_credentials_dto_1[a239_0x119512(0x97)]])],BitbucketServerRepoService),exports['BitbucketServerRepoService']=BitbucketServerRepoService;