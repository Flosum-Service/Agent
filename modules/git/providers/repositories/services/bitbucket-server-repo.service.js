const a201_0x5e4edb=a201_0x55ba;(function(_0x37b9c9,_0x327dee){const _0x39d243=a201_0x55ba,_0x25a62d=_0x37b9c9();while(!![]){try{const _0x289e0f=parseInt(_0x39d243(0x123))/0x1*(-parseInt(_0x39d243(0x14b))/0x2)+-parseInt(_0x39d243(0x14e))/0x3+parseInt(_0x39d243(0x137))/0x4+parseInt(_0x39d243(0x12a))/0x5*(-parseInt(_0x39d243(0x145))/0x6)+-parseInt(_0x39d243(0x12f))/0x7*(parseInt(_0x39d243(0x143))/0x8)+-parseInt(_0x39d243(0x134))/0x9+parseInt(_0x39d243(0x153))/0xa;if(_0x289e0f===_0x327dee)break;else _0x25a62d['push'](_0x25a62d['shift']());}catch(_0x44e906){_0x25a62d['push'](_0x25a62d['shift']());}}}(a201_0x48b5,0x6e29c));function a201_0x55ba(_0x35ccb0,_0xec3049){const _0x3516bb=a201_0x48b5();return a201_0x55ba=function(_0x168257,_0x3d3fb6){_0x168257=_0x168257-0x111;let _0x48b5c6=_0x3516bb[_0x168257];return _0x48b5c6;},a201_0x55ba(_0x35ccb0,_0xec3049);}const a201_0x3d3fb6=(function(){let _0x3aa3ad=!![];return function(_0x2ec366,_0xf4e6b){const _0x2c1686=_0x3aa3ad?function(){if(_0xf4e6b){const _0x292890=_0xf4e6b['apply'](_0x2ec366,arguments);return _0xf4e6b=null,_0x292890;}}:function(){};return _0x3aa3ad=![],_0x2c1686;};}()),a201_0x168257=a201_0x3d3fb6(this,function(){const _0x5ddf94=a201_0x55ba;return a201_0x168257['toString']()['search'](_0x5ddf94(0x144))['toString']()[_0x5ddf94(0x133)](a201_0x168257)[_0x5ddf94(0x113)](_0x5ddf94(0x144));});function a201_0x48b5(){const _0xda9faa=['request','map','9412890DtmNJM','delete','../../../../../core/errors/api.error','projects/','then','search','ApiError','../../credentials/dto/bitbucket-server-credentials.dto','GitRepoService','./git-repo.service','NotFoundError','object','metadata','length','Repo','displayId','defaultBranch','Git','getOne','typedi','/default-branch','918lHcmjR','../../../../../core/errors/not-found.error','put','__metadata','/repos/','joinURL','../../../internal/git.internal','446965nqRwfl','isLastPage','project','getAll','get','2342851alybne','../../api/bitbucket-server-api.service','Inject','isDefault','constructor','226773bluRdm','/repos','BitbucketServerRepoService','301356EyeHCS','autoInit','credentials','../../../../shared/utils','baseURL','__param','../../../../../core/errors/bad-request.error','getOwnPropertyDescriptor','fromBitbucketServer','git','create','name','8UZyZRB','(((.+)+)+)+$','6psRkAs','defaults','/projects/','BadRequestError','function','api','206DBXMtF','__decorate','decorate','64689BtMmqZ','../../providers.tokens','update'];a201_0x48b5=function(){return _0xda9faa;};return a201_0x48b5();}a201_0x168257();'use strict';var __decorate=this&&this[a201_0x5e4edb(0x14c)]||function(_0x26ffbe,_0x3e23b4,_0x59987b,_0x1ec724){const _0x543b7b=a201_0x5e4edb;var _0x55780d=arguments['length'],_0x23da89=_0x55780d<0x3?_0x3e23b4:_0x1ec724===null?_0x1ec724=Object[_0x543b7b(0x13e)](_0x3e23b4,_0x59987b):_0x1ec724,_0x6e4ab7;if(typeof Reflect===_0x543b7b(0x119)&&typeof Reflect[_0x543b7b(0x14d)]===_0x543b7b(0x149))_0x23da89=Reflect[_0x543b7b(0x14d)](_0x26ffbe,_0x3e23b4,_0x59987b,_0x1ec724);else{for(var _0x53cc82=_0x26ffbe[_0x543b7b(0x11b)]-0x1;_0x53cc82>=0x0;_0x53cc82--)if(_0x6e4ab7=_0x26ffbe[_0x53cc82])_0x23da89=(_0x55780d<0x3?_0x6e4ab7(_0x23da89):_0x55780d>0x3?_0x6e4ab7(_0x3e23b4,_0x59987b,_0x23da89):_0x6e4ab7(_0x3e23b4,_0x59987b))||_0x23da89;}return _0x55780d>0x3&&_0x23da89&&Object['defineProperty'](_0x3e23b4,_0x59987b,_0x23da89),_0x23da89;},__metadata=this&&this[a201_0x5e4edb(0x126)]||function(_0x14fc8b,_0x45de1b){const _0x20cc3e=a201_0x5e4edb;if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect[_0x20cc3e(0x11a)](_0x14fc8b,_0x45de1b);},__param=this&&this[a201_0x5e4edb(0x13c)]||function(_0xfb9fed,_0x3b25b7){return function(_0x3b2c5,_0x222b0b){_0x3b25b7(_0x3b2c5,_0x222b0b,_0xfb9fed);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a201_0x5e4edb(0x136)]=void 0x0;const bad_request_error_1=require(a201_0x5e4edb(0x13d)),not_found_error_1=require(a201_0x5e4edb(0x124)),typedi_1=require(a201_0x5e4edb(0x121)),api_error_1=require(a201_0x5e4edb(0x155)),bitbucket_server_api_service_1=require(a201_0x5e4edb(0x130)),git_internal_1=require(a201_0x5e4edb(0x129)),utils_1=require(a201_0x5e4edb(0x13a)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a201_0x5e4edb(0x117)),providers_tokens_1=require(a201_0x5e4edb(0x14f)),bitbucket_server_credentials_dto_1=require(a201_0x5e4edb(0x115));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a201_0x5e4edb(0x116)]{constructor(_0x8bc5e1,_0x3b1589){const _0x5cdf8=a201_0x5e4edb;super(_0x8bc5e1),this[_0x5cdf8(0x14a)]=_0x8bc5e1,this[_0x5cdf8(0x12c)]=_0x3b1589[_0x5cdf8(0x12c)],this['credentials']=_0x3b1589;}async[a201_0x5e4edb(0x141)](_0x277249){const _0x1398a6=a201_0x5e4edb;try{const _0x560aef={'name':_0x277249[_0x1398a6(0x142)],'scmId':_0x1398a6(0x140),'defaultBranch':_0x277249['defaultBranch'],..._0x277249['apiBody']||{}},_0xf5e0f6=await this['request']['post']('projects/'+this[_0x1398a6(0x12c)]+'/repos',_0x560aef),_0x181349=repo_class_1[_0x1398a6(0x11c)]['fromBitbucketServer'](_0xf5e0f6,'',this[_0x1398a6(0x14a)],this[_0x1398a6(0x139)]);return _0x277249[_0x1398a6(0x138)]&&await git_internal_1[_0x1398a6(0x11f)]['createEmptyBranch'](_0x181349,_0x277249[_0x1398a6(0x11e)]||'master','',this[_0x1398a6(0x139)]),this['getOne'](_0x181349[_0x1398a6(0x142)]);}catch(_0x30e95c){if(_0x30e95c instanceof api_error_1['ApiError'])throw _0x30e95c;throw new bad_request_error_1[(_0x1398a6(0x148))](_0x30e95c);}}async[a201_0x5e4edb(0x12d)](){const _0x4b37a7=a201_0x5e4edb;try{const _0x38894c=[];let _0xc8aa81;do{_0xc8aa81=await this[_0x4b37a7(0x151)][_0x4b37a7(0x12e)](_0x4b37a7(0x111)+this[_0x4b37a7(0x12c)]+_0x4b37a7(0x135),{'params':{'limit':0x64,'start':_0xc8aa81?_0xc8aa81['nextPageStart']:0x0}}),_0x38894c['push'](..._0xc8aa81['values']);}while(!_0xc8aa81[_0x4b37a7(0x12b)]);return _0x38894c[_0x4b37a7(0x152)](_0x9ed80=>repo_class_1[_0x4b37a7(0x11c)][_0x4b37a7(0x13f)](_0x9ed80,(0x0,utils_1['joinURL'])(this['request'][_0x4b37a7(0x146)]['baseURL']||'','/projects/'+this['project']+_0x4b37a7(0x127)+_0x9ed80['slug']),this[_0x4b37a7(0x14a)],this[_0x4b37a7(0x139)]));}catch(_0xc10d5b){if(_0xc10d5b instanceof api_error_1['ApiError'])throw _0xc10d5b;throw new not_found_error_1['NotFoundError'](_0xc10d5b);}}async[a201_0x5e4edb(0x120)](_0x31887b){const _0x4ea008=a201_0x5e4edb;var _0x527b9f;try{const _0x1fa5ec=await this[_0x4ea008(0x151)][_0x4ea008(0x12e)](_0x4ea008(0x111)+this['project']+'/repos/'+_0x31887b),_0x24583d=repo_class_1['Repo'][_0x4ea008(0x13f)](_0x1fa5ec,(0x0,utils_1[_0x4ea008(0x128)])(this[_0x4ea008(0x151)][_0x4ea008(0x146)][_0x4ea008(0x13b)]||'','/projects/'+this[_0x4ea008(0x12c)]+'/repos/'+_0x31887b),this[_0x4ea008(0x14a)],this[_0x4ea008(0x139)]),_0x4ba29f=await this['request']['get'](_0x24583d['apiUrl']+'/branches')[_0x4ea008(0x112)](_0x21e392=>_0x21e392['values']);return _0x24583d[_0x4ea008(0x11e)]=(_0x527b9f=_0x4ba29f['find'](_0x726780=>_0x726780[_0x4ea008(0x132)]===!![]))===null||_0x527b9f===void 0x0?void 0x0:_0x527b9f[_0x4ea008(0x11d)],_0x24583d;}catch(_0x39a2f2){if(_0x39a2f2 instanceof api_error_1[_0x4ea008(0x114)])throw _0x39a2f2;throw new not_found_error_1[(_0x4ea008(0x118))](_0x39a2f2);}}async[a201_0x5e4edb(0x150)](_0x293fb3,_0x3fc671){const _0x49d3e1=a201_0x5e4edb;try{const _0x21eaf1=await this[_0x49d3e1(0x151)][_0x49d3e1(0x125)](_0x49d3e1(0x111)+this[_0x49d3e1(0x12c)]+'/repos/'+_0x293fb3,_0x3fc671),_0x23a474=await this[_0x49d3e1(0x151)][_0x49d3e1(0x12e)](_0x49d3e1(0x111)+this[_0x49d3e1(0x12c)]+'/repos/'+_0x293fb3+_0x49d3e1(0x122)),_0x58d7a4=repo_class_1[_0x49d3e1(0x11c)][_0x49d3e1(0x13f)](_0x21eaf1,(0x0,utils_1[_0x49d3e1(0x128)])(this[_0x49d3e1(0x151)][_0x49d3e1(0x146)]['baseURL']||'',_0x49d3e1(0x147)+this[_0x49d3e1(0x12c)]+_0x49d3e1(0x127)+_0x293fb3),this[_0x49d3e1(0x14a)],this[_0x49d3e1(0x139)]);return _0x58d7a4[_0x49d3e1(0x11e)]=_0x23a474[_0x49d3e1(0x11d)],_0x58d7a4;}catch(_0x15d7f3){if(_0x15d7f3 instanceof api_error_1[_0x49d3e1(0x114)])throw _0x15d7f3;throw new not_found_error_1[(_0x49d3e1(0x118))](_0x15d7f3);}}async['delete'](_0xbd9901){const _0x6fb89f=a201_0x5e4edb;try{await this[_0x6fb89f(0x120)](_0xbd9901),await this[_0x6fb89f(0x151)][_0x6fb89f(0x154)](_0x6fb89f(0x111)+this[_0x6fb89f(0x12c)]+_0x6fb89f(0x127)+_0xbd9901);}catch(_0x51ce35){if(_0x51ce35 instanceof api_error_1[_0x6fb89f(0x114)])throw _0x51ce35;throw new bad_request_error_1['BadRequestError'](_0x51ce35);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a201_0x5e4edb(0x131)])(providers_tokens_1['Tokens']['credentials'])),__metadata('design:paramtypes',[bitbucket_server_api_service_1['BitbucketServerApiService'],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a201_0x5e4edb(0x136)]=BitbucketServerRepoService;