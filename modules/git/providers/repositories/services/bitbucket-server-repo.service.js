const a200_0x2a17e5=a200_0x402f;function a200_0x25f1(){const _0x49c69f=['getAll','143eShuaQ','baseURL','Service','map','function','__param','../../credentials/dto/bitbucket-server-credentials.dto','fromBitbucketServer','master','5901360kaWDrX','metadata','6kTUfqf','106780bnTwSw','defaultBranch','design:paramtypes','__decorate','name','isDefault','defaults','post','ApiError','GitRepoService','10640196jFuYSZ','32pLgWyW','displayId','project','typedi','autoInit','find','NotFoundError','defineProperty','projects/','8989351kHImUw','/branches','search','(((.+)+)+)+$','/repos/','__metadata','credentials','values','slug','../../../internal/git.internal','__esModule','getOwnPropertyDescriptor','getOne','apiUrl','13218104SXKCyg','/repos','joinURL','constructor','git','push','../../../../../core/errors/bad-request.error','delete','Repo','nextPageStart','decorate','get','/projects/','length','BitbucketServerRepoService','apply','2955530tnbiTP','request','6wMvAkP','../../api/bitbucket-server-api.service','apiBody','put','BitbucketServerApiService','BadRequestError','288679Rtsyqr','isLastPage','Tokens','../../../../../core/errors/api.error','api','Inject','toString'];a200_0x25f1=function(){return _0x49c69f;};return a200_0x25f1();}(function(_0x90944d,_0x1e6dc2){const _0x1dc256=a200_0x402f,_0x4df103=_0x90944d();while(!![]){try{const _0x9853bd=parseInt(_0x1dc256(0xa1))/0x1*(-parseInt(_0x1dc256(0xb4))/0x2)+parseInt(_0x1dc256(0xb2))/0x3+-parseInt(_0x1dc256(0xc0))/0x4*(-parseInt(_0x1dc256(0xb5))/0x5)+-parseInt(_0x1dc256(0x9b))/0x6*(parseInt(_0x1dc256(0xc9))/0x7)+-parseInt(_0x1dc256(0xd7))/0x8+-parseInt(_0x1dc256(0xbf))/0x9+-parseInt(_0x1dc256(0x99))/0xa*(-parseInt(_0x1dc256(0xa9))/0xb);if(_0x9853bd===_0x1e6dc2)break;else _0x4df103['push'](_0x4df103['shift']());}catch(_0x3152f5){_0x4df103['push'](_0x4df103['shift']());}}}(a200_0x25f1,0xf305c));const a200_0x11eb55=(function(){let _0x5ccdae=!![];return function(_0x19c1de,_0x588ae2){const _0x19146c=_0x5ccdae?function(){const _0x25cfa7=a200_0x402f;if(_0x588ae2){const _0x5c8aaa=_0x588ae2[_0x25cfa7(0x98)](_0x19c1de,arguments);return _0x588ae2=null,_0x5c8aaa;}}:function(){};return _0x5ccdae=![],_0x19146c;};}()),a200_0x9952e7=a200_0x11eb55(this,function(){const _0x31573d=a200_0x402f;return a200_0x9952e7[_0x31573d(0xa7)]()[_0x31573d(0xcb)](_0x31573d(0xcc))['toString']()[_0x31573d(0x8c)](a200_0x9952e7)['search'](_0x31573d(0xcc));});a200_0x9952e7();'use strict';function a200_0x402f(_0x2a3d89,_0x1bc62e){const _0x53eedd=a200_0x25f1();return a200_0x402f=function(_0x9952e7,_0x11eb55){_0x9952e7=_0x9952e7-0x8c;let _0x25f1d4=_0x53eedd[_0x9952e7];return _0x25f1d4;},a200_0x402f(_0x2a3d89,_0x1bc62e);}var __decorate=this&&this[a200_0x2a17e5(0xb8)]||function(_0x4b8a23,_0x5dfb56,_0x2952bf,_0x2b1149){const _0x492cda=a200_0x2a17e5;var _0x1d9642=arguments['length'],_0x14d2eb=_0x1d9642<0x3?_0x5dfb56:_0x2b1149===null?_0x2b1149=Object[_0x492cda(0xd4)](_0x5dfb56,_0x2952bf):_0x2b1149,_0x5ace9d;if(typeof Reflect==='object'&&typeof Reflect[_0x492cda(0x93)]==='function')_0x14d2eb=Reflect['decorate'](_0x4b8a23,_0x5dfb56,_0x2952bf,_0x2b1149);else{for(var _0x54ef71=_0x4b8a23[_0x492cda(0x96)]-0x1;_0x54ef71>=0x0;_0x54ef71--)if(_0x5ace9d=_0x4b8a23[_0x54ef71])_0x14d2eb=(_0x1d9642<0x3?_0x5ace9d(_0x14d2eb):_0x1d9642>0x3?_0x5ace9d(_0x5dfb56,_0x2952bf,_0x14d2eb):_0x5ace9d(_0x5dfb56,_0x2952bf))||_0x14d2eb;}return _0x1d9642>0x3&&_0x14d2eb&&Object[_0x492cda(0xc7)](_0x5dfb56,_0x2952bf,_0x14d2eb),_0x14d2eb;},__metadata=this&&this[a200_0x2a17e5(0xce)]||function(_0x59d906,_0x1f303d){const _0x6d00ff=a200_0x2a17e5;if(typeof Reflect==='object'&&typeof Reflect[_0x6d00ff(0xb3)]===_0x6d00ff(0xad))return Reflect[_0x6d00ff(0xb3)](_0x59d906,_0x1f303d);},__param=this&&this[a200_0x2a17e5(0xae)]||function(_0x357c7f,_0x217a78){return function(_0x588b95,_0x3168b9){_0x217a78(_0x588b95,_0x3168b9,_0x357c7f);};};Object['defineProperty'](exports,a200_0x2a17e5(0xd3),{'value':!![]}),exports['BitbucketServerRepoService']=void 0x0;const bad_request_error_1=require(a200_0x2a17e5(0x8f)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a200_0x2a17e5(0xc3)),api_error_1=require(a200_0x2a17e5(0xa4)),bitbucket_server_api_service_1=require(a200_0x2a17e5(0x9c)),git_internal_1=require(a200_0x2a17e5(0xd2)),utils_1=require('../../../../shared/utils'),repo_class_1=require('../repo.class'),git_repo_service_1=require('./git-repo.service'),providers_tokens_1=require('../../providers.tokens'),bitbucket_server_credentials_dto_1=require(a200_0x2a17e5(0xaf));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a200_0x2a17e5(0xbe)]{constructor(_0x35744d,_0x1f7528){const _0x333b28=a200_0x2a17e5;super(_0x35744d),this[_0x333b28(0xa5)]=_0x35744d,this['project']=_0x1f7528[_0x333b28(0xc2)],this['credentials']=_0x1f7528;}async['create'](_0x32ff2){const _0x4e3e18=a200_0x2a17e5;try{const _0x859802={'name':_0x32ff2['name'],'scmId':_0x4e3e18(0x8d),'defaultBranch':_0x32ff2[_0x4e3e18(0xb6)],..._0x32ff2[_0x4e3e18(0x9d)]||{}},_0x538bb9=await this[_0x4e3e18(0x9a)][_0x4e3e18(0xbc)](_0x4e3e18(0xc8)+this[_0x4e3e18(0xc2)]+'/repos',_0x859802),_0x36e35c=repo_class_1[_0x4e3e18(0x91)][_0x4e3e18(0xb0)](_0x538bb9,'',this[_0x4e3e18(0xa5)],this['credentials']);return _0x32ff2[_0x4e3e18(0xc4)]&&await git_internal_1['Git']['createEmptyBranch'](_0x36e35c,_0x32ff2['defaultBranch']||_0x4e3e18(0xb1),'',this[_0x4e3e18(0xcf)]),this[_0x4e3e18(0xd5)](_0x36e35c[_0x4e3e18(0xb9)]);}catch(_0x8334d6){if(_0x8334d6 instanceof api_error_1[_0x4e3e18(0xbd)])throw _0x8334d6;throw new bad_request_error_1[(_0x4e3e18(0xa0))](_0x8334d6);}}async[a200_0x2a17e5(0xa8)](){const _0x369326=a200_0x2a17e5;try{const _0x1c3d0d=[];let _0x3c6b82;do{_0x3c6b82=await this[_0x369326(0x9a)]['get'](_0x369326(0xc8)+this[_0x369326(0xc2)]+_0x369326(0xd8),{'params':{'limit':0x64,'start':_0x3c6b82?_0x3c6b82[_0x369326(0x92)]:0x0}}),_0x1c3d0d[_0x369326(0x8e)](..._0x3c6b82[_0x369326(0xd0)]);}while(!_0x3c6b82[_0x369326(0xa2)]);return _0x1c3d0d[_0x369326(0xac)](_0x4bd0b0=>repo_class_1[_0x369326(0x91)][_0x369326(0xb0)](_0x4bd0b0,(0x0,utils_1[_0x369326(0xd9)])(this[_0x369326(0x9a)]['defaults']['baseURL']||'','/projects/'+this[_0x369326(0xc2)]+_0x369326(0xcd)+_0x4bd0b0[_0x369326(0xd1)]),this[_0x369326(0xa5)],this[_0x369326(0xcf)]));}catch(_0x133bb9){if(_0x133bb9 instanceof api_error_1[_0x369326(0xbd)])throw _0x133bb9;throw new not_found_error_1['NotFoundError'](_0x133bb9);}}async[a200_0x2a17e5(0xd5)](_0x307bfb){const _0x52e589=a200_0x2a17e5;var _0x58b434;try{const _0x588f36=await this[_0x52e589(0x9a)][_0x52e589(0x94)]('projects/'+this[_0x52e589(0xc2)]+'/repos/'+_0x307bfb),_0x33d6c4=repo_class_1[_0x52e589(0x91)]['fromBitbucketServer'](_0x588f36,(0x0,utils_1['joinURL'])(this[_0x52e589(0x9a)][_0x52e589(0xbb)][_0x52e589(0xaa)]||'',_0x52e589(0x95)+this[_0x52e589(0xc2)]+_0x52e589(0xcd)+_0x307bfb),this[_0x52e589(0xa5)],this[_0x52e589(0xcf)]),_0x4c2d60=await this['request'][_0x52e589(0x94)](_0x33d6c4[_0x52e589(0xd6)]+_0x52e589(0xca))['then'](_0x4c304a=>_0x4c304a[_0x52e589(0xd0)]);return _0x33d6c4[_0x52e589(0xb6)]=(_0x58b434=_0x4c2d60[_0x52e589(0xc5)](_0x474f8e=>_0x474f8e[_0x52e589(0xba)]===!![]))===null||_0x58b434===void 0x0?void 0x0:_0x58b434['displayId'],_0x33d6c4;}catch(_0xbf492d){if(_0xbf492d instanceof api_error_1['ApiError'])throw _0xbf492d;throw new not_found_error_1['NotFoundError'](_0xbf492d);}}async['update'](_0x7369f4,_0x372690){const _0x2a3aa7=a200_0x2a17e5;try{const _0x1bb230=await this[_0x2a3aa7(0x9a)][_0x2a3aa7(0x9e)](_0x2a3aa7(0xc8)+this[_0x2a3aa7(0xc2)]+_0x2a3aa7(0xcd)+_0x7369f4,_0x372690),_0x2ba3f4=await this['request']['get'](_0x2a3aa7(0xc8)+this[_0x2a3aa7(0xc2)]+_0x2a3aa7(0xcd)+_0x7369f4+'/default-branch'),_0x1ded8a=repo_class_1[_0x2a3aa7(0x91)][_0x2a3aa7(0xb0)](_0x1bb230,(0x0,utils_1['joinURL'])(this[_0x2a3aa7(0x9a)][_0x2a3aa7(0xbb)][_0x2a3aa7(0xaa)]||'','/projects/'+this[_0x2a3aa7(0xc2)]+_0x2a3aa7(0xcd)+_0x7369f4),this[_0x2a3aa7(0xa5)],this['credentials']);return _0x1ded8a[_0x2a3aa7(0xb6)]=_0x2ba3f4[_0x2a3aa7(0xc1)],_0x1ded8a;}catch(_0x2e4edd){if(_0x2e4edd instanceof api_error_1[_0x2a3aa7(0xbd)])throw _0x2e4edd;throw new not_found_error_1[(_0x2a3aa7(0xc6))](_0x2e4edd);}}async[a200_0x2a17e5(0x90)](_0x218ac0){const _0x3a8889=a200_0x2a17e5;try{await this[_0x3a8889(0xd5)](_0x218ac0),await this[_0x3a8889(0x9a)][_0x3a8889(0x90)](_0x3a8889(0xc8)+this[_0x3a8889(0xc2)]+_0x3a8889(0xcd)+_0x218ac0);}catch(_0x4f2524){if(_0x4f2524 instanceof api_error_1[_0x3a8889(0xbd)])throw _0x4f2524;throw new bad_request_error_1[(_0x3a8889(0xa0))](_0x4f2524);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1[a200_0x2a17e5(0xab)])(),__param(0x1,(0x0,typedi_1[a200_0x2a17e5(0xa6)])(providers_tokens_1[a200_0x2a17e5(0xa3)][a200_0x2a17e5(0xcf)])),__metadata(a200_0x2a17e5(0xb7),[bitbucket_server_api_service_1[a200_0x2a17e5(0x9f)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a200_0x2a17e5(0x97)]=BitbucketServerRepoService;