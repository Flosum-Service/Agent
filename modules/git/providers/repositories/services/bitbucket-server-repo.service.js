const a239_0xec7205=a239_0x5810;(function(_0x804054,_0x5125aa){const _0x2e9a32=a239_0x5810,_0x34cb91=_0x804054();while(!![]){try{const _0x115461=parseInt(_0x2e9a32(0x22d))/0x1+-parseInt(_0x2e9a32(0x231))/0x2+-parseInt(_0x2e9a32(0x226))/0x3*(parseInt(_0x2e9a32(0x22a))/0x4)+parseInt(_0x2e9a32(0x1f5))/0x5*(parseInt(_0x2e9a32(0x221))/0x6)+parseInt(_0x2e9a32(0x235))/0x7*(parseInt(_0x2e9a32(0x224))/0x8)+parseInt(_0x2e9a32(0x1ff))/0x9*(-parseInt(_0x2e9a32(0x232))/0xa)+parseInt(_0x2e9a32(0x207))/0xb;if(_0x115461===_0x5125aa)break;else _0x34cb91['push'](_0x34cb91['shift']());}catch(_0x338520){_0x34cb91['push'](_0x34cb91['shift']());}}}(a239_0x286a,0x2224e));const a239_0x531dbf=(function(){let _0x542cfd=!![];return function(_0x382c2a,_0x360984){const _0xac3e9d=_0x542cfd?function(){if(_0x360984){const _0xcb5a20=_0x360984['apply'](_0x382c2a,arguments);return _0x360984=null,_0xcb5a20;}}:function(){};return _0x542cfd=![],_0xac3e9d;};}()),a239_0x1f3b49=a239_0x531dbf(this,function(){const _0x113993=a239_0x5810;return a239_0x1f3b49['toString']()[_0x113993(0x203)](_0x113993(0x21a))[_0x113993(0x233)]()[_0x113993(0x20b)](a239_0x1f3b49)[_0x113993(0x203)](_0x113993(0x21a));});function a239_0x286a(){const _0x608527=['48AlItOX','master','638046UlkdWp','/repos/','projects/','displayId','4IbjUWR','metadata','BitbucketServerApiService','241933kYsttS','getOne','../../../internal/git.internal','create','269722DxojbM','440200TKzMsH','toString','length','134911uNdHyy','request','../../providers.tokens','isDefault','apiBody','../../api/bitbucket-server-api.service','createEmptyBranch','../../credentials/dto/bitbucket-server-credentials.dto','find','update','design:paramtypes','put','apiUrl','defineProperty','5RHwfeL','then','Git','api','BadRequestError','delete','../repo.class','GitRepoService','/branches','__metadata','27uSgJxo','git','map','function','search','defaults','Service','credentials','2272017zllUQr','ApiError','BitbucketServerRepoService','project','constructor','autoInit','NotFoundError','joinURL','Inject','values','slug','defaultBranch','fromBitbucketServer','nextPageStart','object','name','Repo','post','get','(((.+)+)+)+$','decorate','baseURL','/projects/','../../../../../core/errors/bad-request.error','typedi','../../../../../core/errors/api.error','332034zDhIub','/repos','./git-repo.service'];a239_0x286a=function(){return _0x608527;};return a239_0x286a();}a239_0x1f3b49();'use strict';var __decorate=this&&this['__decorate']||function(_0x220dc3,_0x31625b,_0x49f3a1,_0x34c137){const _0x11b065=a239_0x5810;var _0x3992cb=arguments['length'],_0x1d7eeb=_0x3992cb<0x3?_0x31625b:_0x34c137===null?_0x34c137=Object['getOwnPropertyDescriptor'](_0x31625b,_0x49f3a1):_0x34c137,_0x2ca150;if(typeof Reflect==='object'&&typeof Reflect[_0x11b065(0x21b)]===_0x11b065(0x202))_0x1d7eeb=Reflect['decorate'](_0x220dc3,_0x31625b,_0x49f3a1,_0x34c137);else{for(var _0x58b7c7=_0x220dc3[_0x11b065(0x234)]-0x1;_0x58b7c7>=0x0;_0x58b7c7--)if(_0x2ca150=_0x220dc3[_0x58b7c7])_0x1d7eeb=(_0x3992cb<0x3?_0x2ca150(_0x1d7eeb):_0x3992cb>0x3?_0x2ca150(_0x31625b,_0x49f3a1,_0x1d7eeb):_0x2ca150(_0x31625b,_0x49f3a1))||_0x1d7eeb;}return _0x3992cb>0x3&&_0x1d7eeb&&Object[_0x11b065(0x1f4)](_0x31625b,_0x49f3a1,_0x1d7eeb),_0x1d7eeb;},__metadata=this&&this[a239_0xec7205(0x1fe)]||function(_0x4114c8,_0x19633b){const _0x11cab1=a239_0xec7205;if(typeof Reflect===_0x11cab1(0x215)&&typeof Reflect['metadata']==='function')return Reflect[_0x11cab1(0x22b)](_0x4114c8,_0x19633b);},__param=this&&this['__param']||function(_0x508bfb,_0x4df705){return function(_0x6ff2ab,_0x5b3050){_0x4df705(_0x6ff2ab,_0x5b3050,_0x508bfb);};};Object[a239_0xec7205(0x1f4)](exports,'__esModule',{'value':!![]}),exports[a239_0xec7205(0x209)]=void 0x0;const bad_request_error_1=require(a239_0xec7205(0x21e)),not_found_error_1=require('../../../../../core/errors/not-found.error'),typedi_1=require(a239_0xec7205(0x21f)),api_error_1=require(a239_0xec7205(0x220)),bitbucket_server_api_service_1=require(a239_0xec7205(0x23a)),git_internal_1=require(a239_0xec7205(0x22f)),utils_1=require('../../../../shared/utils'),repo_class_1=require(a239_0xec7205(0x1fb)),git_repo_service_1=require(a239_0xec7205(0x223)),providers_tokens_1=require(a239_0xec7205(0x237)),bitbucket_server_credentials_dto_1=require(a239_0xec7205(0x1ee));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1[a239_0xec7205(0x1fc)]{constructor(_0x2c8148,_0x5e3ef7){const _0x51524e=a239_0xec7205;super(_0x2c8148),this['api']=_0x2c8148,this[_0x51524e(0x20a)]=_0x5e3ef7['project'],this[_0x51524e(0x206)]=_0x5e3ef7;}async[a239_0xec7205(0x230)](_0x3b1e34){const _0x50caaf=a239_0xec7205;try{const _0x24bfdb={'name':_0x3b1e34[_0x50caaf(0x216)],'scmId':_0x50caaf(0x200),'defaultBranch':_0x3b1e34[_0x50caaf(0x212)],..._0x3b1e34[_0x50caaf(0x239)]||{}},_0x189b32=await this[_0x50caaf(0x236)][_0x50caaf(0x218)](_0x50caaf(0x228)+this[_0x50caaf(0x20a)]+'/repos',_0x24bfdb),_0x538e60=repo_class_1[_0x50caaf(0x217)][_0x50caaf(0x213)](_0x189b32,'',this[_0x50caaf(0x1f8)],this['credentials']);return _0x3b1e34[_0x50caaf(0x20c)]&&await git_internal_1[_0x50caaf(0x1f7)][_0x50caaf(0x1ed)](_0x538e60,_0x3b1e34[_0x50caaf(0x212)]||{'name':_0x50caaf(0x225)},'',this[_0x50caaf(0x206)]),this[_0x50caaf(0x22e)](_0x538e60[_0x50caaf(0x216)]);}catch(_0x432616){if(_0x432616 instanceof api_error_1[_0x50caaf(0x208)])throw _0x432616;throw new bad_request_error_1[(_0x50caaf(0x1f9))](_0x432616);}}async['getAll'](){const _0x444c7a=a239_0xec7205;try{const _0x379b74=[];let _0x310873;do{_0x310873=await this['request'][_0x444c7a(0x219)](_0x444c7a(0x228)+this[_0x444c7a(0x20a)]+_0x444c7a(0x222),{'params':{'limit':0x64,'start':_0x310873?_0x310873[_0x444c7a(0x214)]:0x0}}),_0x379b74['push'](..._0x310873[_0x444c7a(0x210)]);}while(!_0x310873['isLastPage']);return _0x379b74[_0x444c7a(0x201)](_0x3a8e3a=>repo_class_1['Repo'][_0x444c7a(0x213)](_0x3a8e3a,(0x0,utils_1[_0x444c7a(0x20e)])(this[_0x444c7a(0x236)]['defaults'][_0x444c7a(0x21c)]||'',_0x444c7a(0x21d)+this[_0x444c7a(0x20a)]+_0x444c7a(0x227)+_0x3a8e3a[_0x444c7a(0x211)]),this[_0x444c7a(0x1f8)],this['credentials']));}catch(_0x208725){if(_0x208725 instanceof api_error_1[_0x444c7a(0x208)])throw _0x208725;throw new not_found_error_1['NotFoundError'](_0x208725);}}async[a239_0xec7205(0x22e)](_0x1b1808){const _0x1a182e=a239_0xec7205;var _0x14ca8e;try{const _0x3c9b4b=await this[_0x1a182e(0x236)][_0x1a182e(0x219)](_0x1a182e(0x228)+this['project']+_0x1a182e(0x227)+_0x1b1808),_0x4f75e4=repo_class_1[_0x1a182e(0x217)]['fromBitbucketServer'](_0x3c9b4b,(0x0,utils_1[_0x1a182e(0x20e)])(this[_0x1a182e(0x236)]['defaults']['baseURL']||'','/projects/'+this[_0x1a182e(0x20a)]+_0x1a182e(0x227)+_0x1b1808),this[_0x1a182e(0x1f8)],this[_0x1a182e(0x206)]),_0x56dd66=await this[_0x1a182e(0x236)]['get'](_0x4f75e4[_0x1a182e(0x1f3)]+_0x1a182e(0x1fd))[_0x1a182e(0x1f6)](_0xd8356e=>_0xd8356e['values']);return _0x4f75e4[_0x1a182e(0x212)]=(_0x14ca8e=_0x56dd66[_0x1a182e(0x1ef)](_0x2ced66=>_0x2ced66[_0x1a182e(0x238)]===!![]))===null||_0x14ca8e===void 0x0?void 0x0:_0x14ca8e[_0x1a182e(0x229)],_0x4f75e4;}catch(_0x266e15){if(_0x266e15 instanceof api_error_1[_0x1a182e(0x208)])throw _0x266e15;throw new not_found_error_1['NotFoundError'](_0x266e15);}}async[a239_0xec7205(0x1f0)](_0x9d1747,_0x38f89f){const _0x223336=a239_0xec7205;try{const _0x813768=await this[_0x223336(0x236)][_0x223336(0x1f2)](_0x223336(0x228)+this[_0x223336(0x20a)]+_0x223336(0x227)+_0x9d1747,_0x38f89f),_0x48601a=await this[_0x223336(0x236)][_0x223336(0x219)](_0x223336(0x228)+this[_0x223336(0x20a)]+'/repos/'+_0x9d1747+'/default-branch'),_0x3cad36=repo_class_1[_0x223336(0x217)]['fromBitbucketServer'](_0x813768,(0x0,utils_1[_0x223336(0x20e)])(this['request'][_0x223336(0x204)][_0x223336(0x21c)]||'',_0x223336(0x21d)+this[_0x223336(0x20a)]+_0x223336(0x227)+_0x9d1747),this[_0x223336(0x1f8)],this[_0x223336(0x206)]);return _0x3cad36[_0x223336(0x212)]=_0x48601a['displayId'],_0x3cad36;}catch(_0x5f4e08){if(_0x5f4e08 instanceof api_error_1[_0x223336(0x208)])throw _0x5f4e08;throw new not_found_error_1[(_0x223336(0x20d))](_0x5f4e08);}}async[a239_0xec7205(0x1fa)](_0x49112f){const _0x41c78c=a239_0xec7205;try{await this['getOne'](_0x49112f),await this[_0x41c78c(0x236)][_0x41c78c(0x1fa)](_0x41c78c(0x228)+this[_0x41c78c(0x20a)]+_0x41c78c(0x227)+_0x49112f);}catch(_0x4ae7e5){if(_0x4ae7e5 instanceof api_error_1[_0x41c78c(0x208)])throw _0x4ae7e5;throw new bad_request_error_1[(_0x41c78c(0x1f9))](_0x4ae7e5);}}};function a239_0x5810(_0x4031a7,_0x58684a){const _0xf0201=a239_0x286a();return a239_0x5810=function(_0x1f3b49,_0x531dbf){_0x1f3b49=_0x1f3b49-0x1ed;let _0x286aff=_0xf0201[_0x1f3b49];return _0x286aff;},a239_0x5810(_0x4031a7,_0x58684a);}BitbucketServerRepoService=__decorate([(0x0,typedi_1[a239_0xec7205(0x205)])(),__param(0x1,(0x0,typedi_1[a239_0xec7205(0x20f)])(providers_tokens_1['Tokens']['credentials'])),__metadata(a239_0xec7205(0x1f1),[bitbucket_server_api_service_1[a239_0xec7205(0x22c)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a239_0xec7205(0x209)]=BitbucketServerRepoService;