const a237_0x5141a7=a237_0x3154;(function(_0x33984a,_0x29f487){const _0x3e7d60=a237_0x3154,_0x25bf2c=_0x33984a();while(!![]){try{const _0x55f07d=parseInt(_0x3e7d60(0x226))/0x1*(-parseInt(_0x3e7d60(0x20b))/0x2)+-parseInt(_0x3e7d60(0x1fc))/0x3*(-parseInt(_0x3e7d60(0x1fb))/0x4)+parseInt(_0x3e7d60(0x21e))/0x5*(-parseInt(_0x3e7d60(0x21f))/0x6)+-parseInt(_0x3e7d60(0x220))/0x7*(parseInt(_0x3e7d60(0x209))/0x8)+-parseInt(_0x3e7d60(0x1ff))/0x9+-parseInt(_0x3e7d60(0x22a))/0xa*(parseInt(_0x3e7d60(0x21b))/0xb)+parseInt(_0x3e7d60(0x213))/0xc*(parseInt(_0x3e7d60(0x232))/0xd);if(_0x55f07d===_0x29f487)break;else _0x25bf2c['push'](_0x25bf2c['shift']());}catch(_0xda2f92){_0x25bf2c['push'](_0x25bf2c['shift']());}}}(a237_0x4967,0x459c8));const a237_0x3e3f3d=(function(){let _0x335845=!![];return function(_0x222120,_0x2f6c1e){const _0x35d58c=_0x335845?function(){if(_0x2f6c1e){const _0x40921e=_0x2f6c1e['apply'](_0x222120,arguments);return _0x2f6c1e=null,_0x40921e;}}:function(){};return _0x335845=![],_0x35d58c;};}()),a237_0x596573=a237_0x3e3f3d(this,function(){const _0x169841=a237_0x3154;return a237_0x596573[_0x169841(0x239)]()[_0x169841(0x1f2)](_0x169841(0x214))['toString']()['constructor'](a237_0x596573)['search'](_0x169841(0x214));});function a237_0x3154(_0x5e74f9,_0x450f52){const _0x3ab957=a237_0x4967();return a237_0x3154=function(_0x596573,_0x3e3f3d){_0x596573=_0x596573-0x1ee;let _0x49675=_0x3ab957[_0x596573];return _0x49675;},a237_0x3154(_0x5e74f9,_0x450f52);}a237_0x596573();'use strict';var __decorate=this&&this[a237_0x5141a7(0x237)]||function(_0x575278,_0x59b61b,_0x23f63f,_0xe2eecc){const _0x1aeb39=a237_0x5141a7;var _0x5045c3=arguments[_0x1aeb39(0x236)],_0x2a5196=_0x5045c3<0x3?_0x59b61b:_0xe2eecc===null?_0xe2eecc=Object['getOwnPropertyDescriptor'](_0x59b61b,_0x23f63f):_0xe2eecc,_0x1672b4;if(typeof Reflect===_0x1aeb39(0x235)&&typeof Reflect[_0x1aeb39(0x1fe)]===_0x1aeb39(0x22c))_0x2a5196=Reflect[_0x1aeb39(0x1fe)](_0x575278,_0x59b61b,_0x23f63f,_0xe2eecc);else{for(var _0x5463eb=_0x575278['length']-0x1;_0x5463eb>=0x0;_0x5463eb--)if(_0x1672b4=_0x575278[_0x5463eb])_0x2a5196=(_0x5045c3<0x3?_0x1672b4(_0x2a5196):_0x5045c3>0x3?_0x1672b4(_0x59b61b,_0x23f63f,_0x2a5196):_0x1672b4(_0x59b61b,_0x23f63f))||_0x2a5196;}return _0x5045c3>0x3&&_0x2a5196&&Object[_0x1aeb39(0x200)](_0x59b61b,_0x23f63f,_0x2a5196),_0x2a5196;},__metadata=this&&this[a237_0x5141a7(0x212)]||function(_0x1c85ba,_0x473ad5){const _0x15c616=a237_0x5141a7;if(typeof Reflect===_0x15c616(0x235)&&typeof Reflect[_0x15c616(0x1f6)]===_0x15c616(0x22c))return Reflect[_0x15c616(0x1f6)](_0x1c85ba,_0x473ad5);},__param=this&&this['__param']||function(_0x43f7c3,_0x53219e){return function(_0xb08c5e,_0x1d4b4d){_0x53219e(_0xb08c5e,_0x1d4b4d,_0x43f7c3);};};function a237_0x4967(){const _0x4873b6=['autoInit','git','map','/repos','1525227YPsHGE','BitbucketServerApiService','displayId','15880aGOszn','246LeZrOj','7QEqhWe','slug','request','project','api','../../credentials/dto/bitbucket-server-credentials.dto','1vGLxCF','./git-repo.service','Repo','find','10PHDIOY','typedi','function','post','name','joinURL','master','nextPageStart','835354lvScpa','createEmptyBranch','../../../../../core/errors/api.error','object','length','__decorate','credentials','toString','isDefault','../../../../shared/utils','Tokens','../../../../../core/errors/not-found.error','create','search','apiUrl','BitbucketServerRepoService','/projects/','metadata','get','update','__esModule','design:paramtypes','17964QpRzSa','87NXZcYi','defaults','decorate','1339776brRjaT','defineProperty','ApiError','../repo.class','Git','projects/','baseURL','../../providers.tokens','getAll','defaultBranch','3625112dTyLpr','getOne','390274sMXwfC','apiBody','values','NotFoundError','fromBitbucketServer','/repos/','push','__metadata','228nsbLXZ','(((.+)+)+)+$','Inject','BadRequestError'];a237_0x4967=function(){return _0x4873b6;};return a237_0x4967();}Object[a237_0x5141a7(0x200)](exports,a237_0x5141a7(0x1f9),{'value':!![]}),exports[a237_0x5141a7(0x1f4)]=void 0x0;const bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a237_0x5141a7(0x1f0)),typedi_1=require(a237_0x5141a7(0x22b)),api_error_1=require(a237_0x5141a7(0x234)),bitbucket_server_api_service_1=require('../../api/bitbucket-server-api.service'),git_internal_1=require('../../../internal/git.internal'),utils_1=require(a237_0x5141a7(0x1ee)),repo_class_1=require(a237_0x5141a7(0x202)),git_repo_service_1=require(a237_0x5141a7(0x227)),providers_tokens_1=require(a237_0x5141a7(0x206)),bitbucket_server_credentials_dto_1=require(a237_0x5141a7(0x225));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x4012e6,_0xadd8a4){const _0x2afbc0=a237_0x5141a7;super(_0x4012e6),this[_0x2afbc0(0x224)]=_0x4012e6,this[_0x2afbc0(0x223)]=_0xadd8a4[_0x2afbc0(0x223)],this[_0x2afbc0(0x238)]=_0xadd8a4;}async[a237_0x5141a7(0x1f1)](_0x4087db){const _0x266936=a237_0x5141a7;try{const _0x1c4d06={'name':_0x4087db['name'],'scmId':_0x266936(0x218),'defaultBranch':_0x4087db[_0x266936(0x208)],..._0x4087db[_0x266936(0x20c)]||{}},_0x4e060a=await this['request'][_0x266936(0x22d)](_0x266936(0x204)+this[_0x266936(0x223)]+'/repos',_0x1c4d06),_0x2a2ba3=repo_class_1[_0x266936(0x228)][_0x266936(0x20f)](_0x4e060a,'',this[_0x266936(0x224)],this[_0x266936(0x238)]);return _0x4087db[_0x266936(0x217)]&&await git_internal_1[_0x266936(0x203)][_0x266936(0x233)](_0x2a2ba3,_0x4087db[_0x266936(0x208)]||_0x266936(0x230),'',this[_0x266936(0x238)]),this[_0x266936(0x20a)](_0x2a2ba3[_0x266936(0x22e)]);}catch(_0x3afc9a){if(_0x3afc9a instanceof api_error_1['ApiError'])throw _0x3afc9a;throw new bad_request_error_1['BadRequestError'](_0x3afc9a);}}async[a237_0x5141a7(0x207)](){const _0x147435=a237_0x5141a7;try{const _0x7b8c7e=[];let _0x167a3b;do{_0x167a3b=await this['request'][_0x147435(0x1f7)](_0x147435(0x204)+this[_0x147435(0x223)]+_0x147435(0x21a),{'params':{'limit':0x64,'start':_0x167a3b?_0x167a3b[_0x147435(0x231)]:0x0}}),_0x7b8c7e[_0x147435(0x211)](..._0x167a3b[_0x147435(0x20d)]);}while(!_0x167a3b['isLastPage']);return _0x7b8c7e[_0x147435(0x219)](_0x5dd4fc=>repo_class_1[_0x147435(0x228)]['fromBitbucketServer'](_0x5dd4fc,(0x0,utils_1[_0x147435(0x22f)])(this['request']['defaults'][_0x147435(0x205)]||'',_0x147435(0x1f5)+this[_0x147435(0x223)]+'/repos/'+_0x5dd4fc[_0x147435(0x221)]),this[_0x147435(0x224)],this[_0x147435(0x238)]));}catch(_0x3e02bf){if(_0x3e02bf instanceof api_error_1[_0x147435(0x201)])throw _0x3e02bf;throw new not_found_error_1[(_0x147435(0x20e))](_0x3e02bf);}}async['getOne'](_0x4595cf){const _0x2fb0f4=a237_0x5141a7;var _0x219879;try{const _0x1e312b=await this[_0x2fb0f4(0x222)][_0x2fb0f4(0x1f7)](_0x2fb0f4(0x204)+this['project']+_0x2fb0f4(0x210)+_0x4595cf),_0x20fa63=repo_class_1['Repo'][_0x2fb0f4(0x20f)](_0x1e312b,(0x0,utils_1[_0x2fb0f4(0x22f)])(this[_0x2fb0f4(0x222)]['defaults'][_0x2fb0f4(0x205)]||'','/projects/'+this[_0x2fb0f4(0x223)]+_0x2fb0f4(0x210)+_0x4595cf),this['api'],this[_0x2fb0f4(0x238)]),_0x1ed4e4=await this[_0x2fb0f4(0x222)]['get'](_0x20fa63[_0x2fb0f4(0x1f3)]+'/branches')['then'](_0x26f888=>_0x26f888['values']);return _0x20fa63[_0x2fb0f4(0x208)]=(_0x219879=_0x1ed4e4[_0x2fb0f4(0x229)](_0x3745fb=>_0x3745fb[_0x2fb0f4(0x23a)]===!![]))===null||_0x219879===void 0x0?void 0x0:_0x219879[_0x2fb0f4(0x21d)],_0x20fa63;}catch(_0x22af6e){if(_0x22af6e instanceof api_error_1[_0x2fb0f4(0x201)])throw _0x22af6e;throw new not_found_error_1[(_0x2fb0f4(0x20e))](_0x22af6e);}}async[a237_0x5141a7(0x1f8)](_0x4bd093,_0x142b33){const _0x452360=a237_0x5141a7;try{const _0x52c429=await this['request']['put'](_0x452360(0x204)+this[_0x452360(0x223)]+_0x452360(0x210)+_0x4bd093,_0x142b33),_0x96e86=await this['request']['get'](_0x452360(0x204)+this[_0x452360(0x223)]+_0x452360(0x210)+_0x4bd093+'/default-branch'),_0x3ff509=repo_class_1['Repo'][_0x452360(0x20f)](_0x52c429,(0x0,utils_1['joinURL'])(this[_0x452360(0x222)][_0x452360(0x1fd)][_0x452360(0x205)]||'',_0x452360(0x1f5)+this[_0x452360(0x223)]+'/repos/'+_0x4bd093),this[_0x452360(0x224)],this[_0x452360(0x238)]);return _0x3ff509['defaultBranch']=_0x96e86['displayId'],_0x3ff509;}catch(_0x5d984e){if(_0x5d984e instanceof api_error_1[_0x452360(0x201)])throw _0x5d984e;throw new not_found_error_1[(_0x452360(0x20e))](_0x5d984e);}}async['delete'](_0x48982d){const _0xacfb49=a237_0x5141a7;try{await this['getOne'](_0x48982d),await this['request']['delete'](_0xacfb49(0x204)+this[_0xacfb49(0x223)]+_0xacfb49(0x210)+_0x48982d);}catch(_0x3ef8aa){if(_0x3ef8aa instanceof api_error_1[_0xacfb49(0x201)])throw _0x3ef8aa;throw new bad_request_error_1[(_0xacfb49(0x216))](_0x3ef8aa);}}};BitbucketServerRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a237_0x5141a7(0x215)])(providers_tokens_1[a237_0x5141a7(0x1ef)]['credentials'])),__metadata(a237_0x5141a7(0x1fa),[bitbucket_server_api_service_1[a237_0x5141a7(0x21c)],bitbucket_server_credentials_dto_1['BitbucketServerCredentialsDto']])],BitbucketServerRepoService),exports[a237_0x5141a7(0x1f4)]=BitbucketServerRepoService;