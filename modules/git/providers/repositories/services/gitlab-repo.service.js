const a170_0xd708d=a170_0x4015;(function(_0x5d4ac7,_0x4736dd){const _0x1e40dc=a170_0x4015,_0x1e5e69=_0x5d4ac7();while(!![]){try{const _0xa680a4=parseInt(_0x1e40dc(0xad))/0x1+-parseInt(_0x1e40dc(0xaf))/0x2*(parseInt(_0x1e40dc(0xd9))/0x3)+-parseInt(_0x1e40dc(0x9b))/0x4+parseInt(_0x1e40dc(0xdd))/0x5*(parseInt(_0x1e40dc(0xc9))/0x6)+parseInt(_0x1e40dc(0x9f))/0x7+parseInt(_0x1e40dc(0xb9))/0x8*(parseInt(_0x1e40dc(0xcd))/0x9)+parseInt(_0x1e40dc(0xb0))/0xa*(parseInt(_0x1e40dc(0xa8))/0xb);if(_0xa680a4===_0x4736dd)break;else _0x1e5e69['push'](_0x1e5e69['shift']());}catch(_0x3c0ff7){_0x1e5e69['push'](_0x1e5e69['shift']());}}}(a170_0x3c5f,0xe5a3d));const a170_0x1692be=(function(){let _0x13c36b=!![];return function(_0x4afea4,_0x1d8472){const _0x5613d9=_0x13c36b?function(){const _0x3fb539=a170_0x4015;if(_0x1d8472){const _0x597db2=_0x1d8472[_0x3fb539(0xdf)](_0x4afea4,arguments);return _0x1d8472=null,_0x597db2;}}:function(){};return _0x13c36b=![],_0x5613d9;};}()),a170_0x4cb78b=a170_0x1692be(this,function(){const _0x53d037=a170_0x4015;return a170_0x4cb78b['toString']()[_0x53d037(0xbd)]('(((.+)+)+)+$')[_0x53d037(0xd7)]()['constructor'](a170_0x4cb78b)[_0x53d037(0xbd)](_0x53d037(0xe0));});a170_0x4cb78b();'use strict';var __decorate=this&&this['__decorate']||function(_0x44ba27,_0x12d012,_0x2fffea,_0x344557){const _0x314a76=a170_0x4015;var _0x573883=arguments['length'],_0x152bec=_0x573883<0x3?_0x12d012:_0x344557===null?_0x344557=Object[_0x314a76(0xb2)](_0x12d012,_0x2fffea):_0x344557,_0x263a25;if(typeof Reflect===_0x314a76(0xd3)&&typeof Reflect[_0x314a76(0xa5)]==='function')_0x152bec=Reflect[_0x314a76(0xa5)](_0x44ba27,_0x12d012,_0x2fffea,_0x344557);else{for(var _0x2b40e7=_0x44ba27['length']-0x1;_0x2b40e7>=0x0;_0x2b40e7--)if(_0x263a25=_0x44ba27[_0x2b40e7])_0x152bec=(_0x573883<0x3?_0x263a25(_0x152bec):_0x573883>0x3?_0x263a25(_0x12d012,_0x2fffea,_0x152bec):_0x263a25(_0x12d012,_0x2fffea))||_0x152bec;}return _0x573883>0x3&&_0x152bec&&Object[_0x314a76(0xa6)](_0x12d012,_0x2fffea,_0x152bec),_0x152bec;},__metadata=this&&this[a170_0xd708d(0xd1)]||function(_0x41851d,_0x26e943){const _0x7071b0=a170_0xd708d;if(typeof Reflect===_0x7071b0(0xd3)&&typeof Reflect[_0x7071b0(0xd5)]==='function')return Reflect['metadata'](_0x41851d,_0x26e943);},__param=this&&this[a170_0xd708d(0xd2)]||function(_0x4368a1,_0x5d6d52){return function(_0x275fc5,_0xddbc5c){_0x5d6d52(_0x275fc5,_0xddbc5c,_0x4368a1);};};function a170_0x4015(_0x5396e6,_0xd87aba){const _0xd43fa7=a170_0x3c5f();return a170_0x4015=function(_0x4cb78b,_0x1692be){_0x4cb78b=_0x4cb78b-0x9a;let _0x3c5f93=_0xd43fa7[_0x4cb78b];return _0x3c5f93;},a170_0x4015(_0x5396e6,_0xd87aba);}function a170_0x3c5f(){const _0x3e21a2=['NotFoundError','Git','update','__metadata','__param','object','GitlabCredentialsDto','metadata','defaultBranch','toString','design:paramtypes','4181151HaTzcz','api','name','map','228065cIEGiX','private','apply','(((.+)+)+)+$','getAll','credentials','1188460hgxoIr','Inject','../repo.class','post','2250710UjkTaA','../../../../../core/errors/not-found.error','BadRequestError','groups/','ApiError','Service','decorate','defineProperty','get','39908OtYEgB','request','../../providers.tokens','public','createRequest','771591SNXhVo','GitlabRepoService','2BPxmyy','190qJmwJG','../../../internal/git.internal','getOwnPropertyDescriptor','getGroup','apiBody','GitRepoService','createRequestToRepo','push','autoInit','8SqKFMg','/projects','typedi','master','search','GitlabApiService','groupPath','Repo','getUsername','full_path','getOne','create','fromGitlab','getGroupPath','username','groupId','174LqFaZt','put','Tokens','delete','1319463poOSqp'];a170_0x3c5f=function(){return _0x3e21a2;};return a170_0x3c5f();}Object[a170_0xd708d(0xa6)](exports,'__esModule',{'value':!![]}),exports[a170_0xd708d(0xae)]=void 0x0;const bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a170_0xd708d(0xa0)),gitlab_api_service_1=require('../../api/gitlab-api.service'),typedi_1=require(a170_0xd708d(0xbb)),api_error_1=require('../../../../../core/errors/api.error'),git_internal_1=require(a170_0xd708d(0xb1)),repo_class_1=require(a170_0xd708d(0x9d)),git_repo_service_1=require('./git-repo.service'),gitlab_credentials_dto_1=require('../../credentials/dto/gitlab-credentials.dto'),providers_tokens_1=require(a170_0xd708d(0xaa));let GitlabRepoService=class GitlabRepoService extends git_repo_service_1[a170_0xd708d(0xb5)]{constructor(_0x131b74,_0x2d6a8a){const _0x3a119c=a170_0xd708d;super(_0x131b74),this[_0x3a119c(0xda)]=_0x131b74,this[_0x3a119c(0xc8)]=_0x2d6a8a['groupId'],this[_0x3a119c(0x9a)]=_0x2d6a8a;}async[a170_0xd708d(0xc6)](){const _0x40e74b=a170_0xd708d;if(!this[_0x40e74b(0xbf)]){const _0x59189d=await this['api'][_0x40e74b(0xb3)](this[_0x40e74b(0xc8)]);this[_0x40e74b(0xbf)]=_0x59189d[_0x40e74b(0xc2)];}return this[_0x40e74b(0xbf)];}async[a170_0xd708d(0xc1)](){const _0x1467c0=a170_0xd708d;if(!this[_0x1467c0(0xc7)]){const _0x407870=await this[_0x1467c0(0xda)]['getCurrentUser']();this[_0x1467c0(0xc7)]=_0x407870[_0x1467c0(0xc7)];}return this['username'];}async[a170_0xd708d(0xb6)](_0x46afd8){const _0x46a295=a170_0xd708d,_0x317dd0=await(this[_0x46a295(0xc8)]?this[_0x46a295(0xc6)]():this[_0x46a295(0xc1)]()),_0x36274f=this['api'][_0x46a295(0xac)](this[_0x46a295(0xa9)]['defaults']['baseURL']+'/projects/'+encodeURIComponent(_0x317dd0+'/'+_0x46afd8));return _0x36274f;}async[a170_0xd708d(0xc4)](_0x1396ca){const _0x35a6da=a170_0xd708d;try{const _0x337d61={'name':_0x1396ca['name'],'visibility':_0x1396ca[_0x35a6da(0xde)]?'private':_0x35a6da(0xab),'namespace_id':this['groupId'],..._0x1396ca[_0x35a6da(0xb4)]||{}},_0x21626e=await this[_0x35a6da(0xa9)][_0x35a6da(0x9e)]('projects',_0x337d61),_0x17201a=repo_class_1[_0x35a6da(0xc0)]['fromGitlab'](_0x21626e,this[_0x35a6da(0xda)],this[_0x35a6da(0x9a)]);return _0x1396ca[_0x35a6da(0xb8)]&&await git_internal_1[_0x35a6da(0xcf)]['createEmptyBranch'](_0x17201a,_0x1396ca[_0x35a6da(0xd6)]||_0x35a6da(0xbc),'',this[_0x35a6da(0x9a)]),this[_0x35a6da(0xc3)](_0x17201a[_0x35a6da(0xdb)]);}catch(_0x354567){if(_0x354567 instanceof api_error_1[_0x35a6da(0xa3)])throw _0x354567;throw new bad_request_error_1[(_0x35a6da(0xa1))](_0x354567);}}async[a170_0xd708d(0xc3)](_0x32c34c){const _0x2cacca=a170_0xd708d;try{const _0x42e5e8=await this[_0x2cacca(0xb6)](_0x32c34c),_0x962293=await _0x42e5e8['get']('');return repo_class_1[_0x2cacca(0xc0)][_0x2cacca(0xc5)](_0x962293,this[_0x2cacca(0xda)],this[_0x2cacca(0x9a)]);}catch(_0x2283a6){if(_0x2283a6 instanceof api_error_1[_0x2cacca(0xa3)])throw _0x2283a6;throw new not_found_error_1[(_0x2cacca(0xce))](_0x2283a6);}}async[a170_0xd708d(0xe1)](){const _0x24b865=a170_0xd708d;try{let _0x3a225d='';if(this[_0x24b865(0xc8)])_0x3a225d=_0x24b865(0xa2)+this[_0x24b865(0xc8)]+_0x24b865(0xba);else{const _0x53bb53=await this[_0x24b865(0xc1)]();_0x3a225d='users/'+_0x53bb53+_0x24b865(0xba);}let _0x2f57ae=!![],_0x2b33d6=0x1;const _0x194446=[];do{const _0x51288f=await this[_0x24b865(0xa9)][_0x24b865(0xa7)](_0x3a225d,{'params':{'page':_0x2b33d6,'per_page':0x64}});_0x194446[_0x24b865(0xb7)](..._0x51288f),_0x2f57ae=_0x51288f['length']>0x0,_0x2b33d6+=0x1;}while(_0x2f57ae);return _0x194446[_0x24b865(0xdc)](_0x17af55=>repo_class_1[_0x24b865(0xc0)][_0x24b865(0xc5)](_0x17af55,this[_0x24b865(0xda)],this[_0x24b865(0x9a)]));}catch(_0x26a7cf){if(_0x26a7cf instanceof api_error_1[_0x24b865(0xa3)])throw _0x26a7cf;throw new not_found_error_1[(_0x24b865(0xce))](_0x26a7cf);}}async[a170_0xd708d(0xd0)](_0x58dd35,_0x1defef){const _0x4fb31a=a170_0xd708d;try{const _0x36ab36=await this['createRequestToRepo'](_0x58dd35),_0x57974f=await _0x36ab36[_0x4fb31a(0xca)]('',{..._0x1defef,'path':_0x1defef[_0x4fb31a(0xdb)]});return repo_class_1[_0x4fb31a(0xc0)][_0x4fb31a(0xc5)](_0x57974f,this[_0x4fb31a(0xda)],this['credentials']);}catch(_0x920ee0){if(_0x920ee0 instanceof api_error_1[_0x4fb31a(0xa3)])throw _0x920ee0;throw new not_found_error_1['NotFoundError'](_0x920ee0);}}async[a170_0xd708d(0xcc)](_0xac26a3){const _0x2e72cb=a170_0xd708d;try{const _0x14cd84=await this[_0x2e72cb(0xb6)](_0xac26a3);await _0x14cd84[_0x2e72cb(0xcc)]('');}catch(_0x974b37){if(_0x974b37 instanceof api_error_1['ApiError'])throw _0x974b37;throw new bad_request_error_1[(_0x2e72cb(0xa1))](_0x974b37);}}};GitlabRepoService=__decorate([(0x0,typedi_1[a170_0xd708d(0xa4)])(),__param(0x1,(0x0,typedi_1[a170_0xd708d(0x9c)])(providers_tokens_1[a170_0xd708d(0xcb)][a170_0xd708d(0x9a)])),__metadata(a170_0xd708d(0xd8),[gitlab_api_service_1[a170_0xd708d(0xbe)],gitlab_credentials_dto_1[a170_0xd708d(0xd4)]])],GitlabRepoService),exports[a170_0xd708d(0xae)]=GitlabRepoService;