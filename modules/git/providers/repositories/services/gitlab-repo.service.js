const a209_0x5b7a1a=a209_0x41a9;(function(_0x5f286e,_0x373555){const _0x5cced5=a209_0x41a9,_0x413a07=_0x5f286e();while(!![]){try{const _0x55757d=parseInt(_0x5cced5(0xd9))/0x1+parseInt(_0x5cced5(0x103))/0x2+-parseInt(_0x5cced5(0xd1))/0x3*(-parseInt(_0x5cced5(0xdd))/0x4)+parseInt(_0x5cced5(0xe6))/0x5*(-parseInt(_0x5cced5(0xf5))/0x6)+-parseInt(_0x5cced5(0xed))/0x7*(-parseInt(_0x5cced5(0x104))/0x8)+parseInt(_0x5cced5(0x101))/0x9+-parseInt(_0x5cced5(0xcd))/0xa;if(_0x55757d===_0x373555)break;else _0x413a07['push'](_0x413a07['shift']());}catch(_0xbe3c6e){_0x413a07['push'](_0x413a07['shift']());}}}(a209_0x1f0e,0xae6f1));const a209_0x55ff5c=(function(){let _0x449d7c=!![];return function(_0x3f53b4,_0x3bd019){const _0x4bf5c3=_0x449d7c?function(){const _0x2a4936=a209_0x41a9;if(_0x3bd019){const _0x375901=_0x3bd019[_0x2a4936(0xf4)](_0x3f53b4,arguments);return _0x3bd019=null,_0x375901;}}:function(){};return _0x449d7c=![],_0x4bf5c3;};}()),a209_0x299bd7=a209_0x55ff5c(this,function(){const _0x143515=a209_0x41a9;return a209_0x299bd7['toString']()[_0x143515(0xde)](_0x143515(0xe5))[_0x143515(0xe8)]()[_0x143515(0xcf)](a209_0x299bd7)[_0x143515(0xde)](_0x143515(0xe5));});function a209_0x41a9(_0x5a0268,_0x1b0329){const _0x507933=a209_0x1f0e();return a209_0x41a9=function(_0x299bd7,_0x55ff5c){_0x299bd7=_0x299bd7-0xc0;let _0x1f0eec=_0x507933[_0x299bd7];return _0x1f0eec;},a209_0x41a9(_0x5a0268,_0x1b0329);}function a209_0x1f0e(){const _0x262e63=['typedi','api','name','Service','GitlabApiService','getCurrentUser','26536730DyLRKM','function','constructor','public','674658RZrMoA','Git','private','GitlabRepoService','decorate','request','../../../../../core/errors/api.error','defaultBranch','496224YgfTgu','groupPath','autoInit','get','20vHapvV','search','groupId','username','ApiError','baseURL','object','getUsername','(((.+)+)+)+$','23225KGKYhj','post','toString','map','put','/projects','delete','528542XRLycc','createRequest','../../../../../core/errors/bad-request.error','defaults','getOwnPropertyDescriptor','groups/','fromGitlab','apply','186dejSvj','metadata','credentials','BadRequestError','createEmptyBranch','GitlabCredentialsDto','getGroupPath','./git-repo.service','__metadata','../../../internal/git.internal','getAll','Tokens','8735787HllRwE','__decorate','633608RmMcGB','64qPVArZ','NotFoundError','update','getOne','master','length','defineProperty','createRequestToRepo','Repo','design:paramtypes','create','__esModule'];a209_0x1f0e=function(){return _0x262e63;};return a209_0x1f0e();}a209_0x299bd7();'use strict';var __decorate=this&&this[a209_0x5b7a1a(0x102)]||function(_0x204ab3,_0x2df85a,_0x3140c9,_0x5f3de2){const _0x804ced=a209_0x5b7a1a;var _0x177915=arguments['length'],_0x41a2a2=_0x177915<0x3?_0x2df85a:_0x5f3de2===null?_0x5f3de2=Object[_0x804ced(0xf1)](_0x2df85a,_0x3140c9):_0x5f3de2,_0x566108;if(typeof Reflect===_0x804ced(0xe3)&&typeof Reflect[_0x804ced(0xd5)]===_0x804ced(0xce))_0x41a2a2=Reflect[_0x804ced(0xd5)](_0x204ab3,_0x2df85a,_0x3140c9,_0x5f3de2);else{for(var _0xa0399d=_0x204ab3[_0x804ced(0xc0)]-0x1;_0xa0399d>=0x0;_0xa0399d--)if(_0x566108=_0x204ab3[_0xa0399d])_0x41a2a2=(_0x177915<0x3?_0x566108(_0x41a2a2):_0x177915>0x3?_0x566108(_0x2df85a,_0x3140c9,_0x41a2a2):_0x566108(_0x2df85a,_0x3140c9))||_0x41a2a2;}return _0x177915>0x3&&_0x41a2a2&&Object[_0x804ced(0xc1)](_0x2df85a,_0x3140c9,_0x41a2a2),_0x41a2a2;},__metadata=this&&this[a209_0x5b7a1a(0xfd)]||function(_0x1fa032,_0x1248fd){const _0x5c6a86=a209_0x5b7a1a;if(typeof Reflect===_0x5c6a86(0xe3)&&typeof Reflect[_0x5c6a86(0xf6)]===_0x5c6a86(0xce))return Reflect[_0x5c6a86(0xf6)](_0x1fa032,_0x1248fd);},__param=this&&this['__param']||function(_0x5e30fa,_0x59807e){return function(_0x4d6a78,_0x5b02f2){_0x59807e(_0x4d6a78,_0x5b02f2,_0x5e30fa);};};Object['defineProperty'](exports,a209_0x5b7a1a(0xc6),{'value':!![]}),exports['GitlabRepoService']=void 0x0;const bad_request_error_1=require(a209_0x5b7a1a(0xef)),not_found_error_1=require('../../../../../core/errors/not-found.error'),gitlab_api_service_1=require('../../api/gitlab-api.service'),typedi_1=require(a209_0x5b7a1a(0xc7)),api_error_1=require(a209_0x5b7a1a(0xd7)),git_internal_1=require(a209_0x5b7a1a(0xfe)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a209_0x5b7a1a(0xfc)),gitlab_credentials_dto_1=require('../../credentials/dto/gitlab-credentials.dto'),providers_tokens_1=require('../../providers.tokens');let GitlabRepoService=class GitlabRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x124e81,_0x543411){const _0x1ad644=a209_0x5b7a1a;super(_0x124e81),this[_0x1ad644(0xc8)]=_0x124e81,this[_0x1ad644(0xdf)]=_0x543411['groupId'],this['credentials']=_0x543411;}async[a209_0x5b7a1a(0xfb)](){const _0x5202b6=a209_0x5b7a1a;if(!this[_0x5202b6(0xda)]){const _0xc964d4=await this[_0x5202b6(0xc8)]['getGroup'](this[_0x5202b6(0xdf)]);this[_0x5202b6(0xda)]=_0xc964d4['full_path'];}return this[_0x5202b6(0xda)];}async[a209_0x5b7a1a(0xe4)](){const _0x1f8577=a209_0x5b7a1a;if(!this['username']){const _0xda07cb=await this[_0x1f8577(0xc8)][_0x1f8577(0xcc)]();this[_0x1f8577(0xe0)]=_0xda07cb['username'];}return this['username'];}async[a209_0x5b7a1a(0xc2)](_0x5cc406){const _0x332e5e=a209_0x5b7a1a,_0x4a855f=await(this['groupId']?this[_0x332e5e(0xfb)]():this[_0x332e5e(0xe4)]()),_0x384383=this[_0x332e5e(0xc8)][_0x332e5e(0xee)](this[_0x332e5e(0xd6)][_0x332e5e(0xf0)][_0x332e5e(0xe2)]+'/projects/'+encodeURIComponent(_0x4a855f+'/'+_0x5cc406));return _0x384383;}async[a209_0x5b7a1a(0xc5)](_0x5d640f){const _0x35e457=a209_0x5b7a1a;try{const _0x5c3b59={'name':_0x5d640f['name'],'visibility':_0x5d640f[_0x35e457(0xd3)]?'private':_0x35e457(0xd0),'namespace_id':this[_0x35e457(0xdf)],..._0x5d640f['apiBody']||{}},_0x2fca63=await this[_0x35e457(0xd6)][_0x35e457(0xe7)]('projects',_0x5c3b59),_0x19f429=repo_class_1[_0x35e457(0xc3)]['fromGitlab'](_0x2fca63,this[_0x35e457(0xc8)],this[_0x35e457(0xf7)]);return _0x5d640f[_0x35e457(0xdb)]&&await git_internal_1[_0x35e457(0xd2)][_0x35e457(0xf9)](_0x19f429,_0x5d640f[_0x35e457(0xd8)]||_0x35e457(0x108),'',this['credentials']),this[_0x35e457(0x107)](_0x19f429[_0x35e457(0xc9)]);}catch(_0x363512){if(_0x363512 instanceof api_error_1[_0x35e457(0xe1)])throw _0x363512;throw new bad_request_error_1[(_0x35e457(0xf8))](_0x363512);}}async[a209_0x5b7a1a(0x107)](_0x771afd){const _0x108557=a209_0x5b7a1a;try{const _0x1cfca3=await this[_0x108557(0xc2)](_0x771afd),_0x351699=await _0x1cfca3[_0x108557(0xdc)]('');return repo_class_1[_0x108557(0xc3)][_0x108557(0xf3)](_0x351699,this[_0x108557(0xc8)],this[_0x108557(0xf7)]);}catch(_0xf3c7ef){if(_0xf3c7ef instanceof api_error_1[_0x108557(0xe1)])throw _0xf3c7ef;throw new not_found_error_1[(_0x108557(0x105))](_0xf3c7ef);}}async[a209_0x5b7a1a(0xff)](){const _0x218e57=a209_0x5b7a1a;try{let _0x1e6306='';if(this[_0x218e57(0xdf)])_0x1e6306=_0x218e57(0xf2)+this[_0x218e57(0xdf)]+'/projects';else{const _0x22dc77=await this[_0x218e57(0xe4)]();_0x1e6306='users/'+_0x22dc77+_0x218e57(0xeb);}let _0x5509ad=!![],_0x4f0432=0x1;const _0x47576a=[];do{const _0x45ff67=await this[_0x218e57(0xd6)][_0x218e57(0xdc)](_0x1e6306,{'params':{'page':_0x4f0432,'per_page':0x64}});_0x47576a['push'](..._0x45ff67),_0x5509ad=_0x45ff67[_0x218e57(0xc0)]>0x0,_0x4f0432+=0x1;}while(_0x5509ad);return _0x47576a[_0x218e57(0xe9)](_0x381f88=>repo_class_1[_0x218e57(0xc3)][_0x218e57(0xf3)](_0x381f88,this['api'],this['credentials']));}catch(_0x1440f8){if(_0x1440f8 instanceof api_error_1[_0x218e57(0xe1)])throw _0x1440f8;throw new not_found_error_1['NotFoundError'](_0x1440f8);}}async[a209_0x5b7a1a(0x106)](_0x5f4a1f,_0x1f7b30){const _0xf5fcdb=a209_0x5b7a1a;try{const _0x9c33c0=await this['createRequestToRepo'](_0x5f4a1f),_0x4b3202=await _0x9c33c0[_0xf5fcdb(0xea)]('',{..._0x1f7b30,'path':_0x1f7b30[_0xf5fcdb(0xc9)]});return repo_class_1[_0xf5fcdb(0xc3)]['fromGitlab'](_0x4b3202,this[_0xf5fcdb(0xc8)],this[_0xf5fcdb(0xf7)]);}catch(_0x1f35a5){if(_0x1f35a5 instanceof api_error_1['ApiError'])throw _0x1f35a5;throw new not_found_error_1[(_0xf5fcdb(0x105))](_0x1f35a5);}}async[a209_0x5b7a1a(0xec)](_0x1121a2){const _0x2f17a2=a209_0x5b7a1a;try{const _0x54fd3c=await this['createRequestToRepo'](_0x1121a2);await _0x54fd3c[_0x2f17a2(0xec)]('');}catch(_0x56fbd8){if(_0x56fbd8 instanceof api_error_1[_0x2f17a2(0xe1)])throw _0x56fbd8;throw new bad_request_error_1[(_0x2f17a2(0xf8))](_0x56fbd8);}}};GitlabRepoService=__decorate([(0x0,typedi_1[a209_0x5b7a1a(0xca)])(),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a209_0x5b7a1a(0x100)][a209_0x5b7a1a(0xf7)])),__metadata(a209_0x5b7a1a(0xc4),[gitlab_api_service_1[a209_0x5b7a1a(0xcb)],gitlab_credentials_dto_1[a209_0x5b7a1a(0xfa)]])],GitlabRepoService),exports[a209_0x5b7a1a(0xd4)]=GitlabRepoService;