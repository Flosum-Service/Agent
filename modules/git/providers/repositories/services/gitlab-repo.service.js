const a241_0x18f859=a241_0x2fa5;function a241_0x32dc(){const _0x44a5c1=['16144KSuivs','../../../../../core/errors/not-found.error','get','getUsername','create','baseURL','GitlabApiService','__param','3080Hazqyu','__decorate','332iBfaba','getOwnPropertyDescriptor','./git-repo.service','1235030fmoCFO','projects','Repo','getOne','GitlabRepoService','306QoLGpu','design:paramtypes','delete','groupPath','648662caUIDx','Tokens','username','14286MglnSJ','../../providers.tokens','Git','master','groupId','../../../../../core/errors/api.error','GitlabCredentialsDto','credentials','private','(((.+)+)+)+$','apiBody','map','getAll','put','api','defaultBranch','public','object','request','GitRepoService','getGroupPath','name','metadata','../../credentials/dto/gitlab-credentials.dto','length','170xGGlXz','defaults','../../../internal/git.internal','__esModule','1584792VHpdSx','fromGitlab','/projects','function','typedi','createRequestToRepo','Inject','groups/','2EQEWLR','full_path','BadRequestError','NotFoundError','../../api/gitlab-api.service','defineProperty','ApiError','constructor','createRequest','getCurrentUser','search','autoInit','toString','5244jAVmQl','update','__metadata'];a241_0x32dc=function(){return _0x44a5c1;};return a241_0x32dc();}(function(_0x175075,_0x449ecd){const _0x342c8f=a241_0x2fa5,_0x56d96a=_0x175075();while(!![]){try{const _0x3e25a4=parseInt(_0x342c8f(0xa1))/0x1*(parseInt(_0x342c8f(0x89))/0x2)+-parseInt(_0x342c8f(0x96))/0x3*(-parseInt(_0x342c8f(0xa3))/0x4)+-parseInt(_0x342c8f(0x7d))/0x5*(parseInt(_0x342c8f(0xb2))/0x6)+parseInt(_0x342c8f(0xaf))/0x7+parseInt(_0x342c8f(0x99))/0x8*(-parseInt(_0x342c8f(0xab))/0x9)+-parseInt(_0x342c8f(0xa6))/0xa+parseInt(_0x342c8f(0x81))/0xb;if(_0x3e25a4===_0x449ecd)break;else _0x56d96a['push'](_0x56d96a['shift']());}catch(_0x42e4b1){_0x56d96a['push'](_0x56d96a['shift']());}}}(a241_0x32dc,0x1b4d9));const a241_0x5347ed=(function(){let _0x238773=!![];return function(_0xe73d2b,_0x25074c){const _0x2f34f8=_0x238773?function(){if(_0x25074c){const _0x3bb1b=_0x25074c['apply'](_0xe73d2b,arguments);return _0x25074c=null,_0x3bb1b;}}:function(){};return _0x238773=![],_0x2f34f8;};}()),a241_0x46463b=a241_0x5347ed(this,function(){const _0x324b8e=a241_0x2fa5;return a241_0x46463b[_0x324b8e(0x95)]()[_0x324b8e(0x93)](_0x324b8e(0xbb))[_0x324b8e(0x95)]()[_0x324b8e(0x90)](a241_0x46463b)['search'](_0x324b8e(0xbb));});a241_0x46463b();'use strict';function a241_0x2fa5(_0x902ed4,_0x1cac20){const _0x449ee2=a241_0x32dc();return a241_0x2fa5=function(_0x46463b,_0x5347ed){_0x46463b=_0x46463b-0x7d;let _0x32dc52=_0x449ee2[_0x46463b];return _0x32dc52;},a241_0x2fa5(_0x902ed4,_0x1cac20);}var __decorate=this&&this[a241_0x18f859(0xa2)]||function(_0x2dcc36,_0x4c4bf3,_0x3632fc,_0x22fc46){const _0x4d0ba3=a241_0x18f859;var _0x455dbf=arguments[_0x4d0ba3(0xca)],_0x5987be=_0x455dbf<0x3?_0x4c4bf3:_0x22fc46===null?_0x22fc46=Object[_0x4d0ba3(0xa4)](_0x4c4bf3,_0x3632fc):_0x22fc46,_0x48c20a;if(typeof Reflect===_0x4d0ba3(0xc3)&&typeof Reflect['decorate']===_0x4d0ba3(0x84))_0x5987be=Reflect['decorate'](_0x2dcc36,_0x4c4bf3,_0x3632fc,_0x22fc46);else{for(var _0x22d599=_0x2dcc36[_0x4d0ba3(0xca)]-0x1;_0x22d599>=0x0;_0x22d599--)if(_0x48c20a=_0x2dcc36[_0x22d599])_0x5987be=(_0x455dbf<0x3?_0x48c20a(_0x5987be):_0x455dbf>0x3?_0x48c20a(_0x4c4bf3,_0x3632fc,_0x5987be):_0x48c20a(_0x4c4bf3,_0x3632fc))||_0x5987be;}return _0x455dbf>0x3&&_0x5987be&&Object[_0x4d0ba3(0x8e)](_0x4c4bf3,_0x3632fc,_0x5987be),_0x5987be;},__metadata=this&&this[a241_0x18f859(0x98)]||function(_0x412867,_0x4697b0){const _0x1b04c3=a241_0x18f859;if(typeof Reflect===_0x1b04c3(0xc3)&&typeof Reflect['metadata']===_0x1b04c3(0x84))return Reflect[_0x1b04c3(0xc8)](_0x412867,_0x4697b0);},__param=this&&this[a241_0x18f859(0xa0)]||function(_0x376e7f,_0x5ad968){return function(_0x38d378,_0x3cce3a){_0x5ad968(_0x38d378,_0x3cce3a,_0x376e7f);};};Object['defineProperty'](exports,a241_0x18f859(0x80),{'value':!![]}),exports['GitlabRepoService']=void 0x0;const bad_request_error_1=require('../../../../../core/errors/bad-request.error'),not_found_error_1=require(a241_0x18f859(0x9a)),gitlab_api_service_1=require(a241_0x18f859(0x8d)),typedi_1=require(a241_0x18f859(0x85)),api_error_1=require(a241_0x18f859(0xb7)),git_internal_1=require(a241_0x18f859(0x7f)),repo_class_1=require('../repo.class'),git_repo_service_1=require(a241_0x18f859(0xa5)),gitlab_credentials_dto_1=require(a241_0x18f859(0xc9)),providers_tokens_1=require(a241_0x18f859(0xb3));let GitlabRepoService=class GitlabRepoService extends git_repo_service_1[a241_0x18f859(0xc5)]{constructor(_0x38d2da,_0x5a0285){const _0x2a7701=a241_0x18f859;super(_0x38d2da),this[_0x2a7701(0xc0)]=_0x38d2da,this[_0x2a7701(0xb6)]=_0x5a0285['groupId'],this[_0x2a7701(0xb9)]=_0x5a0285;}async[a241_0x18f859(0xc6)](){const _0x2b5375=a241_0x18f859;if(!this[_0x2b5375(0xae)]){const _0x3ec835=await this[_0x2b5375(0xc0)]['getGroup'](this[_0x2b5375(0xb6)]);this['groupPath']=_0x3ec835[_0x2b5375(0x8a)];}return this['groupPath'];}async[a241_0x18f859(0x9c)](){const _0x51e7b8=a241_0x18f859;if(!this[_0x51e7b8(0xb1)]){const _0x27c35d=await this[_0x51e7b8(0xc0)][_0x51e7b8(0x92)]();this[_0x51e7b8(0xb1)]=_0x27c35d['username'];}return this[_0x51e7b8(0xb1)];}async[a241_0x18f859(0x86)](_0x50a894){const _0x2a7868=a241_0x18f859,_0x682db2=await(this[_0x2a7868(0xb6)]?this[_0x2a7868(0xc6)]():this[_0x2a7868(0x9c)]()),_0x12e8a2=this['api'][_0x2a7868(0x91)](this[_0x2a7868(0xc4)][_0x2a7868(0x7e)][_0x2a7868(0x9e)]+'/projects/'+encodeURIComponent(_0x682db2+'/'+_0x50a894));return _0x12e8a2;}async[a241_0x18f859(0x9d)](_0x21ac1b){const _0x1b1871=a241_0x18f859;try{const _0x5099cc={'name':_0x21ac1b['name'],'visibility':_0x21ac1b[_0x1b1871(0xba)]?_0x1b1871(0xba):_0x1b1871(0xc2),'namespace_id':this['groupId'],..._0x21ac1b[_0x1b1871(0xbc)]||{}},_0x2a062c=await this['request']['post'](_0x1b1871(0xa7),_0x5099cc),_0x2ffacd=repo_class_1['Repo']['fromGitlab'](_0x2a062c,this[_0x1b1871(0xc0)],this[_0x1b1871(0xb9)]);return _0x21ac1b[_0x1b1871(0x94)]&&await git_internal_1[_0x1b1871(0xb4)]['createEmptyBranch'](_0x2ffacd,_0x21ac1b[_0x1b1871(0xc1)]||_0x1b1871(0xb5),'',this['credentials']),this[_0x1b1871(0xa9)](_0x2ffacd[_0x1b1871(0xc7)]);}catch(_0x387f8f){if(_0x387f8f instanceof api_error_1['ApiError'])throw _0x387f8f;throw new bad_request_error_1[(_0x1b1871(0x8b))](_0x387f8f);}}async[a241_0x18f859(0xa9)](_0x4f2b81){const _0x5268d4=a241_0x18f859;try{const _0x43b16c=await this['createRequestToRepo'](_0x4f2b81),_0x391a5c=await _0x43b16c[_0x5268d4(0x9b)]('');return repo_class_1[_0x5268d4(0xa8)]['fromGitlab'](_0x391a5c,this['api'],this['credentials']);}catch(_0x2001f6){if(_0x2001f6 instanceof api_error_1[_0x5268d4(0x8f)])throw _0x2001f6;throw new not_found_error_1[(_0x5268d4(0x8c))](_0x2001f6);}}async[a241_0x18f859(0xbe)](){const _0x31e1ec=a241_0x18f859;try{let _0x441ff5='';if(this[_0x31e1ec(0xb6)])_0x441ff5=_0x31e1ec(0x88)+this[_0x31e1ec(0xb6)]+'/projects';else{const _0x4bb1b4=await this[_0x31e1ec(0x9c)]();_0x441ff5='users/'+_0x4bb1b4+_0x31e1ec(0x83);}let _0x219899=!![],_0xdcddea=0x1;const _0x3cf96b=[];do{const _0x394c02=await this[_0x31e1ec(0xc4)][_0x31e1ec(0x9b)](_0x441ff5,{'params':{'page':_0xdcddea,'per_page':0x64}});_0x3cf96b['push'](..._0x394c02),_0x219899=_0x394c02['length']>0x0,_0xdcddea+=0x1;}while(_0x219899);return _0x3cf96b[_0x31e1ec(0xbd)](_0x4c63ee=>repo_class_1[_0x31e1ec(0xa8)][_0x31e1ec(0x82)](_0x4c63ee,this[_0x31e1ec(0xc0)],this['credentials']));}catch(_0x4393ea){if(_0x4393ea instanceof api_error_1[_0x31e1ec(0x8f)])throw _0x4393ea;throw new not_found_error_1[(_0x31e1ec(0x8c))](_0x4393ea);}}async[a241_0x18f859(0x97)](_0x9b942b,_0x155063){const _0x1b8905=a241_0x18f859;try{const _0x2816cf=await this[_0x1b8905(0x86)](_0x9b942b),_0x5674da=await _0x2816cf[_0x1b8905(0xbf)]('',{..._0x155063,'path':_0x155063['name']});return repo_class_1[_0x1b8905(0xa8)][_0x1b8905(0x82)](_0x5674da,this[_0x1b8905(0xc0)],this[_0x1b8905(0xb9)]);}catch(_0x3b1b7b){if(_0x3b1b7b instanceof api_error_1[_0x1b8905(0x8f)])throw _0x3b1b7b;throw new not_found_error_1[(_0x1b8905(0x8c))](_0x3b1b7b);}}async[a241_0x18f859(0xad)](_0x4d3126){const _0x19b755=a241_0x18f859;try{const _0x8a951c=await this[_0x19b755(0x86)](_0x4d3126);await _0x8a951c[_0x19b755(0xad)]('');}catch(_0x31a0c1){if(_0x31a0c1 instanceof api_error_1['ApiError'])throw _0x31a0c1;throw new bad_request_error_1[(_0x19b755(0x8b))](_0x31a0c1);}}};GitlabRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x1,(0x0,typedi_1[a241_0x18f859(0x87)])(providers_tokens_1[a241_0x18f859(0xb0)][a241_0x18f859(0xb9)])),__metadata(a241_0x18f859(0xac),[gitlab_api_service_1[a241_0x18f859(0x9f)],gitlab_credentials_dto_1[a241_0x18f859(0xb8)]])],GitlabRepoService),exports[a241_0x18f859(0xaa)]=GitlabRepoService;