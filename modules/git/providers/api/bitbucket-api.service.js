const a158_0x3aaec8=a158_0x2199;(function(_0x395481,_0x21c208){const _0x223040=a158_0x2199,_0x38389d=_0x395481();while(!![]){try{const _0x8798c5=-parseInt(_0x223040(0xf0))/0x1+parseInt(_0x223040(0x118))/0x2+-parseInt(_0x223040(0x10b))/0x3+parseInt(_0x223040(0xed))/0x4*(-parseInt(_0x223040(0xf4))/0x5)+-parseInt(_0x223040(0x11a))/0x6+-parseInt(_0x223040(0x107))/0x7+parseInt(_0x223040(0xfc))/0x8*(parseInt(_0x223040(0xf1))/0x9);if(_0x8798c5===_0x21c208)break;else _0x38389d['push'](_0x38389d['shift']());}catch(_0x21749f){_0x38389d['push'](_0x38389d['shift']());}}}(a158_0x4849,0x9584f));const a158_0x4b62c4=(function(){let _0x551582=!![];return function(_0x5a6eac,_0x4f555a){const _0x5c9e5d=_0x551582?function(){const _0x205307=a158_0x2199;if(_0x4f555a){const _0x11189a=_0x4f555a[_0x205307(0x126)](_0x5a6eac,arguments);return _0x4f555a=null,_0x11189a;}}:function(){};return _0x551582=![],_0x5c9e5d;};}()),a158_0x2b4568=a158_0x4b62c4(this,function(){const _0x47d66f=a158_0x2199;return a158_0x2b4568[_0x47d66f(0x123)]()['search']('(((.+)+)+)+$')[_0x47d66f(0x123)]()[_0x47d66f(0x10e)](a158_0x2b4568)[_0x47d66f(0x108)](_0x47d66f(0x11b));});function a158_0x2199(_0x177c36,_0x26d163){const _0x1c8df8=a158_0x4849();return a158_0x2199=function(_0x2b4568,_0x4b62c4){_0x2b4568=_0x2b4568-0xed;let _0x48498c=_0x1c8df8[_0x2b4568];return _0x48498c;},a158_0x2199(_0x177c36,_0x26d163);}a158_0x2b4568();function a158_0x4849(){const _0x1b6c92=['user','__metadata','defineProperty','BitbucketApiService','Service','axios','3135454rBJjIG','search','Inject','__importDefault','146043AedeXg','checkAccessToken','default','constructor','accessTokenExpiresAt','provider','refreshToken','../types/git-provider','__esModule','get','https://bitbucket.org','object','design:paramtypes','836574qAvwUs','function','7104954CtKTVh','(((.+)+)+)+$','MAX_REQUEST_PER_HOUR','credentials','use','password','grant_type=client_credentials','createRequest','/site/oauth2/access_token','toString','now','Tokens','apply','getOwnPropertyDescriptor','getCurrentUser','BitbucketCredentialsDto','4720012xfScEl','headers','./git-api.service','567695pDxYzC','9yHDKPd','__param','url','5stzlOe','getHeaders','metadata','setAccessToken','request','username','typedi','decorate','28980832uOzDRe','__decorate','length','pathname','post'];a158_0x4849=function(){return _0x1b6c92;};return a158_0x4849();}'use strict';var __decorate=this&&this[a158_0x3aaec8(0xfd)]||function(_0x55c573,_0x3ab491,_0x368bc9,_0x364ad1){const _0x4555e6=a158_0x3aaec8;var _0x123a6e=arguments[_0x4555e6(0xfe)],_0x23ef56=_0x123a6e<0x3?_0x3ab491:_0x364ad1===null?_0x364ad1=Object[_0x4555e6(0x127)](_0x3ab491,_0x368bc9):_0x364ad1,_0x127c02;if(typeof Reflect===_0x4555e6(0x116)&&typeof Reflect[_0x4555e6(0xfb)]===_0x4555e6(0x119))_0x23ef56=Reflect[_0x4555e6(0xfb)](_0x55c573,_0x3ab491,_0x368bc9,_0x364ad1);else{for(var _0x1cb89f=_0x55c573['length']-0x1;_0x1cb89f>=0x0;_0x1cb89f--)if(_0x127c02=_0x55c573[_0x1cb89f])_0x23ef56=(_0x123a6e<0x3?_0x127c02(_0x23ef56):_0x123a6e>0x3?_0x127c02(_0x3ab491,_0x368bc9,_0x23ef56):_0x127c02(_0x3ab491,_0x368bc9))||_0x23ef56;}return _0x123a6e>0x3&&_0x23ef56&&Object[_0x4555e6(0x103)](_0x3ab491,_0x368bc9,_0x23ef56),_0x23ef56;},__metadata=this&&this[a158_0x3aaec8(0x102)]||function(_0x120183,_0x45f3cb){const _0x189a47=a158_0x3aaec8;if(typeof Reflect===_0x189a47(0x116)&&typeof Reflect[_0x189a47(0xf6)]===_0x189a47(0x119))return Reflect[_0x189a47(0xf6)](_0x120183,_0x45f3cb);},__param=this&&this[a158_0x3aaec8(0xf2)]||function(_0x2e3f5b,_0x36a448){return function(_0x58e83e,_0x4d6619){_0x36a448(_0x58e83e,_0x4d6619,_0x2e3f5b);};},__importDefault=this&&this[a158_0x3aaec8(0x10a)]||function(_0x31683e){const _0x161518=a158_0x3aaec8;return _0x31683e&&_0x31683e[_0x161518(0x113)]?_0x31683e:{'default':_0x31683e};};Object[a158_0x3aaec8(0x103)](exports,a158_0x3aaec8(0x113),{'value':!![]}),exports[a158_0x3aaec8(0x104)]=void 0x0;const axios_1=__importDefault(require(a158_0x3aaec8(0x106))),typedi_1=require(a158_0x3aaec8(0xfa)),git_api_service_1=require(a158_0x3aaec8(0xef)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a158_0x3aaec8(0x112)),url_1=require(a158_0x3aaec8(0xf3));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x2ffce9,_0x5d9cf0){const _0x52e962=a158_0x3aaec8;super(_0x2ffce9,_0x5d9cf0),this[_0x52e962(0x10f)]=-0x1,this[_0x52e962(0x11c)]=0x3e8;}[a158_0x3aaec8(0x121)](_0x174c19){const _0x5c5753=a158_0x3aaec8,_0x344cc9=super[_0x5c5753(0x121)](_0x174c19);return _0x344cc9['interceptors'][_0x5c5753(0xf8)][_0x5c5753(0x11e)](async _0x1c885c=>{const _0x3788b0=_0x5c5753;return await this[_0x3788b0(0x10c)](),_0x1c885c[_0x3788b0(0xee)]['Authorization']=this[_0x3788b0(0x11d)]['getAuthorizationHeader'](),_0x1c885c;}),_0x344cc9;}async['checkAccessToken'](){const _0x4e61e2=a158_0x3aaec8;if(Date[_0x4e61e2(0x124)]()<this['accessTokenExpiresAt'])return;await this[_0x4e61e2(0x111)]();}async[a158_0x3aaec8(0x111)](){const _0x298ae1=a158_0x3aaec8,{clientId:_0x346710,clientSecret:_0x451bd9}=this[_0x298ae1(0x11d)],_0x3987aa=new url_1['URL'](_0x298ae1(0x115));_0x3987aa[_0x298ae1(0xf9)]=_0x346710,_0x3987aa[_0x298ae1(0x11f)]=_0x451bd9,_0x3987aa[_0x298ae1(0xff)]=_0x298ae1(0x122);const {data:_0x5bbbc2}=await axios_1[_0x298ae1(0x10d)][_0x298ae1(0x100)](_0x3987aa[_0x298ae1(0x123)](),_0x298ae1(0x120)),{expires_in:_0x2bbf51,access_token:_0x6f3abb}=_0x5bbbc2;this[_0x298ae1(0x10f)]=Date[_0x298ae1(0x124)]()+_0x2bbf51*0x3e8,this[_0x298ae1(0x11d)][_0x298ae1(0xf7)](_0x6f3abb);}[a158_0x3aaec8(0xf5)](){return{};}[a158_0x3aaec8(0x128)](){const _0x21462a=a158_0x3aaec8;return this['request'][_0x21462a(0x114)](_0x21462a(0x101));}async['isLoggedIn'](){const _0x35b365=a158_0x3aaec8;return await this[_0x35b365(0x128)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a158_0x3aaec8(0x105)])(),__param(0x0,(0x0,typedi_1[a158_0x3aaec8(0x109)])(providers_tokens_1[a158_0x3aaec8(0x125)][a158_0x3aaec8(0x110)])),__param(0x1,(0x0,typedi_1[a158_0x3aaec8(0x109)])(providers_tokens_1['Tokens'][a158_0x3aaec8(0x11d)])),__metadata(a158_0x3aaec8(0x117),[String,bitbucket_credentials_dto_1[a158_0x3aaec8(0x129)]])],BitbucketApiService),exports[a158_0x3aaec8(0x104)]=BitbucketApiService;