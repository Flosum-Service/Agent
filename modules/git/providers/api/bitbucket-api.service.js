const a184_0x3c6dc8=a184_0x4193;(function(_0x23fbb7,_0x4e18bc){const _0x43b7f4=a184_0x4193,_0x1207d0=_0x23fbb7();while(!![]){try{const _0xf56141=parseInt(_0x43b7f4(0x10c))/0x1*(parseInt(_0x43b7f4(0xe8))/0x2)+-parseInt(_0x43b7f4(0xfc))/0x3+parseInt(_0x43b7f4(0x100))/0x4+parseInt(_0x43b7f4(0xe0))/0x5*(-parseInt(_0x43b7f4(0xe2))/0x6)+-parseInt(_0x43b7f4(0xd6))/0x7*(parseInt(_0x43b7f4(0xf4))/0x8)+-parseInt(_0x43b7f4(0x106))/0x9+parseInt(_0x43b7f4(0xe6))/0xa*(parseInt(_0x43b7f4(0xdb))/0xb);if(_0xf56141===_0x4e18bc)break;else _0x1207d0['push'](_0x1207d0['shift']());}catch(_0x33cbdd){_0x1207d0['push'](_0x1207d0['shift']());}}}(a184_0x3282,0x431cc));const a184_0x51478d=(function(){let _0x5156c4=!![];return function(_0x1aa4c2,_0x2adc06){const _0x19d7c5=_0x5156c4?function(){const _0x39817f=a184_0x4193;if(_0x2adc06){const _0x4b16f1=_0x2adc06[_0x39817f(0xd3)](_0x1aa4c2,arguments);return _0x2adc06=null,_0x4b16f1;}}:function(){};return _0x5156c4=![],_0x19d7c5;};}()),a184_0x51aa00=a184_0x51478d(this,function(){const _0x2234c2=a184_0x4193;return a184_0x51aa00[_0x2234c2(0xf1)]()['search']('(((.+)+)+)+$')[_0x2234c2(0xf1)]()[_0x2234c2(0xdf)](a184_0x51aa00)[_0x2234c2(0xf2)](_0x2234c2(0xe9));});a184_0x51aa00();'use strict';var __decorate=this&&this[a184_0x3c6dc8(0x108)]||function(_0xda359f,_0x383654,_0x272f8c,_0x3a1fed){const _0x460c6f=a184_0x3c6dc8;var _0x33099d=arguments['length'],_0x46cb65=_0x33099d<0x3?_0x383654:_0x3a1fed===null?_0x3a1fed=Object['getOwnPropertyDescriptor'](_0x383654,_0x272f8c):_0x3a1fed,_0x2bf4d5;if(typeof Reflect===_0x460c6f(0xfe)&&typeof Reflect[_0x460c6f(0xf9)]===_0x460c6f(0x104))_0x46cb65=Reflect[_0x460c6f(0xf9)](_0xda359f,_0x383654,_0x272f8c,_0x3a1fed);else{for(var _0x1661f8=_0xda359f[_0x460c6f(0xd2)]-0x1;_0x1661f8>=0x0;_0x1661f8--)if(_0x2bf4d5=_0xda359f[_0x1661f8])_0x46cb65=(_0x33099d<0x3?_0x2bf4d5(_0x46cb65):_0x33099d>0x3?_0x2bf4d5(_0x383654,_0x272f8c,_0x46cb65):_0x2bf4d5(_0x383654,_0x272f8c))||_0x46cb65;}return _0x33099d>0x3&&_0x46cb65&&Object[_0x460c6f(0xe1)](_0x383654,_0x272f8c,_0x46cb65),_0x46cb65;},__metadata=this&&this[a184_0x3c6dc8(0x10a)]||function(_0x1aa3ba,_0x223290){const _0x5e25f0=a184_0x3c6dc8;if(typeof Reflect===_0x5e25f0(0xfe)&&typeof Reflect[_0x5e25f0(0xe3)]===_0x5e25f0(0x104))return Reflect[_0x5e25f0(0xe3)](_0x1aa3ba,_0x223290);},__param=this&&this[a184_0x3c6dc8(0xf0)]||function(_0x5304fc,_0x4a105f){return function(_0x29fe02,_0x4e3a75){_0x4a105f(_0x29fe02,_0x4e3a75,_0x5304fc);};},__importDefault=this&&this['__importDefault']||function(_0x10e390){return _0x10e390&&_0x10e390['__esModule']?_0x10e390:{'default':_0x10e390};};Object[a184_0x3c6dc8(0xe1)](exports,a184_0x3c6dc8(0xd5),{'value':!![]}),exports[a184_0x3c6dc8(0xf8)]=void 0x0;function a184_0x4193(_0x40a5e5,_0x3c3b39){const _0xe72383=a184_0x3282();return a184_0x4193=function(_0x51aa00,_0x51478d){_0x51aa00=_0x51aa00-0xd2;let _0x328245=_0xe72383[_0x51aa00];return _0x328245;},a184_0x4193(_0x40a5e5,_0x3c3b39);}function a184_0x3282(){const _0x243267=['default','setAccessToken','BitbucketApiService','decorate','checkAccessToken','Tokens','1230873Fcnhea','grant_type=client_credentials','object','interceptors','186780jxvLNs','design:paramtypes','getCurrentUser','post','function','GitApiService','452286ZdVVOZ','username','__decorate','provider','__metadata','get','1Emqbyz','length','apply','refreshToken','__esModule','561862HorbKl','../credentials/dto/bitbucket-credentials.dto','../providers.tokens','accessTokenExpiresAt','MAX_REQUEST_PER_HOUR','3146PimyVH','user','credentials','headers','constructor','5nlxtAQ','defineProperty','541308ZqzxzE','metadata','getAuthorizationHeader','isLoggedIn','25540DKdvic','now','257564MDXFQJ','(((.+)+)+)+$','axios','/site/oauth2/access_token','url','../types/git-provider','password','Service','__param','toString','search','Inject','8OAdnbk','createRequest'];a184_0x3282=function(){return _0x243267;};return a184_0x3282();}const axios_1=__importDefault(require(a184_0x3c6dc8(0xea))),typedi_1=require('typedi'),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require(a184_0x3c6dc8(0xd7)),providers_tokens_1=require(a184_0x3c6dc8(0xd8)),git_provider_1=require(a184_0x3c6dc8(0xed)),url_1=require(a184_0x3c6dc8(0xec));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a184_0x3c6dc8(0x105)]{constructor(_0x19700a,_0x1cfddf){const _0x3fc57d=a184_0x3c6dc8;super(_0x19700a,_0x1cfddf),this[_0x3fc57d(0xd9)]=-0x1,this[_0x3fc57d(0xda)]=0x3e8;}[a184_0x3c6dc8(0xf5)](_0x47c7bf){const _0x549260=a184_0x3c6dc8,_0x4b2da9=super[_0x549260(0xf5)](_0x47c7bf);return _0x4b2da9[_0x549260(0xff)]['request']['use'](async _0x5bcb36=>{const _0x15c8bd=_0x549260;return await this[_0x15c8bd(0xfa)](),_0x5bcb36[_0x15c8bd(0xde)]['Authorization']=this[_0x15c8bd(0xdd)][_0x15c8bd(0xe4)](),_0x5bcb36;}),_0x4b2da9;}async[a184_0x3c6dc8(0xfa)](){const _0x23690a=a184_0x3c6dc8;if(Date[_0x23690a(0xe7)]()<this[_0x23690a(0xd9)])return;await this[_0x23690a(0xd4)]();}async[a184_0x3c6dc8(0xd4)](){const _0x17ec13=a184_0x3c6dc8,{clientId:_0x262127,clientSecret:_0x892b3a}=this[_0x17ec13(0xdd)],_0x5171d6=new url_1['URL']('https://bitbucket.org');_0x5171d6[_0x17ec13(0x107)]=_0x262127,_0x5171d6[_0x17ec13(0xee)]=_0x892b3a,_0x5171d6['pathname']=_0x17ec13(0xeb);const {data:_0x4af92e}=await axios_1[_0x17ec13(0xf6)][_0x17ec13(0x103)](_0x5171d6['toString'](),_0x17ec13(0xfd)),{expires_in:_0x359935,access_token:_0x43d9c1}=_0x4af92e;this['accessTokenExpiresAt']=Date[_0x17ec13(0xe7)]()+_0x359935*0x3e8,this['credentials'][_0x17ec13(0xf7)](_0x43d9c1);}['getHeaders'](){return{};}[a184_0x3c6dc8(0x102)](){const _0x414079=a184_0x3c6dc8;return this['request'][_0x414079(0x10b)](_0x414079(0xdc));}async[a184_0x3c6dc8(0xe5)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a184_0x3c6dc8(0xef)])(),__param(0x0,(0x0,typedi_1[a184_0x3c6dc8(0xf3)])(providers_tokens_1[a184_0x3c6dc8(0xfb)][a184_0x3c6dc8(0x109)])),__param(0x1,(0x0,typedi_1[a184_0x3c6dc8(0xf3)])(providers_tokens_1['Tokens']['credentials'])),__metadata(a184_0x3c6dc8(0x101),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports[a184_0x3c6dc8(0xf8)]=BitbucketApiService;