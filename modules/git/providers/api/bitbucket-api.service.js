const a158_0xea2e56=a158_0x2110;(function(_0x1deabf,_0x5f1c7c){const _0x57284f=a158_0x2110,_0x199097=_0x1deabf();while(!![]){try{const _0x714505=-parseInt(_0x57284f(0x1b4))/0x1+-parseInt(_0x57284f(0x1d0))/0x2*(-parseInt(_0x57284f(0x1a6))/0x3)+parseInt(_0x57284f(0x1d3))/0x4*(-parseInt(_0x57284f(0x1d2))/0x5)+-parseInt(_0x57284f(0x1bf))/0x6*(-parseInt(_0x57284f(0x1bd))/0x7)+parseInt(_0x57284f(0x1ab))/0x8+-parseInt(_0x57284f(0x1a4))/0x9+parseInt(_0x57284f(0x1a1))/0xa;if(_0x714505===_0x5f1c7c)break;else _0x199097['push'](_0x199097['shift']());}catch(_0x27f043){_0x199097['push'](_0x199097['shift']());}}}(a158_0x2582,0x59aaf));const a158_0x4b0a54=(function(){let _0xd36a6a=!![];return function(_0x28a2b2,_0x3ecebc){const _0xc574cb=_0xd36a6a?function(){const _0x206af3=a158_0x2110;if(_0x3ecebc){const _0x74b18f=_0x3ecebc[_0x206af3(0x1bc)](_0x28a2b2,arguments);return _0x3ecebc=null,_0x74b18f;}}:function(){};return _0xd36a6a=![],_0xc574cb;};}()),a158_0x52bdfd=a158_0x4b0a54(this,function(){const _0x507ee4=a158_0x2110;return a158_0x52bdfd[_0x507ee4(0x1b6)]()[_0x507ee4(0x1ae)](_0x507ee4(0x1c8))[_0x507ee4(0x1b6)]()['constructor'](a158_0x52bdfd)[_0x507ee4(0x1ae)]('(((.+)+)+)+$');});a158_0x52bdfd();'use strict';function a158_0x2110(_0x491c66,_0x28d33a){const _0x3193c0=a158_0x2582();return a158_0x2110=function(_0x52bdfd,_0x4b0a54){_0x52bdfd=_0x52bdfd-0x197;let _0x25829f=_0x3193c0[_0x52bdfd];return _0x25829f;},a158_0x2110(_0x491c66,_0x28d33a);}var __decorate=this&&this[a158_0xea2e56(0x1c7)]||function(_0x42e0f3,_0x225c93,_0x5c5e38,_0x5aeec0){const _0x341e69=a158_0xea2e56;var _0x1876f9=arguments['length'],_0xd74075=_0x1876f9<0x3?_0x225c93:_0x5aeec0===null?_0x5aeec0=Object[_0x341e69(0x1b9)](_0x225c93,_0x5c5e38):_0x5aeec0,_0x3e666f;if(typeof Reflect===_0x341e69(0x1c0)&&typeof Reflect[_0x341e69(0x1b3)]===_0x341e69(0x19b))_0xd74075=Reflect[_0x341e69(0x1b3)](_0x42e0f3,_0x225c93,_0x5c5e38,_0x5aeec0);else{for(var _0x5b3238=_0x42e0f3[_0x341e69(0x1ac)]-0x1;_0x5b3238>=0x0;_0x5b3238--)if(_0x3e666f=_0x42e0f3[_0x5b3238])_0xd74075=(_0x1876f9<0x3?_0x3e666f(_0xd74075):_0x1876f9>0x3?_0x3e666f(_0x225c93,_0x5c5e38,_0xd74075):_0x3e666f(_0x225c93,_0x5c5e38))||_0xd74075;}return _0x1876f9>0x3&&_0xd74075&&Object[_0x341e69(0x1ad)](_0x225c93,_0x5c5e38,_0xd74075),_0xd74075;},__metadata=this&&this[a158_0xea2e56(0x1b8)]||function(_0x2f4d53,_0xfc602c){const _0x32243a=a158_0xea2e56;if(typeof Reflect===_0x32243a(0x1c0)&&typeof Reflect[_0x32243a(0x1c6)]===_0x32243a(0x19b))return Reflect['metadata'](_0x2f4d53,_0xfc602c);},__param=this&&this[a158_0xea2e56(0x1ca)]||function(_0x252613,_0x18cbf0){return function(_0x45e1de,_0x540c4f){_0x18cbf0(_0x45e1de,_0x540c4f,_0x252613);};},__importDefault=this&&this[a158_0xea2e56(0x1c4)]||function(_0x3fe53b){const _0x192b8a=a158_0xea2e56;return _0x3fe53b&&_0x3fe53b[_0x192b8a(0x19d)]?_0x3fe53b:{'default':_0x3fe53b};};Object[a158_0xea2e56(0x1ad)](exports,'__esModule',{'value':!![]}),exports[a158_0xea2e56(0x1be)]=void 0x0;function a158_0x2582(){const _0x92a0c6=['Authorization','/site/oauth2/access_token','3109968mXrKdE','length','defineProperty','search','../credentials/dto/bitbucket-credentials.dto','password','Inject','createRequest','decorate','442633MkkWyr','URL','toString','checkAccessToken','__metadata','getOwnPropertyDescriptor','now','GitApiService','apply','7YWEKIt','BitbucketApiService','1684728kdeBnb','object','request','refreshToken','use','__importDefault','pathname','metadata','__decorate','(((.+)+)+)+$','./git-api.service','__param','user','BitbucketCredentialsDto','get','grant_type=client_credentials','../types/git-provider','434OELCbs','credentials','15tXHefP','56268Svatfm','https://bitbucket.org','accessTokenExpiresAt','getHeaders','getAuthorizationHeader','interceptors','function','username','__esModule','design:paramtypes','default','provider','3235560JaWNab','headers','Service','2282400fCntEB','getCurrentUser','1557hrCmIl','Tokens','url'];a158_0x2582=function(){return _0x92a0c6;};return a158_0x2582();}const axios_1=__importDefault(require('axios')),typedi_1=require('typedi'),git_api_service_1=require(a158_0xea2e56(0x1c9)),bitbucket_credentials_dto_1=require(a158_0xea2e56(0x1af)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a158_0xea2e56(0x1cf)),url_1=require(a158_0xea2e56(0x1a8));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a158_0xea2e56(0x1bb)]{constructor(_0x4c0167,_0xec7c42){const _0xba400f=a158_0xea2e56;super(_0x4c0167,_0xec7c42),this[_0xba400f(0x197)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a158_0xea2e56(0x1b2)](_0x5ad09e){const _0x5c9d31=a158_0xea2e56,_0x475022=super[_0x5c9d31(0x1b2)](_0x5ad09e);return _0x475022[_0x5c9d31(0x19a)][_0x5c9d31(0x1c1)][_0x5c9d31(0x1c3)](async _0x5683b5=>{const _0x3f1728=_0x5c9d31;return await this[_0x3f1728(0x1b7)](),_0x5683b5[_0x3f1728(0x1a2)][_0x3f1728(0x1a9)]=this['credentials'][_0x3f1728(0x199)](),_0x5683b5;}),_0x475022;}async[a158_0xea2e56(0x1b7)](){const _0x4e6676=a158_0xea2e56;if(Date[_0x4e6676(0x1ba)]()<this[_0x4e6676(0x197)])return;await this[_0x4e6676(0x1c2)]();}async[a158_0xea2e56(0x1c2)](){const _0x3d7172=a158_0xea2e56,{clientId:_0x3e314e,clientSecret:_0x199f29}=this[_0x3d7172(0x1d1)],_0x2e851d=new url_1[(_0x3d7172(0x1b5))](_0x3d7172(0x1d4));_0x2e851d[_0x3d7172(0x19c)]=_0x3e314e,_0x2e851d[_0x3d7172(0x1b0)]=_0x199f29,_0x2e851d[_0x3d7172(0x1c5)]=_0x3d7172(0x1aa);const {data:_0x5db7a3}=await axios_1[_0x3d7172(0x19f)]['post'](_0x2e851d[_0x3d7172(0x1b6)](),_0x3d7172(0x1ce)),{expires_in:_0x2d0578,access_token:_0x45a3b5}=_0x5db7a3;this[_0x3d7172(0x197)]=Date[_0x3d7172(0x1ba)]()+_0x2d0578*0x3e8,this[_0x3d7172(0x1d1)]['setAccessToken'](_0x45a3b5);}[a158_0xea2e56(0x198)](){return{};}['getCurrentUser'](){const _0x38c073=a158_0xea2e56;return this[_0x38c073(0x1c1)][_0x38c073(0x1cd)](_0x38c073(0x1cb));}async['isLoggedIn'](){const _0x473596=a158_0xea2e56;return await this[_0x473596(0x1a5)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a158_0xea2e56(0x1a3)])(),__param(0x0,(0x0,typedi_1[a158_0xea2e56(0x1b1)])(providers_tokens_1[a158_0xea2e56(0x1a7)][a158_0xea2e56(0x1a0)])),__param(0x1,(0x0,typedi_1[a158_0xea2e56(0x1b1)])(providers_tokens_1[a158_0xea2e56(0x1a7)][a158_0xea2e56(0x1d1)])),__metadata(a158_0xea2e56(0x19e),[String,bitbucket_credentials_dto_1[a158_0xea2e56(0x1cc)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;