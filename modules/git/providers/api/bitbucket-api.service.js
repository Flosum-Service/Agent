function a184_0x1730(_0x58fd4a,_0x5efb07){const _0x3318f2=a184_0x15f3();return a184_0x1730=function(_0x3e0811,_0x211dde){_0x3e0811=_0x3e0811-0xd2;let _0x15f3dd=_0x3318f2[_0x3e0811];return _0x15f3dd;},a184_0x1730(_0x58fd4a,_0x5efb07);}const a184_0x23054d=a184_0x1730;(function(_0x16e62c,_0x11dccf){const _0x3877cc=a184_0x1730,_0x3c1279=_0x16e62c();while(!![]){try{const _0x5dbd18=parseInt(_0x3877cc(0x105))/0x1*(parseInt(_0x3877cc(0xd6))/0x2)+parseInt(_0x3877cc(0x10b))/0x3*(parseInt(_0x3877cc(0xf3))/0x4)+parseInt(_0x3877cc(0x10d))/0x5+-parseInt(_0x3877cc(0x102))/0x6*(parseInt(_0x3877cc(0xe4))/0x7)+-parseInt(_0x3877cc(0xfb))/0x8+-parseInt(_0x3877cc(0xef))/0x9+parseInt(_0x3877cc(0xf4))/0xa*(parseInt(_0x3877cc(0xe5))/0xb);if(_0x5dbd18===_0x11dccf)break;else _0x3c1279['push'](_0x3c1279['shift']());}catch(_0x2521fa){_0x3c1279['push'](_0x3c1279['shift']());}}}(a184_0x15f3,0x61a4d));const a184_0x211dde=(function(){let _0x4ff0c4=!![];return function(_0x32042,_0x25d346){const _0x418d4b=_0x4ff0c4?function(){if(_0x25d346){const _0xf7e8bf=_0x25d346['apply'](_0x32042,arguments);return _0x25d346=null,_0xf7e8bf;}}:function(){};return _0x4ff0c4=![],_0x418d4b;};}()),a184_0x3e0811=a184_0x211dde(this,function(){const _0x119f4d=a184_0x1730;return a184_0x3e0811['toString']()[_0x119f4d(0xd7)]('(((.+)+)+)+$')[_0x119f4d(0xe8)]()[_0x119f4d(0xf7)](a184_0x3e0811)[_0x119f4d(0xd7)](_0x119f4d(0xdc));});a184_0x3e0811();function a184_0x15f3(){const _0x5011e5=['pathname','../types/git-provider','GitApiService','defineProperty','metadata','URL','7DggRHN','8721614WSkyUG','getCurrentUser','provider','toString','../providers.tokens','refreshToken','checkAccessToken','headers','credentials','__importDefault','2863881tpOJtC','function','design:paramtypes','password','106076oLQNQa','10QUTGmg','MAX_REQUEST_PER_HOUR','object','constructor','setAccessToken','__decorate','/site/oauth2/access_token','5947072mQHhYu','BitbucketCredentialsDto','decorate','../credentials/dto/bitbucket-credentials.dto','default','request','__param','1970532nGVUEe','getAuthorizationHeader','Inject','19GwnKSm','get','__metadata','username','createRequest','Tokens','18MIHuJG','accessTokenExpiresAt','487065mpINyI','now','interceptors','BitbucketApiService','isLoggedIn','post','Service','77954icpnoi','search','getOwnPropertyDescriptor','user','getHeaders','__esModule','(((.+)+)+)+$','length'];a184_0x15f3=function(){return _0x5011e5;};return a184_0x15f3();}'use strict';var __decorate=this&&this[a184_0x23054d(0xf9)]||function(_0x17843f,_0x4b17bc,_0x3e702a,_0x3ca549){const _0x4f4300=a184_0x23054d;var _0x178926=arguments['length'],_0x43861d=_0x178926<0x3?_0x4b17bc:_0x3ca549===null?_0x3ca549=Object[_0x4f4300(0xd8)](_0x4b17bc,_0x3e702a):_0x3ca549,_0x50e9f0;if(typeof Reflect===_0x4f4300(0xf6)&&typeof Reflect[_0x4f4300(0xfd)]===_0x4f4300(0xf0))_0x43861d=Reflect[_0x4f4300(0xfd)](_0x17843f,_0x4b17bc,_0x3e702a,_0x3ca549);else{for(var _0x2ff769=_0x17843f[_0x4f4300(0xdd)]-0x1;_0x2ff769>=0x0;_0x2ff769--)if(_0x50e9f0=_0x17843f[_0x2ff769])_0x43861d=(_0x178926<0x3?_0x50e9f0(_0x43861d):_0x178926>0x3?_0x50e9f0(_0x4b17bc,_0x3e702a,_0x43861d):_0x50e9f0(_0x4b17bc,_0x3e702a))||_0x43861d;}return _0x178926>0x3&&_0x43861d&&Object[_0x4f4300(0xe1)](_0x4b17bc,_0x3e702a,_0x43861d),_0x43861d;},__metadata=this&&this[a184_0x23054d(0x107)]||function(_0x16983a,_0xc7f4e){const _0x4ce5e7=a184_0x23054d;if(typeof Reflect===_0x4ce5e7(0xf6)&&typeof Reflect['metadata']===_0x4ce5e7(0xf0))return Reflect[_0x4ce5e7(0xe2)](_0x16983a,_0xc7f4e);},__param=this&&this[a184_0x23054d(0x101)]||function(_0x36809f,_0x5b72c6){return function(_0x3b08dc,_0x15afe0){_0x5b72c6(_0x3b08dc,_0x15afe0,_0x36809f);};},__importDefault=this&&this[a184_0x23054d(0xee)]||function(_0x17d056){const _0x18b01f=a184_0x23054d;return _0x17d056&&_0x17d056[_0x18b01f(0xdb)]?_0x17d056:{'default':_0x17d056};};Object[a184_0x23054d(0xe1)](exports,a184_0x23054d(0xdb),{'value':!![]}),exports[a184_0x23054d(0xd2)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require('typedi'),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require(a184_0x23054d(0xfe)),providers_tokens_1=require(a184_0x23054d(0xe9)),git_provider_1=require(a184_0x23054d(0xdf)),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a184_0x23054d(0xe0)]{constructor(_0x3fc9cc,_0x2a8263){const _0x1437b7=a184_0x23054d;super(_0x3fc9cc,_0x2a8263),this['accessTokenExpiresAt']=-0x1,this[_0x1437b7(0xf5)]=0x3e8;}['createRequest'](_0x5c6793){const _0x4cfcd5=a184_0x23054d,_0x569def=super[_0x4cfcd5(0x109)](_0x5c6793);return _0x569def[_0x4cfcd5(0x10f)][_0x4cfcd5(0x100)]['use'](async _0x26a8fe=>{const _0xca29ea=_0x4cfcd5;return await this['checkAccessToken'](),_0x26a8fe[_0xca29ea(0xec)]['Authorization']=this[_0xca29ea(0xed)][_0xca29ea(0x103)](),_0x26a8fe;}),_0x569def;}async[a184_0x23054d(0xeb)](){const _0x286c26=a184_0x23054d;if(Date['now']()<this[_0x286c26(0x10c)])return;await this[_0x286c26(0xea)]();}async[a184_0x23054d(0xea)](){const _0x32db01=a184_0x23054d,{clientId:_0x1fcb0a,clientSecret:_0xa1965f}=this[_0x32db01(0xed)],_0x38b174=new url_1[(_0x32db01(0xe3))]('https://bitbucket.org');_0x38b174[_0x32db01(0x108)]=_0x1fcb0a,_0x38b174[_0x32db01(0xf2)]=_0xa1965f,_0x38b174[_0x32db01(0xde)]=_0x32db01(0xfa);const {data:_0x1b52d6}=await axios_1[_0x32db01(0xff)][_0x32db01(0xd4)](_0x38b174[_0x32db01(0xe8)](),'grant_type=client_credentials'),{expires_in:_0x3bd168,access_token:_0x2af0c2}=_0x1b52d6;this['accessTokenExpiresAt']=Date[_0x32db01(0x10e)]()+_0x3bd168*0x3e8,this[_0x32db01(0xed)][_0x32db01(0xf8)](_0x2af0c2);}[a184_0x23054d(0xda)](){return{};}[a184_0x23054d(0xe6)](){const _0x59d6b8=a184_0x23054d;return this[_0x59d6b8(0x100)][_0x59d6b8(0x106)](_0x59d6b8(0xd9));}async[a184_0x23054d(0xd3)](){const _0x312892=a184_0x23054d;return await this[_0x312892(0xe6)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a184_0x23054d(0xd5)])(),__param(0x0,(0x0,typedi_1[a184_0x23054d(0x104)])(providers_tokens_1[a184_0x23054d(0x10a)][a184_0x23054d(0xe7)])),__param(0x1,(0x0,typedi_1[a184_0x23054d(0x104)])(providers_tokens_1[a184_0x23054d(0x10a)][a184_0x23054d(0xed)])),__metadata(a184_0x23054d(0xf1),[String,bitbucket_credentials_dto_1[a184_0x23054d(0xfc)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;