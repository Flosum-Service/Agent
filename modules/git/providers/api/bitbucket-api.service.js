const a124_0x1e9ae6=a124_0x56ac;(function(_0x376c97,_0x4f776e){const _0x324131=a124_0x56ac,_0x32dcb0=_0x376c97();while(!![]){try{const _0x35570a=-parseInt(_0x324131(0x1ee))/0x1+-parseInt(_0x324131(0x212))/0x2*(-parseInt(_0x324131(0x1f0))/0x3)+-parseInt(_0x324131(0x1fb))/0x4+-parseInt(_0x324131(0x204))/0x5+-parseInt(_0x324131(0x1f8))/0x6+-parseInt(_0x324131(0x20e))/0x7*(parseInt(_0x324131(0x217))/0x8)+-parseInt(_0x324131(0x202))/0x9*(-parseInt(_0x324131(0x201))/0xa);if(_0x35570a===_0x4f776e)break;else _0x32dcb0['push'](_0x32dcb0['shift']());}catch(_0x14ee1a){_0x32dcb0['push'](_0x32dcb0['shift']());}}}(a124_0x1015,0xc1513));const a124_0x3c8e1f=(function(){let _0x3b73d6=!![];return function(_0x2f276b,_0x74e287){const _0x1bfe78=_0x3b73d6?function(){const _0x405613=a124_0x56ac;if(_0x74e287){const _0xa4d4c0=_0x74e287[_0x405613(0x1fc)](_0x2f276b,arguments);return _0x74e287=null,_0xa4d4c0;}}:function(){};return _0x3b73d6=![],_0x1bfe78;};}()),a124_0x45a625=a124_0x3c8e1f(this,function(){const _0x57fa09=a124_0x56ac;return a124_0x45a625[_0x57fa09(0x20f)]()[_0x57fa09(0x220)](_0x57fa09(0x1f2))[_0x57fa09(0x20f)]()['constructor'](a124_0x45a625)[_0x57fa09(0x220)](_0x57fa09(0x1f2));});a124_0x45a625();function a124_0x56ac(_0x233962,_0x59487f){const _0x1347d9=a124_0x1015();return a124_0x56ac=function(_0x45a625,_0x3c8e1f){_0x45a625=_0x45a625-0x1ea;let _0x1015a8=_0x1347d9[_0x45a625];return _0x1015a8;},a124_0x56ac(_0x233962,_0x59487f);}'use strict';function a124_0x1015(){const _0x47fe84=['refreshToken','headers','use','666638crLTno','toString','typedi','function','1475134sMWeqF','GitApiService','MAX_REQUEST_PER_HOUR','pathname','/site/oauth2/access_token','72WiKIas','__esModule','Inject','length','interceptors','object','URL','__decorate','getHeaders','search','defineProperty','Tokens','../credentials/dto/bitbucket-credentials.dto','./git-api.service','889543yIwuGx','metadata','6nCwige','decorate','(((.+)+)+)+$','../types/git-provider','get','setAccessToken','credentials','request','4170558aObjJC','getCurrentUser','now','4921220CVJrui','apply','accessTokenExpiresAt','createRequest','design:paramtypes','../providers.tokens','110YELojE','2502621SMewYZ','isLoggedIn','350095VYfHGu','__metadata','BitbucketApiService','checkAccessToken','post','Service','getOwnPropertyDescriptor'];a124_0x1015=function(){return _0x47fe84;};return a124_0x1015();}var __decorate=this&&this[a124_0x1e9ae6(0x21e)]||function(_0x172f92,_0x97511c,_0x256f6e,_0x14d836){const _0x769a96=a124_0x1e9ae6;var _0x18a303=arguments[_0x769a96(0x21a)],_0x2992f0=_0x18a303<0x3?_0x97511c:_0x14d836===null?_0x14d836=Object[_0x769a96(0x20a)](_0x97511c,_0x256f6e):_0x14d836,_0x33711c;if(typeof Reflect===_0x769a96(0x21c)&&typeof Reflect[_0x769a96(0x1f1)]==='function')_0x2992f0=Reflect[_0x769a96(0x1f1)](_0x172f92,_0x97511c,_0x256f6e,_0x14d836);else{for(var _0x468304=_0x172f92[_0x769a96(0x21a)]-0x1;_0x468304>=0x0;_0x468304--)if(_0x33711c=_0x172f92[_0x468304])_0x2992f0=(_0x18a303<0x3?_0x33711c(_0x2992f0):_0x18a303>0x3?_0x33711c(_0x97511c,_0x256f6e,_0x2992f0):_0x33711c(_0x97511c,_0x256f6e))||_0x2992f0;}return _0x18a303>0x3&&_0x2992f0&&Object['defineProperty'](_0x97511c,_0x256f6e,_0x2992f0),_0x2992f0;},__metadata=this&&this[a124_0x1e9ae6(0x205)]||function(_0x4a96d0,_0xfb9b3c){const _0x4ca158=a124_0x1e9ae6;if(typeof Reflect===_0x4ca158(0x21c)&&typeof Reflect[_0x4ca158(0x1ef)]===_0x4ca158(0x211))return Reflect[_0x4ca158(0x1ef)](_0x4a96d0,_0xfb9b3c);},__param=this&&this['__param']||function(_0x1c6d92,_0x122362){return function(_0x55416d,_0x10b843){_0x122362(_0x55416d,_0x10b843,_0x1c6d92);};},__importDefault=this&&this['__importDefault']||function(_0x30af9e){return _0x30af9e&&_0x30af9e['__esModule']?_0x30af9e:{'default':_0x30af9e};};Object[a124_0x1e9ae6(0x1ea)](exports,a124_0x1e9ae6(0x218),{'value':!![]}),exports[a124_0x1e9ae6(0x206)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a124_0x1e9ae6(0x210)),git_api_service_1=require(a124_0x1e9ae6(0x1ed)),bitbucket_credentials_dto_1=require(a124_0x1e9ae6(0x1ec)),providers_tokens_1=require(a124_0x1e9ae6(0x200)),git_provider_1=require(a124_0x1e9ae6(0x1f3)),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a124_0x1e9ae6(0x213)]{constructor(_0x574247,_0x6e2342){const _0x39be78=a124_0x1e9ae6;super(_0x574247,_0x6e2342),this[_0x39be78(0x1fd)]=-0x1,this[_0x39be78(0x214)]=0x3e8;}[a124_0x1e9ae6(0x1fe)](_0x4e1585){const _0x147e63=a124_0x1e9ae6,_0x1e8e52=super[_0x147e63(0x1fe)](_0x4e1585);return _0x1e8e52[_0x147e63(0x21b)][_0x147e63(0x1f7)][_0x147e63(0x20d)](async _0x4c8086=>{const _0x554035=_0x147e63;return await this[_0x554035(0x207)](),_0x4c8086[_0x554035(0x20c)]||(_0x4c8086[_0x554035(0x20c)]={}),_0x4c8086[_0x554035(0x20c)]['Authorization']=this[_0x554035(0x1f6)]['getAuthorizationHeader'](),_0x4c8086;}),_0x1e8e52;}async[a124_0x1e9ae6(0x207)](){const _0x535281=a124_0x1e9ae6;if(Date[_0x535281(0x1fa)]()<this[_0x535281(0x1fd)])return;await this[_0x535281(0x20b)]();}async[a124_0x1e9ae6(0x20b)](){const _0x921a2b=a124_0x1e9ae6,{clientId:_0x466096,clientSecret:_0xe8d701}=this[_0x921a2b(0x1f6)],_0x15694a=new url_1[(_0x921a2b(0x21d))]('https://bitbucket.org');_0x15694a['username']=_0x466096,_0x15694a['password']=_0xe8d701,_0x15694a[_0x921a2b(0x215)]=_0x921a2b(0x216);const {data:_0x29156c}=await axios_1['default'][_0x921a2b(0x208)](_0x15694a[_0x921a2b(0x20f)](),'grant_type=client_credentials'),{expires_in:_0x5a9346,access_token:_0x1aaedf}=_0x29156c;this['accessTokenExpiresAt']=Date[_0x921a2b(0x1fa)]()+_0x5a9346*0x3e8,this[_0x921a2b(0x1f6)][_0x921a2b(0x1f5)](_0x1aaedf);}[a124_0x1e9ae6(0x21f)](){return{};}['getCurrentUser'](){const _0x5d4a28=a124_0x1e9ae6;return this[_0x5d4a28(0x1f7)][_0x5d4a28(0x1f4)]('user');}async[a124_0x1e9ae6(0x203)](){const _0x4b08a8=a124_0x1e9ae6;return await this[_0x4b08a8(0x1f9)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a124_0x1e9ae6(0x209)])(),__param(0x0,(0x0,typedi_1[a124_0x1e9ae6(0x219)])(providers_tokens_1[a124_0x1e9ae6(0x1eb)]['provider'])),__param(0x1,(0x0,typedi_1[a124_0x1e9ae6(0x219)])(providers_tokens_1[a124_0x1e9ae6(0x1eb)][a124_0x1e9ae6(0x1f6)])),__metadata(a124_0x1e9ae6(0x1ff),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports[a124_0x1e9ae6(0x206)]=BitbucketApiService;