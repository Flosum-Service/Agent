const a158_0x29bb9e=a158_0xd3c1;(function(_0x1deed6,_0x3c6952){const _0x307565=a158_0xd3c1,_0x39a389=_0x1deed6();while(!![]){try{const _0x316a76=-parseInt(_0x307565(0x10a))/0x1+parseInt(_0x307565(0x124))/0x2*(-parseInt(_0x307565(0x109))/0x3)+parseInt(_0x307565(0x116))/0x4*(parseInt(_0x307565(0x108))/0x5)+-parseInt(_0x307565(0x111))/0x6+parseInt(_0x307565(0xf2))/0x7+-parseInt(_0x307565(0x125))/0x8*(parseInt(_0x307565(0xf7))/0x9)+parseInt(_0x307565(0x115))/0xa;if(_0x316a76===_0x3c6952)break;else _0x39a389['push'](_0x39a389['shift']());}catch(_0x4b62fa){_0x39a389['push'](_0x39a389['shift']());}}}(a158_0x507b,0x4f85c));const a158_0x5cfb85=(function(){let _0x4a779b=!![];return function(_0x5ba1fa,_0x298922){const _0x150930=_0x4a779b?function(){if(_0x298922){const _0x438fd1=_0x298922['apply'](_0x5ba1fa,arguments);return _0x298922=null,_0x438fd1;}}:function(){};return _0x4a779b=![],_0x150930;};}()),a158_0x40cedf=a158_0x5cfb85(this,function(){const _0x16e6c9=a158_0xd3c1;return a158_0x40cedf[_0x16e6c9(0xfa)]()[_0x16e6c9(0xf6)]('(((.+)+)+)+$')[_0x16e6c9(0xfa)]()['constructor'](a158_0x40cedf)['search'](_0x16e6c9(0x118));});function a158_0x507b(){const _0x534c0b=['object','refreshToken','toString','pathname','url','post','getHeaders','axios','defineProperty','Service','request','checkAccessToken','isLoggedIn','now','../credentials/dto/bitbucket-credentials.dto','createRequest','55EQoCrr','518790nbKesX','511320mysbhA','length','get','getCurrentUser','__esModule','design:paramtypes','__importDefault','652434bfUEYm','credentials','provider','Inject','10709480czVnuG','115732pstdIt','GitApiService','(((.+)+)+)+$','headers','__metadata','MAX_REQUEST_PER_HOUR','interceptors','../providers.tokens','metadata','decorate','Tokens','typedi','user','getOwnPropertyDescriptor','2eFwlAr','3738664eneLxl','../types/git-provider','function','__decorate','./git-api.service','1377845ugrLUf','password','accessTokenExpiresAt','/site/oauth2/access_token','search','9jExwaX'];a158_0x507b=function(){return _0x534c0b;};return a158_0x507b();}a158_0x40cedf();'use strict';function a158_0xd3c1(_0x52d3c0,_0x4d4590){const _0x1cfe46=a158_0x507b();return a158_0xd3c1=function(_0x40cedf,_0x5cfb85){_0x40cedf=_0x40cedf-0xef;let _0x507b25=_0x1cfe46[_0x40cedf];return _0x507b25;},a158_0xd3c1(_0x52d3c0,_0x4d4590);}var __decorate=this&&this[a158_0x29bb9e(0xf0)]||function(_0x4a168b,_0x4f9f82,_0x35021b,_0x4b7f33){const _0x38b0ea=a158_0x29bb9e;var _0x5b3068=arguments[_0x38b0ea(0x10b)],_0x56e980=_0x5b3068<0x3?_0x4f9f82:_0x4b7f33===null?_0x4b7f33=Object[_0x38b0ea(0x123)](_0x4f9f82,_0x35021b):_0x4b7f33,_0x226acb;if(typeof Reflect===_0x38b0ea(0xf8)&&typeof Reflect[_0x38b0ea(0x11f)]===_0x38b0ea(0xef))_0x56e980=Reflect[_0x38b0ea(0x11f)](_0x4a168b,_0x4f9f82,_0x35021b,_0x4b7f33);else{for(var _0x474812=_0x4a168b[_0x38b0ea(0x10b)]-0x1;_0x474812>=0x0;_0x474812--)if(_0x226acb=_0x4a168b[_0x474812])_0x56e980=(_0x5b3068<0x3?_0x226acb(_0x56e980):_0x5b3068>0x3?_0x226acb(_0x4f9f82,_0x35021b,_0x56e980):_0x226acb(_0x4f9f82,_0x35021b))||_0x56e980;}return _0x5b3068>0x3&&_0x56e980&&Object[_0x38b0ea(0x100)](_0x4f9f82,_0x35021b,_0x56e980),_0x56e980;},__metadata=this&&this[a158_0x29bb9e(0x11a)]||function(_0x3db073,_0x5585fb){const _0xec86bd=a158_0x29bb9e;if(typeof Reflect===_0xec86bd(0xf8)&&typeof Reflect[_0xec86bd(0x11e)]===_0xec86bd(0xef))return Reflect[_0xec86bd(0x11e)](_0x3db073,_0x5585fb);},__param=this&&this['__param']||function(_0x38678d,_0x4d87b1){return function(_0xb34db3,_0x336ff7){_0x4d87b1(_0xb34db3,_0x336ff7,_0x38678d);};},__importDefault=this&&this[a158_0x29bb9e(0x110)]||function(_0x99c1ff){const _0x691aa8=a158_0x29bb9e;return _0x99c1ff&&_0x99c1ff[_0x691aa8(0x10e)]?_0x99c1ff:{'default':_0x99c1ff};};Object[a158_0x29bb9e(0x100)](exports,a158_0x29bb9e(0x10e),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const axios_1=__importDefault(require(a158_0x29bb9e(0xff))),typedi_1=require(a158_0x29bb9e(0x121)),git_api_service_1=require(a158_0x29bb9e(0xf1)),bitbucket_credentials_dto_1=require(a158_0x29bb9e(0x106)),providers_tokens_1=require(a158_0x29bb9e(0x11d)),git_provider_1=require(a158_0x29bb9e(0x126)),url_1=require(a158_0x29bb9e(0xfc));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a158_0x29bb9e(0x117)]{constructor(_0x5b391f,_0x58b8f1){const _0x869a8e=a158_0x29bb9e;super(_0x5b391f,_0x58b8f1),this[_0x869a8e(0xf4)]=-0x1,this[_0x869a8e(0x11b)]=0x3e8;}['createRequest'](_0x29d852){const _0x11b1f6=a158_0x29bb9e,_0xddd8cb=super[_0x11b1f6(0x107)](_0x29d852);return _0xddd8cb[_0x11b1f6(0x11c)][_0x11b1f6(0x102)]['use'](async _0x424723=>{const _0x4eb6d4=_0x11b1f6;return await this[_0x4eb6d4(0x103)](),_0x424723[_0x4eb6d4(0x119)]['Authorization']=this['credentials']['getAuthorizationHeader'](),_0x424723;}),_0xddd8cb;}async[a158_0x29bb9e(0x103)](){const _0xadb484=a158_0x29bb9e;if(Date[_0xadb484(0x105)]()<this['accessTokenExpiresAt'])return;await this[_0xadb484(0xf9)]();}async[a158_0x29bb9e(0xf9)](){const _0x5747a5=a158_0x29bb9e,{clientId:_0x273a95,clientSecret:_0x41e471}=this[_0x5747a5(0x112)],_0x3cd316=new url_1['URL']('https://bitbucket.org');_0x3cd316['username']=_0x273a95,_0x3cd316[_0x5747a5(0xf3)]=_0x41e471,_0x3cd316[_0x5747a5(0xfb)]=_0x5747a5(0xf5);const {data:_0x3c23bf}=await axios_1['default'][_0x5747a5(0xfd)](_0x3cd316[_0x5747a5(0xfa)](),'grant_type=client_credentials'),{expires_in:_0x147704,access_token:_0x2180fa}=_0x3c23bf;this['accessTokenExpiresAt']=Date[_0x5747a5(0x105)]()+_0x147704*0x3e8,this[_0x5747a5(0x112)]['setAccessToken'](_0x2180fa);}[a158_0x29bb9e(0xfe)](){return{};}[a158_0x29bb9e(0x10d)](){const _0x398c68=a158_0x29bb9e;return this[_0x398c68(0x102)][_0x398c68(0x10c)](_0x398c68(0x122));}async[a158_0x29bb9e(0x104)](){const _0x124268=a158_0x29bb9e;return await this[_0x124268(0x10d)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a158_0x29bb9e(0x101)])(),__param(0x0,(0x0,typedi_1[a158_0x29bb9e(0x114)])(providers_tokens_1[a158_0x29bb9e(0x120)][a158_0x29bb9e(0x113)])),__param(0x1,(0x0,typedi_1[a158_0x29bb9e(0x114)])(providers_tokens_1['Tokens'][a158_0x29bb9e(0x112)])),__metadata(a158_0x29bb9e(0x10f),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;