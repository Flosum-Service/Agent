const a158_0x1c03ed=a158_0x16fc;function a158_0x3ab3(){const _0x131bee=['URL','design:paramtypes','__decorate','object','1455108zLgako','length','Authorization','grant_type=client_credentials','1400949SfEulI','BitbucketCredentialsDto','../credentials/dto/bitbucket-credentials.dto','333683SnwleC','/site/oauth2/access_token','GitApiService','232ERgvkA','checkAccessToken','username','password','2408974aOeQlA','Inject','constructor','../types/git-provider','BitbucketApiService','3MZNhSV','https://bitbucket.org','setAccessToken','toString','1401608xzHwQw','interceptors','function','14757080BgSOLb','provider','Tokens','use','get','decorate','getCurrentUser','refreshToken','accessTokenExpiresAt','730058IvmNjz','post','metadata','Service','search','createRequest','__esModule','MAX_REQUEST_PER_HOUR','now','__metadata','../providers.tokens','user','typedi','credentials','./git-api.service','pathname','__importDefault','defineProperty','getOwnPropertyDescriptor','(((.+)+)+)+$','5tLWKGt','request'];a158_0x3ab3=function(){return _0x131bee;};return a158_0x3ab3();}function a158_0x16fc(_0x3e2615,_0x12585c){const _0x5a7aff=a158_0x3ab3();return a158_0x16fc=function(_0x2dbe6c,_0x29ce7b){_0x2dbe6c=_0x2dbe6c-0x159;let _0x3ab368=_0x5a7aff[_0x2dbe6c];return _0x3ab368;},a158_0x16fc(_0x3e2615,_0x12585c);}(function(_0x44a5c0,_0x482673){const _0x573161=a158_0x16fc,_0x16b7de=_0x44a5c0();while(!![]){try{const _0x34c432=-parseInt(_0x573161(0x18a))/0x1+-parseInt(_0x573161(0x175))/0x2*(-parseInt(_0x573161(0x17a))/0x3)+parseInt(_0x573161(0x17e))/0x4+-parseInt(_0x573161(0x161))/0x5*(-parseInt(_0x573161(0x167))/0x6)+-parseInt(_0x573161(0x16e))/0x7*(-parseInt(_0x573161(0x171))/0x8)+-parseInt(_0x573161(0x16b))/0x9+-parseInt(_0x573161(0x181))/0xa;if(_0x34c432===_0x482673)break;else _0x16b7de['push'](_0x16b7de['shift']());}catch(_0x23b8cf){_0x16b7de['push'](_0x16b7de['shift']());}}}(a158_0x3ab3,0xc7ccd));const a158_0x29ce7b=(function(){let _0x3198a8=!![];return function(_0x6e7136,_0x281cd0){const _0x5a2ea4=_0x3198a8?function(){if(_0x281cd0){const _0x4992ed=_0x281cd0['apply'](_0x6e7136,arguments);return _0x281cd0=null,_0x4992ed;}}:function(){};return _0x3198a8=![],_0x5a2ea4;};}()),a158_0x2dbe6c=a158_0x29ce7b(this,function(){const _0xf1c1a3=a158_0x16fc;return a158_0x2dbe6c[_0xf1c1a3(0x17d)]()[_0xf1c1a3(0x18e)](_0xf1c1a3(0x160))[_0xf1c1a3(0x17d)]()[_0xf1c1a3(0x177)](a158_0x2dbe6c)[_0xf1c1a3(0x18e)](_0xf1c1a3(0x160));});a158_0x2dbe6c();'use strict';var __decorate=this&&this[a158_0x1c03ed(0x165)]||function(_0x36ccc2,_0x1ebbdb,_0xe2e258,_0x133fc5){const _0x5883e7=a158_0x1c03ed;var _0x4babc2=arguments[_0x5883e7(0x168)],_0x39de58=_0x4babc2<0x3?_0x1ebbdb:_0x133fc5===null?_0x133fc5=Object[_0x5883e7(0x15f)](_0x1ebbdb,_0xe2e258):_0x133fc5,_0x1f5fbd;if(typeof Reflect===_0x5883e7(0x166)&&typeof Reflect[_0x5883e7(0x186)]===_0x5883e7(0x180))_0x39de58=Reflect['decorate'](_0x36ccc2,_0x1ebbdb,_0xe2e258,_0x133fc5);else{for(var _0x2ca84b=_0x36ccc2['length']-0x1;_0x2ca84b>=0x0;_0x2ca84b--)if(_0x1f5fbd=_0x36ccc2[_0x2ca84b])_0x39de58=(_0x4babc2<0x3?_0x1f5fbd(_0x39de58):_0x4babc2>0x3?_0x1f5fbd(_0x1ebbdb,_0xe2e258,_0x39de58):_0x1f5fbd(_0x1ebbdb,_0xe2e258))||_0x39de58;}return _0x4babc2>0x3&&_0x39de58&&Object[_0x5883e7(0x15e)](_0x1ebbdb,_0xe2e258,_0x39de58),_0x39de58;},__metadata=this&&this[a158_0x1c03ed(0x193)]||function(_0x221a77,_0x397129){const _0x58df10=a158_0x1c03ed;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x58df10(0x180))return Reflect[_0x58df10(0x18c)](_0x221a77,_0x397129);},__param=this&&this['__param']||function(_0x1fdf52,_0x21ca8d){return function(_0x5281a3,_0x15969f){_0x21ca8d(_0x5281a3,_0x15969f,_0x1fdf52);};},__importDefault=this&&this[a158_0x1c03ed(0x15d)]||function(_0x2688dc){const _0x3c646c=a158_0x1c03ed;return _0x2688dc&&_0x2688dc[_0x3c646c(0x190)]?_0x2688dc:{'default':_0x2688dc};};Object[a158_0x1c03ed(0x15e)](exports,'__esModule',{'value':!![]}),exports[a158_0x1c03ed(0x179)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a158_0x1c03ed(0x159)),git_api_service_1=require(a158_0x1c03ed(0x15b)),bitbucket_credentials_dto_1=require(a158_0x1c03ed(0x16d)),providers_tokens_1=require(a158_0x1c03ed(0x194)),git_provider_1=require(a158_0x1c03ed(0x178)),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a158_0x1c03ed(0x170)]{constructor(_0x196eb1,_0x4ef78f){const _0x57db17=a158_0x1c03ed;super(_0x196eb1,_0x4ef78f),this['accessTokenExpiresAt']=-0x1,this[_0x57db17(0x191)]=0x3e8;}[a158_0x1c03ed(0x18f)](_0x3e7ddf){const _0x533bdf=a158_0x1c03ed,_0x3bd3c3=super[_0x533bdf(0x18f)](_0x3e7ddf);return _0x3bd3c3[_0x533bdf(0x17f)][_0x533bdf(0x162)][_0x533bdf(0x184)](async _0x377ed4=>{const _0x1c5828=_0x533bdf;return await this[_0x1c5828(0x172)](),_0x377ed4['headers'][_0x1c5828(0x169)]=this[_0x1c5828(0x15a)]['getAuthorizationHeader'](),_0x377ed4;}),_0x3bd3c3;}async[a158_0x1c03ed(0x172)](){const _0x44c8af=a158_0x1c03ed;if(Date[_0x44c8af(0x192)]()<this[_0x44c8af(0x189)])return;await this[_0x44c8af(0x188)]();}async[a158_0x1c03ed(0x188)](){const _0x2efd38=a158_0x1c03ed,{clientId:_0x2cab6d,clientSecret:_0x2779b1}=this[_0x2efd38(0x15a)],_0x197086=new url_1[(_0x2efd38(0x163))](_0x2efd38(0x17b));_0x197086[_0x2efd38(0x173)]=_0x2cab6d,_0x197086[_0x2efd38(0x174)]=_0x2779b1,_0x197086[_0x2efd38(0x15c)]=_0x2efd38(0x16f);const {data:_0xe2ce16}=await axios_1['default'][_0x2efd38(0x18b)](_0x197086[_0x2efd38(0x17d)](),_0x2efd38(0x16a)),{expires_in:_0x3d0f3a,access_token:_0x171343}=_0xe2ce16;this[_0x2efd38(0x189)]=Date[_0x2efd38(0x192)]()+_0x3d0f3a*0x3e8,this[_0x2efd38(0x15a)][_0x2efd38(0x17c)](_0x171343);}['getHeaders'](){return{};}[a158_0x1c03ed(0x187)](){const _0x14aeb3=a158_0x1c03ed;return this[_0x14aeb3(0x162)][_0x14aeb3(0x185)](_0x14aeb3(0x195));}async['isLoggedIn'](){const _0x339469=a158_0x1c03ed;return await this[_0x339469(0x187)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a158_0x1c03ed(0x18d)])(),__param(0x0,(0x0,typedi_1[a158_0x1c03ed(0x176)])(providers_tokens_1[a158_0x1c03ed(0x183)][a158_0x1c03ed(0x182)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a158_0x1c03ed(0x183)][a158_0x1c03ed(0x15a)])),__metadata(a158_0x1c03ed(0x164),[String,bitbucket_credentials_dto_1[a158_0x1c03ed(0x16c)]])],BitbucketApiService),exports[a158_0x1c03ed(0x179)]=BitbucketApiService;