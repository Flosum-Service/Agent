const a196_0x741733=a196_0x1ef2;function a196_0x514d(){const _0x8de566=['(((.+)+)+)+$','now','defineProperty','/site/oauth2/access_token','length','toString','object','credentials','default','5704314qmXLnH','1366337yfKPLj','1271748jjOgNT','function','username','provider','Inject','BitbucketApiService','typedi','grant_type=client_credentials','use','650166tYuzmh','2427292vAWrSK','GitApiService','Service','headers','url','pathname','checkAccessToken','URL','getAuthorizationHeader','request','18858xNcvYs','refreshToken','Tokens','search','interceptors','apply','24tERAUl','post','__param','getCurrentUser','accessTokenExpiresAt','design:paramtypes','__metadata','__importDefault','Authorization','axios','304810IAKnTJ','metadata','isLoggedIn','531KZHENO','2505ICJKDx','28aASNVE','../types/git-provider','createRequest','__esModule','https://bitbucket.org','decorate'];a196_0x514d=function(){return _0x8de566;};return a196_0x514d();}function a196_0x1ef2(_0x4e19da,_0x28fa30){const _0x5f14f4=a196_0x514d();return a196_0x1ef2=function(_0x5b478f,_0x39ae36){_0x5b478f=_0x5b478f-0x103;let _0x514d4a=_0x5f14f4[_0x5b478f];return _0x514d4a;},a196_0x1ef2(_0x4e19da,_0x28fa30);}(function(_0x4a63be,_0x5ec534){const _0x52665a=a196_0x1ef2,_0x545edc=_0x4a63be();while(!![]){try{const _0x5ade98=parseInt(_0x52665a(0x106))/0x1+-parseInt(_0x52665a(0x107))/0x2+-parseInt(_0x52665a(0x110))/0x3*(parseInt(_0x52665a(0x130))/0x4)+parseInt(_0x52665a(0x12f))/0x5*(-parseInt(_0x52665a(0x11b))/0x6)+-parseInt(_0x52665a(0x111))/0x7*(-parseInt(_0x52665a(0x121))/0x8)+-parseInt(_0x52665a(0x12e))/0x9*(-parseInt(_0x52665a(0x12b))/0xa)+parseInt(_0x52665a(0x105))/0xb;if(_0x5ade98===_0x5ec534)break;else _0x545edc['push'](_0x545edc['shift']());}catch(_0x1a06ef){_0x545edc['push'](_0x545edc['shift']());}}}(a196_0x514d,0xf3293));const a196_0x39ae36=(function(){let _0xece96=!![];return function(_0x274fe5,_0x3d0984){const _0xbb3eb4=_0xece96?function(){const _0x52b3e2=a196_0x1ef2;if(_0x3d0984){const _0x32b5f2=_0x3d0984[_0x52b3e2(0x120)](_0x274fe5,arguments);return _0x3d0984=null,_0x32b5f2;}}:function(){};return _0xece96=![],_0xbb3eb4;};}()),a196_0x5b478f=a196_0x39ae36(this,function(){const _0x3441d2=a196_0x1ef2;return a196_0x5b478f[_0x3441d2(0x13b)]()[_0x3441d2(0x11e)]('(((.+)+)+)+$')[_0x3441d2(0x13b)]()['constructor'](a196_0x5b478f)[_0x3441d2(0x11e)](_0x3441d2(0x136));});a196_0x5b478f();'use strict';var __decorate=this&&this['__decorate']||function(_0x10d16e,_0x371284,_0x2cfe6e,_0x1c4d36){const _0x105fa5=a196_0x1ef2;var _0x4fa929=arguments[_0x105fa5(0x13a)],_0x1da1db=_0x4fa929<0x3?_0x371284:_0x1c4d36===null?_0x1c4d36=Object['getOwnPropertyDescriptor'](_0x371284,_0x2cfe6e):_0x1c4d36,_0x15f624;if(typeof Reflect===_0x105fa5(0x13c)&&typeof Reflect[_0x105fa5(0x135)]===_0x105fa5(0x108))_0x1da1db=Reflect[_0x105fa5(0x135)](_0x10d16e,_0x371284,_0x2cfe6e,_0x1c4d36);else{for(var _0x36b1a9=_0x10d16e[_0x105fa5(0x13a)]-0x1;_0x36b1a9>=0x0;_0x36b1a9--)if(_0x15f624=_0x10d16e[_0x36b1a9])_0x1da1db=(_0x4fa929<0x3?_0x15f624(_0x1da1db):_0x4fa929>0x3?_0x15f624(_0x371284,_0x2cfe6e,_0x1da1db):_0x15f624(_0x371284,_0x2cfe6e))||_0x1da1db;}return _0x4fa929>0x3&&_0x1da1db&&Object[_0x105fa5(0x138)](_0x371284,_0x2cfe6e,_0x1da1db),_0x1da1db;},__metadata=this&&this[a196_0x741733(0x127)]||function(_0x577c5a,_0x3a2c45){const _0xdf8972=a196_0x741733;if(typeof Reflect===_0xdf8972(0x13c)&&typeof Reflect[_0xdf8972(0x12c)]===_0xdf8972(0x108))return Reflect[_0xdf8972(0x12c)](_0x577c5a,_0x3a2c45);},__param=this&&this[a196_0x741733(0x123)]||function(_0x19a019,_0x5a5a35){return function(_0x4b10f6,_0x17a8fc){_0x5a5a35(_0x4b10f6,_0x17a8fc,_0x19a019);};},__importDefault=this&&this[a196_0x741733(0x128)]||function(_0x321ce1){const _0x471bd6=a196_0x741733;return _0x321ce1&&_0x321ce1[_0x471bd6(0x133)]?_0x321ce1:{'default':_0x321ce1};};Object[a196_0x741733(0x138)](exports,a196_0x741733(0x133),{'value':!![]}),exports[a196_0x741733(0x10c)]=void 0x0;const axios_1=__importDefault(require(a196_0x741733(0x12a))),typedi_1=require(a196_0x741733(0x10d)),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a196_0x741733(0x131)),url_1=require(a196_0x741733(0x115));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a196_0x741733(0x112)]{constructor(_0x1d9046,_0x1c1167){const _0x537797=a196_0x741733;super(_0x1d9046,_0x1c1167),this[_0x537797(0x125)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a196_0x741733(0x132)](_0x491085){const _0x58d1b9=a196_0x741733,_0x52fda5=super['createRequest'](_0x491085);return _0x52fda5[_0x58d1b9(0x11f)][_0x58d1b9(0x11a)][_0x58d1b9(0x10f)](async _0x1b9a9f=>{const _0x5b42b0=_0x58d1b9;return await this[_0x5b42b0(0x117)](),_0x1b9a9f[_0x5b42b0(0x114)][_0x5b42b0(0x129)]=this[_0x5b42b0(0x103)][_0x5b42b0(0x119)](),_0x1b9a9f;}),_0x52fda5;}async[a196_0x741733(0x117)](){const _0x3febb0=a196_0x741733;if(Date[_0x3febb0(0x137)]()<this[_0x3febb0(0x125)])return;await this[_0x3febb0(0x11c)]();}async['refreshToken'](){const _0x579827=a196_0x741733,{clientId:_0x3ae343,clientSecret:_0x4e7fb7}=this[_0x579827(0x103)],_0x27b5cb=new url_1[(_0x579827(0x118))](_0x579827(0x134));_0x27b5cb[_0x579827(0x109)]=_0x3ae343,_0x27b5cb['password']=_0x4e7fb7,_0x27b5cb[_0x579827(0x116)]=_0x579827(0x139);const {data:_0x897f1e}=await axios_1[_0x579827(0x104)][_0x579827(0x122)](_0x27b5cb[_0x579827(0x13b)](),_0x579827(0x10e)),{expires_in:_0x9d3e90,access_token:_0x44e120}=_0x897f1e;this['accessTokenExpiresAt']=Date[_0x579827(0x137)]()+_0x9d3e90*0x3e8,this[_0x579827(0x103)]['setAccessToken'](_0x44e120);}['getHeaders'](){return{};}[a196_0x741733(0x124)](){const _0x5f3183=a196_0x741733;return this[_0x5f3183(0x11a)]['get']('user');}async[a196_0x741733(0x12d)](){const _0x42dae7=a196_0x741733;return await this[_0x42dae7(0x124)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a196_0x741733(0x113)])(),__param(0x0,(0x0,typedi_1['Inject'])(providers_tokens_1[a196_0x741733(0x11d)][a196_0x741733(0x10a)])),__param(0x1,(0x0,typedi_1[a196_0x741733(0x10b)])(providers_tokens_1[a196_0x741733(0x11d)][a196_0x741733(0x103)])),__metadata(a196_0x741733(0x126),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports[a196_0x741733(0x10c)]=BitbucketApiService;