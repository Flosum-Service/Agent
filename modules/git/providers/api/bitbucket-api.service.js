const a111_0xf8aa8b=a111_0x4fc9;(function(_0x3c4911,_0x32798c){const _0x57631c=a111_0x4fc9,_0x30f4b5=_0x3c4911();while(!![]){try{const _0x54be63=-parseInt(_0x57631c(0x1f8))/0x1+parseInt(_0x57631c(0x1e6))/0x2*(-parseInt(_0x57631c(0x1d7))/0x3)+parseInt(_0x57631c(0x1e4))/0x4*(parseInt(_0x57631c(0x1ed))/0x5)+-parseInt(_0x57631c(0x1cf))/0x6+parseInt(_0x57631c(0x1dc))/0x7+-parseInt(_0x57631c(0x1ca))/0x8*(-parseInt(_0x57631c(0x1c0))/0x9)+-parseInt(_0x57631c(0x1d8))/0xa*(parseInt(_0x57631c(0x1c9))/0xb);if(_0x54be63===_0x32798c)break;else _0x30f4b5['push'](_0x30f4b5['shift']());}catch(_0x4bf2dc){_0x30f4b5['push'](_0x30f4b5['shift']());}}}(a111_0x5a26,0x99965));const a111_0x440dce=(function(){let _0x125d9c=!![];return function(_0x539781,_0x39af15){const _0x2d9bdc=_0x125d9c?function(){if(_0x39af15){const _0x6a9053=_0x39af15['apply'](_0x539781,arguments);return _0x39af15=null,_0x6a9053;}}:function(){};return _0x125d9c=![],_0x2d9bdc;};}()),a111_0x2921d8=a111_0x440dce(this,function(){const _0x533f16=a111_0x4fc9;return a111_0x2921d8[_0x533f16(0x1cc)]()[_0x533f16(0x1cd)](_0x533f16(0x1de))[_0x533f16(0x1cc)]()[_0x533f16(0x1e2)](a111_0x2921d8)[_0x533f16(0x1cd)](_0x533f16(0x1de));});a111_0x2921d8();'use strict';var __decorate=this&&this[a111_0xf8aa8b(0x1d1)]||function(_0x24f2ea,_0x347354,_0x6f86ca,_0x3d51c9){const _0x15d162=a111_0xf8aa8b;var _0x377a5f=arguments[_0x15d162(0x1df)],_0x1f1a8e=_0x377a5f<0x3?_0x347354:_0x3d51c9===null?_0x3d51c9=Object[_0x15d162(0x1ea)](_0x347354,_0x6f86ca):_0x3d51c9,_0x5ec244;if(typeof Reflect==='object'&&typeof Reflect[_0x15d162(0x1c5)]===_0x15d162(0x1d5))_0x1f1a8e=Reflect[_0x15d162(0x1c5)](_0x24f2ea,_0x347354,_0x6f86ca,_0x3d51c9);else{for(var _0x29b023=_0x24f2ea[_0x15d162(0x1df)]-0x1;_0x29b023>=0x0;_0x29b023--)if(_0x5ec244=_0x24f2ea[_0x29b023])_0x1f1a8e=(_0x377a5f<0x3?_0x5ec244(_0x1f1a8e):_0x377a5f>0x3?_0x5ec244(_0x347354,_0x6f86ca,_0x1f1a8e):_0x5ec244(_0x347354,_0x6f86ca))||_0x1f1a8e;}return _0x377a5f>0x3&&_0x1f1a8e&&Object[_0x15d162(0x1be)](_0x347354,_0x6f86ca,_0x1f1a8e),_0x1f1a8e;},__metadata=this&&this[a111_0xf8aa8b(0x1d4)]||function(_0x42a76d,_0x2faa80){const _0x3199d4=a111_0xf8aa8b;if(typeof Reflect===_0x3199d4(0x1ec)&&typeof Reflect[_0x3199d4(0x1da)]===_0x3199d4(0x1d5))return Reflect['metadata'](_0x42a76d,_0x2faa80);},__param=this&&this[a111_0xf8aa8b(0x1e7)]||function(_0x5c7805,_0x6553d9){return function(_0x10939a,_0x8518e9){_0x6553d9(_0x10939a,_0x8518e9,_0x5c7805);};},__importDefault=this&&this['__importDefault']||function(_0x313ea3){const _0xb85df5=a111_0xf8aa8b;return _0x313ea3&&_0x313ea3[_0xb85df5(0x1e8)]?_0x313ea3:{'default':_0x313ea3};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a111_0xf8aa8b(0x1e3)]=void 0x0;const axios_1=__importDefault(require(a111_0xf8aa8b(0x1d2))),typedi_1=require('typedi'),git_api_service_1=require(a111_0xf8aa8b(0x1c4)),bitbucket_credentials_dto_1=require(a111_0xf8aa8b(0x1f5)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require('../types/git-provider'),url_1=require(a111_0xf8aa8b(0x1f4));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x398a0c,_0x3c6fed){const _0x3c2c32=a111_0xf8aa8b;super(_0x398a0c,_0x3c6fed),this['accessTokenExpiresAt']=-0x1,this[_0x3c2c32(0x1e5)]=0x3e8;}[a111_0xf8aa8b(0x1f9)](_0x33488c){const _0x3088c4=a111_0xf8aa8b,_0x5abb9e=super[_0x3088c4(0x1f9)](_0x33488c);return _0x5abb9e[_0x3088c4(0x1c8)][_0x3088c4(0x1c3)][_0x3088c4(0x1ef)](async _0x31004f=>{const _0x3597cd=_0x3088c4;return await this[_0x3597cd(0x1f6)](),_0x31004f['headers'][_0x3597cd(0x1d6)]=this[_0x3597cd(0x1dd)][_0x3597cd(0x1c2)](),_0x31004f;}),_0x5abb9e;}async[a111_0xf8aa8b(0x1f6)](){const _0x4c59db=a111_0xf8aa8b;if(Date['now']()<this[_0x4c59db(0x1d9)])return;await this[_0x4c59db(0x1ee)]();}async[a111_0xf8aa8b(0x1ee)](){const _0x152268=a111_0xf8aa8b,{clientId:_0x1024e6,clientSecret:_0x1d7e49}=this[_0x152268(0x1dd)],_0x2a37b2=new url_1[(_0x152268(0x1f3))](_0x152268(0x1cb));_0x2a37b2[_0x152268(0x1f1)]=_0x1024e6,_0x2a37b2[_0x152268(0x1f2)]=_0x1d7e49,_0x2a37b2[_0x152268(0x1e9)]=_0x152268(0x1db);const {data:_0x5393f2}=await axios_1[_0x152268(0x1c1)]['post'](_0x2a37b2[_0x152268(0x1cc)](),_0x152268(0x1ce)),{expires_in:_0x1139a8,access_token:_0x1f5383}=_0x5393f2;this[_0x152268(0x1d9)]=Date['now']()+_0x1139a8*0x3e8,this['credentials']['setAccessToken'](_0x1f5383);}[a111_0xf8aa8b(0x1f0)](){return{};}[a111_0xf8aa8b(0x1e0)](){const _0x10f807=a111_0xf8aa8b;return this[_0x10f807(0x1c3)][_0x10f807(0x1e1)](_0x10f807(0x1c6));}async[a111_0xf8aa8b(0x1eb)](){const _0x4c6b81=a111_0xf8aa8b;return await this[_0x4c6b81(0x1e0)](),!![];}};function a111_0x4fc9(_0x27d575,_0x244816){const _0x39eb94=a111_0x5a26();return a111_0x4fc9=function(_0x2921d8,_0x440dce){_0x2921d8=_0x2921d8-0x1be;let _0x5a26bb=_0x39eb94[_0x2921d8];return _0x5a26bb;},a111_0x4fc9(_0x27d575,_0x244816);}BitbucketApiService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1[a111_0xf8aa8b(0x1d0)](providers_tokens_1['Tokens'][a111_0xf8aa8b(0x1c7)])),__param(0x1,typedi_1[a111_0xf8aa8b(0x1d0)](providers_tokens_1[a111_0xf8aa8b(0x1f7)][a111_0xf8aa8b(0x1dd)])),__metadata(a111_0xf8aa8b(0x1d3),[String,bitbucket_credentials_dto_1[a111_0xf8aa8b(0x1bf)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;function a111_0x5a26(){const _0x9238c9=['defineProperty','BitbucketCredentialsDto','3548205zsAErI','default','getAuthorizationHeader','request','./git-api.service','decorate','user','provider','interceptors','11qdIzFy','8hTbFaz','https://bitbucket.org','toString','search','grant_type=client_credentials','4324698uQyiuR','Inject','__decorate','axios','design:paramtypes','__metadata','function','Authorization','16143edzgQR','4856890hMcQUu','accessTokenExpiresAt','metadata','/site/oauth2/access_token','6597073fqLZFo','credentials','(((.+)+)+)+$','length','getCurrentUser','get','constructor','BitbucketApiService','4820108rEcOXK','MAX_REQUEST_PER_HOUR','94kYDdsA','__param','__esModule','pathname','getOwnPropertyDescriptor','isLoggedIn','object','5RqZsjP','refreshToken','use','getHeaders','username','password','URL','url','../credentials/dto/bitbucket-credentials.dto','checkAccessToken','Tokens','453239LxlxNy','createRequest'];a111_0x5a26=function(){return _0x9238c9;};return a111_0x5a26();}