const a195_0xc62f76=a195_0x3992;(function(_0x5c2fe8,_0x2c62c2){const _0x306d24=a195_0x3992,_0xa84679=_0x5c2fe8();while(!![]){try{const _0x94909a=-parseInt(_0x306d24(0xca))/0x1+-parseInt(_0x306d24(0xbc))/0x2*(-parseInt(_0x306d24(0xc6))/0x3)+-parseInt(_0x306d24(0xcb))/0x4+parseInt(_0x306d24(0x92))/0x5*(-parseInt(_0x306d24(0xb7))/0x6)+parseInt(_0x306d24(0xae))/0x7+parseInt(_0x306d24(0x9a))/0x8*(parseInt(_0x306d24(0x95))/0x9)+-parseInt(_0x306d24(0x96))/0xa*(-parseInt(_0x306d24(0x99))/0xb);if(_0x94909a===_0x2c62c2)break;else _0xa84679['push'](_0xa84679['shift']());}catch(_0x250e18){_0xa84679['push'](_0xa84679['shift']());}}}(a195_0x327e,0xecd6c));const a195_0x1aeed4=(function(){let _0x58d0f8=!![];return function(_0x415b01,_0x25295c){const _0x445dd0=_0x58d0f8?function(){const _0x548a7f=a195_0x3992;if(_0x25295c){const _0x5adf1a=_0x25295c[_0x548a7f(0x9b)](_0x415b01,arguments);return _0x25295c=null,_0x5adf1a;}}:function(){};return _0x58d0f8=![],_0x445dd0;};}()),a195_0x124c67=a195_0x1aeed4(this,function(){const _0x5288bc=a195_0x3992;return a195_0x124c67['toString']()['search'](_0x5288bc(0xcd))[_0x5288bc(0xa6)]()[_0x5288bc(0xa8)](a195_0x124c67)['search']('(((.+)+)+)+$');});a195_0x124c67();'use strict';var __decorate=this&&this[a195_0xc62f76(0x9f)]||function(_0x5c9ad4,_0x3808af,_0x3a02a8,_0x1acad5){const _0xf98982=a195_0xc62f76;var _0x5e9ebb=arguments[_0xf98982(0x91)],_0x205d4f=_0x5e9ebb<0x3?_0x3808af:_0x1acad5===null?_0x1acad5=Object[_0xf98982(0xac)](_0x3808af,_0x3a02a8):_0x1acad5,_0x3bca6f;if(typeof Reflect==='object'&&typeof Reflect[_0xf98982(0xd0)]===_0xf98982(0xb6))_0x205d4f=Reflect['decorate'](_0x5c9ad4,_0x3808af,_0x3a02a8,_0x1acad5);else{for(var _0x48d86b=_0x5c9ad4[_0xf98982(0x91)]-0x1;_0x48d86b>=0x0;_0x48d86b--)if(_0x3bca6f=_0x5c9ad4[_0x48d86b])_0x205d4f=(_0x5e9ebb<0x3?_0x3bca6f(_0x205d4f):_0x5e9ebb>0x3?_0x3bca6f(_0x3808af,_0x3a02a8,_0x205d4f):_0x3bca6f(_0x3808af,_0x3a02a8))||_0x205d4f;}return _0x5e9ebb>0x3&&_0x205d4f&&Object[_0xf98982(0xd3)](_0x3808af,_0x3a02a8,_0x205d4f),_0x205d4f;},__metadata=this&&this[a195_0xc62f76(0xc7)]||function(_0x532acc,_0x5e8b8a){const _0x438470=a195_0xc62f76;if(typeof Reflect===_0x438470(0xab)&&typeof Reflect[_0x438470(0xc0)]==='function')return Reflect[_0x438470(0xc0)](_0x532acc,_0x5e8b8a);},__param=this&&this[a195_0xc62f76(0xaf)]||function(_0x5124ae,_0xd7184a){return function(_0x4ccc56,_0xd83ce2){_0xd7184a(_0x4ccc56,_0xd83ce2,_0x5124ae);};},__importDefault=this&&this[a195_0xc62f76(0xa2)]||function(_0x117998){const _0x48db20=a195_0xc62f76;return _0x117998&&_0x117998[_0x48db20(0x93)]?_0x117998:{'default':_0x117998};};Object[a195_0xc62f76(0xd3)](exports,'__esModule',{'value':!![]}),exports[a195_0xc62f76(0xb4)]=void 0x0;function a195_0x3992(_0xf670e6,_0x393f48){const _0x10844f=a195_0x327e();return a195_0x3992=function(_0x124c67,_0x1aeed4){_0x124c67=_0x124c67-0x91;let _0x327e1d=_0x10844f[_0x124c67];return _0x327e1d;},a195_0x3992(_0xf670e6,_0x393f48);}const axios_1=__importDefault(require(a195_0xc62f76(0xc3))),typedi_1=require(a195_0xc62f76(0x98)),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require(a195_0xc62f76(0xb9)),providers_tokens_1=require(a195_0xc62f76(0xd1)),git_provider_1=require(a195_0xc62f76(0xcc)),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a195_0xc62f76(0xbe)]{constructor(_0x41d558,_0x4d1b98){const _0x4bc884=a195_0xc62f76;super(_0x41d558,_0x4d1b98),this[_0x4bc884(0xad)]=-0x1,this[_0x4bc884(0xb5)]=0x3e8;}[a195_0xc62f76(0xb8)](_0x9f97c1){const _0x58312a=a195_0xc62f76,_0x392a80=super[_0x58312a(0xb8)](_0x9f97c1);return _0x392a80[_0x58312a(0xb3)][_0x58312a(0xd2)][_0x58312a(0xc1)](async _0x5a0ea6=>{const _0x964d29=_0x58312a;return await this['checkAccessToken'](),_0x5a0ea6[_0x964d29(0xa9)][_0x964d29(0x97)]=this['credentials'][_0x964d29(0x9c)](),_0x5a0ea6;}),_0x392a80;}async[a195_0xc62f76(0xa4)](){const _0x20e58d=a195_0xc62f76;if(Date[_0x20e58d(0xbf)]()<this[_0x20e58d(0xad)])return;await this['refreshToken']();}async[a195_0xc62f76(0xb1)](){const _0x3b0933=a195_0xc62f76,{clientId:_0x4e4c9,clientSecret:_0x3b4502}=this[_0x3b0933(0x9d)],_0x4de32e=new url_1[(_0x3b0933(0xc8))](_0x3b0933(0xcf));_0x4de32e[_0x3b0933(0xba)]=_0x4e4c9,_0x4de32e['password']=_0x3b4502,_0x4de32e[_0x3b0933(0xc5)]=_0x3b0933(0x9e);const {data:_0x2004ae}=await axios_1[_0x3b0933(0xc4)][_0x3b0933(0x94)](_0x4de32e['toString'](),_0x3b0933(0xc2)),{expires_in:_0x34b71b,access_token:_0x45ed77}=_0x2004ae;this['accessTokenExpiresAt']=Date[_0x3b0933(0xbf)]()+_0x34b71b*0x3e8,this[_0x3b0933(0x9d)][_0x3b0933(0xbb)](_0x45ed77);}[a195_0xc62f76(0xa7)](){return{};}['getCurrentUser'](){const _0x1cf036=a195_0xc62f76;return this[_0x1cf036(0xd2)][_0x1cf036(0xce)](_0x1cf036(0xb0));}async[a195_0xc62f76(0xb2)](){const _0x37507d=a195_0xc62f76;return await this[_0x37507d(0xc9)](),!![];}};function a195_0x327e(){const _0x14d3ae=['279704cGlYGO','apply','getAuthorizationHeader','credentials','/site/oauth2/access_token','__decorate','design:paramtypes','BitbucketCredentialsDto','__importDefault','Service','checkAccessToken','Tokens','toString','getHeaders','constructor','headers','Inject','object','getOwnPropertyDescriptor','accessTokenExpiresAt','1871744WwqUKd','__param','user','refreshToken','isLoggedIn','interceptors','BitbucketApiService','MAX_REQUEST_PER_HOUR','function','2132178oinmQr','createRequest','../credentials/dto/bitbucket-credentials.dto','username','setAccessToken','80890xSfqLD','provider','GitApiService','now','metadata','use','grant_type=client_credentials','axios','default','pathname','57rczrwl','__metadata','URL','getCurrentUser','1053233TKVOUU','5325744DYrmas','../types/git-provider','(((.+)+)+)+$','get','https://bitbucket.org','decorate','../providers.tokens','request','defineProperty','length','5rtUiWa','__esModule','post','144IgTuxl','430kkCfyC','Authorization','typedi','541013fJaFSf'];a195_0x327e=function(){return _0x14d3ae;};return a195_0x327e();}BitbucketApiService=__decorate([(0x0,typedi_1[a195_0xc62f76(0xa3)])(),__param(0x0,(0x0,typedi_1[a195_0xc62f76(0xaa)])(providers_tokens_1[a195_0xc62f76(0xa5)][a195_0xc62f76(0xbd)])),__param(0x1,(0x0,typedi_1[a195_0xc62f76(0xaa)])(providers_tokens_1[a195_0xc62f76(0xa5)][a195_0xc62f76(0x9d)])),__metadata(a195_0xc62f76(0xa0),[String,bitbucket_credentials_dto_1[a195_0xc62f76(0xa1)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;