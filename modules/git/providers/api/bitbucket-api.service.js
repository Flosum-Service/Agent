const a169_0x308ef2=a169_0x1238;(function(_0x2546e5,_0x1e7c48){const _0x3b07c6=a169_0x1238,_0x2c5a7f=_0x2546e5();while(!![]){try{const _0x41153b=parseInt(_0x3b07c6(0x9e))/0x1+parseInt(_0x3b07c6(0x92))/0x2+-parseInt(_0x3b07c6(0xa1))/0x3*(parseInt(_0x3b07c6(0xb2))/0x4)+parseInt(_0x3b07c6(0xa2))/0x5*(-parseInt(_0x3b07c6(0x83))/0x6)+parseInt(_0x3b07c6(0x81))/0x7+parseInt(_0x3b07c6(0xbb))/0x8*(parseInt(_0x3b07c6(0x99))/0x9)+parseInt(_0x3b07c6(0x8b))/0xa;if(_0x41153b===_0x1e7c48)break;else _0x2c5a7f['push'](_0x2c5a7f['shift']());}catch(_0xe82b31){_0x2c5a7f['push'](_0x2c5a7f['shift']());}}}(a169_0x5979,0x304d7));function a169_0x5979(){const _0x568066=['238756CzdbBM','/site/oauth2/access_token','setAccessToken','getHeaders','function','axios','length','9feGCEU','BitbucketApiService','metadata','./git-api.service','../types/git-provider','135523dnzTan','__decorate','username','3021EExyeR','20065dRGzAH','BitbucketCredentialsDto','MAX_REQUEST_PER_HOUR','../credentials/dto/bitbucket-credentials.dto','default','object','checkAccessToken','credentials','GitApiService','now','url','accessTokenExpiresAt','decorate','URL','defineProperty','typedi','1468AadBST','isLoggedIn','refreshToken','provider','getCurrentUser','headers','Inject','use','apply','1575416PkBOIo','__esModule','__param','interceptors','738311gGyANn','constructor','210oTgEBb','(((.+)+)+)+$','createRequest','password','getOwnPropertyDescriptor','get','grant_type=client_credentials','toString','1505700KCPCod','Tokens','search','pathname','../providers.tokens','getAuthorizationHeader','__metadata'];a169_0x5979=function(){return _0x568066;};return a169_0x5979();}const a169_0x1095e8=(function(){let _0x5d124f=!![];return function(_0x2a29b9,_0x570bbc){const _0x4382c1=_0x5d124f?function(){const _0x9b508=a169_0x1238;if(_0x570bbc){const _0x20b4c1=_0x570bbc[_0x9b508(0xba)](_0x2a29b9,arguments);return _0x570bbc=null,_0x20b4c1;}}:function(){};return _0x5d124f=![],_0x4382c1;};}()),a169_0x3b8fe2=a169_0x1095e8(this,function(){const _0x5a5a67=a169_0x1238;return a169_0x3b8fe2[_0x5a5a67(0x8a)]()[_0x5a5a67(0x8d)](_0x5a5a67(0x84))[_0x5a5a67(0x8a)]()[_0x5a5a67(0x82)](a169_0x3b8fe2)['search'](_0x5a5a67(0x84));});a169_0x3b8fe2();'use strict';var __decorate=this&&this[a169_0x308ef2(0x9f)]||function(_0x58ff85,_0x2e5687,_0x112c84,_0x4b0405){const _0x6a69d4=a169_0x308ef2;var _0x40edc0=arguments[_0x6a69d4(0x98)],_0x197879=_0x40edc0<0x3?_0x2e5687:_0x4b0405===null?_0x4b0405=Object[_0x6a69d4(0x87)](_0x2e5687,_0x112c84):_0x4b0405,_0x40d21a;if(typeof Reflect===_0x6a69d4(0xa7)&&typeof Reflect['decorate']===_0x6a69d4(0x96))_0x197879=Reflect[_0x6a69d4(0xae)](_0x58ff85,_0x2e5687,_0x112c84,_0x4b0405);else{for(var _0x77c531=_0x58ff85['length']-0x1;_0x77c531>=0x0;_0x77c531--)if(_0x40d21a=_0x58ff85[_0x77c531])_0x197879=(_0x40edc0<0x3?_0x40d21a(_0x197879):_0x40edc0>0x3?_0x40d21a(_0x2e5687,_0x112c84,_0x197879):_0x40d21a(_0x2e5687,_0x112c84))||_0x197879;}return _0x40edc0>0x3&&_0x197879&&Object[_0x6a69d4(0xb0)](_0x2e5687,_0x112c84,_0x197879),_0x197879;},__metadata=this&&this[a169_0x308ef2(0x91)]||function(_0xf09206,_0xa8986a){const _0x2ca6cf=a169_0x308ef2;if(typeof Reflect===_0x2ca6cf(0xa7)&&typeof Reflect[_0x2ca6cf(0x9b)]===_0x2ca6cf(0x96))return Reflect[_0x2ca6cf(0x9b)](_0xf09206,_0xa8986a);},__param=this&&this[a169_0x308ef2(0x7f)]||function(_0x5937f6,_0x37e909){return function(_0x392deb,_0x466556){_0x37e909(_0x392deb,_0x466556,_0x5937f6);};},__importDefault=this&&this['__importDefault']||function(_0x205c09){const _0x31b01a=a169_0x308ef2;return _0x205c09&&_0x205c09[_0x31b01a(0xbc)]?_0x205c09:{'default':_0x205c09};};Object[a169_0x308ef2(0xb0)](exports,a169_0x308ef2(0xbc),{'value':!![]}),exports[a169_0x308ef2(0x9a)]=void 0x0;const axios_1=__importDefault(require(a169_0x308ef2(0x97))),typedi_1=require(a169_0x308ef2(0xb1)),git_api_service_1=require(a169_0x308ef2(0x9c)),bitbucket_credentials_dto_1=require(a169_0x308ef2(0xa5)),providers_tokens_1=require(a169_0x308ef2(0x8f)),git_provider_1=require(a169_0x308ef2(0x9d)),url_1=require(a169_0x308ef2(0xac));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a169_0x308ef2(0xaa)]{constructor(_0x1a75de,_0x4dddc6){const _0x2b83e5=a169_0x308ef2;super(_0x1a75de,_0x4dddc6),this[_0x2b83e5(0xad)]=-0x1,this[_0x2b83e5(0xa4)]=0x3e8;}[a169_0x308ef2(0x85)](_0x8cd370){const _0x554728=a169_0x308ef2,_0x296303=super[_0x554728(0x85)](_0x8cd370);return _0x296303[_0x554728(0x80)]['request'][_0x554728(0xb9)](async _0x2010bb=>{const _0x583fc6=_0x554728;return await this['checkAccessToken'](),_0x2010bb[_0x583fc6(0xb7)]['Authorization']=this['credentials'][_0x583fc6(0x90)](),_0x2010bb;}),_0x296303;}async[a169_0x308ef2(0xa8)](){const _0x2dc6fb=a169_0x308ef2;if(Date[_0x2dc6fb(0xab)]()<this[_0x2dc6fb(0xad)])return;await this[_0x2dc6fb(0xb4)]();}async[a169_0x308ef2(0xb4)](){const _0x352fed=a169_0x308ef2,{clientId:_0x2a9a86,clientSecret:_0x180ae3}=this[_0x352fed(0xa9)],_0x216bf5=new url_1[(_0x352fed(0xaf))]('https://bitbucket.org');_0x216bf5[_0x352fed(0xa0)]=_0x2a9a86,_0x216bf5[_0x352fed(0x86)]=_0x180ae3,_0x216bf5[_0x352fed(0x8e)]=_0x352fed(0x93);const {data:_0x3da8e9}=await axios_1[_0x352fed(0xa6)]['post'](_0x216bf5[_0x352fed(0x8a)](),_0x352fed(0x89)),{expires_in:_0x50d859,access_token:_0x3301f1}=_0x3da8e9;this[_0x352fed(0xad)]=Date[_0x352fed(0xab)]()+_0x50d859*0x3e8,this[_0x352fed(0xa9)][_0x352fed(0x94)](_0x3301f1);}[a169_0x308ef2(0x95)](){return{};}[a169_0x308ef2(0xb6)](){const _0x2ff788=a169_0x308ef2;return this['request'][_0x2ff788(0x88)]('user');}async[a169_0x308ef2(0xb3)](){return await this['getCurrentUser'](),!![];}};function a169_0x1238(_0x21518a,_0x2dd054){const _0x1c577d=a169_0x5979();return a169_0x1238=function(_0x3b8fe2,_0x1095e8){_0x3b8fe2=_0x3b8fe2-0x7f;let _0x597930=_0x1c577d[_0x3b8fe2];return _0x597930;},a169_0x1238(_0x21518a,_0x2dd054);}BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1['Inject'])(providers_tokens_1[a169_0x308ef2(0x8c)][a169_0x308ef2(0xb5)])),__param(0x1,(0x0,typedi_1[a169_0x308ef2(0xb8)])(providers_tokens_1[a169_0x308ef2(0x8c)][a169_0x308ef2(0xa9)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a169_0x308ef2(0xa3)]])],BitbucketApiService),exports[a169_0x308ef2(0x9a)]=BitbucketApiService;