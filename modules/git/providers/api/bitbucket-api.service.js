const a163_0x32b442=a163_0x3101;(function(_0x10c61c,_0x3dbe88){const _0x104ea8=a163_0x3101,_0x197aa1=_0x10c61c();while(!![]){try{const _0x40fb38=parseInt(_0x104ea8(0xb9))/0x1+parseInt(_0x104ea8(0xa3))/0x2*(-parseInt(_0x104ea8(0xc5))/0x3)+-parseInt(_0x104ea8(0xc1))/0x4+parseInt(_0x104ea8(0x94))/0x5*(-parseInt(_0x104ea8(0xab))/0x6)+-parseInt(_0x104ea8(0xbb))/0x7+-parseInt(_0x104ea8(0xc6))/0x8*(parseInt(_0x104ea8(0x95))/0x9)+parseInt(_0x104ea8(0xad))/0xa;if(_0x40fb38===_0x3dbe88)break;else _0x197aa1['push'](_0x197aa1['shift']());}catch(_0x57ef9b){_0x197aa1['push'](_0x197aa1['shift']());}}}(a163_0x221a,0xc85a1));const a163_0x47bab5=(function(){let _0x16b3f3=!![];return function(_0x2931c0,_0x572ae6){const _0x578e83=_0x16b3f3?function(){const _0x275ed0=a163_0x3101;if(_0x572ae6){const _0x2bba67=_0x572ae6[_0x275ed0(0xa7)](_0x2931c0,arguments);return _0x572ae6=null,_0x2bba67;}}:function(){};return _0x16b3f3=![],_0x578e83;};}()),a163_0x4466fd=a163_0x47bab5(this,function(){const _0x30d56c=a163_0x3101;return a163_0x4466fd[_0x30d56c(0x9e)]()['search'](_0x30d56c(0xc7))[_0x30d56c(0x9e)]()[_0x30d56c(0xc3)](a163_0x4466fd)[_0x30d56c(0x90)](_0x30d56c(0xc7));});a163_0x4466fd();'use strict';var __decorate=this&&this['__decorate']||function(_0x4c5f32,_0x282a5d,_0x2d0e7d,_0xd78c78){const _0x2189e9=a163_0x3101;var _0x5462e1=arguments['length'],_0x27663b=_0x5462e1<0x3?_0x282a5d:_0xd78c78===null?_0xd78c78=Object[_0x2189e9(0x8d)](_0x282a5d,_0x2d0e7d):_0xd78c78,_0x4b9707;if(typeof Reflect==='object'&&typeof Reflect[_0x2189e9(0xb7)]===_0x2189e9(0xa0))_0x27663b=Reflect[_0x2189e9(0xb7)](_0x4c5f32,_0x282a5d,_0x2d0e7d,_0xd78c78);else{for(var _0x36fff4=_0x4c5f32[_0x2189e9(0xa9)]-0x1;_0x36fff4>=0x0;_0x36fff4--)if(_0x4b9707=_0x4c5f32[_0x36fff4])_0x27663b=(_0x5462e1<0x3?_0x4b9707(_0x27663b):_0x5462e1>0x3?_0x4b9707(_0x282a5d,_0x2d0e7d,_0x27663b):_0x4b9707(_0x282a5d,_0x2d0e7d))||_0x27663b;}return _0x5462e1>0x3&&_0x27663b&&Object[_0x2189e9(0x9c)](_0x282a5d,_0x2d0e7d,_0x27663b),_0x27663b;},__metadata=this&&this[a163_0x32b442(0xaa)]||function(_0x123a59,_0x5c082f){const _0x4d4052=a163_0x32b442;if(typeof Reflect===_0x4d4052(0x9f)&&typeof Reflect[_0x4d4052(0x96)]===_0x4d4052(0xa0))return Reflect[_0x4d4052(0x96)](_0x123a59,_0x5c082f);},__param=this&&this[a163_0x32b442(0xbd)]||function(_0x185614,_0x76645c){return function(_0x1af155,_0x3be98f){_0x76645c(_0x1af155,_0x3be98f,_0x185614);};},__importDefault=this&&this[a163_0x32b442(0xc4)]||function(_0x11ef49){const _0x532692=a163_0x32b442;return _0x11ef49&&_0x11ef49[_0x532692(0xc2)]?_0x11ef49:{'default':_0x11ef49};};function a163_0x221a(){const _0x2cdb6e=['function','checkAccessToken','get','976TJRnkY','createRequest','typedi','design:paramtypes','apply','now','length','__metadata','6325314seNLRY','use','40492960SnFEeC','getCurrentUser','MAX_REQUEST_PER_HOUR','BitbucketApiService','request','default','getAuthorizationHeader','../types/git-provider','URL','Authorization','decorate','accessTokenExpiresAt','652145cacoWH','GitApiService','3302887AcbepL','Inject','__param','BitbucketCredentialsDto','post','pathname','4562256cMgDoy','__esModule','constructor','__importDefault','5709miijzG','2848zqQTMQ','(((.+)+)+)+$','provider','isLoggedIn','username','getOwnPropertyDescriptor','grant_type=client_credentials','getHeaders','search','url','../providers.tokens','credentials','5EuXvKM','7218uPTwjN','metadata','Tokens','axios','./git-api.service','refreshToken','password','defineProperty','headers','toString','object'];a163_0x221a=function(){return _0x2cdb6e;};return a163_0x221a();}function a163_0x3101(_0xff2ef,_0x5d2cf0){const _0x33b6ba=a163_0x221a();return a163_0x3101=function(_0x4466fd,_0x47bab5){_0x4466fd=_0x4466fd-0x8c;let _0x221a70=_0x33b6ba[_0x4466fd];return _0x221a70;},a163_0x3101(_0xff2ef,_0x5d2cf0);}Object[a163_0x32b442(0x9c)](exports,a163_0x32b442(0xc2),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const axios_1=__importDefault(require(a163_0x32b442(0x98))),typedi_1=require(a163_0x32b442(0xa5)),git_api_service_1=require(a163_0x32b442(0x99)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a163_0x32b442(0x92)),git_provider_1=require(a163_0x32b442(0xb4)),url_1=require(a163_0x32b442(0x91));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x32b442(0xba)]{constructor(_0x1cc885,_0xf2d37d){const _0x17862b=a163_0x32b442;super(_0x1cc885,_0xf2d37d),this[_0x17862b(0xb8)]=-0x1,this[_0x17862b(0xaf)]=0x3e8;}['createRequest'](_0x2c543b){const _0x24e498=a163_0x32b442,_0x68b196=super[_0x24e498(0xa4)](_0x2c543b);return _0x68b196['interceptors'][_0x24e498(0xb1)][_0x24e498(0xac)](async _0x4d9604=>{const _0x57099c=_0x24e498;return await this[_0x57099c(0xa1)](),_0x4d9604[_0x57099c(0x9d)][_0x57099c(0xb6)]=this[_0x57099c(0x93)][_0x57099c(0xb3)](),_0x4d9604;}),_0x68b196;}async[a163_0x32b442(0xa1)](){const _0x266817=a163_0x32b442;if(Date['now']()<this['accessTokenExpiresAt'])return;await this[_0x266817(0x9a)]();}async['refreshToken'](){const _0x4df691=a163_0x32b442,{clientId:_0x59872b,clientSecret:_0x36404e}=this[_0x4df691(0x93)],_0x2b5c56=new url_1[(_0x4df691(0xb5))]('https://bitbucket.org');_0x2b5c56[_0x4df691(0x8c)]=_0x59872b,_0x2b5c56[_0x4df691(0x9b)]=_0x36404e,_0x2b5c56[_0x4df691(0xc0)]='/site/oauth2/access_token';const {data:_0x5f528f}=await axios_1[_0x4df691(0xb2)][_0x4df691(0xbf)](_0x2b5c56[_0x4df691(0x9e)](),_0x4df691(0x8e)),{expires_in:_0x31f5ae,access_token:_0x2a6924}=_0x5f528f;this[_0x4df691(0xb8)]=Date[_0x4df691(0xa8)]()+_0x31f5ae*0x3e8,this[_0x4df691(0x93)]['setAccessToken'](_0x2a6924);}[a163_0x32b442(0x8f)](){return{};}['getCurrentUser'](){const _0x8b7be4=a163_0x32b442;return this[_0x8b7be4(0xb1)][_0x8b7be4(0xa2)]('user');}async[a163_0x32b442(0xc9)](){const _0x182a4a=a163_0x32b442;return await this[_0x182a4a(0xae)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a163_0x32b442(0xbc)])(providers_tokens_1['Tokens'][a163_0x32b442(0xc8)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a163_0x32b442(0x97)][a163_0x32b442(0x93)])),__metadata(a163_0x32b442(0xa6),[String,bitbucket_credentials_dto_1[a163_0x32b442(0xbe)]])],BitbucketApiService),exports[a163_0x32b442(0xb0)]=BitbucketApiService;