const a157_0x686f19=a157_0x254a;(function(_0x3b87bb,_0x2d23ff){const _0x5b2ddf=a157_0x254a,_0x3dcbce=_0x3b87bb();while(!![]){try{const _0x34025e=-parseInt(_0x5b2ddf(0xe7))/0x1+parseInt(_0x5b2ddf(0xf1))/0x2+-parseInt(_0x5b2ddf(0x11a))/0x3+-parseInt(_0x5b2ddf(0x116))/0x4+-parseInt(_0x5b2ddf(0x118))/0x5+parseInt(_0x5b2ddf(0x11c))/0x6+-parseInt(_0x5b2ddf(0x10e))/0x7*(-parseInt(_0x5b2ddf(0x100))/0x8);if(_0x34025e===_0x2d23ff)break;else _0x3dcbce['push'](_0x3dcbce['shift']());}catch(_0xdd7cc2){_0x3dcbce['push'](_0x3dcbce['shift']());}}}(a157_0x3afb,0x583a4));const a157_0x20acec=(function(){let _0x45e970=!![];return function(_0x2a6f69,_0x4dc167){const _0x43e034=_0x45e970?function(){const _0x4b081c=a157_0x254a;if(_0x4dc167){const _0x5eee93=_0x4dc167[_0x4b081c(0x103)](_0x2a6f69,arguments);return _0x4dc167=null,_0x5eee93;}}:function(){};return _0x45e970=![],_0x43e034;};}()),a157_0x588d81=a157_0x20acec(this,function(){const _0x492f21=a157_0x254a;return a157_0x588d81[_0x492f21(0x123)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a157_0x588d81)[_0x492f21(0xfb)](_0x492f21(0x111));});a157_0x588d81();'use strict';var __decorate=this&&this['__decorate']||function(_0x30d7b1,_0x2c34ec,_0x5142ae,_0x469918){const _0x2fbc20=a157_0x254a;var _0x2fc46e=arguments[_0x2fbc20(0x10a)],_0x2b4ccb=_0x2fc46e<0x3?_0x2c34ec:_0x469918===null?_0x469918=Object[_0x2fbc20(0xe5)](_0x2c34ec,_0x5142ae):_0x469918,_0x4f8829;if(typeof Reflect===_0x2fbc20(0x106)&&typeof Reflect[_0x2fbc20(0xf3)]===_0x2fbc20(0xf9))_0x2b4ccb=Reflect[_0x2fbc20(0xf3)](_0x30d7b1,_0x2c34ec,_0x5142ae,_0x469918);else{for(var _0x3776ab=_0x30d7b1[_0x2fbc20(0x10a)]-0x1;_0x3776ab>=0x0;_0x3776ab--)if(_0x4f8829=_0x30d7b1[_0x3776ab])_0x2b4ccb=(_0x2fc46e<0x3?_0x4f8829(_0x2b4ccb):_0x2fc46e>0x3?_0x4f8829(_0x2c34ec,_0x5142ae,_0x2b4ccb):_0x4f8829(_0x2c34ec,_0x5142ae))||_0x2b4ccb;}return _0x2fc46e>0x3&&_0x2b4ccb&&Object['defineProperty'](_0x2c34ec,_0x5142ae,_0x2b4ccb),_0x2b4ccb;},__metadata=this&&this[a157_0x686f19(0x113)]||function(_0x283911,_0x2567f5){const _0x165a1b=a157_0x686f19;if(typeof Reflect===_0x165a1b(0x106)&&typeof Reflect[_0x165a1b(0xf5)]===_0x165a1b(0xf9))return Reflect[_0x165a1b(0xf5)](_0x283911,_0x2567f5);},__param=this&&this[a157_0x686f19(0xf4)]||function(_0x5c1257,_0x22a5b1){return function(_0xa4fafa,_0x248385){_0x22a5b1(_0xa4fafa,_0x248385,_0x5c1257);};},__importDefault=this&&this[a157_0x686f19(0xf0)]||function(_0x5b2936){return _0x5b2936&&_0x5b2936['__esModule']?_0x5b2936:{'default':_0x5b2936};};Object[a157_0x686f19(0xe6)](exports,a157_0x686f19(0x119),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const axios_1=__importDefault(require(a157_0x686f19(0x10c))),typedi_1=require(a157_0x686f19(0x122)),git_api_service_1=require(a157_0x686f19(0xfa)),bitbucket_credentials_dto_1=require(a157_0x686f19(0x109)),providers_tokens_1=require(a157_0x686f19(0x117)),git_provider_1=require(a157_0x686f19(0xed)),url_1=require(a157_0x686f19(0x110));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a157_0x686f19(0xf6)]{constructor(_0x4e1ff6,_0x139272){const _0x540e7e=a157_0x686f19;super(_0x4e1ff6,_0x139272),this[_0x540e7e(0x101)]=-0x1,this[_0x540e7e(0x11e)]=0x3e8;}[a157_0x686f19(0x11f)](_0xf9f74b){const _0x1268d0=a157_0x686f19,_0x55d96c=super[_0x1268d0(0x11f)](_0xf9f74b);return _0x55d96c[_0x1268d0(0x104)][_0x1268d0(0x115)][_0x1268d0(0xeb)](async _0x3c8099=>{const _0xcf1474=_0x1268d0;return await this['checkAccessToken'](),_0x3c8099[_0xcf1474(0x121)][_0xcf1474(0x108)]=this['credentials'][_0xcf1474(0x114)](),_0x3c8099;}),_0x55d96c;}async[a157_0x686f19(0x102)](){const _0x35dc48=a157_0x686f19;if(Date[_0x35dc48(0xfd)]()<this['accessTokenExpiresAt'])return;await this[_0x35dc48(0x112)]();}async[a157_0x686f19(0x112)](){const _0x23a434=a157_0x686f19,{clientId:_0x198283,clientSecret:_0x4d5de7}=this[_0x23a434(0x120)],_0x22580d=new url_1[(_0x23a434(0x10b))](_0x23a434(0x105));_0x22580d[_0x23a434(0xec)]=_0x198283,_0x22580d[_0x23a434(0x11b)]=_0x4d5de7,_0x22580d[_0x23a434(0xea)]=_0x23a434(0x10d);const {data:_0x38e3ba}=await axios_1[_0x23a434(0xfc)][_0x23a434(0xfe)](_0x22580d[_0x23a434(0x123)](),_0x23a434(0xee)),{expires_in:_0x5d806c,access_token:_0x2898b3}=_0x38e3ba;this[_0x23a434(0x101)]=Date[_0x23a434(0xfd)]()+_0x5d806c*0x3e8,this[_0x23a434(0x120)]['setAccessToken'](_0x2898b3);}[a157_0x686f19(0xf7)](){return{};}['getCurrentUser'](){const _0x54ad4f=a157_0x686f19;return this[_0x54ad4f(0x115)][_0x54ad4f(0x11d)](_0x54ad4f(0xe8));}async[a157_0x686f19(0xff)](){const _0x248afb=a157_0x686f19;return await this[_0x248afb(0x107)](),!![];}};function a157_0x254a(_0x1b6ea8,_0x5c11cb){const _0x2b4ba5=a157_0x3afb();return a157_0x254a=function(_0x588d81,_0x20acec){_0x588d81=_0x588d81-0xe5;let _0x3afb36=_0x2b4ba5[_0x588d81];return _0x3afb36;},a157_0x254a(_0x1b6ea8,_0x5c11cb);}function a157_0x3afb(){const _0x387f50=['1463651OKNCrp','Tokens','url','(((.+)+)+)+$','refreshToken','__metadata','getAuthorizationHeader','request','2263168iqsmlF','../providers.tokens','975680BRprQz','__esModule','1600512lbTNmB','password','1958280yUFVTZ','get','MAX_REQUEST_PER_HOUR','createRequest','credentials','headers','typedi','toString','getOwnPropertyDescriptor','defineProperty','144289LBZttW','user','Service','pathname','use','username','../types/git-provider','grant_type=client_credentials','design:paramtypes','__importDefault','856512QxOJPH','provider','decorate','__param','metadata','GitApiService','getHeaders','Inject','function','./git-api.service','search','default','now','post','isLoggedIn','40iHzLki','accessTokenExpiresAt','checkAccessToken','apply','interceptors','https://bitbucket.org','object','getCurrentUser','Authorization','../credentials/dto/bitbucket-credentials.dto','length','URL','axios','/site/oauth2/access_token'];a157_0x3afb=function(){return _0x387f50;};return a157_0x3afb();}BitbucketApiService=__decorate([(0x0,typedi_1[a157_0x686f19(0xe9)])(),__param(0x0,(0x0,typedi_1[a157_0x686f19(0xf8)])(providers_tokens_1[a157_0x686f19(0x10f)][a157_0x686f19(0xf2)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a157_0x686f19(0x10f)][a157_0x686f19(0x120)])),__metadata(a157_0x686f19(0xef),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;