const a195_0x3b8e8a=a195_0x4073;(function(_0x2b088c,_0x853d14){const _0x3eaf80=a195_0x4073,_0x23006=_0x2b088c();while(!![]){try{const _0x433eb9=-parseInt(_0x3eaf80(0xdf))/0x1+parseInt(_0x3eaf80(0xc2))/0x2*(parseInt(_0x3eaf80(0xc5))/0x3)+parseInt(_0x3eaf80(0xb7))/0x4+-parseInt(_0x3eaf80(0xd1))/0x5+-parseInt(_0x3eaf80(0xc1))/0x6*(-parseInt(_0x3eaf80(0xdc))/0x7)+parseInt(_0x3eaf80(0xbc))/0x8*(-parseInt(_0x3eaf80(0xce))/0x9)+-parseInt(_0x3eaf80(0xc6))/0xa*(-parseInt(_0x3eaf80(0xc4))/0xb);if(_0x433eb9===_0x853d14)break;else _0x23006['push'](_0x23006['shift']());}catch(_0x37cf8e){_0x23006['push'](_0x23006['shift']());}}}(a195_0x2a65,0x7f292));const a195_0x4a0ffd=(function(){let _0x1790ff=!![];return function(_0x22a77b,_0x29e497){const _0x229c4b=_0x1790ff?function(){const _0x480127=a195_0x4073;if(_0x29e497){const _0x2ff9ba=_0x29e497[_0x480127(0xc0)](_0x22a77b,arguments);return _0x29e497=null,_0x2ff9ba;}}:function(){};return _0x1790ff=![],_0x229c4b;};}()),a195_0x1d34a3=a195_0x4a0ffd(this,function(){const _0x3e9f41=a195_0x4073;return a195_0x1d34a3[_0x3e9f41(0xd6)]()['search'](_0x3e9f41(0xe4))[_0x3e9f41(0xd6)]()[_0x3e9f41(0xd2)](a195_0x1d34a3)[_0x3e9f41(0xe3)](_0x3e9f41(0xe4));});function a195_0x4073(_0x2197c1,_0x5a0586){const _0x4fe166=a195_0x2a65();return a195_0x4073=function(_0x1d34a3,_0x4a0ffd){_0x1d34a3=_0x1d34a3-0xb7;let _0x2a6535=_0x4fe166[_0x1d34a3];return _0x2a6535;},a195_0x4073(_0x2197c1,_0x5a0586);}a195_0x1d34a3();function a195_0x2a65(){const _0x3258e8=['URL','user','__importDefault','pathname','getCurrentUser','getAuthorizationHeader','Authorization','decorate','MAX_REQUEST_PER_HOUR','3289288ROgwvH','provider','accessTokenExpiresAt','Service','defineProperty','8Mynemc','getOwnPropertyDescriptor','__param','get','apply','8142omlnyj','1792372UHnZsm','Tokens','11KMLbgs','3crySNI','2945630ORSsqO','isLoggedIn','post','grant_type=client_credentials','use','Inject','BitbucketApiService','__esModule','9141075zcCAbb','url','object','1084735PCWseY','constructor','checkAccessToken','request','metadata','toString','password','function','./git-api.service','setAccessToken','headers','1183FrXcKc','design:paramtypes','default','488932kvQNoP','/site/oauth2/access_token','createRequest','now','search','(((.+)+)+)+$','typedi','axios','__decorate','__metadata','credentials','length','username'];a195_0x2a65=function(){return _0x3258e8;};return a195_0x2a65();}'use strict';var __decorate=this&&this[a195_0x3b8e8a(0xe7)]||function(_0x588976,_0x1cec23,_0x16f19f,_0x73251b){const _0x2528da=a195_0x3b8e8a;var _0x51e40c=arguments[_0x2528da(0xea)],_0x39baf2=_0x51e40c<0x3?_0x1cec23:_0x73251b===null?_0x73251b=Object[_0x2528da(0xbd)](_0x1cec23,_0x16f19f):_0x73251b,_0x51e276;if(typeof Reflect===_0x2528da(0xd0)&&typeof Reflect['decorate']===_0x2528da(0xd8))_0x39baf2=Reflect[_0x2528da(0xf3)](_0x588976,_0x1cec23,_0x16f19f,_0x73251b);else{for(var _0x5b6285=_0x588976[_0x2528da(0xea)]-0x1;_0x5b6285>=0x0;_0x5b6285--)if(_0x51e276=_0x588976[_0x5b6285])_0x39baf2=(_0x51e40c<0x3?_0x51e276(_0x39baf2):_0x51e40c>0x3?_0x51e276(_0x1cec23,_0x16f19f,_0x39baf2):_0x51e276(_0x1cec23,_0x16f19f))||_0x39baf2;}return _0x51e40c>0x3&&_0x39baf2&&Object[_0x2528da(0xbb)](_0x1cec23,_0x16f19f,_0x39baf2),_0x39baf2;},__metadata=this&&this[a195_0x3b8e8a(0xe8)]||function(_0x5ded3a,_0x217e59){const _0x1a205f=a195_0x3b8e8a;if(typeof Reflect===_0x1a205f(0xd0)&&typeof Reflect[_0x1a205f(0xd5)]===_0x1a205f(0xd8))return Reflect[_0x1a205f(0xd5)](_0x5ded3a,_0x217e59);},__param=this&&this[a195_0x3b8e8a(0xbe)]||function(_0x4aa07d,_0x5136c4){return function(_0x5813e3,_0x45d608){_0x5136c4(_0x5813e3,_0x45d608,_0x4aa07d);};},__importDefault=this&&this[a195_0x3b8e8a(0xee)]||function(_0x591274){const _0x5bcc61=a195_0x3b8e8a;return _0x591274&&_0x591274[_0x5bcc61(0xcd)]?_0x591274:{'default':_0x591274};};Object[a195_0x3b8e8a(0xbb)](exports,a195_0x3b8e8a(0xcd),{'value':!![]}),exports[a195_0x3b8e8a(0xcc)]=void 0x0;const axios_1=__importDefault(require(a195_0x3b8e8a(0xe6))),typedi_1=require(a195_0x3b8e8a(0xe5)),git_api_service_1=require(a195_0x3b8e8a(0xd9)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require('../providers.tokens'),git_provider_1=require('../types/git-provider'),url_1=require(a195_0x3b8e8a(0xcf));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x55297e,_0x417499){const _0x5c2365=a195_0x3b8e8a;super(_0x55297e,_0x417499),this[_0x5c2365(0xb9)]=-0x1,this[_0x5c2365(0xf4)]=0x3e8;}[a195_0x3b8e8a(0xe1)](_0x2c0daf){const _0x85c679=a195_0x3b8e8a,_0xdb43a=super[_0x85c679(0xe1)](_0x2c0daf);return _0xdb43a['interceptors'][_0x85c679(0xd4)][_0x85c679(0xca)](async _0x200130=>{const _0x41f150=_0x85c679;return await this[_0x41f150(0xd3)](),_0x200130[_0x41f150(0xdb)][_0x41f150(0xf2)]=this['credentials'][_0x41f150(0xf1)](),_0x200130;}),_0xdb43a;}async[a195_0x3b8e8a(0xd3)](){const _0xb758fa=a195_0x3b8e8a;if(Date[_0xb758fa(0xe2)]()<this[_0xb758fa(0xb9)])return;await this['refreshToken']();}async['refreshToken'](){const _0x29f7ae=a195_0x3b8e8a,{clientId:_0x925ea9,clientSecret:_0x2f5deb}=this['credentials'],_0x49c0cd=new url_1[(_0x29f7ae(0xec))]('https://bitbucket.org');_0x49c0cd[_0x29f7ae(0xeb)]=_0x925ea9,_0x49c0cd[_0x29f7ae(0xd7)]=_0x2f5deb,_0x49c0cd[_0x29f7ae(0xef)]=_0x29f7ae(0xe0);const {data:_0x154abe}=await axios_1[_0x29f7ae(0xde)][_0x29f7ae(0xc8)](_0x49c0cd[_0x29f7ae(0xd6)](),_0x29f7ae(0xc9)),{expires_in:_0x5b79ce,access_token:_0x2cf45a}=_0x154abe;this[_0x29f7ae(0xb9)]=Date[_0x29f7ae(0xe2)]()+_0x5b79ce*0x3e8,this[_0x29f7ae(0xe9)][_0x29f7ae(0xda)](_0x2cf45a);}['getHeaders'](){return{};}[a195_0x3b8e8a(0xf0)](){const _0x39b6a9=a195_0x3b8e8a;return this[_0x39b6a9(0xd4)][_0x39b6a9(0xbf)](_0x39b6a9(0xed));}async[a195_0x3b8e8a(0xc7)](){const _0x504c80=a195_0x3b8e8a;return await this[_0x504c80(0xf0)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a195_0x3b8e8a(0xba)])(),__param(0x0,(0x0,typedi_1[a195_0x3b8e8a(0xcb)])(providers_tokens_1[a195_0x3b8e8a(0xc3)][a195_0x3b8e8a(0xb8)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a195_0x3b8e8a(0xc3)][a195_0x3b8e8a(0xe9)])),__metadata(a195_0x3b8e8a(0xdd),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports[a195_0x3b8e8a(0xcc)]=BitbucketApiService;