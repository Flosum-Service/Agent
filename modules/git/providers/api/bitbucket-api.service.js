const a184_0x4b5c1f=a184_0x470f;(function(_0x571e5d,_0x2a8cf9){const _0x5644bf=a184_0x470f,_0x522325=_0x571e5d();while(!![]){try{const _0x2491a9=parseInt(_0x5644bf(0x1d2))/0x1+parseInt(_0x5644bf(0x1f5))/0x2*(-parseInt(_0x5644bf(0x1d0))/0x3)+parseInt(_0x5644bf(0x1e8))/0x4+parseInt(_0x5644bf(0x1cb))/0x5+-parseInt(_0x5644bf(0x1f6))/0x6*(-parseInt(_0x5644bf(0x1fa))/0x7)+parseInt(_0x5644bf(0x1c6))/0x8+-parseInt(_0x5644bf(0x1c8))/0x9;if(_0x2491a9===_0x2a8cf9)break;else _0x522325['push'](_0x522325['shift']());}catch(_0xe90982){_0x522325['push'](_0x522325['shift']());}}}(a184_0xfb07,0x318f8));function a184_0xfb07(){const _0x1f5e25=['360780MXCLDs','1914FyjoZG','Authorization','BitbucketApiService','constructor','1981jjBTZJ','../providers.tokens','use','1066496NrMXnN','toString','3220200saGMAZ','request','Inject','776400EMaRbQ','object','__importDefault','../types/git-provider','getAuthorizationHeader','3YBgGFu','__esModule','240256nvYsKx','accessTokenExpiresAt','username','URL','isLoggedIn','typedi','/site/oauth2/access_token','Tokens','__decorate','metadata','refreshToken','credentials','function','now','(((.+)+)+)+$','https://bitbucket.org','defineProperty','length','getCurrentUser','createRequest','Service','default','488260jEcSFA','GitApiService','getHeaders','pathname','search','headers','checkAccessToken','interceptors','decorate','axios','post','../credentials/dto/bitbucket-credentials.dto','password'];a184_0xfb07=function(){return _0x1f5e25;};return a184_0xfb07();}const a184_0x3b2aa6=(function(){let _0x1e1d50=!![];return function(_0xc6086c,_0x2afc5a){const _0xffeeb2=_0x1e1d50?function(){if(_0x2afc5a){const _0x1312c7=_0x2afc5a['apply'](_0xc6086c,arguments);return _0x2afc5a=null,_0x1312c7;}}:function(){};return _0x1e1d50=![],_0xffeeb2;};}()),a184_0x94b9fa=a184_0x3b2aa6(this,function(){const _0x268748=a184_0x470f;return a184_0x94b9fa[_0x268748(0x1c7)]()['search'](_0x268748(0x1e0))[_0x268748(0x1c7)]()[_0x268748(0x1f9)](a184_0x94b9fa)[_0x268748(0x1ec)]('(((.+)+)+)+$');});a184_0x94b9fa();'use strict';var __decorate=this&&this[a184_0x4b5c1f(0x1da)]||function(_0x503b7e,_0x27233,_0x46c1f0,_0x2c1ff4){const _0x40e41e=a184_0x4b5c1f;var _0x3ccc2d=arguments[_0x40e41e(0x1e3)],_0x4b594c=_0x3ccc2d<0x3?_0x27233:_0x2c1ff4===null?_0x2c1ff4=Object['getOwnPropertyDescriptor'](_0x27233,_0x46c1f0):_0x2c1ff4,_0x568639;if(typeof Reflect===_0x40e41e(0x1cc)&&typeof Reflect[_0x40e41e(0x1f0)]===_0x40e41e(0x1de))_0x4b594c=Reflect[_0x40e41e(0x1f0)](_0x503b7e,_0x27233,_0x46c1f0,_0x2c1ff4);else{for(var _0x306d04=_0x503b7e[_0x40e41e(0x1e3)]-0x1;_0x306d04>=0x0;_0x306d04--)if(_0x568639=_0x503b7e[_0x306d04])_0x4b594c=(_0x3ccc2d<0x3?_0x568639(_0x4b594c):_0x3ccc2d>0x3?_0x568639(_0x27233,_0x46c1f0,_0x4b594c):_0x568639(_0x27233,_0x46c1f0))||_0x4b594c;}return _0x3ccc2d>0x3&&_0x4b594c&&Object[_0x40e41e(0x1e2)](_0x27233,_0x46c1f0,_0x4b594c),_0x4b594c;},__metadata=this&&this['__metadata']||function(_0x3e42ec,_0xeb6916){const _0x57a32b=a184_0x4b5c1f;if(typeof Reflect===_0x57a32b(0x1cc)&&typeof Reflect['metadata']===_0x57a32b(0x1de))return Reflect[_0x57a32b(0x1db)](_0x3e42ec,_0xeb6916);},__param=this&&this['__param']||function(_0xef7156,_0x3e8a3){return function(_0x189a24,_0x4853ff){_0x3e8a3(_0x189a24,_0x4853ff,_0xef7156);};},__importDefault=this&&this[a184_0x4b5c1f(0x1cd)]||function(_0x4791a9){const _0x77b38=a184_0x4b5c1f;return _0x4791a9&&_0x4791a9[_0x77b38(0x1d1)]?_0x4791a9:{'default':_0x4791a9};};Object[a184_0x4b5c1f(0x1e2)](exports,a184_0x4b5c1f(0x1d1),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const axios_1=__importDefault(require(a184_0x4b5c1f(0x1f1))),typedi_1=require(a184_0x4b5c1f(0x1d7)),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require(a184_0x4b5c1f(0x1f3)),providers_tokens_1=require(a184_0x4b5c1f(0x1fb)),git_provider_1=require(a184_0x4b5c1f(0x1ce)),url_1=require('url');function a184_0x470f(_0x26323a,_0x258781){const _0xee90e2=a184_0xfb07();return a184_0x470f=function(_0x94b9fa,_0x3b2aa6){_0x94b9fa=_0x94b9fa-0x1c5;let _0xfb07ea=_0xee90e2[_0x94b9fa];return _0xfb07ea;},a184_0x470f(_0x26323a,_0x258781);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a184_0x4b5c1f(0x1e9)]{constructor(_0x201236,_0x5ce1ce){const _0xe80e9e=a184_0x4b5c1f;super(_0x201236,_0x5ce1ce),this[_0xe80e9e(0x1d3)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a184_0x4b5c1f(0x1e5)](_0x53399a){const _0x3e5724=a184_0x4b5c1f,_0xb41afc=super[_0x3e5724(0x1e5)](_0x53399a);return _0xb41afc[_0x3e5724(0x1ef)]['request'][_0x3e5724(0x1c5)](async _0x11e804=>{const _0x1a455b=_0x3e5724;return await this['checkAccessToken'](),_0x11e804[_0x1a455b(0x1ed)][_0x1a455b(0x1f7)]=this[_0x1a455b(0x1dd)][_0x1a455b(0x1cf)](),_0x11e804;}),_0xb41afc;}async[a184_0x4b5c1f(0x1ee)](){const _0x1a5e7b=a184_0x4b5c1f;if(Date[_0x1a5e7b(0x1df)]()<this[_0x1a5e7b(0x1d3)])return;await this[_0x1a5e7b(0x1dc)]();}async[a184_0x4b5c1f(0x1dc)](){const _0x3e0a5a=a184_0x4b5c1f,{clientId:_0x2aaa81,clientSecret:_0x188520}=this['credentials'],_0x53da8b=new url_1[(_0x3e0a5a(0x1d5))](_0x3e0a5a(0x1e1));_0x53da8b[_0x3e0a5a(0x1d4)]=_0x2aaa81,_0x53da8b[_0x3e0a5a(0x1f4)]=_0x188520,_0x53da8b[_0x3e0a5a(0x1eb)]=_0x3e0a5a(0x1d8);const {data:_0x3b073d}=await axios_1[_0x3e0a5a(0x1e7)][_0x3e0a5a(0x1f2)](_0x53da8b['toString'](),'grant_type=client_credentials'),{expires_in:_0x5b01c7,access_token:_0x38f404}=_0x3b073d;this[_0x3e0a5a(0x1d3)]=Date[_0x3e0a5a(0x1df)]()+_0x5b01c7*0x3e8,this['credentials']['setAccessToken'](_0x38f404);}[a184_0x4b5c1f(0x1ea)](){return{};}[a184_0x4b5c1f(0x1e4)](){const _0xa85d1c=a184_0x4b5c1f;return this[_0xa85d1c(0x1c9)]['get']('user');}async[a184_0x4b5c1f(0x1d6)](){const _0x209a78=a184_0x4b5c1f;return await this[_0x209a78(0x1e4)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a184_0x4b5c1f(0x1e6)])(),__param(0x0,(0x0,typedi_1[a184_0x4b5c1f(0x1ca)])(providers_tokens_1[a184_0x4b5c1f(0x1d9)]['provider'])),__param(0x1,(0x0,typedi_1[a184_0x4b5c1f(0x1ca)])(providers_tokens_1[a184_0x4b5c1f(0x1d9)][a184_0x4b5c1f(0x1dd)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports[a184_0x4b5c1f(0x1f8)]=BitbucketApiService;