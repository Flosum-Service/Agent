const a124_0x2fc86b=a124_0x2258;(function(_0x474fb8,_0x5ddaf0){const _0x20c318=a124_0x2258,_0x4bbcb5=_0x474fb8();while(!![]){try{const _0x35e752=parseInt(_0x20c318(0xba))/0x1*(-parseInt(_0x20c318(0xaa))/0x2)+-parseInt(_0x20c318(0xb8))/0x3+-parseInt(_0x20c318(0x97))/0x4+parseInt(_0x20c318(0x9d))/0x5*(parseInt(_0x20c318(0xb2))/0x6)+-parseInt(_0x20c318(0x9b))/0x7+parseInt(_0x20c318(0xa2))/0x8*(-parseInt(_0x20c318(0x8e))/0x9)+parseInt(_0x20c318(0xa1))/0xa;if(_0x35e752===_0x5ddaf0)break;else _0x4bbcb5['push'](_0x4bbcb5['shift']());}catch(_0x56a395){_0x4bbcb5['push'](_0x4bbcb5['shift']());}}}(a124_0x553d,0x4e638));const a124_0x9bcc67=(function(){let _0xb27826=!![];return function(_0x4bf6c7,_0x42aafd){const _0x1a948d=_0xb27826?function(){const _0x4f9fe0=a124_0x2258;if(_0x42aafd){const _0x465de6=_0x42aafd[_0x4f9fe0(0x91)](_0x4bf6c7,arguments);return _0x42aafd=null,_0x465de6;}}:function(){};return _0xb27826=![],_0x1a948d;};}()),a124_0x2dc440=a124_0x9bcc67(this,function(){const _0x432e9a=a124_0x2258;return a124_0x2dc440[_0x432e9a(0x9c)]()[_0x432e9a(0xc3)](_0x432e9a(0x98))[_0x432e9a(0x9c)]()[_0x432e9a(0xb9)](a124_0x2dc440)[_0x432e9a(0xc3)](_0x432e9a(0x98));});function a124_0x2258(_0x27f521,_0x33baef){const _0x40477a=a124_0x553d();return a124_0x2258=function(_0x2dc440,_0x9bcc67){_0x2dc440=_0x2dc440-0x8c;let _0x553dad=_0x40477a[_0x2dc440];return _0x553dad;},a124_0x2258(_0x27f521,_0x33baef);}a124_0x2dc440();'use strict';var __decorate=this&&this[a124_0x2fc86b(0xbe)]||function(_0x5de1b3,_0x369f34,_0x322e0e,_0x41173d){const _0x3335ed=a124_0x2fc86b;var _0x1fb3de=arguments['length'],_0x18cb10=_0x1fb3de<0x3?_0x369f34:_0x41173d===null?_0x41173d=Object['getOwnPropertyDescriptor'](_0x369f34,_0x322e0e):_0x41173d,_0x4c8c5c;if(typeof Reflect==='object'&&typeof Reflect[_0x3335ed(0xc2)]===_0x3335ed(0x99))_0x18cb10=Reflect[_0x3335ed(0xc2)](_0x5de1b3,_0x369f34,_0x322e0e,_0x41173d);else{for(var _0x24b752=_0x5de1b3[_0x3335ed(0xbd)]-0x1;_0x24b752>=0x0;_0x24b752--)if(_0x4c8c5c=_0x5de1b3[_0x24b752])_0x18cb10=(_0x1fb3de<0x3?_0x4c8c5c(_0x18cb10):_0x1fb3de>0x3?_0x4c8c5c(_0x369f34,_0x322e0e,_0x18cb10):_0x4c8c5c(_0x369f34,_0x322e0e))||_0x18cb10;}return _0x1fb3de>0x3&&_0x18cb10&&Object[_0x3335ed(0xb3)](_0x369f34,_0x322e0e,_0x18cb10),_0x18cb10;},__metadata=this&&this[a124_0x2fc86b(0xa4)]||function(_0x53ea79,_0x2a5af0){if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x53ea79,_0x2a5af0);},__param=this&&this[a124_0x2fc86b(0x9a)]||function(_0x104cd3,_0x521ad2){return function(_0x7182d1,_0x424524){_0x521ad2(_0x7182d1,_0x424524,_0x104cd3);};},__importDefault=this&&this[a124_0x2fc86b(0x95)]||function(_0x591461){return _0x591461&&_0x591461['__esModule']?_0x591461:{'default':_0x591461};};function a124_0x553d(){const _0x1d765b=['axios','setAccessToken','decorate','search','BitbucketCredentialsDto','typedi','BitbucketApiService','Tokens','738rGgjoA','isLoggedIn','Service','apply','../types/git-provider','checkAccessToken','./git-api.service','__importDefault','grant_type=client_credentials','2390376rYjBHY','(((.+)+)+)+$','function','__param','2688938GMKWwb','toString','140qePvBj','now','refreshToken','../providers.tokens','20315870bWgWZC','18912icWUxt','getCurrentUser','__metadata','use','password','accessTokenExpiresAt','post','username','587540NgQYHg','Authorization','provider','__esModule','request','interceptors','url','getHeaders','23658cmMzEf','defineProperty','MAX_REQUEST_PER_HOUR','https://bitbucket.org','GitApiService','headers','1054695WeliHK','constructor','1NNsSiV','credentials','Inject','length','__decorate','../credentials/dto/bitbucket-credentials.dto'];a124_0x553d=function(){return _0x1d765b;};return a124_0x553d();}Object[a124_0x2fc86b(0xb3)](exports,a124_0x2fc86b(0xad),{'value':!![]}),exports[a124_0x2fc86b(0x8c)]=void 0x0;const axios_1=__importDefault(require(a124_0x2fc86b(0xc0))),typedi_1=require(a124_0x2fc86b(0xc5)),git_api_service_1=require(a124_0x2fc86b(0x94)),bitbucket_credentials_dto_1=require(a124_0x2fc86b(0xbf)),providers_tokens_1=require(a124_0x2fc86b(0xa0)),git_provider_1=require(a124_0x2fc86b(0x92)),url_1=require(a124_0x2fc86b(0xb0));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a124_0x2fc86b(0xb6)]{constructor(_0x36a47a,_0x4c50c9){const _0x74ee4f=a124_0x2fc86b;super(_0x36a47a,_0x4c50c9),this[_0x74ee4f(0xa7)]=-0x1,this[_0x74ee4f(0xb4)]=0x3e8;}['createRequest'](_0xe1eff4){const _0x2cb735=a124_0x2fc86b,_0x20a69a=super['createRequest'](_0xe1eff4);return _0x20a69a[_0x2cb735(0xaf)][_0x2cb735(0xae)][_0x2cb735(0xa5)](async _0x22b84f=>{const _0x4564ba=_0x2cb735;return await this[_0x4564ba(0x93)](),_0x22b84f['headers']||(_0x22b84f[_0x4564ba(0xb7)]={}),_0x22b84f[_0x4564ba(0xb7)][_0x4564ba(0xab)]=this[_0x4564ba(0xbb)]['getAuthorizationHeader'](),_0x22b84f;}),_0x20a69a;}async[a124_0x2fc86b(0x93)](){const _0x2a3808=a124_0x2fc86b;if(Date[_0x2a3808(0x9e)]()<this['accessTokenExpiresAt'])return;await this[_0x2a3808(0x9f)]();}async[a124_0x2fc86b(0x9f)](){const _0x2c67e1=a124_0x2fc86b,{clientId:_0x12a2f5,clientSecret:_0x2b3658}=this['credentials'],_0x3d62e5=new url_1['URL'](_0x2c67e1(0xb5));_0x3d62e5[_0x2c67e1(0xa9)]=_0x12a2f5,_0x3d62e5[_0x2c67e1(0xa6)]=_0x2b3658,_0x3d62e5['pathname']='/site/oauth2/access_token';const {data:_0x195108}=await axios_1['default'][_0x2c67e1(0xa8)](_0x3d62e5[_0x2c67e1(0x9c)](),_0x2c67e1(0x96)),{expires_in:_0x273301,access_token:_0x21eb26}=_0x195108;this[_0x2c67e1(0xa7)]=Date[_0x2c67e1(0x9e)]()+_0x273301*0x3e8,this[_0x2c67e1(0xbb)][_0x2c67e1(0xc1)](_0x21eb26);}[a124_0x2fc86b(0xb1)](){return{};}[a124_0x2fc86b(0xa3)](){const _0x2f01fe=a124_0x2fc86b;return this[_0x2f01fe(0xae)]['get']('user');}async[a124_0x2fc86b(0x8f)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a124_0x2fc86b(0x90)])(),__param(0x0,(0x0,typedi_1[a124_0x2fc86b(0xbc)])(providers_tokens_1['Tokens'][a124_0x2fc86b(0xac)])),__param(0x1,(0x0,typedi_1[a124_0x2fc86b(0xbc)])(providers_tokens_1[a124_0x2fc86b(0x8d)][a124_0x2fc86b(0xbb)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a124_0x2fc86b(0xc4)]])],BitbucketApiService),exports[a124_0x2fc86b(0x8c)]=BitbucketApiService;