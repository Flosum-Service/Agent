const a108_0x41aef1=a108_0x2129;(function(_0x1708e2,_0x1dfa4e){const _0x215cdb=a108_0x2129,_0x330d21=_0x1708e2();while(!![]){try{const _0x53936b=-parseInt(_0x215cdb(0x161))/0x1*(-parseInt(_0x215cdb(0x15c))/0x2)+parseInt(_0x215cdb(0x16d))/0x3+parseInt(_0x215cdb(0x178))/0x4+-parseInt(_0x215cdb(0x175))/0x5*(parseInt(_0x215cdb(0x17c))/0x6)+-parseInt(_0x215cdb(0x162))/0x7*(-parseInt(_0x215cdb(0x18d))/0x8)+-parseInt(_0x215cdb(0x15a))/0x9+-parseInt(_0x215cdb(0x173))/0xa;if(_0x53936b===_0x1dfa4e)break;else _0x330d21['push'](_0x330d21['shift']());}catch(_0x2c0375){_0x330d21['push'](_0x330d21['shift']());}}}(a108_0x1133,0x2fca8));const a108_0x3df124=(function(){let _0x5e92d6=!![];return function(_0x72cf1c,_0x17856c){const _0x1f064f=_0x5e92d6?function(){const _0x5d461e=a108_0x2129;if(_0x17856c){const _0xe164e=_0x17856c[_0x5d461e(0x176)](_0x72cf1c,arguments);return _0x17856c=null,_0xe164e;}}:function(){};return _0x5e92d6=![],_0x1f064f;};}()),a108_0x4dc6ba=a108_0x3df124(this,function(){const _0x1d7db8=a108_0x2129;return a108_0x4dc6ba[_0x1d7db8(0x15b)]()['search'](_0x1d7db8(0x166))['toString']()[_0x1d7db8(0x18b)](a108_0x4dc6ba)[_0x1d7db8(0x18e)](_0x1d7db8(0x166));});a108_0x4dc6ba();function a108_0x2129(_0x102b59,_0x55c039){const _0x4c81b2=a108_0x1133();return a108_0x2129=function(_0x4dc6ba,_0x3df124){_0x4dc6ba=_0x4dc6ba-0x153;let _0x1133c3=_0x4c81b2[_0x4dc6ba];return _0x1133c3;},a108_0x2129(_0x102b59,_0x55c039);}'use strict';var __decorate=this&&this[a108_0x41aef1(0x164)]||function(_0x4cd4d5,_0x34d781,_0x6fc27b,_0x1d3076){const _0x4b7384=a108_0x41aef1;var _0x5cf857=arguments[_0x4b7384(0x184)],_0xf35639=_0x5cf857<0x3?_0x34d781:_0x1d3076===null?_0x1d3076=Object[_0x4b7384(0x179)](_0x34d781,_0x6fc27b):_0x1d3076,_0x11b9e1;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x4b7384(0x167))_0xf35639=Reflect['decorate'](_0x4cd4d5,_0x34d781,_0x6fc27b,_0x1d3076);else{for(var _0x231988=_0x4cd4d5[_0x4b7384(0x184)]-0x1;_0x231988>=0x0;_0x231988--)if(_0x11b9e1=_0x4cd4d5[_0x231988])_0xf35639=(_0x5cf857<0x3?_0x11b9e1(_0xf35639):_0x5cf857>0x3?_0x11b9e1(_0x34d781,_0x6fc27b,_0xf35639):_0x11b9e1(_0x34d781,_0x6fc27b))||_0xf35639;}return _0x5cf857>0x3&&_0xf35639&&Object[_0x4b7384(0x174)](_0x34d781,_0x6fc27b,_0xf35639),_0xf35639;},__metadata=this&&this['__metadata']||function(_0x1ab56f,_0x19c6fd){const _0x8d73c9=a108_0x41aef1;if(typeof Reflect===_0x8d73c9(0x180)&&typeof Reflect[_0x8d73c9(0x153)]===_0x8d73c9(0x167))return Reflect[_0x8d73c9(0x153)](_0x1ab56f,_0x19c6fd);},__param=this&&this[a108_0x41aef1(0x171)]||function(_0xa66147,_0x59a4ce){return function(_0x50b688,_0x4a9821){_0x59a4ce(_0x50b688,_0x4a9821,_0xa66147);};},__importDefault=this&&this[a108_0x41aef1(0x16e)]||function(_0x42d1d8){const _0x5838d=a108_0x41aef1;return _0x42d1d8&&_0x42d1d8[_0x5838d(0x168)]?_0x42d1d8:{'default':_0x42d1d8};};Object[a108_0x41aef1(0x174)](exports,'__esModule',{'value':!![]}),exports[a108_0x41aef1(0x16f)]=void 0x0;const axios_1=__importDefault(require(a108_0x41aef1(0x15e))),typedi_1=require(a108_0x41aef1(0x17b)),git_api_service_1=require(a108_0x41aef1(0x189)),bitbucket_credentials_dto_1=require(a108_0x41aef1(0x159)),providers_tokens_1=require(a108_0x41aef1(0x17a)),git_provider_1=require('../types/git-provider'),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a108_0x41aef1(0x163)]{constructor(_0x2daf5d,_0x320dfe){const _0x1ea824=a108_0x41aef1;super(_0x2daf5d,_0x320dfe),this[_0x1ea824(0x183)]=-0x1,this[_0x1ea824(0x170)]=0x3e8;}['createRequest'](_0x17e85e){const _0x4a8cc6=a108_0x41aef1,_0x27cf21=super['createRequest'](_0x17e85e);return _0x27cf21[_0x4a8cc6(0x181)][_0x4a8cc6(0x158)][_0x4a8cc6(0x156)](async _0x508c59=>{const _0x5777d7=_0x4a8cc6;return await this[_0x5777d7(0x155)](),_0x508c59[_0x5777d7(0x188)][_0x5777d7(0x15d)]=this[_0x5777d7(0x18a)][_0x5777d7(0x17f)](),_0x508c59;}),_0x27cf21;}async[a108_0x41aef1(0x155)](){const _0x23cc23=a108_0x41aef1;if(Date[_0x23cc23(0x18f)]()<this[_0x23cc23(0x183)])return;await this[_0x23cc23(0x185)]();}async[a108_0x41aef1(0x185)](){const _0x24fc58=a108_0x41aef1,{clientId:_0x54bbfd,clientSecret:_0x46df77}=this['credentials'],_0x429ead=new url_1[(_0x24fc58(0x16b))](_0x24fc58(0x172));_0x429ead[_0x24fc58(0x190)]=_0x54bbfd,_0x429ead[_0x24fc58(0x154)]=_0x46df77,_0x429ead[_0x24fc58(0x177)]=_0x24fc58(0x186);const {data:_0x19bfc3}=await axios_1[_0x24fc58(0x160)][_0x24fc58(0x187)](_0x429ead[_0x24fc58(0x15b)](),_0x24fc58(0x15f)),{expires_in:_0x3373df,access_token:_0x56db37}=_0x19bfc3;this[_0x24fc58(0x183)]=Date['now']()+_0x3373df*0x3e8,this[_0x24fc58(0x18a)][_0x24fc58(0x17e)](_0x56db37);}[a108_0x41aef1(0x16c)](){return{};}[a108_0x41aef1(0x191)](){const _0xdeb72=a108_0x41aef1;return this[_0xdeb72(0x158)][_0xdeb72(0x169)](_0xdeb72(0x17d));}async[a108_0x41aef1(0x16a)](){const _0x30a470=a108_0x41aef1;return await this[_0x30a470(0x191)](),!![];}};BitbucketApiService=__decorate([typedi_1[a108_0x41aef1(0x182)](),__param(0x0,typedi_1['Inject'](providers_tokens_1[a108_0x41aef1(0x157)]['provider'])),__param(0x1,typedi_1[a108_0x41aef1(0x165)](providers_tokens_1['Tokens'][a108_0x41aef1(0x18a)])),__metadata(a108_0x41aef1(0x18c),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports[a108_0x41aef1(0x16f)]=BitbucketApiService;function a108_0x1133(){const _0x5e92de=['Tokens','request','../credentials/dto/bitbucket-credentials.dto','2793546ufERzq','toString','688290KHHnww','Authorization','axios','grant_type=client_credentials','default','1hCDSWA','91zvHdSp','GitApiService','__decorate','Inject','(((.+)+)+)+$','function','__esModule','get','isLoggedIn','URL','getHeaders','823071owqmwJ','__importDefault','BitbucketApiService','MAX_REQUEST_PER_HOUR','__param','https://bitbucket.org','4586660siDjUE','defineProperty','3215umphQw','apply','pathname','1193672gdKwxz','getOwnPropertyDescriptor','../providers.tokens','typedi','1482TqftiR','user','setAccessToken','getAuthorizationHeader','object','interceptors','Service','accessTokenExpiresAt','length','refreshToken','/site/oauth2/access_token','post','headers','./git-api.service','credentials','constructor','design:paramtypes','127208DEucZF','search','now','username','getCurrentUser','metadata','password','checkAccessToken','use'];a108_0x1133=function(){return _0x5e92de;};return a108_0x1133();}