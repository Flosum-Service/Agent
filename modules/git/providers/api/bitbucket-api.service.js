const a158_0x192f67=a158_0x23ed;(function(_0x3e2a11,_0x3184c4){const _0x21308b=a158_0x23ed,_0x540692=_0x3e2a11();while(!![]){try{const _0x15d04b=-parseInt(_0x21308b(0x183))/0x1+-parseInt(_0x21308b(0x18e))/0x2*(-parseInt(_0x21308b(0x179))/0x3)+-parseInt(_0x21308b(0x182))/0x4+-parseInt(_0x21308b(0x1ad))/0x5+-parseInt(_0x21308b(0x1a0))/0x6*(-parseInt(_0x21308b(0x19a))/0x7)+parseInt(_0x21308b(0x181))/0x8*(-parseInt(_0x21308b(0x1a7))/0x9)+parseInt(_0x21308b(0x173))/0xa;if(_0x15d04b===_0x3184c4)break;else _0x540692['push'](_0x540692['shift']());}catch(_0x3bd596){_0x540692['push'](_0x540692['shift']());}}}(a158_0x9913,0x32d51));const a158_0xd5b990=(function(){let _0x2b49af=!![];return function(_0x3a2b67,_0x2c011e){const _0x11ec66=_0x2b49af?function(){const _0x4300cb=a158_0x23ed;if(_0x2c011e){const _0x54c5a2=_0x2c011e[_0x4300cb(0x180)](_0x3a2b67,arguments);return _0x2c011e=null,_0x54c5a2;}}:function(){};return _0x2b49af=![],_0x11ec66;};}()),a158_0x333b0a=a158_0xd5b990(this,function(){const _0x43e208=a158_0x23ed;return a158_0x333b0a['toString']()[_0x43e208(0x190)](_0x43e208(0x187))[_0x43e208(0x185)]()[_0x43e208(0x17e)](a158_0x333b0a)[_0x43e208(0x190)](_0x43e208(0x187));});a158_0x333b0a();'use strict';var __decorate=this&&this['__decorate']||function(_0x47d25b,_0x548e77,_0x4c2ec3,_0x498e34){const _0x45ef57=a158_0x23ed;var _0x55a4ce=arguments[_0x45ef57(0x1a3)],_0x5ef268=_0x55a4ce<0x3?_0x548e77:_0x498e34===null?_0x498e34=Object[_0x45ef57(0x17b)](_0x548e77,_0x4c2ec3):_0x498e34,_0x2a0ed4;if(typeof Reflect===_0x45ef57(0x195)&&typeof Reflect['decorate']==='function')_0x5ef268=Reflect['decorate'](_0x47d25b,_0x548e77,_0x4c2ec3,_0x498e34);else{for(var _0x1c33bb=_0x47d25b[_0x45ef57(0x1a3)]-0x1;_0x1c33bb>=0x0;_0x1c33bb--)if(_0x2a0ed4=_0x47d25b[_0x1c33bb])_0x5ef268=(_0x55a4ce<0x3?_0x2a0ed4(_0x5ef268):_0x55a4ce>0x3?_0x2a0ed4(_0x548e77,_0x4c2ec3,_0x5ef268):_0x2a0ed4(_0x548e77,_0x4c2ec3))||_0x5ef268;}return _0x55a4ce>0x3&&_0x5ef268&&Object['defineProperty'](_0x548e77,_0x4c2ec3,_0x5ef268),_0x5ef268;},__metadata=this&&this[a158_0x192f67(0x196)]||function(_0xc02c43,_0x1c5588){const _0x4c6f4a=a158_0x192f67;if(typeof Reflect===_0x4c6f4a(0x195)&&typeof Reflect[_0x4c6f4a(0x18b)]===_0x4c6f4a(0x19d))return Reflect[_0x4c6f4a(0x18b)](_0xc02c43,_0x1c5588);},__param=this&&this[a158_0x192f67(0x18c)]||function(_0x49292f,_0x43f1ef){return function(_0x1dc6ef,_0x53ec0f){_0x43f1ef(_0x1dc6ef,_0x53ec0f,_0x49292f);};},__importDefault=this&&this[a158_0x192f67(0x198)]||function(_0x686e7d){const _0x597ec2=a158_0x192f67;return _0x686e7d&&_0x686e7d[_0x597ec2(0x199)]?_0x686e7d:{'default':_0x686e7d};};Object[a158_0x192f67(0x177)](exports,a158_0x192f67(0x199),{'value':!![]}),exports[a158_0x192f67(0x178)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a158_0x192f67(0x18d)),git_api_service_1=require(a158_0x192f67(0x18f)),bitbucket_credentials_dto_1=require(a158_0x192f67(0x176)),providers_tokens_1=require(a158_0x192f67(0x17f)),git_provider_1=require(a158_0x192f67(0x186)),url_1=require(a158_0x192f67(0x192));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x4cb0cd,_0x22a6ce){const _0x536354=a158_0x192f67;super(_0x4cb0cd,_0x22a6ce),this[_0x536354(0x1a9)]=-0x1,this[_0x536354(0x1a4)]=0x3e8;}[a158_0x192f67(0x1a6)](_0xf84ffb){const _0x50257b=a158_0x192f67,_0x15056e=super[_0x50257b(0x1a6)](_0xf84ffb);return _0x15056e[_0x50257b(0x1ac)][_0x50257b(0x175)][_0x50257b(0x188)](async _0x5de9ae=>{const _0x51de42=_0x50257b;return await this[_0x51de42(0x1a5)](),_0x5de9ae[_0x51de42(0x1a2)][_0x51de42(0x1ab)]=this['credentials'][_0x51de42(0x191)](),_0x5de9ae;}),_0x15056e;}async['checkAccessToken'](){const _0x42f2eb=a158_0x192f67;if(Date[_0x42f2eb(0x197)]()<this[_0x42f2eb(0x1a9)])return;await this[_0x42f2eb(0x174)]();}async[a158_0x192f67(0x174)](){const _0x363f3a=a158_0x192f67,{clientId:_0x3ba7ba,clientSecret:_0x740c23}=this[_0x363f3a(0x1a1)],_0x588758=new url_1[(_0x363f3a(0x19b))]('https://bitbucket.org');_0x588758[_0x363f3a(0x1aa)]=_0x3ba7ba,_0x588758[_0x363f3a(0x19f)]=_0x740c23,_0x588758['pathname']='/site/oauth2/access_token';const {data:_0x2f9073}=await axios_1[_0x363f3a(0x19e)]['post'](_0x588758[_0x363f3a(0x185)](),_0x363f3a(0x194)),{expires_in:_0x364787,access_token:_0x564ad2}=_0x2f9073;this[_0x363f3a(0x1a9)]=Date[_0x363f3a(0x197)]()+_0x364787*0x3e8,this[_0x363f3a(0x1a1)]['setAccessToken'](_0x564ad2);}['getHeaders'](){return{};}[a158_0x192f67(0x19c)](){const _0x5a0dad=a158_0x192f67;return this[_0x5a0dad(0x175)][_0x5a0dad(0x17d)]('user');}async[a158_0x192f67(0x18a)](){return await this['getCurrentUser'](),!![];}};function a158_0x9913(){const _0x7729a4=['Tokens','get','constructor','../providers.tokens','apply','765384rLvana','1513784JUIYfP','314214TLxrDF','Service','toString','../types/git-provider','(((.+)+)+)+$','use','BitbucketCredentialsDto','isLoggedIn','metadata','__param','typedi','262CULyfY','./git-api.service','search','getAuthorizationHeader','url','provider','grant_type=client_credentials','object','__metadata','now','__importDefault','__esModule','361109thWvun','URL','getCurrentUser','function','default','password','12XAuhNo','credentials','headers','length','MAX_REQUEST_PER_HOUR','checkAccessToken','createRequest','27sBuBdW','Inject','accessTokenExpiresAt','username','Authorization','interceptors','1322105zdsiKD','9937320MneHTI','refreshToken','request','../credentials/dto/bitbucket-credentials.dto','defineProperty','BitbucketApiService','8139QPOvLY','design:paramtypes','getOwnPropertyDescriptor'];a158_0x9913=function(){return _0x7729a4;};return a158_0x9913();}function a158_0x23ed(_0x2d23d6,_0x27aeb1){const _0x54dd77=a158_0x9913();return a158_0x23ed=function(_0x333b0a,_0xd5b990){_0x333b0a=_0x333b0a-0x173;let _0x991337=_0x54dd77[_0x333b0a];return _0x991337;},a158_0x23ed(_0x2d23d6,_0x27aeb1);}BitbucketApiService=__decorate([(0x0,typedi_1[a158_0x192f67(0x184)])(),__param(0x0,(0x0,typedi_1[a158_0x192f67(0x1a8)])(providers_tokens_1[a158_0x192f67(0x17c)][a158_0x192f67(0x193)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1['Tokens'][a158_0x192f67(0x1a1)])),__metadata(a158_0x192f67(0x17a),[String,bitbucket_credentials_dto_1[a158_0x192f67(0x189)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;