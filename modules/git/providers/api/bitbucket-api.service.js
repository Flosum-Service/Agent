const a169_0x1c384d=a169_0x1c2f;(function(_0x3a6e67,_0x5d6d21){const _0x5abfb0=a169_0x1c2f,_0x244262=_0x3a6e67();while(!![]){try{const _0x53143d=-parseInt(_0x5abfb0(0x11d))/0x1+parseInt(_0x5abfb0(0x136))/0x2*(parseInt(_0x5abfb0(0x125))/0x3)+-parseInt(_0x5abfb0(0x145))/0x4*(-parseInt(_0x5abfb0(0x151))/0x5)+-parseInt(_0x5abfb0(0x14f))/0x6*(-parseInt(_0x5abfb0(0x153))/0x7)+parseInt(_0x5abfb0(0x134))/0x8*(-parseInt(_0x5abfb0(0x13a))/0x9)+-parseInt(_0x5abfb0(0x130))/0xa+parseInt(_0x5abfb0(0x143))/0xb;if(_0x53143d===_0x5d6d21)break;else _0x244262['push'](_0x244262['shift']());}catch(_0x50d7a1){_0x244262['push'](_0x244262['shift']());}}}(a169_0x5f11,0x65c61));const a169_0xf980b0=(function(){let _0x18b027=!![];return function(_0x1bbfc3,_0x4eebae){const _0x3a8c0c=_0x18b027?function(){const _0xf38036=a169_0x1c2f;if(_0x4eebae){const _0x3bf92f=_0x4eebae[_0xf38036(0x154)](_0x1bbfc3,arguments);return _0x4eebae=null,_0x3bf92f;}}:function(){};return _0x18b027=![],_0x3a8c0c;};}()),a169_0x36303e=a169_0xf980b0(this,function(){const _0x3be876=a169_0x1c2f;return a169_0x36303e[_0x3be876(0x14e)]()['search'](_0x3be876(0x12d))[_0x3be876(0x14e)]()[_0x3be876(0x149)](a169_0x36303e)['search'](_0x3be876(0x12d));});a169_0x36303e();function a169_0x1c2f(_0x52858f,_0x3093c4){const _0x4b7a9f=a169_0x5f11();return a169_0x1c2f=function(_0x36303e,_0xf980b0){_0x36303e=_0x36303e-0x11d;let _0x5f116f=_0x4b7a9f[_0x36303e];return _0x5f116f;},a169_0x1c2f(_0x52858f,_0x3093c4);}'use strict';var __decorate=this&&this['__decorate']||function(_0x96da16,_0xb4dda,_0x304561,_0x10bdaf){const _0x2dc76b=a169_0x1c2f;var _0x3489d0=arguments[_0x2dc76b(0x122)],_0x55f064=_0x3489d0<0x3?_0xb4dda:_0x10bdaf===null?_0x10bdaf=Object['getOwnPropertyDescriptor'](_0xb4dda,_0x304561):_0x10bdaf,_0x1ee0a3;if(typeof Reflect===_0x2dc76b(0x127)&&typeof Reflect['decorate']===_0x2dc76b(0x128))_0x55f064=Reflect[_0x2dc76b(0x13e)](_0x96da16,_0xb4dda,_0x304561,_0x10bdaf);else{for(var _0x32712e=_0x96da16['length']-0x1;_0x32712e>=0x0;_0x32712e--)if(_0x1ee0a3=_0x96da16[_0x32712e])_0x55f064=(_0x3489d0<0x3?_0x1ee0a3(_0x55f064):_0x3489d0>0x3?_0x1ee0a3(_0xb4dda,_0x304561,_0x55f064):_0x1ee0a3(_0xb4dda,_0x304561))||_0x55f064;}return _0x3489d0>0x3&&_0x55f064&&Object[_0x2dc76b(0x152)](_0xb4dda,_0x304561,_0x55f064),_0x55f064;},__metadata=this&&this[a169_0x1c384d(0x126)]||function(_0x22f756,_0x1f076b){const _0x392285=a169_0x1c384d;if(typeof Reflect===_0x392285(0x127)&&typeof Reflect[_0x392285(0x140)]==='function')return Reflect[_0x392285(0x140)](_0x22f756,_0x1f076b);},__param=this&&this[a169_0x1c384d(0x13d)]||function(_0x5abfab,_0x554386){return function(_0x2b3f32,_0x51f4c7){_0x554386(_0x2b3f32,_0x51f4c7,_0x5abfab);};},__importDefault=this&&this[a169_0x1c384d(0x147)]||function(_0x52899f){const _0x3fd8f4=a169_0x1c384d;return _0x52899f&&_0x52899f[_0x3fd8f4(0x14c)]?_0x52899f:{'default':_0x52899f};};Object[a169_0x1c384d(0x152)](exports,'__esModule',{'value':!![]}),exports[a169_0x1c384d(0x12b)]=void 0x0;function a169_0x5f11(){const _0x16f158=['BitbucketCredentialsDto','5001vkNzZS','__metadata','object','function','MAX_REQUEST_PER_HOUR','setAccessToken','BitbucketApiService','GitApiService','(((.+)+)+)+$','URL','isLoggedIn','4243370PhPnIS','Service','credentials','checkAccessToken','1796976ybLrPS','user','846Nlitpw','Inject','../providers.tokens','request','27kXeVpb','design:paramtypes','interceptors','__param','decorate','accessTokenExpiresAt','metadata','../types/git-provider','password','6122578SIctzK','username','787956XpribC','typedi','__importDefault','getAuthorizationHeader','constructor','Authorization','provider','__esModule','get','toString','72OXjlLF','refreshToken','5ImtYxY','defineProperty','475475qBqYaH','apply','Tokens','pathname','758760hMbKMu','axios','now','getCurrentUser','https://bitbucket.org','length','grant_type=client_credentials'];a169_0x5f11=function(){return _0x16f158;};return a169_0x5f11();}const axios_1=__importDefault(require(a169_0x1c384d(0x11e))),typedi_1=require(a169_0x1c384d(0x146)),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a169_0x1c384d(0x138)),git_provider_1=require(a169_0x1c384d(0x141)),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a169_0x1c384d(0x12c)]{constructor(_0x880989,_0x1efeb2){const _0xfdba1a=a169_0x1c384d;super(_0x880989,_0x1efeb2),this['accessTokenExpiresAt']=-0x1,this[_0xfdba1a(0x129)]=0x3e8;}['createRequest'](_0x4168f3){const _0x1ea8e0=a169_0x1c384d,_0x9db417=super['createRequest'](_0x4168f3);return _0x9db417[_0x1ea8e0(0x13c)][_0x1ea8e0(0x139)]['use'](async _0x281ca7=>{const _0x3edf14=_0x1ea8e0;return await this['checkAccessToken'](),_0x281ca7['headers'][_0x3edf14(0x14a)]=this[_0x3edf14(0x132)][_0x3edf14(0x148)](),_0x281ca7;}),_0x9db417;}async[a169_0x1c384d(0x133)](){const _0x43b2d7=a169_0x1c384d;if(Date['now']()<this[_0x43b2d7(0x13f)])return;await this['refreshToken']();}async[a169_0x1c384d(0x150)](){const _0x15e0fb=a169_0x1c384d,{clientId:_0x1cd31a,clientSecret:_0x4abcdc}=this[_0x15e0fb(0x132)],_0x255048=new url_1[(_0x15e0fb(0x12e))](_0x15e0fb(0x121));_0x255048[_0x15e0fb(0x144)]=_0x1cd31a,_0x255048[_0x15e0fb(0x142)]=_0x4abcdc,_0x255048[_0x15e0fb(0x156)]='/site/oauth2/access_token';const {data:_0x4daf72}=await axios_1['default']['post'](_0x255048[_0x15e0fb(0x14e)](),_0x15e0fb(0x123)),{expires_in:_0x5ab718,access_token:_0xae19f9}=_0x4daf72;this[_0x15e0fb(0x13f)]=Date[_0x15e0fb(0x11f)]()+_0x5ab718*0x3e8,this[_0x15e0fb(0x132)][_0x15e0fb(0x12a)](_0xae19f9);}['getHeaders'](){return{};}[a169_0x1c384d(0x120)](){const _0xc1ebd3=a169_0x1c384d;return this[_0xc1ebd3(0x139)][_0xc1ebd3(0x14d)](_0xc1ebd3(0x135));}async[a169_0x1c384d(0x12f)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a169_0x1c384d(0x131)])(),__param(0x0,(0x0,typedi_1[a169_0x1c384d(0x137)])(providers_tokens_1[a169_0x1c384d(0x155)][a169_0x1c384d(0x14b)])),__param(0x1,(0x0,typedi_1[a169_0x1c384d(0x137)])(providers_tokens_1[a169_0x1c384d(0x155)][a169_0x1c384d(0x132)])),__metadata(a169_0x1c384d(0x13b),[String,bitbucket_credentials_dto_1[a169_0x1c384d(0x124)]])],BitbucketApiService),exports[a169_0x1c384d(0x12b)]=BitbucketApiService;