const a196_0x11896c=a196_0x557c;(function(_0x12b78a,_0x62a8a4){const _0x223627=a196_0x557c,_0x3970f5=_0x12b78a();while(!![]){try{const _0x1ff569=parseInt(_0x223627(0x18d))/0x1+parseInt(_0x223627(0x192))/0x2*(-parseInt(_0x223627(0x18f))/0x3)+parseInt(_0x223627(0x16f))/0x4*(-parseInt(_0x223627(0x191))/0x5)+-parseInt(_0x223627(0x16e))/0x6+parseInt(_0x223627(0x182))/0x7*(-parseInt(_0x223627(0x184))/0x8)+parseInt(_0x223627(0x1a0))/0x9*(parseInt(_0x223627(0x186))/0xa)+-parseInt(_0x223627(0x188))/0xb*(-parseInt(_0x223627(0x183))/0xc);if(_0x1ff569===_0x62a8a4)break;else _0x3970f5['push'](_0x3970f5['shift']());}catch(_0x541158){_0x3970f5['push'](_0x3970f5['shift']());}}}(a196_0x15b7,0x8e017));const a196_0x400b09=(function(){let _0x1cdb3d=!![];return function(_0x363ad0,_0x56d993){const _0x184657=_0x1cdb3d?function(){const _0x2f04bb=a196_0x557c;if(_0x56d993){const _0x628f0d=_0x56d993[_0x2f04bb(0x174)](_0x363ad0,arguments);return _0x56d993=null,_0x628f0d;}}:function(){};return _0x1cdb3d=![],_0x184657;};}()),a196_0x22d103=a196_0x400b09(this,function(){const _0x24b59a=a196_0x557c;return a196_0x22d103['toString']()[_0x24b59a(0x19d)](_0x24b59a(0x17f))[_0x24b59a(0x18b)]()[_0x24b59a(0x172)](a196_0x22d103)['search'](_0x24b59a(0x17f));});a196_0x22d103();'use strict';var __decorate=this&&this[a196_0x11896c(0x1a2)]||function(_0x46b8be,_0x2b2f51,_0x2ecae3,_0x40823e){const _0x3689d8=a196_0x11896c;var _0x172727=arguments['length'],_0x353dd4=_0x172727<0x3?_0x2b2f51:_0x40823e===null?_0x40823e=Object[_0x3689d8(0x187)](_0x2b2f51,_0x2ecae3):_0x40823e,_0xb643e4;if(typeof Reflect===_0x3689d8(0x19c)&&typeof Reflect[_0x3689d8(0x196)]===_0x3689d8(0x18e))_0x353dd4=Reflect[_0x3689d8(0x196)](_0x46b8be,_0x2b2f51,_0x2ecae3,_0x40823e);else{for(var _0x369aae=_0x46b8be['length']-0x1;_0x369aae>=0x0;_0x369aae--)if(_0xb643e4=_0x46b8be[_0x369aae])_0x353dd4=(_0x172727<0x3?_0xb643e4(_0x353dd4):_0x172727>0x3?_0xb643e4(_0x2b2f51,_0x2ecae3,_0x353dd4):_0xb643e4(_0x2b2f51,_0x2ecae3))||_0x353dd4;}return _0x172727>0x3&&_0x353dd4&&Object['defineProperty'](_0x2b2f51,_0x2ecae3,_0x353dd4),_0x353dd4;},__metadata=this&&this[a196_0x11896c(0x16a)]||function(_0x4bae07,_0x4b1f1c){const _0x3662b0=a196_0x11896c;if(typeof Reflect===_0x3662b0(0x19c)&&typeof Reflect[_0x3662b0(0x189)]===_0x3662b0(0x18e))return Reflect[_0x3662b0(0x189)](_0x4bae07,_0x4b1f1c);},__param=this&&this['__param']||function(_0x27b500,_0x14bb20){return function(_0x23aa53,_0x3dd3d2){_0x14bb20(_0x23aa53,_0x3dd3d2,_0x27b500);};},__importDefault=this&&this[a196_0x11896c(0x190)]||function(_0x2476d2){return _0x2476d2&&_0x2476d2['__esModule']?_0x2476d2:{'default':_0x2476d2};};function a196_0x557c(_0x5902fb,_0x2f77d2){const _0x427d4b=a196_0x15b7();return a196_0x557c=function(_0x22d103,_0x400b09){_0x22d103=_0x22d103-0x169;let _0x15b7ce=_0x427d4b[_0x22d103];return _0x15b7ce;},a196_0x557c(_0x5902fb,_0x2f77d2);}Object[a196_0x11896c(0x194)](exports,a196_0x11896c(0x197),{'value':!![]}),exports[a196_0x11896c(0x1a1)]=void 0x0;const axios_1=__importDefault(require(a196_0x11896c(0x17d))),typedi_1=require(a196_0x11896c(0x195)),git_api_service_1=require(a196_0x11896c(0x19e)),bitbucket_credentials_dto_1=require(a196_0x11896c(0x198)),providers_tokens_1=require(a196_0x11896c(0x169)),git_provider_1=require('../types/git-provider'),url_1=require('url');function a196_0x15b7(){const _0x14b88c=['axios','Service','(((.+)+)+)+$','credentials','accessTokenExpiresAt','112kiZhCm','16383012VcnOEv','357296wMAujP','pathname','1196930mKSCEH','getOwnPropertyDescriptor','11xytzzc','metadata','user','toString','checkAccessToken','736563aLckeC','function','57243EEMFcK','__importDefault','85kquUnY','34qcsMXK','getCurrentUser','defineProperty','typedi','decorate','__esModule','../credentials/dto/bitbucket-credentials.dto','isLoggedIn','Authorization','default','object','search','./git-api.service','provider','63VBmeOb','BitbucketApiService','__decorate','../providers.tokens','__metadata','createRequest','request','username','5587932vQDsOj','91228DNiiyp','refreshToken','post','constructor','https://bitbucket.org','apply','Inject','now','Tokens','BitbucketCredentialsDto','getAuthorizationHeader','password','headers','MAX_REQUEST_PER_HOUR'];a196_0x15b7=function(){return _0x14b88c;};return a196_0x15b7();}let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x1d5766,_0xf376de){const _0x35e579=a196_0x11896c;super(_0x1d5766,_0xf376de),this['accessTokenExpiresAt']=-0x1,this[_0x35e579(0x17c)]=0x3e8;}[a196_0x11896c(0x16b)](_0xfb347f){const _0x5b4745=a196_0x11896c,_0x44bd83=super[_0x5b4745(0x16b)](_0xfb347f);return _0x44bd83['interceptors'][_0x5b4745(0x16c)]['use'](async _0x50e4c6=>{const _0x5a19b9=_0x5b4745;return await this[_0x5a19b9(0x18c)](),_0x50e4c6[_0x5a19b9(0x17b)][_0x5a19b9(0x19a)]=this['credentials'][_0x5a19b9(0x179)](),_0x50e4c6;}),_0x44bd83;}async[a196_0x11896c(0x18c)](){const _0x154c8a=a196_0x11896c;if(Date[_0x154c8a(0x176)]()<this[_0x154c8a(0x181)])return;await this[_0x154c8a(0x170)]();}async[a196_0x11896c(0x170)](){const _0xa7f212=a196_0x11896c,{clientId:_0x2c233b,clientSecret:_0x23ded3}=this[_0xa7f212(0x180)],_0x2d44da=new url_1['URL'](_0xa7f212(0x173));_0x2d44da[_0xa7f212(0x16d)]=_0x2c233b,_0x2d44da[_0xa7f212(0x17a)]=_0x23ded3,_0x2d44da[_0xa7f212(0x185)]='/site/oauth2/access_token';const {data:_0x25c558}=await axios_1[_0xa7f212(0x19b)][_0xa7f212(0x171)](_0x2d44da[_0xa7f212(0x18b)](),'grant_type=client_credentials'),{expires_in:_0x579315,access_token:_0x557672}=_0x25c558;this[_0xa7f212(0x181)]=Date['now']()+_0x579315*0x3e8,this['credentials']['setAccessToken'](_0x557672);}['getHeaders'](){return{};}[a196_0x11896c(0x193)](){const _0x1483bb=a196_0x11896c;return this['request']['get'](_0x1483bb(0x18a));}async[a196_0x11896c(0x199)](){const _0x210f81=a196_0x11896c;return await this[_0x210f81(0x193)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a196_0x11896c(0x17e)])(),__param(0x0,(0x0,typedi_1[a196_0x11896c(0x175)])(providers_tokens_1[a196_0x11896c(0x177)][a196_0x11896c(0x19f)])),__param(0x1,(0x0,typedi_1[a196_0x11896c(0x175)])(providers_tokens_1['Tokens'][a196_0x11896c(0x180)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a196_0x11896c(0x178)]])],BitbucketApiService),exports[a196_0x11896c(0x1a1)]=BitbucketApiService;