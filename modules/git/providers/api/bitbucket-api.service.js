const a125_0x5674e6=a125_0x5648;(function(_0x4da70d,_0xa446dd){const _0x13a06d=a125_0x5648,_0xa5eb00=_0x4da70d();while(!![]){try{const _0x22fa5d=-parseInt(_0x13a06d(0xf5))/0x1*(-parseInt(_0x13a06d(0x101))/0x2)+-parseInt(_0x13a06d(0xd8))/0x3*(-parseInt(_0x13a06d(0xeb))/0x4)+parseInt(_0x13a06d(0xfd))/0x5+-parseInt(_0x13a06d(0xe6))/0x6+parseInt(_0x13a06d(0xfa))/0x7*(parseInt(_0x13a06d(0xdf))/0x8)+parseInt(_0x13a06d(0xd9))/0x9+-parseInt(_0x13a06d(0xd2))/0xa;if(_0x22fa5d===_0xa446dd)break;else _0xa5eb00['push'](_0xa5eb00['shift']());}catch(_0x587eb0){_0xa5eb00['push'](_0xa5eb00['shift']());}}}(a125_0x171a,0xbca42));function a125_0x5648(_0x485493,_0x14ffea){const _0x2c8f8e=a125_0x171a();return a125_0x5648=function(_0x57e575,_0x37596a){_0x57e575=_0x57e575-0xca;let _0x171ab3=_0x2c8f8e[_0x57e575];return _0x171ab3;},a125_0x5648(_0x485493,_0x14ffea);}const a125_0x37596a=(function(){let _0x1030e3=!![];return function(_0x4ac7d2,_0x9f8c03){const _0x1c0f02=_0x1030e3?function(){const _0x14fb96=a125_0x5648;if(_0x9f8c03){const _0x207238=_0x9f8c03[_0x14fb96(0xf2)](_0x4ac7d2,arguments);return _0x9f8c03=null,_0x207238;}}:function(){};return _0x1030e3=![],_0x1c0f02;};}()),a125_0x57e575=a125_0x37596a(this,function(){const _0x5b51d8=a125_0x5648;return a125_0x57e575[_0x5b51d8(0xe1)]()[_0x5b51d8(0xee)](_0x5b51d8(0xde))[_0x5b51d8(0xe1)]()[_0x5b51d8(0xef)](a125_0x57e575)[_0x5b51d8(0xee)](_0x5b51d8(0xde));});a125_0x57e575();'use strict';var __decorate=this&&this[a125_0x5674e6(0xfb)]||function(_0x33335c,_0x305a0a,_0xbb8efb,_0x3a4f1c){const _0x556dc7=a125_0x5674e6;var _0x4cd3ec=arguments[_0x556dc7(0xd0)],_0x2f1db2=_0x4cd3ec<0x3?_0x305a0a:_0x3a4f1c===null?_0x3a4f1c=Object[_0x556dc7(0xf1)](_0x305a0a,_0xbb8efb):_0x3a4f1c,_0x351f3e;if(typeof Reflect===_0x556dc7(0x102)&&typeof Reflect[_0x556dc7(0xf7)]===_0x556dc7(0xcf))_0x2f1db2=Reflect[_0x556dc7(0xf7)](_0x33335c,_0x305a0a,_0xbb8efb,_0x3a4f1c);else{for(var _0x1bc483=_0x33335c[_0x556dc7(0xd0)]-0x1;_0x1bc483>=0x0;_0x1bc483--)if(_0x351f3e=_0x33335c[_0x1bc483])_0x2f1db2=(_0x4cd3ec<0x3?_0x351f3e(_0x2f1db2):_0x4cd3ec>0x3?_0x351f3e(_0x305a0a,_0xbb8efb,_0x2f1db2):_0x351f3e(_0x305a0a,_0xbb8efb))||_0x2f1db2;}return _0x4cd3ec>0x3&&_0x2f1db2&&Object[_0x556dc7(0xcc)](_0x305a0a,_0xbb8efb,_0x2f1db2),_0x2f1db2;},__metadata=this&&this[a125_0x5674e6(0xdc)]||function(_0x4bcc20,_0x1a4c7b){const _0x34ffaf=a125_0x5674e6;if(typeof Reflect==='object'&&typeof Reflect[_0x34ffaf(0xe5)]===_0x34ffaf(0xcf))return Reflect[_0x34ffaf(0xe5)](_0x4bcc20,_0x1a4c7b);},__param=this&&this[a125_0x5674e6(0xcb)]||function(_0x4d0df4,_0x134f77){return function(_0x39df0f,_0xec8412){_0x134f77(_0x39df0f,_0xec8412,_0x4d0df4);};},__importDefault=this&&this['__importDefault']||function(_0x2797ed){return _0x2797ed&&_0x2797ed['__esModule']?_0x2797ed:{'default':_0x2797ed};};function a125_0x171a(){const _0x235242=['search','constructor','get','getOwnPropertyDescriptor','apply','createRequest','grant_type=client_credentials','710809BwWpdD','interceptors','decorate','getAuthorizationHeader','typedi','8611813dIEvjS','__decorate','accessTokenExpiresAt','4740250lBaxTF','./git-api.service','URL','BitbucketApiService','2TzWuqJ','object','username','url','__param','defineProperty','design:paramtypes','use','function','length','../credentials/dto/bitbucket-credentials.dto','29204980esUaLX','BitbucketCredentialsDto','headers','https://bitbucket.org','Inject','now','24477cMdIAB','9292527CAxAwj','password','request','__metadata','provider','(((.+)+)+)+$','8WOWuVo','credentials','toString','Tokens','checkAccessToken','MAX_REQUEST_PER_HOUR','metadata','8273208BHuCRr','axios','post','Service','user','564jfXxEN','default','getCurrentUser'];a125_0x171a=function(){return _0x235242;};return a125_0x171a();}Object[a125_0x5674e6(0xcc)](exports,'__esModule',{'value':!![]}),exports[a125_0x5674e6(0x100)]=void 0x0;const axios_1=__importDefault(require(a125_0x5674e6(0xe7))),typedi_1=require(a125_0x5674e6(0xf9)),git_api_service_1=require(a125_0x5674e6(0xfe)),bitbucket_credentials_dto_1=require(a125_0x5674e6(0xd1)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require('../types/git-provider'),url_1=require(a125_0x5674e6(0xca));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x5b4c3d,_0x5e333e){const _0x1f9d11=a125_0x5674e6;super(_0x5b4c3d,_0x5e333e),this[_0x1f9d11(0xfc)]=-0x1,this[_0x1f9d11(0xe4)]=0x3e8;}[a125_0x5674e6(0xf3)](_0x207421){const _0x551a0b=a125_0x5674e6,_0x2a4487=super[_0x551a0b(0xf3)](_0x207421);return _0x2a4487[_0x551a0b(0xf6)][_0x551a0b(0xdb)][_0x551a0b(0xce)](async _0x1456cd=>{const _0x44593b=_0x551a0b;return await this[_0x44593b(0xe3)](),_0x1456cd['headers']||(_0x1456cd['headers']={}),_0x1456cd[_0x44593b(0xd4)]['Authorization']=this[_0x44593b(0xe0)][_0x44593b(0xf8)](),_0x1456cd;}),_0x2a4487;}async[a125_0x5674e6(0xe3)](){const _0x3d7dc3=a125_0x5674e6;if(Date[_0x3d7dc3(0xd7)]()<this['accessTokenExpiresAt'])return;await this['refreshToken']();}async['refreshToken'](){const _0x59e668=a125_0x5674e6,{clientId:_0xfb1e37,clientSecret:_0x33376c}=this['credentials'],_0x28e918=new url_1[(_0x59e668(0xff))](_0x59e668(0xd5));_0x28e918[_0x59e668(0x103)]=_0xfb1e37,_0x28e918[_0x59e668(0xda)]=_0x33376c,_0x28e918['pathname']='/site/oauth2/access_token';const {data:_0x13320d}=await axios_1[_0x59e668(0xec)][_0x59e668(0xe8)](_0x28e918[_0x59e668(0xe1)](),_0x59e668(0xf4)),{expires_in:_0x4caa48,access_token:_0x321503}=_0x13320d;this[_0x59e668(0xfc)]=Date[_0x59e668(0xd7)]()+_0x4caa48*0x3e8,this[_0x59e668(0xe0)]['setAccessToken'](_0x321503);}['getHeaders'](){return{};}[a125_0x5674e6(0xed)](){const _0x247af8=a125_0x5674e6;return this[_0x247af8(0xdb)][_0x247af8(0xf0)](_0x247af8(0xea));}async['isLoggedIn'](){const _0x44620a=a125_0x5674e6;return await this[_0x44620a(0xed)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a125_0x5674e6(0xe9)])(),__param(0x0,(0x0,typedi_1[a125_0x5674e6(0xd6)])(providers_tokens_1[a125_0x5674e6(0xe2)][a125_0x5674e6(0xdd)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a125_0x5674e6(0xe2)][a125_0x5674e6(0xe0)])),__metadata(a125_0x5674e6(0xcd),[String,bitbucket_credentials_dto_1[a125_0x5674e6(0xd3)]])],BitbucketApiService),exports[a125_0x5674e6(0x100)]=BitbucketApiService;