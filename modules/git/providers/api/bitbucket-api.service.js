const a196_0x5bcd68=a196_0x5054;(function(_0x9eea48,_0x3f7f39){const _0x466f3b=a196_0x5054,_0x1297c4=_0x9eea48();while(!![]){try{const _0x38331c=parseInt(_0x466f3b(0x1e0))/0x1+parseInt(_0x466f3b(0x1db))/0x2+parseInt(_0x466f3b(0x1ce))/0x3+parseInt(_0x466f3b(0x1e8))/0x4*(-parseInt(_0x466f3b(0x1ef))/0x5)+-parseInt(_0x466f3b(0x1d3))/0x6*(-parseInt(_0x466f3b(0x1fb))/0x7)+-parseInt(_0x466f3b(0x1d2))/0x8+-parseInt(_0x466f3b(0x1cc))/0x9;if(_0x38331c===_0x3f7f39)break;else _0x1297c4['push'](_0x1297c4['shift']());}catch(_0x211087){_0x1297c4['push'](_0x1297c4['shift']());}}}(a196_0x9c0c,0x6e52b));const a196_0x38b67b=(function(){let _0x4dc76a=!![];return function(_0x3e20ad,_0x3b05ae){const _0x1f74fc=_0x4dc76a?function(){if(_0x3b05ae){const _0x220ad4=_0x3b05ae['apply'](_0x3e20ad,arguments);return _0x3b05ae=null,_0x220ad4;}}:function(){};return _0x4dc76a=![],_0x1f74fc;};}()),a196_0x163a99=a196_0x38b67b(this,function(){const _0x4f6ce5=a196_0x5054;return a196_0x163a99[_0x4f6ce5(0x1d4)]()[_0x4f6ce5(0x1d9)](_0x4f6ce5(0x1f7))[_0x4f6ce5(0x1d4)]()[_0x4f6ce5(0x1d1)](a196_0x163a99)[_0x4f6ce5(0x1d9)](_0x4f6ce5(0x1f7));});function a196_0x9c0c(){const _0x5404db=['Authorization','grant_type=client_credentials','decorate','BitbucketApiService','../credentials/dto/bitbucket-credentials.dto','url','5090jtrAPe','URL','createRequest','MAX_REQUEST_PER_HOUR','defineProperty','metadata','__metadata','refreshToken','(((.+)+)+)+$','../types/git-provider','getAuthorizationHeader','checkAccessToken','196546DcIVAm','typedi','post','/site/oauth2/access_token','default','object','__param','https://bitbucket.org','Tokens','5132547BjTVLL','./git-api.service','1446474DiNFrc','Inject','length','constructor','1590984TPpSaP','78YGzTYw','toString','headers','password','accessTokenExpiresAt','__esModule','search','get','1122858xVVSNr','now','Service','axios','BitbucketCredentialsDto','541326ULriVS','getCurrentUser','__decorate','username','../providers.tokens','getOwnPropertyDescriptor','design:paramtypes','credentials','2864TOCJBJ'];a196_0x9c0c=function(){return _0x5404db;};return a196_0x9c0c();}a196_0x163a99();'use strict';var __decorate=this&&this[a196_0x5bcd68(0x1e2)]||function(_0xfa530,_0x358e01,_0x4d32f1,_0x36b02d){const _0x45eddf=a196_0x5bcd68;var _0x153b6c=arguments[_0x45eddf(0x1d0)],_0x72d4b4=_0x153b6c<0x3?_0x358e01:_0x36b02d===null?_0x36b02d=Object[_0x45eddf(0x1e5)](_0x358e01,_0x4d32f1):_0x36b02d,_0x4cc1ca;if(typeof Reflect===_0x45eddf(0x1c8)&&typeof Reflect[_0x45eddf(0x1eb)]==='function')_0x72d4b4=Reflect[_0x45eddf(0x1eb)](_0xfa530,_0x358e01,_0x4d32f1,_0x36b02d);else{for(var _0x5f1c56=_0xfa530[_0x45eddf(0x1d0)]-0x1;_0x5f1c56>=0x0;_0x5f1c56--)if(_0x4cc1ca=_0xfa530[_0x5f1c56])_0x72d4b4=(_0x153b6c<0x3?_0x4cc1ca(_0x72d4b4):_0x153b6c>0x3?_0x4cc1ca(_0x358e01,_0x4d32f1,_0x72d4b4):_0x4cc1ca(_0x358e01,_0x4d32f1))||_0x72d4b4;}return _0x153b6c>0x3&&_0x72d4b4&&Object[_0x45eddf(0x1f3)](_0x358e01,_0x4d32f1,_0x72d4b4),_0x72d4b4;},__metadata=this&&this[a196_0x5bcd68(0x1f5)]||function(_0x5e5343,_0x49f6aa){const _0x4776cb=a196_0x5bcd68;if(typeof Reflect===_0x4776cb(0x1c8)&&typeof Reflect[_0x4776cb(0x1f4)]==='function')return Reflect[_0x4776cb(0x1f4)](_0x5e5343,_0x49f6aa);},__param=this&&this[a196_0x5bcd68(0x1c9)]||function(_0x37f5cc,_0x3198a0){return function(_0xe5c877,_0x5632ff){_0x3198a0(_0xe5c877,_0x5632ff,_0x37f5cc);};},__importDefault=this&&this['__importDefault']||function(_0x4907cb){const _0x243dfa=a196_0x5bcd68;return _0x4907cb&&_0x4907cb[_0x243dfa(0x1d8)]?_0x4907cb:{'default':_0x4907cb};};Object[a196_0x5bcd68(0x1f3)](exports,a196_0x5bcd68(0x1d8),{'value':!![]}),exports[a196_0x5bcd68(0x1ec)]=void 0x0;const axios_1=__importDefault(require(a196_0x5bcd68(0x1de))),typedi_1=require(a196_0x5bcd68(0x1fc)),git_api_service_1=require(a196_0x5bcd68(0x1cd)),bitbucket_credentials_dto_1=require(a196_0x5bcd68(0x1ed)),providers_tokens_1=require(a196_0x5bcd68(0x1e4)),git_provider_1=require(a196_0x5bcd68(0x1f8)),url_1=require(a196_0x5bcd68(0x1ee));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x177e2e,_0x770a2a){const _0x3ee9a1=a196_0x5bcd68;super(_0x177e2e,_0x770a2a),this['accessTokenExpiresAt']=-0x1,this[_0x3ee9a1(0x1f2)]=0x3e8;}['createRequest'](_0x1b3429){const _0x175867=a196_0x5bcd68,_0x43bcca=super[_0x175867(0x1f1)](_0x1b3429);return _0x43bcca['interceptors']['request']['use'](async _0x15280a=>{const _0x43c2b0=_0x175867;return await this['checkAccessToken'](),_0x15280a[_0x43c2b0(0x1d5)][_0x43c2b0(0x1e9)]=this[_0x43c2b0(0x1e7)][_0x43c2b0(0x1f9)](),_0x15280a;}),_0x43bcca;}async[a196_0x5bcd68(0x1fa)](){const _0x1da4c8=a196_0x5bcd68;if(Date[_0x1da4c8(0x1dc)]()<this[_0x1da4c8(0x1d7)])return;await this[_0x1da4c8(0x1f6)]();}async['refreshToken'](){const _0x51382f=a196_0x5bcd68,{clientId:_0x5bac8a,clientSecret:_0x3e7cd0}=this[_0x51382f(0x1e7)],_0xc62ed=new url_1[(_0x51382f(0x1f0))](_0x51382f(0x1ca));_0xc62ed[_0x51382f(0x1e3)]=_0x5bac8a,_0xc62ed[_0x51382f(0x1d6)]=_0x3e7cd0,_0xc62ed['pathname']=_0x51382f(0x1fe);const {data:_0x2b0b39}=await axios_1[_0x51382f(0x1ff)][_0x51382f(0x1fd)](_0xc62ed[_0x51382f(0x1d4)](),_0x51382f(0x1ea)),{expires_in:_0x1eee58,access_token:_0x395711}=_0x2b0b39;this[_0x51382f(0x1d7)]=Date['now']()+_0x1eee58*0x3e8,this[_0x51382f(0x1e7)]['setAccessToken'](_0x395711);}['getHeaders'](){return{};}[a196_0x5bcd68(0x1e1)](){const _0x523912=a196_0x5bcd68;return this['request'][_0x523912(0x1da)]('user');}async['isLoggedIn'](){return await this['getCurrentUser'](),!![];}};function a196_0x5054(_0x15d413,_0x66bb7f){const _0x18523c=a196_0x9c0c();return a196_0x5054=function(_0x163a99,_0x38b67b){_0x163a99=_0x163a99-0x1c8;let _0x9c0ce9=_0x18523c[_0x163a99];return _0x9c0ce9;},a196_0x5054(_0x15d413,_0x66bb7f);}BitbucketApiService=__decorate([(0x0,typedi_1[a196_0x5bcd68(0x1dd)])(),__param(0x0,(0x0,typedi_1[a196_0x5bcd68(0x1cf)])(providers_tokens_1['Tokens']['provider'])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a196_0x5bcd68(0x1cb)][a196_0x5bcd68(0x1e7)])),__metadata(a196_0x5bcd68(0x1e6),[String,bitbucket_credentials_dto_1[a196_0x5bcd68(0x1df)]])],BitbucketApiService),exports[a196_0x5bcd68(0x1ec)]=BitbucketApiService;