const a163_0x524bbe=a163_0x562c;(function(_0x5c48d8,_0xd35fbb){const _0x25f134=a163_0x562c,_0x346f23=_0x5c48d8();while(!![]){try{const _0x2a7788=parseInt(_0x25f134(0x158))/0x1*(parseInt(_0x25f134(0x142))/0x2)+parseInt(_0x25f134(0x172))/0x3+parseInt(_0x25f134(0x173))/0x4+parseInt(_0x25f134(0x148))/0x5*(-parseInt(_0x25f134(0x177))/0x6)+-parseInt(_0x25f134(0x143))/0x7+parseInt(_0x25f134(0x156))/0x8*(parseInt(_0x25f134(0x163))/0x9)+-parseInt(_0x25f134(0x157))/0xa;if(_0x2a7788===_0xd35fbb)break;else _0x346f23['push'](_0x346f23['shift']());}catch(_0x2a0148){_0x346f23['push'](_0x346f23['shift']());}}}(a163_0x44cc,0xeaf97));const a163_0x3394ad=(function(){let _0x5ac01e=!![];return function(_0x2c283d,_0x472f2b){const _0x142787=_0x5ac01e?function(){const _0x593f61=a163_0x562c;if(_0x472f2b){const _0x46751e=_0x472f2b[_0x593f61(0x165)](_0x2c283d,arguments);return _0x472f2b=null,_0x46751e;}}:function(){};return _0x5ac01e=![],_0x142787;};}()),a163_0x5173b6=a163_0x3394ad(this,function(){const _0x34da36=a163_0x562c;return a163_0x5173b6[_0x34da36(0x169)]()[_0x34da36(0x146)](_0x34da36(0x155))[_0x34da36(0x169)]()['constructor'](a163_0x5173b6)[_0x34da36(0x146)]('(((.+)+)+)+$');});a163_0x5173b6();'use strict';var __decorate=this&&this[a163_0x524bbe(0x178)]||function(_0x2cfe81,_0x41b636,_0x196441,_0x22f1ce){const _0x50c057=a163_0x524bbe;var _0x7454f5=arguments['length'],_0x44d6ef=_0x7454f5<0x3?_0x41b636:_0x22f1ce===null?_0x22f1ce=Object[_0x50c057(0x15f)](_0x41b636,_0x196441):_0x22f1ce,_0x59ab43;if(typeof Reflect===_0x50c057(0x164)&&typeof Reflect[_0x50c057(0x14f)]==='function')_0x44d6ef=Reflect[_0x50c057(0x14f)](_0x2cfe81,_0x41b636,_0x196441,_0x22f1ce);else{for(var _0x50dbbd=_0x2cfe81[_0x50c057(0x171)]-0x1;_0x50dbbd>=0x0;_0x50dbbd--)if(_0x59ab43=_0x2cfe81[_0x50dbbd])_0x44d6ef=(_0x7454f5<0x3?_0x59ab43(_0x44d6ef):_0x7454f5>0x3?_0x59ab43(_0x41b636,_0x196441,_0x44d6ef):_0x59ab43(_0x41b636,_0x196441))||_0x44d6ef;}return _0x7454f5>0x3&&_0x44d6ef&&Object[_0x50c057(0x16d)](_0x41b636,_0x196441,_0x44d6ef),_0x44d6ef;},__metadata=this&&this[a163_0x524bbe(0x15c)]||function(_0x5ab750,_0x5b66cf){const _0x3e368b=a163_0x524bbe;if(typeof Reflect===_0x3e368b(0x164)&&typeof Reflect[_0x3e368b(0x15a)]==='function')return Reflect[_0x3e368b(0x15a)](_0x5ab750,_0x5b66cf);},__param=this&&this[a163_0x524bbe(0x153)]||function(_0xa321fe,_0x59452a){return function(_0x1fb5a6,_0x3584a1){_0x59452a(_0x1fb5a6,_0x3584a1,_0xa321fe);};},__importDefault=this&&this[a163_0x524bbe(0x13e)]||function(_0x484296){const _0x5845e5=a163_0x524bbe;return _0x484296&&_0x484296[_0x5845e5(0x16a)]?_0x484296:{'default':_0x484296};};Object[a163_0x524bbe(0x16d)](exports,'__esModule',{'value':!![]}),exports[a163_0x524bbe(0x162)]=void 0x0;const axios_1=__importDefault(require(a163_0x524bbe(0x16c))),typedi_1=require('typedi'),git_api_service_1=require(a163_0x524bbe(0x15b)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a163_0x524bbe(0x154)),url_1=require(a163_0x524bbe(0x141));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x524bbe(0x160)]{constructor(_0x470469,_0xb00799){const _0x2e41e1=a163_0x524bbe;super(_0x470469,_0xb00799),this[_0x2e41e1(0x144)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a163_0x524bbe(0x14a)](_0x2d2245){const _0x266ab8=a163_0x524bbe,_0x58ea3f=super[_0x266ab8(0x14a)](_0x2d2245);return _0x58ea3f[_0x266ab8(0x14b)]['request']['use'](async _0xa4da0b=>{const _0x43b83d=_0x266ab8;return await this[_0x43b83d(0x174)](),_0xa4da0b[_0x43b83d(0x170)][_0x43b83d(0x16e)]=this[_0x43b83d(0x14d)][_0x43b83d(0x168)](),_0xa4da0b;}),_0x58ea3f;}async[a163_0x524bbe(0x174)](){const _0x56d4bb=a163_0x524bbe;if(Date[_0x56d4bb(0x15e)]()<this['accessTokenExpiresAt'])return;await this['refreshToken']();}async[a163_0x524bbe(0x167)](){const _0x5dda51=a163_0x524bbe,{clientId:_0x7c25e2,clientSecret:_0x2a1619}=this[_0x5dda51(0x14d)],_0x40c117=new url_1['URL'](_0x5dda51(0x150));_0x40c117[_0x5dda51(0x147)]=_0x7c25e2,_0x40c117[_0x5dda51(0x166)]=_0x2a1619,_0x40c117[_0x5dda51(0x14e)]=_0x5dda51(0x15d);const {data:_0x408c17}=await axios_1[_0x5dda51(0x176)]['post'](_0x40c117[_0x5dda51(0x169)](),'grant_type=client_credentials'),{expires_in:_0x19db6c,access_token:_0x37fb90}=_0x408c17;this[_0x5dda51(0x144)]=Date[_0x5dda51(0x15e)]()+_0x19db6c*0x3e8,this['credentials'][_0x5dda51(0x152)](_0x37fb90);}[a163_0x524bbe(0x149)](){return{};}['getCurrentUser'](){const _0x1ced16=a163_0x524bbe;return this['request'][_0x1ced16(0x145)](_0x1ced16(0x161));}async[a163_0x524bbe(0x16f)](){const _0x23a766=a163_0x524bbe;return await this[_0x23a766(0x140)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a163_0x524bbe(0x151)])(),__param(0x0,(0x0,typedi_1[a163_0x524bbe(0x175)])(providers_tokens_1[a163_0x524bbe(0x13f)][a163_0x524bbe(0x16b)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a163_0x524bbe(0x13f)]['credentials'])),__metadata(a163_0x524bbe(0x159),[String,bitbucket_credentials_dto_1[a163_0x524bbe(0x14c)]])],BitbucketApiService),exports[a163_0x524bbe(0x162)]=BitbucketApiService;function a163_0x562c(_0xe1f86d,_0x2c7279){const _0x305a8a=a163_0x44cc();return a163_0x562c=function(_0x5173b6,_0x3394ad){_0x5173b6=_0x5173b6-0x13e;let _0x44cc02=_0x305a8a[_0x5173b6];return _0x44cc02;},a163_0x562c(_0xe1f86d,_0x2c7279);}function a163_0x44cc(){const _0x539b18=['https://bitbucket.org','Service','setAccessToken','__param','../types/git-provider','(((.+)+)+)+$','8EuXBUJ','6478700BkmrhH','4qQJHkr','design:paramtypes','metadata','./git-api.service','__metadata','/site/oauth2/access_token','now','getOwnPropertyDescriptor','GitApiService','user','BitbucketApiService','5073687iLcvRI','object','apply','password','refreshToken','getAuthorizationHeader','toString','__esModule','provider','axios','defineProperty','Authorization','isLoggedIn','headers','length','2241126HzUzwx','7074428yydvbg','checkAccessToken','Inject','default','18SmCShB','__decorate','__importDefault','Tokens','getCurrentUser','url','192226hieyFN','4222400MYrQLD','accessTokenExpiresAt','get','search','username','2083865kRRKdm','getHeaders','createRequest','interceptors','BitbucketCredentialsDto','credentials','pathname','decorate'];a163_0x44cc=function(){return _0x539b18;};return a163_0x44cc();}