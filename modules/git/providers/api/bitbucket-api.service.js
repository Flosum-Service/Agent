const a194_0x5150b3=a194_0x2c0b;function a194_0x204d(){const _0x5b6df1=['username','getOwnPropertyDescriptor','/site/oauth2/access_token','769966VXsYgd','accessTokenExpiresAt','../providers.tokens','13899042jopuKY','design:paramtypes','__param','https://bitbucket.org','get','6mKcUXB','checkAccessToken','metadata','__decorate','__esModule','apply','Tokens','default','getAuthorizationHeader','3554467rMbJFd','Authorization','(((.+)+)+)+$','request','function','post','pathname','refreshToken','password','../credentials/dto/bitbucket-credentials.dto','__metadata','credentials','5262024xIdjWz','4278035DyyAJu','interceptors','toString','url','__importDefault','1125668zfBxsd','object','GitApiService','BitbucketCredentialsDto','createRequest','../types/git-provider','./git-api.service','decorate','provider','Service','now','MAX_REQUEST_PER_HOUR','1211728YbeiXZ','URL','12SYWxrP','length','search','grant_type=client_credentials','getCurrentUser','headers','getHeaders','defineProperty','axios','setAccessToken','BitbucketApiService'];a194_0x204d=function(){return _0x5b6df1;};return a194_0x204d();}(function(_0x5713bf,_0x3119c5){const _0x529a3f=a194_0x2c0b,_0x17cc3e=_0x5713bf();while(!![]){try{const _0xe52aa1=parseInt(_0x529a3f(0xc3))/0x1+parseInt(_0x529a3f(0xf2))/0x2+-parseInt(_0x529a3f(0xf4))/0x3*(-parseInt(_0x529a3f(0xe6))/0x4)+parseInt(_0x529a3f(0xe1))/0x5+parseInt(_0x529a3f(0xcb))/0x6*(-parseInt(_0x529a3f(0xd4))/0x7)+-parseInt(_0x529a3f(0xe0))/0x8+-parseInt(_0x529a3f(0xc6))/0x9;if(_0xe52aa1===_0x3119c5)break;else _0x17cc3e['push'](_0x17cc3e['shift']());}catch(_0x22a94f){_0x17cc3e['push'](_0x17cc3e['shift']());}}}(a194_0x204d,0x9e041));const a194_0x4df1dc=(function(){let _0x1d4fb7=!![];return function(_0x4b9c0b,_0x97e11b){const _0x24cecc=_0x1d4fb7?function(){const _0x377139=a194_0x2c0b;if(_0x97e11b){const _0x1baa64=_0x97e11b[_0x377139(0xd0)](_0x4b9c0b,arguments);return _0x97e11b=null,_0x1baa64;}}:function(){};return _0x1d4fb7=![],_0x24cecc;};}()),a194_0x236628=a194_0x4df1dc(this,function(){const _0xe72673=a194_0x2c0b;return a194_0x236628['toString']()[_0xe72673(0xb7)](_0xe72673(0xd6))[_0xe72673(0xe3)]()['constructor'](a194_0x236628)[_0xe72673(0xb7)](_0xe72673(0xd6));});a194_0x236628();'use strict';var __decorate=this&&this[a194_0x5150b3(0xce)]||function(_0x26c1f4,_0xca729c,_0x260f92,_0x223e3c){const _0x213fe6=a194_0x5150b3;var _0x1d379d=arguments[_0x213fe6(0xf5)],_0x35fc48=_0x1d379d<0x3?_0xca729c:_0x223e3c===null?_0x223e3c=Object[_0x213fe6(0xc1)](_0xca729c,_0x260f92):_0x223e3c,_0x59038f;if(typeof Reflect===_0x213fe6(0xe7)&&typeof Reflect[_0x213fe6(0xed)]===_0x213fe6(0xd8))_0x35fc48=Reflect[_0x213fe6(0xed)](_0x26c1f4,_0xca729c,_0x260f92,_0x223e3c);else{for(var _0x21896c=_0x26c1f4[_0x213fe6(0xf5)]-0x1;_0x21896c>=0x0;_0x21896c--)if(_0x59038f=_0x26c1f4[_0x21896c])_0x35fc48=(_0x1d379d<0x3?_0x59038f(_0x35fc48):_0x1d379d>0x3?_0x59038f(_0xca729c,_0x260f92,_0x35fc48):_0x59038f(_0xca729c,_0x260f92))||_0x35fc48;}return _0x1d379d>0x3&&_0x35fc48&&Object['defineProperty'](_0xca729c,_0x260f92,_0x35fc48),_0x35fc48;},__metadata=this&&this[a194_0x5150b3(0xde)]||function(_0x3430f8,_0x5757dd){const _0x2e8b45=a194_0x5150b3;if(typeof Reflect===_0x2e8b45(0xe7)&&typeof Reflect[_0x2e8b45(0xcd)]==='function')return Reflect[_0x2e8b45(0xcd)](_0x3430f8,_0x5757dd);},__param=this&&this[a194_0x5150b3(0xc8)]||function(_0x419123,_0x5cd682){return function(_0x31327c,_0x540b93){_0x5cd682(_0x31327c,_0x540b93,_0x419123);};},__importDefault=this&&this[a194_0x5150b3(0xe5)]||function(_0xa1b00b){const _0x3c5c0d=a194_0x5150b3;return _0xa1b00b&&_0xa1b00b[_0x3c5c0d(0xcf)]?_0xa1b00b:{'default':_0xa1b00b};};function a194_0x2c0b(_0x5d4821,_0x14ef52){const _0x1f4c98=a194_0x204d();return a194_0x2c0b=function(_0x236628,_0x4df1dc){_0x236628=_0x236628-0xb7;let _0x204dc3=_0x1f4c98[_0x236628];return _0x204dc3;},a194_0x2c0b(_0x5d4821,_0x14ef52);}Object[a194_0x5150b3(0xbc)](exports,a194_0x5150b3(0xcf),{'value':!![]}),exports[a194_0x5150b3(0xbf)]=void 0x0;const axios_1=__importDefault(require(a194_0x5150b3(0xbd))),typedi_1=require('typedi'),git_api_service_1=require(a194_0x5150b3(0xec)),bitbucket_credentials_dto_1=require(a194_0x5150b3(0xdd)),providers_tokens_1=require(a194_0x5150b3(0xc5)),git_provider_1=require(a194_0x5150b3(0xeb)),url_1=require(a194_0x5150b3(0xe4));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a194_0x5150b3(0xe8)]{constructor(_0x48e130,_0x438c4c){const _0x2034b1=a194_0x5150b3;super(_0x48e130,_0x438c4c),this[_0x2034b1(0xc4)]=-0x1,this[_0x2034b1(0xf1)]=0x3e8;}[a194_0x5150b3(0xea)](_0x10391c){const _0x3b9234=a194_0x5150b3,_0x3a5c40=super[_0x3b9234(0xea)](_0x10391c);return _0x3a5c40[_0x3b9234(0xe2)][_0x3b9234(0xd7)]['use'](async _0xe4e8f=>{const _0x44f859=_0x3b9234;return await this[_0x44f859(0xcc)](),_0xe4e8f[_0x44f859(0xba)][_0x44f859(0xd5)]=this[_0x44f859(0xdf)][_0x44f859(0xd3)](),_0xe4e8f;}),_0x3a5c40;}async['checkAccessToken'](){const _0x4c7c67=a194_0x5150b3;if(Date[_0x4c7c67(0xf0)]()<this[_0x4c7c67(0xc4)])return;await this[_0x4c7c67(0xdb)]();}async['refreshToken'](){const _0x3125c1=a194_0x5150b3,{clientId:_0x2aabf1,clientSecret:_0x1246d3}=this[_0x3125c1(0xdf)],_0x1f8a61=new url_1[(_0x3125c1(0xf3))](_0x3125c1(0xc9));_0x1f8a61[_0x3125c1(0xc0)]=_0x2aabf1,_0x1f8a61[_0x3125c1(0xdc)]=_0x1246d3,_0x1f8a61[_0x3125c1(0xda)]=_0x3125c1(0xc2);const {data:_0x560763}=await axios_1[_0x3125c1(0xd2)][_0x3125c1(0xd9)](_0x1f8a61[_0x3125c1(0xe3)](),_0x3125c1(0xb8)),{expires_in:_0x5cc5ed,access_token:_0x55fa9a}=_0x560763;this['accessTokenExpiresAt']=Date[_0x3125c1(0xf0)]()+_0x5cc5ed*0x3e8,this[_0x3125c1(0xdf)][_0x3125c1(0xbe)](_0x55fa9a);}[a194_0x5150b3(0xbb)](){return{};}[a194_0x5150b3(0xb9)](){const _0x5344b0=a194_0x5150b3;return this['request'][_0x5344b0(0xca)]('user');}async['isLoggedIn'](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a194_0x5150b3(0xef)])(),__param(0x0,(0x0,typedi_1['Inject'])(providers_tokens_1[a194_0x5150b3(0xd1)][a194_0x5150b3(0xee)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a194_0x5150b3(0xd1)][a194_0x5150b3(0xdf)])),__metadata(a194_0x5150b3(0xc7),[String,bitbucket_credentials_dto_1[a194_0x5150b3(0xe9)]])],BitbucketApiService),exports[a194_0x5150b3(0xbf)]=BitbucketApiService;