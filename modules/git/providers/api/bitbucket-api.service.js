const a163_0x5b862b=a163_0x3ee0;(function(_0x1189ca,_0x259c7b){const _0x1a5d9e=a163_0x3ee0,_0x456ea1=_0x1189ca();while(!![]){try{const _0x5ba008=parseInt(_0x1a5d9e(0x93))/0x1+parseInt(_0x1a5d9e(0xb3))/0x2*(parseInt(_0x1a5d9e(0x85))/0x3)+parseInt(_0x1a5d9e(0x89))/0x4+-parseInt(_0x1a5d9e(0x84))/0x5+parseInt(_0x1a5d9e(0xb7))/0x6+-parseInt(_0x1a5d9e(0xaa))/0x7*(parseInt(_0x1a5d9e(0x8c))/0x8)+parseInt(_0x1a5d9e(0xb8))/0x9*(parseInt(_0x1a5d9e(0x88))/0xa);if(_0x5ba008===_0x259c7b)break;else _0x456ea1['push'](_0x456ea1['shift']());}catch(_0x5658d6){_0x456ea1['push'](_0x456ea1['shift']());}}}(a163_0x1739,0x2020d));const a163_0xa02169=(function(){let _0xbe63f7=!![];return function(_0x24730b,_0x48bb58){const _0x2569ca=_0xbe63f7?function(){if(_0x48bb58){const _0x32a2a0=_0x48bb58['apply'](_0x24730b,arguments);return _0x48bb58=null,_0x32a2a0;}}:function(){};return _0xbe63f7=![],_0x2569ca;};}()),a163_0xfe4300=a163_0xa02169(this,function(){const _0x104e53=a163_0x3ee0;return a163_0xfe4300['toString']()[_0x104e53(0x98)](_0x104e53(0x94))['toString']()[_0x104e53(0xb0)](a163_0xfe4300)['search'](_0x104e53(0x94));});a163_0xfe4300();function a163_0x1739(){const _0x4682c5=['getCurrentUser','headers','Inject','Service','/site/oauth2/access_token','__metadata','defineProperty','post','../providers.tokens','../credentials/dto/bitbucket-credentials.dto','__esModule','77XMpvTe','decorate','Authorization','user','./git-api.service','Tokens','constructor','checkAccessToken','metadata','100VPXtcN','getAuthorizationHeader','BitbucketCredentialsDto','function','427482EbKmLH','113688aNponp','get','createRequest','axios','now','529375lRhUWb','3849iPDXKn','__importDefault','object','90LyVlzI','510484OCtNqK','password','pathname','122184BGgIfX','use','setAccessToken','refreshToken','MAX_REQUEST_PER_HOUR','provider','request','28769hTNgAn','(((.+)+)+)+$','grant_type=client_credentials','credentials','getOwnPropertyDescriptor','search','__decorate','accessTokenExpiresAt','BitbucketApiService','GitApiService','../types/git-provider','length'];a163_0x1739=function(){return _0x4682c5;};return a163_0x1739();}'use strict';function a163_0x3ee0(_0x3002f9,_0x53b3ef){const _0x1fce12=a163_0x1739();return a163_0x3ee0=function(_0xfe4300,_0xa02169){_0xfe4300=_0xfe4300-0x80;let _0x17399e=_0x1fce12[_0xfe4300];return _0x17399e;},a163_0x3ee0(_0x3002f9,_0x53b3ef);}var __decorate=this&&this[a163_0x5b862b(0x99)]||function(_0x5f2407,_0x515026,_0xdb0c5e,_0x5d91d3){const _0x88e118=a163_0x5b862b;var _0x97c2cc=arguments[_0x88e118(0x9e)],_0x4e3913=_0x97c2cc<0x3?_0x515026:_0x5d91d3===null?_0x5d91d3=Object[_0x88e118(0x97)](_0x515026,_0xdb0c5e):_0x5d91d3,_0x4b9aa2;if(typeof Reflect===_0x88e118(0x87)&&typeof Reflect[_0x88e118(0xab)]===_0x88e118(0xb6))_0x4e3913=Reflect['decorate'](_0x5f2407,_0x515026,_0xdb0c5e,_0x5d91d3);else{for(var _0x34d9e0=_0x5f2407['length']-0x1;_0x34d9e0>=0x0;_0x34d9e0--)if(_0x4b9aa2=_0x5f2407[_0x34d9e0])_0x4e3913=(_0x97c2cc<0x3?_0x4b9aa2(_0x4e3913):_0x97c2cc>0x3?_0x4b9aa2(_0x515026,_0xdb0c5e,_0x4e3913):_0x4b9aa2(_0x515026,_0xdb0c5e))||_0x4e3913;}return _0x97c2cc>0x3&&_0x4e3913&&Object['defineProperty'](_0x515026,_0xdb0c5e,_0x4e3913),_0x4e3913;},__metadata=this&&this[a163_0x5b862b(0xa4)]||function(_0x3ec913,_0x5484c1){const _0x1b5a97=a163_0x5b862b;if(typeof Reflect===_0x1b5a97(0x87)&&typeof Reflect[_0x1b5a97(0xb2)]===_0x1b5a97(0xb6))return Reflect[_0x1b5a97(0xb2)](_0x3ec913,_0x5484c1);},__param=this&&this['__param']||function(_0xb5eec0,_0x372df5){return function(_0xe6074,_0x21996d){_0x372df5(_0xe6074,_0x21996d,_0xb5eec0);};},__importDefault=this&&this[a163_0x5b862b(0x86)]||function(_0x79795){const _0x40b69d=a163_0x5b862b;return _0x79795&&_0x79795[_0x40b69d(0xa9)]?_0x79795:{'default':_0x79795};};Object[a163_0x5b862b(0xa5)](exports,a163_0x5b862b(0xa9),{'value':!![]}),exports[a163_0x5b862b(0x9b)]=void 0x0;const axios_1=__importDefault(require(a163_0x5b862b(0x82))),typedi_1=require('typedi'),git_api_service_1=require(a163_0x5b862b(0xae)),bitbucket_credentials_dto_1=require(a163_0x5b862b(0xa8)),providers_tokens_1=require(a163_0x5b862b(0xa7)),git_provider_1=require(a163_0x5b862b(0x9d)),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x5b862b(0x9c)]{constructor(_0x265f6,_0x5bf860){const _0x4de40b=a163_0x5b862b;super(_0x265f6,_0x5bf860),this['accessTokenExpiresAt']=-0x1,this[_0x4de40b(0x90)]=0x3e8;}[a163_0x5b862b(0x81)](_0x5ce460){const _0x263ba9=a163_0x5b862b,_0x56d744=super[_0x263ba9(0x81)](_0x5ce460);return _0x56d744['interceptors'][_0x263ba9(0x92)][_0x263ba9(0x8d)](async _0x19c1cc=>{const _0x478bce=_0x263ba9;return await this[_0x478bce(0xb1)](),_0x19c1cc[_0x478bce(0xa0)][_0x478bce(0xac)]=this[_0x478bce(0x96)][_0x478bce(0xb4)](),_0x19c1cc;}),_0x56d744;}async[a163_0x5b862b(0xb1)](){const _0x3ab6e2=a163_0x5b862b;if(Date[_0x3ab6e2(0x83)]()<this[_0x3ab6e2(0x9a)])return;await this[_0x3ab6e2(0x8f)]();}async[a163_0x5b862b(0x8f)](){const _0x148eec=a163_0x5b862b,{clientId:_0x28e224,clientSecret:_0xb4d109}=this[_0x148eec(0x96)],_0x3d1243=new url_1['URL']('https://bitbucket.org');_0x3d1243['username']=_0x28e224,_0x3d1243[_0x148eec(0x8a)]=_0xb4d109,_0x3d1243[_0x148eec(0x8b)]=_0x148eec(0xa3);const {data:_0x2db6b0}=await axios_1['default'][_0x148eec(0xa6)](_0x3d1243['toString'](),_0x148eec(0x95)),{expires_in:_0x7dc827,access_token:_0x1c5516}=_0x2db6b0;this[_0x148eec(0x9a)]=Date[_0x148eec(0x83)]()+_0x7dc827*0x3e8,this[_0x148eec(0x96)][_0x148eec(0x8e)](_0x1c5516);}['getHeaders'](){return{};}[a163_0x5b862b(0x9f)](){const _0x1ef045=a163_0x5b862b;return this['request'][_0x1ef045(0x80)](_0x1ef045(0xad));}async['isLoggedIn'](){const _0xa7c9df=a163_0x5b862b;return await this[_0xa7c9df(0x9f)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a163_0x5b862b(0xa2)])(),__param(0x0,(0x0,typedi_1[a163_0x5b862b(0xa1)])(providers_tokens_1[a163_0x5b862b(0xaf)][a163_0x5b862b(0x91)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a163_0x5b862b(0xaf)][a163_0x5b862b(0x96)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a163_0x5b862b(0xb5)]])],BitbucketApiService),exports[a163_0x5b862b(0x9b)]=BitbucketApiService;