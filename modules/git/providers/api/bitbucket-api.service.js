function a157_0x22fa(_0x5eebf6,_0x2fba0a){const _0xf6a0d8=a157_0x5f51();return a157_0x22fa=function(_0x449cd5,_0x210b26){_0x449cd5=_0x449cd5-0x1e8;let _0x5f51c3=_0xf6a0d8[_0x449cd5];return _0x5f51c3;},a157_0x22fa(_0x5eebf6,_0x2fba0a);}const a157_0x3750bb=a157_0x22fa;(function(_0x2112f5,_0x52efab){const _0x4327d1=a157_0x22fa,_0x62f471=_0x2112f5();while(!![]){try{const _0x5a9d94=parseInt(_0x4327d1(0x202))/0x1*(parseInt(_0x4327d1(0x21b))/0x2)+parseInt(_0x4327d1(0x21e))/0x3+-parseInt(_0x4327d1(0x226))/0x4*(-parseInt(_0x4327d1(0x1eb))/0x5)+-parseInt(_0x4327d1(0x215))/0x6+parseInt(_0x4327d1(0x217))/0x7*(-parseInt(_0x4327d1(0x1f5))/0x8)+-parseInt(_0x4327d1(0x1f0))/0x9+parseInt(_0x4327d1(0x1fc))/0xa*(-parseInt(_0x4327d1(0x225))/0xb);if(_0x5a9d94===_0x52efab)break;else _0x62f471['push'](_0x62f471['shift']());}catch(_0x5f354f){_0x62f471['push'](_0x62f471['shift']());}}}(a157_0x5f51,0x2328c));function a157_0x5f51(){const _0x2ee514=['length','__decorate','function','__param','default','168355ZfjyxJ','1444mbPDsA','../credentials/dto/bitbucket-credentials.dto','https://bitbucket.org','object','2965uVknoP','/site/oauth2/access_token','request','post','getAuthorizationHeader','1845AokqPT','setAccessToken','../types/git-provider','BitbucketCredentialsDto','GitApiService','11648vrmkef','apply','axios','defineProperty','isLoggedIn','checkAccessToken','password','180jnOBCy','pathname','MAX_REQUEST_PER_HOUR','Authorization','createRequest','search','115sGouWV','Service','toString','getCurrentUser','__esModule','refreshToken','(((.+)+)+)+$','design:paramtypes','Tokens','now','use','accessTokenExpiresAt','headers','user','URL','getOwnPropertyDescriptor','BitbucketApiService','__importDefault','grant_type=client_credentials','1389582ufFpMT','url','399DqsoUD','constructor','__metadata','Inject','4456rBmGgR','metadata','../providers.tokens','792009kSwMTs','credentials'];a157_0x5f51=function(){return _0x2ee514;};return a157_0x5f51();}const a157_0x210b26=(function(){let _0x58f67d=!![];return function(_0x2448c7,_0x312b5b){const _0x3248ff=_0x58f67d?function(){const _0x25527d=a157_0x22fa;if(_0x312b5b){const _0x3de4e8=_0x312b5b[_0x25527d(0x1f6)](_0x2448c7,arguments);return _0x312b5b=null,_0x3de4e8;}}:function(){};return _0x58f67d=![],_0x3248ff;};}()),a157_0x449cd5=a157_0x210b26(this,function(){const _0x3fd3f3=a157_0x22fa;return a157_0x449cd5[_0x3fd3f3(0x204)]()[_0x3fd3f3(0x201)](_0x3fd3f3(0x208))[_0x3fd3f3(0x204)]()[_0x3fd3f3(0x218)](a157_0x449cd5)[_0x3fd3f3(0x201)]('(((.+)+)+)+$');});a157_0x449cd5();'use strict';var __decorate=this&&this[a157_0x3750bb(0x221)]||function(_0x53040e,_0xbb27e1,_0x268ad0,_0x55596b){const _0x1ebb67=a157_0x3750bb;var _0x2b9506=arguments[_0x1ebb67(0x220)],_0x390181=_0x2b9506<0x3?_0xbb27e1:_0x55596b===null?_0x55596b=Object[_0x1ebb67(0x211)](_0xbb27e1,_0x268ad0):_0x55596b,_0x2a1e0e;if(typeof Reflect===_0x1ebb67(0x1ea)&&typeof Reflect['decorate']===_0x1ebb67(0x222))_0x390181=Reflect['decorate'](_0x53040e,_0xbb27e1,_0x268ad0,_0x55596b);else{for(var _0x2913a7=_0x53040e[_0x1ebb67(0x220)]-0x1;_0x2913a7>=0x0;_0x2913a7--)if(_0x2a1e0e=_0x53040e[_0x2913a7])_0x390181=(_0x2b9506<0x3?_0x2a1e0e(_0x390181):_0x2b9506>0x3?_0x2a1e0e(_0xbb27e1,_0x268ad0,_0x390181):_0x2a1e0e(_0xbb27e1,_0x268ad0))||_0x390181;}return _0x2b9506>0x3&&_0x390181&&Object[_0x1ebb67(0x1f8)](_0xbb27e1,_0x268ad0,_0x390181),_0x390181;},__metadata=this&&this[a157_0x3750bb(0x219)]||function(_0x4028a1,_0x125bab){const _0x15a033=a157_0x3750bb;if(typeof Reflect===_0x15a033(0x1ea)&&typeof Reflect[_0x15a033(0x21c)]==='function')return Reflect[_0x15a033(0x21c)](_0x4028a1,_0x125bab);},__param=this&&this[a157_0x3750bb(0x223)]||function(_0x22e51b,_0x2a6ab4){return function(_0x5af013,_0x3ad4f4){_0x2a6ab4(_0x5af013,_0x3ad4f4,_0x22e51b);};},__importDefault=this&&this[a157_0x3750bb(0x213)]||function(_0x7a7e3c){const _0x51b309=a157_0x3750bb;return _0x7a7e3c&&_0x7a7e3c[_0x51b309(0x206)]?_0x7a7e3c:{'default':_0x7a7e3c};};Object[a157_0x3750bb(0x1f8)](exports,a157_0x3750bb(0x206),{'value':!![]}),exports[a157_0x3750bb(0x212)]=void 0x0;const axios_1=__importDefault(require(a157_0x3750bb(0x1f7))),typedi_1=require('typedi'),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require(a157_0x3750bb(0x1e8)),providers_tokens_1=require(a157_0x3750bb(0x21d)),git_provider_1=require(a157_0x3750bb(0x1f2)),url_1=require(a157_0x3750bb(0x216));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a157_0x3750bb(0x1f4)]{constructor(_0xb543b9,_0x8eac82){const _0x29e492=a157_0x3750bb;super(_0xb543b9,_0x8eac82),this[_0x29e492(0x20d)]=-0x1,this[_0x29e492(0x1fe)]=0x3e8;}['createRequest'](_0x4e378b){const _0x49fc59=a157_0x3750bb,_0x4852ab=super[_0x49fc59(0x200)](_0x4e378b);return _0x4852ab['interceptors']['request'][_0x49fc59(0x20c)](async _0x34ddb2=>{const _0xa043fc=_0x49fc59;return await this[_0xa043fc(0x1fa)](),_0x34ddb2[_0xa043fc(0x20e)][_0xa043fc(0x1ff)]=this['credentials'][_0xa043fc(0x1ef)](),_0x34ddb2;}),_0x4852ab;}async[a157_0x3750bb(0x1fa)](){const _0x17fa25=a157_0x3750bb;if(Date['now']()<this[_0x17fa25(0x20d)])return;await this[_0x17fa25(0x207)]();}async['refreshToken'](){const _0x11a347=a157_0x3750bb,{clientId:_0x43ea06,clientSecret:_0x408064}=this[_0x11a347(0x21f)],_0x50aa0b=new url_1[(_0x11a347(0x210))](_0x11a347(0x1e9));_0x50aa0b['username']=_0x43ea06,_0x50aa0b[_0x11a347(0x1fb)]=_0x408064,_0x50aa0b[_0x11a347(0x1fd)]=_0x11a347(0x1ec);const {data:_0x28bf}=await axios_1[_0x11a347(0x224)][_0x11a347(0x1ee)](_0x50aa0b['toString'](),_0x11a347(0x214)),{expires_in:_0x38e0ae,access_token:_0x23140b}=_0x28bf;this[_0x11a347(0x20d)]=Date[_0x11a347(0x20b)]()+_0x38e0ae*0x3e8,this['credentials'][_0x11a347(0x1f1)](_0x23140b);}['getHeaders'](){return{};}['getCurrentUser'](){const _0x1f572e=a157_0x3750bb;return this[_0x1f572e(0x1ed)]['get'](_0x1f572e(0x20f));}async[a157_0x3750bb(0x1f9)](){const _0x5a7960=a157_0x3750bb;return await this[_0x5a7960(0x205)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a157_0x3750bb(0x203)])(),__param(0x0,(0x0,typedi_1['Inject'])(providers_tokens_1[a157_0x3750bb(0x20a)]['provider'])),__param(0x1,(0x0,typedi_1[a157_0x3750bb(0x21a)])(providers_tokens_1['Tokens'][a157_0x3750bb(0x21f)])),__metadata(a157_0x3750bb(0x209),[String,bitbucket_credentials_dto_1[a157_0x3750bb(0x1f3)]])],BitbucketApiService),exports[a157_0x3750bb(0x212)]=BitbucketApiService;