const a111_0x18696e=a111_0xe6a4;(function(_0x584f5b,_0x529552){const _0x50edec=a111_0xe6a4,_0x3294ee=_0x584f5b();while(!![]){try{const _0x24fcc8=-parseInt(_0x50edec(0x1fe))/0x1+parseInt(_0x50edec(0x1fd))/0x2+parseInt(_0x50edec(0x1f5))/0x3*(parseInt(_0x50edec(0x1e4))/0x4)+parseInt(_0x50edec(0x1fa))/0x5*(parseInt(_0x50edec(0x1f9))/0x6)+-parseInt(_0x50edec(0x1e6))/0x7*(-parseInt(_0x50edec(0x1d9))/0x8)+-parseInt(_0x50edec(0x1ee))/0x9*(parseInt(_0x50edec(0x1ef))/0xa)+-parseInt(_0x50edec(0x1fb))/0xb;if(_0x24fcc8===_0x529552)break;else _0x3294ee['push'](_0x3294ee['shift']());}catch(_0x5131e9){_0x3294ee['push'](_0x3294ee['shift']());}}}(a111_0x5e1d,0xbbed2));const a111_0x167054=(function(){let _0xba6ed6=!![];return function(_0x176990,_0x3c0353){const _0x2fa1b2=_0xba6ed6?function(){const _0x5b37e0=a111_0xe6a4;if(_0x3c0353){const _0x465a61=_0x3c0353[_0x5b37e0(0x1f4)](_0x176990,arguments);return _0x3c0353=null,_0x465a61;}}:function(){};return _0xba6ed6=![],_0x2fa1b2;};}()),a111_0x365081=a111_0x167054(this,function(){const _0x4de27b=a111_0xe6a4;return a111_0x365081['toString']()[_0x4de27b(0x1cc)]('(((.+)+)+)+$')['toString']()[_0x4de27b(0x1eb)](a111_0x365081)[_0x4de27b(0x1cc)]('(((.+)+)+)+$');});a111_0x365081();'use strict';var __decorate=this&&this[a111_0x18696e(0x1e0)]||function(_0x401274,_0x577b91,_0x2533cc,_0x4d7ff3){const _0x234bbe=a111_0x18696e;var _0x215f2f=arguments[_0x234bbe(0x1c7)],_0x32355b=_0x215f2f<0x3?_0x577b91:_0x4d7ff3===null?_0x4d7ff3=Object['getOwnPropertyDescriptor'](_0x577b91,_0x2533cc):_0x4d7ff3,_0x3ae347;if(typeof Reflect===_0x234bbe(0x1f7)&&typeof Reflect[_0x234bbe(0x1f6)]==='function')_0x32355b=Reflect[_0x234bbe(0x1f6)](_0x401274,_0x577b91,_0x2533cc,_0x4d7ff3);else{for(var _0x2fd672=_0x401274[_0x234bbe(0x1c7)]-0x1;_0x2fd672>=0x0;_0x2fd672--)if(_0x3ae347=_0x401274[_0x2fd672])_0x32355b=(_0x215f2f<0x3?_0x3ae347(_0x32355b):_0x215f2f>0x3?_0x3ae347(_0x577b91,_0x2533cc,_0x32355b):_0x3ae347(_0x577b91,_0x2533cc))||_0x32355b;}return _0x215f2f>0x3&&_0x32355b&&Object['defineProperty'](_0x577b91,_0x2533cc,_0x32355b),_0x32355b;},__metadata=this&&this[a111_0x18696e(0x1ec)]||function(_0x45cd27,_0x5d5be3){const _0x1dfaa3=a111_0x18696e;if(typeof Reflect===_0x1dfaa3(0x1f7)&&typeof Reflect[_0x1dfaa3(0x1e2)]===_0x1dfaa3(0x1d8))return Reflect[_0x1dfaa3(0x1e2)](_0x45cd27,_0x5d5be3);},__param=this&&this[a111_0x18696e(0x1ea)]||function(_0x484834,_0x17a47c){return function(_0x34b261,_0x1eee16){_0x17a47c(_0x34b261,_0x1eee16,_0x484834);};},__importDefault=this&&this[a111_0x18696e(0x1ff)]||function(_0xd5ebf1){const _0x4f1b46=a111_0x18696e;return _0xd5ebf1&&_0xd5ebf1[_0x4f1b46(0x1e8)]?_0xd5ebf1:{'default':_0xd5ebf1};};Object[a111_0x18696e(0x1e9)](exports,a111_0x18696e(0x1e8),{'value':!![]}),exports[a111_0x18696e(0x1f2)]=void 0x0;const axios_1=__importDefault(require(a111_0x18696e(0x1f8))),typedi_1=require(a111_0x18696e(0x1d2)),git_api_service_1=require(a111_0x18696e(0x1d1)),bitbucket_credentials_dto_1=require(a111_0x18696e(0x1cf)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require('../types/git-provider'),url_1=require(a111_0x18696e(0x1fc));function a111_0xe6a4(_0x3551ab,_0x43a21a){const _0x56cfcc=a111_0x5e1d();return a111_0xe6a4=function(_0x365081,_0x167054){_0x365081=_0x365081-0x1c7;let _0x5e1d35=_0x56cfcc[_0x365081];return _0x5e1d35;},a111_0xe6a4(_0x3551ab,_0x43a21a);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a111_0x18696e(0x1c8)]{constructor(_0x57aec0,_0x2c02f5){const _0x57f0e1=a111_0x18696e;super(_0x57aec0,_0x2c02f5),this[_0x57f0e1(0x1ce)]=-0x1,this[_0x57f0e1(0x1e1)]=0x3e8;}[a111_0x18696e(0x1f0)](_0x5c0b57){const _0x3164e9=a111_0x18696e,_0x473713=super[_0x3164e9(0x1f0)](_0x5c0b57);return _0x473713[_0x3164e9(0x1f1)]['request']['use'](async _0x64b90f=>{const _0x34e9cc=_0x3164e9;return await this[_0x34e9cc(0x1e5)](),_0x64b90f[_0x34e9cc(0x1f3)][_0x34e9cc(0x1cd)]=this['credentials']['getAuthorizationHeader'](),_0x64b90f;}),_0x473713;}async[a111_0x18696e(0x1e5)](){const _0x26c6de=a111_0x18696e;if(Date['now']()<this[_0x26c6de(0x1ce)])return;await this[_0x26c6de(0x1df)]();}async[a111_0x18696e(0x1df)](){const _0x328d19=a111_0x18696e,{clientId:_0x37ae1a,clientSecret:_0x44b9fd}=this['credentials'],_0x17cadb=new url_1[(_0x328d19(0x1c9))](_0x328d19(0x1d0));_0x17cadb['username']=_0x37ae1a,_0x17cadb['password']=_0x44b9fd,_0x17cadb['pathname']=_0x328d19(0x1d6);const {data:_0x14bf2a}=await axios_1[_0x328d19(0x1e7)]['post'](_0x17cadb['toString'](),_0x328d19(0x1ca)),{expires_in:_0x4ca2a9,access_token:_0x411b8d}=_0x14bf2a;this['accessTokenExpiresAt']=Date[_0x328d19(0x1e3)]()+_0x4ca2a9*0x3e8,this[_0x328d19(0x1dd)][_0x328d19(0x1d3)](_0x411b8d);}[a111_0x18696e(0x1db)](){return{};}['getCurrentUser'](){const _0xeb2aaf=a111_0x18696e;return this['request']['get'](_0xeb2aaf(0x1d5));}async[a111_0x18696e(0x1d4)](){const _0x161372=a111_0x18696e;return await this[_0x161372(0x1d7)](),!![];}};function a111_0x5e1d(){const _0x747212=['user','/site/oauth2/access_token','getCurrentUser','function','6106136owJPAu','Tokens','getHeaders','Service','credentials','Inject','refreshToken','__decorate','MAX_REQUEST_PER_HOUR','metadata','now','1108zkZZJw','checkAccessToken','7bbZPUI','default','__esModule','defineProperty','__param','constructor','__metadata','BitbucketCredentialsDto','9hAhbNA','6161620DKKDhp','createRequest','interceptors','BitbucketApiService','headers','apply','6198XSkpoA','decorate','object','axios','498FqZAkA','77815ATZXeX','9284055LnwCtQ','url','1346554yeMxwY','1070642KSUhDN','__importDefault','length','GitApiService','URL','grant_type=client_credentials','design:paramtypes','search','Authorization','accessTokenExpiresAt','../credentials/dto/bitbucket-credentials.dto','https://bitbucket.org','./git-api.service','typedi','setAccessToken','isLoggedIn'];a111_0x5e1d=function(){return _0x747212;};return a111_0x5e1d();}BitbucketApiService=__decorate([typedi_1[a111_0x18696e(0x1dc)](),__param(0x0,typedi_1['Inject'](providers_tokens_1[a111_0x18696e(0x1da)]['provider'])),__param(0x1,typedi_1[a111_0x18696e(0x1de)](providers_tokens_1['Tokens']['credentials'])),__metadata(a111_0x18696e(0x1cb),[String,bitbucket_credentials_dto_1[a111_0x18696e(0x1ed)]])],BitbucketApiService),exports[a111_0x18696e(0x1f2)]=BitbucketApiService;