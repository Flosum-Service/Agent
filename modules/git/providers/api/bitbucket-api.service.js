const a158_0x1bd455=a158_0x1ebc;(function(_0x11e014,_0x5284bd){const _0x2ddfa3=a158_0x1ebc,_0x187793=_0x11e014();while(!![]){try{const _0x4f68d6=parseInt(_0x2ddfa3(0x170))/0x1+parseInt(_0x2ddfa3(0x177))/0x2+parseInt(_0x2ddfa3(0x174))/0x3*(-parseInt(_0x2ddfa3(0x161))/0x4)+-parseInt(_0x2ddfa3(0x152))/0x5*(-parseInt(_0x2ddfa3(0x18e))/0x6)+-parseInt(_0x2ddfa3(0x17c))/0x7+parseInt(_0x2ddfa3(0x17e))/0x8+parseInt(_0x2ddfa3(0x166))/0x9*(-parseInt(_0x2ddfa3(0x165))/0xa);if(_0x4f68d6===_0x5284bd)break;else _0x187793['push'](_0x187793['shift']());}catch(_0x58d416){_0x187793['push'](_0x187793['shift']());}}}(a158_0xd6c8,0x5cca1));function a158_0x1ebc(_0x1d0c5e,_0x2aa595){const _0x3dbb09=a158_0xd6c8();return a158_0x1ebc=function(_0x3c97bd,_0x40631c){_0x3c97bd=_0x3c97bd-0x151;let _0xd6c87a=_0x3dbb09[_0x3c97bd];return _0xd6c87a;},a158_0x1ebc(_0x1d0c5e,_0x2aa595);}const a158_0x40631c=(function(){let _0x58a846=!![];return function(_0x26ce37,_0x33c224){const _0x4e13a2=_0x58a846?function(){const _0x22cd27=a158_0x1ebc;if(_0x33c224){const _0x5ae47a=_0x33c224[_0x22cd27(0x15e)](_0x26ce37,arguments);return _0x33c224=null,_0x5ae47a;}}:function(){};return _0x58a846=![],_0x4e13a2;};}()),a158_0x3c97bd=a158_0x40631c(this,function(){const _0x561dce=a158_0x1ebc;return a158_0x3c97bd[_0x561dce(0x173)]()[_0x561dce(0x179)](_0x561dce(0x164))[_0x561dce(0x173)]()[_0x561dce(0x156)](a158_0x3c97bd)['search']('(((.+)+)+)+$');});a158_0x3c97bd();'use strict';function a158_0xd6c8(){const _0x21467b=['__esModule','accessTokenExpiresAt','Service','design:paramtypes','GitApiService','post','apply','BitbucketCredentialsDto','defineProperty','4GhULIA','typedi','isLoggedIn','(((.+)+)+)+$','3168070gcVrYc','18rfAMPC','__param','username','MAX_REQUEST_PER_HOUR','checkAccessToken','createRequest','request','interceptors','Tokens','refreshToken','233602xQPtnR','now','__decorate','toString','1828413Pnbknt','../types/git-provider','decorate','1135406HMyFBO','axios','search','setAccessToken','metadata','2026591uYJjeX','get','5763280yeldvT','getCurrentUser','BitbucketApiService','grant_type=client_credentials','../credentials/dto/bitbucket-credentials.dto','provider','length','./git-api.service','pathname','url','object','default','getAuthorizationHeader','/site/oauth2/access_token','credentials','function','36HPVEeC','URL','getOwnPropertyDescriptor','Authorization','password','325790afBZYn','user','Inject','https://bitbucket.org','constructor','headers'];a158_0xd6c8=function(){return _0x21467b;};return a158_0xd6c8();}var __decorate=this&&this[a158_0x1bd455(0x172)]||function(_0xa8bdb1,_0x4397f5,_0x3bf7b8,_0x48b67f){const _0x416186=a158_0x1bd455;var _0x4e6934=arguments['length'],_0x43f529=_0x4e6934<0x3?_0x4397f5:_0x48b67f===null?_0x48b67f=Object[_0x416186(0x190)](_0x4397f5,_0x3bf7b8):_0x48b67f,_0x22f11e;if(typeof Reflect===_0x416186(0x188)&&typeof Reflect[_0x416186(0x176)]==='function')_0x43f529=Reflect['decorate'](_0xa8bdb1,_0x4397f5,_0x3bf7b8,_0x48b67f);else{for(var _0x5a18f1=_0xa8bdb1[_0x416186(0x184)]-0x1;_0x5a18f1>=0x0;_0x5a18f1--)if(_0x22f11e=_0xa8bdb1[_0x5a18f1])_0x43f529=(_0x4e6934<0x3?_0x22f11e(_0x43f529):_0x4e6934>0x3?_0x22f11e(_0x4397f5,_0x3bf7b8,_0x43f529):_0x22f11e(_0x4397f5,_0x3bf7b8))||_0x43f529;}return _0x4e6934>0x3&&_0x43f529&&Object['defineProperty'](_0x4397f5,_0x3bf7b8,_0x43f529),_0x43f529;},__metadata=this&&this['__metadata']||function(_0x283027,_0x38827f){const _0x2ebf4d=a158_0x1bd455;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x2ebf4d(0x18d))return Reflect[_0x2ebf4d(0x17b)](_0x283027,_0x38827f);},__param=this&&this[a158_0x1bd455(0x167)]||function(_0x26e452,_0x2302d6){return function(_0x921f7d,_0x42cdb8){_0x2302d6(_0x921f7d,_0x42cdb8,_0x26e452);};},__importDefault=this&&this['__importDefault']||function(_0x394f7){const _0x58e25e=a158_0x1bd455;return _0x394f7&&_0x394f7[_0x58e25e(0x158)]?_0x394f7:{'default':_0x394f7};};Object[a158_0x1bd455(0x160)](exports,a158_0x1bd455(0x158),{'value':!![]}),exports[a158_0x1bd455(0x180)]=void 0x0;const axios_1=__importDefault(require(a158_0x1bd455(0x178))),typedi_1=require(a158_0x1bd455(0x162)),git_api_service_1=require(a158_0x1bd455(0x185)),bitbucket_credentials_dto_1=require(a158_0x1bd455(0x182)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a158_0x1bd455(0x175)),url_1=require(a158_0x1bd455(0x187));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a158_0x1bd455(0x15c)]{constructor(_0x4ebd8b,_0x50b374){const _0x301f3f=a158_0x1bd455;super(_0x4ebd8b,_0x50b374),this[_0x301f3f(0x159)]=-0x1,this[_0x301f3f(0x169)]=0x3e8;}[a158_0x1bd455(0x16b)](_0x343917){const _0x26b52a=a158_0x1bd455,_0x525745=super[_0x26b52a(0x16b)](_0x343917);return _0x525745[_0x26b52a(0x16d)][_0x26b52a(0x16c)]['use'](async _0x11f491=>{const _0x167750=_0x26b52a;return await this['checkAccessToken'](),_0x11f491[_0x167750(0x157)][_0x167750(0x191)]=this[_0x167750(0x18c)][_0x167750(0x18a)](),_0x11f491;}),_0x525745;}async[a158_0x1bd455(0x16a)](){const _0x3951d4=a158_0x1bd455;if(Date[_0x3951d4(0x171)]()<this[_0x3951d4(0x159)])return;await this[_0x3951d4(0x16f)]();}async[a158_0x1bd455(0x16f)](){const _0xd8842f=a158_0x1bd455,{clientId:_0x506b5d,clientSecret:_0x5498cc}=this[_0xd8842f(0x18c)],_0x43f8db=new url_1[(_0xd8842f(0x18f))](_0xd8842f(0x155));_0x43f8db[_0xd8842f(0x168)]=_0x506b5d,_0x43f8db[_0xd8842f(0x151)]=_0x5498cc,_0x43f8db[_0xd8842f(0x186)]=_0xd8842f(0x18b);const {data:_0x39ec78}=await axios_1[_0xd8842f(0x189)][_0xd8842f(0x15d)](_0x43f8db['toString'](),_0xd8842f(0x181)),{expires_in:_0x4e7542,access_token:_0x421f10}=_0x39ec78;this[_0xd8842f(0x159)]=Date[_0xd8842f(0x171)]()+_0x4e7542*0x3e8,this[_0xd8842f(0x18c)][_0xd8842f(0x17a)](_0x421f10);}['getHeaders'](){return{};}[a158_0x1bd455(0x17f)](){const _0x5416f4=a158_0x1bd455;return this['request'][_0x5416f4(0x17d)](_0x5416f4(0x153));}async[a158_0x1bd455(0x163)](){const _0x26aa05=a158_0x1bd455;return await this[_0x26aa05(0x17f)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a158_0x1bd455(0x15a)])(),__param(0x0,(0x0,typedi_1[a158_0x1bd455(0x154)])(providers_tokens_1[a158_0x1bd455(0x16e)][a158_0x1bd455(0x183)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a158_0x1bd455(0x16e)][a158_0x1bd455(0x18c)])),__metadata(a158_0x1bd455(0x15b),[String,bitbucket_credentials_dto_1[a158_0x1bd455(0x15f)]])],BitbucketApiService),exports[a158_0x1bd455(0x180)]=BitbucketApiService;