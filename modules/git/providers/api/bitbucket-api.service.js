const a163_0x3c4c16=a163_0x2dda;(function(_0x44eda4,_0x1cff8d){const _0x113b11=a163_0x2dda,_0x657631=_0x44eda4();while(!![]){try{const _0x216331=parseInt(_0x113b11(0x1fb))/0x1*(-parseInt(_0x113b11(0x210))/0x2)+-parseInt(_0x113b11(0x1fe))/0x3*(-parseInt(_0x113b11(0x1ee))/0x4)+-parseInt(_0x113b11(0x1f4))/0x5+-parseInt(_0x113b11(0x1f5))/0x6+parseInt(_0x113b11(0x219))/0x7+parseInt(_0x113b11(0x20e))/0x8*(parseInt(_0x113b11(0x21e))/0x9)+parseInt(_0x113b11(0x1fc))/0xa;if(_0x216331===_0x1cff8d)break;else _0x657631['push'](_0x657631['shift']());}catch(_0x5d2e12){_0x657631['push'](_0x657631['shift']());}}}(a163_0x5a05,0xe1109));const a163_0x44aa5f=(function(){let _0x209919=!![];return function(_0x530888,_0x48bb60){const _0x2acc8=_0x209919?function(){const _0x337b91=a163_0x2dda;if(_0x48bb60){const _0x329353=_0x48bb60[_0x337b91(0x1fa)](_0x530888,arguments);return _0x48bb60=null,_0x329353;}}:function(){};return _0x209919=![],_0x2acc8;};}()),a163_0x189d3f=a163_0x44aa5f(this,function(){const _0x9b4e92=a163_0x2dda;return a163_0x189d3f[_0x9b4e92(0x1ff)]()[_0x9b4e92(0x1ed)](_0x9b4e92(0x201))[_0x9b4e92(0x1ff)]()[_0x9b4e92(0x200)](a163_0x189d3f)['search'](_0x9b4e92(0x201));});a163_0x189d3f();'use strict';function a163_0x2dda(_0x4ed413,_0xb1273){const _0xec60ad=a163_0x5a05();return a163_0x2dda=function(_0x189d3f,_0x44aa5f){_0x189d3f=_0x189d3f-0x1ec;let _0x5a0579=_0xec60ad[_0x189d3f];return _0x5a0579;},a163_0x2dda(_0x4ed413,_0xb1273);}var __decorate=this&&this[a163_0x3c4c16(0x21f)]||function(_0x12da65,_0x2e7fbe,_0x5e5132,_0x226fd4){const _0x4a77ae=a163_0x3c4c16;var _0x11fa8e=arguments['length'],_0x446621=_0x11fa8e<0x3?_0x2e7fbe:_0x226fd4===null?_0x226fd4=Object['getOwnPropertyDescriptor'](_0x2e7fbe,_0x5e5132):_0x226fd4,_0x3e4db2;if(typeof Reflect===_0x4a77ae(0x1f2)&&typeof Reflect[_0x4a77ae(0x208)]===_0x4a77ae(0x22b))_0x446621=Reflect['decorate'](_0x12da65,_0x2e7fbe,_0x5e5132,_0x226fd4);else{for(var _0x46b66e=_0x12da65[_0x4a77ae(0x22a)]-0x1;_0x46b66e>=0x0;_0x46b66e--)if(_0x3e4db2=_0x12da65[_0x46b66e])_0x446621=(_0x11fa8e<0x3?_0x3e4db2(_0x446621):_0x11fa8e>0x3?_0x3e4db2(_0x2e7fbe,_0x5e5132,_0x446621):_0x3e4db2(_0x2e7fbe,_0x5e5132))||_0x446621;}return _0x11fa8e>0x3&&_0x446621&&Object[_0x4a77ae(0x228)](_0x2e7fbe,_0x5e5132,_0x446621),_0x446621;},__metadata=this&&this[a163_0x3c4c16(0x226)]||function(_0x4a5912,_0x4f3fd8){const _0x3b4e5e=a163_0x3c4c16;if(typeof Reflect===_0x3b4e5e(0x1f2)&&typeof Reflect[_0x3b4e5e(0x227)]===_0x3b4e5e(0x22b))return Reflect[_0x3b4e5e(0x227)](_0x4a5912,_0x4f3fd8);},__param=this&&this['__param']||function(_0x217a66,_0x5982cc){return function(_0x28a25f,_0x1eb351){_0x5982cc(_0x28a25f,_0x1eb351,_0x217a66);};},__importDefault=this&&this[a163_0x3c4c16(0x22d)]||function(_0x4f94ad){return _0x4f94ad&&_0x4f94ad['__esModule']?_0x4f94ad:{'default':_0x4f94ad};},BitbucketApiService_1;Object[a163_0x3c4c16(0x228)](exports,a163_0x3c4c16(0x223),{'value':!![]}),exports[a163_0x3c4c16(0x22e)]=void 0x0;const axios_1=__importDefault(require(a163_0x3c4c16(0x224))),typedi_1=require(a163_0x3c4c16(0x220)),git_api_service_1=require(a163_0x3c4c16(0x205)),bitbucket_credentials_dto_1=require(a163_0x3c4c16(0x202)),providers_tokens_1=require(a163_0x3c4c16(0x21a)),git_provider_1=require(a163_0x3c4c16(0x218)),url_1=require('url'),core_1=require('../../../../core');function a163_0x5a05(){const _0x93731e=['6772QxkEmd','BitbucketCredentialsDto','use','post','object','credentials','3100480wVNOzX','7250310feoYsc','grant_type=client_credentials','Logger','MAX_REQUEST_PER_HOUR','user','apply','10163IKRdxX','16748210JZfPFC','get','513dIHsEL','toString','constructor','(((.+)+)+)+$','../credentials/dto/bitbucket-credentials.dto','getHeaders','Inject','./git-api.service','accessTokenExpiresAt','headers','decorate','now','getAuthorizationHeader','access\x20token\x20verification','refreshToken','interceptors','617264REquEF','username','250HkbAVx','setAccessToken','info','createRequest','getCurrentUser','access\x20token\x20will\x20be\x20refreshed','logger','/site/oauth2/access_token','../types/git-provider','6293189HPtpNQ','../providers.tokens','token\x20is\x20valid','request','Service','135loDTRz','__decorate','typedi','default','design:paramtypes','__esModule','axios','pathname','__metadata','metadata','defineProperty','Tokens','length','function','checkAccessToken','__importDefault','BitbucketApiService','name','search'];a163_0x5a05=function(){return _0x93731e;};return a163_0x5a05();}let BitbucketApiService=BitbucketApiService_1=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x706cb3,_0x6352de){const _0x8a4101=a163_0x3c4c16;super(_0x706cb3,_0x6352de),this[_0x8a4101(0x206)]=-0x1,this[_0x8a4101(0x1f8)]=0x3e8;}[a163_0x3c4c16(0x213)](_0x483690){const _0x4ddf39=a163_0x3c4c16,_0x3f15a2=super['createRequest'](_0x483690);return _0x3f15a2[_0x4ddf39(0x20d)][_0x4ddf39(0x21c)][_0x4ddf39(0x1f0)](async _0x173568=>{const _0x4610f1=_0x4ddf39;return await this['checkAccessToken'](),_0x173568[_0x4610f1(0x207)]['Authorization']=this[_0x4610f1(0x1f3)][_0x4610f1(0x20a)](),_0x173568;}),_0x3f15a2;}async[a163_0x3c4c16(0x22c)](){const _0x1e8e27=a163_0x3c4c16;BitbucketApiService_1[_0x1e8e27(0x216)][_0x1e8e27(0x212)](_0x1e8e27(0x20b));if(Date[_0x1e8e27(0x209)]()<this[_0x1e8e27(0x206)]){BitbucketApiService_1[_0x1e8e27(0x216)][_0x1e8e27(0x212)](_0x1e8e27(0x21b));return;}await this[_0x1e8e27(0x20c)]();}async[a163_0x3c4c16(0x20c)](){const _0x5cc312=a163_0x3c4c16;BitbucketApiService_1[_0x5cc312(0x216)][_0x5cc312(0x212)](_0x5cc312(0x215));const {clientId:_0x369c00,clientSecret:_0x3c5ed6}=this[_0x5cc312(0x1f3)],_0xb082af=new url_1['URL']('https://bitbucket.org');_0xb082af[_0x5cc312(0x20f)]=_0x369c00,_0xb082af['password']=_0x3c5ed6,_0xb082af[_0x5cc312(0x225)]=_0x5cc312(0x217);const {data:_0x41e24c}=await axios_1[_0x5cc312(0x221)][_0x5cc312(0x1f1)](_0xb082af[_0x5cc312(0x1ff)](),_0x5cc312(0x1f6)),{expires_in:_0x472eae,access_token:_0x42df92}=_0x41e24c;this[_0x5cc312(0x206)]=Date['now']()+_0x472eae*0x3e8,this[_0x5cc312(0x1f3)][_0x5cc312(0x211)](_0x42df92),BitbucketApiService_1[_0x5cc312(0x216)][_0x5cc312(0x212)]('new\x20access\x20token:\x20'+_0x42df92);}[a163_0x3c4c16(0x203)](){return{};}[a163_0x3c4c16(0x214)](){const _0x35598d=a163_0x3c4c16;return this[_0x35598d(0x21c)][_0x35598d(0x1fd)](_0x35598d(0x1f9));}async['isLoggedIn'](){const _0x24181e=a163_0x3c4c16;return await this[_0x24181e(0x214)](),!![];}};BitbucketApiService[a163_0x3c4c16(0x216)]=new core_1[(a163_0x3c4c16(0x1f7))](BitbucketApiService_1[a163_0x3c4c16(0x1ec)]),BitbucketApiService=BitbucketApiService_1=__decorate([(0x0,typedi_1[a163_0x3c4c16(0x21d)])(),__param(0x0,(0x0,typedi_1[a163_0x3c4c16(0x204)])(providers_tokens_1[a163_0x3c4c16(0x229)]['provider'])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a163_0x3c4c16(0x229)][a163_0x3c4c16(0x1f3)])),__metadata(a163_0x3c4c16(0x222),[String,bitbucket_credentials_dto_1[a163_0x3c4c16(0x1ef)]])],BitbucketApiService),exports[a163_0x3c4c16(0x22e)]=BitbucketApiService;