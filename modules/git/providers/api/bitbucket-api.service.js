const a107_0xd95881=a107_0x1957;(function(_0x24a31a,_0x2714d0){const _0x5e22cb=a107_0x1957,_0xc42f1=_0x24a31a();while(!![]){try{const _0x262a76=parseInt(_0x5e22cb(0x165))/0x1*(-parseInt(_0x5e22cb(0x15f))/0x2)+-parseInt(_0x5e22cb(0x17b))/0x3+-parseInt(_0x5e22cb(0x180))/0x4+parseInt(_0x5e22cb(0x17a))/0x5*(parseInt(_0x5e22cb(0x186))/0x6)+parseInt(_0x5e22cb(0x17c))/0x7+parseInt(_0x5e22cb(0x15a))/0x8+parseInt(_0x5e22cb(0x15b))/0x9;if(_0x262a76===_0x2714d0)break;else _0xc42f1['push'](_0xc42f1['shift']());}catch(_0x57e5c2){_0xc42f1['push'](_0xc42f1['shift']());}}}(a107_0x17db,0xbe3eb));const a107_0x5443b2=(function(){let _0x14421d=!![];return function(_0x5993ea,_0x50b3a6){const _0x439236=_0x14421d?function(){const _0xcd7706=a107_0x1957;if(_0x50b3a6){const _0x373f25=_0x50b3a6[_0xcd7706(0x157)](_0x5993ea,arguments);return _0x50b3a6=null,_0x373f25;}}:function(){};return _0x14421d=![],_0x439236;};}()),a107_0x118650=a107_0x5443b2(this,function(){const _0x74a3=a107_0x1957;return a107_0x118650[_0x74a3(0x17f)]()[_0x74a3(0x166)]('(((.+)+)+)+$')[_0x74a3(0x17f)]()[_0x74a3(0x170)](a107_0x118650)[_0x74a3(0x166)]('(((.+)+)+)+$');});a107_0x118650();'use strict';var __decorate=this&&this[a107_0xd95881(0x172)]||function(_0x5e47f5,_0x348ca2,_0x3a9e12,_0xb34e6d){const _0x268aa0=a107_0xd95881;var _0x205f8a=arguments[_0x268aa0(0x160)],_0x165152=_0x205f8a<0x3?_0x348ca2:_0xb34e6d===null?_0xb34e6d=Object[_0x268aa0(0x17d)](_0x348ca2,_0x3a9e12):_0xb34e6d,_0x546893;if(typeof Reflect===_0x268aa0(0x16d)&&typeof Reflect['decorate']==='function')_0x165152=Reflect['decorate'](_0x5e47f5,_0x348ca2,_0x3a9e12,_0xb34e6d);else{for(var _0x8feca1=_0x5e47f5['length']-0x1;_0x8feca1>=0x0;_0x8feca1--)if(_0x546893=_0x5e47f5[_0x8feca1])_0x165152=(_0x205f8a<0x3?_0x546893(_0x165152):_0x205f8a>0x3?_0x546893(_0x348ca2,_0x3a9e12,_0x165152):_0x546893(_0x348ca2,_0x3a9e12))||_0x165152;}return _0x205f8a>0x3&&_0x165152&&Object[_0x268aa0(0x187)](_0x348ca2,_0x3a9e12,_0x165152),_0x165152;},__metadata=this&&this[a107_0xd95881(0x175)]||function(_0x4273ce,_0x2659b9){const _0x56772a=a107_0xd95881;if(typeof Reflect===_0x56772a(0x16d)&&typeof Reflect[_0x56772a(0x16a)]===_0x56772a(0x155))return Reflect[_0x56772a(0x16a)](_0x4273ce,_0x2659b9);},__param=this&&this[a107_0xd95881(0x153)]||function(_0x35e3c0,_0x54110d){return function(_0x398d49,_0x27e194){_0x54110d(_0x398d49,_0x27e194,_0x35e3c0);};},__importDefault=this&&this[a107_0xd95881(0x16f)]||function(_0x5b1ab8){const _0x3c0c70=a107_0xd95881;return _0x5b1ab8&&_0x5b1ab8[_0x3c0c70(0x17e)]?_0x5b1ab8:{'default':_0x5b1ab8};};Object[a107_0xd95881(0x187)](exports,a107_0xd95881(0x17e),{'value':!![]}),exports[a107_0xd95881(0x167)]=void 0x0;const axios_1=__importDefault(require(a107_0xd95881(0x158))),typedi_1=require(a107_0xd95881(0x173)),git_api_service_1=require(a107_0xd95881(0x18a)),bitbucket_credentials_dto_1=require(a107_0xd95881(0x179)),providers_tokens_1=require(a107_0xd95881(0x154)),git_provider_1=require(a107_0xd95881(0x156)),url_1=require(a107_0xd95881(0x184));function a107_0x1957(_0x537eaf,_0x5267f8){const _0x1579ef=a107_0x17db();return a107_0x1957=function(_0x118650,_0x5443b2){_0x118650=_0x118650-0x153;let _0x17db42=_0x1579ef[_0x118650];return _0x17db42;},a107_0x1957(_0x537eaf,_0x5267f8);}function a107_0x17db(){const _0x4ffcf8=['getCurrentUser','__decorate','typedi','now','__metadata','request','checkAccessToken','credentials','../credentials/dto/bitbucket-credentials.dto','8230pMAhqJ','3757191KhdNMe','5639158PKckuK','getOwnPropertyDescriptor','__esModule','toString','960808zzvYMo','/site/oauth2/access_token','Inject','MAX_REQUEST_PER_HOUR','url','pathname','2958IlHomR','defineProperty','createRequest','user','./git-api.service','use','Authorization','__param','../providers.tokens','function','../types/git-provider','apply','axios','grant_type=client_credentials','8188368gxrsEH','3643119EDzMjf','default','Service','GitApiService','1547134FPKfag','length','https://bitbucket.org','isLoggedIn','design:paramtypes','accessTokenExpiresAt','1diTbSF','search','BitbucketApiService','URL','BitbucketCredentialsDto','metadata','get','refreshToken','object','Tokens','__importDefault','constructor'];a107_0x17db=function(){return _0x4ffcf8;};return a107_0x17db();}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a107_0xd95881(0x15e)]{constructor(_0x1048b4,_0x421da2){const _0x36d5ef=a107_0xd95881;super(_0x1048b4,_0x421da2),this[_0x36d5ef(0x164)]=-0x1,this[_0x36d5ef(0x183)]=0x3e8;}[a107_0xd95881(0x188)](_0x247877){const _0x2b70d4=a107_0xd95881,_0x2cc82b=super[_0x2b70d4(0x188)](_0x247877);return _0x2cc82b['interceptors']['request'][_0x2b70d4(0x18b)](async _0x3b17e6=>{const _0x8d08a7=_0x2b70d4;return await this[_0x8d08a7(0x177)](),_0x3b17e6['headers'][_0x8d08a7(0x18c)]=this[_0x8d08a7(0x178)]['getAuthorizationHeader'](),_0x3b17e6;}),_0x2cc82b;}async[a107_0xd95881(0x177)](){const _0xae34c5=a107_0xd95881;if(Date[_0xae34c5(0x174)]()<this['accessTokenExpiresAt'])return;await this[_0xae34c5(0x16c)]();}async[a107_0xd95881(0x16c)](){const _0x345cd1=a107_0xd95881,{clientId:_0x139e2f,clientSecret:_0x1314b6}=this['credentials'],_0x4d1d68=new url_1[(_0x345cd1(0x168))](_0x345cd1(0x161));_0x4d1d68['username']=_0x139e2f,_0x4d1d68['password']=_0x1314b6,_0x4d1d68[_0x345cd1(0x185)]=_0x345cd1(0x181);const {data:_0xa70971}=await axios_1[_0x345cd1(0x15c)]['post'](_0x4d1d68[_0x345cd1(0x17f)](),_0x345cd1(0x159)),{expires_in:_0x553fb6,access_token:_0x95f86}=_0xa70971;this[_0x345cd1(0x164)]=Date[_0x345cd1(0x174)]()+_0x553fb6*0x3e8,this[_0x345cd1(0x178)]['setAccessToken'](_0x95f86);}['getHeaders'](){return{};}['getCurrentUser'](){const _0x15d415=a107_0xd95881;return this[_0x15d415(0x176)][_0x15d415(0x16b)](_0x15d415(0x189));}async[a107_0xd95881(0x162)](){const _0x18e30c=a107_0xd95881;return await this[_0x18e30c(0x171)](),!![];}};BitbucketApiService=__decorate([typedi_1[a107_0xd95881(0x15d)](),__param(0x0,typedi_1[a107_0xd95881(0x182)](providers_tokens_1[a107_0xd95881(0x16e)]['provider'])),__param(0x1,typedi_1['Inject'](providers_tokens_1[a107_0xd95881(0x16e)][a107_0xd95881(0x178)])),__metadata(a107_0xd95881(0x163),[String,bitbucket_credentials_dto_1[a107_0xd95881(0x169)]])],BitbucketApiService),exports[a107_0xd95881(0x167)]=BitbucketApiService;