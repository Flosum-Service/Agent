const a163_0x21c4b1=a163_0x46d0;(function(_0x2916ab,_0x25e526){const _0x5b213d=a163_0x46d0,_0x442a8e=_0x2916ab();while(!![]){try{const _0x2096d4=-parseInt(_0x5b213d(0xac))/0x1+parseInt(_0x5b213d(0xb0))/0x2*(-parseInt(_0x5b213d(0xd7))/0x3)+parseInt(_0x5b213d(0xd1))/0x4+parseInt(_0x5b213d(0xb6))/0x5+-parseInt(_0x5b213d(0xce))/0x6*(-parseInt(_0x5b213d(0xaa))/0x7)+parseInt(_0x5b213d(0xca))/0x8+-parseInt(_0x5b213d(0xb8))/0x9;if(_0x2096d4===_0x25e526)break;else _0x442a8e['push'](_0x442a8e['shift']());}catch(_0x4491e3){_0x442a8e['push'](_0x442a8e['shift']());}}}(a163_0x211b,0x74720));const a163_0x23baf0=(function(){let _0x3fb0ef=!![];return function(_0x5186e9,_0x1c17a4){const _0x1ab904=_0x3fb0ef?function(){const _0x1f06a8=a163_0x46d0;if(_0x1c17a4){const _0xde10ab=_0x1c17a4[_0x1f06a8(0xa4)](_0x5186e9,arguments);return _0x1c17a4=null,_0xde10ab;}}:function(){};return _0x3fb0ef=![],_0x1ab904;};}()),a163_0x53930b=a163_0x23baf0(this,function(){const _0x8dc6b3=a163_0x46d0;return a163_0x53930b['toString']()[_0x8dc6b3(0xbc)](_0x8dc6b3(0xb7))[_0x8dc6b3(0xdc)]()[_0x8dc6b3(0xc3)](a163_0x53930b)['search'](_0x8dc6b3(0xb7));});function a163_0x46d0(_0x55cf0d,_0x5007fc){const _0x902afa=a163_0x211b();return a163_0x46d0=function(_0x53930b,_0x23baf0){_0x53930b=_0x53930b-0xa4;let _0x211bf5=_0x902afa[_0x53930b];return _0x211bf5;},a163_0x46d0(_0x55cf0d,_0x5007fc);}a163_0x53930b();'use strict';function a163_0x211b(){const _0x47b077=['10395PkbccP','MAX_REQUEST_PER_HOUR','831370oRCyNM','createRequest','design:paramtypes','password','10TfRIFw','now','typedi','headers','credentials','https://bitbucket.org','1239325OjOfeg','(((.+)+)+)+$','6418395IVNDtF','checkAccessToken','getCurrentUser','metadata','search','../providers.tokens','get','defineProperty','getHeaders','URL','__decorate','constructor','Tokens','decorate','axios','refreshToken','GitApiService','__importDefault','7349328Ycysso','accessTokenExpiresAt','pathname','post','2736XCKtky','interceptors','getAuthorizationHeader','745876buIPee','user','object','use','default','BitbucketCredentialsDto','5205MAcsAl','grant_type=client_credentials','Inject','../types/git-provider','/site/oauth2/access_token','toString','length','isLoggedIn','apply','./git-api.service','username','function','request','url'];a163_0x211b=function(){return _0x47b077;};return a163_0x211b();}var __decorate=this&&this[a163_0x21c4b1(0xc2)]||function(_0x17c302,_0x50dcee,_0x1b7463,_0x298fae){const _0x20eaef=a163_0x21c4b1;var _0x232fa9=arguments['length'],_0x558db1=_0x232fa9<0x3?_0x50dcee:_0x298fae===null?_0x298fae=Object['getOwnPropertyDescriptor'](_0x50dcee,_0x1b7463):_0x298fae,_0x2b3419;if(typeof Reflect===_0x20eaef(0xd3)&&typeof Reflect[_0x20eaef(0xc5)]===_0x20eaef(0xa7))_0x558db1=Reflect[_0x20eaef(0xc5)](_0x17c302,_0x50dcee,_0x1b7463,_0x298fae);else{for(var _0x1dce21=_0x17c302[_0x20eaef(0xdd)]-0x1;_0x1dce21>=0x0;_0x1dce21--)if(_0x2b3419=_0x17c302[_0x1dce21])_0x558db1=(_0x232fa9<0x3?_0x2b3419(_0x558db1):_0x232fa9>0x3?_0x2b3419(_0x50dcee,_0x1b7463,_0x558db1):_0x2b3419(_0x50dcee,_0x1b7463))||_0x558db1;}return _0x232fa9>0x3&&_0x558db1&&Object['defineProperty'](_0x50dcee,_0x1b7463,_0x558db1),_0x558db1;},__metadata=this&&this['__metadata']||function(_0x479f0d,_0x43839b){const _0x320b1b=a163_0x21c4b1;if(typeof Reflect===_0x320b1b(0xd3)&&typeof Reflect[_0x320b1b(0xbb)]===_0x320b1b(0xa7))return Reflect['metadata'](_0x479f0d,_0x43839b);},__param=this&&this['__param']||function(_0x436824,_0x4bd617){return function(_0x44b9d7,_0x5212c2){_0x4bd617(_0x44b9d7,_0x5212c2,_0x436824);};},__importDefault=this&&this[a163_0x21c4b1(0xc9)]||function(_0x3faf7f){return _0x3faf7f&&_0x3faf7f['__esModule']?_0x3faf7f:{'default':_0x3faf7f};};Object[a163_0x21c4b1(0xbf)](exports,'__esModule',{'value':!![]}),exports['BitbucketApiService']=void 0x0;const axios_1=__importDefault(require(a163_0x21c4b1(0xc6))),typedi_1=require(a163_0x21c4b1(0xb2)),git_api_service_1=require(a163_0x21c4b1(0xa5)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a163_0x21c4b1(0xbd)),git_provider_1=require(a163_0x21c4b1(0xda)),url_1=require(a163_0x21c4b1(0xa9));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x21c4b1(0xc8)]{constructor(_0x27bebe,_0x5b454a){const _0x170e2e=a163_0x21c4b1;super(_0x27bebe,_0x5b454a),this[_0x170e2e(0xcb)]=-0x1,this[_0x170e2e(0xab)]=0x3e8;}[a163_0x21c4b1(0xad)](_0x17b91e){const _0x24f96c=a163_0x21c4b1,_0xc53bf8=super[_0x24f96c(0xad)](_0x17b91e);return _0xc53bf8[_0x24f96c(0xcf)]['request'][_0x24f96c(0xd4)](async _0x57fe2f=>{const _0x2ed8e3=_0x24f96c;return await this[_0x2ed8e3(0xb9)](),_0x57fe2f[_0x2ed8e3(0xb3)]['Authorization']=this[_0x2ed8e3(0xb4)][_0x2ed8e3(0xd0)](),_0x57fe2f;}),_0xc53bf8;}async['checkAccessToken'](){const _0xd1013f=a163_0x21c4b1;if(Date[_0xd1013f(0xb1)]()<this[_0xd1013f(0xcb)])return;await this[_0xd1013f(0xc7)]();}async['refreshToken'](){const _0x32c87f=a163_0x21c4b1,{clientId:_0x352d15,clientSecret:_0xb2f377}=this[_0x32c87f(0xb4)],_0x1522b7=new url_1[(_0x32c87f(0xc1))](_0x32c87f(0xb5));_0x1522b7[_0x32c87f(0xa6)]=_0x352d15,_0x1522b7[_0x32c87f(0xaf)]=_0xb2f377,_0x1522b7[_0x32c87f(0xcc)]=_0x32c87f(0xdb);const {data:_0x4100b9}=await axios_1[_0x32c87f(0xd5)][_0x32c87f(0xcd)](_0x1522b7[_0x32c87f(0xdc)](),_0x32c87f(0xd8)),{expires_in:_0x36679a,access_token:_0x1b459b}=_0x4100b9;this[_0x32c87f(0xcb)]=Date[_0x32c87f(0xb1)]()+_0x36679a*0x3e8,this[_0x32c87f(0xb4)]['setAccessToken'](_0x1b459b);}[a163_0x21c4b1(0xc0)](){return{};}[a163_0x21c4b1(0xba)](){const _0x3dd919=a163_0x21c4b1;return this[_0x3dd919(0xa8)][_0x3dd919(0xbe)](_0x3dd919(0xd2));}async[a163_0x21c4b1(0xde)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a163_0x21c4b1(0xd9)])(providers_tokens_1[a163_0x21c4b1(0xc4)]['provider'])),__param(0x1,(0x0,typedi_1[a163_0x21c4b1(0xd9)])(providers_tokens_1[a163_0x21c4b1(0xc4)][a163_0x21c4b1(0xb4)])),__metadata(a163_0x21c4b1(0xae),[String,bitbucket_credentials_dto_1[a163_0x21c4b1(0xd6)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;