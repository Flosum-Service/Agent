function a123_0x33b1(){const _0x14ebf7=['refreshToken','__param','typedi','use','16EFrNIL','(((.+)+)+)+$','522566XNhuJD','getHeaders','URL','__decorate','object','getAuthorizationHeader','createRequest','822634owsqoT','Tokens','post','307878fzBwwO','20csHQiq','../types/git-provider','defineProperty','interceptors','headers','function','request','toString','3570336ZYyCwz','435075WVQavu','setAccessToken','credentials','metadata','10000017QbloKv','checkAccessToken','url','now','BitbucketApiService','../credentials/dto/bitbucket-credentials.dto','Inject','BitbucketCredentialsDto','__importDefault','grant_type=client_credentials','/site/oauth2/access_token','Authorization','provider','get','user','apply','536412JIwkQC','./git-api.service','__esModule','pathname','constructor','length','design:paramtypes','decorate','getOwnPropertyDescriptor','search','accessTokenExpiresAt','https://bitbucket.org'];a123_0x33b1=function(){return _0x14ebf7;};return a123_0x33b1();}const a123_0x39b39f=a123_0x38f9;function a123_0x38f9(_0x202ffa,_0x53e4b2){const _0x19e631=a123_0x33b1();return a123_0x38f9=function(_0x2b55fc,_0x453aaf){_0x2b55fc=_0x2b55fc-0x1c1;let _0x33b104=_0x19e631[_0x2b55fc];return _0x33b104;},a123_0x38f9(_0x202ffa,_0x53e4b2);}(function(_0x23319c,_0x3b628f){const _0x1a4cc3=a123_0x38f9,_0x5bbddf=_0x23319c();while(!![]){try{const _0x13870b=-parseInt(_0x1a4cc3(0x1e5))/0x1+-parseInt(_0x1a4cc3(0x1ec))/0x2+-parseInt(_0x1a4cc3(0x1ef))/0x3*(parseInt(_0x1a4cc3(0x1f0))/0x4)+parseInt(_0x1a4cc3(0x1f9))/0x5+-parseInt(_0x1a4cc3(0x1d3))/0x6+-parseInt(_0x1a4cc3(0x1f8))/0x7+parseInt(_0x1a4cc3(0x1e3))/0x8*(parseInt(_0x1a4cc3(0x1c3))/0x9);if(_0x13870b===_0x3b628f)break;else _0x5bbddf['push'](_0x5bbddf['shift']());}catch(_0x3109f7){_0x5bbddf['push'](_0x5bbddf['shift']());}}}(a123_0x33b1,0x4027a));const a123_0x453aaf=(function(){let _0x5c6184=!![];return function(_0x511faf,_0x4a5646){const _0x4d18b9=_0x5c6184?function(){const _0x2d1513=a123_0x38f9;if(_0x4a5646){const _0x22e445=_0x4a5646[_0x2d1513(0x1d2)](_0x511faf,arguments);return _0x4a5646=null,_0x22e445;}}:function(){};return _0x5c6184=![],_0x4d18b9;};}()),a123_0x2b55fc=a123_0x453aaf(this,function(){const _0x530d57=a123_0x38f9;return a123_0x2b55fc[_0x530d57(0x1f7)]()[_0x530d57(0x1dc)]('(((.+)+)+)+$')['toString']()[_0x530d57(0x1d7)](a123_0x2b55fc)[_0x530d57(0x1dc)](_0x530d57(0x1e4));});a123_0x2b55fc();'use strict';var __decorate=this&&this[a123_0x39b39f(0x1e8)]||function(_0x21c0f6,_0x20e2e3,_0xb94411,_0x4caa98){const _0x478b10=a123_0x39b39f;var _0x179dc7=arguments['length'],_0x140d63=_0x179dc7<0x3?_0x20e2e3:_0x4caa98===null?_0x4caa98=Object[_0x478b10(0x1db)](_0x20e2e3,_0xb94411):_0x4caa98,_0x4dfbb8;if(typeof Reflect==='object'&&typeof Reflect[_0x478b10(0x1da)]==='function')_0x140d63=Reflect[_0x478b10(0x1da)](_0x21c0f6,_0x20e2e3,_0xb94411,_0x4caa98);else{for(var _0x12f91f=_0x21c0f6[_0x478b10(0x1d8)]-0x1;_0x12f91f>=0x0;_0x12f91f--)if(_0x4dfbb8=_0x21c0f6[_0x12f91f])_0x140d63=(_0x179dc7<0x3?_0x4dfbb8(_0x140d63):_0x179dc7>0x3?_0x4dfbb8(_0x20e2e3,_0xb94411,_0x140d63):_0x4dfbb8(_0x20e2e3,_0xb94411))||_0x140d63;}return _0x179dc7>0x3&&_0x140d63&&Object[_0x478b10(0x1f2)](_0x20e2e3,_0xb94411,_0x140d63),_0x140d63;},__metadata=this&&this['__metadata']||function(_0x70389f,_0x1c879a){const _0xfd66b6=a123_0x39b39f;if(typeof Reflect===_0xfd66b6(0x1e9)&&typeof Reflect['metadata']===_0xfd66b6(0x1f5))return Reflect[_0xfd66b6(0x1c2)](_0x70389f,_0x1c879a);},__param=this&&this[a123_0x39b39f(0x1e0)]||function(_0x561842,_0x5719ca){return function(_0x17fae2,_0x1f35b9){_0x5719ca(_0x17fae2,_0x1f35b9,_0x561842);};},__importDefault=this&&this[a123_0x39b39f(0x1cb)]||function(_0x80ca4e){const _0x40b863=a123_0x39b39f;return _0x80ca4e&&_0x80ca4e[_0x40b863(0x1d5)]?_0x80ca4e:{'default':_0x80ca4e};};Object[a123_0x39b39f(0x1f2)](exports,'__esModule',{'value':!![]}),exports[a123_0x39b39f(0x1c7)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a123_0x39b39f(0x1e1)),git_api_service_1=require(a123_0x39b39f(0x1d4)),bitbucket_credentials_dto_1=require(a123_0x39b39f(0x1c8)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a123_0x39b39f(0x1f1)),url_1=require(a123_0x39b39f(0x1c5));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x7d235e,_0x4115c5){const _0x2ec010=a123_0x39b39f;super(_0x7d235e,_0x4115c5),this[_0x2ec010(0x1dd)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a123_0x39b39f(0x1eb)](_0xf37e0a){const _0x40cf7f=a123_0x39b39f,_0x41417e=super[_0x40cf7f(0x1eb)](_0xf37e0a);return _0x41417e[_0x40cf7f(0x1f3)][_0x40cf7f(0x1f6)][_0x40cf7f(0x1e2)](async _0x8a1979=>{const _0x1278e7=_0x40cf7f;return await this[_0x1278e7(0x1c4)](),_0x8a1979[_0x1278e7(0x1f4)]||(_0x8a1979['headers']={}),_0x8a1979[_0x1278e7(0x1f4)][_0x1278e7(0x1ce)]=this['credentials'][_0x1278e7(0x1ea)](),_0x8a1979;}),_0x41417e;}async[a123_0x39b39f(0x1c4)](){const _0x500f90=a123_0x39b39f;if(Date[_0x500f90(0x1c6)]()<this[_0x500f90(0x1dd)])return;await this[_0x500f90(0x1df)]();}async['refreshToken'](){const _0x9d317b=a123_0x39b39f,{clientId:_0x1b8b6c,clientSecret:_0x3dd669}=this[_0x9d317b(0x1c1)],_0x13cacb=new url_1[(_0x9d317b(0x1e7))](_0x9d317b(0x1de));_0x13cacb['username']=_0x1b8b6c,_0x13cacb['password']=_0x3dd669,_0x13cacb[_0x9d317b(0x1d6)]=_0x9d317b(0x1cd);const {data:_0x1d401a}=await axios_1['default'][_0x9d317b(0x1ee)](_0x13cacb[_0x9d317b(0x1f7)](),_0x9d317b(0x1cc)),{expires_in:_0x1a33a6,access_token:_0x1fbcb7}=_0x1d401a;this['accessTokenExpiresAt']=Date['now']()+_0x1a33a6*0x3e8,this[_0x9d317b(0x1c1)][_0x9d317b(0x1fa)](_0x1fbcb7);}[a123_0x39b39f(0x1e6)](){return{};}['getCurrentUser'](){const _0x5f208f=a123_0x39b39f;return this[_0x5f208f(0x1f6)][_0x5f208f(0x1d0)](_0x5f208f(0x1d1));}async['isLoggedIn'](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a123_0x39b39f(0x1c9)])(providers_tokens_1[a123_0x39b39f(0x1ed)][a123_0x39b39f(0x1cf)])),__param(0x1,(0x0,typedi_1[a123_0x39b39f(0x1c9)])(providers_tokens_1[a123_0x39b39f(0x1ed)]['credentials'])),__metadata(a123_0x39b39f(0x1d9),[String,bitbucket_credentials_dto_1[a123_0x39b39f(0x1ca)]])],BitbucketApiService),exports[a123_0x39b39f(0x1c7)]=BitbucketApiService;