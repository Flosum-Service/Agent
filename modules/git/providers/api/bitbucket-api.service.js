const a163_0x1b65ed=a163_0x3232;function a163_0x3232(_0xae2791,_0xd53dcc){const _0x1f6bbf=a163_0x125c();return a163_0x3232=function(_0x3236a9,_0x5e0ace){_0x3236a9=_0x3236a9-0x1bd;let _0x125c3e=_0x1f6bbf[_0x3236a9];return _0x125c3e;},a163_0x3232(_0xae2791,_0xd53dcc);}function a163_0x125c(){const _0x4bffc0=['object','__importDefault','request','headers','4886152rGMBKp','9BgMJxR','Authorization','metadata','user','__param','provider','apply','isLoggedIn','setAccessToken','createRequest','26306CNcOif','Tokens','get','164kXTrbl','typedi','function','158515zZsSLv','https://bitbucket.org','BitbucketApiService','Inject','length','toString','../credentials/dto/bitbucket-credentials.dto','grant_type=client_credentials','__metadata','/site/oauth2/access_token','./git-api.service','refreshToken','GitApiService','24266xkYZYk','(((.+)+)+)+$','1471898QABvRH','now','design:paramtypes','URL','getCurrentUser','constructor','getHeaders','checkAccessToken','default','getAuthorizationHeader','getOwnPropertyDescriptor','credentials','accessTokenExpiresAt','search','../providers.tokens','defineProperty','8270YOsnkk','BitbucketCredentialsDto','pathname','username','942HsenWb','1054791rOoBAL','../types/git-provider','decorate','618544MIQzwT','password','interceptors','__esModule','axios'];a163_0x125c=function(){return _0x4bffc0;};return a163_0x125c();}(function(_0x2b1f30,_0x24ffa2){const _0x47be5e=a163_0x3232,_0x2f8c28=_0x2b1f30();while(!![]){try{const _0x5637ff=parseInt(_0x47be5e(0x1e6))/0x1+-parseInt(_0x47be5e(0x1ce))/0x2+parseInt(_0x47be5e(0x1e3))/0x3+-parseInt(_0x47be5e(0x1fd))/0x4*(parseInt(_0x47be5e(0x1bf))/0x5)+-parseInt(_0x47be5e(0x1e2))/0x6*(-parseInt(_0x47be5e(0x1fa))/0x7)+-parseInt(_0x47be5e(0x1ef))/0x8*(parseInt(_0x47be5e(0x1f0))/0x9)+-parseInt(_0x47be5e(0x1de))/0xa*(-parseInt(_0x47be5e(0x1cc))/0xb);if(_0x5637ff===_0x24ffa2)break;else _0x2f8c28['push'](_0x2f8c28['shift']());}catch(_0xdc3b08){_0x2f8c28['push'](_0x2f8c28['shift']());}}}(a163_0x125c,0xb42b0));const a163_0x5e0ace=(function(){let _0x2fc990=!![];return function(_0x119846,_0x13f588){const _0x54954e=_0x2fc990?function(){const _0x11a13f=a163_0x3232;if(_0x13f588){const _0x34f7dd=_0x13f588[_0x11a13f(0x1f6)](_0x119846,arguments);return _0x13f588=null,_0x34f7dd;}}:function(){};return _0x2fc990=![],_0x54954e;};}()),a163_0x3236a9=a163_0x5e0ace(this,function(){const _0x50df80=a163_0x3232;return a163_0x3236a9[_0x50df80(0x1c4)]()[_0x50df80(0x1db)](_0x50df80(0x1cd))['toString']()[_0x50df80(0x1d3)](a163_0x3236a9)[_0x50df80(0x1db)](_0x50df80(0x1cd));});a163_0x3236a9();'use strict';var __decorate=this&&this['__decorate']||function(_0x1c133a,_0x2e5b82,_0x44fa57,_0x250f24){const _0x30dc97=a163_0x3232;var _0x21851b=arguments['length'],_0x33b752=_0x21851b<0x3?_0x2e5b82:_0x250f24===null?_0x250f24=Object[_0x30dc97(0x1d8)](_0x2e5b82,_0x44fa57):_0x250f24,_0x2dfb2a;if(typeof Reflect===_0x30dc97(0x1eb)&&typeof Reflect[_0x30dc97(0x1e5)]===_0x30dc97(0x1be))_0x33b752=Reflect[_0x30dc97(0x1e5)](_0x1c133a,_0x2e5b82,_0x44fa57,_0x250f24);else{for(var _0x511d4d=_0x1c133a[_0x30dc97(0x1c3)]-0x1;_0x511d4d>=0x0;_0x511d4d--)if(_0x2dfb2a=_0x1c133a[_0x511d4d])_0x33b752=(_0x21851b<0x3?_0x2dfb2a(_0x33b752):_0x21851b>0x3?_0x2dfb2a(_0x2e5b82,_0x44fa57,_0x33b752):_0x2dfb2a(_0x2e5b82,_0x44fa57))||_0x33b752;}return _0x21851b>0x3&&_0x33b752&&Object[_0x30dc97(0x1dd)](_0x2e5b82,_0x44fa57,_0x33b752),_0x33b752;},__metadata=this&&this[a163_0x1b65ed(0x1c7)]||function(_0x64736f,_0xd5d6d5){const _0x57f7d6=a163_0x1b65ed;if(typeof Reflect===_0x57f7d6(0x1eb)&&typeof Reflect[_0x57f7d6(0x1f2)]==='function')return Reflect[_0x57f7d6(0x1f2)](_0x64736f,_0xd5d6d5);},__param=this&&this[a163_0x1b65ed(0x1f4)]||function(_0x5cc116,_0x1531f3){return function(_0xb8e4d5,_0x194848){_0x1531f3(_0xb8e4d5,_0x194848,_0x5cc116);};},__importDefault=this&&this[a163_0x1b65ed(0x1ec)]||function(_0x3b8bb2){const _0x1bc6e0=a163_0x1b65ed;return _0x3b8bb2&&_0x3b8bb2[_0x1bc6e0(0x1e9)]?_0x3b8bb2:{'default':_0x3b8bb2};};Object[a163_0x1b65ed(0x1dd)](exports,'__esModule',{'value':!![]}),exports[a163_0x1b65ed(0x1c1)]=void 0x0;const axios_1=__importDefault(require(a163_0x1b65ed(0x1ea))),typedi_1=require(a163_0x1b65ed(0x1bd)),git_api_service_1=require(a163_0x1b65ed(0x1c9)),bitbucket_credentials_dto_1=require(a163_0x1b65ed(0x1c5)),providers_tokens_1=require(a163_0x1b65ed(0x1dc)),git_provider_1=require(a163_0x1b65ed(0x1e4)),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x1b65ed(0x1cb)]{constructor(_0x51fe9f,_0x5195e5){const _0xe76fa3=a163_0x1b65ed;super(_0x51fe9f,_0x5195e5),this[_0xe76fa3(0x1da)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a163_0x1b65ed(0x1f9)](_0x4e09a3){const _0x2eca94=a163_0x1b65ed,_0x5a9ea9=super[_0x2eca94(0x1f9)](_0x4e09a3);return _0x5a9ea9[_0x2eca94(0x1e8)][_0x2eca94(0x1ed)]['use'](async _0x38da55=>{const _0x33ba8d=_0x2eca94;return await this[_0x33ba8d(0x1d5)](),_0x38da55[_0x33ba8d(0x1ee)][_0x33ba8d(0x1f1)]=this[_0x33ba8d(0x1d9)][_0x33ba8d(0x1d7)](),_0x38da55;}),_0x5a9ea9;}async[a163_0x1b65ed(0x1d5)](){const _0x20722d=a163_0x1b65ed;if(Date[_0x20722d(0x1cf)]()<this['accessTokenExpiresAt'])return;await this['refreshToken']();}async[a163_0x1b65ed(0x1ca)](){const _0x1a3e31=a163_0x1b65ed,{clientId:_0x3e3ce5,clientSecret:_0x285935}=this['credentials'],_0x4c1230=new url_1[(_0x1a3e31(0x1d1))](_0x1a3e31(0x1c0));_0x4c1230[_0x1a3e31(0x1e1)]=_0x3e3ce5,_0x4c1230[_0x1a3e31(0x1e7)]=_0x285935,_0x4c1230[_0x1a3e31(0x1e0)]=_0x1a3e31(0x1c8);const {data:_0x15d628}=await axios_1[_0x1a3e31(0x1d6)]['post'](_0x4c1230['toString'](),_0x1a3e31(0x1c6)),{expires_in:_0x5ea501,access_token:_0x1068a6}=_0x15d628;this[_0x1a3e31(0x1da)]=Date[_0x1a3e31(0x1cf)]()+_0x5ea501*0x3e8,this[_0x1a3e31(0x1d9)][_0x1a3e31(0x1f8)](_0x1068a6);}[a163_0x1b65ed(0x1d4)](){return{};}[a163_0x1b65ed(0x1d2)](){const _0x2e6295=a163_0x1b65ed;return this[_0x2e6295(0x1ed)][_0x2e6295(0x1fc)](_0x2e6295(0x1f3));}async[a163_0x1b65ed(0x1f7)](){const _0x12a8b6=a163_0x1b65ed;return await this[_0x12a8b6(0x1d2)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a163_0x1b65ed(0x1c2)])(providers_tokens_1[a163_0x1b65ed(0x1fb)][a163_0x1b65ed(0x1f5)])),__param(0x1,(0x0,typedi_1[a163_0x1b65ed(0x1c2)])(providers_tokens_1[a163_0x1b65ed(0x1fb)][a163_0x1b65ed(0x1d9)])),__metadata(a163_0x1b65ed(0x1d0),[String,bitbucket_credentials_dto_1[a163_0x1b65ed(0x1df)]])],BitbucketApiService),exports[a163_0x1b65ed(0x1c1)]=BitbucketApiService;