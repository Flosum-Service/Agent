const a196_0x508704=a196_0x28df;(function(_0x49016c,_0x194a41){const _0x25bbd1=a196_0x28df,_0x2e4744=_0x49016c();while(!![]){try{const _0x8fe452=-parseInt(_0x25bbd1(0x1ea))/0x1*(parseInt(_0x25bbd1(0x206))/0x2)+parseInt(_0x25bbd1(0x1e6))/0x3*(-parseInt(_0x25bbd1(0x1e8))/0x4)+-parseInt(_0x25bbd1(0x1ff))/0x5*(-parseInt(_0x25bbd1(0x1f0))/0x6)+-parseInt(_0x25bbd1(0x1e5))/0x7+parseInt(_0x25bbd1(0x21b))/0x8*(parseInt(_0x25bbd1(0x20a))/0x9)+parseInt(_0x25bbd1(0x209))/0xa*(parseInt(_0x25bbd1(0x1f4))/0xb)+parseInt(_0x25bbd1(0x1f7))/0xc;if(_0x8fe452===_0x194a41)break;else _0x2e4744['push'](_0x2e4744['shift']());}catch(_0x38e082){_0x2e4744['push'](_0x2e4744['shift']());}}}(a196_0x2811,0x4d4b8));const a196_0x9fc333=(function(){let _0x1253ea=!![];return function(_0x322242,_0x53b8f5){const _0xa5a55e=_0x1253ea?function(){const _0x4b8b70=a196_0x28df;if(_0x53b8f5){const _0x9db826=_0x53b8f5[_0x4b8b70(0x212)](_0x322242,arguments);return _0x53b8f5=null,_0x9db826;}}:function(){};return _0x1253ea=![],_0xa5a55e;};}()),a196_0x4132f5=a196_0x9fc333(this,function(){const _0x35647c=a196_0x28df;return a196_0x4132f5[_0x35647c(0x1fa)]()['search'](_0x35647c(0x1e3))[_0x35647c(0x1fa)]()['constructor'](a196_0x4132f5)[_0x35647c(0x200)]('(((.+)+)+)+$');});a196_0x4132f5();'use strict';var __decorate=this&&this[a196_0x508704(0x1f3)]||function(_0x4aa608,_0x1d7b90,_0x19cd41,_0x145de1){const _0x116d62=a196_0x508704;var _0x5c76e7=arguments[_0x116d62(0x1e4)],_0x62eb24=_0x5c76e7<0x3?_0x1d7b90:_0x145de1===null?_0x145de1=Object[_0x116d62(0x20c)](_0x1d7b90,_0x19cd41):_0x145de1,_0x263d0e;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x116d62(0x219))_0x62eb24=Reflect['decorate'](_0x4aa608,_0x1d7b90,_0x19cd41,_0x145de1);else{for(var _0x4f0c74=_0x4aa608['length']-0x1;_0x4f0c74>=0x0;_0x4f0c74--)if(_0x263d0e=_0x4aa608[_0x4f0c74])_0x62eb24=(_0x5c76e7<0x3?_0x263d0e(_0x62eb24):_0x5c76e7>0x3?_0x263d0e(_0x1d7b90,_0x19cd41,_0x62eb24):_0x263d0e(_0x1d7b90,_0x19cd41))||_0x62eb24;}return _0x5c76e7>0x3&&_0x62eb24&&Object['defineProperty'](_0x1d7b90,_0x19cd41,_0x62eb24),_0x62eb24;},__metadata=this&&this['__metadata']||function(_0x244761,_0x11d7b3){const _0x54d4f8=a196_0x508704;if(typeof Reflect===_0x54d4f8(0x1fb)&&typeof Reflect['metadata']===_0x54d4f8(0x219))return Reflect[_0x54d4f8(0x1eb)](_0x244761,_0x11d7b3);},__param=this&&this['__param']||function(_0x4dcb23,_0x4a3e30){return function(_0x230dec,_0x35db3f){_0x4a3e30(_0x230dec,_0x35db3f,_0x4dcb23);};},__importDefault=this&&this[a196_0x508704(0x1f8)]||function(_0x28d976){const _0x3d1359=a196_0x508704;return _0x28d976&&_0x28d976[_0x3d1359(0x20b)]?_0x28d976:{'default':_0x28d976};};function a196_0x2811(){const _0xc579c5=['checkAccessToken','Inject','70zuIaMo','search','request','use','axios','interceptors','./git-api.service','2NHVZpo','getCurrentUser','../types/git-provider','10McPleW','776916zJbkRP','__esModule','getOwnPropertyDescriptor','https://bitbucket.org','isLoggedIn','credentials','getHeaders','defineProperty','apply','Tokens','pathname','GitApiService','accessTokenExpiresAt','BitbucketApiService','url','function','password','40cnbCfd','refreshToken','Authorization','default','(((.+)+)+)+$','length','433006HEAIJr','169467mrrXnJ','createRequest','28FPkQlJ','headers','591228jFCNvd','metadata','get','../credentials/dto/bitbucket-credentials.dto','grant_type=client_credentials','user','32646mHoMhK','provider','BitbucketCredentialsDto','__decorate','6729019jxlsFZ','now','username','2947032kAlwqr','__importDefault','getAuthorizationHeader','toString','object','post'];a196_0x2811=function(){return _0xc579c5;};return a196_0x2811();}Object[a196_0x508704(0x211)](exports,a196_0x508704(0x20b),{'value':!![]}),exports[a196_0x508704(0x217)]=void 0x0;const axios_1=__importDefault(require(a196_0x508704(0x203))),typedi_1=require('typedi'),git_api_service_1=require(a196_0x508704(0x205)),bitbucket_credentials_dto_1=require(a196_0x508704(0x1ed)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a196_0x508704(0x208)),url_1=require(a196_0x508704(0x218));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a196_0x508704(0x215)]{constructor(_0xf72d7f,_0x35cf7b){const _0x4a1218=a196_0x508704;super(_0xf72d7f,_0x35cf7b),this[_0x4a1218(0x216)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a196_0x508704(0x1e7)](_0x22e4db){const _0xb1d086=a196_0x508704,_0x256b00=super[_0xb1d086(0x1e7)](_0x22e4db);return _0x256b00[_0xb1d086(0x204)][_0xb1d086(0x201)][_0xb1d086(0x202)](async _0x3e6d03=>{const _0x333c1f=_0xb1d086;return await this[_0x333c1f(0x1fd)](),_0x3e6d03[_0x333c1f(0x1e9)][_0x333c1f(0x21d)]=this['credentials'][_0x333c1f(0x1f9)](),_0x3e6d03;}),_0x256b00;}async[a196_0x508704(0x1fd)](){const _0x1f0d8e=a196_0x508704;if(Date[_0x1f0d8e(0x1f5)]()<this[_0x1f0d8e(0x216)])return;await this['refreshToken']();}async[a196_0x508704(0x21c)](){const _0x5efcb6=a196_0x508704,{clientId:_0x146b4d,clientSecret:_0x12d677}=this['credentials'],_0x323dbe=new url_1['URL'](_0x5efcb6(0x20d));_0x323dbe[_0x5efcb6(0x1f6)]=_0x146b4d,_0x323dbe[_0x5efcb6(0x21a)]=_0x12d677,_0x323dbe[_0x5efcb6(0x214)]='/site/oauth2/access_token';const {data:_0x12703b}=await axios_1[_0x5efcb6(0x21e)][_0x5efcb6(0x1fc)](_0x323dbe['toString'](),_0x5efcb6(0x1ee)),{expires_in:_0x1fa801,access_token:_0x58590d}=_0x12703b;this[_0x5efcb6(0x216)]=Date[_0x5efcb6(0x1f5)]()+_0x1fa801*0x3e8,this['credentials']['setAccessToken'](_0x58590d);}[a196_0x508704(0x210)](){return{};}[a196_0x508704(0x207)](){const _0x1fb7bc=a196_0x508704;return this[_0x1fb7bc(0x201)][_0x1fb7bc(0x1ec)](_0x1fb7bc(0x1ef));}async[a196_0x508704(0x20e)](){const _0x8f07fb=a196_0x508704;return await this[_0x8f07fb(0x207)](),!![];}};function a196_0x28df(_0x2edd3e,_0x19ae41){const _0x4a059a=a196_0x2811();return a196_0x28df=function(_0x4132f5,_0x9fc333){_0x4132f5=_0x4132f5-0x1e3;let _0x281113=_0x4a059a[_0x4132f5];return _0x281113;},a196_0x28df(_0x2edd3e,_0x19ae41);}BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a196_0x508704(0x1fe)])(providers_tokens_1[a196_0x508704(0x213)][a196_0x508704(0x1f1)])),__param(0x1,(0x0,typedi_1[a196_0x508704(0x1fe)])(providers_tokens_1['Tokens'][a196_0x508704(0x20f)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a196_0x508704(0x1f2)]])],BitbucketApiService),exports[a196_0x508704(0x217)]=BitbucketApiService;