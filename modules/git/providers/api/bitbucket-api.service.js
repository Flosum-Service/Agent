const a163_0x2a5317=a163_0x5382;(function(_0x188f64,_0x81dbaa){const _0x134578=a163_0x5382,_0x217998=_0x188f64();while(!![]){try{const _0x553fe4=-parseInt(_0x134578(0x1ca))/0x1*(-parseInt(_0x134578(0x1cc))/0x2)+-parseInt(_0x134578(0x1af))/0x3*(-parseInt(_0x134578(0x1c7))/0x4)+-parseInt(_0x134578(0x1ac))/0x5*(parseInt(_0x134578(0x1bd))/0x6)+-parseInt(_0x134578(0x1b9))/0x7*(-parseInt(_0x134578(0x1be))/0x8)+-parseInt(_0x134578(0x1ae))/0x9+-parseInt(_0x134578(0x1b7))/0xa*(-parseInt(_0x134578(0x19d))/0xb)+-parseInt(_0x134578(0x19f))/0xc*(-parseInt(_0x134578(0x196))/0xd);if(_0x553fe4===_0x81dbaa)break;else _0x217998['push'](_0x217998['shift']());}catch(_0x19e4a0){_0x217998['push'](_0x217998['shift']());}}}(a163_0x3058,0x24f61));function a163_0x5382(_0x471f1b,_0x4eda3b){const _0x395546=a163_0x3058();return a163_0x5382=function(_0x48a12f,_0x66f10a){_0x48a12f=_0x48a12f-0x191;let _0x3058eb=_0x395546[_0x48a12f];return _0x3058eb;},a163_0x5382(_0x471f1b,_0x4eda3b);}const a163_0x66f10a=(function(){let _0x4c3e45=!![];return function(_0x4001b0,_0x2cd353){const _0x45b47f=_0x4c3e45?function(){const _0x3003f5=a163_0x5382;if(_0x2cd353){const _0x448698=_0x2cd353[_0x3003f5(0x1a8)](_0x4001b0,arguments);return _0x2cd353=null,_0x448698;}}:function(){};return _0x4c3e45=![],_0x45b47f;};}()),a163_0x48a12f=a163_0x66f10a(this,function(){const _0x3ebec9=a163_0x5382;return a163_0x48a12f[_0x3ebec9(0x1ba)]()[_0x3ebec9(0x1c3)](_0x3ebec9(0x1c0))[_0x3ebec9(0x1ba)]()[_0x3ebec9(0x1cf)](a163_0x48a12f)['search']('(((.+)+)+)+$');});a163_0x48a12f();'use strict';var __decorate=this&&this['__decorate']||function(_0x1b61f8,_0x322359,_0x10b296,_0x56dbb2){const _0x2f9f79=a163_0x5382;var _0x2bc4cc=arguments[_0x2f9f79(0x1b6)],_0x548fff=_0x2bc4cc<0x3?_0x322359:_0x56dbb2===null?_0x56dbb2=Object[_0x2f9f79(0x197)](_0x322359,_0x10b296):_0x56dbb2,_0x2c0f7a;if(typeof Reflect===_0x2f9f79(0x1c1)&&typeof Reflect[_0x2f9f79(0x193)]===_0x2f9f79(0x192))_0x548fff=Reflect[_0x2f9f79(0x193)](_0x1b61f8,_0x322359,_0x10b296,_0x56dbb2);else{for(var _0x218a59=_0x1b61f8[_0x2f9f79(0x1b6)]-0x1;_0x218a59>=0x0;_0x218a59--)if(_0x2c0f7a=_0x1b61f8[_0x218a59])_0x548fff=(_0x2bc4cc<0x3?_0x2c0f7a(_0x548fff):_0x2bc4cc>0x3?_0x2c0f7a(_0x322359,_0x10b296,_0x548fff):_0x2c0f7a(_0x322359,_0x10b296))||_0x548fff;}return _0x2bc4cc>0x3&&_0x548fff&&Object[_0x2f9f79(0x1c4)](_0x322359,_0x10b296,_0x548fff),_0x548fff;},__metadata=this&&this['__metadata']||function(_0x2827f6,_0x26e248){const _0x3b7c01=a163_0x5382;if(typeof Reflect===_0x3b7c01(0x1c1)&&typeof Reflect[_0x3b7c01(0x1aa)]==='function')return Reflect[_0x3b7c01(0x1aa)](_0x2827f6,_0x26e248);},__param=this&&this['__param']||function(_0xb6d94c,_0x3a111e){return function(_0x22060c,_0x5600b1){_0x3a111e(_0x22060c,_0x5600b1,_0xb6d94c);};},__importDefault=this&&this[a163_0x2a5317(0x1a5)]||function(_0x538847){return _0x538847&&_0x538847['__esModule']?_0x538847:{'default':_0x538847};};Object[a163_0x2a5317(0x1c4)](exports,a163_0x2a5317(0x1c9),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a163_0x2a5317(0x1b1)),git_api_service_1=require(a163_0x2a5317(0x1b0)),bitbucket_credentials_dto_1=require(a163_0x2a5317(0x1c2)),providers_tokens_1=require(a163_0x2a5317(0x1ad)),git_provider_1=require('../types/git-provider'),url_1=require(a163_0x2a5317(0x1a4));function a163_0x3058(){const _0x468b25=['design:paramtypes','post','1588jiNJsi','https://bitbucket.org','__esModule','12150nsRAcW','Service','12zFiUnW','BitbucketCredentialsDto','now','constructor','password','function','decorate','createRequest','refreshToken','26pqsjhG','getOwnPropertyDescriptor','MAX_REQUEST_PER_HOUR','user','/site/oauth2/access_token','accessTokenExpiresAt','Inject','44bFYuYj','request','407604FqBFLA','isLoggedIn','pathname','credentials','GitApiService','url','__importDefault','getCurrentUser','provider','apply','setAccessToken','metadata','getAuthorizationHeader','30YtEGuN','../providers.tokens','2473182IlxhvY','264tbzrCb','./git-api.service','typedi','Tokens','grant_type=client_credentials','interceptors','Authorization','length','437730XWXHFm','getHeaders','797153MEhaXe','toString','get','BitbucketApiService','38550IHPuTf','8ApRIwx','use','(((.+)+)+)+$','object','../credentials/dto/bitbucket-credentials.dto','search','defineProperty'];a163_0x3058=function(){return _0x468b25;};return a163_0x3058();}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x2a5317(0x1a3)]{constructor(_0x210a48,_0x2d0d1d){const _0x46ffd2=a163_0x2a5317;super(_0x210a48,_0x2d0d1d),this[_0x46ffd2(0x19b)]=-0x1,this[_0x46ffd2(0x198)]=0x3e8;}[a163_0x2a5317(0x194)](_0x110cab){const _0x288dc6=a163_0x2a5317,_0xb18e71=super[_0x288dc6(0x194)](_0x110cab);return _0xb18e71[_0x288dc6(0x1b4)][_0x288dc6(0x19e)][_0x288dc6(0x1bf)](async _0xd38c0c=>{const _0x52a67f=_0x288dc6;return await this['checkAccessToken'](),_0xd38c0c['headers'][_0x52a67f(0x1b5)]=this[_0x52a67f(0x1a2)][_0x52a67f(0x1ab)](),_0xd38c0c;}),_0xb18e71;}async['checkAccessToken'](){const _0x40bda1=a163_0x2a5317;if(Date[_0x40bda1(0x1ce)]()<this[_0x40bda1(0x19b)])return;await this[_0x40bda1(0x195)]();}async[a163_0x2a5317(0x195)](){const _0x244f4e=a163_0x2a5317,{clientId:_0x14ec43,clientSecret:_0x103599}=this[_0x244f4e(0x1a2)],_0x424068=new url_1['URL'](_0x244f4e(0x1c8));_0x424068['username']=_0x14ec43,_0x424068[_0x244f4e(0x191)]=_0x103599,_0x424068[_0x244f4e(0x1a1)]=_0x244f4e(0x19a);const {data:_0x10b96d}=await axios_1['default'][_0x244f4e(0x1c6)](_0x424068[_0x244f4e(0x1ba)](),_0x244f4e(0x1b3)),{expires_in:_0x263234,access_token:_0x34f921}=_0x10b96d;this[_0x244f4e(0x19b)]=Date[_0x244f4e(0x1ce)]()+_0x263234*0x3e8,this[_0x244f4e(0x1a2)][_0x244f4e(0x1a9)](_0x34f921);}[a163_0x2a5317(0x1b8)](){return{};}[a163_0x2a5317(0x1a6)](){const _0x53f412=a163_0x2a5317;return this[_0x53f412(0x19e)][_0x53f412(0x1bb)](_0x53f412(0x199));}async[a163_0x2a5317(0x1a0)](){const _0xafdac1=a163_0x2a5317;return await this[_0xafdac1(0x1a6)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a163_0x2a5317(0x1cb)])(),__param(0x0,(0x0,typedi_1[a163_0x2a5317(0x19c)])(providers_tokens_1[a163_0x2a5317(0x1b2)][a163_0x2a5317(0x1a7)])),__param(0x1,(0x0,typedi_1[a163_0x2a5317(0x19c)])(providers_tokens_1['Tokens'][a163_0x2a5317(0x1a2)])),__metadata(a163_0x2a5317(0x1c5),[String,bitbucket_credentials_dto_1[a163_0x2a5317(0x1cd)]])],BitbucketApiService),exports[a163_0x2a5317(0x1bc)]=BitbucketApiService;