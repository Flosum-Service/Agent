const a124_0x260595=a124_0xcaba;(function(_0x3e3e9f,_0x5dd812){const _0x2e9cce=a124_0xcaba,_0x594669=_0x3e3e9f();while(!![]){try{const _0x200890=parseInt(_0x2e9cce(0xfd))/0x1+parseInt(_0x2e9cce(0xf9))/0x2+parseInt(_0x2e9cce(0x106))/0x3*(parseInt(_0x2e9cce(0xea))/0x4)+-parseInt(_0x2e9cce(0x118))/0x5*(-parseInt(_0x2e9cce(0x11b))/0x6)+parseInt(_0x2e9cce(0xf0))/0x7+parseInt(_0x2e9cce(0x111))/0x8*(-parseInt(_0x2e9cce(0xe8))/0x9)+-parseInt(_0x2e9cce(0x11c))/0xa;if(_0x200890===_0x5dd812)break;else _0x594669['push'](_0x594669['shift']());}catch(_0x4458bb){_0x594669['push'](_0x594669['shift']());}}}(a124_0x370c,0x4fd48));const a124_0x340905=(function(){let _0x3b839e=!![];return function(_0x5d8e8a,_0x36d822){const _0x3f04c4=_0x3b839e?function(){const _0x5c15c4=a124_0xcaba;if(_0x36d822){const _0x5b28d2=_0x36d822[_0x5c15c4(0xe7)](_0x5d8e8a,arguments);return _0x36d822=null,_0x5b28d2;}}:function(){};return _0x3b839e=![],_0x3f04c4;};}()),a124_0x5ccd22=a124_0x340905(this,function(){const _0x54c16e=a124_0xcaba;return a124_0x5ccd22[_0x54c16e(0xfe)]()[_0x54c16e(0xfa)](_0x54c16e(0x107))[_0x54c16e(0xfe)]()[_0x54c16e(0x117)](a124_0x5ccd22)[_0x54c16e(0xfa)](_0x54c16e(0x107));});function a124_0xcaba(_0x944eb6,_0x323705){const _0x1336d8=a124_0x370c();return a124_0xcaba=function(_0x5ccd22,_0x340905){_0x5ccd22=_0x5ccd22-0xe7;let _0x370cb1=_0x1336d8[_0x5ccd22];return _0x370cb1;},a124_0xcaba(_0x944eb6,_0x323705);}a124_0x5ccd22();'use strict';function a124_0x370c(){const _0x50b6f0=['design:paramtypes','24esaYDd','(((.+)+)+)+$','metadata','provider','Inject','axios','./git-api.service','../types/git-provider','defineProperty','/site/oauth2/access_token','isLoggedIn','46040IVqpNw','typedi','getOwnPropertyDescriptor','grant_type=client_credentials','url','interceptors','constructor','16040wvjpse','Authorization','refreshToken','246pbkFdQ','8427650ZOAnqQ','createRequest','headers','getCurrentUser','setAccessToken','__esModule','Service','getHeaders','apply','936AyJFav','password','209608EOBBlI','object','BitbucketCredentialsDto','now','GitApiService','__importDefault','3342003anVhTp','credentials','accessTokenExpiresAt','decorate','username','__metadata','MAX_REQUEST_PER_HOUR','checkAccessToken','Tokens','989780eWpabc','search','../providers.tokens','length','245206BRjrZo','toString','__decorate','post','URL','request','user','BitbucketApiService'];a124_0x370c=function(){return _0x50b6f0;};return a124_0x370c();}var __decorate=this&&this[a124_0x260595(0xff)]||function(_0x64e5a2,_0xdd6779,_0x58a3cf,_0x4fa2da){const _0xd6cb99=a124_0x260595;var _0x46aae3=arguments['length'],_0x5e5433=_0x46aae3<0x3?_0xdd6779:_0x4fa2da===null?_0x4fa2da=Object[_0xd6cb99(0x113)](_0xdd6779,_0x58a3cf):_0x4fa2da,_0x2e8699;if(typeof Reflect===_0xd6cb99(0xeb)&&typeof Reflect[_0xd6cb99(0xf3)]==='function')_0x5e5433=Reflect[_0xd6cb99(0xf3)](_0x64e5a2,_0xdd6779,_0x58a3cf,_0x4fa2da);else{for(var _0x1f87ac=_0x64e5a2[_0xd6cb99(0xfc)]-0x1;_0x1f87ac>=0x0;_0x1f87ac--)if(_0x2e8699=_0x64e5a2[_0x1f87ac])_0x5e5433=(_0x46aae3<0x3?_0x2e8699(_0x5e5433):_0x46aae3>0x3?_0x2e8699(_0xdd6779,_0x58a3cf,_0x5e5433):_0x2e8699(_0xdd6779,_0x58a3cf))||_0x5e5433;}return _0x46aae3>0x3&&_0x5e5433&&Object[_0xd6cb99(0x10e)](_0xdd6779,_0x58a3cf,_0x5e5433),_0x5e5433;},__metadata=this&&this[a124_0x260595(0xf5)]||function(_0x2bf555,_0x3f2b5d){const _0x497910=a124_0x260595;if(typeof Reflect==='object'&&typeof Reflect[_0x497910(0x108)]==='function')return Reflect[_0x497910(0x108)](_0x2bf555,_0x3f2b5d);},__param=this&&this['__param']||function(_0x727c7a,_0x218d74){return function(_0x487596,_0x107cc0){_0x218d74(_0x487596,_0x107cc0,_0x727c7a);};},__importDefault=this&&this[a124_0x260595(0xef)]||function(_0x2ea02a){return _0x2ea02a&&_0x2ea02a['__esModule']?_0x2ea02a:{'default':_0x2ea02a};};Object['defineProperty'](exports,a124_0x260595(0x121),{'value':!![]}),exports[a124_0x260595(0x104)]=void 0x0;const axios_1=__importDefault(require(a124_0x260595(0x10b))),typedi_1=require(a124_0x260595(0x112)),git_api_service_1=require(a124_0x260595(0x10c)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a124_0x260595(0xfb)),git_provider_1=require(a124_0x260595(0x10d)),url_1=require(a124_0x260595(0x115));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a124_0x260595(0xee)]{constructor(_0x3f0b98,_0x2a20d1){const _0x514ad4=a124_0x260595;super(_0x3f0b98,_0x2a20d1),this[_0x514ad4(0xf2)]=-0x1,this[_0x514ad4(0xf6)]=0x3e8;}[a124_0x260595(0x11d)](_0x37f22d){const _0x390d33=a124_0x260595,_0x27d43a=super[_0x390d33(0x11d)](_0x37f22d);return _0x27d43a[_0x390d33(0x116)][_0x390d33(0x102)]['use'](async _0x17ee71=>{const _0x920638=_0x390d33;return await this[_0x920638(0xf7)](),_0x17ee71[_0x920638(0x11e)]||(_0x17ee71['headers']={}),_0x17ee71[_0x920638(0x11e)][_0x920638(0x119)]=this[_0x920638(0xf1)]['getAuthorizationHeader'](),_0x17ee71;}),_0x27d43a;}async['checkAccessToken'](){const _0x2ddc77=a124_0x260595;if(Date[_0x2ddc77(0xed)]()<this[_0x2ddc77(0xf2)])return;await this['refreshToken']();}async[a124_0x260595(0x11a)](){const _0x4b523b=a124_0x260595,{clientId:_0x11c505,clientSecret:_0x2e2b93}=this[_0x4b523b(0xf1)],_0x3df09c=new url_1[(_0x4b523b(0x101))]('https://bitbucket.org');_0x3df09c[_0x4b523b(0xf4)]=_0x11c505,_0x3df09c[_0x4b523b(0xe9)]=_0x2e2b93,_0x3df09c['pathname']=_0x4b523b(0x10f);const {data:_0x50ed90}=await axios_1['default'][_0x4b523b(0x100)](_0x3df09c['toString'](),_0x4b523b(0x114)),{expires_in:_0x29ccac,access_token:_0x5d0822}=_0x50ed90;this['accessTokenExpiresAt']=Date[_0x4b523b(0xed)]()+_0x29ccac*0x3e8,this[_0x4b523b(0xf1)][_0x4b523b(0x120)](_0x5d0822);}[a124_0x260595(0x123)](){return{};}[a124_0x260595(0x11f)](){const _0x4de90e=a124_0x260595;return this['request']['get'](_0x4de90e(0x103));}async[a124_0x260595(0x110)](){const _0x16c49d=a124_0x260595;return await this[_0x16c49d(0x11f)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a124_0x260595(0x122)])(),__param(0x0,(0x0,typedi_1[a124_0x260595(0x10a)])(providers_tokens_1[a124_0x260595(0xf8)][a124_0x260595(0x109)])),__param(0x1,(0x0,typedi_1[a124_0x260595(0x10a)])(providers_tokens_1['Tokens'][a124_0x260595(0xf1)])),__metadata(a124_0x260595(0x105),[String,bitbucket_credentials_dto_1[a124_0x260595(0xec)]])],BitbucketApiService),exports[a124_0x260595(0x104)]=BitbucketApiService;