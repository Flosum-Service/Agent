const a163_0x583bb8=a163_0x1f0a;(function(_0x2201b2,_0x274821){const _0x465d01=a163_0x1f0a,_0x2942a=_0x2201b2();while(!![]){try{const _0x146aa4=parseInt(_0x465d01(0xec))/0x1*(parseInt(_0x465d01(0x10b))/0x2)+-parseInt(_0x465d01(0xe3))/0x3*(-parseInt(_0x465d01(0xf9))/0x4)+-parseInt(_0x465d01(0xd2))/0x5*(parseInt(_0x465d01(0xd8))/0x6)+-parseInt(_0x465d01(0xf4))/0x7*(parseInt(_0x465d01(0x10a))/0x8)+-parseInt(_0x465d01(0xfa))/0x9+-parseInt(_0x465d01(0xde))/0xa+parseInt(_0x465d01(0xee))/0xb;if(_0x146aa4===_0x274821)break;else _0x2942a['push'](_0x2942a['shift']());}catch(_0xeb0277){_0x2942a['push'](_0x2942a['shift']());}}}(a163_0x1bcb,0x48570));const a163_0x4dca41=(function(){let _0x203579=!![];return function(_0x1dadaf,_0x8447bc){const _0x39f81d=_0x203579?function(){const _0x46bd00=a163_0x1f0a;if(_0x8447bc){const _0x4f4d79=_0x8447bc[_0x46bd00(0xe7)](_0x1dadaf,arguments);return _0x8447bc=null,_0x4f4d79;}}:function(){};return _0x203579=![],_0x39f81d;};}()),a163_0x2e286c=a163_0x4dca41(this,function(){const _0x1f3830=a163_0x1f0a;return a163_0x2e286c['toString']()['search'](_0x1f3830(0xf0))[_0x1f3830(0xd1)]()['constructor'](a163_0x2e286c)[_0x1f3830(0xd5)]('(((.+)+)+)+$');});a163_0x2e286c();'use strict';function a163_0x1f0a(_0x54635d,_0x5c37ce){const _0x3c4e17=a163_0x1bcb();return a163_0x1f0a=function(_0x2e286c,_0x4dca41){_0x2e286c=_0x2e286c-0xd1;let _0x1bcb53=_0x3c4e17[_0x2e286c];return _0x1bcb53;},a163_0x1f0a(_0x54635d,_0x5c37ce);}var __decorate=this&&this['__decorate']||function(_0xc5f894,_0x4eabd4,_0x21928e,_0x41d611){const _0x3d31e4=a163_0x1f0a;var _0x18b86d=arguments[_0x3d31e4(0xf2)],_0x59c1ea=_0x18b86d<0x3?_0x4eabd4:_0x41d611===null?_0x41d611=Object[_0x3d31e4(0xd3)](_0x4eabd4,_0x21928e):_0x41d611,_0x3fc5e5;if(typeof Reflect===_0x3d31e4(0xdf)&&typeof Reflect[_0x3d31e4(0xf7)]===_0x3d31e4(0xe1))_0x59c1ea=Reflect[_0x3d31e4(0xf7)](_0xc5f894,_0x4eabd4,_0x21928e,_0x41d611);else{for(var _0xb0a9a1=_0xc5f894['length']-0x1;_0xb0a9a1>=0x0;_0xb0a9a1--)if(_0x3fc5e5=_0xc5f894[_0xb0a9a1])_0x59c1ea=(_0x18b86d<0x3?_0x3fc5e5(_0x59c1ea):_0x18b86d>0x3?_0x3fc5e5(_0x4eabd4,_0x21928e,_0x59c1ea):_0x3fc5e5(_0x4eabd4,_0x21928e))||_0x59c1ea;}return _0x18b86d>0x3&&_0x59c1ea&&Object[_0x3d31e4(0xed)](_0x4eabd4,_0x21928e,_0x59c1ea),_0x59c1ea;},__metadata=this&&this[a163_0x583bb8(0xe8)]||function(_0x29f6f0,_0x2e0722){const _0x5297b8=a163_0x583bb8;if(typeof Reflect==='object'&&typeof Reflect[_0x5297b8(0xd6)]===_0x5297b8(0xe1))return Reflect[_0x5297b8(0xd6)](_0x29f6f0,_0x2e0722);},__param=this&&this[a163_0x583bb8(0x100)]||function(_0x1f982f,_0x38c515){return function(_0x55ab54,_0x267894){_0x38c515(_0x55ab54,_0x267894,_0x1f982f);};},__importDefault=this&&this[a163_0x583bb8(0xe6)]||function(_0x59cc94){const _0x4638c0=a163_0x583bb8;return _0x59cc94&&_0x59cc94[_0x4638c0(0xd9)]?_0x59cc94:{'default':_0x59cc94};};function a163_0x1bcb(){const _0x41443c=['pathname','BitbucketCredentialsDto','MAX_REQUEST_PER_HOUR','../types/git-provider','3615970uiXDLL','object','axios','function','credentials','18138kQtyAp','grant_type=client_credentials','typedi','__importDefault','apply','__metadata','/site/oauth2/access_token','getCurrentUser','./git-api.service','449438OPwiev','defineProperty','15441525xWJvPE','GitApiService','(((.+)+)+)+$','https://bitbucket.org','length','now','544418LGkHJQ','createRequest','headers','decorate','isLoggedIn','8XvdmOf','3564720hSDIGZ','url','checkAccessToken','user','interceptors','Authorization','__param','../credentials/dto/bitbucket-credentials.dto','accessTokenExpiresAt','refreshToken','Tokens','design:paramtypes','setAccessToken','BitbucketApiService','username','URL','56KLakXW','2cBIlMf','toString','5NIasMm','getOwnPropertyDescriptor','Inject','search','metadata','Service','1601436SdvuFS','__esModule'];a163_0x1bcb=function(){return _0x41443c;};return a163_0x1bcb();}Object[a163_0x583bb8(0xed)](exports,a163_0x583bb8(0xd9),{'value':!![]}),exports[a163_0x583bb8(0x107)]=void 0x0;const axios_1=__importDefault(require(a163_0x583bb8(0xe0))),typedi_1=require(a163_0x583bb8(0xe5)),git_api_service_1=require(a163_0x583bb8(0xeb)),bitbucket_credentials_dto_1=require(a163_0x583bb8(0x101)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a163_0x583bb8(0xdd)),url_1=require(a163_0x583bb8(0xfb));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x583bb8(0xef)]{constructor(_0x487ef8,_0x48cdb3){const _0x2ebf0f=a163_0x583bb8;super(_0x487ef8,_0x48cdb3),this[_0x2ebf0f(0x102)]=-0x1,this[_0x2ebf0f(0xdc)]=0x3e8;}['createRequest'](_0x365251){const _0x1b5961=a163_0x583bb8,_0x32e394=super[_0x1b5961(0xf5)](_0x365251);return _0x32e394[_0x1b5961(0xfe)]['request']['use'](async _0x59394f=>{const _0x5f1c36=_0x1b5961;return await this[_0x5f1c36(0xfc)](),_0x59394f[_0x5f1c36(0xf6)][_0x5f1c36(0xff)]=this['credentials']['getAuthorizationHeader'](),_0x59394f;}),_0x32e394;}async[a163_0x583bb8(0xfc)](){const _0x1069aa=a163_0x583bb8;if(Date[_0x1069aa(0xf3)]()<this['accessTokenExpiresAt'])return;await this[_0x1069aa(0x103)]();}async[a163_0x583bb8(0x103)](){const _0x527bce=a163_0x583bb8,{clientId:_0x43bf32,clientSecret:_0xb76e61}=this['credentials'],_0x2c4d4f=new url_1[(_0x527bce(0x109))](_0x527bce(0xf1));_0x2c4d4f[_0x527bce(0x108)]=_0x43bf32,_0x2c4d4f['password']=_0xb76e61,_0x2c4d4f[_0x527bce(0xda)]=_0x527bce(0xe9);const {data:_0x29a4d7}=await axios_1['default']['post'](_0x2c4d4f[_0x527bce(0xd1)](),_0x527bce(0xe4)),{expires_in:_0xce4857,access_token:_0x54b8ba}=_0x29a4d7;this['accessTokenExpiresAt']=Date[_0x527bce(0xf3)]()+_0xce4857*0x3e8,this[_0x527bce(0xe2)][_0x527bce(0x106)](_0x54b8ba);}['getHeaders'](){return{};}['getCurrentUser'](){const _0x5c69e3=a163_0x583bb8;return this['request']['get'](_0x5c69e3(0xfd));}async[a163_0x583bb8(0xf8)](){const _0x170c01=a163_0x583bb8;return await this[_0x170c01(0xea)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a163_0x583bb8(0xd7)])(),__param(0x0,(0x0,typedi_1['Inject'])(providers_tokens_1['Tokens']['provider'])),__param(0x1,(0x0,typedi_1[a163_0x583bb8(0xd4)])(providers_tokens_1[a163_0x583bb8(0x104)][a163_0x583bb8(0xe2)])),__metadata(a163_0x583bb8(0x105),[String,bitbucket_credentials_dto_1[a163_0x583bb8(0xdb)]])],BitbucketApiService),exports[a163_0x583bb8(0x107)]=BitbucketApiService;