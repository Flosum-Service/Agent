const a195_0x14e1e6=a195_0xa048;function a195_0x236e(){const _0x53cf9a=['../types/git-provider','isLoggedIn','toString','default','1565627NDurDr','use','headers','__decorate','../providers.tokens','34155ItlGRB','getCurrentUser','Service','__metadata','get','GitApiService','length','5209970OVAYpJ','password','Inject','setAccessToken','typedi','https://bitbucket.org','getHeaders','refreshToken','user','search','object','__param','BitbucketApiService','11534nCjpax','grant_type=client_credentials','8MVRtKa','checkAccessToken','/site/oauth2/access_token','post','8244KYTPLi','2899143SdSTsH','MAX_REQUEST_PER_HOUR','101406HoCFbv','335UKVyNd','url','credentials','(((.+)+)+)+$','getAuthorizationHeader','URL','Tokens','now','./git-api.service','constructor','getOwnPropertyDescriptor','pathname','request','__importDefault','decorate','createRequest','apply','accessTokenExpiresAt','defineProperty','76KGUZtq'];a195_0x236e=function(){return _0x53cf9a;};return a195_0x236e();}(function(_0x211ee8,_0x1d5b03){const _0x43b5b5=a195_0xa048,_0x545d13=_0x211ee8();while(!![]){try{const _0x67fc3b=parseInt(_0x43b5b5(0xd5))/0x1+-parseInt(_0x43b5b5(0xde))/0x2+-parseInt(_0x43b5b5(0xc1))/0x3*(-parseInt(_0x43b5b5(0xb7))/0x4)+-parseInt(_0x43b5b5(0xdf))/0x5*(-parseInt(_0x43b5b5(0xdb))/0x6)+-parseInt(_0x43b5b5(0xbc))/0x7*(parseInt(_0x43b5b5(0xd7))/0x8)+-parseInt(_0x43b5b5(0xdc))/0x9+parseInt(_0x43b5b5(0xc8))/0xa;if(_0x67fc3b===_0x1d5b03)break;else _0x545d13['push'](_0x545d13['shift']());}catch(_0x383f89){_0x545d13['push'](_0x545d13['shift']());}}}(a195_0x236e,0x3babd));function a195_0xa048(_0x48473d,_0xd60eac){const _0x467777=a195_0x236e();return a195_0xa048=function(_0x432279,_0x5314fb){_0x432279=_0x432279-0xb5;let _0x236e4e=_0x467777[_0x432279];return _0x236e4e;},a195_0xa048(_0x48473d,_0xd60eac);}const a195_0x5314fb=(function(){let _0x12cc4d=!![];return function(_0x130c3f,_0x30f097){const _0x599707=_0x12cc4d?function(){const _0xe97911=a195_0xa048;if(_0x30f097){const _0x4d7527=_0x30f097[_0xe97911(0xef)](_0x130c3f,arguments);return _0x30f097=null,_0x4d7527;}}:function(){};return _0x12cc4d=![],_0x599707;};}()),a195_0x432279=a195_0x5314fb(this,function(){const _0x61a6bf=a195_0xa048;return a195_0x432279[_0x61a6bf(0xba)]()[_0x61a6bf(0xd1)](_0x61a6bf(0xe2))['toString']()[_0x61a6bf(0xe8)](a195_0x432279)[_0x61a6bf(0xd1)](_0x61a6bf(0xe2));});a195_0x432279();'use strict';var __decorate=this&&this[a195_0x14e1e6(0xbf)]||function(_0x16b1ae,_0x3198cb,_0x4c7280,_0x771f4a){const _0x1fbf3e=a195_0x14e1e6;var _0x45cda3=arguments[_0x1fbf3e(0xc7)],_0x5abf16=_0x45cda3<0x3?_0x3198cb:_0x771f4a===null?_0x771f4a=Object[_0x1fbf3e(0xe9)](_0x3198cb,_0x4c7280):_0x771f4a,_0x40e65e;if(typeof Reflect===_0x1fbf3e(0xd2)&&typeof Reflect[_0x1fbf3e(0xed)]==='function')_0x5abf16=Reflect[_0x1fbf3e(0xed)](_0x16b1ae,_0x3198cb,_0x4c7280,_0x771f4a);else{for(var _0x464869=_0x16b1ae[_0x1fbf3e(0xc7)]-0x1;_0x464869>=0x0;_0x464869--)if(_0x40e65e=_0x16b1ae[_0x464869])_0x5abf16=(_0x45cda3<0x3?_0x40e65e(_0x5abf16):_0x45cda3>0x3?_0x40e65e(_0x3198cb,_0x4c7280,_0x5abf16):_0x40e65e(_0x3198cb,_0x4c7280))||_0x5abf16;}return _0x45cda3>0x3&&_0x5abf16&&Object[_0x1fbf3e(0xb6)](_0x3198cb,_0x4c7280,_0x5abf16),_0x5abf16;},__metadata=this&&this[a195_0x14e1e6(0xc4)]||function(_0x4171fb,_0x98fbdc){if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x4171fb,_0x98fbdc);},__param=this&&this[a195_0x14e1e6(0xd3)]||function(_0x3358dc,_0x5c81d5){return function(_0x175b9d,_0x3ae8fa){_0x5c81d5(_0x175b9d,_0x3ae8fa,_0x3358dc);};},__importDefault=this&&this[a195_0x14e1e6(0xec)]||function(_0x3bb5f8){return _0x3bb5f8&&_0x3bb5f8['__esModule']?_0x3bb5f8:{'default':_0x3bb5f8};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a195_0x14e1e6(0xd4)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a195_0x14e1e6(0xcc)),git_api_service_1=require(a195_0x14e1e6(0xe7)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a195_0x14e1e6(0xc0)),git_provider_1=require(a195_0x14e1e6(0xb8)),url_1=require(a195_0x14e1e6(0xe0));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a195_0x14e1e6(0xc6)]{constructor(_0x352ed5,_0x3c03c1){const _0x251dc2=a195_0x14e1e6;super(_0x352ed5,_0x3c03c1),this[_0x251dc2(0xb5)]=-0x1,this[_0x251dc2(0xdd)]=0x3e8;}[a195_0x14e1e6(0xee)](_0x243448){const _0xbc06bc=a195_0x14e1e6,_0x59b523=super[_0xbc06bc(0xee)](_0x243448);return _0x59b523['interceptors'][_0xbc06bc(0xeb)][_0xbc06bc(0xbd)](async _0x5badbf=>{const _0x170f59=_0xbc06bc;return await this[_0x170f59(0xd8)](),_0x5badbf[_0x170f59(0xbe)]['Authorization']=this[_0x170f59(0xe1)][_0x170f59(0xe3)](),_0x5badbf;}),_0x59b523;}async[a195_0x14e1e6(0xd8)](){const _0x484ca6=a195_0x14e1e6;if(Date[_0x484ca6(0xe6)]()<this['accessTokenExpiresAt'])return;await this[_0x484ca6(0xcf)]();}async['refreshToken'](){const _0x31d2d8=a195_0x14e1e6,{clientId:_0x16aa26,clientSecret:_0x3b2cc6}=this[_0x31d2d8(0xe1)],_0x4c103c=new url_1[(_0x31d2d8(0xe4))](_0x31d2d8(0xcd));_0x4c103c['username']=_0x16aa26,_0x4c103c[_0x31d2d8(0xc9)]=_0x3b2cc6,_0x4c103c[_0x31d2d8(0xea)]=_0x31d2d8(0xd9);const {data:_0x4ab972}=await axios_1[_0x31d2d8(0xbb)][_0x31d2d8(0xda)](_0x4c103c['toString'](),_0x31d2d8(0xd6)),{expires_in:_0x4ce941,access_token:_0x10308b}=_0x4ab972;this[_0x31d2d8(0xb5)]=Date[_0x31d2d8(0xe6)]()+_0x4ce941*0x3e8,this['credentials'][_0x31d2d8(0xcb)](_0x10308b);}[a195_0x14e1e6(0xce)](){return{};}[a195_0x14e1e6(0xc2)](){const _0x1435b5=a195_0x14e1e6;return this[_0x1435b5(0xeb)][_0x1435b5(0xc5)](_0x1435b5(0xd0));}async[a195_0x14e1e6(0xb9)](){const _0x5cd577=a195_0x14e1e6;return await this[_0x5cd577(0xc2)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a195_0x14e1e6(0xc3)])(),__param(0x0,(0x0,typedi_1['Inject'])(providers_tokens_1[a195_0x14e1e6(0xe5)]['provider'])),__param(0x1,(0x0,typedi_1[a195_0x14e1e6(0xca)])(providers_tokens_1[a195_0x14e1e6(0xe5)][a195_0x14e1e6(0xe1)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;