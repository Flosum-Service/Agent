const a195_0x24e5e2=a195_0x2e9e;(function(_0x2aa0c7,_0x1969ab){const _0xd1f4c9=a195_0x2e9e,_0x20b39a=_0x2aa0c7();while(!![]){try{const _0x4d80f7=parseInt(_0xd1f4c9(0x155))/0x1*(-parseInt(_0xd1f4c9(0x129))/0x2)+parseInt(_0xd1f4c9(0x134))/0x3+parseInt(_0xd1f4c9(0x12a))/0x4+-parseInt(_0xd1f4c9(0x121))/0x5+-parseInt(_0xd1f4c9(0x125))/0x6*(-parseInt(_0xd1f4c9(0x135))/0x7)+parseInt(_0xd1f4c9(0x145))/0x8+-parseInt(_0xd1f4c9(0x130))/0x9;if(_0x4d80f7===_0x1969ab)break;else _0x20b39a['push'](_0x20b39a['shift']());}catch(_0x509757){_0x20b39a['push'](_0x20b39a['shift']());}}}(a195_0x42e8,0x92607));const a195_0x56c6e0=(function(){let _0x581c21=!![];return function(_0x470a97,_0x542cbf){const _0x120ed8=_0x581c21?function(){const _0x1f8974=a195_0x2e9e;if(_0x542cbf){const _0x1ebc72=_0x542cbf[_0x1f8974(0x154)](_0x470a97,arguments);return _0x542cbf=null,_0x1ebc72;}}:function(){};return _0x581c21=![],_0x120ed8;};}()),a195_0x24cea5=a195_0x56c6e0(this,function(){const _0x17ce3b=a195_0x2e9e;return a195_0x24cea5[_0x17ce3b(0x150)]()[_0x17ce3b(0x14d)](_0x17ce3b(0x123))[_0x17ce3b(0x150)]()['constructor'](a195_0x24cea5)[_0x17ce3b(0x14d)]('(((.+)+)+)+$');});function a195_0x2e9e(_0x422047,_0x3d9549){const _0x2db1a5=a195_0x42e8();return a195_0x2e9e=function(_0x24cea5,_0x56c6e0){_0x24cea5=_0x24cea5-0x11b;let _0x42e8cc=_0x2db1a5[_0x24cea5];return _0x42e8cc;},a195_0x2e9e(_0x422047,_0x3d9549);}a195_0x24cea5();'use strict';var __decorate=this&&this[a195_0x24e5e2(0x146)]||function(_0x222296,_0x5d2d30,_0x582f98,_0x3abb34){const _0x5e1095=a195_0x24e5e2;var _0x5f1c4e=arguments['length'],_0x2211c8=_0x5f1c4e<0x3?_0x5d2d30:_0x3abb34===null?_0x3abb34=Object[_0x5e1095(0x13c)](_0x5d2d30,_0x582f98):_0x3abb34,_0x3c0672;if(typeof Reflect===_0x5e1095(0x132)&&typeof Reflect[_0x5e1095(0x133)]===_0x5e1095(0x124))_0x2211c8=Reflect[_0x5e1095(0x133)](_0x222296,_0x5d2d30,_0x582f98,_0x3abb34);else{for(var _0x170093=_0x222296['length']-0x1;_0x170093>=0x0;_0x170093--)if(_0x3c0672=_0x222296[_0x170093])_0x2211c8=(_0x5f1c4e<0x3?_0x3c0672(_0x2211c8):_0x5f1c4e>0x3?_0x3c0672(_0x5d2d30,_0x582f98,_0x2211c8):_0x3c0672(_0x5d2d30,_0x582f98))||_0x2211c8;}return _0x5f1c4e>0x3&&_0x2211c8&&Object['defineProperty'](_0x5d2d30,_0x582f98,_0x2211c8),_0x2211c8;},__metadata=this&&this['__metadata']||function(_0x10a395,_0x59ba76){const _0x273537=a195_0x24e5e2;if(typeof Reflect===_0x273537(0x132)&&typeof Reflect[_0x273537(0x131)]==='function')return Reflect['metadata'](_0x10a395,_0x59ba76);},__param=this&&this[a195_0x24e5e2(0x136)]||function(_0xc8c13c,_0x306215){return function(_0x5b412b,_0x380946){_0x306215(_0x5b412b,_0x380946,_0xc8c13c);};},__importDefault=this&&this[a195_0x24e5e2(0x12d)]||function(_0xd48894){const _0x3e5713=a195_0x24e5e2;return _0xd48894&&_0xd48894[_0x3e5713(0x138)]?_0xd48894:{'default':_0xd48894};};Object[a195_0x24e5e2(0x13b)](exports,'__esModule',{'value':!![]}),exports[a195_0x24e5e2(0x12f)]=void 0x0;function a195_0x42e8(){const _0x3da6c8=['refreshToken','(((.+)+)+)+$','function','74346JGlZaF','Service','password','isLoggedIn','173762esDeZr','748856aqRYAw','credentials','provider','__importDefault','getHeaders','BitbucketApiService','1655316HLZUfM','metadata','object','decorate','260847sTxaLl','273JguxbL','__param','Authorization','__esModule','getCurrentUser','getAuthorizationHeader','defineProperty','getOwnPropertyDescriptor','Tokens','pathname','headers','request','url','GitApiService','user','https://bitbucket.org','6473360SMxDKg','__decorate','grant_type=client_credentials','design:paramtypes','axios','now','/site/oauth2/access_token','createRequest','search','./git-api.service','../credentials/dto/bitbucket-credentials.dto','toString','checkAccessToken','setAccessToken','../types/git-provider','apply','1FDccWG','MAX_REQUEST_PER_HOUR','typedi','accessTokenExpiresAt','BitbucketCredentialsDto','URL','Inject','3481090sdpJrs'];a195_0x42e8=function(){return _0x3da6c8;};return a195_0x42e8();}const axios_1=__importDefault(require(a195_0x24e5e2(0x149))),typedi_1=require(a195_0x24e5e2(0x11c)),git_api_service_1=require(a195_0x24e5e2(0x14e)),bitbucket_credentials_dto_1=require(a195_0x24e5e2(0x14f)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a195_0x24e5e2(0x153)),url_1=require(a195_0x24e5e2(0x141));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a195_0x24e5e2(0x142)]{constructor(_0x38b479,_0x41ec78){const _0x41e960=a195_0x24e5e2;super(_0x38b479,_0x41ec78),this[_0x41e960(0x11d)]=-0x1,this[_0x41e960(0x11b)]=0x3e8;}[a195_0x24e5e2(0x14c)](_0x7fac83){const _0x3a4137=a195_0x24e5e2,_0x4390ac=super[_0x3a4137(0x14c)](_0x7fac83);return _0x4390ac['interceptors'][_0x3a4137(0x140)]['use'](async _0x38b298=>{const _0x328ecd=_0x3a4137;return await this[_0x328ecd(0x151)](),_0x38b298[_0x328ecd(0x13f)][_0x328ecd(0x137)]=this[_0x328ecd(0x12b)][_0x328ecd(0x13a)](),_0x38b298;}),_0x4390ac;}async['checkAccessToken'](){const _0x1c7f52=a195_0x24e5e2;if(Date[_0x1c7f52(0x14a)]()<this[_0x1c7f52(0x11d)])return;await this[_0x1c7f52(0x122)]();}async['refreshToken'](){const _0x5a4f5f=a195_0x24e5e2,{clientId:_0x1f6c3f,clientSecret:_0x20399f}=this[_0x5a4f5f(0x12b)],_0x907f19=new url_1[(_0x5a4f5f(0x11f))](_0x5a4f5f(0x144));_0x907f19['username']=_0x1f6c3f,_0x907f19[_0x5a4f5f(0x127)]=_0x20399f,_0x907f19[_0x5a4f5f(0x13e)]=_0x5a4f5f(0x14b);const {data:_0x526777}=await axios_1['default']['post'](_0x907f19[_0x5a4f5f(0x150)](),_0x5a4f5f(0x147)),{expires_in:_0x14301a,access_token:_0x1f9795}=_0x526777;this[_0x5a4f5f(0x11d)]=Date['now']()+_0x14301a*0x3e8,this[_0x5a4f5f(0x12b)][_0x5a4f5f(0x152)](_0x1f9795);}[a195_0x24e5e2(0x12e)](){return{};}[a195_0x24e5e2(0x139)](){const _0x458bdd=a195_0x24e5e2;return this[_0x458bdd(0x140)]['get'](_0x458bdd(0x143));}async[a195_0x24e5e2(0x128)](){const _0x15e8c4=a195_0x24e5e2;return await this[_0x15e8c4(0x139)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a195_0x24e5e2(0x126)])(),__param(0x0,(0x0,typedi_1[a195_0x24e5e2(0x120)])(providers_tokens_1[a195_0x24e5e2(0x13d)][a195_0x24e5e2(0x12c)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a195_0x24e5e2(0x13d)][a195_0x24e5e2(0x12b)])),__metadata(a195_0x24e5e2(0x148),[String,bitbucket_credentials_dto_1[a195_0x24e5e2(0x11e)]])],BitbucketApiService),exports[a195_0x24e5e2(0x12f)]=BitbucketApiService;