const a157_0x2ee019=a157_0x2e3f;(function(_0x396c65,_0x3c51d4){const _0x216999=a157_0x2e3f,_0x27bcbf=_0x396c65();while(!![]){try{const _0x11eff2=-parseInt(_0x216999(0x1e9))/0x1*(parseInt(_0x216999(0x21d))/0x2)+parseInt(_0x216999(0x1f6))/0x3*(parseInt(_0x216999(0x1f1))/0x4)+-parseInt(_0x216999(0x213))/0x5+-parseInt(_0x216999(0x21f))/0x6+-parseInt(_0x216999(0x222))/0x7*(parseInt(_0x216999(0x1fa))/0x8)+parseInt(_0x216999(0x221))/0x9*(-parseInt(_0x216999(0x220))/0xa)+-parseInt(_0x216999(0x224))/0xb*(-parseInt(_0x216999(0x20e))/0xc);if(_0x11eff2===_0x3c51d4)break;else _0x27bcbf['push'](_0x27bcbf['shift']());}catch(_0x2407ea){_0x27bcbf['push'](_0x27bcbf['shift']());}}}(a157_0x40fb,0xa30d5));const a157_0xae4766=(function(){let _0x2db58d=!![];return function(_0x4d6761,_0x5776c4){const _0x5a6515=_0x2db58d?function(){if(_0x5776c4){const _0x275144=_0x5776c4['apply'](_0x4d6761,arguments);return _0x5776c4=null,_0x275144;}}:function(){};return _0x2db58d=![],_0x5a6515;};}()),a157_0x199fae=a157_0xae4766(this,function(){const _0x2d8bd3=a157_0x2e3f;return a157_0x199fae[_0x2d8bd3(0x20a)]()[_0x2d8bd3(0x21b)]('(((.+)+)+)+$')[_0x2d8bd3(0x20a)]()[_0x2d8bd3(0x1fb)](a157_0x199fae)[_0x2d8bd3(0x21b)]('(((.+)+)+)+$');});a157_0x199fae();function a157_0x40fb(){const _0x30d476=['defineProperty','../credentials/dto/bitbucket-credentials.dto','search','__metadata','4BCnQbt','__importDefault','4291230BJLnIW','42530YplEGQ','1665YNPLkR','1492897GpyCHa','getCurrentUser','11mBXgND','metadata','url','__decorate','179327klzkQF','getOwnPropertyDescriptor','MAX_REQUEST_PER_HOUR','GitApiService','use','object','provider','post','2762884RgyqSH','Authorization','BitbucketApiService','../types/git-provider','__esModule','3WCntOf','design:paramtypes','URL','typedi','16pbMjsP','constructor','pathname','now','Tokens','username','isLoggedIn','get','Service','setAccessToken','function','password','headers','__param','https://bitbucket.org','refreshToken','toString','credentials','default','../providers.tokens','30888780WXIYid','checkAccessToken','getAuthorizationHeader','request','/site/oauth2/access_token','1548595SBlUvK','length','user','accessTokenExpiresAt','decorate','Inject'];a157_0x40fb=function(){return _0x30d476;};return a157_0x40fb();}'use strict';var __decorate=this&&this[a157_0x2ee019(0x227)]||function(_0x415e6c,_0x227b82,_0x7cafb0,_0x55883d){const _0x1183ba=a157_0x2ee019;var _0x16c0ee=arguments[_0x1183ba(0x214)],_0x185eea=_0x16c0ee<0x3?_0x227b82:_0x55883d===null?_0x55883d=Object[_0x1183ba(0x1ea)](_0x227b82,_0x7cafb0):_0x55883d,_0x499851;if(typeof Reflect===_0x1183ba(0x1ee)&&typeof Reflect[_0x1183ba(0x217)]===_0x1183ba(0x204))_0x185eea=Reflect[_0x1183ba(0x217)](_0x415e6c,_0x227b82,_0x7cafb0,_0x55883d);else{for(var _0x1c6132=_0x415e6c['length']-0x1;_0x1c6132>=0x0;_0x1c6132--)if(_0x499851=_0x415e6c[_0x1c6132])_0x185eea=(_0x16c0ee<0x3?_0x499851(_0x185eea):_0x16c0ee>0x3?_0x499851(_0x227b82,_0x7cafb0,_0x185eea):_0x499851(_0x227b82,_0x7cafb0))||_0x185eea;}return _0x16c0ee>0x3&&_0x185eea&&Object[_0x1183ba(0x219)](_0x227b82,_0x7cafb0,_0x185eea),_0x185eea;},__metadata=this&&this[a157_0x2ee019(0x21c)]||function(_0x388de6,_0x19f45d){const _0x3a8715=a157_0x2ee019;if(typeof Reflect===_0x3a8715(0x1ee)&&typeof Reflect[_0x3a8715(0x225)]==='function')return Reflect[_0x3a8715(0x225)](_0x388de6,_0x19f45d);},__param=this&&this[a157_0x2ee019(0x207)]||function(_0x56eb94,_0x34af1e){return function(_0x394274,_0x33efae){_0x34af1e(_0x394274,_0x33efae,_0x56eb94);};},__importDefault=this&&this[a157_0x2ee019(0x21e)]||function(_0x313e98){const _0xae9057=a157_0x2ee019;return _0x313e98&&_0x313e98[_0xae9057(0x1f5)]?_0x313e98:{'default':_0x313e98};};Object[a157_0x2ee019(0x219)](exports,a157_0x2ee019(0x1f5),{'value':!![]}),exports[a157_0x2ee019(0x1f3)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a157_0x2ee019(0x1f9)),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require(a157_0x2ee019(0x21a)),providers_tokens_1=require(a157_0x2ee019(0x20d)),git_provider_1=require(a157_0x2ee019(0x1f4)),url_1=require(a157_0x2ee019(0x226));function a157_0x2e3f(_0x233fa3,_0x55d236){const _0x50185a=a157_0x40fb();return a157_0x2e3f=function(_0x199fae,_0xae4766){_0x199fae=_0x199fae-0x1e9;let _0x40fb73=_0x50185a[_0x199fae];return _0x40fb73;},a157_0x2e3f(_0x233fa3,_0x55d236);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a157_0x2ee019(0x1ec)]{constructor(_0xe5c88e,_0x568c08){const _0x31c5d2=a157_0x2ee019;super(_0xe5c88e,_0x568c08),this[_0x31c5d2(0x216)]=-0x1,this[_0x31c5d2(0x1eb)]=0x3e8;}['createRequest'](_0x3202e4){const _0x8cc84d=a157_0x2ee019,_0x161d5e=super['createRequest'](_0x3202e4);return _0x161d5e['interceptors'][_0x8cc84d(0x211)][_0x8cc84d(0x1ed)](async _0x1b238c=>{const _0x505523=_0x8cc84d;return await this[_0x505523(0x20f)](),_0x1b238c[_0x505523(0x206)][_0x505523(0x1f2)]=this[_0x505523(0x20b)][_0x505523(0x210)](),_0x1b238c;}),_0x161d5e;}async[a157_0x2ee019(0x20f)](){const _0x2d3585=a157_0x2ee019;if(Date[_0x2d3585(0x1fd)]()<this[_0x2d3585(0x216)])return;await this[_0x2d3585(0x209)]();}async[a157_0x2ee019(0x209)](){const _0x324d57=a157_0x2ee019,{clientId:_0x5b9479,clientSecret:_0x3d35fb}=this[_0x324d57(0x20b)],_0x2319cb=new url_1[(_0x324d57(0x1f8))](_0x324d57(0x208));_0x2319cb[_0x324d57(0x1ff)]=_0x5b9479,_0x2319cb[_0x324d57(0x205)]=_0x3d35fb,_0x2319cb[_0x324d57(0x1fc)]=_0x324d57(0x212);const {data:_0x5bce09}=await axios_1[_0x324d57(0x20c)][_0x324d57(0x1f0)](_0x2319cb[_0x324d57(0x20a)](),'grant_type=client_credentials'),{expires_in:_0x3e0a8a,access_token:_0x1ddc07}=_0x5bce09;this[_0x324d57(0x216)]=Date[_0x324d57(0x1fd)]()+_0x3e0a8a*0x3e8,this[_0x324d57(0x20b)][_0x324d57(0x203)](_0x1ddc07);}['getHeaders'](){return{};}['getCurrentUser'](){const _0x1fd58e=a157_0x2ee019;return this[_0x1fd58e(0x211)][_0x1fd58e(0x201)](_0x1fd58e(0x215));}async[a157_0x2ee019(0x200)](){const _0x2f3e53=a157_0x2ee019;return await this[_0x2f3e53(0x223)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a157_0x2ee019(0x202)])(),__param(0x0,(0x0,typedi_1[a157_0x2ee019(0x218)])(providers_tokens_1[a157_0x2ee019(0x1fe)][a157_0x2ee019(0x1ef)])),__param(0x1,(0x0,typedi_1[a157_0x2ee019(0x218)])(providers_tokens_1['Tokens'][a157_0x2ee019(0x20b)])),__metadata(a157_0x2ee019(0x1f7),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports[a157_0x2ee019(0x1f3)]=BitbucketApiService;