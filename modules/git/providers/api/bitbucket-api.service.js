const a163_0x19c1f7=a163_0x4d68;function a163_0x4d68(_0x563be5,_0x1fba6f){const _0x5b161a=a163_0x3b60();return a163_0x4d68=function(_0x392620,_0xc4330c){_0x392620=_0x392620-0x1f2;let _0x3b60a3=_0x5b161a[_0x392620];return _0x3b60a3;},a163_0x4d68(_0x563be5,_0x1fba6f);}(function(_0x21c339,_0x16b506){const _0x46b2f5=a163_0x4d68,_0x3fb2a8=_0x21c339();while(!![]){try{const _0x2d9d22=-parseInt(_0x46b2f5(0x214))/0x1*(-parseInt(_0x46b2f5(0x20d))/0x2)+-parseInt(_0x46b2f5(0x205))/0x3+parseInt(_0x46b2f5(0x1fd))/0x4*(-parseInt(_0x46b2f5(0x224))/0x5)+-parseInt(_0x46b2f5(0x228))/0x6+parseInt(_0x46b2f5(0x21b))/0x7*(parseInt(_0x46b2f5(0x219))/0x8)+parseInt(_0x46b2f5(0x200))/0x9+parseInt(_0x46b2f5(0x218))/0xa;if(_0x2d9d22===_0x16b506)break;else _0x3fb2a8['push'](_0x3fb2a8['shift']());}catch(_0x47a4e0){_0x3fb2a8['push'](_0x3fb2a8['shift']());}}}(a163_0x3b60,0x2b51c));const a163_0xc4330c=(function(){let _0x4783f9=!![];return function(_0x520753,_0x55c54c){const _0x5e258c=_0x4783f9?function(){const _0x3d0f95=a163_0x4d68;if(_0x55c54c){const _0x1c8604=_0x55c54c[_0x3d0f95(0x212)](_0x520753,arguments);return _0x55c54c=null,_0x1c8604;}}:function(){};return _0x4783f9=![],_0x5e258c;};}()),a163_0x392620=a163_0xc4330c(this,function(){const _0x358034=a163_0x4d68;return a163_0x392620['toString']()[_0x358034(0x1f6)](_0x358034(0x22c))['toString']()[_0x358034(0x1fe)](a163_0x392620)[_0x358034(0x1f6)](_0x358034(0x22c));});a163_0x392620();'use strict';var __decorate=this&&this[a163_0x19c1f7(0x226)]||function(_0x16f24b,_0x4a71e8,_0x12ca92,_0x7cc174){const _0x31d54b=a163_0x19c1f7;var _0x149d98=arguments[_0x31d54b(0x1fa)],_0x4c45f1=_0x149d98<0x3?_0x4a71e8:_0x7cc174===null?_0x7cc174=Object[_0x31d54b(0x20f)](_0x4a71e8,_0x12ca92):_0x7cc174,_0x18b5e7;if(typeof Reflect===_0x31d54b(0x209)&&typeof Reflect[_0x31d54b(0x206)]===_0x31d54b(0x227))_0x4c45f1=Reflect[_0x31d54b(0x206)](_0x16f24b,_0x4a71e8,_0x12ca92,_0x7cc174);else{for(var _0x3bfe33=_0x16f24b[_0x31d54b(0x1fa)]-0x1;_0x3bfe33>=0x0;_0x3bfe33--)if(_0x18b5e7=_0x16f24b[_0x3bfe33])_0x4c45f1=(_0x149d98<0x3?_0x18b5e7(_0x4c45f1):_0x149d98>0x3?_0x18b5e7(_0x4a71e8,_0x12ca92,_0x4c45f1):_0x18b5e7(_0x4a71e8,_0x12ca92))||_0x4c45f1;}return _0x149d98>0x3&&_0x4c45f1&&Object['defineProperty'](_0x4a71e8,_0x12ca92,_0x4c45f1),_0x4c45f1;},__metadata=this&&this[a163_0x19c1f7(0x20e)]||function(_0x41547c,_0x39391b){const _0x4de8ac=a163_0x19c1f7;if(typeof Reflect==='object'&&typeof Reflect[_0x4de8ac(0x1f8)]===_0x4de8ac(0x227))return Reflect[_0x4de8ac(0x1f8)](_0x41547c,_0x39391b);},__param=this&&this[a163_0x19c1f7(0x1f3)]||function(_0x432a85,_0x5257e3){return function(_0x4f1946,_0xf1ae86){_0x5257e3(_0x4f1946,_0xf1ae86,_0x432a85);};},__importDefault=this&&this[a163_0x19c1f7(0x217)]||function(_0x394667){const _0x203050=a163_0x19c1f7;return _0x394667&&_0x394667[_0x203050(0x1f4)]?_0x394667:{'default':_0x394667};};function a163_0x3b60(){const _0x2d56f9=['refreshToken','metadata','URL','length','setAccessToken','Authorization','4YXAskO','constructor','post','2615463WXtCwv','axios','BitbucketApiService','GitApiService','getCurrentUser','742236BUATpa','decorate','checkAccessToken','toString','object','createRequest','BitbucketCredentialsDto','getAuthorizationHeader','17174qcNQGh','__metadata','getOwnPropertyDescriptor','grant_type=client_credentials','url','apply','user','33QLGNbN','/site/oauth2/access_token','typedi','__importDefault','4283970vdbBYY','8776SroEoe','now','287CILDXw','request','get','use','Inject','../providers.tokens','Tokens','https://bitbucket.org','interceptors','1419745PumkHr','default','__decorate','function','2031330zoOttW','accessTokenExpiresAt','pathname','credentials','(((.+)+)+)+$','username','./git-api.service','__param','__esModule','password','search'];a163_0x3b60=function(){return _0x2d56f9;};return a163_0x3b60();}Object['defineProperty'](exports,a163_0x19c1f7(0x1f4),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const axios_1=__importDefault(require(a163_0x19c1f7(0x201))),typedi_1=require(a163_0x19c1f7(0x216)),git_api_service_1=require(a163_0x19c1f7(0x1f2)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a163_0x19c1f7(0x220)),git_provider_1=require('../types/git-provider'),url_1=require(a163_0x19c1f7(0x211));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x19c1f7(0x203)]{constructor(_0x56aee4,_0x351837){super(_0x56aee4,_0x351837),this['accessTokenExpiresAt']=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a163_0x19c1f7(0x20a)](_0x502aff){const _0x344314=a163_0x19c1f7,_0x1307ea=super[_0x344314(0x20a)](_0x502aff);return _0x1307ea[_0x344314(0x223)][_0x344314(0x21c)][_0x344314(0x21e)](async _0x5ef260=>{const _0x3423b6=_0x344314;return await this['checkAccessToken'](),_0x5ef260['headers'][_0x3423b6(0x1fc)]=this[_0x3423b6(0x22b)][_0x3423b6(0x20c)](),_0x5ef260;}),_0x1307ea;}async[a163_0x19c1f7(0x207)](){const _0x3c7e24=a163_0x19c1f7;if(Date[_0x3c7e24(0x21a)]()<this['accessTokenExpiresAt'])return;await this[_0x3c7e24(0x1f7)]();}async[a163_0x19c1f7(0x1f7)](){const _0x2e52f6=a163_0x19c1f7,{clientId:_0x509295,clientSecret:_0x5ca462}=this[_0x2e52f6(0x22b)],_0x2a9d40=new url_1[(_0x2e52f6(0x1f9))](_0x2e52f6(0x222));_0x2a9d40[_0x2e52f6(0x22d)]=_0x509295,_0x2a9d40[_0x2e52f6(0x1f5)]=_0x5ca462,_0x2a9d40[_0x2e52f6(0x22a)]=_0x2e52f6(0x215);const {data:_0x4f48b9}=await axios_1[_0x2e52f6(0x225)][_0x2e52f6(0x1ff)](_0x2a9d40[_0x2e52f6(0x208)](),_0x2e52f6(0x210)),{expires_in:_0xe6d25c,access_token:_0x21edf1}=_0x4f48b9;this[_0x2e52f6(0x229)]=Date['now']()+_0xe6d25c*0x3e8,this[_0x2e52f6(0x22b)][_0x2e52f6(0x1fb)](_0x21edf1);}['getHeaders'](){return{};}[a163_0x19c1f7(0x204)](){const _0x374dfd=a163_0x19c1f7;return this[_0x374dfd(0x21c)][_0x374dfd(0x21d)](_0x374dfd(0x213));}async['isLoggedIn'](){const _0x1d5758=a163_0x19c1f7;return await this[_0x1d5758(0x204)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a163_0x19c1f7(0x21f)])(providers_tokens_1[a163_0x19c1f7(0x221)]['provider'])),__param(0x1,(0x0,typedi_1[a163_0x19c1f7(0x21f)])(providers_tokens_1['Tokens'][a163_0x19c1f7(0x22b)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a163_0x19c1f7(0x20b)]])],BitbucketApiService),exports[a163_0x19c1f7(0x202)]=BitbucketApiService;