const a195_0x4b3885=a195_0x12c6;(function(_0xa23f1f,_0x38b4ac){const _0x5d1a7f=a195_0x12c6,_0x532289=_0xa23f1f();while(!![]){try{const _0x40ad42=-parseInt(_0x5d1a7f(0x1f7))/0x1+-parseInt(_0x5d1a7f(0x1eb))/0x2+parseInt(_0x5d1a7f(0x1ee))/0x3+parseInt(_0x5d1a7f(0x1dd))/0x4+-parseInt(_0x5d1a7f(0x1cc))/0x5*(parseInt(_0x5d1a7f(0x1e4))/0x6)+-parseInt(_0x5d1a7f(0x1d2))/0x7+parseInt(_0x5d1a7f(0x1fd))/0x8;if(_0x40ad42===_0x38b4ac)break;else _0x532289['push'](_0x532289['shift']());}catch(_0x1900ac){_0x532289['push'](_0x532289['shift']());}}}(a195_0x5e69,0x3568a));function a195_0x5e69(){const _0x4dcce6=['toString','585576SvZmKS','password','__importDefault','681912iMnQSd','getAuthorizationHeader','decorate','/site/oauth2/access_token','__param','apply','credentials','(((.+)+)+)+$','Service','417050FmfdkW','use','typedi','getOwnPropertyDescriptor','../types/git-provider','interceptors','3018328SpEhyD','__esModule','grant_type=client_credentials','5YIEeai','Authorization','function','search','url','axios','214893RCWzto','BitbucketApiService','defineProperty','https://bitbucket.org','GitApiService','metadata','length','get','MAX_REQUEST_PER_HOUR','default','accessTokenExpiresAt','1656644zkVPBU','__decorate','BitbucketCredentialsDto','object','Tokens','constructor','./git-api.service','356742bsMvpv','user','isLoggedIn','checkAccessToken','refreshToken','setAccessToken'];a195_0x5e69=function(){return _0x4dcce6;};return a195_0x5e69();}const a195_0x45d390=(function(){let _0x42adf7=!![];return function(_0x5a4251,_0x2ef1ec){const _0xbdbd5d=_0x42adf7?function(){const _0x3c5ca8=a195_0x12c6;if(_0x2ef1ec){const _0x45b6df=_0x2ef1ec[_0x3c5ca8(0x1f3)](_0x5a4251,arguments);return _0x2ef1ec=null,_0x45b6df;}}:function(){};return _0x42adf7=![],_0xbdbd5d;};}()),a195_0x19829c=a195_0x45d390(this,function(){const _0x20f125=a195_0x12c6;return a195_0x19829c['toString']()['search'](_0x20f125(0x1f5))[_0x20f125(0x1ea)]()[_0x20f125(0x1e2)](a195_0x19829c)[_0x20f125(0x1cf)](_0x20f125(0x1f5));});a195_0x19829c();'use strict';var __decorate=this&&this[a195_0x4b3885(0x1de)]||function(_0x10990c,_0x4e139c,_0x1f83cc,_0x350f54){const _0x111653=a195_0x4b3885;var _0x21fd98=arguments[_0x111653(0x1d8)],_0x16ea46=_0x21fd98<0x3?_0x4e139c:_0x350f54===null?_0x350f54=Object[_0x111653(0x1fa)](_0x4e139c,_0x1f83cc):_0x350f54,_0x3a5e55;if(typeof Reflect===_0x111653(0x1e0)&&typeof Reflect['decorate']===_0x111653(0x1ce))_0x16ea46=Reflect[_0x111653(0x1f0)](_0x10990c,_0x4e139c,_0x1f83cc,_0x350f54);else{for(var _0x24782c=_0x10990c['length']-0x1;_0x24782c>=0x0;_0x24782c--)if(_0x3a5e55=_0x10990c[_0x24782c])_0x16ea46=(_0x21fd98<0x3?_0x3a5e55(_0x16ea46):_0x21fd98>0x3?_0x3a5e55(_0x4e139c,_0x1f83cc,_0x16ea46):_0x3a5e55(_0x4e139c,_0x1f83cc))||_0x16ea46;}return _0x21fd98>0x3&&_0x16ea46&&Object[_0x111653(0x1d4)](_0x4e139c,_0x1f83cc,_0x16ea46),_0x16ea46;},__metadata=this&&this['__metadata']||function(_0x33654b,_0x19da24){const _0x26bf47=a195_0x4b3885;if(typeof Reflect===_0x26bf47(0x1e0)&&typeof Reflect[_0x26bf47(0x1d7)]===_0x26bf47(0x1ce))return Reflect['metadata'](_0x33654b,_0x19da24);},__param=this&&this[a195_0x4b3885(0x1f2)]||function(_0x45c448,_0x27fed8){return function(_0x69395f,_0x26f5ca){_0x27fed8(_0x69395f,_0x26f5ca,_0x45c448);};},__importDefault=this&&this[a195_0x4b3885(0x1ed)]||function(_0x184167){const _0x559d13=a195_0x4b3885;return _0x184167&&_0x184167[_0x559d13(0x1ca)]?_0x184167:{'default':_0x184167};};function a195_0x12c6(_0x5cfd62,_0x1eb00e){const _0x266859=a195_0x5e69();return a195_0x12c6=function(_0x19829c,_0x45d390){_0x19829c=_0x19829c-0x1ca;let _0x5e6946=_0x266859[_0x19829c];return _0x5e6946;},a195_0x12c6(_0x5cfd62,_0x1eb00e);}Object[a195_0x4b3885(0x1d4)](exports,'__esModule',{'value':!![]}),exports[a195_0x4b3885(0x1d3)]=void 0x0;const axios_1=__importDefault(require(a195_0x4b3885(0x1d1))),typedi_1=require(a195_0x4b3885(0x1f9)),git_api_service_1=require(a195_0x4b3885(0x1e3)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a195_0x4b3885(0x1fb)),url_1=require(a195_0x4b3885(0x1d0));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a195_0x4b3885(0x1d6)]{constructor(_0x160fd7,_0x3aa111){const _0x432c11=a195_0x4b3885;super(_0x160fd7,_0x3aa111),this[_0x432c11(0x1dc)]=-0x1,this[_0x432c11(0x1da)]=0x3e8;}['createRequest'](_0x325b6e){const _0x46bdc3=a195_0x4b3885,_0x3edf86=super['createRequest'](_0x325b6e);return _0x3edf86[_0x46bdc3(0x1fc)]['request'][_0x46bdc3(0x1f8)](async _0x23caca=>{const _0x271387=_0x46bdc3;return await this[_0x271387(0x1e7)](),_0x23caca['headers'][_0x271387(0x1cd)]=this[_0x271387(0x1f4)][_0x271387(0x1ef)](),_0x23caca;}),_0x3edf86;}async[a195_0x4b3885(0x1e7)](){const _0x205ae2=a195_0x4b3885;if(Date['now']()<this[_0x205ae2(0x1dc)])return;await this['refreshToken']();}async[a195_0x4b3885(0x1e8)](){const _0x3bdeda=a195_0x4b3885,{clientId:_0x3bd0bc,clientSecret:_0x243ed5}=this[_0x3bdeda(0x1f4)],_0x1f9f9d=new url_1['URL'](_0x3bdeda(0x1d5));_0x1f9f9d['username']=_0x3bd0bc,_0x1f9f9d[_0x3bdeda(0x1ec)]=_0x243ed5,_0x1f9f9d['pathname']=_0x3bdeda(0x1f1);const {data:_0x48dfcb}=await axios_1[_0x3bdeda(0x1db)]['post'](_0x1f9f9d[_0x3bdeda(0x1ea)](),_0x3bdeda(0x1cb)),{expires_in:_0x19f258,access_token:_0x3753ea}=_0x48dfcb;this[_0x3bdeda(0x1dc)]=Date['now']()+_0x19f258*0x3e8,this['credentials'][_0x3bdeda(0x1e9)](_0x3753ea);}['getHeaders'](){return{};}['getCurrentUser'](){const _0x41d5f7=a195_0x4b3885;return this['request'][_0x41d5f7(0x1d9)](_0x41d5f7(0x1e5));}async[a195_0x4b3885(0x1e6)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a195_0x4b3885(0x1f6)])(),__param(0x0,(0x0,typedi_1['Inject'])(providers_tokens_1[a195_0x4b3885(0x1e1)]['provider'])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a195_0x4b3885(0x1e1)][a195_0x4b3885(0x1f4)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a195_0x4b3885(0x1df)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;