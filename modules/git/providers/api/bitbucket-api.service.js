const a124_0x40320d=a124_0x57e1;function a124_0x57e1(_0x33a4a3,_0x3259f3){const _0x29bd5a=a124_0xad8e();return a124_0x57e1=function(_0x21d5f6,_0x4f8530){_0x21d5f6=_0x21d5f6-0x10b;let _0xad8e3=_0x29bd5a[_0x21d5f6];return _0xad8e3;},a124_0x57e1(_0x33a4a3,_0x3259f3);}(function(_0x51a519,_0x23933f){const _0x2e5f09=a124_0x57e1,_0x103be0=_0x51a519();while(!![]){try{const _0xa45230=parseInt(_0x2e5f09(0x12c))/0x1*(parseInt(_0x2e5f09(0x122))/0x2)+-parseInt(_0x2e5f09(0x13a))/0x3+parseInt(_0x2e5f09(0x131))/0x4+parseInt(_0x2e5f09(0x117))/0x5+-parseInt(_0x2e5f09(0x121))/0x6*(parseInt(_0x2e5f09(0x11a))/0x7)+-parseInt(_0x2e5f09(0x11c))/0x8+-parseInt(_0x2e5f09(0x10e))/0x9*(-parseInt(_0x2e5f09(0x146))/0xa);if(_0xa45230===_0x23933f)break;else _0x103be0['push'](_0x103be0['shift']());}catch(_0x23bfe3){_0x103be0['push'](_0x103be0['shift']());}}}(a124_0xad8e,0xb6561));const a124_0x4f8530=(function(){let _0x3b35b5=!![];return function(_0xc662fa,_0x5e7f31){const _0x5b118c=_0x3b35b5?function(){const _0x20da99=a124_0x57e1;if(_0x5e7f31){const _0x39bd5d=_0x5e7f31[_0x20da99(0x124)](_0xc662fa,arguments);return _0x5e7f31=null,_0x39bd5d;}}:function(){};return _0x3b35b5=![],_0x5b118c;};}()),a124_0x21d5f6=a124_0x4f8530(this,function(){const _0x32ce8d=a124_0x57e1;return a124_0x21d5f6[_0x32ce8d(0x12f)]()[_0x32ce8d(0x112)](_0x32ce8d(0x119))[_0x32ce8d(0x12f)]()[_0x32ce8d(0x135)](a124_0x21d5f6)[_0x32ce8d(0x112)](_0x32ce8d(0x119));});a124_0x21d5f6();'use strict';var __decorate=this&&this[a124_0x40320d(0x10c)]||function(_0x964e69,_0x4bbd5a,_0xd69cf7,_0x434c7f){const _0x332e94=a124_0x40320d;var _0x44f116=arguments[_0x332e94(0x125)],_0x56d030=_0x44f116<0x3?_0x4bbd5a:_0x434c7f===null?_0x434c7f=Object['getOwnPropertyDescriptor'](_0x4bbd5a,_0xd69cf7):_0x434c7f,_0x34fd6e;if(typeof Reflect===_0x332e94(0x11e)&&typeof Reflect[_0x332e94(0x128)]===_0x332e94(0x113))_0x56d030=Reflect['decorate'](_0x964e69,_0x4bbd5a,_0xd69cf7,_0x434c7f);else{for(var _0x461e51=_0x964e69[_0x332e94(0x125)]-0x1;_0x461e51>=0x0;_0x461e51--)if(_0x34fd6e=_0x964e69[_0x461e51])_0x56d030=(_0x44f116<0x3?_0x34fd6e(_0x56d030):_0x44f116>0x3?_0x34fd6e(_0x4bbd5a,_0xd69cf7,_0x56d030):_0x34fd6e(_0x4bbd5a,_0xd69cf7))||_0x56d030;}return _0x44f116>0x3&&_0x56d030&&Object[_0x332e94(0x10b)](_0x4bbd5a,_0xd69cf7,_0x56d030),_0x56d030;},__metadata=this&&this[a124_0x40320d(0x118)]||function(_0x48e1e5,_0x26228f){const _0x5ec53c=a124_0x40320d;if(typeof Reflect===_0x5ec53c(0x11e)&&typeof Reflect[_0x5ec53c(0x132)]==='function')return Reflect[_0x5ec53c(0x132)](_0x48e1e5,_0x26228f);},__param=this&&this[a124_0x40320d(0x123)]||function(_0x5422e1,_0x5de5e1){return function(_0x2e4cac,_0x31ea47){_0x5de5e1(_0x2e4cac,_0x31ea47,_0x5422e1);};},__importDefault=this&&this[a124_0x40320d(0x11b)]||function(_0x46904b){return _0x46904b&&_0x46904b['__esModule']?_0x46904b:{'default':_0x46904b};};Object[a124_0x40320d(0x10b)](exports,'__esModule',{'value':!![]}),exports[a124_0x40320d(0x11f)]=void 0x0;const axios_1=__importDefault(require(a124_0x40320d(0x10f))),typedi_1=require('typedi'),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require(a124_0x40320d(0x138)),providers_tokens_1=require(a124_0x40320d(0x140)),git_provider_1=require(a124_0x40320d(0x12b)),url_1=require(a124_0x40320d(0x10d));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a124_0x40320d(0x116)]{constructor(_0x333456,_0x64649c){const _0x47ab77=a124_0x40320d;super(_0x333456,_0x64649c),this[_0x47ab77(0x12d)]=-0x1,this[_0x47ab77(0x130)]=0x3e8;}[a124_0x40320d(0x126)](_0x52fa65){const _0x56bc5e=a124_0x40320d,_0x318538=super[_0x56bc5e(0x126)](_0x52fa65);return _0x318538[_0x56bc5e(0x134)][_0x56bc5e(0x142)][_0x56bc5e(0x13e)](async _0x5e9d30=>{const _0xa7c39d=_0x56bc5e;return await this['checkAccessToken'](),_0x5e9d30[_0xa7c39d(0x144)]||(_0x5e9d30['headers']={}),_0x5e9d30[_0xa7c39d(0x144)][_0xa7c39d(0x143)]=this[_0xa7c39d(0x12e)][_0xa7c39d(0x136)](),_0x5e9d30;}),_0x318538;}async[a124_0x40320d(0x13c)](){const _0x28d294=a124_0x40320d;if(Date[_0x28d294(0x13f)]()<this[_0x28d294(0x12d)])return;await this['refreshToken']();}async['refreshToken'](){const _0xba55ef=a124_0x40320d,{clientId:_0x26c0bc,clientSecret:_0x190801}=this[_0xba55ef(0x12e)],_0x5cbb89=new url_1['URL'](_0xba55ef(0x137));_0x5cbb89[_0xba55ef(0x110)]=_0x26c0bc,_0x5cbb89[_0xba55ef(0x127)]=_0x190801,_0x5cbb89[_0xba55ef(0x129)]=_0xba55ef(0x13d);const {data:_0xbda5e5}=await axios_1['default'][_0xba55ef(0x145)](_0x5cbb89[_0xba55ef(0x12f)](),_0xba55ef(0x120)),{expires_in:_0x5d0142,access_token:_0x2788b9}=_0xbda5e5;this[_0xba55ef(0x12d)]=Date[_0xba55ef(0x13f)]()+_0x5d0142*0x3e8,this[_0xba55ef(0x12e)][_0xba55ef(0x114)](_0x2788b9);}[a124_0x40320d(0x115)](){return{};}[a124_0x40320d(0x11d)](){const _0x960a90=a124_0x40320d;return this[_0x960a90(0x142)][_0x960a90(0x139)]('user');}async[a124_0x40320d(0x133)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a124_0x40320d(0x13b)])(providers_tokens_1['Tokens']['provider'])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a124_0x40320d(0x141)][a124_0x40320d(0x12e)])),__metadata(a124_0x40320d(0x111),[String,bitbucket_credentials_dto_1[a124_0x40320d(0x12a)]])],BitbucketApiService),exports[a124_0x40320d(0x11f)]=BitbucketApiService;function a124_0xad8e(){const _0x3e2a46=['search','function','setAccessToken','getHeaders','GitApiService','3673930iNkepT','__metadata','(((.+)+)+)+$','7kInnDK','__importDefault','5781032hyBSwH','getCurrentUser','object','BitbucketApiService','grant_type=client_credentials','3373746bgPLaz','40fjGDrc','__param','apply','length','createRequest','password','decorate','pathname','BitbucketCredentialsDto','../types/git-provider','24713EZkyGN','accessTokenExpiresAt','credentials','toString','MAX_REQUEST_PER_HOUR','2549348Vmgpbn','metadata','isLoggedIn','interceptors','constructor','getAuthorizationHeader','https://bitbucket.org','../credentials/dto/bitbucket-credentials.dto','get','3449424wZegxC','Inject','checkAccessToken','/site/oauth2/access_token','use','now','../providers.tokens','Tokens','request','Authorization','headers','post','40220jeyUDn','defineProperty','__decorate','url','2943XBUwkS','axios','username','design:paramtypes'];a124_0xad8e=function(){return _0x3e2a46;};return a124_0xad8e();}