const a158_0x2f3ec9=a158_0xe8de;(function(_0x3650e9,_0x388659){const _0x179dc3=a158_0xe8de,_0x1137e6=_0x3650e9();while(!![]){try{const _0x437539=parseInt(_0x179dc3(0x11d))/0x1*(parseInt(_0x179dc3(0x123))/0x2)+parseInt(_0x179dc3(0x137))/0x3+parseInt(_0x179dc3(0x13d))/0x4*(parseInt(_0x179dc3(0x11e))/0x5)+parseInt(_0x179dc3(0x116))/0x6+-parseInt(_0x179dc3(0x11f))/0x7+parseInt(_0x179dc3(0x133))/0x8+-parseInt(_0x179dc3(0x11b))/0x9;if(_0x437539===_0x388659)break;else _0x1137e6['push'](_0x1137e6['shift']());}catch(_0x3bb1cb){_0x1137e6['push'](_0x1137e6['shift']());}}}(a158_0x1c9d,0x2e8bd));const a158_0x57574a=(function(){let _0x2e056d=!![];return function(_0x308903,_0x1c366f){const _0x18280d=_0x2e056d?function(){const _0x36afc8=a158_0xe8de;if(_0x1c366f){const _0x4da306=_0x1c366f[_0x36afc8(0x11c)](_0x308903,arguments);return _0x1c366f=null,_0x4da306;}}:function(){};return _0x2e056d=![],_0x18280d;};}()),a158_0x263c5b=a158_0x57574a(this,function(){const _0x20ca7e=a158_0xe8de;return a158_0x263c5b[_0x20ca7e(0x119)]()['search'](_0x20ca7e(0x151))[_0x20ca7e(0x119)]()[_0x20ca7e(0x146)](a158_0x263c5b)[_0x20ca7e(0x130)](_0x20ca7e(0x151));});a158_0x263c5b();function a158_0xe8de(_0x3b3895,_0x1e16a8){const _0x4e4425=a158_0x1c9d();return a158_0xe8de=function(_0x263c5b,_0x57574a){_0x263c5b=_0x263c5b-0x113;let _0x1c9dd5=_0x4e4425[_0x263c5b];return _0x1c9dd5;},a158_0xe8de(_0x3b3895,_0x1e16a8);}'use strict';var __decorate=this&&this[a158_0x2f3ec9(0x126)]||function(_0x210afe,_0x1c9627,_0x2cc7eb,_0x439a2f){const _0x5a425b=a158_0x2f3ec9;var _0x3bb287=arguments[_0x5a425b(0x120)],_0x45802c=_0x3bb287<0x3?_0x1c9627:_0x439a2f===null?_0x439a2f=Object[_0x5a425b(0x122)](_0x1c9627,_0x2cc7eb):_0x439a2f,_0xb685c9;if(typeof Reflect===_0x5a425b(0x115)&&typeof Reflect[_0x5a425b(0x14e)]===_0x5a425b(0x12f))_0x45802c=Reflect[_0x5a425b(0x14e)](_0x210afe,_0x1c9627,_0x2cc7eb,_0x439a2f);else{for(var _0x1672ed=_0x210afe[_0x5a425b(0x120)]-0x1;_0x1672ed>=0x0;_0x1672ed--)if(_0xb685c9=_0x210afe[_0x1672ed])_0x45802c=(_0x3bb287<0x3?_0xb685c9(_0x45802c):_0x3bb287>0x3?_0xb685c9(_0x1c9627,_0x2cc7eb,_0x45802c):_0xb685c9(_0x1c9627,_0x2cc7eb))||_0x45802c;}return _0x3bb287>0x3&&_0x45802c&&Object[_0x5a425b(0x114)](_0x1c9627,_0x2cc7eb,_0x45802c),_0x45802c;},__metadata=this&&this['__metadata']||function(_0x47373d,_0x41ee36){const _0x1d09fd=a158_0x2f3ec9;if(typeof Reflect===_0x1d09fd(0x115)&&typeof Reflect['metadata']===_0x1d09fd(0x12f))return Reflect[_0x1d09fd(0x152)](_0x47373d,_0x41ee36);},__param=this&&this[a158_0x2f3ec9(0x12e)]||function(_0x3fe200,_0x3daf49){return function(_0xdb9745,_0x45902d){_0x3daf49(_0xdb9745,_0x45902d,_0x3fe200);};},__importDefault=this&&this[a158_0x2f3ec9(0x124)]||function(_0x574be9){const _0x1752f4=a158_0x2f3ec9;return _0x574be9&&_0x574be9[_0x1752f4(0x12b)]?_0x574be9:{'default':_0x574be9};};function a158_0x1c9d(){const _0x226478=['486336kxzPWF','user','createRequest','toString','provider','612387SUkHOd','apply','41231JGgkHH','18815moIVTq','1044673nMvekg','length','getHeaders','getOwnPropertyDescriptor','2bojagw','__importDefault','accessTokenExpiresAt','__decorate','Inject','isLoggedIn','BitbucketApiService','now','__esModule','./git-api.service','Tokens','__param','function','search','url','getAuthorizationHeader','458240jPCfxt','use','username','headers','606081nLAyxz','grant_type=client_credentials','credentials','refreshToken','setAccessToken','password','28STlkZL','getCurrentUser','request','design:paramtypes','https://bitbucket.org','post','default','checkAccessToken','URL','constructor','Service','typedi','Authorization','../types/git-provider','MAX_REQUEST_PER_HOUR','GitApiService','/site/oauth2/access_token','decorate','pathname','interceptors','(((.+)+)+)+$','metadata','../providers.tokens','defineProperty','object'];a158_0x1c9d=function(){return _0x226478;};return a158_0x1c9d();}Object[a158_0x2f3ec9(0x114)](exports,a158_0x2f3ec9(0x12b),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a158_0x2f3ec9(0x148)),git_api_service_1=require(a158_0x2f3ec9(0x12c)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a158_0x2f3ec9(0x113)),git_provider_1=require(a158_0x2f3ec9(0x14a)),url_1=require(a158_0x2f3ec9(0x131));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a158_0x2f3ec9(0x14c)]{constructor(_0x208281,_0x5e5eaf){const _0x3ac249=a158_0x2f3ec9;super(_0x208281,_0x5e5eaf),this['accessTokenExpiresAt']=-0x1,this[_0x3ac249(0x14b)]=0x3e8;}['createRequest'](_0xc64e5c){const _0x7f8f2f=a158_0x2f3ec9,_0x2b0480=super[_0x7f8f2f(0x118)](_0xc64e5c);return _0x2b0480[_0x7f8f2f(0x150)][_0x7f8f2f(0x13f)][_0x7f8f2f(0x134)](async _0x3ca53c=>{const _0x9d231b=_0x7f8f2f;return await this[_0x9d231b(0x144)](),_0x3ca53c[_0x9d231b(0x136)][_0x9d231b(0x149)]=this[_0x9d231b(0x139)][_0x9d231b(0x132)](),_0x3ca53c;}),_0x2b0480;}async['checkAccessToken'](){const _0x5c2b1b=a158_0x2f3ec9;if(Date[_0x5c2b1b(0x12a)]()<this['accessTokenExpiresAt'])return;await this[_0x5c2b1b(0x13a)]();}async[a158_0x2f3ec9(0x13a)](){const _0xe7463a=a158_0x2f3ec9,{clientId:_0x430ef8,clientSecret:_0x1a3db7}=this[_0xe7463a(0x139)],_0x51a3c0=new url_1[(_0xe7463a(0x145))](_0xe7463a(0x141));_0x51a3c0[_0xe7463a(0x135)]=_0x430ef8,_0x51a3c0[_0xe7463a(0x13c)]=_0x1a3db7,_0x51a3c0[_0xe7463a(0x14f)]=_0xe7463a(0x14d);const {data:_0x424421}=await axios_1[_0xe7463a(0x143)][_0xe7463a(0x142)](_0x51a3c0['toString'](),_0xe7463a(0x138)),{expires_in:_0x2c1e09,access_token:_0x309efb}=_0x424421;this[_0xe7463a(0x125)]=Date[_0xe7463a(0x12a)]()+_0x2c1e09*0x3e8,this[_0xe7463a(0x139)][_0xe7463a(0x13b)](_0x309efb);}[a158_0x2f3ec9(0x121)](){return{};}[a158_0x2f3ec9(0x13e)](){const _0x474026=a158_0x2f3ec9;return this['request']['get'](_0x474026(0x117));}async[a158_0x2f3ec9(0x128)](){const _0x2d8bab=a158_0x2f3ec9;return await this[_0x2d8bab(0x13e)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a158_0x2f3ec9(0x147)])(),__param(0x0,(0x0,typedi_1[a158_0x2f3ec9(0x127)])(providers_tokens_1[a158_0x2f3ec9(0x12d)][a158_0x2f3ec9(0x11a)])),__param(0x1,(0x0,typedi_1[a158_0x2f3ec9(0x127)])(providers_tokens_1[a158_0x2f3ec9(0x12d)]['credentials'])),__metadata(a158_0x2f3ec9(0x140),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports[a158_0x2f3ec9(0x129)]=BitbucketApiService;