const a168_0x1f8f51=a168_0xd9e4;function a168_0xd9e4(_0x412560,_0x5495e3){const _0x5867c5=a168_0x4dec();return a168_0xd9e4=function(_0x289064,_0xe6b39e){_0x289064=_0x289064-0x1d3;let _0x4dec8c=_0x5867c5[_0x289064];return _0x4dec8c;},a168_0xd9e4(_0x412560,_0x5495e3);}(function(_0x4ef7f5,_0x3de6f9){const _0x3cf916=a168_0xd9e4,_0x4b2f42=_0x4ef7f5();while(!![]){try{const _0x41e374=parseInt(_0x3cf916(0x1ed))/0x1*(parseInt(_0x3cf916(0x209))/0x2)+-parseInt(_0x3cf916(0x1ff))/0x3+parseInt(_0x3cf916(0x1df))/0x4*(parseInt(_0x3cf916(0x205))/0x5)+-parseInt(_0x3cf916(0x1f8))/0x6*(parseInt(_0x3cf916(0x1e4))/0x7)+-parseInt(_0x3cf916(0x1d9))/0x8+-parseInt(_0x3cf916(0x1e6))/0x9*(-parseInt(_0x3cf916(0x1db))/0xa)+parseInt(_0x3cf916(0x1f1))/0xb*(parseInt(_0x3cf916(0x1e9))/0xc);if(_0x41e374===_0x3de6f9)break;else _0x4b2f42['push'](_0x4b2f42['shift']());}catch(_0x7ee88b){_0x4b2f42['push'](_0x4b2f42['shift']());}}}(a168_0x4dec,0xa1d5d));const a168_0xe6b39e=(function(){let _0x5e0ab5=!![];return function(_0x371db6,_0x3dee92){const _0x2ddd3d=_0x5e0ab5?function(){const _0x107c3c=a168_0xd9e4;if(_0x3dee92){const _0x18ccb0=_0x3dee92[_0x107c3c(0x210)](_0x371db6,arguments);return _0x3dee92=null,_0x18ccb0;}}:function(){};return _0x5e0ab5=![],_0x2ddd3d;};}()),a168_0x289064=a168_0xe6b39e(this,function(){const _0x40be5a=a168_0xd9e4;return a168_0x289064[_0x40be5a(0x1eb)]()['search'](_0x40be5a(0x1e2))[_0x40be5a(0x1eb)]()[_0x40be5a(0x1f3)](a168_0x289064)[_0x40be5a(0x1d3)](_0x40be5a(0x1e2));});a168_0x289064();'use strict';var __decorate=this&&this[a168_0x1f8f51(0x1f5)]||function(_0x1d9f86,_0x33c28e,_0x2742ef,_0x8259c2){const _0x2acc8e=a168_0x1f8f51;var _0x62eeda=arguments[_0x2acc8e(0x20c)],_0x5ed1e4=_0x62eeda<0x3?_0x33c28e:_0x8259c2===null?_0x8259c2=Object[_0x2acc8e(0x211)](_0x33c28e,_0x2742ef):_0x8259c2,_0x306304;if(typeof Reflect===_0x2acc8e(0x1fb)&&typeof Reflect['decorate']===_0x2acc8e(0x1d7))_0x5ed1e4=Reflect['decorate'](_0x1d9f86,_0x33c28e,_0x2742ef,_0x8259c2);else{for(var _0x2451fb=_0x1d9f86['length']-0x1;_0x2451fb>=0x0;_0x2451fb--)if(_0x306304=_0x1d9f86[_0x2451fb])_0x5ed1e4=(_0x62eeda<0x3?_0x306304(_0x5ed1e4):_0x62eeda>0x3?_0x306304(_0x33c28e,_0x2742ef,_0x5ed1e4):_0x306304(_0x33c28e,_0x2742ef))||_0x5ed1e4;}return _0x62eeda>0x3&&_0x5ed1e4&&Object[_0x2acc8e(0x202)](_0x33c28e,_0x2742ef,_0x5ed1e4),_0x5ed1e4;},__metadata=this&&this[a168_0x1f8f51(0x201)]||function(_0x2700c5,_0x5a2d0c){const _0x53af42=a168_0x1f8f51;if(typeof Reflect===_0x53af42(0x1fb)&&typeof Reflect[_0x53af42(0x1e5)]===_0x53af42(0x1d7))return Reflect['metadata'](_0x2700c5,_0x5a2d0c);},__param=this&&this[a168_0x1f8f51(0x1de)]||function(_0x5ad336,_0x4af548){return function(_0x20f6ef,_0x2ae18d){_0x4af548(_0x20f6ef,_0x2ae18d,_0x5ad336);};},__importDefault=this&&this[a168_0x1f8f51(0x1e8)]||function(_0x3ee7fc){const _0xdf6e24=a168_0x1f8f51;return _0x3ee7fc&&_0x3ee7fc[_0xdf6e24(0x1f7)]?_0x3ee7fc:{'default':_0x3ee7fc};};Object['defineProperty'](exports,a168_0x1f8f51(0x1f7),{'value':!![]}),exports['BitbucketApiService']=void 0x0;function a168_0x4dec(){const _0x314465=['10HNtULy','now','axios','__param','2645224MnNKfb','default','username','(((.+)+)+)+$','./git-api.service','119JSkODM','metadata','2155149zeNkjf','MAX_REQUEST_PER_HOUR','__importDefault','12gdyOnO','BitbucketApiService','toString','credentials','32MKpCkf','grant_type=client_credentials','headers','Service','20557086YpSUrF','password','constructor','../providers.tokens','__decorate','../credentials/dto/bitbucket-credentials.dto','__esModule','357138GSzmDk','checkAccessToken','getAuthorizationHeader','object','getHeaders','get','URL','3152319eKOlXR','isLoggedIn','__metadata','defineProperty','GitApiService','use','10wjeatF','interceptors','pathname','request','26954qEtXLF','BitbucketCredentialsDto','Inject','length','Tokens','user','accessTokenExpiresAt','apply','getOwnPropertyDescriptor','refreshToken','search','design:paramtypes','provider','url','function','Authorization','9092976tBAqlM','https://bitbucket.org'];a168_0x4dec=function(){return _0x314465;};return a168_0x4dec();}const axios_1=__importDefault(require(a168_0x1f8f51(0x1dd))),typedi_1=require('typedi'),git_api_service_1=require(a168_0x1f8f51(0x1e3)),bitbucket_credentials_dto_1=require(a168_0x1f8f51(0x1f6)),providers_tokens_1=require(a168_0x1f8f51(0x1f4)),git_provider_1=require('../types/git-provider'),url_1=require(a168_0x1f8f51(0x1d6));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a168_0x1f8f51(0x203)]{constructor(_0x281a08,_0x349827){const _0x44ccc9=a168_0x1f8f51;super(_0x281a08,_0x349827),this[_0x44ccc9(0x20f)]=-0x1,this[_0x44ccc9(0x1e7)]=0x3e8;}['createRequest'](_0x591d22){const _0x23f03e=a168_0x1f8f51,_0xaa5b48=super['createRequest'](_0x591d22);return _0xaa5b48[_0x23f03e(0x206)][_0x23f03e(0x208)][_0x23f03e(0x204)](async _0x3efa80=>{const _0x1e9097=_0x23f03e;return await this['checkAccessToken'](),_0x3efa80[_0x1e9097(0x1ef)][_0x1e9097(0x1d8)]=this[_0x1e9097(0x1ec)][_0x1e9097(0x1fa)](),_0x3efa80;}),_0xaa5b48;}async[a168_0x1f8f51(0x1f9)](){const _0x1b8f19=a168_0x1f8f51;if(Date[_0x1b8f19(0x1dc)]()<this[_0x1b8f19(0x20f)])return;await this[_0x1b8f19(0x212)]();}async[a168_0x1f8f51(0x212)](){const _0x579721=a168_0x1f8f51,{clientId:_0x4d2e7f,clientSecret:_0x46755f}=this[_0x579721(0x1ec)],_0x74da0f=new url_1[(_0x579721(0x1fe))](_0x579721(0x1da));_0x74da0f[_0x579721(0x1e1)]=_0x4d2e7f,_0x74da0f[_0x579721(0x1f2)]=_0x46755f,_0x74da0f[_0x579721(0x207)]='/site/oauth2/access_token';const {data:_0x4d2d99}=await axios_1[_0x579721(0x1e0)]['post'](_0x74da0f[_0x579721(0x1eb)](),_0x579721(0x1ee)),{expires_in:_0x36bb7c,access_token:_0x4dd902}=_0x4d2d99;this[_0x579721(0x20f)]=Date[_0x579721(0x1dc)]()+_0x36bb7c*0x3e8,this[_0x579721(0x1ec)]['setAccessToken'](_0x4dd902);}[a168_0x1f8f51(0x1fc)](){return{};}['getCurrentUser'](){const _0x4b69c1=a168_0x1f8f51;return this[_0x4b69c1(0x208)][_0x4b69c1(0x1fd)](_0x4b69c1(0x20e));}async[a168_0x1f8f51(0x200)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a168_0x1f8f51(0x1f0)])(),__param(0x0,(0x0,typedi_1[a168_0x1f8f51(0x20b)])(providers_tokens_1[a168_0x1f8f51(0x20d)][a168_0x1f8f51(0x1d5)])),__param(0x1,(0x0,typedi_1[a168_0x1f8f51(0x20b)])(providers_tokens_1['Tokens'][a168_0x1f8f51(0x1ec)])),__metadata(a168_0x1f8f51(0x1d4),[String,bitbucket_credentials_dto_1[a168_0x1f8f51(0x20a)]])],BitbucketApiService),exports[a168_0x1f8f51(0x1ea)]=BitbucketApiService;