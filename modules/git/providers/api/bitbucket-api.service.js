const a169_0x3b4563=a169_0x58e7;(function(_0x464568,_0x36e6be){const _0x164f07=a169_0x58e7,_0x12deb3=_0x464568();while(!![]){try{const _0x11bc9b=parseInt(_0x164f07(0xd5))/0x1*(parseInt(_0x164f07(0xd2))/0x2)+parseInt(_0x164f07(0xcc))/0x3+parseInt(_0x164f07(0xea))/0x4*(parseInt(_0x164f07(0xce))/0x5)+-parseInt(_0x164f07(0x103))/0x6*(-parseInt(_0x164f07(0xed))/0x7)+-parseInt(_0x164f07(0xd8))/0x8*(-parseInt(_0x164f07(0xfe))/0x9)+-parseInt(_0x164f07(0xd0))/0xa*(-parseInt(_0x164f07(0xe1))/0xb)+-parseInt(_0x164f07(0xec))/0xc;if(_0x11bc9b===_0x36e6be)break;else _0x12deb3['push'](_0x12deb3['shift']());}catch(_0x12b9ba){_0x12deb3['push'](_0x12deb3['shift']());}}}(a169_0x59a1,0x506fb));function a169_0x59a1(){const _0x4c52f6=['decorate','apply','BitbucketCredentialsDto','isLoggedIn','Authorization','__esModule','user','credentials','request','BitbucketApiService','https://bitbucket.org','Tokens','grant_type=client_credentials','37773itYUOa','URL','typedi','getCurrentUser','accessTokenExpiresAt','36UnVpMe','(((.+)+)+)+$','toString','username','function','pathname','post','1242927XOGifQ','Inject','1730BNIUIN','password','1144760uIyENt','getOwnPropertyDescriptor','2PBWvMU','url','interceptors','625148unSeoR','__param','getAuthorizationHeader','1128UpyZsl','checkAccessToken','createRequest','now','use','headers','provider','design:paramtypes','./git-api.service','22kxcwTp','/site/oauth2/access_token','object','defineProperty','metadata','__importDefault','../credentials/dto/bitbucket-credentials.dto','refreshToken','../types/git-provider','16PXhsPE','search','18945324ydmXYN','54453dhFton','__decorate','default','constructor'];a169_0x59a1=function(){return _0x4c52f6;};return a169_0x59a1();}const a169_0x219ffa=(function(){let _0x35e87a=!![];return function(_0x48ba7b,_0x12d756){const _0x117f5f=_0x35e87a?function(){const _0x26174b=a169_0x58e7;if(_0x12d756){const _0x2d5352=_0x12d756[_0x26174b(0xf2)](_0x48ba7b,arguments);return _0x12d756=null,_0x2d5352;}}:function(){};return _0x35e87a=![],_0x117f5f;};}()),a169_0x547d8b=a169_0x219ffa(this,function(){const _0x3ea067=a169_0x58e7;return a169_0x547d8b[_0x3ea067(0x105)]()['search'](_0x3ea067(0x104))[_0x3ea067(0x105)]()[_0x3ea067(0xf0)](a169_0x547d8b)[_0x3ea067(0xeb)](_0x3ea067(0x104));});a169_0x547d8b();'use strict';var __decorate=this&&this[a169_0x3b4563(0xee)]||function(_0x185351,_0x5d504d,_0xb4d692,_0x30aac0){const _0x3f89ba=a169_0x3b4563;var _0x2c953a=arguments['length'],_0xf28ed9=_0x2c953a<0x3?_0x5d504d:_0x30aac0===null?_0x30aac0=Object[_0x3f89ba(0xd1)](_0x5d504d,_0xb4d692):_0x30aac0,_0x5cc845;if(typeof Reflect===_0x3f89ba(0xe3)&&typeof Reflect[_0x3f89ba(0xf1)]===_0x3f89ba(0x107))_0xf28ed9=Reflect[_0x3f89ba(0xf1)](_0x185351,_0x5d504d,_0xb4d692,_0x30aac0);else{for(var _0x121f0c=_0x185351['length']-0x1;_0x121f0c>=0x0;_0x121f0c--)if(_0x5cc845=_0x185351[_0x121f0c])_0xf28ed9=(_0x2c953a<0x3?_0x5cc845(_0xf28ed9):_0x2c953a>0x3?_0x5cc845(_0x5d504d,_0xb4d692,_0xf28ed9):_0x5cc845(_0x5d504d,_0xb4d692))||_0xf28ed9;}return _0x2c953a>0x3&&_0xf28ed9&&Object[_0x3f89ba(0xe4)](_0x5d504d,_0xb4d692,_0xf28ed9),_0xf28ed9;},__metadata=this&&this['__metadata']||function(_0x230ac5,_0x26ec02){const _0x562eeb=a169_0x3b4563;if(typeof Reflect==='object'&&typeof Reflect[_0x562eeb(0xe5)]===_0x562eeb(0x107))return Reflect[_0x562eeb(0xe5)](_0x230ac5,_0x26ec02);},__param=this&&this[a169_0x3b4563(0xd6)]||function(_0x1490b6,_0x414055){return function(_0x3423f5,_0x242317){_0x414055(_0x3423f5,_0x242317,_0x1490b6);};},__importDefault=this&&this[a169_0x3b4563(0xe6)]||function(_0xc0f07a){const _0x2a988b=a169_0x3b4563;return _0xc0f07a&&_0xc0f07a[_0x2a988b(0xf6)]?_0xc0f07a:{'default':_0xc0f07a};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a169_0x3b4563(0xfa)]=void 0x0;function a169_0x58e7(_0x4fed7a,_0x389881){const _0x32ca97=a169_0x59a1();return a169_0x58e7=function(_0x547d8b,_0x219ffa){_0x547d8b=_0x547d8b-0xcb;let _0x59a1a1=_0x32ca97[_0x547d8b];return _0x59a1a1;},a169_0x58e7(_0x4fed7a,_0x389881);}const axios_1=__importDefault(require('axios')),typedi_1=require(a169_0x3b4563(0x100)),git_api_service_1=require(a169_0x3b4563(0xe0)),bitbucket_credentials_dto_1=require(a169_0x3b4563(0xe7)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a169_0x3b4563(0xe9)),url_1=require(a169_0x3b4563(0xd3));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x2808b3,_0x118097){super(_0x2808b3,_0x118097),this['accessTokenExpiresAt']=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a169_0x3b4563(0xda)](_0x11f13d){const _0x210641=a169_0x3b4563,_0x521d39=super[_0x210641(0xda)](_0x11f13d);return _0x521d39[_0x210641(0xd4)][_0x210641(0xf9)][_0x210641(0xdc)](async _0x490670=>{const _0x2c014c=_0x210641;return await this[_0x2c014c(0xd9)](),_0x490670[_0x2c014c(0xdd)][_0x2c014c(0xf5)]=this[_0x2c014c(0xf8)][_0x2c014c(0xd7)](),_0x490670;}),_0x521d39;}async['checkAccessToken'](){const _0x397eb0=a169_0x3b4563;if(Date[_0x397eb0(0xdb)]()<this[_0x397eb0(0x102)])return;await this[_0x397eb0(0xe8)]();}async[a169_0x3b4563(0xe8)](){const _0x108f81=a169_0x3b4563,{clientId:_0x1f63a4,clientSecret:_0x436423}=this[_0x108f81(0xf8)],_0x109e45=new url_1[(_0x108f81(0xff))](_0x108f81(0xfb));_0x109e45[_0x108f81(0x106)]=_0x1f63a4,_0x109e45[_0x108f81(0xcf)]=_0x436423,_0x109e45[_0x108f81(0x108)]=_0x108f81(0xe2);const {data:_0x3de6a8}=await axios_1[_0x108f81(0xef)][_0x108f81(0xcb)](_0x109e45[_0x108f81(0x105)](),_0x108f81(0xfd)),{expires_in:_0x5aabd7,access_token:_0x196c4c}=_0x3de6a8;this[_0x108f81(0x102)]=Date[_0x108f81(0xdb)]()+_0x5aabd7*0x3e8,this[_0x108f81(0xf8)]['setAccessToken'](_0x196c4c);}['getHeaders'](){return{};}[a169_0x3b4563(0x101)](){const _0x55d00c=a169_0x3b4563;return this[_0x55d00c(0xf9)]['get'](_0x55d00c(0xf7));}async[a169_0x3b4563(0xf4)](){const _0x55db6f=a169_0x3b4563;return await this[_0x55db6f(0x101)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a169_0x3b4563(0xcd)])(providers_tokens_1['Tokens'][a169_0x3b4563(0xde)])),__param(0x1,(0x0,typedi_1[a169_0x3b4563(0xcd)])(providers_tokens_1[a169_0x3b4563(0xfc)]['credentials'])),__metadata(a169_0x3b4563(0xdf),[String,bitbucket_credentials_dto_1[a169_0x3b4563(0xf3)]])],BitbucketApiService),exports[a169_0x3b4563(0xfa)]=BitbucketApiService;