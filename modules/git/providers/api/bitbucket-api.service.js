const a196_0x4eed25=a196_0xf5ab;(function(_0x1cb869,_0x122360){const _0x4311b0=a196_0xf5ab,_0x5c63f3=_0x1cb869();while(!![]){try{const _0x4abc3e=-parseInt(_0x4311b0(0x1f7))/0x1+parseInt(_0x4311b0(0x1f5))/0x2*(parseInt(_0x4311b0(0x21b))/0x3)+parseInt(_0x4311b0(0x1f0))/0x4*(-parseInt(_0x4311b0(0x1fc))/0x5)+parseInt(_0x4311b0(0x212))/0x6*(parseInt(_0x4311b0(0x1e9))/0x7)+parseInt(_0x4311b0(0x215))/0x8+-parseInt(_0x4311b0(0x1fa))/0x9+parseInt(_0x4311b0(0x1f8))/0xa;if(_0x4abc3e===_0x122360)break;else _0x5c63f3['push'](_0x5c63f3['shift']());}catch(_0x52ee97){_0x5c63f3['push'](_0x5c63f3['shift']());}}}(a196_0x1a8e,0xe2eda));const a196_0x50a183=(function(){let _0x2beee7=!![];return function(_0x5aeb0b,_0x342927){const _0x4e8223=_0x2beee7?function(){const _0x22d7a0=a196_0xf5ab;if(_0x342927){const _0x2cf6af=_0x342927[_0x22d7a0(0x214)](_0x5aeb0b,arguments);return _0x342927=null,_0x2cf6af;}}:function(){};return _0x2beee7=![],_0x4e8223;};}()),a196_0x34613a=a196_0x50a183(this,function(){const _0x11c59a=a196_0xf5ab;return a196_0x34613a[_0x11c59a(0x222)]()[_0x11c59a(0x1f4)](_0x11c59a(0x21c))[_0x11c59a(0x222)]()[_0x11c59a(0x200)](a196_0x34613a)['search'](_0x11c59a(0x21c));});a196_0x34613a();'use strict';var __decorate=this&&this[a196_0x4eed25(0x1ec)]||function(_0x5772f2,_0x20a1b2,_0x156b16,_0x5c6e3f){const _0x4f1e37=a196_0x4eed25;var _0x1792de=arguments[_0x4f1e37(0x1f6)],_0x269bd0=_0x1792de<0x3?_0x20a1b2:_0x5c6e3f===null?_0x5c6e3f=Object[_0x4f1e37(0x219)](_0x20a1b2,_0x156b16):_0x5c6e3f,_0x15d434;if(typeof Reflect===_0x4f1e37(0x1e7)&&typeof Reflect['decorate']===_0x4f1e37(0x1f9))_0x269bd0=Reflect[_0x4f1e37(0x224)](_0x5772f2,_0x20a1b2,_0x156b16,_0x5c6e3f);else{for(var _0x4eb090=_0x5772f2[_0x4f1e37(0x1f6)]-0x1;_0x4eb090>=0x0;_0x4eb090--)if(_0x15d434=_0x5772f2[_0x4eb090])_0x269bd0=(_0x1792de<0x3?_0x15d434(_0x269bd0):_0x1792de>0x3?_0x15d434(_0x20a1b2,_0x156b16,_0x269bd0):_0x15d434(_0x20a1b2,_0x156b16))||_0x269bd0;}return _0x1792de>0x3&&_0x269bd0&&Object[_0x4f1e37(0x1f1)](_0x20a1b2,_0x156b16,_0x269bd0),_0x269bd0;},__metadata=this&&this[a196_0x4eed25(0x1ff)]||function(_0xb004b5,_0x3824a3){const _0x13a4d9=a196_0x4eed25;if(typeof Reflect===_0x13a4d9(0x1e7)&&typeof Reflect['metadata']===_0x13a4d9(0x1f9))return Reflect[_0x13a4d9(0x201)](_0xb004b5,_0x3824a3);},__param=this&&this[a196_0x4eed25(0x21a)]||function(_0x5ab3bc,_0xb4bf68){return function(_0x55b0cb,_0x486511){_0xb4bf68(_0x55b0cb,_0x486511,_0x5ab3bc);};},__importDefault=this&&this[a196_0x4eed25(0x1fb)]||function(_0x36498e){return _0x36498e&&_0x36498e['__esModule']?_0x36498e:{'default':_0x36498e};};Object['defineProperty'](exports,a196_0x4eed25(0x217),{'value':!![]}),exports[a196_0x4eed25(0x209)]=void 0x0;function a196_0xf5ab(_0x490207,_0x1219c4){const _0x3b5042=a196_0x1a8e();return a196_0xf5ab=function(_0x34613a,_0x50a183){_0x34613a=_0x34613a-0x1e7;let _0x1a8e6d=_0x3b5042[_0x34613a];return _0x1a8e6d;},a196_0xf5ab(_0x490207,_0x1219c4);}const axios_1=__importDefault(require(a196_0x4eed25(0x223))),typedi_1=require(a196_0x4eed25(0x20d)),git_api_service_1=require(a196_0x4eed25(0x1ef)),bitbucket_credentials_dto_1=require(a196_0x4eed25(0x205)),providers_tokens_1=require(a196_0x4eed25(0x204)),git_provider_1=require('../types/git-provider'),url_1=require(a196_0x4eed25(0x1ea));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a196_0x4eed25(0x221)]{constructor(_0x1fa2e7,_0x2fe12f){super(_0x1fa2e7,_0x2fe12f),this['accessTokenExpiresAt']=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}['createRequest'](_0x5092a0){const _0x32a408=a196_0x4eed25,_0x518bba=super[_0x32a408(0x1f3)](_0x5092a0);return _0x518bba[_0x32a408(0x216)][_0x32a408(0x20f)]['use'](async _0x434e2d=>{const _0x393aa7=_0x32a408;return await this[_0x393aa7(0x21e)](),_0x434e2d['headers'][_0x393aa7(0x211)]=this[_0x393aa7(0x20e)][_0x393aa7(0x1f2)](),_0x434e2d;}),_0x518bba;}async[a196_0x4eed25(0x21e)](){const _0xbfe79=a196_0x4eed25;if(Date[_0xbfe79(0x20b)]()<this[_0xbfe79(0x207)])return;await this[_0xbfe79(0x1ed)]();}async['refreshToken'](){const _0x386cef=a196_0x4eed25,{clientId:_0x5723eb,clientSecret:_0x4aa9c}=this['credentials'],_0x369606=new url_1[(_0x386cef(0x1fe))](_0x386cef(0x220));_0x369606[_0x386cef(0x20a)]=_0x5723eb,_0x369606[_0x386cef(0x1ee)]=_0x4aa9c,_0x369606['pathname']=_0x386cef(0x208);const {data:_0x4c3f76}=await axios_1[_0x386cef(0x1e8)][_0x386cef(0x203)](_0x369606[_0x386cef(0x222)](),_0x386cef(0x210)),{expires_in:_0x4dd85a,access_token:_0x31877a}=_0x4c3f76;this[_0x386cef(0x207)]=Date[_0x386cef(0x20b)]()+_0x4dd85a*0x3e8,this[_0x386cef(0x20e)]['setAccessToken'](_0x31877a);}['getHeaders'](){return{};}[a196_0x4eed25(0x20c)](){const _0x5de3d2=a196_0x4eed25;return this[_0x5de3d2(0x20f)]['get'](_0x5de3d2(0x1eb));}async[a196_0x4eed25(0x21f)](){return await this['getCurrentUser'](),!![];}};function a196_0x1a8e(){const _0x31d55f=['__esModule','Tokens','getOwnPropertyDescriptor','__param','3GgzGUj','(((.+)+)+)+$','provider','checkAccessToken','isLoggedIn','https://bitbucket.org','GitApiService','toString','axios','decorate','object','default','10117450FDHLkZ','url','user','__decorate','refreshToken','password','./git-api.service','3568tUvXSV','defineProperty','getAuthorizationHeader','createRequest','search','3329654eDTwmL','length','1672533Phsigz','4516040dowraU','function','9207153TkqcoA','__importDefault','3070hAMVnr','design:paramtypes','URL','__metadata','constructor','metadata','Inject','post','../providers.tokens','../credentials/dto/bitbucket-credentials.dto','Service','accessTokenExpiresAt','/site/oauth2/access_token','BitbucketApiService','username','now','getCurrentUser','typedi','credentials','request','grant_type=client_credentials','Authorization','6wSZtWE','BitbucketCredentialsDto','apply','4887640wteNGC','interceptors'];a196_0x1a8e=function(){return _0x31d55f;};return a196_0x1a8e();}BitbucketApiService=__decorate([(0x0,typedi_1[a196_0x4eed25(0x206)])(),__param(0x0,(0x0,typedi_1[a196_0x4eed25(0x202)])(providers_tokens_1[a196_0x4eed25(0x218)][a196_0x4eed25(0x21d)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1['Tokens'][a196_0x4eed25(0x20e)])),__metadata(a196_0x4eed25(0x1fd),[String,bitbucket_credentials_dto_1[a196_0x4eed25(0x213)]])],BitbucketApiService),exports[a196_0x4eed25(0x209)]=BitbucketApiService;