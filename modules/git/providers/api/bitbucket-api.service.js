const a124_0x1abd17=a124_0x4ebe;function a124_0x42cb(){const _0x1bb2c2=['1036nNrMKs','defineProperty','getAuthorizationHeader','createRequest','constructor','Inject','function','request','grant_type=client_credentials','40xReMJu','__importDefault','apply','1623248hWjPsi','checkAccessToken','MAX_REQUEST_PER_HOUR','Authorization','Tokens','6dvWRKl','531cfBJVE','355305XZcwxs','metadata','decorate','BitbucketApiService','accessTokenExpiresAt','https://bitbucket.org','axios','credentials','design:paramtypes','refreshToken','search','../providers.tokens','/site/oauth2/access_token','URL','__decorate','./git-api.service','default','user','GitApiService','../types/git-provider','getCurrentUser','headers','Service','(((.+)+)+)+$','length','username','setAccessToken','url','password','toString','use','__metadata','isLoggedIn','473116pFGwyy','__esModule','1642895zCAwBn','46593GToBeV','1562127kdKUyA','../credentials/dto/bitbucket-credentials.dto'];a124_0x42cb=function(){return _0x1bb2c2;};return a124_0x42cb();}(function(_0xb868d9,_0x461b34){const _0x5a7d42=a124_0x4ebe,_0x3c4ec0=_0xb868d9();while(!![]){try{const _0x302415=-parseInt(_0x5a7d42(0x19f))/0x1+parseInt(_0x5a7d42(0x1c0))/0x2+parseInt(_0x5a7d42(0x19e))/0x3*(parseInt(_0x5a7d42(0x1c6))/0x4)+-parseInt(_0x5a7d42(0x1c2))/0x5*(-parseInt(_0x5a7d42(0x19d))/0x6)+-parseInt(_0x5a7d42(0x1c4))/0x7+parseInt(_0x5a7d42(0x198))/0x8+-parseInt(_0x5a7d42(0x1c3))/0x9*(parseInt(_0x5a7d42(0x1cf))/0xa);if(_0x302415===_0x461b34)break;else _0x3c4ec0['push'](_0x3c4ec0['shift']());}catch(_0x275501){_0x3c4ec0['push'](_0x3c4ec0['shift']());}}}(a124_0x42cb,0x346b8));const a124_0x2bc191=(function(){let _0x2854a2=!![];return function(_0x1962d5,_0x334418){const _0x5dbe49=_0x2854a2?function(){const _0x179660=a124_0x4ebe;if(_0x334418){const _0x606797=_0x334418[_0x179660(0x197)](_0x1962d5,arguments);return _0x334418=null,_0x606797;}}:function(){};return _0x2854a2=![],_0x5dbe49;};}()),a124_0x2a7267=a124_0x2bc191(this,function(){const _0x475314=a124_0x4ebe;return a124_0x2a7267[_0x475314(0x1bc)]()[_0x475314(0x1a9)](_0x475314(0x1b6))[_0x475314(0x1bc)]()[_0x475314(0x1ca)](a124_0x2a7267)[_0x475314(0x1a9)](_0x475314(0x1b6));});a124_0x2a7267();function a124_0x4ebe(_0x1a85b3,_0x2edd03){const _0x38da90=a124_0x42cb();return a124_0x4ebe=function(_0x2a7267,_0x2bc191){_0x2a7267=_0x2a7267-0x196;let _0x42cb3e=_0x38da90[_0x2a7267];return _0x42cb3e;},a124_0x4ebe(_0x1a85b3,_0x2edd03);}'use strict';var __decorate=this&&this[a124_0x1abd17(0x1ad)]||function(_0x5383df,_0x17d493,_0x29ba23,_0x11f9c7){const _0x49a70b=a124_0x1abd17;var _0x4ef03b=arguments[_0x49a70b(0x1b7)],_0x349d8b=_0x4ef03b<0x3?_0x17d493:_0x11f9c7===null?_0x11f9c7=Object['getOwnPropertyDescriptor'](_0x17d493,_0x29ba23):_0x11f9c7,_0x398fbc;if(typeof Reflect==='object'&&typeof Reflect[_0x49a70b(0x1a1)]===_0x49a70b(0x1cc))_0x349d8b=Reflect[_0x49a70b(0x1a1)](_0x5383df,_0x17d493,_0x29ba23,_0x11f9c7);else{for(var _0x5c2129=_0x5383df[_0x49a70b(0x1b7)]-0x1;_0x5c2129>=0x0;_0x5c2129--)if(_0x398fbc=_0x5383df[_0x5c2129])_0x349d8b=(_0x4ef03b<0x3?_0x398fbc(_0x349d8b):_0x4ef03b>0x3?_0x398fbc(_0x17d493,_0x29ba23,_0x349d8b):_0x398fbc(_0x17d493,_0x29ba23))||_0x349d8b;}return _0x4ef03b>0x3&&_0x349d8b&&Object[_0x49a70b(0x1c7)](_0x17d493,_0x29ba23,_0x349d8b),_0x349d8b;},__metadata=this&&this[a124_0x1abd17(0x1be)]||function(_0x38f0f3,_0x1c9846){const _0x435c72=a124_0x1abd17;if(typeof Reflect==='object'&&typeof Reflect[_0x435c72(0x1a0)]===_0x435c72(0x1cc))return Reflect[_0x435c72(0x1a0)](_0x38f0f3,_0x1c9846);},__param=this&&this['__param']||function(_0x24db4a,_0x4ead7c){return function(_0x18bdbf,_0xa0ee28){_0x4ead7c(_0x18bdbf,_0xa0ee28,_0x24db4a);};},__importDefault=this&&this[a124_0x1abd17(0x196)]||function(_0xa781a0){const _0x291d4e=a124_0x1abd17;return _0xa781a0&&_0xa781a0[_0x291d4e(0x1c1)]?_0xa781a0:{'default':_0xa781a0};};Object[a124_0x1abd17(0x1c7)](exports,a124_0x1abd17(0x1c1),{'value':!![]}),exports[a124_0x1abd17(0x1a2)]=void 0x0;const axios_1=__importDefault(require(a124_0x1abd17(0x1a5))),typedi_1=require('typedi'),git_api_service_1=require(a124_0x1abd17(0x1ae)),bitbucket_credentials_dto_1=require(a124_0x1abd17(0x1c5)),providers_tokens_1=require(a124_0x1abd17(0x1aa)),git_provider_1=require(a124_0x1abd17(0x1b2)),url_1=require(a124_0x1abd17(0x1ba));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a124_0x1abd17(0x1b1)]{constructor(_0x176e2f,_0x384f5a){const _0x32c03a=a124_0x1abd17;super(_0x176e2f,_0x384f5a),this[_0x32c03a(0x1a3)]=-0x1,this[_0x32c03a(0x19a)]=0x3e8;}[a124_0x1abd17(0x1c9)](_0x3933c6){const _0x350b38=a124_0x1abd17,_0x492b37=super['createRequest'](_0x3933c6);return _0x492b37['interceptors']['request'][_0x350b38(0x1bd)](async _0x19508d=>{const _0x147f57=_0x350b38;return await this[_0x147f57(0x199)](),_0x19508d[_0x147f57(0x1b4)]||(_0x19508d['headers']={}),_0x19508d[_0x147f57(0x1b4)][_0x147f57(0x19b)]=this[_0x147f57(0x1a6)][_0x147f57(0x1c8)](),_0x19508d;}),_0x492b37;}async[a124_0x1abd17(0x199)](){const _0x4afc5e=a124_0x1abd17;if(Date['now']()<this['accessTokenExpiresAt'])return;await this[_0x4afc5e(0x1a8)]();}async[a124_0x1abd17(0x1a8)](){const _0x90f853=a124_0x1abd17,{clientId:_0x32b71a,clientSecret:_0x340f5e}=this[_0x90f853(0x1a6)],_0x489b2b=new url_1[(_0x90f853(0x1ac))](_0x90f853(0x1a4));_0x489b2b[_0x90f853(0x1b8)]=_0x32b71a,_0x489b2b[_0x90f853(0x1bb)]=_0x340f5e,_0x489b2b['pathname']=_0x90f853(0x1ab);const {data:_0x2aa6c3}=await axios_1[_0x90f853(0x1af)]['post'](_0x489b2b[_0x90f853(0x1bc)](),_0x90f853(0x1ce)),{expires_in:_0x5f2089,access_token:_0x37a1b1}=_0x2aa6c3;this[_0x90f853(0x1a3)]=Date['now']()+_0x5f2089*0x3e8,this[_0x90f853(0x1a6)][_0x90f853(0x1b9)](_0x37a1b1);}['getHeaders'](){return{};}[a124_0x1abd17(0x1b3)](){const _0x22683e=a124_0x1abd17;return this[_0x22683e(0x1cd)]['get'](_0x22683e(0x1b0));}async[a124_0x1abd17(0x1bf)](){const _0x30ff7=a124_0x1abd17;return await this[_0x30ff7(0x1b3)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a124_0x1abd17(0x1b5)])(),__param(0x0,(0x0,typedi_1[a124_0x1abd17(0x1cb)])(providers_tokens_1[a124_0x1abd17(0x19c)]['provider'])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a124_0x1abd17(0x19c)][a124_0x1abd17(0x1a6)])),__metadata(a124_0x1abd17(0x1a7),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports[a124_0x1abd17(0x1a2)]=BitbucketApiService;