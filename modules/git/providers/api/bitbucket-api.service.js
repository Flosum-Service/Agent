const a163_0x35e088=a163_0x4fa7;function a163_0x4fa7(_0x2148ed,_0x36550){const _0x37b613=a163_0x3122();return a163_0x4fa7=function(_0x1aa932,_0x3d6570){_0x1aa932=_0x1aa932-0x1a0;let _0x3122a9=_0x37b613[_0x1aa932];return _0x3122a9;},a163_0x4fa7(_0x2148ed,_0x36550);}(function(_0x2d3af6,_0x596b10){const _0x1cecb8=a163_0x4fa7,_0x31b797=_0x2d3af6();while(!![]){try{const _0x3e0fce=-parseInt(_0x1cecb8(0x1dc))/0x1+parseInt(_0x1cecb8(0x1bf))/0x2*(-parseInt(_0x1cecb8(0x1a2))/0x3)+-parseInt(_0x1cecb8(0x1a1))/0x4*(parseInt(_0x1cecb8(0x1d7))/0x5)+-parseInt(_0x1cecb8(0x1b5))/0x6*(-parseInt(_0x1cecb8(0x1ca))/0x7)+-parseInt(_0x1cecb8(0x1aa))/0x8*(parseInt(_0x1cecb8(0x1da))/0x9)+parseInt(_0x1cecb8(0x1c2))/0xa*(-parseInt(_0x1cecb8(0x1a5))/0xb)+parseInt(_0x1cecb8(0x1c6))/0xc*(parseInt(_0x1cecb8(0x1a4))/0xd);if(_0x3e0fce===_0x596b10)break;else _0x31b797['push'](_0x31b797['shift']());}catch(_0x5e69ab){_0x31b797['push'](_0x31b797['shift']());}}}(a163_0x3122,0xbe4b9));const a163_0x3d6570=(function(){let _0x52333f=!![];return function(_0x12dbf7,_0x4b9c28){const _0x1989d9=_0x52333f?function(){const _0x5716a2=a163_0x4fa7;if(_0x4b9c28){const _0x35aa0e=_0x4b9c28[_0x5716a2(0x1d9)](_0x12dbf7,arguments);return _0x4b9c28=null,_0x35aa0e;}}:function(){};return _0x52333f=![],_0x1989d9;};}()),a163_0x1aa932=a163_0x3d6570(this,function(){const _0x476782=a163_0x4fa7;return a163_0x1aa932[_0x476782(0x1ce)]()[_0x476782(0x1ad)](_0x476782(0x1b3))['toString']()['constructor'](a163_0x1aa932)[_0x476782(0x1ad)](_0x476782(0x1b3));});a163_0x1aa932();'use strict';var __decorate=this&&this[a163_0x35e088(0x1c5)]||function(_0x417539,_0x444efd,_0x1ac45a,_0xdac4e){const _0x502217=a163_0x35e088;var _0x4f95d8=arguments['length'],_0xdcc9b0=_0x4f95d8<0x3?_0x444efd:_0xdac4e===null?_0xdac4e=Object[_0x502217(0x1c9)](_0x444efd,_0x1ac45a):_0xdac4e,_0x1d597b;if(typeof Reflect===_0x502217(0x1c3)&&typeof Reflect[_0x502217(0x1b8)]===_0x502217(0x1c7))_0xdcc9b0=Reflect['decorate'](_0x417539,_0x444efd,_0x1ac45a,_0xdac4e);else{for(var _0xe90439=_0x417539[_0x502217(0x1a7)]-0x1;_0xe90439>=0x0;_0xe90439--)if(_0x1d597b=_0x417539[_0xe90439])_0xdcc9b0=(_0x4f95d8<0x3?_0x1d597b(_0xdcc9b0):_0x4f95d8>0x3?_0x1d597b(_0x444efd,_0x1ac45a,_0xdcc9b0):_0x1d597b(_0x444efd,_0x1ac45a))||_0xdcc9b0;}return _0x4f95d8>0x3&&_0xdcc9b0&&Object[_0x502217(0x1cf)](_0x444efd,_0x1ac45a,_0xdcc9b0),_0xdcc9b0;},__metadata=this&&this[a163_0x35e088(0x1c4)]||function(_0x2dedbc,_0xf7323a){const _0xaaea8a=a163_0x35e088;if(typeof Reflect==='object'&&typeof Reflect[_0xaaea8a(0x1be)]==='function')return Reflect[_0xaaea8a(0x1be)](_0x2dedbc,_0xf7323a);},__param=this&&this[a163_0x35e088(0x1a9)]||function(_0x5bfcd7,_0x275aa8){return function(_0x43a1c6,_0x8d64a9){_0x275aa8(_0x43a1c6,_0x8d64a9,_0x5bfcd7);};},__importDefault=this&&this[a163_0x35e088(0x1b7)]||function(_0x306b95){const _0x2ad539=a163_0x35e088;return _0x306b95&&_0x306b95[_0x2ad539(0x1dd)]?_0x306b95:{'default':_0x306b95};};Object[a163_0x35e088(0x1cf)](exports,a163_0x35e088(0x1dd),{'value':!![]}),exports[a163_0x35e088(0x1bc)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a163_0x35e088(0x1d4)),git_api_service_1=require(a163_0x35e088(0x1c8)),bitbucket_credentials_dto_1=require(a163_0x35e088(0x1ae)),providers_tokens_1=require(a163_0x35e088(0x1d6)),git_provider_1=require(a163_0x35e088(0x1b4)),url_1=require(a163_0x35e088(0x1de));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x35e088(0x1b6)]{constructor(_0x406bbf,_0x254644){const _0x12ad4f=a163_0x35e088;super(_0x406bbf,_0x254644),this[_0x12ad4f(0x1d3)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a163_0x35e088(0x1c0)](_0x4740b4){const _0x43018f=a163_0x35e088,_0x1dd01b=super[_0x43018f(0x1c0)](_0x4740b4);return _0x1dd01b['interceptors'][_0x43018f(0x1b9)][_0x43018f(0x1cb)](async _0x5038e7=>{const _0x561d78=_0x43018f;return await this[_0x561d78(0x1ba)](),_0x5038e7[_0x561d78(0x1a3)][_0x561d78(0x1d1)]=this[_0x561d78(0x1b2)][_0x561d78(0x1cd)](),_0x5038e7;}),_0x1dd01b;}async['checkAccessToken'](){const _0x23cf39=a163_0x35e088;if(Date[_0x23cf39(0x1bd)]()<this[_0x23cf39(0x1d3)])return;await this['refreshToken']();}async[a163_0x35e088(0x1af)](){const _0x5c1c6e=a163_0x35e088,{clientId:_0x7d138f,clientSecret:_0x35718f}=this[_0x5c1c6e(0x1b2)],_0x53855c=new url_1[(_0x5c1c6e(0x1c1))]('https://bitbucket.org');_0x53855c[_0x5c1c6e(0x1d8)]=_0x7d138f,_0x53855c['password']=_0x35718f,_0x53855c['pathname']=_0x5c1c6e(0x1ac);const {data:_0x2e9e9d}=await axios_1[_0x5c1c6e(0x1a8)][_0x5c1c6e(0x1b1)](_0x53855c[_0x5c1c6e(0x1ce)](),_0x5c1c6e(0x1db)),{expires_in:_0x127505,access_token:_0x364753}=_0x2e9e9d;this[_0x5c1c6e(0x1d3)]=Date[_0x5c1c6e(0x1bd)]()+_0x127505*0x3e8,this[_0x5c1c6e(0x1b2)]['setAccessToken'](_0x364753);}['getHeaders'](){return{};}[a163_0x35e088(0x1b0)](){const _0x31250a=a163_0x35e088;return this[_0x31250a(0x1b9)][_0x31250a(0x1bb)](_0x31250a(0x1d0));}async['isLoggedIn'](){const _0x149522=a163_0x35e088;return await this[_0x149522(0x1b0)](),!![];}};function a163_0x3122(){const _0x141df5=['getAuthorizationHeader','toString','defineProperty','user','Authorization','Tokens','accessTokenExpiresAt','typedi','design:paramtypes','../providers.tokens','1295ONPrnW','username','apply','3758373kcneND','grant_type=client_credentials','773735ywSVOc','__esModule','url','Inject','7664WLTnjK','9gUtlPe','headers','24148293GWygzQ','33EhPZIq','provider','length','default','__param','8ngQotn','BitbucketCredentialsDto','/site/oauth2/access_token','search','../credentials/dto/bitbucket-credentials.dto','refreshToken','getCurrentUser','post','credentials','(((.+)+)+)+$','../types/git-provider','1485276HxzXIc','GitApiService','__importDefault','decorate','request','checkAccessToken','get','BitbucketApiService','now','metadata','311530acMyCJ','createRequest','URL','536570KEqsaV','object','__metadata','__decorate','12CgXTGh','function','./git-api.service','getOwnPropertyDescriptor','35QsqFRD','use','Service'];a163_0x3122=function(){return _0x141df5;};return a163_0x3122();}BitbucketApiService=__decorate([(0x0,typedi_1[a163_0x35e088(0x1cc)])(),__param(0x0,(0x0,typedi_1[a163_0x35e088(0x1a0)])(providers_tokens_1[a163_0x35e088(0x1d2)][a163_0x35e088(0x1a6)])),__param(0x1,(0x0,typedi_1[a163_0x35e088(0x1a0)])(providers_tokens_1['Tokens'][a163_0x35e088(0x1b2)])),__metadata(a163_0x35e088(0x1d5),[String,bitbucket_credentials_dto_1[a163_0x35e088(0x1ab)]])],BitbucketApiService),exports[a163_0x35e088(0x1bc)]=BitbucketApiService;