const a111_0xd08f6b=a111_0x86a2;(function(_0x405da4,_0x10840e){const _0x1cad4a=a111_0x86a2,_0x35dec4=_0x405da4();while(!![]){try{const _0x154f01=-parseInt(_0x1cad4a(0x1ca))/0x1*(parseInt(_0x1cad4a(0x1cf))/0x2)+parseInt(_0x1cad4a(0x1b1))/0x3+parseInt(_0x1cad4a(0x1ac))/0x4+-parseInt(_0x1cad4a(0x1dc))/0x5+parseInt(_0x1cad4a(0x1c3))/0x6+parseInt(_0x1cad4a(0x1c7))/0x7*(parseInt(_0x1cad4a(0x1a9))/0x8)+parseInt(_0x1cad4a(0x1da))/0x9;if(_0x154f01===_0x10840e)break;else _0x35dec4['push'](_0x35dec4['shift']());}catch(_0x322b71){_0x35dec4['push'](_0x35dec4['shift']());}}}(a111_0x564c,0xdbdf6));const a111_0x5f114e=(function(){let _0x48b7e0=!![];return function(_0x1ca6ca,_0x1e8e6a){const _0x490c58=_0x48b7e0?function(){const _0x1f1c40=a111_0x86a2;if(_0x1e8e6a){const _0x42ef3f=_0x1e8e6a[_0x1f1c40(0x1c6)](_0x1ca6ca,arguments);return _0x1e8e6a=null,_0x42ef3f;}}:function(){};return _0x48b7e0=![],_0x490c58;};}()),a111_0x391246=a111_0x5f114e(this,function(){const _0x34ccea=a111_0x86a2;return a111_0x391246[_0x34ccea(0x1b9)]()[_0x34ccea(0x1d5)](_0x34ccea(0x1c0))['toString']()['constructor'](a111_0x391246)[_0x34ccea(0x1d5)](_0x34ccea(0x1c0));});a111_0x391246();'use strict';var __decorate=this&&this[a111_0xd08f6b(0x1d0)]||function(_0x28a8b1,_0x30d8bc,_0x27855f,_0x35e116){const _0xe1cd2=a111_0xd08f6b;var _0x3e5a87=arguments[_0xe1cd2(0x1c2)],_0x23880a=_0x3e5a87<0x3?_0x30d8bc:_0x35e116===null?_0x35e116=Object['getOwnPropertyDescriptor'](_0x30d8bc,_0x27855f):_0x35e116,_0x3f3e41;if(typeof Reflect===_0xe1cd2(0x1bb)&&typeof Reflect[_0xe1cd2(0x1ae)]===_0xe1cd2(0x1c1))_0x23880a=Reflect[_0xe1cd2(0x1ae)](_0x28a8b1,_0x30d8bc,_0x27855f,_0x35e116);else{for(var _0x51094f=_0x28a8b1[_0xe1cd2(0x1c2)]-0x1;_0x51094f>=0x0;_0x51094f--)if(_0x3f3e41=_0x28a8b1[_0x51094f])_0x23880a=(_0x3e5a87<0x3?_0x3f3e41(_0x23880a):_0x3e5a87>0x3?_0x3f3e41(_0x30d8bc,_0x27855f,_0x23880a):_0x3f3e41(_0x30d8bc,_0x27855f))||_0x23880a;}return _0x3e5a87>0x3&&_0x23880a&&Object['defineProperty'](_0x30d8bc,_0x27855f,_0x23880a),_0x23880a;},__metadata=this&&this[a111_0xd08f6b(0x1b8)]||function(_0x4fee8a,_0x270d8b){const _0x25a170=a111_0xd08f6b;if(typeof Reflect===_0x25a170(0x1bb)&&typeof Reflect[_0x25a170(0x1cd)]===_0x25a170(0x1c1))return Reflect[_0x25a170(0x1cd)](_0x4fee8a,_0x270d8b);},__param=this&&this['__param']||function(_0x43c5e6,_0xaf81d8){return function(_0x1f2ab4,_0x3877c9){_0xaf81d8(_0x1f2ab4,_0x3877c9,_0x43c5e6);};},__importDefault=this&&this[a111_0xd08f6b(0x1b6)]||function(_0xde41a1){const _0x3adb9b=a111_0xd08f6b;return _0xde41a1&&_0xde41a1[_0x3adb9b(0x1de)]?_0xde41a1:{'default':_0xde41a1};};function a111_0x86a2(_0x268497,_0x339a23){const _0x248285=a111_0x564c();return a111_0x86a2=function(_0x391246,_0x5f114e){_0x391246=_0x391246-0x1a9;let _0x564c41=_0x248285[_0x391246];return _0x564c41;},a111_0x86a2(_0x268497,_0x339a23);}Object[a111_0xd08f6b(0x1d1)](exports,a111_0xd08f6b(0x1de),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const axios_1=__importDefault(require(a111_0xd08f6b(0x1c8))),typedi_1=require('typedi'),git_api_service_1=require(a111_0xd08f6b(0x1ba)),bitbucket_credentials_dto_1=require(a111_0xd08f6b(0x1ad)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a111_0xd08f6b(0x1be)),url_1=require(a111_0xd08f6b(0x1cc));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x2fe3ca,_0x1fdf52){const _0x4cfc81=a111_0xd08f6b;super(_0x2fe3ca,_0x1fdf52),this[_0x4cfc81(0x1bd)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a111_0xd08f6b(0x1d8)](_0x202151){const _0x259c16=a111_0xd08f6b,_0x99dba9=super[_0x259c16(0x1d8)](_0x202151);return _0x99dba9[_0x259c16(0x1bc)]['request'][_0x259c16(0x1dd)](async _0x5e0fa3=>{const _0x341b41=_0x259c16;return await this['checkAccessToken'](),_0x5e0fa3[_0x341b41(0x1b2)]['Authorization']=this['credentials'][_0x341b41(0x1bf)](),_0x5e0fa3;}),_0x99dba9;}async[a111_0xd08f6b(0x1cb)](){const _0x3697fa=a111_0xd08f6b;if(Date['now']()<this[_0x3697fa(0x1bd)])return;await this[_0x3697fa(0x1c4)]();}async[a111_0xd08f6b(0x1c4)](){const _0x38badd=a111_0xd08f6b,{clientId:_0x5e2ce9,clientSecret:_0x21024d}=this[_0x38badd(0x1aa)],_0x3f1a29=new url_1['URL'](_0x38badd(0x1b3));_0x3f1a29[_0x38badd(0x1c9)]=_0x5e2ce9,_0x3f1a29[_0x38badd(0x1b5)]=_0x21024d,_0x3f1a29[_0x38badd(0x1ab)]='/site/oauth2/access_token';const {data:_0x17f382}=await axios_1[_0x38badd(0x1b4)][_0x38badd(0x1b7)](_0x3f1a29['toString'](),_0x38badd(0x1e0)),{expires_in:_0x14def2,access_token:_0x252f3d}=_0x17f382;this[_0x38badd(0x1bd)]=Date[_0x38badd(0x1d7)]()+_0x14def2*0x3e8,this[_0x38badd(0x1aa)]['setAccessToken'](_0x252f3d);}['getHeaders'](){return{};}[a111_0xd08f6b(0x1d4)](){const _0xcae578=a111_0xd08f6b;return this[_0xcae578(0x1d3)][_0xcae578(0x1ce)](_0xcae578(0x1b0));}async[a111_0xd08f6b(0x1d9)](){const _0x1ef0f1=a111_0xd08f6b;return await this[_0x1ef0f1(0x1d4)](),!![];}};function a111_0x564c(){const _0x47971f=['BitbucketCredentialsDto','user','2667465UDfUfb','headers','https://bitbucket.org','default','password','__importDefault','post','__metadata','toString','./git-api.service','object','interceptors','accessTokenExpiresAt','../types/git-provider','getAuthorizationHeader','(((.+)+)+)+$','function','length','7468590nDTUGk','refreshToken','Service','apply','49fdDhzC','axios','username','79TFkdAI','checkAccessToken','url','metadata','get','45494dMnSlY','__decorate','defineProperty','Tokens','request','getCurrentUser','search','BitbucketApiService','now','createRequest','isLoggedIn','5213961UFVkaq','Inject','7152805UXVubi','use','__esModule','design:paramtypes','grant_type=client_credentials','1159560oMIOaF','credentials','pathname','1601232knhnmO','../credentials/dto/bitbucket-credentials.dto','decorate'];a111_0x564c=function(){return _0x47971f;};return a111_0x564c();}BitbucketApiService=__decorate([typedi_1[a111_0xd08f6b(0x1c5)](),__param(0x0,typedi_1['Inject'](providers_tokens_1['Tokens']['provider'])),__param(0x1,typedi_1[a111_0xd08f6b(0x1db)](providers_tokens_1[a111_0xd08f6b(0x1d2)][a111_0xd08f6b(0x1aa)])),__metadata(a111_0xd08f6b(0x1df),[String,bitbucket_credentials_dto_1[a111_0xd08f6b(0x1af)]])],BitbucketApiService),exports[a111_0xd08f6b(0x1d6)]=BitbucketApiService;