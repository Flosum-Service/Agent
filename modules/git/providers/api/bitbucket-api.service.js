const a195_0x336063=a195_0x4b15;(function(_0x2cb55b,_0x24ba03){const _0x4b1541=a195_0x4b15,_0x56ceb4=_0x2cb55b();while(!![]){try{const _0x4a451b=-parseInt(_0x4b1541(0x187))/0x1*(-parseInt(_0x4b1541(0x1be))/0x2)+parseInt(_0x4b1541(0x19a))/0x3*(parseInt(_0x4b1541(0x1b6))/0x4)+parseInt(_0x4b1541(0x18d))/0x5*(-parseInt(_0x4b1541(0x1b4))/0x6)+-parseInt(_0x4b1541(0x1b3))/0x7+parseInt(_0x4b1541(0x18c))/0x8*(-parseInt(_0x4b1541(0x190))/0x9)+-parseInt(_0x4b1541(0x1ac))/0xa+parseInt(_0x4b1541(0x1b5))/0xb;if(_0x4a451b===_0x24ba03)break;else _0x56ceb4['push'](_0x56ceb4['shift']());}catch(_0xbf0a50){_0x56ceb4['push'](_0x56ceb4['shift']());}}}(a195_0x4761,0x59837));const a195_0x19c6f1=(function(){let _0x281e5f=!![];return function(_0x22783b,_0x3790ad){const _0xf43e37=_0x281e5f?function(){const _0x114d8c=a195_0x4b15;if(_0x3790ad){const _0x887d27=_0x3790ad[_0x114d8c(0x18e)](_0x22783b,arguments);return _0x3790ad=null,_0x887d27;}}:function(){};return _0x281e5f=![],_0xf43e37;};}()),a195_0x2e60a4=a195_0x19c6f1(this,function(){const _0xe6ea55=a195_0x4b15;return a195_0x2e60a4[_0xe6ea55(0x1b0)]()[_0xe6ea55(0x196)](_0xe6ea55(0x1bf))[_0xe6ea55(0x1b0)]()[_0xe6ea55(0x19c)](a195_0x2e60a4)[_0xe6ea55(0x196)]('(((.+)+)+)+$');});function a195_0x4761(){const _0x3f9858=['checkAccessToken','now','24bHgXjs','708620YoApqW','apply','MAX_REQUEST_PER_HOUR','1544355FHPXZC','request','__param','getHeaders','Inject','length','search','../types/git-provider','getAuthorizationHeader','axios','6sqBxBk','object','constructor','setAccessToken','post','use','__importDefault','decorate','__decorate','Service','BitbucketApiService','metadata','get','URL','username','headers','pathname','credentials','954420KetCos','createRequest','provider','function','toString','https://bitbucket.org','GitApiService','3277414dheWRE','30CKaHix','8429025XIaZNJ','1455632PDvmJg','default','../providers.tokens','getCurrentUser','defineProperty','Tokens','typedi','user','58SIBcRv','(((.+)+)+)+$','isLoggedIn','getOwnPropertyDescriptor','refreshToken','interceptors','__esModule','22745sFQJbg','accessTokenExpiresAt','/site/oauth2/access_token'];a195_0x4761=function(){return _0x3f9858;};return a195_0x4761();}a195_0x2e60a4();'use strict';var __decorate=this&&this[a195_0x336063(0x1a2)]||function(_0x141fce,_0x3d482d,_0x5954f4,_0x443c54){const _0x3d3a32=a195_0x336063;var _0x109f04=arguments[_0x3d3a32(0x195)],_0x4fe852=_0x109f04<0x3?_0x3d482d:_0x443c54===null?_0x443c54=Object[_0x3d3a32(0x1c1)](_0x3d482d,_0x5954f4):_0x443c54,_0x1cdb5e;if(typeof Reflect==='object'&&typeof Reflect[_0x3d3a32(0x1a1)]==='function')_0x4fe852=Reflect[_0x3d3a32(0x1a1)](_0x141fce,_0x3d482d,_0x5954f4,_0x443c54);else{for(var _0x1ce327=_0x141fce[_0x3d3a32(0x195)]-0x1;_0x1ce327>=0x0;_0x1ce327--)if(_0x1cdb5e=_0x141fce[_0x1ce327])_0x4fe852=(_0x109f04<0x3?_0x1cdb5e(_0x4fe852):_0x109f04>0x3?_0x1cdb5e(_0x3d482d,_0x5954f4,_0x4fe852):_0x1cdb5e(_0x3d482d,_0x5954f4))||_0x4fe852;}return _0x109f04>0x3&&_0x4fe852&&Object[_0x3d3a32(0x1ba)](_0x3d482d,_0x5954f4,_0x4fe852),_0x4fe852;},__metadata=this&&this['__metadata']||function(_0x41da56,_0x41b22a){const _0x44a78c=a195_0x336063;if(typeof Reflect===_0x44a78c(0x19b)&&typeof Reflect['metadata']===_0x44a78c(0x1af))return Reflect[_0x44a78c(0x1a5)](_0x41da56,_0x41b22a);},__param=this&&this[a195_0x336063(0x192)]||function(_0x3a68e4,_0xb8b1c7){return function(_0x67878d,_0x416c2f){_0xb8b1c7(_0x67878d,_0x416c2f,_0x3a68e4);};},__importDefault=this&&this[a195_0x336063(0x1a0)]||function(_0x3d22eb){const _0x1a6ef3=a195_0x336063;return _0x3d22eb&&_0x3d22eb[_0x1a6ef3(0x186)]?_0x3d22eb:{'default':_0x3d22eb};};Object[a195_0x336063(0x1ba)](exports,a195_0x336063(0x186),{'value':!![]}),exports[a195_0x336063(0x1a4)]=void 0x0;function a195_0x4b15(_0x48ffc4,_0x363eed){const _0x25d094=a195_0x4761();return a195_0x4b15=function(_0x2e60a4,_0x19c6f1){_0x2e60a4=_0x2e60a4-0x185;let _0x47612a=_0x25d094[_0x2e60a4];return _0x47612a;},a195_0x4b15(_0x48ffc4,_0x363eed);}const axios_1=__importDefault(require(a195_0x336063(0x199))),typedi_1=require(a195_0x336063(0x1bc)),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a195_0x336063(0x1b8)),git_provider_1=require(a195_0x336063(0x197)),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a195_0x336063(0x1b2)]{constructor(_0x51420d,_0x123324){const _0x49395f=a195_0x336063;super(_0x51420d,_0x123324),this[_0x49395f(0x188)]=-0x1,this[_0x49395f(0x18f)]=0x3e8;}['createRequest'](_0xb0d707){const _0x203896=a195_0x336063,_0x8b1db5=super[_0x203896(0x1ad)](_0xb0d707);return _0x8b1db5[_0x203896(0x185)][_0x203896(0x191)][_0x203896(0x19f)](async _0x48f629=>{const _0x558379=_0x203896;return await this[_0x558379(0x18a)](),_0x48f629[_0x558379(0x1a9)]['Authorization']=this[_0x558379(0x1ab)][_0x558379(0x198)](),_0x48f629;}),_0x8b1db5;}async[a195_0x336063(0x18a)](){const _0x2dc985=a195_0x336063;if(Date[_0x2dc985(0x18b)]()<this[_0x2dc985(0x188)])return;await this['refreshToken']();}async[a195_0x336063(0x1c2)](){const _0x5b1d32=a195_0x336063,{clientId:_0x1156b5,clientSecret:_0x2a0e00}=this[_0x5b1d32(0x1ab)],_0x5dbdae=new url_1[(_0x5b1d32(0x1a7))](_0x5b1d32(0x1b1));_0x5dbdae[_0x5b1d32(0x1a8)]=_0x1156b5,_0x5dbdae['password']=_0x2a0e00,_0x5dbdae[_0x5b1d32(0x1aa)]=_0x5b1d32(0x189);const {data:_0x4d1e91}=await axios_1[_0x5b1d32(0x1b7)][_0x5b1d32(0x19e)](_0x5dbdae['toString'](),'grant_type=client_credentials'),{expires_in:_0x2b2a58,access_token:_0x7bd295}=_0x4d1e91;this[_0x5b1d32(0x188)]=Date['now']()+_0x2b2a58*0x3e8,this['credentials'][_0x5b1d32(0x19d)](_0x7bd295);}[a195_0x336063(0x193)](){return{};}[a195_0x336063(0x1b9)](){const _0x265ff5=a195_0x336063;return this[_0x265ff5(0x191)][_0x265ff5(0x1a6)](_0x265ff5(0x1bd));}async[a195_0x336063(0x1c0)](){const _0x5b362f=a195_0x336063;return await this[_0x5b362f(0x1b9)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a195_0x336063(0x1a3)])(),__param(0x0,(0x0,typedi_1[a195_0x336063(0x194)])(providers_tokens_1['Tokens'][a195_0x336063(0x1ae)])),__param(0x1,(0x0,typedi_1[a195_0x336063(0x194)])(providers_tokens_1[a195_0x336063(0x1bb)][a195_0x336063(0x1ab)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports[a195_0x336063(0x1a4)]=BitbucketApiService;