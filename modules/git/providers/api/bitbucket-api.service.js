function a163_0x50f2(){const _0x1e847d=['now','typedi','../types/git-provider','BitbucketApiService','constructor','provider','852746NQxrVj','Tokens','./git-api.service','BitbucketCredentialsDto','isLoggedIn','new\x20access\x20token:\x20','username','1665748vXAEEu','checkAccessToken','https://bitbucket.org','Authorization','GitApiService','post','1513492BjjLeJ','__importDefault','getHeaders','Inject','default','../credentials/dto/bitbucket-credentials.dto','get','toString','URL','/site/oauth2/access_token','__esModule','use','axios','createRequest','grant_type=client_credentials','2675XOpoou','name','setAccessToken','Service','credentials','MAX_REQUEST_PER_HOUR','getCurrentUser','password','refreshToken','interceptors','metadata','accessTokenExpiresAt','defineProperty','decorate','info','apply','16gpCErX','logger','3xHwnKm','getOwnPropertyDescriptor','__decorate','access\x20token\x20will\x20be\x20refreshed','getAuthorizationHeader','../providers.tokens','1295420HscRvv','search','request','6581160srNITM','function','length','19621010zYGPMI','10452wCKlty','headers','object'];a163_0x50f2=function(){return _0x1e847d;};return a163_0x50f2();}const a163_0x9c4316=a163_0x2bd1;(function(_0xe50075,_0x1179eb){const _0x1beeb4=a163_0x2bd1,_0x3b01a2=_0xe50075();while(!![]){try{const _0x3968c5=-parseInt(_0x1beeb4(0x15a))/0x1+parseInt(_0x1beeb4(0x167))/0x2*(-parseInt(_0x1beeb4(0x144))/0x3)+parseInt(_0x1beeb4(0x161))/0x4+-parseInt(_0x1beeb4(0x176))/0x5*(-parseInt(_0x1beeb4(0x151))/0x6)+-parseInt(_0x1beeb4(0x14a))/0x7*(parseInt(_0x1beeb4(0x142))/0x8)+-parseInt(_0x1beeb4(0x14d))/0x9+parseInt(_0x1beeb4(0x150))/0xa;if(_0x3968c5===_0x1179eb)break;else _0x3b01a2['push'](_0x3b01a2['shift']());}catch(_0x3def7d){_0x3b01a2['push'](_0x3b01a2['shift']());}}}(a163_0x50f2,0x92668));const a163_0xd3054b=(function(){let _0x11887f=!![];return function(_0x11f3f5,_0x281026){const _0x32c684=_0x11887f?function(){const _0x369e35=a163_0x2bd1;if(_0x281026){const _0x40b132=_0x281026[_0x369e35(0x141)](_0x11f3f5,arguments);return _0x281026=null,_0x40b132;}}:function(){};return _0x11887f=![],_0x32c684;};}()),a163_0x39fb1f=a163_0xd3054b(this,function(){const _0x1607da=a163_0x2bd1;return a163_0x39fb1f['toString']()[_0x1607da(0x14b)]('(((.+)+)+)+$')['toString']()[_0x1607da(0x158)](a163_0x39fb1f)[_0x1607da(0x14b)]('(((.+)+)+)+$');});function a163_0x2bd1(_0x1fd235,_0x1cc1ea){const _0x24e76f=a163_0x50f2();return a163_0x2bd1=function(_0x39fb1f,_0xd3054b){_0x39fb1f=_0x39fb1f-0x13a;let _0x50f218=_0x24e76f[_0x39fb1f];return _0x50f218;},a163_0x2bd1(_0x1fd235,_0x1cc1ea);}a163_0x39fb1f();'use strict';var __decorate=this&&this[a163_0x9c4316(0x146)]||function(_0x5481f6,_0x2de388,_0x25f5f7,_0x44d88c){const _0x35a314=a163_0x9c4316;var _0x24a476=arguments['length'],_0xeae886=_0x24a476<0x3?_0x2de388:_0x44d88c===null?_0x44d88c=Object[_0x35a314(0x145)](_0x2de388,_0x25f5f7):_0x44d88c,_0x5073e6;if(typeof Reflect===_0x35a314(0x153)&&typeof Reflect['decorate']===_0x35a314(0x14e))_0xeae886=Reflect[_0x35a314(0x13f)](_0x5481f6,_0x2de388,_0x25f5f7,_0x44d88c);else{for(var _0x4a8e59=_0x5481f6[_0x35a314(0x14f)]-0x1;_0x4a8e59>=0x0;_0x4a8e59--)if(_0x5073e6=_0x5481f6[_0x4a8e59])_0xeae886=(_0x24a476<0x3?_0x5073e6(_0xeae886):_0x24a476>0x3?_0x5073e6(_0x2de388,_0x25f5f7,_0xeae886):_0x5073e6(_0x2de388,_0x25f5f7))||_0xeae886;}return _0x24a476>0x3&&_0xeae886&&Object[_0x35a314(0x13e)](_0x2de388,_0x25f5f7,_0xeae886),_0xeae886;},__metadata=this&&this['__metadata']||function(_0x115801,_0x4a0e35){const _0x471d19=a163_0x9c4316;if(typeof Reflect===_0x471d19(0x153)&&typeof Reflect['metadata']==='function')return Reflect[_0x471d19(0x13c)](_0x115801,_0x4a0e35);},__param=this&&this['__param']||function(_0x3d0fd9,_0xd5d735){return function(_0x26a4e1,_0x233b00){_0xd5d735(_0x26a4e1,_0x233b00,_0x3d0fd9);};},__importDefault=this&&this[a163_0x9c4316(0x168)]||function(_0x131a3f){const _0x2391a5=a163_0x9c4316;return _0x131a3f&&_0x131a3f[_0x2391a5(0x171)]?_0x131a3f:{'default':_0x131a3f};},BitbucketApiService_1;Object[a163_0x9c4316(0x13e)](exports,'__esModule',{'value':!![]}),exports['BitbucketApiService']=void 0x0;const axios_1=__importDefault(require(a163_0x9c4316(0x173))),typedi_1=require(a163_0x9c4316(0x155)),git_api_service_1=require(a163_0x9c4316(0x15c)),bitbucket_credentials_dto_1=require(a163_0x9c4316(0x16c)),providers_tokens_1=require(a163_0x9c4316(0x149)),git_provider_1=require(a163_0x9c4316(0x156)),url_1=require('url'),core_1=require('../../../../core');let BitbucketApiService=BitbucketApiService_1=class BitbucketApiService extends git_api_service_1[a163_0x9c4316(0x165)]{constructor(_0x156352,_0x5c02c2){const _0x47ed7f=a163_0x9c4316;super(_0x156352,_0x5c02c2),this[_0x47ed7f(0x13d)]=-0x1,this[_0x47ed7f(0x17b)]=0x3e8;}[a163_0x9c4316(0x174)](_0x3a7d9c){const _0x20aefc=a163_0x9c4316,_0x50ba5a=super[_0x20aefc(0x174)](_0x3a7d9c);return _0x50ba5a[_0x20aefc(0x13b)]['request'][_0x20aefc(0x172)](async _0x2f3ad9=>{const _0x22cdc8=_0x20aefc;return await this[_0x22cdc8(0x162)](),_0x2f3ad9[_0x22cdc8(0x152)][_0x22cdc8(0x164)]=this[_0x22cdc8(0x17a)][_0x22cdc8(0x148)](),_0x2f3ad9;}),_0x50ba5a;}async[a163_0x9c4316(0x162)](){const _0x351ecc=a163_0x9c4316;BitbucketApiService_1[_0x351ecc(0x143)][_0x351ecc(0x140)]('access\x20token\x20verification');if(Date[_0x351ecc(0x154)]()<this[_0x351ecc(0x13d)]){BitbucketApiService_1['logger'][_0x351ecc(0x140)]('token\x20is\x20valid');return;}await this[_0x351ecc(0x13a)]();}async['refreshToken'](){const _0x14d964=a163_0x9c4316;BitbucketApiService_1[_0x14d964(0x143)][_0x14d964(0x140)](_0x14d964(0x147));const {clientId:_0xe6c150,clientSecret:_0x597755}=this[_0x14d964(0x17a)],_0x499510=new url_1[(_0x14d964(0x16f))](_0x14d964(0x163));_0x499510[_0x14d964(0x160)]=_0xe6c150,_0x499510[_0x14d964(0x17d)]=_0x597755,_0x499510['pathname']=_0x14d964(0x170);const {data:_0xc33d83}=await axios_1[_0x14d964(0x16b)][_0x14d964(0x166)](_0x499510[_0x14d964(0x16e)](),_0x14d964(0x175)),{expires_in:_0x319560,access_token:_0x558a15}=_0xc33d83;this[_0x14d964(0x13d)]=Date[_0x14d964(0x154)]()+_0x319560*0x3e8,this[_0x14d964(0x17a)][_0x14d964(0x178)](_0x558a15),BitbucketApiService_1['logger'][_0x14d964(0x140)](_0x14d964(0x15f)+_0x558a15);}[a163_0x9c4316(0x169)](){return{};}[a163_0x9c4316(0x17c)](){const _0x6ba645=a163_0x9c4316;return this[_0x6ba645(0x14c)][_0x6ba645(0x16d)]('user');}async[a163_0x9c4316(0x15e)](){const _0x5d8933=a163_0x9c4316;return await this[_0x5d8933(0x17c)](),!![];}};BitbucketApiService['logger']=new core_1['Logger'](BitbucketApiService_1[a163_0x9c4316(0x177)]),BitbucketApiService=BitbucketApiService_1=__decorate([(0x0,typedi_1[a163_0x9c4316(0x179)])(),__param(0x0,(0x0,typedi_1['Inject'])(providers_tokens_1[a163_0x9c4316(0x15b)][a163_0x9c4316(0x159)])),__param(0x1,(0x0,typedi_1[a163_0x9c4316(0x16a)])(providers_tokens_1['Tokens'][a163_0x9c4316(0x17a)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a163_0x9c4316(0x15d)]])],BitbucketApiService),exports[a163_0x9c4316(0x157)]=BitbucketApiService;