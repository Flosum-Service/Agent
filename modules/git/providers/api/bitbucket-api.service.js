const a163_0x13d547=a163_0x59c4;(function(_0x5429e6,_0x26198b){const _0x3b455f=a163_0x59c4,_0x477905=_0x5429e6();while(!![]){try{const _0x2ef4de=parseInt(_0x3b455f(0x15a))/0x1*(-parseInt(_0x3b455f(0x156))/0x2)+parseInt(_0x3b455f(0x14b))/0x3+-parseInt(_0x3b455f(0x157))/0x4*(parseInt(_0x3b455f(0x155))/0x5)+-parseInt(_0x3b455f(0x14d))/0x6+-parseInt(_0x3b455f(0x137))/0x7+parseInt(_0x3b455f(0x15f))/0x8*(-parseInt(_0x3b455f(0x164))/0x9)+parseInt(_0x3b455f(0x144))/0xa;if(_0x2ef4de===_0x26198b)break;else _0x477905['push'](_0x477905['shift']());}catch(_0x3caf6b){_0x477905['push'](_0x477905['shift']());}}}(a163_0xa6e8,0x5ae1e));const a163_0x5d3686=(function(){let _0x498460=!![];return function(_0x40e646,_0x4122e2){const _0x285f15=_0x498460?function(){const _0x3c7aab=a163_0x59c4;if(_0x4122e2){const _0x5cc489=_0x4122e2[_0x3c7aab(0x142)](_0x40e646,arguments);return _0x4122e2=null,_0x5cc489;}}:function(){};return _0x498460=![],_0x285f15;};}()),a163_0x5e9239=a163_0x5d3686(this,function(){const _0x559cbe=a163_0x59c4;return a163_0x5e9239[_0x559cbe(0x143)]()[_0x559cbe(0x13b)]('(((.+)+)+)+$')[_0x559cbe(0x143)]()['constructor'](a163_0x5e9239)[_0x559cbe(0x13b)](_0x559cbe(0x145));});a163_0x5e9239();function a163_0xa6e8(){const _0x2096ef=['BitbucketCredentialsDto','getOwnPropertyDescriptor','BitbucketApiService','get','axios','headers','defineProperty','./git-api.service','typedi','interceptors','object','getHeaders','GitApiService','1263612fXsvsR','getCurrentUser','__param','checkAccessToken','search','createRequest','MAX_REQUEST_PER_HOUR','use','__decorate','credentials','metadata','apply','toString','15435110yIepLB','(((.+)+)+)+$','design:paramtypes','accessTokenExpiresAt','pathname','request','provider','2176377uaFHoh','refreshToken','2754180ZuPtgU','URL','/site/oauth2/access_token','Tokens','setAccessToken','password','now','getAuthorizationHeader','70FYxCpy','4jlYrGH','169024EYavGE','Inject','isLoggedIn','234798uBJVFk','function','username','../credentials/dto/bitbucket-credentials.dto','decorate','3336hBsodH','user','default','__esModule','length','4230xwjmOr'];a163_0xa6e8=function(){return _0x2096ef;};return a163_0xa6e8();}'use strict';var __decorate=this&&this[a163_0x13d547(0x13f)]||function(_0x294089,_0x259d07,_0x1f67f3,_0x8942bc){const _0x309f49=a163_0x13d547;var _0x3de6ab=arguments[_0x309f49(0x163)],_0x1a3804=_0x3de6ab<0x3?_0x259d07:_0x8942bc===null?_0x8942bc=Object[_0x309f49(0x166)](_0x259d07,_0x1f67f3):_0x8942bc,_0x11d6f4;if(typeof Reflect===_0x309f49(0x134)&&typeof Reflect[_0x309f49(0x15e)]===_0x309f49(0x15b))_0x1a3804=Reflect['decorate'](_0x294089,_0x259d07,_0x1f67f3,_0x8942bc);else{for(var _0x272b38=_0x294089[_0x309f49(0x163)]-0x1;_0x272b38>=0x0;_0x272b38--)if(_0x11d6f4=_0x294089[_0x272b38])_0x1a3804=(_0x3de6ab<0x3?_0x11d6f4(_0x1a3804):_0x3de6ab>0x3?_0x11d6f4(_0x259d07,_0x1f67f3,_0x1a3804):_0x11d6f4(_0x259d07,_0x1f67f3))||_0x1a3804;}return _0x3de6ab>0x3&&_0x1a3804&&Object[_0x309f49(0x16b)](_0x259d07,_0x1f67f3,_0x1a3804),_0x1a3804;},__metadata=this&&this['__metadata']||function(_0x18ec81,_0x577dad){const _0x10d2ce=a163_0x13d547;if(typeof Reflect==='object'&&typeof Reflect[_0x10d2ce(0x141)]===_0x10d2ce(0x15b))return Reflect[_0x10d2ce(0x141)](_0x18ec81,_0x577dad);},__param=this&&this[a163_0x13d547(0x139)]||function(_0x19719d,_0x4c486a){return function(_0x1372e1,_0x23c3a4){_0x4c486a(_0x1372e1,_0x23c3a4,_0x19719d);};},__importDefault=this&&this['__importDefault']||function(_0x4560c3){const _0x4daaca=a163_0x13d547;return _0x4560c3&&_0x4560c3[_0x4daaca(0x162)]?_0x4560c3:{'default':_0x4560c3};};function a163_0x59c4(_0x35f03a,_0x8f813){const _0x484eda=a163_0xa6e8();return a163_0x59c4=function(_0x5e9239,_0x5d3686){_0x5e9239=_0x5e9239-0x133;let _0xa6e82b=_0x484eda[_0x5e9239];return _0xa6e82b;},a163_0x59c4(_0x35f03a,_0x8f813);}Object[a163_0x13d547(0x16b)](exports,a163_0x13d547(0x162),{'value':!![]}),exports[a163_0x13d547(0x167)]=void 0x0;const axios_1=__importDefault(require(a163_0x13d547(0x169))),typedi_1=require(a163_0x13d547(0x16d)),git_api_service_1=require(a163_0x13d547(0x16c)),bitbucket_credentials_dto_1=require(a163_0x13d547(0x15d)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require('../types/git-provider'),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x13d547(0x136)]{constructor(_0x2ff887,_0x221587){const _0x553b95=a163_0x13d547;super(_0x2ff887,_0x221587),this[_0x553b95(0x147)]=-0x1,this[_0x553b95(0x13d)]=0x3e8;}[a163_0x13d547(0x13c)](_0x363cd2){const _0x2f08e6=a163_0x13d547,_0x3a7302=super[_0x2f08e6(0x13c)](_0x363cd2);return _0x3a7302[_0x2f08e6(0x133)][_0x2f08e6(0x149)][_0x2f08e6(0x13e)](async _0x55b69f=>{const _0x1a7df3=_0x2f08e6;return await this['checkAccessToken'](),_0x55b69f[_0x1a7df3(0x16a)]['Authorization']=this[_0x1a7df3(0x140)][_0x1a7df3(0x154)](),_0x55b69f;}),_0x3a7302;}async[a163_0x13d547(0x13a)](){const _0x652f1a=a163_0x13d547;if(Date[_0x652f1a(0x153)]()<this[_0x652f1a(0x147)])return;await this['refreshToken']();}async[a163_0x13d547(0x14c)](){const _0x564ee9=a163_0x13d547,{clientId:_0x3d10e5,clientSecret:_0x1dc353}=this[_0x564ee9(0x140)],_0x12774c=new url_1[(_0x564ee9(0x14e))]('https://bitbucket.org');_0x12774c[_0x564ee9(0x15c)]=_0x3d10e5,_0x12774c[_0x564ee9(0x152)]=_0x1dc353,_0x12774c[_0x564ee9(0x148)]=_0x564ee9(0x14f);const {data:_0x34d7eb}=await axios_1[_0x564ee9(0x161)]['post'](_0x12774c['toString'](),'grant_type=client_credentials'),{expires_in:_0x75dcb3,access_token:_0x30566e}=_0x34d7eb;this[_0x564ee9(0x147)]=Date[_0x564ee9(0x153)]()+_0x75dcb3*0x3e8,this['credentials'][_0x564ee9(0x151)](_0x30566e);}[a163_0x13d547(0x135)](){return{};}[a163_0x13d547(0x138)](){const _0x5c8d0b=a163_0x13d547;return this[_0x5c8d0b(0x149)][_0x5c8d0b(0x168)](_0x5c8d0b(0x160));}async[a163_0x13d547(0x159)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a163_0x13d547(0x158)])(providers_tokens_1[a163_0x13d547(0x150)][a163_0x13d547(0x14a)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a163_0x13d547(0x150)][a163_0x13d547(0x140)])),__metadata(a163_0x13d547(0x146),[String,bitbucket_credentials_dto_1[a163_0x13d547(0x165)]])],BitbucketApiService),exports[a163_0x13d547(0x167)]=BitbucketApiService;