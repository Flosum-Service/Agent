const a163_0x4e74c2=a163_0xd8bd;function a163_0xd8bd(_0x1f4ea1,_0x24b5c1){const _0x244054=a163_0x6a66();return a163_0xd8bd=function(_0x44b6a,_0x3c636a){_0x44b6a=_0x44b6a-0x92;let _0x6a661=_0x244054[_0x44b6a];return _0x6a661;},a163_0xd8bd(_0x1f4ea1,_0x24b5c1);}(function(_0x1dfc00,_0xf5d1e2){const _0x569bdd=a163_0xd8bd,_0x565f40=_0x1dfc00();while(!![]){try{const _0x287a3b=-parseInt(_0x569bdd(0xc1))/0x1*(parseInt(_0x569bdd(0xa9))/0x2)+-parseInt(_0x569bdd(0xb8))/0x3+-parseInt(_0x569bdd(0xb0))/0x4*(parseInt(_0x569bdd(0xa2))/0x5)+parseInt(_0x569bdd(0xa7))/0x6+parseInt(_0x569bdd(0x9b))/0x7*(parseInt(_0x569bdd(0x9f))/0x8)+-parseInt(_0x569bdd(0xc7))/0x9+parseInt(_0x569bdd(0xb7))/0xa;if(_0x287a3b===_0xf5d1e2)break;else _0x565f40['push'](_0x565f40['shift']());}catch(_0x189789){_0x565f40['push'](_0x565f40['shift']());}}}(a163_0x6a66,0xf0e3f));const a163_0x3c636a=(function(){let _0x57b7f5=!![];return function(_0x3c1b2a,_0x3e50df){const _0x531c6a=_0x57b7f5?function(){if(_0x3e50df){const _0x3c9fa8=_0x3e50df['apply'](_0x3c1b2a,arguments);return _0x3e50df=null,_0x3c9fa8;}}:function(){};return _0x57b7f5=![],_0x531c6a;};}()),a163_0x44b6a=a163_0x3c636a(this,function(){const _0x1bc09f=a163_0xd8bd;return a163_0x44b6a[_0x1bc09f(0xc3)]()[_0x1bc09f(0xca)](_0x1bc09f(0xb2))[_0x1bc09f(0xc3)]()['constructor'](a163_0x44b6a)[_0x1bc09f(0xca)]('(((.+)+)+)+$');});a163_0x44b6a();'use strict';var __decorate=this&&this[a163_0x4e74c2(0xad)]||function(_0x29d4ec,_0x22f25d,_0x4d55d0,_0x397e0f){const _0x5c8beb=a163_0x4e74c2;var _0x26860c=arguments['length'],_0x27c2a2=_0x26860c<0x3?_0x22f25d:_0x397e0f===null?_0x397e0f=Object[_0x5c8beb(0xb6)](_0x22f25d,_0x4d55d0):_0x397e0f,_0x354a20;if(typeof Reflect===_0x5c8beb(0x9a)&&typeof Reflect[_0x5c8beb(0x98)]==='function')_0x27c2a2=Reflect['decorate'](_0x29d4ec,_0x22f25d,_0x4d55d0,_0x397e0f);else{for(var _0x42713b=_0x29d4ec[_0x5c8beb(0xac)]-0x1;_0x42713b>=0x0;_0x42713b--)if(_0x354a20=_0x29d4ec[_0x42713b])_0x27c2a2=(_0x26860c<0x3?_0x354a20(_0x27c2a2):_0x26860c>0x3?_0x354a20(_0x22f25d,_0x4d55d0,_0x27c2a2):_0x354a20(_0x22f25d,_0x4d55d0))||_0x27c2a2;}return _0x26860c>0x3&&_0x27c2a2&&Object[_0x5c8beb(0xc4)](_0x22f25d,_0x4d55d0,_0x27c2a2),_0x27c2a2;},__metadata=this&&this[a163_0x4e74c2(0xb3)]||function(_0x42a73b,_0x9a80e8){const _0x26ccca=a163_0x4e74c2;if(typeof Reflect===_0x26ccca(0x9a)&&typeof Reflect['metadata']===_0x26ccca(0x94))return Reflect[_0x26ccca(0xb4)](_0x42a73b,_0x9a80e8);},__param=this&&this['__param']||function(_0xa01418,_0x9d20c7){return function(_0x397565,_0x35d45a){_0x9d20c7(_0x397565,_0x35d45a,_0xa01418);};},__importDefault=this&&this[a163_0x4e74c2(0xc2)]||function(_0x108183){return _0x108183&&_0x108183['__esModule']?_0x108183:{'default':_0x108183};};Object[a163_0x4e74c2(0xc4)](exports,a163_0x4e74c2(0xaa),{'value':!![]}),exports[a163_0x4e74c2(0xbc)]=void 0x0;function a163_0x6a66(){const _0x5cd354=['pathname','6701118OmCYuj','https://bitbucket.org','1116114bBsueP','__esModule','url','length','__decorate','./git-api.service','URL','8DgqBlY','credentials','(((.+)+)+)+$','__metadata','metadata','Inject','getOwnPropertyDescriptor','13873020qLjybD','5416107sNQhkg','password','interceptors','MAX_REQUEST_PER_HOUR','BitbucketApiService','/site/oauth2/access_token','../types/git-provider','GitApiService','refreshToken','1QaOFks','__importDefault','toString','defineProperty','Authorization','createRequest','4613058QovxJf','../credentials/dto/bitbucket-credentials.dto','use','search','grant_type=client_credentials','post','request','function','isLoggedIn','default','Tokens','decorate','typedi','object','70MtpICM','BitbucketCredentialsDto','axios','user','1348568ZvKBXb','accessTokenExpiresAt','username','817975HZJYRq','getCurrentUser','now','getAuthorizationHeader'];a163_0x6a66=function(){return _0x5cd354;};return a163_0x6a66();}const axios_1=__importDefault(require(a163_0x4e74c2(0x9d))),typedi_1=require(a163_0x4e74c2(0x99)),git_api_service_1=require(a163_0x4e74c2(0xae)),bitbucket_credentials_dto_1=require(a163_0x4e74c2(0xc8)),providers_tokens_1=require('../providers.tokens'),git_provider_1=require(a163_0x4e74c2(0xbe)),url_1=require(a163_0x4e74c2(0xab));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x4e74c2(0xbf)]{constructor(_0x11e7a8,_0x327ee9){const _0x543b2c=a163_0x4e74c2;super(_0x11e7a8,_0x327ee9),this[_0x543b2c(0xa0)]=-0x1,this[_0x543b2c(0xbb)]=0x3e8;}[a163_0x4e74c2(0xc6)](_0x1a3a3e){const _0x2653cb=a163_0x4e74c2,_0x45da9b=super[_0x2653cb(0xc6)](_0x1a3a3e);return _0x45da9b[_0x2653cb(0xba)][_0x2653cb(0x93)][_0x2653cb(0xc9)](async _0x4af8cd=>{const _0x57e737=_0x2653cb;return await this['checkAccessToken'](),_0x4af8cd['headers'][_0x57e737(0xc5)]=this[_0x57e737(0xb1)][_0x57e737(0xa5)](),_0x4af8cd;}),_0x45da9b;}async['checkAccessToken'](){const _0xa94cde=a163_0x4e74c2;if(Date[_0xa94cde(0xa4)]()<this[_0xa94cde(0xa0)])return;await this[_0xa94cde(0xc0)]();}async[a163_0x4e74c2(0xc0)](){const _0x5c4c6b=a163_0x4e74c2,{clientId:_0x57afa0,clientSecret:_0x1b98bd}=this['credentials'],_0x2f0bdd=new url_1[(_0x5c4c6b(0xaf))](_0x5c4c6b(0xa8));_0x2f0bdd[_0x5c4c6b(0xa1)]=_0x57afa0,_0x2f0bdd[_0x5c4c6b(0xb9)]=_0x1b98bd,_0x2f0bdd[_0x5c4c6b(0xa6)]=_0x5c4c6b(0xbd);const {data:_0xf09d94}=await axios_1[_0x5c4c6b(0x96)][_0x5c4c6b(0x92)](_0x2f0bdd[_0x5c4c6b(0xc3)](),_0x5c4c6b(0xcb)),{expires_in:_0x5079ef,access_token:_0x6bcb40}=_0xf09d94;this[_0x5c4c6b(0xa0)]=Date[_0x5c4c6b(0xa4)]()+_0x5079ef*0x3e8,this['credentials']['setAccessToken'](_0x6bcb40);}['getHeaders'](){return{};}[a163_0x4e74c2(0xa3)](){const _0x4eae77=a163_0x4e74c2;return this['request']['get'](_0x4eae77(0x9e));}async[a163_0x4e74c2(0x95)](){const _0x2f720b=a163_0x4e74c2;return await this[_0x2f720b(0xa3)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1['Inject'])(providers_tokens_1[a163_0x4e74c2(0x97)]['provider'])),__param(0x1,(0x0,typedi_1[a163_0x4e74c2(0xb5)])(providers_tokens_1[a163_0x4e74c2(0x97)][a163_0x4e74c2(0xb1)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a163_0x4e74c2(0x9c)]])],BitbucketApiService),exports[a163_0x4e74c2(0xbc)]=BitbucketApiService;