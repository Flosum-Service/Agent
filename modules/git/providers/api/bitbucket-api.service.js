const a168_0x344488=a168_0x29c1;(function(_0x238c16,_0x135098){const _0x37fb95=a168_0x29c1,_0x2e7562=_0x238c16();while(!![]){try{const _0x966418=-parseInt(_0x37fb95(0x212))/0x1+-parseInt(_0x37fb95(0x228))/0x2+-parseInt(_0x37fb95(0x1f1))/0x3*(-parseInt(_0x37fb95(0x226))/0x4)+parseInt(_0x37fb95(0x1f3))/0x5*(-parseInt(_0x37fb95(0x225))/0x6)+parseInt(_0x37fb95(0x20e))/0x7*(parseInt(_0x37fb95(0x1f9))/0x8)+-parseInt(_0x37fb95(0x20b))/0x9*(-parseInt(_0x37fb95(0x221))/0xa)+parseInt(_0x37fb95(0x1f6))/0xb;if(_0x966418===_0x135098)break;else _0x2e7562['push'](_0x2e7562['shift']());}catch(_0x2318f8){_0x2e7562['push'](_0x2e7562['shift']());}}}(a168_0x4c87,0x29843));const a168_0x4cdb6d=(function(){let _0x387f2=!![];return function(_0x983271,_0x5c62a5){const _0x5da166=_0x387f2?function(){const _0x417df1=a168_0x29c1;if(_0x5c62a5){const _0x1554b7=_0x5c62a5[_0x417df1(0x22c)](_0x983271,arguments);return _0x5c62a5=null,_0x1554b7;}}:function(){};return _0x387f2=![],_0x5da166;};}()),a168_0x96070d=a168_0x4cdb6d(this,function(){const _0x46bf98=a168_0x29c1;return a168_0x96070d[_0x46bf98(0x222)]()[_0x46bf98(0x211)]('(((.+)+)+)+$')['toString']()[_0x46bf98(0x1fd)](a168_0x96070d)['search'](_0x46bf98(0x21b));});a168_0x96070d();'use strict';var __decorate=this&&this[a168_0x344488(0x22e)]||function(_0x5ed706,_0x304031,_0x312a88,_0x1040fe){const _0x2ff0fd=a168_0x344488;var _0x5e2b2c=arguments['length'],_0x29e730=_0x5e2b2c<0x3?_0x304031:_0x1040fe===null?_0x1040fe=Object[_0x2ff0fd(0x21c)](_0x304031,_0x312a88):_0x1040fe,_0xc8a20e;if(typeof Reflect===_0x2ff0fd(0x20c)&&typeof Reflect[_0x2ff0fd(0x21f)]===_0x2ff0fd(0x22b))_0x29e730=Reflect[_0x2ff0fd(0x21f)](_0x5ed706,_0x304031,_0x312a88,_0x1040fe);else{for(var _0x386b9f=_0x5ed706['length']-0x1;_0x386b9f>=0x0;_0x386b9f--)if(_0xc8a20e=_0x5ed706[_0x386b9f])_0x29e730=(_0x5e2b2c<0x3?_0xc8a20e(_0x29e730):_0x5e2b2c>0x3?_0xc8a20e(_0x304031,_0x312a88,_0x29e730):_0xc8a20e(_0x304031,_0x312a88))||_0x29e730;}return _0x5e2b2c>0x3&&_0x29e730&&Object[_0x2ff0fd(0x1f5)](_0x304031,_0x312a88,_0x29e730),_0x29e730;},__metadata=this&&this[a168_0x344488(0x1fe)]||function(_0x59cf6b,_0x223e35){const _0x553695=a168_0x344488;if(typeof Reflect===_0x553695(0x20c)&&typeof Reflect['metadata']===_0x553695(0x22b))return Reflect[_0x553695(0x224)](_0x59cf6b,_0x223e35);},__param=this&&this[a168_0x344488(0x1f8)]||function(_0x1eec44,_0x1771ee){return function(_0xfa8b36,_0x291736){_0x1771ee(_0xfa8b36,_0x291736,_0x1eec44);};},__importDefault=this&&this[a168_0x344488(0x223)]||function(_0x3953c5){const _0x2fee4a=a168_0x344488;return _0x3953c5&&_0x3953c5[_0x2fee4a(0x21e)]?_0x3953c5:{'default':_0x3953c5};};Object[a168_0x344488(0x1f5)](exports,a168_0x344488(0x21e),{'value':!![]}),exports[a168_0x344488(0x1fa)]=void 0x0;function a168_0x29c1(_0x33382a,_0x3a21f4){const _0x130070=a168_0x4c87();return a168_0x29c1=function(_0x96070d,_0x4cdb6d){_0x96070d=_0x96070d-0x1f1;let _0x4c87b4=_0x130070[_0x96070d];return _0x4c87b4;},a168_0x29c1(_0x33382a,_0x3a21f4);}function a168_0x4c87(){const _0xdf92b4=['3376IynGfk','BitbucketApiService','request','credentials','constructor','__metadata','../providers.tokens','GitApiService','interceptors','setAccessToken','user','password','pathname','username','checkAccessToken','https://bitbucket.org','design:paramtypes','Tokens','99nLYHdw','object','accessTokenExpiresAt','721ocnmuH','../types/git-provider','headers','search','69061SwjjQm','now','use','getHeaders','/site/oauth2/access_token','URL','createRequest','post','axios','(((.+)+)+)+$','getOwnPropertyDescriptor','Service','__esModule','decorate','getCurrentUser','128690JSnoLh','toString','__importDefault','metadata','36TLlzKs','4JHDKtP','Inject','269644RylxsA','./git-api.service','grant_type=client_credentials','function','apply','MAX_REQUEST_PER_HOUR','__decorate','url','778269lKfXss','refreshToken','59505dxYzzS','isLoggedIn','defineProperty','9812RJORHi','../credentials/dto/bitbucket-credentials.dto','__param'];a168_0x4c87=function(){return _0xdf92b4;};return a168_0x4c87();}const axios_1=__importDefault(require(a168_0x344488(0x21a))),typedi_1=require('typedi'),git_api_service_1=require(a168_0x344488(0x229)),bitbucket_credentials_dto_1=require(a168_0x344488(0x1f7)),providers_tokens_1=require(a168_0x344488(0x1ff)),git_provider_1=require(a168_0x344488(0x20f)),url_1=require(a168_0x344488(0x22f));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a168_0x344488(0x200)]{constructor(_0x3c1d2b,_0x538154){const _0x32b480=a168_0x344488;super(_0x3c1d2b,_0x538154),this[_0x32b480(0x20d)]=-0x1,this[_0x32b480(0x22d)]=0x3e8;}[a168_0x344488(0x218)](_0x34e8ef){const _0x4236e1=a168_0x344488,_0xda1edf=super['createRequest'](_0x34e8ef);return _0xda1edf[_0x4236e1(0x201)]['request'][_0x4236e1(0x214)](async _0x434f4e=>{const _0x329ff9=_0x4236e1;return await this[_0x329ff9(0x207)](),_0x434f4e[_0x329ff9(0x210)]['Authorization']=this[_0x329ff9(0x1fc)]['getAuthorizationHeader'](),_0x434f4e;}),_0xda1edf;}async[a168_0x344488(0x207)](){const _0x4a33d4=a168_0x344488;if(Date[_0x4a33d4(0x213)]()<this[_0x4a33d4(0x20d)])return;await this[_0x4a33d4(0x1f2)]();}async[a168_0x344488(0x1f2)](){const _0x378787=a168_0x344488,{clientId:_0x515b70,clientSecret:_0x5259a3}=this['credentials'],_0x2b71f9=new url_1[(_0x378787(0x217))](_0x378787(0x208));_0x2b71f9[_0x378787(0x206)]=_0x515b70,_0x2b71f9[_0x378787(0x204)]=_0x5259a3,_0x2b71f9[_0x378787(0x205)]=_0x378787(0x216);const {data:_0x1a595b}=await axios_1['default'][_0x378787(0x219)](_0x2b71f9[_0x378787(0x222)](),_0x378787(0x22a)),{expires_in:_0xd33065,access_token:_0x452b6c}=_0x1a595b;this['accessTokenExpiresAt']=Date[_0x378787(0x213)]()+_0xd33065*0x3e8,this[_0x378787(0x1fc)][_0x378787(0x202)](_0x452b6c);}[a168_0x344488(0x215)](){return{};}[a168_0x344488(0x220)](){const _0x510fdf=a168_0x344488;return this[_0x510fdf(0x1fb)]['get'](_0x510fdf(0x203));}async[a168_0x344488(0x1f4)](){const _0x4e4094=a168_0x344488;return await this[_0x4e4094(0x220)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a168_0x344488(0x21d)])(),__param(0x0,(0x0,typedi_1[a168_0x344488(0x227)])(providers_tokens_1[a168_0x344488(0x20a)]['provider'])),__param(0x1,(0x0,typedi_1[a168_0x344488(0x227)])(providers_tokens_1[a168_0x344488(0x20a)]['credentials'])),__metadata(a168_0x344488(0x209),[String,bitbucket_credentials_dto_1['BitbucketCredentialsDto']])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;