const a163_0x44f762=a163_0x3130;(function(_0x388396,_0x46bd69){const _0x4b4211=a163_0x3130,_0x4f423b=_0x388396();while(!![]){try{const _0x21034d=parseInt(_0x4b4211(0xe9))/0x1+parseInt(_0x4b4211(0xf1))/0x2*(-parseInt(_0x4b4211(0xfd))/0x3)+parseInt(_0x4b4211(0xf7))/0x4*(-parseInt(_0x4b4211(0x11b))/0x5)+parseInt(_0x4b4211(0x117))/0x6*(-parseInt(_0x4b4211(0x116))/0x7)+-parseInt(_0x4b4211(0x11d))/0x8*(parseInt(_0x4b4211(0x104))/0x9)+-parseInt(_0x4b4211(0xea))/0xa*(parseInt(_0x4b4211(0x113))/0xb)+parseInt(_0x4b4211(0x119))/0xc;if(_0x21034d===_0x46bd69)break;else _0x4f423b['push'](_0x4f423b['shift']());}catch(_0x17b5f9){_0x4f423b['push'](_0x4f423b['shift']());}}}(a163_0x3e52,0x3a3f9));const a163_0x19d7e5=(function(){let _0xc9af8c=!![];return function(_0x17f87f,_0x58aa75){const _0x56038e=_0xc9af8c?function(){const _0x16bfe3=a163_0x3130;if(_0x58aa75){const _0x4bcac3=_0x58aa75[_0x16bfe3(0x106)](_0x17f87f,arguments);return _0x58aa75=null,_0x4bcac3;}}:function(){};return _0xc9af8c=![],_0x56038e;};}()),a163_0x427bd7=a163_0x19d7e5(this,function(){const _0x55d2c0=a163_0x3130;return a163_0x427bd7[_0x55d2c0(0xef)]()[_0x55d2c0(0x118)]('(((.+)+)+)+$')[_0x55d2c0(0xef)]()[_0x55d2c0(0x102)](a163_0x427bd7)['search']('(((.+)+)+)+$');});a163_0x427bd7();function a163_0x3130(_0x47bf9b,_0x5a5acc){const _0x5e3e56=a163_0x3e52();return a163_0x3130=function(_0x427bd7,_0x19d7e5){_0x427bd7=_0x427bd7-0xe9;let _0x3e5264=_0x5e3e56[_0x427bd7];return _0x3e5264;},a163_0x3130(_0x47bf9b,_0x5a5acc);}'use strict';var __decorate=this&&this[a163_0x44f762(0x11e)]||function(_0x6c07c5,_0x303a79,_0x133092,_0x26090a){const _0x8a411b=a163_0x44f762;var _0x20e175=arguments[_0x8a411b(0x111)],_0x27caf7=_0x20e175<0x3?_0x303a79:_0x26090a===null?_0x26090a=Object[_0x8a411b(0x109)](_0x303a79,_0x133092):_0x26090a,_0x24fd46;if(typeof Reflect===_0x8a411b(0xf5)&&typeof Reflect[_0x8a411b(0xec)]===_0x8a411b(0x114))_0x27caf7=Reflect[_0x8a411b(0xec)](_0x6c07c5,_0x303a79,_0x133092,_0x26090a);else{for(var _0xcb0cb6=_0x6c07c5[_0x8a411b(0x111)]-0x1;_0xcb0cb6>=0x0;_0xcb0cb6--)if(_0x24fd46=_0x6c07c5[_0xcb0cb6])_0x27caf7=(_0x20e175<0x3?_0x24fd46(_0x27caf7):_0x20e175>0x3?_0x24fd46(_0x303a79,_0x133092,_0x27caf7):_0x24fd46(_0x303a79,_0x133092))||_0x27caf7;}return _0x20e175>0x3&&_0x27caf7&&Object['defineProperty'](_0x303a79,_0x133092,_0x27caf7),_0x27caf7;},__metadata=this&&this[a163_0x44f762(0x10d)]||function(_0x3f32de,_0x3848fe){const _0x131199=a163_0x44f762;if(typeof Reflect==='object'&&typeof Reflect[_0x131199(0x125)]===_0x131199(0x114))return Reflect['metadata'](_0x3f32de,_0x3848fe);},__param=this&&this[a163_0x44f762(0x126)]||function(_0x524aab,_0x1c58f4){return function(_0x3bcbca,_0x110b8e){_0x1c58f4(_0x3bcbca,_0x110b8e,_0x524aab);};},__importDefault=this&&this['__importDefault']||function(_0x553ce1){const _0x6d5526=a163_0x44f762;return _0x553ce1&&_0x553ce1[_0x6d5526(0x115)]?_0x553ce1:{'default':_0x553ce1};};Object[a163_0x44f762(0x107)](exports,a163_0x44f762(0x115),{'value':!![]}),exports[a163_0x44f762(0xfa)]=void 0x0;function a163_0x3e52(){const _0x1cb72=['get','isLoggedIn','GitApiService','accessTokenExpiresAt','refreshToken','getCurrentUser','metadata','__param','462885bZdGjU','350ewkRrW','Tokens','decorate','../providers.tokens','URL','toString','credentials','35198AokZSt','Service','checkAccessToken','request','object','getHeaders','7104KhHBJn','Authorization','./git-api.service','BitbucketApiService','now','interceptors','39QWciRP','password','post','getAuthorizationHeader','headers','constructor','axios','1467drPmsq','createRequest','apply','defineProperty','default','getOwnPropertyDescriptor','url','username','BitbucketCredentialsDto','__metadata','MAX_REQUEST_PER_HOUR','Inject','../credentials/dto/bitbucket-credentials.dto','length','grant_type=client_credentials','140327LcpMpA','function','__esModule','7fgXbEQ','1766802taGZHW','search','10898760itSfPE','provider','400dpAtHI','typedi','1016gtSUMo','__decorate'];a163_0x3e52=function(){return _0x1cb72;};return a163_0x3e52();}const axios_1=__importDefault(require(a163_0x44f762(0x103))),typedi_1=require(a163_0x44f762(0x11c)),git_api_service_1=require(a163_0x44f762(0xf9)),bitbucket_credentials_dto_1=require(a163_0x44f762(0x110)),providers_tokens_1=require(a163_0x44f762(0xed)),git_provider_1=require('../types/git-provider'),url_1=require(a163_0x44f762(0x10a));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a163_0x44f762(0x121)]{constructor(_0x413d71,_0x58a6ed){const _0x29a072=a163_0x44f762;super(_0x413d71,_0x58a6ed),this[_0x29a072(0x122)]=-0x1,this[_0x29a072(0x10e)]=0x3e8;}['createRequest'](_0x1c8a69){const _0x2fb94b=a163_0x44f762,_0x162628=super[_0x2fb94b(0x105)](_0x1c8a69);return _0x162628[_0x2fb94b(0xfc)]['request']['use'](async _0x63f95a=>{const _0xec563b=_0x2fb94b;return await this[_0xec563b(0xf3)](),_0x63f95a[_0xec563b(0x101)][_0xec563b(0xf8)]=this[_0xec563b(0xf0)][_0xec563b(0x100)](),_0x63f95a;}),_0x162628;}async[a163_0x44f762(0xf3)](){const _0xf601bb=a163_0x44f762;if(Date[_0xf601bb(0xfb)]()<this[_0xf601bb(0x122)])return;await this['refreshToken']();}async[a163_0x44f762(0x123)](){const _0x115343=a163_0x44f762,{clientId:_0x3cdc47,clientSecret:_0x293af9}=this[_0x115343(0xf0)],_0xeee193=new url_1[(_0x115343(0xee))]('https://bitbucket.org');_0xeee193[_0x115343(0x10b)]=_0x3cdc47,_0xeee193[_0x115343(0xfe)]=_0x293af9,_0xeee193['pathname']='/site/oauth2/access_token';const {data:_0x566901}=await axios_1[_0x115343(0x108)][_0x115343(0xff)](_0xeee193[_0x115343(0xef)](),_0x115343(0x112)),{expires_in:_0x183fd1,access_token:_0x1b524d}=_0x566901;this['accessTokenExpiresAt']=Date['now']()+_0x183fd1*0x3e8,this[_0x115343(0xf0)]['setAccessToken'](_0x1b524d);}[a163_0x44f762(0xf6)](){return{};}['getCurrentUser'](){const _0x5e8e82=a163_0x44f762;return this[_0x5e8e82(0xf4)][_0x5e8e82(0x11f)]('user');}async[a163_0x44f762(0x120)](){const _0x23b2cd=a163_0x44f762;return await this[_0x23b2cd(0x124)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a163_0x44f762(0xf2)])(),__param(0x0,(0x0,typedi_1[a163_0x44f762(0x10f)])(providers_tokens_1[a163_0x44f762(0xeb)][a163_0x44f762(0x11a)])),__param(0x1,(0x0,typedi_1[a163_0x44f762(0x10f)])(providers_tokens_1[a163_0x44f762(0xeb)][a163_0x44f762(0xf0)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a163_0x44f762(0x10c)]])],BitbucketApiService),exports[a163_0x44f762(0xfa)]=BitbucketApiService;