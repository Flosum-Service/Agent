const a168_0x48f9c5=a168_0x5f2f;(function(_0x470b86,_0x5d580b){const _0x5544c7=a168_0x5f2f,_0x2c67e1=_0x470b86();while(!![]){try{const _0x2cff5e=-parseInt(_0x5544c7(0x17d))/0x1*(-parseInt(_0x5544c7(0x153))/0x2)+parseInt(_0x5544c7(0x16f))/0x3*(-parseInt(_0x5544c7(0x151))/0x4)+parseInt(_0x5544c7(0x163))/0x5+parseInt(_0x5544c7(0x176))/0x6*(-parseInt(_0x5544c7(0x157))/0x7)+-parseInt(_0x5544c7(0x172))/0x8+parseInt(_0x5544c7(0x15a))/0x9*(-parseInt(_0x5544c7(0x170))/0xa)+parseInt(_0x5544c7(0x14a))/0xb;if(_0x2cff5e===_0x5d580b)break;else _0x2c67e1['push'](_0x2c67e1['shift']());}catch(_0x4803c5){_0x2c67e1['push'](_0x2c67e1['shift']());}}}(a168_0xda12,0xd4c3b));const a168_0x4d0d7c=(function(){let _0x24b608=!![];return function(_0x115e99,_0x43d165){const _0xf9d510=_0x24b608?function(){const _0x10ab14=a168_0x5f2f;if(_0x43d165){const _0x4003d2=_0x43d165[_0x10ab14(0x166)](_0x115e99,arguments);return _0x43d165=null,_0x4003d2;}}:function(){};return _0x24b608=![],_0xf9d510;};}()),a168_0x241a37=a168_0x4d0d7c(this,function(){const _0x1add21=a168_0x5f2f;return a168_0x241a37[_0x1add21(0x177)]()[_0x1add21(0x155)](_0x1add21(0x144))[_0x1add21(0x177)]()[_0x1add21(0x161)](a168_0x241a37)[_0x1add21(0x155)](_0x1add21(0x144));});a168_0x241a37();'use strict';function a168_0xda12(){const _0x2da5ba=['object','getCurrentUser','Authorization','(((.+)+)+)+$','url','password','__importDefault','now','design:paramtypes','45906003eCibbA','username','defineProperty','getOwnPropertyDescriptor','function','refreshToken','/site/oauth2/access_token','169284kJlRre','../providers.tokens','2207086IMkgJu','pathname','search','provider','733054tqVzIy','GitApiService','grant_type=client_credentials','10863RrmxkR','../types/git-provider','../credentials/dto/bitbucket-credentials.dto','Inject','length','__metadata','BitbucketCredentialsDto','constructor','createRequest','2521535JqxMBw','isLoggedIn','request','apply','__esModule','./git-api.service','BitbucketApiService','accessTokenExpiresAt','https://bitbucket.org','use','__decorate','__param','117jgHbWn','9670xdBTPf','checkAccessToken','5844528plYtwP','default','Tokens','getHeaders','78iQWqJc','toString','Service','user','decorate','URL','credentials','1zvAvQV','metadata'];a168_0xda12=function(){return _0x2da5ba;};return a168_0xda12();}var __decorate=this&&this[a168_0x48f9c5(0x16d)]||function(_0x51a1da,_0x3aa63b,_0x26f3f8,_0x5a432f){const _0x5432d5=a168_0x48f9c5;var _0x482214=arguments['length'],_0x1a8cfc=_0x482214<0x3?_0x3aa63b:_0x5a432f===null?_0x5a432f=Object[_0x5432d5(0x14d)](_0x3aa63b,_0x26f3f8):_0x5a432f,_0x4afc4a;if(typeof Reflect==='object'&&typeof Reflect[_0x5432d5(0x17a)]===_0x5432d5(0x14e))_0x1a8cfc=Reflect[_0x5432d5(0x17a)](_0x51a1da,_0x3aa63b,_0x26f3f8,_0x5a432f);else{for(var _0x524fb9=_0x51a1da[_0x5432d5(0x15e)]-0x1;_0x524fb9>=0x0;_0x524fb9--)if(_0x4afc4a=_0x51a1da[_0x524fb9])_0x1a8cfc=(_0x482214<0x3?_0x4afc4a(_0x1a8cfc):_0x482214>0x3?_0x4afc4a(_0x3aa63b,_0x26f3f8,_0x1a8cfc):_0x4afc4a(_0x3aa63b,_0x26f3f8))||_0x1a8cfc;}return _0x482214>0x3&&_0x1a8cfc&&Object[_0x5432d5(0x14c)](_0x3aa63b,_0x26f3f8,_0x1a8cfc),_0x1a8cfc;},__metadata=this&&this[a168_0x48f9c5(0x15f)]||function(_0xc2b25a,_0x573281){const _0x456413=a168_0x48f9c5;if(typeof Reflect===_0x456413(0x17f)&&typeof Reflect[_0x456413(0x17e)]===_0x456413(0x14e))return Reflect[_0x456413(0x17e)](_0xc2b25a,_0x573281);},__param=this&&this[a168_0x48f9c5(0x16e)]||function(_0x3419ff,_0x23fc35){return function(_0x43186e,_0x555a51){_0x23fc35(_0x43186e,_0x555a51,_0x3419ff);};},__importDefault=this&&this[a168_0x48f9c5(0x147)]||function(_0x4addcd){const _0x37a9bd=a168_0x48f9c5;return _0x4addcd&&_0x4addcd[_0x37a9bd(0x167)]?_0x4addcd:{'default':_0x4addcd};};function a168_0x5f2f(_0x46fdaa,_0xa81c4e){const _0x2a9926=a168_0xda12();return a168_0x5f2f=function(_0x241a37,_0x4d0d7c){_0x241a37=_0x241a37-0x143;let _0xda12d1=_0x2a9926[_0x241a37];return _0xda12d1;},a168_0x5f2f(_0x46fdaa,_0xa81c4e);}Object[a168_0x48f9c5(0x14c)](exports,'__esModule',{'value':!![]}),exports[a168_0x48f9c5(0x169)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require('typedi'),git_api_service_1=require(a168_0x48f9c5(0x168)),bitbucket_credentials_dto_1=require(a168_0x48f9c5(0x15c)),providers_tokens_1=require(a168_0x48f9c5(0x152)),git_provider_1=require(a168_0x48f9c5(0x15b)),url_1=require(a168_0x48f9c5(0x145));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a168_0x48f9c5(0x158)]{constructor(_0x45c10e,_0x443832){const _0x266a32=a168_0x48f9c5;super(_0x45c10e,_0x443832),this[_0x266a32(0x16a)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a168_0x48f9c5(0x162)](_0x43fc22){const _0x1679e5=a168_0x48f9c5,_0x58465b=super['createRequest'](_0x43fc22);return _0x58465b['interceptors']['request'][_0x1679e5(0x16c)](async _0x12f48e=>{const _0x3f8d97=_0x1679e5;return await this[_0x3f8d97(0x171)](),_0x12f48e['headers'][_0x3f8d97(0x143)]=this[_0x3f8d97(0x17c)]['getAuthorizationHeader'](),_0x12f48e;}),_0x58465b;}async[a168_0x48f9c5(0x171)](){const _0x12bf58=a168_0x48f9c5;if(Date[_0x12bf58(0x148)]()<this[_0x12bf58(0x16a)])return;await this['refreshToken']();}async[a168_0x48f9c5(0x14f)](){const _0x1496f7=a168_0x48f9c5,{clientId:_0x4f01d6,clientSecret:_0x4c9f42}=this[_0x1496f7(0x17c)],_0x1ac58c=new url_1[(_0x1496f7(0x17b))](_0x1496f7(0x16b));_0x1ac58c[_0x1496f7(0x14b)]=_0x4f01d6,_0x1ac58c[_0x1496f7(0x146)]=_0x4c9f42,_0x1ac58c[_0x1496f7(0x154)]=_0x1496f7(0x150);const {data:_0x4652c1}=await axios_1[_0x1496f7(0x173)]['post'](_0x1ac58c[_0x1496f7(0x177)](),_0x1496f7(0x159)),{expires_in:_0x4dcaac,access_token:_0x15b430}=_0x4652c1;this[_0x1496f7(0x16a)]=Date[_0x1496f7(0x148)]()+_0x4dcaac*0x3e8,this[_0x1496f7(0x17c)]['setAccessToken'](_0x15b430);}[a168_0x48f9c5(0x175)](){return{};}[a168_0x48f9c5(0x180)](){const _0x4d115e=a168_0x48f9c5;return this[_0x4d115e(0x165)]['get'](_0x4d115e(0x179));}async[a168_0x48f9c5(0x164)](){const _0x173dc4=a168_0x48f9c5;return await this[_0x173dc4(0x180)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a168_0x48f9c5(0x178)])(),__param(0x0,(0x0,typedi_1[a168_0x48f9c5(0x15d)])(providers_tokens_1[a168_0x48f9c5(0x174)][a168_0x48f9c5(0x156)])),__param(0x1,(0x0,typedi_1['Inject'])(providers_tokens_1[a168_0x48f9c5(0x174)][a168_0x48f9c5(0x17c)])),__metadata(a168_0x48f9c5(0x149),[String,bitbucket_credentials_dto_1[a168_0x48f9c5(0x160)]])],BitbucketApiService),exports[a168_0x48f9c5(0x169)]=BitbucketApiService;