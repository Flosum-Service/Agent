function a124_0x2aa7(){const _0x1ad38e=['5496028npuITJ','metadata','toString','5sGjebM','now','3559896aRIRgW','pathname','BitbucketApiService','getHeaders','apply','username','Inject','MAX_REQUEST_PER_HOUR','accessTokenExpiresAt','/site/oauth2/access_token','1246PRsxQG','37535580EwJDCx','post','constructor','url','4882182xDPUDX','object','__metadata','7oytcbZ','user','getOwnPropertyDescriptor','../types/git-provider','createRequest','Authorization','interceptors','checkAccessToken','design:paramtypes','credentials','getAuthorizationHeader','function','isLoggedIn','BitbucketCredentialsDto','search','11332503yLDuoQ','2054120gIzjiY','setAccessToken','refreshToken','../providers.tokens','__param','2167PEZguC','defineProperty','request','headers','length','GitApiService','URL','getCurrentUser','provider','__esModule','Tokens'];a124_0x2aa7=function(){return _0x1ad38e;};return a124_0x2aa7();}const a124_0x1bc879=a124_0x3c82;(function(_0x52aa06,_0x557966){const _0xe92814=a124_0x3c82,_0x411762=_0x52aa06();while(!![]){try{const _0x404859=parseInt(_0xe92814(0x203))/0x1*(parseInt(_0xe92814(0x1e6))/0x2)+parseInt(_0xe92814(0x1dc))/0x3+parseInt(_0xe92814(0x1d7))/0x4*(parseInt(_0xe92814(0x1da))/0x5)+parseInt(_0xe92814(0x1eb))/0x6*(-parseInt(_0xe92814(0x1ee))/0x7)+parseInt(_0xe92814(0x1fe))/0x8+parseInt(_0xe92814(0x1fd))/0x9+-parseInt(_0xe92814(0x1e7))/0xa;if(_0x404859===_0x557966)break;else _0x411762['push'](_0x411762['shift']());}catch(_0x65046f){_0x411762['push'](_0x411762['shift']());}}}(a124_0x2aa7,0xd1cdd));const a124_0x4e1b97=(function(){let _0x16c6c0=!![];return function(_0x5bdc5f,_0x3a17fb){const _0x242a0e=_0x16c6c0?function(){const _0x3c08b7=a124_0x3c82;if(_0x3a17fb){const _0xf816a6=_0x3a17fb[_0x3c08b7(0x1e0)](_0x5bdc5f,arguments);return _0x3a17fb=null,_0xf816a6;}}:function(){};return _0x16c6c0=![],_0x242a0e;};}()),a124_0xaeb35a=a124_0x4e1b97(this,function(){const _0xbe015f=a124_0x3c82;return a124_0xaeb35a[_0xbe015f(0x1d9)]()['search']('(((.+)+)+)+$')[_0xbe015f(0x1d9)]()[_0xbe015f(0x1e9)](a124_0xaeb35a)[_0xbe015f(0x1fc)]('(((.+)+)+)+$');});a124_0xaeb35a();'use strict';var __decorate=this&&this['__decorate']||function(_0x582e77,_0x448275,_0x31954c,_0x263ef4){const _0x2d415f=a124_0x3c82;var _0x4bc1df=arguments[_0x2d415f(0x1d0)],_0x383ed0=_0x4bc1df<0x3?_0x448275:_0x263ef4===null?_0x263ef4=Object[_0x2d415f(0x1f0)](_0x448275,_0x31954c):_0x263ef4,_0x2c23c2;if(typeof Reflect===_0x2d415f(0x1ec)&&typeof Reflect['decorate']===_0x2d415f(0x1f9))_0x383ed0=Reflect['decorate'](_0x582e77,_0x448275,_0x31954c,_0x263ef4);else{for(var _0x224340=_0x582e77['length']-0x1;_0x224340>=0x0;_0x224340--)if(_0x2c23c2=_0x582e77[_0x224340])_0x383ed0=(_0x4bc1df<0x3?_0x2c23c2(_0x383ed0):_0x4bc1df>0x3?_0x2c23c2(_0x448275,_0x31954c,_0x383ed0):_0x2c23c2(_0x448275,_0x31954c))||_0x383ed0;}return _0x4bc1df>0x3&&_0x383ed0&&Object[_0x2d415f(0x204)](_0x448275,_0x31954c,_0x383ed0),_0x383ed0;},__metadata=this&&this[a124_0x1bc879(0x1ed)]||function(_0x472787,_0x49c9f8){const _0x1ad6a2=a124_0x1bc879;if(typeof Reflect===_0x1ad6a2(0x1ec)&&typeof Reflect[_0x1ad6a2(0x1d8)]==='function')return Reflect['metadata'](_0x472787,_0x49c9f8);},__param=this&&this[a124_0x1bc879(0x202)]||function(_0x299ff7,_0x1b33d3){return function(_0x128089,_0x393054){_0x1b33d3(_0x128089,_0x393054,_0x299ff7);};},__importDefault=this&&this['__importDefault']||function(_0x18f4c8){const _0x4cb2bd=a124_0x1bc879;return _0x18f4c8&&_0x18f4c8[_0x4cb2bd(0x1d5)]?_0x18f4c8:{'default':_0x18f4c8};};Object['defineProperty'](exports,a124_0x1bc879(0x1d5),{'value':!![]}),exports[a124_0x1bc879(0x1de)]=void 0x0;function a124_0x3c82(_0x4e4603,_0x47eb87){const _0x2a3c06=a124_0x2aa7();return a124_0x3c82=function(_0xaeb35a,_0x4e1b97){_0xaeb35a=_0xaeb35a-0x1d0;let _0x2aa7b2=_0x2a3c06[_0xaeb35a];return _0x2aa7b2;},a124_0x3c82(_0x4e4603,_0x47eb87);}const axios_1=__importDefault(require('axios')),typedi_1=require('typedi'),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a124_0x1bc879(0x201)),git_provider_1=require(a124_0x1bc879(0x1f1)),url_1=require(a124_0x1bc879(0x1ea));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a124_0x1bc879(0x1d1)]{constructor(_0x57fb69,_0xd8f3a4){const _0x4f567=a124_0x1bc879;super(_0x57fb69,_0xd8f3a4),this['accessTokenExpiresAt']=-0x1,this[_0x4f567(0x1e3)]=0x3e8;}[a124_0x1bc879(0x1f2)](_0x554f16){const _0x1efc39=a124_0x1bc879,_0x162c7e=super[_0x1efc39(0x1f2)](_0x554f16);return _0x162c7e[_0x1efc39(0x1f4)]['request']['use'](async _0x5b8449=>{const _0x558051=_0x1efc39;return await this[_0x558051(0x1f5)](),_0x5b8449[_0x558051(0x206)]||(_0x5b8449[_0x558051(0x206)]={}),_0x5b8449[_0x558051(0x206)][_0x558051(0x1f3)]=this[_0x558051(0x1f7)][_0x558051(0x1f8)](),_0x5b8449;}),_0x162c7e;}async[a124_0x1bc879(0x1f5)](){const _0x46bb3f=a124_0x1bc879;if(Date[_0x46bb3f(0x1db)]()<this['accessTokenExpiresAt'])return;await this['refreshToken']();}async[a124_0x1bc879(0x200)](){const _0x1e319b=a124_0x1bc879,{clientId:_0x5b20af,clientSecret:_0x268098}=this['credentials'],_0x2638b2=new url_1[(_0x1e319b(0x1d2))]('https://bitbucket.org');_0x2638b2[_0x1e319b(0x1e1)]=_0x5b20af,_0x2638b2['password']=_0x268098,_0x2638b2[_0x1e319b(0x1dd)]=_0x1e319b(0x1e5);const {data:_0x200324}=await axios_1['default'][_0x1e319b(0x1e8)](_0x2638b2[_0x1e319b(0x1d9)](),'grant_type=client_credentials'),{expires_in:_0x107e24,access_token:_0x286a98}=_0x200324;this[_0x1e319b(0x1e4)]=Date['now']()+_0x107e24*0x3e8,this['credentials'][_0x1e319b(0x1ff)](_0x286a98);}[a124_0x1bc879(0x1df)](){return{};}[a124_0x1bc879(0x1d3)](){const _0xeee750=a124_0x1bc879;return this[_0xeee750(0x205)]['get'](_0xeee750(0x1ef));}async[a124_0x1bc879(0x1fa)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1['Inject'])(providers_tokens_1[a124_0x1bc879(0x1d6)][a124_0x1bc879(0x1d4)])),__param(0x1,(0x0,typedi_1[a124_0x1bc879(0x1e2)])(providers_tokens_1[a124_0x1bc879(0x1d6)][a124_0x1bc879(0x1f7)])),__metadata(a124_0x1bc879(0x1f6),[String,bitbucket_credentials_dto_1[a124_0x1bc879(0x1fb)]])],BitbucketApiService),exports[a124_0x1bc879(0x1de)]=BitbucketApiService;