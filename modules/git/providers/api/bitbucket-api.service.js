const a124_0x3e84e7=a124_0x1e0a;(function(_0x291786,_0x3c5d23){const _0x17b106=a124_0x1e0a,_0x32c7e0=_0x291786();while(!![]){try{const _0x3f34b4=parseInt(_0x17b106(0xcf))/0x1*(-parseInt(_0x17b106(0xad))/0x2)+-parseInt(_0x17b106(0xd6))/0x3*(-parseInt(_0x17b106(0xde))/0x4)+parseInt(_0x17b106(0xc2))/0x5+parseInt(_0x17b106(0xbf))/0x6*(parseInt(_0x17b106(0xd8))/0x7)+-parseInt(_0x17b106(0xc8))/0x8*(-parseInt(_0x17b106(0xae))/0x9)+parseInt(_0x17b106(0xba))/0xa+-parseInt(_0x17b106(0xd2))/0xb*(parseInt(_0x17b106(0xb4))/0xc);if(_0x3f34b4===_0x3c5d23)break;else _0x32c7e0['push'](_0x32c7e0['shift']());}catch(_0x262de7){_0x32c7e0['push'](_0x32c7e0['shift']());}}}(a124_0x4fa3,0x407a9));const a124_0x41dd55=(function(){let _0x125ea8=!![];return function(_0xa7dd9d,_0x4c2dc4){const _0x3bcec6=_0x125ea8?function(){const _0x49a98d=a124_0x1e0a;if(_0x4c2dc4){const _0x558138=_0x4c2dc4[_0x49a98d(0xb8)](_0xa7dd9d,arguments);return _0x4c2dc4=null,_0x558138;}}:function(){};return _0x125ea8=![],_0x3bcec6;};}()),a124_0x1b9f81=a124_0x41dd55(this,function(){const _0x499b40=a124_0x1e0a;return a124_0x1b9f81['toString']()[_0x499b40(0xc4)]('(((.+)+)+)+$')[_0x499b40(0xc6)]()[_0x499b40(0xb5)](a124_0x1b9f81)[_0x499b40(0xc4)](_0x499b40(0xd5));});a124_0x1b9f81();'use strict';var __decorate=this&&this[a124_0x3e84e7(0xb0)]||function(_0x4f136c,_0x16918d,_0x2a09bc,_0x2711b6){const _0x58bb7a=a124_0x3e84e7;var _0x12c2e2=arguments[_0x58bb7a(0xe4)],_0x4e40d0=_0x12c2e2<0x3?_0x16918d:_0x2711b6===null?_0x2711b6=Object['getOwnPropertyDescriptor'](_0x16918d,_0x2a09bc):_0x2711b6,_0x234c97;if(typeof Reflect==='object'&&typeof Reflect[_0x58bb7a(0xc3)]===_0x58bb7a(0xb6))_0x4e40d0=Reflect[_0x58bb7a(0xc3)](_0x4f136c,_0x16918d,_0x2a09bc,_0x2711b6);else{for(var _0x397eec=_0x4f136c['length']-0x1;_0x397eec>=0x0;_0x397eec--)if(_0x234c97=_0x4f136c[_0x397eec])_0x4e40d0=(_0x12c2e2<0x3?_0x234c97(_0x4e40d0):_0x12c2e2>0x3?_0x234c97(_0x16918d,_0x2a09bc,_0x4e40d0):_0x234c97(_0x16918d,_0x2a09bc))||_0x4e40d0;}return _0x12c2e2>0x3&&_0x4e40d0&&Object[_0x58bb7a(0xbd)](_0x16918d,_0x2a09bc,_0x4e40d0),_0x4e40d0;},__metadata=this&&this[a124_0x3e84e7(0xce)]||function(_0x61b0bc,_0x3d5f0e){const _0x1bbd0a=a124_0x3e84e7;if(typeof Reflect===_0x1bbd0a(0xb9)&&typeof Reflect[_0x1bbd0a(0xd9)]===_0x1bbd0a(0xb6))return Reflect[_0x1bbd0a(0xd9)](_0x61b0bc,_0x3d5f0e);},__param=this&&this[a124_0x3e84e7(0xb3)]||function(_0x575b3b,_0x2e646c){return function(_0x3cdcdd,_0x4324a1){_0x2e646c(_0x3cdcdd,_0x4324a1,_0x575b3b);};},__importDefault=this&&this['__importDefault']||function(_0x1feba2){const _0x3e7374=a124_0x3e84e7;return _0x1feba2&&_0x1feba2[_0x3e7374(0xd0)]?_0x1feba2:{'default':_0x1feba2};};Object[a124_0x3e84e7(0xbd)](exports,'__esModule',{'value':!![]}),exports[a124_0x3e84e7(0xe7)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a124_0x3e84e7(0xd4)),git_api_service_1=require('./git-api.service'),bitbucket_credentials_dto_1=require(a124_0x3e84e7(0xd7)),providers_tokens_1=require(a124_0x3e84e7(0xac)),git_provider_1=require(a124_0x3e84e7(0xc0)),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x4cdcc2,_0x47ee68){const _0x2c1c62=a124_0x3e84e7;super(_0x4cdcc2,_0x47ee68),this[_0x2c1c62(0xca)]=-0x1,this[_0x2c1c62(0xda)]=0x3e8;}['createRequest'](_0x379ce2){const _0x6930e=a124_0x3e84e7,_0x5afcaf=super[_0x6930e(0xb1)](_0x379ce2);return _0x5afcaf[_0x6930e(0xe2)]['request']['use'](async _0x331b06=>{const _0x5df2ff=_0x6930e;return await this[_0x5df2ff(0xe0)](),_0x331b06[_0x5df2ff(0xe6)]||(_0x331b06[_0x5df2ff(0xe6)]={}),_0x331b06['headers'][_0x5df2ff(0xc1)]=this[_0x5df2ff(0xdb)][_0x5df2ff(0xc5)](),_0x331b06;}),_0x5afcaf;}async[a124_0x3e84e7(0xe0)](){const _0x510040=a124_0x3e84e7;if(Date[_0x510040(0xe3)]()<this[_0x510040(0xca)])return;await this[_0x510040(0xcd)]();}async['refreshToken'](){const _0x3d480d=a124_0x3e84e7,{clientId:_0x5e3e2f,clientSecret:_0x199599}=this['credentials'],_0x68d865=new url_1[(_0x3d480d(0xaf))]('https://bitbucket.org');_0x68d865['username']=_0x5e3e2f,_0x68d865['password']=_0x199599,_0x68d865[_0x3d480d(0xab)]=_0x3d480d(0xe1);const {data:_0x28ac30}=await axios_1[_0x3d480d(0xe5)][_0x3d480d(0xbc)](_0x68d865[_0x3d480d(0xc6)](),_0x3d480d(0xbb)),{expires_in:_0x4587e5,access_token:_0x279c4a}=_0x28ac30;this['accessTokenExpiresAt']=Date[_0x3d480d(0xe3)]()+_0x4587e5*0x3e8,this[_0x3d480d(0xdb)][_0x3d480d(0xbe)](_0x279c4a);}[a124_0x3e84e7(0xd3)](){return{};}[a124_0x3e84e7(0xdd)](){const _0x5a4a4f=a124_0x3e84e7;return this[_0x5a4a4f(0xcc)][_0x5a4a4f(0xd1)](_0x5a4a4f(0xcb));}async[a124_0x3e84e7(0xb2)](){const _0x5e0e11=a124_0x3e84e7;return await this[_0x5e0e11(0xdd)](),!![];}};function a124_0x1e0a(_0x9ba30a,_0x55aac5){const _0x179035=a124_0x4fa3();return a124_0x1e0a=function(_0x1b9f81,_0x41dd55){_0x1b9f81=_0x1b9f81-0xab;let _0x4fa3fd=_0x179035[_0x1b9f81];return _0x4fa3fd;},a124_0x1e0a(_0x9ba30a,_0x55aac5);}function a124_0x4fa3(){const _0x4c42aa=['constructor','function','provider','apply','object','1975310DFCEgJ','grant_type=client_credentials','post','defineProperty','setAccessToken','1904106pFznix','../types/git-provider','Authorization','1158490jBrXus','decorate','search','getAuthorizationHeader','toString','Service','2568sghyhW','BitbucketCredentialsDto','accessTokenExpiresAt','user','request','refreshToken','__metadata','83tSIIYd','__esModule','get','341mgvBft','getHeaders','typedi','(((.+)+)+)+$','410604UYUZRT','../credentials/dto/bitbucket-credentials.dto','7AcrEoT','metadata','MAX_REQUEST_PER_HOUR','credentials','Tokens','getCurrentUser','4XkxtWv','Inject','checkAccessToken','/site/oauth2/access_token','interceptors','now','length','default','headers','BitbucketApiService','pathname','../providers.tokens','2804kTxbQb','14760yVItkz','URL','__decorate','createRequest','isLoggedIn','__param','398484SnYolE'];a124_0x4fa3=function(){return _0x4c42aa;};return a124_0x4fa3();}BitbucketApiService=__decorate([(0x0,typedi_1[a124_0x3e84e7(0xc7)])(),__param(0x0,(0x0,typedi_1[a124_0x3e84e7(0xdf)])(providers_tokens_1[a124_0x3e84e7(0xdc)][a124_0x3e84e7(0xb7)])),__param(0x1,(0x0,typedi_1[a124_0x3e84e7(0xdf)])(providers_tokens_1[a124_0x3e84e7(0xdc)][a124_0x3e84e7(0xdb)])),__metadata('design:paramtypes',[String,bitbucket_credentials_dto_1[a124_0x3e84e7(0xc9)]])],BitbucketApiService),exports[a124_0x3e84e7(0xe7)]=BitbucketApiService;