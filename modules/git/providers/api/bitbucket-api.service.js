const a195_0x5a22aa=a195_0x5f3a;(function(_0x24b24e,_0x5685ea){const _0x578376=a195_0x5f3a,_0x4cb63a=_0x24b24e();while(!![]){try{const _0x1ae187=-parseInt(_0x578376(0x1de))/0x1*(-parseInt(_0x578376(0x205))/0x2)+-parseInt(_0x578376(0x1f4))/0x3*(-parseInt(_0x578376(0x1e2))/0x4)+parseInt(_0x578376(0x1ff))/0x5*(-parseInt(_0x578376(0x202))/0x6)+parseInt(_0x578376(0x1d6))/0x7+-parseInt(_0x578376(0x1f7))/0x8*(parseInt(_0x578376(0x1dd))/0x9)+parseInt(_0x578376(0x1f2))/0xa+-parseInt(_0x578376(0x1d8))/0xb*(-parseInt(_0x578376(0x1eb))/0xc);if(_0x1ae187===_0x5685ea)break;else _0x4cb63a['push'](_0x4cb63a['shift']());}catch(_0x50c4ce){_0x4cb63a['push'](_0x4cb63a['shift']());}}}(a195_0x18b6,0xda142));function a195_0x5f3a(_0x55400c,_0x52d296){const _0x10a5bf=a195_0x18b6();return a195_0x5f3a=function(_0x30300e,_0x2bd602){_0x30300e=_0x30300e-0x1d0;let _0x18b6c4=_0x10a5bf[_0x30300e];return _0x18b6c4;},a195_0x5f3a(_0x55400c,_0x52d296);}const a195_0x2bd602=(function(){let _0x278f90=!![];return function(_0x47db37,_0x3a3aa0){const _0x17c4b2=_0x278f90?function(){const _0x54b05d=a195_0x5f3a;if(_0x3a3aa0){const _0x4c8471=_0x3a3aa0[_0x54b05d(0x208)](_0x47db37,arguments);return _0x3a3aa0=null,_0x4c8471;}}:function(){};return _0x278f90=![],_0x17c4b2;};}()),a195_0x30300e=a195_0x2bd602(this,function(){const _0x1e675a=a195_0x5f3a;return a195_0x30300e['toString']()['search'](_0x1e675a(0x1d3))[_0x1e675a(0x1e0)]()[_0x1e675a(0x201)](a195_0x30300e)['search'](_0x1e675a(0x1d3));});function a195_0x18b6(){const _0x2390fd=['12eFvpdo','request','post','2OwmiMW','../credentials/dto/bitbucket-credentials.dto','/site/oauth2/access_token','apply','isLoggedIn','user','./git-api.service','Authorization','(((.+)+)+)+$','getOwnPropertyDescriptor','now','1767332MSdFBf','setAccessToken','33krNyNs','metadata','use','checkAccessToken','Tokens','108xVqttU','916265akjQGx','__esModule','toString','function','24RehQPw','interceptors','credentials','__importDefault','Service','password','Inject','getCurrentUser','headers','1273812ZgNdrg','length','decorate','../providers.tokens','BitbucketCredentialsDto','../types/git-provider','BitbucketApiService','1028600uCjaBE','pathname','326946wtvsMH','getHeaders','__metadata','626816xfjCYO','__param','get','provider','defineProperty','object','createRequest','design:paramtypes','1026180EikHtP','accessTokenExpiresAt','constructor'];a195_0x18b6=function(){return _0x2390fd;};return a195_0x18b6();}a195_0x30300e();'use strict';var __decorate=this&&this['__decorate']||function(_0x572b04,_0xb4dcee,_0x13d52a,_0x27fcc8){const _0x568506=a195_0x5f3a;var _0x155dd2=arguments[_0x568506(0x1ec)],_0x176246=_0x155dd2<0x3?_0xb4dcee:_0x27fcc8===null?_0x27fcc8=Object[_0x568506(0x1d4)](_0xb4dcee,_0x13d52a):_0x27fcc8,_0x2d9f6a;if(typeof Reflect===_0x568506(0x1fc)&&typeof Reflect[_0x568506(0x1ed)]===_0x568506(0x1e1))_0x176246=Reflect[_0x568506(0x1ed)](_0x572b04,_0xb4dcee,_0x13d52a,_0x27fcc8);else{for(var _0x51295c=_0x572b04['length']-0x1;_0x51295c>=0x0;_0x51295c--)if(_0x2d9f6a=_0x572b04[_0x51295c])_0x176246=(_0x155dd2<0x3?_0x2d9f6a(_0x176246):_0x155dd2>0x3?_0x2d9f6a(_0xb4dcee,_0x13d52a,_0x176246):_0x2d9f6a(_0xb4dcee,_0x13d52a))||_0x176246;}return _0x155dd2>0x3&&_0x176246&&Object[_0x568506(0x1fb)](_0xb4dcee,_0x13d52a,_0x176246),_0x176246;},__metadata=this&&this[a195_0x5a22aa(0x1f6)]||function(_0x335513,_0x2c8256){const _0x7c6510=a195_0x5a22aa;if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect[_0x7c6510(0x1d9)](_0x335513,_0x2c8256);},__param=this&&this[a195_0x5a22aa(0x1f8)]||function(_0x372819,_0x3624b9){return function(_0x46cfe5,_0x48126b){_0x3624b9(_0x46cfe5,_0x48126b,_0x372819);};},__importDefault=this&&this[a195_0x5a22aa(0x1e5)]||function(_0x3160a9){return _0x3160a9&&_0x3160a9['__esModule']?_0x3160a9:{'default':_0x3160a9};};Object[a195_0x5a22aa(0x1fb)](exports,a195_0x5a22aa(0x1df),{'value':!![]}),exports[a195_0x5a22aa(0x1f1)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require('typedi'),git_api_service_1=require(a195_0x5a22aa(0x1d1)),bitbucket_credentials_dto_1=require(a195_0x5a22aa(0x206)),providers_tokens_1=require(a195_0x5a22aa(0x1ee)),git_provider_1=require(a195_0x5a22aa(0x1f0)),url_1=require('url');let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x3a3a13,_0x1862da){const _0x3aee14=a195_0x5a22aa;super(_0x3a3a13,_0x1862da),this[_0x3aee14(0x200)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8;}[a195_0x5a22aa(0x1fd)](_0x11fc12){const _0x4b050e=a195_0x5a22aa,_0x508d56=super['createRequest'](_0x11fc12);return _0x508d56[_0x4b050e(0x1e3)][_0x4b050e(0x203)][_0x4b050e(0x1da)](async _0x2552be=>{const _0x4fa2d4=_0x4b050e;return await this[_0x4fa2d4(0x1db)](),_0x2552be[_0x4fa2d4(0x1ea)][_0x4fa2d4(0x1d2)]=this[_0x4fa2d4(0x1e4)]['getAuthorizationHeader'](),_0x2552be;}),_0x508d56;}async[a195_0x5a22aa(0x1db)](){const _0x45c4fa=a195_0x5a22aa;if(Date['now']()<this[_0x45c4fa(0x200)])return;await this['refreshToken']();}async['refreshToken'](){const _0x127e06=a195_0x5a22aa,{clientId:_0x53610d,clientSecret:_0x7611df}=this[_0x127e06(0x1e4)],_0x41f2e4=new url_1['URL']('https://bitbucket.org');_0x41f2e4['username']=_0x53610d,_0x41f2e4[_0x127e06(0x1e7)]=_0x7611df,_0x41f2e4[_0x127e06(0x1f3)]=_0x127e06(0x207);const {data:_0x50bcf6}=await axios_1['default'][_0x127e06(0x204)](_0x41f2e4[_0x127e06(0x1e0)](),'grant_type=client_credentials'),{expires_in:_0x4c713a,access_token:_0x444d45}=_0x50bcf6;this[_0x127e06(0x200)]=Date[_0x127e06(0x1d5)]()+_0x4c713a*0x3e8,this['credentials'][_0x127e06(0x1d7)](_0x444d45);}[a195_0x5a22aa(0x1f5)](){return{};}[a195_0x5a22aa(0x1e9)](){const _0x4f277e=a195_0x5a22aa;return this[_0x4f277e(0x203)][_0x4f277e(0x1f9)](_0x4f277e(0x1d0));}async[a195_0x5a22aa(0x209)](){const _0x540718=a195_0x5a22aa;return await this[_0x540718(0x1e9)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a195_0x5a22aa(0x1e6)])(),__param(0x0,(0x0,typedi_1[a195_0x5a22aa(0x1e8)])(providers_tokens_1[a195_0x5a22aa(0x1dc)][a195_0x5a22aa(0x1fa)])),__param(0x1,(0x0,typedi_1[a195_0x5a22aa(0x1e8)])(providers_tokens_1[a195_0x5a22aa(0x1dc)][a195_0x5a22aa(0x1e4)])),__metadata(a195_0x5a22aa(0x1fe),[String,bitbucket_credentials_dto_1[a195_0x5a22aa(0x1ef)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;