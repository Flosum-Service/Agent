const a111_0x1ac70d=a111_0x2ad2;(function(_0x35a35b,_0x49356e){const _0x5c0bd4=a111_0x2ad2,_0x4ba878=_0x35a35b();while(!![]){try{const _0x3817bf=-parseInt(_0x5c0bd4(0x111))/0x1*(parseInt(_0x5c0bd4(0x108))/0x2)+parseInt(_0x5c0bd4(0x117))/0x3+-parseInt(_0x5c0bd4(0x102))/0x4+parseInt(_0x5c0bd4(0x115))/0x5+-parseInt(_0x5c0bd4(0x10f))/0x6*(-parseInt(_0x5c0bd4(0xf7))/0x7)+parseInt(_0x5c0bd4(0xe2))/0x8+parseInt(_0x5c0bd4(0xea))/0x9;if(_0x3817bf===_0x49356e)break;else _0x4ba878['push'](_0x4ba878['shift']());}catch(_0x316d48){_0x4ba878['push'](_0x4ba878['shift']());}}}(a111_0x4443,0x5b46e));const a111_0x19f3c7=(function(){let _0x2bfe1f=!![];return function(_0x4ff857,_0x3256a6){const _0x4aed33=_0x2bfe1f?function(){const _0x5cad46=a111_0x2ad2;if(_0x3256a6){const _0x92f012=_0x3256a6[_0x5cad46(0xfd)](_0x4ff857,arguments);return _0x3256a6=null,_0x92f012;}}:function(){};return _0x2bfe1f=![],_0x4aed33;};}()),a111_0x587962=a111_0x19f3c7(this,function(){const _0x451def=a111_0x2ad2;return a111_0x587962['toString']()[_0x451def(0xf9)](_0x451def(0x10e))[_0x451def(0x104)]()[_0x451def(0xf4)](a111_0x587962)['search'](_0x451def(0x10e));});a111_0x587962();'use strict';var __decorate=this&&this['__decorate']||function(_0xbba28a,_0x51f46b,_0x390da6,_0x128763){const _0x5354cd=a111_0x2ad2;var _0x591d78=arguments['length'],_0x5ff738=_0x591d78<0x3?_0x51f46b:_0x128763===null?_0x128763=Object['getOwnPropertyDescriptor'](_0x51f46b,_0x390da6):_0x128763,_0x2f9b85;if(typeof Reflect==='object'&&typeof Reflect[_0x5354cd(0x110)]===_0x5354cd(0x100))_0x5ff738=Reflect['decorate'](_0xbba28a,_0x51f46b,_0x390da6,_0x128763);else{for(var _0x318aaa=_0xbba28a[_0x5354cd(0xeb)]-0x1;_0x318aaa>=0x0;_0x318aaa--)if(_0x2f9b85=_0xbba28a[_0x318aaa])_0x5ff738=(_0x591d78<0x3?_0x2f9b85(_0x5ff738):_0x591d78>0x3?_0x2f9b85(_0x51f46b,_0x390da6,_0x5ff738):_0x2f9b85(_0x51f46b,_0x390da6))||_0x5ff738;}return _0x591d78>0x3&&_0x5ff738&&Object[_0x5354cd(0xf3)](_0x51f46b,_0x390da6,_0x5ff738),_0x5ff738;},__metadata=this&&this['__metadata']||function(_0x59d40b,_0x38c000){const _0x2c0ae6=a111_0x2ad2;if(typeof Reflect==='object'&&typeof Reflect[_0x2c0ae6(0xec)]===_0x2c0ae6(0x100))return Reflect[_0x2c0ae6(0xec)](_0x59d40b,_0x38c000);},__param=this&&this[a111_0x1ac70d(0x10d)]||function(_0x4e114b,_0x137357){return function(_0x10867,_0x3b8916){_0x137357(_0x10867,_0x3b8916,_0x4e114b);};},__importDefault=this&&this['__importDefault']||function(_0x1b86ed){const _0x283c1c=a111_0x1ac70d;return _0x1b86ed&&_0x1b86ed[_0x283c1c(0xf0)]?_0x1b86ed:{'default':_0x1b86ed};};Object[a111_0x1ac70d(0xf3)](exports,a111_0x1ac70d(0xf0),{'value':!![]}),exports[a111_0x1ac70d(0xe8)]=void 0x0;const axios_1=__importDefault(require('axios')),typedi_1=require(a111_0x1ac70d(0xe6)),git_api_service_1=require(a111_0x1ac70d(0x10c)),bitbucket_credentials_dto_1=require('../credentials/dto/bitbucket-credentials.dto'),providers_tokens_1=require(a111_0x1ac70d(0xef)),git_provider_1=require(a111_0x1ac70d(0xe9)),url_1=require('url');function a111_0x2ad2(_0x48cef9,_0x9ab7b0){const _0x4519ad=a111_0x4443();return a111_0x2ad2=function(_0x587962,_0x19f3c7){_0x587962=_0x587962-0xe2;let _0x44436d=_0x4519ad[_0x587962];return _0x44436d;},a111_0x2ad2(_0x48cef9,_0x9ab7b0);}function a111_0x4443(){const _0x24dd29=['../types/git-provider','1095912MgXYRT','length','metadata','now','createRequest','../providers.tokens','__esModule','Service','user','defineProperty','constructor','refreshToken','Tokens','4714927TtUXjn','BitbucketCredentialsDto','search','headers','grant_type=client_credentials','URL','apply','use','request','function','Inject','2537816FRknpX','password','toString','MAX_REQUEST_PER_HOUR','pathname','isLoggedIn','170246TOQGZL','interceptors','credentials','getCurrentUser','./git-api.service','__param','(((.+)+)+)+$','6cqilMx','decorate','4wBHPpy','design:paramtypes','getHeaders','checkAccessToken','1258145yGrSLX','GitApiService','180801RBzGgn','1932728HGxDPk','accessTokenExpiresAt','provider','/site/oauth2/access_token','typedi','get','BitbucketApiService'];a111_0x4443=function(){return _0x24dd29;};return a111_0x4443();}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a111_0x1ac70d(0x116)]{constructor(_0x57a372,_0x3adb48){const _0x6f964a=a111_0x1ac70d;super(_0x57a372,_0x3adb48),this[_0x6f964a(0xe3)]=-0x1,this[_0x6f964a(0x105)]=0x3e8;}['createRequest'](_0x1a71a4){const _0x49f8cf=a111_0x1ac70d,_0x559ddb=super[_0x49f8cf(0xee)](_0x1a71a4);return _0x559ddb[_0x49f8cf(0x109)][_0x49f8cf(0xff)][_0x49f8cf(0xfe)](async _0xb1c77a=>{const _0x19f628=_0x49f8cf;return await this[_0x19f628(0x114)](),_0xb1c77a[_0x19f628(0xfa)]['Authorization']=this[_0x19f628(0x10a)]['getAuthorizationHeader'](),_0xb1c77a;}),_0x559ddb;}async[a111_0x1ac70d(0x114)](){const _0x3c5c7f=a111_0x1ac70d;if(Date['now']()<this[_0x3c5c7f(0xe3)])return;await this[_0x3c5c7f(0xf5)]();}async[a111_0x1ac70d(0xf5)](){const _0x3ab6a1=a111_0x1ac70d,{clientId:_0x199f84,clientSecret:_0x4f09b7}=this['credentials'],_0x426fac=new url_1[(_0x3ab6a1(0xfc))]('https://bitbucket.org');_0x426fac['username']=_0x199f84,_0x426fac[_0x3ab6a1(0x103)]=_0x4f09b7,_0x426fac[_0x3ab6a1(0x106)]=_0x3ab6a1(0xe5);const {data:_0x53c1af}=await axios_1['default']['post'](_0x426fac[_0x3ab6a1(0x104)](),_0x3ab6a1(0xfb)),{expires_in:_0x8522ae,access_token:_0x1bda3f}=_0x53c1af;this[_0x3ab6a1(0xe3)]=Date[_0x3ab6a1(0xed)]()+_0x8522ae*0x3e8,this['credentials']['setAccessToken'](_0x1bda3f);}[a111_0x1ac70d(0x113)](){return{};}[a111_0x1ac70d(0x10b)](){const _0x30e20f=a111_0x1ac70d;return this[_0x30e20f(0xff)][_0x30e20f(0xe7)](_0x30e20f(0xf2));}async[a111_0x1ac70d(0x107)](){const _0x50584d=a111_0x1ac70d;return await this[_0x50584d(0x10b)](),!![];}};BitbucketApiService=__decorate([typedi_1[a111_0x1ac70d(0xf1)](),__param(0x0,typedi_1[a111_0x1ac70d(0x101)](providers_tokens_1['Tokens'][a111_0x1ac70d(0xe4)])),__param(0x1,typedi_1['Inject'](providers_tokens_1[a111_0x1ac70d(0xf6)]['credentials'])),__metadata(a111_0x1ac70d(0x112),[String,bitbucket_credentials_dto_1[a111_0x1ac70d(0xf8)]])],BitbucketApiService),exports[a111_0x1ac70d(0xe8)]=BitbucketApiService;