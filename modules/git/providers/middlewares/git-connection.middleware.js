const a189_0x2876f6=a189_0x30d3;(function(_0x54c712,_0x50d563){const _0x37b7a9=a189_0x30d3,_0x485306=_0x54c712();while(!![]){try{const _0x3936e7=parseInt(_0x37b7a9(0xe9))/0x1+parseInt(_0x37b7a9(0xfe))/0x2+parseInt(_0x37b7a9(0x106))/0x3+-parseInt(_0x37b7a9(0xfd))/0x4+parseInt(_0x37b7a9(0xe6))/0x5+parseInt(_0x37b7a9(0x105))/0x6+-parseInt(_0x37b7a9(0xea))/0x7;if(_0x3936e7===_0x50d563)break;else _0x485306['push'](_0x485306['shift']());}catch(_0x14667f){_0x485306['push'](_0x485306['shift']());}}}(a189_0x524d,0x59afc));const a189_0x451077=(function(){let _0x1a102a=!![];return function(_0xf68e2c,_0x5ddf3e){const _0x2f3b8c=_0x1a102a?function(){const _0x1df45c=a189_0x30d3;if(_0x5ddf3e){const _0x2eb1cd=_0x5ddf3e[_0x1df45c(0xe7)](_0xf68e2c,arguments);return _0x5ddf3e=null,_0x2eb1cd;}}:function(){};return _0x1a102a=![],_0x2f3b8c;};}()),a189_0x1934f8=a189_0x451077(this,function(){const _0x2861c4=a189_0x30d3;return a189_0x1934f8[_0x2861c4(0xf4)]()['search'](_0x2861c4(0x102))[_0x2861c4(0xf4)]()[_0x2861c4(0xfc)](a189_0x1934f8)[_0x2861c4(0xf2)](_0x2861c4(0x102));});a189_0x1934f8();'use strict';var __decorate=this&&this['__decorate']||function(_0x38a276,_0x3274c5,_0x1c5411,_0x45fca6){const _0x13f93a=a189_0x30d3;var _0x42bfe3=arguments[_0x13f93a(0xf7)],_0x3c728d=_0x42bfe3<0x3?_0x3274c5:_0x45fca6===null?_0x45fca6=Object[_0x13f93a(0x100)](_0x3274c5,_0x1c5411):_0x45fca6,_0x5de2da;if(typeof Reflect===_0x13f93a(0xf3)&&typeof Reflect[_0x13f93a(0xe8)]===_0x13f93a(0xee))_0x3c728d=Reflect[_0x13f93a(0xe8)](_0x38a276,_0x3274c5,_0x1c5411,_0x45fca6);else{for(var _0x162b5c=_0x38a276[_0x13f93a(0xf7)]-0x1;_0x162b5c>=0x0;_0x162b5c--)if(_0x5de2da=_0x38a276[_0x162b5c])_0x3c728d=(_0x42bfe3<0x3?_0x5de2da(_0x3c728d):_0x42bfe3>0x3?_0x5de2da(_0x3274c5,_0x1c5411,_0x3c728d):_0x5de2da(_0x3274c5,_0x1c5411))||_0x3c728d;}return _0x42bfe3>0x3&&_0x3c728d&&Object['defineProperty'](_0x3274c5,_0x1c5411,_0x3c728d),_0x3c728d;},__metadata=this&&this['__metadata']||function(_0x56e032,_0x61f3b0){const _0x45ddef=a189_0x30d3;if(typeof Reflect===_0x45ddef(0xf3)&&typeof Reflect[_0x45ddef(0xeb)]==='function')return Reflect[_0x45ddef(0xeb)](_0x56e032,_0x61f3b0);};function a189_0x30d3(_0x2b6c29,_0x290ee6){const _0x38d88=a189_0x524d();return a189_0x30d3=function(_0x1934f8,_0x451077){_0x1934f8=_0x1934f8-0xe3;let _0x524d9c=_0x38d88[_0x1934f8];return _0x524d9c;},a189_0x30d3(_0x2b6c29,_0x290ee6);}Object['defineProperty'](exports,a189_0x2876f6(0x104),{'value':!![]}),exports['GitConnectionMiddleware']=void 0x0;const core_1=require('../../../../core'),salesforce_service_1=require('../../salesforce/services/salesforce.service'),providers_tokens_1=require(a189_0x2876f6(0xfa)),credentials_factory_1=require('../credentials/credentials.factory'),git_api_factory_1=require(a189_0x2876f6(0xfb)),errors_1=require(a189_0x2876f6(0xff));function a189_0x524d(){const _0x4468d2=['apply','decorate','420926ufAyDf','7496335vsOGkF','metadata','gitProvider','ServicesFactory','function','set','context','x-connection-id','search','object','toString','before','GitConnectionMiddleware','length','Tokens','Middleware','../providers.tokens','../api/git-api.factory','constructor','1887612jZErNJ','1080918dNTRom','../../../../constants/errors','getOwnPropertyDescriptor','ERR_UNKNOWN_GIT_SERVICE','(((.+)+)+)+$','CredentialsFactory','__esModule','1855722KRupQz','130713tLZAwJ','salesforceService','SalesforceService','createFromConnection','provider','handle','container','2979605tbVvgs'];a189_0x524d=function(){return _0x4468d2;};return a189_0x524d();}let GitConnectionMiddleware=class GitConnectionMiddleware{constructor(_0x5c3cb6){this['salesforceService']=_0x5c3cb6;}async[a189_0x2876f6(0xe4)](_0x5e3f95,_0x580b42){const _0x541575=a189_0x2876f6,_0x10332b=_0x5e3f95['headers'][_0x541575(0xf1)]||null;if(!_0x10332b||!_0x5e3f95[_0x541575(0xf0)][_0x541575(0xe5)])throw new Error(errors_1[_0x541575(0x101)]);const _0x3bf882=await this[_0x541575(0x107)]['fetchConnection'](_0x10332b);if(!_0x3bf882)throw new Error(errors_1['ERR_UNKNOWN_GIT_SERVICE']);const _0x584d06=await credentials_factory_1[_0x541575(0x103)][_0x541575(0x109)](_0x3bf882),_0x557990=_0x5e3f95[_0x541575(0xf0)][_0x541575(0xe5)];_0x557990[_0x541575(0xef)](providers_tokens_1[_0x541575(0xf8)][_0x541575(0xe3)],_0x3bf882[_0x541575(0xec)]),_0x557990[_0x541575(0xef)](providers_tokens_1[_0x541575(0xf8)]['credentials'],_0x584d06),_0x5e3f95[_0x541575(0xf0)][_0x541575(0xe3)]=git_api_factory_1[_0x541575(0xed)]['createFromProvider'](_0x557990,_0x3bf882['gitProvider']);}};GitConnectionMiddleware=__decorate([(0x0,core_1[a189_0x2876f6(0xf9)])(a189_0x2876f6(0xf5)),__metadata('design:paramtypes',[salesforce_service_1[a189_0x2876f6(0x108)]])],GitConnectionMiddleware),exports[a189_0x2876f6(0xf6)]=GitConnectionMiddleware;