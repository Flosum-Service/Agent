function a60_0x2f33(){const _0x3ce00b=['gitUrl','GitUtils','writed','getOwnPropertyDescriptor','dir','3042648IirxqP','\x20Nothing\x20to\x20commit.\x20Skip.','320322jREqqw','\x20Preparing\x20to\x20write\x20components','DEFAULT_GIT_USER_EMAIL','reduce','createProjectFrom','replace','getGitShellAuthorizationString','(((.+)+)+)+$','default','__setModuleDefault','master','fileName','Bitbucket','provider','events','../../../shared/utils','fileType','COMPONENTS_PER_TICK','branch','decorate','isSFDXProject','5607260yVHZzm','log','create','catch','error','3497412iPCgtr','../../parsers/data/child-types','../utils/sfdx.utils','send','now','\x20Checking\x20deleted\x20components.','SFDXUtils','56oWRjoL','CommitComponentsJob','components','length','../dto/commit-components.dto','5KSJaRk','prefix','../utils/git.utils','580181uMIlCe','writeComponents','getRemote','constructor','toString','5RxCpPV','removeComponents','commitData','cleanUp','Tokens','clone','66DNAsCQ','\x20components','__importStar','GitProvider','__importDefault','run','writeFlosumComponents','BitbucketApiService','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','splice','\x20Checking\x20written\x20components.','prototype','sfdxUtils','force-app','1050348tEaYSJ','logger','\x20Prepare\x20mdapi\x20files.','sfLogger','Service','11idLGMk','componentsToDelete','exec','\x20Start\x20converting\x20to\x20SFDX.','../../providers/types/git-provider','removeDir','defineProperty','deleted','\x20Copying\x20mdapi\x20to\x20git\x20folder.','name','call','sort','join','://','isLoggedIn','../../providers/api/bitbucket-api.service','credentials','copyMdapiTo','__decorate','1291743hjnzxg','../../internal/fs.internal','force','mdapiUtils','get','search','values','__esModule','push','gitUtils','copyProjectTo'];a60_0x2f33=function(){return _0x3ce00b;};return a60_0x2f33();}const a60_0xcd3b6d=a60_0x1523;(function(_0x340457,_0x2340a6){const _0x4219d4=a60_0x1523,_0x54cabb=_0x340457();while(!![]){try{const _0xc11c7c=parseInt(_0x4219d4(0x145))/0x1*(-parseInt(_0x4219d4(0x11f))/0x2)+parseInt(_0x4219d4(0x11d))/0x3+parseInt(_0x4219d4(0x139))/0x4*(-parseInt(_0x4219d4(0x14d))/0x5)+-parseInt(_0x4219d4(0x153))/0x6*(-parseInt(_0x4219d4(0x148))/0x7)+-parseInt(_0x4219d4(0x140))/0x8*(-parseInt(_0x4219d4(0x10d))/0x9)+-parseInt(_0x4219d4(0x134))/0xa*(parseInt(_0x4219d4(0xfa))/0xb)+parseInt(_0x4219d4(0xf5))/0xc;if(_0xc11c7c===_0x2340a6)break;else _0x54cabb['push'](_0x54cabb['shift']());}catch(_0x87ed04){_0x54cabb['push'](_0x54cabb['shift']());}}}(a60_0x2f33,0xbefb7));const a60_0xeb5300=(function(){let _0x200176=!![];return function(_0x6569c0,_0x52ba98){const _0x3981f3=_0x200176?function(){if(_0x52ba98){const _0x24a550=_0x52ba98['apply'](_0x6569c0,arguments);return _0x52ba98=null,_0x24a550;}}:function(){};return _0x200176=![],_0x3981f3;};}()),a60_0xf8f065=a60_0xeb5300(this,function(){const _0x467454=a60_0x1523;return a60_0xf8f065[_0x467454(0x14c)]()[_0x467454(0x112)]('(((.+)+)+)+$')[_0x467454(0x14c)]()[_0x467454(0x14b)](a60_0xf8f065)[_0x467454(0x112)](_0x467454(0x126));});a60_0xf8f065();function a60_0x1523(_0x37213d,_0x979036){const _0x185563=a60_0x2f33();return a60_0x1523=function(_0xf8f065,_0xeb5300){_0xf8f065=_0xf8f065-0xe8;let _0x2f33eb=_0x185563[_0xf8f065];return _0x2f33eb;},a60_0x1523(_0x37213d,_0x979036);}'use strict';var __createBinding=this&&this['__createBinding']||(Object[a60_0xcd3b6d(0x136)]?function(_0x2ffa5d,_0x10354e,_0x34f7ce,_0x17977e){const _0x2c9758=a60_0xcd3b6d;if(_0x17977e===undefined)_0x17977e=_0x34f7ce;Object[_0x2c9758(0x100)](_0x2ffa5d,_0x17977e,{'enumerable':!![],'get':function(){return _0x10354e[_0x34f7ce];}});}:function(_0x2845bd,_0x453a3e,_0x41dc2a,_0x548fa4){if(_0x548fa4===undefined)_0x548fa4=_0x41dc2a;_0x2845bd[_0x548fa4]=_0x453a3e[_0x41dc2a];}),__setModuleDefault=this&&this[a60_0xcd3b6d(0x128)]||(Object[a60_0xcd3b6d(0x136)]?function(_0x263532,_0x26f357){const _0x39b1f1=a60_0xcd3b6d;Object[_0x39b1f1(0x100)](_0x263532,'default',{'enumerable':!![],'value':_0x26f357});}:function(_0x226dd7,_0x22d9b4){const _0x7b5db7=a60_0xcd3b6d;_0x226dd7[_0x7b5db7(0x127)]=_0x22d9b4;}),__decorate=this&&this[a60_0xcd3b6d(0x10c)]||function(_0x3d3516,_0x197cad,_0x18a21c,_0x5e1505){const _0x37fc2a=a60_0xcd3b6d;var _0xcef312=arguments['length'],_0x12a8dd=_0xcef312<0x3?_0x197cad:_0x5e1505===null?_0x5e1505=Object[_0x37fc2a(0x11b)](_0x197cad,_0x18a21c):_0x5e1505,_0x51b9a1;if(typeof Reflect==='object'&&typeof Reflect[_0x37fc2a(0x132)]==='function')_0x12a8dd=Reflect['decorate'](_0x3d3516,_0x197cad,_0x18a21c,_0x5e1505);else{for(var _0x414cad=_0x3d3516[_0x37fc2a(0x143)]-0x1;_0x414cad>=0x0;_0x414cad--)if(_0x51b9a1=_0x3d3516[_0x414cad])_0x12a8dd=(_0xcef312<0x3?_0x51b9a1(_0x12a8dd):_0xcef312>0x3?_0x51b9a1(_0x197cad,_0x18a21c,_0x12a8dd):_0x51b9a1(_0x197cad,_0x18a21c))||_0x12a8dd;}return _0xcef312>0x3&&_0x12a8dd&&Object[_0x37fc2a(0x100)](_0x197cad,_0x18a21c,_0x12a8dd),_0x12a8dd;},__importStar=this&&this[a60_0xcd3b6d(0xe9)]||function(_0x21a463){const _0x169cf8=a60_0xcd3b6d;if(_0x21a463&&_0x21a463[_0x169cf8(0x114)])return _0x21a463;var _0x4b6874={};if(_0x21a463!=null){for(var _0x46b7b0 in _0x21a463)if(_0x46b7b0!==_0x169cf8(0x127)&&Object[_0x169cf8(0xf2)]['hasOwnProperty'][_0x169cf8(0x104)](_0x21a463,_0x46b7b0))__createBinding(_0x4b6874,_0x21a463,_0x46b7b0);}return __setModuleDefault(_0x4b6874,_0x21a463),_0x4b6874;},__importDefault=this&&this[a60_0xcd3b6d(0xeb)]||function(_0x309c59){const _0x59dca0=a60_0xcd3b6d;return _0x309c59&&_0x309c59[_0x59dca0(0x114)]?_0x309c59:{'default':_0x309c59};};Object[a60_0xcd3b6d(0x100)](exports,a60_0xcd3b6d(0x114),{'value':!![]}),exports[a60_0xcd3b6d(0x141)]=void 0x0;const commit_components_dto_1=require(a60_0xcd3b6d(0x144)),events_1=__importDefault(require(a60_0xcd3b6d(0x12d))),git_utils_1=require(a60_0xcd3b6d(0x147)),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a60_0xcd3b6d(0x13b)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a60_0xcd3b6d(0x13a))),utils_1=require(a60_0xcd3b6d(0x12e)),constants_1=require('../../../../constants'),git_provider_1=require(a60_0xcd3b6d(0xfe)),bitbucket_api_service_1=require(a60_0xcd3b6d(0x109)),sfdx_utils_2=require('../../salesforce/utils/sfdx.utils'),fs_internal_1=require(a60_0xcd3b6d(0x10e)),path_1=require('path'),providers_tokens_1=require('../../providers/providers.tokens');let CommitComponentsJob=class CommitComponentsJob extends events_1[a60_0xcd3b6d(0x127)]{constructor(){const _0x125241=a60_0xcd3b6d;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this['componentsToWrite']=0x0,this[_0x125241(0xfb)]=0x0,this['startTime']=Date[_0x125241(0x13d)]();}async[a60_0xcd3b6d(0x14a)](){const _0x1bada7=a60_0xcd3b6d,{repo:_0x4c3012}=this[_0x1bada7(0x14f)],_0x4ad943=typedi_1[_0x1bada7(0x127)]['get'](providers_tokens_1[_0x1bada7(0x151)][_0x1bada7(0x10a)]);if(this[_0x1bada7(0x14f)][_0x1bada7(0x12c)]===git_provider_1[_0x1bada7(0xea)][_0x1bada7(0x12b)]){const _0x596701=typedi_1['default'][_0x1bada7(0x111)](bitbucket_api_service_1[_0x1bada7(0xee)]);await _0x596701[_0x1bada7(0x108)]();}return _0x4c3012[_0x1bada7(0x118)][_0x1bada7(0x124)](/http(s)?:\/\/(.+@)?/,utils_1['getProtocol'](_0x4c3012[_0x1bada7(0x118)])+_0x1bada7(0x107)+_0x4ad943[_0x1bada7(0x125)]()+'@');}['groupComponentsByFileName'](_0x422e2c){const _0x3a36c3=a60_0xcd3b6d;var _0x3de9a5;_0x422e2c[_0x3a36c3(0x105)](_0x4d3726=>child_types_1[_0x3a36c3(0x127)]['includes'](_0x4d3726[_0x3a36c3(0x12f)])?0x1:-0x1);const _0x579402={};for(const _0x16ee03 of _0x422e2c){_0x579402[_0x3de9a5=_0x16ee03['fileName']]||(_0x579402[_0x3de9a5]=[]),_0x579402[_0x16ee03[_0x3a36c3(0x12a)]][_0x3a36c3(0x115)](_0x16ee03);}return Object[_0x3a36c3(0x113)](_0x579402)[_0x3a36c3(0x122)]((_0x4e4ecd,_0x192dcf)=>[..._0x4e4ecd,..._0x192dcf],[]);}async[a60_0xcd3b6d(0x149)](_0x3e9b6a){const _0x3b359d=a60_0xcd3b6d;_0x3e9b6a=this['groupComponentsByFileName'](_0x3e9b6a);let _0x1c7dca=0x0;while(_0x3e9b6a['length']){const _0x860970=_0x3e9b6a[_0x3b359d(0xf0)](0x0,this[_0x3b359d(0x130)]);await this['mdapiUtils'][_0x3b359d(0xed)](_0x860970,{'skipChildErrors':this['commitData'][_0x3b359d(0x131)][_0x3b359d(0x103)]===_0x3b359d(0x129)}),_0x1c7dca+=_0x860970[_0x3b359d(0x143)],this['sfLogger']['log'](this['prefix']+'\x20Wrote\x20'+_0x1c7dca+'/'+this['componentsToWrite']+_0x3b359d(0xe8)),await this[_0x3b359d(0xf8)][_0x3b359d(0x13c)]();}}async[a60_0xcd3b6d(0x14e)](_0x4cb108){const _0x4d769e=a60_0xcd3b6d;_0x4cb108[_0x4d769e(0x105)](_0x53b26c=>child_types_1[_0x4d769e(0x127)]['includes'](_0x53b26c['type'])?-0x1:0x1);let _0x158fb0=0x0;while(_0x4cb108[_0x4d769e(0x143)]){const _0x5be5d7=_0x4cb108[_0x4d769e(0xf0)](0x0,this['COMPONENTS_PER_TICK']);await this['mdapiUtils'][_0x4d769e(0x14e)](_0x5be5d7),_0x158fb0+=_0x5be5d7[_0x4d769e(0x143)],this['sfLogger'][_0x4d769e(0x135)](this[_0x4d769e(0x146)]+'\x20Deleted\x20'+_0x158fb0+'/'+this[_0x4d769e(0xfb)]+_0x4d769e(0xe8)),await this[_0x4d769e(0xf8)]['send']();}}async['cleanUp'](){const _0x1741ae=a60_0xcd3b6d;this[_0x1741ae(0x116)]&&await this[_0x1741ae(0x116)][_0x1741ae(0xff)]()['catch'](()=>void 0x0),this[_0x1741ae(0x110)]&&await this[_0x1741ae(0x110)][_0x1741ae(0xff)]()[_0x1741ae(0x137)](()=>void 0x0),this[_0x1741ae(0xf3)]&&await this[_0x1741ae(0xf3)][_0x1741ae(0xff)]()[_0x1741ae(0x137)](()=>void 0x0);}async['exec'](){const _0x3a5e32=a60_0xcd3b6d,{repo:_0xf21ffa,branch:_0x2c4ff9,components:_0x2c2e5e,convertToSFDX:_0x52ae16,message:_0x27bf29,user:_0xb24a32}=this['commitData'];this[_0x3a5e32(0x110)]=new mdapi_utils_1['MDApiUtils'](),this[_0x3a5e32(0x116)]=new git_utils_1[(_0x3a5e32(0x119))](await this[_0x3a5e32(0x14a)]()),this[_0x3a5e32(0xf3)]=new sfdx_utils_1[(_0x3a5e32(0x13f))]();let _0x43da43=_0x52ae16;try{await this['sfLogger'][_0x3a5e32(0x135)](this[_0x3a5e32(0x146)]+'\x20Start\x20cloning\x20repository.')[_0x3a5e32(0x13c)](),await this[_0x3a5e32(0x116)][_0x3a5e32(0x152)](_0x2c4ff9['name'],_0xf21ffa[_0x3a5e32(0x103)]);!this[_0x3a5e32(0x14f)][_0x3a5e32(0x10f)]?(this[_0x3a5e32(0xf8)][_0x3a5e32(0x135)](this['prefix']+_0x3a5e32(0xf7)),await this[_0x3a5e32(0x110)]['prepareMdapi'](this['gitUtils'][_0x3a5e32(0x11c)])):this[_0x3a5e32(0xf8)][_0x3a5e32(0x135)](this[_0x3a5e32(0x146)]+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this[_0x3a5e32(0xf8)][_0x3a5e32(0x135)](this[_0x3a5e32(0x146)]+_0x3a5e32(0xf1))[_0x3a5e32(0x13c)]();_0x2c2e5e[_0x3a5e32(0x11a)]&&(this[_0x3a5e32(0xf8)][_0x3a5e32(0x135)](this[_0x3a5e32(0x146)]+_0x3a5e32(0x120)),this['componentsToWrite']=_0x2c2e5e[_0x3a5e32(0x11a)][_0x3a5e32(0x143)],await this['writeComponents'](_0x2c2e5e['writed']),await this[_0x3a5e32(0xf8)][_0x3a5e32(0x13c)]());await this[_0x3a5e32(0xf8)][_0x3a5e32(0x135)](this[_0x3a5e32(0x146)]+_0x3a5e32(0x13e))[_0x3a5e32(0x13c)]();_0x2c2e5e[_0x3a5e32(0x101)]&&(this[_0x3a5e32(0xf8)][_0x3a5e32(0x135)](this[_0x3a5e32(0x146)]+'\x20Preparing\x20to\x20delete\x20components'),this[_0x3a5e32(0xfb)]=_0x2c2e5e['deleted'][_0x3a5e32(0x143)],await this[_0x3a5e32(0x14e)](_0x2c2e5e[_0x3a5e32(0x101)]),await this[_0x3a5e32(0xf8)][_0x3a5e32(0x13c)]());await this['sfLogger']['send']();const _0x3aabcc=await fs_internal_1['FS']['isEmptyDir'](this[_0x3a5e32(0x116)][_0x3a5e32(0x11c)]);await sfdx_utils_2['SFDX'][_0x3a5e32(0x133)](this['gitUtils']['dir'])?(_0x43da43=!![],await fs_internal_1['FS']['removeDir'](path_1[_0x3a5e32(0x106)](this[_0x3a5e32(0x116)][_0x3a5e32(0x11c)],_0x3a5e32(0xf4)))):(_0x43da43&&(!_0x3aabcc&&(_0x43da43=![])),await this['gitUtils']['clearDir']());_0x43da43?(await this[_0x3a5e32(0xf8)]['log'](this[_0x3a5e32(0x146)]+_0x3a5e32(0xfd))[_0x3a5e32(0x13c)](),await this[_0x3a5e32(0xf3)][_0x3a5e32(0x123)](this[_0x3a5e32(0x110)][_0x3a5e32(0x11c)]),await this[_0x3a5e32(0xf3)][_0x3a5e32(0x117)](this[_0x3a5e32(0x116)][_0x3a5e32(0x11c)],!_0x3aabcc),await this['sfdxUtils'][_0x3a5e32(0xff)]()):(await this['sfLogger'][_0x3a5e32(0x135)](this[_0x3a5e32(0x146)]+_0x3a5e32(0x102))[_0x3a5e32(0x13c)](),await this['mdapiUtils'][_0x3a5e32(0x10b)](this[_0x3a5e32(0x116)][_0x3a5e32(0x11c)]));await this['sfLogger'][_0x3a5e32(0x135)](this[_0x3a5e32(0x146)]+_0x3a5e32(0xef))['send'](),await this[_0x3a5e32(0x116)]['commitAndPush'](_0x27bf29,{'email':constants_1[_0x3a5e32(0x121)],'name':_0xb24a32[_0x3a5e32(0x103)]},_0x2c4ff9['name']),await this['gitUtils']['removeDir'](),await this[_0x3a5e32(0x110)][_0x3a5e32(0xff)]();const _0x5e3e43=this['componentsToWrite']+this['componentsToDelete'];await this[_0x3a5e32(0xf8)][_0x3a5e32(0x135)](this[_0x3a5e32(0x146)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x3a5e32(0x13d)]()-this['startTime'])+'ms.\x20Committed\x20components\x20-\x20'+_0x5e3e43+'.')['send']();}catch(_0xf7bffa){await this[_0x3a5e32(0x150)](),await this[_0x3a5e32(0xf8)][_0x3a5e32(0x138)](this[_0x3a5e32(0x146)]+'\x20'+_0xf7bffa)[_0x3a5e32(0x13c)]();throw _0xf7bffa;}}async[a60_0xcd3b6d(0xec)](_0xd55beb,_0x9fd376){const _0x4795d4=a60_0xcd3b6d;var _0x2cb7f3,_0x18e973;this[_0x4795d4(0xf8)]=typedi_1[_0x4795d4(0x127)][_0x4795d4(0x111)](providers_tokens_1[_0x4795d4(0x151)][_0x4795d4(0xf6)]),this[_0x4795d4(0x146)]=(_0x9fd376?_0x9fd376+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x4795d4(0x103)]+']',await this[_0x4795d4(0xf8)][_0x4795d4(0x135)](this[_0x4795d4(0x146)]+'\x20Checking\x20commit\x20components.');const _0x1bd45d=!!((_0x2cb7f3=_0xd55beb[_0x4795d4(0x142)])===null||_0x2cb7f3===void 0x0?void 0x0:_0x2cb7f3[_0x4795d4(0x11a)])||!!((_0x18e973=_0xd55beb[_0x4795d4(0x142)])===null||_0x18e973===void 0x0?void 0x0:_0x18e973[_0x4795d4(0x101)]);if(!_0x1bd45d){await this[_0x4795d4(0xf8)][_0x4795d4(0x135)](this[_0x4795d4(0x146)]+_0x4795d4(0x11e))[_0x4795d4(0x13c)]();return;}this['commitData']=_0xd55beb,await this[_0x4795d4(0xfc)]();}};CommitComponentsJob=__decorate([typedi_1[a60_0xcd3b6d(0xf9)]({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;