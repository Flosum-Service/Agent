const a125_0x4cdf83=a125_0x1de1;(function(_0x545de9,_0x580c45){const _0xa7abbe=a125_0x1de1,_0xa65758=_0x545de9();while(!![]){try{const _0x4409aa=parseInt(_0xa7abbe(0x1d4))/0x1*(-parseInt(_0xa7abbe(0x20d))/0x2)+-parseInt(_0xa7abbe(0x1ec))/0x3+parseInt(_0xa7abbe(0x1fc))/0x4*(-parseInt(_0xa7abbe(0x1dc))/0x5)+-parseInt(_0xa7abbe(0x21c))/0x6*(parseInt(_0xa7abbe(0x1f8))/0x7)+parseInt(_0xa7abbe(0x1b4))/0x8*(parseInt(_0xa7abbe(0x1f1))/0x9)+-parseInt(_0xa7abbe(0x216))/0xa*(parseInt(_0xa7abbe(0x21a))/0xb)+parseInt(_0xa7abbe(0x206))/0xc*(parseInt(_0xa7abbe(0x1e1))/0xd);if(_0x4409aa===_0x580c45)break;else _0xa65758['push'](_0xa65758['shift']());}catch(_0x43e1e0){_0xa65758['push'](_0xa65758['shift']());}}}(a125_0x149c,0x31efd));const a125_0x4949e8=(function(){let _0x54523f=!![];return function(_0x146c2d,_0x526e80){const _0x45cbde=_0x54523f?function(){const _0x3fc74b=a125_0x1de1;if(_0x526e80){const _0x9c49d4=_0x526e80[_0x3fc74b(0x1ce)](_0x146c2d,arguments);return _0x526e80=null,_0x9c49d4;}}:function(){};return _0x54523f=![],_0x45cbde;};}()),a125_0x136641=a125_0x4949e8(this,function(){const _0xf7f73f=a125_0x1de1;return a125_0x136641['toString']()[_0xf7f73f(0x1d8)](_0xf7f73f(0x225))[_0xf7f73f(0x1c1)]()[_0xf7f73f(0x1f7)](a125_0x136641)[_0xf7f73f(0x1d8)](_0xf7f73f(0x225));});function a125_0x1de1(_0x4ed035,_0x46b6cb){const _0x10916c=a125_0x149c();return a125_0x1de1=function(_0x136641,_0x4949e8){_0x136641=_0x136641-0x1b4;let _0x149c58=_0x10916c[_0x136641];return _0x149c58;},a125_0x1de1(_0x4ed035,_0x46b6cb);}a125_0x136641();'use strict';function a125_0x149c(){const _0x32db34=['prepareMdapi','(((.+)+)+)+$','__createBinding','getProtocol','name','ms.\x20Committed\x20components\x20-\x20','logger','copyProjectTo','push','get','values','22328JQRWsN','\x20components','\x20Preparing\x20to\x20delete\x20components','defineProperty','\x20Checking\x20commit\x20components.','createProjectFrom','deleted','function','sfdxUtils','isEmptyDir','provider','groupComponentsByFileName','getOwnPropertyDescriptor','toString','splice','\x20Wrote\x20','log','DEFAULT_GIT_USER_EMAIL','__esModule','COMPONENTS_PER_TICK','CommitComponentsJob','removeComponents','../../salesforce/utils/sfdx.utils','fileType','removeDir','../dto/commit-components.dto','apply','copyMdapiTo','call','writed','__decorate','../../providers/providers.tokens','19WaTWau','sfLogger','length','gitUtils','search','\x20Start\x20converting\x20to\x20SFDX.','\x20Deleted\x20','object','392005NzchfM','Tokens','sort','includes','writable','1808495CtUNat','isConvertToSfdx','../utils/git.utils','commitData','../../../../constants','cleanUp','SFDX','\x20Nothing\x20to\x20commit.\x20Skip.','catch','mdapiUtils','FORCE_APP_DEFAULT_DIR','1022991FTCDdV','../../parsers/data/child-types','Bitbucket','fileName','BitbucketApiService','198jRcaOF','now','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','recordType','credentials','dir','constructor','563507NVfMKd','exec','default','getGitShellAuthorizationString','12nmmIsR','componentsToWrite','componentsToDelete','\x20Preparing\x20to\x20write\x20components','../../providers/api/bitbucket-api.service','replace','\x20Start\x20cloning\x20repository.','run','prefix','configurable','84bGKxza','gitUrl','\x20Copying\x20mdapi\x20to\x20git\x20folder.','create','path','force-app','clearDir','6486ZdDkDl','master','__importDefault','decorate','../utils/mdapi.utils','events','join','isLoggedIn','send','20iXPeAr','writeComponents','startTime','Service','617914jjuXsC','force','6IjNygl','../../../shared/utils','prototype','../../internal/fs.internal','../../providers/types/git-provider','type','components','__importStar'];a125_0x149c=function(){return _0x32db34;};return a125_0x149c();}var __createBinding=this&&this[a125_0x4cdf83(0x226)]||(Object[a125_0x4cdf83(0x209)]?function(_0x9758f3,_0x160300,_0x14ef5c,_0x44e617){const _0x41b2f=a125_0x4cdf83;if(_0x44e617===undefined)_0x44e617=_0x14ef5c;var _0x5cb425=Object[_0x41b2f(0x1c0)](_0x160300,_0x14ef5c);(!_0x5cb425||('get'in _0x5cb425?!_0x160300['__esModule']:_0x5cb425[_0x41b2f(0x1e0)]||_0x5cb425[_0x41b2f(0x205)]))&&(_0x5cb425={'enumerable':!![],'get':function(){return _0x160300[_0x14ef5c];}}),Object[_0x41b2f(0x1b7)](_0x9758f3,_0x44e617,_0x5cb425);}:function(_0x15a6b0,_0x491187,_0x1be43d,_0x947167){if(_0x947167===undefined)_0x947167=_0x1be43d;_0x15a6b0[_0x947167]=_0x491187[_0x1be43d];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a125_0x4cdf83(0x209)]?function(_0x10ca74,_0x32f310){const _0x2fc01e=a125_0x4cdf83;Object['defineProperty'](_0x10ca74,_0x2fc01e(0x1fa),{'enumerable':!![],'value':_0x32f310});}:function(_0x220702,_0x439cec){const _0x5d68fa=a125_0x4cdf83;_0x220702[_0x5d68fa(0x1fa)]=_0x439cec;}),__decorate=this&&this[a125_0x4cdf83(0x1d2)]||function(_0x1dcd05,_0x52f730,_0x3592b8,_0x25a9fb){const _0xc7fd2=a125_0x4cdf83;var _0x178e9d=arguments[_0xc7fd2(0x1d6)],_0x4f7b90=_0x178e9d<0x3?_0x52f730:_0x25a9fb===null?_0x25a9fb=Object['getOwnPropertyDescriptor'](_0x52f730,_0x3592b8):_0x25a9fb,_0x8e4372;if(typeof Reflect===_0xc7fd2(0x1db)&&typeof Reflect['decorate']===_0xc7fd2(0x1bb))_0x4f7b90=Reflect[_0xc7fd2(0x210)](_0x1dcd05,_0x52f730,_0x3592b8,_0x25a9fb);else{for(var _0x59155d=_0x1dcd05[_0xc7fd2(0x1d6)]-0x1;_0x59155d>=0x0;_0x59155d--)if(_0x8e4372=_0x1dcd05[_0x59155d])_0x4f7b90=(_0x178e9d<0x3?_0x8e4372(_0x4f7b90):_0x178e9d>0x3?_0x8e4372(_0x52f730,_0x3592b8,_0x4f7b90):_0x8e4372(_0x52f730,_0x3592b8))||_0x4f7b90;}return _0x178e9d>0x3&&_0x4f7b90&&Object['defineProperty'](_0x52f730,_0x3592b8,_0x4f7b90),_0x4f7b90;},__importStar=this&&this[a125_0x4cdf83(0x223)]||function(_0x2a5bde){const _0x4d956d=a125_0x4cdf83;if(_0x2a5bde&&_0x2a5bde['__esModule'])return _0x2a5bde;var _0xb3bdd3={};if(_0x2a5bde!=null){for(var _0x4b40f6 in _0x2a5bde)if(_0x4b40f6!==_0x4d956d(0x1fa)&&Object[_0x4d956d(0x21e)]['hasOwnProperty'][_0x4d956d(0x1d0)](_0x2a5bde,_0x4b40f6))__createBinding(_0xb3bdd3,_0x2a5bde,_0x4b40f6);}return __setModuleDefault(_0xb3bdd3,_0x2a5bde),_0xb3bdd3;},__importDefault=this&&this[a125_0x4cdf83(0x20f)]||function(_0x37af70){const _0x3bb8db=a125_0x4cdf83;return _0x37af70&&_0x37af70[_0x3bb8db(0x1c6)]?_0x37af70:{'default':_0x37af70};};Object[a125_0x4cdf83(0x1b7)](exports,'__esModule',{'value':!![]}),exports[a125_0x4cdf83(0x1c8)]=void 0x0;const commit_components_dto_1=require(a125_0x4cdf83(0x1cd)),events_1=__importDefault(require(a125_0x4cdf83(0x212))),git_utils_1=require(a125_0x4cdf83(0x1e3)),mdapi_utils_1=require(a125_0x4cdf83(0x211)),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a125_0x4cdf83(0x1ed))),utils_1=require(a125_0x4cdf83(0x21d)),constants_1=require('../../../../constants'),git_provider_1=require(a125_0x4cdf83(0x220)),bitbucket_api_service_1=require(a125_0x4cdf83(0x200)),sfdx_utils_2=require(a125_0x4cdf83(0x1ca)),fs_internal_1=require(a125_0x4cdf83(0x21f)),path_1=require(a125_0x4cdf83(0x20a)),providers_tokens_1=require(a125_0x4cdf83(0x1d3)),constants_2=require(a125_0x4cdf83(0x1e5));let CommitComponentsJob=class CommitComponentsJob extends events_1[a125_0x4cdf83(0x1fa)]{constructor(){const _0x1adcfa=a125_0x4cdf83;super(...arguments),this[_0x1adcfa(0x1c7)]=0x3e8,this[_0x1adcfa(0x1fd)]=0x0,this[_0x1adcfa(0x1fe)]=0x0,this[_0x1adcfa(0x218)]=Date[_0x1adcfa(0x1f2)]();}async['getRemote'](){const _0x27dc02=a125_0x4cdf83,{repo:_0xd8862f}=this[_0x27dc02(0x1e4)],_0x2f96ec=typedi_1['default'][_0x27dc02(0x22d)](providers_tokens_1[_0x27dc02(0x1dd)][_0x27dc02(0x1f5)]);if(this[_0x27dc02(0x1e4)][_0x27dc02(0x1be)]===git_provider_1['GitProvider'][_0x27dc02(0x1ee)]){const _0x2fbf69=typedi_1[_0x27dc02(0x1fa)][_0x27dc02(0x22d)](bitbucket_api_service_1[_0x27dc02(0x1f0)]);await _0x2fbf69[_0x27dc02(0x214)]();}return _0xd8862f[_0x27dc02(0x207)][_0x27dc02(0x201)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x27dc02(0x227)])(_0xd8862f['gitUrl'])+'://'+_0x2f96ec[_0x27dc02(0x1fb)]()+'@');}['groupComponentsByFileName'](_0x866c12){const _0x3916f7=a125_0x4cdf83;var _0x217d66;_0x866c12[_0x3916f7(0x1de)](_0x5b41fb=>child_types_1[_0x3916f7(0x1fa)]['includes'](_0x5b41fb[_0x3916f7(0x1cb)])?0x1:-0x1);const _0x2ac34e={};for(const _0xdd4299 of _0x866c12){_0x2ac34e[_0x217d66=_0xdd4299[_0x3916f7(0x1ef)]]||(_0x2ac34e[_0x217d66]=[]),_0x2ac34e[_0xdd4299['fileName']][_0x3916f7(0x22c)](_0xdd4299);}return Object[_0x3916f7(0x22e)](_0x2ac34e)['reduce']((_0x5420d2,_0x352e2d)=>[..._0x5420d2,..._0x352e2d],[]);}async[a125_0x4cdf83(0x217)](_0x10d3ba){const _0x5e4ccc=a125_0x4cdf83;_0x10d3ba=this[_0x5e4ccc(0x1bf)](_0x10d3ba);let _0x26b409=0x0;while(_0x10d3ba[_0x5e4ccc(0x1d6)]){const _0x3702ad=_0x10d3ba[_0x5e4ccc(0x1c2)](0x0,this[_0x5e4ccc(0x1c7)]);await this[_0x5e4ccc(0x1ea)]['writeFlosumComponents'](_0x3702ad,{'skipChildErrors':this[_0x5e4ccc(0x1e4)]['branch'][_0x5e4ccc(0x228)]===_0x5e4ccc(0x20e),'recordType':this['commitData'][_0x5e4ccc(0x1f4)]}),_0x26b409+=_0x3702ad['length'],this[_0x5e4ccc(0x1d5)][_0x5e4ccc(0x1c4)](this[_0x5e4ccc(0x204)]+_0x5e4ccc(0x1c3)+_0x26b409+'/'+this[_0x5e4ccc(0x1fd)]+_0x5e4ccc(0x1b5)),await this[_0x5e4ccc(0x1d5)]['send']();}}async[a125_0x4cdf83(0x1c9)](_0x283eb1){const _0x3affe2=a125_0x4cdf83;_0x283eb1[_0x3affe2(0x1de)](_0x1a1350=>child_types_1[_0x3affe2(0x1fa)][_0x3affe2(0x1df)](_0x1a1350[_0x3affe2(0x221)])?-0x1:0x1);let _0x56ba30=0x0;while(_0x283eb1['length']){const _0x4371af=_0x283eb1[_0x3affe2(0x1c2)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x3affe2(0x1ea)][_0x3affe2(0x1c9)](_0x4371af,this[_0x3affe2(0x1e4)]['recordType']),_0x56ba30+=_0x4371af[_0x3affe2(0x1d6)],this[_0x3affe2(0x1d5)]['log'](this[_0x3affe2(0x204)]+_0x3affe2(0x1da)+_0x56ba30+'/'+this[_0x3affe2(0x1fe)]+_0x3affe2(0x1b5)),await this[_0x3affe2(0x1d5)][_0x3affe2(0x215)]();}}async[a125_0x4cdf83(0x1e6)](){const _0x2004cf=a125_0x4cdf83;this[_0x2004cf(0x1d7)]&&await this['gitUtils'][_0x2004cf(0x1cc)]()[_0x2004cf(0x1e9)](()=>void 0x0),this[_0x2004cf(0x1ea)]&&await this[_0x2004cf(0x1ea)][_0x2004cf(0x1cc)]()[_0x2004cf(0x1e9)](()=>void 0x0),this[_0x2004cf(0x1bc)]&&await this[_0x2004cf(0x1bc)]['removeDir']()[_0x2004cf(0x1e9)](()=>void 0x0);}async[a125_0x4cdf83(0x1f9)](){const _0xb6cbd9=a125_0x4cdf83,{repo:_0x54ee52,branch:_0x21dbdd,components:_0x1da1af,convertToSFDX:_0xfd5b90,message:_0x310ff5,user:_0x44eafe}=this['commitData'];this[_0xb6cbd9(0x1ea)]=new mdapi_utils_1['MDApiUtils'](),this['gitUtils']=new git_utils_1['GitUtils'](await this['getRemote']()),this[_0xb6cbd9(0x1bc)]=new sfdx_utils_1['SFDXUtils']();let _0x5c2ba4=_0xfd5b90&&this[_0xb6cbd9(0x1bc)][_0xb6cbd9(0x1e2)](this['commitData'][_0xb6cbd9(0x1f4)]);try{await this[_0xb6cbd9(0x1d5)][_0xb6cbd9(0x1c4)](this[_0xb6cbd9(0x204)]+_0xb6cbd9(0x202))[_0xb6cbd9(0x215)](),await this[_0xb6cbd9(0x1d7)]['clone'](_0x21dbdd['name'],_0x54ee52['name']);!this['commitData'][_0xb6cbd9(0x21b)]?(this[_0xb6cbd9(0x1d5)][_0xb6cbd9(0x1c4)](this['prefix']+'\x20Prepare\x20mdapi\x20files.'),await this[_0xb6cbd9(0x1ea)][_0xb6cbd9(0x224)](this[_0xb6cbd9(0x1d7)][_0xb6cbd9(0x1f6)])):this[_0xb6cbd9(0x1d5)]['log'](this[_0xb6cbd9(0x204)]+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this[_0xb6cbd9(0x1d5)][_0xb6cbd9(0x1c4)](this[_0xb6cbd9(0x204)]+'\x20Checking\x20written\x20components.')[_0xb6cbd9(0x215)]();_0x1da1af['writed']&&(this['sfLogger'][_0xb6cbd9(0x1c4)](this[_0xb6cbd9(0x204)]+_0xb6cbd9(0x1ff)),this[_0xb6cbd9(0x1fd)]=_0x1da1af[_0xb6cbd9(0x1d1)][_0xb6cbd9(0x1d6)],await this[_0xb6cbd9(0x217)](_0x1da1af[_0xb6cbd9(0x1d1)]),await this[_0xb6cbd9(0x1d5)][_0xb6cbd9(0x215)]());await this[_0xb6cbd9(0x1d5)][_0xb6cbd9(0x1c4)](this['prefix']+'\x20Checking\x20deleted\x20components.')[_0xb6cbd9(0x215)]();_0x1da1af[_0xb6cbd9(0x1ba)]&&(this[_0xb6cbd9(0x1d5)][_0xb6cbd9(0x1c4)](this[_0xb6cbd9(0x204)]+_0xb6cbd9(0x1b6)),this[_0xb6cbd9(0x1fe)]=_0x1da1af[_0xb6cbd9(0x1ba)]['length'],await this[_0xb6cbd9(0x1c9)](_0x1da1af[_0xb6cbd9(0x1ba)]),await this[_0xb6cbd9(0x1d5)][_0xb6cbd9(0x215)]());await this['sfLogger'][_0xb6cbd9(0x215)]();const _0x1e605e=await fs_internal_1['FS'][_0xb6cbd9(0x1bd)](this[_0xb6cbd9(0x1d7)]['dir']);await sfdx_utils_2[_0xb6cbd9(0x1e7)]['isSFDXProject'](this[_0xb6cbd9(0x1d7)][_0xb6cbd9(0x1f6)])?(_0x5c2ba4=!![],await fs_internal_1['FS']['removeDir']((0x0,path_1[_0xb6cbd9(0x213)])(this['gitUtils'][_0xb6cbd9(0x1f6)],_0xb6cbd9(0x20b)))):(_0x5c2ba4&&(!_0x1e605e&&(_0x5c2ba4=![])),await this[_0xb6cbd9(0x1d7)][_0xb6cbd9(0x20c)]());_0x5c2ba4?(await this[_0xb6cbd9(0x1d5)][_0xb6cbd9(0x1c4)](this[_0xb6cbd9(0x204)]+_0xb6cbd9(0x1d9))[_0xb6cbd9(0x215)](),await this[_0xb6cbd9(0x1bc)][_0xb6cbd9(0x1b9)](this[_0xb6cbd9(0x1ea)][_0xb6cbd9(0x1f6)]),await this['sfdxUtils'][_0xb6cbd9(0x22b)](this[_0xb6cbd9(0x1d7)][_0xb6cbd9(0x1f6)],!_0x1e605e),await this[_0xb6cbd9(0x1bc)]['copySFDXIgnoredComponents'](this[_0xb6cbd9(0x1ea)][_0xb6cbd9(0x1f6)],(0x0,path_1[_0xb6cbd9(0x213)])(this[_0xb6cbd9(0x1d7)][_0xb6cbd9(0x1f6)],constants_2[_0xb6cbd9(0x1eb)])),await this[_0xb6cbd9(0x1bc)][_0xb6cbd9(0x1cc)]()):(await this['sfLogger'][_0xb6cbd9(0x1c4)](this[_0xb6cbd9(0x204)]+_0xb6cbd9(0x208))[_0xb6cbd9(0x215)](),await this[_0xb6cbd9(0x1ea)][_0xb6cbd9(0x1cf)](this[_0xb6cbd9(0x1d7)][_0xb6cbd9(0x1f6)]));await this[_0xb6cbd9(0x1d5)][_0xb6cbd9(0x1c4)](this['prefix']+_0xb6cbd9(0x1f3))['send'](),await this[_0xb6cbd9(0x1d7)]['commitAndPush'](_0x310ff5,{'email':constants_1[_0xb6cbd9(0x1c5)],'name':_0x44eafe['name']},_0x21dbdd[_0xb6cbd9(0x228)]),await this[_0xb6cbd9(0x1d7)][_0xb6cbd9(0x1cc)](),await this[_0xb6cbd9(0x1ea)][_0xb6cbd9(0x1cc)]();const _0x4bd00e=this[_0xb6cbd9(0x1fd)]+this[_0xb6cbd9(0x1fe)];await this[_0xb6cbd9(0x1d5)][_0xb6cbd9(0x1c4)](this[_0xb6cbd9(0x204)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0xb6cbd9(0x1f2)]()-this[_0xb6cbd9(0x218)])+_0xb6cbd9(0x229)+_0x4bd00e+'.')[_0xb6cbd9(0x215)]();}catch(_0x531a88){await this['cleanUp'](),await this[_0xb6cbd9(0x1d5)]['error'](this[_0xb6cbd9(0x204)]+'\x20'+_0x531a88)[_0xb6cbd9(0x215)]();throw _0x531a88;}}async[a125_0x4cdf83(0x203)](_0x361c12,_0x36611f){const _0x30463b=a125_0x4cdf83;var _0x3425d5,_0xc77027;this[_0x30463b(0x1d5)]=typedi_1['default'][_0x30463b(0x22d)](providers_tokens_1[_0x30463b(0x1dd)][_0x30463b(0x22a)]),this['prefix']=(_0x36611f?_0x36611f+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x30463b(0x228)]+']',await this[_0x30463b(0x1d5)][_0x30463b(0x1c4)](this[_0x30463b(0x204)]+_0x30463b(0x1b8));const _0x817935=!!((_0x3425d5=_0x361c12['components'])===null||_0x3425d5===void 0x0?void 0x0:_0x3425d5['writed'])||!!((_0xc77027=_0x361c12[_0x30463b(0x222)])===null||_0xc77027===void 0x0?void 0x0:_0xc77027[_0x30463b(0x1ba)]);if(!_0x817935){await this[_0x30463b(0x1d5)][_0x30463b(0x1c4)](this[_0x30463b(0x204)]+_0x30463b(0x1e8))[_0x30463b(0x215)]();return;}this['commitData']=_0x361c12,await this[_0x30463b(0x1f9)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a125_0x4cdf83(0x219)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;