const a73_0x4dfe3f=a73_0x3d7b;(function(_0x2af0e2,_0x125fbc){const _0x2d3c86=a73_0x3d7b,_0x3e92c8=_0x2af0e2();while(!![]){try{const _0x18a6a0=-parseInt(_0x2d3c86(0x89))/0x1+-parseInt(_0x2d3c86(0xc1))/0x2*(parseInt(_0x2d3c86(0xdf))/0x3)+-parseInt(_0x2d3c86(0x92))/0x4*(parseInt(_0x2d3c86(0x96))/0x5)+-parseInt(_0x2d3c86(0x8d))/0x6*(-parseInt(_0x2d3c86(0x78))/0x7)+parseInt(_0x2d3c86(0xc2))/0x8+parseInt(_0x2d3c86(0xc0))/0x9*(parseInt(_0x2d3c86(0xa3))/0xa)+parseInt(_0x2d3c86(0x73))/0xb;if(_0x18a6a0===_0x125fbc)break;else _0x3e92c8['push'](_0x3e92c8['shift']());}catch(_0x40c8cf){_0x3e92c8['push'](_0x3e92c8['shift']());}}}(a73_0x4a4c,0xdcdab));const a73_0x3b4c10=(function(){let _0x10dcd4=!![];return function(_0x3683b0,_0x559356){const _0x3e14a2=_0x10dcd4?function(){const _0x4f717e=a73_0x3d7b;if(_0x559356){const _0x171858=_0x559356[_0x4f717e(0xa7)](_0x3683b0,arguments);return _0x559356=null,_0x171858;}}:function(){};return _0x10dcd4=![],_0x3e14a2;};}()),a73_0x37a877=a73_0x3b4c10(this,function(){const _0x511f91=a73_0x3d7b;return a73_0x37a877[_0x511f91(0x94)]()[_0x511f91(0x79)](_0x511f91(0xb3))[_0x511f91(0x94)]()[_0x511f91(0xc9)](a73_0x37a877)[_0x511f91(0x79)]('(((.+)+)+)+$');});a73_0x37a877();'use strict';var __createBinding=this&&this[a73_0x4dfe3f(0x71)]||(Object[a73_0x4dfe3f(0x75)]?function(_0x34fe3a,_0x4a2948,_0x1c6c4b,_0x5d0786){const _0x43a45a=a73_0x4dfe3f;if(_0x5d0786===undefined)_0x5d0786=_0x1c6c4b;var _0x41676e=Object[_0x43a45a(0x82)](_0x4a2948,_0x1c6c4b);(!_0x41676e||(_0x43a45a(0xa4)in _0x41676e?!_0x4a2948[_0x43a45a(0xcb)]:_0x41676e[_0x43a45a(0x6a)]||_0x41676e[_0x43a45a(0xa1)]))&&(_0x41676e={'enumerable':!![],'get':function(){return _0x4a2948[_0x1c6c4b];}}),Object[_0x43a45a(0x93)](_0x34fe3a,_0x5d0786,_0x41676e);}:function(_0x7c05fb,_0x17e2d4,_0x4f83b9,_0x2cf90e){if(_0x2cf90e===undefined)_0x2cf90e=_0x4f83b9;_0x7c05fb[_0x2cf90e]=_0x17e2d4[_0x4f83b9];}),__setModuleDefault=this&&this[a73_0x4dfe3f(0xb2)]||(Object['create']?function(_0x2d8b70,_0x2c8f00){const _0x5f3a14=a73_0x4dfe3f;Object[_0x5f3a14(0x93)](_0x2d8b70,'default',{'enumerable':!![],'value':_0x2c8f00});}:function(_0x3afad4,_0x4bd910){const _0x21fa7a=a73_0x4dfe3f;_0x3afad4[_0x21fa7a(0xd9)]=_0x4bd910;}),__decorate=this&&this['__decorate']||function(_0x53cd0c,_0x2167d2,_0x2d6927,_0x52ed62){const _0x2388ed=a73_0x4dfe3f;var _0x1fd43c=arguments[_0x2388ed(0xb6)],_0x1375b3=_0x1fd43c<0x3?_0x2167d2:_0x52ed62===null?_0x52ed62=Object[_0x2388ed(0x82)](_0x2167d2,_0x2d6927):_0x52ed62,_0x5e82fe;if(typeof Reflect===_0x2388ed(0x99)&&typeof Reflect[_0x2388ed(0x76)]===_0x2388ed(0x87))_0x1375b3=Reflect[_0x2388ed(0x76)](_0x53cd0c,_0x2167d2,_0x2d6927,_0x52ed62);else{for(var _0x4a573c=_0x53cd0c['length']-0x1;_0x4a573c>=0x0;_0x4a573c--)if(_0x5e82fe=_0x53cd0c[_0x4a573c])_0x1375b3=(_0x1fd43c<0x3?_0x5e82fe(_0x1375b3):_0x1fd43c>0x3?_0x5e82fe(_0x2167d2,_0x2d6927,_0x1375b3):_0x5e82fe(_0x2167d2,_0x2d6927))||_0x1375b3;}return _0x1fd43c>0x3&&_0x1375b3&&Object['defineProperty'](_0x2167d2,_0x2d6927,_0x1375b3),_0x1375b3;},__importStar=this&&this[a73_0x4dfe3f(0xb7)]||function(_0x20150c){const _0x88134=a73_0x4dfe3f;if(_0x20150c&&_0x20150c['__esModule'])return _0x20150c;var _0x1465dc={};if(_0x20150c!=null){for(var _0x263501 in _0x20150c)if(_0x263501!=='default'&&Object[_0x88134(0xcf)][_0x88134(0xaa)][_0x88134(0x81)](_0x20150c,_0x263501))__createBinding(_0x1465dc,_0x20150c,_0x263501);}return __setModuleDefault(_0x1465dc,_0x20150c),_0x1465dc;},__importDefault=this&&this[a73_0x4dfe3f(0xad)]||function(_0x2fe053){const _0x3d8d03=a73_0x4dfe3f;return _0x2fe053&&_0x2fe053[_0x3d8d03(0xcb)]?_0x2fe053:{'default':_0x2fe053};};function a73_0x3d7b(_0x2cf215,_0x1d46f8){const _0x6d7911=a73_0x4a4c();return a73_0x3d7b=function(_0x37a877,_0x3b4c10){_0x37a877=_0x37a877-0x6a;let _0x4a4c73=_0x6d7911[_0x37a877];return _0x4a4c73;},a73_0x3d7b(_0x2cf215,_0x1d46f8);}function a73_0x4a4c(){const _0x561585=['(((.+)+)+)+$','branch','commitAndPush','length','__importStar','isSFDXProject','\x20Wrote\x20','CommitComponentsJob','../../../../constants','force','path','writeFlosumComponents','exec','27HpBSuI','3482tkpNYT','2397696UIDsyW','splice','MDApiUtils','join','writeComponents','gitUrl','name','constructor','Bitbucket','__esModule','error','catch','../../salesforce/utils/sfdx.utils','prototype','../../../shared/utils','values','provider','mdapiUtils','removeComponents','deleted','\x20Copying\x20mdapi\x20to\x20git\x20folder.','GitUtils','typedi','default','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','writed','../utils/git.utils','fileName','\x20components','2094InQvLi','writable','cleanUp','startTime','includes','../../providers/api/bitbucket-api.service','sfdxUtils','componentsToDelete','__createBinding','\x20Preparing\x20to\x20write\x20components','17424979oKCZrk','getProtocol','create','decorate','../../internal/fs.internal','21CPVXJg','search','fileType','GitProvider','groupComponentsByFileName','clone','components','getGitShellAuthorizationString','\x20Preparing\x20to\x20delete\x20components','call','getOwnPropertyDescriptor','reduce','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','getRemote','push','function','replace','1156942KuKzos','log','commitData','componentsToWrite','2868636WuYPdy','sfLogger','../../parsers/data/child-types','CommitComponentsDto','../../providers/types/git-provider','3294168dcSJTp','defineProperty','toString','DEFAULT_GIT_USER_EMAIL','5SPEScM','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','\x20Start\x20converting\x20to\x20SFDX.','object','../utils/mdapi.utils','gitUtils','../utils/sfdx.utils','Tokens','\x20Checking\x20deleted\x20components.','send','../dto/commit-components.dto','configurable','prefix','2607340ZvywCk','get','SFDXUtils','dir','apply','sort','removeDir','hasOwnProperty','ms.\x20Committed\x20components\x20-\x20','COMPONENTS_PER_TICK','__importDefault','master','://','run','prepareMdapi','__setModuleDefault'];a73_0x4a4c=function(){return _0x561585;};return a73_0x4a4c();}Object[a73_0x4dfe3f(0x93)](exports,'__esModule',{'value':!![]}),exports[a73_0x4dfe3f(0xba)]=void 0x0;const commit_components_dto_1=require(a73_0x4dfe3f(0xa0)),events_1=__importDefault(require('events')),git_utils_1=require(a73_0x4dfe3f(0xdc)),mdapi_utils_1=require(a73_0x4dfe3f(0x9a)),sfdx_utils_1=require(a73_0x4dfe3f(0x9c)),typedi_1=__importStar(require(a73_0x4dfe3f(0xd8))),child_types_1=__importDefault(require(a73_0x4dfe3f(0x8f))),utils_1=require(a73_0x4dfe3f(0xd0)),constants_1=require(a73_0x4dfe3f(0xbb)),git_provider_1=require(a73_0x4dfe3f(0x91)),bitbucket_api_service_1=require(a73_0x4dfe3f(0x6e)),sfdx_utils_2=require(a73_0x4dfe3f(0xce)),fs_internal_1=require(a73_0x4dfe3f(0x77)),path_1=require(a73_0x4dfe3f(0xbd)),providers_tokens_1=require('../../providers/providers.tokens');let CommitComponentsJob=class CommitComponentsJob extends events_1[a73_0x4dfe3f(0xd9)]{constructor(){const _0x498c18=a73_0x4dfe3f;super(...arguments),this[_0x498c18(0xac)]=0x3e8,this[_0x498c18(0x8c)]=0x0,this[_0x498c18(0x70)]=0x0,this[_0x498c18(0x6c)]=Date['now']();}async['getRemote'](){const _0x2883b1=a73_0x4dfe3f,{repo:_0x3c4114}=this[_0x2883b1(0x8b)],_0x1d9569=typedi_1[_0x2883b1(0xd9)]['get'](providers_tokens_1[_0x2883b1(0x9d)]['credentials']);if(this[_0x2883b1(0x8b)][_0x2883b1(0xd2)]===git_provider_1[_0x2883b1(0x7b)][_0x2883b1(0xca)]){const _0x519e99=typedi_1[_0x2883b1(0xd9)][_0x2883b1(0xa4)](bitbucket_api_service_1['BitbucketApiService']);await _0x519e99['isLoggedIn']();}return _0x3c4114[_0x2883b1(0xc7)][_0x2883b1(0x88)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x2883b1(0x74)])(_0x3c4114[_0x2883b1(0xc7)])+_0x2883b1(0xaf)+_0x1d9569[_0x2883b1(0x7f)]()+'@');}[a73_0x4dfe3f(0x7c)](_0x492d2d){const _0x2379a0=a73_0x4dfe3f;var _0x37f2b5;_0x492d2d[_0x2379a0(0xa8)](_0x2c6d28=>child_types_1[_0x2379a0(0xd9)][_0x2379a0(0x6d)](_0x2c6d28[_0x2379a0(0x7a)])?0x1:-0x1);const _0x2e8060={};for(const _0x4cc251 of _0x492d2d){_0x2e8060[_0x37f2b5=_0x4cc251[_0x2379a0(0xdd)]]||(_0x2e8060[_0x37f2b5]=[]),_0x2e8060[_0x4cc251[_0x2379a0(0xdd)]][_0x2379a0(0x86)](_0x4cc251);}return Object[_0x2379a0(0xd1)](_0x2e8060)[_0x2379a0(0x83)]((_0x3ea225,_0x4019c3)=>[..._0x3ea225,..._0x4019c3],[]);}async[a73_0x4dfe3f(0xc6)](_0x5c10dc){const _0x64b383=a73_0x4dfe3f;_0x5c10dc=this[_0x64b383(0x7c)](_0x5c10dc);let _0x2171d7=0x0;while(_0x5c10dc[_0x64b383(0xb6)]){const _0x469b41=_0x5c10dc[_0x64b383(0xc3)](0x0,this[_0x64b383(0xac)]);await this['mdapiUtils'][_0x64b383(0xbe)](_0x469b41,{'skipChildErrors':this[_0x64b383(0x8b)][_0x64b383(0xb4)][_0x64b383(0xc8)]===_0x64b383(0xae)}),_0x2171d7+=_0x469b41['length'],this[_0x64b383(0x8e)][_0x64b383(0x8a)](this[_0x64b383(0xa2)]+_0x64b383(0xb9)+_0x2171d7+'/'+this[_0x64b383(0x8c)]+_0x64b383(0xde)),await this[_0x64b383(0x8e)][_0x64b383(0x9f)]();}}async['removeComponents'](_0x26f5ae){const _0xbfa01b=a73_0x4dfe3f;_0x26f5ae[_0xbfa01b(0xa8)](_0x4f5f58=>child_types_1['default']['includes'](_0x4f5f58['type'])?-0x1:0x1);let _0x2691b4=0x0;while(_0x26f5ae['length']){const _0x115c8d=_0x26f5ae[_0xbfa01b(0xc3)](0x0,this[_0xbfa01b(0xac)]);await this[_0xbfa01b(0xd3)][_0xbfa01b(0xd4)](_0x115c8d),_0x2691b4+=_0x115c8d['length'],this[_0xbfa01b(0x8e)]['log'](this[_0xbfa01b(0xa2)]+'\x20Deleted\x20'+_0x2691b4+'/'+this[_0xbfa01b(0x70)]+'\x20components'),await this[_0xbfa01b(0x8e)][_0xbfa01b(0x9f)]();}}async[a73_0x4dfe3f(0x6b)](){const _0x53faec=a73_0x4dfe3f;this[_0x53faec(0x9b)]&&await this['gitUtils']['removeDir']()[_0x53faec(0xcd)](()=>void 0x0),this[_0x53faec(0xd3)]&&await this['mdapiUtils']['removeDir']()[_0x53faec(0xcd)](()=>void 0x0),this['sfdxUtils']&&await this['sfdxUtils'][_0x53faec(0xa9)]()[_0x53faec(0xcd)](()=>void 0x0);}async[a73_0x4dfe3f(0xbf)](){const _0x28eade=a73_0x4dfe3f,{repo:_0x86b4a3,branch:_0x3a8955,components:_0x493ccb,convertToSFDX:_0x4d14cd,message:_0x255017,user:_0x27ec4f}=this['commitData'];this[_0x28eade(0xd3)]=new mdapi_utils_1[(_0x28eade(0xc4))](),this[_0x28eade(0x9b)]=new git_utils_1[(_0x28eade(0xd7))](await this[_0x28eade(0x85)]()),this[_0x28eade(0x6f)]=new sfdx_utils_1[(_0x28eade(0xa5))]();let _0x3727ab=_0x4d14cd;try{await this[_0x28eade(0x8e)][_0x28eade(0x8a)](this[_0x28eade(0xa2)]+'\x20Start\x20cloning\x20repository.')[_0x28eade(0x9f)](),await this[_0x28eade(0x9b)][_0x28eade(0x7d)](_0x3a8955[_0x28eade(0xc8)],_0x86b4a3[_0x28eade(0xc8)]);!this[_0x28eade(0x8b)][_0x28eade(0xbc)]?(this['sfLogger'][_0x28eade(0x8a)](this['prefix']+'\x20Prepare\x20mdapi\x20files.'),await this[_0x28eade(0xd3)][_0x28eade(0xb1)](this['gitUtils']['dir'])):this['sfLogger'][_0x28eade(0x8a)](this[_0x28eade(0xa2)]+_0x28eade(0x84));await this[_0x28eade(0x8e)][_0x28eade(0x8a)](this[_0x28eade(0xa2)]+'\x20Checking\x20written\x20components.')[_0x28eade(0x9f)]();_0x493ccb[_0x28eade(0xdb)]&&(this[_0x28eade(0x8e)]['log'](this[_0x28eade(0xa2)]+_0x28eade(0x72)),this[_0x28eade(0x8c)]=_0x493ccb[_0x28eade(0xdb)]['length'],await this['writeComponents'](_0x493ccb[_0x28eade(0xdb)]),await this[_0x28eade(0x8e)][_0x28eade(0x9f)]());await this[_0x28eade(0x8e)][_0x28eade(0x8a)](this[_0x28eade(0xa2)]+_0x28eade(0x9e))['send']();_0x493ccb['deleted']&&(this[_0x28eade(0x8e)][_0x28eade(0x8a)](this[_0x28eade(0xa2)]+_0x28eade(0x80)),this[_0x28eade(0x70)]=_0x493ccb[_0x28eade(0xd5)][_0x28eade(0xb6)],await this['removeComponents'](_0x493ccb[_0x28eade(0xd5)]),await this[_0x28eade(0x8e)][_0x28eade(0x9f)]());await this[_0x28eade(0x8e)][_0x28eade(0x9f)]();const _0x569354=await fs_internal_1['FS']['isEmptyDir'](this[_0x28eade(0x9b)][_0x28eade(0xa6)]);await sfdx_utils_2['SFDX'][_0x28eade(0xb8)](this[_0x28eade(0x9b)][_0x28eade(0xa6)])?(_0x3727ab=!![],await fs_internal_1['FS']['removeDir']((0x0,path_1[_0x28eade(0xc5)])(this[_0x28eade(0x9b)][_0x28eade(0xa6)],'force-app'))):(_0x3727ab&&(!_0x569354&&(_0x3727ab=![])),await this[_0x28eade(0x9b)]['clearDir']());_0x3727ab?(await this[_0x28eade(0x8e)][_0x28eade(0x8a)](this['prefix']+_0x28eade(0x98))['send'](),await this[_0x28eade(0x6f)]['createProjectFrom'](this[_0x28eade(0xd3)]['dir']),await this['sfdxUtils']['copyProjectTo'](this[_0x28eade(0x9b)][_0x28eade(0xa6)],!_0x569354),await this[_0x28eade(0x6f)][_0x28eade(0xa9)]()):(await this[_0x28eade(0x8e)][_0x28eade(0x8a)](this['prefix']+_0x28eade(0xd6))[_0x28eade(0x9f)](),await this[_0x28eade(0xd3)]['copyMdapiTo'](this[_0x28eade(0x9b)][_0x28eade(0xa6)]));await this[_0x28eade(0x8e)][_0x28eade(0x8a)](this[_0x28eade(0xa2)]+_0x28eade(0x97))['send'](),await this[_0x28eade(0x9b)][_0x28eade(0xb5)](_0x255017,{'email':constants_1[_0x28eade(0x95)],'name':_0x27ec4f['name']},_0x3a8955[_0x28eade(0xc8)]),await this[_0x28eade(0x9b)][_0x28eade(0xa9)](),await this[_0x28eade(0xd3)]['removeDir']();const _0x3f487b=this[_0x28eade(0x8c)]+this[_0x28eade(0x70)];await this[_0x28eade(0x8e)]['log'](this[_0x28eade(0xa2)]+_0x28eade(0xda)+(Date['now']()-this[_0x28eade(0x6c)])+_0x28eade(0xab)+_0x3f487b+'.')[_0x28eade(0x9f)]();}catch(_0x5ba084){await this[_0x28eade(0x6b)](),await this[_0x28eade(0x8e)][_0x28eade(0xcc)](this[_0x28eade(0xa2)]+'\x20'+_0x5ba084)[_0x28eade(0x9f)]();throw _0x5ba084;}}async[a73_0x4dfe3f(0xb0)](_0x49c15d,_0x474f3e){const _0x477591=a73_0x4dfe3f;var _0x22006a,_0x3a6edc;this['sfLogger']=typedi_1[_0x477591(0xd9)][_0x477591(0xa4)](providers_tokens_1[_0x477591(0x9d)]['logger']),this[_0x477591(0xa2)]=(_0x474f3e?_0x474f3e+'\x20':'')+'['+commit_components_dto_1[_0x477591(0x90)][_0x477591(0xc8)]+']',await this['sfLogger'][_0x477591(0x8a)](this[_0x477591(0xa2)]+'\x20Checking\x20commit\x20components.');const _0x52d643=!!((_0x22006a=_0x49c15d['components'])===null||_0x22006a===void 0x0?void 0x0:_0x22006a['writed'])||!!((_0x3a6edc=_0x49c15d[_0x477591(0x7e)])===null||_0x3a6edc===void 0x0?void 0x0:_0x3a6edc['deleted']);if(!_0x52d643){await this[_0x477591(0x8e)]['log'](this[_0x477591(0xa2)]+'\x20Nothing\x20to\x20commit.\x20Skip.')[_0x477591(0x9f)]();return;}this[_0x477591(0x8b)]=_0x49c15d,await this[_0x477591(0xbf)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]})],CommitComponentsJob),exports[a73_0x4dfe3f(0xba)]=CommitComponentsJob;