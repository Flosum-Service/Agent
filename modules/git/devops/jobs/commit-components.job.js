const a73_0xabedc=a73_0x2b75;(function(_0x4a9c87,_0x396cdf){const _0x10c962=a73_0x2b75,_0x35e476=_0x4a9c87();while(!![]){try{const _0x10a04b=parseInt(_0x10c962(0x90))/0x1+-parseInt(_0x10c962(0xd1))/0x2*(-parseInt(_0x10c962(0x101))/0x3)+-parseInt(_0x10c962(0xa6))/0x4*(parseInt(_0x10c962(0xb9))/0x5)+parseInt(_0x10c962(0xd2))/0x6*(parseInt(_0x10c962(0xdc))/0x7)+parseInt(_0x10c962(0xf4))/0x8+-parseInt(_0x10c962(0x100))/0x9+parseInt(_0x10c962(0xac))/0xa;if(_0x10a04b===_0x396cdf)break;else _0x35e476['push'](_0x35e476['shift']());}catch(_0x25a3a5){_0x35e476['push'](_0x35e476['shift']());}}}(a73_0x3bd8,0x43f55));const a73_0x1a6e6e=(function(){let _0x22aa7e=!![];return function(_0x1fea59,_0x28073c){const _0x485d04=_0x22aa7e?function(){if(_0x28073c){const _0x48078a=_0x28073c['apply'](_0x1fea59,arguments);return _0x28073c=null,_0x48078a;}}:function(){};return _0x22aa7e=![],_0x485d04;};}()),a73_0x28564d=a73_0x1a6e6e(this,function(){const _0x16f04d=a73_0x2b75;return a73_0x28564d[_0x16f04d(0xa5)]()[_0x16f04d(0xe1)]('(((.+)+)+)+$')[_0x16f04d(0xa5)]()[_0x16f04d(0xb1)](a73_0x28564d)['search'](_0x16f04d(0xff));});a73_0x28564d();'use strict';function a73_0x2b75(_0x56c8cc,_0x4cef58){const _0x39e964=a73_0x3bd8();return a73_0x2b75=function(_0x28564d,_0x1a6e6e){_0x28564d=_0x28564d-0x8a;let _0x3bd8c0=_0x39e964[_0x28564d];return _0x3bd8c0;},a73_0x2b75(_0x56c8cc,_0x4cef58);}var __createBinding=this&&this[a73_0xabedc(0xfd)]||(Object[a73_0xabedc(0xf0)]?function(_0x47e182,_0x25c096,_0x17002c,_0x25790c){const _0x4e79ea=a73_0xabedc;if(_0x25790c===undefined)_0x25790c=_0x17002c;var _0x3a4998=Object[_0x4e79ea(0xef)](_0x25c096,_0x17002c);(!_0x3a4998||(_0x4e79ea(0xfe)in _0x3a4998?!_0x25c096[_0x4e79ea(0xc6)]:_0x3a4998[_0x4e79ea(0xda)]||_0x3a4998[_0x4e79ea(0xde)]))&&(_0x3a4998={'enumerable':!![],'get':function(){return _0x25c096[_0x17002c];}}),Object[_0x4e79ea(0x9b)](_0x47e182,_0x25790c,_0x3a4998);}:function(_0x3722d1,_0x54711d,_0x48f858,_0x4de723){if(_0x4de723===undefined)_0x4de723=_0x48f858;_0x3722d1[_0x4de723]=_0x54711d[_0x48f858];}),__setModuleDefault=this&&this[a73_0xabedc(0xf2)]||(Object[a73_0xabedc(0xf0)]?function(_0x198f18,_0x181d6d){const _0x6a0f91=a73_0xabedc;Object[_0x6a0f91(0x9b)](_0x198f18,_0x6a0f91(0xe0),{'enumerable':!![],'value':_0x181d6d});}:function(_0x1a71e3,_0x951b65){_0x1a71e3['default']=_0x951b65;}),__decorate=this&&this['__decorate']||function(_0x28a5a7,_0x4f3bc4,_0x5d1028,_0x19ee02){const _0x162143=a73_0xabedc;var _0x1ee71f=arguments[_0x162143(0x98)],_0x3b30e2=_0x1ee71f<0x3?_0x4f3bc4:_0x19ee02===null?_0x19ee02=Object[_0x162143(0xef)](_0x4f3bc4,_0x5d1028):_0x19ee02,_0x506c97;if(typeof Reflect===_0x162143(0xeb)&&typeof Reflect[_0x162143(0xcb)]===_0x162143(0xcf))_0x3b30e2=Reflect[_0x162143(0xcb)](_0x28a5a7,_0x4f3bc4,_0x5d1028,_0x19ee02);else{for(var _0x244521=_0x28a5a7[_0x162143(0x98)]-0x1;_0x244521>=0x0;_0x244521--)if(_0x506c97=_0x28a5a7[_0x244521])_0x3b30e2=(_0x1ee71f<0x3?_0x506c97(_0x3b30e2):_0x1ee71f>0x3?_0x506c97(_0x4f3bc4,_0x5d1028,_0x3b30e2):_0x506c97(_0x4f3bc4,_0x5d1028))||_0x3b30e2;}return _0x1ee71f>0x3&&_0x3b30e2&&Object[_0x162143(0x9b)](_0x4f3bc4,_0x5d1028,_0x3b30e2),_0x3b30e2;},__importStar=this&&this[a73_0xabedc(0x95)]||function(_0x4b8abe){const _0x4bf180=a73_0xabedc;if(_0x4b8abe&&_0x4b8abe[_0x4bf180(0xc6)])return _0x4b8abe;var _0x2106a9={};if(_0x4b8abe!=null){for(var _0x304d7e in _0x4b8abe)if(_0x304d7e!==_0x4bf180(0xe0)&&Object[_0x4bf180(0xc2)][_0x4bf180(0xdd)][_0x4bf180(0xe5)](_0x4b8abe,_0x304d7e))__createBinding(_0x2106a9,_0x4b8abe,_0x304d7e);}return __setModuleDefault(_0x2106a9,_0x4b8abe),_0x2106a9;},__importDefault=this&&this['__importDefault']||function(_0x18c773){const _0x1fe9df=a73_0xabedc;return _0x18c773&&_0x18c773[_0x1fe9df(0xc6)]?_0x18c773:{'default':_0x18c773};};Object[a73_0xabedc(0x9b)](exports,a73_0xabedc(0xc6),{'value':!![]}),exports[a73_0xabedc(0x91)]=void 0x0;const commit_components_dto_1=require(a73_0xabedc(0xc8)),events_1=__importDefault(require(a73_0xabedc(0x9c))),git_utils_1=require(a73_0xabedc(0xaa)),mdapi_utils_1=require(a73_0xabedc(0xa1)),sfdx_utils_1=require(a73_0xabedc(0xec)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a73_0xabedc(0xaf))),utils_1=require(a73_0xabedc(0xbb)),constants_1=require(a73_0xabedc(0xe8)),git_provider_1=require(a73_0xabedc(0xe2)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),sfdx_utils_2=require(a73_0xabedc(0xa2)),fs_internal_1=require(a73_0xabedc(0x8a)),path_1=require(a73_0xabedc(0x9d)),providers_tokens_1=require(a73_0xabedc(0xe9));let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(){const _0x4d66e6=a73_0xabedc;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this['componentsToWrite']=0x0,this[_0x4d66e6(0x9e)]=0x0,this[_0x4d66e6(0xc5)]=Date[_0x4d66e6(0xc3)]();}async[a73_0xabedc(0xfb)](){const _0x12f5f0=a73_0xabedc,{repo:_0xb1c5b2}=this['commitData'],_0x3e91a5=typedi_1[_0x12f5f0(0xe0)][_0x12f5f0(0xfe)](providers_tokens_1[_0x12f5f0(0xf1)][_0x12f5f0(0xf7)]);if(this[_0x12f5f0(0xc1)][_0x12f5f0(0x8b)]===git_provider_1[_0x12f5f0(0x8c)]['Bitbucket']){const _0x23ba06=typedi_1[_0x12f5f0(0xe0)][_0x12f5f0(0xfe)](bitbucket_api_service_1[_0x12f5f0(0x9f)]);await _0x23ba06[_0x12f5f0(0xdb)]();}return _0xb1c5b2[_0x12f5f0(0xf8)][_0x12f5f0(0xfc)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x12f5f0(0xb0)])(_0xb1c5b2[_0x12f5f0(0xf8)])+_0x12f5f0(0xb2)+_0x3e91a5[_0x12f5f0(0xb4)]()+'@');}[a73_0xabedc(0xd0)](_0x2640ec){const _0x7c867d=a73_0xabedc;var _0x539e26;_0x2640ec['sort'](_0x46a547=>child_types_1[_0x7c867d(0xe0)][_0x7c867d(0x103)](_0x46a547[_0x7c867d(0xbe)])?0x1:-0x1);const _0x2a3a6c={};for(const _0x105854 of _0x2640ec){_0x2a3a6c[_0x539e26=_0x105854[_0x7c867d(0xae)]]||(_0x2a3a6c[_0x539e26]=[]),_0x2a3a6c[_0x105854['fileName']][_0x7c867d(0xbf)](_0x105854);}return Object[_0x7c867d(0xc0)](_0x2a3a6c)[_0x7c867d(0xfa)]((_0x3eb65,_0x2810d2)=>[..._0x3eb65,..._0x2810d2],[]);}async[a73_0xabedc(0x93)](_0x176e66){const _0x51b619=a73_0xabedc;_0x176e66=this[_0x51b619(0xd0)](_0x176e66);let _0x2eaf97=0x0;while(_0x176e66[_0x51b619(0x98)]){const _0x9b03ab=_0x176e66['splice'](0x0,this[_0x51b619(0xed)]);await this[_0x51b619(0xa7)][_0x51b619(0xc4)](_0x9b03ab,{'skipChildErrors':this['commitData'][_0x51b619(0xf3)]['name']===_0x51b619(0xf5)}),_0x2eaf97+=_0x9b03ab['length'],this[_0x51b619(0xe7)][_0x51b619(0xba)](this['prefix']+_0x51b619(0xc7)+_0x2eaf97+'/'+this[_0x51b619(0xf9)]+_0x51b619(0xce)),await this[_0x51b619(0xe7)]['send']();}}async['removeComponents'](_0x4a169d){const _0x2b9829=a73_0xabedc;_0x4a169d[_0x2b9829(0xa8)](_0x4e7f79=>child_types_1[_0x2b9829(0xe0)]['includes'](_0x4e7f79['type'])?-0x1:0x1);let _0x47513a=0x0;while(_0x4a169d[_0x2b9829(0x98)]){const _0x57a848=_0x4a169d[_0x2b9829(0xd8)](0x0,this['COMPONENTS_PER_TICK']);await this['mdapiUtils']['removeComponents'](_0x57a848),_0x47513a+=_0x57a848[_0x2b9829(0x98)],this['sfLogger'][_0x2b9829(0xba)](this[_0x2b9829(0xbd)]+_0x2b9829(0xa0)+_0x47513a+'/'+this['componentsToDelete']+_0x2b9829(0xce)),await this[_0x2b9829(0xe7)]['send']();}}async[a73_0xabedc(0xb6)](){const _0x50c1c2=a73_0xabedc;this[_0x50c1c2(0xa4)]&&await this[_0x50c1c2(0xa4)][_0x50c1c2(0xcd)]()[_0x50c1c2(0x92)](()=>void 0x0),this[_0x50c1c2(0xa7)]&&await this[_0x50c1c2(0xa7)][_0x50c1c2(0xcd)]()['catch'](()=>void 0x0),this['sfdxUtils']&&await this['sfdxUtils']['removeDir']()[_0x50c1c2(0x92)](()=>void 0x0);}async[a73_0xabedc(0xd4)](){const _0x1a2b2f=a73_0xabedc,{repo:_0x5836cb,branch:_0x584853,components:_0x3de08d,convertToSFDX:_0x5d7eb0,message:_0x39fca1,user:_0x188423}=this['commitData'];this['mdapiUtils']=new mdapi_utils_1['MDApiUtils'](),this[_0x1a2b2f(0xa4)]=new git_utils_1['GitUtils'](await this[_0x1a2b2f(0xfb)]()),this[_0x1a2b2f(0xab)]=new sfdx_utils_1[(_0x1a2b2f(0xca))]();let _0x355fb0=_0x5d7eb0;try{await this[_0x1a2b2f(0xe7)]['log'](this[_0x1a2b2f(0xbd)]+'\x20Start\x20cloning\x20repository.')[_0x1a2b2f(0x97)](),await this[_0x1a2b2f(0xa4)][_0x1a2b2f(0xd3)](_0x584853['name'],_0x5836cb[_0x1a2b2f(0xdf)]);!this[_0x1a2b2f(0xc1)][_0x1a2b2f(0x9a)]?(this[_0x1a2b2f(0xe7)][_0x1a2b2f(0xba)](this[_0x1a2b2f(0xbd)]+_0x1a2b2f(0xf6)),await this[_0x1a2b2f(0xa7)][_0x1a2b2f(0xd6)](this[_0x1a2b2f(0xa4)][_0x1a2b2f(0xb8)])):this[_0x1a2b2f(0xe7)][_0x1a2b2f(0xba)](this['prefix']+_0x1a2b2f(0xcc));await this[_0x1a2b2f(0xe7)][_0x1a2b2f(0xba)](this[_0x1a2b2f(0xbd)]+_0x1a2b2f(0xe3))[_0x1a2b2f(0x97)]();_0x3de08d[_0x1a2b2f(0xb7)]&&(this[_0x1a2b2f(0xe7)]['log'](this[_0x1a2b2f(0xbd)]+'\x20Preparing\x20to\x20write\x20components'),this[_0x1a2b2f(0xf9)]=_0x3de08d[_0x1a2b2f(0xb7)][_0x1a2b2f(0x98)],await this[_0x1a2b2f(0x93)](_0x3de08d['writed']),await this[_0x1a2b2f(0xe7)][_0x1a2b2f(0x97)]());await this[_0x1a2b2f(0xe7)][_0x1a2b2f(0xba)](this[_0x1a2b2f(0xbd)]+'\x20Checking\x20deleted\x20components.')['send']();_0x3de08d[_0x1a2b2f(0x102)]&&(this[_0x1a2b2f(0xe7)][_0x1a2b2f(0xba)](this['prefix']+_0x1a2b2f(0xea)),this['componentsToDelete']=_0x3de08d[_0x1a2b2f(0x102)][_0x1a2b2f(0x98)],await this[_0x1a2b2f(0xee)](_0x3de08d[_0x1a2b2f(0x102)]),await this[_0x1a2b2f(0xe7)]['send']());await this[_0x1a2b2f(0xe7)][_0x1a2b2f(0x97)]();const _0x1b75fa=await fs_internal_1['FS']['isEmptyDir'](this[_0x1a2b2f(0xa4)][_0x1a2b2f(0xb8)]);await sfdx_utils_2[_0x1a2b2f(0x8e)][_0x1a2b2f(0x94)](this['gitUtils'][_0x1a2b2f(0xb8)])?(_0x355fb0=!![],await fs_internal_1['FS'][_0x1a2b2f(0xcd)]((0x0,path_1['join'])(this[_0x1a2b2f(0xa4)]['dir'],_0x1a2b2f(0x99)))):(_0x355fb0&&(!_0x1b75fa&&(_0x355fb0=![])),await this[_0x1a2b2f(0xa4)][_0x1a2b2f(0xe6)]());_0x355fb0?(await this[_0x1a2b2f(0xe7)][_0x1a2b2f(0xba)](this[_0x1a2b2f(0xbd)]+_0x1a2b2f(0xad))[_0x1a2b2f(0x97)](),await this[_0x1a2b2f(0xab)][_0x1a2b2f(0xb5)](this[_0x1a2b2f(0xa7)][_0x1a2b2f(0xb8)]),await this['sfdxUtils'][_0x1a2b2f(0xc9)](this[_0x1a2b2f(0xa4)]['dir'],!_0x1b75fa),await this[_0x1a2b2f(0xab)][_0x1a2b2f(0xcd)]()):(await this['sfLogger']['log'](this[_0x1a2b2f(0xbd)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')['send'](),await this[_0x1a2b2f(0xa7)][_0x1a2b2f(0xd5)](this[_0x1a2b2f(0xa4)][_0x1a2b2f(0xb8)]));await this['sfLogger'][_0x1a2b2f(0xba)](this[_0x1a2b2f(0xbd)]+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')[_0x1a2b2f(0x97)](),await this[_0x1a2b2f(0xa4)][_0x1a2b2f(0x8f)](_0x39fca1,{'email':constants_1[_0x1a2b2f(0xd7)],'name':_0x188423[_0x1a2b2f(0xdf)]},_0x584853[_0x1a2b2f(0xdf)]),await this[_0x1a2b2f(0xa4)]['removeDir'](),await this[_0x1a2b2f(0xa7)][_0x1a2b2f(0xcd)]();const _0x8d138f=this['componentsToWrite']+this['componentsToDelete'];await this['sfLogger'][_0x1a2b2f(0xba)](this[_0x1a2b2f(0xbd)]+_0x1a2b2f(0x96)+(Date[_0x1a2b2f(0xc3)]()-this['startTime'])+_0x1a2b2f(0xa3)+_0x8d138f+'.')[_0x1a2b2f(0x97)]();}catch(_0x44393d){await this[_0x1a2b2f(0xb6)](),await this[_0x1a2b2f(0xe7)]['error'](this[_0x1a2b2f(0xbd)]+'\x20'+_0x44393d)[_0x1a2b2f(0x97)]();throw _0x44393d;}}async[a73_0xabedc(0x8d)](_0x190e52,_0x44039a){const _0x13853c=a73_0xabedc;var _0x6960a2,_0x5e7608;this[_0x13853c(0xe7)]=typedi_1['default'][_0x13853c(0xfe)](providers_tokens_1[_0x13853c(0xf1)][_0x13853c(0xe4)]),this['prefix']=(_0x44039a?_0x44039a+'\x20':'')+'['+commit_components_dto_1[_0x13853c(0xb3)][_0x13853c(0xdf)]+']',await this[_0x13853c(0xe7)]['log'](this[_0x13853c(0xbd)]+'\x20Checking\x20commit\x20components.');const _0x2f4a87=!!((_0x6960a2=_0x190e52[_0x13853c(0xa9)])===null||_0x6960a2===void 0x0?void 0x0:_0x6960a2[_0x13853c(0xb7)])||!!((_0x5e7608=_0x190e52['components'])===null||_0x5e7608===void 0x0?void 0x0:_0x5e7608[_0x13853c(0x102)]);if(!_0x2f4a87){await this['sfLogger'][_0x13853c(0xba)](this[_0x13853c(0xbd)]+_0x13853c(0xd9))[_0x13853c(0x97)]();return;}this[_0x13853c(0xc1)]=_0x190e52,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a73_0xabedc(0xbc)])({'transient':!![]})],CommitComponentsJob),exports[a73_0xabedc(0x91)]=CommitComponentsJob;function a73_0x3bd8(){const _0x590d59=['componentsToDelete','BitbucketApiService','\x20Deleted\x20','../utils/mdapi.utils','../../salesforce/utils/sfdx.utils','ms.\x20Committed\x20components\x20-\x20','gitUtils','toString','942280zHspaX','mdapiUtils','sort','components','../utils/git.utils','sfdxUtils','1469280FyiaIl','\x20Start\x20converting\x20to\x20SFDX.','fileName','../../parsers/data/child-types','getProtocol','constructor','://','CommitComponentsDto','getGitShellAuthorizationString','createProjectFrom','cleanUp','writed','dir','10FGUSqj','log','../../../shared/utils','Service','prefix','fileType','push','values','commitData','prototype','now','writeFlosumComponents','startTime','__esModule','\x20Wrote\x20','../dto/commit-components.dto','copyProjectTo','SFDXUtils','decorate','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','removeDir','\x20components','function','groupComponentsByFileName','1484cPVenJ','2052wyDHOY','clone','exec','copyMdapiTo','prepareMdapi','DEFAULT_GIT_USER_EMAIL','splice','\x20Nothing\x20to\x20commit.\x20Skip.','writable','isLoggedIn','5971TUiYeA','hasOwnProperty','configurable','name','default','search','../../providers/types/git-provider','\x20Checking\x20written\x20components.','logger','call','clearDir','sfLogger','../../../../constants','../../providers/providers.tokens','\x20Preparing\x20to\x20delete\x20components','object','../utils/sfdx.utils','COMPONENTS_PER_TICK','removeComponents','getOwnPropertyDescriptor','create','Tokens','__setModuleDefault','branch','2757408TVnanm','master','\x20Prepare\x20mdapi\x20files.','credentials','gitUrl','componentsToWrite','reduce','getRemote','replace','__createBinding','get','(((.+)+)+)+$','1371429cLfXAi','327QWRaKw','deleted','includes','../../internal/fs.internal','provider','GitProvider','run','SFDX','commitAndPush','37670HioWqs','CommitComponentsJob','catch','writeComponents','isSFDXProject','__importStar','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','send','length','force-app','force','defineProperty','events','path'];a73_0x3bd8=function(){return _0x590d59;};return a73_0x3bd8();}