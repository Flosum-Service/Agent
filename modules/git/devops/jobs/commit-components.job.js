const a123_0x44451f=a123_0x7b93;function a123_0x270c(){const _0x4a3153=['__importStar','name','sort','force-app','typedi','__createBinding','push','../../providers/providers.tokens','copyProjectTo','provider','737452tPLzBK','../utils/sfdx.utils','apply','copySFDXIgnoredComponents','removeDir','2148183miUmdg','fileType','FORCE_APP_DEFAULT_DIR','Bitbucket','branch','\x20Nothing\x20to\x20commit.\x20Skip.','__decorate','SFDXUtils','search','Tokens','\x20components','getGitShellAuthorizationString','getProtocol','writeFlosumComponents','11752040pXkuUr','catch','../../salesforce/utils/sfdx.utils','copyMdapiTo','force','isSFDXProject','configurable','deleted','includes','reduce','CommitComponentsJob','dir','../dto/commit-components.dto','2241oWBGyj','SFDX','createProjectFrom','clone','__setModuleDefault','values','create','splice','../../providers/api/bitbucket-api.service','../../parsers/data/child-types','sfdxUtils','default','GitUtils','constructor','cleanUp','24wVgqKH','log','../utils/git.utils','recordType','gitUrl','path','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','__esModule','exec','1388862FIWLDE','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','replace','sfLogger','BitbucketApiService','now','credentials','21232035tHOLWb','writeComponents','\x20Preparing\x20to\x20write\x20components','\x20Preparing\x20to\x20delete\x20components','137403zgggnR','\x20Checking\x20deleted\x20components.','writed','removeComponents','getOwnPropertyDescriptor','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','send','fileName','get','DEFAULT_GIT_USER_EMAIL','../../../../constants','COMPONENTS_PER_TICK','GitProvider','mdapiUtils','logger','prepareMdapi','25BUxHrs','Service','events','groupComponentsByFileName','366iHcDBJ','function','components','gitUtils','componentsToDelete','commitAndPush','componentsToWrite','(((.+)+)+)+$','object','getRemote','defineProperty','writable','startTime','../utils/mdapi.utils','__importDefault','commitData','length','type','call','\x20Start\x20cloning\x20repository.','toString','2338YCpSuC','prefix'];a123_0x270c=function(){return _0x4a3153;};return a123_0x270c();}(function(_0x2e7844,_0x6eff19){const _0x1c56ad=a123_0x7b93,_0xb760ae=_0x2e7844();while(!![]){try{const _0x3bb2d3=parseInt(_0x1c56ad(0x15b))/0x1+-parseInt(_0x1c56ad(0x117))/0x2*(parseInt(_0x1c56ad(0x143))/0x3)+parseInt(_0x1c56ad(0x123))/0x4*(-parseInt(_0x1c56ad(0x176))/0x5)+parseInt(_0x1c56ad(0x17a))/0x6*(-parseInt(_0x1c56ad(0x166))/0x7)+parseInt(_0x1c56ad(0x152))/0x8*(-parseInt(_0x1c56ad(0x128))/0x9)+parseInt(_0x1c56ad(0x136))/0xa+parseInt(_0x1c56ad(0x162))/0xb;if(_0x3bb2d3===_0x6eff19)break;else _0xb760ae['push'](_0xb760ae['shift']());}catch(_0x4b7def){_0xb760ae['push'](_0xb760ae['shift']());}}}(a123_0x270c,0xbfd63));const a123_0x3b51af=(function(){let _0x5e3d2d=!![];return function(_0x363c0e,_0x593a1b){const _0xf46b45=_0x5e3d2d?function(){const _0x3cb06c=a123_0x7b93;if(_0x593a1b){const _0x55c992=_0x593a1b[_0x3cb06c(0x125)](_0x363c0e,arguments);return _0x593a1b=null,_0x55c992;}}:function(){};return _0x5e3d2d=![],_0xf46b45;};}()),a123_0x34914b=a123_0x3b51af(this,function(){const _0x52d1c7=a123_0x7b93;return a123_0x34914b[_0x52d1c7(0x116)]()[_0x52d1c7(0x130)](_0x52d1c7(0x109))[_0x52d1c7(0x116)]()[_0x52d1c7(0x150)](a123_0x34914b)[_0x52d1c7(0x130)](_0x52d1c7(0x109));});a123_0x34914b();'use strict';var __createBinding=this&&this[a123_0x44451f(0x11e)]||(Object[a123_0x44451f(0x149)]?function(_0x53bd6b,_0x5987b7,_0x36e2ca,_0x4ad542){const _0x400d8f=a123_0x44451f;if(_0x4ad542===undefined)_0x4ad542=_0x36e2ca;var _0x59ca1d=Object[_0x400d8f(0x16a)](_0x5987b7,_0x36e2ca);(!_0x59ca1d||(_0x400d8f(0x16e)in _0x59ca1d?!_0x5987b7[_0x400d8f(0x159)]:_0x59ca1d[_0x400d8f(0x10d)]||_0x59ca1d[_0x400d8f(0x13c)]))&&(_0x59ca1d={'enumerable':!![],'get':function(){return _0x5987b7[_0x36e2ca];}}),Object[_0x400d8f(0x10c)](_0x53bd6b,_0x4ad542,_0x59ca1d);}:function(_0x1eac31,_0x25539b,_0x318e6e,_0x59ae6b){if(_0x59ae6b===undefined)_0x59ae6b=_0x318e6e;_0x1eac31[_0x59ae6b]=_0x25539b[_0x318e6e];}),__setModuleDefault=this&&this[a123_0x44451f(0x147)]||(Object[a123_0x44451f(0x149)]?function(_0x2cfe39,_0x52d117){const _0x3e65d5=a123_0x44451f;Object['defineProperty'](_0x2cfe39,_0x3e65d5(0x14e),{'enumerable':!![],'value':_0x52d117});}:function(_0x41085d,_0x5ba309){const _0x38a317=a123_0x44451f;_0x41085d[_0x38a317(0x14e)]=_0x5ba309;}),__decorate=this&&this[a123_0x44451f(0x12e)]||function(_0x20e1a4,_0xa800a3,_0x5dca3e,_0x4edde9){const _0x31b091=a123_0x44451f;var _0x151fd4=arguments[_0x31b091(0x112)],_0x159015=_0x151fd4<0x3?_0xa800a3:_0x4edde9===null?_0x4edde9=Object[_0x31b091(0x16a)](_0xa800a3,_0x5dca3e):_0x4edde9,_0x27cbe0;if(typeof Reflect===_0x31b091(0x10a)&&typeof Reflect['decorate']===_0x31b091(0x17b))_0x159015=Reflect['decorate'](_0x20e1a4,_0xa800a3,_0x5dca3e,_0x4edde9);else{for(var _0x5e16ec=_0x20e1a4['length']-0x1;_0x5e16ec>=0x0;_0x5e16ec--)if(_0x27cbe0=_0x20e1a4[_0x5e16ec])_0x159015=(_0x151fd4<0x3?_0x27cbe0(_0x159015):_0x151fd4>0x3?_0x27cbe0(_0xa800a3,_0x5dca3e,_0x159015):_0x27cbe0(_0xa800a3,_0x5dca3e))||_0x159015;}return _0x151fd4>0x3&&_0x159015&&Object[_0x31b091(0x10c)](_0xa800a3,_0x5dca3e,_0x159015),_0x159015;},__importStar=this&&this[a123_0x44451f(0x119)]||function(_0x3af292){const _0x4472df=a123_0x44451f;if(_0x3af292&&_0x3af292[_0x4472df(0x159)])return _0x3af292;var _0x48bbff={};if(_0x3af292!=null){for(var _0xc438d6 in _0x3af292)if(_0xc438d6!==_0x4472df(0x14e)&&Object['prototype']['hasOwnProperty'][_0x4472df(0x114)](_0x3af292,_0xc438d6))__createBinding(_0x48bbff,_0x3af292,_0xc438d6);}return __setModuleDefault(_0x48bbff,_0x3af292),_0x48bbff;},__importDefault=this&&this[a123_0x44451f(0x110)]||function(_0x2dd42b){return _0x2dd42b&&_0x2dd42b['__esModule']?_0x2dd42b:{'default':_0x2dd42b};};Object[a123_0x44451f(0x10c)](exports,'__esModule',{'value':!![]}),exports[a123_0x44451f(0x140)]=void 0x0;const commit_components_dto_1=require(a123_0x44451f(0x142)),events_1=__importDefault(require(a123_0x44451f(0x178))),git_utils_1=require(a123_0x44451f(0x154)),mdapi_utils_1=require(a123_0x44451f(0x10f)),sfdx_utils_1=require(a123_0x44451f(0x124)),typedi_1=__importStar(require(a123_0x44451f(0x11d))),child_types_1=__importDefault(require(a123_0x44451f(0x14c))),utils_1=require('../../../shared/utils'),constants_1=require(a123_0x44451f(0x170)),git_provider_1=require('../../providers/types/git-provider'),bitbucket_api_service_1=require(a123_0x44451f(0x14b)),sfdx_utils_2=require(a123_0x44451f(0x138)),fs_internal_1=require('../../internal/fs.internal'),path_1=require(a123_0x44451f(0x157)),providers_tokens_1=require(a123_0x44451f(0x120)),constants_2=require('../../../../constants');function a123_0x7b93(_0x1a304c,_0x25bbfd){const _0x8bad6d=a123_0x270c();return a123_0x7b93=function(_0x34914b,_0x3b51af){_0x34914b=_0x34914b-0x106;let _0x270c20=_0x8bad6d[_0x34914b];return _0x270c20;},a123_0x7b93(_0x1a304c,_0x25bbfd);}let CommitComponentsJob=class CommitComponentsJob extends events_1[a123_0x44451f(0x14e)]{constructor(){const _0x13e4dd=a123_0x44451f;super(...arguments),this[_0x13e4dd(0x171)]=0x3e8,this[_0x13e4dd(0x108)]=0x0,this['componentsToDelete']=0x0,this['startTime']=Date[_0x13e4dd(0x160)]();}async[a123_0x44451f(0x10b)](){const _0x53f86f=a123_0x44451f,{repo:_0x3e7ceb}=this['commitData'],_0x5015fa=typedi_1['default'][_0x53f86f(0x16e)](providers_tokens_1[_0x53f86f(0x131)][_0x53f86f(0x161)]);if(this[_0x53f86f(0x111)][_0x53f86f(0x122)]===git_provider_1[_0x53f86f(0x172)][_0x53f86f(0x12b)]){const _0x13e583=typedi_1[_0x53f86f(0x14e)][_0x53f86f(0x16e)](bitbucket_api_service_1[_0x53f86f(0x15f)]);await _0x13e583['isLoggedIn']();}return _0x3e7ceb['gitUrl'][_0x53f86f(0x15d)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x53f86f(0x134)])(_0x3e7ceb[_0x53f86f(0x156)])+'://'+_0x5015fa[_0x53f86f(0x133)]()+'@');}[a123_0x44451f(0x179)](_0x2c6b88){const _0x4a4791=a123_0x44451f;var _0x51fd8a;_0x2c6b88[_0x4a4791(0x11b)](_0x1a6df7=>child_types_1[_0x4a4791(0x14e)][_0x4a4791(0x13e)](_0x1a6df7[_0x4a4791(0x129)])?0x1:-0x1);const _0x357002={};for(const _0x3b0cf7 of _0x2c6b88){_0x357002[_0x51fd8a=_0x3b0cf7['fileName']]||(_0x357002[_0x51fd8a]=[]),_0x357002[_0x3b0cf7[_0x4a4791(0x16d)]][_0x4a4791(0x11f)](_0x3b0cf7);}return Object[_0x4a4791(0x148)](_0x357002)[_0x4a4791(0x13f)]((_0x581752,_0x8c1815)=>[..._0x581752,..._0x8c1815],[]);}async[a123_0x44451f(0x163)](_0x13a4f6){const _0x16b745=a123_0x44451f;_0x13a4f6=this[_0x16b745(0x179)](_0x13a4f6);let _0x50abea=0x0;while(_0x13a4f6[_0x16b745(0x112)]){const _0x5a776c=_0x13a4f6[_0x16b745(0x14a)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x16b745(0x173)][_0x16b745(0x135)](_0x5a776c,{'skipChildErrors':this[_0x16b745(0x111)][_0x16b745(0x12c)][_0x16b745(0x11a)]==='master','recordType':this[_0x16b745(0x111)][_0x16b745(0x155)]}),_0x50abea+=_0x5a776c[_0x16b745(0x112)],this[_0x16b745(0x15e)][_0x16b745(0x153)](this[_0x16b745(0x118)]+'\x20Wrote\x20'+_0x50abea+'/'+this[_0x16b745(0x108)]+_0x16b745(0x132)),await this[_0x16b745(0x15e)]['send']();}}async[a123_0x44451f(0x169)](_0x4b9a5a){const _0x4dd1d6=a123_0x44451f;_0x4b9a5a['sort'](_0x1c192a=>child_types_1[_0x4dd1d6(0x14e)][_0x4dd1d6(0x13e)](_0x1c192a[_0x4dd1d6(0x113)])?-0x1:0x1);let _0x42d086=0x0;while(_0x4b9a5a[_0x4dd1d6(0x112)]){const _0x402534=_0x4b9a5a[_0x4dd1d6(0x14a)](0x0,this[_0x4dd1d6(0x171)]);await this['mdapiUtils'][_0x4dd1d6(0x169)](_0x402534,this[_0x4dd1d6(0x111)][_0x4dd1d6(0x155)]),_0x42d086+=_0x402534[_0x4dd1d6(0x112)],this[_0x4dd1d6(0x15e)]['log'](this['prefix']+'\x20Deleted\x20'+_0x42d086+'/'+this[_0x4dd1d6(0x106)]+_0x4dd1d6(0x132)),await this[_0x4dd1d6(0x15e)][_0x4dd1d6(0x16c)]();}}async[a123_0x44451f(0x151)](){const _0x4cbbf3=a123_0x44451f;this[_0x4cbbf3(0x17d)]&&await this[_0x4cbbf3(0x17d)][_0x4cbbf3(0x127)]()[_0x4cbbf3(0x137)](()=>void 0x0),this[_0x4cbbf3(0x173)]&&await this[_0x4cbbf3(0x173)][_0x4cbbf3(0x127)]()[_0x4cbbf3(0x137)](()=>void 0x0),this['sfdxUtils']&&await this[_0x4cbbf3(0x14d)][_0x4cbbf3(0x127)]()[_0x4cbbf3(0x137)](()=>void 0x0);}async[a123_0x44451f(0x15a)](){const _0x2c5e9d=a123_0x44451f,{repo:_0x560f0a,branch:_0x559a41,components:_0x385359,convertToSFDX:_0x444d36,message:_0x480177,user:_0x228471}=this['commitData'];this[_0x2c5e9d(0x173)]=new mdapi_utils_1['MDApiUtils'](),this[_0x2c5e9d(0x17d)]=new git_utils_1[(_0x2c5e9d(0x14f))](await this[_0x2c5e9d(0x10b)]()),this[_0x2c5e9d(0x14d)]=new sfdx_utils_1[(_0x2c5e9d(0x12f))]();let _0x211a25=_0x444d36&&this[_0x2c5e9d(0x14d)]['isConvertToSfdx'](this['commitData'][_0x2c5e9d(0x155)]);try{await this[_0x2c5e9d(0x15e)][_0x2c5e9d(0x153)](this[_0x2c5e9d(0x118)]+_0x2c5e9d(0x115))[_0x2c5e9d(0x16c)](),await this[_0x2c5e9d(0x17d)][_0x2c5e9d(0x146)](_0x559a41[_0x2c5e9d(0x11a)],_0x560f0a['name']);!this['commitData'][_0x2c5e9d(0x13a)]?(this[_0x2c5e9d(0x15e)][_0x2c5e9d(0x153)](this[_0x2c5e9d(0x118)]+'\x20Prepare\x20mdapi\x20files.'),await this[_0x2c5e9d(0x173)][_0x2c5e9d(0x175)](this[_0x2c5e9d(0x17d)][_0x2c5e9d(0x141)])):this[_0x2c5e9d(0x15e)][_0x2c5e9d(0x153)](this[_0x2c5e9d(0x118)]+_0x2c5e9d(0x16b));await this['sfLogger'][_0x2c5e9d(0x153)](this['prefix']+'\x20Checking\x20written\x20components.')[_0x2c5e9d(0x16c)]();_0x385359[_0x2c5e9d(0x168)]&&(this[_0x2c5e9d(0x15e)]['log'](this[_0x2c5e9d(0x118)]+_0x2c5e9d(0x164)),this[_0x2c5e9d(0x108)]=_0x385359[_0x2c5e9d(0x168)][_0x2c5e9d(0x112)],await this[_0x2c5e9d(0x163)](_0x385359[_0x2c5e9d(0x168)]),await this[_0x2c5e9d(0x15e)][_0x2c5e9d(0x16c)]());await this['sfLogger'][_0x2c5e9d(0x153)](this['prefix']+_0x2c5e9d(0x167))[_0x2c5e9d(0x16c)]();_0x385359['deleted']&&(this[_0x2c5e9d(0x15e)][_0x2c5e9d(0x153)](this[_0x2c5e9d(0x118)]+_0x2c5e9d(0x165)),this['componentsToDelete']=_0x385359[_0x2c5e9d(0x13d)]['length'],await this['removeComponents'](_0x385359['deleted']),await this[_0x2c5e9d(0x15e)]['send']());await this['sfLogger'][_0x2c5e9d(0x16c)]();const _0x23e441=await fs_internal_1['FS']['isEmptyDir'](this['gitUtils'][_0x2c5e9d(0x141)]);await sfdx_utils_2[_0x2c5e9d(0x144)][_0x2c5e9d(0x13b)](this[_0x2c5e9d(0x17d)]['dir'])?(_0x211a25=!![],await fs_internal_1['FS'][_0x2c5e9d(0x127)]((0x0,path_1['join'])(this['gitUtils']['dir'],_0x2c5e9d(0x11c)))):(_0x211a25&&(!_0x23e441&&(_0x211a25=![])),await this['gitUtils']['clearDir']());_0x211a25?(await this[_0x2c5e9d(0x15e)][_0x2c5e9d(0x153)](this[_0x2c5e9d(0x118)]+'\x20Start\x20converting\x20to\x20SFDX.')[_0x2c5e9d(0x16c)](),await this[_0x2c5e9d(0x14d)][_0x2c5e9d(0x145)](this[_0x2c5e9d(0x173)][_0x2c5e9d(0x141)]),await this[_0x2c5e9d(0x14d)][_0x2c5e9d(0x121)](this['gitUtils'][_0x2c5e9d(0x141)],!_0x23e441),await this[_0x2c5e9d(0x14d)][_0x2c5e9d(0x126)](this[_0x2c5e9d(0x173)][_0x2c5e9d(0x141)],(0x0,path_1['join'])(this['gitUtils']['dir'],constants_2[_0x2c5e9d(0x12a)])),await this[_0x2c5e9d(0x14d)][_0x2c5e9d(0x127)]()):(await this['sfLogger'][_0x2c5e9d(0x153)](this['prefix']+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x2c5e9d(0x16c)](),await this['mdapiUtils'][_0x2c5e9d(0x139)](this[_0x2c5e9d(0x17d)][_0x2c5e9d(0x141)]));await this[_0x2c5e9d(0x15e)][_0x2c5e9d(0x153)](this['prefix']+_0x2c5e9d(0x15c))[_0x2c5e9d(0x16c)](),await this[_0x2c5e9d(0x17d)][_0x2c5e9d(0x107)](_0x480177,{'email':constants_1[_0x2c5e9d(0x16f)],'name':_0x228471[_0x2c5e9d(0x11a)]},_0x559a41['name']),await this['gitUtils']['removeDir'](),await this[_0x2c5e9d(0x173)]['removeDir']();const _0x5ba43b=this[_0x2c5e9d(0x108)]+this[_0x2c5e9d(0x106)];await this[_0x2c5e9d(0x15e)][_0x2c5e9d(0x153)](this[_0x2c5e9d(0x118)]+_0x2c5e9d(0x158)+(Date['now']()-this[_0x2c5e9d(0x10e)])+'ms.\x20Committed\x20components\x20-\x20'+_0x5ba43b+'.')['send']();}catch(_0x5d9929){await this['cleanUp'](),await this['sfLogger']['error'](this['prefix']+'\x20'+_0x5d9929)[_0x2c5e9d(0x16c)]();throw _0x5d9929;}}async['run'](_0x14034f,_0x86772c){const _0x346555=a123_0x44451f;var _0x4b2f4c,_0x229c6a;this[_0x346555(0x15e)]=typedi_1['default'][_0x346555(0x16e)](providers_tokens_1['Tokens'][_0x346555(0x174)]),this['prefix']=(_0x86772c?_0x86772c+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x346555(0x11a)]+']',await this['sfLogger'][_0x346555(0x153)](this[_0x346555(0x118)]+'\x20Checking\x20commit\x20components.');const _0xad38=!!((_0x4b2f4c=_0x14034f[_0x346555(0x17c)])===null||_0x4b2f4c===void 0x0?void 0x0:_0x4b2f4c[_0x346555(0x168)])||!!((_0x229c6a=_0x14034f[_0x346555(0x17c)])===null||_0x229c6a===void 0x0?void 0x0:_0x229c6a[_0x346555(0x13d)]);if(!_0xad38){await this[_0x346555(0x15e)][_0x346555(0x153)](this[_0x346555(0x118)]+_0x346555(0x12d))[_0x346555(0x16c)]();return;}this[_0x346555(0x111)]=_0x14034f,await this[_0x346555(0x15a)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a123_0x44451f(0x177)])({'transient':!![]})],CommitComponentsJob),exports[a123_0x44451f(0x140)]=CommitComponentsJob;