const a123_0x78b9fe=a123_0x40b8;(function(_0x528b96,_0x16e7d7){const _0x512e1d=a123_0x40b8,_0x307870=_0x528b96();while(!![]){try{const _0x1119af=-parseInt(_0x512e1d(0x100))/0x1*(-parseInt(_0x512e1d(0x120))/0x2)+-parseInt(_0x512e1d(0x109))/0x3+parseInt(_0x512e1d(0xf4))/0x4+parseInt(_0x512e1d(0x121))/0x5+-parseInt(_0x512e1d(0x13f))/0x6*(parseInt(_0x512e1d(0x110))/0x7)+-parseInt(_0x512e1d(0x160))/0x8*(-parseInt(_0x512e1d(0x10f))/0x9)+parseInt(_0x512e1d(0x13a))/0xa*(-parseInt(_0x512e1d(0x107))/0xb);if(_0x1119af===_0x16e7d7)break;else _0x307870['push'](_0x307870['shift']());}catch(_0x5a7315){_0x307870['push'](_0x307870['shift']());}}}(a123_0x5c35,0x6c17c));const a123_0x5b3736=(function(){let _0x49986f=!![];return function(_0x73ee7c,_0x1b062f){const _0x449ec3=_0x49986f?function(){if(_0x1b062f){const _0x471932=_0x1b062f['apply'](_0x73ee7c,arguments);return _0x1b062f=null,_0x471932;}}:function(){};return _0x49986f=![],_0x449ec3;};}()),a123_0x53dde7=a123_0x5b3736(this,function(){const _0x142d68=a123_0x40b8;return a123_0x53dde7['toString']()[_0x142d68(0x11b)]('(((.+)+)+)+$')['toString']()['constructor'](a123_0x53dde7)[_0x142d68(0x11b)](_0x142d68(0x149));});a123_0x53dde7();function a123_0x5c35(){const _0x575cf8=['writed','search','prepareMdapi','GitUtils','object','mdapiUtils','1142446vXbKdg','2262260uzaWpI','run','../../../../constants','writeComponents','removeComponents','\x20Checking\x20deleted\x20components.','decorate','sort','call','\x20Wrote\x20','path','isConvertToSfdx','\x20Checking\x20commit\x20components.','copySFDXIgnoredComponents','components','componentsToWrite','splice','get','join','log','prefix','dir','../../salesforce/utils/sfdx.utils','defineProperty','gitUtils','610vCHSmx','configurable','../../../shared/utils','values','\x20Start\x20cloning\x20repository.','6qTASOJ','FORCE_APP_DEFAULT_DIR','../../providers/api/bitbucket-api.service','BitbucketApiService','deleted','__importDefault','DEFAULT_GIT_USER_EMAIL','commitData','isSFDXProject','writable','(((.+)+)+)+$','getGitShellAuthorizationString','name','SFDX','\x20Prepare\x20mdapi\x20files.','SFDXUtils','removeDir','copyProjectTo','force','fileName','events','send','hasOwnProperty','\x20Nothing\x20to\x20commit.\x20Skip.','now','create','cleanUp','__createBinding','MDApiUtils','Bitbucket','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','../../parsers/data/child-types','prototype','270424jvjJuD','componentsToDelete','groupComponentsByFileName','../utils/git.utils','push','length','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','\x20Deleted\x20','isEmptyDir','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','105184mklPyw','../utils/mdapi.utils','ms.\x20Committed\x20components\x20-\x20','__decorate','credentials','includes','master','force-app','commitAndPush','../../providers/types/git-provider','replace','gitUrl','1iOhOZf','default','type','createProjectFrom','CommitComponentsJob','logger','../../internal/fs.internal','27731OIBFkW','exec','1076019EfhsFz','typedi','\x20components','recordType','startTime','getRemote','27ulEiZt','1373246wvzIGG','catch','__esModule','isLoggedIn','GitProvider','COMPONENTS_PER_TICK','Service','sfdxUtils','sfLogger','writeFlosumComponents'];a123_0x5c35=function(){return _0x575cf8;};return a123_0x5c35();}'use strict';var __createBinding=this&&this[a123_0x78b9fe(0x15a)]||(Object[a123_0x78b9fe(0x158)]?function(_0x4947b8,_0x544c39,_0x533980,_0x3440e8){const _0x6cebd4=a123_0x78b9fe;if(_0x3440e8===undefined)_0x3440e8=_0x533980;var _0x5be0e6=Object['getOwnPropertyDescriptor'](_0x544c39,_0x533980);(!_0x5be0e6||(_0x6cebd4(0x132)in _0x5be0e6?!_0x544c39[_0x6cebd4(0x112)]:_0x5be0e6[_0x6cebd4(0x148)]||_0x5be0e6[_0x6cebd4(0x13b)]))&&(_0x5be0e6={'enumerable':!![],'get':function(){return _0x544c39[_0x533980];}}),Object[_0x6cebd4(0x138)](_0x4947b8,_0x3440e8,_0x5be0e6);}:function(_0x295dd5,_0x518d00,_0x1236ae,_0x4a05a7){if(_0x4a05a7===undefined)_0x4a05a7=_0x1236ae;_0x295dd5[_0x4a05a7]=_0x518d00[_0x1236ae];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a123_0x78b9fe(0x158)]?function(_0x5bfb5d,_0x552cdc){Object['defineProperty'](_0x5bfb5d,'default',{'enumerable':!![],'value':_0x552cdc});}:function(_0x430c7b,_0xd32ec0){_0x430c7b['default']=_0xd32ec0;}),__decorate=this&&this[a123_0x78b9fe(0xf7)]||function(_0x4e4a78,_0x793543,_0x5efaea,_0x41c260){const _0x83a40c=a123_0x78b9fe;var _0x161d24=arguments[_0x83a40c(0x165)],_0x2b8b96=_0x161d24<0x3?_0x793543:_0x41c260===null?_0x41c260=Object['getOwnPropertyDescriptor'](_0x793543,_0x5efaea):_0x41c260,_0xb87281;if(typeof Reflect===_0x83a40c(0x11e)&&typeof Reflect[_0x83a40c(0x127)]==='function')_0x2b8b96=Reflect[_0x83a40c(0x127)](_0x4e4a78,_0x793543,_0x5efaea,_0x41c260);else{for(var _0xa7b1df=_0x4e4a78['length']-0x1;_0xa7b1df>=0x0;_0xa7b1df--)if(_0xb87281=_0x4e4a78[_0xa7b1df])_0x2b8b96=(_0x161d24<0x3?_0xb87281(_0x2b8b96):_0x161d24>0x3?_0xb87281(_0x793543,_0x5efaea,_0x2b8b96):_0xb87281(_0x793543,_0x5efaea))||_0x2b8b96;}return _0x161d24>0x3&&_0x2b8b96&&Object['defineProperty'](_0x793543,_0x5efaea,_0x2b8b96),_0x2b8b96;},__importStar=this&&this['__importStar']||function(_0x59f926){const _0x21361b=a123_0x78b9fe;if(_0x59f926&&_0x59f926['__esModule'])return _0x59f926;var _0x5d784c={};if(_0x59f926!=null){for(var _0x2a3ebe in _0x59f926)if(_0x2a3ebe!==_0x21361b(0x101)&&Object[_0x21361b(0x15f)][_0x21361b(0x155)][_0x21361b(0x129)](_0x59f926,_0x2a3ebe))__createBinding(_0x5d784c,_0x59f926,_0x2a3ebe);}return __setModuleDefault(_0x5d784c,_0x59f926),_0x5d784c;},__importDefault=this&&this[a123_0x78b9fe(0x144)]||function(_0x8baa49){const _0x3771d2=a123_0x78b9fe;return _0x8baa49&&_0x8baa49[_0x3771d2(0x112)]?_0x8baa49:{'default':_0x8baa49};};function a123_0x40b8(_0x2db1e5,_0x29bb48){const _0x4dc683=a123_0x5c35();return a123_0x40b8=function(_0x53dde7,_0x5b3736){_0x53dde7=_0x53dde7-0xf3;let _0x5c3593=_0x4dc683[_0x53dde7];return _0x5c3593;},a123_0x40b8(_0x2db1e5,_0x29bb48);}Object[a123_0x78b9fe(0x138)](exports,a123_0x78b9fe(0x112),{'value':!![]}),exports[a123_0x78b9fe(0x104)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a123_0x78b9fe(0x153))),git_utils_1=require(a123_0x78b9fe(0x163)),mdapi_utils_1=require(a123_0x78b9fe(0xf5)),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require(a123_0x78b9fe(0x10a))),child_types_1=__importDefault(require(a123_0x78b9fe(0x15e))),utils_1=require(a123_0x78b9fe(0x13c)),constants_1=require('../../../../constants'),git_provider_1=require(a123_0x78b9fe(0xfd)),bitbucket_api_service_1=require(a123_0x78b9fe(0x141)),sfdx_utils_2=require(a123_0x78b9fe(0x137)),fs_internal_1=require(a123_0x78b9fe(0x106)),path_1=require(a123_0x78b9fe(0x12b)),providers_tokens_1=require('../../providers/providers.tokens'),constants_2=require(a123_0x78b9fe(0x123));let CommitComponentsJob=class CommitComponentsJob extends events_1[a123_0x78b9fe(0x101)]{constructor(){const _0x43c06f=a123_0x78b9fe;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this[_0x43c06f(0x130)]=0x0,this[_0x43c06f(0x161)]=0x0,this[_0x43c06f(0x10d)]=Date[_0x43c06f(0x157)]();}async[a123_0x78b9fe(0x10e)](){const _0x51aedf=a123_0x78b9fe,{repo:_0x11776e}=this[_0x51aedf(0x146)],_0x32f91c=typedi_1[_0x51aedf(0x101)][_0x51aedf(0x132)](providers_tokens_1['Tokens'][_0x51aedf(0xf8)]);if(this[_0x51aedf(0x146)]['provider']===git_provider_1[_0x51aedf(0x114)][_0x51aedf(0x15c)]){const _0x27b92a=typedi_1[_0x51aedf(0x101)][_0x51aedf(0x132)](bitbucket_api_service_1[_0x51aedf(0x142)]);await _0x27b92a[_0x51aedf(0x113)]();}return _0x11776e[_0x51aedf(0xff)][_0x51aedf(0xfe)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x11776e[_0x51aedf(0xff)])+'://'+_0x32f91c[_0x51aedf(0x14a)]()+'@');}[a123_0x78b9fe(0x162)](_0x464096){const _0x4f5894=a123_0x78b9fe;var _0x38d89e;_0x464096[_0x4f5894(0x128)](_0x24a819=>child_types_1[_0x4f5894(0x101)][_0x4f5894(0xf9)](_0x24a819['fileType'])?0x1:-0x1);const _0x2402b5={};for(const _0x319c30 of _0x464096){_0x2402b5[_0x38d89e=_0x319c30[_0x4f5894(0x152)]]||(_0x2402b5[_0x38d89e]=[]),_0x2402b5[_0x319c30['fileName']][_0x4f5894(0x164)](_0x319c30);}return Object[_0x4f5894(0x13d)](_0x2402b5)['reduce']((_0xcfddd3,_0x25db18)=>[..._0xcfddd3,..._0x25db18],[]);}async[a123_0x78b9fe(0x124)](_0x4800fa){const _0x30cdcc=a123_0x78b9fe;_0x4800fa=this['groupComponentsByFileName'](_0x4800fa);let _0x3c4506=0x0;while(_0x4800fa[_0x30cdcc(0x165)]){const _0x346c54=_0x4800fa[_0x30cdcc(0x131)](0x0,this[_0x30cdcc(0x115)]);await this['mdapiUtils'][_0x30cdcc(0x119)](_0x346c54,{'skipChildErrors':this[_0x30cdcc(0x146)]['branch'][_0x30cdcc(0x14b)]===_0x30cdcc(0xfa),'recordType':this[_0x30cdcc(0x146)]['recordType']}),_0x3c4506+=_0x346c54['length'],this[_0x30cdcc(0x118)][_0x30cdcc(0x134)](this['prefix']+_0x30cdcc(0x12a)+_0x3c4506+'/'+this['componentsToWrite']+_0x30cdcc(0x10b)),await this[_0x30cdcc(0x118)]['send']();}}async[a123_0x78b9fe(0x125)](_0x55a000){const _0x2fdc04=a123_0x78b9fe;_0x55a000[_0x2fdc04(0x128)](_0x3471e7=>child_types_1['default'][_0x2fdc04(0xf9)](_0x3471e7[_0x2fdc04(0x102)])?-0x1:0x1);let _0x350da6=0x0;while(_0x55a000[_0x2fdc04(0x165)]){const _0x9c0c95=_0x55a000['splice'](0x0,this['COMPONENTS_PER_TICK']);await this[_0x2fdc04(0x11f)][_0x2fdc04(0x125)](_0x9c0c95,this[_0x2fdc04(0x146)][_0x2fdc04(0x10c)]),_0x350da6+=_0x9c0c95[_0x2fdc04(0x165)],this[_0x2fdc04(0x118)]['log'](this[_0x2fdc04(0x135)]+_0x2fdc04(0x167)+_0x350da6+'/'+this[_0x2fdc04(0x161)]+_0x2fdc04(0x10b)),await this[_0x2fdc04(0x118)][_0x2fdc04(0x154)]();}}async[a123_0x78b9fe(0x159)](){const _0x5c0d6c=a123_0x78b9fe;this['gitUtils']&&await this[_0x5c0d6c(0x139)][_0x5c0d6c(0x14f)]()[_0x5c0d6c(0x111)](()=>void 0x0),this[_0x5c0d6c(0x11f)]&&await this[_0x5c0d6c(0x11f)][_0x5c0d6c(0x14f)]()[_0x5c0d6c(0x111)](()=>void 0x0),this[_0x5c0d6c(0x117)]&&await this['sfdxUtils'][_0x5c0d6c(0x14f)]()[_0x5c0d6c(0x111)](()=>void 0x0);}async[a123_0x78b9fe(0x108)](){const _0x383cda=a123_0x78b9fe,{repo:_0x3df990,branch:_0x35af37,components:_0x304f41,convertToSFDX:_0x58004c,message:_0x1b32d5,user:_0x35fbdc}=this[_0x383cda(0x146)];this[_0x383cda(0x11f)]=new mdapi_utils_1[(_0x383cda(0x15b))](),this[_0x383cda(0x139)]=new git_utils_1[(_0x383cda(0x11d))](await this[_0x383cda(0x10e)]()),this[_0x383cda(0x117)]=new sfdx_utils_1[(_0x383cda(0x14e))]();let _0x1b2503=_0x58004c&&this[_0x383cda(0x117)][_0x383cda(0x12c)](this[_0x383cda(0x146)]['recordType']);try{await this[_0x383cda(0x118)][_0x383cda(0x134)](this[_0x383cda(0x135)]+_0x383cda(0x13e))[_0x383cda(0x154)](),await this[_0x383cda(0x139)]['clone'](_0x35af37[_0x383cda(0x14b)],_0x3df990[_0x383cda(0x14b)]);!this[_0x383cda(0x146)][_0x383cda(0x151)]?(this[_0x383cda(0x118)][_0x383cda(0x134)](this[_0x383cda(0x135)]+_0x383cda(0x14d)),await this[_0x383cda(0x11f)][_0x383cda(0x11c)](this[_0x383cda(0x139)]['dir'])):this[_0x383cda(0x118)][_0x383cda(0x134)](this[_0x383cda(0x135)]+_0x383cda(0xf3));await this[_0x383cda(0x118)][_0x383cda(0x134)](this[_0x383cda(0x135)]+'\x20Checking\x20written\x20components.')[_0x383cda(0x154)]();_0x304f41[_0x383cda(0x11a)]&&(this[_0x383cda(0x118)][_0x383cda(0x134)](this['prefix']+'\x20Preparing\x20to\x20write\x20components'),this['componentsToWrite']=_0x304f41[_0x383cda(0x11a)]['length'],await this[_0x383cda(0x124)](_0x304f41[_0x383cda(0x11a)]),await this[_0x383cda(0x118)][_0x383cda(0x154)]());await this[_0x383cda(0x118)][_0x383cda(0x134)](this[_0x383cda(0x135)]+_0x383cda(0x126))[_0x383cda(0x154)]();_0x304f41[_0x383cda(0x143)]&&(this['sfLogger'][_0x383cda(0x134)](this[_0x383cda(0x135)]+'\x20Preparing\x20to\x20delete\x20components'),this['componentsToDelete']=_0x304f41[_0x383cda(0x143)][_0x383cda(0x165)],await this[_0x383cda(0x125)](_0x304f41['deleted']),await this['sfLogger'][_0x383cda(0x154)]());await this[_0x383cda(0x118)][_0x383cda(0x154)]();const _0x52ed70=await fs_internal_1['FS'][_0x383cda(0x168)](this[_0x383cda(0x139)][_0x383cda(0x136)]);await sfdx_utils_2[_0x383cda(0x14c)][_0x383cda(0x147)](this[_0x383cda(0x139)][_0x383cda(0x136)])?(_0x1b2503=!![],await fs_internal_1['FS'][_0x383cda(0x14f)]((0x0,path_1[_0x383cda(0x133)])(this[_0x383cda(0x139)][_0x383cda(0x136)],_0x383cda(0xfb)))):(_0x1b2503&&(!_0x52ed70&&(_0x1b2503=![])),await this[_0x383cda(0x139)]['clearDir']());_0x1b2503?(await this[_0x383cda(0x118)][_0x383cda(0x134)](this[_0x383cda(0x135)]+'\x20Start\x20converting\x20to\x20SFDX.')[_0x383cda(0x154)](),await this[_0x383cda(0x117)][_0x383cda(0x103)](this[_0x383cda(0x11f)][_0x383cda(0x136)]),await this[_0x383cda(0x117)][_0x383cda(0x150)](this[_0x383cda(0x139)][_0x383cda(0x136)],!_0x52ed70),await this[_0x383cda(0x117)][_0x383cda(0x12e)](this['mdapiUtils'][_0x383cda(0x136)],(0x0,path_1[_0x383cda(0x133)])(this['gitUtils'][_0x383cda(0x136)],constants_2[_0x383cda(0x140)])),await this[_0x383cda(0x117)][_0x383cda(0x14f)]()):(await this[_0x383cda(0x118)][_0x383cda(0x134)](this[_0x383cda(0x135)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x383cda(0x154)](),await this['mdapiUtils']['copyMdapiTo'](this[_0x383cda(0x139)][_0x383cda(0x136)]));await this['sfLogger'][_0x383cda(0x134)](this[_0x383cda(0x135)]+_0x383cda(0x166))[_0x383cda(0x154)](),await this['gitUtils'][_0x383cda(0xfc)](_0x1b32d5,{'email':constants_1[_0x383cda(0x145)],'name':_0x35fbdc['name']},_0x35af37[_0x383cda(0x14b)]),await this[_0x383cda(0x139)]['removeDir'](),await this['mdapiUtils']['removeDir']();const _0x170f8c=this[_0x383cda(0x130)]+this['componentsToDelete'];await this[_0x383cda(0x118)][_0x383cda(0x134)](this[_0x383cda(0x135)]+_0x383cda(0x15d)+(Date[_0x383cda(0x157)]()-this['startTime'])+_0x383cda(0xf6)+_0x170f8c+'.')[_0x383cda(0x154)]();}catch(_0x3dd1c7){await this[_0x383cda(0x159)](),await this['sfLogger']['error'](this[_0x383cda(0x135)]+'\x20'+_0x3dd1c7)[_0x383cda(0x154)]();throw _0x3dd1c7;}}async[a123_0x78b9fe(0x122)](_0x16804f,_0x1b8c15){const _0xd5bd3b=a123_0x78b9fe;var _0x3453e7,_0xaac3b3;this[_0xd5bd3b(0x118)]=typedi_1[_0xd5bd3b(0x101)][_0xd5bd3b(0x132)](providers_tokens_1['Tokens'][_0xd5bd3b(0x105)]),this[_0xd5bd3b(0x135)]=(_0x1b8c15?_0x1b8c15+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0xd5bd3b(0x14b)]+']',await this[_0xd5bd3b(0x118)][_0xd5bd3b(0x134)](this[_0xd5bd3b(0x135)]+_0xd5bd3b(0x12d));const _0x7f0afe=!!((_0x3453e7=_0x16804f['components'])===null||_0x3453e7===void 0x0?void 0x0:_0x3453e7[_0xd5bd3b(0x11a)])||!!((_0xaac3b3=_0x16804f[_0xd5bd3b(0x12f)])===null||_0xaac3b3===void 0x0?void 0x0:_0xaac3b3[_0xd5bd3b(0x143)]);if(!_0x7f0afe){await this[_0xd5bd3b(0x118)][_0xd5bd3b(0x134)](this[_0xd5bd3b(0x135)]+_0xd5bd3b(0x156))['send']();return;}this[_0xd5bd3b(0x146)]=_0x16804f,await this[_0xd5bd3b(0x108)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a123_0x78b9fe(0x116)])({'transient':!![]})],CommitComponentsJob),exports[a123_0x78b9fe(0x104)]=CommitComponentsJob;