function a60_0x5e0b(_0x45badd,_0x4bc369){const _0x91e294=a60_0x1b36();return a60_0x5e0b=function(_0x422461,_0x164acb){_0x422461=_0x422461-0x1e9;let _0x1b365b=_0x91e294[_0x422461];return _0x1b365b;},a60_0x5e0b(_0x45badd,_0x4bc369);}const a60_0x54922a=a60_0x5e0b;(function(_0x41c608,_0x102a9d){const _0x21ac0a=a60_0x5e0b,_0x2e84b5=_0x41c608();while(!![]){try{const _0x21adde=parseInt(_0x21ac0a(0x203))/0x1+parseInt(_0x21ac0a(0x259))/0x2*(-parseInt(_0x21ac0a(0x24a))/0x3)+parseInt(_0x21ac0a(0x253))/0x4+parseInt(_0x21ac0a(0x242))/0x5*(parseInt(_0x21ac0a(0x1fb))/0x6)+parseInt(_0x21ac0a(0x229))/0x7*(parseInt(_0x21ac0a(0x235))/0x8)+-parseInt(_0x21ac0a(0x25c))/0x9+-parseInt(_0x21ac0a(0x241))/0xa*(parseInt(_0x21ac0a(0x201))/0xb);if(_0x21adde===_0x102a9d)break;else _0x2e84b5['push'](_0x2e84b5['shift']());}catch(_0x3cc48d){_0x2e84b5['push'](_0x2e84b5['shift']());}}}(a60_0x1b36,0x4640d));function a60_0x1b36(){const _0x57b328=['push','\x20Checking\x20written\x20components.','commitData','componentsToWrite','function','cleanUp','create','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','2980920SmdLuH','5kGeQWl','fileName','force-app','startTime','\x20Preparing\x20to\x20write\x20components','prepareMdapi','clearDir','gitUtils','1000143bFTAab','../dto/commit-components.dto','prototype','__decorate','decorate','apply','\x20Checking\x20commit\x20components.','provider','getOwnPropertyDescriptor','2230684hKoRCi','BitbucketApiService','isSFDXProject','error','../../providers/providers.tokens','componentsToDelete','2kpjyIG','groupComponentsByFileName','__setModuleDefault','2814822jBkwAD','join','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','catch','DEFAULT_GIT_USER_EMAIL','Tokens','includes','CommitComponentsDto','://','\x20Deleted\x20','events','copyProjectTo','sort','run','../utils/mdapi.utils','SFDXUtils','exec','\x20Start\x20converting\x20to\x20SFDX.','\x20Nothing\x20to\x20commit.\x20Skip.','\x20Copying\x20mdapi\x20to\x20git\x20folder.','2956854Qtsevs','(((.+)+)+)+$','__esModule','name','\x20components','COMPONENTS_PER_TICK','22kEAUlk','../../internal/fs.internal','161740zvFKbI','prefix','components','call','GitUtils','search','getGitShellAuthorizationString','writed','../../salesforce/utils/sfdx.utils','toString','credentials','removeDir','defineProperty','../../providers/types/git-provider','sfdxUtils','now','\x20Prepare\x20mdapi\x20files.','object','isLoggedIn','ms.\x20Committed\x20components\x20-\x20','length','removeComponents','MDApiUtils','\x20Checking\x20deleted\x20components.','Service','reduce','writeComponents','sfLogger','gitUrl','__importDefault','GitProvider','mdapiUtils','__importStar','splice','Bitbucket','default','force','deleted','19348JnSxtk','send','typedi','../../../../constants','constructor','getRemote','__createBinding','CommitComponentsJob','\x20Wrote\x20','fileType','dir','log','920WQXTBC','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','get','../../../shared/utils'];a60_0x1b36=function(){return _0x57b328;};return a60_0x1b36();}const a60_0x164acb=(function(){let _0x268396=!![];return function(_0x4b683a,_0x386e8b){const _0x5f37b5=_0x268396?function(){const _0x271ebe=a60_0x5e0b;if(_0x386e8b){const _0x3ce2fe=_0x386e8b[_0x271ebe(0x24f)](_0x4b683a,arguments);return _0x386e8b=null,_0x3ce2fe;}}:function(){};return _0x268396=![],_0x5f37b5;};}()),a60_0x422461=a60_0x164acb(this,function(){const _0x30cfe1=a60_0x5e0b;return a60_0x422461['toString']()['search'](_0x30cfe1(0x1fc))[_0x30cfe1(0x20c)]()[_0x30cfe1(0x22d)](a60_0x422461)[_0x30cfe1(0x208)]('(((.+)+)+)+$');});a60_0x422461();'use strict';var __createBinding=this&&this[a60_0x54922a(0x22f)]||(Object[a60_0x54922a(0x23f)]?function(_0x31fc37,_0x342157,_0x3a5ed8,_0x44d16a){const _0x2e4a85=a60_0x54922a;if(_0x44d16a===undefined)_0x44d16a=_0x3a5ed8;Object[_0x2e4a85(0x20f)](_0x31fc37,_0x44d16a,{'enumerable':!![],'get':function(){return _0x342157[_0x3a5ed8];}});}:function(_0x4f4d80,_0x26fe15,_0x36882d,_0x241d7b){if(_0x241d7b===undefined)_0x241d7b=_0x36882d;_0x4f4d80[_0x241d7b]=_0x26fe15[_0x36882d];}),__setModuleDefault=this&&this[a60_0x54922a(0x25b)]||(Object[a60_0x54922a(0x23f)]?function(_0x40913e,_0x48cd64){const _0x204b11=a60_0x54922a;Object[_0x204b11(0x20f)](_0x40913e,'default',{'enumerable':!![],'value':_0x48cd64});}:function(_0x76a509,_0xffd2e9){const _0x39e766=a60_0x54922a;_0x76a509[_0x39e766(0x226)]=_0xffd2e9;}),__decorate=this&&this[a60_0x54922a(0x24d)]||function(_0x2f47c5,_0x914f7e,_0x2b10b4,_0x30a5c1){const _0x428d66=a60_0x54922a;var _0x20e602=arguments['length'],_0x1a10aa=_0x20e602<0x3?_0x914f7e:_0x30a5c1===null?_0x30a5c1=Object[_0x428d66(0x252)](_0x914f7e,_0x2b10b4):_0x30a5c1,_0xfc73e1;if(typeof Reflect===_0x428d66(0x214)&&typeof Reflect['decorate']===_0x428d66(0x23d))_0x1a10aa=Reflect[_0x428d66(0x24e)](_0x2f47c5,_0x914f7e,_0x2b10b4,_0x30a5c1);else{for(var _0x2bb89d=_0x2f47c5[_0x428d66(0x217)]-0x1;_0x2bb89d>=0x0;_0x2bb89d--)if(_0xfc73e1=_0x2f47c5[_0x2bb89d])_0x1a10aa=(_0x20e602<0x3?_0xfc73e1(_0x1a10aa):_0x20e602>0x3?_0xfc73e1(_0x914f7e,_0x2b10b4,_0x1a10aa):_0xfc73e1(_0x914f7e,_0x2b10b4))||_0x1a10aa;}return _0x20e602>0x3&&_0x1a10aa&&Object[_0x428d66(0x20f)](_0x914f7e,_0x2b10b4,_0x1a10aa),_0x1a10aa;},__importStar=this&&this[a60_0x54922a(0x223)]||function(_0x1b25da){const _0x5d9c35=a60_0x54922a;if(_0x1b25da&&_0x1b25da['__esModule'])return _0x1b25da;var _0x34d33f={};if(_0x1b25da!=null){for(var _0x30d790 in _0x1b25da)if(_0x30d790!==_0x5d9c35(0x226)&&Object[_0x5d9c35(0x24c)]['hasOwnProperty'][_0x5d9c35(0x206)](_0x1b25da,_0x30d790))__createBinding(_0x34d33f,_0x1b25da,_0x30d790);}return __setModuleDefault(_0x34d33f,_0x1b25da),_0x34d33f;},__importDefault=this&&this[a60_0x54922a(0x220)]||function(_0x8996b0){return _0x8996b0&&_0x8996b0['__esModule']?_0x8996b0:{'default':_0x8996b0};};Object[a60_0x54922a(0x20f)](exports,a60_0x54922a(0x1fd),{'value':!![]}),exports[a60_0x54922a(0x230)]=void 0x0;const commit_components_dto_1=require(a60_0x54922a(0x24b)),events_1=__importDefault(require(a60_0x54922a(0x1f1))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a60_0x54922a(0x1f5)),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require(a60_0x54922a(0x22b))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require(a60_0x54922a(0x238)),constants_1=require(a60_0x54922a(0x22c)),git_provider_1=require(a60_0x54922a(0x210)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),sfdx_utils_2=require(a60_0x54922a(0x20b)),fs_internal_1=require(a60_0x54922a(0x202)),path_1=require('path'),providers_tokens_1=require(a60_0x54922a(0x257));let CommitComponentsJob=class CommitComponentsJob extends events_1[a60_0x54922a(0x226)]{constructor(){const _0x59d398=a60_0x54922a;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this['componentsToWrite']=0x0,this[_0x59d398(0x258)]=0x0,this[_0x59d398(0x245)]=Date[_0x59d398(0x212)]();}async[a60_0x54922a(0x22e)](){const _0x4df365=a60_0x54922a,{repo:_0x3f4bac}=this['commitData'],_0x2868a0=typedi_1[_0x4df365(0x226)][_0x4df365(0x237)](providers_tokens_1[_0x4df365(0x1ec)][_0x4df365(0x20d)]);if(this[_0x4df365(0x23b)][_0x4df365(0x251)]===git_provider_1[_0x4df365(0x221)][_0x4df365(0x225)]){const _0x3649fd=typedi_1[_0x4df365(0x226)][_0x4df365(0x237)](bitbucket_api_service_1[_0x4df365(0x254)]);await _0x3649fd[_0x4df365(0x215)]();}return _0x3f4bac[_0x4df365(0x21f)]['replace'](/http(s)?:\/\/(.+@)?/,utils_1['getProtocol'](_0x3f4bac['gitUrl'])+_0x4df365(0x1ef)+_0x2868a0[_0x4df365(0x209)]()+'@');}[a60_0x54922a(0x25a)](_0x52c226){const _0xc5eb0a=a60_0x54922a;var _0x37399e;_0x52c226[_0xc5eb0a(0x1f3)](_0x38c9b7=>child_types_1[_0xc5eb0a(0x226)][_0xc5eb0a(0x1ed)](_0x38c9b7[_0xc5eb0a(0x232)])?0x1:-0x1);const _0xd1929d={};for(const _0x4aab25 of _0x52c226){_0xd1929d[_0x37399e=_0x4aab25[_0xc5eb0a(0x243)]]||(_0xd1929d[_0x37399e]=[]),_0xd1929d[_0x4aab25[_0xc5eb0a(0x243)]][_0xc5eb0a(0x239)](_0x4aab25);}return Object['values'](_0xd1929d)[_0xc5eb0a(0x21c)]((_0x5bd31e,_0x109a17)=>[..._0x5bd31e,..._0x109a17],[]);}async[a60_0x54922a(0x21d)](_0x371fe7){const _0x291e04=a60_0x54922a;_0x371fe7=this[_0x291e04(0x25a)](_0x371fe7);let _0x130749=0x0;while(_0x371fe7['length']){const _0x4b9011=_0x371fe7[_0x291e04(0x224)](0x0,this[_0x291e04(0x200)]);await this[_0x291e04(0x222)]['writeFlosumComponents'](_0x4b9011,{'skipChildErrors':this[_0x291e04(0x23b)]['branch'][_0x291e04(0x1fe)]==='master'}),_0x130749+=_0x4b9011[_0x291e04(0x217)],this['sfLogger']['log'](this['prefix']+_0x291e04(0x231)+_0x130749+'/'+this['componentsToWrite']+'\x20components'),await this['sfLogger'][_0x291e04(0x22a)]();}}async[a60_0x54922a(0x218)](_0x37d22c){const _0x269b05=a60_0x54922a;_0x37d22c[_0x269b05(0x1f3)](_0x432bb0=>child_types_1[_0x269b05(0x226)][_0x269b05(0x1ed)](_0x432bb0['type'])?-0x1:0x1);let _0x4ede1c=0x0;while(_0x37d22c[_0x269b05(0x217)]){const _0x3eb768=_0x37d22c[_0x269b05(0x224)](0x0,this[_0x269b05(0x200)]);await this[_0x269b05(0x222)]['removeComponents'](_0x3eb768),_0x4ede1c+=_0x3eb768[_0x269b05(0x217)],this[_0x269b05(0x21e)]['log'](this[_0x269b05(0x204)]+_0x269b05(0x1f0)+_0x4ede1c+'/'+this['componentsToDelete']+_0x269b05(0x1ff)),await this[_0x269b05(0x21e)][_0x269b05(0x22a)]();}}async[a60_0x54922a(0x23e)](){const _0xb0bd41=a60_0x54922a;this[_0xb0bd41(0x249)]&&await this[_0xb0bd41(0x249)][_0xb0bd41(0x20e)]()[_0xb0bd41(0x1ea)](()=>void 0x0),this[_0xb0bd41(0x222)]&&await this[_0xb0bd41(0x222)][_0xb0bd41(0x20e)]()[_0xb0bd41(0x1ea)](()=>void 0x0),this[_0xb0bd41(0x211)]&&await this['sfdxUtils']['removeDir']()['catch'](()=>void 0x0);}async['exec'](){const _0x2dd255=a60_0x54922a,{repo:_0x36b53b,branch:_0x2319fd,components:_0xc56059,convertToSFDX:_0x15dad3,message:_0x1f6a61,user:_0x2f0c11}=this[_0x2dd255(0x23b)];this['mdapiUtils']=new mdapi_utils_1[(_0x2dd255(0x219))](),this['gitUtils']=new git_utils_1[(_0x2dd255(0x207))](await this['getRemote']()),this[_0x2dd255(0x211)]=new sfdx_utils_1[(_0x2dd255(0x1f6))]();let _0x2c9421=_0x15dad3;try{await this['sfLogger'][_0x2dd255(0x234)](this['prefix']+'\x20Start\x20cloning\x20repository.')[_0x2dd255(0x22a)](),await this[_0x2dd255(0x249)]['clone'](_0x2319fd[_0x2dd255(0x1fe)],_0x36b53b[_0x2dd255(0x1fe)]);!this[_0x2dd255(0x23b)][_0x2dd255(0x227)]?(this[_0x2dd255(0x21e)][_0x2dd255(0x234)](this['prefix']+_0x2dd255(0x213)),await this[_0x2dd255(0x222)][_0x2dd255(0x247)](this[_0x2dd255(0x249)][_0x2dd255(0x233)])):this[_0x2dd255(0x21e)][_0x2dd255(0x234)](this[_0x2dd255(0x204)]+_0x2dd255(0x236));await this['sfLogger'][_0x2dd255(0x234)](this[_0x2dd255(0x204)]+_0x2dd255(0x23a))[_0x2dd255(0x22a)]();_0xc56059[_0x2dd255(0x20a)]&&(this[_0x2dd255(0x21e)]['log'](this['prefix']+_0x2dd255(0x246)),this[_0x2dd255(0x23c)]=_0xc56059['writed'][_0x2dd255(0x217)],await this[_0x2dd255(0x21d)](_0xc56059[_0x2dd255(0x20a)]),await this[_0x2dd255(0x21e)][_0x2dd255(0x22a)]());await this[_0x2dd255(0x21e)]['log'](this[_0x2dd255(0x204)]+_0x2dd255(0x21a))[_0x2dd255(0x22a)]();_0xc56059[_0x2dd255(0x228)]&&(this[_0x2dd255(0x21e)][_0x2dd255(0x234)](this[_0x2dd255(0x204)]+'\x20Preparing\x20to\x20delete\x20components'),this['componentsToDelete']=_0xc56059[_0x2dd255(0x228)]['length'],await this[_0x2dd255(0x218)](_0xc56059[_0x2dd255(0x228)]),await this[_0x2dd255(0x21e)][_0x2dd255(0x22a)]());await this[_0x2dd255(0x21e)][_0x2dd255(0x22a)]();const _0x2bffcd=await fs_internal_1['FS']['isEmptyDir'](this['gitUtils'][_0x2dd255(0x233)]);await sfdx_utils_2['SFDX'][_0x2dd255(0x255)](this[_0x2dd255(0x249)][_0x2dd255(0x233)])?(_0x2c9421=!![],await fs_internal_1['FS']['removeDir'](path_1[_0x2dd255(0x25d)](this[_0x2dd255(0x249)][_0x2dd255(0x233)],_0x2dd255(0x244)))):(_0x2c9421&&(!_0x2bffcd&&(_0x2c9421=![])),await this[_0x2dd255(0x249)][_0x2dd255(0x248)]());_0x2c9421?(await this[_0x2dd255(0x21e)][_0x2dd255(0x234)](this[_0x2dd255(0x204)]+_0x2dd255(0x1f8))[_0x2dd255(0x22a)](),await this['sfdxUtils']['createProjectFrom'](this[_0x2dd255(0x222)]['dir']),await this[_0x2dd255(0x211)][_0x2dd255(0x1f2)](this[_0x2dd255(0x249)][_0x2dd255(0x233)],!_0x2bffcd),await this['sfdxUtils'][_0x2dd255(0x20e)]()):(await this['sfLogger'][_0x2dd255(0x234)](this[_0x2dd255(0x204)]+_0x2dd255(0x1fa))[_0x2dd255(0x22a)](),await this[_0x2dd255(0x222)]['copyMdapiTo'](this[_0x2dd255(0x249)][_0x2dd255(0x233)]));await this[_0x2dd255(0x21e)][_0x2dd255(0x234)](this[_0x2dd255(0x204)]+_0x2dd255(0x1e9))[_0x2dd255(0x22a)](),await this[_0x2dd255(0x249)]['commitAndPush'](_0x1f6a61,{'email':constants_1[_0x2dd255(0x1eb)],'name':_0x2f0c11[_0x2dd255(0x1fe)]},_0x2319fd[_0x2dd255(0x1fe)]),await this[_0x2dd255(0x249)][_0x2dd255(0x20e)](),await this[_0x2dd255(0x222)]['removeDir']();const _0x7bbd78=this[_0x2dd255(0x23c)]+this[_0x2dd255(0x258)];await this[_0x2dd255(0x21e)][_0x2dd255(0x234)](this[_0x2dd255(0x204)]+_0x2dd255(0x240)+(Date[_0x2dd255(0x212)]()-this[_0x2dd255(0x245)])+_0x2dd255(0x216)+_0x7bbd78+'.')[_0x2dd255(0x22a)]();}catch(_0x41b008){await this[_0x2dd255(0x23e)](),await this['sfLogger'][_0x2dd255(0x256)](this['prefix']+'\x20'+_0x41b008)[_0x2dd255(0x22a)]();throw _0x41b008;}}async[a60_0x54922a(0x1f4)](_0x373d82,_0x17448f){const _0x681104=a60_0x54922a;var _0x4664ec,_0x11088b;this['sfLogger']=typedi_1[_0x681104(0x226)][_0x681104(0x237)](providers_tokens_1[_0x681104(0x1ec)]['logger']),this[_0x681104(0x204)]=(_0x17448f?_0x17448f+'\x20':'')+'['+commit_components_dto_1[_0x681104(0x1ee)][_0x681104(0x1fe)]+']',await this[_0x681104(0x21e)][_0x681104(0x234)](this['prefix']+_0x681104(0x250));const _0x499f57=!!((_0x4664ec=_0x373d82[_0x681104(0x205)])===null||_0x4664ec===void 0x0?void 0x0:_0x4664ec[_0x681104(0x20a)])||!!((_0x11088b=_0x373d82[_0x681104(0x205)])===null||_0x11088b===void 0x0?void 0x0:_0x11088b['deleted']);if(!_0x499f57){await this['sfLogger'][_0x681104(0x234)](this[_0x681104(0x204)]+_0x681104(0x1f9))[_0x681104(0x22a)]();return;}this[_0x681104(0x23b)]=_0x373d82,await this[_0x681104(0x1f7)]();}};CommitComponentsJob=__decorate([typedi_1[a60_0x54922a(0x21b)]({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;