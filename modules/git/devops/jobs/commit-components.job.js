const a105_0x3ef586=a105_0x2f1a;(function(_0x1de6a3,_0x38fb39){const _0x43e2d1=a105_0x2f1a,_0x5dd494=_0x1de6a3();while(!![]){try{const _0x37739e=-parseInt(_0x43e2d1(0x1e7))/0x1*(-parseInt(_0x43e2d1(0x249))/0x2)+parseInt(_0x43e2d1(0x208))/0x3*(parseInt(_0x43e2d1(0x23c))/0x4)+-parseInt(_0x43e2d1(0x21b))/0x5+-parseInt(_0x43e2d1(0x239))/0x6+parseInt(_0x43e2d1(0x201))/0x7+-parseInt(_0x43e2d1(0x1ee))/0x8*(-parseInt(_0x43e2d1(0x235))/0x9)+-parseInt(_0x43e2d1(0x224))/0xa*(parseInt(_0x43e2d1(0x247))/0xb);if(_0x37739e===_0x38fb39)break;else _0x5dd494['push'](_0x5dd494['shift']());}catch(_0x134d2f){_0x5dd494['push'](_0x5dd494['shift']());}}}(a105_0xb7e8,0xbd18c));const a105_0x54c0bc=(function(){let _0x4e26ff=!![];return function(_0x5c7289,_0x24cbea){const _0x19e404=_0x4e26ff?function(){const _0x44cd29=a105_0x2f1a;if(_0x24cbea){const _0x31060a=_0x24cbea[_0x44cd29(0x23f)](_0x5c7289,arguments);return _0x24cbea=null,_0x31060a;}}:function(){};return _0x4e26ff=![],_0x19e404;};}()),a105_0x29bf87=a105_0x54c0bc(this,function(){const _0x4212d7=a105_0x2f1a;return a105_0x29bf87[_0x4212d7(0x24c)]()[_0x4212d7(0x228)](_0x4212d7(0x21e))['toString']()[_0x4212d7(0x248)](a105_0x29bf87)[_0x4212d7(0x228)](_0x4212d7(0x21e));});function a105_0xb7e8(){const _0x5e2bb6=['__decorate','\x20Start\x20converting\x20to\x20SFDX.','MDApiUtils','path','credentials','force','122823xtpdOH','../../providers/api/bitbucket-api.service','../../salesforce/utils/sfdx.utils','writeComponents','exec','\x20Checking\x20commit\x20components.','__importDefault','1076776OspaZm','gitUrl','\x20components','clearDir','decorate','SFDX','master','sort','\x20Checking\x20written\x20components.','fileName','create','../utils/git.utils','isSFDXProject','includes','join','__importStar','writeFlosumComponents','provider','\x20Wrote\x20','4169067GPfDZo','Bitbucket','Tokens','../dto/commit-components.dto','Service','prefix','run','1605pNOgFR','get','mdapiUtils','componentsToDelete','getOwnPropertyDescriptor','typedi','../utils/mdapi.utils','send','replace','../../providers/providers.tokens','push','commitData','GitProvider','writed','components','now','branch','\x20Prepare\x20mdapi\x20files.','getGitShellAuthorizationString','2400165bYOxLW','\x20Preparing\x20to\x20write\x20components','recordType','(((.+)+)+)+$','removeComponents','splice','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','length','sfLogger','2190070doUIYZ','dir','startTime','sfdxUtils','search','fileType','COMPONENTS_PER_TICK','hasOwnProperty','prepareMdapi','CommitComponentsJob','clone','\x20Checking\x20deleted\x20components.','cleanUp','GitUtils','log','object','force-app','45siNEco','isEmptyDir','\x20Nothing\x20to\x20commit.\x20Skip.','BitbucketApiService','3794262XiiYLl','../../../shared/utils','getRemote','6980OydqpY','__createBinding','../utils/sfdx.utils','apply','ms.\x20Committed\x20components\x20-\x20','writable','isLoggedIn','removeDir','events','copyMdapiTo','default','22jJreFg','constructor','2kFyBHy','\x20Deleted\x20','gitUtils','toString','FORCE_APP_DEFAULT_DIR','../../../../constants','groupComponentsByFileName','catch','defineProperty','__esModule','name','componentsToWrite','deleted','\x20Copying\x20mdapi\x20to\x20git\x20folder.','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.'];a105_0xb7e8=function(){return _0x5e2bb6;};return a105_0xb7e8();}function a105_0x2f1a(_0x48751a,_0xf7e6f8){const _0xf5aa71=a105_0xb7e8();return a105_0x2f1a=function(_0x29bf87,_0x54c0bc){_0x29bf87=_0x29bf87-0x1dd;let _0xb7e835=_0xf5aa71[_0x29bf87];return _0xb7e835;},a105_0x2f1a(_0x48751a,_0xf7e6f8);}a105_0x29bf87();'use strict';var __createBinding=this&&this[a105_0x3ef586(0x23d)]||(Object['create']?function(_0x2c4d2a,_0x226278,_0x2fb811,_0x5d8f7f){const _0x165618=a105_0x3ef586;if(_0x5d8f7f===undefined)_0x5d8f7f=_0x2fb811;var _0x25e68c=Object[_0x165618(0x20c)](_0x226278,_0x2fb811);(!_0x25e68c||(_0x165618(0x209)in _0x25e68c?!_0x226278['__esModule']:_0x25e68c[_0x165618(0x241)]||_0x25e68c['configurable']))&&(_0x25e68c={'enumerable':!![],'get':function(){return _0x226278[_0x2fb811];}}),Object[_0x165618(0x251)](_0x2c4d2a,_0x5d8f7f,_0x25e68c);}:function(_0x456c87,_0x4ae11e,_0x17bb4f,_0x3eb960){if(_0x3eb960===undefined)_0x3eb960=_0x17bb4f;_0x456c87[_0x3eb960]=_0x4ae11e[_0x17bb4f];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a105_0x3ef586(0x1f8)]?function(_0x333e44,_0x1b8c93){const _0x1ce26d=a105_0x3ef586;Object[_0x1ce26d(0x251)](_0x333e44,'default',{'enumerable':!![],'value':_0x1b8c93});}:function(_0x1e3019,_0x57f2db){const _0x3b774c=a105_0x3ef586;_0x1e3019[_0x3b774c(0x246)]=_0x57f2db;}),__decorate=this&&this[a105_0x3ef586(0x1e1)]||function(_0x3d5bf3,_0x4a802c,_0x632232,_0x5a193c){const _0x10c751=a105_0x3ef586;var _0x2c2add=arguments[_0x10c751(0x222)],_0x9146d9=_0x2c2add<0x3?_0x4a802c:_0x5a193c===null?_0x5a193c=Object['getOwnPropertyDescriptor'](_0x4a802c,_0x632232):_0x5a193c,_0x1a44cf;if(typeof Reflect===_0x10c751(0x233)&&typeof Reflect[_0x10c751(0x1f2)]==='function')_0x9146d9=Reflect['decorate'](_0x3d5bf3,_0x4a802c,_0x632232,_0x5a193c);else{for(var _0x4b6163=_0x3d5bf3[_0x10c751(0x222)]-0x1;_0x4b6163>=0x0;_0x4b6163--)if(_0x1a44cf=_0x3d5bf3[_0x4b6163])_0x9146d9=(_0x2c2add<0x3?_0x1a44cf(_0x9146d9):_0x2c2add>0x3?_0x1a44cf(_0x4a802c,_0x632232,_0x9146d9):_0x1a44cf(_0x4a802c,_0x632232))||_0x9146d9;}return _0x2c2add>0x3&&_0x9146d9&&Object[_0x10c751(0x251)](_0x4a802c,_0x632232,_0x9146d9),_0x9146d9;},__importStar=this&&this[a105_0x3ef586(0x1fd)]||function(_0x59cb2d){const _0x23c6b0=a105_0x3ef586;if(_0x59cb2d&&_0x59cb2d[_0x23c6b0(0x252)])return _0x59cb2d;var _0x498485={};if(_0x59cb2d!=null){for(var _0x581cf7 in _0x59cb2d)if(_0x581cf7!==_0x23c6b0(0x246)&&Object['prototype'][_0x23c6b0(0x22b)]['call'](_0x59cb2d,_0x581cf7))__createBinding(_0x498485,_0x59cb2d,_0x581cf7);}return __setModuleDefault(_0x498485,_0x59cb2d),_0x498485;},__importDefault=this&&this[a105_0x3ef586(0x1ed)]||function(_0x3cc4d1){const _0x1ad6d7=a105_0x3ef586;return _0x3cc4d1&&_0x3cc4d1[_0x1ad6d7(0x252)]?_0x3cc4d1:{'default':_0x3cc4d1};};Object[a105_0x3ef586(0x251)](exports,a105_0x3ef586(0x252),{'value':!![]}),exports[a105_0x3ef586(0x22d)]=void 0x0;const commit_components_dto_1=require(a105_0x3ef586(0x204)),events_1=__importDefault(require(a105_0x3ef586(0x244))),git_utils_1=require(a105_0x3ef586(0x1f9)),mdapi_utils_1=require(a105_0x3ef586(0x20e)),sfdx_utils_1=require(a105_0x3ef586(0x23e)),typedi_1=__importStar(require(a105_0x3ef586(0x20d))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require(a105_0x3ef586(0x23a)),constants_1=require(a105_0x3ef586(0x24e)),git_provider_1=require('../../providers/types/git-provider'),bitbucket_api_service_1=require(a105_0x3ef586(0x1e8)),sfdx_utils_2=require(a105_0x3ef586(0x1e9)),fs_internal_1=require('../../internal/fs.internal'),path_1=require(a105_0x3ef586(0x1e4)),providers_tokens_1=require(a105_0x3ef586(0x211)),constants_2=require(a105_0x3ef586(0x24e));let CommitComponentsJob=class CommitComponentsJob extends events_1[a105_0x3ef586(0x246)]{constructor(){const _0x303bf2=a105_0x3ef586;super(...arguments),this[_0x303bf2(0x22a)]=0x3e8,this[_0x303bf2(0x1dd)]=0x0,this[_0x303bf2(0x20b)]=0x0,this[_0x303bf2(0x226)]=Date[_0x303bf2(0x217)]();}async[a105_0x3ef586(0x23b)](){const _0x585efb=a105_0x3ef586,{repo:_0x318f89}=this[_0x585efb(0x213)],_0x341f4e=typedi_1[_0x585efb(0x246)][_0x585efb(0x209)](providers_tokens_1[_0x585efb(0x203)][_0x585efb(0x1e5)]);if(this[_0x585efb(0x213)][_0x585efb(0x1ff)]===git_provider_1[_0x585efb(0x214)][_0x585efb(0x202)]){const _0x5a45c2=typedi_1[_0x585efb(0x246)]['get'](bitbucket_api_service_1[_0x585efb(0x238)]);await _0x5a45c2[_0x585efb(0x242)]();}return _0x318f89[_0x585efb(0x1ef)][_0x585efb(0x210)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x318f89['gitUrl'])+'://'+_0x341f4e[_0x585efb(0x21a)]()+'@');}[a105_0x3ef586(0x24f)](_0x4498d6){const _0x3595d7=a105_0x3ef586;var _0x3192c7;_0x4498d6[_0x3595d7(0x1f5)](_0x723869=>child_types_1['default'][_0x3595d7(0x1fb)](_0x723869[_0x3595d7(0x229)])?0x1:-0x1);const _0x19d1d5={};for(const _0x242909 of _0x4498d6){_0x19d1d5[_0x3192c7=_0x242909[_0x3595d7(0x1f7)]]||(_0x19d1d5[_0x3192c7]=[]),_0x19d1d5[_0x242909[_0x3595d7(0x1f7)]][_0x3595d7(0x212)](_0x242909);}return Object['values'](_0x19d1d5)['reduce']((_0x3e238c,_0x375a0d)=>[..._0x3e238c,..._0x375a0d],[]);}async['writeComponents'](_0x1a0e0b){const _0x493ba3=a105_0x3ef586;_0x1a0e0b=this[_0x493ba3(0x24f)](_0x1a0e0b);let _0x11f7eb=0x0;while(_0x1a0e0b[_0x493ba3(0x222)]){const _0x58859b=_0x1a0e0b['splice'](0x0,this[_0x493ba3(0x22a)]);await this[_0x493ba3(0x20a)][_0x493ba3(0x1fe)](_0x58859b,{'skipChildErrors':this[_0x493ba3(0x213)][_0x493ba3(0x218)][_0x493ba3(0x253)]===_0x493ba3(0x1f4),'recordType':this[_0x493ba3(0x213)][_0x493ba3(0x21d)]}),_0x11f7eb+=_0x58859b[_0x493ba3(0x222)],this[_0x493ba3(0x223)][_0x493ba3(0x232)](this['prefix']+_0x493ba3(0x200)+_0x11f7eb+'/'+this['componentsToWrite']+_0x493ba3(0x1f0)),await this[_0x493ba3(0x223)][_0x493ba3(0x20f)]();}}async[a105_0x3ef586(0x21f)](_0xe69427){const _0x40f712=a105_0x3ef586;_0xe69427[_0x40f712(0x1f5)](_0x1e2278=>child_types_1['default']['includes'](_0x1e2278['type'])?-0x1:0x1);let _0x215cb9=0x0;while(_0xe69427['length']){const _0x28bb82=_0xe69427[_0x40f712(0x220)](0x0,this[_0x40f712(0x22a)]);await this[_0x40f712(0x20a)][_0x40f712(0x21f)](_0x28bb82,this[_0x40f712(0x213)]['recordType']),_0x215cb9+=_0x28bb82[_0x40f712(0x222)],this[_0x40f712(0x223)][_0x40f712(0x232)](this['prefix']+_0x40f712(0x24a)+_0x215cb9+'/'+this['componentsToDelete']+_0x40f712(0x1f0)),await this[_0x40f712(0x223)]['send']();}}async[a105_0x3ef586(0x230)](){const _0x3e3770=a105_0x3ef586;this[_0x3e3770(0x24b)]&&await this[_0x3e3770(0x24b)][_0x3e3770(0x243)]()[_0x3e3770(0x250)](()=>void 0x0),this[_0x3e3770(0x20a)]&&await this[_0x3e3770(0x20a)][_0x3e3770(0x243)]()[_0x3e3770(0x250)](()=>void 0x0),this['sfdxUtils']&&await this[_0x3e3770(0x227)][_0x3e3770(0x243)]()[_0x3e3770(0x250)](()=>void 0x0);}async[a105_0x3ef586(0x1eb)](){const _0x1b33ea=a105_0x3ef586,{repo:_0x579e6c,branch:_0x30c379,components:_0x4f5d93,convertToSFDX:_0x3bafe4,message:_0x3258b3,user:_0x233029}=this[_0x1b33ea(0x213)];this[_0x1b33ea(0x20a)]=new mdapi_utils_1[(_0x1b33ea(0x1e3))](),this[_0x1b33ea(0x24b)]=new git_utils_1[(_0x1b33ea(0x231))](await this[_0x1b33ea(0x23b)]()),this['sfdxUtils']=new sfdx_utils_1['SFDXUtils']();let _0x24fc30=_0x3bafe4&&this[_0x1b33ea(0x227)]['isConvertToSfdx'](this[_0x1b33ea(0x213)]['recordType']);try{await this[_0x1b33ea(0x223)][_0x1b33ea(0x232)](this[_0x1b33ea(0x206)]+'\x20Start\x20cloning\x20repository.')[_0x1b33ea(0x20f)](),await this['gitUtils'][_0x1b33ea(0x22e)](_0x30c379[_0x1b33ea(0x253)],_0x579e6c[_0x1b33ea(0x253)]);!this['commitData'][_0x1b33ea(0x1e6)]?(this[_0x1b33ea(0x223)][_0x1b33ea(0x232)](this['prefix']+_0x1b33ea(0x219)),await this[_0x1b33ea(0x20a)][_0x1b33ea(0x22c)](this[_0x1b33ea(0x24b)][_0x1b33ea(0x225)])):this['sfLogger'][_0x1b33ea(0x232)](this[_0x1b33ea(0x206)]+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this['sfLogger']['log'](this['prefix']+_0x1b33ea(0x1f6))[_0x1b33ea(0x20f)]();_0x4f5d93[_0x1b33ea(0x215)]&&(this['sfLogger']['log'](this['prefix']+_0x1b33ea(0x21c)),this['componentsToWrite']=_0x4f5d93[_0x1b33ea(0x215)][_0x1b33ea(0x222)],await this[_0x1b33ea(0x1ea)](_0x4f5d93['writed']),await this[_0x1b33ea(0x223)][_0x1b33ea(0x20f)]());await this['sfLogger'][_0x1b33ea(0x232)](this[_0x1b33ea(0x206)]+_0x1b33ea(0x22f))['send']();_0x4f5d93[_0x1b33ea(0x1de)]&&(this[_0x1b33ea(0x223)][_0x1b33ea(0x232)](this[_0x1b33ea(0x206)]+'\x20Preparing\x20to\x20delete\x20components'),this[_0x1b33ea(0x20b)]=_0x4f5d93[_0x1b33ea(0x1de)][_0x1b33ea(0x222)],await this[_0x1b33ea(0x21f)](_0x4f5d93[_0x1b33ea(0x1de)]),await this[_0x1b33ea(0x223)]['send']());await this[_0x1b33ea(0x223)][_0x1b33ea(0x20f)]();const _0x966598=await fs_internal_1['FS'][_0x1b33ea(0x236)](this[_0x1b33ea(0x24b)][_0x1b33ea(0x225)]);await sfdx_utils_2[_0x1b33ea(0x1f3)][_0x1b33ea(0x1fa)](this[_0x1b33ea(0x24b)]['dir'])?(_0x24fc30=!![],await fs_internal_1['FS'][_0x1b33ea(0x243)]((0x0,path_1[_0x1b33ea(0x1fc)])(this[_0x1b33ea(0x24b)][_0x1b33ea(0x225)],_0x1b33ea(0x234)))):(_0x24fc30&&(!_0x966598&&(_0x24fc30=![])),await this[_0x1b33ea(0x24b)][_0x1b33ea(0x1f1)]());_0x24fc30?(await this['sfLogger'][_0x1b33ea(0x232)](this['prefix']+_0x1b33ea(0x1e2))[_0x1b33ea(0x20f)](),await this[_0x1b33ea(0x227)]['createProjectFrom'](this['mdapiUtils'][_0x1b33ea(0x225)]),await this[_0x1b33ea(0x227)]['copyProjectTo'](this[_0x1b33ea(0x24b)][_0x1b33ea(0x225)],!_0x966598),await this[_0x1b33ea(0x227)]['copySFDXIgnoredComponents'](this[_0x1b33ea(0x20a)][_0x1b33ea(0x225)],(0x0,path_1[_0x1b33ea(0x1fc)])(this['gitUtils']['dir'],constants_2[_0x1b33ea(0x24d)])),await this[_0x1b33ea(0x227)][_0x1b33ea(0x243)]()):(await this[_0x1b33ea(0x223)][_0x1b33ea(0x232)](this['prefix']+_0x1b33ea(0x1df))[_0x1b33ea(0x20f)](),await this['mdapiUtils'][_0x1b33ea(0x245)](this[_0x1b33ea(0x24b)][_0x1b33ea(0x225)]));await this[_0x1b33ea(0x223)][_0x1b33ea(0x232)](this[_0x1b33ea(0x206)]+_0x1b33ea(0x1e0))[_0x1b33ea(0x20f)](),await this['gitUtils']['commitAndPush'](_0x3258b3,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x233029[_0x1b33ea(0x253)]},_0x30c379[_0x1b33ea(0x253)]),await this['gitUtils']['removeDir'](),await this['mdapiUtils'][_0x1b33ea(0x243)]();const _0x5e17a7=this[_0x1b33ea(0x1dd)]+this['componentsToDelete'];await this[_0x1b33ea(0x223)][_0x1b33ea(0x232)](this[_0x1b33ea(0x206)]+_0x1b33ea(0x221)+(Date[_0x1b33ea(0x217)]()-this['startTime'])+_0x1b33ea(0x240)+_0x5e17a7+'.')[_0x1b33ea(0x20f)]();}catch(_0x393b4c){await this[_0x1b33ea(0x230)](),await this[_0x1b33ea(0x223)]['error'](this[_0x1b33ea(0x206)]+'\x20'+_0x393b4c)[_0x1b33ea(0x20f)]();throw _0x393b4c;}}async[a105_0x3ef586(0x207)](_0x1b6fa2,_0x1aaf04){const _0x11ad1f=a105_0x3ef586;var _0x22e012,_0x30661d;this[_0x11ad1f(0x223)]=typedi_1[_0x11ad1f(0x246)]['get'](providers_tokens_1[_0x11ad1f(0x203)]['logger']),this['prefix']=(_0x1aaf04?_0x1aaf04+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto']['name']+']',await this[_0x11ad1f(0x223)]['log'](this[_0x11ad1f(0x206)]+_0x11ad1f(0x1ec));const _0x28a5f3=!!((_0x22e012=_0x1b6fa2[_0x11ad1f(0x216)])===null||_0x22e012===void 0x0?void 0x0:_0x22e012[_0x11ad1f(0x215)])||!!((_0x30661d=_0x1b6fa2['components'])===null||_0x30661d===void 0x0?void 0x0:_0x30661d[_0x11ad1f(0x1de)]);if(!_0x28a5f3){await this['sfLogger'][_0x11ad1f(0x232)](this[_0x11ad1f(0x206)]+_0x11ad1f(0x237))[_0x11ad1f(0x20f)]();return;}this[_0x11ad1f(0x213)]=_0x1b6fa2,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a105_0x3ef586(0x205)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;