function a123_0x4333(){const _0x46d53e=['function','logger','CommitComponentsJob','length','componentsToWrite','provider','189110kjqBRX','\x20Preparing\x20to\x20write\x20components','catch','hasOwnProperty','../utils/git.utils','__esModule','gitUrl','prepareMdapi','\x20Start\x20cloning\x20repository.','../../../../constants','master','object','5382612xfUTRB','../utils/mdapi.utils','\x20Deleted\x20','search','call','componentsToDelete','SFDXUtils','__createBinding','branch','copyMdapiTo','\x20Copying\x20mdapi\x20to\x20git\x20folder.','27621836mGHWPl','join','sfdxUtils','deleted','name','\x20Prepare\x20mdapi\x20files.','573811tDikLa','writed','force','create','apply','dir','(((.+)+)+)+$','events','replace','recordType','2WFjLxk','send','log','push','__decorate','2479230wyqJkZ','\x20components','run','exec','removeComponents','__importStar','Service','Bitbucket','91nvTbQj','BitbucketApiService','67224pcVuYm','copyProjectTo','isSFDXProject','clearDir','createProjectFrom','mdapiUtils','37970xHsZQl','../utils/sfdx.utils','components','isLoggedIn','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','writeComponents','splice','cleanUp','\x20Nothing\x20to\x20commit.\x20Skip.','sfLogger','../../providers/providers.tokens','getGitShellAuthorizationString','includes','default','removeDir','configurable','get','prefix','\x20Wrote\x20','\x20Checking\x20commit\x20components.','constructor','sort','../../providers/types/git-provider','../../../shared/utils','Tokens','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','../../parsers/data/child-types','fileName','values','getOwnPropertyDescriptor','COMPONENTS_PER_TICK','__setModuleDefault','prototype','commitData','decorate','groupComponentsByFileName','reduce','CommitComponentsDto','../../providers/api/bitbucket-api.service','commitAndPush','force-app','../dto/commit-components.dto','28swcyyx','writable','gitUtils','2367PJeILF','fileType','now','getRemote','defineProperty','startTime','clone'];a123_0x4333=function(){return _0x46d53e;};return a123_0x4333();}const a123_0x3bd140=a123_0x7922;(function(_0x28a60b,_0x3f3613){const _0x1fd68e=a123_0x7922,_0x5d4e28=_0x28a60b();while(!![]){try{const _0x4c8120=-parseInt(_0x1fd68e(0xec))/0x1*(parseInt(_0x1fd68e(0xf6))/0x2)+parseInt(_0x1fd68e(0xfb))/0x3+parseInt(_0x1fd68e(0x135))/0x4*(-parseInt(_0x1fd68e(0x145))/0x5)+-parseInt(_0x1fd68e(0xdb))/0x6+-parseInt(_0x1fd68e(0x103))/0x7*(-parseInt(_0x1fd68e(0x105))/0x8)+-parseInt(_0x1fd68e(0x138))/0x9*(parseInt(_0x1fd68e(0x10b))/0xa)+parseInt(_0x1fd68e(0xe6))/0xb;if(_0x4c8120===_0x3f3613)break;else _0x5d4e28['push'](_0x5d4e28['shift']());}catch(_0x37a29b){_0x5d4e28['push'](_0x5d4e28['shift']());}}}(a123_0x4333,0xadeff));const a123_0x6ecb6a=(function(){let _0x17a31a=!![];return function(_0x532859,_0x595b91){const _0x30eebf=_0x17a31a?function(){const _0x1063f5=a123_0x7922;if(_0x595b91){const _0x40d8b7=_0x595b91[_0x1063f5(0xf0)](_0x532859,arguments);return _0x595b91=null,_0x40d8b7;}}:function(){};return _0x17a31a=![],_0x30eebf;};}()),a123_0x117c45=a123_0x6ecb6a(this,function(){const _0x3eceac=a123_0x7922;return a123_0x117c45['toString']()[_0x3eceac(0xde)]('(((.+)+)+)+$')['toString']()[_0x3eceac(0x11f)](a123_0x117c45)['search'](_0x3eceac(0xf2));});a123_0x117c45();'use strict';var __createBinding=this&&this[a123_0x3bd140(0xe2)]||(Object[a123_0x3bd140(0xef)]?function(_0x238b1c,_0x4eb25b,_0x26d846,_0x41715c){const _0x3ec0c9=a123_0x3bd140;if(_0x41715c===undefined)_0x41715c=_0x26d846;var _0xe97964=Object[_0x3ec0c9(0x128)](_0x4eb25b,_0x26d846);(!_0xe97964||(_0x3ec0c9(0x11b)in _0xe97964?!_0x4eb25b[_0x3ec0c9(0xd4)]:_0xe97964[_0x3ec0c9(0x136)]||_0xe97964[_0x3ec0c9(0x11a)]))&&(_0xe97964={'enumerable':!![],'get':function(){return _0x4eb25b[_0x26d846];}}),Object['defineProperty'](_0x238b1c,_0x41715c,_0xe97964);}:function(_0x31e91d,_0x1cb6a4,_0x520878,_0x5a323d){if(_0x5a323d===undefined)_0x5a323d=_0x520878;_0x31e91d[_0x5a323d]=_0x1cb6a4[_0x520878];}),__setModuleDefault=this&&this[a123_0x3bd140(0x12a)]||(Object[a123_0x3bd140(0xef)]?function(_0x2dc243,_0x1553ff){const _0x145178=a123_0x3bd140;Object[_0x145178(0x13c)](_0x2dc243,_0x145178(0x118),{'enumerable':!![],'value':_0x1553ff});}:function(_0x4b2e1e,_0x444716){const _0x5efa58=a123_0x3bd140;_0x4b2e1e[_0x5efa58(0x118)]=_0x444716;}),__decorate=this&&this[a123_0x3bd140(0xfa)]||function(_0xf773f5,_0x55e30a,_0x41ad09,_0x49ac0e){const _0x2cb166=a123_0x3bd140;var _0x49b61e=arguments['length'],_0x461c6a=_0x49b61e<0x3?_0x55e30a:_0x49ac0e===null?_0x49ac0e=Object[_0x2cb166(0x128)](_0x55e30a,_0x41ad09):_0x49ac0e,_0xd23fbb;if(typeof Reflect===_0x2cb166(0xda)&&typeof Reflect[_0x2cb166(0x12d)]===_0x2cb166(0x13f))_0x461c6a=Reflect[_0x2cb166(0x12d)](_0xf773f5,_0x55e30a,_0x41ad09,_0x49ac0e);else{for(var _0x4a12e0=_0xf773f5[_0x2cb166(0x142)]-0x1;_0x4a12e0>=0x0;_0x4a12e0--)if(_0xd23fbb=_0xf773f5[_0x4a12e0])_0x461c6a=(_0x49b61e<0x3?_0xd23fbb(_0x461c6a):_0x49b61e>0x3?_0xd23fbb(_0x55e30a,_0x41ad09,_0x461c6a):_0xd23fbb(_0x55e30a,_0x41ad09))||_0x461c6a;}return _0x49b61e>0x3&&_0x461c6a&&Object['defineProperty'](_0x55e30a,_0x41ad09,_0x461c6a),_0x461c6a;},__importStar=this&&this[a123_0x3bd140(0x100)]||function(_0x255de9){const _0x57fd57=a123_0x3bd140;if(_0x255de9&&_0x255de9[_0x57fd57(0xd4)])return _0x255de9;var _0x3e1f69={};if(_0x255de9!=null){for(var _0x16a8c1 in _0x255de9)if(_0x16a8c1!==_0x57fd57(0x118)&&Object[_0x57fd57(0x12b)][_0x57fd57(0x148)][_0x57fd57(0xdf)](_0x255de9,_0x16a8c1))__createBinding(_0x3e1f69,_0x255de9,_0x16a8c1);}return __setModuleDefault(_0x3e1f69,_0x255de9),_0x3e1f69;},__importDefault=this&&this['__importDefault']||function(_0x37ca4b){const _0x20ec3c=a123_0x3bd140;return _0x37ca4b&&_0x37ca4b[_0x20ec3c(0xd4)]?_0x37ca4b:{'default':_0x37ca4b};};function a123_0x7922(_0x3eaf7f,_0x317dc7){const _0x3a2cd9=a123_0x4333();return a123_0x7922=function(_0x117c45,_0x6ecb6a){_0x117c45=_0x117c45-0xd3;let _0x43334f=_0x3a2cd9[_0x117c45];return _0x43334f;},a123_0x7922(_0x3eaf7f,_0x317dc7);}Object[a123_0x3bd140(0x13c)](exports,a123_0x3bd140(0xd4),{'value':!![]}),exports[a123_0x3bd140(0x141)]=void 0x0;const commit_components_dto_1=require(a123_0x3bd140(0x134)),events_1=__importDefault(require(a123_0x3bd140(0xf3))),git_utils_1=require(a123_0x3bd140(0xd3)),mdapi_utils_1=require(a123_0x3bd140(0xdc)),sfdx_utils_1=require(a123_0x3bd140(0x10c)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a123_0x3bd140(0x125))),utils_1=require(a123_0x3bd140(0x122)),constants_1=require(a123_0x3bd140(0xd8)),git_provider_1=require(a123_0x3bd140(0x121)),bitbucket_api_service_1=require(a123_0x3bd140(0x131)),sfdx_utils_2=require('../../salesforce/utils/sfdx.utils'),fs_internal_1=require('../../internal/fs.internal'),path_1=require('path'),providers_tokens_1=require(a123_0x3bd140(0x115)),constants_2=require(a123_0x3bd140(0xd8));let CommitComponentsJob=class CommitComponentsJob extends events_1[a123_0x3bd140(0x118)]{constructor(){const _0x1bbda7=a123_0x3bd140;super(...arguments),this[_0x1bbda7(0x129)]=0x3e8,this[_0x1bbda7(0x143)]=0x0,this['componentsToDelete']=0x0,this['startTime']=Date[_0x1bbda7(0x13a)]();}async['getRemote'](){const _0x21d018=a123_0x3bd140,{repo:_0x5ea109}=this[_0x21d018(0x12c)],_0x133a05=typedi_1['default']['get'](providers_tokens_1['Tokens']['credentials']);if(this[_0x21d018(0x12c)][_0x21d018(0x144)]===git_provider_1['GitProvider'][_0x21d018(0x102)]){const _0x40280c=typedi_1[_0x21d018(0x118)]['get'](bitbucket_api_service_1[_0x21d018(0x104)]);await _0x40280c[_0x21d018(0x10e)]();}return _0x5ea109[_0x21d018(0xd5)][_0x21d018(0xf4)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x5ea109[_0x21d018(0xd5)])+'://'+_0x133a05[_0x21d018(0x116)]()+'@');}[a123_0x3bd140(0x12e)](_0x243e9d){const _0x238279=a123_0x3bd140;var _0x5c537f;_0x243e9d['sort'](_0x203dbe=>child_types_1['default'][_0x238279(0x117)](_0x203dbe[_0x238279(0x139)])?0x1:-0x1);const _0x4ee889={};for(const _0x51fe1f of _0x243e9d){_0x4ee889[_0x5c537f=_0x51fe1f[_0x238279(0x126)]]||(_0x4ee889[_0x5c537f]=[]),_0x4ee889[_0x51fe1f[_0x238279(0x126)]][_0x238279(0xf9)](_0x51fe1f);}return Object[_0x238279(0x127)](_0x4ee889)[_0x238279(0x12f)]((_0x2d5f20,_0x47e255)=>[..._0x2d5f20,..._0x47e255],[]);}async[a123_0x3bd140(0x110)](_0x2b13ba){const _0x5df474=a123_0x3bd140;_0x2b13ba=this[_0x5df474(0x12e)](_0x2b13ba);let _0x565dfc=0x0;while(_0x2b13ba[_0x5df474(0x142)]){const _0xf3ae1f=_0x2b13ba[_0x5df474(0x111)](0x0,this[_0x5df474(0x129)]);await this['mdapiUtils']['writeFlosumComponents'](_0xf3ae1f,{'skipChildErrors':this[_0x5df474(0x12c)][_0x5df474(0xe3)][_0x5df474(0xea)]===_0x5df474(0xd9),'recordType':this['commitData'][_0x5df474(0xf5)]}),_0x565dfc+=_0xf3ae1f[_0x5df474(0x142)],this[_0x5df474(0x114)]['log'](this[_0x5df474(0x11c)]+_0x5df474(0x11d)+_0x565dfc+'/'+this['componentsToWrite']+_0x5df474(0xfc)),await this[_0x5df474(0x114)][_0x5df474(0xf7)]();}}async[a123_0x3bd140(0xff)](_0x34d3c5){const _0x39b0d7=a123_0x3bd140;_0x34d3c5[_0x39b0d7(0x120)](_0x430688=>child_types_1[_0x39b0d7(0x118)][_0x39b0d7(0x117)](_0x430688['type'])?-0x1:0x1);let _0x2f8740=0x0;while(_0x34d3c5[_0x39b0d7(0x142)]){const _0x3a8c26=_0x34d3c5[_0x39b0d7(0x111)](0x0,this[_0x39b0d7(0x129)]);await this['mdapiUtils']['removeComponents'](_0x3a8c26,this[_0x39b0d7(0x12c)][_0x39b0d7(0xf5)]),_0x2f8740+=_0x3a8c26['length'],this[_0x39b0d7(0x114)][_0x39b0d7(0xf8)](this[_0x39b0d7(0x11c)]+_0x39b0d7(0xdd)+_0x2f8740+'/'+this[_0x39b0d7(0xe0)]+_0x39b0d7(0xfc)),await this[_0x39b0d7(0x114)]['send']();}}async[a123_0x3bd140(0x112)](){const _0xd303ec=a123_0x3bd140;this['gitUtils']&&await this[_0xd303ec(0x137)][_0xd303ec(0x119)]()[_0xd303ec(0x147)](()=>void 0x0),this[_0xd303ec(0x10a)]&&await this[_0xd303ec(0x10a)][_0xd303ec(0x119)]()[_0xd303ec(0x147)](()=>void 0x0),this[_0xd303ec(0xe8)]&&await this[_0xd303ec(0xe8)][_0xd303ec(0x119)]()[_0xd303ec(0x147)](()=>void 0x0);}async[a123_0x3bd140(0xfe)](){const _0x10fe48=a123_0x3bd140,{repo:_0xc9293a,branch:_0xa5f3,components:_0x4e51a7,convertToSFDX:_0x3716de,message:_0x3b9b1b,user:_0x5dc259}=this['commitData'];this['mdapiUtils']=new mdapi_utils_1['MDApiUtils'](),this['gitUtils']=new git_utils_1['GitUtils'](await this[_0x10fe48(0x13b)]()),this[_0x10fe48(0xe8)]=new sfdx_utils_1[(_0x10fe48(0xe1))]();let _0x3e69da=_0x3716de&&this[_0x10fe48(0xe8)]['isConvertToSfdx'](this[_0x10fe48(0x12c)][_0x10fe48(0xf5)]);try{await this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this[_0x10fe48(0x11c)]+_0x10fe48(0xd7))[_0x10fe48(0xf7)](),await this[_0x10fe48(0x137)][_0x10fe48(0x13e)](_0xa5f3[_0x10fe48(0xea)],_0xc9293a[_0x10fe48(0xea)]);!this[_0x10fe48(0x12c)][_0x10fe48(0xee)]?(this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this[_0x10fe48(0x11c)]+_0x10fe48(0xeb)),await this[_0x10fe48(0x10a)][_0x10fe48(0xd6)](this[_0x10fe48(0x137)][_0x10fe48(0xf1)])):this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this[_0x10fe48(0x11c)]+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this['prefix']+'\x20Checking\x20written\x20components.')['send']();_0x4e51a7[_0x10fe48(0xed)]&&(this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this[_0x10fe48(0x11c)]+_0x10fe48(0x146)),this['componentsToWrite']=_0x4e51a7[_0x10fe48(0xed)][_0x10fe48(0x142)],await this['writeComponents'](_0x4e51a7[_0x10fe48(0xed)]),await this[_0x10fe48(0x114)]['send']());await this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this[_0x10fe48(0x11c)]+'\x20Checking\x20deleted\x20components.')[_0x10fe48(0xf7)]();_0x4e51a7[_0x10fe48(0xe9)]&&(this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this[_0x10fe48(0x11c)]+'\x20Preparing\x20to\x20delete\x20components'),this[_0x10fe48(0xe0)]=_0x4e51a7['deleted'][_0x10fe48(0x142)],await this[_0x10fe48(0xff)](_0x4e51a7[_0x10fe48(0xe9)]),await this[_0x10fe48(0x114)][_0x10fe48(0xf7)]());await this[_0x10fe48(0x114)][_0x10fe48(0xf7)]();const _0x70fe73=await fs_internal_1['FS']['isEmptyDir'](this[_0x10fe48(0x137)]['dir']);await sfdx_utils_2['SFDX'][_0x10fe48(0x107)](this[_0x10fe48(0x137)][_0x10fe48(0xf1)])?(_0x3e69da=!![],await fs_internal_1['FS']['removeDir']((0x0,path_1[_0x10fe48(0xe7)])(this[_0x10fe48(0x137)]['dir'],_0x10fe48(0x133)))):(_0x3e69da&&(!_0x70fe73&&(_0x3e69da=![])),await this[_0x10fe48(0x137)][_0x10fe48(0x108)]());_0x3e69da?(await this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this['prefix']+'\x20Start\x20converting\x20to\x20SFDX.')[_0x10fe48(0xf7)](),await this[_0x10fe48(0xe8)][_0x10fe48(0x109)](this[_0x10fe48(0x10a)]['dir']),await this['sfdxUtils'][_0x10fe48(0x106)](this['gitUtils']['dir'],!_0x70fe73),await this[_0x10fe48(0xe8)]['copySFDXIgnoredComponents'](this[_0x10fe48(0x10a)][_0x10fe48(0xf1)],(0x0,path_1[_0x10fe48(0xe7)])(this[_0x10fe48(0x137)][_0x10fe48(0xf1)],constants_2['FORCE_APP_DEFAULT_DIR'])),await this['sfdxUtils'][_0x10fe48(0x119)]()):(await this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this['prefix']+_0x10fe48(0xe5))[_0x10fe48(0xf7)](),await this[_0x10fe48(0x10a)][_0x10fe48(0xe4)](this['gitUtils'][_0x10fe48(0xf1)]));await this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this[_0x10fe48(0x11c)]+_0x10fe48(0x10f))[_0x10fe48(0xf7)](),await this['gitUtils'][_0x10fe48(0x132)](_0x3b9b1b,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x5dc259[_0x10fe48(0xea)]},_0xa5f3['name']),await this[_0x10fe48(0x137)][_0x10fe48(0x119)](),await this['mdapiUtils'][_0x10fe48(0x119)]();const _0x322eaa=this[_0x10fe48(0x143)]+this['componentsToDelete'];await this[_0x10fe48(0x114)][_0x10fe48(0xf8)](this[_0x10fe48(0x11c)]+_0x10fe48(0x124)+(Date[_0x10fe48(0x13a)]()-this[_0x10fe48(0x13d)])+'ms.\x20Committed\x20components\x20-\x20'+_0x322eaa+'.')[_0x10fe48(0xf7)]();}catch(_0x2d1939){await this[_0x10fe48(0x112)](),await this[_0x10fe48(0x114)]['error'](this[_0x10fe48(0x11c)]+'\x20'+_0x2d1939)[_0x10fe48(0xf7)]();throw _0x2d1939;}}async[a123_0x3bd140(0xfd)](_0x1a1215,_0x5e3c6f){const _0x235544=a123_0x3bd140;var _0x1b6c1f,_0x39cf58;this[_0x235544(0x114)]=typedi_1[_0x235544(0x118)]['get'](providers_tokens_1[_0x235544(0x123)][_0x235544(0x140)]),this[_0x235544(0x11c)]=(_0x5e3c6f?_0x5e3c6f+'\x20':'')+'['+commit_components_dto_1[_0x235544(0x130)][_0x235544(0xea)]+']',await this[_0x235544(0x114)]['log'](this['prefix']+_0x235544(0x11e));const _0x3aaf42=!!((_0x1b6c1f=_0x1a1215['components'])===null||_0x1b6c1f===void 0x0?void 0x0:_0x1b6c1f[_0x235544(0xed)])||!!((_0x39cf58=_0x1a1215[_0x235544(0x10d)])===null||_0x39cf58===void 0x0?void 0x0:_0x39cf58[_0x235544(0xe9)]);if(!_0x3aaf42){await this[_0x235544(0x114)][_0x235544(0xf8)](this[_0x235544(0x11c)]+_0x235544(0x113))['send']();return;}this[_0x235544(0x12c)]=_0x1a1215,await this[_0x235544(0xfe)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a123_0x3bd140(0x101)])({'transient':!![]})],CommitComponentsJob),exports[a123_0x3bd140(0x141)]=CommitComponentsJob;