const a104_0x4954b5=a104_0x2a65;(function(_0x355e67,_0x566e11){const _0x43e103=a104_0x2a65,_0x1da37c=_0x355e67();while(!![]){try{const _0xcf4236=-parseInt(_0x43e103(0x1d5))/0x1+parseInt(_0x43e103(0x207))/0x2*(parseInt(_0x43e103(0x219))/0x3)+-parseInt(_0x43e103(0x216))/0x4*(-parseInt(_0x43e103(0x1d4))/0x5)+-parseInt(_0x43e103(0x1f3))/0x6*(-parseInt(_0x43e103(0x1b2))/0x7)+-parseInt(_0x43e103(0x1ef))/0x8*(parseInt(_0x43e103(0x1f4))/0x9)+-parseInt(_0x43e103(0x1da))/0xa+parseInt(_0x43e103(0x206))/0xb;if(_0xcf4236===_0x566e11)break;else _0x1da37c['push'](_0x1da37c['shift']());}catch(_0x3d951a){_0x1da37c['push'](_0x1da37c['shift']());}}}(a104_0x381f,0x39575));const a104_0x3c126a=(function(){let _0x325272=!![];return function(_0xd25afe,_0xd0f463){const _0x57eab3=_0x325272?function(){const _0x3b685b=a104_0x2a65;if(_0xd0f463){const _0x83c96=_0xd0f463[_0x3b685b(0x1d0)](_0xd25afe,arguments);return _0xd0f463=null,_0x83c96;}}:function(){};return _0x325272=![],_0x57eab3;};}()),a104_0x5c3d5c=a104_0x3c126a(this,function(){const _0x5e8f9f=a104_0x2a65;return a104_0x5c3d5c[_0x5e8f9f(0x229)]()[_0x5e8f9f(0x1ce)](_0x5e8f9f(0x20d))['toString']()[_0x5e8f9f(0x1fa)](a104_0x5c3d5c)['search'](_0x5e8f9f(0x20d));});a104_0x5c3d5c();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a104_0x4954b5(0x1b0)]?function(_0x38e4c2,_0x52e44a,_0xb175b5,_0x293ac2){const _0x4ffb67=a104_0x4954b5;if(_0x293ac2===undefined)_0x293ac2=_0xb175b5;var _0x196c50=Object[_0x4ffb67(0x1fb)](_0x52e44a,_0xb175b5);(!_0x196c50||('get'in _0x196c50?!_0x52e44a[_0x4ffb67(0x212)]:_0x196c50[_0x4ffb67(0x225)]||_0x196c50['configurable']))&&(_0x196c50={'enumerable':!![],'get':function(){return _0x52e44a[_0xb175b5];}}),Object['defineProperty'](_0x38e4c2,_0x293ac2,_0x196c50);}:function(_0x555ee1,_0x4de2b7,_0x2f2fee,_0x57ee4b){if(_0x57ee4b===undefined)_0x57ee4b=_0x2f2fee;_0x555ee1[_0x57ee4b]=_0x4de2b7[_0x2f2fee];}),__setModuleDefault=this&&this[a104_0x4954b5(0x1f0)]||(Object[a104_0x4954b5(0x1b0)]?function(_0x31f606,_0x1e646a){const _0x3097d6=a104_0x4954b5;Object[_0x3097d6(0x21f)](_0x31f606,_0x3097d6(0x1bf),{'enumerable':!![],'value':_0x1e646a});}:function(_0x3ab98f,_0x206dee){const _0x488e87=a104_0x4954b5;_0x3ab98f[_0x488e87(0x1bf)]=_0x206dee;}),__decorate=this&&this[a104_0x4954b5(0x1b3)]||function(_0x161461,_0x3532eb,_0xc19759,_0x34728b){const _0x362b46=a104_0x4954b5;var _0x3cadb0=arguments[_0x362b46(0x202)],_0x2ee602=_0x3cadb0<0x3?_0x3532eb:_0x34728b===null?_0x34728b=Object[_0x362b46(0x1fb)](_0x3532eb,_0xc19759):_0x34728b,_0xb30eb2;if(typeof Reflect===_0x362b46(0x1e7)&&typeof Reflect[_0x362b46(0x1c8)]==='function')_0x2ee602=Reflect[_0x362b46(0x1c8)](_0x161461,_0x3532eb,_0xc19759,_0x34728b);else{for(var _0x4c6810=_0x161461[_0x362b46(0x202)]-0x1;_0x4c6810>=0x0;_0x4c6810--)if(_0xb30eb2=_0x161461[_0x4c6810])_0x2ee602=(_0x3cadb0<0x3?_0xb30eb2(_0x2ee602):_0x3cadb0>0x3?_0xb30eb2(_0x3532eb,_0xc19759,_0x2ee602):_0xb30eb2(_0x3532eb,_0xc19759))||_0x2ee602;}return _0x3cadb0>0x3&&_0x2ee602&&Object['defineProperty'](_0x3532eb,_0xc19759,_0x2ee602),_0x2ee602;},__importStar=this&&this[a104_0x4954b5(0x1b6)]||function(_0x1bbeee){const _0x3a2cff=a104_0x4954b5;if(_0x1bbeee&&_0x1bbeee[_0x3a2cff(0x212)])return _0x1bbeee;var _0x2e7b1f={};if(_0x1bbeee!=null){for(var _0x48a4a5 in _0x1bbeee)if(_0x48a4a5!==_0x3a2cff(0x1bf)&&Object[_0x3a2cff(0x1ae)][_0x3a2cff(0x220)]['call'](_0x1bbeee,_0x48a4a5))__createBinding(_0x2e7b1f,_0x1bbeee,_0x48a4a5);}return __setModuleDefault(_0x2e7b1f,_0x1bbeee),_0x2e7b1f;},__importDefault=this&&this[a104_0x4954b5(0x1d8)]||function(_0x276eed){const _0x2a6cdb=a104_0x4954b5;return _0x276eed&&_0x276eed[_0x2a6cdb(0x212)]?_0x276eed:{'default':_0x276eed};};Object[a104_0x4954b5(0x21f)](exports,a104_0x4954b5(0x212),{'value':!![]}),exports[a104_0x4954b5(0x1fd)]=void 0x0;function a104_0x2a65(_0x495e93,_0x50abbd){const _0x517f92=a104_0x381f();return a104_0x2a65=function(_0x5c3d5c,_0x3c126a){_0x5c3d5c=_0x5c3d5c-0x1ac;let _0x381f1a=_0x517f92[_0x5c3d5c];return _0x381f1a;},a104_0x2a65(_0x495e93,_0x50abbd);}const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a104_0x4954b5(0x1e2))),git_utils_1=require(a104_0x4954b5(0x1ea)),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a104_0x4954b5(0x20a)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a104_0x4954b5(0x1e1))),utils_1=require(a104_0x4954b5(0x1e9)),constants_1=require('../../../../constants'),git_provider_1=require(a104_0x4954b5(0x1fc)),bitbucket_api_service_1=require(a104_0x4954b5(0x1dc)),sfdx_utils_2=require(a104_0x4954b5(0x217)),fs_internal_1=require(a104_0x4954b5(0x1b4)),path_1=require('path'),providers_tokens_1=require(a104_0x4954b5(0x21a)),constants_2=require(a104_0x4954b5(0x1c9));function a104_0x381f(){const _0x735c59=['deleted','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','componentsToDelete','push','length','\x20Checking\x20written\x20components.','fileType','writeComponents','4444066glINhm','599102ljoYhp','startTime','groupComponentsByFileName','../utils/sfdx.utils','clearDir','fileName','(((.+)+)+)+$','branch','force','writed','catch','__esModule','provider','values','SFDXUtils','4dBqVwX','../../salesforce/utils/sfdx.utils','reduce','3xqNDkv','../../providers/providers.tokens','createProjectFrom','join','BitbucketApiService','SFDX','defineProperty','hasOwnProperty','://','isLoggedIn','includes','COMPONENTS_PER_TICK','writable','DEFAULT_GIT_USER_EMAIL','run','CommitComponentsDto','toString','get','\x20Checking\x20deleted\x20components.','prototype','MDApiUtils','create','\x20Deleted\x20','322jvYRbG','__decorate','../../internal/fs.internal','\x20Preparing\x20to\x20delete\x20components','__importStar','gitUrl','exec','GitProvider','type','prefix','splice','removeDir','prepareMdapi','default','cleanUp','clone','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','\x20Wrote\x20','send','log','mdapiUtils','now','decorate','../../../../constants','replace','sfLogger','getGitShellAuthorizationString','commitAndPush','search','name','apply','credentials','isEmptyDir','copyMdapiTo','163070mnZigW','246157RTYbXp','writeFlosumComponents','FORCE_APP_DEFAULT_DIR','__importDefault','copyVlocityComponents','2809330lodEaB','GitUtils','../../providers/api/bitbucket-api.service','Service','removeComponents','components','gitUtils','../../parsers/data/child-types','events','getRemote','error','\x20Start\x20converting\x20to\x20SFDX.','\x20Start\x20cloning\x20repository.','object','Tokens','../../../shared/utils','../utils/git.utils','sfdxUtils','copyProjectTo','\x20Prepare\x20mdapi\x20files.','dir','2692432uCtdbV','__setModuleDefault','\x20components','isSFDXProject','47262UmDCJC','9vWwvyB','getProtocol','sort','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','componentsToWrite','commitData','constructor','getOwnPropertyDescriptor','../../providers/types/git-provider','CommitComponentsJob'];a104_0x381f=function(){return _0x735c59;};return a104_0x381f();}let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(){const _0x26f2f1=a104_0x4954b5;super(...arguments),this[_0x26f2f1(0x224)]=0x3e8,this[_0x26f2f1(0x1f8)]=0x0,this[_0x26f2f1(0x200)]=0x0,this['startTime']=Date[_0x26f2f1(0x1c7)]();}async[a104_0x4954b5(0x1e3)](){const _0x3a4fb7=a104_0x4954b5,{repo:_0x49d960}=this[_0x3a4fb7(0x1f9)],_0x207437=typedi_1[_0x3a4fb7(0x1bf)][_0x3a4fb7(0x1ac)](providers_tokens_1[_0x3a4fb7(0x1e8)][_0x3a4fb7(0x1d1)]);if(this[_0x3a4fb7(0x1f9)][_0x3a4fb7(0x213)]===git_provider_1[_0x3a4fb7(0x1b9)]['Bitbucket']){const _0x59db6e=typedi_1[_0x3a4fb7(0x1bf)][_0x3a4fb7(0x1ac)](bitbucket_api_service_1[_0x3a4fb7(0x21d)]);await _0x59db6e[_0x3a4fb7(0x222)]();}return _0x49d960[_0x3a4fb7(0x1b7)][_0x3a4fb7(0x1ca)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x3a4fb7(0x1f5)])(_0x49d960[_0x3a4fb7(0x1b7)])+_0x3a4fb7(0x221)+_0x207437[_0x3a4fb7(0x1cc)]()+'@');}[a104_0x4954b5(0x209)](_0x159774){const _0xeac254=a104_0x4954b5;var _0x92175f;_0x159774[_0xeac254(0x1f6)](_0x35fc82=>child_types_1[_0xeac254(0x1bf)]['includes'](_0x35fc82[_0xeac254(0x204)])?0x1:-0x1);const _0x3a904e={};for(const _0x23a89e of _0x159774){_0x3a904e[_0x92175f=_0x23a89e[_0xeac254(0x20c)]]||(_0x3a904e[_0x92175f]=[]),_0x3a904e[_0x23a89e[_0xeac254(0x20c)]][_0xeac254(0x201)](_0x23a89e);}return Object[_0xeac254(0x214)](_0x3a904e)[_0xeac254(0x218)]((_0x1e33d0,_0xe150c8)=>[..._0x1e33d0,..._0xe150c8],[]);}async[a104_0x4954b5(0x205)](_0x5a8b49){const _0x534807=a104_0x4954b5;_0x5a8b49=this['groupComponentsByFileName'](_0x5a8b49);let _0x45b82e=0x0;while(_0x5a8b49[_0x534807(0x202)]){const _0x5e3b6d=_0x5a8b49['splice'](0x0,this[_0x534807(0x224)]);await this[_0x534807(0x1c6)][_0x534807(0x1d6)](_0x5e3b6d,{'skipChildErrors':this[_0x534807(0x1f9)][_0x534807(0x20e)][_0x534807(0x1cf)]==='master'}),_0x45b82e+=_0x5e3b6d[_0x534807(0x202)],this[_0x534807(0x1cb)][_0x534807(0x1c5)](this[_0x534807(0x1bb)]+_0x534807(0x1c3)+_0x45b82e+'/'+this['componentsToWrite']+_0x534807(0x1f1)),await this['sfLogger'][_0x534807(0x1c4)]();}}async[a104_0x4954b5(0x1de)](_0x3aeb05){const _0x4fd80d=a104_0x4954b5;_0x3aeb05[_0x4fd80d(0x1f6)](_0x4f0900=>child_types_1[_0x4fd80d(0x1bf)][_0x4fd80d(0x223)](_0x4f0900[_0x4fd80d(0x1ba)])?-0x1:0x1);let _0x220119=0x0;while(_0x3aeb05[_0x4fd80d(0x202)]){const _0x4c0b00=_0x3aeb05[_0x4fd80d(0x1bc)](0x0,this[_0x4fd80d(0x224)]);await this[_0x4fd80d(0x1c6)]['removeComponents'](_0x4c0b00),_0x220119+=_0x4c0b00[_0x4fd80d(0x202)],this[_0x4fd80d(0x1cb)][_0x4fd80d(0x1c5)](this['prefix']+_0x4fd80d(0x1b1)+_0x220119+'/'+this['componentsToDelete']+_0x4fd80d(0x1f1)),await this['sfLogger'][_0x4fd80d(0x1c4)]();}}async[a104_0x4954b5(0x1c0)](){const _0x302e93=a104_0x4954b5;this[_0x302e93(0x1e0)]&&await this[_0x302e93(0x1e0)][_0x302e93(0x1bd)]()[_0x302e93(0x211)](()=>void 0x0),this[_0x302e93(0x1c6)]&&await this['mdapiUtils'][_0x302e93(0x1bd)]()[_0x302e93(0x211)](()=>void 0x0),this['sfdxUtils']&&await this[_0x302e93(0x1eb)][_0x302e93(0x1bd)]()['catch'](()=>void 0x0);}async[a104_0x4954b5(0x1b8)](){const _0x37010b=a104_0x4954b5,{repo:_0x534c4e,branch:_0x527387,components:_0x217986,convertToSFDX:_0x59339b,message:_0x132040,user:_0xd19112}=this['commitData'];this[_0x37010b(0x1c6)]=new mdapi_utils_1[(_0x37010b(0x1af))](),this[_0x37010b(0x1e0)]=new git_utils_1[(_0x37010b(0x1db))](await this['getRemote']()),this[_0x37010b(0x1eb)]=new sfdx_utils_1[(_0x37010b(0x215))]();let _0x25cb46=_0x59339b;try{await this[_0x37010b(0x1cb)][_0x37010b(0x1c5)](this['prefix']+_0x37010b(0x1e6))[_0x37010b(0x1c4)](),await this['gitUtils'][_0x37010b(0x1c1)](_0x527387[_0x37010b(0x1cf)],_0x534c4e[_0x37010b(0x1cf)]);!this[_0x37010b(0x1f9)][_0x37010b(0x20f)]?(this['sfLogger']['log'](this['prefix']+_0x37010b(0x1ed)),await this[_0x37010b(0x1c6)][_0x37010b(0x1be)](this[_0x37010b(0x1e0)][_0x37010b(0x1ee)])):this[_0x37010b(0x1cb)]['log'](this[_0x37010b(0x1bb)]+_0x37010b(0x1c2));await this['sfLogger'][_0x37010b(0x1c5)](this[_0x37010b(0x1bb)]+_0x37010b(0x203))[_0x37010b(0x1c4)]();_0x217986[_0x37010b(0x210)]&&(this['sfLogger'][_0x37010b(0x1c5)](this[_0x37010b(0x1bb)]+'\x20Preparing\x20to\x20write\x20components'),this[_0x37010b(0x1f8)]=_0x217986[_0x37010b(0x210)]['length'],await this[_0x37010b(0x205)](_0x217986['writed']),await this[_0x37010b(0x1cb)]['send']());await this['sfLogger'][_0x37010b(0x1c5)](this['prefix']+_0x37010b(0x1ad))[_0x37010b(0x1c4)]();_0x217986[_0x37010b(0x1fe)]&&(this[_0x37010b(0x1cb)][_0x37010b(0x1c5)](this['prefix']+_0x37010b(0x1b5)),this[_0x37010b(0x200)]=_0x217986['deleted'][_0x37010b(0x202)],await this[_0x37010b(0x1de)](_0x217986[_0x37010b(0x1fe)]),await this[_0x37010b(0x1cb)]['send']());await this[_0x37010b(0x1cb)][_0x37010b(0x1c4)]();const _0x55dcbb=await fs_internal_1['FS'][_0x37010b(0x1d2)](this['gitUtils'][_0x37010b(0x1ee)]);await sfdx_utils_2[_0x37010b(0x21e)][_0x37010b(0x1f2)](this[_0x37010b(0x1e0)][_0x37010b(0x1ee)])?(_0x25cb46=!![],await fs_internal_1['FS'][_0x37010b(0x1bd)]((0x0,path_1[_0x37010b(0x21c)])(this[_0x37010b(0x1e0)][_0x37010b(0x1ee)],'force-app'))):(_0x25cb46&&(!_0x55dcbb&&(_0x25cb46=![])),await this[_0x37010b(0x1e0)][_0x37010b(0x20b)]());_0x25cb46?(await this[_0x37010b(0x1cb)][_0x37010b(0x1c5)](this[_0x37010b(0x1bb)]+_0x37010b(0x1e5))[_0x37010b(0x1c4)](),await this[_0x37010b(0x1eb)][_0x37010b(0x21b)](this[_0x37010b(0x1c6)][_0x37010b(0x1ee)]),await this[_0x37010b(0x1eb)][_0x37010b(0x1ec)](this[_0x37010b(0x1e0)]['dir'],!_0x55dcbb),await this[_0x37010b(0x1eb)][_0x37010b(0x1d9)](this[_0x37010b(0x1c6)][_0x37010b(0x1ee)],(0x0,path_1['join'])(this[_0x37010b(0x1e0)][_0x37010b(0x1ee)],constants_2[_0x37010b(0x1d7)])),await this[_0x37010b(0x1eb)]['removeDir']()):(await this[_0x37010b(0x1cb)][_0x37010b(0x1c5)](this[_0x37010b(0x1bb)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x37010b(0x1c4)](),await this[_0x37010b(0x1c6)][_0x37010b(0x1d3)](this[_0x37010b(0x1e0)][_0x37010b(0x1ee)]));await this[_0x37010b(0x1cb)][_0x37010b(0x1c5)](this[_0x37010b(0x1bb)]+_0x37010b(0x1ff))[_0x37010b(0x1c4)](),await this['gitUtils'][_0x37010b(0x1cd)](_0x132040,{'email':constants_1[_0x37010b(0x226)],'name':_0xd19112[_0x37010b(0x1cf)]},_0x527387[_0x37010b(0x1cf)]),await this[_0x37010b(0x1e0)]['removeDir'](),await this[_0x37010b(0x1c6)][_0x37010b(0x1bd)]();const _0x3f398d=this[_0x37010b(0x1f8)]+this[_0x37010b(0x200)];await this[_0x37010b(0x1cb)][_0x37010b(0x1c5)](this[_0x37010b(0x1bb)]+_0x37010b(0x1f7)+(Date[_0x37010b(0x1c7)]()-this[_0x37010b(0x208)])+'ms.\x20Committed\x20components\x20-\x20'+_0x3f398d+'.')[_0x37010b(0x1c4)]();}catch(_0x23963c){await this['cleanUp'](),await this[_0x37010b(0x1cb)][_0x37010b(0x1e4)](this[_0x37010b(0x1bb)]+'\x20'+_0x23963c)[_0x37010b(0x1c4)]();throw _0x23963c;}}async[a104_0x4954b5(0x227)](_0x461b7c,_0x3a88d8){const _0x3c6416=a104_0x4954b5;var _0x2cf1c2,_0x27b6dc;this['sfLogger']=typedi_1['default'][_0x3c6416(0x1ac)](providers_tokens_1[_0x3c6416(0x1e8)]['logger']),this[_0x3c6416(0x1bb)]=(_0x3a88d8?_0x3a88d8+'\x20':'')+'['+commit_components_dto_1[_0x3c6416(0x228)][_0x3c6416(0x1cf)]+']',await this[_0x3c6416(0x1cb)][_0x3c6416(0x1c5)](this[_0x3c6416(0x1bb)]+'\x20Checking\x20commit\x20components.');const _0x3fdd6d=!!((_0x2cf1c2=_0x461b7c[_0x3c6416(0x1df)])===null||_0x2cf1c2===void 0x0?void 0x0:_0x2cf1c2['writed'])||!!((_0x27b6dc=_0x461b7c[_0x3c6416(0x1df)])===null||_0x27b6dc===void 0x0?void 0x0:_0x27b6dc[_0x3c6416(0x1fe)]);if(!_0x3fdd6d){await this['sfLogger']['log'](this[_0x3c6416(0x1bb)]+'\x20Nothing\x20to\x20commit.\x20Skip.')['send']();return;}this[_0x3c6416(0x1f9)]=_0x461b7c,await this[_0x3c6416(0x1b8)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0x4954b5(0x1dd)])({'transient':!![]})],CommitComponentsJob),exports[a104_0x4954b5(0x1fd)]=CommitComponentsJob;