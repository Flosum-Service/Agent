const a123_0x8a785b=a123_0x4f42;(function(_0x11db5d,_0x42a00c){const _0x371d61=a123_0x4f42,_0x52b7bf=_0x11db5d();while(!![]){try{const _0x2eeb8e=-parseInt(_0x371d61(0x1fd))/0x1*(-parseInt(_0x371d61(0x1ed))/0x2)+-parseInt(_0x371d61(0x1d1))/0x3+-parseInt(_0x371d61(0x1ff))/0x4*(parseInt(_0x371d61(0x1af))/0x5)+-parseInt(_0x371d61(0x1a7))/0x6*(-parseInt(_0x371d61(0x1e8))/0x7)+parseInt(_0x371d61(0x1c9))/0x8*(-parseInt(_0x371d61(0x214))/0x9)+parseInt(_0x371d61(0x21a))/0xa+parseInt(_0x371d61(0x1e1))/0xb;if(_0x2eeb8e===_0x42a00c)break;else _0x52b7bf['push'](_0x52b7bf['shift']());}catch(_0x3d8eb8){_0x52b7bf['push'](_0x52b7bf['shift']());}}}(a123_0xfe15,0xdd3cb));function a123_0x4f42(_0x402d07,_0x1bce37){const _0x1c265e=a123_0xfe15();return a123_0x4f42=function(_0x4840d6,_0x5ced01){_0x4840d6=_0x4840d6-0x1a7;let _0xfe1538=_0x1c265e[_0x4840d6];return _0xfe1538;},a123_0x4f42(_0x402d07,_0x1bce37);}const a123_0x5ced01=(function(){let _0x9ab75f=!![];return function(_0x2e694a,_0x32a276){const _0x57fa38=_0x9ab75f?function(){if(_0x32a276){const _0x16b6e=_0x32a276['apply'](_0x2e694a,arguments);return _0x32a276=null,_0x16b6e;}}:function(){};return _0x9ab75f=![],_0x57fa38;};}()),a123_0x4840d6=a123_0x5ced01(this,function(){const _0x25b125=a123_0x4f42;return a123_0x4840d6[_0x25b125(0x20e)]()[_0x25b125(0x1e3)](_0x25b125(0x218))[_0x25b125(0x20e)]()['constructor'](a123_0x4840d6)[_0x25b125(0x1e3)](_0x25b125(0x218));});a123_0x4840d6();function a123_0xfe15(){const _0x535a27=['includes','master','../dto/commit-components.dto','COMPONENTS_PER_TICK','isLoggedIn','createProjectFrom','18oxinvf','../../providers/api/bitbucket-api.service','typedi','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','name','\x20Nothing\x20to\x20commit.\x20Skip.','../../providers/providers.tokens','push','940385qdlxkU','SFDX','\x20Preparing\x20to\x20write\x20components','sort','\x20Wrote\x20','../utils/git.utils','writeComponents','default','__importStar','\x20Checking\x20written\x20components.','force-app','prototype','isSFDXProject','replace','configurable','\x20Start\x20cloning\x20repository.','__decorate','CommitComponentsDto','copyProjectTo','../utils/mdapi.utils','copySFDXIgnoredComponents','__createBinding','log','getProtocol','length','removeDir','8rtpnlx','recordType','now','removeComponents','join','writeFlosumComponents','branch','\x20Checking\x20commit\x20components.','1644603UAWSrA','provider','://','create','fileName','\x20Start\x20converting\x20to\x20SFDX.','prepareMdapi','../../providers/types/git-provider','gitUrl','copyMdapiTo','groupComponentsByFileName','writable','../../internal/fs.internal','sfLogger','decorate','mdapiUtils','457611EdbDpX','events','search','values','fileType','../../parsers/data/child-types','ms.\x20Committed\x20components\x20-\x20','1422463vemKOt','hasOwnProperty','__esModule','getOwnPropertyDescriptor','defineProperty','1619806LbrxQO','get','isEmptyDir','force','__importDefault','reduce','components','GitUtils','clearDir','path','commitData','\x20Deleted\x20','sfdxUtils','../../../../constants','BitbucketApiService','Bitbucket','1OGEejJ','send','4CzHVQm','writed','splice','../../../shared/utils','type','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','call','componentsToDelete','startTime','__setModuleDefault','getRemote','componentsToWrite','getGitShellAuthorizationString','gitUtils','isConvertToSfdx','toString','CommitComponentsJob','../utils/sfdx.utils','\x20Prepare\x20mdapi\x20files.','credentials','catch','934110ZCcTHY','Service','prefix','GitProvider','(((.+)+)+)+$','\x20components','2851240qAbPEp','deleted','exec','Tokens','\x20Checking\x20deleted\x20components.','FORCE_APP_DEFAULT_DIR','dir'];a123_0xfe15=function(){return _0x535a27;};return a123_0xfe15();}'use strict';var __createBinding=this&&this[a123_0x8a785b(0x1c4)]||(Object[a123_0x8a785b(0x1d4)]?function(_0x210ebc,_0x357f7b,_0x3792ea,_0x376f93){const _0x358817=a123_0x8a785b;if(_0x376f93===undefined)_0x376f93=_0x3792ea;var _0x132cbd=Object['getOwnPropertyDescriptor'](_0x357f7b,_0x3792ea);(!_0x132cbd||(_0x358817(0x1ee)in _0x132cbd?!_0x357f7b['__esModule']:_0x132cbd[_0x358817(0x1dc)]||_0x132cbd[_0x358817(0x1bd)]))&&(_0x132cbd={'enumerable':!![],'get':function(){return _0x357f7b[_0x3792ea];}}),Object[_0x358817(0x1ec)](_0x210ebc,_0x376f93,_0x132cbd);}:function(_0x1324a0,_0x6a6cf,_0x5e2e1f,_0xe74eb){if(_0xe74eb===undefined)_0xe74eb=_0x5e2e1f;_0x1324a0[_0xe74eb]=_0x6a6cf[_0x5e2e1f];}),__setModuleDefault=this&&this[a123_0x8a785b(0x208)]||(Object['create']?function(_0x369006,_0x17165a){const _0x5c7db1=a123_0x8a785b;Object[_0x5c7db1(0x1ec)](_0x369006,_0x5c7db1(0x1b6),{'enumerable':!![],'value':_0x17165a});}:function(_0x2bb4d9,_0x20fbc3){const _0x4e7ba7=a123_0x8a785b;_0x2bb4d9[_0x4e7ba7(0x1b6)]=_0x20fbc3;}),__decorate=this&&this[a123_0x8a785b(0x1bf)]||function(_0x33e2ac,_0x56855e,_0x5a8072,_0x18f482){const _0x2961a8=a123_0x8a785b;var _0x390a46=arguments['length'],_0x35d624=_0x390a46<0x3?_0x56855e:_0x18f482===null?_0x18f482=Object[_0x2961a8(0x1eb)](_0x56855e,_0x5a8072):_0x18f482,_0x1277e4;if(typeof Reflect==='object'&&typeof Reflect[_0x2961a8(0x1df)]==='function')_0x35d624=Reflect['decorate'](_0x33e2ac,_0x56855e,_0x5a8072,_0x18f482);else{for(var _0xba439b=_0x33e2ac[_0x2961a8(0x1c7)]-0x1;_0xba439b>=0x0;_0xba439b--)if(_0x1277e4=_0x33e2ac[_0xba439b])_0x35d624=(_0x390a46<0x3?_0x1277e4(_0x35d624):_0x390a46>0x3?_0x1277e4(_0x56855e,_0x5a8072,_0x35d624):_0x1277e4(_0x56855e,_0x5a8072))||_0x35d624;}return _0x390a46>0x3&&_0x35d624&&Object[_0x2961a8(0x1ec)](_0x56855e,_0x5a8072,_0x35d624),_0x35d624;},__importStar=this&&this[a123_0x8a785b(0x1b7)]||function(_0x3afd83){const _0x40f8d3=a123_0x8a785b;if(_0x3afd83&&_0x3afd83['__esModule'])return _0x3afd83;var _0x22f1e={};if(_0x3afd83!=null){for(var _0x14cd0a in _0x3afd83)if(_0x14cd0a!==_0x40f8d3(0x1b6)&&Object[_0x40f8d3(0x1ba)][_0x40f8d3(0x1e9)][_0x40f8d3(0x205)](_0x3afd83,_0x14cd0a))__createBinding(_0x22f1e,_0x3afd83,_0x14cd0a);}return __setModuleDefault(_0x22f1e,_0x3afd83),_0x22f1e;},__importDefault=this&&this[a123_0x8a785b(0x1f1)]||function(_0x5c27b0){const _0xba15ce=a123_0x8a785b;return _0x5c27b0&&_0x5c27b0[_0xba15ce(0x1ea)]?_0x5c27b0:{'default':_0x5c27b0};};Object[a123_0x8a785b(0x1ec)](exports,a123_0x8a785b(0x1ea),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const commit_components_dto_1=require(a123_0x8a785b(0x223)),events_1=__importDefault(require(a123_0x8a785b(0x1e2))),git_utils_1=require(a123_0x8a785b(0x1b4)),mdapi_utils_1=require(a123_0x8a785b(0x1c2)),sfdx_utils_1=require(a123_0x8a785b(0x210)),typedi_1=__importStar(require(a123_0x8a785b(0x1a9))),child_types_1=__importDefault(require(a123_0x8a785b(0x1e6))),utils_1=require(a123_0x8a785b(0x202)),constants_1=require(a123_0x8a785b(0x1fa)),git_provider_1=require(a123_0x8a785b(0x1d8)),bitbucket_api_service_1=require(a123_0x8a785b(0x1a8)),sfdx_utils_2=require('../../salesforce/utils/sfdx.utils'),fs_internal_1=require(a123_0x8a785b(0x1dd)),path_1=require(a123_0x8a785b(0x1f6)),providers_tokens_1=require(a123_0x8a785b(0x1ad)),constants_2=require(a123_0x8a785b(0x1fa));let CommitComponentsJob=class CommitComponentsJob extends events_1[a123_0x8a785b(0x1b6)]{constructor(){const _0x592f5b=a123_0x8a785b;super(...arguments),this[_0x592f5b(0x224)]=0x3e8,this['componentsToWrite']=0x0,this['componentsToDelete']=0x0,this[_0x592f5b(0x207)]=Date[_0x592f5b(0x1cb)]();}async[a123_0x8a785b(0x209)](){const _0x324ccd=a123_0x8a785b,{repo:_0x56a5e0}=this['commitData'],_0x53459e=typedi_1[_0x324ccd(0x1b6)]['get'](providers_tokens_1[_0x324ccd(0x21d)][_0x324ccd(0x212)]);if(this[_0x324ccd(0x1f7)][_0x324ccd(0x1d2)]===git_provider_1[_0x324ccd(0x217)][_0x324ccd(0x1fc)]){const _0x2192b4=typedi_1[_0x324ccd(0x1b6)][_0x324ccd(0x1ee)](bitbucket_api_service_1[_0x324ccd(0x1fb)]);await _0x2192b4[_0x324ccd(0x225)]();}return _0x56a5e0[_0x324ccd(0x1d9)][_0x324ccd(0x1bc)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x324ccd(0x1c6)])(_0x56a5e0[_0x324ccd(0x1d9)])+_0x324ccd(0x1d3)+_0x53459e[_0x324ccd(0x20b)]()+'@');}['groupComponentsByFileName'](_0xeacabd){const _0xbeeb99=a123_0x8a785b;var _0x58c997;_0xeacabd[_0xbeeb99(0x1b2)](_0x17bc9c=>child_types_1[_0xbeeb99(0x1b6)][_0xbeeb99(0x221)](_0x17bc9c[_0xbeeb99(0x1e5)])?0x1:-0x1);const _0x43e70c={};for(const _0x44e020 of _0xeacabd){_0x43e70c[_0x58c997=_0x44e020[_0xbeeb99(0x1d5)]]||(_0x43e70c[_0x58c997]=[]),_0x43e70c[_0x44e020[_0xbeeb99(0x1d5)]][_0xbeeb99(0x1ae)](_0x44e020);}return Object[_0xbeeb99(0x1e4)](_0x43e70c)[_0xbeeb99(0x1f2)]((_0x1ecabf,_0x3aa603)=>[..._0x1ecabf,..._0x3aa603],[]);}async[a123_0x8a785b(0x1b5)](_0x3bf063){const _0xd6e67b=a123_0x8a785b;_0x3bf063=this[_0xd6e67b(0x1db)](_0x3bf063);let _0x259e24=0x0;while(_0x3bf063[_0xd6e67b(0x1c7)]){const _0xc13a03=_0x3bf063['splice'](0x0,this['COMPONENTS_PER_TICK']);await this['mdapiUtils'][_0xd6e67b(0x1ce)](_0xc13a03,{'skipChildErrors':this[_0xd6e67b(0x1f7)][_0xd6e67b(0x1cf)][_0xd6e67b(0x1ab)]===_0xd6e67b(0x222),'recordType':this[_0xd6e67b(0x1f7)][_0xd6e67b(0x1ca)]}),_0x259e24+=_0xc13a03[_0xd6e67b(0x1c7)],this[_0xd6e67b(0x1de)][_0xd6e67b(0x1c5)](this[_0xd6e67b(0x216)]+_0xd6e67b(0x1b3)+_0x259e24+'/'+this['componentsToWrite']+_0xd6e67b(0x219)),await this['sfLogger'][_0xd6e67b(0x1fe)]();}}async[a123_0x8a785b(0x1cc)](_0xbc6cc0){const _0x5b9c25=a123_0x8a785b;_0xbc6cc0['sort'](_0x34a733=>child_types_1['default'][_0x5b9c25(0x221)](_0x34a733[_0x5b9c25(0x203)])?-0x1:0x1);let _0x3c4aa9=0x0;while(_0xbc6cc0[_0x5b9c25(0x1c7)]){const _0x2ee0fe=_0xbc6cc0[_0x5b9c25(0x201)](0x0,this[_0x5b9c25(0x224)]);await this['mdapiUtils']['removeComponents'](_0x2ee0fe,this['commitData'][_0x5b9c25(0x1ca)]),_0x3c4aa9+=_0x2ee0fe[_0x5b9c25(0x1c7)],this[_0x5b9c25(0x1de)][_0x5b9c25(0x1c5)](this[_0x5b9c25(0x216)]+_0x5b9c25(0x1f8)+_0x3c4aa9+'/'+this[_0x5b9c25(0x206)]+'\x20components'),await this[_0x5b9c25(0x1de)][_0x5b9c25(0x1fe)]();}}async['cleanUp'](){const _0x730c9=a123_0x8a785b;this[_0x730c9(0x20c)]&&await this[_0x730c9(0x20c)]['removeDir']()[_0x730c9(0x213)](()=>void 0x0),this[_0x730c9(0x1e0)]&&await this['mdapiUtils']['removeDir']()[_0x730c9(0x213)](()=>void 0x0),this[_0x730c9(0x1f9)]&&await this['sfdxUtils'][_0x730c9(0x1c8)]()[_0x730c9(0x213)](()=>void 0x0);}async[a123_0x8a785b(0x21c)](){const _0x7d35e9=a123_0x8a785b,{repo:_0x50aa52,branch:_0x14c75,components:_0x20c94d,convertToSFDX:_0x516177,message:_0x115d4a,user:_0x5e1380}=this['commitData'];this[_0x7d35e9(0x1e0)]=new mdapi_utils_1['MDApiUtils'](),this[_0x7d35e9(0x20c)]=new git_utils_1[(_0x7d35e9(0x1f4))](await this['getRemote']()),this[_0x7d35e9(0x1f9)]=new sfdx_utils_1['SFDXUtils']();let _0x576ef7=_0x516177&&this['sfdxUtils'][_0x7d35e9(0x20d)](this[_0x7d35e9(0x1f7)]['recordType']);try{await this['sfLogger'][_0x7d35e9(0x1c5)](this['prefix']+_0x7d35e9(0x1be))[_0x7d35e9(0x1fe)](),await this[_0x7d35e9(0x20c)]['clone'](_0x14c75[_0x7d35e9(0x1ab)],_0x50aa52[_0x7d35e9(0x1ab)]);!this['commitData'][_0x7d35e9(0x1f0)]?(this[_0x7d35e9(0x1de)][_0x7d35e9(0x1c5)](this[_0x7d35e9(0x216)]+_0x7d35e9(0x211)),await this[_0x7d35e9(0x1e0)][_0x7d35e9(0x1d7)](this[_0x7d35e9(0x20c)]['dir'])):this[_0x7d35e9(0x1de)]['log'](this['prefix']+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this['sfLogger'][_0x7d35e9(0x1c5)](this[_0x7d35e9(0x216)]+_0x7d35e9(0x1b8))[_0x7d35e9(0x1fe)]();_0x20c94d[_0x7d35e9(0x200)]&&(this[_0x7d35e9(0x1de)][_0x7d35e9(0x1c5)](this[_0x7d35e9(0x216)]+_0x7d35e9(0x1b1)),this['componentsToWrite']=_0x20c94d[_0x7d35e9(0x200)][_0x7d35e9(0x1c7)],await this['writeComponents'](_0x20c94d['writed']),await this[_0x7d35e9(0x1de)]['send']());await this[_0x7d35e9(0x1de)][_0x7d35e9(0x1c5)](this[_0x7d35e9(0x216)]+_0x7d35e9(0x21e))[_0x7d35e9(0x1fe)]();_0x20c94d[_0x7d35e9(0x21b)]&&(this['sfLogger']['log'](this[_0x7d35e9(0x216)]+'\x20Preparing\x20to\x20delete\x20components'),this[_0x7d35e9(0x206)]=_0x20c94d[_0x7d35e9(0x21b)][_0x7d35e9(0x1c7)],await this['removeComponents'](_0x20c94d[_0x7d35e9(0x21b)]),await this['sfLogger'][_0x7d35e9(0x1fe)]());await this['sfLogger'][_0x7d35e9(0x1fe)]();const _0x42818f=await fs_internal_1['FS'][_0x7d35e9(0x1ef)](this[_0x7d35e9(0x20c)][_0x7d35e9(0x220)]);await sfdx_utils_2[_0x7d35e9(0x1b0)][_0x7d35e9(0x1bb)](this[_0x7d35e9(0x20c)][_0x7d35e9(0x220)])?(_0x576ef7=!![],await fs_internal_1['FS'][_0x7d35e9(0x1c8)]((0x0,path_1[_0x7d35e9(0x1cd)])(this[_0x7d35e9(0x20c)][_0x7d35e9(0x220)],_0x7d35e9(0x1b9)))):(_0x576ef7&&(!_0x42818f&&(_0x576ef7=![])),await this[_0x7d35e9(0x20c)][_0x7d35e9(0x1f5)]());_0x576ef7?(await this[_0x7d35e9(0x1de)][_0x7d35e9(0x1c5)](this[_0x7d35e9(0x216)]+_0x7d35e9(0x1d6))[_0x7d35e9(0x1fe)](),await this[_0x7d35e9(0x1f9)][_0x7d35e9(0x226)](this[_0x7d35e9(0x1e0)][_0x7d35e9(0x220)]),await this['sfdxUtils'][_0x7d35e9(0x1c1)](this['gitUtils'][_0x7d35e9(0x220)],!_0x42818f),await this['sfdxUtils'][_0x7d35e9(0x1c3)](this['mdapiUtils']['dir'],(0x0,path_1[_0x7d35e9(0x1cd)])(this['gitUtils'][_0x7d35e9(0x220)],constants_2[_0x7d35e9(0x21f)])),await this[_0x7d35e9(0x1f9)][_0x7d35e9(0x1c8)]()):(await this[_0x7d35e9(0x1de)][_0x7d35e9(0x1c5)](this[_0x7d35e9(0x216)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x7d35e9(0x1fe)](),await this[_0x7d35e9(0x1e0)][_0x7d35e9(0x1da)](this[_0x7d35e9(0x20c)][_0x7d35e9(0x220)]));await this[_0x7d35e9(0x1de)][_0x7d35e9(0x1c5)](this[_0x7d35e9(0x216)]+_0x7d35e9(0x204))[_0x7d35e9(0x1fe)](),await this['gitUtils']['commitAndPush'](_0x115d4a,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x5e1380[_0x7d35e9(0x1ab)]},_0x14c75['name']),await this[_0x7d35e9(0x20c)][_0x7d35e9(0x1c8)](),await this[_0x7d35e9(0x1e0)]['removeDir']();const _0x4d3e01=this[_0x7d35e9(0x20a)]+this[_0x7d35e9(0x206)];await this[_0x7d35e9(0x1de)]['log'](this[_0x7d35e9(0x216)]+_0x7d35e9(0x1aa)+(Date[_0x7d35e9(0x1cb)]()-this[_0x7d35e9(0x207)])+_0x7d35e9(0x1e7)+_0x4d3e01+'.')[_0x7d35e9(0x1fe)]();}catch(_0x4dbe51){await this['cleanUp'](),await this[_0x7d35e9(0x1de)]['error'](this[_0x7d35e9(0x216)]+'\x20'+_0x4dbe51)[_0x7d35e9(0x1fe)]();throw _0x4dbe51;}}async['run'](_0x3e03e0,_0x361b74){const _0x1f947e=a123_0x8a785b;var _0x3af68b,_0x3c9da7;this[_0x1f947e(0x1de)]=typedi_1['default'][_0x1f947e(0x1ee)](providers_tokens_1[_0x1f947e(0x21d)]['logger']),this[_0x1f947e(0x216)]=(_0x361b74?_0x361b74+'\x20':'')+'['+commit_components_dto_1[_0x1f947e(0x1c0)][_0x1f947e(0x1ab)]+']',await this[_0x1f947e(0x1de)]['log'](this[_0x1f947e(0x216)]+_0x1f947e(0x1d0));const _0xd956eb=!!((_0x3af68b=_0x3e03e0[_0x1f947e(0x1f3)])===null||_0x3af68b===void 0x0?void 0x0:_0x3af68b[_0x1f947e(0x200)])||!!((_0x3c9da7=_0x3e03e0[_0x1f947e(0x1f3)])===null||_0x3c9da7===void 0x0?void 0x0:_0x3c9da7[_0x1f947e(0x21b)]);if(!_0xd956eb){await this[_0x1f947e(0x1de)]['log'](this[_0x1f947e(0x216)]+_0x1f947e(0x1ac))[_0x1f947e(0x1fe)]();return;}this['commitData']=_0x3e03e0,await this[_0x1f947e(0x21c)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a123_0x8a785b(0x215)])({'transient':!![]})],CommitComponentsJob),exports[a123_0x8a785b(0x20f)]=CommitComponentsJob;