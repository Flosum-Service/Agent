const a105_0x32540b=a105_0xcfc4;(function(_0x365f33,_0x34ea5e){const _0x20ee46=a105_0xcfc4,_0x2e18c9=_0x365f33();while(!![]){try{const _0x5f1c6e=-parseInt(_0x20ee46(0x197))/0x1*(parseInt(_0x20ee46(0x19d))/0x2)+parseInt(_0x20ee46(0x1c7))/0x3*(parseInt(_0x20ee46(0x1e9))/0x4)+-parseInt(_0x20ee46(0x1dc))/0x5+-parseInt(_0x20ee46(0x1d5))/0x6*(-parseInt(_0x20ee46(0x1dd))/0x7)+-parseInt(_0x20ee46(0x1fb))/0x8*(parseInt(_0x20ee46(0x1cf))/0x9)+-parseInt(_0x20ee46(0x1b9))/0xa+-parseInt(_0x20ee46(0x1c6))/0xb*(-parseInt(_0x20ee46(0x1e3))/0xc);if(_0x5f1c6e===_0x34ea5e)break;else _0x2e18c9['push'](_0x2e18c9['shift']());}catch(_0x165260){_0x2e18c9['push'](_0x2e18c9['shift']());}}}(a105_0x2899,0x190d5));function a105_0x2899(){const _0x14d102=['\x20Copying\x20mdapi\x20to\x20git\x20folder.','apply','prototype','52176SbIYkF','createProjectFrom','Bitbucket','../../../shared/utils','typedi','now','deleted','../dto/commit-components.dto','\x20Wrote\x20','getRemote','includes','\x20components','../utils/sfdx.utils','join','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','copyProjectTo','\x20Preparing\x20to\x20delete\x20components','commitData','1622872kZcaOO','decorate','../../../../constants','default','dir','BitbucketApiService','writable','search','SFDXUtils','\x20Checking\x20deleted\x20components.','sfdxUtils','COMPONENTS_PER_TICK','create','3JWGwRr','(((.+)+)+)+$','copyMdapiTo','componentsToWrite','object','isConvertToSfdx','134854sZhdFB','components','prefix','cleanUp','CommitComponentsJob','\x20Prepare\x20mdapi\x20files.','send','get','getOwnPropertyDescriptor','../../providers/providers.tokens','gitUrl','\x20Nothing\x20to\x20commit.\x20Skip.','GitUtils','error','credentials','../../salesforce/utils/sfdx.utils','writeComponents','provider','../../providers/types/git-provider','toString','Service','master','ms.\x20Committed\x20components\x20-\x20','name','branch','removeDir','gitUtils','Tokens','416640XurUeD','://','\x20Start\x20cloning\x20repository.','removeComponents','values','__importStar','type','\x20Start\x20converting\x20to\x20SFDX.','mdapiUtils','CommitComponentsDto','groupComponentsByFileName','__setModuleDefault','getGitShellAuthorizationString','55fpZhdY','24dkNkba','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','componentsToDelete','sort','fileType','fileName','__esModule','reduce','9MeGVjE','../utils/mdapi.utils','length','copySFDXIgnoredComponents','recordType','configurable','44274knVDjr','defineProperty','events','writeFlosumComponents','splice','function','__importDefault','558355VDFapQ','168yWkKHo','catch','startTime','sfLogger','log','hasOwnProperty','911136ocWrEP','logger','push'];a105_0x2899=function(){return _0x14d102;};return a105_0x2899();}const a105_0x145744=(function(){let _0xca3b60=!![];return function(_0x4db1ca,_0x28fe9f){const _0x3453e5=_0xca3b60?function(){const _0x2f6877=a105_0xcfc4;if(_0x28fe9f){const _0x21b7d1=_0x28fe9f[_0x2f6877(0x1e7)](_0x4db1ca,arguments);return _0x28fe9f=null,_0x21b7d1;}}:function(){};return _0xca3b60=![],_0x3453e5;};}()),a105_0x465067=a105_0x145744(this,function(){const _0x1e64cc=a105_0xcfc4;return a105_0x465067[_0x1e64cc(0x1b0)]()[_0x1e64cc(0x191)](_0x1e64cc(0x198))[_0x1e64cc(0x1b0)]()['constructor'](a105_0x465067)[_0x1e64cc(0x191)]('(((.+)+)+)+$');});a105_0x465067();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a105_0x32540b(0x196)]?function(_0x39aa16,_0x5bf03d,_0x27b7d2,_0x253e8e){const _0x20563f=a105_0x32540b;if(_0x253e8e===undefined)_0x253e8e=_0x27b7d2;var _0x33d175=Object['getOwnPropertyDescriptor'](_0x5bf03d,_0x27b7d2);(!_0x33d175||(_0x20563f(0x1a4)in _0x33d175?!_0x5bf03d[_0x20563f(0x1cd)]:_0x33d175[_0x20563f(0x201)]||_0x33d175[_0x20563f(0x1d4)]))&&(_0x33d175={'enumerable':!![],'get':function(){return _0x5bf03d[_0x27b7d2];}}),Object['defineProperty'](_0x39aa16,_0x253e8e,_0x33d175);}:function(_0x43b974,_0x516e86,_0x598954,_0x327541){if(_0x327541===undefined)_0x327541=_0x598954;_0x43b974[_0x327541]=_0x516e86[_0x598954];}),__setModuleDefault=this&&this[a105_0x32540b(0x1c4)]||(Object[a105_0x32540b(0x196)]?function(_0x2e830b,_0x1fc71f){const _0x3d9abb=a105_0x32540b;Object['defineProperty'](_0x2e830b,_0x3d9abb(0x1fe),{'enumerable':!![],'value':_0x1fc71f});}:function(_0x2891a9,_0x3f0e1b){const _0xc2d4d9=a105_0x32540b;_0x2891a9[_0xc2d4d9(0x1fe)]=_0x3f0e1b;}),__decorate=this&&this['__decorate']||function(_0x133769,_0x2a600a,_0x118d67,_0x607267){const _0x52bfd0=a105_0x32540b;var _0x33efff=arguments[_0x52bfd0(0x1d1)],_0x1ba4c9=_0x33efff<0x3?_0x2a600a:_0x607267===null?_0x607267=Object[_0x52bfd0(0x1a5)](_0x2a600a,_0x118d67):_0x607267,_0x3afe93;if(typeof Reflect===_0x52bfd0(0x19b)&&typeof Reflect[_0x52bfd0(0x1fc)]===_0x52bfd0(0x1da))_0x1ba4c9=Reflect[_0x52bfd0(0x1fc)](_0x133769,_0x2a600a,_0x118d67,_0x607267);else{for(var _0xbff737=_0x133769[_0x52bfd0(0x1d1)]-0x1;_0xbff737>=0x0;_0xbff737--)if(_0x3afe93=_0x133769[_0xbff737])_0x1ba4c9=(_0x33efff<0x3?_0x3afe93(_0x1ba4c9):_0x33efff>0x3?_0x3afe93(_0x2a600a,_0x118d67,_0x1ba4c9):_0x3afe93(_0x2a600a,_0x118d67))||_0x1ba4c9;}return _0x33efff>0x3&&_0x1ba4c9&&Object['defineProperty'](_0x2a600a,_0x118d67,_0x1ba4c9),_0x1ba4c9;},__importStar=this&&this[a105_0x32540b(0x1be)]||function(_0x391361){const _0x39b86b=a105_0x32540b;if(_0x391361&&_0x391361[_0x39b86b(0x1cd)])return _0x391361;var _0x214e55={};if(_0x391361!=null){for(var _0x2fa21a in _0x391361)if(_0x2fa21a!=='default'&&Object[_0x39b86b(0x1e8)][_0x39b86b(0x1e2)]['call'](_0x391361,_0x2fa21a))__createBinding(_0x214e55,_0x391361,_0x2fa21a);}return __setModuleDefault(_0x214e55,_0x391361),_0x214e55;},__importDefault=this&&this[a105_0x32540b(0x1db)]||function(_0x2e5ed0){return _0x2e5ed0&&_0x2e5ed0['__esModule']?_0x2e5ed0:{'default':_0x2e5ed0};};function a105_0xcfc4(_0x1f14b7,_0x3915cb){const _0x517631=a105_0x2899();return a105_0xcfc4=function(_0x465067,_0x145744){_0x465067=_0x465067-0x191;let _0x2899b2=_0x517631[_0x465067];return _0x2899b2;},a105_0xcfc4(_0x1f14b7,_0x3915cb);}Object[a105_0x32540b(0x1d6)](exports,a105_0x32540b(0x1cd),{'value':!![]}),exports[a105_0x32540b(0x1a1)]=void 0x0;const commit_components_dto_1=require(a105_0x32540b(0x1f0)),events_1=__importDefault(require(a105_0x32540b(0x1d7))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a105_0x32540b(0x1d0)),sfdx_utils_1=require(a105_0x32540b(0x1f5)),typedi_1=__importStar(require(a105_0x32540b(0x1ed))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require(a105_0x32540b(0x1ec)),constants_1=require(a105_0x32540b(0x1fd)),git_provider_1=require(a105_0x32540b(0x1af)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),sfdx_utils_2=require(a105_0x32540b(0x1ac)),fs_internal_1=require('../../internal/fs.internal'),path_1=require('path'),providers_tokens_1=require(a105_0x32540b(0x1a6)),constants_2=require(a105_0x32540b(0x1fd));let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(){const _0x383fea=a105_0x32540b;super(...arguments),this[_0x383fea(0x195)]=0x3e8,this[_0x383fea(0x19a)]=0x0,this[_0x383fea(0x1c9)]=0x0,this[_0x383fea(0x1df)]=Date[_0x383fea(0x1ee)]();}async['getRemote'](){const _0x53f85b=a105_0x32540b,{repo:_0x466a32}=this[_0x53f85b(0x1fa)],_0x13e35a=typedi_1[_0x53f85b(0x1fe)][_0x53f85b(0x1a4)](providers_tokens_1[_0x53f85b(0x1b8)][_0x53f85b(0x1ab)]);if(this[_0x53f85b(0x1fa)][_0x53f85b(0x1ae)]===git_provider_1['GitProvider'][_0x53f85b(0x1eb)]){const _0x2d9629=typedi_1[_0x53f85b(0x1fe)][_0x53f85b(0x1a4)](bitbucket_api_service_1[_0x53f85b(0x200)]);await _0x2d9629['isLoggedIn']();}return _0x466a32[_0x53f85b(0x1a7)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x466a32[_0x53f85b(0x1a7)])+_0x53f85b(0x1ba)+_0x13e35a[_0x53f85b(0x1c5)]()+'@');}['groupComponentsByFileName'](_0x37981d){const _0x59e778=a105_0x32540b;var _0x4fffd2;_0x37981d[_0x59e778(0x1ca)](_0x2f45ee=>child_types_1[_0x59e778(0x1fe)][_0x59e778(0x1f3)](_0x2f45ee[_0x59e778(0x1cb)])?0x1:-0x1);const _0x10e489={};for(const _0x132356 of _0x37981d){_0x10e489[_0x4fffd2=_0x132356['fileName']]||(_0x10e489[_0x4fffd2]=[]),_0x10e489[_0x132356[_0x59e778(0x1cc)]][_0x59e778(0x1e5)](_0x132356);}return Object[_0x59e778(0x1bd)](_0x10e489)[_0x59e778(0x1ce)]((_0x26b9e8,_0x57aad6)=>[..._0x26b9e8,..._0x57aad6],[]);}async[a105_0x32540b(0x1ad)](_0x270e50){const _0x770127=a105_0x32540b;_0x270e50=this[_0x770127(0x1c3)](_0x270e50);let _0x9e56a7=0x0;while(_0x270e50[_0x770127(0x1d1)]){const _0x3cb487=_0x270e50[_0x770127(0x1d9)](0x0,this[_0x770127(0x195)]);await this['mdapiUtils'][_0x770127(0x1d8)](_0x3cb487,{'skipChildErrors':this['commitData'][_0x770127(0x1b5)][_0x770127(0x1b4)]===_0x770127(0x1b2),'recordType':this[_0x770127(0x1fa)][_0x770127(0x1d3)]}),_0x9e56a7+=_0x3cb487[_0x770127(0x1d1)],this[_0x770127(0x1e0)][_0x770127(0x1e1)](this['prefix']+_0x770127(0x1f1)+_0x9e56a7+'/'+this[_0x770127(0x19a)]+_0x770127(0x1f4)),await this[_0x770127(0x1e0)][_0x770127(0x1a3)]();}}async[a105_0x32540b(0x1bc)](_0x480914){const _0x4232bf=a105_0x32540b;_0x480914[_0x4232bf(0x1ca)](_0xaafd0c=>child_types_1[_0x4232bf(0x1fe)][_0x4232bf(0x1f3)](_0xaafd0c[_0x4232bf(0x1bf)])?-0x1:0x1);let _0x30ff8f=0x0;while(_0x480914[_0x4232bf(0x1d1)]){const _0x533408=_0x480914[_0x4232bf(0x1d9)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x4232bf(0x1c1)][_0x4232bf(0x1bc)](_0x533408,this[_0x4232bf(0x1fa)][_0x4232bf(0x1d3)]),_0x30ff8f+=_0x533408[_0x4232bf(0x1d1)],this[_0x4232bf(0x1e0)][_0x4232bf(0x1e1)](this[_0x4232bf(0x19f)]+'\x20Deleted\x20'+_0x30ff8f+'/'+this[_0x4232bf(0x1c9)]+_0x4232bf(0x1f4)),await this[_0x4232bf(0x1e0)][_0x4232bf(0x1a3)]();}}async[a105_0x32540b(0x1a0)](){const _0x2af985=a105_0x32540b;this[_0x2af985(0x1b7)]&&await this[_0x2af985(0x1b7)][_0x2af985(0x1b6)]()[_0x2af985(0x1de)](()=>void 0x0),this[_0x2af985(0x1c1)]&&await this[_0x2af985(0x1c1)][_0x2af985(0x1b6)]()[_0x2af985(0x1de)](()=>void 0x0),this['sfdxUtils']&&await this[_0x2af985(0x194)][_0x2af985(0x1b6)]()[_0x2af985(0x1de)](()=>void 0x0);}async['exec'](){const _0x568e1c=a105_0x32540b,{repo:_0x37cd35,branch:_0xea0184,components:_0x34f3f2,convertToSFDX:_0x1882ae,message:_0x2cc46a,user:_0x3ebdcc}=this[_0x568e1c(0x1fa)];this[_0x568e1c(0x1c1)]=new mdapi_utils_1['MDApiUtils'](),this[_0x568e1c(0x1b7)]=new git_utils_1[(_0x568e1c(0x1a9))](await this[_0x568e1c(0x1f2)]()),this['sfdxUtils']=new sfdx_utils_1[(_0x568e1c(0x192))]();let _0x30929d=_0x1882ae&&this[_0x568e1c(0x194)][_0x568e1c(0x19c)](this[_0x568e1c(0x1fa)][_0x568e1c(0x1d3)]);try{await this[_0x568e1c(0x1e0)]['log'](this[_0x568e1c(0x19f)]+_0x568e1c(0x1bb))['send'](),await this[_0x568e1c(0x1b7)]['clone'](_0xea0184['name'],_0x37cd35[_0x568e1c(0x1b4)]);!this[_0x568e1c(0x1fa)]['force']?(this[_0x568e1c(0x1e0)][_0x568e1c(0x1e1)](this['prefix']+_0x568e1c(0x1a2)),await this['mdapiUtils']['prepareMdapi'](this[_0x568e1c(0x1b7)][_0x568e1c(0x1ff)])):this[_0x568e1c(0x1e0)][_0x568e1c(0x1e1)](this['prefix']+_0x568e1c(0x1f7));await this['sfLogger'][_0x568e1c(0x1e1)](this[_0x568e1c(0x19f)]+'\x20Checking\x20written\x20components.')[_0x568e1c(0x1a3)]();_0x34f3f2['writed']&&(this[_0x568e1c(0x1e0)][_0x568e1c(0x1e1)](this[_0x568e1c(0x19f)]+'\x20Preparing\x20to\x20write\x20components'),this[_0x568e1c(0x19a)]=_0x34f3f2['writed'][_0x568e1c(0x1d1)],await this[_0x568e1c(0x1ad)](_0x34f3f2['writed']),await this[_0x568e1c(0x1e0)][_0x568e1c(0x1a3)]());await this[_0x568e1c(0x1e0)][_0x568e1c(0x1e1)](this[_0x568e1c(0x19f)]+_0x568e1c(0x193))[_0x568e1c(0x1a3)]();_0x34f3f2[_0x568e1c(0x1ef)]&&(this['sfLogger'][_0x568e1c(0x1e1)](this[_0x568e1c(0x19f)]+_0x568e1c(0x1f9)),this[_0x568e1c(0x1c9)]=_0x34f3f2['deleted'][_0x568e1c(0x1d1)],await this[_0x568e1c(0x1bc)](_0x34f3f2[_0x568e1c(0x1ef)]),await this['sfLogger'][_0x568e1c(0x1a3)]());await this[_0x568e1c(0x1e0)][_0x568e1c(0x1a3)]();const _0x52f77a=await fs_internal_1['FS']['isEmptyDir'](this['gitUtils'][_0x568e1c(0x1ff)]);await sfdx_utils_2['SFDX']['isSFDXProject'](this[_0x568e1c(0x1b7)]['dir'])?(_0x30929d=!![],await fs_internal_1['FS'][_0x568e1c(0x1b6)]((0x0,path_1[_0x568e1c(0x1f6)])(this['gitUtils']['dir'],'force-app'))):(_0x30929d&&(!_0x52f77a&&(_0x30929d=![])),await this[_0x568e1c(0x1b7)]['clearDir']());_0x30929d?(await this[_0x568e1c(0x1e0)]['log'](this[_0x568e1c(0x19f)]+_0x568e1c(0x1c0))[_0x568e1c(0x1a3)](),await this[_0x568e1c(0x194)][_0x568e1c(0x1ea)](this[_0x568e1c(0x1c1)][_0x568e1c(0x1ff)]),await this[_0x568e1c(0x194)][_0x568e1c(0x1f8)](this['gitUtils']['dir'],!_0x52f77a),await this[_0x568e1c(0x194)][_0x568e1c(0x1d2)](this['mdapiUtils'][_0x568e1c(0x1ff)],(0x0,path_1['join'])(this[_0x568e1c(0x1b7)][_0x568e1c(0x1ff)],constants_2['FORCE_APP_DEFAULT_DIR'])),await this[_0x568e1c(0x194)][_0x568e1c(0x1b6)]()):(await this['sfLogger'][_0x568e1c(0x1e1)](this[_0x568e1c(0x19f)]+_0x568e1c(0x1e6))['send'](),await this[_0x568e1c(0x1c1)][_0x568e1c(0x199)](this[_0x568e1c(0x1b7)]['dir']));await this[_0x568e1c(0x1e0)][_0x568e1c(0x1e1)](this[_0x568e1c(0x19f)]+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')[_0x568e1c(0x1a3)](),await this[_0x568e1c(0x1b7)]['commitAndPush'](_0x2cc46a,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x3ebdcc[_0x568e1c(0x1b4)]},_0xea0184['name']),await this[_0x568e1c(0x1b7)][_0x568e1c(0x1b6)](),await this[_0x568e1c(0x1c1)][_0x568e1c(0x1b6)]();const _0x16a3d3=this[_0x568e1c(0x19a)]+this['componentsToDelete'];await this[_0x568e1c(0x1e0)][_0x568e1c(0x1e1)](this[_0x568e1c(0x19f)]+_0x568e1c(0x1c8)+(Date[_0x568e1c(0x1ee)]()-this[_0x568e1c(0x1df)])+_0x568e1c(0x1b3)+_0x16a3d3+'.')[_0x568e1c(0x1a3)]();}catch(_0x18a30a){await this[_0x568e1c(0x1a0)](),await this['sfLogger'][_0x568e1c(0x1aa)](this[_0x568e1c(0x19f)]+'\x20'+_0x18a30a)[_0x568e1c(0x1a3)]();throw _0x18a30a;}}async['run'](_0x5b7f10,_0x380451){const _0x3312a9=a105_0x32540b;var _0x9cf1d9,_0x6d37a5;this['sfLogger']=typedi_1[_0x3312a9(0x1fe)][_0x3312a9(0x1a4)](providers_tokens_1[_0x3312a9(0x1b8)][_0x3312a9(0x1e4)]),this[_0x3312a9(0x19f)]=(_0x380451?_0x380451+'\x20':'')+'['+commit_components_dto_1[_0x3312a9(0x1c2)][_0x3312a9(0x1b4)]+']',await this[_0x3312a9(0x1e0)][_0x3312a9(0x1e1)](this[_0x3312a9(0x19f)]+'\x20Checking\x20commit\x20components.');const _0x4624d0=!!((_0x9cf1d9=_0x5b7f10[_0x3312a9(0x19e)])===null||_0x9cf1d9===void 0x0?void 0x0:_0x9cf1d9['writed'])||!!((_0x6d37a5=_0x5b7f10[_0x3312a9(0x19e)])===null||_0x6d37a5===void 0x0?void 0x0:_0x6d37a5[_0x3312a9(0x1ef)]);if(!_0x4624d0){await this[_0x3312a9(0x1e0)][_0x3312a9(0x1e1)](this[_0x3312a9(0x19f)]+_0x3312a9(0x1a8))['send']();return;}this['commitData']=_0x5b7f10,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a105_0x32540b(0x1b1)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;