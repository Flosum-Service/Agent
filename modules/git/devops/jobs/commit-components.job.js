const a104_0xe8cb1e=a104_0x1f14;(function(_0x1576b6,_0x4b8f79){const _0x3ba1e8=a104_0x1f14,_0x2bb939=_0x1576b6();while(!![]){try{const _0x59ffba=parseInt(_0x3ba1e8(0x22f))/0x1+-parseInt(_0x3ba1e8(0x252))/0x2+parseInt(_0x3ba1e8(0x1fe))/0x3*(parseInt(_0x3ba1e8(0x235))/0x4)+-parseInt(_0x3ba1e8(0x1ea))/0x5*(parseInt(_0x3ba1e8(0x1ff))/0x6)+-parseInt(_0x3ba1e8(0x239))/0x7+-parseInt(_0x3ba1e8(0x241))/0x8+parseInt(_0x3ba1e8(0x22b))/0x9;if(_0x59ffba===_0x4b8f79)break;else _0x2bb939['push'](_0x2bb939['shift']());}catch(_0x3ea893){_0x2bb939['push'](_0x2bb939['shift']());}}}(a104_0x4434,0x8095c));const a104_0x3be9ef=(function(){let _0x1b0d89=!![];return function(_0x3cc5f0,_0x4f36e){const _0x2d379d=_0x1b0d89?function(){const _0x2bb195=a104_0x1f14;if(_0x4f36e){const _0x266fbd=_0x4f36e[_0x2bb195(0x229)](_0x3cc5f0,arguments);return _0x4f36e=null,_0x266fbd;}}:function(){};return _0x1b0d89=![],_0x2d379d;};}()),a104_0x26833c=a104_0x3be9ef(this,function(){const _0x23d5e6=a104_0x1f14;return a104_0x26833c['toString']()[_0x23d5e6(0x216)](_0x23d5e6(0x218))[_0x23d5e6(0x215)]()[_0x23d5e6(0x22e)](a104_0x26833c)[_0x23d5e6(0x216)]('(((.+)+)+)+$');});a104_0x26833c();'use strict';var __createBinding=this&&this[a104_0xe8cb1e(0x256)]||(Object[a104_0xe8cb1e(0x203)]?function(_0x2180f0,_0x2f07cd,_0x582c07,_0x95608e){const _0x2c28ac=a104_0xe8cb1e;if(_0x95608e===undefined)_0x95608e=_0x582c07;var _0x1c30c0=Object[_0x2c28ac(0x244)](_0x2f07cd,_0x582c07);(!_0x1c30c0||(_0x2c28ac(0x258)in _0x1c30c0?!_0x2f07cd[_0x2c28ac(0x201)]:_0x1c30c0[_0x2c28ac(0x24b)]||_0x1c30c0[_0x2c28ac(0x213)]))&&(_0x1c30c0={'enumerable':!![],'get':function(){return _0x2f07cd[_0x582c07];}}),Object[_0x2c28ac(0x1fd)](_0x2180f0,_0x95608e,_0x1c30c0);}:function(_0x3715bd,_0x1e1b6a,_0x504198,_0x47c2ff){if(_0x47c2ff===undefined)_0x47c2ff=_0x504198;_0x3715bd[_0x47c2ff]=_0x1e1b6a[_0x504198];}),__setModuleDefault=this&&this[a104_0xe8cb1e(0x20a)]||(Object[a104_0xe8cb1e(0x203)]?function(_0x27acad,_0x3ebc37){const _0xe978e=a104_0xe8cb1e;Object[_0xe978e(0x1fd)](_0x27acad,'default',{'enumerable':!![],'value':_0x3ebc37});}:function(_0x211ddb,_0x2c1c80){const _0x438038=a104_0xe8cb1e;_0x211ddb[_0x438038(0x25b)]=_0x2c1c80;}),__decorate=this&&this['__decorate']||function(_0x10335b,_0x132e94,_0x21cc6e,_0x44d508){const _0x486514=a104_0xe8cb1e;var _0x58a256=arguments[_0x486514(0x238)],_0x1c0852=_0x58a256<0x3?_0x132e94:_0x44d508===null?_0x44d508=Object[_0x486514(0x244)](_0x132e94,_0x21cc6e):_0x44d508,_0xb342a1;if(typeof Reflect===_0x486514(0x212)&&typeof Reflect['decorate']==='function')_0x1c0852=Reflect[_0x486514(0x21e)](_0x10335b,_0x132e94,_0x21cc6e,_0x44d508);else{for(var _0x163cd6=_0x10335b[_0x486514(0x238)]-0x1;_0x163cd6>=0x0;_0x163cd6--)if(_0xb342a1=_0x10335b[_0x163cd6])_0x1c0852=(_0x58a256<0x3?_0xb342a1(_0x1c0852):_0x58a256>0x3?_0xb342a1(_0x132e94,_0x21cc6e,_0x1c0852):_0xb342a1(_0x132e94,_0x21cc6e))||_0x1c0852;}return _0x58a256>0x3&&_0x1c0852&&Object['defineProperty'](_0x132e94,_0x21cc6e,_0x1c0852),_0x1c0852;},__importStar=this&&this[a104_0xe8cb1e(0x23d)]||function(_0x54c547){const _0x28369b=a104_0xe8cb1e;if(_0x54c547&&_0x54c547[_0x28369b(0x201)])return _0x54c547;var _0x11cfb3={};if(_0x54c547!=null){for(var _0x52ed05 in _0x54c547)if(_0x52ed05!=='default'&&Object['prototype'][_0x28369b(0x200)][_0x28369b(0x23c)](_0x54c547,_0x52ed05))__createBinding(_0x11cfb3,_0x54c547,_0x52ed05);}return __setModuleDefault(_0x11cfb3,_0x54c547),_0x11cfb3;},__importDefault=this&&this[a104_0xe8cb1e(0x231)]||function(_0x29d2fe){const _0x12ec80=a104_0xe8cb1e;return _0x29d2fe&&_0x29d2fe[_0x12ec80(0x201)]?_0x29d2fe:{'default':_0x29d2fe};};Object[a104_0xe8cb1e(0x1fd)](exports,a104_0xe8cb1e(0x201),{'value':!![]}),exports[a104_0xe8cb1e(0x24f)]=void 0x0;function a104_0x4434(){const _0x11a7ce=['commitData','path','1917876WXsclL','createProjectFrom','values','logger','__createBinding','Bitbucket','get','\x20Start\x20cloning\x20repository.','exec','default','isEmptyDir','getRemote','components','send','113220okidnu','://','\x20components','log','fileName','../utils/git.utils','ms.\x20Committed\x20components\x20-\x20','\x20Checking\x20deleted\x20components.','gitUrl','copyMdapiTo','dir','clearDir','branch','getProtocol','run','master','type','writeComponents','force','defineProperty','2959017yurMaR','162MdtAfk','hasOwnProperty','__esModule','../../providers/types/git-provider','create','error','../../providers/api/bitbucket-api.service','GitProvider','removeDir','../../internal/fs.internal','writeFlosumComponents','__setModuleDefault','writed','../../../shared/utils','removeComponents','clone','\x20Deleted\x20','SFDX','\x20Checking\x20written\x20components.','object','configurable','../utils/mdapi.utils','toString','search','deleted','(((.+)+)+)+$','catch','Tokens','\x20Checking\x20commit\x20components.','getGitShellAuthorizationString','credentials','decorate','force-app','Service','gitUtils','sort','\x20Preparing\x20to\x20delete\x20components','\x20Start\x20converting\x20to\x20SFDX.','CommitComponentsDto','sfLogger','sfdxUtils','MDApiUtils','apply','prefix','24762330DfknTo','copyProjectTo','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','constructor','148732Awvkil','startTime','__importDefault','SFDXUtils','splice','reduce','4ZuSTOX','COMPONENTS_PER_TICK','isLoggedIn','length','5604473aQDMAm','push','../dto/commit-components.dto','call','__importStar','mdapiUtils','events','\x20Nothing\x20to\x20commit.\x20Skip.','7910336phrQbp','\x20Prepare\x20mdapi\x20files.','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','getOwnPropertyDescriptor','join','groupComponentsByFileName','componentsToWrite','../../salesforce/utils/sfdx.utils','../../parsers/data/child-types','../../../../constants','writable','name','componentsToDelete','provider','CommitComponentsJob'];a104_0x4434=function(){return _0x11a7ce;};return a104_0x4434();}const commit_components_dto_1=require(a104_0xe8cb1e(0x23b)),events_1=__importDefault(require(a104_0xe8cb1e(0x23f))),git_utils_1=require(a104_0xe8cb1e(0x1ef)),mdapi_utils_1=require(a104_0xe8cb1e(0x214)),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a104_0xe8cb1e(0x249))),utils_1=require(a104_0xe8cb1e(0x20c)),constants_1=require(a104_0xe8cb1e(0x24a)),git_provider_1=require(a104_0xe8cb1e(0x202)),bitbucket_api_service_1=require(a104_0xe8cb1e(0x205)),sfdx_utils_2=require(a104_0xe8cb1e(0x248)),fs_internal_1=require(a104_0xe8cb1e(0x208)),path_1=require(a104_0xe8cb1e(0x251)),providers_tokens_1=require('../../providers/providers.tokens'),constants_2=require(a104_0xe8cb1e(0x24a));function a104_0x1f14(_0x4eddae,_0x5a0571){const _0x308a24=a104_0x4434();return a104_0x1f14=function(_0x26833c,_0x3be9ef){_0x26833c=_0x26833c-0x1e7;let _0x44346a=_0x308a24[_0x26833c];return _0x44346a;},a104_0x1f14(_0x4eddae,_0x5a0571);}let CommitComponentsJob=class CommitComponentsJob extends events_1[a104_0xe8cb1e(0x25b)]{constructor(){const _0x2d255a=a104_0xe8cb1e;super(...arguments),this[_0x2d255a(0x236)]=0x3e8,this['componentsToWrite']=0x0,this[_0x2d255a(0x24d)]=0x0,this[_0x2d255a(0x230)]=Date['now']();}async['getRemote'](){const _0x168f98=a104_0xe8cb1e,{repo:_0x15871}=this[_0x168f98(0x250)],_0x4e3f8d=typedi_1[_0x168f98(0x25b)][_0x168f98(0x258)](providers_tokens_1[_0x168f98(0x21a)][_0x168f98(0x21d)]);if(this[_0x168f98(0x250)][_0x168f98(0x24e)]===git_provider_1[_0x168f98(0x206)][_0x168f98(0x257)]){const _0x470a13=typedi_1[_0x168f98(0x25b)][_0x168f98(0x258)](bitbucket_api_service_1['BitbucketApiService']);await _0x470a13[_0x168f98(0x237)]();}return _0x15871[_0x168f98(0x1f2)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x168f98(0x1f7)])(_0x15871[_0x168f98(0x1f2)])+_0x168f98(0x1eb)+_0x4e3f8d[_0x168f98(0x21c)]()+'@');}[a104_0xe8cb1e(0x246)](_0x4775d1){const _0x37195a=a104_0xe8cb1e;var _0xc27be2;_0x4775d1[_0x37195a(0x222)](_0x3c5f8c=>child_types_1[_0x37195a(0x25b)]['includes'](_0x3c5f8c['fileType'])?0x1:-0x1);const _0xce472d={};for(const _0x42084c of _0x4775d1){_0xce472d[_0xc27be2=_0x42084c[_0x37195a(0x1ee)]]||(_0xce472d[_0xc27be2]=[]),_0xce472d[_0x42084c[_0x37195a(0x1ee)]][_0x37195a(0x23a)](_0x42084c);}return Object[_0x37195a(0x254)](_0xce472d)[_0x37195a(0x234)]((_0x5bf4d7,_0x33c8d4)=>[..._0x5bf4d7,..._0x33c8d4],[]);}async['writeComponents'](_0x3a9ac3){const _0x200d5e=a104_0xe8cb1e;_0x3a9ac3=this[_0x200d5e(0x246)](_0x3a9ac3);let _0x427867=0x0;while(_0x3a9ac3[_0x200d5e(0x238)]){const _0x567b37=_0x3a9ac3[_0x200d5e(0x233)](0x0,this[_0x200d5e(0x236)]);await this[_0x200d5e(0x23e)][_0x200d5e(0x209)](_0x567b37,{'skipChildErrors':this[_0x200d5e(0x250)][_0x200d5e(0x1f6)][_0x200d5e(0x24c)]===_0x200d5e(0x1f9)}),_0x427867+=_0x567b37['length'],this[_0x200d5e(0x226)][_0x200d5e(0x1ed)](this[_0x200d5e(0x22a)]+'\x20Wrote\x20'+_0x427867+'/'+this['componentsToWrite']+'\x20components'),await this[_0x200d5e(0x226)][_0x200d5e(0x1e9)]();}}async['removeComponents'](_0x2b2cee){const _0x52f324=a104_0xe8cb1e;_0x2b2cee[_0x52f324(0x222)](_0x527357=>child_types_1[_0x52f324(0x25b)]['includes'](_0x527357[_0x52f324(0x1fa)])?-0x1:0x1);let _0x10e35b=0x0;while(_0x2b2cee['length']){const _0x246747=_0x2b2cee['splice'](0x0,this['COMPONENTS_PER_TICK']);await this[_0x52f324(0x23e)]['removeComponents'](_0x246747),_0x10e35b+=_0x246747[_0x52f324(0x238)],this[_0x52f324(0x226)][_0x52f324(0x1ed)](this[_0x52f324(0x22a)]+_0x52f324(0x20f)+_0x10e35b+'/'+this[_0x52f324(0x24d)]+_0x52f324(0x1ec)),await this[_0x52f324(0x226)][_0x52f324(0x1e9)]();}}async['cleanUp'](){const _0x4d8070=a104_0xe8cb1e;this[_0x4d8070(0x221)]&&await this[_0x4d8070(0x221)][_0x4d8070(0x207)]()[_0x4d8070(0x219)](()=>void 0x0),this[_0x4d8070(0x23e)]&&await this[_0x4d8070(0x23e)][_0x4d8070(0x207)]()[_0x4d8070(0x219)](()=>void 0x0),this['sfdxUtils']&&await this['sfdxUtils'][_0x4d8070(0x207)]()[_0x4d8070(0x219)](()=>void 0x0);}async[a104_0xe8cb1e(0x25a)](){const _0x2f2708=a104_0xe8cb1e,{repo:_0x22acdb,branch:_0x15366c,components:_0x2ce6cd,convertToSFDX:_0x76b5ea,message:_0x2935d6,user:_0x1ee00e}=this[_0x2f2708(0x250)];this['mdapiUtils']=new mdapi_utils_1[(_0x2f2708(0x228))](),this[_0x2f2708(0x221)]=new git_utils_1['GitUtils'](await this[_0x2f2708(0x1e7)]()),this[_0x2f2708(0x227)]=new sfdx_utils_1[(_0x2f2708(0x232))]();let _0x47b2ae=_0x76b5ea;try{await this[_0x2f2708(0x226)][_0x2f2708(0x1ed)](this[_0x2f2708(0x22a)]+_0x2f2708(0x259))[_0x2f2708(0x1e9)](),await this[_0x2f2708(0x221)][_0x2f2708(0x20e)](_0x15366c[_0x2f2708(0x24c)],_0x22acdb['name']);!this[_0x2f2708(0x250)][_0x2f2708(0x1fc)]?(this[_0x2f2708(0x226)][_0x2f2708(0x1ed)](this[_0x2f2708(0x22a)]+_0x2f2708(0x242)),await this[_0x2f2708(0x23e)]['prepareMdapi'](this[_0x2f2708(0x221)][_0x2f2708(0x1f4)])):this['sfLogger'][_0x2f2708(0x1ed)](this[_0x2f2708(0x22a)]+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this[_0x2f2708(0x226)]['log'](this[_0x2f2708(0x22a)]+_0x2f2708(0x211))['send']();_0x2ce6cd[_0x2f2708(0x20b)]&&(this['sfLogger'][_0x2f2708(0x1ed)](this[_0x2f2708(0x22a)]+'\x20Preparing\x20to\x20write\x20components'),this[_0x2f2708(0x247)]=_0x2ce6cd[_0x2f2708(0x20b)][_0x2f2708(0x238)],await this[_0x2f2708(0x1fb)](_0x2ce6cd[_0x2f2708(0x20b)]),await this['sfLogger']['send']());await this[_0x2f2708(0x226)]['log'](this[_0x2f2708(0x22a)]+_0x2f2708(0x1f1))[_0x2f2708(0x1e9)]();_0x2ce6cd[_0x2f2708(0x217)]&&(this[_0x2f2708(0x226)][_0x2f2708(0x1ed)](this[_0x2f2708(0x22a)]+_0x2f2708(0x223)),this[_0x2f2708(0x24d)]=_0x2ce6cd[_0x2f2708(0x217)]['length'],await this[_0x2f2708(0x20d)](_0x2ce6cd[_0x2f2708(0x217)]),await this['sfLogger'][_0x2f2708(0x1e9)]());await this[_0x2f2708(0x226)][_0x2f2708(0x1e9)]();const _0x865d30=await fs_internal_1['FS'][_0x2f2708(0x25c)](this[_0x2f2708(0x221)][_0x2f2708(0x1f4)]);await sfdx_utils_2[_0x2f2708(0x210)]['isSFDXProject'](this[_0x2f2708(0x221)][_0x2f2708(0x1f4)])?(_0x47b2ae=!![],await fs_internal_1['FS'][_0x2f2708(0x207)]((0x0,path_1[_0x2f2708(0x245)])(this[_0x2f2708(0x221)][_0x2f2708(0x1f4)],_0x2f2708(0x21f)))):(_0x47b2ae&&(!_0x865d30&&(_0x47b2ae=![])),await this[_0x2f2708(0x221)][_0x2f2708(0x1f5)]());_0x47b2ae?(await this[_0x2f2708(0x226)][_0x2f2708(0x1ed)](this['prefix']+_0x2f2708(0x224))[_0x2f2708(0x1e9)](),await this[_0x2f2708(0x227)][_0x2f2708(0x253)](this['mdapiUtils'][_0x2f2708(0x1f4)]),await this[_0x2f2708(0x227)][_0x2f2708(0x22c)](this[_0x2f2708(0x221)]['dir'],!_0x865d30),await this[_0x2f2708(0x227)]['copyVlocityComponents'](this['mdapiUtils'][_0x2f2708(0x1f4)],(0x0,path_1['join'])(this[_0x2f2708(0x221)]['dir'],constants_2['FORCE_APP_DEFAULT_DIR'])),await this[_0x2f2708(0x227)][_0x2f2708(0x207)]()):(await this[_0x2f2708(0x226)]['log'](this['prefix']+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x2f2708(0x1e9)](),await this[_0x2f2708(0x23e)][_0x2f2708(0x1f3)](this[_0x2f2708(0x221)][_0x2f2708(0x1f4)]));await this[_0x2f2708(0x226)]['log'](this[_0x2f2708(0x22a)]+_0x2f2708(0x243))['send'](),await this['gitUtils']['commitAndPush'](_0x2935d6,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x1ee00e[_0x2f2708(0x24c)]},_0x15366c[_0x2f2708(0x24c)]),await this[_0x2f2708(0x221)][_0x2f2708(0x207)](),await this[_0x2f2708(0x23e)][_0x2f2708(0x207)]();const _0x384cd4=this[_0x2f2708(0x247)]+this[_0x2f2708(0x24d)];await this[_0x2f2708(0x226)][_0x2f2708(0x1ed)](this['prefix']+_0x2f2708(0x22d)+(Date['now']()-this[_0x2f2708(0x230)])+_0x2f2708(0x1f0)+_0x384cd4+'.')[_0x2f2708(0x1e9)]();}catch(_0x4f3377){await this['cleanUp'](),await this['sfLogger'][_0x2f2708(0x204)](this[_0x2f2708(0x22a)]+'\x20'+_0x4f3377)[_0x2f2708(0x1e9)]();throw _0x4f3377;}}async[a104_0xe8cb1e(0x1f8)](_0x4169ab,_0x541098){const _0x124fa2=a104_0xe8cb1e;var _0x261860,_0x17bd2f;this['sfLogger']=typedi_1[_0x124fa2(0x25b)]['get'](providers_tokens_1[_0x124fa2(0x21a)][_0x124fa2(0x255)]),this[_0x124fa2(0x22a)]=(_0x541098?_0x541098+'\x20':'')+'['+commit_components_dto_1[_0x124fa2(0x225)]['name']+']',await this[_0x124fa2(0x226)][_0x124fa2(0x1ed)](this[_0x124fa2(0x22a)]+_0x124fa2(0x21b));const _0x516a28=!!((_0x261860=_0x4169ab[_0x124fa2(0x1e8)])===null||_0x261860===void 0x0?void 0x0:_0x261860['writed'])||!!((_0x17bd2f=_0x4169ab[_0x124fa2(0x1e8)])===null||_0x17bd2f===void 0x0?void 0x0:_0x17bd2f[_0x124fa2(0x217)]);if(!_0x516a28){await this[_0x124fa2(0x226)]['log'](this[_0x124fa2(0x22a)]+_0x124fa2(0x240))[_0x124fa2(0x1e9)]();return;}this[_0x124fa2(0x250)]=_0x4169ab,await this[_0x124fa2(0x25a)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0xe8cb1e(0x220)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;