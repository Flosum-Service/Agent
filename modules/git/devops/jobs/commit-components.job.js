const a104_0x1d8468=a104_0x17e3;(function(_0x21f6be,_0x1313a7){const _0x2e2342=a104_0x17e3,_0x149ac4=_0x21f6be();while(!![]){try{const _0x56b853=parseInt(_0x2e2342(0xc9))/0x1+parseInt(_0x2e2342(0xbf))/0x2+parseInt(_0x2e2342(0xbb))/0x3+-parseInt(_0x2e2342(0xe7))/0x4*(parseInt(_0x2e2342(0xce))/0x5)+-parseInt(_0x2e2342(0x124))/0x6*(parseInt(_0x2e2342(0xe1))/0x7)+parseInt(_0x2e2342(0x106))/0x8*(-parseInt(_0x2e2342(0xe9))/0x9)+parseInt(_0x2e2342(0x116))/0xa*(parseInt(_0x2e2342(0xc7))/0xb);if(_0x56b853===_0x1313a7)break;else _0x149ac4['push'](_0x149ac4['shift']());}catch(_0x80c09b){_0x149ac4['push'](_0x149ac4['shift']());}}}(a104_0x4f32,0x5098f));function a104_0x17e3(_0x42a657,_0x435133){const _0x20805=a104_0x4f32();return a104_0x17e3=function(_0xa18c45,_0x35b5f3){_0xa18c45=_0xa18c45-0xba;let _0x4f321a=_0x20805[_0xa18c45];return _0x4f321a;},a104_0x17e3(_0x42a657,_0x435133);}const a104_0x35b5f3=(function(){let _0x346586=!![];return function(_0x30aba3,_0x107b14){const _0x4975c0=_0x346586?function(){if(_0x107b14){const _0x193a2b=_0x107b14['apply'](_0x30aba3,arguments);return _0x107b14=null,_0x193a2b;}}:function(){};return _0x346586=![],_0x4975c0;};}()),a104_0xa18c45=a104_0x35b5f3(this,function(){const _0x270620=a104_0x17e3;return a104_0xa18c45[_0x270620(0x104)]()['search'](_0x270620(0xfd))[_0x270620(0x104)]()['constructor'](a104_0xa18c45)[_0x270620(0x114)](_0x270620(0xfd));});a104_0xa18c45();function a104_0x4f32(){const _0x1a167c=['726768kqJRyr','getGitShellAuthorizationString','create','defineProperty','ms.\x20Committed\x20components\x20-\x20','COMPONENTS_PER_TICK','sfLogger','run','878735QLcfTt','../../internal/fs.internal','10265uHSBQD','log','hasOwnProperty','call','force','20gXtMEt','branch','startTime','\x20Preparing\x20to\x20write\x20components','../../../../constants','fileName','__importStar','GitUtils','mdapiUtils','writable','provider','getProtocol','splice','\x20Deleted\x20','BitbucketApiService','../../providers/api/bitbucket-api.service','\x20Checking\x20deleted\x20components.','\x20Prepare\x20mdapi\x20files.','catch','14nQVXLG','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','deleted','send','commitAndPush','length','180252NdEbTM','clone','1219968CvKHJE','gitUtils','copyVlocityComponents','createProjectFrom','getRemote','push','join','__createBinding','SFDX','gitUrl','cleanUp','\x20Start\x20cloning\x20repository.','GitProvider','sfdxUtils','path','../../salesforce/utils/sfdx.utils','default','typedi','\x20Preparing\x20to\x20delete\x20components','exec','(((.+)+)+)+$','\x20Copying\x20mdapi\x20to\x20git\x20folder.','configurable','getOwnPropertyDescriptor','prefix','name','prototype','toString','error','24oAgmsR','fileType','isLoggedIn','credentials','../../parsers/data/child-types','FORCE_APP_DEFAULT_DIR','sort','CommitComponentsJob','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','../utils/sfdx.utils','\x20Checking\x20commit\x20components.','commitData','../utils/git.utils','componentsToDelete','search','type','100JAIMbm','clearDir','logger','writed','\x20Start\x20converting\x20to\x20SFDX.','object','now','../../../shared/utils','../../providers/providers.tokens','componentsToWrite','removeDir','groupComponentsByFileName','prepareMdapi','includes','1030866zdkByj','Service','__decorate','\x20Nothing\x20to\x20commit.\x20Skip.','dir','\x20components','isSFDXProject','__esModule','decorate','\x20Wrote\x20','removeComponents','events','../../providers/types/git-provider','get','writeComponents','264474EUiAvy','components','Tokens','DEFAULT_GIT_USER_EMAIL'];a104_0x4f32=function(){return _0x1a167c;};return a104_0x4f32();}'use strict';var __createBinding=this&&this[a104_0x1d8468(0xf0)]||(Object['create']?function(_0x393904,_0x43055b,_0x10f6ef,_0x165183){const _0x43748d=a104_0x1d8468;if(_0x165183===undefined)_0x165183=_0x10f6ef;var _0x90293e=Object[_0x43748d(0x100)](_0x43055b,_0x10f6ef);(!_0x90293e||(_0x43748d(0x131)in _0x90293e?!_0x43055b[_0x43748d(0x12b)]:_0x90293e[_0x43748d(0xd7)]||_0x90293e[_0x43748d(0xff)]))&&(_0x90293e={'enumerable':!![],'get':function(){return _0x43055b[_0x10f6ef];}}),Object['defineProperty'](_0x393904,_0x165183,_0x90293e);}:function(_0x4642c7,_0x4613b6,_0x211292,_0x34b02b){if(_0x34b02b===undefined)_0x34b02b=_0x211292;_0x4642c7[_0x34b02b]=_0x4613b6[_0x211292];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a104_0x1d8468(0xc1)]?function(_0x239a23,_0x808a3){Object['defineProperty'](_0x239a23,'default',{'enumerable':!![],'value':_0x808a3});}:function(_0x2a71b8,_0x5bb80f){const _0x2b82bb=a104_0x1d8468;_0x2a71b8[_0x2b82bb(0xf9)]=_0x5bb80f;}),__decorate=this&&this[a104_0x1d8468(0x126)]||function(_0x1d148f,_0x7301c1,_0x23338a,_0x5797b0){const _0x27bfc4=a104_0x1d8468;var _0x187e85=arguments[_0x27bfc4(0xe6)],_0x666f1f=_0x187e85<0x3?_0x7301c1:_0x5797b0===null?_0x5797b0=Object[_0x27bfc4(0x100)](_0x7301c1,_0x23338a):_0x5797b0,_0x1fdc72;if(typeof Reflect===_0x27bfc4(0x11b)&&typeof Reflect[_0x27bfc4(0x12c)]==='function')_0x666f1f=Reflect[_0x27bfc4(0x12c)](_0x1d148f,_0x7301c1,_0x23338a,_0x5797b0);else{for(var _0x42f5c4=_0x1d148f[_0x27bfc4(0xe6)]-0x1;_0x42f5c4>=0x0;_0x42f5c4--)if(_0x1fdc72=_0x1d148f[_0x42f5c4])_0x666f1f=(_0x187e85<0x3?_0x1fdc72(_0x666f1f):_0x187e85>0x3?_0x1fdc72(_0x7301c1,_0x23338a,_0x666f1f):_0x1fdc72(_0x7301c1,_0x23338a))||_0x666f1f;}return _0x187e85>0x3&&_0x666f1f&&Object[_0x27bfc4(0xc2)](_0x7301c1,_0x23338a,_0x666f1f),_0x666f1f;},__importStar=this&&this[a104_0x1d8468(0xd4)]||function(_0x2a9aab){const _0x129b7e=a104_0x1d8468;if(_0x2a9aab&&_0x2a9aab[_0x129b7e(0x12b)])return _0x2a9aab;var _0x48053e={};if(_0x2a9aab!=null){for(var _0x54cc1c in _0x2a9aab)if(_0x54cc1c!==_0x129b7e(0xf9)&&Object[_0x129b7e(0x103)][_0x129b7e(0xcb)][_0x129b7e(0xcc)](_0x2a9aab,_0x54cc1c))__createBinding(_0x48053e,_0x2a9aab,_0x54cc1c);}return __setModuleDefault(_0x48053e,_0x2a9aab),_0x48053e;},__importDefault=this&&this['__importDefault']||function(_0x216654){const _0x3902f2=a104_0x1d8468;return _0x216654&&_0x216654[_0x3902f2(0x12b)]?_0x216654:{'default':_0x216654};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a104_0x1d8468(0x10d)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a104_0x1d8468(0x12f))),git_utils_1=require(a104_0x1d8468(0x112)),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a104_0x1d8468(0x10f)),typedi_1=__importStar(require(a104_0x1d8468(0xfa))),child_types_1=__importDefault(require(a104_0x1d8468(0x10a))),utils_1=require(a104_0x1d8468(0x11d)),constants_1=require(a104_0x1d8468(0xd2)),git_provider_1=require(a104_0x1d8468(0x130)),bitbucket_api_service_1=require(a104_0x1d8468(0xdd)),sfdx_utils_2=require(a104_0x1d8468(0xf8)),fs_internal_1=require(a104_0x1d8468(0xc8)),path_1=require(a104_0x1d8468(0xf7)),providers_tokens_1=require(a104_0x1d8468(0x11e)),constants_2=require(a104_0x1d8468(0xd2));let CommitComponentsJob=class CommitComponentsJob extends events_1[a104_0x1d8468(0xf9)]{constructor(){const _0x24cd0f=a104_0x1d8468;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this[_0x24cd0f(0x11f)]=0x0,this[_0x24cd0f(0x113)]=0x0,this['startTime']=Date[_0x24cd0f(0x11c)]();}async[a104_0x1d8468(0xed)](){const _0x44ba9b=a104_0x1d8468,{repo:_0x37ac8a}=this['commitData'],_0x4ab7ba=typedi_1[_0x44ba9b(0xf9)]['get'](providers_tokens_1[_0x44ba9b(0xbd)][_0x44ba9b(0x109)]);if(this[_0x44ba9b(0x111)][_0x44ba9b(0xd8)]===git_provider_1[_0x44ba9b(0xf5)]['Bitbucket']){const _0x1d0f74=typedi_1[_0x44ba9b(0xf9)][_0x44ba9b(0x131)](bitbucket_api_service_1[_0x44ba9b(0xdc)]);await _0x1d0f74[_0x44ba9b(0x108)]();}return _0x37ac8a[_0x44ba9b(0xf2)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x44ba9b(0xd9)])(_0x37ac8a[_0x44ba9b(0xf2)])+'://'+_0x4ab7ba[_0x44ba9b(0xc0)]()+'@');}[a104_0x1d8468(0x121)](_0x230289){const _0x148cc2=a104_0x1d8468;var _0x1b6233;_0x230289[_0x148cc2(0x10c)](_0x1c85c7=>child_types_1[_0x148cc2(0xf9)][_0x148cc2(0x123)](_0x1c85c7[_0x148cc2(0x107)])?0x1:-0x1);const _0xd22769={};for(const _0x104e49 of _0x230289){_0xd22769[_0x1b6233=_0x104e49[_0x148cc2(0xd3)]]||(_0xd22769[_0x1b6233]=[]),_0xd22769[_0x104e49['fileName']][_0x148cc2(0xee)](_0x104e49);}return Object['values'](_0xd22769)['reduce']((_0x1ec04e,_0x2a2c69)=>[..._0x1ec04e,..._0x2a2c69],[]);}async['writeComponents'](_0x26dd0e){const _0xad7a4f=a104_0x1d8468;_0x26dd0e=this[_0xad7a4f(0x121)](_0x26dd0e);let _0x4af683=0x0;while(_0x26dd0e[_0xad7a4f(0xe6)]){const _0x50893d=_0x26dd0e[_0xad7a4f(0xda)](0x0,this['COMPONENTS_PER_TICK']);await this[_0xad7a4f(0xd6)]['writeFlosumComponents'](_0x50893d,{'skipChildErrors':this[_0xad7a4f(0x111)][_0xad7a4f(0xcf)]['name']==='master'}),_0x4af683+=_0x50893d[_0xad7a4f(0xe6)],this[_0xad7a4f(0xc5)][_0xad7a4f(0xca)](this['prefix']+_0xad7a4f(0x12d)+_0x4af683+'/'+this['componentsToWrite']+_0xad7a4f(0x129)),await this['sfLogger'][_0xad7a4f(0xe4)]();}}async[a104_0x1d8468(0x12e)](_0x236de3){const _0x3eb9e5=a104_0x1d8468;_0x236de3['sort'](_0xba85e6=>child_types_1[_0x3eb9e5(0xf9)][_0x3eb9e5(0x123)](_0xba85e6[_0x3eb9e5(0x115)])?-0x1:0x1);let _0x4c2f28=0x0;while(_0x236de3['length']){const _0x4e7c84=_0x236de3['splice'](0x0,this[_0x3eb9e5(0xc4)]);await this['mdapiUtils'][_0x3eb9e5(0x12e)](_0x4e7c84),_0x4c2f28+=_0x4e7c84['length'],this['sfLogger'][_0x3eb9e5(0xca)](this['prefix']+_0x3eb9e5(0xdb)+_0x4c2f28+'/'+this[_0x3eb9e5(0x113)]+_0x3eb9e5(0x129)),await this[_0x3eb9e5(0xc5)][_0x3eb9e5(0xe4)]();}}async[a104_0x1d8468(0xf3)](){const _0x9e4f3a=a104_0x1d8468;this[_0x9e4f3a(0xea)]&&await this['gitUtils'][_0x9e4f3a(0x120)]()[_0x9e4f3a(0xe0)](()=>void 0x0),this[_0x9e4f3a(0xd6)]&&await this[_0x9e4f3a(0xd6)]['removeDir']()[_0x9e4f3a(0xe0)](()=>void 0x0),this['sfdxUtils']&&await this[_0x9e4f3a(0xf6)][_0x9e4f3a(0x120)]()['catch'](()=>void 0x0);}async[a104_0x1d8468(0xfc)](){const _0x453db3=a104_0x1d8468,{repo:_0x12ec1e,branch:_0x463853,components:_0x2d7050,convertToSFDX:_0x313fa9,message:_0x2f309d,user:_0x58d4cc}=this[_0x453db3(0x111)];this[_0x453db3(0xd6)]=new mdapi_utils_1['MDApiUtils'](),this['gitUtils']=new git_utils_1[(_0x453db3(0xd5))](await this[_0x453db3(0xed)]()),this[_0x453db3(0xf6)]=new sfdx_utils_1['SFDXUtils']();let _0x53062b=_0x313fa9;try{await this[_0x453db3(0xc5)][_0x453db3(0xca)](this['prefix']+_0x453db3(0xf4))[_0x453db3(0xe4)](),await this[_0x453db3(0xea)][_0x453db3(0xe8)](_0x463853[_0x453db3(0x102)],_0x12ec1e['name']);!this[_0x453db3(0x111)][_0x453db3(0xcd)]?(this[_0x453db3(0xc5)][_0x453db3(0xca)](this['prefix']+_0x453db3(0xdf)),await this['mdapiUtils'][_0x453db3(0x122)](this[_0x453db3(0xea)][_0x453db3(0x128)])):this['sfLogger']['log'](this[_0x453db3(0x101)]+_0x453db3(0xe2));await this[_0x453db3(0xc5)]['log'](this['prefix']+'\x20Checking\x20written\x20components.')['send']();_0x2d7050[_0x453db3(0x119)]&&(this[_0x453db3(0xc5)][_0x453db3(0xca)](this['prefix']+_0x453db3(0xd1)),this['componentsToWrite']=_0x2d7050['writed']['length'],await this[_0x453db3(0xba)](_0x2d7050['writed']),await this[_0x453db3(0xc5)][_0x453db3(0xe4)]());await this[_0x453db3(0xc5)]['log'](this[_0x453db3(0x101)]+_0x453db3(0xde))['send']();_0x2d7050['deleted']&&(this[_0x453db3(0xc5)]['log'](this[_0x453db3(0x101)]+_0x453db3(0xfb)),this[_0x453db3(0x113)]=_0x2d7050[_0x453db3(0xe3)][_0x453db3(0xe6)],await this[_0x453db3(0x12e)](_0x2d7050[_0x453db3(0xe3)]),await this[_0x453db3(0xc5)][_0x453db3(0xe4)]());await this[_0x453db3(0xc5)][_0x453db3(0xe4)]();const _0x3803ad=await fs_internal_1['FS']['isEmptyDir'](this[_0x453db3(0xea)][_0x453db3(0x128)]);await sfdx_utils_2[_0x453db3(0xf1)][_0x453db3(0x12a)](this['gitUtils'][_0x453db3(0x128)])?(_0x53062b=!![],await fs_internal_1['FS'][_0x453db3(0x120)]((0x0,path_1['join'])(this[_0x453db3(0xea)][_0x453db3(0x128)],'force-app'))):(_0x53062b&&(!_0x3803ad&&(_0x53062b=![])),await this[_0x453db3(0xea)][_0x453db3(0x117)]());_0x53062b?(await this[_0x453db3(0xc5)][_0x453db3(0xca)](this['prefix']+_0x453db3(0x11a))[_0x453db3(0xe4)](),await this[_0x453db3(0xf6)][_0x453db3(0xec)](this[_0x453db3(0xd6)][_0x453db3(0x128)]),await this[_0x453db3(0xf6)]['copyProjectTo'](this[_0x453db3(0xea)][_0x453db3(0x128)],!_0x3803ad),await this[_0x453db3(0xf6)][_0x453db3(0xeb)](this['mdapiUtils'][_0x453db3(0x128)],(0x0,path_1[_0x453db3(0xef)])(this[_0x453db3(0xea)][_0x453db3(0x128)],constants_2[_0x453db3(0x10b)])),await this[_0x453db3(0xf6)][_0x453db3(0x120)]()):(await this[_0x453db3(0xc5)][_0x453db3(0xca)](this[_0x453db3(0x101)]+_0x453db3(0xfe))[_0x453db3(0xe4)](),await this[_0x453db3(0xd6)]['copyMdapiTo'](this[_0x453db3(0xea)][_0x453db3(0x128)]));await this['sfLogger'][_0x453db3(0xca)](this['prefix']+_0x453db3(0x10e))[_0x453db3(0xe4)](),await this[_0x453db3(0xea)][_0x453db3(0xe5)](_0x2f309d,{'email':constants_1[_0x453db3(0xbe)],'name':_0x58d4cc['name']},_0x463853['name']),await this['gitUtils'][_0x453db3(0x120)](),await this['mdapiUtils'][_0x453db3(0x120)]();const _0x4e2f6f=this[_0x453db3(0x11f)]+this[_0x453db3(0x113)];await this[_0x453db3(0xc5)][_0x453db3(0xca)](this[_0x453db3(0x101)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x453db3(0x11c)]()-this[_0x453db3(0xd0)])+_0x453db3(0xc3)+_0x4e2f6f+'.')[_0x453db3(0xe4)]();}catch(_0x39d435){await this[_0x453db3(0xf3)](),await this[_0x453db3(0xc5)][_0x453db3(0x105)](this['prefix']+'\x20'+_0x39d435)[_0x453db3(0xe4)]();throw _0x39d435;}}async[a104_0x1d8468(0xc6)](_0x4c4fe9,_0x30c25c){const _0x32eea5=a104_0x1d8468;var _0x1fa0cf,_0x5a4012;this[_0x32eea5(0xc5)]=typedi_1[_0x32eea5(0xf9)][_0x32eea5(0x131)](providers_tokens_1['Tokens'][_0x32eea5(0x118)]),this[_0x32eea5(0x101)]=(_0x30c25c?_0x30c25c+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x32eea5(0x102)]+']',await this['sfLogger'][_0x32eea5(0xca)](this[_0x32eea5(0x101)]+_0x32eea5(0x110));const _0x24ae7e=!!((_0x1fa0cf=_0x4c4fe9[_0x32eea5(0xbc)])===null||_0x1fa0cf===void 0x0?void 0x0:_0x1fa0cf[_0x32eea5(0x119)])||!!((_0x5a4012=_0x4c4fe9[_0x32eea5(0xbc)])===null||_0x5a4012===void 0x0?void 0x0:_0x5a4012['deleted']);if(!_0x24ae7e){await this[_0x32eea5(0xc5)][_0x32eea5(0xca)](this[_0x32eea5(0x101)]+_0x32eea5(0x127))['send']();return;}this[_0x32eea5(0x111)]=_0x4c4fe9,await this[_0x32eea5(0xfc)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0x1d8468(0x125)])({'transient':!![]})],CommitComponentsJob),exports[a104_0x1d8468(0x10d)]=CommitComponentsJob;