const a125_0x20031c=a125_0x1565;(function(_0x2acdfe,_0x3bc655){const _0x532413=a125_0x1565,_0x9a2487=_0x2acdfe();while(!![]){try{const _0x3b276e=-parseInt(_0x532413(0x20f))/0x1*(parseInt(_0x532413(0x208))/0x2)+-parseInt(_0x532413(0x232))/0x3*(-parseInt(_0x532413(0x1fc))/0x4)+parseInt(_0x532413(0x1fb))/0x5*(parseInt(_0x532413(0x21a))/0x6)+-parseInt(_0x532413(0x22c))/0x7+parseInt(_0x532413(0x1e4))/0x8*(-parseInt(_0x532413(0x1f7))/0x9)+parseInt(_0x532413(0x1e6))/0xa+parseInt(_0x532413(0x1ea))/0xb*(-parseInt(_0x532413(0x213))/0xc);if(_0x3b276e===_0x3bc655)break;else _0x9a2487['push'](_0x9a2487['shift']());}catch(_0x55c83e){_0x9a2487['push'](_0x9a2487['shift']());}}}(a125_0x5ccf,0xa3b5b));const a125_0x4e2eea=(function(){let _0x4fbebe=!![];return function(_0x1a1a73,_0x261023){const _0x2292a8=_0x4fbebe?function(){const _0x1debe6=a125_0x1565;if(_0x261023){const _0x48e3ad=_0x261023[_0x1debe6(0x210)](_0x1a1a73,arguments);return _0x261023=null,_0x48e3ad;}}:function(){};return _0x4fbebe=![],_0x2292a8;};}()),a125_0x9767d8=a125_0x4e2eea(this,function(){const _0x1cf354=a125_0x1565;return a125_0x9767d8[_0x1cf354(0x1ed)]()[_0x1cf354(0x1f0)](_0x1cf354(0x22a))['toString']()[_0x1cf354(0x217)](a125_0x9767d8)[_0x1cf354(0x1f0)](_0x1cf354(0x22a));});function a125_0x5ccf(){const _0x4748e0=['startTime','(((.+)+)+)+$','__setModuleDefault','1857114DKvkxW','credentials','\x20Wrote\x20','../../providers/providers.tokens','groupComponentsByFileName','includes','15ryaqUc','ms.\x20Committed\x20components\x20-\x20','__decorate','../../providers/api/bitbucket-api.service','getRemote','prepareMdapi','CommitComponentsJob','branch','join','commitData','logger','catch','mdapiUtils','copyProjectTo','now','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','fileName','../../../../constants','removeDir','writable','\x20Preparing\x20to\x20delete\x20components','\x20Checking\x20written\x20components.','writed','gitUrl','MDApiUtils','CommitComponentsDto','../../salesforce/utils/sfdx.utils','splice','\x20Start\x20converting\x20to\x20SFDX.','default','\x20Checking\x20commit\x20components.','../utils/mdapi.utils','clearDir','Tokens','configurable','4624IsgyXH','FORCE_APP_DEFAULT_DIR','5433010gOsJnE','provider','\x20Copying\x20mdapi\x20to\x20git\x20folder.','commitAndPush','53691USMOno','clone','cleanUp','toString','recordType','getProtocol','search','writeComponents','\x20Deleted\x20','name','prefix','\x20Checking\x20deleted\x20components.','values','2637SyjLjj','getOwnPropertyDescriptor','isConvertToSfdx','call','3180995IQBacG','1002468dXGWhV','components','run','decorate','componentsToDelete','events','length','\x20components','../../providers/types/git-provider','defineProperty','COMPONENTS_PER_TICK','isLoggedIn','18akssDe','push','exec','create','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','send','log','2683mvwcyG','apply','componentsToWrite','hasOwnProperty','3204PtybNR','copyMdapiTo','__esModule','dir','constructor','get','BitbucketApiService','6uravKy','isEmptyDir','__createBinding','function','deleted','SFDXUtils','removeComponents','typedi','gitUtils','sort','copySFDXIgnoredComponents','../../../shared/utils','sfLogger','type','sfdxUtils'];a125_0x5ccf=function(){return _0x4748e0;};return a125_0x5ccf();}a125_0x9767d8();'use strict';var __createBinding=this&&this[a125_0x20031c(0x21c)]||(Object[a125_0x20031c(0x20b)]?function(_0x554128,_0x322f42,_0x39e3cc,_0x57cdd0){const _0x5c32c5=a125_0x20031c;if(_0x57cdd0===undefined)_0x57cdd0=_0x39e3cc;var _0x377a65=Object['getOwnPropertyDescriptor'](_0x322f42,_0x39e3cc);(!_0x377a65||(_0x5c32c5(0x218)in _0x377a65?!_0x322f42[_0x5c32c5(0x215)]:_0x377a65[_0x5c32c5(0x1d4)]||_0x377a65[_0x5c32c5(0x1e3)]))&&(_0x377a65={'enumerable':!![],'get':function(){return _0x322f42[_0x39e3cc];}}),Object[_0x5c32c5(0x205)](_0x554128,_0x57cdd0,_0x377a65);}:function(_0x163999,_0x57b6ac,_0x812bd9,_0x5f53fd){if(_0x5f53fd===undefined)_0x5f53fd=_0x812bd9;_0x163999[_0x5f53fd]=_0x57b6ac[_0x812bd9];}),__setModuleDefault=this&&this[a125_0x20031c(0x22b)]||(Object[a125_0x20031c(0x20b)]?function(_0x1b599a,_0x378151){const _0x21c34d=a125_0x20031c;Object['defineProperty'](_0x1b599a,_0x21c34d(0x1de),{'enumerable':!![],'value':_0x378151});}:function(_0x3dd1fb,_0x3f8824){const _0x6b32b1=a125_0x20031c;_0x3dd1fb[_0x6b32b1(0x1de)]=_0x3f8824;}),__decorate=this&&this[a125_0x20031c(0x234)]||function(_0x454dd0,_0x1dd4bc,_0x462ced,_0x3c3c59){const _0x33c939=a125_0x20031c;var _0x594959=arguments[_0x33c939(0x202)],_0x415d0d=_0x594959<0x3?_0x1dd4bc:_0x3c3c59===null?_0x3c3c59=Object[_0x33c939(0x1f8)](_0x1dd4bc,_0x462ced):_0x3c3c59,_0x411747;if(typeof Reflect==='object'&&typeof Reflect[_0x33c939(0x1ff)]===_0x33c939(0x21d))_0x415d0d=Reflect['decorate'](_0x454dd0,_0x1dd4bc,_0x462ced,_0x3c3c59);else{for(var _0x43ecd2=_0x454dd0[_0x33c939(0x202)]-0x1;_0x43ecd2>=0x0;_0x43ecd2--)if(_0x411747=_0x454dd0[_0x43ecd2])_0x415d0d=(_0x594959<0x3?_0x411747(_0x415d0d):_0x594959>0x3?_0x411747(_0x1dd4bc,_0x462ced,_0x415d0d):_0x411747(_0x1dd4bc,_0x462ced))||_0x415d0d;}return _0x594959>0x3&&_0x415d0d&&Object[_0x33c939(0x205)](_0x1dd4bc,_0x462ced,_0x415d0d),_0x415d0d;},__importStar=this&&this['__importStar']||function(_0x52dcf9){const _0x5fbb80=a125_0x20031c;if(_0x52dcf9&&_0x52dcf9['__esModule'])return _0x52dcf9;var _0x4163a0={};if(_0x52dcf9!=null){for(var _0x1793d1 in _0x52dcf9)if(_0x1793d1!==_0x5fbb80(0x1de)&&Object['prototype'][_0x5fbb80(0x212)][_0x5fbb80(0x1fa)](_0x52dcf9,_0x1793d1))__createBinding(_0x4163a0,_0x52dcf9,_0x1793d1);}return __setModuleDefault(_0x4163a0,_0x52dcf9),_0x4163a0;},__importDefault=this&&this['__importDefault']||function(_0x34d056){const _0x740654=a125_0x20031c;return _0x34d056&&_0x34d056[_0x740654(0x215)]?_0x34d056:{'default':_0x34d056};};Object[a125_0x20031c(0x205)](exports,a125_0x20031c(0x215),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;function a125_0x1565(_0x2be671,_0x387910){const _0x1fd28f=a125_0x5ccf();return a125_0x1565=function(_0x9767d8,_0x4e2eea){_0x9767d8=_0x9767d8-0x1d0;let _0x5ccf7c=_0x1fd28f[_0x9767d8];return _0x5ccf7c;},a125_0x1565(_0x2be671,_0x387910);}const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a125_0x20031c(0x201))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a125_0x20031c(0x1e0)),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require(a125_0x20031c(0x221))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require(a125_0x20031c(0x225)),constants_1=require(a125_0x20031c(0x1d2)),git_provider_1=require(a125_0x20031c(0x204)),bitbucket_api_service_1=require(a125_0x20031c(0x235)),sfdx_utils_2=require(a125_0x20031c(0x1db)),fs_internal_1=require('../../internal/fs.internal'),path_1=require('path'),providers_tokens_1=require(a125_0x20031c(0x22f)),constants_2=require(a125_0x20031c(0x1d2));let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(){const _0xc80729=a125_0x20031c;super(...arguments),this[_0xc80729(0x206)]=0x3e8,this[_0xc80729(0x211)]=0x0,this[_0xc80729(0x200)]=0x0,this[_0xc80729(0x229)]=Date[_0xc80729(0x240)]();}async['getRemote'](){const _0x3ece51=a125_0x20031c,{repo:_0x4b61ba}=this[_0x3ece51(0x23b)],_0xfaa2b8=typedi_1[_0x3ece51(0x1de)][_0x3ece51(0x218)](providers_tokens_1[_0x3ece51(0x1e2)][_0x3ece51(0x22d)]);if(this[_0x3ece51(0x23b)][_0x3ece51(0x1e7)]===git_provider_1['GitProvider']['Bitbucket']){const _0xa56e2=typedi_1['default'][_0x3ece51(0x218)](bitbucket_api_service_1[_0x3ece51(0x219)]);await _0xa56e2[_0x3ece51(0x207)]();}return _0x4b61ba[_0x3ece51(0x1d8)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x3ece51(0x1ef)])(_0x4b61ba[_0x3ece51(0x1d8)])+'://'+_0xfaa2b8['getGitShellAuthorizationString']()+'@');}[a125_0x20031c(0x230)](_0x10edf4){const _0x3cf57b=a125_0x20031c;var _0x19f37d;_0x10edf4[_0x3cf57b(0x223)](_0x566759=>child_types_1[_0x3cf57b(0x1de)][_0x3cf57b(0x231)](_0x566759['fileType'])?0x1:-0x1);const _0x5ab2b1={};for(const _0x11874d of _0x10edf4){_0x5ab2b1[_0x19f37d=_0x11874d[_0x3cf57b(0x1d1)]]||(_0x5ab2b1[_0x19f37d]=[]),_0x5ab2b1[_0x11874d[_0x3cf57b(0x1d1)]][_0x3cf57b(0x209)](_0x11874d);}return Object[_0x3cf57b(0x1f6)](_0x5ab2b1)['reduce']((_0x2f7317,_0x4adae8)=>[..._0x2f7317,..._0x4adae8],[]);}async[a125_0x20031c(0x1f1)](_0x124cd6){const _0x5c91e8=a125_0x20031c;_0x124cd6=this[_0x5c91e8(0x230)](_0x124cd6);let _0x2127a6=0x0;while(_0x124cd6['length']){const _0x26f92e=_0x124cd6[_0x5c91e8(0x1dc)](0x0,this[_0x5c91e8(0x206)]);await this[_0x5c91e8(0x23e)]['writeFlosumComponents'](_0x26f92e,{'skipChildErrors':this[_0x5c91e8(0x23b)][_0x5c91e8(0x239)][_0x5c91e8(0x1f3)]==='master','recordType':this[_0x5c91e8(0x23b)]['recordType']}),_0x2127a6+=_0x26f92e[_0x5c91e8(0x202)],this[_0x5c91e8(0x226)][_0x5c91e8(0x20e)](this[_0x5c91e8(0x1f4)]+_0x5c91e8(0x22e)+_0x2127a6+'/'+this['componentsToWrite']+_0x5c91e8(0x203)),await this[_0x5c91e8(0x226)]['send']();}}async[a125_0x20031c(0x220)](_0x47bdc4){const _0x1859c0=a125_0x20031c;_0x47bdc4[_0x1859c0(0x223)](_0x3187e6=>child_types_1[_0x1859c0(0x1de)]['includes'](_0x3187e6[_0x1859c0(0x227)])?-0x1:0x1);let _0x28c1d2=0x0;while(_0x47bdc4['length']){const _0x43dff4=_0x47bdc4[_0x1859c0(0x1dc)](0x0,this[_0x1859c0(0x206)]);await this['mdapiUtils'][_0x1859c0(0x220)](_0x43dff4,this[_0x1859c0(0x23b)][_0x1859c0(0x1ee)]),_0x28c1d2+=_0x43dff4[_0x1859c0(0x202)],this[_0x1859c0(0x226)][_0x1859c0(0x20e)](this[_0x1859c0(0x1f4)]+_0x1859c0(0x1f2)+_0x28c1d2+'/'+this['componentsToDelete']+_0x1859c0(0x203)),await this['sfLogger']['send']();}}async[a125_0x20031c(0x1ec)](){const _0x313789=a125_0x20031c;this[_0x313789(0x222)]&&await this[_0x313789(0x222)][_0x313789(0x1d3)]()['catch'](()=>void 0x0),this['mdapiUtils']&&await this[_0x313789(0x23e)][_0x313789(0x1d3)]()[_0x313789(0x23d)](()=>void 0x0),this[_0x313789(0x228)]&&await this[_0x313789(0x228)]['removeDir']()['catch'](()=>void 0x0);}async[a125_0x20031c(0x20a)](){const _0x5f467d=a125_0x20031c,{repo:_0x5477fe,branch:_0x204bbf,components:_0x4b0c02,convertToSFDX:_0x535569,message:_0x197dcc,user:_0xbb8e48}=this[_0x5f467d(0x23b)];this[_0x5f467d(0x23e)]=new mdapi_utils_1[(_0x5f467d(0x1d9))](),this[_0x5f467d(0x222)]=new git_utils_1['GitUtils'](await this[_0x5f467d(0x236)]()),this[_0x5f467d(0x228)]=new sfdx_utils_1[(_0x5f467d(0x21f))]();let _0x27bc19=_0x535569&&this[_0x5f467d(0x228)][_0x5f467d(0x1f9)](this[_0x5f467d(0x23b)][_0x5f467d(0x1ee)]);try{await this[_0x5f467d(0x226)][_0x5f467d(0x20e)](this[_0x5f467d(0x1f4)]+'\x20Start\x20cloning\x20repository.')[_0x5f467d(0x20d)](),await this[_0x5f467d(0x222)][_0x5f467d(0x1eb)](_0x204bbf[_0x5f467d(0x1f3)],_0x5477fe['name']);!this[_0x5f467d(0x23b)]['force']?(this[_0x5f467d(0x226)][_0x5f467d(0x20e)](this[_0x5f467d(0x1f4)]+'\x20Prepare\x20mdapi\x20files.'),await this[_0x5f467d(0x23e)][_0x5f467d(0x237)](this[_0x5f467d(0x222)][_0x5f467d(0x216)])):this[_0x5f467d(0x226)]['log'](this[_0x5f467d(0x1f4)]+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this[_0x5f467d(0x226)][_0x5f467d(0x20e)](this[_0x5f467d(0x1f4)]+_0x5f467d(0x1d6))[_0x5f467d(0x20d)]();_0x4b0c02[_0x5f467d(0x1d7)]&&(this['sfLogger'][_0x5f467d(0x20e)](this[_0x5f467d(0x1f4)]+'\x20Preparing\x20to\x20write\x20components'),this[_0x5f467d(0x211)]=_0x4b0c02['writed'][_0x5f467d(0x202)],await this[_0x5f467d(0x1f1)](_0x4b0c02['writed']),await this['sfLogger'][_0x5f467d(0x20d)]());await this[_0x5f467d(0x226)][_0x5f467d(0x20e)](this[_0x5f467d(0x1f4)]+_0x5f467d(0x1f5))['send']();_0x4b0c02['deleted']&&(this[_0x5f467d(0x226)][_0x5f467d(0x20e)](this[_0x5f467d(0x1f4)]+_0x5f467d(0x1d5)),this[_0x5f467d(0x200)]=_0x4b0c02[_0x5f467d(0x21e)][_0x5f467d(0x202)],await this['removeComponents'](_0x4b0c02[_0x5f467d(0x21e)]),await this[_0x5f467d(0x226)]['send']());await this[_0x5f467d(0x226)][_0x5f467d(0x20d)]();const _0x5df844=await fs_internal_1['FS'][_0x5f467d(0x21b)](this[_0x5f467d(0x222)][_0x5f467d(0x216)]);await sfdx_utils_2['SFDX']['isSFDXProject'](this[_0x5f467d(0x222)][_0x5f467d(0x216)])?(_0x27bc19=!![],await fs_internal_1['FS'][_0x5f467d(0x1d3)]((0x0,path_1[_0x5f467d(0x23a)])(this[_0x5f467d(0x222)][_0x5f467d(0x216)],'force-app'))):(_0x27bc19&&(!_0x5df844&&(_0x27bc19=![])),await this['gitUtils'][_0x5f467d(0x1e1)]());_0x27bc19?(await this[_0x5f467d(0x226)][_0x5f467d(0x20e)](this[_0x5f467d(0x1f4)]+_0x5f467d(0x1dd))[_0x5f467d(0x20d)](),await this['sfdxUtils']['createProjectFrom'](this[_0x5f467d(0x23e)]['dir']),await this['sfdxUtils'][_0x5f467d(0x23f)](this[_0x5f467d(0x222)]['dir'],!_0x5df844),await this[_0x5f467d(0x228)][_0x5f467d(0x224)](this[_0x5f467d(0x23e)][_0x5f467d(0x216)],(0x0,path_1[_0x5f467d(0x23a)])(this[_0x5f467d(0x222)]['dir'],constants_2[_0x5f467d(0x1e5)])),await this[_0x5f467d(0x228)][_0x5f467d(0x1d3)]()):(await this[_0x5f467d(0x226)][_0x5f467d(0x20e)](this[_0x5f467d(0x1f4)]+_0x5f467d(0x1e8))[_0x5f467d(0x20d)](),await this[_0x5f467d(0x23e)][_0x5f467d(0x214)](this[_0x5f467d(0x222)]['dir']));await this[_0x5f467d(0x226)][_0x5f467d(0x20e)](this['prefix']+_0x5f467d(0x20c))[_0x5f467d(0x20d)](),await this[_0x5f467d(0x222)][_0x5f467d(0x1e9)](_0x197dcc,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0xbb8e48['name']},_0x204bbf['name']),await this['gitUtils'][_0x5f467d(0x1d3)](),await this[_0x5f467d(0x23e)][_0x5f467d(0x1d3)]();const _0x4686ed=this[_0x5f467d(0x211)]+this[_0x5f467d(0x200)];await this[_0x5f467d(0x226)][_0x5f467d(0x20e)](this[_0x5f467d(0x1f4)]+_0x5f467d(0x1d0)+(Date[_0x5f467d(0x240)]()-this[_0x5f467d(0x229)])+_0x5f467d(0x233)+_0x4686ed+'.')[_0x5f467d(0x20d)]();}catch(_0x17a505){await this[_0x5f467d(0x1ec)](),await this[_0x5f467d(0x226)]['error'](this[_0x5f467d(0x1f4)]+'\x20'+_0x17a505)['send']();throw _0x17a505;}}async[a125_0x20031c(0x1fe)](_0x14a16b,_0x543650){const _0x5d3d9a=a125_0x20031c;var _0x2eb7bc,_0xba20ec;this[_0x5d3d9a(0x226)]=typedi_1[_0x5d3d9a(0x1de)]['get'](providers_tokens_1[_0x5d3d9a(0x1e2)][_0x5d3d9a(0x23c)]),this['prefix']=(_0x543650?_0x543650+'\x20':'')+'['+commit_components_dto_1[_0x5d3d9a(0x1da)][_0x5d3d9a(0x1f3)]+']',await this['sfLogger']['log'](this[_0x5d3d9a(0x1f4)]+_0x5d3d9a(0x1df));const _0x4669ac=!!((_0x2eb7bc=_0x14a16b[_0x5d3d9a(0x1fd)])===null||_0x2eb7bc===void 0x0?void 0x0:_0x2eb7bc[_0x5d3d9a(0x1d7)])||!!((_0xba20ec=_0x14a16b[_0x5d3d9a(0x1fd)])===null||_0xba20ec===void 0x0?void 0x0:_0xba20ec[_0x5d3d9a(0x21e)]);if(!_0x4669ac){await this['sfLogger'][_0x5d3d9a(0x20e)](this[_0x5d3d9a(0x1f4)]+'\x20Nothing\x20to\x20commit.\x20Skip.')['send']();return;}this[_0x5d3d9a(0x23b)]=_0x14a16b,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]})],CommitComponentsJob),exports[a125_0x20031c(0x238)]=CommitComponentsJob;