function a104_0x59f1(){const _0xf2e212=['provider','sfLogger','startTime','catch','join','574716QKRUaF','fileType','function','run','copyProjectTo','commitData','\x20Start\x20cloning\x20repository.','credentials','groupComponentsByFileName','mdapiUtils','prefix','getOwnPropertyDescriptor','apply','://','push','deleted','__esModule','writable','gitUtils','../../internal/fs.internal','path','\x20Checking\x20commit\x20components.','486410eKdbaF','send','__importStar','CommitComponentsJob','\x20components','branch','log','ms.\x20Committed\x20components\x20-\x20','../utils/git.utils','\x20Checking\x20written\x20components.','9pDJOfo','clone','configurable','344826rLLhNG','972075ZqQVVW','\x20Checking\x20deleted\x20components.','Service','../../providers/types/git-provider','exec','master','removeComponents','search','14936uEKHOg','componentsToDelete','hasOwnProperty','\x20Nothing\x20to\x20commit.\x20Skip.','../../../../constants','defineProperty','name','force-app','writed','sort','\x20Preparing\x20to\x20write\x20components','MDApiUtils','Bitbucket','__decorate','../../providers/api/bitbucket-api.service','copyMdapiTo','constructor','SFDX','gitUrl','GitProvider','now','components','63NcdrfH','default','getGitShellAuthorizationString','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','length','sfdxUtils','createProjectFrom','replace','cleanUp','create','error','COMPONENTS_PER_TICK','prototype','prepareMdapi','SFDXUtils','componentsToWrite','commitAndPush','toString','510572BSWcGJ','removeDir','decorate','(((.+)+)+)+$','fileName','1071hKhGgs','../utils/mdapi.utils','\x20Start\x20converting\x20to\x20SFDX.','events','__importDefault','\x20Prepare\x20mdapi\x20files.','force','560716EtsJxx','Tokens','dir','writeComponents','getProtocol','DEFAULT_GIT_USER_EMAIL','typedi','isLoggedIn','\x20Preparing\x20to\x20delete\x20components','getRemote','get','../../providers/providers.tokens'];a104_0x59f1=function(){return _0xf2e212;};return a104_0x59f1();}function a104_0x5db1(_0x1d0abf,_0x150505){const _0x42ef85=a104_0x59f1();return a104_0x5db1=function(_0x323528,_0x50cc07){_0x323528=_0x323528-0x18b;let _0x59f14a=_0x42ef85[_0x323528];return _0x59f14a;},a104_0x5db1(_0x1d0abf,_0x150505);}const a104_0xb2393b=a104_0x5db1;(function(_0x51d700,_0x59fdef){const _0x20877c=a104_0x5db1,_0x273638=_0x51d700();while(!![]){try{const _0x1324fd=parseInt(_0x20877c(0x1f2))/0x1+-parseInt(_0x20877c(0x1be))/0x2+parseInt(_0x20877c(0x1ef))/0x3*(parseInt(_0x20877c(0x1b2))/0x4)+-parseInt(_0x20877c(0x1f3))/0x5+-parseInt(_0x20877c(0x1cf))/0x6+parseInt(_0x20877c(0x1b7))/0x7*(-parseInt(_0x20877c(0x1fb))/0x8)+parseInt(_0x20877c(0x1a0))/0x9*(parseInt(_0x20877c(0x1e5))/0xa);if(_0x1324fd===_0x59fdef)break;else _0x273638['push'](_0x273638['shift']());}catch(_0x3f407d){_0x273638['push'](_0x273638['shift']());}}}(a104_0x59f1,0x33c40));const a104_0x50cc07=(function(){let _0x2d2cfc=!![];return function(_0x176dc6,_0x559c74){const _0x578e21=_0x2d2cfc?function(){const _0x5005c4=a104_0x5db1;if(_0x559c74){const _0x33c2d6=_0x559c74[_0x5005c4(0x1db)](_0x176dc6,arguments);return _0x559c74=null,_0x33c2d6;}}:function(){};return _0x2d2cfc=![],_0x578e21;};}()),a104_0x323528=a104_0x50cc07(this,function(){const _0x21c1d2=a104_0x5db1;return a104_0x323528[_0x21c1d2(0x1b1)]()['search'](_0x21c1d2(0x1b5))[_0x21c1d2(0x1b1)]()[_0x21c1d2(0x19a)](a104_0x323528)[_0x21c1d2(0x1fa)](_0x21c1d2(0x1b5));});a104_0x323528();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x4abce0,_0x746cc2,_0x56b399,_0x2644b9){const _0xfb1cb5=a104_0x5db1;if(_0x2644b9===undefined)_0x2644b9=_0x56b399;var _0x405d2a=Object[_0xfb1cb5(0x1da)](_0x746cc2,_0x56b399);(!_0x405d2a||('get'in _0x405d2a?!_0x746cc2[_0xfb1cb5(0x1df)]:_0x405d2a[_0xfb1cb5(0x1e0)]||_0x405d2a[_0xfb1cb5(0x1f1)]))&&(_0x405d2a={'enumerable':!![],'get':function(){return _0x746cc2[_0x56b399];}}),Object[_0xfb1cb5(0x18f)](_0x4abce0,_0x2644b9,_0x405d2a);}:function(_0x3c8434,_0x938c09,_0xe28c50,_0x855bd8){if(_0x855bd8===undefined)_0x855bd8=_0xe28c50;_0x3c8434[_0x855bd8]=_0x938c09[_0xe28c50];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a104_0xb2393b(0x1a9)]?function(_0x438026,_0xda9083){const _0x5773af=a104_0xb2393b;Object[_0x5773af(0x18f)](_0x438026,_0x5773af(0x1a1),{'enumerable':!![],'value':_0xda9083});}:function(_0x5e30f6,_0x70006b){_0x5e30f6['default']=_0x70006b;}),__decorate=this&&this[a104_0xb2393b(0x197)]||function(_0x447595,_0x2b0fc8,_0x2cb8a0,_0x4680c1){const _0x309650=a104_0xb2393b;var _0x245436=arguments[_0x309650(0x1a4)],_0x1d85de=_0x245436<0x3?_0x2b0fc8:_0x4680c1===null?_0x4680c1=Object[_0x309650(0x1da)](_0x2b0fc8,_0x2cb8a0):_0x4680c1,_0x28964c;if(typeof Reflect==='object'&&typeof Reflect[_0x309650(0x1b4)]===_0x309650(0x1d1))_0x1d85de=Reflect[_0x309650(0x1b4)](_0x447595,_0x2b0fc8,_0x2cb8a0,_0x4680c1);else{for(var _0x5d3bd3=_0x447595['length']-0x1;_0x5d3bd3>=0x0;_0x5d3bd3--)if(_0x28964c=_0x447595[_0x5d3bd3])_0x1d85de=(_0x245436<0x3?_0x28964c(_0x1d85de):_0x245436>0x3?_0x28964c(_0x2b0fc8,_0x2cb8a0,_0x1d85de):_0x28964c(_0x2b0fc8,_0x2cb8a0))||_0x1d85de;}return _0x245436>0x3&&_0x1d85de&&Object[_0x309650(0x18f)](_0x2b0fc8,_0x2cb8a0,_0x1d85de),_0x1d85de;},__importStar=this&&this[a104_0xb2393b(0x1e7)]||function(_0x186884){const _0x52f67a=a104_0xb2393b;if(_0x186884&&_0x186884[_0x52f67a(0x1df)])return _0x186884;var _0x6aa28e={};if(_0x186884!=null){for(var _0x29f230 in _0x186884)if(_0x29f230!==_0x52f67a(0x1a1)&&Object[_0x52f67a(0x1ac)][_0x52f67a(0x18c)]['call'](_0x186884,_0x29f230))__createBinding(_0x6aa28e,_0x186884,_0x29f230);}return __setModuleDefault(_0x6aa28e,_0x186884),_0x6aa28e;},__importDefault=this&&this[a104_0xb2393b(0x1bb)]||function(_0x227289){const _0x3ab777=a104_0xb2393b;return _0x227289&&_0x227289[_0x3ab777(0x1df)]?_0x227289:{'default':_0x227289};};Object[a104_0xb2393b(0x18f)](exports,a104_0xb2393b(0x1df),{'value':!![]}),exports[a104_0xb2393b(0x1e8)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a104_0xb2393b(0x1ba))),git_utils_1=require(a104_0xb2393b(0x1ed)),mdapi_utils_1=require(a104_0xb2393b(0x1b8)),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require(a104_0xb2393b(0x1c4))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require('../../../shared/utils'),constants_1=require(a104_0xb2393b(0x18e)),git_provider_1=require(a104_0xb2393b(0x1f6)),bitbucket_api_service_1=require(a104_0xb2393b(0x198)),sfdx_utils_2=require('../../salesforce/utils/sfdx.utils'),fs_internal_1=require(a104_0xb2393b(0x1e2)),path_1=require(a104_0xb2393b(0x1e3)),providers_tokens_1=require(a104_0xb2393b(0x1c9));let CommitComponentsJob=class CommitComponentsJob extends events_1[a104_0xb2393b(0x1a1)]{constructor(){const _0x5c5616=a104_0xb2393b;super(...arguments),this[_0x5c5616(0x1ab)]=0x3e8,this[_0x5c5616(0x1af)]=0x0,this[_0x5c5616(0x18b)]=0x0,this[_0x5c5616(0x1cc)]=Date[_0x5c5616(0x19e)]();}async[a104_0xb2393b(0x1c7)](){const _0x22ba59=a104_0xb2393b,{repo:_0x355e39}=this['commitData'],_0x49d0e7=typedi_1[_0x22ba59(0x1a1)]['get'](providers_tokens_1['Tokens'][_0x22ba59(0x1d6)]);if(this[_0x22ba59(0x1d4)][_0x22ba59(0x1ca)]===git_provider_1[_0x22ba59(0x19d)][_0x22ba59(0x196)]){const _0x89af5b=typedi_1['default'][_0x22ba59(0x1c8)](bitbucket_api_service_1['BitbucketApiService']);await _0x89af5b[_0x22ba59(0x1c5)]();}return _0x355e39[_0x22ba59(0x19c)][_0x22ba59(0x1a7)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x22ba59(0x1c2)])(_0x355e39[_0x22ba59(0x19c)])+_0x22ba59(0x1dc)+_0x49d0e7[_0x22ba59(0x1a2)]()+'@');}['groupComponentsByFileName'](_0x2cac47){const _0x30f762=a104_0xb2393b;var _0x2d81ca;_0x2cac47[_0x30f762(0x193)](_0x1812a0=>child_types_1[_0x30f762(0x1a1)]['includes'](_0x1812a0[_0x30f762(0x1d0)])?0x1:-0x1);const _0x215ab3={};for(const _0x3c0ae3 of _0x2cac47){_0x215ab3[_0x2d81ca=_0x3c0ae3[_0x30f762(0x1b6)]]||(_0x215ab3[_0x2d81ca]=[]),_0x215ab3[_0x3c0ae3[_0x30f762(0x1b6)]][_0x30f762(0x1dd)](_0x3c0ae3);}return Object['values'](_0x215ab3)['reduce']((_0x5df9e5,_0x4ed75e)=>[..._0x5df9e5,..._0x4ed75e],[]);}async[a104_0xb2393b(0x1c1)](_0xa6ffa){const _0x75445e=a104_0xb2393b;_0xa6ffa=this[_0x75445e(0x1d7)](_0xa6ffa);let _0x346550=0x0;while(_0xa6ffa[_0x75445e(0x1a4)]){const _0x417971=_0xa6ffa['splice'](0x0,this[_0x75445e(0x1ab)]);await this[_0x75445e(0x1d8)]['writeFlosumComponents'](_0x417971,{'skipChildErrors':this[_0x75445e(0x1d4)][_0x75445e(0x1ea)][_0x75445e(0x190)]===_0x75445e(0x1f8)}),_0x346550+=_0x417971[_0x75445e(0x1a4)],this[_0x75445e(0x1cb)][_0x75445e(0x1eb)](this[_0x75445e(0x1d9)]+'\x20Wrote\x20'+_0x346550+'/'+this[_0x75445e(0x1af)]+_0x75445e(0x1e9)),await this[_0x75445e(0x1cb)][_0x75445e(0x1e6)]();}}async[a104_0xb2393b(0x1f9)](_0x57803c){const _0x568583=a104_0xb2393b;_0x57803c[_0x568583(0x193)](_0x1d5279=>child_types_1[_0x568583(0x1a1)]['includes'](_0x1d5279['type'])?-0x1:0x1);let _0x879d14=0x0;while(_0x57803c['length']){const _0x2c643f=_0x57803c['splice'](0x0,this[_0x568583(0x1ab)]);await this[_0x568583(0x1d8)][_0x568583(0x1f9)](_0x2c643f),_0x879d14+=_0x2c643f['length'],this[_0x568583(0x1cb)][_0x568583(0x1eb)](this[_0x568583(0x1d9)]+'\x20Deleted\x20'+_0x879d14+'/'+this[_0x568583(0x18b)]+_0x568583(0x1e9)),await this['sfLogger'][_0x568583(0x1e6)]();}}async[a104_0xb2393b(0x1a8)](){const _0x45e3c4=a104_0xb2393b;this['gitUtils']&&await this['gitUtils'][_0x45e3c4(0x1b3)]()[_0x45e3c4(0x1cd)](()=>void 0x0),this[_0x45e3c4(0x1d8)]&&await this[_0x45e3c4(0x1d8)][_0x45e3c4(0x1b3)]()[_0x45e3c4(0x1cd)](()=>void 0x0),this['sfdxUtils']&&await this[_0x45e3c4(0x1a5)][_0x45e3c4(0x1b3)]()['catch'](()=>void 0x0);}async[a104_0xb2393b(0x1f7)](){const _0x5e7720=a104_0xb2393b,{repo:_0x4d0694,branch:_0x1324a2,components:_0x44f763,convertToSFDX:_0x3452ea,message:_0x4e60be,user:_0x18278f}=this['commitData'];this[_0x5e7720(0x1d8)]=new mdapi_utils_1[(_0x5e7720(0x195))](),this[_0x5e7720(0x1e1)]=new git_utils_1['GitUtils'](await this[_0x5e7720(0x1c7)]()),this[_0x5e7720(0x1a5)]=new sfdx_utils_1[(_0x5e7720(0x1ae))]();let _0x104071=_0x3452ea;try{await this[_0x5e7720(0x1cb)][_0x5e7720(0x1eb)](this[_0x5e7720(0x1d9)]+_0x5e7720(0x1d5))[_0x5e7720(0x1e6)](),await this['gitUtils'][_0x5e7720(0x1f0)](_0x1324a2[_0x5e7720(0x190)],_0x4d0694['name']);!this[_0x5e7720(0x1d4)][_0x5e7720(0x1bd)]?(this[_0x5e7720(0x1cb)]['log'](this[_0x5e7720(0x1d9)]+_0x5e7720(0x1bc)),await this[_0x5e7720(0x1d8)][_0x5e7720(0x1ad)](this[_0x5e7720(0x1e1)][_0x5e7720(0x1c0)])):this[_0x5e7720(0x1cb)]['log'](this['prefix']+_0x5e7720(0x1a3));await this[_0x5e7720(0x1cb)][_0x5e7720(0x1eb)](this[_0x5e7720(0x1d9)]+_0x5e7720(0x1ee))['send']();_0x44f763[_0x5e7720(0x192)]&&(this[_0x5e7720(0x1cb)]['log'](this[_0x5e7720(0x1d9)]+_0x5e7720(0x194)),this[_0x5e7720(0x1af)]=_0x44f763['writed'][_0x5e7720(0x1a4)],await this[_0x5e7720(0x1c1)](_0x44f763[_0x5e7720(0x192)]),await this[_0x5e7720(0x1cb)][_0x5e7720(0x1e6)]());await this[_0x5e7720(0x1cb)]['log'](this[_0x5e7720(0x1d9)]+_0x5e7720(0x1f4))['send']();_0x44f763[_0x5e7720(0x1de)]&&(this[_0x5e7720(0x1cb)]['log'](this[_0x5e7720(0x1d9)]+_0x5e7720(0x1c6)),this['componentsToDelete']=_0x44f763[_0x5e7720(0x1de)][_0x5e7720(0x1a4)],await this[_0x5e7720(0x1f9)](_0x44f763[_0x5e7720(0x1de)]),await this[_0x5e7720(0x1cb)][_0x5e7720(0x1e6)]());await this[_0x5e7720(0x1cb)]['send']();const _0x314169=await fs_internal_1['FS']['isEmptyDir'](this['gitUtils']['dir']);await sfdx_utils_2[_0x5e7720(0x19b)]['isSFDXProject'](this['gitUtils'][_0x5e7720(0x1c0)])?(_0x104071=!![],await fs_internal_1['FS']['removeDir']((0x0,path_1[_0x5e7720(0x1ce)])(this[_0x5e7720(0x1e1)][_0x5e7720(0x1c0)],_0x5e7720(0x191)))):(_0x104071&&(!_0x314169&&(_0x104071=![])),await this[_0x5e7720(0x1e1)]['clearDir']());_0x104071?(await this[_0x5e7720(0x1cb)]['log'](this[_0x5e7720(0x1d9)]+_0x5e7720(0x1b9))['send'](),await this[_0x5e7720(0x1a5)][_0x5e7720(0x1a6)](this[_0x5e7720(0x1d8)][_0x5e7720(0x1c0)]),await this[_0x5e7720(0x1a5)][_0x5e7720(0x1d3)](this[_0x5e7720(0x1e1)][_0x5e7720(0x1c0)],!_0x314169),await this[_0x5e7720(0x1a5)][_0x5e7720(0x1b3)]()):(await this[_0x5e7720(0x1cb)][_0x5e7720(0x1eb)](this[_0x5e7720(0x1d9)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x5e7720(0x1e6)](),await this[_0x5e7720(0x1d8)][_0x5e7720(0x199)](this[_0x5e7720(0x1e1)][_0x5e7720(0x1c0)]));await this[_0x5e7720(0x1cb)]['log'](this[_0x5e7720(0x1d9)]+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')[_0x5e7720(0x1e6)](),await this[_0x5e7720(0x1e1)][_0x5e7720(0x1b0)](_0x4e60be,{'email':constants_1[_0x5e7720(0x1c3)],'name':_0x18278f[_0x5e7720(0x190)]},_0x1324a2[_0x5e7720(0x190)]),await this[_0x5e7720(0x1e1)][_0x5e7720(0x1b3)](),await this['mdapiUtils'][_0x5e7720(0x1b3)]();const _0x1683ef=this['componentsToWrite']+this[_0x5e7720(0x18b)];await this[_0x5e7720(0x1cb)][_0x5e7720(0x1eb)](this[_0x5e7720(0x1d9)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x5e7720(0x19e)]()-this['startTime'])+_0x5e7720(0x1ec)+_0x1683ef+'.')[_0x5e7720(0x1e6)]();}catch(_0x9d150c){await this['cleanUp'](),await this[_0x5e7720(0x1cb)][_0x5e7720(0x1aa)](this[_0x5e7720(0x1d9)]+'\x20'+_0x9d150c)[_0x5e7720(0x1e6)]();throw _0x9d150c;}}async[a104_0xb2393b(0x1d2)](_0x58049d,_0x1d23d7){const _0x542381=a104_0xb2393b;var _0x1c1ba2,_0x7df135;this[_0x542381(0x1cb)]=typedi_1[_0x542381(0x1a1)]['get'](providers_tokens_1[_0x542381(0x1bf)]['logger']),this[_0x542381(0x1d9)]=(_0x1d23d7?_0x1d23d7+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x542381(0x190)]+']',await this[_0x542381(0x1cb)][_0x542381(0x1eb)](this[_0x542381(0x1d9)]+_0x542381(0x1e4));const _0x142dfb=!!((_0x1c1ba2=_0x58049d['components'])===null||_0x1c1ba2===void 0x0?void 0x0:_0x1c1ba2[_0x542381(0x192)])||!!((_0x7df135=_0x58049d[_0x542381(0x19f)])===null||_0x7df135===void 0x0?void 0x0:_0x7df135[_0x542381(0x1de)]);if(!_0x142dfb){await this[_0x542381(0x1cb)]['log'](this['prefix']+_0x542381(0x18d))[_0x542381(0x1e6)]();return;}this[_0x542381(0x1d4)]=_0x58049d,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0xb2393b(0x1f5)])({'transient':!![]})],CommitComponentsJob),exports[a104_0xb2393b(0x1e8)]=CommitComponentsJob;