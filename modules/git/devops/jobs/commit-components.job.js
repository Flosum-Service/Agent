const a103_0x5ceced=a103_0xf734;(function(_0x1216a9,_0x3fddf9){const _0x3387d8=a103_0xf734,_0x426292=_0x1216a9();while(!![]){try{const _0x3b7e16=-parseInt(_0x3387d8(0xf0))/0x1+parseInt(_0x3387d8(0x11c))/0x2*(parseInt(_0x3387d8(0xdc))/0x3)+-parseInt(_0x3387d8(0x135))/0x4+parseInt(_0x3387d8(0x133))/0x5+-parseInt(_0x3387d8(0x12c))/0x6+parseInt(_0x3387d8(0x148))/0x7*(-parseInt(_0x3387d8(0xdf))/0x8)+parseInt(_0x3387d8(0x152))/0x9*(parseInt(_0x3387d8(0x141))/0xa);if(_0x3b7e16===_0x3fddf9)break;else _0x426292['push'](_0x426292['shift']());}catch(_0x1a6db6){_0x426292['push'](_0x426292['shift']());}}}(a103_0x1c6b,0x29550));const a103_0x298c7b=(function(){let _0x3d620e=!![];return function(_0x3b550e,_0x164520){const _0x4d55d5=_0x3d620e?function(){if(_0x164520){const _0x3973eb=_0x164520['apply'](_0x3b550e,arguments);return _0x164520=null,_0x3973eb;}}:function(){};return _0x3d620e=![],_0x4d55d5;};}()),a103_0x3dde69=a103_0x298c7b(this,function(){const _0xe8ea16=a103_0xf734;return a103_0x3dde69['toString']()[_0xe8ea16(0x107)](_0xe8ea16(0x109))[_0xe8ea16(0x113)]()[_0xe8ea16(0x13f)](a103_0x3dde69)[_0xe8ea16(0x107)](_0xe8ea16(0x109));});function a103_0x1c6b(){const _0x14fa4d=['replace','search','\x20Prepare\x20mdapi\x20files.','(((.+)+)+)+$','splice','\x20Checking\x20deleted\x20components.','\x20components','componentsToWrite','writed','typedi','call','Tokens','sfLogger','toString','../utils/sfdx.utils','configurable','path','CommitComponentsJob','CommitComponentsDto','startTime','deleted','gitUrl','4274kdNWPZ','../../providers/providers.tokens','force','getRemote','credentials','sfdxUtils','force-app','../dto/commit-components.dto','../../internal/fs.internal','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','clone','prepareMdapi','exec','componentsToDelete','MDApiUtils','\x20Deleted\x20','1646178rUDQRz','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','getProtocol','\x20Copying\x20mdapi\x20to\x20git\x20folder.','removeComponents','\x20Wrote\x20','../../salesforce/utils/sfdx.utils','530435RhsAhy','dir','1244824EmMpOy','create','run','../../../shared/utils','log','SFDXUtils','sort','error','prefix','reduce','constructor','__esModule','2510SMhUTn','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','logger','\x20Preparing\x20to\x20write\x20components','hasOwnProperty','gitUtils','../../providers/types/git-provider','307391lUSsiM','removeDir','master','send','Service','push','fileType','components','__setModuleDefault','ms.\x20Committed\x20components\x20-\x20','24453tRkmXp','../../../../constants','decorate','../utils/mdapi.utils','474wvNmPb','__createBinding','groupComponentsByFileName','8KgwSNO','get','SFDX','commitAndPush','../../parsers/data/child-types','writable','cleanUp','length','values','name','branch','\x20Checking\x20commit\x20components.','object','commitData','__importStar','createProjectFrom','type','326922OxDmuO','getOwnPropertyDescriptor','\x20Nothing\x20to\x20commit.\x20Skip.','catch','DEFAULT_GIT_USER_EMAIL','fileName','GitUtils','mdapiUtils','defineProperty','\x20Start\x20converting\x20to\x20SFDX.','COMPONENTS_PER_TICK','includes','getGitShellAuthorizationString','../../providers/api/bitbucket-api.service','default','writeComponents','\x20Checking\x20written\x20components.','__decorate','events','__importDefault','isSFDXProject','\x20Preparing\x20to\x20delete\x20components'];a103_0x1c6b=function(){return _0x14fa4d;};return a103_0x1c6b();}a103_0x3dde69();'use strict';var __createBinding=this&&this[a103_0x5ceced(0xdd)]||(Object['create']?function(_0x52f983,_0x1fdd89,_0x16d89f,_0x2ddc46){const _0x2aa37b=a103_0x5ceced;if(_0x2ddc46===undefined)_0x2ddc46=_0x16d89f;var _0x4d6984=Object[_0x2aa37b(0xf1)](_0x1fdd89,_0x16d89f);(!_0x4d6984||(_0x2aa37b(0xe0)in _0x4d6984?!_0x1fdd89[_0x2aa37b(0x140)]:_0x4d6984[_0x2aa37b(0xe4)]||_0x4d6984[_0x2aa37b(0x115)]))&&(_0x4d6984={'enumerable':!![],'get':function(){return _0x1fdd89[_0x16d89f];}}),Object[_0x2aa37b(0xf8)](_0x52f983,_0x2ddc46,_0x4d6984);}:function(_0x16ff42,_0x2839e4,_0x415914,_0x2eea50){if(_0x2eea50===undefined)_0x2eea50=_0x415914;_0x16ff42[_0x2eea50]=_0x2839e4[_0x415914];}),__setModuleDefault=this&&this[a103_0x5ceced(0x150)]||(Object[a103_0x5ceced(0x136)]?function(_0x58b7e4,_0x595d4c){const _0x3778b4=a103_0x5ceced;Object[_0x3778b4(0xf8)](_0x58b7e4,_0x3778b4(0xfe),{'enumerable':!![],'value':_0x595d4c});}:function(_0x500128,_0x512628){const _0x3b5f36=a103_0x5ceced;_0x500128[_0x3b5f36(0xfe)]=_0x512628;}),__decorate=this&&this[a103_0x5ceced(0x101)]||function(_0x2e2106,_0x4d82c5,_0x1d9b08,_0x11ae10){const _0x414609=a103_0x5ceced;var _0x3aec35=arguments[_0x414609(0xe6)],_0x2ce9a7=_0x3aec35<0x3?_0x4d82c5:_0x11ae10===null?_0x11ae10=Object[_0x414609(0xf1)](_0x4d82c5,_0x1d9b08):_0x11ae10,_0x22534c;if(typeof Reflect===_0x414609(0xeb)&&typeof Reflect[_0x414609(0xda)]==='function')_0x2ce9a7=Reflect[_0x414609(0xda)](_0x2e2106,_0x4d82c5,_0x1d9b08,_0x11ae10);else{for(var _0x54f5e6=_0x2e2106[_0x414609(0xe6)]-0x1;_0x54f5e6>=0x0;_0x54f5e6--)if(_0x22534c=_0x2e2106[_0x54f5e6])_0x2ce9a7=(_0x3aec35<0x3?_0x22534c(_0x2ce9a7):_0x3aec35>0x3?_0x22534c(_0x4d82c5,_0x1d9b08,_0x2ce9a7):_0x22534c(_0x4d82c5,_0x1d9b08))||_0x2ce9a7;}return _0x3aec35>0x3&&_0x2ce9a7&&Object[_0x414609(0xf8)](_0x4d82c5,_0x1d9b08,_0x2ce9a7),_0x2ce9a7;},__importStar=this&&this[a103_0x5ceced(0xed)]||function(_0x3fef67){const _0x4bb70c=a103_0x5ceced;if(_0x3fef67&&_0x3fef67[_0x4bb70c(0x140)])return _0x3fef67;var _0x161322={};if(_0x3fef67!=null){for(var _0xd69bff in _0x3fef67)if(_0xd69bff!==_0x4bb70c(0xfe)&&Object['prototype'][_0x4bb70c(0x145)][_0x4bb70c(0x110)](_0x3fef67,_0xd69bff))__createBinding(_0x161322,_0x3fef67,_0xd69bff);}return __setModuleDefault(_0x161322,_0x3fef67),_0x161322;},__importDefault=this&&this[a103_0x5ceced(0x103)]||function(_0x251abc){const _0x12cf2=a103_0x5ceced;return _0x251abc&&_0x251abc[_0x12cf2(0x140)]?_0x251abc:{'default':_0x251abc};};Object[a103_0x5ceced(0xf8)](exports,a103_0x5ceced(0x140),{'value':!![]}),exports[a103_0x5ceced(0x117)]=void 0x0;const commit_components_dto_1=require(a103_0x5ceced(0x123)),events_1=__importDefault(require(a103_0x5ceced(0x102))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a103_0x5ceced(0xdb)),sfdx_utils_1=require(a103_0x5ceced(0x114)),typedi_1=__importStar(require(a103_0x5ceced(0x10f))),child_types_1=__importDefault(require(a103_0x5ceced(0xe3))),utils_1=require(a103_0x5ceced(0x138)),constants_1=require(a103_0x5ceced(0x153)),git_provider_1=require(a103_0x5ceced(0x147)),bitbucket_api_service_1=require(a103_0x5ceced(0xfd)),sfdx_utils_2=require(a103_0x5ceced(0x132)),fs_internal_1=require(a103_0x5ceced(0x124)),path_1=require(a103_0x5ceced(0x116)),providers_tokens_1=require(a103_0x5ceced(0x11d));let CommitComponentsJob=class CommitComponentsJob extends events_1[a103_0x5ceced(0xfe)]{constructor(){const _0x216cb0=a103_0x5ceced;super(...arguments),this[_0x216cb0(0xfa)]=0x3e8,this[_0x216cb0(0x10d)]=0x0,this[_0x216cb0(0x129)]=0x0,this[_0x216cb0(0x119)]=Date['now']();}async['getRemote'](){const _0x21d11a=a103_0x5ceced,{repo:_0x468e2d}=this[_0x21d11a(0xec)],_0x40ca68=typedi_1[_0x21d11a(0xfe)]['get'](providers_tokens_1['Tokens'][_0x21d11a(0x120)]);if(this[_0x21d11a(0xec)]['provider']===git_provider_1['GitProvider']['Bitbucket']){const _0x186436=typedi_1[_0x21d11a(0xfe)][_0x21d11a(0xe0)](bitbucket_api_service_1['BitbucketApiService']);await _0x186436['isLoggedIn']();}return _0x468e2d[_0x21d11a(0x11b)][_0x21d11a(0x106)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x21d11a(0x12e)])(_0x468e2d[_0x21d11a(0x11b)])+'://'+_0x40ca68[_0x21d11a(0xfc)]()+'@');}[a103_0x5ceced(0xde)](_0x162630){const _0x504b34=a103_0x5ceced;var _0x53ece4;_0x162630['sort'](_0x3fc341=>child_types_1[_0x504b34(0xfe)][_0x504b34(0xfb)](_0x3fc341[_0x504b34(0x14e)])?0x1:-0x1);const _0x2f3e85={};for(const _0x57c48c of _0x162630){_0x2f3e85[_0x53ece4=_0x57c48c[_0x504b34(0xf5)]]||(_0x2f3e85[_0x53ece4]=[]),_0x2f3e85[_0x57c48c['fileName']][_0x504b34(0x14d)](_0x57c48c);}return Object[_0x504b34(0xe7)](_0x2f3e85)[_0x504b34(0x13e)]((_0x2de3be,_0x24105d)=>[..._0x2de3be,..._0x24105d],[]);}async[a103_0x5ceced(0xff)](_0x395ddc){const _0x5d2176=a103_0x5ceced;_0x395ddc=this[_0x5d2176(0xde)](_0x395ddc);let _0xd91c8c=0x0;while(_0x395ddc[_0x5d2176(0xe6)]){const _0xcce04e=_0x395ddc[_0x5d2176(0x10a)](0x0,this[_0x5d2176(0xfa)]);await this[_0x5d2176(0xf7)]['writeFlosumComponents'](_0xcce04e,{'skipChildErrors':this[_0x5d2176(0xec)][_0x5d2176(0xe9)][_0x5d2176(0xe8)]===_0x5d2176(0x14a)}),_0xd91c8c+=_0xcce04e[_0x5d2176(0xe6)],this[_0x5d2176(0x112)][_0x5d2176(0x139)](this[_0x5d2176(0x13d)]+_0x5d2176(0x131)+_0xd91c8c+'/'+this[_0x5d2176(0x10d)]+_0x5d2176(0x10c)),await this[_0x5d2176(0x112)][_0x5d2176(0x14b)]();}}async[a103_0x5ceced(0x130)](_0xeb0ab6){const _0x210b07=a103_0x5ceced;_0xeb0ab6[_0x210b07(0x13b)](_0x206ae4=>child_types_1['default'][_0x210b07(0xfb)](_0x206ae4[_0x210b07(0xef)])?-0x1:0x1);let _0x2a89a7=0x0;while(_0xeb0ab6['length']){const _0xa30516=_0xeb0ab6[_0x210b07(0x10a)](0x0,this[_0x210b07(0xfa)]);await this[_0x210b07(0xf7)]['removeComponents'](_0xa30516),_0x2a89a7+=_0xa30516[_0x210b07(0xe6)],this['sfLogger'][_0x210b07(0x139)](this['prefix']+_0x210b07(0x12b)+_0x2a89a7+'/'+this[_0x210b07(0x129)]+_0x210b07(0x10c)),await this[_0x210b07(0x112)][_0x210b07(0x14b)]();}}async[a103_0x5ceced(0xe5)](){const _0x33b1aa=a103_0x5ceced;this[_0x33b1aa(0x146)]&&await this[_0x33b1aa(0x146)][_0x33b1aa(0x149)]()[_0x33b1aa(0xf3)](()=>void 0x0),this[_0x33b1aa(0xf7)]&&await this['mdapiUtils'][_0x33b1aa(0x149)]()[_0x33b1aa(0xf3)](()=>void 0x0),this[_0x33b1aa(0x121)]&&await this[_0x33b1aa(0x121)][_0x33b1aa(0x149)]()[_0x33b1aa(0xf3)](()=>void 0x0);}async[a103_0x5ceced(0x128)](){const _0xc7732a=a103_0x5ceced,{repo:_0x2999e9,branch:_0x1505c5,components:_0x5daab4,convertToSFDX:_0x1444af,message:_0xe521ab,user:_0x261e53}=this[_0xc7732a(0xec)];this[_0xc7732a(0xf7)]=new mdapi_utils_1[(_0xc7732a(0x12a))](),this[_0xc7732a(0x146)]=new git_utils_1[(_0xc7732a(0xf6))](await this[_0xc7732a(0x11f)]()),this[_0xc7732a(0x121)]=new sfdx_utils_1[(_0xc7732a(0x13a))]();let _0x43584f=_0x1444af;try{await this[_0xc7732a(0x112)][_0xc7732a(0x139)](this['prefix']+'\x20Start\x20cloning\x20repository.')[_0xc7732a(0x14b)](),await this['gitUtils'][_0xc7732a(0x126)](_0x1505c5[_0xc7732a(0xe8)],_0x2999e9['name']);!this[_0xc7732a(0xec)][_0xc7732a(0x11e)]?(this[_0xc7732a(0x112)]['log'](this[_0xc7732a(0x13d)]+_0xc7732a(0x108)),await this[_0xc7732a(0xf7)][_0xc7732a(0x127)](this[_0xc7732a(0x146)]['dir'])):this['sfLogger'][_0xc7732a(0x139)](this[_0xc7732a(0x13d)]+_0xc7732a(0x142));await this[_0xc7732a(0x112)][_0xc7732a(0x139)](this[_0xc7732a(0x13d)]+_0xc7732a(0x100))[_0xc7732a(0x14b)]();_0x5daab4[_0xc7732a(0x10e)]&&(this[_0xc7732a(0x112)][_0xc7732a(0x139)](this[_0xc7732a(0x13d)]+_0xc7732a(0x144)),this[_0xc7732a(0x10d)]=_0x5daab4[_0xc7732a(0x10e)]['length'],await this['writeComponents'](_0x5daab4[_0xc7732a(0x10e)]),await this['sfLogger'][_0xc7732a(0x14b)]());await this[_0xc7732a(0x112)][_0xc7732a(0x139)](this[_0xc7732a(0x13d)]+_0xc7732a(0x10b))[_0xc7732a(0x14b)]();_0x5daab4['deleted']&&(this[_0xc7732a(0x112)][_0xc7732a(0x139)](this[_0xc7732a(0x13d)]+_0xc7732a(0x105)),this[_0xc7732a(0x129)]=_0x5daab4['deleted'][_0xc7732a(0xe6)],await this[_0xc7732a(0x130)](_0x5daab4['deleted']),await this[_0xc7732a(0x112)][_0xc7732a(0x14b)]());await this[_0xc7732a(0x112)][_0xc7732a(0x14b)]();const _0x29521a=await fs_internal_1['FS']['isEmptyDir'](this[_0xc7732a(0x146)]['dir']);await sfdx_utils_2[_0xc7732a(0xe1)][_0xc7732a(0x104)](this[_0xc7732a(0x146)][_0xc7732a(0x134)])?(_0x43584f=!![],await fs_internal_1['FS'][_0xc7732a(0x149)]((0x0,path_1['join'])(this[_0xc7732a(0x146)]['dir'],_0xc7732a(0x122)))):(_0x43584f&&(!_0x29521a&&(_0x43584f=![])),await this[_0xc7732a(0x146)]['clearDir']());_0x43584f?(await this[_0xc7732a(0x112)][_0xc7732a(0x139)](this[_0xc7732a(0x13d)]+_0xc7732a(0xf9))['send'](),await this[_0xc7732a(0x121)][_0xc7732a(0xee)](this[_0xc7732a(0xf7)]['dir']),await this[_0xc7732a(0x121)]['copyProjectTo'](this['gitUtils'][_0xc7732a(0x134)],!_0x29521a),await this[_0xc7732a(0x121)][_0xc7732a(0x149)]()):(await this[_0xc7732a(0x112)][_0xc7732a(0x139)](this[_0xc7732a(0x13d)]+_0xc7732a(0x12f))[_0xc7732a(0x14b)](),await this[_0xc7732a(0xf7)]['copyMdapiTo'](this[_0xc7732a(0x146)]['dir']));await this[_0xc7732a(0x112)][_0xc7732a(0x139)](this[_0xc7732a(0x13d)]+_0xc7732a(0x125))[_0xc7732a(0x14b)](),await this[_0xc7732a(0x146)][_0xc7732a(0xe2)](_0xe521ab,{'email':constants_1[_0xc7732a(0xf4)],'name':_0x261e53['name']},_0x1505c5[_0xc7732a(0xe8)]),await this[_0xc7732a(0x146)][_0xc7732a(0x149)](),await this[_0xc7732a(0xf7)]['removeDir']();const _0x34de86=this[_0xc7732a(0x10d)]+this[_0xc7732a(0x129)];await this[_0xc7732a(0x112)][_0xc7732a(0x139)](this['prefix']+_0xc7732a(0x12d)+(Date['now']()-this['startTime'])+_0xc7732a(0x151)+_0x34de86+'.')[_0xc7732a(0x14b)]();}catch(_0xc09a68){await this[_0xc7732a(0xe5)](),await this[_0xc7732a(0x112)][_0xc7732a(0x13c)](this[_0xc7732a(0x13d)]+'\x20'+_0xc09a68)[_0xc7732a(0x14b)]();throw _0xc09a68;}}async[a103_0x5ceced(0x137)](_0x5d2c85,_0x2db8c2){const _0x32cd1b=a103_0x5ceced;var _0x3f7c26,_0x40ab3;this[_0x32cd1b(0x112)]=typedi_1[_0x32cd1b(0xfe)][_0x32cd1b(0xe0)](providers_tokens_1[_0x32cd1b(0x111)][_0x32cd1b(0x143)]),this[_0x32cd1b(0x13d)]=(_0x2db8c2?_0x2db8c2+'\x20':'')+'['+commit_components_dto_1[_0x32cd1b(0x118)]['name']+']',await this['sfLogger'][_0x32cd1b(0x139)](this[_0x32cd1b(0x13d)]+_0x32cd1b(0xea));const _0x4e15ce=!!((_0x3f7c26=_0x5d2c85['components'])===null||_0x3f7c26===void 0x0?void 0x0:_0x3f7c26[_0x32cd1b(0x10e)])||!!((_0x40ab3=_0x5d2c85[_0x32cd1b(0x14f)])===null||_0x40ab3===void 0x0?void 0x0:_0x40ab3[_0x32cd1b(0x11a)]);if(!_0x4e15ce){await this['sfLogger']['log'](this[_0x32cd1b(0x13d)]+_0x32cd1b(0xf2))[_0x32cd1b(0x14b)]();return;}this[_0x32cd1b(0xec)]=_0x5d2c85,await this[_0x32cd1b(0x128)]();}};function a103_0xf734(_0x347ec6,_0x1fbd75){const _0x231a20=a103_0x1c6b();return a103_0xf734=function(_0x3dde69,_0x298c7b){_0x3dde69=_0x3dde69-0xda;let _0x1c6be4=_0x231a20[_0x3dde69];return _0x1c6be4;},a103_0xf734(_0x347ec6,_0x1fbd75);}CommitComponentsJob=__decorate([(0x0,typedi_1[a103_0x5ceced(0x14c)])({'transient':!![]})],CommitComponentsJob),exports[a103_0x5ceced(0x117)]=CommitComponentsJob;