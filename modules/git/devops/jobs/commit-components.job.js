const a123_0x103f75=a123_0x14f6;(function(_0x29fbac,_0x56ea7b){const _0x1921db=a123_0x14f6,_0x217a96=_0x29fbac();while(!![]){try{const _0x358d1c=parseInt(_0x1921db(0x1b1))/0x1+parseInt(_0x1921db(0x1f7))/0x2+parseInt(_0x1921db(0x1f0))/0x3+parseInt(_0x1921db(0x216))/0x4+parseInt(_0x1921db(0x1d7))/0x5+parseInt(_0x1921db(0x1ab))/0x6*(parseInt(_0x1921db(0x1b5))/0x7)+-parseInt(_0x1921db(0x1d5))/0x8*(parseInt(_0x1921db(0x1fe))/0x9);if(_0x358d1c===_0x56ea7b)break;else _0x217a96['push'](_0x217a96['shift']());}catch(_0xcc60b){_0x217a96['push'](_0x217a96['shift']());}}}(a123_0x42a8,0xba3bd));const a123_0x1336f1=(function(){let _0x4a0bb3=!![];return function(_0x24eac0,_0x2dfafd){const _0x2c46c6=_0x4a0bb3?function(){if(_0x2dfafd){const _0x1065fd=_0x2dfafd['apply'](_0x24eac0,arguments);return _0x2dfafd=null,_0x1065fd;}}:function(){};return _0x4a0bb3=![],_0x2c46c6;};}()),a123_0x5c3618=a123_0x1336f1(this,function(){const _0x5aae22=a123_0x14f6;return a123_0x5c3618[_0x5aae22(0x1d6)]()[_0x5aae22(0x1d3)]('(((.+)+)+)+$')[_0x5aae22(0x1d6)]()[_0x5aae22(0x218)](a123_0x5c3618)[_0x5aae22(0x1d3)](_0x5aae22(0x1e2));});a123_0x5c3618();function a123_0x42a8(){const _0x133f04=['CommitComponentsDto','sfdxUtils','\x20Checking\x20commit\x20components.','mdapiUtils','exec','copyMdapiTo','hasOwnProperty','\x20Checking\x20deleted\x20components.','\x20Checking\x20written\x20components.','reduce','copySFDXIgnoredComponents','deleted','3334040womQoo','catch','constructor','push','../utils/mdapi.utils','\x20Start\x20converting\x20to\x20SFDX.','function','removeDir','send','logger','getGitShellAuthorizationString','9726kNlChG','componentsToWrite','writeComponents','values','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','defineProperty','336545GNIsrb','../utils/sfdx.utils','__esModule','ms.\x20Committed\x20components\x20-\x20','168mREJxr','../../providers/types/git-provider','object','../../providers/api/bitbucket-api.service','../../../../constants','events','dir','create','getRemote','length','SFDX','GitUtils','clearDir','branch','groupComponentsByFileName','type','../../parsers/data/child-types','MDApiUtils','\x20Wrote\x20','FORCE_APP_DEFAULT_DIR','\x20Preparing\x20to\x20delete\x20components','Tokens','getProtocol','now','Service','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','../../internal/fs.internal','cleanUp','../../salesforce/utils/sfdx.utils','__decorate','search','\x20Copying\x20mdapi\x20to\x20git\x20folder.','3176AkpXzz','toString','3412315veSBLD','credentials','CommitComponentsJob','default','sfLogger','isConvertToSfdx','../dto/commit-components.dto','run','isEmptyDir','\x20Deleted\x20','fileName','(((.+)+)+)+$','writable','isSFDXProject','commitData','recordType','fileType','log','COMPONENTS_PER_TICK','prototype','GitProvider','includes','gitUtils','__createBinding','get','110730izTYem','decorate','error','removeComponents','prefix','componentsToDelete','\x20Start\x20cloning\x20repository.','1419024BPUwTl','DEFAULT_GIT_USER_EMAIL','__importDefault','commitAndPush','\x20Prepare\x20mdapi\x20files.','writed','sort','42507zqVQZg','configurable','replace','writeFlosumComponents','gitUrl','name','\x20Preparing\x20to\x20write\x20components','__setModuleDefault','\x20components','__importStar','startTime','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.'];a123_0x42a8=function(){return _0x133f04;};return a123_0x42a8();}'use strict';var __createBinding=this&&this[a123_0x103f75(0x1ee)]||(Object[a123_0x103f75(0x1bc)]?function(_0x7ef17f,_0x5df19c,_0x3f261c,_0x5d65d3){const _0x402fe6=a123_0x103f75;if(_0x5d65d3===undefined)_0x5d65d3=_0x3f261c;var _0x1c02b0=Object['getOwnPropertyDescriptor'](_0x5df19c,_0x3f261c);(!_0x1c02b0||(_0x402fe6(0x1ef)in _0x1c02b0?!_0x5df19c[_0x402fe6(0x1b3)]:_0x1c02b0[_0x402fe6(0x1e3)]||_0x1c02b0[_0x402fe6(0x1ff)]))&&(_0x1c02b0={'enumerable':!![],'get':function(){return _0x5df19c[_0x3f261c];}}),Object['defineProperty'](_0x7ef17f,_0x5d65d3,_0x1c02b0);}:function(_0x255e20,_0x2afc79,_0x5e2b84,_0x42e913){if(_0x42e913===undefined)_0x42e913=_0x5e2b84;_0x255e20[_0x42e913]=_0x2afc79[_0x5e2b84];}),__setModuleDefault=this&&this[a123_0x103f75(0x205)]||(Object[a123_0x103f75(0x1bc)]?function(_0x57496f,_0x420528){const _0x3f6a4a=a123_0x103f75;Object[_0x3f6a4a(0x1b0)](_0x57496f,_0x3f6a4a(0x1da),{'enumerable':!![],'value':_0x420528});}:function(_0x1b47dc,_0x194e57){const _0x1ead20=a123_0x103f75;_0x1b47dc[_0x1ead20(0x1da)]=_0x194e57;}),__decorate=this&&this[a123_0x103f75(0x1d2)]||function(_0x57395b,_0x252fb,_0x2bc01a,_0x206bdb){const _0x2ce3c1=a123_0x103f75;var _0x186c8c=arguments[_0x2ce3c1(0x1be)],_0x2b33e0=_0x186c8c<0x3?_0x252fb:_0x206bdb===null?_0x206bdb=Object['getOwnPropertyDescriptor'](_0x252fb,_0x2bc01a):_0x206bdb,_0x1070cf;if(typeof Reflect===_0x2ce3c1(0x1b7)&&typeof Reflect['decorate']===_0x2ce3c1(0x1a6))_0x2b33e0=Reflect[_0x2ce3c1(0x1f1)](_0x57395b,_0x252fb,_0x2bc01a,_0x206bdb);else{for(var _0x2d9ca9=_0x57395b[_0x2ce3c1(0x1be)]-0x1;_0x2d9ca9>=0x0;_0x2d9ca9--)if(_0x1070cf=_0x57395b[_0x2d9ca9])_0x2b33e0=(_0x186c8c<0x3?_0x1070cf(_0x2b33e0):_0x186c8c>0x3?_0x1070cf(_0x252fb,_0x2bc01a,_0x2b33e0):_0x1070cf(_0x252fb,_0x2bc01a))||_0x2b33e0;}return _0x186c8c>0x3&&_0x2b33e0&&Object[_0x2ce3c1(0x1b0)](_0x252fb,_0x2bc01a,_0x2b33e0),_0x2b33e0;},__importStar=this&&this[a123_0x103f75(0x207)]||function(_0x208624){const _0x503ac2=a123_0x103f75;if(_0x208624&&_0x208624[_0x503ac2(0x1b3)])return _0x208624;var _0x581275={};if(_0x208624!=null){for(var _0x19934d in _0x208624)if(_0x19934d!=='default'&&Object[_0x503ac2(0x1ea)][_0x503ac2(0x210)]['call'](_0x208624,_0x19934d))__createBinding(_0x581275,_0x208624,_0x19934d);}return __setModuleDefault(_0x581275,_0x208624),_0x581275;},__importDefault=this&&this[a123_0x103f75(0x1f9)]||function(_0x15319a){const _0x44c623=a123_0x103f75;return _0x15319a&&_0x15319a[_0x44c623(0x1b3)]?_0x15319a:{'default':_0x15319a};};function a123_0x14f6(_0x4fa834,_0x2d8375){const _0x2f537c=a123_0x42a8();return a123_0x14f6=function(_0x5c3618,_0x1336f1){_0x5c3618=_0x5c3618-0x1a5;let _0x42a8bf=_0x2f537c[_0x5c3618];return _0x42a8bf;},a123_0x14f6(_0x4fa834,_0x2d8375);}Object[a123_0x103f75(0x1b0)](exports,a123_0x103f75(0x1b3),{'value':!![]}),exports[a123_0x103f75(0x1d9)]=void 0x0;const commit_components_dto_1=require(a123_0x103f75(0x1dd)),events_1=__importDefault(require(a123_0x103f75(0x1ba))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a123_0x103f75(0x21a)),sfdx_utils_1=require(a123_0x103f75(0x1b2)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a123_0x103f75(0x1c5))),utils_1=require('../../../shared/utils'),constants_1=require(a123_0x103f75(0x1b9)),git_provider_1=require(a123_0x103f75(0x1b6)),bitbucket_api_service_1=require(a123_0x103f75(0x1b8)),sfdx_utils_2=require(a123_0x103f75(0x1d1)),fs_internal_1=require(a123_0x103f75(0x1cf)),path_1=require('path'),providers_tokens_1=require('../../providers/providers.tokens'),constants_2=require(a123_0x103f75(0x1b9));let CommitComponentsJob=class CommitComponentsJob extends events_1[a123_0x103f75(0x1da)]{constructor(){const _0x43c2f3=a123_0x103f75;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this[_0x43c2f3(0x1ac)]=0x0,this[_0x43c2f3(0x1f5)]=0x0,this[_0x43c2f3(0x208)]=Date['now']();}async[a123_0x103f75(0x1bd)](){const _0x1e78e5=a123_0x103f75,{repo:_0x696e30}=this[_0x1e78e5(0x1e5)],_0x850240=typedi_1[_0x1e78e5(0x1da)][_0x1e78e5(0x1ef)](providers_tokens_1['Tokens'][_0x1e78e5(0x1d8)]);if(this['commitData']['provider']===git_provider_1[_0x1e78e5(0x1eb)]['Bitbucket']){const _0x29be29=typedi_1[_0x1e78e5(0x1da)]['get'](bitbucket_api_service_1['BitbucketApiService']);await _0x29be29['isLoggedIn']();}return _0x696e30[_0x1e78e5(0x202)][_0x1e78e5(0x200)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x1e78e5(0x1cb)])(_0x696e30[_0x1e78e5(0x202)])+'://'+_0x850240[_0x1e78e5(0x1aa)]()+'@');}[a123_0x103f75(0x1c3)](_0x1fcddb){const _0x43e960=a123_0x103f75;var _0x1c3212;_0x1fcddb[_0x43e960(0x1fd)](_0x1f6e2a=>child_types_1[_0x43e960(0x1da)][_0x43e960(0x1ec)](_0x1f6e2a[_0x43e960(0x1e7)])?0x1:-0x1);const _0x454c3f={};for(const _0x1f5113 of _0x1fcddb){_0x454c3f[_0x1c3212=_0x1f5113[_0x43e960(0x1e1)]]||(_0x454c3f[_0x1c3212]=[]),_0x454c3f[_0x1f5113[_0x43e960(0x1e1)]][_0x43e960(0x219)](_0x1f5113);}return Object[_0x43e960(0x1ae)](_0x454c3f)[_0x43e960(0x213)]((_0x1241dc,_0x5032cd)=>[..._0x1241dc,..._0x5032cd],[]);}async['writeComponents'](_0x3b4d0e){const _0x1475b6=a123_0x103f75;_0x3b4d0e=this[_0x1475b6(0x1c3)](_0x3b4d0e);let _0x47c719=0x0;while(_0x3b4d0e[_0x1475b6(0x1be)]){const _0x46c8d6=_0x3b4d0e['splice'](0x0,this[_0x1475b6(0x1e9)]);await this[_0x1475b6(0x20d)][_0x1475b6(0x201)](_0x46c8d6,{'skipChildErrors':this['commitData'][_0x1475b6(0x1c2)]['name']==='master','recordType':this[_0x1475b6(0x1e5)][_0x1475b6(0x1e6)]}),_0x47c719+=_0x46c8d6[_0x1475b6(0x1be)],this['sfLogger']['log'](this[_0x1475b6(0x1f4)]+_0x1475b6(0x1c7)+_0x47c719+'/'+this[_0x1475b6(0x1ac)]+_0x1475b6(0x206)),await this['sfLogger'][_0x1475b6(0x1a8)]();}}async[a123_0x103f75(0x1f3)](_0x3876e5){const _0x3d2686=a123_0x103f75;_0x3876e5[_0x3d2686(0x1fd)](_0x5988bd=>child_types_1[_0x3d2686(0x1da)]['includes'](_0x5988bd[_0x3d2686(0x1c4)])?-0x1:0x1);let _0xfd8eb0=0x0;while(_0x3876e5[_0x3d2686(0x1be)]){const _0x2bb613=_0x3876e5['splice'](0x0,this[_0x3d2686(0x1e9)]);await this[_0x3d2686(0x20d)][_0x3d2686(0x1f3)](_0x2bb613,this['commitData'][_0x3d2686(0x1e6)]),_0xfd8eb0+=_0x2bb613['length'],this[_0x3d2686(0x1db)][_0x3d2686(0x1e8)](this[_0x3d2686(0x1f4)]+_0x3d2686(0x1e0)+_0xfd8eb0+'/'+this[_0x3d2686(0x1f5)]+_0x3d2686(0x206)),await this['sfLogger'][_0x3d2686(0x1a8)]();}}async[a123_0x103f75(0x1d0)](){const _0x538274=a123_0x103f75;this[_0x538274(0x1ed)]&&await this['gitUtils']['removeDir']()['catch'](()=>void 0x0),this[_0x538274(0x20d)]&&await this['mdapiUtils'][_0x538274(0x1a7)]()[_0x538274(0x217)](()=>void 0x0),this[_0x538274(0x20b)]&&await this[_0x538274(0x20b)][_0x538274(0x1a7)]()['catch'](()=>void 0x0);}async[a123_0x103f75(0x20e)](){const _0x38d7ef=a123_0x103f75,{repo:_0x212041,branch:_0x482b42,components:_0x595061,convertToSFDX:_0x55b909,message:_0x50720a,user:_0x4a1ac0}=this[_0x38d7ef(0x1e5)];this['mdapiUtils']=new mdapi_utils_1[(_0x38d7ef(0x1c6))](),this[_0x38d7ef(0x1ed)]=new git_utils_1[(_0x38d7ef(0x1c0))](await this[_0x38d7ef(0x1bd)]()),this[_0x38d7ef(0x20b)]=new sfdx_utils_1['SFDXUtils']();let _0x4c58fc=_0x55b909&&this['sfdxUtils'][_0x38d7ef(0x1dc)](this['commitData'][_0x38d7ef(0x1e6)]);try{await this[_0x38d7ef(0x1db)][_0x38d7ef(0x1e8)](this[_0x38d7ef(0x1f4)]+_0x38d7ef(0x1f6))['send'](),await this[_0x38d7ef(0x1ed)]['clone'](_0x482b42[_0x38d7ef(0x203)],_0x212041[_0x38d7ef(0x203)]);!this[_0x38d7ef(0x1e5)]['force']?(this[_0x38d7ef(0x1db)][_0x38d7ef(0x1e8)](this['prefix']+_0x38d7ef(0x1fb)),await this['mdapiUtils']['prepareMdapi'](this[_0x38d7ef(0x1ed)][_0x38d7ef(0x1bb)])):this[_0x38d7ef(0x1db)]['log'](this[_0x38d7ef(0x1f4)]+_0x38d7ef(0x209));await this[_0x38d7ef(0x1db)][_0x38d7ef(0x1e8)](this['prefix']+_0x38d7ef(0x212))[_0x38d7ef(0x1a8)]();_0x595061['writed']&&(this['sfLogger'][_0x38d7ef(0x1e8)](this[_0x38d7ef(0x1f4)]+_0x38d7ef(0x204)),this[_0x38d7ef(0x1ac)]=_0x595061['writed']['length'],await this[_0x38d7ef(0x1ad)](_0x595061[_0x38d7ef(0x1fc)]),await this[_0x38d7ef(0x1db)][_0x38d7ef(0x1a8)]());await this[_0x38d7ef(0x1db)]['log'](this[_0x38d7ef(0x1f4)]+_0x38d7ef(0x211))[_0x38d7ef(0x1a8)]();_0x595061[_0x38d7ef(0x215)]&&(this[_0x38d7ef(0x1db)][_0x38d7ef(0x1e8)](this[_0x38d7ef(0x1f4)]+_0x38d7ef(0x1c9)),this[_0x38d7ef(0x1f5)]=_0x595061[_0x38d7ef(0x215)][_0x38d7ef(0x1be)],await this[_0x38d7ef(0x1f3)](_0x595061[_0x38d7ef(0x215)]),await this['sfLogger'][_0x38d7ef(0x1a8)]());await this[_0x38d7ef(0x1db)]['send']();const _0x36f0f4=await fs_internal_1['FS'][_0x38d7ef(0x1df)](this['gitUtils'][_0x38d7ef(0x1bb)]);await sfdx_utils_2[_0x38d7ef(0x1bf)][_0x38d7ef(0x1e4)](this[_0x38d7ef(0x1ed)][_0x38d7ef(0x1bb)])?(_0x4c58fc=!![],await fs_internal_1['FS'][_0x38d7ef(0x1a7)]((0x0,path_1['join'])(this['gitUtils'][_0x38d7ef(0x1bb)],'force-app'))):(_0x4c58fc&&(!_0x36f0f4&&(_0x4c58fc=![])),await this[_0x38d7ef(0x1ed)][_0x38d7ef(0x1c1)]());_0x4c58fc?(await this['sfLogger'][_0x38d7ef(0x1e8)](this['prefix']+_0x38d7ef(0x1a5))[_0x38d7ef(0x1a8)](),await this['sfdxUtils']['createProjectFrom'](this['mdapiUtils']['dir']),await this[_0x38d7ef(0x20b)]['copyProjectTo'](this[_0x38d7ef(0x1ed)][_0x38d7ef(0x1bb)],!_0x36f0f4),await this[_0x38d7ef(0x20b)][_0x38d7ef(0x214)](this['mdapiUtils'][_0x38d7ef(0x1bb)],(0x0,path_1['join'])(this['gitUtils'][_0x38d7ef(0x1bb)],constants_2[_0x38d7ef(0x1c8)])),await this['sfdxUtils'][_0x38d7ef(0x1a7)]()):(await this[_0x38d7ef(0x1db)][_0x38d7ef(0x1e8)](this[_0x38d7ef(0x1f4)]+_0x38d7ef(0x1d4))['send'](),await this[_0x38d7ef(0x20d)][_0x38d7ef(0x20f)](this[_0x38d7ef(0x1ed)][_0x38d7ef(0x1bb)]));await this[_0x38d7ef(0x1db)][_0x38d7ef(0x1e8)](this[_0x38d7ef(0x1f4)]+_0x38d7ef(0x1ce))['send'](),await this['gitUtils'][_0x38d7ef(0x1fa)](_0x50720a,{'email':constants_1[_0x38d7ef(0x1f8)],'name':_0x4a1ac0[_0x38d7ef(0x203)]},_0x482b42[_0x38d7ef(0x203)]),await this['gitUtils'][_0x38d7ef(0x1a7)](),await this[_0x38d7ef(0x20d)][_0x38d7ef(0x1a7)]();const _0x5ce7b7=this[_0x38d7ef(0x1ac)]+this[_0x38d7ef(0x1f5)];await this[_0x38d7ef(0x1db)][_0x38d7ef(0x1e8)](this[_0x38d7ef(0x1f4)]+_0x38d7ef(0x1af)+(Date[_0x38d7ef(0x1cc)]()-this[_0x38d7ef(0x208)])+_0x38d7ef(0x1b4)+_0x5ce7b7+'.')['send']();}catch(_0x1c91da){await this[_0x38d7ef(0x1d0)](),await this['sfLogger'][_0x38d7ef(0x1f2)](this[_0x38d7ef(0x1f4)]+'\x20'+_0x1c91da)[_0x38d7ef(0x1a8)]();throw _0x1c91da;}}async[a123_0x103f75(0x1de)](_0x8520ab,_0x102b99){const _0x2b32e9=a123_0x103f75;var _0x4a885d,_0x4f42b0;this[_0x2b32e9(0x1db)]=typedi_1[_0x2b32e9(0x1da)][_0x2b32e9(0x1ef)](providers_tokens_1[_0x2b32e9(0x1ca)][_0x2b32e9(0x1a9)]),this[_0x2b32e9(0x1f4)]=(_0x102b99?_0x102b99+'\x20':'')+'['+commit_components_dto_1[_0x2b32e9(0x20a)][_0x2b32e9(0x203)]+']',await this[_0x2b32e9(0x1db)][_0x2b32e9(0x1e8)](this[_0x2b32e9(0x1f4)]+_0x2b32e9(0x20c));const _0x47028b=!!((_0x4a885d=_0x8520ab['components'])===null||_0x4a885d===void 0x0?void 0x0:_0x4a885d[_0x2b32e9(0x1fc)])||!!((_0x4f42b0=_0x8520ab['components'])===null||_0x4f42b0===void 0x0?void 0x0:_0x4f42b0['deleted']);if(!_0x47028b){await this[_0x2b32e9(0x1db)][_0x2b32e9(0x1e8)](this[_0x2b32e9(0x1f4)]+'\x20Nothing\x20to\x20commit.\x20Skip.')[_0x2b32e9(0x1a8)]();return;}this[_0x2b32e9(0x1e5)]=_0x8520ab,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a123_0x103f75(0x1cd)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;