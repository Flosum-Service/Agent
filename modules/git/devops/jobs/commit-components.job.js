const a104_0x5ca73e=a104_0x8440;(function(_0x39df42,_0x508b0f){const _0x13cbfe=a104_0x8440,_0x32a405=_0x39df42();while(!![]){try{const _0x11295f=parseInt(_0x13cbfe(0x202))/0x1+-parseInt(_0x13cbfe(0x247))/0x2*(-parseInt(_0x13cbfe(0x21e))/0x3)+parseInt(_0x13cbfe(0x249))/0x4*(parseInt(_0x13cbfe(0x1fa))/0x5)+parseInt(_0x13cbfe(0x250))/0x6+parseInt(_0x13cbfe(0x1ef))/0x7+-parseInt(_0x13cbfe(0x23e))/0x8*(-parseInt(_0x13cbfe(0x228))/0x9)+parseInt(_0x13cbfe(0x259))/0xa*(-parseInt(_0x13cbfe(0x248))/0xb);if(_0x11295f===_0x508b0f)break;else _0x32a405['push'](_0x32a405['shift']());}catch(_0x8895e3){_0x32a405['push'](_0x32a405['shift']());}}}(a104_0x2bcb,0xcd792));const a104_0x160031=(function(){let _0x10f72c=!![];return function(_0xbb746,_0x1f387d){const _0x455d84=_0x10f72c?function(){const _0x2a4b46=a104_0x8440;if(_0x1f387d){const _0x321cb0=_0x1f387d[_0x2a4b46(0x241)](_0xbb746,arguments);return _0x1f387d=null,_0x321cb0;}}:function(){};return _0x10f72c=![],_0x455d84;};}()),a104_0x414a74=a104_0x160031(this,function(){const _0x342824=a104_0x8440;return a104_0x414a74['toString']()[_0x342824(0x201)]('(((.+)+)+)+$')[_0x342824(0x224)]()[_0x342824(0x252)](a104_0x414a74)['search'](_0x342824(0x225));});a104_0x414a74();'use strict';var __createBinding=this&&this[a104_0x5ca73e(0x208)]||(Object[a104_0x5ca73e(0x1e6)]?function(_0x487af5,_0x94e192,_0xe2ead0,_0x53046e){const _0x456484=a104_0x5ca73e;if(_0x53046e===undefined)_0x53046e=_0xe2ead0;var _0x569036=Object[_0x456484(0x24c)](_0x94e192,_0xe2ead0);(!_0x569036||(_0x456484(0x22d)in _0x569036?!_0x94e192[_0x456484(0x236)]:_0x569036['writable']||_0x569036['configurable']))&&(_0x569036={'enumerable':!![],'get':function(){return _0x94e192[_0xe2ead0];}}),Object[_0x456484(0x1ff)](_0x487af5,_0x53046e,_0x569036);}:function(_0x3b59e0,_0x6412b0,_0x35575c,_0x5209cd){if(_0x5209cd===undefined)_0x5209cd=_0x35575c;_0x3b59e0[_0x5209cd]=_0x6412b0[_0x35575c];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x3b2ee8,_0x144ffb){const _0x3c2182=a104_0x5ca73e;Object[_0x3c2182(0x1ff)](_0x3b2ee8,'default',{'enumerable':!![],'value':_0x144ffb});}:function(_0x39abb1,_0x132a15){_0x39abb1['default']=_0x132a15;}),__decorate=this&&this[a104_0x5ca73e(0x20b)]||function(_0x4fb612,_0x3741a1,_0x21a64f,_0x2e3d83){const _0x34cb5a=a104_0x5ca73e;var _0x5ba632=arguments[_0x34cb5a(0x227)],_0x426b7a=_0x5ba632<0x3?_0x3741a1:_0x2e3d83===null?_0x2e3d83=Object[_0x34cb5a(0x24c)](_0x3741a1,_0x21a64f):_0x2e3d83,_0x6e6382;if(typeof Reflect===_0x34cb5a(0x235)&&typeof Reflect['decorate']===_0x34cb5a(0x23c))_0x426b7a=Reflect[_0x34cb5a(0x1e4)](_0x4fb612,_0x3741a1,_0x21a64f,_0x2e3d83);else{for(var _0x40425f=_0x4fb612[_0x34cb5a(0x227)]-0x1;_0x40425f>=0x0;_0x40425f--)if(_0x6e6382=_0x4fb612[_0x40425f])_0x426b7a=(_0x5ba632<0x3?_0x6e6382(_0x426b7a):_0x5ba632>0x3?_0x6e6382(_0x3741a1,_0x21a64f,_0x426b7a):_0x6e6382(_0x3741a1,_0x21a64f))||_0x426b7a;}return _0x5ba632>0x3&&_0x426b7a&&Object['defineProperty'](_0x3741a1,_0x21a64f,_0x426b7a),_0x426b7a;},__importStar=this&&this['__importStar']||function(_0x289fe7){const _0x3ac57f=a104_0x5ca73e;if(_0x289fe7&&_0x289fe7[_0x3ac57f(0x236)])return _0x289fe7;var _0x3b749a={};if(_0x289fe7!=null){for(var _0x1095c4 in _0x289fe7)if(_0x1095c4!=='default'&&Object[_0x3ac57f(0x232)][_0x3ac57f(0x233)]['call'](_0x289fe7,_0x1095c4))__createBinding(_0x3b749a,_0x289fe7,_0x1095c4);}return __setModuleDefault(_0x3b749a,_0x289fe7),_0x3b749a;},__importDefault=this&&this[a104_0x5ca73e(0x20d)]||function(_0xfb96d2){const _0x14867c=a104_0x5ca73e;return _0xfb96d2&&_0xfb96d2[_0x14867c(0x236)]?_0xfb96d2:{'default':_0xfb96d2};};function a104_0x2bcb(){const _0xcf84a4=['now','Service','error','includes','copyMdapiTo','toString','(((.+)+)+)+$','Tokens','length','513UkLQDG','../dto/commit-components.dto','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','\x20Checking\x20commit\x20components.','copyProjectTo','get','dir','writeFlosumComponents','removeDir','logger','prototype','hasOwnProperty','SFDXUtils','object','__esModule','branch','getProtocol','CommitComponentsDto','writeComponents','SFDX','function','default','108752woEUWx','mdapiUtils','\x20Wrote\x20','apply','../../../../constants','../utils/mdapi.utils','getGitShellAuthorizationString','cleanUp','catch','4cgQoMn','48174313fezvre','3438388FoHfmD','commitData','../../../shared/utils','getOwnPropertyDescriptor','replace','master','log','1586772EmYaCZ','reduce','constructor','getRemote','\x20Nothing\x20to\x20commit.\x20Skip.','\x20Start\x20converting\x20to\x20SFDX.','componentsToDelete','provider','../utils/git.utils','10RSGtVW','CommitComponentsJob','COMPONENTS_PER_TICK','\x20Checking\x20written\x20components.','clone','\x20Preparing\x20to\x20write\x20components','decorate','gitUrl','create','../../internal/fs.internal','sfdxUtils','://','../../providers/types/git-provider','join','writed','splice','exec','6060166dGwklh','clearDir','\x20Checking\x20deleted\x20components.','run','name','typedi','\x20components','\x20Preparing\x20to\x20delete\x20components','MDApiUtils','push','GitUtils','5ygsOQb','credentials','removeComponents','prepareMdapi','sort','defineProperty','ms.\x20Committed\x20components\x20-\x20','search','1246368seqScx','force-app','groupComponentsByFileName','fileName','force','../../salesforce/utils/sfdx.utils','__createBinding','componentsToWrite','../utils/sfdx.utils','__decorate','../../parsers/data/child-types','__importDefault','\x20Copying\x20mdapi\x20to\x20git\x20folder.','sfLogger','../../providers/providers.tokens','startTime','fileType','send','deleted','prefix','isSFDXProject','DEFAULT_GIT_USER_EMAIL','gitUtils','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','Bitbucket','\x20Start\x20cloning\x20repository.','isLoggedIn','components','1815117Mycjbh'];a104_0x2bcb=function(){return _0xcf84a4;};return a104_0x2bcb();}Object[a104_0x5ca73e(0x1ff)](exports,a104_0x5ca73e(0x236),{'value':!![]}),exports[a104_0x5ca73e(0x25a)]=void 0x0;function a104_0x8440(_0x4b4ce9,_0x33cc02){const _0x57d262=a104_0x2bcb();return a104_0x8440=function(_0x414a74,_0x160031){_0x414a74=_0x414a74-0x1e0;let _0x2bcb1c=_0x57d262[_0x414a74];return _0x2bcb1c;},a104_0x8440(_0x4b4ce9,_0x33cc02);}const commit_components_dto_1=require(a104_0x5ca73e(0x229)),events_1=__importDefault(require('events')),git_utils_1=require(a104_0x5ca73e(0x258)),mdapi_utils_1=require(a104_0x5ca73e(0x243)),sfdx_utils_1=require(a104_0x5ca73e(0x20a)),typedi_1=__importStar(require(a104_0x5ca73e(0x1f4))),child_types_1=__importDefault(require(a104_0x5ca73e(0x20c))),utils_1=require(a104_0x5ca73e(0x24b)),constants_1=require(a104_0x5ca73e(0x242)),git_provider_1=require(a104_0x5ca73e(0x1ea)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),sfdx_utils_2=require(a104_0x5ca73e(0x207)),fs_internal_1=require(a104_0x5ca73e(0x1e7)),path_1=require('path'),providers_tokens_1=require(a104_0x5ca73e(0x210));let CommitComponentsJob=class CommitComponentsJob extends events_1[a104_0x5ca73e(0x23d)]{constructor(){const _0x51af86=a104_0x5ca73e;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this[_0x51af86(0x209)]=0x0,this[_0x51af86(0x256)]=0x0,this[_0x51af86(0x211)]=Date[_0x51af86(0x21f)]();}async[a104_0x5ca73e(0x253)](){const _0x160c50=a104_0x5ca73e,{repo:_0x1ecfe0}=this[_0x160c50(0x24a)],_0x14e374=typedi_1[_0x160c50(0x23d)][_0x160c50(0x22d)](providers_tokens_1[_0x160c50(0x226)][_0x160c50(0x1fb)]);if(this['commitData'][_0x160c50(0x257)]===git_provider_1['GitProvider'][_0x160c50(0x21a)]){const _0x34e1ed=typedi_1[_0x160c50(0x23d)][_0x160c50(0x22d)](bitbucket_api_service_1['BitbucketApiService']);await _0x34e1ed[_0x160c50(0x21c)]();}return _0x1ecfe0[_0x160c50(0x1e5)][_0x160c50(0x24d)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x160c50(0x238)])(_0x1ecfe0['gitUrl'])+_0x160c50(0x1e9)+_0x14e374[_0x160c50(0x244)]()+'@');}[a104_0x5ca73e(0x204)](_0x6d30c6){const _0xc70cee=a104_0x5ca73e;var _0x158785;_0x6d30c6[_0xc70cee(0x1fe)](_0x506684=>child_types_1[_0xc70cee(0x23d)]['includes'](_0x506684[_0xc70cee(0x212)])?0x1:-0x1);const _0x3840c2={};for(const _0x2d9641 of _0x6d30c6){_0x3840c2[_0x158785=_0x2d9641[_0xc70cee(0x205)]]||(_0x3840c2[_0x158785]=[]),_0x3840c2[_0x2d9641[_0xc70cee(0x205)]][_0xc70cee(0x1f8)](_0x2d9641);}return Object['values'](_0x3840c2)[_0xc70cee(0x251)]((_0xde91ee,_0x4a0721)=>[..._0xde91ee,..._0x4a0721],[]);}async['writeComponents'](_0x46ec0d){const _0xca4acf=a104_0x5ca73e;_0x46ec0d=this[_0xca4acf(0x204)](_0x46ec0d);let _0x32f096=0x0;while(_0x46ec0d['length']){const _0x25a9a2=_0x46ec0d[_0xca4acf(0x1ed)](0x0,this[_0xca4acf(0x1e0)]);await this[_0xca4acf(0x23f)][_0xca4acf(0x22f)](_0x25a9a2,{'skipChildErrors':this[_0xca4acf(0x24a)][_0xca4acf(0x237)][_0xca4acf(0x1f3)]===_0xca4acf(0x24e)}),_0x32f096+=_0x25a9a2[_0xca4acf(0x227)],this[_0xca4acf(0x20f)]['log'](this[_0xca4acf(0x215)]+_0xca4acf(0x240)+_0x32f096+'/'+this[_0xca4acf(0x209)]+_0xca4acf(0x1f5)),await this[_0xca4acf(0x20f)][_0xca4acf(0x213)]();}}async[a104_0x5ca73e(0x1fc)](_0xc8efc5){const _0x1e51c3=a104_0x5ca73e;_0xc8efc5['sort'](_0x2a34cf=>child_types_1[_0x1e51c3(0x23d)][_0x1e51c3(0x222)](_0x2a34cf['type'])?-0x1:0x1);let _0x5b8727=0x0;while(_0xc8efc5['length']){const _0x4928a8=_0xc8efc5['splice'](0x0,this[_0x1e51c3(0x1e0)]);await this[_0x1e51c3(0x23f)][_0x1e51c3(0x1fc)](_0x4928a8),_0x5b8727+=_0x4928a8[_0x1e51c3(0x227)],this[_0x1e51c3(0x20f)][_0x1e51c3(0x24f)](this[_0x1e51c3(0x215)]+'\x20Deleted\x20'+_0x5b8727+'/'+this['componentsToDelete']+_0x1e51c3(0x1f5)),await this[_0x1e51c3(0x20f)][_0x1e51c3(0x213)]();}}async[a104_0x5ca73e(0x245)](){const _0x250cdc=a104_0x5ca73e;this[_0x250cdc(0x218)]&&await this['gitUtils'][_0x250cdc(0x230)]()['catch'](()=>void 0x0),this[_0x250cdc(0x23f)]&&await this[_0x250cdc(0x23f)][_0x250cdc(0x230)]()['catch'](()=>void 0x0),this[_0x250cdc(0x1e8)]&&await this['sfdxUtils'][_0x250cdc(0x230)]()[_0x250cdc(0x246)](()=>void 0x0);}async[a104_0x5ca73e(0x1ee)](){const _0x302c3f=a104_0x5ca73e,{repo:_0x1fae0,branch:_0x4b6288,components:_0x1e1f32,convertToSFDX:_0x46e116,message:_0x470081,user:_0x1ff354}=this[_0x302c3f(0x24a)];this[_0x302c3f(0x23f)]=new mdapi_utils_1[(_0x302c3f(0x1f7))](),this[_0x302c3f(0x218)]=new git_utils_1[(_0x302c3f(0x1f9))](await this[_0x302c3f(0x253)]()),this[_0x302c3f(0x1e8)]=new sfdx_utils_1[(_0x302c3f(0x234))]();let _0x4ac475=_0x46e116;try{await this[_0x302c3f(0x20f)][_0x302c3f(0x24f)](this[_0x302c3f(0x215)]+_0x302c3f(0x21b))[_0x302c3f(0x213)](),await this[_0x302c3f(0x218)][_0x302c3f(0x1e2)](_0x4b6288['name'],_0x1fae0[_0x302c3f(0x1f3)]);!this[_0x302c3f(0x24a)][_0x302c3f(0x206)]?(this['sfLogger'][_0x302c3f(0x24f)](this[_0x302c3f(0x215)]+'\x20Prepare\x20mdapi\x20files.'),await this[_0x302c3f(0x23f)][_0x302c3f(0x1fd)](this[_0x302c3f(0x218)][_0x302c3f(0x22e)])):this[_0x302c3f(0x20f)][_0x302c3f(0x24f)](this[_0x302c3f(0x215)]+_0x302c3f(0x219));await this[_0x302c3f(0x20f)]['log'](this[_0x302c3f(0x215)]+_0x302c3f(0x1e1))['send']();_0x1e1f32[_0x302c3f(0x1ec)]&&(this[_0x302c3f(0x20f)][_0x302c3f(0x24f)](this[_0x302c3f(0x215)]+_0x302c3f(0x1e3)),this['componentsToWrite']=_0x1e1f32[_0x302c3f(0x1ec)][_0x302c3f(0x227)],await this[_0x302c3f(0x23a)](_0x1e1f32[_0x302c3f(0x1ec)]),await this['sfLogger'][_0x302c3f(0x213)]());await this[_0x302c3f(0x20f)][_0x302c3f(0x24f)](this['prefix']+_0x302c3f(0x1f1))[_0x302c3f(0x213)]();_0x1e1f32[_0x302c3f(0x214)]&&(this[_0x302c3f(0x20f)]['log'](this[_0x302c3f(0x215)]+_0x302c3f(0x1f6)),this[_0x302c3f(0x256)]=_0x1e1f32[_0x302c3f(0x214)][_0x302c3f(0x227)],await this[_0x302c3f(0x1fc)](_0x1e1f32['deleted']),await this[_0x302c3f(0x20f)][_0x302c3f(0x213)]());await this[_0x302c3f(0x20f)][_0x302c3f(0x213)]();const _0x4480fe=await fs_internal_1['FS']['isEmptyDir'](this[_0x302c3f(0x218)][_0x302c3f(0x22e)]);await sfdx_utils_2[_0x302c3f(0x23b)][_0x302c3f(0x216)](this['gitUtils'][_0x302c3f(0x22e)])?(_0x4ac475=!![],await fs_internal_1['FS'][_0x302c3f(0x230)]((0x0,path_1[_0x302c3f(0x1eb)])(this[_0x302c3f(0x218)][_0x302c3f(0x22e)],_0x302c3f(0x203)))):(_0x4ac475&&(!_0x4480fe&&(_0x4ac475=![])),await this[_0x302c3f(0x218)][_0x302c3f(0x1f0)]());_0x4ac475?(await this['sfLogger']['log'](this[_0x302c3f(0x215)]+_0x302c3f(0x255))[_0x302c3f(0x213)](),await this[_0x302c3f(0x1e8)]['createProjectFrom'](this[_0x302c3f(0x23f)][_0x302c3f(0x22e)]),await this['sfdxUtils'][_0x302c3f(0x22c)](this[_0x302c3f(0x218)]['dir'],!_0x4480fe),await this[_0x302c3f(0x1e8)][_0x302c3f(0x230)]()):(await this[_0x302c3f(0x20f)]['log'](this[_0x302c3f(0x215)]+_0x302c3f(0x20e))['send'](),await this[_0x302c3f(0x23f)][_0x302c3f(0x223)](this[_0x302c3f(0x218)]['dir']));await this[_0x302c3f(0x20f)][_0x302c3f(0x24f)](this[_0x302c3f(0x215)]+_0x302c3f(0x22a))[_0x302c3f(0x213)](),await this[_0x302c3f(0x218)]['commitAndPush'](_0x470081,{'email':constants_1[_0x302c3f(0x217)],'name':_0x1ff354[_0x302c3f(0x1f3)]},_0x4b6288[_0x302c3f(0x1f3)]),await this[_0x302c3f(0x218)][_0x302c3f(0x230)](),await this[_0x302c3f(0x23f)][_0x302c3f(0x230)]();const _0x10ee63=this[_0x302c3f(0x209)]+this['componentsToDelete'];await this[_0x302c3f(0x20f)][_0x302c3f(0x24f)](this[_0x302c3f(0x215)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x302c3f(0x21f)]()-this[_0x302c3f(0x211)])+_0x302c3f(0x200)+_0x10ee63+'.')[_0x302c3f(0x213)]();}catch(_0x4f74c8){await this['cleanUp'](),await this[_0x302c3f(0x20f)][_0x302c3f(0x221)](this[_0x302c3f(0x215)]+'\x20'+_0x4f74c8)[_0x302c3f(0x213)]();throw _0x4f74c8;}}async[a104_0x5ca73e(0x1f2)](_0x413fc7,_0x431459){const _0x25f2d5=a104_0x5ca73e;var _0x501458,_0x5f161d;this[_0x25f2d5(0x20f)]=typedi_1[_0x25f2d5(0x23d)][_0x25f2d5(0x22d)](providers_tokens_1[_0x25f2d5(0x226)][_0x25f2d5(0x231)]),this[_0x25f2d5(0x215)]=(_0x431459?_0x431459+'\x20':'')+'['+commit_components_dto_1[_0x25f2d5(0x239)][_0x25f2d5(0x1f3)]+']',await this[_0x25f2d5(0x20f)]['log'](this['prefix']+_0x25f2d5(0x22b));const _0x49e633=!!((_0x501458=_0x413fc7[_0x25f2d5(0x21d)])===null||_0x501458===void 0x0?void 0x0:_0x501458[_0x25f2d5(0x1ec)])||!!((_0x5f161d=_0x413fc7[_0x25f2d5(0x21d)])===null||_0x5f161d===void 0x0?void 0x0:_0x5f161d[_0x25f2d5(0x214)]);if(!_0x49e633){await this['sfLogger'][_0x25f2d5(0x24f)](this[_0x25f2d5(0x215)]+_0x25f2d5(0x254))[_0x25f2d5(0x213)]();return;}this[_0x25f2d5(0x24a)]=_0x413fc7,await this[_0x25f2d5(0x1ee)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0x5ca73e(0x220)])({'transient':!![]})],CommitComponentsJob),exports[a104_0x5ca73e(0x25a)]=CommitComponentsJob;