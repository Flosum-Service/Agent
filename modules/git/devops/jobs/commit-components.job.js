function a60_0x4c41(_0x12d63d,_0x161825){const _0x3af1a8=a60_0x39fb();return a60_0x4c41=function(_0x1d72ba,_0x15da7e){_0x1d72ba=_0x1d72ba-0x87;let _0x39fb82=_0x3af1a8[_0x1d72ba];return _0x39fb82;},a60_0x4c41(_0x12d63d,_0x161825);}const a60_0x400c81=a60_0x4c41;(function(_0x130428,_0x5f625e){const _0x5d6040=a60_0x4c41,_0x3cffbf=_0x130428();while(!![]){try{const _0x28714a=-parseInt(_0x5d6040(0xc5))/0x1*(parseInt(_0x5d6040(0x9b))/0x2)+parseInt(_0x5d6040(0x95))/0x3+parseInt(_0x5d6040(0xa6))/0x4+parseInt(_0x5d6040(0x8b))/0x5+-parseInt(_0x5d6040(0x91))/0x6*(-parseInt(_0x5d6040(0xb3))/0x7)+parseInt(_0x5d6040(0xe1))/0x8*(parseInt(_0x5d6040(0xb4))/0x9)+parseInt(_0x5d6040(0xdf))/0xa*(-parseInt(_0x5d6040(0x93))/0xb);if(_0x28714a===_0x5f625e)break;else _0x3cffbf['push'](_0x3cffbf['shift']());}catch(_0x50f457){_0x3cffbf['push'](_0x3cffbf['shift']());}}}(a60_0x39fb,0x7c199));const a60_0x15da7e=(function(){let _0x2d9405=!![];return function(_0x526009,_0x194d4d){const _0x2bdb83=_0x2d9405?function(){const _0x18fad5=a60_0x4c41;if(_0x194d4d){const _0x43301d=_0x194d4d[_0x18fad5(0xbb)](_0x526009,arguments);return _0x194d4d=null,_0x43301d;}}:function(){};return _0x2d9405=![],_0x2bdb83;};}()),a60_0x1d72ba=a60_0x15da7e(this,function(){const _0x1d31e6=a60_0x4c41;return a60_0x1d72ba[_0x1d31e6(0xb9)]()[_0x1d31e6(0x9f)](_0x1d31e6(0xf1))[_0x1d31e6(0xb9)]()['constructor'](a60_0x1d72ba)[_0x1d31e6(0x9f)](_0x1d31e6(0xf1));});function a60_0x39fb(){const _0x33faad=['__importDefault','credentials','exec','://','3914chDXSw','create','typedi','MDApiUtils','run','../../parsers/data/child-types','fileName','\x20Wrote\x20','prefix','removeComponents','componentsToWrite','../dto/commit-components.dto','name','../utils/mdapi.utils','GitUtils','force','cleanUp','provider','default','GitProvider','../../providers/api/bitbucket-api.service','replace','hasOwnProperty','isLoggedIn','now','includes','1787550Hecgss','Bitbucket','144YAsdAQ','error','CommitComponentsDto','call','defineProperty','../../providers/providers.tokens','object','components','../utils/sfdx.utils','fileType','gitUrl','\x20Checking\x20commit\x20components.','catch','\x20Copying\x20mdapi\x20to\x20git\x20folder.','writed','logger','(((.+)+)+)+$','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','commitData','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','CommitComponentsJob','mdapiUtils','groupComponentsByFileName','getOwnPropertyDescriptor','\x20components','commitAndPush','4074400gYQZbl','copyProjectTo','\x20Start\x20converting\x20to\x20SFDX.','../../salesforce/utils/sfdx.utils','\x20Preparing\x20to\x20delete\x20components','gitUtils','57666gbCDkm','sort','99zhVMhz','clearDir','1069467BJPgOj','join','get','__createBinding','__esModule','master','142GZYcRo','../../internal/fs.internal','\x20Deleted\x20','clone','search','__setModuleDefault','../../../../constants','length','getGitShellAuthorizationString','type','sfdxUtils','2326444JWKwso','getRemote','\x20Preparing\x20to\x20write\x20components','sfLogger','prepareMdapi','__importStar','isEmptyDir','isSFDXProject','removeDir','decorate','branch','../utils/git.utils','Service','392UsFPDM','51903tNLVlE','log','send','startTime','componentsToDelete','toString','COMPONENTS_PER_TICK','apply','dir','deleted','splice','\x20Prepare\x20mdapi\x20files.','Tokens'];a60_0x39fb=function(){return _0x33faad;};return a60_0x39fb();}a60_0x1d72ba();'use strict';var __createBinding=this&&this[a60_0x400c81(0x98)]||(Object[a60_0x400c81(0xc6)]?function(_0x387111,_0x3d27fc,_0x3581d4,_0x3d44f0){const _0x265c83=a60_0x400c81;if(_0x3d44f0===undefined)_0x3d44f0=_0x3581d4;Object[_0x265c83(0xe5)](_0x387111,_0x3d44f0,{'enumerable':!![],'get':function(){return _0x3d27fc[_0x3581d4];}});}:function(_0x563f5a,_0x2c55d2,_0x32fa4a,_0x47ebcc){if(_0x47ebcc===undefined)_0x47ebcc=_0x32fa4a;_0x563f5a[_0x47ebcc]=_0x2c55d2[_0x32fa4a];}),__setModuleDefault=this&&this[a60_0x400c81(0xa0)]||(Object[a60_0x400c81(0xc6)]?function(_0x2b086c,_0x29c610){const _0xc2c3c8=a60_0x400c81;Object[_0xc2c3c8(0xe5)](_0x2b086c,_0xc2c3c8(0xd7),{'enumerable':!![],'value':_0x29c610});}:function(_0x4bb3a5,_0x3baa9f){const _0x1b6b83=a60_0x400c81;_0x4bb3a5[_0x1b6b83(0xd7)]=_0x3baa9f;}),__decorate=this&&this['__decorate']||function(_0x21ab4b,_0x373641,_0x4fe30a,_0x5ffb77){const _0x189a48=a60_0x400c81;var _0x730e8e=arguments[_0x189a48(0xa2)],_0x769f60=_0x730e8e<0x3?_0x373641:_0x5ffb77===null?_0x5ffb77=Object[_0x189a48(0x88)](_0x373641,_0x4fe30a):_0x5ffb77,_0x10c653;if(typeof Reflect===_0x189a48(0xe7)&&typeof Reflect[_0x189a48(0xaf)]==='function')_0x769f60=Reflect[_0x189a48(0xaf)](_0x21ab4b,_0x373641,_0x4fe30a,_0x5ffb77);else{for(var _0x280cfc=_0x21ab4b[_0x189a48(0xa2)]-0x1;_0x280cfc>=0x0;_0x280cfc--)if(_0x10c653=_0x21ab4b[_0x280cfc])_0x769f60=(_0x730e8e<0x3?_0x10c653(_0x769f60):_0x730e8e>0x3?_0x10c653(_0x373641,_0x4fe30a,_0x769f60):_0x10c653(_0x373641,_0x4fe30a))||_0x769f60;}return _0x730e8e>0x3&&_0x769f60&&Object[_0x189a48(0xe5)](_0x373641,_0x4fe30a,_0x769f60),_0x769f60;},__importStar=this&&this[a60_0x400c81(0xab)]||function(_0x134935){const _0x5a71b3=a60_0x400c81;if(_0x134935&&_0x134935['__esModule'])return _0x134935;var _0x1d8199={};if(_0x134935!=null){for(var _0x1efd9c in _0x134935)if(_0x1efd9c!==_0x5a71b3(0xd7)&&Object['prototype'][_0x5a71b3(0xdb)][_0x5a71b3(0xe4)](_0x134935,_0x1efd9c))__createBinding(_0x1d8199,_0x134935,_0x1efd9c);}return __setModuleDefault(_0x1d8199,_0x134935),_0x1d8199;},__importDefault=this&&this[a60_0x400c81(0xc1)]||function(_0x1b7096){const _0x1e1bbf=a60_0x400c81;return _0x1b7096&&_0x1b7096[_0x1e1bbf(0x99)]?_0x1b7096:{'default':_0x1b7096};};Object[a60_0x400c81(0xe5)](exports,a60_0x400c81(0x99),{'value':!![]}),exports[a60_0x400c81(0xf5)]=void 0x0;const commit_components_dto_1=require(a60_0x400c81(0xd0)),events_1=__importDefault(require('events')),git_utils_1=require(a60_0x400c81(0xb1)),mdapi_utils_1=require(a60_0x400c81(0xd2)),sfdx_utils_1=require(a60_0x400c81(0xe9)),typedi_1=__importStar(require(a60_0x400c81(0xc7))),child_types_1=__importDefault(require(a60_0x400c81(0xca))),utils_1=require('../../../shared/utils'),constants_1=require(a60_0x400c81(0xa1)),git_provider_1=require('../../providers/types/git-provider'),bitbucket_api_service_1=require(a60_0x400c81(0xd9)),sfdx_utils_2=require(a60_0x400c81(0x8e)),fs_internal_1=require(a60_0x400c81(0x9c)),path_1=require('path'),providers_tokens_1=require(a60_0x400c81(0xe6));let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(){const _0x1489e9=a60_0x400c81;super(...arguments),this[_0x1489e9(0xba)]=0x3e8,this['componentsToWrite']=0x0,this['componentsToDelete']=0x0,this['startTime']=Date[_0x1489e9(0xdd)]();}async[a60_0x400c81(0xa7)](){const _0x5bacf1=a60_0x400c81,{repo:_0x33ded7}=this['commitData'],_0x179b17=typedi_1[_0x5bacf1(0xd7)]['get'](providers_tokens_1['Tokens'][_0x5bacf1(0xc2)]);if(this['commitData'][_0x5bacf1(0xd6)]===git_provider_1[_0x5bacf1(0xd8)][_0x5bacf1(0xe0)]){const _0x2f0523=typedi_1[_0x5bacf1(0xd7)][_0x5bacf1(0x97)](bitbucket_api_service_1['BitbucketApiService']);await _0x2f0523[_0x5bacf1(0xdc)]();}return _0x33ded7[_0x5bacf1(0xeb)][_0x5bacf1(0xda)](/http(s)?:\/\/(.+@)?/,utils_1['getProtocol'](_0x33ded7[_0x5bacf1(0xeb)])+_0x5bacf1(0xc4)+_0x179b17[_0x5bacf1(0xa3)]()+'@');}[a60_0x400c81(0x87)](_0x3deb56){const _0x3bf1a1=a60_0x400c81;var _0x14a8a2;_0x3deb56['sort'](_0x9973c0=>child_types_1['default'][_0x3bf1a1(0xde)](_0x9973c0[_0x3bf1a1(0xea)])?0x1:-0x1);const _0x57a183={};for(const _0x5ae7e8 of _0x3deb56){_0x57a183[_0x14a8a2=_0x5ae7e8[_0x3bf1a1(0xcb)]]||(_0x57a183[_0x14a8a2]=[]),_0x57a183[_0x5ae7e8[_0x3bf1a1(0xcb)]]['push'](_0x5ae7e8);}return Object['values'](_0x57a183)['reduce']((_0x1a0713,_0x234ac8)=>[..._0x1a0713,..._0x234ac8],[]);}async['writeComponents'](_0x40ea5e){const _0x527aeb=a60_0x400c81;_0x40ea5e=this[_0x527aeb(0x87)](_0x40ea5e);let _0x300f6f=0x0;while(_0x40ea5e[_0x527aeb(0xa2)]){const _0x162cf7=_0x40ea5e['splice'](0x0,this[_0x527aeb(0xba)]);await this[_0x527aeb(0xf6)]['writeFlosumComponents'](_0x162cf7,{'skipChildErrors':this[_0x527aeb(0xf3)][_0x527aeb(0xb0)][_0x527aeb(0xd1)]===_0x527aeb(0x9a)}),_0x300f6f+=_0x162cf7[_0x527aeb(0xa2)],this[_0x527aeb(0xa9)][_0x527aeb(0xb5)](this['prefix']+_0x527aeb(0xcc)+_0x300f6f+'/'+this[_0x527aeb(0xcf)]+_0x527aeb(0x89)),await this[_0x527aeb(0xa9)][_0x527aeb(0xb6)]();}}async[a60_0x400c81(0xce)](_0x31f82){const _0x2d5320=a60_0x400c81;_0x31f82[_0x2d5320(0x92)](_0x295bb7=>child_types_1[_0x2d5320(0xd7)][_0x2d5320(0xde)](_0x295bb7[_0x2d5320(0xa4)])?-0x1:0x1);let _0x1695b1=0x0;while(_0x31f82['length']){const _0x144f58=_0x31f82[_0x2d5320(0xbe)](0x0,this[_0x2d5320(0xba)]);await this['mdapiUtils']['removeComponents'](_0x144f58),_0x1695b1+=_0x144f58['length'],this[_0x2d5320(0xa9)][_0x2d5320(0xb5)](this[_0x2d5320(0xcd)]+_0x2d5320(0x9d)+_0x1695b1+'/'+this['componentsToDelete']+'\x20components'),await this[_0x2d5320(0xa9)][_0x2d5320(0xb6)]();}}async['cleanUp'](){const _0x463d53=a60_0x400c81;this['gitUtils']&&await this['gitUtils'][_0x463d53(0xae)]()['catch'](()=>void 0x0),this[_0x463d53(0xf6)]&&await this[_0x463d53(0xf6)][_0x463d53(0xae)]()[_0x463d53(0xed)](()=>void 0x0),this['sfdxUtils']&&await this[_0x463d53(0xa5)]['removeDir']()[_0x463d53(0xed)](()=>void 0x0);}async['exec'](){const _0x37741d=a60_0x400c81,{repo:_0x484beb,branch:_0x545ff,components:_0x4bcc65,convertToSFDX:_0x1b990c,message:_0xb244de,user:_0x3d1004}=this[_0x37741d(0xf3)];this['mdapiUtils']=new mdapi_utils_1[(_0x37741d(0xc8))](),this[_0x37741d(0x90)]=new git_utils_1[(_0x37741d(0xd3))](await this[_0x37741d(0xa7)]()),this['sfdxUtils']=new sfdx_utils_1['SFDXUtils']();let _0x82c9ad=_0x1b990c;try{await this[_0x37741d(0xa9)]['log'](this[_0x37741d(0xcd)]+'\x20Start\x20cloning\x20repository.')[_0x37741d(0xb6)](),await this['gitUtils'][_0x37741d(0x9e)](_0x545ff[_0x37741d(0xd1)],_0x484beb[_0x37741d(0xd1)]);!this[_0x37741d(0xf3)][_0x37741d(0xd4)]?(this[_0x37741d(0xa9)][_0x37741d(0xb5)](this['prefix']+_0x37741d(0xbf)),await this['mdapiUtils'][_0x37741d(0xaa)](this[_0x37741d(0x90)][_0x37741d(0xbc)])):this[_0x37741d(0xa9)]['log'](this[_0x37741d(0xcd)]+_0x37741d(0xf4));await this[_0x37741d(0xa9)][_0x37741d(0xb5)](this[_0x37741d(0xcd)]+'\x20Checking\x20written\x20components.')['send']();_0x4bcc65[_0x37741d(0xef)]&&(this[_0x37741d(0xa9)]['log'](this[_0x37741d(0xcd)]+_0x37741d(0xa8)),this[_0x37741d(0xcf)]=_0x4bcc65[_0x37741d(0xef)][_0x37741d(0xa2)],await this['writeComponents'](_0x4bcc65[_0x37741d(0xef)]),await this[_0x37741d(0xa9)][_0x37741d(0xb6)]());await this[_0x37741d(0xa9)][_0x37741d(0xb5)](this[_0x37741d(0xcd)]+'\x20Checking\x20deleted\x20components.')[_0x37741d(0xb6)]();_0x4bcc65[_0x37741d(0xbd)]&&(this[_0x37741d(0xa9)][_0x37741d(0xb5)](this[_0x37741d(0xcd)]+_0x37741d(0x8f)),this[_0x37741d(0xb8)]=_0x4bcc65[_0x37741d(0xbd)]['length'],await this[_0x37741d(0xce)](_0x4bcc65['deleted']),await this[_0x37741d(0xa9)][_0x37741d(0xb6)]());await this[_0x37741d(0xa9)][_0x37741d(0xb6)]();const _0x64be08=await fs_internal_1['FS'][_0x37741d(0xac)](this[_0x37741d(0x90)][_0x37741d(0xbc)]);await sfdx_utils_2['SFDX'][_0x37741d(0xad)](this[_0x37741d(0x90)][_0x37741d(0xbc)])?(_0x82c9ad=!![],await fs_internal_1['FS']['removeDir'](path_1[_0x37741d(0x96)](this['gitUtils'][_0x37741d(0xbc)],'force-app'))):(_0x82c9ad&&(!_0x64be08&&(_0x82c9ad=![])),await this['gitUtils'][_0x37741d(0x94)]());_0x82c9ad?(await this[_0x37741d(0xa9)]['log'](this[_0x37741d(0xcd)]+_0x37741d(0x8d))[_0x37741d(0xb6)](),await this['sfdxUtils']['createProjectFrom'](this[_0x37741d(0xf6)][_0x37741d(0xbc)]),await this[_0x37741d(0xa5)][_0x37741d(0x8c)](this[_0x37741d(0x90)]['dir'],!_0x64be08),await this[_0x37741d(0xa5)][_0x37741d(0xae)]()):(await this[_0x37741d(0xa9)][_0x37741d(0xb5)](this['prefix']+_0x37741d(0xee))[_0x37741d(0xb6)](),await this[_0x37741d(0xf6)]['copyMdapiTo'](this[_0x37741d(0x90)][_0x37741d(0xbc)]));await this[_0x37741d(0xa9)]['log'](this[_0x37741d(0xcd)]+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')[_0x37741d(0xb6)](),await this['gitUtils'][_0x37741d(0x8a)](_0xb244de,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x3d1004['name']},_0x545ff[_0x37741d(0xd1)]),await this['gitUtils'][_0x37741d(0xae)](),await this[_0x37741d(0xf6)]['removeDir']();const _0xf8a329=this['componentsToWrite']+this[_0x37741d(0xb8)];await this[_0x37741d(0xa9)][_0x37741d(0xb5)](this[_0x37741d(0xcd)]+_0x37741d(0xf2)+(Date['now']()-this[_0x37741d(0xb7)])+'ms.\x20Committed\x20components\x20-\x20'+_0xf8a329+'.')['send']();}catch(_0x5779d9){await this[_0x37741d(0xd5)](),await this[_0x37741d(0xa9)][_0x37741d(0xe2)](this['prefix']+'\x20'+_0x5779d9)[_0x37741d(0xb6)]();throw _0x5779d9;}}async[a60_0x400c81(0xc9)](_0x1d6b16,_0x2a4a11){const _0xe2fdb2=a60_0x400c81;var _0x61158d,_0x28cca4;this[_0xe2fdb2(0xa9)]=typedi_1[_0xe2fdb2(0xd7)][_0xe2fdb2(0x97)](providers_tokens_1[_0xe2fdb2(0xc0)][_0xe2fdb2(0xf0)]),this['prefix']=(_0x2a4a11?_0x2a4a11+'\x20':'')+'['+commit_components_dto_1[_0xe2fdb2(0xe3)][_0xe2fdb2(0xd1)]+']',await this['sfLogger']['log'](this[_0xe2fdb2(0xcd)]+_0xe2fdb2(0xec));const _0x14b6bb=!!((_0x61158d=_0x1d6b16['components'])===null||_0x61158d===void 0x0?void 0x0:_0x61158d[_0xe2fdb2(0xef)])||!!((_0x28cca4=_0x1d6b16[_0xe2fdb2(0xe8)])===null||_0x28cca4===void 0x0?void 0x0:_0x28cca4['deleted']);if(!_0x14b6bb){await this['sfLogger'][_0xe2fdb2(0xb5)](this['prefix']+'\x20Nothing\x20to\x20commit.\x20Skip.')[_0xe2fdb2(0xb6)]();return;}this['commitData']=_0x1d6b16,await this[_0xe2fdb2(0xc3)]();}};CommitComponentsJob=__decorate([typedi_1[a60_0x400c81(0xb2)]({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;