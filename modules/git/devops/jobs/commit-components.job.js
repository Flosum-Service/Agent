const a72_0x3aaffe=a72_0x2f5d;(function(_0x4a7062,_0x27fa2f){const _0x28b60f=a72_0x2f5d,_0x3a73b3=_0x4a7062();while(!![]){try{const _0x495ef4=parseInt(_0x28b60f(0x172))/0x1+-parseInt(_0x28b60f(0x1b2))/0x2*(-parseInt(_0x28b60f(0x18c))/0x3)+-parseInt(_0x28b60f(0x17a))/0x4*(-parseInt(_0x28b60f(0x18f))/0x5)+parseInt(_0x28b60f(0x1c5))/0x6+parseInt(_0x28b60f(0x1e5))/0x7*(parseInt(_0x28b60f(0x1e3))/0x8)+parseInt(_0x28b60f(0x182))/0x9+-parseInt(_0x28b60f(0x1d7))/0xa*(parseInt(_0x28b60f(0x19a))/0xb);if(_0x495ef4===_0x27fa2f)break;else _0x3a73b3['push'](_0x3a73b3['shift']());}catch(_0x2738c9){_0x3a73b3['push'](_0x3a73b3['shift']());}}}(a72_0x2e29,0x981da));const a72_0x51b9de=(function(){let _0x59b534=!![];return function(_0x357dc9,_0x4950fc){const _0xe94c75=_0x59b534?function(){const _0x207e4b=a72_0x2f5d;if(_0x4950fc){const _0x3a127c=_0x4950fc[_0x207e4b(0x1ce)](_0x357dc9,arguments);return _0x4950fc=null,_0x3a127c;}}:function(){};return _0x59b534=![],_0xe94c75;};}()),a72_0x527b69=a72_0x51b9de(this,function(){const _0x3754d2=a72_0x2f5d;return a72_0x527b69['toString']()[_0x3754d2(0x18e)](_0x3754d2(0x1c7))[_0x3754d2(0x17b)]()[_0x3754d2(0x1a8)](a72_0x527b69)[_0x3754d2(0x18e)](_0x3754d2(0x1c7));});function a72_0x2f5d(_0x487673,_0x4fefad){const _0x13c584=a72_0x2e29();return a72_0x2f5d=function(_0x527b69,_0x51b9de){_0x527b69=_0x527b69-0x16f;let _0x2e2980=_0x13c584[_0x527b69];return _0x2e2980;},a72_0x2f5d(_0x487673,_0x4fefad);}a72_0x527b69();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x2ebbe5,_0x1b3db2,_0x5faef3,_0x778045){const _0x1a5e6e=a72_0x2f5d;if(_0x778045===undefined)_0x778045=_0x5faef3;var _0x1a5bd2=Object[_0x1a5e6e(0x198)](_0x1b3db2,_0x5faef3);(!_0x1a5bd2||(_0x1a5e6e(0x1e4)in _0x1a5bd2?!_0x1b3db2[_0x1a5e6e(0x1a6)]:_0x1a5bd2[_0x1a5e6e(0x1b3)]||_0x1a5bd2['configurable']))&&(_0x1a5bd2={'enumerable':!![],'get':function(){return _0x1b3db2[_0x5faef3];}}),Object[_0x1a5e6e(0x1d4)](_0x2ebbe5,_0x778045,_0x1a5bd2);}:function(_0x55df3e,_0x211d4a,_0x21c42b,_0x3a14ce){if(_0x3a14ce===undefined)_0x3a14ce=_0x21c42b;_0x55df3e[_0x3a14ce]=_0x211d4a[_0x21c42b];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a72_0x3aaffe(0x187)]?function(_0x4fe63d,_0x3c38e8){const _0x98b0e6=a72_0x3aaffe;Object[_0x98b0e6(0x1d4)](_0x4fe63d,_0x98b0e6(0x199),{'enumerable':!![],'value':_0x3c38e8});}:function(_0xaf57e8,_0xe8480a){const _0x4a6c12=a72_0x3aaffe;_0xaf57e8[_0x4a6c12(0x199)]=_0xe8480a;}),__decorate=this&&this[a72_0x3aaffe(0x1a4)]||function(_0x2ebdb8,_0x1488ce,_0x21fab3,_0x1f42f3){const _0x5bde42=a72_0x3aaffe;var _0x49ad90=arguments[_0x5bde42(0x1b4)],_0x1b9094=_0x49ad90<0x3?_0x1488ce:_0x1f42f3===null?_0x1f42f3=Object[_0x5bde42(0x198)](_0x1488ce,_0x21fab3):_0x1f42f3,_0x10d7f0;if(typeof Reflect===_0x5bde42(0x1ac)&&typeof Reflect[_0x5bde42(0x1b0)]===_0x5bde42(0x189))_0x1b9094=Reflect[_0x5bde42(0x1b0)](_0x2ebdb8,_0x1488ce,_0x21fab3,_0x1f42f3);else{for(var _0x1a1d1f=_0x2ebdb8['length']-0x1;_0x1a1d1f>=0x0;_0x1a1d1f--)if(_0x10d7f0=_0x2ebdb8[_0x1a1d1f])_0x1b9094=(_0x49ad90<0x3?_0x10d7f0(_0x1b9094):_0x49ad90>0x3?_0x10d7f0(_0x1488ce,_0x21fab3,_0x1b9094):_0x10d7f0(_0x1488ce,_0x21fab3))||_0x1b9094;}return _0x49ad90>0x3&&_0x1b9094&&Object[_0x5bde42(0x1d4)](_0x1488ce,_0x21fab3,_0x1b9094),_0x1b9094;},__importStar=this&&this[a72_0x3aaffe(0x1aa)]||function(_0x42a433){const _0x519236=a72_0x3aaffe;if(_0x42a433&&_0x42a433[_0x519236(0x1a6)])return _0x42a433;var _0x1a4c78={};if(_0x42a433!=null){for(var _0x66835e in _0x42a433)if(_0x66835e!=='default'&&Object[_0x519236(0x191)][_0x519236(0x1c8)][_0x519236(0x1a1)](_0x42a433,_0x66835e))__createBinding(_0x1a4c78,_0x42a433,_0x66835e);}return __setModuleDefault(_0x1a4c78,_0x42a433),_0x1a4c78;},__importDefault=this&&this['__importDefault']||function(_0x5cd0d1){const _0x46737a=a72_0x3aaffe;return _0x5cd0d1&&_0x5cd0d1[_0x46737a(0x1a6)]?_0x5cd0d1:{'default':_0x5cd0d1};};Object['defineProperty'](exports,a72_0x3aaffe(0x1a6),{'value':!![]}),exports[a72_0x3aaffe(0x17d)]=void 0x0;const commit_components_dto_1=require(a72_0x3aaffe(0x170)),events_1=__importDefault(require('events')),git_utils_1=require(a72_0x3aaffe(0x1c1)),mdapi_utils_1=require(a72_0x3aaffe(0x1b5)),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require(a72_0x3aaffe(0x1b8))),child_types_1=__importDefault(require(a72_0x3aaffe(0x17e))),utils_1=require(a72_0x3aaffe(0x1ba)),constants_1=require(a72_0x3aaffe(0x1d8)),git_provider_1=require(a72_0x3aaffe(0x1df)),bitbucket_api_service_1=require(a72_0x3aaffe(0x177)),sfdx_utils_2=require('../../salesforce/utils/sfdx.utils'),fs_internal_1=require(a72_0x3aaffe(0x1a0)),path_1=require(a72_0x3aaffe(0x181)),providers_tokens_1=require(a72_0x3aaffe(0x1cb));function a72_0x2e29(){const _0x5f4f1b=['../../providers/types/git-provider','isSFDXProject','provider','writeFlosumComponents','2134280fuZfcP','get','21ZahvfM','Bitbucket','../dto/commit-components.dto','://','1047660bkawdG','\x20Wrote\x20','components','BitbucketApiService','name','../../providers/api/bitbucket-api.service','GitProvider','\x20Prepare\x20mdapi\x20files.','4ZKHtzx','toString','log','CommitComponentsJob','../../parsers/data/child-types','includes','sfdxUtils','path','3118626eYLJhG','sfLogger','master','componentsToWrite','catch','create','\x20Checking\x20deleted\x20components.','function','Service','\x20Start\x20cloning\x20repository.','66dwTacQ','COMPONENTS_PER_TICK','search','5094670edmtjz','createProjectFrom','prototype','DEFAULT_GIT_USER_EMAIL','reduce','\x20Preparing\x20to\x20write\x20components','exec','credentials','getProtocol','getOwnPropertyDescriptor','default','176vvLZjI','error','now','copyMdapiTo','startTime','logger','../../internal/fs.internal','call','fileName','groupComponentsByFileName','__decorate','prefix','__esModule','writeComponents','constructor','SFDX','__importStar','splice','object','branch','componentsToDelete','SFDXUtils','decorate','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','41434Ypkvlr','writable','length','../utils/mdapi.utils','sort','\x20components','typedi','getRemote','../../../shared/utils','send','\x20Start\x20converting\x20to\x20SFDX.','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','mdapiUtils','clone','gitUrl','../utils/git.utils','removeComponents','\x20Checking\x20written\x20components.','dir','3303678DgXxse','run','(((.+)+)+)+$','hasOwnProperty','clearDir','writed','../../providers/providers.tokens','replace','deleted','apply','cleanUp','gitUtils','removeDir','Tokens','prepareMdapi','defineProperty','join','ms.\x20Committed\x20components\x20-\x20','2247990pABtdn','../../../../constants','copyProjectTo','commitData','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','type','push','CommitComponentsDto'];a72_0x2e29=function(){return _0x5f4f1b;};return a72_0x2e29();}let CommitComponentsJob=class CommitComponentsJob extends events_1[a72_0x3aaffe(0x199)]{constructor(){const _0x371518=a72_0x3aaffe;super(...arguments),this[_0x371518(0x18d)]=0x3e8,this[_0x371518(0x185)]=0x0,this[_0x371518(0x1ae)]=0x0,this[_0x371518(0x19e)]=Date[_0x371518(0x19c)]();}async[a72_0x3aaffe(0x1b9)](){const _0x1d2e73=a72_0x3aaffe,{repo:_0x4e9aed}=this[_0x1d2e73(0x1da)],_0x5dd2ef=typedi_1[_0x1d2e73(0x199)][_0x1d2e73(0x1e4)](providers_tokens_1[_0x1d2e73(0x1d2)][_0x1d2e73(0x196)]);if(this[_0x1d2e73(0x1da)][_0x1d2e73(0x1e1)]===git_provider_1[_0x1d2e73(0x178)][_0x1d2e73(0x16f)]){const _0x28f1d4=typedi_1[_0x1d2e73(0x199)]['get'](bitbucket_api_service_1[_0x1d2e73(0x175)]);await _0x28f1d4['isLoggedIn']();}return _0x4e9aed[_0x1d2e73(0x1c0)][_0x1d2e73(0x1cc)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x1d2e73(0x197)])(_0x4e9aed[_0x1d2e73(0x1c0)])+_0x1d2e73(0x171)+_0x5dd2ef['getGitShellAuthorizationString']()+'@');}[a72_0x3aaffe(0x1a3)](_0x7892fb){const _0x1619f4=a72_0x3aaffe;var _0x4a371c;_0x7892fb[_0x1619f4(0x1b6)](_0x44628e=>child_types_1[_0x1619f4(0x199)][_0x1619f4(0x17f)](_0x44628e['fileType'])?0x1:-0x1);const _0x33d815={};for(const _0x1664a0 of _0x7892fb){_0x33d815[_0x4a371c=_0x1664a0[_0x1619f4(0x1a2)]]||(_0x33d815[_0x4a371c]=[]),_0x33d815[_0x1664a0[_0x1619f4(0x1a2)]][_0x1619f4(0x1dd)](_0x1664a0);}return Object['values'](_0x33d815)[_0x1619f4(0x193)]((_0x2fba84,_0x28a0fd)=>[..._0x2fba84,..._0x28a0fd],[]);}async['writeComponents'](_0x3689db){const _0x26d941=a72_0x3aaffe;_0x3689db=this[_0x26d941(0x1a3)](_0x3689db);let _0x37fbae=0x0;while(_0x3689db[_0x26d941(0x1b4)]){const _0x170998=_0x3689db['splice'](0x0,this[_0x26d941(0x18d)]);await this['mdapiUtils'][_0x26d941(0x1e2)](_0x170998,{'skipChildErrors':this['commitData'][_0x26d941(0x1ad)][_0x26d941(0x176)]===_0x26d941(0x184)}),_0x37fbae+=_0x170998[_0x26d941(0x1b4)],this[_0x26d941(0x183)]['log'](this['prefix']+_0x26d941(0x173)+_0x37fbae+'/'+this[_0x26d941(0x185)]+_0x26d941(0x1b7)),await this['sfLogger']['send']();}}async[a72_0x3aaffe(0x1c2)](_0x46824c){const _0x5a7115=a72_0x3aaffe;_0x46824c[_0x5a7115(0x1b6)](_0xb24a9f=>child_types_1[_0x5a7115(0x199)][_0x5a7115(0x17f)](_0xb24a9f[_0x5a7115(0x1dc)])?-0x1:0x1);let _0x1748e6=0x0;while(_0x46824c[_0x5a7115(0x1b4)]){const _0x4aa028=_0x46824c[_0x5a7115(0x1ab)](0x0,this[_0x5a7115(0x18d)]);await this['mdapiUtils']['removeComponents'](_0x4aa028),_0x1748e6+=_0x4aa028['length'],this[_0x5a7115(0x183)][_0x5a7115(0x17c)](this['prefix']+'\x20Deleted\x20'+_0x1748e6+'/'+this[_0x5a7115(0x1ae)]+_0x5a7115(0x1b7)),await this['sfLogger']['send']();}}async[a72_0x3aaffe(0x1cf)](){const _0x21c08a=a72_0x3aaffe;this[_0x21c08a(0x1d0)]&&await this[_0x21c08a(0x1d0)]['removeDir']()['catch'](()=>void 0x0),this[_0x21c08a(0x1be)]&&await this[_0x21c08a(0x1be)][_0x21c08a(0x1d1)]()[_0x21c08a(0x186)](()=>void 0x0),this[_0x21c08a(0x180)]&&await this[_0x21c08a(0x180)][_0x21c08a(0x1d1)]()['catch'](()=>void 0x0);}async[a72_0x3aaffe(0x195)](){const _0x22728f=a72_0x3aaffe,{repo:_0xa77375,branch:_0x5bf285,components:_0x3f2d81,convertToSFDX:_0x8df16c,message:_0x52db9a,user:_0x401469}=this['commitData'];this[_0x22728f(0x1be)]=new mdapi_utils_1['MDApiUtils'](),this['gitUtils']=new git_utils_1['GitUtils'](await this['getRemote']()),this['sfdxUtils']=new sfdx_utils_1[(_0x22728f(0x1af))]();let _0x22f828=_0x8df16c;try{await this['sfLogger'][_0x22728f(0x17c)](this[_0x22728f(0x1a5)]+_0x22728f(0x18b))[_0x22728f(0x1bb)](),await this[_0x22728f(0x1d0)][_0x22728f(0x1bf)](_0x5bf285['name'],_0xa77375[_0x22728f(0x176)]);!this[_0x22728f(0x1da)]['force']?(this[_0x22728f(0x183)][_0x22728f(0x17c)](this[_0x22728f(0x1a5)]+_0x22728f(0x179)),await this[_0x22728f(0x1be)][_0x22728f(0x1d3)](this[_0x22728f(0x1d0)]['dir'])):this[_0x22728f(0x183)]['log'](this['prefix']+_0x22728f(0x1bd));await this[_0x22728f(0x183)][_0x22728f(0x17c)](this[_0x22728f(0x1a5)]+_0x22728f(0x1c3))[_0x22728f(0x1bb)]();_0x3f2d81[_0x22728f(0x1ca)]&&(this[_0x22728f(0x183)]['log'](this[_0x22728f(0x1a5)]+_0x22728f(0x194)),this[_0x22728f(0x185)]=_0x3f2d81[_0x22728f(0x1ca)][_0x22728f(0x1b4)],await this[_0x22728f(0x1a7)](_0x3f2d81[_0x22728f(0x1ca)]),await this['sfLogger'][_0x22728f(0x1bb)]());await this['sfLogger']['log'](this[_0x22728f(0x1a5)]+_0x22728f(0x188))[_0x22728f(0x1bb)]();_0x3f2d81[_0x22728f(0x1cd)]&&(this[_0x22728f(0x183)][_0x22728f(0x17c)](this[_0x22728f(0x1a5)]+'\x20Preparing\x20to\x20delete\x20components'),this[_0x22728f(0x1ae)]=_0x3f2d81[_0x22728f(0x1cd)]['length'],await this[_0x22728f(0x1c2)](_0x3f2d81[_0x22728f(0x1cd)]),await this[_0x22728f(0x183)][_0x22728f(0x1bb)]());await this[_0x22728f(0x183)][_0x22728f(0x1bb)]();const _0x3346fa=await fs_internal_1['FS']['isEmptyDir'](this[_0x22728f(0x1d0)][_0x22728f(0x1c4)]);await sfdx_utils_2[_0x22728f(0x1a9)][_0x22728f(0x1e0)](this[_0x22728f(0x1d0)][_0x22728f(0x1c4)])?(_0x22f828=!![],await fs_internal_1['FS'][_0x22728f(0x1d1)]((0x0,path_1[_0x22728f(0x1d5)])(this['gitUtils'][_0x22728f(0x1c4)],'force-app'))):(_0x22f828&&(!_0x3346fa&&(_0x22f828=![])),await this[_0x22728f(0x1d0)][_0x22728f(0x1c9)]());_0x22f828?(await this[_0x22728f(0x183)][_0x22728f(0x17c)](this[_0x22728f(0x1a5)]+_0x22728f(0x1bc))[_0x22728f(0x1bb)](),await this[_0x22728f(0x180)][_0x22728f(0x190)](this[_0x22728f(0x1be)][_0x22728f(0x1c4)]),await this['sfdxUtils'][_0x22728f(0x1d9)](this['gitUtils']['dir'],!_0x3346fa),await this[_0x22728f(0x180)]['removeDir']()):(await this[_0x22728f(0x183)][_0x22728f(0x17c)](this['prefix']+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x22728f(0x1bb)](),await this[_0x22728f(0x1be)][_0x22728f(0x19d)](this[_0x22728f(0x1d0)][_0x22728f(0x1c4)]));await this[_0x22728f(0x183)][_0x22728f(0x17c)](this[_0x22728f(0x1a5)]+_0x22728f(0x1db))[_0x22728f(0x1bb)](),await this[_0x22728f(0x1d0)]['commitAndPush'](_0x52db9a,{'email':constants_1[_0x22728f(0x192)],'name':_0x401469[_0x22728f(0x176)]},_0x5bf285[_0x22728f(0x176)]),await this[_0x22728f(0x1d0)]['removeDir'](),await this[_0x22728f(0x1be)][_0x22728f(0x1d1)]();const _0x374d4f=this[_0x22728f(0x185)]+this[_0x22728f(0x1ae)];await this[_0x22728f(0x183)]['log'](this['prefix']+_0x22728f(0x1b1)+(Date[_0x22728f(0x19c)]()-this['startTime'])+_0x22728f(0x1d6)+_0x374d4f+'.')[_0x22728f(0x1bb)]();}catch(_0x417901){await this[_0x22728f(0x1cf)](),await this[_0x22728f(0x183)][_0x22728f(0x19b)](this[_0x22728f(0x1a5)]+'\x20'+_0x417901)[_0x22728f(0x1bb)]();throw _0x417901;}}async[a72_0x3aaffe(0x1c6)](_0x18a788,_0x7e0276){const _0x44fa37=a72_0x3aaffe;var _0x102210,_0x2cbcb3;this['sfLogger']=typedi_1[_0x44fa37(0x199)]['get'](providers_tokens_1[_0x44fa37(0x1d2)][_0x44fa37(0x19f)]),this[_0x44fa37(0x1a5)]=(_0x7e0276?_0x7e0276+'\x20':'')+'['+commit_components_dto_1[_0x44fa37(0x1de)][_0x44fa37(0x176)]+']',await this['sfLogger'][_0x44fa37(0x17c)](this[_0x44fa37(0x1a5)]+'\x20Checking\x20commit\x20components.');const _0x578a12=!!((_0x102210=_0x18a788[_0x44fa37(0x174)])===null||_0x102210===void 0x0?void 0x0:_0x102210[_0x44fa37(0x1ca)])||!!((_0x2cbcb3=_0x18a788[_0x44fa37(0x174)])===null||_0x2cbcb3===void 0x0?void 0x0:_0x2cbcb3[_0x44fa37(0x1cd)]);if(!_0x578a12){await this['sfLogger'][_0x44fa37(0x17c)](this[_0x44fa37(0x1a5)]+'\x20Nothing\x20to\x20commit.\x20Skip.')[_0x44fa37(0x1bb)]();return;}this[_0x44fa37(0x1da)]=_0x18a788,await this[_0x44fa37(0x195)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a72_0x3aaffe(0x18a)])({'transient':!![]})],CommitComponentsJob),exports[a72_0x3aaffe(0x17d)]=CommitComponentsJob;