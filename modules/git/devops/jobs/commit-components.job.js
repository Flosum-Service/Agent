function a73_0x5efe(_0x3fe11c,_0x377dfd){const _0xe8f479=a73_0x8785();return a73_0x5efe=function(_0x2c5d28,_0x3530ab){_0x2c5d28=_0x2c5d28-0xe8;let _0x878518=_0xe8f479[_0x2c5d28];return _0x878518;},a73_0x5efe(_0x3fe11c,_0x377dfd);}const a73_0x55deb5=a73_0x5efe;(function(_0x46dc74,_0x2fc81b){const _0x49cda6=a73_0x5efe,_0x1f8095=_0x46dc74();while(!![]){try{const _0x198ce3=-parseInt(_0x49cda6(0x114))/0x1+-parseInt(_0x49cda6(0x106))/0x2+-parseInt(_0x49cda6(0x153))/0x3*(-parseInt(_0x49cda6(0x108))/0x4)+-parseInt(_0x49cda6(0x157))/0x5*(parseInt(_0x49cda6(0x11b))/0x6)+parseInt(_0x49cda6(0x156))/0x7+-parseInt(_0x49cda6(0x13b))/0x8*(-parseInt(_0x49cda6(0x118))/0x9)+parseInt(_0x49cda6(0xfb))/0xa;if(_0x198ce3===_0x2fc81b)break;else _0x1f8095['push'](_0x1f8095['shift']());}catch(_0xe27cf7){_0x1f8095['push'](_0x1f8095['shift']());}}}(a73_0x8785,0x64c05));const a73_0x3530ab=(function(){let _0x24b40f=!![];return function(_0x330421,_0x2a550e){const _0x4e7f44=_0x24b40f?function(){const _0x517e3a=a73_0x5efe;if(_0x2a550e){const _0x197463=_0x2a550e[_0x517e3a(0x10f)](_0x330421,arguments);return _0x2a550e=null,_0x197463;}}:function(){};return _0x24b40f=![],_0x4e7f44;};}()),a73_0x2c5d28=a73_0x3530ab(this,function(){const _0x1c5ad3=a73_0x5efe;return a73_0x2c5d28[_0x1c5ad3(0x120)]()[_0x1c5ad3(0x124)](_0x1c5ad3(0x151))['toString']()[_0x1c5ad3(0x10d)](a73_0x2c5d28)['search'](_0x1c5ad3(0x151));});a73_0x2c5d28();'use strict';var __createBinding=this&&this[a73_0x55deb5(0x102)]||(Object['create']?function(_0x2258fc,_0x313aa8,_0x5aaeff,_0x5b34c0){const _0x3526d5=a73_0x55deb5;if(_0x5b34c0===undefined)_0x5b34c0=_0x5aaeff;var _0x1386fb=Object[_0x3526d5(0x11c)](_0x313aa8,_0x5aaeff);(!_0x1386fb||(_0x3526d5(0xeb)in _0x1386fb?!_0x313aa8[_0x3526d5(0x13e)]:_0x1386fb[_0x3526d5(0x149)]||_0x1386fb['configurable']))&&(_0x1386fb={'enumerable':!![],'get':function(){return _0x313aa8[_0x5aaeff];}}),Object[_0x3526d5(0x12d)](_0x2258fc,_0x5b34c0,_0x1386fb);}:function(_0x17602c,_0x45ecb8,_0x3cfbfd,_0x5068cf){if(_0x5068cf===undefined)_0x5068cf=_0x3cfbfd;_0x17602c[_0x5068cf]=_0x45ecb8[_0x3cfbfd];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x32d313,_0xffbb1f){const _0x3a7069=a73_0x55deb5;Object[_0x3a7069(0x12d)](_0x32d313,'default',{'enumerable':!![],'value':_0xffbb1f});}:function(_0xbdff31,_0x32c9ed){const _0x313bb5=a73_0x55deb5;_0xbdff31[_0x313bb5(0x146)]=_0x32c9ed;}),__decorate=this&&this[a73_0x55deb5(0x135)]||function(_0x59cdec,_0x472499,_0x2b89b9,_0x5d2d07){const _0x443bd1=a73_0x55deb5;var _0x3b1876=arguments[_0x443bd1(0x129)],_0x592ff7=_0x3b1876<0x3?_0x472499:_0x5d2d07===null?_0x5d2d07=Object[_0x443bd1(0x11c)](_0x472499,_0x2b89b9):_0x5d2d07,_0x2aca66;if(typeof Reflect===_0x443bd1(0x14a)&&typeof Reflect[_0x443bd1(0x13d)]==='function')_0x592ff7=Reflect[_0x443bd1(0x13d)](_0x59cdec,_0x472499,_0x2b89b9,_0x5d2d07);else{for(var _0x584351=_0x59cdec[_0x443bd1(0x129)]-0x1;_0x584351>=0x0;_0x584351--)if(_0x2aca66=_0x59cdec[_0x584351])_0x592ff7=(_0x3b1876<0x3?_0x2aca66(_0x592ff7):_0x3b1876>0x3?_0x2aca66(_0x472499,_0x2b89b9,_0x592ff7):_0x2aca66(_0x472499,_0x2b89b9))||_0x592ff7;}return _0x3b1876>0x3&&_0x592ff7&&Object[_0x443bd1(0x12d)](_0x472499,_0x2b89b9,_0x592ff7),_0x592ff7;},__importStar=this&&this['__importStar']||function(_0xaefcf5){const _0x57a647=a73_0x55deb5;if(_0xaefcf5&&_0xaefcf5['__esModule'])return _0xaefcf5;var _0x15305b={};if(_0xaefcf5!=null){for(var _0x3c1a69 in _0xaefcf5)if(_0x3c1a69!=='default'&&Object[_0x57a647(0xf2)][_0x57a647(0x139)]['call'](_0xaefcf5,_0x3c1a69))__createBinding(_0x15305b,_0xaefcf5,_0x3c1a69);}return __setModuleDefault(_0x15305b,_0xaefcf5),_0x15305b;},__importDefault=this&&this['__importDefault']||function(_0x565feb){const _0x3843ca=a73_0x55deb5;return _0x565feb&&_0x565feb[_0x3843ca(0x13e)]?_0x565feb:{'default':_0x565feb};};Object[a73_0x55deb5(0x12d)](exports,a73_0x55deb5(0x13e),{'value':!![]}),exports[a73_0x55deb5(0x119)]=void 0x0;const commit_components_dto_1=require(a73_0x55deb5(0xee)),events_1=__importDefault(require(a73_0x55deb5(0x12a))),git_utils_1=require(a73_0x55deb5(0x158)),mdapi_utils_1=require(a73_0x55deb5(0x141)),sfdx_utils_1=require(a73_0x55deb5(0x11f)),typedi_1=__importStar(require(a73_0x55deb5(0x144))),child_types_1=__importDefault(require(a73_0x55deb5(0xe9))),utils_1=require(a73_0x55deb5(0x138)),constants_1=require(a73_0x55deb5(0xed)),git_provider_1=require('../../providers/types/git-provider'),bitbucket_api_service_1=require(a73_0x55deb5(0x14d)),sfdx_utils_2=require(a73_0x55deb5(0x115)),fs_internal_1=require(a73_0x55deb5(0x154)),path_1=require(a73_0x55deb5(0x131)),providers_tokens_1=require(a73_0x55deb5(0x107));let CommitComponentsJob=class CommitComponentsJob extends events_1[a73_0x55deb5(0x146)]{constructor(){const _0x2a9df4=a73_0x55deb5;super(...arguments),this[_0x2a9df4(0x112)]=0x3e8,this['componentsToWrite']=0x0,this[_0x2a9df4(0xfd)]=0x0,this['startTime']=Date['now']();}async[a73_0x55deb5(0x12e)](){const _0x58db0b=a73_0x55deb5,{repo:_0x42fdab}=this[_0x58db0b(0x12b)],_0x51eaf9=typedi_1[_0x58db0b(0x146)][_0x58db0b(0xeb)](providers_tokens_1[_0x58db0b(0x13a)][_0x58db0b(0x147)]);if(this['commitData']['provider']===git_provider_1[_0x58db0b(0xf4)]['Bitbucket']){const _0x4bc1ca=typedi_1['default'][_0x58db0b(0xeb)](bitbucket_api_service_1[_0x58db0b(0x14f)]);await _0x4bc1ca['isLoggedIn']();}return _0x42fdab[_0x58db0b(0x10a)][_0x58db0b(0x103)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x58db0b(0x136)])(_0x42fdab['gitUrl'])+'://'+_0x51eaf9[_0x58db0b(0xea)]()+'@');}[a73_0x55deb5(0x143)](_0x3e2928){const _0x3bdf67=a73_0x55deb5;var _0x423845;_0x3e2928[_0x3bdf67(0x13f)](_0x3ba34a=>child_types_1[_0x3bdf67(0x146)][_0x3bdf67(0xf5)](_0x3ba34a[_0x3bdf67(0xe8)])?0x1:-0x1);const _0x16dd63={};for(const _0x5480db of _0x3e2928){_0x16dd63[_0x423845=_0x5480db[_0x3bdf67(0x12c)]]||(_0x16dd63[_0x423845]=[]),_0x16dd63[_0x5480db[_0x3bdf67(0x12c)]][_0x3bdf67(0xf8)](_0x5480db);}return Object[_0x3bdf67(0x127)](_0x16dd63)['reduce']((_0x25e5ec,_0x7ecc9e)=>[..._0x25e5ec,..._0x7ecc9e],[]);}async[a73_0x55deb5(0x140)](_0x3411a){const _0x502ac8=a73_0x55deb5;_0x3411a=this['groupComponentsByFileName'](_0x3411a);let _0x12833c=0x0;while(_0x3411a[_0x502ac8(0x129)]){const _0x28bbdf=_0x3411a[_0x502ac8(0x13c)](0x0,this[_0x502ac8(0x112)]);await this[_0x502ac8(0x11e)][_0x502ac8(0x105)](_0x28bbdf,{'skipChildErrors':this['commitData'][_0x502ac8(0x130)][_0x502ac8(0xff)]===_0x502ac8(0x125)}),_0x12833c+=_0x28bbdf[_0x502ac8(0x129)],this[_0x502ac8(0x14c)][_0x502ac8(0x11d)](this['prefix']+_0x502ac8(0x104)+_0x12833c+'/'+this[_0x502ac8(0xf3)]+_0x502ac8(0x126)),await this[_0x502ac8(0x14c)][_0x502ac8(0x121)]();}}async[a73_0x55deb5(0x109)](_0x5be7d2){const _0x524fba=a73_0x55deb5;_0x5be7d2[_0x524fba(0x13f)](_0x5cecc4=>child_types_1[_0x524fba(0x146)]['includes'](_0x5cecc4['type'])?-0x1:0x1);let _0xb87a08=0x0;while(_0x5be7d2['length']){const _0x185437=_0x5be7d2[_0x524fba(0x13c)](0x0,this[_0x524fba(0x112)]);await this[_0x524fba(0x11e)][_0x524fba(0x109)](_0x185437),_0xb87a08+=_0x185437[_0x524fba(0x129)],this[_0x524fba(0x14c)][_0x524fba(0x11d)](this[_0x524fba(0x134)]+_0x524fba(0x148)+_0xb87a08+'/'+this[_0x524fba(0xfd)]+_0x524fba(0x126)),await this[_0x524fba(0x14c)][_0x524fba(0x121)]();}}async['cleanUp'](){const _0x5dac6f=a73_0x55deb5;this[_0x5dac6f(0x123)]&&await this[_0x5dac6f(0x123)][_0x5dac6f(0x14b)]()[_0x5dac6f(0xef)](()=>void 0x0),this[_0x5dac6f(0x11e)]&&await this[_0x5dac6f(0x11e)][_0x5dac6f(0x14b)]()['catch'](()=>void 0x0),this['sfdxUtils']&&await this[_0x5dac6f(0x110)][_0x5dac6f(0x14b)]()['catch'](()=>void 0x0);}async[a73_0x55deb5(0x113)](){const _0x4bde4c=a73_0x55deb5,{repo:_0x28380b,branch:_0x2c4d08,components:_0x52c983,convertToSFDX:_0x4e5d46,message:_0x53838d,user:_0x3849f9}=this[_0x4bde4c(0x12b)];this[_0x4bde4c(0x11e)]=new mdapi_utils_1[(_0x4bde4c(0x122))](),this[_0x4bde4c(0x123)]=new git_utils_1[(_0x4bde4c(0x133))](await this[_0x4bde4c(0x12e)]()),this[_0x4bde4c(0x110)]=new sfdx_utils_1[(_0x4bde4c(0x137))]();let _0x217648=_0x4e5d46;try{await this['sfLogger']['log'](this[_0x4bde4c(0x134)]+'\x20Start\x20cloning\x20repository.')[_0x4bde4c(0x121)](),await this[_0x4bde4c(0x123)][_0x4bde4c(0x11a)](_0x2c4d08[_0x4bde4c(0xff)],_0x28380b['name']);!this[_0x4bde4c(0x12b)][_0x4bde4c(0xfc)]?(this['sfLogger'][_0x4bde4c(0x11d)](this[_0x4bde4c(0x134)]+_0x4bde4c(0xf6)),await this[_0x4bde4c(0x11e)][_0x4bde4c(0x10e)](this['gitUtils']['dir'])):this[_0x4bde4c(0x14c)][_0x4bde4c(0x11d)](this[_0x4bde4c(0x134)]+_0x4bde4c(0xfe));await this['sfLogger'][_0x4bde4c(0x11d)](this[_0x4bde4c(0x134)]+_0x4bde4c(0x128))['send']();_0x52c983['writed']&&(this[_0x4bde4c(0x14c)][_0x4bde4c(0x11d)](this[_0x4bde4c(0x134)]+_0x4bde4c(0xf0)),this[_0x4bde4c(0xf3)]=_0x52c983[_0x4bde4c(0x145)][_0x4bde4c(0x129)],await this[_0x4bde4c(0x140)](_0x52c983[_0x4bde4c(0x145)]),await this['sfLogger'][_0x4bde4c(0x121)]());await this['sfLogger'][_0x4bde4c(0x11d)](this[_0x4bde4c(0x134)]+_0x4bde4c(0xec))[_0x4bde4c(0x121)]();_0x52c983[_0x4bde4c(0x117)]&&(this[_0x4bde4c(0x14c)][_0x4bde4c(0x11d)](this[_0x4bde4c(0x134)]+'\x20Preparing\x20to\x20delete\x20components'),this[_0x4bde4c(0xfd)]=_0x52c983[_0x4bde4c(0x117)][_0x4bde4c(0x129)],await this['removeComponents'](_0x52c983[_0x4bde4c(0x117)]),await this[_0x4bde4c(0x14c)]['send']());await this[_0x4bde4c(0x14c)]['send']();const _0x9b6bab=await fs_internal_1['FS'][_0x4bde4c(0xfa)](this[_0x4bde4c(0x123)][_0x4bde4c(0x10c)]);await sfdx_utils_2[_0x4bde4c(0xf9)]['isSFDXProject'](this[_0x4bde4c(0x123)][_0x4bde4c(0x10c)])?(_0x217648=!![],await fs_internal_1['FS'][_0x4bde4c(0x14b)]((0x0,path_1['join'])(this[_0x4bde4c(0x123)]['dir'],_0x4bde4c(0x142)))):(_0x217648&&(!_0x9b6bab&&(_0x217648=![])),await this['gitUtils'][_0x4bde4c(0x150)]());_0x217648?(await this[_0x4bde4c(0x14c)][_0x4bde4c(0x11d)](this['prefix']+'\x20Start\x20converting\x20to\x20SFDX.')['send'](),await this[_0x4bde4c(0x110)]['createProjectFrom'](this[_0x4bde4c(0x11e)]['dir']),await this[_0x4bde4c(0x110)]['copyProjectTo'](this['gitUtils'][_0x4bde4c(0x10c)],!_0x9b6bab),await this[_0x4bde4c(0x110)][_0x4bde4c(0x14b)]()):(await this[_0x4bde4c(0x14c)][_0x4bde4c(0x11d)](this['prefix']+_0x4bde4c(0x101))[_0x4bde4c(0x121)](),await this[_0x4bde4c(0x11e)][_0x4bde4c(0x12f)](this[_0x4bde4c(0x123)][_0x4bde4c(0x10c)]));await this[_0x4bde4c(0x14c)][_0x4bde4c(0x11d)](this[_0x4bde4c(0x134)]+_0x4bde4c(0x14e))[_0x4bde4c(0x121)](),await this['gitUtils'][_0x4bde4c(0x100)](_0x53838d,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x3849f9[_0x4bde4c(0xff)]},_0x2c4d08[_0x4bde4c(0xff)]),await this[_0x4bde4c(0x123)][_0x4bde4c(0x14b)](),await this[_0x4bde4c(0x11e)][_0x4bde4c(0x14b)]();const _0x309593=this[_0x4bde4c(0xf3)]+this['componentsToDelete'];await this['sfLogger'][_0x4bde4c(0x11d)](this[_0x4bde4c(0x134)]+_0x4bde4c(0xf7)+(Date['now']()-this[_0x4bde4c(0x10b)])+'ms.\x20Committed\x20components\x20-\x20'+_0x309593+'.')[_0x4bde4c(0x121)]();}catch(_0x396777){await this['cleanUp'](),await this['sfLogger'][_0x4bde4c(0x155)](this[_0x4bde4c(0x134)]+'\x20'+_0x396777)[_0x4bde4c(0x121)]();throw _0x396777;}}async[a73_0x55deb5(0x132)](_0x1b8c33,_0x4019c6){const _0x16590e=a73_0x55deb5;var _0x1ec777,_0x1e65d4;this['sfLogger']=typedi_1[_0x16590e(0x146)][_0x16590e(0xeb)](providers_tokens_1[_0x16590e(0x13a)][_0x16590e(0xf1)]),this['prefix']=(_0x4019c6?_0x4019c6+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x16590e(0xff)]+']',await this[_0x16590e(0x14c)][_0x16590e(0x11d)](this[_0x16590e(0x134)]+_0x16590e(0x111));const _0x64a6ad=!!((_0x1ec777=_0x1b8c33[_0x16590e(0x152)])===null||_0x1ec777===void 0x0?void 0x0:_0x1ec777['writed'])||!!((_0x1e65d4=_0x1b8c33[_0x16590e(0x152)])===null||_0x1e65d4===void 0x0?void 0x0:_0x1e65d4['deleted']);if(!_0x64a6ad){await this[_0x16590e(0x14c)][_0x16590e(0x11d)](this[_0x16590e(0x134)]+'\x20Nothing\x20to\x20commit.\x20Skip.')[_0x16590e(0x121)]();return;}this[_0x16590e(0x12b)]=_0x1b8c33,await this[_0x16590e(0x113)]();}};function a73_0x8785(){const _0x4ff22c=['116664lsFCLG','removeComponents','gitUrl','startTime','dir','constructor','prepareMdapi','apply','sfdxUtils','\x20Checking\x20commit\x20components.','COMPONENTS_PER_TICK','exec','476465jWvwqZ','../../salesforce/utils/sfdx.utils','Service','deleted','15372xJhsfZ','CommitComponentsJob','clone','6dMHRZE','getOwnPropertyDescriptor','log','mdapiUtils','../utils/sfdx.utils','toString','send','MDApiUtils','gitUtils','search','master','\x20components','values','\x20Checking\x20written\x20components.','length','events','commitData','fileName','defineProperty','getRemote','copyMdapiTo','branch','path','run','GitUtils','prefix','__decorate','getProtocol','SFDXUtils','../../../shared/utils','hasOwnProperty','Tokens','584zMGAIv','splice','decorate','__esModule','sort','writeComponents','../utils/mdapi.utils','force-app','groupComponentsByFileName','typedi','writed','default','credentials','\x20Deleted\x20','writable','object','removeDir','sfLogger','../../providers/api/bitbucket-api.service','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','BitbucketApiService','clearDir','(((.+)+)+)+$','components','12UFMEnY','../../internal/fs.internal','error','1031695tBYEMs','2817635DrmPsW','../utils/git.utils','fileType','../../parsers/data/child-types','getGitShellAuthorizationString','get','\x20Checking\x20deleted\x20components.','../../../../constants','../dto/commit-components.dto','catch','\x20Preparing\x20to\x20write\x20components','logger','prototype','componentsToWrite','GitProvider','includes','\x20Prepare\x20mdapi\x20files.','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','push','SFDX','isEmptyDir','14366480bFhaCG','force','componentsToDelete','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','name','commitAndPush','\x20Copying\x20mdapi\x20to\x20git\x20folder.','__createBinding','replace','\x20Wrote\x20','writeFlosumComponents','745424PpRFCd','../../providers/providers.tokens'];a73_0x8785=function(){return _0x4ff22c;};return a73_0x8785();}CommitComponentsJob=__decorate([(0x0,typedi_1[a73_0x55deb5(0x116)])({'transient':!![]})],CommitComponentsJob),exports[a73_0x55deb5(0x119)]=CommitComponentsJob;