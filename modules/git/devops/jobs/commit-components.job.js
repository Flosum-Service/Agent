const a73_0x5708bb=a73_0x2483;(function(_0x4d9df9,_0x3e8b80){const _0x350a78=a73_0x2483,_0x1f238c=_0x4d9df9();while(!![]){try{const _0x250e26=parseInt(_0x350a78(0x1cb))/0x1+-parseInt(_0x350a78(0x1a6))/0x2+parseInt(_0x350a78(0x1d1))/0x3*(parseInt(_0x350a78(0x1b4))/0x4)+-parseInt(_0x350a78(0x1f2))/0x5*(-parseInt(_0x350a78(0x1ed))/0x6)+parseInt(_0x350a78(0x1ce))/0x7*(parseInt(_0x350a78(0x197))/0x8)+-parseInt(_0x350a78(0x1b3))/0x9+-parseInt(_0x350a78(0x1aa))/0xa*(-parseInt(_0x350a78(0x193))/0xb);if(_0x250e26===_0x3e8b80)break;else _0x1f238c['push'](_0x1f238c['shift']());}catch(_0x1774cf){_0x1f238c['push'](_0x1f238c['shift']());}}}(a73_0x40f0,0x47c3a));const a73_0x18b014=(function(){let _0x1c1c51=!![];return function(_0xdd7833,_0x10869a){const _0x41b582=_0x1c1c51?function(){const _0x5a705d=a73_0x2483;if(_0x10869a){const _0x45cee8=_0x10869a[_0x5a705d(0x195)](_0xdd7833,arguments);return _0x10869a=null,_0x45cee8;}}:function(){};return _0x1c1c51=![],_0x41b582;};}()),a73_0x3276d1=a73_0x18b014(this,function(){const _0x3e5d30=a73_0x2483;return a73_0x3276d1[_0x3e5d30(0x1b2)]()[_0x3e5d30(0x1e3)](_0x3e5d30(0x1a0))[_0x3e5d30(0x1b2)]()[_0x3e5d30(0x1bf)](a73_0x3276d1)[_0x3e5d30(0x1e3)](_0x3e5d30(0x1a0));});a73_0x3276d1();'use strict';var __createBinding=this&&this[a73_0x5708bb(0x1ea)]||(Object['create']?function(_0x172876,_0x1f9f1e,_0x2143b4,_0x3d73a5){const _0x48066d=a73_0x5708bb;if(_0x3d73a5===undefined)_0x3d73a5=_0x2143b4;var _0x52eae2=Object[_0x48066d(0x1ad)](_0x1f9f1e,_0x2143b4);(!_0x52eae2||('get'in _0x52eae2?!_0x1f9f1e['__esModule']:_0x52eae2[_0x48066d(0x1eb)]||_0x52eae2[_0x48066d(0x1c2)]))&&(_0x52eae2={'enumerable':!![],'get':function(){return _0x1f9f1e[_0x2143b4];}}),Object[_0x48066d(0x1be)](_0x172876,_0x3d73a5,_0x52eae2);}:function(_0x3d1cbc,_0x4c9d79,_0x11719f,_0x2fb935){if(_0x2fb935===undefined)_0x2fb935=_0x11719f;_0x3d1cbc[_0x2fb935]=_0x4c9d79[_0x11719f];}),__setModuleDefault=this&&this[a73_0x5708bb(0x18e)]||(Object[a73_0x5708bb(0x1b1)]?function(_0x19f3c1,_0x57d6d7){const _0x573ec5=a73_0x5708bb;Object[_0x573ec5(0x1be)](_0x19f3c1,_0x573ec5(0x1f7),{'enumerable':!![],'value':_0x57d6d7});}:function(_0x32a6a1,_0x303846){const _0x134807=a73_0x5708bb;_0x32a6a1[_0x134807(0x1f7)]=_0x303846;}),__decorate=this&&this['__decorate']||function(_0x55a84e,_0x498781,_0x9eda01,_0x16fb50){const _0x17c584=a73_0x5708bb;var _0x426544=arguments['length'],_0x15b950=_0x426544<0x3?_0x498781:_0x16fb50===null?_0x16fb50=Object[_0x17c584(0x1ad)](_0x498781,_0x9eda01):_0x16fb50,_0x2566c8;if(typeof Reflect===_0x17c584(0x1f9)&&typeof Reflect['decorate']===_0x17c584(0x1bd))_0x15b950=Reflect[_0x17c584(0x1e2)](_0x55a84e,_0x498781,_0x9eda01,_0x16fb50);else{for(var _0x10cd6e=_0x55a84e[_0x17c584(0x1d3)]-0x1;_0x10cd6e>=0x0;_0x10cd6e--)if(_0x2566c8=_0x55a84e[_0x10cd6e])_0x15b950=(_0x426544<0x3?_0x2566c8(_0x15b950):_0x426544>0x3?_0x2566c8(_0x498781,_0x9eda01,_0x15b950):_0x2566c8(_0x498781,_0x9eda01))||_0x15b950;}return _0x426544>0x3&&_0x15b950&&Object[_0x17c584(0x1be)](_0x498781,_0x9eda01,_0x15b950),_0x15b950;},__importStar=this&&this[a73_0x5708bb(0x1cf)]||function(_0x193072){const _0x5e8509=a73_0x5708bb;if(_0x193072&&_0x193072[_0x5e8509(0x19e)])return _0x193072;var _0x27b365={};if(_0x193072!=null){for(var _0x1d5f6a in _0x193072)if(_0x1d5f6a!==_0x5e8509(0x1f7)&&Object[_0x5e8509(0x1ac)][_0x5e8509(0x1c7)][_0x5e8509(0x1f4)](_0x193072,_0x1d5f6a))__createBinding(_0x27b365,_0x193072,_0x1d5f6a);}return __setModuleDefault(_0x27b365,_0x193072),_0x27b365;},__importDefault=this&&this[a73_0x5708bb(0x1af)]||function(_0x31c2f1){const _0x5dbc4d=a73_0x5708bb;return _0x31c2f1&&_0x31c2f1[_0x5dbc4d(0x19e)]?_0x31c2f1:{'default':_0x31c2f1};};Object[a73_0x5708bb(0x1be)](exports,a73_0x5708bb(0x19e),{'value':!![]}),exports[a73_0x5708bb(0x1c5)]=void 0x0;const commit_components_dto_1=require(a73_0x5708bb(0x1d7)),events_1=__importDefault(require(a73_0x5708bb(0x1fa))),git_utils_1=require(a73_0x5708bb(0x1b5)),mdapi_utils_1=require(a73_0x5708bb(0x1d8)),sfdx_utils_1=require(a73_0x5708bb(0x19c)),typedi_1=__importStar(require(a73_0x5708bb(0x1f5))),child_types_1=__importDefault(require(a73_0x5708bb(0x1d4))),utils_1=require(a73_0x5708bb(0x1e6)),constants_1=require(a73_0x5708bb(0x1d9)),git_provider_1=require('../../providers/types/git-provider'),bitbucket_api_service_1=require(a73_0x5708bb(0x1b0)),sfdx_utils_2=require(a73_0x5708bb(0x1a8)),fs_internal_1=require(a73_0x5708bb(0x1b8)),path_1=require(a73_0x5708bb(0x1df)),providers_tokens_1=require('../../providers/providers.tokens');function a73_0x2483(_0x243210,_0x161c28){const _0x3d785c=a73_0x40f0();return a73_0x2483=function(_0x3276d1,_0x18b014){_0x3276d1=_0x3276d1-0x18e;let _0x40f009=_0x3d785c[_0x3276d1];return _0x40f009;},a73_0x2483(_0x243210,_0x161c28);}let CommitComponentsJob=class CommitComponentsJob extends events_1[a73_0x5708bb(0x1f7)]{constructor(){const _0x376c57=a73_0x5708bb;super(...arguments),this[_0x376c57(0x1c0)]=0x3e8,this['componentsToWrite']=0x0,this[_0x376c57(0x1e0)]=0x0,this[_0x376c57(0x1b6)]=Date[_0x376c57(0x1ee)]();}async[a73_0x5708bb(0x1f1)](){const _0x311097=a73_0x5708bb,{repo:_0x49cc3a}=this[_0x311097(0x1a1)],_0x1e80f8=typedi_1[_0x311097(0x1f7)][_0x311097(0x1dd)](providers_tokens_1['Tokens']['credentials']);if(this[_0x311097(0x1a1)]['provider']===git_provider_1['GitProvider']['Bitbucket']){const _0x52f0e0=typedi_1[_0x311097(0x1f7)][_0x311097(0x1dd)](bitbucket_api_service_1[_0x311097(0x19f)]);await _0x52f0e0['isLoggedIn']();}return _0x49cc3a[_0x311097(0x1ba)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x311097(0x1f3)])(_0x49cc3a[_0x311097(0x1ba)])+_0x311097(0x1f8)+_0x1e80f8[_0x311097(0x1c6)]()+'@');}[a73_0x5708bb(0x1a4)](_0xe72c37){const _0x658958=a73_0x5708bb;var _0x4760f9;_0xe72c37[_0x658958(0x1e7)](_0x64d71=>child_types_1[_0x658958(0x1f7)][_0x658958(0x194)](_0x64d71['fileType'])?0x1:-0x1);const _0x2c9a8e={};for(const _0x59e5d2 of _0xe72c37){_0x2c9a8e[_0x4760f9=_0x59e5d2['fileName']]||(_0x2c9a8e[_0x4760f9]=[]),_0x2c9a8e[_0x59e5d2['fileName']][_0x658958(0x1fd)](_0x59e5d2);}return Object[_0x658958(0x1a3)](_0x2c9a8e)['reduce']((_0x3e0fd0,_0x5b8eff)=>[..._0x3e0fd0,..._0x5b8eff],[]);}async[a73_0x5708bb(0x1ae)](_0xd881ac){const _0x4a5ebd=a73_0x5708bb;_0xd881ac=this[_0x4a5ebd(0x1a4)](_0xd881ac);let _0x2ae6ba=0x0;while(_0xd881ac['length']){const _0x9d50f0=_0xd881ac[_0x4a5ebd(0x1ec)](0x0,this[_0x4a5ebd(0x1c0)]);await this[_0x4a5ebd(0x1fb)][_0x4a5ebd(0x1fe)](_0x9d50f0,{'skipChildErrors':this[_0x4a5ebd(0x1a1)][_0x4a5ebd(0x1d5)][_0x4a5ebd(0x1cc)]===_0x4a5ebd(0x19d)}),_0x2ae6ba+=_0x9d50f0['length'],this[_0x4a5ebd(0x1a2)]['log'](this['prefix']+'\x20Wrote\x20'+_0x2ae6ba+'/'+this[_0x4a5ebd(0x190)]+_0x4a5ebd(0x1d6)),await this[_0x4a5ebd(0x1a2)]['send']();}}async[a73_0x5708bb(0x18f)](_0x141b58){const _0x1169e2=a73_0x5708bb;_0x141b58['sort'](_0x15757d=>child_types_1[_0x1169e2(0x1f7)]['includes'](_0x15757d[_0x1169e2(0x1e9)])?-0x1:0x1);let _0x4aa737=0x0;while(_0x141b58['length']){const _0x15304e=_0x141b58[_0x1169e2(0x1ec)](0x0,this[_0x1169e2(0x1c0)]);await this['mdapiUtils']['removeComponents'](_0x15304e),_0x4aa737+=_0x15304e[_0x1169e2(0x1d3)],this[_0x1169e2(0x1a2)][_0x1169e2(0x1a5)](this[_0x1169e2(0x1cd)]+_0x1169e2(0x1e1)+_0x4aa737+'/'+this[_0x1169e2(0x1e0)]+_0x1169e2(0x1d6)),await this[_0x1169e2(0x1a2)][_0x1169e2(0x1b9)]();}}async[a73_0x5708bb(0x1a7)](){const _0x23f39f=a73_0x5708bb;this[_0x23f39f(0x1f0)]&&await this[_0x23f39f(0x1f0)][_0x23f39f(0x1fc)]()[_0x23f39f(0x1d2)](()=>void 0x0),this[_0x23f39f(0x1fb)]&&await this[_0x23f39f(0x1fb)]['removeDir']()[_0x23f39f(0x1d2)](()=>void 0x0),this[_0x23f39f(0x19a)]&&await this[_0x23f39f(0x19a)]['removeDir']()[_0x23f39f(0x1d2)](()=>void 0x0);}async[a73_0x5708bb(0x1f6)](){const _0x7fe23=a73_0x5708bb,{repo:_0x2b2a22,branch:_0x4cadc6,components:_0x36c95a,convertToSFDX:_0x541c7a,message:_0x576210,user:_0x2ec936}=this[_0x7fe23(0x1a1)];this[_0x7fe23(0x1fb)]=new mdapi_utils_1['MDApiUtils'](),this['gitUtils']=new git_utils_1[(_0x7fe23(0x1e4))](await this[_0x7fe23(0x1f1)]()),this[_0x7fe23(0x19a)]=new sfdx_utils_1['SFDXUtils']();let _0x423ef5=_0x541c7a;try{await this[_0x7fe23(0x1a2)]['log'](this[_0x7fe23(0x1cd)]+_0x7fe23(0x1de))[_0x7fe23(0x1b9)](),await this[_0x7fe23(0x1f0)]['clone'](_0x4cadc6[_0x7fe23(0x1cc)],_0x2b2a22[_0x7fe23(0x1cc)]);!this[_0x7fe23(0x1a1)][_0x7fe23(0x1c8)]?(this[_0x7fe23(0x1a2)][_0x7fe23(0x1a5)](this[_0x7fe23(0x1cd)]+'\x20Prepare\x20mdapi\x20files.'),await this[_0x7fe23(0x1fb)][_0x7fe23(0x196)](this[_0x7fe23(0x1f0)][_0x7fe23(0x1a9)])):this[_0x7fe23(0x1a2)]['log'](this[_0x7fe23(0x1cd)]+_0x7fe23(0x1da));await this[_0x7fe23(0x1a2)][_0x7fe23(0x1a5)](this[_0x7fe23(0x1cd)]+_0x7fe23(0x1dc))[_0x7fe23(0x1b9)]();_0x36c95a[_0x7fe23(0x1c4)]&&(this[_0x7fe23(0x1a2)][_0x7fe23(0x1a5)](this[_0x7fe23(0x1cd)]+_0x7fe23(0x1e8)),this[_0x7fe23(0x190)]=_0x36c95a[_0x7fe23(0x1c4)][_0x7fe23(0x1d3)],await this[_0x7fe23(0x1ae)](_0x36c95a['writed']),await this[_0x7fe23(0x1a2)][_0x7fe23(0x1b9)]());await this['sfLogger'][_0x7fe23(0x1a5)](this[_0x7fe23(0x1cd)]+_0x7fe23(0x19b))[_0x7fe23(0x1b9)]();_0x36c95a[_0x7fe23(0x1c3)]&&(this[_0x7fe23(0x1a2)]['log'](this[_0x7fe23(0x1cd)]+_0x7fe23(0x1bc)),this['componentsToDelete']=_0x36c95a[_0x7fe23(0x1c3)][_0x7fe23(0x1d3)],await this[_0x7fe23(0x18f)](_0x36c95a[_0x7fe23(0x1c3)]),await this['sfLogger']['send']());await this[_0x7fe23(0x1a2)][_0x7fe23(0x1b9)]();const _0x5747bb=await fs_internal_1['FS'][_0x7fe23(0x1b7)](this[_0x7fe23(0x1f0)]['dir']);await sfdx_utils_2[_0x7fe23(0x1db)][_0x7fe23(0x1ab)](this[_0x7fe23(0x1f0)]['dir'])?(_0x423ef5=!![],await fs_internal_1['FS']['removeDir']((0x0,path_1[_0x7fe23(0x192)])(this['gitUtils'][_0x7fe23(0x1a9)],'force-app'))):(_0x423ef5&&(!_0x5747bb&&(_0x423ef5=![])),await this[_0x7fe23(0x1f0)]['clearDir']());_0x423ef5?(await this[_0x7fe23(0x1a2)]['log'](this['prefix']+_0x7fe23(0x1bb))[_0x7fe23(0x1b9)](),await this[_0x7fe23(0x19a)]['createProjectFrom'](this[_0x7fe23(0x1fb)][_0x7fe23(0x1a9)]),await this[_0x7fe23(0x19a)][_0x7fe23(0x191)](this[_0x7fe23(0x1f0)][_0x7fe23(0x1a9)],!_0x5747bb),await this[_0x7fe23(0x19a)][_0x7fe23(0x1fc)]()):(await this[_0x7fe23(0x1a2)][_0x7fe23(0x1a5)](this[_0x7fe23(0x1cd)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x7fe23(0x1b9)](),await this['mdapiUtils']['copyMdapiTo'](this[_0x7fe23(0x1f0)][_0x7fe23(0x1a9)]));await this[_0x7fe23(0x1a2)][_0x7fe23(0x1a5)](this['prefix']+_0x7fe23(0x1e5))[_0x7fe23(0x1b9)](),await this['gitUtils']['commitAndPush'](_0x576210,{'email':constants_1[_0x7fe23(0x199)],'name':_0x2ec936[_0x7fe23(0x1cc)]},_0x4cadc6[_0x7fe23(0x1cc)]),await this[_0x7fe23(0x1f0)]['removeDir'](),await this['mdapiUtils'][_0x7fe23(0x1fc)]();const _0x4c2f5e=this[_0x7fe23(0x190)]+this[_0x7fe23(0x1e0)];await this[_0x7fe23(0x1a2)][_0x7fe23(0x1a5)](this[_0x7fe23(0x1cd)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x7fe23(0x1ee)]()-this[_0x7fe23(0x1b6)])+'ms.\x20Committed\x20components\x20-\x20'+_0x4c2f5e+'.')[_0x7fe23(0x1b9)]();}catch(_0x3b2033){await this[_0x7fe23(0x1a7)](),await this[_0x7fe23(0x1a2)][_0x7fe23(0x1d0)](this[_0x7fe23(0x1cd)]+'\x20'+_0x3b2033)[_0x7fe23(0x1b9)]();throw _0x3b2033;}}async[a73_0x5708bb(0x198)](_0x19b521,_0x527f7f){const _0x3e4c72=a73_0x5708bb;var _0x31062b,_0x4e116d;this[_0x3e4c72(0x1a2)]=typedi_1[_0x3e4c72(0x1f7)]['get'](providers_tokens_1[_0x3e4c72(0x1c9)]['logger']),this['prefix']=(_0x527f7f?_0x527f7f+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x3e4c72(0x1cc)]+']',await this[_0x3e4c72(0x1a2)][_0x3e4c72(0x1a5)](this[_0x3e4c72(0x1cd)]+_0x3e4c72(0x1ca));const _0x7af32e=!!((_0x31062b=_0x19b521[_0x3e4c72(0x1ef)])===null||_0x31062b===void 0x0?void 0x0:_0x31062b[_0x3e4c72(0x1c4)])||!!((_0x4e116d=_0x19b521[_0x3e4c72(0x1ef)])===null||_0x4e116d===void 0x0?void 0x0:_0x4e116d['deleted']);if(!_0x7af32e){await this[_0x3e4c72(0x1a2)][_0x3e4c72(0x1a5)](this[_0x3e4c72(0x1cd)]+_0x3e4c72(0x1c1))[_0x3e4c72(0x1b9)]();return;}this[_0x3e4c72(0x1a1)]=_0x19b521,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]})],CommitComponentsJob),exports[a73_0x5708bb(0x1c5)]=CommitComponentsJob;function a73_0x40f0(){const _0x260b03=['hasOwnProperty','force','Tokens','\x20Checking\x20commit\x20components.','457709fbNKYU','name','prefix','21vvEVcn','__importStar','error','9ZdMSBb','catch','length','../../parsers/data/child-types','branch','\x20components','../dto/commit-components.dto','../utils/mdapi.utils','../../../../constants','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','SFDX','\x20Checking\x20written\x20components.','get','\x20Start\x20cloning\x20repository.','path','componentsToDelete','\x20Deleted\x20','decorate','search','GitUtils','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','../../../shared/utils','sort','\x20Preparing\x20to\x20write\x20components','type','__createBinding','writable','splice','1140ZfYaru','now','components','gitUtils','getRemote','9865ODJilc','getProtocol','call','typedi','exec','default','://','object','events','mdapiUtils','removeDir','push','writeFlosumComponents','__setModuleDefault','removeComponents','componentsToWrite','copyProjectTo','join','3978524SVSfOc','includes','apply','prepareMdapi','517976SxqHrc','run','DEFAULT_GIT_USER_EMAIL','sfdxUtils','\x20Checking\x20deleted\x20components.','../utils/sfdx.utils','master','__esModule','BitbucketApiService','(((.+)+)+)+$','commitData','sfLogger','values','groupComponentsByFileName','log','1132066gBiZqb','cleanUp','../../salesforce/utils/sfdx.utils','dir','10dAqbIl','isSFDXProject','prototype','getOwnPropertyDescriptor','writeComponents','__importDefault','../../providers/api/bitbucket-api.service','create','toString','5126355fAnXcC','54760lKwGGr','../utils/git.utils','startTime','isEmptyDir','../../internal/fs.internal','send','gitUrl','\x20Start\x20converting\x20to\x20SFDX.','\x20Preparing\x20to\x20delete\x20components','function','defineProperty','constructor','COMPONENTS_PER_TICK','\x20Nothing\x20to\x20commit.\x20Skip.','configurable','deleted','writed','CommitComponentsJob','getGitShellAuthorizationString'];a73_0x40f0=function(){return _0x260b03;};return a73_0x40f0();}