const a123_0x3a6c49=a123_0x4219;(function(_0x2b1e2e,_0x363d5e){const _0x233c03=a123_0x4219,_0x21a832=_0x2b1e2e();while(!![]){try{const _0x2829d1=parseInt(_0x233c03(0x15e))/0x1*(-parseInt(_0x233c03(0x19e))/0x2)+-parseInt(_0x233c03(0x161))/0x3*(parseInt(_0x233c03(0x186))/0x4)+-parseInt(_0x233c03(0x1b7))/0x5*(parseInt(_0x233c03(0x17b))/0x6)+parseInt(_0x233c03(0x1b1))/0x7*(-parseInt(_0x233c03(0x139))/0x8)+-parseInt(_0x233c03(0x173))/0x9*(-parseInt(_0x233c03(0x182))/0xa)+parseInt(_0x233c03(0x178))/0xb*(-parseInt(_0x233c03(0x196))/0xc)+parseInt(_0x233c03(0x1a7))/0xd;if(_0x2829d1===_0x363d5e)break;else _0x21a832['push'](_0x21a832['shift']());}catch(_0x46615a){_0x21a832['push'](_0x21a832['shift']());}}}(a123_0x5543,0x67394));const a123_0x3c1626=(function(){let _0x5d366=!![];return function(_0x18d714,_0x4e094a){const _0xd3d98c=_0x5d366?function(){const _0xfcc76a=a123_0x4219;if(_0x4e094a){const _0x3715d6=_0x4e094a[_0xfcc76a(0x175)](_0x18d714,arguments);return _0x4e094a=null,_0x3715d6;}}:function(){};return _0x5d366=![],_0xd3d98c;};}()),a123_0x4bae6e=a123_0x3c1626(this,function(){const _0x167c18=a123_0x4219;return a123_0x4bae6e['toString']()[_0x167c18(0x170)](_0x167c18(0x1b6))[_0x167c18(0x18c)]()[_0x167c18(0x1ae)](a123_0x4bae6e)[_0x167c18(0x170)](_0x167c18(0x1b6));});a123_0x4bae6e();'use strict';var __createBinding=this&&this[a123_0x3a6c49(0x141)]||(Object['create']?function(_0x29d535,_0x5ade64,_0x508d33,_0x55a8dd){const _0x1e861b=a123_0x3a6c49;if(_0x55a8dd===undefined)_0x55a8dd=_0x508d33;var _0x351101=Object['getOwnPropertyDescriptor'](_0x5ade64,_0x508d33);(!_0x351101||(_0x1e861b(0x1a5)in _0x351101?!_0x5ade64['__esModule']:_0x351101[_0x1e861b(0x16e)]||_0x351101[_0x1e861b(0x17d)]))&&(_0x351101={'enumerable':!![],'get':function(){return _0x5ade64[_0x508d33];}}),Object[_0x1e861b(0x153)](_0x29d535,_0x55a8dd,_0x351101);}:function(_0x13a1b6,_0x21a05b,_0x2e99e0,_0x5180b4){if(_0x5180b4===undefined)_0x5180b4=_0x2e99e0;_0x13a1b6[_0x5180b4]=_0x21a05b[_0x2e99e0];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a123_0x3a6c49(0x180)]?function(_0x2d6a36,_0x196657){const _0x1dda77=a123_0x3a6c49;Object[_0x1dda77(0x153)](_0x2d6a36,'default',{'enumerable':!![],'value':_0x196657});}:function(_0x2de8ba,_0x2a3bfc){const _0x256758=a123_0x3a6c49;_0x2de8ba[_0x256758(0x1a2)]=_0x2a3bfc;}),__decorate=this&&this[a123_0x3a6c49(0x1b3)]||function(_0x3520c9,_0x30212e,_0xeb1751,_0xdc0093){const _0x33b3e1=a123_0x3a6c49;var _0x1b2b03=arguments['length'],_0x2452de=_0x1b2b03<0x3?_0x30212e:_0xdc0093===null?_0xdc0093=Object[_0x33b3e1(0x17a)](_0x30212e,_0xeb1751):_0xdc0093,_0x23eff7;if(typeof Reflect===_0x33b3e1(0x174)&&typeof Reflect[_0x33b3e1(0x15b)]===_0x33b3e1(0x1ac))_0x2452de=Reflect[_0x33b3e1(0x15b)](_0x3520c9,_0x30212e,_0xeb1751,_0xdc0093);else{for(var _0x44d082=_0x3520c9[_0x33b3e1(0x16f)]-0x1;_0x44d082>=0x0;_0x44d082--)if(_0x23eff7=_0x3520c9[_0x44d082])_0x2452de=(_0x1b2b03<0x3?_0x23eff7(_0x2452de):_0x1b2b03>0x3?_0x23eff7(_0x30212e,_0xeb1751,_0x2452de):_0x23eff7(_0x30212e,_0xeb1751))||_0x2452de;}return _0x1b2b03>0x3&&_0x2452de&&Object['defineProperty'](_0x30212e,_0xeb1751,_0x2452de),_0x2452de;},__importStar=this&&this[a123_0x3a6c49(0x189)]||function(_0x225ae2){const _0x26d0d6=a123_0x3a6c49;if(_0x225ae2&&_0x225ae2[_0x26d0d6(0x183)])return _0x225ae2;var _0x22d985={};if(_0x225ae2!=null){for(var _0x5addbb in _0x225ae2)if(_0x5addbb!=='default'&&Object['prototype'][_0x26d0d6(0x144)][_0x26d0d6(0x1ad)](_0x225ae2,_0x5addbb))__createBinding(_0x22d985,_0x225ae2,_0x5addbb);}return __setModuleDefault(_0x22d985,_0x225ae2),_0x22d985;},__importDefault=this&&this[a123_0x3a6c49(0x13b)]||function(_0x17e255){const _0x33ad3f=a123_0x3a6c49;return _0x17e255&&_0x17e255[_0x33ad3f(0x183)]?_0x17e255:{'default':_0x17e255};};Object[a123_0x3a6c49(0x153)](exports,a123_0x3a6c49(0x183),{'value':!![]}),exports[a123_0x3a6c49(0x198)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a123_0x3a6c49(0x145))),git_utils_1=require(a123_0x3a6c49(0x169)),mdapi_utils_1=require(a123_0x3a6c49(0x1b5)),sfdx_utils_1=require(a123_0x3a6c49(0x1a4)),typedi_1=__importStar(require(a123_0x3a6c49(0x172))),child_types_1=__importDefault(require(a123_0x3a6c49(0x16d))),utils_1=require(a123_0x3a6c49(0x191)),constants_1=require(a123_0x3a6c49(0x15a)),git_provider_1=require('../../providers/types/git-provider'),bitbucket_api_service_1=require(a123_0x3a6c49(0x151)),sfdx_utils_2=require(a123_0x3a6c49(0x152)),fs_internal_1=require('../../internal/fs.internal'),path_1=require('path'),providers_tokens_1=require(a123_0x3a6c49(0x154)),constants_2=require('../../../../constants');let CommitComponentsJob=class CommitComponentsJob extends events_1[a123_0x3a6c49(0x1a2)]{constructor(){const _0x357d51=a123_0x3a6c49;super(...arguments),this[_0x357d51(0x18e)]=0x3e8,this['componentsToWrite']=0x0,this[_0x357d51(0x147)]=0x0,this[_0x357d51(0x1b2)]=Date['now']();}async['getRemote'](){const _0x4189da=a123_0x3a6c49,{repo:_0x336551}=this['commitData'],_0x9072c2=typedi_1[_0x4189da(0x1a2)][_0x4189da(0x1a5)](providers_tokens_1[_0x4189da(0x146)][_0x4189da(0x18f)]);if(this[_0x4189da(0x1a6)][_0x4189da(0x17e)]===git_provider_1['GitProvider'][_0x4189da(0x1ab)]){const _0x267ae7=typedi_1[_0x4189da(0x1a2)][_0x4189da(0x1a5)](bitbucket_api_service_1['BitbucketApiService']);await _0x267ae7[_0x4189da(0x19c)]();}return _0x336551[_0x4189da(0x166)][_0x4189da(0x164)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x4189da(0x1a0)])(_0x336551[_0x4189da(0x166)])+_0x4189da(0x13a)+_0x9072c2[_0x4189da(0x199)]()+'@');}[a123_0x3a6c49(0x14a)](_0x57791f){const _0x43ace7=a123_0x3a6c49;var _0x107855;_0x57791f[_0x43ace7(0x181)](_0x3a06eb=>child_types_1[_0x43ace7(0x1a2)][_0x43ace7(0x14e)](_0x3a06eb['fileType'])?0x1:-0x1);const _0x49eb18={};for(const _0x424a8e of _0x57791f){_0x49eb18[_0x107855=_0x424a8e[_0x43ace7(0x1b8)]]||(_0x49eb18[_0x107855]=[]),_0x49eb18[_0x424a8e['fileName']][_0x43ace7(0x1af)](_0x424a8e);}return Object[_0x43ace7(0x1a1)](_0x49eb18)['reduce']((_0x3df004,_0x23f631)=>[..._0x3df004,..._0x23f631],[]);}async[a123_0x3a6c49(0x14b)](_0x399c60){const _0x3cbc0a=a123_0x3a6c49;_0x399c60=this[_0x3cbc0a(0x14a)](_0x399c60);let _0x43e3e8=0x0;while(_0x399c60['length']){const _0x29e35c=_0x399c60[_0x3cbc0a(0x1b4)](0x0,this[_0x3cbc0a(0x18e)]);await this[_0x3cbc0a(0x17c)]['writeFlosumComponents'](_0x29e35c,{'skipChildErrors':this[_0x3cbc0a(0x1a6)]['branch'][_0x3cbc0a(0x171)]===_0x3cbc0a(0x138),'recordType':this['commitData'][_0x3cbc0a(0x140)]}),_0x43e3e8+=_0x29e35c[_0x3cbc0a(0x16f)],this['sfLogger'][_0x3cbc0a(0x19a)](this[_0x3cbc0a(0x14d)]+_0x3cbc0a(0x15d)+_0x43e3e8+'/'+this[_0x3cbc0a(0x18a)]+_0x3cbc0a(0x148)),await this['sfLogger'][_0x3cbc0a(0x193)]();}}async[a123_0x3a6c49(0x18b)](_0x110cee){const _0x1b6a38=a123_0x3a6c49;_0x110cee[_0x1b6a38(0x181)](_0x253a2c=>child_types_1[_0x1b6a38(0x1a2)][_0x1b6a38(0x14e)](_0x253a2c[_0x1b6a38(0x159)])?-0x1:0x1);let _0x34895c=0x0;while(_0x110cee['length']){const _0x2558c4=_0x110cee[_0x1b6a38(0x1b4)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x1b6a38(0x17c)][_0x1b6a38(0x18b)](_0x2558c4,this[_0x1b6a38(0x1a6)][_0x1b6a38(0x140)]),_0x34895c+=_0x2558c4[_0x1b6a38(0x16f)],this['sfLogger'][_0x1b6a38(0x19a)](this[_0x1b6a38(0x14d)]+_0x1b6a38(0x168)+_0x34895c+'/'+this['componentsToDelete']+_0x1b6a38(0x148)),await this[_0x1b6a38(0x19f)][_0x1b6a38(0x193)]();}}async[a123_0x3a6c49(0x1a8)](){const _0x4ba71d=a123_0x3a6c49;this[_0x4ba71d(0x163)]&&await this[_0x4ba71d(0x163)][_0x4ba71d(0x143)]()['catch'](()=>void 0x0),this[_0x4ba71d(0x17c)]&&await this[_0x4ba71d(0x17c)][_0x4ba71d(0x143)]()[_0x4ba71d(0x16c)](()=>void 0x0),this[_0x4ba71d(0x16a)]&&await this[_0x4ba71d(0x16a)][_0x4ba71d(0x143)]()[_0x4ba71d(0x16c)](()=>void 0x0);}async[a123_0x3a6c49(0x18d)](){const _0x4e6c4a=a123_0x3a6c49,{repo:_0x5a9a45,branch:_0x5a4f30,components:_0x10ac92,convertToSFDX:_0x14c3bc,message:_0x1f3210,user:_0x1026f8}=this[_0x4e6c4a(0x1a6)];this[_0x4e6c4a(0x17c)]=new mdapi_utils_1[(_0x4e6c4a(0x1b9))](),this['gitUtils']=new git_utils_1[(_0x4e6c4a(0x179))](await this[_0x4e6c4a(0x155)]()),this['sfdxUtils']=new sfdx_utils_1[(_0x4e6c4a(0x194))]();let _0x3e8e43=_0x14c3bc&&this['sfdxUtils'][_0x4e6c4a(0x14f)](this[_0x4e6c4a(0x1a6)][_0x4e6c4a(0x140)]);try{await this[_0x4e6c4a(0x19f)][_0x4e6c4a(0x19a)](this['prefix']+_0x4e6c4a(0x1ba))[_0x4e6c4a(0x193)](),await this[_0x4e6c4a(0x163)][_0x4e6c4a(0x17f)](_0x5a4f30['name'],_0x5a9a45['name']);!this[_0x4e6c4a(0x1a6)][_0x4e6c4a(0x13d)]?(this[_0x4e6c4a(0x19f)]['log'](this[_0x4e6c4a(0x14d)]+_0x4e6c4a(0x156)),await this[_0x4e6c4a(0x17c)][_0x4e6c4a(0x19d)](this[_0x4e6c4a(0x163)][_0x4e6c4a(0x197)])):this['sfLogger'][_0x4e6c4a(0x19a)](this[_0x4e6c4a(0x14d)]+_0x4e6c4a(0x1a9));await this[_0x4e6c4a(0x19f)][_0x4e6c4a(0x19a)](this[_0x4e6c4a(0x14d)]+_0x4e6c4a(0x165))[_0x4e6c4a(0x193)]();_0x10ac92[_0x4e6c4a(0x185)]&&(this[_0x4e6c4a(0x19f)]['log'](this['prefix']+_0x4e6c4a(0x184)),this[_0x4e6c4a(0x18a)]=_0x10ac92[_0x4e6c4a(0x185)][_0x4e6c4a(0x16f)],await this['writeComponents'](_0x10ac92[_0x4e6c4a(0x185)]),await this[_0x4e6c4a(0x19f)]['send']());await this[_0x4e6c4a(0x19f)]['log'](this[_0x4e6c4a(0x14d)]+_0x4e6c4a(0x16b))[_0x4e6c4a(0x193)]();_0x10ac92[_0x4e6c4a(0x19b)]&&(this[_0x4e6c4a(0x19f)][_0x4e6c4a(0x19a)](this[_0x4e6c4a(0x14d)]+_0x4e6c4a(0x177)),this[_0x4e6c4a(0x147)]=_0x10ac92['deleted']['length'],await this['removeComponents'](_0x10ac92['deleted']),await this[_0x4e6c4a(0x19f)][_0x4e6c4a(0x193)]());await this[_0x4e6c4a(0x19f)]['send']();const _0x30001b=await fs_internal_1['FS'][_0x4e6c4a(0x162)](this['gitUtils'][_0x4e6c4a(0x197)]);await sfdx_utils_2[_0x4e6c4a(0x13e)][_0x4e6c4a(0x192)](this[_0x4e6c4a(0x163)]['dir'])?(_0x3e8e43=!![],await fs_internal_1['FS']['removeDir']((0x0,path_1[_0x4e6c4a(0x150)])(this['gitUtils'][_0x4e6c4a(0x197)],_0x4e6c4a(0x142)))):(_0x3e8e43&&(!_0x30001b&&(_0x3e8e43=![])),await this[_0x4e6c4a(0x163)][_0x4e6c4a(0x1b0)]());_0x3e8e43?(await this[_0x4e6c4a(0x19f)][_0x4e6c4a(0x19a)](this[_0x4e6c4a(0x14d)]+'\x20Start\x20converting\x20to\x20SFDX.')[_0x4e6c4a(0x193)](),await this[_0x4e6c4a(0x16a)][_0x4e6c4a(0x158)](this[_0x4e6c4a(0x17c)]['dir']),await this[_0x4e6c4a(0x16a)][_0x4e6c4a(0x176)](this[_0x4e6c4a(0x163)]['dir'],!_0x30001b),await this[_0x4e6c4a(0x16a)][_0x4e6c4a(0x13f)](this[_0x4e6c4a(0x17c)][_0x4e6c4a(0x197)],(0x0,path_1['join'])(this[_0x4e6c4a(0x163)][_0x4e6c4a(0x197)],constants_2[_0x4e6c4a(0x190)])),await this[_0x4e6c4a(0x16a)]['removeDir']()):(await this[_0x4e6c4a(0x19f)]['log'](this[_0x4e6c4a(0x14d)]+_0x4e6c4a(0x149))[_0x4e6c4a(0x193)](),await this[_0x4e6c4a(0x17c)]['copyMdapiTo'](this['gitUtils'][_0x4e6c4a(0x197)]));await this[_0x4e6c4a(0x19f)][_0x4e6c4a(0x19a)](this[_0x4e6c4a(0x14d)]+_0x4e6c4a(0x1aa))[_0x4e6c4a(0x193)](),await this[_0x4e6c4a(0x163)]['commitAndPush'](_0x1f3210,{'email':constants_1[_0x4e6c4a(0x14c)],'name':_0x1026f8[_0x4e6c4a(0x171)]},_0x5a4f30[_0x4e6c4a(0x171)]),await this[_0x4e6c4a(0x163)][_0x4e6c4a(0x143)](),await this[_0x4e6c4a(0x17c)]['removeDir']();const _0x56d576=this[_0x4e6c4a(0x18a)]+this[_0x4e6c4a(0x147)];await this['sfLogger'][_0x4e6c4a(0x19a)](this[_0x4e6c4a(0x14d)]+_0x4e6c4a(0x160)+(Date[_0x4e6c4a(0x195)]()-this['startTime'])+_0x4e6c4a(0x187)+_0x56d576+'.')[_0x4e6c4a(0x193)]();}catch(_0x440cd3){await this[_0x4e6c4a(0x1a8)](),await this[_0x4e6c4a(0x19f)][_0x4e6c4a(0x15f)](this[_0x4e6c4a(0x14d)]+'\x20'+_0x440cd3)['send']();throw _0x440cd3;}}async[a123_0x3a6c49(0x13c)](_0x256aa0,_0x3a52ac){const _0x391282=a123_0x3a6c49;var _0x1a1842,_0x5d6f53;this['sfLogger']=typedi_1[_0x391282(0x1a2)][_0x391282(0x1a5)](providers_tokens_1[_0x391282(0x146)]['logger']),this[_0x391282(0x14d)]=(_0x3a52ac?_0x3a52ac+'\x20':'')+'['+commit_components_dto_1[_0x391282(0x188)][_0x391282(0x171)]+']',await this[_0x391282(0x19f)]['log'](this['prefix']+_0x391282(0x1a3));const _0x2e0456=!!((_0x1a1842=_0x256aa0[_0x391282(0x15c)])===null||_0x1a1842===void 0x0?void 0x0:_0x1a1842[_0x391282(0x185)])||!!((_0x5d6f53=_0x256aa0[_0x391282(0x15c)])===null||_0x5d6f53===void 0x0?void 0x0:_0x5d6f53[_0x391282(0x19b)]);if(!_0x2e0456){await this[_0x391282(0x19f)][_0x391282(0x19a)](this[_0x391282(0x14d)]+_0x391282(0x157))[_0x391282(0x193)]();return;}this[_0x391282(0x1a6)]=_0x256aa0,await this[_0x391282(0x18d)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a123_0x3a6c49(0x167)])({'transient':!![]})],CommitComponentsJob),exports[a123_0x3a6c49(0x198)]=CommitComponentsJob;function a123_0x4219(_0x3dd124,_0x515a99){const _0x524e49=a123_0x5543();return a123_0x4219=function(_0x4bae6e,_0x3c1626){_0x4bae6e=_0x4bae6e-0x138;let _0x554324=_0x524e49[_0x4bae6e];return _0x554324;},a123_0x4219(_0x3dd124,_0x515a99);}function a123_0x5543(){const _0x160fa3=['924snyRxs','GitUtils','getOwnPropertyDescriptor','12NKTGqc','mdapiUtils','configurable','provider','clone','create','sort','30GhFmNb','__esModule','\x20Preparing\x20to\x20write\x20components','writed','4AYUfXB','ms.\x20Committed\x20components\x20-\x20','CommitComponentsDto','__importStar','componentsToWrite','removeComponents','toString','exec','COMPONENTS_PER_TICK','credentials','FORCE_APP_DEFAULT_DIR','../../../shared/utils','isSFDXProject','send','SFDXUtils','now','5568CJBfuJ','dir','CommitComponentsJob','getGitShellAuthorizationString','log','deleted','isLoggedIn','prepareMdapi','17414ZqDDgD','sfLogger','getProtocol','values','default','\x20Checking\x20commit\x20components.','../utils/sfdx.utils','get','commitData','23291398tRnpRN','cleanUp','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','Bitbucket','function','call','constructor','push','clearDir','28ysMQXi','startTime','__decorate','splice','../utils/mdapi.utils','(((.+)+)+)+$','148845quGzGF','fileName','MDApiUtils','\x20Start\x20cloning\x20repository.','master','1466880NKiLdr','://','__importDefault','run','force','SFDX','copySFDXIgnoredComponents','recordType','__createBinding','force-app','removeDir','hasOwnProperty','events','Tokens','componentsToDelete','\x20components','\x20Copying\x20mdapi\x20to\x20git\x20folder.','groupComponentsByFileName','writeComponents','DEFAULT_GIT_USER_EMAIL','prefix','includes','isConvertToSfdx','join','../../providers/api/bitbucket-api.service','../../salesforce/utils/sfdx.utils','defineProperty','../../providers/providers.tokens','getRemote','\x20Prepare\x20mdapi\x20files.','\x20Nothing\x20to\x20commit.\x20Skip.','createProjectFrom','type','../../../../constants','decorate','components','\x20Wrote\x20','15IkrtcB','error','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','2527467NgcAjB','isEmptyDir','gitUtils','replace','\x20Checking\x20written\x20components.','gitUrl','Service','\x20Deleted\x20','../utils/git.utils','sfdxUtils','\x20Checking\x20deleted\x20components.','catch','../../parsers/data/child-types','writable','length','search','name','typedi','1308618nEmehM','object','apply','copyProjectTo','\x20Preparing\x20to\x20delete\x20components'];a123_0x5543=function(){return _0x160fa3;};return a123_0x5543();}