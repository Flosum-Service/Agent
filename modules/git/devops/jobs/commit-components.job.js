const a124_0x25b190=a124_0x4149;(function(_0x3dc34c,_0x28c89d){const _0x863bbf=a124_0x4149,_0x2d27af=_0x3dc34c();while(!![]){try{const _0x10e306=parseInt(_0x863bbf(0x1a9))/0x1+-parseInt(_0x863bbf(0x14a))/0x2+-parseInt(_0x863bbf(0x14f))/0x3*(parseInt(_0x863bbf(0x1a7))/0x4)+parseInt(_0x863bbf(0x198))/0x5*(parseInt(_0x863bbf(0x147))/0x6)+-parseInt(_0x863bbf(0x17e))/0x7+-parseInt(_0x863bbf(0x1af))/0x8+parseInt(_0x863bbf(0x18e))/0x9;if(_0x10e306===_0x28c89d)break;else _0x2d27af['push'](_0x2d27af['shift']());}catch(_0x3667ab){_0x2d27af['push'](_0x2d27af['shift']());}}}(a124_0x56a6,0xd6f20));const a124_0x494964=(function(){let _0x598a0b=!![];return function(_0x3546e1,_0x2e4db9){const _0x19d83f=_0x598a0b?function(){const _0x24f1e0=a124_0x4149;if(_0x2e4db9){const _0x129101=_0x2e4db9[_0x24f1e0(0x18c)](_0x3546e1,arguments);return _0x2e4db9=null,_0x129101;}}:function(){};return _0x598a0b=![],_0x19d83f;};}()),a124_0x17941e=a124_0x494964(this,function(){const _0x40a52d=a124_0x4149;return a124_0x17941e[_0x40a52d(0x170)]()[_0x40a52d(0x15c)]('(((.+)+)+)+$')[_0x40a52d(0x170)]()[_0x40a52d(0x189)](a124_0x17941e)[_0x40a52d(0x15c)](_0x40a52d(0x172));});function a124_0x4149(_0x4f8f21,_0x2abd60){const _0x1b2c05=a124_0x56a6();return a124_0x4149=function(_0x17941e,_0x494964){_0x17941e=_0x17941e-0x13a;let _0x56a699=_0x1b2c05[_0x17941e];return _0x56a699;},a124_0x4149(_0x4f8f21,_0x2abd60);}function a124_0x56a6(){const _0x4d02b2=['log','../utils/mdapi.utils','mdapiUtils','writeComponents','\x20Wrote\x20','writable','credentials','send','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','../dto/commit-components.dto','6YeYFku','CommitComponentsJob','typedi','2063408mrejhq','\x20Start\x20converting\x20to\x20SFDX.','isConvertToSfdx','__setModuleDefault','\x20Checking\x20deleted\x20components.','50130URJNnl','../../internal/fs.internal','getProtocol','isLoggedIn','fileType','componentsToDelete','Bitbucket','logger','__createBinding','call','deleted','isEmptyDir','groupComponentsByFileName','search','catch','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','createProjectFrom','cleanUp','../utils/sfdx.utils','reduce','join','../../providers/providers.tokens','isSFDXProject','includes','../../providers/types/git-provider','__esModule','clearDir','FORCE_APP_DEFAULT_DIR','SFDX','sfdxUtils','writeFlosumComponents','name','Service','toString','decorate','(((.+)+)+)+$','clone','commitAndPush','events','Tokens','replace','://','../../providers/api/bitbucket-api.service','splice','object','path','GitUtils','5323738vuYBfP','prefix','length','error','DEFAULT_GIT_USER_EMAIL','copyProjectTo','exec','defineProperty','now','hasOwnProperty','\x20Checking\x20written\x20components.','constructor','gitUtils','branch','apply','startTime','16196364dLTSrZ','\x20components','GitProvider','fileName','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','\x20Preparing\x20to\x20write\x20components','COMPONENTS_PER_TICK','values','BitbucketApiService','force-app','4409285AnFbEx','sfLogger','recordType','getRemote','__decorate','ms.\x20Committed\x20components\x20-\x20','commitData','force','../../../../constants','provider','removeComponents','sort','writed','__importStar','default','80fpbRng','master','354480zjCJvf','gitUrl','configurable','\x20Nothing\x20to\x20commit.\x20Skip.','removeDir','get','232632guvBWM','getOwnPropertyDescriptor','../../salesforce/utils/sfdx.utils','prepareMdapi','dir','\x20Preparing\x20to\x20delete\x20components','../../parsers/data/child-types','components','create','\x20Deleted\x20','componentsToWrite','SFDXUtils','push'];a124_0x56a6=function(){return _0x4d02b2;};return a124_0x56a6();}a124_0x17941e();'use strict';var __createBinding=this&&this[a124_0x25b190(0x157)]||(Object[a124_0x25b190(0x1b7)]?function(_0x7d21a1,_0xa2ae1a,_0x241ffb,_0x22b655){const _0x486f9b=a124_0x25b190;if(_0x22b655===undefined)_0x22b655=_0x241ffb;var _0x11e1c8=Object[_0x486f9b(0x1b0)](_0xa2ae1a,_0x241ffb);(!_0x11e1c8||(_0x486f9b(0x1ae)in _0x11e1c8?!_0xa2ae1a[_0x486f9b(0x168)]:_0x11e1c8[_0x486f9b(0x142)]||_0x11e1c8[_0x486f9b(0x1ab)]))&&(_0x11e1c8={'enumerable':!![],'get':function(){return _0xa2ae1a[_0x241ffb];}}),Object[_0x486f9b(0x185)](_0x7d21a1,_0x22b655,_0x11e1c8);}:function(_0x39cf45,_0x55b70e,_0x27134a,_0x53b6a2){if(_0x53b6a2===undefined)_0x53b6a2=_0x27134a;_0x39cf45[_0x53b6a2]=_0x55b70e[_0x27134a];}),__setModuleDefault=this&&this[a124_0x25b190(0x14d)]||(Object[a124_0x25b190(0x1b7)]?function(_0x4f26ee,_0x51008b){const _0x2afc76=a124_0x25b190;Object[_0x2afc76(0x185)](_0x4f26ee,'default',{'enumerable':!![],'value':_0x51008b});}:function(_0x58b88d,_0x572aec){const _0x417a99=a124_0x25b190;_0x58b88d[_0x417a99(0x1a6)]=_0x572aec;}),__decorate=this&&this[a124_0x25b190(0x19c)]||function(_0x1c13ca,_0x46c9ac,_0x1def1e,_0x2ea567){const _0x42c4ed=a124_0x25b190;var _0x5d7be4=arguments['length'],_0x55c432=_0x5d7be4<0x3?_0x46c9ac:_0x2ea567===null?_0x2ea567=Object[_0x42c4ed(0x1b0)](_0x46c9ac,_0x1def1e):_0x2ea567,_0x3ce11d;if(typeof Reflect===_0x42c4ed(0x17b)&&typeof Reflect[_0x42c4ed(0x171)]==='function')_0x55c432=Reflect['decorate'](_0x1c13ca,_0x46c9ac,_0x1def1e,_0x2ea567);else{for(var _0x109814=_0x1c13ca[_0x42c4ed(0x180)]-0x1;_0x109814>=0x0;_0x109814--)if(_0x3ce11d=_0x1c13ca[_0x109814])_0x55c432=(_0x5d7be4<0x3?_0x3ce11d(_0x55c432):_0x5d7be4>0x3?_0x3ce11d(_0x46c9ac,_0x1def1e,_0x55c432):_0x3ce11d(_0x46c9ac,_0x1def1e))||_0x55c432;}return _0x5d7be4>0x3&&_0x55c432&&Object[_0x42c4ed(0x185)](_0x46c9ac,_0x1def1e,_0x55c432),_0x55c432;},__importStar=this&&this[a124_0x25b190(0x1a5)]||function(_0x38b0ac){const _0x67f009=a124_0x25b190;if(_0x38b0ac&&_0x38b0ac[_0x67f009(0x168)])return _0x38b0ac;var _0x37ced3={};if(_0x38b0ac!=null){for(var _0x18cbbb in _0x38b0ac)if(_0x18cbbb!==_0x67f009(0x1a6)&&Object['prototype'][_0x67f009(0x187)][_0x67f009(0x158)](_0x38b0ac,_0x18cbbb))__createBinding(_0x37ced3,_0x38b0ac,_0x18cbbb);}return __setModuleDefault(_0x37ced3,_0x38b0ac),_0x37ced3;},__importDefault=this&&this['__importDefault']||function(_0x4b479c){return _0x4b479c&&_0x4b479c['__esModule']?_0x4b479c:{'default':_0x4b479c};};Object['defineProperty'](exports,a124_0x25b190(0x168),{'value':!![]}),exports[a124_0x25b190(0x148)]=void 0x0;const commit_components_dto_1=require(a124_0x25b190(0x146)),events_1=__importDefault(require(a124_0x25b190(0x175))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a124_0x25b190(0x13e)),sfdx_utils_1=require(a124_0x25b190(0x161)),typedi_1=__importStar(require(a124_0x25b190(0x149))),child_types_1=__importDefault(require(a124_0x25b190(0x1b5))),utils_1=require('../../../shared/utils'),constants_1=require(a124_0x25b190(0x1a0)),git_provider_1=require(a124_0x25b190(0x167)),bitbucket_api_service_1=require(a124_0x25b190(0x179)),sfdx_utils_2=require(a124_0x25b190(0x1b1)),fs_internal_1=require(a124_0x25b190(0x150)),path_1=require(a124_0x25b190(0x17c)),providers_tokens_1=require(a124_0x25b190(0x164)),constants_2=require(a124_0x25b190(0x1a0));let CommitComponentsJob=class CommitComponentsJob extends events_1[a124_0x25b190(0x1a6)]{constructor(){const _0x1ceece=a124_0x25b190;super(...arguments),this[_0x1ceece(0x194)]=0x3e8,this['componentsToWrite']=0x0,this['componentsToDelete']=0x0,this['startTime']=Date[_0x1ceece(0x186)]();}async[a124_0x25b190(0x19b)](){const _0x3a4b93=a124_0x25b190,{repo:_0x1358da}=this[_0x3a4b93(0x19e)],_0x2ff2a1=typedi_1['default'][_0x3a4b93(0x1ae)](providers_tokens_1[_0x3a4b93(0x176)][_0x3a4b93(0x143)]);if(this['commitData'][_0x3a4b93(0x1a1)]===git_provider_1[_0x3a4b93(0x190)][_0x3a4b93(0x155)]){const _0x4ac895=typedi_1[_0x3a4b93(0x1a6)]['get'](bitbucket_api_service_1[_0x3a4b93(0x196)]);await _0x4ac895[_0x3a4b93(0x152)]();}return _0x1358da[_0x3a4b93(0x1aa)][_0x3a4b93(0x177)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x3a4b93(0x151)])(_0x1358da[_0x3a4b93(0x1aa)])+_0x3a4b93(0x178)+_0x2ff2a1['getGitShellAuthorizationString']()+'@');}[a124_0x25b190(0x15b)](_0x2e21ea){const _0x253e89=a124_0x25b190;var _0x3b65fd;_0x2e21ea[_0x253e89(0x1a3)](_0x46ab7f=>child_types_1[_0x253e89(0x1a6)][_0x253e89(0x166)](_0x46ab7f[_0x253e89(0x153)])?0x1:-0x1);const _0x26a13c={};for(const _0x472ccc of _0x2e21ea){_0x26a13c[_0x3b65fd=_0x472ccc[_0x253e89(0x191)]]||(_0x26a13c[_0x3b65fd]=[]),_0x26a13c[_0x472ccc[_0x253e89(0x191)]][_0x253e89(0x13c)](_0x472ccc);}return Object[_0x253e89(0x195)](_0x26a13c)[_0x253e89(0x162)]((_0x1e3db5,_0x5d0b48)=>[..._0x1e3db5,..._0x5d0b48],[]);}async[a124_0x25b190(0x140)](_0x36e676){const _0x3c82a0=a124_0x25b190;_0x36e676=this[_0x3c82a0(0x15b)](_0x36e676);let _0x5e80f5=0x0;while(_0x36e676['length']){const _0x4d23ee=_0x36e676[_0x3c82a0(0x17a)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x3c82a0(0x13f)][_0x3c82a0(0x16d)](_0x4d23ee,{'skipChildErrors':this[_0x3c82a0(0x19e)][_0x3c82a0(0x18b)][_0x3c82a0(0x16e)]===_0x3c82a0(0x1a8),'recordType':this[_0x3c82a0(0x19e)][_0x3c82a0(0x19a)]}),_0x5e80f5+=_0x4d23ee['length'],this[_0x3c82a0(0x199)]['log'](this['prefix']+_0x3c82a0(0x141)+_0x5e80f5+'/'+this[_0x3c82a0(0x13a)]+_0x3c82a0(0x18f)),await this[_0x3c82a0(0x199)]['send']();}}async[a124_0x25b190(0x1a2)](_0x16acb7){const _0x6cd4f1=a124_0x25b190;_0x16acb7[_0x6cd4f1(0x1a3)](_0x287613=>child_types_1['default'][_0x6cd4f1(0x166)](_0x287613['type'])?-0x1:0x1);let _0x21639d=0x0;while(_0x16acb7[_0x6cd4f1(0x180)]){const _0x97d0f8=_0x16acb7[_0x6cd4f1(0x17a)](0x0,this['COMPONENTS_PER_TICK']);await this['mdapiUtils'][_0x6cd4f1(0x1a2)](_0x97d0f8,this[_0x6cd4f1(0x19e)]['recordType']),_0x21639d+=_0x97d0f8[_0x6cd4f1(0x180)],this[_0x6cd4f1(0x199)][_0x6cd4f1(0x13d)](this[_0x6cd4f1(0x17f)]+_0x6cd4f1(0x1b8)+_0x21639d+'/'+this[_0x6cd4f1(0x154)]+_0x6cd4f1(0x18f)),await this[_0x6cd4f1(0x199)][_0x6cd4f1(0x144)]();}}async['cleanUp'](){const _0x1665f2=a124_0x25b190;this[_0x1665f2(0x18a)]&&await this['gitUtils'][_0x1665f2(0x1ad)]()[_0x1665f2(0x15d)](()=>void 0x0),this[_0x1665f2(0x13f)]&&await this['mdapiUtils'][_0x1665f2(0x1ad)]()[_0x1665f2(0x15d)](()=>void 0x0),this[_0x1665f2(0x16c)]&&await this[_0x1665f2(0x16c)][_0x1665f2(0x1ad)]()['catch'](()=>void 0x0);}async[a124_0x25b190(0x184)](){const _0x18fdd1=a124_0x25b190,{repo:_0x3f0224,branch:_0x509ec1,components:_0x3ca23e,convertToSFDX:_0x2dd20f,message:_0x3cf52a,user:_0xf40f41}=this[_0x18fdd1(0x19e)];this[_0x18fdd1(0x13f)]=new mdapi_utils_1['MDApiUtils'](),this[_0x18fdd1(0x18a)]=new git_utils_1[(_0x18fdd1(0x17d))](await this['getRemote']()),this['sfdxUtils']=new sfdx_utils_1[(_0x18fdd1(0x13b))]();let _0x4856b7=_0x2dd20f&&this[_0x18fdd1(0x16c)][_0x18fdd1(0x14c)](this[_0x18fdd1(0x19e)][_0x18fdd1(0x19a)]);try{await this[_0x18fdd1(0x199)][_0x18fdd1(0x13d)](this[_0x18fdd1(0x17f)]+'\x20Start\x20cloning\x20repository.')[_0x18fdd1(0x144)](),await this[_0x18fdd1(0x18a)][_0x18fdd1(0x173)](_0x509ec1[_0x18fdd1(0x16e)],_0x3f0224['name']);!this[_0x18fdd1(0x19e)][_0x18fdd1(0x19f)]?(this[_0x18fdd1(0x199)]['log'](this[_0x18fdd1(0x17f)]+'\x20Prepare\x20mdapi\x20files.'),await this[_0x18fdd1(0x13f)][_0x18fdd1(0x1b2)](this[_0x18fdd1(0x18a)][_0x18fdd1(0x1b3)])):this[_0x18fdd1(0x199)][_0x18fdd1(0x13d)](this[_0x18fdd1(0x17f)]+_0x18fdd1(0x192));await this[_0x18fdd1(0x199)]['log'](this[_0x18fdd1(0x17f)]+_0x18fdd1(0x188))[_0x18fdd1(0x144)]();_0x3ca23e[_0x18fdd1(0x1a4)]&&(this[_0x18fdd1(0x199)][_0x18fdd1(0x13d)](this['prefix']+_0x18fdd1(0x193)),this['componentsToWrite']=_0x3ca23e['writed'][_0x18fdd1(0x180)],await this[_0x18fdd1(0x140)](_0x3ca23e[_0x18fdd1(0x1a4)]),await this['sfLogger'][_0x18fdd1(0x144)]());await this[_0x18fdd1(0x199)][_0x18fdd1(0x13d)](this[_0x18fdd1(0x17f)]+_0x18fdd1(0x14e))[_0x18fdd1(0x144)]();_0x3ca23e['deleted']&&(this[_0x18fdd1(0x199)]['log'](this['prefix']+_0x18fdd1(0x1b4)),this[_0x18fdd1(0x154)]=_0x3ca23e['deleted']['length'],await this['removeComponents'](_0x3ca23e['deleted']),await this[_0x18fdd1(0x199)][_0x18fdd1(0x144)]());await this['sfLogger'][_0x18fdd1(0x144)]();const _0x529026=await fs_internal_1['FS'][_0x18fdd1(0x15a)](this[_0x18fdd1(0x18a)][_0x18fdd1(0x1b3)]);await sfdx_utils_2[_0x18fdd1(0x16b)][_0x18fdd1(0x165)](this[_0x18fdd1(0x18a)][_0x18fdd1(0x1b3)])?(_0x4856b7=!![],await fs_internal_1['FS']['removeDir']((0x0,path_1[_0x18fdd1(0x163)])(this[_0x18fdd1(0x18a)]['dir'],_0x18fdd1(0x197)))):(_0x4856b7&&(!_0x529026&&(_0x4856b7=![])),await this[_0x18fdd1(0x18a)][_0x18fdd1(0x169)]());_0x4856b7?(await this[_0x18fdd1(0x199)][_0x18fdd1(0x13d)](this['prefix']+_0x18fdd1(0x14b))[_0x18fdd1(0x144)](),await this[_0x18fdd1(0x16c)][_0x18fdd1(0x15f)](this[_0x18fdd1(0x13f)][_0x18fdd1(0x1b3)]),await this[_0x18fdd1(0x16c)][_0x18fdd1(0x183)](this[_0x18fdd1(0x18a)]['dir'],!_0x529026),await this[_0x18fdd1(0x16c)]['copySFDXIgnoredComponents'](this[_0x18fdd1(0x13f)][_0x18fdd1(0x1b3)],(0x0,path_1['join'])(this['gitUtils'][_0x18fdd1(0x1b3)],constants_2[_0x18fdd1(0x16a)])),await this[_0x18fdd1(0x16c)]['removeDir']()):(await this[_0x18fdd1(0x199)]['log'](this[_0x18fdd1(0x17f)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x18fdd1(0x144)](),await this['mdapiUtils']['copyMdapiTo'](this[_0x18fdd1(0x18a)]['dir']));await this[_0x18fdd1(0x199)][_0x18fdd1(0x13d)](this[_0x18fdd1(0x17f)]+_0x18fdd1(0x15e))[_0x18fdd1(0x144)](),await this[_0x18fdd1(0x18a)][_0x18fdd1(0x174)](_0x3cf52a,{'email':constants_1[_0x18fdd1(0x182)],'name':_0xf40f41[_0x18fdd1(0x16e)]},_0x509ec1['name']),await this[_0x18fdd1(0x18a)]['removeDir'](),await this[_0x18fdd1(0x13f)][_0x18fdd1(0x1ad)]();const _0xe66cb2=this[_0x18fdd1(0x13a)]+this['componentsToDelete'];await this['sfLogger'][_0x18fdd1(0x13d)](this['prefix']+_0x18fdd1(0x145)+(Date[_0x18fdd1(0x186)]()-this[_0x18fdd1(0x18d)])+_0x18fdd1(0x19d)+_0xe66cb2+'.')[_0x18fdd1(0x144)]();}catch(_0x123d0c){await this[_0x18fdd1(0x160)](),await this[_0x18fdd1(0x199)][_0x18fdd1(0x181)](this[_0x18fdd1(0x17f)]+'\x20'+_0x123d0c)[_0x18fdd1(0x144)]();throw _0x123d0c;}}async['run'](_0x21beef,_0x1e0445){const _0x161b8f=a124_0x25b190;var _0x1e7860,_0x180275;this[_0x161b8f(0x199)]=typedi_1['default'][_0x161b8f(0x1ae)](providers_tokens_1[_0x161b8f(0x176)][_0x161b8f(0x156)]),this[_0x161b8f(0x17f)]=(_0x1e0445?_0x1e0445+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto']['name']+']',await this[_0x161b8f(0x199)]['log'](this['prefix']+'\x20Checking\x20commit\x20components.');const _0x594fc9=!!((_0x1e7860=_0x21beef[_0x161b8f(0x1b6)])===null||_0x1e7860===void 0x0?void 0x0:_0x1e7860[_0x161b8f(0x1a4)])||!!((_0x180275=_0x21beef[_0x161b8f(0x1b6)])===null||_0x180275===void 0x0?void 0x0:_0x180275[_0x161b8f(0x159)]);if(!_0x594fc9){await this[_0x161b8f(0x199)][_0x161b8f(0x13d)](this['prefix']+_0x161b8f(0x1ac))['send']();return;}this[_0x161b8f(0x19e)]=_0x21beef,await this[_0x161b8f(0x184)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a124_0x25b190(0x16f)])({'transient':!![]})],CommitComponentsJob),exports[a124_0x25b190(0x148)]=CommitComponentsJob;