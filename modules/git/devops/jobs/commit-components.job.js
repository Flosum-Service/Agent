function a103_0x25c2(_0x1eef5b,_0x560bd3){const _0x1352c2=a103_0x449a();return a103_0x25c2=function(_0x599cd0,_0x150aac){_0x599cd0=_0x599cd0-0x10d;let _0x449a8e=_0x1352c2[_0x599cd0];return _0x449a8e;},a103_0x25c2(_0x1eef5b,_0x560bd3);}const a103_0x888374=a103_0x25c2;(function(_0x41bdee,_0x155e77){const _0x262e29=a103_0x25c2,_0x323f97=_0x41bdee();while(!![]){try{const _0x54a09c=-parseInt(_0x262e29(0x12f))/0x1+-parseInt(_0x262e29(0x148))/0x2*(-parseInt(_0x262e29(0x11e))/0x3)+parseInt(_0x262e29(0x10d))/0x4+parseInt(_0x262e29(0x139))/0x5+parseInt(_0x262e29(0x135))/0x6*(parseInt(_0x262e29(0x141))/0x7)+parseInt(_0x262e29(0x10f))/0x8*(parseInt(_0x262e29(0x126))/0x9)+-parseInt(_0x262e29(0x119))/0xa*(parseInt(_0x262e29(0x127))/0xb);if(_0x54a09c===_0x155e77)break;else _0x323f97['push'](_0x323f97['shift']());}catch(_0x4cb29c){_0x323f97['push'](_0x323f97['shift']());}}}(a103_0x449a,0x367cf));const a103_0x150aac=(function(){let _0x4833d3=!![];return function(_0x1ebd4e,_0x2c9a92){const _0x9aca29=_0x4833d3?function(){if(_0x2c9a92){const _0x18a91b=_0x2c9a92['apply'](_0x1ebd4e,arguments);return _0x2c9a92=null,_0x18a91b;}}:function(){};return _0x4833d3=![],_0x9aca29;};}()),a103_0x599cd0=a103_0x150aac(this,function(){const _0x3f7932=a103_0x25c2;return a103_0x599cd0[_0x3f7932(0x163)]()[_0x3f7932(0x14d)](_0x3f7932(0x123))[_0x3f7932(0x163)]()[_0x3f7932(0x131)](a103_0x599cd0)[_0x3f7932(0x14d)]('(((.+)+)+)+$');});a103_0x599cd0();'use strict';function a103_0x449a(){const _0x192bfb=['search','fileType','call','getGitShellAuthorizationString','://','copyProjectTo','commitData','componentsToWrite','writeFlosumComponents','length','../../providers/types/git-provider','events','cleanUp','ms.\x20Committed\x20components\x20-\x20','commitAndPush','BitbucketApiService','removeComponents','MDApiUtils','typedi','SFDXUtils','Tokens','sort','toString','prototype','fileName','\x20components','exec','object','reduce','mdapiUtils','../utils/mdapi.utils','\x20Checking\x20deleted\x20components.','getOwnPropertyDescriptor','GitProvider','groupComponentsByFileName','__esModule','credentials','\x20Deleted\x20','removeDir','type','create','\x20Checking\x20commit\x20components.','components','gitUtils','\x20Start\x20cloning\x20repository.','copyMdapiTo','\x20Start\x20converting\x20to\x20SFDX.','replace','../../salesforce/utils/sfdx.utils','log','\x20Copying\x20mdapi\x20to\x20git\x20folder.','default','\x20Wrote\x20','CommitComponentsJob','logger','provider','writeComponents','prefix','359848EiQVLL','path','632hFfhqQ','CommitComponentsDto','componentsToDelete','../utils/sfdx.utils','gitUrl','__importStar','SFDX','get','../../parsers/data/child-types','defineProperty','7640PEKadX','clearDir','writed','now','isEmptyDir','39BFLRuy','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','getRemote','sfLogger','createProjectFrom','(((.+)+)+)+$','run','startTime','28845zhkNfP','4950jAYHin','configurable','sfdxUtils','decorate','send','../../../shared/utils','deleted','../../../../constants','368984OQiaOt','isSFDXProject','constructor','__createBinding','catch','splice','18znKtFJ','\x20Prepare\x20mdapi\x20files.','__decorate','Bitbucket','1781725THPhUb','\x20Preparing\x20to\x20delete\x20components','force','name','\x20Nothing\x20to\x20commit.\x20Skip.','values','\x20Preparing\x20to\x20write\x20components','join','23345RYDOlM','COMPONENTS_PER_TICK','../../internal/fs.internal','force-app','isLoggedIn','dir','__setModuleDefault','34840puBHLL','DEFAULT_GIT_USER_EMAIL','getProtocol','includes','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.'];a103_0x449a=function(){return _0x192bfb;};return a103_0x449a();}var __createBinding=this&&this[a103_0x888374(0x132)]||(Object[a103_0x888374(0x175)]?function(_0x1db60b,_0x46444a,_0x20ee66,_0x1ae490){const _0x1b6903=a103_0x888374;if(_0x1ae490===undefined)_0x1ae490=_0x20ee66;var _0x37e5f4=Object[_0x1b6903(0x16d)](_0x46444a,_0x20ee66);(!_0x37e5f4||(_0x1b6903(0x116)in _0x37e5f4?!_0x46444a[_0x1b6903(0x170)]:_0x37e5f4['writable']||_0x37e5f4[_0x1b6903(0x128)]))&&(_0x37e5f4={'enumerable':!![],'get':function(){return _0x46444a[_0x20ee66];}}),Object[_0x1b6903(0x118)](_0x1db60b,_0x1ae490,_0x37e5f4);}:function(_0x496257,_0x59af29,_0x2fa976,_0x1b1e1c){if(_0x1b1e1c===undefined)_0x1b1e1c=_0x2fa976;_0x496257[_0x1b1e1c]=_0x59af29[_0x2fa976];}),__setModuleDefault=this&&this[a103_0x888374(0x147)]||(Object[a103_0x888374(0x175)]?function(_0x3fcbb0,_0x4e6dc5){const _0x5475a8=a103_0x888374;Object[_0x5475a8(0x118)](_0x3fcbb0,_0x5475a8(0x180),{'enumerable':!![],'value':_0x4e6dc5});}:function(_0x378bda,_0x31773c){const _0x2d5613=a103_0x888374;_0x378bda[_0x2d5613(0x180)]=_0x31773c;}),__decorate=this&&this[a103_0x888374(0x137)]||function(_0x5715a1,_0x42dc61,_0x54df21,_0xf11a){const _0x896919=a103_0x888374;var _0x180140=arguments[_0x896919(0x156)],_0x358c8e=_0x180140<0x3?_0x42dc61:_0xf11a===null?_0xf11a=Object['getOwnPropertyDescriptor'](_0x42dc61,_0x54df21):_0xf11a,_0x51e33e;if(typeof Reflect===_0x896919(0x168)&&typeof Reflect[_0x896919(0x12a)]==='function')_0x358c8e=Reflect[_0x896919(0x12a)](_0x5715a1,_0x42dc61,_0x54df21,_0xf11a);else{for(var _0x13c522=_0x5715a1[_0x896919(0x156)]-0x1;_0x13c522>=0x0;_0x13c522--)if(_0x51e33e=_0x5715a1[_0x13c522])_0x358c8e=(_0x180140<0x3?_0x51e33e(_0x358c8e):_0x180140>0x3?_0x51e33e(_0x42dc61,_0x54df21,_0x358c8e):_0x51e33e(_0x42dc61,_0x54df21))||_0x358c8e;}return _0x180140>0x3&&_0x358c8e&&Object[_0x896919(0x118)](_0x42dc61,_0x54df21,_0x358c8e),_0x358c8e;},__importStar=this&&this[a103_0x888374(0x114)]||function(_0x111268){const _0x55d40e=a103_0x888374;if(_0x111268&&_0x111268['__esModule'])return _0x111268;var _0x1f8682={};if(_0x111268!=null){for(var _0x405d5e in _0x111268)if(_0x405d5e!=='default'&&Object[_0x55d40e(0x164)]['hasOwnProperty'][_0x55d40e(0x14f)](_0x111268,_0x405d5e))__createBinding(_0x1f8682,_0x111268,_0x405d5e);}return __setModuleDefault(_0x1f8682,_0x111268),_0x1f8682;},__importDefault=this&&this['__importDefault']||function(_0x1650e4){const _0x326d34=a103_0x888374;return _0x1650e4&&_0x1650e4[_0x326d34(0x170)]?_0x1650e4:{'default':_0x1650e4};};Object[a103_0x888374(0x118)](exports,a103_0x888374(0x170),{'value':!![]}),exports[a103_0x888374(0x182)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a103_0x888374(0x158))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a103_0x888374(0x16b)),sfdx_utils_1=require(a103_0x888374(0x112)),typedi_1=__importStar(require(a103_0x888374(0x15f))),child_types_1=__importDefault(require(a103_0x888374(0x117))),utils_1=require(a103_0x888374(0x12c)),constants_1=require(a103_0x888374(0x12e)),git_provider_1=require(a103_0x888374(0x157)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),sfdx_utils_2=require(a103_0x888374(0x17d)),fs_internal_1=require(a103_0x888374(0x143)),path_1=require(a103_0x888374(0x10e)),providers_tokens_1=require('../../providers/providers.tokens');let CommitComponentsJob=class CommitComponentsJob extends events_1[a103_0x888374(0x180)]{constructor(){const _0x4e15be=a103_0x888374;super(...arguments),this[_0x4e15be(0x142)]=0x3e8,this['componentsToWrite']=0x0,this[_0x4e15be(0x111)]=0x0,this['startTime']=Date[_0x4e15be(0x11c)]();}async[a103_0x888374(0x120)](){const _0x56c4ad=a103_0x888374,{repo:_0x463d3f}=this['commitData'],_0x368bfc=typedi_1[_0x56c4ad(0x180)][_0x56c4ad(0x116)](providers_tokens_1[_0x56c4ad(0x161)][_0x56c4ad(0x171)]);if(this[_0x56c4ad(0x153)][_0x56c4ad(0x184)]===git_provider_1[_0x56c4ad(0x16e)][_0x56c4ad(0x138)]){const _0x370d59=typedi_1['default'][_0x56c4ad(0x116)](bitbucket_api_service_1[_0x56c4ad(0x15c)]);await _0x370d59[_0x56c4ad(0x145)]();}return _0x463d3f[_0x56c4ad(0x113)][_0x56c4ad(0x17c)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x56c4ad(0x14a)])(_0x463d3f['gitUrl'])+_0x56c4ad(0x151)+_0x368bfc[_0x56c4ad(0x150)]()+'@');}[a103_0x888374(0x16f)](_0x143daa){const _0x48ca83=a103_0x888374;var _0x5c491c;_0x143daa[_0x48ca83(0x162)](_0x345b85=>child_types_1[_0x48ca83(0x180)][_0x48ca83(0x14b)](_0x345b85[_0x48ca83(0x14e)])?0x1:-0x1);const _0x4090c3={};for(const _0xbb8661 of _0x143daa){_0x4090c3[_0x5c491c=_0xbb8661[_0x48ca83(0x165)]]||(_0x4090c3[_0x5c491c]=[]),_0x4090c3[_0xbb8661[_0x48ca83(0x165)]]['push'](_0xbb8661);}return Object[_0x48ca83(0x13e)](_0x4090c3)[_0x48ca83(0x169)]((_0x5c408d,_0x5a5d8c)=>[..._0x5c408d,..._0x5a5d8c],[]);}async[a103_0x888374(0x185)](_0x437bcf){const _0x1555c8=a103_0x888374;_0x437bcf=this[_0x1555c8(0x16f)](_0x437bcf);let _0x25b3d=0x0;while(_0x437bcf[_0x1555c8(0x156)]){const _0x525579=_0x437bcf['splice'](0x0,this[_0x1555c8(0x142)]);await this['mdapiUtils'][_0x1555c8(0x155)](_0x525579,{'skipChildErrors':this[_0x1555c8(0x153)]['branch'][_0x1555c8(0x13c)]==='master'}),_0x25b3d+=_0x525579[_0x1555c8(0x156)],this[_0x1555c8(0x121)][_0x1555c8(0x17e)](this[_0x1555c8(0x186)]+_0x1555c8(0x181)+_0x25b3d+'/'+this['componentsToWrite']+_0x1555c8(0x166)),await this[_0x1555c8(0x121)]['send']();}}async[a103_0x888374(0x15d)](_0xdebb28){const _0x44a001=a103_0x888374;_0xdebb28['sort'](_0x2c2d87=>child_types_1[_0x44a001(0x180)][_0x44a001(0x14b)](_0x2c2d87[_0x44a001(0x174)])?-0x1:0x1);let _0x2fe86f=0x0;while(_0xdebb28[_0x44a001(0x156)]){const _0x27cc69=_0xdebb28[_0x44a001(0x134)](0x0,this[_0x44a001(0x142)]);await this[_0x44a001(0x16a)]['removeComponents'](_0x27cc69),_0x2fe86f+=_0x27cc69[_0x44a001(0x156)],this['sfLogger'][_0x44a001(0x17e)](this[_0x44a001(0x186)]+_0x44a001(0x172)+_0x2fe86f+'/'+this[_0x44a001(0x111)]+_0x44a001(0x166)),await this['sfLogger'][_0x44a001(0x12b)]();}}async['cleanUp'](){const _0x5bfbb1=a103_0x888374;this[_0x5bfbb1(0x178)]&&await this[_0x5bfbb1(0x178)][_0x5bfbb1(0x173)]()['catch'](()=>void 0x0),this[_0x5bfbb1(0x16a)]&&await this['mdapiUtils'][_0x5bfbb1(0x173)]()[_0x5bfbb1(0x133)](()=>void 0x0),this[_0x5bfbb1(0x129)]&&await this[_0x5bfbb1(0x129)][_0x5bfbb1(0x173)]()['catch'](()=>void 0x0);}async[a103_0x888374(0x167)](){const _0x116f5e=a103_0x888374,{repo:_0x4a149f,branch:_0x4cf007,components:_0x4b4f25,convertToSFDX:_0x3d3e76,message:_0x5838a1,user:_0x224002}=this[_0x116f5e(0x153)];this[_0x116f5e(0x16a)]=new mdapi_utils_1[(_0x116f5e(0x15e))](),this['gitUtils']=new git_utils_1['GitUtils'](await this[_0x116f5e(0x120)]()),this[_0x116f5e(0x129)]=new sfdx_utils_1[(_0x116f5e(0x160))]();let _0x4c6f18=_0x3d3e76;try{await this['sfLogger'][_0x116f5e(0x17e)](this[_0x116f5e(0x186)]+_0x116f5e(0x179))['send'](),await this[_0x116f5e(0x178)]['clone'](_0x4cf007['name'],_0x4a149f['name']);!this[_0x116f5e(0x153)][_0x116f5e(0x13b)]?(this[_0x116f5e(0x121)][_0x116f5e(0x17e)](this[_0x116f5e(0x186)]+_0x116f5e(0x136)),await this[_0x116f5e(0x16a)]['prepareMdapi'](this[_0x116f5e(0x178)][_0x116f5e(0x146)])):this[_0x116f5e(0x121)][_0x116f5e(0x17e)](this[_0x116f5e(0x186)]+_0x116f5e(0x14c));await this[_0x116f5e(0x121)][_0x116f5e(0x17e)](this[_0x116f5e(0x186)]+'\x20Checking\x20written\x20components.')['send']();_0x4b4f25['writed']&&(this['sfLogger']['log'](this[_0x116f5e(0x186)]+_0x116f5e(0x13f)),this[_0x116f5e(0x154)]=_0x4b4f25[_0x116f5e(0x11b)]['length'],await this[_0x116f5e(0x185)](_0x4b4f25[_0x116f5e(0x11b)]),await this[_0x116f5e(0x121)][_0x116f5e(0x12b)]());await this['sfLogger'][_0x116f5e(0x17e)](this[_0x116f5e(0x186)]+_0x116f5e(0x16c))['send']();_0x4b4f25[_0x116f5e(0x12d)]&&(this[_0x116f5e(0x121)][_0x116f5e(0x17e)](this[_0x116f5e(0x186)]+_0x116f5e(0x13a)),this[_0x116f5e(0x111)]=_0x4b4f25[_0x116f5e(0x12d)][_0x116f5e(0x156)],await this[_0x116f5e(0x15d)](_0x4b4f25[_0x116f5e(0x12d)]),await this['sfLogger'][_0x116f5e(0x12b)]());await this['sfLogger'][_0x116f5e(0x12b)]();const _0x1a58f1=await fs_internal_1['FS'][_0x116f5e(0x11d)](this[_0x116f5e(0x178)][_0x116f5e(0x146)]);await sfdx_utils_2[_0x116f5e(0x115)][_0x116f5e(0x130)](this[_0x116f5e(0x178)][_0x116f5e(0x146)])?(_0x4c6f18=!![],await fs_internal_1['FS'][_0x116f5e(0x173)]((0x0,path_1[_0x116f5e(0x140)])(this['gitUtils']['dir'],_0x116f5e(0x144)))):(_0x4c6f18&&(!_0x1a58f1&&(_0x4c6f18=![])),await this[_0x116f5e(0x178)][_0x116f5e(0x11a)]());_0x4c6f18?(await this[_0x116f5e(0x121)]['log'](this[_0x116f5e(0x186)]+_0x116f5e(0x17b))['send'](),await this[_0x116f5e(0x129)][_0x116f5e(0x122)](this[_0x116f5e(0x16a)][_0x116f5e(0x146)]),await this['sfdxUtils'][_0x116f5e(0x152)](this[_0x116f5e(0x178)]['dir'],!_0x1a58f1),await this['sfdxUtils'][_0x116f5e(0x173)]()):(await this[_0x116f5e(0x121)][_0x116f5e(0x17e)](this[_0x116f5e(0x186)]+_0x116f5e(0x17f))[_0x116f5e(0x12b)](),await this[_0x116f5e(0x16a)][_0x116f5e(0x17a)](this[_0x116f5e(0x178)][_0x116f5e(0x146)]));await this['sfLogger'][_0x116f5e(0x17e)](this[_0x116f5e(0x186)]+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')['send'](),await this[_0x116f5e(0x178)][_0x116f5e(0x15b)](_0x5838a1,{'email':constants_1[_0x116f5e(0x149)],'name':_0x224002[_0x116f5e(0x13c)]},_0x4cf007[_0x116f5e(0x13c)]),await this['gitUtils']['removeDir'](),await this['mdapiUtils']['removeDir']();const _0x408cd4=this[_0x116f5e(0x154)]+this[_0x116f5e(0x111)];await this['sfLogger'][_0x116f5e(0x17e)](this[_0x116f5e(0x186)]+_0x116f5e(0x11f)+(Date[_0x116f5e(0x11c)]()-this[_0x116f5e(0x125)])+_0x116f5e(0x15a)+_0x408cd4+'.')[_0x116f5e(0x12b)]();}catch(_0x59cc5b){await this[_0x116f5e(0x159)](),await this[_0x116f5e(0x121)]['error'](this['prefix']+'\x20'+_0x59cc5b)[_0x116f5e(0x12b)]();throw _0x59cc5b;}}async[a103_0x888374(0x124)](_0x6476fa,_0x473399){const _0x406c60=a103_0x888374;var _0x8e6825,_0x39146d;this[_0x406c60(0x121)]=typedi_1[_0x406c60(0x180)][_0x406c60(0x116)](providers_tokens_1[_0x406c60(0x161)][_0x406c60(0x183)]),this['prefix']=(_0x473399?_0x473399+'\x20':'')+'['+commit_components_dto_1[_0x406c60(0x110)]['name']+']',await this[_0x406c60(0x121)]['log'](this['prefix']+_0x406c60(0x176));const _0x16a82d=!!((_0x8e6825=_0x6476fa[_0x406c60(0x177)])===null||_0x8e6825===void 0x0?void 0x0:_0x8e6825[_0x406c60(0x11b)])||!!((_0x39146d=_0x6476fa['components'])===null||_0x39146d===void 0x0?void 0x0:_0x39146d['deleted']);if(!_0x16a82d){await this[_0x406c60(0x121)]['log'](this[_0x406c60(0x186)]+_0x406c60(0x13d))[_0x406c60(0x12b)]();return;}this[_0x406c60(0x153)]=_0x6476fa,await this[_0x406c60(0x167)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]})],CommitComponentsJob),exports[a103_0x888374(0x182)]=CommitComponentsJob;