function a104_0x26bb(){const _0x5aa109=['decorate','CommitComponentsDto','COMPONENTS_PER_TICK','exec','getRemote','splice','copyVlocityComponents','clone','clearDir','8199420JEtevY','credentials','fileName','defineProperty','provider','../../internal/fs.internal','43645259zBodQr','../utils/sfdx.utils','(((.+)+)+)+$','components','../../providers/api/bitbucket-api.service','force','mdapiUtils','logger','../../../../constants','copyMdapiTo','://','copyProjectTo','1425650ORzgxo','CommitComponentsJob','\x20Wrote\x20','type','events','toString','catch','MDApiUtils','cleanUp','SFDXUtils','prototype','removeDir','getGitShellAuthorizationString','gitUrl','createProjectFrom','__decorate','../dto/commit-components.dto','2455145mxRPNp','isSFDXProject','now','__importStar','sfdxUtils','Tokens','getOwnPropertyDescriptor','startTime','error','fileType','prepareMdapi','master','name','default','\x20components','groupComponentsByFileName','commitData','search','removeComponents','../../providers/types/git-provider','configurable','deleted','run','call','345908SvAQyS','typedi','\x20Start\x20cloning\x20repository.','dir','\x20Prepare\x20mdapi\x20files.','\x20Start\x20converting\x20to\x20SFDX.','FORCE_APP_DEFAULT_DIR','send','Bitbucket','prefix','sfLogger','__esModule','replace','\x20Nothing\x20to\x20commit.\x20Skip.','isEmptyDir','writeComponents','push','commitAndPush','isLoggedIn','length','ms.\x20Committed\x20components\x20-\x20','reduce','4521249cgbkhD','apply','Service','hasOwnProperty','BitbucketApiService','__createBinding','gitUtils','writeFlosumComponents','join','\x20Preparing\x20to\x20delete\x20components','componentsToWrite','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','writed','getProtocol','sort','__setModuleDefault','get','DEFAULT_GIT_USER_EMAIL','writable','object','\x20Checking\x20written\x20components.','\x20Copying\x20mdapi\x20to\x20git\x20folder.','1194992AyeKVZ','componentsToDelete','log','../../providers/providers.tokens'];a104_0x26bb=function(){return _0x5aa109;};return a104_0x26bb();}const a104_0x5cd475=a104_0x4ef6;function a104_0x4ef6(_0x51da78,_0x24f0c8){const _0x1cd07a=a104_0x26bb();return a104_0x4ef6=function(_0x1ca5f8,_0x1a13ca){_0x1ca5f8=_0x1ca5f8-0xd0;let _0x26bb16=_0x1cd07a[_0x1ca5f8];return _0x26bb16;},a104_0x4ef6(_0x51da78,_0x24f0c8);}(function(_0x1541ad,_0x500045){const _0x3c75d5=a104_0x4ef6,_0x5ed512=_0x1541ad();while(!![]){try{const _0xeed135=-parseInt(_0x3c75d5(0x119))/0x1+-parseInt(_0x3c75d5(0xfa))/0x2+-parseInt(_0x3c75d5(0xe4))/0x3+-parseInt(_0x3c75d5(0x142))/0x4+-parseInt(_0x3c75d5(0x12a))/0x5+-parseInt(_0x3c75d5(0x107))/0x6+parseInt(_0x3c75d5(0x10d))/0x7;if(_0xeed135===_0x500045)break;else _0x5ed512['push'](_0x5ed512['shift']());}catch(_0x3bde8f){_0x5ed512['push'](_0x5ed512['shift']());}}}(a104_0x26bb,0xb9b9c));const a104_0x1a13ca=(function(){let _0xe615ea=!![];return function(_0x41e902,_0x57cae0){const _0x7b6d97=_0xe615ea?function(){const _0x1c5bfa=a104_0x4ef6;if(_0x57cae0){const _0x254f4c=_0x57cae0[_0x1c5bfa(0xe5)](_0x41e902,arguments);return _0x57cae0=null,_0x254f4c;}}:function(){};return _0xe615ea=![],_0x7b6d97;};}()),a104_0x1ca5f8=a104_0x1a13ca(this,function(){const _0x40f831=a104_0x4ef6;return a104_0x1ca5f8[_0x40f831(0x11e)]()[_0x40f831(0x13b)](_0x40f831(0x10f))[_0x40f831(0x11e)]()['constructor'](a104_0x1ca5f8)[_0x40f831(0x13b)](_0x40f831(0x10f));});a104_0x1ca5f8();'use strict';var __createBinding=this&&this[a104_0x5cd475(0xe9)]||(Object['create']?function(_0x4c5e13,_0x2d8343,_0xe223c4,_0x30c6f8){const _0x5ddc43=a104_0x5cd475;if(_0x30c6f8===undefined)_0x30c6f8=_0xe223c4;var _0x1d4d2d=Object[_0x5ddc43(0x130)](_0x2d8343,_0xe223c4);(!_0x1d4d2d||(_0x5ddc43(0xf4)in _0x1d4d2d?!_0x2d8343[_0x5ddc43(0xd9)]:_0x1d4d2d[_0x5ddc43(0xf6)]||_0x1d4d2d[_0x5ddc43(0x13e)]))&&(_0x1d4d2d={'enumerable':!![],'get':function(){return _0x2d8343[_0xe223c4];}}),Object[_0x5ddc43(0x10a)](_0x4c5e13,_0x30c6f8,_0x1d4d2d);}:function(_0x125996,_0x446ef5,_0x23a833,_0x45c284){if(_0x45c284===undefined)_0x45c284=_0x23a833;_0x125996[_0x45c284]=_0x446ef5[_0x23a833];}),__setModuleDefault=this&&this[a104_0x5cd475(0xf3)]||(Object['create']?function(_0x3bfda1,_0x1539ef){const _0x4ac079=a104_0x5cd475;Object[_0x4ac079(0x10a)](_0x3bfda1,_0x4ac079(0x137),{'enumerable':!![],'value':_0x1539ef});}:function(_0x4d2388,_0x26b498){const _0x5594d7=a104_0x5cd475;_0x4d2388[_0x5594d7(0x137)]=_0x26b498;}),__decorate=this&&this[a104_0x5cd475(0x128)]||function(_0x3d136b,_0x3f8b9c,_0x5db0a4,_0x1eabf4){const _0x35cb2c=a104_0x5cd475;var _0x46ce2b=arguments[_0x35cb2c(0xe1)],_0x1a0115=_0x46ce2b<0x3?_0x3f8b9c:_0x1eabf4===null?_0x1eabf4=Object[_0x35cb2c(0x130)](_0x3f8b9c,_0x5db0a4):_0x1eabf4,_0x2c8ada;if(typeof Reflect===_0x35cb2c(0xf7)&&typeof Reflect[_0x35cb2c(0xfe)]==='function')_0x1a0115=Reflect['decorate'](_0x3d136b,_0x3f8b9c,_0x5db0a4,_0x1eabf4);else{for(var _0x2fbe29=_0x3d136b[_0x35cb2c(0xe1)]-0x1;_0x2fbe29>=0x0;_0x2fbe29--)if(_0x2c8ada=_0x3d136b[_0x2fbe29])_0x1a0115=(_0x46ce2b<0x3?_0x2c8ada(_0x1a0115):_0x46ce2b>0x3?_0x2c8ada(_0x3f8b9c,_0x5db0a4,_0x1a0115):_0x2c8ada(_0x3f8b9c,_0x5db0a4))||_0x1a0115;}return _0x46ce2b>0x3&&_0x1a0115&&Object[_0x35cb2c(0x10a)](_0x3f8b9c,_0x5db0a4,_0x1a0115),_0x1a0115;},__importStar=this&&this[a104_0x5cd475(0x12d)]||function(_0x2bcc20){const _0x277ef8=a104_0x5cd475;if(_0x2bcc20&&_0x2bcc20['__esModule'])return _0x2bcc20;var _0x545587={};if(_0x2bcc20!=null){for(var _0x366447 in _0x2bcc20)if(_0x366447!==_0x277ef8(0x137)&&Object[_0x277ef8(0x123)][_0x277ef8(0xe7)][_0x277ef8(0x141)](_0x2bcc20,_0x366447))__createBinding(_0x545587,_0x2bcc20,_0x366447);}return __setModuleDefault(_0x545587,_0x2bcc20),_0x545587;},__importDefault=this&&this['__importDefault']||function(_0x2424c7){const _0x33a212=a104_0x5cd475;return _0x2424c7&&_0x2424c7[_0x33a212(0xd9)]?_0x2424c7:{'default':_0x2424c7};};Object[a104_0x5cd475(0x10a)](exports,a104_0x5cd475(0xd9),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const commit_components_dto_1=require(a104_0x5cd475(0x129)),events_1=__importDefault(require(a104_0x5cd475(0x11d))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a104_0x5cd475(0x10e)),typedi_1=__importStar(require(a104_0x5cd475(0x143))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require('../../../shared/utils'),constants_1=require(a104_0x5cd475(0x115)),git_provider_1=require(a104_0x5cd475(0x13d)),bitbucket_api_service_1=require(a104_0x5cd475(0x111)),sfdx_utils_2=require('../../salesforce/utils/sfdx.utils'),fs_internal_1=require(a104_0x5cd475(0x10c)),path_1=require('path'),providers_tokens_1=require(a104_0x5cd475(0xfd)),constants_2=require(a104_0x5cd475(0x115));let CommitComponentsJob=class CommitComponentsJob extends events_1[a104_0x5cd475(0x137)]{constructor(){const _0x10b8db=a104_0x5cd475;super(...arguments),this[_0x10b8db(0x100)]=0x3e8,this['componentsToWrite']=0x0,this['componentsToDelete']=0x0,this[_0x10b8db(0x131)]=Date[_0x10b8db(0x12c)]();}async[a104_0x5cd475(0x102)](){const _0x378eba=a104_0x5cd475,{repo:_0x3aea38}=this[_0x378eba(0x13a)],_0x1dbe87=typedi_1['default']['get'](providers_tokens_1[_0x378eba(0x12f)][_0x378eba(0x108)]);if(this['commitData'][_0x378eba(0x10b)]===git_provider_1['GitProvider'][_0x378eba(0xd6)]){const _0x51fed3=typedi_1['default'][_0x378eba(0xf4)](bitbucket_api_service_1[_0x378eba(0xe8)]);await _0x51fed3[_0x378eba(0xe0)]();}return _0x3aea38[_0x378eba(0x126)][_0x378eba(0xda)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x378eba(0xf1)])(_0x3aea38[_0x378eba(0x126)])+_0x378eba(0x117)+_0x1dbe87[_0x378eba(0x125)]()+'@');}[a104_0x5cd475(0x139)](_0xfad450){const _0x3693fd=a104_0x5cd475;var _0x1ff56c;_0xfad450[_0x3693fd(0xf2)](_0x59ba75=>child_types_1[_0x3693fd(0x137)]['includes'](_0x59ba75[_0x3693fd(0x133)])?0x1:-0x1);const _0x49640f={};for(const _0x22aed1 of _0xfad450){_0x49640f[_0x1ff56c=_0x22aed1[_0x3693fd(0x109)]]||(_0x49640f[_0x1ff56c]=[]),_0x49640f[_0x22aed1['fileName']][_0x3693fd(0xde)](_0x22aed1);}return Object['values'](_0x49640f)[_0x3693fd(0xe3)]((_0x334ff6,_0x39e6d6)=>[..._0x334ff6,..._0x39e6d6],[]);}async[a104_0x5cd475(0xdd)](_0x237524){const _0xae4d=a104_0x5cd475;_0x237524=this[_0xae4d(0x139)](_0x237524);let _0x533ddd=0x0;while(_0x237524[_0xae4d(0xe1)]){const _0x245830=_0x237524[_0xae4d(0x103)](0x0,this['COMPONENTS_PER_TICK']);await this['mdapiUtils'][_0xae4d(0xeb)](_0x245830,{'skipChildErrors':this[_0xae4d(0x13a)]['branch']['name']===_0xae4d(0x135)}),_0x533ddd+=_0x245830['length'],this[_0xae4d(0xd8)][_0xae4d(0xfc)](this[_0xae4d(0xd7)]+_0xae4d(0x11b)+_0x533ddd+'/'+this[_0xae4d(0xee)]+_0xae4d(0x138)),await this[_0xae4d(0xd8)][_0xae4d(0xd5)]();}}async[a104_0x5cd475(0x13c)](_0x4a638f){const _0x151a72=a104_0x5cd475;_0x4a638f[_0x151a72(0xf2)](_0x524733=>child_types_1[_0x151a72(0x137)]['includes'](_0x524733[_0x151a72(0x11c)])?-0x1:0x1);let _0x5a4f07=0x0;while(_0x4a638f[_0x151a72(0xe1)]){const _0x476fb8=_0x4a638f[_0x151a72(0x103)](0x0,this[_0x151a72(0x100)]);await this[_0x151a72(0x113)][_0x151a72(0x13c)](_0x476fb8),_0x5a4f07+=_0x476fb8[_0x151a72(0xe1)],this['sfLogger']['log'](this[_0x151a72(0xd7)]+'\x20Deleted\x20'+_0x5a4f07+'/'+this[_0x151a72(0xfb)]+'\x20components'),await this[_0x151a72(0xd8)][_0x151a72(0xd5)]();}}async[a104_0x5cd475(0x121)](){const _0x11b2e4=a104_0x5cd475;this[_0x11b2e4(0xea)]&&await this[_0x11b2e4(0xea)][_0x11b2e4(0x124)]()[_0x11b2e4(0x11f)](()=>void 0x0),this[_0x11b2e4(0x113)]&&await this['mdapiUtils'][_0x11b2e4(0x124)]()[_0x11b2e4(0x11f)](()=>void 0x0),this['sfdxUtils']&&await this['sfdxUtils'][_0x11b2e4(0x124)]()[_0x11b2e4(0x11f)](()=>void 0x0);}async['exec'](){const _0x47b0ae=a104_0x5cd475,{repo:_0x1e7ea,branch:_0x3dd47c,components:_0x32e674,convertToSFDX:_0xc34450,message:_0x5634c7,user:_0x274937}=this[_0x47b0ae(0x13a)];this[_0x47b0ae(0x113)]=new mdapi_utils_1[(_0x47b0ae(0x120))](),this[_0x47b0ae(0xea)]=new git_utils_1['GitUtils'](await this[_0x47b0ae(0x102)]()),this[_0x47b0ae(0x12e)]=new sfdx_utils_1[(_0x47b0ae(0x122))]();let _0x3db5ef=_0xc34450;try{await this[_0x47b0ae(0xd8)][_0x47b0ae(0xfc)](this[_0x47b0ae(0xd7)]+_0x47b0ae(0xd0))[_0x47b0ae(0xd5)](),await this['gitUtils'][_0x47b0ae(0x105)](_0x3dd47c['name'],_0x1e7ea['name']);!this[_0x47b0ae(0x13a)][_0x47b0ae(0x112)]?(this[_0x47b0ae(0xd8)][_0x47b0ae(0xfc)](this[_0x47b0ae(0xd7)]+_0x47b0ae(0xd2)),await this['mdapiUtils'][_0x47b0ae(0x134)](this[_0x47b0ae(0xea)][_0x47b0ae(0xd1)])):this[_0x47b0ae(0xd8)][_0x47b0ae(0xfc)](this[_0x47b0ae(0xd7)]+_0x47b0ae(0xef));await this[_0x47b0ae(0xd8)][_0x47b0ae(0xfc)](this[_0x47b0ae(0xd7)]+_0x47b0ae(0xf8))[_0x47b0ae(0xd5)]();_0x32e674[_0x47b0ae(0xf0)]&&(this[_0x47b0ae(0xd8)][_0x47b0ae(0xfc)](this[_0x47b0ae(0xd7)]+'\x20Preparing\x20to\x20write\x20components'),this[_0x47b0ae(0xee)]=_0x32e674[_0x47b0ae(0xf0)][_0x47b0ae(0xe1)],await this['writeComponents'](_0x32e674[_0x47b0ae(0xf0)]),await this['sfLogger']['send']());await this['sfLogger'][_0x47b0ae(0xfc)](this[_0x47b0ae(0xd7)]+'\x20Checking\x20deleted\x20components.')['send']();_0x32e674[_0x47b0ae(0x13f)]&&(this['sfLogger'][_0x47b0ae(0xfc)](this[_0x47b0ae(0xd7)]+_0x47b0ae(0xed)),this['componentsToDelete']=_0x32e674['deleted'][_0x47b0ae(0xe1)],await this[_0x47b0ae(0x13c)](_0x32e674[_0x47b0ae(0x13f)]),await this[_0x47b0ae(0xd8)][_0x47b0ae(0xd5)]());await this[_0x47b0ae(0xd8)][_0x47b0ae(0xd5)]();const _0x5c54c5=await fs_internal_1['FS'][_0x47b0ae(0xdc)](this[_0x47b0ae(0xea)]['dir']);await sfdx_utils_2['SFDX'][_0x47b0ae(0x12b)](this['gitUtils'][_0x47b0ae(0xd1)])?(_0x3db5ef=!![],await fs_internal_1['FS'][_0x47b0ae(0x124)]((0x0,path_1[_0x47b0ae(0xec)])(this[_0x47b0ae(0xea)]['dir'],'force-app'))):(_0x3db5ef&&(!_0x5c54c5&&(_0x3db5ef=![])),await this[_0x47b0ae(0xea)][_0x47b0ae(0x106)]());_0x3db5ef?(await this[_0x47b0ae(0xd8)][_0x47b0ae(0xfc)](this[_0x47b0ae(0xd7)]+_0x47b0ae(0xd3))[_0x47b0ae(0xd5)](),await this[_0x47b0ae(0x12e)][_0x47b0ae(0x127)](this[_0x47b0ae(0x113)][_0x47b0ae(0xd1)]),await this[_0x47b0ae(0x12e)][_0x47b0ae(0x118)](this[_0x47b0ae(0xea)][_0x47b0ae(0xd1)],!_0x5c54c5),await this['sfdxUtils'][_0x47b0ae(0x104)](this[_0x47b0ae(0x113)]['dir'],(0x0,path_1[_0x47b0ae(0xec)])(this[_0x47b0ae(0xea)][_0x47b0ae(0xd1)],constants_2[_0x47b0ae(0xd4)])),await this[_0x47b0ae(0x12e)][_0x47b0ae(0x124)]()):(await this[_0x47b0ae(0xd8)][_0x47b0ae(0xfc)](this[_0x47b0ae(0xd7)]+_0x47b0ae(0xf9))[_0x47b0ae(0xd5)](),await this[_0x47b0ae(0x113)][_0x47b0ae(0x116)](this[_0x47b0ae(0xea)]['dir']));await this[_0x47b0ae(0xd8)][_0x47b0ae(0xfc)](this['prefix']+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')[_0x47b0ae(0xd5)](),await this[_0x47b0ae(0xea)][_0x47b0ae(0xdf)](_0x5634c7,{'email':constants_1[_0x47b0ae(0xf5)],'name':_0x274937[_0x47b0ae(0x136)]},_0x3dd47c[_0x47b0ae(0x136)]),await this[_0x47b0ae(0xea)][_0x47b0ae(0x124)](),await this['mdapiUtils'][_0x47b0ae(0x124)]();const _0x5989b4=this['componentsToWrite']+this[_0x47b0ae(0xfb)];await this[_0x47b0ae(0xd8)][_0x47b0ae(0xfc)](this[_0x47b0ae(0xd7)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x47b0ae(0x12c)]()-this['startTime'])+_0x47b0ae(0xe2)+_0x5989b4+'.')[_0x47b0ae(0xd5)]();}catch(_0x296374){await this[_0x47b0ae(0x121)](),await this[_0x47b0ae(0xd8)][_0x47b0ae(0x132)](this[_0x47b0ae(0xd7)]+'\x20'+_0x296374)[_0x47b0ae(0xd5)]();throw _0x296374;}}async[a104_0x5cd475(0x140)](_0x4da76c,_0x2c9ab1){const _0x8e2aa9=a104_0x5cd475;var _0xa8a882,_0x3f8d67;this[_0x8e2aa9(0xd8)]=typedi_1['default'][_0x8e2aa9(0xf4)](providers_tokens_1[_0x8e2aa9(0x12f)][_0x8e2aa9(0x114)]),this[_0x8e2aa9(0xd7)]=(_0x2c9ab1?_0x2c9ab1+'\x20':'')+'['+commit_components_dto_1[_0x8e2aa9(0xff)]['name']+']',await this['sfLogger'][_0x8e2aa9(0xfc)](this[_0x8e2aa9(0xd7)]+'\x20Checking\x20commit\x20components.');const _0x4f0c4a=!!((_0xa8a882=_0x4da76c[_0x8e2aa9(0x110)])===null||_0xa8a882===void 0x0?void 0x0:_0xa8a882[_0x8e2aa9(0xf0)])||!!((_0x3f8d67=_0x4da76c[_0x8e2aa9(0x110)])===null||_0x3f8d67===void 0x0?void 0x0:_0x3f8d67[_0x8e2aa9(0x13f)]);if(!_0x4f0c4a){await this[_0x8e2aa9(0xd8)][_0x8e2aa9(0xfc)](this['prefix']+_0x8e2aa9(0xdb))[_0x8e2aa9(0xd5)]();return;}this[_0x8e2aa9(0x13a)]=_0x4da76c,await this[_0x8e2aa9(0x101)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0x5cd475(0xe6)])({'transient':!![]})],CommitComponentsJob),exports[a104_0x5cd475(0x11a)]=CommitComponentsJob;