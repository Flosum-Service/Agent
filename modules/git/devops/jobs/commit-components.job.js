const a125_0x5aaf80=a125_0x56fb;(function(_0x7bce34,_0x3d8447){const _0x3342b5=a125_0x56fb,_0x192ab1=_0x7bce34();while(!![]){try{const _0x45d7a4=parseInt(_0x3342b5(0x109))/0x1+parseInt(_0x3342b5(0x154))/0x2*(-parseInt(_0x3342b5(0x12a))/0x3)+parseInt(_0x3342b5(0x118))/0x4+parseInt(_0x3342b5(0x11b))/0x5+parseInt(_0x3342b5(0x130))/0x6*(-parseInt(_0x3342b5(0x149))/0x7)+parseInt(_0x3342b5(0x10b))/0x8*(parseInt(_0x3342b5(0x137))/0x9)+-parseInt(_0x3342b5(0x12f))/0xa;if(_0x45d7a4===_0x3d8447)break;else _0x192ab1['push'](_0x192ab1['shift']());}catch(_0x23e440){_0x192ab1['push'](_0x192ab1['shift']());}}}(a125_0x5e89,0xf0a3f));const a125_0x17a41b=(function(){let _0xcb4417=!![];return function(_0xd291fd,_0x276bfd){const _0x1684e8=_0xcb4417?function(){if(_0x276bfd){const _0x2642b7=_0x276bfd['apply'](_0xd291fd,arguments);return _0x276bfd=null,_0x2642b7;}}:function(){};return _0xcb4417=![],_0x1684e8;};}()),a125_0x51c842=a125_0x17a41b(this,function(){const _0x2c5d93=a125_0x56fb;return a125_0x51c842[_0x2c5d93(0x131)]()[_0x2c5d93(0xf8)](_0x2c5d93(0xee))[_0x2c5d93(0x131)]()[_0x2c5d93(0x14b)](a125_0x51c842)[_0x2c5d93(0xf8)](_0x2c5d93(0xee));});a125_0x51c842();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a125_0x5aaf80(0x15d)]?function(_0x14220b,_0x52ce74,_0x69b344,_0x203d00){const _0x40e6ea=a125_0x5aaf80;if(_0x203d00===undefined)_0x203d00=_0x69b344;var _0x39f388=Object[_0x40e6ea(0xf9)](_0x52ce74,_0x69b344);(!_0x39f388||(_0x40e6ea(0x14d)in _0x39f388?!_0x52ce74[_0x40e6ea(0xf2)]:_0x39f388[_0x40e6ea(0x11f)]||_0x39f388[_0x40e6ea(0x163)]))&&(_0x39f388={'enumerable':!![],'get':function(){return _0x52ce74[_0x69b344];}}),Object[_0x40e6ea(0x141)](_0x14220b,_0x203d00,_0x39f388);}:function(_0x5634f3,_0x3c10c8,_0x27a7c8,_0x2b2b45){if(_0x2b2b45===undefined)_0x2b2b45=_0x27a7c8;_0x5634f3[_0x2b2b45]=_0x3c10c8[_0x27a7c8];}),__setModuleDefault=this&&this[a125_0x5aaf80(0x157)]||(Object[a125_0x5aaf80(0x15d)]?function(_0x6fbdcd,_0x3613db){const _0x4d7aa8=a125_0x5aaf80;Object[_0x4d7aa8(0x141)](_0x6fbdcd,_0x4d7aa8(0x114),{'enumerable':!![],'value':_0x3613db});}:function(_0x3727c8,_0x345402){const _0x5cecdd=a125_0x5aaf80;_0x3727c8[_0x5cecdd(0x114)]=_0x345402;}),__decorate=this&&this[a125_0x5aaf80(0x15a)]||function(_0x49f2f8,_0x29e483,_0x143eb9,_0x285fa2){const _0x4577fa=a125_0x5aaf80;var _0x155708=arguments['length'],_0x5ef116=_0x155708<0x3?_0x29e483:_0x285fa2===null?_0x285fa2=Object[_0x4577fa(0xf9)](_0x29e483,_0x143eb9):_0x285fa2,_0x114bcd;if(typeof Reflect==='object'&&typeof Reflect['decorate']==='function')_0x5ef116=Reflect[_0x4577fa(0x108)](_0x49f2f8,_0x29e483,_0x143eb9,_0x285fa2);else{for(var _0x378c4f=_0x49f2f8[_0x4577fa(0x140)]-0x1;_0x378c4f>=0x0;_0x378c4f--)if(_0x114bcd=_0x49f2f8[_0x378c4f])_0x5ef116=(_0x155708<0x3?_0x114bcd(_0x5ef116):_0x155708>0x3?_0x114bcd(_0x29e483,_0x143eb9,_0x5ef116):_0x114bcd(_0x29e483,_0x143eb9))||_0x5ef116;}return _0x155708>0x3&&_0x5ef116&&Object[_0x4577fa(0x141)](_0x29e483,_0x143eb9,_0x5ef116),_0x5ef116;},__importStar=this&&this[a125_0x5aaf80(0xf4)]||function(_0x5b9f90){const _0x505bc4=a125_0x5aaf80;if(_0x5b9f90&&_0x5b9f90[_0x505bc4(0xf2)])return _0x5b9f90;var _0x11f1b8={};if(_0x5b9f90!=null){for(var _0x2448ec in _0x5b9f90)if(_0x2448ec!=='default'&&Object['prototype'][_0x505bc4(0x132)][_0x505bc4(0x152)](_0x5b9f90,_0x2448ec))__createBinding(_0x11f1b8,_0x5b9f90,_0x2448ec);}return __setModuleDefault(_0x11f1b8,_0x5b9f90),_0x11f1b8;},__importDefault=this&&this[a125_0x5aaf80(0x127)]||function(_0x485e03){const _0x3c3bf4=a125_0x5aaf80;return _0x485e03&&_0x485e03[_0x3c3bf4(0xf2)]?_0x485e03:{'default':_0x485e03};};Object[a125_0x5aaf80(0x141)](exports,a125_0x5aaf80(0xf2),{'value':!![]}),exports[a125_0x5aaf80(0x15b)]=void 0x0;const commit_components_dto_1=require(a125_0x5aaf80(0x101)),events_1=__importDefault(require(a125_0x5aaf80(0x147))),git_utils_1=require(a125_0x5aaf80(0x158)),mdapi_utils_1=require(a125_0x5aaf80(0x102)),sfdx_utils_1=require(a125_0x5aaf80(0x160)),typedi_1=__importStar(require(a125_0x5aaf80(0x135))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require(a125_0x5aaf80(0xf7)),constants_1=require('../../../../constants'),git_provider_1=require(a125_0x5aaf80(0x12c)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),sfdx_utils_2=require(a125_0x5aaf80(0x126)),fs_internal_1=require(a125_0x5aaf80(0x111)),path_1=require(a125_0x5aaf80(0xf5)),providers_tokens_1=require(a125_0x5aaf80(0x11a)),constants_2=require(a125_0x5aaf80(0x106));function a125_0x56fb(_0x2ec30b,_0x3a4ba7){const _0x41f506=a125_0x5e89();return a125_0x56fb=function(_0x51c842,_0x17a41b){_0x51c842=_0x51c842-0xed;let _0x5e89b8=_0x41f506[_0x51c842];return _0x5e89b8;},a125_0x56fb(_0x2ec30b,_0x3a4ba7);}let CommitComponentsJob=class CommitComponentsJob extends events_1[a125_0x5aaf80(0x114)]{constructor(){const _0xdd3fcb=a125_0x5aaf80;super(...arguments),this[_0xdd3fcb(0x148)]=0x3e8,this[_0xdd3fcb(0x117)]=0x0,this[_0xdd3fcb(0xef)]=0x0,this['startTime']=Date[_0xdd3fcb(0x13b)]();}async[a125_0x5aaf80(0x100)](){const _0x2c0825=a125_0x5aaf80,{repo:_0x2c0a4c}=this[_0x2c0825(0x155)],_0x5eaabf=typedi_1[_0x2c0825(0x114)]['get'](providers_tokens_1[_0x2c0825(0xfe)]['credentials']);if(this[_0x2c0825(0x155)][_0x2c0825(0x13a)]===git_provider_1[_0x2c0825(0x15c)]['Bitbucket']){const _0x2efd77=typedi_1[_0x2c0825(0x114)][_0x2c0825(0x14d)](bitbucket_api_service_1[_0x2c0825(0x13e)]);await _0x2efd77[_0x2c0825(0x12b)]();}return _0x2c0a4c[_0x2c0825(0x103)][_0x2c0825(0x119)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x2c0825(0xfa)])(_0x2c0a4c['gitUrl'])+'://'+_0x5eaabf[_0x2c0825(0x159)]()+'@');}['groupComponentsByFileName'](_0x4dbdde){const _0x483ca2=a125_0x5aaf80;var _0x512cdd;_0x4dbdde[_0x483ca2(0x11e)](_0x158041=>child_types_1[_0x483ca2(0x114)][_0x483ca2(0x129)](_0x158041[_0x483ca2(0x13f)])?0x1:-0x1);const _0x1aead3={};for(const _0x358629 of _0x4dbdde){_0x1aead3[_0x512cdd=_0x358629[_0x483ca2(0x14e)]]||(_0x1aead3[_0x512cdd]=[]),_0x1aead3[_0x358629[_0x483ca2(0x14e)]][_0x483ca2(0x125)](_0x358629);}return Object[_0x483ca2(0x11c)](_0x1aead3)[_0x483ca2(0x153)]((_0x3546fc,_0x319fd1)=>[..._0x3546fc,..._0x319fd1],[]);}async[a125_0x5aaf80(0x105)](_0x2f1583){const _0x5d2134=a125_0x5aaf80;_0x2f1583=this[_0x5d2134(0xfc)](_0x2f1583);let _0x2fc3e1=0x0;while(_0x2f1583[_0x5d2134(0x140)]){const _0x312d67=_0x2f1583[_0x5d2134(0x150)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x5d2134(0x10c)]['writeFlosumComponents'](_0x312d67,{'skipChildErrors':this['commitData'][_0x5d2134(0x124)][_0x5d2134(0x128)]===_0x5d2134(0x112),'recordType':this['commitData'][_0x5d2134(0x151)]}),_0x2fc3e1+=_0x312d67['length'],this['sfLogger'][_0x5d2134(0x133)](this[_0x5d2134(0x161)]+_0x5d2134(0x113)+_0x2fc3e1+'/'+this['componentsToWrite']+_0x5d2134(0x145)),await this[_0x5d2134(0x139)]['send']();}}async[a125_0x5aaf80(0x120)](_0xfe1789){const _0x4bb838=a125_0x5aaf80;_0xfe1789[_0x4bb838(0x11e)](_0x6bca29=>child_types_1['default'][_0x4bb838(0x129)](_0x6bca29[_0x4bb838(0x12d)])?-0x1:0x1);let _0x480deb=0x0;while(_0xfe1789[_0x4bb838(0x140)]){const _0x2d4bdd=_0xfe1789['splice'](0x0,this[_0x4bb838(0x148)]);await this[_0x4bb838(0x10c)][_0x4bb838(0x120)](_0x2d4bdd,this[_0x4bb838(0x155)][_0x4bb838(0x151)]),_0x480deb+=_0x2d4bdd[_0x4bb838(0x140)],this[_0x4bb838(0x139)][_0x4bb838(0x133)](this[_0x4bb838(0x161)]+_0x4bb838(0xf0)+_0x480deb+'/'+this[_0x4bb838(0xef)]+_0x4bb838(0x145)),await this[_0x4bb838(0x139)][_0x4bb838(0x10a)]();}}async[a125_0x5aaf80(0x115)](){const _0x2da2bc=a125_0x5aaf80;this[_0x2da2bc(0x116)]&&await this['gitUtils']['removeDir']()[_0x2da2bc(0xf3)](()=>void 0x0),this[_0x2da2bc(0x10c)]&&await this[_0x2da2bc(0x10c)][_0x2da2bc(0x14f)]()[_0x2da2bc(0xf3)](()=>void 0x0),this['sfdxUtils']&&await this['sfdxUtils']['removeDir']()[_0x2da2bc(0xf3)](()=>void 0x0);}async[a125_0x5aaf80(0x121)](){const _0x4662d3=a125_0x5aaf80,{repo:_0xc86364,branch:_0x26f81e,components:_0x54cb26,convertToSFDX:_0x34c29e,message:_0x30cefd,user:_0x540e65}=this[_0x4662d3(0x155)];this[_0x4662d3(0x10c)]=new mdapi_utils_1[(_0x4662d3(0x104))](),this['gitUtils']=new git_utils_1['GitUtils'](await this[_0x4662d3(0x100)]()),this['sfdxUtils']=new sfdx_utils_1[(_0x4662d3(0x162))]();let _0xcd9ad7=_0x34c29e&&this[_0x4662d3(0x144)][_0x4662d3(0x123)](this[_0x4662d3(0x155)][_0x4662d3(0x151)]);try{await this[_0x4662d3(0x139)][_0x4662d3(0x133)](this[_0x4662d3(0x161)]+_0x4662d3(0xfd))[_0x4662d3(0x10a)](),await this[_0x4662d3(0x116)][_0x4662d3(0xf1)](_0x26f81e[_0x4662d3(0x128)],_0xc86364['name']);!this[_0x4662d3(0x155)][_0x4662d3(0x107)]?(this['sfLogger'][_0x4662d3(0x133)](this['prefix']+'\x20Prepare\x20mdapi\x20files.'),await this[_0x4662d3(0x10c)]['prepareMdapi'](this[_0x4662d3(0x116)][_0x4662d3(0xf6)])):this['sfLogger'][_0x4662d3(0x133)](this[_0x4662d3(0x161)]+_0x4662d3(0x14a));await this[_0x4662d3(0x139)][_0x4662d3(0x133)](this['prefix']+_0x4662d3(0xfb))[_0x4662d3(0x10a)]();_0x54cb26[_0x4662d3(0x156)]&&(this[_0x4662d3(0x139)][_0x4662d3(0x133)](this['prefix']+_0x4662d3(0x10f)),this[_0x4662d3(0x117)]=_0x54cb26[_0x4662d3(0x156)][_0x4662d3(0x140)],await this[_0x4662d3(0x105)](_0x54cb26['writed']),await this['sfLogger']['send']());await this[_0x4662d3(0x139)]['log'](this[_0x4662d3(0x161)]+'\x20Checking\x20deleted\x20components.')[_0x4662d3(0x10a)]();_0x54cb26[_0x4662d3(0x15f)]&&(this['sfLogger'][_0x4662d3(0x133)](this['prefix']+'\x20Preparing\x20to\x20delete\x20components'),this['componentsToDelete']=_0x54cb26['deleted'][_0x4662d3(0x140)],await this[_0x4662d3(0x120)](_0x54cb26[_0x4662d3(0x15f)]),await this[_0x4662d3(0x139)][_0x4662d3(0x10a)]());await this[_0x4662d3(0x139)][_0x4662d3(0x10a)]();const _0x1e2958=await fs_internal_1['FS'][_0x4662d3(0x14c)](this[_0x4662d3(0x116)][_0x4662d3(0xf6)]);await sfdx_utils_2[_0x4662d3(0x143)][_0x4662d3(0x122)](this[_0x4662d3(0x116)]['dir'])?(_0xcd9ad7=!![],await fs_internal_1['FS'][_0x4662d3(0x14f)]((0x0,path_1[_0x4662d3(0x164)])(this[_0x4662d3(0x116)][_0x4662d3(0xf6)],_0x4662d3(0x146)))):(_0xcd9ad7&&(!_0x1e2958&&(_0xcd9ad7=![])),await this[_0x4662d3(0x116)]['clearDir']());_0xcd9ad7?(await this[_0x4662d3(0x139)][_0x4662d3(0x133)](this[_0x4662d3(0x161)]+'\x20Start\x20converting\x20to\x20SFDX.')[_0x4662d3(0x10a)](),await this[_0x4662d3(0x144)]['createProjectFrom'](this[_0x4662d3(0x10c)][_0x4662d3(0xf6)]),await this[_0x4662d3(0x144)]['copyProjectTo'](this['gitUtils'][_0x4662d3(0xf6)],!_0x1e2958),await this['sfdxUtils'][_0x4662d3(0xed)](this[_0x4662d3(0x10c)][_0x4662d3(0xf6)],(0x0,path_1[_0x4662d3(0x164)])(this[_0x4662d3(0x116)][_0x4662d3(0xf6)],constants_2[_0x4662d3(0x11d)])),await this[_0x4662d3(0x144)][_0x4662d3(0x14f)]()):(await this[_0x4662d3(0x139)][_0x4662d3(0x133)](this['prefix']+_0x4662d3(0x138))[_0x4662d3(0x10a)](),await this[_0x4662d3(0x10c)][_0x4662d3(0xff)](this['gitUtils'][_0x4662d3(0xf6)]));await this[_0x4662d3(0x139)][_0x4662d3(0x133)](this['prefix']+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')[_0x4662d3(0x10a)](),await this[_0x4662d3(0x116)][_0x4662d3(0x136)](_0x30cefd,{'email':constants_1[_0x4662d3(0x10d)],'name':_0x540e65[_0x4662d3(0x128)]},_0x26f81e[_0x4662d3(0x128)]),await this[_0x4662d3(0x116)][_0x4662d3(0x14f)](),await this[_0x4662d3(0x10c)][_0x4662d3(0x14f)]();const _0x89de60=this[_0x4662d3(0x117)]+this['componentsToDelete'];await this[_0x4662d3(0x139)]['log'](this[_0x4662d3(0x161)]+_0x4662d3(0x12e)+(Date[_0x4662d3(0x13b)]()-this[_0x4662d3(0x134)])+_0x4662d3(0x110)+_0x89de60+'.')[_0x4662d3(0x10a)]();}catch(_0x522720){await this[_0x4662d3(0x115)](),await this[_0x4662d3(0x139)]['error'](this[_0x4662d3(0x161)]+'\x20'+_0x522720)[_0x4662d3(0x10a)]();throw _0x522720;}}async[a125_0x5aaf80(0x13d)](_0x25a47f,_0x3e9a37){const _0x46bc50=a125_0x5aaf80;var _0x4c8c3f,_0x7468c4;this[_0x46bc50(0x139)]=typedi_1[_0x46bc50(0x114)][_0x46bc50(0x14d)](providers_tokens_1[_0x46bc50(0xfe)]['logger']),this['prefix']=(_0x3e9a37?_0x3e9a37+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto']['name']+']',await this[_0x46bc50(0x139)][_0x46bc50(0x133)](this[_0x46bc50(0x161)]+_0x46bc50(0x15e));const _0x57617f=!!((_0x4c8c3f=_0x25a47f[_0x46bc50(0x13c)])===null||_0x4c8c3f===void 0x0?void 0x0:_0x4c8c3f[_0x46bc50(0x156)])||!!((_0x7468c4=_0x25a47f[_0x46bc50(0x13c)])===null||_0x7468c4===void 0x0?void 0x0:_0x7468c4[_0x46bc50(0x15f)]);if(!_0x57617f){await this[_0x46bc50(0x139)]['log'](this[_0x46bc50(0x161)]+_0x46bc50(0x10e))['send']();return;}this['commitData']=_0x25a47f,await this[_0x46bc50(0x121)]();}};function a125_0x5e89(){const _0x3976a3=['sfdxUtils','\x20components','force-app','events','COMPONENTS_PER_TICK','6986DdGSsm','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','constructor','isEmptyDir','get','fileName','removeDir','splice','recordType','call','reduce','82hJjjwU','commitData','writed','__setModuleDefault','../utils/git.utils','getGitShellAuthorizationString','__decorate','CommitComponentsJob','GitProvider','create','\x20Checking\x20commit\x20components.','deleted','../utils/sfdx.utils','prefix','SFDXUtils','configurable','join','copySFDXIgnoredComponents','(((.+)+)+)+$','componentsToDelete','\x20Deleted\x20','clone','__esModule','catch','__importStar','path','dir','../../../shared/utils','search','getOwnPropertyDescriptor','getProtocol','\x20Checking\x20written\x20components.','groupComponentsByFileName','\x20Start\x20cloning\x20repository.','Tokens','copyMdapiTo','getRemote','../dto/commit-components.dto','../utils/mdapi.utils','gitUrl','MDApiUtils','writeComponents','../../../../constants','force','decorate','552068JIcLKd','send','376XUXhsd','mdapiUtils','DEFAULT_GIT_USER_EMAIL','\x20Nothing\x20to\x20commit.\x20Skip.','\x20Preparing\x20to\x20write\x20components','ms.\x20Committed\x20components\x20-\x20','../../internal/fs.internal','master','\x20Wrote\x20','default','cleanUp','gitUtils','componentsToWrite','1783564sIFvAJ','replace','../../providers/providers.tokens','9545445xvGNXo','values','FORCE_APP_DEFAULT_DIR','sort','writable','removeComponents','exec','isSFDXProject','isConvertToSfdx','branch','push','../../salesforce/utils/sfdx.utils','__importDefault','name','includes','128241avxlgK','isLoggedIn','../../providers/types/git-provider','type','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','13256350dSzzcI','1374CwOrSr','toString','hasOwnProperty','log','startTime','typedi','commitAndPush','265293OyfxDB','\x20Copying\x20mdapi\x20to\x20git\x20folder.','sfLogger','provider','now','components','run','BitbucketApiService','fileType','length','defineProperty','Service','SFDX'];a125_0x5e89=function(){return _0x3976a3;};return a125_0x5e89();}CommitComponentsJob=__decorate([(0x0,typedi_1[a125_0x5aaf80(0x142)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;