function a72_0x2040(){const _0x22a43c=['ms.\x20Committed\x20components\x20-\x20','isSFDXProject','commitAndPush','send','DEFAULT_GIT_USER_EMAIL','\x20Preparing\x20to\x20write\x20components','prefix','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','49TlvqYL','\x20Nothing\x20to\x20commit.\x20Skip.','fileName','588cwxHEY','isEmptyDir','force-app','getOwnPropertyDescriptor','62906fnSgBk','__setModuleDefault','__esModule','234WYaTGp','../../providers/types/git-provider','Bitbucket','join','\x20Start\x20converting\x20to\x20SFDX.','object','23089YXctkR','15MekoNT','function','configurable','typedi','getRemote','apply','componentsToDelete','writeComponents','CommitComponentsJob','(((.+)+)+)+$','CommitComponentsDto','SFDXUtils','dir','deleted','prepareMdapi','getProtocol','BitbucketApiService','fileType','\x20components','sfdxUtils','defineProperty','../../providers/providers.tokens','sfLogger','1120600hpnFKb','values','\x20Wrote\x20','name','groupComponentsByFileName','1496564tstcGD','createProjectFrom','writed','__decorate','../../../../constants','force','../utils/mdapi.utils','sort','provider','clone','mdapiUtils','SFDX','\x20Preparing\x20to\x20delete\x20components','GitProvider','splice','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','error','log','catch','get','replace','../../internal/fs.internal','../utils/sfdx.utils','create','decorate','exec','COMPONENTS_PER_TICK','startTime','getGitShellAuthorizationString','__createBinding','removeComponents','64520lPlhto','GitUtils','clearDir','logger','constructor','isLoggedIn','componentsToWrite','default','removeDir','../utils/git.utils','branch','\x20Checking\x20written\x20components.','master','\x20Deleted\x20','commitData','../../providers/api/bitbucket-api.service','cleanUp','writable','573764jJdqRF','toString','27618dgKpno','events','5xibXIw','Tokens','gitUtils','copyProjectTo','includes','length','../../salesforce/utils/sfdx.utils'];a72_0x2040=function(){return _0x22a43c;};return a72_0x2040();}const a72_0x587820=a72_0x27fa;(function(_0x52582c,_0x1e4a11){const _0x5872d9=a72_0x27fa,_0xa52c08=_0x52582c();while(!![]){try{const _0x5d323a=parseInt(_0x5872d9(0x239))/0x1+-parseInt(_0x5872d9(0x1e2))/0x2*(parseInt(_0x5872d9(0x1ec))/0x3)+parseInt(_0x5872d9(0x208))/0x4*(parseInt(_0x5872d9(0x23d))/0x5)+-parseInt(_0x5872d9(0x23b))/0x6*(parseInt(_0x5872d9(0x24c))/0x7)+-parseInt(_0x5872d9(0x227))/0x8*(parseInt(_0x5872d9(0x1e5))/0x9)+-parseInt(_0x5872d9(0x203))/0xa+-parseInt(_0x5872d9(0x1eb))/0xb*(parseInt(_0x5872d9(0x24f))/0xc);if(_0x5d323a===_0x1e4a11)break;else _0xa52c08['push'](_0xa52c08['shift']());}catch(_0x338078){_0xa52c08['push'](_0xa52c08['shift']());}}}(a72_0x2040,0x517fa));const a72_0x47848e=(function(){let _0xdae345=!![];return function(_0x1cc9fc,_0x42f7cb){const _0x1cb80b=_0xdae345?function(){const _0x5c63d4=a72_0x27fa;if(_0x42f7cb){const _0x400140=_0x42f7cb[_0x5c63d4(0x1f1)](_0x1cc9fc,arguments);return _0x42f7cb=null,_0x400140;}}:function(){};return _0xdae345=![],_0x1cb80b;};}()),a72_0x24ed75=a72_0x47848e(this,function(){const _0x11aa9a=a72_0x27fa;return a72_0x24ed75[_0x11aa9a(0x23a)]()['search'](_0x11aa9a(0x1f5))[_0x11aa9a(0x23a)]()[_0x11aa9a(0x22b)](a72_0x24ed75)['search'](_0x11aa9a(0x1f5));});a72_0x24ed75();'use strict';var __createBinding=this&&this[a72_0x587820(0x225)]||(Object['create']?function(_0x31901c,_0x240193,_0x56e1da,_0x1378fd){const _0x55ef81=a72_0x587820;if(_0x1378fd===undefined)_0x1378fd=_0x56e1da;var _0x94e65b=Object[_0x55ef81(0x1e1)](_0x240193,_0x56e1da);(!_0x94e65b||(_0x55ef81(0x21b)in _0x94e65b?!_0x240193[_0x55ef81(0x1e4)]:_0x94e65b[_0x55ef81(0x238)]||_0x94e65b[_0x55ef81(0x1ee)]))&&(_0x94e65b={'enumerable':!![],'get':function(){return _0x240193[_0x56e1da];}}),Object['defineProperty'](_0x31901c,_0x1378fd,_0x94e65b);}:function(_0xe65e59,_0x46e8fc,_0x45ff62,_0x492ca0){if(_0x492ca0===undefined)_0x492ca0=_0x45ff62;_0xe65e59[_0x492ca0]=_0x46e8fc[_0x45ff62];}),__setModuleDefault=this&&this[a72_0x587820(0x1e3)]||(Object[a72_0x587820(0x21f)]?function(_0x3ce091,_0x459248){const _0x558df0=a72_0x587820;Object['defineProperty'](_0x3ce091,_0x558df0(0x22e),{'enumerable':!![],'value':_0x459248});}:function(_0x1d88b8,_0x55b09e){_0x1d88b8['default']=_0x55b09e;}),__decorate=this&&this[a72_0x587820(0x20b)]||function(_0x447d8e,_0x45878d,_0xe5de34,_0x338aca){const _0x3045e5=a72_0x587820;var _0x10dab2=arguments[_0x3045e5(0x242)],_0x26bc56=_0x10dab2<0x3?_0x45878d:_0x338aca===null?_0x338aca=Object['getOwnPropertyDescriptor'](_0x45878d,_0xe5de34):_0x338aca,_0x527f52;if(typeof Reflect===_0x3045e5(0x1ea)&&typeof Reflect[_0x3045e5(0x220)]===_0x3045e5(0x1ed))_0x26bc56=Reflect[_0x3045e5(0x220)](_0x447d8e,_0x45878d,_0xe5de34,_0x338aca);else{for(var _0x54e48d=_0x447d8e['length']-0x1;_0x54e48d>=0x0;_0x54e48d--)if(_0x527f52=_0x447d8e[_0x54e48d])_0x26bc56=(_0x10dab2<0x3?_0x527f52(_0x26bc56):_0x10dab2>0x3?_0x527f52(_0x45878d,_0xe5de34,_0x26bc56):_0x527f52(_0x45878d,_0xe5de34))||_0x26bc56;}return _0x10dab2>0x3&&_0x26bc56&&Object[_0x3045e5(0x200)](_0x45878d,_0xe5de34,_0x26bc56),_0x26bc56;},__importStar=this&&this['__importStar']||function(_0x359d89){const _0x8a0239=a72_0x587820;if(_0x359d89&&_0x359d89[_0x8a0239(0x1e4)])return _0x359d89;var _0x16084e={};if(_0x359d89!=null){for(var _0x4cfd7a in _0x359d89)if(_0x4cfd7a!==_0x8a0239(0x22e)&&Object['prototype']['hasOwnProperty']['call'](_0x359d89,_0x4cfd7a))__createBinding(_0x16084e,_0x359d89,_0x4cfd7a);}return __setModuleDefault(_0x16084e,_0x359d89),_0x16084e;},__importDefault=this&&this['__importDefault']||function(_0x4d6e64){const _0x28c220=a72_0x587820;return _0x4d6e64&&_0x4d6e64[_0x28c220(0x1e4)]?_0x4d6e64:{'default':_0x4d6e64};};Object['defineProperty'](exports,a72_0x587820(0x1e4),{'value':!![]}),exports[a72_0x587820(0x1f4)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a72_0x587820(0x23c))),git_utils_1=require(a72_0x587820(0x230)),mdapi_utils_1=require(a72_0x587820(0x20e)),sfdx_utils_1=require(a72_0x587820(0x21e)),typedi_1=__importStar(require(a72_0x587820(0x1ef))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require('../../../shared/utils'),constants_1=require(a72_0x587820(0x20c)),git_provider_1=require(a72_0x587820(0x1e6)),bitbucket_api_service_1=require(a72_0x587820(0x236)),sfdx_utils_2=require(a72_0x587820(0x243)),fs_internal_1=require(a72_0x587820(0x21d)),path_1=require('path'),providers_tokens_1=require(a72_0x587820(0x201));let CommitComponentsJob=class CommitComponentsJob extends events_1[a72_0x587820(0x22e)]{constructor(){const _0x5d6d35=a72_0x587820;super(...arguments),this[_0x5d6d35(0x222)]=0x3e8,this[_0x5d6d35(0x22d)]=0x0,this[_0x5d6d35(0x1f2)]=0x0,this[_0x5d6d35(0x223)]=Date['now']();}async[a72_0x587820(0x1f0)](){const _0x523d52=a72_0x587820,{repo:_0x4f03fd}=this['commitData'],_0x2ac991=typedi_1[_0x523d52(0x22e)][_0x523d52(0x21b)](providers_tokens_1[_0x523d52(0x23e)]['credentials']);if(this[_0x523d52(0x235)][_0x523d52(0x210)]===git_provider_1[_0x523d52(0x215)][_0x523d52(0x1e7)]){const _0x2f8bb3=typedi_1[_0x523d52(0x22e)][_0x523d52(0x21b)](bitbucket_api_service_1[_0x523d52(0x1fc)]);await _0x2f8bb3[_0x523d52(0x22c)]();}return _0x4f03fd['gitUrl'][_0x523d52(0x21c)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x523d52(0x1fb)])(_0x4f03fd['gitUrl'])+'://'+_0x2ac991[_0x523d52(0x224)]()+'@');}[a72_0x587820(0x207)](_0x147d50){const _0x433ada=a72_0x587820;var _0x219576;_0x147d50['sort'](_0x7a99d5=>child_types_1[_0x433ada(0x22e)][_0x433ada(0x241)](_0x7a99d5[_0x433ada(0x1fd)])?0x1:-0x1);const _0x5b12db={};for(const _0x110304 of _0x147d50){_0x5b12db[_0x219576=_0x110304[_0x433ada(0x24e)]]||(_0x5b12db[_0x219576]=[]),_0x5b12db[_0x110304[_0x433ada(0x24e)]]['push'](_0x110304);}return Object[_0x433ada(0x204)](_0x5b12db)['reduce']((_0x294d82,_0x145106)=>[..._0x294d82,..._0x145106],[]);}async[a72_0x587820(0x1f3)](_0xe87dad){const _0x1e19df=a72_0x587820;_0xe87dad=this[_0x1e19df(0x207)](_0xe87dad);let _0x4a54d0=0x0;while(_0xe87dad[_0x1e19df(0x242)]){const _0x6c7c1a=_0xe87dad[_0x1e19df(0x216)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x1e19df(0x212)]['writeFlosumComponents'](_0x6c7c1a,{'skipChildErrors':this['commitData'][_0x1e19df(0x231)][_0x1e19df(0x206)]===_0x1e19df(0x233)}),_0x4a54d0+=_0x6c7c1a['length'],this[_0x1e19df(0x202)][_0x1e19df(0x219)](this[_0x1e19df(0x24a)]+_0x1e19df(0x205)+_0x4a54d0+'/'+this['componentsToWrite']+_0x1e19df(0x1fe)),await this['sfLogger'][_0x1e19df(0x247)]();}}async['removeComponents'](_0x32f6ca){const _0x1e89f5=a72_0x587820;_0x32f6ca[_0x1e89f5(0x20f)](_0x83f8b1=>child_types_1[_0x1e89f5(0x22e)][_0x1e89f5(0x241)](_0x83f8b1['type'])?-0x1:0x1);let _0x2d4bfc=0x0;while(_0x32f6ca['length']){const _0x460521=_0x32f6ca['splice'](0x0,this[_0x1e89f5(0x222)]);await this[_0x1e89f5(0x212)][_0x1e89f5(0x226)](_0x460521),_0x2d4bfc+=_0x460521[_0x1e89f5(0x242)],this[_0x1e89f5(0x202)][_0x1e89f5(0x219)](this[_0x1e89f5(0x24a)]+_0x1e89f5(0x234)+_0x2d4bfc+'/'+this[_0x1e89f5(0x1f2)]+_0x1e89f5(0x1fe)),await this[_0x1e89f5(0x202)]['send']();}}async['cleanUp'](){const _0x15e71a=a72_0x587820;this['gitUtils']&&await this[_0x15e71a(0x23f)][_0x15e71a(0x22f)]()['catch'](()=>void 0x0),this['mdapiUtils']&&await this[_0x15e71a(0x212)][_0x15e71a(0x22f)]()[_0x15e71a(0x21a)](()=>void 0x0),this[_0x15e71a(0x1ff)]&&await this[_0x15e71a(0x1ff)][_0x15e71a(0x22f)]()[_0x15e71a(0x21a)](()=>void 0x0);}async[a72_0x587820(0x221)](){const _0x31fec7=a72_0x587820,{repo:_0x2cac5c,branch:_0x1090a4,components:_0x4bfcd4,convertToSFDX:_0x256bf0,message:_0x521794,user:_0x3406c8}=this[_0x31fec7(0x235)];this[_0x31fec7(0x212)]=new mdapi_utils_1['MDApiUtils'](),this[_0x31fec7(0x23f)]=new git_utils_1[(_0x31fec7(0x228))](await this[_0x31fec7(0x1f0)]()),this[_0x31fec7(0x1ff)]=new sfdx_utils_1[(_0x31fec7(0x1f7))]();let _0x1ef9a1=_0x256bf0;try{await this['sfLogger']['log'](this['prefix']+'\x20Start\x20cloning\x20repository.')[_0x31fec7(0x247)](),await this[_0x31fec7(0x23f)][_0x31fec7(0x211)](_0x1090a4[_0x31fec7(0x206)],_0x2cac5c[_0x31fec7(0x206)]);!this[_0x31fec7(0x235)][_0x31fec7(0x20d)]?(this[_0x31fec7(0x202)][_0x31fec7(0x219)](this[_0x31fec7(0x24a)]+'\x20Prepare\x20mdapi\x20files.'),await this[_0x31fec7(0x212)][_0x31fec7(0x1fa)](this[_0x31fec7(0x23f)][_0x31fec7(0x1f8)])):this[_0x31fec7(0x202)][_0x31fec7(0x219)](this[_0x31fec7(0x24a)]+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this[_0x31fec7(0x202)][_0x31fec7(0x219)](this[_0x31fec7(0x24a)]+_0x31fec7(0x232))['send']();_0x4bfcd4[_0x31fec7(0x20a)]&&(this['sfLogger'][_0x31fec7(0x219)](this['prefix']+_0x31fec7(0x249)),this['componentsToWrite']=_0x4bfcd4[_0x31fec7(0x20a)][_0x31fec7(0x242)],await this[_0x31fec7(0x1f3)](_0x4bfcd4['writed']),await this[_0x31fec7(0x202)]['send']());await this[_0x31fec7(0x202)][_0x31fec7(0x219)](this[_0x31fec7(0x24a)]+'\x20Checking\x20deleted\x20components.')[_0x31fec7(0x247)]();_0x4bfcd4[_0x31fec7(0x1f9)]&&(this[_0x31fec7(0x202)][_0x31fec7(0x219)](this['prefix']+_0x31fec7(0x214)),this['componentsToDelete']=_0x4bfcd4[_0x31fec7(0x1f9)][_0x31fec7(0x242)],await this[_0x31fec7(0x226)](_0x4bfcd4['deleted']),await this[_0x31fec7(0x202)]['send']());await this[_0x31fec7(0x202)]['send']();const _0x570475=await fs_internal_1['FS'][_0x31fec7(0x1df)](this[_0x31fec7(0x23f)][_0x31fec7(0x1f8)]);await sfdx_utils_2[_0x31fec7(0x213)][_0x31fec7(0x245)](this[_0x31fec7(0x23f)][_0x31fec7(0x1f8)])?(_0x1ef9a1=!![],await fs_internal_1['FS'][_0x31fec7(0x22f)]((0x0,path_1[_0x31fec7(0x1e8)])(this[_0x31fec7(0x23f)]['dir'],_0x31fec7(0x1e0)))):(_0x1ef9a1&&(!_0x570475&&(_0x1ef9a1=![])),await this[_0x31fec7(0x23f)][_0x31fec7(0x229)]());_0x1ef9a1?(await this[_0x31fec7(0x202)]['log'](this[_0x31fec7(0x24a)]+_0x31fec7(0x1e9))[_0x31fec7(0x247)](),await this[_0x31fec7(0x1ff)][_0x31fec7(0x209)](this[_0x31fec7(0x212)][_0x31fec7(0x1f8)]),await this['sfdxUtils'][_0x31fec7(0x240)](this[_0x31fec7(0x23f)][_0x31fec7(0x1f8)],!_0x570475),await this[_0x31fec7(0x1ff)]['removeDir']()):(await this[_0x31fec7(0x202)][_0x31fec7(0x219)](this['prefix']+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x31fec7(0x247)](),await this[_0x31fec7(0x212)]['copyMdapiTo'](this['gitUtils'][_0x31fec7(0x1f8)]));await this[_0x31fec7(0x202)][_0x31fec7(0x219)](this[_0x31fec7(0x24a)]+_0x31fec7(0x24b))[_0x31fec7(0x247)](),await this['gitUtils'][_0x31fec7(0x246)](_0x521794,{'email':constants_1[_0x31fec7(0x248)],'name':_0x3406c8['name']},_0x1090a4[_0x31fec7(0x206)]),await this['gitUtils'][_0x31fec7(0x22f)](),await this[_0x31fec7(0x212)][_0x31fec7(0x22f)]();const _0x1e0d54=this[_0x31fec7(0x22d)]+this[_0x31fec7(0x1f2)];await this[_0x31fec7(0x202)]['log'](this[_0x31fec7(0x24a)]+_0x31fec7(0x217)+(Date['now']()-this[_0x31fec7(0x223)])+_0x31fec7(0x244)+_0x1e0d54+'.')['send']();}catch(_0x54de23){await this[_0x31fec7(0x237)](),await this['sfLogger'][_0x31fec7(0x218)](this[_0x31fec7(0x24a)]+'\x20'+_0x54de23)[_0x31fec7(0x247)]();throw _0x54de23;}}async['run'](_0xb89302,_0x155c36){const _0x2e9849=a72_0x587820;var _0xc4899c,_0x51c8d3;this[_0x2e9849(0x202)]=typedi_1[_0x2e9849(0x22e)]['get'](providers_tokens_1[_0x2e9849(0x23e)][_0x2e9849(0x22a)]),this[_0x2e9849(0x24a)]=(_0x155c36?_0x155c36+'\x20':'')+'['+commit_components_dto_1[_0x2e9849(0x1f6)][_0x2e9849(0x206)]+']',await this[_0x2e9849(0x202)][_0x2e9849(0x219)](this[_0x2e9849(0x24a)]+'\x20Checking\x20commit\x20components.');const _0x1082e4=!!((_0xc4899c=_0xb89302['components'])===null||_0xc4899c===void 0x0?void 0x0:_0xc4899c['writed'])||!!((_0x51c8d3=_0xb89302['components'])===null||_0x51c8d3===void 0x0?void 0x0:_0x51c8d3[_0x2e9849(0x1f9)]);if(!_0x1082e4){await this[_0x2e9849(0x202)][_0x2e9849(0x219)](this[_0x2e9849(0x24a)]+_0x2e9849(0x24d))['send']();return;}this[_0x2e9849(0x235)]=_0xb89302,await this['exec']();}};function a72_0x27fa(_0x390dbb,_0x2bce55){const _0x5e8f64=a72_0x2040();return a72_0x27fa=function(_0x24ed75,_0x47848e){_0x24ed75=_0x24ed75-0x1df;let _0x2040c1=_0x5e8f64[_0x24ed75];return _0x2040c1;},a72_0x27fa(_0x390dbb,_0x2bce55);}CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]})],CommitComponentsJob),exports[a72_0x587820(0x1f4)]=CommitComponentsJob;