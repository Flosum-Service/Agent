const a106_0x5d3508=a106_0x4b0f;(function(_0x341af5,_0x371944){const _0x203eff=a106_0x4b0f,_0x49cdc0=_0x341af5();while(!![]){try{const _0x5d82af=parseInt(_0x203eff(0xb6))/0x1+parseInt(_0x203eff(0xe1))/0x2+parseInt(_0x203eff(0xdb))/0x3*(parseInt(_0x203eff(0xb9))/0x4)+parseInt(_0x203eff(0xe4))/0x5+parseInt(_0x203eff(0xac))/0x6*(parseInt(_0x203eff(0xaf))/0x7)+parseInt(_0x203eff(0x9a))/0x8*(-parseInt(_0x203eff(0x68))/0x9)+parseInt(_0x203eff(0xc4))/0xa*(-parseInt(_0x203eff(0xbd))/0xb);if(_0x5d82af===_0x371944)break;else _0x49cdc0['push'](_0x49cdc0['shift']());}catch(_0x19f5e2){_0x49cdc0['push'](_0x49cdc0['shift']());}}}(a106_0x2e84,0x7adc7));const a106_0x4c4c49=(function(){let _0x221648=!![];return function(_0x1a2f00,_0x1924ee){const _0x538d4d=_0x221648?function(){const _0x327d6e=a106_0x4b0f;if(_0x1924ee){const _0x53c051=_0x1924ee[_0x327d6e(0x79)](_0x1a2f00,arguments);return _0x1924ee=null,_0x53c051;}}:function(){};return _0x221648=![],_0x538d4d;};}()),a106_0x5e3d34=a106_0x4c4c49(this,function(){const _0x317a35=a106_0x4b0f;return a106_0x5e3d34[_0x317a35(0x67)]()[_0x317a35(0x8f)](_0x317a35(0xbc))[_0x317a35(0x67)]()[_0x317a35(0xc1)](a106_0x5e3d34)[_0x317a35(0x8f)](_0x317a35(0xbc));});a106_0x5e3d34();'use strict';var __createBinding=this&&this[a106_0x5d3508(0x78)]||(Object[a106_0x5d3508(0x6c)]?function(_0x9a0f8a,_0x1fd0c5,_0x566b58,_0x142772){const _0x5884c9=a106_0x5d3508;if(_0x142772===undefined)_0x142772=_0x566b58;var _0x5e7c47=Object[_0x5884c9(0xcd)](_0x1fd0c5,_0x566b58);(!_0x5e7c47||(_0x5884c9(0x81)in _0x5e7c47?!_0x1fd0c5['__esModule']:_0x5e7c47[_0x5884c9(0x88)]||_0x5e7c47[_0x5884c9(0xce)]))&&(_0x5e7c47={'enumerable':!![],'get':function(){return _0x1fd0c5[_0x566b58];}}),Object['defineProperty'](_0x9a0f8a,_0x142772,_0x5e7c47);}:function(_0x46aef8,_0x1fcf23,_0x2870d7,_0x290a63){if(_0x290a63===undefined)_0x290a63=_0x2870d7;_0x46aef8[_0x290a63]=_0x1fcf23[_0x2870d7];}),__setModuleDefault=this&&this[a106_0x5d3508(0x70)]||(Object['create']?function(_0x4d551c,_0x28c085){const _0x1fc9e6=a106_0x5d3508;Object[_0x1fc9e6(0x85)](_0x4d551c,'default',{'enumerable':!![],'value':_0x28c085});}:function(_0x4ddee1,_0x23fcc6){const _0x4cf985=a106_0x5d3508;_0x4ddee1[_0x4cf985(0xdf)]=_0x23fcc6;}),__decorate=this&&this[a106_0x5d3508(0xa1)]||function(_0x1c42ef,_0x53f238,_0x120561,_0x53d059){const _0x535e84=a106_0x5d3508;var _0x54c89c=arguments[_0x535e84(0x76)],_0x57051a=_0x54c89c<0x3?_0x53f238:_0x53d059===null?_0x53d059=Object['getOwnPropertyDescriptor'](_0x53f238,_0x120561):_0x53d059,_0x410794;if(typeof Reflect===_0x535e84(0x71)&&typeof Reflect[_0x535e84(0x8e)]===_0x535e84(0xc3))_0x57051a=Reflect[_0x535e84(0x8e)](_0x1c42ef,_0x53f238,_0x120561,_0x53d059);else{for(var _0x12649f=_0x1c42ef[_0x535e84(0x76)]-0x1;_0x12649f>=0x0;_0x12649f--)if(_0x410794=_0x1c42ef[_0x12649f])_0x57051a=(_0x54c89c<0x3?_0x410794(_0x57051a):_0x54c89c>0x3?_0x410794(_0x53f238,_0x120561,_0x57051a):_0x410794(_0x53f238,_0x120561))||_0x57051a;}return _0x54c89c>0x3&&_0x57051a&&Object[_0x535e84(0x85)](_0x53f238,_0x120561,_0x57051a),_0x57051a;},__importStar=this&&this['__importStar']||function(_0x14109d){const _0x1b49c6=a106_0x5d3508;if(_0x14109d&&_0x14109d[_0x1b49c6(0x6d)])return _0x14109d;var _0x476031={};if(_0x14109d!=null){for(var _0x4dc80d in _0x14109d)if(_0x4dc80d!==_0x1b49c6(0xdf)&&Object['prototype'][_0x1b49c6(0x84)][_0x1b49c6(0xde)](_0x14109d,_0x4dc80d))__createBinding(_0x476031,_0x14109d,_0x4dc80d);}return __setModuleDefault(_0x476031,_0x14109d),_0x476031;},__importDefault=this&&this[a106_0x5d3508(0x6f)]||function(_0xbc4da5){const _0x2659ff=a106_0x5d3508;return _0xbc4da5&&_0xbc4da5[_0x2659ff(0x6d)]?_0xbc4da5:{'default':_0xbc4da5};};function a106_0x2e84(){const _0x539680=['../../internal/fs.internal','writeFlosumComponents','credentials','length','../utils/git.utils','__createBinding','apply','\x20Prepare\x20mdapi\x20files.','\x20Checking\x20written\x20components.','\x20Start\x20converting\x20to\x20SFDX.','path','\x20Start\x20cloning\x20repository.','prefix','gitUrl','get','commitAndPush','createProjectFrom','hasOwnProperty','defineProperty','startTime','run','writable','commitData','isConvertToSfdx','branch','SFDXUtils','\x20Nothing\x20to\x20commit.\x20Skip.','decorate','search','sfdxUtils','Tokens','CommitComponentsDto','removeComponents','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','fileType','send','DEFAULT_GIT_USER_EMAIL','events','24HHoWfX','copyMdapiTo','copyProjectTo','sfLogger','mdapiUtils','writed','Bitbucket','__decorate','master','groupComponentsByFileName','force','../../providers/types/git-provider','dir','CommitComponentsJob','\x20components','\x20Checking\x20commit\x20components.','force-app','../utils/sfdx.utils','1794726PYmEAm','componentsToWrite','type','21bKuwsj','clearDir','values','prepareMdapi','includes','MDApiUtils','removeDir','212802HdngKI','now','fileName','251336CHBASX','getRemote','../../providers/api/bitbucket-api.service','(((.+)+)+)+$','19689285dwBwFL','exec','recordType','writeComponents','constructor','gitUtils','function','10hVKePF','replace','FORCE_APP_DEFAULT_DIR','componentsToDelete','splice','name','provider','deleted','\x20Checking\x20deleted\x20components.','getOwnPropertyDescriptor','configurable','\x20Copying\x20mdapi\x20to\x20git\x20folder.','\x20Preparing\x20to\x20delete\x20components','\x20Deleted\x20','getProtocol','COMPONENTS_PER_TICK','logger','reduce','catch','getGitShellAuthorizationString','cleanUp','BitbucketApiService','../../../../constants','39EheFEH','typedi','join','call','default','../utils/mdapi.utils','273320GdnxXP','isSFDXProject','components','1810250azUiZB','toString','397629uVENhD','../../providers/providers.tokens','://','../dto/commit-components.dto','create','__esModule','ms.\x20Committed\x20components\x20-\x20','__importDefault','__setModuleDefault','object','log'];a106_0x2e84=function(){return _0x539680;};return a106_0x2e84();}Object[a106_0x5d3508(0x85)](exports,a106_0x5d3508(0x6d),{'value':!![]}),exports[a106_0x5d3508(0xa7)]=void 0x0;const commit_components_dto_1=require(a106_0x5d3508(0x6b)),events_1=__importDefault(require(a106_0x5d3508(0x99))),git_utils_1=require(a106_0x5d3508(0x77)),mdapi_utils_1=require(a106_0x5d3508(0xe0)),sfdx_utils_1=require(a106_0x5d3508(0xab)),typedi_1=__importStar(require(a106_0x5d3508(0xdc))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require('../../../shared/utils'),constants_1=require(a106_0x5d3508(0xda)),git_provider_1=require(a106_0x5d3508(0xa5)),bitbucket_api_service_1=require(a106_0x5d3508(0xbb)),sfdx_utils_2=require('../../salesforce/utils/sfdx.utils'),fs_internal_1=require(a106_0x5d3508(0x73)),path_1=require(a106_0x5d3508(0x7d)),providers_tokens_1=require(a106_0x5d3508(0x69)),constants_2=require(a106_0x5d3508(0xda));let CommitComponentsJob=class CommitComponentsJob extends events_1[a106_0x5d3508(0xdf)]{constructor(){const _0x312d68=a106_0x5d3508;super(...arguments),this[_0x312d68(0xd3)]=0x3e8,this[_0x312d68(0xad)]=0x0,this[_0x312d68(0xc7)]=0x0,this[_0x312d68(0x86)]=Date[_0x312d68(0xb7)]();}async[a106_0x5d3508(0xba)](){const _0x3ef20d=a106_0x5d3508,{repo:_0x26305d}=this[_0x3ef20d(0x89)],_0x5ed78e=typedi_1[_0x3ef20d(0xdf)][_0x3ef20d(0x81)](providers_tokens_1[_0x3ef20d(0x91)][_0x3ef20d(0x75)]);if(this[_0x3ef20d(0x89)][_0x3ef20d(0xca)]===git_provider_1['GitProvider'][_0x3ef20d(0xa0)]){const _0x505eab=typedi_1['default']['get'](bitbucket_api_service_1[_0x3ef20d(0xd9)]);await _0x505eab['isLoggedIn']();}return _0x26305d[_0x3ef20d(0x80)][_0x3ef20d(0xc5)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x3ef20d(0xd2)])(_0x26305d[_0x3ef20d(0x80)])+_0x3ef20d(0x6a)+_0x5ed78e[_0x3ef20d(0xd7)]()+'@');}[a106_0x5d3508(0xa3)](_0x535107){const _0x5d8876=a106_0x5d3508;var _0x47f195;_0x535107['sort'](_0x3aac85=>child_types_1[_0x5d8876(0xdf)][_0x5d8876(0xb3)](_0x3aac85[_0x5d8876(0x96)])?0x1:-0x1);const _0x55b859={};for(const _0x5019cf of _0x535107){_0x55b859[_0x47f195=_0x5019cf[_0x5d8876(0xb8)]]||(_0x55b859[_0x47f195]=[]),_0x55b859[_0x5019cf[_0x5d8876(0xb8)]]['push'](_0x5019cf);}return Object[_0x5d8876(0xb1)](_0x55b859)[_0x5d8876(0xd5)]((_0x3b3ce2,_0x4d71bc)=>[..._0x3b3ce2,..._0x4d71bc],[]);}async['writeComponents'](_0x35f86e){const _0x5cd146=a106_0x5d3508;_0x35f86e=this[_0x5cd146(0xa3)](_0x35f86e);let _0x4bb4af=0x0;while(_0x35f86e['length']){const _0x1568b2=_0x35f86e['splice'](0x0,this[_0x5cd146(0xd3)]);await this['mdapiUtils'][_0x5cd146(0x74)](_0x1568b2,{'skipChildErrors':this[_0x5cd146(0x89)][_0x5cd146(0x8b)]['name']===_0x5cd146(0xa2),'recordType':this['commitData'][_0x5cd146(0xbf)]}),_0x4bb4af+=_0x1568b2['length'],this[_0x5cd146(0x9d)][_0x5cd146(0x72)](this['prefix']+'\x20Wrote\x20'+_0x4bb4af+'/'+this['componentsToWrite']+_0x5cd146(0xa8)),await this[_0x5cd146(0x9d)]['send']();}}async[a106_0x5d3508(0x93)](_0x2d1832){const _0x37778f=a106_0x5d3508;_0x2d1832['sort'](_0x40290c=>child_types_1[_0x37778f(0xdf)][_0x37778f(0xb3)](_0x40290c[_0x37778f(0xae)])?-0x1:0x1);let _0x5cfdb7=0x0;while(_0x2d1832[_0x37778f(0x76)]){const _0x5715c7=_0x2d1832[_0x37778f(0xc8)](0x0,this[_0x37778f(0xd3)]);await this[_0x37778f(0x9e)]['removeComponents'](_0x5715c7,this['commitData'][_0x37778f(0xbf)]),_0x5cfdb7+=_0x5715c7[_0x37778f(0x76)],this[_0x37778f(0x9d)][_0x37778f(0x72)](this[_0x37778f(0x7f)]+_0x37778f(0xd1)+_0x5cfdb7+'/'+this['componentsToDelete']+_0x37778f(0xa8)),await this[_0x37778f(0x9d)]['send']();}}async['cleanUp'](){const _0x3c9b03=a106_0x5d3508;this['gitUtils']&&await this[_0x3c9b03(0xc2)]['removeDir']()['catch'](()=>void 0x0),this['mdapiUtils']&&await this['mdapiUtils']['removeDir']()['catch'](()=>void 0x0),this[_0x3c9b03(0x90)]&&await this['sfdxUtils'][_0x3c9b03(0xb5)]()[_0x3c9b03(0xd6)](()=>void 0x0);}async[a106_0x5d3508(0xbe)](){const _0x40de03=a106_0x5d3508,{repo:_0x2d64ad,branch:_0x37856a,components:_0x485bfa,convertToSFDX:_0x596fa1,message:_0x3d8bc5,user:_0x18f4a9}=this[_0x40de03(0x89)];this[_0x40de03(0x9e)]=new mdapi_utils_1[(_0x40de03(0xb4))](),this[_0x40de03(0xc2)]=new git_utils_1['GitUtils'](await this[_0x40de03(0xba)]()),this[_0x40de03(0x90)]=new sfdx_utils_1[(_0x40de03(0x8c))]();let _0x334308=_0x596fa1&&this['sfdxUtils'][_0x40de03(0x8a)](this[_0x40de03(0x89)]['recordType']);try{await this['sfLogger']['log'](this[_0x40de03(0x7f)]+_0x40de03(0x7e))[_0x40de03(0x97)](),await this[_0x40de03(0xc2)]['clone'](_0x37856a['name'],_0x2d64ad[_0x40de03(0xc9)]);!this[_0x40de03(0x89)][_0x40de03(0xa4)]?(this['sfLogger'][_0x40de03(0x72)](this[_0x40de03(0x7f)]+_0x40de03(0x7a)),await this['mdapiUtils'][_0x40de03(0xb2)](this[_0x40de03(0xc2)][_0x40de03(0xa6)])):this[_0x40de03(0x9d)]['log'](this[_0x40de03(0x7f)]+_0x40de03(0x95));await this[_0x40de03(0x9d)][_0x40de03(0x72)](this[_0x40de03(0x7f)]+_0x40de03(0x7b))[_0x40de03(0x97)]();_0x485bfa[_0x40de03(0x9f)]&&(this[_0x40de03(0x9d)][_0x40de03(0x72)](this[_0x40de03(0x7f)]+'\x20Preparing\x20to\x20write\x20components'),this[_0x40de03(0xad)]=_0x485bfa['writed'][_0x40de03(0x76)],await this[_0x40de03(0xc0)](_0x485bfa[_0x40de03(0x9f)]),await this[_0x40de03(0x9d)][_0x40de03(0x97)]());await this[_0x40de03(0x9d)][_0x40de03(0x72)](this[_0x40de03(0x7f)]+_0x40de03(0xcc))['send']();_0x485bfa[_0x40de03(0xcb)]&&(this[_0x40de03(0x9d)]['log'](this[_0x40de03(0x7f)]+_0x40de03(0xd0)),this[_0x40de03(0xc7)]=_0x485bfa[_0x40de03(0xcb)][_0x40de03(0x76)],await this['removeComponents'](_0x485bfa['deleted']),await this['sfLogger'][_0x40de03(0x97)]());await this[_0x40de03(0x9d)][_0x40de03(0x97)]();const _0xb3368e=await fs_internal_1['FS']['isEmptyDir'](this[_0x40de03(0xc2)][_0x40de03(0xa6)]);await sfdx_utils_2['SFDX'][_0x40de03(0xe2)](this[_0x40de03(0xc2)][_0x40de03(0xa6)])?(_0x334308=!![],await fs_internal_1['FS'][_0x40de03(0xb5)]((0x0,path_1[_0x40de03(0xdd)])(this[_0x40de03(0xc2)][_0x40de03(0xa6)],_0x40de03(0xaa)))):(_0x334308&&(!_0xb3368e&&(_0x334308=![])),await this[_0x40de03(0xc2)][_0x40de03(0xb0)]());_0x334308?(await this['sfLogger'][_0x40de03(0x72)](this[_0x40de03(0x7f)]+_0x40de03(0x7c))[_0x40de03(0x97)](),await this[_0x40de03(0x90)][_0x40de03(0x83)](this[_0x40de03(0x9e)]['dir']),await this['sfdxUtils'][_0x40de03(0x9c)](this[_0x40de03(0xc2)]['dir'],!_0xb3368e),await this[_0x40de03(0x90)]['copySFDXIgnoredComponents'](this[_0x40de03(0x9e)][_0x40de03(0xa6)],(0x0,path_1[_0x40de03(0xdd)])(this[_0x40de03(0xc2)][_0x40de03(0xa6)],constants_2[_0x40de03(0xc6)])),await this[_0x40de03(0x90)][_0x40de03(0xb5)]()):(await this[_0x40de03(0x9d)][_0x40de03(0x72)](this[_0x40de03(0x7f)]+_0x40de03(0xcf))[_0x40de03(0x97)](),await this[_0x40de03(0x9e)][_0x40de03(0x9b)](this['gitUtils'][_0x40de03(0xa6)]));await this[_0x40de03(0x9d)][_0x40de03(0x72)](this[_0x40de03(0x7f)]+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')[_0x40de03(0x97)](),await this[_0x40de03(0xc2)][_0x40de03(0x82)](_0x3d8bc5,{'email':constants_1[_0x40de03(0x98)],'name':_0x18f4a9['name']},_0x37856a[_0x40de03(0xc9)]),await this[_0x40de03(0xc2)][_0x40de03(0xb5)](),await this[_0x40de03(0x9e)][_0x40de03(0xb5)]();const _0x23fd19=this[_0x40de03(0xad)]+this[_0x40de03(0xc7)];await this[_0x40de03(0x9d)][_0x40de03(0x72)](this['prefix']+_0x40de03(0x94)+(Date['now']()-this[_0x40de03(0x86)])+_0x40de03(0x6e)+_0x23fd19+'.')['send']();}catch(_0x3189a5){await this[_0x40de03(0xd8)](),await this['sfLogger']['error'](this[_0x40de03(0x7f)]+'\x20'+_0x3189a5)[_0x40de03(0x97)]();throw _0x3189a5;}}async[a106_0x5d3508(0x87)](_0x530684,_0x6a9ee5){const _0x82f44c=a106_0x5d3508;var _0x327380,_0x5a5cc3;this[_0x82f44c(0x9d)]=typedi_1['default'][_0x82f44c(0x81)](providers_tokens_1[_0x82f44c(0x91)][_0x82f44c(0xd4)]),this[_0x82f44c(0x7f)]=(_0x6a9ee5?_0x6a9ee5+'\x20':'')+'['+commit_components_dto_1[_0x82f44c(0x92)][_0x82f44c(0xc9)]+']',await this[_0x82f44c(0x9d)][_0x82f44c(0x72)](this[_0x82f44c(0x7f)]+_0x82f44c(0xa9));const _0xfea0cc=!!((_0x327380=_0x530684['components'])===null||_0x327380===void 0x0?void 0x0:_0x327380[_0x82f44c(0x9f)])||!!((_0x5a5cc3=_0x530684[_0x82f44c(0xe3)])===null||_0x5a5cc3===void 0x0?void 0x0:_0x5a5cc3[_0x82f44c(0xcb)]);if(!_0xfea0cc){await this['sfLogger']['log'](this['prefix']+_0x82f44c(0x8d))['send']();return;}this[_0x82f44c(0x89)]=_0x530684,await this['exec']();}};function a106_0x4b0f(_0xb9c149,_0x3d05cd){const _0x2b1728=a106_0x2e84();return a106_0x4b0f=function(_0x5e3d34,_0x4c4c49){_0x5e3d34=_0x5e3d34-0x67;let _0x2e8407=_0x2b1728[_0x5e3d34];return _0x2e8407;},a106_0x4b0f(_0xb9c149,_0x3d05cd);}CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]})],CommitComponentsJob),exports[a106_0x5d3508(0xa7)]=CommitComponentsJob;