const a104_0x46fb42=a104_0x31bb;(function(_0x5dc829,_0x6bf68){const _0x27aea8=a104_0x31bb,_0x30c77d=_0x5dc829();while(!![]){try{const _0x5d1485=-parseInt(_0x27aea8(0x18e))/0x1+parseInt(_0x27aea8(0x145))/0x2+-parseInt(_0x27aea8(0x153))/0x3*(parseInt(_0x27aea8(0x148))/0x4)+parseInt(_0x27aea8(0x1a0))/0x5*(-parseInt(_0x27aea8(0x17c))/0x6)+-parseInt(_0x27aea8(0x178))/0x7+parseInt(_0x27aea8(0x15b))/0x8+parseInt(_0x27aea8(0x1ad))/0x9*(parseInt(_0x27aea8(0x1a5))/0xa);if(_0x5d1485===_0x6bf68)break;else _0x30c77d['push'](_0x30c77d['shift']());}catch(_0x40fb02){_0x30c77d['push'](_0x30c77d['shift']());}}}(a104_0x3422,0x7db02));function a104_0x31bb(_0x481638,_0x161980){const _0x63ea17=a104_0x3422();return a104_0x31bb=function(_0xf27076,_0x9501ae){_0xf27076=_0xf27076-0x13e;let _0x34221a=_0x63ea17[_0xf27076];return _0x34221a;},a104_0x31bb(_0x481638,_0x161980);}const a104_0x9501ae=(function(){let _0x1cae9e=!![];return function(_0x2784e9,_0x22f331){const _0x402492=_0x1cae9e?function(){const _0x3507fd=a104_0x31bb;if(_0x22f331){const _0x347d29=_0x22f331[_0x3507fd(0x1a3)](_0x2784e9,arguments);return _0x22f331=null,_0x347d29;}}:function(){};return _0x1cae9e=![],_0x402492;};}()),a104_0xf27076=a104_0x9501ae(this,function(){const _0x473f0c=a104_0x31bb;return a104_0xf27076['toString']()[_0x473f0c(0x182)](_0x473f0c(0x189))[_0x473f0c(0x159)]()[_0x473f0c(0x187)](a104_0xf27076)[_0x473f0c(0x182)](_0x473f0c(0x189));});a104_0xf27076();'use strict';function a104_0x3422(){const _0x4bc441=['length','../../providers/types/git-provider','componentsToDelete','../../parsers/data/child-types','getGitShellAuthorizationString','run','\x20Checking\x20commit\x20components.','logger','Bitbucket','catch','copyMdapiTo','gitUrl','includes','writeComponents','\x20Nothing\x20to\x20commit.\x20Skip.','../../providers/api/bitbucket-api.service','removeDir','204635gKoDbs','Service','now','apply','mdapiUtils','37220MtvBbd','__decorate','../../internal/fs.internal','\x20Start\x20converting\x20to\x20SFDX.','function','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','../../salesforce/utils/sfdx.utils','prepareMdapi','6327TkxgNw','gitUtils','sfdxUtils','CommitComponentsDto','components','defineProperty','configurable','ms.\x20Committed\x20components\x20-\x20','Tokens','send','487466favJBk','getOwnPropertyDescriptor','commitData','2036VcsRXX','events','create','hasOwnProperty','getRemote','clearDir','GitProvider','splice','sfLogger','removeComponents','\x20Deleted\x20','1278ZrOOOG','clone','typedi','deleted','get','\x20Start\x20cloning\x20repository.','toString','CommitComponentsJob','2572440XwJqdD','BitbucketApiService','\x20Preparing\x20to\x20write\x20components','://','componentsToWrite','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','credentials','isEmptyDir','cleanUp','prefix','MDApiUtils','\x20Checking\x20deleted\x20components.','copyProjectTo','__setModuleDefault','name','sort','writed','\x20Prepare\x20mdapi\x20files.','\x20components','getProtocol','GitUtils','isLoggedIn','\x20Preparing\x20to\x20delete\x20components','error','exec','log','isSFDXProject','COMPONENTS_PER_TICK','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','6822697KmYYqI','master','fileName','decorate','132xZBGdQ','dir','provider','groupComponentsByFileName','force-app','\x20Wrote\x20','search','__esModule','__createBinding','default','../utils/mdapi.utils','constructor','commitAndPush','(((.+)+)+)+$','writeFlosumComponents','../../providers/providers.tokens','call','__importDefault','575137HEidhr'];a104_0x3422=function(){return _0x4bc441;};return a104_0x3422();}var __createBinding=this&&this[a104_0x46fb42(0x184)]||(Object[a104_0x46fb42(0x14a)]?function(_0x614b37,_0x5bf16b,_0x3b79f5,_0x315d45){const _0xde9455=a104_0x46fb42;if(_0x315d45===undefined)_0x315d45=_0x3b79f5;var _0xb118ec=Object[_0xde9455(0x146)](_0x5bf16b,_0x3b79f5);(!_0xb118ec||(_0xde9455(0x157)in _0xb118ec?!_0x5bf16b[_0xde9455(0x183)]:_0xb118ec['writable']||_0xb118ec[_0xde9455(0x141)]))&&(_0xb118ec={'enumerable':!![],'get':function(){return _0x5bf16b[_0x3b79f5];}}),Object[_0xde9455(0x140)](_0x614b37,_0x315d45,_0xb118ec);}:function(_0x305737,_0x513afc,_0x52a9e0,_0xe46bca){if(_0xe46bca===undefined)_0xe46bca=_0x52a9e0;_0x305737[_0xe46bca]=_0x513afc[_0x52a9e0];}),__setModuleDefault=this&&this[a104_0x46fb42(0x168)]||(Object[a104_0x46fb42(0x14a)]?function(_0x4c40c2,_0x50d249){Object['defineProperty'](_0x4c40c2,'default',{'enumerable':!![],'value':_0x50d249});}:function(_0x330bf0,_0x3c8f86){const _0x3dc07b=a104_0x46fb42;_0x330bf0[_0x3dc07b(0x185)]=_0x3c8f86;}),__decorate=this&&this[a104_0x46fb42(0x1a6)]||function(_0x26ee8e,_0x358ae9,_0x733d4b,_0x32192e){const _0x256131=a104_0x46fb42;var _0x509868=arguments['length'],_0x5f4175=_0x509868<0x3?_0x358ae9:_0x32192e===null?_0x32192e=Object[_0x256131(0x146)](_0x358ae9,_0x733d4b):_0x32192e,_0x5091e9;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x256131(0x1a9))_0x5f4175=Reflect[_0x256131(0x17b)](_0x26ee8e,_0x358ae9,_0x733d4b,_0x32192e);else{for(var _0x53996f=_0x26ee8e[_0x256131(0x18f)]-0x1;_0x53996f>=0x0;_0x53996f--)if(_0x5091e9=_0x26ee8e[_0x53996f])_0x5f4175=(_0x509868<0x3?_0x5091e9(_0x5f4175):_0x509868>0x3?_0x5091e9(_0x358ae9,_0x733d4b,_0x5f4175):_0x5091e9(_0x358ae9,_0x733d4b))||_0x5f4175;}return _0x509868>0x3&&_0x5f4175&&Object['defineProperty'](_0x358ae9,_0x733d4b,_0x5f4175),_0x5f4175;},__importStar=this&&this['__importStar']||function(_0x87f6af){const _0x173fa2=a104_0x46fb42;if(_0x87f6af&&_0x87f6af[_0x173fa2(0x183)])return _0x87f6af;var _0x1504d3={};if(_0x87f6af!=null){for(var _0x18f8eb in _0x87f6af)if(_0x18f8eb!=='default'&&Object['prototype'][_0x173fa2(0x14b)][_0x173fa2(0x18c)](_0x87f6af,_0x18f8eb))__createBinding(_0x1504d3,_0x87f6af,_0x18f8eb);}return __setModuleDefault(_0x1504d3,_0x87f6af),_0x1504d3;},__importDefault=this&&this[a104_0x46fb42(0x18d)]||function(_0x264dc0){const _0x540963=a104_0x46fb42;return _0x264dc0&&_0x264dc0[_0x540963(0x183)]?_0x264dc0:{'default':_0x264dc0};};Object[a104_0x46fb42(0x140)](exports,a104_0x46fb42(0x183),{'value':!![]}),exports[a104_0x46fb42(0x15a)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a104_0x46fb42(0x149))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a104_0x46fb42(0x186)),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require(a104_0x46fb42(0x155))),child_types_1=__importDefault(require(a104_0x46fb42(0x192))),utils_1=require('../../../shared/utils'),constants_1=require('../../../../constants'),git_provider_1=require(a104_0x46fb42(0x190)),bitbucket_api_service_1=require(a104_0x46fb42(0x19e)),sfdx_utils_2=require(a104_0x46fb42(0x1ab)),fs_internal_1=require(a104_0x46fb42(0x1a7)),path_1=require('path'),providers_tokens_1=require(a104_0x46fb42(0x18b));let CommitComponentsJob=class CommitComponentsJob extends events_1[a104_0x46fb42(0x185)]{constructor(){const _0x13bf1f=a104_0x46fb42;super(...arguments),this[_0x13bf1f(0x176)]=0x3e8,this['componentsToWrite']=0x0,this[_0x13bf1f(0x191)]=0x0,this['startTime']=Date[_0x13bf1f(0x1a2)]();}async[a104_0x46fb42(0x14c)](){const _0x469427=a104_0x46fb42,{repo:_0x2e883d}=this[_0x469427(0x147)],_0x1aaf89=typedi_1['default']['get'](providers_tokens_1[_0x469427(0x143)][_0x469427(0x161)]);if(this[_0x469427(0x147)][_0x469427(0x17e)]===git_provider_1[_0x469427(0x14e)][_0x469427(0x197)]){const _0x17030e=typedi_1[_0x469427(0x185)][_0x469427(0x157)](bitbucket_api_service_1[_0x469427(0x15c)]);await _0x17030e[_0x469427(0x170)]();}return _0x2e883d[_0x469427(0x19a)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x469427(0x16e)])(_0x2e883d[_0x469427(0x19a)])+_0x469427(0x15e)+_0x1aaf89[_0x469427(0x193)]()+'@');}['groupComponentsByFileName'](_0x5580a1){const _0x48452b=a104_0x46fb42;var _0x186b82;_0x5580a1[_0x48452b(0x16a)](_0x7b45f3=>child_types_1['default'][_0x48452b(0x19b)](_0x7b45f3['fileType'])?0x1:-0x1);const _0x57fc61={};for(const _0x3749d5 of _0x5580a1){_0x57fc61[_0x186b82=_0x3749d5['fileName']]||(_0x57fc61[_0x186b82]=[]),_0x57fc61[_0x3749d5[_0x48452b(0x17a)]]['push'](_0x3749d5);}return Object['values'](_0x57fc61)['reduce']((_0x30a4fe,_0x7a7917)=>[..._0x30a4fe,..._0x7a7917],[]);}async[a104_0x46fb42(0x19c)](_0x1faa72){const _0x34a739=a104_0x46fb42;_0x1faa72=this[_0x34a739(0x17f)](_0x1faa72);let _0x2b71da=0x0;while(_0x1faa72[_0x34a739(0x18f)]){const _0x2044b8=_0x1faa72[_0x34a739(0x14f)](0x0,this[_0x34a739(0x176)]);await this['mdapiUtils'][_0x34a739(0x18a)](_0x2044b8,{'skipChildErrors':this[_0x34a739(0x147)]['branch']['name']===_0x34a739(0x179)}),_0x2b71da+=_0x2044b8['length'],this[_0x34a739(0x150)][_0x34a739(0x174)](this[_0x34a739(0x164)]+_0x34a739(0x181)+_0x2b71da+'/'+this[_0x34a739(0x15f)]+_0x34a739(0x16d)),await this[_0x34a739(0x150)][_0x34a739(0x144)]();}}async[a104_0x46fb42(0x151)](_0x5f0a00){const _0x21e744=a104_0x46fb42;_0x5f0a00[_0x21e744(0x16a)](_0x281bf3=>child_types_1['default']['includes'](_0x281bf3['type'])?-0x1:0x1);let _0x4fe0b5=0x0;while(_0x5f0a00[_0x21e744(0x18f)]){const _0x3fdbdc=_0x5f0a00[_0x21e744(0x14f)](0x0,this[_0x21e744(0x176)]);await this[_0x21e744(0x1a4)][_0x21e744(0x151)](_0x3fdbdc),_0x4fe0b5+=_0x3fdbdc[_0x21e744(0x18f)],this[_0x21e744(0x150)][_0x21e744(0x174)](this[_0x21e744(0x164)]+_0x21e744(0x152)+_0x4fe0b5+'/'+this[_0x21e744(0x191)]+'\x20components'),await this[_0x21e744(0x150)]['send']();}}async[a104_0x46fb42(0x163)](){const _0x212b1f=a104_0x46fb42;this[_0x212b1f(0x1ae)]&&await this['gitUtils'][_0x212b1f(0x19f)]()['catch'](()=>void 0x0),this['mdapiUtils']&&await this[_0x212b1f(0x1a4)]['removeDir']()[_0x212b1f(0x198)](()=>void 0x0),this[_0x212b1f(0x1af)]&&await this[_0x212b1f(0x1af)][_0x212b1f(0x19f)]()[_0x212b1f(0x198)](()=>void 0x0);}async['exec'](){const _0x21bd83=a104_0x46fb42,{repo:_0x14a2ee,branch:_0x41cc0a,components:_0x3e4a50,convertToSFDX:_0x42a94d,message:_0x94528a,user:_0x3a6849}=this[_0x21bd83(0x147)];this[_0x21bd83(0x1a4)]=new mdapi_utils_1[(_0x21bd83(0x165))](),this['gitUtils']=new git_utils_1[(_0x21bd83(0x16f))](await this[_0x21bd83(0x14c)]()),this[_0x21bd83(0x1af)]=new sfdx_utils_1['SFDXUtils']();let _0x4a9849=_0x42a94d;try{await this['sfLogger'][_0x21bd83(0x174)](this[_0x21bd83(0x164)]+_0x21bd83(0x158))['send'](),await this['gitUtils'][_0x21bd83(0x154)](_0x41cc0a[_0x21bd83(0x169)],_0x14a2ee[_0x21bd83(0x169)]);!this[_0x21bd83(0x147)]['force']?(this[_0x21bd83(0x150)]['log'](this['prefix']+_0x21bd83(0x16c)),await this[_0x21bd83(0x1a4)][_0x21bd83(0x1ac)](this['gitUtils'][_0x21bd83(0x17d)])):this['sfLogger']['log'](this['prefix']+_0x21bd83(0x1aa));await this[_0x21bd83(0x150)][_0x21bd83(0x174)](this[_0x21bd83(0x164)]+'\x20Checking\x20written\x20components.')[_0x21bd83(0x144)]();_0x3e4a50['writed']&&(this['sfLogger'][_0x21bd83(0x174)](this['prefix']+_0x21bd83(0x15d)),this[_0x21bd83(0x15f)]=_0x3e4a50[_0x21bd83(0x16b)]['length'],await this[_0x21bd83(0x19c)](_0x3e4a50[_0x21bd83(0x16b)]),await this[_0x21bd83(0x150)]['send']());await this[_0x21bd83(0x150)]['log'](this[_0x21bd83(0x164)]+_0x21bd83(0x166))[_0x21bd83(0x144)]();_0x3e4a50[_0x21bd83(0x156)]&&(this[_0x21bd83(0x150)]['log'](this[_0x21bd83(0x164)]+_0x21bd83(0x171)),this[_0x21bd83(0x191)]=_0x3e4a50[_0x21bd83(0x156)][_0x21bd83(0x18f)],await this['removeComponents'](_0x3e4a50[_0x21bd83(0x156)]),await this[_0x21bd83(0x150)][_0x21bd83(0x144)]());await this['sfLogger']['send']();const _0x42bccb=await fs_internal_1['FS'][_0x21bd83(0x162)](this[_0x21bd83(0x1ae)][_0x21bd83(0x17d)]);await sfdx_utils_2['SFDX'][_0x21bd83(0x175)](this[_0x21bd83(0x1ae)][_0x21bd83(0x17d)])?(_0x4a9849=!![],await fs_internal_1['FS'][_0x21bd83(0x19f)]((0x0,path_1['join'])(this[_0x21bd83(0x1ae)][_0x21bd83(0x17d)],_0x21bd83(0x180)))):(_0x4a9849&&(!_0x42bccb&&(_0x4a9849=![])),await this[_0x21bd83(0x1ae)][_0x21bd83(0x14d)]());_0x4a9849?(await this['sfLogger'][_0x21bd83(0x174)](this[_0x21bd83(0x164)]+_0x21bd83(0x1a8))['send'](),await this[_0x21bd83(0x1af)]['createProjectFrom'](this[_0x21bd83(0x1a4)][_0x21bd83(0x17d)]),await this[_0x21bd83(0x1af)][_0x21bd83(0x167)](this[_0x21bd83(0x1ae)][_0x21bd83(0x17d)],!_0x42bccb),await this[_0x21bd83(0x1af)][_0x21bd83(0x19f)]()):(await this[_0x21bd83(0x150)][_0x21bd83(0x174)](this[_0x21bd83(0x164)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')['send'](),await this['mdapiUtils'][_0x21bd83(0x199)](this['gitUtils'][_0x21bd83(0x17d)]));await this[_0x21bd83(0x150)][_0x21bd83(0x174)](this[_0x21bd83(0x164)]+_0x21bd83(0x177))[_0x21bd83(0x144)](),await this[_0x21bd83(0x1ae)][_0x21bd83(0x188)](_0x94528a,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x3a6849[_0x21bd83(0x169)]},_0x41cc0a['name']),await this[_0x21bd83(0x1ae)]['removeDir'](),await this['mdapiUtils'][_0x21bd83(0x19f)]();const _0x397e34=this[_0x21bd83(0x15f)]+this[_0x21bd83(0x191)];await this[_0x21bd83(0x150)][_0x21bd83(0x174)](this[_0x21bd83(0x164)]+_0x21bd83(0x160)+(Date[_0x21bd83(0x1a2)]()-this['startTime'])+_0x21bd83(0x142)+_0x397e34+'.')['send']();}catch(_0x126a39){await this[_0x21bd83(0x163)](),await this['sfLogger'][_0x21bd83(0x172)](this[_0x21bd83(0x164)]+'\x20'+_0x126a39)[_0x21bd83(0x144)]();throw _0x126a39;}}async[a104_0x46fb42(0x194)](_0x25ac80,_0x145cf6){const _0xbd8451=a104_0x46fb42;var _0x5793c3,_0x4ef147;this['sfLogger']=typedi_1[_0xbd8451(0x185)][_0xbd8451(0x157)](providers_tokens_1[_0xbd8451(0x143)][_0xbd8451(0x196)]),this[_0xbd8451(0x164)]=(_0x145cf6?_0x145cf6+'\x20':'')+'['+commit_components_dto_1[_0xbd8451(0x13e)][_0xbd8451(0x169)]+']',await this[_0xbd8451(0x150)][_0xbd8451(0x174)](this[_0xbd8451(0x164)]+_0xbd8451(0x195));const _0x49f796=!!((_0x5793c3=_0x25ac80[_0xbd8451(0x13f)])===null||_0x5793c3===void 0x0?void 0x0:_0x5793c3['writed'])||!!((_0x4ef147=_0x25ac80[_0xbd8451(0x13f)])===null||_0x4ef147===void 0x0?void 0x0:_0x4ef147['deleted']);if(!_0x49f796){await this[_0xbd8451(0x150)][_0xbd8451(0x174)](this[_0xbd8451(0x164)]+_0xbd8451(0x19d))[_0xbd8451(0x144)]();return;}this['commitData']=_0x25ac80,await this[_0xbd8451(0x173)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0x46fb42(0x1a1)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;