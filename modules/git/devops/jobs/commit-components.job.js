const a103_0x2f6e2d=a103_0x4b74;(function(_0xee171f,_0x276259){const _0x22764a=a103_0x4b74,_0x1a43aa=_0xee171f();while(!![]){try{const _0x4654fe=parseInt(_0x22764a(0x17e))/0x1+-parseInt(_0x22764a(0x19d))/0x2+parseInt(_0x22764a(0x1a4))/0x3*(parseInt(_0x22764a(0x1aa))/0x4)+parseInt(_0x22764a(0x17f))/0x5*(-parseInt(_0x22764a(0x187))/0x6)+parseInt(_0x22764a(0x191))/0x7+-parseInt(_0x22764a(0x1b5))/0x8+parseInt(_0x22764a(0x14a))/0x9*(parseInt(_0x22764a(0x172))/0xa);if(_0x4654fe===_0x276259)break;else _0x1a43aa['push'](_0x1a43aa['shift']());}catch(_0x2a6ff6){_0x1a43aa['push'](_0x1a43aa['shift']());}}}(a103_0x17d7,0x9acbe));const a103_0x265c9f=(function(){let _0x578138=!![];return function(_0x322655,_0xf6795e){const _0x12ce63=_0x578138?function(){const _0x3e37cd=a103_0x4b74;if(_0xf6795e){const _0x22d7a8=_0xf6795e[_0x3e37cd(0x154)](_0x322655,arguments);return _0xf6795e=null,_0x22d7a8;}}:function(){};return _0x578138=![],_0x12ce63;};}()),a103_0x30a941=a103_0x265c9f(this,function(){const _0x933717=a103_0x4b74;return a103_0x30a941[_0x933717(0x1a3)]()['search']('(((.+)+)+)+$')[_0x933717(0x1a3)]()[_0x933717(0x1b2)](a103_0x30a941)['search'](_0x933717(0x1b6));});a103_0x30a941();function a103_0x4b74(_0x511ce4,_0x2c162e){const _0x53f426=a103_0x17d7();return a103_0x4b74=function(_0x30a941,_0x265c9f){_0x30a941=_0x30a941-0x145;let _0x17d769=_0x53f426[_0x30a941];return _0x17d769;},a103_0x4b74(_0x511ce4,_0x2c162e);}'use strict';var __createBinding=this&&this[a103_0x2f6e2d(0x152)]||(Object[a103_0x2f6e2d(0x161)]?function(_0x3761ea,_0x5651f6,_0x551d1c,_0x3a8fdd){const _0x31045c=a103_0x2f6e2d;if(_0x3a8fdd===undefined)_0x3a8fdd=_0x551d1c;var _0x851ced=Object[_0x31045c(0x160)](_0x5651f6,_0x551d1c);(!_0x851ced||('get'in _0x851ced?!_0x5651f6[_0x31045c(0x1b9)]:_0x851ced['writable']||_0x851ced[_0x31045c(0x145)]))&&(_0x851ced={'enumerable':!![],'get':function(){return _0x5651f6[_0x551d1c];}}),Object[_0x31045c(0x195)](_0x3761ea,_0x3a8fdd,_0x851ced);}:function(_0x532e04,_0x38bb7e,_0x2b0e3a,_0x1edf63){if(_0x1edf63===undefined)_0x1edf63=_0x2b0e3a;_0x532e04[_0x1edf63]=_0x38bb7e[_0x2b0e3a];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x140d26,_0x3ad6b3){const _0x18a9ea=a103_0x2f6e2d;Object[_0x18a9ea(0x195)](_0x140d26,_0x18a9ea(0x167),{'enumerable':!![],'value':_0x3ad6b3});}:function(_0x52ebd0,_0x412408){const _0x8727f8=a103_0x2f6e2d;_0x52ebd0[_0x8727f8(0x167)]=_0x412408;}),__decorate=this&&this[a103_0x2f6e2d(0x198)]||function(_0x1a3707,_0x3738f8,_0xb8e5ea,_0x5b8578){const _0x1e1229=a103_0x2f6e2d;var _0x563ed7=arguments[_0x1e1229(0x146)],_0x3e09c0=_0x563ed7<0x3?_0x3738f8:_0x5b8578===null?_0x5b8578=Object['getOwnPropertyDescriptor'](_0x3738f8,_0xb8e5ea):_0x5b8578,_0x206d26;if(typeof Reflect===_0x1e1229(0x177)&&typeof Reflect['decorate']===_0x1e1229(0x199))_0x3e09c0=Reflect[_0x1e1229(0x197)](_0x1a3707,_0x3738f8,_0xb8e5ea,_0x5b8578);else{for(var _0x2ac451=_0x1a3707[_0x1e1229(0x146)]-0x1;_0x2ac451>=0x0;_0x2ac451--)if(_0x206d26=_0x1a3707[_0x2ac451])_0x3e09c0=(_0x563ed7<0x3?_0x206d26(_0x3e09c0):_0x563ed7>0x3?_0x206d26(_0x3738f8,_0xb8e5ea,_0x3e09c0):_0x206d26(_0x3738f8,_0xb8e5ea))||_0x3e09c0;}return _0x563ed7>0x3&&_0x3e09c0&&Object[_0x1e1229(0x195)](_0x3738f8,_0xb8e5ea,_0x3e09c0),_0x3e09c0;},__importStar=this&&this['__importStar']||function(_0x324cb1){const _0x10c8fc=a103_0x2f6e2d;if(_0x324cb1&&_0x324cb1['__esModule'])return _0x324cb1;var _0x6cfedf={};if(_0x324cb1!=null){for(var _0xfdf518 in _0x324cb1)if(_0xfdf518!=='default'&&Object[_0x10c8fc(0x151)][_0x10c8fc(0x16e)][_0x10c8fc(0x14e)](_0x324cb1,_0xfdf518))__createBinding(_0x6cfedf,_0x324cb1,_0xfdf518);}return __setModuleDefault(_0x6cfedf,_0x324cb1),_0x6cfedf;},__importDefault=this&&this[a103_0x2f6e2d(0x19b)]||function(_0x8eb1f4){const _0x1a54af=a103_0x2f6e2d;return _0x8eb1f4&&_0x8eb1f4[_0x1a54af(0x1b9)]?_0x8eb1f4:{'default':_0x8eb1f4};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a103_0x2f6e2d(0x173)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a103_0x2f6e2d(0x18a))),git_utils_1=require(a103_0x2f6e2d(0x1af)),mdapi_utils_1=require(a103_0x2f6e2d(0x18e)),sfdx_utils_1=require(a103_0x2f6e2d(0x17d)),typedi_1=__importStar(require(a103_0x2f6e2d(0x19a))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require('../../../shared/utils'),constants_1=require('../../../../constants'),git_provider_1=require('../../providers/types/git-provider'),bitbucket_api_service_1=require(a103_0x2f6e2d(0x153)),sfdx_utils_2=require(a103_0x2f6e2d(0x1ab)),fs_internal_1=require(a103_0x2f6e2d(0x168)),path_1=require(a103_0x2f6e2d(0x18f)),providers_tokens_1=require('../../providers/providers.tokens');let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(){const _0x48980d=a103_0x2f6e2d;super(...arguments),this[_0x48980d(0x162)]=0x3e8,this[_0x48980d(0x156)]=0x0,this[_0x48980d(0x148)]=0x0,this['startTime']=Date[_0x48980d(0x1a9)]();}async['getRemote'](){const _0x533447=a103_0x2f6e2d,{repo:_0x42b587}=this[_0x533447(0x1b0)],_0x5f120e=typedi_1[_0x533447(0x167)][_0x533447(0x1ad)](providers_tokens_1[_0x533447(0x166)][_0x533447(0x1a6)]);if(this[_0x533447(0x1b0)][_0x533447(0x174)]===git_provider_1[_0x533447(0x185)][_0x533447(0x16b)]){const _0x3243f7=typedi_1['default']['get'](bitbucket_api_service_1['BitbucketApiService']);await _0x3243f7[_0x533447(0x1a1)]();}return _0x42b587[_0x533447(0x183)][_0x533447(0x1b7)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x533447(0x16a)])(_0x42b587[_0x533447(0x183)])+_0x533447(0x15e)+_0x5f120e[_0x533447(0x19f)]()+'@');}[a103_0x2f6e2d(0x170)](_0x33f56b){const _0xa9cbf6=a103_0x2f6e2d;var _0x11a4f0;_0x33f56b[_0xa9cbf6(0x192)](_0x4c2b93=>child_types_1[_0xa9cbf6(0x167)][_0xa9cbf6(0x147)](_0x4c2b93[_0xa9cbf6(0x190)])?0x1:-0x1);const _0x4a1a13={};for(const _0x1e5d1b of _0x33f56b){_0x4a1a13[_0x11a4f0=_0x1e5d1b[_0xa9cbf6(0x1b8)]]||(_0x4a1a13[_0x11a4f0]=[]),_0x4a1a13[_0x1e5d1b['fileName']]['push'](_0x1e5d1b);}return Object[_0xa9cbf6(0x18c)](_0x4a1a13)[_0xa9cbf6(0x17c)]((_0x3d347f,_0xfab3b5)=>[..._0x3d347f,..._0xfab3b5],[]);}async[a103_0x2f6e2d(0x17b)](_0x76d1b3){const _0x4b161d=a103_0x2f6e2d;_0x76d1b3=this[_0x4b161d(0x170)](_0x76d1b3);let _0xc1d0cb=0x0;while(_0x76d1b3[_0x4b161d(0x146)]){const _0x2c3f83=_0x76d1b3[_0x4b161d(0x15a)](0x0,this[_0x4b161d(0x162)]);await this[_0x4b161d(0x179)]['writeFlosumComponents'](_0x2c3f83,{'skipChildErrors':this[_0x4b161d(0x1b0)][_0x4b161d(0x19c)][_0x4b161d(0x18d)]===_0x4b161d(0x1a0)}),_0xc1d0cb+=_0x2c3f83['length'],this[_0x4b161d(0x14c)][_0x4b161d(0x184)](this[_0x4b161d(0x178)]+'\x20Wrote\x20'+_0xc1d0cb+'/'+this[_0x4b161d(0x156)]+_0x4b161d(0x186)),await this[_0x4b161d(0x14c)][_0x4b161d(0x1b4)]();}}async[a103_0x2f6e2d(0x180)](_0x125ed5){const _0x2f3fc8=a103_0x2f6e2d;_0x125ed5[_0x2f3fc8(0x192)](_0xea96a8=>child_types_1[_0x2f3fc8(0x167)][_0x2f3fc8(0x147)](_0xea96a8[_0x2f3fc8(0x189)])?-0x1:0x1);let _0x5d67e8=0x0;while(_0x125ed5[_0x2f3fc8(0x146)]){const _0x38e0be=_0x125ed5[_0x2f3fc8(0x15a)](0x0,this[_0x2f3fc8(0x162)]);await this['mdapiUtils'][_0x2f3fc8(0x180)](_0x38e0be),_0x5d67e8+=_0x38e0be[_0x2f3fc8(0x146)],this[_0x2f3fc8(0x14c)]['log'](this[_0x2f3fc8(0x178)]+_0x2f3fc8(0x149)+_0x5d67e8+'/'+this['componentsToDelete']+_0x2f3fc8(0x186)),await this[_0x2f3fc8(0x14c)][_0x2f3fc8(0x1b4)]();}}async[a103_0x2f6e2d(0x1b1)](){const _0x182d07=a103_0x2f6e2d;this[_0x182d07(0x16d)]&&await this['gitUtils'][_0x182d07(0x1a8)]()['catch'](()=>void 0x0),this[_0x182d07(0x179)]&&await this[_0x182d07(0x179)][_0x182d07(0x1a8)]()[_0x182d07(0x194)](()=>void 0x0),this[_0x182d07(0x14f)]&&await this[_0x182d07(0x14f)][_0x182d07(0x1a8)]()[_0x182d07(0x194)](()=>void 0x0);}async[a103_0x2f6e2d(0x16c)](){const _0x475205=a103_0x2f6e2d,{repo:_0x54581c,branch:_0x514db9,components:_0x40148c,convertToSFDX:_0x553115,message:_0xfa565b,user:_0x385754}=this[_0x475205(0x1b0)];this['mdapiUtils']=new mdapi_utils_1[(_0x475205(0x158))](),this[_0x475205(0x16d)]=new git_utils_1[(_0x475205(0x14b))](await this[_0x475205(0x14d)]()),this[_0x475205(0x14f)]=new sfdx_utils_1['SFDXUtils']();let _0x26c177=_0x553115;try{await this[_0x475205(0x14c)][_0x475205(0x184)](this[_0x475205(0x178)]+_0x475205(0x1ac))[_0x475205(0x1b4)](),await this[_0x475205(0x16d)][_0x475205(0x1ba)](_0x514db9[_0x475205(0x18d)],_0x54581c[_0x475205(0x18d)]);!this[_0x475205(0x1b0)]['force']?(this[_0x475205(0x14c)][_0x475205(0x184)](this[_0x475205(0x178)]+_0x475205(0x182)),await this[_0x475205(0x179)][_0x475205(0x15f)](this[_0x475205(0x16d)][_0x475205(0x1b3)])):this['sfLogger'][_0x475205(0x184)](this['prefix']+_0x475205(0x18b));await this[_0x475205(0x14c)]['log'](this[_0x475205(0x178)]+_0x475205(0x196))[_0x475205(0x1b4)]();_0x40148c['writed']&&(this[_0x475205(0x14c)][_0x475205(0x184)](this[_0x475205(0x178)]+_0x475205(0x176)),this['componentsToWrite']=_0x40148c[_0x475205(0x16f)][_0x475205(0x146)],await this[_0x475205(0x17b)](_0x40148c[_0x475205(0x16f)]),await this[_0x475205(0x14c)][_0x475205(0x1b4)]());await this[_0x475205(0x14c)][_0x475205(0x184)](this[_0x475205(0x178)]+_0x475205(0x17a))[_0x475205(0x1b4)]();_0x40148c[_0x475205(0x175)]&&(this['sfLogger'][_0x475205(0x184)](this[_0x475205(0x178)]+_0x475205(0x181)),this[_0x475205(0x148)]=_0x40148c[_0x475205(0x175)][_0x475205(0x146)],await this['removeComponents'](_0x40148c[_0x475205(0x175)]),await this['sfLogger'][_0x475205(0x1b4)]());await this[_0x475205(0x14c)][_0x475205(0x1b4)]();const _0x508573=await fs_internal_1['FS'][_0x475205(0x1a7)](this[_0x475205(0x16d)][_0x475205(0x1b3)]);await sfdx_utils_2[_0x475205(0x1a2)][_0x475205(0x19e)](this['gitUtils'][_0x475205(0x1b3)])?(_0x26c177=!![],await fs_internal_1['FS'][_0x475205(0x1a8)]((0x0,path_1['join'])(this[_0x475205(0x16d)][_0x475205(0x1b3)],_0x475205(0x193)))):(_0x26c177&&(!_0x508573&&(_0x26c177=![])),await this[_0x475205(0x16d)][_0x475205(0x1ae)]());_0x26c177?(await this[_0x475205(0x14c)][_0x475205(0x184)](this['prefix']+_0x475205(0x188))['send'](),await this[_0x475205(0x14f)][_0x475205(0x163)](this[_0x475205(0x179)][_0x475205(0x1b3)]),await this[_0x475205(0x14f)]['copyProjectTo'](this['gitUtils'][_0x475205(0x1b3)],!_0x508573),await this[_0x475205(0x14f)][_0x475205(0x1a8)]()):(await this['sfLogger']['log'](this[_0x475205(0x178)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x475205(0x1b4)](),await this[_0x475205(0x179)][_0x475205(0x155)](this[_0x475205(0x16d)][_0x475205(0x1b3)]));await this[_0x475205(0x14c)][_0x475205(0x184)](this[_0x475205(0x178)]+_0x475205(0x169))['send'](),await this[_0x475205(0x16d)][_0x475205(0x15d)](_0xfa565b,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x385754[_0x475205(0x18d)]},_0x514db9[_0x475205(0x18d)]),await this[_0x475205(0x16d)][_0x475205(0x1a8)](),await this[_0x475205(0x179)][_0x475205(0x1a8)]();const _0x398498=this['componentsToWrite']+this[_0x475205(0x148)];await this[_0x475205(0x14c)][_0x475205(0x184)](this[_0x475205(0x178)]+_0x475205(0x159)+(Date[_0x475205(0x1a9)]()-this[_0x475205(0x171)])+_0x475205(0x1a5)+_0x398498+'.')['send']();}catch(_0x33aae9){await this[_0x475205(0x1b1)](),await this[_0x475205(0x14c)][_0x475205(0x150)](this['prefix']+'\x20'+_0x33aae9)['send']();throw _0x33aae9;}}async[a103_0x2f6e2d(0x157)](_0x36512a,_0x1e56d6){const _0x48a012=a103_0x2f6e2d;var _0x553d1b,_0x592891;this[_0x48a012(0x14c)]=typedi_1[_0x48a012(0x167)][_0x48a012(0x1ad)](providers_tokens_1[_0x48a012(0x166)]['logger']),this[_0x48a012(0x178)]=(_0x1e56d6?_0x1e56d6+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x48a012(0x18d)]+']',await this['sfLogger'][_0x48a012(0x184)](this[_0x48a012(0x178)]+_0x48a012(0x165));const _0x35cac6=!!((_0x553d1b=_0x36512a['components'])===null||_0x553d1b===void 0x0?void 0x0:_0x553d1b[_0x48a012(0x16f)])||!!((_0x592891=_0x36512a[_0x48a012(0x15b)])===null||_0x592891===void 0x0?void 0x0:_0x592891[_0x48a012(0x175)]);if(!_0x35cac6){await this['sfLogger'][_0x48a012(0x184)](this[_0x48a012(0x178)]+_0x48a012(0x164))[_0x48a012(0x1b4)]();return;}this[_0x48a012(0x1b0)]=_0x36512a,await this['exec']();}};function a103_0x17d7(){const _0x592a04=['fileType','1274035ftlmBG','sort','force-app','catch','defineProperty','\x20Checking\x20written\x20components.','decorate','__decorate','function','typedi','__importDefault','branch','1232490lSJmBd','isSFDXProject','getGitShellAuthorizationString','master','isLoggedIn','SFDX','toString','45lLUHiv','ms.\x20Committed\x20components\x20-\x20','credentials','isEmptyDir','removeDir','now','272164dVcdiE','../../salesforce/utils/sfdx.utils','\x20Start\x20cloning\x20repository.','get','clearDir','../utils/git.utils','commitData','cleanUp','constructor','dir','send','2294784WOEEWl','(((.+)+)+)+$','replace','fileName','__esModule','clone','configurable','length','includes','componentsToDelete','\x20Deleted\x20','954HHRyBb','GitUtils','sfLogger','getRemote','call','sfdxUtils','error','prototype','__createBinding','../../providers/api/bitbucket-api.service','apply','copyMdapiTo','componentsToWrite','run','MDApiUtils','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','splice','components','Service','commitAndPush','://','prepareMdapi','getOwnPropertyDescriptor','create','COMPONENTS_PER_TICK','createProjectFrom','\x20Nothing\x20to\x20commit.\x20Skip.','\x20Checking\x20commit\x20components.','Tokens','default','../../internal/fs.internal','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','getProtocol','Bitbucket','exec','gitUtils','hasOwnProperty','writed','groupComponentsByFileName','startTime','4960GuYGhU','CommitComponentsJob','provider','deleted','\x20Preparing\x20to\x20write\x20components','object','prefix','mdapiUtils','\x20Checking\x20deleted\x20components.','writeComponents','reduce','../utils/sfdx.utils','1125445cRNLEl','91685hLJtYB','removeComponents','\x20Preparing\x20to\x20delete\x20components','\x20Prepare\x20mdapi\x20files.','gitUrl','log','GitProvider','\x20components','276jNrfbp','\x20Start\x20converting\x20to\x20SFDX.','type','events','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','values','name','../utils/mdapi.utils','path'];a103_0x17d7=function(){return _0x592a04;};return a103_0x17d7();}CommitComponentsJob=__decorate([(0x0,typedi_1[a103_0x2f6e2d(0x15c)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;