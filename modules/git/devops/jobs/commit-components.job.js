function a103_0xc606(_0x50e90c,_0x40dbcb){const _0x11f4f5=a103_0x2620();return a103_0xc606=function(_0x2daa52,_0xa4deff){_0x2daa52=_0x2daa52-0x1a8;let _0x2620f3=_0x11f4f5[_0x2daa52];return _0x2620f3;},a103_0xc606(_0x50e90c,_0x40dbcb);}const a103_0x384d0e=a103_0xc606;function a103_0x2620(){const _0x4d97fa=['30350MenGwX','createProjectFrom','Service','SFDXUtils','send','componentsToDelete','(((.+)+)+)+$','SFDX','../../../../constants','../../../shared/utils','isEmptyDir','components','deleted','4416USWYlN','\x20Preparing\x20to\x20delete\x20components','defineProperty','removeDir','708503dvzFqy','sfLogger','\x20components','2464GFWApB','commitData','\x20Deleted\x20','../../salesforce/utils/sfdx.utils','gitUrl','fileName','\x20Nothing\x20to\x20commit.\x20Skip.','5942709UjtuKQ','exec','getOwnPropertyDescriptor','MDApiUtils','../utils/git.utils','2HhhkDO','type','__setModuleDefault','copyMdapiTo','groupComponentsByFileName','../utils/mdapi.utils','../utils/sfdx.utils','startTime','componentsToWrite','get','sort','GitProvider','getGitShellAuthorizationString','Tokens','__esModule','log','force-app','writed','600BKlcpo','../../parsers/data/child-types','path','mdapiUtils','../../providers/providers.tokens','570939iTOahC','../../internal/fs.internal','join','__createBinding','prefix','../../providers/api/bitbucket-api.service','provider','BitbucketApiService','\x20Copying\x20mdapi\x20to\x20git\x20folder.','catch','4856976GFufjY','push','now','name','create','cleanUp','writeFlosumComponents','function','fileType','gitUtils','prototype','writable','getProtocol','replace','events','getRemote','dir','error','clone','toString','9429UmgxoW','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','GitUtils','sfdxUtils','removeComponents','__decorate','commitAndPush','DEFAULT_GIT_USER_EMAIL','values','prepareMdapi','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','includes','CommitComponentsJob','apply','length','\x20Wrote\x20','search','decorate','\x20Prepare\x20mdapi\x20files.','object','copyProjectTo','250xFWYUh','../dto/commit-components.dto','default','://','logger','clearDir'];a103_0x2620=function(){return _0x4d97fa;};return a103_0x2620();}(function(_0x485fe4,_0xf07a16){const _0x2967dc=a103_0xc606,_0x15d062=_0x485fe4();while(!![]){try{const _0x5b7c0f=-parseInt(_0x2967dc(0x1f5))/0x1*(-parseInt(_0x2967dc(0x204))/0x2)+-parseInt(_0x2967dc(0x1ab))/0x3+-parseInt(_0x2967dc(0x216))/0x4*(-parseInt(_0x2967dc(0x1e4))/0x5)+-parseInt(_0x2967dc(0x1f1))/0x6*(parseInt(_0x2967dc(0x1c9))/0x7)+-parseInt(_0x2967dc(0x1b5))/0x8+parseInt(_0x2967dc(0x1ff))/0x9+parseInt(_0x2967dc(0x1de))/0xa*(parseInt(_0x2967dc(0x1f8))/0xb);if(_0x5b7c0f===_0xf07a16)break;else _0x15d062['push'](_0x15d062['shift']());}catch(_0x2ca9f4){_0x15d062['push'](_0x15d062['shift']());}}}(a103_0x2620,0x791cd));const a103_0xa4deff=(function(){let _0x501a81=!![];return function(_0xaf79e7,_0x3fa00c){const _0xa22256=_0x501a81?function(){const _0x233f6c=a103_0xc606;if(_0x3fa00c){const _0x1e66fc=_0x3fa00c[_0x233f6c(0x1d6)](_0xaf79e7,arguments);return _0x3fa00c=null,_0x1e66fc;}}:function(){};return _0x501a81=![],_0xa22256;};}()),a103_0x2daa52=a103_0xa4deff(this,function(){const _0x74f6a0=a103_0xc606;return a103_0x2daa52[_0x74f6a0(0x1c8)]()['search']('(((.+)+)+)+$')[_0x74f6a0(0x1c8)]()['constructor'](a103_0x2daa52)[_0x74f6a0(0x1d9)](_0x74f6a0(0x1ea));});a103_0x2daa52();'use strict';var __createBinding=this&&this[a103_0x384d0e(0x1ae)]||(Object[a103_0x384d0e(0x1b9)]?function(_0x44fb77,_0x38c996,_0x23526d,_0xf25dab){const _0xadd444=a103_0x384d0e;if(_0xf25dab===undefined)_0xf25dab=_0x23526d;var _0x4439a5=Object[_0xadd444(0x201)](_0x38c996,_0x23526d);(!_0x4439a5||('get'in _0x4439a5?!_0x38c996[_0xadd444(0x212)]:_0x4439a5[_0xadd444(0x1c0)]||_0x4439a5['configurable']))&&(_0x4439a5={'enumerable':!![],'get':function(){return _0x38c996[_0x23526d];}}),Object[_0xadd444(0x1f3)](_0x44fb77,_0xf25dab,_0x4439a5);}:function(_0x30148e,_0x43d15d,_0x5dc31f,_0x50e290){if(_0x50e290===undefined)_0x50e290=_0x5dc31f;_0x30148e[_0x50e290]=_0x43d15d[_0x5dc31f];}),__setModuleDefault=this&&this[a103_0x384d0e(0x206)]||(Object[a103_0x384d0e(0x1b9)]?function(_0x4d3b23,_0x51dca1){const _0x40295e=a103_0x384d0e;Object['defineProperty'](_0x4d3b23,_0x40295e(0x1e0),{'enumerable':!![],'value':_0x51dca1});}:function(_0x144c01,_0x1a86a8){_0x144c01['default']=_0x1a86a8;}),__decorate=this&&this[a103_0x384d0e(0x1ce)]||function(_0xdf2be8,_0x56b885,_0x2fc214,_0x19c340){const _0x572e0c=a103_0x384d0e;var _0x17d8fa=arguments['length'],_0x394c55=_0x17d8fa<0x3?_0x56b885:_0x19c340===null?_0x19c340=Object[_0x572e0c(0x201)](_0x56b885,_0x2fc214):_0x19c340,_0x7f17f9;if(typeof Reflect===_0x572e0c(0x1dc)&&typeof Reflect[_0x572e0c(0x1da)]===_0x572e0c(0x1bc))_0x394c55=Reflect['decorate'](_0xdf2be8,_0x56b885,_0x2fc214,_0x19c340);else{for(var _0x4acb33=_0xdf2be8[_0x572e0c(0x1d7)]-0x1;_0x4acb33>=0x0;_0x4acb33--)if(_0x7f17f9=_0xdf2be8[_0x4acb33])_0x394c55=(_0x17d8fa<0x3?_0x7f17f9(_0x394c55):_0x17d8fa>0x3?_0x7f17f9(_0x56b885,_0x2fc214,_0x394c55):_0x7f17f9(_0x56b885,_0x2fc214))||_0x394c55;}return _0x17d8fa>0x3&&_0x394c55&&Object[_0x572e0c(0x1f3)](_0x56b885,_0x2fc214,_0x394c55),_0x394c55;},__importStar=this&&this['__importStar']||function(_0x5e8e73){const _0x5d827f=a103_0x384d0e;if(_0x5e8e73&&_0x5e8e73[_0x5d827f(0x212)])return _0x5e8e73;var _0x3d85f4={};if(_0x5e8e73!=null){for(var _0x479766 in _0x5e8e73)if(_0x479766!=='default'&&Object[_0x5d827f(0x1bf)]['hasOwnProperty']['call'](_0x5e8e73,_0x479766))__createBinding(_0x3d85f4,_0x5e8e73,_0x479766);}return __setModuleDefault(_0x3d85f4,_0x5e8e73),_0x3d85f4;},__importDefault=this&&this['__importDefault']||function(_0x371d7b){const _0x5db3d4=a103_0x384d0e;return _0x371d7b&&_0x371d7b[_0x5db3d4(0x212)]?_0x371d7b:{'default':_0x371d7b};};Object['defineProperty'](exports,a103_0x384d0e(0x212),{'value':!![]}),exports[a103_0x384d0e(0x1d5)]=void 0x0;const commit_components_dto_1=require(a103_0x384d0e(0x1df)),events_1=__importDefault(require(a103_0x384d0e(0x1c3))),git_utils_1=require(a103_0x384d0e(0x203)),mdapi_utils_1=require(a103_0x384d0e(0x209)),sfdx_utils_1=require(a103_0x384d0e(0x20a)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a103_0x384d0e(0x217))),utils_1=require(a103_0x384d0e(0x1ed)),constants_1=require(a103_0x384d0e(0x1ec)),git_provider_1=require('../../providers/types/git-provider'),bitbucket_api_service_1=require(a103_0x384d0e(0x1b0)),sfdx_utils_2=require(a103_0x384d0e(0x1fb)),fs_internal_1=require(a103_0x384d0e(0x1ac)),path_1=require(a103_0x384d0e(0x1a8)),providers_tokens_1=require(a103_0x384d0e(0x1aa));let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(){const _0x5b4e73=a103_0x384d0e;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this[_0x5b4e73(0x20c)]=0x0,this[_0x5b4e73(0x1e9)]=0x0,this[_0x5b4e73(0x20b)]=Date[_0x5b4e73(0x1b7)]();}async[a103_0x384d0e(0x1c4)](){const _0x1a9eb0=a103_0x384d0e,{repo:_0x2dc2d3}=this[_0x1a9eb0(0x1f9)],_0x4887e6=typedi_1['default'][_0x1a9eb0(0x20d)](providers_tokens_1[_0x1a9eb0(0x211)]['credentials']);if(this[_0x1a9eb0(0x1f9)][_0x1a9eb0(0x1b1)]===git_provider_1[_0x1a9eb0(0x20f)]['Bitbucket']){const _0x470c1d=typedi_1[_0x1a9eb0(0x1e0)][_0x1a9eb0(0x20d)](bitbucket_api_service_1[_0x1a9eb0(0x1b2)]);await _0x470c1d['isLoggedIn']();}return _0x2dc2d3[_0x1a9eb0(0x1fc)][_0x1a9eb0(0x1c2)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x1a9eb0(0x1c1)])(_0x2dc2d3[_0x1a9eb0(0x1fc)])+_0x1a9eb0(0x1e1)+_0x4887e6[_0x1a9eb0(0x210)]()+'@');}['groupComponentsByFileName'](_0x3dd768){const _0x10f704=a103_0x384d0e;var _0x55a3f9;_0x3dd768[_0x10f704(0x20e)](_0x36b5a6=>child_types_1['default'][_0x10f704(0x1d4)](_0x36b5a6[_0x10f704(0x1bd)])?0x1:-0x1);const _0xaec56={};for(const _0x581c46 of _0x3dd768){_0xaec56[_0x55a3f9=_0x581c46['fileName']]||(_0xaec56[_0x55a3f9]=[]),_0xaec56[_0x581c46[_0x10f704(0x1fd)]][_0x10f704(0x1b6)](_0x581c46);}return Object[_0x10f704(0x1d1)](_0xaec56)['reduce']((_0x40aef7,_0x42ea4e)=>[..._0x40aef7,..._0x42ea4e],[]);}async['writeComponents'](_0x2508de){const _0x2f2b06=a103_0x384d0e;_0x2508de=this[_0x2f2b06(0x208)](_0x2508de);let _0x467a36=0x0;while(_0x2508de['length']){const _0x481b43=_0x2508de['splice'](0x0,this['COMPONENTS_PER_TICK']);await this[_0x2f2b06(0x1a9)][_0x2f2b06(0x1bb)](_0x481b43,{'skipChildErrors':this[_0x2f2b06(0x1f9)]['branch'][_0x2f2b06(0x1b8)]==='master'}),_0x467a36+=_0x481b43[_0x2f2b06(0x1d7)],this[_0x2f2b06(0x1f6)]['log'](this['prefix']+_0x2f2b06(0x1d8)+_0x467a36+'/'+this[_0x2f2b06(0x20c)]+_0x2f2b06(0x1f7)),await this[_0x2f2b06(0x1f6)]['send']();}}async[a103_0x384d0e(0x1cd)](_0x21a2c4){const _0x46e544=a103_0x384d0e;_0x21a2c4[_0x46e544(0x20e)](_0x4a816c=>child_types_1[_0x46e544(0x1e0)]['includes'](_0x4a816c[_0x46e544(0x205)])?-0x1:0x1);let _0x4ed65b=0x0;while(_0x21a2c4[_0x46e544(0x1d7)]){const _0x4b99f1=_0x21a2c4['splice'](0x0,this['COMPONENTS_PER_TICK']);await this['mdapiUtils']['removeComponents'](_0x4b99f1),_0x4ed65b+=_0x4b99f1[_0x46e544(0x1d7)],this[_0x46e544(0x1f6)][_0x46e544(0x213)](this[_0x46e544(0x1af)]+_0x46e544(0x1fa)+_0x4ed65b+'/'+this[_0x46e544(0x1e9)]+_0x46e544(0x1f7)),await this[_0x46e544(0x1f6)][_0x46e544(0x1e8)]();}}async[a103_0x384d0e(0x1ba)](){const _0x2cae17=a103_0x384d0e;this[_0x2cae17(0x1be)]&&await this[_0x2cae17(0x1be)][_0x2cae17(0x1f4)]()[_0x2cae17(0x1b4)](()=>void 0x0),this[_0x2cae17(0x1a9)]&&await this[_0x2cae17(0x1a9)]['removeDir']()['catch'](()=>void 0x0),this[_0x2cae17(0x1cc)]&&await this[_0x2cae17(0x1cc)][_0x2cae17(0x1f4)]()['catch'](()=>void 0x0);}async[a103_0x384d0e(0x200)](){const _0x5ba152=a103_0x384d0e,{repo:_0x34bd17,branch:_0x16d75c,components:_0x54be2e,convertToSFDX:_0x56d37f,message:_0x1e5ec2,user:_0x4738f1}=this[_0x5ba152(0x1f9)];this['mdapiUtils']=new mdapi_utils_1[(_0x5ba152(0x202))](),this[_0x5ba152(0x1be)]=new git_utils_1[(_0x5ba152(0x1cb))](await this[_0x5ba152(0x1c4)]()),this[_0x5ba152(0x1cc)]=new sfdx_utils_1[(_0x5ba152(0x1e7))]();let _0x148091=_0x56d37f;try{await this[_0x5ba152(0x1f6)][_0x5ba152(0x213)](this[_0x5ba152(0x1af)]+'\x20Start\x20cloning\x20repository.')['send'](),await this[_0x5ba152(0x1be)][_0x5ba152(0x1c7)](_0x16d75c[_0x5ba152(0x1b8)],_0x34bd17[_0x5ba152(0x1b8)]);!this[_0x5ba152(0x1f9)]['force']?(this[_0x5ba152(0x1f6)]['log'](this[_0x5ba152(0x1af)]+_0x5ba152(0x1db)),await this[_0x5ba152(0x1a9)][_0x5ba152(0x1d2)](this[_0x5ba152(0x1be)][_0x5ba152(0x1c5)])):this[_0x5ba152(0x1f6)][_0x5ba152(0x213)](this['prefix']+_0x5ba152(0x1ca));await this[_0x5ba152(0x1f6)]['log'](this[_0x5ba152(0x1af)]+'\x20Checking\x20written\x20components.')[_0x5ba152(0x1e8)]();_0x54be2e[_0x5ba152(0x215)]&&(this['sfLogger'][_0x5ba152(0x213)](this[_0x5ba152(0x1af)]+'\x20Preparing\x20to\x20write\x20components'),this['componentsToWrite']=_0x54be2e[_0x5ba152(0x215)][_0x5ba152(0x1d7)],await this['writeComponents'](_0x54be2e[_0x5ba152(0x215)]),await this[_0x5ba152(0x1f6)]['send']());await this[_0x5ba152(0x1f6)]['log'](this[_0x5ba152(0x1af)]+'\x20Checking\x20deleted\x20components.')[_0x5ba152(0x1e8)]();_0x54be2e['deleted']&&(this[_0x5ba152(0x1f6)]['log'](this['prefix']+_0x5ba152(0x1f2)),this[_0x5ba152(0x1e9)]=_0x54be2e['deleted'][_0x5ba152(0x1d7)],await this[_0x5ba152(0x1cd)](_0x54be2e[_0x5ba152(0x1f0)]),await this['sfLogger']['send']());await this['sfLogger'][_0x5ba152(0x1e8)]();const _0x363a12=await fs_internal_1['FS'][_0x5ba152(0x1ee)](this[_0x5ba152(0x1be)][_0x5ba152(0x1c5)]);await sfdx_utils_2[_0x5ba152(0x1eb)]['isSFDXProject'](this['gitUtils'][_0x5ba152(0x1c5)])?(_0x148091=!![],await fs_internal_1['FS'][_0x5ba152(0x1f4)]((0x0,path_1[_0x5ba152(0x1ad)])(this[_0x5ba152(0x1be)][_0x5ba152(0x1c5)],_0x5ba152(0x214)))):(_0x148091&&(!_0x363a12&&(_0x148091=![])),await this[_0x5ba152(0x1be)][_0x5ba152(0x1e3)]());_0x148091?(await this[_0x5ba152(0x1f6)][_0x5ba152(0x213)](this[_0x5ba152(0x1af)]+'\x20Start\x20converting\x20to\x20SFDX.')[_0x5ba152(0x1e8)](),await this[_0x5ba152(0x1cc)][_0x5ba152(0x1e5)](this['mdapiUtils']['dir']),await this['sfdxUtils'][_0x5ba152(0x1dd)](this[_0x5ba152(0x1be)][_0x5ba152(0x1c5)],!_0x363a12),await this['sfdxUtils'][_0x5ba152(0x1f4)]()):(await this['sfLogger'][_0x5ba152(0x213)](this['prefix']+_0x5ba152(0x1b3))[_0x5ba152(0x1e8)](),await this[_0x5ba152(0x1a9)][_0x5ba152(0x207)](this['gitUtils'][_0x5ba152(0x1c5)]));await this['sfLogger'][_0x5ba152(0x213)](this[_0x5ba152(0x1af)]+_0x5ba152(0x1d3))[_0x5ba152(0x1e8)](),await this[_0x5ba152(0x1be)][_0x5ba152(0x1cf)](_0x1e5ec2,{'email':constants_1[_0x5ba152(0x1d0)],'name':_0x4738f1[_0x5ba152(0x1b8)]},_0x16d75c[_0x5ba152(0x1b8)]),await this[_0x5ba152(0x1be)][_0x5ba152(0x1f4)](),await this['mdapiUtils'][_0x5ba152(0x1f4)]();const _0x25cee1=this[_0x5ba152(0x20c)]+this[_0x5ba152(0x1e9)];await this['sfLogger'][_0x5ba152(0x213)](this[_0x5ba152(0x1af)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x5ba152(0x1b7)]()-this[_0x5ba152(0x20b)])+'ms.\x20Committed\x20components\x20-\x20'+_0x25cee1+'.')[_0x5ba152(0x1e8)]();}catch(_0x5aa0f3){await this[_0x5ba152(0x1ba)](),await this[_0x5ba152(0x1f6)][_0x5ba152(0x1c6)](this['prefix']+'\x20'+_0x5aa0f3)[_0x5ba152(0x1e8)]();throw _0x5aa0f3;}}async['run'](_0x340271,_0x245a80){const _0x325bec=a103_0x384d0e;var _0x47a0ad,_0x583140;this[_0x325bec(0x1f6)]=typedi_1[_0x325bec(0x1e0)][_0x325bec(0x20d)](providers_tokens_1['Tokens'][_0x325bec(0x1e2)]),this['prefix']=(_0x245a80?_0x245a80+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x325bec(0x1b8)]+']',await this[_0x325bec(0x1f6)][_0x325bec(0x213)](this[_0x325bec(0x1af)]+'\x20Checking\x20commit\x20components.');const _0xa2b4f3=!!((_0x47a0ad=_0x340271[_0x325bec(0x1ef)])===null||_0x47a0ad===void 0x0?void 0x0:_0x47a0ad[_0x325bec(0x215)])||!!((_0x583140=_0x340271[_0x325bec(0x1ef)])===null||_0x583140===void 0x0?void 0x0:_0x583140[_0x325bec(0x1f0)]);if(!_0xa2b4f3){await this[_0x325bec(0x1f6)][_0x325bec(0x213)](this[_0x325bec(0x1af)]+_0x325bec(0x1fe))[_0x325bec(0x1e8)]();return;}this['commitData']=_0x340271,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a103_0x384d0e(0x1e6)])({'transient':!![]})],CommitComponentsJob),exports[a103_0x384d0e(0x1d5)]=CommitComponentsJob;