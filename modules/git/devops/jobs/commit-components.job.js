function a124_0x1f07(_0xd35182,_0x22d4c9){const _0x1b36f2=a124_0x4d82();return a124_0x1f07=function(_0x5083e8,_0x58774b){_0x5083e8=_0x5083e8-0x17f;let _0x4d82a9=_0x1b36f2[_0x5083e8];return _0x4d82a9;},a124_0x1f07(_0xd35182,_0x22d4c9);}const a124_0x11146e=a124_0x1f07;(function(_0x480795,_0x4d6288){const _0x32d4a7=a124_0x1f07,_0x489a6b=_0x480795();while(!![]){try{const _0x2b4b66=-parseInt(_0x32d4a7(0x1f0))/0x1*(-parseInt(_0x32d4a7(0x1c5))/0x2)+parseInt(_0x32d4a7(0x1f4))/0x3+-parseInt(_0x32d4a7(0x190))/0x4*(parseInt(_0x32d4a7(0x183))/0x5)+parseInt(_0x32d4a7(0x1ca))/0x6+parseInt(_0x32d4a7(0x1a3))/0x7*(parseInt(_0x32d4a7(0x1ec))/0x8)+parseInt(_0x32d4a7(0x19a))/0x9*(parseInt(_0x32d4a7(0x1a5))/0xa)+parseInt(_0x32d4a7(0x1cc))/0xb*(-parseInt(_0x32d4a7(0x1a6))/0xc);if(_0x2b4b66===_0x4d6288)break;else _0x489a6b['push'](_0x489a6b['shift']());}catch(_0x48d793){_0x489a6b['push'](_0x489a6b['shift']());}}}(a124_0x4d82,0xd431f));const a124_0x58774b=(function(){let _0x548383=!![];return function(_0x4ba3f7,_0x47092c){const _0x3d1495=_0x548383?function(){const _0xfe6ca7=a124_0x1f07;if(_0x47092c){const _0x2b04b1=_0x47092c[_0xfe6ca7(0x1c4)](_0x4ba3f7,arguments);return _0x47092c=null,_0x2b04b1;}}:function(){};return _0x548383=![],_0x3d1495;};}()),a124_0x5083e8=a124_0x58774b(this,function(){const _0x16dd80=a124_0x1f07;return a124_0x5083e8[_0x16dd80(0x1c7)]()[_0x16dd80(0x187)](_0x16dd80(0x19d))[_0x16dd80(0x1c7)]()[_0x16dd80(0x1bf)](a124_0x5083e8)[_0x16dd80(0x187)]('(((.+)+)+)+$');});function a124_0x4d82(){const _0x3d421c=['gitUrl','MDApiUtils','get','constructor','includes','://','\x20Deleted\x20','../../../../constants','apply','1266HXxqzG','__esModule','toString','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','componentsToDelete','8257476udYerw','COMPONENTS_PER_TICK','11EjzNMp','__decorate','isSFDXProject','createProjectFrom','removeDir','__setModuleDefault','CommitComponentsJob','object','function','catch','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','../../salesforce/utils/sfdx.utils','send','prefix','SFDX','name','isLoggedIn','\x20Start\x20cloning\x20repository.','run','commitData','cleanUp','fileName','getRemote','splice','events','copyMdapiTo','../../providers/providers.tokens','provider','__importDefault','prepareMdapi','credentials','groupComponentsByFileName','7985400ZFNRAg','\x20Checking\x20commit\x20components.','exec','isEmptyDir','527MqWeDK','writable','path','\x20Prepare\x20mdapi\x20files.','4208499ZVwOVF','decorate','../utils/git.utils','type','componentsToWrite','reduce','isConvertToSfdx','DEFAULT_GIT_USER_EMAIL','2918865TjcHrl','copyProjectTo','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','../../parsers/data/child-types','search','FORCE_APP_DEFAULT_DIR','\x20Preparing\x20to\x20delete\x20components','ms.\x20Committed\x20components\x20-\x20','__importStar','../../providers/api/bitbucket-api.service','mdapiUtils','\x20Checking\x20deleted\x20components.','branch','4HlihKu','components','gitUtils','now','../../internal/fs.internal','writeFlosumComponents','getOwnPropertyDescriptor','create','typedi','deleted','48159AiAYBH','recordType','default','(((.+)+)+)+$','copySFDXIgnoredComponents','fileType','../dto/commit-components.dto','Tokens','sfLogger','7snfgLg','length','340uyHMDk','34078260HJahCj','sfdxUtils','getGitShellAuthorizationString','sort','startTime','join','\x20Preparing\x20to\x20write\x20components','../../providers/types/git-provider','writed','force','BitbucketApiService','configurable','master','\x20Wrote\x20','defineProperty','clone','log','dir','values','removeComponents','writeComponents','\x20components'];a124_0x4d82=function(){return _0x3d421c;};return a124_0x4d82();}a124_0x5083e8();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a124_0x11146e(0x197)]?function(_0x428134,_0x3b989c,_0x55ca94,_0x3c8d01){const _0x57f8b8=a124_0x11146e;if(_0x3c8d01===undefined)_0x3c8d01=_0x55ca94;var _0x2fc9a2=Object[_0x57f8b8(0x196)](_0x3b989c,_0x55ca94);(!_0x2fc9a2||(_0x57f8b8(0x1be)in _0x2fc9a2?!_0x3b989c[_0x57f8b8(0x1c6)]:_0x2fc9a2[_0x57f8b8(0x1f1)]||_0x2fc9a2[_0x57f8b8(0x1b1)]))&&(_0x2fc9a2={'enumerable':!![],'get':function(){return _0x3b989c[_0x55ca94];}}),Object[_0x57f8b8(0x1b4)](_0x428134,_0x3c8d01,_0x2fc9a2);}:function(_0x5d118a,_0x44ae3f,_0x11cee5,_0x5f0efb){if(_0x5f0efb===undefined)_0x5f0efb=_0x11cee5;_0x5d118a[_0x5f0efb]=_0x44ae3f[_0x11cee5];}),__setModuleDefault=this&&this[a124_0x11146e(0x1d1)]||(Object['create']?function(_0x250585,_0x25e951){const _0x3ef2f8=a124_0x11146e;Object[_0x3ef2f8(0x1b4)](_0x250585,_0x3ef2f8(0x19c),{'enumerable':!![],'value':_0x25e951});}:function(_0x56a950,_0x15f128){const _0x4a427a=a124_0x11146e;_0x56a950[_0x4a427a(0x19c)]=_0x15f128;}),__decorate=this&&this[a124_0x11146e(0x1cd)]||function(_0x44d1e2,_0x52649e,_0x473cea,_0x555879){const _0xd337d4=a124_0x11146e;var _0x1b0a55=arguments[_0xd337d4(0x1a4)],_0x203909=_0x1b0a55<0x3?_0x52649e:_0x555879===null?_0x555879=Object[_0xd337d4(0x196)](_0x52649e,_0x473cea):_0x555879,_0xdd065f;if(typeof Reflect===_0xd337d4(0x1d3)&&typeof Reflect[_0xd337d4(0x1f5)]===_0xd337d4(0x1d4))_0x203909=Reflect['decorate'](_0x44d1e2,_0x52649e,_0x473cea,_0x555879);else{for(var _0x1320fb=_0x44d1e2[_0xd337d4(0x1a4)]-0x1;_0x1320fb>=0x0;_0x1320fb--)if(_0xdd065f=_0x44d1e2[_0x1320fb])_0x203909=(_0x1b0a55<0x3?_0xdd065f(_0x203909):_0x1b0a55>0x3?_0xdd065f(_0x52649e,_0x473cea,_0x203909):_0xdd065f(_0x52649e,_0x473cea))||_0x203909;}return _0x1b0a55>0x3&&_0x203909&&Object[_0xd337d4(0x1b4)](_0x52649e,_0x473cea,_0x203909),_0x203909;},__importStar=this&&this[a124_0x11146e(0x18b)]||function(_0x1b9225){const _0x33ba05=a124_0x11146e;if(_0x1b9225&&_0x1b9225[_0x33ba05(0x1c6)])return _0x1b9225;var _0x5f4c6f={};if(_0x1b9225!=null){for(var _0x5d8347 in _0x1b9225)if(_0x5d8347!==_0x33ba05(0x19c)&&Object['prototype']['hasOwnProperty']['call'](_0x1b9225,_0x5d8347))__createBinding(_0x5f4c6f,_0x1b9225,_0x5d8347);}return __setModuleDefault(_0x5f4c6f,_0x1b9225),_0x5f4c6f;},__importDefault=this&&this[a124_0x11146e(0x1e8)]||function(_0x21fb7b){const _0x297d72=a124_0x11146e;return _0x21fb7b&&_0x21fb7b[_0x297d72(0x1c6)]?_0x21fb7b:{'default':_0x21fb7b};};Object[a124_0x11146e(0x1b4)](exports,a124_0x11146e(0x1c6),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const commit_components_dto_1=require(a124_0x11146e(0x1a0)),events_1=__importDefault(require(a124_0x11146e(0x1e4))),git_utils_1=require(a124_0x11146e(0x1f6)),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require(a124_0x11146e(0x198))),child_types_1=__importDefault(require(a124_0x11146e(0x186))),utils_1=require('../../../shared/utils'),constants_1=require(a124_0x11146e(0x1c3)),git_provider_1=require(a124_0x11146e(0x1ad)),bitbucket_api_service_1=require(a124_0x11146e(0x18c)),sfdx_utils_2=require(a124_0x11146e(0x1d7)),fs_internal_1=require(a124_0x11146e(0x194)),path_1=require(a124_0x11146e(0x1f2)),providers_tokens_1=require(a124_0x11146e(0x1e6)),constants_2=require('../../../../constants');let CommitComponentsJob=class CommitComponentsJob extends events_1[a124_0x11146e(0x19c)]{constructor(){const _0x4d647d=a124_0x11146e;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this[_0x4d647d(0x17f)]=0x0,this[_0x4d647d(0x1c9)]=0x0,this[_0x4d647d(0x1aa)]=Date['now']();}async['getRemote'](){const _0x1d5e7f=a124_0x11146e,{repo:_0x55c305}=this[_0x1d5e7f(0x1df)],_0x38c9a3=typedi_1['default']['get'](providers_tokens_1[_0x1d5e7f(0x1a1)][_0x1d5e7f(0x1ea)]);if(this['commitData'][_0x1d5e7f(0x1e7)]===git_provider_1['GitProvider']['Bitbucket']){const _0xbae677=typedi_1[_0x1d5e7f(0x19c)][_0x1d5e7f(0x1be)](bitbucket_api_service_1[_0x1d5e7f(0x1b0)]);await _0xbae677[_0x1d5e7f(0x1dc)]();}return _0x55c305['gitUrl']['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x55c305[_0x1d5e7f(0x1bc)])+_0x1d5e7f(0x1c1)+_0x38c9a3[_0x1d5e7f(0x1a8)]()+'@');}[a124_0x11146e(0x1eb)](_0x62ec8a){const _0x3a54c7=a124_0x11146e;var _0x324baf;_0x62ec8a['sort'](_0x305576=>child_types_1[_0x3a54c7(0x19c)][_0x3a54c7(0x1c0)](_0x305576[_0x3a54c7(0x19f)])?0x1:-0x1);const _0x18ef2b={};for(const _0x3e65b6 of _0x62ec8a){_0x18ef2b[_0x324baf=_0x3e65b6[_0x3a54c7(0x1e1)]]||(_0x18ef2b[_0x324baf]=[]),_0x18ef2b[_0x3e65b6['fileName']]['push'](_0x3e65b6);}return Object[_0x3a54c7(0x1b8)](_0x18ef2b)[_0x3a54c7(0x180)]((_0x35a4c7,_0x2495b3)=>[..._0x35a4c7,..._0x2495b3],[]);}async[a124_0x11146e(0x1ba)](_0x6dcd01){const _0x4c3e77=a124_0x11146e;_0x6dcd01=this['groupComponentsByFileName'](_0x6dcd01);let _0x64c6c9=0x0;while(_0x6dcd01[_0x4c3e77(0x1a4)]){const _0x761f5f=_0x6dcd01[_0x4c3e77(0x1e3)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x4c3e77(0x18d)][_0x4c3e77(0x195)](_0x761f5f,{'skipChildErrors':this['commitData'][_0x4c3e77(0x18f)][_0x4c3e77(0x1db)]===_0x4c3e77(0x1b2),'recordType':this[_0x4c3e77(0x1df)][_0x4c3e77(0x19b)]}),_0x64c6c9+=_0x761f5f['length'],this[_0x4c3e77(0x1a2)][_0x4c3e77(0x1b6)](this[_0x4c3e77(0x1d9)]+_0x4c3e77(0x1b3)+_0x64c6c9+'/'+this[_0x4c3e77(0x17f)]+_0x4c3e77(0x1bb)),await this[_0x4c3e77(0x1a2)][_0x4c3e77(0x1d8)]();}}async[a124_0x11146e(0x1b9)](_0x37e76a){const _0x2eac72=a124_0x11146e;_0x37e76a[_0x2eac72(0x1a9)](_0x5b44db=>child_types_1[_0x2eac72(0x19c)][_0x2eac72(0x1c0)](_0x5b44db[_0x2eac72(0x1f7)])?-0x1:0x1);let _0x5d2f4e=0x0;while(_0x37e76a[_0x2eac72(0x1a4)]){const _0x1a76d0=_0x37e76a[_0x2eac72(0x1e3)](0x0,this[_0x2eac72(0x1cb)]);await this[_0x2eac72(0x18d)][_0x2eac72(0x1b9)](_0x1a76d0,this[_0x2eac72(0x1df)]['recordType']),_0x5d2f4e+=_0x1a76d0[_0x2eac72(0x1a4)],this['sfLogger'][_0x2eac72(0x1b6)](this[_0x2eac72(0x1d9)]+_0x2eac72(0x1c2)+_0x5d2f4e+'/'+this['componentsToDelete']+_0x2eac72(0x1bb)),await this[_0x2eac72(0x1a2)][_0x2eac72(0x1d8)]();}}async[a124_0x11146e(0x1e0)](){const _0x212bcc=a124_0x11146e;this['gitUtils']&&await this[_0x212bcc(0x192)]['removeDir']()[_0x212bcc(0x1d5)](()=>void 0x0),this[_0x212bcc(0x18d)]&&await this[_0x212bcc(0x18d)]['removeDir']()[_0x212bcc(0x1d5)](()=>void 0x0),this[_0x212bcc(0x1a7)]&&await this['sfdxUtils'][_0x212bcc(0x1d0)]()[_0x212bcc(0x1d5)](()=>void 0x0);}async[a124_0x11146e(0x1ee)](){const _0x57a9a5=a124_0x11146e,{repo:_0x4ed930,branch:_0x4a1209,components:_0x5af1e1,convertToSFDX:_0x561096,message:_0x28efb9,user:_0x2b7893}=this[_0x57a9a5(0x1df)];this[_0x57a9a5(0x18d)]=new mdapi_utils_1[(_0x57a9a5(0x1bd))](),this[_0x57a9a5(0x192)]=new git_utils_1['GitUtils'](await this[_0x57a9a5(0x1e2)]()),this[_0x57a9a5(0x1a7)]=new sfdx_utils_1['SFDXUtils']();let _0x3a4a90=_0x561096&&this['sfdxUtils'][_0x57a9a5(0x181)](this[_0x57a9a5(0x1df)][_0x57a9a5(0x19b)]);try{await this[_0x57a9a5(0x1a2)][_0x57a9a5(0x1b6)](this[_0x57a9a5(0x1d9)]+_0x57a9a5(0x1dd))[_0x57a9a5(0x1d8)](),await this[_0x57a9a5(0x192)][_0x57a9a5(0x1b5)](_0x4a1209[_0x57a9a5(0x1db)],_0x4ed930['name']);!this['commitData'][_0x57a9a5(0x1af)]?(this['sfLogger']['log'](this[_0x57a9a5(0x1d9)]+_0x57a9a5(0x1f3)),await this[_0x57a9a5(0x18d)][_0x57a9a5(0x1e9)](this['gitUtils'][_0x57a9a5(0x1b7)])):this[_0x57a9a5(0x1a2)][_0x57a9a5(0x1b6)](this[_0x57a9a5(0x1d9)]+_0x57a9a5(0x1c8));await this[_0x57a9a5(0x1a2)][_0x57a9a5(0x1b6)](this['prefix']+'\x20Checking\x20written\x20components.')['send']();_0x5af1e1['writed']&&(this[_0x57a9a5(0x1a2)]['log'](this[_0x57a9a5(0x1d9)]+_0x57a9a5(0x1ac)),this['componentsToWrite']=_0x5af1e1[_0x57a9a5(0x1ae)]['length'],await this['writeComponents'](_0x5af1e1[_0x57a9a5(0x1ae)]),await this[_0x57a9a5(0x1a2)][_0x57a9a5(0x1d8)]());await this['sfLogger']['log'](this[_0x57a9a5(0x1d9)]+_0x57a9a5(0x18e))[_0x57a9a5(0x1d8)]();_0x5af1e1[_0x57a9a5(0x199)]&&(this[_0x57a9a5(0x1a2)][_0x57a9a5(0x1b6)](this[_0x57a9a5(0x1d9)]+_0x57a9a5(0x189)),this[_0x57a9a5(0x1c9)]=_0x5af1e1[_0x57a9a5(0x199)][_0x57a9a5(0x1a4)],await this[_0x57a9a5(0x1b9)](_0x5af1e1['deleted']),await this[_0x57a9a5(0x1a2)][_0x57a9a5(0x1d8)]());await this['sfLogger'][_0x57a9a5(0x1d8)]();const _0x33d9ed=await fs_internal_1['FS'][_0x57a9a5(0x1ef)](this[_0x57a9a5(0x192)][_0x57a9a5(0x1b7)]);await sfdx_utils_2[_0x57a9a5(0x1da)][_0x57a9a5(0x1ce)](this[_0x57a9a5(0x192)]['dir'])?(_0x3a4a90=!![],await fs_internal_1['FS']['removeDir']((0x0,path_1[_0x57a9a5(0x1ab)])(this[_0x57a9a5(0x192)][_0x57a9a5(0x1b7)],'force-app'))):(_0x3a4a90&&(!_0x33d9ed&&(_0x3a4a90=![])),await this['gitUtils']['clearDir']());_0x3a4a90?(await this[_0x57a9a5(0x1a2)][_0x57a9a5(0x1b6)](this['prefix']+'\x20Start\x20converting\x20to\x20SFDX.')['send'](),await this['sfdxUtils'][_0x57a9a5(0x1cf)](this[_0x57a9a5(0x18d)][_0x57a9a5(0x1b7)]),await this['sfdxUtils'][_0x57a9a5(0x184)](this[_0x57a9a5(0x192)][_0x57a9a5(0x1b7)],!_0x33d9ed),await this['sfdxUtils'][_0x57a9a5(0x19e)](this['mdapiUtils']['dir'],(0x0,path_1[_0x57a9a5(0x1ab)])(this[_0x57a9a5(0x192)]['dir'],constants_2[_0x57a9a5(0x188)])),await this[_0x57a9a5(0x1a7)][_0x57a9a5(0x1d0)]()):(await this[_0x57a9a5(0x1a2)][_0x57a9a5(0x1b6)](this[_0x57a9a5(0x1d9)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x57a9a5(0x1d8)](),await this[_0x57a9a5(0x18d)][_0x57a9a5(0x1e5)](this[_0x57a9a5(0x192)][_0x57a9a5(0x1b7)]));await this[_0x57a9a5(0x1a2)]['log'](this[_0x57a9a5(0x1d9)]+_0x57a9a5(0x1d6))[_0x57a9a5(0x1d8)](),await this[_0x57a9a5(0x192)]['commitAndPush'](_0x28efb9,{'email':constants_1[_0x57a9a5(0x182)],'name':_0x2b7893[_0x57a9a5(0x1db)]},_0x4a1209[_0x57a9a5(0x1db)]),await this[_0x57a9a5(0x192)]['removeDir'](),await this[_0x57a9a5(0x18d)][_0x57a9a5(0x1d0)]();const _0x27f347=this[_0x57a9a5(0x17f)]+this[_0x57a9a5(0x1c9)];await this[_0x57a9a5(0x1a2)][_0x57a9a5(0x1b6)](this[_0x57a9a5(0x1d9)]+_0x57a9a5(0x185)+(Date[_0x57a9a5(0x193)]()-this['startTime'])+_0x57a9a5(0x18a)+_0x27f347+'.')[_0x57a9a5(0x1d8)]();}catch(_0x107e69){await this[_0x57a9a5(0x1e0)](),await this[_0x57a9a5(0x1a2)]['error'](this[_0x57a9a5(0x1d9)]+'\x20'+_0x107e69)[_0x57a9a5(0x1d8)]();throw _0x107e69;}}async[a124_0x11146e(0x1de)](_0x273d6a,_0x2bc286){const _0x3bdfa0=a124_0x11146e;var _0x56caea,_0x574ca5;this[_0x3bdfa0(0x1a2)]=typedi_1[_0x3bdfa0(0x19c)][_0x3bdfa0(0x1be)](providers_tokens_1[_0x3bdfa0(0x1a1)]['logger']),this[_0x3bdfa0(0x1d9)]=(_0x2bc286?_0x2bc286+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x3bdfa0(0x1db)]+']',await this[_0x3bdfa0(0x1a2)][_0x3bdfa0(0x1b6)](this[_0x3bdfa0(0x1d9)]+_0x3bdfa0(0x1ed));const _0x2515f2=!!((_0x56caea=_0x273d6a[_0x3bdfa0(0x191)])===null||_0x56caea===void 0x0?void 0x0:_0x56caea[_0x3bdfa0(0x1ae)])||!!((_0x574ca5=_0x273d6a['components'])===null||_0x574ca5===void 0x0?void 0x0:_0x574ca5[_0x3bdfa0(0x199)]);if(!_0x2515f2){await this[_0x3bdfa0(0x1a2)]['log'](this['prefix']+'\x20Nothing\x20to\x20commit.\x20Skip.')[_0x3bdfa0(0x1d8)]();return;}this[_0x3bdfa0(0x1df)]=_0x273d6a,await this[_0x3bdfa0(0x1ee)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]})],CommitComponentsJob),exports[a124_0x11146e(0x1d2)]=CommitComponentsJob;