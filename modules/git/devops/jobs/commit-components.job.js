const a103_0x46388=a103_0x51c1;(function(_0x83d5e0,_0x2a602e){const _0x2e51e2=a103_0x51c1,_0x5529db=_0x83d5e0();while(!![]){try{const _0x3d5676=parseInt(_0x2e51e2(0x157))/0x1*(-parseInt(_0x2e51e2(0x149))/0x2)+-parseInt(_0x2e51e2(0xff))/0x3*(-parseInt(_0x2e51e2(0x15a))/0x4)+parseInt(_0x2e51e2(0x104))/0x5*(-parseInt(_0x2e51e2(0xf4))/0x6)+parseInt(_0x2e51e2(0x150))/0x7*(-parseInt(_0x2e51e2(0x10d))/0x8)+parseInt(_0x2e51e2(0x142))/0x9*(parseInt(_0x2e51e2(0x125))/0xa)+-parseInt(_0x2e51e2(0x119))/0xb+-parseInt(_0x2e51e2(0xfe))/0xc*(-parseInt(_0x2e51e2(0xea))/0xd);if(_0x3d5676===_0x2a602e)break;else _0x5529db['push'](_0x5529db['shift']());}catch(_0x45c6c4){_0x5529db['push'](_0x5529db['shift']());}}}(a103_0x48f7,0xe77aa));const a103_0x20dc1f=(function(){let _0x450dca=!![];return function(_0x3c0569,_0x18201f){const _0x3606ac=_0x450dca?function(){const _0x3a0805=a103_0x51c1;if(_0x18201f){const _0x176aa4=_0x18201f[_0x3a0805(0x102)](_0x3c0569,arguments);return _0x18201f=null,_0x176aa4;}}:function(){};return _0x450dca=![],_0x3606ac;};}()),a103_0x1690ff=a103_0x20dc1f(this,function(){const _0x4583b7=a103_0x51c1;return a103_0x1690ff['toString']()[_0x4583b7(0x132)](_0x4583b7(0x148))['toString']()[_0x4583b7(0x146)](a103_0x1690ff)[_0x4583b7(0x132)](_0x4583b7(0x148));});a103_0x1690ff();'use strict';var __createBinding=this&&this[a103_0x46388(0x122)]||(Object['create']?function(_0x31a23e,_0x8630e9,_0x339aff,_0x4ecf7a){const _0x30bf74=a103_0x46388;if(_0x4ecf7a===undefined)_0x4ecf7a=_0x339aff;var _0x2c5d96=Object[_0x30bf74(0xee)](_0x8630e9,_0x339aff);(!_0x2c5d96||('get'in _0x2c5d96?!_0x8630e9[_0x30bf74(0x139)]:_0x2c5d96[_0x30bf74(0x147)]||_0x2c5d96['configurable']))&&(_0x2c5d96={'enumerable':!![],'get':function(){return _0x8630e9[_0x339aff];}}),Object[_0x30bf74(0x121)](_0x31a23e,_0x4ecf7a,_0x2c5d96);}:function(_0x1f6050,_0x5d77fe,_0x47c676,_0x4f3034){if(_0x4f3034===undefined)_0x4f3034=_0x47c676;_0x1f6050[_0x4f3034]=_0x5d77fe[_0x47c676];}),__setModuleDefault=this&&this[a103_0x46388(0xef)]||(Object[a103_0x46388(0xeb)]?function(_0x4155c1,_0x4c0dd4){const _0x4ef88b=a103_0x46388;Object[_0x4ef88b(0x121)](_0x4155c1,_0x4ef88b(0x127),{'enumerable':!![],'value':_0x4c0dd4});}:function(_0x221f6c,_0x5651c4){const _0xc7d45c=a103_0x46388;_0x221f6c[_0xc7d45c(0x127)]=_0x5651c4;}),__decorate=this&&this['__decorate']||function(_0x37dc4a,_0x4bea20,_0x17aa93,_0x3fabf4){const _0xe58ad6=a103_0x46388;var _0x693a0e=arguments[_0xe58ad6(0x13a)],_0x399609=_0x693a0e<0x3?_0x4bea20:_0x3fabf4===null?_0x3fabf4=Object[_0xe58ad6(0xee)](_0x4bea20,_0x17aa93):_0x3fabf4,_0x16cd2e;if(typeof Reflect===_0xe58ad6(0x14b)&&typeof Reflect[_0xe58ad6(0x103)]===_0xe58ad6(0x153))_0x399609=Reflect[_0xe58ad6(0x103)](_0x37dc4a,_0x4bea20,_0x17aa93,_0x3fabf4);else{for(var _0x1a33d4=_0x37dc4a[_0xe58ad6(0x13a)]-0x1;_0x1a33d4>=0x0;_0x1a33d4--)if(_0x16cd2e=_0x37dc4a[_0x1a33d4])_0x399609=(_0x693a0e<0x3?_0x16cd2e(_0x399609):_0x693a0e>0x3?_0x16cd2e(_0x4bea20,_0x17aa93,_0x399609):_0x16cd2e(_0x4bea20,_0x17aa93))||_0x399609;}return _0x693a0e>0x3&&_0x399609&&Object['defineProperty'](_0x4bea20,_0x17aa93,_0x399609),_0x399609;},__importStar=this&&this['__importStar']||function(_0x26af23){const _0x173bef=a103_0x46388;if(_0x26af23&&_0x26af23[_0x173bef(0x139)])return _0x26af23;var _0x2d1c78={};if(_0x26af23!=null){for(var _0x49e2a3 in _0x26af23)if(_0x49e2a3!==_0x173bef(0x127)&&Object[_0x173bef(0xfc)][_0x173bef(0x10b)]['call'](_0x26af23,_0x49e2a3))__createBinding(_0x2d1c78,_0x26af23,_0x49e2a3);}return __setModuleDefault(_0x2d1c78,_0x26af23),_0x2d1c78;},__importDefault=this&&this[a103_0x46388(0x163)]||function(_0x11f901){return _0x11f901&&_0x11f901['__esModule']?_0x11f901:{'default':_0x11f901};};Object[a103_0x46388(0x121)](exports,a103_0x46388(0x139),{'value':!![]}),exports[a103_0x46388(0x160)]=void 0x0;function a103_0x51c1(_0x2f11a4,_0x109aca){const _0x152508=a103_0x48f7();return a103_0x51c1=function(_0x1690ff,_0x20dc1f){_0x1690ff=_0x1690ff-0xe9;let _0x48f7f3=_0x152508[_0x1690ff];return _0x48f7f3;},a103_0x51c1(_0x2f11a4,_0x109aca);}const commit_components_dto_1=require(a103_0x46388(0x137)),events_1=__importDefault(require(a103_0x46388(0x11d))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a103_0x46388(0x164)),sfdx_utils_1=require(a103_0x46388(0x10a)),typedi_1=__importStar(require(a103_0x46388(0x134))),child_types_1=__importDefault(require(a103_0x46388(0x138))),utils_1=require('../../../shared/utils'),constants_1=require(a103_0x46388(0x10f)),git_provider_1=require(a103_0x46388(0x11b)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),sfdx_utils_2=require(a103_0x46388(0x154)),fs_internal_1=require(a103_0x46388(0xf0)),path_1=require(a103_0x46388(0xf6)),providers_tokens_1=require(a103_0x46388(0x143));let CommitComponentsJob=class CommitComponentsJob extends events_1[a103_0x46388(0x127)]{constructor(){const _0x578628=a103_0x46388;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this['componentsToWrite']=0x0,this[_0x578628(0x111)]=0x0,this['startTime']=Date[_0x578628(0x158)]();}async[a103_0x46388(0x12d)](){const _0x10806f=a103_0x46388,{repo:_0x1793df}=this[_0x10806f(0x144)],_0x7ce952=typedi_1[_0x10806f(0x127)]['get'](providers_tokens_1['Tokens'][_0x10806f(0x12f)]);if(this[_0x10806f(0x144)][_0x10806f(0x10c)]===git_provider_1[_0x10806f(0x136)][_0x10806f(0x109)]){const _0x246273=typedi_1[_0x10806f(0x127)][_0x10806f(0x15c)](bitbucket_api_service_1['BitbucketApiService']);await _0x246273[_0x10806f(0xfa)]();}return _0x1793df['gitUrl'][_0x10806f(0x106)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x10806f(0x10e)])(_0x1793df[_0x10806f(0xf5)])+_0x10806f(0x12c)+_0x7ce952[_0x10806f(0x11e)]()+'@');}[a103_0x46388(0x12e)](_0x13509e){const _0x51bd3e=a103_0x46388;var _0x227fb3;_0x13509e[_0x51bd3e(0x13e)](_0x21768f=>child_types_1['default'][_0x51bd3e(0x100)](_0x21768f[_0x51bd3e(0x114)])?0x1:-0x1);const _0x4d6ee8={};for(const _0x1da873 of _0x13509e){_0x4d6ee8[_0x227fb3=_0x1da873[_0x51bd3e(0x107)]]||(_0x4d6ee8[_0x227fb3]=[]),_0x4d6ee8[_0x1da873[_0x51bd3e(0x107)]][_0x51bd3e(0x14f)](_0x1da873);}return Object['values'](_0x4d6ee8)[_0x51bd3e(0x117)]((_0x1aebd3,_0x39d376)=>[..._0x1aebd3,..._0x39d376],[]);}async[a103_0x46388(0x12a)](_0x4ac4f4){const _0x3eb09f=a103_0x46388;_0x4ac4f4=this[_0x3eb09f(0x12e)](_0x4ac4f4);let _0x350020=0x0;while(_0x4ac4f4[_0x3eb09f(0x13a)]){const _0x48ec71=_0x4ac4f4[_0x3eb09f(0x135)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x3eb09f(0x145)][_0x3eb09f(0x101)](_0x48ec71,{'skipChildErrors':this[_0x3eb09f(0x144)][_0x3eb09f(0xfd)][_0x3eb09f(0x14c)]===_0x3eb09f(0x15e)}),_0x350020+=_0x48ec71[_0x3eb09f(0x13a)],this[_0x3eb09f(0x133)][_0x3eb09f(0x113)](this[_0x3eb09f(0x11c)]+'\x20Wrote\x20'+_0x350020+'/'+this[_0x3eb09f(0x13b)]+_0x3eb09f(0x115)),await this['sfLogger']['send']();}}async[a103_0x46388(0x129)](_0x3b6887){const _0x3cf8e8=a103_0x46388;_0x3b6887[_0x3cf8e8(0x13e)](_0x44fc3e=>child_types_1['default'][_0x3cf8e8(0x100)](_0x44fc3e['type'])?-0x1:0x1);let _0x93b0dd=0x0;while(_0x3b6887[_0x3cf8e8(0x13a)]){const _0x2fa0e8=_0x3b6887['splice'](0x0,this[_0x3cf8e8(0x120)]);await this[_0x3cf8e8(0x145)][_0x3cf8e8(0x129)](_0x2fa0e8),_0x93b0dd+=_0x2fa0e8['length'],this[_0x3cf8e8(0x133)][_0x3cf8e8(0x113)](this[_0x3cf8e8(0x11c)]+_0x3cf8e8(0x110)+_0x93b0dd+'/'+this[_0x3cf8e8(0x111)]+'\x20components'),await this[_0x3cf8e8(0x133)][_0x3cf8e8(0x131)]();}}async[a103_0x46388(0xf9)](){const _0x21aad9=a103_0x46388;this[_0x21aad9(0xe9)]&&await this[_0x21aad9(0xe9)]['removeDir']()[_0x21aad9(0x165)](()=>void 0x0),this[_0x21aad9(0x145)]&&await this[_0x21aad9(0x145)]['removeDir']()[_0x21aad9(0x165)](()=>void 0x0),this[_0x21aad9(0xf7)]&&await this[_0x21aad9(0xf7)]['removeDir']()['catch'](()=>void 0x0);}async[a103_0x46388(0x15d)](){const _0x10d673=a103_0x46388,{repo:_0x6cbc01,branch:_0x29ab18,components:_0x1957c,convertToSFDX:_0x4e550e,message:_0x48263d,user:_0x51a8d1}=this[_0x10d673(0x144)];this[_0x10d673(0x145)]=new mdapi_utils_1[(_0x10d673(0x118))](),this[_0x10d673(0xe9)]=new git_utils_1[(_0x10d673(0x140))](await this[_0x10d673(0x12d)]()),this['sfdxUtils']=new sfdx_utils_1[(_0x10d673(0x108))]();let _0x7950c0=_0x4e550e;try{await this['sfLogger']['log'](this['prefix']+'\x20Start\x20cloning\x20repository.')[_0x10d673(0x131)](),await this[_0x10d673(0xe9)][_0x10d673(0x124)](_0x29ab18[_0x10d673(0x14c)],_0x6cbc01[_0x10d673(0x14c)]);!this['commitData'][_0x10d673(0x14d)]?(this['sfLogger'][_0x10d673(0x113)](this[_0x10d673(0x11c)]+_0x10d673(0x14a)),await this[_0x10d673(0x145)][_0x10d673(0x156)](this['gitUtils']['dir'])):this['sfLogger'][_0x10d673(0x113)](this['prefix']+_0x10d673(0x128));await this['sfLogger'][_0x10d673(0x113)](this['prefix']+_0x10d673(0x13f))['send']();_0x1957c[_0x10d673(0xed)]&&(this[_0x10d673(0x133)][_0x10d673(0x113)](this[_0x10d673(0x11c)]+_0x10d673(0x105)),this[_0x10d673(0x13b)]=_0x1957c[_0x10d673(0xed)][_0x10d673(0x13a)],await this[_0x10d673(0x12a)](_0x1957c[_0x10d673(0xed)]),await this['sfLogger'][_0x10d673(0x131)]());await this[_0x10d673(0x133)][_0x10d673(0x113)](this[_0x10d673(0x11c)]+'\x20Checking\x20deleted\x20components.')[_0x10d673(0x131)]();_0x1957c[_0x10d673(0x152)]&&(this['sfLogger'][_0x10d673(0x113)](this[_0x10d673(0x11c)]+'\x20Preparing\x20to\x20delete\x20components'),this['componentsToDelete']=_0x1957c[_0x10d673(0x152)][_0x10d673(0x13a)],await this[_0x10d673(0x129)](_0x1957c[_0x10d673(0x152)]),await this[_0x10d673(0x133)][_0x10d673(0x131)]());await this[_0x10d673(0x133)][_0x10d673(0x131)]();const _0xa329f=await fs_internal_1['FS'][_0x10d673(0xec)](this['gitUtils'][_0x10d673(0x159)]);await sfdx_utils_2[_0x10d673(0x162)][_0x10d673(0xf1)](this[_0x10d673(0xe9)]['dir'])?(_0x7950c0=!![],await fs_internal_1['FS'][_0x10d673(0x151)]((0x0,path_1[_0x10d673(0xf3)])(this[_0x10d673(0xe9)]['dir'],_0x10d673(0x112)))):(_0x7950c0&&(!_0xa329f&&(_0x7950c0=![])),await this['gitUtils'][_0x10d673(0x12b)]());_0x7950c0?(await this['sfLogger'][_0x10d673(0x113)](this[_0x10d673(0x11c)]+_0x10d673(0x155))[_0x10d673(0x131)](),await this[_0x10d673(0xf7)][_0x10d673(0x13d)](this['mdapiUtils'][_0x10d673(0x159)]),await this[_0x10d673(0xf7)][_0x10d673(0xfb)](this[_0x10d673(0xe9)]['dir'],!_0xa329f),await this[_0x10d673(0xf7)]['removeDir']()):(await this[_0x10d673(0x133)][_0x10d673(0x113)](this[_0x10d673(0x11c)]+_0x10d673(0x126))[_0x10d673(0x131)](),await this['mdapiUtils'][_0x10d673(0x116)](this[_0x10d673(0xe9)][_0x10d673(0x159)]));await this[_0x10d673(0x133)][_0x10d673(0x113)](this[_0x10d673(0x11c)]+_0x10d673(0x13c))[_0x10d673(0x131)](),await this['gitUtils'][_0x10d673(0x11a)](_0x48263d,{'email':constants_1[_0x10d673(0x123)],'name':_0x51a8d1['name']},_0x29ab18[_0x10d673(0x14c)]),await this['gitUtils'][_0x10d673(0x151)](),await this[_0x10d673(0x145)][_0x10d673(0x151)]();const _0x80af30=this[_0x10d673(0x13b)]+this[_0x10d673(0x111)];await this[_0x10d673(0x133)]['log'](this['prefix']+_0x10d673(0xf2)+(Date['now']()-this[_0x10d673(0x141)])+_0x10d673(0xf8)+_0x80af30+'.')[_0x10d673(0x131)]();}catch(_0x2e8562){await this[_0x10d673(0xf9)](),await this['sfLogger']['error'](this[_0x10d673(0x11c)]+'\x20'+_0x2e8562)[_0x10d673(0x131)]();throw _0x2e8562;}}async[a103_0x46388(0x161)](_0x9da106,_0x4b77e8){const _0x2eaa8f=a103_0x46388;var _0xbaf4ad,_0xf4f018;this[_0x2eaa8f(0x133)]=typedi_1['default'][_0x2eaa8f(0x15c)](providers_tokens_1['Tokens'][_0x2eaa8f(0x15f)]),this[_0x2eaa8f(0x11c)]=(_0x4b77e8?_0x4b77e8+'\x20':'')+'['+commit_components_dto_1[_0x2eaa8f(0x130)]['name']+']',await this['sfLogger'][_0x2eaa8f(0x113)](this['prefix']+_0x2eaa8f(0x14e));const _0x446f39=!!((_0xbaf4ad=_0x9da106[_0x2eaa8f(0x15b)])===null||_0xbaf4ad===void 0x0?void 0x0:_0xbaf4ad[_0x2eaa8f(0xed)])||!!((_0xf4f018=_0x9da106[_0x2eaa8f(0x15b)])===null||_0xf4f018===void 0x0?void 0x0:_0xf4f018['deleted']);if(!_0x446f39){await this['sfLogger'][_0x2eaa8f(0x113)](this[_0x2eaa8f(0x11c)]+_0x2eaa8f(0x11f))[_0x2eaa8f(0x131)]();return;}this[_0x2eaa8f(0x144)]=_0x9da106,await this[_0x2eaa8f(0x15d)]();}};function a103_0x48f7(){const _0x5cf1d4=['copyMdapiTo','reduce','MDApiUtils','8937445llVcte','commitAndPush','../../providers/types/git-provider','prefix','events','getGitShellAuthorizationString','\x20Nothing\x20to\x20commit.\x20Skip.','COMPONENTS_PER_TICK','defineProperty','__createBinding','DEFAULT_GIT_USER_EMAIL','clone','3823610CgfZyS','\x20Copying\x20mdapi\x20to\x20git\x20folder.','default','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','removeComponents','writeComponents','clearDir','://','getRemote','groupComponentsByFileName','credentials','CommitComponentsDto','send','search','sfLogger','typedi','splice','GitProvider','../dto/commit-components.dto','../../parsers/data/child-types','__esModule','length','componentsToWrite','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','createProjectFrom','sort','\x20Checking\x20written\x20components.','GitUtils','startTime','9ewXghV','../../providers/providers.tokens','commitData','mdapiUtils','constructor','writable','(((.+)+)+)+$','366238cSPSsR','\x20Prepare\x20mdapi\x20files.','object','name','force','\x20Checking\x20commit\x20components.','push','5895295rmaGmE','removeDir','deleted','function','../../salesforce/utils/sfdx.utils','\x20Start\x20converting\x20to\x20SFDX.','prepareMdapi','3xaUrsN','now','dir','996FzwyTH','components','get','exec','master','logger','CommitComponentsJob','run','SFDX','__importDefault','../utils/mdapi.utils','catch','gitUtils','6591pqIbsj','create','isEmptyDir','writed','getOwnPropertyDescriptor','__setModuleDefault','../../internal/fs.internal','isSFDXProject','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','join','29166hJRmCu','gitUrl','path','sfdxUtils','ms.\x20Committed\x20components\x20-\x20','cleanUp','isLoggedIn','copyProjectTo','prototype','branch','95388ePYHvw','7671EYbwqT','includes','writeFlosumComponents','apply','decorate','1085AQrZij','\x20Preparing\x20to\x20write\x20components','replace','fileName','SFDXUtils','Bitbucket','../utils/sfdx.utils','hasOwnProperty','provider','16lrciVr','getProtocol','../../../../constants','\x20Deleted\x20','componentsToDelete','force-app','log','fileType','\x20components'];a103_0x48f7=function(){return _0x5cf1d4;};return a103_0x48f7();}CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]})],CommitComponentsJob),exports[a103_0x46388(0x160)]=CommitComponentsJob;