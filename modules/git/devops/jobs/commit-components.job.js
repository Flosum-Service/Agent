function a60_0x4c46(_0x326405,_0x5ee6bd){const _0x208476=a60_0x1a7a();return a60_0x4c46=function(_0x4f0650,_0x335b66){_0x4f0650=_0x4f0650-0x124;let _0x1a7ac5=_0x208476[_0x4f0650];return _0x1a7ac5;},a60_0x4c46(_0x326405,_0x5ee6bd);}const a60_0x1f7c89=a60_0x4c46;(function(_0x27564f,_0x84544a){const _0x29dd23=a60_0x4c46,_0x172b65=_0x27564f();while(!![]){try{const _0x12a901=parseInt(_0x29dd23(0x13a))/0x1*(-parseInt(_0x29dd23(0x125))/0x2)+-parseInt(_0x29dd23(0x183))/0x3*(-parseInt(_0x29dd23(0x14f))/0x4)+parseInt(_0x29dd23(0x132))/0x5+-parseInt(_0x29dd23(0x173))/0x6+-parseInt(_0x29dd23(0x161))/0x7*(-parseInt(_0x29dd23(0x158))/0x8)+parseInt(_0x29dd23(0x151))/0x9+parseInt(_0x29dd23(0x163))/0xa;if(_0x12a901===_0x84544a)break;else _0x172b65['push'](_0x172b65['shift']());}catch(_0x53519f){_0x172b65['push'](_0x172b65['shift']());}}}(a60_0x1a7a,0x3e257));const a60_0x335b66=(function(){let _0x4f0ac4=!![];return function(_0x2df4b6,_0x46cdd7){const _0x23a4b3=_0x4f0ac4?function(){const _0xcd8bf9=a60_0x4c46;if(_0x46cdd7){const _0x2fd6c8=_0x46cdd7[_0xcd8bf9(0x157)](_0x2df4b6,arguments);return _0x46cdd7=null,_0x2fd6c8;}}:function(){};return _0x4f0ac4=![],_0x23a4b3;};}()),a60_0x4f0650=a60_0x335b66(this,function(){const _0xb0ede5=a60_0x4c46;return a60_0x4f0650[_0xb0ede5(0x193)]()[_0xb0ede5(0x18e)](_0xb0ede5(0x129))[_0xb0ede5(0x193)]()[_0xb0ede5(0x167)](a60_0x4f0650)[_0xb0ede5(0x18e)](_0xb0ede5(0x129));});a60_0x4f0650();'use strict';var __createBinding=this&&this[a60_0x1f7c89(0x130)]||(Object[a60_0x1f7c89(0x140)]?function(_0x5ee299,_0x1b0e4b,_0x5b6dc0,_0x3d3e16){const _0x5f300e=a60_0x1f7c89;if(_0x3d3e16===undefined)_0x3d3e16=_0x5b6dc0;Object[_0x5f300e(0x137)](_0x5ee299,_0x3d3e16,{'enumerable':!![],'get':function(){return _0x1b0e4b[_0x5b6dc0];}});}:function(_0xf85b83,_0x192cfb,_0x3031cf,_0x297d75){if(_0x297d75===undefined)_0x297d75=_0x3031cf;_0xf85b83[_0x297d75]=_0x192cfb[_0x3031cf];}),__setModuleDefault=this&&this[a60_0x1f7c89(0x142)]||(Object[a60_0x1f7c89(0x140)]?function(_0x2a02c8,_0x1a6608){const _0x27256e=a60_0x1f7c89;Object[_0x27256e(0x137)](_0x2a02c8,_0x27256e(0x15d),{'enumerable':!![],'value':_0x1a6608});}:function(_0x64b34f,_0x3429ba){const _0x2e3e44=a60_0x1f7c89;_0x64b34f[_0x2e3e44(0x15d)]=_0x3429ba;}),__decorate=this&&this['__decorate']||function(_0x43d1ee,_0x48ab13,_0x5c3b51,_0x3e3506){const _0x1a2044=a60_0x1f7c89;var _0x1d9a60=arguments[_0x1a2044(0x135)],_0x41fa9f=_0x1d9a60<0x3?_0x48ab13:_0x3e3506===null?_0x3e3506=Object[_0x1a2044(0x182)](_0x48ab13,_0x5c3b51):_0x3e3506,_0xfd02cf;if(typeof Reflect===_0x1a2044(0x141)&&typeof Reflect['decorate']===_0x1a2044(0x15f))_0x41fa9f=Reflect[_0x1a2044(0x13c)](_0x43d1ee,_0x48ab13,_0x5c3b51,_0x3e3506);else{for(var _0x2f5dc0=_0x43d1ee[_0x1a2044(0x135)]-0x1;_0x2f5dc0>=0x0;_0x2f5dc0--)if(_0xfd02cf=_0x43d1ee[_0x2f5dc0])_0x41fa9f=(_0x1d9a60<0x3?_0xfd02cf(_0x41fa9f):_0x1d9a60>0x3?_0xfd02cf(_0x48ab13,_0x5c3b51,_0x41fa9f):_0xfd02cf(_0x48ab13,_0x5c3b51))||_0x41fa9f;}return _0x1d9a60>0x3&&_0x41fa9f&&Object[_0x1a2044(0x137)](_0x48ab13,_0x5c3b51,_0x41fa9f),_0x41fa9f;},__importStar=this&&this['__importStar']||function(_0x1367cf){const _0x4f73a0=a60_0x1f7c89;if(_0x1367cf&&_0x1367cf[_0x4f73a0(0x179)])return _0x1367cf;var _0x50f899={};if(_0x1367cf!=null){for(var _0x2c6494 in _0x1367cf)if(_0x2c6494!=='default'&&Object[_0x4f73a0(0x14a)]['hasOwnProperty'][_0x4f73a0(0x18d)](_0x1367cf,_0x2c6494))__createBinding(_0x50f899,_0x1367cf,_0x2c6494);}return __setModuleDefault(_0x50f899,_0x1367cf),_0x50f899;},__importDefault=this&&this[a60_0x1f7c89(0x177)]||function(_0x2aefab){const _0x5096b7=a60_0x1f7c89;return _0x2aefab&&_0x2aefab[_0x5096b7(0x179)]?_0x2aefab:{'default':_0x2aefab};};function a60_0x1a7a(){const _0x3ca9d1=['1804212cEfxix','reduce','componentsToDelete','://','__importDefault','sfdxUtils','__esModule','run','\x20Checking\x20commit\x20components.','sort','startTime','logger','../../internal/fs.internal','splice','../utils/git.utils','getOwnPropertyDescriptor','801cwKyuo','createProjectFrom','commitData','removeDir','gitUtils','deleted','\x20Prepare\x20mdapi\x20files.','isSFDXProject','credentials','CommitComponentsJob','call','search','isLoggedIn','\x20Nothing\x20to\x20commit.\x20Skip.','send','getProtocol','toString','\x20Start\x20cloning\x20repository.','122014nrHYPZ','SFDXUtils','../../providers/types/git-provider','groupComponentsByFileName','(((.+)+)+)+$','log','fileType','components','getRemote','../../salesforce/utils/sfdx.utils','GitUtils','__createBinding','\x20Preparing\x20to\x20write\x20components','2091770zCmtYr','CommitComponentsDto','componentsToWrite','length','MDApiUtils','defineProperty','\x20components','clone','5yyeBlZ','../../../shared/utils','decorate','events','force','../utils/sfdx.utils','create','object','__setModuleDefault','\x20Checking\x20deleted\x20components.','../dto/commit-components.dto','\x20Copying\x20mdapi\x20to\x20git\x20folder.','COMPONENTS_PER_TICK','clearDir','gitUrl','error','prototype','removeComponents','type','copyProjectTo','writeComponents','1700xrgCez','dir','1157580YmdbBp','values','../../providers/providers.tokens','catch','getGitShellAuthorizationString','name','apply','592008TOynYt','cleanUp','ms.\x20Committed\x20components\x20-\x20','writed','prefix','default','\x20Checking\x20written\x20components.','function','../../providers/api/bitbucket-api.service','7dXCZgz','mdapiUtils','1258380tDDQAJ','isEmptyDir','exec','Tokens','constructor','../../parsers/data/child-types','Service','includes','sfLogger','fileName','DEFAULT_GIT_USER_EMAIL','commitAndPush','prepareMdapi','branch','get','copyMdapiTo'];a60_0x1a7a=function(){return _0x3ca9d1;};return a60_0x1a7a();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a60_0x1f7c89(0x18c)]=void 0x0;const commit_components_dto_1=require(a60_0x1f7c89(0x144)),events_1=__importDefault(require(a60_0x1f7c89(0x13d))),git_utils_1=require(a60_0x1f7c89(0x181)),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a60_0x1f7c89(0x13f)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a60_0x1f7c89(0x168))),utils_1=require(a60_0x1f7c89(0x13b)),constants_1=require('../../../../constants'),git_provider_1=require(a60_0x1f7c89(0x127)),bitbucket_api_service_1=require(a60_0x1f7c89(0x160)),sfdx_utils_2=require(a60_0x1f7c89(0x12e)),fs_internal_1=require(a60_0x1f7c89(0x17f)),path_1=require('path'),providers_tokens_1=require(a60_0x1f7c89(0x153));let CommitComponentsJob=class CommitComponentsJob extends events_1[a60_0x1f7c89(0x15d)]{constructor(){const _0x3b09cd=a60_0x1f7c89;super(...arguments),this[_0x3b09cd(0x146)]=0x3e8,this[_0x3b09cd(0x134)]=0x0,this[_0x3b09cd(0x175)]=0x0,this[_0x3b09cd(0x17d)]=Date['now']();}async['getRemote'](){const _0x4139a4=a60_0x1f7c89,{repo:_0x4745af}=this[_0x4139a4(0x185)],_0x1a821a=typedi_1[_0x4139a4(0x15d)]['get'](providers_tokens_1[_0x4139a4(0x166)][_0x4139a4(0x18b)]);if(this['commitData']['provider']===git_provider_1['GitProvider']['Bitbucket']){const _0x28ffc0=typedi_1[_0x4139a4(0x15d)][_0x4139a4(0x171)](bitbucket_api_service_1['BitbucketApiService']);await _0x28ffc0[_0x4139a4(0x18f)]();}return _0x4745af[_0x4139a4(0x148)]['replace'](/http(s)?:\/\/(.+@)?/,utils_1[_0x4139a4(0x192)](_0x4745af[_0x4139a4(0x148)])+_0x4139a4(0x176)+_0x1a821a[_0x4139a4(0x155)]()+'@');}[a60_0x1f7c89(0x128)](_0x33260c){const _0xe45687=a60_0x1f7c89;var _0x4fec4b;_0x33260c[_0xe45687(0x17c)](_0x283d9e=>child_types_1['default'][_0xe45687(0x16a)](_0x283d9e[_0xe45687(0x12b)])?0x1:-0x1);const _0x2a30fa={};for(const _0x3a5650 of _0x33260c){_0x2a30fa[_0x4fec4b=_0x3a5650[_0xe45687(0x16c)]]||(_0x2a30fa[_0x4fec4b]=[]),_0x2a30fa[_0x3a5650['fileName']]['push'](_0x3a5650);}return Object[_0xe45687(0x152)](_0x2a30fa)[_0xe45687(0x174)]((_0x35e9d1,_0x14a115)=>[..._0x35e9d1,..._0x14a115],[]);}async[a60_0x1f7c89(0x14e)](_0x5e2dff){const _0x29b983=a60_0x1f7c89;_0x5e2dff=this[_0x29b983(0x128)](_0x5e2dff);let _0x506678=0x0;while(_0x5e2dff[_0x29b983(0x135)]){const _0x4bb568=_0x5e2dff[_0x29b983(0x180)](0x0,this[_0x29b983(0x146)]);await this[_0x29b983(0x162)]['writeFlosumComponents'](_0x4bb568,{'skipChildErrors':this['commitData'][_0x29b983(0x170)][_0x29b983(0x156)]==='master'}),_0x506678+=_0x4bb568[_0x29b983(0x135)],this[_0x29b983(0x16b)]['log'](this[_0x29b983(0x15c)]+'\x20Wrote\x20'+_0x506678+'/'+this[_0x29b983(0x134)]+_0x29b983(0x138)),await this[_0x29b983(0x16b)]['send']();}}async[a60_0x1f7c89(0x14b)](_0xfb68e2){const _0x3b2e7b=a60_0x1f7c89;_0xfb68e2[_0x3b2e7b(0x17c)](_0x26d364=>child_types_1['default'][_0x3b2e7b(0x16a)](_0x26d364[_0x3b2e7b(0x14c)])?-0x1:0x1);let _0x1955ba=0x0;while(_0xfb68e2[_0x3b2e7b(0x135)]){const _0x663c6f=_0xfb68e2[_0x3b2e7b(0x180)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x3b2e7b(0x162)]['removeComponents'](_0x663c6f),_0x1955ba+=_0x663c6f['length'],this['sfLogger'][_0x3b2e7b(0x12a)](this[_0x3b2e7b(0x15c)]+'\x20Deleted\x20'+_0x1955ba+'/'+this[_0x3b2e7b(0x175)]+'\x20components'),await this['sfLogger']['send']();}}async[a60_0x1f7c89(0x159)](){const _0x549b4c=a60_0x1f7c89;this[_0x549b4c(0x187)]&&await this['gitUtils'][_0x549b4c(0x186)]()[_0x549b4c(0x154)](()=>void 0x0),this[_0x549b4c(0x162)]&&await this[_0x549b4c(0x162)][_0x549b4c(0x186)]()[_0x549b4c(0x154)](()=>void 0x0),this[_0x549b4c(0x178)]&&await this[_0x549b4c(0x178)][_0x549b4c(0x186)]()['catch'](()=>void 0x0);}async['exec'](){const _0x4482d7=a60_0x1f7c89,{repo:_0x5112f1,branch:_0x5586e4,components:_0x323e6b,convertToSFDX:_0x3dc404,message:_0x157127,user:_0x4cd61e}=this['commitData'];this[_0x4482d7(0x162)]=new mdapi_utils_1[(_0x4482d7(0x136))](),this['gitUtils']=new git_utils_1[(_0x4482d7(0x12f))](await this[_0x4482d7(0x12d)]()),this[_0x4482d7(0x178)]=new sfdx_utils_1[(_0x4482d7(0x126))]();let _0x1b1e3f=_0x3dc404;try{await this['sfLogger'][_0x4482d7(0x12a)](this[_0x4482d7(0x15c)]+_0x4482d7(0x124))[_0x4482d7(0x191)](),await this['gitUtils'][_0x4482d7(0x139)](_0x5586e4[_0x4482d7(0x156)],_0x5112f1[_0x4482d7(0x156)]);!this[_0x4482d7(0x185)][_0x4482d7(0x13e)]?(this[_0x4482d7(0x16b)][_0x4482d7(0x12a)](this[_0x4482d7(0x15c)]+_0x4482d7(0x189)),await this[_0x4482d7(0x162)][_0x4482d7(0x16f)](this[_0x4482d7(0x187)]['dir'])):this[_0x4482d7(0x16b)][_0x4482d7(0x12a)](this[_0x4482d7(0x15c)]+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this['sfLogger']['log'](this['prefix']+_0x4482d7(0x15e))[_0x4482d7(0x191)]();_0x323e6b['writed']&&(this[_0x4482d7(0x16b)][_0x4482d7(0x12a)](this['prefix']+_0x4482d7(0x131)),this[_0x4482d7(0x134)]=_0x323e6b['writed'][_0x4482d7(0x135)],await this[_0x4482d7(0x14e)](_0x323e6b[_0x4482d7(0x15b)]),await this['sfLogger'][_0x4482d7(0x191)]());await this[_0x4482d7(0x16b)][_0x4482d7(0x12a)](this[_0x4482d7(0x15c)]+_0x4482d7(0x143))[_0x4482d7(0x191)]();_0x323e6b['deleted']&&(this[_0x4482d7(0x16b)]['log'](this[_0x4482d7(0x15c)]+'\x20Preparing\x20to\x20delete\x20components'),this[_0x4482d7(0x175)]=_0x323e6b[_0x4482d7(0x188)]['length'],await this[_0x4482d7(0x14b)](_0x323e6b[_0x4482d7(0x188)]),await this[_0x4482d7(0x16b)][_0x4482d7(0x191)]());await this[_0x4482d7(0x16b)][_0x4482d7(0x191)]();const _0x416eb0=await fs_internal_1['FS'][_0x4482d7(0x164)](this[_0x4482d7(0x187)][_0x4482d7(0x150)]);await sfdx_utils_2['SFDX'][_0x4482d7(0x18a)](this[_0x4482d7(0x187)][_0x4482d7(0x150)])?(_0x1b1e3f=!![],await fs_internal_1['FS'][_0x4482d7(0x186)](path_1['join'](this[_0x4482d7(0x187)][_0x4482d7(0x150)],'force-app'))):(_0x1b1e3f&&(!_0x416eb0&&(_0x1b1e3f=![])),await this[_0x4482d7(0x187)][_0x4482d7(0x147)]());_0x1b1e3f?(await this['sfLogger'][_0x4482d7(0x12a)](this[_0x4482d7(0x15c)]+'\x20Start\x20converting\x20to\x20SFDX.')[_0x4482d7(0x191)](),await this[_0x4482d7(0x178)][_0x4482d7(0x184)](this[_0x4482d7(0x162)][_0x4482d7(0x150)]),await this[_0x4482d7(0x178)][_0x4482d7(0x14d)](this[_0x4482d7(0x187)][_0x4482d7(0x150)],!_0x416eb0),await this['sfdxUtils'][_0x4482d7(0x186)]()):(await this['sfLogger'][_0x4482d7(0x12a)](this[_0x4482d7(0x15c)]+_0x4482d7(0x145))[_0x4482d7(0x191)](),await this[_0x4482d7(0x162)][_0x4482d7(0x172)](this[_0x4482d7(0x187)]['dir']));await this['sfLogger'][_0x4482d7(0x12a)](this[_0x4482d7(0x15c)]+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')['send'](),await this['gitUtils'][_0x4482d7(0x16e)](_0x157127,{'email':constants_1[_0x4482d7(0x16d)],'name':_0x4cd61e[_0x4482d7(0x156)]},_0x5586e4['name']),await this['gitUtils'][_0x4482d7(0x186)](),await this[_0x4482d7(0x162)][_0x4482d7(0x186)]();const _0x24b097=this[_0x4482d7(0x134)]+this[_0x4482d7(0x175)];await this[_0x4482d7(0x16b)][_0x4482d7(0x12a)](this[_0x4482d7(0x15c)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date['now']()-this[_0x4482d7(0x17d)])+_0x4482d7(0x15a)+_0x24b097+'.')[_0x4482d7(0x191)]();}catch(_0x4dbd8b){await this['cleanUp'](),await this[_0x4482d7(0x16b)][_0x4482d7(0x149)](this[_0x4482d7(0x15c)]+'\x20'+_0x4dbd8b)[_0x4482d7(0x191)]();throw _0x4dbd8b;}}async[a60_0x1f7c89(0x17a)](_0x53fa47,_0x3eb7a7){const _0x3ad4d7=a60_0x1f7c89;var _0x5a6353,_0x2d7658;this['sfLogger']=typedi_1['default'][_0x3ad4d7(0x171)](providers_tokens_1[_0x3ad4d7(0x166)][_0x3ad4d7(0x17e)]),this[_0x3ad4d7(0x15c)]=(_0x3eb7a7?_0x3eb7a7+'\x20':'')+'['+commit_components_dto_1[_0x3ad4d7(0x133)][_0x3ad4d7(0x156)]+']',await this[_0x3ad4d7(0x16b)][_0x3ad4d7(0x12a)](this['prefix']+_0x3ad4d7(0x17b));const _0x4795c2=!!((_0x5a6353=_0x53fa47[_0x3ad4d7(0x12c)])===null||_0x5a6353===void 0x0?void 0x0:_0x5a6353[_0x3ad4d7(0x15b)])||!!((_0x2d7658=_0x53fa47[_0x3ad4d7(0x12c)])===null||_0x2d7658===void 0x0?void 0x0:_0x2d7658[_0x3ad4d7(0x188)]);if(!_0x4795c2){await this[_0x3ad4d7(0x16b)]['log'](this[_0x3ad4d7(0x15c)]+_0x3ad4d7(0x190))[_0x3ad4d7(0x191)]();return;}this[_0x3ad4d7(0x185)]=_0x53fa47,await this[_0x3ad4d7(0x165)]();}};CommitComponentsJob=__decorate([typedi_1[a60_0x1f7c89(0x169)]({'transient':!![]})],CommitComponentsJob),exports[a60_0x1f7c89(0x18c)]=CommitComponentsJob;