const a104_0x3d6cf8=a104_0x3765;(function(_0x54c7d8,_0x4dc795){const _0x4f9f61=a104_0x3765,_0x528b7c=_0x54c7d8();while(!![]){try{const _0x29a4de=-parseInt(_0x4f9f61(0x18c))/0x1*(parseInt(_0x4f9f61(0x1bd))/0x2)+parseInt(_0x4f9f61(0x1e9))/0x3*(parseInt(_0x4f9f61(0x1a9))/0x4)+parseInt(_0x4f9f61(0x1a3))/0x5+-parseInt(_0x4f9f61(0x1f9))/0x6+parseInt(_0x4f9f61(0x1fe))/0x7*(-parseInt(_0x4f9f61(0x18d))/0x8)+-parseInt(_0x4f9f61(0x18f))/0x9*(-parseInt(_0x4f9f61(0x1a1))/0xa)+-parseInt(_0x4f9f61(0x1cc))/0xb;if(_0x29a4de===_0x4dc795)break;else _0x528b7c['push'](_0x528b7c['shift']());}catch(_0x31b022){_0x528b7c['push'](_0x528b7c['shift']());}}}(a104_0x3b8b,0xbef35));function a104_0x3b8b(){const _0x5ace5b=['\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','clone','fileType','\x20Checking\x20written\x20components.','object','copyMdapiTo','MDApiUtils','commitData','copyVlocityComponents','DEFAULT_GIT_USER_EMAIL','removeDir','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','removeComponents','Tokens','components','7357550uyGHTC','default','2990905Gjegqy','splice','gitUrl','decorate','__setModuleDefault','../utils/git.utils','778404XnEylo','../../providers/api/bitbucket-api.service','../../providers/types/git-provider','events','constructor','../dto/commit-components.dto','dir','isLoggedIn','__createBinding','../../salesforce/utils/sfdx.utils','writed','logger','toString','\x20Start\x20converting\x20to\x20SFDX.','(((.+)+)+)+$','credentials','includes','catch','__esModule','join','82YZNkMK','writeFlosumComponents','deleted','mdapiUtils','sort','clearDir','get','defineProperty','__importStar','COMPONENTS_PER_TICK','../../providers/providers.tokens','exec','\x20Copying\x20mdapi\x20to\x20git\x20folder.','\x20Nothing\x20to\x20commit.\x20Skip.','search','4759623FhMYTB','create','force-app','send','log','CommitComponentsJob','values','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','groupComponentsByFileName','\x20Wrote\x20','sfLogger','getRemote','Service','componentsToWrite','configurable','__importDefault','SFDXUtils','call','copyProjectTo','\x20Checking\x20commit\x20components.','cleanUp','typedi','path','../../../../constants','BitbucketApiService','\x20Deleted\x20','\x20components','fileName','../utils/mdapi.utils','21JXlAjD','__decorate','\x20Preparing\x20to\x20write\x20components','gitUtils','sfdxUtils','\x20Prepare\x20mdapi\x20files.','run','componentsToDelete','ms.\x20Committed\x20components\x20-\x20','writeComponents','length','GitProvider','isEmptyDir','hasOwnProperty','GitUtils','prefix','1628232GUkkFi','reduce','getProtocol','CommitComponentsDto','type','53879xTAJSa','startTime','Bitbucket','name','function','error','4918uxhBui','1048JrakEO','prepareMdapi','9hgWGhz','now','getOwnPropertyDescriptor'];a104_0x3b8b=function(){return _0x5ace5b;};return a104_0x3b8b();}function a104_0x3765(_0x590ae9,_0x784a16){const _0xbb0478=a104_0x3b8b();return a104_0x3765=function(_0x27d204,_0x281d70){_0x27d204=_0x27d204-0x18c;let _0x3b8b0c=_0xbb0478[_0x27d204];return _0x3b8b0c;},a104_0x3765(_0x590ae9,_0x784a16);}const a104_0x281d70=(function(){let _0xf1d7e6=!![];return function(_0x5efa1a,_0x510323){const _0xb9a1da=_0xf1d7e6?function(){if(_0x510323){const _0x301b19=_0x510323['apply'](_0x5efa1a,arguments);return _0x510323=null,_0x301b19;}}:function(){};return _0xf1d7e6=![],_0xb9a1da;};}()),a104_0x27d204=a104_0x281d70(this,function(){const _0x1aa7a3=a104_0x3765;return a104_0x27d204[_0x1aa7a3(0x1b5)]()[_0x1aa7a3(0x1cb)](_0x1aa7a3(0x1b7))['toString']()[_0x1aa7a3(0x1ad)](a104_0x27d204)[_0x1aa7a3(0x1cb)](_0x1aa7a3(0x1b7));});a104_0x27d204();'use strict';var __createBinding=this&&this[a104_0x3d6cf8(0x1b1)]||(Object[a104_0x3d6cf8(0x1cd)]?function(_0x998822,_0x87aa8f,_0x4454c6,_0x325b89){const _0x238695=a104_0x3d6cf8;if(_0x325b89===undefined)_0x325b89=_0x4454c6;var _0x360428=Object[_0x238695(0x191)](_0x87aa8f,_0x4454c6);(!_0x360428||(_0x238695(0x1c3)in _0x360428?!_0x87aa8f[_0x238695(0x1bb)]:_0x360428['writable']||_0x360428[_0x238695(0x1da)]))&&(_0x360428={'enumerable':!![],'get':function(){return _0x87aa8f[_0x4454c6];}}),Object[_0x238695(0x1c4)](_0x998822,_0x325b89,_0x360428);}:function(_0x2fceea,_0x4efbe7,_0x19268e,_0x1e8a9d){if(_0x1e8a9d===undefined)_0x1e8a9d=_0x19268e;_0x2fceea[_0x1e8a9d]=_0x4efbe7[_0x19268e];}),__setModuleDefault=this&&this[a104_0x3d6cf8(0x1a7)]||(Object['create']?function(_0x38629f,_0x2a6f1c){Object['defineProperty'](_0x38629f,'default',{'enumerable':!![],'value':_0x2a6f1c});}:function(_0x4d12e3,_0x530a3e){_0x4d12e3['default']=_0x530a3e;}),__decorate=this&&this[a104_0x3d6cf8(0x1ea)]||function(_0x34ccc1,_0x58aa15,_0x2b3083,_0x4d17a3){const _0x1a4115=a104_0x3d6cf8;var _0x4cd43d=arguments[_0x1a4115(0x1f3)],_0x58f2e7=_0x4cd43d<0x3?_0x58aa15:_0x4d17a3===null?_0x4d17a3=Object[_0x1a4115(0x191)](_0x58aa15,_0x2b3083):_0x4d17a3,_0x44f0db;if(typeof Reflect===_0x1a4115(0x196)&&typeof Reflect[_0x1a4115(0x1a6)]===_0x1a4115(0x202))_0x58f2e7=Reflect[_0x1a4115(0x1a6)](_0x34ccc1,_0x58aa15,_0x2b3083,_0x4d17a3);else{for(var _0x5b33bc=_0x34ccc1[_0x1a4115(0x1f3)]-0x1;_0x5b33bc>=0x0;_0x5b33bc--)if(_0x44f0db=_0x34ccc1[_0x5b33bc])_0x58f2e7=(_0x4cd43d<0x3?_0x44f0db(_0x58f2e7):_0x4cd43d>0x3?_0x44f0db(_0x58aa15,_0x2b3083,_0x58f2e7):_0x44f0db(_0x58aa15,_0x2b3083))||_0x58f2e7;}return _0x4cd43d>0x3&&_0x58f2e7&&Object['defineProperty'](_0x58aa15,_0x2b3083,_0x58f2e7),_0x58f2e7;},__importStar=this&&this[a104_0x3d6cf8(0x1c5)]||function(_0x4f9d67){const _0x1ebbc5=a104_0x3d6cf8;if(_0x4f9d67&&_0x4f9d67['__esModule'])return _0x4f9d67;var _0x1e15ac={};if(_0x4f9d67!=null){for(var _0x1726a0 in _0x4f9d67)if(_0x1726a0!==_0x1ebbc5(0x1a2)&&Object['prototype'][_0x1ebbc5(0x1f6)][_0x1ebbc5(0x1dd)](_0x4f9d67,_0x1726a0))__createBinding(_0x1e15ac,_0x4f9d67,_0x1726a0);}return __setModuleDefault(_0x1e15ac,_0x4f9d67),_0x1e15ac;},__importDefault=this&&this[a104_0x3d6cf8(0x1db)]||function(_0x3b1377){const _0x4812f9=a104_0x3d6cf8;return _0x3b1377&&_0x3b1377[_0x4812f9(0x1bb)]?_0x3b1377:{'default':_0x3b1377};};Object[a104_0x3d6cf8(0x1c4)](exports,a104_0x3d6cf8(0x1bb),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const commit_components_dto_1=require(a104_0x3d6cf8(0x1ae)),events_1=__importDefault(require(a104_0x3d6cf8(0x1ac))),git_utils_1=require(a104_0x3d6cf8(0x1a8)),mdapi_utils_1=require(a104_0x3d6cf8(0x1e8)),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require(a104_0x3d6cf8(0x1e1))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require('../../../shared/utils'),constants_1=require(a104_0x3d6cf8(0x1e3)),git_provider_1=require(a104_0x3d6cf8(0x1ab)),bitbucket_api_service_1=require(a104_0x3d6cf8(0x1aa)),sfdx_utils_2=require(a104_0x3d6cf8(0x1b2)),fs_internal_1=require('../../internal/fs.internal'),path_1=require(a104_0x3d6cf8(0x1e2)),providers_tokens_1=require(a104_0x3d6cf8(0x1c7)),constants_2=require(a104_0x3d6cf8(0x1e3));let CommitComponentsJob=class CommitComponentsJob extends events_1[a104_0x3d6cf8(0x1a2)]{constructor(){const _0x28a61f=a104_0x3d6cf8;super(...arguments),this[_0x28a61f(0x1c6)]=0x3e8,this['componentsToWrite']=0x0,this[_0x28a61f(0x1f0)]=0x0,this[_0x28a61f(0x1ff)]=Date[_0x28a61f(0x190)]();}async[a104_0x3d6cf8(0x1d7)](){const _0x4d2471=a104_0x3d6cf8,{repo:_0xc7a5b9}=this[_0x4d2471(0x199)],_0x4a22eb=typedi_1[_0x4d2471(0x1a2)][_0x4d2471(0x1c3)](providers_tokens_1['Tokens'][_0x4d2471(0x1b8)]);if(this['commitData']['provider']===git_provider_1[_0x4d2471(0x1f4)][_0x4d2471(0x200)]){const _0xd2f3fc=typedi_1['default'][_0x4d2471(0x1c3)](bitbucket_api_service_1[_0x4d2471(0x1e4)]);await _0xd2f3fc[_0x4d2471(0x1b0)]();}return _0xc7a5b9[_0x4d2471(0x1a5)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x4d2471(0x1fb)])(_0xc7a5b9['gitUrl'])+'://'+_0x4a22eb['getGitShellAuthorizationString']()+'@');}[a104_0x3d6cf8(0x1d4)](_0xa89699){const _0x3490bd=a104_0x3d6cf8;var _0x109616;_0xa89699[_0x3490bd(0x1c1)](_0x2c8d31=>child_types_1[_0x3490bd(0x1a2)]['includes'](_0x2c8d31[_0x3490bd(0x194)])?0x1:-0x1);const _0xc0c45={};for(const _0x41515b of _0xa89699){_0xc0c45[_0x109616=_0x41515b[_0x3490bd(0x1e7)]]||(_0xc0c45[_0x109616]=[]),_0xc0c45[_0x41515b[_0x3490bd(0x1e7)]]['push'](_0x41515b);}return Object[_0x3490bd(0x1d2)](_0xc0c45)[_0x3490bd(0x1fa)]((_0x393118,_0x1f634f)=>[..._0x393118,..._0x1f634f],[]);}async[a104_0x3d6cf8(0x1f2)](_0x5057f2){const _0x115eb2=a104_0x3d6cf8;_0x5057f2=this['groupComponentsByFileName'](_0x5057f2);let _0x386ce6=0x0;while(_0x5057f2[_0x115eb2(0x1f3)]){const _0x2fda2c=_0x5057f2[_0x115eb2(0x1a4)](0x0,this[_0x115eb2(0x1c6)]);await this[_0x115eb2(0x1c0)][_0x115eb2(0x1be)](_0x2fda2c,{'skipChildErrors':this['commitData']['branch']['name']==='master'}),_0x386ce6+=_0x2fda2c[_0x115eb2(0x1f3)],this[_0x115eb2(0x1d6)]['log'](this['prefix']+_0x115eb2(0x1d5)+_0x386ce6+'/'+this[_0x115eb2(0x1d9)]+_0x115eb2(0x1e6)),await this[_0x115eb2(0x1d6)]['send']();}}async['removeComponents'](_0x134818){const _0xdc719c=a104_0x3d6cf8;_0x134818[_0xdc719c(0x1c1)](_0x50162d=>child_types_1[_0xdc719c(0x1a2)][_0xdc719c(0x1b9)](_0x50162d[_0xdc719c(0x1fd)])?-0x1:0x1);let _0x2b6974=0x0;while(_0x134818[_0xdc719c(0x1f3)]){const _0x35ff84=_0x134818[_0xdc719c(0x1a4)](0x0,this[_0xdc719c(0x1c6)]);await this[_0xdc719c(0x1c0)][_0xdc719c(0x19e)](_0x35ff84),_0x2b6974+=_0x35ff84[_0xdc719c(0x1f3)],this[_0xdc719c(0x1d6)]['log'](this[_0xdc719c(0x1f8)]+_0xdc719c(0x1e5)+_0x2b6974+'/'+this[_0xdc719c(0x1f0)]+_0xdc719c(0x1e6)),await this[_0xdc719c(0x1d6)][_0xdc719c(0x1cf)]();}}async[a104_0x3d6cf8(0x1e0)](){const _0x28f21d=a104_0x3d6cf8;this[_0x28f21d(0x1ec)]&&await this[_0x28f21d(0x1ec)][_0x28f21d(0x19c)]()[_0x28f21d(0x1ba)](()=>void 0x0),this[_0x28f21d(0x1c0)]&&await this['mdapiUtils']['removeDir']()[_0x28f21d(0x1ba)](()=>void 0x0),this['sfdxUtils']&&await this['sfdxUtils'][_0x28f21d(0x19c)]()[_0x28f21d(0x1ba)](()=>void 0x0);}async[a104_0x3d6cf8(0x1c8)](){const _0x291a1e=a104_0x3d6cf8,{repo:_0x41fb5b,branch:_0x24c472,components:_0x845551,convertToSFDX:_0x1401c1,message:_0x3b8c7c,user:_0x205b06}=this[_0x291a1e(0x199)];this['mdapiUtils']=new mdapi_utils_1[(_0x291a1e(0x198))](),this[_0x291a1e(0x1ec)]=new git_utils_1[(_0x291a1e(0x1f7))](await this['getRemote']()),this[_0x291a1e(0x1ed)]=new sfdx_utils_1[(_0x291a1e(0x1dc))]();let _0x4ffd7e=_0x1401c1;try{await this[_0x291a1e(0x1d6)][_0x291a1e(0x1d0)](this[_0x291a1e(0x1f8)]+'\x20Start\x20cloning\x20repository.')[_0x291a1e(0x1cf)](),await this[_0x291a1e(0x1ec)][_0x291a1e(0x193)](_0x24c472['name'],_0x41fb5b['name']);!this[_0x291a1e(0x199)]['force']?(this[_0x291a1e(0x1d6)][_0x291a1e(0x1d0)](this[_0x291a1e(0x1f8)]+_0x291a1e(0x1ee)),await this['mdapiUtils'][_0x291a1e(0x18e)](this[_0x291a1e(0x1ec)]['dir'])):this[_0x291a1e(0x1d6)][_0x291a1e(0x1d0)](this['prefix']+_0x291a1e(0x1d3));await this[_0x291a1e(0x1d6)]['log'](this['prefix']+_0x291a1e(0x195))[_0x291a1e(0x1cf)]();_0x845551[_0x291a1e(0x1b3)]&&(this[_0x291a1e(0x1d6)][_0x291a1e(0x1d0)](this['prefix']+_0x291a1e(0x1eb)),this[_0x291a1e(0x1d9)]=_0x845551[_0x291a1e(0x1b3)][_0x291a1e(0x1f3)],await this[_0x291a1e(0x1f2)](_0x845551['writed']),await this[_0x291a1e(0x1d6)][_0x291a1e(0x1cf)]());await this['sfLogger'][_0x291a1e(0x1d0)](this[_0x291a1e(0x1f8)]+'\x20Checking\x20deleted\x20components.')[_0x291a1e(0x1cf)]();_0x845551['deleted']&&(this[_0x291a1e(0x1d6)][_0x291a1e(0x1d0)](this[_0x291a1e(0x1f8)]+'\x20Preparing\x20to\x20delete\x20components'),this['componentsToDelete']=_0x845551[_0x291a1e(0x1bf)][_0x291a1e(0x1f3)],await this['removeComponents'](_0x845551[_0x291a1e(0x1bf)]),await this[_0x291a1e(0x1d6)][_0x291a1e(0x1cf)]());await this[_0x291a1e(0x1d6)][_0x291a1e(0x1cf)]();const _0x4784cd=await fs_internal_1['FS'][_0x291a1e(0x1f5)](this['gitUtils'][_0x291a1e(0x1af)]);await sfdx_utils_2['SFDX']['isSFDXProject'](this[_0x291a1e(0x1ec)][_0x291a1e(0x1af)])?(_0x4ffd7e=!![],await fs_internal_1['FS'][_0x291a1e(0x19c)]((0x0,path_1['join'])(this[_0x291a1e(0x1ec)][_0x291a1e(0x1af)],_0x291a1e(0x1ce)))):(_0x4ffd7e&&(!_0x4784cd&&(_0x4ffd7e=![])),await this['gitUtils'][_0x291a1e(0x1c2)]());_0x4ffd7e?(await this[_0x291a1e(0x1d6)][_0x291a1e(0x1d0)](this['prefix']+_0x291a1e(0x1b6))[_0x291a1e(0x1cf)](),await this['sfdxUtils']['createProjectFrom'](this[_0x291a1e(0x1c0)][_0x291a1e(0x1af)]),await this[_0x291a1e(0x1ed)][_0x291a1e(0x1de)](this['gitUtils']['dir'],!_0x4784cd),await this[_0x291a1e(0x1ed)][_0x291a1e(0x19a)](this[_0x291a1e(0x1c0)]['dir'],(0x0,path_1[_0x291a1e(0x1bc)])(this[_0x291a1e(0x1ec)][_0x291a1e(0x1af)],constants_2['FORCE_APP_DEFAULT_DIR'])),await this[_0x291a1e(0x1ed)][_0x291a1e(0x19c)]()):(await this['sfLogger'][_0x291a1e(0x1d0)](this[_0x291a1e(0x1f8)]+_0x291a1e(0x1c9))[_0x291a1e(0x1cf)](),await this[_0x291a1e(0x1c0)][_0x291a1e(0x197)](this[_0x291a1e(0x1ec)][_0x291a1e(0x1af)]));await this['sfLogger']['log'](this['prefix']+_0x291a1e(0x192))['send'](),await this[_0x291a1e(0x1ec)]['commitAndPush'](_0x3b8c7c,{'email':constants_1[_0x291a1e(0x19b)],'name':_0x205b06[_0x291a1e(0x201)]},_0x24c472[_0x291a1e(0x201)]),await this[_0x291a1e(0x1ec)][_0x291a1e(0x19c)](),await this['mdapiUtils'][_0x291a1e(0x19c)]();const _0x15c397=this[_0x291a1e(0x1d9)]+this[_0x291a1e(0x1f0)];await this[_0x291a1e(0x1d6)][_0x291a1e(0x1d0)](this['prefix']+_0x291a1e(0x19d)+(Date[_0x291a1e(0x190)]()-this[_0x291a1e(0x1ff)])+_0x291a1e(0x1f1)+_0x15c397+'.')[_0x291a1e(0x1cf)]();}catch(_0x562970){await this[_0x291a1e(0x1e0)](),await this[_0x291a1e(0x1d6)][_0x291a1e(0x203)](this[_0x291a1e(0x1f8)]+'\x20'+_0x562970)['send']();throw _0x562970;}}async[a104_0x3d6cf8(0x1ef)](_0x389348,_0x39584a){const _0x2c3988=a104_0x3d6cf8;var _0x4afc27,_0xeb7dbf;this[_0x2c3988(0x1d6)]=typedi_1[_0x2c3988(0x1a2)][_0x2c3988(0x1c3)](providers_tokens_1[_0x2c3988(0x19f)][_0x2c3988(0x1b4)]),this[_0x2c3988(0x1f8)]=(_0x39584a?_0x39584a+'\x20':'')+'['+commit_components_dto_1[_0x2c3988(0x1fc)][_0x2c3988(0x201)]+']',await this['sfLogger'][_0x2c3988(0x1d0)](this[_0x2c3988(0x1f8)]+_0x2c3988(0x1df));const _0x1c9284=!!((_0x4afc27=_0x389348[_0x2c3988(0x1a0)])===null||_0x4afc27===void 0x0?void 0x0:_0x4afc27[_0x2c3988(0x1b3)])||!!((_0xeb7dbf=_0x389348['components'])===null||_0xeb7dbf===void 0x0?void 0x0:_0xeb7dbf[_0x2c3988(0x1bf)]);if(!_0x1c9284){await this['sfLogger'][_0x2c3988(0x1d0)](this[_0x2c3988(0x1f8)]+_0x2c3988(0x1ca))['send']();return;}this[_0x2c3988(0x199)]=_0x389348,await this[_0x2c3988(0x1c8)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0x3d6cf8(0x1d8)])({'transient':!![]})],CommitComponentsJob),exports[a104_0x3d6cf8(0x1d1)]=CommitComponentsJob;