const a123_0x4aabc7=a123_0xe834;(function(_0xcaf52b,_0x26abcc){const _0x3fd349=a123_0xe834,_0x339c60=_0xcaf52b();while(!![]){try{const _0x4c8356=-parseInt(_0x3fd349(0x213))/0x1+parseInt(_0x3fd349(0x219))/0x2*(parseInt(_0x3fd349(0x1f9))/0x3)+-parseInt(_0x3fd349(0x208))/0x4+parseInt(_0x3fd349(0x21e))/0x5*(-parseInt(_0x3fd349(0x1fe))/0x6)+-parseInt(_0x3fd349(0x1d8))/0x7+-parseInt(_0x3fd349(0x1f2))/0x8+-parseInt(_0x3fd349(0x1cc))/0x9*(-parseInt(_0x3fd349(0x200))/0xa);if(_0x4c8356===_0x26abcc)break;else _0x339c60['push'](_0x339c60['shift']());}catch(_0x505286){_0x339c60['push'](_0x339c60['shift']());}}}(a123_0x1cd2,0xcf1cb));const a123_0x52faae=(function(){let _0x2654f4=!![];return function(_0x30833e,_0x449d0e){const _0x22d6bb=_0x2654f4?function(){const _0x251cda=a123_0xe834;if(_0x449d0e){const _0x276e34=_0x449d0e[_0x251cda(0x1e4)](_0x30833e,arguments);return _0x449d0e=null,_0x276e34;}}:function(){};return _0x2654f4=![],_0x22d6bb;};}()),a123_0x47ae44=a123_0x52faae(this,function(){const _0x437b24=a123_0xe834;return a123_0x47ae44[_0x437b24(0x1e5)]()[_0x437b24(0x1ee)](_0x437b24(0x225))[_0x437b24(0x1e5)]()[_0x437b24(0x218)](a123_0x47ae44)['search'](_0x437b24(0x225));});function a123_0x1cd2(){const _0x4782a2=['create','__esModule','componentsToWrite','function','push','splice','getRemote','recordType','gitUrl','mdapiUtils','configurable','\x20Start\x20converting\x20to\x20SFDX.','copyMdapiTo','cleanUp','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','../../../shared/utils','credentials','sfLogger','\x20Start\x20cloning\x20repository.','writeComponents','\x20Preparing\x20to\x20write\x20components','log','__importDefault','isEmptyDir','__createBinding','../../providers/providers.tokens','componentsToDelete','\x20Prepare\x20mdapi\x20files.','provider','38869587GjreEO','DEFAULT_GIT_USER_EMAIL','includes','ms.\x20Committed\x20components\x20-\x20','../../../../constants','sfdxUtils','getGitShellAuthorizationString','force','Tokens','gitUtils','sort','commitData','2271311uRYlCu','removeDir','startTime','\x20Wrote\x20','components','deleted','../utils/mdapi.utils','path','removeComponents','length','\x20Checking\x20deleted\x20components.','../../internal/fs.internal','apply','toString','prototype','SFDXUtils','../dto/commit-components.dto','replace','\x20Checking\x20written\x20components.','master','copySFDXIgnoredComponents','hasOwnProperty','search','getOwnPropertyDescriptor','isConvertToSfdx','GitProvider','3541320byqToC','writeFlosumComponents','\x20Deleted\x20','join','__importStar','catch','writed','166578JYdUII','getProtocol','reduce','://','now','12qWPXES','\x20components','10LGhYSM','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','send','decorate','default','COMPONENTS_PER_TICK','__decorate','defineProperty','3133008QWXzAs','\x20Nothing\x20to\x20commit.\x20Skip.','\x20Preparing\x20to\x20delete\x20components','../../salesforce/utils/sfdx.utils','createProjectFrom','dir','isSFDXProject','isLoggedIn','GitUtils','groupComponentsByFileName','__setModuleDefault','1252896dpTCgQ','get','../../providers/types/git-provider','fileName','name','constructor','6ZzUeKX','../utils/git.utils','prefix','copyProjectTo','Service','2084510nFLfDZ','CommitComponentsJob','../utils/sfdx.utils','clone','logger','\x20Checking\x20commit\x20components.','exec','(((.+)+)+)+$','writable','error','type'];a123_0x1cd2=function(){return _0x4782a2;};return a123_0x1cd2();}a123_0x47ae44();'use strict';var __createBinding=this&&this[a123_0x4aabc7(0x1c7)]||(Object['create']?function(_0x343656,_0x173b6f,_0x28c663,_0x5caeac){const _0x50c438=a123_0x4aabc7;if(_0x5caeac===undefined)_0x5caeac=_0x28c663;var _0x2e62fc=Object[_0x50c438(0x1ef)](_0x173b6f,_0x28c663);(!_0x2e62fc||(_0x50c438(0x214)in _0x2e62fc?!_0x173b6f[_0x50c438(0x22a)]:_0x2e62fc[_0x50c438(0x226)]||_0x2e62fc[_0x50c438(0x233)]))&&(_0x2e62fc={'enumerable':!![],'get':function(){return _0x173b6f[_0x28c663];}}),Object[_0x50c438(0x207)](_0x343656,_0x5caeac,_0x2e62fc);}:function(_0x3a644a,_0x2c64bf,_0x2b7e70,_0x4f2fb8){if(_0x4f2fb8===undefined)_0x4f2fb8=_0x2b7e70;_0x3a644a[_0x4f2fb8]=_0x2c64bf[_0x2b7e70];}),__setModuleDefault=this&&this[a123_0x4aabc7(0x212)]||(Object[a123_0x4aabc7(0x229)]?function(_0x45e5fe,_0x4dce7c){const _0x490285=a123_0x4aabc7;Object[_0x490285(0x207)](_0x45e5fe,_0x490285(0x204),{'enumerable':!![],'value':_0x4dce7c});}:function(_0xfa9814,_0x4cef0a){_0xfa9814['default']=_0x4cef0a;}),__decorate=this&&this[a123_0x4aabc7(0x206)]||function(_0x534317,_0x44f419,_0x2163dd,_0x21b14e){const _0x172d78=a123_0x4aabc7;var _0x34e4c4=arguments[_0x172d78(0x1e1)],_0x2ff2d3=_0x34e4c4<0x3?_0x44f419:_0x21b14e===null?_0x21b14e=Object['getOwnPropertyDescriptor'](_0x44f419,_0x2163dd):_0x21b14e,_0x5492dc;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x172d78(0x22c))_0x2ff2d3=Reflect[_0x172d78(0x203)](_0x534317,_0x44f419,_0x2163dd,_0x21b14e);else{for(var _0x42f096=_0x534317['length']-0x1;_0x42f096>=0x0;_0x42f096--)if(_0x5492dc=_0x534317[_0x42f096])_0x2ff2d3=(_0x34e4c4<0x3?_0x5492dc(_0x2ff2d3):_0x34e4c4>0x3?_0x5492dc(_0x44f419,_0x2163dd,_0x2ff2d3):_0x5492dc(_0x44f419,_0x2163dd))||_0x2ff2d3;}return _0x34e4c4>0x3&&_0x2ff2d3&&Object[_0x172d78(0x207)](_0x44f419,_0x2163dd,_0x2ff2d3),_0x2ff2d3;},__importStar=this&&this[a123_0x4aabc7(0x1f6)]||function(_0x2f4cb2){const _0x3bf88c=a123_0x4aabc7;if(_0x2f4cb2&&_0x2f4cb2[_0x3bf88c(0x22a)])return _0x2f4cb2;var _0x56e7d3={};if(_0x2f4cb2!=null){for(var _0xde6789 in _0x2f4cb2)if(_0xde6789!==_0x3bf88c(0x204)&&Object[_0x3bf88c(0x1e6)][_0x3bf88c(0x1ed)]['call'](_0x2f4cb2,_0xde6789))__createBinding(_0x56e7d3,_0x2f4cb2,_0xde6789);}return __setModuleDefault(_0x56e7d3,_0x2f4cb2),_0x56e7d3;},__importDefault=this&&this[a123_0x4aabc7(0x1c5)]||function(_0x1a9575){const _0x5e85b5=a123_0x4aabc7;return _0x1a9575&&_0x1a9575[_0x5e85b5(0x22a)]?_0x1a9575:{'default':_0x1a9575};};Object[a123_0x4aabc7(0x207)](exports,a123_0x4aabc7(0x22a),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const commit_components_dto_1=require(a123_0x4aabc7(0x1e8)),events_1=__importDefault(require('events')),git_utils_1=require(a123_0x4aabc7(0x21a)),mdapi_utils_1=require(a123_0x4aabc7(0x1de)),sfdx_utils_1=require(a123_0x4aabc7(0x220)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require(a123_0x4aabc7(0x1be)),constants_1=require(a123_0x4aabc7(0x1d0)),git_provider_1=require(a123_0x4aabc7(0x215)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),sfdx_utils_2=require(a123_0x4aabc7(0x20b)),fs_internal_1=require(a123_0x4aabc7(0x1e3)),path_1=require(a123_0x4aabc7(0x1df)),providers_tokens_1=require(a123_0x4aabc7(0x1c8)),constants_2=require(a123_0x4aabc7(0x1d0));function a123_0xe834(_0x3d8285,_0x198c75){const _0x1a0ea1=a123_0x1cd2();return a123_0xe834=function(_0x47ae44,_0x52faae){_0x47ae44=_0x47ae44-0x1bd;let _0x1cd210=_0x1a0ea1[_0x47ae44];return _0x1cd210;},a123_0xe834(_0x3d8285,_0x198c75);}let CommitComponentsJob=class CommitComponentsJob extends events_1[a123_0x4aabc7(0x204)]{constructor(){const _0xee4d48=a123_0x4aabc7;super(...arguments),this[_0xee4d48(0x205)]=0x3e8,this[_0xee4d48(0x22b)]=0x0,this[_0xee4d48(0x1c9)]=0x0,this[_0xee4d48(0x1da)]=Date[_0xee4d48(0x1fd)]();}async[a123_0x4aabc7(0x22f)](){const _0x42505d=a123_0x4aabc7,{repo:_0x2457e0}=this[_0x42505d(0x1d7)],_0x884073=typedi_1['default']['get'](providers_tokens_1[_0x42505d(0x1d4)][_0x42505d(0x1bf)]);if(this[_0x42505d(0x1d7)][_0x42505d(0x1cb)]===git_provider_1[_0x42505d(0x1f1)]['Bitbucket']){const _0x155dbd=typedi_1[_0x42505d(0x204)]['get'](bitbucket_api_service_1['BitbucketApiService']);await _0x155dbd[_0x42505d(0x20f)]();}return _0x2457e0['gitUrl'][_0x42505d(0x1e9)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x42505d(0x1fa)])(_0x2457e0[_0x42505d(0x231)])+_0x42505d(0x1fc)+_0x884073[_0x42505d(0x1d2)]()+'@');}[a123_0x4aabc7(0x211)](_0x38d50c){const _0x23b2d7=a123_0x4aabc7;var _0x592adc;_0x38d50c[_0x23b2d7(0x1d6)](_0x42e094=>child_types_1[_0x23b2d7(0x204)][_0x23b2d7(0x1ce)](_0x42e094['fileType'])?0x1:-0x1);const _0x181027={};for(const _0x39ec4d of _0x38d50c){_0x181027[_0x592adc=_0x39ec4d[_0x23b2d7(0x216)]]||(_0x181027[_0x592adc]=[]),_0x181027[_0x39ec4d[_0x23b2d7(0x216)]][_0x23b2d7(0x22d)](_0x39ec4d);}return Object['values'](_0x181027)[_0x23b2d7(0x1fb)]((_0x43da11,_0x3bf65a)=>[..._0x43da11,..._0x3bf65a],[]);}async['writeComponents'](_0x43be14){const _0x36da92=a123_0x4aabc7;_0x43be14=this['groupComponentsByFileName'](_0x43be14);let _0x306236=0x0;while(_0x43be14[_0x36da92(0x1e1)]){const _0xdf48bd=_0x43be14[_0x36da92(0x22e)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x36da92(0x232)][_0x36da92(0x1f3)](_0xdf48bd,{'skipChildErrors':this[_0x36da92(0x1d7)]['branch']['name']===_0x36da92(0x1eb),'recordType':this[_0x36da92(0x1d7)][_0x36da92(0x230)]}),_0x306236+=_0xdf48bd['length'],this[_0x36da92(0x1c0)][_0x36da92(0x1c4)](this[_0x36da92(0x21b)]+_0x36da92(0x1db)+_0x306236+'/'+this[_0x36da92(0x22b)]+_0x36da92(0x1ff)),await this[_0x36da92(0x1c0)][_0x36da92(0x202)]();}}async[a123_0x4aabc7(0x1e0)](_0xa2f158){const _0x20ba39=a123_0x4aabc7;_0xa2f158[_0x20ba39(0x1d6)](_0x28047d=>child_types_1[_0x20ba39(0x204)][_0x20ba39(0x1ce)](_0x28047d[_0x20ba39(0x228)])?-0x1:0x1);let _0x239994=0x0;while(_0xa2f158[_0x20ba39(0x1e1)]){const _0x5cad03=_0xa2f158[_0x20ba39(0x22e)](0x0,this[_0x20ba39(0x205)]);await this['mdapiUtils'][_0x20ba39(0x1e0)](_0x5cad03,this[_0x20ba39(0x1d7)][_0x20ba39(0x230)]),_0x239994+=_0x5cad03[_0x20ba39(0x1e1)],this[_0x20ba39(0x1c0)]['log'](this['prefix']+_0x20ba39(0x1f4)+_0x239994+'/'+this['componentsToDelete']+_0x20ba39(0x1ff)),await this['sfLogger'][_0x20ba39(0x202)]();}}async[a123_0x4aabc7(0x236)](){const _0x1de641=a123_0x4aabc7;this[_0x1de641(0x1d5)]&&await this[_0x1de641(0x1d5)][_0x1de641(0x1d9)]()[_0x1de641(0x1f7)](()=>void 0x0),this[_0x1de641(0x232)]&&await this['mdapiUtils']['removeDir']()['catch'](()=>void 0x0),this[_0x1de641(0x1d1)]&&await this[_0x1de641(0x1d1)]['removeDir']()[_0x1de641(0x1f7)](()=>void 0x0);}async[a123_0x4aabc7(0x224)](){const _0x1a60b1=a123_0x4aabc7,{repo:_0x46604d,branch:_0x405bcf,components:_0x501789,convertToSFDX:_0x59a56f,message:_0x1cb455,user:_0x2e8dbf}=this['commitData'];this['mdapiUtils']=new mdapi_utils_1['MDApiUtils'](),this[_0x1a60b1(0x1d5)]=new git_utils_1[(_0x1a60b1(0x210))](await this['getRemote']()),this['sfdxUtils']=new sfdx_utils_1[(_0x1a60b1(0x1e7))]();let _0x57f334=_0x59a56f&&this[_0x1a60b1(0x1d1)][_0x1a60b1(0x1f0)](this[_0x1a60b1(0x1d7)][_0x1a60b1(0x230)]);try{await this[_0x1a60b1(0x1c0)][_0x1a60b1(0x1c4)](this['prefix']+_0x1a60b1(0x1c1))[_0x1a60b1(0x202)](),await this['gitUtils'][_0x1a60b1(0x221)](_0x405bcf[_0x1a60b1(0x217)],_0x46604d[_0x1a60b1(0x217)]);!this[_0x1a60b1(0x1d7)][_0x1a60b1(0x1d3)]?(this['sfLogger'][_0x1a60b1(0x1c4)](this[_0x1a60b1(0x21b)]+_0x1a60b1(0x1ca)),await this[_0x1a60b1(0x232)]['prepareMdapi'](this[_0x1a60b1(0x1d5)][_0x1a60b1(0x20d)])):this['sfLogger']['log'](this[_0x1a60b1(0x21b)]+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this[_0x1a60b1(0x1c0)][_0x1a60b1(0x1c4)](this[_0x1a60b1(0x21b)]+_0x1a60b1(0x1ea))['send']();_0x501789[_0x1a60b1(0x1f8)]&&(this[_0x1a60b1(0x1c0)][_0x1a60b1(0x1c4)](this[_0x1a60b1(0x21b)]+_0x1a60b1(0x1c3)),this['componentsToWrite']=_0x501789[_0x1a60b1(0x1f8)][_0x1a60b1(0x1e1)],await this[_0x1a60b1(0x1c2)](_0x501789[_0x1a60b1(0x1f8)]),await this[_0x1a60b1(0x1c0)][_0x1a60b1(0x202)]());await this[_0x1a60b1(0x1c0)][_0x1a60b1(0x1c4)](this[_0x1a60b1(0x21b)]+_0x1a60b1(0x1e2))[_0x1a60b1(0x202)]();_0x501789['deleted']&&(this[_0x1a60b1(0x1c0)][_0x1a60b1(0x1c4)](this[_0x1a60b1(0x21b)]+_0x1a60b1(0x20a)),this[_0x1a60b1(0x1c9)]=_0x501789[_0x1a60b1(0x1dd)][_0x1a60b1(0x1e1)],await this['removeComponents'](_0x501789[_0x1a60b1(0x1dd)]),await this[_0x1a60b1(0x1c0)]['send']());await this['sfLogger'][_0x1a60b1(0x202)]();const _0x9752ad=await fs_internal_1['FS'][_0x1a60b1(0x1c6)](this[_0x1a60b1(0x1d5)][_0x1a60b1(0x20d)]);await sfdx_utils_2['SFDX'][_0x1a60b1(0x20e)](this[_0x1a60b1(0x1d5)][_0x1a60b1(0x20d)])?(_0x57f334=!![],await fs_internal_1['FS']['removeDir']((0x0,path_1[_0x1a60b1(0x1f5)])(this[_0x1a60b1(0x1d5)]['dir'],'force-app'))):(_0x57f334&&(!_0x9752ad&&(_0x57f334=![])),await this[_0x1a60b1(0x1d5)]['clearDir']());_0x57f334?(await this['sfLogger'][_0x1a60b1(0x1c4)](this[_0x1a60b1(0x21b)]+_0x1a60b1(0x234))[_0x1a60b1(0x202)](),await this[_0x1a60b1(0x1d1)][_0x1a60b1(0x20c)](this['mdapiUtils'][_0x1a60b1(0x20d)]),await this[_0x1a60b1(0x1d1)][_0x1a60b1(0x21c)](this[_0x1a60b1(0x1d5)]['dir'],!_0x9752ad),await this[_0x1a60b1(0x1d1)][_0x1a60b1(0x1ec)](this[_0x1a60b1(0x232)][_0x1a60b1(0x20d)],(0x0,path_1[_0x1a60b1(0x1f5)])(this['gitUtils']['dir'],constants_2['FORCE_APP_DEFAULT_DIR'])),await this[_0x1a60b1(0x1d1)][_0x1a60b1(0x1d9)]()):(await this[_0x1a60b1(0x1c0)]['log'](this[_0x1a60b1(0x21b)]+'\x20Copying\x20mdapi\x20to\x20git\x20folder.')[_0x1a60b1(0x202)](),await this['mdapiUtils'][_0x1a60b1(0x235)](this[_0x1a60b1(0x1d5)][_0x1a60b1(0x20d)]));await this[_0x1a60b1(0x1c0)][_0x1a60b1(0x1c4)](this['prefix']+_0x1a60b1(0x201))[_0x1a60b1(0x202)](),await this[_0x1a60b1(0x1d5)]['commitAndPush'](_0x1cb455,{'email':constants_1[_0x1a60b1(0x1cd)],'name':_0x2e8dbf[_0x1a60b1(0x217)]},_0x405bcf[_0x1a60b1(0x217)]),await this[_0x1a60b1(0x1d5)][_0x1a60b1(0x1d9)](),await this['mdapiUtils'][_0x1a60b1(0x1d9)]();const _0xbd882b=this[_0x1a60b1(0x22b)]+this[_0x1a60b1(0x1c9)];await this[_0x1a60b1(0x1c0)][_0x1a60b1(0x1c4)](this[_0x1a60b1(0x21b)]+_0x1a60b1(0x1bd)+(Date[_0x1a60b1(0x1fd)]()-this['startTime'])+_0x1a60b1(0x1cf)+_0xbd882b+'.')['send']();}catch(_0x2d865f){await this[_0x1a60b1(0x236)](),await this[_0x1a60b1(0x1c0)][_0x1a60b1(0x227)](this[_0x1a60b1(0x21b)]+'\x20'+_0x2d865f)[_0x1a60b1(0x202)]();throw _0x2d865f;}}async['run'](_0x4fd2b2,_0x555ddf){const _0x4678bf=a123_0x4aabc7;var _0x12bfc7,_0x412a72;this['sfLogger']=typedi_1[_0x4678bf(0x204)][_0x4678bf(0x214)](providers_tokens_1[_0x4678bf(0x1d4)][_0x4678bf(0x222)]),this['prefix']=(_0x555ddf?_0x555ddf+'\x20':'')+'['+commit_components_dto_1['CommitComponentsDto'][_0x4678bf(0x217)]+']',await this[_0x4678bf(0x1c0)][_0x4678bf(0x1c4)](this['prefix']+_0x4678bf(0x223));const _0x35f021=!!((_0x12bfc7=_0x4fd2b2[_0x4678bf(0x1dc)])===null||_0x12bfc7===void 0x0?void 0x0:_0x12bfc7[_0x4678bf(0x1f8)])||!!((_0x412a72=_0x4fd2b2[_0x4678bf(0x1dc)])===null||_0x412a72===void 0x0?void 0x0:_0x412a72['deleted']);if(!_0x35f021){await this[_0x4678bf(0x1c0)][_0x4678bf(0x1c4)](this[_0x4678bf(0x21b)]+_0x4678bf(0x209))[_0x4678bf(0x202)]();return;}this['commitData']=_0x4fd2b2,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a123_0x4aabc7(0x21d)])({'transient':!![]})],CommitComponentsJob),exports[a123_0x4aabc7(0x21f)]=CommitComponentsJob;