const a125_0x4b44ba=a125_0x185d;(function(_0x6f684b,_0x967730){const _0x3f12e3=a125_0x185d,_0x530bf4=_0x6f684b();while(!![]){try{const _0x28f6c9=-parseInt(_0x3f12e3(0x151))/0x1+parseInt(_0x3f12e3(0x181))/0x2*(parseInt(_0x3f12e3(0x135))/0x3)+-parseInt(_0x3f12e3(0x111))/0x4*(-parseInt(_0x3f12e3(0x166))/0x5)+parseInt(_0x3f12e3(0x13a))/0x6*(-parseInt(_0x3f12e3(0x131))/0x7)+-parseInt(_0x3f12e3(0x16b))/0x8+parseInt(_0x3f12e3(0x147))/0x9+parseInt(_0x3f12e3(0x14b))/0xa;if(_0x28f6c9===_0x967730)break;else _0x530bf4['push'](_0x530bf4['shift']());}catch(_0x102fdb){_0x530bf4['push'](_0x530bf4['shift']());}}}(a125_0x4bf1,0x8c074));const a125_0x4d5123=(function(){let _0x485337=!![];return function(_0x2bc6c6,_0x52e882){const _0x2aab22=_0x485337?function(){const _0x690e70=a125_0x185d;if(_0x52e882){const _0x4cc7e7=_0x52e882[_0x690e70(0x162)](_0x2bc6c6,arguments);return _0x52e882=null,_0x4cc7e7;}}:function(){};return _0x485337=![],_0x2aab22;};}()),a125_0x58513d=a125_0x4d5123(this,function(){const _0x439a05=a125_0x185d;return a125_0x58513d['toString']()[_0x439a05(0x154)](_0x439a05(0x171))[_0x439a05(0x170)]()[_0x439a05(0x17d)](a125_0x58513d)[_0x439a05(0x154)]('(((.+)+)+)+$');});a125_0x58513d();'use strict';function a125_0x4bf1(){const _0x12488e=['gitUtils','cleanUp','../../parsers/data/child-types','path','fileType','constructor','componentsToDelete','function','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','574rmkaxw','master','copyMdapiTo','../../providers/providers.tokens','\x20components','removeDir','replace','prefix','COMPONENTS_PER_TICK','writeComponents','__importDefault','4258804lKZovR','__setModuleDefault','componentsToWrite','sfdxUtils','FORCE_APP_DEFAULT_DIR','call','logger','DEFAULT_GIT_USER_EMAIL','../../providers/api/bitbucket-api.service','default','typedi','recordType','isSFDXProject','object','copyProjectTo','includes','type','dir','__esModule','\x20Preparing\x20to\x20write\x20components','name','create','isLoggedIn','credentials','join','clone','removeComponents','\x20Nothing\x20to\x20commit.\x20Skip.','provider','length','log','\x20Checking\x20deleted\x20components.','4120823Lwczpn','events','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','MDApiUtils','5511KYiwhX','../../../../constants','groupComponentsByFileName','../utils/git.utils','commitData','6nHqzee','getRemote','hasOwnProperty','force','\x20Start\x20cloning\x20repository.','getProtocol','decorate','../../salesforce/utils/sfdx.utils','ms.\x20Committed\x20components\x20-\x20','sort','../../providers/types/git-provider','\x20Checking\x20written\x20components.','startTime','6317001BaHFLi','mdapiUtils','clearDir','GitUtils','5428090VhqNOZ','exec','\x20Copying\x20mdapi\x20to\x20git\x20folder.','get','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','CommitComponentsDto','638980tpDplK','copySFDXIgnoredComponents','splice','search','error','://','prepareMdapi','components','configurable','gitUrl','writed','\x20Prepare\x20mdapi\x20files.','defineProperty','Tokens','Bitbucket','\x20Start\x20converting\x20to\x20SFDX.','GitProvider','apply','send','../../internal/fs.internal','deleted','5ycowIM','fileName','catch','reduce','createProjectFrom','8283144tiyCHR','SFDXUtils','../utils/sfdx.utils','branch','sfLogger','toString','(((.+)+)+)+$','SFDX','force-app','getGitShellAuthorizationString','CommitComponentsJob','writeFlosumComponents','isConvertToSfdx'];a125_0x4bf1=function(){return _0x12488e;};return a125_0x4bf1();}function a125_0x185d(_0x17561a,_0xd3d46a){const _0x273182=a125_0x4bf1();return a125_0x185d=function(_0x58513d,_0x4d5123){_0x58513d=_0x58513d-0x110;let _0x4bf139=_0x273182[_0x58513d];return _0x4bf139;},a125_0x185d(_0x17561a,_0xd3d46a);}var __createBinding=this&&this['__createBinding']||(Object[a125_0x4b44ba(0x126)]?function(_0x446658,_0x45147f,_0x9c843d,_0x25c854){const _0xef94ae=a125_0x4b44ba;if(_0x25c854===undefined)_0x25c854=_0x9c843d;var _0x1856db=Object['getOwnPropertyDescriptor'](_0x45147f,_0x9c843d);(!_0x1856db||(_0xef94ae(0x14e)in _0x1856db?!_0x45147f[_0xef94ae(0x123)]:_0x1856db['writable']||_0x1856db[_0xef94ae(0x159)]))&&(_0x1856db={'enumerable':!![],'get':function(){return _0x45147f[_0x9c843d];}}),Object[_0xef94ae(0x15d)](_0x446658,_0x25c854,_0x1856db);}:function(_0x1a5ca6,_0x13f3c4,_0x1722e9,_0x1ab14c){if(_0x1ab14c===undefined)_0x1ab14c=_0x1722e9;_0x1a5ca6[_0x1ab14c]=_0x13f3c4[_0x1722e9];}),__setModuleDefault=this&&this[a125_0x4b44ba(0x112)]||(Object[a125_0x4b44ba(0x126)]?function(_0x2dac54,_0x1fe784){const _0x520b35=a125_0x4b44ba;Object[_0x520b35(0x15d)](_0x2dac54,_0x520b35(0x11a),{'enumerable':!![],'value':_0x1fe784});}:function(_0x29ff42,_0x2d2a1b){const _0x5aba68=a125_0x4b44ba;_0x29ff42[_0x5aba68(0x11a)]=_0x2d2a1b;}),__decorate=this&&this['__decorate']||function(_0x48b365,_0x5269a8,_0x1ae95c,_0x2ae031){const _0x469b38=a125_0x4b44ba;var _0x2728ae=arguments[_0x469b38(0x12e)],_0x2e79e8=_0x2728ae<0x3?_0x5269a8:_0x2ae031===null?_0x2ae031=Object['getOwnPropertyDescriptor'](_0x5269a8,_0x1ae95c):_0x2ae031,_0x1f5c9b;if(typeof Reflect===_0x469b38(0x11e)&&typeof Reflect[_0x469b38(0x140)]===_0x469b38(0x17f))_0x2e79e8=Reflect[_0x469b38(0x140)](_0x48b365,_0x5269a8,_0x1ae95c,_0x2ae031);else{for(var _0x1c608c=_0x48b365[_0x469b38(0x12e)]-0x1;_0x1c608c>=0x0;_0x1c608c--)if(_0x1f5c9b=_0x48b365[_0x1c608c])_0x2e79e8=(_0x2728ae<0x3?_0x1f5c9b(_0x2e79e8):_0x2728ae>0x3?_0x1f5c9b(_0x5269a8,_0x1ae95c,_0x2e79e8):_0x1f5c9b(_0x5269a8,_0x1ae95c))||_0x2e79e8;}return _0x2728ae>0x3&&_0x2e79e8&&Object[_0x469b38(0x15d)](_0x5269a8,_0x1ae95c,_0x2e79e8),_0x2e79e8;},__importStar=this&&this['__importStar']||function(_0x3052cf){const _0x265973=a125_0x4b44ba;if(_0x3052cf&&_0x3052cf[_0x265973(0x123)])return _0x3052cf;var _0x12b0ea={};if(_0x3052cf!=null){for(var _0x1e433d in _0x3052cf)if(_0x1e433d!=='default'&&Object['prototype'][_0x265973(0x13c)][_0x265973(0x116)](_0x3052cf,_0x1e433d))__createBinding(_0x12b0ea,_0x3052cf,_0x1e433d);}return __setModuleDefault(_0x12b0ea,_0x3052cf),_0x12b0ea;},__importDefault=this&&this[a125_0x4b44ba(0x110)]||function(_0x5716f5){return _0x5716f5&&_0x5716f5['__esModule']?_0x5716f5:{'default':_0x5716f5};};Object[a125_0x4b44ba(0x15d)](exports,a125_0x4b44ba(0x123),{'value':!![]}),exports[a125_0x4b44ba(0x175)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a125_0x4b44ba(0x132))),git_utils_1=require(a125_0x4b44ba(0x138)),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a125_0x4b44ba(0x16d)),typedi_1=__importStar(require(a125_0x4b44ba(0x11b))),child_types_1=__importDefault(require(a125_0x4b44ba(0x17a))),utils_1=require('../../../shared/utils'),constants_1=require(a125_0x4b44ba(0x136)),git_provider_1=require(a125_0x4b44ba(0x144)),bitbucket_api_service_1=require(a125_0x4b44ba(0x119)),sfdx_utils_2=require(a125_0x4b44ba(0x141)),fs_internal_1=require(a125_0x4b44ba(0x164)),path_1=require(a125_0x4b44ba(0x17b)),providers_tokens_1=require(a125_0x4b44ba(0x184)),constants_2=require(a125_0x4b44ba(0x136));let CommitComponentsJob=class CommitComponentsJob extends events_1[a125_0x4b44ba(0x11a)]{constructor(){const _0x31e11a=a125_0x4b44ba;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this[_0x31e11a(0x113)]=0x0,this[_0x31e11a(0x17e)]=0x0,this[_0x31e11a(0x146)]=Date['now']();}async[a125_0x4b44ba(0x13b)](){const _0x529ca9=a125_0x4b44ba,{repo:_0x27a95d}=this[_0x529ca9(0x139)],_0x281ce7=typedi_1[_0x529ca9(0x11a)]['get'](providers_tokens_1[_0x529ca9(0x15e)][_0x529ca9(0x128)]);if(this[_0x529ca9(0x139)][_0x529ca9(0x12d)]===git_provider_1[_0x529ca9(0x161)][_0x529ca9(0x15f)]){const _0x878c51=typedi_1['default'][_0x529ca9(0x14e)](bitbucket_api_service_1['BitbucketApiService']);await _0x878c51[_0x529ca9(0x127)]();}return _0x27a95d[_0x529ca9(0x15a)][_0x529ca9(0x187)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x529ca9(0x13f)])(_0x27a95d[_0x529ca9(0x15a)])+_0x529ca9(0x156)+_0x281ce7[_0x529ca9(0x174)]()+'@');}[a125_0x4b44ba(0x137)](_0x495666){const _0x35db9b=a125_0x4b44ba;var _0x5e31f6;_0x495666[_0x35db9b(0x143)](_0x355d48=>child_types_1['default'][_0x35db9b(0x120)](_0x355d48[_0x35db9b(0x17c)])?0x1:-0x1);const _0xd97c25={};for(const _0x5d5e5e of _0x495666){_0xd97c25[_0x5e31f6=_0x5d5e5e[_0x35db9b(0x167)]]||(_0xd97c25[_0x5e31f6]=[]),_0xd97c25[_0x5d5e5e[_0x35db9b(0x167)]]['push'](_0x5d5e5e);}return Object['values'](_0xd97c25)[_0x35db9b(0x169)]((_0x3eac34,_0x576ca1)=>[..._0x3eac34,..._0x576ca1],[]);}async[a125_0x4b44ba(0x18a)](_0x173a71){const _0x4ef965=a125_0x4b44ba;_0x173a71=this[_0x4ef965(0x137)](_0x173a71);let _0x4952d6=0x0;while(_0x173a71[_0x4ef965(0x12e)]){const _0x117424=_0x173a71[_0x4ef965(0x153)](0x0,this[_0x4ef965(0x189)]);await this[_0x4ef965(0x148)][_0x4ef965(0x176)](_0x117424,{'skipChildErrors':this[_0x4ef965(0x139)][_0x4ef965(0x16e)][_0x4ef965(0x125)]===_0x4ef965(0x182),'recordType':this[_0x4ef965(0x139)][_0x4ef965(0x11c)]}),_0x4952d6+=_0x117424[_0x4ef965(0x12e)],this[_0x4ef965(0x16f)][_0x4ef965(0x12f)](this[_0x4ef965(0x188)]+'\x20Wrote\x20'+_0x4952d6+'/'+this[_0x4ef965(0x113)]+_0x4ef965(0x185)),await this[_0x4ef965(0x16f)][_0x4ef965(0x163)]();}}async['removeComponents'](_0x6f0225){const _0xb9b839=a125_0x4b44ba;_0x6f0225['sort'](_0x47bc0d=>child_types_1['default'][_0xb9b839(0x120)](_0x47bc0d[_0xb9b839(0x121)])?-0x1:0x1);let _0x2cb7d8=0x0;while(_0x6f0225[_0xb9b839(0x12e)]){const _0x5b60c5=_0x6f0225[_0xb9b839(0x153)](0x0,this[_0xb9b839(0x189)]);await this[_0xb9b839(0x148)][_0xb9b839(0x12b)](_0x5b60c5,this[_0xb9b839(0x139)][_0xb9b839(0x11c)]),_0x2cb7d8+=_0x5b60c5[_0xb9b839(0x12e)],this['sfLogger'][_0xb9b839(0x12f)](this[_0xb9b839(0x188)]+'\x20Deleted\x20'+_0x2cb7d8+'/'+this[_0xb9b839(0x17e)]+_0xb9b839(0x185)),await this[_0xb9b839(0x16f)][_0xb9b839(0x163)]();}}async['cleanUp'](){const _0x3a328b=a125_0x4b44ba;this['gitUtils']&&await this[_0x3a328b(0x178)][_0x3a328b(0x186)]()['catch'](()=>void 0x0),this[_0x3a328b(0x148)]&&await this[_0x3a328b(0x148)][_0x3a328b(0x186)]()[_0x3a328b(0x168)](()=>void 0x0),this['sfdxUtils']&&await this[_0x3a328b(0x114)][_0x3a328b(0x186)]()[_0x3a328b(0x168)](()=>void 0x0);}async[a125_0x4b44ba(0x14c)](){const _0x443dea=a125_0x4b44ba,{repo:_0x237f43,branch:_0x290ec5,components:_0x2cc914,convertToSFDX:_0x55e3ab,message:_0x3c7aee,user:_0x2a3518}=this[_0x443dea(0x139)];this[_0x443dea(0x148)]=new mdapi_utils_1[(_0x443dea(0x134))](),this[_0x443dea(0x178)]=new git_utils_1[(_0x443dea(0x14a))](await this[_0x443dea(0x13b)]()),this[_0x443dea(0x114)]=new sfdx_utils_1[(_0x443dea(0x16c))]();let _0x199ede=_0x55e3ab&&this[_0x443dea(0x114)][_0x443dea(0x177)](this[_0x443dea(0x139)][_0x443dea(0x11c)]);try{await this[_0x443dea(0x16f)][_0x443dea(0x12f)](this[_0x443dea(0x188)]+_0x443dea(0x13e))[_0x443dea(0x163)](),await this[_0x443dea(0x178)][_0x443dea(0x12a)](_0x290ec5[_0x443dea(0x125)],_0x237f43['name']);!this['commitData'][_0x443dea(0x13d)]?(this[_0x443dea(0x16f)][_0x443dea(0x12f)](this['prefix']+_0x443dea(0x15c)),await this[_0x443dea(0x148)][_0x443dea(0x157)](this['gitUtils'][_0x443dea(0x122)])):this[_0x443dea(0x16f)][_0x443dea(0x12f)](this['prefix']+_0x443dea(0x180));await this[_0x443dea(0x16f)][_0x443dea(0x12f)](this[_0x443dea(0x188)]+_0x443dea(0x145))[_0x443dea(0x163)]();_0x2cc914[_0x443dea(0x15b)]&&(this[_0x443dea(0x16f)][_0x443dea(0x12f)](this[_0x443dea(0x188)]+_0x443dea(0x124)),this[_0x443dea(0x113)]=_0x2cc914[_0x443dea(0x15b)]['length'],await this[_0x443dea(0x18a)](_0x2cc914[_0x443dea(0x15b)]),await this[_0x443dea(0x16f)][_0x443dea(0x163)]());await this[_0x443dea(0x16f)][_0x443dea(0x12f)](this['prefix']+_0x443dea(0x130))[_0x443dea(0x163)]();_0x2cc914['deleted']&&(this[_0x443dea(0x16f)][_0x443dea(0x12f)](this[_0x443dea(0x188)]+'\x20Preparing\x20to\x20delete\x20components'),this[_0x443dea(0x17e)]=_0x2cc914[_0x443dea(0x165)][_0x443dea(0x12e)],await this['removeComponents'](_0x2cc914['deleted']),await this['sfLogger'][_0x443dea(0x163)]());await this[_0x443dea(0x16f)]['send']();const _0x3cf4a=await fs_internal_1['FS']['isEmptyDir'](this[_0x443dea(0x178)]['dir']);await sfdx_utils_2[_0x443dea(0x172)][_0x443dea(0x11d)](this[_0x443dea(0x178)][_0x443dea(0x122)])?(_0x199ede=!![],await fs_internal_1['FS'][_0x443dea(0x186)]((0x0,path_1[_0x443dea(0x129)])(this['gitUtils'][_0x443dea(0x122)],_0x443dea(0x173)))):(_0x199ede&&(!_0x3cf4a&&(_0x199ede=![])),await this[_0x443dea(0x178)][_0x443dea(0x149)]());_0x199ede?(await this[_0x443dea(0x16f)][_0x443dea(0x12f)](this[_0x443dea(0x188)]+_0x443dea(0x160))[_0x443dea(0x163)](),await this['sfdxUtils'][_0x443dea(0x16a)](this[_0x443dea(0x148)]['dir']),await this['sfdxUtils'][_0x443dea(0x11f)](this[_0x443dea(0x178)]['dir'],!_0x3cf4a),await this['sfdxUtils'][_0x443dea(0x152)](this['mdapiUtils'][_0x443dea(0x122)],(0x0,path_1[_0x443dea(0x129)])(this[_0x443dea(0x178)]['dir'],constants_2[_0x443dea(0x115)])),await this['sfdxUtils'][_0x443dea(0x186)]()):(await this[_0x443dea(0x16f)][_0x443dea(0x12f)](this[_0x443dea(0x188)]+_0x443dea(0x14d))[_0x443dea(0x163)](),await this[_0x443dea(0x148)][_0x443dea(0x183)](this[_0x443dea(0x178)]['dir']));await this['sfLogger'][_0x443dea(0x12f)](this[_0x443dea(0x188)]+_0x443dea(0x133))[_0x443dea(0x163)](),await this['gitUtils']['commitAndPush'](_0x3c7aee,{'email':constants_1[_0x443dea(0x118)],'name':_0x2a3518[_0x443dea(0x125)]},_0x290ec5[_0x443dea(0x125)]),await this['gitUtils'][_0x443dea(0x186)](),await this[_0x443dea(0x148)][_0x443dea(0x186)]();const _0x4cf624=this[_0x443dea(0x113)]+this[_0x443dea(0x17e)];await this[_0x443dea(0x16f)][_0x443dea(0x12f)](this[_0x443dea(0x188)]+_0x443dea(0x14f)+(Date['now']()-this[_0x443dea(0x146)])+_0x443dea(0x142)+_0x4cf624+'.')[_0x443dea(0x163)]();}catch(_0x59702d){await this[_0x443dea(0x179)](),await this[_0x443dea(0x16f)][_0x443dea(0x155)](this[_0x443dea(0x188)]+'\x20'+_0x59702d)[_0x443dea(0x163)]();throw _0x59702d;}}async['run'](_0x5c5e62,_0x55b67a){const _0x4d4a7b=a125_0x4b44ba;var _0x5ac589,_0x4bcf6f;this[_0x4d4a7b(0x16f)]=typedi_1[_0x4d4a7b(0x11a)][_0x4d4a7b(0x14e)](providers_tokens_1['Tokens'][_0x4d4a7b(0x117)]),this['prefix']=(_0x55b67a?_0x55b67a+'\x20':'')+'['+commit_components_dto_1[_0x4d4a7b(0x150)][_0x4d4a7b(0x125)]+']',await this[_0x4d4a7b(0x16f)]['log'](this[_0x4d4a7b(0x188)]+'\x20Checking\x20commit\x20components.');const _0x197754=!!((_0x5ac589=_0x5c5e62[_0x4d4a7b(0x158)])===null||_0x5ac589===void 0x0?void 0x0:_0x5ac589['writed'])||!!((_0x4bcf6f=_0x5c5e62[_0x4d4a7b(0x158)])===null||_0x4bcf6f===void 0x0?void 0x0:_0x4bcf6f[_0x4d4a7b(0x165)]);if(!_0x197754){await this['sfLogger'][_0x4d4a7b(0x12f)](this[_0x4d4a7b(0x188)]+_0x4d4a7b(0x12c))['send']();return;}this[_0x4d4a7b(0x139)]=_0x5c5e62,await this[_0x4d4a7b(0x14c)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;