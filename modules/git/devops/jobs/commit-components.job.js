const a104_0x4664ed=a104_0x4c69;(function(_0x2908cb,_0x3f2461){const _0x40ea34=a104_0x4c69,_0x13fc6b=_0x2908cb();while(!![]){try{const _0xafbeb=-parseInt(_0x40ea34(0x223))/0x1+-parseInt(_0x40ea34(0x230))/0x2+-parseInt(_0x40ea34(0x1fe))/0x3+parseInt(_0x40ea34(0x209))/0x4*(-parseInt(_0x40ea34(0x239))/0x5)+parseInt(_0x40ea34(0x214))/0x6+parseInt(_0x40ea34(0x252))/0x7*(parseInt(_0x40ea34(0x257))/0x8)+parseInt(_0x40ea34(0x263))/0x9;if(_0xafbeb===_0x3f2461)break;else _0x13fc6b['push'](_0x13fc6b['shift']());}catch(_0x27d353){_0x13fc6b['push'](_0x13fc6b['shift']());}}}(a104_0x39a6,0x2a57f));const a104_0x2ea992=(function(){let _0x27c21f=!![];return function(_0xec532b,_0xd6579e){const _0x313de4=_0x27c21f?function(){const _0x2b6a47=a104_0x4c69;if(_0xd6579e){const _0x1f079d=_0xd6579e[_0x2b6a47(0x247)](_0xec532b,arguments);return _0xd6579e=null,_0x1f079d;}}:function(){};return _0x27c21f=![],_0x313de4;};}()),a104_0x36afe3=a104_0x2ea992(this,function(){const _0x2e12b0=a104_0x4c69;return a104_0x36afe3[_0x2e12b0(0x24c)]()[_0x2e12b0(0x201)](_0x2e12b0(0x207))[_0x2e12b0(0x24c)]()[_0x2e12b0(0x216)](a104_0x36afe3)[_0x2e12b0(0x201)](_0x2e12b0(0x207));});a104_0x36afe3();'use strict';function a104_0x4c69(_0x423f8f,_0x40b41d){const _0x539c6f=a104_0x39a6();return a104_0x4c69=function(_0x36afe3,_0x2ea992){_0x36afe3=_0x36afe3-0x1f2;let _0x39a6d1=_0x539c6f[_0x36afe3];return _0x39a6d1;},a104_0x4c69(_0x423f8f,_0x40b41d);}function a104_0x39a6(){const _0x2a758c=['MDApiUtils','\x20components','../../providers/api/bitbucket-api.service','commitData','\x20Start\x20cloning\x20repository.','copyMdapiTo','path','credentials','splice','334512erZuZp','../../providers/types/git-provider','constructor','../../../../constants','componentsToWrite','writeComponents','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','\x20Checking\x20commit\x20components.','isSFDXProject','../../salesforce/utils/sfdx.utils','catch','join','DEFAULT_GIT_USER_EMAIL','default','isLoggedIn','156357RZAKAm','call','length','../../providers/providers.tokens','prefix','create','components','dir','hasOwnProperty','sfLogger','log','getGitShellAuthorizationString','componentsToDelete','447970QSQtPM','exec','force','replace','../utils/sfdx.utils','type','BitbucketApiService','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','clone','16810MxAONP','object','includes','values','\x20Prepare\x20mdapi\x20files.','copyProjectTo','startTime','Bitbucket','__esModule','gitUrl','decorate','defineProperty','\x20Deleted\x20','deleted','apply','\x20Copying\x20mdapi\x20to\x20git\x20folder.','__setModuleDefault','push','\x20Checking\x20deleted\x20components.','toString','://','GitProvider','COMPONENTS_PER_TICK','../../internal/fs.internal','CommitComponentsDto','7mMxBmT','configurable','../../parsers/data/child-types','send','master','1268408lHWoqf','\x20Checking\x20written\x20components.','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','sfdxUtils','fileType','sort','writable','name','groupComponentsByFileName','now','../../../shared/utils','isEmptyDir','4993155vLeAed','../utils/mdapi.utils','writeFlosumComponents','getOwnPropertyDescriptor','ms.\x20Committed\x20components\x20-\x20','removeComponents','reduce','gitUtils','CommitComponentsJob','../utils/git.utils','getProtocol','removeDir','Tokens','mdapiUtils','get','writed','SFDXUtils','424059PSLhiK','fileName','Service','search','cleanUp','run','\x20Nothing\x20to\x20commit.\x20Skip.','branch','../dto/commit-components.dto','(((.+)+)+)+$','createProjectFrom','88zAuKpf','getRemote'];a104_0x39a6=function(){return _0x2a758c;};return a104_0x39a6();}var __createBinding=this&&this['__createBinding']||(Object[a104_0x4664ed(0x228)]?function(_0x4a9a18,_0x32992a,_0x2c6705,_0x25de82){const _0x38cc63=a104_0x4664ed;if(_0x25de82===undefined)_0x25de82=_0x2c6705;var _0x502bc7=Object[_0x38cc63(0x266)](_0x32992a,_0x2c6705);(!_0x502bc7||('get'in _0x502bc7?!_0x32992a['__esModule']:_0x502bc7[_0x38cc63(0x25d)]||_0x502bc7[_0x38cc63(0x253)]))&&(_0x502bc7={'enumerable':!![],'get':function(){return _0x32992a[_0x2c6705];}}),Object[_0x38cc63(0x244)](_0x4a9a18,_0x25de82,_0x502bc7);}:function(_0x312420,_0x2ed5ea,_0x1ac18d,_0x52a2a2){if(_0x52a2a2===undefined)_0x52a2a2=_0x1ac18d;_0x312420[_0x52a2a2]=_0x2ed5ea[_0x1ac18d];}),__setModuleDefault=this&&this[a104_0x4664ed(0x249)]||(Object[a104_0x4664ed(0x228)]?function(_0x137bbb,_0x4d5dfa){const _0x491f32=a104_0x4664ed;Object['defineProperty'](_0x137bbb,_0x491f32(0x221),{'enumerable':!![],'value':_0x4d5dfa});}:function(_0x37445d,_0x3673c7){const _0x4fe681=a104_0x4664ed;_0x37445d[_0x4fe681(0x221)]=_0x3673c7;}),__decorate=this&&this['__decorate']||function(_0x3f288b,_0x28b1c,_0x10d961,_0x28786d){const _0x23f6b5=a104_0x4664ed;var _0xd71a47=arguments[_0x23f6b5(0x225)],_0x2f7b6d=_0xd71a47<0x3?_0x28b1c:_0x28786d===null?_0x28786d=Object[_0x23f6b5(0x266)](_0x28b1c,_0x10d961):_0x28786d,_0x194926;if(typeof Reflect===_0x23f6b5(0x23a)&&typeof Reflect[_0x23f6b5(0x243)]==='function')_0x2f7b6d=Reflect[_0x23f6b5(0x243)](_0x3f288b,_0x28b1c,_0x10d961,_0x28786d);else{for(var _0x93a374=_0x3f288b['length']-0x1;_0x93a374>=0x0;_0x93a374--)if(_0x194926=_0x3f288b[_0x93a374])_0x2f7b6d=(_0xd71a47<0x3?_0x194926(_0x2f7b6d):_0xd71a47>0x3?_0x194926(_0x28b1c,_0x10d961,_0x2f7b6d):_0x194926(_0x28b1c,_0x10d961))||_0x2f7b6d;}return _0xd71a47>0x3&&_0x2f7b6d&&Object['defineProperty'](_0x28b1c,_0x10d961,_0x2f7b6d),_0x2f7b6d;},__importStar=this&&this['__importStar']||function(_0x50d6ec){const _0x5ca71a=a104_0x4664ed;if(_0x50d6ec&&_0x50d6ec[_0x5ca71a(0x241)])return _0x50d6ec;var _0x28c0bf={};if(_0x50d6ec!=null){for(var _0x476b6d in _0x50d6ec)if(_0x476b6d!=='default'&&Object['prototype'][_0x5ca71a(0x22b)][_0x5ca71a(0x224)](_0x50d6ec,_0x476b6d))__createBinding(_0x28c0bf,_0x50d6ec,_0x476b6d);}return __setModuleDefault(_0x28c0bf,_0x50d6ec),_0x28c0bf;},__importDefault=this&&this['__importDefault']||function(_0x13b689){const _0x5aad9a=a104_0x4664ed;return _0x13b689&&_0x13b689[_0x5aad9a(0x241)]?_0x13b689:{'default':_0x13b689};};Object[a104_0x4664ed(0x244)](exports,'__esModule',{'value':!![]}),exports[a104_0x4664ed(0x1f5)]=void 0x0;const commit_components_dto_1=require(a104_0x4664ed(0x206)),events_1=__importDefault(require('events')),git_utils_1=require(a104_0x4664ed(0x1f6)),mdapi_utils_1=require(a104_0x4664ed(0x264)),sfdx_utils_1=require(a104_0x4664ed(0x234)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a104_0x4664ed(0x254))),utils_1=require(a104_0x4664ed(0x261)),constants_1=require(a104_0x4664ed(0x217)),git_provider_1=require(a104_0x4664ed(0x215)),bitbucket_api_service_1=require(a104_0x4664ed(0x20d)),sfdx_utils_2=require(a104_0x4664ed(0x21d)),fs_internal_1=require(a104_0x4664ed(0x250)),path_1=require(a104_0x4664ed(0x211)),providers_tokens_1=require(a104_0x4664ed(0x226));let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(){const _0x1c630e=a104_0x4664ed;super(...arguments),this[_0x1c630e(0x24f)]=0x3e8,this[_0x1c630e(0x218)]=0x0,this[_0x1c630e(0x22f)]=0x0,this[_0x1c630e(0x23f)]=Date[_0x1c630e(0x260)]();}async[a104_0x4664ed(0x20a)](){const _0x161871=a104_0x4664ed,{repo:_0x5e754d}=this[_0x161871(0x20e)],_0x42e21f=typedi_1['default'][_0x161871(0x1fb)](providers_tokens_1[_0x161871(0x1f9)][_0x161871(0x212)]);if(this[_0x161871(0x20e)]['provider']===git_provider_1[_0x161871(0x24e)][_0x161871(0x240)]){const _0x13e5f4=typedi_1[_0x161871(0x221)][_0x161871(0x1fb)](bitbucket_api_service_1[_0x161871(0x236)]);await _0x13e5f4[_0x161871(0x222)]();}return _0x5e754d[_0x161871(0x242)][_0x161871(0x233)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x161871(0x1f7)])(_0x5e754d[_0x161871(0x242)])+_0x161871(0x24d)+_0x42e21f[_0x161871(0x22e)]()+'@');}[a104_0x4664ed(0x25f)](_0x2b518d){const _0x37439b=a104_0x4664ed;var _0x5d154b;_0x2b518d['sort'](_0x4d44d3=>child_types_1['default'][_0x37439b(0x23b)](_0x4d44d3[_0x37439b(0x25b)])?0x1:-0x1);const _0x5c72df={};for(const _0x27b0c5 of _0x2b518d){_0x5c72df[_0x5d154b=_0x27b0c5[_0x37439b(0x1ff)]]||(_0x5c72df[_0x5d154b]=[]),_0x5c72df[_0x27b0c5['fileName']][_0x37439b(0x24a)](_0x27b0c5);}return Object[_0x37439b(0x23c)](_0x5c72df)[_0x37439b(0x1f3)]((_0x4e47eb,_0x13561c)=>[..._0x4e47eb,..._0x13561c],[]);}async['writeComponents'](_0x5a8b07){const _0x38b7c4=a104_0x4664ed;_0x5a8b07=this[_0x38b7c4(0x25f)](_0x5a8b07);let _0x2867e9=0x0;while(_0x5a8b07['length']){const _0x4d7b12=_0x5a8b07[_0x38b7c4(0x213)](0x0,this[_0x38b7c4(0x24f)]);await this[_0x38b7c4(0x1fa)][_0x38b7c4(0x265)](_0x4d7b12,{'skipChildErrors':this[_0x38b7c4(0x20e)][_0x38b7c4(0x205)]['name']===_0x38b7c4(0x256)}),_0x2867e9+=_0x4d7b12['length'],this[_0x38b7c4(0x22c)][_0x38b7c4(0x22d)](this[_0x38b7c4(0x227)]+'\x20Wrote\x20'+_0x2867e9+'/'+this['componentsToWrite']+_0x38b7c4(0x20c)),await this[_0x38b7c4(0x22c)][_0x38b7c4(0x255)]();}}async[a104_0x4664ed(0x1f2)](_0xa5b441){const _0x39b062=a104_0x4664ed;_0xa5b441[_0x39b062(0x25c)](_0x16a545=>child_types_1[_0x39b062(0x221)]['includes'](_0x16a545[_0x39b062(0x235)])?-0x1:0x1);let _0x1f305d=0x0;while(_0xa5b441[_0x39b062(0x225)]){const _0x52efcd=_0xa5b441[_0x39b062(0x213)](0x0,this[_0x39b062(0x24f)]);await this[_0x39b062(0x1fa)][_0x39b062(0x1f2)](_0x52efcd),_0x1f305d+=_0x52efcd[_0x39b062(0x225)],this['sfLogger'][_0x39b062(0x22d)](this[_0x39b062(0x227)]+_0x39b062(0x245)+_0x1f305d+'/'+this[_0x39b062(0x22f)]+_0x39b062(0x20c)),await this['sfLogger'][_0x39b062(0x255)]();}}async[a104_0x4664ed(0x202)](){const _0x41d17a=a104_0x4664ed;this[_0x41d17a(0x1f4)]&&await this[_0x41d17a(0x1f4)]['removeDir']()[_0x41d17a(0x21e)](()=>void 0x0),this[_0x41d17a(0x1fa)]&&await this['mdapiUtils'][_0x41d17a(0x1f8)]()[_0x41d17a(0x21e)](()=>void 0x0),this[_0x41d17a(0x25a)]&&await this[_0x41d17a(0x25a)][_0x41d17a(0x1f8)]()[_0x41d17a(0x21e)](()=>void 0x0);}async[a104_0x4664ed(0x231)](){const _0x5487d7=a104_0x4664ed,{repo:_0x484edf,branch:_0x488650,components:_0x16c84b,convertToSFDX:_0x324792,message:_0x3852ed,user:_0x42b925}=this[_0x5487d7(0x20e)];this[_0x5487d7(0x1fa)]=new mdapi_utils_1[(_0x5487d7(0x20b))](),this[_0x5487d7(0x1f4)]=new git_utils_1['GitUtils'](await this[_0x5487d7(0x20a)]()),this[_0x5487d7(0x25a)]=new sfdx_utils_1[(_0x5487d7(0x1fd))]();let _0x406325=_0x324792;try{await this['sfLogger']['log'](this[_0x5487d7(0x227)]+_0x5487d7(0x20f))['send'](),await this[_0x5487d7(0x1f4)][_0x5487d7(0x238)](_0x488650[_0x5487d7(0x25e)],_0x484edf[_0x5487d7(0x25e)]);!this['commitData'][_0x5487d7(0x232)]?(this[_0x5487d7(0x22c)][_0x5487d7(0x22d)](this[_0x5487d7(0x227)]+_0x5487d7(0x23d)),await this['mdapiUtils']['prepareMdapi'](this['gitUtils']['dir'])):this['sfLogger'][_0x5487d7(0x22d)](this[_0x5487d7(0x227)]+_0x5487d7(0x21a));await this['sfLogger']['log'](this[_0x5487d7(0x227)]+_0x5487d7(0x258))[_0x5487d7(0x255)]();_0x16c84b[_0x5487d7(0x1fc)]&&(this[_0x5487d7(0x22c)][_0x5487d7(0x22d)](this[_0x5487d7(0x227)]+'\x20Preparing\x20to\x20write\x20components'),this[_0x5487d7(0x218)]=_0x16c84b[_0x5487d7(0x1fc)]['length'],await this[_0x5487d7(0x219)](_0x16c84b[_0x5487d7(0x1fc)]),await this['sfLogger'][_0x5487d7(0x255)]());await this['sfLogger'][_0x5487d7(0x22d)](this['prefix']+_0x5487d7(0x24b))[_0x5487d7(0x255)]();_0x16c84b['deleted']&&(this[_0x5487d7(0x22c)][_0x5487d7(0x22d)](this['prefix']+'\x20Preparing\x20to\x20delete\x20components'),this[_0x5487d7(0x22f)]=_0x16c84b[_0x5487d7(0x246)][_0x5487d7(0x225)],await this[_0x5487d7(0x1f2)](_0x16c84b[_0x5487d7(0x246)]),await this[_0x5487d7(0x22c)][_0x5487d7(0x255)]());await this[_0x5487d7(0x22c)][_0x5487d7(0x255)]();const _0x5cdd7d=await fs_internal_1['FS'][_0x5487d7(0x262)](this['gitUtils'][_0x5487d7(0x22a)]);await sfdx_utils_2['SFDX'][_0x5487d7(0x21c)](this[_0x5487d7(0x1f4)][_0x5487d7(0x22a)])?(_0x406325=!![],await fs_internal_1['FS']['removeDir']((0x0,path_1[_0x5487d7(0x21f)])(this[_0x5487d7(0x1f4)][_0x5487d7(0x22a)],'force-app'))):(_0x406325&&(!_0x5cdd7d&&(_0x406325=![])),await this[_0x5487d7(0x1f4)]['clearDir']());_0x406325?(await this[_0x5487d7(0x22c)][_0x5487d7(0x22d)](this['prefix']+'\x20Start\x20converting\x20to\x20SFDX.')[_0x5487d7(0x255)](),await this['sfdxUtils'][_0x5487d7(0x208)](this[_0x5487d7(0x1fa)][_0x5487d7(0x22a)]),await this[_0x5487d7(0x25a)][_0x5487d7(0x23e)](this['gitUtils'][_0x5487d7(0x22a)],!_0x5cdd7d),await this['sfdxUtils'][_0x5487d7(0x1f8)]()):(await this[_0x5487d7(0x22c)]['log'](this[_0x5487d7(0x227)]+_0x5487d7(0x248))[_0x5487d7(0x255)](),await this[_0x5487d7(0x1fa)][_0x5487d7(0x210)](this[_0x5487d7(0x1f4)][_0x5487d7(0x22a)]));await this[_0x5487d7(0x22c)]['log'](this['prefix']+_0x5487d7(0x237))[_0x5487d7(0x255)](),await this[_0x5487d7(0x1f4)]['commitAndPush'](_0x3852ed,{'email':constants_1[_0x5487d7(0x220)],'name':_0x42b925[_0x5487d7(0x25e)]},_0x488650[_0x5487d7(0x25e)]),await this[_0x5487d7(0x1f4)][_0x5487d7(0x1f8)](),await this[_0x5487d7(0x1fa)][_0x5487d7(0x1f8)]();const _0x194445=this[_0x5487d7(0x218)]+this[_0x5487d7(0x22f)];await this[_0x5487d7(0x22c)][_0x5487d7(0x22d)](this['prefix']+_0x5487d7(0x259)+(Date[_0x5487d7(0x260)]()-this[_0x5487d7(0x23f)])+_0x5487d7(0x267)+_0x194445+'.')[_0x5487d7(0x255)]();}catch(_0x3219d1){await this['cleanUp'](),await this[_0x5487d7(0x22c)]['error'](this[_0x5487d7(0x227)]+'\x20'+_0x3219d1)[_0x5487d7(0x255)]();throw _0x3219d1;}}async[a104_0x4664ed(0x203)](_0x59a6ec,_0x2e48a6){const _0x5a18e5=a104_0x4664ed;var _0x2500c0,_0x45991d;this[_0x5a18e5(0x22c)]=typedi_1[_0x5a18e5(0x221)][_0x5a18e5(0x1fb)](providers_tokens_1[_0x5a18e5(0x1f9)]['logger']),this['prefix']=(_0x2e48a6?_0x2e48a6+'\x20':'')+'['+commit_components_dto_1[_0x5a18e5(0x251)][_0x5a18e5(0x25e)]+']',await this[_0x5a18e5(0x22c)][_0x5a18e5(0x22d)](this[_0x5a18e5(0x227)]+_0x5a18e5(0x21b));const _0x5017f6=!!((_0x2500c0=_0x59a6ec[_0x5a18e5(0x229)])===null||_0x2500c0===void 0x0?void 0x0:_0x2500c0[_0x5a18e5(0x1fc)])||!!((_0x45991d=_0x59a6ec[_0x5a18e5(0x229)])===null||_0x45991d===void 0x0?void 0x0:_0x45991d['deleted']);if(!_0x5017f6){await this[_0x5a18e5(0x22c)][_0x5a18e5(0x22d)](this['prefix']+_0x5a18e5(0x204))['send']();return;}this[_0x5a18e5(0x20e)]=_0x59a6ec,await this[_0x5a18e5(0x231)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0x4664ed(0x200)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;