function a124_0x428f(_0x5a6ae3,_0x368625){const _0xde0004=a124_0x419d();return a124_0x428f=function(_0x3d0e85,_0x48594a){_0x3d0e85=_0x3d0e85-0x1d5;let _0x419d8e=_0xde0004[_0x3d0e85];return _0x419d8e;},a124_0x428f(_0x5a6ae3,_0x368625);}const a124_0x4745b4=a124_0x428f;(function(_0x3ca58d,_0x4d6dac){const _0x30b847=a124_0x428f,_0x6632e5=_0x3ca58d();while(!![]){try{const _0x258e01=parseInt(_0x30b847(0x1ec))/0x1*(parseInt(_0x30b847(0x217))/0x2)+-parseInt(_0x30b847(0x20c))/0x3*(-parseInt(_0x30b847(0x20d))/0x4)+parseInt(_0x30b847(0x202))/0x5*(-parseInt(_0x30b847(0x210))/0x6)+-parseInt(_0x30b847(0x1f4))/0x7+-parseInt(_0x30b847(0x230))/0x8+-parseInt(_0x30b847(0x21b))/0x9+parseInt(_0x30b847(0x223))/0xa;if(_0x258e01===_0x4d6dac)break;else _0x6632e5['push'](_0x6632e5['shift']());}catch(_0x432933){_0x6632e5['push'](_0x6632e5['shift']());}}}(a124_0x419d,0xe4d34));const a124_0x48594a=(function(){let _0xf19bd=!![];return function(_0x1e83a7,_0x3a913e){const _0x3c81f6=_0xf19bd?function(){if(_0x3a913e){const _0x5179a7=_0x3a913e['apply'](_0x1e83a7,arguments);return _0x3a913e=null,_0x5179a7;}}:function(){};return _0xf19bd=![],_0x3c81f6;};}()),a124_0x3d0e85=a124_0x48594a(this,function(){const _0x321ba4=a124_0x428f;return a124_0x3d0e85['toString']()[_0x321ba4(0x1f2)]('(((.+)+)+)+$')[_0x321ba4(0x22f)]()[_0x321ba4(0x1fe)](a124_0x3d0e85)[_0x321ba4(0x1f2)](_0x321ba4(0x1e7));});a124_0x3d0e85();'use strict';var __createBinding=this&&this[a124_0x4745b4(0x22b)]||(Object[a124_0x4745b4(0x211)]?function(_0x481eda,_0x156663,_0x6d191a,_0x303c78){const _0x25e5d6=a124_0x4745b4;if(_0x303c78===undefined)_0x303c78=_0x6d191a;var _0x3cef6e=Object['getOwnPropertyDescriptor'](_0x156663,_0x6d191a);(!_0x3cef6e||(_0x25e5d6(0x206)in _0x3cef6e?!_0x156663[_0x25e5d6(0x21c)]:_0x3cef6e[_0x25e5d6(0x1e4)]||_0x3cef6e['configurable']))&&(_0x3cef6e={'enumerable':!![],'get':function(){return _0x156663[_0x6d191a];}}),Object[_0x25e5d6(0x219)](_0x481eda,_0x303c78,_0x3cef6e);}:function(_0x5a222e,_0x539256,_0x57240f,_0x3d2e27){if(_0x3d2e27===undefined)_0x3d2e27=_0x57240f;_0x5a222e[_0x3d2e27]=_0x539256[_0x57240f];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x2c82e2,_0x87e204){const _0xdd234a=a124_0x4745b4;Object[_0xdd234a(0x219)](_0x2c82e2,'default',{'enumerable':!![],'value':_0x87e204});}:function(_0x1c26e5,_0x46e7d8){_0x1c26e5['default']=_0x46e7d8;}),__decorate=this&&this['__decorate']||function(_0x437ae3,_0x2c36a2,_0x4c3266,_0x691610){const _0x55708a=a124_0x4745b4;var _0x241d2c=arguments['length'],_0x481435=_0x241d2c<0x3?_0x2c36a2:_0x691610===null?_0x691610=Object[_0x55708a(0x1fb)](_0x2c36a2,_0x4c3266):_0x691610,_0xb90080;if(typeof Reflect===_0x55708a(0x1fc)&&typeof Reflect['decorate']===_0x55708a(0x1d7))_0x481435=Reflect['decorate'](_0x437ae3,_0x2c36a2,_0x4c3266,_0x691610);else{for(var _0x16f4df=_0x437ae3[_0x55708a(0x246)]-0x1;_0x16f4df>=0x0;_0x16f4df--)if(_0xb90080=_0x437ae3[_0x16f4df])_0x481435=(_0x241d2c<0x3?_0xb90080(_0x481435):_0x241d2c>0x3?_0xb90080(_0x2c36a2,_0x4c3266,_0x481435):_0xb90080(_0x2c36a2,_0x4c3266))||_0x481435;}return _0x241d2c>0x3&&_0x481435&&Object[_0x55708a(0x219)](_0x2c36a2,_0x4c3266,_0x481435),_0x481435;},__importStar=this&&this[a124_0x4745b4(0x1ff)]||function(_0x43fb96){const _0x243163=a124_0x4745b4;if(_0x43fb96&&_0x43fb96[_0x243163(0x21c)])return _0x43fb96;var _0x4e42f8={};if(_0x43fb96!=null){for(var _0x11d05a in _0x43fb96)if(_0x11d05a!==_0x243163(0x216)&&Object[_0x243163(0x1f6)][_0x243163(0x228)][_0x243163(0x243)](_0x43fb96,_0x11d05a))__createBinding(_0x4e42f8,_0x43fb96,_0x11d05a);}return __setModuleDefault(_0x4e42f8,_0x43fb96),_0x4e42f8;},__importDefault=this&&this['__importDefault']||function(_0x2904e8){return _0x2904e8&&_0x2904e8['__esModule']?_0x2904e8:{'default':_0x2904e8};};Object[a124_0x4745b4(0x219)](exports,a124_0x4745b4(0x21c),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const commit_components_dto_1=require(a124_0x4745b4(0x208)),events_1=__importDefault(require(a124_0x4745b4(0x215))),git_utils_1=require(a124_0x4745b4(0x244)),mdapi_utils_1=require(a124_0x4745b4(0x1ea)),sfdx_utils_1=require(a124_0x4745b4(0x212)),typedi_1=__importStar(require(a124_0x4745b4(0x1f7))),child_types_1=__importDefault(require(a124_0x4745b4(0x20a))),utils_1=require('../../../shared/utils'),constants_1=require(a124_0x4745b4(0x234)),git_provider_1=require(a124_0x4745b4(0x1e2)),bitbucket_api_service_1=require(a124_0x4745b4(0x245)),sfdx_utils_2=require('../../salesforce/utils/sfdx.utils'),fs_internal_1=require(a124_0x4745b4(0x204)),path_1=require(a124_0x4745b4(0x1db)),providers_tokens_1=require('../../providers/providers.tokens'),constants_2=require(a124_0x4745b4(0x234));let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(){const _0x3b38a0=a124_0x4745b4;super(...arguments),this[_0x3b38a0(0x21d)]=0x3e8,this[_0x3b38a0(0x242)]=0x0,this[_0x3b38a0(0x218)]=0x0,this[_0x3b38a0(0x1ed)]=Date['now']();}async['getRemote'](){const _0x4399be=a124_0x4745b4,{repo:_0x235f40}=this[_0x4399be(0x233)],_0x2f3eb8=typedi_1[_0x4399be(0x216)][_0x4399be(0x206)](providers_tokens_1[_0x4399be(0x236)][_0x4399be(0x1e8)]);if(this['commitData']['provider']===git_provider_1[_0x4399be(0x23a)][_0x4399be(0x238)]){const _0x1fbcbb=typedi_1[_0x4399be(0x216)][_0x4399be(0x206)](bitbucket_api_service_1[_0x4399be(0x1f5)]);await _0x1fbcbb[_0x4399be(0x232)]();}return _0x235f40[_0x4399be(0x1df)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x4399be(0x200)])(_0x235f40[_0x4399be(0x1df)])+_0x4399be(0x22c)+_0x2f3eb8[_0x4399be(0x21f)]()+'@');}['groupComponentsByFileName'](_0x2eaed1){const _0x5dd2ac=a124_0x4745b4;var _0x5565a8;_0x2eaed1['sort'](_0x17cf7a=>child_types_1[_0x5dd2ac(0x216)][_0x5dd2ac(0x1fa)](_0x17cf7a[_0x5dd2ac(0x1e1)])?0x1:-0x1);const _0x1f0903={};for(const _0x497680 of _0x2eaed1){_0x1f0903[_0x5565a8=_0x497680['fileName']]||(_0x1f0903[_0x5565a8]=[]),_0x1f0903[_0x497680[_0x5dd2ac(0x1f9)]]['push'](_0x497680);}return Object[_0x5dd2ac(0x240)](_0x1f0903)['reduce']((_0x39192a,_0x248f63)=>[..._0x39192a,..._0x248f63],[]);}async[a124_0x4745b4(0x226)](_0x5b9714){const _0x390332=a124_0x4745b4;_0x5b9714=this[_0x390332(0x1e5)](_0x5b9714);let _0xc7710d=0x0;while(_0x5b9714[_0x390332(0x246)]){const _0x383c56=_0x5b9714[_0x390332(0x20e)](0x0,this[_0x390332(0x21d)]);await this[_0x390332(0x22e)]['writeFlosumComponents'](_0x383c56,{'skipChildErrors':this['commitData'][_0x390332(0x213)][_0x390332(0x1de)]===_0x390332(0x1d8),'recordType':this['commitData']['recordType']}),_0xc7710d+=_0x383c56[_0x390332(0x246)],this[_0x390332(0x207)]['log'](this['prefix']+_0x390332(0x235)+_0xc7710d+'/'+this[_0x390332(0x242)]+'\x20components'),await this[_0x390332(0x207)][_0x390332(0x1e0)]();}}async[a124_0x4745b4(0x1e6)](_0x20d945){const _0x2c629a=a124_0x4745b4;_0x20d945[_0x2c629a(0x1f1)](_0x2903e0=>child_types_1[_0x2c629a(0x216)][_0x2c629a(0x1fa)](_0x2903e0['type'])?-0x1:0x1);let _0x28f25a=0x0;while(_0x20d945['length']){const _0x2dfc8d=_0x20d945[_0x2c629a(0x20e)](0x0,this['COMPONENTS_PER_TICK']);await this['mdapiUtils'][_0x2c629a(0x1e6)](_0x2dfc8d,this[_0x2c629a(0x233)]['recordType']),_0x28f25a+=_0x2dfc8d[_0x2c629a(0x246)],this['sfLogger'][_0x2c629a(0x222)](this['prefix']+_0x2c629a(0x1dd)+_0x28f25a+'/'+this[_0x2c629a(0x218)]+'\x20components'),await this[_0x2c629a(0x207)]['send']();}}async[a124_0x4745b4(0x23f)](){const _0x62b79d=a124_0x4745b4;this['gitUtils']&&await this[_0x62b79d(0x205)]['removeDir']()[_0x62b79d(0x239)](()=>void 0x0),this[_0x62b79d(0x22e)]&&await this['mdapiUtils'][_0x62b79d(0x22d)]()[_0x62b79d(0x239)](()=>void 0x0),this[_0x62b79d(0x1ee)]&&await this[_0x62b79d(0x1ee)][_0x62b79d(0x22d)]()[_0x62b79d(0x239)](()=>void 0x0);}async['exec'](){const _0x559d13=a124_0x4745b4,{repo:_0x10d9ea,branch:_0x13ae0f,components:_0x4a9896,convertToSFDX:_0x16346e,message:_0x4e70f1,user:_0x2ae01d}=this[_0x559d13(0x233)];this['mdapiUtils']=new mdapi_utils_1[(_0x559d13(0x220))](),this[_0x559d13(0x205)]=new git_utils_1['GitUtils'](await this[_0x559d13(0x1da)]()),this[_0x559d13(0x1ee)]=new sfdx_utils_1[(_0x559d13(0x23d))]();let _0x254177=_0x16346e&&this[_0x559d13(0x1ee)][_0x559d13(0x1e9)](this[_0x559d13(0x233)][_0x559d13(0x248)]);try{await this[_0x559d13(0x207)]['log'](this['prefix']+_0x559d13(0x221))[_0x559d13(0x1e0)](),await this[_0x559d13(0x205)][_0x559d13(0x23b)](_0x13ae0f[_0x559d13(0x1de)],_0x10d9ea['name']);!this[_0x559d13(0x233)][_0x559d13(0x209)]?(this['sfLogger']['log'](this[_0x559d13(0x20f)]+_0x559d13(0x227)),await this[_0x559d13(0x22e)][_0x559d13(0x23c)](this[_0x559d13(0x205)][_0x559d13(0x1d6)])):this[_0x559d13(0x207)][_0x559d13(0x222)](this['prefix']+_0x559d13(0x247));await this[_0x559d13(0x207)]['log'](this[_0x559d13(0x20f)]+'\x20Checking\x20written\x20components.')['send']();_0x4a9896[_0x559d13(0x214)]&&(this[_0x559d13(0x207)][_0x559d13(0x222)](this[_0x559d13(0x20f)]+_0x559d13(0x201)),this[_0x559d13(0x242)]=_0x4a9896[_0x559d13(0x214)][_0x559d13(0x246)],await this['writeComponents'](_0x4a9896[_0x559d13(0x214)]),await this[_0x559d13(0x207)][_0x559d13(0x1e0)]());await this[_0x559d13(0x207)][_0x559d13(0x222)](this[_0x559d13(0x20f)]+_0x559d13(0x23e))['send']();_0x4a9896[_0x559d13(0x1e3)]&&(this[_0x559d13(0x207)][_0x559d13(0x222)](this['prefix']+_0x559d13(0x1eb)),this[_0x559d13(0x218)]=_0x4a9896[_0x559d13(0x1e3)][_0x559d13(0x246)],await this[_0x559d13(0x1e6)](_0x4a9896['deleted']),await this[_0x559d13(0x207)]['send']());await this[_0x559d13(0x207)][_0x559d13(0x1e0)]();const _0x488230=await fs_internal_1['FS'][_0x559d13(0x229)](this['gitUtils']['dir']);await sfdx_utils_2['SFDX'][_0x559d13(0x1d5)](this['gitUtils'][_0x559d13(0x1d6)])?(_0x254177=!![],await fs_internal_1['FS'][_0x559d13(0x22d)]((0x0,path_1[_0x559d13(0x224)])(this[_0x559d13(0x205)]['dir'],'force-app'))):(_0x254177&&(!_0x488230&&(_0x254177=![])),await this[_0x559d13(0x205)]['clearDir']());_0x254177?(await this[_0x559d13(0x207)][_0x559d13(0x222)](this[_0x559d13(0x20f)]+_0x559d13(0x20b))[_0x559d13(0x1e0)](),await this[_0x559d13(0x1ee)][_0x559d13(0x1fd)](this[_0x559d13(0x22e)][_0x559d13(0x1d6)]),await this[_0x559d13(0x1ee)][_0x559d13(0x1f8)](this['gitUtils']['dir'],!_0x488230),await this[_0x559d13(0x1ee)]['copySFDXIgnoredComponents'](this[_0x559d13(0x22e)]['dir'],(0x0,path_1['join'])(this[_0x559d13(0x205)]['dir'],constants_2[_0x559d13(0x1f3)])),await this[_0x559d13(0x1ee)]['removeDir']()):(await this[_0x559d13(0x207)][_0x559d13(0x222)](this[_0x559d13(0x20f)]+_0x559d13(0x237))[_0x559d13(0x1e0)](),await this[_0x559d13(0x22e)]['copyMdapiTo'](this[_0x559d13(0x205)][_0x559d13(0x1d6)]));await this[_0x559d13(0x207)][_0x559d13(0x222)](this[_0x559d13(0x20f)]+_0x559d13(0x231))[_0x559d13(0x1e0)](),await this[_0x559d13(0x205)][_0x559d13(0x225)](_0x4e70f1,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x2ae01d[_0x559d13(0x1de)]},_0x13ae0f[_0x559d13(0x1de)]),await this[_0x559d13(0x205)][_0x559d13(0x22d)](),await this[_0x559d13(0x22e)]['removeDir']();const _0x1c3feb=this[_0x559d13(0x242)]+this[_0x559d13(0x218)];await this[_0x559d13(0x207)]['log'](this['prefix']+_0x559d13(0x22a)+(Date[_0x559d13(0x203)]()-this[_0x559d13(0x1ed)])+_0x559d13(0x21e)+_0x1c3feb+'.')[_0x559d13(0x1e0)]();}catch(_0x59b8a1){await this['cleanUp'](),await this[_0x559d13(0x207)]['error'](this[_0x559d13(0x20f)]+'\x20'+_0x59b8a1)[_0x559d13(0x1e0)]();throw _0x59b8a1;}}async[a124_0x4745b4(0x1d9)](_0x12fcb9,_0x1b8e45){const _0x166c14=a124_0x4745b4;var _0x13f898,_0x3030f6;this[_0x166c14(0x207)]=typedi_1[_0x166c14(0x216)]['get'](providers_tokens_1[_0x166c14(0x236)]['logger']),this[_0x166c14(0x20f)]=(_0x1b8e45?_0x1b8e45+'\x20':'')+'['+commit_components_dto_1[_0x166c14(0x1ef)]['name']+']',await this[_0x166c14(0x207)][_0x166c14(0x222)](this[_0x166c14(0x20f)]+'\x20Checking\x20commit\x20components.');const _0xcfba5=!!((_0x13f898=_0x12fcb9[_0x166c14(0x21a)])===null||_0x13f898===void 0x0?void 0x0:_0x13f898['writed'])||!!((_0x3030f6=_0x12fcb9['components'])===null||_0x3030f6===void 0x0?void 0x0:_0x3030f6['deleted']);if(!_0xcfba5){await this[_0x166c14(0x207)][_0x166c14(0x222)](this[_0x166c14(0x20f)]+'\x20Nothing\x20to\x20commit.\x20Skip.')[_0x166c14(0x1e0)]();return;}this[_0x166c14(0x233)]=_0x12fcb9,await this[_0x166c14(0x241)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a124_0x4745b4(0x1dc)])({'transient':!![]})],CommitComponentsJob),exports[a124_0x4745b4(0x1f0)]=CommitComponentsJob;function a124_0x419d(){const _0x19ab7e=['\x20Preparing\x20to\x20delete\x20components','3jijPbX','startTime','sfdxUtils','CommitComponentsDto','CommitComponentsJob','sort','search','FORCE_APP_DEFAULT_DIR','6320713mgiKGW','BitbucketApiService','prototype','typedi','copyProjectTo','fileName','includes','getOwnPropertyDescriptor','object','createProjectFrom','constructor','__importStar','getProtocol','\x20Preparing\x20to\x20write\x20components','665MFXTCL','now','../../internal/fs.internal','gitUtils','get','sfLogger','../dto/commit-components.dto','force','../../parsers/data/child-types','\x20Start\x20converting\x20to\x20SFDX.','1590JANkDr','5956IfClPt','splice','prefix','2556NHhinW','create','../utils/sfdx.utils','branch','writed','events','default','509300jAPpun','componentsToDelete','defineProperty','components','6289632vuwDjc','__esModule','COMPONENTS_PER_TICK','ms.\x20Committed\x20components\x20-\x20','getGitShellAuthorizationString','MDApiUtils','\x20Start\x20cloning\x20repository.','log','28162230IQWdgP','join','commitAndPush','writeComponents','\x20Prepare\x20mdapi\x20files.','hasOwnProperty','isEmptyDir','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','__createBinding','://','removeDir','mdapiUtils','toString','14188880eYLQpX','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','isLoggedIn','commitData','../../../../constants','\x20Wrote\x20','Tokens','\x20Copying\x20mdapi\x20to\x20git\x20folder.','Bitbucket','catch','GitProvider','clone','prepareMdapi','SFDXUtils','\x20Checking\x20deleted\x20components.','cleanUp','values','exec','componentsToWrite','call','../utils/git.utils','../../providers/api/bitbucket-api.service','length','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','recordType','isSFDXProject','dir','function','master','run','getRemote','path','Service','\x20Deleted\x20','name','gitUrl','send','fileType','../../providers/types/git-provider','deleted','writable','groupComponentsByFileName','removeComponents','(((.+)+)+)+$','credentials','isConvertToSfdx','../utils/mdapi.utils'];a124_0x419d=function(){return _0x19ab7e;};return a124_0x419d();}