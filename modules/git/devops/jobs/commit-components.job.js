const a125_0x3c68c6=a125_0x1dce;(function(_0x930fb2,_0x1748f3){const _0x526d10=a125_0x1dce,_0x2ce522=_0x930fb2();while(!![]){try{const _0x80de0d=parseInt(_0x526d10(0x115))/0x1*(-parseInt(_0x526d10(0xe4))/0x2)+-parseInt(_0x526d10(0x119))/0x3+-parseInt(_0x526d10(0xc5))/0x4*(parseInt(_0x526d10(0xc7))/0x5)+-parseInt(_0x526d10(0x12b))/0x6*(parseInt(_0x526d10(0xe2))/0x7)+-parseInt(_0x526d10(0x101))/0x8*(-parseInt(_0x526d10(0xd2))/0x9)+-parseInt(_0x526d10(0x10a))/0xa+parseInt(_0x526d10(0x118))/0xb*(parseInt(_0x526d10(0xcb))/0xc);if(_0x80de0d===_0x1748f3)break;else _0x2ce522['push'](_0x2ce522['shift']());}catch(_0x8199f7){_0x2ce522['push'](_0x2ce522['shift']());}}}(a125_0x5441,0x616a4));function a125_0x5441(){const _0x27be34=['getOwnPropertyDescriptor','GitUtils','defineProperty','apply','4277260ceouOw','writeComponents','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','force','CommitComponentsJob','splice','deleted','__setModuleDefault','path','mdapiUtils','removeDir','473947AxqDKe','../utils/sfdx.utils','createProjectFrom','9669880lKAoyt','1717059bIXwuz','../utils/mdapi.utils','prefix','sort','isLoggedIn','COMPONENTS_PER_TICK','push','SFDX','getRemote','writable','\x20Copying\x20mdapi\x20to\x20git\x20folder.','../dto/commit-components.dto','../utils/git.utils','configurable','../../providers/providers.tokens','join','Tokens','FORCE_APP_DEFAULT_DIR','102qZinuo','commitAndPush','../../salesforce/utils/sfdx.utils','\x20Wrote\x20','CommitComponentsDto','decorate','MDApiUtils','../../internal/fs.internal','groupComponentsByFileName','toString','\x20Start\x20cloning\x20repository.','\x20Nothing\x20to\x20commit.\x20Skip.','BitbucketApiService','GitProvider','\x20Preparing\x20to\x20delete\x20components','ms.\x20Committed\x20components\x20-\x20','\x20Deleted\x20','typedi','default','fileType','startTime','object','isSFDXProject','exec','8JwIFJJ','Service','948640WBHdbG','credentials','catch','gitUtils','24VOjBjR','gitUrl','getGitShellAuthorizationString','../../providers/types/git-provider','copyMdapiTo','__importStar','\x20Checking\x20deleted\x20components.','5260977bvWlwz','\x20Checking\x20written\x20components.','name','sfdxUtils','removeComponents','writed','componentsToDelete','clone','prototype','components','cleanUp','getProtocol','SFDXUtils','Bitbucket','length','log','37149dIrybz','branch','2DfUYgL','__importDefault','\x20Start\x20converting\x20to\x20SFDX.','\x20components','events','search','\x20Prepare\x20mdapi\x20files.','DEFAULT_GIT_USER_EMAIL','now','create','dir','sfLogger','copySFDXIgnoredComponents','isConvertToSfdx','(((.+)+)+)+$','\x20Preparing\x20to\x20write\x20components','function','force-app','send','hasOwnProperty','componentsToWrite','prepareMdapi','clearDir','replace','__esModule','../../../../constants','fileName','get','logger','8IoNahw','includes','copyProjectTo','commitData','master'];a125_0x5441=function(){return _0x27be34;};return a125_0x5441();}const a125_0x2a094d=(function(){let _0x559fc7=!![];return function(_0x864f1,_0x31fc0f){const _0x11606f=_0x559fc7?function(){const _0x202c9a=a125_0x1dce;if(_0x31fc0f){const _0x97a4ac=_0x31fc0f[_0x202c9a(0x109)](_0x864f1,arguments);return _0x31fc0f=null,_0x97a4ac;}}:function(){};return _0x559fc7=![],_0x11606f;};}()),a125_0x1ff507=a125_0x2a094d(this,function(){const _0x55e4bc=a125_0x1dce;return a125_0x1ff507[_0x55e4bc(0x134)]()['search'](_0x55e4bc(0xf2))['toString']()['constructor'](a125_0x1ff507)[_0x55e4bc(0xe9)](_0x55e4bc(0xf2));});a125_0x1ff507();'use strict';function a125_0x1dce(_0x542b5e,_0x77c317){const _0x400a12=a125_0x5441();return a125_0x1dce=function(_0x1ff507,_0x2a094d){_0x1ff507=_0x1ff507-0xba;let _0x54419e=_0x400a12[_0x1ff507];return _0x54419e;},a125_0x1dce(_0x542b5e,_0x77c317);}var __createBinding=this&&this['__createBinding']||(Object[a125_0x3c68c6(0xed)]?function(_0x4fc3cc,_0x2a9376,_0x24bfbc,_0x211787){const _0x47ad8a=a125_0x3c68c6;if(_0x211787===undefined)_0x211787=_0x24bfbc;var _0xc08ef1=Object[_0x47ad8a(0x106)](_0x2a9376,_0x24bfbc);(!_0xc08ef1||(_0x47ad8a(0xff)in _0xc08ef1?!_0x2a9376[_0x47ad8a(0xfc)]:_0xc08ef1[_0x47ad8a(0x122)]||_0xc08ef1[_0x47ad8a(0x126)]))&&(_0xc08ef1={'enumerable':!![],'get':function(){return _0x2a9376[_0x24bfbc];}}),Object[_0x47ad8a(0x108)](_0x4fc3cc,_0x211787,_0xc08ef1);}:function(_0x4f0691,_0x1b6ede,_0x1cb51d,_0x38d195){if(_0x38d195===undefined)_0x38d195=_0x1cb51d;_0x4f0691[_0x38d195]=_0x1b6ede[_0x1cb51d];}),__setModuleDefault=this&&this[a125_0x3c68c6(0x111)]||(Object['create']?function(_0x43e457,_0x3a391f){const _0x342b1a=a125_0x3c68c6;Object[_0x342b1a(0x108)](_0x43e457,_0x342b1a(0xbf),{'enumerable':!![],'value':_0x3a391f});}:function(_0x1e3659,_0x31bb3b){_0x1e3659['default']=_0x31bb3b;}),__decorate=this&&this['__decorate']||function(_0x3af3b7,_0x114ef1,_0x26d5b1,_0x59f3a2){const _0x3a22b1=a125_0x3c68c6;var _0x301624=arguments['length'],_0x2dea03=_0x301624<0x3?_0x114ef1:_0x59f3a2===null?_0x59f3a2=Object[_0x3a22b1(0x106)](_0x114ef1,_0x26d5b1):_0x59f3a2,_0x2df108;if(typeof Reflect===_0x3a22b1(0xc2)&&typeof Reflect[_0x3a22b1(0x130)]===_0x3a22b1(0xf4))_0x2dea03=Reflect[_0x3a22b1(0x130)](_0x3af3b7,_0x114ef1,_0x26d5b1,_0x59f3a2);else{for(var _0x5597a7=_0x3af3b7['length']-0x1;_0x5597a7>=0x0;_0x5597a7--)if(_0x2df108=_0x3af3b7[_0x5597a7])_0x2dea03=(_0x301624<0x3?_0x2df108(_0x2dea03):_0x301624>0x3?_0x2df108(_0x114ef1,_0x26d5b1,_0x2dea03):_0x2df108(_0x114ef1,_0x26d5b1))||_0x2dea03;}return _0x301624>0x3&&_0x2dea03&&Object[_0x3a22b1(0x108)](_0x114ef1,_0x26d5b1,_0x2dea03),_0x2dea03;},__importStar=this&&this[a125_0x3c68c6(0xd0)]||function(_0x2a2639){const _0x33cd2b=a125_0x3c68c6;if(_0x2a2639&&_0x2a2639[_0x33cd2b(0xfc)])return _0x2a2639;var _0x352bd8={};if(_0x2a2639!=null){for(var _0xcfd89f in _0x2a2639)if(_0xcfd89f!==_0x33cd2b(0xbf)&&Object[_0x33cd2b(0xda)][_0x33cd2b(0xf7)]['call'](_0x2a2639,_0xcfd89f))__createBinding(_0x352bd8,_0x2a2639,_0xcfd89f);}return __setModuleDefault(_0x352bd8,_0x2a2639),_0x352bd8;},__importDefault=this&&this[a125_0x3c68c6(0xe5)]||function(_0x3fcbe2){const _0x5930e6=a125_0x3c68c6;return _0x3fcbe2&&_0x3fcbe2[_0x5930e6(0xfc)]?_0x3fcbe2:{'default':_0x3fcbe2};};Object[a125_0x3c68c6(0x108)](exports,a125_0x3c68c6(0xfc),{'value':!![]}),exports[a125_0x3c68c6(0x10e)]=void 0x0;const commit_components_dto_1=require(a125_0x3c68c6(0x124)),events_1=__importDefault(require(a125_0x3c68c6(0xe8))),git_utils_1=require(a125_0x3c68c6(0x125)),mdapi_utils_1=require(a125_0x3c68c6(0x11a)),sfdx_utils_1=require(a125_0x3c68c6(0x116)),typedi_1=__importStar(require(a125_0x3c68c6(0xbe))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require('../../../shared/utils'),constants_1=require(a125_0x3c68c6(0xfd)),git_provider_1=require(a125_0x3c68c6(0xce)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),sfdx_utils_2=require(a125_0x3c68c6(0x12d)),fs_internal_1=require(a125_0x3c68c6(0x132)),path_1=require(a125_0x3c68c6(0x112)),providers_tokens_1=require(a125_0x3c68c6(0x127)),constants_2=require(a125_0x3c68c6(0xfd));let CommitComponentsJob=class CommitComponentsJob extends events_1[a125_0x3c68c6(0xbf)]{constructor(){const _0x28a932=a125_0x3c68c6;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this[_0x28a932(0xf8)]=0x0,this[_0x28a932(0xd8)]=0x0,this[_0x28a932(0xc1)]=Date['now']();}async[a125_0x3c68c6(0x121)](){const _0x30c7c1=a125_0x3c68c6,{repo:_0x4cb7bd}=this[_0x30c7c1(0x104)],_0x48dd53=typedi_1['default'][_0x30c7c1(0xff)](providers_tokens_1[_0x30c7c1(0x129)][_0x30c7c1(0xc8)]);if(this[_0x30c7c1(0x104)]['provider']===git_provider_1[_0x30c7c1(0xba)][_0x30c7c1(0xdf)]){const _0x2dfe79=typedi_1['default'][_0x30c7c1(0xff)](bitbucket_api_service_1[_0x30c7c1(0x137)]);await _0x2dfe79[_0x30c7c1(0x11d)]();}return _0x4cb7bd[_0x30c7c1(0xcc)][_0x30c7c1(0xfb)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x30c7c1(0xdd)])(_0x4cb7bd[_0x30c7c1(0xcc)])+'://'+_0x48dd53[_0x30c7c1(0xcd)]()+'@');}[a125_0x3c68c6(0x133)](_0x234b1b){const _0x195cfe=a125_0x3c68c6;var _0x3185ee;_0x234b1b[_0x195cfe(0x11c)](_0x347d4c=>child_types_1[_0x195cfe(0xbf)][_0x195cfe(0x102)](_0x347d4c[_0x195cfe(0xc0)])?0x1:-0x1);const _0x3e60f5={};for(const _0x3ab854 of _0x234b1b){_0x3e60f5[_0x3185ee=_0x3ab854[_0x195cfe(0xfe)]]||(_0x3e60f5[_0x3185ee]=[]),_0x3e60f5[_0x3ab854[_0x195cfe(0xfe)]][_0x195cfe(0x11f)](_0x3ab854);}return Object['values'](_0x3e60f5)['reduce']((_0xb7176f,_0x51643f)=>[..._0xb7176f,..._0x51643f],[]);}async[a125_0x3c68c6(0x10b)](_0x72687c){const _0x4f6452=a125_0x3c68c6;_0x72687c=this['groupComponentsByFileName'](_0x72687c);let _0x2a2a1c=0x0;while(_0x72687c[_0x4f6452(0xe0)]){const _0x27a9f5=_0x72687c[_0x4f6452(0x10f)](0x0,this[_0x4f6452(0x11e)]);await this[_0x4f6452(0x113)]['writeFlosumComponents'](_0x27a9f5,{'skipChildErrors':this['commitData'][_0x4f6452(0xe3)][_0x4f6452(0xd4)]===_0x4f6452(0x105),'recordType':this['commitData']['recordType']}),_0x2a2a1c+=_0x27a9f5[_0x4f6452(0xe0)],this['sfLogger'][_0x4f6452(0xe1)](this[_0x4f6452(0x11b)]+_0x4f6452(0x12e)+_0x2a2a1c+'/'+this['componentsToWrite']+'\x20components'),await this[_0x4f6452(0xef)][_0x4f6452(0xf6)]();}}async[a125_0x3c68c6(0xd6)](_0x5a048b){const _0x492e91=a125_0x3c68c6;_0x5a048b['sort'](_0x54a54b=>child_types_1[_0x492e91(0xbf)][_0x492e91(0x102)](_0x54a54b['type'])?-0x1:0x1);let _0x2246cd=0x0;while(_0x5a048b['length']){const _0x38eb86=_0x5a048b[_0x492e91(0x10f)](0x0,this[_0x492e91(0x11e)]);await this['mdapiUtils'][_0x492e91(0xd6)](_0x38eb86,this[_0x492e91(0x104)]['recordType']),_0x2246cd+=_0x38eb86[_0x492e91(0xe0)],this[_0x492e91(0xef)]['log'](this[_0x492e91(0x11b)]+_0x492e91(0xbd)+_0x2246cd+'/'+this['componentsToDelete']+_0x492e91(0xe7)),await this['sfLogger']['send']();}}async['cleanUp'](){const _0x47b76b=a125_0x3c68c6;this[_0x47b76b(0xca)]&&await this[_0x47b76b(0xca)]['removeDir']()[_0x47b76b(0xc9)](()=>void 0x0),this['mdapiUtils']&&await this[_0x47b76b(0x113)][_0x47b76b(0x114)]()[_0x47b76b(0xc9)](()=>void 0x0),this[_0x47b76b(0xd5)]&&await this[_0x47b76b(0xd5)][_0x47b76b(0x114)]()[_0x47b76b(0xc9)](()=>void 0x0);}async[a125_0x3c68c6(0xc4)](){const _0x4648f1=a125_0x3c68c6,{repo:_0x59b51b,branch:_0x53fdeb,components:_0x2f2aa4,convertToSFDX:_0x227022,message:_0xceea0f,user:_0x366faf}=this[_0x4648f1(0x104)];this[_0x4648f1(0x113)]=new mdapi_utils_1[(_0x4648f1(0x131))](),this[_0x4648f1(0xca)]=new git_utils_1[(_0x4648f1(0x107))](await this[_0x4648f1(0x121)]()),this[_0x4648f1(0xd5)]=new sfdx_utils_1[(_0x4648f1(0xde))]();let _0x24cd6b=_0x227022&&this[_0x4648f1(0xd5)][_0x4648f1(0xf1)](this['commitData']['recordType']);try{await this[_0x4648f1(0xef)]['log'](this[_0x4648f1(0x11b)]+_0x4648f1(0x135))[_0x4648f1(0xf6)](),await this['gitUtils'][_0x4648f1(0xd9)](_0x53fdeb[_0x4648f1(0xd4)],_0x59b51b[_0x4648f1(0xd4)]);!this[_0x4648f1(0x104)][_0x4648f1(0x10d)]?(this[_0x4648f1(0xef)][_0x4648f1(0xe1)](this['prefix']+_0x4648f1(0xea)),await this[_0x4648f1(0x113)][_0x4648f1(0xf9)](this[_0x4648f1(0xca)][_0x4648f1(0xee)])):this[_0x4648f1(0xef)]['log'](this[_0x4648f1(0x11b)]+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this[_0x4648f1(0xef)][_0x4648f1(0xe1)](this[_0x4648f1(0x11b)]+_0x4648f1(0xd3))[_0x4648f1(0xf6)]();_0x2f2aa4[_0x4648f1(0xd7)]&&(this[_0x4648f1(0xef)]['log'](this['prefix']+_0x4648f1(0xf3)),this[_0x4648f1(0xf8)]=_0x2f2aa4['writed'][_0x4648f1(0xe0)],await this[_0x4648f1(0x10b)](_0x2f2aa4[_0x4648f1(0xd7)]),await this[_0x4648f1(0xef)][_0x4648f1(0xf6)]());await this['sfLogger'][_0x4648f1(0xe1)](this[_0x4648f1(0x11b)]+_0x4648f1(0xd1))[_0x4648f1(0xf6)]();_0x2f2aa4[_0x4648f1(0x110)]&&(this[_0x4648f1(0xef)][_0x4648f1(0xe1)](this[_0x4648f1(0x11b)]+_0x4648f1(0xbb)),this[_0x4648f1(0xd8)]=_0x2f2aa4[_0x4648f1(0x110)][_0x4648f1(0xe0)],await this['removeComponents'](_0x2f2aa4['deleted']),await this[_0x4648f1(0xef)][_0x4648f1(0xf6)]());await this[_0x4648f1(0xef)][_0x4648f1(0xf6)]();const _0x16dcef=await fs_internal_1['FS']['isEmptyDir'](this[_0x4648f1(0xca)][_0x4648f1(0xee)]);await sfdx_utils_2[_0x4648f1(0x120)][_0x4648f1(0xc3)](this[_0x4648f1(0xca)][_0x4648f1(0xee)])?(_0x24cd6b=!![],await fs_internal_1['FS'][_0x4648f1(0x114)]((0x0,path_1[_0x4648f1(0x128)])(this['gitUtils']['dir'],_0x4648f1(0xf5)))):(_0x24cd6b&&(!_0x16dcef&&(_0x24cd6b=![])),await this[_0x4648f1(0xca)][_0x4648f1(0xfa)]());_0x24cd6b?(await this['sfLogger'][_0x4648f1(0xe1)](this['prefix']+_0x4648f1(0xe6))[_0x4648f1(0xf6)](),await this[_0x4648f1(0xd5)][_0x4648f1(0x117)](this[_0x4648f1(0x113)][_0x4648f1(0xee)]),await this['sfdxUtils'][_0x4648f1(0x103)](this[_0x4648f1(0xca)][_0x4648f1(0xee)],!_0x16dcef),await this[_0x4648f1(0xd5)][_0x4648f1(0xf0)](this[_0x4648f1(0x113)][_0x4648f1(0xee)],(0x0,path_1[_0x4648f1(0x128)])(this['gitUtils'][_0x4648f1(0xee)],constants_2[_0x4648f1(0x12a)])),await this[_0x4648f1(0xd5)][_0x4648f1(0x114)]()):(await this[_0x4648f1(0xef)][_0x4648f1(0xe1)](this[_0x4648f1(0x11b)]+_0x4648f1(0x123))['send'](),await this[_0x4648f1(0x113)][_0x4648f1(0xcf)](this[_0x4648f1(0xca)][_0x4648f1(0xee)]));await this['sfLogger'][_0x4648f1(0xe1)](this[_0x4648f1(0x11b)]+_0x4648f1(0x10c))[_0x4648f1(0xf6)](),await this[_0x4648f1(0xca)][_0x4648f1(0x12c)](_0xceea0f,{'email':constants_1[_0x4648f1(0xeb)],'name':_0x366faf[_0x4648f1(0xd4)]},_0x53fdeb['name']),await this[_0x4648f1(0xca)]['removeDir'](),await this['mdapiUtils']['removeDir']();const _0x272fc7=this[_0x4648f1(0xf8)]+this[_0x4648f1(0xd8)];await this[_0x4648f1(0xef)]['log'](this[_0x4648f1(0x11b)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x4648f1(0xec)]()-this[_0x4648f1(0xc1)])+_0x4648f1(0xbc)+_0x272fc7+'.')[_0x4648f1(0xf6)]();}catch(_0x2fbcae){await this[_0x4648f1(0xdc)](),await this[_0x4648f1(0xef)]['error'](this['prefix']+'\x20'+_0x2fbcae)[_0x4648f1(0xf6)]();throw _0x2fbcae;}}async['run'](_0x495932,_0x470684){const _0x54b839=a125_0x3c68c6;var _0x3e6c92,_0x295ddb;this[_0x54b839(0xef)]=typedi_1[_0x54b839(0xbf)][_0x54b839(0xff)](providers_tokens_1[_0x54b839(0x129)][_0x54b839(0x100)]),this[_0x54b839(0x11b)]=(_0x470684?_0x470684+'\x20':'')+'['+commit_components_dto_1[_0x54b839(0x12f)][_0x54b839(0xd4)]+']',await this[_0x54b839(0xef)][_0x54b839(0xe1)](this[_0x54b839(0x11b)]+'\x20Checking\x20commit\x20components.');const _0x3ce1ac=!!((_0x3e6c92=_0x495932[_0x54b839(0xdb)])===null||_0x3e6c92===void 0x0?void 0x0:_0x3e6c92[_0x54b839(0xd7)])||!!((_0x295ddb=_0x495932[_0x54b839(0xdb)])===null||_0x295ddb===void 0x0?void 0x0:_0x295ddb[_0x54b839(0x110)]);if(!_0x3ce1ac){await this[_0x54b839(0xef)]['log'](this[_0x54b839(0x11b)]+_0x54b839(0x136))[_0x54b839(0xf6)]();return;}this[_0x54b839(0x104)]=_0x495932,await this[_0x54b839(0xc4)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a125_0x3c68c6(0xc6)])({'transient':!![]})],CommitComponentsJob),exports[a125_0x3c68c6(0x10e)]=CommitComponentsJob;