const a104_0x32bd8e=a104_0x231c;function a104_0x4b2d(){const _0x108ec3=['create','componentsToDelete','../utils/mdapi.utils','commitData','componentsToWrite','catch','getProtocol','../../salesforce/utils/sfdx.utils','../../providers/api/bitbucket-api.service','__decorate','\x20Checking\x20commit\x20components.','Service','copyVlocityComponents','log','components','716820SZgIkj','branch','../../providers/providers.tokens','object','clone','removeDir','sfLogger','Tokens','\x20Deleted\x20','default','getOwnPropertyDescriptor','name','exec','__esModule','groupComponentsByFileName','10JVkJoy','22hxPEyv','BitbucketApiService','removeComponents','../../parsers/data/child-types','Bitbucket','COMPONENTS_PER_TICK','writable','reduce','deleted','1750275xQdHvS','SFDXUtils','sort','createProjectFrom','../utils/sfdx.utils','FORCE_APP_DEFAULT_DIR','function','getGitShellAuthorizationString','cleanUp','fileName','run','decorate','sfdxUtils','toString','isSFDXProject','\x20Start\x20cloning\x20repository.','events','57118ImSaMS','../../providers/types/git-provider','(((.+)+)+)+$','logger','\x20Wrote\x20','\x20Start\x20converting\x20to\x20SFDX.','includes','9454520AVjTST','\x20Checking\x20deleted\x20components.','prepareMdapi','\x20Nothing\x20to\x20commit.\x20Skip.','length','getRemote','1858836fpKDCt','defineProperty','apply','search','SFDX','gitUtils','__importStar','ms.\x20Committed\x20components\x20-\x20','\x20Prepare\x20mdapi\x20files.','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','__importDefault','writeComponents','CommitComponentsJob','gitUrl','DEFAULT_GIT_USER_EMAIL','18JVPqGX','prototype','dir','send','6063831bIIfrH','../../internal/fs.internal','\x20components','constructor','__setModuleDefault','\x20Copying\x20mdapi\x20to\x20git\x20folder.','__createBinding','force-app','copyProjectTo','../dto/commit-components.dto','writeFlosumComponents','writed','\x20Preparing\x20to\x20delete\x20components','join','startTime','../../../../constants','12xeAIFH','prefix','call','master','31FnfAkc','now','CommitComponentsDto','copyMdapiTo','isLoggedIn','GitProvider','values','clearDir','MDApiUtils','mdapiUtils','force','1827810YzPPgt','splice','get','path','configurable','hasOwnProperty'];a104_0x4b2d=function(){return _0x108ec3;};return a104_0x4b2d();}(function(_0x4993f5,_0x465562){const _0x59f43d=a104_0x231c,_0x1e8f67=_0x4993f5();while(!![]){try{const _0x24cb6c=-parseInt(_0x59f43d(0xa3))/0x1*(-parseInt(_0x59f43d(0xed))/0x2)+parseInt(_0x59f43d(0xdc))/0x3+-parseInt(_0x59f43d(0x9f))/0x4*(parseInt(_0x59f43d(0xae))/0x5)+parseInt(_0x59f43d(0x109))/0x6*(parseInt(_0x59f43d(0xfa))/0x7)+-parseInt(_0x59f43d(0xf4))/0x8+-parseInt(_0x59f43d(0x10d))/0x9*(-parseInt(_0x59f43d(0xd2))/0xa)+-parseInt(_0x59f43d(0xd3))/0xb*(-parseInt(_0x59f43d(0xc3))/0xc);if(_0x24cb6c===_0x465562)break;else _0x1e8f67['push'](_0x1e8f67['shift']());}catch(_0x450f6b){_0x1e8f67['push'](_0x1e8f67['shift']());}}}(a104_0x4b2d,0xbe75e));const a104_0x217ab2=(function(){let _0x838be1=!![];return function(_0x435ecf,_0x3af6b5){const _0xbaa54c=_0x838be1?function(){const _0x30cb95=a104_0x231c;if(_0x3af6b5){const _0x5dbe6b=_0x3af6b5[_0x30cb95(0xfc)](_0x435ecf,arguments);return _0x3af6b5=null,_0x5dbe6b;}}:function(){};return _0x838be1=![],_0xbaa54c;};}()),a104_0x40fa3b=a104_0x217ab2(this,function(){const _0x505735=a104_0x231c;return a104_0x40fa3b[_0x505735(0xe9)]()['search'](_0x505735(0xef))[_0x505735(0xe9)]()[_0x505735(0x110)](a104_0x40fa3b)[_0x505735(0xfd)](_0x505735(0xef));});a104_0x40fa3b();'use strict';var __createBinding=this&&this[a104_0x32bd8e(0x95)]||(Object[a104_0x32bd8e(0xb4)]?function(_0x11ff4c,_0x592f6f,_0x46ec5c,_0xba19ea){const _0x511b60=a104_0x32bd8e;if(_0xba19ea===undefined)_0xba19ea=_0x46ec5c;var _0x32849c=Object[_0x511b60(0xcd)](_0x592f6f,_0x46ec5c);(!_0x32849c||('get'in _0x32849c?!_0x592f6f['__esModule']:_0x32849c[_0x511b60(0xd9)]||_0x32849c[_0x511b60(0xb2)]))&&(_0x32849c={'enumerable':!![],'get':function(){return _0x592f6f[_0x46ec5c];}}),Object['defineProperty'](_0x11ff4c,_0xba19ea,_0x32849c);}:function(_0x41ea1e,_0x304ce4,_0x339cda,_0x169309){if(_0x169309===undefined)_0x169309=_0x339cda;_0x41ea1e[_0x169309]=_0x304ce4[_0x339cda];}),__setModuleDefault=this&&this[a104_0x32bd8e(0x93)]||(Object[a104_0x32bd8e(0xb4)]?function(_0x268d71,_0x515548){const _0x1ea355=a104_0x32bd8e;Object[_0x1ea355(0xfb)](_0x268d71,_0x1ea355(0xcc),{'enumerable':!![],'value':_0x515548});}:function(_0xa0a342,_0x2fc571){const _0x3f4083=a104_0x32bd8e;_0xa0a342[_0x3f4083(0xcc)]=_0x2fc571;}),__decorate=this&&this[a104_0x32bd8e(0xbd)]||function(_0x16b985,_0x36018f,_0x51a9eb,_0x4ce9c5){const _0x1e3d5d=a104_0x32bd8e;var _0x489d62=arguments[_0x1e3d5d(0xf8)],_0x483c4d=_0x489d62<0x3?_0x36018f:_0x4ce9c5===null?_0x4ce9c5=Object['getOwnPropertyDescriptor'](_0x36018f,_0x51a9eb):_0x4ce9c5,_0x3b6595;if(typeof Reflect===_0x1e3d5d(0xc6)&&typeof Reflect['decorate']===_0x1e3d5d(0xe2))_0x483c4d=Reflect[_0x1e3d5d(0xe7)](_0x16b985,_0x36018f,_0x51a9eb,_0x4ce9c5);else{for(var _0x5bdf57=_0x16b985[_0x1e3d5d(0xf8)]-0x1;_0x5bdf57>=0x0;_0x5bdf57--)if(_0x3b6595=_0x16b985[_0x5bdf57])_0x483c4d=(_0x489d62<0x3?_0x3b6595(_0x483c4d):_0x489d62>0x3?_0x3b6595(_0x36018f,_0x51a9eb,_0x483c4d):_0x3b6595(_0x36018f,_0x51a9eb))||_0x483c4d;}return _0x489d62>0x3&&_0x483c4d&&Object[_0x1e3d5d(0xfb)](_0x36018f,_0x51a9eb,_0x483c4d),_0x483c4d;},__importStar=this&&this[a104_0x32bd8e(0x100)]||function(_0x21c458){const _0x539b42=a104_0x32bd8e;if(_0x21c458&&_0x21c458[_0x539b42(0xd0)])return _0x21c458;var _0x29b381={};if(_0x21c458!=null){for(var _0xefea57 in _0x21c458)if(_0xefea57!==_0x539b42(0xcc)&&Object[_0x539b42(0x10a)][_0x539b42(0xb3)][_0x539b42(0xa1)](_0x21c458,_0xefea57))__createBinding(_0x29b381,_0x21c458,_0xefea57);}return __setModuleDefault(_0x29b381,_0x21c458),_0x29b381;},__importDefault=this&&this[a104_0x32bd8e(0x104)]||function(_0xd94c9d){const _0x245a5f=a104_0x32bd8e;return _0xd94c9d&&_0xd94c9d[_0x245a5f(0xd0)]?_0xd94c9d:{'default':_0xd94c9d};};function a104_0x231c(_0x1f639e,_0x4b522e){const _0x1c60d4=a104_0x4b2d();return a104_0x231c=function(_0x40fa3b,_0x217ab2){_0x40fa3b=_0x40fa3b-0x93;let _0x4b2da5=_0x1c60d4[_0x40fa3b];return _0x4b2da5;},a104_0x231c(_0x1f639e,_0x4b522e);}Object[a104_0x32bd8e(0xfb)](exports,a104_0x32bd8e(0xd0),{'value':!![]}),exports[a104_0x32bd8e(0x106)]=void 0x0;const commit_components_dto_1=require(a104_0x32bd8e(0x98)),events_1=__importDefault(require(a104_0x32bd8e(0xec))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a104_0x32bd8e(0xb6)),sfdx_utils_1=require(a104_0x32bd8e(0xe0)),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a104_0x32bd8e(0xd6))),utils_1=require('../../../shared/utils'),constants_1=require(a104_0x32bd8e(0x9e)),git_provider_1=require(a104_0x32bd8e(0xee)),bitbucket_api_service_1=require(a104_0x32bd8e(0xbc)),sfdx_utils_2=require(a104_0x32bd8e(0xbb)),fs_internal_1=require(a104_0x32bd8e(0x10e)),path_1=require(a104_0x32bd8e(0xb1)),providers_tokens_1=require(a104_0x32bd8e(0xc5)),constants_2=require('../../../../constants');let CommitComponentsJob=class CommitComponentsJob extends events_1[a104_0x32bd8e(0xcc)]{constructor(){const _0x221e97=a104_0x32bd8e;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this['componentsToWrite']=0x0,this[_0x221e97(0xb5)]=0x0,this[_0x221e97(0x9d)]=Date['now']();}async[a104_0x32bd8e(0xf9)](){const _0x1c0374=a104_0x32bd8e,{repo:_0x560f42}=this['commitData'],_0x25cb77=typedi_1[_0x1c0374(0xcc)][_0x1c0374(0xb0)](providers_tokens_1[_0x1c0374(0xca)]['credentials']);if(this[_0x1c0374(0xb7)]['provider']===git_provider_1[_0x1c0374(0xa8)][_0x1c0374(0xd7)]){const _0x522745=typedi_1['default'][_0x1c0374(0xb0)](bitbucket_api_service_1[_0x1c0374(0xd4)]);await _0x522745[_0x1c0374(0xa7)]();}return _0x560f42[_0x1c0374(0x107)]['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x1c0374(0xba)])(_0x560f42[_0x1c0374(0x107)])+'://'+_0x25cb77[_0x1c0374(0xe3)]()+'@');}[a104_0x32bd8e(0xd1)](_0xc3d76b){const _0x4b5cd6=a104_0x32bd8e;var _0x199841;_0xc3d76b[_0x4b5cd6(0xde)](_0x3e625b=>child_types_1[_0x4b5cd6(0xcc)][_0x4b5cd6(0xf3)](_0x3e625b['fileType'])?0x1:-0x1);const _0x309285={};for(const _0x230496 of _0xc3d76b){_0x309285[_0x199841=_0x230496[_0x4b5cd6(0xe5)]]||(_0x309285[_0x199841]=[]),_0x309285[_0x230496[_0x4b5cd6(0xe5)]]['push'](_0x230496);}return Object[_0x4b5cd6(0xa9)](_0x309285)[_0x4b5cd6(0xda)]((_0x421815,_0x1e7536)=>[..._0x421815,..._0x1e7536],[]);}async['writeComponents'](_0x40485a){const _0x70dcac=a104_0x32bd8e;_0x40485a=this['groupComponentsByFileName'](_0x40485a);let _0x54e3b2=0x0;while(_0x40485a[_0x70dcac(0xf8)]){const _0x35f84e=_0x40485a[_0x70dcac(0xaf)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x70dcac(0xac)][_0x70dcac(0x99)](_0x35f84e,{'skipChildErrors':this[_0x70dcac(0xb7)][_0x70dcac(0xc4)][_0x70dcac(0xce)]===_0x70dcac(0xa2)}),_0x54e3b2+=_0x35f84e['length'],this[_0x70dcac(0xc9)][_0x70dcac(0xc1)](this[_0x70dcac(0xa0)]+_0x70dcac(0xf1)+_0x54e3b2+'/'+this[_0x70dcac(0xb8)]+_0x70dcac(0x10f)),await this[_0x70dcac(0xc9)][_0x70dcac(0x10c)]();}}async[a104_0x32bd8e(0xd5)](_0x1b362a){const _0x2cb422=a104_0x32bd8e;_0x1b362a['sort'](_0x4bf435=>child_types_1['default'][_0x2cb422(0xf3)](_0x4bf435['type'])?-0x1:0x1);let _0xd5e582=0x0;while(_0x1b362a[_0x2cb422(0xf8)]){const _0x183f44=_0x1b362a[_0x2cb422(0xaf)](0x0,this[_0x2cb422(0xd8)]);await this[_0x2cb422(0xac)][_0x2cb422(0xd5)](_0x183f44),_0xd5e582+=_0x183f44[_0x2cb422(0xf8)],this[_0x2cb422(0xc9)][_0x2cb422(0xc1)](this[_0x2cb422(0xa0)]+_0x2cb422(0xcb)+_0xd5e582+'/'+this[_0x2cb422(0xb5)]+_0x2cb422(0x10f)),await this[_0x2cb422(0xc9)][_0x2cb422(0x10c)]();}}async[a104_0x32bd8e(0xe4)](){const _0x1d3e21=a104_0x32bd8e;this['gitUtils']&&await this[_0x1d3e21(0xff)][_0x1d3e21(0xc8)]()[_0x1d3e21(0xb9)](()=>void 0x0),this[_0x1d3e21(0xac)]&&await this['mdapiUtils'][_0x1d3e21(0xc8)]()['catch'](()=>void 0x0),this[_0x1d3e21(0xe8)]&&await this[_0x1d3e21(0xe8)][_0x1d3e21(0xc8)]()[_0x1d3e21(0xb9)](()=>void 0x0);}async['exec'](){const _0x14744e=a104_0x32bd8e,{repo:_0xaa67b4,branch:_0x572473,components:_0x4ebd38,convertToSFDX:_0x2a0cb8,message:_0x135efb,user:_0x10d6c0}=this['commitData'];this[_0x14744e(0xac)]=new mdapi_utils_1[(_0x14744e(0xab))](),this['gitUtils']=new git_utils_1['GitUtils'](await this['getRemote']()),this[_0x14744e(0xe8)]=new sfdx_utils_1[(_0x14744e(0xdd))]();let _0xf43d3f=_0x2a0cb8;try{await this[_0x14744e(0xc9)]['log'](this[_0x14744e(0xa0)]+_0x14744e(0xeb))['send'](),await this['gitUtils'][_0x14744e(0xc7)](_0x572473[_0x14744e(0xce)],_0xaa67b4['name']);!this[_0x14744e(0xb7)][_0x14744e(0xad)]?(this[_0x14744e(0xc9)]['log'](this['prefix']+_0x14744e(0x102)),await this['mdapiUtils'][_0x14744e(0xf6)](this[_0x14744e(0xff)]['dir'])):this[_0x14744e(0xc9)][_0x14744e(0xc1)](this['prefix']+_0x14744e(0x103));await this[_0x14744e(0xc9)][_0x14744e(0xc1)](this[_0x14744e(0xa0)]+'\x20Checking\x20written\x20components.')['send']();_0x4ebd38['writed']&&(this['sfLogger'][_0x14744e(0xc1)](this[_0x14744e(0xa0)]+'\x20Preparing\x20to\x20write\x20components'),this[_0x14744e(0xb8)]=_0x4ebd38['writed'][_0x14744e(0xf8)],await this[_0x14744e(0x105)](_0x4ebd38[_0x14744e(0x9a)]),await this['sfLogger'][_0x14744e(0x10c)]());await this['sfLogger'][_0x14744e(0xc1)](this[_0x14744e(0xa0)]+_0x14744e(0xf5))[_0x14744e(0x10c)]();_0x4ebd38[_0x14744e(0xdb)]&&(this[_0x14744e(0xc9)][_0x14744e(0xc1)](this[_0x14744e(0xa0)]+_0x14744e(0x9b)),this[_0x14744e(0xb5)]=_0x4ebd38[_0x14744e(0xdb)]['length'],await this[_0x14744e(0xd5)](_0x4ebd38[_0x14744e(0xdb)]),await this[_0x14744e(0xc9)][_0x14744e(0x10c)]());await this[_0x14744e(0xc9)][_0x14744e(0x10c)]();const _0x397283=await fs_internal_1['FS']['isEmptyDir'](this[_0x14744e(0xff)][_0x14744e(0x10b)]);await sfdx_utils_2[_0x14744e(0xfe)][_0x14744e(0xea)](this[_0x14744e(0xff)][_0x14744e(0x10b)])?(_0xf43d3f=!![],await fs_internal_1['FS'][_0x14744e(0xc8)]((0x0,path_1[_0x14744e(0x9c)])(this[_0x14744e(0xff)]['dir'],_0x14744e(0x96)))):(_0xf43d3f&&(!_0x397283&&(_0xf43d3f=![])),await this[_0x14744e(0xff)][_0x14744e(0xaa)]());_0xf43d3f?(await this[_0x14744e(0xc9)][_0x14744e(0xc1)](this[_0x14744e(0xa0)]+_0x14744e(0xf2))[_0x14744e(0x10c)](),await this[_0x14744e(0xe8)][_0x14744e(0xdf)](this[_0x14744e(0xac)][_0x14744e(0x10b)]),await this[_0x14744e(0xe8)][_0x14744e(0x97)](this[_0x14744e(0xff)][_0x14744e(0x10b)],!_0x397283),await this['sfdxUtils'][_0x14744e(0xc0)](this[_0x14744e(0xac)][_0x14744e(0x10b)],(0x0,path_1['join'])(this['gitUtils'][_0x14744e(0x10b)],constants_2[_0x14744e(0xe1)])),await this[_0x14744e(0xe8)][_0x14744e(0xc8)]()):(await this['sfLogger'][_0x14744e(0xc1)](this[_0x14744e(0xa0)]+_0x14744e(0x94))['send'](),await this[_0x14744e(0xac)][_0x14744e(0xa6)](this[_0x14744e(0xff)][_0x14744e(0x10b)]));await this[_0x14744e(0xc9)][_0x14744e(0xc1)](this[_0x14744e(0xa0)]+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')[_0x14744e(0x10c)](),await this[_0x14744e(0xff)]['commitAndPush'](_0x135efb,{'email':constants_1[_0x14744e(0x108)],'name':_0x10d6c0[_0x14744e(0xce)]},_0x572473[_0x14744e(0xce)]),await this['gitUtils']['removeDir'](),await this[_0x14744e(0xac)][_0x14744e(0xc8)]();const _0xd681f=this['componentsToWrite']+this[_0x14744e(0xb5)];await this[_0x14744e(0xc9)]['log'](this[_0x14744e(0xa0)]+'\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x14744e(0xa4)]()-this[_0x14744e(0x9d)])+_0x14744e(0x101)+_0xd681f+'.')[_0x14744e(0x10c)]();}catch(_0x46cf77){await this[_0x14744e(0xe4)](),await this[_0x14744e(0xc9)]['error'](this[_0x14744e(0xa0)]+'\x20'+_0x46cf77)[_0x14744e(0x10c)]();throw _0x46cf77;}}async[a104_0x32bd8e(0xe6)](_0x208d2c,_0x1b38eb){const _0x3e82ae=a104_0x32bd8e;var _0x48332f,_0x4d50f3;this['sfLogger']=typedi_1['default'][_0x3e82ae(0xb0)](providers_tokens_1[_0x3e82ae(0xca)][_0x3e82ae(0xf0)]),this[_0x3e82ae(0xa0)]=(_0x1b38eb?_0x1b38eb+'\x20':'')+'['+commit_components_dto_1[_0x3e82ae(0xa5)]['name']+']',await this[_0x3e82ae(0xc9)][_0x3e82ae(0xc1)](this['prefix']+_0x3e82ae(0xbe));const _0x5d653d=!!((_0x48332f=_0x208d2c[_0x3e82ae(0xc2)])===null||_0x48332f===void 0x0?void 0x0:_0x48332f[_0x3e82ae(0x9a)])||!!((_0x4d50f3=_0x208d2c[_0x3e82ae(0xc2)])===null||_0x4d50f3===void 0x0?void 0x0:_0x4d50f3[_0x3e82ae(0xdb)]);if(!_0x5d653d){await this[_0x3e82ae(0xc9)][_0x3e82ae(0xc1)](this[_0x3e82ae(0xa0)]+_0x3e82ae(0xf7))['send']();return;}this['commitData']=_0x208d2c,await this[_0x3e82ae(0xcf)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0x32bd8e(0xbf)])({'transient':!![]})],CommitComponentsJob),exports[a104_0x32bd8e(0x106)]=CommitComponentsJob;