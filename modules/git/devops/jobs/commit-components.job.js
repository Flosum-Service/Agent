function a104_0x4afb(){const _0x2e68b7=['log','COMPONENTS_PER_TICK','getRemote','GitProvider','components','../../providers/types/git-provider','__createBinding','2776108FTvGOG','send','1157058vcHZkx','push','length','cleanUp','writeComponents','copyProjectTo','sort','716834UQZdNY','GitUtils','name','hasOwnProperty','__setModuleDefault','__esModule','createProjectFrom','\x20Copying\x20mdapi\x20to\x20git\x20folder.','\x20Checking\x20deleted\x20components.','getProtocol','join','catch','default','clone','toString','__importStar','../../parsers/data/child-types','\x20Deleted\x20','removeComponents','configurable','CommitComponentsDto','groupComponentsByFileName','__importDefault','defineProperty','CommitComponentsJob','3563365YZmNdd','SFDXUtils','Bitbucket','decorate','\x20Wrote\x20','replace','componentsToWrite','includes','../../providers/providers.tokens','\x20Checking\x20commit\x20components.','exec','ms.\x20Committed\x20components\x20-\x20','prepareMdapi','32832527obQdzG','BitbucketApiService','Service','removeDir','SFDX','constructor','create','dir','\x20Nothing\x20to\x20commit.\x20Skip.','isSFDXProject','function','(((.+)+)+)+$','prototype','reduce','splice','isLoggedIn','master','provider','\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','isEmptyDir','mdapiUtils','getGitShellAuthorizationString','componentsToDelete','startTime','://','deleted','events','__decorate','writeFlosumComponents','4925972jSunQV','getOwnPropertyDescriptor','clearDir','get','sfdxUtils','call','gitUrl','../../salesforce/utils/sfdx.utils','writed','branch','path','apply','force','copyMdapiTo','fileName','now','\x20Start\x20converting\x20to\x20SFDX.','prefix','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','commitAndPush','\x20Preparing\x20to\x20write\x20components','782154ftPIdq','commitData','fileType','object','logger','writable','sfLogger','search','Tokens','gitUtils'];a104_0x4afb=function(){return _0x2e68b7;};return a104_0x4afb();}const a104_0x2afe18=a104_0x4589;(function(_0x142a59,_0x1ca754){const _0x88d7d9=a104_0x4589,_0x1706a8=_0x142a59();while(!![]){try{const _0x579a3b=-parseInt(_0x88d7d9(0x159))/0x1+-parseInt(_0x88d7d9(0x150))/0x2+parseInt(_0x88d7d9(0x152))/0x3+-parseInt(_0x88d7d9(0x12a))/0x4+-parseInt(_0x88d7d9(0xff))/0x5+-parseInt(_0x88d7d9(0x13f))/0x6+parseInt(_0x88d7d9(0x10c))/0x7;if(_0x579a3b===_0x1ca754)break;else _0x1706a8['push'](_0x1706a8['shift']());}catch(_0x3d9a96){_0x1706a8['push'](_0x1706a8['shift']());}}}(a104_0x4afb,0xdae7a));function a104_0x4589(_0x19f865,_0x15756d){const _0x13ecc7=a104_0x4afb();return a104_0x4589=function(_0x5b9974,_0x1557fd){_0x5b9974=_0x5b9974-0xf8;let _0x4afbee=_0x13ecc7[_0x5b9974];return _0x4afbee;},a104_0x4589(_0x19f865,_0x15756d);}const a104_0x1557fd=(function(){let _0x2240a6=!![];return function(_0x2534f2,_0x1b4b92){const _0x2f64ad=_0x2240a6?function(){const _0x3da5bc=a104_0x4589;if(_0x1b4b92){const _0x2ad146=_0x1b4b92[_0x3da5bc(0x135)](_0x2534f2,arguments);return _0x1b4b92=null,_0x2ad146;}}:function(){};return _0x2240a6=![],_0x2f64ad;};}()),a104_0x5b9974=a104_0x1557fd(this,function(){const _0x497695=a104_0x4589;return a104_0x5b9974[_0x497695(0x167)]()[_0x497695(0x146)](_0x497695(0x117))[_0x497695(0x167)]()[_0x497695(0x111)](a104_0x5b9974)[_0x497695(0x146)](_0x497695(0x117));});a104_0x5b9974();'use strict';var __createBinding=this&&this[a104_0x2afe18(0x14f)]||(Object[a104_0x2afe18(0x112)]?function(_0x165110,_0x2e42e5,_0x5e4713,_0x1c901d){const _0x2caecd=a104_0x2afe18;if(_0x1c901d===undefined)_0x1c901d=_0x5e4713;var _0x2b940e=Object['getOwnPropertyDescriptor'](_0x2e42e5,_0x5e4713);(!_0x2b940e||(_0x2caecd(0x12d)in _0x2b940e?!_0x2e42e5[_0x2caecd(0x15e)]:_0x2b940e[_0x2caecd(0x144)]||_0x2b940e[_0x2caecd(0xf9)]))&&(_0x2b940e={'enumerable':!![],'get':function(){return _0x2e42e5[_0x5e4713];}}),Object['defineProperty'](_0x165110,_0x1c901d,_0x2b940e);}:function(_0x10fc2b,_0x302e07,_0x3c2e97,_0x469ba7){if(_0x469ba7===undefined)_0x469ba7=_0x3c2e97;_0x10fc2b[_0x469ba7]=_0x302e07[_0x3c2e97];}),__setModuleDefault=this&&this[a104_0x2afe18(0x15d)]||(Object[a104_0x2afe18(0x112)]?function(_0x173fc0,_0x49ada0){const _0x435e13=a104_0x2afe18;Object[_0x435e13(0xfd)](_0x173fc0,_0x435e13(0x165),{'enumerable':!![],'value':_0x49ada0});}:function(_0xe2e994,_0x1d7a8c){const _0x45da0f=a104_0x2afe18;_0xe2e994[_0x45da0f(0x165)]=_0x1d7a8c;}),__decorate=this&&this[a104_0x2afe18(0x128)]||function(_0x156a39,_0x171817,_0x55d384,_0x2d0d40){const _0x491040=a104_0x2afe18;var _0x528a77=arguments[_0x491040(0x154)],_0x4fdee8=_0x528a77<0x3?_0x171817:_0x2d0d40===null?_0x2d0d40=Object[_0x491040(0x12b)](_0x171817,_0x55d384):_0x2d0d40,_0x52062f;if(typeof Reflect===_0x491040(0x142)&&typeof Reflect[_0x491040(0x102)]===_0x491040(0x116))_0x4fdee8=Reflect[_0x491040(0x102)](_0x156a39,_0x171817,_0x55d384,_0x2d0d40);else{for(var _0x5dd580=_0x156a39['length']-0x1;_0x5dd580>=0x0;_0x5dd580--)if(_0x52062f=_0x156a39[_0x5dd580])_0x4fdee8=(_0x528a77<0x3?_0x52062f(_0x4fdee8):_0x528a77>0x3?_0x52062f(_0x171817,_0x55d384,_0x4fdee8):_0x52062f(_0x171817,_0x55d384))||_0x4fdee8;}return _0x528a77>0x3&&_0x4fdee8&&Object[_0x491040(0xfd)](_0x171817,_0x55d384,_0x4fdee8),_0x4fdee8;},__importStar=this&&this[a104_0x2afe18(0x168)]||function(_0x167a4c){const _0x2e7a94=a104_0x2afe18;if(_0x167a4c&&_0x167a4c[_0x2e7a94(0x15e)])return _0x167a4c;var _0xdcb847={};if(_0x167a4c!=null){for(var _0x1518e3 in _0x167a4c)if(_0x1518e3!==_0x2e7a94(0x165)&&Object[_0x2e7a94(0x118)][_0x2e7a94(0x15c)][_0x2e7a94(0x12f)](_0x167a4c,_0x1518e3))__createBinding(_0xdcb847,_0x167a4c,_0x1518e3);}return __setModuleDefault(_0xdcb847,_0x167a4c),_0xdcb847;},__importDefault=this&&this[a104_0x2afe18(0xfc)]||function(_0x52db40){const _0x488af1=a104_0x2afe18;return _0x52db40&&_0x52db40[_0x488af1(0x15e)]?_0x52db40:{'default':_0x52db40};};Object[a104_0x2afe18(0xfd)](exports,a104_0x2afe18(0x15e),{'value':!![]}),exports[a104_0x2afe18(0xfe)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a104_0x2afe18(0x127))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require('../utils/sfdx.utils'),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require(a104_0x2afe18(0x169))),utils_1=require('../../../shared/utils'),constants_1=require('../../../../constants'),git_provider_1=require(a104_0x2afe18(0x14e)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),sfdx_utils_2=require(a104_0x2afe18(0x131)),fs_internal_1=require('../../internal/fs.internal'),path_1=require(a104_0x2afe18(0x134)),providers_tokens_1=require(a104_0x2afe18(0x107));let CommitComponentsJob=class CommitComponentsJob extends events_1[a104_0x2afe18(0x165)]{constructor(){const _0x32493e=a104_0x2afe18;super(...arguments),this['COMPONENTS_PER_TICK']=0x3e8,this['componentsToWrite']=0x0,this[_0x32493e(0x123)]=0x0,this[_0x32493e(0x124)]=Date[_0x32493e(0x139)]();}async[a104_0x2afe18(0x14b)](){const _0x89b06d=a104_0x2afe18,{repo:_0x4de394}=this[_0x89b06d(0x140)],_0x423bdb=typedi_1[_0x89b06d(0x165)][_0x89b06d(0x12d)](providers_tokens_1[_0x89b06d(0x147)]['credentials']);if(this[_0x89b06d(0x140)][_0x89b06d(0x11d)]===git_provider_1[_0x89b06d(0x14c)][_0x89b06d(0x101)]){const _0xba169=typedi_1[_0x89b06d(0x165)][_0x89b06d(0x12d)](bitbucket_api_service_1[_0x89b06d(0x10d)]);await _0xba169[_0x89b06d(0x11b)]();}return _0x4de394['gitUrl'][_0x89b06d(0x104)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x89b06d(0x162)])(_0x4de394[_0x89b06d(0x130)])+_0x89b06d(0x125)+_0x423bdb[_0x89b06d(0x122)]()+'@');}[a104_0x2afe18(0xfb)](_0x152f85){const _0x58b3ea=a104_0x2afe18;var _0x2ed1c8;_0x152f85['sort'](_0x589ce2=>child_types_1[_0x58b3ea(0x165)][_0x58b3ea(0x106)](_0x589ce2[_0x58b3ea(0x141)])?0x1:-0x1);const _0x77c8a2={};for(const _0x5bcd75 of _0x152f85){_0x77c8a2[_0x2ed1c8=_0x5bcd75[_0x58b3ea(0x138)]]||(_0x77c8a2[_0x2ed1c8]=[]),_0x77c8a2[_0x5bcd75[_0x58b3ea(0x138)]][_0x58b3ea(0x153)](_0x5bcd75);}return Object['values'](_0x77c8a2)[_0x58b3ea(0x119)]((_0x4d0d27,_0x50542a)=>[..._0x4d0d27,..._0x50542a],[]);}async[a104_0x2afe18(0x156)](_0x1e11b0){const _0x350d8b=a104_0x2afe18;_0x1e11b0=this[_0x350d8b(0xfb)](_0x1e11b0);let _0x101166=0x0;while(_0x1e11b0[_0x350d8b(0x154)]){const _0x368652=_0x1e11b0['splice'](0x0,this[_0x350d8b(0x14a)]);await this[_0x350d8b(0x121)][_0x350d8b(0x129)](_0x368652,{'skipChildErrors':this[_0x350d8b(0x140)][_0x350d8b(0x133)][_0x350d8b(0x15b)]===_0x350d8b(0x11c)}),_0x101166+=_0x368652[_0x350d8b(0x154)],this[_0x350d8b(0x145)][_0x350d8b(0x149)](this[_0x350d8b(0x13b)]+_0x350d8b(0x103)+_0x101166+'/'+this[_0x350d8b(0x105)]+'\x20components'),await this['sfLogger'][_0x350d8b(0x151)]();}}async[a104_0x2afe18(0xf8)](_0x55f832){const _0x436d72=a104_0x2afe18;_0x55f832[_0x436d72(0x158)](_0x2f4233=>child_types_1[_0x436d72(0x165)]['includes'](_0x2f4233['type'])?-0x1:0x1);let _0x339585=0x0;while(_0x55f832['length']){const _0x57ceeb=_0x55f832[_0x436d72(0x11a)](0x0,this[_0x436d72(0x14a)]);await this[_0x436d72(0x121)]['removeComponents'](_0x57ceeb),_0x339585+=_0x57ceeb['length'],this[_0x436d72(0x145)][_0x436d72(0x149)](this['prefix']+_0x436d72(0x16a)+_0x339585+'/'+this[_0x436d72(0x123)]+'\x20components'),await this[_0x436d72(0x145)][_0x436d72(0x151)]();}}async[a104_0x2afe18(0x155)](){const _0xac86dc=a104_0x2afe18;this['gitUtils']&&await this['gitUtils'][_0xac86dc(0x10f)]()[_0xac86dc(0x164)](()=>void 0x0),this[_0xac86dc(0x121)]&&await this[_0xac86dc(0x121)][_0xac86dc(0x10f)]()[_0xac86dc(0x164)](()=>void 0x0),this['sfdxUtils']&&await this[_0xac86dc(0x12e)][_0xac86dc(0x10f)]()['catch'](()=>void 0x0);}async[a104_0x2afe18(0x109)](){const _0x293614=a104_0x2afe18,{repo:_0x5282f9,branch:_0x4ac484,components:_0x2d8355,convertToSFDX:_0x59080d,message:_0x8e933f,user:_0x42585c}=this[_0x293614(0x140)];this[_0x293614(0x121)]=new mdapi_utils_1['MDApiUtils'](),this['gitUtils']=new git_utils_1[(_0x293614(0x15a))](await this[_0x293614(0x14b)]()),this[_0x293614(0x12e)]=new sfdx_utils_1[(_0x293614(0x100))]();let _0x457001=_0x59080d;try{await this[_0x293614(0x145)][_0x293614(0x149)](this[_0x293614(0x13b)]+'\x20Start\x20cloning\x20repository.')[_0x293614(0x151)](),await this[_0x293614(0x148)][_0x293614(0x166)](_0x4ac484[_0x293614(0x15b)],_0x5282f9['name']);!this[_0x293614(0x140)][_0x293614(0x136)]?(this[_0x293614(0x145)][_0x293614(0x149)](this['prefix']+'\x20Prepare\x20mdapi\x20files.'),await this['mdapiUtils'][_0x293614(0x10b)](this[_0x293614(0x148)][_0x293614(0x113)])):this[_0x293614(0x145)]['log'](this[_0x293614(0x13b)]+_0x293614(0x11f));await this[_0x293614(0x145)][_0x293614(0x149)](this[_0x293614(0x13b)]+'\x20Checking\x20written\x20components.')[_0x293614(0x151)]();_0x2d8355[_0x293614(0x132)]&&(this[_0x293614(0x145)][_0x293614(0x149)](this['prefix']+_0x293614(0x13e)),this[_0x293614(0x105)]=_0x2d8355[_0x293614(0x132)][_0x293614(0x154)],await this[_0x293614(0x156)](_0x2d8355[_0x293614(0x132)]),await this[_0x293614(0x145)][_0x293614(0x151)]());await this[_0x293614(0x145)][_0x293614(0x149)](this[_0x293614(0x13b)]+_0x293614(0x161))[_0x293614(0x151)]();_0x2d8355[_0x293614(0x126)]&&(this[_0x293614(0x145)][_0x293614(0x149)](this[_0x293614(0x13b)]+'\x20Preparing\x20to\x20delete\x20components'),this[_0x293614(0x123)]=_0x2d8355[_0x293614(0x126)][_0x293614(0x154)],await this[_0x293614(0xf8)](_0x2d8355[_0x293614(0x126)]),await this[_0x293614(0x145)][_0x293614(0x151)]());await this['sfLogger'][_0x293614(0x151)]();const _0x2aa424=await fs_internal_1['FS'][_0x293614(0x120)](this['gitUtils'][_0x293614(0x113)]);await sfdx_utils_2[_0x293614(0x110)][_0x293614(0x115)](this[_0x293614(0x148)][_0x293614(0x113)])?(_0x457001=!![],await fs_internal_1['FS'][_0x293614(0x10f)]((0x0,path_1[_0x293614(0x163)])(this['gitUtils']['dir'],'force-app'))):(_0x457001&&(!_0x2aa424&&(_0x457001=![])),await this['gitUtils'][_0x293614(0x12c)]());_0x457001?(await this[_0x293614(0x145)][_0x293614(0x149)](this[_0x293614(0x13b)]+_0x293614(0x13a))['send'](),await this[_0x293614(0x12e)][_0x293614(0x15f)](this['mdapiUtils']['dir']),await this[_0x293614(0x12e)][_0x293614(0x157)](this['gitUtils'][_0x293614(0x113)],!_0x2aa424),await this['sfdxUtils'][_0x293614(0x10f)]()):(await this['sfLogger']['log'](this['prefix']+_0x293614(0x160))['send'](),await this['mdapiUtils'][_0x293614(0x137)](this['gitUtils']['dir']));await this[_0x293614(0x145)][_0x293614(0x149)](this['prefix']+_0x293614(0x11e))[_0x293614(0x151)](),await this[_0x293614(0x148)][_0x293614(0x13d)](_0x8e933f,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x42585c[_0x293614(0x15b)]},_0x4ac484[_0x293614(0x15b)]),await this[_0x293614(0x148)][_0x293614(0x10f)](),await this['mdapiUtils'][_0x293614(0x10f)]();const _0x2b3941=this[_0x293614(0x105)]+this[_0x293614(0x123)];await this[_0x293614(0x145)][_0x293614(0x149)](this[_0x293614(0x13b)]+_0x293614(0x13c)+(Date[_0x293614(0x139)]()-this['startTime'])+_0x293614(0x10a)+_0x2b3941+'.')[_0x293614(0x151)]();}catch(_0x416079){await this['cleanUp'](),await this[_0x293614(0x145)]['error'](this[_0x293614(0x13b)]+'\x20'+_0x416079)['send']();throw _0x416079;}}async['run'](_0x18fd7a,_0x2b9e88){const _0x1c9c29=a104_0x2afe18;var _0x2b3c8f,_0x5dc51c;this[_0x1c9c29(0x145)]=typedi_1[_0x1c9c29(0x165)][_0x1c9c29(0x12d)](providers_tokens_1[_0x1c9c29(0x147)][_0x1c9c29(0x143)]),this[_0x1c9c29(0x13b)]=(_0x2b9e88?_0x2b9e88+'\x20':'')+'['+commit_components_dto_1[_0x1c9c29(0xfa)][_0x1c9c29(0x15b)]+']',await this[_0x1c9c29(0x145)][_0x1c9c29(0x149)](this[_0x1c9c29(0x13b)]+_0x1c9c29(0x108));const _0x26dfbe=!!((_0x2b3c8f=_0x18fd7a[_0x1c9c29(0x14d)])===null||_0x2b3c8f===void 0x0?void 0x0:_0x2b3c8f['writed'])||!!((_0x5dc51c=_0x18fd7a[_0x1c9c29(0x14d)])===null||_0x5dc51c===void 0x0?void 0x0:_0x5dc51c['deleted']);if(!_0x26dfbe){await this[_0x1c9c29(0x145)]['log'](this['prefix']+_0x1c9c29(0x114))[_0x1c9c29(0x151)]();return;}this['commitData']=_0x18fd7a,await this[_0x1c9c29(0x109)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a104_0x2afe18(0x10e)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;