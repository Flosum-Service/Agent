function a121_0x53df(_0xd6692f,_0x52d8b7){const _0x41db9e=a121_0x581e();return a121_0x53df=function(_0x5e7c63,_0x5ddde7){_0x5e7c63=_0x5e7c63-0x9c;let _0x581ed6=_0x41db9e[_0x5e7c63];return _0x581ed6;},a121_0x53df(_0xd6692f,_0x52d8b7);}function a121_0x581e(){const _0x729ad7=['../../../../constants','values','531UqfXEb','../../providers/types/git-provider','\x20Wrote\x20','decorate','203804RjhvTl','prototype','\x20Checking\x20written\x20components.','15676okhtzf','componentsToDelete','events','copySFDXIgnoredComponents','credentials','1761430eEbywg','7312446QwKRHn','push','now','writeFlosumComponents','createProjectFrom','splice','dir','CommitComponentsDto','../../providers/providers.tokens','../utils/mdapi.utils','force','deleted','typedi','(((.+)+)+)+$','getOwnPropertyDescriptor','815247kJDGkm','\x20Preparing\x20to\x20delete\x20components','log','toString','sort','prefix','ms.\x20Committed\x20components\x20-\x20','removeComponents','isConvertToSfdx','send','name','writeComponents','mdapiUtils','DEFAULT_GIT_USER_EMAIL','../utils/sfdx.utils','GitUtils','://','writed','isSFDXProject','\x20Nothing\x20to\x20commit.\x20Skip.','isLoggedIn','sfdxUtils','Tokens','\x20Checking\x20deleted\x20components.','componentsToWrite','object','gitUrl','length','GitProvider','getRemote','create','__setModuleDefault','exec','commitAndPush','replace','logger','search','provider','\x20Prepare\x20mdapi\x20files.','\x20Deleted\x20','../../providers/api/bitbucket-api.service','defineProperty','join','reduce','includes','get','\x20Start\x20converting\x20to\x20SFDX.','commitData','8270388hLjKNY','clone','default','../../parsers/data/child-types','catch','path','\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','sfLogger','getProtocol','MDApiUtils','14825856fLuNkA','startTime','\x20Copying\x20mdapi\x20to\x20git\x20folder.','getGitShellAuthorizationString','force-app','groupComponentsByFileName','gitUtils','components','Service','\x20Checking\x20commit\x20components.','__esModule','copyMdapiTo','copyProjectTo','removeDir','../../salesforce/utils/sfdx.utils','fileType','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','\x20Preparing\x20to\x20write\x20components','fileName','COMPONENTS_PER_TICK','FORCE_APP_DEFAULT_DIR','cleanUp','recordType','\x20components','run','function'];a121_0x581e=function(){return _0x729ad7;};return a121_0x581e();}const a121_0x27cc4c=a121_0x53df;(function(_0x234587,_0x52259b){const _0x5c704e=a121_0x53df,_0x40b0f3=_0x234587();while(!![]){try{const _0x3a143a=-parseInt(_0x5c704e(0xe5))/0x1+-parseInt(_0x5c704e(0xcd))/0x2+parseInt(_0x5c704e(0xc9))/0x3*(-parseInt(_0x5c704e(0xd0))/0x4)+parseInt(_0x5c704e(0xd5))/0x5+parseInt(_0x5c704e(0xd6))/0x6+-parseInt(_0x5c704e(0xa3))/0x7+parseInt(_0x5c704e(0xad))/0x8;if(_0x3a143a===_0x52259b)break;else _0x40b0f3['push'](_0x40b0f3['shift']());}catch(_0x11f832){_0x40b0f3['push'](_0x40b0f3['shift']());}}}(a121_0x581e,0x9a49b));const a121_0x5ddde7=(function(){let _0xc489a8=!![];return function(_0x724816,_0xca0cb2){const _0x40fc33=_0xc489a8?function(){if(_0xca0cb2){const _0x2627cd=_0xca0cb2['apply'](_0x724816,arguments);return _0xca0cb2=null,_0x2627cd;}}:function(){};return _0xc489a8=![],_0x40fc33;};}()),a121_0x5e7c63=a121_0x5ddde7(this,function(){const _0x4e6764=a121_0x53df;return a121_0x5e7c63[_0x4e6764(0xe8)]()['search'](_0x4e6764(0xe3))[_0x4e6764(0xe8)]()['constructor'](a121_0x5e7c63)[_0x4e6764(0x109)](_0x4e6764(0xe3));});a121_0x5e7c63();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a121_0x27cc4c(0x103)]?function(_0x4896ea,_0x514d2c,_0x2916c6,_0xbc4b30){const _0xd16a1d=a121_0x27cc4c;if(_0xbc4b30===undefined)_0xbc4b30=_0x2916c6;var _0x541e7f=Object[_0xd16a1d(0xe4)](_0x514d2c,_0x2916c6);(!_0x541e7f||(_0xd16a1d(0xa0)in _0x541e7f?!_0x514d2c['__esModule']:_0x541e7f['writable']||_0x541e7f['configurable']))&&(_0x541e7f={'enumerable':!![],'get':function(){return _0x514d2c[_0x2916c6];}}),Object[_0xd16a1d(0x9c)](_0x4896ea,_0xbc4b30,_0x541e7f);}:function(_0x45c2ec,_0x37ff69,_0x4bbc68,_0x2feac6){if(_0x2feac6===undefined)_0x2feac6=_0x4bbc68;_0x45c2ec[_0x2feac6]=_0x37ff69[_0x4bbc68];}),__setModuleDefault=this&&this[a121_0x27cc4c(0x104)]||(Object[a121_0x27cc4c(0x103)]?function(_0x3246de,_0x17bc4f){const _0x2b2343=a121_0x27cc4c;Object[_0x2b2343(0x9c)](_0x3246de,_0x2b2343(0xa5),{'enumerable':!![],'value':_0x17bc4f});}:function(_0x200bb5,_0x5a351e){const _0x387fb6=a121_0x27cc4c;_0x200bb5[_0x387fb6(0xa5)]=_0x5a351e;}),__decorate=this&&this['__decorate']||function(_0x762b39,_0x572938,_0x32853b,_0x335e33){const _0x5f1192=a121_0x27cc4c;var _0x45689e=arguments['length'],_0x3c66c0=_0x45689e<0x3?_0x572938:_0x335e33===null?_0x335e33=Object['getOwnPropertyDescriptor'](_0x572938,_0x32853b):_0x335e33,_0x22d026;if(typeof Reflect===_0x5f1192(0xfe)&&typeof Reflect[_0x5f1192(0xcc)]===_0x5f1192(0xc6))_0x3c66c0=Reflect['decorate'](_0x762b39,_0x572938,_0x32853b,_0x335e33);else{for(var _0x1539b8=_0x762b39[_0x5f1192(0x100)]-0x1;_0x1539b8>=0x0;_0x1539b8--)if(_0x22d026=_0x762b39[_0x1539b8])_0x3c66c0=(_0x45689e<0x3?_0x22d026(_0x3c66c0):_0x45689e>0x3?_0x22d026(_0x572938,_0x32853b,_0x3c66c0):_0x22d026(_0x572938,_0x32853b))||_0x3c66c0;}return _0x45689e>0x3&&_0x3c66c0&&Object[_0x5f1192(0x9c)](_0x572938,_0x32853b,_0x3c66c0),_0x3c66c0;},__importStar=this&&this['__importStar']||function(_0x5e9fb9){const _0x1177a4=a121_0x27cc4c;if(_0x5e9fb9&&_0x5e9fb9['__esModule'])return _0x5e9fb9;var _0x40f8e5={};if(_0x5e9fb9!=null){for(var _0x3f90a3 in _0x5e9fb9)if(_0x3f90a3!==_0x1177a4(0xa5)&&Object[_0x1177a4(0xce)]['hasOwnProperty']['call'](_0x5e9fb9,_0x3f90a3))__createBinding(_0x40f8e5,_0x5e9fb9,_0x3f90a3);}return __setModuleDefault(_0x40f8e5,_0x5e9fb9),_0x40f8e5;},__importDefault=this&&this['__importDefault']||function(_0x395a7e){const _0x5d5e2e=a121_0x27cc4c;return _0x395a7e&&_0x395a7e[_0x5d5e2e(0xb7)]?_0x395a7e:{'default':_0x395a7e};};Object[a121_0x27cc4c(0x9c)](exports,a121_0x27cc4c(0xb7),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a121_0x27cc4c(0xd2))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a121_0x27cc4c(0xdf)),sfdx_utils_1=require(a121_0x27cc4c(0xf3)),typedi_1=__importStar(require(a121_0x27cc4c(0xe2))),child_types_1=__importDefault(require(a121_0x27cc4c(0xa6))),utils_1=require('../../../shared/utils'),constants_1=require(a121_0x27cc4c(0xc7)),git_provider_1=require(a121_0x27cc4c(0xca)),bitbucket_api_service_1=require(a121_0x27cc4c(0x10d)),sfdx_utils_2=require(a121_0x27cc4c(0xbb)),fs_internal_1=require('../../internal/fs.internal'),path_1=require(a121_0x27cc4c(0xa8)),providers_tokens_1=require(a121_0x27cc4c(0xde)),constants_2=require('../../../../constants');let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(){const _0x52a7cd=a121_0x27cc4c;super(...arguments),this[_0x52a7cd(0xc0)]=0x3e8,this['componentsToWrite']=0x0,this['componentsToDelete']=0x0,this[_0x52a7cd(0xae)]=Date[_0x52a7cd(0xd8)]();}async[a121_0x27cc4c(0x102)](){const _0x294de6=a121_0x27cc4c,{repo:_0x5607f6}=this[_0x294de6(0xa2)],_0x2b127e=typedi_1[_0x294de6(0xa5)][_0x294de6(0xa0)](providers_tokens_1['Tokens'][_0x294de6(0xd4)]);if(this[_0x294de6(0xa2)][_0x294de6(0x10a)]===git_provider_1[_0x294de6(0x101)]['Bitbucket']){const _0x1c41a1=typedi_1[_0x294de6(0xa5)][_0x294de6(0xa0)](bitbucket_api_service_1['BitbucketApiService']);await _0x1c41a1[_0x294de6(0xf9)]();}return _0x5607f6[_0x294de6(0xff)][_0x294de6(0x107)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x294de6(0xab)])(_0x5607f6[_0x294de6(0xff)])+_0x294de6(0xf5)+_0x2b127e[_0x294de6(0xb0)]()+'@');}[a121_0x27cc4c(0xb2)](_0x47f33e){const _0x2a5197=a121_0x27cc4c;var _0x2b82e7;_0x47f33e[_0x2a5197(0xe9)](_0x2d615c=>child_types_1['default'][_0x2a5197(0x9f)](_0x2d615c[_0x2a5197(0xbc)])?0x1:-0x1);const _0x31b37e={};for(const _0x56b424 of _0x47f33e){_0x31b37e[_0x2b82e7=_0x56b424[_0x2a5197(0xbf)]]||(_0x31b37e[_0x2b82e7]=[]),_0x31b37e[_0x56b424[_0x2a5197(0xbf)]][_0x2a5197(0xd7)](_0x56b424);}return Object[_0x2a5197(0xc8)](_0x31b37e)[_0x2a5197(0x9e)]((_0x24aeb0,_0x1a697d)=>[..._0x24aeb0,..._0x1a697d],[]);}async[a121_0x27cc4c(0xf0)](_0x311d6e){const _0xc753f6=a121_0x27cc4c;_0x311d6e=this['groupComponentsByFileName'](_0x311d6e);let _0x3f4f3e=0x0;while(_0x311d6e[_0xc753f6(0x100)]){const _0x57fc81=_0x311d6e[_0xc753f6(0xdb)](0x0,this[_0xc753f6(0xc0)]);await this[_0xc753f6(0xf1)][_0xc753f6(0xd9)](_0x57fc81,{'skipChildErrors':this[_0xc753f6(0xa2)]['branch'][_0xc753f6(0xef)]==='master','recordType':this[_0xc753f6(0xa2)]['recordType']}),_0x3f4f3e+=_0x57fc81[_0xc753f6(0x100)],this[_0xc753f6(0xaa)]['log'](this[_0xc753f6(0xea)]+_0xc753f6(0xcb)+_0x3f4f3e+'/'+this[_0xc753f6(0xfd)]+_0xc753f6(0xc4)),await this[_0xc753f6(0xaa)][_0xc753f6(0xee)]();}}async['removeComponents'](_0x5c9365){const _0x330da2=a121_0x27cc4c;_0x5c9365['sort'](_0x589180=>child_types_1[_0x330da2(0xa5)][_0x330da2(0x9f)](_0x589180['type'])?-0x1:0x1);let _0x3e85a2=0x0;while(_0x5c9365[_0x330da2(0x100)]){const _0x1efcad=_0x5c9365['splice'](0x0,this[_0x330da2(0xc0)]);await this[_0x330da2(0xf1)][_0x330da2(0xec)](_0x1efcad,this[_0x330da2(0xa2)][_0x330da2(0xc3)]),_0x3e85a2+=_0x1efcad[_0x330da2(0x100)],this[_0x330da2(0xaa)][_0x330da2(0xe7)](this['prefix']+_0x330da2(0x10c)+_0x3e85a2+'/'+this[_0x330da2(0xd1)]+_0x330da2(0xc4)),await this[_0x330da2(0xaa)]['send']();}}async[a121_0x27cc4c(0xc2)](){const _0x3fe70b=a121_0x27cc4c;this['gitUtils']&&await this[_0x3fe70b(0xb3)]['removeDir']()[_0x3fe70b(0xa7)](()=>void 0x0),this['mdapiUtils']&&await this[_0x3fe70b(0xf1)][_0x3fe70b(0xba)]()['catch'](()=>void 0x0),this[_0x3fe70b(0xfa)]&&await this[_0x3fe70b(0xfa)]['removeDir']()[_0x3fe70b(0xa7)](()=>void 0x0);}async[a121_0x27cc4c(0x105)](){const _0xba7f63=a121_0x27cc4c,{repo:_0x206454,branch:_0x3aee31,components:_0x4d5ed6,convertToSFDX:_0x5eaa4a,message:_0x55847d,user:_0x3bbe2c}=this['commitData'];this[_0xba7f63(0xf1)]=new mdapi_utils_1[(_0xba7f63(0xac))](),this[_0xba7f63(0xb3)]=new git_utils_1[(_0xba7f63(0xf4))](await this[_0xba7f63(0x102)]()),this[_0xba7f63(0xfa)]=new sfdx_utils_1['SFDXUtils']();let _0x4daca6=_0x5eaa4a&&this[_0xba7f63(0xfa)][_0xba7f63(0xed)](this[_0xba7f63(0xa2)][_0xba7f63(0xc3)]);try{await this[_0xba7f63(0xaa)][_0xba7f63(0xe7)](this[_0xba7f63(0xea)]+'\x20Start\x20cloning\x20repository.')[_0xba7f63(0xee)](),await this[_0xba7f63(0xb3)][_0xba7f63(0xa4)](_0x3aee31[_0xba7f63(0xef)],_0x206454[_0xba7f63(0xef)]);!this['commitData'][_0xba7f63(0xe0)]?(this['sfLogger'][_0xba7f63(0xe7)](this['prefix']+_0xba7f63(0x10b)),await this[_0xba7f63(0xf1)]['prepareMdapi'](this[_0xba7f63(0xb3)]['dir'])):this[_0xba7f63(0xaa)][_0xba7f63(0xe7)](this[_0xba7f63(0xea)]+_0xba7f63(0xa9));await this[_0xba7f63(0xaa)][_0xba7f63(0xe7)](this[_0xba7f63(0xea)]+_0xba7f63(0xcf))[_0xba7f63(0xee)]();_0x4d5ed6['writed']&&(this['sfLogger']['log'](this[_0xba7f63(0xea)]+_0xba7f63(0xbe)),this['componentsToWrite']=_0x4d5ed6['writed'][_0xba7f63(0x100)],await this[_0xba7f63(0xf0)](_0x4d5ed6[_0xba7f63(0xf6)]),await this[_0xba7f63(0xaa)][_0xba7f63(0xee)]());await this[_0xba7f63(0xaa)][_0xba7f63(0xe7)](this[_0xba7f63(0xea)]+_0xba7f63(0xfc))[_0xba7f63(0xee)]();_0x4d5ed6['deleted']&&(this['sfLogger'][_0xba7f63(0xe7)](this[_0xba7f63(0xea)]+_0xba7f63(0xe6)),this[_0xba7f63(0xd1)]=_0x4d5ed6[_0xba7f63(0xe1)][_0xba7f63(0x100)],await this['removeComponents'](_0x4d5ed6[_0xba7f63(0xe1)]),await this['sfLogger'][_0xba7f63(0xee)]());await this[_0xba7f63(0xaa)][_0xba7f63(0xee)]();const _0x2a87b7=await fs_internal_1['FS']['isEmptyDir'](this[_0xba7f63(0xb3)][_0xba7f63(0xdc)]);await sfdx_utils_2['SFDX'][_0xba7f63(0xf7)](this['gitUtils'][_0xba7f63(0xdc)])?(_0x4daca6=!![],await fs_internal_1['FS'][_0xba7f63(0xba)]((0x0,path_1[_0xba7f63(0x9d)])(this[_0xba7f63(0xb3)][_0xba7f63(0xdc)],_0xba7f63(0xb1)))):(_0x4daca6&&(!_0x2a87b7&&(_0x4daca6=![])),await this[_0xba7f63(0xb3)]['clearDir']());_0x4daca6?(await this[_0xba7f63(0xaa)][_0xba7f63(0xe7)](this[_0xba7f63(0xea)]+_0xba7f63(0xa1))[_0xba7f63(0xee)](),await this['sfdxUtils'][_0xba7f63(0xda)](this[_0xba7f63(0xf1)][_0xba7f63(0xdc)]),await this[_0xba7f63(0xfa)][_0xba7f63(0xb9)](this[_0xba7f63(0xb3)][_0xba7f63(0xdc)],!_0x2a87b7),await this['sfdxUtils'][_0xba7f63(0xd3)](this[_0xba7f63(0xf1)][_0xba7f63(0xdc)],(0x0,path_1[_0xba7f63(0x9d)])(this[_0xba7f63(0xb3)]['dir'],constants_2[_0xba7f63(0xc1)])),await this['sfdxUtils'][_0xba7f63(0xba)]()):(await this[_0xba7f63(0xaa)][_0xba7f63(0xe7)](this[_0xba7f63(0xea)]+_0xba7f63(0xaf))[_0xba7f63(0xee)](),await this['mdapiUtils'][_0xba7f63(0xb8)](this['gitUtils'][_0xba7f63(0xdc)]));await this[_0xba7f63(0xaa)][_0xba7f63(0xe7)](this['prefix']+'\x20Committing\x20and\x20pushing\x20source\x20to\x20git.')['send'](),await this[_0xba7f63(0xb3)][_0xba7f63(0x106)](_0x55847d,{'email':constants_1[_0xba7f63(0xf2)],'name':_0x3bbe2c[_0xba7f63(0xef)]},_0x3aee31[_0xba7f63(0xef)]),await this['gitUtils'][_0xba7f63(0xba)](),await this[_0xba7f63(0xf1)][_0xba7f63(0xba)]();const _0x22e228=this[_0xba7f63(0xfd)]+this['componentsToDelete'];await this['sfLogger'][_0xba7f63(0xe7)](this[_0xba7f63(0xea)]+_0xba7f63(0xbd)+(Date[_0xba7f63(0xd8)]()-this['startTime'])+_0xba7f63(0xeb)+_0x22e228+'.')['send']();}catch(_0x432a04){await this[_0xba7f63(0xc2)](),await this[_0xba7f63(0xaa)]['error'](this[_0xba7f63(0xea)]+'\x20'+_0x432a04)[_0xba7f63(0xee)]();throw _0x432a04;}}async[a121_0x27cc4c(0xc5)](_0xc1630a,_0x2a40ac){const _0x19908d=a121_0x27cc4c;var _0x70575c,_0x1b95ec;this[_0x19908d(0xaa)]=typedi_1['default'][_0x19908d(0xa0)](providers_tokens_1[_0x19908d(0xfb)][_0x19908d(0x108)]),this[_0x19908d(0xea)]=(_0x2a40ac?_0x2a40ac+'\x20':'')+'['+commit_components_dto_1[_0x19908d(0xdd)][_0x19908d(0xef)]+']',await this[_0x19908d(0xaa)][_0x19908d(0xe7)](this[_0x19908d(0xea)]+_0x19908d(0xb6));const _0x58096a=!!((_0x70575c=_0xc1630a[_0x19908d(0xb4)])===null||_0x70575c===void 0x0?void 0x0:_0x70575c['writed'])||!!((_0x1b95ec=_0xc1630a[_0x19908d(0xb4)])===null||_0x1b95ec===void 0x0?void 0x0:_0x1b95ec[_0x19908d(0xe1)]);if(!_0x58096a){await this[_0x19908d(0xaa)][_0x19908d(0xe7)](this[_0x19908d(0xea)]+_0x19908d(0xf8))['send']();return;}this[_0x19908d(0xa2)]=_0xc1630a,await this[_0x19908d(0x105)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a121_0x27cc4c(0xb5)])({'transient':!![]})],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;