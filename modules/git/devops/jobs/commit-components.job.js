function a60_0x939c(_0x3ee1cf,_0x5b6061){const _0x1052d9=a60_0x23cc();return a60_0x939c=function(_0x35d339,_0x12903a){_0x35d339=_0x35d339-0xb3;let _0x23cc7e=_0x1052d9[_0x35d339];return _0x23cc7e;},a60_0x939c(_0x3ee1cf,_0x5b6061);}const a60_0x2931a4=a60_0x939c;(function(_0x1247f5,_0x2bb7c9){const _0x3c3c90=a60_0x939c,_0x3c7605=_0x1247f5();while(!![]){try{const _0x2d323e=parseInt(_0x3c3c90(0x114))/0x1*(parseInt(_0x3c3c90(0xcb))/0x2)+parseInt(_0x3c3c90(0xc8))/0x3*(-parseInt(_0x3c3c90(0xdc))/0x4)+-parseInt(_0x3c3c90(0x119))/0x5*(parseInt(_0x3c3c90(0xe1))/0x6)+-parseInt(_0x3c3c90(0xe6))/0x7+parseInt(_0x3c3c90(0x109))/0x8*(parseInt(_0x3c3c90(0xea))/0x9)+parseInt(_0x3c3c90(0x121))/0xa+parseInt(_0x3c3c90(0xcc))/0xb;if(_0x2d323e===_0x2bb7c9)break;else _0x3c7605['push'](_0x3c7605['shift']());}catch(_0xa6fe0a){_0x3c7605['push'](_0x3c7605['shift']());}}}(a60_0x23cc,0x9a395));const a60_0x12903a=(function(){let _0x4dea51=!![];return function(_0x28ed0b,_0x22c171){const _0x22dee5=_0x4dea51?function(){const _0x5bd8d9=a60_0x939c;if(_0x22c171){const _0x48a417=_0x22c171[_0x5bd8d9(0xfc)](_0x28ed0b,arguments);return _0x22c171=null,_0x48a417;}}:function(){};return _0x4dea51=![],_0x22dee5;};}()),a60_0x35d339=a60_0x12903a(this,function(){const _0x116a91=a60_0x939c;return a60_0x35d339[_0x116a91(0xda)]()[_0x116a91(0x107)]('(((.+)+)+)+$')[_0x116a91(0xda)]()[_0x116a91(0x126)](a60_0x35d339)[_0x116a91(0x107)](_0x116a91(0xc0));});a60_0x35d339();'use strict';function a60_0x23cc(){const _0x1069c4=['\x20Committing\x20and\x20pushing\x20source\x20to\x20git.','copyMdapiTo','includes','__esModule','\x20Wrote\x20','getGitShellAuthorizationString','\x20Nothing\x20to\x20commit.\x20Skip.','MDApiUtils','provider','(((.+)+)+)+$','sfLogger','\x20Checking\x20commit\x20components.','getRemote','dir','createProjectFrom','__importStar','../../salesforce/utils/sfdx.utils','6AJyDtG','join','logger','8906WWuOjM','7329113KYPqIB','\x20Preparing\x20to\x20write\x20components','cleanUp','push','copyProjectTo','../../../shared/utils','Bitbucket','../../providers/api/bitbucket-api.service','../../providers/types/git-provider','\x20Prepare\x20mdapi\x20files.','__setModuleDefault','writed','__createBinding','COMPONENTS_PER_TICK','toString','exec','1319264ISbVML','writeFlosumComponents','\x20Checking\x20written\x20components.','../../../../constants','prototype','457260bXNJGc','force','get','mdapiUtils','removeDir','1137094YxTUTP','typedi','fileType','reduce','537885bKifJq','startTime','default','splice','DEFAULT_GIT_USER_EMAIL','isSFDXProject','GitProvider','__importDefault','prefix','componentsToDelete','CommitComponentsJob','run','Service','\x20Preparing\x20to\x20delete\x20components','\x20Deleted\x20','\x20Copying\x20mdapi\x20to\x20git\x20folder.','\x20Checking\x20deleted\x20components.','force-app','apply','writeComponents','type','length','BitbucketApiService','clearDir','../../providers/providers.tokens','create','sfdxUtils','isEmptyDir','getOwnPropertyDescriptor','search','replace','16yyRjNw','call','gitUrl','../utils/mdapi.utils','groupComponentsByFileName','events','components','Tokens','\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','decorate','removeComponents','163nXNFAE','catch','name','function','send','55ezywyM','componentsToWrite','sort','gitUtils','../utils/sfdx.utils','deleted','now','CommitComponentsDto','7804330Kdcrcb','error','defineProperty','hasOwnProperty','../../internal/fs.internal','constructor','fileName','\x20components','\x20Start\x20cloning\x20repository.','credentials','log','commitAndPush','getProtocol','commitData'];a60_0x23cc=function(){return _0x1069c4;};return a60_0x23cc();}var __createBinding=this&&this[a60_0x2931a4(0xd8)]||(Object[a60_0x2931a4(0x103)]?function(_0x203a15,_0x5548fe,_0x5c2c2a,_0x1b20ea){const _0x12036a=a60_0x2931a4;if(_0x1b20ea===undefined)_0x1b20ea=_0x5c2c2a;Object[_0x12036a(0x123)](_0x203a15,_0x1b20ea,{'enumerable':!![],'get':function(){return _0x5548fe[_0x5c2c2a];}});}:function(_0x59b7d4,_0x2c8beb,_0xda65db,_0xf9bc03){if(_0xf9bc03===undefined)_0xf9bc03=_0xda65db;_0x59b7d4[_0xf9bc03]=_0x2c8beb[_0xda65db];}),__setModuleDefault=this&&this[a60_0x2931a4(0xd6)]||(Object['create']?function(_0x51a96a,_0x107d00){const _0x180978=a60_0x2931a4;Object[_0x180978(0x123)](_0x51a96a,'default',{'enumerable':!![],'value':_0x107d00});}:function(_0xb510d3,_0x16aac4){const _0x42ce90=a60_0x2931a4;_0xb510d3[_0x42ce90(0xec)]=_0x16aac4;}),__decorate=this&&this['__decorate']||function(_0x109ffc,_0x216950,_0x35917e,_0x5baf22){const _0xa51790=a60_0x2931a4;var _0x5685b6=arguments[_0xa51790(0xff)],_0x522e98=_0x5685b6<0x3?_0x216950:_0x5baf22===null?_0x5baf22=Object[_0xa51790(0x106)](_0x216950,_0x35917e):_0x5baf22,_0x191a7f;if(typeof Reflect==='object'&&typeof Reflect[_0xa51790(0x112)]===_0xa51790(0x117))_0x522e98=Reflect[_0xa51790(0x112)](_0x109ffc,_0x216950,_0x35917e,_0x5baf22);else{for(var _0x5c83a0=_0x109ffc[_0xa51790(0xff)]-0x1;_0x5c83a0>=0x0;_0x5c83a0--)if(_0x191a7f=_0x109ffc[_0x5c83a0])_0x522e98=(_0x5685b6<0x3?_0x191a7f(_0x522e98):_0x5685b6>0x3?_0x191a7f(_0x216950,_0x35917e,_0x522e98):_0x191a7f(_0x216950,_0x35917e))||_0x522e98;}return _0x5685b6>0x3&&_0x522e98&&Object[_0xa51790(0x123)](_0x216950,_0x35917e,_0x522e98),_0x522e98;},__importStar=this&&this[a60_0x2931a4(0xc6)]||function(_0x7f5b6){const _0x86a11a=a60_0x2931a4;if(_0x7f5b6&&_0x7f5b6['__esModule'])return _0x7f5b6;var _0x542c04={};if(_0x7f5b6!=null){for(var _0x334f19 in _0x7f5b6)if(_0x334f19!==_0x86a11a(0xec)&&Object[_0x86a11a(0xe0)][_0x86a11a(0x124)][_0x86a11a(0x10a)](_0x7f5b6,_0x334f19))__createBinding(_0x542c04,_0x7f5b6,_0x334f19);}return __setModuleDefault(_0x542c04,_0x7f5b6),_0x542c04;},__importDefault=this&&this[a60_0x2931a4(0xf1)]||function(_0x3e68e4){const _0x4a90b1=a60_0x2931a4;return _0x3e68e4&&_0x3e68e4[_0x4a90b1(0xba)]?_0x3e68e4:{'default':_0x3e68e4};};Object[a60_0x2931a4(0x123)](exports,a60_0x2931a4(0xba),{'value':!![]}),exports[a60_0x2931a4(0xf4)]=void 0x0;const commit_components_dto_1=require('../dto/commit-components.dto'),events_1=__importDefault(require(a60_0x2931a4(0x10e))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a60_0x2931a4(0x10c)),sfdx_utils_1=require(a60_0x2931a4(0x11d)),typedi_1=__importStar(require(a60_0x2931a4(0xe7))),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require(a60_0x2931a4(0xd1)),constants_1=require(a60_0x2931a4(0xdf)),git_provider_1=require(a60_0x2931a4(0xd4)),bitbucket_api_service_1=require(a60_0x2931a4(0xd3)),sfdx_utils_2=require(a60_0x2931a4(0xc7)),fs_internal_1=require(a60_0x2931a4(0x125)),path_1=require('path'),providers_tokens_1=require(a60_0x2931a4(0x102));let CommitComponentsJob=class CommitComponentsJob extends events_1[a60_0x2931a4(0xec)]{constructor(){const _0xdc471b=a60_0x2931a4;super(...arguments),this[_0xdc471b(0xd9)]=0x3e8,this[_0xdc471b(0x11a)]=0x0,this[_0xdc471b(0xf3)]=0x0,this[_0xdc471b(0xeb)]=Date['now']();}async[a60_0x2931a4(0xc3)](){const _0x5a9c2a=a60_0x2931a4,{repo:_0x5c00b1}=this['commitData'],_0x3e7e09=typedi_1[_0x5a9c2a(0xec)][_0x5a9c2a(0xe3)](providers_tokens_1[_0x5a9c2a(0x110)][_0x5a9c2a(0x12a)]);if(this[_0x5a9c2a(0xb6)][_0x5a9c2a(0xbf)]===git_provider_1[_0x5a9c2a(0xf0)][_0x5a9c2a(0xd2)]){const _0x3733a7=typedi_1[_0x5a9c2a(0xec)][_0x5a9c2a(0xe3)](bitbucket_api_service_1[_0x5a9c2a(0x100)]);await _0x3733a7['isLoggedIn']();}return _0x5c00b1[_0x5a9c2a(0x10b)][_0x5a9c2a(0x108)](/http(s)?:\/\/(.+@)?/,utils_1[_0x5a9c2a(0xb5)](_0x5c00b1[_0x5a9c2a(0x10b)])+'://'+_0x3e7e09[_0x5a9c2a(0xbc)]()+'@');}[a60_0x2931a4(0x10d)](_0x6cad67){const _0x285bd2=a60_0x2931a4;var _0x38f57b;_0x6cad67['sort'](_0x38881f=>child_types_1[_0x285bd2(0xec)]['includes'](_0x38881f[_0x285bd2(0xe8)])?0x1:-0x1);const _0x29e8d1={};for(const _0x1b93c7 of _0x6cad67){_0x29e8d1[_0x38f57b=_0x1b93c7[_0x285bd2(0x127)]]||(_0x29e8d1[_0x38f57b]=[]),_0x29e8d1[_0x1b93c7[_0x285bd2(0x127)]][_0x285bd2(0xcf)](_0x1b93c7);}return Object['values'](_0x29e8d1)[_0x285bd2(0xe9)]((_0x1e07c1,_0x421124)=>[..._0x1e07c1,..._0x421124],[]);}async['writeComponents'](_0x18215d){const _0x61b326=a60_0x2931a4;_0x18215d=this[_0x61b326(0x10d)](_0x18215d);let _0x38736e=0x0;while(_0x18215d[_0x61b326(0xff)]){const _0x3c1c0f=_0x18215d['splice'](0x0,this[_0x61b326(0xd9)]);await this[_0x61b326(0xe4)][_0x61b326(0xdd)](_0x3c1c0f,{'skipChildErrors':this['commitData']['branch'][_0x61b326(0x116)]==='master'}),_0x38736e+=_0x3c1c0f['length'],this['sfLogger'][_0x61b326(0xb3)](this[_0x61b326(0xf2)]+_0x61b326(0xbb)+_0x38736e+'/'+this[_0x61b326(0x11a)]+_0x61b326(0x128)),await this['sfLogger'][_0x61b326(0x118)]();}}async[a60_0x2931a4(0x113)](_0x4dbfa0){const _0x22cbe5=a60_0x2931a4;_0x4dbfa0[_0x22cbe5(0x11b)](_0x3f69da=>child_types_1['default'][_0x22cbe5(0xb9)](_0x3f69da[_0x22cbe5(0xfe)])?-0x1:0x1);let _0xa7638e=0x0;while(_0x4dbfa0[_0x22cbe5(0xff)]){const _0x27ca11=_0x4dbfa0[_0x22cbe5(0xed)](0x0,this[_0x22cbe5(0xd9)]);await this['mdapiUtils'][_0x22cbe5(0x113)](_0x27ca11),_0xa7638e+=_0x27ca11[_0x22cbe5(0xff)],this[_0x22cbe5(0xc1)][_0x22cbe5(0xb3)](this[_0x22cbe5(0xf2)]+_0x22cbe5(0xf8)+_0xa7638e+'/'+this[_0x22cbe5(0xf3)]+_0x22cbe5(0x128)),await this[_0x22cbe5(0xc1)][_0x22cbe5(0x118)]();}}async[a60_0x2931a4(0xce)](){const _0x57f499=a60_0x2931a4;this[_0x57f499(0x11c)]&&await this[_0x57f499(0x11c)][_0x57f499(0xe5)]()[_0x57f499(0x115)](()=>void 0x0),this[_0x57f499(0xe4)]&&await this[_0x57f499(0xe4)][_0x57f499(0xe5)]()[_0x57f499(0x115)](()=>void 0x0),this['sfdxUtils']&&await this[_0x57f499(0x104)]['removeDir']()[_0x57f499(0x115)](()=>void 0x0);}async[a60_0x2931a4(0xdb)](){const _0x5c9e13=a60_0x2931a4,{repo:_0x5d66cf,branch:_0x168709,components:_0x21ae66,convertToSFDX:_0x5c727a,message:_0x482886,user:_0x3d0f1c}=this[_0x5c9e13(0xb6)];this[_0x5c9e13(0xe4)]=new mdapi_utils_1[(_0x5c9e13(0xbe))](),this[_0x5c9e13(0x11c)]=new git_utils_1['GitUtils'](await this[_0x5c9e13(0xc3)]()),this['sfdxUtils']=new sfdx_utils_1['SFDXUtils']();let _0x49353f=_0x5c727a;try{await this[_0x5c9e13(0xc1)][_0x5c9e13(0xb3)](this['prefix']+_0x5c9e13(0x129))[_0x5c9e13(0x118)](),await this[_0x5c9e13(0x11c)]['clone'](_0x168709[_0x5c9e13(0x116)],_0x5d66cf['name']);!this[_0x5c9e13(0xb6)][_0x5c9e13(0xe2)]?(this[_0x5c9e13(0xc1)]['log'](this[_0x5c9e13(0xf2)]+_0x5c9e13(0xd5)),await this['mdapiUtils']['prepareMdapi'](this[_0x5c9e13(0x11c)][_0x5c9e13(0xc4)])):this[_0x5c9e13(0xc1)][_0x5c9e13(0xb3)](this['prefix']+'\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');await this[_0x5c9e13(0xc1)][_0x5c9e13(0xb3)](this['prefix']+_0x5c9e13(0xde))[_0x5c9e13(0x118)]();_0x21ae66['writed']&&(this[_0x5c9e13(0xc1)][_0x5c9e13(0xb3)](this[_0x5c9e13(0xf2)]+_0x5c9e13(0xcd)),this['componentsToWrite']=_0x21ae66['writed'][_0x5c9e13(0xff)],await this[_0x5c9e13(0xfd)](_0x21ae66[_0x5c9e13(0xd7)]),await this[_0x5c9e13(0xc1)][_0x5c9e13(0x118)]());await this['sfLogger']['log'](this['prefix']+_0x5c9e13(0xfa))[_0x5c9e13(0x118)]();_0x21ae66['deleted']&&(this[_0x5c9e13(0xc1)][_0x5c9e13(0xb3)](this[_0x5c9e13(0xf2)]+_0x5c9e13(0xf7)),this[_0x5c9e13(0xf3)]=_0x21ae66[_0x5c9e13(0x11e)]['length'],await this['removeComponents'](_0x21ae66[_0x5c9e13(0x11e)]),await this[_0x5c9e13(0xc1)][_0x5c9e13(0x118)]());await this['sfLogger']['send']();const _0x5b3df6=await fs_internal_1['FS'][_0x5c9e13(0x105)](this[_0x5c9e13(0x11c)][_0x5c9e13(0xc4)]);await sfdx_utils_2['SFDX'][_0x5c9e13(0xef)](this[_0x5c9e13(0x11c)]['dir'])?(_0x49353f=!![],await fs_internal_1['FS']['removeDir'](path_1[_0x5c9e13(0xc9)](this[_0x5c9e13(0x11c)][_0x5c9e13(0xc4)],_0x5c9e13(0xfb)))):(_0x49353f&&(!_0x5b3df6&&(_0x49353f=![])),await this[_0x5c9e13(0x11c)][_0x5c9e13(0x101)]());_0x49353f?(await this[_0x5c9e13(0xc1)]['log'](this[_0x5c9e13(0xf2)]+'\x20Start\x20converting\x20to\x20SFDX.')[_0x5c9e13(0x118)](),await this[_0x5c9e13(0x104)][_0x5c9e13(0xc5)](this[_0x5c9e13(0xe4)][_0x5c9e13(0xc4)]),await this['sfdxUtils'][_0x5c9e13(0xd0)](this['gitUtils']['dir'],!_0x5b3df6),await this[_0x5c9e13(0x104)][_0x5c9e13(0xe5)]()):(await this[_0x5c9e13(0xc1)][_0x5c9e13(0xb3)](this[_0x5c9e13(0xf2)]+_0x5c9e13(0xf9))[_0x5c9e13(0x118)](),await this[_0x5c9e13(0xe4)][_0x5c9e13(0xb8)](this['gitUtils']['dir']));await this[_0x5c9e13(0xc1)]['log'](this[_0x5c9e13(0xf2)]+_0x5c9e13(0xb7))['send'](),await this[_0x5c9e13(0x11c)][_0x5c9e13(0xb4)](_0x482886,{'email':constants_1[_0x5c9e13(0xee)],'name':_0x3d0f1c[_0x5c9e13(0x116)]},_0x168709[_0x5c9e13(0x116)]),await this[_0x5c9e13(0x11c)]['removeDir'](),await this[_0x5c9e13(0xe4)][_0x5c9e13(0xe5)]();const _0x26be3f=this[_0x5c9e13(0x11a)]+this[_0x5c9e13(0xf3)];await this[_0x5c9e13(0xc1)][_0x5c9e13(0xb3)](this[_0x5c9e13(0xf2)]+_0x5c9e13(0x111)+(Date[_0x5c9e13(0x11f)]()-this[_0x5c9e13(0xeb)])+'ms.\x20Committed\x20components\x20-\x20'+_0x26be3f+'.')[_0x5c9e13(0x118)]();}catch(_0xad823c){await this[_0x5c9e13(0xce)](),await this[_0x5c9e13(0xc1)][_0x5c9e13(0x122)](this[_0x5c9e13(0xf2)]+'\x20'+_0xad823c)[_0x5c9e13(0x118)]();throw _0xad823c;}}async[a60_0x2931a4(0xf5)](_0xc541d1,_0x256924){const _0x37bc90=a60_0x2931a4;var _0x306cea,_0x23f68d;this[_0x37bc90(0xc1)]=typedi_1['default'][_0x37bc90(0xe3)](providers_tokens_1[_0x37bc90(0x110)][_0x37bc90(0xca)]),this[_0x37bc90(0xf2)]=(_0x256924?_0x256924+'\x20':'')+'['+commit_components_dto_1[_0x37bc90(0x120)][_0x37bc90(0x116)]+']',await this[_0x37bc90(0xc1)][_0x37bc90(0xb3)](this['prefix']+_0x37bc90(0xc2));const _0x1b06b6=!!((_0x306cea=_0xc541d1[_0x37bc90(0x10f)])===null||_0x306cea===void 0x0?void 0x0:_0x306cea['writed'])||!!((_0x23f68d=_0xc541d1[_0x37bc90(0x10f)])===null||_0x23f68d===void 0x0?void 0x0:_0x23f68d[_0x37bc90(0x11e)]);if(!_0x1b06b6){await this[_0x37bc90(0xc1)][_0x37bc90(0xb3)](this[_0x37bc90(0xf2)]+_0x37bc90(0xbd))['send']();return;}this[_0x37bc90(0xb6)]=_0xc541d1,await this['exec']();}};CommitComponentsJob=__decorate([typedi_1[a60_0x2931a4(0xf6)]({'transient':!![]})],CommitComponentsJob),exports[a60_0x2931a4(0xf4)]=CommitComponentsJob;