const a124_0x320eaa=a124_0x3f5a;(function(_0x42946c,_0x57d238){const _0x27f1ab=a124_0x3f5a,_0xcf9f5f=_0x42946c();while(!![]){try{const _0x158a51=parseInt(_0x27f1ab(0x18a))/0x1*(-parseInt(_0x27f1ab(0x1ba))/0x2)+parseInt(_0x27f1ab(0x11f))/0x3+parseInt(_0x27f1ab(0x14e))/0x4*(parseInt(_0x27f1ab(0x1ab))/0x5)+parseInt(_0x27f1ab(0x120))/0x6+-parseInt(_0x27f1ab(0x185))/0x7+parseInt(_0x27f1ab(0x1b8))/0x8+parseInt(_0x27f1ab(0x132))/0x9*(parseInt(_0x27f1ab(0x11e))/0xa);if(_0x158a51===_0x57d238)break;else _0xcf9f5f['push'](_0xcf9f5f['shift']());}catch(_0x114f32){_0xcf9f5f['push'](_0xcf9f5f['shift']());}}}(a124_0x3966,0xe52a2));function a124_0x3f5a(_0xe07713,_0x3d74bf){const _0x29d2fc=a124_0x3966();return a124_0x3f5a=function(_0x367fff,_0x77ba68){_0x367fff=_0x367fff-0x117;let _0x3966f3=_0x29d2fc[_0x367fff];return _0x3966f3;},a124_0x3f5a(_0xe07713,_0x3d74bf);}const a124_0x77ba68=(function(){let _0x45eb9a=!![];return function(_0x1b538c,_0x143651){const _0x1f454e=_0x45eb9a?function(){const _0x280bd8=a124_0x3f5a;if(_0x143651){const _0x3ee1ae=_0x143651[_0x280bd8(0x13b)](_0x1b538c,arguments);return _0x143651=null,_0x3ee1ae;}}:function(){};return _0x45eb9a=![],_0x1f454e;};}()),a124_0x367fff=a124_0x77ba68(this,function(){const _0x466655=a124_0x3f5a;return a124_0x367fff[_0x466655(0x1a9)]()[_0x466655(0x16d)]('(((.+)+)+)+$')[_0x466655(0x1a9)]()[_0x466655(0x12b)](a124_0x367fff)[_0x466655(0x16d)](_0x466655(0x1c5));});a124_0x367fff();'use strict';var __createBinding=this&&this[a124_0x320eaa(0x170)]||(Object[a124_0x320eaa(0x1a3)]?function(_0x26c02a,_0x59f030,_0x28216b,_0x157488){const _0x48285d=a124_0x320eaa;if(_0x157488===undefined)_0x157488=_0x28216b;var _0x3f48ce=Object[_0x48285d(0x15e)](_0x59f030,_0x28216b);(!_0x3f48ce||('get'in _0x3f48ce?!_0x59f030[_0x48285d(0x162)]:_0x3f48ce[_0x48285d(0x148)]||_0x3f48ce[_0x48285d(0x18d)]))&&(_0x3f48ce={'enumerable':!![],'get':function(){return _0x59f030[_0x28216b];}}),Object[_0x48285d(0x1ac)](_0x26c02a,_0x157488,_0x3f48ce);}:function(_0x900ec5,_0x249692,_0x3d8fd7,_0x48d0e3){if(_0x48d0e3===undefined)_0x48d0e3=_0x3d8fd7;_0x900ec5[_0x48d0e3]=_0x249692[_0x3d8fd7];}),__setModuleDefault=this&&this[a124_0x320eaa(0x144)]||(Object['create']?function(_0x593b71,_0x118ffd){const _0x2ad14a=a124_0x320eaa;Object['defineProperty'](_0x593b71,_0x2ad14a(0x198),{'enumerable':!![],'value':_0x118ffd});}:function(_0x56c8f8,_0x597c79){const _0x3d648b=a124_0x320eaa;_0x56c8f8[_0x3d648b(0x198)]=_0x597c79;}),__decorate=this&&this[a124_0x320eaa(0x1c8)]||function(_0x309982,_0x1a9d2e,_0x594a9f,_0x36a309){const _0x247474=a124_0x320eaa;var _0x38a203=arguments[_0x247474(0x19f)],_0x183264=_0x38a203<0x3?_0x1a9d2e:_0x36a309===null?_0x36a309=Object[_0x247474(0x15e)](_0x1a9d2e,_0x594a9f):_0x36a309,_0x2f121c;if(typeof Reflect===_0x247474(0x1bb)&&typeof Reflect['decorate']===_0x247474(0x118))_0x183264=Reflect[_0x247474(0x1aa)](_0x309982,_0x1a9d2e,_0x594a9f,_0x36a309);else{for(var _0x285db5=_0x309982[_0x247474(0x19f)]-0x1;_0x285db5>=0x0;_0x285db5--)if(_0x2f121c=_0x309982[_0x285db5])_0x183264=(_0x38a203<0x3?_0x2f121c(_0x183264):_0x38a203>0x3?_0x2f121c(_0x1a9d2e,_0x594a9f,_0x183264):_0x2f121c(_0x1a9d2e,_0x594a9f))||_0x183264;}return _0x38a203>0x3&&_0x183264&&Object[_0x247474(0x1ac)](_0x1a9d2e,_0x594a9f,_0x183264),_0x183264;},__importStar=this&&this[a124_0x320eaa(0x133)]||function(_0x132840){const _0x4aa65f=a124_0x320eaa;if(_0x132840&&_0x132840[_0x4aa65f(0x162)])return _0x132840;var _0x5cea20={};if(_0x132840!=null){for(var _0x11d16d in _0x132840)if(_0x11d16d!==_0x4aa65f(0x198)&&Object[_0x4aa65f(0x137)][_0x4aa65f(0x18c)][_0x4aa65f(0x179)](_0x132840,_0x11d16d))__createBinding(_0x5cea20,_0x132840,_0x11d16d);}return __setModuleDefault(_0x5cea20,_0x132840),_0x5cea20;},__metadata=this&&this[a124_0x320eaa(0x155)]||function(_0xa05949,_0x5c9a9a){const _0x3f0e9e=a124_0x320eaa;if(typeof Reflect===_0x3f0e9e(0x1bb)&&typeof Reflect[_0x3f0e9e(0x159)]===_0x3f0e9e(0x118))return Reflect[_0x3f0e9e(0x159)](_0xa05949,_0x5c9a9a);},GitCommitJob_1;function a124_0x3966(){const _0xb00be3=['../../salesforce/errors/salesforce.error','../utils/git.utils','readDir','\x20Cloning\x20git\x20repository\x20from\x20','getRemote','repository','DEFAULT_GIT_USER_NAME','search','getProtocol','../../providers/types/git-provider','__createBinding','relative','getRemoteHash','Tokens','../../salesforce/services/salesforce-logger-v3.service','readFilesByFilename','prepareMdapi','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','path','call','replace',']\x20[','getBranchId','Git','MAX_COMPONENTS_PER_TICK','message','\x20Fetch\x20remote\x20branch\x20hash.','../../../../constants','FlosumCommitError','values','dir','5085325ERvhfM','get','isLoggedIn','lastCommitHash','modified','644453mgcVqO','sendComponents','hasOwnProperty','configurable','convertToCleanPaths','log','GitCommitJob','sfLogger','\x20files\x20before\x20sync.','GitCommitService','reduce',']\x20[Branch:\x20','Logger','design:paramtypes','default','updateStatus','stats','commitId','\x20Start\x20Git-commit\x20job.','\x20Download\x20components\x20metadata\x20from\x20Flosum.','\x20components.','length','DEFAULT_GIT_USER_EMAIL','force','env','create','updateFileNamesForSFDXProject','\x20Fetch\x20salesforce\x20data.','YES','credentials','recordType','toString','decorate','5omAysu','defineProperty','gitCommit','catch','\x20Commit\x20Summary','\x20Removed\x20','../../providers/providers.tokens','Service','commits','GitUtils','gitCommitData','fetchComponentsMetadata','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','2461712qCKwiq','providersFactory','2SHNVjQ','object','name','error','gitUtils','getRecordTypes','createLoggerId','\x20Processed\x20','mdapiUtils','branch','setLoggerId','(((.+)+)+)+$','../../salesforce/utils/sfdx.utils','getGitShellAuthorizationString','__decorate','files',']\x20Start\x20proceeding\x20git\x20commits.\x20','function','fetchCommits','Branch\x20synchronized.\x20Skip.','run','\x20components','\x20Added\x20','24040HGsdKY','2742474WyEnbv','3974442CuNfRq','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','../../salesforce/types/sf-logger-v3-types','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','PathUtils','fileNames','send','updateRemoteState','../services/git-commit.service','getRepositoryId','repositoryGit','constructor','SFDX','prepareGitChangedPaths','../../parsers/utils','removed','logger','../../internal/git.internal','846uHOBmA','__importStar','../../../../core','config','getCurrentHash','prototype','handleCommit','setCommitDto','provider','apply','email','resetStats','username','createCommit','SalesforceLogger3','added','\x20Job\x20done.','push','__setModuleDefault','SalesforceError','checkoutTo','splice','writable','SalesforceCommitsManager','changes','://','getLoggerId','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','797324HPfVEL','gitApiService','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','isSFDXProject','Bitbucket','\x20Modified\x20','shift','__metadata','../../providers/api/bitbucket-api.service','../../internal/fs.internal','../utils/path.utils','metadata','../errors/flosum-commit.error','inserted','prefix','proceedCommits','getOwnPropertyDescriptor','sync\x20components','removeDir','cleanUp','__esModule','commit','\x20[SFDX:\x20','Error'];a124_0x3966=function(){return _0xb00be3;};return a124_0x3966();}Object[a124_0x320eaa(0x1ac)](exports,a124_0x320eaa(0x162),{'value':!![]}),exports[a124_0x320eaa(0x190)]=void 0x0;const core_1=require(a124_0x320eaa(0x134)),fs_internal_1=require(a124_0x320eaa(0x157)),salesforce_logger_v3_service_1=require(a124_0x320eaa(0x174)),utils_1=require('../../../shared/utils'),path_1=require(a124_0x320eaa(0x178)),typedi_1=__importStar(require('typedi')),constants_1=require(a124_0x320eaa(0x181)),salesforce_commits_manager_service_1=require('../../salesforce/services/salesforce-commits-manager.service'),git_utils_1=require(a124_0x320eaa(0x167)),mdapi_utils_1=require('../utils/mdapi.utils'),api_error_1=require('../../../../core/errors/api.error'),salesforce_error_1=require(a124_0x320eaa(0x166)),git_commit_service_1=require(a124_0x320eaa(0x128)),flosum_commit_error_1=require(a124_0x320eaa(0x15a)),bitbucket_api_service_1=require(a124_0x320eaa(0x156)),git_provider_1=require(a124_0x320eaa(0x16f)),sfdx_utils_1=require(a124_0x320eaa(0x1c6)),utils_2=require(a124_0x320eaa(0x12e)),git_internal_1=require(a124_0x320eaa(0x131)),providers_tokens_1=require(a124_0x320eaa(0x1b1)),connection_1=require('../utils/connection'),sf_logger_v3_types_1=require(a124_0x320eaa(0x122)),path_utils_1=require(a124_0x320eaa(0x158));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x543b5f,_0x25e961){const _0x3a18ed=a124_0x320eaa;this[_0x3a18ed(0x1ad)]=_0x543b5f,this[_0x3a18ed(0x1b9)]=_0x25e961,this['MAX_COMPONENTS_PER_TICK']=+(process[_0x3a18ed(0x1a2)][_0x3a18ed(0x17e)]||0xbb8),this[_0x3a18ed(0x130)]=new core_1[(_0x3a18ed(0x196))](GitCommitJob_1['name']),this['commitId']='',this[_0x3a18ed(0x19a)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a124_0x320eaa(0x16a)](){const _0x479ed7=a124_0x320eaa,{repositoryGit:_0x3b0459}=this[_0x479ed7(0x1b5)],_0x2415d0=typedi_1[_0x479ed7(0x198)][_0x479ed7(0x186)](providers_tokens_1['Tokens'][_0x479ed7(0x1a7)]);if(this['gitCommitData'][_0x479ed7(0x13a)]===git_provider_1['GitProvider'][_0x479ed7(0x152)]){const _0x1a4321=typedi_1[_0x479ed7(0x198)][_0x479ed7(0x186)](bitbucket_api_service_1['BitbucketApiService']);await _0x1a4321[_0x479ed7(0x187)]();}return _0x3b0459[_0x479ed7(0x17a)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x479ed7(0x16e)])(_0x3b0459)+_0x479ed7(0x14b)+_0x2415d0[_0x479ed7(0x1c7)]()+'@');}[a124_0x320eaa(0x13d)](){this['stats']={'removed':0x0,'modified':0x0,'added':0x0};}async[a124_0x320eaa(0x1a4)](){const _0x5c1540=a124_0x320eaa,_0x48f0e8=[...this[_0x5c1540(0x1b5)][_0x5c1540(0x125)]];this[_0x5c1540(0x1b5)]['fileNames']=[];for(const _0x5245fa of _0x48f0e8){this[_0x5c1540(0x1b5)]['fileNames'][_0x5c1540(0x143)](...await(0x0,utils_2[_0x5c1540(0x175)])(_0x5245fa,this[_0x5c1540(0x1c2)][_0x5c1540(0x184)]));}}async[a124_0x320eaa(0x119)](){const _0x4520ce=a124_0x320eaa;if(this[_0x4520ce(0x1b5)]['force'])return;const _0x3e2269=[];for(const _0x220f6e of this['gitCommitData'][_0x4520ce(0x1b3)]){const _0x3a0319=await this['gitUtils']['describeCommit'](_0x220f6e['id']);_0x220f6e[_0x4520ce(0x13e)]=_0x3a0319['author'],_0x220f6e[_0x4520ce(0x17f)]=_0x3a0319['message'],_0x220f6e[_0x4520ce(0x1c9)]=_0x3a0319[_0x4520ce(0x14a)],_0x220f6e[_0x4520ce(0x13c)]=_0x3a0319['email'];if(_0x220f6e[_0x4520ce(0x13c)]===constants_1[_0x4520ce(0x1a0)])throw new flosum_commit_error_1[(_0x4520ce(0x182))]();_0x3e2269['push'](...Object[_0x4520ce(0x183)](_0x220f6e[_0x4520ce(0x1c9)])['flat']());}this[_0x4520ce(0x1b5)][_0x4520ce(0x125)]=[...new Set(path_utils_1[_0x4520ce(0x124)][_0x4520ce(0x12d)](this[_0x4520ce(0x1ad)][_0x4520ce(0x1a8)],_0x3e2269,![]))];}async[a124_0x320eaa(0x18b)](_0x4c6354,_0x32c844,_0x5b57c0){const _0x437106=a124_0x320eaa,_0x587ce0=_0x5b57c0[_0x437106(0x194)]((_0x7a85de,_0x149af5)=>{const _0x6da736=_0x437106;return _0x7a85de[_0x6da736(0x15b)][_0x6da736(0x143)](..._0x149af5[_0x6da736(0x15b)]),_0x7a85de['modified'][_0x6da736(0x143)](..._0x149af5['modified']),_0x7a85de[_0x6da736(0x12f)][_0x6da736(0x143)](..._0x149af5['removed']),_0x7a85de;},{'inserted':[],'modified':[],'removed':[]}),_0x4cb477=new salesforce_commits_manager_service_1[(_0x437106(0x149))]({'recordTypes':this[_0x437106(0x1ad)][_0x437106(0x1bf)](),'branchId':this[_0x437106(0x1ad)][_0x437106(0x17c)](),'repositoryId':this[_0x437106(0x1ad)][_0x437106(0x129)](),'logger':this[_0x437106(0x191)],'commitId':this['commitId']});await _0x4cb477[_0x437106(0x15d)]([{'author':_0x4c6354,'message':_0x32c844,'inserted':_0x587ce0[_0x437106(0x15b)],'modified':_0x587ce0[_0x437106(0x189)],'removed':_0x587ce0[_0x437106(0x12f)]}]);}async['handleCommit'](_0x17b7b9,_0x4b35ae){const _0x21040f=a124_0x320eaa;await this[_0x21040f(0x191)]['log'](this['prefix']+_0x21040f(0x19d))['send'](),await this[_0x21040f(0x1ad)][_0x21040f(0x1b6)](_0x4b35ae);const {added:_0x2a0f40,modified:_0x5dbde5,removed:_0x189d48}=_0x17b7b9[_0x21040f(0x1c9)];_0x4b35ae&&_0x5dbde5[_0x21040f(0x143)](..._0x189d48[_0x21040f(0x147)](0x0));const _0x4a0cc8=path_utils_1['PathUtils'][_0x21040f(0x12d)](this[_0x21040f(0x1ad)][_0x21040f(0x1a8)],[..._0x2a0f40,..._0x5dbde5,..._0x189d48],_0x4b35ae&&!this['gitCommitData']['force']),_0x363979=(0x0,utils_2[_0x21040f(0x18e)])(_0x4a0cc8);let _0x999949=0x0;const _0x2e6648=[];(_0x2a0f40[_0x21040f(0x19f)]||_0x5dbde5[_0x21040f(0x19f)])&&this[_0x21040f(0x1ad)][_0x21040f(0x129)]()&&(this[_0x21040f(0x19b)]=await this[_0x21040f(0x1ad)][_0x21040f(0x13f)](_0x17b7b9[_0x21040f(0x17f)]));const _0x2a6d75=_0x363979[_0x21040f(0x19f)];let _0x5385c3=0x0;while(_0x363979[_0x21040f(0x19f)]){const _0x4e4721=_0x363979[_0x21040f(0x154)](),_0x2e1c9b=await this[_0x21040f(0x1ad)]['proceedFile'](_0x4e4721,this['mdapiUtils'][_0x21040f(0x184)],_0x4b35ae&&!this[_0x21040f(0x1b5)][_0x21040f(0x1a1)]);_0x999949+=_0x2e1c9b[_0x21040f(0x15b)]['length']+_0x2e1c9b[_0x21040f(0x12f)][_0x21040f(0x19f)]+_0x2e1c9b[_0x21040f(0x189)][_0x21040f(0x19f)],this[_0x21040f(0x19a)][_0x21040f(0x141)]+=_0x2e1c9b[_0x21040f(0x15b)]['length'],this[_0x21040f(0x19a)][_0x21040f(0x189)]+=_0x2e1c9b['modified']['length'],this[_0x21040f(0x19a)]['removed']+=_0x2e1c9b[_0x21040f(0x12f)][_0x21040f(0x19f)],_0x5385c3++,_0x5385c3%0x64===0x0&&this[_0x21040f(0x130)][_0x21040f(0x18f)](_0x21040f(0x1b7),_0x5385c3,_0x2a6d75,_0x999949),_0x2e6648[_0x21040f(0x143)](_0x2e1c9b),_0x999949>this[_0x21040f(0x17e)]&&(await this['sendComponents'](_0x17b7b9[_0x21040f(0x13e)],_0x17b7b9[_0x21040f(0x17f)],_0x2e6648),await this['sfLogger'][_0x21040f(0x18f)](this[_0x21040f(0x15c)]+'\x20Processed\x20'+_0x999949+_0x21040f(0x19e))['send'](),_0x999949=0x0,_0x2e6648[_0x21040f(0x147)](0x0));}_0x2e6648[_0x21040f(0x19f)]&&(await this[_0x21040f(0x18b)](_0x17b7b9[_0x21040f(0x13e)],_0x17b7b9[_0x21040f(0x17f)],_0x2e6648),await this[_0x21040f(0x191)][_0x21040f(0x18f)](this[_0x21040f(0x15c)]+_0x21040f(0x1c1)+_0x999949+_0x21040f(0x19e))['send']());}async[a124_0x320eaa(0x15d)](_0x7188ea){const _0xe83b82=a124_0x320eaa,_0x2af64e=[...this[_0xe83b82(0x1b5)]['commits']],_0x1acad3=_0x2af64e[_0xe83b82(0x19f)];let _0x1925e6=0x0;while(_0x2af64e[_0xe83b82(0x19f)]){const _0x321867=_0x2af64e[_0xe83b82(0x154)]();!this[_0xe83b82(0x1b5)][_0xe83b82(0x1a1)]&&(this['gitCommit'][_0xe83b82(0x129)]()?(await this[_0xe83b82(0x1be)][_0xe83b82(0x146)](_0x321867['id']),await this[_0xe83b82(0x1c2)][_0xe83b82(0x176)](this[_0xe83b82(0x1be)][_0xe83b82(0x184)])):(await this[_0xe83b82(0x1be)][_0xe83b82(0x146)](this[_0xe83b82(0x188)]),await this[_0xe83b82(0x1c2)]['prepareMdapi'](this[_0xe83b82(0x1be)]['dir']))),await this[_0xe83b82(0x138)](_0x321867,_0x7188ea),await this[_0xe83b82(0x1c2)][_0xe83b82(0x160)](),_0x1925e6+=0x1,await this['sfLogger']['log'](this[_0xe83b82(0x15c)]+_0xe83b82(0x1af)),await this[_0xe83b82(0x191)][_0xe83b82(0x18f)](this[_0xe83b82(0x15c)]+_0xe83b82(0x11d)+this[_0xe83b82(0x19a)][_0xe83b82(0x141)]+_0xe83b82(0x11c)),await this[_0xe83b82(0x191)][_0xe83b82(0x18f)](this[_0xe83b82(0x15c)]+_0xe83b82(0x153)+this[_0xe83b82(0x19a)][_0xe83b82(0x189)]+_0xe83b82(0x11c)),await this[_0xe83b82(0x191)][_0xe83b82(0x18f)](this['prefix']+_0xe83b82(0x1b0)+this['stats']['removed']+_0xe83b82(0x11c)),await this[_0xe83b82(0x191)]['log'](this[_0xe83b82(0x15c)]+'\x20Proceeded\x20'+_0x1925e6+'/'+_0x1acad3+'\x20commits.')[_0xe83b82(0x126)](),this['resetStats']();}}async[a124_0x320eaa(0x161)](){const _0x29fb4a=a124_0x320eaa;this[_0x29fb4a(0x1be)]&&await this[_0x29fb4a(0x1be)][_0x29fb4a(0x160)]()[_0x29fb4a(0x1ae)](()=>void 0x0),this['mdapiUtils']&&await this[_0x29fb4a(0x1c2)][_0x29fb4a(0x160)]()['catch'](()=>void 0x0);}async[a124_0x320eaa(0x11b)](_0x319ac1){const _0x1e8971=a124_0x320eaa;this[_0x1e8971(0x1b5)]=_0x319ac1,this[_0x1e8971(0x1ad)][_0x1e8971(0x139)](this[_0x1e8971(0x1b5)]),this[_0x1e8971(0x14f)]=typedi_1[_0x1e8971(0x198)][_0x1e8971(0x186)](providers_tokens_1[_0x1e8971(0x173)][_0x1e8971(0x14f)]),this[_0x1e8971(0x135)]=typedi_1[_0x1e8971(0x198)][_0x1e8971(0x186)](providers_tokens_1[_0x1e8971(0x173)][_0x1e8971(0x135)]),this[_0x1e8971(0x191)]=typedi_1[_0x1e8971(0x198)]['get'](providers_tokens_1[_0x1e8971(0x173)]['logger']),this[_0x1e8971(0x15c)]=_0x1e8971(0x14d)+_0x319ac1[_0x1e8971(0x16b)]+_0x1e8971(0x195)+_0x319ac1[_0x1e8971(0x1c3)]+_0x1e8971(0x17b)+GitCommitJob_1[_0x1e8971(0x1bc)]+']',this[_0x1e8971(0x1be)]=new git_utils_1[(_0x1e8971(0x1b4))](await this['getRemote']()),this[_0x1e8971(0x1c2)]=new mdapi_utils_1['MDApiUtils'](),this[_0x1e8971(0x191)][_0x1e8971(0x18f)](this[_0x1e8971(0x15c)]+_0x1e8971(0x19c));try{this[_0x1e8971(0x191)]['log'](this['prefix']+_0x1e8971(0x1a5)),await this['gitCommit']['fetchRepositoryOrBranchData'](),await this['gitCommit'][_0x1e8971(0x199)]('In\x20Progress'),this['sfLogger'][_0x1e8971(0x18f)](this[_0x1e8971(0x15c)]+_0x1e8971(0x180)),this[_0x1e8971(0x188)]=await git_internal_1[_0x1e8971(0x17d)][_0x1e8971(0x172)](await this[_0x1e8971(0x16a)](),this[_0x1e8971(0x1b5)][_0x1e8971(0x1c3)]),this[_0x1e8971(0x130)][_0x1e8971(0x18f)]('Last\x20git\x20repository\x20hash\x20is\x20%s.',this[_0x1e8971(0x188)]);const _0x2d5d11=await this[_0x1e8971(0x1ad)]['checkSyncStatus'](this[_0x1e8971(0x188)]);if(_0x2d5d11){this['sfLogger']['log'](_0x1e8971(0x11a)),await this['gitCommit']['updateStatus']('Completed');return;}this[_0x1e8971(0x191)]['log'](this[_0x1e8971(0x15c)]+_0x1e8971(0x169)+this[_0x1e8971(0x1b5)][_0x1e8971(0x12a)]+'.'),await this[_0x1e8971(0x1be)]['clone'](this['gitCommitData']['branch'],this[_0x1e8971(0x1b5)][_0x1e8971(0x16b)]),this[_0x1e8971(0x191)][_0x1e8971(0x18f)](this[_0x1e8971(0x15c)]+_0x1e8971(0x123));const _0x425527=await sfdx_utils_1[_0x1e8971(0x12c)][_0x1e8971(0x151)](this['gitUtils'][_0x1e8971(0x184)]);await this[_0x1e8971(0x119)]();!this[_0x1e8971(0x191)][_0x1e8971(0x14c)]()&&this[_0x1e8971(0x191)][_0x1e8971(0x1c4)](await salesforce_logger_v3_service_1[_0x1e8971(0x140)][_0x1e8971(0x1c0)](sf_logger_v3_types_1['LoggerTypes'][_0x1e8971(0x163)]));await this[_0x1e8971(0x191)][_0x1e8971(0x126)]();if(_0x319ac1['force']){await this['mdapiUtils'][_0x1e8971(0x176)](this[_0x1e8971(0x1be)][_0x1e8971(0x184)]),await this[_0x1e8971(0x191)][_0x1e8971(0x18f)](this[_0x1e8971(0x15c)]+'\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository')[_0x1e8971(0x126)]();const _0x3e0307=(await fs_internal_1['FS'][_0x1e8971(0x168)](this[_0x1e8971(0x1c2)][_0x1e8971(0x184)],!![]))['map'](_0x5dea00=>(0x0,path_1[_0x1e8971(0x171)])(this[_0x1e8971(0x1c2)][_0x1e8971(0x184)],_0x5dea00));this[_0x1e8971(0x191)][_0x1e8971(0x18f)](this[_0x1e8971(0x15c)]+_0x1e8971(0x121)+_0x3e0307[_0x1e8971(0x19f)]+_0x1e8971(0x192)),this[_0x1e8971(0x1b5)][_0x1e8971(0x125)]=[],this[_0x1e8971(0x1b5)][_0x1e8971(0x1b3)]=[{'files':{'modified':_0x3e0307,'added':[],'removed':[]},'id':await this[_0x1e8971(0x1be)][_0x1e8971(0x136)](),'message':_0x1e8971(0x15f),'username':constants_1[_0x1e8971(0x16c)]}];}await this[_0x1e8971(0x1ad)]['updateRemoteState']({[this[_0x1e8971(0x1b5)][_0x1e8971(0x12a)]]:{'lastCommit':this[_0x1e8971(0x188)]}}),await this[_0x1e8971(0x191)][_0x1e8971(0x18f)](this[_0x1e8971(0x15c)]+_0x1e8971(0x164)+(_0x425527?_0x1e8971(0x1a6):'NO')+_0x1e8971(0x117))[_0x1e8971(0x126)](),await this[_0x1e8971(0x15d)](_0x425527),await this[_0x1e8971(0x191)]['log'](this[_0x1e8971(0x15c)]+_0x1e8971(0x142))[_0x1e8971(0x126)](),await this[_0x1e8971(0x1ad)][_0x1e8971(0x199)]('Completed');}catch(_0x568432){await this[_0x1e8971(0x161)]();if(_0x568432 instanceof flosum_commit_error_1[_0x1e8971(0x182)])await this['gitCommit'][_0x1e8971(0x199)]('Completed')[_0x1e8971(0x1ae)](()=>void 0x0),this[_0x1e8971(0x130)][_0x1e8971(0x18f)](this['prefix']+_0x1e8971(0x177));else{await this[_0x1e8971(0x130)][_0x1e8971(0x1bd)](this[_0x1e8971(0x15c)]+_0x1e8971(0x150)+(_0x568432 instanceof api_error_1['ApiError']||_0x568432 instanceof salesforce_error_1[_0x1e8971(0x145)]?_0x568432[_0x1e8971(0x1a9)]():_0x568432)),await this[_0x1e8971(0x1ad)][_0x1e8971(0x127)]({}),await this[_0x1e8971(0x1ad)]['updateStatus'](_0x1e8971(0x165))[_0x1e8971(0x1ae)](()=>void 0x0);throw _0x568432;}}finally{await this[_0x1e8971(0x161)](),await this[_0x1e8971(0x191)][_0x1e8971(0x126)]()[_0x1e8971(0x1ae)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a124_0x320eaa(0x1b2)])({'transient':!![]}),__metadata(a124_0x320eaa(0x197),[git_commit_service_1[a124_0x320eaa(0x193)],connection_1['ProvidersFactory']])],GitCommitJob),exports[a124_0x320eaa(0x190)]=GitCommitJob;