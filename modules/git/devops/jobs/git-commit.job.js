const a106_0x5cf5ab=a106_0x4624;function a106_0x23ed(){const _0x159c02=['metadata','\x20commits.','relative','getOwnPropertyDescriptor','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','__importStar','updateRemoteState','design:paramtypes','ProvidersFactory','catch','\x20Proceeded\x20','getLoggerId','gitCommitData','log',']\x20[Branch:\x20','call','convertToCleanPaths','4808184Corsqa','setLoggerId','__esModule','describeCommit','commit','inserted','providersFactory','provider','commits','\x20Start\x20Git-commit\x20job.','constructor','1304928xnaLEm','stats','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','map','updateStatus','typedi','toString','\x20Processed\x20','../services/git-commit.service','proceedCommits','getRecordTypes','clone','configurable','MDApiUtils','readDir','../../internal/git.internal','run','\x20Fetch\x20remote\x20branch\x20hash.','__createBinding','SalesforceLogger3','../utils/mdapi.utils','get','fetchCommits','hasOwnProperty','mdapiUtils','resetStats','fileNames','YES','fetchComponentsMetadata','Branch\x20synchronized.\x20Skip.','../../salesforce/types/sf-logger-v3-types','SalesforceError','updateFileNamesForSFDXProject','username','\x20Commit\x20Summary','Tokens','FlosumCommitError','../../../../core/errors/api.error','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','Bitbucket','isLoggedIn','dir','GitProvider','prefix','handleCommit','../../salesforce/utils/sfdx.utils','modified','setCommitDto','25eZswlY','getBranchId','MAX_COMPONENTS_PER_TICK','BitbucketApiService','removed','config','../../../../core','__setModuleDefault','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','Completed','../errors/flosum-commit.error','search','1877553znRSfQ','removeDir','checkoutTo','1OTUjUF','540534TdhPkt','send','decorate','../utils/git-commit.utils','reduce','force','name','defineProperty','Error','length','getCurrentHash','getRepositoryId','getRemote','408040SIwggX','values','error','gitCommit','840700Itsuni','commitId','sfLogger','prototype','4770fKEqlf','\x20components','gitUtils','branch','prepareGitChangedPaths','__metadata','prepareMdapi','cleanUp','path','files','../../salesforce/services/salesforce-commits-manager.service','logger','../utils/connection','\x20components.','changes','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','lastCommitHash','../../salesforce/services/salesforce-logger-v3.service','\x20files\x20before\x20sync.','function','proceedFile','../../parsers/utils','sync\x20components','gitApiService','SFDX','__decorate','\x20Modified\x20','\x20Removed\x20','default','33160ROhadr','message','repository','../../../../constants','sendComponents','(((.+)+)+)+$','../../providers/api/bitbucket-api.service','push','getGitShellAuthorizationString','email','GitCommitJob','repositoryGit','readFilesByFilename','createLoggerId'];a106_0x23ed=function(){return _0x159c02;};return a106_0x23ed();}(function(_0x595d2d,_0x3a6e0b){const _0x3dd354=a106_0x4624,_0x55afe2=_0x595d2d();while(!![]){try{const _0x23c7d3=-parseInt(_0x3dd354(0x175))/0x1*(parseInt(_0x3dd354(0x136))/0x2)+-parseInt(_0x3dd354(0x172))/0x3+-parseInt(_0x3dd354(0x183))/0x4*(-parseInt(_0x3dd354(0x166))/0x5)+parseInt(_0x3dd354(0x176))/0x6+-parseInt(_0x3dd354(0x187))/0x7+-parseInt(_0x3dd354(0x12b))/0x8+parseInt(_0x3dd354(0x18b))/0x9*(parseInt(_0x3dd354(0x1a8))/0xa);if(_0x23c7d3===_0x3a6e0b)break;else _0x55afe2['push'](_0x55afe2['shift']());}catch(_0xaf2cb4){_0x55afe2['push'](_0x55afe2['shift']());}}}(a106_0x23ed,0x57725));const a106_0x4c2c96=(function(){let _0x5e0c25=!![];return function(_0x3a5aeb,_0x433332){const _0x35b272=_0x5e0c25?function(){if(_0x433332){const _0x213f79=_0x433332['apply'](_0x3a5aeb,arguments);return _0x433332=null,_0x213f79;}}:function(){};return _0x5e0c25=![],_0x35b272;};}()),a106_0xac51c5=a106_0x4c2c96(this,function(){const _0x326ef1=a106_0x4624;return a106_0xac51c5[_0x326ef1(0x13c)]()[_0x326ef1(0x171)](_0x326ef1(0x1ad))[_0x326ef1(0x13c)]()[_0x326ef1(0x135)](a106_0xac51c5)[_0x326ef1(0x171)](_0x326ef1(0x1ad));});a106_0xac51c5();function a106_0x4624(_0x31ccf5,_0x242831){const _0x5943d2=a106_0x23ed();return a106_0x4624=function(_0xac51c5,_0x4c2c96){_0xac51c5=_0xac51c5-0x120;let _0x23ed2c=_0x5943d2[_0xac51c5];return _0x23ed2c;},a106_0x4624(_0x31ccf5,_0x242831);}'use strict';var __createBinding=this&&this[a106_0x5cf5ab(0x148)]||(Object['create']?function(_0x1fb74b,_0x1c460e,_0xe003e0,_0x142bae){const _0x6d573d=a106_0x5cf5ab;if(_0x142bae===undefined)_0x142bae=_0xe003e0;var _0x50dc70=Object[_0x6d573d(0x1b9)](_0x1c460e,_0xe003e0);(!_0x50dc70||('get'in _0x50dc70?!_0x1c460e[_0x6d573d(0x12d)]:_0x50dc70['writable']||_0x50dc70[_0x6d573d(0x142)]))&&(_0x50dc70={'enumerable':!![],'get':function(){return _0x1c460e[_0xe003e0];}}),Object['defineProperty'](_0x1fb74b,_0x142bae,_0x50dc70);}:function(_0x57a354,_0x475326,_0x51dee4,_0x5ee4eb){if(_0x5ee4eb===undefined)_0x5ee4eb=_0x51dee4;_0x57a354[_0x5ee4eb]=_0x475326[_0x51dee4];}),__setModuleDefault=this&&this[a106_0x5cf5ab(0x16d)]||(Object['create']?function(_0x207366,_0x1800f0){Object['defineProperty'](_0x207366,'default',{'enumerable':!![],'value':_0x1800f0});}:function(_0x7d6c6f,_0x5a58e9){const _0x255681=a106_0x5cf5ab;_0x7d6c6f[_0x255681(0x1a7)]=_0x5a58e9;}),__decorate=this&&this[a106_0x5cf5ab(0x1a4)]||function(_0x51df27,_0x1cef00,_0x1a0dd6,_0x4d9a93){const _0x1a1047=a106_0x5cf5ab;var _0x2348be=arguments[_0x1a1047(0x17f)],_0x1c4d7f=_0x2348be<0x3?_0x1cef00:_0x4d9a93===null?_0x4d9a93=Object[_0x1a1047(0x1b9)](_0x1cef00,_0x1a0dd6):_0x4d9a93,_0x125120;if(typeof Reflect==='object'&&typeof Reflect[_0x1a1047(0x178)]===_0x1a1047(0x19e))_0x1c4d7f=Reflect[_0x1a1047(0x178)](_0x51df27,_0x1cef00,_0x1a0dd6,_0x4d9a93);else{for(var _0x48744e=_0x51df27['length']-0x1;_0x48744e>=0x0;_0x48744e--)if(_0x125120=_0x51df27[_0x48744e])_0x1c4d7f=(_0x2348be<0x3?_0x125120(_0x1c4d7f):_0x2348be>0x3?_0x125120(_0x1cef00,_0x1a0dd6,_0x1c4d7f):_0x125120(_0x1cef00,_0x1a0dd6))||_0x1c4d7f;}return _0x2348be>0x3&&_0x1c4d7f&&Object['defineProperty'](_0x1cef00,_0x1a0dd6,_0x1c4d7f),_0x1c4d7f;},__importStar=this&&this[a106_0x5cf5ab(0x1bb)]||function(_0x2db228){const _0x2c2ca4=a106_0x5cf5ab;if(_0x2db228&&_0x2db228[_0x2c2ca4(0x12d)])return _0x2db228;var _0x41e508={};if(_0x2db228!=null){for(var _0x40a00f in _0x2db228)if(_0x40a00f!==_0x2c2ca4(0x1a7)&&Object[_0x2c2ca4(0x18a)][_0x2c2ca4(0x14d)][_0x2c2ca4(0x129)](_0x2db228,_0x40a00f))__createBinding(_0x41e508,_0x2db228,_0x40a00f);}return __setModuleDefault(_0x41e508,_0x2db228),_0x41e508;},__metadata=this&&this[a106_0x5cf5ab(0x190)]||function(_0x3335ad,_0x4f591b){const _0x49311f=a106_0x5cf5ab;if(typeof Reflect==='object'&&typeof Reflect[_0x49311f(0x1b6)]===_0x49311f(0x19e))return Reflect[_0x49311f(0x1b6)](_0x3335ad,_0x4f591b);},GitCommitJob_1;Object[a106_0x5cf5ab(0x17d)](exports,a106_0x5cf5ab(0x12d),{'value':!![]}),exports[a106_0x5cf5ab(0x1b2)]=void 0x0;const core_1=require(a106_0x5cf5ab(0x16c)),fs_internal_1=require('../../internal/fs.internal'),salesforce_logger_v3_service_1=require(a106_0x5cf5ab(0x19c)),utils_1=require('../../../shared/utils'),path_1=require(a106_0x5cf5ab(0x193)),typedi_1=__importStar(require(a106_0x5cf5ab(0x13b))),constants_1=require(a106_0x5cf5ab(0x1ab)),salesforce_commits_manager_service_1=require(a106_0x5cf5ab(0x195)),git_commit_utils_1=require(a106_0x5cf5ab(0x179)),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a106_0x5cf5ab(0x14a)),api_error_1=require(a106_0x5cf5ab(0x15b)),salesforce_error_1=require('../../salesforce/errors/salesforce.error'),git_commit_service_1=require(a106_0x5cf5ab(0x13e)),flosum_commit_error_1=require(a106_0x5cf5ab(0x170)),bitbucket_api_service_1=require(a106_0x5cf5ab(0x1ae)),git_provider_1=require('../../providers/types/git-provider'),sfdx_utils_1=require(a106_0x5cf5ab(0x163)),utils_2=require(a106_0x5cf5ab(0x1a0)),git_internal_1=require(a106_0x5cf5ab(0x145)),providers_tokens_1=require('../../providers/providers.tokens'),connection_1=require(a106_0x5cf5ab(0x197)),sf_logger_v3_types_1=require(a106_0x5cf5ab(0x154));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x4ed89e,_0x59abdd){const _0x6a9244=a106_0x5cf5ab;this[_0x6a9244(0x186)]=_0x4ed89e,this[_0x6a9244(0x131)]=_0x59abdd,this[_0x6a9244(0x168)]=+(process['env']['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x6a9244(0x196)]=new core_1['Logger'](GitCommitJob_1['name']),this[_0x6a9244(0x188)]='',this[_0x6a9244(0x137)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a106_0x5cf5ab(0x182)](){const _0x5af7a3=a106_0x5cf5ab,{repositoryGit:_0x1d443a}=this[_0x5af7a3(0x126)],_0x292ebf=typedi_1[_0x5af7a3(0x1a7)][_0x5af7a3(0x14b)](providers_tokens_1[_0x5af7a3(0x159)]['credentials']);if(this[_0x5af7a3(0x126)][_0x5af7a3(0x132)]===git_provider_1[_0x5af7a3(0x160)][_0x5af7a3(0x15d)]){const _0x218962=typedi_1[_0x5af7a3(0x1a7)]['get'](bitbucket_api_service_1[_0x5af7a3(0x169)]);await _0x218962[_0x5af7a3(0x15e)]();}return _0x1d443a['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x1d443a)+'://'+_0x292ebf[_0x5af7a3(0x1b0)]()+'@');}[a106_0x5cf5ab(0x14f)](){const _0x25ce05=a106_0x5cf5ab;this[_0x25ce05(0x137)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a106_0x5cf5ab(0x156)](){const _0x2b69e3=a106_0x5cf5ab,_0x3f6658=[...this['gitCommitData'][_0x2b69e3(0x150)]];this[_0x2b69e3(0x126)][_0x2b69e3(0x150)]=[];for(const _0xced397 of _0x3f6658){this['gitCommitData'][_0x2b69e3(0x150)][_0x2b69e3(0x1af)](...await(0x0,utils_2[_0x2b69e3(0x1b4)])(_0xced397,this[_0x2b69e3(0x14e)][_0x2b69e3(0x15f)]));}}async['fetchCommits'](){const _0x51882d=a106_0x5cf5ab;if(this[_0x51882d(0x126)][_0x51882d(0x17b)])return;const _0x1cf3fb=[];for(const _0x3e141d of this['gitCommitData'][_0x51882d(0x133)]){const _0x58df82=await this[_0x51882d(0x18d)][_0x51882d(0x12e)](_0x3e141d['id']);_0x3e141d[_0x51882d(0x157)]=_0x58df82['author'],_0x3e141d[_0x51882d(0x1a9)]=_0x58df82[_0x51882d(0x1a9)],_0x3e141d[_0x51882d(0x194)]=_0x58df82[_0x51882d(0x199)],_0x3e141d[_0x51882d(0x1b1)]=_0x58df82['email'];if(_0x3e141d['email']===constants_1['DEFAULT_GIT_USER_EMAIL'])throw new flosum_commit_error_1[(_0x51882d(0x15a))]();_0x1cf3fb[_0x51882d(0x1af)](...Object[_0x51882d(0x184)](_0x3e141d['files'])['flat']());}this[_0x51882d(0x126)][_0x51882d(0x150)]=[...new Set((0x0,git_commit_utils_1[_0x51882d(0x18f)])(_0x1cf3fb))];}async[a106_0x5cf5ab(0x1ac)](_0x5ca1b9,_0xc076fa,_0x5d8373){const _0x233878=a106_0x5cf5ab,_0x1385f2=_0x5d8373[_0x233878(0x17a)]((_0x388baa,_0x13eb85)=>{const _0x4738ff=_0x233878;return _0x388baa[_0x4738ff(0x130)]['push'](..._0x13eb85[_0x4738ff(0x130)]),_0x388baa['modified']['push'](..._0x13eb85['modified']),_0x388baa[_0x4738ff(0x16a)][_0x4738ff(0x1af)](..._0x13eb85['removed']),_0x388baa;},{'inserted':[],'modified':[],'removed':[]}),_0x481a20=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this[_0x233878(0x186)][_0x233878(0x140)](),'branchId':this[_0x233878(0x186)][_0x233878(0x167)](),'repositoryId':this[_0x233878(0x186)][_0x233878(0x181)](),'logger':this[_0x233878(0x189)],'commitId':this['commitId']});await _0x481a20[_0x233878(0x13f)]([{'author':_0x5ca1b9,'message':_0xc076fa,'inserted':_0x1385f2[_0x233878(0x130)],'modified':_0x1385f2['modified'],'removed':_0x1385f2['removed']}]);}async['handleCommit'](_0x23f1ca,_0x2340fe){const _0x4cf9da=a106_0x5cf5ab;await this[_0x4cf9da(0x189)][_0x4cf9da(0x127)](this[_0x4cf9da(0x161)]+'\x20Download\x20components\x20metadata\x20from\x20Flosum.')[_0x4cf9da(0x177)](),await this[_0x4cf9da(0x186)][_0x4cf9da(0x152)](_0x2340fe);const {added:_0x16d35f,modified:_0x79722,removed:_0x5198ce}=_0x23f1ca[_0x4cf9da(0x194)];_0x2340fe&&_0x79722[_0x4cf9da(0x1af)](..._0x5198ce['splice'](0x0));const _0x355654=(0x0,utils_2[_0x4cf9da(0x12a)])((0x0,git_commit_utils_1[_0x4cf9da(0x18f)])([..._0x16d35f,..._0x79722,..._0x5198ce],_0x2340fe&&!this['gitCommitData'][_0x4cf9da(0x17b)]));let _0x3afbbf=0x0;const _0x20af61=[];(_0x16d35f[_0x4cf9da(0x17f)]||_0x79722[_0x4cf9da(0x17f)])&&this[_0x4cf9da(0x186)]['getRepositoryId']()&&(this[_0x4cf9da(0x188)]=await this['gitCommit']['createCommit'](_0x23f1ca['message']));const _0x333988=_0x355654['length'];let _0x23a7ec=0x0;while(_0x355654['length']){const _0x56ec87=_0x355654['shift'](),_0x1a80fb=await this[_0x4cf9da(0x186)][_0x4cf9da(0x19f)](_0x56ec87,this[_0x4cf9da(0x14e)]['dir'],_0x2340fe&&!this[_0x4cf9da(0x126)][_0x4cf9da(0x17b)]);_0x3afbbf+=_0x1a80fb[_0x4cf9da(0x130)][_0x4cf9da(0x17f)]+_0x1a80fb[_0x4cf9da(0x16a)][_0x4cf9da(0x17f)]+_0x1a80fb['modified']['length'],this[_0x4cf9da(0x137)]['added']+=_0x1a80fb[_0x4cf9da(0x130)][_0x4cf9da(0x17f)],this[_0x4cf9da(0x137)][_0x4cf9da(0x164)]+=_0x1a80fb[_0x4cf9da(0x164)][_0x4cf9da(0x17f)],this[_0x4cf9da(0x137)]['removed']+=_0x1a80fb[_0x4cf9da(0x16a)][_0x4cf9da(0x17f)],_0x23a7ec++,_0x23a7ec%0x64===0x0&&this[_0x4cf9da(0x196)][_0x4cf9da(0x127)]('proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)',_0x23a7ec,_0x333988,_0x3afbbf),_0x20af61['push'](_0x1a80fb),_0x3afbbf>this['MAX_COMPONENTS_PER_TICK']&&(await this[_0x4cf9da(0x1ac)](_0x23f1ca['username'],_0x23f1ca[_0x4cf9da(0x1a9)],_0x20af61),await this[_0x4cf9da(0x189)][_0x4cf9da(0x127)](this[_0x4cf9da(0x161)]+_0x4cf9da(0x13d)+_0x3afbbf+_0x4cf9da(0x198))[_0x4cf9da(0x177)](),_0x3afbbf=0x0,_0x20af61['splice'](0x0));}_0x20af61[_0x4cf9da(0x17f)]&&(await this['sendComponents'](_0x23f1ca['username'],_0x23f1ca[_0x4cf9da(0x1a9)],_0x20af61),await this[_0x4cf9da(0x189)][_0x4cf9da(0x127)](this[_0x4cf9da(0x161)]+_0x4cf9da(0x13d)+_0x3afbbf+_0x4cf9da(0x198))[_0x4cf9da(0x177)]());}async[a106_0x5cf5ab(0x13f)](_0x58e7ab){const _0x4d8c28=a106_0x5cf5ab,_0x586f60=[...this[_0x4d8c28(0x126)][_0x4d8c28(0x133)]],_0x3544c2=_0x586f60[_0x4d8c28(0x17f)];let _0x6419f1=0x0;while(_0x586f60['length']){const _0x57fee0=_0x586f60['shift']();!this[_0x4d8c28(0x126)][_0x4d8c28(0x17b)]&&(this[_0x4d8c28(0x186)][_0x4d8c28(0x181)]()?(await this['gitUtils'][_0x4d8c28(0x174)](_0x57fee0['id']),await this['mdapiUtils']['prepareMdapi'](this[_0x4d8c28(0x18d)][_0x4d8c28(0x15f)])):(await this[_0x4d8c28(0x18d)][_0x4d8c28(0x174)](this[_0x4d8c28(0x19b)]),await this[_0x4d8c28(0x14e)]['prepareMdapi'](this['gitUtils'][_0x4d8c28(0x15f)]))),await this[_0x4d8c28(0x162)](_0x57fee0,_0x58e7ab),await this['mdapiUtils'][_0x4d8c28(0x173)](),_0x6419f1+=0x1,await this[_0x4d8c28(0x189)][_0x4d8c28(0x127)](this['prefix']+_0x4d8c28(0x158)),await this[_0x4d8c28(0x189)][_0x4d8c28(0x127)](this[_0x4d8c28(0x161)]+'\x20Added\x20'+this['stats']['added']+_0x4d8c28(0x18c)),await this[_0x4d8c28(0x189)][_0x4d8c28(0x127)](this['prefix']+_0x4d8c28(0x1a5)+this[_0x4d8c28(0x137)][_0x4d8c28(0x164)]+_0x4d8c28(0x18c)),await this['sfLogger'][_0x4d8c28(0x127)](this[_0x4d8c28(0x161)]+_0x4d8c28(0x1a6)+this[_0x4d8c28(0x137)]['removed']+'\x20components'),await this[_0x4d8c28(0x189)][_0x4d8c28(0x127)](this[_0x4d8c28(0x161)]+_0x4d8c28(0x124)+_0x6419f1+'/'+_0x3544c2+_0x4d8c28(0x1b7))[_0x4d8c28(0x177)](),this[_0x4d8c28(0x14f)]();}}async[a106_0x5cf5ab(0x192)](){const _0xd30968=a106_0x5cf5ab;this[_0xd30968(0x18d)]&&await this[_0xd30968(0x18d)]['removeDir']()['catch'](()=>void 0x0),this['mdapiUtils']&&await this['mdapiUtils'][_0xd30968(0x173)]()[_0xd30968(0x123)](()=>void 0x0);}async[a106_0x5cf5ab(0x146)](_0x46d7f4){const _0x338ea4=a106_0x5cf5ab;this['gitCommitData']=_0x46d7f4,this[_0x338ea4(0x186)][_0x338ea4(0x165)](this['gitCommitData']),this[_0x338ea4(0x1a2)]=typedi_1[_0x338ea4(0x1a7)][_0x338ea4(0x14b)](providers_tokens_1[_0x338ea4(0x159)][_0x338ea4(0x1a2)]),this[_0x338ea4(0x16b)]=typedi_1[_0x338ea4(0x1a7)]['get'](providers_tokens_1[_0x338ea4(0x159)]['config']),this[_0x338ea4(0x189)]=typedi_1[_0x338ea4(0x1a7)]['get'](providers_tokens_1[_0x338ea4(0x159)]['logger']),this[_0x338ea4(0x161)]=_0x338ea4(0x16e)+_0x46d7f4['repository']+_0x338ea4(0x128)+_0x46d7f4[_0x338ea4(0x18e)]+']\x20['+GitCommitJob_1[_0x338ea4(0x17c)]+']',this[_0x338ea4(0x18d)]=new git_utils_1['GitUtils'](await this['getRemote']()),this['mdapiUtils']=new mdapi_utils_1[(_0x338ea4(0x143))](),this[_0x338ea4(0x189)]['log'](this[_0x338ea4(0x161)]+_0x338ea4(0x134));try{this['sfLogger']['log'](this[_0x338ea4(0x161)]+'\x20Fetch\x20salesforce\x20data.'),await this['gitCommit']['fetchRepositoryOrBranchData'](),await this['gitCommit']['updateStatus']('In\x20Progress'),this[_0x338ea4(0x189)][_0x338ea4(0x127)](this[_0x338ea4(0x161)]+_0x338ea4(0x147)),this[_0x338ea4(0x19b)]=await git_internal_1['Git']['getRemoteHash'](await this['getRemote'](),this['gitCommitData']['branch']),this['logger'][_0x338ea4(0x127)]('Last\x20git\x20repository\x20hash\x20is\x20%s.',this['lastCommitHash']);const _0x317ca2=await this['gitCommit']['checkSyncStatus'](this[_0x338ea4(0x19b)]);if(_0x317ca2){this[_0x338ea4(0x189)][_0x338ea4(0x127)](_0x338ea4(0x153)),await this['gitCommit'][_0x338ea4(0x13a)](_0x338ea4(0x16f));return;}this[_0x338ea4(0x189)][_0x338ea4(0x127)](this[_0x338ea4(0x161)]+'\x20Cloning\x20git\x20repository\x20from\x20'+this['gitCommitData'][_0x338ea4(0x1b3)]+'.'),await this[_0x338ea4(0x18d)][_0x338ea4(0x141)](this['gitCommitData'][_0x338ea4(0x18e)],this[_0x338ea4(0x126)][_0x338ea4(0x1aa)]),this[_0x338ea4(0x189)]['log'](this[_0x338ea4(0x161)]+_0x338ea4(0x15c));const _0x4731eb=await sfdx_utils_1[_0x338ea4(0x1a3)]['isSFDXProject'](this[_0x338ea4(0x18d)]['dir']);await this[_0x338ea4(0x14c)]();!this[_0x338ea4(0x189)][_0x338ea4(0x125)]()&&this[_0x338ea4(0x189)][_0x338ea4(0x12c)](await salesforce_logger_v3_service_1[_0x338ea4(0x149)][_0x338ea4(0x1b5)](sf_logger_v3_types_1['LoggerTypes'][_0x338ea4(0x12f)]));await this[_0x338ea4(0x189)]['send']();if(_0x46d7f4[_0x338ea4(0x17b)]){await this['mdapiUtils'][_0x338ea4(0x191)](this[_0x338ea4(0x18d)]['dir']),await this[_0x338ea4(0x189)][_0x338ea4(0x127)](this[_0x338ea4(0x161)]+_0x338ea4(0x138))[_0x338ea4(0x177)]();const _0x15c0e1=(await fs_internal_1['FS'][_0x338ea4(0x144)](this[_0x338ea4(0x14e)][_0x338ea4(0x15f)],!![]))[_0x338ea4(0x139)](_0x156cf9=>(0x0,path_1[_0x338ea4(0x1b8)])(this['mdapiUtils'][_0x338ea4(0x15f)],_0x156cf9));this[_0x338ea4(0x189)][_0x338ea4(0x127)](this[_0x338ea4(0x161)]+'\x20Force\x20commit.\x20Have\x20to\x20parse\x20'+_0x15c0e1[_0x338ea4(0x17f)]+_0x338ea4(0x19d)),this[_0x338ea4(0x126)][_0x338ea4(0x150)]=[],this['gitCommitData']['commits']=[{'files':{'modified':_0x15c0e1,'added':[],'removed':[]},'id':await this[_0x338ea4(0x18d)][_0x338ea4(0x180)](),'message':_0x338ea4(0x1a1),'username':constants_1['DEFAULT_GIT_USER_NAME']}];}await this[_0x338ea4(0x186)][_0x338ea4(0x120)]({[this[_0x338ea4(0x126)][_0x338ea4(0x1b3)]]:{'lastCommit':this['lastCommitHash']}}),await this[_0x338ea4(0x189)]['log'](this[_0x338ea4(0x161)]+'\x20[SFDX:\x20'+(_0x4731eb?_0x338ea4(0x151):'NO')+']\x20Start\x20proceeding\x20git\x20commits.\x20')[_0x338ea4(0x177)](),await this[_0x338ea4(0x13f)](_0x4731eb),await this['sfLogger'][_0x338ea4(0x127)](this[_0x338ea4(0x161)]+'\x20Job\x20done.')[_0x338ea4(0x177)](),await this['gitCommit'][_0x338ea4(0x13a)](_0x338ea4(0x16f));}catch(_0x3a45af){await this['cleanUp']();if(_0x3a45af instanceof flosum_commit_error_1[_0x338ea4(0x15a)])await this[_0x338ea4(0x186)][_0x338ea4(0x13a)]('Completed')[_0x338ea4(0x123)](()=>void 0x0),this[_0x338ea4(0x196)]['log'](this[_0x338ea4(0x161)]+_0x338ea4(0x1ba));else{await this[_0x338ea4(0x196)][_0x338ea4(0x185)](this['prefix']+_0x338ea4(0x19a)+(_0x3a45af instanceof api_error_1['ApiError']||_0x3a45af instanceof salesforce_error_1[_0x338ea4(0x155)]?_0x3a45af[_0x338ea4(0x13c)]():_0x3a45af)),await this['gitCommit'][_0x338ea4(0x120)]({}),await this[_0x338ea4(0x186)]['updateStatus'](_0x338ea4(0x17e))[_0x338ea4(0x123)](()=>void 0x0);throw _0x3a45af;}}finally{await this[_0x338ea4(0x192)](),await this[_0x338ea4(0x189)]['send']()[_0x338ea4(0x123)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a106_0x5cf5ab(0x121),[git_commit_service_1['GitCommitService'],connection_1[a106_0x5cf5ab(0x122)]])],GitCommitJob),exports['GitCommitJob']=GitCommitJob;