const a107_0x12e82b=a107_0x5ba3;(function(_0x379d72,_0x4edf0d){const _0x526030=a107_0x5ba3,_0x2cea58=_0x379d72();while(!![]){try{const _0x509543=parseInt(_0x526030(0x191))/0x1*(parseInt(_0x526030(0x11d))/0x2)+-parseInt(_0x526030(0x142))/0x3+-parseInt(_0x526030(0x162))/0x4+parseInt(_0x526030(0x129))/0x5+-parseInt(_0x526030(0x11b))/0x6+-parseInt(_0x526030(0x16a))/0x7+parseInt(_0x526030(0x173))/0x8;if(_0x509543===_0x4edf0d)break;else _0x2cea58['push'](_0x2cea58['shift']());}catch(_0x3aae04){_0x2cea58['push'](_0x2cea58['shift']());}}}(a107_0x54bf,0x9350f));const a107_0x36d6ee=(function(){let _0x583e16=!![];return function(_0x343bc4,_0x5a7c4a){const _0x55b6d4=_0x583e16?function(){const _0x1e6260=a107_0x5ba3;if(_0x5a7c4a){const _0x31fd06=_0x5a7c4a[_0x1e6260(0x133)](_0x343bc4,arguments);return _0x5a7c4a=null,_0x31fd06;}}:function(){};return _0x583e16=![],_0x55b6d4;};}()),a107_0x2ab1e=a107_0x36d6ee(this,function(){const _0x291ccc=a107_0x5ba3;return a107_0x2ab1e[_0x291ccc(0x193)]()[_0x291ccc(0x167)]('(((.+)+)+)+$')[_0x291ccc(0x193)]()['constructor'](a107_0x2ab1e)['search']('(((.+)+)+)+$');});a107_0x2ab1e();'use strict';var __createBinding=this&&this[a107_0x12e82b(0x17c)]||(Object['create']?function(_0x3f7185,_0x2eb2ed,_0x36cbb3,_0x5a53af){const _0x932586=a107_0x12e82b;if(_0x5a53af===undefined)_0x5a53af=_0x36cbb3;var _0x32f804=Object[_0x932586(0x1ba)](_0x2eb2ed,_0x36cbb3);(!_0x32f804||('get'in _0x32f804?!_0x2eb2ed['__esModule']:_0x32f804[_0x932586(0x176)]||_0x32f804['configurable']))&&(_0x32f804={'enumerable':!![],'get':function(){return _0x2eb2ed[_0x36cbb3];}}),Object[_0x932586(0x164)](_0x3f7185,_0x5a53af,_0x32f804);}:function(_0x280520,_0x1e6e56,_0x12c964,_0xbffd6d){if(_0xbffd6d===undefined)_0xbffd6d=_0x12c964;_0x280520[_0xbffd6d]=_0x1e6e56[_0x12c964];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a107_0x12e82b(0x15f)]?function(_0x1fdd66,_0x557fee){const _0x2ef581=a107_0x12e82b;Object['defineProperty'](_0x1fdd66,_0x2ef581(0x19f),{'enumerable':!![],'value':_0x557fee});}:function(_0xd6fa74,_0x2f998e){const _0x8ec81f=a107_0x12e82b;_0xd6fa74[_0x8ec81f(0x19f)]=_0x2f998e;}),__decorate=this&&this[a107_0x12e82b(0x1c0)]||function(_0x34233c,_0x4161ba,_0x3e9f84,_0x5894e6){const _0x49b38f=a107_0x12e82b;var _0x1698fb=arguments['length'],_0x513178=_0x1698fb<0x3?_0x4161ba:_0x5894e6===null?_0x5894e6=Object[_0x49b38f(0x1ba)](_0x4161ba,_0x3e9f84):_0x5894e6,_0x38f25a;if(typeof Reflect===_0x49b38f(0x19b)&&typeof Reflect[_0x49b38f(0x150)]===_0x49b38f(0x134))_0x513178=Reflect[_0x49b38f(0x150)](_0x34233c,_0x4161ba,_0x3e9f84,_0x5894e6);else{for(var _0x570890=_0x34233c[_0x49b38f(0x148)]-0x1;_0x570890>=0x0;_0x570890--)if(_0x38f25a=_0x34233c[_0x570890])_0x513178=(_0x1698fb<0x3?_0x38f25a(_0x513178):_0x1698fb>0x3?_0x38f25a(_0x4161ba,_0x3e9f84,_0x513178):_0x38f25a(_0x4161ba,_0x3e9f84))||_0x513178;}return _0x1698fb>0x3&&_0x513178&&Object['defineProperty'](_0x4161ba,_0x3e9f84,_0x513178),_0x513178;},__importStar=this&&this[a107_0x12e82b(0x182)]||function(_0x3c0050){const _0x2e40f6=a107_0x12e82b;if(_0x3c0050&&_0x3c0050[_0x2e40f6(0x18f)])return _0x3c0050;var _0x3400f5={};if(_0x3c0050!=null){for(var _0x447ac2 in _0x3c0050)if(_0x447ac2!==_0x2e40f6(0x19f)&&Object[_0x2e40f6(0x139)][_0x2e40f6(0x199)]['call'](_0x3c0050,_0x447ac2))__createBinding(_0x3400f5,_0x3c0050,_0x447ac2);}return __setModuleDefault(_0x3400f5,_0x3c0050),_0x3400f5;},__metadata=this&&this['__metadata']||function(_0x102c53,_0x397a05){const _0x54372c=a107_0x12e82b;if(typeof Reflect===_0x54372c(0x19b)&&typeof Reflect['metadata']===_0x54372c(0x134))return Reflect[_0x54372c(0x1af)](_0x102c53,_0x397a05);},GitCommitJob_1;function a107_0x5ba3(_0x48e227,_0x2d16b8){const _0x770219=a107_0x54bf();return a107_0x5ba3=function(_0x2ab1e,_0x36d6ee){_0x2ab1e=_0x2ab1e-0x118;let _0x54bf1d=_0x770219[_0x2ab1e];return _0x54bf1d;},a107_0x5ba3(_0x48e227,_0x2d16b8);}function a107_0x54bf(){const _0x2274b8=['removeDir','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','__decorate','getLoggerId','../../../../constants','getRemote','612900ZOsiBO','YES','74470bHXAcI','Bitbucket','../../../../core','ApiError','describeCommit','DEFAULT_GIT_USER_NAME','\x20Proceeded\x20','resetStats','updateStatus','createLoggerId','getRemoteHash','sync\x20components','3236635pTwbUz','FlosumCommitError','commits','../../salesforce/types/sf-logger-v3-types','Branch\x20synchronized.\x20Skip.','checkSyncStatus','handleCommit','../../../shared/utils','\x20Processed\x20','isLoggedIn','apply','function','credentials','message','sendComponents','name','prototype','gitCommitData','username','providersFactory','force','push','://','fetchRepositoryOrBranchData','prefix','740151GrHkUS','splice','replace','email','\x20Cloning\x20git\x20repository\x20from\x20','relative','length','GitUtils','../../salesforce/utils/sfdx.utils','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','../../../../core/errors/api.error',']\x20[','proceedCommits','removed','decorate','Last\x20git\x20repository\x20hash\x20is\x20%s.','commitId','env','Logger','GitCommitJob','shift','\x20commits.','ProvidersFactory','../errors/flosum-commit.error','mdapiUtils','cleanUp','\x20Added\x20','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','createCommit','create','typedi','\x20Download\x20components\x20metadata\x20from\x20Flosum.','671404GxDRcH','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','defineProperty','SalesforceError','\x20components','search','provider','files','5338592ftNhoM','../utils/git-commit.utils','LoggerTypes','stats','MAX_COMPONENTS_PER_TICK',']\x20Start\x20proceeding\x20git\x20commits.\x20','DEFAULT_GIT_USER_EMAIL','sfLogger','added','6309072rloayP','../services/git-commit.service','values','writable','gitUtils','lastCommitHash','\x20Commit\x20Summary','updateFileNamesForSFDXProject','../../internal/fs.internal','__createBinding','../../salesforce/errors/salesforce.error','flat','convertToCleanPaths','config','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','__importStar','getRecordTypes','Git','getBranchId','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','reduce','setCommitDto','prepareMdapi','clone','proceedFile','MDApiUtils','Completed','fetchCommits','__esModule','fileNames','12AiaPfm','\x20Modified\x20','toString','getProtocol','gitCommit','repository','dir','\x20components.','hasOwnProperty','logger','object','checkoutTo','getRepositoryId','\x20files\x20before\x20sync.','default','SFDX','changes','\x20Job\x20done.','design:paramtypes','inserted','GitCommitService','author','send','../utils/git.utils','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','Tokens','fetchComponentsMetadata','getGitShellAuthorizationString','getCurrentHash','catch','metadata','BitbucketApiService','modified','log','get','../../salesforce/services/salesforce-logger-v3.service','repositoryGit','SalesforceCommitsManager','updateRemoteState','branch','prepareGitChangedPaths','getOwnPropertyDescriptor','path','In\x20Progress','gitApiService'];a107_0x54bf=function(){return _0x2274b8;};return a107_0x54bf();}Object[a107_0x12e82b(0x164)](exports,a107_0x12e82b(0x18f),{'value':!![]}),exports[a107_0x12e82b(0x155)]=void 0x0;const core_1=require(a107_0x12e82b(0x11f)),fs_internal_1=require(a107_0x12e82b(0x17b)),salesforce_logger_v3_service_1=require(a107_0x12e82b(0x1b4)),utils_1=require(a107_0x12e82b(0x130)),path_1=require(a107_0x12e82b(0x1bb)),typedi_1=__importStar(require(a107_0x12e82b(0x160))),constants_1=require(a107_0x12e82b(0x119)),salesforce_commits_manager_service_1=require('../../salesforce/services/salesforce-commits-manager.service'),git_commit_utils_1=require(a107_0x12e82b(0x16b)),git_utils_1=require(a107_0x12e82b(0x1a8)),mdapi_utils_1=require('../utils/mdapi.utils'),api_error_1=require(a107_0x12e82b(0x14c)),salesforce_error_1=require(a107_0x12e82b(0x17d)),git_commit_service_1=require(a107_0x12e82b(0x174)),flosum_commit_error_1=require(a107_0x12e82b(0x159)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),git_provider_1=require('../../providers/types/git-provider'),sfdx_utils_1=require(a107_0x12e82b(0x14a)),utils_2=require('../../parsers/utils'),git_internal_1=require('../../internal/git.internal'),providers_tokens_1=require('../../providers/providers.tokens'),connection_1=require('../utils/connection'),sf_logger_v3_types_1=require(a107_0x12e82b(0x12c));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x40d710,_0x3ae6c9){const _0x511c30=a107_0x12e82b;this[_0x511c30(0x195)]=_0x40d710,this[_0x511c30(0x13c)]=_0x3ae6c9,this[_0x511c30(0x16e)]=+(process[_0x511c30(0x153)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x511c30(0x19a)]=new core_1[(_0x511c30(0x154))](GitCommitJob_1[_0x511c30(0x138)]),this[_0x511c30(0x152)]='',this[_0x511c30(0x16d)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a107_0x12e82b(0x11a)](){const _0x33559b=a107_0x12e82b,{repositoryGit:_0xd1a5f7}=this[_0x33559b(0x13a)],_0x1473a2=typedi_1[_0x33559b(0x19f)][_0x33559b(0x1b3)](providers_tokens_1['Tokens'][_0x33559b(0x135)]);if(this[_0x33559b(0x13a)][_0x33559b(0x168)]===git_provider_1['GitProvider'][_0x33559b(0x11e)]){const _0x4f1a3b=typedi_1[_0x33559b(0x19f)][_0x33559b(0x1b3)](bitbucket_api_service_1[_0x33559b(0x1b0)]);await _0x4f1a3b[_0x33559b(0x132)]();}return _0xd1a5f7[_0x33559b(0x144)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x33559b(0x194)])(_0xd1a5f7)+_0x33559b(0x13f)+_0x1473a2[_0x33559b(0x1ac)]()+'@');}[a107_0x12e82b(0x124)](){const _0x2f9f6d=a107_0x12e82b;this[_0x2f9f6d(0x16d)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a107_0x12e82b(0x17a)](){const _0x4d83f0=a107_0x12e82b,_0x2fd2ce=[...this[_0x4d83f0(0x13a)][_0x4d83f0(0x190)]];this[_0x4d83f0(0x13a)]['fileNames']=[];for(const _0x27b236 of _0x2fd2ce){this[_0x4d83f0(0x13a)][_0x4d83f0(0x190)][_0x4d83f0(0x13e)](...await(0x0,utils_2['readFilesByFilename'])(_0x27b236,this['mdapiUtils']['dir']));}}async[a107_0x12e82b(0x18e)](){const _0x110f34=a107_0x12e82b;if(this[_0x110f34(0x13a)]['force'])return;const _0x1ecc25=[];for(const _0x434929 of this['gitCommitData'][_0x110f34(0x12b)]){const _0x2d3c60=await this[_0x110f34(0x177)][_0x110f34(0x121)](_0x434929['id']);_0x434929[_0x110f34(0x13b)]=_0x2d3c60[_0x110f34(0x1a6)],_0x434929[_0x110f34(0x136)]=_0x2d3c60[_0x110f34(0x136)],_0x434929[_0x110f34(0x169)]=_0x2d3c60[_0x110f34(0x1a1)],_0x434929['email']=_0x2d3c60[_0x110f34(0x145)];if(_0x434929[_0x110f34(0x145)]===constants_1[_0x110f34(0x170)])throw new flosum_commit_error_1[(_0x110f34(0x12a))]();_0x1ecc25['push'](...Object[_0x110f34(0x175)](_0x434929['files'])[_0x110f34(0x17e)]());}this[_0x110f34(0x13a)][_0x110f34(0x190)]=[...new Set((0x0,git_commit_utils_1[_0x110f34(0x1b9)])(_0x1ecc25))];}async[a107_0x12e82b(0x137)](_0x382dcc,_0x1dd6ee,_0x5758a1){const _0xc77597=a107_0x12e82b,_0x2a88d4=_0x5758a1[_0xc77597(0x187)]((_0x230ded,_0x55c69c)=>{const _0x3ec909=_0xc77597;return _0x230ded[_0x3ec909(0x1a4)][_0x3ec909(0x13e)](..._0x55c69c['inserted']),_0x230ded[_0x3ec909(0x1b1)][_0x3ec909(0x13e)](..._0x55c69c['modified']),_0x230ded['removed']['push'](..._0x55c69c[_0x3ec909(0x14f)]),_0x230ded;},{'inserted':[],'modified':[],'removed':[]}),_0x543d27=new salesforce_commits_manager_service_1[(_0xc77597(0x1b6))]({'recordTypes':this[_0xc77597(0x195)][_0xc77597(0x183)](),'branchId':this['gitCommit'][_0xc77597(0x185)](),'repositoryId':this[_0xc77597(0x195)][_0xc77597(0x19d)](),'logger':this[_0xc77597(0x171)],'commitId':this[_0xc77597(0x152)]});await _0x543d27[_0xc77597(0x14e)]([{'author':_0x382dcc,'message':_0x1dd6ee,'inserted':_0x2a88d4['inserted'],'modified':_0x2a88d4['modified'],'removed':_0x2a88d4[_0xc77597(0x14f)]}]);}async[a107_0x12e82b(0x12f)](_0xfe0de8,_0x423f92){const _0x5b2051=a107_0x12e82b;await this['sfLogger']['log'](this[_0x5b2051(0x141)]+_0x5b2051(0x161))['send'](),await this['gitCommit'][_0x5b2051(0x1ab)](_0x423f92);const {added:_0x2fdec9,modified:_0x59d5f0,removed:_0x46d386}=_0xfe0de8[_0x5b2051(0x169)];_0x423f92&&_0x59d5f0[_0x5b2051(0x13e)](..._0x46d386[_0x5b2051(0x143)](0x0));const _0x33f09c=(0x0,utils_2[_0x5b2051(0x17f)])((0x0,git_commit_utils_1['prepareGitChangedPaths'])([..._0x2fdec9,..._0x59d5f0,..._0x46d386],_0x423f92&&!this[_0x5b2051(0x13a)][_0x5b2051(0x13d)]));let _0x5ab267=0x0;const _0x24cd48=[];(_0x2fdec9[_0x5b2051(0x148)]||_0x59d5f0[_0x5b2051(0x148)])&&this[_0x5b2051(0x195)][_0x5b2051(0x19d)]()&&(this[_0x5b2051(0x152)]=await this['gitCommit'][_0x5b2051(0x15e)](_0xfe0de8[_0x5b2051(0x136)]));const _0x347887=_0x33f09c[_0x5b2051(0x148)];let _0x38f730=0x0;while(_0x33f09c[_0x5b2051(0x148)]){const _0x13f24c=_0x33f09c[_0x5b2051(0x156)](),_0x52912c=await this[_0x5b2051(0x195)][_0x5b2051(0x18b)](_0x13f24c,this[_0x5b2051(0x15a)]['dir'],_0x423f92&&!this[_0x5b2051(0x13a)][_0x5b2051(0x13d)]);_0x5ab267+=_0x52912c[_0x5b2051(0x1a4)][_0x5b2051(0x148)]+_0x52912c['removed'][_0x5b2051(0x148)]+_0x52912c[_0x5b2051(0x1b1)][_0x5b2051(0x148)],this[_0x5b2051(0x16d)][_0x5b2051(0x172)]+=_0x52912c['inserted']['length'],this[_0x5b2051(0x16d)][_0x5b2051(0x1b1)]+=_0x52912c[_0x5b2051(0x1b1)]['length'],this['stats']['removed']+=_0x52912c[_0x5b2051(0x14f)][_0x5b2051(0x148)],_0x38f730++,_0x38f730%0x64===0x0&&this['logger'][_0x5b2051(0x1b2)](_0x5b2051(0x186),_0x38f730,_0x347887,_0x5ab267),_0x24cd48[_0x5b2051(0x13e)](_0x52912c),_0x5ab267>this[_0x5b2051(0x16e)]&&(await this[_0x5b2051(0x137)](_0xfe0de8[_0x5b2051(0x13b)],_0xfe0de8[_0x5b2051(0x136)],_0x24cd48),await this[_0x5b2051(0x171)][_0x5b2051(0x1b2)](this[_0x5b2051(0x141)]+_0x5b2051(0x131)+_0x5ab267+_0x5b2051(0x198))[_0x5b2051(0x1a7)](),_0x5ab267=0x0,_0x24cd48[_0x5b2051(0x143)](0x0));}_0x24cd48[_0x5b2051(0x148)]&&(await this[_0x5b2051(0x137)](_0xfe0de8[_0x5b2051(0x13b)],_0xfe0de8['message'],_0x24cd48),await this[_0x5b2051(0x171)]['log'](this[_0x5b2051(0x141)]+_0x5b2051(0x131)+_0x5ab267+_0x5b2051(0x198))['send']());}async['proceedCommits'](_0x468558){const _0x3e2e2f=a107_0x12e82b,_0x29a0cf=[...this[_0x3e2e2f(0x13a)]['commits']],_0xf97321=_0x29a0cf[_0x3e2e2f(0x148)];let _0x5b3de4=0x0;while(_0x29a0cf['length']){const _0x1f7b63=_0x29a0cf[_0x3e2e2f(0x156)]();!this['gitCommitData']['force']&&(this[_0x3e2e2f(0x195)]['getRepositoryId']()?(await this[_0x3e2e2f(0x177)][_0x3e2e2f(0x19c)](_0x1f7b63['id']),await this[_0x3e2e2f(0x15a)]['prepareMdapi'](this['gitUtils'][_0x3e2e2f(0x197)])):(await this['gitUtils']['checkoutTo'](this[_0x3e2e2f(0x178)]),await this[_0x3e2e2f(0x15a)][_0x3e2e2f(0x189)](this['gitUtils'][_0x3e2e2f(0x197)]))),await this[_0x3e2e2f(0x12f)](_0x1f7b63,_0x468558),await this[_0x3e2e2f(0x15a)]['removeDir'](),_0x5b3de4+=0x1,await this[_0x3e2e2f(0x171)]['log'](this[_0x3e2e2f(0x141)]+_0x3e2e2f(0x179)),await this[_0x3e2e2f(0x171)][_0x3e2e2f(0x1b2)](this[_0x3e2e2f(0x141)]+_0x3e2e2f(0x15c)+this[_0x3e2e2f(0x16d)]['added']+_0x3e2e2f(0x166)),await this[_0x3e2e2f(0x171)]['log'](this[_0x3e2e2f(0x141)]+_0x3e2e2f(0x192)+this[_0x3e2e2f(0x16d)]['modified']+_0x3e2e2f(0x166)),await this[_0x3e2e2f(0x171)][_0x3e2e2f(0x1b2)](this[_0x3e2e2f(0x141)]+'\x20Removed\x20'+this[_0x3e2e2f(0x16d)]['removed']+_0x3e2e2f(0x166)),await this[_0x3e2e2f(0x171)]['log'](this['prefix']+_0x3e2e2f(0x123)+_0x5b3de4+'/'+_0xf97321+_0x3e2e2f(0x157))[_0x3e2e2f(0x1a7)](),this[_0x3e2e2f(0x124)]();}}async[a107_0x12e82b(0x15b)](){const _0x179a9e=a107_0x12e82b;this[_0x179a9e(0x177)]&&await this[_0x179a9e(0x177)][_0x179a9e(0x1be)]()[_0x179a9e(0x1ae)](()=>void 0x0),this[_0x179a9e(0x15a)]&&await this['mdapiUtils'][_0x179a9e(0x1be)]()[_0x179a9e(0x1ae)](()=>void 0x0);}async['run'](_0x5ae835){const _0x47054a=a107_0x12e82b;this[_0x47054a(0x13a)]=_0x5ae835,this[_0x47054a(0x195)][_0x47054a(0x188)](this[_0x47054a(0x13a)]),this[_0x47054a(0x1bd)]=typedi_1[_0x47054a(0x19f)][_0x47054a(0x1b3)](providers_tokens_1[_0x47054a(0x1aa)][_0x47054a(0x1bd)]),this[_0x47054a(0x180)]=typedi_1[_0x47054a(0x19f)][_0x47054a(0x1b3)](providers_tokens_1[_0x47054a(0x1aa)][_0x47054a(0x180)]),this[_0x47054a(0x171)]=typedi_1[_0x47054a(0x19f)][_0x47054a(0x1b3)](providers_tokens_1['Tokens']['logger']),this[_0x47054a(0x141)]=_0x47054a(0x181)+_0x5ae835[_0x47054a(0x196)]+']\x20[Branch:\x20'+_0x5ae835[_0x47054a(0x1b8)]+_0x47054a(0x14d)+GitCommitJob_1[_0x47054a(0x138)]+']',this[_0x47054a(0x177)]=new git_utils_1[(_0x47054a(0x149))](await this[_0x47054a(0x11a)]()),this[_0x47054a(0x15a)]=new mdapi_utils_1[(_0x47054a(0x18c))](),this['sfLogger']['log'](this[_0x47054a(0x141)]+'\x20Start\x20Git-commit\x20job.');try{this[_0x47054a(0x171)]['log'](this[_0x47054a(0x141)]+'\x20Fetch\x20salesforce\x20data.'),await this['gitCommit'][_0x47054a(0x140)](),await this[_0x47054a(0x195)][_0x47054a(0x125)](_0x47054a(0x1bc)),this['sfLogger']['log'](this['prefix']+'\x20Fetch\x20remote\x20branch\x20hash.'),this[_0x47054a(0x178)]=await git_internal_1[_0x47054a(0x184)][_0x47054a(0x127)](await this[_0x47054a(0x11a)](),this[_0x47054a(0x13a)]['branch']),this['logger'][_0x47054a(0x1b2)](_0x47054a(0x151),this[_0x47054a(0x178)]);const _0x729864=await this[_0x47054a(0x195)][_0x47054a(0x12e)](this[_0x47054a(0x178)]);if(_0x729864){this[_0x47054a(0x171)][_0x47054a(0x1b2)](_0x47054a(0x12d)),await this['gitCommit'][_0x47054a(0x125)](_0x47054a(0x18d));return;}this['sfLogger'][_0x47054a(0x1b2)](this[_0x47054a(0x141)]+_0x47054a(0x146)+this[_0x47054a(0x13a)][_0x47054a(0x1b5)]+'.'),await this['gitUtils'][_0x47054a(0x18a)](this[_0x47054a(0x13a)][_0x47054a(0x1b8)],this[_0x47054a(0x13a)]['repository']),this[_0x47054a(0x171)]['log'](this[_0x47054a(0x141)]+_0x47054a(0x1bf));const _0x1014b4=await sfdx_utils_1[_0x47054a(0x1a0)]['isSFDXProject'](this[_0x47054a(0x177)][_0x47054a(0x197)]);await this[_0x47054a(0x18e)]();!this[_0x47054a(0x171)][_0x47054a(0x118)]()&&this['sfLogger']['setLoggerId'](await salesforce_logger_v3_service_1['SalesforceLogger3'][_0x47054a(0x126)](sf_logger_v3_types_1[_0x47054a(0x16c)]['commit']));await this[_0x47054a(0x171)]['send']();if(_0x5ae835[_0x47054a(0x13d)]){await this[_0x47054a(0x15a)]['prepareMdapi'](this[_0x47054a(0x177)]['dir']),await this[_0x47054a(0x171)][_0x47054a(0x1b2)](this[_0x47054a(0x141)]+_0x47054a(0x1a9))[_0x47054a(0x1a7)]();const _0x1c965c=(await fs_internal_1['FS']['readDir'](this[_0x47054a(0x15a)][_0x47054a(0x197)],!![]))['map'](_0xc4695=>(0x0,path_1[_0x47054a(0x147)])(this[_0x47054a(0x15a)][_0x47054a(0x197)],_0xc4695));this[_0x47054a(0x171)]['log'](this[_0x47054a(0x141)]+_0x47054a(0x163)+_0x1c965c[_0x47054a(0x148)]+_0x47054a(0x19e)),this[_0x47054a(0x13a)]['fileNames']=[],this[_0x47054a(0x13a)][_0x47054a(0x12b)]=[{'files':{'modified':_0x1c965c,'added':[],'removed':[]},'id':await this['gitUtils'][_0x47054a(0x1ad)](),'message':_0x47054a(0x128),'username':constants_1[_0x47054a(0x122)]}];}await this['gitCommit'][_0x47054a(0x1b7)]({[this[_0x47054a(0x13a)][_0x47054a(0x1b5)]]:{'lastCommit':this[_0x47054a(0x178)]}}),await this[_0x47054a(0x171)][_0x47054a(0x1b2)](this['prefix']+'\x20[SFDX:\x20'+(_0x1014b4?_0x47054a(0x11c):'NO')+_0x47054a(0x16f))['send'](),await this[_0x47054a(0x14e)](_0x1014b4),await this[_0x47054a(0x171)]['log'](this[_0x47054a(0x141)]+_0x47054a(0x1a2))['send'](),await this['gitCommit'][_0x47054a(0x125)](_0x47054a(0x18d));}catch(_0x476537){await this['cleanUp']();if(_0x476537 instanceof flosum_commit_error_1['FlosumCommitError'])await this[_0x47054a(0x195)][_0x47054a(0x125)]('Completed')[_0x47054a(0x1ae)](()=>void 0x0),this['logger'][_0x47054a(0x1b2)](this[_0x47054a(0x141)]+_0x47054a(0x14b));else{await this[_0x47054a(0x19a)]['error'](this[_0x47054a(0x141)]+_0x47054a(0x15d)+(_0x476537 instanceof api_error_1[_0x47054a(0x120)]||_0x476537 instanceof salesforce_error_1[_0x47054a(0x165)]?_0x476537['toString']():_0x476537)),await this['gitCommit']['updateRemoteState']({}),await this[_0x47054a(0x195)][_0x47054a(0x125)]('Error')[_0x47054a(0x1ae)](()=>void 0x0);throw _0x476537;}}finally{await this['cleanUp'](),await this[_0x47054a(0x171)][_0x47054a(0x1a7)]()[_0x47054a(0x1ae)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a107_0x12e82b(0x1a3),[git_commit_service_1[a107_0x12e82b(0x1a5)],connection_1[a107_0x12e82b(0x158)]])],GitCommitJob),exports[a107_0x12e82b(0x155)]=GitCommitJob;