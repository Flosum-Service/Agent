const a127_0x537276=a127_0x2711;(function(_0x2110b2,_0x119ba9){const _0x3ef6b6=a127_0x2711,_0x3cc6e1=_0x2110b2();while(!![]){try{const _0x127cc9=parseInt(_0x3ef6b6(0x11a))/0x1+parseInt(_0x3ef6b6(0xec))/0x2+parseInt(_0x3ef6b6(0xe4))/0x3*(parseInt(_0x3ef6b6(0xde))/0x4)+parseInt(_0x3ef6b6(0x10a))/0x5*(-parseInt(_0x3ef6b6(0x11c))/0x6)+-parseInt(_0x3ef6b6(0xa2))/0x7*(parseInt(_0x3ef6b6(0xbf))/0x8)+parseInt(_0x3ef6b6(0x100))/0x9+parseInt(_0x3ef6b6(0xda))/0xa;if(_0x127cc9===_0x119ba9)break;else _0x3cc6e1['push'](_0x3cc6e1['shift']());}catch(_0x1bfd91){_0x3cc6e1['push'](_0x3cc6e1['shift']());}}}(a127_0x13af,0x8887d));const a127_0x56034e=(function(){let _0x4ab9fe=!![];return function(_0x4932b0,_0x15d563){const _0x48755d=_0x4ab9fe?function(){const _0x1d0102=a127_0x2711;if(_0x15d563){const _0xe3a050=_0x15d563[_0x1d0102(0x109)](_0x4932b0,arguments);return _0x15d563=null,_0xe3a050;}}:function(){};return _0x4ab9fe=![],_0x48755d;};}()),a127_0x50bbce=a127_0x56034e(this,function(){const _0x3b177d=a127_0x2711;return a127_0x50bbce[_0x3b177d(0xab)]()[_0x3b177d(0xea)](_0x3b177d(0xe5))['toString']()[_0x3b177d(0x11f)](a127_0x50bbce)[_0x3b177d(0xea)](_0x3b177d(0xe5));});a127_0x50bbce();function a127_0x13af(){const _0x7d26ea=['CommitToFlosumCompletedNotification','getRemote','email','__setModuleDefault','search','fetchComponentsMetadata','256390xYwMtk','../../providers/api/bitbucket-api.service','convertToCleanPaths','cleanUp','force','\x20Cloning\x20git\x20repository\x20from\x20','\x20components','\x20Fetch\x20salesforce\x20data.','../../../../constants','prepareGitChangedPaths','../../notifications/commit-to-flosum-error.notification','username','gitUtils','createCommit','repository','../../salesforce/types/sf-logger-v3-types','metadata','\x20Added\x20','relative','Error','5171211nRXQFD','prefix','flat','://','commit','../errors/flosum-commit.error','message','name','stats','apply','85UkyzFA','BitbucketApiService','GitCommitJob','../../internal/fs.internal','FlosumCommitError','default','\x20Download\x20components\x20metadata\x20from\x20Flosum.','proceedFile','info','../../parsers/utils','setLoggerId','../utils/git.utils','errorNotification','send','splice','../../providers/providers.tokens','91875TGyHZU','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','249672kAsFDR','\x20Removed\x20','inserted','constructor','isLoggedIn','typedi','../../salesforce/utils/sfdx.utils','Email\x20notifications\x20are\x20disabled.','branch','map','\x20Proceeded\x20','getProtocol','push','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','fetchCommits','SalesforceLogger3','MDApiUtils','added','\x20components.','__decorate','prototype','config','shift','sendComponents','Last\x20git\x20repository\x20hash\x20is\x20%s.','catch','../../notifications/commit-to-flosum-completed.notification','logger','path','files','gitCommit','describeCommit','getRecordTypes','ProvidersFactory','Logger','__createBinding','GitProvider','gitCommitData','getGitShellAuthorizationString','\x20commits.','Bitbucket','handleCommit','CommitToFlosumErrorNotification','recordType','changes','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','credentials','Completed','get','dir','sync\x20components','fetchRepositoryOrBranchData','__importStar','object','commits','lastCommitHash','updateRemoteState','../utils/path.utils','LoggerTypes','readDir','repositoryGit','7KiogCY','clone','isEmailNotificationsEnabled','../../../../core','length','DEFAULT_GIT_USER_EMAIL','fileNames','create','replace','toString','updateStatus','../utils/connection','../../../../core/errors/api.error','mdapiUtils','../../salesforce/errors/salesforce.error','SFDX','getRepositoryId','ApiError','error','../../../shared/utils','checkSyncStatus','hasOwnProperty','proceedCommits','Service','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','defineProperty','values','getLoggerId','GitUtils','6332856svMNdV','call','env','PathUtils','prepareMdapi','removeDir','\x20Commit\x20Summary','commitId','__esModule','Tokens','modified','MAX_COMPONENTS_PER_TICK','../../internal/git.internal','provider','execute','isSFDXProject','resetStats','gitProvider','getOwnPropertyDescriptor','checkoutTo',']\x20[Branch:\x20','../services/git-commit.service','\x20Modified\x20','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','getRemoteHash','\x20Fetch\x20remote\x20branch\x20hash.','Branch\x20synchronized.\x20Skip.','2674020ldcjGi','GitCommitService',']\x20Start\x20proceeding\x20git\x20commits.\x20','sfLogger','76qEDZBG','\x20Processed\x20','decorate','getCurrentHash','log','removed','157293DCKsGr','(((.+)+)+)+$'];a127_0x13af=function(){return _0x7d26ea;};return a127_0x13af();}'use strict';var __createBinding=this&&this[a127_0x537276(0x88)]||(Object[a127_0x537276(0xa9)]?function(_0x2bf5e4,_0x47902e,_0x297785,_0x16e854){const _0x152a58=a127_0x537276;if(_0x16e854===undefined)_0x16e854=_0x297785;var _0x5d77aa=Object[_0x152a58(0xd1)](_0x47902e,_0x297785);(!_0x5d77aa||('get'in _0x5d77aa?!_0x47902e[_0x152a58(0xc7)]:_0x5d77aa['writable']||_0x5d77aa['configurable']))&&(_0x5d77aa={'enumerable':!![],'get':function(){return _0x47902e[_0x297785];}}),Object[_0x152a58(0xbb)](_0x2bf5e4,_0x16e854,_0x5d77aa);}:function(_0x57cc73,_0x21cff5,_0x406a9a,_0xa8a969){if(_0xa8a969===undefined)_0xa8a969=_0x406a9a;_0x57cc73[_0xa8a969]=_0x21cff5[_0x406a9a];}),__setModuleDefault=this&&this[a127_0x537276(0xe9)]||(Object[a127_0x537276(0xa9)]?function(_0x512de3,_0x4c0fb4){const _0x2d15dd=a127_0x537276;Object[_0x2d15dd(0xbb)](_0x512de3,_0x2d15dd(0x10f),{'enumerable':!![],'value':_0x4c0fb4});}:function(_0x37f8b6,_0x469eee){const _0xb23b86=a127_0x537276;_0x37f8b6[_0xb23b86(0x10f)]=_0x469eee;}),__decorate=this&&this[a127_0x537276(0x12f)]||function(_0x41c367,_0x2931cf,_0xd23104,_0x855c54){const _0x421726=a127_0x537276;var _0x1a738f=arguments['length'],_0x117d8e=_0x1a738f<0x3?_0x2931cf:_0x855c54===null?_0x855c54=Object[_0x421726(0xd1)](_0x2931cf,_0xd23104):_0x855c54,_0x410b54;if(typeof Reflect===_0x421726(0x9a)&&typeof Reflect[_0x421726(0xe0)]==='function')_0x117d8e=Reflect[_0x421726(0xe0)](_0x41c367,_0x2931cf,_0xd23104,_0x855c54);else{for(var _0x231d8d=_0x41c367[_0x421726(0xa6)]-0x1;_0x231d8d>=0x0;_0x231d8d--)if(_0x410b54=_0x41c367[_0x231d8d])_0x117d8e=(_0x1a738f<0x3?_0x410b54(_0x117d8e):_0x1a738f>0x3?_0x410b54(_0x2931cf,_0xd23104,_0x117d8e):_0x410b54(_0x2931cf,_0xd23104))||_0x117d8e;}return _0x1a738f>0x3&&_0x117d8e&&Object[_0x421726(0xbb)](_0x2931cf,_0xd23104,_0x117d8e),_0x117d8e;},__importStar=this&&this[a127_0x537276(0x99)]||function(_0x3461ac){const _0x2f43e2=a127_0x537276;if(_0x3461ac&&_0x3461ac[_0x2f43e2(0xc7)])return _0x3461ac;var _0x3b4c9e={};if(_0x3461ac!=null){for(var _0x3cee4c in _0x3461ac)if(_0x3cee4c!==_0x2f43e2(0x10f)&&Object[_0x2f43e2(0x130)][_0x2f43e2(0xb7)][_0x2f43e2(0xc0)](_0x3461ac,_0x3cee4c))__createBinding(_0x3b4c9e,_0x3461ac,_0x3cee4c);}return __setModuleDefault(_0x3b4c9e,_0x3461ac),_0x3b4c9e;},__metadata=this&&this['__metadata']||function(_0x5d49ac,_0x552823){const _0x4d3491=a127_0x537276;if(typeof Reflect===_0x4d3491(0x9a)&&typeof Reflect['metadata']==='function')return Reflect[_0x4d3491(0xfc)](_0x5d49ac,_0x552823);},GitCommitJob_1;Object[a127_0x537276(0xbb)](exports,a127_0x537276(0xc7),{'value':!![]}),exports[a127_0x537276(0x10c)]=void 0x0;function a127_0x2711(_0x5b5bc9,_0x563266){const _0x20af7a=a127_0x13af();return a127_0x2711=function(_0x50bbce,_0x56034e){_0x50bbce=_0x50bbce-0x81;let _0x13af1a=_0x20af7a[_0x50bbce];return _0x13af1a;},a127_0x2711(_0x5b5bc9,_0x563266);}const core_1=require(a127_0x537276(0xa5)),fs_internal_1=require(a127_0x537276(0x10d)),salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),utils_1=require(a127_0x537276(0xb5)),path_1=require(a127_0x537276(0x81)),typedi_1=__importStar(require(a127_0x537276(0x121))),constants_1=require(a127_0x537276(0xf4)),salesforce_commits_manager_service_1=require('../../salesforce/services/salesforce-commits-manager.service'),git_utils_1=require(a127_0x537276(0x115)),mdapi_utils_1=require('../utils/mdapi.utils'),api_error_1=require(a127_0x537276(0xae)),salesforce_error_1=require(a127_0x537276(0xb0)),git_commit_service_1=require(a127_0x537276(0xd4)),flosum_commit_error_1=require(a127_0x537276(0x105)),bitbucket_api_service_1=require(a127_0x537276(0xed)),git_provider_1=require('../../providers/types/git-provider'),sfdx_utils_1=require(a127_0x537276(0x122)),utils_2=require(a127_0x537276(0x113)),git_internal_1=require(a127_0x537276(0xcb)),providers_tokens_1=require(a127_0x537276(0x119)),connection_1=require(a127_0x537276(0xad)),sf_logger_v3_types_1=require(a127_0x537276(0xfb)),path_utils_1=require(a127_0x537276(0x9e)),commit_to_flosum_completed_notification_1=require(a127_0x537276(0x136)),commit_to_flosum_error_notification_1=require(a127_0x537276(0xf6));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x2ad3ca,_0x5c68c7){const _0x58279b=a127_0x537276;this[_0x58279b(0x83)]=_0x2ad3ca,this['providersFactory']=_0x5c68c7,this[_0x58279b(0xca)]=+(process[_0x58279b(0xc1)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x58279b(0x137)]=new core_1[(_0x58279b(0x87))](GitCommitJob_1[_0x58279b(0x107)]),this[_0x58279b(0xc6)]='',this['stats']={'removed':0x0,'modified':0x0,'added':0x0};}async[a127_0x537276(0xe7)](){const _0x614d6c=a127_0x537276,{repositoryGit:_0x20bf01}=this[_0x614d6c(0x8a)],_0x24733d=typedi_1[_0x614d6c(0x10f)][_0x614d6c(0x95)](providers_tokens_1[_0x614d6c(0xc8)][_0x614d6c(0x93)]);if(this[_0x614d6c(0x8a)][_0x614d6c(0xcc)]===git_provider_1[_0x614d6c(0x89)][_0x614d6c(0x8d)]){const _0x364090=typedi_1[_0x614d6c(0x10f)][_0x614d6c(0x95)](bitbucket_api_service_1[_0x614d6c(0x10b)]);await _0x364090[_0x614d6c(0x120)]();}return _0x20bf01[_0x614d6c(0xaa)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x614d6c(0x127)])(_0x20bf01)+_0x614d6c(0x103)+_0x24733d[_0x614d6c(0x8b)]()+'@');}async['completeNotification'](_0x398cc2,_0x28de8d,_0x17bd38,_0x169401){const _0x3fdadb=a127_0x537276;if(!this[_0x3fdadb(0x131)]['isEmailNotificationsEnabled']){this[_0x3fdadb(0x137)]['info'](_0x3fdadb(0x123));return;}await new commit_to_flosum_completed_notification_1['CommitToFlosumCompletedNotification']({'emails':_0x398cc2,'gitProvider':_0x28de8d,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x3fdadb(0xe6)][_0x3fdadb(0x107)],'repositoryName':_0x17bd38,'branchName':_0x169401})[_0x3fdadb(0xcd)]();}async[a127_0x537276(0x116)](_0x5ae61f,_0x456f9c,_0x105f61,_0x118699){const _0x505fe4=a127_0x537276;if(!this[_0x505fe4(0x131)][_0x505fe4(0xa4)]){this[_0x505fe4(0x137)][_0x505fe4(0x112)](_0x505fe4(0x123));return;}await new commit_to_flosum_error_notification_1[(_0x505fe4(0x8f))]({'emails':_0x5ae61f,'gitProvider':_0x456f9c,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0x505fe4(0x8f)][_0x505fe4(0x107)],'repositoryName':_0x105f61,'branchName':_0x118699})[_0x505fe4(0xcd)]();}[a127_0x537276(0xcf)](){this['stats']={'removed':0x0,'modified':0x0,'added':0x0};}async['updateFileNamesForSFDXProject'](){const _0x474ad0=a127_0x537276,_0x46d3d1=[...this[_0x474ad0(0x8a)][_0x474ad0(0xa8)]];this[_0x474ad0(0x8a)]['fileNames']=[];for(const _0x56752a of _0x46d3d1){this[_0x474ad0(0x8a)][_0x474ad0(0xa8)][_0x474ad0(0x128)](...await(0x0,utils_2['readFilesByFilename'])(_0x56752a,this[_0x474ad0(0xaf)]['dir']));}}async[a127_0x537276(0x12a)](){const _0x181c84=a127_0x537276;if(this[_0x181c84(0x8a)]['force'])return;const _0x26bc3f=[];for(const _0x294aad of this[_0x181c84(0x8a)][_0x181c84(0x9b)]){const _0x28bc61=await this[_0x181c84(0xf8)][_0x181c84(0x84)](_0x294aad['id']);_0x294aad[_0x181c84(0xf7)]=_0x28bc61['author'],_0x294aad['message']=_0x28bc61[_0x181c84(0x106)],_0x294aad[_0x181c84(0x82)]=_0x28bc61[_0x181c84(0x91)],_0x294aad['email']=_0x28bc61[_0x181c84(0xe8)];if(_0x294aad[_0x181c84(0xe8)]===constants_1[_0x181c84(0xa7)])throw new flosum_commit_error_1[(_0x181c84(0x10e))]();_0x26bc3f[_0x181c84(0x128)](...Object[_0x181c84(0xbc)](_0x294aad['files'])[_0x181c84(0x102)]());}this[_0x181c84(0x8a)][_0x181c84(0xa8)]=[...new Set(path_utils_1['PathUtils'][_0x181c84(0xf5)](this[_0x181c84(0x83)][_0x181c84(0x90)],_0x26bc3f,![]))];}async['sendComponents'](_0x1ca494,_0x16255e,_0x317d18){const _0x2c3eda=a127_0x537276,_0x344fd1=_0x317d18['reduce']((_0x10a75f,_0x350464)=>{const _0x426388=a127_0x2711;return _0x10a75f[_0x426388(0x11e)][_0x426388(0x128)](..._0x350464[_0x426388(0x11e)]),_0x10a75f[_0x426388(0xc9)][_0x426388(0x128)](..._0x350464[_0x426388(0xc9)]),_0x10a75f['removed'][_0x426388(0x128)](..._0x350464[_0x426388(0xe3)]),_0x10a75f;},{'inserted':[],'modified':[],'removed':[]}),_0x528ee8=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this[_0x2c3eda(0x83)][_0x2c3eda(0x85)](),'branchId':this['gitCommit']['getBranchId'](),'repositoryId':this['gitCommit'][_0x2c3eda(0xb2)](),'logger':this[_0x2c3eda(0xdd)],'commitId':this[_0x2c3eda(0xc6)]});await _0x528ee8[_0x2c3eda(0xb8)]([{'author':_0x1ca494,'message':_0x16255e,'inserted':_0x344fd1['inserted'],'modified':_0x344fd1['modified'],'removed':_0x344fd1[_0x2c3eda(0xe3)]}]);}async[a127_0x537276(0x8e)](_0x5ba30b,_0x1e0961){const _0x10ff1c=a127_0x537276;await this['sfLogger'][_0x10ff1c(0xe2)](this[_0x10ff1c(0x101)]+_0x10ff1c(0x110))[_0x10ff1c(0x117)](),await this[_0x10ff1c(0x83)][_0x10ff1c(0xeb)](_0x1e0961);const {added:_0x5b45a8,modified:_0x1e6f38,removed:_0x137693}=_0x5ba30b[_0x10ff1c(0x82)];_0x1e0961&&_0x1e6f38[_0x10ff1c(0x128)](..._0x137693['splice'](0x0));const _0x2f0362=path_utils_1[_0x10ff1c(0xc2)][_0x10ff1c(0xf5)](this[_0x10ff1c(0x83)][_0x10ff1c(0x90)],[..._0x5b45a8,..._0x1e6f38,..._0x137693],_0x1e0961&&!this[_0x10ff1c(0x8a)][_0x10ff1c(0xf0)]),_0x3d2f7d=(0x0,utils_2[_0x10ff1c(0xee)])(_0x2f0362);let _0x5b354e=0x0;const _0x558b41=[];(_0x5b45a8[_0x10ff1c(0xa6)]||_0x1e6f38[_0x10ff1c(0xa6)])&&this[_0x10ff1c(0x83)][_0x10ff1c(0xb2)]()&&(this[_0x10ff1c(0xc6)]=await this[_0x10ff1c(0x83)][_0x10ff1c(0xf9)](_0x5ba30b[_0x10ff1c(0x106)]));const _0x2741be=_0x3d2f7d[_0x10ff1c(0xa6)];let _0x2635cd=0x0;while(_0x3d2f7d[_0x10ff1c(0xa6)]){const _0x67c71b=_0x3d2f7d[_0x10ff1c(0x132)](),_0x4f0f2b=await this[_0x10ff1c(0x83)][_0x10ff1c(0x111)](_0x67c71b,this[_0x10ff1c(0xaf)]['dir'],_0x1e0961&&!this['gitCommitData'][_0x10ff1c(0xf0)]);_0x5b354e+=_0x4f0f2b[_0x10ff1c(0x11e)][_0x10ff1c(0xa6)]+_0x4f0f2b[_0x10ff1c(0xe3)][_0x10ff1c(0xa6)]+_0x4f0f2b['modified'][_0x10ff1c(0xa6)],this[_0x10ff1c(0x108)][_0x10ff1c(0x12d)]+=_0x4f0f2b[_0x10ff1c(0x11e)][_0x10ff1c(0xa6)],this[_0x10ff1c(0x108)][_0x10ff1c(0xc9)]+=_0x4f0f2b[_0x10ff1c(0xc9)][_0x10ff1c(0xa6)],this[_0x10ff1c(0x108)][_0x10ff1c(0xe3)]+=_0x4f0f2b[_0x10ff1c(0xe3)][_0x10ff1c(0xa6)],_0x2635cd++,_0x2635cd%0x64===0x0&&this[_0x10ff1c(0x137)][_0x10ff1c(0xe2)](_0x10ff1c(0xba),_0x2635cd,_0x2741be,_0x5b354e),_0x558b41[_0x10ff1c(0x128)](_0x4f0f2b),_0x5b354e>this[_0x10ff1c(0xca)]&&(await this['sendComponents'](_0x5ba30b[_0x10ff1c(0xf7)],_0x5ba30b[_0x10ff1c(0x106)],_0x558b41),await this[_0x10ff1c(0xdd)][_0x10ff1c(0xe2)](this[_0x10ff1c(0x101)]+_0x10ff1c(0xdf)+_0x5b354e+_0x10ff1c(0x12e))[_0x10ff1c(0x117)](),_0x5b354e=0x0,_0x558b41[_0x10ff1c(0x118)](0x0));}_0x558b41[_0x10ff1c(0xa6)]&&(await this[_0x10ff1c(0x133)](_0x5ba30b[_0x10ff1c(0xf7)],_0x5ba30b[_0x10ff1c(0x106)],_0x558b41),await this[_0x10ff1c(0xdd)][_0x10ff1c(0xe2)](this[_0x10ff1c(0x101)]+'\x20Processed\x20'+_0x5b354e+_0x10ff1c(0x12e))['send']());}async['proceedCommits'](_0x3a3d8b){const _0x317582=a127_0x537276,_0x1ca024=[...this[_0x317582(0x8a)][_0x317582(0x9b)]],_0x34a17c=_0x1ca024[_0x317582(0xa6)];let _0x5e0fc8=0x0;while(_0x1ca024[_0x317582(0xa6)]){const _0x4e9b01=_0x1ca024['shift']();!this[_0x317582(0x8a)][_0x317582(0xf0)]&&(this[_0x317582(0x83)][_0x317582(0xb2)]()?(await this['gitUtils']['checkoutTo'](_0x4e9b01['id']),await this[_0x317582(0xaf)][_0x317582(0xc3)](this[_0x317582(0xf8)][_0x317582(0x96)])):(await this[_0x317582(0xf8)][_0x317582(0xd2)](this['lastCommitHash']),await this['mdapiUtils']['prepareMdapi'](this[_0x317582(0xf8)][_0x317582(0x96)]))),await this[_0x317582(0x8e)](_0x4e9b01,_0x3a3d8b),await this[_0x317582(0xaf)][_0x317582(0xc4)](),_0x5e0fc8+=0x1,await this[_0x317582(0xdd)][_0x317582(0xe2)](this[_0x317582(0x101)]+_0x317582(0xc5)),await this['sfLogger'][_0x317582(0xe2)](this['prefix']+_0x317582(0xfd)+this[_0x317582(0x108)][_0x317582(0x12d)]+_0x317582(0xf2)),await this[_0x317582(0xdd)][_0x317582(0xe2)](this[_0x317582(0x101)]+_0x317582(0xd5)+this[_0x317582(0x108)][_0x317582(0xc9)]+_0x317582(0xf2)),await this['sfLogger'][_0x317582(0xe2)](this[_0x317582(0x101)]+_0x317582(0x11d)+this[_0x317582(0x108)][_0x317582(0xe3)]+_0x317582(0xf2)),await this['sfLogger'][_0x317582(0xe2)](this['prefix']+_0x317582(0x126)+_0x5e0fc8+'/'+_0x34a17c+_0x317582(0x8c))[_0x317582(0x117)](),this[_0x317582(0xcf)]();}}async['cleanUp'](){const _0x211d8e=a127_0x537276;this[_0x211d8e(0xf8)]&&await this['gitUtils'][_0x211d8e(0xc4)]()[_0x211d8e(0x135)](()=>void 0x0),this[_0x211d8e(0xaf)]&&await this[_0x211d8e(0xaf)][_0x211d8e(0xc4)]()[_0x211d8e(0x135)](()=>void 0x0);}async['run'](_0x4198ba){const _0x594476=a127_0x537276;this['gitCommitData']=_0x4198ba,this[_0x594476(0x83)]['setCommitDto'](this[_0x594476(0x8a)]),this['gitApiService']=typedi_1[_0x594476(0x10f)][_0x594476(0x95)](providers_tokens_1[_0x594476(0xc8)]['gitApiService']),this['config']=typedi_1[_0x594476(0x10f)][_0x594476(0x95)](providers_tokens_1['Tokens']['config']),this['sfLogger']=typedi_1[_0x594476(0x10f)]['get'](providers_tokens_1[_0x594476(0xc8)]['logger']),this[_0x594476(0x101)]='[GIT\x20->\x20FLOSUM]\x20[Repository:\x20'+_0x4198ba[_0x594476(0xfa)]+_0x594476(0xd3)+_0x4198ba[_0x594476(0x124)]+']\x20['+GitCommitJob_1['name']+']',this['gitUtils']=new git_utils_1[(_0x594476(0xbe))](await this['getRemote']()),this['mdapiUtils']=new mdapi_utils_1[(_0x594476(0x12c))](),this[_0x594476(0xdd)][_0x594476(0xe2)](this['prefix']+'\x20Start\x20Git-commit\x20job.');try{this['sfLogger'][_0x594476(0xe2)](this[_0x594476(0x101)]+_0x594476(0xf3)),await this[_0x594476(0x83)][_0x594476(0x98)](),await this[_0x594476(0x83)][_0x594476(0xac)]('In\x20Progress'),this[_0x594476(0xdd)][_0x594476(0xe2)](this[_0x594476(0x101)]+_0x594476(0xd8)),this[_0x594476(0x9c)]=await git_internal_1['Git'][_0x594476(0xd7)](await this[_0x594476(0xe7)](),this[_0x594476(0x8a)]['branch']),this[_0x594476(0x137)][_0x594476(0xe2)](_0x594476(0x134),this[_0x594476(0x9c)]);const _0x46e58e=await this['gitCommit'][_0x594476(0xb6)](this[_0x594476(0x9c)]);if(_0x46e58e){this[_0x594476(0xdd)]['log'](_0x594476(0xd9)),await this['gitCommit'][_0x594476(0xac)](_0x594476(0x94));return;}this['sfLogger']['log'](this[_0x594476(0x101)]+_0x594476(0xf1)+this[_0x594476(0x8a)][_0x594476(0xa1)]+'.'),await this[_0x594476(0xf8)][_0x594476(0xa3)](this[_0x594476(0x8a)]['branch'],this[_0x594476(0x8a)][_0x594476(0xfa)]),this[_0x594476(0xdd)]['log'](this[_0x594476(0x101)]+_0x594476(0x129));const _0x1b5adc=await sfdx_utils_1[_0x594476(0xb1)][_0x594476(0xce)](this[_0x594476(0xf8)][_0x594476(0x96)]);await this[_0x594476(0x12a)]();!this['sfLogger'][_0x594476(0xbd)]()&&this[_0x594476(0xdd)][_0x594476(0x114)](await salesforce_logger_v3_service_1[_0x594476(0x12b)]['createLoggerId'](sf_logger_v3_types_1[_0x594476(0x9f)][_0x594476(0x104)]));await this[_0x594476(0xdd)][_0x594476(0x117)]();if(_0x4198ba[_0x594476(0xf0)]){await this[_0x594476(0xaf)][_0x594476(0xc3)](this['gitUtils'][_0x594476(0x96)]),await this[_0x594476(0xdd)][_0x594476(0xe2)](this['prefix']+_0x594476(0x11b))[_0x594476(0x117)]();const _0xc87ebc=(await fs_internal_1['FS'][_0x594476(0xa0)](this[_0x594476(0xaf)][_0x594476(0x96)],!![]))[_0x594476(0x125)](_0x1264cb=>(0x0,path_1[_0x594476(0xfe)])(this['mdapiUtils'][_0x594476(0x96)],_0x1264cb));this[_0x594476(0xdd)]['log'](this[_0x594476(0x101)]+'\x20Force\x20commit.\x20Have\x20to\x20parse\x20'+_0xc87ebc[_0x594476(0xa6)]+'\x20files\x20before\x20sync.'),this[_0x594476(0x8a)][_0x594476(0xa8)]=[],this[_0x594476(0x8a)][_0x594476(0x9b)]=[{'files':{'modified':_0xc87ebc,'added':[],'removed':[]},'id':await this[_0x594476(0xf8)][_0x594476(0xe1)](),'message':_0x594476(0x97),'username':constants_1['DEFAULT_GIT_USER_NAME']}];}await this[_0x594476(0x83)][_0x594476(0x9d)]({[this[_0x594476(0x8a)][_0x594476(0xa1)]]:{'lastCommit':this[_0x594476(0x9c)]}}),await this[_0x594476(0xdd)][_0x594476(0xe2)](this[_0x594476(0x101)]+'\x20[SFDX:\x20'+(_0x1b5adc?'YES':'NO')+_0x594476(0xdc))[_0x594476(0x117)](),await this[_0x594476(0xb8)](_0x1b5adc),await this[_0x594476(0xdd)]['log'](this[_0x594476(0x101)]+'\x20Job\x20done.')[_0x594476(0x117)](),await this[_0x594476(0x83)]['updateStatus'](_0x594476(0x94)),await this['completeNotification']([_0x4198ba[_0x594476(0xe8)]],this[_0x594476(0x131)][_0x594476(0xd0)],_0x4198ba[_0x594476(0xfa)],_0x4198ba[_0x594476(0x124)]);}catch(_0x5824bf){await this[_0x594476(0xef)]();if(_0x5824bf instanceof flosum_commit_error_1[_0x594476(0x10e)])await this[_0x594476(0x83)][_0x594476(0xac)](_0x594476(0x94))[_0x594476(0x135)](()=>void 0x0),this[_0x594476(0x137)]['log'](this[_0x594476(0x101)]+_0x594476(0xd6));else{await this[_0x594476(0x137)][_0x594476(0xb4)](this[_0x594476(0x101)]+_0x594476(0x92)+(_0x5824bf instanceof api_error_1[_0x594476(0xb3)]||_0x5824bf instanceof salesforce_error_1['SalesforceError']?_0x5824bf[_0x594476(0xab)]():_0x5824bf)),await this[_0x594476(0x83)][_0x594476(0x9d)]({}),await this[_0x594476(0x83)][_0x594476(0xac)](_0x594476(0xff))[_0x594476(0x135)](()=>void 0x0),await this[_0x594476(0x116)]([_0x4198ba[_0x594476(0xe8)]],this[_0x594476(0x131)][_0x594476(0xd0)],_0x4198ba[_0x594476(0xfa)],_0x4198ba[_0x594476(0x124)]);throw _0x5824bf;}}finally{await this['cleanUp'](),await this[_0x594476(0xdd)]['send']()[_0x594476(0x135)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a127_0x537276(0xb9)])({'transient':!![]}),__metadata('design:paramtypes',[git_commit_service_1[a127_0x537276(0xdb)],connection_1[a127_0x537276(0x86)]])],GitCommitJob),exports[a127_0x537276(0x10c)]=GitCommitJob;